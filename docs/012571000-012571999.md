# StackOverflow 问答 12571000-12571999

# python - 从python服务器上的数据输入处理xml的简单方法

> ID：12571003
> 
> 赞同：1
> 
> 时间：2012-09-24T18:47:14.073
> 
> 标签：python, xml, cherrypy, genshi

我刚刚开始了应该使用 pythonic 简单网络服务器的项目（我只需要一个“配置”页面）从用户那里获取真正多字段（超过 150 个）的数据，然后将所有这些数据（字段+数据）转换为xml 文件并将其发送到另一个 python 模块。所以问题是 - 处理这个问题的简单方法是什么？我找到了cherryPy（作为网络服务器）和Genshi（作为xml解析器），但对我来说如何组合它甚至不是很明显（因为我理解Genshi为发布提供模板（甚至xml），但是如何获取（转换）数据xml）。Ive red cherryPy 和 Genshi 教程，但它与我真正需要的有点不同，而且我现在在 python（尤其是 web）方面不太强，无法找到正确的方向。如果你能给我看任何类似的例子来理解这个概念，那就太好了！

对不起我的英语不好！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T10:03:08.300

Python 自带方便`xml.etree`，不需要额外的依赖即可输出简单的 XML。这是示例。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import xml.etree.cElementTree as etree

import cherrypy

config = {
  'global' : {
    'server.socket_host' : '127.0.0.1',
    'server.socket_port' : 8080,
    'server.thread_pool' : 8
  }
}

class App:

  @cherrypy.expose
  def index(self):
    return '''<!DOCTYPE html>
      <html>
      <body>
        <form action="/getxml" method="post">
          <input type="text" name="key1" placeholder="Key 1" /><br/>
          <input type="text" name="key2" placeholder="Key 2" /><br/>
          <input type="text" name="key3" placeholder="Key 3" /><br/>
          <select name="key4">
            <option value="1">Value 1</option>
            <option value="2">Value 2</option>
            <option value="3">Value 3</option>
            <option value="4">Value 4</option>
          </select><br/>
          <button type="submit">Get XML</button>
        </form>
      </body>
      </html>
    '''

  @cherrypy.expose
  def getxml(self, **kwargs):
    root = etree.Element('form')
    for k, v in kwargs.items():
      etree.SubElement(root, k).text = v

    cherrypy.response.headers['content-type'] = 'text/xml'
    return etree.tostring(root, encoding = 'utf-8')

if __name__ == '__main__':
  cherrypy.quickstart(App(), '/', config) 
```

# c# - 来自服务器的异步响应是否会创建一个新线程本身

> ID：12571006
> 
> 赞同：-1
> 
> 时间：2012-09-24T18:47:19.603
> 
> 标签：c#, .net

在 .net 异步响应中，它是一个线程还是在主 UI 线程上？再说一次，如果它不是一个不同的线程，如果我在异步响应方法中工作，它是否都会进入阻塞状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:53.010

在 .NET 中可能。有时会，有时不会。

有关更多信息，请参阅：http: [//social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/fa9e1830-ef06-4dd1-8ef7-59ebf04ab1e6/](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/fa9e1830-ef06-4dd1-8ef7-59ebf04ab1e6/)

# python - cloudsql和datastore与django结合在一起

> ID：12571007
> 
> 赞同：0
> 
> 时间：2012-09-24T18:47:22.357
> 
> 标签：python, django, google-app-engine, google-cloud-datastore, google-cloud-sql

我正在尝试查找有关设置我的 django+cloudsql 应用程序以便能够同时使用数据存储的信息。除了作为一个重要的话题之外，我还需要它来处理图像，这在 appengine 上似乎只发生在低级别并使用数据存储的图像 API 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:00:20.620

我不知道您从哪里得到的图像 API 只能使用数据存储区的印象。[文档](https://developers.google.com/appengine/docs/python/images/imageclass)似乎清楚地表明，您可以将 blob 密钥或 Google 存储文件名或图像数据本身作为字节字符串传递*给*类`Image`。

# c# - 如何将 TreeViewItem 复制到另一个使用对象作为标签和标题的对象上？

> ID：12571008
> 
> 赞同：1
> 
> 时间：2012-09-24T18:47:38.790
> 
> 标签：c#, wpf, cloning

我有一个 TreeViewItem，我在其中使用 TextBlock 作为 Header 属性，并使用自定义类作为 Tag 属性。如何创建 TreeViewItem 的副本？我试过序列化它，但它一直进入无限循环，创建堆栈溢出异常，当它尝试序列化 TreeViewItem 时，但我不知道在哪里。

这是我用作 TreeViewItem 的 Tag 属性的自定义类

```
 [Serializable]
 [XmlRoot(ElementName="TVITagProperty")]
 public class TVITagProperty {
      #region Members
      /// <summary>
      /// Tree Type
      /// </summary>
      public enum TreeType {
           User = 1,
           Other = 2,
      }

      /// <summary>
      /// Tag Property Type
      /// </summary>
      public enum TagType {
           Entity = 1,
           User = 2,
      };
      #endregion

      #region C'tor
      /// <summary>
      /// Public parameterless constructor
      /// </summary>
      public TVITagProperty() { }

      /// <summary>
      /// Create a TreeViewItem Tag Property
      /// </summary>
      /// <param name="type">Type of Tag Property</param>
      /// <param name="value">Value of Tag Property</param>
      public TVITagProperty(TreeType treeType, TagType tagType, string value) {
           ViewType = treeType;
           PropertyType = tagType;
           PropertyValue = value;
           PropertyDirectory = false;
      }

      /// <summary>
      /// Create a TreeViewItem Tag Property
      /// </summary>
      /// <param name="type">Type of Tag Property</param>
      /// <param name="value">Value of Tag Property</param>
      public TVITagProperty(TagType type, long? value) {
           PropertyType = type;
           PropertyValue = value.ToString();
      }
      #endregion

      #region Methods
      /// <summary>
      /// Overloaded Equals method, compares one TVI Tag Property Property Type and Value
      /// </summary>
      /// <param name="obj"></param>
      /// <returns></returns>
      public bool Equals(TVITagProperty obj) {
           if(obj != null) {
                if(obj.PropertyDirectory == true) {
                     if(this.ViewType == obj.ViewType &&
                          this.PropertyType == obj.PropertyType) {
                          return true;
                     }
                }
                else if(this.ViewType == obj.ViewType &&
                     this.PropertyType == obj.PropertyType &&
                     this.PropertyValue.Equals(obj.PropertyValue)) {
                     return true;
                }
           }
           return false;
      }

      /// <summary>
      /// Overrides ToString() and returns Property value
      /// </summary>
      /// <returns></returns>
      public override string ToString() {
           return this.PropertyValue;
      }

      /// <summary>
      /// Returns the Property value as a long
      /// </summary>
      /// <returns></returns>
      public long ToLong() {
           return long.Parse(this.PropertyValue);
      }
      #endregion

      #region Properties
      /// <summary>
      /// Represents the type of TreeView used in the View
      /// </summary>
      [XmlAttribute]
      public TreeType ViewType { get; set; }
      /// <summary>
      /// The type of Property Tag
      /// </summary>
      [XmlAttribute]
      public TagType PropertyType { get; set; }
      /// <summary>
      /// The value of Property Tag
      /// </summary>
      [XmlAttribute]
      public string PropertyValue { get; set; }
      /// <summary>
      /// Defines whether the TVI is an object or directory
      /// </summary>
      [XmlAttribute]
      public bool PropertyDirectory { get; set; }
      #endregion
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:35:25.703

创建 wpf TreeViewItem 的副本似乎是错误的方法 - 为什么要这样做？

更好的方法是自己不生成任何树视图项，而是让 wpf 通过分层模板和 itemsource 处理它 - 然后您可以在 itemssource 中制作对象的副本，wpf 将为您呈现它们。

例如看这个：

[WPF：在 TreeViewItem 中正确存储对象](https://stackoverflow.com/questions/718858/wpf-correctly-storing-an-object-in-a-treeviewitem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:29:11.823

在 codeproject 上有一个很好的深度克隆对象[here](http://www.codeproject.com/Articles/23832/Implementing-Deep-Cloning-via-Serializing-objects)

```
using System;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;     

/// <summary>
/// Provides a method for performing a deep copy of an object.
/// Binary Serialization is used to perform the copy.
/// </summary>
public static class ObjectCopier
{
 /// <summary>
 /// Perform a deep Copy of the object.
 /// </summary>
 /// <typeparam name="T">The type of object being copied.</typeparam>
 /// <param name="source">The object instance to copy.</param>
 /// <returns>The copied object.</returns>
 public static T Clone<T>(T source)
 {
  if (!typeof(T).IsSerializable)
  {
    throw new ArgumentException("The type must be serializable.", "source");
  }

  // Don't serialize a null object, simply return the default for that object
  if (Object.ReferenceEquals(source, null))
  {
    return default(T);
  }

  IFormatter formatter = new BinaryFormatter();
  Stream stream = new MemoryStream();
  using (stream)
  {
    formatter.Serialize(stream, source);
    stream.Seek(0, SeekOrigin.Begin);
    return (T)formatter.Deserialize(stream);
  }
 }
} 
```

[此处](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)发布更多参考资料和讨论

# c# - 为什么在这里使用收益回报？

> ID：12571010
> 
> 赞同：3
> 
> 时间：2012-09-24T18:47:46.327
> 
> 标签：c#, yield, yield-return

我在一个[开源项目](http://clay.codeplex.com)中找到了以下方法：

```
 static IEnumerable<T> Cat<T>(T t) {
        yield return t;
    } 
```

据我了解，它除了返回`IEnumerable<T>`包含`t`. 如果我是对的并且它实际上相当于 eg `return new List<T>{t};`，那么在这里使用的目的/优势是`yield return`什么？如果我错了，我会错过什么？

[完整的源代码可以在这里找到](http://clay.codeplex.com/SourceControl/changeset/view/6cad3db2a0c2#src/ClaySharp.Tests/ClayTests.cs)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:52:40.743

这只是创建了一个包含单个元素 ( `t`) 的可枚举类型。实际上，您是正确的 - 它实际上与仅返回一个`List<T>`带有一个元素的新数组或一个带有一个元素的新数组等非常相似。

主要区别在于返回的类型实际上不是 a`List<T>`或数组 - 它是编译器生成的类型。例如，您将无法将结果转换为列表并添加元素。`List<T>`在实际用途中，它的行为与您所描述的返回一个新的相同。

除了开发人员可能更喜欢这种语法之外，可能没有真正的优势。我怀疑它可能被用来允许单个元素与 API 的其他部分一起工作，这些部分期望`IEnumerable<T>`传入一个，尽管方法名称还有一些不足之处，IMO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:58:47.917

返回实际集合和使用之间的区别`yield`只是您返回的对象的类型。

如果您返回任何实现的集合，`IEnumerable<T>`则返回的对象的实际类型将是该类型。例如，如果您返回 a `List<T>`，则返回的引用将是类型`IEnumerable<T>`，但引用指向的对象的实际类型是 的实例`List<T>`。

如果使用`yield`，编译器将创建一个没有已知名称的枚举器对象。返回的引用类型也将是`IEnumerable<T>`，但引用指向的对象的实际类型将是编译器创建的东西。

例如获取为整数创建的枚举器类型的名称：

```
Console.WriteLine(Cat<int>(42).GetType().Name); 
```

将显示编译器使用的内部名称，例如我从代码中得到的这个结果：

```
<Cat>d__5`1 
```

如果函数将返回 a `List<int>`，则类型将显示为：

```
List`1 
```

让编译器为此创建枚举器的动机可能只是它比这样的更短：

```
static IEnumerable<T> Cat<T>(T t) {
  List<T> list = new List<T>(1);
  list.Add(t);
  return list;
} 
```

（您可以使用较新版本的 C# 中的快捷方式将其写得更短一些，但仍不如`yield`.）

当类型是集合时，您可以将引用转换为实际类型并更改集合中的值：

```
IEnumerable<int> ienum = Cat<int>(42);

((List<int>)ienum)[0] = 1337;

foreach (int value in ienum) {
  Console.WriteLine(value);
} 
```

将输出：

```
1337 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:55:39.930

如果您有一个可枚举项，并且您想附加一项，则此函数会将单个项转换为可枚举项，例如：

```
 IEnumerable<someType> Columns;

 var headers = String.Join(",", Columns.Select(c => c.Name).Concat(new string[] { "Last Column" })); 
```

写起来更好

```
 var headers = String.Join(",", Columns.Select(c => c.Name).Concat(Cat("Last Column"))); 
```

# php - 指向 php if 语句的 href 链接

> ID：12571011
> 
> 赞同：1
> 
> 时间：2012-09-24T18:47:53.183
> 
> 标签：php, if-statement, href

PHP/HTML 问题

我希望这不是一个愚蠢的问题，但我正在尝试将数据处理为来自两个链接的 if 语句。我可以使用两个表单轻松完成此操作，因为表单可以具有名称如下的提交按钮：

```
<form action="process.php" method="post"> Enter your name: <input type="text" name="name" size="20"><br /> 
<input type="submit" name="edit" value="Edit"> 
<input type="submit" name="delete" value="Delete">
</form> 
```

process.php 中的 if 语句可以是 if edit do this else do this。

我想做的是同样的事情，但来自一个href链接。由于标签在 HTML5 中没有名称，我将如何设置 if 语句？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:53:25.697

例如：

```
<a href="process.php?action=edit">Edit</a>

<?php

$action = $_GET['action'];

if($action == 'edit'){
// edit.
}else{
// else another action.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:53:10.910

您可以添加自定义 $_GET 变量，然后评估它们。例如`example.com/form?action=edit`，`example.com/form?action=delete`然后在 PHP 中：

```
$action = $_GET['action'];
if($action === 'edit') {
    this;
} else if ($action === 'delete') {
    that;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T19:03:37.410

除非您将表单方法显式设置为`get`，否则表单通常会将请求作为`post`. 您可以通过调用 PHP 访问这些数据`$_POST["edit"]`。

常规链接可以在 URL 字符串中传递变量，例如`http://example.com/process.php?edit=true`. 您可以通过调用来访问这些变量`$_GET["edit"]`。

如果您想对 $_POST 和 $_GET 数据使用相同的 process.php 文件，您可以让代码使用结合了`$_REQUEST`超全局（[http://php.net/manual/en/reserved.variables.request.php](http://php.net/manual/en/reserved.variables.request.php)）来自 $_GET、$_POST 和 $_COOKIES 的数据

在这种情况下，您的 PHP 代码将显示为：

```
if ($_REQUEST["edit"]) {
    /* Some code */
}
elseif ($_REQUEST["delete"]) {
    /* Some other code */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T18:56:41.843

不知道我是否完全理解。怎么做这样的事情：

```
<a href="process.php?delete">Delete</a>
<a href="process.php?edit">Edit</a> 
```

进而

```
if(defined($_GET["delete"])){
}
else if(defined($_GET["edit"])){
} 
```

# sql-server - Visual Studio 2012 CREATE DATABASE 在数据库“主”中被拒绝

> ID：12571015
> 
> 赞同：0
> 
> 时间：2012-09-24T18:48:27.730
> 
> 标签：sql-server, visual-studio-2010

我安装了 Visual Studio 2012.. 但我注意到它没有安装 SQL Server。所以当我尝试创建一个数据库并添加一个连接然后测试一个连接时，它告诉我我遇到了一个与无法连接到远程源有关的错误。

那么我有哪些安装 SQL Server 的选项？或者有没有其他选择来创建数据库？

更新：

我必须访问..但我得到：

> *CREATE DATABASE 在数据库“主”中被拒绝*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:12:12.573

好的解决了。必须安装 sql management studio 2005 并以管理员身份运行它，然后在那里创建一个数据库...该死的，Windows 7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:54:03.850

Visual Studio 2012 确实安装了 SQL Express，但它安装为 (localdb)\v11.0 而不是传统的 .\sqlexpress。看看是否可以连接到 localdb 实例。这是一个面向开发人员的 SQL Express 版本。

有关更多信息，请查看：http: [//blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

# c# - 哪个 winForm 控件用于此目的？

> ID：12571016
> 
> 赞同：1
> 
> 时间：2012-09-24T18:48:28.917
> 
> 标签：c#, winforms

我想在 c# 中创建一个 winform，如下所示：

![这是winform](../Images/ac4acf1e7c89657f3a2910a9cd0af636.png)

我想用蓝色重现该区域。请问我需要使用哪个控件？

非常感谢，

此致，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:03:00.373

有一个 API 叫做[`DwmExtendFrameIntoClientArea`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969512%28v=vs.85%29.aspx).

您可以直接将它与 p/invoke 一起使用（[代码项目上的示例](http://www.codeproject.com/Articles/15394/Drawing-smooth-text-and-pictures-on-the-extended-g)）。

但是似乎有很多 c# 包装器，例如[Windows Forms Aero](http://windowsformsaero.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:06:57.070

在我看来，您可以使用标准格式复制它，`BackColor`设置为蓝色（而不是默认颜色），其中的面板`BackColor`设置为白色（而不是默认透明）。要将 X 作为唯一的顶部，您需要将`MinimizeBox`and`MaximizeBox`属性切换为 false（参见[此处](http://dotnetdud.blogspot.com/2009/01/how-to-disable-minimize-button-on.html)的简短示例）。

这有帮助吗？

# javascript - 我怎样才能让这个响应式导航正确地向上/向下滑动？

> ID：12571019
> 
> 赞同：0
> 
> 时间：2012-09-24T18:48:46.867
> 
> 标签：javascript, jquery, css

我正在尝试创建类似于引导响应式导航的东西。当我减小屏幕尺寸以便启动媒体查询时，我单击菜单按钮并且 ul 向下滑动。但是当我再次单击菜单按钮时， ul 朝上，但随后又立即向下滑动。我怎样才能防止这种情况发生？此外，奖励积分，当我单击菜单按钮并且 ul 向下滑动时，菜单按钮右侧的背景与 ul/nav 的其余部分颜色不同。有没有办法让整个导航的背景保持一致？

这是带有窗格的 jsFiddle：http: [//jsfiddle.net/scottm28/mRbPd/](http://jsfiddle.net/scottm28/mRbPd/)

全屏：http: [//jsfiddle.net/scottm28/mRbPd/embedded/result/](http://jsfiddle.net/scottm28/mRbPd/embedded/result/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:52:37.430

我添加`{}`到 else 语句，它现在对我来说很好：http: [//jsfiddle.net/mRbPd/1/](http://jsfiddle.net/mRbPd/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:52:37.903

通过添加括号来修复它...

[http://jsfiddle.net/mRbPd/2/](http://jsfiddle.net/mRbPd/2/)

我相信不同的背景颜色是由于 CSS 渲染错误造成的，因为它有时会正确渲染，有时不会。你总是可以在一个类中应用渐变，如果你非常渴望它的工作，可以快速删除然后重新应用它们。

这种解决*了*渐变问题，[http://jsfiddle.net/mRbPd/3/](http://jsfiddle.net/mRbPd/3/)但我认为重新应用该类效率很低，因为这意味着浏览器必须重新绘制渐变。

# c - 无法在 ICMPv6 数据包中设置路由器警报选项

> ID：12571022
> 
> 赞同：2
> 
> 时间：2012-09-24T18:49:02.903
> 
> 标签：c, alert, router

我正在尝试根据[http://www.ietf.org/rfc/rfc3542.txt](http://www.ietf.org/rfc/rfc3542.txt)附录 C 中指定的示例在发送数据包之前在数据包中设置 Hop-By-Hop 选项。我在使用 API 时没有看到任何错误，但在发送的数据包中未设置 HBH 选项。

这是我的代码：

```
set_rtr_alert_opt (struct msghdr *msg, struct cmsghdr *cmsg)
{
    int         ralen = 0, currentlen = 0;
    void        *hbhbuf = NULL, *optp = NULL;
    u_int8_t    rtr_alert;

    rtr_alert = htons(IP6_ALERT_MLD);

    /*
     * Set the Router Alert option into the cmsg
     */
    ralen = inet6_opt_init(NULL, 0);
    if (ralen == -1) {
        return(FALSE);
    }

    ralen = inet6_opt_append(NULL, 0, ralen, IP6OPT_ROUTER_ALERT, 2,
                             2, NULL);
    if (ralen == -1) {
       return(FALSE);
    }

    ralen = inet6_opt_finish(NULL, 0, ralen);
    if (ralen == -1) {
        return(FALSE);
    }

    cmsg->cmsg_len = CMSG_LEN(ralen);
    cmsg->cmsg_level = IPPROTO_IPV6;
    cmsg->cmsg_type = IPV6_HOPOPTS;
    hbhbuf = CMSG_DATA(cmsg);
    msg->msg_controllen += ALIGN(cmsg->cmsg_len);

    currentlen = inet6_opt_init(hbhbuf, ralen);
    if (currentlen == -1) {
        return(FALSE);
    }

    currentlen = inet6_opt_append(hbhbuf, ralen, currentlen,
                                  IP6OPT_ROUTER_ALERT, 2, 2, &optp);
    if (currentlen == -1) {
        return(FALSE);
    }

    inet6_opt_set_val(optp, 0, &rtr_alert, sizeof(rtr_alert));
    currentlen = inet6_opt_finish(hbhbuf, ralen, currentlen);
    if (currentlen == -1) {
        return(FALSE);
    }

    return(TRUE);
} 
```

在此之后，我调用 sendmsg() 将数据包发送出去。数据包确实出去了，但数据包中不存在 HBH 选项。

# c++ - 如何在命令行上构建 VC++ 2010 项目？

> ID：12571023
> 
> 赞同：1
> 
> 时间：2012-09-24T18:49:05.943
> 
> 标签：c++, visual-studio-2010, ide, msbuild

我需要使用 MSBuild 在 Windows 命令行上构建一个 VC++ 2010 项目。项目使用 VC++ 2010 构建文件，但无法在命令行上构建。

故障均以***致命错误 C1083 的形式出现：无法打开包含文件：'boost/.../* .hpp'：没有这样的文件或目录**

我想知道...

1）为什么这发生在命令行而不是IDE？

2) 如何通过命令行添加 boost include 和 lib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:01:05.867

即使它已被弃用，但如果您想直接通过 cmd-line 使用 dev-studio 构建它，它仍然受支持。我已经尝试过几次使用 MSBuild，但由于问题而继续使用。例如`[path-to-tools]\devenv.exe my_project.sln /build "Release|x64" /project my_project`

# php - 点击页面标题

> ID：12571025
> 
> 赞同：-1
> 
> 时间：2012-09-24T18:49:29.110
> 
> 标签：php, wordpress, title

在 wordpress 网站中，我正在寻找一些东西，以便我可以禁用单击类别帖子中的标题。

只希望它们是简单的文本而不是链接

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T18:29:08.127

在您的 wordpress 模板文件中，您应该看到类似

```
<a href="<?php the_permalink(); ?>" title="<?php sprintf( __( 'Permanent Link to %s', 'theme-name' ), the_title_attribute( 'echo=0' ) ); ?>"><?php the_title(); ?></a> 
```

只需删除`<a>`它的周围。

你也可以做这个客户网站。

如果你有 jQuery，这很容易：

```
jQuery('.fancy').each(function(_,el){
  var el = jQuery(el);        
  el.text(el.find('a').text())
 }) 
```

# jquery - jQuery 脚本未在生产中加载（Heroku - 雪松堆栈）

> ID：12571026
> 
> 赞同：1
> 
> 时间：2012-09-24T18:49:31.530
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

我正在尝试在我的应用程序中设置一个模态 jQuery 脚本，它适用于本地/开发，但是当我将它推送到 heroku 时，脚本不起作用。

我查看了 html 源代码，我认为它与资产管道有关。我在 slug 编译（heroku push）期间编译了资产。

这是源在本地的样子：

```
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/pages.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/photos.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.masonry.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.simplemodal-1.4.3.js?body=1" type="text/javascript"></script>
<script src="/assets/pages.js?body=1" type="text/javascript"></script>
<script src="/assets/photos.js?body=1" type="text/javascript"></script>
<script src="/assets/photos.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<link href="/assets/custom.css?body=1" media="screen" rel="stylesheet" type="text/css" /> 
```

但是，在生产（heroku）中，我只得到：

```
<link href="/assets/application-0183e1470ce8e2ba6f27e018f2b8aabf.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/application-20571ddeb4d7b86e69d16370f197cec1.js" type="text/javascript"></script>
<link href="/assets/custom-3ab2912a0b988babf6979cc153672fe0.css" media="screen" rel="stylesheet" type="text/css" /> 
```

这就是我的 application.html.erb 的样子：

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= stylesheet_link_tag 'custom', :media => 'screen' %>
<%= csrf_meta_tags %> 
```

和我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

有什么线索可以在生产中加载我的所有 javascript/jQuery 文件吗？让我知道你们是否需要任何其他文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:03:48.440

您是否尝试过在本地编译资产？Slug 编译对我来说似乎不稳定（它讨厌引导程序）。

```
RAILS_ENV=production bundle exec rake assets:precompile

git add public/assets

git commit -m "vendor compiled assets" 
```

[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

# php - 是否可以在 Zend Framework 中获取所有设置的视图变量？

> ID：12571031
> 
> 赞同：3
> 
> 时间：2012-09-24T18:50:02.150
> 
> 标签：php, zend-framework

如果我有一个视图并想查看特定视图的所有设置变量，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T19:08:06.590

分配给`Zend_View`对象的变量只是成为视图对象的公共属性。

以下是在特定视图对象中设置所有变量的几种方法。

**从视图脚本中：**

```
$viewVars = array();

foreach($this as $name => $value) {
    if (substr($name, 0, 1) == '_') continue; // protected or private

    $viewVars[$name] = $value;
}

// $viewVars now contains all view script variables 
```

**从`Zend_View`控制器中的对象：**

```
$this->view->foo = 'test';
$this->view->bar = '1234';

$viewVars = get_object_vars($this->view);
// $viewVars now contains all public properties (view variables) 
```

最后一个示例同样适用于使用手动创建的视图对象`$view = new Zend_View();`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-03T01:33:03.470

还有一种更优雅的方式：`$this->viewModel()->getCurrent()->getVariables();`

对于嵌套视图模型：`$this->viewModel()->getCurrent()->getChildren()[0]->getVariables();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-06T17:27:17.100

```
$this->view->getVars() 
```

或从视图内部

```
$this->getVars() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-07T16:51:19.033

就我而言，我需要从另一个视图中加载部分视图。实际上，这很容易。无需担心将变量从父视图传递给子视图，只需传递父视图对象即可。

```
<?php echo $this->partial('my-view.phtml', $this); ?> 
```

# api - 带有 API 问题的 Excel VBA

> ID：12571032
> 
> 赞同：0
> 
> 时间：2012-09-24T18:50:08.343
> 
> 标签：api, vba, excel

所以我在尝试从 API 中获取正确运行的方法时遇到了麻烦。文档说该方法具有以下内容：

```
updateMethod(Object, String, Int) 
```

对象是包含要更新的项目的工作表或工作簿。String 是项目的名称，而 Int 是将发生的更新类型。

`True`该方法实际上必须与布尔值一起使用，因为如果更新，它将返回，`False`否则：

wasUpdated = api.updateMethod(Object, String, Int)

所以我的代码示例是：

```
Function TestUpdate()

    Dim wasUpdated As Boolean
    Dim Container As Object
    Dim RangeName As String
    Dim refreshType As Integer

    Set Container = ThisWorkbook.Worksheets(1)
    RangeName = "RangeTest"
    refreshType = 0

    wasUpdated = api.updateMethod(Container, RangeName, refreshType)

    If wasUpdate = True Then
        MsgBox "Updated"
    Else
        MsgBox "Failed"
    End If

End Function 
```

我不断收到“需要对象”的运行时错误 424 `wasUpdate = ...`。我没有正确定义对象吗？或者这可能是 API 本身的问题，我需要联系公司？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:55:47.617

归功于@TimWilliams

问题不在于声明 API 对象，与容器对象无关。

```
Function TestUpdate()

    Dim wasUpdated As Boolean
    Dim Container As Worksheet
    Dim RangeName As String
    Dim refreshType As Integer
    Dim apiUpdateObject As Object
    Dim apiObject As Object

    Set apiObject = CreateObject("ApiDLL.Object")
    Set apiObject.ParentApp = ActiveWorkbook.Application

    Set apiUpdateObject = apiObject.UpdateMethod
    Set Container = ThisWorkbook.Worksheets(1)
    RangeName = "RangeTest"
    refreshType = 0

    wasUpdated = apiUpdateObject.UpdateNRange(Container, RangeName, refreshType)

    If wasUpdated = True Then
        MsgBox "Updated"
    Else
        MsgBox "Failed"
    End If

End Function 
```

谢谢你们的帮助。

# android - 登录名未出现在 Android 应用程序中

> ID：12571036
> 
> 赞同：0
> 
> 时间：2012-09-24T18:50:38.100
> 
> 标签：android, android-intent, android-activity

我在 android 中制作了一个登录应用程序。我想在我的应用程序的每个选项卡中显示用户名。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home); 
    final TextView txtuser=(TextView)findViewById(R.id.txtUser);
    txtuser.setText("Welcome "+getIntent().getStringExtra(DataBase_Server.NAME));
} 
```

每当用户登录时，他的名字就会出现，但是当他点击一些不同的选项卡然后重定向到主页选项卡时，用户的名字就会消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:39:19.233

如果名称不再出现，则表示返回的intent`getIntent()`已经改变，不再包含extra这个名称。

如果您在从意图中获取名称后存储名称会更好。您如何存储它取决于您希望它持续多长时间。您可以使用首选项或数据库来存储它，然后在用户注销时删除该值。

# php - 某些客户端在 $_SERVER['REMOTE_ADDR'] 中带有冒号的“垃圾”IP 地址

> ID：12571037
> 
> 赞同：6
> 
> 时间：2012-09-24T18:50:37.703
> 
> 标签：php, cron, ip-address, ipv6

根据在每台机器上设置的 cronjobs，我有一个 PHP 脚本位于一台服务器上，该脚本在一天中的不同时间被几台不同的机器访问。我想知道发出请求的机器的 IP，当它是由浏览器发出时，以下成功执行：

```
<?php
  ...
  echo $_SERVER['REMOTE_ADDR'];
  ...
?> 
```

但是，当由 CURL 或我尝试使用的任何其他命令行工具（包括 lynx）制作时，我最终得到以下垃圾：

`2701:5:4a80:7d:2ee:8eff:5e61:801d`

根据我所做的调查，这是因为 Apache 没有`$_SERVER`为从命令行收到的请求填充变量。

[Cron 作业的远程地址问题](https://stackoverflow.com/questions/7999352/remote-addr-issue-with-cron-job)

任何人都知道一种让命令行请求与`$_SERVER`变量配合得很好的方法，还是我应该走另一条路？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T18:52:29.933

那不是垃圾，那是正确的远程地址。有人使用 IPv6 访问您的服务器。

# javascript - IE8 或更低版本中的 Google Webfonts (Loader)

> ID：12571038
> 
> 赞同：2
> 
> 时间：2012-09-24T18:50:41.747
> 
> 标签：javascript, internet-explorer-8, webfonts, google-webfonts

我正在尝试为一个 Web 项目加载大约 40 种字体。人们将能够在网上商店中选择自定义字体。我使用 Google 的 Web Font Loader，它运行良好，但在 IE8 及更低版本中除外。

因此，我正在使用 Webfont Loader 需要从 Google 加载的正确字体系列打印我的 php 数组。如果我尝试加载所有 40 种字体，它可以在除 Internet Explorer 8 及更低版本之外的所有浏览器中使用。

如果我将我的字体数组限制为 6 种字体，那么这 6 种字体就会被加载。但是当我只向数组中添加一种字体时，IE8 无法加载字体。我在开发人员工具的“网络”选项卡中收到错误请求，但我在 http-request 中的 url 似乎没问题。

以前有人遇到过这个问题吗？HTTP-Header 中的请求 URL 的长度是否在 IE8 及以下版本中受到限制？

```
<script type="text/javascript">
  WebFontConfig = {
       google: { families: /*json_encode(php array here)*/ },
  };
  (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
               '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
  })();
</script> 
```

我还尝试将所有家庭粘贴到一个“链接”中。而且.. IE8 及以下版本中的错误请求。

```
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family= /* families */"> 
```

* * *

%7 为 '|' 的请求 和回应：

```
GET /css?family=Aclonica%7CAveria+Serif+Libre%7CBoogaloo%7CCandal%7CCantora+One%7CCapriola%7CCarter+One%7CChewy%7CCoda+Caption:800%7CComfortaa%7CCourgette%7CCreepster%7CCrete+Round%7CDamion%7CDays+One%7CFrancois+One%7CFredoka+One%7CGalindo%7CGloria+Hallelujah%7CIndie+Flower%7CIrish+Grover%7CJust+Me+Again+Down+Here%7CLeckerli+One%7CLobster+Two%7CLondrina+Solid%7CLove+Ya+Like+A+Sister%7CMcLaren%7CMiniver%7CPiedra%7CPlaster%7CPoiret+One%7CQuantico%7CRacing+Sans+One%7CRadley%7CRammetto+One%7CRevalia%7CSchoolbell%7CSmokum%7CSniglet%7CStint+Ultra+Condensed%7CSue+Ellen+Francisco%7CUbuntu+Mono%7CUltra%7CUnifrakturCook:700%7CWaiting+for+the+Sunrise%7CYesteryear HTTP/1.1 
```

[https://docs.google.com/open?id=0B4anyChu_EhkRFNmRmd3UGY4RlU](https://docs.google.com/open?id=0B4anyChu_EhkRFNmRmd3UGY4RlU)

我认为真的很奇怪：我在 ResponseBody 中从 Google 获取了正确的数据。

[https://docs.google.com/open?id=0B4anyChu_EhkdFVqVjFVUVhFRWs](https://docs.google.com/open?id=0B4anyChu_EhkdFVqVjFVUVhFRWs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:02:55.620

仅在 IE8 及更低版本中使用 WebFontLoader 一次加载 5 个字体来解决。

```
 <script src="http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>
      <script>
        <?php
          $splitArrays = array_chunk($families, 5);
          foreach ($splitArrays as $id => $split) {
            echo 'WebFont.load({google:{families: ' . json_encode($split) . '}});';
          }
        ?>
      </script> 
```

[Google Web 字体在 IE8 中不起作用](https://stackoverflow.com/questions/9050747/google-web-fonts-dont-work-in-ie8)。本文还描述了如何在 IE8 中通过“<link>”标签加载多种字体失败 - 因此，此错误似乎并非特定于使用 Web 字体加载器。

# gridview - Extjs 4.1.1 将上下文菜单链接到网格

> ID：12571040
> 
> 赞同：0
> 
> 时间：2012-09-24T18:50:46.917
> 
> 标签：gridview, extjs, contextmenu, extjs4.1, gridpanel

使用 Extjs 4.1.1

我正在尝试将上下文菜单（右键单击启动菜单）链接到网格。所以，我有 Ext.menu.menu，当用户右键单击我的网格时，我想使用 showAt 显示菜单。这在一定程度上有效......

但是，我需要将上下文菜单的操作（与同一页面的工具栏菜单中的操作相同）链接到网格。所以，我需要上下文菜单选项来实际做一些事情。我发现这样做的方法是“停靠”菜单

```
this.addDocked(this.contextMenu); 
```

这是网格，我创建了一个名为 contextMenu 的菜单。

这个问题是它弄乱了布局。无论我在 showAt() 中指定什么，上下文菜单通常会在屏幕底部的一半处弹出。同样在一侧，布局创建了一个空白空间，我猜它会“停靠”上下文菜单。但是，我并不真正希望它停靠，我希望它像真正的右键单击菜单一样浮动。

所以，问题是：如何在不通过停靠运行布局的情况下将菜单链接到网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:16:18.550

查看该版本附带的简单任务演示。它使用您尝试实现的这些确切概念。

# java - 如何使用 Servlet API 2.5 创建 HttpOnly cookie？

> ID：12571043
> 
> 赞同：4
> 
> 时间：2012-09-24T18:50:52.750
> 
> 标签：java, servlets, cookies, servlet-2.5

我正在使用在 Tomcat 6 上运行的使用 Servlet API v2.5 的 Web 应用程序，我需要将 HttpOnly cookie 发送到客户端。我**不是**在谈论由 servlet 容器生成的会话 cookie（[这个问题](https://stackoverflow.com/questions/33412/how-do-you-configure-httponly-cookies-in-tomcat-java-webapps)很好地涵盖了这一点），而是使用`response.addCookie()`.

`Cookie#setHttpOnly()`v2.5中不存在该方法，所以我必须自己构建HTTP头并添加`HttpOnly`令牌。有没有一种简单的方法可以做到这一点，而无需从头开始滚动我自己的[RFC 6265实现？](https://www.rfc-editor.org/rfc/rfc6265#section-4.1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:58:40.790

也许您需要实现一个`org.apache.catalina.Valve`（其工作原理与 Servlet 过滤器非常相似）并将 cookie 转换为，`org.apache.tomcat.util.http.ServerCookie`以便您可以访问低级别的详细信息，以便将“HttpOnly”粘贴在那里。

[Tomcat API JavaDocs](http://tomcat.apache.org/tomcat-6.0-doc/api/)

# c# - 打破parallel.foreach？

> ID：12571048
> 
> 赞同：122
> 
> 时间：2012-09-24T18:51:39.560
> 
> 标签：c#, multithreading, parallel-processing, parallel.foreach

**如何跳出[parallel.for](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx)循环？**

我有一个非常复杂的声明，如下所示：

```
Parallel.ForEach<ColorIndexHolder>(ColorIndex.AsEnumerable(),
    new Action<ColorIndexHolder>((ColorIndexHolder Element) =>
    {
        if (Element.StartIndex <= I && Element.StartIndex + Element.Length >= I)
        {
            Found = true;
            break;
        }
    })); 
```

使用并行类，我可以优化这个过程。然而; 我不知道如何打破并行循环？该`break;`语句引发以下语法错误：

> 没有可以中断或继续的封闭循环

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-09-24T18:56:38.770

使用[`ParallelLoopState.Break`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopstate.break.aspx)方法：

```
 Parallel.ForEach(list,
    (i, state) =>
    {
       state.Break();
    }); 
```

或者在你的情况下：

```
Parallel.ForEach<ColorIndexHolder>(ColorIndex.AsEnumerable(),
    new Action<ColorIndexHolder, ParallelLoopState>((ColorIndexHolder Element, ParallelLoopState state) =>
    {
        if (Element.StartIndex <= I && Element.StartIndex + Element.Length >= I)
        {
            Found = true;
            state.Break();
        }
    })); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-24T18:56:24.927

您可以通过使用`Parallel.For`or的重载调用来实现此目的，`Parallel.ForEach`它在循环状态中传递，然后调用[`ParallelLoopState.Break`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopstate.break%28v=vs.100%29.aspx)or [`ParallelLoopState.Stop`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopstate.stop%28v=vs.100%29.aspx)。主要区别在于事物中断的速度有多快`Break()`，循环将处理具有比当前“索引”更早的所有项目。使用`Stop()`，它将尽快退出。

有关详细信息，请参阅[如何：从 Parallel.For 循环停止或中断](http://msdn.microsoft.com/en-us/library/dd460721.aspx)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-24T18:58:04.277

您应该使用的是`Any`，而不是 foreach 循环：

```
bool Found = ColorIndex.AsEnumerable().AsParallel()
    .Any(Element => Element.StartIndex <= I 
      && Element.StartIndex + Element.Length >= I); 
```

`Any`足够聪明，一旦知道结果一定是真的就停下来。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-31T18:13:49.987

LoopState 无疑是一个很好的答案。我发现以前的答案有很多其他的东西，很难看到答案，所以这里有一个简单的案例：

```
using System.Threading.Tasks;

Parallel.ForEach(SomeTable.Rows(), (row, loopState) =>
{
    if (row.Value == testValue)
    {
        loopState.Stop();  // Stop the ForEach!
    }       
    // else do some other stuff here.
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-24T18:57:49.633

只需使用`loopState`可以提供的。

```
Parallel.ForEach<ColorIndexHolder>(ColorIndex.AsEnumerable(),  
    new Action<ColorIndexHolder>((Element, loopState) => { 
        if (Element.StartIndex <= I && Element.StartIndex + Element.Length >= I) { 
            loopState.Stop();
        }     
})); 
```

查看此[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd460721.aspx)以获取示例。

# c++ - 从模板抽象类继承

> ID：12571050
> 
> 赞同：3
> 
> 时间：2012-09-24T18:51:41.560
> 
> 标签：c++, templates, inheritance, virtual

我是 C++ 新手。这是我第一次使用模板。我想用纯虚函数定义某种接口，但这些函数的返回类型可能会因派生类而异。所以我想到了在抽象类中使用模板。我不确定我所拥有的是否有效。我有类似的东西：

```
template <class T> class InterfaceClass
{
  public:      
    virtual  T function1(const string& value)=0;
    virtual  T function2(const MyObj& p)=0;
} 
```

这样我就可以继承它并定义一个接口来访问这些功能。

```
class myClass : public InterfaceClass<MyObj>{
     public:
         MyObj InterfaceClass::function1(const string& value)
         {
             MyObj a = parse(value);
         }
         MyObj InterfaceClass::function2(const MyObj& p)
         {
              return p;
         }
 } 
```

目的是我希望能够执行以下操作：

```
 InterfaceClass * pClass;
       if(isCertainType())
             pClass = new myClass();
       else 
             pClass = new myClass2(); 
```

编译器抱怨重新定义了类`InterfaceClass`，并且函数成员不能在`myClass`. 我现在真的很困惑，想知道这是否可能或者我做错了什么。任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:53:57.583

真正的问题是，当您从具有不同参数的模板类继承到同一模板时，您的类没有公共基类。（`InterfaceClass<int>`并且`InterfaceClass<double>`是*不同*的类）。

至于虚拟，你只是不需要在定义它们时提供类名。

# c# - 来自 JsonResult 的动态 ActionLink？

> ID：12571051
> 
> 赞同：0
> 
> 时间：2012-09-24T18:51:45.133
> 
> 标签：c#, javascript, jquery, json, asp.net-mvc-3

我正在开发一个 MVC3 应用程序。在我看来，我有一些逻辑要转移到我的控制器上。它根据模型的某些方面动态显示 ActionLink。Html.ActionLink 的 linkText 和 actionName 参数是唯一不同的东西。我向我的控制器添加了一个方法，该方法将返回一个 JsonResult，其中包含 linkText 和 actionName 的字符串：

```
[AcceptVerbs(HttpVerbs.Get)]
public JsonResult GetActionButton(int id)
{
    string action = null;
    string text = null;

    // Snipped stuff that sets action and text

    return Json(new
    {
        buttonAction = action,
        buttonText = text
    });
} 
```

我在哪里可以调用此方法来使用结果创建链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:18:02.387

对于从控制器生成链接，请查看[UrlHelper Methods](http://msdn.microsoft.com/en-us/library/dd492942%28v=vs.108%29.aspx)，最好`Action`用于接收普通 url。在带有 jquery 的客户端上，您可以创建如下链接：

```
$('<a>').attr('href', data.buttonAction).text(data.buttonText) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:56:48.733

我在视图模型中猜测多个 ID 来自哪里？

也许在准备好的文档上使用 jQuery/AJAX：

```
$(document).ready(function() {
  // Handler for .ready() called.
  // AJAX call to GetActionButton for each enumeration over the ID's in the view model
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:12:35.040

我想你想要一个 HTML 助手。

```
 public static MvcHtmlString MyActionLink(this HtmlHelper htmlHelper, string linkText, string actionName, string controllerName)
    {
        string actionLinkHtml = string.Format("<a href=\"/{0}/{1}\">{2}</a>", controllerName, actionName, linkText);
        return new MvcHtmlString(actionLinkHtml);
    } 
```

当然会有更多的代码来设置你的变量，你的参数可能只是你上面的 int ID，但这是基本的想法。

然后在视图中使用：

```
 @Html.MyActionLink("link text", "action", "ctrlr") 
```

# php - 让 Supervisord 定期重启子进程

> ID：12571052
> 
> 赞同：33
> 
> 时间：2012-09-24T18:51:49.097
> 
> 标签：php, python, gearman, supervisord

我在 ubuntu 12.04 上使用 Supervisor (3.0a12) 来管理 php gearman 工作人员。有时工人会陷入一种奇怪的状态，他们使用大量的 CPU 和内存。当我在解决这个问题时，我认为让 Supervisor 偶尔自动杀死和刷新工作人员会很好。我查看了[http://supervisord.org/configuration.html](http://supervisord.org/configuration.html)配置文档，似乎没有看到任何允许这样做的选项。

有谁知道是否可以让 supervisord 定期重新启动它管理的所有进程？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-27T06:28:43.420

您可以使用 crontab 将命令直接传递给 supervisorctl。例如，以下将每 20 分钟重新启动一个进程。

```
0,20,40 * * * * /path/to/supervisorctl restart [supervisor_process] 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-24T19:39:47.977

该[`superlance`软件包](http://superlance.readthedocs.org/en/latest/index.html)为主管提供了一个[`memmon`插件。](http://superlance.readthedocs.org/en/latest/memmon.html)`memmon`监视主管控制下的程序的内存使用情况。

您配置`memmon`为主管事件侦听器：

```
[eventlistener:memmon]
command=memmon -a 200MB
events=TICK_60 
```

上面的配置设置 memmon如果内存使用量超过 200MB，则重新启动主管控制下的*任何程序。*它每 60 秒检查一次。

您可以配置 memmon 以监视特定程序或程序组，并为每个程序设置限制。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-02-20T21:28:58.427

有一个简单的仅限主管的解决方案。使另一个主管进程休眠适当的时间，然后重新启动您想要的进程。

```
[program:my_program]
process_name = python something.py

[program:periodicrestarter]
command = sh -c "echo 'restart my_program' | supervisorctl;sleep 600"
; restarts all (sleeps first because this restarts itself):
;command = sh -c "sleep 600; echo 'restart all' | supervisorctl"
autorestart = true 
```

# ruby-on-rails - ActiveRecord 错误：缺少表“用户”的 FROM 子句条目

> ID：12571053
> 
> 赞同：1
> 
> 时间：2012-09-24T18:51:52.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在使用 User.delete_at 在我的应用中启用用户软删除。设置该字段后，我不希望在整个应用程序中返回已删除的用户。因此，鉴于我有以下模型，我设置了以下内容：

```
User.rb
    has_many :groups, :through => :group_members, :conditions => ['banned = ?', false]
    default_scope :conditions => 'users.deleted_at IS NULL'

Group.rb
    belongs_to :user
    has_many :group_members, :dependent => :destroy, :include => :user, :conditions => ['banned = ?', false]

GroupMember.rb
    belongs_to :group
    belongs_to :user
    default_scope joins(:user).where('users.deleted_at IS NULL') 
```

那么现在的问题是当我运行时：

```
current_user.groups 
```

我收到以下错误：

```
 Group Load (0.5ms)  SELECT "groups".* FROM "groups" INNER JOIN "group_members" ON "groups"."id" = "group_members"."group_id" WHERE "group_members"."user_id" = 1 AND (users.deleted_at IS NULL) AND (banned = 'f')
PG::Error: ERROR:  missing FROM-clause entry for table "users"
LINE 1: ..."group_id" WHERE "group_members"."user_id" = 1 AND (users.dele... 
```

有没有更好的方法可以使 User.delete_at 用户不会在整个应用程序中返回？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:30.920

我认为你的

```
.where('users.deleted_at IS NULL') 
```

条件应该是：`has_many`组内模型的条件...

# android - Facebook Android 通知广播接收器

> ID：12571055
> 
> 赞同：3
> 
> 时间：2012-09-24T18:52:19.010
> 
> 标签：android, facebook, notifications, broadcastreceiver

有没有办法在自定义应用程序中收听 Facebook 通知？例如，在 SMS 的情况下，我可以在广播接收器中接收文本并显示自定义消息。如果我的 Facebook 帐户已登录，是否仍然可以收听通知？

# ios6 - xcode4.5 中的 NSDate 比较

> ID：12571057
> 
> 赞同：0
> 
> 时间：2012-09-24T18:52:25.327
> 
> 标签：ios6, xcode4.5

我有以下代码

```
NSDate * selectedDate = self.datePicker.date;

NSLog(@"The date selected is %@ and initialdate is %@", selectedDate, initialDate);

NSLog(@"the expression value is %i", [self.initialDate isEqualToDate:selectedDate]); 
```

打印以下内容

```
The date selected is 2012-09-24 18:49:04 +0000 and initialdate is 2012-09-24 18:49:04 +0000

the expression value is 0 
```

我正在使用 xcode4.5 并针对 ios6。xcode4.4 中的相同代码打印`1`（它们是相等的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:44:35.710

我得到了它。

当我添加以下行时

```
NSLog(@"Initaldate with time intervel since 1970 %f  and selecteddate %f", [initialDate timeIntervalSince1970], [selectedDate timeIntervalSince1970]); 
```

它在 iOS 5 中打印相同的值，但在 iOS6 中打印不同的值。

# php - symfony2 实体表单类型中的选项组

> ID：12571062
> 
> 赞同：1
> 
> 时间：2012-09-24T18:52:41.937
> 
> 标签：php, symfony, symfony-2.1

有没有什么方法可以在 symfony2 (v.2.1) 的选项组中分组显示实体字段，例如我的表单类中有这样的内容：

```
$builder->add('account',
                    'entity',
                    array(
                        'class' => 'MyBundle\Entity\Account',
                        'query_builder' => function(EntityRepository $repo){
                            return $repo->findAllAccounts();
                        },
                        'required'  => true,
                        'empty_value' => 'Choose_an_account',
                    ); 
```

但是（当然）它们显示为存储库类从数据库中读取它，我想将它们分组显示在组合框中。这篇[文章](https://stackoverflow.com/a/10403249/115193)提到了开箱即用的 2.2 版本中添加的功能，但我们 2.1 用户有哪些选择？

分组将基于一个名为 的字段`Type`，假设我有一个`getType()`在我的 Account 实体中调用的 getter，它返回一个字符串。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:27:46.140

在处理类别时我做了类似的事情。

首先，当您构建表单时，将选项列表作为函数的结果传递，`getAccountList()`如下所示：

```
 public function buildForm(FormBuilderInterface $builder, array $options){
        $builder        
            ->add('account', 'entity', array(
                'class' => 'MyBundle\Entity\Account',
                'choices' => $this->getAccountList(),
                'required'  => true,
                'empty_value' => 'Choose_an_account',
            ));
} 
```

该函数应该执行如下操作（内容取决于您构建结果的方式）。

```
private function getAccountList(){
    $repo = $this->em->getRepository('MyBundle\Entity\Account');

    $list = array();

    //Now you have to construct the <optgroup> labels. Suppose to have 3 groups
    $list['group1'] = array();
    $list['group2'] = array();
    $list['group3'] = array(); 

    $accountsFrom1 = $repo->findFromGroup('group1'); // retrieve your accounts in group1.
    foreach($accountsFrom1 as $account){
        $list[$name][$account->getName()] = $account;
    }
    //....etc

    return $list;
} 
```

当然，你可以做更多的动态！我的只是一个简单的例子！

您还必须将 传递`EntityManager`给您的自定义表单类。所以，定义构造函数：

```
class MyAccountType extends AbstractType {

    private $em;

    public function __construct(\Doctrine\ORM\EntityManager $em){
        $this->em = $em; 
    }    
} 
```

`EntityManager`并在您启动`MyAccountType`对象时传递。

# java - 等待 ext-js 对话框加载 Selenium

> ID：12571063
> 
> 赞同：0
> 
> 时间：2012-09-24T18:52:47.203
> 
> 标签：java, extjs, selenium, webdriver

在使用 Selenium (WebDriver) 测试 ext-js 应用程序时，我有一个按钮，它会弹出一个对话框。然后测试会填写一些表单字段、单击按钮等。问题是 selenium 在对话框完全完成构建之前开始执行这些操作。

我知道我可以告诉 selenium 等待特定元素出现，但是如果我想将这种情况概括为“等待对话框完成加载”，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:31:06.573

简短的回答是，“不，没有简单的方法可以做到这一点。” 要理解为什么会这样，请考虑一下：您如何定义“加载整个 DOM”？是下载最后一个结束`</html>`标签的时候吗？当它被解析并添加到 DOM 时？是文档`readyState`属性是“交互式”、“内容就绪”还是其他一些值？通过 JavaScript 添加的 DOM 元素呢？如果那个 JavaScript 是通过 触发的`setTimeout()`呢？处理 XmlHttpRequests 怎么样？对于所有用例，对于这个问题，没有一个万能的答案是 100% 正确的。

等待一个元素是正确的方法。在使用 extJs 时，识别正确的元素可能具有挑战性，因为会生成 ID。我经常发现在特定的 JavaScript 框架中使用类属性更有效。

# python - 嵌入 vte。如何使用 wxPython 执行与此 PyGtk 应用程序相同的操作？

> ID：12571073
> 
> 赞同：3
> 
> 时间：2012-09-24T18:53:34.173
> 
> 标签：python, wxpython, vte

这是我的第一篇文章。我每天在 Stackoverflow 上阅读很多主题，我很感激能找到一些帮助。今天轮到我提问了，因为我没有找到满足我需求的解决方案。

我想在我正在编写的应用程序中有一个终端；我（已经阅读了很多（子进程、线程、pty 等），但我没有找到一个简单的解决方案，因为这是用 pygtk 和 vte 编写的。这是代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pygtk
pygtk.require('2.0')
import gtk, vte

window = gtk.Window()
window.resize(600,400)
window.show()

term  = vte.Terminal()
pid   = term.fork_command('bash')
term.set_emulation('xterm')
term.show()

window.add(term)
window.show_all()
window.connect("destroy", lambda w: gtk.main_quit())
gtk.main() 
```

你知道用 wxPython 做到这一点的方法吗？

非常感谢您的帮助，非常感谢！！:)

**编辑0：**

我必须准确地说：

*   我说的是 bash shell（如上面的代码），而不是 python shell
*   我为 linux 写的

**编辑1：**

感谢您的回答！:)

Joran，我已经阅读了这个问题，并且我已经尝试了所有建议的代码。尽管这很有趣，但这不是我想要的方式，正如您在我的问题中看到的那样。编写一个重新创建终端模拟器的应用程序似乎非常困难。

这就是为什么我正在寻找像我提出的代码这样的解决方案。

pythonm，我看不出你的想法和我的问题之间的关系......

谢谢你的帮助！

**编辑2**

请看这个短代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
import os
import pty

shell = os.environ['SHELL']
script = open('typescript', 'w')

def read(fd):
    data = os.read(fd, 1024)
    script.write(data)
    return data

pty.spawn(shell, read) 
```

有什么想法可以用 wxpython 将其“放入”小部件中吗？

**编辑3**

也看一下：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pexpect

c = pexpect.spawn ('bash -i')
c.interact()
c.kill(1) 
```

如此简单，如此容易做到……

告诉我是否不可能将其嵌入到 wx 小部件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:30:43.143

在过去的一两个月里，我已经看到这个问题出现了几次。答案是否定的，wxPython 没有这个能力。您必须使用 subprocess 来启动某些东西并与之通信。

# c# - 更改网格视图中的 Container.DataItem 值时的行数据绑定问题

> ID：12571075
> 
> 赞同：1
> 
> 时间：2012-09-24T18:53:47.560
> 
> 标签：c#, asp.net

我正在使用 gridview 使用 c# 在 asp.net 中的 buttonClick 上显示。

```
 DataSet dsnew  = new businessLogic.Biz().getData();
 if (dsnew != null && dsnew.Tables[0].Rows.Count > 0)
 {
     DataView myDataView = new DataView();
     myDataView = dsnew.Tables[0].DefaultView;
     grdDetail.DataSource = myDataView;
     grdDetail.DataBind();
 } 
```

在 rowDataBound 上，根据条件，我想更改数据项容器值。我正在按照以下方式进行操作，但问题是所有行都具有数据集中最后一行的支付方法。

```
<asp:TemplateField ItemStyle-Width="70" ItemStyle-HorizontalAlign="Center">
   <ItemTemplate>
       <asp:Label ID="lblPaymentMethod" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SellingPaymentMethod") %>'></asp:Label>
   </ItemTemplate>
</asp:TemplateField>

protected void grdDetail_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        return;
    }

    foreach (DataRow dtrCurrentRow in (((System.Data.DataView)grdDetail.DataSource)).Table.Rows)
    {
        //DataRow row = (DataRow)e.Row.DataItem;
        Label lblPaymentMethod = e.Row.FindControl("lblPaymentMethod") as Label;

        if (Condition1))
        {
            lblPaymentMethod.Text = dtrCurrentRow["SellingPaymentMethod"].ToString();
        }
        else if (Condition 2)
        {
            lblPaymentMethod.Text = dtrCurrentRow["DeliveryPaymentmethod"].ToString();
        }         

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:21:11.637

*您可以尝试直接控制可见性*或*直接设置列的文本属性*，而不是使用**[rowDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)**来检查要显示的值！我为你做了一个小例子，可以很容易地适应你的需要！

 ****ASPX**

```
<asp:GridView ID="gvProducts" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField HeaderText="ID">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Visible='<%# CheckCondition1(Eval("ID")) %>' Text='<%# Bind("ID") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="ProductName">
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Visible='<%# CheckCondition2(Eval("ProductName")) %>' Text='<%# Bind("ProductName") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="thirdColumn">
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# GetValue(Eval("ID")) %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
            <asp:TemplateField HeaderText="forthColumn">
            <ItemTemplate>
                <asp:Label ID="Label4" runat="server" Text='<%# GetValue(Eval("ID"), "staticValue", Eval("ProductName")) %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**代码隐藏**

```
public bool CheckCondition1(object ID)
{
    return ID.ToString() != "2";
}
public bool CheckCondition2(object ProductName)
{
    return ProductName.ToString() != "jklö";
}
public string GetValue(object ID)
{
    // check condition here       
    //    ...
    // and return according value
    return ID.ToString() + " is your ID";

    // eg
    //if (Condition1))
    //    return dtrCurrentRow["SellingPaymentMethod"].ToString();
    //else if (Condition 2)
    //    return dtrCurrentRow["DeliveryPaymentmethod"].ToString();
}
public string GetValue(object ID, object firstValue, object secondValue)
{      
    if (ID.ToString() == "2")
        return firstValue.ToString();
    else
        return secondValue.ToString();
} 
```

**CodeBehind 显示演示值**

```
// assume there is a class Products with id and ProductName
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        List<Product> products = new List<Product>();
        products.Add(new Product() { ID = 1, ProductName = "asdf" });
        products.Add(new Product() { ID = 2, ProductName = "asdf" });
        products.Add(new Product() { ID = 3, ProductName = "jklö" });
        products.Add(new Product() { ID = 4, ProductName = "asdf" });
        gvProducts.DataSource = products;
        gvProducts.DataBind();
    }
} 
```

结果应该是这样的：。

![给定代码的预期结果](../Images/5a5da60ebd6439ed6f96e424088fae95.png)**

# php - PHP正则表达式匹配不包含模式的表达式

> ID：12571077
> 
> 赞同：0
> 
> 时间：2012-09-24T18:53:57.490
> 
> 标签：php, regex, preg-replace

我有以下文字：

“这是一个测试文本。测试，逗号而不是空格。”

我遍历每个单词并希望将每个单词替换为不同的链接。比方说

```
<a href="wordToReplace">wordToReplace</a> 
```

我的问题是“test”这个词的连续匹配（使用上面的例子）替换了href和锚文本，所以我留下了链接内的链接，这根本不好。

（为了对我的问题有一个基本的了解，这就是我剩下的。它有一些额外的标记。）

```
This is a<a href="/index.php?r<a href="/index.php?r=texts/addWord"
class="wordLink info label" id="yt2">text</a>/addWord" class="wordLink
info label" id="yt1">test</a>text.<a href="/index.php?r=texts/addWord"
class="wordLink info label" id="yt3">Test</a><a
href="/index.php?r=texts/addWord" class="wordLink info label"
id="yt4">comma</a>instead of<a href="/index.php?r=texts/addWord"
class="wordLink info label" id="yt6">space</a> 
```

我正在努力

```
preg_replace("/[^\">]".$word."[^\"<]/", $link, $text->text); 
```

但我认为我根本没有走在正确的轨道上。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:12:37.617

从您的一行代码中，我假设您在一个循环中拥有该行，该循环遍历`$words`您要替换的所有内容，这会导致问题。

您需要做的就是将所有这些替代品放在一个`preg_replace`电话中。为此，正则表达式提供了替代方案。比如说，您的单词列表由`test`和`text`组成`this`。然后你可以这样做：

```
preg_replace('/(test|text|this)/', $link, $text->text); 
```

如果您将所有单词都放在一个数组中，`$words`那么您可以简单地生成正则表达式：

```
$wordList = implode('|', $words);
preg_replace('/('.$wordList.')/', $link, $text->text); 
```

`i`如果您的检查应该不区分大小写，您可能希望在正则表达式的最后添加一个。

如果您的某些单词是其他单词的一部分（例如，您想替换`text`and `texture`），您可以检查单词边界：

```
preg_replace('/\b('.$wordList.')\b/', $link, $text->text); 
```

这是你想要的？

**编辑：**如果你之前在你的循环`$link`中预先生成了`$word`你，你现在可以用`$1`. 如果你`$link`是这样的

```
$link = '<a href="'.$word.'">'.$word.'</a>'; 
```

你现在可以简单地使用

```
$link = '<a href="$1">$1</a>'; 
```

# jakarta-ee - 单独战争文件的优缺点

> ID：12571081
> 
> 赞同：2
> 
> 时间：2012-09-24T18:54:25.813
> 
> 标签：jakarta-ee, war

我对 Java 领域有些陌生，并且对构建 Web 门户的最佳实践有一些疑问。所以我的问题是将一个巨大的战争文件分解成更小的战争文件真的有什么好处。我唯一能想到的：

*   模块化：它允许单独的开发人员在站点的单独部分上工作并单独部署它们。

*   组织：如果站点的某些部分不在同一个代码库中，则更容易找到它们。

*   可扩展性：只有当您要在不同的 Web 服务器上部署站点的某些部分时，这对我才有意义。如果它们都被部署到相同的前端服务器有什么优势吗？

根据我的阅读，似乎大多数人似乎认为一个大的战争文件是最好的方法：避免冗余、一步部署等。那么有理由分解它吗？也许网站的匿名/小册子版本与经过身份验证的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:09:07.143

操作人员更喜欢一个 big `.war`，因为这意味着只需部署一件事。

但是，如果您可以轻松地将您的网站分解为单独`.war`的 s，并且诚实地部署和取消部署它们而不影响其他已部署的工件，并且*确定您需要这种粒度*（请参阅[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)），那么将其分解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:14:09.797

如果某些模块有单独的可扩展性、安全性和可靠性要求，那么您可以将它们分解。理想情况下，如果需要，您的安全性可以分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T14:47:43.530

您需要考虑的几件事会极大地影响您的决定：

1.  不同的依赖项——假设 A 类需要 v1 的库 L，而 B 类需要相同的依赖项，只是版本不同——v2。如果您将两者部署在同一个战争中，它们将获得相同的类路径，并且您必须对齐所有依赖版本。如果将它们拆分，您可以在一场战争中拥有 v1，而在另一场战争中拥有 v2。这也意味着如果你想从 v1 升级到 v3，你只需要测试 class A 的行为，因为 class B 将保留在旧版本中。所以这里的模块化非常强大。
2.  服务器的加载时间 - 您拥有的战争文件越多，服务器启动所需的时间就越多。
3.  维护 - 战争文件往往是臃肿的，除非您密切关注大小并删除多余的依赖项 - 这不是一件容易的事！一些是运行时依赖项，一些是编译，一些是测试，一些是生产。这是很多工作，人们倾向于推迟它。如果你有一个臃肿的 war 文件，有 X 个冗余依赖项，那就是 X 大小的问题（加载时间、保存每个版本所浪费的存储空间等）。如果您有 Y 个战争文件，那么您的问题是 X*Y 大小。
    换句话说 - 清理 1 居室公寓比 7 居室别墅更容易。

# asp.net-mvc-3 - MVC3 C#.Net 中的可重用代码

> ID：12571087
> 
> 赞同：0
> 
> 时间：2012-09-24T18:54:44.560
> 
> 标签：asp.net-mvc-3, helper, code-reuse

我有一个 MVC3 C#.Net 网络应用程序。我有两个显示相同 HTML 表的视图。但是，每个视图代表一个不同的模型。视图 1 =“提案编辑”，视图 2 =“文档编辑”。Proposal 模型和 Doc 模型都有一个属性：

```
ICollection<Deliverable> Deliverables. 
```

在每个编辑视图中，我都会显示属于该视图模型的可交付成果。每个编辑视图中的代码都是相同的，只是编辑视图后面的模型不同。所以，有很多重复的代码。

如何将其模块化以减少重复代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:19:29.573

@Mike，这正是我会做的。重点是每个模型都有 DisplayTemplates。如果您愿意，即使是 DateTime 对象也可以有一个 DisplayTemplate。

**编辑：**

这是仅将 DisplayTemplate 用于可交付成果模型的示例

```
@model ICollection<Deliverables>

@foreach (var deliverable in this.Model)
{
    @this.Html.DisplayFor(d => deliverable)
} 
```

当然，您还可以在下面有一个模板`~\Shared\DisplayTemplates\Deliverables.cshtml`或在下面进行编辑`~\Shared\EditorTemplates\Deliverables.cshtml`

# java - 如何正确显示 XML Parsing 中的内容？

> ID：12571090
> 
> 赞同：1
> 
> 时间：2012-09-24T18:54:54.683
> 
> 标签：java, android, xml-parsing

我是 android/java 的新手，并试图通过输入[教程](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)中的代码来学习。我想看看我是否可以制作一个常见问题解答 android 模块。有人可以告诉我如何只显示问题列表，当你点击一个问题时，在下一个活动中对应的问题和答案显示？它目前正在显示这两项活动的问题和答案。

希望我的问题有意义。请询问，我会尽我所能解释。

非常感谢你！

faq_list.xml

```
<item>      
    <id>1</id>
    <question>Whats my phone number?</question>
    <answer>my phone number here</answer>        
</item>  

<item>      
    <id>2</id>
    <question>Whats my fax number?</question>
    <answer>my fax number here</answer>        
</item>  

<item>      
    <id>3</id>
    <question>What is my mailing address?</question>
    <answer>my address here</answer>        
</item> 
```

faqs_questions.xml

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- qnestion -->
        <TextView
            android:id="@+id/question"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#000"
            android:textSize="14sp"
            android:layout_marginBottom="10dip"
            android:layout_marginTop="10dip"
            android:layout_weight="1"
            android:paddingLeft="5sp" />
        <!-- answer  --> 
        <TextView
            android:id="@+id/answer"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#000"
            android:textSize="14sp"
            android:layout_marginBottom="10dip"
            android:layout_marginTop="10dip"
            android:layout_weight="2"
            android:paddingLeft="5sp">
        </TextView>     

        </LinearLayout> 
```

faqs_answers.xml

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="#fff"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView android:id="@+id/question_label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="14dip"       
            android:textStyle="bold"     
            android:textColor="#000"            
            android:paddingLeft="5sp"
            /> 

  <TextView android:id="@+id/answer_label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="14dip"       
            android:textColor="#000"            
            android:paddingLeft="5sp"
            />

</LinearLayout> 
```

常见问题解答Activity.java

```
 public class FaqsQuestionsActivity extends ListActivity {

    static final String URL = "http://myweb.com/faq_list.xml";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node   
    static final String KEY_ID = "id";
    static final String KEY_QUESTION = "question";
    static final String KEY_ANSWER = "answer";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.faqs_questions);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION ));
            map.put(KEY_ANSWER, parser.getValue(e, KEY_ANSWER));

            menuItems.add(map);
        }

        ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.faqs_question_list,
        new String[] { KEY_QUESTION, KEY_ANSWER  }, new int[] {R.id.question, R.id.answer});

        setListAdapter(adapter);

        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                String question = ((TextView) view.findViewById(R.id.question)).getText().toString();
                String answer = ((TextView) view.findViewById(R.id.answer)).getText().toString();

                Intent in = new Intent(getApplicationContext(), FaqsAnswersActivity.class);

                in.putExtra(KEY_QUESTION, question);
                in.putExtra(KEY_ANSWER, answer);
                startActivity(in);

            }
        });
    }
} 
```

常见问题解答活动.java

```
public class FaqsAnswersActivity  extends Activity {

    // XML node keys

    static final String KEY_QUESTION = "question";
    static final String KEY_ANSWER = "answer";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.faqs_answers);

        // getting intent data
        Intent in = getIntent();

        // Get XML values from previous intent
        String question = in.getStringExtra(KEY_QUESTION);
        String answer = in.getStringExtra(KEY_ANSWER);

        // Displaying all values on the screen        
        TextView lblQuestion = (TextView) findViewById(R.id.question_label);
        TextView lblAnswer = (TextView) findViewById(R.id.answer_label);        

        lblQuestion.setText(question);
        lblAnswer.setText(answer);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:35:47.977

在我看来，上一个答案可能会给您带来问题，因为您正在从 TextView 中提取值以放入下一个 Activity 的 Intent 中。

相反，我建议您在“questions.xml”中更改答案 TextView 的可见性，如下所示：

```
<TextView
        android:id="@+id/answer"
        android:visibility="gone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000"
        android:textSize="14sp"
        android:layout_marginBottom="10dip"
        android:layout_marginTop="10dip"
        android:layout_weight="2"
        android:paddingLeft="5sp">
</TextView> 
```

此外，由于视图不可见，您可以删除现在不相关的布局属性。我相信你所需要的只是 id 和能见度。

```
<TextView
        android:id="@+id/answer"
        android:visibility="gone">
</TextView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:20:57.380

简单的列表适配器基于 xml 文件构建列表，只需从列表视图中删除对答案的引用，它应该可以工作

```
ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.faqs_question_list,
    new String[] { KEY_QUESTION }, new int[] {R.id.question}); 
```

并从 faq_questions.xml 中删除答案 textview

# javascript - 数组输出错误

> ID：12571093
> 
> 赞同：0
> 
> 时间：2012-09-24T18:55:18.090
> 
> 标签：javascript, arrays

> **可能重复：**
> [在 for 循环中分配点击处理程序](https://stackoverflow.com/questions/4091765/assign-click-handlers-in-for-loop)

我正在从 twitter 请求推文，并将它们保存到两个数组中。一个数组包含来自新闻频道的推文，另一个数组包含来自为第一个数组（news_array）的相同推文发布的用户的推文。

如您所见，我正在检查 user_tweeets 数组中的文本与第一个数组的文本并输出所有为该新闻发推文的用户。

问题是每次输出一个条目时都会输出 news_user 的名称和文本。我不希望它每次都显示这些元素，而只显示用户的个人资料图像，并且只显示一次文本、个人资料图像和频道名称。我怎样才能做到这一点？

这是一个小提琴 --- [jsfiddle](http://jsfiddle.net/mhQL4/1/)

```
 function geo(news_array, user_tweets) {
         console.log(news_array);
         console.log(user_tweets);
         for (var i = 0; i < news_array.length; i++) {
             var news_date = news_array[i].news_date;
             var news_profile_img = news_array[i].news_profile_img;
             var news_text = news_array[i].news_text;
             var news_url = news_array[i].news_url;
             var news_user = news_array[i].news_user;
             second(news_user, news_date, news_profile_img, news_text, news_url);
         }

         function second(news_user, news_date, news_profile_img, news_text, news_url) {
             for (var x = 0; x < news_array.length; x++) {
                 var user = user_tweets[x].user;
                 var date = user_tweets[x].date;
                 var profile_img = user_tweets[x].user_profile_img;
                 var text = user_tweets[x].text;
                 var url = user_tweets[x].url;
                 if (text.indexOf(news_text.substr(15, 20)) > -1) {
                     geocode(user, date, profile_img, text, url, news_user, news_date, news_profile_img, news_text, news_url);
                 }
             }

             function geocode(user, date, profile_img, text, url, news_user, news_date, news_profile_img, news_text, news_url) {
                 $('#news-tweets').css({
                     'overflow-y': 'scroll',
                     'overflow-x': 'hidden'
                 });
                 $('#news-tweets').append('<table class="news" width="402" border="0">\
      <tr>\
        <td  colspan="5" class="user">' + news_user + '(' + news_date + ')</td>\
      </tr>\
      <tr>\
      <td  colspan="5" rowspan="1" class="user">' + news_text + '</td></tr><tr><td width="59" valign="top"><a href=' + profile_img + ' target="_blank">\
      <img src=' + profile_img + ' width="55" height="50"/></a></td>\
      </tr>\
    </table>');
             }
         }
     } 
```

# ruby - 从控制台调用自定义 gem

> ID：12571095
> 
> 赞同：0
> 
> 时间：2012-09-24T18:55:21.007
> 
> 标签：ruby, gem

我下载了em-ftpd的代码，在本地做了一些必要的修改。我不想分叉它，只需使用我所做的更改。另外，我还有其他项目为这个 ftp 服务器实现了一个新的驱动程序。在驱动程序的文件夹中，我需要调用 em-ftpd gem，但使用我自己修改过的代码。如果可以用bundler完成就好了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:43:59.063

在 bundler 中，您可以引用文件系统中的 gem：

```
gem 'em-ftpd', :path => 'path/to/your/gem' 
```

# c# - C++ to C# code conversion

> ID：12571102
> 
> 赞同：-3
> 
> 时间：2012-09-24T18:55:59.190
> 
> 标签：c#, c++

I am trying to emulate some C++ code in C#. I am not familiar with the intricate workings of C++ and don't quite understand how to implement this code in C#.

Could someone please explain what the functions are doing and what their output would be in ASCII? In particular, I do not understand what the "memcpy" method is doing the way this code is written.

```
//example values
str = "<Request Type="Query" Version="1.0"></Request>"
uintcrc = getCrc(str, strlen(str));

//code i don't understand

//create a byte array with a null terminator?
memset(strQueryBuffer, '\0', sizeof(str));
//print the values into the byte array
sprintf(strQueryBuffer, "%c%s%c", COMM_STX, str, COMM_ETX);

//append the uintcrc to the end of the byte array?
memcpy(strQueryBuffer + strlen(strQueryBuffer), &uintcrc, sizeof(uintcrc)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:01:40.780

它除了

```
 strQueryBuffer = COMM_STX + "<Request Type='Query' Version="1.0"></Request>" + COMM_ETX + Encoding.Ascii.GetString(BitConverter.GetBytes(uintcrc)); 
```

如果你有一个二进制系统并且想要发送完整的信息二进制，你也可以写

```
 var str = "<Request Type='Query' Version="1.0"></Request>";
 byte[] Data = (new [] { COMM_STX }).Concat(Encoding.Ascii.GetBytes(str)).Concat(new [] { COMM_ETX }).Concat(BitConverter.GetBytes(uintcrc)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:04:19.840

```
strQueryBuffer + strlen(strQueryBuffer) 
```

和

```
&strQueryBuffer[strlen(strQueryBuffer)] 
```

因此它将 crc 的二进制值附加到 strQueryBuffer 的末尾

# google-maps-api-3 - google maps javascript api v3 - Finding lat/lng for a point on road given nearby lat/lng of a marker and distance from it in miles

> ID：12571104
> 
> 赞同：0
> 
> 时间：2012-09-24T18:56:06.437
> 
> 标签：google-maps-api-3

I have a marker on a road with lat/lng, Now I know there is an Incident on road on X- Miles from that marker point.. Is there any way to track the lat/lng of the new point where incident has happened ?

any help ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:57:44.743

下面是一个示例，它在沿路线特定距离（9.5 公里和 64.8 公里）的路线上放置标记：

[http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html)

# php - Codeigniter 临时存储文件

> ID：12571119
> 
> 赞同：2
> 
> 时间：2012-09-24T18:57:02.677
> 
> 标签：php, codeigniter, file-upload

我正在将我的文件上传到网络存储服务，因此我不需要将它们存储在我的服务器中。我想将它们存储在一个临时文件夹中，但也使用 Codeigniter 的上传类进行安全验证和文件名加密。

我在配置中试过这个

```
$config['upload_path'] = $_FILES['userfile']['tmp_name'];

$this->load->library('upload', $config);

$this->upload->do_upload(); 
```

但我收到错误的上传路径错误。是否可以在不创建自己的上传类的情况下上传临时​​文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:20:01.153

CodeIgniter 中没有内置的临时文件处理。您必须自己构建它。由您来编写处理上传文件、操作/验证文件以及将其从服务器中删除的逻辑。

如果您保留文件上传的路径，您可以[`unlink()`](http://php.net/manual/en/function.unlink.php)在完成验证/操作后使用 PHP 的函数删除文件。

# jquery - How Do I combine these functions?

> ID：12571122
> 
> 赞同：1
> 
> 时间：2012-09-24T18:57:26.717
> 
> 标签：jquery

These both work but not at the same time. I have to disable one for the other to work. Is there a way to combine the two? All I want to do is on the same click, fire the modal windows and apply some CSS to a few elements.

[http://jsfiddle.net/fDP5X/4/](http://jsfiddle.net/fDP5X/4/)

```
<script type="text/javascript">//Product Popup
    $(document).ready(function() {
    $(".various").fancybox({
        padding     : 0,
        fitToView   : false,
        width       : '500',
        height      : '380',
        autoSize    : false,
        closeClick  : true,
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        closeBtn    : true,
        scrolling   : 'no',
        preload     : false,
        helpers     : {
            overlay : {
                closeClick : true,
                css        : {'background' : 'rgba(0, 0, 0, 0)'},
                }
            }
        });
    });
</script> 
```

* * *

```
<script type="text/javascript">//Product Details popup and darken
$(function() {
    $( ".various" ).toggle(
        function() {
            $( "#tabDetails,.active h2,.active" ).animate({
                backgroundColor: "#c9c9c9",
            }, 250 );
        },
        function() {
            $( "#tabDetails,.active h2,.active" ).animate({
                backgroundColor: "#fff",
            }, 750 );
        }
        );
    $( ".turnwhite" ).click(
        function() {
            $( "#tabDetails,.active" ).animate({
                backgroundColor: "#fff",
            }, 750 );
            $( "#tabContaier ul li a h2" ).addClass("tabheaderbackground");
            $( "#tabContaier ul li a" ).css("background-color", "#FFF");
            $( "#tabContaier ul li a h2" ).css("background-color", "#FFF");
        }
    );

});
</script> 
```

# ruby-on-rails - How do I return this ruby array

> ID：12571126
> 
> 赞同：2
> 
> 时间：2012-09-24T18:57:51.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

I have a table named `Player` in my Rails app, and on the table, there are seven boolean attributes.

```
monday: true, tuesday: false, wednesday: true, thursday: false, friday: false, saturday: true, sunday: false 
```

What is the best way to return an array with all the days that are true with `ActiveRecord`? I want to return:

```
["monday", "wednesday", "saturday"] 
```

Any ideas on an efficient way to do this? I am drawing a blank? `Player.first.map`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:02:23.720

假设您的意思是模型上有 7 个属性，您可以添加一个`Player`喜欢的方法

```
def days
  ["monday", "tuesday", "wednesday", "thursday", "friday", 
    "saturday", "sunday"].select { |day| attributes[day] }
end 
```

所以对于你的例子，它只是

```
Player.first.days # => e.g. ["monday", "wednesday", "saturday"] 
```

* * *

这是`attributes`在模型实例上使用 ActiveRecord 方法，该方法将`Hash`属性名称返回到值。

* * *

正如[InternetSeriousBusiness](https://stackoverflow.com/users/1558513/internetseriousbusiness)所评论的那样，已经在`Date`类上定义了一组日期名称，因此您可以使用它并避免自己列出日期，但请注意，其中的日期以首字母大写字母开头，因此您需要一个`downcase`to匹配您的属性名称，例如

```
Date::DAYNAMES.select { |day| attributes[day.downcase] } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:38:06.277

您可以通过以下方式解决此问题：

```
p = Player.first

p.attributes.select{|k,v| v == true}.keys 
```

希望能帮助到你。

# c# - c# - Access elements created by jquery in c# method

> ID：12571129
> 
> 赞同：1
> 
> 时间：2012-09-24T18:58:05.517
> 
> 标签：c#, jquery, dynamic, html-lists

In a user control I have an unordered list that contains items showing editable file data.

I create these items in my javascript using a JSON string set in a hidden field when the page is loaded or when the controlling element (`AJAX async file upload`) performs it's `OnClient_UploadComplete` function.

Everything I have is solid so far: the items are created on the client side, and I can get any values changed using an existing hidden field and transfer the data back to a BL object when I need it.

My problem is that during the server-side `On_UploadComplete` function, my server code cannot find any of the dinamically created items created by my javascript to add essential data to the new item.

I have to be missing something. The value I get from the control is `"/r/n"`..

My best guess is that my c# code is set up wrong. On the page, to find the ul I have:

```
Control m_ulFileItems = m_fuPhotoUpload.FindControl("m_ulFileItems"); 
```

I'll do some more loking, but this is an important aspect of getting this control to work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:25:58.957

在页面中添加一个隐藏字段，然后在发回服务器之前，扫描列表中的所有项目，可能会创建一个 JSON 对象，其中包含所创建项目中所有需要的信息，并将隐藏字段值设置为此 JSON。现在您应该能够获取该值并在 C# 中解析 JSON 并从那里处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:11:46.473

我不知道您如何能够在服务器端访问这些控件。但是，我建议您将它们的值从客户端传递到服务器，可能像这样： $.ajax({ url: ..., type: ..., data: ids and values from your controls in json format } );

以下是更多细节：如果这是 HTML：

```
<div>
    <div id="placeHolder"></div>
    <input type="button" value="Submit" onclick="submit();" />
</div> 
```

我通过以下方式添加了一些文本框：

```
 $(document).ready(function () {
        for (var idx = 0; idx < 10; idx++) {
            $('<input class="myInput" type="text" />').appendTo($('#placeHolder'));
        }
    }); 
```

那么这应该工作：

```
 function submit() {
        var jsonInput = '{';
        var inputList = $(".myInput");

        for (var idx = 0; idx < inputList.length; idx++) {
            jsonInput = jsonInput + 'txt_' + idx + ': ' + $(inputList[idx]).val() + ',';
        }

        jsonInput = jsonInput.substring(0, jsonInput.length - 1);
        jsonInput = jsonInput + '}';
        alert(jsonInput);

        $.ajax({
            url: "WebForm1.aspx/HandleSubmitClick",
            data: jsonInput

        });
    } 
```

希望能帮助到你。

如果您不喜欢对服务器的 Ajax 调用，我可以建议使用隐藏控件，并在访问服务器之前将该​​字符串放入隐藏控件中。然后您将能够在服务器端获取该隐藏控件的值。

无论如何，这是基本思想 - 在客户端收集和准备数据，然后以某种方式将其发送到服务器端。

# ruby-on-rails - rails 不要为特定的 URL 调用 before_filter

> ID：12571131
> 
> 赞同：0
> 
> 时间：2012-09-24T18:58:07.123
> 
> 标签：ruby-on-rails, routes, controllers

我正在定义一个 before_filter :authorize_special_user，它检查特殊条件是否存在。如果是，那么没关系，否则我会重定向到“/users/special#account”之类的 URL。那么如何指定不在 URL“/users/special#account”上调用 before_filter 呢？通常它是由

```
before_filter :authorize_special_users :except => [ :users ] 
```

但它不会在这里工作。我试过

```
before_filter :authorize_special_users :except => [ "/users/special#account" ] 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:10:15.370

另一种解决方案是将代码包装在条件过滤器的 before 中：

```
def authorize_special_users
    unless request.path == "/users/special"
        ...
    end
end 
```

# android - 如何从 addTextChangedListener 知道文本是如何变化的

> ID：12571132
> 
> 赞同：1
> 
> 时间：2012-09-24T18:58:27.900
> 
> 标签：android, android-edittext

我有一个带有 EditText 和 ListView 的屏幕。当您在 EditText 中键入内容时，将启动一个 AsyncTask（任何现有的 AsyncTask 都将被取消并丢弃）以在本地查询某些数据以显示在 ListView 中。如果 EditText 没有文本，则查询并显示所有数据。本质上，EditText 是屏幕上数据的过滤器。这很容易做到。在 addTextChangedListener 中，只需取消之前的 AsyncTask，启动一个新任务，然后将 s.toString() 传递给它。

当用户按退格键删除 EditText 中的某些文本时，我想要默认行为（所有数​​据都填充列表）。这适用于我当前的 addTextChangedListener 实现。

但是，我的 EditText 右侧还有一个 X 按钮。这是为了清除 EditText ( `EditText.setText("");`)。这是一个特例。在这种情况下，我不希望查询发生。问题是，addTextChangedListener 似乎不够聪明，无法知道这一点。它被触发是因为文本已更改并且查询了所有数据。

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:03:17.977

使用`boolean ignoreNextTextChangeKThxBye`数据成员，根据需要设置/清除它`boolean`并使用`if()`语句来避免执行查询。

# c# - Unsure about DatePicker data type format

> ID：12571135
> 
> 赞同：-1
> 
> 时间：2012-09-24T18:59:05.690
> 
> 标签：c#, .net, sql-server-2008

i'm new to using C# and .NET and SQL Server...i'm doing a form design to allow a staff member to register a customer's details to a database. in the form i have the method to extract the data from the fields in the form, as well as a date picker to enter a customer's date of birth, however i am finding a bit of trouble to enter the format and default data type as i am unsure of how i am to go about doing this...the code for my form is shown below..."dobTP" is the name of my date picker box:

```
 SAF.AddNewCustomer(CustomerFirstName, CustomerLastName, CustomerContactNumber, dobTP, CustomerUsername, CustomerPassword, CustomerAddress, CustomerLicense, CustomerCreditCard);
        txtCustomerFirst.Text = "";
        txtCustomerLast.Text = "";
        txtCustomerContact.Text = "";
        dobTP ??
        txtCustomerUsername.Text = "";
        txtCustomerPassword.Text = "";
        txtCustomerAddress.Text = "";
        txtCustomerLicense.Text = "";
        txtCustomerCredit.Text = "";
        MessageBox.Show("Customer Created"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:38:22.830

您使用的是哪个 DatePicker 控件？

这是我的经验，大多数支持一个属性，可能称为 SelectedDate 是可以为空的**DateTime？**类型。通过将此值设置为 null，它将重置 DatePicker。

如果要重置 .NET DateTimePicker 控件，它的 Value 属性不可为空。有一种解决方法可以清除它，尽管我从未尝试过。这是一个显示解决方法的链接：http: [//dotnetref.blogspot.com/2009/03/setting-datetimepicker-to-blank-value.html](http://dotnetref.blogspot.com/2009/03/setting-datetimepicker-to-blank-value.html)。

# python - Pidgin script with Python/ Get Focus Signal

> ID：12571138
> 
> 赞同：1
> 
> 时间：2012-09-24T18:59:16.123
> 
> 标签：python, plugins, ubuntu-12.04, dbus, pidgin

I am creating a script in Python to integrate Pidgin with Unity (Ubuntu 12.04), I've managed to do the counting notifications system using the Unity API, but i dont know what event or signal that is activated when the conversation window gains focus(To clear the message counter)... I've tried some of the signals available on the documentation of Pidgin (https://developer.pidgin.im/wiki/DbusHowto) but none of them worked, is there any GTK(or anything) event that is triggered when the window chat gets focus?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T13:52:21.943

[此处](https://developer.pidgin.im/doxygen/dev2.x.y/html/gtkconv-signals.html)列出了对话 UI 信号，这些信号可能对您尝试做的事情更有帮助。

虽然我不知道我理解你的评论是什么意思，当你尝试其他一些信号时，计数器被立即擦除。这听起来对我来说可能是一个编码错误。

# javascript - prevent auto tag generate in javascript innerHTML

> ID：12571139
> 
> 赞同：0
> 
> 时间：2012-09-24T18:59:21.973
> 
> 标签：javascript, html

Why does

```
theMenuSection.innerHTML='<ul>';
alert(theMenuSection.innerHTML); 
```

Produce `<ul> </ul>` just i have the opening tag.can i get `<ul>` from innerHTML tag

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:15:29.437

通常（*这取决于每个浏览器*）当您与 DOM 交互或使用 innerHTML（*它与 DOM 交互*）时，您将看到浏览器对 HTML 应该是什么样子的“更正”解释。当您的源代码没有这些元素时，Firefox 会自动将“thead”元素注入表中的原因相同。浏览器试图从它看到的内容中推断出“正确”的 HTML。

# javascript - 预过滤流沙页面 - jQuery

> ID：12571141
> 
> 赞同：1
> 
> 时间：2012-09-24T18:59:24.700
> 
> 标签：javascript, jquery, html, filter

有没有办法可以预过滤此页面以仅显示“应用程序”。

就像，如果我访问[http://razorjack.net/quicksand/demos/one-set-clone.html#app](http://razorjack.net/quicksand/demos/one-set-clone.html#app)它只会显示“应用程序”。这可能吗？

谷歌搜索一些人说这会有所帮助：

```
if(window.location.hash) {
                // run code here to filter the quicksand set
                var $filteredData = $data.find('li[data-type=' + window.location.hash + ']');
                $applications.quicksand($filteredData, {
                    duration: 800
                });
            } 
```

但我不知道在哪里使用它。

**非常感谢您在这里的任何帮助**- 真的卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:25:14.627

```
$(document).ready(function(){
   //on page load, we check to see if a hash value exists.
   if(window.location.hash) {
       // run code here to filter the quicksand set
       var $filteredData = $data.find('li[data-type=' + window.location.hash + ']');
       $applications.quicksand($filteredData, {
           duration: 800
       });
   }else{
       // the page does not have a hash value. deliver normal content.
       $applications.quicksand('Your Normal Data Here', {
           duration: 800
       });
   }
}); 
```

此代码仅在页面准备好后运行。它检查哈希值是否存在。如果是这样，它将数据过滤到`li`具有`data type equal to the hash value`. 然后它准备流沙以相应地过滤数据。如果不存在哈希值，我们会正常加载流沙。我不知道您对选择器做了什么，所以只需用`'Your Normal Data Here'`您使用的任何数据过滤器替换即可。

应该注意的是，根据示例，他们希望您具有`<li>`如下结构->

`<li data-type="data1"> //stuff </li>`

`data1`用于过滤目的的预期哈希值在哪里。

# jquery - 使绝对定位的 div 在悬停和导航时可见

> ID：12571143
> 
> 赞同：1
> 
> 时间：2012-09-24T18:59:32.200
> 
> 标签：jquery, html, css

我有一个绝对定位`div`，显示在`a`. 由于它绝对位于锚点（`top:0; left:0`）的底部，**我希望让用户从锚点移动到 div 而不隐藏 div**。

实际上，我准备了一段 JQuery 代码，但我只能让 div 在悬停时显示。当我从锚点移动到 div 时，后者被顽固地隐藏了。看看[JSFiddle](http://jsfiddle.net/fbZkJ/)看看我做了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:00:41.430

您需要通过链接包装 div。这种方式悬停 div 也将被识别为悬停链接，因为它是父级。

```
<a>
    Hover Me!
    <div>Hidden Message.</div>
</a> 
```

您根本不需要 javascript 来完成这项任务。

等一下我的小提琴。这是：http: [//jsfiddle.net/xwder/1/](http://jsfiddle.net/xwder/1/)

或者，您可以用另一个容器包装 the`a`和 the `div`both，这样您就不会在链接中包含子项。看看亚历克斯的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:13:00.420

首先，您使用 javascript 使一切变得过于复杂。在这种情况下您不需要它，因为您可以只使用父容器来处理悬停动作。

我个人会这样做：http: [//jsfiddle.net/qLUf9/](http://jsfiddle.net/qLUf9/)

```
<div class="hover_container">
    <a class="button">Click Me</a>
    <div class="container">
       This is my hover content.
    </div>
</div> 
```

和CSS：

```
a.button {
 background-color: blue;
 color: #fff;
}

.hover_container {
 position: relative:  
}

.hover_container .container {
 display: none;
 border: 1px solid #000;
 float: left;
 position: absolute;
 left: 0;
 top: 20px;
}

.hover_container:hover .container {
 display: block;
} 
```

**请注意：** IE6 不支持`:hover`块元素的属性。对于 IE6 及更低版本，您必须使用一些基本的 javascript 来添加一个类，例如`hovered`该元素。您可以在此处阅读有关修复 IE6 悬停错误的更多信息：[http ://robspangler.com/blog/hover-pseudo-class-bug-fix-for-ie6/](http://robspangler.com/blog/hover-pseudo-class-bug-fix-for-ie6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:10:02.253

试试这个。我认为它可以满足您的需求，而不会过多地更改您的代码。:)

[链接到小提琴](http://jsfiddle.net/pnztk/)

# ajax - iOS 6 Mobile Safari Session Variables not retained when set via AJAX

> ID：12571144
> 
> 赞同：4
> 
> 时间：2012-09-24T18:59:36.827
> 
> 标签：ajax, mobile-safari, session-variables, ios6

> **Possible Duplicate:**
> [Is Safari on iOS 6 caching $.ajax results?](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

I have been having a problem with session variables set via AJAX in mobile Safari iOS 6\. I included a sample that will set a session variable, redirect to another page, abandon the session and start over. This works fine the first 2 times. On the third time through the process, the session variables get lost. The problem only happens in iOS 6 safari. It works in all other browsers I have tried.

The sample consists of 3 pages. Page1 sets the session variable and redirects to Page 2\. Page 2 displays the session variable. Page 3 abandons the session variable.

Page 1 HTML:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="sm" runat="server" EnablePageMethods="true">
            <Scripts>
                <asp:ScriptReference Path="~/Page1.js" />
            </Scripts>
        </asp:ScriptManager>
        <div onclick="setSessionVariable()">Set session variable and redirect to page 2</div>
    </form>
</body>
</html> 
```

Page 1 Javascript:

```
function setSessionVariable() {
    PageMethods.SetSessionVariable(displaySetSessionVariable);
}

function displaySetSessionVariable(bReturn) {
    window.location = "Page2.aspx";
} 
```

Page 1 Code:

```
using System.Web.Services;

namespace SafariSessionProblem {
    public partial class Page1 : System.Web.UI.Page {
        protected void Page_Load(object sender, EventArgs e) {

        }

        [WebMethod]
        public static Boolean SetSessionVariable() {
            System.Web.HttpContext.Current.Session["TestVariable"] = 1;
            return true;
        }
    }

} 
```

Page 2 HTML:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Label ID="lbl" runat="server" Text="Label"></asp:Label><br /><br />
        <div onclick="window.location = 'Page3.aspx'">Redirect to page 3 and abondon session</div>
    </form>
</body>
</html> 
```

Page 2 Code:

```
namespace SafariSessionProblem {
    public partial class Page2 : System.Web.UI.Page {
        protected void Page_Load(object sender, EventArgs e) {
            lbl.Text = Session["TestVariable"].ToString();
        }
    }
} 
```

Page 3 HTML:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div onclick="window.location = 'Page1.aspx'">Start over</div>
    </form>
</body>
</html> 
```

Page 3 Code:

```
namespace SafariSessionProblem {
    public partial class Page3 : System.Web.UI.Page {
        protected void Page_Load(object sender, EventArgs e) {
            Session.Abandon();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:54:16.850

我已经弄清楚了这个问题，因为在 IOS6 Safari 中缓存了 ajax 请求和响应，所以在向服务器发送请求时它使用缓存的请求。为了解决这个问题，只需将时间戳添加到您的 Ajax 请求中，它就可以正常工作。我已经放置了我使用过的代码，并在此帮助下更新了您的代码。希望能帮到你。

这是克服此问题的新变量 parameters.timeStamp = new Date().getTime();

```
 parameters.qString = location.hash;
parameters.timeStamp = new Date().getTime();//this new line for safari issue

application.ajax({
    url: application.ajaxUrl + "ajax",
    type: "post",
    dataType: "json",
    data: $.extend({method:parameters.method}, parameters),
    success: function( response ){
        stop_spinner();
            })
        }); 
```

谢谢

# php - imap 跨平台问题

> ID：12571147
> 
> 赞同：0
> 
> 时间：2012-09-24T18:59:57.263
> 
> 标签：php, imap

我已经开发了一个例程来打开不同平台上的邮箱。如果代码在 linux 上运行，则打开 windows 交换会出现问题，反之亦然。我该如何解决这个问题。我正在使用以下代码打开 IMAP。

```
$hostname = '{pop.lcn.com:110/pop3}INBOX';
$username = 'abc@xyz.co.uk';
$password = 'xxxxx';
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to mail server: ' . imap_last_error());
$emails = imap_search($inbox,"ALL" ); 
```

特别是该服务器上的邮箱将打开邮箱。但现在它不会打开并给出连接超时问题。当我从 Windows 服务器检查它时，它工作正常。现在我不知道服务器上有什么样的变化。该脚本没有运行。

# android - 如何获悉任何证书更改

> ID：12571159
> 
> 赞同：1
> 
> 时间：2012-09-24T19:00:36.517
> 
> 标签：android, certificate, ssl-certificate

Android 4.0 允许用户管理证书（启用、禁用、安装）...但是是否有可能收到有关此类更改的通知？有没有广播之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:26:34.823

Jelly Bean（API 级别 16）有一个[ACTION_STORAGE_CHANGED](http://developer.android.com/reference/android/security/KeyChain.html#ACTION_STORAGE_CHANGED)广播。虽然它没有给你详细信息（发生了什么以及女巫证书），但想法是，如果你正在缓存证书或信任状态，你应该使你的缓存无效并重新验证等。不过，在 ICS 上没有任何内容，AFAIK。

# haskell - 由于柯里化，arity-n 的函数真的只是一个 n 类吗？可以做成 1 类吗？

> ID：12571161
> 
> 赞同：13
> 
> 时间：2012-09-24T19:00:45.253
> 
> 标签：haskell, currying, category-theory, arity

这个问题有一个很长的前奏，然后我才能真正问出来:)

假设类型 A 和 B 代表类别，那么函数

> f :: B -> A

是两个范畴之间的态射。我们可以创建一个新类别，其中 A 和 B 作为对象，f 作为箭头，如下所示：

![在此处输入图像描述](../Images/402e7a064715774319487efe847ddc78.png)

现在，让我们引入一个新的类别 C 和函数 g：

> g :: C -> B -> A

我希望能够将 C 和 g 添加到我上面的类别中，但我不确定该怎么做。直观地说，我想要这样的东西：

![在此处输入图像描述](../Images/f9dc9b8b175780da00c0984ac4ca4835.png)

但我以前从未在类别图中看到过类似的东西。为了使这个洁净，我可以引入一个虚拟箭头 g' 并构造一个像这样的 2 类：

![在此处输入图像描述](../Images/2f5e1d7f3e681855c4a36cdb9488ee84.png)

但这似乎是一个迟钝的画面。（当然，我们可以使用我上面画的图片作为正确图片的简写。）而且，现在也不完全清楚 g 和 g' 到底是什么。g 不再是一个将类别 C 作为输入并返回态射 :: B -> A 的函数。相反，

> g' :: (C -> C)
> 
> g :: (C -> C) -> (B -> A)

如果我们通过 g 身份，那么一切都会正常工作。但是如果我们给它传递一些其他函数，那么谁知道会发生什么？

所以我的问题是：n 类别中的 n 箭头真的是我们应该考虑具有 arity n 的函数的方式吗？还是有一些更简单的方法可以将此功能表示为我错过的标准类别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T20:25:03.727

在这里谈论“类别之间的态射”听起来像是一个可能的类别错误（哈，哈）。在 Haskell 中，我们最常谈论所谓的类别**Hask**，它是该类别的一些不一致理想化^((0))版本，其对象是种类的类型，`*`而态射是函数。如果它们不是**Hask**的态射，则不清楚类别之间的“功能”是什么。

另一方面，在更一般的设置中，您当然可以定义一个类别，其对象是其他类别^((1))，具有您想要的任何态射，以满足必要的属性。通常的例子是**Cat**，它的态射是函子的[小范畴的范畴。](http://en.wikipedia.org/wiki/Small_category#Small_and_large_categories)

也就是说，无论哪种情况，您的问题的答案都基本相同。要谈论两个对象之间的态射集合，就好像该集合本身就是一个对象——即，作为其他态射的源或目的地——你需要一个对象来扮演这个角色，并且需要某种方式来间接谈论态射，以便你可以来回翻译。

如果我们已经有一种方法可以将对象对作为单个对象（通常称为某种“乘积”）进行讨论，那么一种方法是定义态射集合 A⊗B→C 和态射 A→C ^B的集合，它允许对象 C ^B代表态射 B→C 的集合。

如果所讨论的“对象对”实际上是一个[分类积](http://ncatlab.org/nlab/show/product)，我们就有[一个笛卡尔封闭范畴](http://ncatlab.org/nlab/show/cartesian+closed+category)，**Hask**和**Cat**都是。在 Haskell 中，上述等价是函数`curry`和`uncurry`^((2))。

当然，这不是谈论态射作为对象的唯一方式。一般概念简称为“封闭范畴”。但是，如果您正在考虑高阶函数和函数式编程，那么您可能会想到一个笛卡尔封闭类别。

* * *

**(0)**这通常涉及诸如假装 ⊥ 不存在（因此所有函数都是总函数）以及将产生相同输出的函数视为相同的事情（例如，忽略性能差异）。

**(1)**但不要试图谈论对象都是类别的*类别*，否则[Bertrand Russell](http://en.wikipedia.org/wiki/Russell%27s_paradox)会给你生意。

**(2)当然，**[以逻辑学家 Haskell Curry 的](http://en.wikipedia.org/wiki/Haskell_Curry)名字命名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T00:11:37.560

我在类别理论方面相当未受过教育，但是：

在 Haskell 编程中，我们经常（假装我们）使用类别**Hask**，其对象是 Haskell 类型，态射是 Haskell 函数。

将这种理解应用于您的示例，我看到`B`and`A`是对象，并且`f`是它们之间的态射。

`g`然而**不是**`C`和之间的态射`f`，所以不应该尝试在和`g`之间绘制箭头。`C``f`

如果我们应用类型构造函数的右关联性`->`，我们得到`g :: C -> (B -> A)`. `B -> A`本身是 Haskell 类型，因此本身应该是**Hask**的对象。`f`然而**不是**那个对象；它是类型中的一个特定值`B -> A`，但`B -> A`对象将是类型本身。

纯粹用 Haskell 术语思考也是有意义的。仅仅因为`g`应用于一个类型的值`C`给了我们一些类型的函数`B -> A`，这并不意味着它`g`的返回值与`f`其他类型的函数有任何关系`B -> A`。

所以这给了我们`f`一个在对象`B`和对象之间绘制的态射`A`，以及`g`作为在对象`C`和对象之间绘制的态射`B -> A`。

这是我的类别理论知识分解的地方。`f`似乎很明显，和对象之间应该存在某种关系`B -> A`，因为在 Haskell`f`中是类型中的值`B -> A`。我不知道在范畴论方面这种关系是什么。

CA McCann 的回答听起来像是您需要通过一些不直接由类别建模的“额外”关系来处理它。因此，就类别而言，对象`B -> A`也可以称为`D`; 它与其他任何东西都没有关系，除非由将它连接到其他对象的态射给出。只有结合类别“外部”的其他信息，我们才能识别`A`、`B`、`f`和`D`（真的`B -> A`）之间的联系。但我可能误解了这个描述。

# html - 在 HTML 中创建具有透明背景的动态图像

> ID：12571172
> 
> 赞同：0
> 
> 时间：2012-09-24T19:01:18.190
> 
> 标签：html, css, background-color

假设我正在制作一个情人节应用程序。我想要一颗心从 0 到 100 填满粉红色，以表达对另一个人的爱。

图像的高度为 102 像素，每 % 有人“恋爱”，我们将爬升一个单像素高度线。

我的做法如下：进入 Photoshop 并去除心脏内部的“背景”，使内部现在是透明的。周围心脏的区域将被涂成白色。放在一个白色背景的网站上。将图像放在 102 x（随便）的 div 上，然后将另一个 div 放入其中，其背景颜色为粉红色。然后，增加子 div 的高度就很简单了。

这很好，但我只能在有白色背景的网站上使用它，因为是白色阻止了该区域变成粉红色。简而言之，我需要一种方法来填满这颗心，同时能够改变网页的背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:07:31.827

像往常一样创建心脏，使背景透明并填充中心。将其用作 div 的背景图像并将其放置在底部。

下面的示例显示了 40% 的心脏。

HTML

```
<div class="heart-wrap">
    <div class="heart" style="height: 40px; margin-top: 60px;"> 
    </div>
</div> 
```

CSS

```
.heart,
.heart-wrap {
    width: 100px;
    height: 100px;
}
.heart {
    background: transparent left bottom url('/heart.png');
} 
```

演示：http: [//jsfiddle.net/UFBjh/](http://jsfiddle.net/UFBjh/)

演示2：http : [//jsfiddle.net/L5uDp/](http://jsfiddle.net/L5uDp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:27:42.333

看看这个演示。这可能是你想要的 - [http://jsfiddle.net/Rhpyp/](http://jsfiddle.net/Rhpyp/)

该解决方案涉及使用 CSS3 使用[http://www.webfroze.com/css/heart-shape/中提到的技术](http://www.webfroze.com/css/heart-shape/)*绘制心脏*

然后根据需要让外部 div 处理心脏的部分隐藏。

![在此处输入图像描述](../Images/761d5b3b42ddf4196a58993bee4efc7a.png)

心脏的颜色以及用于部分隐藏它的 DIV 可通过 CSS 进行编辑。

# microsoft-metro - Toast 通知失败，模拟器

> ID：12571173
> 
> 赞同：3
> 
> 时间：2012-09-24T19:01:34.353
> 
> 标签：microsoft-metro

我在这里使用 toast 通知示例：

[http://code.msdn.microsoft.com/windowsapps/Toast-notifications-sample-52eeba29](http://code.msdn.microsoft.com/windowsapps/Toast-notifications-sample-52eeba29)

当我选择本地机器进行测试时，会出现 toast 通知。当我选择模拟器时，我看到的只是 XML。我的清单启用了 toast。我错过了任何步骤吗？

![在此处输入图像描述](../Images/a986a5c41cd0567c06a809786c115622.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:52:29.700

Toast 通知（和其他 API，包括与磁贴更新和推送通知相关的 API）在模拟器中不起作用。对于测试和调试，使用“本地机器”作为部署目标。

# scala - 通过继承构建不可变列表

> ID：12571174
> 
> 赞同：1
> 
> 时间：2012-09-24T19:01:37.957
> 
> 标签：scala, immutability, multiple-inheritance, scala-collections

是否可以通过 Scala 中的继承来构建不可变列表？我有一个创建 MenuBar 的基本特征。MenuBar 将具有标准标题：文件、编辑、视图/窗口、帮助等。我希望继承特征能够将子项添加到菜单标题。我希望动态创建菜单，因此将有一个函数列表，在打开菜单以创建子树时将调用这些函数。由于函数列表将在编译时已知，因此如果它可以是一个不可变列表会很好。

Scala 中是否有任何方法可以通过构造函数/初始化层次结构创建不可变列表？如果不是在 Scala 中，是否有任何语言提供此功能？

用一个使用可变列表的简单示例来说明问题。TrA 和 TrB 彼此独立编写：

```
trait Base
{
  val list = scala.collection.mutable.LinkedList[String]()
}
trait TrA extends Base
{
  list += "A"
}
trait TrB extends Base
{
  list += "B"
}

val ab = new TrA with TrB {} 
```

由于 List 的内容在编译时是已知的，是否有使其成为**val 不可变列表？**当然，任何可变集合都可以通过 def 调用公开为不可变集合。

以下将编译：

```
trait Base
{ val list: List[String] = Nil }

trait TrA extends Base
{ val list = "A" :: super.list }

trait TrB extends Base
{ val list = "B" :: super.list }

val ab = new TrA with TrB {} 
```

但是如果不抛出空异常就无法初始化。使 val list 变得懒惰也无济于事，因此需要 0__ 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:05:19.323

这与我记得的一个较老的问题非常相似；我再也找不到它了，所以我尝试重建方法：

```
trait Base {
  protected def contribute : List[String] = Nil

  val list = contribute
}

trait TrA extends Base {
   override protected def contribute = "A" :: super.contribute
}

trait TrB extends Base {
   override protected def contribute = "B" :: super.contribute
}

val x = new TrA with TrB {}
x.list  // List(B, A)
val y = new TrB with TrA {}
y.list  // List(A, B) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:28:53.007

我会隐藏列表的可变部分，以便只有后代`Base`可以添加到它（没有别的）：

```
trait Base {
  private val theList = scala.collection.mutable.LinkedList[String]()

  protected def add(item: String) {
    theList += item;
  }

  // return only an immutable copy of the list
  def list: Seq[String] = theList.toSeq; // or .toList, .toSet, etc.
}

trait TrA extends Base {
  add("Apple")
}

trait TrB extends Base {
  add("Orange")
} 
```

虽然行为不端的后代仍然可以在以后添加一些项目，但从外部修改列表是不可能的。也许可以用替换`def list`来`lazy val list`获得一些效率，但你必须确保它没有在任何构造函数中被调用。

# visual-studio-2010 - 使用 VS2010 作为 IDE 和 Intel C++ Compiler 13 从调试切换到发布模式

> ID：12571182
> 
> 赞同：0
> 
> 时间：2012-09-24T19:02:25.390
> 
> 标签：visual-studio-2010, debugging, compiler-construction, icc

我有一个来自 SDK 的插件代码。代码处于调试模式。我使用英特尔编译器，它只在发布模式下应用优化。

在项目的配置管理器下，仅定义了“调试”模式。

如何切换到“发布”模式并启用所有英特尔编译器的优化？如果我在调试模式下启用它们，则不会应用任何内容（空报告）。

我找不到这样做的诀窍。

谢谢你。

PS 我仍然使用 /MT 开关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:55:44.290

项目配置由用户管理，因此如果缺少**发布配置，您可以自己创建。**在内部，它们可能因编译器选项和定义而有所不同。当我的 PC 速度非常慢时，我有时会使用我创建的配置，显然命名为`Debug_Optimized`.

例如，Debug 配置通常已经`DEBUG`定义。它使一些代码行注释掉，以加快生成的程序。

您通常可以通过基于现有配置来加快创建另一种配置。查找所有“性能”和“优化”选项卡并根据您的需要进行设置。通常没有一种最佳配置（有时“优化大小”比“优化速度”更快）。试试这些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:08:34.873

好的，解决方法就到这里，首先使用/MD或者/MD，很简单。然后定义 NDEBUG。请注意在项目中的每个文件中执行此操作。在我的例子中，一些文件被设置为 /MTd，它设置了调试模式。

我使用了英特尔编译器，这个线程可能会有所帮助： http: [//software.intel.com/en-us/forums/topic/328136](http://software.intel.com/en-us/forums/topic/328136)

# ruby-on-rails-3.2 - Rails-我可以在 ApplicationController 的 before_filter 中执行 params.merge

> ID：12571186
> 
> 赞同：1
> 
> 时间：2012-09-24T19:03:07.860
> 
> 标签：ruby-on-rails-3.2, before-filter

我想在每个请求的 params 哈希中添加一个参数，这就是我在 ApplicationController 级别工作的原因。我有类似以下的东西不起作用。

```
class ApplicationController < ActionController::Base
  before_filter :tagOn

    def tagOn  
      v = findValueToTagOn() #find somehow what will be the value to tag on. Is dynamic.
      Rails.logger.info("PARAMS BEFORE: #{params.inspect}")
      params.merge(:my_id => v.to_s)
      Rails.logger.info("PARAMS AFTER: #{params.inspect}")
    end 
```

现在我之前和之后的输出都是一样的，这告诉我合并到参数不起作用。任何想法如何做到这一点？谢谢。

使用 Rails v 3.2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:46:35.023

看起来你是一个角色。

`params.merge!(:my_id => v.to_s)`

# jquery - Ajax 数据返回缓慢

> ID：12571188
> 
> 赞同：4
> 
> 时间：2012-09-24T19:03:16.357
> 
> 标签：jquery, html, ajax

我正在使用 Ajax 调用 PHP 页面。我注意到当返回大量数据（将近 5000 行）时，页面加载需要几秒钟。这是正常行为吗？这是我用来调用它的代码：

```
$.ajax({
        url: '_get_items.php?project_id=<?=$_GET['project_id']?>&list_id=<?=$_GET['list_id']?>&sort='+ sort +'&assigned_to='+ assigned_to,
        type: "GET",
        success: function(data) {
            $('.tasks_items').html(data);

        }
    }); 
```

当我在 Chrome 中调试它时，大部分时间都花在“XHR 就绪状态更改”和“重新计算样式”上，被调用了几百次。

![在此处输入图像描述](../Images/4eb13270fc45e259398bc9b2290ef833.png) [全尺寸](https://i.stack.imgur.com/UyCa1.png)

我确信它这么慢的原因是因为所有的数据都被返回了。我的问题是，如何解决这个问题？我应该缩小 HTML 吗？GZip 已启用。还有其他建议吗？

这是网络屏幕：

![在此处输入图像描述](../Images/de42c2991fd44052cc439fb41e5d6650.png) [全尺寸](https://i.stack.imgur.com/hsTMB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:08:55.163

检查网络调试面板。它将向您显示请求花费的时间。是否等待服务器响应，和/或接收数据。如果它大部分时间都在等待响应，那么您需要分析您的服务器端代码。如果它正在接收，您需要考虑如何使有效载荷更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:08:56.393

我注意到在附加大块 HTML 时，使用原始 JavaScript 比使用库更快：

```
$.ajax({
    url: '_get_items.php?project_id=<?=$_GET['project_id']?>&list_id=<?=$_GET['list_id']?>&sort='+ sort +'&assigned_to='+ assigned_to,
    type: "GET",
    success: function(data) {
        $('.tasks_items').get(0).innerHtml = data;
    }
}); 
```

# ruby-on-rails-3 - ActiveRecord 在 include?() 匹配时查找

> ID：12571191
> 
> 赞同：0
> 
> 时间：2012-09-24T19:03:25.043
> 
> 标签：ruby-on-rails-3, activerecord

我有一个带有属性 subcategory_list 的资源模型，它是一个以逗号分隔的子类别列表。是否可以使用 find_by_x 方法（或等效方法）仅提取属于某个子类别的资源？

所以如果给定：

```
Resource.create(subcategory_list: "Fun, Games") # resource 1
Resource.create(subcategory_list: "Fun") # resource 2
Resource.create(subcategory_list: "Games") # resource 3 
```

当我的输入是“Fun”时，我需要一个查询来获取资源 1 和 2。我只能用以下内容返回“Fun”，但不能返回“Fun, Games”

```
Resource.find_all_by_subcategory_list("Fun")
=> resource 2 (but not resource 1) 
```

有没有办法修改这个查询以包括“Fun, Games”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:28:52.653

If`subcategory_list`是一个逗号分隔的字符串：

```
Resource.where('subcategory_list LIKE ?', "%Fun%") 
```

如果`subcategory`是关联模型：

```
Resource.joins(:subcategories).where('subcategories.name = ?', "Fun") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:35:56.733

我同意 MrTheWalrus 的观点，但您可能还想查看[Michael Bleigh](https://github.com/mbleigh)的[acts_as_taggable_on](https://github.com/mbleigh/acts-as-taggable-on)。看起来您正在做的是与 Resource 相关联的标签，acts_as_taggable_on gem 将增加很多功能，而无需编写大量额外代码，包括您现在尝试做的事情。

# java - 每个实体一个 DAO - 如何处理引用？

> ID：12571194
> 
> 赞同：5
> 
> 时间：2012-09-24T19:03:41.667
> 
> 标签：java, spring, jpa, entitymanager, spring-orm

我正在编写一个具有典型两个实体的应用程序：用户和用户组。后者可能包含前者的一个或多个实例。我有以下（更多/更少）映射：

用户：

```
public class User {

    @Id
    @GeneratedValue
    private long id;

    @ManyToOne(cascade = {CascadeType.MERGE})
    @JoinColumn(name="GROUP_ID")
    private UserGroup group;

    public UserGroup getGroup() {
        return group;
    }

    public void setGroup(UserGroup group) {
        this.group = group;
    }
} 
```

用户组：

```
public class UserGroup {

    @Id
    @GeneratedValue
    private long id;

    @OneToMany(mappedBy="group", cascade = {CascadeType.REMOVE}, targetEntity = User.class)
    private Set<User> users;

    public void setUsers(Set<User> users) {
        this.users = users;
    }

} 
```

现在我为这些实体（UserDao 和 UserGroupDao）中的每一个都有一个单独的 DAO 类。我所有的 DAO 都使用 @PersistenceContext 注释注入了 EntityManager，如下所示：

```
@Transactional
public class SomeDao<T> {

   private Class<T> persistentClass;

   @PersistenceContext
   private EntityManager em;

   public T findById(long id) {
       return em.find(persistentClass, id);
   }

   public void save(T entity) {
       em.persist(entity);
   }
} 
```

使用此布局，我想创建一个新用户并将其分配给现有用户组。我这样做：

```
UserGroup ug = userGroupDao.findById(1);

User u = new User();
u.setName("john");
u.setGroup(ug);

userDao.save(u); 
```

不幸的是，我得到以下异常：

> 对象引用未保存的瞬态实例 - 在刷新之前保存瞬态实例：xyzmodel.User.group -> xyzmodel.UserGroup

我对其进行了调查，我认为这是因为每个 DAO 实例都**分配了不同的 entityManager**（我检查过 - 每个 DAO 中对实体管理器的引用不同）并且对于用户 entityManager 不管理传递的 UserGroup 实例。

我试图将分配给用户的用户组合并到 UserDAO 的实体管理器中。这样做有两个问题：

*   它仍然不起作用 - 实体管理器想要覆盖现有的 UserGroup 并且它得到异常（显然）
*   即使它有效，我最终也会为每个相关实体编写合并代码

当使用相同的实体管理器进行查找和持久化时，所描述的案例有效。这指向一个问题：

*   我的设计坏了吗？[我认为这与此答案](https://stackoverflow.com/a/10211989/498325)中推荐的非常相似。所有 DAO 是否应该有一个 EntityManager（否则网络声称）？
*   还是应该在 DAO 内部完成组分配？在这种情况下，我最终会在 DAO 中编写大量代码
*   我应该摆脱 DAO 吗？如果是，如何很好地处理数据访问？
*   任何其他解决方案？

我使用 Spring 作为容器，使用 Hibernate 作为 JPA 实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:26:52.620

EntityManager 的不同实例在 Spring 中是正常的。如果存在，它会创建动态使用当前处于事务中的实体管理器的代理。否则，将创建一个新的。

问题是你的交易太短了。检索您的用户组在事务中执行（因为`findById`方法是隐式的`@Transactional`）。但是随后事务提交并且组被分离。当您保存新用户时，它将创建一个失败的*新*事务，因为用户引用了一个分离的实体。

解决这个问题（以及通常做这些事情）的方法是创建一个在*单个*事务中完成整个操作的方法。只需在服务类中创建该方法（任何 Spring 管理的组件都可以使用）并对其进行注释`@Transactional`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T22:36:13.727

我不知道 Spring，但 JPA 的问题是你坚持`User`a 引用 a `UserGroup`，但 JPA 认为`UserGroup`is `transient`。

`transient`是 JPA 实体可以处于的生命周期状态之一。这意味着它只是使用 new 运算符创建的，但尚未持久化（还没有持久化身份）。

由于您`UserGroup`通过 DAO 获取实例，因此那里似乎有问题。您的实例不应该是`transient`，但是`detached`。`UserGroup`您可以在从 DAO 收到实例的 ID 后打印它吗？也许还展示了`findById`实现？

您没有对`group`关系进行级联持久化，因此如果实体确实已分离，这通常应该可以工作。如果没有新实体，JPA 根本无法正确设置 FK，因为它需要`UserGroup`此处实例的 Id，但（似乎）不存在。

合并也不应该“覆盖”您的分离实体。你来这里的例外是什么？

我只是部分同意这里其他人给出的关于必须将所有内容放在一个事务中的答案。是的，这确实可能更方便，因为`UserGroup`实例仍将被“附加”，但它不应该是-必要的-。JPA 完全能够通过引用其他新实体或在另一个事务中获得的现有（分离）实体来持久化新实体。参见例如[JPA 级联持久化和对分离实体的引用抛出 PersistentObjectException。为什么？](https://stackoverflow.com/questions/4294671/jpa-cascade-persist-and-references-to-detached-entities-throws-persistentobjecte)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:32:49.263

我不知道如何，但我设法解决了这个问题。我试图将用户分配给数据库中**具有 NULL 版本字段**的用户组（用 @Version 注释的字段）。当我测试使用此表的 GWT RequestFactory 时，我发现这是一个问题。当我将该字段设置为 1 时，一切都开始工作（不需要更改事务处理）。

如果 NULL 版本字段确实导致了问题，那么这将是我收到的最具误导性的异常消息之一。

# html - HTML/CSS - 获取子 iframe 以使用父容器的宽度（Twitter 小部件）

> ID：12571196
> 
> 赞同：1
> 
> 时间：2012-09-24T19:03:48.987
> 
> 标签：html, css, iframe, twitter, widget

我之前使用过[twitter 小部件](https://twitter.com/settings/widgets)来嵌入 twitter 时间线。您可以选择设置小部件的高度，并且宽度总是刚刚扩展到父 div 的宽度。但是，在当前情况下，它并没有扩大。任何人都可以使用浏览器网络检查器（萤火虫等）来检测为什么这个特定的 iframe 将其宽度设置为 220px，而不是扩展到它的父 div 宽度？

[http://m.qwiet.com/](http://m.qwiet.com/)（点击“推文”）页面加载后。

这是我用来嵌入时间线的 HTML：

```
<a class="twitter-timeline"  href="https://twitter.com/user" data-widget-id="248169276782018560">Tweets by @user</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

请注意，没有提到宽度参数。这已经让我死了好几天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:12:15.807

你是什​​么意思没有宽度参数？看代码。它清楚地显示`width-"220px"`，当你改变它时，宽度会改变。

# php - 如何动态编写 PHP 对象属性名称？

> ID：12571197
> 
> 赞同：97
> 
> 时间：2012-09-24T19:03:56.287
> 
> 标签：php

我的代码中有如下所示的对象属性：

```
$obj ->field_name_cars[0];
$obj ->field_name_clothes[0]; 
```

问题是我有 100 个字段名称，需要动态编写属性名称。否则，对象名称和属性的键将始终相同。所以我尝试了：

```
$obj -> $field[0]; 
```

希望属性的名称会动态更改并访问正确的值。但是，我不断在 stdClass::$field 中得到 'undefined property $field;

或多或少我正在尝试在执行之前动态编写php，以便它可以输出正确的值。关于如何解决这个问题的想法？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-09-24T19:07:23.597

# PHP 7.0 更新

PHP 7对在解析器级别[处理间接变量和属性的方式进行了更改（有关更多详细信息，请参阅](http://php.net/manual/en/migration70.incompatible.php#migration70.incompatible.variable-handling.indirect)[相应的 RFC](https://wiki.php.net/rfc/uniform_variable_syntax)）。这使实际行为更接近预期，并意味着在这种情况下`$obj->$field[0]`将产生预期结果。

在不需要（现在改进的）默认行为的情况下，仍然可以使用花括号来覆盖它，如下所示。

# 原始答案

像这样编写访问权限：

```
$obj->{$field}[0] 
```

这种“用大括号括起来”的技巧在 PHP 中非常有用，只要由于变量变量而存在歧义。

考虑初始代码`$obj->$field[0]`——这是否意味着“访问名称在”中给出的属性，或者“使用名称在”中给出的属性的`$field[0]`键访问元素？大括号允许您明确表达。`0``$field`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-24T19:08:01.497

我认为您正在寻找变量-变量类型表示法，当从其他数组/对象访问值时，最好使用像这样的大括号语法来实现：

```
$obj->{field[0]} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-24T19:09:36.323

神奇的方法 __get 是你的朋友：

```
class MyClass
{
   private $field = array();

   public function __get($name)
   {
      if(isset($this->field[$name]))
        return $this->field[$name];
      else
        throw new Exception("$name dow not exists");
   }
} 
```

用法：

```
$myobj = new MyClass();
echo $myobj->myprop; 
```

说明：您所有的字段数据都存储在一个数组中。当您访问`$myobj->myprop`该属性时，该类显然不存在。这就是`__get`所谓的。在数组`__get`中查找名称并返回正确的值。`field`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-08T12:16:21.543

今天我面临这一挑战。我最终采用了这种开发方式

```
$countTickets = new \stdClass;

foreach ($tickets as $key => $value) {

    if(!isset($countTickets->total)){
        $countTickets->total = 0;
    }

    if(!isset($countTickets->{$value['categoryname']})){
        $countTickets->{$value['categoryname']} = 0;
    }

    $countTickets->total += $value['number'];
    $countTickets->{$value['categoryname']} += $value['number']; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-11T04:04:42.153

我处理了一些使用动态创建的对象属性的代码。我认为使用动态创建的对象属性非常酷（在我看来是真的）。但是，我的程序需要 7 秒才能运行。我删除了动态对象属性并将它们替换为声明为每个类的一部分的对象属性（在本例中为公共）。CPU 时间从超过 7 秒变为 0.177 秒。这是相当可观的。

我在使用动态对象属性的方式上可能做错了什么。我的配置也可能以某种方式损坏。当然，我应该说我的机器上有一个非常简单的普通 PHP 配置。

# java - Vaadin SQLContainer 仅提交单行

> ID：12571200
> 
> 赞同：1
> 
> 时间：2012-09-24T19:04:09.687
> 
> 标签：java, liferay, vaadin

我对 Vaadin 中的 SQLContainer 有疑问。`commit()`将提交对数据库的所有更改。我只想向数据库提交一行。

情况是我有一个 TableQuery 和一个表，用户可以在其中添加和删除新行。每行都有**不能为 null**的属性。问题是，如果用户向表中添加 2 个新行并删除一个。SQLContainer 尝试提交所有内容并将引发异常，因为 1 项具有空值。

是否有可能我可以告诉他只提交我希望他执行的行？

`rollback()`将还原所有更改。问题是用户可以删除已经在数据库中的项目或仅在内存中临时的项目。

创建一个是否有帮助，`RowItem`因为那个有一个提交方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:25:59.570

您可以在用户添加新创建的项目后提交。这不是最佳解决方案，但它可以解决您的问题。

# jquery - MVC Razor jQuery 局部视图渲染

> ID：12571202
> 
> 赞同：0
> 
> 时间：2012-09-24T19:04:15.007
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-partialview

*如何转换 `$("#myChildTabName").load("./MyController/MyMethod/" + myParameter);` 为使用`@url.Action`？ `MyMethod`返回一个部分视图。基本上我想在单击选项卡时加载部分视图。*

更新如下：我已经想出了一个如下的解决方案，但这给出了一个错误，说`applicationID`在当前上下文中不存在。jQuery 调用上方的警报会显示`applicationID`。

```
//The below code DOES NOT work.

function LoadTabContents(applicationID)
{
        $("#currentTab").load('@Url.Action("TabMethod", "MyController", new { @id = applicationID })')
} 
```

```
//The below code works fine.

function LoadTabContents(applicationID)
{
        $("#currentTab").load('@Url.Action("TabMethod", "MyController", new { @id = 123})')
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:32:37.043

恐怕您尝试做的事情不能全部通过 Razor 完成。applicationID 必须附加在客户端，因为只有客户端知道真正的值。你可以尝试这样的事情：

```
function LoadTabContents(applicationID) {
    $("#currentTab").load('@Url.Action("TabMethod", "MyController")' + '/'+ applicationID);
} 
```

URL.Action 将生成正确的路径，其余的将阶段性的参数附加到 JavaScript 函数。必须对斜线进行一些摆弄，因为我不记得 URL.action 是否会附加一个......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:57:37.670

`@Url.Action`- 是服务器代码，您只能在 Razor 视图中使用它。看这个问题[ASP.NET MVC Url.Action in JQuery is not recognize](https://stackoverflow.com/questions/12514745/asp-net-mvc-url-action-in-jquery-is-not-recognized/12514929#12514929)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:08:22.390

1\. 在这种情况下你不应该使用部分方法，如果你通过请求加载数据，你应该使用 return View()，而不是部分视图。但是如果你想在视图中添加一些 html，你应该使用 partial。在这种情况下，partial 意味着主视图的一部分。

如果你想避免使用主布局 - 设置属性`layout=string.Empty`

2\. 您可以使用方法加载`POST`并使用like，在这种情况下您不能使用`load()`，因为它是`GET`请求。你 $.POST 或 $.Ajax

> ```
>  public ActionResult Index()
>         {
>             if (Request.IsAjaxRequest())
> 
>                 return PartialView("partialView");
>             else
>                 return View();
>         } 
> ```

1.  基于方法类型的部分与视图的简单选项设置布局如下：

> @{ 布局 = Request.IsAjaxRequest() ？null : "~/Views/Shared/_Layout.cshtml"; }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:42:03.333

可能这个解决方案对你有用

```
$("#currentTab").load('@Url.Action("TabMethod", "MyController", new { @id = "[APPLICATION_ID]"}).replace("[APPLICATION_ID]",applicationID)') 
```

# haskell - 如何在 Cabal 包中构建和使用引导程序可执行文件

> ID：12571205
> 
> 赞同：12
> 
> 时间：2012-09-24T19:04:23.720
> 
> 标签：haskell, cabal

我想 Cabalize 一个 Haskell 项目，以便将其上传到 Hackage。它由一个构建引导可执行文件的标准 .hs 文件和八个非标准 .lhs 文件组成，这些文件由引导可执行文件处理以生成构建生产可执行文件的 .hs 文件。

换句话说，我的项目是一个自定义的文字预处理器（带有 HTML 标记、代码修饰、此处的文档），它是自己编写的。它依赖于可以翻译生产版本的文字代码的引导版本，但不适合一般使用。所以我*不*希望引导版本成为一个单独的包；它只能在这里使用一次。

我一直在使用 Makefile，这在 Cabal 中是可能的，但不符合 Cabal 的精神。什么是一种干净的方式来做到这一点，最大限度地利用阴谋集团的普遍性？我没有在在线文档中看到任何建议，除了重写 Distribution.Simple 或使用 Makefile。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T23:02:06.057

我认为将引导程序可执行文件作为单独的包发布是最简单的解决方案，并且有[关于如何将自定义预处理器与 Cabal 集成的说明](http://www.haskell.org/pipermail/haskell-cafe/2009-October/067601.html)。

如果您不想这样做，请尝试使您的预处理器成为其中的一部分`Setup.hs`（不要忘记将构建类型设置为`Custom`！）。您可以在配置步骤中运行预处理器。看看这是怎么[`wxcore`](http://hackage.haskell.org/package/wxcore)做到的。

这是一个工作示例（在 之后的样式`wxcore`）：

`Setup.hs`：

```
import Distribution.Simple
import Distribution.Simple.LocalBuildInfo
import Distribution.Simple.Setup
import Distribution.PackageDescription

import Control.Monad (forM_)
import System.Directory (copyFile)
import System.FilePath (replaceExtension)

main :: IO ()
main = defaultMainWithHooks simpleUserHooks { confHook = myConfHook }

-- Replace 'copyFile' with more complicated logic.
runMyPreprocessor :: FilePath -> IO ()
runMyPreprocessor abcFile = copyFile abcFile (replaceExtension abcFile ".hs")

myConfHook :: (GenericPackageDescription, HookedBuildInfo) -> ConfigFlags
              -> IO LocalBuildInfo
myConfHook (pkgDesc, hbi) flags = do
  let extraSrc = extraSrcFiles . packageDescription $ pkgDesc
  forM_ extraSrc runMyPreprocessor

  confHook simpleUserHooks (pkgDesc, hbi) flags 
```

`my-preprocessor.cabal`：

```
name:                my-preprocessor
version:             0.1.0.0
build-type:          Custom
cabal-version:       >=1.8
extra-source-files:  Main.abc

executable my-preprocessor
  main-is: Main.hs
  build-depends:       base < 5 
```

`Main.abc`：

```
module Main
       where

main :: IO ()
main = putStrLn "Hello" 
```

# iphone - 迁移到命名标准不佳的 Arc

> ID：12571206
> 
> 赞同：6
> 
> 时间：2012-09-24T19:04:25.210
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我正在处理一个经常忽略命名标准的代码库。因此，即使方法名称不符合 NARC，某些类中的方法也会返回引用计数为 1 的对象。很棒的东西。

我想将该项目转换为使用自动引用计数，但我有点紧张，因为 NARC 命名标准已被完全忽略。有谁知道 ARC 是否依赖 NARC 命名标准才能正常工作？

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:14:26.973

ARC 确实依赖于命名约定才能正常工作。然而...

如果您只使用 ObjC 对象，那么只要您*只有*ARC 代码，它通常会“解决”。例如，如果您有如下方法：

```
- (id)something {
  return [[Something alloc] init];
} 
```

这是错误的（在非 ARC 代码中），但 ARC 会通过有效添加额外的`autorelease`. 其实上面是*正确*的ARC代码，所以没问题。

如果这几乎是所有 ObjC 代码，我的建议是自动转换为 ARC，然后运行静态分析器。如果它是相当简单的代码恰好有错误的命名，那么问题实际上可能比你担心的要小得多。

如果这是大量 Core Foundation 免费桥接代码，事情会稍微复杂一些。然后我建议先运行静态分析器并在转换之前正确命名。幸运的是，命名约定是静态分析器非常擅长的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:20:56.677

我不得不将几个项目转换为 ARC，到目前为止，由于命名约定，我从未直接遇到任何问题。

实际上转换是非常直接的 - 所以虽然我完全理解你对你必须处理的代码的心态 - 我真的不会太担心。

到目前为止，只要要转换的代码首先是正确的并且以某种方式清晰易懂，我在转换过程中从未遇到任何严重困难的情况。

事实上，我发现使用 ARC 与任何其他内置 GC 的语言一样没有问题——当然涉及内存问题！

在最坏的情况下，您可能总是运行静态分析器——但现在 ARC 很少需要这样做。

这里可能讨论了最关键的情况：[Objective-C 中的自动引用计数不能防止或最小化什么样的泄漏？](https://stackoverflow.com/questions/6260256/what-kind-of-leaks-does-automatic-reference-counting-in-objective-c-not-prevent)

# android - 从 Android 缓存安装 .APK

> ID：12571207
> 
> 赞同：0
> 
> 时间：2012-09-24T19:04:24.583
> 
> 标签：android, caching, save, apk, internal

我在安装保存在 Android 内部缓存中的 APK 时遇到问题。**使用context.getExternalCacheDir()**将文件保存在外部存储或外部缓存中没有问题。

但是如果我尝试使用**context.getCacheDir()**，日志会返回

***/data/data/com.my.package/cache/update.apk：打开失败：EACCES（权限被拒绝）***

```
 File file = context.getCacheDir();

                File outputFile = new File(file, "update.apk");
                if(outputFile.exists()){
                    outputFile.delete();
                }

                FileOutputStream fos = new FileOutputStream(outputFile);

                InputStream is = c.getInputStream();

                byte[] buffer = new byte[1024];
                int len1 = 0;
                while ((len1 = is.read(buffer)) != -1) {
                    fos.write(buffer, 0, len1);
                }
                fos.close();
                is.close();

                Intent intent = new Intent(Intent.ACTION_VIEW);

                //SAVE IN CACHE
                intent.setDataAndType(Uri.fromFile(outputFile), "application/vnd.android.package-archive");

                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // without this flag android returned a intent error!
                context.startActivity(intent); 
```

看起来内部缓存不允许正确读取 APK。

事实是，如果文件保存在外部存储或外部缓存中，APK 将可供用户使用，我不希望这样。

将文件保存在内部缓存中可以做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:09:13.200

> 看起来内部缓存不允许正确读取 APK。

那是因为安装程序应用程序无权读取您的文件。

> 事实是，如果文件保存在外部存储或外部缓存中，APK 将可供用户使用，我不希望这样。

然后不要将其安装在用户的设备上。任何用户都可以在安装后随时从他们的设备上复制任何 APK，因此阻止用户访问 APK 的唯一方法是一开始就将其放在设备上。

> 将文件保存在内部缓存中可以做什么？

大概什么都没有。如果您切换到`openFileOutput()`，您可以查看是否`MODE_WORLD_READABLE`足以让安装程序继续进行。同样，这不会阻止用户访问 APK 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:07:40.917

尝试查看 chmod 命令以获取内部文件夹的读\写权限...至于 linux 它看起来像...

```
 chmod 777 /data/data/*** or chmod 644 /data/data/*** 
```

# linux - SMP linux中的互斥锁所有者

> ID：12571209
> 
> 赞同：0
> 
> 时间：2012-09-24T19:04:35.857
> 
> 标签：linux, linux-kernel, mutex, semantics, smp

在互斥锁的内核实现中，线程所有者字段仅在它是 SMP 构建时才存在。我可以理解，在良好且干净的代码下，只有在获取成功时，线程才会调用 release，因此我们可以通过不跟踪线程来节省一些缓存和 cpu 周期。但是为什么 SMP 需要它呢？是因为在 SMP 中，互斥体是混合的并且在线程所有者在另一个 cpu 上时旋转并且需要此字段作为参考，还是背后有更多原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:46:14.763

老实说，我现在不记得 linux 内核互斥锁的实现了，但我看到至少三个原因将互斥锁所有者直接存储在数据结构中：

1.  用于调试。从内核崩溃转储中很容易检测到所有者
2.  对于运行时断言。检测获取已获取的互斥锁的尝试变得非常容易。
3.  对于优先级继承协议或解决优先级反转问题的任何其他机制的实现：[http ://en.wikipedia.org/wiki/Priority_inversion](http://en.wikipedia.org/wiki/Priority_inversion)

# javascript - Javascript 命名空间仅适用于 var

> ID：12571210
> 
> 赞同：0
> 
> 时间：2012-09-24T19:04:42.757
> 
> 标签：javascript, variables, namespaces, scope, var

我有以下代码：

```
(function(){
...
var n = n || {};
...
})(); 
```

这就是我想要的，设置 n 等于 {} 因为这是第一次遇到它并且将是未定义的。不幸的是，由于 this 在函数内部，`n`因此仅限于该函数的范围，我不能在其他脚本中使用它。

我只想将行更改为`n = n || {}`，但出现错误： `ReferenceError: n is not defined`

将其更改`n = {}`为按预期工作；然而，这不是我想要的。`n`当我不使用`var`和按预期工作（作为用于获取 OR 语句右侧的虚假值）时，我不明白为什么' 的不确定性会导致错误。根据我对`var`关键字的理解，我希望它是两者或两者都不是。

为什么会这样`var`，这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:15:24.337

所以听起来你在创建全局变量时遇到了麻烦。

好的。

在 JavaScript 中创建全局变量比它应该的要容易。

你的问题是`n`没有定义（duh）。您不能引用尚未定义的变量。但你可能在想，“这与使用`var`??? 的版本有什么不同” 这是一个很好的问题。

JavaScript 做了一种叫做“提升”变量定义的事情。如果您在函数中定义变量，则该定义会隐式重定位到函数的顶部。所以当你写的时候：

```
var n = n || {}; 
```

真正发生的事情更接近于：

```
var n;
n = n || {}; 
```

然而，这并不是那么简单，因为如果您尝试编写该代码，您最终会`n`始终设置为`{}`. 但是一般的本质是存在的。变量声明发生在赋值之前。

如果您删除`var`，它将导致引用错误，因为不再有要提升的声明。因此，一种“适当的”（我松散地使用该术语，因为创建全局变量从来都不是“适当的”）做你想做的事情的方法是将你的`var`并将它放在你的函数包装器之外。像这样：

```
var n = n || {};
(function () {
    //do stuff.
}()); 
```

不幸的是，你不能这样做：

```
var n; 
(function () {
    n = n || {};
}()); 
```

这与我上面的示例具有相同的“问题”。如果`n`在别处定义，它将被设置为`undefined`，`var n;`然后`{}`在函数中设置为。通过在函数之外进行整个声明和赋值，您将获得所需的内容。我假设（根据您的问题的标题）实际上是命名空间，而不是一些任意的全局变量。那会很淘气！;-)

**更新：**

哦，顺便说一句，更好的方法可能是显式引用全局对象：

```
(function (exports) {
    exports.n = exports.n || {};
}(this)); 
```

这可能会与 node.js 之类的东西和任何可能包装你的代码的东西（比如 a `$(function() { })`）一起玩得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:09:55.723

您已经遇到了未定义变量和具有未定义值的已定义变量之间的区别。

引用未定义的变量将导致异常 ( `ReferenceError: n is not defined`)

引用具有未定义值的已定义变量很好，并且将`false`在条件中强制转换。

为避免这种情况，您可以将`n`其作为对象的属性进行引用`window`，因为属性永远不能未定义，只能具有未定义的值。

```
(function(){
...
window.n = window.n || {};
...
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:09:52.437

`n`尚未声明，因此检查是否`n`为 true-like 将不起作用。您可以显式检查以查看是否`n`已声明：

```
n = typeof n !== 'undefined' ? n : {}; 
```

但这不是很好看。要将某些东西放在全局范围内，请`window.n`在函数之外使用`n`或声明：`n`

```
var n;

(function(){
...
n = n || {};
...
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:11:09.023

1）小的改变将有助于：

```
(function() {
    var n = window.n = window.n || {};
    // Code of your module...
    n.hello = function() {
        alert('Hello');
    };
})();

n.hello(); 
```

**[​演示](http://jsfiddle.net/f0t0n/5ReWm/)**

通过这种方式，您拥有`n`全局可见的和对`n`函数内部同一对象的本地引用。

2）我也建议你用下一种方式重新设计它。

使每个模块像：

```
var MyApplication = (function(app) {

    // Code of the module here...

    app.hello = function() {
        console.log('Hello!');
    };

    return app;
})(MyApplication || {});

MyApplication.hello(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:23:04.507

1) 在第一轮评估中，`var n = n || {};`您正在创建变量：

```
var n = undefined; 
```

2）在第二轮评估中，您正在有条件地设置值：

```
n = undefined || {}; 
```

3) 如果没有 var 语句，您将得到一个根本不存在的 var 被引用

```
var myVar = non_existant_var; // error 
```

如果 var 已经存在，比如说，在全局范围内，或者当前函数嵌套在其中的任何其他函数，它将使用`n`它找到的任何东西，在链上的路上。如果不存在，它将适合。

因此，与其故意在代码中戳洞，不如让代码知道您要访问的范围，为什么不直接访问它呢？

```
(function (name) {
    window[name] = window[name] || {}; // returns undefined and not reference error
    var ns = window[name];

    ns.init = function () {};
    // .............
    /* Don't return the application to a var -- it already exists in the global scope */
}("BigLongApplicationName"));

BigLongApplicationName.init(); // === window.BigLongApplicationName.init(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T19:09:29.100

`var`创建局部变量而不使用它会污染全局命名空间。浏览器应该防止这种情况发生，因为大多数情况下您不想创建全局变量。

你可以做的是使用`window`对象：

```
window.n = window.n || {} 
```

但这仅适用于浏览器环境。如果不是这种情况（例如，您使用的是服务器端 JavaScript），则以这种方式检索全局对象：

```
var global = (function getGlobal(){
    return (function(){
        return this;
    }).call(null);
}()); 
```

接着：

```
global.n = global.n || {}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T19:07:46.507

使用严格模式，您需要显式使用全局命名空间，通常是`window`; 更改要使用的行`window.n`应该可以满足您的需求：

```
window.n = window.n || {}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-24T19:07:55.163

您可以`var n;`在代码之前添加，您将拥有全局`n`. `var`很重要，因为它使`n`函数本地化。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-24T19:06:46.787

在函数结束时执行：

```
window.n = n; 
```

这会将 n 放在全局命名空间中，允许您在其他脚本中使用它。

# excel - 包含 Visual Basic 代码的两个 Excel 文件的代码比较

> ID：12571212
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:04:50.833
> 
> 标签：excel, vba, compare

您是否知道有一种工具可以让您对两个 excel 文件（file1.xlsm 与 file2.xlsm）进行代码比较，以查看 Visual Basic 代码中的代码差异？

我知道有一个工具叫做 Beyond Compare。这使您可以比较两个 excel 文件中工作表的内容，但我找不到可以比较 Visual Basic 代码内容的工具。

谢谢尼奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:18:38.937

好的，我想通了。Beyond Compare 实际上有可下载的插件让您比较两个 excel 文件之间的 VBA。:)

[http://www.scootersoftware.com/support.php?zz=kb_moreformats_alt](http://www.scootersoftware.com/support.php?zz=kb_moreformats_alt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:52:59.880

如果您手边没有 Beyond Compare 的副本，请尝试使用 VbaDiff。我构建它的目的是为了比较您描述的 VBA 代码。

www.technicana.com/products/vbadiff.html

# xml - 如何输出指定命名空间中的属性

> ID：12571213
> 
> 赞同：0
> 
> 时间：2012-09-24T19:04:52.107
> 
> 标签：xml, xslt, xml-namespaces

为什么以下不能像我期望的那样工作？

```
<root xmlns:ns0="xmlns" 
      ns0:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xmlns:ns1="xsi" 
      ns1:schemaLocation="[some schema location]" /> 
```

基本上，我正在尝试通过执行以下操作将 schemaLocation 添加到没有此功能的 xml 文件中：-

```
<xsl:template match="/s:*">
  <xsl:element name="{local-name()}" namespace="some other namespace">
    <xsl:attribute namespace="xmlns" name="xsi">http://www.w3.org/2001/XMLSchema-instance</xsl:attribute>
    <xsl:attribute namespace="xsi" name="schemaLocation">[some-loc]</xsl-attribute>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
</xsl:template> 
```

Xalan-C 给出了上面显示的 xml。

我想要得到的是这样的： -

```
<root xmlns:ns0="http://www.w3.org/2001/XMLSchema-instance"
      ns0:schemaLocation="[some schema location]" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:23:16.227

你需要`<xsl:attribute name="xsi:schemaLocation">[some-loc]</xsl:attribute>`.

编辑（添加完整示例）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
   <xsl:template match="root">
      <xsl:element name="{local-name()}" namespace="some other namespace">
         <!--<xsl:attribute namespace="xmlns" name="xsi">http://www.w3.org/2001/XMLSchema-instance</xsl:attribute>-->
         <xsl:attribute name="xsi:schemaLocation">[some-loc]</xsl:attribute>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

根据您正在做什么，您可以使用`<xsl:copy>`复制元素而不是`<xsl:element name="{local-name()}"/>`; 它有点简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:23:50.900

当我解释您的问题并推断您真正想要的内容时，问题是您正在将一个值放入`namespace="..."`您打算成为命名空间*前缀*但[实际上应该是](http://www.w3.org/TR/xslt#creating-attributes)命名*空间 URI*的值。

因此，您可能想要的代码只是一个`<xsl:attribute>`元素：

```
<xsl:template match="/s:*">
  <xsl:element name="{local-name()}" namespace="some other namespace">
    <xsl:attribute namespace="http://www.w3.org/2001/XMLSchema-instance" 
        name="xsi:schemaLocation">[some-loc]</xsl-attribute>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
</xsl:template> 
```

然后 XSLT 处理器将`schemaLocation`在正确的名称空间中输出指定的属性，并且还会在需要时为其前缀发出名称空间声明（其前缀可以是`xsi:`，但不一定是）。

这里的部分问题是人们在不明确他们的意思的情况下（在精神上或对其他人）抛出“命名空间”这个词。命名空间不是命名空间前缀，也不是真正的命名空间 URI。命名空间由其 URI*全局标识，*并由其前缀*在本地标识。*

如果 XSLT 规范将这个属性命名为`namespace-uri="..."`而不是`namespace="..."`，那么就会有更少的人落入这个陷阱。您还可以通过询问说“命名空间”的人是否真的意味着“命名空间 URI”、“命名空间前缀”、“命名空间声明”等来保护自己。

# c++ - 从德州仪器 C200 DSP 中检索代码

> ID：12571214
> 
> 赞同：3
> 
> 时间：2012-09-24T19:04:54.853
> 
> 标签：c++, c, assembly, signal-processing, 32-bit

有谁知道如何从德州仪器 DSP 处理器中检索代码？我正在使用 TMS320LF2407 DSP，我需要访问芯片上的程序，很可能使用 JTAG 连接器。任何帮助，将不胜感激。我联系了TI，他们没有帮助。我发现 SPRA830 谈论使用 C 代码将程序代码块复制到内存，但没有任何相关文件可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:14:05.137

如果您有权访问 jtag，那么您应该能够使用 TI 的 Code Composer Studio 连接到它。这也假设您有一个相当昂贵的受支持的 JTAG 仿真器盒。我认为最大的问题是找出用于代码与 RAM 的内存地址。你能提供更多关于你想要做什么的细节吗？这是一些特定的硬件还是评估板？

# mysql - connection.select_value 仅使用 pg gem 在 postgres 中返回字符串

> ID：12571215
> 
> 赞同：9
> 
> 时间：2012-09-24T19:04:56.843
> 
> 标签：mysql, ruby-on-rails-3, postgresql, activerecord, pg

我正在将一个 Rails 应用程序从使用 mysql (mysql2 gem) 转换为 postgres (pg gem)。

使用 mysql，`ActiveRecord::Base.connection.select_value`调用返回根据数据键入的值，例如：

```
> ActiveRecord::Base.connection.select_value("SELECT COUNT(*) FROM errors")
=> 86
> ActiveRecord::Base.connection.select_value("SELECT exception FROM errors where id=565")
=> "TechTalk.Genome.SqlExecutionException"
> ActiveRecord::Base.connection.select_value("SELECT id FROM errors where id=565")
=> 565 
```

但是，使用 postgres，`connection.select_value`总是返回一个字符串：

```
> ActiveRecord::Base.connection.select_value("SELECT COUNT(*) FROM errors")
=> "1"
> ActiveRecord::Base.connection.select_value("SELECT id FROM errors")
=> "1"
> ActiveRecord::Base.connection.select_value("SELECT source FROM errors limit 1")
=> "webapp" 
```

这破坏了一些单元测试，虽然这些是可以修复的，但我确信我们还有其他代码依赖于这些返回值。**有没有办法在使用 postgres 时****获得正确类型的返回值？`connection.select_value`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:39:11.537

最简洁的答案是不。'pg' 驱动程序有意在本机 'libpq' 驱动程序之上提供尽可能薄的层。它不进行类型转换，因为这是对使用结果的领域有一定了解的高级库的职责。这个决定的理由记录[在 PostgreSQL Wiki 上](http://wiki.postgresql.org/wiki/Driver_development#Type_Conversions)，我很乐意[在邮件列表中](https://groups.google.com/forum/#!forum/ruby-pg)与您进一步讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T08:18:21.743

对于那些在这里寻找 activerecord 属性（Rails）特定答案的人：我已经做了一些测试（[https://gist.github.com/gamov/8fe38733012931eb3360](https://gist.github.com/gamov/8fe38733012931eb3360)）并发现：

```
RequestedItem.where(id: 1).select(*, 10 AS tq).first.tq.class 
```

返回 Rails < 4 的 String 和 Rails >= 4 的 Fixnum。

Postgres 适配器会将类型从 DB 转发到 Persistence 模块，因此可以透明地进行转换。

# c# - LPR 过程中未处理的 C# 异常

> ID：12571216
> 
> 赞同：1
> 
> 时间：2012-09-24T19:05:04.393
> 
> 标签：c#, vb.net, process, unhandled-exception, lpr

我正在创建一个应该使用 lpr.exe 并向其传递参数的 C# 应用程序。我目前正在尝试这样做：

```
DirectoryInfo filePathDirectory = new DirectoryInfo(filePath);              
Process a = new Process();
a.StartInfo.FileName = @"C:\Windows\System32\lpr.exe";
a.StartInfo.Arguments = "-SServerName.Domain.net -Plp " + "\"" + filePathDirectory + "\"";
a.StartInfo.UseShellExecute = false;
a.Start();
a.WaitForExit(); 
```

但是每当我到达时，`a.Start();`我都会得到一个未处理的 Win32 异常，它指出“系统找不到指定的文件”。这真的让我很困惑，因为起初我以为这是我的论点，但事实证明，我可以从 VB 应用程序传递完全相同的论点并让它工作。

**更新1：**

有效的VB代码是：

```
Dim RPname As String
RPname = FileName.ToString
Dim a As New Process
a.StartInfo.FileName = "C:\Windows\system32\lpr.exe"
a.StartInfo.Arguments = "-SServerName.Domain.net -Plp " & Chr(34) & RPname & Chr(34)
a.StartInfo.UseShellExecute = False
a.Start()
a.WaitForExit() 
```

更重要的是，我的问题似乎与参数声明无关，因为我可以将其注释掉，但我仍然收到错误。

**更新 2：**

我在进程开始时得到的错误是：*系统找不到指定的文件。*如果我将文件名更改为“C:\Windows\System32\cmd.exe”，我不会收到错误消息，它工作正常...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:05:28.117

您在 c# 代码中使用**[DirectoryInfo](http://msdn.microsoft.com/de-de/library/system.io.directoryinfo.aspx)**对象并将其连接起来。尝试将您的代码更改为：

```
try
{
  DirectoryInfo filePathDirectory = new DirectoryInfo(filePath);              
  Process a = new Process();
  a.StartInfo.FileName = @"C:\Windows\syswow64\lpr.exe";  // ADAPTED to the new path!! worked!
  // use filePathDirectory.FullName!!
  a.StartInfo.Arguments = "-SServerName.Domain.net -Plp " + "\"" + filePathDirectory.FullName + "\"";
  // or change it to - found it more readable imo
  a.StartInfo.Arguments = string.Format(
                               "-SServerName.Domain.net -Plp \"{0}\"", 
                               filePathDirectory.FullName);
  a.StartInfo.UseShellExecute = false;
  a.Start();
  a.WaitForExit();
} 
catch (Exception ex)
{
  Debug.WriteLine(ex.Message);
} 
```

**编辑**

找到解决您问题的方法！[**根据他给出的答案**](https://stackoverflow.com/questions/10543052/lpr-command-not-working-from-my-c-sharp-program-in-win-7)，第一学分归@Sundeep 。他将我指向一个[**网站**](http://www.tomshardware.co.uk/forum/240019-34-error-windows)，表明

> 是的，我有，但是在**从****32**位应用程序。

 **此外

> ...试图让一个 32 位程序在 Windows 2008 R2 中启动 lpr.exe。**它失败是因为 lpr.exe 在操作系统的 32 位视图中不存在。**...
> 
> 作为解决方法，我**将 lpr*.* 从 32 位 O/S system32 文件夹复制到**2008 R2 机器上的 SYSWOW64 中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T19:03:28.220

将您的代码更改为：

```
DirectoryInfo filePathDirectory = new DirectoryInfo(filePath);              
Process a = new Process();
a.StartInfo.FileName = @"C:\Windows\Sysnative\lpr.exe";
a.StartInfo.Arguments = "-SServerName.Domain.net -Plp " + "\"" + filePathDirectory + "\"";
a.StartInfo.UseShellExecute = false;
a.Start();
a.WaitForExit(); 
```

Pilgerstorfer Franz 的解释是完全正确的，但尤其是在像我这样的环境中，在每台机器上移动和移动 lpr.exe 的位置需要做很多工作。简单的解决方案是使用 sysnative 目录。

[http://www.samlogic.net/articles/sysnative-folder-64-bit-windows.htm](http://www.samlogic.net/articles/sysnative-folder-64-bit-windows.htm)

> “Sysnative”文件夹在 Windows 资源管理器中不可见 如果您启动 Windows 资源管理器并打开硬盘上的 Windows 文件夹，您可能会注意到 Sysnative 文件夹未显示。主要原因是 Windows 资源管理器是一个 64 位程序（在 64 位 Windows 中运行时），而 Sysnative 文件夹只能从 32 位软件中看到和访问。如果 64 位软件需要访问 Windows 中的 64 位系统文件夹，唯一的选择是使用 System32 文件夹名称（例如：C:\Windows\System32）。
> 
> 使用“Sysnative”文件夹将帮助您从 32 位代码访问 64 位工具 64 位 Windows 中的某些工具仅存在于 64 位版本中；没有可用的 32 位版本。其中一些工具位于 64 位 System32 文件夹中。一个示例是用于帮助解决 NetBIOS 名称解析问题的 nbtstat 工具。如果您尝试从 32 位代码（例如从应用程序或脚本）运行 nbtstat 工具并使用 C:\Windows\System32 之类的路径，您将收到“找不到文件”错误。找不到文件；尽管 Windows 资源管理器显示 nbtstat 程序文件实际上位于 C:\Windows\System32 文件夹中。
> 这个（有点令人困惑）问题的解决方案是在您想要运行该工具时在文件夹路径中包含虚拟 Sysnative 文件夹。例如像这样： C:\Windows\Sysnative\nbtstat.exe 上面的文件路径将使您能够从 32 位应用程序或 32 位脚本访问 64 位 nbtstat 工具。我们建议您阅读这篇文章/博客文章（在 Scottie 的 Tech.Info 上）以获取有关此内容的更多详细信息。**

# python - Python：Amazon S3 无法获取存储桶：说 403 Forbidden

> ID：12571217
> 
> 赞同：15
> 
> 时间：2012-09-24T19:05:12.153
> 
> 标签：python, amazon-s3, boto

我在 Amazon S3 中有一个用于我的组织的存储桶，看起来像`mydev.orgname`

*   我有一个 Java 应用程序，它可以使用凭证连接到 Amazon S3，并且可以连接到 S3、创建、读取文件

*   我有一个要求，应用程序从同一个存储桶中的 Python 读取数据。所以我为此使用[boto 。](https://github.com/boto/boto/)

我执行以下操作以获取存储桶

```
>>> import boto
>>> from boto.s3.connection import S3Connection
>>> from boto.s3.key import Key
>>> 
>>> conn = S3Connection('xxxxxxxxxxx', 'yyyyyyyyyyyyyyyyyyyyyy')
>>> conn
S3Connection:s3.amazonaws.com 
```

现在，当我尝试获取存储桶时，我看到了错误

```
>>> b = conn.get_bucket('mydev.myorg')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/boto/s3/connection.py", line 389, in get_bucket
    bucket.get_all_keys(headers, maxkeys=0)
  File "/Library/Python/2.7/site-packages/boto/s3/bucket.py", line 367, in get_all_keys
    '', headers, **params)
  File "/Library/Python/2.7/site-packages/boto/s3/bucket.py", line 334, in _get_all
    response.status, response.reason, body)
boto.exception.S3ResponseError: S3ResponseError: 403 Forbidden
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>AccessDenied</Code><Message>Access Denied</Message><RequestId>EEC05E43AF3E00F3</RequestId><HostId>v7HHmhJaLLQJZYkZ7sL4nqvJDS9yfrhfKQCgh4i8Tx+QsxKaub50OPiYrh3JjQbJ</HostId></Error> 
```

但从 Java 应用程序来看，一切似乎都正常。

我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-23T22:34:52.367

给用户一个“更强的角色”并不是正确的解决方案。这只是`boto`库使用的问题。显然，使用 Java S3 库时不需要额外的权限。

在这种情况下使用 boto 的正确方法是：

```
b = conn.get_bucket('my-bucket', validate=False)
k = b.get_key('my/cool/object.txt') # will send HEAD request to S3
... 
```

基本上，`boto`默认情况下（恕我直言，这是他们的一个错误），假设您想要与 S3 存储桶进行交互。诚然，有时您确实希望这样做，但是您应该使用具有 S3 存储桶操作权限的凭证。但更流行的用例是与 S3 对象交互，在这种情况下，您不需要任何特殊的存储桶级权限，因此使用了`validate=False`kwarg。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-23T02:49:32.487

[这个答案](https://stackoverflow.com/questions/26594944/getting-boto-exception-s3responseerror-s3responseerror-403-forbidden-when-uplo/27984752#27984752)对我有用:)

我做了

*   S3 存储桶策略设置
*   时间设定
*   bucket = conn.get_bucket(BUCKET_NAME, validate=False)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:46:17.503

在赋予我的“用户”更强大的角色之后，这个错误就消失了。表示用户授予 get_bucket 的权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T15:10:55.543

# 使用 Python 从 Amazon S3 存储桶中读取文件

```
import boto3
import csv

# get a handle on s3
session = boto3.Session(
                aws_access_key_id='XXXXXXXXXXXXXXXXXXXXXXX',
                aws_secret_access_key='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
                region_name='XXXXXXXXXX')

s3 = session.resource('s3')

# get a handle on the bucket that holds your file
bucket = s3.Bucket('bucket name') # example: energy_market_procesing

# get a handle on the object you want (i.e. your file)
obj = bucket.Object(key='file to read') # example: market/zone1/data.csv

# get the object
response = obj.get()

# read the contents of the file
lines = response['Body'].read()

# saving the file data in a new file test.csv
with open('test.csv', 'wb') as file:
    file.write(lines) 
```

# java - 如何在不提交的情况下在同一个 JSP 中获取文本框值？

> ID：12571218
> 
> 赞同：0
> 
> 时间：2012-09-24T19:05:19.583
> 
> 标签：java, javascript, jsp

实际上我想使用文本框值并在同一个 JSP 页面中设置会话参数而不提交它或喜欢使用请求或响应对象。我想在同一个 JSP 页面中使用此文本框值以供进一步使用。如何访问同一页面中文本框的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:10:42.200

您可以使用新的[HTML5 本地存储](http://diveintohtml5.info/storage.html)（仅在更新/现代浏览器中[支持），或者您可以](http://caniuse.com/namevalue-storage)[在 JavaScript 中创建会话 cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)并将值存储在其中。

请注意，这些方法都不会`HttpSession`以任何方式影响服务器端。为此，您根本无法发送包含所需信息的 HTTP 请求，因为这是将信息从客户端发送到服务器端的唯一方法。但是，您可以考虑使用 ajax 在后台异步且完全透明地发送 HTTP 请求。

# java - System.in.read 方法在读取长度大于目标长度时不会抛出 ArrayIndexOutOfBoundsException

> ID：12571219
> 
> 赞同：0
> 
> 时间：2012-09-24T19:05:21.530
> 
> 标签：java, exception

我正在阅读[Java™ I/O, 2nd Edition](http://shop.oreilly.com/product/9780596527501.do)这本书，其中有以下代码：

```
try {
  byte[] b = new byte[10];
  System.in.read(b);
}
catch (IOException ex) {
  System.err.println("Couldn't read from System.in!");
} 
```

引用书中的一段话：

> “..没有什么可以阻止您尝试将更多数据读入数组中。如果您这样做，read() 将引发 ArrayIndexOutOfBoundsException..”

但是当我运行这段代码并输入超过 10 个字符时，没有`ArrayIndexOutOfBoundsException`抛出；为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T19:08:28.260

检查文档[`InputStream.read`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5b%5d%29)：

> 读取的字节数最多等于 b 的长度

因此`read`调用遵守数组的长度，并将实际读取的字节数限制为该长度。当您输入超过 10 个字符时，这些额外的字符将保留在输入流中。做另一个`read`，你会看到他们。

您*可以*导致`IndexOutOfBoundsException`using [`InputStream.read(array, offset, length)`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5b%5d,%20int,%20int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:18:36.663

你的书是错误的，它也表达得很糟糕。以下两种说法相互矛盾：

> “..没有什么可以阻止您尝试将更多数据读入数组中。如果您这样做，read() 将引发 ArrayIndexOutOfBoundsException。”

我不知道为什么 Elliotte Rusty Harold 认为例外是“没有什么能阻止你”。它确实阻止了你，这就是它的目的。

事实是，`InputStream.read()`它将读取至少 1 个和最多`b.length`字节，除非它检测到 EOS 并返回 -1。

如果您使用重载，如果“off[set] 为负数、len[gth] 为负数或 len[gth] 大于 b[uffer].length - off[set]” `read(byte[] buffer, int offset, int length)`，它将抛出异常。`IndexOutOfBoundsException`

# c# - 通过 for 循环查找和替换动态值

> ID：12571224
> 
> 赞同：-5
> 
> 时间：2012-09-24T19:05:42.310
> 
> 标签：c#, asp.net, .net, winforms

`http://www.test.com/test.aspx?testinfo=&|&`

我正在尝试用表中的值替换 & 。我将姓名和年龄作为两个参数，我需要替换并获取如下网址：

`http://www.test.com/test.aspx?testinfo=name|age`

如果我有 3 个字符串参数要替换为 url：

`http://www.test.com/test.aspx?testinfo=&|&`

即上述网址的姓名、年龄、地址：

`http://www.test.com/test.aspx?testinfo=name|age|address`

```
string URL=string.Empty;
URL=http://www.test.com/test.aspx?testinfo=&|&;
//in this case fieldsCount is 2, ie. name and age
for(int i=0; i<fieldsCount.Length-1;i++)
{
      URL.Replace("*","name");
} 
```

如何添加“年龄”以便获得？任何输入都会有所帮助。

`http://www.test.com/test.aspx?testinfo=name|age`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:24:02.840

我想这就是你想要的

```
 List<string> keys = new List<string>() { "name", "age", "param3" };
    string url = "http://www.test.com/test.aspx?testinfo=&|&;";
    Regex reg = new Regex("&");
    int count = url.Count(p => p == '&');

    for (int i = 0; i < count; i++)
    {
        if (i >= keys.Count)
            break;
        url = reg.Replace(url, keys[i], 1);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:18:51.387

我对两件事感到好奇。

*   `&`当它在查询字符串中作为键/值对之间的分隔符具有上下文含义时，为什么要使用它来替换？
*   为什么你的字符串只有 2 个字段 ( `&|&`)，而有时要替换它的值有超过 2 个键？

如果这些事情无关紧要，对我来说，有一个其他东西的替换字符串会更有意义......例如`http://www.test.com/test.aspx?testinfo=[testinfo]`。当然，您需要选择在您的 Url 中出现的可能性为 0 的东西，而不是您期望的位置。然后，您可以将其替换为以下内容：

```
url = url.Replace("[testinfo]", string.Join("|", fieldsCount)); 
```

请注意，这不需要您的 for 循环，并且应该会产生您预期的 url。请参阅msdn 上的[string.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)。

> 在每个元素之间使用指定的分隔符连接字符串数组的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:37:16.293

如果我理解正确，我认为你需要这样的东西：

```
private static string SubstituteAmpersands(string url, string[] substitutes)
{
    StringBuilder result = new StringBuilder();
    int substitutesIndex = 0;

    foreach (char c in url)
    {
        if (c == '&' && substitutesIndex < substitutes.Length)
            result.Append(substitutes[substitutesIndex++]);
        else
            result.Append(c);
    }

    return result.ToString();
} 
```

# validation - 如何在上传前验证上传文件的文件大小？

> ID：12571226
> 
> 赞同：0
> 
> 时间：2012-09-24T19:05:52.910
> 
> 标签：validation, filesize

所以我需要一种方法来验证正在上传的多个文件的总和。我知道这需要在客户端完成，但我不确定如何实现它。这是我有趣的表格：

```
 <form action="upload.php" method="POST"  enctype="multipart/form-data" >
        <input type="file" name="image[]"  multiple="multiple">
        <input type="submit" value="upload">
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:27:46.687

您可以在 HTML5 中执行此操作，例如：

```
var file = document.getElementById('fileToUpload').files[0];
// now you can get the size via: 
var fileSize = file.size; 
```

# drupal - Drupal 7视图如何修改where子句？

> ID：12571227
> 
> 赞同：0
> 
> 时间：2012-09-24T19:06:00.030
> 
> 标签：drupal, views, glossary

我有一种情况，我必须在词汇表视图的上下文过滤器中添加一个 0-9 链接

如何更改 where 子句部分？我需要改变

```
SUBSTRING(node.title, 1, :node_title) = :node_title1 
```

至

```
SUBSTRING(node.title, 1, 1) =REGEXP ('[0-9]') 
```

如果某个值 == '0-9' 我试图实现 hook_views_query_alter 但它不起作用

```
function  custom_views_query_alter(&$view, &$query){

  $current_view=&$view;

  switch($current_view->name){

    case  'glossary':

  if($query->where[0]['conditions'][0]['value'][':node_title1']=='0-9'){
    $query->where[0]['conditions'][0]['field']= "SUBSTRING(node.title, 1, 1) =REGEXP ('[0-9]')";
    echo "YES";

    dpm($query->where);
        }  } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:40:43.417

我设法让它工作这里的代码

```
function  custom_views_query_alter(&$view, &$query){

$current_view=&$view;
switch($current_view->name){

case  'glossary':
  if($query->where){

  if($query->where[0]['conditions'][0]['value'][':node_title1']=="0-9"){
       $query->where[0]['conditions'][0]['field'] = "SUBSTRING(node.title, 1, 1) REGEXP ('[0-9]')";
    dpm($query->where);
 }

}
}
} 
```

# excel - Excel VBA 用户窗体 w/modal = false 呈现缓慢

> ID：12571228
> 
> 赞同：1
> 
> 时间：2012-09-24T19:06:01.527
> 
> 标签：excel, vba

关于如何避免渲染此表单的长时间延迟有什么建议吗？

我有一个带有“请稍候，正在下载”标签的用户表单，没有其他控件。当用户请求数据下载（异步 API 请求）时，我关闭键盘输入，并显示“请稍候”表单。处理数据的回调重新启用键盘输入并隐藏表单。奇迹般有效。

**除了**它最初会弹出一个空白的白色矩形，然后需要几秒钟（多达 5 秒钟）来绘制。我的其他用户表单（模式，用于数据输入）立即绘制我什至从未注意到它们开始时是白色的。

这是我在发出异步数据请求之前显示表单的方式：

```
' Deactivate the keyboard.
Application.OnKey "^d", "KeyboardOn"
Application.DataEntryMode = True

' Display the splash form non-modally.
ssiWaitDialog.TaskDone = False
ssiWaitDialog.Show False 
```

以下是它在回调中的删除方式：

```
' Close the splash form.
ssiWaitDialog.TaskDone = True
ssiWaitDialog.Hide

' Re-activate the keyboard.
Application.DataEntryMode = False 
```

这是表单代码：

```
' Set true when the long task is done.
Public TaskDone As Boolean

Private Sub UserForm_QueryClose(Cancel As Integer, CloseMode As Integer)
    Cancel = Not TaskDone
End Sub 
```

问题表单的属性值仅与我的其他表单 modal=false 显着不同，并且我已将光标设置为沙漏。不太显着的差异是高度/宽度和标签字体大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:27:15.667

在 show 方法调用后添加“DoEvents”解决了问题。以下是显示表单代码现在的读取方式：

```
' Deactivate the keyboard.
Application.OnKey "^d", "KeyboardOn"
Application.DataEntryMode = True

' Display the splash form non-modally.
ssiWaitDialog.TaskDone = False
ssiWaitDialog.Show False
DoEvents 
```

# .net - 如何在 .NET 中重置文件夹权限？

> ID：12571231
> 
> 赞同：1
> 
> 时间：2012-09-24T19:06:30.807
> 
> 标签：.net, folder-permissions

我有一个程序需要更改指定文件夹的权限。我必须首先做的是删除通过继承授予文件夹的任何权限（即删除所有实际权限）并为特定用户/组添加新权限。

我知道当我知道特定用户时，我可以轻松删除该用户的文件夹权限，但是有没有办法擦除所有权限以便我可以重新开始，或者我需要找到一种方法来查找所有现有权限和然后一一删除？

我需要做的更具体地说是创建一个没有继承权限的新文件夹并设置我自己的。

更具体地说，我想做的就像我创建了目录然后进入安全性，高级并删除了继承。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:58:51.697

不确定是否会做你需要的一切，但那些是 .NET 工具

[Directory.GetAccessControl](http://msdn.microsoft.com/en-us/library/system.io.directory.getaccesscontrol.aspx)

[Directory.SetAccessControl](http://msdn.microsoft.com/en-us/library/system.io.directory.setaccesscontrol.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:20:43.610

不严格在 .NET 中，但您可以像这样使用该`ICACLS`程序`Process.Start()`：

```
Process.Start("icacls MyDir /inheritance:r"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T02:43:22.463

所以我一直在做一些测试，我需要做的是从 DirectorySecurity 调用 SetAccessRuleProtection 方法并将其应用于我的 DirectoryInfo。

我试过了，它奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-24T15:15:03.853

我创建了一个做同样事情的程序

```
Private Sub AddPermisssion(ByVal directories As String)
    Dim AccountingPermFolder As String = directories
    Dim AccountingDI As IO.DirectoryInfo = New IO.DirectoryInfo(AccountingPermFolder) 
    Dim AccountingDS As DirectorySecurity = AccountingDI.GetAccessControl
    AccountingDS.SetAccessRuleProtection(True, False) //True Protect file and False remove Inheritance   
    IO.Directory.SetAccessControl(AccountingPermFolder, AccountingDS)

    AccountingDS.AddAccessRule(New FileSystemAccessRule(Admins, FileSystemRights.FullControl, AccessControlType.Allow))
    AccountingDS.AddAccessRule(New FileSystemAccessRule(AccountGroup, FileSystemRights.FullControl, AccessControlType.Allow))
    AccountingDS.AddAccessRule(New FileSystemAccessRule(SystemAdmin, FileSystemRights.FullControl, AccessControlType.Allow))
    AccountingDI.SetAccessControl(AccountingDS)

End Sub 
```

# oracle - 迄今为止在 Oracle 错误中的 Bigint

> ID：12571232
> 
> 赞同：0
> 
> 时间：2012-09-24T19:06:31.143
> 
> 标签：oracle, oracle11g, bigint

> **可能重复：**
> [将 Unixtime 转换为 Datetime SQL (Oracle)](https://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle)

我们有一个 bigint 类型的表。我尝试运行以下查询：

```
select TO_CHAR(TO_TIMESTAMP(t.bigint_field / 1000), 'DD/MM/YYYY HH24:MI:SS') 
   from table t 
```

并得到这个错误

```
ORA-00932: inconsistent datatypes: expected - got NUMBER 
```

我已经看过[这个问题](https://stackoverflow.com/questions/5485502/how-can-i-format-bigint-field-into-a-date)，但我仍然无法摆脱这个错误。这是我使用的一个值 - 1340809355000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:35:58.480

试试，从表 t 中选择 to_date('1970-01-01','yyyy-mm-dd') + t.bigint_field/24/60/60/1000

# java - 空套接字输入流

> ID：12571233
> 
> 赞同：3
> 
> 时间：2012-09-24T19:06:35.393
> 
> 标签：java, sockets, inputstream

我正在尝试在 Java 中构建一个简单的 Web 服务器作为练习，但我遇到了一个非常奇怪的问题。当我尝试从中读取时`InputStream`，`Socket`有时没有要读取的数据。我正在遵循的过程是这样的：

我创建一个`ServerSocket`，监听 80 端口，然后调用`accept()`获取一个`Socket`. 然后我从我的浏览器 (Firefox) 向 发送一个请求`localhost`，这会触发`accept()`返回`Socket`.

有时，它会完美地读取 HTTP 请求。其他时候，它无法读取任何数据（`read()`返回 -1）。

这是一些示例代码来说明我在做什么，没有任何异常处理：

```
ServerSocket serv = new ServerSocket(80);

while (true)
{
  Socket con = ServerSocket.accept();

  InputStream input = con.getInputStream();

  bytes[] bytes = new bytes[4000000]; // for simplicity, I figured I'd 
                                      // just make the array huge for now

  int bytesRead = input.read(bytes);
  if (bytesRead > 0)
  {
    StringBuffer sBuffer = new StringBuffer(bytesRead);

    for (int i = 0; i < bytesRead; i++)
    {
      sBuffer.append((char) bytes[i]);
    }

    System.out.println(sBuffer.toString());
  }
} 
```

**编辑**：我也试过使用 a`BufferedInputStream`并`BufferedReader`没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:21:40.013

从 InputStream 读取数据时，您应该*始终循环。*不能保证所有数据都将从一次`read()`调用中返回（循环直到您收到`-1`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:18:27.877

一个套接字可以接收更多的数据包。所以你应该为每个套接字创建一个新线程。就像是：

```
while(true){
    Socket socket = serv.accept();
    Client client = new Client(socket);
    new Thread(client).start();
} 
```

然后您需要创建实现可运行接口的客户端类。

```
Socket socket;
public Client(Socket socket){
    this.socket = socket;
}
public void run(){
    while(socket.isConnected()){
        //here reads the packets from the inputstream
    }
} 
```

# css - Bootstrap：混合按钮和输入框

> ID：12571234
> 
> 赞同：1
> 
> 时间：2012-09-24T19:06:39.340
> 
> 标签：css, twitter-bootstrap

请看[这个小提琴](http://jsfiddle.net/D2RLR/1876/)，我有一个按钮和三个输入框，我正在使用 Bootstrap。

```
<div class='container'>
    <div class='row'>
        <form class='span10'>
            <input type='text' placeholder='Label' id='new-row-label' class='span3'>
            <input type='text' placeholder='Orders' id='new-row-orders' class='span2'>
            <input type='text' placeholder='Items' id='new-row-items' class='span2'>
            <div class='btn span2' id='add-row'>Add new item</div>
        </form>
    </div>
</div>​ 
```

这里有两件事是错误的：

1.  按钮略低于输入框。
2.  该按钮位于*左侧*，在我的代码中，它出现*在*输入框之后。

我怎样才能有三个输入框和一个按钮，都在相同的高度对齐，按钮在右边？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:24:03.793

使用表单类制作内联表单：

```
`<form class="form-inline">
    <div class="row">
        <input type='text' placeholder='Label' id='new-row-label' class='span3'>
        <input type='text' placeholder='Orders' id='new-row-orders' class='span2'>
        <input type='text' placeholder='Items' id='new-row-items' class='span3'>
        <button type="button" class="btn" id='add-row'>Add new item</button>
    </div>
</form>`
```

`FORM 标签上的 class="span10" 也影响了布局。`

 `[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:14:55.333

如果你像这样添加`pull-right`类`btn`

```
<div class='btn pull-right span2' id='add-row'>Add new item</div> 
```

[它会像这个例子一样](http://jsfiddle.net/D2RLR/1877/)将按钮浮动在右侧，但对我来说似乎并不低。`

# java - 仅加入一种实现

> ID：12571235
> 
> 赞同：2
> 
> 时间：2012-09-24T19:06:40.353
> 
> 标签：java, hibernate, inheritance, jpa

我有这样的模型：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "resourceType", discriminatorType = DiscriminatorType.INTEGER)
public abstract class Resource {
    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    Long id;

    String foo;
}

@MappedSuperclass
public abstract class NetworkResource extends Resource { 
    String bar;
}

@Entity
@DiscriminatorValue(value = "1")
public class URL extends NetworkResource {
     String url;
} 
```

我将区分值放在所有更具体的实现中，因为我不想在大多数情况下加入所有扩展资源的表，我将仅加入 `networkresource`表，例如。

所以，我想知道我该怎么做。

我已经尝试过类似的东西：

```
SELECT c FROM URL c LEFT JOIN c.resource r where r.resourceType = 1 and r.url = :ip 
```

但是当我添加`r.resourceType = 1`.

那么，我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:44:16.187

基于对您正在尝试做的事情的一些假设，我认为您只是想要：

```
select c from URL c where c.url = :ip 
```

Hibernate 将负责添加连接和对鉴别器的限制。这几乎就是 Hibernate 的用途。

# microsoft-metro - Toast 通知参数 打开 Web 浏览器

> ID：12571236
> 
> 赞同：1
> 
> 时间：2012-09-24T19:06:44.837
> 
> 标签：microsoft-metro

我需要发送我的 toast 通知参数并打开一个网络浏览器。这是我的代码：

```
private void DoNotification()
    {
        var notifications = serviceClient.GetNotificationsAsync(App.CurrentRestaurantLocation.ID);
        foreach (RestaurantNotification note in notifications.Result)
        {
            IToastNotificationContent toastContent = null;
            IToastText02 templateContent = ToastContentFactory.CreateToastText02();
            templateContent.TextHeading.Text = note.Title;
            templateContent.TextBodyWrap.Text = note.Message;
            toastContent = templateContent;
            // Create a toast, then create a ToastNotifier object to show
            // the toast
            ToastNotification toast = toastContent.CreateNotification();

            toast.Activated += toast_Activated;
            // If you have other applications in your package, you can specify the AppId of
            // the app to create a ToastNotifier for that application
            ToastNotificationManager.CreateToastNotifier().Show(toast);
        }
    }

    async void toast_Activated(ToastNotification sender, object args)
    {
        await Launcher.LaunchUriAsync(new Uri("http://www.google.com"));
    } 
```

我的激活事件发生了，但是没有打开网络浏览器。该启动器代码在没有 toast 通知的情况下工作。

如何使用 url 填充 args？我的 Web 服务返回 note.RedirectUrl，我想在其中提供它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:26:12.227

不要在 上使用`Activated`事件处理程序，而是使用主应用程序类中`ToastNotification`的`OnLaunched`处理程序（它允许轻松访问启动上下文）。

对于要调用的处理程序，需要在 toast XML 中提供[启动参数。](http://msdn.microsoft.com/en-us/library/windows/desktop/br230846.aspx)使用上面的代码，您可以将参数添加到`IToastContent`对象，如下所示：

```
toastContent.Launch = note.RedirectUrl; 
```

然后在应用程序的`OnLaunched`方法中，应用程序可以检索启动参数：

```
protected override void OnLaunched(LaunchActivatedEventArgs args)
{
    if (!String.IsNullOrEmpty(args.Argument)) {
        var redirectUrl = args.Argument;
    }
} 
```

从 使用时，调用`LaunchUriAsync`应该按预期工作`OnLaunched`。

# ruby - 如何在 Ruby 中对整个数组列使用统计函数？

> ID：12571238
> 
> 赞同：0
> 
> 时间：2012-09-24T19:06:46.697
> 
> 标签：ruby, statistics

我是 Ruby 编程的新手，无法找到以下问题的答案。是否有一个命令可以计算整个数组列 arr[].friends 的标准偏差？

```
#!/usr/bin/ruby
require 'descriptive_statistics'
class MyList < Struct.new(:id, :name,:friends)
end
arr = Array.new
f = File.open("test-comma.txt", "r")
f.each_line { |line| words = line.split(',')
   p = MyList.new
   p.id=words[0]
   p.name=words[1]
   p.friends=words[2]
   arr.push(p)
   }
f.close 
```

我可以在 Internet 上找到的所有示例都提供一维数组（向量）。*并且使用注入*没有任何意义，因为 gem “descriptive_statistics”中有预先构建的统计函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:12:12.230

`descriptive_statistics`扩展`Enumerable`所以你可以这样做：

```
arr.collect{|p| p.friends}.standard_deviation 
```

这当然是假设 p.friends 是一个数字

# php - 如何上传 WinRAR 备份文件

> ID：12571241
> 
> 赞同：0
> 
> 时间：2012-09-24T19:06:59.080
> 
> 标签：php, backup

我在 WinRAR 文件中备份了我的网站，我想把它上传到我的新网站上......所以我在我的新网站面板上上传了那个 WinRAR 文件，但它没有用......实际上我正在移动我的网站到另一个主机，所以我下载了 WinRAR 文件中的备份并将其上传到新主机上，它成功上传但它不工作.. 它显示该主机的默认页面...检查这个[http://kownleg.comyr.com](http://kownleg.comyr.com)，我不知道这个错误是怎么回事，我是新手...请帮助任何建议，为什么会发生这种情况或我们如何上传 WinRAR 备份文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:28:20.437

使用与上载压缩文件相同的方法将单个文件上载到服务器。关键是如果您无法在服务器上解压缩压缩文件，请不要向服务器发送压缩文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:02:00.817

这应该可能与文件权限有关......大多数托管服务提供商出于安全原因而注意。

解压文件后检查文件权限。上传单个压缩文件（然后解压缩）和上传每个文件应该没有区别。

# objective-c - xCode 4.5 sqlite3_open objc_storeStrong 中的 EXC_BAD_ACCESS

> ID：12571245
> 
> 赞同：2
> 
> 时间：2012-09-24T19:07:19.933
> 
> 标签：objective-c, xcode

此代码片段来自 iPad 应用程序，该应用程序当前在应用程序商店中，并使用 ARC 编写。该代码使用 xCode 4.4.1 (4F1003) 开发并在 IOS Simulator 5.1 (272.21) 中正常运行。我最近安装了 xCode 4.5 和 IOS Simulator 6.0，当 sqlite3_open 返回到我的目标 C 代码时，我现在得到 EXC_BAD_ACCESS (code=2, address=0x200)。

```
sqlite3 *tempDatabase;

const char *sqlStatement = [s_DBEngineDBName UTF8String];
commandReturn = sqlite3_open(sqlStatement, &tempDatabase);  // open main db
if(commandReturn == SQLITE_OK) {
    // ...
} 
```

我以前使用以下命令打开数据库，但在新环境中也失败了。

```
commandReturn = sqlite3_open([s_DBEngineDBName cStringUsingEncoding:NSStringEncodingConversionAllowLossy], &tempDatabase);  // open main db 
```

正如我上面所说的那样，通过 SQLite 代码，在最终的 return 语句执行之前，它都按预期工作。我对为什么甚至涉及 objc_storeStrong 感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:55:03.867

我将问题追溯到包含文件中的前向声明：@class sqlite3; 这显然是错误的，因为 sqlite3 是一个结构。这导致 ARC 尝试引用计数，这就是引发异常的原因。

删除该行会导致编译错误，可以通过在 sqlite3 的使用前加上关键字“struct”来轻松解决。

感谢您的建议，因为他们让我更深入地挖掘并意识到编译器正在考虑将 sqlite3 视为一个类，而实际上它不是。

# c++ - 在头文件中声明一个静态类成员

> ID：12571246
> 
> 赞同：0
> 
> 时间：2012-09-24T19:07:20.150
> 
> 标签：c++, mfc

我正在开发一个 MFC 应用程序，我想创建一个全局字符串变量以在应用程序中的所有操作之间共享，我在头文件中创建了一个静态字符串变量，但是当我尝试在其中一个操作中访问它时出现此编译器错误：

```
error C3381: 'comp' : assembly access specifiers are only available in code compiled with a /clr option 
```

这是我的头文件，里面是类：

```
//Shared_Variable.h
class comp
{ 
comp() { } // private default constructor
public:
    static CString myValue;
}; 
```

我在我的一项操作中使用了它，如下所示：

```
void CCalculatorDlg::OnBnClickedButton1()
{
comp::myValue="1"; ----->accessing the static member of my class
LPCTSTR btn_title=_T("1");
SetDlgItemText(IDC_EDIT1,btn_title ); 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:46:47.350

乍一看有几种可能性；

*   您是否在操作代码文件中#include "Shared_Variable.h"？
*   comp 是否在命名空间中声明，您是否需要对其进行限定，或者在命名空间中添加 using 声明？
*   什么是 CString？我不认为这是 C++ 类型。
*   如果错误消息有效，则表明它正在尝试将“comp”解释为保留字。您是否启用了特定于 VC 的编译器扩展（或未能禁用与该关键字竞争的扩展）？或者，您是否忘记了类定义上方的分号或其他表达式终止符？

此外，在像这样的标头内的类中声明静态成员要求您有一个 .cpp 文件来定义该成员的单个实例。因此，您可以在标头中将其声明为：

```
static CString myValue; 
```

但您必须在 Shared_Variable.cpp 中执行此操作：

```
CString comp::myValue; 
```

没有这个，你已经定义了一个静态变量，但没有告诉 C++ 将它放在内存中的哪个位置。由于头文件作为（可能）多个 CPP 文件的依赖项被拉入，因此您始终必须确保将任何静态内容固定到一个 CPP 文件，这就是上述代码片段的内容。

制作简单静态变量的另一种方法是在头文件中声明：

```
extern CString myValue; 
```

并在相应的 CPP 文件中（任何 CPP 文件，实际上，从技术上讲，它甚至不必包含头文件，尽管这是个好主意）：

```
CString myValue; 
```

这些有帮助吗？

# java - 在对长 Scala 列表或 Stream 执行 reduce() 操作期间，Java JVM 关于 GC 的智能程度如何？

> ID：12571252
> 
> 赞同：1
> 
> 时间：2012-09-24T19:07:39.747
> 
> 标签：java, scala, stream, garbage-collection, jvm

好的，我看看能不能解释一下。

我有一些代码将 Java 迭代器（来自 Hadoop，碰巧）包装在 Scala Stream 中，因此我无法直接控制的客户端代码可能会多次读取它。使用此 Stream 完成的最后一件事是 reduce() 操作。Stream 会记住它已经看到的所有项目。不幸的是，在某些情况下迭代器会非常大，因此将所有项目存储在其中会导致内存不足错误。但是，一般来说，客户端代码需要多次迭代工具的情况与内存破坏迭代器的情况不同，如果确实存在这种情况，那不是我的问题。

我要确保的是我可以为需要它的代码提供记忆功能，但不能为不需要它的代码提供记忆功能（特别是对于根本不查看 Stream 的代码）。

Stream 中 reduce() 的代码说，它的编写方式允许对 Stream 的已访问部分进行 GC，*同时*减少。所以如果我能确保这真的发生，我会没事的。但在实践中，我如何确保发生这种情况？特别是，如果函数 A 创建流并将其传递给函数 B，函数 B 将流传递给函数 C，然后函数 C 调用 reduce()，那么函数 A、B 和 C 中仍然对流的引用呢？ ? 在所有这些情况下，这三个函数中的任何一个都不会进一步使用流，尽管调用不一定是尾递归的。JVM 是否足够聪明，可以确保在调用 reduce() 时，函数 A、B 和 C 的引用计数为 0，从而可以发生 GC？本质上，这意味着 JVM 在函数 A 中注意到它对项目所做的最后一件事是调用函数 B，因此它在调用 B 的同时消除了自己的句柄，

如果这能正常工作，如果 A、B 或 C 有一个局部变量持有该项目，它是否也能工作？（同样，以后不会使用它。）那是因为在不使用本地变量的情况下正确编码会更加棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:36:31.300

一个在范围内但永远不会被读取的变量是*dead*。出于垃圾收集的目的，JVM 可以自由地忽略死变量；仅由死变量指向的对象是无法访问的，并且可以被收集。JLS 的相关位是，不够隐晦的是，[§12.6.1 实施终结](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.6.1)，其中说：

> 可达对象是可以从任何活动线程的任何潜在持续计算中访问的任何对象。

并解释说：

> 可以设计优化程序的转换，将可到达的对象的数量减少到比那些天真地认为是可到达的要少。例如，Java 编译器或代码生成器可能会选择将不再使用的变量或参数设置为 null，以使此类对象的存储可能更快地被回收。
> 
> 如果对象字段中的值存储在寄存器中，则会出现另一个示例。然后程序可能会访问寄存器而不是对象，并且永远不会再次访问对象。这意味着该对象是垃圾。请注意，仅当引用在堆栈上而不是存储在堆中时才允许进行这种优化。

如果您的方法 A 只有引用流的死变量，那么它不会妨碍其收集。

但是请注意，这意味着局部变量：如果您有引用流的字段（包括来自包含嵌套类的方法的封闭局部变量），那么这不适用；我认为 JVM 不允许将这些视为已死。换句话说，这里：

```
public Callable<String> foo(final Object o) {
    return new Callable<String>() {
        public String call() throws InterruptedException {
            String s = o.toString();
            Thread.sleep(1000000);
            return s;
        }
    };
} 
```

在收集匿名对象`o`之前无法收集对象`Callable`，即使在`toString`调用后从未使用过它，因为在`Callable`.

# android - 导入 HoloEverywhere 时无法通过变量解析获取 R

> ID：12571265
> 
> 赞同：1
> 
> 时间：2012-09-24T19:08:26.223
> 
> 标签：android, eclipse, import, android-actionbar, android-holo-everywhere

所以我在我的应用程序中完全实现了 ActioanBar 和 Viewflow。我一直在阅读 HoloEverywhere 需要操作栏，所以这不应该是任何问题......它发生在我选择之后，Properties --> Android --> Add --> Holo lib

然后在重建后我得到错误：R 无法解决。我试过清理我的项目等等。

它发生在我导入库之后..

谢谢你的帮助

# visual-studio-2012 - Visual Studio 2012 Windows 服务 .vdproj 项目迁移

> ID：12571268
> 
> 赞同：29
> 
> 时间：2012-09-24T19:08:54.140
> 
> 标签：visual-studio-2012, windows-installer, vdproj, installshield-le, iswix

我正在尝试将我拥有的解决方案移至 Visual Studio 2012，其中一种项目类型是 .vdproj。

根据[此链接](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28VS.ReviewProjectAndSolutionChangesDialog.Upgrade%29&rd=true)，此项目类型在 Visual Studio 2012 中不受支持：MSDN 表示他们建议您使用[InstallShield](http://en.wikipedia.org/wiki/InstallShield) Limited Edition for Visual Studio。

问题是，当我在 VS2012 中打开我的解决方案并尝试在我的解决方案中添加一个新的“启用 InstallShield Limited Edition”项目时，我收到一条错误消息：

> 创建项目“测试”...项目创建失败。

![在此处输入图像描述](../Images/79fdb3efc638a3e7a48e8c15b930f07a.png)

![在此处输入图像描述](../Images/e5850b318817722b547f1019354c7800.png)

为什么我无法将这种类型的项目添加到我的解决方案中？

如果我制作一个新的空解决方案，我也无法在其中制作 InstallShield 项目。

我将尝试下载[InstallShield 限量版](http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio?lang=1033&ver=prem)，看看它是否有任何作用。

我尝试了 InstallShield 下载，它添加了两个额外的项目类型，但我无法创建其中任何一个。我可以将正常的网站项目添加到我的解决方案中，但不能将部署项目添加到我的解决方案中。

安装程序的名称相同，但这个提示我重新启动。重新启动后，我能够添加一个 InstallShield 项目，但它是在自己的解决方案中创建的。所以，看起来我现在必须弄清楚如何使用它，我会很高兴的。

看起来限量版不支持安装 Windows 服务。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T16:08:01.893

这可能会很长而且很无聊，因为有很多步骤，但我想写下如何从 Windows 服务安装程序 .vdproj 迁移到 Visual Studio 2012 中可用的新 InstallShield LE。

**步骤 1：创建合并模块 (.msm)**

按照[本指南](http://blog.iswix.com/2011/03/installation-collaboration-workflows.html)的步骤操作。

笔记：

*   您需要安装[WiX 3.6](http://wix.codeplex.com/)和[isWiX](http://iswix.codeplex.com/)
*   最新版本的 IsWiX 未启用 Visual Studio 2012 中的工具菜单项。编辑文件：C:\ProgramData\Microsoft\MSEnvShared\AddIns\IsWiXAddin.Addin (XML) 并克隆 HostApplication 元素并将 10.0 更新到 11.0。
*   在指南的第 8 步中，它引用了一个代码选项卡。这已移至左侧菜单底部的 XML 编辑器项
*   我将 MergeRedirectFolder 留空以进行安装

这是我的 isWix 文件视图：

![在此处输入图像描述](../Images/4e358c59aa7acb672e570c8ff6698a8f.png)

完成指南后，您应该有一个空的 .wxs 文件，如下所示：

![在此处输入图像描述](../Images/016f82e3c598d54301888c5bce7b1a24.png)

使用从[这里](http://blog.deploymentengineering.com/2011/01/augmenting-installshield-using-windows_19.html)提取的 Component XML 元素，您最终应该会得到一个如下所示的 .wxs 文件：

![在此处输入图像描述](../Images/dd6f1418169557cfdb1effc399fecb11.png)

点击构建，您现在应该有一个 .msm 文件。

**第 2 步：将合并模块添加到 InstallShield**

1.  通过向导设置基本安装信息，如公司和版本信息。
2.  在 ISLE 中找到可再发行组件视图。右键单击列表并选择浏览模块。找到并添加模块后，右键单击模块并选择属性。将目标文件夹下拉菜单设置为 INSTALLDIR。我必须将我的文件夹设置为我为安装路径创建的最低级别的文件夹，因此您可能需要进行一些试验。
3.  构建项目，并在虚拟机上测试

可再发行屏幕

![在此处输入图像描述](../Images/683ea1addce0d79636aa2bb93f27c355.png)

如果您收到有关路径太长的错误，您可能需要将发布位置更改为接近根目录的位置。

![在此处输入图像描述](../Images/e006a6605fb63916cfbb4deb9c510d53.png)

这是所有构建错误的[列表以供参考。](http://kb.flexerasoftware.com/doc/Helpnet/installshield12helplib/IHelpBuildErrors.htm)

现在您应该能够运行安装程序并让它安装/启动 Windows 服务。比 .MSI 文件做更多的工作，我们让它在 Visual Studio 2010 中生成，但总体来说还不错。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-30T19:06:17.473

虽然 Visual Studio 2012 没有简单或真正受支持的解决方案，但 Visual Studio 2013 用户可以在[Visual Studio Gallery](https://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d)中从 Microsoft 获得扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:30:08.537

我发现这篇文章说你必须先下载 InstallShield。这是一种非常混乱的工作方式。我建议在连接网站上对帖子进行投票，并给他们评论，让他们知道这有多糟糕。他们至少可以给出一个更具描述性的错误[http://connect.microsoft.com/VisualStudio/feedback/details/732196/project-creation-failed-for-installshield-limited-edition#tabs](http://connect.microsoft.com/VisualStudio/feedback/details/732196/project-creation-failed-for-installshield-limited-edition#tabs)

# java - 检索时存储在数据库中的休眠时间戳值为零

> ID：12571270
> 
> 赞同：0
> 
> 时间：2012-09-24T19:09:05.753
> 
> 标签：java, mysql, hibernate, netbeans

我想要做的是获得两个事件之间的差异，在这种情况下，商店开始制造某些物品的事件以及同一家商店开始将其运送到客户位置的时间。我使用 java 和 hibernate 来开发这个 WebApp。该实体称为报告（因为我将从该信息生成报告）这两个事件的属性是：

```
@Column
private Timestamp fechaFabricacion;
@Column   
private Timestamp fechaTransporte; 
```

它们正确地存储在我的数据库中：

```
2012-09-24 13:13:10 
```

对于制造开始和

```
2012-09-24 13:13:40 
```

运输开始。

我想报告的是，商店（在这种情况下）从制造到运输花了 30 秒。现在，这些值被完美地存储了，我遇到的问题是当我尝试从我的数据库中检索它并进行数学运算时，这是我使用的代码。

```
Query qr = em.createNamedQuery("Reporte.findByNumSeguimientoEntrega");
    qr.setParameter("numSeguimientoEntrega",numSeguimiento);
    List<Reporte> reportList = qr.getResultList();
    Reporte report = reportList.get(0);
    Timestamp timeStamp1 = report.getFechaInicio();
    Timestamp timeStamp2 = report.getFechaFabricacion();
    Long timeDiference =(timeStamp1.getTime()-timeStamp2.getTime())/(1000 * 60 * 60 * 24); 
```

问题是，正如我的调试器在这张图片中显示的那样，我的两个时间戳纳米值都为 0：

我在这里做错了什么？我怎样才能获得真正的价值并获得时差？

非常感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:13:31.870

您必须使用注释映射实体中的日期：

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "DATE")
public Date getDate() {
    return this.date;
} 
```

我认为这样它应该工作得很好。

# php - 使用 php GD 库复制和调整图像大小

> ID：12571276
> 
> 赞同：1
> 
> 时间：2012-09-24T19:09:23.073
> 
> 标签：php, php-gd

我想复制、调整大小和（如果不是太难的话）裁剪图像。

例如：我有一个尺寸为 1200 高度 X 2300 宽度的图像。我想制作一个 100x100 像素的缩略图，在这种情况下，因为高度小于宽度，所以高度应该在新图像上 100% 可见，并且宽度应该保持图像的纵横比。[这是一个示例图像](http://grona.co.cc/example.jpg)。

额外细节：

我正在使用 wamp，我启用了 Gd 2 当我尝试重写[此站点上示例中](http://php.net/manual/en/function.imagecopyresampled.php)的代码时，我只是得到损坏的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:12:18.737

试试这个，它来自[Resize Images Using PHP and GD Library](http://911-need-code-help.blogspot.in/2008/10/resize-images-using-phpgd-library.html)一 文

```
define('THUMBNAIL_IMAGE_MAX_WIDTH', 150);
define('THUMBNAIL_IMAGE_MAX_HEIGHT', 150);

function generate_image_thumbnail($source_image_path, $thumbnail_image_path)
{
    list($source_image_width, $source_image_height, $source_image_type) = getimagesize($source_image_path);
    switch ($source_image_type) {
        case IMAGETYPE_GIF:
            $source_gd_image = imagecreatefromgif($source_image_path);
            break;
        case IMAGETYPE_JPEG:
            $source_gd_image = imagecreatefromjpeg($source_image_path);
            break;
        case IMAGETYPE_PNG:
            $source_gd_image = imagecreatefrompng($source_image_path);
            break;
    }
    if ($source_gd_image === false) {
        return false;
    }
    $source_aspect_ratio = $source_image_width / $source_image_height;
    $thumbnail_aspect_ratio = THUMBNAIL_IMAGE_MAX_WIDTH / THUMBNAIL_IMAGE_MAX_HEIGHT;
    if ($source_image_width <= THUMBNAIL_IMAGE_MAX_WIDTH && $source_image_height <= THUMBNAIL_IMAGE_MAX_HEIGHT) {
        $thumbnail_image_width = $source_image_width;
        $thumbnail_image_height = $source_image_height;
    } elseif ($thumbnail_aspect_ratio > $source_aspect_ratio) {
        $thumbnail_image_width = (int) (THUMBNAIL_IMAGE_MAX_HEIGHT * $source_aspect_ratio);
        $thumbnail_image_height = THUMBNAIL_IMAGE_MAX_HEIGHT;
    } else {
        $thumbnail_image_width = THUMBNAIL_IMAGE_MAX_WIDTH;
        $thumbnail_image_height = (int) (THUMBNAIL_IMAGE_MAX_WIDTH / $source_aspect_ratio);
    }
    $thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);
    imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);
    imagejpeg($thumbnail_gd_image, $thumbnail_image_path, 90);
    imagedestroy($source_gd_image);
    imagedestroy($thumbnail_gd_image);
    return true;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:15:46.273

您是否尝试过使用[Timthumb](http://www.binarymoon.co.uk/projects/timthumb/)？这是一个很好的小脚本，符合您的要求。如果您的图像文件损坏，您的 GD 安装可能会出错，但如果没有看到任何代码，就很难猜到。您是否有任何其他机器（可能是带有 LAMP 堆栈的网络主机）来在那里测试您的代码？

# sql - Microsoft Access SQL 应用

> ID：12571280
> 
> 赞同：1
> 
> 时间：2012-09-24T19:09:35.867
> 
> 标签：sql, ms-access, ms-access-2010

我试图在访问环境中使用以下查询无济于事。问题似乎与应用有关。但是，这直接在我们的 SQL 服务器上运行良好..... 帮助？

```
SELECT 
    dbo_tblmain.key1, 
    dbo_tblmain.key2, 
    dbo_tblmain.data1, 
    dbo_tblmain.data2, 
    dbo_tblmain.data3, 
    dbo_tblsupp.data1,
    tbloutmade.data1
FROM dbo_tblmain 
LEFT JOIN dbo_tblsupp 
ON (dbo_tblmain.key1 = dbo_tblsupp.key1) AND (dbo_tblmain.key2 = dbo_tblsupp.key2)
OUTER APPLY 
(SELECT TOP 1 * FROM dbo_tbloutside WHERE LEFT(dbo_tblmain.key1,14)=LEFT(dbo_tbloutside.key1,14)) tbloutmade; 
```

样本数据

```
tblmain
key1          key2                data1 data2 data3 
A1234567890   12345678901234AAA   AAA   BBB   CCC   

tblsupp
key1          key2                data1
A1234567890   12345678901234AAA   DDD

tbloutside
key1                 data1
12345678901234AAABB  EEE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:16:05.223

你可以试试：

```
SELECT 
    dbo_tblmain.key1, 
    dbo_tblmain.key2, 
    dbo_tblmain.data1, 
    dbo_tblmain.data2, 
    dbo_tblmain.data3, 
    dbo_tblsupp.data1,
    (SELECT TOP 1 Key1 FROM dbo_tbloutside 
     WHERE LEFT(dbo_tblmain.key1,14)=LEFT(dbo_tbloutside.key1,14)) As tbloutmade
FROM dbo_tblmain 
LEFT JOIN dbo_tblsupp 
ON (dbo_tblmain.key1 = dbo_tblsupp.key1) 
AND (dbo_tblmain.key2 = dbo_tblsupp.key2) 
```

# android - 一个xml文件中的奇怪字符，但来自webAPI的另一个文件中没有

> ID：12571287
> 
> 赞同：1
> 
> 时间：2012-09-24T19:09:54.623
> 
> 标签：android

我遇到了一个奇怪的问题，我正在使用一个从 thetvdb.com 下载系列信息的应用程序，但我遇到了“奇怪”字符的问题。我正在使用他们服务器上的两个不同的 xml 文件，第一个是他们的搜索方法：

[http://www.thetvdb.com/api/GetSeries.php?seriesname=100](http://www.thetvdb.com/api/GetSeries.php?seriesname=100)

这应该显示 å,ä 和 ö，但是当使用详细信息 xml 时，我得到了奇怪的字符：[http ://www.thetvdb.com/data/series/80026/all/](http://www.thetvdb.com/data/series/80026/all/)

我已经在我的网络浏览器中查看了它们，它们都返回 UTF-8。我已经尝试了很多我在网上找到的技巧，但没有任何效果。

我在工作，所以我找不到它们，但我得到的字符类型是：“Ã¶”和“Ã¤”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:00:55.510

我已经设法解决了这个问题，但我相信这不是真正问题的解决方案。我正在使用 EntityUtils.toString 并且我没有指定编码，在添加“UTF8”作为 defaultCharset 参数问题解决后。但真正的问题一定是xml文件，但我就是不知道是什么！:)

# java - 尝试从网络摄像头捕获图像时出现 NullPointerException

> ID：12571290
> 
> 赞同：0
> 
> 时间：2012-09-24T19:10:08.737
> 
> 标签：java

我的第 508 行出现错误，其中有此代码

`buf = fgc.grabFrame();`

**代码：**

```
startC.addActionListener(new ActionListener()
        {           
            @Override
            public void actionPerformed(ActionEvent e)
            {                   
                  // Grab a frame   
                  FrameGrabbingControl fgc = (FrameGrabbingControl) 
                  player.getControl("javax.media.control.FrameGrabbingControl");    
                  buf = fgc.grabFrame();       

              // Convert it to an image 
              BufferToImage btoi = new BufferToImage((VideoFormat)buf.getFormat()); 
              img = btoi.createImage(buf);             

                  // show the image 
                  //imgpanel.setImage(img);       

                  // save image 
                  try {
                    saveJPG(img,"c:\\test.jpg");
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
}): 
```

**堆：**

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
at com.colorfulwolf.webcamapplet.WebcamApplet$6.actionPerformed(WebcamApplet.java:508)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

这条线出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:13:43.967

您需要分配`player`给一个实例：

```
public static Player player = new Player(); 
```

# python - 无法执行通过 %paste% 指定的函数

> ID：12571294
> 
> 赞同：2
> 
> 时间：2012-09-24T19:10:22.087
> 
> 标签：python, ipython, ipython-magic

`%paste%`是否可以运行通过使用IPython中的魔术函数指定的函数？

```
In [1]: %paste%
def add_to_index(index,keyword,url):
    for e in index:
        if e[0] == keyword:
            if url not in e[1]:
                e[1].append(url)
            return
    index.append([keyword,[url]])

## -- End pasted text --
Block assigned to '%'

In [2]: %whos
Variable   Type     Data/Info
-----------------------------
%          SList    ['def add_to_index(index,<...>append([keyword,[url]])']

In [3]: add_to_index
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-3-e3075a18cb0c> in <module>()
----> 1 add_to_index

NameError: name 'add_to_index' is not defined

In [4]: add_to_index(index, 'test', 'http://test.com')
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-4-580237464b17> in <module>()
----> 1 add_to_index(index, 'test', 'http://test.com')

NameError: name 'add_to_index' is not defined

In [5]: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:18:50.200

粘贴魔法是`%paste`（没有尾随`%`）：

```
In [3]: %paste
def add_to_index(index,keyword,url):
    for e in index:
        if e[0] == keyword:
            if url not in e[1]:
                e[1].append(url)
            return
    index.append([keyword,[url]])
## -- End pasted text --

In [4]: add_to_index
Out[4]: <function __main__.add_to_index> 
```

在您的情况下发生的是您正在使用可选参数`%paste`：

```
In [5]: %paste?
Type:       Magic function

...(text omitted)

You can also pass a variable name as an argument, e.g. '%paste foo'.
This assigns the pasted block to variable 'foo' as string, without
dedenting or executing it (preceding >>> and + is still stripped) 
```

当您这样做时，粘贴的代码不会被执行，它只是分配给您作为参数提供的变量（`%`在您的情况下）。

# ember.js - Ember.js：处理模型中的大量属性

> ID：12571295
> 
> 赞同：3
> 
> 时间：2012-09-24T19:10:26.697
> 
> 标签：ember.js, handlebars.js

我有一个具有大量属性的模型，大约 20 个。

```
App.Foo = Ember.Object.extend({
  foo01: null,
  foo02: null,
  ...
  foo20: null 
```

因为我需要区分 和 的值`null`，`""`所以我还拥有所有这些属性：

```
 isFoo01Set: function() { return foo01 !== null; }.property('foo01'),
  isFoo02Set: function() { return foo02 !== null; }.property('foo02'),
  ...
  isFoo20Set: function() { return foo01 !== null; }.property('foo20') 
```

请注意，在我的实际案例中，实际名称不是`foo01..20`，而是彼此不同的有意义的名称。

然后我需要有一大堆动作来设置/取消设置所有这些属性。

在我的路由器中：

```
 setFoo01: function(router, instance) {
    router.get('myController').setFoo01(instance.context);
  },
  unsetFoo01: function(router, instance) {
    router.get('myController').unsetFoo01(instance.context);
  }, 
```

以此类推，直到`foo20`。然后在我的控制器中：

```
 setFoo01: function(obj) {
    obj.set('foo01', '');
  },
  unsetFoo01: function(obj) {
    obj.set('foo01', null); 
```

依此类推，直到`foo20`。

**显然**我一定做错了什么。但我发现由于`handlebars`限制（按设计），我不能在模板中做任何事情。

我想要这样的东西：

```
{{# each property in obj}}
  <a {{action set obj property}}>Set {{property}}</a>
{{/each}} 
```

但看起来这不可能。

所以，拜托，你能告诉我有更好的方法吗？它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:45:21.410

我将给出一个模糊的想法......希望这会有所帮助

```
App.Foo = Ember.Object.create({
  name: "",
  presence: function(){
    return this.get('name')!==null;
  }.property('name'),
  setFoo: function(){
    this.set('name', "");
  },
  unsetFoo: function(){
    this.set('name', null);
  }
})

App.fooArray = []
for(var i=0;i<=5;i++){
  App.fooArray.pushObject(App.Foo.create({name:"foo"+i}));
}

{{#each element in App.fooArray}}
  <a {{action element.unsetFoo}} href="#">un-set {{element.name}}</a>
  <a {{action element.setFoo}} href="#">Set {{element.name}}</a>
{{/each}} 
```

# gnuplot - Gnuplot中轴的指数缩放

> ID：12571296
> 
> 赞同：2
> 
> 时间：2012-09-24T19:10:30.297
> 
> 标签：gnuplot, exponential

如果您更关心小数的数据变化而不是大数的数据变化，则对数刻度很有用。对于相反的用例，指数规模应该是有用的——即，当较大数量的较小变化很重要时。

Gnuplot 内置支持以对数方式缩放轴。它是否支持指数缩放？如果是这样，使用它的语法是什么？如果没有，有什么优雅的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:21:11.773

没有对指数缩放的内置支持。不过，您可以绘制图表`using (exp($1)):2`。

# servlets - HttpSessionAttributeListener 混淆

> ID：12571298
> 
> 赞同：0
> 
> 时间：2012-09-24T19:10:35.550
> 
> 标签：servlets

我正在阅读有关 HttpSessionAttributeListener 的信息，这是我制作的一个小例子。不过我有一个疑问。代码如下

```
public class TestServlet extends HttpServlet {

  public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
    doPost(request,response);
  }

  public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    HttpSession session = request.getSession();
    Dog d = new Dog();
    d.setName("Peter");
    session.setAttribute("test", d);
    /*Dog d1 = new Dog();
    d1.setName("Adam");
    */
    d.setName("Adam");
    session.setAttribute("test",d);
  }

} 
```

这是我的听众课

```
public class MyAttributeListener implements HttpSessionAttributeListener {
  @Override
  public void attributeAdded(HttpSessionBindingEvent httpSessionBindingEvent) {
    System.out.println("Attribute Added");
    String attributeName = httpSessionBindingEvent.getName();
    Dog attributeValue = (Dog) httpSessionBindingEvent.getValue();
    System.out.println("Attribute Added:" + attributeName + ":" + attributeValue.getName());

  }

  @Override
  public void attributeRemoved(HttpSessionBindingEvent httpSessionBindingEvent) {
    String attributeName = httpSessionBindingEvent.getName();
    String attributeValue = (String) httpSessionBindingEvent.getValue();
    System.out.println("Attribute removed:" + attributeName + ":" + attributeValue);

  }

  @Override
  public void attributeReplaced(HttpSessionBindingEvent httpSessionBindingEvent) {
    String attributeName = httpSessionBindingEvent.getName();
    Dog attributeValue = (Dog) httpSessionBindingEvent.getValue();
    System.out.println("Attribute replaced:" + attributeName + ":" + attributeValue.getName());

  }
} 
```

这是我的模型

```
public class Dog  {
  private String name ;

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }
} 
```

令人困惑的是，当我运行这个程序时，监听器完美地调用了添加和替换的属性。当我取消注释我的 servlet 中的代码并进行注释时

```
d.setName("Adam") 
```

替换的属性确实被调用。但是 name 的值仍然是 Peter only。这是为什么？什么原因？另一个问题，我们什么时候特别使用 HttpSessionAttributeListener 和 HttpSessionListener。有什么实际用途吗？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:55:44.207

因为[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionBindingEvent.html#getValue%28%29)说：

> 返回已添加、删除或替换的属性的值。如果属性被添加（或绑定），这是属性的值。如果属性已被移除（或未绑定），则这是已移除属性的值。如果属性被替换，这是属性的旧值。

在第一种情况下，旧值和新值相同，因此您看到了新的狗名。

HttpSessionListener 用于了解会话的创建和销毁。HttpSessionAttributeListener 用于了解会话中新的、删除的和替换的属性。他们非常不同。

# algorithm - 从字母数字字符串生成唯一 ID

> ID：12571307
> 
> 赞同：10
> 
> 时间：2012-09-24T19:11:11.940
> 
> 标签：algorithm, algorithmic-trading

我需要从一个字母数字字符串生成一个 UNIQUE id（仅限 int）。

例如，我有安全 ID = 'ABC123DEF' 我应该能够生成“安全 ID”的唯一 ID（仅限 int），以便唯一 ID 始终保持不变。

例如安全 ID：ABC123DEF Int ID：9463456892

这样我就可以将 Int ID 存储在 Database 中，并随时从 Int ID 中引用安全 ID。

一些例子：PBG_CD_20120214_.2 | 201202-CMG188963_T | PBG_TD_20120306_.0001 3 个示例：-PIPE 分离

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-24T19:24:56.853

只需使用 Java 哈希算法。不是 100% 唯一的，但您可以将其用作基础并添加一些东西以保证在更小的碰撞集上的唯一性：

```
public static int hash(String s) {
    int h = 0;
    for (int i = 0; i < s.length(); i++) {
        h = 31 * h + s.charAt(i);
    }
    return h;
} 
```

为了避免 100% 的冲突，您需要一个大于角色之间较大差异的素数。因此，对于 7 位 ASCII，您需要高于 128 的值。因此，不要使用 31，而是使用 131（128 之后的下一个素数）。我没有检查的部分是生成的哈希是否会大于你的长整数的大小。但你可以从那里拿走它...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:15:56.457

您可以将每个字符编码为两位数，0-9 为数字本身，10-35 为 AZ。

例如，9AC8 将是 09 10 12 08 = 09101208。

编辑：对于少数人，您可以使用这种方法（使用 Java 风格的伪代码）：

```
char[] availableChars = ['A', 'B', ... , '0', ... '9', '-', '_', '.'];
long hash = 0;
long base = 1;
for (char c in string.toCharArray())
    for (int key=0; key < availableChars.length; key++)
        if (availableChars[key] != c)
            continue;
        hash += base*key;
        base = base*availableChars.length

return hash; 
```

# c - OpenGL从角落移动物体

> ID：12571314
> 
> 赞同：0
> 
> 时间：2012-09-24T19:11:46.260
> 
> 标签：c, opengl, graphics, glut

我有一个使用 GLUT 的 openGL 程序，当我调整窗口大小时，我坚持将它从左上角移动到右下角。我正在尝试降低比率，但我无法弄清楚。

```
#include <stdio.h>
#include <stdlib.h>
#include <GLUT/glut.h>

//global variables
GLsizei wh = 500, ww = 500;
double height;
 double width;
double top = 500;
double bottom = 450;
int right = 50;
int left = 0;
double ratiowidth = 500/500;
double ratioheight = 500/500;
void myinit(){
glClearColor (0.0, 0.0, 0.0, 0.0);
}
void reshape(int w, int h){
if(h == 0){
    h = 1;
}
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluOrtho2D(0, (GLsizei) w, 0, (GLsizei)h);
glViewport(0,0,w,h);
glMatrixMode(GL_MODELVIEW);
int difference = h - wh;
int difference2 = w - ww;
left = left + difference2;
right = right + difference2;
wh = (GLsizei)h;
ww = (GLsizei)w;
height = h;
width = w;
}
void mouse(int button, int state, int x, int y){
if(button == GLUT_LEFT_BUTTON && state == GLUT_DOWN){
    top = height;
    bottom = height - 50;
    right =  50;
    left = 0;
    ratiowidth = width/height;
    ratioheight = height/width;
}
if(button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN){
    exit(0);
}
}
void display(){
glClear (GL_COLOR_BUFFER_BIT);
glColor3i (rand(), rand(), rand());
glBegin(GL_POLYGON);
  glVertex3f (left,top,0.0);
  glVertex3f (right, top, 0.0);
  glVertex3f (right, bottom, 0.0);
  glVertex3f (left, bottom, 0.0);
glEnd();
if(bottom == 0 || bottom < 0)
   bottom = 0;
else{
   left = left + ratiowidth;
   right = right + ratiowidth;
   top = top - ratioheight;
   bottom = bottom - ratioheight;
}
glutSwapBuffers();
usleep(10000);
glutPostRedisplay();
}
int main(int argc, char** argv) {
glutInit(&argc,argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
glutInitWindowSize(ww, wh);
glutInitWindowPosition(100,100);
glutCreateWindow("moving Square");
myinit();
glutReshapeFunc(reshape);
glutDisplayFunc(display);
glutMouseFunc(mouse);
glutMainLoop();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:39:22.120

```
glBegin(GL_POLYGON);
  glVertex3f (left,top,0.0);
  glVertex3f (right, top, 0.0);
  glVertex3f (right, bottom, 0.0);
  glVertex3f (left, bottom, 0.0);
glEnd(); 
```

小心你的绕组订单。 [`glFrontFace()`](http://www.opengl.org/sdk/docs/man/xhtml/glFrontFace.xml)默认为`GL_CCW`. 也许你的意思是：

```
glBegin(GL_POLYGON);
  glVertex3f (left, bottom, 0.0);
  glVertex3f (right, bottom, 0.0);
  glVertex3f (right, top, 0.0);
  glVertex3f (left,top,0.0);
glEnd(); 
```

**编辑：**这就是我*认为*你想要做的：

```
#include <GL/glut.h>

struct State
{
    double x;       // in units
    double y;    
    double xvel;    // in units per second
    double yvel;  
};
State curState = { 0 };

void myinit()
{
    curState.xvel = 100;
    curState.yvel = 100;
}

void Integrate( State* state, double dt )
{
    state->x += state->xvel * dt;
    state->y += state->yvel * dt;
}

double GetSeconds()
{
    return glutGet(GLUT_ELAPSED_TIME) / 1000.0f;
}

void reshape(int w, int h)
{
    glViewport(0,0,w,h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, (GLsizei)w, 0, (GLsizei)h);
}

void mouse(int button, int state, int x, int y)
{
    if(button == GLUT_LEFT_BUTTON && state == GLUT_UP)
    {
        curState.x = 0;
        curState.y = 0;
    }
    if(button == GLUT_RIGHT_BUTTON && state == GLUT_UP)
    {
        exit(0);
    }
}

void display()
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glClear (GL_COLOR_BUFFER_BIT);

    float w = 20;
    float h = 20;
    float x = curState.x;
    float y = curState.y;

    glColor3ub(rand()%255, rand()%255, rand()%255);
    glBegin(GL_QUADS);
    glVertex2f( x - w/2, y - h/2 );
    glVertex2f( x + w/2, y - h/2 );
    glVertex2f( x + w/2, y + h/2 );
    glVertex2f( x - w/2, y + h/2 );
    glEnd();

    static double lastTime = GetSeconds();

    double curTime = GetSeconds();
    Integrate( &curState, curTime - lastTime );
    lastTime = curTime;

    glutSwapBuffers();
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main(int argc, char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(100,100);
    glutCreateWindow("moving Square");
    myinit();
    glutReshapeFunc(reshape);
    glutTimerFunc(0, timer, 0);
    glutDisplayFunc(display);
    glutMouseFunc(mouse);
    glutMainLoop();
    return 0;
} 
```

请注意，那里可能有一些 C++ 主义:)

# css - 将 div 粘贴到右下角，但始终在页脚上方

> ID：12571316
> 
> 赞同：0
> 
> 时间：2012-09-24T19:11:49.670
> 
> 标签：css, html, positioning

我想要一个小 div 贴在浏览器的右下角。这是我通过这样做完成的：

```
#div {
position: fixed;
bottom: 10px;
right: 10px;
} 
```

但我有一个页脚，比如 height: 200px;。我想要的是，当你向下滚动页面时，div 停留在右下角，但是当页脚在页面底部弹出时，我希望页脚将其向上推，这样它就不会出现在前面页脚。

我希望我说清楚了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:39:11.000

喜欢这可以在没有 jscripting 的情况下完成。:) 只需几行 CSS 和一些包装调整：http: [//jsfiddle.net/bitofgrace/QGEUv/](http://jsfiddle.net/bitofgrace/QGEUv/)

```
<div id="wrapper">
<div id="flyover">hi</div> <!-- the content you want to stick in the corner -->
<div class="content"> Body of page content</div>

<div ID="footer"> FOOTER CONTENT</div>
</div> <!-- close wrapper --> 
```

CSS

```
#wrapper {width:100%; height:100%; margin:0}
#flyover {background-color:pink; color:white; position:fixed; top: 87.5%; z-index:4;}
#footer {background:green; position:relative; height:100px; width:100%; bottom:0; z-index:1;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:15:45.580

我花了一段时间，但我想我已经为你找到了答案:)

您应该通过在添加 css 文件的行下方添加此行来将 JQuery 添加到 HTML：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

然后创建一个文件scrollBottom.js（javascript文件），并像这样添加它：

```
<script src="scrollBottom.js" type="text/javascript"></script> 
```

在该文件中添加以下代码（已编辑：应该添加 document.ready）：

```
$(document).ready(function() {

    $(window).scroll(function() {
       if($(window).scrollTop() + $(window).height() > $(document).height()-200) {
           $('#div').css('bottom', $(window).scrollTop()-2360);
       }
        else
        {
            $('#div').css('bottom', '10px');
        }
    });​
}); 
```

工作示例：http: [//jsfiddle.net/4VJtU/4/](http://jsfiddle.net/4VJtU/4/)

# c++ - 绘制放大镜窗口（放大 API）

> ID：12571317
> 
> 赞同：2
> 
> 时间：2012-09-24T19:12:03.903
> 
> 标签：c++, winapi, magnification-api

我正在使用 windows magnification API 创建一个应用程序，需要在那里绘制，但不知道如何。我试图在 DC 上画画，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:38:21.053

如果您的应用程序的清单中没有 uiAccess=true 并且从与 Program Files 不同的文件夹运行，则不能。

# http - 通过 HTTP 标头的规范 URL 规范

> ID：12571326
> 
> 赞同：2
> 
> 时间：2012-09-24T19:13:01.610
> 
> 标签：http, header, seo, http-headers

我正在使用规范的 URL HTTP 标头进行[搜索引擎优化 (SEO)](https://en.wikipedia.org/wiki/Search_engine_optimization)，如下所示：

```
Link: /path/to; rel='canonical' 
```

我找不到关于这个主题的太多信息，但我见过的几个例子是这种格式的：

```
Link: <http://example.com/path/to>; rel="canonical" 
```

所以我的问题是：

*   需要尖括号吗？
*   是否需要包含方案和主机的完整 URL？
*   零件是否需要双引号`canonical`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:37:23.107

答案在[http://greenbytes.de/tech/webdav/rfc5988.html#rfc.section.5](http://greenbytes.de/tech/webdav/rfc5988.html#rfc.section.5)：所以“是”、“否”和“否”。

（链接关系“规范”有它自己的规范——https: [//www.rfc-editor.org/rfc/rfc6596——](https://www.rfc-editor.org/rfc/rfc6596)但当然使用RFC 5988中定义的通用头字段语法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:33:57.823

规范链接是通过将“链接到”URL 放在尖括号内并将`link`HTML 元素放在它适用的页面中来实现的：

```
<link rel="canonical" href="http://www.link-to-page-here.com/" /> 
```

[http://en.wikipedia.org/wiki/Canonical_link_element](http://en.wikipedia.org/wiki/Canonical_link_element)

# web-services - 使用 JMeter 调用异步触发并忘记 SOAP Web 服务

> ID：12571328
> 
> 赞同：1
> 
> 时间：2012-09-24T19:13:06.463
> 
> 标签：web-services, soap, jmeter

我正在使用 jmeter 调用异步即发即弃 SOAP Web 服务并在表格中显示结果。

如果我使用 WebService(SOAP) 请求采样器，它会将调用结果记录为警告，即使状态代码为 200，也会导致 ws 以空消息响应。

对于 SOAP/XML-RPC 请求，日志表显示请求已结束。

可以告诉 WebService(SOAP) 请求以将空响应理解为有效响应吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:03:39.613

在 WebService Soap 采样器的代码中，据说：

> // 无法访问实际的 HTTP 响应代码，所以我们假设没有数据意味着失败

**代码摘录：**

```
 // It is not possible to access the actual HTTP response code, so we assume no data means failure
            if (length > 0){
                result.setSuccessful(true);
                result.setResponseCodeOK();
                result.setResponseMessageOK();
            } else {
                result.setSuccessful(false);
                result.setResponseCode("999");
                result.setResponseMessage("Empty response");
            } 
```

所以你没有这个采样器的解决方案。

另一种解决方案是将 HTTP 采样器与 Raw Post Body 一起使用，并仅测试带有断言的响应代码。

我打开了一个 Bugzilla 增强请求：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53978](https://issues.apache.org/bugzilla/show_bug.cgi?id=53978)

# awt - 系统托盘中的 JavaFX 应用程序

> ID：12571329
> 
> 赞同：20
> 
> 时间：2012-09-24T19:13:16.677
> 
> 标签：awt, javafx, systray

我正在使用 JavaFX UI 制作一个简单的应用程序，该应用程序只是这样做：

*   有一个系统托盘图标，单击时会显示一个窗口，再次单击时会隐藏它，右键单击时会显示一个带有 1 个“退出”项的菜单

我已经制作了 UI 并将应用程序放入系统托盘中，但我无法使用 Normal Actionlistener 方法显示/隐藏它，但出现此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0 
```

这是代码：

```
import java.awt.Image;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.ActionListener;

import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class Main extends Application{
    public static void main(String[] args) { 
        launch(args);       
    }

    @Override
    public void start(final Stage primaryStage) {
        primaryStage.setTitle("Hello World!");
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                System.out.println("Hello World!");            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();

        if (SystemTray.isSupported()) {         
            SystemTray tray = SystemTray.getSystemTray();
            Image image = Toolkit.getDefaultToolkit().getImage("Germany-politcal-map.jpg");
            PopupMenu popup = new PopupMenu();
            MenuItem item = new MenuItem("Exit");

            popup.add(item);

            TrayIcon trayIcon = new TrayIcon(image, "Amr_Trial", popup);

            ActionListener listener = new ActionListener() {                
                @Override
                public void actionPerformed(java.awt.event.ActionEvent arg0) {
                    // TODO Auto-generated method stub
                    System.exit(0);                 
                }               
            };                       

            ActionListener listenerTray = new ActionListener() {                
                @Override
                public void actionPerformed(java.awt.event.ActionEvent arg0) {
                    // TODO Auto-generated method stub                  
                    primaryStage.hide();
                }                   
            };            

            trayIcon.addActionListener(listenerTray);
            item.addActionListener(listener);

            try{
              tray.add(trayIcon);
            }catch (Exception e) {
              System.err.println("Can't add to tray");
            }
          } else {
            System.err.println("Tray unavailable");
          } 
        //
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T19:52:11.387

将代码包装在 actionListener 中，它在[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)中回调 JavaFX 。这将在 JavaFX 应用程序线程上执行与 JavaFX 系统接口的代码，而不是尝试在 Swing 事件线程上执行它（这是导致您出现问题的原因）。

例如：

```
ActionListener listenerTray = new ActionListener() {                
  @Override public void actionPerformed(java.awt.event.ActionEvent event) {
    Platform.runLater(new Runnable() {
      @Override public void run() {
        primaryStage.hide();
      }
    });
  }                   
}; 
```

默认情况下，应用程序将[在最后一个窗口隐藏时关闭](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)。要覆盖此默认行为，请在显示第一个应用程序阶段之前调用[Platform.setImplicitExit(false) 。](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#setImplicitExit%28boolean%29)然后，当您需要应用程序真正关闭时，您将需要显式调用[Platform.exit() 。](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#exit%28%29)

* * *

我创建了一个[在 JavaFX 应用程序中使用 AWT 系统托盘的演示](https://gist.github.com/jewelsea/e231e89e8d36ef4e5d8a)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T19:50:39.403

您应该只修改 javafx 线程上的 javafx 类，托盘图标上的侦听器很可能在 swing 线程上运行。您可以通过向 Platform#runLater 发布可运行文件来做到这一点，如下所示：

```
Platform.runLater(new Runnable() {
    public void run() {
        primaryStage.hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T10:24:13.757

JavaFX 尚不支持系统托盘。您可以在以下 JIRA 问题下跟踪此任务的进度：[https](https://bugs.openjdk.java.net/browse/JDK-8090475)
://bugs.openjdk.java.net/browse/JDK-8090475 该问题还提供了一种解决方法，可用于 JavaFX 8 以获得基本支持.

JavaFX 8 没有计划该功能，因此它可能会在以下更新之一甚至 JavaFX 9 中发布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-18T13:12:44.020

无耻的自插拔，但我为 JavaFX 图标开发了一个小型包装库，它使用名为[FXTrayIcon](https://github.com/dustinkredmond/FXTrayIcon)的 SystemTray 。

它抽象出所有讨厌的 AWT 位，无需猜测您应该在哪个线程上运行代码。它可作为 Maven Central 的依赖项使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-05T21:53:00.747

我解决了你的问题。带有 AWT 的 JavaFX。我有一个应用程序示例，当您进行左单击时显示和隐藏。我真的希望对你有用

```
import java.awt.AWTException;
import java.awt.Image;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.net.URL;
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.application.Platform;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class MainApp2 extends Application {

int stateWindow = 1;

@Override
public void start(final Stage stage) throws Exception {

//Check the SystemTray is supported
if (!SystemTray.isSupported()) {
    System.out.println("SystemTray is not supported");
    return;
}

URL url = System.class.getResource("/image/yourImage.png");
Image image = Toolkit.getDefaultToolkit().getImage(url);

//image dimensions must be 16x16 on windows, works for me
final TrayIcon trayIcon = new TrayIcon(image, "application name");

final SystemTray tray = SystemTray.getSystemTray();

//Listener left clic XD
trayIcon.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent event) {
        if (event.getButton() == MouseEvent.BUTTON1) {
            Platform.runLater(new Runnable() {
                @Override
                public void run() {
                    if (stateWindow == 1) {
                        stage.hide();
                        stateWindow = 0;
                    } else if (stateWindow == 0) {
                        stage.show();
                        stateWindow = 1;
                    }
                }
            });
        }

    }
});

try {
    tray.add(trayIcon);
} catch (AWTException e) {
    System.out.println("TrayIcon could not be added.");
}

stage.setTitle("Hello man!");
Button btn = new Button();
btn.setText("Say 'Hello man'");
btn.setOnAction(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent event) {
        System.out.println("Hello man!");
    }
});
StackPane root = new StackPane();
root.getChildren().add(btn);
stage.setScene(new Scene(root, 300, 250));
Platform.setImplicitExit(false);
stage.show();

}

/**
 * The main() method is ignored in correctly deployed JavaFX application.
 * main() serves only as fallback in case the application can not be
 * launched through deployment artifacts, e.g., in IDEs with limited FX
 * support. NetBeans ignores main().
 *
 * @param args the command line arguments
 */
public static void main(String[] args) {
launch(args);
}
} 
```

# c# - 使用 .net 2.0 记录器类的问题

> ID：12571335
> 
> 赞同：0
> 
> 时间：2012-09-24T19:13:33.620
> 
> 标签：c#, .net, logging

我一直在尝试使用[位于此处的课程](http://msdn.microsoft.com/en-us/library/microsoft.build.utilities.logger%28v=vs.80%29.aspx)。但我无法让它发挥作用。我显然没有正确理解某些东西，但我很好奇如何让该示例 Logger 类工作。 **我的研究**使我转向使用 MSBuild，但正确使用 MSBuild 仍然让我感到困惑。任何指针都会有所帮助。我已将记录器类构建到 .dll 中，并在项目中也引用了它，但这就是我的研究似乎因有用信息而枯竭的地方。

**我**目前的目标只是让上述记录器类正常工作，这样我就可以使用自己的记录器类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:28:13.310

该类专门用于记录 MSBuild 事件。如果您想要一个与 MSBuild 无关的通用记录器，请查看以下一些替代方案：

*   [MS 企业库 - 记录应用程序块](http://msdn.microsoft.com/en-us/library/ff664569%28v=pandp.50%29.aspx)
*   [Log4Net](http://logging.apache.org/log4net/)
*   [Elmah](http://code.google.com/p/elmah/)（设计用于记录 ASP.NET 错误，但*可*用于记录其他事件）
*   [日志](http://nlog-project.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:03:43.967

不要害怕使用图书馆来完成这项工作。在本教程中，开始使用功能齐全且可扩展[的](http://geekswithblogs.net/swisscoder/archive/2012/05/13/c-tutorial-for-log4net-again.aspx)`log4net`日志库是一个简单的七步过程。我将内联教程的各个部分，以防万一链接失效。

首先，您在`App.config`文件中构建一个非常简单的配置部分：

```
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>
  </configSections>
  <log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
      <param name="File" value="log-file.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
  </log4net>
</configuration> 
```

对于您的需要，您几乎只需要更改`value`第一个`param`命名`File`的，因为它已经设置为附加到文本文件。

接下来，您需要以某种启动方法运行配置，例如您的程序`Application_Start`的`main`方法。

```
log4net.Config.XmlConfigurator.Configure(); 
```

最后，只需插入几行代码即可使用它：

```
private static readonly ILog log = LogManager.GetLogger(typeof(Bar));
... (rest of class)
... (somewhere in a method) ... log.Debug("this is the first log message"); 
```

# python - 导入使用模块级变量的函数

> ID：12571337
> 
> 赞同：0
> 
> 时间：2012-09-24T19:13:39.127
> 
> 标签：python, import, module

例子：

```
$ cat m1.py
a = 1
def f():
    print a

$ cat m2.py 
from m1 import f
a = 2
f() 
```

我想在运行它时`python m2.py`打印`2`，但它会打印`1`.

我是否必须`f`将`a`其作为论点，还是有更好的方法来实现这一点？我正在尝试对 DRY 进行编码并以这种方式在不同的“环境”中重用相同的功能。如果我可以在导入时覆盖它，那么定义`a`inside也是有意义的。`f`

我想到的另一种方法是：

```
$ cat m1.py
a = 1
def make_f(a):
    def f():
        print a
    return f

f = make_f(a)

$ cat m2.py 
from m1 import make_f
a = 2
f = make_f(a)
f() 
```

这可以根据需要工作，但是有更简洁的方法吗？

**编辑：**感谢到目前为止的答案；我不认为我可以通过提供一个更现实的例子来澄清任何事情，但我想说我什至问这个的原因是因为在我看来，实际参数之间存在区别`f`（它将使用两个模块中的方式相同）和“环境” `a`，应该不同。可能我不应该真正区分（根据需要`a`在不同模块中使用不同的值来判断），但根据含义，区分是有意义的`a`。

**编辑2：**我又想了想，得出的结论是我可能想使用闭包，原因是我不希望每个模块中的其他函数在`a`调用`f`. 我猜，这就是存在的可观察的、非虚拟的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:15:36.100

（如果我理解正确的话）——试试这个：

```
#m2.py
from m1 import f
import m1
m1.a = 2
f() 
```

然而，我应该提一下，你需要这样做的事实让我脑海中浮现出各种各样的花里胡哨——这似乎是一个非常糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:20:44.117

我想你的代码比这个例子更复杂，所以我建议你尝试使用一个类：

**你的类.py**

```
class YourClass(object):
    def __init__(self, a=1):
        self.a = a

    def f(self):
        print self.a 
```

**你的其他文件.py**

```
from YourClass import YourClass

o = YourClass(a=2)  # Without explicitly setting `a=2`, `a` defaults to `1`
o.f() 
```

没有更多上下文，我无法提供更多建议。

# java - Java 正则表达式用未知数量的空格分割数字

> ID：12571338
> 
> 赞同：4
> 
> 时间：2012-09-24T19:13:42.900
> 
> 标签：java, regex

我有一串有点奇怪的数字。我从中提取的源具有非标准格式，我正在尝试从 .split 切换，我需要在其中指定精确的拆分方法（2 个空格、3 个空格等），以替换所有正则表达式。

我的数据如下所示：

```
23574     123451    81239   1234    19274  4312457     1234719 
```

我想结束

```
23574,xxxxx,xxxxx,xxxx 
```

所以我可以在 , 上做一个 String.split

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T19:18:20.780

我将使用正则`\s`表达式

这是它在 Java 上的用法

```
String[] numbers = myString.split("\\s+"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:17:26.537

```
final Iterable<String> splitted = Splitter.on('').trimResults().omitEmptyStrings().split(input);
final String output = Joiner.on(',').join(splitted); 
```

与番石榴[`Splitter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)和[`Joiner`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T19:23:31.773

```
String pattern = "(\s+)";
Pattern regex = Pattern.compile(pattern);
Matcher match = r.matcher(inputString);
match.replaceAll(",");
String stringToSplit = match.toString(); 
```

我认为这应该为你做。如果没有，在 java api 中搜索 Matcher 和 Pattern 类将非常有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-20T23:07:58.390

我将此问题理解为一种从带有空白（不仅是空格）分隔符的字符串中获取整数的方法。

`\t`例如，如果分隔符是 TAB 或结尾有一个，则可接受的解决方案不起作用`\n`。

如果我们将整数定义为数字序列，解决这个问题的最佳方法是使用简单的正则表达式。检查[Java 8 Pattern API](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)，我们可以发现它`\D`代表任何非数字字符：

> ```
> \D  A non-digit: [^0-9] 
> ```

因此，如果该`String.split()`方法接受带有可能分隔符的正则表达式，则很容易将其发送`"\\D+"`到修剪后的字符串并像这样一次性获得结果。

```
String source = "23574     123451    81239   1234    19274  4312457     1234719";
String trimmed = source.trim();
String[] numbers = trimmed.split("\\D+"); 
```

它被翻译为***使用任何非数字字符序列作为可能的分隔符拆分此修剪后的字符串***。

# mpmediaitem - valueForProperty 上的 MPMediaItem 崩溃

> ID：12571340
> 
> 赞同：1
> 
> 时间：2012-09-24T19:13:44.263
> 
> 标签：mpmediaitem, mpmediaquery

我在从 iPod 库中获取歌曲信息时遇到了一个大问题。按照苹果官方参考：

```
MPMediaQuery *query = [MPMediaQuery songsQuery]; // query is an autorelease object
NSArray *itemsFromGenericQuery = [everything items];
for (MPMediaItem *song in itemsFromGenericQuery) {
NSString *songTitle = [song valueForProperty: MPMediaItemPropertyTitle];
NSLog (@"%@", songTitle);
} 
```

经过一些调试，我发现 itemsFromGenericQuery 没有 nil 值。问题在于，在具有大约 1000 首歌曲的库的 3.x 设备上，花费太多内存来执行该过程并且它崩溃（或在单个 nil 值上崩溃）。我该如何解决？

# javascript - 单行辅助函数中是否存在或是否存在 Javascript addEventListener 多个参数？

> ID：12571341
> 
> 赞同：1
> 
> 时间：2012-09-24T19:13:46.833
> 
> 标签：javascript, function, events, addeventlistener, dom-events

是否有或者已经有一些东西，可以让我为不同的元素添加具有多个功能的多个事件侦听器......在一行上？也许一个例子可以帮助我解释......

我在我的代码中遇到了这样的情况：

```
inputUrl.addEventListener ('keydown', saveOptions);
inputUrl.addEventListener ('keydown', resizeInput);

inputUrl.addEventListener ('keyup', saveOptions);
inputUrl.addEventListener ('keyup', resizeInput);

inputUrl.addEventListener ('click', saveOptions);
inputUrl.addEventListener ('click', resizeInput);

inputDirectory.addEventListener ('keydown', saveOptions);
inputDirectory.addEventListener ('keydown', resizeInput);

inputDirectory.addEventListener ('keyup', saveOptions);
inputDirectory.addEventListener ('keyup', resizeInput);

inputDirectory.addEventListener ('click', saveOptions);
inputDirectory.addEventListener ('click', resizeInput); 
```

在此过程中使用一些东西来缩短代码似乎非常好！

```
makeEvents("inputUrl,inputDirectory|saveOptions,resizeInput|keydown,keyup,click") 
```

我希望这是有道理的。有任何想法吗？如果这样的事情已经存在，我想知道。否则，也许我可以创建一个辅助函数（称为 makeEvents 或其他东西），它会拆分字符串，然后为每个元素，然后是每个函数，附加每个事件？

我知道我现有的代码逻辑目前并不完全有意义，但我很好奇这是否可以轻松完成或已经存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:25:34.190

尝试以下操作：

```
inputUrl.addEventListener ('keyup', function() { saveOptions(); resizeInput(); }); 
```

这样，“keyup”事件将调用这两个函数，并且您可以更好地控制调用它们的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:27:15.203

jquery可以将多个事件绑定到多个元素

```
$(inputUrl).add(inputDirectory).bind("keydown, keyup, click", function(){
     resizeInput(this);     
     saveOptions(this);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:21:11.493

你很幸运有人发明了函数

```
function setupEvents(element, action)
{
    element.addEventListener("keydown", action);
    element.addEventListener("keyup", action);
    element.addEventListener("click", action);
}

function setupActions(element)
{
    setupEvents(element, saveOptions);
    setupEvents(element, resizeInput);
}

setupActions(inputUrl);
setupActions(inputDirectory); 
```

# android - 在 2 列上具有 2 个条件的 SQLite 查询

> ID：12571344
> 
> 赞同：1
> 
> 时间：2012-09-24T19:13:58.330
> 
> 标签：android, sqlite

嗨，有没有可能像这样构造 SQLite 查询 `SELECT * FROM master WHERE (age=1 OR age=4) AND WHERE city LIKE '%Bo%'`

此查询的正确版本或对 2 列的查询是不可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:15:11.220

是的。但是，您只能使用`WHERE`一次关键字，只需像这样组合您的条件：

```
SELECT * FROM master WHERE (age=1 OR age=4) AND city LIKE '%Bo%' 
```

# objective-c - 在 iOS 4.3 向后兼容应用程序的对象中包含 iOS 6 属性？

> ID：12571345
> 
> 赞同：1
> 
> 时间：2012-09-24T19:13:58.097
> 
> 标签：objective-c, ios, facebook, ios6

我正在向现有应用程序添加一些 iOS 6 功能——特别是内置的 facebook 集成。但是，我需要我的应用程序保持与 iOS 4.3 的向后兼容性。

在大多数代码中，我了解如何使用 respondsToSelector 来处理这个问题；我也理解弱链接社交和帐户框架，因此只有在可用时才会加载它们。

不过，我不知道的是：为了启用 Facebook 集成，我需要向我的“ShareViewController”添加一个属性——它处理我的应用程序的所有共享——以保存组合表，即：

`SLComposeViewController *mySLComposerSheet;`

但是，SLComposeViewController 是一个只存在于 iOS6 中的类。所以本质上，我只需要在用户运行 iOS 6 时才存在该属性。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:31:03.093

我建议你使用`NSClassFromString`and `[UIDevice isSystemVersionHigherOrEqualTo:@"6.0"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:25:05.893

它会起作用的。属性/ivar 中有一些引用类名的元数据，但它实际上并没有链接到类或在运行时导致错误。

当然，*总是*测试！

# apache - 在 Prestashop 1.4x 中应该将 htaccess 文件放在哪里？

> ID：12571346
> 
> 赞同：0
> 
> 时间：2012-09-24T19:13:59.470
> 
> 标签：apache, .htaccess, prestashop

我的 Prestashop 1.4x 安装在子目录中，例如： Apache 服务器上的[http://mydomain.com/prestashop/](http://mydomain.com/prestashop/) 。可以选择从管理员那里生成 Htaccess 文件，这些文件被复制到 /prestashop/ 目录中。它是正确的位置还是我应该将 htaccess 放入父（根）目录？

例子：

```
# .htaccess automaticaly generated by PrestaShop e-commerce open-source solution
# WARNING: PLEASE DO NOT MODIFY THIS FILE MANUALLY. IF NECESSARY, ADD YOUR SPECIFIC CONFIGURATION WITH THE HTACCESS GENERATOR IN BACK OFFICE
# http://www.prestashop.com - http://www.prestashop.com/forums

<IfModule mod_rewrite.c>
# URL rewriting module activation
RewriteEngine on

# URL rewriting rules
RewriteRule ^([a-z]{2})/([0-9]+)\-[a-zA-Z0-9-]*\.html /store/product.php?id_product=$2&isolang=$1 [QSA,L]
... ... ...
... ... ...
RewriteRule ^en/best-sales$ /store/best-sales.php?isolang=en [QSA,L]
RewriteRule ^en/page-not-found$ /store/404.php?isolang=en [QSA,L]
</IfModule>

# Catch 404 errors
ErrorDocument 404 /store/404.php

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-javascript "access plus 1 week"
    ExpiresByType image/x-icon "access plus 1 year"
</IfModule>

FileETag INode MTime Size
<IfModule mod_deflate.c>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/html text/css text/plain text/javascript application/javascript application/x-javascript
    </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:51:35.277

这是[http://mydomain.com/store/的正确位置](http://mydomain.com/store/)

# mysql - 为已经在使用的主键创建外键

> ID：12571350
> 
> 赞同：1
> 
> 时间：2012-09-24T19:14:21.907
> 
> 标签：mysql, foreign-keys

所以，这是我的输入，我正在设计一个医院数据库，我正在创建一个表，它将保存“患者”表中的患者和“房间”表中的房间之间的关系（聪明，我知道） .

这是用于声明两个表的语句：

```
create table patient_room
(
pr_id int NOT NULL PRIMARY KEY auto_increment,
patient_id int NOT NULL,
room_id int NOT NULL,
)ENGINE = InnoDB;

create table patients
(
patient_id int  primary key not null auto_increment,
fname varchar(30),
lname varchar(30),
suffix enum('I','II','III','IV','JR','SR'),
sex enum('M','F','U','T'),
eye_color enum('BK','BR','BL','GY','GR','HZ','MN','DX','UN'),
hair_color enum('BK','BR','BN','RD','WH','SN','BD','UN'),
date_of_birth date not null,
height int unsigned not null,
weight int unsigned not null,
admitted datetime not null
) Engine = InnoDB; 
```

这是我的替代声明

```
alter table patient_room add foreign key (patient_id) references patient(patient_id) on delete cascade on update cascade; 
```

我得到回报：

```
ERROR 1005 (HY000): Can't create table 'Mthomas.#sql-3dac_5f1' (errno: 150) 
```

我能够使用更改表来创建外键

```
alter table patient_room add foreign key (room_id) references room(room_id) on delete cascade on update cascade; 
```

没有错误。我确实在另一个 patient_meds 表上已经有 patient_id 作为外键，我认为这可能是问题所在……如果是这样？我该如何减轻它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:21:51.147

你的桌子被称为`patients`而不是`patient`。你需要改变

```
alter table patient_room add foreign key (patient_id) references patient(patient_id) on delete cascade on update cascade; 
```

到

```
alter table patient_room add foreign key (patient_id) references patients(patient_id) on delete cascade on update cascade;
                                                                        ^ 
```

# sql - 批量更新一对多关系rails 2.3.5 一条sql语句？

> ID：12571351
> 
> 赞同：0
> 
> 时间：2012-09-24T19:14:21.903
> 
> 标签：sql, ruby-on-rails, activerecord

假设用户有很多帐户，因此 user_id 在帐户表上。如果我想更新所有用户帐户并在 1 个 sql 调用中将它们提供给另一个用户，是否有“rails”方法来执行此操作？（不做executeSQL）

所以 Joel 有 1000 个帐户，Fred 没有帐户，Joel 想给 Fred 他所有的帐户，通常我可以遍历 joels 帐户并将它们分配给 fred 用户，但这会导致 1000 次 sql 调用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:32:22.943

```
fred.accounts += joel.accounts 
```

这将**立即**将所有帐户移出`joel`并将它们添加到任何现有帐户中`fred`。“立即”是指 SQL 将立即执行更新——您不需要另外保存正在移动的记录。

如果`fred`没有帐户，那也没关系，它仍然可以正常工作 - 它只会将`joel`' 帐户添加到`fred`' 的空帐户列表中。

这适用于“一对多”和“多对多”关系。

在一对多的情况下，它会为以前拥有的所有帐户更改表`user_id`上的字段。`accounts``joel`

在多对多情况下（帐户可以由多个用户共同拥有），它似乎只是为与零个或多个其他用户共同拥有的所有帐户更改`user_id`连接表上的字段（可能称为）。这有效地**替换**了与 .共同拥有的任何帐户。该帐户上的所有其他共同所有者似乎都不受影响。`accounts_users``joel`**`joel``fred`**

# cakephp - id 字段在 cakephp 中被截断

> ID：12571352
> 
> 赞同：0
> 
> 时间：2012-09-24T19:14:23.637
> 
> 标签：cakephp

我有一个“报告”功能，它提供了一个下拉选项和一个提交按钮。一旦选择了一个选项，它就会将该选项的 ID 传递给另一个名为“generatePatientInfo($id=null)”的函数，然后生成一个 csv。我的问题是 ID 在第一个数字之后被截断。单个数字 id 像 2,5,6,9 等都按照它们应该的方式工作，但是如果 ID 是 2044，它会将 id 截断为 2 并显示 id 为 2 而不是选择的信息2044\. 这很令人困惑，我不知道如何解决它。下面是我的控制器和操作的视图代码。

```
 function report(){
$this->set('alldrugs', $this->Drug->find('list', array(
  //'cache' => 'drugList',
  //'cacheConfig' => 'sql',
  'fields' => array('id', 'generic'),
  'order' => 'Drug.generic',
  'recursive' => -1,
)));
if (!empty($this->data['DrugCalls'])) {
  $this->Session->setFlash(sprintf($this->data['DrugCalls']['DrugList']['id']));
  //$this->redirect(array('controller'=>'drugs','action'=>'generatePatientInfo',$this->data['DrugCalls']['DrugList']['id']));
  }
  }

  function generatePatientInfo($id=null) {
    $this->layout = 'ajax';
    // get drug info
    $drug = $this->Drug->read(
      array(
        'Drug.id', 'Drug.generic'
      ),
      $id
    );
    $this->set('drug',$drug);
    $patients = $this->Drug->query('SELECT patients.id, calls.id call_id, patients.first_name, patients.last_name, patients.phone, patients.email, calls.created '
      . 'FROM drugs, drug_lactation_links, lactation, calls, patients '
      . 'WHERE drugs.id = ' . $id . ' AND drugs.id = drug_lactation_links.drug_id AND '
      . 'drug_lactation_links.lactation_id = lactation.id AND lactation.call_id = calls.id AND calls.patient_id = patients.id '
      . 'UNION '
      . 'SELECT patients.id, calls.id call_id, patients.first_name, patients.last_name, patients.phone, patients.email, calls.created '
      . 'FROM drugs, drug_pregnancy_links, pregnancies, calls, patients '
      . 'WHERE drugs.id = ' . $id . ' AND drugs.id = drug_pregnancy_links.drug_id AND '
      . 'drug_pregnancy_links.pregnancy_id = pregnancies.id AND pregnancies.call_id = calls.id AND calls.patient_id = patients.id '
      . 'ORDER BY created DESC'
    );
    $this->set(compact('patients'));
    $this->set('title_for_layout', 'Patient contact information for ' . $drug['Drug']['generic']);
  } 
```

意见：

```
<?php //report.ctp ?>
<div>

<?php echo $form->create('DrugCalls', array('url' => array('controller' => 'drugs', 'action' => 'report')));?>
<?php //echo $form->create('Patient Calls');?>
  <fieldset>
    <legend><?php printf('Calls for Generic Report'); ?></legend>
  <?php
    echo $form->input('DrugList', array('type' => 'select', 'id' => 'DrugList', 'label' => 'Select generic drug:',
      'empty' => 'Select', 'options' => $alldrugs)
    );
    echo '<br />NOTE: Select a drug above to generate a list of patients who called about it.' .
          '<br/>' . 'The report will need to be imported into Excel.';
    echo $form->end(__('Submit', true));
  ?>
  </fieldset>
</div>

<?php
//generate_patient_info.ctp
// add the header row
$header = array('First Name','Last Name','Phone Number','Email');

$csv->addRow(array('Enter Generic: ' . $drug['Drug']['generic']));
$csv->addRow(array('Drug ID: ' . $drug['Drug']['id']));
$csv->addRow($header);

// add all the data
foreach($patients as $patient) {
  $csv->addRow(array(
    $patient[0]['first_name'],
    $patient[0]['last_name'],
    $patient[0]['phone'],
    $patient[0]['email'],
  ));
}
$csv->addRow(array());

// render the CSV file
echo $csv->render('Patients-list.csv');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:27:38.423

我将其缩小到访问下拉列表信息的方式。在我的报告功能中，我访问不正确。我不得不将其更改为：`$this->data['DrugCalls']['DrugList']`而不是`$this->data['DrugCalls']['DrugList']['id']`

# c# - 如何编组多字节字符集 C#

> ID：12571355
> 
> 赞同：1
> 
> 时间：2012-09-24T19:14:31.280
> 
> 标签：c#, c++, string, marshalling

我需要调用一个使用 C# 中的多字节字符集的函数 (c/c++)。但我不知道如何将它编组为多字节。有谁知道如何将结果转换为字符串？

C＃：

```
[DllImport("essentials.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern System.IntPtr GetFiles(string filedir, string path);

        [STAThread]
        static void Main()
        {
            string filedir = @"C:\Users\Ruben\Documents\School\*";
            string path = @"C:\Users\Ruben\Documents\School\";
            System.IntPtr pointer = GetFiles(filedir, path);
            string files = Marshal.PtrToStringAnsi(pointer); // nothing
        } 
```

C++

```
extern "C"
{
    __declspec(dllexport) char* GetFiles(char* filedir, char* path)
    {
        string filedir2 = filedir;
        string path2 = path;
        string files = GetFiles2(filedir2, path2);
        char* Rfiles = new char[files.length() + 1];
        strcpy_s(Rfiles, files.length() + 1, files.c_str());
        return Rfiles;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:33:42.200

MSDN 上的信息：[字符串的默认封送处理](http://msdn.microsoft.com/en-us/library/s9ts558h%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:51:14.737

您首先需要编组 C# 字符串，试试这个：

```
[DllImport("essentials.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    public static extern System.IntPtr GetFiles
        ([MarshalAs(UnmanagedType.AnsiBStr)]string filedir,
        [MarshalAs(UnmanagedType.AnsiBStr)]string path); 
```

# regex - 正则表达式在字符串中第一次出现一个字符

> ID：12571364
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:15:25.910
> 
> 标签：regex, pcre

给定这个字符串：

```
domain.com/?services&dsadasdhk&hdahjkda&fdsfsdfdsd 
```

使用 PCRE 正则表达式如何匹配第一次出现的 amp(&) 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:20:31.620

你试一试

```
/&/ 
```

没什么特别的。

[在 Regexr 上](http://regexr.com?328n5)查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:18:48.240

这将允许您*捕获*该与号。

```
^[^&]*(&) 
```

如果你只想匹配而不捕获，你可以使用否定的lookbehind。

```
(?<!.*&.*)& 
```

# javascript - Javascript onclick 事件在 IE8 中不起作用

> ID：12571368
> 
> 赞同：0
> 
> 时间：2012-09-24T19:15:41.653
> 
> 标签：javascript, internet-explorer-8, onclick

我在我们的应用程序中有一个按钮，当您单击它时，会弹出一个弹出窗口，询问您是否确定要继续。通常，该代码将在我们的 HTML 中，但对于这个特定的弹出窗口，它必须在 Javascript 中。无论如何，弹出窗口在 Firefox、Chrome 和 IE9 中运行良好，但在 IE8 中不起作用。这是非常令人沮丧的。有没有人对如何解决这个问题有任何想法？这是我的代码：

```
function graphicalAppConfirm() { 
var graphical = $('#application_graphical').is(':checked');
  if (graphical == true) {
    $('.default_action').attr('onclick', "return confirm('This setting cannot be undone. Are you sure you wish to continue?')"); 
}
  else {
   $('.default_action').removeAttr('onclick'); 
  }
} 
```

我尝试使用 onmousedown 事件，这使得弹出窗口出现，但它不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:18:36.533

尝试使用绑定和取消绑定单击。您不一定关心属性。

```
function graphicalAppConfirm() { 
var graphical = $('#application_graphical').is(':checked');
  if (graphical == true) {
    $('.default_action').click(function() { return confirm('This setting cannot be undone. Are you sure you wish to continue?'); }); 
} else {
   $('.default_action').unbind('click'); 
  }
} 
```

如果您使用的是 jQuery 1.7+，那么建议使用 on/off 而不是 bind/unbind。请参阅文档[http://api.jquery.com/off/](http://api.jquery.com/off/)

更新：这是一个使用 jQuery 1.8 的示例，您可以根据自己的使用进行修改。当复选框更改时，您可能希望执行开/关功能，这就是本示例的工作方式。

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
</head>

<body>
  <button id="theone">Does nothing...</button>
  <label for="check"><input id="check" type="checkbox" />Enable Button</label>
  <div id="output" style="display:none;">Click registered.</div>

  <script>
    function callback() {
      $("#output").show().fadeOut("slow");
    }

    $("#check").change(function() {
      if (this.checked) {
        $("body").on("click", "#theone", callback)
          .find("#theone").text("Click Me Enabled!");
      } else {
        $("body").off("click", "#theone", callback)
          .find("#theone").text("Click Me Disabled");
      }
    });
  </script>

</body>

</html> 
```

你可以从那里找出其余的。您可以在 IE 8 [http://jsbin.com/ojejar/6中测试并查看它的工作原理](http://jsbin.com/ojejar/6)

# python - Python 字符串 LCS 错误

> ID：12571370
> 
> 赞同：1
> 
> 时间：2012-09-24T19:15:52.010
> 
> 标签：python, string, lcs

我非常接近完成我的程序，但我遇到了一个小问题。I/O 应该是这样的：

```
I: fanlc2("human", "chimpanzee")
O: [4, 'h#man', '#h#m#an###'] 
```

但是我的，执行以下操作：

```
I: fanlc2("human", "chimpanzee")
O: [4, '#', '#h#'] 
```

有人可以编辑我的代码，以便我得到正确的答案。我想不通。谢谢：

```
def fanlc2(S1, S2):
    if S1 == '' or S2 == '':
        return [0, S1, S2]
    if S1[0] == S2[0]:
        temp = fanlc2(S1[1:], S2[1:])
        return [temp[0]+1, S1[0]+temp[1], S2[0]+temp[2]]
    t1 = fanlc2(S1[1:], S2)
    t2 = fanlc2(S1, S2[1:])
    if t1[0] > t2[0] or t1[0] == t2[0]:
        return [t1[0], '#'+t1[1], t2[1]]
    return [t2[0], t1[1], '#'+t2[1]] 
```

以下是程序应该返回的更多 I/O：

fanlc2("x", "y")

[0, '#', '#']

fanlc2("垃圾邮件", "")

[0, '####', '']

fanlc2（“水疗中心”，“米”）

[0, "###", "#"]

fanlc2("猫", "汽车")

[2, "ca#, "ca#"]

fanlc2（“猫”，“lca”）

[2, "ca#", "#ca"]

fanlc2（“人类”，“黑猩猩”）

[4, 'h#man', '#h#m#an###']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:29:00.730

您只是在最后几行中混合了一些变量/索引。尝试使用更具描述性的变量名称，您将来可能会避免此问题。

```
if t1[0] > t2[0] or t1[0] == t2[0]:
    return [t1[0], '#'+t1[1], t1[2]]
return [t2[0], t2[1], '#'+t2[2]] 
```

# javascript - 此方法的 jQuery 等效项是什么

> ID：12571374
> 
> 赞同：3
> 
> 时间：2012-09-24T19:16:04.600
> 
> 标签：javascript, jquery

我需要知道你会如何调用`document.body.innerText;`和`document.body.innerHTML;`在 jQuery 中。jQuery如何处理以document.body开头的javascript方法...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:17:09.063

```
// document.body.innerText;
$('body').text(); 
```

[.text() 文档](http://api.jquery.com/text/)

```
//document.body.innerHTML;
$('body').html(); 
```

[.html() 文档](http://api.jquery.com/html/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T19:16:45.567

他们在这里 -[`text()`](http://api.jquery.com/text/)和[`html()`](http://api.jquery.com/html/)：

`$("body").text()`和`$("body").html()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T19:18:39.483

使用`$('body')`或`$(document.body)`选择主体。然后你可以使用`.text()`and`.html()`来获取相关内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:19:52.853

`$("id/class/name/document")`是选择，您可以使用(innerhtml `html()`) 和`text()`(innertext ) 到那里的内容。

1-[文本（）](http://api.jquery.com/text/)

```
<div class="demo">Demonstration Box</div>

The code $('.demo').text() would produce the following result: 
```

这是选择--^^^^^^^ ^^^^^^---上课内容`demo`

输出：

```
 Demonstration Box 
```

2- [html()](http://api.jquery.com/html/)

```
 <div class="demo"><p>Demonstration Box</p></div>

$("input").html("text"); will change the---^^^^^^^^^^^^^^^^^---to text 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:25:29.923

```
$('body').text(); // innertext
$('body').html();//innerhtml 
```

# c# - OracleConnection.Open 抛出 ORA-12541 TNS no listener

> ID：12571379
> 
> 赞同：10
> 
> 时间：2012-09-24T19:16:21.810
> 
> 标签：c#, oracle, oracle11g, database-connection, connection-string

所以我通过 C# 连接到外部服务器。我刚刚从这里在我的机器上安装了**Oracle 11g客户端：** [http](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html) ://www.oracle.com/technetwork/database/windows/downloads/index-090165.html （一个 255MB）。

在阅读了许多博客/问题后，我发现这篇文章很有用：

[http://dbaspot.com/oracle-faq/444787-ora-12541-tns-no-listener.html](http://dbaspot.com/oracle-faq/444787-ora-12541-tns-no-listener.html)

那么这是正确的吗？我什么都做不了。DBA 必须编辑**LISTENER.ORA**文件？

我的**tnsnames.ora**看起来像这样：

```
 TestingConnect=
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = TestHostName.us.local)(PORT = 1523))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = TEST)
    )
  ) 
```

它让我犯了错误：

```
Oracle.DataAccess.Client.OracleConnection connection = new Oracle.DataAccess.Client.OracleConnection();

connection.ConnectionString = "Data Source=TestHostName.us.local;Persist Security Info=True;" + "User ID=tesName;Password=test";

connection.Open() //Throwing ERR!!! 
```

我该怎么办？我感谢任何评论。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T19:22:25.547

您可以通过以下几种方式执行此操作：使用您的 TNSNames 文件，数据源应指定 TNSHosts 条目名称（tnsnames.ora 中第一个“=”之前的位），而不是主机名：

```
connection.ConnectionString = "Data Source=TestingConnect;Persist Security Info=True;" + "User ID=tesName;Password=test"; 
```

或者您可以将整个 TNS 条目放在连接字符串中，如下所示：

```
connection.ConnectionString = "Data Source=(DESCRIPTION = " +
    "(ADDRESS = (PROTOCOL = TCP)(HOST = TestHostName.us.local)(PORT = 1523))" +
    "(CONNECT_DATA =" + 
    "(SERVER = DEDICATED)" + 
    "(SERVICE_NAME = TEST))" + 
    ");Persist Security Info=True;User ID=tesName;Password=test"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T00:33:27.877

感谢您的输入。我改变了我的连接字符串，它工作。这是它的样子：

```
 private static string GetConnectionString()
    {
        return "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=TestHostName.us.local)(PORT=1523) ) )" +
               "(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=CCDB)));User id=UserName; Password=Password; enlist=false; pooling=false;";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-05T14:13:59.787

在我的情况下，当驱动器 C 已满时发生此错误，影响是 Oracle 服务运行不稳定..

```
Oracle.ManagedDataAccess.Client.OracleException (0x80004005): 
ORA-12541: TNS: No listener 
---> OracleInternal.Network.NetworkException (0x80004005): 
ORA-12541: TNS: No listener 
---> System.Net.Sockets.SocketException (0x80004005): 
No connection could be made because the target machine actively refused it {ServerIP}:1521 
at System.Net.Sockets.Socket.InternalEndConnect(IAsyncResult asyncResult) 
at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult) 
at System.Net.Sockets.TcpClient.EndConnect(IAsyncResult asyncResult) 
at OracleInternal.Network.TcpTransportAdapter.Connect(ConnectionOption conOption) 
at OracleInternal.Network.OracleCommunication.DoConnect(String tnsDescriptor) 
at OracleInternal.ServiceObjects.OracleConnectionImpl.Connect(ConnectionString cs, Boolean bOpenEndUserSession, String instanceName) 
at OracleInternal.ConnectionPool.PoolManager`3.CreateNewPR(Int32 reqCount, Boolean bForPoolPopulation, ConnectionString csWithDiffOrNewPwd, String instanceName) 
at OracleInternal.ConnectionPool.PoolManager`3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, String affinityInstanceName, Boolean bForceMatch) 
at OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, String affinityInstanceName, Boolean bForceMatch) 
at OracleInternal.ConnectionPool.OracleConnectionDispenser`3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword) 
at Oracle.ManagedDataAccess.Client.OracleConnection.Open() 
```

试试看，可能你的C盘也满了。

之后，[使用任务管理器重新启动一些 oracle 服务](https://stackoverflow.com/questions/13358656/oracle-client-ora-12541-tnsno-listener)检查 Mikael Holmgren 的答案

# jquery - 使用 jquery 显示具有自定义效果的 DIV

> ID：12571381
> 
> 赞同：0
> 
> 时间：2012-09-24T19:16:43.883
> 
> 标签：jquery

我的完整脚本正在运行，但是当我单击 div 时，div 没有隐藏，但我编写了代码来隐藏它....谁能告诉我我在哪里犯了错误。

这是我的代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
.lnkcss 
{
    margin-left:350px;
}

.BusyStyles
    {
        background-image: url('images/ajax-loader.gif');
        background-repeat: no-repeat; background-position: center center; 
    }

 #transition {

display:none;
position:absolute; top:50%; left:50%; z-index:50;
border:1px solid #666;
width:100px; height:100px;
}

</style>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#lnk').click(function (e) {
            $('body').append('<div id="transition"></div>').show();

            var $t = $('#transition'),
            to = $(this).offset(),
            td = $(document);

            //$t.children('div').css({ width: 100, height: 100 });
            $t.css({
                top: to.top + 50,
                left: to.left + 50,
                display: 'block'
            }).animate({
                top: td.height() / 2,
                left: td.width() / 2
            }, 600, function () {
                $(this).animate({
                    top: '-=75',
                    left: '-=50'
                }, 600);

                $(this).animate({
                    width: 250,
                    height: 200
                }, 600, function () {
                    $('#transition').addClass("BusyStyles");

                });
            });
            return false;
        });

        $('#transition').click(function (e) {
            alert('pp');
            $(this).hide();
        });
    });
</script>
</head>
<body>
<form id="form1" runat="server">
<a href="#" id='lnk' class="lnkcss">FeedBack</a>
</form>
</body>
</html>

$('#transition').click(function (e) {
            alert('pp');
            $(this).hide();
        }); 
```

我写了上面的行来隐藏 div，但是当我点击 div 时没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:18:42.557

`$('body').append('<div id="transition"></div>')`处理文档后将元素添加到页面需要`bind any event handlers`静态父元素。

```
$('#transition').click(function (e) {
    alert('pp');
    $(this).hide();
}); 
```

应改为

```
$('body').on('click', '#transition', function (e) {
    alert('pp');
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:22:42.190

该事件应用于当时存在的每个“#transition”元素，您尝试实例化处理程序。您目前没有这样的元素，因为它是动态创建的。

您可以在创建元素后立即应用事件处理程序：

[http://jsfiddle.net/Du5k8/](http://jsfiddle.net/Du5k8/)

# java - 使用 CAMERA - Android 时应用程序崩溃

> ID：12571391
> 
> 赞同：3
> 
> 时间：2012-09-24T19:18:07.840
> 
> 标签：java, android, android-contentprovider, android-cursor

我编写了一个应用程序，它应该拍照然后在屏幕上显示以进行修改。在 eclipse 模拟器上尝试时，相机无法工作，所以我在 Galaxy Nexus 智能手机上尝试。

然而，当在我的 SP 上运行它时，应用程序会崩溃说`it unfortunally stopped working`。

执行应用程序时，这正是发生的情况：

1.  我点击相机按钮，相机界面被打开
2.  拍照后，我可以选择丢弃或打开它
3.  如果我单击放弃应用程序将恢复正常使用
4.  如果我点击打开应用程序崩溃如上所述

我google了一下，发现你需要使用硬件设备的权限[检查here](http://developer.android.com/tools/device.html)，所以我创建了文件`/etc/udev/rules.d/51-android.rules`，这是它的内容：

> SUBSYSTEM=="USB", ATTR{IDVENDOR}=="18d1", MODE="0666, "GROUP="plugdev" SUBSYSTEM=="USB", ATTR{IDVENDOR}=="04e8", MODE="0666, "GROUP="plugdev" SUBSYSTEM=="USB", ATTR{IDVENDOR}=="0bb4", MODE="0666, "GROUP="plugdev"

但是我仍然无法使用相机。

以下是我在清单文件中声明的权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

这是我用来启动相机意图的代码：

```
//create new Intent     
Intent cameraIntent = new Intent( android.provider.MediaStore.ACTION_IMAGE_CAPTURE );

//get something back from the activity we are starting
startActivityForResult( cameraIntent, CAMERA_PICTURE_REQUEST ); 
```

这是处理结果的代码：

```
public void onActivityResult( int requestCode, int resultCode, Intent imageReturnedIntent ) 
{

    if( resultCode == RESULT_OK ) 
    {
        if( requestCode == GALLERY_PICTURE_REQUEST ) 
        {

            selectedImageUri = imageReturnedIntent.getData();

            Log.d( TAG, selectedImageUri );

            Intent intent = new Intent( DVAHLUI_SuperviseActivity.this, DVAHLUI_SelectImageContentActivity.class );

            intent.setData( selectedImageUri );
            startActivity( intent );

        }

        if( requestCode == CAMERA_PICTURE_REQUEST ) 
        {

            selectedImageUri = imageReturnedIntent.getData();
            Log.d( TAG, selectedImageUri );

            Intent intent = new Intent( DVAHLUI_SuperviseActivity.this, DVAHLUI_SelectImageContentActivity.class );

            intent.setData( selectedImageUri );
            startActivity( intent );

        }
    }
} 
```

这是导致 Java Null 指针异常的 getPath() 函数：

```
public String getPath( Uri uri ) 
{
    String[] filePathColumn = { android.provider.MediaStore.Images.Media.DATA };

LINE 343 -->    Cursor cursor = getContentResolver().query( uri, filePathColumn, null, null, null );
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndexOrThrow( filePathColumn[0] );
    String filePath = cursor.getString( columnIndex );

    cursor.close();

    return filePath;

} 
```

你能告诉我出了什么问题吗？

**FOGOT 发布 LOGCAT：**

```
E/AndroidRuntime(27859): FATAL EXCEPTION: main
E/AndroidRuntime(27859): java.lang.RuntimeException: Failure delivering result ResultInfo{who=supervise, request=1, result=-1, data=Intent { act=inline-data (has extras) }} to activity {com.DVA_HLUI/com.DVA_HLUI.DVAHLUI_TabModeActivity}: java.lang.NullPointerException 
E/AndroidRuntime(27859):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3141)
E/AndroidRuntime(27859):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
E/AndroidRuntime(27859):    at android.app.ActivityThread.access$1100(ActivityThread.java:130)
E/AndroidRuntime(27859):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
E/AndroidRuntime(27859):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(27859):    at android.os.Looper.loop(Looper.java:137) E/AndroidRuntime(27859):     at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(27859):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(27859):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(27859):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(27859):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(27859):    at dalvik.system.NativeStart.main(Native Method) 
E/AndroidRuntime(27859): Caused by: java.lang.NullPointerException 
E/AndroidRuntime(27859):    at android.content.ContentResolver.acquireUnstableProvider(ContentResolver.java:1094)
E/AndroidRuntime(27859):    at android.content.ContentResolver.query(ContentResolver.java:354)
E/AndroidRuntime(27859):    at android.content.ContentResolver.query(ContentResolver.java:313)
E/AndroidRuntime(27859):    at com.DVA_HLUI.DVAHLUI_SuperviseActivity.getPath(DVAHLUI_SuperviseActivity.java:343)
E/AndroidRuntime(27859):    at com.DVA_HLUI.DVAHLUI_SuperviseActivity.onActivityResult(DVAHLUI_SuperviseActivity.java:312)
E/AndroidRuntime(27859):    at android.app.ActivityGroup.dispatchActivityResult(ActivityGroup.java:122)
E/AndroidRuntime(27859):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3137)
E/AndroidRuntime(27859):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:48:46.790

听起来和看起来您不允许系统自行更新已创建新媒体文件。这就是你的方法失败的原因。您可以手动创建图像文件路径，以便在文件树上拥有图像位置，也可以调用媒体服务来运行更新。我总是创建自己的文件路径，因为旧手机需要更长时间才能使用媒体服务进行更新，因此在这种情况下您的方法会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:07:53.747

显然，这次崩溃是由于三星的一个已知问题：似乎您需要`Uri`在调用相机意图之前创建一个，这样在运行该`onActivityResult`方法时，内容提供者将已经分配了保存资源的位置。

有关更多信息，请检查以下内容：

*   [我的 Android 相机 Uri 返回一个空值，但三星修复程序已经到位，帮助？](https://stackoverflow.com/questions/8248327/my-android-camera-uri-is-returning-a-null-value-but-the-samsung-fix-is-in-place)
*   [Android：startActivityForResult 始终为空并强制关闭我的应用](https://stackoverflow.com/questions/5241171/android-startactivityforresult-always-null-and-force-close-my-app)
*   [WordPress链接](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)
*   [Android三星：相机应用程序不会返回intent.getData()](https://stackoverflow.com/questions/4989010/android-samsung-camera-app-wont-return-intent-getdata)

还有更多通过谷歌搜索......

PS我会尽快发布对我有用的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T04:17:02.370

我知道现在回答它已经很晚了，但我尽快找到了我回答的答案，所以请至少检查一下。

[AndroidCameraUtil](https://github.com/ralfgehrer/AndroidCameraUtil)可能是每个设备的简单易用的解决方案，下面是您可以与库一起使用的代码片段

```
 private void setupCameraIntentHelper() {
    mCameraIntentHelper = new CameraIntentHelper(this, new CameraIntentHelperCallback() {
        @Override
        public void onPhotoUriFound(Date dateCameraIntentStarted, Uri photoUri, int rotateXDegrees) {
            messageView.setText(getString(R.string.activity_camera_intent_photo_uri_found) + photoUri.toString());

            Bitmap photo = BitmapHelper.readBitmap(CameraIntentActivity.this, photoUri);
            if (photo != null) {
                photo = BitmapHelper.shrinkBitmap(photo, 300, rotateXDegrees);
                ImageView imageView = (ImageView) findViewById(de.ecotastic.android.camerautil.sample.R.id.activity_camera_intent_image_view);
                imageView.setImageBitmap(photo);
            }
        }

        @Override
        public void deletePhotoWithUri(Uri photoUri) {
            BitmapHelper.deleteImageWithUriIfExists(photoUri, CameraIntentActivity.this);
        }

        @Override
        public void onSdCardNotMounted() {
            Toast.makeText(getApplicationContext(), getString(R.string.error_sd_card_not_mounted), Toast.LENGTH_LONG).show();
        }

        @Override
        public void onCanceled() {
            Toast.makeText(getApplicationContext(), getString(R.string.warning_camera_intent_canceled), Toast.LENGTH_LONG).show();
        }

        @Override
        public void onCouldNotTakePhoto() {
            Toast.makeText(getApplicationContext(), getString(R.string.error_could_not_take_photo), Toast.LENGTH_LONG).show();
        }

        @Override
        public void onPhotoUriNotFound() {
            messageView.setText(getString(R.string.activity_camera_intent_photo_uri_not_found));
        }

        @Override
        public void logException(Exception e) {
            Toast.makeText(getApplicationContext(), getString(R.string.error_sth_went_wrong), Toast.LENGTH_LONG).show();
            Log.d(getClass().getName(), e.getMessage());
        }
    });
}

@Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    mCameraIntentHelper.onSaveInstanceState(savedInstanceState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    mCameraIntentHelper.onRestoreInstanceState(savedInstanceState);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    mCameraIntentHelper.onActivityResult(requestCode, resultCode, intent);
}
} 
```

# php - smtp, phpinfo, 发送邮件

> ID：12571392
> 
> 赞同：1
> 
> 时间：2012-09-24T19:18:14.287
> 
> 标签：php, smtp, phpinfo

我正在尝试使用 PHPmailer 发送电子邮件，但是当我在 php.ini 中更改 SMTP 服务器时，它并没有在 phpinfo 中更新 - 它仍然显示 localhost。我假设这就是我收到错误的原因`SMTP Error: Could not connect to SMTP host`。

你能帮我找出我无法更改 SMTP 服务器的错误和可能原因吗，即使我可以更改 smtp_port

我已经尝试过使用邮件服务器执行此操作，并且安装 pear 也遇到了很多麻烦，所以我只想完成这项工作。我试过`smtp.mail.yahoo.com`,`smtp.gmail.com`和我们自己的邮件服务器，它仍然显示为 localhost。每次进行更改时，我也重新启动

这是我诊断发送简单电子邮件问题的第三天（我发现在 asp.net 中更容易）。如果您需要任何进一步的信息，请告诉我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:39:58.287

可能是一个愚蠢的问题，但是您使用的是正确的 php.ini 文件吗？- 在许多安装中，周围可能不止一个。我总是仔细检查我正在更改的 php.ini 文件是否是 phpinfo() 中引用的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:45:20.720

进一步考虑这一点，我正在使用 phpmailer，但没有费心在 php.ini 中设置 smtp 服务器。相反，我创建了一个扩展 phpmailer 的新类，并在其中指定我的 SMTP 设置，如下所示。

这允许我为多个站点配置 SMTP 设置，而无需接触 php.ini 或标准 phpmailer 文件。

```
<?php
require_once('initialise.inc.php');  // Initialising constants including LIB_PATH & DS
require_once(LIB_PATH.DS."phpmailer".DS."class.phpmailer.php");
require_once(LIB_PATH.DS."phpmailer".DS."class.smtp.php");

class my_phpmailer extends phpmailer {

    public $From = "me@example.com"; // Email Address
    public $FromName = "My Name"; // Name
    public $Host = "mailserver.example.com";
    public $Mailer = "smtp";
    public $WordWrap = 75;
    public $Username = "***************"; // SMTP account username
    public $Password = "********"; // SMTP account password

    function __construct() {
    }

    public function __toString() {
    return $this;
    } 
```

# mysql - Windows XP 上的 OpenCart 错误

> ID：12571399
> 
> 赞同：0
> 
> 时间：2012-09-24T19:18:38.500
> 
> 标签：mysql, opencart

我正在尝试使用 PHP 5.4.7、MySQL 5.5 和 Apache 2.2 在我的虚拟机上安装 Open Cart。经过很多麻烦，我已经设法在安装脚本执行的那一刻到达，但我收到了这个问题：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL    server version for the right syntax to use near 'ï»¿/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */' at line 1 
```

老实说，我被困住了。我试图在 Workbench 中执行代码并且它可以工作，除了在 INSERT INTO 查询测试数据中他们错过了 NOT NULL 列的默认值。

提示？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:24:38.507

SQL 开头的那些随机字符是 UTF 字节顺序标记。你用来编辑文件的东西决定在一开始就发出它。摆脱它的最快方法是获取[Notepad++](http://notepad-plus-plus.org/)，在其中打开文件，选择“Encoding->Enocde in UTF-8 without BOM”，然后重新保存文件，然后重试。

# scala - 将一堆 if 替换为模式匹配

> ID：12571401
> 
> 赞同：1
> 
> 时间：2012-09-24T19:18:42.523
> 
> 标签：scala, functional-programming

如果在 scala 中有以下内容：

myList 是一些 List[String]

```
if (myList.isEmpty) return x > 5
if x < 0 return false
if (myList.head == "+") return foo()
if (myList.head == "-") return bar() 
```

是否可以通过模式匹配来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:25:13.113

这有点尴尬，但应该工作：

```
myList match {
  case Nil => x > 5
  case _ if x < 0 => false
  case "+" :: _ => foo()
  case "-" :: _ => bar()
} 
```

请注意，您的匹配并不*详尽*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T19:30:51.017

对我来说，这个更漂亮：

```
if(x > 0) {
  myList.headOption match {
    case Some("+") => foo()
    case Some("-") => bar()
    case None => x > 5
} else false 
```

但是我不确定这是否不符合逻辑流程（例如，当列表为空时提前退出——在您的上下文中它是否破坏了某些东西？），如果是这样，请随意说或否决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T19:29:11.873

也就是说，您可以匹配空列表，也可以匹配列表内的项目。如果您只需要一个不匹配的条件，请使用`case _ if ...`：

```
def sampleFunction: Boolean =
  lst match {
    case Nil            => x > 5
    case _ if (x < 0)   => false
    case "+" :: _       => true
    case "-" :: _       => false
    case _              => true // return something if nothing matches
  } 
```

# php - Codeigniter - 无法命中类中的方法

> ID：12571406
> 
> 赞同：3
> 
> 时间：2012-09-24T19:18:51.683
> 
> 标签：php, jquery, ajax, codeigniter

这是我的第一个 CI 项目，请见谅。

我根本无法使用 AJAX 调用来实现方法。它在 Web Inspector 中不断出现 404。

我有一个名为“home.php”的控制器。它正在工作。我可以登陆我的主页。

然后我在悬停事件上触发了这个 AJAX 调用

```
function showDataWindow(){
    // i might switch this to data attr, but for now item IDs are contained in class
    var thisClass = $(this).attr('class');
    var thisIDpos = thisClass.indexOf("id-")+3;
    var thisID = thisClass.substr(thisIDpos, 3);
    alert(thisID); // alerting correctly
    $.post('getMoreInfo', { ID: thisID},
        function(data) {
             .. act on data 
```

我只是可以找到我正在调用的方法 - getMoreInfo。总是 404。

我的控制器中有一个 home.php 类，它设置为我的默认值，它可以工作，因为我登陆我的主页并获取索引。但在那个家庭控制器中也是我的 getMoreInfo 功能......

```
public function getMoreInfo()
{
    $ID = $_POST['ID'];
    $this->load->model('Artist_model');
    $assocReturned = $this->Artist_model->get_more_info($ID);
    echo json_encode($assocReturned);
} 
```

而且我觉得有一个小小的 MC Hammer 保护着这个功能。“你不能碰这个”。他穿着他的降落伞小裤讥笑我，还有微不足道的褪色。

我认为这一定是我在 Jquery AJAX 帖子中如何处理我的 URI？我在我的 htaccess 中重写了索引（我对此有点模糊）

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

但是我已经尝试了该 AJAX 调用中的几乎所有 URI 排列

```
www.mySite.com/index.php/home/getMoreInfo
index.php/home/getMoreInfo
index.php/getMoreInfo
/home/getMoreInfo
home/getMoreInfo
/getMoreInfo
getMoreInfo 
```

！

没有一个奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:29:16.517

您必须调用的内容取决于您的路由器的配置方式。

默认呼叫是`/home/getMoreInfo`，但如果您重新配置了路由器，则可以更改。参考：[http ://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

# ruby-on-rails - Rails 3：我应该在 after_create 回调中显式保存对象吗？

> ID：12571414
> 
> 赞同：7
> 
> 时间：2012-09-24T19:19:37.130
> 
> 标签：ruby-on-rails, ruby, callback

相关代码： http: [//pastebin.com/EnLJUJ8G](http://pastebin.com/EnLJUJ8G)

```
class Task < ActiveRecord::Base
  after_create :check_room_schedule

  ...

  scope :for_date, lambda { |date| where(day: date) }
  scope :for_room, lambda { |room| where(room: room) }

  scope :room_stats, lambda { |room| where(room: room) }
  scope :gear_stats, lambda { |gear| where(gear: gear) } 

  def check_room_schedule
    @tasks = Task.for_date(self.day).for_room(self.room).list_in_asc_order
    @self_position = @tasks.index(self)

    if @tasks.length <= 2
      if @self_position == 0 
        self.notes = "There is another meeting in 
    this room beginning at # {@tasks[1].begin.strftime("%I:%M%P")}."
        self.save
      end
    end
  end

  private

    def self.list_in_asc_order
      order('begin asc')
    end
end 
```

我正在制作一个小任务应用程序。每个任务都分配到一个房间。添加任务后，我想使用回调来检查在我刚刚添加的任务之前和之后在同一个房间中是否有任务（尽管我的代码现在只处理一个边缘情况）。

所以我决定使用 after_create （因为如果他们编辑它，用户将手动检查它，因此不是 after_save）所以我可以使用两个范围和一个类方法来查询当天的任务，在房间里，并订购它们时间。然后我在数组中找到对象并开始使用 if 语句。

我必须明确保存对象。有用。但是我这样做感觉很奇怪。我不是太有经验（第一个应用程序），所以我不确定这是不赞成还是约定俗成。我搜索了一堆并翻阅了一本参考书，但我没有看到任何具体的内容。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:24:04.910

`before_create`这对我来说似乎是一项任务。如果您必须保存`after_*`回调，您可能打算使用`before_*`回调。

在`before_create`您不必调用`save`，因为保存发生在回调代码为您运行之后。

与其保存然后查询是否获得 2 个或更多对象返回，不如在保存之前查询一个会发生冲突的对象。

在伪代码中，您现在拥有的内容：

```
after creation
  now that I'm saved, find all tasks in my room and at my time
  did I find more than one?
    Am I the first one?
      yes: add note about another task, then save again
      no: everything is fine, no need to re-save any edits 
```

你应该拥有的：

```
before creation
  is there at least 1 task in this room at the same time?
    yes: add note about another task
    no: everything is fine, allow saving without modification 
```

更像这样的东西：

```
before_create :check_room_schedule
def check_room_schedule
  conflicting_task = Task.for_date(self.day)
                         .for_room(self.room)
                         .where(begin: self.begin) # unsure what logic you need here...
                         .first
  if conflicting_task
    self.notes =
      "There is another meeting in this room beginning at #{conflicting_task.begin.strftime("%I:%M%P")}."
  end
end 
```

# c# - 使用未知数量的变量进行搜索以与 EF linq 匹配的最有效方法是什么？

> ID：12571415
> 
> 赞同：0
> 
> 时间：2012-09-24T19:19:37.473
> 
> 标签：c#, linq, entity-framework, lambda

我正在使用实体框架，并且正在制作一种最多可以接收三个变量的方法

```
public SearchTable(int var1, int var2, int var3) 
```

我希望能够使用实体框架执行 where，但仅限于传入的变量。

因此，如果所有三个都传入，它将是这样的：

```
var results = entities.vw_ToSearch.Where(x => x.var1 == var1 && x.var2 == var2 && x.var3 == var3); 
```

但是如果例如 var2 作为 null 传入并且没有值，我希望它只在 var1 和 var2 上执行 where。

我开始写这篇文章，为每种可能性制作一个不同的 where 语句，并打算做一堆 if 语句来检查使用哪个，但似乎有更好的方法来做到这一点，我没有想到。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:05:29.757

由于您正在对谓词进行与运算，因此您可以应用以下逻辑：

```
IQueryable<vw_ToSearchItem> results = entities.vw_ToSearch;
if (x.var1.HasValue)
   results = results.Where(x => x.var1 == var1);
if (x.var2.HasValue)
   results = results.Where(x => x.var2 == var2);
if (x.var3.HasValue)
   results = results.Where(x => x.var3 == var3); 
```

这种方法的优点是您只需将所需的过滤器传递给数据库，而不需要它对每一行进行可空性检查（可能会导致表扫描而不是利用已建立的索引）。与大多数性能问题一样，您需要评估每种方法生成的执行计划，以确定哪种方法最适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:24:03.607

一种选择可能是使用[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:56:24.067

```
Where( x => x.var1==var1 &&
    (var2 == null || x.var2 == var2)) 
```

添加“随意”超过 2...

# eclipse - Eclipse 中用于将文件从一个编辑器移动到另一个编辑器的键盘快捷键

> ID：12571416
> 
> 赞同：5
> 
> 时间：2012-09-24T19:19:40.433
> 
> 标签：eclipse, keyboard, shortcut

有谁知道 Eclipse 中是否有一个按键，如果您有两个编辑器窗格，则将您正在查看的文件从它所在的编辑器窗格移动到另一个？

**用例：**我打开了三个文件：两个在左边，一个在右边。我在看左边的一个。我按下它，它将文件从左向右移动，所以现在左边有一个，右边有两个。

# python - 在 Python 中递归复制文件

> ID：12571418
> 
> 赞同：1
> 
> 时间：2012-09-24T19:19:51.280
> 
> 标签：python

我希望复制整个目录及其文件，但还要打印正在复制的每个文件名。

我使用了一个简单的调用`cp -rf dir dest`with`os.system`但我不能单独打印每个文件名，因为很明显。

然后我考虑通过递归调用 ls 来列出 eash 目录文件`os.system`，保存整个字符串，将它们拆分为一个数组，并实现一个 for 循环来运行 os.system("cp" file1 + "des/") 并打印文件名，但看起来工作量很大。

有更好的想法来实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:27:21.747

您可以使用`os.walk`获取整个目录列表并使用该列表迭代地复制所有文件。就像是

```
file_paths = [os.path.join(root, f) for root, _, files in os.walk('.') for f in files]
for path in file_paths:
    print path
    shutil.copy(path, target) 
```

或者根据`MatthewFranglen`你的评论你可以这样做`shutil.copytree(src, dst)`。这也将允许您忽略某些事情，但您需要定义一个函数来执行此操作，而不是在列表推导中使用 if。

```
# ignore all .DS_Store and *.txt files
file_paths = [os.path.join(root, f) for root, _, files in os.walk('.') for f in files if (f != '.DS_Store') or f.endswith('.txt'))] 
```

相比

```
from shutil import copytree, ignore_patterns
ignore_func = ignore_patterns('.DS_Store', '*.txt')  # ignore .DS_Store and *.txt files
copytree('/path/to/dir/', '/other/dir', ignore=ignore_func) 
```

# objective-c - NSData 到 NSString 的转换？

> ID：12571419
> 
> 赞同：1
> 
> 时间：2012-09-24T19:19:52.667
> 
> 标签：objective-c, ios

我正在使用以下代码将 NSData 转换为 NSString

```
NSData *videodata=-----?

NSString *urlstring = [[NSString alloc] initWithData:videodata encoding:NSUTF8StringEncoding] ; 
```

我也试过

```
NSString *urlstring= [NSString stringWithUTF8String:[videodata bytes]]; 
```

但两者都返回空值。还有其他过程吗。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:26:29.423

```
NSData *somedata = [NSData data];
NSString *str = [[NSString alloc] initWithData:somedata encoding:NSUTF8StringEncoding]; 
```

或者用数据的编码替换编码

# iphone - Facebook SDK iPhone、好友列表

> ID：12571423
> 
> 赞同：1
> 
> 时间：2012-09-24T19:20:03.353
> 
> 标签：iphone, objective-c, facebook, cocoa-touch, sdk

我有一个问题。我想通过 facebook 分享我的应用程序中的照片。分享到我的墙上没有问题，但是有没有可能分享到朋友的墙上？像点击分享按钮，登录，选择朋友并在他们的墙上分享？我一直在应用商店中搜索可以做到这一点的应用程序，但我一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:52:45.853

You can post to a user's friend's feed using the Graph API, assuming the user granted you the relevant (publish_stream) permissions.

```
POST /[friend]/feed

message=hello&picture=http://... 
```

I should stress strongly that users consider this very spammy behavior for apps, and it is not generally recommended.

Source: [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# javascript - BOOTSTRAP 工具提示多实例不起作用

> ID：12571433
> 
> 赞同：1
> 
> 时间：2012-09-24T19:20:59.220
> 
> 标签：javascript, jquery, dom, twitter-bootstrap

我正在尝试使用 tooltip() 并打开多实例，如下所示：

```
$("*").tooltip({
    selector: "*[rel=tooltipTOP]",
    placement: "top"
  });
  $('*').tooltip({
    selector: "*[rel=tooltipBOTTOM]",
    placement: "bottom"
  }); 
```

然后在html中我做例如

```
<a rel="tooltipTOP" data-original-title="top">tooltip TOP</a>
<a rel="tooltipBOTTOM" data-original-title="bottom">tooltip BOTTOM</a> 
```

所以 tooltip TOP 没问题，但是 tooltipBOTTOM 不显示 tooltip ... 为什么？

我也尝试为 tooltipBOTTOM 放置特定类，但它不起作用，它仅实例化 tooltipTOP rel ：/

JSFIDDLE [http://jsfiddle.net/BH2GM/1/](http://jsfiddle.net/BH2GM/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T19:35:21.427

***HTML***

```
 <ul class="bs-docs-tooltip-examples">
                  <li><a href="#" rel="tooltip" data-placement="top" data-original-title="Tooltip on top">Tooltip on top</a></li>
                  <li><a href="#" rel="tooltip" data-placement="right" data-original-title="Tooltip on right">Tooltip on right</a></li>
                  <li><a href="#" rel="tooltip" data-placement="bottom" data-original-title="Tooltip on bottom">Tooltip on bottom</a></li>
                  <li><a href="#" rel="tooltip" data-placement="left" data-original-title="Tooltip on left">Tooltip on left</a></li>
</ul> 
```

***JS***

```
$('a').tooltip(); 
```

***[演示](http://jsfiddle.net/abaksheyev/4QawG/1/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:35:15.600

首先，你为什么要这样做`rel`？你真的应该使用类。

```
<a class="tooltipTOP">tooltip TOP</a>
<a class="tooltipBOTTOM">tooltip BOTTOM</a> 
```

进而

```
$(".tooltipTOP").tooltip({
    placement: "top"
});
$(".tooltipBOTTOM").tooltip({
    placement: "bottom"
});​ 
```

编辑：但如果你必须使用 rel，这里是解决方案：

```
$("*[rel=tooltipTOP]").tooltip({
    placement: "top",
    trigger: "hover"
});
$('*[rel=tooltipBOTTOM]').tooltip({
    placement: "bottom",
    trigger: "hover"
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-10T14:38:34.847

我发现问题出在 Jquery 选择器上。

如果您有 2 个工具提示实例，则可以执行此操作

```
$("body").tooltip({
    selector: "*[rel=tooltipTOP]",
    placement: "top"
  });
  $('html').tooltip({
    selector: "*[rel=tooltipBOTTOM]",
    placement: "bottom"
  }); 
```

注意 jquery 选择器是不同的。第一个是**BODY**第二个是**HTML**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:19:01.120

您的问题可能是您在动态生成的元素上使用工具提示？我有同样的问题，使用“现场”来让它工作......

```
$(document).live("mouseover", function () {
    $('.tooltipTop').tooltip({
        placement: "top"
    });
    $(".tooltipBottom").tooltip({
        placement: "bottom"
    });
    $(".tooltipRight").tooltip({
        placement: "right"
    });
    $(".tooltipLeft").tooltip({
        placement: "left"
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-05T13:10:25.857

对我来说，它通过增加我分配工具提示的元素的 z-index 来解决。

# objective-c - iPad在横向问题中发布

> ID：12571434
> 
> 赞同：1
> 
> 时间：2012-09-24T19:21:02.597
> 
> 标签：objective-c, ios, cocoa-touch, ipad, ios6

当我在 iPad 上处于横向模式并尝试启动应用程序时，我遇到了奇怪的行为：我的根视图控制器视图创建的维度等于 768x1024，而它应该是 1024x768（设备处于横向模式）。因此，我的视图层次结构已损坏。
视图由系统创建（我使用 nib 作为界面）。
它是否在 iOS 中出现错误，或者，也许，我做错了什么？

编辑：自动调整掩码是默认的（一切都调整大小）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:15:09.317

在这里找到了一个解决方案[Reporting wrong bounds in Landscape Mode](https://stackoverflow.com/questions/5194504/reporting-incorrect-bounds-in-landscape-mode)。
我正在检查视图控制器视图大小`viewDidLoad`，而正确的大小仅在`viewDidAppear`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:46:01.973

那没问题。当执行旋转到横向时，它总是以纵向创建视图。所以你应该实现 `- (BOOL) shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation) - (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)` 并签入代码

# sql-server-2008 - 如何将逻辑构建到我的计算域中？

> ID：12571442
> 
> 赞同：0
> 
> 时间：2012-09-24T19:21:39.170
> 
> 标签：sql-server-2008

在我的数据库中，我有一个计算列，它连接两个字段以创建屏幕显示名称。计算列的公式是`(([LastName]+', ')+[FirstName])`。

这个公式可以正常工作，除非有一个真实的姓氏但名字是“-”，一个连字符。从数据的角度来看，这在某些情况下是可以接受的。在这种情况下，名称显示为“ `Smith, -`”。在这种没有真实名字的情况下，我们不希望显示逗号和连字符。它应该显示为“ `Smith`”。

在我的计算字段中，如何构建一些逻辑来测试名字中的连字符，如果存在，则相应地构建显示名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:31:20.950

```
AS (LastName + COALESCE(', ' + NULLIF(Firstname, '-'), '')) 
```

# winapi - 在之前发送的消息回调完成之前触发消息会发生什么？

> ID：12571449
> 
> 赞同：0
> 
> 时间：2012-09-24T19:21:55.437
> 
> 标签：winapi, win32gui

我花了一些时间试图为此研究一个明确的答案，但找不到可靠的来源。

我的情况相当简单。我有一个带有消息泵设置的线程，它正在处理来自计时器的重复事件。这是消息泵源：

```
// create timer that goes off every 500 ms
UINT_PTR myTimerID = SetTimer(NULL, 0, 500, TimerCallback);

// message structure
MSG msg;

// process and handle messages for this thread
BOOL getMessageStatus;
while((getMessageStatus = GetMessage(&msg, NULL, 0, 0)) != 0)
{
    // failed get message
    if(getMessageStatus == -1)
    {
        printf("GetMessage FAILED!\n");
    }
    // process timer message
    else if(msg.message == WM_TIMER)
    {
        // invoke callback
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

如果 TimerCallback 花费的时间超过 500 毫秒，则计时器将再次触发其事件。由于回调与消息泵在同一线程上执行，因此我假设回调必须在消息泵处理下一条计时器消息之前完成。

那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:56:46.890

`SetTimer()`是一个基于消息的定时器。当计时器结束时，它会在消息队列中设置一个特殊标志。当您为新消息抽出队列时，`WM_TIMER`如果已设置该标志并且其他更高优先级的消息未在队列中等待，则会创建一条消息。当您的代码忙于调度生成的`WM_TIMER`消息时，计时器可以在后台运行并再次设置标志，从而`WM_TIMER`在您下次向队列发送消息时生成一条新消息。因此，在回调中直接或通过模式对话框发送消息时要小心，因为这可能会导致定时器回调的递归调用，从而可能导致堆栈溢出。但是，如果您的消息泵送仅在您的主线程循环中，那么您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:54:44.787

只要处理消息只有一个入口点，一次只能处理一条消息。您可以通过在已经运行的事件处理程序中处理更多消息来搞砸事情，但不要这样做，您应该没问题。

# iphone - iPhone 应用程序版本控制 sqlite 数据库

> ID：12571452
> 
> 赞同：2
> 
> 时间：2012-09-24T19:22:01.483
> 
> 标签：iphone, ios, sqlite, versioning

我制作了一个使用 sqlite 表的 iPhone 应用程序。这里有相当多的数据，一个包含项目的表格和一个包含收藏夹的表格。

当我更新一些数据库记录并重建应用程序时，更改在应用程序中不可见，我必须删除应用程序并重建它......

通过搜索，我发现解决方案应该是版本控制。但是由于我对编程语言还很陌生，所以我不知道从哪里开始。我听说过 pragma、user_version 之类的东西，但对我来说都是拉丁语:-(。

任何人都可以给我和想法我该如何解决这个问题？

# c# - 为什么这不会产生溢出异常？

> ID：12571454
> 
> 赞同：5
> 
> 时间：2012-09-24T19:22:05.643
> 
> 标签：c#, overflowexception

我正在使用 LinqPad 测试一些东西，并对以下代码没有产生异常感到惊讶：

```
ulong lSmallValue = 5;
ulong lBigValue = 10;

ulong lDifference = lSmallValue - lBigValue;

Console.WriteLine(lDifference);
Console.WriteLine((long)lDifference); 
```

这会产生以下输出：

```
18446744073709551611
-5 
```

幸运的是，我希望有这种行为，但我假设这会导致 an`OverflowException`被抛出。

来自[`System.OverflowException`](http://msdn.microsoft.com/en-us/library/system.overflowexception.aspx)：

> 在以下情况下，会在运行时引发 OverflowException：
> 
> *   算术运算产生的结果超出了运算返回的数据类型的范围。
> *   强制转换或转换操作尝试执行缩小转换，并且源数据类型的值超出目标数据类型的范围。

为什么手术不`lSmallValue - lBigValue`属于第一类？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T19:26:07.373

CLR 默认不会抛出溢出异常。除非您使用“已检查”关键字。

[http://msdn.microsoft.com/en-us/library/74b4xzyw%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/74b4xzyw%28v=vs.71%29.aspx)

UPD：实际上，我确实推荐 Jeffrey Richter 的“CLR via C#”——他让这些事情变得更加透明。我最喜欢的关于 CLR 和 C# 基础的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:25:37.287

“对于引发溢出异常的算术、强制转换或转换操作，该操作必须发生在检查的上下文中。”

一旦您将代码放入已检查的块中，就会调用 OverflowException。

```
ulong lSmallValue = 5;
ulong lBigValue = 10;
checked {
try {
    ulong lDifference = lSmallValue - lBigValue;
}
catch (OverflowException) {
    Console.WriteLine("Exception caught");
}} 
```

# continuous-integration - 下游作业使用与哈德逊上游作业相同的内部版本号和颠覆修订

> ID：12571455
> 
> 赞同：4
> 
> 时间：2012-09-24T19:22:09.343
> 
> 标签：continuous-integration, hudson

我看到了一些重复的问题，但答案似乎没有帮助。以下是我需要的：我有上游作业 A 及其下游作业 B。一旦作业 A 成功完成，我使用参数化触发器插件启动作业 B。

我希望启动的作业 B 具有相同的内部版本号并使用作业 A 用来简化事情的相同 SVN 版本（顺便说一句，两个作业都使用单独的工作区。）

在 Job A 下，我检查了“Trigger parameterized build on other projects”，并在稳定时将 subversion 修订和当前构建参数添加到 Job B 的参数中。

在 Job B 下，我检查了“This build is parameterized”并使用 SVN_REVISION 作为默认 HEAD 的字符串参数；和 BUILD_NUMBER 作为 Job A 的运行参数。在 SCM 下，对于 SVN url，我输入：http://svn-path-here/trunk@$SVN_REVISION

这样做总是会拉动 HEAD 并使用不同的内部版本号。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T07:53:17.197

快速的网络搜索显示：

*   使用参数化构建触发器，您需要在 SVN URL 中使用“peg revision”。例如`.../repository/trunk@${SVN_REVISION}`
*   或者您可以使用[Tracking SVN 插件](https://wiki.jenkins-ci.org/display/JENKINS/Tracking+SVN+Plugin)。

看到[这个线程](http://jenkins-ci.361315.n4.nabble.com/What-is-the-correct-use-of-the-quot-Subversion-revision-quot-option-for-the-quot-Trigger-parameteriz-td3298054.html)。

# sql - 需要使用 SQL 变量来定义 XML.Value 选择的命名空间

> ID：12571456
> 
> 赞同：0
> 
> 时间：2012-09-24T19:22:19.217
> 
> 标签：sql, xquery

我知道如何使用 xpath 从 XML 字段中选择一个值并定义命名空间，但我需要使用几个 xpath 查询并将它们分配给我的选择。有没有比执行以下操作更简单的方法：

```
SELECT 
    id, name,
    [XML].value('declare namespace test="http://www.test.org/xml/";
                 declare namespace test2="http://www.test2.org";
                 (//test:Address[1][test2:Global=1]/test:Street)[1] ', 'varchar(max)') AS streetLocation1,
    [XML].value('declare namespace test="http://www.test.org/xml/";
                 declare namespace test2="http://www.test2.org";
                 (//test:Address[2][test2:Global=1]/test:Street)[1] ', 'varchar(max)') AS streetLocation2 
FROM  
    TEST 
```

我想换

```
'declare namespace test="http://www.test.org/xml/";
 declare namespace test2="http://www.test2.org";' 
```

通过使用变量。我试图附加字符串，但得到以下信息：

> XML 数据类型方法“value”的参数 1 必须是字符串文字。

必须有一个更简单的方法。

谢谢，

-詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:47:29.357

谢谢@MikaelEriksson，

万一有人有类似的问题。这是答案。

```
;WITH XMLNAMESPACES ('http://www.test.org/xml/' as test, 'http://www.test.org/xml/' as test2)
SELECT id,
       name,
       [XML].value('(//test:Address[1][test2:Global=1]/test:Street)[1] ', 'varchar(max)') AS streetLocation1,
       [XML].value('(//test:Address[2][test2:Global=1]/test:Street)[1] ', 'varchar(max)') AS streetLocation2 
FROM  TEST 
```

# wix - WIX - 添加一个自定义对话框，后退/下一个按钮有问题

> ID：12571461
> 
> 赞同：2
> 
> 时间：2012-09-24T19:22:53.137
> 
> 标签：wix

我正在创建一个自定义的 WixUi 配置，这是我到目前为止所做的：

将 WixUI_Minimal.wxs 文件复制到我的项目中并将 Id 更改为：WixUI_CustomMinimal 将 WelcomeEulaDlg.wxs 文件复制到我的项目中并将 Id 更改为：CustomWelcomeEulaDlg 将 WelcomeDlg.wxs 文件复制到我的项目中并将 Id 更改为：CustomWelcomeDlg 添加了 InstallTypeDlg .wxs 到我的项目

修改了 CustomWelcomeEulaDlg 以将 Install 按钮更改为 next 按钮。修改了 WixUI_CustomMinimal 以使 WelcomeEulaDlg 上的 Next/NextNoShield 按钮打开 InstallTypeDlg 对话框

将 InstallTypeDlg 对话框添加到 InstallUiSequence。

所以现在的问题是：我正在尝试在 InstallTypeDlg 上设置一个后退按钮，这是有效的，但是在按下后退按钮然后按下 CustomWelcomeEulaDlg InstallTypeDlg 上的下一个按钮后，它会被跳过并直接安装。

这是我的文件：

WixUI_CustomMinimal

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  <copyright file="WixUI_Minimal.wxs" company="Outercurve Foundation">
    Copyright (c) 2004, Outercurve Foundation.
    This software is released under Microsoft Reciprocal License (MS-RL).
    The license and further copyright text can be found in the file
    LICENSE.TXT at the root directory of the distribution.
  </copyright>
-->

<!--
First-time install dialog sequence:
 - WixUI_WelcomeEulaDlg

Maintenance dialog sequence:
 WixUI_MaintenanceWelcomeDlg
 - WixUI_MaintenanceTypeDlg
 - WixUI_VerifyReadyDlg

Patch dialog sequence:
 - WixUI_WelcomeDlg
 - WixUI_VerifyReadyDlg
-->

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI Id="WixUI_CustomMinimal">
          <TextStyle Id="WixUI_Font_Normal" FaceName="Tahoma" Size="8" />
            <TextStyle Id="WixUI_Font_Bigger" FaceName="Tahoma" Size="12" />
            <TextStyle Id="WixUI_Font_Title" FaceName="Tahoma" Size="9" Bold="yes" />

            <Property Id="DefaultUIFont" Value="WixUI_Font_Normal" />
            <Property Id="WixUI_Mode" Value="Minimal" />

            <DialogRef Id="ErrorDlg" />
            <DialogRef Id="FatalError" />
            <DialogRef Id="FilesInUse" />
            <DialogRef Id="MsiRMFilesInUse" />
            <DialogRef Id="PrepareDlg" />
            <DialogRef Id="ProgressDlg" />
            <DialogRef Id="ResumeDlg" />
            <DialogRef Id="UserExit" />
            <DialogRef Id="CustomWelcomeDlg" />
            <DialogRef Id="CustomWelcomeEulaDlg" />
            <DialogRef Id="InstallTypeDlg" />

            <Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish>

            <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MaintenanceTypeDlg">1</Publish>

            <Publish Dialog="MaintenanceWelcomeDlg" Control="Next" Event="NewDialog" Value="MaintenanceTypeDlg">1</Publish>

            <Publish Dialog="MaintenanceTypeDlg" Control="RepairButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
            <Publish Dialog="MaintenanceTypeDlg" Control="RemoveButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
            <Publish Dialog="MaintenanceTypeDlg" Control="Back" Event="NewDialog" Value="MaintenanceWelcomeDlg">1</Publish>

            <Publish Dialog="CustomWelcomeDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">Installed AND PATCH</Publish>
            <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="CustomWelcomeDlg" Order="2">Installed AND PATCH</Publish>

            <Publish Dialog="CustomWelcomeEulaDlg" Control="Next" Event="NewDialog" Value="InstallTypeDlg">Installed AND PATCH</Publish>
            <Publish Dialog="CustomWelcomeEulaDlg" Control="NextNoShield" Event="NewDialog" Value="InstallTypeDlg">Installed AND PATCH</Publish>

            <Publish Dialog="InstallTypeDlg" Control="Back" Event="NewDialog" Value="CustomWelcomeEulaDlg" Order="2">Installed AND PATCH</Publish>

            <InstallUISequence>
                <Show Dialog="CustomWelcomeDlg" Before="CustomWelcomeEulaDlg">Installed AND PATCH</Show>
                <Show Dialog="CustomWelcomeEulaDlg" Before="InstallTypeDlg">NOT Installed</Show>
                <Show Dialog="InstallTypeDlg" Before="ProgressDlg">NOT Installed</Show>
            </InstallUISequence>

            <Property Id="ARPNOMODIFY" Value="1" />
        </UI>

        <UIRef Id="WixUI_Common" />
    </Fragment>
</Wix> 
```

CustomWelcomeEulaDlg

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  <copyright file="WelcomeEulaDlg.wxs" company="Outercurve Foundation">
    Copyright (c) 2004, Outercurve Foundation.
    This software is released under Microsoft Reciprocal License (MS-RL).
    The license and further copyright text can be found in the file
    LICENSE.TXT at the root directory of the distribution.
  </copyright>
-->
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <Dialog Id="CustomWelcomeEulaDlg" Width="370" Height="270" Title="!(loc.WelcomeEulaDlg_Title)">
                <Control Id="Bitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="234" TabSkip="no" Text="!(loc.WelcomeEulaDlgBitmap)" />
                <Control Id="Title" Type="Text" X="130" Y="6" Width="225" Height="30" Transparent="yes" NoPrefix="yes" Text="!(loc.WelcomeEulaDlgTitle)" />
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="LicenseAcceptedCheckBox" Type="CheckBox" X="130" Y="207" Width="226" Height="18" CheckBoxValue="1" Property="LicenseAccepted" Text="!(loc.WelcomeEulaDlgLicenseAcceptedCheckBox)" />
                <Control Id="Print" Type="PushButton" X="88" Y="243" Width="56" Height="17" Text="!(loc.WixUIPrint)">
                    <Publish Event="DoAction" Value="WixUIPrintEula">1</Publish>
                </Control>
                <Control Id="Back" Type="PushButton" X="156" Y="243" Width="56" Height="17" Disabled="yes" Text="!(loc.WixUIBack)" />
                <Control Id="Next" Type="PushButton" ElevationShield="yes" X="212" Y="243" Width="80" Height="17" Default="yes" Text="Next" Hidden="yes">
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>

                    <Condition Action="disable"><![CDATA[LicenseAccepted <> "1"]]></Condition>
                    <Condition Action="enable">LicenseAccepted = "1"</Condition>
                    <Condition Action="show">ALLUSERS</Condition>
                </Control>
                <Control Id="NextNoShield" Type="PushButton" ElevationShield="no" X="212" Y="243" Width="80" Height="17" Default="yes" Text="Next" Hidden="yes">
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>

                    <Condition Action="disable"><![CDATA[LicenseAccepted <> "1"]]></Condition>
                    <Condition Action="enable">LicenseAccepted = "1"</Condition>
                    <Condition Action="show">NOT ALLUSERS</Condition>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
                <Control Id="LicenseText" Type="ScrollableText" X="130" Y="36" Width="226" Height="162" Sunken="yes" TabSkip="no">
                    <Text SourceFile="!(wix.WixUILicenseRtf)" />
                </Control>
            </Dialog>
        </UI>

        <InstallUISequence>
            <Show Dialog="CustomWelcomeEulaDlg" Before="ProgressDlg" Overridable="yes">NOT Installed</Show>
        </InstallUISequence>
    </Fragment>
</Wix> 
```

安装类型Dlg

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  <copyright file="WelcomeEulaDlg.wxs" company="Outercurve Foundation">
    Copyright (c) 2004, Outercurve Foundation.
    This software is released under Microsoft Reciprocal License (MS-RL).
    The license and further copyright text can be found in the file
    LICENSE.TXT at the root directory of the distribution.
  </copyright>
-->
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
          <Property Id="INSTALLTYPE" Value="Null"/>
            <Dialog Id="InstallTypeDlg" Width="370" Height="270" Title="!(loc.WelcomeEulaDlg_Title)">

                <Control Id="Bitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="234" TabSkip="no" Text="!(loc.WelcomeEulaDlgBitmap)" />
                <Control Id="Title" Type="Text" X="130" Y="6" Width="225" Height="30" Transparent="yes" NoPrefix="yes" Text="!(loc.WelcomeEulaDlgTitle)" />
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Print" Type="PushButton" X="88" Y="243" Width="56" Height="17" Text="!(loc.WixUIPrint)">
                    <Publish Event="DoAction" Value="WixUIPrintEula">1</Publish>
                </Control>
                <Control Id="Back" Type="PushButton" X="156" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
                <Control Id="Install" Type="PushButton" ElevationShield="yes" X="212" Y="243" Width="80" Height="17" Default="yes" Text="Install" Hidden="yes">
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                    <Publish Event="AddLocal" Value="ServiceFeature"><![CDATA[INSTALLTYPE = "SERVICE"]]></Publish>
                    <Publish Event="Remove" Value="ServiceFeature"><![CDATA[INSTALLTYPE <> "SERVICE"]]></Publish>
                    <Condition Action="disable">INSTALLTYPE = "Null"</Condition>
                    <Condition Action="enable"><![CDATA[INSTALLTYPE <> "Null"]]></Condition>
                    <Condition Action="show">ALLUSERS</Condition>
                </Control>
                <Control Id="InstallNoShield" Type="PushButton" ElevationShield="no" X="212" Y="243" Width="80" Height="17" Default="yes" Text="Install" Hidden="yes">
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                    <Publish Event="AddLocal" Value="ServiceFeature"><![CDATA[INSTALLTYPE = "SERVICE"]]></Publish>
                    <Publish Event="Remove" Value="ServiceFeature"><![CDATA[INSTALLTYPE <> "SERVICE"]]></Publish> 
                    <Condition Action="disable">INSTALLTYPE = "Null"</Condition>
                    <Condition Action="enable"><![CDATA[INSTALLTYPE <> "Null"]]></Condition>
                    <Condition Action="show">NOT ALLUSERS</Condition>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
                <Control Id="FeatureGroup" Property="INSTALLTYPE" Type="RadioButtonGroup" Default="no" X="130" Y="36" Width="226" Height="162">
                  <RadioButtonGroup Property="INSTALLTYPE">
                    <RadioButton Text="Console" Height="17" Value="CONSOLE" Width="150" X="20" Y="0" />
                    <RadioButton Text="Windows Service" Height="17" Value="SERVICE" Width="150" X="20" Y="25" />
                    <RadioButton Value="Null" X="0" Y="0" Width="0" Height="0" Text="Null" />
                  </RadioButtonGroup>
                </Control>
            </Dialog>
        </UI>

        <InstallUISequence>
            <Show Dialog="InstallTypeDlg" Before="ProgressDlg" Overridable="yes">NOT Installed</Show>
        </InstallUISequence>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T17:16:04.957

第一个问题在`InstallUISequence`. 你应该使用：

```
<Show Dialog="CustomWelcomeDlg" Before="CustomWelcomeEulaDlg">
    Installed AND PATCH
</Show>
<Show Dialog="CustomWelcomeEulaDlg" Before="ProgressDlg">
    NOT Installed
</Show> 
```

在 CustomWelcomeEulaDlg 中，Back 和 Next 按钮应该是这样的：

```
<Control Id="Back" Type="PushButton" X="156" Y="243"
         Width="56" Height="17" Disabled="yes" Text="Back" />

<Control Id="Next" Type="PushButton" ElevationShield="yes"
         X="212" Y="243" Width="80" Height="17" Default="yes"
         Text="Next" Hidden="yes">
    <Publish Event="NewDialog" Value="InstallTypeDlg">1</Publish>
</Control> 
```

而在 InstallTypeDlg 中，Back 和 Install 按钮应该是这样的：

```
<Control Id="Back" Type="PushButton" X="156" Y="243" Width="56"
         Height="17" Disabled="yes" Text="Back">
    <Publish Event="NewDialog" Value="CustomWelcomeEulaDlg">1</Publish>
</Control>

<Control Id="Install" Type="PushButton" ElevationShield="yes" X="212" Y="243"
         Width="80" Height="17" Default="yes" Text="Install" Hidden="yes">
    <Publish Event="EndDialog" Value="Return" />
</Control> 
```

# knockout.js - 使用 html5 语法的模式验证器的敲除验证自定义错误消息

> ID：12571464
> 
> 赞同：0
> 
> 时间：2012-09-24T19:23:17.170
> 
> 标签：knockout.js, knockout-validation

我正在使用敲除验证的 HTML5 语法来验证用户是否输入了这样的有效数字：

```
<input type="text" data-bind="value: Lots" pattern="^\d*\.?\d*$" /> 
```

它工作得很好，但错误消息只是说`'Invalid!'.`
是否有办法自定义使用 HTML% 语法时出现的验证消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:12:07.827

以下似乎设置了验证消息：

```
ko.validation.rules.pattern.message = 'customized validation message!'; 
```

# joomla2.5 - Joomla 2.5的控制器和视图名称末尾的“s”是什么意思

> ID：12571465
> 
> 赞同：1
> 
> 时间：2012-09-24T19:23:18.433
> 
> 标签：joomla2.5, joomla-extensions

我通过这个 totorial 研究为 Joomla 2.5 开发组件：

```
http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component 
```

现在，有几种情况，例如：

```
HelloWorldControllerHelloWorld
HelloWorldControllerHelloWorlds 
```

在文件中：

```
controllers/helloworld.php
controllers/helloworlds.php 
```

或者：

```
HelloWorldControllerHelloWorld
HelloWorldControllerHelloWorlds 
```

在文件中：

```
helloworld/view.html.php
helloworlds/view.html.php 
```

我的问题是：
最后有's'的情况和最后没有's'的情况有什么区别？

第二件事。
这个totorial非常好，但它作为totorial很好。是否有人拥有一些包含所有这些概念的深入文档的网站（Joomla API 除外）？
谢谢你的前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:13:05.407

**类声明末尾的“s”表示复数。**我个人认为这个带有 HelloWorlds 的示例（虽然是正确的）对于新手来说是相当混乱的。

*   HelloWorld（控制器、模型和视图）（单数）通常会导致您查看或编辑单个记录的视图。
*   HelloWorld将导向一个视图，您可以**在**其中查看多条记录并对它们执行一些操作。

另一方面，我认为没有很多好的教程，希望您可以查看 Joomla 中包含的组件（如 com_contacts、com_banners 等）。

另请查看有关[Joomla! 的文档！命名约定](http://docs.joomla.org/File_Structure_and_Naming_Conventions)

另外我会推荐这本书[Joomla！Mark Dexter 和 Louis Landry 的编程](https://rads.stackoverflow.com/amzn/click/com/013278081X)。他们更详细地解释了一切是如何结合在一起的。

# android - 如何使用与 Google Play 上的先例不同的命名空间来更新 android 应用程序？

> ID：12571468
> 
> 赞同：1
> 
> 时间：2012-09-24T19:23:22.810
> 
> 标签：android, google-play, package-name

我已经在 Google Play 中发布了一个应用程序，我想更改它的名称？
这可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:25:04.837

如果您指的是清单中定义的应用程序的唯一包名称，则不，这是不可能的。

这就是游戏商店、亚马逊等其他商店和设备同意识别应用程序的方式。如果您更改它，商店将不再理解商店中的应用程序与您设备上的应用程序相同。好吧，我想他们可以支持某种混叠，但他们不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:25:44.003

您可以更改设备图标下显示的名称，但不能更改包名称。包名称 (com.example.android.etc) 是 Google Play 商店区分应用程序的方式，因此它会认为它们是两个完全不同的应用程序，并且不允许您将其作为更新上传。

# .net - 部署 .NET VSTO Excel 插件时遇到问题，最好的方法是什么？

> ID：12571469
> 
> 赞同：1
> 
> 时间：2012-09-24T19:23:26.377
> 
> 标签：.net, vsto, excel-addins

使用 ClickOnce 发布在 VS2010 中制作的 Excel 插件时，一切正常。但是，当我更新代码并进行另一次发布时。打开 Excel 时遇到错误（见附件）。显然插件不会自动更新到最新版本，这是以这种方式发布的一种意义。我怎样才能解决这个问题？有没有更好的方法呢？

请注意，如果我从发布目录手动运行 setup.exe 或 vsto 文件，然后打开 Excel 没有问题，则自动更新失败。

### 错误信息（部分）：

> 无法安装自定义项，因为已安装另一个版本且无法从该位置升级...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T20:13:36.440

The issue emerged as a result of having an installation of the add-in installed, and at the same time debugging another version of the same add-in. The solution was uninstalling the deprecated version, doing a clean in Visual Studio.After that debugging worked fine again.

# php - Zend_HTTP_Client 不会让我发布任何数据

> ID：12571471
> 
> 赞同：6
> 
> 时间：2012-09-24T19:23:37.250
> 
> 标签：php, web-services, zend-framework, zend-http-client

我一直在 stackoverflow 和 Google 上寻找解决问题的方法。

我已经使用 Zend Framework 创建了两个项目 -`Project1`并且`Project2`- 我想在其中一个上实现 Web 服务。这个想法是使用 POST 发送一个 JSON 字符串`Project1`并接收一个 JSON，其中包含与该变量相关的所有详细信息。现在我在以下位置创建了一个 TestController `Project2`：

```
public function indexAction(){

    $uri = 'http://project1.com/WebService/data';

    $config = array(
        'adapter'   => 'Zend_Http_Client_Adapter_Curl',
        'curloptions' => array(CURLOPT_FOLLOWLOCATION => true),
    );
    $client = new Zend_Http_Client($uri, $config);

    $request = $client->request('POST');

    print_r($request->getBody());

    exit();

} 
```

上面的代码有效。`dataAction`它从控制器中读取`Project1`并给我一个回显的输出。但是当我尝试这个时：

```
public function indexAction(){

    $uri = 'http://project1.com/WebService/data';

    $config = array(
        'adapter'   => 'Zend_Http_Client_Adapter_Curl',
        'curloptions' => array(CURLOPT_FOLLOWLOCATION => true),
    );
    $client = new Zend_Http_Client($uri, $config);

    $data = array(
            'userID'      => 'TEST TEST',
            'value'       => 1,
            'description' => 'ABCDEFG',
    );

    $request = $client->request('POST');

            $json = json_encode($data);

            $client->setRawData($json, 'application/json')->request('POST');

    exit();

} 
```

在服务器端，当我尝试在里面显示时`dataAction`：

```
public function dataAction(){

    var_dump($this->getRequest()->getParam('var-name'));

    var_dump($_POST);

    die();      

} 
```

我得到这样的输出：NULL array(0) { } .... 当我在客户端尝试它时，我得到相同的输出。还要提一下..我也尝试打开 php://input 文件但得到一个空字符串...

我错过了什么？？？从早上开始，我一直在寻找它，但没有找到解决方案。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:38:54.257

这是您所缺少的：

```
$json = json_encode($data);
$client->setRawData($json, 'application/json')->request('POST'); 
```

发送 POST 请求，但 POST 正文中的数据不是 url 编码的字符串，而只是原始 JSON。

调用`$this->getRequest()->getParam('foo')`查看 PHP 超全局变量`$_GET`，`$_POST`其中不包含任何 JSON 参数。它将为空的原因是 PHP 无法解析 POST 数据，因为它是 JSON 而不是 HTTP url 编码的内容。

`dataAction`如果您想在 POST 正文中接收 JSON 数据，解决方案是使用类似的东西。

```
$post = $this->getRequest()->getRawBody();

try {
    $json = Zend_Json::decode($post);

    // now access parameters from $json array
} catch (Zend_Json_Exception $ex) {
    echo "Failed to decode request, POST did not contain valid JSON.";
} 
```

编辑：这是您可以弄乱的完整代码。

```
public function requestAction()
{
    // CHANGE THIS
    $uri = 'http://playground/zendapp/public/index/data';

    $config = array(
            'adapter'   => 'Zend_Http_Client_Adapter_Curl',
            'curloptions' => array(CURLOPT_FOLLOWLOCATION => true),
    );
    $client = new Zend_Http_Client($uri, $config);

    $data = array(
            'userID'      => 'TEST TEST',
            'value'       => 1,
            'description' => 'ABCDEFG',
    );

    $json = json_encode($data);

    $resp = $client->setRawData($json, 'application/json')->request('POST');

    var_dump($resp->getBody());

    exit();

}

public function dataAction()
{
    $post = $this->getRequest()->getRawBody();

    try {
        $json = Zend_Json::decode($post);

        print_r($json);
    } catch (Exception $ex) {
        echo "failed to decode json";
    }

    exit;
} 
```

# azure - azure 仅适用于大型应用程序吗？

> ID：12571475
> 
> 赞同：4
> 
> 时间：2012-09-24T19:23:50.300
> 
> 标签：azure

我最近被要求重新开发一个带有后端 SQL Server Express DB 的 .Net 2.0 WinForms 应用程序。

其中一项要求是允许远程用户访问应用程序，因此我一直在考虑托管选项以避免 VPN 设置。数据不敏感，不属于数据保护法，因此网络的基本安全方法将涵盖我。

我喜欢使用 Azure 的想法有几个原因，但我不确定它是否适合 5 或 6 个用户群而没有真正的增长空间。我从未使用过 Azure，我计划使用 MVC 和 SQL 后端进行开发，因为这是我的主要技能。

在我看来，支持 Azure 的几点是：

*   与我用于此项目的 TFS 预览紧密集成
*   易于设置沙坑和现场版本
*   易于维护，因为我预计其他托管选项将需要更多关于底层操作系统的知识
*   坚持使用完整的 Microsoft 堆栈***有望***使事情变得更简单

从我在 Azure 站点上找到的信息来看，消息都是关于可伸缩性的，如果你需要它，那就太好了。

我的问题很简单，您是否需要庞大的用户群，或者计划快速增长，使用 azure 还是我们现在应该如何托管应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:50:15.523

您在这里要问的是[Windows Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)的完美案例：

*   您可以免费获得 10 个网站（没有自定义 DNS，但这非常适合您的“沙坑”/测试版本）。共享模式支持自定义 DNS，而且非常便宜。
*   与 TFS 预览版和 GitHub 紧密集成
*   您无需担心底层操作系统，只需从 Visual Studio 或使用 TFS Preview 发布即可。
*   坚持使用 Microsoft 堆栈是最简单的解决方案，但其他技术也很有效。由于您在谈论 MVC，我假设您正在考虑 ASP.NET MVC，它与 Windows Azure 完美匹配。查看培训套件以获取一些很好的示例。
*   当您需要一个更具可扩展性（意味着您将拥有更多用户和更多收入）的解决方案时，您可以轻松升级到预留实例或云服务（Web/Worker 角色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:09:23.983

关于您的问题：“我的问题很简单，您是否需要庞大的用户群，或计划快速增长，使用 azure 还是我们现在应该如何托管应用程序？”

Windows Azure 是一个云服务平台（包括作为云服务的 PaaS、作为 Windows Azure 虚拟机的 IaaS 以及上面 Sandrino 建议的网站），通过云服务，您可以从很小的地方开始，并随着您的用户快速增长要求是，因此您可以在这两种情况下使用 Azure。另一方面，使用某些产品有一些优势，这取决于您将使用哪种服务来运行您的应用程序。

我认为[文章（部分：“我应该使用什么？做出选择”）](https://www.windowsazure.com/en-us/develop/net/fundamentals/compute/#WhatShouldIUse)将解释有关如何在各种服务中进行选择的策略。

这个[SO 讨论](https://stackoverflow.com/questions/10941488/what-is-the-difference-between-an-azure-web-site-and-an-azure-web-role)也讨论了云服务和 Azure 网站之间的区别。

# ruby-on-rails - Rabl、Jbuilder 还是为 api 手动构建 json？

> ID：12571477
> 
> 赞同：8
> 
> 时间：2012-09-24T19:23:53.037
> 
> 标签：ruby-on-rails, json, api, rabl, jbuilder

要为大型应用程序构建 api，哪种方法在性能方面更好，我应该使用 Rabl、Jbuilder 还是手动构建 json 对象？我正在为移动应用程序构建 api /endpoints。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T00:55:09.777

在性能方面，您应该尝试创建一些基本的性能测试，并对其进行分析。

假设您的应用程序模型关联中最复杂的部分是您在响应能力方面的最薄弱点，并围绕它设计您的测试。

一般来说，还有一些其他的事情你应该考虑。

*   `as_json`覆盖将很快在您的模型中失控，并成为您应用程序的脆弱部分。许多人将 API 视为一种视图，因此它的逻辑应该与模型分离，以保持灵活/可互换和可测试。这是 JBuilder 和 RABL 的主要优点。最终，即使是一个简单的 JSON api`as_json`在需要扩展时也会请求重构，因此学习/使用 DSL 的初始复杂性可能值得。也就是说，在某些情况下使用它是完全可以的，`as_json`您只需要注意可伸缩性和维护方面的问题。

*   Jbuilder 过去的性能很差，但是在这个问题首次发布的同时，它得到了很大的改进。在此之前，RABL 的性能更高。在这一点上，Jbuilder 快了一点。

*   RABL 的 DSL 通常不如 Jbuilder 受欢迎，它可能在入门和后期维护中都存在困难。一般来说，Jbuilder 的 DSL 更简单，更容易学习/使用，在这两种情况下都是 YMMV，但普遍的共识似乎是 Jbuilder 更容易上手和运行。

由于这个问题是 5 个月大，抱歉我没有早点看到它，我希望早就做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T12:28:33.117

我建议 Jbuilder。因为Jbuilder有Rails的核心开发。所以在升级时它可能不会产生问题。

# javascript - 将数据从 HTML5 传递到数据库

> ID：12571483
> 
> 赞同：0
> 
> 时间：2012-09-24T19:24:07.310
> 
> 标签：javascript, database, html

我想创建一个类似于[http://www.cambridgebrainsciences.co.uk/play/rotation-task](http://www.cambridgebrainsciences.co.uk/play/rotation-task)的应用程序，但我想使用 HTML5 画布来构建这个应用程序，而不是 Flash。

但是，如何将反应时间和按钮 ID 等数据保存到 MySQL 数据库中？这可能吗，还是我应该只使用 JavaScript 来创建这个“游戏”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:45:25.977

您需要使用 php 等应用程序服务器作为客户端和数据库之间的中间人。然后，您只需向 php 提供的页面发出 ajax 请求，这些页面将从 MySQL 读取和写入数据并将其踢回您的应用程序。

# java - 执行 JUnit 测试时如何使用“java”命令选项/参数

> ID：12571489
> 
> 赞同：1
> 
> 时间：2012-09-24T19:24:16.880
> 
> 标签：java, junit, classpath

我正在开发一个 C# 应用程序来自动运行 JUnit 测试。由于移动我的 C# 应用程序运行的当前位置很复杂，我需要执行 JUnit 测试而不直接进入它们的文件夹。

所以，我有这个文件夹树：

```
» ProjectFolder

»» ClassesFolder

»» TestsFolder

»»» testX.java

»»» testX.class 
```

我已经能够编译文件，使用：

```
javac ...\ProjectFolder\ClassesFolder\*.java
javac ...\ProjectFolder\TestsFolder\*.java 
```

但我无法执行测试。我试过：

```
java -classpath ...\ProjectFolder org.junit.runner.JUnitCore TestsFolder.testX 
```

并得到这个错误：

```
Error: Could not find or load main class org.junit.runner.JUnitCore 
```

我什至尝试这种方式：

```
java org.junit.runner.JUnitCore ...\ProjectFolder TestsFolder.testX 
```

但是，再一次，它不起作用：

```
JUnit version 4.10
Could not find class: -classpath
Could not find class: ...\ProjectFolder
Could not find class: TestsFolder.testX

Time: 0,003

OK (0 tests) 
```

所以，我的主要疑问是，在使用 org.junit.runner.JUnitCore 执行 JUnit 测试时，如何使用 java 命令的选项（如 -cp 或 -classpath）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:32:26.303

问题是 jUnit-runner 不在您指定的类路径中。您需要将 junit.jar 的路径添加到类路径中。

谷歌很好[http://www.jsystemtest.org/?q=node/44](http://www.jsystemtest.org/?q=node/44)

但是为什么不直接使用已经存在并且可以解决这个问题的东西呢？像 Maven 还是 Ant？

# matlab - 如何在matlab中将一系列Excel文件导入为列向量或单元格数组？

> ID：12571490
> 
> 赞同：0
> 
> 时间：2012-09-24T19:24:18.453
> 
> 标签：matlab

我想导入一系列包含大量数据的 excel 文件。我遇到的问题是我想一次处理每个文件中的数据并将其输出存储到一个变量中，但是每次我尝试处理不同的文件时，变量都会在变量工作区中被覆盖。无论如何我可以存储这些文件并一次处理每个文件吗？

```
numFiles = 1; 
range = 'A2:Q21'; 
sheet = 1; 
myData = cell(1,numFiles); % Importing data from Excel 
for fileNum = 1:numFiles 
  fileName = sprintf('myfile%02d.xlsx',fileNum); 
  myData{fileNum} = importfile3(fileName,sheet,range); 
end 
data = cell2mat(myData); 
```

实际的数据导入是由`importfile3`它执行的，在大多数情况下，它是函数的包装器，该`xlsread`函数返回与指定范围的 excel 数据相对应的矩阵。

```
function data = importfile3(workbookFile, sheetName, range)
% If no sheet is specified, read first sheet
if nargin == 1 || isempty(sheetName)
    sheetName = 1;
end

% If no range is specified, read all data
if nargin <= 2 || isempty(range)
    range = '';
end

%% Import the data 
[~, ~, raw] = xlsread(workbookFile, sheetName, range);

%% Replace non-numeric cells with 0.0
R = cellfun(@(x) ~isnumeric(x) || isnan(x),raw); % Find non-numeric cells
raw(R) = {0.0}; % Replace non-numeric cells

%% Create output variable 
data = cell2mat(raw); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:27:32.417

您遇到的问题是`cell2mat`将单元格中的所有数据连接到一个大型二维矩阵中的结果。*如果您要导入两个 20 行和 17 列的 excel 文件，每个文件都会生成一个大小为[20 x 34]*的二维矩阵。的[文档](http://www.mathworks.com/help/matlab/ref/cell2mat.html)有`cell2mat`一个很好的视觉描述。

我看到您的`importfile3`函数返回一个矩阵，并且根据您`cell2mat`在最后一行代码中的使用，您似乎希望最终结果采用矩阵的形式。所以我认为最简单的方法就是绕过中间`myData`单元阵列。

在下面的示例代码中，结果`data`是一个 3 维矩阵。第 1 维表示行号，第 2 维是列号，第 3 维是文件号。元胞数组对于“锯齿状”数据非常有用，但根据您提供的代码，您导入的每个 Excel 数据集将具有相同的行数和列数。

```
numFiles = 2; 
range = 'A2:Q21'; 
sheet = 1; 

% Number of rows and cols known before data import
numRows = 20;
numCols = 17;

data = zeros(numRows,numCols,numFiles);
for fileNum = 1:numFiles 
   fileName = sprintf('myfile%02d.xlsx',fileNum); 
   data(:,:,fileNum) = importfile3(fileName,sheet,range);
end 
```

现在访问这些数据非常简单。

`data(:,:,1)`返回从您的第一个 excel 文件导入的数据。 `data(:,:,2)`返回从您的第二个 excel 文件导入的数据。等等

# json - Spring 3.1 自定义 JSON 转换器

> ID：12571491
> 
> 赞同：3
> 
> 时间：2012-09-24T19:24:23.620
> 
> 标签：json, spring-mvc, jackson

我使用 Spring MVC 3.1，默认情况下使用 Jackson 进行 JSON-Java 转换。

我需要为以下内容创建自定义转换：

1.  java.util.List（适用于各种不同的类型）。
2.  枚举到字符串
3.  java.util.日历

我遇到了几种创建自定义转换器的不同方法：

1.  正如[这里](http://magicmonster.com/kb/prg/java/spring/webmvc/jackson_custom.html)或多或少所描述的，创建一个自定义 ObjectMapper：

    公共类 CustomObjectMapper 扩展 ObjectMapper...

然后将 MappingJacksonHttpMessageConverter 添加到我的 servlet-context 并使用我的自定义 ObjectMapper 注册它：

然后我想我需要在我的自定义 objectMapper 中有一些特定的实现（它应该是什么样子？）。

2.  第二种方法讨论扩展 FormattingConversionServiceFactoryBean 并创建我自己的转换器（实现 org.springframework.core.convert.converter.Converter 的类），如此[处](http://jpgmr.wordpress.com/tag/conversion-service/)所述。

更新 1：我见过的另一种方法是子类 MappingJacksonHttpMessageConverter 并覆盖 getJavaType 方法，如此处[所述](https://stackoverflow.com/a/6173511/887343)。为此，我必须将我的自定义转换器添加到转换器列表中：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
<property name="messageConverters">
    <list>
        <bean class="com.yl.app.CustomMappingJacksonHttpMessageConverter">
    </list>
</property> 
```

推荐哪种方法？只有这些吗，有没有更好的方法呢？

**更新 2：**

我还是不明白。在实践中，假设我有 A 类和 B 类。

A 类持有 B 的列表：

```
public class A {

   public List<B> list;

} 
```

我想将 A 类型的对象返回给我的客户。除了添加 @ResponseBody 注释（据我所知，在这种情况下这还不够）之外，我应该在我的服务器中做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T21:10:13.760

两种方法都有不同的用途：

您概述的第一种方法是自定义 Jackson ObjectMapper - 例如，在 json 中以不同格式显示日期或注册自定义序列化程序以稍微不同地处理将类映射到 json。

第二种方法是注册转换器 - 将一个对象转换为另一个对象，例如，将一个字符串请求参数从 UI 转换为一个对象，或者说您是否获得了一个字段的实体 ID 并将其转换为一个实体.

所以两者都有自己的位置，要自定义 Jackson，您将使用第一种方法，要创建自定义转换器，您将使用第二种方法。

**更新：** 根据您提供的新信息，我认为您正在寻找的实际上是[HttpMessageConverter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)而不是转换器。

当你说你想将一个 A 类型的对象返回给你的客户端时，你会通过网络以某种方式序列化它——通常是 json 或 xml，但也可能是其他格式——如果你要将它转换为 json，那么你基本上可以自定义ObjectMapper 底层 MappingJacksonHttpMessageConverter(with Jackson 1.x) 或 MappingJackson2HttpMessageConverter(with Jackson2.x) 你通常会这样做：

```
<mvc:annotation-driven conversion-service="conversionService"> 
   <mvc:message-converters register-defaults="true">
       <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
           <property name="objectMapper">
               <bean class="org.bk.lmt.web.spring.CustomObjectMapper"/>
           </property>
       </bean>
   </mvc:message-converters>
</mvc:annotation-driven> 
```

并在自定义对象映射器中，如果您想自定义 Json 表示，则注册适当的序列化器/反序列化器。

与 XML 类似，您通常不会编写自己的转换器 ( [Jaxb2RootElementHttpMessageConverter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/converter/xml/Jaxb2RootElementHttpMessageConverter.html) )，而是使用 XmlJavaAdapters 自定义某些元素的序列化方式。

如果您有一些新的序列化格式（不是 xml、json），那么可以，您可以尝试从头开始编写 HttpMessageConverter。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-29T19:54:49.650

在自己尝试之后，不需要列出的方法。Jackson（按原样）能够很好地处理嵌套集合，无需自定义。

# algorithm - 给定一个 DCEL，我如何找到最近的一对站点？

> ID：12571494
> 
> 赞同：0
> 
> 时间：2012-09-24T19:24:54.340
> 
> 标签：algorithm, voronoi

给定一个 DCEL，我如何找到最近的一对站点？

假设给定的 DCEL 用于 Voronoi 图，我如何找到最近的一对站点？时间复杂度是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:56:06.093

最简单的方法是遍历所有边，找到它们的相邻面，计算 Voronoi 中心之间的距离，然后返回最小的对。如果您的 DCEL 实现无法直接在边上进行迭代，则可以使用任何图遍历算法（深度优先、广度优先等）进行迭代。

在任何情况下，时间复杂度都与输入数据结构的大小成正比。

# java - Java中使用Double的单维数组

> ID：12571495
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:24:53.997
> 
> 标签：java, arrays

我一直在尝试使用以下代码声明一维单数组：

```
double[] temporary= {0.7143, 0.5392, 0.5444, 0.5321, 0.5417, 0.5528, 0.5327, 0.5267, 0.5271}; 
```

并且代码一直运行完美，但每次我尝试声明为动态值时都会出现问题。也许我不知道如何正确声明它。

这是我最近一直在尝试的：

```
double temporary[];
temporary = new double[1000]; 
```

我尝试过并尝试使用固定大小的以下代码：

```
for (int i = 0; i < window.length; i++)
            {
                window[i] = temporary[j + i - windowSize];
            } 
```

这与数组列表：

```
for (int i = 0; i < window.length; i++)
            {
                window[i] = temporary.get(j+i-windowSize);
            } 
```

正如我上面提到的，我只想声明空的双精度数组并动态填充它。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:26:20.413

为此，您将需要使用 ArrayList。

```
ArrayList<Double> temporary = new ArrayList<Double>();
temporary.add(0.46567);
... 
```

问题是Java中的普通数组，例如`double[]`具有固定大小。您只能设置一次数组的大小，使用 ArrayList 时，您可以随时添加和删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:27:31.380

如果您提前知道内容的长度，那么它会是这样的；

```
temporary = new double[sizeofContent]; 
```

如果您不提前知道内容长度，那么您可能需要使用类似的东西`list`（这是动态的），然后将其转换为`array`using `toArray(type)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:28:23.660

您可以为此使用 ArrayList ：

```
List<Double> temporary = new ArrayList<Double>();
temporary.add(0.5588); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:32:51.593

如果您不是特别需要随机访问，则首选 LinkedList 而不是 ArrayList。实际上，只要这个增长，它将避免多次调整阵列的大小（达到容量时）：

```
List<Double> temporary = new LinkedList<Double>();
temporary.add(0.46567);
//... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:32:01.157

双[]临时=新双[1000]；

初始化使用像

临时[0] = 2.456d；

希望能帮助到你 ：-）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-24T19:30:26.477

使用集合对象`ArrayList`，如

```
List<Double> doubles = new ArrayList<Double>();
doubles.add(...);
doubles.add(...);
...
Double[] temp = doubles.toArray(new Double[0]); 
```

# java - 在处理中重新连接串行端口

> ID：12571498
> 
> 赞同：1
> 
> 时间：2012-09-24T19:25:03.467
> 
> 标签：java, connection, serial-port, arduino, processing

我正在使用[处理](http://processing.org/)并且我正在使用串行端口从 Arduino 读取输入，但可能会发生连接断开，在这种情况下如何重新打开此连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:54:23.517

您可以捕获 Serial.java 抛出的 RuntimeExceptions，这通常表明串行端口不再可用。然后，在那个 catch 块中，您可以开始轮询串行端口；一旦它允许您重新实例化您的 Serial 实例，该端口将再次可用（例如，USB 电缆重新插入）并且您又回到了游戏中。

```
Serial serial;
boolean serialInited;

void setup () {
    initSerial();
}

void draw () {
    if (serialInited) {
        // serial is up and running
        try {
            byte b = serial.read();
            // fun with serial here...
        } catch (RuntimeException e) {
            // serial port closed :(
            serialInited = false;
        }
    } else {
        // serial port is not available. bang on it until it is.
        initSerial();
    }
}

void initSerial () {
    try {
        serial = new Serial(this, Serial.list()[0], BAUD_RATE);
        serialInited = true;
    } catch (RuntimeException e) {
        if (e.getMessage().contains("<init>")) {
            System.out.println("port in use, trying again later...");
            serialInited = false;
        }
    }
} 
```

*与其尝试重新连接每一*帧，不如使用一个限制重新连接尝试频率的计数器。（例如，数到 10，再试一次，根据需要重复。）应该没那么重要，但不知道……由于我对某些东西知之甚少，在串行端口上用力敲打可能会产生意想不到的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T21:25:18.463

在 Arduino IDE 中，您必须关闭串口监视器，然后返回 [Tools] -> [Serial Port] 重新选择您的串口。

这是因为当您断开电缆时，您正在移除之前使用的串行设备。Linux 比 Windows 更好地处理这个问题，但无论哪种方式，它都会对串行监视器造成严重破坏。

您应该按下板上的重置按钮来重新启动程序，而不是移除 USB 电缆。

另外，请记住，许多 Arduino 具有串行通信“功能”的自动重置。[我在这里](https://stackoverflow.com/a/10921900/1440715)发布了解决方法的说明。

![在此处输入图像描述](../Images/7858f39b60310a101f76e2a5e59c83ee.png)

# git - 不知何故，我的 git 开发分支被合并到我的主分支中

> ID：12571507
> 
> 赞同：4
> 
> 时间：2012-09-24T19:25:38.597
> 
> 标签：git, git-flow

我正在使用 git-flow，但这并不重要。我的主分支是生产，我的开发分支是用于开发。

今天早上，我的主分支（这是我的生产版本）已经好几个星期没有被动过（自我上次发布以来）。现在，当我查看我的 master 分支时，它包含了来自我的开发分支的所有提交。

我没有看到合并，`git log`所以我很困惑如何让我的主分支回到它无聊的自我。

我怎样才能找到这个胭脂合并到我的主分支并在不丢失我的开发工作的情况下将其反转？

**编辑：**

这是否提供了足够的信息来了解发生了什么？

这是输出`git reflog`：

```
0fe067c HEAD@{0}: pull: Fast-forward
300ba32 HEAD@{1}: checkout: moving from develop to master
06f1dd9 HEAD@{2}: pull: Fast-forward
0fe067c HEAD@{3}: commit: Add back prefix.
815ffe8 HEAD@{4}: pull: Fast-forward
f4c3e23 HEAD@{5}: pull: Fast-forward
93d1037 HEAD@{6}: pull: Fast-forward
e027c53 HEAD@{7}: commit: Don't commit changes to Prefix
96e37a9 HEAD@{8}: commit: Update URLs based on current server 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:49:44.087

好吧，如果合并已经快进，它不会创建合并提交，这可能就是发生的事情。

那么，从那里，我们要去哪里？

好吧，如果你有一个远程仍然指向好的提交，你可以很容易地重置你的本地分支：

`git reset --hard origin/master`（在哪里`remote/branch`）

否则，它有点复杂，但仍然：您可以过滤您的 reflog 以仅记录主信息：

`git reflog show master`

如果记录的信息有意义，那么您可以重置：

`git reset --hard master@{1}`

请注意，这`--hard`将丢弃对工作树所做的所有本地更改，如果这很麻烦，请使用`--keep`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:54:02.133

发布时是否标记了生产分支？

您对上一个版本的 sha1 有任何想法吗？

我喜欢 Simon Boudrias 的回答，但它可以像找到您想要使用的提交`git log`并将分支重置为该提交一样简单`git reset --hard <sha1>`。

注意：您可能希望先在没有 --hard 部分的情况下进行重置，以确保它将您带到您想要的位置而不会丢失信息。

```
git co production
git log # find the sha1
git reset <sha1> # to check if this is the point you want
git co production
git reset --hard <sha1> 
```

由于您没有从“开发”中删除任何提交，因此您不会丢失提交（只要没有人直接在生产中进行开发）。

# php - PHP SimpleXML在父元素未知时直接访问子元素

> ID：12571510
> 
> 赞同：0
> 
> 时间：2012-09-24T19:25:43.113
> 
> 标签：php, simplexml

假设我们有这个 XML 文件：

```
<root_element>
    <element_1>
         <hello_element>
            Hello1
         </hello_element>
    </element_1>

    <element_1>
       <element_2>
          ...
          <element_n>
             <hello_element>
                Hello2
             </hello_element>
          </element_n>
          ...
       </element_2>
    </element_1>

</root_element>

$hello = new SimpleXMLElement('hello.xml');
echo $hello->element_1[0]->hello_element; 
```

输出是：Hello1

```
echo $hello->element_1[1]->element_2-> ... ->element_n->hello_element; 
```

输出是：Hello2

```
echo $hello->element_1[1]->hello_element; 
```

输出是：

是否可以在不知道父元素的名称或数量的情况下直接访问子元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:29:08.943

是的你可以。使用[xpath](http://www.w3schools.com/xpath/xpath_syntax.asp)

我想`$simpleXML->xpath('/*')`会得到最后的项目。

`$simpleXML->xpath('//*/*/*')`那将获得3级物品。

（未测试）

[SimpleXML::xpath](http://php.net/manual/en/simplexmlelement.xpath.php)

# javascript - 为什么外部 js 脚本经常在 HTML 页面底部使用 document.write() 加载？

> ID：12571515
> 
> 赞同：4
> 
> 时间：2012-09-24T19:26:05.390
> 
> 标签：javascript

谷歌分析就是一个例子：

```
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); 
```

将 document.write() 替换为文字值是否同样好：

```
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"> 
```

? 我猜这个标签是用 document.write() 输出的，只是因为 gaJsHost ( `'http://www.'`) 的值是不知道的。但是，如果已知，是否有任何理由使用 document.write() 输出脚本标记而不是按字面意思包含它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:33:31.210

默认情况下，当在 html 页面上遇到脚本时，会阻止页面的其余部分加载。只有当他们完成下载和执行后，页面的其余部分才会继续加载。来自[Nicholas C. Zakas](http://www.nczonline.net/)的*高性能 Javascript*：

> 这是页面生命周期的必要部分，因为脚本在执行时可能会导致页面发生变化。典型的例子是在页面中间使用 document.write() （广告经常使用）。

通过动态插入脚本，就像上面所做的那样，您可以克服这种行为 - 没有页面阻塞 - 加载异步发生。

通过将东西放在页面底部，您可以确保在 javascript 之前加载 html 和 css。这样，在加载 javascript 时，用户已经可以看到该页面。

一切都与性能有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:31:42.780

以确保浏览器在页面呈现后加载它们。

这是一个性能的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:34:44.297

有几个可能的原因： 1\. 确保在加载 javaScript 文件之前页面上已经存在 DOM 的某些部分。这可以防止您尝试操作未创建的 DOM 元素。2\. 加快速度；浏览器在加载 javaScript 时通常会进入单线程模式，因此如果您一开始并不真正需要它，最好延迟它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:35:26.760

我会首先参考一个很好的资源：

[http://webreflection.blogspot.com/2009/12/documentwriteshenanigans.html](http://webreflection.blogspot.com/2009/12/documentwriteshenanigans.html)

所以读完这篇文章后，我可以看到它的优点是在页面渲染后加载脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:49:09.893

这是将脚本生成的文本添加到页面中的最快方法[浏览器不必修改DOM结构]。因此用于插入广告脚本[如果广告服务器慢则崩溃]。将用户生成的数据添加到url。通过添加随机值来防止缓存。

主要用于它的速度。

# android - 如何在android中将图片从某个位置显示到ImageView？

> ID：12571520
> 
> 赞同：0
> 
> 时间：2012-09-24T19:26:25.593
> 
> 标签：android

我有一张`ImageView`和一张照片。
我有这样一张图片的位置：

```
file:///mnt/sdcard/Android/data/com.dev.app1/files/Pictures/20120924-092226.jpg 
```

如何在图像视图中显示此图片？

只是做`imageView.setImageURI()`并将uri设置为`file:///mnt/sdcard/Android/data/com.dev.app1/files/Pictures/20120924-092226.jpg`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:47:23.497

您应该使用 imageView.setImageURI(Uri.Parse(uriString)) 而不仅仅是 imageView.setImageURI(uriString)

# javascript - 为什么我的粘性导航在我的 ipad 上不起作用？

> ID：12571523
> 
> 赞同：0
> 
> 时间：2012-09-24T19:26:43.657
> 
> 标签：javascript, html, css

我的单页网站 ( [http://www.stefaanoyen.be](http://www.stefaanoyen.be) ) 具有粘性导航功能，但在我的 iPad 上无法正常工作。它始终位于页面顶部，但是当我单击链接时，什么也没有发生。这些链接仅在我位于页面顶部或链接指向的部分已经部分可见时才有效。

我不知道这是 javascript、css 还是 html 问题。简而言之，我不知道为什么会出错，请在这里帮助我:)

非常感谢你帮助我！斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:37:37.290

很确定`postion:fixed`不支持移动浏览器。查看这篇 quirksmode 文章，它解释了原因。[http://www.quirksmode.org/blog/archives/2010/12/the_fifth_posit.html](http://www.quirksmode.org/blog/archives/2010/12/the_fifth_posit.html)

# silverlight - 如何解决引用视图的控件

> ID：12571529
> 
> 赞同：2
> 
> 时间：2012-09-24T19:27:07.300
> 
> 标签：silverlight, mvvm, view, viewmodel, mvvm-light

我正在为我的 Siverlight 项目使用 Galasoft 的 Light MVVM。

我已经按照指示设置了所有内容：绑定`ViewModel`到`View`;`DataContext`

我有一个名为的`inkCanvas`画布`View`。

当`ViewModel`获取更新的项目数据时，我需要引用`inkCanvas`来创建一个`CanvasRender`实例`public CanvasRender(Canvas canvas, ProjectData pdata)`。

问题出在 MVVM 中，`ViewModel`对此一无所知`View`，那么我如何在其中引用控件（`inkCanvas`）`View`？

PS（已编辑）：我所做的解决方法是：当我将项目数据传递给 时`ViewModel`，我还传递了`inkCanvas`from`View`的代码隐藏。嗯，现在我的代码隐藏不干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:28:54.397

根据上面的评论，一种方法是扩展`Canvas`并保留对该`CanvasRender`类的引用。

```
public class MyCanvas : Canvas
{
    private CanvasRender _canvasRender;
    private ProjectData _data;

    public ProjectData Data
    {
        get { return _data; }       
        set
        {
            _data = value;
            _canvasRender = new CanvasRender(this, _data);
        }
    }

    public MyCanvas() : base()
    {
    }
} 
```

您可能还想创建`ProjectData`一个依赖属性，以便它是可绑定的。

这允许您维护 MVVM 模式，因为现在您可以在 XAML 中编写：

```
<local:MyCanvas ProjectData="{Binding ViewModel.ProjectData}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:58:44.183

如果您要使用 EventToCommand 方法（您在另一个答案中尝试过），那么不要使用 PassEventArgsToCommand 属性，而是使用 CommandParameter 属性并将其绑定到您的 Canvas。

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <cmd:EventToCommand Command="{Binding Path=CanvasLoadedCommand}"
                            CommandParameter="{Binding ElementName=inkCanvas}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

然后在您的 ViewModel 中：

```
public class ViewModel
{
    private Canvas m_canvas;

    public RelayCommand<Canvas> CanvasLoadedCommand { get; private set; }

    public ViewModel() 
    { 
        CanvasLoadedCommand = new RelayCommand<Canvas>(canvas =>  
        { 
            m_canvas = canvas;
        }); 
    }
} 
```

所以一旦你的画布被加载，你应该在你的视图模型中保存一个对它的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:40:21.153

在 MVVM 模式中，您不会直接在 ViewModel 中引用控件。在 MVVM 中，一切都是“绑定”的。您的 inkCanvas 将绑定到您的 ViewModel 中的一个属性。

```
public class MyViewModel : INotifyPropertyChanged
{
    private readonly StrokeCollection _mystrokes;

    public MyViewModel ()
    {
        _mystrokes= new StrokeCollection();
        (_mystrokesas INotifyCollectionChanged).CollectionChanged += delegate
        {
            //the strokes have changed
        };
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public StrokeCollection MyStrokes
    {
        get
        {
            return _mystrokes;
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

和 XAML：

```
<InkCanvas Strokes="{Binding MyStrokes}"/> 
```

**编辑 ：**

也许您的情况的解决方法是使用 EventToCommand ：这允许直接在 XAML 中将 UI 事件绑定到 ICommand （并使用 Args 将 ref 传递给 inkCancas）

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <cmd:EventToCommand Command="{Binding Mode=OneWay, Path=LoadedCommand}"
                            PassEventArgsToCommand="True" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

# oop - VBA 中的公共对象模块是什么？

> ID：12571530
> 
> 赞同：8
> 
> 时间：2012-09-24T19:27:09.090
> 
> 标签：oop, vba, excel

我试图在 VBA 中尽可能接近函数指针/抽象类。

我有一个名为`VerificationManager`并验证几个电子表格中的一堆单元格匹配的类。这将根据所使用的信息和电子表格以不同的方式完成。

我希望能够通过使用该`Application.Run`函数指定要在字符串中调用的方法来使代码可重用。所以我可以重写改变的函数。

现在，如果我使用 Java 或 C#，我将能够扩展一个抽象类并将内部结构重写为函数。如果我使用 JavaScript，我可以将函数存储在变量中并将变量传递给类并从那里调用它。

在我的类中，我有一个名为“verificationModule”的公共属性，我将其设置为我希望它调用的函数的名称。

```
Sub VerifyWorkLocations(empLoc As EmployerLocation)
...
    For i = 0 To empLoc.numOfEmp
        Application.Run verificationModule, empLoc.taxdescmatch, empLoc.employees(i)
    Next i
...
End Sub 
```

但是，当我尝试打电话时，`Application.Run`我收到以下错误：

> 编译错误：
> 
> “只有在公共对象模块中定义的用户定义类型才能被强制转换为变体或从变体强制转换或传递给后期绑定函数”

我已经尝试将我的用户定义类型放在 a 中，`Class Module`但它基本上说类模块是类型的错误位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T20:13:56.163

该错误来自成熟的 VB，您可以在其中创建一个 ActiveX dll 项目，在那里创建一个公共类并将 UDT 放入该类。

在 VBA 中，当您需要强制转换为变体或从变体强制转换时，您可以使用类而不是 UDT。

因此，只需声明一个包含 UDT 中所有字段的类，然后删除 UDT。

或者，在 VB6 中创建一个仅包含类型声明的 DLL，并从 VBA 引用该 dll。或者，如果您对 IDL 感到满意，则直接创建 TLB 文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T20:06:26.667

要将模块添加到 VBA 应用程序，请尝试以下步骤（假设您已经进入 VBA IDE）：

1.  在 Project Explorer 中，右键单击您的项目。
2.  点击“插入...”
3.  选择“模块”。
4.  如果不存在模块，将在 VBA/Excel 项目中创建一个名为“Modules”的新文件夹，并创建一个默认名称为“Module1”的模块。
5.  双击模块以在源代码编辑器中打开它。

这是您必须放置 UDT 的地方。我相信这是因为这些类型在 VBA 内部存储的方式与声明/操作为类的元素/对象的 COM 样式结构不同...

![在此处输入图像描述](../Images/e375bb068f25d92958a89cca8d428cf9.png)

# c# - 如何在 Web 表单上将文本居中？

> ID：12571531
> 
> 赞同：2
> 
> 时间：2012-09-24T19:27:08.637
> 
> 标签：c#, asp.net, css

这就是我所拥有的，它没有被集中。由于某种原因，它一直向左。

```
<div>
        <asp:Label ID="eagleReplicationManagerLabel" runat="server" CssClass="eagleReplicationManagerLabel">
                Eagle Replication Manager
        </asp:Label>
    </div> 
```

它的CSS：

```
.eagleReplicationManagerLabel
{
    position: fixed;
    font-size: 30px;
    color: #0000FF;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:34:46.400

它实际上正在工作，但您看不到结果，因为它被呈现为一个跨度，它采用其内容的确切宽度。所以文本没有足够的空间来调整。

增加css样式的宽度会告诉你原因

```
.eagleReplicationManagerLabel
{
    position: fixed;
    font-size: 30px;
    color: #0000FF;
    text-align: center;
    width:500px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:29:17.040

`text-align: center;`需要在包含`<div>`标签的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:30:27.353

文本居中，但它是一个内联元素，因此它仅与内部文本一样宽。

这就是为什么你不能说它是居中的。

给它一些宽度或使其阻塞，您将看到居中。

```
.eagleReplicationManagerLabel
{
    position: fixed;
    font-size: 30px;
    color: #0000FF;
    text-align: center;
    display:block
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:31:03.780

这里的问题是在 html 上`asp:Label`呈现为 a并且元素默认使用; 结果，您的 CSS 类什么也不做。`span``span``display:inline`

如果要将文本在 DIV 中居中，请在`text-align:center`DIV 上设置或设置`display:block`在`.eagleReplicationManagerLabel`

```
.eagleReplicationManagerLabel
{
    position: fixed;
    font-size: 30px;
    color: #0000FF;
    text-align: center;
    display:block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:49:30.180

```
.center{
width:200px;
margin:auto;
}

.eagleReplicationManagerLabel
{
 position: fixed;
 font-size: 30px;
 color: #0000FF;
 text-align: center;
}
<div>
<div class="center">
    <asp:Label  Text="Eagle Replication Manager" ID="eagleReplicationManagerLabel1" runat="server" CssClass="eagleReplicationManagerLabel"></asp:Label>
</div>

</div> 
```

# mod-rewrite - 何时使用哪个 mod_rewrite 规则进行自路由？

> ID：12571532
> 
> 赞同：0
> 
> 时间：2012-09-24T19:27:09.343
> 
> 标签：mod-rewrite, url-routing

有几种方法可以为自路由编写 mod_write 规则。目前我正在使用这个：

```
RewriteCond %{REQUEST_URI} !\.(js|ico|gif|jpg|png|css)$
RewriteRule ^.*$ index.php [NC,L] 
```

但我也可以使用

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php 
```

或者

```
ErrorDocument 404 /index.php 
```

可能还有更多。

使用这些示例之一有什么缺点吗？

有没有一个规则比另一个更有意义的用例？

你能详细解释一下这些规则之间的区别吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:50:42.787

当您的情况是：

```
RewriteCond %{REQUEST_URI} !\.(js|ico|gif|jpg|png|css)$ 
```

然后只有图像、图标、样式和 javascript 被排除在路由之外。这意味着您无法访问静态 html、目录或目录索引。因此，如果您只是想在某处下载一个静态 html 页面，并在没有通过 index.php 路由的情况下提供它。这也意味着如果您不小心将图像、脚本或样式放在错误的位置，并尝试访问它（通常会得到 404），即使它不会通过 index.php 路由，也会产生默认的 404 错误页。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

这些条件将排除任何指向现有资源的 URI。因此，如果您在文档根目录中的任何位置绘制图像、脚本或目录、静态 html 等，您将能够到达那里而无需通过 index.php 对其进行路由。有时`RewriteCond %{REQUEST_FILENAME} !-s`还包括条件，它不包括指向符号链接的 URI。这通常是您在进行路由时会看到的，wordpress 使用它。

```
ErrorDocument 404 /index.php 
```

这与之前的条件基本相同，除了它在 mod_rewrite 之外执行，并且无法在将来或根据需要强加其他条件。在 mod_rewrite 之外进行路由的缺点是 mod_rewrite 和核心指令（在本例中为 ErrorDocument）在 URI 文件映射管道中的不同时间对 URI 进行处理。因此，如果您有做其他事情的规则，它们可以被应用，然后最终仍然通过 index.php 路由，因为这 2 个指令相互冲突。仅仅因为重写规则在管道中的某一点应用并不意味着其他指令稍后不会在管道中应用。这是一种不好的路由方式。

还有类似的东西：

```
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule ^.*$ index.php [L] 
```

这将盲目地路由**一切**。甚至 javascript，甚至图像，甚至静态 html，一切。有时这正是人们想要的。最终，这将取决于您想要什么以及您的 index.php 脚本做什么。它会处理404吗？（就像您在第一个路由规则中想要的那样），它只是要处理非静态资源吗？（就像第二条规则所做的那样），或者它是一个字面上的包罗万象并且会做所有事情（上面的规则是做什么的）？

另请注意，您的重写标志在第一条和第二条规则之间是不同的。如果你有其他规则，这些很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:46:34.103

第一个示例（您说您使用的示例）的最大缺点是此方法对文件扩展名（.js .ico .gif .pnd）进行了硬编码，这些文件扩展名被排除在重写为 index.php 之外。这样做的问题是，如果您需要添加使用不在排除列表中的文件扩展名的新静态内容，则必须相应地修改重写规则。例如，如果您要开始托管 Flash 内容并需要托管 .swf 和 .flv 文件，则需要更新现有的 rewritecond 规则。

中间解决方案是最好的（恕我直言），因为它完全按照它所说的做，即如果请求的文件不存在（！-f 条件）`OR`请求的目录不存在（！-d 条件）然后重写请求到`index.php`.

# c# - 如何将整数转换为 ISO8601 TimeSpan？

> ID：12571535
> 
> 赞同：1
> 
> 时间：2012-09-24T19:27:16.780
> 
> 标签：c#, parsing, datetime

这是我的输入：

```
55 
```

这是我想要的输出：

```
PT55H 
```

C# 中是否有一个内置类可以将时间跨度转换为：`TimeSpan.TryParse(55)`或作为带小时的字符串“55”转换为 ISO8601 格式的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:45:14.487

`TimeSpan`您可以使用静态`TimeSpan.FromHours`方法将数字转换为 a 。例如`var ts = TimeSpan.FromHours(55.0);`.

如果你总是想要只用小时表示的时间，在 ISO 系统中，也许你可以简单地说`var isostring = String.Format("PT{0}H", ts.TotalHours);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:36:03.157

同事刚刚为我找到了这个：

```
TimeSpan start = new TimeSpan(int.Parse(txtStartHours.Text), 0, 0); 
durationNode.Element("StartTime").Value = XmlConvert.ToString(start); 
```

它似乎将其转换为`PT2D7H`，但由于我在`XMLConvert.ToTimeSpan().TotalHours`其他地方使用，它应该不会造成任何问题！

# jquery - Web 服务修剪起始零点

> ID：12571536
> 
> 赞同：3
> 
> 时间：2012-09-24T19:27:21.207
> 
> 标签：jquery, web-services, http-get

我已经找到了一个解决方法，但不确定它为什么会导致这种情况，所以我可以在没有“解决方法”的情况下正确修复它

我有一个网络服务方法..

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
[WebMethod(EnableSession = true)]
public string Validate(string value)
{
} 
```

我有一个调用这个方法的javascript方法..

```
function CheckABAValidation() {
    $.ajax({
        type: "GET",
        url: '../Service/MyWebService.asmx/Validate',
        data: { value: $('#tbValue').val() },
        contentType: "application/json",
        success: function (data) {
        }
    });
} 
```

问题是，当我输入`021214156`时`tbValue`，当我进入 WebService.. 时，值是`21214156`，但是如果我这样做`alert($('#tbValue').val());`了，它会显示`021214156`，所以看起来 Web 服务在进入 Web 服务之前看到了一个数字。

试过没有成功：

```
数据：{值：新字符串（$（'#tbValue'）.val（））}，
```

```
数据：{值：$('#tbValue').val().toString()}，
```

我所做的修复正在改变：

```
data: { value: $('#tbValue').val() }, 
```

到：

```
data: { value: ' " ' + $('#tbValue').val() + ' " ' }, 
```

有没有更好的方法让 Web 服务知道这是一个字符串而不是数字，即使字符串是参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:22:40.847

没关系，想通了。。

曾是

```
数据：JSON.stringify({ value: $('#tbValue').val() }),

```

这是由于我的网络服务有

```
ResponseFormat = ResponseFormat.Json
```

# entity-framework - 实体框架 4.1 关系和插入？

> ID：12571538
> 
> 赞同：0
> 
> 时间：2012-09-24T19:27:22.177
> 
> 标签：entity-framework, c#-4.0, entity-framework-4

我有一个 Entity Framework 模型，它有 3 个表（每个表都有 indentity 主键）。根表与子表具有一对多的关系，该子表与其子表具有一对多的关系。该模型正确地反映在从数据库生成的模型中。

在代码中，我们在父表中插入（添加），然后插入子表，最后插入子表。代码类似于下面的示例：

```
foreach(var parentItemDTO in someDTOCollection) {
    foreach(var someChildDTOItem in someChildDTOCollection) {
        // Do some mapping here to the childEntity from DTO
        // The foreign key relationship isn't set during mapping.

        childTable.Insert(childEntity); // Underlying code is _dbSet.Add(entity)

        foreach(var someChildChildDTOItem in someDTOChildChildCollection) {
            // Do some mapping here to childChildEntity from DTO
            // The foreign key relationship isn't set during mapping.

            childChildTable.Insert(childChildEntity);   // Underlying code is _dbSet.Add(entity)
        } 
    }

    // Do mapping here of the parentEntity from DTO

    parentTable.Insert(someEntity);  // Underlying code is _dbSet.Add(entity)
} 
```

插入数据库似乎正在工作。但是，我想了解的是，在没有我在映射期间明确定义外键关系的情况下，EF 如何维护这些对象的关系？这些插入范围安全吗？这会导致孤儿或孩子被插入错误的父母（现在我们没有看到这种情况发生，但它有可能）吗？

谢谢！

**编辑（更正）：**

代码已更新以反映父插入发生在所有子插入之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:40:17.023

要让 EF 正确跟踪实体，您需要具有表示实体之间关系的属性。您的父实体应该有一个引用子级的属性，而子级又应该有引用其子级的属性。例如：

```
class ParentEntity {
    public int Id { get; set; }
    public ICollection<ChildEntity> Children { get; set; }
}

class ChildEntity { 
    public int Id { get; set; }
} 
```

只要将子实体添加到父子集合中，EF 就可以跟踪关系：

```
var parent = new ParentEntity();
parent.Children.Add(new ChildEntity());
parent.Children.Add(new ChildEntity()); 
```

EF 知道 parent.Children 集合中的对象引用表示新实体（未附加到上下文的实体）并将相应地处理它们。在调用 SaveChanges() 之前，不会发生对数据库的实际插入。当您将对象添加到 DbSet 时，EF 刚刚开始在内存中跟踪它。只有当您调用 SaveChanges() 时，实体才会被写入数据库。此时 EF 会发现需要先保存父实体。然后它将在您的子实体中使用父实体的 PK 作为 FK。现在您可以将父级添加到上下文中，这也将添加子级：

```
context.Set<ParentEntity>().Add(parent);
context.SaveChanges(); // adds parent and two children. 
```

# twitter-bootstrap - 导航栏固定在顶部但不是全宽

> ID：12571540
> 
> 赞同：14
> 
> 时间：2012-09-24T19:27:24.970
> 
> 标签：twitter-bootstrap

使用 2.1.1 Twitter Bootstrap，我正在尝试创建一个固定在页面顶部但**不是**全宽的导航栏：

```
<div class="container">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="#">Project name</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
</div> 
```

如果我删除 navbar-fixed-top 类：

```
 <div class="navbar navbar-fixed-top"> 
```

到

```
 <div class="navbar"> 
```

然后导航栏最终看起来像我想要的那样 - 只有 940px 宽而不是全宽 - 但当然它不再固定在页面顶部。如何将此导航栏固定在页面顶部而不使其变为全角？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-31T19:28:04.383

您可以创建一个 navbar-fixed-top 或 nav-bar-fixed-bottom ，而无需将其变为全宽并响应任何屏幕尺寸。

第 1 步：添加那些 css :(我创建了一个名为的 css 类`.navbar-fixed-width`：)

```
@media all and (min-width: 768px) {
  .navbar-fixed-width {
    width: 768px;
    margin-left: auto;
    margin-right:auto;
 }
}

@media all and (min-width: 992px) {
  .navbar-fixed-width {
    width: 992px;
    margin-left: auto;
    margin-right:auto;
  }

}

@media all and (min-width: 1200px) {
  .navbar-fixed-width {
    width: 1200px;
    margin-left: auto;
    margin-right:auto;
  }
} 
```

第2步：`.navbar-fixed-width`像这样导航类。

```
<div class="navbar navbar-inverse navbar-fixed-top navbar-fixed-width" role="navigation">
    <div class="container">
         <div class="navbar-header">
         </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T20:08:49.747

您可以通过将其设置为固定来覆盖 Bootstrap 的定位 -`absolute`如果您不希望它与页面一起滚动，请使用：

```
.navbar {
    position: fixed !important;
    top: 0px;
    width: 940px;
} 
```

（如果您打算使用多个导航栏，请考虑给它一个 ID）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T17:41:28.520

您可以使用您的原始标记和简单的样式（使用类 'navbar' 到您需要的宽度：

```
.navbar {
width: 50%;
}

<div class="container">
  <div class="navbar navbar-fixed-top"> 
```

请参阅此处的教程：

[http://www.webdesignforbeginners.info/bootstrap-simple-navbars/](http://www.webdesignforbeginners.info/bootstrap-simple-navbars/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T17:55:43.507

如果您将导航栏包装在 a 中`div`， Bootstrap 3+ 应该能够为您处理动态宽度`class`，`container`那么宽度将根据可用空间是动态的。

请查看[Bootstrap css](http://getbootstrap.com/css/)部分以获取更多详细`container`信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T21:49:59.917

汤米阮解决方案少。

```
.navbar-fixed-width {
  margin-left: auto;
  margin-right: auto;

  @media all and (min-width: @screen-sm-min) {
    width: @screen-sm-min;
  }

  @media all and (min-width: @screen-md-min) {
    width: @screen-md-min;
  }

  @media all and (min-width: @screen-lg-min) {
    width: @screen-lg-min;
  }
} 
```

# ios - 切换视图会使应用程序崩溃

> ID：12571545
> 
> 赞同：0
> 
> 时间：2012-09-24T19:27:40.557
> 
> 标签：ios, cocoa-touch, uiview

这是一个非常奇怪的问题。

我包含下一个视图的 .h 文件：

```
#import "MainGame.h" 
```

当我按下屏幕时，我有这个代码来切换房间：

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    MainGame *newview = [[MainGame alloc] initWithNibName:@"MainGame" bundle:nil];
    newview.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:newview animated:YES completion:NULL];
} 
```

它在 iOS 5 模拟器中运行良好；但是当我在运行 iOS 4.2 的 iPod 上测试它时，它总是崩溃。

我所有的 IBOutlets 都正确连接，正如我已经说过的那样，它在模拟器中运行良好，但在我的 iPod 上却没有。

我以前在我的 iPod 上使用过每个单独的视图，所以我没有使用任何需要 iOS 5 或任何东西的功能；只是这段代码切换了不起作用的视图。

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:42:08.730

我相信它是一个版本问题

```
[self presentViewController:newview animated:YES completion:NULL]; 
```

在 iOS 4.2 中不存在，但在 iOS 5 中存在

试试这个

```
[self presentModalViewController:newview animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:42:23.537

根据 Apple 文档，presentViewController 是 iOS 5.0 及以上版本。

# sql - 处理小数时 French_CI_AS 的语法

> ID：12571549
> 
> 赞同：0
> 
> 时间：2012-09-24T19:27:58.157
> 
> 标签：sql, sql-server-2008, decimal, collation

我一直在做很多谷歌搜索，试图找到使用法语（加拿大）本地化插入或更新具有十进制值的列所需的确切语法。*我不是以法语为母语的人，也没有任何使用法语排序规则的经验。*使用 Latin_General_CI_AS 查询将如下所示：

```
INSERT INTO [dbo].[MyTable] (ID, StringField, DecimalField) VALUES (1, 'Some value', 0.5) 
```

但是当使用法语排序规则时，十进制数字看起来`0,5`不是`0.5`简单的翻译，而是让 SQL Server 陷入混乱。INSERT 查询看起来像这样（*虽然，这不起作用*）：

```
INSERT INTO [dbo].[MyTable] (ID, StringField, DecimalField) VALUES (1, 'Some value', 0,5) 
```

SQL Server 认为`5`是未指定列的附加值。我怎样才能使这项工作。是否有一些字符可以用来包装数字以使 SQL Server 将其视为十进制值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:15:51.470

它与排序无关，它与使用的小数分隔符有关。

您应该使用参数查询。如果您使用的是参数化命令，那么 SQL 数据提供程序会处理小数分隔符。

```
string sqlcom = @"EXECUTE [dbo].[MyProc]  @x";
SqlCommand com = new SqlCommand(sqlcom, MyConnectionX);
com.Parameters.Add("@x", SqlDbType.Decimal);
com.Parameters["@x"].Value = someValue;
com.ExecuteNonQuery(); 
```

# jquery - 上传 HTTP 错误

> ID：12571553
> 
> 赞同：0
> 
> 时间：2012-09-24T19:28:17.903
> 
> 标签：jquery, asp.net-mvc, uploadify

我正在使用 uploadify 在我的 ASP.NET MVC 应用程序上上传一些文件。单击“上传”按钮后，只要我选择了一个文件-我就会收到以下错误：

```
test - Copy.csv (0.15KB) - HTTP Error 
```

这是我正在使用的代码：

```
 $(function () {
            $("#File").uploadify({
                'uploader': '/js/component/uploadify/uploadify.swf',
                'script': '/email/UploadFile',
                'cancelImg': '/js/component/uploadify/cancel.png',
                'fileExt': '*.csv',
                'fileDesc': '*.csv',
                'auto': true,
                'multi': false,           
                'buttonText': 'Upload'
            });
  }); 
```

这是控制器：

```
[HttpPost]
        public ActionResult UploadFile(HttpPostedFileBase fileData, FormCollection forms)
        {
            //some code here
            return Json(new { success = false, message = result.Message });
        } 
```

控制器内部的断点没有被命中。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:31:08.107

我以前遇到过这个问题。对我来说，它与uploadify 或我的代码无关。它与服务器有关。就像，当我选择任何文件时，我遇到了 http 错误。我通过在我的 .htaccess 中添加以下内容来修复它

```
<IfModule mod_security.c>
    SecFilterScanPOST Off
</IfModule> 
```

希望对你有效。

# git - 将损坏的松散对象修复为 git 中的提交

> ID：12571557
> 
> 赞同：22
> 
> 时间：2012-09-24T19:28:32.383
> 
> 标签：git

在收到此错误之前，我立即执行了以下操作：

```
user@thismachine:~/file/path$ git add *
user@thismachine:~/file/path$ git push 
^C
user@thismachine:~/file/path$ git commit -m "my commitmesg" 
```

（我惊慌失措，因为我忘记在推送之前添加一个提交，所以我 cntrl+c'ed 它。

现在，我收到以下错误`git fsck --full`：

```
error: inflate: data stream error (incorrect header check)
error: corrupt loose object '5cdeb9c3a1fe164cb4d2779d1e0d9d9f4ef18c6a'
fatal: loose object 5cdeb9c3a1fe164cb4d2779d1e0d9d9f4ef18c6a (stored in .git/objects/5c/deb9c3a1fe164cb4d2779d1e0d9d9f4ef18c6a) 
```

git cat-file -t 5cdeb9c3a1fe164cb4d2779d1e0d9d9f4ef18c6a 返回这个对象是一个提交。

搜索后，我发现如果对象是[blob](https://stackoverflow.com/questions/4254389/git-corrupt-loose-object)，但如果它是提交，则无法解决此问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-08-25T01:04:34.530

[http://vincesalvino.blogspot.ca/2013/08/git-empty-files-corrupt-objects-and.html](http://vincesalvino.blogspot.ca/2013/08/git-empty-files-corrupt-objects-and.html)的解决方案允许我解决问题：

```
find .git/objects/ -size 0 -exec rm -f {} \; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-24T19:37:30.973

首先，备份您现有的存储库。 `cp -r`或者其他的东西。这样，如果您尝试修复存​​储库将其搞砸，您可以恢复。

最简单的尝试是将损坏的目标文件替换为工作文件。如果您有存储库的备份，请使用它。否则，`git clone`从您的远程存储库中获取一个新副本并复制`.git/objects/5c/deb9c3a1fe164cb4d2779d1e0d9d9f4ef18c6a`到您现有的损坏的副本中。看看能不能解决。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T13:21:36.310

感谢您的回复。我在新的克隆存储库中运行它并返回它解压缩了 100% 的对象，但是它们不在该存储库的 .git/objects/pack 中。

所以，今天早上尝试了一些有效的方法。1\. 将我的 github 存储库克隆到一个单独的新目录中。2\. 将本地更改的文件（我最初想提交的）复制到我的新克隆存储库中，然后将它们推送到 github。3\. 核对我的旧本地存储库并 4\. 再次将其克隆到与旧存储库相同的文件路径。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-16T22:15:19.257

与 Schwerm 的回答非常相似，但我必须初始化一个新的 repo 来解压`.pack`文件：

```
git clone <repo-uri> my_repo.fresh_clone
mkdir my_repo.newly_unpacked
cd !$
git init
for pack_file in ../my_repo.fresh_clone/.git/pack/*.pack; do
    git unpack-objects < $pack_file
done 
```

`my_repo.newly_unpacked/.git/objects/<xx>/<sha1>`然后我按照错误消息的指示复制了文件。我被抓住了，因为一些操作，例如`git checkout`比简单的显示更多丢失的对象`git status`，所以最好在清理它们之前将恢复目录保留一段时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-14T08:29:21.610

对于遇到此问题的任何人，此问题的简单答案：**git clone**命令是解决方法，如果有远程存储库，则将其克隆到本地文件夹（删除损坏的本地存储库后），以防万一您没有远程存储库，然后尝试将损坏的 repo 推送到 github，然后从那里克隆它，我认为损坏的对象不会被推送，它将解决问题

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-05-19T14:40:11.237

当系统在提交之前崩溃时，我遇到了类似的问题。幸运的是，我所要做的就是将完整的 repo 再次克隆到一个新目录并丢弃旧目录。

新克隆的 repo 没有损坏的 .git/objects/#num/#hash 文件。

# java - JavaFX上的复选框单元工厂+ Tableview

> ID：12571559
> 
> 赞同：3
> 
> 时间：2012-09-24T19:28:43.720
> 
> 标签：java, tableview, javafx, checkbox

我正在为我的肥皂服务编写一个 JavaFX 客户端，我的 fxml 页面必须包含一个完全可编辑的 TableView，它由 Product 类实体组成。我的表现在由 2 个文本列和一个由 Double 值组成。我想在它的单元格中添加一个带有 CheckBox 项目的选择列。使用 Ensemble 演示应用程序我扩展了一个 Cell 类以使用 CheckBoxes ：

```
public class CheckBoxCell<S, T> extends TableCell<S, T> {

private final CheckBox checkBox;
private ObservableValue<T> ov;

public CheckBoxCell() {
    this.checkBox = new CheckBox();
    this.checkBox.setAlignment(Pos.CENTER);
    setAlignment(Pos.CENTER);
    setGraphic(checkBox);
}

@Override
public void updateItem(T item, boolean empty) {
    super.updateItem(item, empty);
    if (empty) {
        setText(null);
        setGraphic(null);
    } else {
        setGraphic(checkBox);
        if (ov instanceof BooleanProperty) {
            checkBox.selectedProperty().unbindBidirectional((BooleanProperty) ov);
        }
        ov = getTableColumn().getCellObservableValue(getIndex());
        if (ov instanceof BooleanProperty) {
            checkBox.selectedProperty().bindBidirectional((BooleanProperty) ov);
        }
    }
}

@Override
public void startEdit() {
    super.startEdit();
    if (isEmpty()) {
        return;
    }
    checkBox.setDisable(false);
    checkBox.requestFocus();
}

@Override
public void cancelEdit() {
    super.cancelEdit();
    checkBox.setDisable(true);
}
} 
```

然后在 fxml 视图控制器类中，我为请求的 TableColumn 设置了一个 cellFactory ：

```
private Callback<TableColumn, TableCell> createCheckBoxCellFactory() {
    Callback<TableColumn, TableCell> cellFactory = new Callback<TableColumn, TableCell>  () {
        @Override
        public TableCell call(TableColumn p) {
            return new CheckBoxCell();
        }
    };
    return cellFactory;
}

...
products_table_remove.setCellFactory(createCheckBoxCellFactory()); 
```

我的问题是：

1）如果我有，如何使用 PropertyValueFactory 用未选中的复选框填充此列

```
private final ObservableList <Boolean> productsToRemove= FXCollections.observableArrayList(); 
```

由 Boolean.FALSE 值组成，然后创建视图。（TableView 由没有布尔属性的 Product 类组成（只有 3 个 String 和一个 Double 属性））？

2）我可以访问 Product 对象，其中包含使用 EventHandler 选择的行：

```
private void setProductDescColumnCellHandler() {
    products_table_remove.setOnEditCommit(new EventHandler() {
        @Override
        public void handle(CellEditEvent t) {
        ... 
```

我看到了很多带有布尔字段的实体示例。就我而言，我不想将布尔字段添加到 jax-ws 生成的类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T04:20:44.150

1) 预定义的类[javafx.scene.control.cell.CheckBoxTableCell](http://docs.oracle.com/javafx/2/api/javafx/scene/control/cell/CheckBoxTableCell.html)可以用来代替你的。

2）要向现有实例添加信息，我建议继承+委托，对于每个*数据*实例，实例化一个可用于提供 TableView的*视图实例：*

```
class ProductV extends Product {

   ProductV( Product product ) {
      this.product = product;
   }

   final Product         product;
   final BooleanProperty delected = new SimpleBooleanProperty( false );
} 
```

# qt - Qt：绘制三角形图像

> ID：12571566
> 
> 赞同：1
> 
> 时间：2012-09-24T19:29:11.033
> 
> 标签：qt, drawimage, qpainter

我需要做一些类似的事情`QPainter::drawImage`，但绘制给定图片的三角形部分（到我的小部件的三角形区域中）而不是使用矩形。

除了痛苦地尝试重绘每个像素之外，我知道我该怎么做吗？

感谢您的见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:44:50.507

如果您可以使用 QPixmap 而不是 QImage，您可以为 QPixmap[设置位图掩码](http://qt-project.org/doc/qt-4.8/qpixmap.html#setMask)，该掩码定义显示哪些像素以及哪些像素是透明的：

```
myPixmap->setMask(myTriangleMask);
painter->drawPixmap(myPixmap); 
```

这是另一个基于 QImage 的解决方案：

```
MaskWidget::MaskWidget(QWidget* parent) : QWidget(parent) {
   img = QImage("Sample.jpg");     // The image to paint
   mask = QImage("Mask.png");      // An indexed 2-bit colormap image
   QPainter imgPainter(&img);
   imgPainter.drawImage(0, 0, mask);  // Paint the mask onto the image
}

void MaskWidget::paintEvent ( QPaintEvent * event ) {
   QPainter painter(this);
   painter.drawImage(10, 10, img);
} 
```

Mask.png 是一个与 Sample.jpg 大小相同的图像文件。它包含一个支持透明度的 Alpha 通道。例如，您可以使用 The GIMP 轻松创建此文件。我添加了一个 alpha 通道，将我想要绘制的所有区域更改为透明，将所有其他区域更改为白色。为了减小尺寸，我最终将其转换为索引的 2 位图像。如果您需要根据各种参数计算三角形，您甚至可以使用 Qt 以编程方式创建遮罩图像。

# c# - URL Sharepoint Rest 查询中的保留符号（&、/ 等） - 错误请求

> ID：12571572
> 
> 赞同：2
> 
> 时间：2012-09-24T19:29:27.073
> 
> 标签：c#, sharepoint, rest, odata

在过去的几周里，我一直面临的一个问题是尝试在 SharePoint 中搜索列表项值并不断收到错误的请求错误。我有两个导致问题的符号，一个是我无法搜索带有 anh & 符号的东西，另一个是 /（正斜杠）。

我的代码看起来像：

```
ServiceContext context = new ServiceContext(new Uri("http://URL/_vti_bin/listdata.svc"));
    context.Credentials = CredentialCache.DefaultCredentials;
    var requestType = (System.Data.Services.Client.DataServiceQuery<ListTypeValue>)context.ListType
        .Where(v => v.Value.Equals(search)); 
```

搜索互联网后，除了说更改 IIS 设置或将其转换为 ASCII Html 值（注意：将 & 转换为 %27 仍然会导致错误的请求错误）之外，没有返回任何有效信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:12:01.773

我真的不建议使用 StartsWith 和 Length 的组合——在这种情况下，性能可能会成为一个真正的问题。假设您需要一个字符串键并且您希望您的键能够包含特殊字符，Peter Qian 在博客中介绍了我们可以给出的最佳建议。（此行为实际上来自 IIS 和 .NET 堆栈的组合。）

查看[http://blogs.msdn.com/b/peter_qian/archive/2010/05/25/using-wcf-data-service-with-restricted-characrters-as-keys.aspx](http://blogs.msdn.com/b/peter_qian/archive/2010/05/25/using-wcf-data-service-with-restricted-characrters-as-keys.aspx)了解更多详情，但您的问题应该通过关闭 ASP.NET 请求过滤来解决。请注意，这具有重要的安全风险。Peter 指出了其中一些，asafaweb.com 等安全过滤工具会抱怨这种解决方案。

长话短说：如果您可以使用整数或避免键中的受限字符，您的 Web 应用程序将更加安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:29:27.073

[我找到了这篇文章](http://developer.netflix.com/forum/read/74789)，它给了我一个想法。我打算尝试使用 HEX，但由于我使用的是 Web 服务，所以我什么也想不通。最后我想，嘿，有人说他们是怎么用substringof的，为什么不试试startswith呢！

最后！这个问题的一个解决方案。

```
INVALID:
http://URL/_vti_bin/listdata.svc/ListType('Search & Stuff')

VALID:
http://URL/_vti_bin/listdata.svc/ListType() $filter=startswith(Value,'Search & Stuff') 
```

我更进一步，因为这可能会返回不是我想要的。我添加的长度等于字符串长度，它工作得很好！

我的 C# 代码现在看起来像这样：

```
ServiceContext context = new ServiceContext(new Uri("http://URL/_vti_bin/listdata.svc"));
context.Credentials = CredentialCache.DefaultCredentials;
var requestType = (System.Data.Services.Client.DataServiceQuery<ListTypeValue>)context.ListType
    .Where(v => v.Value.StartsWith(search) && v.Value.Length == search.Length); 
```

希望这可以帮助其他人并节省一些头发拉扯！

* * *

## **更新：**

在得到人们的回复后，我找到了一个更好的方法来做到这一点。除了标准的 LINQ 查询方法之外，还有另一种选择。[请参阅 MSDN 文章](http://msdn.microsoft.com/en-us/library/dd673933.aspx)

```
System.Data.Services.Client.DataServiceQuery<ListTypeValue> lobtest = context.ListType
    .AddQueryOption("$filter", "(Value eq '" + CleanString(search) + "')"); 
```

现在我将实现[从 Mark Stafford 发布的链接](http://blogs.msdn.com/b/peter_qian/archive/2010/05/25/using-wcf-data-service-with-restricted-characrters-as-keys.aspx)并解析出保留字符。

# javascript - 标签关闭事件

> ID：12571575
> 
> 赞同：0
> 
> 时间：2012-09-24T19:29:39.427
> 
> 标签：javascript, html, google-chrome

任何人都知道捕捉 Google Chrome Tab 关闭事件的方法吗？（我看到有一个扩展 API，但我想知道是否有这样的 Web 应用程序 API；找不到）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:37:03.913

您可以使用`window.onunload`or`window.onbeforeunload`如果您正在使用`jQuery`，您可以使用`$(window).unload`. 即使您刷新页面，这些方法也会被调用，并且您无法区分选项卡的卸载和刷新。以下是实现

```
window.onunload = function(){    
 //your code
};

or
 window.onbeforeunload =function(){    
 //your code
};

$(window).unload( function(){    
 //your code
}; ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T19:33:49.040

您可以使用它来关闭所选的实际选项卡。

```
window.close() 
```

您可以更改此功能。

# c# - C# 覆盖实例方法

> ID：12571577
> 
> 赞同：6
> 
> 时间：2012-09-24T19:29:43.310
> 
> 标签：c#, .net

所以基本上我有一个对象，它接受实例并将它们添加到列表中。每个实例都使用虚拟方法，我需要在创建实例后覆盖这些方法。我将如何覆盖实例的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T19:31:28.147

你不能。您只能在定义类时覆盖方法。

最好的选择是使用适当的`Func`委托作为占位符，并允许调用者以这种方式提供实现：

```
public class SomeClass
{
    public Func<string> Method { get; set; }

    public void PrintSomething()
    {
        if(Method != null) Console.WriteLine(Method());
    }
}

// Elsewhere in your application

var instance = new SomeClass();
instance.Method = () => "Hello World!";
instance.PrintSomething(); // Prints "Hello World!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:34:33.983

一旦创建了对象，C# 就是静态的，您无法更改对象的行为。您可以使用继承对超类进行子类化，但这是在设计时完成的，而不是在运行时完成的。

```
class foo
{
    public virtual void dosomething()
    {
         console.writeline("this is foo");
    }
}

class bar : foo
{
    public override void dosomething()
    {
         console.writeline("this is bar");
    }
}

var list = new Foo[]{new foo(), new bar()}; 
```

还有AOP的概念——面向方面的编程。这是您可以开始在运行时注入行为的地方。我知道有两个框架可以做到这一点

1.  城堡动态代理
2.  春天网

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:37:17.970

这在运行时是不可能的。实例化后，您无法更改类的行为。但是，您可以考虑创建委托方法。

编辑，刚看到第一个答案，继续；）

# php - php中按权重从数组中随机取值

> ID：12571578
> 
> 赞同：14
> 
> 时间：2012-09-24T19:29:43.483
> 
> 标签：php, arrays, random, percentage

我知道这个问题可能已经被问过了，但我对前面的问题的理解不足以知道他们是否按照我的意愿行事。

```
$fruits = array('20' => 'apple', '40' => 'orange', '40' => 'pear'); 
```

关键是价值被挑选的机会的百分比。我想 mt_rand() 一个 0 到 99 之间的数字，并根据这些百分比从 $fruits 返回一个值。

我很可能很困惑，因为我不知道如何解释我在寻找什么。

预先感谢您的帮助。

编辑：想要一个随机值来自 $fruits，基于这些机会：

我希望有 40% 的机会得到一个橙子，有 40% 的机会得到一个梨，还有 80% 的机会得到一个苹果。

编辑：为了进一步澄清，因为很多答案都弄错了，（或者我只是不理解他们的代码），无论我选择什么数字，我都需要一个结果，而不仅仅是 20、40 或 40。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-24T19:35:35.747

首先，您的数组只有两个项目（apple 和 pear），因为 pear 由于具有相同的键而覆盖了橙色。所以使用相反的顺序。另外，不要在整数周围加上引号：

```
$fruits = array('apple' => 20, 'orange' => 40, 'pear' => 40); 
```

您应该选择一个随机数，然后比较数组的每个权重**加上之前权重的总和，**直到得到匹配：

```
$rand = rand(1,100);
$sum = 0;
$chosenFruit;

foreach ($fruits as $f=>$v) {
    $sum += $v;
    if ( $sum >= $rand ) {
        $chosenFruit = $f;
        break;
    }
}

echo "We have chosen the {$chosenFruit}!"; 
```

您甚至可以通过将`100`rand() 函数中的值替换为 $fruits 数组值的计算总和来使该过程更具弹性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T19:37:58.860

我认为这样的事情会做你想要的：

## [样本](http://codepad.org/3ED95tY0)

（在示例上多次单击提交按钮以获取重新执行的代码）

```
$fruits = array('apple' => '20', 'orange' => '40', 'pear' => '40');

$newFruits = array();
foreach ($fruits as $fruit=>$value)
{
    $newFruits = array_merge($newFruits, array_fill(0, $value, $fruit));
}

$myFruit = $newFruits[array_rand($newFruits)]; 
```

这将创建一个数组 ( `$newFruits`)，它是一个具有 100 个元素的数字索引数组。其中 20 个元素是“苹果”，40 个是“橙色”，40 个是“梨”。然后我们从该数组中选择一个随机索引。100 次中有 20 次得到“苹果”，100 次中有 40 次得到“橙色”，100 次中有 40 次得到“梨”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:32:40.773

```
 $key = rand(1,98); // rand() is inclusive of the range, hence 1-98.
  foreach( $fruits as $k => $v){
  if( $k == $key) {
    echo 'Chosen fruit is:' . $v; 
    break;
    } 
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:38:18.000

这条路有多条路要走，它们在很大程度上取决于您的数据。使用百分比，0 - 100，您的数组中可以有 100 个项目，每个项目映射到一个百分比，或者您可以有一个分配值的分布（很像您的示例中的数组）。

假设前者，您可以使用：

```
$key = mt_rand(0, 100);
$fruit = isset($fruits[$key]) ? $fruits[$key] : false; 
```

以上也可以与分布一起使用，以检查水果是否“存在”，但通常您会想要“如果百分比是`<=`值，则使用此水果”。可以通过以下方式完成类似的事情：

```
$key = mt_rand(0, 100);
$fruit = false;
foreach ($fruits as $percent => $value) {
    if ($percent <= $key) {
        $fruit = $value;
        break;
    }
} 
```

现在，有趣的部分。如果您想要*任何*百分比高于价值的水果怎么办？您可以修改上述内容以将每个匹配的水果存储到一个数组中，然后从该数组中选择一个随机值：

```
$key = mt_rand(0, 100);
$matches = array();
foreach ($fruits as $percent => $value) {
    if ($percent <= $key) {
        $matches[] = $value;
    }
}
$select = mt_rand(0, count($matches) - 1);
$fruit = $matches[$select]; 
```

# ruby - 如何测试 RSpec 中的信号处理，特别是 SIGTERM 的处理？

> ID：12571582
> 
> 赞同：9
> 
> 时间：2012-09-24T19:30:02.157
> 
> 标签：ruby, unit-testing, rspec, signals, sigterm

Heroku 可能出于各种原因向您的应用程序发送 SIGTERM，因此我创建了一个处理程序来处理一些清理工作，以防发生这种情况。一些谷歌搜索没有产生任何关于如何在 RSpec 中测试的答案或示例。这是基本代码：

```
Signal.trap('TERM') do  
    cleanup  
end

def cleanup
    puts "doing some cleanup stuff"
    ...
    exit
end 
```

测试程序收到 SIGTERM 时调用此清理方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-31T20:42:08.050

杀了自己！将信号发送到 RSpec`Process.kill 'TERM', 0`并测试处理程序是否被调用。确实，如果信号没有被捕获，测试将崩溃而不是很好地报告失败，但至少您会知道代码中存在问题。

例如：

```
class SignalHandler
  def self.trap_signals
    Signal.trap('TERM') { term_handler }
  end

  def self.term_handler
    # ...
  end

end

describe SignalHandler do
  describe '#trap_signals' do
    it "traps TERM" do
      # The MRI default TERM handler does not cause RSpec to exit with an error.
      # Use the system default TERM handler instead, which does kill RSpec.
      # If you test a different signal you might not need to do this,
      # or you might need to install a different signal's handler.
      old_signal_handler = Signal.trap 'TERM', 'SYSTEM_DEFAULT'

      SignalHandler.trap_signals
      expect(SignalHandler).to receive(:term_handler).with no_args
      Process.kill 'TERM', 0 # Send the signal to ourself

      # Put the Ruby default signal handler back in case it matters to other tests
      Signal.trap 'TERM', old_signal_handler
    end
  end
end 
```

我只是测试了处理程序是否被调用，但您同样可以测试处理程序的副作用。

# javascript - 基于下拉列表的标签+图形生成的最佳 JavaScript 设计模式

> ID：12571585
> 
> 赞同：0
> 
> 时间：2012-09-24T19:30:13.123
> 
> 标签：javascript, jquery, design-patterns, jquery-plugins

我对 JavaScript 相当陌生，必须根据选择下拉菜单生成图表。 ![在此处输入图像描述](../Images/e15df2838330d89910bf5d26b959e9b5.png)

从“视图”下拉列表中选择一个值将自动显示一些带有相应值的标签（参见模拟圆圈 5 和 6）（例如，平均值为 20 W 的功率上限 (W)）

该图将主要是 Y VS X，有一个 Y 轴。但是，如果从下拉列表中选择“自定义”，则会出现一个以上的标签（即，而不是单独的峰值功率，我得到峰值和平均功率）并且最多有 2 个 Y 轴（参见模拟）。选择自定义以外的任何内容将默认返回到一个 Y 轴

数据是在 X 小时内获取的。

最好的推荐设计模式是什么？

# java - 如何将文件上传到 SOAP Web 服务？

> ID：12571593
> 
> 赞同：4
> 
> 时间：2012-09-24T19:31:06.220
> 
> 标签：java, web-services, soap, upload

我有一个 .p12 文件，我想将它上传到 SOAP Web 服务，以便我的应用程序可以请求稍后获取它。我如何上传这个文件？

我不一定要在我的应用程序代码中使用它，因为这是我只想做一次的事情。但是，如果重要的话，我正在使用 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:57:15.703

如果服务支持，您应该查看 MTOM。如果它接受文件附件，那么它可能使用 MTOM。不确定将其保留在应用程序代码之外是什么意思，但是如何创建和发送附件取决于您使用的 Web 服务平台。这是有关在 Java 的 JAX-WS 中发送附件的最新文档：

[http://metro.java.net/guide/ch06.html#binary-attachments-mtom](http://metro.java.net/guide/ch06.html#binary-attachments-mtom)

如果您想以独立于语言的方式查看实际发生的情况，请获取 SoapUI 并将其设置为使用 MTOM 发送附件：

[http://www.soapui.org/SOAP-and-WSDL/adding-headers-and-attachments.html](http://www.soapui.org/SOAP-and-WSDL/adding-headers-and-attachments.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:33:11.257

将文件作为流读取并通过网络发送。就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T08:59:23.443

在服务器端发送编码字符串和 Base64.decode 文件字符串

> ```
> String strAttachmentCoded = "";
> private int PICK_PDF_REQUEST = 1;
> Uri filePath;
> 
> @Override
> protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
>     super.onActivityResult(requestCode, resultCode, data);
> 
>     if (requestCode == PICK_PDF_REQUEST && resultCode == Activity.RESULT_OK && data != null && data.getData() != null) {
>         filePath = data.getData();
>         File uploadFile = new File(filePath.toString());
>         URI uri = URI.create(uploadFile.getPath());
>         try {
>             if (uploadFile != null) {
>                 File uploadFile1 = new File(uri);
>                 FileInputStream objFileIS = new FileInputStream(uploadFile1);
>                 ByteArrayOutputStream objByteArrayOS = new ByteArrayOutputStream();
>                 byte[] byteBufferString = new byte[1024];
>                 int readNum;
>                 readNum = objFileIS.read(byteBufferString);
>                 while (readNum != -1) {
>                     Log.v("  ", "" + readNum);
>                     objByteArrayOS.write(byteBufferString, 0, readNum);
>                     //                system.out.println("read " + readNum + " bytes,");
>                     readNum = objFileIS.read(byteBufferString);
>                 }
>                 byte[] byteBinaryData = Base64.encode(objByteArrayOS.toByteArray(), Base64.DEFAULT);
>                 strAttachmentCoded = String.valueOf(byteBinaryData);
>             }
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>     }
> } 
> ```

# abap - 如何在 tabstrip 中处理具有多个 ALV 的事件接收器？

> ID：12571598
> 
> 赞同：2
> 
> 时间：2012-09-24T19:31:23.747
> 
> 标签：abap, alv, tabstrip

我试图在一个标签条中有两个 ALV，可以通过工具栏上的按钮进行编辑。下一页有一个[很好的示例](https://wiki.scn.sap.com/wiki/pages/viewpage.action?pageId=491919846)，但它是单个 ALV。

如果我们有两个 ALV`lcl_event_receiver`部分怎么办？我们需要两个吗？

注意：我可以通过查看[此代码在 tabstrip 中制作 teo ALV](https://wiki.scn.sap.com/wiki/pages/viewpage.action?pageId=491920080)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:41:12.447

您将需要为每个控件使用单独的事件处理程序（或至少需要单独的处理程序方法），或者添加一个名为`SENDER`事件处理程序方法的隐式参数。此参数包含触发事件的控件的引用，因此您可以将其与两个 ALV 网格引用进行比较，并确定哪一个触发了事件。（在我看来，这会导致代码丑陋，但最终，这是你的决定。）

# android - 在 Android 应用程序中渲染/转换 pdf

> ID：12571601
> 
> 赞同：1
> 
> 时间：2012-09-24T19:31:28.507
> 
> 标签：android, pdf

我想在我的 android 应用程序中呈现本地存储的 pdf 文件，以便我可以访问视图。我想缩放 pdf 并拍摄查看区域的“屏幕截图”以添加箭头和注释并将此信息保存到 jpeg 中。

对我来说，仅通过意图打开 pdf 是没有用的（使用 adobe pdf 或类似的），因为我没有机会在我的活动中拍摄查看的区域。

有什么方法可以包含 pdf 查看器或将 pdf 文件转换为图像，以便我可以操作生成的位图？

我已经尝试过 iText - 由于缺少 bouncycastle 依赖项（？），这将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T10:38:22.553

试试[PDFViewerSDK](http://www.androidpdf.mobi/)。非常强大和快速的 PDF 查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T04:52:34.050

试试 VuDroid [https://code.google.com/p/vudroid/](https://code.google.com/p/vudroid/)或 Joan Zapata 的 Android PdfView 库[https://github.com/JoanZapata/android-pdfview](https://github.com/JoanZapata/android-pdfview)

# linux - 从用户空间捕获 Linux 中的挂起/恢复

> ID：12571609
> 
> 赞同：1
> 
> 时间：2012-09-24T19:31:48.410
> 
> 标签：linux, kernel, wifi, power-management

当某些用户从硬件而不是其他应用程序挂起时，是否可以从 Linux 内核捕获信号？

这意味着，当用户单击暂停按钮（或关闭盖子）时捕获信号。

例如，我看到 APM 必须实现内核和用户空间软件才能处理这个问题。默认情况下，内核似乎不处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:27:20.970

如果您的发行版使用 pm-utils，您可以添加一个脚本，`/usr/lib/pm-utils/sleep.d`在挂起/恢复（或休眠/解冻）事件时调用该脚本。你想达到什么目的？

# python - 只下载我需要的 selenium (Python 2.7)

> ID：12571610
> 
> 赞同：0
> 
> 时间：2012-09-24T19:31:51.197
> 
> 标签：python, selenium, python-2.7

如何只下载 selenium (Python 2.7) 我需要图片和脚本？以及如何从加载页面的图像中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:44:05.167

你可以试试这个：[http](http://selenium-python.readthedocs.org/en/latest/installation.html) ://selenium-python.readthedocs.org/en/latest/installation.html 。

你在什么平台上运行？

# iphone - 从 NSString 到 UILabel xcode 的错误

> ID：12571612
> 
> 赞同：0
> 
> 时间：2012-09-24T19:31:53.293
> 
> 标签：iphone, xcode, view, sdk, tableview

我的脚本有错误，它不起作用。但我不知道如何改变它。我正在使用 2 个视图，我想使用 if/else 从第一个视图更改第二个视图上的 favoriteColorLabel 上的文本。如果有人知道问题，请帮助我。我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

   if(indexPath.row==1) {
        DetailVC.favoriteColorLabel=@"Bonjour"; 

    DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
    dvController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:dvController animated:YES];      

}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:35:36.230

我认为错误在这一行：

```
DetailVC.favoriteColorLabel=@"Bonjour"; 
```

您很可能实际上想要**`text`**像这样设置标签的属性：

```
DetailVC.favoriteColorLabel.text=@"Bonjour"; 
```

这是因为`text`属性是标签在屏幕上显示的文本。您将实际的 UILabel 对象设置为 NSString 文字，这可能不是您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:38:27.913

您正在将 Text 设置为标签 这就是您在代码中遇到错误的原因。

你需要这样做：

```
labelname.text = @"String"; 
```

然后你的问题就会解决。

希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:41:28.023

我会考虑在第二个视图中从第一个糟糕设计中的方法设置标签，并且容易出错。

我会做的是给你的细节视图控制器`property`一个`NSString *`. 从第一个控制器创建详细视图控制器后，将文本传递`@"Bonjour"`给该属性（通过使用其 setter 方法），然后您可以显示详细视图控制器。第二个视图控制器可以查看其字符串的值并相应地设置标签。

详细视图控制器用于管理自己的视图，它不应该需要您首先使用视图控制器来管理屏幕上的内容。

# android - 如何正确使用 replaceAll()

> ID：12571615
> 
> 赞同：1
> 
> 时间：2012-09-24T19:32:08.900
> 
> 标签：android, textview, replaceall

我有一个hangman-app，我从我创建的数据库中获取一个随机单词，然后我将它保存到`randomedWord`，然后我制作另一个字符串来保存`randomedWord`，但只替换为“_”。显示`hiddenWord`出来是为了让用户知道有多少个字符。

当用户点击 Enter`onlicklistener`触发`guess()`方法时：

我有以下代码启动一个本地字符串，其值为 a `TextView(userInput)`。然后如果`randomedWord`包含我想把guess放在与它在相同的位置的猜测`randomedWord`，但现在到`hiddenWord`然后再更新`TextView`。

猜测方法：

```
public void guess() 
{
    String guess = userInput.getText().toString();

    if(randomedWord.contains(guess)) 
    {
        hiddenWord = hiddenWord.replaceAll(guess, guess);
        this.wordHolder.setText(hiddenWord);
    } else 
    {
        showImages();
    }
} 
```

我认为的问题是这一行：

```
hiddenWord = hiddenWord.replaceAll(guess, guess); 
```

因为`hiddenWord`只包含“_”，因此我不能用（猜测，猜测）替换第一个是要替换的内容，最后一个是 WITHWHAT。

如何`randomedWord`用 guess into替换与它相同的 POSITION `hiddenWord`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:24:45.873

我会稍微改变你的方法。当用户输入并被`guess()`调用时，找到该猜测的所有出现`randomedWord`，然后将字符设置`hiddenWord`为猜测。使用`StringBuilder`and `String.indexOf()`，它看起来像这样。此外，guess 需要是`char`：

```
StringBuilder builder = new StringBuilder(hiddenWord);
int index = word.indexOf(guess);
while (index >= 0) {
    builder.setCharAt(index, guess);
    index = word.indexOf(guess, index + 1);
}
hiddenWord = builder.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:14:46.863

我对该问题的解决方案如下所示：

// INVWORD 方法将获取的单词转换为副本但只有“_”

```
 public void invWord() 
    {
        hiddenWord = randomedWord;
        hiddenWord = hiddenWord.replaceAll(".", "_");
    } 
```

// 猜测点击回车键时调用的方法

```
 public void guess() throws IndexOutOfBoundsException
    {
        char guess = userInput.getText().charAt(0);
        StringBuilder builder = new StringBuilder(hiddenWord);
        String j = ""+guess;
        int index = randomedWord.indexOf(guess);

        if (randomedWord.contains(j))
        {
            while (index >= 0) 
            {
                builder.setCharAt(index, guess);
                index = randomedWord.indexOf(guess, index + 1);
                hiddenWord = builder.toString().trim();
                wordHolder.setText(hiddenWord);
                if (hiddenWord.trim().contains(randomedWord))
                {
                    winner();
                }
            }   
        }
        else 
        {
            showImages();
        }
    } 
```

问题是我需要在 hiddenWord = hiddenWord.replaceAll(".", "_"); 中添加一个 +" " 使这个词像 _ _ _ _ _ 并让用户看到这个词有多少个 ketters。在我的解决方案中，它只会很长***_* ___**，但它有效。如果我在 builder.setCharAt(index, guess); 处设置 index*2; 格式会很好，但然后是winner(); 永远不会运行，我猜是因为“”使 hiddenWord 不再 = ranomedWord。

我该如何解决这个问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:42:50.160

都解决了！一切顺利时的感觉.... :)

继承人的代码：

// 将侦听器设置为输入按钮，并在文本字段不为空时进行猜测，如果输入需要为空，则敬酒

```
 enterLetterButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                if (!(userInput.getText().toString().isEmpty()) )
                {
                    guess();
                } else if (userInput.getText().toString().isEmpty())
                {
                    Toast toast = Toast.makeText(getApplicationContext(), "You need to insert a letter", Toast.LENGTH_SHORT);
                    toast.show();
                }
            }
        }); 
```

// invWord() 方法。将 randomedWord 转换为字符串“_”。

```
public void invWord() 
    {
        hiddenWord = randomedWord;
        hiddenWord = hiddenWord.replaceAll(".", "_" +" ");
    } 
```

//猜测（）方法。将guess(char) 放在获取的索引处，如果 hiddenWord 不再包含“_”则调用获胜者()

```
 public void guess() throws IndexOutOfBoundsException
        {
            char guess = userInput.getText().charAt(0);
            StringBuilder builder = new StringBuilder(hiddenWord);
            String j = ""+guess;
            int index = randomedWord.indexOf(guess);

            if (randomedWord.contains(j))
            {
                while (index >= 0) 
                {
                    builder.setCharAt(index*2, guess);
                    index = randomedWord.indexOf(guess, index + 1);
                    hiddenWord = builder.toString().trim();
                    wordHolder.setText(hiddenWord);
                    if (!(hiddenWord.toString().contains("_".toString())) )
                    {
                        winner();
                    }
                }   
            }
            else 
            {
                showImages();
            }
        } 
```

# shell - HP/SOL 的等效排版 -n 选项

> ID：12571616
> 
> 赞同：0
> 
> 时间：2012-09-24T19:32:11.017
> 
> 标签：shell, unix, solaris, ksh

这是一个更大脚本的简化部分。我使用 i 作为循环遍历一组字符串。

我有多个字符串“word1 word2 word3 word4 .....wordx”，我正在循环

```
i=1
typeset "STRING$i=`echo $string | cut -d' ' -f1-50`"
typeset -n NEWVAR="STRING$i"
do_stuff_here_w_NEWVAR
done 
```

这在 Linux 上很好用，但是我的 HP 和 SOL 盒子不喜欢 typeset-n...我可以在这里做什么而不是 -n 用于 HP 或 Solaris？当我在我的盒子上运行 nameref 时，我得到 nameref:not found

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:09:13.253

The ksh88 is the default ksh in Solaris, HP-UX, and AIX. But ksh88 should have available arrays of variables:

```
#/usr/bin/ksh
typeset -i cnt=0

yourarray[$cnt]='word1'
((cnt = cnt + 1))
yourarray[$cnt]='word666'

echo ${yourarray[0]}
word1

echo ${yourarray[1]}
word666

echo ${yourarray[2]}
    # nothing 
```

# odata - 如何根据 OData 中子项的某些属性对对象进行排序？

> ID：12571618
> 
> 赞同：15
> 
> 时间：2012-09-24T19:32:16.433
> 
> 标签：odata

我正在尝试使用此 URL 在 OData 中进行一些自定义排序

```
localhost:82/odata.svc/ComponentPresentations?$filter=TemplateId eq 2894 and publicationId eq 10&$expand=Component/Keywords?$orderby=Title desc 
```

where `Component`is a property of`ComponentPresentation`和`Keywords`is property of `Component`，我想根据关键字的`Title`属性对 ComponentPresentation 进行排序。但是关键字和标题是组件表示的属性

有没有办法根据 Keword 的 title 属性对结果进行排序？哪个是Component的子代，哪个是ComponentPresentation的子代？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-27T09:09:36.863

只想提一下，从 OData V4 开始就有可能。您可以根据需要嵌套任意数量的扩展/选择/排序/过滤器。现在它很简单

[http://services.odata.org/V4/Northwind/Northwind.svc/Orders?$select=OrderID&$expand=Order_Details($select=UnitPrice;$orderby=Quantity)](http://services.odata.org/V4/Northwind/Northwind.svc/Orders?$select=OrderID&$expand=Order_Details($select=UnitPrice;$orderby=Quantity))

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-24T20:53:26.330

可以通过嵌套的单基数属性对结果进行排序，例如：[http ://services.odata.org/V3/Northwind/Northwind.svc/Orders?$top=50&$expand=Customer&$orderby=Customer /城市](http://services.odata.org/V3/Northwind/Northwind.svc/Orders?$top=50&$expand=Customer&$orderby=Customer/City)

AFAIK，不可能使用具有许多基数的导航属性来执行此操作（尽管在扩展场景中对扩展提要中返回的内容进行排序很有用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-18T20:15:35.857

在查询结束时使用 expandobject/field 附加顺序

localhost:82/odata.svc/ComponentPresentations?$filter=TemplateId eq 2894 和 publicationId eq 10&$expand=Component/Keywords?$orderby=Component/Title desc

# php - 单击链接而不重新加载所有页面时如何刷新div内容？

> ID：12571619
> 
> 赞同：0
> 
> 时间：2012-09-24T19:32:17.370
> 
> 标签：php, jquery, mysql, ajax, html

在我的网站上，作者（用户）可以将帖子标记为收藏。

它是这样工作的：

```
 if ($favinfo == NULL || $favinfo == "") { 
      $favicon = "<a href=\"".$siteurl."/author/favorites.php?add=".$articleinfo['id']."\">ADD</a>"; .
   }
    else { 
      $favicon = "<a href=\"".$siteurl."/author/favorites.php?remove=".$articleinfo['id']."\">REMOVE</a>"; 
   } 
```

它应该看起来是动态的，它可以工作，当用户单击添加时，它会将帖子添加到他的收藏夹并使用删除链接重新加载页面。

问题在于它不是真正动态的，它会重新加载所有页面。

我怎样才能只重新加载该链接（至于 div 内）？

我知道我必须使用 ajax、jquery 等，但我尝试了一些在 SO 中找到的示例，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:35:06.600

```
 $('a').on('click', function(e){

    // the default for a link is to post a page..    
    // So you can stop the propagation

     e.stopPropagation(); 
}); 
```

包括这会阻止您的页面重新加载整个页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:01:44.600

如果您希望它是动态的，则需要使用 AJAX。jQuery 有[ajax 支持](http://api.jquery.com/jQuery.ajax/)，这使得这非常容易。如果您不熟悉 ajax 或 javascript，您应该先阅读它。

## PHP

```
if ($favinfo == NULL || $favinfo == "") { 
    $favicon = "<a class=\"fav-btn\" data-id=\"".$articleinfo['id']."\" data-action=\"add\" href=\"".$siteurl."/author/favorites.php"\">ADD</a>"; .
}
else { 
    $favicon = "<a class=\"fav-btn\" data-id=\"".$articleinfo['id']."\" data-action=\"remove\" href=\"".$siteurl."/author/favorites.php"\">REMOVE</a>"; 
} 
```

## JavaScript

> $('a.fav-btn').on('点击', function(e){
> 
> ```
>  var $this = $(this),                    // equates to the clicked $('a.fav-btn')
>       url = $this.attr('href'),           // get the url to submit via ajax
>       id = $this.attr('data-id'),         // id of post
>       action = $this.attr('data-action'); // action to take on server
> 
>   $.ajax({
>       url: url+'?'+action+'='+id
>   }).done(function(){ // once favorites.php?[action]= is done...
> 
>       // because this is in .done(), the button will update once the server has finished
>       // if you want the link to change instantly and not wait for server, move this outside of the done function
>       if(action === 'add'){
>           $this.attr('data-action', 'remove').html('REMOVE'); // update the button/link
>       }else{
>           $this.attr('data-action', 'add').html('ADD');
>       }
> 
>   })
> 
>   return false; // prevent link from working so the page doesn't reload
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:02:52.417

如果您可以使用 JQuery，那么您有一些工具可以完成此操作。

1.  有一个识别链接的结构/方法。
2.  您可以在添加按钮上有一个[click()](http://api.jquery.com/click/)侦听器，该侦听器将调用 JQuery [$.post(url, callback)](http://api.jquery.com/jQuery.post/)函数。
3.  在该回调函数中，您可以让它使用“删除”链接更新相应的 DIV（您在 #1 中定义的）。即，如果您通过 ID 识别 DIV，您可以通过[$('#id')](http://api.jquery.com/id-selector/)检索它，然后更新该对象。

同样的想法也适用于您添加的“删除”链接。

所以，一般...

```
<button id="add">Add</button>

<div id="links"> ...</div>

<script>
$('#add').click(function() { 
     $.post('your url',
         function(data) {
             var links = $('#links');
             // update your links with 'remove' button, etc
         }
     );
});

</script> 
```

# email - Corona 中的电子邮件问题

> ID：12571624
> 
> 赞同：1
> 
> 时间：2012-09-24T19:32:37.880
> 
> 标签：email, lua, coronasdk

所以我制作了一张要点击的图片，以便从应用程序向我发送电子邮件，但它似乎无法在模拟器中向我显示？我把图片隐藏起来，只是为了看看函数是否正在执行，它是，它只是弹出窗口本身不起作用。这是我的代码：

```
local contact = display.newImage("questionMark.png")
contact.x = display.contentWidth - 20
contact.y = display.contentHeight - 20

local function contactMe (event)
local options =
{
    to = "joepshoulak@me.com",
    subject = "Feedback",
    body = "Test",
}
native.showPopup("mail", options)
contact.isVisible = false
end

contact:addEventListener("tap", contactMe) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:17:37.270

不幸的是，手册中没有说明，但在一些论坛帖子和博客帖子中，电子邮件在模拟器中不起作用......

大多数情况下，因为它通过使用操作系统对操作的支持来工作，所以当您请求“电子邮件”活动时，Android 通过“活动”来完成它，它会在其系统上搜索所有已注册的电子邮件应用程序并询问用户什么一个他想要的，而 iOS 只是调用 iOS 默认的电子邮件应用程序......

Windows 和 Mac OS 最接近的是某些东西的“默认程序”，但它们没有明确的 API，所以 Corona 没有什么可使用的，所以不，模拟器不支持它，可能永远不会完全支持，可能在 Windows 8 中除外，这是一个非常大的可能。

# file-upload - 将 CSV 上传浏览按钮添加到 Ext.Action

> ID：12571627
> 
> 赞同：1
> 
> 时间：2012-09-24T19:32:42.657
> 
> 标签：file-upload, extjs, csv, openlayers, extjs3

我正在尝试在 GeoExt Map App 上创建 CSV 文件上传。我需要将上传功能放在 Ext.Action 中，这样我就可以将它添加到 GeoExt 面板的工具栏中。我正在尝试实现这个[例子](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File)。这是我的代码，

```
 action = new Ext.Action({
    text: "Upload Excel",
    control: Ext.create('Ext.form.Panel', {
        title: 'Upload a CSV File',
        width: 400,
        bodyPadding: 10,
        frame: true,
        renderTo: Ext.getBody(),
        items: [{
            xtype: 'filefield',
            name: 'csv',
            fieldLabel: 'CSV Upload',
            labelWidth: 50,
            msgTarget: 'side',
            allowBlank: false,
            buttonText: 'Select CSV File'
        }],

        buttons: [{
            text: 'Upload',
            handler: function () {
                var form = this.up('form')
                    .getForm();
                if (form.isValid()) {
                    form.submit({
                        url: 'file-upload.py',
                        waitMsg: 'Uploading the CSV File...',
                        success: function (fp, o) {
                            Ext.Msg.alert('Success', 'Your csv file "' + o.result.file + '" has been uploaded.');
                        }
                    });
                }
            }
        }]
    }),
    map: map,
    // button options
    tooltip: "Upload CSV File",
    // check item options
    group: "newTool"
});
actions["upCSV"] = action;
toolbarItems.push(new Ext.button.Button(action)); 
```

Firebug 一直给我这个错误，

`TypeError: b[d.xtype || e] is not a constructor`

我是否在 Ext.Action 中错误地声明了函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:47:18.947

您不能直接将其推`action`入 a`toolbar`因为 an`Ext.Action`不是`Ext.Component`. An`Ext.Action`基本上是一种创建可以多次重用的抽象层的方法。在这里，您需要执行以下操作：

```
toolbarItems.push(new Ext.button.Button(action)); 
```

从[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Action)中：

> Actions 允许您在支持 Action 接口的任何组件（主要是 Ext.toolbar.Toolbar、Ext.button.Button 和 Ext.menu.Menu 组件）之间共享处理程序、配置选项和 UI 更新

# jquery - 在旧计算机上与 AJAX 的兼容性和复杂性？

> ID：12571632
> 
> 赞同：0
> 
> 时间：2012-09-24T19:33:04.013
> 
> 标签：jquery, ajax

虽然使用 AJAX 和 JQuery 动画的网站应该始终为不支持脚本的浏览器提供非动画版本，但支持脚本的旧计算机有什么问题？

我问是因为 AJAX 对客户端的依赖。计算机的速度（处理器、内存、视频内存）是否决定了 AJAX 脚本的执行速度？它只是互联网连接吗？或者，如果浏览器支持 AJAX/JQuery 脚本，无论计算机本身如何，它都会表现良好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:10:07.990

处理器速度变慢不会影响动画是否正常工作或您的 ajax 请求是否成功，甚至不会影响两者完成所需的时间。

动画仍将在大约相同的时间内完成（给定或花费几毫秒），它们只会更加不稳定。可以把它想象成在 IE6 和 IE9 中运行动画。

Ajax 请求仍然会像在快速计算机中一样快速发生，因为它们的速度与网络相关，而不是 CPU 相关。如果用户在慢速网络上，请求会很慢。来自请求的数据的处理可能很慢，但它仍然应该工作。

# mysql - 使用 MySQL 查找一个月中的第 N 个星期一

> ID：12571633
> 
> 赞同：1
> 
> 时间：2012-09-24T19:33:05.153
> 
> 标签：mysql

如何在 MySQL 中基于 、 和 找到一个月的第n*个*工作日*：*`@ref_date``@n``@week_day`

```
SET @ref_date = '2012-09-25';
SET @n = 3; #The third week
SET @week_day = 0; #Monday 
```

结果应该是：`2012-09-17`.

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:18:40.453

您`@weekday`使用了标准 '0 == Monday'，但 MySql 使用基于 1 的标准和 '1 == Sunday'。假设我们必须说 0 必须等于星期一，您可以这样做：

```
SET @first_day = DATE_SUB(@ref_date, INTERVAL DAYOFMONTH(@ref_date) - 1 DAY);
SET @first_day_of_week = (DAYOFWEEK(@first_day) - 2) % 7;
SET @solution = DATE_SUB(DATE_ADD(@first_day, INTERVAL @n WEEK), INTERVAL ( 7 - ((@week_day - @first_day_of_week + 7) % 7) ) DAY); 
```

所以作为一个单一的查询，这将是：

```
SELECT DATE_SUB( DATE_ADD( DATE_SUB( @ref_date, INTERVAL DAYOFMONTH(@ref_date) - 1 DAY),  INTERVAL @n WEEK), INTERVAL ( 7 - ((@week_day - ((DAYOFWEEK(DATE_SUB( @ref_date, INTERVAL DAYOFMONTH(@ref_date) - 1 DAY)) - 2) % 7) + 7) % 7) ) DAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:37:05.527

在这里找到 SO 中的解决方案之一

```
SELECT  WEEK(dateField, 5) -
        WEEK(DATE_SUB(dateField, INTERVAL DAYOFMONTH(dateField) - 1 DAY), 5) + 1 
```

读[`Week of the Month in Mysql`](http://think-robot.com/2009/04/week-of-the-month-in-mysql/)

# c++ - 如何在 OpenGL 中更改对象的旋转速率？

> ID：12571634
> 
> 赞同：0
> 
> 时间：2012-09-24T19:33:07.947
> 
> 标签：c++, opengl, rotation

我正在使用一个简单的旋转多边形，当用户单击并向上拖动时，它应该会加速，而当用户单击并向下拖动时，它会向下显示。不幸的是，我到处搜索，似乎找不到任何可以轻松让我操纵速度的特定 GL 函数或变量（我也搜索过“帧速率”......）

是否有一个简单的调用/一系列调用来做这样的事情，或者我真的需要在代码的不同部分使用计时器来做事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T19:38:45.883

OpenGL 在你告诉它绘制东西的地方精确地绘制东西。它不知道前一帧渲染了什么或下一帧将渲染什么。OpenGL没有时间的概念，没有时间就没有*速度*。

速度是*你*必须管理的东西。通常，这是通过获取您的预期速度，将其乘以自上次渲染以来的时间间隔，然后将其添加到当前旋转（或位置）中来完成的。然后在那个新的方向/位置渲染。然而，这完全取决于你。

# iphone - iOS，我应该在我的项目中设置什么架构设置？

> ID：12571636
> 
> 赞同：4
> 
> 时间：2012-09-24T19:33:15.780
> 
> 标签：iphone, objective-c, ios, xcode

在对我的应用程序进行一些小修改并将其加载到最新的 xcode 版本后，我注意到以下设置。

我应该删除armv6吗？下拉菜单中的选项显示 armv7、armv7s。

我应该设置什么？

![在此处输入图像描述](../Images/4ccb9a5e642d86adfe0e74008f9a6b4a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:35:09.213

如果您真的不想支持 iPhone`3G`及更低版本（不是`3GS`），那么您可以删除`armv6`. 如果你这样做，那么你只需要支持`iOS 4.*`和降低，我认为你并不需要它。

因此，您可以随意`armv6`从列表中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:41:52.357

如图所示，如果您选择这两种架构，构建的产品将在包括 iPhone 3G 在内的所有 iOS 设备上执行。如果您必须在 iPhone 3GS 或更高版本上运行您的代码。您可以在设置中设置 armv7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:58:44.517

*   如果要支持 iPhone(original) 和 iPhone 3G，请设置 ARMv6。
*   如果要支持 iPhone 3GS、iPhone 4 和 iPhone 4S，请设置 ARMv7
*   如果要支持 iPhone 5，请设置 ARMv7s

[这里](http://wanderingcoder.net/2010/07/19/ought-arm/)是关于 iPhone 处理器技术基础知识的一点解释。

仅作记录，iPhone（原装）、3G 和 3GS 已停产。

# ruby - 您如何确定 proc 调用是否仍然是免费的或绑定的？

> ID：12571639
> 
> 赞同：1
> 
> 时间：2012-09-24T19:33:23.173
> 
> 标签：ruby

我想看看具有相同参数的 proc 调用是否每次都会给出相同的结果。`pureproc`用参数调用是免费的，所以每次我调用时`pureproc(1,1)`，我都会得到相同的结果。`dirtyproc`用参数调用是绑定在其环境中的，因此即使它具有与 相同的数量`pureproc`，它的输出也将取决于环境。

```
ruby-1.9.2-p136 :001 > envx = 1
=> 1
ruby-1.9.2-p136 :003 > pureproc = Proc.new{ |a,b| a+b }
 => #
ruby-1.9.2-p136 :004 >dirtyproc = Proc.new{ |a,b| a+b+环境 }

```

我如何以编程方式确定被调用的过程或方法是否是免费的，正如仅绑定在必须传入的变量上所定义的那样？也欢迎对绑定、局部变量等进行任何解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:20:47.000

可能您可以使用诸如 sourcify 之类的 gem 解析源，取出所有标记，并检查是否有任何变量。但请注意，这与 proc/method 调用的值是常量不同的概念。例如，如果您的代码中有类似`Time.now`or`Random.new`的内容，则不需要定义任何变量，但每次调用时仍会有所不同。另外，当 proc 有 时，您希望是什么情况`envx - envx`？这将保持不变，但仍会影响代码，因为除非`envx`定义，否则它将返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:44:03.863

嗯，棘手。有`parameters`一种方法可以告诉您预期的参数（请注意它们是可选的，因为您使用的是 procs，而不是 lambdas）。

```
pureproc.parameters
=> [[:opt, :a], [:opt, :b]] 
dirtyproc.parameters
=> [[:opt, :a], [:opt, :b]] 
```

至于确定是否实际使用封闭变量之一来计算 proc 的返回值，我想到了走 AST（有宝石），但似乎很麻烦。我的第一个想法是这样的`dirtyproc.instance_eval { local_variables }`，但由于两个闭包都关闭在同一个环境中，这显然不会让你走得太远......

但总体问题是：如果您想确保某些东西是纯净的，为什么不首先将其作为一种不关闭环境的适当方法呢？

# java - 简单计数信号量

> ID：12571648
> 
> 赞同：1
> 
> 时间：2012-09-24T19:33:43.967
> 
> 标签：java, concurrency, semaphore

为了理解计数信号量的工作原理，我决定实现一个简单的版本。我想验证我当前的实现实际上是一个正确的实现，我没有错过任何明显的东西

```
public class CountingSemaphore {
    private int limit;

    public CountingSemaphore(int limit) {
        this.limit = limit;
    }

    public synchronized void acquire() {
        try {
            if (limit == 0)
                wait();

            limit--;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public synchronized void release() {
        try {
            if(limit == 0) 
                notifyAll();

            limit++;
        }catch(Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:41:19.253

除了一个细节外，这应该可以工作。
由于您使用`notifyAll()`, （正如@JBNizet 指出的那样，由于存在虚假唤醒的风险），您可以唤醒几个等待线程，所有这些线程都将被释放和减少`limit`。
改变

```
if (limit == 0)
    wait(); 
```

到

```
while (limit == 0) {
    wait();
} 
```

你应该没事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:41:38.390

`wait()`由于虚假唤醒，应始终将其包含在检查唤醒条件的 while 循环中。阅读[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)以获取更多信息。

捕获异常并吞下它们是一种非常糟糕的做法。您的`acquire()`方法应该抛出 InterruptedException。您的发布方法不应捕获异常。

而且我不会将信号量本身用作锁：外部类可以使用它来同步完全不相关的东西，这可能导致性能不佳或死锁。我会使用一个私有的最终锁定对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:42:42.713

从客户的角度来看，您应该强迫我使用值 >= 0 的信号量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:42:47.527

你的代码有问题，当你调用 release 时，你调用 notify all 除了这里

```
public synchronized void acquire() {
        try {
            if (limit == 0)
                wait();

            limit--;
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

所有等待的线程都被释放，你可以 git limit<0，你会打破这里的常见解决方案是使用循环。

```
 while(limit == 0){
     wait();
} 
```

# javascript - 捕获所有 javascript 未处理的异常

> ID：12571650
> 
> 赞同：134
> 
> 时间：2012-09-24T19:33:49.647
> 
> 标签：javascript

我正在尝试寻找或找出一种方法来在警报框中显示应用程序中所有未处理的 javascript 异常。我希望所有这些都在客户端完成，而不使用任何服务器端代码。我使用 MVC3 作为环境。

最近几天我一直在研究，但没有找到我想要的东西。

我在下面找到了 2 种方法，它们似乎几乎是我正在寻找的，除了这些方法是设置的，因此您必须将函数名称传递给自定义方法以打印该方法中所有未处理异常的堆栈跟踪具体功能。我正在寻找一种不必手动将函数名称传递给打印所有未处理异常的堆栈跟踪的自定义方法的方法。我希望这些自定义方法只“监听”整个应用程序中所有未处理的异常。

[http://eriwen.com/javascript/js-stack-trace/](http://eriwen.com/javascript/js-stack-trace/)

也类似于上一个链接：

[https://github.com/eriwen/javascript-stacktrace](https://github.com/eriwen/javascript-stacktrace)

这是上面第二个链接中的基本代码，用于打印指定 javascript 函数的堆栈跟踪：

```
instrumentFunction: function (context, functionName, callback) {
    context = context || window;
    var original = context[functionName];
    context[functionName] = function instrumented() {
        callback.call(this, printStackTrace().slice(4));
        return context[functionName]._instrumented.apply(this, arguments);
    };
    context[functionName]._instrumented = original;
}

function printStackTrace(options) {
    options = options || {
        guess: true
    };
    var ex = options.e || null,
        guess = !! options.guess;
    var p = new printStackTrace.implementation(),
        result = p.run(ex);
    return (guess) ? p.guessAnonymousFunctions(result) : result;
} 
```

所以，总结一下，你们都知道有什么方法可以让某种“侦听器”来侦听所有 javascript 未处理的异常，然后在警报框中将它们打印到屏幕上吗？

谢谢！杰森

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-04-24T07:28:49.483

您可以使用 window.onerror 方法来做到这一点。

```
window.onerror = function myErrorHandler(errorMsg, url, lineNumber) {
    alert("Error occured: " + errorMsg);//or any message
    return false;
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-06-09T11:21:01.740

您可以使用`window.onerror`, 或（非常棒！）正确绑定到 'error' 事件：

```
window.onerror = function (message, file, line, col, error) {
   alert("Error occurred: " + error.message);
   return false;
};
window.addEventListener("error", function (e) {
   alert("Error occurred: " + e.error.message);
   return false;
}) 
```

如果你想跟踪 JavaScript 错误，你可以试试[Atatus](https://www.atatus.com/)。我在阿塔图斯工作。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2018-03-29T15:47:49.630

此外

```
window.onerror = function (message, file, line, col, error) {
   alert("Error occurred: " + error.message);
   return false;
};
window.addEventListener("error", function (e) {
   alert("Error occurred: " + e.error.message);
   return false;
}) 
```

您还可以捕获在`.then()`监听`unhandledrejection`事件的承诺回调 () 中触发的所有错误

```
window.addEventListener('unhandledrejection', function (e) {
  alert("Error occurred: " + e.reason.message);
}) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-24T01:47:50.297

查看基于 Log4J 的[http://log4javascript.org 。](http://log4javascript.org)如果您的大部分代码都包含在 try/catch 语句中以处理异常，您可以使用此库作为通用接口，将输出发送到最终用户可以看到的始终可用的“对话框”或日志记录窗口。您甚至可以有一个按钮来执行 window.print() 以将对话框的内容打印到打印机或 PDF。祝你好运。

# sencha-touch-2 - 在 EXTJS 和 Touch Apps 之间共享遵循 MVC 模式的功能 - Sencha Workspace

> ID：12571652
> 
> 赞同：0
> 
> 时间：2012-09-24T19:33:55.357
> 
> 标签：sencha-touch-2, extjs4.1, extjs-mvc

我正在使用 Sencha 创建一个 Web 应用程序和一个移动应用程序，同时我正在遵循 sencha 推荐的 MVC 模式来开发这些应用程序

Sencha 建议先创建 Worksapce，然后在工作空间内一一创建 extjs 和 touch 应用，实现应用之间的代码共享。

从他们的文档中，我了解到两个应用程序之间共享的一段代码必须位于工作区目录下

但我不明白您如何从相应的应用程序访问此代码

目前我正在应用程序内创建全局函数，并且仅在该应用程序中可用

```
Ext.define('MyApp.common.Util', {
statics: {
foo:function(){
      ...
    }
}); 
```

并访问我使用的功能

```
requires:['MyApp.common.Util'] 
...

MyApp.common.Util.foo(); 
```

如您所见，我可以访问仅在应用程序（MyApp ...）下定义的*功能*。谁能给我一个例子，如何在应用程序之外（在工作空间内）定义一个函数并从各种应用程序访问它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T21:16:24.733

在此处查看示例应用程序：[https](https://github.com/WebAppSolutionInc/sencha-cafe-townsend) ://github.com/WebAppSolutionInc/sencha-cafe-townsend 他们将 ExtJS 和 Sencha Touch 应用程序与 DeftJS 放在一起[https://github.com/deftjs/DeftJS](https://github.com/deftjs/DeftJS)

# python - 姜戈。如何在管理站点中创建发送电子邮件的特定功能？

> ID：12571654
> 
> 赞同：1
> 
> 时间：2012-09-24T19:33:56.683
> 
> 标签：python, django, django-models, django-admin

如何在管理站点中创建特定功能，向人员（电子邮件）发送电子邮件，其中包含来自我的模型的信息（名称、价格）？

像这样，但“向选定的人发送电子邮件”：

![在此处输入图像描述](../Images/5c2b650281ecfe067d2a1e659b4494a2.png)

模型.py

```
from django.db import models

class People(models.Model):
    name = models.CharField(max_length=255)
    price = models.DecimalField(max_digits=5, decimal_places=2)
    email = models.EmailField()

    def __unicode__(self):
        return self.name 
```

管理员.py

```
from django.contrib import admin
from demo.app.models import People

class PeopleAdmin(admin.ModelAdmin):
    list_display = ('name', 'email')

admin.site.register(People, PeopleAdmin) 
```

电子邮件

```
send_mail('People information', 'People name is People.name, People price is People.price', 'mymail@gmail.com',
    ['email_from_email_field_from_model']) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:59:55.097

你需要创建一个函数，然后实现它。

```
def send_mail(modeladmin, request, queryset):
    for msg in queryset:
        send_mail('People information', msg.name, msg.price, msg.email,
    [msg.email])
send_mail.short_description = u'Send e-mail to selected objs'

class PeopleAdmin(admin.ModelAdmin):
    list_display = ('name', 'email')
    actions = (send_mail,) 
```

# python - 什么称为允许模拟浏览器以实现自动化目的的库？

> ID：12571655
> 
> 赞同：2
> 
> 时间：2012-09-24T19:34:01.927
> 
> 标签：python, html, clojure, web, automation

我有一个自动化任务，我需要在一个站点中使用 word 文档中的数据填写几个表格。为此，我需要一个模拟浏览器并允许我以编程方式输入站点并访问 html 元素的库。这个叫什么？是否有针对 python 或 clojure 执行此操作的库示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:38:32.773

你有几个选择：

1.  [机械化](http://wwwsearch.sourceforge.net/mechanize/)
2.  [硒](http://pypi.python.org/pypi/selenium/)

还有其他的，但我现在想不起来了（当我记得更多时会发布）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T19:42:39.380

你可能也想看看[PhantomJS](http://phantomjs.org/)：

> PhantomJS 是一个带有 JavaScript API 的无头 WebKit。它具有对各种 Web 标准的快速和原生支持：DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。

[如果您只是想提交一个表单，那么伪造请求并使用urllib2](http://www.voidspace.org.uk/python/articles/urllib2.shtml)发送它可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:15:50.553

在如今的**Clojure**中，[http-kit](https://github.com/shenfeng/http-kit)是我的最爱。它只是使http交互变得非常容易。

```
; taken from github
(defn on-response [resp]
  ;; {:status 200 :body "....." :headers {:key val :key val}}
  (println resp))

;;; initialize, timeout is 40s, and default user-agent
 (http/init :timeout 40000 :user-agent "http-kit/1.1")

;;; other params :headers :proxy binary? keyify?
(http/get {:url "http://shenfeng.me" :cb on-response})

;;; other params :headers :proxy binary? keyify?
(http/post {:url "http://example/"
        :cb on-response
        :body {"name" "http-kit" "author" "shenfeng"}  :binary? true}) 
```

我也使用[过 CasperJs](http://casperjs.org/)，它使任何无头浏览成为可能。此外，您可以在自动浏览的同时与客户端 javascript 交互。我发现的唯一缺点是将所有这些与现有代码集成起来稍微困难一些，但作为一个独立的工具，它是完美的。它还支持 coffescript 和 javascript 脚本。

查看[快速入门](http://casperjs.org/quickstart.html)以了解其工作原理。

# mysql - MySql Match Against 的 Oracle 等值函数有哪些

> ID：12571656
> 
> 赞同：1
> 
> 时间：2012-09-24T19:34:03.190
> 
> 标签：mysql, sql, oracle

我一直在寻找与 MySql Match Against 等价的 Oracle 函数。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:42:17.957

作为一个`WHERE`条件，这不存在，但您使用时的主要优势`MATCH AGAINST`是您使用`FULLTEXT`索引并且在 Oracle 中也存在并且称为 Oracle Text。请参阅以下答案：[Oracle 是否支持全文搜索？](https://stackoverflow.com/questions/202623/does-oracle-support-full-text-search)或对“Oracle Text”进行一般搜索。

# ubuntu - 如何在 Ubuntu 中安装 LAMP-package+Netbeans？

> ID：12571665
> 
> 赞同：0
> 
> 时间：2012-09-24T19:34:39.523
> 
> 标签：ubuntu, netbeans, lamp

我是 Ubuntu (12.04) 的新手，我正在尝试安装 LAMP 包进行开发：1) 键入以下命令“sudo tasksel install lamp-server”。一切正常。2) 安装完整的 Netbeans IDE。创建了一个新的 PHP 项目。执行此项目并收到以下消息：

```
Not Found

The requested URL /TestPhpProject/index.php was not found on this server.

Apache/2.2.22 (Ubuntu) Server at localhost Port 80 
```

它的网址：`http://localhost/TestPhpProject/index.php`

那么，请告诉我，如何在 Netbeans 中测试我的应用程序？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:40:08.570

您是否将文件放在 /var/www 文件夹中？

您的 Apache 服务器已启动并正在运行，但无法找到您的项目。

# python - Django循环遍历所有要保存的项目，但它只保存一条记录

> ID：12571674
> 
> 赞同：2
> 
> 时间：2012-09-24T19:35:10.753
> 
> 标签：python, django

我有下一个模型：

```
class People(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100)

class Salary(models.Model):
    id_of_people=models.ForeignKey(People)
    salary = models.IntegerField(required=False) 
```

在views.py

- 当我尝试这个时：

```
 for each in People.objects.all()[:3]:
            Salary().id_of_people_id=each.id
            Salary().save() 
```

它只保存了 3 个 id，而不是从 1 到 3。所以，它只保存了一次。但是，我想遍历所有 3 条记录，为什么会发生这种情况？如何将所有 People 表 id 添加到 Salary 表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:49:59.780

您正在创建一个 Salary 对象并对其进行三次更新。您需要创建三个单独的对象。

```
for each in People.objects.all()[:3]:
    item_salary=Salary()
    item_salary.id_of_people_id=each.id
    item_salary.save() 
```

# c++ - 使用伪代码（上溢/下溢）协助 C++

> ID：12571675
> 
> 赞同：1
> 
> 时间：2012-09-24T19:35:11.980
> 
> 标签：c++, overflow, underflow

我刚刚进入学校 C++ 的第 4 周，并希望得到正确的指导。

```
 #include "std_lib_facilities_3.h"

class BadArea{};

int area(int length, int width){
    if(length <= 0 || width <=0) throw BadArea();
    return length * width;
}

double mysqrt(double x){
    if(x < 0.0) error("mysqrt");
    return 1.0; //dummy value for now, need to write code later
}

int main(){
    try{
        char length = 0;
        char width = 0;
        cout << "Enter length and width seperated by a space\n";
        cin >> length;
        cin >> width;
        vector<double> v(10);
        v[9] = 7.5;
        cout << area(7, -10) << '\n';
        cout << mysqrt(-2.0) << '\n';
        return 0;
    }
    catch(BadArea){
        cerr << "Exception: Bad area\n";
    }
    catch(exception& e){
        cerr << "ExceptionZ: " << e.what() << '\n';
    }
    catch(...){
        cerr << "Exception occurred\n";
    }
} 
```

这就是任务要求我们的；

```
 //Check for overflow in the area function
      result = length * width
      if result is negative or result/length <> width, throw an exception
  //Use 3 iterations of the Newton-Raphson method for mysqrt
      if x is 0, result is 0 so return it
      if x is 1, result is 1 so return it
      otherwise,
         result = (x^4 + 28x^3 + 70x^2 + 28x + 1)/(8*(1 + x)*(1 + 6x + x^2)) 
```

> 将 main 更改为在 try/catch 部分周围进行无限循环；在 try 块中询问长度和宽度；如果 cin 失败则返回，否则打印该区域，并打印该区域的 mysqrt。将您的程序命名为 hw3pr2.cpp。（回想一下，如果您键入的内容不是格式正确的 int，例如单词“end”，cin 将失败。）

我了解如何阅读代码，但我很难启动它，并且有点与“范围”混淆，到目前为止它编译正确但不断给我 Range Error: 10\. 这是否意味着我正在使用课区错了？

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:38:57.500

您正在声明一个包含 10 个元素的向量并尝试使用`v[10]`.

[编辑] 正如其他人指出的那样，默认情况下 std::vector 不进行边界检查，但如果 "std_lib_facilities_3.h" 与[this](http://www.stroustrup.com/Programming/std_lib_facilities.h)类似，则它定义了自己的范围检查向量类。

[EDIT2] 所以你更新了你的代码，使得长度和宽度都必须大于 0，否则会抛出 BadArea 异常，但你总是在调用`area(7, -10)`，所以你总是会得到异常。我认为您想将长度和宽度传递给 area 函数：`cout << area(length, width) << '\n';`

# css - css中的整页背景没有出现

> ID：12571683
> 
> 赞同：0
> 
> 时间：2012-09-24T19:35:42.237
> 
> 标签：css, background-image

出于某种原因，我在 css 中的整页背景不起作用。我以前做过一次，效果很好，但现在我得到的只是白色背景。这是我相关css代码的一部分：

```
* {
margin: 0;
padding: 0;
}

/* render html5 elements as block */
header, footer, section, aside, nav, article {
display: block;
}

html {
    line-height: 1;
    color: #555;
    font-family: 'Trebuchet MS', Verdana, Arial, Helvetica, sans-serif;
    font-size: 14px;
    background-image: url(file:///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg) no-repeat center center     fixed; 
-webkit-background-size: cover;
- moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
}

/* layout */

#wrapper {
width: 960px;
margin: 0 auto;
background-image: linear-gradient(bottom, #86D1C7 5%, #A8BCFA 53%);
background-image: -o-linear-gradient(bottom, #86D1C7 5%, #A8BCFA 53%);
background-image: -moz-linear-gradient(bottom, #86D1C7 5%, #A8BCFA 53%);
background-image: -webkit-linear-gradient(bottom, #86D1C7 5%, #A8BCFA 53%);
background-image: -ms-linear-gradient(bottom, #86D1C7 5%, #A8BCFA 53%);

background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0.05, #86D1C7),
color-stop(0.53, #A8BCFA)
);
border: 2px solid #333;
/* curved border radius */
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
padding: 10px;
margin-top: 10px;
margin-bottom: 10px;
} 
```

我确定所有文件都在正确的位置，并且所有链接都正确指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:58:40.880

的值`background-image`只是**图像的 URL**。如果您输入任何其他值，则声明无效。

改变：

```
background-image: url(file:///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg) no-repeat center center fixed; 
```

至

```
background-image: url(file:///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg) 
```

或者

```
background: url(file:///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg) no-repeat center center fixed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:06:33.950

```
background-image: url(file:///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg) no-repeat center center     fixed; 
```

应该

```
background: url('///HD/Users/Barbra/Sites/HSMAI/images/vbcc_background.jpg') no-repeat center fixed; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:53:07.373

为 body 元素提供背景，它应该可以工作。

# asp.net-mvc - RenderBody 显示的内容在哪里定义？

> ID：12571690
> 
> 赞同：0
> 
> 时间：2012-09-24T19:36:02.953
> 
> 标签：asp.net-mvc

抱歉这么简单的问题，但是在查看站点布局页面时，我在哪里/如何找到指定在@RenderBody 上显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:39:32.917

那将是从控制器调用的个人视图本身。如果您在出现的页面上查看源代码，您应该会看到完整的布局代码包裹在实际调用的视图中的代码上。

# javascript - 让 onBeforeUnload 使用 setTimeout

> ID：12571705
> 
> 赞同：1
> 
> 时间：2012-09-24T19:37:06.037
> 
> 标签：javascript, settimeout, onbeforeunload

我试图让 onbeforeunload 使用某种设置的计时器，但是当返回到位时，我似乎无法启动它。我希望它可以与计时器一起使用，但由于某种原因计时器无法正常工作。这是我正在工作的代码，非常感谢您帮助查看它。

```
var validNavigation = false;

function wireUpEvents() {
    var leave_message = 'Leaving the page';

    jQuery(
        function goodbye() {
            jQuery(window).bind('onbeforeunload', function() {
                setTimeout(function() {
                    setTimeout(function() {
                        jQuery(document.body).css('background-color', 'red');
                    }, 10000);
                },1);

            return leave_message;
        });
    }); 

    function leave() {
        if(!validNavigation) {
            killSession();
        }
    }

    //set event handlers for the onbeforeunload and onunloan events
    window.onbeforeunload = goodbye;

    window.onunload=leave;
}

// Wire up the events as soon as the DOM tree is ready
jQuery(document).ready(function () {
    wireUpEvents();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:57:26.073

`onBeforeUnload`不适用于`setTimeout`. `onBeforeUnload`执行后，`onUnload`将被触发，页面将发生变化。这发生在`setTimeout`回调被调用之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T23:12:48.427

@Jonh Kurlak 是对的，onbeforeunload 不使用超时来保护浏览器用户免受诈骗。

但是有什么可以做的！！！

```
for(var i = 0; i < 1000; i++){
    console.log(i);
} 
```

您可以将此 for 循环打印到控制台以延迟页面的卸载，它循环的迭代次数越高，等待的时间就越长。

# javascript - Node.js 中的限制请求

> ID：12571706
> 
> 赞同：7
> 
> 时间：2012-09-24T19:37:08.493
> 
> 标签：javascript, node.js, settimeout, throttling

我有一个数组。我可以用 foreach 方法循环它。

```
data.forEach(function (result, i) {

     url = data[i].url;

     request(url);

}); 
```

request 函数正在向给定的 url 发出 http 请求。然而，同时提出所有这些请求会导致各种问题。

所以我想我应该通过引入某种计时器来减慢速度。

但我不知道如何将 forach 循环与 setTimeOut/setInterval 结合起来

请注意我在服务器（nodejs）而不是浏览器上执行此操作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:54:00.700

由于您的问题是全球性的，您应该调整您的`request`函数以一次只运行 5 个请求 - 使用全局静态计数器。如果您的请求是在类似之前

```
function request(url, callback) {
    ajax(url, callback);
} 
```

现在使用类似的东西

```
var count = 0;
var waiting = [];
function request(url, callback) {
    if (count < 5) {
        count++;
        ajax(url, function() {
            count--;
            if (waiting.length)
                request.apply(null, waiting.shift());
            callback.apply(this, arguments);
        });
    } else
        waiting.push(arguments);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T19:42:13.260

```
data.forEach(function (result, i) {

     url = data[i].url;

     setTimeout(
         function () {
              request(url);
         }, 
         1000 * (i + 1) // where they will each progressively wait 1 sec more each
     );

 }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T19:44:45.553

而不是`setTimeout`让它们按顺序运行。我假设`callback`你的函数有一个参数`request()`。

```
function makeRequest(arr, i) {
    if (i < arr.length) {
        request(arr[i].url, function() { 
                                i++; 
                                makeRequest(arr, i); 
                            });
    }
}

makeRequest(data, 0); 
```

* * *

如果您在请求之间需要更多时间，则将 添加`setTimeout`到回调中。

```
function makeRequest(arr, i) {
    if (i < arr.length) {
        request(arr[i].url, function() { 
                                i++; 
                                setTimeout(makeRequest, 1000, arr, i); 
                            });
    }
}

makeRequest(data, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:42:00.853

您可以使用 setTimeout 延迟通话。以下代码将确保每个请求在`timerMultiPlier`其前一个请求的毫秒后被调用。

```
var timerMultiPlier = 1000;
data.forEach(function (result, i) {
     setTimeout(function(){
           url = data[i].url;         
           request(url);
   }, timerMultiPlier*i );

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:42:39.887

您可以通过索引抵消每个项目的执行延迟，如下所示：

```
data.forEach(function (result, i) { 
  setTimeout(function() {
    url = data[i].url; 
    request(url);
  }, i * 100);
}); 
```

这将使每次迭代在前一次迭代之后执行大约 100 毫秒。您可以更改`100`为您喜欢的任何数字来更改延迟。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-07T01:53:25.410

上述许多解决方案虽然对一些请求很实用，但在处理数以万计的请求时不幸地阻塞并阻塞了页面。与其将所有计时器排在一个队列中，不如将每个计时器一个接一个地依次排入队列。如果您的目标是编写包含大量糖和“好东西”的漂亮蓬松代码，那么以下是适合您的解决方案。

```
function miliseconds(x) { return x }
function onceEvery( msTime ){
    return {
        doForEach: function(arr, eachF){
            var i = 0, Len = arr.length;
            (function rekurse(){
                if (i < Len) {
                    eachF( arr[i], i, arr );
                    setTimeout(rekurse, msTime);
                    ++i;
                }
            })();
        }
    };
} 
```

漂亮、漂亮、蓬松的糖衣用法：

```
onceEvery(
    miliseconds( 150 )
).doForEach(
    ["Lorem", "ipsum", "dolar", "un", "sit", "amet"],
    function(value, index, array){
        console.log( value, index );
    }
)

function miliseconds(x) { return x }
function onceEvery( msTime ){
    return {
        doForEach: function(arr, eachF){
            var i = 0, Len = arr.length;
            (function rekurse(){
                if (i < Len) {
                    eachF( arr[i], i, arr );
                    setTimeout(rekurse, msTime);
                    ++i;
                }
            })();
        }
    };
}
```

# git - git：跟踪不在原点的远程分支

> ID：12571707
> 
> 赞同：1
> 
> 时间：2012-09-24T19:37:08.820
> 
> 标签：git, branch, git-branch

我的情况是这样的：

我确实在两台不同的机器上工作，它们都跟踪从另一个源（git.domain_name）克隆的存储库（**origin**）。

一台机器**my_machine1**，我创建了一个分支来添加一些功能，我们称之为*myFoo*。

另一台机器（**my_machine2**），我想跟踪（并能够更新并推送到**my_machine1**）*myFoo*分支。

在**my_machine2 上**，我已经完成了`git remote add my_machine1 my_user@my_machine1:/path/to/common/repo`

但是，如果我这样做，`git branch -a`我看不到来自**my_machine1**的任何分支，只能来自**origin**。如果我**执行**`git ls-branch my_machine1`. *将 myFoo*推到原点不是一种选择。

有什么方法可以跟踪/共享**my_machine1**和**my_machine2**之间的*myFoo*分支吗？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:37:45.013

除了建议的 git fetch 之外，“git remote update”也可以工作（将获取所有遥控器）。

此外， git add 的 -f 选项会在添加之后执行 fetch，这对于检查新添加的远程是否没有错误非常有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:45:53.650

添加遥控器不会获取内容，您仍然需要`git fetch my_machine1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:34:07.020

注意：`git remote update`将始终获取*所有*遥控器，就像`git fetch --all`会一样（请参阅“ [git remote update](https://stackoverflow.com/questions/1856499/git-remote-update) ”）

正如“[和](https://stackoverflow.com/questions/2688251/what-is-the-difference-between-git-fetch-origin-and-git-remote-update-origin)[有什么区别？`git fetch origin``git remote update origin`](https://stackoverflow.com/questions/2688251/what-is-the-difference-between-git-fetch-origin-and-git-remote-update-origin) ”中提到的，`remote update`是一个非常高级的命令

> *   它支持分组遥控器（`remotes.<group> = <list>`），
> *   并更新所有遥控器（带有设置的遥控器除外`remote.<name>.skipDefaultUpdate`），
> *   但不是任何更具体的选项`fetch`。

Git fetch 还支持 repos 组：

```
$ git config remotes.mygroup 'remote1 remote2 ...'
$ git fetch mygroup 
```

因此，对于*一个*远程 repo ( `origin`)，`git fetch`比`git remote update`.****

# c# - 高效地在 Gridview 中启用排序和分页

> ID：12571710
> 
> 赞同：0
> 
> 时间：2012-09-24T19:37:30.130
> 
> 标签：c#, asp.net, sorting, pagination

通过使用[示例代码](http://forums.asp.net/t/956540.aspx/1/10)作为指导，我设法将一些代码拼凑在一起，这些代码将在 gridview 上执行排序和分页。但是，我对网页编程比较陌生，所以我经常使用 ViewState（据我收集的资料来看，这很糟糕）。结果，我想知道是否有办法让我的代码更有效率？（或者完成同一件事的不同方式？）

前端：

```
<asp:GridView ID="UserAccounts" runat="server" AllowSorting="true" AutoGenerateColumns="false" AllowPaging="true"
    OnSorting="gridView_Sorting" OnPageIndexChanging="gridView_PageIndexChanging" PageSize = "20">
    <Columns>
        <asp:BoundField DataField="UserName" HeaderText="UserName" SortExpression="UserName" />
        <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
        <asp:BoundField DataField="Roles" HeaderText="Role" SortExpression="Roles" />
        <asp:CheckBoxField DataField="IsLockedOut" HeaderText="Locked Out?" SortExpression="IsLockedOut" />
        <asp:CheckBoxField DataField="IsOnline" HeaderText="Online?" SortExpression="IsOnline" />
        <asp:BoundField DataField="LastLoginDate" HeaderText="Last Login Date" SortExpression="LastLoginDate" />
        <asp:HyperLinkField Text="Manage" DataNavigateUrlFields="UserName" DataNavigateUrlFormatString="ManageDetails.aspx?user={0}" />
    </Columns>
</asp:GridView> 
```

生成表的代码后面：

```
private void BindUserAccounts()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("UserName");
        dt.Columns.Add("Email");
        dt.Columns.Add("Roles");
        dt.Columns.Add("IsLockedOut");
        dt.Columns.Add("IsOnline");
        dt.Columns.Add("LastLoginDate");

        var userRoles = from MembershipUser user in Membership.FindUsersByName(this.UsernameToMatch + "%")
                        let roles = Roles.GetRolesForUser(user.UserName)
                        select new
                        {
                            UserName = user.UserName,
                            Email = user.Email,
                            Roles = string.Join(", ", roles),
                            IsLockedOut = user.IsLockedOut,
                            IsOnline = user.IsOnline,
                            LastLoginDate = user.LastLoginDate
                        };

        foreach (var u in userRoles)
        {
            DataRow dr = dt.NewRow();
            dr["UserName"] = u.UserName;
            dr["Email"] = u.Email;
            dr["Roles"] = u.Roles;
            dr["IsLockedOut"] = u.IsLockedOut;
            dr["IsOnline"] = u.IsOnline;
            dr["LastLoginDate"] = u.LastLoginDate;

            dt.Rows.Add(dr);
        }

        UserAccounts.DataSource = dt;
        UserAccounts.DataBind();
        ViewState["DataSource"] = dt;
} 
```

要启用排序和分页：

```
protected void gridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        UserAccounts.PageIndex = e.NewPageIndex;
        BindUserAccounts();
    }

    protected void gridView_Sorting(object sender, GridViewSortEventArgs e)
    {
        DataTable dataTable = (DataTable)ViewState["DataSource"];

        if (dataTable != null)
        {
            DataView dataView = new DataView(dataTable);
            if ((string)ViewState["SortDir"] == "ASC" || String.IsNullOrEmpty((string)ViewState["SortDir"]))
            {
                dataView.Sort = e.SortExpression + " ASC";
                ViewState["SortDir"] = "DESC";
            }
            else if ((string)ViewState["SortDir"] == "DESC")
            {
                dataView.Sort = e.SortExpression + " DESC";
                ViewState["SortDir"] = "ASC";
            }

            UserAccounts.DataSource = dataView;
            UserAccounts.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:55:23.913

由于您将数据绑定到 GridView 的方式，您发布的代码尽可能高效。可以实现更有效的方法，但不能不更改数据绑定逻辑。

例如，更有效的方法是使用 jQuery+ [dataTables](http://datatables.net)在客户端处理分页和排序。另一种需要较少代码的方法可以使用`SqlDataSource`并将其设置`DataSource`为 GridView 来完成 - 您不必在代码中进行重新排序/分页。但同样，这两种方法都需要做出重大改变。您的代码与 IMO 一样高效。

**更新：** 蒂姆在他的评论中提出了一个很好的观点——不要在 ViewState 上保留数据表。要么把它放在 Session 中（在开始将东西放入 Session 之前考虑数据的大小），要么只是要求数据库再次发送数据。将此 DataTable 添加到 ViewState 将大大增加页面大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T11:32:58.347

提供给您的好提示，以查看该使用什么而不使用什么。感谢您分享您的想法。我个人也认为 session 比 viewstate 更轻便和安全。我在这个网站[http://blogfornet.com/2013/09/gridview-paging-and-sorting-example/](http://blogfornet.com/2013/09/gridview-paging-and-sorting-example/)找到了一个更简单的例子。这将有助于初学者理解。

# java - 扩展 Apache XML-RPC 以支持更多的 ISO8601 类型

> ID：12571713
> 
> 赞同：0
> 
> 时间：2012-09-24T19:37:50.747
> 
> 标签：java, datetime, xml-rpc, iso8601

我正在尝试接收其中包含 dateTime.ISO8601 字段的 XML-PRC 调用。调用者（我无法控制）使用 QT 库实现了调用，该库从日期值中剥离破折号。

是否可以扩展 Apache XML-RPC 类型转换器，以便在 ISO8601 格式的情况下接受更广泛的集合？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:15:07.173

XMLRPC“规范”在 iso8601 日期中不包括破折号。所以，它并没有真正剥离破折号。

[http://xmlrpc.scripting.com/spec.html](http://xmlrpc.scripting.com/spec.html) http://en.wikipedia.org/wiki/XML-RPC

这是客户端实现的问题吗？

# ruby - 如何将 32 位整数转换为网络字节顺序？

> ID：12571715
> 
> 赞同：0
> 
> 时间：2012-09-24T19:37:56.680
> 
> 标签：ruby, endianness

如何将 32 位整数转换为网络字节顺序。

这样做的正确方法是什么？

```
[1024].pack("N") 
```

或者

```
[1,0,2,4].pack("N") 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:40:13.200

首先，查看每个的输出：

```
>> [1024].pack("N")
=> "\000\000\004\000"
>> [1,0,2,4].pack("N")
=> "\000\000\000\001" 
```

请注意第二个缺少的内容：

```
>> [1,0,2,4].pack("NNNN")
=> "\000\000\000\001\000\000\000\000\000\000\000\002\000\000\000\004" 
```

# sql - 表别名和带空格的字段名

> ID：12571721
> 
> 赞同：0
> 
> 时间：2012-09-24T19:38:26.743
> 
> 标签：sql, ms-access, sas, jet-sql

在 SAS 中，我正在使用另一个表中的值更新 MS Access 中的一个表。正在更新的表中的某些字段包含空格。这似乎导致更新语句出现问题。这给了我错误“参数太少。预期为 1。”：

```
update [Original Table] as a inner join Updates as b on a.ID = b.ID
set a.[Variable 1] = b.[Variable 1]
where Year = "2000"; 
```

对于没有空格的字段名称，该语句可以正常工作。而且由于我在其他地方使用字段名称而没有表引用/别名，我认为 [] 和别名的组合导致了问题。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:27:43.063

`Year()`是一个函数，它返回一个变体子类型整数，它对应于您给该函数的日期值的日历年。

在您的情况下，您似乎有一个名为`Year`. 所以也许“缺少的参数”是`Year()` *函数*的预期日期参数。

`Year`您可以通过括在方括号中来避免混淆数据库引擎。括号表示引擎`Year`是对象（字段）名称而不是函数。

```
update [Original Table] as a inner join Updates as b on a.ID = b.ID
set a.[Variable 1] = b.[Variable 1]
where [Year] = "2000"; 
```

只要有可能，最好使用不与保留字冲突的名称。这在您的情况下可能不切实际......但如果您*能*做到，您将减少您将遭受的 Access 开发头痛的数量。:-)

有关“命名挑战”的更多信息，请参阅[Access 中的问题名称和保留字](http://allenbrowne.com/AppIssueBadWord.html)。

抱歉，尽管存在 WHERE 子句问题，但我忽略了查询可以工作的点。

我看不到任何应该触发数据库引擎投诉的 SQL 的其余部分。我假设您直接在 Access 中测试了该语句，并且没有出错。

如果 SAS 和 Access 之间的交互有什么特殊的原因导致这种情况，也许您可​​以使用保存的 Access 查询作为解决方法。获取该 SQL 并将其保存为命名查询`qrySasTest`，在您的 Access 数据库中。然后尝试`qrySasTest`从 SAS 端执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:59:11.673

这个查询对我来说是按原样工作的（只修改表名），既可以从 access 运行，也可以从 SAS 运行。这是 SAS 9.3 64 位和 Office 2010 64 位，所以我想你的两个版本可能会有所不同，但它按预期工作。

```
proc sql; 
connect to access (path="c:\temp\test.accdb"); 
execute 
( 
update [Test2] as a inner join Test as b on a.ID = b.ID
set a.[Variable 1] = b.[Variable 1]
where Year ="2000";
) 
by access; 
disconnect from access; 
quit; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-23T16:21:43.927

如果要使用 libname 引用而不是 SAS 访问，可以在 proc sql 语句后使用“dquote=ansi”选项，如下所示。在此示例中，我创建了一个名为 mydbms 的库引用：

```
libname mydbms odbc dsn=prompt preserve_names=yes;

    proc sql dquote=ansi;
    update mydbms."Original Table" as a inner join mydbms.Updates as b on a.ID = b.ID
    set a."Variable 1" = b."Variable 1"
    where Year = "2000";
    quit; 
```

# php - PHP反序列化：除了一个条目外一切正常

> ID：12571726
> 
> 赞同：0
> 
> 时间：2012-09-24T19:38:45.790
> 
> 标签：php, deserialization

我正在尝试反序列化存储在 mysql 中的一些数据。

一切都很好，除了一个无法显示的字段。

数据 ：

```
a:4:{
s:7:"prénom";s:6:"Johnny";
s:3:"nom";s:5:"Rocky";
s:12:"NOT WORKING";s:2:"on";
s:7:"opt in2";s:2:"on";
} 
```

我打电话的

```
<?php $mydata = $result['data']; 
$mydata = unserialize($mydata);
echo $mydata['prénom']; 
echo $mydata['nom']; 
echo $mydata['NOT WORKING']; 
echo $mydata['opt in2']; 
?> 
```

“prénom”、“nom”和“opt in2”已正确显示，但“NOT WORKING”未正确显示（不显示任何内容）。后者有趣的是字符串前面的数字与字母的数量不匹配，你可以看到它写成 12 而字符串有 11 个字母（包括空格）。我试图将其更改为 11，但它搞砸了一切。

更有趣的是，所有值（包括“NOT WORKING”）仍然可以正确显示，例如：

```
<?php foreach($result['data'] as $fieldName => $fieldValue){?>
<?php echo esc_html(strip_tags(wp_kses_stripslashes(ucwords($fieldName)))); ?>
<?php echo esc_html(strip_tags(wp_kses_stripslashes(ucwords($fieldValue)))); ?> 
```

有人可以解释一下发生了什么吗？我在这里看不到任何逻辑。

非常感谢 ！

# git - 某些提交中缺少 git-svn-id

> ID：12571730
> 
> 赞同：3
> 
> 时间：2012-09-24T19:39:01.690
> 
> 标签：git, heroku, git-svn

我有一个旧的 SVN 存储库，我使用`git-svn`它来检查它并推送到 Heroku。我正在做一个相当标准`git push heroku master`的舞蹈，一切都很好`git svn rebase`。`git svn dcommit`

但是，最近我一直在做一些 git 工作，并且有`git svn rebase`一段时间没有做。现在，当我尝试进行 rebase 时，由于合并冲突而失败，尽管我是唯一一个致力于 repo 并且只在 master 上工作的人。

认为这可能是工作副本的问题，我做了一个 new`git svn clone`然后一个`git remote add heroku`and `git pull heroku master`。拉动可以毫无问题地进行快进合并，但`git svn rebase`仍然失败。

我做了一个简单的`git log`，我看到我有一些旧的提交缺少`git-svn-id`s：

```
commit def8bab861314c67d4e8227e03775d19045d21d1
Author: peterr
Date:   Fri Sep 21 16:17:33 2012 +0000

    PHP Cedar support.

    git-svn-id: http://vcp.unfuddle.com/svn/vcp_bbsit@24 b6b24ac3-8b7a-4c11-a811-49c5d0334e85

commit f51bd78fb07dde6ec1dc4e0ba51a48f2b6bd1bd6
Author: pr1001
Date:   Mon Aug 20 19:39:42 2012 +0200

    Specify port correctly

commit 153bb2929080898dcab46142120def0f4964dfab

...

commit 5a416fa3af9f64aa353d5171bedfaa563115ff62
Author: pr1001
Date:   Mon Aug 20 17:22:58 2012 +0200

    PHP Cedar support.

commit e0b35588d03082a3a4ab49a7b590f206346046c0
Author: j
Date:   Fri Aug 3 08:13:33 2012 +0000

    change email

    git-svn-id: http://vcp.unfuddle.com/svn/vcp_bbsit@23 b6b24ac3-8b7a-4c11-a811-49c5d0334e85 
```

从[一个 SO 答案](https://stackoverflow.com/a/9889025/46768)中，我收集到我可能能够重写提交消息以添加丢失的信息，但我想知道这是否会更糟。

查看消息，看起来我有一些重复的提交，例如“PHP Cedar 支持”。我真的很困惑为什么我有这些重复，尽管我怀疑它们可能会被转发给`git push heroku master`我前几天被告知存储库不同步的失败。`git pull heroku master`似乎完全没有带来任何变化并解决了这个问题，但也许它带来了重复的提交。

所以，鉴于这一切，我的问题很简单，我该如何进行？我在 Heroku 上有一个工作应用程序，在 SVN 存储库中有一个较旧的工作代码库，但我没有看到任何简单的方法可以将新的提交干净地提交到 SVN。我应该挑选它们吗？然后我是否需要对 Heroku 应用程序进行核对，以免重复项返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:15:06.217

很难猜测你是如何陷入这种情况的，但我认为这是因为当推送到 SVN 时，git-svn 替换（使用 rebase 或 reset）带有 git-svn-id 签名的提交，所以每个提交都有 2 个示例： “本地”——没有“git-svn-id”签名——和带有签名的远程。

恢复：

1.  创建一个临时分支以保持当前状态（某种备份）：`git co -b backup`
2.  确保 refs/remotes/git-svn 指向与您的 subversion 存储库相对应的 git-svn-id 的最新提交，并且没有 git-svn-id 的提交显示为`git log refs/remotes/git-svn`

如果不是这样，您可以使用以下技巧来修复 refs/remotes/git-svn：更新 refs/remotes/git-svn 以指向一切正常的最新提交（在您的情况下，它对应于 r23）：

```
$ git update-ref refs/remotes/git-svn e0b35588d03082a3a4ab49a7b590f206346046c0 
```

将 .git/svn/metadata 修订版设置为指向该修订版：

```
[svn-remote "svn"]
        reposRoot = ...
        uuid = <UUID>
        branches-maxRev = 23
        tags-maxRev = 23 
```

删除（或更好地移开）文件 .git/svn/refs/remotes/git-svn/.rev_map.UUID 现在运行

```
$ git svn fetch 
```

您的 refs/remotes/git-svn 参考现在恢复到最新的有效 SVN 版本。

3\. 无需合并即可从 Git 存储库中获取所有更改

```
$ git fetch heroku master 
```

现在您所有的更改都在 refs/remotes/heroku/master 中。

4\. 确保您没有本地更改（我建议您现在在 master 上）。将 refs/heads/master 重置为 refs/remotes/git-svn。做到这一点的方法之一：

```
$ git update-ref refs/heads/master refs/remotes/git-svn
$ git reset --hard HEAD 
```

5\. 查看 refs/remotes/heroku/master 和 refs/remotes/git-svn。Git 存储库中是否存在 refs/remotes/git-svn 中不存在的更改？如果是，请一一挑选。还请查看您的备份分支（仅在没有 git-svn-id 的提交中），如果它们还没有在 SVN 中，也可以挑选它们。

6\. 现在您在 master 中有一些在 SVN 中还没有的更改。跑

```
$ git svn dcommit 
```

将它们推送到 SVN。

7\. 现在您的 SVN 相关分支已完全修复并具有所有更改。如果我理解正确，您希望 Git 存储库中的内容相同。用当前的主内容更好地替换 refs/remotes/heroku/master：

```
$ git push heroku master --force 
```

现在您的 Git 存储库具有与 SVN 存储库相同的内容。

为了避免将来出现这些问题，请确保您**永远不要**将没有 git-svn-id 的提交推送到 Git（即，当您运行“git push”时，您的 master 仅包含带有 git-svn-id 签名的提交——如果不是——运行“git svn dcommit”先将它们推送到 SVN）。

# c# - 使用未分配的局部变量错误 #2

> ID：12571735
> 
> 赞同：0
> 
> 时间：2012-09-24T19:39:21.657
> 
> 标签：c#, .net, variables, scope

我查看了 google 和其他 stackoverflow`Use of unassigned local variable`错误，但仍然找不到答案。我认为也许我的错误是因为滥用了 ExtractionCtrl 的范围。我尝试了这段代码来测试范围并且它有效。所以我现在不知道我的错误在哪里。

**测试范围**

```
namespace RandomTesting
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            int x = 5;

            switch (x)
            {
                case 2:
                    System.Console.WriteLine("Your # is 2");
                    break;

                case 5:
                    System.Console.WriteLine("Your # is :{0}", x);
                    x = x + 2;
                    System.Console.WriteLine("Your # is :{0}", x);
                    break;
            }

            System.Console.WriteLine("Your # is :{0}", x);
            Console.ReadLine();
        }
    }
} 
```

**主要代码的一部分**

```
switch (arg)
{
    case "AR":
        ExtractionCtrl = new ARExtractionController();

        // add new mapping here
        break;

    case "ICN":
        ExtractionCtrl = new IcnExtractionController();

        // add new mapping here
        break;
}

int ticketID;
if (int.TryParse(arg, out ticketID))
{
    string returnedFilePath = ExtractionController.GetStartupPath();
    ExtractionCtrl.Extract(ticketID, returnedFilePath, AR_TEMPLATE_PATH, MAPPING_PATH);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:42:53.253

您设置 ExtractionCtrl 的开关没有默认情况，因此在切换后 ExtractionCtrl 可能未初始化。由于您没有显示 ExtractionCtrl 的声明，我假设它是在没有初始化的情况下声明的：

```
SomeExtractionCtrlType ExtractionCtrl; 
```

因此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:43:37.707

您很可能需要`default`在`switch`.

```
switch (arg)
{
    case "AR":
        ExtractionCtrl = new ARExtractionController();

        // add new mapping here
        break;

    case "ICN":
        ExtractionCtrl = new IcnExtractionController();

        // add new mapping here
        break;
    default:
        ExtractionCtrl = new DefaultExtractionController();
        break;
} 
```

`ExtractionCtrl`或者您可以在定义它时进行初始化。不过，我更喜欢这个`default`选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:47:35.867

在 Visual Studio 中，这是一个非常常见的编译时错误，这意味着编译器认为变量在被调用之前可能不会被初始化。正如其他答案所说，您应该做的是添加一个`default`案例，但在声明变量时也要初始化变量，或者将其初始化为您`null`在`default`. 不幸的是，Visual Studio 非常挑剔，它并没有看到所有潜在的路径最终都会授予一个值。

# iphone - 将资产预加载到 NSURLCache

> ID：12571736
> 
> 赞同：2
> 
> 时间：2012-09-24T19:39:23.397
> 
> 标签：iphone, objective-c, ios, ios5

我们有一个包含多个静态资产的移动应用程序。尤其相关的是 440k 的“供应商”javascript ...诸如 Backbone 和 jQuery 之类的东西以及上述各种插件和附加组件。供应商的东西比 ios 应用程序本身的变化少……也许每几个月一次。因此，它是预加载到我们通过 Apple 分发的应用程序图像的主要候选者。我的问题是：如何预加载 NSURLCache 作为我拥有这些位的资产？

理想情况下，我会：

1) 将 vendor_assets.js 捆绑到我的应用程序的发行版中

2) 在启动时，调用类似 [NSURLCache preloadAsset: "vendor_assets.js", [NSData fromFile: "vendor_assets.js]]

3）加载UIWebView，然后请求“vendor_assets.js”（加上所有其他文件

4）因为“vendor_assets.js 已经在缓存中，我们为用户节省了 440k 的下载带宽。更快的启动时间。更多的钱。促销活动。香槟。荣耀。永恒的满足。所有这些。

我到底该怎么做？我一整天都在用头撞墙，到目前为止，我只有一个血淋淋的额头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:32:20.413

我刚刚专门针对这种情况创建了一个 NSurLCache 子类。您可以在以下位置找到它：[https ://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)

# javascript - module.exports 客户端

> ID：12571737
> 
> 赞同：25
> 
> 时间：2012-09-24T19:39:29.753
> 
> 标签：javascript, node.js, browser, module, requirejs

我创建了一个节点模块，它本质上只是一些有用的 JS，也可以在客户端使用。我知道 require.js 可以加载 common.js 组件，但我不一定要强制每个使用我的模块客户端的人也需要 require 或 common.js 什么的。我也不想强迫他们删除`module.exports = ...`文件底部的。其他人如何解决这个问题？您只是创建 2 个版本，还是 2 个“编译”版本？module.exports 是否无处不在？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T19:42:44.543

这就是 underscore.js 所做的：

```
if (typeof exports !== 'undefined') {
  if (typeof module !== 'undefined' && module.exports) {
    exports = module.exports = _;
  }
  exports._ = _;
} else {
  root['_'] = _;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-08-15T11:12:27.380

这个答案依赖于从右到左评估分配的事实。`MyModule`首先分配给`exports`，然后`exports`分配给`module.exports`。

如果`module`未声明，则抛出异常。

简短、干净且易于记忆：

```
try {
   module.exports = exports = MyModule;
} catch (e) {} 
```

该文件可以包含在浏览器和 node.js 中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T19:55:23.770

这对我有用（CoffeeScript）。假设“命名空间”是您想要`window`在客户端范围内声明的内容

```
(module ? {}).exports = @Namespace =
  my: 'cool'
  module: '!' 
```

然后您可以`require('namespace').my === 'cool'`在 Node.js 或`Namespace.my === 'cool'`浏览器中使用。这转化为 JS 为

```
(typeof module !== "undefined" && module !== null ? module : {}).exports = this.Namespace = {
  my: 'cool',
  module: '!'
}; 
```

# python - Python os.system 命令不起作用？

> ID：12571738
> 
> 赞同：1
> 
> 时间：2012-09-24T19:39:31.433
> 
> 标签：python, os.system

早些时候我用 python 编写代码很好，但是在我格式化我的计算机并重新安装相同的 python 设置后，我的`os.system`命令停止工作，以及`subprocess.Popen`.

![在此处输入图像描述](../Images/0ae53dd5a81d01258411059ad6f5016c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:52:23.743

看起来是路径问题。我可以重现该 -1 错误的唯一方法是将我的路径设置为空，以便 Python 找不到 cmd.exe。

这是我通过在堆栈交换中搜索“设置窗口路径”时遇到的链接：

[http://support.microsoft.com/kb/310519](http://support.microsoft.com/kb/310519)

它告诉如何为 Windows XP 设置它，该过程在以后的版本中几乎相同，因为您基本上是在设置存储在注册表中的环境变量。

# android - Web 服务示例 - Android 和服务器部分

> ID：12571739
> 
> 赞同：0
> 
> 时间：2012-09-24T19:39:31.497
> 
> 标签：android

我正在寻找创建一个简单的服务来学习从 android 调用服务。我想要做的是一个通过网络调用系统的应用程序提供一些参数并且系统响应。非常简单（希望如此）

但我想建立两端.. 不只是 android 端。

社区会推荐哪些工具是行业标准并且希望易于访问。我希望 TomCat 可以做托管，但不知道这应该是 JSP 还是 EE 应用程序。

任何人都可以向我指出一封设置此问题的电子邮件，再次与双方联系。

希望 Tomcat 是一个足够体面的服务器，如果对其进行了足够多的调用，它既易于设置又足够健壮。

一旦完成，我只需要使用 Ksoap 或其他任何推荐的东西来做 android 部分。

在此先感谢，我希望这不是一个太笼统的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:58:29.450

我推荐使用 Apache CXF 作为服务器。它几乎可以完成您在 Web 服务中所需的一切。它确实有一个客户端部分，但到目前为止，我自己在 Android 上实现了 Web 服务，而不是使用库。但那是不久前的事了，也许今天的库更好地为 Android 定制。

# c# - 如何在文本框中添加搜索按钮（Windows 8）？

> ID：12571743
> 
> 赞同：2
> 
> 时间：2012-09-24T19:40:00.990
> 
> 标签：c#, xaml, windows-8

如何在文本框中添加按钮（Windows 8）？

xaml 中的类似内容？这是特殊控制？

![在此处输入图像描述](../Images/a15635c8a2289d44e903c0a11501ab3f.png)

# javascript - 将函数推入数组 - 循环和拼接？

> ID：12571744
> 
> 赞同：10
> 
> 时间：2012-09-24T19:40:03.493
> 
> 标签：javascript, arrays, push

使用 Javascript 我需要能够：

1：将一定数量的相同函数（每个函数有不同的参数）推入一个数组。

2：然后一个一个地运行每个函数（对于这个例子只是参数/数字的警报）

3：在每个函数之后，我需要能够从数组中拼接该函数

4：每次后检查数组长度 - 一旦数组再次为空 - 提醒用户它已完成

现在我似乎能够完成任务 1,2 和 4，但我正在为如何在运行后从数组中拼接出函数而苦恼 - 有人可以帮忙吗？由于我无法删除该功能，因此一旦调用了所有功能，我就永远不会收到“完成”警报

到目前为止，我的 javascript 代码是：

```
// Create empty array
var array = [];

// Push functions into array - dynamic amount and could be any amount of functions
array.push(func(1));
array.push(func(2));
array.push(func(3));

// Call array manager function after pushing array
arrayManager();

// Array manager function to splice and detect when finished
function arrayManager() {
    if (array.length < 1) {
        alert("done");
    }
    else {
    //////////////////////////////////
    // << THIS IS WHERE I DON'T KNOW HOW TO SPLICE THE ITEM FROM THE ARRAY
    //////////////////////////////////
    }
}

// Function for array objects - alert passed parameter
function func(num){
    alert(num);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T20:09:50.200

首先，您现在没有将函数推送到数组中，而是执行 func 。要实现推送，您的 func 应如下所示：

```
// Function for array objects - alert passed parameter
function func(num){
  return function(){
    alert(num);
  }
} 
```

现在，如果您的函数是同步的，您可以简单地遍历数组

```
for(var i in arr){
  arr[i]();
}
console.log('done'); 
```

如果我们正在处理异步函数，那么它们需要有一个回调：

```
// Function for array objects - alert passed parameter
function func(num){
  return function(callback){
    alert(num);
    callback();
  }
} 
```

然后您可以使用计数器并行运行。

```
var count = arr.length;
for(var i in arr){
  arr[i](function(){
    if(--count === 0){
      console.log('Done');
    }
  });
} 
```

或按顺序：

```
function run(){
  var fn = arr.shift();
  if(!fn){
    console.log('Done');
  } else {
    fn(run);
  }
}
run(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:47:50.437

这应该可以满足您的需求：

```
var next_func = array.splice(0, 1)[0] 
```

"splice" 至少有两个参数：第一个是开始删除的索引，第二个是要删除的项目数。当它返回一个新数组时，只需获取从拼接中获取第一个值的函数。您还可以在前两个参数之后添加任意数量的值；这些将被添加到数组中以代替您删除的内容。

但是，我很好奇你为什么这样做——虽然我可以理解以非传统方式做某事是一种智力练习，但如果你是编程新手，我会说有更好的方法来做到这一点。当您使用其中的函数时，没有特别需要从数组中删除项目。对我来说，从数组中执行每个函数，然后在完成循环后设置“array = []”会更有意义。但是，根据情况，这可能仍然是做你正在做的事情的最佳方式，我只是想我会给一些思考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T20:09:22.150

```
// Create empty array
var array = [];

// Push functions into array - dynamic amount and could be any amount of functions
array.push(function() { func(1); });
//if you call array.push(func(1)) the function is executed immediatly
//then null is stored in the array
array.push(function() { func(2); });
array.push(function() { func(3); });

// Call array manager function after pushing array
arrayManager();

// Array manager function to splice and detect when finished
function arrayManager() {
    while (array.length){
        var fnc=array.splice(0,1)[0]
        fnc();
    }
    alert ("done");            
}

// Function for array objects - alert passed parameter
function func(num){
    alert(num);
}​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T20:09:43.713

这是你需要的吗？

1：将一定数量的相同函数（每个函数有不同的参数）推入一个数组。

```
function func(num){
    alert(num);
}

var k = [];
k.push({f:func, params:[1]});
k.push({f:func, params:[2]});
k.push({f:func, params:[3]}); 
```

2：然后一个一个地运行每个函数（对于这个例子只是参数/数字的警报）

3：在每个函数之后，我需要能够从数组中拼接该函数

4：每次后检查数组长度 - 一旦数组再次为空 - 提醒用户它已完成

```
while (k.length > 0) {
 k[0].f(k[0].params);
 k.shift();
}
alert("done"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T20:16:14.083

[http://jsfiddle.net/nZ459/1/](http://jsfiddle.net/nZ459/1/)

如果你想以你正在做的方式推送每个函数及其参数，你必须像这样包装函数：

```
function wrapper(arg){
    return function(){
        console.log(arg);
    };
}

var ar = [];

console.log("pushing functions");

ar.push(wrapper(1));
ar.push(wrapper(2));
ar.push(wrapper('three'));

console.log("done pushing functions");

while (ar.length){
    var fn = ar.shift();
    console.log("calling ", fn);
    fn();
} 
```

或者，您可以制作一个通用包装器，该包装器接受一个函数，并将参数作为参数，并返回一个匿名函数。

为了更直接地回答您的问题，以您想要的方式遍历数组的最简单方法是这样的：

```
while (array.length){
    var item = array.shift();
    ...
} 
```

# python - 我想要一个类' __init__ 将对象添加到列表中，但我想防止冗余并且“如果自我不在对象列表中”不起作用

> ID：12571748
> 
> 赞同：1
> 
> 时间：2012-09-24T19:40:13.890
> 
> 标签：python, oop, python-3.x, sl4a

我正在编写一个脚本来检查多个来源的天气数据，然后将它们解析为 Android 脚本层上的一些脚本。谷歌 API 停止工作，所以这是旧天气模块的一个被黑掉的替代品。

我创建了一个名为“weatherdata”的类，我想让该类的所有实例都将自己添加到一个名为“weatherobjects”的列表中，对于这样的恶作剧：

```
 for source in weatherobjects:
        source.check() 
```

这里有一个问题：每次调用获取天气的函数时，它都会导致对象运行它们的`__init__`方法（我认为这在技术上称为构造方法？）而不破坏对象或清除列表。这是故意的。当函数在模块的生命周期中被多次调用，并且对象被冗余地添加到列表中时，就会出现问题。这似乎是内存泄漏的潜在来源。

这是`__init__`方法：

```
class weatherdata():
    def __init__(self, url, unit = 'f'):
        self.url = url
        self.unit = unit
        print(self) #debug statement, please ignore
        if self not in weatherobjects:
            weatherobjects.append(self)
        if self.url.count("yahoo"):
            self.yahoo = True
        else:
            self.yahoo = False
        self.check() 
```

还有麻烦的功能：

```
def fetch_weather(location=98661, hl='', weatherobjects= []):
    yahoo = weatherdata(yahoo_url, 'f')
    wunderground = weatherdata(wunderground_url, 'f')
    data = {}
    data['city'] = 'Vancouver'
    data['temperature'] = wunderground.temp
    data['conditions'] = 'foo'
    return data 
```

这是上下文的一些 shell 输出：

```
>>> weatherobjects
[<__main__.weatherdata object at 0x01F8BDF0>, <__main__.weatherdata object at 0x02035B70>]
>>> for i in range(3):
...     fetch_weather()
...
{'city': 'Vancouver', 'conditions': 'foo', 'temperature': '66.7'}
{'city': 'Vancouver', 'conditions': 'foo', 'temperature': '66.7'}
{'city': 'Vancouver', 'conditions': 'foo', 'temperature': '66.7'}
>>> weatherobjects
[<__main__.weatherdata object at 0x01F8BDF0>, <__main__.weatherdata object at 0x02035B70>, <__main__.weatherdata object at 0x01FA2E10>, <__main__.weatherdata object at 0x01FA2FB0>, <__main__.weatherdata object at 0x02035C30>, <__main__.weatherdata object at 0x02035E10>, <__main__.weatherdata object at 0x02035DF0>, <__main__.weatherdata object at 0x02035D10>]
>>> len(weatherobjects)
8 
```

如您所见，列表中有很多冗余。是否可以在方法中做到这一点`__init__`？还是我需要一个主要功能来做类似的事情`weatherobjects.append(foo)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:44:29.663

您的自定义类没有定义平等的含义。如果您要添加一个[`__eq__`](http://docs.python.org/py3k/reference/datamodel.html#object.__eq__)告诉 python 如何比较两个实例的方法，`in`测试将能够找到重复项：

```
def __eq__(self, other):
    if not isinstance(other, self.__class__):
        return NotImplemented
    return self.url == other.url and self.unit == other.unit 
```

为了补充该方法，您还应该添加一个`__ne__`方法：

```
def __ne__(self, other):
    return not self.__eq__(other) 
```

如果您的 weatherdata 对象在创建后没有更改（不可变），您可以添加一个[`__hash__`方法](http://docs.python.org/reference/datamodel.html#object.__hash__)并将您的实例存储在一个集合而不是列表中。使用一组可以加快`in`测试速度。一个示例`__hash__`方法是：

```
def __hash__(self):
    return hash((self.url, self.unit)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:56:56.597

您可以考虑使用字典，而不是将源添加到列表中。

如果 weatherdata 类可以`def __repr__():`唯一地标识自己（也许），您可以将它添加到字典中。

```
weatherobjects[str(self)] = self 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T19:32:08.147

所以两年后，我在做其他事情时找到了答案，然后回到这个。撇开我的代码的其他问题不谈，我认为我应该在类中定义列表（在实例化之前），而不是作为一个全局列表。

我想要的行为就像这个例子，[取自 Python Docs](https://docs.python.org/3/tutorial/classes.html)：

```
 class Dog:

    tricks = []             # mistaken use of a class variable

    def __init__(self, name):
        self.name = name

    def add_trick(self, trick):
        self.tricks.append(trick)

    >>> d = Dog('Fido')
    >>> e = Dog('Buddy')
    >>> d.add_trick('roll over')
    >>> e.add_trick('play dead')
    >>> d.tricks                
    ['roll over', 'play dead'] 
```

这是不合适的，因为狗没有蜂巢思维，但这种行为在文档中并未明确反对，所以我将继续使用它。我希望我的天气对象有一个蜂巢思维。

所以不是这样的东西，

```
global weatherobjectslist
class weathersource():
    def __init__(self, weatherobjectlist):
        weatherobjectlist.append(self) 
```

我想要的行为是由此产生的：

```
class weathersource():
    weathersourcelist = []

    def __init__(self, name):
        self.weathersourcelist.append(self)
        self.name = name 
```

现在，我可以检查 weathersource.weathersourcelist 以获取我所有对象的列表。

更笼统地说，这是一个具有相同行为的示例，以及一些输出：

```
>>> class person():
    people= []
    def __init__(self, name):
        self.people.append(self)
        self.name = name

>>> a,b,c = person('bob'), person('joe'), person('steve')

>>> for individual in person.people:
    print(individual.name)

bob
joe
steve 
```

# ruby-on-rails - rails 验证父范围内的唯一性

> ID：12571751
> 
> 赞同：3
> 
> 时间：2012-09-24T19:40:18.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这些模型：

```
subdomain
company
tool
code 
```

代码 belongs_to 工具、公司工具和子域公司。
我想验证子域中代码的唯一性。我怎样才能做到这一点？我知道如何使用范围在工具范围内获得唯一性，如下所示：

```
validates :codevalue, :uniqueness => {:scope => :tools_id} 
```

但是如何为以上两个父母的范围做到这一点？

我正在使用最新的 Rails 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:09:40.743

我用这样的自定义验证解决了这个问题：

```
def validate_uniqueness_in_subdomain
  Barcode.where(:value => self.value).each do |code|
    next if code.eql?(self)
    if (self.tool.company.subdomain.id  == code.tool.company.subdomain.id)
      errors.add(:unique_error, "This barcode is already in use")
      break
    end
  end
end 
```

# php - 使用 ajax 和 jquery 获取表中的所有数据

> ID：12571755
> 
> 赞同：0
> 
> 时间：2012-09-24T19:40:31.610
> 
> 标签：php, jquery, ajax

我在如何解决这个问题上遇到了麻烦

![在此处输入图像描述](../Images/599346655e056ea7ee9a594bf5ef9b4d.png)

这是代码

```
$(document).ready(function (){
    $('#submit').click(function (){
         var username = $('#username').val();
         var msg = $('#msg').val();

         $.ajax({
             type: 'POST',
             url: 'get.php',
             dataType: 'json',
             data:'username='+username+'&msg='+msg,
             success: function (data){
                 $.each(data, function(i) {
                     $('#info').append("<p> you are:"+data[i].username+"</p> <p> your message  is:"+data[i].mesg);
                 });​
             }
         });
     });
 }); 
```

仍在尝试解决它，但我运气不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:53:07.230

尝试将查询行更改为`while ($row = mysql_fetch_array($result))`，然后查看其余代码是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:42:54.360

数据属性必须作为 Json 对象发送

```
data:'username='+username+'&msg='+msg, 
```

你没有做什么..试试这种方式

```
data:{ 'username' : username , 'msg' : msg} 
```

以及返回的 json 对象是什么样子的。它是否有两个名为**username**和**mseg**的键？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:43:24.430

数据应写为 JSON 对象：

```
data: {'username': username, 'msg':msg}, 
```

# image - 为什么在 Coldfusion 中尝试上传图像时，CFHTTP 会返回文件路径的 I/O 异常？

> ID：12571757
> 
> 赞同：0
> 
> 时间：2012-09-24T19:40:45.963
> 
> 标签：image, coldfusion, connection, cfhttp

我正在运行`Coldfusion8`并且有一个处理图像处理的 cfc。

从外部来源抓取图像、将它们放入临时存储、调整大小并保存到 S3 时，cfc 运行良好。我现在尝试通过此 cfc 运行手动上传的一组新图像，突然之间，我遇到了错误。

首先我抓取图像，将其存储在临时目录中，然后调用我的 img_handler：

```
 <cffile result="temp" action="upload" accept="image/jpeg,image/jpg" filefield="Dateiname8" destination="#variables.tempDirectory#" nameconflict="overwrite" />
    <cfset variables.testFilePath = variables.tempDirectory & temp.serverFile>

    <!--- catch CMYK --->
    <cfimage action="info" source="#variables.testFilePath#" structname="cmyk" />
    <cfif cmyk.colormodel.colorspace EQ "Any of the family of CMYK color spaces">
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_cymk#" />
    </cfif>
    <cfif structKeyExists( cookie, "resolution")>
        <cfset variables.screenWidth = cookie.resolution>
    <cfelse>
        <cfset variables.screenWidth = "na">
    </cfif>

<!--- call image handler --->
    <cfinvoke component="services.form_img_handler" method="upload" returnVariable="variables.worked">
        <cfinvokeargument name="cm" value="upload_background" />
        <cfinvokeargument name="pt" value="#variables.tempDirectory#" />
        <cfinvokeargument name="fl" value="#temp.serverFile#" />
        <cfinvokeargument name="se" value="#form.app_basic_id#" />
        <cfinvokeargument name="ar" value="background" />
        <cfinvokeargument name="ck" value="#variables.screenWidth#" />
        <cfinvokeargument name="gb" value="" />
        <cfinvokeargument name="ax" value="int" />
        <cfinvokeargument name="al" value="#variables.allow#" />
    </cfinvoke> 
```

这工作得很好。图像被创建并存储在`temp`临时文件夹中。我的问题是当我尝试像这样读取 image_handler 中的图像时：

```
<cfhttp timeout="500" 
    throwonerror="no" 
    url="#LOCAL.tempDirectory##LOCAL.imgFile#" 
    method="get" 
    useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" 
    getasbinary="yes" 
    result="LOCAL.objGet"> 
```

这会产生以下错误：

```
catch - struct

Charset: [empty string]
ErrorDetail: I/O Exception: For input string: "\website\test\mem\secure\Innentitel.jpg"
Filecontent: Connection Failure
Header: [empty string]
Mimetype: Unable to determine MIME type of file.
Responseheader:  
[struct]
Statuscode: Connection Failure.  Status code unavailable.
Text: YES 
```

我几乎不知道这里发生了什么。

**问题**
我的应用程序在 SSL 上运行，但是如果我可以在第一步中获取图像并将其存储在 temp 目录中，为什么我无法再次从我的 cfc 中将其拉入。问题可能是我使用的上传功能，`access="remote"`因为我也将此功能称为网络服务吗？如果是这样，我该怎么做才能让我的函数同时处理`remote`和`regular`请求？

感谢帮助！

**编辑：**
为了澄清，`cfinvoke`第一个代码块中的第一个代码块调用我的 cfc 来处理所有图像上传到 Amazon S3。在这个 cfc 中，我正在`cfhttp`拨打有问题的电话。这是我现在使用的方法`cfimage`，这迫使我在调用 cfc 之前进行所有验证。

```
<cfcomponent output="false" hint="image handler - s3 manager">

    <cffunction name="Init" access="public" returntype="any" output="false" hint="Initialize">
        <cfreturn true />
    </cffunction>       

    <!--- this is the function I'm calling --->
    <cffunction name="upload" access="remote" output="false" hint="creates images and stores them to S3">
        <cfargument name="cm" type="string" required="true" hint="original form submitted" /> 
        <cfargument name="pt" type="string" required="true" hint="img path" /> 
        <cfargument name="fl" type="string" required="true" hint="img filename" />
        <cfargument name="se" type="string" required="true" hint="user id" />
        <cfargument name="ar" type="string" required="true" hint="item id" />
        <cfargument name="ck" type="string" required="true" hint="screen width" />
        <cfargument name="gb" type="string" required="true" hint="item to send back something" />
        <cfargument name="ax" type="string" required="true" hint="remote call y/n" />
        <cfargument name="al" type="string" required="true" hint="allowed formats or def(ault)" />

        <!--- lot of setters --->       
        <cfscript>  
            var LOCAL = {};
    // arguments
            LOCAL.command = cm;
            LOCAL.imgPath = pt;
            LOCAL.imgFile = fl;
            LOCAL.sellerILN = se;
            LOCAL.article = ar;
            LOCAL.cookie = LSParseNumber(ck);
            LOCAL.getBack = gb;
            LOCAL.access = ax;
            LOCAL.allow = al;

            // command
            if ( LOCAL.command NEQ "" ) {
                LOCAL.action = LOCAL.command;
            } else {
                LOCAL.action = "upload";
            }
            // allow 
            if ( LOCAL.allow EQ "def" ){
                LOCAL.allow = "png,jpg,jpeg";
                } 

            // s3 misc
            LOCAL.letter = "";
            LOCAL.objGet = "";
            LOCAL.bucketPath = Session.bucketPath;
            LOCAL.bucketName = Session.bucketName;
            LOCAL.acl = "public-read";
            LOCAL.storage = "";
            LOCAL.tempDirectory = expandPath( "../somewhere/secure/" );
            LOCAL.failedLoads = "";
            LOCAL.altFailedLoads = "";
            LOCAL.createBucket = "false";
            LOCAL.errorCount = 0;
            LOCAL.altErrorCount = 0;
            LOCAL.cacheControl = 1;
            LOCAL.contentType = "image";
            LOCAL.httptimeout = "300";
            LOCAL.cacheDays = "30";
            LOCAL.storageClass = "REDUCED_REDUNDANCY";
            LOCAL.keyName = "";
            LOCAL.baseUrl = "http://www.page.com";
            LOCAL.imageSrc = "";
            LOCAL.testFilePath = LOCAL.imgPath & LOCAL.imgFile;
            LOCAL.fileExt = ListLast(LOCAL.imgFile, ".");
            LOCAL.runner = "";
            LOCAL.worked = "true";
            LOCAL.or = "";
            LOCAL.tag = "";

            // background dimes - seldomly used, so declare here
            if ( LOCAL.command EQ "upload_background") {
                LOCAL.dims.backW = structNew();
                LOCAL.dims.backW.s = 640;
                LOCAL.dims.backW.m = 800;
                LOCAL.dims.backW.l = 1024;
                LOCAL.dims.backW.xl = 2048;

                LOCAL.dims.backH = structNew();
                LOCAL.dims.backH.s = 480;
                LOCAL.dims.backH.m = 600;
                LOCAL.dims.backH.l = 748;
                LOCAL.dims.backH.xl = 1496;
                }
        </cfscript> 

        <!--- create up to 4 versions of each image and store to S3 --->
        <cftry>
            <cfif LOCAL.command EQ "upload_search">
                <cfif LOCAL.cookie LT 320 >
                    <cfset LOCAL.runner = "l,s">
                <cfelseif LOCAL.cookie GTE 320 AND LOCAL.cookie LTE 767>
                    <cfset LOCAL.runner = "l,m">
                <cfelseif LOCAL.cookie GT 768 AND LOCAL.cookie LTE 1279>
                    <cfset LOCAL.runner = "xl,m">
                <cfelseif LOCAL.cookie GT 1280>
                    <cfset LOCAL.runner = "xl,l">
                </cfif>
            <cfelseif LOCAL.command EQ "upload_import" OR LOCAL.command EQ "upload_background" OR LOCAL.command EQ "remove_background">
                <cfset LOCAL.runner = "xl,l,m,s">
            </cfif>

            <!--- get image --->
            <cfimage action="read" name="LOCAL.objGet" source="#LOCAL.tempDirectory##LOCAL.imgFile#">

            <!--- I/O Exception: peer not authenticated... 
            <cfhttp timeout="500" 
                throwonerror="no" 
                url="https://www.website.com/test/mem/img/secure/#LOCAL.imgFile#" 
                method="get" 
                useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" 
                getasbinary="yes"
                result="LOCAL.objGet">
            ---> 
```

所以我现在`cfimage`用来从临时文件夹中检索图像，这与`cfhttp`. 通话后我进行了图像验证例程`cfhttp`，现在我将其移至 cfc 调用之外。不确定这是否更好/更智能，但至少它现在正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:25:14.187

`cfhttp`需要带有协议的完整 URL。粗略浏览一下错误消息状态`ErrorDetail: I/O Exception: For input string: "\website\test\mem\secure\Innentitel.jpg"`。

如果您将其转换为带有协议的 URL，它会起作用吗？

# forms - 如何在不验证表单的情况下向 p:dataTable 动态添加新行？

> ID：12571759
> 
> 赞同：3
> 
> 时间：2012-09-24T19:41:10.220
> 
> 标签：forms, jsf, primefaces

我正在开发一种使用 JSF 和 PrimeFaces 添加/编辑产品价格的表格。单个产品可以有多个价格，具体取决于数量，如`<p:dataTable>`.

支持bean：

```
@ManagedBean
@ViewScoped
public class ProductBean {

  protected Product product;
  protected List<ProductPrice> productPrices;

  public void addNewPrice() {
    ProductPrice productPrice = new ProductPrice();
    productPrice.setPrice(new BigDecimal(0));
    this.productPrices.add(productPrice);
  }

  // ...
} 
```

Facelet 页面：

```
<h:form id="productForm">
  <p:inputText value="#{productBean.product.name}" required="true">
    <f:ajax event="blur" render="nameMessage" />
  </p:inputText>
  <p:message id="nameMessage" for="name" />

  <p:dataTable id="pricesList" ...>
  </p:dataTable>
  <p:commandButton value="Add another price" update="pricesList" action="#{productBean.addNewPrice()}" />
  <p:commandButton value="Submit" action="#{productBean.submit}" />
</h:form> 
```

第一个按钮“添加另一个价格”做了它应该做的事情：向“pricesList”添加一个新行。但仅当表单有效（如果未设置产品名称，表单无效）。

我的问题是，我有两个用于表单的命令按钮，但我不知道如何在没有命令按钮的情况下获得我想要的功能。我尝试了很多方法：将“添加另一个价格”更改为`<p:button>`具有 ajax 功能的标准；由于按钮的结果而不起作用。我为此按钮尝试了“type = button”，但在这种情况下，根本没有任何反应。

是否有任何建议可以实现我想要的功能？没有必要有一个按钮来解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:05:47.360

默认情况下`<p:commandButton>`提交和处理整个表单。这确实会验证所有输入字段。您可以使用`process`默认为 的属性来控制它`@form`。在您的特定情况下，您可以只使用`@this`以便仅调用命令按钮自己的操作。

```
<p:commandButton value="Add another price" process="@this" update="pricesList" action="#{productBean.addNewPrice()}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:57:47.877

使用**p:commandButton**动态添加行有什么问题？如果我理解您的问题是正确的，那么您显然需要向托管 bean 发出请求，以便将新行信息添加到数据表列表中。**如果您对 p:commandButton**不满意，您可以随时选择**p:commandLink**。对于编辑行数据，您可以使用**p:rowEditor**和**p:datatable**。

 ******[查看数据表行编辑的展示示例](https://www.primefaces.org/showcase/ui/data/datatable/edit.xhtml)

希望这可以帮助 ：）******

# ipad - 如何在 Ipad 模拟器上安装 .ipa 文件？

> ID：12571762
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:41:27.057
> 
> 标签：ipad, ios-simulator

我是 ipad/iphone 应用程序的新手，我有一个 .ipa 文件，需要使用 ipad 模拟器进行测试。有人可以帮我在模拟器上安装 ipad 应用程序（.ipa）吗？

我感谢您的帮助..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:39:03.380

你不能。您可以使用临时部署（或通过 TestFlight）将构建部署到测试人员，以在实际设备上进行测试。模拟器中的测试是通过在 XCode 中构建源代码来完成的。

# java - H2DB 和 Java，大约 > 两个小时的差异

> ID：12571769
> 
> 赞同：2
> 
> 时间：2012-09-24T19:41:59.050
> 
> 标签：java, sql, time, h2

我正在开发一个比赛计时系统，在某些情况下，我需要从 H2DB 中检索一个时间对象。像它的兄弟（或姐妹）一样，时间数据类型是相对于 1970 年 1 月 1 日，并以 SQL 中的“hh:mm:ss”格式表示，日期默认设置为 01-01-1970。默认情况下，它映射到“java.sql.Time”对象。作为一个值得信赖的学徒，我编写了以下代码以将小时与分钟分开以用于显示目的。

```
 if(race.getCutOffTime()!=null){
    long cutOffHour=(race.getCutOffTime().getTime())/(3600000);
    int cutOffMinute=(int)(race.getCutOffTime().getTime()%(60*60*1000));
    System.out.println(cutOffHour+":"+cutOffMinute);
    } 
```

然而，Java 的时间处理很臭，因为这些函数输出了意外的值，例如，我的数据库中的以下语句给出了 3:30 的输出。

```
INSERT INTO MagEye.Races(RaceName, EventID,CutOffTime) 
VALUES ('TEST', SELECT EventID FROM MagEye.Events 
WHERE EventName='Sabrina Love',TIME '5:50:00'); 
```

更改此语句以反映“0:0:0”的时间，给我一个“-2:00”的值我做错了什么？先感谢您）。

***编辑***按要求，这是我的数据库代码：

表创建语句：

```
CREATE TABLE IF NOT EXISTS MagEye.Races (RaceID INT PRIMARY KEY AUTO_INCREMENT ,  RaceName VARCHAR(100) ,EventID INT, Description TEXT, MaxEntrants INT, MinAge INT, MaxAge INT, RacePrefix VARCHAR (5), TimingMethod CHAR(1), CutOffTime TIME, RaceEnd TIMESTAMP,Finished BOOLEAN DEFAULT FALSE, Autostart BOOLEAN, FOREIGN KEY(EventID) REFERENCES MagEye.Events(EventID)); 
```

插入语句：

```
INSERT INTO MagEye.Races(RaceName, EventID,CutOffTime) VALUES ('TEST', SELECT EventID FROM MagEye.Events WHERE EventName='Sabrina Love',TIME '5:50:00'); 
```

恢复：

```
raceDB.result = raceDB.state.executeQuery("SELECT * FROM MagEye.Races WHERE EventID=" + eventID + " ORDER BY RaceName");
            java.util.ArrayList<Race> races = new java.util.ArrayList<>();

            while (raceDB.result.next()) {
                Race thisRace;
                String timingMethodString = raceDB.result.getString("TimingMethod");
                Race.TimingMethod timingMethod = null;
                if (timingMethodString != null) {
                    timingMethod = Race.TimingMethod.valueOf(timingMethodString);
                } else {
                    timingMethod = Race.TimingMethod.MANUAL;
                }
                thisRace = new Race(raceDB.result.getInt("RaceID"), event, raceDB.result.getString("RaceName"), raceDB.result.getString("Description"), raceDB.result.getInt("MaxEntrants"), raceDB.result.getInt("MinAge"), raceDB.result.getInt("MaxAge"), raceDB.result.getString("RacePrefix"), timingMethod,(raceDB.result.getTime("CutOffTime")), raceDB.result.getBoolean("Autostart"));
thisRace = new Race(raceDB.result.getInt("RaceID"), event, raceDB.result.getString("RaceName"), raceDB.result.getString("Description"), raceDB.result.getInt("MaxEntrants"), raceDB.result.getInt("MinAge"), raceDB.result.getInt("MaxAge"), raceDB.result.getString("RacePrefix"), timingMethod,(raceDB.result.getTime("CutOffTime")), raceDB.result.getBoolean("Autostart")); 
```

展示：

```
if(race.getCutOffTime()!=null){
    long cutOffHour=(int)(race.getCutOffTime().getTime())/(3600000);
    RacesCutOffLength.setText(cutOffHour+"");      
    int cutOffMinute=(int)(race.getCutOffTime().getTime()%(60*60*1000));
    this.RacesMinutes.setText(cutOffMinute+"");
    }
    else{
        RacesCutOffLength.setText("0");      
        RacesMinutes.setText("0");      
    } 
```

***编辑***：我决定用长原语替换 Time 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:49:28.160

`java.util.Date`始终**是**UTC 时间。因此，根据您的语言环境，可能会有一个偏移量。

我听说过`Joda Time`它是一种更好的处理时间的 Java API。

无论如何，问题来自混合处理的日期`java.util.Date`和其他直接作为 SQL 的一部分传递的日期。

只要您继续使用`java.util/sql.Date`所有内容（并且您不在数据库内达到峰值）（并且您不更改语言环境），结果将是一致的。当您的 SQL 尝试将值直接作为文本传递时，麻烦就开始了。因此，要么在任何`Date`地方使用，要么就像垃圾神所说的那样，每次使用`Date`时都要注意将 Locale 设置为“GMT”（因此 Date 的内部表示和输出是相同的）。请注意，这确实包括`Date`从数据库返回

# java - Java 随机打印

> ID：12571773
> 
> 赞同：0
> 
> 时间：2012-09-24T19:42:15.973
> 
> 标签：java, random, numbers

我使用以下方法生成 0-99 之间的随机数：

```
int num2= (int)(Math.random() * ((99) + 1)); 
```

当数字低于 10 时，我希望它使用 0num2 打印所以如果数字是 9，它将是 09。

我怎样才能让它打印这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:45:48.597

您可以使用以下[`format()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format%28java.lang.String,%20java.lang.Object...%29)方法：

```
System.out.format("%02d%n", num2); 
```

`%02d`将参数打印为宽度为 2 的数字，用 0 填充
`%n`为您提供换行符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:44:11.187

```
System.out.println((num2 < 10 ? "0" : "") + num2); 
```

一个班轮:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T19:43:26.727

```
String str;
if (num2 < 10) str = "0" + num2;
else str = "" + num2;

System.out.println("Value is: " + str); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T19:44:18.697

看看[`PrintStream.format`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#format%28java.lang.String,%20java.lang.Object...%29)，它将允许您使用指定的宽度和填充字符进行打印。

`System.out`是一个`PrintStream`，所以你可以使用`System.out.format`代替`println`。

您的情况很简单，请查看格式字符串的[语法：](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)

```
System.out.format("%02d", num2); 
```

这里*2*是最小宽度，如果结果的宽度小于*2，0指定用零填充结果。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T19:46:33.887

您可以改用删除多余数字的方法。

```
System.out.println(("" + (int)(Math.random()*100 + 100)).substring(1)); 
```

或使用字符串格式。

```
String s = String.format("%02d", (int)(Math.random()*100)); 
```

或者

```
System.out.printf("%02d", (int)(Math.random()*100)); 
```

我通常会使用最后一个选项，因为它允许您组合其他字符串并打印它们。

# c# - C# + File.OpenRead(path_to_file)

> ID：12571775
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:42:26.680
> 
> 标签：c#, file, iis-7

我正在开发一个托管在 IIS7 中的基于 HTML5 的 WebApp。此 Web 应用程序向 IIS7 中托管的 Web 服务发送请求。

服务初始化查找特定文件，例如：“appfile.txt”为

`FileStream stream = File.OpenRead("appfile.txt"); // opens file for reading.`

当作为控制台应用程序运行时，此调用在 project\bin 或输出目录中查找并能够找到指定的文件。

但是 IIS7 中托管的相同内容在“C:\windows\system32\inetsrv\appfile.txt”中查找。

是否有任何配置项在 web.config 中使用过从 IIS7 应用程序的 Bin 目录而不是其他任何地方定位文件？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:49:17.503

如果应用程序文件位于您的 Web 应用程序文件夹中，请尝试使用 Server.MapPath 获取文件相对于 Web 应用程序根目录的位置：

```
File.OpenRead(Server.MapPath("~/appfile.txt")) 
```

那应该行得通。您可能需要设置 appfile.txt 属性，以便将其复制到输出文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:46:38.080

您当然可以在 web.config 文件中创建自己的部分来获取所需的文件路径。它不需要预先定义。然后只需使用您想要的任何 XML 阅读器。

或者，您可以在 Visual Studio 中非常轻松地创建一个 .resx 文件，然后将路径填充为变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:58:55.440

感谢您的所有宝贵意见，我可以使用以下代码片段自己解决此问题

`string path = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath;`

`string[] labs = File.ReadAllLines(path + "/appfile.txt");`

这段代码让我可以毫无问题地读取文件内容。

# ruby-on-rails-3 - Heroku Scheduler rake 任务中止

> ID：12571777
> 
> 赞同：1
> 
> 时间：2012-09-24T19:42:39.097
> 
> 标签：ruby-on-rails-3, heroku, rake, scheduler

我是 Rails 的新手，我第一次想使用 Heroku Scheduler 在我的 Rails 应用程序中运行定期任务。按照[教程](http://devcenter.heroku.com/articles/scheduler)中的建议，我在 /lib/tasks/scheduler.rake 中创建了以下 rake 任务

```
 desc "This task is called by the Heroku scheduler add-on"
task :auto_results => :environment do
    puts "Updating results..."
    @cups = Cup.all
@cups.each do |cup|
    cup.fix_current_results
end
    puts "done."
end

task :update_game_dates => :environment do
    puts "Updating game dates..."
    @cups = Cup.all
@cups.each do |cup|
    cup.update_game_dates
end
puts "done."
end 
```

该任务在我的本地环境中运行良好，但在推送到 Heroku 并运行该任务后，每个都中止并出现以下错误：

```
rake aborted!
undefined method `name' for nil:NilClass 
```

对我来说，Heroku 似乎无法访问数据库，因此无法恢复它可以执行方法的对象。

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:28:25.853

您可以执行以下操作：

在您的 Cup 模型中使用类方法。然后，您可以使用`rails runner Cup.my_class_method`命令调用它，并在 Heroku 调度程序中进行调度。

```
# app/models/cup.rb
class Cup < ActiveRecord::Base
  # Your existing code

  ##
  #  Class Methods
  #  that can be run by 'rails runner Cup.my_class_method'
  #  with the Heroku scheduler
  def self.auto_results
    find_each {|cup| cup.fix_current_results}
  end

  def self.update_game_dates
    find_each {|cup| cup.update_game_dates}
  end
end 
```

然后使用 Heroku 调度器进行调度`rails runner Cup.auto_results`。`rails runner Cup.update_game_dates`

我在此过程中对您的代码进行了一些优化，如果您有任何问题，请随时询问。

# powershell - Start-Job 脚本块——如何使用参数调用 cmdlet？

> ID：12571788
> 
> 赞同：3
> 
> 时间：2012-09-24T19:43:06.203
> 
> 标签：powershell, arguments, cmdlet, start-job

我是 cmdlet 的新手，在`Start-Job`调用带有 cmdlet 的脚本块时遇到了问题，该脚本块带有参数。这是我到目前为止所拥有的：

```
 Start-Job -ScriptBlock {
       $ServiceObj = Get-Service -Name $ServiceName -ComputerName $Computer -ErrorAction Stop   
       Stop-Service -InputObj $ServiceObj -erroraction stop 
    } 
```

当我运行参数为 null 或空且参数为 null 或空时，`receive-job`我看到错误。在任何情况下都不是这样。上面的代码片段是从两个 foreach 循环内部调用的：`-ComputerName``-InputObj`

```
foreach($Computer in $ComputerNames) {
  foreach($ServiceName in $ServiceNames) {
   #..call snippet above
  }
 } 
```

我试过`-ArgumentList`在调用我的脚本块时使用，但也没有运气。我确定我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T19:51:51.060

您确实需要使用 ArgumentList（除非您使用的是 PowerShell V3），例如：

```
Start-Job -ScriptBlock {param($ComputerName)
   $ServiceObj = Get-Service -Name $ServiceName -CN $ComputerName -ErrorAction Stop
   Stop-Service -InputObj $ServiceObj -erroraction stop 
} -ArgumentList $Computer 
```

如果您使用的是 PowerShell V3，则可以使用`using`变量限定符，例如：

```
Start-Job -ScriptBlock {
   $ServiceObj = Get-Service -Name $ServiceName -CN $using:Computer -ErrorAction Stop
   Stop-Service -InputObj $ServiceObj -erroraction stop 
} 
```

# ms-access - 与Microsoft Access中的表实时交换SAP表数据，如何？

> ID：12571789
> 
> 赞同：1
> 
> 时间：2012-09-24T19:43:06.813
> 
> 标签：ms-access, sap-basis

我在 SAP 中有表“YXY”，其中包含我想在 Microsoft Access 中实时读取的数据。

例如，包含一些交易数据的表“YXY”包含 1.000 条记录，我希望在 Microsoft Access 中也能实时查看这些记录。

怎么能做到这一点（也许是一些例子？），有什么办法可以违反我的 Oracle 许可证？我不希望这种情况发生。

我希望有人可以帮助我，因为这对我来说非常重要。

谢谢你。阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:20:50.897

假设有问题的表只包含 CLIKE 字段，您可以使用功能模块 RFC_READ_TABLE，作为较新版本中的 Web 服务或作为使用 VBA 的传统 RFC 调用。如果你用谷歌搜索 RFC_READ_TABLE 和 Access，你会找到足够多的例子来理解这个想法——我没有尝试过任何一个，所以我不想推荐一个。为此，您只需要一个 SAP 用户，Oracle 许可证不会进入等式。

# parsing - 在scala中使用解析器组合器逐步评估

> ID：12571795
> 
> 赞同：3
> 
> 时间：2012-09-24T19:43:33.807
> 
> 标签：parsing, scala, parser-combinators

我只是在学习 Scala 解析器组合器库。我已经尝试了一个可以使用抽象语法树解析一些算术表达式的工作解析器。所以当我打电话时

```
phrase(expr)(tokens) 
```

我的解析器解析所有输入然后给我一个评估。但是我怎样才能有一步一步的评估呢？

说

> 3 + 4 * 7

它打印

> 3 + 28

然后

> 31

在单独的行中。

我已经浏览了 API，但那里的文档不是很有帮助......感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:02:27.600

这是您尝试执行的操作的一个非常简单的实现：

首先，我们定义一个表达式层次结构。您需要根据您的具体问题对此进行调整。

```
trait Expr {
  def eval: Int
}
case class IntLeaf(n: Int) extends Expr {
  def eval = n
  override def toString = "%d".format(n)
}
case class Sum(a: Expr, b: Expr) extends Expr {
  def eval = a.eval + b.eval
  override def toString = "(%s + %s)".format(a, b)
} 
```

然后，一个只结合最底层分支的函数。

```
def combineLeaves(e: Expr): Expr = {
  e match {
    case IntLeaf(n) => IntLeaf(n)
    case Sum(IntLeaf(a), IntLeaf(b)) => IntLeaf(a + b)
    case Sum(a, b) => Sum(combineLeaves(a), combineLeaves(b))
  }
} 
```

然后，一个函数，一次将树组合一层，边打印边打印。

```
def printEval(e: Expr) {
  println(e)
  e match {
    case IntLeaf(n) =>
    case _ => printEval(combineLeaves(e))
  }
} 
```

现在，解析器。同样，您必须根据您的数据对其进行调整。

```
object ArithmeticParser extends RegexParsers {
  private def int: Parser[IntLeaf] = regex(new Regex("""\d+""")).map(s => IntLeaf(s.toInt))
  private def sum: Parser[Sum] = ("(" ~> expr ~ "+" ~ expr <~ ")").map { case (a ~ _ ~ b) => Sum(a, b) }
  private def expr = int | sum
  def parse(str: String): ParseResult[Expr] = parseAll(expr, str)
  def apply(str: String): Expr = ArithmeticParser.parse(str) match {
    case ArithmeticParser.Success(result: Expr, _) => result
    case _ => sys.error("Could not parse the input string: " + str)
  }

} 
```

以下是你如何使用它：

```
scala> printEval(ArithmeticParser("((1 + 7) + ((3 + 9) + 5))"))
((1 + 7) + ((3 + 9) + 5))
(8 + (12 + 5))
(8 + 17)
25 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:44:05.057

解析器组合器永远不会给你任何评估。使用解析器组合器解析输入字符串并构建一些表示它的数据结构。评估是您以某种方式处理数据结构并执行所需简化的另一个步骤。因此，有了你的表达式`3+4*7`，在解析阶段你可以构建以下抽象语法树：

```
   +
  / \
 3 *   
    / \
   4 7

```

然后，在评估阶段，递归地遍历树，对每个非叶子节点应用节点操作到其左右子树的评估结果。

如果文档没有帮助，您可以参考[Programming in Scala的](http://www.artima.com/pins1ed/)[解析器组合器章节](http://www.artima.com/pins1ed/combinator-parsing.html)，该章节的第一版是免费提供的。

我最近还写了一篇[关于](http://semberal.eu/blog/parser-combinators-and-what-if-regular-expressions-are-not-enough)Scala 解析器组合器的博文，其中我讨论了一个与您的场景有些相似的场景。

# java - 如何从代码中强制全局注销 JBOSS/SSO？

> ID：12571799
> 
> 赞同：5
> 
> 时间：2012-09-24T19:43:45.710
> 
> 标签：java, jboss, single-sign-on, saml-2.0, picketlink

我在带有Picketlink的IDP上的JBoss中使用SSO，在企业Java安全方面没有很多经验，我需要做的是在某些事件或超时时强制用户全局注销。例如用户启动表单，但在 5 分钟内没有感觉到 - 我想强制从代码中全局注销。

通常执行全局注销非常容易，只需将“GLO=true”添加到用于注销链接的 URL，然后它就会被 SSO Valve 捕获。但是，当用户未连接浏览器时，如何从代码中调用它？

试图查看 Picketlink 代码内部，虽然 SAML2Request 中有方法 createLogoutRequest 我仍然不明白如何处理它，如何发送它，将它发送到哪里。请指教。

# macos - 用于 Mac 的轻量级 localhost 文件服务器

> ID：12571804
> 
> 赞同：25
> 
> 时间：2012-09-24T19:44:02.070
> 
> 标签：macos, terminal, fileserver

是否有可以在我的 Mac 上用于开发的超轻量级文件服务器？

我在想像：

```
> cd somefolder
> run server
  ...running static file server at http://0.0.0.0:2343... 
```

它仅用于静态 html/css/js/images 的开发 - 不需要外部连接。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-24T19:46:32.310

当然！它已经安装好了。

试试这个：

```
cd path/to/files
python3 -m http.server 
```

如果您想在特定端口而不是 8000（默认）上运行它，只需将端口号作为第二个参数附加，例如：

```
python3 -m http.server 2343 
```

# netbeans - 远程访问在 Glassfish 上运行的简单 EJB 的最简单方法是什么？

> ID：12571811
> 
> 赞同：0
> 
> 时间：2012-09-24T19:44:17.997
> 
> 标签：netbeans, glassfish, ejb, java-ee-6

我是 Java EE 的新手，要开始使用，我使用了本教程：

[http://netbeans.org/kb/docs/javaee/entappclient.html](http://netbeans.org/kb/docs/javaee/entappclient.html)

我不想改变任何东西，但我想远程访问 EJB。

哪种方法最简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:18:27.820

我建议使用[这里](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB)`JNDI`提到的查找。

# google-maps - 谷歌地图 v3 - 准确性

> ID：12571819
> 
> 赞同：1
> 
> 时间：2012-09-24T19:44:46.640
> 
> 标签：google-maps

我正在通过我的 Android 移动设备向谷歌地图 API 传递经度/纬度。然而，当我坐在同一张桌子上时，它经常会在同一张桌子上给出不同的地址，尽管我没有移动位置......

有时它给了我正确的确切地址有时是随机附近的地址等......

有没有办法返回结果列表（即适合我所在位置的一般纬度/经度的多个地址？）

所以也许它会给我正确的地址加上它认为我可能在附近的几个地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:19:07.850

您可以从 Googlemaps 计算地图图块以获取该区域的所有位置。使用 lat lon 对中的 geohash 更容易获得地图图块。我有证据表明谷歌使用 z 阶莫顿曲线，但在新的谷歌地图中，​​他们使用 ax,y 对来识别图块。这是微软解释 bing maps quadkey 的链接：http: [//msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)。我编写了一个用于 Googlemaps 和希尔伯特曲线的 php 脚本。我主要写它是因为我想要一些聚类和快速查找，但你也可以用它来绘制一些希尔伯特曲线。您可以在 phpclasses.org（希尔伯特曲线）免费下载它。也许您可以研究 R-Trees，因为它们不那么复杂。

# vba - Excel IF -Then-Else 条件

> ID：12571822
> 
> 赞同：0
> 
> 时间：2012-09-24T18:00:38.547
> 
> 标签：vba

请协助运行以下 Excel 宏。我想我错过了一些东西。逻辑不行。

```
Sub RiskGrade()

Dim Value1 As String

Sheets("Sheet1").Select
If (Cells(10, 2) = "BX") Then Cells(12, 4) = -8
Exit Sub

ElseIf (Cells(10, 2) = "GX") Then Cells(12, 4) = -7
Exit Sub

Else
    For i = 12 To 14

        Value1 = Right(Trim(Sheet1.Cells(i, 2)), 1)
        'MsgBox Value1
        Select Case Value1
            Case "W"
                Cells(i, 4) = 1
            Case "H", "S", "R", "F", "G"
                Cells(i, 4) = 2
            Case "D"
                Cells(i, 4) = 3
            Case "C"
                Cells(i, 4) = 4
            Case "B"
                Cells(i, 4) = 5
            Case "A"
                Cells(i, 4) = 6
            Case "*"
                Cells(i, 4) = 7
            Case "M"
                Cells(i, 4) = 8
            Case "E"
                Cells(i, 4) = 9
            Case OTHER
                Cells(i, 4) = -9
        End Select
        Exit For
    Next i
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T18:09:05.147

您已经启动了一个 IF 语句并在同一行中添加了一个操作，这意味着它不会在此之后期待一个 END IF 或 ELSE。

在 VB 中

> IF 条件 THEN 动作

是单个 IF 语句。

考虑

```
If (Cells(10, 2) = "BX") Then
  Cells(12, 4) = -8
  Exit Sub
ElseIf (Cells(10, 2) = "GX") Then
  Cells(12, 4) = -7
  Exit Sub
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:47:06.953

1.  `Case OTHER`应该`Case Else`
2.  将`Exit For`在第一次通过后终止循环，因此需要将其删除或更改为您希望处理中止的位置
3.  `If ... Then`应该是多行或单行。

    *   多行：
        `If (Cells(10, 2) = "BX") Then
        Cells(12, 4) = -8
        Exit Sub
        ElseIf ...`

    *   单行：（ 注意在同一语句中使用分隔命令）
        `If (Cells(10, 2) = "BX") Then Cells(12, 4) = -8 : Exit Sub
        ElseIf ...`
        `:``If`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T12:05:35.930

您应该使用`OPTION EXPLICIT`，因为它有助于在将拼写错误应用于关键字时发现错误。

在当前形状中，您使用`Case OTHER`which should be指定了意外行为，VBA`Case Else`中没有关键字，因此被解释为数据类型的变量，但会被正确解释为“在其他情况下做......”。`OTHER``OTHER``Variant``Case Else`

同样使用`Exit For`after `Select`stop 宏执行 on `i=12`, 13 和 14 然后不应用。

```
Option Explicit
Sub RiskGrade()

Dim Value1 As String

Sheets("Sheet1").Select

If (Cells(10, 2) = "BX") Then 
Cells(12, 4) = -8
Exit Sub

ElseIf (Cells(10, 2) = "GX") Then 
Cells(12, 4) = -7
Exit Sub

Else
    For i = 12 To 14

        Value1 = Right(Trim(Sheet1.Cells(i, 2)), 1)
        Debug.Print Value1 'CTRL+G for immediate window

        Select Case Value1
            Case "W"
                Cells(i, 4) = 1
            Case "H", "S", "R", "F", "G"
                Cells(i, 4) = 2
            Case "D"
                Cells(i, 4) = 3
            Case "C"
                Cells(i, 4) = 4
            Case "B"
                Cells(i, 4) = 5
            Case "A"
                Cells(i, 4) = 6
            Case "*" 'I don't know what behaviour in will cause, does it spot '*' only, or any char
                Cells(i, 4) = 7
            Case "M"
                Cells(i, 4) = 8
            Case "E"
                Cells(i, 4) = 9
            Case Other ' not OTHER
                Cells(i, 4) = -9
        End Select
        'Exit For ' - why exit after first iteration - guess it's unnecessary procedure ?
    Next i
End If 
```

结束子

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-15T01:06:32.610

如果您同时删除“退出子”，它应该可以工作。使用“exit sub”，您似乎正在关闭您的 if 没有“end if”

# sql-server - 在 Visual Studio 中使用 SQL Server 保存数据

> ID：12571825
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:44:55.593
> 
> 标签：sql-server, database, visual-studio-2010

我想知道 Visual Studio 是否带有 SQL 数据库？还是我必须另外安装 SQL Server 才能将它与 Visual Studio 一起使用？

我需要它来存储和操作来自 WinForms 中文本框和其他控件的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:48:34.017

VS2010 安装程序为您提供了安装 SQL Server 2008 Express Edition 的选项。这个版本对于开发目的来说已经足够好了，但老实说不适合生产使用。

我想这取决于你对它的认真程度，如果它是一些严肃的数据库开发人员，你绝对应该安装“完整”的 SQL Server 开发版。

# ruby-on-rails - 作家 has_many 书 has_many 顺序。如何确保 Writer.books.each、orders.empty？

> ID：12571826
> 
> 赞同：1
> 
> 时间：2012-09-24T19:44:57.027
> 
> 标签：ruby-on-rails, has-many

我有一个`Writer`has_many 的模型`books`。每个`book`has_many `orders`。为了防止不必要的删除，`Book`模型有一个 before_destroy 钩子方法，以确保`Order`模型中没有引用它，如[PragProg Agile Web Dev (p.7)中所建议的那样](http://media.pragprog.com/titles/rails4/cart.pdf)

**图书.rb**

```
before_destroy: :ensure_not_referenced_by_any_order

def ensure_not_referenced_by_any_order
  if orders.empty?
    return true
  else
    return false
  end
end 
```

**我将如何为 Writer 模型编写 before_destroy 挂钩方法，以便 Writer.books.each 不存在订单？**我开始写下面的内容，但无法弄清楚如何写。

**作家.rb**

```
before_destroy: :ensure_books_not_referenced_by_any_order

def ensure_books_not_referenced_by_any_order
  self.books.each do |book|
    if book.orders.empty?
      return true
    else
      return false
    end
  end
end 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:51:01.920

你不应该在没有命令的情况下中止第一本书的循环。

```
def ensure_books_not_referenced_by_any_order
    self.books.each do |book|
        if !book.order.empty?
            return false
        end
    end
    return true
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:16:49.133

无法让@Mark 的建议起作用。只对books.empty?进行限制，这意味着作者必须先删除他所有的书才能删除他自己的个人资料。

```
def ensure_has_no_books
  if books.empty?
    return true
  else
    return false
  end
end 
```

如果您对如何使 has_no_books_reference_by_any_order 循环工作有深入了解，请告诉我，如果可以，我会接受。谢谢！

# powershell-2.0 - 为什么 powershell 不能正确加载 SQLPS 模块

> ID：12571833
> 
> 赞同：3
> 
> 时间：2012-09-24T19:45:27.300
> 
> 标签：powershell-2.0

我正在使用加载 SQLPS

```
Import-Module "sqlps" -DisableNameChecking 
```

在 Windows Server 2008 R2 机器上。

它给了我错误

> 未加载程序集“Microsoft.SqlServer.Management.HadrDMF”，因为未找到程序集

Google-fu 让我失望了……帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:43:28.130

确保除了 PowerShell 扩展之外，您还安装了共享管理对象，这反过来又需要系统 CLR 类型。这些都可以在以下位置找到：

[MS SQL Server 2012 功能包](http://www.microsoft.com/en-us/download/details.aspx?id=29065)

# sql - 当您混合使用数字和字符串时，如何使用 order by 执行 select 语句？

> ID：12571837
> 
> 赞同：1
> 
> 时间：2012-09-24T19:45:44.273
> 
> 标签：sql, ms-access, asp-classic, vbscript, jet

Column是一个字符串，里面的数据可以是

```
10
2
3
3.1
3.2
a10
a11
1
a12.2
a12.3 
```

希望结果返回为：

```
1
2
3
3.1
3.2
10
a10
a11
a12.2
a12.3 
```

这将是带有 MSACCESS Web 数据库的 ASP/VBScript（Provider=Microsoft.Jet.OLEDB.4.0;Data Source）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:05:44.703

MS Access怎么样：

```
SELECT IIf(IsNumeric(Left([fld],1)),0,Left([fld],1)) AS Expr1, 
  Val(IIf(IsNumeric(Left([fld],1)),[fld],Mid([fld],2))) AS Expr2, Fld
FROM Table
ORDER BY IIf(IsNumeric(Left([fld],1)),0,Left([fld],1)), 
  Val(IIf(IsNumeric(Left([fld],1)),[fld],Mid([fld],2))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:14:03.370

您可以尝试先按字段长度排序，然后按字段值排序。像这样的东西：

```
SELECT FIELD FROM TABLE ORDER BY LEN(FIELD), FIELD 
```

它在这里工作，看看是否有另一个测试用例阻止它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:04:56.520

如果非数字字符串始终以示例中的单个字母开头，则可以 ORDER BY 三列表达式。

```
SELECT DISTINCT
    IIf(IsNumeric(the_column) = True, 0, 1) AS order_by1,
    IIf(IsNumeric(the_column) = True, '', Left(the_column,1)) AS order_by2,
    IIf(IsNumeric(the_column) = True,
        Val(the_column), Val(Mid(the_column,2))) AS order_by3,
    the_column
FROM YourTable
ORDER BY 1, 2, 3; 
```

如果您不希望结果集中出现这些 order_byX 字段，请将它们移到 ORDER BY 子句中。

```
SELECT DISTINCT
    the_column
FROM YourTable
ORDER BY
    IIf(IsNumeric(the_column) = True, 0, 1),
    IIf(IsNumeric(the_column) = True, '', Left(the_column,1)),
    IIf(IsNumeric(the_column) = True,
        Val(the_column), Val(Mid(the_column,2))); 
```

# android - findViewById 返回 null

> ID：12571844
> 
> 赞同：1
> 
> 时间：2012-09-24T19:46:28.113
> 
> 标签：android, viewgroup, findviewbyid

我正在使用 Facebook 等滑动菜单构建 Android 应用程序，但`ViewGroup`无法正常工作。它在我运行 4.1 的手机上运行良好，但是当我尝试在运行 2.3 的模拟器上运行我的代码时，`mContent = (FrameLayout) findViewById(R.id.animation_layout_content);`这条线总是返回`null`；但是，`mSidebar`正确返回视图。如果有人帮助解决这个问题，我将不胜感激。谢谢！

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_singlepane_empty);

    if (getIntent().hasExtra(Intent.EXTRA_TITLE)) {
        setTitle(getIntent().getStringExtra(Intent.EXTRA_TITLE));
    }

    final String customTitle = getIntent().getStringExtra(Intent.EXTRA_TITLE);
    setTitle(customTitle != null ? customTitle : getTitle());

    if (savedInstanceState == null) {
        mFragment = onCreatePane();
        mFragment.setArguments(intentToFragmentArguments(getIntent()));
        getSupportFragmentManager().beginTransaction()
                .add(R.id.animation_layout_content, mFragment, "single_pane")
                .commit();
    } else {
        mFragment = getSupportFragmentManager().findFragmentByTag("single_pane");
    }

    mLayout = (AnimationLayout) findViewById(R.id.animation_layout);
    mLayout.setListener(this);
}

layout.activity_singlepane_empty
<com.oldroid.apps.planit.util.AnimationLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/animation_layout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<include layout="@layout/menu_sidebar" />

<FrameLayout
    android:id="@id/animation_layout_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

```
 AnimationLayout
 @Override
public void onFinishInflate() {
    super.onFinishInflate();
    mContent = (FrameLayout) findViewById(R.id.animation_layout_content);
    mSidebar = findViewById(R.id.animation_layout_sidebar);

    if (mSidebar == null) {
        throw new NullPointerException("no view id = animation_sidebar");
    }

    if (mContent == null) {
        throw new NullPointerException("no view id = animation_content");
    }

    mOpenListener = new OpenListener(mSidebar, mContent);
    mCloseListener = new CloseListener(mSidebar, mContent);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:50:30.203

改变：

```
android:id="@id/animation_layout_content" 
```

至：

```
android:id="@+id/animation_layout_content" 
```

也就是说，除非您在其他地方（在资源`xml`文件或其他地方）添加了 ID。有关vs的详细信息，请参阅[此线程](https://stackoverflow.com/questions/5025910/difference-between-id-and-id-in-android)。`@id``@+id`

# ios - 绘制文本并添加到 UIImage iOS 5/6

> ID：12571852
> 
> 赞同：5
> 
> 时间：2012-09-24T19:46:48.893
> 
> 标签：ios, uiimage, core-graphics, draw

我有一个文本框，我希望将书面文本添加到 UIImage 中。

如何将 NSString 绘制到 UIImage？

我已经搜索过，发现了很多例子，但没有一个有效。Xcode 只是给了我很多错误。

简而言之，我想将 NSString 绘制到 UIimage。UIImage 应该与预定义的 UIImageView 大小相同，并放置在中心。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:26:50.573

我认为解决方案就在这里..我在我的一个应用程序中使用了这种方法，这里 lbltext 是我标签的对象。此方法使用给定的文本创建新图像并返回带有文本的新图像对象。

```
-(UIImage *) drawText:(NSString*) text inImage:(UIImage*)image atPoint:(CGPoint)point 
{
    UIFont *font = lblText.font;
    UIGraphicsBeginImageContext(iv.frame.size);
    [image drawInRect:CGRectMake(0,0,iv.frame.size.width,iv.frame.size.height)];
    CGRect rect = CGRectMake(point.x,point.y,lblText.frame.size.width, lblText.frame.size.height);
    [lblText.textColor set];
    [text drawInRect:CGRectIntegral(rect) withFont:font]; 
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

在您的以下评论中，您已经通过了 iv.center 作为一个点.. 像这样手动尝试

```
CGPoint point;
point.x=30; // dynamicaly just for example lblText.frame.origin.x;
point.y=40; //lblText.frame.origin.y; 
```

你必须像这样调用上面的方法......

```
UIImage *img = [self drawText:@"Test String" inImage:originalImage atPoint:point]; 
```

在这里，img 是 UIImage 的另一个实例，用于存储带有文本的新图像......调用此方法后，使用 img 成像器供您进一步使用..

例如...

```
[newimageviewObj setImage:img]; 
```

我希望这能帮到您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:40:25.060

UIImage 不是 UIView 的子视图，所以你不能给它添加子视图。NSString 也不是 UIView 的子视图。如果你想在屏幕上显示东西，它们应该继承自 UIView。

所以试试这个：

创建一个 UIImageView - 将其图像属性设置为您的 UIImage 实例。

创建一个 UILabel - 将其文本属性设置为您的 NSString。

将 UILabel 添加为 UIImageView 的子视图。

最后将您的 UIImageView 添加到您当前的视图控制器视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T05:40:01.290

Emm，这里有一些想法。我认为一种简单的方法是这样的：

1.  把aUIImageView放在aView上；
2.  在aView上添加aUITextView；
3.  从 aView 获取屏幕截图；

这可能工作正常。

此外，这可能会带来屏幕截图可能不清楚的问题。然后，在 step1 和 step2 之后，我们可以通过 UIGraphics 获得新的图像。（在这里，我们已经知道文本应该在图像上的位置，这应该没问题。）

PS：有些图像可能没有像 CGImage 这样的属性，为此需要 CGImage。所以，改造它。

# internet-explorer-8 - CSS3 PIE 在 IE8 中无法正常工作

> ID：12571853
> 
> 赞同：3
> 
> 时间：2012-09-24T19:46:49.787
> 
> 标签：internet-explorer-8, css3pie, css

我正在使用 CSS3 PIE 在 IE 中呈现边框图像和边框宽度。在 IE9 中一切正常，但在 IE8 中却不行。

奇怪的是，在 IE8 中，边框图像/宽度适用于一个 DIV（页面右上角的邮件列表），但不适用于其他 DIV（主要内容和侧边栏，没有显示边框图像或背景图像）。

[您可以在此页面](http://soteriabrighton.co.uk)上看到我的意思。

我正在使用的 CSS 示例（在本例中为内容 DIV）如下：

```
div#content .padder {
    border-width:7px;
    -moz-border-image:url('/wp-content/themes/bp-soteria/images/background_content.png') 7 repeat;
    -webkit-border-image:url('/wp-content/themes/bp-soteria/images/background_content.png') 7 repeat;
    border-image:url('/wp-content/themes/bp-soteria/images/background_content.png') 7 repeat;
    -o-border-image:url('/wp-content/themes/bp-soteria/images/background_content.png') 7 repeat;
    background-image:url('/wp-content/themes/bp-soteria/images/background-main.png');
    background-repeat: repeat;
    background-clip: padding-box;
    behavior: url(/pie/PIE.htc);
} 
```

PIE.htc 的路径是正确的。谁能建议这里的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:41:25.057

The PIE Specs say:

> ```
> make the target element position:relative, or
> make the ancestor element position:relative and give it a z-index. 
> ```

[Known Issues](http://css3pie.com/documentation/known-issues/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:55:45.833

尝试使用相对于站点根目录的路径。这是唯一对我有用的东西。

```
behavior: url(/your/path/to/PIE.htc); 
```

以下对我不起作用

```
behavior: url(PIE.htc);
behavior: url(../../some/path/to/PIE.htc); 
```

# sql - 如何将两列合并为一列

> ID：12571857
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:47:06.747
> 
> 标签：sql, sql-server-2008, join

我有两个表，tb1(account, status) 和 tbl2(account status_ex)。例如

```
account    status
0001       A
0002       CD
0003       AB

account    status_ex
0001       78
0002       NULL
0003       9 
```

我想写一个查询来组合两个状态列，结果表应该是这样的

```
account    status
0001       A78
0002       CD
0003       AB9 
```

我尝试了以下查询

```
select tb1.account, 
  stuff(tbl1.status, len(tbl.status)+1, len(tbl.status), tb2.status_ex) as status
from tb1 left join tb2
on tbl.account=tb2.accont 
```

但是结果不正确，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:49:29.297

```
SELECT 
  tb1.account, 
  status = COALESCE(tb1.status, '') + COALESCE(tb2.status, '')
FROM tb1 INNER JOIN tb2 -- is LEFT JOIN right? Not sure.
ON tb1.account = tb2.account; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:51:13.370

您可以使用`IsNull()`并仅连接这些值（请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/91865/4)）：

```
select t1.account,
  isnull(t1.status, '') + isnull(t2.status_ex, '') status
from tb1 t1
inner join tb2 t2
  on t1.account = t2.account 
```

您没有发布数据类型的内容，`status_ex`因此如果该`status_ex`字段是不同的数据类型，那么您将需要`cast()`它：

```
select t1.account,
  isnull(t1.status, '') 
    + isnull(cast(t2.status_ex as varchar(10)), '') status
from tb1 t1
inner join tb2 t2
  on t1.account = t2.account 
```

# facebook-graph-api - 是否有必要使用最近更改的 Facebook 喜欢按钮来创建页面？

> ID：12571862
> 
> 赞同：0
> 
> 时间：2012-09-24T19:47:46.443
> 
> 标签：facebook-graph-api, facebook-like, facebook-opengraph

我正在阅读计划于 2012 年 11 月[进行的 Facebook Like 按钮的更改](https://developers.facebook.com/docs/reference/plugins/like/migration/)，我有点困惑（希望有人能给出答案）。

我知道 REST 端点正在被删除以支持常规页面，但这就是我感到困惑的地方。

以前，如果我执行以下操作...

*   创建一个页面
*   将正确的 OpenGraph 元标记添加到页面
*   '喜欢'页面

...然后将*自动*创建一个 OpenGraph 对象（并且可以通过访问[http://graph.facebook.com/?id=my_url](http://graph.facebook.com/?id=my_url)进行验证）。如果我发布到该 OpenGraph 对象，人们会收到更新。

但是，随着更改，如果我正确理解它们，则不再创建 OpenGraph 对象？还是已创建，但我仍需要创建 Facebook 页面来管理和发送消息？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:54:03.463

# c++ - 我很难打印换行符

> ID：12571867
> 
> 赞同：0
> 
> 时间：2012-09-24T19:47:57.743
> 
> 标签：c++

我是解决问题的新手。我正在解决 UVA 中的一个名为 Expression 的问题。我想我已经解决了这个问题，因为我的代码为每个可能的测试用例提供了正确的输出。但我仍然得到 WA。似乎在某处我打印了一个我没有正确执行的换行符。问题是“输出文件将每个后缀表达式都放在一行上。在不同的表达式之间打印一个空白行。” 有人可以向我解释清楚一点。我在群里问过这个问题，但我没有得到答案。之前的讨论也无济于事。提前致谢。

```
#include<iostream>
#include<map>
#include<stack>
#include<vector>
#include<cstdio>

using namespace std;

void push_into_stack(char c, vector< char > &ans, stack< char > &st);
void work_with_stack(vector< char > &ans, stack< char > &st);

int main(void)
{
    freopen("input.txt", "r", stdin);
int t;
char dummy;
cin >> t;

for(int i=1; i<=t; i++)
{
    vector< char > exp, ans;
    stack< char > st;
    char c;

    while(cin >> c)
        exp.push_back(c);

    for(int i=0; i<exp.size(); i++)
        if(exp[i]=='+' || exp[i]=='-' || exp[i]=='*' || exp[i]=='/') push_into_stack(exp[i], ans, st);
        else if(exp[i]=='(') st.push(exp[i]);
        else if(exp[i]==')') work_with_stack(ans, st);
        else ans.push_back(exp[i]);

    while(!st.empty())
    {
        ans.push_back(st.top());
        st.pop();
    }

    for(int i=0; i<ans.size(); i++)
        cout << ans[i];
    cout << endl;
}
return 0; 
```

}

```
void push_into_stack(char c, vector< char > &ans, stack< char > &st)
{
    map< char, int > mp;
    mp['/']=2;
    mp['*']=2;
    mp['+']=1;
    mp['-']=1;

while(true)
{
    if(!st.empty() && mp[c]<=mp[st.top()])
    {
        ans.push_back(st.top());
        st.pop();
    }
    else
    {
        st.push(c);
        break;
    }
}
return; 
```

}

```
void work_with_stack(vector< char > &ans, stack< char > &st)
{
    while(true)
    {
        if(st.top()=='(') break;
        ans.push_back(st.top());
        st.pop();
    }
    st.pop();
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:56:40.933

嗯...我猜答案的质量只能反映问题的质量...但是如何：

```
int main(void) {
   char postfixone[] = "4 5 7 2 + - *            -16";
   char postfixtwo[] = "3 4 + 2  * 7 /             2";
   char postfixthree[] = "5 7 + 6 2 -  *            48";
   printf("%s\n\n",postfixone);
   printf("%s\n\n",postfixtwo);
   printf("%s\n\n",postfixthree);
}

mike@linux-4puc:~> ./a.out 
4 5 7 2 + - *            -16

3 4 + 2  * 7 /             2

5 7 + 6 2 -  *            48 
```

每个都在一条线上，中间有一条新线......

**编辑：** 我猜你正在使用 C++ 并在这里打印这些行：

```
for(int i=0; i<ans.size(); i++)
     cout << ans[i];
 cout << endl; 
```

您正在使用 endl 每个后缀打印一个新行，请尝试：

```
 cout << endl << endl; 
```

而是在行之间插入额外的空白。

# android - android 下载数百张图像并将它们存储起来，以便在重新访问或没有互联网时使用

> ID：12571869
> 
> 赞同：0
> 
> 时间：2012-09-24T19:48:14.557
> 
> 标签：android, imagedownload

我有一个列表视图，单击时每个列表视图项目都会打开一个要下载的画廊（包含 30 多个图像）（使用 url）。我不想在下次访问时重新下载图像，也希望图像存在当我在离线模式下单击列表时。

我浏览了 SO 中的几个链接，对遵循哪种方法有点困惑：

*   1> 使用 bytearray 并将图像存储在 sqlite db 中。
*   2> 使用 context -> getExternalCacheDir() 将其存储在外部存储器上（这不适用于没有外部存储器的设备。）
*   3> 按照以下链接中的建议使用 SoftReferences

[http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

请帮助指导我处理大约 1000 多个图像的最佳方法，这些图像也可以在离线模式下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:21:59.300

1000 张图片.....我当然希望它们是缩略图，否则您将最终使用大量存储空间。

你真的应该只缓存你需要的和重复使用的图像。选项 1 和 2 都取决于手机，即使有存储空间，如果没有空间，那么您将不会缓存太多到磁盘。3 不会永久存储图像，如果应用程序被置于后台并被杀死，缓存也将如此。

如果不了解应用程序的内部工作原理和要求，很难说这里的正确决定是什么。

只是按照你想要的，然后我会说有几个解决方案

如果有外部存储写入，如果不使用内部存储，如果内部空间不足，则使用软引用。

我一直发现开箱即用的缓存解决方案永远不会完全适合我的应用程序并最终编写我自己的缓存。对不起，我无法给出更好的答案。

PS。如果您对 3 不小心，您可能会下载太多并遇到 OutOfMemoryException。

聚苯乙烯。3 也可以抛出一个 RejectedExecutionException，这是由一次启动的异步任务过多引起的（例如，快速滚动通过通过异步任务获取图像的列表视图）

# mgwt - 有没有办法更改选中/未选中 MCheckBox 状态的文本？

> ID：12571870
> 
> 赞同：1
> 
> 时间：2012-09-24T19:48:21.133
> 
> 标签：mgwt

我将如何将默认[MCheckBox](http://docs.mgwt.googlecode.com/git/javadoc/latest/com/googlecode/mgwt/ui/client/widget/MCheckBox.html)状态文本（当前为 I/0）更改为，例如，YES/NO 或 ON/OFF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:47:53.407

Daniel Kurka 先生是 MGWT 中所有小部件类的作者。如果外观不符合我们的要求，我们可以编辑这些类并根据我们的要求重写它们。因为它们是开源的。我在 CellList、FormListEntry 和 MCheckBox 等许多类上都这样做了。开/关代码而不是 I/O

```
public MyOwnCheckBox(CheckBoxCss css) {
    this.css = css;
    css.ensureInjected();
    setElement(DOM.createDiv());
    addStyleName(css.checkBox());

    onDiv = DOM.createDiv();
    onDiv.setClassName(css.on());
    onDiv.setInnerText("ON");
    getElement().appendChild(onDiv);

    middleDiv = DOM.createDiv();
    middleDiv.setClassName(css.middle());
    Element middleContent = DOM.createDiv();
    middleContent.setClassName(css.content());
    middleDiv.appendChild(middleContent);
    getElement().appendChild(middleDiv);

    offDiv = DOM.createDiv();
    offDiv.setClassName(css.off());
    offDiv.setInnerText("OFF");
    getElement().appendChild(offDiv);

    addTouchHandler(new TouchHandlerImplementation());

    setValue(true, false);

} 
```

编写一个像 MyOwnCheckBox 这样的新类。只需复制 MCheckBox 中的代码并粘贴到您的类 MyOwnCheckBox 中，在代码中找到 MCheckBox 并将其替换为 MyOwnCheckBox（更改构造函数的名称）。进行以下更改。

```
onDiv.setInnerText("ON");

offDiv.setInnerText("OFF"); 
```

最后创建对象到 MyOwnCheckBox 而不是 MCheckBox，它会显示 MCheckBox 的 ON/OFF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:13:24.860

现在没有办法做到这一点，但是除了我们可能需要更新 css 以便大文本不会破坏布局之外，没有真正的原因复选框不实现 HasText。

如果您认为 mgwt 应该实现此功能并为此问题投票：[http ://code.google.com/p/mgwt/issues/detail?id=171](http://code.google.com/p/mgwt/issues/detail?id=171)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T01:39:16.530

好吧，在不创建模仿 MCheckBox 的新类的情况下，完成同样事情的一种简单方法是执行以下代码：

```
CheckBoxCss css = MGWTStyle.getTheme().getMGWTClientBundle().getCheckBoxCss();
String offClass = css.off();
String onClass = css.on();
NodeList<Node> checkBoxElems;

mIsSingleSkuBox = new MCheckBox(css);

checkBoxElems = mIsSingleSkuBox.getElement().getChildNodes();
for( int i = 0; i < checkBoxElems.getLength(); i++ )
{
    Element openElem = (Element) checkBoxElems.getItem(i);
    String className = openElem.getClassName();

    if( className.equals( offClass))
    {
        openElem.setInnerText("No" );
    }
    else if( className.equals( onClass))
    {
        openElem.setInnerText("Yes" );
    }
} 
```

它可能会出现超过 3 个字符的空间问题，但对我来说，它与“是”和“否”一致。

# android - 更新：as3 air for Android 获取设备电话号码

> ID：12571874
> 
> 赞同：1
> 
> 时间：2012-09-24T19:48:35.710
> 
> 标签：android, actionscript-3, flash, sms

我最近下载了一个 Android 应用程序，它允许程序通过我的号码发送文本。我没有分享我的号码。它只是发送它，因为它启用了“发送 SMS 消息”。

我不知道他们是否使用 as3 在空中为 android 编码，但我知道有可能获得 android 设备电话。

关于如何做到这一点的任何想法？一旦我接到用户的电话，我就知道如何发送短信。我可以通过将用户电话发送到 php 脚本来做到这一点。但我不知道如何获得他们的电话号码。

谢谢

2012 年 9 月 24 日更新

由于下面的帖子，我找到了这段代码。但是，我不知道如何调用 TELEPHONY_SERVICE 类。

我想我需要下面这行代码，但我不知道如何使用它。Context.getSystemService(Context.TELEPHONY_SERVICE)

这是我获得信息的链接：http: [//developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

**2012 年 10 月 1 日更新**

在某人的帮助下，我发现了更多代码。我认为这可以工作，但我无法让 adobe cs6 flash 专业版看到扩展。这是我的错误的屏幕截图：[https ://odesk-prod-att.s3.amazonaws.com/MC:201245014:1?AWSAccessKeyId=1XVAX3FNQZAFC9GJCFR2&Expires=2147483647&Signature=SV3aFpOc5UWPHo9egNl%2BVPGVeSo%3D](https://odesk-prod-att.s3.amazonaws.com/MC:201245014:1?AWSAccessKeyId=1XVAX3FNQZAFC9GJCFR2&Expires=2147483647&Signature=SV3aFpOc5UWPHo9egNl%2BVPGVeSo%3D)

这里还有一个看起来很有希望工作的扩展的链接：http: [//candymandesign.blogspot.co.uk/2012/02/adobe-air-native-extension-read-phone.html](http://candymandesign.blogspot.co.uk/2012/02/adobe-air-native-extension-read-phone.html)

这是我使用 ANE 找到的视频教程。但是有了所有这些，它仍然不起作用。[http://www.youtube.com/watch?v=Axg6E001a7I](http://www.youtube.com/watch?v=Axg6E001a7I)

**任何人都可以让这些工作吗？谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:51:15.287

您将需要编写一个 AIR 本机扩展来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:17:26.287

要添加到现有答案，我相信您需要在 Java 端编写的部分需要这个来提取电话号码：

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

此信息来自另一个 SO 帖子，严格查看拉号，请参阅评论中有关使用此方法的警告和其他人遇到的一些问题的详细信息 以[编程方式获取 Android 手机的电话号码](https://stackoverflow.com/questions/2480288/get-phone-number-in-android-sdk)

# qt - Qt treewidget排序顶级项目

> ID：12571875
> 
> 赞同：1
> 
> 时间：2012-09-24T19:48:36.317
> 
> 标签：qt, sorting, parent-child, qtreewidget

我很难重载`QTreeWidgetItem`'s`<`运算符。

我有一个列表`QTreeWidgetItems`，一些顶级项目和一些孩子。当用户激活“创建日期”列对树进行排序时，排序发生在子级别。

换句话说，想象一棵这样的树：

```
Item A - latest modification 9/24/12
  3rd Modified -             9/21/12
  2nd Modified -             9/15/12
  1st Modified -             9/10/12

Item B - latest modification 9/23/12
  2nd Modified -             9/23/12
  1st Modified -             9/22/12 
```

当日期列被激活以升序排序时，我希望返回结果是：项目 A，然后是项目 B......但是，排序发生在项目的第一个修改日期。我返回的是项目 B，然后是项目 A。即使顶级项目都没有展开或处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-24T13:24:39.100

如果您使用 QWidgetTree 来显示您的 QTreeWidgetItems 列表：您可以添加 2 个第一级项目（项目 A 和 B），对 QwidgetTree 进行排序，然后添加低级项目。所以你的树将按最新修改排序

# visual-studio-2010 - 寻找 {assembly-name}.dll.config 的 nUnit 测试

> ID：12571877
> 
> 赞同：4
> 
> 时间：2012-09-24T19:48:50.300
> 
> 标签：visual-studio-2010, powershell, web-config, nunit, app-config

我有一个 PowerShell 脚本，它可以通过外壳`nunit-console-x86.exe`到 MSBuild 来编译 VS .sln

```
Exec { invoke-expression "$BUILD_DIR\Tools\NUnit.2.5.10.11092\nunit-console-x86.exe  $full_test_assembly_name /xml:test-results/$test_results_file_name" } 
```

其中一些测试`System.Configuration.ConfigurationManager`用于加载配置设置。 `nunit-console-x86.exe`在 中搜索这些配置设置`{$full_test_assembly_name}.dll.config`，但该文件不存在，因为我的脚本没有创建它（原因如下所述）。

每个测试项目 .csproj 都包含一个本地 App.config 文件。在 Visual Studio 中运行测试项目的测试时，nUnit 会在本地 App.config 中搜索配置设置。这种行为正如我所料。

我还有一个应用程序 .sln，其中站点/服务 .csproj 作为其启动项目，以及对各种测试项目的引用。当我从 Visual Studio 运行应用程序 .sln 的整个测试套件时，在为任何测试项目运行测试时，nUnit 会在测试项目的本地 App.config 中搜索配置设置。

这种行为与我预期的不同——我原以为 nUnit 会搜索位于启动站点/服务 .csproj 中的 web.config。

作为一项实验，我从其中一个测试项目中删除了 App.config。现在，当我在 Visual Studio 中运行它的测试时，nUnit 会抛出它无法找到的错误`{test-project-assembly-name}.dll.config`。所以显然 uUnit 默认在`{test-project-assembly-name}.dll.config`.

我希望我的测试脚本调用 nUnit 来运行测试程序集测试，以便从 web.config 加载任何配置设置（我的构建脚本将其复制到构建目标目录中）。

我怎样才能做到这一点？我可以指示`nunit-console-x86.exe`从我作为参数提供的配置文件路径加载配置设置吗？我可以以不同的方式构建我的 .sln 和/或 .csproj 以使 uUnit 将 Web.config 用于配置设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-02T18:03:06.420

解决方案是使用控制台开关`/domain=multiple`。当您将默认域使用设置更改为每个程序集使用单独的 AppDomain 时，它会导致 NUnit 加载项目 app.config。此选项仅在 NUnit 2.5 或更高版本中可用。

```
nunit-console your.project.csproj /domain=multiple 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-17T16:51:28.393

不确定这是否仍然适用于 OP 的问题，但是当您构建测试项目时，会复制多个 .dll.config 文件。如果您需要为测试进行自定义配置，请将 .config 复制到测试项目中。然后在`Properties`窗格中设置`Copy to Output Directory`为`Copy Always`，这将覆盖项目配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:00:12.033

快速回答是 NUnit 不管理配置文件。它将配置文件的处理留给框架：

[http://nunit.net/blogs/?p=9](http://nunit.net/blogs/?p=9)

如果您希望 NUnit 使用特定的配置文件，您可以创建一个 NUnit 项目，并将您希望使用的配置文件复制到 [NUnitProjectName].config 中。此配置文件需要与您的 NUnit 项目位于同一目录中。

# python - 在不实例化的情况下合并 __init__ 内的两个列表。Python

> ID：12571878
> 
> 赞同：1
> 
> 时间：2012-09-24T19:48:50.577
> 
> 标签：python, class, variables

```
class Foo(object):
    def __init__(self):
        self.list_one = [1, 2, 3]

class Bar(object):
    def init(self):
        self.list_two = Foo.list_one + [4, 5, 6] # I know this won't work unless I 
                                                 # make list_one a class level variable 
```

所以，问题是 - 有没有办法在不实例化`Foo`或制作`list_one`类级别变量的情况下合并这些列表？

也许有一种使用继承的方法，`super()`但我不明白如何使用它访问方法内部的变量。我也将非常感谢回答如何在不使用继承的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:57:35.580

没有极端的字节码骇客，不——不可能从一个函数中提取一个值并在另一个函数中使用它。

此外，由于`Bar`不是 的子类，`Foo`并且 Python 对使用显式调用实例方法施加了相当任意的类型检查限制`self`，因此您*不能*做一些明智的事情，例如：

```
class Bar(object):
    def __init__(self):
        Bar.__init__(self)
        self.list_one += [4, 5, 6] 
```

`Foo`也许您应该创建一个返回列表的类级吸气剂？

```
class Foo(object):
    def __init__(self):
        self.list_one = self.get_list_one()

    @classmethod
    def get_list_one(cls):
        return [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:58:25.313

不可能做你描述的确切事情。`self`是对 的实例的引用`Foo`，并且在类被实例化之前不存在；并且`list_one`是 的一个属性，在它已经被创建之后`self`分配给它。`self`所以`list_one`在类被实例化之前根本不存在。

但是，要使用继承来完成您的要求相当简单：

```
class Foo(object):
    def __init__(self):
        self.list_one = [1, 2, 3]

class Bar(Foo):
    def init(self):
        super(Bar, self).__init__()
        self.list_two = self.list_one + [4, 5, 6]
        # if you want to discard list_one, you can, but that seems wrong somehow
        # del self.list_one 
```

更一般地说，除了在方法或函数的执行期间，或者在引用由函数创建的所谓*闭包*时，引用“方法中的变量”并没有真正的意义。每次调用函数时，都会创建一个新的命名空间，并在该命名空间内重新创建局部变量名称。

但是，一旦调用了函数，就可以引用它们。例如：

```
>>> def foo(x):
...     a = x
...     def bar():
...         print a
...     return bar
... 
>>> bar1 = foo(5)
>>> bar2 = foo(6)
>>> bar1()
5
>>> bar2()
6 
```

请注意，两个版本的`bar`引用不同的值`a`，每个值都是在调用时创建`foo(5)`的。`foo(6)`

# python - 无法将字典保存到 mat 文件

> ID：12571879
> 
> 赞同：2
> 
> 时间：2012-09-24T19:48:59.787
> 
> 标签：python, matlab, numpy, io, scipy

我正在尝试将其值是不同长度的 numpy 数组的字典保存到 mat 文件中，以便协作者可以将字典作为单元格数组加载到 MATLAB 中。

输入示例：

```
 data={traces: {0: array([], dtype=float64), 1: array([], dtype=float64), 
 2: array([], dtype=float64), 3: array([], dtype=float64), 
 4: array([], dtype=float64), 5: array([], dtype=float64), 
 6: array([], dtype=float64), 7: array([], dtype=float64), 
 8: array([], dtype=float64), 9: array([], dtype=float64)}}

savemat('test.mat', mdict=data) 
```

但是，我收到错误：

```
 TypeError: Could not convert {0: array([], dtype=float64), 1: array([], dtype=float64), 
 2:array([], dtype=float64), 3: array([], dtype=float64), 4: array([], dtype=float64), 
 5:  array([], dtype=float64), 6: array([], dtype=float64), 7: array([], dtype=float64), 
 8: array([], dtype=float64), 9: array([], dtype=float64)} (type <type 'dict'>) to array 
```

如何将此字典保存到 mat 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:19:00.570

您正在定义带有键“traces”和字典值的字典。删除'traces'，用字符串而不是int（0）或数字字符串（'0'）替换键值并正常保存在Python中。

```
from scipy.io import savemat
from numpy import *

data={'t0': array([], dtype=float64), 't1': array([], dtype=float64), 
 't2': array([], dtype=float64), 't3': array([], dtype=float64), 
 't4': array([], dtype=float64), 't5': array([], dtype=float64), 
 't6': array([], dtype=float64), 't7': array([], dtype=float64), 
 't8': array([], dtype=float64), 't9': array([], dtype=float64)}

# print data
savemat('test.mat', data, oned_as='row') 
```

您可以通过以下方式在 MATLAB 中加载

```
traces = load('test.mat'); 
```

# scala - 如何确定 `this` 是类的实例还是对象？

> ID：12571881
> 
> 赞同：1
> 
> 时间：2012-09-24T19:49:10.577
> 
> 标签：scala, singleton, instance

假设我有一个抽象类的两个后代：

```
object Child1 extends MyAbstrClass {
    ...
}
class Child2 extends MyAbstrClass {
} 
```

现在我想确定（最好在 的构造函数中`MyAbstrClass`）正在创建的实例是对象还是由以下内容创建的东西`new`：

```
abstract class MyAbstrClass {
    {
        if (/* is this an object? */) {
            // do something
        } else {
            // no, a class instance, do something else
        }
    }
} 
```

在 Scala 中有这样的可能吗？我的想法是将所有来自一个类的对象收集到一个集合中，但只有对象，而不是由`new`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:36:22.367

这是一个相当俗气的想法：

```
trait X {
  println("A singleton? " + getClass.getName.endsWith("$"))
}

object Y extends X
Y // objects are lazily initialised! this enforces it

class Z extends X
new Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:37:37.280

就像是：

```
package objonly

/** There's nothing like a downvote to make you not want to help out on SO. */
abstract class AbsFoo {
  println(s"I'm a ${getClass}")
  if (isObj) {
    println("Object")
  } else {
    println("Mere Instance")
  }
  def isObj: Boolean = isObjReflectively

  def isObjDirty = getClass.getName.endsWith("$")

  import scala.reflect.runtime.{ currentMirror => cm }
  def isObjReflectively = cm.reflect(this).symbol.isModuleClass
}

object Foo1 extends AbsFoo

class Foo2 extends AbsFoo

object Test extends App {
  val foob = new Foo2
  val fooz = new AbsFoo { }
  val f = Foo1
} 
```

# windows - 如何格式化此路径以在注册表项中工作？

> ID：12571888
> 
> 赞同：0
> 
> 时间：2012-09-24T19:49:31.263
> 
> 标签：windows, registry, special-characters, registrykey

```
C:\Program Files (x86)\DotR\DotR.exe 
```

我知道我需要像这样逃避反斜杠，`C:\\Program Files (x86)\\DotR\\DotR.exe`但它仍然不起作用。我是否需要将空格和括号作为特殊字符处理，如果需要，如何处理？

详细编辑：我正在从上下文菜单中运行一个小型控制台应用程序。当我将它保存到 C:\DotR.exe 并添加到`HKEY_CLASSES_ROOT\Folder\shell\DotR\`该值`C:\\DotR.exe %1`时，它工作正常，但是当我尝试制作它时，`C:\\Program Files(x86)\\DotR\DotR.exe %1`我收到一条错误消息，提示找不到应用程序。我想将它保存在程序文件中，而不是 C 根目录。

# linux - 在 Qt 中保存/打开对话框本地化

> ID：12571895
> 
> 赞同：3
> 
> 时间：2012-09-24T19:50:06.180
> 
> 标签：linux, localization, qt4

我尝试为标准保存或打开对话框设置本地化，但除窗口标题外的所有内容仍为英文。

我使用相同版本的 Qt 4.7.4 和 KDE。

以下示例应用程序：

```
#include <QApplication>
#include <QFileDialog>
#include <QTranslator>
#include <QLibraryInfo>
#include <QDebug>

int main(int argc, char **argv)
{
    QApplication app(argc,argv);

    QTranslator qTranslator;
    QString transPath=QLibraryInfo::location(QLibraryInfo::TranslationsPath);
    qTranslator.load("qt_ru",transPath);
    app.installTranslator(&qTranslator);

    qDebug() << transPath;

    QFileDialog fileDialog(0, 0/*default caption*/,
        QDir::currentPath(), "All files (*.*)");
    fileDialog.exec();

    return 0;
} 
```

打印`"/usr/share/qt4/translations"`（翻译路径）和警告：

```
KGlobal::locale::Warning your global KLocale is being recreated with a valid main
component instead of a fake component, this usually means you tried to call i18n related
functions before your main component was created. You should not do that since it most
likely will not work 
```

我还尝试了一些其他更受支持的语言，例如德语（qt_de）、法语（qt_fr）和波兰语，但结果是一样的：只有字幕受到影响。

但是，如果我在任何安装了 KDE 的应用程序中打开“保存”对话框，对话框中的所有文本都会以俄语显示，并且不会向控制台打印任何警告。我在 Kwrite、Firefox（它使用默认的 KDE 对话框）、Konsole 和 Kaffeine 中尝试了对话框。

从翻译的角度来看，上面的代码是否正确？也许还有另一种方法可以为我的应用设置本地化？为什么要翻译其他应用程序中的对话框？除了目录中提供的文件，他们是否使用其他翻译文件`/usr/share/qt4/translations`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:42:33.503

Priviet 你还有这个问题吗？此刻，我的解决方案是添加：

```
QFileDialog fileDialog(0, 0/*default caption*/,
    QDir::currentPath(), "All files (*.*)", QFileDialog::DontUseNativeDialog); 
```

调用文件对话框。

然而，通过这种方式，对话框是 Qt-native 并且不尊重 KDE。

但我正在寻找解决方案 How to get KDE dialog in system language intead。

# python - 使用python查找搜索字符串位于pdf文档中的哪个页面

> ID：12571905
> 
> 赞同：7
> 
> 时间：2012-09-24T19:50:36.787
> 
> 标签：python, pdf, pypdf

我可以使用哪些 python 包来找出特定“搜索字符串”位于哪个页面上？

我查看了几个 python pdf 包，但不知道应该使用哪一个。 [PyPDF](http://pybrary.net/pyPdf/)似乎没有这个功能，而[PDFMiner](http://www.unixuser.org/~euske/python/pdfminer/index.html)似乎对于这样简单的任务来说是一种过度杀伤力。有什么建议吗？

更准确地说：我有几个 PDF 文档，我想提取字符串 “Begin” 和字符串 “End” 之间的页面。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T21:35:40.010

我终于发现 pyPDF 可以提供帮助。我发布它以防它可以帮助其他人。

**(1) 定位字符串的函数**

```
def fnPDF_FindText(xFile, xString):
    # xfile : the PDF file in which to look
    # xString : the string to look for
    import pyPdf, re
    PageFound = -1
    pdfDoc = pyPdf.PdfFileReader(file(xFile, "rb"))
    for i in range(0, pdfDoc.getNumPages()):
        content = ""
        content += pdfDoc.getPage(i).extractText() + "\n"
        content1 = content.encode('ascii', 'ignore').lower()
        ResSearch = re.search(xString, content1)
        if ResSearch is not None:
           PageFound = i
           break
     return PageFound 
```

**(2) 提取感兴趣页面的功能**

```
 def fnPDF_ExtractPages(xFileNameOriginal, xFileNameOutput, xPageStart, xPageEnd):
      from pyPdf import PdfFileReader, PdfFileWriter
      output = PdfFileWriter()
      pdfOne = PdfFileReader(file(xFileNameOriginal, "rb"))
      for i in range(xPageStart, xPageEnd):
          output.addPage(pdfOne.getPage(i))
          outputStream = file(xFileNameOutput, "wb")
          output.write(outputStream)
          outputStream.close() 
```

我希望这对其他人有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-03T04:10:29.760

除了@user1043144 提到的，

与 python 3.x 一起使用

使用 PyPDF2

```
import PyPDF2 
```

使用`open`代替`file`

```
PdfFileReader(open(xFile, 'rb')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-28T11:17:59.703

我能够使用下面的代码成功获得输出。

**代码：**

```
import PyPDF2
import re

# Open the pdf file
object = PyPDF2.PdfFileReader(r"C:\TEST.pdf")

# Get number of pages
NumPages = object.getNumPages()

# Enter code here
String = "Enter_the_text_to_Search_here"

# Extract text and do the search
for i in range(0, NumPages):
    PageObj = object.getPage(i)
    Text = PageObj.extractText()
    if re.search(String,Text):
         print("Pattern Found on Page: " + str(i)) 
```

**样本输出：**

```
Pattern Found on Page: 7 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-24T09:08:30.007

# 使用python查找搜索字符串位于pdf文档中的哪个页面

**PyPDF2**

```
 # import packages
    import PyPDF2
    import re

    # open the pdf file
    object = PyPDF2.PdfFileReader(r"source_file_path")

    # get number of pages
    NumPages = object.getNumPages()

    # define keyterms
    String = "P4F-21B"

    # extract text and do the search
    for i in range(0, NumPages):
        PageObj = object.getPage(i)
        Text = PageObj.extractText()
        ResSearch = re.search(String, Text)
        if ResSearch != None:
            print(ResSearch)
            print("Page Number" + str(i+1)) 
```

**输出：**

```
<re.Match object; span=(57, 64), match='P4F-21B'>
Page Number1 
```

**PyMuPDF**

```
import fitz
import re

# load document
doc = fitz.open(r"C:\Users\shraddha.shetty\Desktop\OCR-pages-deleted.pdf")

# define keyterms
String = "P4F-21B"

# get text, search for string and print count on page.
for page in doc:
    text = ''
    text += page.get_text()
    if len(re.findall(String, text)) > 0:
        print(f'count on page {page.number + 1} is: {len(re.findall(String, text))}') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-13T15:59:13.807

**用 PYDF2 更新答案**

```
import re 
import PyPDF2

def pdf_find_text(xfile_pdf, xsearch_string, ignore_case = False):
    '''
    find page(s) on which a given text is located in a pdf
    input: pdf file and the string to search 
    (string to search can be in a regex like 'references\n')

    N.B: 
    results need to be checked 
    in case of pdf whose page numbers are not zero indexed , 
    the results seems off (by one page) 
    '''

    xlst_res = []

    xreader = PyPDF2.PdfFileReader(xfile_pdf)

    for xpage_nr, xpage in enumerate(xreader.pages):
        xpage_text = xpage.extractText()
        xhits = None
        if ignore_case == False:
            xhits = re.search(xsearch_string, xpage_text.lower())
        else:
            xhits = re.search(xsearch_string, xpage_text.lower(), re.IGNORECASE)

        if xhits:
            xlst_res.append(xpage_nr)
    return {'num_pages': xreader.numPages, 'page_hits': xlst_res}

def pdf_extract_pages(xpdf_original, xpdf_new , xpage_start, xpage_end):
    '''
    given a pdf extract a page range and save it in a new pdf file 

    '''
    with open(xpdf_original, 'rb') as xfile_1, open(xpdf_new , 'wb') as xfile_2:
        xreader = PyPDF2.PdfFileReader(xfile_1)
        xwriter  = PyPDF2.PdfFileWriter()
        for xpage_nr in range(xpage_start, xpage_end ):
            xwriter.addPage(xreader.getPage(xpage_nr))
        xwriter.write(xfile_2) 
```

# python - Python解压缩字节流？

> ID：12571913
> 
> 赞同：36
> 
> 时间：2012-09-24T19:51:02.247
> 
> 标签：python, compression

情况如下：

*   我从 Amazon S3 获取压缩的 xml 文档

    ```
     import boto
      from boto.s3.connection import S3Connection
      from boto.s3.key import Key
      conn = S3Connection('access Id', 'secret access key')
      b = conn.get_bucket('mydev.myorg')
      k = Key(b)
      k.key('documents/document.xml.gz') 
    ```

*   我在文件中将它们读为

    ```
     import gzip
      f = open('/tmp/p', 'w')
      k.get_file(f)
      f.close()
      r = gzip.open('/tmp/p', 'rb')
      file_content = r.read()
      r.close() 
    ```

**问题**

如何直接解压缩流并读取内容？

我不想创建临时文件，它们看起来不太好。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-24T20:00:08.017

是的，您可以使用该[`zlib`模块](http://docs.python.org/library/zlib.html)来解压缩字节流：

```
import zlib

def stream_gzip_decompress(stream):
    dec = zlib.decompressobj(32 + zlib.MAX_WBITS)  # offset 32 to skip the header
    for chunk in stream:
        rv = dec.decompress(chunk)
        if rv:
            yield rv 
```

32 的偏移量向`zlib`标头发出 gzip 标头是预期但被跳过的信号。

S3 密钥对象是一个迭代器，因此您可以执行以下操作：

```
for data in stream_gzip_decompress(k):
    # do something with the decompressed data 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T14:41:14.833

我必须做同样的事情，这就是我的做法：

```
import gzip
f = StringIO.StringIO()
k.get_file(f)
f.seek(0) #This is crucial
gzf = gzip.GzipFile(fileobj=f)
file_content = gzf.read() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-26T21:04:30.363

对于 Python3x 和 boto3-

所以我使用 BytesIO 将压缩文件读取到缓冲区对象中，然后我使用 zipfile 将解压缩流作为未压缩数据打开，并且能够逐行获取数据。

```
import io
import zipfile
import boto3
import sys

s3 = boto3.resource('s3', 'us-east-1')

def stream_zip_file():
    count = 0
    obj = s3.Object(
        bucket_name='MonkeyBusiness',
        key='/Daily/Business/Banana/{current-date}/banana.zip'
    )
    buffer = io.BytesIO(obj.get()["Body"].read())
    print (buffer)
    z = zipfile.ZipFile(buffer)
    foo2 = z.open(z.infolist()[0])
    print(sys.getsizeof(foo2))
    line_counter = 0
    for _ in foo2:
        line_counter += 1
    print (line_counter)
    z.close()

if __name__ == '__main__':
    stream_zip_file() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T21:01:34.877

您可以尝试 PIPE 并在不下载文件的情况下读取内容

```
 import subprocess
    c = subprocess.Popen(['-c','zcat -c <gzip file name>'], shell=True, stdout=subprocess.PIPE,         stderr=subprocess.PIPE)
    for row in c.stdout:
      print row 
```

此外 "/dev/fd/" + str(c.stdout.fileno()) 将为您提供可以传递给其他程序的 FIFO 文件名（命名管道）。

# c++ - 在 Windows 应用程序中使用 Rectangle 和 LineTo

> ID：12571914
> 
> 赞同：0
> 
> 时间：2012-09-24T19:51:01.373
> 
> 标签：c++, windows

我正在尝试使用一种简单的方法将 X 和 O 打印到下面的网格中，而无需使用多个 If-Else 语句。我正在为应用程序使用 575x620 的屏幕尺寸。

```
Rectangle(hdc, 5, 570, 550, 5);

Rectangle(hdc, 50, 50, 200, 200);
Rectangle(hdc, 200, 50, 350, 200);
Rectangle(hdc, 350, 50, 500, 200);

Rectangle(hdc, 50, 200, 200, 350);
Rectangle(hdc, 200, 200, 350, 350);
Rectangle(hdc, 350, 200, 500, 350);

Rectangle(hdc, 50, 350, 200, 500);
Rectangle(hdc, 200, 350, 350, 500);
Rectangle(hdc, 350, 350, 500, 500);

if( ttt.board[ 0 ][ 0 ] == 1 )
{
    MoveToEx(hdc, 50, 50, NULL);
    LineTo(hdc, 200, 200);
    MoveToEx(hdc, 200, 50, NULL);
    LineTo(hdc, 50, 200);
}
else
{
    Ellipse(hdc, 50, 50, 200, 200);
} 
```

上面的代码将第一个 X 和 O 打印到第一个块，我想对剩余的块做同样的事情，而不需要大量的 If-Else 语句。有人对我如何实现这个有想法或建议吗？数据成员是否正在检查是否我单击了该框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:56:05.097

我会写一个`draw_cross`函数，你将它应该绘制的正方形的一个角（或中心，如果你愿意的话）传递给它。同样，一个`draw_circle`. 然后穿过板子，并用它们在每个方格中画出适当的一个。

# .net - 锁定时无法保护配置

> ID：12571918
> 
> 赞同：0
> 
> 时间：2012-09-24T19:51:23.743
> 
> 标签：.net, encryption, configuration

[这是Cache password for SQL Server connection as a hash](https://stackoverflow.com/questions/12567519/cache-password-for-sql-server-connection-as-a-hash)的后续。

[http://www.codeproject.com/Articles/15392/Implementing-Protected-Configuration-With-Windows](http://www.codeproject.com/Articles/15392/Implementing-Protected-Configuration-With-Windows)描述了本地 Windows 应用程序使用受保护配置的方法。但是，根据我的应用程序设计运行的环境，安装程序是不可取的。

我尝试运行以下命令：

```
 object settings = ConfigurationManager.GetSection("userSettings/MyApp.Properties.Settings");
        SectionInformation info = ((ConfigurationSection)settings).SectionInformation;
        if (!info.IsProtected)
            info.ProtectSection("DPAPIProtection"); 
```

在我的 WPF 应用程序中的几个不同时间，但每次我这样做时，我都会从 VerifyIsEditable 中的 .NET 的 SectionInformation.cs 中得到这个异常：

```
if (IsLocked) {
    throw new InvalidOperationException(SR.GetString(SR.Config_cannot_edit_configurationsection_when_locked)); 
```

所以。有没有办法（a）`ProtectSection()`在加载和锁定配置之前运行，或者（b）在调用之后在应用程序结束`Settings.Default.Save()`时刷新配置，关闭并解锁它，然后调用`ProtectSection()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:48:27.367

修复了它（虽然我不确定为什么，确切地说）：

```
 Configuration conf = ConfigurationManager.OpenExeConfiguration
            (ConfigurationUserLevel.PerUserRoamingAndLocal);
        ClientSettingsSection settings = (ClientSettingsSection)
            conf.GetSection("userSettings/MyApp.Properties.Settings");
        SectionInformation info = settings.SectionInformation;

        if (!info.IsProtected)
        {
            info.ProtectSection("DPAPIProtection");
            info.ForceSave = true;
            conf.Save();
        } 
```

# ios - 多个 ASIHTTPRequest

> ID：12571920
> 
> 赞同：0
> 
> 时间：2012-09-24T19:51:49.690
> 
> 标签：ios, asihttprequest

我已经意识到这两个 url 不会同时返回数据。我想知道如何确保网址同时返回。我怎么能将此代码更改为 GCD。这是推荐的吗？我在代码中创建了调度队列，但它没有绘制任何东西，没有工作。没有 GCD 它可以工作，但不会同时返回。任何帮助，将不胜感激！

```
-(void)httpRequest{

_weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
[request1 setCompletionBlock:^{
    NSString *responseString1 = [request1 responseString];
//dispatch_async(backgroundProcess1,^(void){
    [self plotOverlay1:responseString1];
 //});
}];
[request1 setFailedBlock:^{
    NSError *error=[request1 error];
    NSLog(@"Error: %@", error.localizedDescription);
}]; 

[request1 startAsynchronous];

_weak ASIHTTPRequest *request2 = [ASIHTTPRequest requestWithURL:url2];
[request2 setCompletionBlock:^{
    NSString *responseString2 = [request2 responseString];
 //dispatch_async(backgroundProcess2,^(void){
    [self plotOverlay2:responseString2];
  //});
}];
[request2 setFailedBlock:^{
    NSError *error=[request2 error];
    NSLog(@"Error: %@", error.localizedDescription);
}]; 

[request2 startAsynchronous];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:00:32.063

您无法保证两个独立的异步请求会同时返回。

一种解决方案是链接请求——换句话说，在第一个请求的完成块中启动第二个请求——然后在第二个请求的完成块中对两个请求进行处理。

允许两个请求并行运行的另一种方法是在您的类上创建属性以保存来自请求的响应。在请求完成处理程序中，您可以将相应的属性设置为响应字符串的值，然后调用一个新方法。该方法将检查两个请求的 responseString 属性是否有值，如果有，则进行处理，如果没有，则不执行任何操作。这样，只要一个请求完成（无论哪个先完成）都不会发生任何事情，但是一旦另一个请求也完成，您的处理就会完成（对于两个请求）。

```
-(void)httpRequest
{
    _weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
    [request1 setCompletionBlock:^{
        self.responseString1 = [request1 responseString];
        [self checkIfBothRequestsComplete];
    }];
    [request1 startAsynchronous];

    _weak ASIHTTPRequest *request2 = [ASIHTTPRequest requestWithURL:url2];
    [request2 setCompletionBlock:^{
        self.responseString2 = [request2 responseString];
        [self checkIfBothRequestsComplete];
    }];
    [request2 startAsynchronous];
}

- (void)checkIfBothRequestsComplete
{
    if (self.responseString1 && self.responseString2) {
        [self plotOverlay1:self.responseString1];
        [self plotOverlay2:self.responseString2];
    }

} 
```

# jquery - 使引导 twitter 对话框模式可拖动

> ID：12571922
> 
> 赞同：57
> 
> 时间：2012-09-24T19:51:58.043
> 
> 标签：jquery, twitter-bootstrap, modal-dialog, draggable

我正在尝试使用此 jquery 插件使引导 twitter 对话框模式可拖动：

[http://threedubmedia.com/code/event/drag#demos](http://threedubmedia.com/code/event/drag#demos)

但它不起作用。

```
var $div = $('html');
console.debug($('.drag'));
$('#modalTest')
    .drag("start", function(ev, dd) {
        dd.limit = $div.offset();
        dd.limit.bottom = dd.limit.top + $div.outerHeight() - $(this).outerHeight();
        dd.limit.right = dd.limit.left + $div.outerWidth() - $(this).outerWidth();
    })
    .drag(function(ev, dd) {
        $(this).css({
            top: Math.min(dd.limit.bottom, Math.max(dd.limit.top, dd.offsetY))
            , left: Math.min(dd.limit.right, Math.max(dd.limit.left, dd.offsetX))
        });
    }); 
```

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-02-20T14:00:48.023

```
$("#myModal").draggable({
    handle: ".modal-header"
}); 
```

这个对我有用。我从[那里](https://stackoverflow.com/questions/12591597/twitter-bootstrap-modal-form-how-to-drag-and-drop)得到它。如果你感谢我，请给[Andres Ilich 70%](https://stackoverflow.com/users/680398/andres-ilich)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2018-08-13T14:06:14.523

如果您不想使用 jQuery UI 或任何第三方插件，可以使用下面的代码。它只是普通的 jQuery。

**这个答案适用于 Bootstrap v3.x 。对于版本 4.x，请参阅下面的 @User 评论**

```
$(".modal").modal("show");

$(".modal-header").on("mousedown", function(mousedownEvt) {
    var $draggable = $(this);
    var x = mousedownEvt.pageX - $draggable.offset().left,
        y = mousedownEvt.pageY - $draggable.offset().top;
    $("body").on("mousemove.draggable", function(mousemoveEvt) {
        $draggable.closest(".modal-dialog").offset({
            "left": mousemoveEvt.pageX - x,
            "top": mousemoveEvt.pageY - y
        });
    });
    $("body").one("mouseup", function() {
        $("body").off("mousemove.draggable");
    });
    $draggable.closest(".modal").one("bs.modal.hide", function() {
        $("body").off("mousemove.draggable");
    });
});
```

```
.modal-header {
    cursor: move;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<div class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-08-24T14:36:26.387

排名靠前的解决方案（由 Mizbah Ahsan 提出）不太正确……但很接近。如果您将 draggable() 应用于模态对话框元素，浏览器窗口滚动条将在您拖动模态对话框时在屏幕上拖动。解决这个问题的方法是将 draggable() 应用于 modal-dialog 类：

```
$(".modal-dialog").draggable({
    handle: ".modal-header"
}); 
```

谢谢！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-20T12:17:31.900

就像其他人所说，最简单的解决方案是 在显示模态后从*jQuery UI*`draggable()`调用函数：

 *```
$('#my-modal').modal('show')
              .draggable({ handle: ".modal-header" }); 
```

*但是Bootstrap*和*jQuery UI*之间的兼容性存在一些问题，因此我们需要在 css 中进行一些附加修复：

```
.modal
{
    overflow: hidden;
}
.modal-dialog{
    margin-right: 0;
    margin-left: 0;
}
.modal-header{      /* not necessary but imo important for user */
    cursor: move;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-19T20:08:46.887

使用 jquery UI 可拖动，更简单 [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-05T21:18:27.763

我这样做了：

```
$("#myModal").modal({}).draggable(); 
```

它使我非常标准/基本的模态可拖动。

不知道它是如何/为什么起作用的，但确实如此。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-07-09T11:09:47.653

对于鼠标光标（使用 jQuery UI）：

```
$('#my-modal').draggable({
    handle: ".modal-header"
}); 
```

对于触摸光标（使用 jQuery）：

```
var box = null;
var touchobj = null;
var position = {'x':0, 'y':0};
var positionbox = {'x':0, 'y':0};

// init touch
$('.modal-header').on('touchstart', function(e){
    box = $(this).closest('.modal-dialog');
    touchobj = e.changedTouches[0];

    // take position touch cursor
    position['x'] = touchobj.pageX;
    position['y'] = touchobj.pageY;

    //take original position box to move with touch
    positionbox['x'] = parseInt(box.css('left'));
    positionbox['y'] = parseInt(box.css('top'));

    e.preventDefault();
});

// on move touch
$('.modal-header').on('touchmove', function(e){
    var dist = {'x':0, 'y':0};
    touchobj = e.changedTouches[0];

    // we calculate the distance of move
    dist['x'] = parseInt(touchobj.clientX) - position['x'];
    dist['y'] = parseInt(touchobj.clientY) - position['y'];

    // we apply the movement distance on the box
    box.css('left', positionbox['x']+dist['x'] +"px");
    box.css('top', positionbox['y']+dist['y'] +"px");

    e.preventDefault();
}); 
```

2个解决方案的添加是兼容的

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-27T09:36:11.447

在我自己的情况下，我必须先设置`backdrop`和设置属性，`top`然后`left`才能`draggable`在模式对话框上应用功能。也许它可能会帮助某人；）

```
if (!($('.modal.in').length)) {       
$('.modal-dialog').css({
     top: 0,
     left: 0
   });
}
$('#myModal').modal({
  backdrop: false,
   show: true
});

$('.modal-dialog').draggable({
  handle: ".modal-header"
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-22T07:39:51.990

就我而言，我启用了可拖动。有用。

```
var bootstrapDialog = new BootstrapDialog({
    title: 'Message',
    draggable: true,
    closable: false,
    size: BootstrapDialog.SIZE_WIDE,
    message: 'Hello World',
    buttons: [{
         label: 'close',
         action: function (dialogRef) {
             dialogRef.close();
         }
     }],
});
bootstrapDialog.open(); 
```

可能对你有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-08T09:20:44.440

您可以使用 jQuery UI 只需将 jquery UI 链接到您的项目。删除引导程序在“modal-content”元素上给出的过渡需要一点 css。

```
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css"/>
<style>
    .modal.fade.ui-draggable-dragging {
        -moz-transition: none;
        -o-transition: none;
        -webkit-transition: none;
        transition: none;
    }
</style>
<script>
    $('.modal-content').resizable({
        minHeight: 300,
        minWidth: 300
    });
    $('.modal-dialog').draggable();
</script> 
```*

# ruby - ruby - 如何使用 Array#select 或其他方法缩短此枚举语句？

> ID：12571925
> 
> 赞同：0
> 
> 时间：2012-09-24T19:52:11.047
> 
> 标签：ruby, select, map, enumeration, collect

我有以下 7 行代码，我怎样才能让它们更短更简洁？

```
max_group_size = 0
wrong_services.each do |service|
  group_size = service.iep_service.group_size
  if group_size > max_group_size then
    max_group_size = group_size
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:58:56.927

```
max_group_size = wrong_services.map {|service| service.iep_service.group_size }.max 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:07:33.273

```
max_group_size = wrong_services.max_by{|service| service.iep_service.group_size}.iep_service.group_size 
```

（评论后编辑）

# iphone - 为什么 UIViewController 尽管它在屏幕上却被释放

> ID：12571927
> 
> 赞同：5
> 
> 时间：2012-09-24T19:52:12.917
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uiscrollview

无法弄清楚发生了什么。

我正在构建一个使用带有分页的滚动视图的 iPhone 应用程序。滚动视图包含几个视图，它们的视图控制器通过调用从情节提要中加载：

```
[self.storyboard instantiateViewControllerWithIdentifier:@"identifier"]; 
```

我将视图控制器添加到一个可变数组中，并将它们的视图作为子视图添加到滚动视图中。出现在屏幕上后，视图控制器被释放，因此目标操作不再起作用。

当我启用 Zombie Objects 时，调试器在向控制器发送操作时写了这个：

********* -[StreamingViewController performSelector:withObject:withObject:]: 消息发送到已释放实例 0x914f0e0**

 **我真的试图解决这个问题，但没有成功，所以非常感谢每一个帮助。

更多代码：

```
StreamingViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Streaming View Controller"];

[self.pageControllers addObject:controller]; // adding view controller to mutable array

controller.view.frame = self.scrollView.frame;
[self.scrollView addSubview:controller.view]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:57:04.890

如果您使用 ARC，则当您不再拥有指向某物的有效指针时，通常会退出。因此，在您的情况下，您的视图控制器超出范围并被释放。视图仍然保留，因为它由 持有`self.scrollView`。将视图控制器添加到数组可以解决这个问题，但前提是数组已正确实例化。属性不会自动实例化。除非您覆盖访问器，否则使用该属性也不会为您实例化它。由于 Cocoa 的性质，您不会通过尝试将对象添加到 nil 属性而收到任何错误或消息，因为它是完全有效的代码。

检查您是如何创建 pageControllers 的，并确保 在使用它*之前*正确实例化它。

例如。`self.pageControllers = [[NSMutableArray alloc] init];`**

# jquery - jQuery 2 点击功能，一个不触发

> ID：12571933
> 
> 赞同：1
> 
> 时间：2012-09-24T19:52:48.827
> 
> 标签：jquery, function, click

我正在尝试制作一个可以向下滑动以显示联系表单和其他一些内容的标题，由该标题内的 div 触发。

这是我的 HTML：

```
<div id="header">
   <div id="content"></div>
   <div id="button" class="openpanel"></div>
</div> 
```

`#header`上边距为 -300px

这是我的 jQuery：

```
 $(document).ready(function() {

    $(".openpanel").click(function(){

        $("#header").animate({

            "margin-top": "0px"

        })

      $("#button").removeClass("openpanel")
      $("#button").addClass("closepanel")

   });  

    $(".closepanel").click(function(){

        $("#header").animate({

            "margin-top": "-300px"

        }) 

      $("#button").removeClass("closepanel")
      $("#button").addClass("openpanel")

   });  

}); 
```

* * *

问题是它完美地向下滑动，类正确显示，但是当我第二次单击该按钮时，标题不会再次向上滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:56:20.213

您的代码的问题`.closepanel`是绑定单击处理程序时不存在。在这种情况下，您将事件委托`.on`给容器/文档对象。

见下文，

改变`$(".openpanel").click(function(){`如下，

```
$("#header").on('click', '.openpanel', function(){ 
```

和

改变`$(".closepanel").click(function(){`

```
$("#header").on('click', '.closepanel', function(){ 
```

您可以使用单个功能实现您正在做的事情，

```
$('#button').on('click', function () {
    var mTop = 0;
    if ($(this).hasClass('openpanel')) {
        $(this).removeClass('openpanel').addClass('closepanel');
    } else {
        mTop = -300;
        $(this).removeClass('closepanel').addClass('openpanel'); 
    }

    $("#header").animate({ "marginTop": mTop });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:56:33.007

尝试在一个函数中编写按钮的处理程序，而不是两个单独的函数。

```
 $(document).ready(function() {

    $("#button").on('click', function() {
        var margin = '';
        if ($(this).hasClass('openpanel')) {
            $(this).removeClass("openpanel").addClass("closepanel");
            margin = '0px';
        }
        else {
            $(this).removeClass("closepanel").addClass("openpanel");
            margin = '-300px';
        }

        $("#header").animate({
            "margin-top": margin
        })
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:57:49.013

你可以做更多这样的事情

HTML：

```
<div id="header">
   <div id="content"></div>
   <div id="button" class="openpanel"></div>
</div> 
```

jQuery：

```
$(document).ready(function() {

$("#button").click(function(){
    var $self = $(this);
    if ($self.hasClass("openpanel")) {
      $("#header").animate({
          "margin-top": "0px"
      })
      $self.removeClass("openpanel")
      $self.addClass("closepanel")
    } else if ($self.hasClass("closepanel")) {
      $("#header").animate({
        "margin-top": "-300px"
      }) 
      $self.removeClass("closepanel")
      $self.addClass("openpanel")
    }     
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:55:40.043

尝试更改为 on() 函数：

```
 $(".closepanel").on('click',function(){ 
```

# android - getSimSerialNumber() 在 BroadcastReceiver 中返回 null

> ID：12571936
> 
> 赞同：1
> 
> 时间：2012-09-24T19:53:03.277
> 
> 标签：android, broadcastreceiver, telephonymanager

我有一个大问题我想检测在广播接收器的 BOOT_COMPLETED 之后 SIM 卡是否已更改我正在清单上写这个

```
 <receiver android:name="startMobBroacastReciver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver> 
```

并且权限是

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
   <uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

这是我的代码

```
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    if("android.intent.action.BOOT_COMPLETED".equals(intent.getAction()))
    {

          tm=(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
            tel_num= (GsmCellLocation) tm.getCellLocation();
           prefs=context.getSharedPreferences("myprefs", 0);
           Log.i("SIM", " "+tel_num.getCid()+" "+tel_num.getLac()+" "+tm.getSimSerialNumber());
           sim_serial_number=prefs.getString("SIM_serial", "null");

 Toast.makeText(context, "add "+tm.getSimSerialNumber(), Toast.LENGTH_LONG).show(); 
```

顺便说一句 tel_num.getCid() 和 tel_num.getLac() 返回值但 tm.getSimSerialNumber() 返回 null ，这就是让我发疯的原因:(请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-08T21:15:05.740

在从 sim 卡获取数据之前设置一个最长 1 分钟的延迟。有必要初始化卡。

# html - 带有道场组合框的 reset()

> ID：12571940
> 
> 赞同：0
> 
> 时间：2012-09-24T19:53:31.403
> 
> 标签：html, combobox, dojo, reset, dom-events

我想在（单独的）组合框 onchange 事件之后重置 dojo ComboBox。但是当我尝试在 JS 中手动执行此操作时，出现错误。我在这里做错了什么？

错误：

> TypeError: dojo.byId("boroughSelect").reset 不是函数 (Firebug)

HTML：

```
 <select id="layerSelect" dojotype="dijit.form.ComboBox"autoComplete="true" value="Selecy Layer"
                   forceValidOption="false" class="comboBoxClass" onchange="setFlag(this)" >

                <option>option1</option>
                <option>option2</option>
                <option>option3</option>

       </select> 
```

JS：

```
function setFlag(selItem)

{
    dojo.byId("boroughSelect").reset();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:20:58.843

您需要获取对`dijit`实例的引用，而不是对`DOMNode`，因此使用`dijit.byId()`而不是`dojo.byId()`：

```
dijit.byId("boroughSelect").reset(); 
```

[有关更多详细信息，请参阅我对Dojo 无法以编程方式连接 dijits](https://stackoverflow.com/questions/8454552/dojo-cant-programmatically-concatenate-djits/8455984#8455984)的回答？

# asp.net - 如何让 MSBUILD 预编译 .aspx 页面

> ID：12571943
> 
> 赞同：1
> 
> 时间：2012-09-24T19:53:40.870
> 
> 标签：asp.net, msbuild, teamcity

我正在使用 Team City 设置构建服务器，以自动构建和部署 asp.net Web 应用程序到具有转换的 web.configs 的登台站点。一切正常，除了当您在记事本中打开它们时网站上的代码（aspx 文件）中包含 HTML。

在这之前，我在网站上使用 Web 部署项目，并编译了代码。如果你在部署后打开一个，它说它是一个标记文件。

我已经尝试了一些关于这个过程应该如何工作的教程，但是代码总是以可编辑状态（html）结束。

我的问题是：

我需要做什么才能从命令行获取 MSBUILD 以最终在 Web 服务器上预编译代码？

任何建议、链接、指针或想法都会对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:24:13.410

您需要调用[aspnet_compiler](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.100%29.aspx)工具来执行此操作。有一些限制或复杂性，具体取决于您需要为强命名之类的事情做些什么。[这里](http://msdn.microsoft.com/en-us/library/bb398860%28v=vs.100%29.aspx)的 MSDN 文章有指针。

我曾经有执行此操作的 MSBuild 项目步骤，但我们决定放弃预编译，因为我们的客户希望将我们的产品集成到他们的内部门户中，而预编译使他们的事情变得复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:38:49.433

您使用的是 MS Web 部署吗？我经常使用它来自动部署从我的 Team City Build 服务器到 dev、staging、QA 等。我也在转换配置。

如果您想查看这个替代方案，您可以遵循 Troy Hunt 的优秀指南： [http ://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_26.html](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_26.html)

# chef-infra - Chef - 测试 cookbook_file 是否存在

> ID：12571948
> 
> 赞同：11
> 
> 时间：2012-09-24T19:54:25.117
> 
> 标签：chef-infra, cookbook

有什么方法可以测试给定的食谱文件是否存在于厨师食谱中？我想做类似以下的事情：

```
cookbook_file "/etc/cron.d/#{service}" do
  source "etc/cron.d/#{service}"
  owner "root"
  group "root"
  mode "0644"
end 
```

如果文件“etc/cron.d/{service_name}”不存在，它不会失败，因为我可能在一台机器上运行了许多服务，但只有其中一些有关联的 cron 作业。

我不想列出一大堆需要 cron 工作的服务，比如

```
['service_1', 'service_2', ...], 
```

因为这看起来相当脆弱。理想情况下，我希望有一个目录，其中包含需要它们的服务的 cron 作业，并且如果这些文件不存在，则配方不会失败。我正在寻找的可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T10:28:04.677

据我所知，如果 cookbook_file 存在，则无法进行有利的测试。但是如果没有找到文件，你可以让厨师继续运行而不是失败。

```
cookbook_file "/etc/cron.d/#{service}" do
  source "etc/cron.d/#{service}"
  owner "root"
  group "root"
  mode "0644"
  ignore_failure true
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-22T06:57:56.697

试试看`chef_gem`： [http ://www.rubydoc.info/github/3ofcoins/chef-helpers](http://www.rubydoc.info/github/3ofcoins/chef-helpers)

然后您可以使用配方`has_source`中`only_if`的文件例如：

`only_if { has_source?("optional.config.file", :files) }`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-24T15:38:52.193

总的来说，我建议使用@JonathanM 提供的[答案。](https://stackoverflow.com/a/23799821/697930)

如果你不想依赖 a `chef_gem`，这里是你需要的代码。这段代码已经过测试，`Chef 11.12.8`但我想它应该适用于任何`Chef 11.x`版本。

要检查 a`cookbook_file`的来源：

```
only_if { run_context.has_cookbook_file_in_cookbook?(cookbook_name, "etc/cron.d/#{service}") } 
```

要检查 a`template`的来源：

```
only_if { run_context.has_template_in_cookbook?(cookbook_name, "etc/cron.d/#{service}") } 
```

该变量`cookbook_name`在任何配方中都是隐式可用的，并且具有当前的食谱名称作为值。要检查另一本食谱是否有模板或文件，请替换`cookbook_name`为硬编码字符串，例如`"java"`.

请注意，使用 Chef 内部 API 是有风险的，因为代码可能会在主要版本之间发生变化（甚至在我认为的次要版本之间）。这就是为什么依赖`chef_gem`是一个好主意的原因，gem 可以处理多个版本的 Chef，它减少了菜谱代码中的视觉混乱，并且如果 DSL 被深思熟虑，它也使菜谱的代码更具可读性。

# python - 向图像添加工具提示

> ID：12571950
> 
> 赞同：0
> 
> 时间：2012-09-24T19:54:39.233
> 
> 标签：python, gtk, tooltip, pygtk

我正在尝试向图像添加工具提示。按照[PyGTK 教程](http://www.pygtk.org/pygtk2tutorial/sec-TooltipsObject.html)，这似乎应该有效：

```
image = gtk.Image()
image.set_from_file(image_path)
box.pack_start(image, expand=False)

tooltip = gtk.Tooltips()
tooltip.set_tip(image, "Hello!") 
```

除非它没有。当我将鼠标悬停在图像上时没有任何反应。但是，我知道这适用于按钮（我运行了教程中的示例代码）。

使用 GTK 2.12 及更高版本，我可能只能使用`image.set_tooltip_text("Hello!")`，但我被困在 2.10.4 并且必须使用`gtk.Tooltips`.

**编辑**

根据以下[文档](http://www.pygtk.org/docs/pygtk/class-gtktooltips.html)`gtk.Tooltips`：

> 工具提示只能在有自己的 X 窗口的小部件上设置。要检查小部件是否有自己的窗口，请使用`widget.flags()&gtk.NO_WINDOW`. 要将工具提示添加到没有自己的窗口的小部件，请将小部件放在 gtk.EventBox 中，然后将工具提示添加到事件框。

所以这解决了我的问题，但让我有点困惑。我检查了按钮的标志，它具有与`gtk.NO_WINDOW`图像相同的标志。那么为什么按钮不需要 EventBox 而图像却需要呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:08:54.663

为了满足其接口，GktButton 在内部为自己创建了一个事件框（嗯，类似于事件框）。即它在一个不可见的gdk 窗口中捕获事件。GtkImage 没有类似的接口来满足，所以它不需要捕获事件。

也许这是按钮内部实现的一个意外，使用工具提示界面可以在没有在事件框中嵌入按钮的情况下工作，或者工具提示界面**实际上**取决于 gdk 窗口是否可见，而 Widget 界面缺少那种标志。

# java - Android 应用背景颜色未设置

> ID：12571953
> 
> 赞同：4
> 
> 时间：2012-09-24T19:54:49.873
> 
> 标签：java, android

我最近开始开发一个 Android 应用程序。我不是编程菜鸟，自 2009 年以来我一直在使用 Java 编程，但这是我的第一个 Android 应用程序。我已经尝试遵循一些关于如何设置背景颜色的教程，但它根本不适合我。我无法弄清楚我做错了什么。

在我的布局目录中，我有名为 main.xml 和 view_fact.xml 的文件。他们都使用线性布局，我的 LinearLayout 标签如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/background_grey"
> 
```

在我的“values”目录中，“strings.xml”的内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="app_name">Facts</string>
<color name="background_grey">#E8E8E8</color>
</resources> 
```

但是背景颜色并没有从默认的黑色改变。

我还尝试在我的 AndroidManifest.xml 文件中添加：“android:theme="@android:style/Theme.Light""。

这些都不起作用，有什么建议吗？

谢谢你。

在我的 view_fact.xml 页面上，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/background_grey"
>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Fact:"
android:padding="10dp"
android:textColor="#080808"
/>

<TextView 
android:id="@+id/factData"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="10dp"
android:text=""
/>
<Button
android:id="@+id/anotherFactButton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Another Fact"/>
</LinearLayout> 
```

有趣的是，“factData”中的文本是灰色的，而上面文本视图中的文本：“Fact：”是白色的，我尝试将其颜色更改为红色，但它不起作用。它保持白色。

有什么建议么？我仍然没有设法让这个工作; 谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:29:27.897

如果您想使用@color/ **color_name**，您必须创建一个Color.xml 文件，然后它就可以按照您尝试使用它的方式进行访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:02:51.303

请原谅有些明显的问题，但是：您是否在 Activity onCreate 中调用 setContentView(R.layout.main) ？布局中是否还有其他东西填充了 LinearLayout 并覆盖了背景灰色？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T21:57:54.060

查看[您在评论中链接的馅饼，](http://paste.pound-python.org/show/26125/)我认为您需要`<?xml version="1.0" encoding="utf-8"?>`在开始时删除该行。Eclipse 不会在布局中使用该 xml 根目录构建新创建的应用程序。

虽然这很奇怪，因为我在 Android 开发者网站上找到的前两个示例（[例如](http://developer.android.com/guide/topics/resources/layout-resource.html)）包括它

我很想看看如果你删除那条线会发生什么......

* * *

如果我在 Eclipse 中使用

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#E8E8E8"
> 
```

然后背景颜色改变。

如果我将其更改为

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@string/background_grey"
> 
```

通过添加`<string name="background_grey">#E8E8E8</string>`到 /res/values/strings.xml 背景发生变化。

`android:background="@color/background_grey"`如果我在布局和`<color name="background_grey">#E8E8E8</color>` strings.xml中声明它，这也有效

如果我设置 res/values/colors.xml <= 我使用了 colors.xml（而你使用了 color.xml）但是[http://developer.android.com/guide/topics/resources/more-resources .html](http://developer.android.com/guide/topics/resources/more-resources.html)告诉我们文件名是任意的，正如您在 strings.xml 文件中的声明中看到的那样

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="background_grey">#E8E8E8</color>
</resources> 
```

并将布局声明为

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/background_grey"
> 
```

然后背景也改变了......

如果它对您来说表现不一样，那么就会发生一些时髦的事情，或者您使用的布局与上面的简单示例不同，那么，该布局中发生了一些时髦的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T21:29:21.523

好的，我尝试了很多不同的方法来尝试设置背景颜色，但都没有奏效。而且我现在遇到文本不更新的问题。所以我打算尝试重新制作它。如果我仍然遇到问题，使用 eclipse 和 ill 会提出一个新问题。感谢您的建议。

# ios - 强制 cmake 使用 llvm 编译 openCV

> ID：12571957
> 
> 赞同：0
> 
> 时间：2012-09-24T19:55:08.313
> 
> 标签：ios, build, cmake

**背景**

我的目标是为 ios 编译 OpenCV 并支持 armv7s（s 是最难的部分）架构，但一直无法取得任何进展。我最近的理论是问题在于库附带的 cmake 文件使用 gcc 作为编译器，我认为它不支持 armv7s（如果我错了，请告诉我）。但是，我对 cmake 完全陌生，并且无法更改编译器。

我怀疑编译器的原因是因为该行

```
set (CMAKE_OSX_ARCHITECTURES "$(ARCHS_STANDARD_32_BIT)" CACHE string  "Build architecture for iOS") 
```

据我所知应该包括armv7s。将该行更改为

```
set (CMAKE_OSX_ARCHITECTURES "armv6;armv7;armv7s;i386" CACHE string  "Build architecture for iOS") 
```

没有效果。

[我知道这里](http://www.vtk.org/Wiki/CMake_Useful_Variables#Compilers_and_Tools)、[这里](https://stackoverflow.com/questions/6476203/how-can-i-make-cmake-use-specific-compiler-and-flags-when-final-compilation-stag)和[这里](https://stackoverflow.com/questions/7031126/switching-between-gcc-and-clang-llvm-using-cmake)都有关于如何设置编译器的说明。我的问题是我正在尝试更改现有的 cmake 系统，但不知道我的更改可能会产生什么后果。有问题的代码可以在[这里](http://sourceforge.net/projects/opencvlibrary/files/latest/download?source=files)下载。为了构建框架，我在 OpenCV-2.4.2/ios 中运行 python 脚本

```
python build_framework.py ~/Desktop 
```

据我所知，相关的 cmake 文件位于 OpenCV-2.4.2/ios/cmake 中。只有 3 个，而且都很短。我最近的尝试是更改工具链中的两行

```
CMAKE_FORCE_C_COMPILER (gcc gcc)
CMAKE_FORCE_CXX_COMPILER (g++ g++) 
```

至

```
SET (DEVROOT    "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer")
SET (CC         "${DEVROOT}/usr/bin/llvm-gcc-4.2")
SET (CXX        "${DEVROOT}/usr/bin/llvm-g++-4.2")
CMAKE_FORCE_C_COMPILER          (${CC} CLang)
CMAKE_FORCE_CXX_COMPILER        (${CXX} CLang) 
```

试图复制[这个](https://stackoverflow.com/questions/6476203/how-can-i-make-cmake-use-specific-compiler-and-flags-when-final-compilation-stag)SO 问题。

**问题**

1.  我的第一个也是最重要的问题是，这是否超出了我的理解范围。我一直假设更改编译器/目标体系结构将是在某处设置一个简单的标志，但我越来越不相信这是真的。此外，还有一个完整的目录 OpenCV-2.4.2/cmake 充满了更大的 cmake 文件，我一直在避免这些文件，希望我不必担心它们的内容。这是我能在不到 10 小时内解决的问题吗？
2.  如果您对上一个问题的回答是肯定的，您能给我一些指导吗？推荐阅读？我是否有理由忽略 OpenCV-2.4.2/cmake 的内容？我已经在黑暗中拍摄了很长一段时间，但没有成功。
3.  如果事实证明这和我最初希望的一样简单，我该怎么做？

**更新**

我从来没有弄清楚如何做到这一点，但是这里有一个库的 xcode 版本，[可以](https://github.com/jonmarimba/OpenCV-iOS)从中轻松更改编译设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:23:05.563

我在您的问题中看到了很多链接，但没有找到包含如何[与 CMake 交叉编译的](http://www.cmake.org/Wiki/CMake_Cross_Compiling)信息的原始链接。

您不应更改现有构建系统中的任何内容。

通常，您需要为您的目标架构创建[工具链文件](http://www.cmake.org/Wiki/CMake_Cross_Compiling#The_toolchain_file)并使用它运行 cmake。

> cmake -DCMAKE_TOOLCHAIN_FILE=<你的工具链文件><从opencv到CMakeLists.txt的路径>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:59:31.917

设置`CMAKE_C_COMPILIER`并`CMAKE_CXX_COMPILIER`满足您的需求。

编辑：这假设您已经成功地为 armv7 构建了这个。
Edit2：这只会改变编译器。

# actionscript-3 - AS3 将父 mc 的中心缩放到子 mc 的中心

> ID：12571958
> 
> 赞同：1
> 
> 时间：2012-09-24T19:55:12.993
> 
> 标签：actionscript-3, flash, apache-flex, scale

以下代码在加载时将父剪辑“mapcontainer.themap”以乔治亚州为中心。但是，当我尝试缩放 mapcontainer.themap 时，它不会围绕格鲁吉亚的中心进行缩放。缩放时如何将格鲁吉亚保持在中心？

```
//This sets the parent clip so it's centered on the child "georgia" clip on load
var yValue:Number = mapcontainer.themap.georgia.y;
var xValue:Number = mapcontainer.themap.georgia.x;
var xDiff:Number = mapcontainer.themap.width/2;
var yDiff:Number = mapcontainer.themap.height/2;
if (xDiff > stage.stageWidth/2 || yDiff > stage.stageHeight/2) {
    xValue = -xValue;
    yValue = -yValue;
}
mapcontainer.themap.x = xValue;
mapcontainer.themap.y = yValue;

//This line?
mapcontainer.themap.scaleX = mapcontainer.themap.scaleY = 2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:08:37.570

[这是从这里](http://timwhitlock.info/blog/2008/04/scale-rotate-around-an-arbitrary-centre/)派生的函数

```
protected function scaleAround(objectToScale:DisplayObject, scalePoint:Point, scaleAmount:Number ):void {
    // scaling will be done relatively
    var relScaleX:Number = scaleAmount / objectToScale.scaleX;
    var relScaleY:Number = scaleAmount / objectToScale.scaleY;
    // map vector to centre point within parent scope

    scalePoint = objectToScale.localToGlobal( scalePoint );
    scalePoint = objectToScale.parent.globalToLocal( scalePoint );
    // current registered postion AB
    var AB:Point = new Point( objectToScale.x, objectToScale.y );
    // CB = AB - scalePoint, objectToScale vector that will scale as it runs from the centre
    var CB:Point = AB.subtract( scalePoint );
    CB.x *= relScaleX;
    CB.y *= relScaleY;
    // recaulate AB, objectToScale will be the adjusted position for the clip
    AB = scalePoint.add( CB );
    // set actual properties
    objectToScale.scaleX *= relScaleX;
    objectToScale.scaleY *= relScaleY;
    objectToScale.x = AB.x;
    objectToScale.y = AB.y;
} 
```

因此，对于您的场景，您可以这样做：

```
scaleAround(mapcontainer.themap,new Point(mapcontainer.themap.georgia.x,mapcontainer.themap.georgia.y),2) 
```

# jquery - 用于 Facebook Iframe 的 jQuery 选择器

> ID：12571959
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:55:17.920
> 
> 标签：jquery, facebook

这是我的第一个问题。我在我正在处理的网站中使用 FacebookLikeBox，我想向每个单击 Like 按钮的用户显示一个联系表单，但我不知道如何选择`.liketext`或`.connect_widget_like_button`. 两者都在创建 facebook div 的 iframe 内。我试图这样得到它：

```
$("iframe").contents().find(".liketext") 
```

但不起作用。无法获取 iframe id，因为它是动态的，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:00:33.617

只需“听”按钮按下并在单击后执行某些操作：

```
FB.Event.subscribe('edge.create', function(response) {
    // like clicked
}); 
```

# html - 使用 CSS 在 Web 表单上的某些控件周围创建一个组框

> ID：12571960
> 
> 赞同：75
> 
> 时间：2012-09-24T19:55:18.187
> 
> 标签：html, css

我的三个下拉列表的 Web 表单上有三个控件。

我想围绕这些控件创建一个图形“框”。这样做的原因是选择这些控件将是我过程的“步骤 1”。所以我想在这些控件周围放一个框并称之为“步骤 1”

我将如何使用 CSS 进行此操作？

例子：

> ![框住表单元素](../Images/d2b947847177030bb7efb0f098aeb48d.png)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-24T19:59:05.417

`fieldset`带有 a的A`legend`为表单控件提供了视觉和语义分组。然后，您可以根据需要使用 CSS 设置样式。A`fieldset`有点独特，因为`legend`它能够在视觉上打断其父元素的边界`fieldset`（可能与其他元素一起使用，但很难）。

示例：http: [//jsfiddle.net/NUMcr/1/](http://jsfiddle.net/NUMcr/1/)

```
<fieldset>
<legend>Group 1</legend>
    <input type="text" />
    <asp:Textbox runat="Server" id="txt1" />
    <!-- etc -->
</fieldset> 
```

```
fieldset {
    margin: 8px;
    border: 1px solid silver;
    padding: 8px;    
    border-radius: 4px;
}

legend {
    padding: 2px;    
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-24T20:01:43.223

有一个`fieldset`HTML 元素，它是为此特定目的而制作的：http: [//www.w3.org/wiki/HTML/Elements/fieldset](http://www.w3.org/wiki/HTML/Elements/fieldset)。如果您设置为仅使用 CSS，则可以执行以下操作：

```
<html>
<head></head>
<body>

    <h1>Step 1</h1>
    <div style="border: 1px solid #000000;">
        <input type="text" />
        <input type="submit" value="Submit" />
    </div>

</body>
</html> 
```

然后，您可以设置`h1`（或您希望用于标题的任何类型的 HTML 元素）和`div`包含输入元素的样式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-18T06:36:31.163

```
<form>
  <fieldset>
    <legend>Personalia:</legend>
    Name: <input type="text"><br>
    Email: <input type="text"><br>
    Date of birth: <input type="text">
  </fieldset>
</form> 
```

# c++ - iOS 中的 shared_ptr 和引用计数是同一个想法吗？

> ID：12571964
> 
> 赞同：4
> 
> 时间：2012-09-24T19:55:24.130
> 
> 标签：c++, ios, boost

我对 C++ 或 iOS 都不是很有经验，所以我只是好奇 iOS 的引用计数在 boost 共享指针和 NSObject 中的工作原理是否基本相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:44:30.680

从我[在这里](http://blog.teamtreehouse.com/ios-5-automatic-reference-counting-arc)`std::shared_ptr`收集的信息来看，使用 ARC 与使用（“强”指针）和`std::weak_ptr`（“弱”指针）非常相似。

滥用前者，避免后者。无论如何，`std::unique_ptr`如果可以，请选择。

*（另外，在 21 世纪，您必须在为 iOS 编程时手动释放指针，这让我有些惊讶。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:28:15.650

我对 C++ 不是很有经验，所以我对 shared_ptr 的看法可能并不完全正确，但对我来说，它们看起来并不相似。在 Obj-C 中有两种选择。手动内存管理 - 您手动增加和减少对象的引用计数，这里不会发生任何魔法。新的 ARC 主要是编译时功能，而 shared_ptr 只是运行时实现。

# objective-c - 将 Xcode 4.5 新的 XIB 文件恢复到 iOS<6

> ID：12571965
> 
> 赞同：6
> 
> 时间：2012-09-24T19:55:24.660
> 
> 标签：objective-c, ios, interface-builder, ios6, xcode4.5

我已经安装了带有**iOS6 SDK**和其他旧 SDK（从 4.3 到 6.0）的 **Xcode 4.5用于测试目的。**

 **漂亮，但有一个**大**问题！

> 为兼容 iOS6 生成一个新的 XIB 文件！

这是一个问题，因为我的应用程序需要在*旧设备*上运行，而不仅仅是 6.0+！
当我在 5.1 设备中加载新视图（ios6）时，它会因以下错误而静默崩溃：

> 2012-09-24 22:00:17.090 App[14524:11f03] ***由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

如何删除 XIB 中的多余行以使（xib 和应用程序）与旧 ios 版本兼容？

多谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T19:57:41.693

尝试更改 xib 的此选项：

![在此处输入图像描述](../Images/f0922e6ad0a05f9bbadef13fdcbbffd2.png)

还要确保关闭**使用自动布局**，因为它是 iOS 6.0 的功能。

![在此处输入图像描述](../Images/274bd5afc6ad8038a7a34c43afa1da78.png)**

# ruby-on-rails - 无法在 Rails 中启动项目

> ID：12571967
> 
> 赞同：1
> 
> 时间：2012-09-24T19:55:35.833
> 
> 标签：ruby-on-rails, ruby

我对 Rails 很陌生。

我创建了一个新的 Rails 应用程序：`rails new app_name`，并运行`rails server`等。

但是，一旦我关闭并重新打开我的机器，我既不能运行也不能`rails server`运行`rails console`. 它说要`rails new app_name`再次使用该命令，但我只想从前一天离开的地方重新开始。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:18:35.633

我猜您当前的命令行工作目录不在您昨天创建的项目目录中。

```
cd some_path/to_my/rails_project
rails server 
```

您必须位于代表您的项目的目录中才能执行启动服务器等操作。否则，它怎么知道要为哪个项目启动服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:22:47.123

只需确保您位于您创建的 rails 应用程序的目录中。听起来你不是。

# salesforce - 如何在 Salesforce 中输出？

> ID：12571968
> 
> 赞同：1
> 
> 时间：2012-09-24T19:55:35.877
> 
> 标签：salesforce

我正在编写一个读取数据库并处理记录的 Apex 程序。每次处理记录时，我都想输出一条消息。目前我正在使用 System.Debug 来执行此操作，但是调试日志杂乱无章，以至于这似乎不是正确的方法。

我可以通过哪些其他方式在 SalesForce 中生成屏幕或日志文件输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:48:39.653

继续使用`System.Debug()`，但当您只想查看输出消息时，只需过滤`DEBUG`. 否则，唯一的其他选择是创建一个视图，然后这比它的价值更混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:59:16.807

请在设置>>管理设置>>监控>>调试日志下打开原始格式的日志。在**受监控的用户**下，转到**过滤器**并启用所有过滤器级别。现在使用给定的顶点代码

```
System.debug('StackOverflow >>1234'+ e.getMessage) 
```

并搜索**StackOverflow >>1234**唯一消息的详细调试日志。也可能发生您的 system.debug 可能没有在特定的调试日志中执行，所以不要忘记检查所有最近的调试日志。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:43:02.723

您可以考虑创建自己的 Logging__c 对象。并为处理的每条记录创建一条记录。不过，您必须有创造力才能绕过州长的限制。

如果在处理每条记录之间输出消息不是必需的，那么您可以在处理继续时建立 Logging__c 记录的集合，然后定期插入它们，或者在您的过程中出现异常时插入它们。

请注意，如果定期插入它们，您仍然必须确保作业不会太大，以至于您将与您正在进行的处理工作一起达到 150 的 DML 限制。此外，如果存储要在处理结束时全部插入的记录，请记住堆大小为 6MB。

或者，看看 Batch Apex [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm)

这允许您创建一个类来处理异步块中的作业。您可以设置一次性处理的记录数。因此，您可以设置这个小 (~20)，然后在*处理每个作业记录时插入一个 Logging_c 记录，以保持在 Batch Apex DML 限制 200 内。然后您可以*实时监控 Logging_c 记录以查看进度。

# ruby-on-rails - 有很多通过不同的外键

> ID：12571974
> 
> 赞同：0
> 
> 时间：2012-09-24T19:55:50.653
> 
> 标签：ruby-on-rails, foreign-key-relationship, has-many-through

我有以下`:has_many :through`关系。

**协会**

```
class Profile < ActiveRecord::Base  
  has_many :teams
  has_many :projects, :class_name => "Project", :through => :teams
  has_many :leads, :class_name => "Projects"

class Project < ActiveRecord::Base
  has_many :teams
  has_many :developers, :class_name => "Profile", :through => :teams
  belongs_to :lead, :class_name => "Profile", :foreign_key => "developer_lead"

class Team < ActiveRecord::Base
  belongs_to :developer, :class_name => "Profile"
  belongs_to :project 
```

当我尝试获取 Profiles 项目时，该关系未使用 team 表中的正确键。

**导轨 C**

> 1.9.3p194:001 > Profile.first.projects
> 
> 配置文件加载（0.2ms）选择“profiles”。* FROM“profiles”限制1
> 项目加载（0.2ms）选择“projects”。*从“projects”INNER JOIN“teams”ON“projects”。“id”=“teams "."project_id" WHERE **"teams"."profile_id" = 1**

它应该使用`"teams"."developer_id" = 1`

我已经尝试`:foreign_key => "developer_id"`在 Profile 和 Project 模型中使用 a ，但似乎没有任何效果。

我觉得我对模型所做的更改没有产生任何影响，尽管每次更改后我都在重新启动 rails 控制台。

**架构**

```
create_table "profiles", :force => true do |t|
  t.datetime "created_at",          :null => false
  t.datetime "updated_at",          :null => false
end

create_table "projects", :force => true do |t|
  t.integer  "developer_lead"
  t.datetime "created_at",     :null => false 
  t.datetime "updated_at",     :null => false
end

create_table "teams", :id => false, :force => true do |t|
  t.integer  "developer_id"
  t.integer  "project_id"
  t.datetime "created_at",   :null => false
  t.datetime "updated_at",   :null => false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:41:33.897

`:foreign_key => "developer_id"`属于`has_many :teams`.

此外，如果您遵守 Rails 约定并以“_id”结尾所有外键名称，如“developer_lead_id”，它会使您的代码更清晰。

# javascript - Javascript SyntaxError: Unexpected EOF -webkit browsers only

> ID：12571980
> 
> 赞同：1
> 
> 时间：2012-09-24T19:56:14.617
> 
> 标签：javascript, jquery

I have a function (show below) that totals up all the hours on the page onBlur of the ".total" input fields. This function works perfectly in FF but in Chrome and Safari I am getting this error: SyntaxError: Unexpected EOF ---I did some research but I am lost as to what might be causing this.

thanks for any help!

```
function totalUpHours() {
    //add all values to an array
    var hrsTotalsarr = new Array();
    $('.total').each(function() {
        var thisTotal = $(this).val();
        //clean the value
        if (thisTotal == "HRS") {
            thisTotal = 0;
        }
        hrsTotalsarr.push(thisTotal);
    });

    //sum up the array
    var hrsTotal = eval(hrsTotalsarr.join('+'));
    $('#taskHRStotals').val(hrsTotal);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:32:29.213

Sometimes invalid characters can work their way into code when you copy/paste code from websites.

Unfortunately, they're often invisible, and can only be noticed if you move your cursor across it with the arrow keys on your keyboard. When you get to the invalid one, the cursor will pause for a single keystroke.

* * *

Aside from that, consider this alternative to using `eval()` in your code.

```
function totalUpHours() {

    var hrsTotal = $('.total').map(function() {
                                     var thisTotal = $(this).val();

                                     return thisTotal == "HRS" ? 0 : thisTotal;
                                   })
                              .toArray()
                              .reduce(function(total, n) {
                                  return total + n;
                              }, 0);

    $('#taskHRStotals').val(hrsTotal);
} 
```

This is called `map/reduce`, and is a very handy pattern to know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:02:16.247

Its seems working. Tested it on chrome.

Refer to the **[LIVE DEMO](http://jsfiddle.net/SivaCharan/4Tacd/)** for your reference.

## HTML:

```
<input type="text" class="total" value="1" />
<input type="text" class="total" value="2" />
<input type="text" class="total" value="3" />
<input type="text" id="taskHRStotals" value="0" /> 
```

## JS

```
totalUpHours();

function totalUpHours(){
    //add all values to an array
    var hrsTotalsarr = new Array();
    $('.total').each(function() {
        var thisTotal = $(this).val();
        //clean the value
        if(thisTotal=="HRS"){
            thisTotal=0;}
        hrsTotalsarr.push(thisTotal);
    });

    //sum up the array
    var hrsTotal = eval(hrsTotalsarr.join('+'));
    $('#taskHRStotals').val(hrsTotal);
}​

​ 
```

# c# - MessageBox.Show 使 DirectShow 运行

> ID：12571984
> 
> 赞同：-1
> 
> 时间：2012-09-24T19:56:25.113
> 
> 标签：c#, wpf

有没有人知道什么会导致你打电话的情况

```
mediaControl.Run(); 
```

在调用它之前它不会真正开始渲染视频

```
MessageBox.Show(""); 
```

即使getstate返回它正在运行，我也无法弄清楚为什么媒体没有运行，直到我返回HRESULT，它说确定它正在运行......但只在显示消息框时在窗口上显示视频。

奇怪的是，如果你关闭消息框，渲染暂停......但如果你在 5 秒后再次调用它，它会继续工作。

此外......如果您关闭消息框并在它之后有一个连续循环无限期地使线程休眠，它会继续呈现。

我整天都在努力想弄清楚为什么消息框是关键……但最终，我无法显示消息框。

任何随机的想法也会有所帮助......谢谢。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:01:28.480

MessageBox.Show() 的主要作用是运行消息循环。您可以将其替换为模拟`DoEvents()`（请参阅[此答案](https://stackoverflow.com/a/4502200/60761)）

但是您的代码中可能存在与此相关的严重问题。

# python - 任务计划程序不会运行 python 脚本 (pywin32) 来打开 Excel。如何从 Pywin32 获取更多信息

> ID：12571985
> 
> 赞同：2
> 
> 时间：2012-09-24T19:56:24.863
> 
> 标签：python, scheduled-tasks, pywin32

我有一个在 Windows Server 2008 上运行的 Python 脚本。它打开一个电子表格并向电子表格添加一个过滤器行，关闭它，然后将其压缩。主电子表格是使用 xlwt 创建的。我只使用 Pywin32，因为用户想要添加一个过滤器行。

当手动执行此操作（即直接通过 Windows 资源管理器或命令行）时，它可以工作。但是，当通过 Task Schduler 手动触发脚本或让它在所需时间触发时，它不起作用。

“运行身份”用户是管理员。我已检查以确保它以最高权限运行。

我通过将输出传送到日志文件来捕获错误消息。回溯显示：

```
File "C:\www\..\main\management\commands\excel_writer.py", line 183, in add_filter_control
    xl.Workbooks.Open(file_path)
File "<COMObject <unknown>>", line 8, in Open
pywintypes.com_error: (-2147352567, 'Exception occurred.', (0, u'Microsoft Office Excel', u'Die Open-Methode des Workbooks-Objektes konnte nicht ausgef\xfchrt werden.', u'C:\\Program Files\\Microsoft Office\\OFFICE11\\1031\\xlmain11.chm', 0, -2146827284), None) 
```

好的......这是德语，但它基本上说“无法执行工作簿打开方法”。

但是，我不知道为什么。有人对如何找出原因有任何提示吗？

干杯

行政长官

以下是一些代码和设置：

**电子表格创建代码**

```
...
w = xlwt.Workbook('UTF-8')
    worksheets = {} 

    data_formatting_dict = construct_data_formatting()

    for sheetref, sheetname, datasource, dataformat_ref in sheetlist:
        worksheets[sheetref] = w.add_sheet(sheetname)
        fetch_row_heights(sheetref, dataformat_ref)
        xls_set_columnwidth(sheetref, dataformat_ref)
        xls_set_main_titles(sheetref, sheetname, dataformat_ref)
        xls_set_titles(sheetref, sheetname, dataformat_ref)
        xls_insert_filter_row(sheetref, dataformat_ref)
        xls_freeze_panes(sheetref, dataformat_ref)
        xls_write_lines(sheetref,dataformat_ref,datasource,pre_title_rows+title_rows+post_title_rows)

    filename = fileroot + ".xls"
    archive = fileroot + ".zip"
    filepath = os.getcwd() + "\\" + filename
    w.save(filepath)

    add_filter_control(filepath)  << This is where the filter code is called.

    ziparchive(filename, archive)    
    full_archive_ref = save_to_folder + archive
    shutil.copy(archive, full_archive_ref)

    os.remove(filename)
    os.remove(archive)
... 
```

**add_filter_control**

```
def add_filter_control(file_path):
    try: 
        from win32com.client import Dispatch
    except:
        return

    xl = Dispatch("Excel.Application") 
    xl.Workbooks.Open(file_path) 
    for id, sheetname, source, formatref in sheetlist:
        cellref = format_params[formatref]['filter_range']
        if cellref is not None:
            xl.ActiveWorkbook.Worksheets(sheetname).Range(cellref).AutoFilter(1)
    xl.ActiveWorkbook.Close(SaveChanges=1) # 1 is True, 0 is False
    xl.quit() 
```

**任务计划程序设置**

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2010-07-23T21:25:09.4036437</Date>
    <Author>WIN-1CW6Q4GAAAM\Administrator</Author>
    <Description>Refreshes the temp tables in the database and generates the summary report spreadsheet.</Description>
  </RegistrationInfo>
  <Triggers>
    <CalendarTrigger>
      <StartBoundary>2010-07-23T05:00:00</StartBoundary>
      <ExecutionTimeLimit>PT1H</ExecutionTimeLimit>
      <Enabled>true</Enabled>
      <ScheduleByDay>
        <DaysInterval>1</DaysInterval>
      </ScheduleByDay>
    </CalendarTrigger>
  </Triggers>
  <Principals>
    <Principal id="Author">
      <UserId>WIN-1CW6Q4GAAAM\Administrator</UserId>
      <LogonType>Password</LogonType>
      <RunLevel>HighestAvailable</RunLevel>
    </Principal>
  </Principals>
  <Settings>
    <IdleSettings>
      <Duration>PT10M</Duration>
      <WaitTimeout>PT1H</WaitTimeout>
      <StopOnIdleEnd>true</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
    <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
    <DisallowStartIfOnBatteries>true</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries>
    <AllowHardTerminate>true</AllowHardTerminate>
    <StartWhenAvailable>true</StartWhenAvailable>
    <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
    <AllowStartOnDemand>true</AllowStartOnDemand>
    <Enabled>true</Enabled>
    <Hidden>false</Hidden>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <WakeToRun>false</WakeToRun>
    <ExecutionTimeLimit>PT1H</ExecutionTimeLimit>
    <Priority>7</Priority>
  </Settings>
  <Actions Context="Author">
    <Exec>
      <Command>run_reports.bat</Command>
      <WorkingDirectory>C:\www\my_site\mysite\</WorkingDirectory>
    </Exec>
  </Actions>
</Task> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T09:51:47.317

经过几天的搜索，我找到了以下解决方案（完整的线程可以在[http://social.msdn.microsoft.com/Forums/en/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91](http://social.msdn.microsoft.com/Forums/en/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91)找到）

在 systemprofile 文件夹中似乎需要一个 Desktop 文件夹才能通过 Excel 打开文件。您需要创建以下文件夹之一：

**Windows 2008 服务器 x64**

C:\Windows\SysWOW64\config\systemprofile\Desktop

**Windows 2008 服务器 x86**

C:\Windows\System32\config\systemprofile\Desktop

我不确定为什么会这样，但它对我有用。我希望这对处于相同情况的人有所帮助，并感谢那些试图提供帮助的人。

# oracle - 使用将它们映射在一起的第三个关联来自 Oracle 中两个表的数据

> ID：12571995
> 
> 赞同：0
> 
> 时间：2012-09-24T19:56:56.970
> 
> 标签：oracle, oracle11g

我正在尝试基于将它们映射在一起的第三个表来加入/合并/来自两个表的任何数据。这是想法：

表 USERS 包含用户 ID、用户名和一些其他数据。表 GROUPS 包含组 ID、组名称和一些其他数据。

表 USERGROUPMAP 包含一组映射在一起的用户 ID 和组 ID，它们对应于 USERS 和 GROUPS 中的 ID。每个用户可以在多个组中，每个组可以有多个用户。

我总是通过在单个字段中存储对象或 CSV 数据来做到这一点，例如在名为 MEMBERS 的组中创建一个列并存储 id1、id2、id3 ......但这就是我所看到的。

我无法更改架构...我知道这与 JOIN 或 UNION 或其他东西有关，但我的 SQL 非常生疏，所以有人可以在这里帮忙吗？

我可能是半正确的想法-

```
SELECT USERS.uid, 
       GROUPS.gid, 
       USERGROUPMAP.uid, 
       USERGROUPMAP.gid 
  FROM USERS, 
       GROUPS, 
       USERGROUPMAP 
  JOIN ON ((USERS.uid = USERGROUPMAP.uid) AND (GROUPS.gid = USERGROUPMAP.gid)) 
```

有小费吗？：（ .. 多谢你们。

**编辑，预期的 IO**

USERS 表包含一堆 UID ... 1,2,3,4,5，等等 GROUPS 表包含一堆 GID，1000,1001,1002 等等

USERGROUPMAP 包含对应于哪些用户在哪些组中的元组，例如 (1,1002) (2,1000) (5,1003) (5,1000)

我正在尝试获取用户所在的组列表，因此对于此示例，我想获得两行 5,1003 和 5,1000 ...有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:09:17.737

```
Select a.userID, a.name, b.groupName
from USERS a, GROUPS b, USERGROUPMAP c
where c.userID = a.userID and 
b.groupID = c.groupID and
c.userID = <searchID> 
```

您要搜索的用户 ID 是查询中的 searchID。如果要列出组的用户，可以将 userID 替换为 groupID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:11:56.510

假设在 USERS 和 GROUPS 中没有重复，这是三个表之间的简单连接：

```
SELECT
  USERS.FIELD1,
  USERS.FIELD2,
  -- ...
  USERS.FIELDN,
  GROUPS.FIELD1,
  GROUPS.FIELD2,
  -- ...
  GROUPS.FIELDN
FROM USERS
JOIN USERGROUPMAP ON USERS.UID = USERGROUPMAP.UID
JOIN GROUPS ON USERGROUPMAP.GID = GROUPS.GID 
```

# playorm - 如何在分区内建立索引？

> ID：12571997
> 
> 赞同：0
> 
> 时间：2012-09-24T19:57:21.150
> 
> 标签：playorm

在 playOrm 自述文件中，列出了以下查询：

//首先，在 Activity.java 上，您将有一个 NoSqlQuery，如下所示 @NoSqlQuery(name="queryByValue", query="PARTITIONS a(:partId) SELECT a FROM TABLE as a "+ "WHERE a.price > ：值和 a.numShares < 10")

我知道选择要查询的正确分区是多么容易，但是子句“a.price > :value”是在 CF 列上选择一些东西。即使分区内的行数很少，我是否不需要该列的索引？如何使用 playOrm 创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:54:48.963

抱歉，有时我需要 1 天才能回复。

```
PARTITIONS a(:partId) SELECT a FROM TABLE as a "+ "WHERE a.price > :value and a.numShares < 10" 
```

当您说“右分区”时，我假设您的意思是正确的分区而不是左/右。以上是用 JQL 编写的，因此我可以根据该查询将实体的一部分编写为

```
MyEntity {
  @NoSqlIndexed
  private BigDecimal price;
  @NoSqlIndexed
  private int numShares;

  //other fields
} 
```

注释告诉 playOrm 索引 price 和 numShares 字段。目前，您只能在 WHERE 子句中使用被索引的字段......这可能会在未来随着我们添加更多功能而改变。

所以你不需要创建分区，PlayOrm 会这样做。要稍后创建索引，当前的方法是将@NoSqlIndexed 添加到现有实体，然后映射/减少读取该行然后保存该行.....我们正在努力解决这个问题，这样您就可以运行我们的映射/减少作业以在整个集群中重新索引某些内容。

另外关于你的问题，有些人关闭[了 playOrm 基本设置 + playOrm 成熟度](https://stackoverflow.com/questions/12569925/playorm-basic-setup-playorm-maturity)

我认为这是有效的

1.  我刚刚在这里回答了一个类似的入门问题[PlayORM 入门](https://stackoverflow.com/questions/12574027/getting-started-with-playorm/12583232#12583232)
2.  成熟度问题....PlayOrm 已经有 62 个测试，我们正在生产中使用它。

后来，迪恩

# php - 不断得到：“stripslashes() 期望参数 1 是字符串，在第 30 行的 /target.php 中给出的数组”错误

> ID：12571998
> 
> 赞同：0
> 
> 时间：2012-09-24T19:57:28.717
> 
> 标签：php, mysql, pdo

我不断收到的错误是：stripslashes() 期望参数 1 是字符串，第 30 行 /target.php 中给出的数组

这是我在这个网站上的代码，我是新手，我已经尝试了 30 多分钟。

我很抱歉问了这么愚蠢的问题。

```
<?php

// rnprofile.php
include_once 'rnheader.php';

if (!isset($_SESSION['user']))
    die("<br /><br />You need to login to view this page");
$user = $_SESSION['user'];
echo "<h3>Edit your Profile</h3>";
if (isset($_POST['text'])) {
    $text = sanitizeString($_POST['text']);
    $text = preg_replace('/\s\s+/', ' ', $text);
    $query = "SELECT * FROM rnprofiles WHERE user='$user'";
    if (queryMysql($query) != false) {
        queryMysql("UPDATE rnprofiles SET text='$text'
            where user='$user'");
    } else {
        $query = "INSERT INTO rnprofiles VALUES('$user', '$text')";
        queryMysql($query);
    }
} else {
    $query = "SELECT * FROM rnprofiles WHERE user='$user'";

    $result = queryMysql($query);
    $sth = $dbh->prepare($query);
    $sth->execute();
    if (queryMysql($query) != false/* mysql_num_rows($result) */) {
        $row = $sth->fetchAll(PDO::FETCH_ASSOC);
        //$row = mysql_fetch_row($result);
        $text = stripslashes($row[1]);
    }
    else
        $text = "";
}
$text = stripslashes(preg_replace('/\s\s+/', ' ', $text));
if (isset($_FILES['image']['name'])) {
    $saveto = "$user.jpg";
    move_uploaded_file($_FILES['image']['tmp_name'], $saveto);
    $typeok = TRUE;
    switch ($_FILES['image']['type']) {
        case "image/gif": $src = imagecreatefromgif($saveto);
            break;
        case "image/jpeg": // Both regular and progressive jpegs
        case "image/pjpeg": $src = imagecreatefromjpeg($saveto);
            break;
        case "image/png": $src = imagecreatefrompng($saveto);
            break;
        default: $typeok = FALSE;
            break;
    }
    if ($typeok) {
        list($w, $h) = getimagesize($saveto);
        $max = 100;
        $tw = $w;
        $th = $h;
        if ($w > $h && $max < $w) {
        $th = $max / $w * $h;
        $tw = $max;
    } elseif ($h > $w && $max < $h) {
        $tw = $max / $h * $w;
        $th = $max;
    } elseif ($max < $w) {
        $tw = $th = $max;
    }
    $tmp = imagecreatetruecolor($tw, $th);
    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $tw, $th, $w, $h);
    imageconvolution($tmp, array(// Sharpen image
        array(−1, −1, −1),
        array(−1, 16, −1),
        array(−1, −1, −1)
            ), 8, 0);
    imagejpeg($tmp, $saveto);
    imagedestroy($tmp);
    imagedestroy($src);
    }
}
showProfile($user);
echo <<<_END
<form method='post' action='rnprofile.php'
enctype='multipart/form-data'>
Enter or edit your details and/or upload an image:<br />
<textarea name='text' cols='40' rows='3'>$text</textarea><br />
Image: <input type='file' name='image' size='14' maxlength='32' />
<input type='submit' value='Save Profile' />
</pre></form>
_END;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:00:30.743

来自[PDO::FETCH](http://php.net/manual/en/pdostatement.fetch.php)手册

> **PDO::FETCH_ASSOC**：返回一个按列名索引的数组，如结果集中返回的那样
> 
> **PDO::FETCH_NUM**：返回一个按列号索引的数组，如结果集中返回的那样，从第 0 列开始

你已经使用了 `FETCH_ASSOC`，那么你必须使用列名作为键`$row`

```
 $row = $sth->fetchAll(PDO::FETCH_ASSOC);
    $text = stripslashes($row['column_name']); 
```

或将其更改为`FETCH::NUM`

```
 $row = $sth->fetchAll(PDO::FETCH_NUM);
 $text = stripslashes($row[1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:02:09.823

该方法返回一个包含*所有*`fetchAll`行的数组，所以这一行：

 *```
$row = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

没有`$row`按照名称`row`所暗示的方式设置。因此，`$row[1]`它不是单个字符串，而是一个包含整行的关联数组。

你可能应该改变这个：

```
 $row = $sth->fetchAll(PDO::FETCH_ASSOC);
        //$row = mysql_fetch_row($result);
        $text = stripslashes($row[1]); 
```

对此：

```
 $rows = $sth->fetchAll(PDO::FETCH_ASSOC);
        $text = stripslashes($rows[0]['column_name_of_interest']); 
```

（请注意，我也更改`1`为：数组是从PHP`0`中索引的，而不是从.）`0``1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:02:49.960

这是因为您使用的是 fetchAll，它会返回一个关联数组的数组：

```
if (queryMysql($query) != false/* mysql_num_rows($result) */) {
    $row = $sth->fetchAll(PDO::FETCH_ASSOC);
    $text = stripslashes($row[1]); 
```

因此，当您调用 stripslashes 并传递它时`$row[1]`，您将传递给它一个关联数组，该数组由数据库中的第二个结果组成。我认为这可能符合您的意思：

```
if (queryMysql($query) != false/* mysql_num_rows($result) */) {
    if ($row = $sth->fetch(PDO::FETCH_ASSOC) {
        $text = stripslashes($row[1]); 
```

这是假设您按名称搜索用户只会返回一个结果*