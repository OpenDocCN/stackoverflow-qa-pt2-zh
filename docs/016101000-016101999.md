# StackOverflow 问答 16101000-16101999

# c - -ansi -pedantic C 中的 64 位长度整数

> ID：16101002
> 
> 赞同：4
> 
> 时间：2013-04-19T09:04:02.713
> 
> 标签：c, 64-bit, int, portability

我想知道`int64_t`在 C 中是否有一个等价物可以在 32 位和 64 位平台上工作，并且符合*ansi*和*pedantic* gcc 模式。

我发现了这篇有趣[的帖子](https://stackoverflow.com/questions/4160945/c-long-long-int-vs-long-int-vs-int64-t)，但它与 C++ 相关。

我尝试使用`long long`但出现`integer overflow in expression [-WOverflow]`错误。此外`long long`，ISO C90 也不支持。

我也尝试了这篇[文章](https://stackoverflow.com/questions/8373783/representing-a-64-bit-integer-in-gnu-linux)中的建议，但我仍然有使用`-WOverflow`错误`int64_t`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:06:45.483

*   在 C89（`-ansi`标志要求）中，没有使用 64 位整数的标准方法。您必须依赖实现提供的类型。

*   在 C99 中，某些实现*可能会*定义`int64_t`，因为它是可选类型。至于 `long long`（C99），不能保证它的宽度*正好*是 64 位。

# events - KineticJS one shape triggering event on another shape on dragover

> ID：16101003
> 
> 赞同：0
> 
> 时间：2013-04-19T09:04:02.897
> 
> 标签：events, binding, kineticjs, shapes

I'm familiar with kineticJS and have just come across my first problem which i'm hoping someone will be able to help with.

What i'd like to do is drag one shape (a trigger shape) over another shape (a target shape) and in doing so fire off an event or function (in this case an AJAX post).

The other thing is i'd like to do is pass information (names) of both shapes into the ajax post.

(doing the ajax post itself is not an issue, it's the triggering event and getting info of both shapes)

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:04:18.673

```
trigger.on('dragend', function() {

        var x = trigger.getX();
        var y = trigger.getY();
        var triggerName = trigger.getName();

 var children = triggerLayer.getChildren();
 for( var i=0; i<children.length; i++){

  if(x > (children[i].getX()- children[i].getWidth()/2)  &&
     x < (children[i].getX()+ children[i].getWidth()/2)  &&
     y > (children[i].getY()- children[i].getHeight()/2) &&
     y < (children[i].getY()+ children[i].getHeight()/2)
    )
 {

 alert(triggerName + "has activated" + children[i].getName())
 ///ajax post
 } 

 } 
```

# javascript - jQuery : check if label by a specific name exists

> ID：16101005
> 
> 赞同：5
> 
> 时间：2013-04-19T09:04:14.870
> 
> 标签：javascript, jquery

check if label by a specific name exists,

Say if i want to find if such label exists

```
<label onClick='javascript:someMethod()' name="label_name">*some text*</label> 
```

if so then i need to implement some code.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:06:54.067

尝试

```
var x = $('label[name="label_name"]');
if(x.length){
    //label exists
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-10T09:02:59.547

在条件循环中试试这个 -- $('label[name="label_name"]').length

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T09:10:12.180

```
if($('label[name="label_name"]').length)
{
    //code
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T09:08:29.677

```
if ($('label[name="label_name"]').length) {
    alert('Label exists');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:14:43.680

尝试这个：

```
 $(document).ready(function(){
        var name=$("label").attr("name");
    }); 
```

# java - Broadcasteceiver 仅在我使用设备时为 AddProximityAlert() 调用

> ID：16101007
> 
> 赞同：1
> 
> 时间：2013-04-19T09:04:17.193
> 
> 标签：java, android

我正在使用`AddProximityAlert()`. 但`BroadcastReceiver`仅适用于我当前的位置。

```
 private void addProximityAlert() {
       double latitude = Double.parseDouble("23.5918106");
       double longitude = Double.parseDouble("58.2288041");
       Intent intent = new Intent(PROX_ALERT_INTENT);
       PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

       locationManager.addProximityAlert(
           latitude, // the latitude of the central point of the alert region
           longitude, // the longitude of the central point of the alert region
           POINT_RADIUS, // the radius of the central point of the alert region, in meters
           PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration 
           proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected
      );

      IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);  
      registerReceiver(new ProximityIntentReceiver(), filter);
      Toast.makeText(getApplicationContext(),"Alert Added",Toast.LENGTH_SHORT).show();
} 
```

这部分不适用于调用`BroadcastReceiver`：

```
 IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);  
 registerReceiver(new ProximityIntentReceiver(), filter); 
```

# windows - 使用批处理文件中的参数运行命令

> ID：16101013
> 
> 赞同：2
> 
> 时间：2013-04-19T09:04:45.387
> 
> 标签：windows, command-line, batch-file, cmd

假设一个伪命令：

```
 psuedocmd.exe 
```

它具有各种参数，例如：

```
/scan  /save  /savefolder 
```

现在我想使用批处理文件运行 psuedocmd.exe。我也想使用参数。我在批处理文件中使用以下行

```
psuedocmd.exe /scan /save 
```

但在这种情况下，psuedocmd.exe 是在没有参数的情况下运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:27:20.740

尝试将参数放在引号之间`"parameter value"`，特别是如果路径中有空格。

检查批处理文本文件是否未以某种编码保存，从而使您`/`被读取为转义字符。

如果您想通过传递批处理文件中的参数来运行 .exe，请不要使用变量，只需使用 %1、%2 等。

```
run.bat /save /folder 
```

run.bat 的内容是：

```
pseudocommand.exe %1 %2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T00:55:25.420

[呵呵，半年多了，没耐心了。。]

在[Acunetix Web Vulnerability Scanner](http://www.acunetix.com/blog/docs/acunetix-wvs-cli-operation/)`savefolder`中使用参数时，您必须提供该参数，使批处理文件中的该行如下所示： `save`

```
wvs_console.exe /scan "http://www.aaa.com" /save /savefolder "c:\log" 
```

文档摘录：

```
/scan          Scans a single website.
               Syntax: /scan [url]
               Example: /scan http://testphp.vulnweb.com

/save          Saves scan once scan is finished. The file will be 
                 saved in the location specified by the “/savefolder” switch.
               Syntax: /save

/savefolder    Specify the folder were all the scans and other 
                 scan related files will be saved.
               Syntax: /savefolder [directory]
               Example: /savefolder C:\Acunetix\Scans 
```

# winapi - 检测路径为 SkyDrive 路径/Resolve skydrive path to WebDav path

> ID：16101015
> 
> 赞同：1
> 
> 时间：2013-04-19T09:04:56.403
> 
> 标签：winapi, webdav, onedrive, windows-networking

前言：

如果您尝试将文件从任何 Microsoft Office 应用程序保存到 SkyDrive 文件夹，则应用程序（Word 等）将检测到并*切换到通过 WebDAV 的 MS 扩展直接访问 SkyDrive*（保存图标将变为同步图标，您将查看其他用户访问该文件等）

现在，我知道如何将[Windows 驱动器号解析为路径（subst 和网络）](https://stackoverflow.com/questions/1299814/resolve-windows-drive-letter-to-a-path-subst-and-network)，并且想知道我是否可以为 SkyDrive 路径做类似的事情？

即**如何** `C:\Users\MyUsers\SkyDrive\File.doc` **解决** `https://d.docs.live.net/UserId/File.doc`

[SkyDrive API](http://msdn.microsoft.com/en-us/library/live/hh826521.aspx)对此只字未提，我想避免直接与 SkyDrive 客户端混淆。

谢谢！

# spring-mvc - Spring MVC 为 application/octet-stream 提供 HTTP 406

> ID：16101016
> 
> 赞同：3
> 
> 时间：2013-04-19T09:04:59.513
> 
> 标签：spring-mvc, http-headers, httpresponse, http-error

我正在使用 Spring Web MVC 并编写了一个控制器，它将二进制数据返回到显示 3D 内容的网页中的插件。这个插件使用 STK 文件作为它的模型，所以我设置了我的 webapp 来为 *.stk URLs 生成这种内容

springDispatcherServlet 设置为在我的 web.xml 中处理 *.stk 请求

```
<servlet-mapping>
    <servlet-name>springDispatcherServlet</servlet-name>
    <url-pattern>*.stk</url-pattern>
</servlet-mapping> 
```

我的控制器如下所示：

```
@Controller
@RequestMapping(value="/3dobject", produces="application/octet-stream")
public class Object3DController {

    @Autowired
    private DesignerService designerService;

    @RequestMapping(value="/{article}.stk", method=RequestMethod.GET, headers="Accept: application/octet-stream")
    public void getObject3DForArticle(HttpServletResponse response, @PathVariable String article) throws IOException {
        response.setContentType("application/octet-stream");
        Object3D object = designerService.get3DModelForArticleNumber(article, LanguageCode.NORWEGIAN);
        byte[] content = object.getContent();
        response.setContentLength(content.length);
        IOUtils.write(content, response.getOutputStream());
    }
} 
```

当我尝试通过浏览器访问数据时，出现以下错误：

HTTP 状态 406 - 此请求标识的资源只能生成具有根据请求“接受”标头不可接受的特征的响应。

我已将我的应用程序部署到本地主机上的 tomcat 服务器。

关于使浏览器下载二进制数据我必须做什么的任何想法？

PS！我从 *.3do（3d 对象）更改为 *.stk。使用 3do 它按预期工作，但插件失败并出现错误（这很难解释），所以我必须进行试验以验证 URL 扩展是否重要......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:18:07.233

[`RequestMapping.produces()`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#produces%28%29)缩小了请求，因此是

> **仅当Accept**匹配这些媒体类型之一时才映射

所以你需要在来自插件的请求中设置相应的**Accept头。**这不能通过在浏览器中输入 URL 来简单地发出 HTTP GET 请求来完成。我发现对 Chrome 有用的一个插件是[Advanced REST Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo/)。还有很多其他提供类似功能的。或者尝试使用[`cURL`](http://en.wikipedia.org/wiki/CURL)正确的标头发出请求。

# sql - 执行sql查询需要很长时间

> ID：16101017
> 
> 赞同：0
> 
> 时间：2013-04-19T09:05:04.250
> 
> 标签：sql, sql-server-2008

我的查询有这个问题，它真的很慢。我正在使用 MSSQL server 2008 并且有 3 个数据库，其中包含数百个示例数据。该查询将返回名称和值以及基于 3 个 DB 计算的百分比。但是我的查询需要将近 10 分钟才能执行，这确实需要很长时间。我仍在学习 SQL，但仍然不是那么好，所以我认为我的查询没有使用最佳实践并且没有组织。谁能指出我可以在哪里或如何改进我的查询以更快地运行？

```
SELECT data.Ret,
    case 
        when @group_by= 'site' OR (@group_by='attribute' AND @attribute_id = '5') and (data.rowid % 50) = 0 then (data.rowid / 50)-1
        when @group_by= 'site' OR (@group_by='attribute' AND @attribute_id = '5') then (data.rowid / 50) 
        else 0 end as batchStore
        ,data.MajorName,data.MinorName,data.MajorVal,data.MinorVal,data.Version
        ,data.A_Percent,data.T_Percent,data.F_Percent
from 
(
    SELECT report.Ret,
        CASE when @group_by= 'site' OR (@group_by='attribute' AND @attribute_id = '5') 
        then row_number() over (PARTITION BY report.Ret,report.Version order by report.Ret, report.MajorName)
        else 0 end  as rowid
        ,report.MajorName,report.MinorName,report.MajorVal,report.MinorVal,report.Version
        ,report.GTotal_A,report.GTotal_T,report.GTotal_F
        ,ISNULL(sum(report.Abn) / NULLIF(cast(report.GTotal_A as decimal),0),0) * 100 as A_Percent
        ,ISNULL(sum(report.Trn) / NULLIF(cast(report.GTotal_T as decimal),0),0) * 100 as T_Percent
        ,ISNULL(sum(report.Fld)/ NULLIF(cast(report.GTotal_F as decimal),0) * 100,0) as F_Percent
    From 
    (
        Select
            CASE @group_by
            WHEN 'object' THEN csl.s_name
            WHEN 'site' THEN csl.s_name
            WHEN 'year' THEN CAST(YEAR(dy.Day_Stamp) AS VARCHAR(50))
            WHEN 'attribute' THEN CAST(coalesce(attrib.AttributeName,'') AS VARCHAR(50))
            ELSE ''
            END as MajorName,
            CASE @group_by
            WHEN 'object' THEN l.l_name
            WHEN 'site' THEN ''
            WHEN 'attribute' THEN CAST(coalesce(attrib.AttributeName,'') AS VARCHAR(50))
            ELSE ''
            END as MinorName,
            CASE @group_by
            WHEN 'object' THEN csl.s_name
            WHEN 'site' THEN csl.s_name
            WHEN 'year' THEN CAST(YEAR(dy.Day_Stamp) AS VARCHAR(50))
            WHEN 'attribute' THEN CAST(coalesce(attrib.AttributeValue,'') AS VARCHAR(50))
            ELSE ''
            END as MajorVal,
            CASE @group_by
            WHEN 'object' THEN l.l_name
            WHEN 'site' THEN ''
            WHEN 'attribute' THEN CAST(coalesce(attrib.AttributeValue,'') AS VARCHAR(50))
            ELSE ''
            END as MinorVal,
            csl.Cust_Name as Ret,l.SWVersion as Version
            ,d.Abn,d.Trn,d.Fld,data.GTotal_A ,data.GTotal_T,data.GTotal_F
        From db_mon.dbo.CustSL csl
            join db_tax.dbo.vwLane l 
                on (l.externalid = csl.custsl_id)
            join db_mon.dbo.DaySummary dy 
                on (dy.Str = csl.s_name and dy.Lne = csl.l_name and year(dy.day_stamp) = year(@time_start_date) and year(dy.day_stamp) =year(@time_end_date))
            Left Outer Join
                (
                    Select a.id As AttributeId, a.attribute_name As AttributeName,
                    (Case When a.attribute_value_type = 'string' Then ea.string_value
                        Else (Case When a.attribute_value_type = 'integer' Then cast(ea.integer_value as nvarchar(100))
                            Else (Case When a.attribute_value_type = 'date' Then cast(ea.date_value as nvarchar(100))
                                Else (Case When a.attribute_value_type = 'boolean' Then cast(ea.boolean_value as nvarchar(100))
                                    Else (Case When a.attribute_value_type = 'entity' Then cast(ea.ref_entity_id as nvarchar(100)) Else null End)
                                    End)
                                End)
                            End)
                        End) As AttributeValue,
                     e.id As EntityId
                     From db_tax.dbo.entity_type et
                     Inner Join db_tax.dbo.entity As e on et.id = e.entity_type_id
                     Inner Join db_tax.dbo.entity_attribute As ea on e.id = ea.entity_id
                     Inner Join db_tax.dbo.attribute As a on ea.attribute_id = a.id
                     WHERE et.entity_type_name in ('Sticker','Label') And
                     a.id = (case WHEN @attribute_id = '' then 1 else cast(@attribute_id as int) end)
                ) AS attrib 
                    On attrib.EntityId = l.L_Id
             inner join db_mon.dbo.DaySummary d 
                on (csl.Cust_Name = d.Ret and csl.s_name = d.stckr and csl.l_name = d.label and l.SWVersion = d.Version)
             join ( 
                SELECT Ret,version,sum(Abn) as GTotal_A,sum(Trn) as GTotal_T,sum(Fld) as GTotal_F
                from db_mon.dbo.DaySummary
                where day_stamp >= @time_start_date and day_stamp <=@time_end_date
                GROUP BY Ret,version   
             ) data 
                on (d.Ret = data.Ret and l.SWVersion = data.Version)
        WHERE (CHARINDEX(',' + CONVERT(VARCHAR,l.S_Id) + ',','xxx,' + @entities + ',xxx')>0 OR CHARINDEX(',' + CONVERT(VARCHAR,l.L_Id) + ',','xxx,' + @entities + ',xxx')>0)
        and d.day_stamp >= @time_start_date 
        and d.day_stamp <=@time_end_date
    ) As report
Group By report.Ret,report.Version,report.MajorName,report.MinorName,report.MajorVal,report.MinorVal
,report.GTotal_A,report.GTotal_T,report.GTotal_F
)data
order By data.Ret,data.Version,batchStore,data.MajorName,data.MinorName,data.MajorVal,data.MinorVal 
```

使用大量连接会导致执行缓慢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:42:40.437

SUB Select 查询总是比正确的连接慢。

您正在运行 3 个子选择深度。无论更改索引等如何，这都会影响您的性能。

您需要重写整个内容以停止使用子选择。

# bash - 将 shell 的工作目录设置为 vim 中打开的当前文件

> ID：16101019
> 
> 赞同：4
> 
> 时间：2013-04-19T09:05:09.327
> 
> 标签：bash, vim, cygwin, working-directory

我正在使用 Windows gVim，我正在尝试调用命令以在 cygwin 的 bash 上运行。它正在工作，但工作目录每次都设置为 $HOME。是否可以设置为当前文件的目录？

我在我的以下行`.vimrc`：

```
set shell=C:/cygwin/bin/bash
set shellcmdflag=--login\ -c
set shellxquote=\" 
```

我的 中有以下几行`.profile`：

```
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
    . "$HOME/.bashrc"
    fi
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:32:30.820

我认为这样`--login`做；删除该参数，shell 将在 GVIM 的当前目录中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:10:42.870

您可以将当前文件的目录传递给外部命令，如下所示：

```
:!ls %:p:h 
```

见`:h filename-modifiers`和可能`:h shellescape()`。

# php - 获取多维数组中的值详细信息

> ID：16101021
> 
> 赞同：-3
> 
> 时间：2013-04-19T09:05:11.357
> 
> 标签：php, multidimensional-array

我需要一些帮助来获取 php 中多维数组中基于日期的数组元素。

这是我的数组：

```
Array ( [0] => Array ( [DOS] => Apr 2 2013 [Name] => Abc Starling [No] => 15616286[Duration] => 135 ) 
        [1] => Array ( [DOS] => Apr 2 2013 [Name] => Cde Starling [No] => 15616286[Duration] => 585 ) 
        [2] => Array ( [DOS] => Apr 3 2013 [Name] => Sdf Starling [No] => 15616286[Duration] => 123 )
        [3] => Array ( [DOS] => Apr 3 2013 [Name] => Sdc Starling [No] => 15616286[Duration] => 456 ) 
        [4] => Array ( [DOS] => Apr 4 2013 [Name] => Fcd Starling [No] => 15616286[Duration] => 789 )
        [5] => Array ( [DOS] => Apr 4 2013 [Name] => Rfd Starling [No] => 15616286[Duration] => 906 ) 
        [6] => Array ( [DOS] => Apr 5 2013 [Name] => Vfd Starling [No] => 15616286[Duration] => 567 )
        [7] => Array ( [DOS] => Apr 6 2013 [Name] => Gfr Starling [No] => 15616286[Duration] => 456 ) 
        [8] => Array ( [DOS] => Apr 6 2013 [Name] => Dvh Starling [No] => 15616286[Duration] => 343 )) 
```

我想要`Apr 3 2013`这一天的输出：

```
Array ( [0] => Array ( [DOS] => Apr 3 2013 [Name] => Sdf Starling [No] => 15616286[Duration] => 123 )
        [1] => Array ( [DOS] => Apr 3 2013 [Name] => Sdc Starling [No] => 15616286[Duration] => 456 )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:14:39.663

尝试[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)：

```
$source=array(array("DOS"=>"Apr 3 2013","flag"=>"hit"),array("DOS"=>"Apr 4 2013","flag"=>"no hit"),array("DOS"=>"Apr 3 2013","flag"=>"hit"));
$cond="Apr 3 2013";
$result=array_filter($source,function($v)use($cond){
    return $v["DOS"]==$cond;
});
print_r($result); 
```

[现场演示](http://3v4l.org/Q09XY#v530)

* * *

编辑：[您的阵列上的现场演示](http://3v4l.org/4Su0B#v530)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:15:04.557

```
foreach($arr as $key=>$val){
if($key['DOS'] =='Apr 3 2013'){
print_r($arr[$key]);
}
} 
```

# xml - 如何使用 xslt 将嵌套的 xml 表转换为平面表

> ID：16101025
> 
> 赞同：0
> 
> 时间：2013-04-19T09:05:34.910
> 
> 标签：xml, xslt

我有一个xml文件

```
<xml>
  <order>
    <orderid>123</orderid>
    <orderdate>2013-04-12T00:00:00.000+01:00</orderdate>
    <orderline>
      <articlename>AAAA</articlename>
      <quantity>10</quantity>
    </orderline>
    <orderline>
      <articlename>BBBB</articlename>
      <quantity>15</quantity>
    </orderline>
  </order>
  <order>
    ...
    </order>
</xml> 
```

我需要使用 XSLT 将其转换为：

```
<xml>
  <item>
    <orderid>123</orderid>
    <articlename>AAAA</articlename>
    <quantity>10</quantity>
  </item>
  <item>
    <orderid>123</orderid>
    <articlename>BBBB</articlename>
    <quantity>15</quantity>
  </item>
</xml> 
```

`<xsl:call-template>`我已经尝试使用and进行一些转换`<xsl:apply-templates>`，但对我没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:59:13.400

这个简单的样式表应该可以做到：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!--
  Identity transform:
  http://en.wikipedia.org/wiki/Identity_transform#Using_XSLT 
  -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="orderline">
    <item>
      <!--
      Apply preceding <orderid> sibling and the children of the current element
      -->
      <xsl:apply-templates select="preceding-sibling::orderid | node()"/>
    </item>
  </xsl:template>

  <xsl:template match="order">
    <!--
    Only apply <orderline> children, <orderdate> is dropped and <orderid> is
    handled by the template above
    -->
    <xsl:apply-templates select="orderline"/>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<xml>
  <order>
    <orderid>123</orderid>
    <orderdate>2013-04-12T00:00:00.000+01:00</orderdate>
    <orderline>
      <articlename>AAAA</articlename>
      <quantity>10</quantity>
    </orderline>
    <orderline>
      <articlename>BBBB</articlename>
      <quantity>15</quantity>
    </orderline>
  </order>

  <!-- Added additional <order> element for demonstration -->
  <order>
    <orderid>456</orderid>
    <orderdate>2014-05-13T00:00:00.000+02:00</orderdate>
    <orderline>
      <articlename>CCCC</articlename>
      <quantity>20</quantity>
    </orderline>
    <orderline>
      <articlename>DDDD</articlename>
      <quantity>25</quantity>
    </orderline>
  </order>
</xml> 
```

### 输出

```
<?xml version="1.0" encoding="utf-8"?>
<xml>
  <item>
    <orderid>123</orderid>
    <articlename>AAAA</articlename>
    <quantity>10</quantity>
  </item>
  <item>
    <orderid>123</orderid>
    <articlename>BBBB</articlename>
    <quantity>15</quantity>
  </item>
  <item>
    <orderid>456</orderid>
    <articlename>CCCC</articlename>
    <quantity>20</quantity>
  </item>
  <item>
    <orderid>456</orderid>
    <articlename>DDDD</articlename>
    <quantity>25</quantity>
  </item>
</xml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:32:26.007

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <xml>
         <xsl:for-each select="//order/orderline">
        <item>
           <orderid><xsl:value-of select="//orderid" /></orderid>
             <articlename><xsl:value-of select="articlename" /></articlename>
             <quantity><xsl:value-of select="quantity" /></quantity> 
         </item>
            </xsl:for-each>

  </xml>
</xsl:template>
</xsl:stylesheet> 
```

# excel - COUNTIF 或 AVERAGEIF 的替代方案

> ID：16101030
> 
> 赞同：0
> 
> 时间：2013-04-19T09:05:50.803
> 
> 标签：excel, countif

我正在尝试解决一个限制我使用 COUNTIF 或 AVERAGEIF 的问题。问题如下：

在不使用 COUNTIF 或 AVERAGE IF 的情况下，您将如何汇总数据并绘制关于字数与回复率的图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T04:38:59.280

如果您正在寻找*字数*，那么您可能会认为单词之间用空格隔开。短语/句子的长度减去删除空格的相同短语/句子的长度将比单词数少一。

```
=len(A1)-len(substitute(A1, " ", ""))+1 
```

听起来它应该涵盖您作业的第一个范围。您必须提供一些关于*回复率*的附加说明。

# sql-server - 按年显示数据 + 水平格式

> ID：16101033
> 
> 赞同：0
> 
> 时间：2013-04-19T09:06:03.217
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在使用 SQLServer2008。

下面是我的存储过程

```
DECLARE @planTable TABLE
(
  Year VARCHAR(20) ,
  PlanTypeId INT
)

INSERT  INTO @planTable
    ( Year ,
      PlanTypeId 
    )
    ( SELECT DISTINCT
                pm.Year ,
                ptm.PlanTypeId
      FROM      dbo.PlanMaster AS pm
                INNER JOIN dbo.PlanTypeMaster AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
    )

DECLARE @tmp TABLE
(
  BrokerCode VARCHAR(20) ,
  Year VARCHAR(20) ,
  PlanType VARCHAR(20) ,
  Amount DECIMAL(18, 2)
)

DECLARE @Year VARCHAR(20)
DECLARE @PlanTypeId INT
DECLARE c1 CURSOR READ_ONLY
FOR
SELECT pt.Year,pt.PlanTypeId FROM @planTable AS pt
OPEN c1

FETCH NEXT FROM c1
INTO  @Year,@PlanTypeId

WHILE @@FETCH_STATUS = 0 
BEGIN

    INSERT  INTO @tmp
            ( BrokerCode ,
              Year ,
              PlanType ,
              Amount
            )
            ( SELECT    ( SELECT    bm.BrokerCode
                          FROM      dbo.BrokerMaster AS bm
                          WHERE     BrokerId = 30
                        ) ,
                        @Year ,
                        ( CASE WHEN ( SELECT    ptm.IsSingleInstallment
                                      FROM      dbo.PlanTypeMaster AS ptm
                                      WHERE     ptm.PlanTypeId = @PlanTypeId
                                    ) = 'true' THEN 'Single'
                               WHEN ( SELECT    ptm.IsSingleInstallment
                                      FROM      dbo.PlanTypeMaster AS ptm
                                      WHERE     ptm.PlanTypeId = @PlanTypeId
                                    ) = 'false' THEN 'Multiple'
                          END ) ,
                        ISNULL(( SUM(SelfAmount) + SUM(UnitAmount) ), 0)
              FROM      dbo.MemberBusiness AS mb
                        INNER JOIN dbo.PlanMaster AS pm ON mb.PlanId = pm.PlanId
                        INNER JOIN dbo.PlanTypeMaster AS ptm2 ON pm.PlanTypeId =    ptm2.PlanTypeId
              WHERE     mb.BrokerId = 30
                        AND pm.Year = @Year
                        AND ptm2.PlanTypeId = @PlanTypeId
            )

    FETCH NEXT FROM c1
INTO  @Year,@PlanTypeId

END
CLOSE c1
DEALLOCATE c1

SELECT  *
FROM    @tmp 
```

这个存储过程的结果是这样的

```
----------------------------------------------------
  BrokerCode  |   Year  |   PlanType  |  Amount    |
----------------------------------------------------
    102       |    1    |   Single    |   100      |
----------------------------------------------------
    102       |    2    |   Single    |   200      |
----------------------------------------------------
    102       |    3    |   Single    |   300      |
----------------------------------------------------
    102       |    1    |   Multiple  |   100      |
----------------------------------------------------
    102       |    2    |   Multiple  |   200      |
----------------------------------------------------
    102       |    3    |   Multiple  |   300      | 
```

现在我想得到这样的结果..

```
------------------------------------------------------------------------------------
                          Single             |         Multiple                    |
-------------------------------------------------------------------------------------
BrokerCode |     1    |     2    |     3     |     1      |     2      |     3     |  
------------------------------------------------------------------------------------
   102     |   100    |   200    |    300    |    100     |    200     |    300    |
------------------------------------------------------------------------------------ 
```

我怎样才能得到这样的结果？

# java - 通过套接字流式传输时计算 MediaRecorder 的实时传输速率

> ID：16101034
> 
> 赞同：1
> 
> 时间：2013-04-19T09:06:04.027
> 
> 标签：java, android, mediarecorder

我正在使用 MediaRecorder 捕获用户的语音并通过 Wi-Fi 套接字连接以 AMR-WB 格式对其进行流式传输：

`mediaRecorder.setOutputFile(ParcelFileDescriptor.fromSocket(socket).getFileDescriptor());`

我想在屏幕上显示传输速率，我正在寻找实现这一点的最佳方法。我自己可以想到两种解决方案：

*   创建一个 LocalSocket-LocalServerSocket 循环并使用缓冲区传输数据。这可能会增加不必要的延迟并增加性能开销。
*   根据编解码器的特性计算传输数据。例如，（每个样本的大小）*（每秒样本数）。此解决方案不适用于具有随机延迟的网络或具有可变编码率的编解码器。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:33:20.477

`ParcelFileDescriptor.createPipe()`将为您创建一个管道。

然后，您可以写入管道并计算从另一端读取的字节数，然后再将它们流式传输到以太......

# c# - LINQ 中的嵌套 GroupBy 扩展方法

> ID：16101035
> 
> 赞同：2
> 
> 时间：2013-04-19T09:06:05.360
> 
> 标签：c#, .net, linq

有人可以给我看一个嵌套 GroupBy 扩展方法的简单示例吗？我正在尝试将一个对象分组到一个列表中。我认为它看起来像这样：

//代码

```
List<stats> myStats = GetStatsList().GroupBy( d => d.date).GroupBy(t => t.team)
        Select(s => new stats
  {
        Date = 
        Team = 
 }).AsEnumerable().ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:07:04.130

那这个呢：

```
 List<stats> myStats = GetStatsList()
                            .GroupBy(s => new { s.date, s.team })
                            .Select(g => new stats { Date = g.Key.date , Team = g.Key.team})
                            .AsEnumerable()
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:12:17.467

我假设你想要这个：

```
List<stats> myStats = GetStatsList()
    .GroupBy(s => new{ s.Date, s.Team})
    .Select(g => new stats
      {
            Date = g.Key.Date,
            Team = g.Key.Team,
     }).ToList(); 
```

我按匿名类型和您想在不同`GroupBy`s 中使用的两个属性进行分组。然后我可以通过`Group.Key.PropertyName`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:14:33.937

```
var myStats = (from s in GetStatsList()
               group by new { Date = s.date, Team = s.team} into g
               select g.Key).ToList(); 
```

请注意，这为您提供了`List<T>`其中 T 是匿名类型的位置——这可能就足够了。如果您明确需要一个列表，那么：

```
var myStats = (from s in GetStatsList()
               group by new { s.date, s.team} into g
               select new stat { Date = g.Key.date, Team = g.Key.team}).ToList(); 
```

# java - 使用 Hadoop 解析日志文件

> ID：16101036
> 
> 赞同：0
> 
> 时间：2013-04-19T09:06:10.927
> 
> 标签：java, hadoop

我是hadoop的新手。我进行了设置并执行了基本的字数统计 java 程序。结果看起来不错。

我的问题是可以使用 map/reduce 类解析一个非常大的日志文件以仅获取几行所需的行吗？还是需要其他步骤？

在这个方向上的任何指针都将非常有用。谢谢， 阿尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:32:59.930

是的，这完全有可能，如果文件足够大，我相信 hadoop 可以证明是解决它的好方法，尽管 nhahtdh 说了什么。

您的映射器可以简单地充当过滤器 - 检查传递给它们的值，只有当它们符合所需行的条件时，您才能完成`context.write()`它。

您甚至不需要编写自己的减速器，只需使用类`reduce()`中的默认值即可`Reducer`。

# css - 我无法将我的 html 控件与 html 表中的右侧对齐

> ID：16101042
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:06:49.957
> 
> 标签：css, html, jquery-mobile, html-table

我的要求是我想在表格单元格中将我的单选按钮对齐到左侧，但下面的代码没有发生这种情况：

我的代码

```
<div data-role="collapsible" data-theme="b" data-content-theme="b">
    <h3>Action</h3>
    <table class="tabledata" width="100%">
        <tr>
            <td class="td1">
                <p>
                    <input id="Radio1" type="radio" value="Approve" /></p>
            </td>
            <td class="td2">Approve</td>
        </tr>
        <tr>
            <td>
                <input id="Radio2" type="radio" /></td>
            <td class="td2">Reject</td>
        </tr>
        <tr>
            <td>
                <input id="Radio3" type="radio" />
            </td>
            <td class="td2">Send Back to Requestor</td>
        </tr>
        <tr>
            <td>Amount Approved for Domestic sector : </td>
            <td>
                <input id="Text1" type="text" /></td>
        </tr>
        <tr>
            <td>Remarks : </td>
            <td>
                <input id="Text2" type="text" /></td>
        </tr>
        <tr>
            <td class="tabledata">
                <input id="Button1" type="button" value="Submit" />
            </td>
        </tr>
    </table>
</div> 
```

我的 CSS 类：

```
.td1 {
    vertical-align:middle;
    text-align:right;
}

.td2 {
    text-align: left;
} 
```

实际上，我想通过组合 2 列和居中对齐来将我的单选按钮及其相应的文本保留在表行中，并且提交按钮应该在表行中居中对齐，因为我使用的是 jquery 移动数据角色，我想这不会发生。请帮我看看。

在头中添加脚本后，我也得到以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/NKGvJ.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:21:57.483

新的 CSS：

```
tr td:nth-child(1) {
   vertical-align:middle;
   text-align:right;
} 
```

[http://jsfiddle.net/yHbdn/1/](http://jsfiddle.net/yHbdn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:28:44.663

`ui-radio`从每个单选按钮中删除类。

```
$('[type=radio]').each(function () {
 $(this).closest('div').removeClass('ui-radio');
}); 
```

`td1`并为每个单选按钮添加类。

```
<tr>
 <td class="td1">
  <input id="Radio1" type="radio" value="Approve" />
 </td>
 <td class="td2">Approve</td>
</tr>
<tr>
 <td class="td1">
  <input id="Radio2" type="radio" />
 </td>
 <td class="td2">Reject</td>
</tr>
<tr>
 <td class="td1">
  <input id="Radio3" type="radio" />
 </td>
 <td class="td2">Send Back to Requestor</td>
</tr> 
```

**[演示](http://jsfiddle.net/Palestinian/63GyZ/)**

* * *

> **替代方法：**不需要 jQuery 代码，也不需要自定义 CSS 样式。[在此处](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/radiobuttons)阅读更多相关信息。

为什么不使用样式单选按钮，如下面的演示所示。

**[选择](http://jsfiddle.net/Palestinian/vhwqw/)**

# ios - 控制 iOS gps 输入

> ID：16101051
> 
> 赞同：6
> 
> 时间：2013-04-19T09:07:04.170
> 
> 标签：ios, gps, maps

我的 iPhone GPS 有问题；我正在尝试记录一条不在街道上的轨道，但每次我经过街道附近时（请看随附的图像），在我看来，gps 输出似乎已用地图数据进行了校正；有没有办法禁用这种行为？我需要我的应用程序中的精确点

![从 iphone 跟踪](https://i.stack.imgur.com/hDPjM.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-06T16:23:13.573

为避免“捕捉到道路”功能，请将 设置`activityType`为`CLActivityTypeOtherNavigation`。activityType 的所有其他值（Other、Fitness、AutoNav）将捕捉到最近的道路。

这是我们最近从 WWDC 的一位 Apple 工程师那里得到的建议。我们还验证了这一点（在 iOS 7.1.2 上），使用了 4 台 iPhone 5 设备（每个 activityType 一个，外加一个 Trimble GPS 以供参考）并在公路上和非公路上进行广泛的测试（见下图）。

我们还没有在 iOS 8 上测试过，这种行为可能会改变，因为它是无证的。

注意：如果您的应用中有多个 的实例`CLLocationManager`，则必须将它们设置为相同的`activityType`. 如果它们有不同的值，那么第一个开始的值可能决定它们的行为方式，我们也遇到了问题。 `MKMapView`例如，创建自己`CLLocationManager`的 .

这是我们的测试结果示例。橙色线是`CLActivityTypeOtherNavigation`，蓝色、绿色和红色是其他 3 种活动类型。您可以看到蓝色、绿色和红色沿着道路的中心线，而橙色线使用原始 GPS 位置。

![在此处输入图像描述](https://i.stack.imgur.com/MEb1q.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:07:44.307

你的帖子让我震惊，我立即在我的应用程序上试用了它。
在使用 Apple MKMapKit 的 ios6 上，位置不会捕捉到附近的街道。至少不是标准设置。（在 ios5 上都没有）

我想知道该应用程序如何能够捕捉到下一条街道，我知道如何做到这一点，但 Apple 无法提供矢量数据。

那么请您与应用程序的软件开发人员谈谈他们如何适应下一条道路？（使用 OpenStreetMap 矢量数据可以工作，但 Apple 使用不公开的 TomTom 矢量数据）

# php - 用于自我馈送的 Instagram 身份验证？

> ID：16101054
> 
> 赞同：0
> 
> 时间：2013-04-19T09:07:05.603
> 
> 标签：php, instagram

我正在尝试从我的 Instagram-Feed 获取照片，但每次我都必须登录我的 Authentication-Popup，尽管我使用来自 DB 的访问令牌

```
//FIRST TIME
$array = array(
        'client_id'=>'XXX',
        'client_secret' => 'XXX',
        'grant_type' => 'authorization_code',
        'redirect_uri' => REDIRECT_URL,
        'code' => $_GET['code']
        );

    curl_setopt($ch,CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch,CURLOPT_POSTFIELDS, $array);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
    $res = curl_exec($ch);
    $access_token = $res['access_token'];

    //SAVE ACCESS_TOKEN INTO DB 

    //NEXT TIME
    $url = 'https://api.instagram.com/v1/users/self/feed?access_token='.$db['access_token'].'&client_id='.$array['client_id'].'&client_secret='.$array['client_secret'];
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_HTTPGET, 1); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
    $res = curl_exec($ch); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:39:23.083

抱歉，上面的行中有错误。`code`我每次都请求，这个重定向向我显示了登录表单。

**前：**

```
if(!isset($_GET['code'])) {
    header('location: https://api.instagram.com/oauth/authorize/?client_id=xxx&redirect_uri='.REDIRECT_URL.'&response_type=code');
}else{
    $url = 'https://api.instagram.com/oauth/access_token/';
    // ... 
```

**后：**

```
if(!isset($_GET['code']) && !isset($access_token) ) {
    header('location: https://api.instagram.com/oauth/authorize/?client_id=xxx&redirect_uri='.REDIRECT_URL.'&response_type=code');
}else{
    $url = 'https://api.instagram.com/oauth/access_token/';
    // ... 
```

现在它工作正常。

# javascript - 小脚本上的 JavaScript 错误

> ID：16101055
> 
> 赞同：0
> 
> 时间：2013-04-19T09:07:07.330
> 
> 标签：javascript, greasemonkey

我正在尝试编写一个小的 Greasemonkey 脚本来更改页面上出现的一些元素的值（通过 DOM 修改）。

我只是一个 Greasemonkey 用户，我没有 JavaScript 经验。我收到此错误：（`the expression is not a legal expression.`行：结果 =...）

我也想知道是否还有需要更正的错误。

这是我的脚本：

```
// ==UserScript==
// @name        myscript
// @namespace   http://www.google.com
// @include     http://mysite/
// @version     1
// @grant       GM_addStyle
// ==/UserScript==

function waitForKeyElements (selectorTxt, actionFunction) {
    if (getElementByXPath(selectorTxt) == null) {
       var timeControl = setInterval (function () {
                    waitForKeyElements (selectorTxt, actionFunction);
                },
                300
            );
    } else {
        clearInterval (timeControl);
        actionFunction();
    }
}

var getElementByXPath = function (path) {
  result = document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
  return result.singleNodeValue;
};

function myFunc (jNode) {
    getElementById("foo1").setValue("foo2");
}

waitForKeyElements ("foo3", myFunc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:02:33.740

它抱怨 的值`path`不是有效的 XPath 选择器。从我所见，您传递的值`foo3`意味着一个标签`<foo3>`- 可能不是您想要的。`//*[@id='foo3']`改为尝试，请参阅[http://ejohn.org/blog/xpath-css-selectors/](http://ejohn.org/blog/xpath-css-selectors/)以获取更多 xpath 示例。

# android - 位置按钮没有将我指向我在谷歌地图 api v2 中的位置

> ID：16101056
> 
> 赞同：0
> 
> 时间：2013-04-19T09:07:11.097
> 
> 标签：android, gps, maps, location

谷歌地图显示完美，googleplayservices 也存在，但我右上角的位置按钮在谷歌地图 api v2 中不起作用，我的 wifi 和 gps 都打开了。请帮助。我正在我的手机上测试它。我不知道为什么它不起作用

**mainActivity.java**

```
package com.example.mapexample;

import android.app.Dialog;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.util.Log;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity{

    final int RQS_GooglePlayServices = 1;
    private GoogleMap myMap;
    private LocationManager locationManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         // Do a null check to confirm that we have not already instantiated the map.
        if (myMap == null) {

            myMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
  // Check if we were successful in obtaining the map.
            if (myMap != null) {
                // The Map is verified. It is now safe to manipulate the map.
                setUpMap();
            }
        }

    }

    @Override
     protected void onResume() {
      // TODO Auto-generated method stub
      super.onResume();

      int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

      if (resultCode == ConnectionResult.SUCCESS){
       Toast.makeText(getApplicationContext(), 
         "isGooglePlayServicesAvailable SUCCESS", 
         Toast.LENGTH_LONG).show();
      }else{
       GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);
      }

     }

    private void setUpMap(){
        myMap.setMyLocationEnabled(true);

    }

} 
```

mainifest 文件在这里具有适当的权限。 **主要节日**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapexample"
    android:versionCode="1"
    android:versionName="1.0" >

    <permission
        android:name="com.example.mapexample.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.mapexample.permission.MAPS_RECEIVE" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library
            android:name="com.google.android.maps"
            android:required="true" />

        <activity
            android:name="com.example.mapexample.MainMenuActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.example.mapexample.MainActivity">
         </activity>
         <activity
            android:name="com.example.mapexample.ATMlist">
         </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MY KEY HERE" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T18:54:41.873

尝试在位置访问设置中关闭 GPS 卫星。如果已启用但无法到达 GPS，则我的位置按钮会静默失效；通过将其关闭，它显然会强制该功能使用网络提供商。

# c++ - 为什么 std::abs 返回有符号类型

> ID：16101062
> 
> 赞同：14
> 
> 时间：2013-04-19T09:07:37.607
> 
> 标签：c++, unsigned, signed, gcc-warning

当我将 a`std::abs(int)`与`unsigned`. 实际上，`std::abs`返回有符号值。为什么会做出这样的选择？它将解决负值的绝对值不能用有符号类型表示的问题。

然后，有没有比这更干净的东西（即没有演员表）以避免警告？

```
#include <cassert>
#include <cstdlib>

// max(1, lhs + rhs). (lhs must be > 0)
unsigned add(unsigned lhs, int rhs)
{
  return
    (0 < rhs || static_cast<unsigned>(-rhs) < lhs
     ? rhs + lhs
     : 1);
}

int main()
{
  assert(add(42, -41) == 1);
  assert(add(42, 0) == 43);
  assert(add(42, 1) == 43);
  assert(add(42, -51) == 1);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T09:24:50.990

简短的回答是这样做是为了使其返回类型`abs`与其输入类型相同。大多数时候，这正是您想要的。

大多数情况下，当调用 abs 时，您正在处理一个方程，其中所有元素都属于同一类型（或者您会收到警告），并且您希望在该方程中使用某个变量的大小。这并不意味着您要更改方程式中某个变量的类型。这会给出你提到的那种问题/警告。

因此，简而言之，在要求有符号变量的绝对值时，想要相同的输入和输出类型更为常见和自然。价值的大小通常不用作指标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:15:10.237

那不是选择，那是定义。abs 是通过模板实现的，该模板返回存储原始值的类型。结果将始终有效，因为有符号整数的绝对值始终适合其原始数据类型。对目标数据类型的显式转换应该足以消除任何警告......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T09:41:06.647

在 c++11 中，您可以编写自己的代码来自动转换：

```
#include <utility>

template< typename T >
typename std::make_unsigned<T>::type  abs( T x )
{
    //We need to cast before negating x to avoid the overflow.
    return x < 0? -static_cast<std::make_unsigned<T>::type>(x) : x;
} 
```

我尝试使用 -Wall 选项，没有收到任何警告。

# java - Removing null elements and keeping non-null elements together on a list in jasper reports

> ID：16101068
> 
> 赞同：0
> 
> 时间：2013-04-19T09:08:06.420
> 
> 标签：java, jasper-reports, ireport

I am using JRBeanCollectionDataSource as datasource for a subreport. Each record in the list contains elements with either null or non-null value . This is my POJO:

```
public class PayslipDtl {

        private String earningSalaryHeadName;
        private double earningSalaryHeadAmount;

        private String deductionSalaryHeadName;
        private double deductionSalaryHeadAmount;

        String type;

public PayslipDtl(String salaryHeadName,
            double salaryHeadAmount, String type) {
        if(type.equalsIgnoreCase("Earning")) {
            earningSalaryHeadName = salaryHeadName;
            earningSalaryHeadAmount = salaryHeadAmount;
         } else { 
            deductionSalaryHeadName = salaryHeadAmount;
            deductionSalaryHeadAmount = salaryHeadAmount;
        }
    }

        //getters and setters
        } 
```

Based on the "type", the list is populated as such: {"Basic", 4755, null, 0.0}, {"HRA", 300, null, 0.0}, {null, 0.0, "Employee PF", 925}, {"Medical Allowance", 900, null, 0.0} and so on...

After setting isBlankWhenNull to true and using "Print when" expression, the record is displayed as such:

```
|Earning            |Amount|Deduction            |Amount|
--------------------|------|---------------------|------|
| Basic             | 4755 |                     |      |
| HRA               | 300  |                     |      |
|                   |      | Employee PF         |  925 |
| Medical Allowance | 900  |                     |      |
| Fuel Reimbursement| 350  |                     |      |
|                   |      | Loan                | 1000 |
--------------------------------------------------------- 
```

I want it to be displayed as such:

```
|Earning            |Amount|Deduction            |Amount|
--------------------|------|---------------------|------|
| Basic             | 4755 |  Employee PF        |  925 |
| HRA               | 300  |  Loan               | 1000 |
| Medical Allowance | 900  |                     |      |
| Fuel Reimbursement| 350  |                     |      |
--------------------------------------------------------- 
```

Setting isRemoveLineWhenBlank to true doesn't work since it is not the entire row which is blank but only a subset of elements of a row that is null.

Is it possible in Jasper?

I am using iReport Designer 5.0.1 with compatibility set to JasperReports3.5.1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:40:01.473

Use a List component for the deduction/amount, [here](http://www.youtube.com/watch?v=Hl_VyvpaiCo) you have a video tutorial on how to do this.

Then deduction and amount fields on the list component need the following options Blank when null and Remove line when blank.

If this still gives you blank lines, try putting both fields on a frame inside the list and mark those options for the frame too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T14:25:01.647

只有一个好的解决方案是，您必须创建单独的表：

```
table employeeED:
srno int,
Earning varchar(50),
EarnAmount Double,
Deduction varchar(50)
DedAmount Double 
```

然后你必须在收入方面插入所有收入并在扣除方面更新所有扣除。

```
 int i=1;
    rs.first();
    while(rs.next())
    {
         if(rs.getString("type").equals("Earning"))
            Insert into employeeEd (srno, Earning,EarnAmount) values     (i, rs('earning'), rs('eamt'))
    }

    int j=1;
    rs.first();
    while(rs.next())
    {
        if(rs.getString("type").equals("deduction"))
           update employeeEd set Deductions='"+rs('earning')+"',  DedAmount=" + rs('eamt') + " where srno="+j)
        j++;
    } 
```

然后使用employeeED 表作为数据源。100% 工作。

# spring - 即使请求超时，spring MVC Callable 执行也会继续？

> ID：16101069
> 
> 赞同：2
> 
> 时间：2013-04-19T09:08:10.913
> 
> 标签：spring, spring-mvc, asynchronous

我有一个像这样的异步处理程序方法

```
@RequestMapping("/custom-timeout-handling")
public @ResponseBody WebAsyncTask<String> callableWithCustomTimeoutHandling() {

    Callable<String> callable = new Callable<String>() {

        public String call() throws Exception {
            while(i==0){
            System.out.println("inside while loop->");
            }

            return "Callable result";
        }
    };

    return new WebAsyncTask<String>(10000, callable);
} 
```

这将执行while循环，直到指定的超时（10秒）。

当请求超时时，从 TimeoutCallableProcessingInterceptor 执行 handleTimeout 方法

```
public class TimeoutCallableProcessingInterceptor extends CallableProcessingInterceptorAdapter {

@Override
public <T> Object handleTimeout(NativeWebRequest request, Callable<T> task) throws Exception {
    throw new IllegalStateException("[" + task.getClass().getName() + "] timed out");
} 
```

}

[来源](http://github.com/SpringSource/spring-mvc-showcase/blob/master/src/main/java/org/springframework/samples/mvc/async/CallableController.java#L13)：我已经换了

```
Thread.sleep(2000) 
```

和

```
while(i==0){
System.out.println("inside while loop->");
} 
```

我的问题是即使在超时（完成执行句柄超时方法）响应从句柄超时方法发送后，while 循环仍在处理，直到 i 的值更改为除零以外的其他值。

请求是否仍然被服务器持有？那么请求超时有什么用？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:16:49.777

当 servlet 容器线程检测到异步可调用对象已超时时，它会调用 handleTimeout()（在其自己的上下文中）。这就是您看到 handleTimeout() 被执行的原因。它由 servlet 容器线程执行，而不是由运行 Callable 的线程执行。

如果你想要自定义超时处理，你需要做两件事：

1.  在您的 WebAsyncTask 中覆盖 onTimeout()。当检测到您的可调用对象已超时时，您提供的作为 onTimeout() 回调的任何可调用对象都将在 servlet 容器线程中被调用。
2.  检查您在控制器内创建的 Callable 中的超时/中断。如果您的 Callable 不期望并尊重中断（“如果目标线程不轮询中断状态，则中断被有效忽略”），则无法中断它！请参考[此](https://stackoverflow.com/questions/4556401/how-to-stop-uninterruptible-threads-in-java?lq=1)答案以了解如何期望和尊重中断。

# erlang - 数据检索吞吐量 - ETS 查找与进程间消息传递

> ID：16101075
> 
> 赞同：2
> 
> 时间：2013-04-19T09:08:26.203
> 
> 标签：erlang, mnesia, ets

假设我们有一个涉及数千个进程的 erlang 应用程序。假设有一个资源 X，它可能是一个元组、一个列表或任何 erlang 术语，所有这些进程可能需要随时从中读取/挑选一些东西。

这种情况的一个例子是 API 系统，其中客户端进程可能需要在远程机器上读写。Ant 碰巧您不希望为每个读/写请求创建一个新连接。因此，您所做的就是创建一个连接池，将它们视为一个开放的管道/套接字/通道池。

现在，这个资源池将由数千个进程共享，因此对于每个读取或写入需求，您希望该进程检索任何可用的开放通道/资源。

问题是，如果我有一个进程（单个进程）保存此信息，无论是在其进程字典中还是在其接收循环中。这意味着所有进程在需要空闲资源时都必须向该进程发送消息。由于对该单一资源的高需求，这个单一进程在任何时候都会有一个巨大的邮箱。

或者我可以使用 ETS 表，并且只有一行，比如`#resources{key=pool,value= List_of_openSockets_or_channels}`. 但这意味着，我们所有的进程都将尝试在（高概率）相同的瞬时时间从 ETS 表中读取同一行。

如果 10,000 个进程同时/几乎同时尝试读取同一行/记录，ETS 表将如何处理？然而，如果我使用一个进程，它的邮箱，如果 10,000 个进程同时为相同的资源向它发送消息（并且它需要回复每个请求者）。请记住，此操作可能会如此频繁地发生。什么选项（不考虑进程下降的可用性问题等等）会提供更高的吞吐量，从而让进程更快地获得他们需要的东西？

有没有其他更好的方法来处理 Erlang VM 中的高需求数据结构，即使它们都同时需要该资源，也可以提供对数百万个进程的非常快速的访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:20:49.180

简短的回答：简介。尝试不同的方法并验证您的系统的行为方式。

首先，我会看看 ETS 的`{read_concurrency, true}`选项。从[文档中](http://www.erlang.org/doc/man/ets.html#new_2_read_concurrency)：

> **{read_concurrency,boolean()}**性能调优。默认为假。当设置为 true 时，该表针对并发读取操作进行了优化。在支持 SMP 的运行时系统上启用此选项时，读取操作会变得更便宜；特别是在具有多个物理处理器的系统上。但是，在读取和写入操作之间切换变得更加昂贵。当并发读取操作比写入操作频繁得多时，或者当并发读取和写入以大的读取和写入突发（即，大量读取未被写入中断，大量写入未被中断）时，您通常希望启用此选项读）。当常见的访问模式是一些读操作与一些重复的写操作交错时，您通常不希望启用此选项。在这种情况下，启用此选项会导致性能下降。read_concurrency 选项可以与 write_concurrency 选项结合使用。当大型并发读取突发和大型并发写入突发很常见时，您通常希望将这些组合起来。

其次，我会考虑**缓存**的可能性。进程是否只读取该信息一次或多次？如果他们多次访问它，您可以读取一次并将其存储在您的进程状态中。

第三，您可以尝试在整个系统中复制和分发该信息。分而治之。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:14:51.493

如果您使用进程方法，为了避免在“服务器”进程的消息队列上序列化所有读取请求，您**必须**复制。

使用 ETS 表`read_concurrency`感觉更自然，这是我在开发 Dialyzer 并行版本时使用的东西。但是，在这种情况下，ETS 访问从来都不是瓶颈。

# css - CSS - 我的 HTML 和 BODY 之间的空白

> ID：16101083
> 
> 赞同：4
> 
> 时间：2013-04-19T09:08:45.513
> 
> 标签：css, html, boilerplate, normalize

我正在尝试将 HTML5 Boilerplate + Normalize.css 用于我当前的项目，并且遇到了以下问题。

我的 HTML 标签和我的 BODY 标签之间似乎有一个差距。我试图弄清楚这是什么原因，但经过多次尝试都失败了。

我一定在这里或那里错过了什么。

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<title>Ridanis | Web Design &amp; Web Development</title>

<meta name="description" content="">
<meta name="viewport" content="width=device-width">

<link rel="stylesheet" href="css/normalize.min.css">
<link rel="stylesheet" href="css/main.css">

<script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

<!-- Wrapper / Start -->
<div class="wrapper">
<h1>Hello World!</h1>
</div>
<!-- Wrapper / End -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

<script src="js/main.js"></script>
</body>
</html> 
```

这是一个小提琴：http: [//jsfiddle.net/C7gbC/](http://jsfiddle.net/C7gbC/)

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T09:12:22.800

`h1`normalize.css根据浏览器默认值在元素上插入默认边距声明以保持一致性：

```
h1 {
    font-size: 2em;
    margin: 0.67em 0;
} 
```

如果您手动将其归零（在您的主样式表中或通过直接修改 normalize.css ），差距将消失：

```
h1 {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T21:38:30.343

发现这是我的页眉中“h2”的问题。iE8 和 Crome 中的“p”标签相同。只需设置边距：0；对于我在 main.css 页面开头设置的一些结构样式的“h1”和“p”标签。解决方案似乎有效

# java - How to set iText barcode width?

> ID：16101084
> 
> 赞同：5
> 
> 时间：2013-04-19T09:08:46.157
> 
> 标签：java, itext, barcode

I need to set width of barcode generated by iText. I am using this code:

```
Barcode128 code128 = new Barcode128();
code128.setCode("P662130002");
code128.setBarHeight(80f); // great! but what about width???

java.awt.Image awtImage = code128.createAwtImage(Color.WHITE, Color.BLACK); 
```

Is there any way how to set the width without scaling resulting image?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T09:21:09.690

使用它来设置条形码的宽度

```
code128.setX(10.0f) ;//  Sets the minimum bar width. 
```

方法签名

```
public void setX(float x)

Sets the minimum bar width.

Parameters:
    x - the minimum bar width 
```

**编辑**

```
public class BarCodeTest {

    public static void main(String[] a) throws FileNotFoundException, DocumentException {
        Barcode128 code128 = new Barcode128();
        code128.setCode("P662130002");
        code128.setBarHeight(80f); // great! but what about width???
        code128.setX(1f);
        Document document = new Document();
        PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("hello.pdf"));
        document.open();

        PdfContentByte cb = writer.getDirectContent();

        Image barcodeimage = code128.createImageWithBarcode(cb, Color.BLACK, Color.WHITE);
        document.add(barcodeimage);

        document.close();

    }

} 
```

使用最小值`setX(1f);`可以看出差异。

# hadoop - Backup hdfs directory from full-distributed to a local directory?

> ID：16101085
> 
> 赞同：3
> 
> 时间：2013-04-19T09:08:50.330
> 
> 标签：hadoop, amazon-web-services, amazon-ec2, hbase

I'm trying to back up a directory from hdfs to a local directory. I have a hadoop/hbase cluster running on ec2\. I managed to do what I want running in pseudo-distributed on my local machine but now I'm fully distributed the same steps are failing. Here is what worked for pseudo-distributed

```
hadoop distcp hdfs://localhost:8020/hbase file:///Users/robocode/Desktop/ 
```

Here is what I'm trying on the hadoop namenode (hbase master) on ec2

```
ec2-user@ip-10-35-53-16:~$ hadoop distcp hdfs://10.35.53.16:8020/hbase file:///~/hbase 
```

The errors I'm getting are below

```
13/04/19 09:07:40 INFO tools.DistCp: srcPaths=[hdfs://10.35.53.16:8020/hbase]
13/04/19 09:07:40 INFO tools.DistCp: destPath=file:/~/hbase
13/04/19 09:07:41 INFO tools.DistCp: file:/~/hbase does not exist.
With failures, global counters are inaccurate; consider running with -i
Copy failed: java.io.IOException: Failed to createfile:/~/hbase
    at org.apache.hadoop.tools.DistCp.setup(DistCp.java:1171)
    at org.apache.hadoop.tools.DistCp.copy(DistCp.java:666)
    at org.apache.hadoop.tools.DistCp.run(DistCp.java:881)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.tools.DistCp.main(DistCp.java:908) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:29:30.037

Java 中不能使用 ~ 字符来表示当前主目录，所以改为完全限定路径，例如：

```
file:///home/user1/hbase 
```

但我认为你会在完全分布式环境中遇到问题，因为 distcp 命令运行 map reduce 作业，因此目标路径将被解释为每个集群节点的本地路径。

如果要将数据从 HDFS 拉到本地目录，则需要使用 -get 或 -copyToLocal 开关到`hadoop fs`命令

# android - 如何从android中的http头获取信息

> ID：16101089
> 
> 赞同：0
> 
> 时间：2013-04-19T09:09:03.397
> 
> 标签：android, json, http-headers

我被赋予了向服务器发送 POST 消息并为其提供 JSON 编码消息的任务。然后，服务器将在自定义 HTTP 标头字段“X-SubmissionResponse”中发回响应</p>

到目前为止，我可以成功连接到服务器（我知道这是因为我得到了响应代码 202）

但是我在从响应中获取信息时遇到了很多困难，下面是我目前正在使用的代码。

```
Error content not available 
```

此代码最终返回 null，任何人都可以看到我在这里缺少什么吗？

这是 if 语句上方的代码 ^

```
 Error content not available 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:16:58.003

```
HttpHead head = new HttpHead(); 
```

创建一个新的 HEAD 请求，空的，它本身不做任何事情。

您想要响应请求的标头。简单地得到它：

```
Header name = response.getFirstHeader("X-SubmissionResponse"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:17:22.377

```
Header name = response.getFirstHeader("X-SubmissionResponse");
String whatsInhere = "";
if (name != null)
  whatsInhere = name.getValue(); 
```

尝试使用 Class Header 的正确方法。见[http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/Header.html](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/Header.html)

# ubuntu - Ubuntu-Unity 中的崇高文本。在当前工作区打开文件

> ID：16101090
> 
> 赞同：4
> 
> 时间：2013-04-19T09:09:07.353
> 
> 标签：ubuntu, sublimetext2, text-editor, ubuntu-unity

我在 Ubuntu 中有四个工作区（如果您愿意，可以将它们称为“空间”或“桌面”），并启用了 Unity。我在每个窗口中都打开了多个 Sublime Text 2 窗口。如果我在桌面 1 中从 Nautilus 打开一个新文件，则该文件可能会在任何其他桌面中打开，具体取决于最后打开的是哪个 Sublime 窗口。有没有办法将这种行为更改为更自然的行为，即在我实际所在的工作区的最新窗口中打开文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-09T09:17:10.353

You can edit the application launcher of Sublime Text. It can be found in `/usr/share/applications/sublime-text.desktop`.

To do so just run `sudo nano /usr/share/applications/sublime-text.desktop` & add -n to the `Exec=` line so it looks like -

`Exec=/opt/sublime_text/sublime_text -n %F`

Also to note- on some systems sublime will cause cursor run on when used from the context menu. If that's the case while the .desktop is open to edit scroll down to the `StartupNotify=true` line & make it `StartupNotify=false`. This will prevent cursor run on...

Note: This may not be the *exact* thing you want. But this enables sublime text to open files in a new window, within the currently active workspace.

# asp.net-mvc-3 - Entity Framework Database First with proper use of Data Anotations

> ID：16101091
> 
> 赞同：1
> 
> 时间：2013-04-19T09:09:10.357
> 
> 标签：asp.net-mvc-3, entity-framework-5, data-annotations

I have one project with `EF` and Code First approach and there using of Data Annotations was straight forward. Now I'm working with Database First and I see that using Data Annotations is more specific so I want to know the right steps to implement it.

The structure of my project that provides Data Access is this:

![DataAccess](https://i.stack.imgur.com/52jgd.png)

In `ModelExtensions` are all my files that I've created to add the Data Annotations to the `DbContextModel.tt` entities.

Here is the structure of one of my files in `ModelExtensions`:

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Text;

namespace DataAccess.ModelExtensions
{
    [MetadataType(typeof(MCS_ContentTypesMetaData))]
    public partial class MCS_ContentTypes : BaseEntity
    {

    }

    internal sealed class MCS_ContentTypesMetaData
    {
        [Required]
        [StringLength(10)]
        public string Name { get; set; }
    }
} 
```

I have several questions here. First - the namespace. Should it be like this `namespace DataAccess.ModelExtensions` or I have to remove the `.ModelExtensions` part. I was looking at a project using DB first and there the namespace was just `DataAccess` not sure why it is needed (if so). Also - Do I need to add some other references to the `DbContextModel.tt` entities? Now I use standard C# classes for this and then rename them to : `public partial class MCS_ContentTypes : BaseEntity`. Do I have to use a special approach for creating those to explicitly expose the connection between the entity and this file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T02:10:32.010

1) 扩展模型的命名空间必须与 EF 自动生成的实体类的命名空间相同 - 如果实体类的命名空间`DbContextModel.tt`是`DataAccess`，则应将类的命名空间设置为`DataAccess`。

2）我没有完全理解您的问题，但是在这种方法中，实体类的名称和您的类必须相同。

以下示例显示了它应该是什么。假设 EF 为您生成以下实体类：

```
namespace YourSolution
{
    using System;
    using System.Collections.Generic;

    public partial class News
    {
        public int ID { get; set; }
        public string Title { get; set; }        
    }
} 
```

因此，您的部分类应如下所示：

```
namespace YourSolution
{
    [MetadataType(typeof(NewsAttribs))]
    public partial class News
    {
        // leave it empty.
    }

    public class NewsAttribs
    {            
        // Your attribs will come here.

        [Display(Name = "News title")]
        [Required(ErrorMessage = "Please enter the news title.")]
        public string Title { get; set; }

        // and other properties you want...
    }
} 
```

所以，你不需要任何`: BaseEntity`继承。

# gnuplot - 如何在gnuplot中按名称选择列

> ID：16101093
> 
> 赞同：0
> 
> 时间：2013-04-19T09:09:15.267
> 
> 标签：gnuplot, using

我有 5 列的源数据，我当前的打印方法如下

```
plot "data.txt" index "here" using 2:xticlabels(1) axes x1y1,\
"" index "here" using  4:xticlabels(1)  ,\
"" index "here" using  5:xticlabels(1) ,\
"" index "here" using  3:xticlabels(1) 
```

但最后两列可以切换（输入数据并不总是相同），我仍然必须按以前的顺序打印它们。所以，我需要工具来按名称而不是数字来选择列。像这样的“列名”：xticlabels(1)。

# c# - string.Format 对于带有大括号的字符串，输入字符串的格式不正确，已作为格式 C# 的一部分

> ID：16101100
> 
> 赞同：9
> 
> 时间：2013-04-19T09:09:40.223
> 
> 标签：c#, json

我正在尝试将`Json`输入格式化为`JSON RPC`. 例如，`JSON`我要发布的内容如下，

```
"{"filter":{ "Ids": [123, 124], "Types":["EMPLOYEE"]}}" 
```

我希望返回 id 为 123、124 且类型为 EMPLOYEE 的用户。但是对于 Ids 参数，我希望它是动态的，以便我可以在我的 C# 调用方法中设置值，如下所示

```
string.Format("{\"filter\":{ \"Ids\": [{0}], \"Types\":[\"EMPLOYEE\"]}}", "123, 124"); 
```

这样做时，我得到格式异常`"Input string was not in correct format"`....

`string.concat`我知道，我可以使用or构建字符串`string builder`。`string.format`我只是好奇，如果字符串已经存在`curly brackets`（我假设这是异常的原因），是否有任何解决方案可以克服此异常。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T09:11:51.943

您必须使用“{{”分别转义“{”和“}”字符。“}}”。

[请参阅http://msdn.microsoft.com/en-us/library/txafckwd.aspx](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)中的“转义大括号” 。

# javascript - 无法遍历 jquery 中的 java 集合

> ID：16101101
> 
> 赞同：0
> 
> 时间：2013-04-19T09:09:43.253
> 
> 标签：javascript, jquery

我想在 jquery 中迭代对象的 javascript 集合。当我发出警报时，我可以看到打印的集合，但我无法在 jquery 中迭代该集合的元素。我怎样才能做到这一点？我试过了：

```
 ${mergedConfirmedTechnologies}.each(function(index,element){
    alert("here "+element.product); 
    }); 
```

但是当我这样做时它没有用：

```
 alert(${mergedConfirmedTechnologies}); 
```

然后它打印对象的集合有人能建议我如何在 jquery 中迭代集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:45:21.307

您可以`forEach` 在 jstl 中使用，然后您可以将其推送到 javascript 中的数组中

```
<script>
<c:forEach items="${mergedConfirmedTechnologies}" var="item">
    alert(${item.product});
</c:forEach>
</script> 
```

对于使用`JSTL`标签，请使用以下导入语句

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:13:28.810

您的示例是在页面的 DOM 元素中进行循环。您必须使用 JS 循环，而不是 jQuery 循环。例如：

```
 for (int i = 0; i < mergedConfirmedTechnologies.lenght; i++)
 {
     alert(mergedConfirmedTechnologies[i]);
 } 
```

编辑：固定警报（）错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:18:21.430

要在 Javascript 中迭代 Java 集合，首先需要将其转换为 Javascript 可以理解的对象。您可以执行以下操作：

1- 将 Java 集合转换为 JSON 字符串或直接编写集合，使用 EL 到 Javascript 字符串。

2- 解析字符串以形成一个 Javascript 数组对象。

# oracle - Open an Oracle .dmp file from excel 2007

> ID：16101103
> 
> 赞同：0
> 
> 时间：2013-04-19T09:09:52.583
> 
> 标签：oracle, excel, excel-2007, dmp

I have an oracle .dmp file which I would like to open from excel 2007\. How do I use the 'get external data' feature to do so? Is it possible in the first place?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:17:09.950

这是不可能的，不。

假设它`.dmp file`是由 Oracle 导出实用程序生成的，这是一个专有的、未记录的二进制文件。只有 Oracle 的导入实用程序才能读取它。导入实用程序可以将转储文件中结构的 DDL 语句转储到平面文件中，但如果要查看数据，则需要将该数据导入 Oracle 数据库。

# android - Android: java.lang.ExceptionInInitializer using SharedPreferences

> ID：16101104
> 
> 赞同：1
> 
> 时间：2013-04-19T09:09:55.967
> 
> 标签：android, exception, android-asynctask, sharedpreferences

I have an application that stores some data in `SharedPreferences`. This control data is synchronized with a server, and when the user logins in the application I retrieve it using an `AsyncTask`. I'm trying to store the data retrieved in `SharedPreferences` again, but I'm getting a `java.lang.ExceptionInInitializerError`.

This is the `AsyncTask` code:

```
public class RetrieveLogTask extends AsyncTask<Void, Void, Boolean> {
    private String errorMessage;

    @Override
    protected Boolean doInBackground(Void... params) {
        try {
            String controlRow = NetworkUtilities.getData();

            if(controlRow != null){
                LogHandler.restoreControls(LoginActivity.this, controlRow);                 
                return true;                        
            }
        } catch (AuthenticationException e) {
            errorMessage = e.getMessage();
        } catch (Exception e) {
            errorMessage = e.getMessage();
        }

        return false;
    }

    @Override
    protected void onPostExecute(final Boolean success) {
        mRetrieveTask = null;

        if (success) {              
            createAccountAndFinish(true);
        } 
        else{
            Log.d("LoginActivity", errorMessage);
            askRetry();
        }
    }

    @Override
    protected void onCancelled() {
        mRetrieveTask = null;
        showProgress(false);
    }
} 
```

And this is the function in LogHandler class causing the error:

```
public static void restoreControls(Context ctx, String controlRow){
    String[] controls = controlRow.split(LogHandler.FILE_COLUMN_SEPARATOR_ESCAPED);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
    Editor editor = prefs.edit();

    editor.putString(TODService.PREFS_KEY_ARRAY_ICONTROLS, controlRow); // ERROR HERE

    editor.commit();
} 
```

The line that causes the error is the `putString` call. controlRow is not null and not empty, and editor is not null.

This is the log output:

```
04-19 10:59:50.900: E/AndroidRuntime(16609): FATAL EXCEPTION: AsyncTask #2
04-19 10:59:50.900: E/AndroidRuntime(16609): java.lang.RuntimeException: An error occured while executing doInBackground()
04-19 10:59:50.900: E/AndroidRuntime(16609):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.lang.Thread.run(Thread.java:856)
04-19 10:59:50.900: E/AndroidRuntime(16609): Caused by: java.lang.ExceptionInInitializerError
04-19 10:59:50.900: E/AndroidRuntime(16609):    at com.timeondriver.tod.log.LogHandler.restoreControls(LogHandler.java:835)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at com.timeondriver.tod.authenticate.LoginActivity$RetrieveLogTask.doInBackground(LoginActivity.java:328)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at com.timeondriver.tod.authenticate.LoginActivity$RetrieveLogTask.doInBackground(LoginActivity.java:1)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-19 10:59:50.900: E/AndroidRuntime(16609):    ... 5 more
04-19 10:59:50.900: E/AndroidRuntime(16609): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-19 10:59:50.900: E/AndroidRuntime(16609):    at android.os.Handler.<init>(Handler.java:121)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at com.timeondriver.tod.TODService$1.<init>(TODService.java:513)
04-19 10:59:50.900: E/AndroidRuntime(16609):    at com.timeondriver.tod.TODService.<clinit>(TODService.java:513)
04-19 10:59:50.900: E/AndroidRuntime(16609):    ... 10 more 
```

Anybody knows how to fix it??

Thanks!

[EDIT]

I add some code:

```
private void askRetry() {
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(LoginActivity.this);

    alertDialogBuilder
    .setTitle(getResources().getString(R.string.title_error_retry))
    .setMessage(getResources().getString(R.string.message_error_retry))
    .setCancelable(false)

    .setPositiveButton(getResources().getString(R.string.retry)
            ,new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            mRetrieveTask = new RetrieveLogTask();
            mRetrieveTask.execute((Void) null);
        }
    })

    .setNegativeButton(getResources().getString(R.string.alert_cancel)
            ,new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            showProgress(false);    
        }
    })
    ; // Fin alertDialogBuilder

    AlertDialog alertDialog = alertDialogBuilder.create();
    alertDialog.show();     
}

private void createAccountAndFinish(boolean logRetrieved){
    showProgress(false);

    // Create the local account.
    Account account = new Account(mPhone, ACCOUNT_TYPE);
    Bundle user_data = new Bundle();
    try{
        mAccountManager.addAccountExplicitly(account, mPassword, user_data);
    }catch(Exception e){
        e.printStackTrace();
        return;
    }

    // Set account's additional data and finish the activity.
    final Intent intent = new Intent();
    intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, mPhone);
    intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, ACCOUNT_TYPE);
    intent.putExtra(AccountManager.KEY_PASSWORD, mPassword);
    intent.putExtra(AccountManager.KEY_AUTHTOKEN, mAuthToken);
    intent.putExtra(AccountManager.KEY_BOOLEAN_RESULT, true);
    LoginActivity.this.setAccountAuthenticatorResult(intent.getExtras());
    setResult(RESULT_OK, intent);        

    Intent i = new Intent(this, Main.class);
    startActivity(i);
    LoginActivity.this.finish();
} 
```

In TODService.java:513 there's a Handler declaration:

```
private static Handler mHandler = new Handler(){
    ...
} 
```

[/EDIT]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:26:02.370

**ExceptionInInitializerError** - 表示静态初始化程序中发生了意外异常。抛出 ExceptionInInitializerError 以指示在评估静态初始化程序或静态变量的初始化程序期间发生异常。

**java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序**

似乎您正在做一些事情来更新您`UI`的`Non-UI thread`. 即，来自后台工作线程

您必须`LogHandler.restoreControls(LoginActivity.this, controlRow);`在`onPostExecute();`.

所以你编辑的课程必须看起来像

```
public class RetrieveLogTask extends AsyncTask<Void, Void, Boolean>
{
    private String errorMessage;

    @Override
    protected Sring doInBackground(Void... params)
    {
        String controlRow = null;
        try
        {
            controlRow = NetworkUtilities.getData();
        }
        catch ( AuthenticationException e )
        {
            errorMessage = e.getMessage();
        }
        catch ( Exception e )
        {
            errorMessage = e.getMessage();
        }
        return controlRow;
    }

    @Override
    protected void onPostExecute(final String controlRow)
    {
        mRetrieveTask = null;
        if ( controlRow != null )
        {
            LogHandler.restoreControls(LoginActivity.this, controlRow);
            createAccountAndFinish(true);
        }
        else
        {
            Log.d("LoginActivity", errorMessage);
            askRetry();
        }
    }

    @Override
    protected void onCancelled()
    {
        mRetrieveTask = null;
        showProgress(false);
    }
} 
```

# html - Issues with pointer-events and z-index

> ID：16101105
> 
> 赞同：2
> 
> 时间：2013-04-19T09:09:58.430
> 
> 标签：html, google-chrome, css

I've been tearing my hair out for a while now trying to figure out why I can't click the links in my footer. I know my css is a bit sloppy, but it gets the job done. There's probably a lot more efficient way to get the effect of a footer that sticks to the bottom of the page that appears *behind* all the rest of my content, but this is what I have so far:

[here's my jsfiddle of my issue](http://jsfiddle.net/auFeV/2/)

it looks a bit messed up in the jsfiddle, but the idea is thereI have a pointer-event:none here:

```
.bottomdivtransparent {
    pointer-events: none;
    width: 100%;
    top: 0px;
    height: 300px;
    left: 0;
    overflow: hidden;
    opacity: 0;
} 
```

Which *should* make it so I can click the links, but they remain unclickable! I'm sure the error is something really simple and staring me right in the face..

Any suggestions? Or any easier way to get the footer to appear behind all of my content but still extend about ~300px below everything?

Thank you!

edit: Thanks to [Kasyx](https://stackoverflow.com/users/1430754/kasyx) and [Andrea Ligios](https://stackoverflow.com/users/1654265/andrea-ligios) for the help -- they have determined that it works fine in Firefox but not in Google Chrome for some reason. The margin-bottom property is messing up on .bottomdiv..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:31:28.627

正如我在评论中注意到的那样，`pointer-events`在这种情况下将不起作用。但不是它不建议你`margin-bottom`像小提琴一样添加到你的 div 中：http: [//jsfiddle.net/auFeV/6/](http://jsfiddle.net/auFeV/6/)

```
.bottomdiv {
    //(...)
    margin-bottom: 310px;
    //(...)
} 
```

（感谢@Andrea Ligios 改进了这个答案）

# java - 我们可以通过 neoremind 从 SshXCute 执行 telnet

> ID：16101108
> 
> 赞同：0
> 
> 时间：2013-04-19T09:10:18.783
> 
> 标签：java, telnet

我们使用`SshXCute`java 插件`neoremind`通过 ssh 连接到服务器。现在我们需要通过 telnet 连接到其他服务器/路由器。我在谷歌搜索了很多以找到任何解决方案。终于全部到手了`apache TelnetClient`。我们希望尽最大努力避免在我们的应用程序中包含另一个 jar。是否有可能`SshXcute`用于 telnet 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:41:16.823

请考虑使用 JSCAPE 的[Secure iNet Factory](http://www.jscape.com/products/components/java/secure-inet-factory/)。文档可以在[这里](http://files.jscape.com/secureinetfactory/docs/html/)找到。Secure iNet Factory 在单个 jar 中支持 SSH 会话和 Telnet。

# haskell - Getting rid of a Graph keyword in Haskell

> ID：16101113
> 
> 赞同：1
> 
> 时间：2013-04-19T09:10:46.913
> 
> 标签：haskell

I have this data type :

```
data Node a = Node
    { label :: a,
        adjacent :: [(a,Int)] } deriving (Show, Eq)
data Network a = Graph [Node a] deriving (Show, Eq) 
```

I have a function which turns a Graph to a list of nodes :

```
deGraph :: ([Node a] -> Network a) -> [Node a] -> [Node a]  
deGraph _ x = x
 for example : 
Main> deGraph Graph [ ( Node 'a' [ ( 'b' , 3 ) , ( 'c' ,2 ) ] ) , ( Node 'b' [ ('c' , 3 ) ] ) , ( Node 'c' [] ) ]
[Node {label = 'a', adjacent = [('b',3),('c',2)]},Node {label = 'b', adjacent = [('c',3)]},Node {label = 'c', adjacent = []}] 
```

But when I use the function inside a function like this :

```
func1 (Graph x) = deGraph (Graph x) 
```

I get this error :

> ERROR "./Network.hs":14 - Type error in application *** Expression : deGraph (Graph x)** **Term : Graph x* ****Type : Network b *** Does not match : [Node a] -> Network a***

 ***Can you tell me how can I solve this problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:20:05.810

您的`deGraph`函数有两个参数，只返回两个参数中的第二个。

你可能想要这个：

```
deGraph :: Network a -> [Node a]
deGraph (Graph x) = x 
```

GHCi 中的调用`deGraph`有效，因为您忘记将括号括起来`Graph`和下面的列表，所以它也是一个带有两个参数的调用。在`func1`中，您（正确地）使用括号，但随后出现类型错误，因为您不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:21:34.627

也简单地做`Graph`一个记录：

```
data Network a = Graph { nodes :: [Node a] } deriving (Show, Eq) 
```

然后`nodes`有类型`Network a -> [Node a]`，并且可以被称为

```
Main> nodes $ Graph listOfNodes 
```***

# c# - How does a Tuple serialize to and deserialize from JSON?

> ID：16101115
> 
> 赞同：55
> 
> 时间：2013-04-19T09:10:55.227
> 
> 标签：c#, json

I am curious about how the `Tuple<T1, T2, T3, ...>` serializes and deserializes. I searched using keywords "json" and "tuple" but I could not find what I want.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-19T09:10:55.227

我通过[Json.net](http://json.codeplex.com/)`UnitTest`进行测试，测试代码如下。结果表明是可序列化和可反序列化的。所以我可以在我的应用程序中使用它们。`Tuple<T1,T2,T3,...>`

### 测试代码

```
public class Foo {
    public List<Tuple<string, string, bool>> Items { get; set; }

    public Foo()
    {
        Items = new List<Tuple<string, string, bool>>();
    }

    public override string ToString()
    {
        StringBuilder sb = new StringBuilder();
        foreach (var a in Items)
        {
            sb.Append(a.Item1 + ", " + a.Item2 + ", " + a.Item3.ToString() + "\r\n");
        }
        return sb.ToString();
    }
}

[TestClass]
public class NormalTests
{
    [TestMethod]
    public void TupleSerialization()
    {
        Foo tests = new Foo();

        tests.Items.Add(Tuple.Create("one", "hehe", true));
        tests.Items.Add(Tuple.Create("two", "hoho", false));
        tests.Items.Add(Tuple.Create("three", "ohoh", true));

        string json = JsonConvert.SerializeObject(tests);
        Console.WriteLine(json);

        var obj = JsonConvert.DeserializeObject<Foo>(json);
        string objStr = obj.ToString();
        Console.WriteLine(objStr);
    }
} 
```

### 概括

*   `Tuple.Create("own","hehe",true)`序列化为 `{"Item1":"one","Item2":"hehe","Item3":true}`

*   `{"Item1":"one","Item2":"hehe","Item3":true}`可以反序列化回`Tuple<string,string, bool>`

*   `Class Foo`带`Tuple`数据，可以序列化为json字符串，字符串可以反序列化回`Class Foo`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-07-19T07:45:15.153

如果您正在寻找一个简短的答案。我正在使用*JsonConvert*。

```
var testTuple = Tuple.Create(1234, "foo", true);
var serialized = JsonConvert.SerializeObject(testTuple);

Console.WriteLine(serialized);
// prints: {"Item1":1234,"Item2":"foo","Item3":true} 
```

我做了一个[最小的小提琴](https://dotnetfiddle.net/U1CL1Y)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-10-21T16:33:44.917

对于 .NET5 和很快的 .NET6，现在建议`System.Text.Json`在 NewtonSoft 上使用。这个序列化器关于元组的重要事情是设置`JsonSerializerOptions`选项`IncludeFields`，否则默认情况下会排除元组值。

此外，[命名元组只是语法糖](https://stackoverflow.com/a/57217505/3626160)`Item1`，`Item2`由编译器替换为标准符号。要包含名称，最简单的方法是[使用匿名对象](https://stackoverflow.com/a/66386667/3626160)。

下面是一个最小的例子。（可以使用 .NET5 编译器粘贴到[.NET fiddle中）](https://dotnetfiddle.net/)

```
 using System;
using System.Collections.Generic;
using System.Text.Json;

public class Program
{
    public static void Main()
    {
        JsonSerializerOptions options = new() { IncludeFields = true };

        var testTuple = ("test" , "test1", 1324, false);
        var serializedTuple = JsonSerializer.Serialize(testTuple, options);
        Console.WriteLine(serializedTuple);

        var testTuple2 = (NamedItem1: "test" , NamedItemTwo: "test1", TheIntegersName: 1324, ThisBoolHasAFirstNameIts: false);
        var serializedTuple2 = JsonSerializer.Serialize(new {testTuple2.NamedItem1, testTuple2.NamedItemTwo, testTuple2.TheIntegersName, testTuple2.ThisBoolHasAFirstNameIts }, options);
        Console.WriteLine(serializedTuple2);

    }
} 
```

输出：

`{"Item1":"test","Item2":"test1","Item3":1324,"Item4":false}`

`{"NamedItem1":"test","NamedItemTwo":"test1","TheIntegersName":1324,"ThisBoolHasAFirstNameIts":false}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-08T10:53:53.820

感谢 Hinrich 到上面的 dotnetfiddle 链接。

我使用了相同的链接，并了解了转换如何在 Json 对象和元组之间工作。下面是代码：

```
using System;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

public class Program
{
    public static void Main()
    {

        var testTuple = Tuple.Create<int, string, bool>(1234, "foo", true);
        var serialized = JsonConvert.SerializeObject(testTuple);
        Console.WriteLine(serialized);
        JObject test = ((JObject)JsonConvert.DeserializeObject(serialized));
        string strSerialized = JsonConvert.SerializeObject(test);
        //Tuple<int, string, bool> testTuple1 = JsonConvert.DeserializeObject<Tuple<int, string, bool>>(serialized); // WORKs
        Tuple<int, string, bool> testTuple1 = JsonConvert.DeserializeObject<Tuple<int, string, bool>>(strSerialized); // WORKs
        Console.WriteLine(testTuple1.Item1.ToString());
    }
} 
```

希望有人觉得这很有帮助。

# coldfusion - ColdFusion server crashing on hourly basis

> ID：16101119
> 
> 赞同：2
> 
> 时间：2013-04-19T09:11:06.033
> 
> 标签：coldfusion, coldfusion-8

I am facing serious ColdFusion Server crashing issue. I have many live sites on that server so that is serious and urgent.

## Following are the system specs:

Windows Server 2003 R2, Enterprise X64 Edition, Service Pack 2 ColdFusion (8,0,1,195765) Enterprise Edition

## Following are the hardware specs:

Intel(R) Xeon(R) CPU E7320 @2.13 GHZ, 2.13 GHZ 31.9 GB of RAM

It is crashing on the hourly bases. Can somebody help me to find out the exact issue? I tried to find it through ColdFusion log files but i do not find anything over there. Every times when it crashes, i have to reset the ColdFusion services to get it back.

## Edit1

When i saw the runtime log files "ColdFusion-out165.log" so i found following errors

```
error ROOT CAUSE: 
java.lang.OutOfMemoryError: Java heap space

javax.servlet.ServletException: ROOT CAUSE: 
java.lang.OutOfMemoryError: Java heap space

04/18 16:19:44 error ROOT CAUSE: 
java.lang.OutOfMemoryError: GC overhead limit exceeded

javax.servlet.ServletException: ROOT CAUSE: 
java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

Here are my current JVM settings:

![enter image description here](https://i.stack.imgur.com/zlc7I.png)

As you can see my JVM setting are

Minimum JVM Heap Size (MB): 512

Maximum JVM Heap Size (MB): 1024

JVM Arguments

```
-server -Dsun.io.useCanonCaches=false -XX:MaxPermSize=512m -XX:+UseParallelGC -Dcoldfusion.rootDir={application.home}/../ -Dcoldfusion.libPath={application.home}/../lib 
```

Note:- when i tried to increase Maximum JVM Heap size to 1536 and try to reset coldfusion services, it does not allow me to start them and give the following error.

"Windows could not start the ColdFusion MX Application Server on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 2."

Should i not able to set my maximum heap size to 1.8 GB, because i am using 64 bit operating system. Isn't it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:47:22.387

您可以为 JVM 提供多少内存取决于您的 JVM，而不是您的操作系统。您正在运行 64 位 CF 安装吗？在 CF8 时代，这是一件不常见的事情，所以值得一问。

基本上，错误是说明您使用了过多的 RAM 来获得可用的内存（您知道）。我会看看你在会话和应用程序范围中投入了多少东西，并剔除不必要的东西。

会话范围内的对象特别糟糕：它们的足迹比人们想象的要大得多，并且造成的麻烦比它们的价值要多。

我还会查看您有多少非活动但未超时的会话，以期对您的会话超时更具侵略性。

查看您的查询，删除所有查询，`SELECT *`然后将它们缩减为您需要的列。将数据处理推回数据库，而不是在 CF 中进行。

将计划任务集中到不同的 CF 实例上。

你对大文件做任何事情吗？要么阅读和处理它们，要么通过`<cfcontent>`? 这可以非常快速地咀嚼记忆。

CFC 中的所有函数局部变量是否都已正确 VARed？尤其是在 CFC 中最终进入共享范围的那些。

您是否不小心打开了调试功能？

您是否大量使用了调用的自定义标签或文件`<cfmodule>`？我听说过自定义标签导致内存泄漏的杜撰故事。

找[Mike Brunt](http://www.cfwhisperer.com/)或[Charlie Arehart](http://www.carehart.org/cf911/)看看你的服务器配置/应用程序（他们显然会收取咨询费）。

当我想到更多需要注意的事情时，我会更新这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:26:10.297

在管理员中打开 ColdFusion 监视器。用它来观察行为。查找长时间运行的进程和错误。

此外，请确保在 ColdFusion 服务器监视器中关闭内存监视。这将轻松关闭生产服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:50:15.490

@Adil，我有同样的问题，但它并没有崩溃，但 CPU 使用率高达 100%，不确定它是否与您的问题相关，但至少值得一看。请参阅以下 URL 中的问题：

[奇怪的 JRUN 问题。JRUN 每两个小时消耗 50% 的内存](https://stackoverflow.com/questions/7498172/strange-jrun-issue-jrun-eating-up-50-of-memory-for-every-two-hours)

我的博客条目

[http://www.thecfguy.com/post.cfm/strange-coldfusion-issue-jrun-eating-up-to-50-of-cpu](http://www.thecfguy.com/post.cfm/strange-coldfusion-issue-jrun-eating-up-to-50-of-cpu)

对我来说，这是一个高流量站点，并将客户端变量存储在注册表中，这使事情出错了。

希望这有帮助。

# c++ - recursive_directory_iterator 抛出异常

> ID：16101121
> 
> 赞同：8
> 
> 时间：2013-04-19T09:11:07.997
> 
> 标签：c++, boost, c++11

我正在使用 boost 迭代器“recursive_directory_iterator”递归地扫描一个目录。但是，当迭代器运行到我的应用程序无权访问的目录时，会抛出“boost::filesystem3::filesystem_error”类型的异常，这会停止迭代器并且程序中止。无论如何我可以指示迭代器跳过这些目录。

我尝试了[Traversing a directory with boost::filesystem without throwing exceptions](https://stackoverflow.com/questions/15970013/traversing-a-directory-with-boostfilesystem-without-throwing-exceptions)中建议的代码 但是，它对我也不起作用。我正在使用提升版本 1.49。

遵循建议（我能想到的最好的）后，我的代码如下所示：

```
void scand()
{
    boost::system::error_code ec, no_err;

    // Read dir contents recurs
    for (recursive_directory_iterator end, _path("/tmp", ec);
         _path != end; _path.increment(ec)) {

        if (ec != no_err) {
            _path.pop();
            continue;
        }
        cout << _path->path() << endl;
    }
} 
```

谢谢你，艾哈迈德。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-17T14:30:21.247

这是 boost::filesystem (V3) 中的一个已知错误：[https](https://svn.boost.org/trac/boost/ticket/4494) ://svn.boost.org/trac/boost/ticket/4494 。根据您的需要，您可以改用该库的 V2（它甚至可能与您的编译器一起以`std::tr2::filesystem`. 另一种选择是自己实现递归部分。

```
boost::system::error_code ec;
std::deque<boost::filesystem::path> directories {initialDir};
while(!directories.empty())
{
  boost::filesystem::directory_iterator dit(directories.front(), ec);
  directories.pop_front();
  while(dit != boost::filesystem::directory_iterator())
  {
    if(boost::filesystem::is_directory(dit->path(), ec))
    {
      directories.push_back(dit->path());
    }
    HandleFile(dit->path()); // <-- do something with the file
    ++dit;
  }
} 
```

上面的代码只是为了给出一个大致的思路，其中缺少错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:14:26.430

您可以使用 try-catch 块，如果您捕获 boost::filesystem3::filesystem_error 则可以跳过当前迭代：

```
void scand()
{
   boost::system::error_code ec, no_err;

   // Read dir contents recurs
   recursive_directory_iterator end;
   _path("/tmp", ec);
   while (_path != end) {
      try
      {
        if (ec != no_err) {
         _path.pop();
          continue;
        }
       cout << _path->path() << endl;
    }
    catch(boost::filesystem3::filesystem_error e)
    {

    }
    _path++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-24T14:00:21.480

以[安德烈亚斯](https://stackoverflow.com/users/5811/andreas-magnusson)的[回答](https://stackoverflow.com/a/23135989/231306)为基础。如果你既没有`std::experimental`v2 也没有`boost`，试试这个。它会跳过有问题的文件夹。

```
 namespace fs = std::experimental::filesystem;

    for(std::deque<fs::path> directories{{str_to<std::string>(path)}} ; ! directories.empty() ; directories.pop_front())
        try {
            for(fs::directory_iterator dit(directories.front()) ; dit != fs::directory_iterator() ; ++dit)
                if (fs::is_directory(dit->path()))
                    directories.push_back(dit->path());
                else if (fs::is_regular_file(dit->path()))
                    Handle(dit->path().string());
        }
        catch(...)
        {} 
```

# css - 不透明度在 IE8 中不起作用

> ID：16101123
> 
> 赞同：1
> 
> 时间：2013-04-19T09:11:16.963
> 
> 标签：css, internet-explorer, internet-explorer-8, opacity

我一直在摸索大约 3 个小时，试图弄清楚为什么 opacity CSS 属性在 IE8 中不适用于我的网站。

它适用于 IE7 和 IE9+，但 IE8 不会接受它。

CSS 本身很好，我在另一个网站上进行了测试，它没有问题，所以它似乎在这个网站上......

这是一个[参考网址](http://www.robotwp.com/overseas/)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:54:21.917

这是我给你的解决方案 `background: rgba(250, 250, 250, 0.5); filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7fffffff,endColorstr=#7fffffff); zoom: 1;`

# django - 如何调试内部错误当前事务被中止，命令被忽略直到事务块结束？

> ID：16101125
> 
> 赞同：1
> 
> 时间：2013-04-19T09:11:25.917
> 
> 标签：django, django-models, django-postgresql

我遇到了这个错误`current transaction is aborted, commands ignored until end of transaction block`，回溯太长了，所以打印出似乎导致错误的行，

```
File "/home/matsinvasion/food4less/restaurant_detail/views.py" in pre_save
  176\.          user=User.objects.create(username=obj.restaurant_detail.email,email=obj.restaurant_detail.email) 
```

这是生成错误的部分（很长）

```
user=User.objects.create(username=obj.restaurant_detail.email,email=obj.restaurant_detail.email)

user.email_user(
    "F4L account activation",
    "Your membership to F4L has been approved go to the following link to activate your account \n \n http://f4l.herokuapp.com/restaurant_detail/restaurant/activate/%s/ \n \n After you have activated your account, login using your full email address as username and your password \n \n And customize what will be published on your F4L website profile by click profile link on the left of members \n \n This email is generated by the F4L website do not reply to it. " % obj.token,"website@f4l.herokuapp.com"
)
group=Group.objects.get(name='Restaurants')
user.groups.add(group)
user.first_name=userapp.first_name
user.last_name=userapp.last_name
user.email=userapp.email
user.set_unusable_password()
user.save()

obj.user=user
obj.is_active=False
obj.save()
return obj 
```

现在最让我困惑的是，这在 sqlite 上运行良好，但是当我切换到 postgresql 时，出现了这个错误。

我看过这里（[DatabaseError：当前事务被中止，命令被忽略直到事务块结束](https://stackoverflow.com/questions/2979369/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-tra?rq=1)）和这里（[Django + Postgres：“当前事务被中止，命令被忽略直到事务块结束”](https://stackoverflow.com/questions/7753016/djangopostgres-current-transaction-is-aborted-commands-ignored-until-end-of?lq=1)）但没有白费。你建议我如何解决这个错误？

**编辑：**环顾四周后，我意识到错误是由正在使用的库引起的，并且从未用 postgres 测试过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:29:59.423

我认为问题来自：

```
user.groups.add(group) 
```

对我来说，在保存用户之前，这似乎并不合法。我认为“add”方法通过在 m2m 关系中创建一个新元组来与数据库交互，而当“user”没有 id 时这是不可能的。此外，我在[本文档](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)中发现它引发了一个错误（不幸的是 ValueError 而不是 DatabaseError）。

所以我认为你必须在管理它的关系之前保存你的用户。

让我知道这是否解决了您的问题！

# javascript - 如何在 ace 编辑器中管理具有 2 种不同样式的交替行？

> ID：16101127
> 
> 赞同：0
> 
> 时间：2013-04-19T09:11:30.653
> 
> 标签：javascript, html, ace-editor

我想在 ace 中创建一个笔记编辑器。

例如，我在编辑器中粘贴了一些西班牙语文本。然后我想记下一些相应的西班牙语单词的英语单词。我希望这些英文单词出现在相应的西班牙语单词上方（在西班牙语的两行之间）

所以我将在我的编辑器中使用 2 种文本样式替换行。西班牙语字体较大，英语字体较小。

我该怎么做呢？我认为 ace 使用 contenteditable。我如何形成不同风格的交替线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:08:54.497

Ace 不使用 contenteditable，并且仅支持等宽字体，因此您必须向 ace 添加可变大小字体支持，这并不容易。

# excel - 强制用户根据另一个单元格值在单元格中输入值

> ID：16101130
> 
> 赞同：5
> 
> 时间：2013-04-19T09:11:40.187
> 
> 标签：excel, excel-formula

我目前正在编写以下用于记录测试用例的 excel 工作簿： ![在此处输入图像描述](https://i.stack.imgur.com/Sebfd.png)

如果用户`fel`在 F 列中输入，它会将其着色为红色。`Fel`意思是`fault`“（瑞典语），所以我想强制测试人员在其中一个测试用例失败时在错误跟踪系统中注册这个错误。我应该在错误跟踪系统中包含这个错误的 ID。所以我'我试图实现的是：

如果测试人员已`fel`在 F 列中输入，则应强制或让测试人员意识到在 I 列中未输入任何 ID。一个想法是，如果 F 单元格包含`fel`且 I 单元格为空，则将相应的 I 单元格着色为红色，并且当测试人员在 I 单元格中输入某些内容时，红色消失。

这是我到目前为止所做的：

```
=IF(AND(F5="Fel",I5=ISEMPTY(TRUE)),) 
```

我使用条件格式，但我无法让它工作。此外，单元格值是硬编码的，我怎样才能使条件对具有相应行单元格的特定列有效。

此外，如果有更好的方法，我愿意接受建议，然后将单元格涂成红色，以使用户意识到他需要在 I 列中输入一些内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:33:03.233

我以 Cells 为例`F1:F10`。请酌情修改。

没有公式作为`ISEMPTY`。采用`ISBLANK`

使用这个公式

```
=AND($F1="Fel",ISBLANK($I1)) 
```

为了确保它适用于该范围内的所有单元`F1:F10`格`$`（

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/Z3ld5.png)

# wpf - 如何覆盖 MahApps 全景控件的选中项样式？

> ID：16101131
> 
> 赞同：0
> 
> 时间：2013-04-19T09:11:40.897
> 
> 标签：wpf, xaml, mahapps.metro

我`MahApps Panorama Control`通过链接在我的项目中使用 ，`Mahapps.Metro.dll`所以我不能直接更改`XAML-Code`。`Panorama Control`我认为可以覆盖我的值，`MainWindow.xaml`但是当我这样做时，什么都没有改变，或者我改变了错误的属性。

的问题`Panorama Control`是所选项目有一个白色边框，我找不到删除此选择样式的方法。我尝试了几种解决方案，例如更改[样式](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/1e3d6032-32a8-491d-945d-75ce5e4379b7)或更改控件模板（[如何在列表框上禁用突出显示但保持选择？](https://stackoverflow.com/questions/4343793/how-to-disable-highlighting-on-listbox-but-keep-selection)），但我的更改对`Panorama Control`.

在那里您可以看到[全景控件 XAML](https://github.com/MahApps/MahApps.Metro/blob/master/MahApps.Metro/Themes/Panorama.xaml)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:13:21.787

这是样式继承方式的问题，并且很难看出 ListViewItems 和 ListBoxItems 如何协同工作。我通过在后面的代码中插入以下内容来解决此问题。但是，它确实会丢失您选择的项目：

```
var listbox = MyPanorama.FindChildByType<ListBox>();
if (listbox != null)
{
    listbox.SelectedIndex = -1;
} 
```

FindChildByType 是一个简单的搜索，用于返回在全景图下找到的第一个 ListBox。如果您按名称搜索，则模板列表框的 x:Name 为“items”。

# mongodb - 在mongodb中搜索包含一系列点的所有多边形

> ID：16101132
> 
> 赞同：2
> 
> 时间：2013-04-19T09:11:45.827
> 
> 标签：mongodb, geojson

我的问题类似于这个[给定一组多边形和一系列点，找出哪些多边形是点所在](https://stackoverflow.com/questions/6366806/given-a-set-of-polygons-and-a-series-of-points-find-the-which-polygons-are-the)

我有一个 mongodb 数据库，其中包含两个集合、存储一组多边形（意大利省）的**区域和存储一组样本的****点**，每个样本都有一个坐标对。我使用 mongodb 2.4 和 GeoJSON 格式来存储数据，两个集合都有一个 2dsphere 索引。

我能够找到给定点是否在给定多边形内。

现在我想找到包含标本列表的所有多边形，以绘制像这样的地图[http://www.peerates.org/province.png](http://www.peerates.org/province.png)

有没有比遍历所有点并检查它是否在每个多边形内更好的解决方案，利用 mongodb 地理索引？

编辑：我使用存储在 system.js 集合中的函数找到了部分解决方案

```
 function(){
    var found = [];
    var notfound = [];
    db.regions.find().forEach(
        function(region){
            var regionId = region._id;
            var query = {
                    'loc':{
                        $geoWithin: {
                            $geometry: region.loc
                        }
                    }
                };
            var len = db.points.find(query).size();
            if(len>0){
                found.push(regionId);
            }else{
                notfound.push(regionId);
            }
        }
    );
    return {
        "found":found,
        "notfound":notfound
    };
} 
```

遗憾的是，我无法在 mongohq.com 上使用它，看来 eval() 不再受支持。

@RickyA 谢谢，我会考虑转到 postgis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T08:47:05.877

在[mongodb 地理空间库](http://docs.mongodb.org/manual/reference/operator/query/geoIntersects/)`$geoIntersects`中有这样做的。

# javascript - Windows 商店应用程序 - 项目背景颜色

> ID：16101134
> 
> 赞同：0
> 
> 时间：2013-04-19T09:11:51.517
> 
> 标签：javascript, html, css, windows-runtime, windows-store-apps

我无法在拆分应用程序中更改项目的背景颜色。我不知道，如何，因为我已经尝试过使用 css，但没有任何成功。

这是项目的模板（几乎是默认值）：

```
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <div class="item">
        <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title" />
        <div class="item-info">
            <h3 class="item-title win-type-ellipsis" data-win-bind="textContent: title"></h3>
            <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h6>
            <h4 class="item-description" data-win-bind="textContent: description"></h4>
        </div>
    </div>
</div> 
```

CSS尝试：

```
.item {
    background-color: red;
} 
```

这就是它的样子： ![在此处输入图像描述](https://i.stack.imgur.com/C5h3O.png)

另外，我希望将这种紫罗兰色和紫罗兰色（悬停？）周围的浅灰色更改为其他颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:59:52.620

关于你改变紫罗兰色的第二个问题：

您是否将模板用于 ListView？我在我的应用程序中使用它来覆盖默认 CSS。**注意：**这将更改应用程序中的所有 ListView。

```
.win-selectionhint,
.win-listview:not(.win-selectionstylefilled) .win-container.win-selected:hover .win-selectionborder,
.win-listview:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground,
.win-listview:not(.win-selectionstylefilled) .win-container.win-selected:hover .win-selectioncheckmarkbackground,
.win-listview.win-rtl:not(.win-selectionstylefilled) .win-container.win-selected:hover .win-selectioncheckmarkbackground,
.win-listview.win-rtl:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground,
:not(.win-selectionstylefilled).win-listview .win-selectioncheckmarkbackground,
:not(.win-selectionstylefilled).win-listview .win-selected.win-container .win-selectionborder {
   border-color: transparent; /* <----- COLOR HERE. */
} 
```

这将删除所选列表项周围的颜色，并删除所选项目上的悬停颜色。

# html - 表中在 IE 中是粗体/强，但在 chrome 中是正常的

> ID：16101139
> 
> 赞同：0
> 
> 时间：2013-04-19T09:12:11.657
> 
> 标签：html, google-chrome, internet-explorer, html-table

我编写了 5 个 dapbles 脚本，使用 div 将它们正确定位。我在 Chrome 和 IE 中检查过，不同的是，在 IE 中，文本是粗体格式，但在 chrome 中是正常的。我使用了该`<span>`属性，因为我`<p>`的一些图形设计在表格中看起来不太好，但在我使用它的其他地方看起来不错。

我的表格代码：

```
<dic class="elevraadet">
<table align="center">
<tr>
<td><span style="font-size:12px;"><b>Klasse</b></span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;"><b>Namn</b></span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;"><b>Verv</b></span></td>
</tr>
<tr>
<td><span style="font-size:12px;">3ST</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Reynaldo Galaz</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Leiar</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1ST</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Frida Vevle</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Nestleiar</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">2ST</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">&Oslash;yvind Hartveit</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Skrivar</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">2EL</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Robin B. Myking</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Kasserar/vara for skrivar</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">2BU</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Gina Nordpoll</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">2IND</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Anders Skråmestø</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1EL</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Thomas K. Fotland</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1DH</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Nathalie P. Hartveit</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1HS</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Tina-Marie S. Langeland</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1TIPa</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Marcus W. Øye</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>
<tr>
<td><span style="font-size:12px;">1TIPb</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Bjørn Sebastian S. Rongved</span></td>
<td><span style="font-size:12px;">&nbsp;</span></td>
<td><span style="font-size:12px;">Styremedlem</span></td>
</tr>  
</table>
</div> 
```

我的 CSS 代码：

```
.elevraadet
{
border:groove, #09F;
position:absolute;
left:30px;
} 
```

所以我的问题是，我该如何解决这个问题，以使其在 IE 中不会变得粗体/强？
我添加了两张截图，一张来自[Chrome](https://i.stack.imgur.com/5SYuU.png)：

![](https://i.stack.imgur.com/5SYuU.png)

一个来自[IE](https://i.stack.imgur.com/eb9LK.png)：

![](https://i.stack.imgur.com/eb9LK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:49:09.047

这里有两件事要做，就是尝试解决这个问题。

首先，为跨度设置样式，最好使用 CSS 而不是内联样式。

所以把它添加到你的 CSS 文件中

`.elevraadet span { font-wieght: normal; font-size: 12px; }`

其次，没有调用 CSS，因为 div 标签不正确！（用 dic 代替 div）

```
<div class="elevraadet">
<table align="center">
<tr>
<td><span><b>Klasse</b></span></td>
<td><span>&nbsp;</span></td>
<td><span><b>Namn</b></span></td>
<td><span>&nbsp;</span></td>
<td><span><b>Verv</b></span></td>
</tr>
<tr>
<td><span>3ST</span></td>
<td><span>&nbsp;</span></td>
<td><span>Reynaldo Galaz</span></td>
<td><span>&nbsp;</span></td>
<td><span>Leiar</span></td>
</tr>
<tr>
<td><span>1ST</span></td>
<td><span>&nbsp;</span></td>
<td><span>Frida Vevle</span></td>
<td><span>&nbsp;</span></td>
<td><span>Nestleiar</span></td>
</tr>
<tr>
<td><span>2ST</span></td>
<td><span>&nbsp;</span></td>
<td><span>&Oslash;yvind Hartveit</span></td>
<td><span>&nbsp;</span></td>
<td><span>Skrivar</span></td>
</tr>
<tr>
<td><span>2EL</span></td>
<td><span>&nbsp;</span></td>
<td><span>Robin B. Myking</span></td>
<td><span>&nbsp;</span></td>
<td><span>Kasserar/vara for skrivar</span></td>
</tr>
<tr>
<td><span>2BU</span></td>
<td><span>&nbsp;</span></td>
<td><span>Gina Nordpoll</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>2IND</span></td>
<td><span>&nbsp;</span></td>
<td><span>Anders Skråmestø</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>1EL</span></td>
<td><span>&nbsp;</span></td>
<td><span>Thomas K. Fotland</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>1DH</span></td>
<td><span>&nbsp;</span></td>
<td><span>Nathalie P. Hartveit</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>1HS</span></td>
<td><span>&nbsp;</span></td>
<td><span>Tina-Marie S. Langeland</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>1TIPa</span></td>
<td><span>&nbsp;</span></td>
<td><span>Marcus W. Øye</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>
<tr>
<td><span>1TIPb</span></td>
<td><span>&nbsp;</span></td>
<td><span>Bjørn Sebastian S. Rongved</span></td>
<td><span>&nbsp;</span></td>
<td><span>Styremedlem</span></td>
</tr>  
</table>
</div> 
```

# javascript - 无法读取未定义的属性“值”（JS & Typo3）

> ID：16101141
> 
> 赞同：0
> 
> 时间：2013-04-19T09:12:15.477
> 
> 标签：javascript

在我的网站上，我正在使用产品搜索。[请参见此处](http://dyomics.ctw-jena.de/en/products/product-search.html "关联")如果您在搜索中键入例如“630”，您会得到一些结果。现在只能将第一项添加到购物篮中。如果您单击另一个项目，则会出现错误“未捕获的类型错误：无法读取未定义的属性'值'”

但是第一项和任何其他项之间没有区别。

```
<input size="3" maxlength="4" type="text" class="products-input-quantity" id="tt-products-search-id-2" name="ttp_basket[325][quantity]" value="">

<input type="submit" class="btn button-violet" name="order" value="Add to Cart" onclick="if(!document.forms['ShopSearchForm']['ttp_basket[325][quantity]'].value!=''){document.forms['ShopSearchForm']['ttp_basket[325][quantity]'].value=1;};"> 
```

该值已定义...但他找不到它还是为空？！如果我在数量中手动输入一个数字，任何项目都可以添加到购物篮中......但错误仍然在控制台中

好吧，这有点具体，但这仍然是一个 JavaScript 问题：/

# matlab - Matlab中的Parfor

> ID：16101142
> 
> 赞同：1
> 
> 时间：2013-04-19T09:12:15.677
> 
> 标签：matlab, parallel-processing, parfor

我正在尝试将此循环作为 parfor 循环运行：

```
correlations = zeros(1,N);   
parfor i = 1:(size(timestamps,1)-1)
    j = i+1;
    dts = timestamps(j) - timestamps(i);
    while (dts < T) && (j <= size(timestamps,1))
        if dts == 0 && detectors(i) ~= detectors(j)
            correlations(1) = correlations(1) + 2;
        elseif detectors(i) ~= detectors(j)
            dts = floor(dts/binning)+1;
            correlations(dts) = correlations(dts) + 1;
        end
        j = j + 1;
        if j <= size(timestamps,1)
            dts = timestamps(j) - timestamps(i);
        end
    end
end 
```

Matlab给我以下错误：

```
Error: File: correlate_xcorr.m Line: 18 Column: 17
The variable correlations in a parfor cannot be classified.
See Parallel for Loops in MATLAB, "Overview". 
```

第 18 行如下：

```
correlations(1) = correlations(1) + 2; 
```

我不明白为什么这不应该是可能的。相关性的最终值不取决于循环执行的顺序，而仅取决于 dts 和检测器。我在文档中找到了类似的示例，它们可以正常工作。

为什么 Matlab 不能执行此代码，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:33:18.757

由于您从 PARFOR 循环的多次迭代中访问相关性 (1) 的方式，MATLAB 无法确定您的循环是顺序无关的。看起来这个值在某种程度上是“特殊的”，它应该可以制作一个“减少”变量，即替换`correlations(1)`为`correlations_1`或其他东西。

您将遇到的下一个问题是您没有正确“切片” `correlations`. 对于 MATLAB 分析 PARFOR 循环，它需要能够判断每个循环迭代仅写入其输出变量的“切片”。实际上，这意味着您必须使用循环索引来索引输出。

有关 PARFOR 变量分类的更多信息：http: [//www.mathworks.com/help/distcomp/advanced-topics.html#bq_of7_-1](http://www.mathworks.com/help/distcomp/advanced-topics.html#bq_of7_-1)

编辑：

如果您想`correlations`严格按照我认为您在评论中暗示的减少变量的行为，您需要给 PARFOR 一个线索，这就是您的意思：特别是，您需要在每次需要时添加到整个变量。换句话说，更像是：

```
parfor ...
    dummyVec = zeros(1, N);
    dummyVec(elementToIncrement) = 1;
    correlations = correlations + dummyVec;
end 
```

我同意这不是显而易见的。有关更多信息，请参阅[http://blogs.mathworks.com/cleve/2012/11/26/magic-squares-meet-supercomputing/](http://blogs.mathworks.com/cleve/2012/11/26/magic-squares-meet-supercomputing/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:29:54.557

我找到了以下解决方案，它似乎有效。该程序看起来有点不同，但它具有相同的形状。这样，Matlab 被迫认为 x/correlations 是一个减少变量。

```
X = zeros(1,5);
parfor i= 1:1000
    a = zeros(1,5);
    dts = randi(10)-1;
    if dts == 0
        a(1) = (a(1) + 2);
    elseif dts <= 5
        a(dts) = a(dts) +1;
    end
    X = X + a;
end 
```

# c# - 谷歌地图 api 不能用于回发

> ID：16101145
> 
> 赞同：0
> 
> 时间：2013-04-19T09:12:28.883
> 
> 标签：c#, javascript, asp.net

我正在使用谷歌地图 API 在文本框中加载街道。它工作正常。我的问题是在回发时，javascript 中的初始化方法不起作用并且数据没有加载

我在用

```

             函数初始化（）{
            //我的代码
             }
             google.maps.event.addDomListener(window, 'load', 初始化);

```

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:21:36.373

您需要在回发时重新初始化地图，因为代码不会再次运行。如果您使用的是 UpdatePanel，一种方法是绑定到`end_RequestHandler`ie

```
var prm = window.Sys.WebForms.PageRequestManager.getInstance();
prm.add_endRequest(endRequestHandler);

function endRequestHandler()
{
    // Initialize the map again
} 
```

# java - 在 Activiti 中查询任务开始和结束日期

> ID：16101151
> 
> 赞同：2
> 
> 时间：2013-04-19T09:13:06.860
> 
> 标签：java, activiti, bpmn

我正在寻找一种通过过滤完成日期来查询 Activiti 中已完成任务的解决方案。因为一旦完成`act_hi_taskinst`，BPMN 引擎会将已完成的任务条目移动到表中，因此我预计所需的过滤器会在[`HistoricTaskInstanceQuery`](http://activiti.org/javadocs/org/activiti/engine/history/HistoricTaskInstanceQuery.html)类中。但是，没有像. `startedAfter`_ 该表具有和列，因此没有理由不能进行这种查询。`startedBefore``finishedAfter``finishedBefore`[`HistoricProcessInstanceQuery`](http://activiti.org/javadocs/org/activiti/engine/history/HistoricProcessInstanceQuery.html)`start_time_``end_time_`

是否有其他方法可以通过这些属性进行过滤，或者目前解决此问题的唯一方法是`act_hi_tasks`绕过 Activiti 引擎直接查询表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T08:17:09.903

Activiti 提供了[Query API](http://activiti.org/userguide/index.html#queryAPI)，所以不需要`act_hi_taskinst`直接查询。
您的查询可能看起来像这样

```
NativeHistoricTaskInstanceQuery taskQuery = historyService.createNativeHistoricTaskInstanceQuery();
taskQuery.sql("SELECT * FROM "+ managementService.getTableName(HistoricTaskInstance.class)+" WHERE start_time_=#{startTime} AND end_time_=#{endTime}");
taskQuery.parameter("startTime", startTime).parameter("endTime", end_time);
List<HistoricTaskInstance> tasks = taskQuery.list(); 
```

# c# - Is performance hit by using Caller Information attributes?

> ID：16101152
> 
> 赞同：38
> 
> 时间：2013-04-19T09:13:11.770
> 
> 标签：c#, performance, logging, .net-4.5

I am trying to find ways to log method name in an efficient manner w.r.t. speed and maintainability. I guess, In .NET 4.5 [Caller Information attributes](http://msdn.microsoft.com/en-us/library/hh534540.aspx) are exposed just for this purpose except the speed part. I feel these are just syntactic sugars from using `System.Reflection.MethodBase.GetCurrentMethod()` or `stackTrace.GetFrame(1).GetMethod().Name` (Got from [here](https://stackoverflow.com/questions/171970/how-can-i-find-the-method-that-called-the-current-method)). (or) Are these methods give performance benefits too?

In C#, Is there a way to get method name at compile time (as like in [C++](https://stackoverflow.com/questions/2192680/macro-keyword-which-can-be-used-to-print-out-method-name))?

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-19T09:28:11.913

调用者信息属性使 C# 编译器在调用点提供调用者的名称。这发生在编译时，不涉及反射。

```
public void DoProcessing()
{
    LogCall();
}

public void LogCall([CallerMemberName] string memberName = "")
{
     Console.WriteLine(memberName + " was called.");
} 
```

将编译为：

```
public void DoProcessing()
{
    LogCall("DoProcessing");
}

public void LogCall(string memberName)
{
     Console.WriteLine(memberName + " was called.");
} 
```

# c# - How to parse command line arguments

> ID：16101157
> 
> 赞同：4
> 
> 时间：2013-04-19T09:13:38.387
> 
> 标签：c#, command-line

I want to parse a set of command line arguments that look like:

```
-p[project file path] -s[name 1]=[value 1] ... -s[name n]=[value n] 
```

Where there is exactly one project `p` and any number of settings `s`.

I have tried using `NDesk.Options`

```
var set = new OptionSet {
    { "p=", "the project file", v => { /* do stuff */ } },
    { "s=", "a setting", (m, v) =>  { /* do stuff */ } },
}; 
```

and this works well in most cases, but when `value` is a file path (even quoted) the `\` causes the parser to drop everything to right. I've hacked round this by overriding the parse method on my own `OptionSet` class that I've inherited from `NDesk.Options.OptionSet`, but I was wondering if there are any libraries that can handle this kind of functionality out of the box?

**UPDATE**

Sorry it wasn't the `\` I think it is the `:` anyway a set of failing examples is:

```
-sSetting=C:\Temp
-sSetting="C:\Temp"
-s"Setting=C:\Temp" 
```

They all fail with `OptionException Error: Found 3 option values when expecting 2.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:25:04.547

**更新**：更新以处理设置值中的冒号。

好的，所以在这里您遇到了[NDesk.Options](http://www.ndesk.org/Options)的隐式默认值之一，即在多值参数中，两者`:`和`=`都被视为值分隔符，这意味着`Setting=C:\Path`解析为 3 个值（Setting、C、\Path）而不是您的预期二。

为了解决这个问题，您只需修改`-s`选项定义以仅将`=`其视为有效分隔符，方法是编写`"s={=}"`而不是`"s="`.

*原始答案*，当它是关于反斜杠时。

我使用[了 NDesk.Options](http://www.ndesk.org/Options)，没有遇到引用路径和反斜杠的任何问题。

这是我的示例程序：

```
public static void Main(string[] args)
{
    string parsedPath = null;
    Dictionary<string, string> parsedValues = new Dictionary<string, string>();
    var set = new OptionSet() 
    { 
        { "p=", "the project path", v => parsedPath = v }, 
        { "s=", "a setting", (m, v) => { parsedValues.Add(m, v); } },
    };
    set.Parse(args);
    Console.WriteLine(parsedPath ?? "<NULL>");
    foreach (var keyValuePair in parsedValues)
    {
        Console.WriteLine(keyValuePair.Key + "::::" + keyValuePair.Value);
    }
} 
```

你会看到你的定义和我的不同：`p=`意味着选项有一个必需的值，而你的定义意味着它`p`是一个布尔标志值。

在 p 设置或 s 设置中，我没有遇到任何关于反斜杠的问题。您能否尝试使用 0.2.1 版本的[NDesk.Options](http://www.ndesk.org/Options)运行该程序并显示哪些值失败？

以下是我运行的一些示例，均已成功解析：

```
-p=..\Path
-p..\Path
-pC:\Hello
-pHello\World
-p"Hello\World"
-s"Greeting=Hello\World"
-sGreeting="Hello\World"
-sGreeting=Hello\World
-sGreeting="Hello\My World"
-s"Greeting=Hello\My World" 
```

以下是一些确实会产生另一个值得一提的结果的解析：

```
-sGreeting=Hello\My World -- // This gives Greeting="Hello\My" 
```

注意：如果这有任何改变，我使用项目中的 Options.cs 源代码文件运行 NDesk.Options，而不是使用已编译的 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:23:18.893

我成功使用了一段时间的[命令行解析器库。](http://commandline.codeplex.com/)效果很好，简单，[并且允许带引号的路径](http://commandline.codeplex.com/discussions/264851)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:21:47.507

如果您使用以下内容，所有拆分都将为您完成：

```
public static void Main(string[] args)
   {
       List<string> Settings = new list
       Console.WriteLine("parameter qty = {0}", args.Length);
       for(int i = 0; i < args.Length; i++)
       {
           Console.WriteLine("Arg[{0}] = [{1}]", i, args[i]);
       } 
```

之后，一组简单的 if 应该足以根据每个参数为您提供所需的操作。您可以根据需要使用字符串匹配或正则表达式遍历参数数组中的每个参数，以查看它们符合哪些参数。例如，您可以在 for 循环中添加一些代码：

```
public static void Main(string[] args)
   {
       List<string> Settings = new List<string>();
       Console.WriteLine("parameter qty = {0}", args.Length);
       for(int i = 0; i < args.Length; i++)
       {
           Console.WriteLine("Arg[{0}] = [{1}]", i, args[i]);
           if (i>0)
               {
                   // this gives you a nice iterable list of settings
                   Setting.Add(args[i]);
               }
       }
       foreach(string setting in Settings)
           {
               //do the desired action
           }
    } 
```

**附录：** 但是，这将仅提供基本功能（如果您像我一样来自 C++ 并且必须自己做事，从 C# 开发人员的角度来看，我现在意识到这不是很好），您需要处理自己解析变体命令（如注释中所述`/p--p or /Project= -Project=`，变体都需要在您制作的代码中处理）。但是，对于开箱即用的解决方案，我建议：[Ndesk.Options](http://www.ndesk.org/Options)或[Mono.Options](https://github.com/mono/mono/blob/master/mcs/class/Mono.Options/Mono.Options/Options.cs) 两者的工作方式相似，如果可移植性很重要，我会倾向于 Mono.Options。

在使用中，您可以将代码更改为

```
var set = new OptionSet {
    { "p=|project=", "the project file", v => { /* do stuff */ } },
    { "s=|setting=", "a setting", (m, v) =>  { /* do stuff */ } },
}; 
```

这应该有望为您提供所需的功能（来自页面末尾的 ndesk 示例，[甚至](http://www.ndesk.org/doc/ndesk-options/NDesk.Options/Option.html)还有一个编码示例使用）。

希望这比我以前对您的回答更有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-20T17:44:40.233

```
class Program
    {
        static void Main(string[] args)
        {
            string cmd = "car.exe -ip 1.18.4.156 -port 123";
            string hostname = "localhost";
            string port = "5505";

            string[] array = cmd.Split(' ');

            int hostnameIndex = Array.FindIndex(array, key => key == "-ip");
            int portIndex = Array.FindLastIndex(array, key => key == "-port");

            if (hostnameIndex != -1)
            {
                hostname = array[hostnameIndex + 1];
            }

            if (portIndex != -1)
            {
                port = array[portIndex + 1];
            }

            Console.WriteLine("ip :" + hostname);
            Console.WriteLine("port :" + port);

        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:39:39.503

您可以在一个字符串中加入所有参数，然后可以使用正则表达式：

```
((?<SkeyvaluePair>-s(?<key>[^=]+)\s*=\s*(?<value>[^-]+))|(?<PkeyvaluePair>-p(?<Pvalue>[^-]+)))* 
```

然后将字符串分成组

```
var groups = new Regex(yourRegex).Match(message).Groups; 
```

而不是提取您需要的信息

```
var pairs = groups["keyvaluepair"].Captures.Cast<Capture>() 
```

# visual-studio - 如何找出编辑器中的项目颜色

> ID：16101159
> 
> 赞同：2
> 
> 时间：2013-04-19T09:13:40.130
> 
> 标签：visual-studio, visual-studio-2012, colors, editor, resharper

当我尝试在 Visual Studio 中更改某些项目的颜色时，有时我会遇到困难。例如，我想看看我的`/// <reference path="... />`打火机，因为我使用深色背景。

我怎样才能找到合适`Environment -> Fonts and Colors -> Display Items`的规则来设置颜色。这更困难，因为我使用带有自己规则的 Resharper。我可以想象他们的规则还有更多的扩展。

那么，有什么办法可以做到吗？一些有用的插件？VS菜单中的任何选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T04:24:12.303

我有一个类似的问题。由于升级到 2012，我的颜色最近发生了很大变化。我发现这可能会对您有所帮助。

[http://msdn.microsoft.com/en-us/library/kw7t0545.aspx](http://msdn.microsoft.com/en-us/library/kw7t0545.aspx)

# highcharts - 在 highstock 中调用点 'x' 和点 'y'

> ID：16101161
> 
> 赞同：0
> 
> 时间：2013-04-19T09:13:51.993
> 
> 标签：highcharts, highstock

假设数据highstock 'x', 'y' 和'b' 中有一个点，如果我们想在tooltip 中指向'y' 可以通过调用point.y 来调用，如何调用point.b 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:46:06.500

用于`point.options.b`获取您的自定义点选项。请记住，在 Highstock 中您有 dataGrouping，它不会对自定义选项进行分组。

# python - regex find what's after slash without showing the slash

> ID：16101164
> 
> 赞同：0
> 
> 时间：2013-04-19T09:13:56.943
> 
> 标签：python, regex

I have a script that split the informations in a line, i've succeeded to split it and extract the informations i need but i have the slash that shows up :/ i'de like to get only what's after it here's an example:

```
import re 

data = "12:05:12.121    O:CLASS (SMS:/xxx.xxx@xxx.xx) R:VOICE/1654354 mid:4312" 
ms = re.match(r'(\S+).*mid:(\d+)', data) # extract time and mid 
k = re.findall(r"/\S+", data ) # extract source and destination 
result = { 'time':ms.group(1), 'mid':ms.group(2), "source":k[0],"Destination":k[1]}

print result 
```

and here's the result `{'source': '/xxx.xxx@xxx.xx)', 'Destination':'/1654354', 'mid':'4312','time':'12.05.12.121'}`

and the result i want is without slash like here:

```
{'source': 'xxx.xxx@xxx.xx)', 'Destination':'1654354', 'mid':'4312','time':'12.05.12.121'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:15:42.623

将 包装`\S+`在一个捕获组中：

```
k = re.findall(r"/(\S+)", data) 
```

这是使用一个正则表达式获取所有信息的另一种方法：

```
import re 

data = "12:05:12.121      O:CLASS (SMS:/xxx.xxx@xxx.xx) R:VOICE/1654354 mid:4312" 
result = re.search(r'''
      (?P<time>.*?)
      \s+
      .*?
      \s+
      \(
          (?P<type>.*?):/(?P<source>.*?)
      \)
      \s+
      .*/(?P<destination>\d+)
      \s+
      mid:(?P<mid>\d+)
''', data, re.VERBOSE)

print result.groupdict() 
```

# java - how to prevent running same JInternalFrame more than once

> ID：16101165
> 
> 赞同：2
> 
> 时间：2013-04-19T09:14:00.077
> 
> 标签：java, swing, jframe, jinternalframe, actionevent

How can you prevent the `JInternalFrame` not to open more once, currently in my application it opens many times. Also how can I make my application run only if there is not the same application running.

This is the code for `JInternalFrame`

```
private void Cash_ButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            

    Provider provider = new Provider();
      MainMenu.add (provider);
       provider.setClosable(true);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T14:11:41.927

尝试添加条件并制作`provider`局部变量

```
private Provider provider = new Provider();

public Your_Class_Name(){
    provider.setClosable(true);
}

private void Cash_ButtonActionPerformed(java.awt.event.ActionEvent evt) {
    if(provider.isVisible()) return;
    MainMenu.add (provider);
} 
```

# c++ - 使用 static_assert() 提供更好的编译时错误（比编译器）

> ID：16101169
> 
> 赞同：1
> 
> 时间：2013-04-19T09:14:13.743
> 
> 标签：c++, c++11, compiler-errors, static-assert

`const`昨天，我花了很长时间才解决由从非对象调用成员函数引起的编译时错误`const`，如下例所示：

```
// my utility header
template<typename derived>
struct crtp_task : task
{
  std::list<task*> list;

  // note: cannot be const, as task::allocate_child() isn't
  template<typename... Args>      
  void add_child(Args&&... args)
  {
    list.push_back(new(task::allocate_child())
                   derived(std::forward<Args>(args)...));
  }
  /* ... */
};

// an application
struct my_task : crtp_task<my_task>
{
  some_data data;
  /* ... */
  my_task(some_data d) data(d) {}
  void generate_children() const    // constant member
  {
    /* ... */
    some_data child_data = /* ... */;
    this->add_child(child_data);    // error: cannot call non-const member
  }
}; 
```

clang 错误消息是几行而且太神秘（没有提到`const`），但是 gcc 提出了一个更好的错误（虽然更多行，但最终抱怨我忽略了 cv 限定符）。

所以，为了避免将来发生这种事情，我考虑`static_assert()`在我的实用程序头中使用。我幼稚的做法

```
// my utility header
template<typename derived>
struct crtp_task : task
{
  std::list<task*> list;

  // note: cannot be const, as task::allocate_child() isn't
  template<typename... Args>      
  void add_child(Args&&... args)
  {
    list.push_back(new(task::allocate_child())
                   derived(std::forward<Args>(args)...));
  }

  // note: catch call from const objects
  template<typename... Args>      
  void add_child(Args&&...) const
  {
    static_assert(false,"add_child() const called");
  }      
  /* ... */
}; 
```

失败，因为编译器会立即触发错误，即使模板`void add_child() const`从未被调用。我还能如何完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:50:49.283

`static_assert`必须依赖于模板实例化后延迟的模板参数。否则，一旦所有信息可用，它们就会被“调用”，在你的情况下，它们`false`在编译的早期就准备好了。

为了解决这个问题，我通常让它“人为地”依赖于一个模板参数，就像在：

```
template<class FOO>
void foo( const FOO& )
{
    static_assert(sizeof(FOO)==0,"This function should never be instantiated");
} 
```

也许在您的情况下，只是删除该功能可能是更好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:53:41.213

如果您希望某些重载在重载决议中被选中时导致编译错误，您可以使用新`= delete`功能。

```
template<typename... Args>
void add_child(Args&&...) const = delete; 
```

这将产生一个类似于“使用已删除功能`void add_child(Args&&...) const`”的简单错误。

# html - Skeleton CSS - 响应式表单

> ID：16101174
> 
> 赞同：0
> 
> 时间：2013-04-19T09:14:31.517
> 
> 标签：html, css, mobile, responsive-design, skeleton-css-boilerplate

我有一个使用骨架 css 实现的表单。我使用的是三列（即三分之一列）布局，但是由于列内容的各自长度，这导致了很多空白。我更喜欢类似于以下的水平布局：

**文本框1 文本框2 文本框3**

**文本框 4 文本框 5 文本框 6**

然后它会在移动设备上崩溃，如下所示：

**文本框1**

**文本框2**

**文本框3**

**文本框4**

**文本框5**

**文本框6**

到目前为止，我认为我能做到这一点的唯一方法是将每个文本框包装在它自己的“三分之一”列中。有更清洁的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:17:10.173

将类设置为您的文本框（或`input[type="text"]`）和 CSS：

对于桌面：

```
.yourclass {
    width: 33%;
    float: left;
 } 
```

对于手机：

```
@media only screen and (max-device-width: 480px) {
    .yourclass {
         width: 100%;
         float: left;
    }
} 
```

这：[https](https://mislav.net/2010/04/targeted-css/) ://mislav.net/2010/04/targeted-css/可能会有所帮助。

# php - 使用 php 和 javascript 自定义打印预览页面

> ID：16101181
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:14:41.870
> 
> 标签：php, javascript, ajax

我想知道是否有办法自定义打印预览页面。我的页面“打印页面”上有一个按钮，如果我按下它，我将获得打印预览页面。在这个页面有一些用户的信息。我想验证单击此按钮的用户是否已登录，如果已登录，则打印预览页面中将只有他的信息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:19:41.073

您可以设置[特定的打印 CSS 样式表](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)。这可能会隐藏或显示一些应该隐藏或仅显示在打印输出上的内容。这个“打印”样式表不会影响正常的浏览器视图。

示例 HTML：

```
<div id="navigation"><a href="/">HOME</a></div>
<div id="print_copy_right" style="display:none">(c) domain.com</div> 
```

示例 CSS：

```
@media print {
   #navigation_bar {display:none}
   #print_copy_right {display:block}
} 
```

# php - 如何为管理员和用户创建通用登录？

> ID：16101183
> 
> 赞同：-5
> 
> 时间：2013-04-19T09:14:44.080
> 
> 标签：php, mysql, database, login, mysqli

我有两个表，即**ADMIN**和**USER**我如何使用 php 构建通用登录表单？我只想要那种形式的两个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:16:26.987

**在表用户**中设置一个用户类型字段，例如，

**usertype = 1**对应于管理员，**usertype = 0**对应于用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:18:51.503

理想情况下，您应该有一个名为 user 的表，然后是另一个名为 user_role 的表，其中包含普通用户或管理员的用户角色。在您的情况下设置另一列。

比方说：

```
user_type ='1'; 
```

或者

```
user_type ='0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:16:33.510

如果您使用某种权限级别，您可以有一个包含所有用户的所有内容的 users 表，然后是一个包含所有权限内容的具有相同主键（用户名）的 user_admin 表。

您可以在选择和的两个表上执行 JOIN `username`，但您必须停止将相同的用户名放入两个表中。`password``salt`

# java - actionInvocation.invoke() 没有调用动作，而是给出了空指针异常

> ID：16101184
> 
> 赞同：0
> 
> 时间：2013-04-19T09:14:47.290
> 
> 标签：java, struts2

我是Java的初学者。我想验证我的会话，如果没有退出会话，没有人将能够登录。我正在通过拦截器执行此操作，并且我已经创建了拦截器类，其中如果会话对象为 null 并且如果会话对象不等于 null，那么它将调用该操作但`actionInvocation.invoke()`不工作，并且它给出空指针异常。

```
public class AuthenticationInterceptor implements Interceptor{
    private static final long serialVersionUID = 1L; 

    public AuthenticationInterceptor() {
    }

    @Override
    public void destroy() {
    }

    @Override
    public void init() {
    }

    @Override
    public String intercept(ActionInvocation actionInvocation) throws Exception {
        String vString=null;
      try{
            HttpServletRequest request = (HttpServletRequest) actionInvocation.getInvocationContext().get(StrutsStatics.HTTP_REQUEST);
             HttpSession session = request.getSession();
             System.out.println(session.getAttribute(Constant.CURRENT_USER));
             UserDTO userDTO=(UserDTO) session.getAttribute(Constant.CURRENT_USER);

        if(userDTO == null){
            System.out.println("userdto=null"+userDTO);
            vString = "login";
        }
        else if(!(userDTO).equals(null)){
                System.out.println("userdto!!!=null"+userDTO.getUserId());

                System.out.println("test...   "+actionInvocation.invoke());
                vString= actionInvocation.invoke();
            }
        }catch (Exception e) {
            e.printStackTrace();
        }return vString;

        }

    private void addActionError(Object action, String message) {
        if (action instanceof ValidationAware) {
            ((ValidationAware) action).addActionError(message);
        }
    }

} 
```

下面是xml文件..

```
<interceptors>
            <interceptor name="authenticate" class="wm.com.erp.utility.AuthenticationInterceptor"/>

<interceptor-stack name="authenticateStack">
                <interceptor-ref name="authenticate"/>
            </interceptor-stack>
        </interceptors>

        <global-results>
            <result name="login" type="redirect">/index.jsp</result>
        </global-results>
<action name="Assignment" class="wm.com.erp.action.AssignmentAction" method="AssignmentList">
            <interceptor-ref name="authenticateStack"/>

            <result name="success">/Assignment.jsp</result>
            <result name="input">/home.jsp</result>
        </action> 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:25:35.180

```
Map<String,Object> session = invocation.getInvocationContext().getSession();

if(session.isEmpty())
      return Action.ERROR; // session is empty/expired error must be redirect on

return invocation.invoke(); 
```

如果您有问题，请在此之后输入此代码，然后请发布您的异常的堆栈跟踪

# wordpress - Yoast SEO 和自定义字段

> ID：16101185
> 
> 赞同：0
> 
> 时间：2013-04-19T09:14:58.203
> 
> 标签：wordpress

我想知道是否可以使用高级自定义字段 - 所见即所得编辑器作为主要内容的默认编辑器并让 yoast 读取它而不是默认值？

或者，如果这不可能，那么是否可以将内容从 acf 复制到主编辑器。

或者如果有其他方法请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T06:00:38.250

这个答案来得有点慢，但我们有同样的问题，并决定构建一个插件来做到这一点：

[http://wordpress.org/plugins/ns-seo-custom-fields/](http://wordpress.org/plugins/ns-seo-custom-fields/)

我们刚刚发布它，发现其他人正在寻找类似这个问题的解决方案，并希望它对伟大的 WP 社区有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T13:37:41.513

您可以使用几种解决方案。如果您在插件目录中搜索 Yoast 和 ACF，您可以找到您最喜欢的一个：[https ://wordpress.org/plugins/search.php?q=yoast+ACF](https://wordpress.org/plugins/search.php?q=yoast+ACF)

我们有自己的插件：[https ://wordpress.org/plugins/yoast-seo-acf-analysis/](https://wordpress.org/plugins/yoast-seo-acf-analysis/)

这是开源的，所以如果您发现任何问题或想到增强功能，您可以在 github 项目中创建问题：[https ://github.com/Yoast/yoast-acf-analysis](https://github.com/Yoast/yoast-acf-analysis)

希望这对您有所帮助。

来自 Yoast 的吉普

# jquery - 这个错误是什么意思请求不成功：nsresult：“0x80004005（NS_ERROR_FAILURE）

> ID：16101187
> 
> 赞同：3
> 
> 时间：2013-04-19T09:15:04.157
> 
> 标签：jquery, colorbox

我正在尝试使用颜色框并避免冲突，我正在使用 noConflict() 方法，当我加载页面时我没有收到错误，但是当我打开颜色框窗口时，我看到以下错误

```
Request unsuccessful: [Exception... "Failure" nsresult: "0x80004005 (NS_ERROR_FAILURE)" location: "JS frame :: http://www.abc.com/assets/js/jquery-1.8.3.js :: .send :: line 8434" data: no] 
```

下面是我用来初始化颜色框的代码

```
 jQuery().ready(function(){
  var $j = jQuery.noConflict();
  $j(".cart_items").colorbox({width:"60%",Height:"50%",onLoad: function(){$j('#cboxClose').remove();},onComplete:function(){$j("form[name='cart']").bind("submit");}});
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:49:20.127

如果您提供的网址位于您的外部`server`，则您有权限问题。您无法使用`XMLHttpRequest`.

请参阅：[NETWORK_ERROR：XMLHttpRequest 异常 101](https://stackoverflow.com/questions/2235929/network-error-xmlhttprequest-exception-101)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-09T22:07:02.727

这是一篇旧文章，但值得一提的是，当目标页面位于同一域但使用 HTTPS 时，我收到此错误。

问题场景：调用页面：**http** ://sub.domain.com/caller.aspx 目标页面：**https** ://api.domain.com/uploder.aspx

解决方案：当我同时使用 HTTPS 时，问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-17T18:17:12.517

就我而言，我`<form target="_blank">`的来源相同。问题是我的浏览器（Firefox）阻止了弹出窗口。在授予我的网站从浏览器菜单打开弹出窗口（允许弹出窗口）的权限后，我不再收到该错误。

# android - 在 OnCreate() Android 中为联系人调用 onActivityResult

> ID：16101191
> 
> 赞同：0
> 
> 时间：2013-04-19T09:15:07.250
> 
> 标签：android, android-activity, android-contacts

我从另一个问题中得到了这个代码，但我不知道如何`onActivityResult()`在我的活动中调用这个类`onCreate()`来显示我手机中的第一个联系人。另外，“ `if (requestCode == RQS_PICKCONTACT){`”和“ `RQS_PICKCONTACT`”代表什么？有人可以澄清一下吗？

```
public class MainActivity extends Activity {

    Button buttonReadContact;
    TextView textPhone;

    final int RQS_PICKCONTACT = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttonReadContact = (Button)findViewById(R.id.readcontact);
        textPhone = (TextView)findViewById(R.id.phone);

        buttonReadContact.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                //Start activity to get contact
                /*final Uri uriContact = ContactsContract.Contacts.CONTENT_URI;
                Intent intentPickContact = new Intent(Intent.ACTION_PICK, uriContact);
                startActivityForResult(intentPickContact, RQS_PICKCONTACT);
                */
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                // BoD con't: CONTENT_TYPE instead of CONTENT_ITEM_TYPE
                intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
                startActivityForResult(intent, RQS_PICKCONTACT); 
            }});

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if (resultCode == RESULT_OK) {
            if(requestCode == RQS_PICKCONTACT) {
                Uri returnUri = data.getData();
                Cursor cursor = getContentResolver().query(returnUri, null, null, null, null);

                if (cursor.moveToNext()) {
                    int columnIndex_ID = cursor.getColumnIndex(ContactsContract.Contacts._ID);
                    String contactID = cursor.getString(columnIndex_ID);

                    int columnIndex_HASPHONENUMBER = cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER);
                    String stringHasPhoneNumber = cursor.getString(columnIndex_HASPHONENUMBER);

                    if(stringHasPhoneNumber.equalsIgnoreCase("1")){
                        Cursor cursorNum = getContentResolver().query(
                                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                null, 
                                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=" + contactID, 
                                null, 
                                null);

                        //Get the first phone number
                        if(cursorNum.moveToNext()){
                            int columnIndex_number = cursorNum.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
                            String stringNumber = cursorNum.getString(columnIndex_number);
                            textPhone.setText("0"+stringNumber);
                        }

                    } else {
                        textPhone.setText("NO Phone Number");
                    }

                } else {
                    Toast.makeText(getApplicationContext(), "NO data!", Toast.LENGTH_LONG).show();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T19:15:43.953

当您调用 startActivityForResult(intent, **requestCode** )

当用户返回调用活动时调用 onActivityResult

**requestCode** //你可以通过调用startActivityForResult来启动多个活动，所以这个值是为了区分它们

**resultCode** //这个值是被调用的activity设置的，用来表示预期的操作是否成功。

**data** //这是一个 Intent 类型的对象，其中包含被调用活动返回的数据。

在执行此部分时在您的代码中：

```
 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                // BoD con't: CONTENT_TYPE instead of CONTENT_ITEM_TYPE
                intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);

                startActivityForResult(intent, RQS_PICKCONTACT); 
```

新活动已启动，当用户通过选择联系人从该活动返回时 onActivityResult 被调用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-10T06:56:52.663

onActivityResult 在你开始意图或你选择一个联系人之后被调用。RQS_PICK_CONTACT 你可以随意改变。像 2 、 3,4 或其他数字。它只是 onActivityResult 中 requestCode 的标识，因此您可以根据需要进行操作。

# image-processing - 如何消除一个点与自身的匹配？

> ID：16101195
> 
> 赞同：0
> 
> 时间：2013-04-19T09:15:10.913
> 
> 标签：image-processing, match, copy-paste, point, sift

我在一张图像上应用了 SIFT，但两次，例如：

[image1, descript1, location1] = sift('book.pgm'); [image2, descript2, location2] = sift('book.pgm');

匹配功能后它会显示所有点都匹配，我想消除所有自动匹配，即一个点与自身的匹配。

在图像中某些区域是复制粘贴的，我只想显示匹配的点。

有人有建议怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:14:42.790

以下步骤可能有效，但我不能确定。

获取一组匹配项，以便为第一张图像中的每个描述符提取 2 个最佳匹配项。然后使用 RANSAC 计算单应性。[你可以在这里](http://code.opencv.org/projects/opencv/repository/revisions/master/raw/samples/cpp/tutorial_code/features2D/SURF_Homography.cpp)找到一个教程，但是你可以很容易地将 SURF 替换为 SIFT 或任何其他描述符。找到内部匹配集，它应该由相同图像中对应点之间的匹配组成。删除所有这些匹配项。

现在计算剩余匹配的基于 RANSAC 的单应性并找到内点集。该集合*可能*对应于复制粘贴的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:25:54.120

您可能想尝试的另一种方法是：

*   获取两个图像的像素差异。然后，差异图像将仅包含复制粘贴的区域。
*   从差异图像创建掩码，即差异图像中的任何非零像素在掩码上变为 1。
*   在图像 1 和图像 2 的掩码版本之间进行特征匹配。

请记住，这仅在重复图像不是第一个图像的旋转版本时才有效。

# java - Initializing camel from Spring annotation config

> ID：16101196
> 
> 赞同：7
> 
> 时间：2013-04-19T09:15:12.273
> 
> 标签：java, spring, apache-camel

I am trying to learn Spring and understand how it works. I have followed some tutorials in setting up Spring and Camel, and have had it working using default setups.

I am now attempting to convert as much as possible of my configuration XML-files to Java-classes. So far I have been successful in creating the camel-routes in a Java-class (extending SpringRouteBuilder and implementing configure() ), and all the beans from my spring-configuration file (Bean->Function with @Bean). The only part I am missing is the camelContext definition (?) that starts my camel routes (I think...):

```
<camel:camelContext id="camel5">
    <camel:package>net.krg.kneip.routing</camel:package>
</camel:camelContext> 
```

What would the equivalent non-XML of this be?

Not sure if it will help, but here is my AppConfig class so far: [http://pastebin.com/vsRAbpK1](http://pastebin.com/vsRAbpK1)

Thanks!

**SOLUTION:**

```
@Bean
public CamelContext camel() throws Exception{   
  CamelContext camelContext = new DefaultCamelContext();    
  camelContext.addRoutes(new net.krg.kneip.routing.Routes());
  camelContext.start();
  return camelContext;      
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T09:43:38.820

```
CamelContext context = new DefaultCamelContext(); 
```

我想这就是你要找的。

[在这里阅读更多](http://camel.apache.org/walk-through-an-example.html)

# xml - Is the ]]> sequence really not legal in the content of an XML-tag?

> ID：16101197
> 
> 赞同：3
> 
> 时间：2013-04-19T09:15:13.120
> 
> 标签：xml, escaping, standards

I have an XML document with a tag that contains a user entered message, I would like to avoid unnecessary escaping of characters.

According to the link below the only strictly illegal characters are "<" and "&".

> **Note**: Only the characters "<" and "&" are strictly illegal in XML. The greater than character is legal, but it is a good habit to replace it.
> 
> [http://www.w3schools.com/xml/xml_syntax.asp](http://www.w3schools.com/xml/xml_syntax.asp)

But in some parsers i encountered problems with the sequence ]]>, is this due to problems with the parsers or is it really defined as illegal somewhere in the XML-standard?

Example message:

```
<?xml version="1.0" encoding="UTF-8" ?> 
<root>
  <message>&lt;!-- -- -- &lt;![CDATA[&quot;TEST&quot;]]></message>
  <signature>Evil</signature>
</root> 
```

As you can see < and & are escaped and this message is successfully parsed by C++ tinyxml and Java JAXB. Both Firefox 20.0.1 and IE 8.0 tell me

> XML Parsing Error: not well-formed

and

> The literal string ']]>' is not allowed in element content.

respectively.

Is this really a standard enforced behavior?

**EDIT:** Should have searched some more it seems, [Legally use CDATA in XML](https://stackoverflow.com/questions/2468327/legally-use-cdata-in-xml). So I guess the XML parser in Firefox and IE are just broken?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:25:38.177

从[XML 规范](http://www.w3.org/TR/xml/#syntax)（强调我的）：

> & 符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。如果在其他地方需要它们，它们必须分别使用数字字符引用或字符串“ `&amp;`”和“ `&lt;`”进行转义。**右尖括号 (>) 可以使用字符串 " `&gt;`" 表示，并且为了兼容性，当它出现在内容中的字符串 " " 中时，必须使用 " `&gt;`" 或字符引用进行转义`]]>`，当该字符串未标记CDATA 部分的结尾。**

这意味着只要`]]>`不使用分隔符来标记 CDATA 部分的结尾以*供读取此文档的 XML 解析器使用，*不转义它就是不合法的，即使它不在 CDATA 的上下文中发生部分。

我不熟悉浏览器内部使用的 XML 解析器，但鉴于出于兼容性原因，此要求已到位，您的猜测似乎是正确的。

# java - 通过局部变量访问 volatile 字段

> ID：16101203
> 
> 赞同：6
> 
> 时间：2013-04-19T09:15:31.577
> 
> 标签：java, performance, concurrency, volatile

这个问题在某种程度上是这个问题的延续和扩展，因为我认为这是一个**完美的**问题：[分配给局部变量在这里有什么帮助？](https://stackoverflow.com/questions/10512782/how-does-assigning-to-a-local-variable-help-here/10512895#10512895)

这个问题基于`Item 71`of `Effective Java`，建议通过在`volatile`字段访问中引入局部变量来提高性能：

```
private volatile FieldType field;  
FieldType getField() {  
    FieldType result = field;  
    if (result == null) { // First check (no locking)  
        synchronized(this) {   
        result = field;  
        if (result == null) // Second check (with locking)  
            field = result = computeFieldValue();  
        }  
    }  
    return result;  
} 
```

所以，**我的**问题更常见：

**我们是否应该始终`volatile`通过将字段的值分配给局部变量来访问字段？** *（以存档最佳性能）*。

即一些成语：

1.  我们有一些`volatile`领域，就叫它吧`volatileField`；

2.  如果我们想在多线程方法中读取它的值，我们应该：

    1.  创建具有相同类型的局部变量：`localVolatileVariable`
    2.  分配 volatile 字段的值：`localVolatileVariable = volatileField`
    3.  从此本地副本中读取值，例如：

        ```
        if (localVolatileVariable != null) { ... } 
        ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:06:48.957

如果您计划执行任何类型的多步逻辑（当然假设该字段是可变的），则*必须将 volatile 变量分配给本地字段。*

例如：

```
volatile String _field;

public int getFieldLength() {
  String tmp = _field;
  if(tmp != null) {
    return tmp.length();
  }
  return 0;
} 
```

如果您没有使用 的本地副本`_field`，则值可能会在“if”测试和“length()”方法调用之间发生变化，从而可能导致 NPE。

除了通过不进行超过一次易失性读取来提高速度的明显好处之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:39:07.547

硬币有两个面。

一方面，对 volatile 的赋值就像一个内存屏障，JIT 不太可能使用 computeFieldValue 调用重新排序赋值。

另一方面，理论上这段代码会破坏 JMM。因为由于某些原因，某些**JVM 被允许**通过赋值重新排序 computeFieldValue 并且您会看到部分初始化的对象。只要变量读取不是变量写入的顺序，这是可能的。

```
field = result = computeFieldValue(); 
```

**之前没有发生**

```
if (result == null) { // First check (no locking) 
```

只要 Java 代码应该是“一次编写，到处运行”，DCL 就是一种不好的做法，应该避免。此代码已损坏，不是考虑的重点。

如果您在一个方法中多次读取 volatile 变量，通过首先将其分配给局部变量，您可以最大限度地减少此类读取，这会更昂贵。但我不认为，你会得到性能提升。这可能是理论上的改进。这种优化应该留给 JIT，而不是开发人员考虑的重点。我同意[这一点](https://stackoverflow.com/a/1090377/2031799)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:59:21.503

他没有可能对 volatile 变量进行**两次读取，而是只读取一次。**读取 volatile 可能比通常的变量要慢一些。但即便如此，我们在这里谈论的是纳秒。

# c# - Load xml and xslt from embedded resource in Saxon 9.4he

> ID：16101213
> 
> 赞同：5
> 
> 时间：2013-04-19T09:16:19.153
> 
> 标签：c#, xml, xslt, uri, saxon

I am using Saxon 9.4 home edition ([Saxon-HE 9.4 .NET](http://saxon.sourceforge.net/#F9.4HE)) to get support for XSLT 2.0 and XPath 2.0, and XQuery 1.0 in .NET. My code crashes when I load files without an URI.

1.  Is it possible to load xml/xsl documents without an URI related to the document loaded?
2.  If not, is there any way to define URI for elements embedded in dll-files?

Any other solutions will also be appreciated, my only term is that the files must be loaded from within the dll-file.

My code works perfectly as long as i load xml/xsl from file:

```
const string sourcePath = @"C:\test\TestInvoiceWithError.xml";
const string xsltpath = @"C:\test\UBL-T10-BiiRules.xsl"; 
```

When i try to load from embedded resource the code throws an exception stating *'No base URI supplied'*:

```
Stream sourceStream = GetEmbeddedResource("TestProject1.testfiles.TestInvoice.xml");
Stream xsltStream = GetEmbeddedResource("TestProject1.testfiles.UBL-T10-BiiRules.xsl"); 
```

I have also created Uri's for resources with relative path which throws the exception *'This operation is not supported for a relative URI.'*:

```
Uri sourceUri = new Uri("/TestProject1;component/testfiles/TestInvoice.xml",     UriKind.Relative);
Uri xsltUri = new Uri("/TestProject1;component/testfiles/UBL-T10-BiiRules.xsl.xml", UriKind.Relative); 
```

Here is my code:

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Reflection;
using System.Text;
using System.Xml;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Saxon.Api;

namespace TestProject1
{
    [TestClass]
    public class XsltTest
    {
        [TestMethod]
        public void SaxonTest()
        {
            Stream sourceStream = GetEmbeddedResource("TestProject1.testfiles.TestInvoice.xml");
            Stream xsltStream = GetEmbeddedResource("TestProject1.testfiles.UBL-T10-BiiRules.xsl");

            Uri sourceUri = new Uri("/TestProject1;component/testfiles/TestInvoice.xml", UriKind.Relative);
            Uri xsltUri = new Uri("/TestProject1;component/testfiles/UBL-T10-BiiRules.xsl.xml", UriKind.Relative);

            const string sourcePath = @"C:\test\TestInvoiceWithError.xml";
            const string xsltpath = @"C:\test\UBL-T10-BiiRules.xsl";

            Processor processor = new Processor();
            XdmNode input = processor.NewDocumentBuilder().Build(new Uri(sourcePath));

            XsltTransformer transformer = processor.NewXsltCompiler().Compile(new Uri(xsltpath)).Load();

            transformer.InitialContextNode = input;

            Serializer serializer = new Serializer();
            StringBuilder sb = new StringBuilder();
            TextWriter writer = new StringWriter(sb);
            serializer.SetOutputWriter(writer);

            transformer.Run(serializer);

            XmlDocument xmlDocOut = new XmlDocument();
            xmlDocOut.LoadXml(sb.ToString());
            XmlNodeList failedAsserts = xmlDocOut.SelectNodes("/svrl:schematron-output/svrl:failed-assert",XmlInvoiceNamespaceManager());

            if (failedAsserts == null)
                return;

            foreach (XmlNode failedAssert in failedAsserts)
            {
                if (failedAssert.Attributes == null)
                    continue;

                XmlAttribute typeOfError = failedAssert.Attributes["flag"];

                if (typeOfError.Value.Equals("warning"))
                {/*Log something*/}
                else if (typeOfError.Value.Equals("fatal"))
                {/*Log something*/}
            }
        }

        private XmlNamespaceManager XmlInvoiceNamespaceManager()
        {
            IDictionary<string, string> list = new Dictionary<string, string>
                                                   {
                                                       {"xml", "http://www.w3.org/XML/1998/namespace"},
                                                       {"xsi", "http://www.w3.org/2001/XMLSchema-instance"},
                                                       {"xsd", "http://www.w3.org/2001/XMLSchema"},
                                                       {"udt","urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2"},
                                                       {"qdt","urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2"},
                                                       {"ext","urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"},
                                                       {"ccts", "urn:un:unece:uncefact:documentation:2"},
                                                       {"cbc","urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"},
                                                       {"cac","urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"},
                                                       {"inv", "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"},
                                                       {"svrl", "http://purl.oclc.org/dsdl/svrl"}
                                                   };

            XmlNameTable xmlNameTable = new NameTable();

            XmlNamespaceManager xmlInvoiceNamespaceManager = new XmlNamespaceManager(xmlNameTable);

            foreach (KeyValuePair<string, string> ns in list)
            {
                xmlInvoiceNamespaceManager.AddNamespace(ns.Key, ns.Value);
            }
            return xmlInvoiceNamespaceManager;
        }

        protected static Stream GetEmbeddedResource(string path)
        {
            Assembly asm = Assembly.GetExecutingAssembly();
            Stream stream = asm.GetManifestResourceStream(path);
            return stream;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:49:58.723

我认为您可以使用 Saxon 从流中加载，但您需要首先设置一个基本 URI，以允许加载任何引用资源（例如 XML 文档中的 DTD 或包含或导入的样式表模块）。如果您确定没有，那么只需尝试例如

```
DocumentBuilder db = processor.NewDocumentBuilder();
db.BaseUri = new Uri("file:///C:/");

XdmNode input = db.Build(xsltStream); 
```

显然，如果您需要解析 XSLT 中也将作为嵌入式资源加载的相对 URI，则需要做更多工作：您需要设置`XmlResolver`一个支持从嵌入式资源加载资源的类以及 URI 方案在 XSLT 中向解析器指示您需要从资源加载。我不认为 .NET 框架提供了这样一种 XmlResolver 并且 Uri 类也不支持自定义模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T10:38:17.010

最近，我遇到了这个问题。这是我的解决方案。

```
private void test() {
        Stream xsltStream = GetEmbeddedResource("TestSaxon.Resources.test.xsl");

        Processor processor = new Processor();

        DocumentBuilder db = processor.NewDocumentBuilder();
        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.Load(xsltStream);

        XdmNode xdmNode = db.Build(xmlDocument);

        XsltTransformer transformer = processor.NewXsltCompiler().Compile(xdmNode).Load();
        var path = AppDomain.CurrentDomain.BaseDirectory;
        var input = new FileInfo(path + @"\input.xml");
        var output = new FileInfo(path + @"\result.xml");
        var destination = new DomDestination();
        using (var inputStream = input.OpenRead())
        {
            transformer.SetInputStream(inputStream, new Uri(input.DirectoryName));
            transformer.Run(destination);
        }
        destination.XmlDocument.Save(output.FullName);
    }

    protected static Stream GetEmbeddedResource(string path)
    {
        Assembly asm = Assembly.GetExecutingAssembly();
        Stream stream = asm.GetManifestResourceStream(path);
        return stream;
    } 
```

# python - Non-working example in "Learn Python the Hard Way" by Zed Shaw

> ID：16101218
> 
> 赞同：3
> 
> 时间：2013-04-19T09:16:36.017
> 
> 标签：python, python-2.7

Ok, I'm trying to learn Python with "Learn Python the Hard Way" book by Zed Shaw and everything seems fine until the [Exercise 47](http://learnpythonthehardway.org/book/ex47.html). There is a couple of very misleading notions in this exercise and the previous one. In previous exercise we were told to apply the following structure to our projects (here is how it looks in ex47.py):

```
./bin:
__init__.py __init__.pyc

./docs:

./ex47:
__init__.py __init__.pyc    game.py     game.pyc

./tests:
__init__.py __init__.pyc    ex47_tests.py   ex47_tests.pyc 
```

In previous exercise Zed told us to put some script in bin and modules to the folder, named after the project. I don't understand how exactly the script differs from the module, but OK. In exercise ex47 we are running automated tests with nosetests and they run OK from the root directory of the project, however Zed says that we should see:

```
$ python ex47.py 
```

And this is not what I see. I see something like number of tests run, time and etc. Moreover I can't run the project with ex47.py from the root since there is no such file and there shouldn't be according to Zed. What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:52:17.440

“你应该看到的”没有什么意义，很可能是一个编辑错误。相反，请注意文本解释（例如它们是）和整个练习的目标。本质上，您正在寻找的是表明所有测试都通过的输出 - 请特别注意下一个建议是故意导致其中一个测试失败，以便您可以看到输出的差异。

如果您可以区分“所有测试通过”和“至少一项测试失败”（以及确定哪个测试通过），那么您已经完成了练习的要点。

# c# - Is there a way to know if finally is executed after a try or a catch?

> ID：16101221
> 
> 赞同：2
> 
> 时间：2013-04-19T09:16:49.423
> 
> 标签：c#, try-catch

I think the title explain whole my question.

I'd like to know, where I execute my code on `finally` statement, if it come from a `try` or a `catch`.

Is it possible?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T09:17:42.887

好吧，最简单的方法是：

```
bool success = false;
try
{
    ...
    // This should be the last statement in the try block
    success = true;
}
catch(...)
{
    ...
}
finally
{
    if (success)
    {
        ...
    }
} 
```

这不是一个特定的语言特性——它只是利用了这样一个事实，即除了*非常*显着的情况（基本上是异步异常）之外，在分配给`success`.

请注意，`success`存在`false`并不意味着您的任何`catch`块都已执行 - 可能是抛出了您没有捕获的异常（或者您在`try`块结束之前返回）。基本上*它只*表示“到达`try`块的末尾”——这通常是所需要的。

# c# - 启动一个不可见的进程，并且所有其他子窗口也保持隐藏状态

> ID：16101222
> 
> 赞同：3
> 
> 时间：2013-04-19T09:16:56.783
> 
> 标签：c#, forms, process, hide, hidden

我用过

```
 var psi = new ProcessStartInfo();

            psi.Arguments = args;
            psi.CreateNoWindow = true;
            psi.ErrorDialog = false;
            psi.FileName = path;
            psi.WindowStyle = ProcessWindowStyle.Hidden; 
```

但我正在调用一个可执行两件事的可执行文件。首先，它打开新的子窗口，它们变得可见。其次，应用程序还调用了另一个.exe，它变得可见（我希望这第二个exe变得不可见）

如何使调用的 exe 完全隐藏，以便没有子窗口可见或新 exe 调用的 exe 不可见。

谢谢托马斯

# actionscript-3 - 我的 AS3 Scrollpane 在 Firefox 或 Safari 中无法正常工作

> ID：16101224
> 
> 赞同：0
> 
> 时间：2013-04-19T09:17:00.603
> 
> 标签：actionscript-3, flash, scrollpane

我正在为客户制作一个闪光横幅。在此横幅中，查看者应该能够向下滚动以查看更多文本。这在 Chrome 中可以正常工作（我可以设置滚动速度吗？），但在 Firefox 和 Safari 中效果不佳。

如果我轻轻滚动，什么也不会发生，如果我给鼠标滚轮一个激进的旋转，它会向下滚动一点点......

我尝试了诸如 wmode 窗口设置和使用 macmousewheel 类之类的方法，但没有结果...

你们知道这可能是什么吗，这让我发疯:)

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:38:07.840

这是 ScrollPane 对象的问题。这不是唯一的问题。据我所知，你无法避免它继续使用 ScrollPane。我认为您必须下载自定义滚动条/滚动窗格，其中许多是免费提供的。

# animation - Three.js 中的动画同步与 Tween.js

> ID：16101225
> 
> 赞同：3
> 
> 时间：2013-04-19T09:17:05.357
> 
> 标签：animation, three.js

我正在尝试使用 Tween.js 通过链接动画来沿 Three.js 中的路径为精灵设置动画，以便获得类似的效果：

- - @ - - @ - - @ - - @ - - @ - - ETC

每个精灵都有自己的补间动画，我只是在开始时延迟每个补间动画。实际上，每个精灵在路径上都有 N 个动画（这不是一条直线），我将它们链接起来以产生循环效果。

如果 FPS 完全稳定，一切都会顺利，但我的问题是，如果在某些时候我有 FPS 下降，不同精灵的动画不再同步，精灵之间的空间不再相等。我最终可能会得到这样的结果：

- -@ - @ - - @-@-@ - - -@ - - ETC

我想知道是否有更好的方法来解决这个问题，比如所有精灵只有一个补间动画，但我不知道如何在许多线段上引入每个精灵之间的偏移量。

我无法发布确切的代码，因为它是更大应用程序的一部分，并且不能按原样使用，但它看起来像这样：

```
// create animations
for each (sprite) {
    for each (segment) {
        var currentAnimation = new TWEEN.Tween(sprite.position).to({
            x : segment.endpoint.x,
            y : segment.endpoint.y,
            z : segment.endpoint.z
        }, animationTime).easing(TWEEN.Easing.Linear.None);

        currentAnimation.delay(delayTime * currentSpriteNumber);
        previousAnimation.chain(currentAnimation);
    }
    lastAnimation.chain(firstAnimation);
    lastAnimation.onComplete(onEachSpriteAnimationCompleted);
}

// start the animations
for each (sprite) {
    spriteFirstAnimation.start();
}

// to remove the delay when each sprite animation has made one loop, 
// and instantly replace the sprite at the beginning of the path 
// (my paths are not closed)
var onEachSpriteAnimationCompleted = function() {
    sprite.position.set(starting position);

    for each (sprite animation) {
        animation.delay(0);
    }
} 
```

# java - 从数据库中获取数据并将其与 JButtons 一起显示在表上

> ID：16101226
> 
> 赞同：1
> 
> 时间：2013-04-19T09:17:06.743
> 
> 标签：java, database, swing, event-handling

我在做表格。我希望从数据库中获取数据。我想要 3 个按钮打开、编辑、删除以及每个获取的记录。我已经完成了记录的获取。我在将按钮添加到 JTable 时遇到问题。从字符串到“日期”的日期覆盖也有问题。我使用了数据库 MySql 5.1。

```
import java.awt.event.*;

import javax.management.openmbean.OpenDataException;
import javax.swing.*;
//import java.awt.*;
import javax.swing.table.DefaultTableModel;
import java.sql.*;
import java.text.SimpleDateFormat;
import java.util.*;
import java.util.Date;
import java.util.regex.*;

class frameRegistry extends JFrame implements ActionListener

{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

// ----------------------------------PANELS--------------------------------------

    JPanel  panelImage, panelDate, panelAddForm, panelSearch,
            panelDisplay;

    // -----------------------GUI ELEMENTS------------------------------------------
    // -----------------------------------------------------------------------------
    JButton addRecord, searchHistory, save, cancel;

    JLabel  labelName, labelFirstName, labelMiddleName, labelLastName,
            labelBirthDate, labelAge, labelCity, labelContact, labelImage,
            labelDate, labelValidity, labelAmount, labelNote,labelTime;

    JLabel  demo;

    JTextField  textFieldFirstName, textFieldMiddleName, textFieldLastName,
            textFieldAge, textFieldCity, textFieldContact, textFieldValidity,
            textFieldAmount, textFieldNote;

    JTextField  textFieldNameSearch;

    JTable table;
    JScrollPane scrollPane;

    Calendar currentDate, validitydate;
    SimpleDateFormat sdf;
    Date validity;

    int age, amount;
    Double contact;
    int flag = 0;

    String Year, Month, Day, stringValidityDate;
    String firstName, middleName, lastName, city;
    String stringnamesearch;
    String time;

    // ---------------------DATABASEVARIABLES-----------------------------------------
    // -------------------------------------------------------------------------------

    Connection connection = null;
    Statement statement = null;
    ResultSet resultSet = null;

    String url = "jdbc:mysql://localhost:3306/records";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "";

    // ------------------COMPONANT ARRAYS------------------------------------------
    // ----------------------------------------------------------------------------

    JButton open[];
    JButton edit[];
    JButton delete[];

// -----------------------FRAME STARTS---------------------------------------------
//---------------------------------------------------------------------------------

    frameRegistry(  ) 
    {

//-----------------------------------------------------------------------------     

        setSize( 600, 800 );
        setDefaultLookAndFeelDecorated( true );
        setVisible( true );

        setLayout( null );

        labelImage = new JLabel( new ImageIcon( "C:\\Users\\SUN\\Desktop  
                                                        \\logo.png" ) );
        panelImage = new JPanel(  );

        panelImage.add( labelImage );
        panelImage.setBounds( 0, 0, 700, 90 );
        add( panelImage );

        currentDate = Calendar.getInstance(  );

        Year = "" + currentDate.get( Calendar.YEAR );
        Month = "" + currentDate.get( Calendar.MONTH );
        Day = "" + currentDate.get( Calendar.DAY_OF_MONTH );

        time = "" + currentDate.get( Calendar.HOUR_OF_DAY ) + ":"
                + currentDate.get( Calendar.MINUTE );

        labelDate = new JLabel( "Date:" + Day + "/" + Month + "/" + Year + " "
                    + time );

        panelDate = new JPanel(  );
        panelDate.add( labelDate );
        panelDate.setBounds( 350, 100, 130, 20 );
        add( panelDate );

        panelSearch = new JPanel(  );
        panelSearch.setLayout( null );

        addRecord = new JButton( "Add Record" );
        addRecord.setBounds( 5, 10, 100, 30 );
        addRecord.addActionListener( this );
        panelSearch.add( addRecord );

// ------------------------NAME SEARCH IN DATABASE-----------------------

        textFieldNameSearch = new JTextField(  );
        textFieldNameSearch.setBounds( 150, 10, 100, 30 );

        textFieldNameSearch.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldNameSearch.getText(  );
                Pattern p = Pattern.compile( "[ 0-9,^$,&%$#@!()*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
            JOptionPane.showMessageDialog( null, "Please enter valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );
        panelSearch.add( textFieldNameSearch );

        searchHistory = new JButton( "Search" );
        searchHistory.setBounds( 270, 10, 100, 30 );
        searchHistory.addActionListener( this );
        panelSearch.add( searchHistory );
        panelSearch.setBounds( 0, 130, 450, 50 );
        add( panelSearch );

        panelAddForm = new JPanel(  );
        panelAddForm.setLayout( null );

        panelDisplay = new JPanel(  );
        panelDisplay.setLayout( null );

         //------------------------NAME------------------------------------------------
        labelName = new JLabel( "Name" );
        labelName = new JLabel( "Name" );
        labelName.setBounds( 20, 10, 50, 20);
        panelAddForm.add(labelName);

         //-------------------------FNAME------------------------------------------------

        labelFirstName = new JLabel("First Name");
        labelFirstName.setBounds(100, 30, 80, 10);
        panelAddForm.add(labelFirstName);

        textFieldFirstName = new JTextField(  );
        textFieldFirstName.setBounds( 100, 10, 80, 20 );

        textFieldFirstName.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldFirstName.getText(  );
                    Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^,\t\n\f\r]");
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
            JOptionPane.showMessageDialog( null, "Please Enter Valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

        panelAddForm.add( textFieldFirstName );

        //----------------------------------------MNAME----------------------------------

        labelMiddleName= new JLabel("Middle Name");
        labelMiddleName.setBounds( 190, 30, 80,  10);
        panelAddForm.add(labelMiddleName);

        textFieldMiddleName = new JTextField(  );
        textFieldMiddleName.setBounds( 190, 10, 80, 20 );

        textFieldMiddleName.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldMiddleName.getText(  );
                Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Please Enter Valid 
                                               Name","Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

        panelAddForm.add( textFieldMiddleName );

        //-----------------------------------labelName----------------------------------------

        labelLastName = new JLabel("Last Name");
        labelLastName.setBounds(280, 30, 80, 10);
        panelAddForm.add(labelLastName);

        textFieldLastName = new JTextField(  );
        textFieldLastName.setBounds( 280, 10, 80, 20 );

        textFieldLastName.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldLastName.getText(  );
                Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
            JOptionPane.showMessageDialog( null, "Please Enter Valid Name",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }
            }
        } );

        panelAddForm.add( textFieldLastName );

        //-------------------------------------BDATE--------------------------------------
        labelBirthDate = new JLabel( "Birth Date" );
        labelBirthDate.setBounds( 20, 60, 60, 20 );
        panelAddForm.add( labelBirthDate );

        //--------------------------------------------AGE---------------------------------------
        labelAge = new JLabel( "Age" );
        labelAge.setBounds( 20, 110, 50, 20 );
        panelAddForm.add( labelAge );

        textFieldAge = new JTextField(  );
        textFieldAge.setBounds( 100, 110, 80, 20 );

        textFieldAge.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldAge.getText(  );
                Pattern p = Pattern.compile( "[ A-Z,a-z,&%$#@!()*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Numbers only",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

        panelAddForm.add( textFieldAge );

         //-------------------------------------CITY----------------------------------------------
        labelCity = new JLabel( "City" );
        labelCity.setBounds( 20, 160, 80, 20 );
        panelAddForm.add( labelCity );

        textFieldCity = new JTextField(  );

        textFieldCity.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldCity.getText(  );
                Pattern p = Pattern.compile( "[ 0-9,&%$#@!()*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Characters only",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

        textFieldCity.setBounds( 100, 160, 80, 20 );
        panelAddForm.add( textFieldCity );

        //------------------------------------------CONTACT-----------------------------
        labelContact = new JLabel( "Contact" );
        labelContact.setBounds( 20, 210, 60, 20 );
        panelAddForm.add( labelContact );

        textFieldContact = new JTextField( 12 );
        textFieldContact.setBounds( 100, 210, 80, 20 );
        textFieldContact.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldContact.getText(  );
                Pattern p = Pattern.compile( "^[ 1-9][ 0-9]{12}$" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Numbers only",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }
            }
        } );

        panelAddForm.add( textFieldContact );

        // ----------------------------------------VALIDITY-----------------------
        labelValidity = new JLabel( "Valiidity" );
        labelValidity.setBounds( 20, 260, 60, 20 );
        panelAddForm.add( labelValidity );

        textFieldValidity = new JTextField(  );
        textFieldValidity.setBounds( 100, 260, 80, 20 );
        panelAddForm.add( textFieldValidity );

        //------------------------------------------NOTE------------------------------------
        labelNote = new JLabel( "Note" );
        labelNote.setBounds( 20, 310, 60, 20 );
        panelAddForm.add( labelNote );

        textFieldNote = new JTextField(  );
        textFieldNote.setBounds( 100, 310, 80, 20 );

        textFieldNote.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldNote.getText(  );
                Pattern p = Pattern.compile( "[ 0-9,&%$#@!(    )*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Characters only",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }
            }
        } );

        panelAddForm.add( textFieldNote );

        //----------------------------------------FEES-------------------------------------------
        labelAmount = new JLabel( "Fees" );
        labelAmount.setBounds( 20, 360, 60, 20 );
        panelAddForm.add( labelAmount );

        textFieldAmount = new JTextField(  );
        textFieldAmount.setBounds( 100, 360, 80, 20 );

        textFieldAmount.addKeyListener( new KeyAdapter(  ) {
            public void keyTyped( KeyEvent e ) {
                String input = textFieldAmount.getText(  );
                Pattern p = Pattern.compile( "[ A-Z,a-z,&%$#@!(    )*^]" );
                Matcher m = p.matcher( input );
                if ( m.find(  ) ) {
                JOptionPane.showMessageDialog( null, "Numbers only",
                             "Sorry", JOptionPane.ERROR_MESSAGE );
                }

            }
        } );

        panelAddForm.add( textFieldAmount );

        //----------------------------------------------------------------------------------
        save = new JButton( "SAVE" );
        save.setBounds( 25, 410, 70, 20 );
        save.addActionListener( this );
        panelAddForm.add( save );

        cancel = new JButton( "CANCEL" );
        cancel.setBounds( 150, 410, 80, 20 );
        cancel.addActionListener( this );
        panelAddForm.add( cancel );

        panelAddForm.setBounds( 0, 220, 600, 700 );
        panelAddForm.setVisible( false );

    // ---------------------------ADD FORM COMPLETE-----------

        panelDisplay.setBounds( 0, 200, 800, 600 );

    }

    // -------------------BUTTON EVENTS START-------------------------

    public void actionPerformed( ActionEvent ae )
    {

        int actionCount=0;

        if ( ae.getSource(  ) == addRecord ) 
        {
            remove(panelDisplay);
            add( panelAddForm );

            panelAddForm.setEnabled( true );
            panelAddForm.setVisible( true );

            validitydate = Calendar.getInstance(  );
            validitydate.add( Calendar.DAY_OF_MONTH, 90 );
            stringValidityDate = "" + validitydate.get( Calendar.DAY_OF_MONTH )
                    + "/" + validitydate.get( Calendar.MONTH ) + "/"
                    + validitydate.get( Calendar.YEAR );

            textFieldValidity.setText( stringValidityDate );
            textFieldValidity.setEnabled( false );

        }

        if ( ae.getSource(  ) == save ) {

            firstName = textFieldFirstName.getText(  );
            middleName = textFieldMiddleName.getText(  );
            lastName = textFieldLastName.getText(  );
            age = Integer.parseInt( textFieldAge.getText(  ) );
            city = textFieldCity.getText(  );

            int flag = 0;

            String cnt = "" + textFieldContact.getText(  );
            if ( cnt.length(  ) < 6 ) {
                flag = 1;
            }

            contact = Double.parseDouble( textFieldContact.getText(  ) );

            if ( flag == 1 ) {
                JOptionPane.showMessageDialog( null, 
                                                 "Enter valid phone number",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
            } else {

                try {

                    Class.forName( driver ).newInstance(  );
                    connection = DriverManager.getConnection( url,
                                                                  userName, password );

                    statement = connection.createStatement(
                        ResultSet.TYPE_SCROLL_SENSITIVE,
                        ResultSet.CONCUR_UPDATABLE );

                    System.out.println( "Connected to database" );

                    resultSet = statement.executeQuery( "select * 
                                                                            from record" );

                    resultSet.moveToInsertRow(  );
                    resultSet.updateString( 1, firstName );
                    resultSet.updateString( 2, middleName );
                    resultSet.updateString( 3, lastName );
                    resultSet.updateInt( 5, age );
                    resultSet.updateDouble( 6, contact );
                    resultSet.updateString( 7, city );
                resultSet.updateDate( 8, ( java.sql.Date ) validity );
                    resultSet.updateInt( 9, amount );

                    resultSet.insertRow(  );
                    JOptionPane.showMessageDialog(  null, 
                                                    "Record Added","Success", 
                                                    JOptionPane.INFORMATION_MESSAGE );

                                        panelAddForm.setEnabled(false);
                    panelAddForm.setVisible( false );
                    connection.close(  );

                }
                                 catch ( Exception e ) {
                    e.printStackTrace(  );
                    JOptionPane.showMessageDialog(  null, 
                                                                  "Insertion failed",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
                }
            }
        }

        if ( ae.getSource(  ) == cancel ) {
            textFieldFirstName.setText( "" );
            textFieldMiddleName.setText( "" );
            textFieldLastName.setText( "" );
            textFieldAge.setText( "" );
            textFieldCity.setText( "" );
            textFieldContact.setText( "" );
            textFieldValidity.setText( "" );
            textFieldAmount.setText( "" );
            panelAddForm.setEnabled( false );
            panelAddForm.setVisible( false );
        }

        if ( ae.getSource(  ) == searchHistory )
        {

            panelAddForm.setEnabled( false );
            panelAddForm.setVisible( false );

            remove( panelAddForm );
            add( panelDisplay );

            stringnamesearch = "" + textFieldNameSearch.getText(  );
            DefaultTableModel tableModel = new DefaultTableModel(  );

            if(stringnamesearch=="")
            {
                JOptionPane.showMessageDialog(  null, "Search is blank",
                        "Sorry", JOptionPane.ERROR_MESSAGE );
            }

        else
        {
            try 
            {

                            Class.forName( driver ).newInstance(  );
                           connection = DriverManager.getConnection( url, 
                                                                  userName,password );

                    statement = connection.createStatement( 
                            ResultSet.TYPE_SCROLL_SENSITIVE,
                            ResultSet.CONCUR_UPDATABLE );

                resultSet = statement.executeQuery( "select * from record 
                                             where firstname = '"+ stringnamesearch+
                                             "'or lastname = '" + stringnamesearch + "'" );

                                       System.out.println( "Query executed" );

                    String firstName;
                    String lastName;

                    int counter = 0;

                    JButton add=new JButton("ADD");
                    while ( resultSet.next(  ) )
                    {

                    firstName = resultSet.getString( 1 );
                    lastName = resultSet.getString( 3 );

                    String[ ] columnNames = { "First Name",
                                                                 "Last Name","click" };

                    Object[ ] data = { "" + firstName, "" +
                                                             lastName, add };

                    tableModel.setColumnIdentifiers( columnNames );
                    tableModel.addRow( data );
                    tableModel.fireTableDataChanged();

                    counter++;
                    }

                    table = new JTable( tableModel );
                    table.setEnabled(false);
                    scrollPane = new JScrollPane( table );
                    scrollPane.setBounds( 10, 10, 350, 100 );
                    scrollPane.revalidate();

                    panelDisplay.add( scrollPane );
                    connection.close(  );   
                    System.out.println( "" + counter );

//------------- creating array of Buttons---------------------------------  

                    open=new JButton[counter];
                    edit=new JButton[counter];
                    delete=new JButton[counter];

                    for( int i=0,y=30; i<counter;i++,y+=15 )
                    {

                        open[i]=new JButton( "Open" );
                        System.out.println("1st: "+i);
                        open[i].setBounds( 380, y, 70, 15 );
                        System.out.println("2nd: "+i);
                        open[i].addActionListener( this );
                        panelDisplay.add (open[i] );
                        System.out.println("3rd: "+i);

                        edit[i]=new JButton( "Edit" );
                        edit[i].setBounds( 460, y, 70, 15 );
                        edit[i].addActionListener( this );
                        panelDisplay.add( edit[i] );

                        delete[i]=new JButton( "Delete" );
                        delete[i].setBounds( 540, y, 70, 15 );  
                        delete[i].addActionListener( this );
                        panelDisplay.add( delete[i] );

                        System.out.println(""+i);
                    }

                    actionCount=open.length;
                    panelDisplay.setEnabled(false);
                    panelDisplay.setVisible(true);

                } 
                catch ( Exception e ) 
                {
                    e.printStackTrace(  );
                }

            }       

    }

    for( int j=0;j<open.length;j++ )
    {
        if( ae.getSource() == open[j] )
        {
            System.out.println("open of"+j+"is clicked");
            fetchData(j);
        }

    }

//-----------------BUTTON EVENT ENDS----------------------------------------

}

    public void fetchData(int i )
    {
        panelDisplay.setEnabled(false);
        panelAddForm.setEnabled(false);
        panelDisplay.setVisible(false);
        panelAddForm.setVisible(false);
        remove(panelDisplay);
        remove(panelAddForm);

        JPanel showRecord=new JPanel();

        showRecord.setLayout(null);
        showRecord.setBounds(5, 300, 600, 700);

        int id=i;
        int uniqid=0;

        String firstName="", lastName="";
        try
        {
               Class.forName( driver ).newInstance(  );
               connection = DriverManager.getConnection( url, userName, password );
               statement = connection.createStatement(
                                    ResultSet.TYPE_SCROLL_SENSITIVE,
                                    ResultSet.CONCUR_UPDATABLE );

            resultSet = statement.executeQuery( "select * from record 
                                                             where  uniqid="+id );

            System.out.println( "Query executed" );
            while(resultSet.next())
            {
                firstName = resultSet.getString(1);
                lastName = resultSet.getString(3);
                uniqid = resultSet.getInt(11);
            }

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        System.out.println("name was:"+firstName+" id is"+uniqid);

        JLabel labelfirstName=new JLabel(firstName);
        labelfirstName.setBounds(30,30,60,30);
        showRecord.add(labelfirstName);

        JLabel labellastName=new JLabel(lastName);
        labellastName.setBounds(80,30,60,30);
        showRecord.add(labellastName);

        add(showRecord);
    }

}

class Registry {
    public static void main( String args[ ] ) {

           frameRegistry reg = new frameRegistry(  );

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:50:28.023

不要使用空布局和 setBounds。Swing 旨在与布局管理器一起使用。阅读有关[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的 Swing 教程。

不要在文本字段上使用 KeyListeners。如果用户将文本粘贴到文本字段中会发生什么？相反，您应该使用 DocumentListener。阅读有关[如何编写文档侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)的教程。

> 我在将按钮添加到 JTable 时遇到问题

[表格按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)显示了执行此操作的一种方法。

# c# - 如何在Repeater中显示x-items并使用asp.net滚动或淡入淡出下一个项目？

> ID：16101235
> 
> 赞同：0
> 
> 时间：2013-04-19T09:17:24.467
> 
> 标签：c#, jquery, asp.net, repeater

我有一个中继器，它在从数据库显示的主页上显示“新闻”。**我想一次只显示 2 条记录，并在特定毫秒后自动滚动下两个项目，并具有滚动或淡入淡出效果。**

在 aspx 页面中：

```
<asp:Repeater ID="RepDetails" runat="server" OnItemDataBound="RepDetails_ItemDataBound">
        <HeaderTemplate>
        </HeaderTemplate>
        <ItemTemplate>
            <div id="MainContent" style="border: 1px;">
                <table>
                    <tr>
                        <td rowspan="2" class="auto-style2">
                            <img src="Images/lasts1.png" />
                        </td>
                        <td>
                            <asp:Label ID="lblNewsTitle" runat="server" Font-Bold="True" /></td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr width="100px">
                        <td>
                            <asp:Label ID="lblNewsDescription" runat="server" /></td>
                        <td>&nbsp;</td>
                    </tr>
                </table>

            </div>
            <hr />
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
    </asp:Repeater> 
```

在 .cs 页面中：

```
protected void RepDetails_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                DataRowView dr = e.Item.DataItem as DataRowView;

                string Id = Convert.ToString(dr["NewsID"]);
                //HtmlGenericControl teammemberapp = e.Item.FindControl("teammemberapp") as HtmlGenericControl;
                //Link to TeamMemberDetails Page 
                //teammemberapp.Attributes.Add("onclick", "window.location.href='NewsDetails.aspx?Id=" + Id + "'");

                string newsTitle = Convert.ToString(dr["NewsTitle"]);
                Label lblNewsDescription = e.Item.FindControl("lblNewsDescription") as Label;
                Label lblNewsTitle = e.Item.FindControl("lblNewsTitle") as Label;
                //set First Name Label
                lblNewsTitle.Text = newsTitle;

                string newsDescription = Convert.ToString(dr["NewsDescription"]);
                if (newsDescription.Length > 50)
                {
                    lblNewsDescription.Text = newsDescription.Substring(0, 50) + "..";
                }
                else
                {
                    lblNewsDescription.Text = newsDescription;
                }

            }
        }

    public void GetRecord()
            {
                string connectionString = ConfigurationManager.ConnectionStrings["DatabaseConnectionString"].ConnectionString.ToString();
                DataTable datatable = new DataTable();
                using (SqlConnection connection = new SqlConnection(connectionString))
                {

                    SqlCommand cmd = new SqlCommand();
                    cmd.Connection = connection;
                    connection.Open();
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.CommandText = "usp_NewsSelectYES";
                    SqlDataAdapter da = new SqlDataAdapter(cmd);
                    da.Fill(datatable);
                    connection.Close();
                }

                //Bind Table to Repeater
                RepDetails.DataSource = datatable;
                RepDetails.DataBind();
            }

    protected void Page_Load(object sender, EventArgs e)
            {
                if (!IsPostBack)
                {
                    //Get all news with yes
                    GetRecord();

                }
            } 
```

帮助赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:33:43.513

尝试使用某种 jquery 滑块

# actionscript-3 - AS3 Flash CS6 access of undefined properties? Help will be much obliged

> ID：16101238
> 
> 赞同：0
> 
> 时间：2013-04-19T09:17:33.327
> 
> 标签：actionscript-3, syntax, properties, undefined, flash-cs6

Properties such as score1; score2, lives1, lives2 and STAGE seem to be undefined properties. I dont see why? Please help...

e.g. C:\Users\PC\Desktop\Whack My Mole - Android\Game.as, Line 429 1120: Access of undefined property score1. C:\Users\PC\Desktop\Whack My Mole - Android\Game.as, Line 430 1120: Access of undefined property score1.

package {

```
import flash.display.Stage;
import flash.events.TouchEvent;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode;
import flash.text.TextField;
import flash.text.TextFormat;
import flash.utils.Timer;
import flash.events.Event;
import flash.events.TimerEvent;
import flash.filters.DropShadowFilter;
import flash.text.AntiAliasType;
import flash.text.Font;

public class Game{

    //Global Declarations
    private var STAGE:Stage;

    'Graphics'
    private var Title:Title_mc;
    private var Score_lbl:Label_Score_txt;
    private var Lives_lbl:Label_Lives_txt;
    private var holes:MoleHoles_mc;
    private var Lives_txt:TextField;
    private var Score_txt:TextField;
    private var Shadow:DropShadowFilter;
    private var Pause_btn:Button_Pause;

    'Game Properties'
    private var SLEEP:Timer;
    private var countdown:Timer;
    private var countdownComplete:Timer;
    private var countdownDelay:Timer;
    private var count:TextField;
    private var count_inc:int;

    private var Paused:Boolean;
    private var moles:int;
    public static var mole_spawn_delay:int = 1000;
    public static var mole_death_delay:int = 1000;
    public static var molePlacable:Boolean = true;
    private var unavailableHole:int;

    public static var molesName:String;
    private var lvl:int = 51;

    private var score1:Anim_Score1_mc;
    private var score2:Anim_Score2_mc;
    private var lives1:Anim_Lives1_mc;
    private var lives2:Anim_Lives2_mc;

    'Player Properties'
    public static var Score:int = 0;
    public static var Lives:int = 3;
    public static var incrementer:int = 1;

    public function Game(STAGE:Stage) {
        this.STAGE = STAGE;

        //Enable Touch Events
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        //Instantiate Objects
        Shadow = new DropShadowFilter();

        //Handle new frames
        STAGE.addEventListener(Event.ENTER_FRAME, handle_ENTER_FRAME);

        //Draw Graphics
        'Menu Title'
        Title = new Title_mc();
        Title.x = 250.5;
        Title.y = 62.35;
        STAGE.addChild(Title);

        'Content'
        holes = new MoleHoles_mc();
        holes.x = 0;
        holes.y = 123.9;
        STAGE.addChild(holes);

        'Score Label'
        Score_lbl = new Label_Score_txt();
        Score_lbl.x = 19.65;
        Score_lbl.y = 146.75;
        STAGE.addChild(Score_lbl);

        'Lives Label'
        Lives_lbl = new Label_Lives_txt();
        Lives_lbl.x = 358.25;
        Lives_lbl.y = 141.05;
        STAGE.addChild(Lives_lbl);

        'Score Value'
        Score_txt = new TextField();
        Score_txt.x = 19.65;
        Score_txt.y = 209.95;
        Score_txt.width = 100;
        Score_txt.defaultTextFormat = new TextFormat("Balloonist", 40, 0xFFFFFF);
        Score_txt.selectable = false;
        Score_txt.text = String(Score);
        STAGE.addChild(Score_txt);

        'Lives Value'
        Lives_txt = new TextField();
        Lives_txt.x = 410;
        Lives_txt.y = 204.70;
        Lives_txt.defaultTextFormat = new TextFormat("Balloonist", 40, 0xFFFFFF);
        Lives_txt.selectable = false;
        Lives_txt.text = String(Lives);
        STAGE.addChild(Lives_txt);

        'Pause Button'
        Pause_btn = new Button_Pause();
        Pause_btn.x = 22.40;
        Pause_btn.y = 772.85;
        STAGE.addChild(Pause_btn);
        Pause_btn.buttonMode = true;
        Pause_btn.addEventListener(TouchEvent.TOUCH_BEGIN, handle_Pause);

        //Start Countdown
        countDown();
    }

    //Pause/resume game
    private function handle_Pause(e:TouchEvent):void
    {
        //...
    }

    //Sleep Method
    private function sleep(seconds:int):void
    {
        SLEEP = new Timer(seconds, 1); // 1 second
        SLEEP.addEventListener(TimerEvent.TIMER_COMPLETE, sleep_end);
        SLEEP.start();
        STAGE.frameRate = 0;
    }

    //Sleep Method Complete
    private function sleep_end(e:TimerEvent):void
    {
        SLEEP.removeEventListener(TimerEvent.TIMER_COMPLETE , sleep_end);
        STAGE.frameRate = 24;
    }

    //Count Down Timer
    private function countDown():void
    {
        Paused = true;

        count_inc = 5;
        count = new TextField();
        count.x = 213.9;
        count.y = 158.05;
        count.height = 150;
        count.width = 150;
        count.defaultTextFormat = new TextFormat("Balloonist", 150, 0xFFFFFF);
        count.filters = [Shadow];
        count.antiAliasType = AntiAliasType.ADVANCED;
        count.sharpness = 400;
        count.text = String(count_inc);
        STAGE.addChild(count);

        countdownComplete = new Timer(5000, 1);
        countdownComplete.addEventListener(TimerEvent.TIMER, coutdown_Complete);

        countdownDelay = new Timer(100);
        countdownDelay.addEventListener(TimerEvent.TIMER, countDown_Tick);

        countdown = new Timer(1000);
        countdown.addEventListener(TimerEvent.TIMER, countDown_end);

        countdownComplete.start();
        countdownDelay.start();
        countdown.start();
    }

    //Handle countdown tick
    private function countDown_Tick(e:TimerEvent):void
    {
        if(count_inc <= 0)
        {
            countdown.stop();
            countdown.removeEventListener(TimerEvent.TIMER, countDown_end);
        }else {
            countdownDelay.delay = 100;
        }
    }

    //Handle countown complete
    private function countDown_end(e:TimerEvent):void
    {
        if(count_inc <= 0)
        {
            countdownDelay.stop();
            countdownDelay.removeEventListener(TimerEvent.TIMER, countDown_Tick);
        }else{
            count_inc -= 1;
            count.text = String(count_inc);
        }
    }

    //Countdown cleanup
    private function coutdown_Complete(e:TimerEvent):void
    {
        STAGE.removeChild(count);
        Paused = false;
    }

    //Main Game Loop
    private function handle_ENTER_FRAME(e:Event):void
    {
        //Update game stuff
        if(!Paused)
        {
            if(molePlacable)
            {
                sleep(mole_spawn_delay);
                newMole();
            }

            Score_txt.text = String(Score);
            Lives_txt.text = String(Lives);
        }

        //Clear stage & display game over interface
        if(Lives <= 0)
        {
            STAGE.removeEventListener(Event.ENTER_FRAME, handle_ENTER_FRAME);
            STAGE.removeChild(Title);
            STAGE.removeChild(holes);
            STAGE.removeChild(Score_lbl);
            STAGE.removeChild(Lives_lbl);
            STAGE.removeChild(Pause_btn);
            STAGE.removeChild(Score_txt);
            STAGE.removeChild(Lives_txt);

            var gameOver:GameOver = new GameOver(STAGE);
        }

        //Update mole stats
        if(moles > 50)
        {
            lvl = 71;
        }

        //Dissallow score to go below 0
        if(Score < 0)
        {
            Score = 0;
        }
    }

    //Create new Mole
    private function newMole():void
    {
        'Specify mole hole'
        var rnd = Math.ceil(Math.random()*11);

        'Ensure mole does not spawn from preceding hole'
        while(rnd == unavailableHole)
        {
            rnd = Math.ceil(Math.random()*11);
        }

        var X:int;
        var Y:int;
        switch(rnd)
        {
            case 0:
                X = -14.75;
                Y = 293.45;
                break;

            case 1:
                X = 109.25;
                Y = 291.35;
                break;

            case 2:
                X = 223.75;
                Y = 291.35;
                break;

            case 3:
                X = 337.2;
                Y = 291.35;
                break;

            case 4:
                X = 0;
                Y = 430;
                break;

            case 5:
                X = 118.7;
                Y = 430;
                break;

            case 6:
                X = 226.9;
                Y = 430;
                break;

            case 7:
                X = 342.45;
                Y = 430
                break;

            case 8:
                X = 0;
                Y = 561.35
                break;

            case 9:
                X = 112.4;
                Y = 561.35;
                break;

            case 10:
                X = 229;
                Y = 561.35;
                break;

            case 11:
                X = 339.3;
                Y = 561.35;
                break;
        }

        'Specify molde to add'
        rnd = lvl * Math.random();
        if(rnd <=40)
        {
            //Default + 10*incrementer
            var mole:Mole_Default_mc = new Mole_Default_mc(STAGE, X, Y);
        }else if(rnd <=42){
            //Crazy - 5*incrementer
            var mole2:Mole_Crazy_mc = new Mole_Crazy_mc(STAGE, X, Y);
        }else if(rnd <=43){
            //Crazy2 - 10*inrementer
            var mole3:Mole_Crazy2_mc = new Mole_Crazy2_mc(STAGE, X, Y);
        }else if(rnd <45){
            //Lady + 1 life
            var mole4:Mole_Lady_mc= new Mole_Lady_mc(STAGE, X, Y);
        }else if(rnd <46){
            //Ninja - 2*inrementer
            var mole5:Mole_Ninja_mc = new Mole_Ninja_mc(STAGE, X, Y);
        }else if(rnd <47){
            //Zombie + 5 * lives
            var mole6:Mole_Zombie_mc = new Mole_Zombie_mc(STAGE, X, Y);
        }else if(rnd <48){
            //reaper - Lives
            var mole7:Mole_Reaper_mc = new Mole_Reaper_mc(STAGE, X, Y);
        }else if(rnd <49){
            //Snob + 250
            var mole8:Mole_Snob_mc = new Mole_Snob_mc(STAGE, X, Y);
        }else if(rnd <52){
            //Angel + 3 lives
            var mole9:Mole_Angel_mc = new Mole_Angel_mc(STAGE, X, Y);
        }else if(rnd <54){
            //Demon - 3 lives
            var mole10:Mole_Demon_mc = new Mole_Demon_mc(STAGE, X, Y);
        }else if(rnd <55){
            //Creature - 3+incrementer
            var creature:Mole_Creature_mc = new Mole_Creature_mc(STAGE, X, Y);
        }else if(rnd <56){
            //Cyber + 50+incrementer
            var cyber:Mole_Cyber_mc = new Mole_Cyber_mc(STAGE, X, Y);
        }else if(rnd <57){
            //Grumpy + 5
            var grumpy:Mole_Grumpy_mc = new Mole_Grumpy_mc(STAGE, X, Y);
        }else if(rnd <58){
            //Hippie Lives+3 Score+100
            var hippie:Mole_Hippie_mc = new Mole_Hippie_mc(STAGE, X, Y);
        }else if(rnd<59){
            //Hyper 30*incrementer
            var hyper:Mole_Hyper_mc = new Mole_Hyper_mc(STAGE, X, Y);
        }else if(rnd<60){
            //Love timer-100
            var love:Mole_Love_mc = new Mole_Love_mc(STAGE, X, Y);
        }else if(rnd<61){
            //LoveZombie - 20*Lives
            var loveZombie:Mole_LoveZombie_mc = new Mole_LoveZombie_mc(STAGE, X, Y);
        }else if(rnd<70){
            //Sleepy Timer+100
            var sleepy:Mole_Sleepy_mc = new Mole_Sleepy_mc(STAGE, X, Y);
        }else if(rnd<71){
            //Warrior + (10*incrementer)*2
            var warrior:Mole_Warrior_mc = new Mole_Warrior_mc(STAGE, X, Y);
        }

        //Update mole stats
        moles += 1;
        if(mole_spawn_delay > 20 && mole_death_delay > 20)
        {
            mole_spawn_delay -= 10;
            mole_death_delay -= 5;
        }

        //Update incrementer
        if(moles > 100)
        {
            incrementer = 50;
        }else if(moles > 80)
        {
            incrementer = 40;
        }else if(moles > 60)
        {
            incrementer = 30;
        }else if(moles > 20)
        {
            incrementer = 20;
        }else if(moles > 10)
        {
            incrementer = 10;
        }
    }

    //Animation
    public static function animate(type:int)
    {
        if(type == 0)
        {
            score1 = new Anim_Score1_mc();
            score1.x = 40;
            score1.y = 250.6;
            STAGE.addChild(score1);

            var anim_timer:Timer = new Timer(2000, 1);
            anim_timer.addEventListener(TimerEvent.TIMER, remove_score1);
            anim_timer.start();
        }else if(type == 1)
        {
            score2 = new Anim_Score2_mc();
            score2.x = 32;
            score2.y = 248.6;
            STAGE.addChild(score2);

            var anim_timer2:Timer = new Timer(2000, 1);
            anim_timer2.addEventListener(TimerEvent.TIMER, remove_score2);
            anim_timer2.start();
        }else if(type == 2)
        {
            lives1 = new Anim_Lives1_mc();
            lives1.x = 430.9;
            lives1.y = 237.95;
            STAGE.addChild(lives1);

            var anim_timer3:Timer = new Timer(2000, 1);
            anim_timer3.addEventListener(TimerEvent.TIMER, remove_lives1);
            anim_timer3.start();
        }else{
            lives2 = new Anim_Lives2_mc();
            lives2.x = 430.9;
            lives2.y = 237.95; 
            STAGE.addChild(lives2);

            var anim_timer4:Timer = new Timer(2000, 1);
            anim_timer4.addEventListener(TimerEvent.TIMER, remove_lives1);
            anim_timer4.start();
        }
    }

    //Handle remove_score1
    private function remove_score1(e:TimerEvent):void
    {
        STAGE.removeChild(score1);
    }

    //Handle remove_score2
    private function remove_score2(e:TimerEvent):void
    {
        STAGE.removeChild(score2);
    }

    //Handle remove_lives1
    private function remove_lives1(e:TimerEvent):void
    {
        STAGE.removeChild(lives1);
    }

    //Handle remove_lives2
    private function remove_lives2(e:TimerEvent):void
    {
        STAGE.removeChild(lives2);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:21:05.403

代替：

```
public static function animate(type:int) 
```

和

```
public function animate(type:int) 
```

**或者，如果您想让该方法静态**添加：

```
private static var _instance:Game = null; 
```

在 Game Class 定义和更改`animate`函数中：

```
public static function animate(type:int):void{
if(_instance!=null) _instance.hidden_animate(type);
}

protected function hidden_animate(type:int){
   // PLACE HERE CODE FROM YOUR ORIGINAL ANIMATE FUNCTION
} 
```

在构造函数中添加：

```
_instance = this; 
```

如果您经常使用静态方法（例如在此代码中），请阅读更多关于单例等设计模式的信息：)

# html - 具有固定背景附件的粘性元素

> ID：16101240
> 
> 赞同：0
> 
> 时间：2013-04-19T09:17:42.107
> 
> 标签：html, css

考虑一下：http: [//jsfiddle.net/yP7Nf](http://jsfiddle.net/yP7Nf)

示例代码：

```
<div class="first"><img src="http://placekitten.com/g/200/300"/></div>
<div class="second"></div>
<div class="third"></div>

.first {
background-color: #a6a6a6;
height: 600px;
background-attachment: fixed;
background-image: url("http://placehold.it/1000x500");
}

.second {
background-color: #fff;
min-height: 500px;

}

.third {
background-color: #ff0000;
min-height: 500px;
background-attachment: fixed;

} 
```

我希望猫图片保持粘性，以便第二个 div（'.second'）可以像覆盖背景一样覆盖它。

我想模拟与背景附件相同的行为：用猫图片固定。

帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:36:30.977

在您的图像上，使用 a`position : fixed`来防止它滚动，并使用 a`z-index:-1`让它在事物后面

如果它落后于您不想要的东西，请在其上使用 z-index:-2

# c# - savechanges() 保存一个实体而不是另一个

> ID：16101243
> 
> 赞同：0
> 
> 时间：2013-04-19T09:17:43.403
> 
> 标签：c#, entity-framework, transactionscope, savechanges

一个奇怪的情况让我震惊，这段代码两天前运行成功，但我不知道为什么它现在没有像以前那样运行：

```
public static void ChangeStatus(int sessionID, int? participantID, Guid? temporaryParticipantID, int statustypeID)
{
    using (EMSEntities entities = new EMSEntities())
    using (TransactionScope ts = new TransactionScope())
    {
        try
        {
            SessionParticipant sessionParticipant = null;
            CurrentSessionSeatsStatu sessionCurrentStatus = null;
            if (participantID != null)
            {
                sessionParticipant = entities.SessionParticipants
                                             .Where(a => a.SessionID == sessionID && a.ParticipantID == participantID)
                                             .FirstOrDefault();
            }
            else if (temporaryParticipantID != null)
            {
                sessionParticipant = entities.SessionParticipants
                                             .Where(a => a.SessionID == sessionID && a.TemporaryParticipantID == temporaryParticipantID)
                                             .FirstOrDefault();
            }
            if (sessionParticipant != null)
            {
                sessionParticipant.StatusTypeID = statustypeID; // Status Changed here
            }
            **if (sessionParticipant.StatusTypeID == 2) // verified status
            {
                sessionCurrentStatus = entities.CurrentSessionSeatsStatus
                                               .Where(a => a.SessionID == sessionID)
                                               .FirstOrDefault();
                if (sessionCurrentStatus.SeatsLeft > 0)
                {
                    sessionCurrentStatus.SeatsLeft = sessionCurrentStatus.SeatsLeft - 1;
                }
            }**
            entities.SaveChanges();
            ts.Complete();
        }
        catch (Exception ex)
        {
            ts.Dispose();
        }
    }
} 
```

问题是 sessionParticipant 的更改（在 StatusTypeID 中）未保存在数据库中，但 sessionCurrentStatus 更改是！

没有错误抛出什么！

编辑：我发现`sessionparticipant`除了状态更改为已验证之外，所有情况下都发生了变化。
IE。当另一张桌子即。`sessioncurrentstatus`在 if 块中更新。
那就是每当它进入这个`if block(bold in code)`问题时。

最后我发现了问题，我认为这是因为下面的代码但是如果有人能解释确切的原因会很好：

```
EMS.DAL.DALHelper.AttachAndSaveChanges(sessionParticipant, System.Data.EntityState.Modified); // the position of this code line can be found in the below code 
```

下面是调用 ChangesStatus 方法的代码：

```
protected void ddlStatuses_SelectedIndexChanged(object sender, EventArgs e)
{
    for (int i = 0; i < gridViewEvents.VisibleRowCount; i++)
    {
        if (gridViewEvents.Selection.IsRowSelected(i))
        {
            EMS.DAL.SessionParticipant sessionParticipant = (EMS.DAL.SessionParticipant)gridViewEvents.GetRow(i);
            EMS.DAL.Session session = EMS.DAL.DALHelper.GetSessionById(sessionParticipant.SessionID);
            EMS.DAL.DALHelper.ChangeStatus(sessionParticipant.SessionID, sessionParticipant.ParticipantID, sessionParticipant.TemporaryParticipantID, Convert.ToInt32(ddlStatuses.SelectedItem.Value));
            if (ddlStatuses.SelectedItem.Value == "2" || ddlStatuses.SelectedItem.Value == "3") // if accepted or rejected
            {
                if (ddlStatuses.SelectedItem.Value == "2")  // verified/accepted
                {
                    EMS.DAL.DALHelper.SendMail("Congratulations! your participation for " + session.Name + " event has been confirmed.", "", sessionParticipant.Email, "");
// AT THIS POINT THE 'sessionParticipant' did not have the changed status which was set in the ChangeStatus method
                    sessionParticipant.IsNotified = true;
                    EMS.DAL.DALHelper.AttachAndSaveChanges(sessionParticipant, System.Data.EntityState.Modified);  // culprit as per me

                    List<EMS.DAL.SessionAttendanceList> attendanceList = EMS.DAL.DALHelper.GetSessionAttendanceList(session.ID);
                    attendanceList.ForEach(a =>
                    {
                        EMS.DAL.AttendanceListDetail attendanceListDetail = a.AttendanceListDetails.Where(p => p.ParticipantID == sessionParticipant.ParticipantID).FirstOrDefault();
                        if (attendanceListDetail == null)
                        {
                            attendanceListDetail.AttendanceListID = a.ID;
                            attendanceListDetail.ParticipantID = sessionParticipant.ParticipantID.Value;
                            attendanceListDetail.IsPresent = false;
                            EMS.DAL.DALHelper.AttachAndSaveChanges(attendanceListDetail, System.Data.EntityState.Added);
                        }
                    });
                }
                else if (ddlStatuses.SelectedItem.Value == "3") // denied/rejected
                {
                    EMS.DAL.DALHelper.SendMail("Your participation for " + session.Name + " event has been denied.", "", sessionParticipant.Email, "");
                    sessionParticipant.IsNotified = true;
                    EMS.DAL.DALHelper.AttachAndSaveChanges(sessionParticipant, System.Data.EntityState.Modified);
                    List<EMS.DAL.SessionAttendanceList> attendanceList = EMS.DAL.DALHelper.GetSessionAttendanceList(session.ID);
                    attendanceList.ForEach(a =>
                    {
                        EMS.DAL.AttendanceListDetail attendanceListDetail = a.AttendanceListDetails.Where(p => p.ParticipantID == sessionParticipant.ParticipantID).FirstOrDefault();
                        if (attendanceListDetail != null)
                        {
                            EMS.DAL.DALHelper.AttachAndSaveChanges(attendanceListDetail, System.Data.EntityState.Deleted);
                        }
                    });
                }
            }
            else
            {
                List<EMS.DAL.SessionAttendanceList> attendanceList = EMS.DAL.DALHelper.GetSessionAttendanceList(session.ID);
                attendanceList.ForEach(a =>
                {
                    EMS.DAL.AttendanceListDetail attendanceListDetail = a.AttendanceListDetails.Where(p => p.ParticipantID == sessionParticipant.ParticipantID).FirstOrDefault();
                    if (attendanceListDetail != null)
                    {
                        EMS.DAL.DALHelper.DeleteAttendanceListDetail(attendanceListDetail);
                    }
                });
                attendanceList.ForEach(a =>
                {
                    EMS.DAL.DALHelper.DeleteSessionAttendanceList(a);
                });
            }
        }
    }
    gridViewEvents.DataBind();
    RefreshSeats();
} 
```

# actionscript-3 - 支持拖放的客户布局

> ID：16101244
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:18:01.467
> 
> 标签：actionscript-3, apache-flex, layout, flex4

Evtim 写了一个很好的客户[FlowLayout](http://www.adobe.com/devnet/flex/articles/spark_layouts.html)，Maxim 也有一个很好的客户Horizo​​ntal [Multiline Layout](http://kachurovskiy.com/2010/horizontal-multiline-layout/)但他们不支持拖放。当定义扩展 LayoutBase 并支持拖放的客户布局时，用户应该实现或覆盖哪些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:14:59.040

我已经解决了，以下是我基于Maxim 的[Horizo​​ntal Multiline Layouy](http://kachurovskiy.com/2010/horizontal-multiline-layout/)的客户布局：

```
public class HorizontalMultilineLayout extends LayoutBase {
        private var _rowCount:int = -1;
        private var _columnCount:int = -1;

        //container width
        private var lastWidth:Number = -1;

        private var _horizontalGap:Number = 6;

        public function get horizontalGap():Number
        {
            return _horizontalGap;
        }

        public function set horizontalGap(value:Number):void
        {
            if (value == _horizontalGap)
                return;

            _horizontalGap = value;
            invalidateTargetSizeAndDisplayList();
        }

        private var _verticalGap:Number = 6;

        public function get verticalGap():Number
        {
            return _verticalGap;
        }

        public function set verticalGap(value:Number):void
        {
            if (value == _verticalGap)
                return;

            _verticalGap = value;
            invalidateTargetSizeAndDisplayList();
        }

        private var _verticalAlign:String = VerticalAlign.TOP;

        [Inspectable(category="General", enumeration="top,bottom,middle", defaultValue="top")]
        public function get verticalAlign():String
        {
            return _verticalAlign;
        }

        public function set verticalAlign(value:String):void
        {
            if (_verticalAlign == value)
                return;

            _verticalAlign = value;
            invalidateTargetSizeAndDisplayList();
        }

        private var _paddingLeft:Number = 0;

        public function get paddingLeft():Number
        {
            return _paddingLeft;
        }

        public function set paddingLeft(value:Number):void
        {
            if (_paddingLeft == value)
                return;

            _paddingLeft = value;
            invalidateTargetSizeAndDisplayList();
        }    

        private var _paddingRight:Number = 0;

        public function get paddingRight():Number
        {
            return _paddingRight;
        }

        public function set paddingRight(value:Number):void
        {
            if (_paddingRight == value)
                return;

            _paddingRight = value;
            invalidateTargetSizeAndDisplayList();
        }    

        private var _paddingTop:Number = 0;

        public function get paddingTop():Number
        {
            return _paddingTop;
        }

        public function set paddingTop(value:Number):void
        {
            if (_paddingTop == value)
                return;

            _paddingTop = value;
            invalidateTargetSizeAndDisplayList();
        }    

        private var _paddingBottom:Number = 0;

        public function get paddingBottom():Number
        {
            return _paddingBottom;
        }

        public function set paddingBottom(value:Number):void
        {
            if (_paddingBottom == value)
                return;

            _paddingBottom = value;
            invalidateTargetSizeAndDisplayList();
        }    

        override public function measure():void
        {
            if (lastWidth == -1) {
                return;
            }

            var measuredWidth:Number = 0;
            var measuredMinWidth:Number = 0;
            var measuredHeight:Number = 0;
            var measuredMinHeight:Number = 0;

            var layoutTarget:GroupBase = target;
            var n:int = layoutTarget.numElements;
            var element:ILayoutElement;
            var i:int;
            var width:Number = layoutTarget.explicitWidth;
            if (isNaN(width) && lastWidth != -1)
                width = lastWidth;
            if (isNaN(width)) // width is not defined by parent or user
            {
                // do not specify measuredWidth and measuredHeight to real
                // values because in fact we can layout at any width or height
                for (i = 0; i < n; i++)
                {
                    element = useVirtualLayout ? layoutTarget.getVirtualElementAt(i) : layoutTarget.getElementAt(i);
                    if (!element || !element.includeInLayout)
                        continue;

                    measuredWidth = Math.ceil(element.getPreferredBoundsWidth());
                    measuredHeight = Math.ceil(element.getPreferredBoundsHeight());
                    break;
                }
                measuredMinWidth = measuredWidth;
                measuredMinHeight = measuredHeight;
            }
            else
            {
                // calculate lines based on width
                var currentLineWidth:Number = 0;
                var currentLineHeight:Number = 0;
                var lineNum:int = 1;
                for (i = 0; i < n; i++)
                {
                    element = useVirtualLayout ? layoutTarget.getVirtualElementAt(i) : layoutTarget.getElementAt(i);
                    if (!element || !element.includeInLayout)
                        continue;

                    var widthWithoutPaddings:Number = width - _paddingLeft - _paddingRight;
                    var elementWidth:Number = Math.ceil(element.getPreferredBoundsWidth());
                    if (currentLineWidth == 0 || 
                        currentLineWidth + _horizontalGap + elementWidth <= widthWithoutPaddings)
                    {
                        currentLineWidth += elementWidth + (currentLineWidth == 0 ? 0 : _horizontalGap);
                        currentLineHeight = Math.max(currentLineHeight, Math.ceil(element.getPreferredBoundsHeight()));
                    }
                    else
                    {
                        measuredHeight += currentLineHeight;

                        lineNum++;
                        currentLineWidth = elementWidth;
                        currentLineHeight = Math.ceil(element.getPreferredBoundsHeight());
                    }
                }
                measuredHeight += currentLineHeight;
                if (lineNum > 1)
                    measuredHeight += _verticalGap * (lineNum - 1);

                // do not set measuredWidth to real value because really we can  
                // layout at any width
                for (i = 0; i < n; i++)
                {
                    element = useVirtualLayout ? layoutTarget.getVirtualElementAt(i) : layoutTarget.getElementAt(i);
                    if (!element || !element.includeInLayout)
                        continue;

                    measuredWidth =
                        measuredMinWidth = Math.ceil(element.getPreferredBoundsWidth());
                    break;
                }
                measuredMinHeight = measuredHeight;
            }

            layoutTarget.measuredWidth = measuredWidth + _paddingLeft + _paddingRight;
            layoutTarget.measuredMinWidth = measuredMinWidth + _paddingLeft + _paddingRight;
            layoutTarget.measuredHeight = measuredHeight + _paddingTop + _paddingBottom;
            layoutTarget.measuredMinHeight = measuredMinHeight + _paddingTop + _paddingBottom;
        }

        override public function updateDisplayList(width:Number, height:Number):void
        {
            resetRowAndColumn();
            var layoutTarget:GroupBase = target;
            var n:int = layoutTarget.numElements;
            var element:ILayoutElement;
            var i:int;
            // calculate lines based on width
            var x:Number = _paddingLeft;
            var y:Number = _paddingTop;
            var maxLineHeight:Number = 0;
            var elementCounter:int = 0;
            var positions:Vector.<Point> = new Vector.<Point>();
            for (i = 0; i < n; i++)
            {
                element = useVirtualLayout ? layoutTarget.getVirtualElementAt(i) : layoutTarget.getElementAt(i);
                if (!element || !element.includeInLayout)
                    continue;

                var elementWidth:Number = Math.ceil(element.getPreferredBoundsWidth());
                if (x == _paddingLeft || x + _horizontalGap + elementWidth <= width - _paddingRight) {
                    if (elementCounter > 0)
                        x += _horizontalGap;
                    positions[i] = new Point(x, y);
                    element.setLayoutBoundsSize(NaN, NaN);
                    maxLineHeight = Math.max(maxLineHeight, Math.ceil(element.getPreferredBoundsHeight()));
                    //calculate column count
                    if(!startNewLine) {
                        _columnCount++;
                    }
                }else {
                    startNewLine = true;
                    _rowCount++;
                    x = _paddingLeft;
                    y += _verticalGap + maxLineHeight;
                    maxLineHeight = Math.ceil(element.getPreferredBoundsHeight());
                    positions[i] = new Point(x, y);
                    element.setLayoutBoundsSize(NaN, NaN);
                }
                x += elementWidth;
                elementCounter++;
            }

            // verticalAlign and setLayoutBoundsPosition() for elements
            var yAdd:Number = 0;
            var yDifference:Number = height - (y + maxLineHeight + _paddingBottom);
            if (_verticalAlign == VerticalAlign.MIDDLE)
                yAdd = Math.round(yDifference / 2);
            else if (_verticalAlign == VerticalAlign.BOTTOM)
                yAdd = Math.round(yDifference);
            for (i = 0; i < n; i++)
            {
                element = useVirtualLayout ? layoutTarget.getVirtualElementAt(i) : layoutTarget.getElementAt(i);
                if (!element || !element.includeInLayout)
                    continue;
                var point:Point = positions[i];
                point.y += yAdd;
                element.setLayoutBoundsPosition(point.x, point.y);
            }

            // if width changed then height will change too - remeasure
            if (lastWidth == -1 || lastWidth != width)
            {
                lastWidth = width;
                invalidateTargetSizeAndDisplayList();
            }
            //trace("rowCount: ---", _rowCount, " ---columnCount: ----", _columnCount);
        }

        private var startNewLine:Boolean = false;

        private function resetRowAndColumn():void {
            var num:int = target.numElements;
            if(num >0) {
                _rowCount = 1;
                _columnCount = 0;
            } else {
                _rowCount = _columnCount = 0;
            }
            startNewLine = false;
        }

        private function invalidateTargetSizeAndDisplayList():void
        {
            var g:GroupBase = target;
            if (!g)
                return;

            g.invalidateSize();
            g.invalidateDisplayList();
        }

        private function calculateDropCellIndex(x:Number, y:Number):Array {
            var xStart:Number = x - paddingLeft;
            var yStart:Number = y - paddingTop;
            var column:int = Math.floor(xStart / (columnWidth + _horizontalGap));
            var row:int = Math.floor(yStart / (rowHeight + _verticalGap));

            // Check whether x is closer to left column or right column:
            var midColumnLine:Number;
            var midRowLine:Number;

            midColumnLine = (column + 1) * (columnWidth + _horizontalGap) - _horizontalGap - columnWidth / 2; 

            // Mid-line is at the middle of the gap between the rows
            midRowLine = (row + 1) * (rowHeight + _verticalGap) - _verticalGap / 2;  

            if (xStart > midColumnLine)
                column++;
            if (yStart > midRowLine)
                row++;

            // Limit row and column, if any one is too far from the drop location
            // And there is white space
            if (column > _columnCount || row > _rowCount)
            {
                row = _rowCount;
                column = _columnCount;
            }

            if (column < 0)
                column = 0;
            if (row < 0)
                row = 0;

            if (row >= _rowCount)
                row = _rowCount - 1;

            return [row, column];
        }

        override protected function calculateDropIndex(x:Number, y:Number):int {
            var result:Array = calculateDropCellIndex(x, y);
            var row:int = result[0]; 
            var column:int = result[1]; 
            var index:int = row * _columnCount + column;
            var count:int = target.numElements;

            if (index > count) {
                index = count;
            }

            return index;
        }

        private function get columnWidth():Number {
            return typicalLayoutElement.getLayoutBoundsWidth();
        }

        private function get rowHeight():Number {
            return typicalLayoutElement.getLayoutBoundsHeight();
        }

        //NOTE:we do NOT use contentWidth
        override protected function calculateDropIndicatorBounds(dropLocation:DropLocation):Rectangle {
            var result:Array = calculateDropCellIndex(dropLocation.dropPoint.x, dropLocation.dropPoint.y);
            var row:int = result[0]; 
            var column:int = result[1]; 

            var count:int = target.numElements;

            // The last row may be only partially full,
            // don't drop beyond the last column.
            if (row * _columnCount + column > count)
                column = count - (_rowCount - 1) * _columnCount;

            var x:Number;
            var y:Number;
            var dropIndicatorElement:IVisualElement;
            var emptySpace:Number; // empty space between the elements

            // Start with the dropIndicator dimensions, in case it's not 
            // an IVisualElement
            var width:Number = dropIndicator.width;
            var height:Number = dropIndicator.height;

            emptySpace = (0 < _horizontalGap ) ? _horizontalGap : 0; 
            var emptySpaceLeft:Number = column * (columnWidth + _horizontalGap) - emptySpace;

            // Special case - if we have negative gap and we're the last column,
            // adjust the emptySpaceLeft
            if (_horizontalGap < 0 && (column == _columnCount || count == dropLocation.dropIndex))
                emptySpaceLeft -= _horizontalGap;

            width = emptySpace;
            height = rowHeight;
            // Special case - if we have negative gap and we're not the last
            // row, adjust the height
            if (_verticalGap < 0 && row < _rowCount - 1)
                height += _verticalGap + 1;

            if (dropIndicator is IVisualElement)
            {
                dropIndicatorElement = IVisualElement(dropIndicator);
                width = Math.max(Math.min(width,
                    dropIndicatorElement.getMaxBoundsWidth(false)),
                    dropIndicatorElement.getMinBoundsWidth(false));
            }

            x = emptySpaceLeft + Math.round((emptySpace - width) / 2) + paddingLeft;
            // Allow 1 pixel overlap with container border
            //x = Math.max(-1, Math.min(target.contentWidth - width + 1, x));
            //NOTE:we do NOT use contentWidth
            x = Math.max(-1, Math.min(target.width - width + 1, x));
            y = row * (rowHeight + _verticalGap) + paddingTop;
            return new Rectangle(x, y, width, height);
        }
 } 
```

# dictionary - Mongoengine - how to atomically update a dictionary?

> ID：16101245
> 
> 赞同：2
> 
> 时间：2013-04-19T09:18:05.147
> 
> 标签：dictionary, updates, mongoengine

I have a model that looks like this:

```
class TestDoc(Document):
    name = StringField()
    friends = ListField(StringField())
    address_book = DictField() 
```

And I wish to atomically update the address_book field whenever the friends list changes. How can I modify both fields in an atomic operation? I can't find any modifier in the documentation:

[https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html#atomic-updates](https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html#atomic-updates)

that makes atomic update for dictionaries. Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:02:20.057

当您每次执行`$push`或`$pull`从该`friends`字段执行时，您还必须在同一更新中修改`address_book`例如：

```
TestDoc(name="Sue", friends=["Bob", "Sarah"], 
        address_book={"Bob": "1 the farm", "Sarah": "Owl house"}).save()

TestDoc.objects(name="Sue").update(pull__friends="Bob", 
                                   unset__address_book__Bob=1) 
```

# multithreading - Http headers for starting a multithreaded download

> ID：16101259
> 
> 赞同：0
> 
> 时间：2013-04-19T09:18:37.290
> 
> 标签：multithreading, node.js, http-headers, download

I am trying to create a multi threaded downloader using nodejs. Currently I am only able to download the file using a single thread. Its a simple http.get request in nodejs.

To create a multi threaded downloader I will have to send some http headers in my request which I am not able to figure out some how. I want to know what http headers should I be sending so that I am able to download a range of bytes from an offset.

```
var http = require('http');

var options = {
  host: 'hostname.com',
  path: '/path/to/a/large/file.zip',
  headers: {
    //Some headers which will help me download only a part of the file.
  }
};

callback = function(response) {
  response.on('data', function (chunk) {
     //write chunk to a file
  });
}

http.request(options, callback).end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:04:03.737

You need `Range` header. Example is given in [wiki](https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#range-request-header)

```
Range: bytes=500-999 
```

For more detail see **14.35 Range** in [HTTP header Definitions](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

# asp.net - For Each GridviewRow Loop, with where clause?

> ID：16101270
> 
> 赞同：1
> 
> 时间：2013-04-19T09:19:15.293
> 
> 标签：asp.net, vb.net, gridview, for-loop

Is there any easier way of using the code:

```
For Each gvRow As GridViewRow In gvGridviewExample.Rows
    If gvRow.RowType = DataControlRowType.DataRow Then
        'Do Something
    End If
Next 
```

Such as when using a iEnumerable you theoritically (psuedo code style) add a:

```
gvGridviewExample.Where(Function(chR) chR.Row = DataRow) 
```

I just wondered if there is an easier way of coding this out?

Thanks,

Firstcape

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:22:16.027

除了您的第一个片段实际上*非常*简单明了之外，`Rows`a 的属性**仅**`GridView`返回. 所以你根本不需要检查类型。**`DataRows`**

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rows.aspx)

> `Rows`属性（集合）用于将数据行存储在 GridView 控件中。
> 
> 只有将 RowType 属性设置为 `DataControlRowType.DataRow`的行存储在 Rows 集合中。表示页眉、页脚和分页器行的 GridViewRow 对象不包含在集合中。

`RowCreated`在或之类的事件中只能有不同的类型`RowDataBound`。如果您想在这些事件之外访问页眉、页脚或分页器，您可以使用`GridView`like`HeaderRow`或`FooterRow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:42:08.230

除了 Tim 的回答（对于您的具体情况 100% 正确）之外，您还可以在类似情况下使用[linq](/questions/tagged/linq "显示标记为“linq”的问题")，即当您只想遍历所有可见行时：

```
gvGridViewExample.Rows
    .Where(Function(r) r.Displayed = True)  ' Apply filter
    .ToList()
    .ForEach(Function(x) x.DoSomething())  ' Do something... 
```

或者

```
For Each row in gvGridViewExample.Rows.Where(Function(r) r.Displayed = True)
    row.DoSomething()
Next 
```

# javascript - 如何获取所有 DOM，包括由 JAVASCRIPT 生成的

> ID：16101276
> 
> 赞同：-2
> 
> 时间：2013-04-19T09:19:28.817
> 
> 标签：javascript, dom

作为标题，我怎样才能获得所有 DOM 树，包括由 javascript 生成的。

例如：

```
<html>
...
  <script type='text/javascript'>
    function add_new_element(){
      var dv, newP;
      newP = document.createElement("p");
      newP.id = 'new';
      dv = document.getElementById('ex');
      dv.appendChild(newP);
    }
  </script>
  <body onload="add_new_element()">
    <div id="ex"></div>
  </body>
</html> 
```

我想获取所有 DOM，包括由 js 生成的“p”。

我使用phantomjs执行js然后获取DOM，但是失败了。

有人有好主意吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:32:09.687

您可以访问代码中新创建的 p 对象。变量 newP 保存了它。如果您操纵该变量，则 dom 更改将自动反映在 dom 中。如果您在访问它时仍然遇到问题，请告诉我。

注意：由于您已将 newP 变量声明为**var**类型，因此它将对该函数 ** add_new_element** 保持私有。如果您希望它是全局变量（恕我直言，这是您应该做的），以便您可以一直访问它，您应该将其声明为 newP。

```
 var dv;
 //remove the var type declaration
 newP = document.createElement("p");
 newP.id = 'new'; 
```

# haskell - 多态返回类型、接口、回调？

> ID：16101284
> 
> 赞同：4
> 
> 时间：2013-04-19T09:19:59.403
> 
> 标签：haskell

假设`Goo`是我的类型类，它通常被认为是 C++、Java 或 C# 等语言中的接口等价物：

```
class Goo goo where ham :: goo -> String

data Hoo = Hoo
instance Goo Hoo where ham _ = "Hoo!"
                       mustard _ = "Oh oh."

data Yoo = Yoo
instance Goo Yoo where ham _ = "Yoo!"
                       mustard _ = "Whew" 
```

但我不能返回`Goo`：

```
paak :: (Goo goo) => String -> goo
paak g = (Yoo)

-- Could not deduce (goo ~ Yoo)
-- from the context (Goo goo)
--  bound by the type signature for paak :: Goo goo => String -> goo
--  at frob.hs:13:1-14
--  `goo' is a rigid type variable bound by
--        the type signature for paak :: Goo goo => String -> goo
--        at frob.hs:13:1
-- In the expression: (Yoo)
-- In an equation for `paak': paak g = (Yoo) 
```

我发现了这个有启发性的陈述，它解释了原因：

> 该类型`paak :: (Goo goo) => String -> goo`并不意味着该函数可能会返回`Goo`它想要的任何内容。这意味着该函数将返回`Goo`用户想要的任何内容。

[（从这里](https://stackoverflow.com/a/8155958/76722)的sepp2k的答案音译）

但是，我怎样才能返回或存储满足`Goo`约束条件但可以是`Hoo`、`Yoo`、`Moo`或`Boo`任何其他的东西`Goo`？

我是不是太纠结于自己的编程背景，需要完全不一样的思考，比如求助于类 C 的接口：

```
data WhewIamAGoo = WhewIamAGoo {
    ham' :: String
    mustard' :: String
}

paak :: String -> WhewIamAGoo
paak g = let yoo = Yoo 
         in WhewIamAGoo { ham' = ham yoo
                          mustard' = mustard ham
                        } 
```

但这似乎很尴尬。

在我的具体情况下，我想这样使用`Goo`：

```
let x = someGoo ....
in ham x ++ mustard x 
```

即调用者不需要知道所有的`Yoo`s和诸如此类的东西。

* * *

**编辑：**澄清：我正在寻找Haskell程序员在这种情况下的方式。*您将*如何以惯用的方式处理它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T10:34:50.137

有两种方法可以解决这个问题，我认为这是惯用的 Haskell：

1.  **代数数据类型**

    ```
    data Goo = Hoo | Yoo

    ham Hoo = "Hoo!"
    ham Yoo = "Yoo!"

    mustard Hoo = "Oh oh."
    mustard Yoo = "Whew" 
    ```

    优点：易于添加新操作
    缺点：添加新“类型”可能需要修改许多现有功能

2.  **支持的操作记录**

    ```
    data Goo = Goo { ham :: String, mustard :: String }

    hoo = Goo { ham = "Hoo!", mustard = "Oh oh." }
    yoo = Goo { ham = "Yoo!", mustard = "Whew" } 
    ```

    优点：易于添加新的“类型”
    缺点：添加新操作可能需要修改许多现有功能

你当然可以混合搭配这些。一旦你习惯于考虑函数、数据和组合而不是接口、实现和继承，在大多数情况下这些就足够了。

类型类是为重载而设计的。使用它们来模仿 Haskell 中的面向对象编程通常是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T10:44:41.350

类型类有点像 Java 风格的接口，但你使用它们的方式与使用接口的方式并不完全相同，因此这不是学习它们的好方法。

接口**是**一种类型（因为 OO 语言有子类型，所以其他类型可以是接口的子类型，这就是你完成任何事情的方式）。Haskell 中的所有类型都是不相交的，所以类型类**不是**类型。它是一*组*类型（实例声明是您声明集合成员的位置）。试着这样想它们。它使类型签名的正确读取更加自然（`String -> a`意味着“接受 a`String`并返回您想要的任何类型的值”，并且`SomeTypeClass a => String -> a`意味着“接受 a`String`并返回您想要的任何类型的值`SomeTypeClass`”）。

现在你不能按照你想要的方式做你想做的事，但我不确定为什么你需要按照你想要的方式去做。为什么不能`paak`只拥有 type `String -> Yoo`？

您说您正在尝试执行以下操作：

```
let x = someGoo ....
in ham x ++ mustard x 
```

如果`someGoo ...`是`paak "dummy string"`，那么`x`将是类型`Yoo`。But`Yoo`是 的成员`Goo`，因此您可以在其上调用和之`Goo`类的方法。如果您稍后更改为返回不同类型的值，那么编译器将告诉您使用任何特定功能的所有位置，并愉快地接受任何调用但仅使用该功能的位置。`ham``mustard``paak``Goo``Yoo``paak``Goo`

为什么你需要输入“一些未知类型，它是`Goo`”的成员？从根本上说，调用者`paak` *不会*对 in 中的任何类型进行`Goo`操作，它们只会对`paak`实际返回的内容进行操作，即 a `Yoo`。

您有一些对具体类型进行操作的函数，它们可以调用这些具体类型的函数以及来自具体类型所属的类型类的函数。或者您有对属于某个类型类的成员的任何类型进行操作的函数，在这种情况下，您可以调用的只是对类型类中的任何类型起作用的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T09:39:39.473

首先，一般不需要！你的`WhenIAmGoo`方法很好；由于 Haskell 是懒惰的，它没有任何真正的缺点，但通常更清晰。

但这仍然是可能的：

```
{-# LANGUAGE RankNTypes              #-}

paak' :: String -> (forall goo . Goo goo => goo -> r) -> r
paak' g f = f Yoo 
```

看起来很复杂？

要理解这个问题，您需要了解 Haskell 的基于[Hindley-Milner](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)的类型系统是如何工作的，这与 C++ 和 Java 所做的完全不同。在这些语言中，你似乎知道，多态性基本上是一种有限的动态类型：如果你传递一个带有“接口类型”的对象，你实际上宁愿传递一个对象周围的包装器，它知道接口方法是如何实现的在里面。

在 Haskell 中，情况有所不同。显式编写的多态签名如下所示：

```
paak :: { forall goo . (Goo goo) } => {String -> goo} 
```

这意味着，该函数实际上有一个完全独立的额外参数，即“字典参数”。这就是用于访问界面的内容。而且由于这确实是传递*给*函数的参数，因此函数显然无法选择它。

要将字典*从*函数中传递出去，你需要像我上面那样使用这样的恶作剧：你不直接返回多态结果，而是问调用者“你打算如何使用它？但是请注意，我可以'不要告诉你要得到什么具体类型......“也就是说，你要求他们给你自己一个多态函数，然后你可以在其中插入你选择的具体类型。

这样的功能可以这样使用：

```
myHamAndMustard = paak' arg (\myGoo -> ham myGoo ++ mustard myGoo ) 
```

这不是很好。同样，通常更好的方法是为所有可能的输出设置一个透明的非多态容器。很多时候，这仍然不是最佳的。您可能从太多的面向对象的角度来处理您的整个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T10:20:16.000

根据目前提供的信息，C 风格的界面（== 函数记录）似乎是要走的路。

然而，为了让它使用起来更甜，添加一个智能构造函数并创建`AnyGoo`一个实例`Goo`：

```
data AnyGoo = AnyGoo {
    ham' :: String 
}
instance Goo AnyGoo where
    ham = ham' 

anyGoo :: (Goo goo) => goo -> AnyGoo 
anyGoo goo = AnyGoo { ham' = ham goo } 
```

那么你可以统一调用`ham`all `Goo`：

```
> let x = anyGoo Hoo
> let y = anyGoo Yoo
> ham x
"Hoo!"
> ham y
"Yoo!" 
```

`paak`然后将返回 a`AnyGoo`而不是 a `Goo`：

```
paak :: String -> AnyGoo
paak _ = anyGoo Yoo 
```

但是那样的话，你（我）会再次传递某种类型，因此可以更好地返回hammar的建议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T11:18:24.817

我想支持回答@phresnel，但我想添加一些一般性想法。

您应该了解的是，使用该签名`paak :: (Goo goo) => String -> goo`您正在尝试使用类型系统控制您未来的评估。类型只存在于编译时，如 C#、C++ 和其他面向 OOP 的语言。为了在运行时以不同的方式表示类型，此类语言使用虚函数表等。在 Haskell 中，您应该做同样的事情并将其包装在某些东西中。

```
data AnyGoo = forall a . (Goo a) => AnyGoo a

paak :: String -> AnyGoo
paak g = AnyGoo Yoo 
```

在这种情况下，编译器（借助 ExistentialQuantification 和其他东西）为 AnyGoo 提供了多个构造函数（例如实现一个接口的类的多个构造函数），它对任何在 Goo 类型类中具有实例的类型都是开放的。

但在这种情况下，它足以使用数据值（如虚函数）。

```
data Goo = Goo { ham :: String }

-- ham :: Goo -> String
yoo = Goo { ham = "Yoo!" }
paak :: String -> AnyGoo
paak g = Goo yoo 
```

# .htaccess - Htaccess-rewrite - 排除条件中的一些文件夹

> ID：16101285
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:02.637
> 
> 标签：.htaccess, mod-rewrite

我有一个脚本可以在图像上放置水印。

我想要一个 RewriteRule，它将排除文件夹内的图像（拇指和拇指配置文件）。意味着此文件夹中的图像不会被加盖水印

目前我有这个

```
RewriteRule ^([^/thumb|^/profilethumb].*\.(gif|jp?g|png))$ watermark.php?image=$1&watermark=watermark.png [NC] 
```

问题是它没有在 (thumb) 中的图像上添加水印，这是正确的，但它仍然在文件夹 (profilethumb) 中添加水印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:19:21.700

结合条件试试这个规则：

```
RewriteCond %{REQUEST_URI} !^/(profile)?thumb(/.*)?$ [NC]
RewriteRule ^.*\.(gif|png|jpe?g)$ watermark.php?image=$0&watermark=watermark.png [L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:40:08.987

也许这就是你需要的：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !/(thumb|profilethumb) [NC]
RewriteCond %{REQUEST_URI}  !watermark\.php        [NC]
RewriteCond %{REQUEST_URI}  /([^.]+)\.(gif|jpg|jpeg|png) [NC]
RewriteRule .*  /watermark.php?image=%1.%2&watermark=watermark.png [NC,L] 
```

我猜只有图像并且从规则中排除两个目录就足够了`/thumb`。`/profilethumb`如果还有其他文件，我认为您也不希望它们有水印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:47:47.307

您可以先跳过这两个目录`thumb`并`profilethumb`使用[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)不替换 URL 路径的 ，然后使用第二条规则处理所有其他图像

```
RewriteRule ^(?:thumb|profilethumb).*\.(?:gif|jpe?g|png)$ - [L,NC]
RewriteRule ^.*\.(?:gif|jpe?g|png)$ watermark.php?image=$0&watermark=watermark.png [L,NC] 
```

# java - Scanner class input issues

> ID：16101286
> 
> 赞同：1
> 
> 时间：2013-04-19T09:20:05.197
> 
> 标签：java, input

Hi I am trying to solve large input of fair and square of google code jam of this year. I have got a good enough fast working code for large problem 1. However when I paste input it in console does not read all of it. Infact it just reads the last input for some reason. I want to paste input and get output. Is the scanner class causing the problem?

Code :

```
import java.util.Scanner;
class rishab {
 public static int check() {
 Scanner reader = new Scanner(System.in);
 double A=reader.nextLong();
 long B=reader.nextLong();
 int count = 0;
 long i;
 if((long)Math.sqrt(A)==Math.sqrt(A))
   i= (long)Math.sqrt(A);
 else
  i=(long)Math.sqrt(A)+1; 
for(;i<=Math.sqrt(B);i++) {
 if(i==reverse(i) && Math.pow(i,2)==reverse((long)Math.pow(i,2)))
  count++;
 }
 return(count);
 }

 public static long reverse(long number) {
  long result = 0;
  while (number != 0) {
   long remainder = number % 10;

    result = result * 10 + remainder;

    number /= 10;
 }
 return result;
 }
  public static void main(String str[]) {
 int[] a= new int[10000];

 Scanner reader = new Scanner(System.in);
 int T= reader.nextInt();

for(int i=0;i<T;i++)
 a[i]=check();
for(int i=0;i<T;i++)
 System.out.println("Case #"+(i+1)+": "+a[i]);
}
} 
```

Now the problem is if I for example PASTE input :

```
5
1 100
2 200
1 500
1 1000000
1 1000000000 
```

It wont work but if i type each line separately it will work What do i do so that I can paste the input? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:26:44.363

尝试这样的事情：

```
String input ="";
while (reader.hasNextLine()){
    input =  reader.nextLine();
    //parse each line   

} 
```

# mysql - sql group by 提取mysql中组的所有元素

> ID：16101288
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:12.297
> 
> 标签：mysql, sql, database

假设我在 mysql 中有一个表模式，如下所示：-

```
ipsrc,ipdst,framelen 
```

现在，如果我执行以下操作：-

```
select max(framelen) from tblname group by ipsrc,ipdst 
```

对于每个唯一的 ipsrc:ipdst 对，我得到最大的 framelen。

如果我想要`framelen`每`ipsrc:ipdst`对中的所有东西怎么办？

我们如何用 sql 得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:23:54.750

使用[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
select group_concat(framelen) 
from tblname 
group by ipsrc, ipdst 
```

列出所有`framelen`逗号分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:25:15.113

尝试这个：

```
select framelen from tblname group by ipsrc,ipdst,framelen 
```

# matplotlib - Could not install matplotlib

> ID：16101289
> 
> 赞同：4
> 
> 时间：2013-04-19T09:20:14.420
> 
> 标签：matplotlib

When I installed matplotlib in my 64-bit windows it require numpy. Then i installed numpy and again matplotlib then it says that

```
 numpy: 1.7.1
freetype2: found, but unknown version (no pkg-config)
           * WARNING: Could not find 'freetype2' headers in any
           * of 'win32_static\include', '.',
           * 'win32_static\include\freetype2', '.\freetype2'. 
```

and I tried in python

```
import numpy 
```

there is no error

but when i tried

```
import matplotlib 
```

shows error

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named matplotlib 
```

What may be the solution ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T04:48:06.037

softpedia 不是 mpl 二进制文件的“官方”主机，请参阅[http://matplotlib.org/downloads.html](http://matplotlib.org/downloads.html)

* * *

`matplotlib`从[这里](http://www.softpedia.com/progDownload/Matplotlib-Download-163831.html)下载并安装它。它包含了所有依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:11:27.320

如果要从源代码安装 Matplotlib，则需要以下工具：

**构建依赖项**

*   Python（支持 2.x）
*   麻木（> 1.1）
*   libpng (> 1.1)
*   自由类型 (> 1.4)

Matplotlib 的 Windows 安装程序应该已经包含 libpng 和 FreeType。但是，显然您的 matplotlib 找不到 FreeType 安装。

您可以在您的 PC 中搜索 FreeType 安装并提供 matplotlib 的路径，以便它可以找到所需的文件。如果未安装 FreeType，您应该这样做，尽管它应该包含在 Windows 安装程序中。

# python - 从选择菜单解析内容，Python+BeautifulSoup

> ID：16101290
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:14.763
> 
> 标签：python, beautifulsoup, html-parsing, urllib2

我正在尝试使用 python 解析页面中的数据，这可能非常简单，但所有数据都隐藏在 jquery 元素下，这使得获取数据变得更加困难。请原谅我，因为我是 Python 和整体编程的新手，所以仍然熟悉它。我从中获取它的网站是[http://www.asusparts.eu/partfinder/Asus/All](http://www.asusparts.eu/partfinder/Asus/All) In One/E 系列所以我只需要 E 中的所有数据这是我到目前为止的代码：

```
import string, urllib2, csv, urlparse, sys
from bs4 import BeautifulSoup

changable_url = 'http://www.asusparts.eu/partfinder/Asus/All%20In%20One/E%20Series'
page = urllib2.urlopen(changable_url)
base_url = 'http://www.asusparts.eu'
soup = BeautifulSoup(page)

redirects = []
model_info = []

select = soup.find(id='myselectListModel')
print select.get_text()

options = select.findAll('option')

for option in options:
    if(option.has_attr('redirectvalue')):
       redirects.append(option['redirectvalue'])

for r in redirects:
    rpage = urllib2.urlopen(base_url + r.replace(' ', '%20'))
    s = BeautifulSoup(rpage)
    print s

    sys.exit() 
```

但是唯一的问题是，它只打印出第一个型号的数据，即 Asus->All In One->E 系列->ET10B->AC Adapter。实际的 HTML 页面打印[如下...](http://codepad.org/3f4GEdJb)（输出太长 - 只是粘贴了所需的主要输出）

我不确定如何获取所有 E 系列部件的数据，因为我认为这会获取所有内容？另外，如果您显示的任何答案与我正在使用的当前方法有关，我将不胜感激，因为这是负责人希望这样做的方式，谢谢。

**[编辑]**

这就是我试图解析 HTML 的方式：

```
for r in redirects:
    rpage = urllib2.urlopen(urljoin(base_url, quote(r)))
    s = BeautifulSoup(rpage)
    print s

    data = soup.find(id='accordion')

    selection = data.findAll('td')

    for s in selections:
        if(selection.has_attr('class', 'ProduktLista')):
            redirects.append(td['class', 'ProduktLista']) 
```

这是我想出的错误：

```
Traceback (most recent call last):
  File "C:\asus.py", line 31, in <module>
    selection = data.findAll('td')
AttributeError: 'NoneType' object has no attribute 'findAll' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:53:52.767

您需要删除`sys.exit()`循环中的呼叫：

```
for r in redirects:
    rpage = urllib2.urlopen(base_url + r.replace(' ', '%20'))
    s = BeautifulSoup(rpage)
    print s

    # sys.exit()  # remove this line, no need to exit your program 
```

您可能还想`urllib.quote`正确引用从选项下拉列表中获得的 URL；这消除了手动替换空格的需要`'%20'`。用于`urlparse.urljoin()`构造最终 URL：

```
from urllib import quote
from urlparse import 

for r in redirects:
    rpage = urllib2.urlopen(urljoin(base_url, quote(r)))
    s = BeautifulSoup(rpage)
    print s 
```

# jquery - How to forcibly call .change function in jQuery

> ID：16101293
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:19.337
> 
> 标签：jquery, jquery-selectbox

I have the following code:

```
$("select#sel_mode").change(function(){
    if ($(this).val() == "N" || $(this).val() == "Y"){
        $("table#options").hide();
    } else {
        $("table#options").show();
        if ($(this).val() == "C"){
            $("tr#ip").hide();
        } else {
            $("tr#ip").show();
        }
    }
}); 
```

It works perfectly when I manually do changes in selectbox.

Using ajax I get values from server and according to the value I need to put selectbox in some position like:

```
$('#sel_mode').val(json_answer.mode); 
```

But it will not show/hide necessary elements and I need to add similar code again:

```
 if (json_answer.mode == "N" || json_answer.mode == "Y"){
        $("table#options").hide();
    } else {
        $("table#options").show();
        if (json_answer.mode == "C"){
            $("tr#ip").hide();
        } else {
            $("tr#ip").show();
        }
    } 
```

Is it possible somehow forcibly call defined method .change for select box? So i need to avoid duplicate code. Give me advice please. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:24:14.413

您可以调用不带参数的 jQuery 更改函数来强制该函数运行。

```
$("select#sel_mode").change(); 
```

# java - JSP 中的验证码

> ID：16101294
> 
> 赞同：1
> 
> 时间：2013-04-19T09:20:20.873
> 
> 标签：java, eclipse, jsp, recaptcha

我想知道为什么 ReCaptcha 没有显示在我的应用程序中。我在网上遵循了一系列教程。但仍然只显示提交按钮。

请在下面查看我的代码。

```
 <%@ page import="net.tanesha.recaptcha.ReCaptcha" %>
 <%@ page import="net.tanesha.recaptcha.ReCaptchaFactory" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

    <html>
      <body>
        <c:out value="${errorMessage}" />
        <form action="" method="post">
        <%
ReCaptcha c = ReCaptchaFactory.newReCaptcha("my public key", "my private key", false);
          out.print(c.createRecaptchaHtml(null, null));
        %>
        <input type="submit" value="submit" />
        </form>
      </body>
    </html> 
```

当然，我编辑了代码中的键。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:54:58.270

使用这个。这有一个教程可以帮助你[http://springinpractice.com/2008/03/13/how-to-recaptcha-your-java-application/](http://springinpractice.com/2008/03/13/how-to-recaptcha-your-java-application/) 这也将帮助你[http://rominirani.com /2010/02/22/episode-15-using-a-captcha-in-your-google-app-engine-application/](http://rominirani.com/2010/02/22/episode-15-using-a-captcha-in-your-google-app-engine-application/)

# jsp - 从 jsp 调用 AccessBean

> ID：16101296
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:24.767
> 
> 标签：jsp, websphere-commerce

我参加过一次面试，面试官问我这个问题：我们可以使用 usebean 标签从 JSP 调用 Accessbean 吗？当我们尝试从 jsp ussign usebean 标签调用 accessbean 时，您知道是否有问题。我检查了 publib，但没有得到任何令人满意的答案。为什么我们在 jsp 中选择 databean 而不是 accessbean？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:31:08.173

我猜面试官的意思是

```
<wcbase:useBean> 
```

标签，而不是jsp的useBean。wcbase:useBean 专门查找数据bean 并在数据bean 接口上调用activate 方法，因此无法激活访问bean。您可以在此处阅读有关该标签的更多信息：

[http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.developer.doc/concepts/cdeusebeantaglib.htm](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.developer.doc/concepts/cdeusebeantaglib.htm)

# css - 为什么我们需要在每个页面上添加跟随 css？

> ID：16101298
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:27.293
> 
> 标签：css

我是 css 的新手，我的朋友建议我在每个页面添加下面的 css，

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    font-family: arial,sans-serif;
} 
```

为什么我们需要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:21:48.793

重置所有设置，这可能因不同的浏览器而异

示例： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:29:46.590

正如 ExP 已经解释过的，您不应该使用它，但是 css 重置可能非常有用，因为某些浏览器会显示某些彼此不同的元素（就像 jancha 所说的那样）。

但我更喜欢 normalize.css - 它不会改变元素的整体行为，而是尽可能地统一它们。

只需在加载自己的 css 文件之前加载 normalize.css，一切都很好！:)

[http://necolas.github.io/normalize.css/](http://necolas.github.io/normalize.css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:24:58.883

实际上，您可能**不想**将其添加到每个页面。

它使所有元素的字体大小和边距看起来相同。标题看起来就像段落一样，它们之间甚至没有任何空格......

# javascript - 在 Mac OS X webkit 浏览器中检测弹性滚动

> ID：16101299
> 
> 赞同：1
> 
> 时间：2013-04-19T09:20:27.613
> 
> 标签：javascript, jquery, html, macos

我想检测弹性滚动以尝试复制一些 iOS 行为，例如如果有人向上滚动整个页面，则刷新我的页面。

如果我能像在 iOS 中一样向用户显示一条消息，那就太好了（但这可能要求太多了）。

我尝试在网上搜索，但找不到任何合适的信息。有没有人解决这个问题？

PS 很抱歉没有发布代码，因为这仍然是一个概念。当我把它拉下来时，我会把它贴在这里。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-12-05T15:56:09.990

我最终采用了与 Hammer.js 示例类似的方法：http: [//eightmedia.github.io/hammer.js/examples/pull-to-refresh.html](http://eightmedia.github.io/hammer.js/examples/pull-to-refresh.html)

# php - 类名在其他类的字段中的类的PHP调用方法

> ID：16101300
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:31.647
> 
> 标签：php, class, static-methods

我有一个 CodeIgniter php 设置并使用 RESTful 功能对其进行了增强。

我有以下结构

base.php（这是基本控制器类

```
class Base {
    private $model
    public function __construct($model = false) {
        $this->model = $model . '_model';
        $this->load->model($this->model);
    ...
} 
```

然后是一个指定模型的控制器

```
class Products extends Base {

    public function __construct() {
        parent::__construct('product');     
    }
} 
```

问题如下：在 base.php 中，我有 HTTP 方法（get、post、put、delete）的函数，但我无法从模型中调用静态方法，如下所示：

```
public function get() {
    return $this->model::loadData();
} 
```

如果我在其中分配`$this->model`一个局部变量，`get()`它会起作用，但对我来说它看起来很丑。

所以我的问题是：如何在给定 B 类成员中的类名的情况下调用 A 类的静态方法，而不将其分配给 B 类方法中的新局部变量？

PS：我知道 CodeIgniter 看起来不像这样，但它的结构与我的问题无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:34:34.927

正如您所指出的，将**$this->model**分配给像**$model**这样的局部变量，然后调用**$model::loadData()**可以按预期工作。

**$this->model::loadData()**调用不起作用的事实可能是我们在**::**和**->**运算符之间的优先级，但我不能肯定地说，因为在官方文档。

> 对于同等优先级的运算符，左结合性意味着计算从左到右进行，而右结合性则相反。对于非关联的具有相同优先级的运算符，这些运算符可能不与它们自身关联。例如，语句 1 < 2 > 1 在 PHP 中是非法的。然而，语句 1 <= 1 == 1 不是，因为 T_IS_EQUAL 运算符的优先级低于 T_IS_SMALLER_OR_EQUAL 运算符。

来自[PHP 运算符优先级](http://php.net/manual/en/language.operators.precedence.php)。

我可能离这里很远，但是从您的代码的行为来看，我会说它们的优先级相同，或者**::**的优先级高于**->**，因此不能按您的意图一起使用。

### 更新

它确认**::**运算符具有更高的优先级**->**因此 PHP 解释了这一点：

```
$this->model::loadData(); 
```

作为

```
($this->(model::loadData())); 
```

检查[$var::staticfunction() 的答案 OK 但 $this->var::staticfunction() 不是。理由是什么？](https://stackoverflow.com/questions/14814244/varstaticfunction-ok-but-this-varstaticfunction-not-whats-the-ratio)问题。

# php - Variable not showing first row of the query

> ID：16101302
> 
> 赞同：2
> 
> 时间：2013-04-19T09:20:32.890
> 
> 标签：php, javascript, mysql, arrays, variables

The idea is to obtain in a javascript variable an array provided by a mysql query. It works fine, but the result of the variable shows minus 1 row than the query.

Below I have provided just the code ref the problem, skipping all of the rest, I suppose isn't needed.

Thanks in advance for help!

The query:

```
$search_qryvalAltnsRotas = "-1";
if (isset($_GET['search'])) {
  $search_qryvalAltnsRotas = $_GET['search'];
}
mysql_select_db($database_connect, $connect);
$query_qryvalAltnsRotas = sprintf("SELECT altn, destino FROM tblalternativos WHERE destino = %s ORDER BY destino ASC", GetSQLValueString($search_qryvalAltnsRotas, "text"));
$qryvalAltnsRotas = mysql_query($query_qryvalAltnsRotas, $sado_leitor) or die(mysql_error());
$row_qryvalAltnsRotas = mysql_fetch_assoc($qryvalAltnsRotas);
$totalRows_qryvalAltnsRotas = mysql_num_rows($qryvalAltnsRotas); 
```

(...) below is the variable (part of a javascript function):

```
var alternatesq = 
            <?php               
            while( $row_qryvalAltnsRotas = mysql_fetch_assoc($qryvalAltnsRotas) ) {
                $alternates[] = $row_qryvalAltnsRotas['altn'];
            }

            echo json_encode( $alternates );
            ?>; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:24:14.017

因为你已经调用`mysql_fetch_assoc`了两次，所以去掉这行

```
$row_qryvalAltnsRotas = mysql_fetch_assoc($qryvalAltnsRotas); 
```

并且只使用这个

```
while( $row_qryvalAltnsRotas = mysql_fetch_assoc($qryvalAltnsRotas) ) 
```

# c++ - Inline assembly error only in release

> ID：16101303
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:35.590
> 
> 标签：c++, assembly, stack-overflow, inline-assembly

I have a program with a function made only with inline assembly.

This function is used to call other functions we variable arguments (number and type).

All my program work very well in Debug mode but when I test it in release, I have this error :

```
SomeThing.exe: 0xC00000FD: Stack overflow (parameters: 0x00000001, 0x0A4B2FFC). 
```

Here is my assembly function :

```
__declspec( naked ) void Player_dummyFunction( dvrFunction* iFunc )
{
    __asm push ebp  
    __asm mov ebp,esp  
    __asm sub esp,0C0h  
    __asm push ebx  
    __asm push esi  
    __asm push edi  
    __asm lea edi,[ebp-0C0h]  
    __asm mov ecx,30h  
    __asm mov eax,0CCCCCCCCh  
    __asm rep stos dword ptr es:[edi]  

    /* Need the number of params. */
    __asm mov ecx, dword ptr [iFunc]            /* Use the calling convention of VC */
    __asm call dvrFunction::GetParamsNumber     /* this->m_ParamsData.size() */

    __asm mov edx, eax              /* Save the return value */

    __asm cmp edx, 0                /* Condition to know if the GL function has params (edx == 0) */
    __asm jz body                   /* Jump to the body label if the previous condition is true */

push_loop:
    /* Push the parameters in the reverse order on the stack */
    __asm mov ecx, dword ptr [iFunc]                /* Another use of the calling convention */
    __asm push edx
    __asm call dvrFunction::GetParamsAddress        /* this->m_ParamsData[i]->GetAddress() */

    __asm push [eax]                /* Push the dereferenced address (the value) on the stack */

    /* edx is automatically decremented by GetParamsAddress */
    __asm cmp edx, 0                /* Is edx == 0 ? */
    __asm jnz push_loop             /* If no, go back push_loop label */

body:
    __asm mov ecx, dword ptr [iFunc]                    /* Use the thiscall convention */
    __asm call dvrFunction::GetCName                    /* Call GetCName to have a const char* */

    __asm push eax                                      /* Push the name into the stack */
    __asm lea ecx, g_PlatBuiltin                        /* Use another convention for the structs */

    __asm call [ecx]g_PlatBuiltin.wglGetProcAddress     /* Call the real wglGetProcAddress to have the pointer to the GL function */
    __asm mov ecx, eax                                  /* Save the result -> TODO Is this operation needed ? */

    __asm call ecx                                      /* Call the original open GL function */

    __asm pop edi  
    __asm pop esi  
    __asm pop ebx  
    __asm add esp,0C0h  
    __asm cmp ebp,esp  
    //__asm call __RTC_CheckEsp (0125114Fh)  
    __asm mov esp,ebp  
    __asm pop ebp

    __asm ret                                           /* Call the ret asm command */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:01:19.280

这不是一个真正的答案，但注释中的代码变得非常混乱，汇编代码更糟糕，因为它比 C/C++ 更多地依赖换行符来格式化。

```
__asm lea edi,[ebp-0C0h]  
__asm mov ecx,30h  
__asm mov eax,0CCCCCCCCh  
__asm rep stos dword ptr es:[edi] 
```

这是“调试模式”代码，你真的不应该在发布模式下这样做。事实上，我很确定，您的功能根本不需要大多数 Epilog 和 prolog 代码——它只是“调试”的东西。

现在可能是一个答案：我感觉崩溃是由于`GetParamsNumber`在非调试模式下返回的数字比在调试模式下返回的数字大。我对此完全不确定，这对我来说是最有意义的。或者可能`GetParamsNumber`返回一些负面的东西？

您的代码也依赖于`edx`不被更改`GetParamsAddress`，这可能不是真的？特别是，它可能会根据优化模式而改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:47:15.173

尝试在版本中添加 /Oy-

并检查其他优化选项：[msdn](http://msdn.microsoft.com/en-us/library/2kxx5t2c%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:03:29.247

我的猜测是在 ret 指令之后流水线会运行到一些代码中。我看到您的堆栈非常细致地恢复，超出了正常需求。（事实上​​，如果其中一些函数破坏了 ebp 怎么办？评论 __asm mov esp,ebp ？）这是我认为应该尝试各种组合的方法：

*   `nop`在决赛后增加 16秒`ret`。
*   放弃那个`esp`恢复。`// __asm mov esp,ebp`
*   用降低堆栈指针包围代码，这样如果一些代码弹出太多，顶部就不会被破坏：（尤其是保存在这里）`sub esp,1000`，代码在这里，`mov esp,ebp`（假设你有堆栈恢复到位）。
*   移动堆栈恢复内容，稍后/inside/您的寄存器恢复内容。如果堆栈确实在您的代码中损坏，您的恢复代码将不会像现在一样保存您的 esi、edi 和 ebx 寄存器。`__asm push ebp
    __asm mov ebp,esp``__asm mov esp,ebp
    __asm pop ebp`
*   注释掉你的函数调用，看看哪个函数破坏了它，然后逐渐找出如何恢复以前的状态。

# lucene - Lucene 4 - get all used fields from directory

> ID：16101304
> 
> 赞同：2
> 
> 时间：2013-04-19T09:20:40.597
> 
> 标签：lucene

im trying to index a database table with Lucene 4\. I index all fields of a table entry into a document as a TextField (1 document per table entry) and try to search over the directory afterward.

So my problem is, that i need all the field names that are in the directory to use a MultiFieldQuery.

`QueryParser parser = new MultiFieldQueryParser(Version.LUCENE_42, !FIELDS! , analyzer);`

How do i get them? I could save them away while indexing, but it wouldn't be very performant to log them away with the index :/

Thank You Alex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:23:56.323

您可以从中获取字段名[`AtomicReader.getFieldInfos()`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/AtomicReader.html#getFieldInfos%28%29)。

这将传回一个[`FieldInfos`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/FieldInfos.html)实例。循环`FieldInfos.iterator()`，并从中获取字段名称[`FieldInfo.name`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/FieldInfo.html#name)

不过，我不明白为什么提前将它们存储在某个地方会不高效。

# jquery - Hide images onload contained in a select filter

> ID：16101305
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:42.873
> 
> 标签：jquery, filter, hide

[http://jsfiddle.net/DH8HQ/1/](http://jsfiddle.net/DH8HQ/1/)

```
 function itemInSpot(drag_item,spot)
{
var oldSpotItem = $(spot).find('img');
if(oldSpotItem.length>100) {
    oldSpotItem.appendTo('#itembox4').draggable({ revert: 'invalid' });
}
var item = $('<img />');
item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' });
drag_item.remove(); // remove the old object
}

 $(document).ready(function() {
$("img").draggable({ revert: 'invalid'});

$("#itembox4").droppable()
$("#pricebox").droppable({ accept: '.price'})
$('#pricebox').droppable({ accept: '.price'});
$('#pricebox,#pricebox,#itembox4').bind('drop', function(ev,ui) {  itemInSpot(ui.draggable,this); });

$('#clone_button').click(function() {
    $('#clone_wrapper div:#pricebox')
        .clone()
        .append('')
        .appendTo($('#clone_wrapper'));
})
});
$('#filter').change(function(){
    $('#itembox4 img').hide();
    $('#'+$(this).val()).show();
}); 
```

At the moment when you load all the images in the Inventory box `#itembox4` show. I need to change this because once its complete there will be over 800 images contained in the box. Currently when the page loads the filter option displays 'select' but none of the images have a class of 'select'.

**So my question is**
How do I make all the images hide until a filter option is selected via the dropdown menu.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:26:41.110

像这样：

```
 $('#itembox4 img').hide(); 
```

见[http://jsfiddle.net/DH8HQ/2/](http://jsfiddle.net/DH8HQ/2/)

# javascript - Find and alter links with js in a text

> ID：16101308
> 
> 赞同：0
> 
> 时间：2013-04-19T09:20:51.220
> 
> 标签：javascript, html, regex, dom, hyperlink

I have a text that must be send as an email. But to give the mail its layout we need to add some style. What we must do is the following: 1 find in a text one or more links with this format

```
<a href="RANDOM URL HERE">RANDOM TEXT</a> 
```

2 change the links into this format:

```
<a href="RANDOM URL HERE" style="color: #FFFFFF; text-decoration: none;"><span style="color: #FFFFFF;">RANDOM TEXT</span></a> 
```

I have no idea how i can best do this, with regex or with DOM,...

Many thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:34:10.310

首先，您应该考虑*永远不要*使用正则表达式来处理 HTML/XML 标记。您可以在此处阅读原因：[https](https://stackoverflow.com/a/1732454/1249581) ://stackoverflow.com/a/1732454/1249581 :)

然后，为了回答这个问题，您应该执行以下操作：

```
var div = document.createElement("div"),
    links;

div.innerHTML = textOfYourEmail;
links = div.getElementsByTagName("a");

for (var i = links.length; i--;) {
    var link = links[i],
        span = document.createElement("span");

    link.style.textDecoration = "none";
    link.style.color = "#fff";
    span.style.color = "#fff";

    while (link.firstChild) {
        span.appendChild(link.firstChild);
    }
    link.appendChild(span);
}

textOfYourEmail = div.innerHTML; 
```

它使用嵌入式方法进行 DOM 操作。它快速可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:29:01.753

在我看来，最好的方法是创建一个 CSS 类并将其添加到您的链接中。您不需要添加跨度标签！使用 DOM 是最好的方法。

# c# - How to (correctly) update the M in MVVM of WPF application?

> ID：16101309
> 
> 赞同：3
> 
> 时间：2013-04-19T09:20:56.953
> 
> 标签：c#, wpf, mvvm, conceptual

Having passed a series of [Edward Tanguay](https://stackoverflow.com/users/4639/edward-tanguay)'s questions refractoring the usage of MVVM for WPF app which can be found in Linked sidebar of his [Fat Models, skinny ViewModels and dumb Views, the best MVVM approach?](https://stackoverflow.com/questions/852441/fat-models-skinny-viewmodels-and-dumb-views-the-best-mvvm-approach), I am a little confused by his final WPF application in [Big smart ViewModels, dumb Views, and any model, the best MVVM approach?](https://stackoverflow.com/questions/857820/big-smart-viewmodels-dumb-views-and-any-model-the-best-mvvm-approach)

Its [M (Model) is Customer class](https://stackoverflow.com/questions/857820/big-smart-viewmodels-dumb-views-and-any-model-the-best-mvvm-approach):

```
//model
public class Customer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime TimeOfMostRecentActivity { get; set; }

    public static Customer GetCurrentCustomer()
    {
        return new Customer 
                   { FirstName = "Jim"
                     , LastName = "Smith"
                     , TimeOfMostRecentActivity = DateTime.Now 
                   };
    }

} 
```

which returns current user. Kind of, beause it returns duplicates of newly created "current" user...

But where is the M's data stored and updated in case of need?

Suppose, I want to change the model's current user's `FirstName` to "Gennady"?

I added a button for updating the model with this button click event handler:

```
private void button1_Click(object sender, RoutedEventArgs e)
{

} 
```

aiming to change the model's data from it which will be reflected in GUI.

How can I do this, by clicking this button... sorry, by placing the code into this `button1_Click()`?

Or it is something wrong with my wish to do it?
Then. how to correctly update/change M in MVVM ?

**Update:**
All answers seem refer that I should not make changes in M but on VM.
Though I've specifically asked about [referenced M-V-VM implementation](https://stackoverflow.com/questions/857820/big-smart-viewmodels-dumb-views-and-any-model-the-best-mvvm-approach) with:

```
public CustomerViewModel()
{
    _timer = new Timer(CheckForChangesInModel, null, 0, 1000);
} 
private void CheckForChangesInModel(object state)
{
    Customer currentCustomer = CustomerViewModel.GetCurrentCustomer();
    MapFieldsFromModeltoViewModel(currentCustomer, this);
} 
public static void MapFieldsFromModeltoViewModel
     (Customer model, CustomerViewModel viewModel) 
{
    viewModel.FirstName = model.FirstName;
    viewModel.LastName = model.LastName;
    viewModel.TimeOfMostRecentActivity = model.TimeOfMostRecentActivity;
} 
```

So, for example, upon implementing the code [from Adolfo Perez's answer](https://stackoverflow.com/a/16101927/200449) changes, the `TextBox`'s content is changed from "Jim" to "Gennady" only for a period of interval set in `_timer = new Timer(CheckForChangesInModel, null, 0, 1000);`.

All logic of [referenced by me M-V-VM in WPF approach](https://stackoverflow.com/questions/857820/big-smart-viewmodels-dumb-views-and-any-model-the-best-mvvm-approach) is such that it is **"M"** should be updated, in order VM has caught up those changes, but not the "VM".

Even more, I cannot understand, if to make changes in **VM** how can they be reflected in **M** if the **VM** knows about **M** but - not vice versa - Model does not know about ViewModel).

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T09:54:32.240

在 MVVM 中，您应该避免代码隐藏。原因是您希望最终得到可测试的类，在这种情况下，您的**VM**完全独立于您的**V**。您可以在 VM 上运行一组单元测试，而无需涉及**V**。您还可以在不影响业务逻辑的情况下挂钩不同类型的视图。

您的按钮会将其 Command 属性绑定到**VM**`ICommand`中公开的属性。**您的VM**中的此命令将以您指定的方法处理您的点击事件。

 ****在您看来：

```
<Button Content="Change FirstName" 
        Command="{Binding Path=ChangeFirstNameCommand"}/> 
```

在您的视图模型中：

```
//Define your command
public ICommand ChangeFirstNameCommand {get;set;}

//Initialize your command in Constructor perhaps
ChangeFirstNameCommand = new RelayCommand(OnChangeFirstName,CanChangeFirstName);

private void OnChangeFirstName()
{ 
    //Your FirstName TextBox in your V will be updated after you click the Button
    this.FirstName = "Gennady";
}

private bool CanChangeFirstName()
{
  //Add any validation to set whether your button is enabled or not. 
  // WPF internals take care of this.
  return true;
} 
```

请务必记住，在这种模式下，您的**V**了解您的**VM**，而您的**VM**了解您的**M**，但反之则不然。

在您的示例中，如果您想更改 Model FirstName 属性，您必须执行以下操作：

*   创建一个**实现**`INotifyPropertyChanged`
*   **在您的VM**中公开您的**M** FirstName 属性以通知更改
***   在您的 XAML 视图中创建一个 TextBox 并将其 Text 属性绑定到您的**VM** .FirstName 设置 Binding Mode=TwoWay。

    ```
    <TextBox Text=
         "{Binding Path=FirstName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/> 
    ```** 

 **当您在 TextBox 中键入时，您的 FirstName 将直接填充到 VM-M 中。此外，由于双向绑定，如果您在**VM**中修改 FirstName 属性，该更改将自动反映在您的**V**

*   将您的 View.DataContext 设置为您的**VM**。这是为所有数据绑定设置上下文的原因，除非您指定不同的绑定源。
*   如果您想在数据库中持久化更改，请在您的**VM**中注入一个服务类，该类将负责 CRUD 操作

看看这个简单的例子：

[http://www.codeproject.com/Articles/126249/MVVM-Pattern-in-WPF-A-Simple-Tutorial-for-Absolute](http://www.codeproject.com/Articles/126249/MVVM-Pattern-in-WPF-A-Simple-Tutorial-for-Absolute)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:33:19.533

您的模型是您的域（业务）对象。您可以通过多种方式获得它们。例如，您可能有一个[存储库](http://martinfowler.com/eaaCatalog/repository.html)类，它在您请求数据时为您提供数据，并在您希望存储数据时处理持久性。

您的视图模型是一个处理 UI 逻辑的类，例如更新字段、对用户操作做出反应等。在您的情况下，您可以将 CustomerRepository 类的实例传递给您的视图模型。然后在视图模型代码中，您从存储库中获取 Customer 的实例，并在绑定 UI 元素时填充您的视图模型属性。

您的视图只是您希望如何向用户显示信息的一组规则。它必须尽可能具有声明性和逻辑性。

有这样的代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
{

} 
```

在你看来（或者更糟糕的是——在你的视图模型中）是一个巨大的错误，它破坏了模式并且可能（并且肯定会）导致麻烦。您应该将 ViewModel 的 ICommand 字段绑定到按钮。您不应尝试以 WinForm 事件驱动样式编写 WPF 应用程序。

这就是 mvvm 的一般工作方式，它的主要目的是在您的应用程序中支持[多层架构](http://en.wikipedia.org/wiki/Multitier_architecture)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:28:45.510

首先，你需要处理你的`V`and `VM`。

如果您为按钮使用`Click`事件，那么您肯定没有遵循此架构。

您需要使用`WPF`and`XAML`在您的视图中绑定到您的`ViewModel`，您`ViewModel`应该是特定或潜在许多模型的子集，并将属性提供给`View`允许绑定的 。

我也会考虑研究：

*   `RelayCommand`并`ICommand`用于绑定您的按钮。
*   `Repository`用于交换模型并创建一种方式的模式`CRUD`

您遵循的教程似乎不是很好，因为这些概念没有真正正确地表达或者您没有理解它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T19:52:06.913

如果您有一个纯 WPF 应用程序，那么研究 MVVM 的“反向”模式 ViewModel-First 可能会很有趣。

对于 web 开发，通常使用 MVVM，因为网页是通过浏览器加载的，并且 View 是通过创建 ViewModel 来构建的。

WPF 用户不浏览页面（除非您使用页面导航），因此关注 VM-V-VM-M 会变得更有趣：

```
interface IMyView
  Show();

//view implementations in different assemblies:

//silverlight
class SilverlightMyView:IMyView
  Show();

//wpf
class WpfMyView:IMyView
  Show();

class MyViewModel

   IMyView _view;
   MyModel _model;

  //ex. view resolved by DI (Unity, ..)
  MyViewModel(IMyView view)
   _view = view

  Show(model as MyModel)
      _model = model;
      _view.DataContext = this;
      _view.Show(); 
```******

# c# - How to create a custom Debugger Visualizer in VS2010 to visualize a class which is non-Serializable?

> ID：16101310
> 
> 赞同：1
> 
> 时间：2013-04-19T09:20:58.493
> 
> 标签：c#, visual-studio-2010, debuggervisualizer

I want to visualize an object with a custom Debugger Visualizer in VS2010\. But the object of that class does not have Serializable property. Since the Source code is written and maintained for long, I don't want to change the class to Serializable for Debugger Visualizer purpose only.

Can someone tell me how to achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T06:30:19.820

I am here attaching the code with which i achieved what i asked in the question using Json.net from Newtonsoft.

```
namespace MyCustomVisualizer
{
    public class MyObjectSource : VisualizerObjectSource
    {
        public override void GetData(object target, Stream outgoingData)
        {
            try
            {
                byte[] byteArray = JsonHelper.Serialize(target);
                outgoingData.Write(byteArray, 0, byteArray.Length);
            }
            catch (Exception exp)
            {
                MessageBox.Show(exp.Message, "VisualizerObjectSource Error");
            }
        }
    }

    public class MyVisualizer : DialogDebuggerVisualizer
    {
        override protected void Show(IDialogVisualizerService windowService, IVisualizerObjectProvider objectProvider)
        {
            try
            {
                string _str = null;
                Stream _stream = objectProvider.GetData();

                if (_stream != null && _stream.Length > 0)
                {
                    object _obj = null;
                    _obj = JsonHelper.Deserialize(_stream); // Here i get the object i want
                    // ^^^
                    // Now add ur code to visualize the object in your way.

                    /* This is only to verify the object data before visualizing.
                    if (_obj != null)
                    {
                        _str = JsonHelper.ObjectToString(_obj);
                        MessageBox.Show(_str, "Show");
                    }
                    */
                }

                // Show the grid with the list
                windowService.ShowDialog();
            }
            catch (Exception exp) { MessageBox.Show(exp.Message, "Visualizer Error"); }
            finally
            {
            }
        }
    }

    #region JsonHelper Class
    public static class JsonHelper
    {
        public static byte[] Serialize(object _Object)
        {
            MemoryStream _MemoryStream = new MemoryStream();
            JsonSerializer serializer = new JsonSerializer();
            serializer.NullValueHandling = NullValueHandling.Ignore;
            serializer.TypeNameHandling = TypeNameHandling.Auto;

            try
            {
                using (StreamWriter sw = new StreamWriter(_MemoryStream))
                using (JsonWriter writer = new JsonTextWriter(sw))
                {
                    serializer.Serialize(writer, _Object);
                }
            }
            catch (Exception exp)
            {
                MessageBox.Show(exp.Message, "Serialize Error");
            }
            return _MemoryStream.ToArray();
        }

        public static object Deserialize(Stream _ByteArray)
        {
            Object _object = new Object();
            JsonSerializer serializer = new JsonSerializer();
            serializer.NullValueHandling = NullValueHandling.Ignore;
            serializer.TypeNameHandling = TypeNameHandling.Auto;
            try
            {
                StreamReader sw = new StreamReader(_ByteArray);
                JsonReader reader = new JsonTextReader(sw);
                _object = serializer.Deserialize(reader);
            }
            catch (Exception exp)
            {
                MessageBox.Show(exp.Message, "Deserialize Error");
            }
            return _object;
        }

        public static string ObjectToString(object _object)
        {
            string _str = string.Empty;
            JsonSerializerSettings _jsonSerializeSettings = new JsonSerializerSettings();
            _jsonSerializeSettings.NullValueHandling = NullValueHandling.Ignore;
            _jsonSerializeSettings.TypeNameHandling = TypeNameHandling.Auto;
            _str = JsonConvert.SerializeObject(_object, Newtonsoft.Json.Formatting.Indented, _jsonSerializeSettings);
            return _str;
        }
    }
    #endregion

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:39:04.817

BinaryFormatter 没有办法处理，因为它希望类被标记为可序列化。但是，您可以使用不同的序列化程序，例如：

*   [JSON.NET](http://json.codeplex.com/)
*   [Protobuf-net](https://code.google.com/p/protobuf-net/)

我遇到了同样的问题，因为我不想改变我的整个对象模型，所以我编写了一个帮助程序库[SInject](http://nuget.org/packages/SInject/)，它在给定程序集上为除抽象类型、接口和非公共类型之外的所有类型注入序列化属性。如果你想坚持使用 BinaryFormatter 试试那个库，它可以在构建后通过 MSBuild 任务来完成。

如果你对这里感兴趣[，这里](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)有一个关于如何编写 MSBuild 任务的 MSDN 指南

# javascript - javascript：另一个具有另一个功能的div中的一个div的功能

> ID：16101315
> 
> 赞同：0
> 
> 时间：2013-04-19T09:21:05.733
> 
> 标签：javascript, html

我有一个嵌套的 div。子 div 在父 div 内。如何区分正确的 onClick 功能？

在这种情况下，无论我点击嵌套div的哪个位置，都只会调用父div的函数。

```
<div class="portfo" onclick="showValue()">
    <div id="cross" onclick="deleteValue()">
         <img src='cross.png' height='15px' width='15px' alt='some'>
    </div>
</div> 
```

但是，`showValue`每当我单击子 div 时，总是会调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:26:48.843

我认为您的问题与[Event Propogation](http://www.quirksmode.org/js/events_order.html)有关。这应该可以帮助您解决它：[防止事件传播](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

另外，`delete()`它是 JavaScript 中的预定义函数，你应该将其重命名为其他名称，除非你尝试使用内置函数，在这种情况下，请查看正确用法：[delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:24:09.663

delete 是保留字。尝试将该函数重命名为其他名称。然后，当单击图像时，这两个事件都应该触发。首先是删除事件，然后是显示事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:24:25.410

我认为像[jQuery](http://jquery.com/)这样的库可以帮助你。看一下[.on()](http://api.jquery.com/on/)方法。

# php - Yii clientScript/assetManager 注册/渲染包时的问题

> ID：16101319
> 
> 赞同：0
> 
> 时间：2013-04-19T09:21:11.910
> 
> 标签：php, yii, assets

我遇到了 clientScript 和 assetsManager 的问题。我正在发布一个文件目录，然后添加一个我稍后注册的包。包被添加得很好，但是当它被渲染时，url 是错误的。

发布文件并添加包：

```
// Publish the directory
$scriptFiles = Yii::app()->assetManager->publish(Yii::getPathOfAlias('library').'/assets/jquery.plugins/jquery.dropdown/', true, 0);

// Add the package
Yii::app()->clientScript->packages = array(
        'jquery.dropdown'=>array(
                'baseURL'=>$scriptFiles,
                'js'=>array('jquery.dropdown.js', 'jgestures.min.js'),
                'depends'=>array('jquery'),
        ),
); 
```

包被添加并发布到应用程序的资产目录，这是 Yii::app()->clientScript->packages 的输出。

```
Array
(
    [jquery.dropdown] => Array
        (
            [baseURL] => /assets/a4017faa
            [js] => Array
                (
                    [0] => jquery.dropdown.js
                    [1] => jgestures.min.js
                )
            [depends] => Array
                (
                    [0] => jquery
                )
        )
) 
```

虽然，当我注册包宽度 Yii::app()->clientScript->registerPackage('jquery.dropdown') 时，这就是渲染的内容：

```
<script type="text/javascript" src="/assets/961fc04/jquery.dropdown.js"></script>
<script type="text/javascript" src="/assets/961fc04/jgestures.min.js"></script> 
```

注意 src 属性中的 URL，错误的目录。有没有人遇到过这种情况和/或知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:40:25.163

你的问题在于以下

```
$scriptFiles = Yii::app()->assetManager->publish(Yii::getPathOfAlias('library').'/assets/jquery.plugins/jquery.dropdown/', true, 0); 
```

包管理器实际上为您发布了包，所以您在这里所做的是两次发布同一个文件。`$scriptFiles`改为设置`Yii::getPathOfAlias('library').'/assets/jquery.plugins/jquery.dropdown/`它应该可以正常工作。

[这里有一篇关于 Yii 包的基本文章](http://danaluther.blogspot.se/2012/03/using-packages-with-clientscript.html)，如果你想多读一些。

编辑：我现在看到你已经尝试设置`baseUrl`以避免自动发布，但是你已经拼写了它`baseURL`，这使得 Yii 自动发布它而不是使用你想要给它的路径。

# android - Problems with getting values from JSON object

> ID：16101320
> 
> 赞同：1
> 
> 时间：2013-04-19T09:21:16.893
> 
> 标签：android, json

I'm trying to get data once user logged in successfully but I never get any of results, what I am doing is next:

```
// response is my request to server
JSONObject obj = new JSONObject(response);
Log.d("RESPONSE",obj.toString()); 
```

so in log I do see values, like:

```
04-19 11:28:16.729: D/RESPONSE(3162): {"data":[{"loses":3,"username":"benedict","level":1,"strength":15,"experience":null,"gold":10,"password":"benedict","intelligence":5,"agility":10,"wins":5}],"status":true} 
```

but once I try to read username for example like this:

```
String username = obj.getString("username"); 
```

The code above ^ gives me nothing in my string.. Any help how I can retrieve data from JSONObject? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:25:40.263

那是因为`username`存在于`data`对象中，而对象恰好是`JSONArray`. `data`从**响应**对象中获取数组，遍历`JSONObject`数组中的每个对象，然后从每个对象中提取您的`username`.

像这样的东西： -

```
JSONObject obj = new JSONObject(response);
JSONArray data = obj.getJSONArray("data");
for(int i=0;i<data.length();i++){
    JSONObject eachData = data.getJSONObject(i);
    System.out.println("Username= "+ eachData.getString("username"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:29:15.403

你需要先得到`JSONArray`哪个是`data`：

```
 JSONArray data = null;
        data = json.getJSONArray("data");
         for(int i = 0; i < data.length(); i++){
                JSONObject c = data.getJSONObject(i);
         String username = c.getString("username");
} 
```

你可以从[这里得到关于解析 JSON 的想法](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T09:27:33.730

您的字段用户名在数组数据中。要访问此尝试：

```
JSONObject obj = new JSONObject(response);
JSONArray array = obj.getJSONArray("data");

for(int i = 0; i < array.length(); ++i){
    JSONObject data = array.getJSONObject(i);
    String username = data.getString("username");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T09:32:13.303

尝试这个...

尝试 {

```
 JSONObject object = new JSONObject(response);
        JSONArray Jarray = object.getJSONArray("data");

        for (int i = 0; i < Jarray.length(); i++) {

           JSONObject Jasonobject = Jarray.getJSONObject(i);
           String loose= Jasonobject.getString("loses");
           String username=Jasonobject.getString("username");
          ....... 
          ........

        }

    } catch (JSONException e) {

        Log.e("log_txt", "Error parsing data " + e.toString());
    } 
```

# windows-phone - Windows Phone 音乐示例代码

> ID：16101322
> 
> 赞同：0
> 
> 时间：2013-04-19T09:21:29.883
> 
> 标签：windows-phone

我下载了这个

[http://code.msdn.microsoft.com/wpapps/Music-Videos-Hub-Sample-8ef80aab](http://code.msdn.microsoft.com/wpapps/Music-Videos-Hub-Sample-8ef80aab)

部署没有错误，但我听不到任何声音。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T23:38:19.177

试试这个，这是在 WP 7/8 上播放媒体文件的最简单方法：

```
MediaPlayerLauncher objMediaPlayerLauncher = new MediaPlayerLauncher();
            objMediaPlayerLauncher.Media = new Uri("SongName.mp3", UriKind.Relative);
            objMediaPlayerLauncher.Location = MediaLocationType.Install;
            objMediaPlayerLauncher.Controls = MediaPlaybackControls.Pause | MediaPlaybackControls.Stop | MediaPlaybackControls.All;
            objMediaPlayerLauncher.Orientation = MediaPlayerOrientation.Landscape;
            objMediaPlayerLauncher.Show(); 
```

# sql-server - 来自 LINQ-to-SQL 的无效对象名称

> ID：16101323
> 
> 赞同：1
> 
> 时间：2013-04-19T09:21:30.497
> 
> 标签：sql-server, vb.net, linq-to-sql, visual-web-developer

我有一个 SQL Server 数据库，我刚刚添加了一个新表：-

```
CREATE TABLE [dbo].[my_table](
    [my_primary_key] [int] NOT NULL,
    [my_data_value] [int] NULL,
PRIMARY KEY CLUSTERED 
(
    [my_primary_key] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我将新表从 Visual Web Developer 中的数据库资源管理器拖到`my_schema.dbml`设计窗口中。这为我创建了一个`my_schema.vb`文件：-

```
Partial Class my_schemaDataContext

End Class 
```

尽管该表的一些痕迹确实出现在 XML 中：-

```
<?xml version="1.0" encoding="utf-8"?><Database Name="my_schema" Class="my_schemaDataContext" xmlns="http://schemas.microsoft.com/linqtosql/dbml/2007">
  <Connection Mode="AppSettings" ConnectionString="Data Source=MYPC;Initial Catalog=my_schema;Integrated Security=True" SettingsObjectName="MyProgram.My.MySettings" SettingsPropertyName="my_schemaConnectionString" Provider="System.Data.SqlClient" />
  <Table Name="dbo.my_table" Member="my_tables">
    <Type Name="my_table">
      <Column Name="my_primary_key" Type="System.Int32" DbType="Int NOT NULL" IsPrimaryKey="true" CanBeNull="false" />
      <Column Name="my_data_value" Type="System.Int32" DbType="Int" CanBeNull="true" />
    </Type>
  </Table>
</Database> 
```

然后我尝试像这样将行插入表中：-

```
Try
    db = New my_schemaDataContext("Integrated Security=SSPI; ")
    Dim new_row As my_table
    new_row = New my_table
    new_row.my_primary_key = 1
    new_row.my_data_value = 1
    db.my_tables.InsertOnSubmit(new_row)
    db.SubmitChanges()
Catch ex As Exception
    ' do something
End Try 
```

这会导致异常`Invalid Object Name 'dbo.my_table`。

大概我必须在某处堵塞模式名称，但看不到如何做到这一点。我尝试添加`Initial Catalogue=my_schema;`到连接字符串，但这导致了异常`Keyword Not Supported: Initial Catalogue`。

有谁知道我还能尝试什么？（我应该注意，我还尝试了相同架构中的其他表，结果相同，我希望这可以消除随机拼写错误导致问题的可能性。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T09:23:42.240

看起来连接字符串不正确。另外我认为`Catalogue`应该拼写为`Catalog`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:29:31.733

DataContext 的构造函数采用连接字符串。

```
"Integrated Security=SSPI; " 
```

对我来说，这看起来不像是一个有效的连接字符串。

如果您什么都不提供，它将采用创建时设置的连接字符串。这是设置`my_schemaConnectionString`。所以就这样做：

```
db = New my_schemaDataContext() 
```

或者，如果您想在运行时更改它：

```
string connectionString = "whatever";
db = New my_schemaDataContext(connectionString) 
```

# android - I have made a android app in Eclipse. Now I want to change the Default layout

> ID：16101329
> 
> 赞同：0
> 
> 时间：2013-04-19T09:21:47.553
> 
> 标签：android, eclipse

I have set the layout Test into my app

```
<activity
            android:name="com.example.test.TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

When I run it it's not take the testactivity. I have run (Run as app) many time. it's take MainActivity. Do someone know how to modified it.

if this is need to somewhere please tell me. What I want is now change the app to run the Testactivity instead of MainActivity

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".TestActivity" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="36dp"
        android:layout_marginTop="152dp" android:onClick="btnTest"
        android:text="Button" />

</RelativeLayout> 
```

Activity:

```
public class TestActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public ArrayList<String> GetArray(String input){
        ArrayList<String> arr=  new ArrayList<String>();

        return arr;
    }
    public void btnTest(View view){
        Toast.makeText(getApplicationContext(), "This is test", Toast.LENGTH_SHORT);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:31:29.253

在被覆盖的内部`onCreate()`，提及您的`test_activity`xml 文件而不是主 Activity.xml 文件。

```
setContentView(R.layout.test_activity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:33:10.423

您的问题是您为两个活动设置了相同的布局。

在您的活动`TestActivity`中，在`onCreate()`方法中；您应该像这样设置内容视图：

```
setContentView(R.layout.test_activity); 
```

代替 ：

```
setContentView(R.layout.activity_main); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:36:31.210

如果您只想更改内容 XML 文件，只需更改

```
setContentView(R.layout.test_activity); 
```

在 onCreate() 方法中。

如果你想要 2 个活动，那么你需要添加这个

```
<activity
    android:name="com.example.test.TestActivity"
    android:label="@string/app_name" >
</activity> 
```

到您的清单和一个新的 java 类来运行活动并有意图地更改为新活动。

```
Intent i = new Intent(activity_main.this, TestActivity.class);
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T09:48:17.453

试试这个... Eclipse => Project-> Clean

更改 onCreate() 中的内容视图只需更改

```
setContentView(R.layout.test); 
```

并在您的清单文件中更改它：

```
<activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# outlook - 如何在邮箱中创建 Outlook 日期文件 (.pst)？

> ID：16101331
> 
> 赞同：0
> 
> 时间：2013-04-19T09:21:54.903
> 
> 标签：outlook, pst

尝试创建一个脚本，为当前的 out 用户创建 Outlook 数据文件 (pst)。关于在哪里寻找的任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:23:18.217

在 OUTlook 对象模型中使用 Namespace.AddStore 或 Namespace.AddStoreEx 在当前配置文件中创建一个新的 PST 存储。

# edsdk - 更改属性时佳能 EDSDK 设备忙

> ID：16101332
> 
> 赞同：1
> 
> 时间：2013-04-19T09:21:55.240
> 
> 标签：edsdk

我对 EDSDK 有一点问题。我试图制作一个可以从**实时取景**切换到**电影录制**的功能。

liveview一切都很好，我可以拍照。但是当我想开始电影录制时，我`ERR_DEVICE_BUSY`每次都想更改一个属性（保存到相机而不是 PC）。我尝试了一切，做一个循环，什么都没有。这是我得到这个错误的唯一地方。

这是我的代码：

```
 EdsDataType dataType;

    EdsUInt32 dataSize;
    EdsUInt32 enregistrement;
    err = EdsGetPropertySize(camera, kEdsPropID_SaveTo, 0, &dataType, &dataSize);

    err = EdsGetPropertyData(camera, kEdsPropID_SaveTo, 0, dataSize, &enregistrement);
    EdsUInt32 saveTo = kEdsSaveTo_Camera;
    if(enregistrement != kEdsSaveTo_Camera){
        err = EdsSetPropertyData(camera, kEdsPropID_SaveTo, 0, sizeof(saveTo), &saveTo);
        if(err != EDS_ERR_OK){
            printf("Erreur de changement d'emplacement de sauvegarde, arret de l'enregistrement\n");
            printf("err : 0x%X\n", err);
            return err;
        }
    }

    //Changement du mode de prise de vu
    EdsUInt32 mode = 20; //Le monde 20 correspont à l'enregistrement vidéo
    EdsSetPropertyData(camera, kEdsPropID_AEMode, 0, sizeof(mode), &mode);

    //Variable pour la mise en route et l'arrêt de l'enregistrement
    EdsUInt32 debutEnregistrement = 4;
    EdsUInt32 finEnregistrement = 0;

    err = EdsSetPropertyData(camera, kEdsPropID_Record, 0, sizeof(debutEnregistrement), &debutEnregistrement);
    if(err != EDS_ERR_OK){
        printf("Erreur lors du lancement de l'enregistrement");
        return err;
    }
        //Wait for stop record
err = EdsSetPropertyData(camera, kEdsPropID_Record, 0, sizeof(finEnregistrement), &finEnregistrement);
    if(err != EDS_ERR_OK)
        printf("Erreur lors de l'arret de l'enregistrement");

    //L'enregistrement est fini, vérification des evenement
    EdsGetEvent(); 
```

如果你有解决方案，我接受，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-14T01:56:02.217

不管文档怎么说，当实际错误是错误的输入参数时，EDSDK 有时会为 EdsSetPropertyData() 返回 EDS_ERR_DEVICE_BUSY。例如，尝试将 kEdsPropID_Av 设置为十进制 50 (0x32) 的值，该值不在文档中给出的表中。在我的 EOS 5D 上，无论尝试了多少次重试，这都会返回 EDS_ERR_DEVICE_BUSY。传递一个合法值，例如 0x33（对于 f/6.3）第一次成功。该错误在这里是 100% 可重现的。

因此，如果您在设置属性时遇到此“设备忙”错误，请使用细齿梳检查您传递的输入值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T14:15:55.527

你可以试试这个，我不知道你是否已经这样做了，但到目前为止，它应该对我所有的财产变化都有效。

*   就在您打开会话后使用该`EdsSetPropertyEventHandler`功能

*   如果我记得好的话，首先停止你的 LiveView `kEdsEvfOutputDevice`。`TFT`（不是PC的参数）。

*   在属性事件处理程序的回调中，您对事件进行了切换，当它用于属性 kEdsEvfOutputDevice 时，您将函数扔到电影模式。

回调函数将在属性发生更改时被调用，这样您就不会有任何设备忙或未准备好。但请注意，您必须将回调函数设置为静态才能正常工作。因此，您将无法调用任何其他静态函数，对于变量也是如此。

如果你不明白，我可以用法语解释给你，对我来说更容易^^

# javascript - JSP 页面中 JSON 的 XSS 修复

> ID：16101336
> 
> 赞同：0
> 
> 时间：2013-04-19T09:22:24.527
> 
> 标签：javascript, json, jsp, xss

在静态分析期间，我的 JSP 代码中出现 XSS 漏洞。实际上，我正在将请求从我的 servlet 转发到 JSP 页面。Requets 包含一个 JSON 字符串。在 JSP 页面中，我正在从此 JSON 对象中检索 appId 值。我使用这个 appId 值通过 XHR 调用检索更多信息。

```
<script type="text/javascript">
var appId;
// appContext is JSON string
var appContextStr=<%=request.getParameter("appContext")%>; // XSS Vulenrability detected

if(appContextStr!= null || !appContextStr.equals("")){
appId= appContextStr.appId;
}
</script> 
```

如何解决这个 XSS 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:23:50.563

由于提交的数据应该是 JSON：

1.  尝试将其解析为 JSON（使用服务器端 Java）
2.  将其序列化回 JSON
3.  将其包含在文档中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:05:34.043

如果您的值不包含非字母数字符号，则可以在将其分配给 appContextStr 之前对 <%=request.getParameter("appContext")%> 进行 URLencode。

如果有人（不是用户本人）可以使用类似的值指定 appContext，那么现在的漏洞将会触发

“asdsa; alert('busted')” 实际上是邪恶的 javascript 而不是 alert()

也就是说，并非所有用户控制的 JSON 都是可利用的，但静态分析工具仍然抱怨任何甚至远程的可能性。

# php - 在 Jquery IF 语句中查询

> ID：16101339
> 
> 赞同：-2
> 
> 时间：2013-04-19T09:22:36.157
> 
> 标签：php, jquery

我有一个 jquery 保存脚本，例如：

```
naam = prompt('Give a name for your file.');

if(naam != null)
{   
  var div_contents = $("#print").html();
  $.post("save.php", { 'contents': div_contents,'naam':naam });
  alert('Your file is save as :  '+ naam);  
  window.location.replace("index.php?id=latest");
} 
else
{
  alert('Not saved');
} 
```

我在 save.php 中保存了一个 div，它在数据库中创建了一个新 id

我想要达到的是

```
window.location.replace("index.php?id=latest"); 
```

id=latest 必须变成（id=id from last saved file）。

我试过

```
$q = "select MAX(id) from Moodboards";
$result = mysql_query($q);
$data = mysql_fetch_array($result);
$MBId = $data[0];
window.location.replace("index.php?id="+MBId); 
```

和

```
var MBID = 
<?php
$q = "select MAX(id) from Moodboards";
$result = mysql_query($q);
$data = mysql_fetch_array($result);
$MBId = $data[0];
echo $MBId ?>
window.location.replace("index.php?id="+MBId); 
```

他们都失败了。

如何在 if(naam !=null) 语句中运行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:35:38.647

首先，您必须修复您的 jQuery POST...您不使用错误的 POST 响应。您应该等待它，然后继续执行其他操作

```
naam = prompt('Give a name for your file.');

if(naam != null)
{   
  var div_contents = $("#print").html();
  $.post("save.php", { 'contents': div_contents,'naam':naam }, function(responde){
     if(responde.id)
        window.location.replace("http://yoururl.com/index.php?id="+responde.id);
     else
        alert("No responde...");
  }, "json");
} 
else
{
  alert('Not saved');
} 
```

为了获得更好的结果，我建议您在该帖子/响应中使用 JSON 数据。在您的 PHP 代码中，您必须设置：

```
<?php
$q = "select MAX(id) from Moodboards";
$result = mysql_query($q);
$data = mysql_fetch_array($result);
$MBId = $data[0];
echo json_encode(array('id'=>$MBId)); 
exit();
?> 
```

PS对于window.location.replace，请设置您的完整网址：`"http://localhost/index.php?id="`或至少在其开头放置斜杠`"/index.php?id="`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:30:46.070

解决方案

```
if(naam != null)
{       
 var div_contents = $("#print").html();
 $.post("save.php", { 'contents': div_contents,'naam':naam });
 alert('Uw moodboard is opgeslagen als '+ naam);    
 window.location.replace("index.php?id=<?php $q = "select MAX(id) from Moodboards";
 $result = mysql_query($q);
 $data = mysql_fetch_array($result);
 $MBId = ($data[0] + 1); echo "$MBId";?>");
} 
```

这对我有用，我不需要制作一个 jquery var，我可以在 php 中回显该变量。

我必须添加 1 导致加载页面时加载 sql 查询。

因此，当我获得最高 ID 时，该文件尚未保存。

# wix - Wix：Progressbar 的 ImageFile 属性不起作用

> ID：16101343
> 
> 赞同：2
> 
> 时间：2013-04-19T09:22:42.680
> 
> 标签：wix

在我的设置项目中，我想自定义 Progressbar 并赋予它不同的颜色。我使用默认主题 xml。这是我修改的进度页面：

```
<Page Name="Progress">
    <Image X="11" Y="20" Width="485" Height="300" ImageFile="logo.png" Visible="yes"/>
    <Text X="11" Y="80" Width="-11" Height="30" FontId="2" DisablePrefix="yes">#(loc.ProgressHeader)</Text>
    <Text X="11" Y="121" Width="70" Height="17" FontId="3" DisablePrefix="yes">#(loc.ProgressLabel)</Text>
    <Text Name="OverallProgressPackageText" X="85" Y="121" Width="-11" Height="17" FontId="3" DisablePrefix="yes">#(loc.OverallProgressPackageText)</Text>
    <Progressbar ImageFile=".\test.bmp" Name="OverallCalculatedProgressbar" X="21" Y="168" Width="-21" Height="33" />
    <Button Name="ProgressCancelButton" X="-11" Y="-11" Width="85" Height="23" TabStop="yes" FontId="0">#(loc.ProgressCancelButton)</Button>
</Page> 
```

在 Progressbar 标记中，我添加了 ImageFile 属性。文件 test.bmp 与 theme.xml 位于同一目录中。ImageFile 帮助说明如下：

> 控件的图像文件的相对路径。图像必须是 4 像素宽：左像素是进度条的左侧，左中像素是使用的进度，右中像素是未使用的进度，右像素是进度条的右侧。与 ImageResource 和 SourceX 和 SourceY 属性互斥。

bmp*是*4 像素宽（所有像素都是黑色），但进度条仍然是默认的窗口颜色（Win7 with Aero：绿色）。我既不使用 ImageResource 也不使用 SourceX 和 SourceY 属性（如文档所要求的那样）。

谁能帮我这个？我错过了什么，还是我误解了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:58:57.607

thmutil 很可能无法加载您的`.\test.bmp`. 很可能文件丢失了。如果文件无法加载，它会静默跳过失败并返回到系统进度条。

为了确保`.\test.bmp`可以找到，我首先建议从`.\`路径中删除，然后确保文件作为 a 包含`Payload`在您的`BootstrapperApplication`元素中。例如：

```
<Bundle ...>
   <BootstrapperApplication SourceFile='path\to\ba.dll'>
      <Payload SourceFile='path\to\custom.thm' />
      <Payload SourceFile='path\to\test.bmp' />
   </BoostrapperApplication>
</Bundle> 
```

这会将文件添加`test.bmp`到 BootstrapperApplication 有效负载列表中。如果您使用的是 wixstdba，它看起来更像：

```
<Bundle ...>
   <BootstrapperApplicationRef Id='WixStandardBootstrapperApplication.RtfLicense'>
      <bal:WixStandardBootstrapperApplication ThemeFile='path\to\custom.thm' />
      <Payload SourceFile='path\to\test.bmp' />
   </BoostrapperApplication>
</Bundle> 
```

# installation - OSX - 使用 dmg 作为远程驱动器？

> ID：16101348
> 
> 赞同：0
> 
> 时间：2013-04-19T09:23:04.170
> 
> 标签：installation, osx-mountain-lion, diskimage

打算将 Mountain Lion OSX 安装到多台 iMac，以减少互联网使用并获得更快的安装 ID，例如从本地源安装它 - 已将安装程序下载到一台机器并从安装程序中提取 DMG

现在 - 有没有办法以这种方式连接 dmg，以便它可以作为远程驱动器连接到我要安装的机器（通过 LAN）？

使用光盘共享我知道可以共享 CD/DVD，是否知道它是否也适用于 DMG 文件？也许磁盘实用程序以某种方式？

问题是我在没有真正驱动器的新 iMac 27" 上下载了它，并且共享设置中没有“光盘共享”选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:28:50.197

不幸的是，我不知道如何在 Mac 上本地使用 即 PXE，因此必须使用 Apple 自己的方法。有一个我自己没有测试，使用 netboot 和 netrestore。这是知识库文章的链接：

[http://support.apple.com/kb/HT4178](http://support.apple.com/kb/HT4178)

也许这是进行更多研究的一个很好的起点？

# javascript - mousewheel.js 不适用于移动设备

> ID：16101350
> 
> 赞同：2
> 
> 时间：2013-04-19T09:23:14.293
> 
> 标签：javascript, asp.net

我正在设计一个使用 mousewheel.js 的网站。当我在桌面浏览器中加载它时，它呈现得非常好。但是当我在移动设备中加载该页面时，它无法正常工作。有谁知道为什么或对此的替代解决方案。

提前致谢！

# javascript - How to clear browser cache in MVC application?

> ID：16101354
> 
> 赞同：5
> 
> 时间：2013-04-19T09:23:32.160
> 
> 标签：javascript, jquery, asp.net-mvc-4

I want to clear the browser cache in MVC application.

I added the below code on my .cshtml page and its working for IE and Firefox.

```
 Response.ExpiresAbsolute = DateTime.Now;
    Response.Expires = 0;
    Response.CacheControl = "no-cache";
    Response.Buffer = true;
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.UtcNow);
    Response.Cache.SetNoStore();
    Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches); 
```

I am looking for a solution which will work on chrome as well.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T11:55:14.707

使用以下属性：

```
public class NoCacheAttribute : ActionFilterAttribute
{        
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        if (filterContext == null) throw new ArgumentNullException("filterContext");

        var cache = GetCache(filterContext);

        cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        cache.SetValidUntilExpires(false);
        cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        cache.SetCacheability(HttpCacheability.NoCache);
        cache.SetNoStore();

        base.OnResultExecuting(filterContext);
    }

    /// <summary>
    /// Get the reponse cache
    /// </summary>
    /// <param name="filterContext"></param>
    /// <returns></returns>
    protected virtual HttpCachePolicyBase GetCache(ResultExecutingContext filterContext)
    {
        return filterContext.HttpContext.Response.Cache;
    }
 } 
```

}

只需将其添加到您的基本控制器：

```
[NoCache]
public BaseController: Controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T12:19:48.270

在 Chrome 上缓存 ajax 请求时，这对我有用。

```
Response.AddHeader("Cache-Control", "no-cache, no-store, max-age=0, must-revalidate");
Response.AddHeader("Expires", "Fri, 01 Jan 1990 00:00:00 GMT");
Response.AddHeader("Pragma", "no-cache"); 
```

# c++ - Where to allocate one time use class?

> ID：16101355
> 
> 赞同：0
> 
> 时间：2013-04-19T09:23:32.607
> 
> 标签：c++, memory-management

Lets consider the following code:

```
void main(int argc, char* argv[])
{
Foo foo;
//at this point I don't need foo any more
//a lot of stuff here
} 
```

If I only need `foo` only for short amount of time,isn't it would be better to allocate it on a heap and delete before executing rest of the code?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T09:26:19.407

不，最好写一个*内部范围*。

```
int main()
{
    {
        Foo foo;
        // use foo
    }
    // more code
} 
```

但是这样做应该暗示将 foo 放在一个完全独立的函数中可能会更好。

不过，这里没有理由使用堆分配。该解决方案将比问题更糟糕。

# javascript - JQuery dynamic table totals

> ID：16101358
> 
> 赞同：0
> 
> 时间：2013-04-19T09:23:42.740
> 
> 标签：javascript, jquery, dynamic, html-table

I have this table:

![](https://i.imgur.com/V7hMNEi.png)

The table has data from every month, but only shows the selected date.

So, the question is: How can I do a total of Actual Hours and Extra Hours per month (visible data)?

This is how I build the table:

```
var total = 0 ;
    var actualTotal = 0 ;
    var totalEH = 0;

    var table=document.getElementById("fbody");
    for (var i=0;i<user.length;i++)
    {

        var row=table.insertRow(-1);
        var cellDate                =       row.insertCell(-1);
        var cell2                   =       row.insertCell(-1);
        var cell3                   =       row.insertCell(-1);
        var cell4                   =       row.insertCell(-1);
        var cell5                   =       row.insertCell(-1);
        var cell7                   =       row.insertCell(-1);
        var cell8                   =       row.insertCell(-1);

        var startAM                 =       user[i].reg_start_worktime_am;
        var finishAM                =       user[i].reg_finish_worktime_am;
        var startPM                 =       user[i].reg_start_worktime_pm;
        var finishPM                =       user[i].reg_finish_worktime_pm;

        cellDate.innerHTML          =       user[i].reg_date;
        cell2.innerHTML             =       user[i].reg_start_worktime_am;
        cell3.innerHTML             =       user[i].reg_finish_worktime_am;
        cell4.innerHTML             =       user[i].reg_start_worktime_pm;
        cell5.innerHTML             =       user[i].reg_finish_worktime_pm;
        cell7.innerHTML             =       calcTimeDifference(startAM.substring(0,2), startAM.substring(3,5), finishAM.substring(0,2), finishAM.substring(3,5), startPM.substring(0,2), startPM.substring(3,5), finishPM.substring(0,2), finishPM.substring(3,5));
        cell8.innerHTML             =       (calcTimeDifference(startAM.substring(0,2), startAM.substring(3,5), finishAM.substring(0,2), finishAM.substring(3,5), startPM.substring(0,2), startPM.substring(3,5), finishPM.substring(0,2), finishPM.substring(3,5))-user[i].worktime_fullhours).toFixed(2);

        if (cell8.innerHTML != "NaN")
        {

            totalEH                 +=      parseFloat((calcTimeDifference(startAM.substring(0,2), startAM.substring(3,5), finishAM.substring(0,2), finishAM.substring(3,5), startPM.substring(0,2), startPM.substring(3,5), finishPM.substring(0,2), finishPM.substring(3,5))-user[i].worktime_fullhours).toFixed(2));
            total                   =       (document.getElementById('box-table-a').rows.length-1)*user[0].worktime_fullhours;
            actualTotal             +=      parseFloat(calcTimeDifference(startAM.substring(0,2), startAM.substring(3,5), finishAM.substring(0,2), finishAM.substring(3,5), startPM.substring(0,2), startPM.substring(3,5), finishPM.substring(0,2), finishPM.substring(3,5)));
        }
    } 
```

Thanks

**EDIT:**

Fixed:

```
var totalActuals = 0,
    totalExtras = 0;
var totalHours = 0;
var trs = $("#fbody tr").each(function(e) {
if($(this).css('display')!='none')
    if( $("td:eq(6)", this).text() != 'NaN' ) {
        // alert("Horro! "+$("td:eq(6)", this).text() );
        totalActuals += parseFloat( $("td:eq(5)", this).text() );
        totalExtras += parseFloat($("td:eq(6)", this).text());
        totalHours++;
    }
});
totalHours = totalHours*8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:37:55.340

如果我对您的理解正确，您的表格将有一些可见的行，而有些行将被隐藏。并且，您想要计算可见行的总数。

您可以通过仅遍历可见行并访问计算总计所需的列来做到这一点。

```
var totalActuals = 0;
var totalExtras = 0;
$.each($('table tr:visible',function() {
    totalActuals += $(this).find(".actualHours").val();
    totalExtras += $(this).find(".totalExtras").val();
};) 
```

但这也会返回标题行。所以我认为你应该为表的行分配一个类，并在 jquery 选择器中使用该类 -`$('table .tableRow:visible')`

**编辑**

在这里，我假设您已将“actualHours”、“totalExtras”类赋予 div，其中实际小时数和总额外小时数显示在表的每一行中。如果你还没有这样做，你可以使用 -

```
totalActuals += $(this).find("td").eq(5).text();
totalActuals += $(this).find("td").eq(6).text(); 
```

这将选择该行的第 5 列和第 6 列。

# .htaccess - basic auth does not work in apache 2.4

> ID：16101360
> 
> 赞同：3
> 
> 时间：2013-04-19T09:23:48.970
> 
> 标签：.htaccess, authentication, apache2, .htpasswd

httpd.conf

```
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule access_compat_module modules/mod_access_compat.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so 
```

httpd-vhosts.conf

```
<VirtualHost *:8080>
        ServerAdmin webmaster@192.168.1.162
        DocumentRoot "/data/www/sites/default/public"
        ServerName 192.168.1.162
        ErrorLog "/data/www/logs/apache/192.168.1.162-error_log"
        CustomLog "/data/www/logs/apache/192.168.1.162-access_log" combined
    <Directory "/data/www/sites/default/public">
        Options -Indexes
        AllowOverride All
        Order allow,deny
        Allow from all
        AuthType Basic
        AuthName "Restricted Resource"
        AuthBasicProvider file
        AuthUserFile /data/svn/htpasswd
        Require valid-user
    </Directory>
    ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/data/www/sites/default/public/$1
</VirtualHost> 
```

I can get the info to input the user and password,but always can not be virified.I am sure the password is correct and the htpassswd file are not in the document root folder.

How can i resolve this problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T19:30:49.237

听起来您可能安装了 Apache httpd **2.4.4**，它存在实用程序中的一个[已知错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=54735)`htpasswd`……如果是这样，请查看对[类似问题的](https://stackoverflow.com/q/15751242/2489297)[回复](https://stackoverflow.com/a/15797767/2489297)。第一个解决方法与[Noora](https://stackoverflow.com/users/1133226/noora)的相同——即命令行密码规范有效——但其中列出的其他解决方法可能更适合您的情况。该问题和解决方法适用于-file 和配置。`.conf``.htaccess`

我只想补充一点，您不需要手动编辑您的 passwd 文件，正如`-n`选项所暗示的那样。使用`-b`应该就足够了，例如`htpasswd -b HTUSERS username password`. 如果您的密码文件是[FUBAR](http://en.wikipedia.org/wiki/FUBAR#FUBAR)，您可以在`-c`添加第一个用户时添加选项——截断文件——重新开始。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:33:36.477

您确定您的 Apache 用户（www-data？）可以访问用户文件吗？此外，您可以放弃该`AuthBasicProvider`线路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T13:58:41.610

就我而言，问题是由于与未使用但已加载的 mod-shib2 模块发生冲突。列出您加载的模块：

```
apache2ctl -M 
```

如果存在，请使用以下命令卸载它：

```
a2dismod shib2
systemctl restart apache2 
```

这个固定的基本身份验证。

这与错误[https://bugs.launchpad.net/ubuntu/+source/shibboleth-sp2/+bug/1358284有关](https://bugs.launchpad.net/ubuntu/+source/shibboleth-sp2/+bug/1358284)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-02T02:12:21.093

我知道我参加聚会有点晚了，但我仍在使用 Apache 2.4。显然，它仍然存在这个问题。

我终于成功登录了（因为我知道我的语法和登录名是 at，不可能是这样）。我只是使用普通密码而不是散列，这不是解决方案，但它表明问题出在使用密码散列 - 显然 Apache 没有正确解释它。

# jquery - 雅虎财务表中的字段（yahoo.finance.quotes）

> ID：16101365
> 
> 赞同：2
> 
> 时间：2013-04-19T09:23:59.360
> 
> 标签：jquery, database, yahoo-finance

基本上我正在尝试做的是检索特定公司的股票报价。在我的代码中，我在文本框（symb）中给出特定公司的符号（例如：FB），当我单击按钮（getupdate）时，它应该列出有关我输入文本框的特定股票的详细信息。

这是我之前问过的问题。它只是这个问题的延伸。

[使用 Yahoo Finance 检索股票更新](https://stackoverflow.com/questions/16085704/retrieving-stock-updates-using-yahoo-finance)

在查询中，我给出了“从 yahoo.finance.quotes 中选择 * ....”

我的问题是代替 ***** 我可以提供特定字段，例如***符号*** “从 yahoo.finance.quotes 中选择符号，其中 ..”

如果是，什么和所有字段都可用于查询。

任何建议都会有所帮助。

提前致谢 。

# c# - e.graphics.drawstring 在 printpreview 上显示文本但不打印

> ID：16101366
> 
> 赞同：1
> 
> 时间：2013-04-19T09:24:04.697
> 
> 标签：c#, .net, winforms, printing

我正在使用基于 c# windows 的应用程序。[Visual Studio 2010]

我正在尝试打印账单。

我已经使用`e.Graphics.Drawstring`.

在此它向我展示了带有所有适当数据的 printpreview。

但是，当我打印该 printpreview 时，它没有显示账单中的项目。[打印预览的特定部分。其他数据显示]。

**我的代码如下：**

```
e.Graphics.DrawString("Amount", drawFont, Brushes.Black, new RectangleF(tempX + 600, tempY, dataGridView1.Columns[0].Width, dataGridView1.Rows[1].Height), str);

    while (i < dataGridView1.Rows.Count-1)
            {

                if (height > e.MarginBounds.Height)
                {
                    height = 100;
                    width = 100;
                    e.HasMorePages = true;
                    return;
                }
                height += dataGridView1.Rows[i].Height;

                e.Graphics.DrawString((idInCol).ToString(), drawFont, Brushes.Black, new RectangleF(tempX, ((i*22)+(tempY+25)), dataGridView1.Columns[0].Width, dataGridView1.Rows[0].Height), str);

                e.Graphics.DrawString(dataGridView1.Rows[i].Cells[2].FormattedValue.ToString().Trim(), drawFont, Brushes.Black, new RectangleF(tempX + 30, ((i * 22) + (tempY +25)), 500, dataGridView1.Rows[0].Height), str);

                e.Graphics.DrawString(dataGridView1.Rows[i].Cells[3].FormattedValue.ToString(), drawFont, Brushes.Black, new RectangleF(tempX + 400, ((i * 22) + (tempY +25)), dataGridView1.Columns[0].Width, dataGridView1.Rows[0].Height), drawFormat);
                width += dataGridView1.Columns[0].Width;

                              e.Graphics.DrawString(dataGridView1.Rows[i].Cells[4].FormattedValue.ToString().Trim(), drawFont, Brushes.Black, new RectangleF(tempX + 500, ((i * 22) + (tempY +25)), dataGridView1.Columns[0].Width, dataGridView1.Rows[0].Height), drawFormat);
                width += dataGridView1.Columns[0].Width;

                               e.Graphics.DrawString(dataGridView1.Rows[i].Cells[5].FormattedValue.ToString().Trim(), drawFont, Brushes.Black, new RectangleF(tempX + 600, ((i * 22) + (tempY +25)), dataGridView1.Columns[0].Width, dataGridView1.Rows[0].Height), drawFormat);
                width += dataGridView1.Columns[0].Width;
                idInCol++;
                i++;
            } 
```

**这是我的账单截图：**

![在此处输入图像描述](https://i.stack.imgur.com/mCt9q.jpg)

在我打印出来时，它没有显示账单详情。除了那个之外，所有其他数据都显示在打印输出中。

我已经粘贴了代码（while 循环），我从中获取账单详情（项目、序列号等）。

我的代码中是否缺少任何内容？

或者

我在代码中做错了吗？

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T12:12:30.060

我知道这已经两个月大了，您可能发现了错误或放弃了。

无论如何，我走了：在这里，我假设变量`i`被全局声明为类。如果是这种情况，您需要`i`在 while 循环完成后重置为 0。

要确认您需要重置，只需在您第二次进入该方法（真正的打印方法）时`i`调试您的应用程序并检查值。`i`此外，如果您直接打印而不进行预览，它应该可以工作。

# eclipse - Eclipse 中的 Maven Webstart 插件

> ID：16101367
> 
> 赞同：0
> 
> 时间：2013-04-19T09:24:05.743
> 
> 标签：eclipse, maven, eclipse-plugin, m2eclipse, java-web-start

我正在寻找直接在 Eclipse 中使用 maven webstart 插件运行项目的可能性。我收到一条错误消息：

`Plugin execution not covered by lifecycle configuration:` `org.codehaus.mojo:webstart-maven-plugin:1.0-beta-3-cx:jnlp-download-servlet (execution: default, phase: process-resources)`

有没有人解决这个问题或任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T20:07:00.843

groupId 在 1.0-beta-3 中从“org.codehaus.mojo.webstart”更改为“org.codehaus.mojo”，因此您需要记住在 pom 的 org.eclipse.m2e 部分中将其更改为出色地。

我遇到了同样的问题，我之前更新了 groupId，但忘记也为 m2e 使用的插件更改它。一旦我将 groupId 更正为新值，错误就消失了。

```
 <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.codehaus.mojo <-- Was org.codehaus.mojo.webstart until 1.0-beta-3!
                                    </groupId>
                                    <artifactId>
                                        webstart-maven-plugin 
```

更改信息：[http ://www.mojohaus.org/webstart/webstart-maven-plugin/upgrade.html](http://www.mojohaus.org/webstart/webstart-maven-plugin/upgrade.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T08:00:06.770

如果您不想一直使用可能令人讨厌的相同文本填充所有 pom.xml，您可以在 eclipse 配置中进行设置，如下所述：

[https://mahichir.wordpress.com/2014/05/14/solving-the-plugin-execution-not-covered-by-lifecycle-configuration-error-in-eclipse/](https://mahichir.wordpress.com/2014/05/14/solving-the-plugin-execution-not-covered-by-lifecycle-configuration-error-in-eclipse/)

这是**Eclipse**下所有插件的通用解决方案，这个*org.codehaus.mojo*插件的具体解决方案是我的下一个*1.0-beta-6*版本：

转到 Eclipse **Preferences** => **Maven** => **Lifecycle Mappings** => **Open Workspace 生命周期映射元数据**并将下一个 xml 代码保存在文件*生命周期映射元数据.xml 中*

```
<?xml version="1.0" encoding="UTF-8"?>
<lifecycleMappingMetadata>
    <pluginExecutions>
        <pluginExecution>
            <pluginExecutionFilter>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>webstart-maven-plugin</artifactId>
                <versionRange>[1.0-beta-6,)</versionRange>
                <goals>
                    <goal>jnlp-download-servlet</goal>
                </goals>
            </pluginExecutionFilter>
            <action>
                <ignore>true</ignore>
            </action>
        </pluginExecution>
    </pluginExecutions>
</lifecycleMappingMetadata> 
```

# php - setlocale 并不总是被设置（间歇性地正常工作）

> ID：16101369
> 
> 赞同：0
> 
> 时间：2013-04-19T09:24:11.220
> 
> 标签：php, date, time, setlocale

我正在使用 PHP 的 setlocale(LC_TIME, country) 将服务器的语言环境临时设置为西班牙语 (es_ES.utf8) 或法语 (fr_FR.utf8)。

然后我使用 strftime() 以所选语言环境的语言打印出日期。

在通过刷新页面并回显它来测试 setlocale 之后，它没有设置一半的时间，而是以英文显示日期作为后备。

是否有任何原因导致 setlocale 不能 100% 工作。它需要正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:30:58.517

Chrome 缓存问题。

始终在开发人员工具栏中关闭 chrome 的缓存进行开发。

# eclipse - 为什么在跨平台 Tycho 构建的 Windows 工件上没有配置更新 repo URL？

> ID：16101372
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:24:14.343
> 
> 标签：eclipse, rcp, tycho, p2

我有一个在 Mac OS X 上运行的跨平台 Tycho 构建，它可以生成 Windows、Mac 和 p2 repo 输出。

通常一切都很好，除了 Windows RCP 没有从我的***p2.inf*** *addRepository*指令中配置更新 repo URL 详细信息（因此 p2 更新失败） - 它**适用**于 Mac OS X 应用程序......这似乎很可疑.. . 为什么是一个而不是另一个？！

这是任何人都可能遇到过的第谷错误吗？（我目前正在使用 Tycho 0.13.0，*担心切换版本..*）或者我是否需要明确的说明才能将其应用于 Windows 构建？

在此处包含一些 POM 可能会有所帮助...

这是来自产品项目的 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<artifactId>com.myapp.main.product</artifactId>

<packaging>eclipse-repository</packaging>

<name>my product</name>

<parent>
    <groupId>com.myapp</groupId>
    <artifactId>parent</artifactId>
    <version>1.9.0-SNAPSHOT</version>
    <relativePath>../com.myapp.parent</relativePath>
</parent>

<build>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-p2-director-plugin</artifactId>
            <version>${tycho-version}</version>
            <executions>
                <execution>
                    <id>materialize-products</id>
                    <goals>
                        <goal>materialize-products</goal>
                    </goals>
                </execution>
                <execution>
                    <id>archive-products</id>
                    <goals>
                        <goal>archive-products</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

<!-- SEE: http://dev.eclipse.org/mhonarc/lists/tycho-user/msg00362.html
     SEE: https://issues.sonatype.org/browse/TYCHO-300 -->

        <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>copy-resources</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${project.build.directory}/products/com.myapp.main.product/icons</outputDirectory>
              <resources>
                <resource>
                  <directory>icons</directory>
                </resource>
              </resources>
            </configuration>
          </execution>
        </executions>
      </plugin>
  </plugins>
</build>

<version>1.9.0-SNAPSHOT</version>
</project> 
```

和父 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.myapp</groupId>
<artifactId>parent</artifactId>
<version>1.9.0-SNAPSHOT</version>

<packaging>pom</packaging>

<modules>
    <module>../com.myapp.doc</module>

    <module>../com.myapp.lots.of.plugins</module>

    <module>../com.myapp.main</module>
    <module>../com.myapp.main.nl</module>
    <module>../com.myapp.branding</module>
    <module>../com.myapp.branding.nl</module>

    <module>../com.myapp.feature.platform</module>
    <module>../com.myapp.feature.core</module>
    <module>../com.myapp.main.product</module>
</modules>

<properties>
    <tycho-version>0.13.0</tycho-version>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho-version}</version>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho-version}</version>
            <configuration>
                <resolver>p2</resolver>
                <environments>
                    <environment>
                         <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                     <environment>
                        <os>macosx</os>
                        <ws>cocoa</ws>
                        <arch>x86</arch>
                    </environment>
                     <environment>
                        <os>macosx</os>
                        <ws>carbon</ws>
                        <arch>x86</arch>
                    </environment>
<!-- 64 bit platforms
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86_64</arch>
                    </environment>
-->
                     <environment>
                        <os>macosx</os>
                        <ws>cocoa</ws>
                        <arch>x86_64</arch>
                    </environment>
                </environments>
            </configuration>
        </plugin>
    </plugins>
</build>

<profiles>

    <!-- MacOS specific vm arguments for UI testing -->
    <profile>
        <id>osx</id>
        <activation>
            <property>
                <name>java.vendor.url</name>
                <value>http://www.apple.com/</value>
            </property>
        </activation>
        <build>
            <pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.eclipse.tycho</groupId>
                        <artifactId>tycho-surefire-plugin</artifactId>
                        <version>${tycho-version}</version>
                        <configuration>
                            <appArgLine>-XstartOnFirstThread</appArgLine>
                        </configuration>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </profile>

    <profile>
      <id>coverage</id>
        <activation>
            <property>
                <name>coverage</name>
            </property>
        </activation>
        <properties>
            <emma.session.out.file>${project.build.directory}/emma/${project.artifactId}.es</emma.session.out.file>
            <emma.filter>com.myapp.*</emma.filter>
            <eclemma.instrument.bundles>com.myapp.backup.tests,com.myapp.common.tests,com.myapp.model.tests</eclemma.instrument.bundles>
        </properties>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>1.5</version>
                    <executions>
                        <execution>
                            <id>attach-artifacts</id>
                            <phase>package</phase>
                            <goals>
                                 <goal>attach-artifact</goal>
                            </goals>
                            <configuration>
                                <artifacts>
                                    <artifact>
                                        <file>${emma.session.out.file}</file>
                                        <type>es</type>
                                    </artifact>
                                </artifacts>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>org.sonatype.tycho</groupId>
                    <artifactId>maven-osgi-test-plugin</artifactId>
                    <version>${tycho-version}</version>
<!--
                     <configuration>
                        <systemProperties combine.children="append">
                            <eclemma.help>true</eclemma.help>
                            <emma.session.out.file>${emma.session.out.file}</emma.session.out.file>
                            <emma.filter>${emma.filter}</emma.filter>
                            <eclemma.instrument.bundles>${eclemma.instrument.bundles}</eclemma.instrument.bundles>
                        </systemProperties>
                        <frameworkExtensions>
                            <frameworkExtension>
                                <groupId>org.eclemma.runtime.equinox</groupId>
                                <artifactId>org.eclemma.runtime.equinox</artifactId>
                                <version>1.1.0.200908261008</version>
                            </frameworkExtension>
                        </frameworkExtensions>
                    </configuration>
 -->
                     <configuration>
                        <skip>${skipFunctional}</skip>
                        <useUIHarness>true</useUIHarness>
                        <useUIThread>false</useUIThread>
                        <product>org.eclipse.sdk.ide</product>
                        <application>org.eclipse.ui.ide.workbench</application>
                        <argLine>-Xmx512M</argLine>
                        <systemProperties combine.children="append">
                            <emma.session.out.file>${emma.session.out.file}</emma.session.out.file>
                            <emma.filter>${emma.filter}</emma.filter>
                            <eclemma.instrument.bundles>${emma.instrument.bundles}</eclemma.instrument.bundles>
                        </systemProperties>
                        <frameworkExtensions>
                            <frameworkExtension>
                                <groupId>org.eclemma.runtime.equinox</groupId>
                                <artifactId>org.eclemma.runtime.equinox</artifactId>
                                <version>1.1.0.200908261008</version>
                            </frameworkExtension>
                        </frameworkExtensions>
                        <application>org.eclipse.ui.ide.workbench</application>
                        <dependencies>
                            <dependency>
                                <type>p2-installable-unit</type>
                                <artifactId>org.eclipse.sdk.ide</artifactId>
                                <version>0.0.0</version>
                            </dependency>
                        </dependencies>
                    </configuration>

                 </plugin>
            </plugins>
        </build>
    </profile>
</profiles>

<repositories>
    <repository>
        <id>helios-platform</id>
        <layout>p2</layout>
        <url>${project.baseUri}../../../../targetplatform/org.eclipse.platform-3.7.1</url>
    </repository>
    <repository>
        <id>myapp-targetplatform</id>
        <layout>p2</layout>
        <url>${project.baseUri}../../../../targetplatform/myapp-targetplatform</url>
    </repository>
</repositories>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:11:04.873

将 Tycho 升级到 0.17.0 但事实证明这个问题确实与 Tycho**无关**- 我意识到我已经调整了 Windows 上的位置属性，以准备支持使用 UAC 安装到 c:\Program Files post-XP ：

```
-Dosgi.instance.area=@user.home/Application Data/myapp
-Dosgi.configuration.area=@user.home/Application Data/myapp/.configuration 
```

但是，将 osgi.configuration.area 移出安装文件夹（默认为 c:\myapp :P）是导致我的 p2 问题的原因。

# iphone - 如何取消通过 SMTP 服务器发送的外发电子邮件？

> ID：16101374
> 
> 赞同：1
> 
> 时间：2013-04-19T09:24:17.407
> 
> 标签：iphone, ios, objective-c, smtp

我正在使用[https://github.com/kailoa/iphone-smtp](https://github.com/kailoa/iphone-smtp) 代码通过 smtp 服务器发送邮件。我能够正确发送邮件。但我有一个要求，当用户按下按钮时，不应发送邮件。有什么方法可以停止发送邮件（如果已经提出请求）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:36:38.487

我不能说我对此很熟悉。你不能撤回已经发送的电子邮件，我很确定。

但是您可以做的是设置一些定时延迟。即在发送到 SMTP 处理程序之前的 10 秒。

流程： 1）写电子邮件 2）按发送 3）放入某种队列（消息对象数组？） 4）设置一些计时器，该计时器将在 10 秒后触发以循环通过数组并发送消息。

如果用户在计时器运行之前按消息上的“取消”或“删除”或其他内容。然后从数组中删除对象。它不会发送消息:)

希望这可以帮助！

# asp.net-mvc-4 - 将 ViewBag 传递给 MVC 中的 _Layout？

> ID：16101375
> 
> 赞同：0
> 
> 时间：2013-04-19T09:24:20.740
> 
> 标签：asp.net-mvc-4, partial-views, viewbag

在我的搜索控制器中，我有：

```
 public JsonResult Search(string term)
      {
         var termLower=term.ToLower();
        var pictures=_PictureRepo.GetAll();

        var productsWereSeached = _ProductRepo.GetAll().Where(x => x.Name.ToLower().Contains(term)).Select(x=> new ProductData

        {
            Name=x.Name,
            Price=x.Price,
            Id=x.Id,
            Warranty=x.Warranty,
            Picture=x.Pictures.FirstOrDefault()

        });
        ViewBag.NOfMatchedProduct = productsWereSeached.Count();
        productsWereSeached = productsWereSeached.Take(2);
        foreach (var product in productsWereSeached)
        {
            product.Picture = _PictureRepo.GetAll().Where(x => x.ProductId == product.Id).FirstOrDefault();
        }

        return Json(productsWereSeached);
    } 
```

在我的 _Layout 我有：

```
 <div>
    <input id="nOfMatchedProducts" value='@ViewBag.NOfMatchedProduct'/>
  <ul id="realPlaceForSearchItems">
 </ul>
</div> 
```

也许我应该把这段代码从`_Layout`到`PartialView`. 问题是，如何将`ViewBag`数据从控制器传递到`PartialView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:33:04.567

> “公共 JsonResult Search” - 所以你已经在 ajax 中调用你的方法了，对吧？
> 
> 是的，但我要退回 2 个产品WereSeached

您已经有了结果，只需要将其显示给您的目标元素：

```
$.get('@Url.Action("Search")',function(result){
    $("#nOfMatchedProducts").html(result.length);
}); 
```

如果您想返回附加信息，例如除了“您的过滤结果”之外的搜索记录总数，那么您可以像这样传递它：

```
var totalrows = productsWereSeached.Count();
//filter your search (productsWereSeached)
return Json(new {list=productsWereSeached, totalrows }); 
```

然后做这个ajax调用：

```
$.get('@Url.Action("Search")',function(result){
    $("#nOfMatchedProducts").html(result.totalrows);
}); 
```

# php - 在 Kohana 中抛出一个自定义的 401 HTTP 异常

> ID：16101383
> 
> 赞同：0
> 
> 时间：2013-04-19T09:24:53.583
> 
> 标签：php, kohana, http-status-code-401, kohana-3.3, www-authenticate

当我抛出一个`HTTP_Exception_401`时，`Kohana 3.3`我得到以下错误：

```
Kohana_Exception [ 0 ]: A 'www-authenticate' header must be specified for a HTTP 401 Unauthorized 
```

现在这里明显的问题是`www-authenticate`标题尚未设置。

我正在努力弄清楚如何以及在哪里设置它。
我尝试了以下方法，但抛出了相同的错误：

使用原生 PHP `header()`：

```
header('WWW-Authenticate: realm="My Website"');
throw new HTTP_Exception_401('Authorisation Required'); 
```

向请求对象添加标头：

```
$this->request->header('WWW-Authenticate', 'realm="My Website"');
throw new HTTP_Exception_401('Authorisation Required'); 
```

我试图从控制器抛出异常。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:27:57.160

正如[升级指南](http://kohanaframework.org/3.3/guide/kohana/upgrading)所说：

```
// Unauthorized / Login Requied
throw HTTP_Exception::factory(401)->authenticate('Basic realm="MySite"'); 
```

# http-status-code-404 - Umbraco V6 404 未根据文化正确处理

> ID：16101384
> 
> 赞同：2
> 
> 时间：2013-04-19T09:24:54.397
> 
> 标签：http-status-code-404, umbraco, multilingual

我有一个 umbraco 站点（umbraco v6），我已经按照[http://our.umbraco.org/Documentation/Using-Umbraco/Config-files/umbracoSettings/index](http://our.umbraco.org/Documentation/Using-Umbraco/Config-files/umbracoSettings/index)设置了自定义 404 处理。我的内容树如下：

```
Content
    Root
        Greek-Homepage
            Greek-Content
            Greek-Not-found (id: 1303)
        English-Homepage
            English-Content
            English-Not-found (id: 1304) 
```

我已经将`<errors>`标签设置如下：

```
 <error404>
        <errorPage culture="default">1303</errorPage>
        <errorPage culture="el-GR">1303</errorPage>
        <errorPage culture="en-US">1304</errorPage>
    </error404> 
```

无论我尝试什么，我都无法让网站显示 1303（希腊语）节点。它仅显示 1304（英文）节点。

我在这里做错了什么？

# ftp - FTP 错误 - 权限问题？

> ID：16101391
> 
> 赞同：0
> 
> 时间：2013-04-19T09:25:23.350
> 
> 标签：ftp

我正在为一个客户重新设计一个网站，一切都很好，直到我去 ftp。他给我的登录名和密码可以正常工作，但是当我尝试上传文件时，会弹出一条错误消息：

发生 FTP 错误 - 无法创建新文件夹。拒绝访问。该文件可能不存在或可能存在权限问题。确保您在服务器上具有适当的授权并且服务器已正确配置。

我可以看到已经在服务器上的文件，所以我知道我连接正常，但是我如何让这个网站上线呢？我是否联系网站的前任编码员以使文件可写？还是其他地方的问题？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:32:26.317

例如，托管服务可能要求您将所有文件放置到 /www 并拒绝访问其他任何内容。您可以尝试通过该虚拟主机的网络界面重置用户权限。如果该服务允许某些 ssh 访问，您可以尝试使用它来查看问题所在。如果 SFTP 工作得更好，你可以使用它来代替。

# ajax - 如何以编程方式 ajax 更新支持 bean 中的特定组件

> ID：16101392
> 
> 赞同：10
> 
> 时间：2013-04-19T09:25:25.057
> 
> 标签：ajax, jsf, primefaces, updates

有没有办法对特定组件进行 ajax 更新，例如`<h:form>`支持 bean？

我尝试了以下使用[`RequestContext#execute()`](http://www.primefaces.org/docs/api/3.4/org/primefaces/context/RequestContext.html#execute%28java.lang.String%29)，

```
RequestContext context = RequestContext.getCurrentInstance();
context.execute("monitorVehicleForm.update()"); 
```

但这似乎没有任何效果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T12:57:00.760

`RequestContext#execute()`唯一执行作为参数传入的任意 JavaScript 代码。它不会对组件的客户端表示进行 ajax 更新。

相反，您需要[`RequestContext#update()`](http://www.primefaces.org/docs/api/3.4/org/primefaces/context/RequestContext.html#update%28java.lang.String%29)传递待更新组件的客户端 ID。

```
context.update("monitorVehicleForm"); 
```

这与 的效果完全相同`<p:commandXxx ... update="monitorVehicleForm">`。如果您有一个

```
<h:form id="monitorVehicleForm"> 
```

没有任何[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)父母，因此有一个

```
<form id="monitorVehicleForm" name="monitorVehicleForm" ...> 
```

在生成的 HTML 中。

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# python - 对 python 3.3 的 PNG 支持

> ID：16101393
> 
> 赞同：1
> 
> 时间：2013-04-19T09:25:27.263
> 
> 标签：python, python-3.x, png, gis

我找不到任何添加对 PNG 图像支持的 python 3.3 库。我需要将多边形、线条和点写入 254*254 图像的“图块”，这些图像将保存到硬盘中。任何关于 python 3.3 的 PIL 分布的建议或链接？

顺便说一句，我正在使用 Windows 7。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:26:28.763

[Pillow 2.0](https://pypi.python.org/pypi/Pillow/2.0.0)支持 Python 3，包括 3.3：

> **注意**：Pillow >= 2.0.0 支持 Python 版本：2.6、2.7、3.2、3.3；Pillow < 2.0.0 支持 Python 版本：2.4、2.5、2.6、2.7。

Pillow 是 PIL 的一个分支，它添加了（很多）更好的打包和补丁以及改进，以使 PIL 在 Python 3 上工作。

包括 Windows 安装程序和鸡蛋。

# reporting-services - SSRS 报告可以下载到 Excel，但在 Firefox 和 Chrome 中不能下载 XML

> ID：16101394
> 
> 赞同：1
> 
> 时间：2013-04-19T09:25:30.837
> 
> 标签：reporting-services, sql-server-2012, export-to-xml

我在 Sharepoint 2010 中有一份 SSRS 2012 报告。我从这份报告中创造了一个机会，可以毫无问题地将报告下载到 Excel。现在我希望能够将报告下载到 XML，但是当我更改
`rs:Format=Excel`
为
`rs:Format=Xml`

在 URL 中，在 Firefox 和 Chrome 中找不到报告。在 IE 中，我可以将报告下载到 XML。关于如何在 Firefox 和 Chrome 中将报告下载到 XML 的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:06:34.133

Just use IE Tab to emulate an active x browser session. Honestly you are asking "How can a MS product not designed for other browsers, run in them?" I see this question in many different varieties constantly here on Stack Overflow and the common answer is one of two things:

1.  Go on the server and change the default behavior of the ENTIRE SSRS service's CSS file to adjust for a different browser.

2.  Tell users to use IE tab if they want to view or use MS products in a different browser.

Things like Sharepoint, SSRS, and certain parts of ASP.NET are meant for IE. If you want them to work the same in other technologies you are going to either hack or get a tool someone else designed to emulate IE. Browsers are complex things, you have to ask yourself: "Is this worth a few hours of changing and testing versus just telling people: 'Use this plugin'"?

Some seasoned developers could probably change the CSS and other settings in a few minutes. However you then open up a road of: "Well can we now redesign all of SSRS to be cross browser compatible for every little thing?" Maybe that is acceptable, maybe not. Depends on your priorities. Honestly I want to spend most of my time developing my reports, not worrying about cross browser compatability of a proprietary product and spending more time on that then development of the core product.

# iphone - 核心图：ios 在同一 CPTGraph 中显示两个 y 轴和 ScaterPlot 和条形图

> ID：16101397
> 
> 赞同：1
> 
> 时间：2013-04-19T09:25:36.470
> 
> 标签：iphone, ios, ios5, core-plot

嗨，请指导我编写方法来使用核心图显示两个 Y 轴（左侧和右侧）和一个 x 轴，而且我必须在单个 CPTGraph 中绘制散点图和条形图。CPTScatter 图以 -ve 方向显示在右侧 Y 轴上。

我的代码片段

```
-(void)configureAxes
{
    // 1 - Configure styles
    CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
    axisTitleStyle.color = [CPTColor whiteColor];
    axisTitleStyle.fontName = @"Helvetica-Bold";
    axisTitleStyle.fontSize = 8.0f;
    CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
    axisLineStyle.lineWidth = 2.0f;
    axisLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:1];
    CPTMutableTextStyle *axisTextStyle = [[CPTMutableTextStyle alloc] init];
    axisTextStyle.color = [CPTColor whiteColor];
    axisTextStyle.fontName = @"Helvetica-Bold";
    axisTextStyle.fontSize = 8.0f;
    CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];
    tickLineStyle.lineColor = [CPTColor whiteColor];
    tickLineStyle.lineWidth = 2.0f;
    CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
    tickLineStyle.lineColor = [CPTColor blackColor];
    tickLineStyle.lineWidth = 1.0f;

    // 2 - Get the graph's axis set
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;

    // 3 - Configure the x-axis
//    axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;
//    axisSet.xAxis.title = @"";
//    axisSet.xAxis.labelAlignment = CPTAlignmentRight;
//    axisSet.xAxis.titleTextStyle = axisTitleStyle;
//    axisSet.xAxis.titleOffset = 38.0f;
//    axisSet.xAxis.axisLineStyle = axisLineStyle;
//    axisSet.xAxis.labelTextStyle = axisTextStyle;
    CGFloat dateCount = [self.arrayData count];
    NSMutableSet *xLabels = [NSMutableSet setWithCapacity:dateCount];
    NSMutableSet *xLocations = [NSMutableSet setWithCapacity:dateCount];
    NSInteger i = 0;
    for (ResolutionData *d in self.arrayData)
    {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[[d.appName componentsSeparatedByString:@"-"]objectAtIndex:0]  textStyle:axisSet.xAxis.labelTextStyle];
//        [label setRotation:45.0];
        CGFloat location = i++;
        label.tickLocation = CPTDecimalFromCGFloat(location);
        label.offset = axisSet.xAxis.majorTickLength;
        if (label) {
            [xLabels addObject:label];
            [xLocations addObject:[NSNumber numberWithFloat:location]];
        }
    }
    axisSet.xAxis.axisLabels = xLabels;
    axisSet.xAxis.majorTickLocations = xLocations;

    // 4 - Configre the y-axis
    CPTAxis *y = axisSet.yAxis;
    y.title = @"count";
    y.labelAlignment = CPTAlignmentCenter;
    y.titleTextStyle = axisTitleStyle;
    y.titleOffset = -40.0f;
    y.axisLineStyle = axisLineStyle;
    y.majorGridLineStyle = gridLineStyle;
    y.labelingPolicy = CPTAxisLabelingPolicyNone;
    y.labelTextStyle = axisTextStyle;
    y.labelOffset = 16.0f;
    y.majorTickLineStyle = axisLineStyle;
//    y.majorTickLength = 4.0f;
//    y.minorTickLength = 2.0f;
    y.tickDirection = CPTSignPositive;
    NSInteger majorIncrement = 20;
    NSInteger minorIncrement = 10;
    CGFloat yMax = 100.0f;  // should determine dynamically based on max price
    NSMutableSet *yLabels = [NSMutableSet set];
    NSMutableSet *yMajorLocations = [NSMutableSet set];
    NSMutableSet *yMinorLocations = [NSMutableSet set];
    int   x =1;
    for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {
        NSUInteger mod = j % majorIncrement;
        if (mod == 0) {
            CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", x] textStyle:y.labelTextStyle];
            [label setAlignment:CPTAlignmentTop];
            NSDecimal location = CPTDecimalFromInteger(j);x++;
            label.tickLocation = location;
            label.offset = -y.majorTickLength - y.labelOffset;
            if (label) {
                [yLabels addObject:label];
            }
            [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];
        } else {
            [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];
        }
    }

    y.axisLabels = yLabels;
    y.majorTickLocations = yMajorLocations;
    y.minorTickLocations = yMinorLocations;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:40:25.000

创建一个新的 y 轴对象，根据需要对其进行配置，并将其添加到轴集。

```
axisSet.axes = [NSArray arrayWithObjects:x, y, y2, nil]; 
```

如果您想要右侧 y 轴的不同比例，则需要另一个绘图空间。创建一个新的，对其进行配置，将其设置为与默认绘图空间`xRange`相同`xRange`，并将其添加到图形中。确保新的 y 轴已`plotSpace`设置为新的绘图空间对象。

```
CPTXYPlotSpace *oldPlotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
CPTXYPlotSpace *newPlotSpace = [[[CPTXYPlotSpace alloc] init] autorelease];
newPlotSpace.xRange = oldPlotSpace.xRange;
newPlotSpace.yRange = [CPTPlotRange plotRangeWithLocation:/* location */
                                                   length:/* length */];
[graph addPlotSpace:linearPlotSpace]; 
```

*有关示例代码，请参阅Plot Gallery*示例应用程序中的“Axis Demo”和“Plot Space Demo” 。

# java - Hibernate：如何从视图中查询条件

> ID：16101402
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:25:45.727
> 
> 标签：java, hibernate, view

```
 public List<ShoworderbybidId> queryTradesByBid(String bid) throws Exception {

  Session session=null;

  Transaction transaction=null;

  List<ShoworderbybidId> orders=new ArrayList<ShoworderbybidId>();

  try {

   session=HibernateSessionFactory.getSession();

   transaction=session.beginTransaction();

   Query query=session.createQuery("from Showorderbybid");// In this way, I could query all results from view Showorderbybid

   //Query query=session.createQuery("from Showorderbybid where bid = "+bid); //I try to use this code to find out the orders from a view(Showorderbybid) in my database. However, it failed. It said " Unknown column 'ru0001' (bid=ru0001) in 'where clause' "

   orders=(List<ShoworderbybidId>)query.list();

   transaction.commit();

  } catch (Exception e) {

   throw e;

  }finally{

   HibernateSessionFactory.closeSession();

  }

  return orders;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:30:15.000

您可以使用条件来创建条件查询，但是您也可以使用您在代码中编写的内容，我认为“**投标”列**应该有问题，它的名称是否与 bean 中的名称相同？并给出你的错误跟踪。

# node.js - 难以理解 nodejs 文档

> ID：16101404
> 
> 赞同：0
> 
> 时间：2013-04-19T09:25:53.570
> 
> 标签：node.js

我真的对这部分感到困惑

[http://nodejs.org/api/http.html#http_http_createserver_requestlistener](http://nodejs.org/api/http.html#http_http_createserver_requestlistener)

`The requestListener is a function which is automatically added to the 'request' event.`

“添加”一词具体是什么意思？

也在这里 [http://nodejs.org/api/http.html#http_event_request](http://nodejs.org/api/http.html#http_event_request)

下面的代码是什么意思`function (request, response) { }`？这是否意味着每次有请求时都会通过该函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:30:58.627

requestListener 是一个监听“请求”事件的 lsitener。每次发出请求事件时，都会执行 requestListener。你传递一个函数。

您传递的那个函数应该匹配：

```
function (request, response) { } 
```

我相信在 nodejs.org 的主页上有一个例子。

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

因此，每次发出请求事件时，都会“调用”此函数。

```
function (req, res) {
      res.writeHead(200, {'Content-Type': 'text/plain'});
      res.end('Hello World\n');
    } 
```

带有 req 和 res 一个参数。（请求和响应）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:18:10.280

如果有任何帮助，请声明

```
var app = http.createServer( function reqlistener(request, response){...} ).listen(1337); 
```

其中函数`reqlistener`是 requestListener 参数，等价于以下

```
var app = http.createServer().listen(1337);
app.on('request', function reqlistener(request, response){...} ); 
```

因此，它只是`request`在服务器启动期间为事件提供侦听器的快捷方式。`request`当服务器接收到每个请求时，该事件会发出一次。

# c# - shdocvw.InternetExplorer NewWindow3/2。无法使用我自己的 Internet Explorer

> ID：16101405
> 
> 赞同：2
> 
> 时间：2013-04-19T09:25:59.093
> 
> 标签：c#, .net, vb.net, internet-explorer-8

我在 Visual Studio 2010 WPF 程序中有以下代码。我正在自动化 Internet Explorer，而不是表单上的网络浏览器。

```
Private Sub ie_NewWindow3(ByRef ppDisp As Object, ByRef Cancel As Boolean, ByVal dwFlags As UInteger, ByVal bstrUrlContext As String, ByVal bstrUrl As String) Handles ie.NewWindow3
    Dim ie As New SHDocVw.InternetExplorer
    ie.RegisterAsBrowser = True
    ppDisp = ie.Application
    ie.Visible = True
    Cancel = True
End Sub 
```

当事件触发时，我得到了我的新 Internet Explorer，但它处于未初始化的就绪状态，只是坐在那里什么都不做，似乎没有触发任何事件。任何身体都可以提供帮助。

我已经尝试过，例如这个简单的网站[Simple Popup example](http://www.quackit.com/html/codes/html_open_link_in_new_window.cfm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:41:22.917

啊，很简单。当它是 Internet Explorer 时，您无需取消。您提供的窗口是唯一的窗口。

# go - 是否有一些优雅的方式来暂停和恢复任何其他 goroutine？

> ID：16101409
> 
> 赞同：15
> 
> 时间：2013-04-19T09:26:05.760
> 
> 标签：go, channel, goroutine

就我而言，我有数千个 goroutines 同时作为`work()`. 我也有一个`sync()`goroutine。启动时`sync`，我需要任何其他 goroutine 在同步作业完成后暂停一段时间。这是我的代码：

```
var channels []chan int
var channels_mutex sync.Mutex

func work() {
  channel := make(chan int, 1)
  channels_mutex.Lock()  
  channels = append(channels, channel)
  channels_mutex.Unlock()
  for {
    for {
      sync_stat := <- channel // blocked here
      if sync_stat == 0 { // if sync complete
        break  
      }
    }
    // Do some jobs
    if (some condition) {
      return
    }
  }
}

func sync() {
  channels_mutex.Lock()
  // do some sync

  for int i := 0; i != len(channels); i++ {
    channels[i] <- 0
  }
  channels_mutex.Unlock()
} 
```

现在的问题是，由于`<-`读取时总是阻塞，所以每次去`sync_stat := <- channel`都是阻塞的。我知道如果频道关闭它不会被阻止，但是由于我必须使用这个频道直到`work()`退出，我没有找到任何方法来重新打开一个关闭的频道。

我怀疑自己走错路了，因此感谢您提供任何帮助。是否有一些“优雅”的方式来暂停和恢复任何其他 goroutine？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T10:14:16.353

如果我理解正确，您需要 N 个工人和一个控制器，它可以随意暂停、恢复和停止工人。下面的代码将做到这一点。

```
package main

import (
    "fmt"
    "runtime"
    "sync"
)

// Possible worker states.
const (
    Stopped = 0
    Paused  = 1
    Running = 2
)

// Maximum number of workers.
const WorkerCount = 1000

func main() {
    // Launch workers.
    var wg sync.WaitGroup
    wg.Add(WorkerCount + 1)

    workers := make([]chan int, WorkerCount)
    for i := range workers {
        workers[i] = make(chan int, 1)

        go func(i int) {
            worker(i, workers[i])
            wg.Done()
        }(i)
    }

    // Launch controller routine.
    go func() {
        controller(workers)
        wg.Done()
    }()

    // Wait for all goroutines to finish.
    wg.Wait()
}

func worker(id int, ws <-chan int) {
    state := Paused // Begin in the paused state.

    for {
        select {
        case state = <-ws:
            switch state {
            case Stopped:
                fmt.Printf("Worker %d: Stopped\n", id)
                return
            case Running:
                fmt.Printf("Worker %d: Running\n", id)
            case Paused:
                fmt.Printf("Worker %d: Paused\n", id)
            }

        default:
            // We use runtime.Gosched() to prevent a deadlock in this case.
            // It will not be needed of work is performed here which yields
            // to the scheduler.
            runtime.Gosched()

            if state == Paused {
                break
            }

            // Do actual work here.
        }
    }
}

// controller handles the current state of all workers. They can be
// instructed to be either running, paused or stopped entirely.
func controller(workers []chan int) {
    // Start workers
    setState(workers, Running)

    // Pause workers.
    setState(workers, Paused)

    // Unpause workers.
    setState(workers, Running)

    // Shutdown workers.
    setState(workers, Stopped)
}

// setState changes the state of all given workers.
func setState(workers []chan int, state int) {
    for _, w := range workers {
        w <- state
    }
} 
```

# wpf - 在选项卡项中查找用户控件的子项

> ID：16101411
> 
> 赞同：2
> 
> 时间：2013-04-19T09:26:14.977
> 
> 标签：wpf, wpf-controls

我有一个与查找用户控件的子项有关的问题。用户控件驻留在选项卡控件的选项卡项中

XAML

```
<TabControl HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="150">
    <TabItem Header="First tab">
        <Grid Background="#FFE5E5E5"/>
    </TabItem>
    <TabItem Header="Tab with stackpanel" x:Name="tabWithStackPanel">
        <StackPanel>
            <TextBox></TextBox>
            <TextBox></TextBox>
            <TextBox></TextBox>
            <TextBox></TextBox>
            <TextBox></TextBox>
            <TextBox></TextBox>
            <TextBox></TextBox>
        </StackPanel>
    </TabItem>
    <TabItem Header="Tab with user control" x:Name="tabWithUserControl">
        <control:UserControl1/>
    </TabItem>
</TabControl>
<Button Height="46" Width="70" Panel.ZIndex="1001" Click="Button_Click">Find</Button> 
```

返回依赖对象的子对象的方法

```
public static List<T> FindChildren<T>(DependencyObject parent) where T : DependencyObject
{
    if (parent == null) return null;

    List<T> children = new List<T>();

    int childrenCount = VisualTreeHelper.GetChildrenCount(parent);

    for (int i = 0; i < childrenCount; i++)
    {
        var child = VisualTreeHelper.GetChild(parent, i);
        T childType = child as T;
        if (childType == null)
        {
            children.AddRange(FindChildren<T>(child));
        }
        else
        {
            children.Add((T)child);
        }
    }

    return children;
} 
```

因此，正如您在 XAML 中看到的，第二个`TabItem`包含 a`StackPanel`其中包含一些`TextBoxes`. 第三个`TabItem`包含 a`UserControl`其中也包含`TextBoxes`.

现在，当我单击 Find 按钮时，事件处理程序应该执行以下操作

```
 var children1 = Util.FindChildren<TextBox>(tabWithStackPanel.GetValue(TabItem.ContentProperty) as StackPanel);
    var children2 = Util.FindChildren<TextBox>(tabWithUserControl.GetValue(TabItem.ContentProperty) as UserControl1); 
```

问题是第一行返回`StackPanel`面板的所有子项，但第二行不返回`UserControl1`.

我必须首先选择“带有用户控件的选项卡”才能获取`UserControl1`.

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:33:56.897

未选择的`TabItem`不存在于可视树中，但存在于逻辑树中。

将您的呼叫替换为`VisualTreeHelper`等效的呼叫`LogicalTreeHelper`

# asp.net-mvc - MVC 任务控制器

> ID：16101415
> 
> 赞同：2
> 
> 时间：2013-04-19T09:26:25.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我需要在 MVC4 控制器中运行异步任务操作。有些文章说我的控制器需要继承 AsyncController，有些则不需要。

例如在这个示例中：

[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4) 不是。

1.  是哪个？。为了运行异步控制器操作，我的控制器是否需要继承“AsyncController”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:52:23.317

您不需要从异步控制器继承异步操作。下面是示例。

```
public class HomeController : Controller
{
    public async Task<ActionResult> Index()
    {
         DataServiceClient client = new DataServiceClient();
         var cities = await client.GetCitiesAsync();
        return View(cities);
     }
} 
```

# linux - 如何在 linux 中编译 Dos Com 文件？

> ID：16101426
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:26:54.843
> 
> 标签：linux

我有一个在 windows 下的虚拟模式下工作的 ms dos com 文件。
我想编译它并在 linux 下运行它。
如何在linux中编译dos com文件？
谢谢你 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:36:46.040

您不必“编译”它，它已经编译为二进制代码，但您可以尝试使用适合您发行版的 Dosbox 版本运行它：http: [//www.dosbox.com/](http://www.dosbox.com/)

# java - MediaPlayer / VideoView 不播放视频？

> ID：16101427
> 
> 赞同：0
> 
> 时间：2013-04-19T09:26:58.223
> 
> 标签：java, android, video, media-player, android-videoview

我是 android 开发的新手，自学成才，所以可能会出现一些错误，但没有比这更令人恼火的了。我已经查看了我的代码一千次，在多个网站、书籍和论坛中搜索了高低，但我仍然得到同样的错误，所以这是最后的手段。

我只想在活动中播放视频的硬编码路径，这是我的视频投资组合应用程序的一部分。（硬编码路径仅用于测试，稍后我将从相关按钮按下调用每个视频，但仅在我整理播放器之后！）。

这是我的代码：

```
String path = "android.resource://mysite/res/raw/video1"; 

public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_videoplayer);

    VideoView view = (VideoView) this.findViewById(R.id.vv);
    MediaController controller = (MediaController) new MediaController(this);

    controller.setMediaPlayer(view);
    view.setVideoPath(path);
    view.requestFocus();
    view.start();
} 
```

这个片段在我的 VideoPlayer 类中，其中 vv 是 XML 中的 VideoView，video1 是要播放的视频。视频为h.264 mp4，时长1分钟，大小3mb，可以通过默认播放器正常播放。

XML:

```
<VideoView
    android:id="@+id/vv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" /> 
```

活动加载但返回错误“无法播放此视频”。

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:33:36.560

根据Android的[官方文档](http://developer.android.com/guide/appendix/media-formats.html)视频解码支持从android 3.0+添加的MP4（h.264），所以我认为你在3.0以下的版本上播放这个视频。在 android os 版本 3.0+ 的设备上试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:32:16.007

```
 VideoView view = (VideoView) this.findViewById(R.id.vv);

        view.setVideoPath(path);
        view.setMediaController(new MediaController(this));
        view.requestFocus();
        view.start(); 
```

像这样使用。希望这会给你一些解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-27T14:19:03.423

Did you try
MediaController mc = new MediaController(this); mc.setAnchorView(vv);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T06:48:25.750

尝试这个..

```
video0=(VideoView)findViewById(R.id.vv);
video0.setMediaController(new MediaController(this));
video0.setVideoURI(Uri.parse("android.resource://" +getPackageName()+ "/" +R.raw.video1));
video0.requestFocus();
video0.start(); 
```

# android - Android Opengl ES 最大纹理数

> ID：16101429
> 
> 赞同：6
> 
> 时间：2013-04-19T09:27:08.827
> 
> 标签：android, opengl-es, textures, max

我是一名 Android 开发人员，第一次尝试使用**OpenGL ES 1.0**来显示大量方形对象，并在其上映射纹理。这些纹理取自大型位图，稍后我可能会按比例缩小。

有谁知道我如何找出我的设备将支持的**最大纹理数量（以编程方式）？**

我假设最大数量将取决于纹理的大小和压缩状态等因素。但我找不到任何文档提到这个限制是什么，或者如何解决它。

我希望能够渲染**100,000 个**纹理映射的方形对象，但不确定这是否可以在我的设备上实现。

这是针对非标准 Android 设备的，因此如果官方发布的设备存在这样的规范，则没有此类规范。**它是运行Android 4.1**的非移动定制设备，具有 1 GB 内存。

帮助或建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T11:24:05.930

您可以获得最大数量的纹理大小可用使用

```
 int[] maxTextureSize = new int[1];
  GLES10.glGetIntegerv(GLES10.GL_MAX_TEXTURE_SIZE, maxTextureSize, 0); 
```

您的结果将在 maxTextureSize[0]

# xml - 本地存储的图像未显示在 XSL 输出中

> ID：16101430
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:09.573
> 
> 标签：xml, xslt, xslt-1.0

我正在使用以下 xsl 代码在 html 上显示图像。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="html"/>
<xsl:template match="/">
    <img src="http://www.tizag.com/pics/htmlT/sunset.gif"  alt="MM"/>
    <img src="c:\view.png" alt=""/>
</xsl:template>
</xsl:stylesheet> 
```

我只在 html 上看到第一个图像，即来自[http://www.tizag.com/pics/htmlT/sunset.gif](http://www.tizag.com/pics/htmlT/sunset.gif)的图像，但来自第二个图像（来自“C:\view.png”）没有得到显示。

对于存储在 xml 所在文件夹中的图像，其行为相同。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:31:41.690

检查显示 XSLT 转换结果的浏览器的错误控制台，它可能向您显示不允许本地文件系统访问的错误或警告消息。

或者尝试是否使用 URI 而不是文件路径，即`<img src="file:///C:/view.png"/>`改进。

# wpf - 在按下按钮时重新评估 CommandParameter

> ID：16101434
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:22.377
> 
> 标签：wpf

这是一个快速的问题。我有一个这样定义的 XAML：

```
<ComboBox Height="25" Width="150" Margin="10,0,0,0" VerticalAlignment="Top"
HorizontalAlignment="Left" ItemsSource="{Binding Path=Simulations}"
IsSynchronizedWithCurrentItem="True" SelectedItem="{Binding Path=Simulation}"/>

<ScrollViewer HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
Content="{Binding Path=Simulations.CurrentItem.OptionsPanel}"/>

<Button Content="Simulate" Height="23" HorizontalAlignment="Center" 
Margin="0,0,0,20"  VerticalAlignment="Bottom" Width="75"
Command="{Binding Path=Simulations.CurrentItem.SimulateCommand}"
CommandParameter="{Binding Path=Simulations.CurrentItem.CommandParameter}"/> 
```

我想要实现的是，当用户从组合框中选择一个模拟时，会显示一个面板，其中包含特定于所选模拟的控件。每个模拟都有自己独特的参数集，因此，每个模拟都需要一个独特的“模拟”命令。上面的 XAML 几乎完全按照要求工作。当用户选择模拟时，特定的用户控件被插入到 ScrollViewer 中，并为按钮设置了适当的命令。我遇到的问题是CommandParameter。在模拟选择后立即对其进行评估，但当时大多数选项仍然为空，因为用户还没有机会修改它们。所以，基本上，我需要的是在按下按钮时强制重新评估 CommandParameter。也许有人可以帮忙，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:28:37.117

假设您`CommandParameter`是您的类的一个属性`Simulation`，您需要确保您的 Simulation 类将 CommandParameter 属性实现为 a `DependencyProperty`，或者 Simulation 类本身应该在其属性`INotifyPropertyChanged`上发送更改通知来实现。`CommandParameter`

如果实现了这些方法中的任何一种，那么您的 CommandParameter 属性应在更改按钮的命令属性时更新

# scripting - 重命名 vbscript 进程

> ID：16101435
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:22.367
> 
> 标签：scripting, vbscript, wsh, scripting-language

当我们在进程中运行`*.vbs`文件时，我们通常会获取`"wscript.exe"`. 我们可以`"wscript.exe"`通过创建快捷方式并执行快捷方式将其更改为我们的自定义名称。

是否可以在不使用快捷方式的情况下显示当前`*.vbs`文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:46:17.877

不。您的脚本正在解释器中运行，并且它是显示在进程列表中的解释器可执行文件名称。

虽然更改进程名称并非不可能，但您需要管理员权限才能执行此操作，并且您需要重写解释器 ( `wscript.exe`) 才能实际执行此操作。请参阅此对类似问题的[答案。](https://stackoverflow.com/a/3734473/1630171)

# gwt - 在 IE 的 GWT-RichTextArea 中禁用水平滚动条

> ID：16101436
> 
> 赞同：1
> 
> 时间：2013-04-19T09:27:22.830
> 
> 标签：gwt

如何在 gwt-richtextarea 中禁用水平滚动条

我应用了overflow-x:hidden，在firefox上工作正常，但在IE上不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:46:49.380

`RichTextArea`使用`iframe`嵌入可编辑的 html 文档。

当您将样式设置为丰富区域时，您将它们设置为`iframe`元素，但在您的情况下，您必须将样式设置`body`为`iframe #document`.

这里的问题是如何获取 iframe 的内容文档，你必须使用 jsni，或者使用像[gwt-query](https://code.google.com/p/gwtquery/)这样的 3party 库。

这适用于 qQuery：

```
 import static com.google.gwt.query.client.GQuery.*;

    RichTextArea area = new RichTextArea();
    RootPanel.get().add(area);

    $(area).contents().find("body").css($$("overflow-x: hidden")); 
```

另一个问题是 iframe 中可编辑文档的创建在 gwt 中延迟。因此，如果您延迟样式设置，使用`Timer`.

使用 gquery，您可以使用该`delay()`方法

```
 $(area).delay(100, 
    lazy().contents().find("body").css($$("overflow-x: hidden")).done()
  ); 
```

# eclipse-plugin - 如何为在 IBM Notes 中运行的插件设置首选项

> ID：16101438
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:28.283
> 
> 标签：eclipse-plugin, lotus-notes

我为 IBM Notes 编写了一个插件——一个站点栏插件。

使用策略我可以将我的插件发布给最终用户，但是否需要推送偏好？

在 extension.xml 中有一个称为首选项的节点作为 webcontextConfiguration 的子节点 - 我可以以及如何使用它？

链接： [为 IBM Lotus Notes 标准客户端开发插件的最佳实践](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/Best_practices_for_developing_plug-ins_for_a_IBM_Lotus_Notes_standard_client)

链接：[为 Lotus Notes 和 Sametime 部署插件和小部件](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/Deploying_Plugins_and_Widgets_for_Lotus_Notes_and_Sametime)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:43:31.327

要推出插件首选项，您可以使用桌面策略。打开后，选择“自定义设置”选项卡，然后选择该选项下的“托管设置”选项卡。

单击“编辑列表...”对话框将让您指定要下推的插件名称、键和值。

以下链接提供了更多详细信息。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin85.doc/H_USING_POLICIES_TO_ASSIGN_MANAGED_SETTINGS_TO_NOTES_CLIENT_USERS_STEPS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin85.doc/H_USING_POLICIES_TO_ASSIGN_MANAGED_SETTINGS_TO_NOTES_CLIENT_USERS_STEPS.html)

# jsp - servlet 和 jsp 中的会话跟踪

> ID：16101440
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:31.047
> 
> 标签：jsp, session, servlets, sessiontracking

我首先在 jsp 中创建了一个登录面板（index.jsp），用户在其中输入用户名和密码，在提交时进入一个 servlet（登录），该 servlet（登录）检查用户的真实性并在验证后将其带到主页（home.jsp）。

我想在他/她登录后存储用户信息，所以我在我的 servlet(login) 中实现了 seession，如下所示

```
response.sendRedirect("shome.jsp");
HttpSession sr=request.getSession(true);
sr.setAttribute("no", u); 
```

（你是我的字符串变量）

现在我怎样才能在 home.jsp 中检索 no 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:36:33.343

`no`应该在引号内。

```
sr.setAttribute("no", u); 
```

在 JSP 中提供这样的

```
<%
String username=(String)session.getAttribute("no");
%> 
```

`username`并在 JSP 的任何地方使用字符串

例子

```
<H1>Your User name is: <%=username%>.</H1> 
```

# ios - CGAffineTransform 旋转和调整滑块值

> ID：16101441
> 
> 赞同：2
> 
> 时间：2013-04-19T09:27:31.813
> 
> 标签：ios, objective-c, rotation, uislider, cgaffinetransform

我`Slider`习惯`Resize`和`Rotate`-

对于旋转 -

```
 CGAffineTransform transform = editingView.transform;
  transform =  CGAffineTransformMakeRotation(sliderVal * 2*M_PI / 30);
  editingView.transform = transform; 
```

对于调整大小-

```
CGAffineTransform t = CGAffineTransformMakeScale(sliderVal/30, sliderVal/30);
  CGPoint center = editingView.center; 
  [UIView animateWithDuration:0.5
                   animations:^{
                      editingView.transform = t;
                     editingView.center = center;
                   }
                   completion:^(BOOL finished) {

                   }]; 
```

使用上面的代码，两者都可以正常工作。

但我必须`resize`旋转视图，或者旋转调整大小的视图。

我看到许多建议来自不同的行为，因为我正在使用`CGAffineTransformMakeRotation`, `CGAffineTransformMakeScale`，如果我使用`CGAffineTransformScale`，`CGAffineTransformRotation`那么我的问题将得到解决。

问题是当我使用时`CGAffineTransform`缩放不正确，`View`从屏幕上消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:34:53.407

您正在使用`editingView.transform`线设置视图的转换矩阵。

您应该更改旋转代码：

```
CGAffineTransform transform = editingView.transform;
transform =  CGAffineTransformMakeRotation(sliderVal * 2*M_PI / 30);
editingView.transform = CGAffineTransformConcat(editingView.transform, transform); 
```

并调整大小：

```
CGAffineTransform t = CGAffineTransformMakeScale(sliderVal/30, sliderVal/30);
CGPoint center = editingView.center; 
[UIView animateWithDuration:0.5
                   animations:^{
                      editingView.transform = CGAffineTransformConcat(editingView.transform,t);
                      editingView.center = center;
                   }
                   completion:^(BOOL finished) {

                   }]; 
```

与`CGAffineTransformConcat`您一起添加 2 个变换矩阵，这样您就不会丢失旧的变换。您可以使用`CGAffineTransformIdentity`重置转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:14:32.107

```
 CGAffineTransform translate = CGAffineTransformMakeTranslation(self.webView.frame.origin.x,self.webView.frame.origin.y - self.webView.frame.size.height * 0.25);
        CGAffineTransform scale = CGAffineTransformMakeScale(0.6, 0.6);
        CGAffineTransform transform =  CGAffineTransformConcat(translate, scale);
        transform = CGAffineTransformRotate(transform, degreesToRadians(-10));

        [UIView beginAnimations:@"MoveAndRotateAnimation" context:nil];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; 
            [UIView setAnimationDuration:2.0];

            editingView.transform = transform;

        [UIView commitAnimations]; 
```

试试这样...

# java - 过滤坏词 | java'替换'

> ID：16101443
> 
> 赞同：0
> 
> 时间：2013-04-19T09:27:34.053
> 
> 标签：java, filter, replace

为了过滤坏词，我发现java中的'replace'函数并不像预期的那么方便。请在代码下方找到：例如：考虑单词“abcde”，我想将其过滤为“a***e”。

```
 String test = "abcde";
    for (int i = 1; i < sdf.length() - 1; i++) {
        test= test.replace(test.charAt(i), '*');
    }
    System.out.print(test); 
```

输出 ：`a***e`

但如果 String 为`String test = "bbcde";`，则输出为`****e`。看来，如果单词有重复的字母（如这里），该`replace`函数也会替换重复的字母。为什么会这样？我想过滤不包括第一个和最后一个字母的单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:33:41.247

这是因为`String.replace(char, char)`替换*所有*出现的第一个字符（根据其[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)）。

你想要的可能更像这样：

```
char[] word = test.toCharArray();
for (int i = 1; i < word.lengh - 1; i++) { // make sure to start at second char, and end at one-but-last char
    word[i] = '*';
}
System.out.println(String.copyValueOf(word)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:33:51.827

由于`String.replace(char, char)`替换了所有出现的指定字符，这将是满足您要求的更好方法：

```
String test = "abcde";
String replacement = "";
for (int i = 0; i < sdf.length(); i++) {
    replacement += "*";
}
test= test.replace(sdf, replacement );
System.out.print(test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:33:56.980

您应该使用 replaceAll-Function: [Link](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

有了这个，您可以替换所有在字符串中找到给定子字符串（fe“abcde”）并将所有这些替换为另一个字符串（fe“a***e”）。

```
String test = "abcde";
String replacement = "";
for (int i = 0; i < test.length(); i++) {
    if (i==0 || i==test.length()-1){
        replacement += test.charAt(i);
    } else {
        replacement += "*";
    }
}
sdf = sdf.replaceAll(test, replacement);
System.out.print(test); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T09:35:27.580

> 看起来，如果单词有重复的字母（如这里），replace 函数也会替换重复的字母。为什么会这样？

为什么？因为这就是它的工作原理，正如 API 文档`String.replace(char oldChar, char newChar)`所说：

> `oldChar`返回一个新字符串，该字符串是用 替换此字符串中所有出现的`newChar`。

如果你只是想用第一个字母，一些星号和最后一个字母来替换字符串的内容，那么你根本不需要使用`replace`。

```
String test = "abcde";

if (test.length() >= 1) {
    StringBuilder result = new StringBuilder();
    result.append(test.charAt(0));
    for (int i = 0; i < test.length() - 2; ++i) {
        result.append('*');
    }
    result.append(test.charAt(test.length() - 1));
    test = result.toString();
}

System.out.println(test); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:36:04.597

```
public static void main(String[] args) {

    String test = "bbcde";
    String output = String.valueOf(test.charAt(0));
    for (int i = 1; i < test.length() - 1; i++) {
        output = output + "*";
    }
    output = output + String.valueOf(test.charAt(test.length() - 1));
    System.out.print(output);
} 
```

# c# - 制作透明标签背景？

> ID：16101445
> 
> 赞同：2
> 
> 时间：2013-04-19T09:27:51.090
> 
> 标签：c#, winforms, tabs, transparent, tabpage

我想知道我是否可以在 C# 透明中绘制标签页的背景，这样我就可以看到窗口本身的后面。我虽然它会产生很酷的效果，但我不知道是否或如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:10:59.803

您可以将TabControl的**Appearance属性设置为****Buttons**而不是使用 BackColor 属性。这将带来透明的标签页外观和酷炫的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:42:21.437

VB & C# 语法

```
TabPage1.BackColor = Color.Transparent 
```

这会将 tabpage1 颜色显示为表单颜色。

# python - 具有浮点值范围的 matplotlib 2d 数据

> ID：16101450
> 
> 赞同：0
> 
> 时间：2013-04-19T09:28:01.710
> 
> 标签：python, matplotlib

我一直在努力让它像我想要的那样工作，但我似乎无法以正确的方式得到它。问题如下，我有一些由 x, y 的函数生成的 2D 数据，我试图在 pylab.figure 上显示这些数据。

输入数据如下所示：

```
range1_labels = [0.002, 0.006, 0.010, 0.014, 0.018]
range2_labels = [10, 25, 80]
data_values = 2d array with dimensions (len(x_values), len(y_values)) 
```

从这个使用 scipy 的 RectBivariateSpline 我生成 600 x 600 的值，我现在想在 pylab.figure 上显示这个生成的数据，但在这些间隔中有 x 和 y 轴标签的值。到目前为止所做的尝试：

```
 axes = figure.gca()
    img = axes.matshow(posteriori_data)
    axes.set_title("Interpolated values") 
    figure.colorbar(img)

    axes.set_yticks(range(len(range2_labels)), range2_labels)
    axes.set_xticks(range(len(range1_labels)), range1_labels) 
```

这种尝试仍然给我两个轴的标签 [0, 100, 200, 300, 400, 500]。

我尝试的另一件事是：

```
 axes = figure.gca()
    img = axes.matshow(posteriori_data, extent=(min(range1_labels), max(range1_labels),
                                                min(range2_labels), max(range2_labels)),
                       aspect='auto')
    axes.set_title("Interpolated values") 
    figure.colorbar(img) 
```

这似乎更接近我想要的。对于“较大”轴，标签会正确生成，即使在缩放时也会正确重新计算。因此，在上面的示例中，range2 的标签按预期显示，但没有为 range1 生成标签。

任何指针？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:58:50.917

您的问题是您的范围太小，并且刻度定位器无法优雅地处理这个问题。

就像是：

```
data = rand(600,600)
extent = [.002, .018, 10, 80]

ax = gca()
ax.matshow(data, extent=extent, aspect='auto')
ax.get_xaxis().set_major_locator(matplotlib.ticker.LinearLocator(5))

plt.draw() 
```

会做你想做的。

深入研究一下，似乎正在发生的事情，您正在使用`matshow`它是一个为显示矩阵而调整的函数。它设置的定位器是`MaxNLocator`一个标志`integer`，它强制它只在整数值（[doc](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.MaxNLocator)）上放置刻度。如果您正在绘制矩阵，这是有道理的。在您的情况下，您将范围设置为小于 1，因此您不会得到刻度。

另一种解决方案是使用`imshow`

```
data = rand(600,600)
extent = [.002, .018, 10, 80]

ax = gca()
ax.imshow(data, extent=extent, aspect='auto', interpolation='nearest')

plt.draw() 
```

这就是`matshow`实际上所做的（[src](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes.py#L9028)），您可以复制要从该实现中保留的功能，并删除您不想要的功能。

# jquery - Jquery在嵌套跨度中褪色

> ID：16101453
> 
> 赞同：3
> 
> 时间：2013-04-19T09:28:18.283
> 
> 标签：jquery

我最近开始学习 jquery，我决定写一个小插件作为练习。
这是 jsfiddle 链接：http: [//jsfiddle.net/ndanvery/hy4cY/35/](http://jsfiddle.net/ndanvery/hy4cY/35/)

现在我有 2 个问题：

1.  为什么当我单击它时跨度消失然后重新出现？
2.  我想在跨度处于活动状态时在背景上添加一些“模糊”：http: [//jsfiddle.net/ndanvery/hy4cY/34/](http://jsfiddle.net/ndanvery/hy4cY/34/)
    但我不希望跨度是透明的！我是否选择了包装器但在我的语句中省略了 .big 类，对吗？
    `$('#wrapper:not(.big)').addClass("not_focused");`

无论如何，谢谢大家帮助我:)

编辑：
对不起，但我不得不承认我的问题不是很清楚。我在第一个问题中寻找的是一种让跨度在单击时保持可见而不消失的方法！
再次抱歉，造成误解...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:53:48.567

1）你的mouseup中的e.focus不起作用（对我来说它是null），所以你总是进入淡出div的if语句。然后由于事件捕获/冒泡，您的跨度单击处理程序接下来会触发，然后将其淡入。您最好检查您直接单击的元素（使用 e.target）是否不是 .big 跨度，例如：

```
$(document).mouseup(function (e) {
    if(!$(e.target).hasClass(".big")) {
        $(".big").fadeOut("slow");
        $('#wrapper').removeClass("not_focused");
    }
}); 
```

2) 你的选择器 $('#wrapper:not(.big)') 说“找到没有大类的包装器 id 的元素”，这不是你想要的，它只是给你包装器。您正在淡出包装器，它会淡出其中的所有内容。

您可以淡出不是您单击的孩子：

```
$("[id^=span]").click(function () {
    $("[id^=span]").not(this).addClass("not_focused");
    $(this).find('.big').fadeIn("fast");
    $('#wrapper:not(.big)').addClass("not_focused");
    $(this).dequeue();
}); 
```

或者您可以淡出包装器并复制 .big 跨度并将其附加到文档到包装器之后，以便它位于上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:50:43.453

```
$("div[id^=span]").click(function(e) {
    $(this).find('.big').fadeIn("fast");
    $(this).dequeue();
}).find('.big').click(function(e) {
    e.stopPropagation();
}); 
```

试试这个它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:35:46.457

第一个问题的答案：[事件传播](http://www.quirksmode.org/js/events_order.html)

第二个问题的答案是您正在为包装器设置不透明度，这反过来会影响其所有子级的不透明度。如果您只希望包装器的某些内容具有不同的不透明度，则必须选择这些元素并为它们指定不透明度。

# c - 带有省略号的函数导致段错误

> ID：16101454
> 
> 赞同：0
> 
> 时间：2013-04-19T09:28:18.733
> 
> 标签：c, segmentation-fault, ellipsis

我有以下导致段错误的代码

```
 #define MAPGW_CM_TRACE(...) mapgw_cm_trace(__VA_ARGS__) 
```

函数定义是这样的..

```
 int mapgw_cm_trace(int trapLog, char *pcMsgId, ...)
   { //do something

    } 
```

我正在调用这样的函数..：

```
 MAPGW_CM_TRACE(1,"<some String>", 
                23,233, 4783274, 2138123, 23123, 21312,23112); 
```

我知道我可能对省略号的了解较少。请帮我解决。
提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:36:26.757

我无法准确猜测崩溃的原因。

但请改用以下宏定义

```
#define MAPGW_CM_TRACE(TRAP,MSGID,args...) mapgw_cm_trace(TRAP,MSGID,##args); 
```

看看它是否修复了崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:36:37.177

什么是pcMsgId，它是一个格式字符串吗？在这种情况下，每个数字（%d、%u、%ld或%lu）都需要一个匹配的%，如果pcMsgId不是格式字符串，那么mapgw_cm_trace如何函数知道参数何时结束，对于指针数组，它通常是尾随 NULL，对于其他类型，通常有一个 count 参数。通常情况下，如果 pcMsgId 不是格式字符串，则以下参数都与 pcMsgId 属于同一类型。基本上如何确定 pcMsgId 之后的参数数量。

# codeigniter - 添加第二个数据库连接

> ID：16101455
> 
> 赞同：1
> 
> 时间：2013-04-19T09:28:30.787
> 
> 标签：codeigniter

我尝试在我的 CI 应用程序中添加第二个数据库连接。第一个由以下方式初始化：

```
$autoload['libraries'] = array('database', 'session'); 
```

我现在如何访问我的模型中的第二个数据库连接？我试过这个：

```
class Configurator_model extends CI_Model{

private $db2 = null;

function __construct()
{
    parent::__construct();
    $this->db2 = $this->load->database('configurator', TRUE);
}

public function all(){
    $query = $this->db2->get('projects');
    var_dump($query);
    if($query->num_rows()>0){
        return $query->result_array();
    }
}

} 
```

但没有结果。Var_dump 返回：

> object(CI_DB_mysql_result)#22 (8) { ["conn_id"]=> resource(47) of type (mysql link persistent) ["result_id"]=> resource(48) of type (mysql result) ["result_array"] => array(0) { } ["result_object"]=> array(0) { } ["custom_result_object"]=> array(0) { } ["current_row"]=> int(0) ["num_rows"] => int(0) ["row_data"]=> NULL }

数据库在配置中是这样配置的：

```
...
$db['configurator']['hostname'] ...
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:58:24.597

我在[CodeIgniter Userguide](http://ellislab.com/codeigniter/user-guide/general/models.html)上看到了这个希望这有帮助。

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = "mydatabase";
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;

$this->load->model('Model_name', '', $config); 
```

您可以将数据库保存在`$cconfig`变量的元素中，例如 `$config['second_db'] 并将此配置加载到控制器中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T09:31:52.977

查看连接到多个数据库：[http ://ellislab.com/codeigniter/user-guide/database/connecting.html](http://ellislab.com/codeigniter/user-guide/database/connecting.html)

# calendar - ios 6.1.3：没有设置日历

> ID：16101457
> 
> 赞同：1
> 
> 时间：2013-04-19T09:28:35.777
> 
> 标签：calendar, ios6.1

我正在尝试在运行 ios 6.1.3 的设备上保存一个事件，但是我不断收到错误消息“未设置日历”。

我已经使用 requestAccessToEntity:completion: 来获得用户权限，但是即使用户允许访问，EventStore 仍然会出错。

该应用程序在模拟器和运行 ios 6.0 的设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T22:07:51.870

我在 6.1.3 和 6.1.4 上看到过同样的问题。

如果您尝试在 的完成块中`requestAccessToEntity:completion:`创建事件，如果您还创建了`EKCalendar`.

脚步：

1.  称呼`requestAccessToEntity:completion:`
2.  如果成功，创建新的`EKCalendar`内部完成块
3.  在完成块之外，`EKEvent`使用你的新创建你的新`EKCalendar`并添加它

# node.js - 如何获取mongodb中的所有集合

> ID：16101462
> 
> 赞同：0
> 
> 时间：2013-04-19T09:28:47.827
> 
> 标签：node.js, mongodb

我的查询是这样的

```
var db = new Db('NodeZMQ', new Server('192.168.3.110', 27017, { auto_reconnect: true }));

db.collection('clsSession', function (err, collection)
{
    collection.findOne({ "code": { "$in": ["eventCode"] }, "Venue.allowSales": true, "status": "O", "Venue.companyCode": "companyCode" }, function (err, document)
    {
        console.log(document);
    });
}); 
```

它提供一份文件。实际上它有很多文件..因为我使用的是 findOne 它就是这样..如何获取所有匹配的文件？我正在使用 node.js 和 mongodb。我是 mongoDB 和 node.js 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:34:32.680

使用`collection.find(`而不是`collection.findOne(`. 这将返回一个游标对象，您可以使用它来迭代结果。

游标是一个有很多方法的对象。您会发现最有帮助的是方法[.hasNext()](http://docs.mongodb.org/manual/reference/method/cursor.hasNext/)检查是否还有未处理的文档和[.next()](http://docs.mongodb.org/manual/reference/method/cursor.next/)方法，它会为您提供下一个文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:59:55.463

```
var db = new Db('NodeZMQ', new Server('192.168.3.110', 27017, { auto_reconnect: true }));

db.collection('clsSession', function (err, collection)
{
collection.find({ "code": { "$in": ["eventCode"] }, "Venue.allowSales": true, "status":    "O", "Venue.companyCode": "companyCode" }).toArray(function (err, document)
{
    //here document is an array contains all the matching reocrds
    console.log(document);
});
}); 
```

此示例基于您使用 mongo-native 驱动程序的假设，但它有助于解决您的问题。

# c# - 使用 LINQ 访问文件夹

> ID：16101463
> 
> 赞同：1
> 
> 时间：2013-04-19T09:28:49.123
> 
> 标签：c#, .net, linq

我想使用 LINQ 访问特殊文件夹

```
var s1 = (from folder in new DirectoryInfo(@"C:\Users\" + Environment.UserName + Environment.SpecialFolder.Desktop).GetDirectories()  
                          select folder).ToList(); 
```

我正在使用此代码，但无法检索数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:35:01.407

1.  System.IO 和 Linq 不是最好的朋友，因为您想处理文件级别的异常以及延迟执行和磁盘访问很困难
2.  使用`Path`类创建路径，例如`Path.Combine(part1, part2, ...)`
3.  如果您只需要路径，则不需要`DirectoryInfo`该类，使用静态`Directory`或`File`类似的方法`Directory.GetDirectories`
4.  您通过以下方式获得桌面`Environment.GetFolderPath(Environment.SpecialFolder.Desktop);`
5.  你根本不需要 Linq：

    ```
    string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    string[] directories = Directory.GetDirectories(path, "*.*", SearchOption.AllDirectories); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:31:51.417

要获取 Desktop 文件夹中的所有文件，包括子文件夹中的任何文件，我将使用以下代码：

```
 string desktopPath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
  List<FileInfo> s1 = new DirectoryInfo(desktopPath).GetFiles("*.*", SearchOption.AllDirectories).ToList(); 
```

这可能对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:31:53.463

您在用户名和桌面之间缺少反斜杠：

```
@"C:\Users\" + Environment.UserName + Environment.SpecialFolder.Desktop 
```

但它更容易使用：

```
Environment.GetFolderPath(Environment.SpecialFolder.Desktop); 
```

这将返回整个路径，无需硬编码`c:\users\`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T09:32:20.270

*   看来你应该试试`Path.Combine`。
*   `Environment.SpecialFolder.Desktop`不是字符串，所以必须将其转换为字符串。

所以试试这个：

```
var desktop = System.IO.Path.Combine(@"C:\Users\", Environment.UserName, Environment.SpecialFolder.Desktop.ToString());
var result = (from folder in new DirectoryInfo(desktop).GetDirectories()
                  select folder).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:31:44.660

您需要在和`\`之间添加反斜杠 ( ) 。`Environment.UserName``Environment.SpecialFolder.Desktop`

例如

```
var desktopFolder = string.Format(
    @"C:\Users\{0}\{1}",
    Environment.UserName,
    Environment.SpecialFolder.Desktop);

var s1 = (from folder in new DirectoryInfo(desktopFolder).GetDirectories()
          select folder).ToList(); 
```

# php - Zend DB 获得不同的计数

> ID：16101466
> 
> 赞同：0
> 
> 时间：2013-04-19T09:29:08.310
> 
> 标签：php, mysql, zend-framework

嗨，我有以下查询结果：

```
 public function getCityCategory($city_id)
        {
            $select = $this->getDbTable()->getAdapter()->select();
            $select->from('business as b', array('b.cat_id'))
                 ->joinInner('business_category as bc','b.cat_id = bc.cat_id',array('bc.cat_name'))
                 ->where('b.city_id='.$city_id);
$result = $this->getDbTable()->getAdapter()->fetchAll($select);
            return $result;    
        }

Array
(
    [0] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

    [1] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

    [2] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

    [3] => Array
        (
            [cat_id] => 5
            [cat_name] => Arts & Entertainment
        )

    [4] => Array
        (
            [cat_id] => 11
            [cat_name] => Hotels & Travel
        )

    [5] => Array
        (
            [cat_id] => 7
            [cat_name] => Nightlife
        )

    [6] => Array
        (
            [cat_id] => 20
            [cat_name] => Financial Services
        )

    [7] => Array
        (
            [cat_id] => 22
            [cat_name] => Attractions
        )

    [8] => Array
        (
            [cat_id] => 2
            [cat_name] => Active Life
        )

    [9] => Array
        (
            [cat_id] => 22
            [cat_name] => Attractions
        )

    [10] => Array
        (
            [cat_id] => 7
            [cat_name] => Nightlife
        )

    [11] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

    [12] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

) 
```

现在，当我添加不同的上述代码时，查询返回特定的所有类别，`city_id`我得到以下结果：

```
public function getCityCategory($city_id)
        {

          $select = $this->getDbTable()->getAdapter()->select();
            $select->from('business as b', array('b.cat_id'))
                 ->joinInner('business_category as bc','b.cat_id = bc.cat_id',array('bc.cat_name'))
                 ->distinct()
                 ->where('b.city_id='.$city_id);
   $result = $this->getDbTable()->getAdapter()->fetchAll($select);
            return $result;    
        }

Array
(
    [0] => Array
        (
            [cat_id] => 1
            [cat_name] => Restaurants
        )

    [1] => Array
        (
            [cat_id] => 5
            [cat_name] => Arts & Entertainment
        )

    [2] => Array
        (
            [cat_id] => 11
            [cat_name] => Hotels & Travel
        )

    [3] => Array
        (
            [cat_id] => 7
            [cat_name] => Nightlife
        )

    [4] => Array
        (
            [cat_id] => 20
            [cat_name] => Financial Services
        )

    [5] => Array
        (
            [cat_id] => 22
            [cat_name] => Attractions
        )

    [6] => Array
        (
            [cat_id] => 2
            [cat_name] => Active Life
        )

) 
```

现在的问题是如何在最后一个查询中添加计数，以便我可以获得每个类别的业务总数，因为不同的删除重复类别？所以最终的结果应该是这样的

```
[0] => Array
            (
                [cat_id] => 1
                [cat_name] => Restaurants
                [count] => 5
            ) .... 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:45:23.943

利用

```
 count(cat_name) as count 
```

接着

```
group by cat_name 
```

# java - java.net.ConnectException：无法连接到 /192.168.10.110 连接失败：ECONNREFUSED（连接被拒绝

> ID：16101467
> 
> 赞同：0
> 
> 时间：2013-04-19T09:29:12.850
> 
> 标签：java, android, sockets, ip, client

**第一个问题：** 我正在使用套接字编程进行消息传递。以前它工作正常，但目前当我将服务器和客户端都连接到同一个路由器时它显示异常。

**第二个问题：** 如果我将服务器和客户端连接到不同的网络，它就无法工作客户端无法连接服务器的 IP 地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:32:46.793

192.168.0.0/16 是一个局域网地址块。

此外，如果您的服务器机器配置为使用 DHCP 而不是静态地址，则每次将其连接到（相同）路由器时，它可能会收到不同的本地地址。

# html - 此时元素时间不允许属性 pubdate

> ID：16101472
> 
> 赞同：11
> 
> 时间：2013-04-19T09:29:22.587
> 
> 标签：html, html-validation

我有一个包含以下元素的 HTML 5 文档：

```
<time datetime='2013-04-18T12:57:59+01:00' pubdate='pubdate'>Thu, 18 Apr 2013 at 0:57PM</time> 
```

这不验证。错误是“此时元素时间不允许属性发布日期。”

知道如何纠正此验证错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-27T15:05:49.133

我对这个主题做了一些研究，似乎解决这个问题的最好方法是使用`itemprop="datePublished"`属性。

查看[在 w3.org 上发布的代码示例](http://www.w3.org/html/wg/drafts/html/master/#the-time-element)：

```
<article itemscope itemtype="http://schema.org/BlogPosting">
  <h1 itemprop="headline">Small tasks</h1>
  <footer>Published <time itemprop="datePublished" datetime="2009-08-30">yesterday</time>.</footer>
  <p itemprop="articleBody">I put a bike bell on his bike.</p>
</article> 
```

像这样更改了我的代码，现在验证通过了。

`itemprop="published"`使用`fictional microdata vocabulary`. 这里也是成功验证的代码：

```
Posted on <time itemprop="published" datetime="2014-06-24T17:00:00+00:00">June 24, 2014</time> 
```

**注意：**正如 xmojmr 所评论的，`itemprop`必须适当`itemscope itemtype="..."`地进行正确验证。

**参考**

*   [schema.org/文章](http://schema.org/Article)
*   [schema.org/docs/gs.html#microdata_itemscope_itemtype](http://schema.org/docs/gs.html#microdata_itemscope_itemtype)
*   [关于丰富网页摘要和结构化数据](https://support.google.com/webmasters/answer/99170?hl=en)中的“Google 建议使用微数据”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T13:14:39.083

可能是从规范中删除了 pubdate 属性。所以不要使用发布日期。

# mysql - 使用两个索引列时缓慢的 mySQL 查询

> ID：16101473
> 
> 赞同：0
> 
> 时间：2013-04-19T09:29:23.397
> 
> 标签：mysql, select, indexing

我有一个 mySQL 表 (myISAM)，其中包含大约 200 万行 - 姓名、地址、公司数据。名字和姓氏分别保存在不同的列中，因此我还有第二个表（由第一个表的主键链接），其中包含一个全名列。

第一个表中的名字、姓氏和公司名称（以及其他）被索引，辅助表中的全名列也是如此。

以此查询为起点：

```
SELECT * FROM table_a INNER JOIN table_b ON table_a.ID = table_b.ID WHERE.... 
```

在名称列上搜索完全匹配甚至类似之后的工作以毫秒为单位：

```
....table_a.first_name = 'Fred'
....table_a.surname = 'Bloggs'
....table_b.fullname = 'Fred Bloggs'
....table_a.first_name LIKE 'Mike%' 
```

只是几个例子。

将公司名称也扔在那里......查询突然需要 15 到 20 秒：

```
....table_a.first_name = 'Fred' OR table_a.company_name = 'Widgets Inc' 
```

例如

两个字段都被索引，这是一个完全匹配......为什么添加第二个索引搜索列会减慢速度？我错过了关于我的桌子设计的一些东西吗？

示例如下 - 加入了一些其他表，但我不确定这些是否会影响性能：在 0.0123 秒内返回的仅名称查询示例：

```
SELECT SQL_CALC_FOUND_ROWS 
    webmaster.dupe_master_id AS webmaster_id, 
    webmaster.first_name, 
    webmaster.family_name, 
    webmaster.job_title, 
    webmaster.company_name, 
    webmaster.address_1, 
    webmaster.address_2, 
    webmaster.town_city, 
    webmaster.state_county, 
    webmaster.post_code, 
    webmaster.email, 
    webmaster.ignored, 
    countries.country_name, 
    GROUP_CONCAT(DISTINCT titles.code ORDER BY code ASC) AS sub_string, 
    '' AS expo_string 
FROM 
    (`webmaster`) 
    LEFT JOIN `countries` ON `countries`.`country_id` = `webmaster`.`country_id` 
    LEFT JOIN `red_subscriptions` ON `red_subscriptions`.`webmaster_id` = `webmaster`.`webmaster_id` AND red_subscriptions.subscription_status_id = 2 
    LEFT JOIN `titles` ON `titles`.`title_id` = `red_subscriptions`.`title_id` 
    LEFT JOIN `webmaster_tags` ON `webmaster_tags`.`webmaster_id` = `webmaster`.`webmaster_id` 
    LEFT JOIN `tags` ON `tags`.`tag_id` = `webmaster_tags`.`tag_id` 
    INNER JOIN `webmaster_search_data` ON `webmaster`.`webmaster_id` = `webmaster_search_data`.`webmaster_id` 
WHERE 
    (full_name = '<name>') 
GROUP BY 
    `webmaster`.`dupe_master_id` 
LIMIT 50 
```

添加 company_name （也被索引），查询时间通过屋顶：

```
SELECT SQL_CALC_FOUND_ROWS 
    webmaster.dupe_master_id AS webmaster_id, 
    webmaster.first_name, 
    webmaster.family_name, 
    webmaster.job_title, 
    webmaster.company_name, 
    webmaster.address_1, 
    webmaster.address_2, 
    webmaster.town_city, 
    webmaster.state_county, 
    webmaster.post_code, 
    webmaster.email, 
    webmaster.ignored, 
    countries.country_name, 
    GROUP_CONCAT(DISTINCT titles.code ORDER BY code ASC) AS sub_string, 
    '' AS expo_string 
FROM 
    (`webmaster`) 
    LEFT JOIN `countries` ON `countries`.`country_id` = `webmaster`.`country_id` 
    LEFT JOIN `red_subscriptions` ON `red_subscriptions`.`webmaster_id` = `webmaster`.`webmaster_id` AND red_subscriptions.subscription_status_id = 2 
    LEFT JOIN `titles` ON `titles`.`title_id` = `red_subscriptions`.`title_id` 
    LEFT JOIN `webmaster_tags` ON `webmaster_tags`.`webmaster_id` = `webmaster`.`webmaster_id` 
    LEFT JOIN `tags` ON `tags`.`tag_id` = `webmaster_tags`.`tag_id` 
    INNER JOIN `webmaster_search_data` ON `webmaster`.`webmaster_id` = `webmaster_search_data`.`webmaster_id` 
WHERE 
    (full_name = '<name>' OR company_name '<name>') 
GROUP BY 
    `webmaster`.`dupe_master_id` 
LIMIT 50 
```

仅对全名进行解释：

id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE webmaster_search_data ref webmaster_id,full_name full_name 302 const 94 使用where; 使用临时的；使用文件排序 1 SIMPLE webmaster eq_ref PRIMARY PRIMARY 4 webmaster_search_data.webmaster_id 1
1 SIMPLE countries eq_ref PRIMARY PRIMARY 2 webmaster.country_id 1
1 SIMPLE red_subscriptions ref webmaster_id,subscription_status_id webmaster_id 4 webmaster_search_data.webmaster_id 1 1 SIMPLE
title eq_ref PRIMARY PRIMARY 1 title SIMDLE
webmaster_tags ref webmaster_id webmaster_id 4 webmaster_search_data.webmaster_id 5
1 简单标签 eq_ref PRIMARY PRIMARY 2 webmaster_tags.tag_id 1 使用索引

说明何时添加 company_name：

1 SIMPLE webmaster index PRIMARY,company_name dupe_master_id 4 NULL 2072015 使用文件排序 1 SIMPLE 国家 eq_ref PRIMARY PRIMARY 2 webmaster.country_id 1
1 SIMPLE red_subscriptions ref webmaster_id,subscription_status_id webmaster_id 4 webmaster.webmaster_id 1 1 SIMPLE
title eq_ref PRIM_ARY PRIMARY 2 red_PIMARY 标题 2
webmaster_tags ref webmaster_id webmaster_id 4 webmaster.webmaster_id 5
1 SIMPLE tags eq_ref PRIMARY PRIMARY 2 webmaster_tags.tag_id 1 使用索引 1 SIMPLE webmaster_search_data eq_ref webmaster_id,full_name webmaster_id 4 webmaster.webmaster_id 1 使用where

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:47:45.167

MySQL 不能同时使用两个索引。当您输入公司名称时，MySQL 不能再使用 Firstname、Lastname 上的索引，因为现在它必须检查更多列才能获得准确的结果。

它可能正在执行全表扫描。

您可以通过联合来拆分查询，这样您就可以将两列与索引一起使用。

```
SELECT * FROM
( SELECT * FROM table_a 
  INNER JOIN table_b ON table_a.ID = table_b.ID 
  WHERE table_a.first_name = 'Fred' 
  UNION
  SELECT * FROM table_a 
  INNER JOIN table_b ON table_a.ID = table_b.ID
  WHERE table_a.company_name = 'Widgets Inc'
) sub; 
```

每个查询都应单独评估并使用适当的索引。UNION 会处理双打，所以你最终会得到相同的结果。

# iphone - 目标 C：处理对从 NSMutableArray 中删除的对象的引用

> ID：16101475
> 
> 赞同：0
> 
> 时间：2013-04-19T09:29:29.373
> 
> 标签：iphone, ios, objective-c, nsarray, nsmanagedobject

我有一个`NSMutableArray`of `Person`( `NSManagedObject`)，它是 PersonsViewController 的一个属性`UIViewController`（显示为模态），并用作 UITableView 的数据源以列出所有人员。该数组由 Core Data 填充。On `didSelectRowAtIndexPath`I set `selectedPerson`which is an strong, nonatomic property in the presentingViewController.

在 PersonsViewController 中，用户可以从 UITableView 中删除项目。`selectedPerson`如果从数组中删除的项目恰好是 selectedPerson 指向的对象，我该如何处理引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:35:48.067

由于您使用的是属性，因此如果选择它，只需将其设置为 nil ...

```
[personsArray removeObject:personToDelete];
if (self.selectedPerson == personToDelete)
    self.selectedPerson = nil; 
```

那应该释放它并且它应该被释放...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:38:57.457

由于您对所选对象具有强引用，因此在删除期间从数组中删除人员对象不会影响所选人员。

根据 ARC，如果对象至少有一个强引用，它将驻留在内存中。因此，在您的情况下，从数组中删除人员将取消数组对人员对象的强引用，但您仍然有一个使用选定人员指针的强引用。

因此，选定的人成为留在记忆中的有效候选人，您可以无所畏惧地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:40:48.867

简短的回答是`selectedPerson = nil;`。

在 ARC 下，它将删除对对象的强引用，以便可以将其从内存中删除。

在您的代码中，您可以测试

```
if ( selectedPerson ) 
{
    /* do something to that selected person */
} 
```

看看你是否还有一个选定的人。

# java - Foursquare Java SDK：405“此端点仅支持 GET”

> ID：16101477
> 
> 赞同：1
> 
> 时间：2013-04-19T09:29:34.033
> 
> 标签：java, android, foursquare

我在我的 Android 应用程序中实现了一个foursquare-api-java SDK。

[发送https://code.google.com/p/foursquare-api-java/wiki/BasicUsage](https://code.google.com/p/foursquare-api-java/wiki/BasicUsage)中描述的示例请求- 这一切都在模拟器中工作。我一在手机上尝试它就会中断，返回 405“此端点仅支持 GET”错误。

有没有人遇到过同样的问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T09:47:14.897

我在 Android ICS 中遇到了这个问题。

检查这个： [http ://code.google.com/p/foursquare-api-java/issues/detail?id=66](http://code.google.com/p/foursquare-api-java/issues/detail?id=66)

通过从**DefaultIOHandler.java**类中删除*setDoOutput(true)*修复了该错误。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T18:50:33.153

不确定您在做什么，但大多数功能只能作为 GET 使用。用户/自我就是一个例子。

希望这可以帮助。只需将其更改为获取请求而不是发布**

# ruby-on-rails - Rails 后端：Devise + Cancan + Helios

> ID：16101479
> 
> 赞同：2
> 
> 时间：2013-04-19T09:29:38.653
> 
> 标签：ruby-on-rails, devise, cancan

我一直在开发一个需要与远程后端同步的移动应用程序。最近发布了[Helios.io ，这是一个由](http://helios.io)[Mattt Thompson](https://github.com/mattt)开发的开源移动后端框架。我想在我的 Rails 应用程序中使用它，将它与我的核心数据同步。我对它的整合有一些疑问：

*   是否提供用户管理？我应该改用 Devise 之类的东西吗？
*   它是否提供限制资源？我应该改用 Cancan 吗？
*   它是否根据应该与之同步的 Core Data 文件生成模型和控制器？我可以使用自定义代码修改这些文件，否则它们可能会被 Helios 覆盖（例如，当我更改核心数据时）？

# itextsharp - 使用外部 Css 解析 XML

> ID：16101481
> 
> 赞同：5
> 
> 时间：2013-04-19T09:29:39.823
> 
> 标签：itextsharp

好的，我正在将 HTML 从字符串解析为 PDFCEll。

多亏了这里的一些帮助，它工作得很好。

这就是我的做法。

如何使用外部 css 文件，以便我可以使用类而不是 STYLE=""

```
public class XhtmlToListHelper : IElementHandler
{
// Generic list of elements
public List<IElement> elements = new List<IElement>();
// Add the item to the list
public void Add(IWritable w)
{
  if (w is WritableElement)
  {
  elements.AddRange(((WritableElement)w).Elements());
  }
}

    string html = "<ul class=\"list\"><li>html 1</li><li>html 2</li><li>html 3</li></ul>";
    using (TextReader sr = new StringReader(html))
    {
        XMLWorkerHelper.GetInstance().ParseXHtml(XhtmlHelper, sr);
    }
    foreach (var element in XhtmlHelper.elements)
    {
        if (element.IsContent())
        {
            PDFCell.AddElement(element);
        }
    } 
```

现在我已经走到了这一步，但是如何把它全部绑起来却让我望而却步。任何帮助都会受到很大的影响。

```
 HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);
    htmlContext.SetTagFactory(iTextSharp.tool.xml.html.Tags.GetHtmlTagProcessorFactory());
    ICSSResolver cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(false);
    cssResolver.AddCssFile(HttpContext.Current.Server.MapPath("~/Templates/css/core.css"), true); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T13:07:33.013

如果您在[这里查看源代码](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/src/extras/itextsharp.xmlworker/iTextSharp/tool/xml/XMLWorkerHelper.cs#l130)，您应该会看到如何实现它。基本上，您的三行`using`块在大小和复杂性上翻了两番：

```
var XhtmlHelper = new XhtmlToListHelper();
var htmlContext = new HtmlPipelineContext(null);
htmlContext.SetTagFactory(iTextSharp.tool.xml.html.Tags.GetHtmlTagProcessorFactory());
var cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(false);
cssResolver.AddCssFile(@"c:\test.css", true);
var pipeline = new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new ElementHandlerPipeline(XhtmlHelper, null)));//Here's where we add our IElementHandler
var worker = new XMLWorker(pipeline, true);
var parser = new XMLParser();
parser.AddListener(worker);

using (TextReader sr = new StringReader(html)) {
    parser.Parse(sr);
} 
```

# service - 我可以使用 Fiddler 一次发送多个请求吗？

> ID：16101483
> 
> 赞同：12
> 
> 时间：2013-04-19T09:29:48.260
> 
> 标签：service, fiddler

使用 Fiddler，我想一次发送多个请求，以检查服务器的响应时间，如果一次发送的请求太多。基本上，我想对我的服务进行某种负载测试。有什么方法可以执行此操作吗？我想一次又一次地重复访问服务器的过程。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-19T15:30:50.700

在 Fiddler 中，您可以通过在选定的 Web 会话上按 SHIFT+R 来多次重复请求。系统将提示您输入重复计数，然后 Fiddler 将发出指定数量的请求。

警告：话虽如此，一般来说，您希望使用 Telerik Test Studio 的负载测试工具之类的工具来完成这样的任务。或者，您可以使用 Fiddler 的导出架构为 VS WebTest 或 Microsoft 的免费 WCAT 工具生成脚本，并使用这些工具来生成负载。然后，您可以在来自多个网络的多台机器上运行这些脚本，并生成一组比仅在单个客户端上运行更现实的负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-25T20:21:01.447

我今天一直在用[StresStimulus](http://www.stresstimulus.com/)进行负载测试。总的来说，我印象非常深刻。

它现在是一个独立的应用程序（它曾经是一个提琴手扩展）。有 7 天免费试用，最多允许 50 个虚拟用户。此外，设置向导非常适合初学者。

对于基本负载测试，试验应该没问题。考虑升级以供广泛/专业使用。

# windows-phone-7 - 将网格分配给 Windows Phone 中的滚动查看器时出现 0x8000ffff 未处理的异常

> ID：16101484
> 
> 赞同：1
> 
> 时间：2013-04-19T09:29:48.470
> 
> 标签：windows-phone-7, c#-4.0

我正在通过文件后面的代码动态创建一个网格，并将该动态生成的网格分配给存在于**xaml 文件**中的滚动查看器，我正在使用如下语句

```
scroll_viewer.Content=grid 
```

这给了我 Unhandled `Exception 0x8000ffff`。任何人都可以帮助我为什么我得到这个

# jmx - JMX 批处理客户端？

> ID：16101485
> 
> 赞同：0
> 
> 时间：2013-04-19T09:29:51.257
> 
> 标签：jmx, batch-processing

我正在寻找可以从批处理文件调用 mbean 操作的 JMX 客户端。实际上，cron 作业应该通过 Weblogic 服务器中的 JMX 调用操作。

不幸的是，VisualVM 不能在批处理模式下工作（或者是吗？）。

那么，您使用什么作为 JmX 批处理客户端？

有人试过[http://wiki.cyclopsgroup.org/jmxterm](http://wiki.cyclopsgroup.org/jmxterm) 吗？我找不到它的许可证

[什么是最好的或最常用的 JMX 控制台/客户端](https://stackoverflow.com/questions/1744900/what-is-the-best-or-most-commonly-used-jmx-console-client)

谢谢，于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T13:58:13.380

我遇到了同样的问题，这就是为什么我编写了简单的实用程序来帮助我通过运行一个命令来更新多台机器上的 JMX 属性。此外，还可以通过 cron 运行工具来获取它们的值。我写了一篇关于[http://simpletoad.blogspot.com/2013/06/jmx-batch-updates.html](http://simpletoad.blogspot.com/2013/06/jmx-batch-updates.html)的帖子。LZ，分享你的意见。github 上也有代码，不要犹豫 fork 我

# jenkins - 如何以不同的用户身份在主服务器上运行作业？

> ID：16101487
> 
> 赞同：2
> 
> 时间：2013-04-19T09:29:58.053
> 
> 标签：jenkins

我在 Apache 后面的 tomcat 中的 linux 机器上安装了 jenkins。结果 jenkins 作为*tomcat*运行。未正确配置用户*tomcat*以运行作业。

如何告诉 Jenkins 在同一台机器上以不同用户身份运行作业？

在同一台机器上定义一个从属但使用不同的用户是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:49:11.607

您可以在构建步骤中使用`su`或`sudo`以不同用户身份运行，但这会带来一些安全隐患。如果这是您想要定期做的事情，我建议您按照您的建议在与其他用户相同的机器上定义一个从属设备。不幸的是，我不知道有任何插件/扩展可以使您更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:43:50.470

我有时会 ssh 进入帐户，而不是运行`build.sh`run`ssh user@localhost build.sh`

# xml - 之间的区别 和 在模式定义中？

> ID：16101488
> 
> 赞同：87
> 
> 时间：2013-04-19T09:30:07.337
> 
> 标签：xml, xsd, xml-validation, xsd-validation

我正在使用`xsd:all`复杂类型。当我在验证时错过任何强制性元素时，它将显示所有元素。它不会显示准确的遗漏元素。

但如果我使用`xsd:sequence`，我可以得到准确的遗漏元素。

这两者有什么区别吗？

`xsd:sequence`: XML 元素的顺序必须相同。

但是`xsd:all`： XML 元素可以是任何顺序。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-04-19T09:46:41.657

`<xsd:all>`指定子元素可以以任何顺序出现。

`<xsd:sequence>`指定子元素只能按提到的顺序出现。

序列示例：

```
<xs:element name="compElement">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="ele1" type="xs:string"/>
      <xs:element name="ele2" type="xs:string"/>
      <xs:element name="ele3" type="xs:string"/>
      <xs:element name="ele4" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

如果你从这个 xsd 创建一个 XML，它看起来像这样：

```
<compElement>
  <ele1>First</ele1>
  <ele2>Second</ele2>
  <ele3>Third</ele3>
  <ele4>Fourth</ele4>
</compElement> 
```

所有人的例子：

```
<xs:element name="compElement">
  <xs:complexType>
    <xs:all>
      <xs:element name="ele1" type="xs:string"/>
      <xs:element name="ele2" type="xs:string"/>
      <xs:element name="ele3" type="xs:string"/>
      <xs:element name="ele4" type="xs:string"/>
    </xs:all>
  </xs:complexType>
</xs:element> 
```

如果你从这个 xsd 创建一个 XML 文件，那么它可能看起来像这样：

```
<compElement>
  <ele2>Second</ele2>
  <ele1>First</ele1>
  <ele4>Fourth</ele4>
  <ele3>Third</ele3>
</compElement> 
```

关于 xsd:all的[更多](http://www.w3.org/TR/xmlschema11-1/#element-all)
[信息](http://www.w3.org/TR/xmlschema11-1/#element-sequence)关于 xsd:sequence 的更多信息

希望我回答了你的问题。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-19T09:32:41.780

区别：

*   **xsd:all** - “子元素可以按任何顺序出现，每个子元素可以出现零次或一次”（即 maxOccurs 可以是 0 或 1）
*   **xsd:sequence** - “子元素必须出现在一个序列中。每个子元素可以出现 0 到任意次数”（即 maxOccurs 可以是 0 或任意数字或“无界”）

从[这里](https://www.w3schools.com/xml/el_sequence.asp)和[这里](https://www.w3schools.com/xml/el_all.asp)的 W3Schools 教程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-01T12:05:04.680

该模式仅定义了构成合规文档的内容。

如何报告违规行为完全取决于验证者。没有什么可以阻止验证器准确报告缺少哪些字段，但显然您使用的字段在这种情况下不会。

无论这是错误还是设计，您都必须与验证器的提供者讨论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-11T13:37:12.947

# 简单的 XML 示例：

```
<school>
  <firstname>John</firstname>
  <lastname>Smith</lastname>
</school> 
```

# XSD OF ABOVE XML（解释）：

```
<xs:element name="school">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="firstname" type="xs:string"/>
      <xs:element name="lastname" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

**这里：**

**xs:element**：定义一个元素。

**xs:all**：表示子元素可以以任意顺序出现。

**xs:sequence**：表示子元素仅按提到的顺序出现。

**xs:complexType**：表示它包含其他元素。

**xs:simpleType**：表示它们不包含其他元素。

**类型：** 字符串、十进制、整数、布尔值、日期、时间、

*   **简单来说**，xsd 是另一种表示和验证具有特定类型的 XML 数据的方法。
*   借助额外的属性，我们可以执行多个操作。

*   在 xsd 上执行任何任务都比 xml 简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T09:34:58.197

**所有指标**

> 该`<all>`指示符指定子元素可以按任何顺序出现，并且每个子元素只能出现一次：

**顺序指示器**

> 该`<sequence>`指示符指定子元素必须以特定顺序出现：

[参考链接](http://www.w3schools.com/schema/schema_complex_indicators.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-09T02:06:06.137

当我们使用 under 标签时，它表示在该 complexType 中声明的所有元素必须以相同的顺序出现在 XML 文档中。否则，你会得到一个错误。因为不需要以正确的顺序指定元素。

# html - 在打印样式表上打印图像

> ID：16101491
> 
> 赞同：0
> 
> 时间：2013-04-19T09:30:25.063
> 
> 标签：html, css, stylesheet

我正在尝试打印未在页面的 html 中定义的图像，并且作为此解决方案的一部分，无法更改 html。一旦用户选择打印选项，我希望能够将新图像定义为要打印的打印样式表的一部分。请参阅标题部分以尝试显示图像。

试过如下：

```
 @media print {

    /* Header */

#printHeader {
display: block;
background url(../html/link/link/linkname;
}

#header {
display: block;
height:75px;
width:75px;
}

#print-header {
display: block;
}

/* applied for body tag */
body {
    font-family:"Arial", Times, serif;
    overflow: visible;
    font-size: 12px;
}

/* Redefinition of TD in general.css */
td {
    font-family:"Arial", Times, serif;
    font-size:12px;
}

/* Redefinition of value from enquiry.css */
.columnheader {
    font-family:"Arial", Times, serif;
    font-size:12px;
    color:#6A1A41;
}

/*Standard navigation Bars */

.extra-nav {
    display:none;

    }

.extra-nav ul {
   display:none;

   }
.extra-nav li {
display:none;

}

.active-tab {
display:none;
}

li.nonactive-tab{

display:none;

}

#commandsViewport {
display:none;
}

nav-menu {
display:none;
}

#nav-menu li {
display:none;
}

/* Direct Debit Header */

aheader{
font-family:"Arial",Sans-serif;
font-size:24px;
color:#6A1A41;
}

/* External Standing Order Header */

bheader{
font-family:"Arial",Sans-serif;
font-size:24px;
color:#6A1A41;
}

/* Internal Standing Order Header */

cheader{
font-family:"Arial",Sans-serif;
font-size:24px;
color:#6A1A41;
}
/* Footer Bar */

#footernav {

visibility:hidden;
}

.footernav {
visibility:hidden;
}

/* The solely fragment that should be printed */
.printableFragment {
    display: block;
}
/* fragement that will not be printed */
.notPrintableFragment {
    display: block;
}

/* Hides "drill" button */  
.enqdrilldowncell {
    display: none;
}

/* Hids "next" button in the version */
.belowDealButtonBox {
    display: none;
}
 /* Applied for images */
img { 
    display: none;

}
/* used in enquiry selection */ 
.noPrint {
    display: block;
}
    } 
```

# mysql - 如何抑制单个 SQL 语句的列标题输出？

> ID：16101495
> 
> 赞同：143
> 
> 时间：2013-04-19T09:30:31.143
> 
> 标签：mysql, output, columnheader, suppression

我正在批量执行一些 SQL 语句（使用`mysql`命令行二进制文件）。我希望我的几个 SELECT 语句之一不打印列标题，只打印选定的记录。这可能吗？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2014-01-02T16:17:45.277

使用（ is`-N`的别名）选项调用 mysql ：`-N``--skip-column-names`

```
mysql -N ...
use testdb;
select * from names;

+------+-------+
|    1 | pete  |
|    2 | john  |
|    3 | mike  |
+------+-------+
3 rows in set (0.00 sec) 
```

感谢 ErichBSchulz 指出 -N 别名。

要删除结果周围的网格（垂直和水平线），请使用`-s`( `--silent`)。列用`TAB`字符分隔。

```
mysql -s ...
use testdb;
select * from names;

id  name
1   pete
2   john
3   mike 
```

要输出没有标题和网格的数据，只需同时使用`-s`和`-N`。

```
mysql -sN ... 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-02T14:34:13.273

你可以像这样伪造它：

```
-- with column headings 
select column1, column2 from some_table;

-- without column headings
select column1 as '', column2 as '' from some_table; 
```

# jquery - 使用 POST 调用 JQuery EasyUI datagrid url，即使方法 = GET

> ID：16101497
> 
> 赞同：0
> 
> 时间：2013-04-19T09:30:33.423
> 
> 标签：jquery, datagrid

我刚刚开始使用 JQuery 和 easyui。datagrid 控件看起来超级棒，但每次都使用 POST 调用我的 URL，即使我将方法设置为 GET。

```
 <table id="dg" title="Plan details" class="easyui-datagrid" style="width:550px;height:250px"
    url="/Plans"
    toolbar="#toolbar"
    method="GET"
    rownumbers="true" fitColumns="true" singleSelect="true">
  <thead>
    <tr>
            <th field="name" width="50">Name</th>
            <th field="description" width="100">Description</th>
    </tr>
  </thead>
</table>
<div id="toolbar">

</div> 
```

谁能帮我这个 ？

科马克·基奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T14:07:33.383

这里同样的问题。

我通过添加： data-options="method: 'get'" 来解决它。

# c# - xaml ScrollViewer，边界模糊 - Windows Store App

> ID：16101499
> 
> 赞同：1
> 
> 时间：2013-04-19T09:30:36.830
> 
> 标签：c#, xaml, windows-store-apps, winrt-xaml

滚动时是否有可能出现某种模糊的边框？为了更好地理解，我添加了一张我想要实现的图片。

我的限制是，在下面`ScrollViewer`我有一个背景图像。因此，我不能只`Rectangle`在`ScrollViewer`.

![在此处输入图像描述](https://i.stack.imgur.com/cepDX.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:33:22.433

由于 WinRT 放弃了对的支持`OpacityMask`，我不确定您是否要使用 Alpha 通道来设置它。尽管如此，几乎总是有解决方法。那么，如果你只是利用自然 z 顺序并伪造它呢？像这样的东西；

```
<!-- Grid as Container -->
<Grid>

    <ScrollViewer VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Visible">
        <!-- example backgrounds, like images, just for the concept example. -->
        <StackPanel Orientation="Horizontal">
            <Rectangle Height="75" Width="300" Fill="Red" Margin="20,0"/>
            <Rectangle Height="75" Width="300" Fill="Red" Margin="20,0"/>
            <Rectangle Height="75" Width="300" Fill="Red" Margin="20,0"/>
            <Rectangle Height="75" Width="300" Fill="Red" Margin="20,0"/>
            <Rectangle Height="75" Width="300" Fill="Red" Margin="20,0"/>
        </StackPanel>
    </ScrollViewer>

    <!-- An adhoc gradient overlay to just float over the ScrollViewer itself.
         Then using Margin to fit it to the shape of the Scrollviewer and still
         allow hit visibility to the scrollbar etc.  -->

    <Rectangle Width="50" HorizontalAlignment="Left" Margin="1,1,0,20">
        <Rectangle.Fill>
            <LinearGradientBrush EndPoint="1,0.5" StartPoint="0.1,0.5">
                <GradientStop Color="White" Offset="0.3"/>
                <GradientStop Color="Transparent" Offset="1"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>

</Grid> 
```

当然，您可能需要调整`Rectangle` `Margin`示例中的一些值，使其看起来与您自己的设置完全一致，但这个概念应该存在并且是一个选项。希望这可以帮助。

# javascript - Recaptcha 翻译

> ID：16101501
> 
> 赞同：0
> 
> 时间：2013-04-19T09:30:48.473
> 
> 标签：javascript, captcha, recaptcha

我正在尝试使用 reCAPTCHA.net 的验证码服务，但是我想使用自定义翻译（[https://developers.google.com/recaptcha/docs/customization#i18n](https://developers.google.com/recaptcha/docs/customization#i18n)），因为内置的不涵盖所有语言. 此外，我不想使用他们的标准主题之一，而是完全自定义以匹配验证码的外观到我的网站。

下面是我正在尝试的一个片段，但是由于一些有趣的原因它不起作用（文本保留为英文而不是翻译）。我想知道“获取另一个验证码”、“获取音频验证码”、“帮助”等文本链接是否会翻译。如果我理解正确，这些应该翻译，具体取决于我在 custom_translations 属性中设置的字符串。另外，如果我用图标而不是文本替换文本链接的内容，这些图标会自动获取具有适当内容的 ALT 标记吗？

所以，例如，如果我改变这个：

```
<div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div> 
```

为此，是否会自动预填充图像的 alt 标签，以便将鼠标悬停在图标上时显示“获取音频验证码”？

```
<div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')"><img height="16" width="16" src="audio.gif" alt="" /></a></div> 
```

当我尝试选择标准主题之一时，我问这个问题，例如“主题：“红色”，alt 标签会根据语言自动翻译。

这是我的代码片段。我从下面删除了我的公钥。

**JS**：

```
<script type="text/javascript">
    var RecaptchaOptions = {
            custom_translations : {
                    instructions_visual : "Scrivi le due parole:",
                    instructions_audio : "Trascrivi ci\u00f2 che senti:",
                    play_again : "Riascolta la traccia audio",
                    cant_hear_this : "Scarica la traccia in formato MP3",
                    visual_challenge : "Modalit\u00e0 visiva",
                    audio_challenge : "Modalit\u00e0 auditiva",
                    refresh_btn : "Chiedi due nuove parole",
                    help_btn : "Aiuto",
                    incorrect_try_again : "Scorretto. Riprova.",
            },
            lang : 'it', // Unavailable while writing this code (just for audio challenge)
            theme : 'custom', // Make sure there is no trailing ',' at the end of the RecaptchaOptions dictionary
      custom_theme_widget: 'recaptcha_widget'
    };
</script> 
```

**HTML**

```
<div id="recaptcha_widget" style="display:none">

<div id="recaptcha_image"></div>
<div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect please try again</div>

<span class="recaptcha_only_if_image">Enter the words above:</span>
<span class="recaptcha_only_if_audio">Enter the numbers you hear:</span>

<input type="text" id="recaptcha_response_field" name="recaptcha_response_field" />

<div><a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a></div>
<div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div>
<div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')">Get an image CAPTCHA</a></div>

<div><a href="javascript:Recaptcha.showhelp()">Help</a></div>

</div>

 <script type="text/javascript"
src="http://www.google.com/recaptcha/api/challenge?k=MY_PUBLIC_KEY">
 </script>
 <noscript>
 <iframe src="http://www.google.com/recaptcha/api/noscript?k=MY_PUBLIC_KEY"
    height="300" width="500" frameborder="0"></iframe><br>
 <textarea name="recaptcha_challenge_field" rows="3" cols="40">
 </textarea>
 <input type="hidden" name="recaptcha_response_field"
    value="manual_challenge">
 </noscript> 
```

我还附上了结果的截图。
![在此处输入图像描述](https://i.stack.imgur.com/swB19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T15:07:01.380

据我了解，`custom_translations`如果您使用自己的 HTML 模板，则不会使用 JavaScript 对象。在这种情况下，您将不得不使用与应用程序其他部分相同的本地化进行手动翻译。`custom_translations`如果您自己不提供 HTML，而是使用预定义的主题之一，则使用此选项。

# google-chrome - 停用 Chrome Pepper Flash (PPAPI)

> ID：16101505
> 
> 赞同：4
> 
> 时间：2013-04-19T09:31:00.810
> 
> 标签：google-chrome, flash

我很确定这是不可能的，但我还是问：

激活 PPAPI 时，Flash AS2 内容中的声音存在一些问题。

关闭 PPAPI 可以解决问题。

我的问题是，有什么神奇的方法可以用 javascript 从内容中停用 PPAPI 吗？

我可以检测到它（[Detecting Pepper (PPAPI) Flash with Javascript](https://stackoverflow.com/questions/12866060/detecting-pepper-ppapi-flash-with-javascript)），但用户将无法遵循 3 步停用程序。

感谢您的帮助。

# spring - 在前端和后端使用 dart 的 Spring Web 流

> ID：16101509
> 
> 赞同：1
> 
> 时间：2013-04-19T09:31:11.177
> 
> 标签：spring, web-applications, dart

任何尝试使用带有 dart 的 spring web 框架的人
请提供一个示例，或者如果您在 Github 中看到过一个示例，我将不胜感激该链接，已经搜索但我没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:41:19.103

不幸的是，我认为您无法完成您想要完成的任何事情。dart，这里标记的是 dart 编程语言，它在自己的虚拟机中运行或编译为 javascript。它根本与 Java 或 Java Server Pages 没有任何联系。

如果您在前端使用 Dart，则任何后端服务器都会提供 html 和 dart/javascript 脚本并响应您设置的任何 ajax 请求，但是您不能将 Spring Web Flow（Java 服务器后端）与 dart 后端集成.

# .net - 如何多次使用 ConsoleCancelEventHandler

> ID：16101517
> 
> 赞同：5
> 
> 时间：2013-04-19T09:31:41.227
> 
> 标签：.net, visual-c++, c++-cli

我一直在忙于编写一个用作前端的应用程序：它有一个 GUI，带有按钮之类的命令行选项，并将它们传递给命令行 .exe。它使用应用程序的控制台来显示命令行应用程序的输出。这很好用，但是当使用 Ctrl+C 或尝试关闭控制台窗口时，GUI 也会关闭，这并不是我真正想要的。但是，让程序输出带有它自己的控制台是不可能的，因为它批处理文件并且每个文件都会弹出它自己的控制台。

该程序是用 C++ 和 MSVC 2012 编写的，并使用 .NET。我试过 Console::CancelKeyPress 至少让 Ctrl+C 表现得像我想要的那样（停止命令行应用程序而不是 GUI），但在这方面遇到了一些问题。

我的代码

```
private: System::Void OnCancelKeyPressed(System::Object^  sender, System::ConsoleCancelEventArgs^  e) {
         e->Cancel = true;
     }
private: System::Void GetConsoleReady() {
         COORD c;
         FreeConsole();
         AllocConsole();
         c.X = 80; c.Y = 8000;
         SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE),c);
         Console::Clear();
         Console::TreatControlCAsInput = false;
         Console::CancelKeyPress += 
             gcnew ConsoleCancelEventHandler(this, &Form1::OnCancelKeyPressed);  
     } 
```

每次用户尝试运行一批要处理的文件时都会调用它。运行批处理后，使用 FreeConsole() 释放控制台。第一次运行良好，使用 Ctrl+C 会杀死命令行应用程序，但 GUI 中的处理继续，运行其他命令，最后使用 FreeConsole()。但是，当第二次尝试这样做时，它也会杀死 GUI。我尝试在添加新事件之前添加它以删除以前的事件

```
 Console::CancelKeyPress -= 
             gcnew ConsoleCancelEventHandler(this, &Form1::OnCancelKeyPressed); 
```

但不知何故，在添加处理程序时会引发错误，但只是第二次：mscorlib.dll 中发生了“System.IO.IOException”类型的未处理异常，附加信息：De 参数是 onjuist。

最后一部分是荷兰语的“错误参数”，调试器说它在读取 ConsoleCancelEventHandler 时窒息。

如果我尝试通过在加载表单时添加它来仅添加一次事件处理程序，它什么也不做。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T19:57:50.013

您是否考虑过在不同的过程中运行批处理？然后，您可以通过读取衍生进程的标准输出（和标准错误）来显示批处理的输出。

如果您使用的是 .net，请查看 Process.RedirectStandardOutput（此处为[Capturing console output from a .NET application (C#) 的](https://stackoverflow.com/questions/186822/capturing-console-output-from-a-net-application-c)示例）。

如果您隐藏生成的进程，则用户无法与之交互/关闭它。您的主应用程序仍然处于完全控制之下，并且 ctrl-c 等没有问题。

# ios - 以编程方式识别应用程序是付费还是免费

> ID：16101519
> 
> 赞同：4
> 
> 时间：2013-04-19T09:31:42.773
> 
> 标签：ios, objective-c

我想确定一个应用程序是付费的还是免费的；以编程方式，在运行时。

为了简要介绍我正在处理的上下文，我正在开发一个可供各种第三方应用程序使用的 SDK。我想确定使用我的 SDK 的应用程序是付费的还是免费的。

有什么建议可以找到这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:53:15.983

您应该让他们配置您的 SDK，在某处写入他们的应用程序 ID，然后您的 SDK 必须像这样检查应用商店网络服务

```
https://itunes.apple.com/lookup?id=theAppID 
```

在那里你可以查看价格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:54:58.837

你可以做的一件事是

`https://itunes.apple.com/lookup?id=YOUR_APP_ID`

然后从返回的获取`price`&值`currency``JSON`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:43:09.050

有一种方法进入我的脑海，

添加一个逻辑以获取应用程序名称，该名称`SDK`还使用您添加一些逻辑以通过`API`或您喜欢的任何其他方式将该名称发送给您。

在服务器数据库中获得新名称后，您可以在 中打开 AppStore`iTunes`并在那里搜索应用程序，是的，您会知道它们是付费的还是免费的！

我知道如果您`SDK`要使用许多应用程序飞行会很困难，但并不难。

另一种方法是，如果您可以通过某种方式了解应用程序是付费的还是免费的，那么您可以做同样的事情，发送应用程序名称及其价格详细信息。

# android - OAuth：在模拟器上与雅虎连接时，retrieveAccessToken() 出现异常？

> ID：16101521
> 
> 赞同：1
> 
> 时间：2013-04-19T09:31:45.817
> 
> 标签：android, android-emulator, android-networking, android-embedded-api

集成到雅虎时出现上述错误

提供者定义如下

**代码**

```
provider = new CommonsHttpOAuthProvider(
                "https://api.login.yahoo.com/oauth/v2/get_request_token",
                "https://api.login.yahoo.com/oauth/v2/get_token",
                "https://api.login.yahoo.com/oauth/v2/request_auth"); 
```

**消费者和 Oauth_Verifier**

```
 consumer = new CommonsHttpOAuthConsumer(
                "ppp",
                "lll");

        consumer.setMessageSigner(new HmacSha1MessageSigner());

String oauth_verifier = uri
            .getQueryParameter(OAuth.OAUTH_VERIFIER); 
```

**尝试从 yahoo api 访问令牌时显示错误：-**

```
oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: null 
```

当在代码下面运行时，上面会出现异常：-

```
 provider.retrieveAccessToken(consumer, oauth_verifier); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:11:54.173

## 大编辑

我**强烈**建议不要使用 Signpost，除非您有如何处理令牌刷新的计划。路标没有方法来实现这一点。我切换到更容易使用的[Scribe 。](https://github.com/fernandezpablo85/scribe-java)不幸的是，它也没有帮助令牌刷新的方法，但我能够相当容易地编写一个辅助方法。

我现在让 Yahoo API 在 Android 上 100% 运行。如果您无法使用 Signpost 解决问题并切换到 Scribe，我将发布我的代码。

* * *

这对我来说从头到尾都有效。我还可以重复使用密钥。棘手的事情，如果你不按顺序做一件事，它就会中断。这是我打算清理的粗略版本。60 分钟后仍然需要计算更新令牌。

**安卓清单**

```
<activity
    android:name=".UpdaterActivity"
    android:label="@string/app_name"
    android:launchMode="singleInstance" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter> 
        <action android:name="android.intent.action.VIEW" /> 
        <category android:name="android.intent.category.DEFAULT" /> 
        <category android:name="android.intent.category.BROWSABLE" /> 
        <data android:scheme="yfbwa" android:host="oauth"></data> 
    </intent-filter> 
</activity> 
```

**UpdaterActivity.java**

```
private static final String CONSUMER_KEY = "";
private static final String CONSUMER_SECRET = "";
private static final String REQUEST_TOKEN_URL = "https://api.login.yahoo.com/oauth/v2/get_request_token";
private static final String ACCESS_TOKEN_URL = "https://api.login.yahoo.com/oauth/v2/get_token";
private static final String AUTHORIZE_WEBSITE_URL = "https://api.login.yahoo.com/oauth/v2/request_auth";
private static final String CALLBACK_URL = "yfbwa://oauth";
private OAuthConsumer consumer;
private OAuthProvider provider;

@Override
protected void onCreate(Bundle savedInstanceState) {
    consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET); 
    provider = new CommonsHttpOAuthProvider(REQUEST_TOKEN_URL, ACCESS_TOKEN_URL, AUTHORIZE_WEBSITE_URL);
    if(getIsAuthorized() == 0) {
        callOAuth();
    } else {
        makeRequest("http://fantasysports.yahooapis.com/fantasy/v2/users;use_login=1/games;game_keys=308/teams?format=json");
    }
}

private void callOAuth() { 
    String url = provider.retrieveRequestToken(consumer, CALLBACK_URL);
    this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); 
}

@Override 
protected void onNewIntent(Intent intent) { 
    Uri data = intent.getData();
    String verifier = data.getQueryParameter(OAuth.OAUTH_VERIFIER);
    provider.retrieveAccessToken(consumer, URLDecoder.decode(verifier,"UTF-8"));
    writePrefs(consumer.getToken(), consumer.getTokenSecret());
    makeRequest("http://fantasysports.yahooapis.com/fantasy/v2/users;use_login=1/games;game_keys=308/teams?format=json");
}

private void makeRequest(String url) throws OAuthMessageSignerException, OAuthNotAuthorizedException, OAuthExpectationFailedException, OAuthCommunicationException, ClientProtocolException, IOException {
    String[] prefs = getPrefs();
    consumer.setTokenWithSecret(prefs[0], prefs[1]);
    HttpClient httpClient = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    consumer.sign(request);
    HttpResponse response = httpClient.execute(request);
    String result = EntityUtils.toString(response.getEntity());
}

private void writePrefs(String token, String tokenSecret) {
    Editor prefsEditor = getSharedPreferences("ybfwa", MODE_PRIVATE).edit();
    prefsEditor.putString("token",token);
    prefsEditor.putString("tokenSecret",tokenSecret);
    prefsEditor.putInt("isAuthorized",1);
    prefsEditor.commit();
}

private String[] getPrefs() {
    String[] prefs = new String[2];
    SharedPreferences myPrefs = getSharedPreferences("ybfwa", MODE_PRIVATE);
    prefs[0] = myPrefs.getString("token", null);
    prefs[1] = myPrefs.getString("tokenSecret", null);
    return prefs;
}

private int getIsAuthorized() {
    SharedPreferences myPrefs = getSharedPreferences("ybfwa", MODE_PRIVATE);
    return myPrefs.getInt("isAuthorized", 0);
} 
```

# c# - 创建 Windows 8 应用程序时在页面之间保存状态

> ID：16101523
> 
> 赞同：4
> 
> 时间：2013-04-19T09:31:49.563
> 
> 标签：c#, windows-store-apps

我一直在关注 Microsoft 提供的使用 C# 或 Visual Basic 教程创建您的第一个 Windows 应用商店应用程序，但在页面之间导航时保​​存状态时遇到了一些问题。

[使用 C# 或 Visual Basic 创建您的第一个 Windows 应用商店应用](http://msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx)

[第 3 部分：导航、布局和视图](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)

基本上我注意到，如果我从主页导航到照片页面选择一张照片，导航回主页，然后再次转到照片页面，它就不会记住选择的照片。我正在使用以下代码从主页导航到照片页面。

```
private void photoPageButton_Click(object sender, RoutedEventArgs e)
{
    this.Frame.Navigate(typeof(PhotoPage));
} 
```

在照片页面中，loadstate 方法是

```
protected async override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    if (pageState != null && pageState.ContainsKey("mruToken"))
    {
        object value = null;
        if (pageState.TryGetValue("mruToken", out value))
        {
            if (value != null)
            {
                mruToken = value.ToString();

                // Open the file via the token that you stored when adding this file into the MRU list.
                Windows.Storage.StorageFile file =
                    await Windows.Storage.AccessCache.StorageApplicationPermissions.MostRecentlyUsedList.GetFileAsync(mruToken);

                if (file != null)
                {
                    // Open a stream for the selected file.
                    Windows.Storage.Streams.IRandomAccessStream fileStream =
                        await file.OpenAsync(Windows.Storage.FileAccessMode.Read);

                    // Set the image source to a bitmap.
                    Windows.UI.Xaml.Media.Imaging.BitmapImage bitmapImage =
                        new Windows.UI.Xaml.Media.Imaging.BitmapImage();

                    bitmapImage.SetSource(fileStream);
                    displayImage.Source = bitmapImage;

                    // Set the data context for the page.
                    this.DataContext = file;
                }
            }
        }
    }
} 
```

照片页面保存状态为

```
protected override void SaveState(Dictionary<String, Object> pageState)
{
    if (!String.IsNullOrEmpty(mruToken))
    {
        pageState["mruToken"] = mruToken; 
    }
} 
```

我注意到导航到时页面状态始终为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-10T07:41:25.547

启用**`NavigationCacheMode`**页面的属性并添加**`NavigationCacheMode="Enabled"`**

## 或者

通过属性面板启用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T01:27:38.337

我也完成了本教程，并找到了一种跨页面导航保存状态的解决方案。

首先，覆盖**OnNavigatedFrom**以将文件令牌保存到状态框架中：

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    base.OnNavigatedFrom(e);

    var state = SuspensionManager.SessionStateForFrame(this.Frame);
    state["mruToken"] = mruToken;
} 
```

覆盖**OnNavigatedTo**以从状态加载令牌：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    var state = SuspensionManager.SessionStateForFrame(this.Frame);
    if (state != null && state.ContainsKey("mruToken"))
    {
        object value = null;

        if (state.TryGetValue("mruToken", out value))
        {
           // the same code as LoadState to retrieve the image  
        }
    }
} 
```

事实上，我编写了另一个函数来检索图像，因此它可以在**LoadState**和**OnNavigatedTo**方法中使用。

```
private async void restoreImage(object value)
{
    if (value != null)
    {
        mruToken = value.ToString();

        // Open the file via the token that you stored when adding this file into the MRU list.
        Windows.Storage.StorageFile file =
            await Windows.Storage.AccessCache.StorageApplicationPermissions.MostRecentlyUsedList.GetFileAsync(mruToken);

        if (file != null)
        {
            // Open a stream for the selected file.
            Windows.Storage.Streams.IRandomAccessStream fileStream =
                await file.OpenAsync(Windows.Storage.FileAccessMode.Read);

            // Set the image source to a bitmap.
            Windows.UI.Xaml.Media.Imaging.BitmapImage bitmapImage =
                new Windows.UI.Xaml.Media.Imaging.BitmapImage();

            bitmapImage.SetSource(fileStream);
            displayImage.Source = bitmapImage;

            // Set the data context for the page.
            this.DataContext = file;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T08:44:10.467

问题来自 NavigationHelper OnNavigateTo 方法

```
public void OnNavigatedTo(NavigationEventArgs e)
    {
        var frameState = SuspensionManager.SessionStateForFrame(this.Frame);
        this._pageKey = "Page-" + this.Frame.BackStackDepth;

        if (e.NavigationMode == NavigationMode.New)
        {
            // Clear existing state for forward navigation when adding a new page to the
            // navigation stack
            var nextPageKey = this._pageKey;
            int nextPageIndex = this.Frame.BackStackDepth;
            while (frameState.Remove(nextPageKey))
            {
                nextPageIndex++;
                nextPageKey = "Page-" + nextPageIndex;
            }

            // Pass the navigation parameter to the new page
            if (this.LoadState != null)
            {
                this.LoadState(this, new LoadStateEventArgs(e.Parameter, null));
            }
        }
        else
        {
            // Pass the navigation parameter and preserved page state to the page, using
            // the same strategy for loading suspended state and recreating pages discarded
            // from cache
            if (this.LoadState != null)
            {
                this.LoadState(this, new LoadStateEventArgs(e.Parameter, (Dictionary<String, Object>)frameState[this._pageKey]));
            }
        }
    } 
```

`if (e.NavigationMode == NavigationMode.New)`如果始终为真，因为`Frame`默认情况下会创建`Page`. 见[`Frame`班级备注](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame.aspx)。所以`LoadState`事件处理程序总是用一个空状态参数调用

```
if (this.LoadState != null)
{
    this.LoadState(this, new LoadStateEventArgs(e.Parameter, null));
} 
```

现在，如果您非常仔细地查看[PhotoPage.xaml](http://msdn.microsoft.com/en-us/library/windows/apps/jj676796.aspx)的完整代码，您会注意到在页眉中是`NavigationCacheMode="Enabled"`它的`PhotoPage`工作原理。

不需要所有关于在`Page`. 当设置它`Frame class`的.`Page``NavigationCacheMode`

# php - 在一个时间命令中执行一个定时命令

> ID：16101529
> 
> 赞同：3
> 
> 时间：2013-04-19T09:31:58.150
> 
> 标签：php, cron

我正在使用一个 php 应用程序，我需要在其中检查今天过生日的用户数据库。这是我通过 cron 工作完成的。

现在，当我得到生日的用户时，我需要向他们发送短信。SMS 有一个单独的相关时间，该时间决定了何时发送 SMS。假设约翰和彼得今天过生日。彼得在 01-09 工作，所以他应该在 01 收到短信，而彼得在 08-16 工作，所以他应该在 08 收到短信。

我正在考虑动态创建相同数量的 cron jbos，这等于在给定日期过生日的人。然后，这些 cron 作业将这一次将 SMS 发送给适当的人，仅此而已。

我的问题是，有没有更聪明的方法来做到这一点？其次，如果 cron 作业生成的想法足够好，有没有办法删除单个旧的 cron 作业，这样我就不会将 cron 作业列表与永远不会再次运行的旧作业混在一起？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:42:36.927

如果您想使用 cronjobs 在特定时间向每个人发送消息，那么您必须为每个人创建一个 cronjob。在我看来这是个非常糟糕的主意，因为你最终可能会得到超过 1000 个 cronjobs！

使用每 5 分钟左右运行一次 cronjob 的系统会好得多（无论您希望多久），并且此 cronjob 执行 PHP 脚本以确定当时或从现在到现在之间是否有任何消息要发送最后一个 cronjob。

虽然这可能意味着您的用户可能会迟到 5 分钟才能收到他们的消息，但这不太可能，因为我认识的任何人都不会在 8:02 开始工作，因此，如果 cronjob 是在 8:00、8:05、8:10 等，您几乎总能按时收到消息！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:36:38.883

如果您担心创建太多 cron 作业（不确定有多少会在您的系统上出现问题），那么为什么不在操作系统级别只创建一个 cron 作业呢？然后你可以每隔 10 分钟左右调用一次你的程序，它可以检查是否有新人需要发送短信。

# macos - 朱利安日期 as.date

> ID：16101530
> 
> 赞同：0
> 
> 时间：2013-04-19T09:32:00.173
> 
> 标签：macos, r, linear-regression, julian-date

我正在尝试在 R (mac OSX) 中运行一个简单的回归，以查看环境认证的水平是否随着时间的推移而提高 - 除其他外。我下载的数据提供了 1-4 的级别，以及 1-Mar-12 格式的日期。我似乎无法让 R 转换日期，并且我不断收到相同的错误消息。变量的长度相同。

```
$ certification_date: chr  "1-Aug-11" "1-Aug-11" "1-Aug-11" "1-Jul-11" ...

jday<-as.Date('certification_date',format='%d-%b-%y',"%j")
mod <- lm(Level_number ~ jday, data=data)

Error in model.frame.default(formula = Level_number ~ jday, data = data,  : 
  variable lengths differ (found for 'jday')

summary(jday)
Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  NA      NA      NA      NA      NA      NA     "1" 
```

谁能发现我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:54:42.437

`certification_date`您应该删除评论中提到的引号，但是`%b`是当前语言环境中的缩写月份名称。因此，您可能会遇到当地人的另一个问题。在这里，我提出了一个独立的本地解决方案：

```
## get your current local time
loc <- Sys.getlocale('LC_TIME')  
## set the local to english , since %b is local dependent 
Sys.setlocale('LC_TIME','ENGLISH')
jday <-as.Date(certification_date,format='%d-%b-%y',"%j")
Sys.setlocale('LC_TIME',loc) 
```

结果是：

```
jday
[1] "2011-08-01" "2011-08-01" "2011-08-01" "2011-07-01" 
```

# php - MPDF PDF格式

> ID：16101531
> 
> 赞同：1
> 
> 时间：2013-04-19T09:32:00.963
> 
> 标签：php, pdf, mpdf

作为我大学最后一年项目的一部分，我正在尝试将完整的网页原样转换为 PDF，并且发现 MPDF 对这项任务非常有用，但是我在实际输出的呈现方面有点挣扎。

页面本身如下所示： ![原始网页](https://i.stack.imgur.com/PKqgO.png)

并且我希望它在转换为 PDF 时完全按照上面的方式呈现，但是转换似乎会从文档中删除所有样式，如下所示： ![转换后的网页](https://i.stack.imgur.com/rnCU9.png)

我用来转换页面的代码如下：

```
<?php 
    ob_start();
    include("checklog.php"); 
    require_once("watchlist-controller.php");
?>
<!DOCTYPE html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="img/fav.ico">
        <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
        <title>Screening - Your ticket to your movies - <?php echo $watchlist_name; ?></title>
        <meta name="description" content="Screening is a brand new take on the traditional movie database, fusing social networking and multimedia to provide a clear, concise experience allowing you to share your favourite movies, and discover new classics.">
        <meta name="keywords" content="Movies, Films, Screening, Discover, Watch, Share, experience, database, movie database, film database, share film, share films, discover film, discover films, share movie, share movies, discover movie, discover movies">

        <!-- Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet" media="screen">
        <link href="css/bootstrap-responsive.css" rel="stylesheet">
        <link href="css/custom-bootstrap.css" rel="stylesheet">
        <link rel="stylesheet" href="fonts.css" type="text/css" />
        <link rel="stylesheet/less" type="text/css" href="css/stylesheet.less" />
        <script src="js/less-1.3.3.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

        <!-- Start Google Analytics -->
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', '']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
        <!-- End Google Analytics -->
    </head>

    <body>
        <div class="container"><?php 
            require_once ("header.php");?>
            <div id="main" class="well main-content">
                <p class="page-title"><?php echo $watchlist_name; ?></p>
                <div class="row-fluid">
                    <section class="span12 watchlist-holder film-list"><?php
                        if (count($films) == 0) {?>
                            <div class="alert alert-info">This Watchlist is empty! Why not visit a movie page to add something to it?</div><?php
                        } else {?>
                            <ul class="unstyled"><?php
                                foreach($films as $key => $film_item) {
                                    include("watchlist-film-controller.php");?>
                                    <li class="well list-item clearfix">
                                        <div class="row-fluid">
                                            <a href="movie.php?id=<?php echo $rt_id; ?>" class="span1 pull-left" title="<?php echo $title; ?>"><img src="<?php echo $poster_thumb; ?>" alt="<?php echo $title; ?> poster" title="<?php echo $title; ?> poster" /></a>

                                            <div class="span11 movie-info">
                                                <p class="search-title"><a href="movie.php?id=<?php echo $film_item['film_id']; ?>" title="<?php echo $title; ?> (<?php echo $year; ?>)"><?php echo $title; ?></a> <small>(<?php echo $year; ?>)</small></p><?php

                                                if ($critics_consensus == "") {?>
                                                    <p class="watchlist-synopsis">No overview available</p><?php
                                                } else {?>
                                                    <p class="watchlist-synopsis"><?php echo $critics_consensus; ?></p><?php
                                                }?>
                                            </div>
                                        </div>
                                    </li><?php
                                }?>
                            </ul><?php
                        }?>
                    </section>
                </div>
            </div><?php
            include 'footer.html'; ?>
        </div>
    </body>
</html><?php
$HTMLoutput = ob_get_contents();
ob_end_clean();
//Convert HTML 2 PDF by using MPDF PHP library
include ("mpdf/mpdf.php");
$mpdf=new mPDF();
$mpdf->WriteHTML($HTMLoutput);
$mpdf->Output();?> 
```

我不是最有经验的 PHP 编码人员，我仍然在学习很多东西，所以任何指针都将不胜感激。我不确定我尝试使用 MPDF 进行转换的方式是否是解决问题的最佳方式，这可能是一个问题。

# android - 使用 Android 打印 PDF

> ID：16101535
> 
> 赞同：2
> 
> 时间：2013-04-19T09:32:19.857
> 
> 标签：android, pdf, printing

我正在尝试从我的 android 应用程序中打印 PDF。但是每次我尝试打印我的打印页面时都会包含奇怪的数据，例如：

```
 java.io.FileInputStream@418479b0 
```

我假设我的 pdf 没有以正确的方式呈现......现在有人可以如何正确地将我的 pdf 转换为我的输出流吗？

我已经尝试了这个问题的代码（[在 android 中打印 pdf](https://stackoverflow.com/questions/14017529/printing-pdf-in-android)），但是我在打印的页面上得到了以下输出：

```
 Filter/FlateDecode/Length 69 >>stream 
```

有谁能够帮我？:)

这是我的代码：

```
 Socket socket = new Socket();
    String sIP = "192.168.0.250";
    String sPort = "9100";

    InetSocketAddress socketAddress = new InetSocketAddress(sIP, Integer.parseInt(sPort));
    DataOutputStream outputStream;

    try{
        //file init
        File pdfFile = new File(file);
        byte[] byteArray=null;
        InputStream inputStream = new FileInputStream(pdfFile);
        String inputStreamToString = inputStream.toString();
        byteArray = inputStreamToString.getBytes();
        inputStream.close();

        //Socket init
        socket.connect(socketAddress, 3000);
        outputStream = new DataOutputStream(socket.getOutputStream());
        outputStream.write(byteArray);
        outputStream.close();
        socket.close();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:50:12.727

您可以尝试这样的方法来获取 byteArray：

```
//file init
File pdfFile = new File(file);
byte[] byteArray = new byte[(int) pdfFile.length()];
FileInputStream fis = new FileInputStream(pdfFile);
fis.read(byteArray);
fis.close(); 
```

# cuda - threadIdx 的 CUDA 错误？

> ID：16101537
> 
> 赞同：1
> 
> 时间：2013-04-19T09:32:21.663
> 
> 标签：cuda, nvcc

我想我遇到了一个 CUDA 错误。有人可以确认/评论代码（见下文）。

代码（附件）将根据“BUG”定义产生不同的结果。BUG=0 结果为 8（正确），而 BUG=1 结果为 4（错误）。代码的区别只在这里：

```
#if BUG
unsigned int na=threadIdx.x, nb=threadIdx.y, nc=threadIdx.z;
#else
unsigned int na=0, nb=0, nc=0;
#endif 
```

我只提交一个线程，所以 na==nb==nc==0 在这两种情况下，我也用语句检查这个：

```
assert( na==0 && nb==0 && nc==0 );
printf("INITIAL VALUES: %u %u %u\n",na,nb,nc); 
```

这是我的编译和运行：

```
nvcc -arch=sm_21 -DBUG=0 -o bug0 bug.cu
nvcc -arch=sm_21 -DBUG=1 -o bug1 bug.cu
./bug0
./bug1 
```

> nvcc：NVIDIA (R) Cuda 编译器驱动程序 版权所有 (c) 2005-2012 NVIDIA Corporation 基于 Fri_Sep_21_17:28:58_PDT_2012 Cuda 编译工具，版本 5.0，V0.2.1221

nvcc 使用 g++-4.6 运行

最后是测试代码：

```
/* Compilation & run
   nvcc -arch=sm_21 -DBUG=0 -o bug0 bug.cu
   nvcc -arch=sm_21 -DBUG=1 -o bug1 bug.cu
   ./bug0
   ./bug1
 */

#include <stdio.h>
#include <assert.h>

__global__
void b(unsigned int *res)
{
#if BUG
    unsigned int na=threadIdx.x, nb=threadIdx.y, nc=threadIdx.z;
#else
    unsigned int na=0, nb=0, nc=0;
#endif

    assert( na==0 && nb==0 && nc==0 );
    printf("INITIAL VALUES: %u %u %u\n",na,nb,nc);

    unsigned int &iter=*res, na_max=2, nb_max=2, nc_max=2;
    iter=0;
    while(true)
    {
        printf("a-iter=%u     %u %u %u\n",iter,na,nb,nc);

        if( na>=na_max )
        {
            na  = 0;
            nb += blockDim.y;

            printf("b-iter=%u     %u %u %u\n",iter,na,nb,nc);

            if( nb>=nb_max )
            {
                printf("c-iter=%u     %u %u %u\n",iter,na,nb,nc);
                nb  = 0;
                nc += blockDim.z;
                if( nc>=nc_max )
                    break;  // end of loop
            }
            else
                printf("c-else\n");
        }
        else
            printf("b-else\n");

        printf("result    %u %u %u\n",na,nb,nc);
        iter++;

        na += blockDim.x;
    }
}

int main(void)
{
    unsigned int res, *d_res;
    cudaMalloc(&d_res,sizeof(unsigned int));
    b<<<1,1>>>(d_res);
    cudaMemcpy(&res, d_res, sizeof(unsigned int), cudaMemcpyDeviceToHost);
    cudaFree(d_res);

    printf("There are %u combinations (correct is 8)\n",res);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:02:43.220

这似乎是一个汇编程序错误。如果我采用您的示例的简化版本：

```
template<int bug>
__global__
void b(unsigned int *res)
{
    unsigned int na, nb, nc;
    switch(bug) {
        case 1:
        na=threadIdx.x;
        nb=threadIdx.y;
        nc=threadIdx.z;
        break;

        default:
        na = nb = nc = 0;
        break;
    }

    unsigned int &iter=*res, na_max=2, nb_max=2, nc_max=2;
    iter=0;
    while(true)
    {
        if( na>=na_max )
        {
            na  = 0;
            nb += blockDim.y;

            if( nb>=nb_max )
            {
                nb  = 0;
                nc += blockDim.z;
                if( nc>=nc_max ) break;
            }
        }

        iter++;
        na += blockDim.x;
    }
} 
```

并实例化两个版本，发出的 PTX 似乎是相同的，除了`tid.{xyz}`在版本中使用`bug=1`（在右侧）：

```
.visible .entry _Z1bILi0EEvPj(                         .visible .entry _Z1bILi1EEvPj(
        .param .u64 _Z1bILi0EEvPj_param_0                      .param .u64 _Z1bILi1EEvPj_param_0
        )                                                      )
{                                                      {
    .reg .pred  %p<4>;                                     .reg .pred   %p<4>;
    .reg .s32   %r<28>;                                    .reg .s32    %r<28>;
    .reg .s64   %rd<3>;                                    .reg .s64    %rd<3>;

    ld.param.u64    %rd2, [_Z1bILi0EEvPj_param_0];         ld.param.u64     %rd2, [_Z1bILi1EEvPj_param_0];
    cvta.to.global.u64  %rd1, %rd2;                        cvta.to.global.u64   %rd1, %rd2;
    mov.u32     %r26, 0;                                   .loc 2 11 1
    .loc 2 22 1                                                mov.u32  %r27, %tid.x;
        st.global.u32   [%rd1], %r26;                      .loc 2 12 1
    .loc 2 33 1                                                mov.u32  %r25, %tid.y;
        mov.u32     %r1, %ntid.z;                          .loc 2 13 1
    .loc 2 28 1                                                mov.u32  %r26, %tid.z;
        mov.u32     %r2, %ntid.y;                          mov.u32  %r24, 0;
    .loc 2 39 1                                            .loc 2 22 1
        mov.u32     %r3, %ntid.x;                              st.global.u32    [%rd1], %r24;
    mov.u32     %r27, %r26;                                .loc 2 33 1
    mov.u32     %r25, %r26;                                    mov.u32  %r4, %ntid.z;
    mov.u32     %r24, %r26;                                .loc 2 28 1
                                                               mov.u32  %r5, %ntid.y;
BB0_1:                                                     .loc 2 39 1
    .loc 2 25 1                                                mov.u32  %r6, %ntid.x;
        setp.lt.u32     %p1, %r27, 2;                  
    @%p1 bra    BB0_4;                                 BB1_1:
                                                           .loc 2 25 1
    .loc 2 28 1                                                setp.lt.u32  %p1, %r27, 2;
        add.s32     %r25, %r2, %r25;                       @%p1 bra     BB1_4;
    .loc 2 30 1                                        
        setp.lt.u32     %p2, %r25, 2;                      .loc 2 28 1
    mov.u32     %r27, 0;                                       add.s32  %r25, %r5, %r25;
    .loc 2 30 1                                            .loc 2 30 1
        @%p2 bra    BB0_4;                                     setp.lt.u32  %p2, %r25, 2;
                                                           mov.u32  %r27, 0;
    .loc 2 33 1                                            .loc 2 30 1
        add.s32     %r26, %r1, %r26;                           @%p2 bra     BB1_4;
    .loc 2 34 1                                        
        setp.gt.u32     %p3, %r26, 1;                      .loc 2 33 1
    mov.u32     %r27, 0;                                       add.s32  %r26, %r4, %r26;
    mov.u32     %r25, %r27;                                .loc 2 34 1
    .loc 2 34 1                                                setp.gt.u32  %p3, %r26, 1;
        @%p3 bra    BB0_5;                                 mov.u32  %r27, 0;
                                                           mov.u32  %r25, %r27;
BB0_4:                                                     .loc 2 34 1
    .loc 2 38 1                                                @%p3 bra     BB1_5;
        add.s32     %r24, %r24, 1;                     
    st.global.u32   [%rd1], %r24;                      BB1_4:
    .loc 2 39 1                                            .loc 2 38 1
        add.s32     %r27, %r3, %r27;                           add.s32  %r24, %r24, 1;
    bra.uni     BB0_1;                                     st.global.u32    [%rd1], %r24;
                                                           .loc 2 39 1
BB0_5:                                                         add.s32  %r27, %r6, %r27;
    .loc 2 41 2                                            bra.uni  BB1_1;
        ret;                                           
}                                                      BB1_5:
                                                           .loc 2 41 2
                                                               ret;
                                                       } 
```

然而，汇编器输出是另一回事（同样`bug=0`在左侧和`bug=1`右侧）：

```
 /*0008*/    MOV R1, c [0x0] [0x44];                MOV R1, c [0x0] [0x44];              
    /*0010*/    MOV R6, c [0x0] [0x140];               MOV R6, c [0x0] [0x140];
    /*0018*/    MOV R7, c [0x0] [0x144];               MOV R7, c [0x0] [0x144];
    /*0020*/    S2R R0, SR_Tid_X;                      MOV R0, RZ;
    /*0028*/    MOV R4, RZ;                            MOV R2, RZ;
    /*0030*/    S2R R3, SR_Tid_Z;                      MOV R3, RZ;
    /*0038*/    ST.E [R6], RZ;                         MOV R4, RZ;
    /*0048*/    S2R R2, SR_Tid_Y;                      ST.E [R6], RZ;
    /*0050*/    ISETP.LT.U32.AND P0, pt, R0, 0x2, pt;  ISETP.LT.U32.AND P0, pt, R2, 0x2, pt;
    /*0058*/    SSY 0xd0;                              @P0 BRA 0xb0;
    /*0060*/    @P0 BRA 0xc0;                          IADD R3, R3, c [0x0] [0x2c];
    /*0068*/    IADD R2, R2, c [0x0] [0x2c];           MOV R2, RZ;
    /*0070*/    MOV R0, RZ;                            ISETP.LT.U32.AND P0, pt, R3, 0x2, pt;
    /*0078*/    ISETP.LT.U32.AND P0, pt, R2, 0x2, pt;  @P0 BRA 0xb0;
    /*0088*/    SSY 0xa0;                              IADD R0, R0, c [0x0] [0x30];
    /*0090*/    @P0 BRA 0xc0;                          MOV R2, RZ;
    /*0098*/    IADD.S R3, R3, c [0x0] [0x30];         ISETP.GT.U32.AND P0, pt, R0, 0x1, pt;
    /*00a0*/    ISETP.GT.U32.AND P0, pt, R3, 0x1, pt;  MOV R3, RZ;
    /*00a8*/    MOV R0, RZ;                            @P0 EXIT;
    /*00b0*/    MOV R2, RZ;                            IADD R4, R4, 0x1;
    /*00b8*/    @P0 EXIT;                              IADD R2, R2, c [0x0] [0x28];
    /*00c8*/    IADD.S R4, R4, 0x1;                    ST.E [R6], R4;
    /*00d0*/    ST.E [R6], R4;                         BRA 0x50;
    /*00d8*/    IADD R0, R0, c [0x0] [0x28];           BRA 0xd8;
    /*00e0*/    BRA 0x50;                              NOP CC.T;
    /*00e8*/    BRA 0xe8;                              NOP CC.T;
    /*00f0*/    NOP CC.T;                              NOP CC.T;
    /*00f8*/    NOP CC.T;                              NOP CC.T; 
```

右边的代码缺少两条`SSY`指令，运行它会导致内核处于无限循环中，这与某种 SIMT 正确性问题一致，例如未检测到的分支分歧或同步障碍周围的分歧。真正有趣的是，它*在单个块中仅运行单个线程时*挂起。

如果我是你，我会建议在 NVIDIA 注册开发者网站上提交错误报告。

# outlook - HTML 电子邮件 - Outlook.com 无法识别我的图像垂直对齐控件

> ID：16101540
> 
> 赞同：2
> 
> 时间：2013-04-19T09:32:29.940
> 
> 标签：outlook, html-email, outlook.com

我在 2 单元格行的单元格 1 中有一个图像。单元格 2 中有文本。因为 Outlook.com 决定在文本之间提供额外的间距（与其他浏览器相比），它会扭曲（增加高度）整行：但单元格 1 中的图像保持与单元格顶部对齐.

我试过强制文本的行高，但这不起作用。

目前我的代码是：

```
<td style="vertical-align: middle;" valign="middle">
<p style="text-align: center;">
<img style="margin: 0 auto; vertical-align: middle;" valign="middle" title="Date and Venue" alt="Date and Venue" src="imgURL" height="x" width="y">
</p>
</td> 
```

但是所有这些说明都被 Outlook.com 忽略了。

如何使图像在单元格中居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:44:37.120

图像应始终包含`display:block;`在电子邮件中。您不需要任何边距或 css 对齐的东西。这是一个基本的例子：

```
<table width="100" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="100" height="100" align="center" valign="middle" bgcolor="#cccccc">

<img style="margin: 0; border: 0; padding: 0; display: block;" src="" width="50" height="50" alt="">

    </td>
  </tr>
</table> 
```

# c# - 在 ListView C# XAML 中绑定字典的键值

> ID：16101543
> 
> 赞同：0
> 
> 时间：2013-04-19T09:32:34.190
> 
> 标签：c#, xaml, binding, windows-8

我在绑定我的字典的元素时遇到问题。我的字典包含一个对象作为键和一个整数作为值。我必须在 ListView 中绑定这个字典。问题是我需要访问我的对象的属性来绑定它们在 listview.Properties 类型是字符串。我没有找到解决方案，这都是关于 wpf 但我正在使用带有 MVVM Light 的 Windows8。

有我的代码：

我的列表 ：

```
<ListView ItemsSource="{Binding Path=MotDansTweet}"
          HorizontalAlignment="Left"
          Height="570"
          Margin="64,28,0,0"
          VerticalAlignment="Top"
          Width="350"
          Background="#FF009BB4"
          Grid.Column="1">
  <StackPanel Height="118"
              Width="340">
    <Grid Height="100">
      <Grid HorizontalAlignment="Left"
            Height="122"
            VerticalAlignment="Top"
            Width="330"
            Margin="0,0,0,-22">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="137*" />
          <ColumnDefinition Width="193*" />
        </Grid.ColumnDefinitions>
        <Image Source="{Binding Path=Key.ProfileImageUrl }"
               HorizontalAlignment="Left"
               Height="112"
               VerticalAlignment="Top"
               Width="127" />
        <TextBlock Text="{Binding Path=Key.Username}"
                   Grid.Column="1"
                   HorizontalAlignment="Left"
                   Margin="10,10,0,0"
                   TextWrapping="Wrap"
                   VerticalAlignment="Top"
                   Height="46"
                   Width="173" />
        <TextBlock Text="{Binding Path=Values}"
                   Grid.Column="1"
                   HorizontalAlignment="Left"
                   Margin="10,61,0,0"
                   TextWrapping="Wrap"
                   VerticalAlignment="Top"
                   Height="41"
                   Width="154" />
      </Grid>
    </Grid>
  </StackPanel>
</ListView> 
```

我的字典：

```
 private Dictionary<ObjetFollowingFollowerFinal,int> _motDansTweet ;
    public Dictionary<ObjetFollowingFollowerFinal, int> MotDansTweet
    {
        get { return _motDansTweet; }
        set
        {
            _motDansTweet = value;
            RaisePropertyChanged("MotDansTweet");
        }
    } 
```

我的对象：

```
 public class ObjetFollowingFollowerFinal
{
    public string Username { get; set; } // I need it
    public string Description { get; set; }
    public string ProfileImageUrl { get; set; } //I need it
    public int StatusesCount { get; set; }
    public int FollowerCount { get; set; }
    public int FriendsCount { get; set; }
    public int ListedCount { get; set; }
    public List<User> ListeFollower = new List<User>(); 

    public ObjetFollowingFollowerFinal()
    {

    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:41:54.527

我在 Win7 WPF 上编写了一些代码，但这也对你有用：

C＃：

```
public MainWindow()
        {
            _motDansTweet = new Dictionary<ObjetFollowingFollowerFinal, int>();
            _motDansTweet.Add(new ObjetFollowingFollowerFinal { Username = "Karl1" }, 1);
            _motDansTweet.Add(new ObjetFollowingFollowerFinal { Username = "Karl2" }, 2);
            _motDansTweet.Add(new ObjetFollowingFollowerFinal { Username = "Karl3" }, 3);
            _motDansTweet.Add(new ObjetFollowingFollowerFinal { Username = "Karl4" }, 4);

            Resources["MotDansTweet"] = MotDansTweet;

            InitializeComponent();
        } 
```

XAML：

```
<ListView ItemsSource="{DynamicResource MotDansTweet}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Value"
                            DisplayMemberBinding="{Binding Value}" />
                    <GridViewColumn Header="Key"
                            DisplayMemberBinding="{Binding Key.Username}" />
                </GridView>
            </ListView.View>
        </ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:49:08.623

尝试指定ItemTemplate而不是直接将StackPanel放在ListView中：

```
<ListView ItemsSource="{Binding Path=MotDansTweet}"
    HorizontalAlignment="Left" Height="570" Margin="64,28,0,0" VerticalAlignment="Top" Width="350" Background="#FF009BB4" Grid.Column="1">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Height="118" Width="340">
                <Grid Height="100">
                    <Grid HorizontalAlignment="Left" Height="122" VerticalAlignment="Top" Width="330" Margin="0,0,0,-22">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="137*"/>
                            <ColumnDefinition Width="193*"/>
                        </Grid.ColumnDefinitions>
                        <Image Source="{Binding Path=Key.ProfileImageUrl }" HorizontalAlignment="Left" Height="112" VerticalAlignment="Top" Width="127"/>
                        <TextBlock Text="{Binding Path=Key.Username}" Grid.Column="1" HorizontalAlignment="Left" Margin="10,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="46" Width="173"/>
                        <TextBlock Text="{Binding Path=Values}" Grid.Column="1" HorizontalAlignment="Left" Margin="10,61,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="41" Width="154"/>
                    </Grid>
                </Grid>
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

# css - 如何在样式内容引用中参数化主机？

> ID：16101554
> 
> 赞同：0
> 
> 时间：2013-04-19T09:33:20.200
> 
> 标签：css, deployment, web, path

对于像图像这样的静态内容，在一个或多个 CSS 样式表中设置参数主机的最简单方法是什么？

通过*参数主机*，我的意思是让主机在其他地方定义，而路径是站立的，以便可以针对不同级别的部署更改主机定义。

虽然这对于包含 javascript 的图像来说是微不足道的，并且虽然`<base>`为 HTML 提供了一个 url，但我不知道如何使用样式资产实现相同的结果。

笔记：

*   问题是关于标准 CSS，没有预处理器
*   使用相对路径将不起作用，因为样式表需要从不同的域加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:41:47.090

实际上，我发现使用相对路径会起作用，因为相对 URI 是根据样式表的位置计算的，而不是服务页面（请参阅[https://developer.mozilla.org/en-US/docs/CSS/uri](https://developer.mozilla.org/en-US/docs/CSS/uri) )

那么，就我而言，最好的办法是拥有相对 URI，并将资产与样式表一起部署

# javascript - parseFloat 为瑞典文化提供 NaN

> ID：16101558
> 
> 赞同：1
> 
> 时间：2013-04-19T09:33:29.537
> 
> 标签：javascript, jquery, jquery-validate, jquery-globalization

我正在使用[**jQuery Globalize**](https://github.com/jquery/globalize)插件和 jQuery 验证。

对于有效的瑞典数字`5.000,00`parseFloat 函数给出`NaN`

下面的代码/库中的错误可能是什么？

```
<script type="text/javascript" src="/Scripts/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/Scripts/globalize.js"></script>
<script type="text/javascript" src="/Scripts/cultures/globalize.culture.sv.js"></script>
<script type="text/javascript" src="/Scripts/jquery.validate.js"></script>
<script type="text/javascript" src="/Scripts/jquery.validate.unobtrusive.js" ></script>

<script type="text/javascript">

 jQuery(function () {

        Globalize.culture('sv');

        $.validator.methods.number = function (value, element) {

            if (Globalize.parseFloat(value)) { // this gives NaN

                return true;
            }
            return false;
        }
    });
   </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:51:10.693

我认为你使用了错误的文化。或者您输入的数字格式错误。 [http://jsfiddle.net/98sgm/1/](http://jsfiddle.net/98sgm/1/)

```
jQuery(function () {
    Globalize.culture('sv');
    alert(Globalize.parseFloat('5.000,00'));
    alert(Globalize.parseFloat('5,000.00'));
 }); 
```

以及来自文化文件的源代码：

```
numberFormat: {
    ",": " ",
    ".": ",",
    negativeInfinity: "-INF",
    positiveInfinity: "INF",
    percent: {
        ",": " ",
        ".": ","
    },
    currency: {
        pattern: ["-n $","n $"],
        ",": ".",
        ".": ",",
        symbol: "kr"
    }
}, 
```

编辑：创建新的文化文件并将 numberFormat 选项设置为以下：

```
numberFormat: {
    ",": ".",
    ".": ",",
    negativeInfinity: "-INF",
    positiveInfinity: "INF",
    percent: {
        ",": " ",
        ".": ","
    },
    currency: {
        pattern: ["-n $","n $"],
        ",": ".",
        ".": ",",
        symbol: "kr"
    }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T12:23:28.750

瑞典实际上使用空格作为千​​位分隔符。不过，我找不到一个很好的参考。（我是瑞典人，1 000 000,123 在我看来比 1.000.000,123 好）

下面的 .NET C# 代码接缝来确认它。

```
Console.WriteLine(String.Format("'{0}'", System.Globalization.CultureInfo.GetCultureInfo("sv-SE").NumberFormat.NumberGroupSeparator)); 
```

此外，如果您转到“区域和语言”，然后在 Windows 中转到“其他设置”并选择瑞典语（瑞典），它会将数字分组符号显示为空格。

和甲骨文接缝同意： [http ://docs.oracle.com/cd/E19455-01/806-0169/overview-9/index.html](http://docs.oracle.com/cd/E19455-01/806-0169/overview-9/index.html)

# php - 数据库逻辑 VS 应用程序逻辑

> ID：16101561
> 
> 赞同：2
> 
> 时间：2013-04-19T09:33:36.170
> 
> 标签：php, mysql, postgresql, database-design

对不起，如果这是一个愚蠢的问题。我已经有一段时间没玩了。

我正在决定是否将 PostgresSQL 用于 Web 应用程序。我以前从未使用过它。完成研究后，我真的很喜欢它用于存储函数的 PGSQL 语言。

通常在我的网络应用程序代码中，我会保存一条记录。这包括检查记录是否已经存在 - 如果存在则更新它，否则插入新记录。

使用 PGSQL - 我可以在一个查询中完成所有这些操作（而不是 Mysql，我很确定你不能）

他们对此有优势吗？或者这个逻辑是否应该保留在 web 应用层而不是数据库上的存储函数中。

这是 PGSQL 中的一个粗略示例。它只是说明性的，并不意味着是安全或好的代码。

```
CREATE OR REPLACE FUNCTION save_client(IN strforename character varying, IN strnew character varying)
  RETURNS TABLE(forename character varying, surname character varying) AS
$BODY$

    DECLARE myrec int;

    BEGIN   

        SELECT idx_clients INTO myrec from "Clients" WHERE LOWER("Clients".forename)=$1;

        IF NOT FOUND THEN
            RAISE NOTICE 'No results found.%',myrec;

            INSERT INTO "Clients" (forename,surname) VALUES (strnew,strforename);
        ELSE
            RAISE NOTICE 'YES results found.%',myrec;

            IF myrec NOTNULL THEN
                UPDATE "Clients" SET forename=$2 WHERE idx_clients=myrec;
            END IF;

        END IF;

    END;

$BODY$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:25:09.027

我更喜欢将其放入数据库中，原因如下：

1.  它允许您将数据库封装在 API 后面。您甚至可以使您的 API 可被发现（参见[http://ledgersmbdev.blogspot.com](http://ledgersmbdev.blogspot.com)上的许多帖子以了解一种方法），以便应用程序可以在合理的范围内在运行时发现调用语法。再次封装有助于确保多个应用程序可以安全地访问同一个数据库，因为 rdbms 最终会成为具有明确定义的 API 的服务器。

2.  它本质上确保了一种依赖倒置，您可以使用它来创建更稳定的接口。

3.  它允许您在大多数情况下将 SQL 排除在应用程序文件之外（因为调用接口本身可以抽象为单个 API）。

4.  更好地控制事务逻辑和性能（但见下文）

话虽如此，有几个陷阱需要注意：

1.  存储过程是最易于维护的，它们是带有一些次要支持逻辑的单个大型查询。

2.  小心锁

3.  不要混合事务和非事务逻辑。事务逻辑属于数据库。任何非事务性的东西都属于它之外。例如，不要从存储过程发送电子邮件。不要暂停数据库事务以尝试与用户建立网络连接，询问他或她是否要继续。不要将这些直接从存储过程中挂钩到具有实际影响的脚本中......

4.  小心合同。人们在存储过程开发中遇到的大问题之一与模式更改有关。您添加了一个需要收集的附加列，而不是两个您的代码更改的地方，您至少有三个。这是我非常强调可发现性的原因之一，因为这使您可以构建更灵活的合约并仅在需要更改的地方更改代码。换句话说，事情可以优雅地失败。

我说这大部分是作为数万行 PostgreSQL 存储过程的作者，主要是在 sql 和 pl/pgsql 中。存储过程会带来管理挑战，但是一旦你驯服了它们，它们就值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:42:40.740

我通常宁愿在应用程序中拥有这种功能，原因如下：

1.  **服务器**负载 无论如何，您的数据库服务器通常会承受很大的负载，而应用程序服务器的负载通常较少。
2.  **技术**它使您的实现数据库不可知，因此如果您以后决定迁移到 MySQL 或 Oracle，您不会丢失这些功能或必须重新设计它们。
3.  **可维护性**将您的代码抽象到数据库中将不那么直观，如果其他人必须在您之外维护它。他们会花时间寻找不存在的功能。

您的主要考虑可能与我的不同。我希望在数据库中完成这一切会带来一些性能提升，所以这可能会影响它，但我总是尽量让我的实现与技术无关。

# eclipse - 添加来自 Meteor 的 api 以在 Eclipse 或 Aptana 中开发

> ID：16101565
> 
> 赞同：2
> 
> 时间：2013-04-19T09:33:40.560
> 
> 标签：eclipse, node.js, meteor, aptana

我搜索了流星文档 ( [http://docs.meteor.com/](http://docs.meteor.com/) ) 以找到一种在 Eclipse 或 Aptana 中添加 api 并在此 IDE 中开发我的应用程序的方法。

我知道如何在我的项目中添加外部库，但我不知道要添加哪些库以在 Eclipse / Aptana 中使用 Meteor 并使用（例如）自动完成功能，以便我可以输入：

> **流星。**<-- 我希望日食显示所有功能

有什么要添加的库列表吗？你能帮助我吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T09:39:45.437

这是 ！！;) [https://github.com/angelozerr/tern.java/wiki/Tern-&-Meteor-support](https://github.com/angelozerr/tern.java/wiki/Tern-&-Meteor-support)

我在 Eclipse 和 sublime 文本中使用它，它非常有用

# java - 在使用 Java 的 firefox 9.0 上运行 Selenium 2.32 失败

> ID：16101569
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:33:43.683
> 
> 标签：java, selenium

> 线程“主”org.openqa.selenium.UnhandledAlertException 中的异常：模态
> 
> 对话框显示构建信息：版本：'2.32.0'，修订：'6c40c18'，时间：'2013-04-09 17:23:22' 系统信息：os.name：'Windows 7'，os.arch:' amd64', os.version: '6.1', java.version: '1.7.0_15' 会话 ID: 349b227a-82f8-4068-905c-70f4dcd271ed 驱动信息: org.openqa.selenium.firefox.FirefoxDriver Capabilities [{platform=XP ，acceptSslCerts=true，javascriptEnabled=true，cssSelectorsEnabled=true，databaseEnabled=true，browserName=firefox，handlesAlerts=true，nativeEvents=true，webStorageEnabled=true，rotatable=false，locationContextEnabled=true，applicationCacheEnabled=true，takeScreenshot=true，版本=9.0.1}] 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 在 sun。reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187) at org.openqa.selenium.remote .ErrorHandler.createUnhandledAlertException(ErrorHandler.java:168) 在 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:141) 在 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:554) 在org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:307) 在 org.openqa.selenium.remote.RemoteWebDriver.findElementById(RemoteWebDriver.java:348) 在 org.openqa.selenium.By$ById.findElement( By.java:216) 在 gamil 的 org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:299)。主要（gamil.java:16）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:38:51.283

好吧，这并没有太大帮助。但你可以尝试：

```
Alert alert = driver.switchTo().alert;
alert.accept(); 
```

（希望代码没问题，把它放在我的脑海里）

基本上，您可以从堆栈跟踪中读取您的站点上有警报。所以你必须接受它或拒绝它。

如果这没有帮助，则需要更多详细信息。阅读[http://whathaveyoutried.com](http://whathaveyoutried.com)并尝试理解它所说的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T10:30:27.800

有一个警报，这就是`UnhandledAlertException`发生异常的原因：

```
 Alert alert = driver.switchTo().alert;
  alert.accept();  //code to oK alert

//alert.dismiss();  //code to Cancel alert 
```

# android - Android 间谍软件可以从应用列表中隐藏吗？

> ID：16101572
> 
> 赞同：0
> 
> 时间：2013-04-19T09:33:53.450
> 
> 标签：android, virus, malware, spyware

是否有可能在未经用户许可的情况下在 Android 上安装任何有害软件并将该软件隐藏在应用列表中？

间谍软件、病毒等

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:39:15.983

可以有一个没有启动器图标的应用程序，但每个应用程序都会显示在设置的应用程序列表中。

此外，从 Android 3.1 开始，应用程序在用户至少启动一次之前不允许执行任何操作，这要求它们存在于启动器中。

# c# - C#:检查excel文件版本

> ID：16101574
> 
> 赞同：0
> 
> 时间：2013-04-19T09:33:58.373
> 
> 标签：c#

有没有办法我们可以获取 excel 文件的版本？比如 2003/2007/2010 的版本。不是本地系统版本。就像，我在文件夹 Ex: C:\NewFolder\qq.xls 中保存了一个 excel 文件

我必须检查这个文件的版本，如果它是 2003/2007/2010。

请建议是否有办法。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:59:06.657

```
FileStream stream = null;
IExcelDataReader excelReader = null;
DataSet excelDataSet = null;

using (stream = File.Open(filePath, FileMode.Open, FileAccess.Read))
{
    if (filePath.EndsWith(".xlsx"))
    {
        //Reading from a OpenXml Excel file (2007 format; *.xlsx)
        excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
    }
    else //.xls
    {
        //Reading from a binary Excel file ('97-2003 format; *.xls)
        excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
    }
    excelReader.IsFirstRowAsColumnNames = true;
    excelDataSet = excelReader.AsDataSet();
} 
```

IExcelDataReader [http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

# java - 作为参数传递时使对象不可变

> ID：16101577
> 
> 赞同：6
> 
> 时间：2013-04-19T09:34:03.013
> 
> 标签：java

当作为参数传递时，我可以使对象不可变，以便被调用的方法不能更改它但被调用者可以？

所以我有这样的事情：

```
Class Car {
  Wheel wheel_1;

  Axis axis = new Axis(wheel_1);
}

Class Wheel {
  int size;

  setSize(int size) {}
  int getSize() {}      
} 
```

现在我建造了一辆带轮子的汽车。然后从类车我想构建一个轴。

为此，我将 wheel_1 传递给 Axis 的构造函数。

现在我的问题是：我能否以某种方式确保 Axis 的构造函数不会改变 wheel_1 的大小，但 class car 可以改变它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:37:45.573

是的。通常这是通过使用类的[复制构造函数](http://www.javapractices.com/topic/TopicAction.do?Id=12)来完成的`Wheel`。

例如：

```
wheel_1 = new Wheel(wheel); 
```

请记住，`Wheel`课程需要以支持这一点的方式编写。也就是说，它应该提供一个复制构造函数。

**注意：这并没有使对象 immutable**。它只是制作了一个副本，你的班级以外的任何人都无法编辑它。

如果您`Wheel`从任何其他方法返回实例，请务必在退出时防御性地复制它：

```
Wheel getWheel() {
  return new Wheel(wheel_1);
} 
```

* * *

最后，值得一提的是，尽可能创建不可变类总是一个好主意。所以也许你可以通过实际制作不可变来避免这个问题`Wheel`？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T09:47:38.527

使`Wheel`类不可变。然后让对象在需要新大小时`Car`创建一个新对象。`Wheel`

```
public final class Wheel {
    private final int size;

    public Wheel(int size) {
        this.size = size;
    }

    public int getSize() {
        return size;
    }
} 
```

现在您可以毫无问题地将轮子对象传递给 Axis。

```
public class Car {
    private Wheel wheel;
    private Axis axis;

    public Car(int initialWheelSize) {
        wheel = new Wheel(initialWheelSize);
        axis = new Axis(wheel);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T09:38:16.357

`Axis`向构造函数传递`wheel_1`.

```
class Car {
    Wheel wheel_1;

    Axis axis = new Axis(new Wheel(wheel_1));
} 
```

此外，`Wheel`将需要一个构造函数来获取另一个`Wheel`对象并复制其属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T09:39:15.000

为什么不将参数作为没有 setSize() 方法的超类发送

```
Class Car {
  Superwheel wheel_1;

  Axis axis = new Axis(wheel_1);
}

class Superwheel
{
   int size;
 int getSize() {}    
}

Class Wheel extends Superwheel{
  int size;

  setSize(int size) {}
  int getSize() {}      
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T09:44:00.443

我会让 Wheel 实现一个只有访问器方法的接口，即： -

**例子**

```
interface WheelInterface
{
  int getSize();
}

class Wheel implements WheelInterface
{
  // methods
}

class Axis
{
  public Axis(WheelInterface wheel)
  {
    // Only getSize will be available
  }
} 
```

现在，只需传递 WheelInterface 而不是 Wheel 并且只有访问器方法可用于 Axis 类的构造函数

**好处**

这样做的好处是不需要复制；您只是向 Axis 类提供了一个合同，并且该合同声明它只能获取大小，而不能更改它。

通过按值传递相同的*对象引用*，您不必调用任何复制构造函数，也不必担心深浅复制语义。我不想在我的轮子上使用克隆，由于其他答案的评论中提到的原因，我认为这感觉有点脏。

在面向对象的模式中，使用接口抽象出你不需要的东西也是良好设计的标志。如果您的车轮上装有雪地轮胎，那么您的 Axis 课程可能甚至不需要关心！

**缺点**

正如其他人所提到的，可以将接口转换回具体类型（正如其他人所提到的，假设您知道要转换的内容）；这称为*向下转换*，我不推荐它；如果这是在类似的情况下完成的，它可能无法通过*代码审查*。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T09:39:22.900

是的你可以。如果您将 Car 和 Wheel 放在同一个包中并声明 Wheel setter 字段受到保护。因此，如果在另一个包中声明 Axis，则无法访问 Wheel 的设置器，从而使 Wheel 从 Axis 的角度来看是不可变的。

好吧，这个解决方案是基本的开始。当然，你可以根据你想使不可变的级别来考虑是否使Wheel最终，克隆，可序列化等。

# vba - VBA代码根据单元格值创建公式

> ID：16101581
> 
> 赞同：0
> 
> 时间：2013-04-19T09:34:15.553
> 
> 标签：vba, excel, hyperlink, cell

我有一个电子表格，其中包含单元格 A 到 G 中的值。

我需要读取单元格 F 中的数据，并根据数据，在 H 列中的相应单元格中制定一个超链接，并将来自单元格 G（F 旁边）的数据插入超链接中。

EG 1

单元格 F 包含：DPD

单元格 g 包含：123456

希望单元格 H 创建超链接：

=HYPERLINK(" [http://www.dpd.co.uk/tracking/quicktrack.do?search.consignmentNumber=](http://www.dpd.co.uk/tracking/quicktrack.do?search.consignmentNumber=) "&CELLG*&"&search.searchType=16&search.javascriptValidated=0&appmode=guest")

EG 2

单元格 F 包含：TNT

单元格 g 包含：abcde

希望单元格 H 创建超链接：

=HYPERLINK(" [http://www.tnt.com/express/en_gb/site/searchresults.html?q=CELLG](http://www.tnt.com/express/en_gb/site/searchresults.html?q=) **"** )

我在单元格 F 中有更多其他值，它们依赖于不同的超链接公式，但我应该能够重复和更改代码以适应这些值。

更新：

这是我目前应用该公式的尝试。

```
 Range("I1").Select
ActiveCell.FormulaR1C1 = _
    "=IF(RC[-2]=""dpd"",HYPERLINK(""http://www.dpd.co.uk/tracking/quicktrack.do?search.consignmentNumber=""&RC[-1]&""&search.searchType=16&search.javascriptValidated=0&appmode=guest""))"
Range("I1").Select
Selection.AutoFill Destination:=Range("i1:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy
 Range("I2").Select
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove

Range("A1:I1").Select
ActiveSheet.Range("A1:i1").AutoFilter Field:=9, Criteria1:="FALSE"
   Range("I2").Select
ActiveCell.FormulaR1C1 = _
    "=IF(R[-1]C[-2]=""City Link"",HYPERLINK(""http://www.packagetrackr.com/track/citylink/""&R[-1]C[-1]&""""))"
  Range("I2").Select
Selection.AutoFill Destination:=Range("i2:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy

Range("A1:I1").Select
ActiveSheet.Range("A1:i1").AutoFilter Field:=9, Criteria1:="FALSE"
Range("i2").Select
ActiveCell.FormulaR1C1 = _
    "=IF(R[-1]C[-2]=""hermes"",HYPERLINK(""http://www.hermes-europe.co.uk/tracker.html?trackingNumber=""&R[-1]C[-1]&""&Postcode=""&R[-1]C[-4]&R[-1]C[-3]&""""))"
  Range("I2").Select
Selection.AutoFill Destination:=Range("i2:i" & Range("A" & Rows.Count).End(xlUp).Row), Type:=xlFillCopy

If ActiveSheet.AutoFilterMode = True Then ActiveSheet.AutoFilterMode = False
Range("I2").Select
Selection.Delete Shift:=xlUp
Range("I1").Select 
```

我无法弄清楚如何在过滤列表上自动填充。

也许我需要尝试循环方法？

失败的公式：

=IF(G2="hermes",HYPERLINK("www.hermes-europe.co.uk/tracker.html?trackingNumber="&H2&"&Postcode="&e2&f2&"),IF(G2="Parcelforce",HYPERLINK("www .parcelforce.com/track-trace?trackNumber="&h2&"),IF(G2="Royal Mail",HYPERLINK("www.royalmail.com/track-trace?track=track&trackNumber="&h2&"&gear=track&imageRootPath=&loc =en_GB&default=default&emt=emt"),IF(G2="Yodel",HYPERLINK("www.myyodel.co.uk/tracking?parcel_id="&h2&"&postcode="&e2&"%23"&f2&"),IF(G2 ="4 Square",HYPERLINK("login.smartconsign.co.uk/trackingcust.aspx?partnerid=EAFSQ001&jobno="&h2&"),IF(G2="Deutsche Post",HYPERLINK("nolp.dhl.de/nextt-online-public/set_identcodes.do?lang=en&idc="&h2&"&rfn=&extendedSearch=true"),IF(g2="No Tracking","&h2&")"""))))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:41:01.007

您必须使用相关单元格的地址而不是`CELLG`. 请参阅此示例。

这在单元格中`H1`

要在 Excel 公式中进行比较，您可以使用`IF`公式

例子

`=If(Condition,Do if Cond is true, Do if Cond is False)`

所以

`=IF(F2="TNT",Do Something if equal to TNT,Do Something if not equal to TNT))`

或者

`=IF(F2="DPD",Do Something if equal to DPD,Do Something if not equal to DPD))`

结合以上两者将给出

`=IF(F2="TNT",Do Something if equal to TNT,IF(F2="DPD",Do Something if equal to DPD,Do Something if not equal to DPD)))`

如果 TNT 然后使用这个网站

`http://www.tnt.com/express/en_gb/site/searchresults.html?q=`

如果 DPD 然后使用这个网站

`http://www.dpd.co.uk/tracking/quicktrack.do?search.consignmentNumber=`

我们现在要做的就是将它附加到上面的公式中

`=IF(F1="TNT",HYPERLINK("http://www."&F1&".com/express/en_gb/site/searchresults.html?q="& G1& "&search.searchType=16&search.javascriptValidated=0&appmode=guest"),IF(F1="DPD",HYPERLINK("http://www."&F1&".co.uk/tracking/quicktrack.do?search.consignmentNumber="& G1& "&search.searchType=16&search.javascriptValidated=0&appmode=guest"),""))`

截屏

![在此处输入图像描述](https://i.stack.imgur.com/Wra5V.png)

# php - CJuiDatepicker 在选择时隐藏

> ID：16101586
> 
> 赞同：1
> 
> 时间：2013-04-19T09:34:38.140
> 
> 标签：php, yii, datepicker, hide, onselect

我试图在选择日期后强制 CJuiDatepicker 隐藏。没有任何效果。我怎样才能实现它？

这是我的实际代码：

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
            'model' => $model,
            'attribute' => 'confirmStart',
            'options' => array(
                'format' => 'yyyy-mm-dd',
                'showButtonPanel' => false,
                'onSelect' => 'js:function() {
                        $("#Projects_confirmStart").datepicker("hide");
                    }
                    ',
            ),
        )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T20:54:40.967

这对我有用。

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'model' => $model,
    'attribute' => 'fechaAdq',
    'language' => 'es',
    'i18nScriptFile' => 'jquery-ui-i18n.min.js',
    'htmlOptions' => array(
        'id' => 'FMAIDetalleAdq_fechaAdq',
        'size' => '10', * *'onChange' => 'jQuery("#FMAIDetalleAdq_fechaAdq").datepicker("hide")' * *
    ) ,
    'defaultOptions' => array(
        'showOn' => 'focus',
        'showOtherMonths' => true,
        'selectOtherMonths' => true,
        'changeMonth' => true,
        'changeYear' => true,
        'showButtonPanel' => true,
    ) ,
    'options' => array(
        'showAnim' => 'fold',
        'format' => 'dd-mm-yyyy',
        'language' => 'es',
    ) ,
) , true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:02:05.217

它在我的测试 Yii 应用程序中运行良好。用 Mozilla firebug 检查你的程序。选择日期时，控制台可能会出错。可能是您的日期选择器功能受到其他一些插件/脚本的影响。

# c# - 另一个进程正在使用文件来生成缩略图

> ID：16101591
> 
> 赞同：0
> 
> 时间：2013-04-19T09:34:55.617
> 
> 标签：c#, asp.net, stream

我正在处理文件管理器项目。如果文件是图像类型，我需要生成缩略图。我可以通过使用`IHttpHandler`with 方法 得到

```
 Sytem.Drawing.Image.GetThumbnailImage(), 
```

**这是一些代码**

```
Hashtable ht;
            ht = new Hashtable();
            using (FileStream fInfo = new FileStream(context.Server.MapPath(url), FileMode.Open))
            {
                byte[] bFile;
                bFile = GenerateThumbnail(fInfo, XLen, YLen);
                ht.Add(id, bFile);
                fInfo.Close();

                Byte[] arrImg = (byte[])ht[id];
                context.Response.Clear();
                context.Response.ContentType = "image/jpeg";
                context.Response.BinaryWrite(arrImg);
                context.Response.End();
            }
    private byte[] GenerateThumbnail(Stream fStream, string xLen, string yLen)
    {
        using (Image img = Image.FromStream(fStream))
        {
            Image thumbnailImage = img.GetThumbnailImage(int.Parse(xLen), int.Parse(yLen), new Image.GetThumbnailImageAbort(ThumbnailCallback), IntPtr.Zero);

            using (MemoryStream imageStream = new MemoryStream())
            {
                thumbnailImage.Save(imageStream,System.Drawing.Imaging.ImageFormat.Jpeg);

                byte[] imageContent = new Byte[imageStream.Length];
                imageStream.Position = 0;
                imageStream.Read(imageContent, 0, (int)imageStream.Length);
                return imageContent;
            }
        }
    } 
```

**问题**

新上传的关于生成拇指投掷期望的文件：被另一个进程使用，有时它会显示缩略图。问：我想在哪里关闭流？

# hbase - Hive-HBase 集成：找不到表

> ID：16101592
> 
> 赞同：1
> 
> 时间：2013-04-19T09:34:56.513
> 
> 标签：hbase, hive, hiveql

我指的[是](https://cwiki.apache.org/Hive/hbaseintegration.html#HBaseIntegration-Usage)Hive-HBase 集成。

首先，我验证了 HBase 中没有名为 ORDERS_HIVE_DUMMY 的表：

```
hbase(main):016:0> describe 'ORDERS_HIVE_DUMMY'

ERROR: Failed to find table named ORDERS_HIVE_DUMMY

Here is some help for this command:
Describe the named table. For example:
  hbase> describe 't1' 
```

然后我启动了蜂巢外壳：

```
hduser@cldx-1139-1033:~/hadoop_ecosystem/apache_hive/hive_installation/hive-0.9.0/bin$ ./hive --auxpath $HIVE_HOME/lib/hive-hbase-handler-0.9.0.jar,$HBASE_HOME/hbase-0.94.6.1.jar,$HBASE_HOME/lib/zookeeper-3.4.5.jar,$HIVE_HOME/lib/guava-r09.jar -hiveconf hbase.zookeeper.quorum=cldx-1140-1034
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
Logging initialized using configuration in jar:file:/home/hduser/hadoop_ecosystem/apache_hive/hive_installation/hive-0.9.0/lib/hive-common-0.9.0.jar!/hive-log4j.properties
Hive history file=/tmp/hduser/hive_job_log_hduser_201304192016_1559705029.txt
hive> 
```

然后，我创建了一个表

```
hive> CREATE TABLE ORDERS_HIVE_DUMMY(ORDER_ID STRING,CUSTOMER_ID STRING,PRODUCT_ID STRING,ORDER_DATE TIMESTAMP,QUANTITY DOUBLE,AMOUNT DOUBLE,PAYMENT_MODE STRING) STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'  WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,ORDER_DETAILS:CUSTOMER_ID,ORDER_DETAILS:PRODUCT_ID,ORDER_DETAILS:REQUEST_DATE,ORDER_DETAILS:PRODUCT_QUANTITY,ORDER_DETAILS:PRICE,ORDER_DETAILS:PAYMENT_MODE");
OK
Time taken: 11.893 seconds 
```

然后，我验证了该表是在 HBase 中创建的

```
hbase(main):017:0> describe 'ORDERS_HIVE_DUMMY'
DESCRIPTION                                                                       ENABLED
 {NAME => 'ORDERS_HIVE_DUMMY', FAMILIES => [{NAME => 'ORDER_DETAILS', BLOOMFILTER true
  => 'NONE', REPLICATION_SCOPE => '0', VERSIONS => '3', COMPRESSION => 'NONE', MI
 N_VERSIONS => '0', TTL => '2147483647', BLOCKSIZE => '65536', IN_MEMORY => 'fals
 e', BLOCKCACHE => 'true'}]} 
```

但是现在当我在 Hive 上查询表时，我得到了一个异常：

```
hive> select * from ORDERS_HIVE_DUMMY;
OK
Failed with exception java.io.IOException:org.apache.hadoop.hbase.TableNotFoundException: orders_hive_dummy
Time taken: 0.455 seconds 
```

我猜想查询外部表需要一些提示写在 HIve 提示符上的查询？可能是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:26:10.450

HBase 中的表名是，`ORDERS_HIVE_DUMMY`但 hive 中的是`orders_hive_dummy`，所以你应该使用`CREATE TABLE orders_hive_dummy`.

# cocos2d-iphone - 使 box2d 主体以正弦波类型运动

> ID：16101596
> 
> 赞同：1
> 
> 时间：2013-04-19T09:35:19.003
> 
> 标签：cocos2d-iphone, box2d, physics, box2d-iphone

如何使 box2d 主体以正弦波类型运动？我相信它需要施加一些力才能沿着正弦曲线路径移动它，但我不确定如何。我非常感谢任何使这成为可能的指导方针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:43:16.933

我没有尝试过，但是[让 Box2d 对象遵循预定路径](https://stackoverflow.com/questions/8629524/making-a-box2d-object-follow-a-predetermined-path)中提供的鼠标连接解决方​​案看起来很优雅，应该可以工作。

您可能会在移动过程中稍有延迟，但看起来会更“自然”。

如果您想要一个精确的移动，请查看：[让 box2d 主体沿着贝塞尔曲线/弧形路径移动，](https://gamedev.stackexchange.com/questions/35553/making-a-box2d-body-move-along-a-bezier-curve-arc-path "使 box2d 主体沿贝塞尔曲线/弧形路径移动")但物理可能会“损坏”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:51:59.467

我假设您是数值模拟物理学：`v = v + a * dt, x = x + v * dt`，具有`dt`固定的时间步长，`a`并由力的总和除以其质量（F = m * a）构成。在这种情况下，有多种方法可以实现类似正弦波的运动。您可以应用正弦波之类的力，因为正弦函数具有仅在您对其进行积分/微分时才会改变相位的特性。或者您可以模拟一个[简单的谐波运动](http://en.wikipedia.org/wiki/Simple_harmonic_motion)，如质量弹簧系统，其中力与物体到某个点的负距离成正比。

# ios - Gamecenter 比赛数据未更新

> ID：16101599
> 
> 赞同：4
> 
> 时间：2013-04-19T09:35:23.370
> 
> 标签：ios, game-center, gamekit, ios6.1

我有一个奇怪的问题`GameKit`。我想知道其他人是否遇到同样的问题。它是一个错误吗？

我已经使用游戏工具包实现了一个基本的回合制游戏。一个玩家邀请另一个玩家

```
+ (void)findMatchForRequest:(GKMatchRequest *)request withCompletionHandler:(void (^)(GKTurnBasedMatch *match, NSError *error))completionHandler 
```

并结束转弯

```
- (void)endTurnWithNextParticipants:(NSArray *)nextParticipants turnTimeout:(NSTimeInterval)timeout matchData:(NSData *)matchData completionHandler:(void (^)(NSError *error))completionHandler 
```

第二个玩家接受并开始游戏。在第二个玩家玩完他的回合后，他结束了回合

```
- (void)endTurnWithNextParticipants:(NSArray *)nextParticipants turnTimeout:(NSTimeInterval)timeout matchData:(NSData *)matchData completionHandler:(void (^)(NSError *error))completionHandler 
```

等等...

即使有自定义消息，玩家也会收到通知，一切正常。

当应用程序（其他播放器）在后台并且我通过点击通知横幅启动应用程序时，它也可以工作。

当应用程序在一台设备上在后台运行并且另一台设备结束轮次时，就会出现此问题。第一个设备收到关于转弯的通知，但是当我启动应用程序（不是通过点击通知横幅，只是手动）并加载比赛时，我得到了旧的比赛数据。

```
+ (void)loadMatchesWithCompletionHandler:(void (^)(NSArray *matches, NSError *error))completionHandler 
```

我不会在我的应用程序中保留任何游戏数据，只是暂时的对象。我已尝试关闭两台设备上的应用程序并再次加载匹配项。他们从游戏中心的服务器获取不同的比赛数据。其中一个获得旧数据，另一个已结束回合，获得更新的比赛数据。

我用以下方法尝试过同样的事情，它有效，但我无法结束转弯。

```
- (void)saveCurrentTurnWithMatchData:(NSData *)matchData completionHandler:(void (^)(NSError *error))completionHandler 
```

在测试时，我不使用模拟器，只使用设备。SDK 6.1、iOS 6.0.1，当然还有沙盒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T10:45:44.040

该`loadMatchesWithCompletionHandler:`调用仅获取比赛的元数据，例如谁在比赛，比赛的状态等。本质上，您将在概览视图控制器中显示哪些信息。

要获取最新版本的比赛数据 blob，请在显示游戏之前调用`loadMatchDataWithCompletionHandler:`该对象。`GKTurnBasedMatch`在某些情况下，这也必须在发送回合或结束比赛后完成！

# c++ - 用 clang 编译 MSVC 标准库。类范围内的显式模板函数特化

> ID：16101606
> 
> 赞同：1
> 
> 时间：2013-04-19T09:35:42.453
> 
> 标签：c++, visual-c++, clang, template-specialization

我正在尝试使用 Clang 编译 MSVC 标准库。但它失败了，因为标准库在类范围内使用显式模板函数特化。

这是一个 MS 扩展，显然在 Clang 中不可用。

这是一个简单的示例，可以使用 MSVS 编译，但不能使用 Clang。

```
template<class T>
class A
{
public:
    A()
    {   
        foo((T)0, 0);
    }

    template<class T2>
    void foo(T2, void* p) {}

    template<>
    void foo<bool>(bool, void* p)
    {
        t = (T)p;
    }
    T t;
};

int main()
{
    A<bool> a;
    return 0;
} 
```

使用 Clang 时我应该怎么做才能让这个功能工作，这样我才能编译 MSVC 标准库？

这是我得到的编译错误：

```
warning: explicit specialization of 'foo' within class scope is a Microsoft extension [-Wmicrosoft]
void foo<bool>(bool, void* p)

error: expected ';' after expression
                t = (T)p;
                       ^
                   ;
error: no member named 'T' in 'A<bool>'
                t = (T)p;
                     ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:40:09.837

AFAIK，您将不得不扩展 clang 以支持类范围内的显式专业化。我认为没有办法解决它，除非你想修改库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:40:30.337

我想你会有三种可能：

1.  重写 MSVC 库，使其不使用该扩展（可能很有趣，但耗时......）
2.  修复 Clang 中的 MS 扩展（可能会更加有趣和耗时......）
3.  做理智的事情：将每个库与它的编译器一起使用（多么无聊......）

* * *

**从此Clang[的测试代码](https://github.com/jacob-carlborg/clang/blob/master/test/SemaTemplate/ms-function-specialization-class-scope.cpp)**更新**我假设它已经实现，但它不需要显式的模板参数：**

 **```
template<>
void foo(bool, void* p)
{
    t = (T)p;
} 
```

它可能是 Clang 实现该扩展的一个错误。**

# methods - PHPUnit mocks - 调用断言方法

> ID：16101614
> 
> 赞同：18
> 
> 时间：2013-04-19T09:36:15.973
> 
> 标签：methods, mocking, phpunit

我是 phpunit 的新手，并且已经阅读了关于模拟对象的文档，但不是很清楚。

我正在尝试编写一个简单的测试来断言类中的方法被调用。使用以下代码，我正在测试调用 Client::exchangeArray 时，会调用 Client::getInputFilter。

```
class Client implements InputFilterAwareInterface
{

public function getInputFilter() {
    if(!$this->_inputFilter){
        $inputFactory = new InputFactory();
        $inputFilter = new InputFilter();

        $inputFilter->add($inputFactory->createInput(array(
            'name' => 'id',
            'required' => true,
            'filters' => array(
                array(
                    'name' => 'Int'
                )
            )
        )));

        $inputFilter->add($inputFactory->createInput(array(
            'name' => 'name',
            'required' => true,
            'filters' => array(
                array(
                    'name' => 'StripTags'
                ),
                array(
                    'name' => 'StringTrim'
                ),
                array(
                     'name' => 'StripNewLines'      
                ),
                array(
                    'name' => 'Alpha'
                )
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 2,
                        'max' => 100
                    )
                )
            )
        )));

        $inputFilter->add($inputFactory->createInput(array(
            'name' => 'surname',
            'required' => true,
            'filters' => array(
                array(
                    'name' => 'StripTags'
                ),
                array(
                    'name' => 'StringTrim'
                )
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 2,
                        'max' => 100
                    )
                )
            )
        )));

        $inputFilter->add($inputFactory->createInput(array(
            'name' => 'email',
            'required' => false,
            'filters' => array(
                array(
                    'name' => 'StripTags'
                ),
                array(
                    'name' => 'StringTrim'
                )
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 2,
                        'max' => 150
                    )
                ),
                array(
                    'name' => 'EmailAddress'
                )
            )
        )));

        $this->_inputFilter = $inputFilter;
    }
    return $this->_inputFilter;
}

public function exchangeArray($data){
    $inputFilter = $this->getInputFilter();
    $inputFilter->setData($data);
    if(!$inputFilter->isValid()){
        throw new \Exception('Invalid client data'); 
    }

    $cleanValues = $inputFilter->getValues();

    $this->_id = (isset($cleanValues['id']) ? $cleanValues['id'] : null);
    $this->_name = (isset($cleanValues['name']) ? $cleanValues['name'] : null);
    $this->_surname = (isset($cleanValues['surname']) ? $cleanValues['surname'] : null);
    $this->_email = (isset($cleanValues['email']) ? $cleanValues['email'] : null);
    }        
} 
```

这是我的测试用例：

```
public function testExchangeArrayCallsInputFilter(){
    $data = array('id' => 54,
            'name' => 'john',
            'surname' => 'doe',
            'email' => 'john.doe@domain.com'
    );

    $mock = $this->getMock('Client', array('exchangeArray'));
    $mock->expects($this->once())
         ->method('getInputFilter');
    $mock->exchangeArray($data);
} 
```

...我收到以下错误：

> 方法名称的预期失败等于调用 1 次。方法预期被调用 1 次，实际上被调用 0 次。

我哪里错了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T12:21:13.300

这完全取决于您想要测试什么以及您想要模拟什么。根据您的测试名称，我假设您需要测试`exchangeArray`方法。

该`getMock`方法将您想要模拟的方法的第二个参数名称作为第二个参数名称。这意味着他们永远不会被调用。

所以，如果你想要测试`exchangeArray`方法和模拟`getInputFilter`，你应该在第二个参数中传递“getInputFilter”，如下所示：

```
$mock = $this->getMock('Client', array('getInputFilter'));
$mock->expects($this->once())
     ->method('getInputFilter');
$mock->exchangeArray($data); 
```

但小心点。你没有告诉你的模拟返回任何东西，所以它会返回空值。这意味着您将在`exchangeArray`方法的第二行遇到致命错误（尝试在非对象上调用方法）。您应该准备一些伪造的过滤器对象来处理，例如：

```
// $preparedFilterObject = ...
$mock = $this->getMock('Client', array('getInputFilter'));
$mock->expects($this->once())
    ->method('getInputFilter')
    ->will($this->returnValue($preparedFilterObject);
$mock->exchangeArray($data); 
```

如果你想调用“真正的”`getInputFilter`方法——那么你就不能模拟这个方法。

# iphone - 要在 iPhone 中禁用 Chrome 的 css 缓存，请使用 django runserver

> ID：16101620
> 
> 赞同：2
> 
> 时间：2013-04-19T09:36:32.327
> 
> 标签：iphone, django, html, google-chrome

我正在开发一个 html5 移动网站，以 django 作为后端和测试服务器，在我的 iPhone 中测试 Chrome 和 Safari 中的页面。

问题是，当我更改我的 css 或 js 文件时，刷新 Safari 会重新加载新的静态文件，但 Chrome 不会，无论我刷新多少次。

如何禁用静态文件的 Chrome 缓存？铬设置？或者更改我的 django 应用程序代码以添加一些 http 标头？

# modelica - Modelica 频/时域组合方程

> ID：16101625
> 
> 赞同：1
> 
> 时间：2013-04-19T09:36:45.043
> 
> 标签：modelica

我在modelica中创建了一个相当复杂的电路模型。我想了解如何在模型中包含“s”方程（我的意思是频域方程）。当然，我可以将表达式转换为时间并使用 modelicas 内部“时间”变量，但我不确定这是完成我的模型的最佳方式。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:09:16.593

在 modelica 中，您可以实现一个模块以从一个域切换到另一个域，然后在适当的域中开发方程。为此，我建议您查看Michael Tiller 撰写的[这篇文章。](http://blog.xogeny.com/blog/fourier-analysis/)
一般来说，这取决于您必须实现的方程类型，在时域或频域中编写方程是否更方便，尽管您必须考虑到从时域到频域，您总是会引入一些简化因为抽样。因此，如果及时重写的方程不是太僵硬，或者如果你没有引入太多的非线性，并且如果你的系统中有很大的频率范围，我认为最好在时域中重写方程。

我希望这会有所帮助，马可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:46:43.103

这是您描述的传递函数，对吗？如果是这样，请查看[Modelica_LinearSystems2](https://build.openmodelica.org/Documentation/Modelica_LinearSystems2.UsersGuide.GettingStarted.LinearSystemDataStructures.html)

# matlab - 在 Matlab 中使用带有逗号分隔值的 fscanf

> ID：16101627
> 
> 赞同：1
> 
> 时间：2013-04-19T09:36:47.053
> 
> 标签：matlab, file-io, serial-port, scanf

通过串行，我得到了像

23,2004,5000
24,5005,5060
25,6789,8907

如何将这些分成三列？

对于一列，例如：

25
24
26

我只能做

```
clc;clear all;close all;
arduino=serial('COM4','BaudRate',9600);
fopen(arduino);
tic;
i=0;
while toc<120;
    i = i+1;
    time(i)= toc;
    v(i)=fscanf(arduino,'%d');
    plot(time,v,'r');
    pause(.10);
end
fclose(arduino) 
```

并将所有数据存储在 v 中。如何将此代码调整为 3 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:27:15.367

我没有任何东西连接到串口，所以我无法测试这个，但在循环内尝试：

```
str = fgetl(arduino);
num = textscan(str, '%f', 'Delimiter',','); num = num{1};
%# `num` should be a 3x1 vector of numbers 
```

首先使用[serial.fgetl](http://www.mathworks.com/help/matlab/ref/serial.fgetl.html)`textscan`从设备读取一行文本，然后使用或任何其他类似的字符串函数解析字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T09:46:13.797

那这个呢：

```
 A = cell2mat(textscan(arduino,'%d,%d,%d')) 
```

# javascript - 0x800a1391 - JavaScript 运行时错误：“阶段”未定义

> ID：16101633
> 
> 赞同：2
> 
> 时间：2013-04-19T09:37:09.067
> 
> 标签：javascript

我正在尝试做这个教程：

[http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/](http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/)

```
 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CatapultGame</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- CatapultGame references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
    <script src="js/CreateJS/easeljs-0.6.0.min.js"></script>
    <script src="js/CreateJS/preloadjs-0.2.0.min.js"></script>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
</body>
</html> 
```

并且有JS文件

```
// For an introduction to the Blank template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232509

(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;

    WinJS.strictProcessing();

    var canvas, context, stage;
    var bgImage, p1Image, p2Image, ammoImage, p1lives, p2lives, title, endGameImage;
    var bgBitmap, p1Bitmap, p2Bitmap, ammoBitmap;
    var preload;

    // Current Display Factor. Because the orignal assumed a 800x480 screen
    var SCALE_X = window.innerWidth / 800;
    var SCALE_Y = window.innerHeight / 480;
    var MARGIN = 25;
    var GROUND_Y = 390 * SCALE_Y;

    function initialize() {
        canvas = document.getElementById("gameCanvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        context = canvas.getContext("2d");

        preload = new createjs.PreloadJS();
        preload.onComplete = prepareGame;
        var manifest = [
            { id: "screenImage", src: "images/Backgrounds/gameplay_screen.png" },
            { id: "redImage", src: "images/Catapults/Red/redIdle/redIdle.png" },
            { id: "blueImage", src: "images/Catapults/Blue/blueIdle/blueIdle.png" },
            { id: "ammoImage", src: "images/Ammo/rock_ammo.png" },
            { id: "winImage", src: "images/Backgrounds/victory.png" },
            { id: "loseImage", src: "images/Backgrounds/defeat.png" },
            { id: "blueFire", src: "images/Catapults/Blue/blueFire/blueCatapult_fire.png" },
            { id: "redFire", src: "images/Catapults/Red/redFire/redCatapult_fire.png" },
        ];

        preload.loadManifest(manifest);

        stage = new Stage(canvas); <<<--------
    }

    function prepareGame() {
        bgImage = preload.getResult("screenImage").result;
        bgBitmap = new Bitmap(bgImage);
        bgBitmap.scaleX = SCALE_X;
        bgBitmap.scaleY = SCALE_Y;
        stage.addChild(bgBitmap);

        stage.update();
    }

    function gameLoop() {

    }

    function update() {

    }

    function draw() {

    }

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                // TODO: This application has been newly launched. Initialize
                // your application here.
            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll());
        }
    };

    app.oncheckpoint = function (args) {
        // TODO: This application is about to be suspended. Save any state
        // that needs to persist across suspensions here. You might use the
        // WinJS.Application.sessionState object, which is automatically
        // saved and restored across suspension. If you need to complete an
        // asynchronous operation before your application is suspended, call
        // args.setPromise().
    };

    document.addEventListener("DOMContentLoaded", initialize, false);

    app.start();
})(); 
```

但是当我尝试运行该项目时，我在代码中的标记位置收到错误消息“0x800a1391 - JavaScript 运行时错误：'Stage' 未定义”。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T08:59:15.030

如果您使用的是较新版本的 EaselJS（当前版本为 3.1），则需要更改一些内容。最常见的是 EaselJS 和 PreloadJS 对象现在包装在 createjs 命名空间中。所以教程中的一行：

```
stage = new Stage(canvas); 
```

变成

```
stage = new createjs.Stage(canvas); 
```

和线

```
bgBitmap = new Bitmap(bgImage); 
```

变成

```
bgBitmap = new createjs.Bitmap(bgImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:56:19.900

我希望 Stage 类是在您的应用程序中定义的，这就是为什么您在 line stage = new Stage(canvas); 上遇到错误的原因

请交叉检查您的任何 JS 文件中是否定义了“Stage”类（包含在 HTML 中）

这可能是问题！！！！

谢谢。

# c# - 如何获取 TFS 集合中所有项目的名称？

> ID：16101636
> 
> 赞同：3
> 
> 时间：2013-04-19T09:37:38.570
> 
> 标签：c#, tfs, alm

关于如何从 TFS 获取集合，请参阅[此处](https://stackoverflow.com/questions/16100991/how-to-get-all-collections-from-tfs/16100992#16100992)

请参阅[此处](http://blog.johnsworkshop.net/)了解更多详情。这是关于 TFS 的最佳资源之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:37:38.570

传入集合 guid，列表返回该特定集合中所有项目的名称。

```
 public IList<string> GetProjectsFormCollection(Guid collectionId)
{
    ICommonStructureService structureService = null;
    try
    {
        TfsTeamProjectCollection teamProjectCollection =
            _configurationServer.GetTeamProjectCollection(collectionId);
        teamProjectCollection.Authenticate();
        structureService =
            (ICommonStructureService)teamProjectCollection.GetService(typeof(ICommonStructureService));
    }
    catch (Exception e)
    {
        ApplicationLogger.Log(e);
    }

    var projectInfoList = new List<ProjectInfo>(structureService.ListAllProjects());
    IEnumerable<string> data = projectInfoList.Select(proj => proj.Name);
    List<string> list = data.ToList();
    return list;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-03T10:47:00.627

您现在可以通过其余 api 执行此操作。例如

```
GET https://fabrikam-fiber-inc.visualstudio.com/DefaultCollection/_apis/projects?api-version=1.0 
```

来自：[https ://www.visualstudio.com/en-us/docs/integrate/api/tfs/projects](https://www.visualstudio.com/en-us/docs/integrate/api/tfs/projects)

# javascript - KineticJS 在 FF 和 IE 中不起作用

> ID：16101641
> 
> 赞同：2
> 
> 时间：2013-04-19T09:37:46.193
> 
> 标签：javascript, html, html5-canvas, kineticjs

我的程序在 Chrome 中完美运行，但在 FF 和 IE 中，我的画布消失了。我在 Firefox 中遇到的错误是：

```
SyntaxError: An invalid or illegal string was specified:
...][c].apply(this[b],args)}})(c)}}(),function(){Kinetic.Filters.Grayscale=function...
On kineticJS.js (line 28) (KineticJS JavaScript Framework v4.4.0) 
```

我在 IE 中遇到的错误是：

```
SCRIPT5022: SyntaxError 
h.addColorStop(g[i],g[i+1])
on kineticJS.js, line 28 character 7356 
```

有人知道发生了什么吗？

编辑 3：

当我使用`fill: 'white'`而不是

```
background = new Kinetic.Rect({
          x: 0,
          y: 0,
          fillRadialGradientStartPoint: 0,
            fillRadialGradientStartRadius: 0,
            fillRadialGradientEndPoint: 0,
            fillRadialGradientEndRadius: 800,
            fillRadialGradientColorStops: [0, '#262834', 1, '0f1114'],
          width: browserwidth,
          height: browserheight,
          name: 'background'
    }); 
```

它放置在与浏览器高度一起缩放的“背景”矩形中，我在 IE 10、9 和 FF 中没有错误。

但为什么它只发生在 fillRadialGradient 并且只在 IE 和 FF 中？它与我之前提到的错误有关：

```
 h.addColorStop(g[i],g[i+1])
on kineticJS.js, line 28 character 7356 
```

更奇怪的是，我有另一个带有radialgradientfill 的对象，它在FF 和IE 中运行良好。

```
var lichtrondje = new Kinetic.Circle({
                  x: 0,
                  y: 0,
                  radius: 90,
                  fillRadialGradientStartPoint: 0,
                  fillRadialGradientStartRadius: 0,
                  fillRadialGradientEndPoint: 0,
                  fillRadialGradientEndRadius: 90,
                  fillRadialGradientColorStops: [0, '#DDD', 1, 'rgba(0,0,0, 0.0)'],
                  opacity: 1,
                  id: 'lichtrondje' + x,
                  name: 'lichtrondje'
            }); 
```

我发现 Chrome 版本与 FF 和 IE 版本的结果看起来不同。正确的是它的意图。

![在此处输入图像描述](https://i.stack.imgur.com/MuUvc.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:28:55.127

我相信您在 fillRadialGradientColorStops 数组中缺少 #

```
0f1114 --> #0f1114 
```

# visual-studio-2010 - Visual Studio 即时调试器，停止 Wamp 服务器

> ID：16101642
> 
> 赞同：2
> 
> 时间：2013-04-19T09:37:53.480
> 
> 标签：visual-studio-2010, debugging, wamp

请有人可以帮助我，每当我启动 Windows 7 系统时都会收到此消息：

Visual Studio 即时调试器。
IAStorDataMgrSvc.exe [5824] 中出现未处理的异常 ('System.IO.FileNotFoundException')。即时调试此异常失败并出现以下错误：没有安装的调试器启用即时调试。在 Visual Studio 中，可以从 Tools/Options/Debugging/Just-In-Time 中启用 Just-In-Time 调试。

我已经卸载了 Visual Studio，但这个挑战仍然存在。

由于上述错误，我无法再正确使用我的 wamp 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T00:29:56.020

安装 Visual Studio 时是否也安装了 IIS。

IIS 和 WAMP 中的 APache 都是 Web 服务器，都想使用 TCP 端口 80。IIS 可能会自动启动并首先获取端口 80，因此 Apache 无法拥有它。如果您不使用 IIS，请同时卸载它。

如果您是，那么您将不得不更改 IIS 和可能的其他一些位，以便它们不会自动启动。在“服务”对话框中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-09T21:10:15.023

我有同样的问题。
我不知道 Visual Studio 和 Wamp 之间的关系，我怀疑它的相关性，在安装 VS2017 时我已经安装了 Wamp。
我所知道的是，即使在离线安装模式下，这个问题仍然存在，我的猜测是 JustINtimeDebugger 被锁定了。

# 我的解决方案：

[我使用文件资源管理器](https://download.sysinternals.com/files/ProcessExplorer.zip)杀死了 PowerShell.exe 进程（在 vs_instalershell 下）并稍后安装。

# 请注意，这并不能解决它只是绕过它的问题。

理论上，接下来您应该尝试`RegisterJustInTimeDebugger.ps1`从 with 解锁文件`C:\ProgramData\Microsoft\VisualStudio\Packages\Microsoft.VisualStudio.Debugger.JustInTime,version=15.0.26208.0`（如果需要，请考虑更改路径）： `Unblock-File -path "C:\ProgramData\Microsoft\VisualStudio\Packages\Microsoft.VisualStudio.Debugger.JustInTime,version=15.0.26208.0"`

# 替代方案：

将系统变量 __PSLockDownPolicy 更新为 1 或将其删除（如果存在）。

但即使是现在，我也未能让它发挥作用。

# ajax - 用于服务器绑定的 Kendo DropDownList 和使用 kendoUI 的 ajax 绑定之间的区别

> ID：16101651
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:38:44.107
> 
> 标签：ajax, asp.net-mvc, kendo-ui

[http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/helpers/dropdownlist/overview](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/dropdownlist/overview)

用于服务器绑定和 ajax 绑定的 Kendo DropDownList 之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:01:58.300

例如，您可以看到这个答案：[https](https://stackoverflow.com/a/10542545/1127669) ://stackoverflow.com/a/10542545/1127669 。

基本上，每次操作更改列表时，服务器绑定都会刷新整个页面，无论 ajax 绑定是否发送仅更改下拉列表的 ajax 请求......

# vb.net - 在 VB.NET 中将 Access 表保存为 dBASE_IV 文件 (.dbf)

> ID：16101657
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:39:04.030
> 
> 标签：vb.net, visual-studio-2010, ms-access, dbf

我正在制作一个小型应用程序，它将 .csv 文件读入新生成的访问表（使用 vb.net 生成），我正在用 sql 填充这个数据库，现在我想将该表输出为 .dbf 文件！

我找不到有关此主题的任何信息。

我知道你们中的一些人会告诉我只在访问中制作 vba 中的脚本，但是有些功能需要我使用 vb.net 并且客户端需要一个 .exe 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:49:51.927

[这里](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/dc1ba303-b887-4d2b-91e5-f53351164be8/)有一个论坛帖子，其中包含一些用于创建 .dbf 文件并将一些数据写入其中的 VB.NET 示例代码。该代码使用 Visual FoxPro OLEDB 驱动程序 (VFPOLEDB)，默认情况下不再随 Windows 分发，但可以在[此处](http://www.microsoft.com/en-us/download/details.aspx?id=14839)下载。

# ruby - 如何为字母、元音和辅音等德语字符类编写正则表达式？

> ID：16101662
> 
> 赞同：6
> 
> 时间：2013-04-19T09:39:21.847
> 
> 标签：ruby, regex, customization, character-class, metacharacters

例如，我设置了这些：

```
L = /[a-z,A-Z,ßäüöÄÖÜ]/
V = /[äöüÄÖÜaeiouAEIOU]/
K = /[ßb-zBZ&&[^#{V}]]/ 
```

所以`/(#{K}#{V}{2})/`匹配`"ßäÜ"`在`"azAZßäÜ"`.

有没有更好的方法来对付它们？

我可以将这些常量放在我的 Ruby 安装文件夹中某个文件的模块中，这样我就可以在我在计算机上编写的任何新脚本中包含/要求它们吗？（我是新手，我知道我混淆了这个术语；请纠正我。）

此外，我可以只让元字符`\L`,`\V`和`\K`（或任何尚未在 Ruby 中设置的）在正则表达式中代表它们，所以我不必一直做字符串插值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T15:10:33.370

您的开始很好，但是您需要查看 Ruby 安装的 Regexp 类代码。有一些技巧可以编写使用字符串插值构建自己的模式。您编写砖块并让 Ruby 使用普通的字符串技巧来建造墙壁和房屋，然后将生成的字符串转换为真正的正则表达式实例以在您的代码中使用。

例如：

```
LOWER_CASE_CHARS = 'a-z'
UPPER_CASE_CHARS = 'A-Z'
CHARS = LOWER_CASE_CHARS + UPPER_CASE_CHARS
DIGITS = '0-9'

CHARS_REGEX = /[#{ CHARS }]/
DIGITS_REGEX = /[#{ DIGITS }]/

WORDS = "#{ CHARS }#{ DIGITS }_"
WORDS_REGEX = /[#{ WORDS }]/ 
```

你不断地从小的原子字符和字符类构建，很快你就会有大的正则表达式。尝试将它们一一粘贴到 IRB 中，您会很快掌握它的窍门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T13:19:30.200

对您现在所做的一个小改进是[对类别或脚本使用正则表达式 unicode 支持](http://www.regular-expressions.info/unicode.html)。

如果您`L`想成为任何字母，请使用`\p{L}`. 或者`\p{Latin}`，如果您希望它表示拉丁文字中的任何字母（所有德语字母都是），请使用。

我不认为元音和辅音是内置的。

请参阅`\p{L}` [匹配您的示例](http://rubular.com/r/Lzuz44rjns)。

# javascript - 用数组替换重复的代码并遍历它

> ID：16101665
> 
> 赞同：1
> 
> 时间：2013-04-19T09:39:24.687
> 
> 标签：javascript, jquery

我想用一个遍历我的元素的数组替换一些工作但不是最佳的代码。

这就是我正在做的

```
$('.count0').keyup(function(){
    $('.counted0').text(this.value.replace(/{.*}/g, '').length );
});
$('.count1').keyup(function(){
    $('.counted1').text(this.value.replace(/{.*}/g, '').length );
});
$('.count2').keyup(function(){
    $('.counted2').text(this.value.replace(/{.*}/g, '').length );
});
$('.count3').keyup(function(){
    $('.counted3').text(this.value.replace(/{.*}/g, '').length );
}); 
```

等等

我想要实现的是查找每个`count`类，从那里获取文本长度，然后将其放入`div.counted`

怎样才能做到这一点？

标记很简单，如下所示：

```
<div>
  <input class="count">
  <div class="counted"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:42:15.267

因此，如果标记如此简单，您可以尝试以下操作：

```
$(".count").on("keyup", function() {
    $(this).next(".counted").text(this.value.replace(/{.*}/g, "").length);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:42:35.690

```
$('.count').on('keyup', function(e){
    $(this).next('.counted').text(this.value.replace(/{.*}/g, '').length );
}); 
```

[小提琴](http://jsfiddle.net/tRVYa/)

# ios - 首次应用启动时无法从 NSUserDefaults 获取颜色

> ID：16101668
> 
> 赞同：0
> 
> 时间：2013-04-19T09:39:39.067
> 
> 标签：ios, xcode, nsuserdefaults

我有一个大问题，几天都解决不了。

当应用程序第一次加载时，我在第一个 UIViewController 中将 4 种颜色保存到 NSUserDeafaults。

视图控制器.m

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSUserDefaults *sharedDefaults = [NSUserDefaults standardUserDefaults];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSInteger countValue = [defaults integerForKey:@"Array"];

if ([sharedDefaults boolForKey:@"FirstLaunch"])
{
    [self openSubView];
    [sharedDefaults setBool:NO forKey:@"FirstLaunch"];
    [sharedDefaults synchronize];
    [self saveColorsToDefaults];

    // [prefs synchronize];
}   // Do any additional setup after loading the view.
else if(countValue == 1)
{
}

}

-(void)saveColorsToDefaults{

const CGFloat  *components1 = CGColorGetComponents([UIColor darkGrayColor].CGColor);
const CGFloat  *components2 = CGColorGetComponents([UIColor blueColor].CGColor);
const CGFloat  *components3 = CGColorGetComponents([UIColor redColor].CGColor);
const CGFloat  *components4 = CGColorGetComponents([UIColor purpleColor].CGColor);

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

[prefs setFloat:components1[0]  forKey:@"cr"];
[prefs setFloat:components1[1]  forKey:@"cg"];
[prefs setFloat:components1[2]  forKey:@"cb"];
[prefs setFloat:components1[3]  forKey:@"ca"];

[prefs setFloat:components2[0]  forKey:@"cr2"];
[prefs setFloat:components2[1]  forKey:@"cg2"];
[prefs setFloat:components2[2]  forKey:@"cb2"];
[prefs setFloat:components2[3]  forKey:@"ca2"];

[prefs setFloat:components3[0]  forKey:@"cr3"];
[prefs setFloat:components3[1]  forKey:@"cg3"];
[prefs setFloat:components3[2]  forKey:@"cb3"];
[prefs setFloat:components3[3]  forKey:@"ca3"];

[prefs setFloat:components4[0]  forKey:@"cr4"];
[prefs setFloat:components4[1]  forKey:@"cg4"];
[prefs setFloat:components4[2]  forKey:@"cb4"];
[prefs setFloat:components4[3]  forKey:@"ca4"];

[prefs synchronize];
NSLog(@"I just saved colors");

} 
```

在我需要将这些颜色设置为 `DrawViewControllers 绘图工具之后。我只能得到最后 3 种颜色，但第一种颜色没有出现。

但是当我通过设置第一个仪器`colorPicker`的颜色并将所有颜色再次保存到`NSUserDefaults`它时效果很好！

```
 -(void)LoadColorsAtStart
{

NSUserDefaults *prefers = [NSUserDefaults standardUserDefaults];
UIColor* tColor = [UIColor colorWithRed:[prefers floatForKey:@"cr"] green:[prefers floatForKey:@"cg"] blue:[prefers floatForKey:@"cb"] alpha:[prefers floatForKey:@"ca"]];

UIColor* tColor2 = [UIColor colorWithRed:[prefers floatForKey:@"cr2"] green:[prefers floatForKey:@"cg2"] blue:[prefers floatForKey:@"cb2"] alpha:[prefers floatForKey:@"ca2"]];

UIColor* tColor3 = [UIColor colorWithRed:[prefers floatForKey:@"cr3"] green:[prefers floatForKey:@"cg3"] blue:[prefers floatForKey:@"cb3"] alpha:[prefers floatForKey:@"ca3"]];

UIColor* tColor4 = [UIColor colorWithRed:[prefers floatForKey:@"cr4"] green:[prefers floatForKey:@"cg4"] blue:[prefers floatForKey:@"cb4"] alpha:[prefers floatForKey:@"ca4"]];

[prefers synchronize];

[self extractRGBforBlack:tColor];
[self extractRGBforBlue:tColor2];
[self extractRGBforRed:tColor3];
[self extractRGBforLine:tColor4];

[self.colorBar1 setTextColor:self.blackExtract];
[self.colorBar2 setTextColor:self.blueExtract];
[self.colorBar3 setTextColor:self.redExtract];
[self.colorBar4 setTextColor:self.lineExtract];

NSLog(@"I have extracted colors");   
} 
```

我有 5 个类似`DrawViewControllers`的作品，所有作品都与 Drawing 一起使用`UIView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T11:42:28.300

试试这个它会正常工作

1.将 UIColor 作为 NSString 存储到 NSUserDefaults 中

```
-(void)storeColor
{
    NSString *colString = [NSString stringWithFormat:@"%@", [UIColor whiteColor]];
    [[NSUserDefaults standardUserDefaults] setObject:colString forKey:@"keyFontColor"];
} 
```

2.在检索时将字符串转换为UIColor

```
-(void)retriveColor
    NSArray *values = [[[NSUserDefaults standardUserDefaults] objectForKey:@"keyFontColor"] componentsSeparatedByString:@" "];
    NSLog(@"%d",[values count]);
    UIColor *def_color = [[UIColor alloc] init];
    if ([values count]==5) {
        CGFloat red = [[values objectAtIndex:1] floatValue];
        CGFloat green = [[values objectAtIndex:2] floatValue];
        CGFloat blue = [[values objectAtIndex:3] floatValue];
        CGFloat alpha = [[values objectAtIndex:4] floatValue];
        def_color = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
        self.dateLabel.textColor = def_color;

    }
    else if ([values count]==3)
    {
        CGFloat white = [[values objectAtIndex:1] floatValue];
        CGFloat alpha = [[values objectAtIndex:2] floatValue];
        def_color = [UIColor colorWithWhite:white alpha:alpha];
        self.label.textColor = def_color;        

    }
    else
    {
        // its store default value while app loads first time
        self.label.textColor.textColor = [UIColor blackColor];

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T08:59:22.240

1.将UIColor作为nsdata存入nsuserdefaults

```
NSData *colorData = [NSKeyedArchiver archivedDataWithRootObject:color]; 
```

2.从viewdidload中检索UIColor

```
UIColor *color = [NSKeyedUnarchiver unarchiveObjectWithData:colorData]; 
```

# android - 计算远程电话响铃的次数

> ID：16101671
> 
> 赞同：2
> 
> 时间：2013-04-19T09:39:45.910
> 
> 标签：android, call, telephony, telephonymanager

在我的 Android 应用程序中，在呼叫远程电话时，我需要跟踪远程电话（即远程电话）进入摘机或空闲状态之前响铃的次数。谷歌搜索这个主题并没有产生任何帮助。蛮力方法可能是处理音频并计算铃声 - 但这看起来很丑陋且可以避免，并且可能不适用于所有运营商/电话。我正在寻找指向 Android 可能必须满足此要求的一些已记录/未记录 API 的指针。

任何关于解决方案的建议或指向我应该探索的地方将不胜感激。

在此先感谢，B.Sodhi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:54:00.847

看看SIP协议！

如果你在你的安卓系统中走得足够深，你可以在远程电话收到呼叫信号时进行回调。从那里您将数 X 秒并完成。

实现起来并不像它所说的那么容易，但是是可能的。技术人员，从不说这是不可能的:)

# c# - 带接口的访问修饰符

> ID：16101673
> 
> 赞同：11
> 
> 时间：2013-04-19T09:39:49.503
> 
> 标签：c#, interface

我是 .net C# 的新手。我正在学习接口。

1.  我们可以在接口中使用访问修饰符吗？如果可以，哪些是有效的？
2.  默认情况下，接口是内部的吗？
3.  我们可以在接口成员上使用访问修饰符吗？如果可以，哪些是有效的？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-19T09:41:38.043

从 C# 8.0 开始，您可以在接口内使用访问修饰符。请参阅这篇文章 [C# 8 接口：公共、私有和受保护的成员](https://jeremybytes.blogspot.com/2019/11/c-8-interfaces-public-private-and.html)

* * *

**在 C# 8.0 之前**

你应该看到：

[访问修饰符 - MSDN](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

> **直接在命名空间中声明的接口可以声明为公共的或内部的，就像类和结构一样，接口默认为内部访问。**接口成员始终是公共的，因为接口的目的是使其他类型能够访问类或结构。不能将访问修饰符应用于接口成员。

*（对于您的问题）*

> 我们可以使用带接口的访问修饰符吗

是的，它们可以被声明为公共的或内部的

> 默认情况下是内部接口

是的。

> 带有接口成员的访问修饰符怎么样。

他们是公开的。不能将访问修饰符应用于接口成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:42:49.097

1.你可以在接口上使用访问修饰符。您可以像在类中一样在接口上使用任何访问修饰符，甚至是私有的

2.是的，默认接口是内部的

3.interface成员必须是public

好吧，你不能直接在命名空间中定义私有接口，因为你不能在命名空间中定义私有类，这是因为私有接口/类不能被任何人使用。但是你可以在另一个类中声明一个私有接口/类

我的意思是你不能这样做：

```
namespace myNamespace{
    private interface MyInterface{...}
} 
```

那是因为 MyInterface 不能被任何其他类/接口使用

但你可以

```
namespace myNamespace{
    class MyClass{
        private interface MyInterface{...}
    }
} 
```

在这种情况下，MyInterface 只能由 MyClass 使用

# css - 使用第 n 个孩子来定位每隔两个 div

> ID：16101674
> 
> 赞同：2
> 
> 时间：2013-04-19T09:39:52.063
> 
> 标签：css, css-selectors

我正在尝试使用第 n 个孩子来选择每隔两个 div。

这意味着，当有一组 div 1、2、3、4、5 和 6 时 - 我需要选择 1、2、5 和 6。每隔两个。

CSS：

```
#navigation .menuItem:nth-child(3n+3) {  
  background-color: #ccc;
} 
```

HTML：

```
<div class="menuItemWrapper">
            <div class="menuItem"><a href="shop.html">Shop Online</a></div>
            <div class="menuItem"><a href="blog.html">The Blog</a></div>
            <div class="menuItem"><a href="lookbook.html">LookBook</a></div>
            <div class="menuItem"><a href="gift-finder.html">Gift Finder</a></div>
            <div class="menuItem"><a href="about.html">About Us</a></div>
            <div class="menuItem sub"><a href="freebies.html">Tutorials</a></div>
            <div class="menuItem sub"><a href="faq.html">FAQ</a></div>
            <div class="menuItem sub"><a href="contact.html">Contact</a></div> 
```

[JS小提琴](http://jsfiddle.net/Z8Uxt/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T09:44:02.300

您将无法使用单个选择器来完成此操作，但您可以使用两个：

```
#navigation .menuItem:nth-child(4n+1), #navigation .menuItem:nth-child(4n+2) {
  background-color: #ccc;
} 
```

[小提琴](http://jsfiddle.net/3VQcP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T06:36:17.823

有一个简单的技巧：

首先：为你的排队的`<div>`s设置全局颜色

```
.menuItemWrapper>div { background-color: #fff; } 
```

`<div>`其次：选择每第 4 个元素并在其后直接将替代背景应用于元素。这使成对。-1 从正确的地方开始。

```
.menuItemWrapper>div:nth-child(4n-1) { background-color: #ccc; }
.menuItemWrapper>div:nth-child(4n-1)+div { background-color: #ccc; } 
```

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:58:08.277

@Francesca 这是 css-trikes 的 :nth tester 的一个简单而出色的工具，它使选择器[css-tricks nth-child-tester的生活更轻松](http://css-tricks.com/examples/nth-child-tester/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T18:30:59.773

扩展 Chowlett 的响应以管理“跳过”元素的可能性。

将要皮肤的元素从 div 更改为 nav（这几乎相同）。

通过使用 nth-of-type 选择器而不是 nth-child 来引用它们。并使选择器更具体，以避免改变导航的背景

```
.menuItemWrapper div.menuItem:nth-of-type(4n+1), 
.menuItemWrapper div.menuItem:nth-of-type(4n+2) {
     background-color: #ccc; 
 } 
```

## [修改后的演示](http://jsfiddle.net/3VQcP/3/)

（跳过第 5 项）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:38:13.617

我想我根据 Chowlett 的建议找到了解决您问题的方法：http: [//jsfiddle.net/Z8Uxt/10/](http://jsfiddle.net/Z8Uxt/10/)。

它所需要的只是将分隔符更改为不同的元素类型（例如：p 而不是 div 或者甚至是语义 div 而不是 li）。

该解决方案将每个孩子都`:nth-of-type`用作`:nth-child`计数，无论其班级如何。

# ssas - 使用 mdx 查询在 SSRS 中显示小数字段时出现问题

> ID：16101675
> 
> 赞同：0
> 
> 时间：2013-04-19T09:39:58.350
> 
> 标签：ssas, reporting-services

我们在使用 mdx 查询的 ssrs 报告中显示数量时遇到问题。例如：此值由 mdx 查询 278.25 返回，但当它与 ssrs 绑定时，它显示 27.825,00。我们在报告中使用文化 de-DE（德语）。

我们尝试了以下解决方案，但问题仍然存在于 SSRS 报告中： 从 mdx 方面我们尝试了 FORMAT_STRING = "#0,00" 函数来显示数值。从报告方面我们尝试使用替换功能来替换“。” 用'，'，但它不能正常工作。

示例查询可以在下面找到

```
WITH
MEMBER [Measures].[CumEGTKDAmount] AS sum({[Time].[Month].FIRSTCHILD: [Time].[Month].CurrentMember},[Measures].[EGTKD] * [Measures].[AvgStockPrice])
SELECT
    {
        [Measures].[CumEGTKDAmount]
    } ON COLUMNS,
    NON EMPTY {
                topcount(
                (                
                STRTOSET("[Dim Item].[ItemHierarchy].[Item No].&[00001133]")
                )
            ,50,[Measures].[ReklaQuote])
                } ON ROWS
FROM [QM] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:27:10.350

尝试这个：

```
=Replace(Format(Fields!YourFieldName.Value, "#,###0.00"),",",".") 
```

# yii - CGridView 排序与关系表按关系 Id 参数排序

> ID：16101677
> 
> 赞同：2
> 
> 时间：2013-04-19T09:40:03.333
> 
> 标签：yii, cgridview, yii-events

我在`CGrid`使用``页面中的关系模型对关系数据进行排序时遇到问题。

## 简单来说我的场景：

我有一个**用户** `model: Entities=> id,username` 和**个人资料** `Model: Entities=> id, firstname,lastname, user_id,`等。

我想列出`profile mode`l 和`username`from `user model`in `CGrid`，以便**排序和搜索**很好。在我的情况下，排序 `username`是由`user_id`not by完成的`username`。我想搜索它`username`，所以我执行以下操作，

## 我的控制器动作：

```
$model = new Profile('search');
$model -> unsetAttributes();// clear any default values
if (isset($_GET['Profile']))
$model -> attributes = $_GET['Profile'];

$this -> render('MyPage', array('model' => $model )); 
```

## 我的模型关系：

```
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name  the relations automatically generated below.

    return array(
     'user' => array(self::BELONGS_TO, 'user', 'user_id'),);
} 
```

## 示范规则：

```
array( 'xxx,yyy,user_name', 'safe', 'on'=>'search' ), 
```

## 和模型搜索功能

```
if(!empty($this->user_id)){
$criteria->with='user'; 
$criteria->order = ::app()->request->getParam('sort');// 'username ASC'
} 

$criteria -> compare('user.username', $this->user_id, true); 
```

## 我的

```
$this->widget('zii.widgets.grid.CGrid', array(
'id'=>'profile-grid',
'dataProvider'=>$model->search(),
 'filter'=>$model,
array('name'=>'user_id',
    'header'=>User::model()->getAttributeLabel('username'), 
    'value' =>'$data->getRelated(\'user\')->username',
    'type'=>'raw',
    'htmlOptions'=>array('style'=>'text-align: center'),),
   --------------- 
```

在排序期间，排序工作完美，但排序是在`user_id`not by的基础上完成的`username`。我缺少这样做的任何东西。请建议。

参考：[在这里](http://www.framework.com/wiki/281/searching-and-sorting-by-related-model-in-cgrid/)（我也尝试通过声明一个公共变量作为链接中的建议，但机器人正在工作。）

编辑：问题修复后。也感谢[这个](http://www.mrsoundless.com/php/yii/searching-and-sorting-a-column-from-a-related-table-in-a-cgridview/)链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:16:36.590

嗯，你找到的 wiki 页面确实是一个好的开始......

这是执行此操作的另一种方法：

**在您的个人资料模型中：**

```
// private username attribute, will be used on search
private $_username;

public function rules()
{
    return array(
        // .....
        array('username', 'safe', 'on'=>'search'),
        // .....
    );
}

public function getUsername()
{
    // return private attribute on search
    if ($this->scenario=='search')
        return $this->_username;

    // else return username
    if (isset($this->user_id)) && is_object($this->user))
        return $this->user->username;
}

public function setUsername($value)
{
    // set private attribute for search
    $this->_username = $value;
}

public function search()
{
    // .....
    $criteria->with = 'user'; 
    $criteria->compare('user.username', $this->username, true);
    // .....

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
        'sort'=>array(
            'attributes'=>array(
                'username'=>array('asc'=>'user.username', 'desc'=>'user.username DESC'),
                '*',
            ),
        ),
    ));
} 
```

**在您看来，您应该简单地尝试**：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'profile-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        // .....
        'username',
        // .....
    ),
); 
```

# asp.net - 登录后页面错误

> ID：16101679
> 
> 赞同：0
> 
> 时间：2013-04-19T09:40:09.083
> 
> 标签：asp.net, error-handling, web-config, sql-server-2008-r2, runtime-error

我已经发布了我的 asp.net 应用程序，并将整个文件夹复制到服务器上（从我的本地计算机）。

问题是我忘记制作从服务器运行的现有 web.config 文件的副本，相反，当我将项目复制到它上面时，将现有项目（包括 webconfig 文件）替换为在我的本地计算机上运行的项目，并且我不确定如何诊断问题，我现在面临。

当我从浏览器访问该站点时，我会看到登录页面。当我尝试登录时，出现页面错误：

![在此处输入图像描述](https://i.stack.imgur.com/wGgIt.png)

# asp.net-mvc - 无需 ORM 即可查看的 MVC 4 强类型数据

> ID：16101683
> 
> 赞同：3
> 
> 时间：2013-04-19T09:40:18.007
> 
> 标签：asp.net-mvc, linq, entity-framework

我已经看到有关使用直接 SQL 进行 MVC 数据访问的其他问题，例如[这里](https://stackoverflow.com/questions/14407256/asp-net-mvc-4-project-without-any-orm)。大多数回答不回答问题，而是询问

> “你为什么不想使用 ORM、EF、Linq 等？”

1.  我的小组在数据仓库中进行自定义报告，该数据仓库需要大量复杂、高度调整的 Oracle 查询，这些查询是根据用户 GUI 参数选择进行操作的。

2.  我最新的项目是为 SQL 报表开发人员开发一个 SQL 插件报表工具。他们将使用伪参数为报告创建一个预先调整好的 SQL，并通过 GUI 输入（和存储）。然后 GUI 会提示他们需要在运行时显示/请求的参数定义（名称和类型），以最终替换伪变量。

所以一条 SQL 语句可能如下所示：

```
SELECT * FROM orders WHERE order date BETWEEN '<Date1>' AND '<Date2>' 
```

然后，报告开发人员将通过 GUI 添加两个名为`Date1`和的参数`Date2`，并将它们标记为日期字段。

然后，最终用户将选择报告，提示输入`Date1`和`Date2`，GUI 将执行替换并运行 SQL。

如您所见，我别无选择，只能使用直接 SQL（尤其是在第二个示例中，并且理解我也必须放弃在第二个示例中的强类型）。

所以我的问题是：

1.  什么时候需要绕过 EF/Linq（肯定有理由这样做），MVC 4 中的最佳实践是什么？
2.  当我提前知道输出列时，如何最好地进行强输入？
3.  和 CRUD 处理？
4.  任何人都可以在这方面指出任何基于非 EF/Linq 的编码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:05:15.690

我认为这是一个开放式问题，所以这是我的 2c。（如果 tl dr，请转到最后一部分）

1.  对我来说，与其说是“通过 EF/Linq”，不如说是需要选择合适的数据持久化库。我在 MVC 中使用过 PetaPoco、Ado.Net、NHibernate/ActiveRecord、Linq2Sql、EF（我的主要选择）。

    最佳实践实际上来自于意识到控制器仍然是表示层的一部分，并且它不应该处理除了 HttpContext 相关操作 + 调用业务逻辑服务类之外的任何事情。

    我将我的类安排为：
    Presentation (MVC) -> Logic Services (Simple classes) -> Data Access (Context Wrapped in "repositories")。
    所以我无法想象是否使用 EF 会对 asp.net MVC 产生任何影响。

2.  对我来说，数据访问在 DTO 中返回数据，例如

    公共列表 GetAllFoos()

    该方法字符串是从 xml 等连接还是执行简单的 Context.Foos.ToList() 与应用程序的其余部分无关。我只关心数据访问不会返回一个与列匹配的数据集。那些留在DAL。

3.  请参阅第 1 点和第 2 点。我的存储库上有 CRUD 方法。它是如何完成的与应用程序的其余部分无关。采用我的存储库类的最基本接口之一：

    公共接口 IFooRepository { void Save(Foo foo) Foo Get(int id) void Create(Foo foo) void Delete(int id) }

    还没有提到的一点，DI也很关键。具体实现“FooRepository”可以选择请求依赖项，例如 Web 服务、上下文类等。然而，这些与依赖于接口的调用者完全无关。

4.  如果您在上述 3 点之后仍然需要示例，请发表评论，我将使用 Ado.net 制作一些非常简单的东西。

==================================================== =========================
去EF还是不去EF。

对我来说，如果用新模式开始一个新项目，我会先使用 EF 代码。

将新代码安装到旧数据库 + 旧项目没有我可以重用的 ORM 映射 = PetaPoco。

==================================================== =========================
在您的项目中：

“SQL 报表开发人员的 SQL 插件报表工具”。“的”sql报告服务？我不确定你为什么需要做任何事情？SSRS 不是已经这样做了吗？（输入sql语句/数据源，生成参数表格等）。

如果不是，我会质疑设计决定。IMVHO，应用程序用户（我不在乎它是“报告开发人员”还是 w/e）输入 SQL 语句的需求通常源于“建筑宇航员”。当您通过 GUI 作为字符串输入时，如何调试 SQL 语句？你怎么知道表和关系？您要么深入研究 SSMS 并返回 gui，要么构建复杂的 UI（又名重建 SSMS）。

归根结底，如果你想为无数不同的用户提供无数的报告，你必须为此付费。我看到太多“架构宇航员”公开应用程序以接受 SQL 语句，只是为了让每个人都浪费时间猜测应该放入什么。根本没有节省成本。

好吧，如果你必须这样做，嗯……祝你好运。最好的办法是作为 DataTable 返回并将行/列/数据转储到视图中，其中嵌套的 foreach 循环遍历行然后列。

# maven - 由于重命名包，aether-demo 无法编译

> ID：16101685
> 
> 赞同：0
> 
> 时间：2013-04-19T09:40:21.507
> 
> 标签：maven, aether

我需要编译并执行“aether-demo”。

我没有找到“aether-demo”的版本，所以我使用快照如下：

```
git clone git://git.eclipse.org/gitroot/aether/aether-core.git
cd aether-core
mvn clean install

git clone git://git.eclipse.org/gitroot/aether/aether-demo.git
cd aether-demo/
cd aether-demo-snippets/
mvn clean install 
```

但它失败了：

```
[ERROR] /private/tmp/aether-demo/aether-demo-snippets/src/main/java/org/eclipse/aether/examples/manual/ManualRepositorySystemFactory.java:[33,40] cannot access org.sonatype.aether.impl.internal.DefaultServiceLocator
[ERROR] class file for org.sonatype.aether.impl.internal.DefaultServiceLocator not found
[ERROR] DefaultServiceLocator locator = new DefaultServiceLocator(); 
```

和其他错误。

它告诉它没有找到类`"org.sonatype.aether.impl.internal.DefaultServiceLocator"`

但是， ManualRepositorySystemFactory.java 有这个导入：

```
 import org.apache.maven.repository.internal.DefaultServiceLocator; 
```

为什么会这样？ManualRepositorySystemFactory.java 没有从`org.sonatype.aether.impl.internal`. 为什么 mvn clean install 试图从这个包中导入它？

此外，“aether-core”项目将该文件放在另一个包中：`org/eclipse/aether/impl/DefaultServiceLocator.java`

（并且根据 git log，它一直都在这里）

那么，发生了什么？某处是否有重新映射包裹？

如何编译和执行“aether-demo”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:19:58.140

修正： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=406212](https://bugs.eclipse.org/bugs/show_bug.cgi?id=406212)

> 本杰明·本特曼 2013-04-22 07:45:03 EDT
> 
> 成功运行示例所需的依赖项刚刚发布，使用它们的相应 CQ 仍在处理中。在我们批准这些之前，您可能需要查看 提供更新预览的[https://github.com/bentmann/aether-demo 。](https://github.com/bentmann/aether-demo)

# android - Android NSD 中使用什么协议？

> ID：16101688
> 
> 赞同：2
> 
> 时间：2013-04-19T09:40:28.593
> 
> 标签：android

Android API 16+ 中有网络服务发现 (NSD)。

什么 RFC 或其他文档描述了这个协议？其他平台（iPhone、WP8）上是否有任何兼容的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:50:13.780

我相信这是[Bonjour / Zeroconf](http://www.dns-sd.org/)。特别[是 DNSSD](http://www.dns-sd.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T16:10:30.297

它专门使用多播 DNS - [http://www.multicastdns.org/](http://www.multicastdns.org/)

您可以通过在同一网络上的计算机上运行数据包嗅探器（例如 Wireshark ( [https://www.wireshark.org/](https://www.wireshark.org/) ) 并过滤 mdns 来看到这一点（请注意，mdns 过滤需要最新版本的 Wireshark））。

它也支持 MacOS/iOS、Bonjour 以及 Linux、Avahi 上的自动发现。您可以使用它来发现 Apple 或 Avahi 服务以及其他 Android 设备上的服务，反之亦然。

# php - 跨多个文件替换输入标签的值

> ID：16101690
> 
> 赞同：1
> 
> 时间：2013-04-19T09:40:33.570
> 
> 标签：php, regex, linux, sed, smarty

我的 smarty 模板文件中有很多这样的字段。

```
{$email} (this can be anything like -- {$description}, {$variable_name} 
```

我想用 `{$email|escape:htmlall}` 或 {$variable_name}替换它

我怎么能在linux中做到这一点？我很难在 sed 中编写正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:59:00.467

尝试：

```
sed 's/{\(\$[^}\|]*\)}/{\1|escape:htmlall}/g' 
```

作为测试，使用：

```
echo 'blabla {$email} blieblie {$name} bloebloe ${alreadydone|escape:htmlall}'|sed 's/{\(\$[^}\|]*\)}/{\1|escape:htmlall}/gi' 
```

这个正则表达式所做的事情：

*   它用 {$|escape:htmlall} 替换任何像 {$} 这样的字符串
*   它还确保分别处理两个连续的字段（如示例中所示）。这是通过要求不出现 '}' 来完成的（这是由 [^}\|]* 部分完成的，这意味着：一系列零个或多个字符，除了 '}' 和 ' |'（见下文）。
*   它忽略任何已经被转义的标签（通过忽略任何在花括号内带有 | 的标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:48:30.027

```
 perl -ape 's/({\$\w+)(?!\|escape:htmlall)}/$1|escape:htmlall}/g' file 
```

这是使用负前瞻功能。

这将忽略已经有 escape:htmlall 的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:54:47.023

之前进行备份并尝试以下操作：

```
grep -rl "{$email}" yourdirectory | xargs sed -i 's/\{\$email\}/{$email|escape:htmlall}/g' 
```

# javascript - 当数据库没有返回结果时，这个 javascript 会触发吗

> ID：16101691
> 
> 赞同：0
> 
> 时间：2013-04-19T09:40:33.993
> 
> 标签：javascript, jquery

我有以下代码：

```
 $.post('get_as_12', {data:selectedObj.value},function(result) {
 alert(result[0]) ;

      if(result[0] > 0) {
          $('#h12_1').attr('checked','checked');
          alert('12-1');
       } else {
          $('#h12_1').removeAttr('checked');
          alert('12-2');
      }
 }); 
```

get_as_12 是一个 MySQL 查询。

`alert(result[0]) ;`当有数据库结果时，警报会正确触发。但是，如果没有结果并且返回的值是`NULL`我如何让警报仍然触发。不仅如此，我如何让 else 语句触发： `$('#h12_1').removeAttr('checked');`

提前致谢。

**更新**

```
 $.post('get_as_12', {data:selectedObj.value},function(result) {
 alert(result[0]) ;

      if(result[0].length > 0) {
          $('#h12_1').attr('checked','checked');
       } else {
          $('#h12_1').removeAttr('checked');
      }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:48:26.543

也许是这样的：

```
$.post('get_as_12', {data:selectedObj.value},function(result) {
    if(result != null && result[0] > 0) {
        $('#h12_1').attr('checked','checked');
        alert('12-1');
    } else {
        $('#h12_1').removeAttr('checked');
        alert('12-2');
    }
}); 
```

这增加了一个检查结果不是`null`or `undefined`。如果您确定定义的结果将是一个包含至少一个元素的数组，那应该没问题。否则，您需要添加一个检查`result.length > 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:45:59.157

我认为您正在寻找结果 [0] 的长度

```
if(result && result[0].length > 0) {....... 
```

我假设 result[0] 包含一个包含 mysql 查询结果的数组。使用 length 属性，您可以检查结果集是否为空，因此如果您的查询不返回结果，它应该调用您的语句 else-statement。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:06:00.930

I expect when the server returns `null` response it is not being handled correctly by `$.post` to process the request.

You can try using `$.ajax` instead, as this allows for better error handling and processing.

```
$.ajax({
    type: 'POST',
    url: 'get_as_12',
    data: {
        data:selectedObj.value
    },
    success: function(result){
        if(result != null && result[0] > 0) {
            $('#h12_1').attr('checked','checked');
            alert('12-1');
        } else {
            $('#h12_1').removeAttr('checked');
            alert('12-2');
        }
    },
    error: function(xhr, textStatus, error){
        console.log(xhr.statusText);
        console.log(textStatus);
        console.log(error);
        // or use alert to send user a message
    }
}); 
```

The key things to note here are the `success` and `error` handlers. The `error` is triggered if the response is invalid or none is given by the server.

The code is untested; so changes may be required.

# java - 无法读取重复字符

> ID：16101695
> 
> 赞同：0
> 
> 时间：2013-04-19T09:40:56.880
> 
> 标签：java, string, loops, char

我正在编写一个代码来读取一个字符串并计算重复的集合

```
public int countRepeatedCharacters()
{
    int c = 0;
    for (int i = 1; i < word.length() - 1; i++)
    {
        if (word.charAt(i) == word.charAt(i + 1)) // found a repetition
        {
            if ( word.charAt(i - 1) != word.charAt(i)) {

                c++;

            }
        }
    }     
    return c;
} 
```

如果我尝试输入 aabbcdaaaabb 我应该有 4 组重复小数 aa | bb | 啊啊啊 bb

而且我知道我没有读取第一组 aa，因为我的索引从 1 开始。我尝试将其修复为读取零，但随后我尝试修复整个循环以处理更改，但我失败了，有什么建议吗？如何更改我的索引或循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:52:57.933

试试这个代码：

```
public int countRepeatedCharacters(String word)
{
    int c = 0;
    Character last = null;
    bool counted = false;
    for (int i = 0; i < word.length(); i++)
    {
        if (last != null && last.equals(word.charAt(i))) {  // same as previous characted
            if (!counted) {  // if not counted this character yet, count it
                c++;
                counted = true;
            }
        }
        else {      // new char, so update last and reset counted to false
            last = word.charAt(i);
            counted = false
        }
    }     
    return c;
} 
```

编辑 - 将 aaaa 计为 4，固定计为 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:39:26.177

试试这个方法。它计算重复字符的集合。

```
public static void main(String[] args) {
    String word = "aabbcdaaaabbc";
    int c = 0;
    for (int i = 0; i < word.length()-1; i++) {

        // found a repetition
        if (word.charAt(i) == word.charAt(i + 1)) {
            int k = 0;
            while((i + k + 1) < word.length()) {
                if(word.charAt(i+k) == word.charAt(i + k + 1)) {
                    k++;
                    continue;
                }
                else {
                    break;
                }
            }
            c++;
            i+=k-1;
        }
    }
    System.out.println(c);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:49:07.150

根据我从您的问题中了解到的情况，您想计算重复集的数量，那么这应该会有所帮助。

```
for (int i = 0; i < word.length()-1; i++){
    if (word.charAt(i) == word.charAt(i + 1)){ // found a repetition
        if (i==0 || word.charAt(i - 1) != word.charAt(i)) {    
            c++;    
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T10:04:37.390

尝试这个 - -

```
 public int countRepeatedCharacters()
{
    int c = 0,x=0;
    boolean charMatched=false;
    for (int i = 0; i < word.length(); i++)
    {
        if(i==word.length()-1)
        {
            if (word.charAt(i-1) == word.charAt(i))
                 c++;
            break;
        }
        if (word.charAt(i) == word.charAt(i + 1)) // found a repetition
        {

            charMatched=true;
            continue;
        }
        if(charMatched==true)
        c++;
        charMatched=false;          
    }     
    return c;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:52:45.263

使用 length() -1 会导致您不考虑计算中的最后一个字符。这会导致您丢失最后一个重复字符。

最后，我会这样做：

```
 public static int countRepeatedCharacters(String word)
    {
        boolean withinRepeating = false;
        int c  = 0;

        for (int i = 1; i < word.length(); i++)
        {

            if (!withinRepeating && (withinRepeating = word.charAt(i) == word.charAt(i - 1)))
            c++;                        
            else
            withinRepeating = word.charAt(i) == word.charAt(i - 1);
        }     
        return c;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T09:49:20.950

你可以尝试这样的事情： -

```
public static void main(String str[]) {
    String word = "aabbcdaaaabbc";
    int c = 1;
    for (int i = 0; i < word.length() - 1; i++) {
        if (word.charAt(i) == word.charAt(i + 1)) {
            c++;
        } else {
            System.out.println(word.charAt(i)+ " = " +c);
            c = 1;
        }
    }
    System.out.println(word.charAt(word.length()-1)+ " = " +c);
} 
```

您可以根据需要修改它，方法是删除`sysouts`和其他东西。

# python - pydev、nose test runner 和 unicode 组合在 xmlrpclib 中引发意外异常

> ID：16101698
> 
> 赞同：0
> 
> 时间：2013-04-19T09:41:06.497
> 
> 标签：python, unicode, pydev, nose

我在使用 eclipse、pydev、nose 测试运行器和记录 unicode 文本时遇到了一个奇怪的问题。我不知道这是否只发生在我的配置和安装的版本中。所以，如果你们中的一些人可以尝试重现这个问题，并告诉我你是否有同样的问题，这对我很有帮助。我希望在下面的评论中复制所需的所有信息。请注意使用鼻子测试运行器，而**不是**禁用日志捕获。

```
import unittest
import logging

class WeirdUnicodeTestProblem(unittest.TestCase):
    """
    Weird Exception is raised in
        xmlrpclib (!)
    Fault: <Fault 0: 'Failed to read XML-RPC request:
        Invalid byte 1 of 1-byte UTF-8 sequence.'>
    Occurs when this is true:
     - nose test runner with log capturing on (=default)
     - eclipse + pydev
     - log some unicode text containing non standard ascii characters
     - raise any exception after logging 
    It does NOT occur when using nosetests on the commandline.
    """
    def test_problem(self):
        """
        This is how the problem can be reproduced
        """
        logger = logging.getLogger('bla')
        logger.debug(u'internation\xe4l')
        self.assertEqual(1, 2) # any exception raised will do here

    #def test_OK(self):
    #    """
    #    This is how the problem does not occur
    #    """
    #    logger = logging.getLogger('bla')
    #    logger.debug(u'good old 7bit')
    #    self.assertEqual(1, 2) # any exception raised will do here 
```

这是回溯：

```
Traceback (most recent call last):
  File "/Applications/eclipse_4.2.1/plugins/org.python.pydev_2.7.3.2013031601/pysrc/pydev_runfiles_xml_rpc.py", line 131, in run
    self.server.notifyCommands(commands)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1575, in __request
    verbose=self.__verbose
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1297, in single_request
    return self.parse_response(response)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1473, in parse_response
    return u.close()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 793, in close
    raise Fault(**self._stack[0])
Fault: <Fault 0: 'Failed to read XML-RPC request: Invalid byte 1 of 1-byte UTF-8 sequence.'> 
```

还有一件事更奇怪：如果我在第 131 行的 pydev_runfiles_xml_rpc.py 设置断点并尝试调试它，断点甚至没有命中，但代码运行干净（如预期的那样引发 AssertionError）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:36:12.480

请注意，这确实是 PyDev 端通信中的一个问题（因此，尽管它显示了该错误，但它不应该真的使您的测试失败）。

我正在为 PyDev 建立一个新的跟踪器，作为[http://igg.me/at/liclipse](http://igg.me/at/liclipse)的一部分，所以请在跟踪器启动后将其报告为跟踪器中的错误。

# jquery - jQuery在点击时更改一个div ID

> ID：16101701
> 
> 赞同：0
> 
> 时间：2013-04-19T09:41:27.867
> 
> 标签：jquery, html

我有一个隐藏的 div，当单击链接时（链接实际上是一个图像）隐藏的 div 显示。然后，我在隐藏的 div 中有一个链接，可以再次“隐藏”该 div。我想要尝试实现的是原始图像/链接“切换”，允许用户使用该图像打开和关闭 div。到目前为止，我的代码如下：

```
 <script type="text/javascript" language="JavaScript">
        function controlFooterIcons(v){
            if(v==1) $("#rpacks_admin").show(50);
            else $("#rpacks_admin").hide(50);
        }

        function toggleIcons(v){
            if (v==1) $('#show_rpack').attr("id", "hide_rpack");
        }

        $(document).ready(function(){
                $("#show_rpack").click(function(){
                    event.preventDefault();
                    controlFooterIcons(1);
                    toggleIcons(1);
                });
                $("#hide_rpack").click(function(){
                    event.preventDefault();
                    controlFooterIcons(0);                      
                });
        });
        </script> 
```

和 HTML/PHP

```
<div id="rpacks_admin" style="display: none;">
<h5>Hello</h5>
<a href="#" id="hide_rpack">Close</a> 
```

以及应该“切换”的链接

```
<a href='#' id='show_rpack'><img class='footericon'src='$BASE_URL/images/icons/recoverydisc.png' /></a>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:50:39.427

这个怎么样：

```
$("#show_rpack").click(function(event) { 
    event.preventDefault();

    var theDiv = $("#rpacks_admin");
    if (theDiv.is(":visible")) { 
        theDiv.hide(50);
    }
    else { 
        theDiv.show(50);
    }
}); 
```

# html - VBS代码一次访问一个用户共享的excel

> ID：16101702
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:41:28.443
> 
> 标签：html, excel, vbscript, shared

我有
1\. 共享 excel 表
2\. 带有 VBscript 的 Html 页面

我想执行一部分代码（在共享 excel 中保存一些数据），以便一次只有一个用户（首先打开该共享 excel 的用户）可以执行此操作。

我尝试了很多东西。但它没有按预期工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:04:56.030

下面的 vba 将检查文件是否打开。

```
Dim FileNum As Integer

'File exists
If Len(Dir(StrFilePath)) > 0 Then 
    FileNum = FreeFile() 
    On Error Resume Next 
    Open StrFilePath For Input Lock Read As #FileNum 
    'Open and lock file
    If Err.Number <> 0 Then 
        'File is open
    Else 
        'File is closed
    End If 
    Close FileNum 
    On Error GoTo 0
Else 
    'File does not exist
End If 
```

# jquery - 从 JQuery 编辑 Slider 的 CSS

> ID：16101705
> 
> 赞同：0
> 
> 时间：2013-04-19T09:41:33.837
> 
> 标签：jquery, css, colors, slider

我的网页上有一些滑块，我想更改其中一个滑块的颜色，但只更改选定的部分（例如，滑块的范围为 0 到 100，按钮位于 25，我只想要 0-25是红色的）。

我的滑块在 .html 文件中使用以下内容：

```
<label for="slider-main">Main Slider: </label>
<input type="range" name="slider-main" id="slider-main" value="25" min="0" max="100" data-highlight="true"/> 
```

何时应将颜色变为红色的规则如下：

```
<script>
if (slider-main-value-one>slider-main-max)
{
$("#slider-main").css("background","red");
}
else
{
$("#slider-main").css("background","");
}
})
</script> 
```

这只会改变标签的背景，而不是滑块

使用萤火虫并弄乱我发现了我需要更改以更改实际滑块颜色的元素；

> ui-slider-bg ui-btn-active ui-btn-corner-all

问题是，我不知道如何在 JQuery 中调用它。

在萤火虫中，当标签改变颜色时，就会发生这种情况；

```
<div class="ui-slider">    
<input id="slider-main" class="ui-input-text ui-body-a ui-corner-all ui-shadow-inset ui-slider-input" type="number" data-type="range" data-highlight="true" max="100" min="0" value="25" name="slider-main" style="background: none repeat scroll 0% 0% red;"> 
```

手动编辑 firebug 来改变滑块本身的颜色如下；

```
<div class="ui-slider-track ui-btn-down-a ui-btn-corner-all" role="application">
<div class="ui-slider-bg ui-btn-active ui-btn-corner-all" style="width: 28%; background: red"></div> 
```

这直接在标签更改颜色的代码下方。

所以总而言之，问题是，我如何从我的 .js （或从 .html 使用 ?

谢谢！

亲切的问候，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:49:53.687

您可以在 jQuery 中使用此选择器访问元素：

```
$('.ui-slider-bg.ui-btn-active.ui-btn-corner-all') 
```

或者您可以使用 CSS（显然是相同的选择器）：

```
.ui-slider-bg.ui-btn-active.ui-btn-corner-all {
    /* styles */
} 
```

编辑：这是工作代码：

```
$("#slider-main, #first-slider .ui-slider-bg.ui-btn-active.ui-btn-corner-all").css("background", "red"); 
```

[在 JSFiddle 中运行](http://jsfiddle.net/dislick/nZQh4/2/)。

# sorting - 使用高阶函数在带有参数的haskell中排序

> ID：16101710
> 
> 赞同：1
> 
> 时间：2013-04-19T09:41:48.100
> 
> 标签：sorting, haskell, higher-order-functions

嗨，我是 Haskell 初学者，我真的迷路了。这是我的任务，它要求我使用更高的订单功能执行以下操作

```
Main> mySort (<) [1,5,3,6,4,1,3,3,2] 
[1,1,2,3,3,3,4,5,6] 
Main> mySort (>) [1,5,3,6,4,1,3,3,2] 
[6,5,4,3,3,3,2,1,1] 
Main> mySort longerWord [“Hello”, “The”, “a”, “Daniel”, “Declarative”]
[“Declarative”, “Daniel”, “Hello”, “The”, “a”] 
```

首先，我想我应该做一个函数来区分它是 < ， > 还是 longWord

```
checkConditionStr::String->Int
checkConditionStr str
    |str=="(<)" =1
    |str=="(>)" =2
    |str=="longerWord" =3 
```

但该示例没有引号（即 mysort (<) not my sort"(<)" 所以这是我的第一个问题。我写了这个函数但它没有编译。否则是更长的Word

```
checkCondition::Ordering->Int
checkCondition ord
    |ord==(<) =1
    |ord==(>) =2
    |otherwise =2 
```

其次，我仍然难以理解高阶函数。这有意义吗？

```
mySort::(String->Int)->[a]->[a]
mySort i list
    |i==1 map (sortBy compare) list
    |i==2 map (sortBy(flip compare)) list 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:05:48.047

您不应该专门匹配这些功能。它首先破坏了使用高阶函数的目的。事实上，你不能这样写，因为没有比较函数的通用方法。

相反，直接使用传递的函数进行排序。这样，它将适用于任何合适的比较函数，而不仅仅是您明确为其编写代码的那些。

例如，假设任务是使用传递的运算符组合两个值：

```
combine (+) 2 3 = 5
combine (*) 3 5 = 15
combine max 10 100 = 100 
```

你会这样解决它：

```
combine op x y = x `op` y 
```

你能用类似的方法来解决排序问题吗？

提示：您可能需要定义一个辅助函数来将传递的比较函数转换为适合的形式`sortBy`：

```
compareUsing :: (a -> a -> Bool) -> (a -> a -> Ordering)
compareUsing op x y = ... 
```

# java - 最右边的 JButton 必须始终在 JPanel 中可见

> ID：16101711
> 
> 赞同：1
> 
> 时间：2013-04-19T09:41:48.483
> 
> 标签：java, swing, jpanel, jbutton, layout-manager

我有一个`JPanel`带有一组图标按钮（一对多）的标题面板（）和一个`JButton`带有符号的按钮（）。当我调整面板大小时，无论面板大小如何，我都希望带有符号的按钮始终可见。这意味着如果需要，应该使图标按钮集不可见。

什么是正确的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:43:25.157

将按钮放在`LINE_END`（或更准确地说，对于 RHS，特别是`EAST`）约束中 a `BorderLayout`。

# openerp - 如何从一个类中获取 openerp 中的所有对象？

> ID：16101719
> 
> 赞同：1
> 
> 时间：2013-04-19T09:42:27.767
> 
> 标签：openerp

我需要从一个类中获取所有对象并遍历它们。我试过这个，但没有任何结果：

```
def my_method(self, cr, uid, ids, context=None):
    pool_obj = pooler.get_pool(cr.dbname)
    my_objects=pool_obj.get('project.myobject')
    #here i'll iterate through them... 
```

如何在“my_objects”变量中获取“project.myobject”类的所有对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T07:55:42.917

您必须使用空参数进行搜索以获取现有对象的所有 id，例如：

```
myobj = pool.get('project.myobject')
ids = myobj.search(cr, uid, []) 
```

然后您可以通过 id 或 id 列表浏览或阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:54:36.763

看来您忘记导入 pooler 了。

```
from openerp import pooler 
```

愿它对你有所帮助。

# php - 我可以使用 AWS PHP SDK 在本地存储 S3 文件吗？

> ID：16101727
> 
> 赞同：1
> 
> 时间：2013-04-19T09:42:46.483
> 
> 标签：php, amazon-web-services, amazon-s3

我们将文件存储到 S3。每个环境都有自己的存储桶，因此每个开发人员也需要自己的存储桶。

我最近了解到 ruby​​gem AWS/S3 允许您通过 S3 接口访问本地文件。本地存储减少了网络流量，让你可以离线开发，当然也便宜一些。

在 PHP 中是否有类似的方法可以做到这一点？

有一个类似的项目称为 Fake S3，但从它的 Github 存储库来看，它没有得到积极维护：[https ://github.com/jubos/fake-s3](https://github.com/jubos/fake-s3)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-07T16:21:45.180

还有这个服务：[http](http://s3ninja.net/) ://s3ninja.net/ 但是 fake-s3 实际上工作得很好，需要记住一些事情：

*   没有ssl支持。
*   删除命令有一些问题。
*   关于终点，您可能需要“调整”对 S3 的调用（使用 fake-s3 时）。aws-ios-sdk 中的示例：

    ```
    // Create the S3 Client.
    AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithCredentials:uploadToken.credentials];
    // Create the amazon request.
    S3PutObjectRequest *request = [[S3PutObjectRequest alloc] initWithKey:uploadPath inBucket:uploadToken.container_name];

    if ([uploadToken.provider isEqualToString:@"fakes3"])
    {
        s3.endpoint = [[NSString alloc] initWithFormat:@"http://localhost:9294/"];
        request.key = [[NSString alloc] initWithFormat:@"%@/%@", request.bucket, uploadPath];
        request.bucket = nil;
    } 
    ```

# wolfram-mathematica - 在绘图周围放置框架时删除内部网格

> ID：16101728
> 
> 赞同：1
> 
> 时间：2013-04-19T09:42:47.357
> 
> 标签：wolfram-mathematica

请参阅此 MWE：

```
Plot[x, {x, -1, 1}, Frame -> True] 
```

绘制了一条与零交叉的水平线和一条垂直线 - 如何删除这些线？我试过`GridLines->None`了，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:30:02.153

曾经的代表妓女，这是我对答案的原始评论：

尝试添加`Axes->False`到 Plot 命令中的选项。

# android - Google Maps v2 Android 自定义图块 wms

> ID：16101729
> 
> 赞同：1
> 
> 时间：2013-04-19T09:42:48.253
> 
> 标签：android, google-maps, caching, wms

我正在使用 Google Maps v2 显示来自 wms 的图块。瓷砖显示正确，到目前为止一切都很好。现在我需要一个缓存功能。我正在使用此处提供的代码：[http ://www.azavea.com/blogs/labs/2013/01/wms-on-android/](http://www.azavea.com/blogs/labs/2013/01/wms-on-android/)

谷歌地图默认缓存瓷砖，但它不会缓存所有内容，瓷砖不会以非常高和低的缩放级别（重新下载）加载，并且只有“中间”的瓷砖从缓存中加载。主要问题是当我关闭应用程序并重新打开它时，谷歌地图不会从缓存中加载图块，而是重新下载所有内容。不知道为什么，缓存没有清除。

如果有人对“修复”谷歌地图中的瓷砖缓存有任何想法，那就太好了。如果没有，我如何从链接中的示例中获取下载的磁贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:33:28.210

我认为您将不得不编写自己的下载和缓存算法并实现而不是像示例中那样`TileProvider`扩展方便。`UrlTileProvider`

# facebook - 从 Facebook iOS SDK 3.2.1 升级到 3.5 给我一个 FBCrypto 错误

> ID：16101734
> 
> 赞同：9
> 
> 时间：2013-04-19T09:43:07.780
> 
> 标签：facebook, ios6, facebook-ios-sdk, xcode4.6

安装新的 sdk 后，我清理了项目并构建了它。它失败并显示此消息：

> 架构 i386 的未定义符号：“_SecRandomCopyBytes”，引用自：+[FBCrypto randomBytes:] in FacebookSDK(FBCrypto.o) -[FBCrypto encrypt:additionalDataToSign:] in FacebookSDK(FBCrypto.o) “_kSecRandomDefault”，引用自：+[ FacebookSDK(FBCrypto.o) 中的 FBCrypto randomBytes:] - FacebookSDK(FBCrypto.o) 中的 [FBCrypto encrypt:additionalDataToSign:] ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用-v 查看调用）

有同样的问题吗？解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T10:02:38.427

[好吧，您需要包括这里](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)所述的安全框架和 libsqlite3.dylib 。现在可以了。

*编辑*

现在也发现[了这个](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.2-to-3.5/)...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-12T17:02:57.493

跳上这一点，我遇到了同样的问题，我看到 FBSDK 需要安全、AdSupport 等。这是我的链接库：

![在此处输入图像描述](https://i.stack.imgur.com/BOYpz.png)

我的错误是一样的：

```
Undefined symbols for architecture i386:
  "_SecRandomCopyBytes", referenced from:
      +[FBCrypto randomBytes:] in FacebookSDK(FBCrypto.o)
      -[FBCrypto encrypt:additionalDataToSign:] in FacebookSDK(FBCrypto.o)
  "_kSecRandomDefault", referenced from:
      +[FBCrypto randomBytes:] in FacebookSDK(FBCrypto.o)
      -[FBCrypto encrypt:additionalDataToSign:] in FacebookSDK(FBCrypto.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

据我所知，所有其他框架依赖项都很好。Vlean->Build 也没有修复它。谢谢。

**编辑：**明白了。我需要重新将文件添加到项目并检查添加到目标按钮.. 基本上是 XCode automagicka

# html - 如何将 HTML 元素与文档的其余部分隔离开来

> ID：16101737
> 
> 赞同：-3
> 
> 时间：2013-04-19T09:43:22.463
> 
> 标签：html

在我们的例子中，最终用户可以在 HTML 中输入任务的“描述”属性。此 HTML 代码可以有自己的 CSS 和样式。当我将它包含在我们的页面中时，我不希望它的样式影响文档的其余部分。我如何实现这一目标？我们支持的浏览器是 Chrome、Firefox 和 IE8 和 IE9。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:57:28.560

您可以将其加载到 iframe 中。但是你真的应该做一些xss过滤，这样用户就不会放入恶意脚本。

# ruby-on-rails - rails，实现主要细节但保持 RESTful

> ID：16101738
> 
> 赞同：-2
> 
> 时间：2013-04-19T09:43:22.693
> 
> 标签：ruby-on-rails, rest, master-detail

假设我有一个客户和一个订单表，其中每个客户可能有许多订单。

由于在 Rails 中，我们鼓励以 RESTful 风格表示这些资源，因此我们的每个资源都将响应以下操作

*   指数
*   节目
*   编辑
*   新的
*   创造
*   删除

到目前为止，这一切都非常公平和简单。但是现在说每次我打开客户的显示页面时，我都想显示一个包含他/她所有订单的详细信息表。
这是一个非常普遍的需求，但是这不是“不干净”的restful方法的正确性吗？
是否有一些解决方法，比如在“视图级别”“混合”这两个资源，让它们与其他观点分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:07:23.253

Rails 的默认约定确保了一个 RESTful 应用程序，而这可能成为非 RESTful 的唯一方法是在路由上使用自定义名称，在这种情况下，您需要添加额外的代码来指定 HTTP 方法。

因此，要完成您的建议，在视图级别，您可能会有这样的事情：

应用程序/视图/客户/show.html.erb

```
....
<% if customer.orders.any? %>  #the orders method is provided on `customer` by defining the `has_many` and `belong_to` associations
  <%= render @orders $> 
```

并且您将确保在文件`@orders`的`show`操作中进行定义`customers_controller.rb`。

这不仅是 RESTful，而且也适用于 Rails 的默认约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T20:17:28.817

您列出的那些操作并不是 RESTful 的原因。必须将应用程序视为 RESTful 的一系列特征。其中一些特征是：

*   它被认为是资源的存储库
*   资源由 URI 标识
*   有一个用于与资源交互的统一接口 - HTTP 动词`GET`, `POST`, `PUT`,`DELETE`等。

Rails 负责通过路由接收 HTTP 请求并调用应用程序的功能，无论其本质上是否为 RESTful。Rails 路由将我提到的那些 HTTP 动词与 URI 结合起来，并确定要调用哪个控制器。默认情况下，Rails 遵循 RESTful 范式，并且按照惯例，会将动词/URI 组合映射到您列出的那些动作 - 但动作本身，以及它们被集中到单个控制器中的事实，并不是 REST 的一部分 - 它们只是轨道公约。

事实上，rails 默认路由将 4 个不同的资源映射到单个控制器及其操作：

```
/customers             // the list of all customers, GET/POST -> index/create
/customers/new         // a form for creating a customer, GET -> new
/customers/{id}        // a single customer, GET/PUT/DELETE -> show/update/destroy
/customers/{id}/edit   // a form for editing a customer, GET -> edit 
```

资源可以包含子资源，Rails 完全支持这一点。子资源可能是：

```
/customers/{id}/orders // the list of all orders for a particular customer 
```

REST 的另一个关键部分是它支持具有不同表示形式的资源，无论是 HTML、XML、JSON 等。客户端使用 HTTP 标头来传达他们正在传递给应用程序的表示形式（使用`Content-Type`标头）和（通常）什么他们将接受响应（使用`Accept`标题）。

由应用程序决定资源表示的样子。通常，资源要么是“瘦”的，要么是“胖”的。“瘦”资源是一种仅具有指向其子资源的链接并且必须进行进一步调用才能获取它们的资源。“胖”资源将包含它所包含的完整子资源。通常使用 HTML 表示，应用程序将返回某种形式的“胖”资源。没有什么是非 RESTful 的 - 这正是您所描述的您想要的应用程序。

所以这就是我所说的“不要害怕通过显示子资源而不是 RESTful - 这完全没问题” :-)

# nhibernate - NHibernate QueryOver - 无路径加入（或“反向”路径）

> ID：16101744
> 
> 赞同：2
> 
> 时间：2013-04-19T09:43:40.960
> 
> 标签：nhibernate, queryover, nhibernate-criteria

我试图在没有单个根实体的情况下获取多个实体（实体关系的有向图只是一个**弱连接图**，而不是强连接图），我无法弄清楚如何在 Nhibernates QueryOver api（或 Linq，但是这似乎更弱）

这些是我的关系：

`ClientTaxEntity`参考文献 1`Client`和 N`Manufacturers`

`InstructionTemplate`参考文献 1`Client`和 1`Manufacturer`

我想获得所有可能的客户-制造商对的结果（可能 = 它们在 ClientTaxEntity 中一起），如果存在则为它们获取模板（否则为 null）

这是我到目前为止所尝试的：

```
 Client client = null;
        Manufacturer manufacturer = null;
        InstructionTemplate template = null;
        ClientTaxEntity taxEntity = null;

        InstructionTemplateInfo info = null;

        var query =Session.QueryOver<ClientTaxEntity>(() => taxEntity)
                   .JoinAlias(x => x.Client, () => client)
                   .JoinAlias(x => x.Manufacturers, () => manufacturer)
                   .Left
                   .JoinQueryOver(() => template, () => template,() => template.Client == client && template.Manufacturer == manufacturer);
        var result = query
            .SelectList(builder => builder
                        .Select(() => client.Name).WithAlias(() => info.ClientName)
                        .Select(() => client.Id).WithAlias(() => info.ClientId)
                        .Select(() => manufacturer.Name).WithAlias(() => info.ManufacturerName)
                        .Select(() => manufacturer.Id).WithAlias(() => info.ManufacturerId)
                        .Select(() => template.Id).WithAlias(() => info.TemplateId)
                        .Select(() => template.Type).WithAlias(() => info.Type)
            )
            .TransformUsing(Transformers.DistinctRootEntity)
            .TransformUsing(Transformers.AliasToBean<InstructionTemplateInfo>())
            .List<InstructionTemplateInfo>(); 
```

info 对象是我想要的结果。

但是，语法`.JoinQueryOver(() => template`似乎对路径参数无效（异常表示：`could not resolve property: template of: ClientTaxEntity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:37:48.540

要在 SQL 中编写查询时获得您想要的结果，有必要按照以下方式编写一些内容：

```
SELECT Client_Id, Client_Name, Manufacturer_Id, Manufacturer_Name
FROM
(
  SELECT Client.Id as Client_Id, Client.Name as Client_Name, 
         Manufacturer.Id as Manufacturer_Id, Manufacturer.Name as Manufacturer_Name
  FROM ClientTax
  INNER JOIN Client on Client.Id = ClientTax.Client_Id
  INNER JOIN Manufacturer on Manufacturer.Id = Manufacturer.Manufacturer_id

  UNION

  SELECT Client.Id, Client.Name, Manufacturer.Id, Manufacturer.Name
  FROM InstructionTemplate
  INNER JOIN Client on Client.Id = InstructionTemplate.Client_Id
  INNER JOIN Manufacturer on Manufacturer.Id = InstructionTemplate.Manufacturer_id
) a
GROUP BY Client_Id, Client_Name, Manufacturer_Id, Manufacturer_Name; 
```

不幸的是，将这样的查询转换为 NHibernate 的查询 API 之一是不可能的，因为 NHibernate 不支持 UNION 语句*。请参阅 NHibernate 的错误跟踪器中的这个[问题](https://stackoverflow.com/questions/1642873/does-nhibernate-hql-support-the-union-all-keyword)和功能请求[NH-2710](https://nhibernate.jira.com/browse/NH-2710)。

*使用时除外`union-subclass`。有关更多详细信息，请参阅[文档](http://nhforge.org/doc/nh/en/#mapping-declaration-unionsubclass)

我能看到的唯一选择是

1.  执行 SQL 查询并将其映射到 DTO

    ```
    public class InstructionTemplateInfo
    {
      public int Client_Id { get; set; }
      public string Client_Name { get; set; }
      public int Manufacturer_Id { get; set; }
      public string Manufacturer_Name { get; set; }
    } 
    ```

    然后

    ```
    var result = session
           .CreateSQLQuery(theSQLQueryString)
           .SetResultTransformer(Transformers.AliasToBean<InstructionTemplateInfo>())
           .List<InstructionTemplateInfo>(); 
    ```

2.  在数据库中创建一个视图并将其映射为普通实体。

3.  如果 DBMS 支持多个结果集，例如 SQL Server，您可以编写两个查询，但将它们都标记为`Future`，然后在代码中合并两个结果集，即

    ```
    var resultSet1 = Session.QueryOver<ClientTaxEntity>(() => taxEntity)
               .JoinAlias(x => x.Client, () => client)
               .JoinAlias(x => x.Manufacturers, () => manufacturer)
               .SelectList(builder => builder
                 .SelectGroup((() => client.Name).WithAlias(() => info.ClientName)
                 .SelectGroup((() => client.Id).WithAlias(() => info.ClientId)
                 .SelectGroup((() => manufacturer.Name).WithAlias(() => info.ManufacturerName)
                 .SelectGroup((() => manufacturer.Id).WithAlias(() => info.ManufacturerId)
              .TransformUsing(Transformers.AliasToBean<InstructionTemplateInfo>())
              .Future<InstructionTemplateInfo>;

    var resultSet2 = Session.QueryOver<InstructionTemplate>(() => taxEntity)
               .JoinAlias(x => x.Client, () => client)
               .JoinAlias(x => x.Manufacturers, () => manufacturer)
               .SelectList(builder => builder
                 .SelectGroup((() => client.Name).WithAlias(() => info.ClientName)
                 .SelectGroup((() => client.Id).WithAlias(() => info.ClientId)
                 .SelectGroup((() => manufacturer.Name).WithAlias(() => info.ManufacturerName)
                 .SelectGroup((() => manufacturer.Id).WithAlias(() => info.ManufacturerId)
              .TransformUsing(Transformers.AliasToBean<InstructionTemplateInfo>())
              .Future<InstructionTemplateInfo>;

    var result = resultSet1.Concat(resultSet2 )
         .GroupBy(x=>x.ClientId+"|"+x.ManufacturerId)
         .Select(x=>x.First()); 
    ```

    这种方法的优点是 DBMS 只会被命中一次。有关此功能的更多详细信息，请参阅[Ayende 的博客文章](http://ayende.com/blog/3979/nhibernate-futures)。

# ios - 添加子视图时iOS奇怪的键盘隐藏行为

> ID：16101745
> 
> 赞同：0
> 
> 时间：2013-04-19T09:43:41.427
> 
> 标签：ios, objective-c, uiview, core-animation

我有一个视图，`UITextField`并且需要在`UIDatePicker`按下按钮时显示一个（它隐藏在键盘下方）。

我懒惰地实例化日期选择器，因为这使我可以更快地显示视图。

这是与点击按钮相关的代码：

```
- (IBAction)hideKeyboard {
    if (!self.datePicker) {
        // UIDatePicker allocation and initialization
        self.datePicker = ...
        ...
        [self.view addSubview:self.datePicker];
    }
    [self.textField resignFirstResponder];
} 
```

发生的情况是这会干扰键盘隐藏动画。实际上根本没有动画。

我得到的另一个线索是，这不会发生在模拟器上，而只会发生在实际设备（iPhone 4S）上。

我该如何解决这个问题？

**编辑**：

将 datePicker 设置为`inputView`textField 并不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:49:57.630

我可以向您推荐另一种解决方案，然后隐藏键盘并使用按钮显示日期选择器。

如果我理解正确，您想在用户点击文本字段时显示日期选择器，然后您可能在文本字段中设置日期。

UITextField 有一个属性

> @property（读写，保留） UIView *inputView

如果将 inputView 属性设置为日期选择器，则文本字段将显示日期选择器而不是键盘（甚至像键盘一样动画）。

当然，这些值需要您自己获取并设置为文本字段。

编辑原因：问题已编辑

我不知道为什么将日期选择器设置为输入视图没有帮助。无论如何，如果您不希望显示键盘并通过添加子视图来显示日期选择器，您可以使用 UITextField 的以下委托方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

实现委托方法。在该方法中，只需将 pickerview 作为子视图添加到您的视图并返回 NO 以不显示键盘。

编辑理由：表扬

有什么理由不使用文本字段吗？如果不是，我会使用它，因为它使一切变得更容易。如果您出于某种原因想使用 UILabel，那么您可以观看键盘通知。键盘什么时候消失然后显示日期选择器。

对于键盘通知，请参考这里，用示例代码很好地解释， UIKeyboardDidHideNotification 应该可以帮助你

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:58:43.367

非常简单 ：

只需添加一个日期选择器对象作为文本字段的输入值。无需显示/隐藏键盘。

```
UIDatePicker *datePicker = [[UIDatePicker alloc] init];
NSCalendar *calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar] ;
NSDate *currentDate = [NSDate date];
NSDateComponents *comps = [[NSDateComponents alloc] init] ;
[comps setYear:anyInteger];
NSDate *maximumDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];
[comps setYear:anyInteger;
NSDate *minimumDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];
[datePicker setMaximumDate:maximumDate];
[datePicker setMinimumDate:minimumDate];
datePicker.datePickerMode = UIDatePickerModeDate;
textField.inputView = datePicker; 
```

# opencv - 如何从 calibrateCamera() 返回值中获取相机投影矩阵

> ID：16101747
> 
> 赞同：8
> 
> 时间：2013-04-19T09:43:49.423
> 
> 标签：opencv, triangulation, camera-calibration

我正在尝试为三角测量过程获取**3x4**相机矩阵，但`calibrateCamera()`仅返回**3x3**和**4x1**矩阵。

我怎样才能从这些矩阵中得到**3x4 ？**

提前致谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-29T12:36:33.530

calibrateCamera() 返回
一个 3x3 矩阵作为 cameraMatrix，
一个 4x1 矩阵作为 distCoeffs，以及作为 3x1 旋转 (R) 和 3x1 变换(t) 矩阵的向量的 rvecs 和 tvecs。

你想要的是 ProjectionMatrix，它是 [cameraMatrix] 乘以 [R|t]。 ![3D转2D投影](https://i.stack.imgur.com/d9zN6.png)

因此，它会返回一个 3x4 ProjectionMatrix。
您可以阅读[OpenCV 文档](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-02T16:53:24.640

如果你使用 cameraCalibrate()，你必须得到 mtx、rvecs 和 tvecs。R 是 3x1，您需要使用 opencv 的 Rodrigues 方法将其转换为 3x3。所以最终的代码看起来像：

```
R = cv2.Rodrigues(rvecs[0])[0]
t = tvecs[0]
Rt = np.concatenate([R,t], axis=-1) # [R|t]
P = np.matmul(mtx,Rt) # A[R|t] 
```

假设您使用了多张图像来校准相机，这里我只使用第一个来获取第一张图像的 P 矩阵。对于任何其他图像，您可以将 rvecs[IMAGE_NUMBER]、tvecs[IMAGE_NUMBER] 用于相应的 P 矩阵

# c - 分叉后libev中的分段错误

> ID：16101756
> 
> 赞同：0
> 
> 时间：2013-04-19T09:44:04.743
> 
> 标签：c, linux, fork, libev

我想用`libev`. 我想在键盘输入上有一个观察者，它将解析几个命令，如“开始”“停止”“退出”。在“开始”时，我想创建一个管道并派生应用程序以在子级中启动一些工作程序（例如`ffmpeg`使用`exec()`或只是一些打印某些字符的循环），并在父级的该管道上设置一个观察者以将输出打印到控制台。在“停止”命令中，我想杀死一个孩子并移除一个观察者。

我已经实现了这个程序，但是在 fork 之后，当孩子运行时，我总是在键盘输入上遇到段错误。

起初我以为是因为 if`STDIN`可以在孩子和父母之间共享。我试图分离孩子，关闭`STDIN`孩子。然后我尝试在开始时`dup` `STDIN`关闭 parent 中的默认值`STDIN`，并在 duplicated 上设置一个观察者`STDIN`。我还尝试`STDOUT/ERR`在分叉之前关闭描述符并在分叉之后将它们恢复到父级中。

我停下来开始`user_input`观察`user_input`回调，以防万一这有帮助。

`ev_default_fork()`然后我尝试`ev_loop_fork()`在一个孩子中执行（这不是必需的，因为我想`exec()`在 fork 之后或者在任何情况下子循环永远不会获得控制）但没有成功。

我还尝试使用不同的后端（`select`而不是`epoll`）。

我也试图忽略一些信号，比如`SIGHUP` `SIGPIPE` `SIGCHILD`.

我还注意到，在`fork()`原因段错误和 bash 之后我的输入将其作为命令获取，所以如果我执行这样的操作（使用“>”表示自己手写输入，使用“<”表示程序和系统输出）：

```
> $ ./libev_example
> start
< Debug: fork data got: 
< [Data got from child through pipe] 
> asd
< Segmentation fault (core dumped)
< $ asd
< bash: asd: command not found... 
```

然后我从源代码构建`libev`并尝试调试。段错误发生在`ev.c:1698`

```
 if (expect_false (w_->pending))
      pendings [pri][w_->pending - 1].events |= revents;
  else 
```

`pri`值为 4，据我所知，这是一个优先事项。`pendings[4]`是`0x0`这样的段错误发生。当程序不崩溃时，代码进入`else`分支。

返回的 fd`epoll`是 0，但无论如何我都没有使用 0 作为 fd。此外，对于 0，有一个观察者`loop->anfds`对我的回调有`user_input`回调。在之前的迭代中，当我输入任何字符串时，没有事件为 0。我检查了管道 fds，它们也有一个大于 0 的数字。

我无法弄清楚这里发生了什么以及我做错了什么。我可以在这里放一些代码，但那里没有什么特别的。这篇文章足够大，所以如果有人要求提供代码，我稍后会发布。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:16:28.650

行。用gdb一段时间解决了这个问题。我在我的代码中发现了几个与 libev 或 fork 没有直接联系的错误。

导致这种奇怪行为的问题是我的错误输入，由于我的注意力不集中而我没有注意到。我将标准`ev_io`结构子类化，但出于某种原因，我做了这个：

```
typedef struct lee_user_input_event_t{
    struct ev_io *event;
    struct lee_process_data_t *child_process_data;
...
}; 
```

而不是这个：

```
typedef struct lee_user_input_event_t{
    struct ev_io event;
    struct lee_process_data_t *child_process_data;
...
} 
```

因此，将回调中的事件指针转换为我自己的结构是一场彻底而巨大的灾难。

# symfony - 区域设置切换器语言未显示

> ID：16101757
> 
> 赞同：0
> 
> 时间：2013-04-19T09:44:14.843
> 
> 标签：symfony, locale, switchers

我正在使用语言环境切换器

```
https://github.com/lunetics/LocaleBundle/blob/master/Resources/doc/switcher.md 
```

通过在 twig 中调用 {{ locale_switcher() }} 它会显示我的语言列表...这适用于每个页面，例如 /news/ /profile/ 不管什么...

然后，如果用户登录与否，“主根”“/”mysite.com/ 的内容会有所不同。

它在用户注销时工作.. locale_switcher 显示语言......但是在相同的 url .. 当我**登录时**..**它不起作用**......当然在 /home/ 等工作......即使登录...

我不知道为什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T08:43:25.583

这应该工作

```
project_main:
    pattern: /{_locale}
    defaults: 
        _controller: ProjectWebBundle:Main:main
        _locale: %locale% 
```

# perl - 如何理解 Data::Dumper 的输出？

> ID：16101759
> 
> 赞同：1
> 
> 时间：2013-04-19T09:44:31.850
> 
> 标签：perl

```
#!/usr/bin/perl
use Data::Dumper;
use Tk;
use strict;
use warnings;
my $name='test';
my $s_ref=\$name;
bless $s_ref, 'Tk';
print Dumper \$s_ref; 
```

输出信息为：

```
$VAR1 = \bless( do{\(my $o = 'test')}, 'Tk' ); 
```

如何理解这些信息？我们从输出中得到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:51:49.367

Data::Dumper 需要获取对字符串的引用，而无需在当前范围内创建新变量，这大概就是它的做法。从中间向外工作，我们有`my $o = 'test'`声明`$o`，设置它的值`'test'`并返回`$o`。在这种情况下，`do{}`块提供了`my`绑定存在的范围，当块退出`$o`时不再存在但它引用的值继续存在，这很好，因为`\`在 do 块的开头引用了它的返回值。然后对字符串的引用`'test'`带有`'Tk'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:54:54.460

通常 Data::Dumper 用于检查 Hash 或 Array 等变量的内容。在您的情况下，您正在尝试转储类对象引用。

例如看下面的代码和输出，$VAR1 显示了 $var 的内容，它是关联数组（HASH）

代码：

```
#!/usr/bin/perl
use Data::Dumper;

my $var = {a => 'One', b => 'Two', c => [1,2,3]};

print Dumper $var; 
```

输出：

```
$VAR1 = {
  'c' => [
           1,
           2,
           3
         ],
  'a' => 'One',
  'b' => 'Two'
}; 
```

# knockout.js - 淘汰赛中的 lostfocus/onblur 事件

> ID：16101763
> 
> 赞同：26
> 
> 时间：2013-04-19T09:44:44.167
> 
> 标签：knockout.js, mouseout, event-binding

我想在绑定到`input`. 这个函数应该在控件失去焦点时执行，即使没有输入任何内容。我试图更改事件绑定，但是当用户离开控件而不键入任何内容时它不会触发。我尝试了 mouseout 事件，但只有当用户在失去焦点后单击表单中的其他地方时才会触发 - 这不是我想要的。我希望在焦点从控件移开后立即触发，即使使用选项卡也是如此。

以下是我用于 mouseout 事件的代码：

```
<input
    type="text"
    id="txtFirstName"
    tabindex="1"
    maxlength="25"
    class="txtbox" 
    style="width: 200px;"
    data-bind="value: FirstName, 
               attr: {title: FirstNameErrorMessage },
               css: {validationFailed: !IsValidFirstName() },
               event: {mouseout: ValidateFirstName}" 
/>

this.ValidateFirstName = function () {
    self.IsValidFirstName(true);
    self.FirstNameErrorMessage('');
    if (self.FirstName() == '') {
        self.IsValidFirstName(false);
        self.FirstNameErrorMessage('First Name is required');
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-19T11:44:25.013

我认为您可以使用几种方法。一个不错的选择是使用 KO 的`hasfocus`绑定： http: [//knockoutjs.com/documentation/hasfocus-binding.html](http://knockoutjs.com/documentation/hasfocus-binding.html)。

你可以绑定一个 boolean observable，然后订阅它。在订阅中，您可以选择仅在该值现在为 false 时做出反应。

就像是：

```
self.FirstName = ko.observable();
self.FirstName.focused = ko.observable();

self.FirstName.focused.subscribe(function(newValue) {
   if (!newValue) {
       //do validation logic here and set any validation observables as necessary
   }
}); 
```

像这样绑定它：

```
data-bind="value: FirstName, hasfocus: FirstName.focused" 
```

我认为，如果您希望每次用户离开该字段时都触发它，无论他们如何离开，也无论是否实际进行了更改，这将是一个不错的选择。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-20T10:08:59.020

这对我有用：

```
data-bind="event: { blur: OnBlurEvent }" 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-19T14:48:51.957

我喜欢@RPNiemeyer 的回答。但是，我只想指出，并非*所有事情*都必须通过 Knockout 完成。它只是一个工具，有时它并不是工作的最佳工具。你总是像在 JS 中那样使用直接事件绑定，即

```
$('#FirstName').on('blur', function () {
    // do something
}); 
```

如果您需要在那里与您的视图模型进行实际交互，那么您可以简单地`ko.dataFor`按照[Knockout 的事件委托文档](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)中的描述使用：

```
$('#FirstName').on('blur', function () {
    var data = ko.dataFor(this);
    // do something with data, i.e. data.FirstName()
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-25T14:12:05.860

`event:{blur: ValidateFirstName}`如果用户点击或“跳出”输入，您是否尝试过此事件将被触发。

```
<input
    type="text"
    id="txtFirstName"
    tabindex="1"
    maxlength="25"
    class="txtbox" 
    style="width: 200px;"
    data-bind="value: FirstName, 
               attr: {title: FirstNameErrorMessage},
               css: {validationFailed: !IsValidFirstName()},
               event: {blur: ValidateFirstName}" 
```

这是一个工作示例的[JSFiddle](http://jsfiddle.net/oo64zh5d/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-14T05:14:58.327

我刚刚遇到了同样的问题，通过创建自定义绑定解决了它：

```
ko.bindingHandlers.modifyOnFocusOut = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        $(element).blur(function() {
            //Do your work
        });
    }
} 
```

然后这样称呼它：

```
 data-bind="value: FirstName, modifyOnFocusOut: FirstName" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-16T09:44:34.537

使用 TypeScript，我使用 2 个自定义绑定、一个 SetFocusBinding 和一个 OnBlur 绑定解决了它……使用 SetFocusBinding 我确保输入字段具有焦点。使用 OnBlur 绑定会在触发模糊事件时调用函数。

```
module Fx.Ko.Bindings {
    export class SetFocusBinding implements KnockoutBindingHandler {
        public update(element, valueAccessor, allBindingsAccessor) {
            var value = valueAccessor();
            var valueUnwrapped = ko.unwrap(value);
            if (valueUnwrapped == undefined) {
                return;
            }
            if (valueUnwrapped)
                $(element).focus();
        }
    }
} 
```

和 ...

```
 module Fx.Ko.Bindings {
        export class OnBlurBinding implements KnockoutBindingHandler {
            public init(element, valueAccessor, allBindings, viewModel, bindingContext) {
                var value = valueAccessor();
                $(element).on('blur', function (event) {
                    value();
                });
            }
        }
    }
interface KnockoutBindingHandlers {
    onBlur: KnockoutBindingHandler;
}
ko.bindingHandlers.onBlur = new Fx.Ko.Bindings.OnBlurBinding(); 
```

# mysql - Mysql - 我的 Calc 查询中没有添加

> ID：16101766
> 
> 赞同：0
> 
> 时间：2013-04-19T09:45:19.477
> 
> 标签：mysql

我将计算笔记，并通过 MySQL Query 实现这一点。这里是整个查询：

```
SELECT DISTINCT Round(Avg(avg = 2) * Count(avg)) AS New,
                sma_famille.famille
FROM   (SELECT DISTINCT Round(Sum(note) / Count(note)) AS AVG,
                        sma_famille.famille,
                        sma_agents.nom
        FROM   sma_notes_conso
               INNER JOIN sma_famille
                       ON sma_famille.id_service
               INNER JOIN sma_agents
                       ON sma_notes_conso.id_agent = sma_agents.id_agent
               INNER JOIN sma_service_activite
                       ON sma_service_activite.id_activite =
                          sma_notes_conso.id_activite
               INNER JOIN sma_service
                       ON sma_service.id_service
        WHERE  sma_service.id_entites IN( 20 )
               AND sma_famille.id_service IN( 988, 989, 990 )
               AND sma_service_activite.id_famille = sma_famille.id_famille
               AND sma_service_activite.id_service = sma_famille.id_service
               AND sma_service_activite.id_service = sma_service.id_service
               AND date_conso = '2013-04-03'
        GROUP  BY sma_famille.famille,
                  sma_agents.nom) AS FN
       INNER JOIN sma_famille
               ON sma_famille.id_service
       INNER JOIN sma_service
               ON sma_service.id_service
WHERE  sma_service.id_entites IN( 20 )
       AND sma_famille.id_service IN( 988, 989, 990 )
       AND sma_service.id_service = sma_famille.id_service
       AND FN.famille = sma_famille.famille
GROUP  BY FN.famille 
```

如果我只有一个 id_service ，则查询可以正常工作：这里是第一个：

```
 AND sma_famille.id_service IN(988) 
```

我得到了这些结果集：

```
 |9  |Math|
    |13 |English|
    |2  |Bio| 
```

这里是第二个

```
 AND sma_famille.id_service IN(989)

    |5  |Math|
    |8  |English|
    |0  |Bio| 
```

如果我两个都拿，他乘以 2

```
 AND sma_famille.id_service IN(988,989) 
```

我得到了这些结果集：

```
 |28 |Math|
    |42 |English|
    |4  |Bio| 
```

但我不想要乘法，我想要添加两个“id_service”，例如：

```
 |14  |Math|
    |21  |English|
    |2   |Bio| 
```

如果我有三个 id，那么他将它乘以 3！

每次如果我添加一个“id_service”，他就会乘以 id_service 的数量

对于每个注释，我有 3 次相同的查询。注释为 1、2、3。这些示例仅适用于注释 2

任何人都可以看到问题吗？

提前 THX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:27:22.760

我想我发现了你的问题：

您没有正确设置 INNER JOIN。因此，您的查询进行了笛卡尔连接并将值相乘。以下应该是正确的：

```
SELECT DISTINCT round( avg( AVG =1 ) * count( AVG ) ) AS New, sma_famille.famille
                            FROM (...
                            ) AS FN
                            INNER JOIN sma_famille ON sma_famille.id_service = FN.id_service -- added join criteria
                            INNER JOIN sma_service ON sma_service.id_service = FN.id_service -- added join criteria
                            WHERE sma_service.id_entites IN(20)
                            AND sma_famille.id_service IN(988,989,990) 
                            AND sma_service.id_service = sma_famille.id_service
                            AND FN.famille = sma_famille.famille
                            GROUP BY FN.famille; 
```

# nhibernate - 找不到程序集'NHibernate.Search

> ID：16101767
> 
> 赞同：2
> 
> 时间：2013-04-19T09:45:21.130
> 
> 标签：nhibernate, exception, .net-assembly

我在我们的一个构建环境（不是在我的本地机器上）间歇性地收到以下错误 - 忽略 NH 版本 - 我编译了程序集表单源。然后在 iis 中重新启动应用程序池。我不知道这是从哪里来的。有任何想法吗？

```
An unhandled exception occurred and the process was terminated.

Application ID: DefaultDomain

Process ID: 2428

Exception: System.Runtime.Serialization.SerializationException

Message: Unable to find assembly 'NHibernate.Search, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'.

StackTrace:    at System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name)
   at System.Runtime.Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped record)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.AppDomain.Deserialize(Byte[] blob)
   at System.AppDomain.UnmarshalObject(Byte[] blob) 
```

# android - 微调器中的 TextView 颜色

> ID：16101770
> 
> 赞同：0
> 
> 时间：2013-04-19T09:45:37.780
> 
> 标签：android, textview, android-spinner

我想要的是微调器的文本颜色在运行时应该是白色的，当它显示在微调器内部时，因为它在微调器 1 和 2 中，并且微调器列表的文本颜色应该是黑色，如图所示。

问题是我能够为前 2 个 Spinner 做到这一点，但不能为第 3 个和第 4 个 Spinner 做到这一点。

如果您可以看到第 3 和第 4 个 Spinner 有值但为黑色。我不明白，如果可能有 2 个微调器，那么 y 不是所有 4 个。请帮助我。

![在此处输入图像描述](https://i.stack.imgur.com/wMKTB.png) ![在此处输入图像描述](https://i.stack.imgur.com/7aZjB.png)

这是我在运行时更改颜色的代码：

```
public class Text                  // class for changing the text color of spinner
{
    private TextView tv = null;
    Text(View spin_adptr)
    {

        tv = (TextView) spin_adptr.findViewById(R.id.textspin);
        tv.setTextColor(Color.WHITE);
    }
} 
```

这就是我所说的：

```
public void onItemSelected(AdapterView<?> parent, View arg1, int position,
        long arg3) {
    int id = parent.getId();
    Text text = new Text(spinner1);   //Change of color (Working)
            Text text1 = new Text(spinner3);  //Change of Color(ERROR)
            Text text2 = new Text(spinner4);  //Change of Color(ERROR)

    switch (id) {
    case R.id.spinner1:

        String b = spinner1.getSelectedItem().toString();

        if (b != null) {
            dbCarHelper.make_pop(b);
        }

        List<String> lb = h.getAllLabels();

        ArrayAdapter<String> dAdapter = new ArrayAdapter<String>(this,
                R.layout.spin_adptr,lb);

        dAdapter.setDropDownViewResource(R.layout.spin_adptr);
        spinner2.setAdapter(dAdapter);

        break;

    case R.id.spinner2:
        Text text1 = new Text(spinner2);   //// Change of color (working)
        String a = spinner2.getSelectedItem().toString();

        if (a != null) {
            dbCarHelper.m_pop(a);
        }

        CarHelper c = new CarHelper(getApplicationContext());

        List<String> lable = c.getAllLabel();

        ArrayAdapter<String> dAdaptr = new ArrayAdapter<String>(this,
                R.layout.spin_adptr,lable);

        dAdaptr.setDropDownViewResource(R.layout.spin_adptr);

        spinner3.setAdapter(dAdaptr);

        break;

    }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:54:52.670

制作一个名为 spinner_layout 的 xml 文件并编写如下代码

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
style="?android:attr/spinnerItemStyle"
android:layout_width="fill_parent"
android:layout_height="48dp"
android:gravity="center_vertical"
android:paddingLeft="4dp"
android:textSize="18sp"
android:textColor="#FFFFFF"
android:ellipsize="marquee"
android:singleLine="true" /> 
```

制作另一个名为 spinner_dropdown 的 xml 并编写以下代码

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
style="?android:attr/spinnerItemStyle"
android:layout_width="fill_parent"
android:layout_height="48dp"
android:gravity="center_vertical"
android:paddingLeft="4dp"
android:textSize="18sp"
android:textColor="#000000"
android:ellipsize="marquee"
android:singleLine="true" /> 
```

现在更新您的代码如下

```
ArrayAdapter<String> dAdapter = new ArrayAdapter<String>(this,
            R.layout.spinner_layout,lb);

    dAdapter.setDropDownViewResource(R.layout.spinner_dropdown); 
```

# php - 使用 PHPExcel 从 MySQL 查询结果中导出 PDF

> ID：16101771
> 
> 赞同：1
> 
> 时间：2013-04-19T09:45:44.477
> 
> 标签：php, mysql, pdf-generation, phpexcel

我正在使用 PHPExcel 以 Excel 和 CSV 格式导出 MySQL 查询结果，但我无法执行相同操作并将结果导出为 PDF。

下面是我用来执行此操作的代码：

```
$objPHPExcel = new PHPExcel;        

$headings = array('ID','Source Date','Source','Programme Name','Coder','Presenter','Format','Audio Path','Video Path');

$rowNumber = 1;
$col = 'A';
foreach($headings as $heading)
{
    $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$heading);
    $col++;
}

$rowNumber = 2;
while($row = $dbase->fetchrow($query))
{
    $col = 'A';

    foreach ($row as $cell) {

        $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
        $col++;
    }
    $rowNumber++;
}

//freeze pane so that the heading does not scroll
$objPHPExcel->getActiveSheet()->freezePane('A2');

//save as an Excel(.xls) file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'PDF');
$objWriter->writeAllSheets();

$objWriter->save('Report.pdf');
exit(); 
```

我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:59:39.510

如果您使用的是最新的 1.7.8 版本的 PHPExcel，那么您还需要在服务器上安装一个 PDF 渲染库（tcPDF、DomPDF 或 mPDF）。然后，您需要告诉 PHPExcel 您正在使用哪些库，以及它安装在服务器上的什么位置。

这在开发人员文档的第 6.9.1 节中进行了描述，标题为“PHPExcel_Writer_PDF”

**编辑**

您可能还想在代码中添加一些异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:48:49.677

已更正代码。其描述如下：

```
//save as a PDF file
$objWriter = new PHPExcel_Writer_PDF($objPHPExcel);
$objWriter->writeAllSheets();

$objWriter->save(ABSOLUTE_MEDIA_PATH.'Report_dated_'.date('d_M_Y',time()).'.pdf'); 
```

将代码的最后一部分更改为此。

谢谢

# wsdl - WSDL Endpoint 示例在 Mule 中引发错误

> ID：16101774
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:00.203
> 
> 标签：wsdl, mule, esb

在这里发帖总是我最后的手段，但我在这里发疯了。我是 Mule ESB 初学者。我一直在尝试做一些简单的例子来让我走上正轨。但是我在mule网站上看到的一个例子遇到了问题...... [http://www.mulesoft.org/documentation/display/current/WSDL+Connectors](http://www.mulesoft.org/documentation/display/current/WSDL+Connectors)

我正在尝试设置一个通用 WSDL 端点，它调用 Web 服务而不生成客户端。

我试图访问的 WSDL... [http://www.webservicex.net/CurrencyConvertor.asmx?WSDL&method=ConversionRate](http://www.webservicex.net/CurrencyConvertor.asmx?WSDL&method=ConversionRate)

问题是，我不断收到以下错误

```
[ERROR] IOException during exec() of compiler "javac". Check your path environment variable.
ERROR 2013-04-19 09:27:07,920 [[soap].soapFlow1.stage1.02] org.apache.cxf.endpoint.dynamic.DynamicClientFactory: Could not compile java files for http://www.webservicex.net/CurrencyConvertor.asmx?WSDL&method=ConversionRate?wsdl.
ERROR 2013-04-19 09:27:07,934 [[soap].soapFlow1.stage1.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Unable to create JAXBContext for generated packages: Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated: javax.xml.bind.JAXBException: "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index (java.lang.IllegalStateException)
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index (javax.xml.bind.JAXBException)
  com.sun.xml.bind.v2.ContextFactory:183 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/xml/bind/JAXBException.html)
2\. Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated: javax.xml.bind.JAXBException: "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index (javax.xml.bind.JAXBException)
  javax.xml.bind.ContextFinder:-1 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/xml/bind/JAXBException.html)
3\. Unable to create JAXBContext for generated packages: Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated: javax.xml.bind.JAXBException: "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index (java.lang.IllegalStateException)
  org.apache.cxf.endpoint.dynamic.DynamicClientFactory:363 (null)
4\. Unable to create JAXBContext for generated packages: Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated: javax.xml.bind.JAXBException: "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index (java.lang.IllegalStateException) (org.mule.api.DefaultMuleException)
  org.mule.module.cxf.builder.AbstractOutboundMessageProcessorBuilder:96 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/DefaultMuleException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
javax.xml.bind.JAXBException: "net.webservicex" doesnt contain ObjectFactory.class or jaxb.index
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:183)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

是的，我已经在互联网上搜寻了几个小时以寻找解决方案。

我为尝试解决问题所做的事情。

*   确保在环境变量中设置了 javac 路径。(%JAVA_HOME%\bin)
*   确保 mule studio 有正确的 JRE 路径

我知道这是一个简单的问题，但我需要弄清楚它以解决我想到的一个更大的项目。
如果有人可以解决这个问题，那么我将非常感激。

谢谢 :)

其他信息：

*   使用 Java 1.7
*   使用 MuleStudio 3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:52:12.850

好的，在尝试了许多不同的解决方案并失败后，我想通了。我见过很多人问和我一样的问题，但很少有解决方案。
这是我

的... JRE 不正确。
我的 java 目录由..
![在此处输入图像描述](https://i.stack.imgur.com/VcpaO.png)
和 Mule studio 使用文件夹 jre7
所以我将它更改为使用目录 jdk1.7.0_17/jre 中的 JRE
再次运行它并且.. **OMG 成功了！**
这是在 mule studio/eclipse 中的操作方法...

右键单击您的项目 --> 属性 --> Java 构建路径 --> 库选项卡
--> 单击 JRE 系统库 --> 按编辑 --> 单击Alternate JRE --> 点击 Installed JREs..
--> 然后像我上面所说的那样从正确的目录添加 JRE。

希望这可以帮助任何有同样问题的人！:)

# php - 带有 jQ uery Ajax 的 Cake App 不能在远程服务器上运行 :(

> ID：16101775
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:02.933
> 
> 标签：php, jquery, ajax, cakephp, cakephp-2.0

我的 Cake App 有问题。

我的操作代码如下：

```
public function event($year, $month) {
        if($this->RequestHandler->isAjax())
            return new CakeResponse(array('body'=> json_encode($this->Event->getMessages($year, $month))));
        else
            $this->set('event', $this->Event->getMessages($year, $month));
} 
```

此外，我还有第二个动作，它是空方法：

```
public function tester(){} 
```

和相关的视图（tester.ctp）

```
<div id="result"></div>
<script>    
    (function($) {
        $(document).ready(function(){
            var url = '<?php echo Router::url(array('controller' => 'events', 'action' => 'event', '2013', '4'));?>';
            $.get(url, function(data){ 
               data = $.parseJSON(data);
               for(var i = 0; i < data.length; i++) 
                   $('#result').append(data[i].date + ' ' + data[i].message + '<br />');
            });
        });
    })(jQuery);
</script> 
```

问题如下。我的应用程序在我的本地服务器上运行良好，但在远程服务器上无法运行。令人沮丧的是，当我在一个用纯 PHP 编写的控制器上交换 Cake 时，问题就不存在了，并且一切都在本地和远程服务器上完美运行。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:20:57.353

您可能想查看 CakePHP 手册[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html中的 _serialize](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

您可以向 /events/event/2013/4.json 发送请求，并使用 _serialize 检索 json 对象，请务必添加 Router::parseExtensions('json'); 到您的路线文件。

```
public function event($year, $month) {
    $this->set('event', $this->Event->getMessages($year, $month));
    $this->set('_serialize', array('event'));
} 
```

这样你就不需要检测它是否是ajax。

# c# - C# LINQ 多选

> ID：16101778
> 
> 赞同：4
> 
> 时间：2013-04-19T09:46:08.580
> 
> 标签：c#, .net, linq

我将 Cases 与 Controls 匹配，基本上是 Case 列表中的记录，需要具有 string 中指定的匹配数`m_ctrlno`。

到目前为止，我有两个列表，where 子句是正确的，但是我不确定如何使用`SelectMany`来获取匹配 1 个案例的 3 个控件。我决定使用该`.Take()`功能，但它似乎不起作用。当我在 var 查询上循环时，我没有得到与 3 个不同控件相同的情况。

这是代码：

```
List<CaseSelection> CurrentCaseList = new List<CaseSelection>();
foreach (CaseSelection CurrentCase in m_casesarraylist)
CurrentCaseList.Add(CurrentCase);

List<ControlSelection> CurrentControlList = new List<ControlSelection>();
foreach (ControlSelection CurrentControlRec in ControlList)
CurrentControlList.Add(CurrentControlRec);

var query = CurrentCaseList.SelectMany(
c => CurrentControlList.Where(o => o.pracid == c.pracid && o.sex == c.sex &&
CaseSelectionList.AgeIsInRange(c.yob, o.yob, m_years)),
(c, o) =>
new { o, c }).Take(m_ctrlno); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:50:37.160

在您的代码中，您定义 2 list`CurrentCaseList,CurrentControlList`但未定义`CaseSelectionList`。

要获得与一种情况匹配的 3 个控件，请参见下面的代码：

`SelectMany`选择所有`TotalDue`小于 500.00 的订单的方法。

这是代码：

```
decimal totalDue = 500.00M;
using (AdventureWorksEntities context = new AdventureWorksEntities())
{
    ObjectSet<Contact> contacts = context.Contacts;
    ObjectSet<SalesOrderHeader> orders = context.SalesOrderHeaders;

    var query =
    contacts.SelectMany(
        contact => orders.Where(order =>
            (contact.ContactID == order.Contact.ContactID)
                && order.TotalDue < totalDue)
            .Select(order => new
            {
                ContactID = contact.ContactID,
                LastName = contact.LastName,
                FirstName = contact.FirstName,
                OrderID = order.SalesOrderID,
                Total = order.TotalDue
            }));

    foreach (var smallOrder in query)
    {
        Console.WriteLine("Contact ID: {0} Name: {1}, {2} Order ID: {3} Total Due: ${4} ",
            smallOrder.ContactID, smallOrder.LastName, smallOrder.FirstName,
            smallOrder.OrderID, smallOrder.Total);
    }
} 
```

# macos - 从沙盒应用程序的应用程序包中复制文件

> ID：16101780
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:22.060
> 
> 标签：macos, bundle, sandbox

我有一个带有一些预定义工具配置的图形应用程序。在应用程序的第一次午餐时，我想从包的内部将这些默认配置文件复制到 ~/Library/Containers//Data/Library/... 中。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:06:41.930

试试这个它会帮助你。

```
-(void)copy
{
    NSFileManager *filemanager = [NSFileManager defaultManager];
    NSError *error;
    NSString *path = [self getPath];
    BOOL sucess = [filemanager fileExistsAtPath:path];

    if(!sucess){
        NSString *defaultPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"/*put your assets name with extension here */"];
        sucess = [filemanager copyItemAtPath:defaultPath toPath:path error:&error];
        if (!sucess) {
            NSAssert1(0, @"Failed '%@'.", [error localizedDescription]);
        }
    }
}
-(NSString *) getPath{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"/*put your assets name with extension here */"];
} 
```

# python - 如何使用 Python 从 excel 文件中的日期列中减去固定日期？

> ID：16101782
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:27.500
> 
> 标签：python, date, csv

我有一个格式如下的文件：

```
name           date
sam          21/1/2003
bil          5/4/2006
sam          4/7/2009
Mali         24/7/2009
bil          13/2/2008
etc... 
```

我想设置一个固定日期，例如：2003 年 1 月 1 日，然后从我的固定日期中减去所有日期，然后将它们除以周，找出哪些名称在哪些周注册，并将它们放在一组中。所以我想得到以下最终结果：

```
Sam=[week3,week12]
bil=[week25,week13] etc.. 
```

我已经编写了下面的 python 脚本，但它不工作。我有这个错误：

```
 val=set(start_date-'date(data.files.datetime)')
TypeError: unsupported operand type(s) for -: 'int' and 'str' 
```

任何人都知道为它编写代码的最佳方法是什么？

```
import pprint
import csv

with open('d:/Results/names_info.csv', 'r') as csvfile:
    start_date= 1/1/2003
    filereader=csv.reader(csvfile,'excel')
    for row in filereader:
         for name in row:
             key=name
             val=set(start_date-'date(data.files.datetime)')
             datedict[key]=val

pprint.pprint (datedict) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:06:20.123

您的代码中有几个错误：

1.  不要忽略包含“名称”和“日期”的 csv 文件的第一行。
2.  使用字符串而不是`date`类型来存储日期。
3.  试图从另一个字符串中减去一个字符串。
4.  `datedict`在没有首先检查它们是否存在的情况下修改项目。
5.  2003 年 1 月 1 日的斜线将被视为分号，结果将为 0。

修复了这些错误后，您的代码如下所示：

```
import csv
from collections import defaultdict
import datetime
from datetime import date
import math

def weeks(filename, start_date):
    # The defaultdict class will create items when a key is accessed that does
    # not exist
    datedict = defaultdict(set)
    with open(filename, 'r') as csvfile:
        filereader = csv.reader(csvfile, 'excel')
        read_header = False
        for row in filereader:
            # Ignore the first row of the file
            if not read_header:
                read_header = True
                continue

            # Strip out any whitespace
            cells = [col.strip() for col in row]
            name = cells[0]
            date_str = cells[1]

            # Parse the date string into a date
            row_date = datetime.datetime.strptime(date_str, '%d/%m/%Y').date()

            # Calculate the difference between dates
            delta = start_date-row_date
            # Convert from days to weeks, you could use math.floor() here if
            # needed
            delta_weeks = int(math.ceil(delta.days / 7.0))

            datedict[name].add(delta_weeks)

    return datedict

date_dict = weeks('a.csv', start_date=date(year=2013, month=1, day=1))
for name, dates in date_dict.iteritems():
    print name, list(dates) 
```

这打印出来：

```
bil [351, 254]
sam [519, 182]
Mali [179] 
```

您应该能够弄清楚如何让它打印“周”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:06:53.033

您肯定想使用`datetime`标准库中的模块。计算周差的一种快速而肮脏的方法可能如下：

```
import datetime

start_date = datetime.date(2003,1,1)  # (YYYY,MM,DD)
another_date = datetime.date(2003,10,20)

difference = start_date - another_date  # another datetime object
weeks_between = difference.days / 7 + 1 # integer division, first week = 1 
```

如果你想要一个`dict`of `list`s 替换`datedict[key]=val`为

```
try :
    datedict[key] += [val]  # add the element val to your existing list
except KeyError :           # catch error if key not in dict yet
    datedict[key] = [val]   # add key to dict with val as one element list 
```

此外，如果您希望列表包含格式为 week1、week12 等的字符串，则只需使用

```
val = 'week%d' % val 
```

# multithreading - gtk 进度条在 matplot 事件后不再工作？

> ID：16101783
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:34.033
> 
> 标签：multithreading, matplotlib, gtk, pygtk

嗨，我是 python 和 gtk 编程的新手。
我正在编写一个程序来进行一些测量。为了绘制测量结果，我使用 matplotlib。
该程序将具有打开和关闭加热器并进行测量的功能。
我想为加热器和测量使用单独的线程。
目前，该程序尚未实现与硬件的通信。

问题是当我单击“测量按钮”时，“进度条”不再起作用。我收到一条消息：

gtk.ProgressBar 对象在 0x29b8460（在 0x0 处未初始化）

当我只使用加热器按钮时，进度条继续工作

我究竟做错了什么 ？

这是代码

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk
import time
import gobject
import threading
import matplotlib
import numpy as np
from matplotlib.backends.backend_gtkagg import FigureCanvasGTKAgg as FigureCanvas

class measure:
    # callback to quit
    def delete_event(self, widget, event, data = None):
        gtk.main_quit()
        return False

    def heater_helper(self, widget, heater, progressbar):
        print "starting heater thread"
        threading.Thread(target=self.heater_cb, args=(widget, heater, progressbar)).start()

    def heater_cb(self, widget, heater, progressbar):
        heaterstring = "6.3"
        heater = eval(heaterstring)
        stap = 1
        j = 0.1
        heatervalue = widget.get_active()
        print heatervalue
        progressbar.set_fraction(0.1)
        while (stap <= 10 ):
            if widget.get_active():
                print widget.get_active()
                fraction = j * stap
                print fraction
                progressbar.set_fraction(fraction)
                stap = stap + 1
                time.sleep(1)
            else:
                stap = 11
                progressbar.set_fraction(0.0)
                break

    def do_measurement_helper(self, widget, fig):
        print " Start measurement thread"
        threading.Thread(target=self.do_measurement, args=(widget, fig)).start()

    def do_measurement(self, widget, fig):
        fig.clear()
        ax = fig.add_subplot(111)
        x = np.arange(0, 5*np.pi, 0.01)
        y = np.sin(x**2)*np.exp(-x)
        ax.plot(x, y)
        fig.canvas.draw()

    def __init__(self):
        # Create new Window
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect("delete_event", self.delete_event)
        self.window.show()

        mainbox = gtk.HBox(False, 0)
        self.window.add(mainbox)
        mainbox.show()

        leftvbox = gtk.VBox(False, spacing = 10)
        mainbox.pack_start(leftvbox, expand = False, fill = False, padding = 0)
        leftvbox.show()

        rightvbox = gtk.VBox(False, spacing = 10)
        mainbox.pack_start(rightvbox, expand = False, fill = False, padding =0)
        rightvbox.show()

        heaterprogressbar = gtk.ProgressBar()
        leftvbox.pack_start(heaterprogressbar, expand = False, fill = False, padding = 0)
        heaterprogressbar.show()
        heaterbutton = gtk.ToggleButton("Heater")
        leftvbox.pack_start(heaterbutton, expand = True, fill = False, padding = 0)
        heaterbutton.show()
        heaterbutton.connect("toggled", self.heater_helper, heaterbutton, heaterprogressbar)

        fig = matplotlib.figure.Figure(figsize=(5,4), dpi=64)
        canvas = FigureCanvas(fig)
        rightvbox.pack_start(canvas, expand = True, fill = True, padding = 0 )
        canvas.show()
        measurebutton = gtk.Button("Measure")
        rightvbox.pack_start(measurebutton, expand = False, fill = False, padding = 0)
        measurebutton.show()
        measurebutton.connect("clicked", self.do_measurement_helper, fig)

def main():
    gtk.main()
    return(0)

if __name__ == "__main__":
    gtk.gdk.threads_init()
    measure()
    main()
    gtk.gdk.threads_leave() 
```

亲切的问候，

乔里斯·韦特斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:45:05.357

可能不支持组合线程、Matplotlib 和 GTK 主循环，并且很难准确调试正在发生的事情。我的建议是不要从线程执行任何 GUI 调用，而是使用`gobject.idle_add()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:26:25.607

线程、Matplotlib 和 GTK 主循环可以结合使用，如果你记住以下几点：

1.  我使用gtk.gdk 变体`gobject.threads_init()`代替`gtk.gdk.threads_init()`Matplotlib 对我不起作用。我想你也可以省略`gtk.gdk.threads_leave()`.
2.  `gobject.idle_add()`正如 ptomato 所提到的，您应该让 gtk 主线程通过调用和`gobject.timeout_add()`函数来处理与 gtk 小部件有关的任何事情。我通常会创建一个辅助函数来定期从浮点变量更新状态栏：

    ```
    def do_measurement(self):
        self.data = []
        self.progress = 0
        self.abort = threading.Event()
        gobject.timeout_add(100, self.update_progressbar)
        for point in some_generator_yielding_100_values():
            if self.abort.is_set():
                break
            self.data.append(point)
            self.progress += 0.01
        self.progress = None

    def update_progressbar(self):
        if self.progress is None:
            self.progressbar.set_fraction(0) # reset bar
            return False           # do not run again
        self.progressbar.set_fraction(self.progress)
        return True                # run again after 100ms

    def start_measurement(self):
        threading.Thread(target=self.do_measurement).start()

    def stop_measurement(self):
        self.abort.set() 
    ```

    但是您当然也可以只调用异步`gobject.idle_add(self.progressbar.set_fraction, x)`设置新值。`x`

# matlab - Matlab：通过使用巧妙的矩阵索引和查找来避免 for 循环？如何？

> ID：16101787
> 
> 赞同：0
> 
> 时间：2013-04-19T09:46:41.763
> 
> 标签：matlab, vectorization

我最近越来越多地进入 Matlab 并且在我最近的项目中出现了另一个问题。我在一个整体边界内生成了几个矩形（或网格）。这些网格可以具有不同的间距/间隔。

我这样做是因为我想降低数字高程模型某些区域的网格/像素分辨率。到目前为止，一切正常。但是因为可以在 GUI 中选择矩形，所以矩形可能会重叠。这种重叠是我想要找到并删除的。它们是否具有相同的间距，例如矩形 1&2 看起来像这样：

```
[t1x, t1y] = meshgrid(1:1:9,1:1:9);
[t2x, t2y] = meshgrid(7:1:15,7:1:15);
[t3x, t3y] = meshgrid(5:1:17,7:1:24); 
```

在这种情况下，我可以只使用 unique 来查找重叠区域。但是，它们看起来更像这样：

```
[t1x, t1y] = meshgrid(1:2:9,1:2:9);
[t2x, t2y] = meshgrid(7:3:15,7:3:15);
[t3x, t3y] = meshgrid(5:4:17,7:4:24); 
```

因此，无法应用唯一性，因为网格 1 很可能与网格 2 重叠而没有相同的节点。为了方便和进一步处理，所有矩形/网格都被带入列符号，并在我的代码中放入一个结果矩阵：

```
result = [[t1x(:), t1y(:)]; [t2x(:), t2y(:)]; [t3x(:), t3y(:)]]; 
```

现在我正在考虑使用 2 个嵌套的 for 循环来解决这个问题，就像这样（这还不太好用）：

```
res = zeros(length(result),1);
for i=1:length(result)
    currX = result(i,1);
    currY = result(i,2);
    for j=1:length(result)
        if result(j,1)< currX < result(j+1,1) && result(j,2)< currY < result(j+1,2)
              res(j) = 1;
        end
    end
end 
```

但是：首先，这还不完全奏效，因为由于 length(result)=j+1 而我得到了一个越​​界错误，而且 res(j) = 1 似乎被循环覆盖了。但这只是为了测试和演示。因为这里显示的网格只是示例，而我使用的网格相当大，结果矩阵最多包含 2000x2000 = 4 个 mio 节点 --> 长度（结果）~4mio。把它放到一个贯穿整个长度的嵌套 for 循环中很可能会扼杀我的记忆。

因此，我希望找到一个不需要嵌套循环但利用 Matlabs 查找和巧妙的矩阵索引的复杂解决方案。我想不出什么，但希望能在这里得到帮助。

非常感谢讨论和帮助！

干杯，

西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:55:10.370

下面是一个快速测试（未经广泛测试）：

```
% Example meshes
[t1x, t1y] = meshgrid(1:2:9,1:2:9);
[t2x, t2y] = meshgrid(7:3:15,7:3:15);

% Group points for convenience
A = [t1x(:), t1y(:)];
B = [t2x(:), t2y(:)];

% Compare which points of A within edges of B (and viceversa)
idxA = A(:,1) >= B(1,1) & A(:,1) <= B(end,1) & A(:,2) >= B(1,2) & A(:,2) <= B(end,2);
idxB = B(:,1) >= A(1,1) & B(:,1) <= A(end,1) & B(:,2) >= A(1,2) & B(:,2) <= A(end,2);

% Plot result of identified points
plot(A(:,1),A(:,2), '*r')
hold on
plot(B(:,1),B(:,2), '*b')
plot([A(idxA,1); B(idxB,1)], [A(idxA,2); B(idxB,2)], 'sk') 
```

我将被确定为重叠的点平方：

![重叠网格](https://i.stack.imgur.com/fW4So.png)

此外，与您的问题相关的是这个[Puzzler：](http://blogs.mathworks.com/videos/2008/07/14/puzzler-overlapping-rectangles/) TMW 的 Doug Hull 的重叠矩形。

# neo4j - 在 neo4j 中提取子图

> ID：16101789
> 
> 赞同：5
> 
> 时间：2013-04-19T09:46:58.127
> 
> 标签：neo4j, subgraph

我有一个存储在 Neo4j 中的大型网络。基于特定的根节点，我想在该节点周围提取一个子图并将其存储在其他地方。所以，我需要的是符合我的过滤条件的节点和边集。

Afaik 没有可用的开箱即用解决方案。有一个[可用的图形匹配组件](http://components.neo4j.org/neo4j-graph-matching/snapshot)，但它仅适用于完美匹配。Neo4j API 本身只定义了[图遍历](http://docs.neo4j.org/chunked/stable/tutorial-traversal-java-api.html)，我可以使用它来定义应该访问哪些节点/边：

```
Traverser exp = Traversal
    .description()
    .breadthFirst()
    .evaluator(Evaluators.toDepth(2))
    .traverse(root); 
```

现在，我可以将所有节点/边添加到所有路径的集合中，但这非常低效。你会怎么做？谢谢！

**编辑**将每个遍历的最后一个节点和最后一个关系添加到子图中是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:07:21.230

至于图形匹配，它已被[http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)取代，它非常适合，并支持具有可选关系的模糊匹配。

对于子图表示，我会使用 Cypher 输出来构造新的 Cypher 语句来重新创建图，就像 SQL 导出一样，类似于

```
start n=node:node_auto_index(name='Neo') 
match n-[r:KNOWS*]-m 
return "create ({name:'"+m.name+"'});" 
```

[http://console.neo4j.org/r/pqf1rp](http://console.neo4j.org/r/pqf1rp)为例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:04:26.737

我通过构建基于所有遍历端点的诱导子图来解决它。

从每个遍历的最后一个节点和边的集合构建子图不起作用，因为不包括不属于任何最短路径的边。

代码片段如下所示：

```
Set<Node> nodes = new HashSet<Node>();
Set<Relationship> edges = new HashSet<Relationship>();

for (Node n : traverser.nodes())
{
    nodes.add(n);
}

for (Node node : nodes)
{
    for (Relationship rel : node.getRelationships())
    {
        if (nodes.contains(rel.getOtherNode(node)))
            edges.add(rel);
    }
} 
```

每条边被添加两次。传出节点一次，传入节点一次。使用 Set，我可以确保它只在集合中出现一次。

可以只迭代传入/传出边，但不清楚如何处理循环（从节点到自身的边）。它们属于哪个类别？这个片段没有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T20:04:47.177

请参阅[将数据库转储到密码语句](http://docs.neo4j.org/chunked/stable/shell-commands.html#_dumping_the_database_or_a_cypher_result_to_cypher_statements)

```
dump START n=node({self}) MATCH p=(n)-[r:KNOWS*]->(m) RETURN n,r,m; 
```

还有一个将第一个数据库 (db1) 的子图导入到第二个 (db2) 的示例。

# magento - 在类别视图中禁用某些产品的链接功能？（马金托）

> ID：16101791
> 
> 赞同：0
> 
> 时间：2013-04-19T09:47:04.297
> 
> 标签：magento, hyperlink, product, clickable, catalog

在类别视图中禁用某些产品的链接功能？

我只希望某些产品在类别中可见，不可点击！

请参阅示例： http: [//i.imgur.com/m3ZHp1G.jpg](http://i.imgur.com/m3ZHp1G.jpg)我希望只有库存产品可以点击。

怎么做？一步一步会很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:49:22.137

导航

`app/design/frontend/<package_name>/<theme_name>/template/catalog/product/list.phtml`

否则将此文件从基本/默认主题复制到您的主题

转到此行 `<h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>`

在它之前添加您的条件

# django - 在 sqlite 中创建表后，没有加载 django 的 localhost

> ID：16101792
> 
> 赞同：0
> 
> 时间：2013-04-19T09:47:11.097
> 
> 标签：django, python-2.7

我是 python 和 Django 的新手。我已经安装了 Django 1.5.1 和 python 2.7。我的操作系统是 windows 7。我正在 eclipse 中进行编码。我输入`python manage.py runserver`了 windows powershell 并启动了服务器。然后我更改了服务器端口号通过命令到 8080。这两个`python manage.py runserver 8080`条件最初都有效。我正在尝试使用 sqlite 数据库。我输入`python manage.py syncdb`了创建表。它要求一个超级用户，不知何故我没有输入任何密码并且操作失败了。我在[django](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)中看到用于`.schema`查看创建的表的[文档。我的问题是：](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)

1.  我无法查看创建的表。我认为我在使用 .schema 命令时出错了
2.  当我重新加载`http://127.0.0.1:8080/`页面时，即使重新启动 wamp 服务器也没有连接。我的 settings.py 是这样的

    ```
    ADMINS = (
    # ('Your Name', 'your_email@example.com'),
    )
    MANAGERS = ADMINS
    DATABASES = {
    'default': {
    'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'C:\\Eclipse\\workspace\\mysite\\src\\sqlite.db',                      # Or path to database file if using sqlite3.
    # The following settings are not used with sqlite3:
    'USER': '',
    'PASSWORD': '',
    'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
    'PORT': '',                      # Set to empty string for default.
      }
    }

    # Hosts/domain names that are valid for this site; required if DEBUG is False
    # See https://docs.djangoproject.com/en/1.5/ref/settings/#allowed-hosts
    ALLOWED_HOSTS = []

    # Local time zone for this installation. Choices can be found here:
    # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
    # although not all choices may be available on all operating systems.
    # In a Windows environment this must be set to your system time zone.
     TIME_ZONE = 'Asia/Kolkata'

     INSTALLED_APPS = (
      'django.contrib.auth',
      'django.contrib.contenttypes',
      'django.contrib.sessions',
      'django.contrib.sites',
      'django.contrib.messages',
      'django.contrib.staticfiles',
      # Uncomment the next line to enable the admin:
      # 'django.contrib.admin',
      # Uncomment the next line to enable admin documentation:
      # 'django.contrib.admindocs',
       ) 
    ```

请帮助我。谢谢你的回答
![powershell 的图片](https://i.stack.imgur.com/LnSYr.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:53:32.077

看起来 Django 无法设置数据库。

尝试替换：

```
'NAME': 'C:\\Eclipse\\workspace\\mysite\\src\\sqlite.db', 
```

经过：

```
'NAME': 'sqlite.db', 
```

在你的 settings.py.

可能是路径问题。

您还应该检查目录权限以确保 Django 可以将数据库写入其中。关于这一点，我没有使用 Windows 的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:00:33.787

如果您使用 WAMP 服务器，为什么不使用 sqlite 的 mysql instate 呢？

# c# - 为什么检查字典是否包含键更快，而不是捕获异常以防万一？

> ID：16101795
> 
> 赞同：236
> 
> 时间：2013-04-19T09:47:16.507
> 
> 标签：c#, performance, dictionary

想象一下代码：

```
public class obj
{
    // elided
}

public static Dictionary<string, obj> dict = new Dictionary<string, obj>(); 
```

**方法一**

```
public static obj FromDict1(string name)
{
    if (dict.ContainsKey(name))
    {
        return dict[name];
    }
    return null;
} 
```

**方法二**

```
public static obj FromDict2(string name)
{
    try
    {
        return dict[name];
    }
    catch (KeyNotFoundException)
    {
        return null;
    }
} 
```

我很好奇这两个函数的性能是否存在差异，因为第一个函数应该比第二个函数慢 - 考虑到它需要检查字典是否包含一个值，而第二个函数确实只需要访问字典一次但哇，它实际上是相反的：

循环 1 000 000 个值（现有 100 000 个，不存在 900 000 个）：

> 第一个函数：306 毫秒
> 
> 第二个函数：20483毫秒

这是为什么？

编辑：正如您在此问题下方的评论中注意到的那样，如果有 0 个不存在的键，第二个功能的性能实际上比第一个功能略好。但是一旦有至少 1 个或多个不存在的密钥，第二个的性能就会迅速下降。

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2013-04-19T09:48:33.360

一方面，[抛出异常本质上是昂贵](http://msdn.microsoft.com/en-us/library/vstudio/ms229009.aspx)的，因为堆栈必须展开等。
另一方面，通过键访问字典中的值很便宜，因为它是一个快速的 O(1) 操作。

顺便说一句：正确的方法是使用[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)

```
obj item;
if(!dict.TryGetValue(name, out item))
    return null;
return item; 
```

这仅访问字典一次而不是两次。
如果你真的想`null`在 key 不存在的情况下返回，上面的代码可以进一步简化：

```
obj item;
dict.TryGetValue(name, out item);
return item; 
```

这有效，因为`TryGetValue`设置`item`为`null`如果不`name`存在密钥。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T22:20:37.047

字典是专门为进行超快速键查找而设计的。它们被实现为哈希表，相对于其他方法，条目越多，它们的速度就越快。仅当您的方法未能完成您设计的工作时才应该使用异常引擎，因为它是一个大型对象集，为您提供了很多处理错误的功能。我曾经构建了一个完整的库类，所有内容都被 try catch 块包围，并且震惊地看到调试输出包含一个单独的行，其中包含 600 多个异常中的每一个！

# javascript - javascript禁用/启用复选框

> ID：16101798
> 
> 赞同：1
> 
> 时间：2013-04-19T09:47:37.990
> 
> 标签：javascript, jquery

我有以下语法取消选中复选框。

```
$('#h12_1').attr('checked','checked'); 
```

`h12_1`是我的复选框的名称。

如何禁用复选框以使其无法被选中？同样，如何再次启用该复选框？

像这样的东西：

```
 $.post('get_as_12', {data:selectedObj.value},function(result) {
 alert(result[0]) ;

      if(result[0] > 0) {
          $('#h12_1').attr('checked','enabled');
          $('#h12_1').attr('checked','checked');
       } else {
          $('#h15_1').attr('disabled');
          $('#h15_1').removeAttr('checked');
      }
 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:49:08.327

对于禁用，您应该使用`disabled`属性或属性（后者是**首选**）：

```
$("#h12_1").attr("disabled", "disabled");  // removeAttr("disabled") to enable
// or
$("#h12_1").prop("disabled", true);        // false to enable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:51:49.533

要禁用复选框，请使用 disabled 属性。

```
$("#h12_1").attr("disabled", "disabled"); 
```

要再次启用它，请使用 removeAttr()。

```
$('#h15_1').removeAttr('disabled'); 
```

# jquery - 没有 Jquery Mobile 或任何其他 UI 框架就无法创建 phonegap 应用程序

> ID：16101801
> 
> 赞同：0
> 
> 时间：2013-04-19T09:47:45.957
> 
> 标签：jquery, html, css, cordova

我想在包括android、blackberry和iOS平台的移动应用程序中创建分类站点。我选择Phonegap 框架、html、jquery、css。

我有疑问“没有 Jquery Mobile 或任何其他 UI 框架就无法创建 phonegap 应用程序”

请给我建议。如果我包含 Jquery Mobile js 和 css 设计将折叠并启用以实现我的要求。没有 JQuery Mobile 效果很好。

我的疑问是是否有任何方法可以在没有 JQuery Mobile 或任何其他 UI 框架的情况下完成应用程序。

请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:36:03.053

只要是使用 HTML、CSS 和 JavaScript 构建的，PhoneGap 不关心任何框架。JQM 只是这三个之上的一个包装器。它可以帮助您防止您重新发明轮子。因此，您可以在 PhoneGap 上使用纯 HTML 应用程序。

# android - 在应用程序暂停时保留类状态和内容

> ID：16101803
> 
> 赞同：0
> 
> 时间：2013-04-19T09:48:00.513
> 
> 标签：android, lifecycle

当应用程序被推送到后台时保存非活动状态的正确方法是什么`Android`，例如有人打电话？

# django - 带有 django-rest-framework 的嵌套序列化器

> ID：16101808
> 
> 赞同：1
> 
> 时间：2013-04-19T09:48:16.337
> 
> 标签：django, json, nested, django-rest-framework

我正在尝试`Json`使用`django-rest-framework`. 但是找不到正确的方法...

有人可以带我去正确的方向吗？非常感谢！

--

这是我的模型：

```
class Pacmr(models.Model):
    package         = models.ForeignKey(Package)
    architecture    = models.ForeignKey(Architecture)
    component       = models.ForeignKey(Component)
    mirror          = models.ForeignKey(Mirror)
    release         = models.ForeignKey(Release)
    version         = DebVersionField() 
```

`Package`, `Architecture`, `Component`, `Mirror`,`Release`都等价于：

```
class Package(models.Model):
    name    = models.CharField(max_length=50)
    comment = models.CharField(max_length=200) 
```

`Pacmr`表格内容示例：

```
SELECT id, package_id, architecture_id, component_id, mirror_id, release_id, version from pacmr_pacmr where package_id = 20671;

   id   | package_id | architecture_id | component_id | mirror_id | release_id |   version
--------+------------+-----------------+--------------+-----------+------------+--------------
 965201 |      20671 |             236 |          146 |        73 |        111 | 3.0-2.1b-1
 965200 |      20671 |             236 |          146 |        73 |        109 | 3.0-2.1b-2.1
 965199 |      20671 |             236 |          146 |        73 |        113 | 3.0-2.1a-5
 691277 |      20671 |             236 |          146 |        73 |        105 | 3.0-2.1b-3
 691276 |      20671 |             236 |          146 |        73 |        107 | 3.0-2.1b-3
 691275 |      20671 |             236 |          146 |        73 |        104 | 3.0-2.1b-3
 691274 |      20671 |             236 |          146 |        75 |        113 | 3.0-2.1a-5
 691273 |      20671 |             236 |          146 |        72 |        111 | 3.0-2.1b-1
 691272 |      20671 |             236 |          146 |        72 |        110 | 3.0-2.1b-1
 691271 |      20671 |             236 |          146 |        72 |        109 | 3.0-2.1b-2.1
 691270 |      20671 |             236 |          146 |        72 |        108 | 3.0-2.1b-2.1
 691269 |      20671 |             236 |          146 |        72 |        113 | 3.0-2.1a-5
 691268 |      20671 |             236 |          146 |        72 |        115 | 3.0-2.1a-5
 691267 |      20671 |             236 |          146 |        72 |        107 | 3.0-2.1b-3
 691266 |      20671 |             236 |          146 |        72 |        106 | 3.0-2.1b-3
 691265 |      20671 |             236 |          146 |        72 |        104 | 3.0-2.1b-3
 691264 |      20671 |             236 |          146 |        72 |        103 | 3.0-2.1b-3
 691263 |      20671 |             236 |          144 |        71 |         97 | 3.0-2.1b-2.1
 691262 |      20671 |             236 |          144 |        71 |         67 | 3.0-2.1b-3
 691261 |      20671 |             236 |          144 |        71 |        114 | 3.0-2.1b-3
 691260 |      20671 |             236 |          144 |        71 |         68 | 3.0-2.1b-3
 691259 |      20671 |             236 |          144 |        71 |        101 | 3.0-2.1b-3
 691258 |      20671 |             236 |          144 |        71 |        100 | 3.0-2.1b-3
 691257 |      20671 |             236 |          144 |        70 |         97 | 3.0-2.1b-2.1
 691256 |      20671 |             236 |          144 |        70 |         98 | 3.0-2.1b-2.1
 691255 |      20671 |             236 |          144 |        70 |         67 | 3.0-2.1b-3
 691254 |      20671 |             236 |          144 |        70 |         99 | 3.0-2.1b-3
 691253 |      20671 |             236 |          144 |        70 |         68 | 3.0-2.1b-3
 691252 |      20671 |             236 |          144 |        70 |         96 | 3.0-2.1b-3 
```

使用连接它看起来像这样：

```
SELECT pacmr_pacmr.id as id, pacmr_package.name as package, pacmr_architecture.name as architecture, pacmr_component.name as component, pacmr_mirror.name as mirror, pacmr_release.name as release, version from pacmr_pacmr, pacmr_package, pacmr_architecture, pacmr_component, pacmr_mirror, pacmr_release where package_id=pacmr_package.id and architecture_id=pacmr_architecture.id and component_id=pacmr_component.id and mirror_id=pacmr_mirror.id and release_id=pacmr_release.id and package_id = 20671;

   id   | package | architecture | component |      mirror       |     release     |   version
--------+---------+--------------+-----------+-------------------+-----------------+--------------
 965201 | jvim    | source       | main      | debian            | etch            | 3.0-2.1b-1
 965200 | jvim    | source       | main      | debian            | lenny           | 3.0-2.1b-2.1
 965199 | jvim    | source       | main      | debian            | sarge           | 3.0-2.1a-5
 691277 | jvim    | source       | main      | debian            | sid             | 3.0-2.1b-3
 691276 | jvim    | source       | main      | debian            | squeeze         | 3.0-2.1b-3
 691275 | jvim    | source       | main      | debian            | wheezy          | 3.0-2.1b-3
 691274 | jvim    | source       | main      | debian-amd64      | sarge           | 3.0-2.1a-5
 691273 | jvim    | source       | main      | debian-production | etch            | 3.0-2.1b-1
 691272 | jvim    | source       | main      | debian-production | etch-testing    | 3.0-2.1b-1
 691271 | jvim    | source       | main      | debian-production | lenny           | 3.0-2.1b-2.1
 691270 | jvim    | source       | main      | debian-production | lenny-testing   | 3.0-2.1b-2.1
 691269 | jvim    | source       | main      | debian-production | sarge           | 3.0-2.1a-5
 691268 | jvim    | source       | main      | debian-production | sarge-testing   | 3.0-2.1a-5
 691267 | jvim    | source       | main      | debian-production | squeeze         | 3.0-2.1b-3
 691266 | jvim    | source       | main      | debian-production | squeeze-testing | 3.0-2.1b-3
 691265 | jvim    | source       | main      | debian-production | wheezy          | 3.0-2.1b-3
 691264 | jvim    | source       | main      | debian-production | wheezy-testing  | 3.0-2.1b-3
 691263 | jvim    | source       | universe  | ubuntu            | hardy           | 3.0-2.1b-2.1
 691262 | jvim    | source       | universe  | ubuntu            | lucid           | 3.0-2.1b-3
 691261 | jvim    | source       | universe  | ubuntu            | oneiric         | 3.0-2.1b-3
 691260 | jvim    | source       | universe  | ubuntu            | precise         | 3.0-2.1b-3
 691259 | jvim    | source       | universe  | ubuntu            | quantal         | 3.0-2.1b-3
 691258 | jvim    | source       | universe  | ubuntu            | raring          | 3.0-2.1b-3
 691257 | jvim    | source       | universe  | ubuntu-production | hardy           | 3.0-2.1b-2.1
 691256 | jvim    | source       | universe  | ubuntu-production | hardy-testing   | 3.0-2.1b-2.1
 691255 | jvim    | source       | universe  | ubuntu-production | lucid           | 3.0-2.1b-3
 691254 | jvim    | source       | universe  | ubuntu-production | lucid-testing   | 3.0-2.1b-3
 691253 | jvim    | source       | universe  | ubuntu-production | precise         | 3.0-2.1b-3
 691252 | jvim    | source       | universe  | ubuntu-production | precise-testing | 3.0-2.1b-3
(29 rows) 
```

这是我想要的一个例子`django-rest-framework`（手写）：

```
{
    "package_id": 20671,
    "package": "jvim",
    "mirrors": [
        {
            "name": "debian",
            "components": [
                {
                    "name": "main",
                    "releases": [
                        {
                            "name": "etch",
                            "version": "3.0-2.1b-1"
                        },
                        {
                            "name": "lenny",
                            "version": "3.0-2.1b-2.1"
                        },
                        {
                            "name": "sarge",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "sid",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "squeeze",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "wheezy",
                            "version": "3.0-2.1b-3"
                        }
                    ]
                }
            ]
        },
        {
            "name": "debian-amd64",
            "components": [
                {
                    "name": "main",
                    "releases": [
                        {
                            "name": "sarge",
                            "version": "3.0-2.1a-5"
                        }
                    ]
                }
            ]
        },
        {
            "name": "debian-production",
            "components": [
                {
                    "name": "main",
                    "releases": [
                        {
                            "name": "etch",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "etch-testing",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "lenny",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "lenny-testing",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "sarge",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "sarge-testing",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "squeeze",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "squeeze-testing",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "wheezy",
                            "version": "3.0-2.1a-5"
                        },
                        {
                            "name": "wheezy-testing",
                            "version": "3.0-2.1a-5"
                        }
                    ]
                }
            ]
        },
        {
            "name": "ubuntu",
            "components": [
                {
                    "name": "universe",
                    "releases": [
                        {
                            "name": "hardy",
                            "version": "3.0-2.1b-2.1"
                        },
                        {
                            "name": "lucid",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "oneiric",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "precise",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "quantal",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "raring",
                            "version": "3.0-2.1b-3"
                        }
                    ]
                }
            ]
        },
        {
            "name": "ubuntu-production",
            "components": [
                {
                    "name": "universe",
                    "releases": [
                        {
                            "name": "hardy",
                            "version": "3.0-2.1b-2.1"
                        },
                        {
                            "name": "hardy-testing",
                            "version": "3.0-2.1b-2.1"
                        },
                        {
                            "name": "lucid",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "lucid-testing",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "precise",
                            "version": "3.0-2.1b-3"
                        },
                        {
                            "name": "precise-testing",
                            "version": "3.0-2.1b-3"
                        }
                    ]
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:46:26.447

自己回答...

找到了基于[Django REST框架的解决方案：非模型序列化器](https://stackoverflow.com/questions/13603027/django-rest-framework-non-model-serializer?rq=1)

也许可以实施更好的解决方案？

```
class Pmcra(object):
    package    = None
    package_id = None

    def __init__(self, package, *args, **kw):
        self.package = package
        pass

    def do_work(self):

        my_dict = {}

        if self.package:
            pacmrs = Pacmr.objects.filter(package__name=self.package)
            mirrors = pacmrs.all().distinct('mirror')
            mirrors_array = []
            for mirror in mirrors:
                self.package_id = mirror.package.id
                components = mirrors.filter(mirror=mirror.mirror).distinct('component')
                components_array = []
                for component in components:
                    releases = components.filter(component=component.component).distinct('release')
                    releases_array = []
                    for release in releases:
                        releases_array.append( {'name': release.release.__str__(), 'version': release.version.__str__() })
                    components_array.append( {'name': component.component.__str__(), 'releases': releases_array} )
                mirrors_array.append( {'name': mirror.mirror.__str__(), 'components': components_array} )

            return { 'package': self.package, 'package_id': self.package_id, 'mirrors': mirrors_array }

class MyView(APIView):

    def get(self, request, *args, **kw):
        # Process any get params that you may need
        # If you don't need to process get params,
        # you can skip this part
        get_arg1 = request.GET.get('pkg', None)

        # Any URL parameters get passed in **kw
        myClass = Pmcra(get_arg1, *args, **kw)
        result = myClass.do_work()
        response = Response(result, status=status.HTTP_200_OK)
        return response 
```

# iphone - Dismiss generated UITextfields

> ID：16101810
> 
> 赞同：0
> 
> 时间：2013-04-19T09:48:17.797
> 
> 标签：iphone, objective-c, ios5, ios6

I am generating `UITextfield`s dynamically on a scrollview as the user enters number in the `UITextfield` (lets say it "A") and hits a button. But what i need to do is when user reenters number in `UITextfield`s the previously displayed `UITextfield`s must be gone and new `UITextfield`s` must be generated.

```
for (UIView *field in self.scrollView.subviews)
{
     if([field isKindOfClass:[UITextField class]])
     [field removeFromSuperview];
} 
```

eg- if first i generated 7 `UITextfield`s and afterwards i edit the "A" again and put 3 as value only 3 `UITextfield`s must be visible. but in my code the 3 `UITextfield`s are overwritten on 7 but previous also displayed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:02:25.423

But y did u regenrate new textfield if u can replace text in it and if u want animation then u can hide and unhide same textfield..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:09:44.727

Set the following code in your reloadTxtinput method. Call this method when user taps the button.

```
-(void)reloadTxtinput {

   for(UIView *subview in [scrollview subviews]) {
      if([subview isKindOfClass:[UIButton class]]) {
        [subview removeFromSuperview];
      } else {
             //Do nothing
      }
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:15:02.947

I have tried this code and this worked for me

```
for (y=1;y<=Pointsvalue;y++)
{
    UITextField *txtField =(UITextField *)[self.view viewWithTag:y+Pointsvalue];
    if (txtField.tag == y+Pointsvalue)
    {
        [txtField removeFromSuperview];
        [Feilds2Array removeAllObjects];
    }
} 
```

# c# - Task.WaitAll 方法与 Parallel.Invoke 方法

> ID：16101811
> 
> 赞同：32
> 
> 时间：2013-04-19T09:48:20.507
> 
> 标签：c#, parallel-processing, task

我有示例代码来比较并行方法和任务方法的处理时间。这个实验的目的是了解它们是如何工作的。

所以我的问题是：

1.  为什么 Parallel 的工作速度比 Task 快？
2.  我的结果是否意味着我应该使用 Parallel 而不是 Task？
3.  我应该在哪里使用 Task 以及在哪里使用 Parallel？
4.  与 Parallel 相比，使用 Task 有什么好处？
5.  Task 是否只是 ThreadPool.QueueUserWorkItem 方法的包装？

    ```
     public Task SomeLongOperation()
        {
            return Task.Delay(3000);
        }

        static void Main(string[] args)
        {
            Program p = new Program();
            List<Task> tasks = new List<Task>();

            tasks.Add(Task.Factory.StartNew(() => p.SomeLongOperation()));
            tasks.Add(Task.Factory.StartNew(() => p.SomeLongOperation()));

            var arr = tasks.ToArray();

            Stopwatch sw = Stopwatch.StartNew();
            Task.WaitAll(arr);
            Console.WriteLine("Task wait all results: " + sw.Elapsed);
            sw.Stop();

            sw = Stopwatch.StartNew();
            Parallel.Invoke(() => p.SomeLongOperation(), () => p.SomeLongOperation());
            Console.WriteLine("Parallel invoke results: " + sw.Elapsed);
            sw.Stop();

            Console.ReadKey();
        } 
    ```

这是我的处理结果： ![结果](https://i.stack.imgur.com/ZpECE.jpg)

**编辑：**

将代码更改为如下所示：

```
 Program p = new Program();
    Task[] tasks = new Task[2];

    Stopwatch sw = Stopwatch.StartNew();
    tasks[0] = Task.Factory.StartNew(() => p.SomeLongOperation());
    tasks[1] = Task.Factory.StartNew(() => p.SomeLongOperation());

    Task.WaitAll(tasks);
    Console.WriteLine("Task wait all results: " + sw.Elapsed);
    sw.Stop();

    sw = Stopwatch.StartNew();
    Parallel.Invoke(() => p.SomeLongOperation(), () => p.SomeLongOperation());
    Console.WriteLine("Parallel invoke results: " + sw.Elapsed);
    sw.Stop(); 
```

我的新结果：

![新结果](https://i.stack.imgur.com/kyC4V.jpg)

**编辑 2：** 当我将代码替换为 Parallel.Invoke 为第一个，Task.WaitAll 为第二个时，情况发生了根本性的变化。现在 Parallel 速度较慢。这让我想到我的估计不正确。我将代码更改为如下所示：

```
Program p = new Program();
Task[] tasks = new Task[2];

Stopwatch sw = null;
for (int i = 0; i < 10; i++)
{
    sw = Stopwatch.StartNew();
    Parallel.Invoke(() => p.SomeLongOperation(), () => p.SomeLongOperation());
    string res = sw.Elapsed.ToString();
    Console.WriteLine("Parallel invoke results: " + res);
    sw.Stop();
}

for (int i = 0; i < 10; i++)
{
    sw = Stopwatch.StartNew();
    tasks[0] = Task.Factory.StartNew(() => p.SomeLongOperation());
    tasks[1] = Task.Factory.StartNew(() => p.SomeLongOperation());
    Task.WaitAll(tasks);
    string res2 = sw.Elapsed.ToString();
    Console.WriteLine("Task wait all results: " + res2);
    sw.Stop();
} 
```

这是我的新结果：

![在此处输入图像描述](https://i.stack.imgur.com/ob9tN.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/ewxeR.jpg)

现在我可以建议这个实验更加清晰。结果几乎相同。有时并行，有时任务更快。现在我的问题是：

**1.我应该在哪里使用Task，在哪里使用Parallel？**

**2\. 与 Parallel 相比，使用 Task 有什么好处？**

**3\. Task 是否只是 ThreadPool.QueueUserWorkItem 方法的包装？**

欢迎任何可以澄清这些问题的有用信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T10:38:45.227

从[MSDN的](http://msdn.microsoft.com/en-us/library/ff963549.aspx)[这篇文章](http://msdn.microsoft.com/en-us/library/ff963549.aspx)开始编辑：

Parallel 和 Task 都是 ThreadPool 的包装器。并行调用也会等待，直到所有任务都完成。

与您的问题相关：

使用 Task、Parallel 或 ThreadPool 取决于您对执行并行任务所需的控制粒度。我个人习惯了`Task.Factory.StartNew()`，但这是个人意见。同样涉及`ThreadPool.QueueUserWorkItem()`

附加信息：由于内部初始化，第一次调用 Parallel.Invoke() 和 Task.Factory.StartNew() 可能会更慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-03T18:22:29.867

如果您启动非泛型任务（即“没有返回值的无效任务”）并立即`Wait`为它们启动，请`Parallel.Invoke`改用。你的意图对读者来说是很清楚的。

在以下情况下使用任务：

*   你不要立即等待
*   你需要返回值
*   您需要为调用的方法提供参数
*   你需要`TaskCreationOptions`功能
*   您需要`CancellationToken`或`TaskScheduler`功能但不想使用`ParallelOptions`
*   基本上，如果您想要更多选项或控制

是的，您可以绕过其中的一些，例如，`Parallel.Invoke(() => p.OpWithToken(CancellationToken)`但这会混淆您的意图。`Parallel.Invoke`用于使用尽可能多的 CPU 能力完成大量工作。它完成了，它不会死锁，而且你提前知道这一点。

* * *

你的测试是可怕的。危险信号是您的长时间操作是等待 3000 毫秒，但您的测试需要不到十分之一毫秒。

```
Task.Factory.StartNew(() => p.SomeLongOperation()); 
```

StartNew 接受一个`Action`, 并在一个新的**main** `Task`中执行它。该操作`() => SomeLongOperation()`创建一个**子任务** `Task`。此子任务*创建*（未完成）后，调用`SomeLongOperation()`返回，**操作**完成。所以**主** `Task`任务在十毫秒后已经完成，而您没有参考的两个子任务*仍在后台运行。*并行路径还创建了两个子任务，它根本不跟踪，然后返回。

正确的方法是`tasks[0] = p.SomeLongOperation();`，它将正在运行的任务分配给数组。然后`WaitAll`检查此任务的完成情况。

# python - Python线程和传递值

> ID：16101813
> 
> 赞同：0
> 
> 时间：2013-04-19T09:48:28.603
> 
> 标签：python

我试图更新不时使用新值连续运行的线程。

```
class Test:
    def __init__(self, num):
        #testing reasons
        self.num = num

    def printloop(self, num):
        self.num = num
        #running is set to True sometime in the beginning   
        while running:
            print(self.num)
            time.sleep(3)
        if not running:
            print("finished")
    def setnum(self, num):
        self.num = num 
```

我创建这样的线程：

```
t1 = threading.Thread(target=test.printloop,args=("1")) 
```

这可以工作并打印正确的参数。

但是，如果需要，如何使用新值更新单个线程？并非所有线程都可能需要更新。我的班级中的 setnum 方法显然不起作用，因为它会更新所有线程的值。

我是否需要限制线程生命周期并加入并等待它们完成。然后用新的价值观重新创造它们？或者我应该为每个线程定义一个变量 - 我如何动态地做到这一点？或者有没有更好的方法我没有看到？谢谢！

编辑：

我想我最终会得到类似的东西：

```
test1 = Test(1)
..
test5 = Test(5)

t1 = threading.Thread(target=test1.printloop,args=("1"))
t5 = threading.Thread(target=test5.printloop,args=("5")) 
```

然后在每个上使用一种方法来设置值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:27:42.863

对于单个整数值，您可以创建`Test`线程的子类（并`run`调用`printloop`）。然后其他线程可以`setnum`安全地调用。由于 GIL 和您设置单个值的事实，这是安全的，如果您正在执行更复杂的更新，您将不得不将`setnum`内部循环包裹并`printloop`锁定以防止竞争条件。

编辑：一个简单的例子

```
from threading import Thread
from time import sleep

class Output(Thread):

    def __init__(self, num):
        super(Output, self).__init__()
        self.num = num
        self.running = False

    def run(self):
        self.running = True
        while self.running:
            print self.num
            sleep(1)

    def stop(self):
        self.running = False

    def set_num(self, num):
        self.num = num

output = Output(0)
output.start()
sleep(3)
output.set_num(1)
sleep(3)
output.stop()
output.join() 
```

# javascript - Javascript HTTP GET 和 POST

> ID：16101816
> 
> 赞同：2
> 
> 时间：2013-04-19T09:48:42.350
> 
> 标签：javascript, http

发起 HTTP GET 或 POST 请求时：

*   普通浏览器不允许Javacript调用跨域
*   所以这意味着来自给定域的每个 HTTP 请求，请求标头中的“主机”代表原始主机，比如 foo.com，并且它不能被客户端请求修改？
*   此外，当请求来自子域时，例如 bar.foo.com，则请求标头中的“主机”将为“bar.foo.com”
*   这在进行跨域 HTTP 请求时是正确的，即“主机”将是 foo.com 或者来自子域 bar.foo.com，并且接收端（另一个域）将“主机”视为这些主机分别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:34:09.073

如果问题是“这是真的”，那么答案是否定的。

*   浏览器*确实*允许 JavaScript 创建跨域的 GET 和 POST 请求。他们不允许 javascript 从跨域请求中读取响应。

*   HTTP 标头中的“主机”表示请求被发送到的主机，而不是导致主机的网站。HOST 是必要的，因为服务器通常是共享的，并且一台服务器可能托管许多单独的网站，因此他们需要知道正在请求哪一个。

*   创建网站的网站通常（尽管不总是）在“REFERER”HTTP 标头中标识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:57:16.117

一切都通过 HTTP 浏览器沙箱（不仅仅是 AJAX 调用！IFRAME 具有基于相同条件的限制，针对不同的事物 - 即，您无法控制另一个域/主机/端口/proto 上的 IFRAME 的内容，只需加载页面并查看加载内容的 URI。JS 中的内容是禁止的）是在客户端而不是服务器端完成的：您的浏览器将主动拒绝查询任何没有的内容：

*   相同的主机名（子域算作不同的主机名）
*   同一个端口
*   相同的访问方式（HTTP 或 HTTPS）

对于 AJAX，这会导致一个大红色的“由于安全性而无法获取”-esque 错误。对于某些浏览器，请求确实会发生：有一种方法可以绕过此限制，使用访问控制标头。这些有效地告诉您的浏览器“我对*x*很友好”，其中 x 是域的通配符列表（其中***表示所有内容）。

为了解决这个问题，浏览器将执行请求，如果 CORS 未开启，则会主动触发异常 ( `XMLHttpRequest: x is not allowed by y`)。然而，请求*已经发生*。

显而易见的解决方案是添加一个 Access-Control-Allow-Origin 标头，以表示对该站点的跨域查询是可以的。但是，请记住两点：

*   大多数浏览器都有它，但有些没有（IE8 <.<）
*   如果 URL 是在脚本中硬编码的，CORS 本身就有一些小错误（请阅读它！）

因此，您需要 IE 的 JSONP 后备。但是，请记住，**所有这些都是在客户端完成的**，并且不能保证没有任何浏览器会主动无视 CORS 或 webkit 安全模型。整个模型还依赖于客户端`Host`分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:55:28.510

支持 CORS 的服务器将检查`Origin`请求中的标头。该值将如您所描述的那样，即请求源自的服务器。在它的回复中，服务器将发送一个名为`Access-Control-Allow-Origin`. 如果匹配`Origin`，浏览器将接受响应。它显然还需要浏览器支持 CORS。

维基百科对它的工作原理有相当好的[解释](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T09:58:20.833

*   `Host`HTTP 请求标头始终是请求*要去*的域。

*   如果您使用该`XMLHTTPRequest`方法发起 HTTP GET 或 POST 请求，那么如果*发送*请求的 JavaScript 代码与您发送请求的 URL 不在同一个域中，它将不允许您发送请求 -除非浏览器支持跨域资源共享。

*   如果浏览器*确实*支持[跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，那么它会将您的请求发送到其他域，但带有一个额外的`Origin`标头，指示为发出请求的 JavaScript 提供服务的站点。如果服务器允许请求，它会响应一个`Access-Control-Allow-Origin`标头，列出它将接受来自请求的域。

# svn - Visual Studio 2012 和丢失的文件

> ID：16101818
> 
> 赞同：1
> 
> 时间：2013-04-19T09:49:00.937
> 
> 标签：svn, asp.net-mvc-4, visual-studio-2012

Visual Studio 2012 专业版有一个奇怪的问题。

我们三个工作人员正在使用它，我们正在开发同一个项目，MVC4/EF5/.Net4.5/C# 和 Oracle。

我们使用 SVN 进行版本控制。

发生的情况是，当我的同事将新文件提交到项目时，当我更新我的工作副本时，该文件通过，但它没有在 Visual Studio 中显示为项目的一部分，只有在您选择 Show All 时才会显示文件，然后手动将其添加到项目中。

现在我知道你可能在想什么，我们没有提交 CSPROJ 文件或类似的东西，但我已经仔细检查过，我们肯定是；我们唯一忽略的是 .user/.resharper 和 .suo 文件。

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:54:41.520

我们对 git 使用完全相同的设置。

听起来他在提交之前没有保存他的 .csproj。Visual Studio 在将新文件保存到磁盘的同时保存 .csproj 非常糟糕，因此有时您点击全部保存以强制保存 .csproj 文件。我已经养成了每次与 git 交互时都这样做的习惯。

当看到这种行为时，您应该通过并排比较他的 .csproj 文件和您的文件来进行验证。它们是底层的简单 .xml 文件。用记事本打开它，查看各个`<Compile Include="fileName.cs" />`节点。当他添加了一个文件而您没有它时，您应该看到`<Compile />`在他拥有它时您缺少适当的文件。

诸如超越比较之类的并排比较工具可以使这变得非常容易。

# javascript - Kinetic JS 拖动一个图层会导致另一图层上的形状停止响应拖动

> ID：16101819
> 
> 赞同：1
> 
> 时间：2013-04-19T09:49:02.037
> 
> 标签：javascript, canvas, draggable, kineticjs

我一直在使用 Kinetic 开发一个应用程序，它使用多个层来保持事物的组织性，并且我在多个层中有可拖动的元素。我发现当一个图层被拖动时，另一图层上的形状不再可拖动。

在提供的缩减示例中，一旦下层被拖动，上层中的蓝色矩形就不再可拖动，我不明白这是为什么。

我试过浏览文档和各种教程，在 Stackoverflow 上询问是我最后的手段，所以我希望有人能提供帮助！

顺便说一下，我尝试在可拖动层上将 dragOnTop 设置为 false，这不会改变结果。

谢谢，奥斯卡

[http://jsfiddle.net/EveryoneMustWin/QRaxJ/](http://jsfiddle.net/EveryoneMustWin/QRaxJ/)

```
var kItems = {};

kItems.stage = new Kinetic.Stage({
    container: 'container',
    width: $("#container").width(),
    height: $("#container").height()
});

kItems.lowerLayer = new Kinetic.Layer({
    scale: 1.0,
    id: "lower",
    draggable: true,
    dragBoundFunc: function(pos) {
        return {
            x: pos.x,
            y: pos.y
        }
    }
});

kItems.upperLayer = new Kinetic.Layer({
    scale: 1.0,
    id: "upper"
});

kItems.stage.add(kItems.lowerLayer);
kItems.stage.add(kItems.upperLayer);

kItems.backdrop = new Kinetic.Rect({
    x: 50, 
    y: 50, 
    width: 200, 
    height: 200,
    stroke: '#822',
    strokeWidth: 2,
    fill: '#b62',
    opacity: 1,
    id: 'backdrop'
});

kItems.lowerLayer.add(kItems.backdrop);

kItems.block1 = new Kinetic.Rect({
    x: 100,
    y: 100,
    width: 20,
    height: 20,
    stroke: '#228',
    strokeWidth: 2,
    fill: '#65b',
    opacity: 1,
    id: 'block1',
    draggable: true
});

kItems.upperLayer.add(kItems.block1);

kItems.block2 = new Kinetic.Rect({
    x: 180,
    y: 100,
    width: 20,
    height: 20,
    stroke: '#228',
    strokeWidth: 2,
    fill: '#65b',
    opacity: 1,
    id: 'block2',
    draggable: true
});

kItems.upperLayer.add(kItems.block2);

kItems.lowerLayer.draw();
kItems.upperLayer.draw();

kItems.lowerLayer.on("dragmove", function() {
    kItems.upperLayer.setAttrs({x:this.getX(), y:this.getY()});
    kItems.upperLayer.draw();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:19:49.367

在此修复之前，我的解决方法是在我的 dragEnd 处理程序上调用 layer.drawHit() 来处理变得无响应的图层（请参阅我上面的评论）。这使我可以继续使用最新版本（有许多不错的改进，我不想因为使用 4.3.3 而失去）。希望这可以帮助。

# sql - SQL：在条件下与前 2 行和第二个表进行内部连接

> ID：16101820
> 
> 赞同：1
> 
> 时间：2013-04-19T09:49:02.793
> 
> 标签：sql, join, conditional-statements

嗨，我现在正在尝试加入 2 个表，从第二个表连接到第一个表只有 2 行。

例如，我有以下 2 个表：

```
**Table A**
Column1 |   Column2 |   Column3
A       |   B       |   30
A       |   C       |   50
A       |   D       |   25

**Table B**
Column4 |   Column5
B       |   35  
B       |   90
B       |   65
B       |   80
B       |   85
B       |   40
C       |   100
C       |   60
C       |   70
C       |   65 
```

这是我的正常查询的示例：

```
select *
from 
    (
        select * 
        from A 
        where Column1 = 'A' and (Column2 = 'B' or Column2 = 'C') 
        order by Column2, Column3
    ) A
    inner join
    (
        select * 
        from B 
        where (Column4 = 'B' or Column4 = 'C') 
        order by Column5
    ) B
    on (A.Column2 = B.Column4 and ((B.Column5 - A.Column3) > 30)) 
```

结果应如下所示：

```
**Result:**
Column1   |   Column2 |   Column3 |   Column4 |   Column5 
A         |   B       |   30      |   B       |   65
A         |   B       |   30      |   B       |   80 
A         |   B       |   30      |   B       |   85 
A         |   B       |   30      |   B       |   90
A         |   C       |   50      |   C       |   100 
```

但是，我想要的结果是仅从第二个表结果中加入 2 行。预期的结果应该是：

```
**Expected Result:**
Column1   |   Column2 |   Column3 |   Column4 |   Column5
A         |   B       |   30      |   B       |   65
A         |   B       |   30      |   B       |   80
A         |   C       |   50      |   C       |   100 
```

有谁知道如何创建这样的 sql 语句？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:09:26.610

尝试使用 CTE

```
WITH Top2Rows AS (
    SELECT TOP 2 *
    FROM TableB
    WHERE ([ADD CONSTRAINTS])
)

SELECT *
FROM TableA a
JOIN Top2Rows r ON a.ID = b.ID
WHERE ([ADD CONSTRAINTS]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:04:48.450

一个好的开始是在没有内联视图的情况下编写更简单的 SQL：

```
select *
from   A inner join
       B on (A.Column2 = B.Column4)    
where  A.Column1 = 'A'               and
       A.Column2 in ('B','C')        and
       (B.Column5 - A.Column3) > 30) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:05:18.813

您可以使用 row_number() 来限制行数。该示例假定它`(Column1, Column2, Column3)`是唯一的。如果表`A`有主键，请改用它。

```
select  *
from    (
        select  Column1
        ,       Column2
        ,       Column3
        ,       Column4
        ,       Column5
        ,       row_number() over (partition by Column1, Column2, Column3 
                                   order by Column5 - Column3 desc) as rn
        from    A
        join    B
        on      A.Column2 = B.Column4
        where   Column1 = 'A' 
                and Column2 in ('B', 'C')
                and Column5 - Column3 > 30
        ) SubQueryAlias
where   rn < 2 
```

[请参阅 SQL Fiddle 中的示例。](http://sqlfiddle.com/#!4/b865e/14/0)

# sql - 创建简单 DB2 触发器时面临的问题

> ID：16101821
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:04.050
> 
> 标签：sql, triggers, db2

试图创建以下触发器：

```
CREATE TRIGGER EWR.INS_STU
AFTER INSERT ON EWR.STUDENT
    FOR EACH ROW
BEGIN
   IF ( :NEW.ROLL_NO > 60 ) THEN
      INSERT INTO EWR.STUDENT_DIV VALUES ( :NEW.ROLL_NO,'P');
   END IF;

   IF( :NEW.ROLL_NO < 60)  
   THEN
     INSERT INTO EWR.STUDENT_DIV VALUES (:NEW.ROLL_NO,'F');
   END IF;
END
! 
```

但它给出了以下错误：

> DB21034E 该命令被作为 SQL 语句处理，因为它不是有效的命令行处理器命令。在 SQL 处理期间，它返回：SQL0104N 在“H ROW BEGIN IF (”之后发现了一个意外的标记“:NEW.ROLL_NO > 30) THEN INSERT INT”。预期的标记可能包括：
> “”。LINE NUMBER=6。SQLSTATE=42601
> 
> SQL0104N 在“H ROW BEGIN IF (”之后发现了意外的标记“:NEW.ROLL_NO > 30 ) THEN INSERT INT”。预期的标记可能包括：“”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:34:17.220

为什么使用 NEW 和符号作为主变量 (:)？你不需要在变量名前加上冒号，因为这是一个只使用 sql (sql pl) 的触发器。

此外，您必须声明如何引用标题中定义的新值。

```
REFERENCING NEW AS N 
```

我重新创建了您的案例，它对我有用：

```
db2 "create table ewr.student(roll_no int)"
db2 "create table ewr.student_div(roll_no int, other char(1))" 
```

触发器.sql

```
CREATE TRIGGER EWR.INS_STU
  AFTER INSERT ON EWR.STUDENT
  REFERENCING NEW AS NEW
  FOR EACH ROW
BEGIN
  IF ( NEW.ROLL_NO > 60 ) THEN
    INSERT INTO EWR.STUDENT_DIV VALUES ( NEW.ROLL_NO, 'P' );
  END IF;
  IF ( NEW.ROLL_NO < 60 ) THEN
    INSERT INTO EWR.STUDENT_DIV VALUES ( NEW.ROLL_NO, 'F' );
  END IF;
END !

db2 -td! -f trigger.sql
DB20000I  The SQL command completed successfully. 
```

我希望这能解决你的问题。

# maven - 使用 Ant 任务更改 Maven 属性

> ID：16101826
> 
> 赞同：8
> 
> 时间：2013-04-19T09:49:10.907
> 
> 标签：maven, maven-2, maven-3, maven-ant-tasks

我在 pom.xml 中设置了一个 Maven 属性。

```
<properties>
    <build.start.date>someValue</build.start.date>
</properties> 
```

现在我有一个 ant 任务执行以下操作：

```
<loadresource property="build.start">
    <url url="http://someUrl?xpath=/*/id/text()"/>
</loadresource>

<property name="build.start.date" value="${build.start}"/>

<echo>Printing Ant Value ${build.start} </echo>
<echo>Printing Maven Value ${build.start.date}</echo> 
```

这导致：

```
[echo] Printing Ant Value 2013-03-15_17-53-08
[echo] Printing Maven Value 2013-03-16 
```

但我希望两者都能打印：

```
[echo] Printing Ant Value 2013-03-15_17-53-08
[echo] Printing Maven Value 2013-03-15_17-53-08

I tried <loadresource property="build.start.date">
and
I tried <loadresource property="${build.start.date}"> 
```

所以问题是如何在 ant 任务中设置全局 maven 属性？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-28T08:00:47.647

我找到了解决方案。

首先你需要有 1.7 版本的 antrun 插件：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-antrun-plugin</artifactId>
<version>1.7</version>
....
</plugin> 
```

然后在配置下，您需要将**exportAntProperties 设置**为**true**（默认为 false）：

```
<configuration>
<exportAntProperties>true</exportAntProperties> 
```

# c# - 在 Windows C# 中的 Excel 中保存数据时出现范围异常

> ID：16101828
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:16.513
> 
> 标签：c#, windows, excel

我正在尝试将一些数据放入 excel 单元格中。我得到 HResult 范围异常。下面是代码。而且也无法将文本包装在单元格 [1,B] 中。我是使用 Office 应用程序的新手，但无法找到解决方案。

```
 myExcelApp = new Excel.Application();
                myExcelApp.Visible = true;
                myExcelWorkbooks = myExcelApp.Workbooks;
                String fileName1 = "D:\\book1.xlsx";
                myExcelWorkbook = myExcelWorkbooks.Open(fileName1, misValue,           misValue,    misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);

                Excel.Worksheet myExcelWorksheet = (Excel.Worksheet)myExcelWorkbook.ActiveSheet;

                String cellFormulaAsString = myExcelWorksheet.get_Range("A2", misValue).Formula.ToString();

                Microsoft.Office.Interop.Excel.Range range = myExcelWorksheet.UsedRange;

                 myExcelWorksheet.Cells[1, "A"] = text;
                myExcelWorksheet.Cells[1, "B"] = commentText;
             //   myExcelWorksheet.Cells[1, "C"] = OccuranceList;

                Excel.Range r = myExcelWorksheet.get_Range("B7", "A");
                r.EntireRow.AutoFit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:59:48.837

> Excel.Range r = myExcelWorksheet.get_Range("B7", "A");

您缺少单元格 A 的行号

像这样的东西？

```
Excel.Range r = myExcelWorksheet.get_Range("B7", "A1"); 
```

**跟进**

> 我只想将文本包装在 cell[1,"B"] 中，因为字符串非常大。– user1665707 59 分钟前
> 
> 我现在没有收到任何错误。但是文本换行没有发生。部分文本不可见。– user1665707 17 分钟前

是的，它不会自动调整。原因见此[链接](https://stackoverflow.com/questions/12541248/autofit-doesnt-work-with-wrapped-text)。

# python - 根据内容相似度在网格中排列文档

> ID：16101831
> 
> 赞同：1
> 
> 时间：2013-04-19T09:49:25.907
> 
> 标签：python, hash, machine-learning, data-mining, document-classification

如何将文档排列到一个空间（例如多个网格）中，以便放置它们的位置包含有关它们与其他文档的相似程度的信息。我研究了 K-means 聚类，但如果数据很大，它的计算量会有点大。我正在寻找诸如散列文档内容之类的东西，以便它们可以容纳在大空间中，并且相似的文档将具有相似的散列并且它们之间的距离会很小。在这种情况下，很容易找到与给定文档相似的文档，而无需做很多额外的工作。

结果可能类似于下图。在这种情况下，音乐文件接近电影文件，但远离与计算机相关的文件。盒子可以被认为是整个文件的世界。

![在此处输入图像描述](https://i.stack.imgur.com/fQ174.jpg)

任何帮助将不胜感激。

谢谢

jvc007

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:49:24.673

One way to introduce a distance or similarity measure between documents is:

*   first encode your documents as vectors, eg using TF-IDF (see [https://en.wikipedia.org/wiki/Tf%E2%80%93idf](https://en.wikipedia.org/wiki/Tf%E2%80%93idf))

*   the scalar-product between two vectors related to two documents give you a measure about the similarity of the documents. The larger this value is, the higher is the similarity.

Using MDS ([http://en.wikipedia.org/wiki/Multidimensional_scaling](http://en.wikipedia.org/wiki/Multidimensional_scaling)) on these similarities should help to visualize the documents in a two dimensional plot.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:52:13.510

在保持相似性的同时将高维数据映射到低维空间的问题可以使用[自组织映射](https://en.wikipedia.org/wiki/Self-organizing_map)（SOM 或 Kohonen 网络）来解决。我已经在文档上看到了一些应用程序。

我不知道任何 python 实现（可能有一个），但是 Matlab（SOM 工具箱）有一个很好的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:56:58.277

我认为您正在寻找的是[locality-sensitive hashing](http://www.mit.edu/~andoni/LSH/)。请参阅[此答案](https://stackoverflow.com/a/12967538/166749)以获取精美的图形说明和示例代码。

# git - 如何最好地通过 SSH 合并 Git 更改

> ID：16101832
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:27.520
> 
> 标签：git, ssh, merging-data

我有一种感觉，我正在以错误的方式解决这个问题。

我有一个软件项目，其中有 3 名开发人员都在自己的 GIT 存储库上进行频繁的更改。他们将更改推送到服务器，然后我将更改合并并发布到实时网络软件。

我一直在尝试找到一种解决方案，当我合并代码时可以轻松地使用它来解决冲突（每次合并通常都会有一堆冲突）。我的经验是，仅 VIM 在这方面非常慢，但我发现了一个名为 Splice 的程序： [http](http://sjl.bitbucket.org/splice.vim/) ://sjl.bitbucket.org/splice.vim/ 我正在尝试掌握它。然而，似乎即使是这个程序也会在主页上告诉你：

> “Splice 是一种合并工具，这意味着您将在您的开发机器上使用它，而不是通过服务器上的 SSH。”

通过 SSH 在生产服务器上进行合并有那么大吗？每次我必须合并代码时，抓取服务器上的所有代码、下载、合并和重新上传似乎是一个更大的痛苦。

我对此很陌生，但我觉得我错过了一些东西。有没有更好的方法来解决这个问题？

欢迎所有建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T10:41:46.373

问题是你根本不应该`git`在你的服务器上运行命令（当然除了准系统 repo 的服务器端设置）。您应该`git commit`在您的开发机器上完成所有工作（但它*可能*是通过 SSH 连接的远程机器，这就是您的意思吗？），然后`git pull && git push`更新服务器存储库。

# android - Android Touch EventListener 多次触发回调

> ID：16101833
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:28.197
> 
> 标签：android, event-handling, touch-event

我附加了一个带有 ImageView 对象的触摸事件侦听器，

```
imageview_obj.setOnTouchListener(new View.OnTouchListener()
{
    public boolean onTouch(View v, MotionEvent event) 
    {
            Log.i(" info "," message");                        
            return true;
        }
     }); 
```

问题是当我触摸 imageview_obj 时，回调被触发不止一次（3 次到 4 次）..

现在我的问题是

1.  为什么回调被触发多次？

2.  我应该如何附加 onTouchListener 以便每次触摸都会触发一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:05:26.750

```
 imageview_obj.setOnTouchListener(new View.OnTouchListener()
    {
        public boolean onTouch(View v, MotionEvent event) 
        {
                Log.i(" info "," message");                        
                return true;
                  switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
//Do code here for down
               return true;
            case MotionEvent.ACTION_MOVE:
            return true;
            case MotionEvent.ACTION_UP:
//Do code here for up
            return true;
                 }
            }
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:52:38.323

它是在多个动作上触发的，因为触摸事件有很多像向下、向上和移动等事件时间，所以你需要用特定的事件来实现它，比如停机时间或正常运行时间

```
public boolean onTouch(View v, MotionEvent event) 
{

    int action = event.getAction();
    switch(action){

        case Down_Action: // MotionEvent class field 
        Log.i(" info "," message");      
        break;
        case Up_Action:
        Log.i(" info "," message");      
        break;
        case Move_action:
        Log.i(" info "," message");      
        break;

    }

    return true;
} 
```

# c - 动态分配的整数数组的大小

> ID：16101836
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:47.537
> 
> 标签：c

我正在处理一个类型的函数：

```
 int xyz(int input[]) 
```

我无权访问 main 函数，因此不知道数组的大小。如何找到输入数组的大小？有没有办法知道数组的结束位置？ `sizeof(input)/sizeof(int*)`给出 1 作为输入基本上是一个指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:51:53.947

如果调用者没有提供有关数组的大小信息，则无法在函数 xyz() 中获取大小。

您可以在另一个变量中传递大小信息（或作为数组的元素）。

```
int xyx(int abc[], size_t len)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:53:11.010

不......在被调用函数中没有（可移植的）方法，所以在这种情况下（即当没有传递元素数量参数时）调用者采用某种约定是正常的，例如在最后提供一个标记值使用元素或保证一定数量的元素。如果使用了哨兵，您可以通过在调试器中检查调用代码来向自己证明这是完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:53:43.393

如果将数组传递给函数并且不提供长度，则找不到它，因为数组会衰减为大小始终为 32 (64) 位的指针。

# google-app-engine - 如何将 maven 项目转换为 Web 应用程序项目？

> ID：16101839
> 
> 赞同：4
> 
> 时间：2013-04-19T09:49:54.490
> 
> 标签：google-app-engine, maven, m2eclipse, web-application-project

我想将一个 Maven 项目转换为一个 Web 应用程序项目，它应该包含 web.xml。我正在使用带有 m2e（eclipse 的 maven 集成）插件软件的 eclipse juno 4.2。

任何答复将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T13:12:57.830

*   安装[m2e-wtp](https://www.eclipse.org/m2e-wtp/download/)
*   在您的 pom.xml 中，更改或添加*战争*包装
*   右键单击项目 > Maven > 更新项目
*   m2e-wtp 将创建 src/main/webapp 文件夹并添加 Dynamic Web 项目 Facet¤
*   在 src/main/webapp 下手动添加一个 WEB-INF 文件夹
*   右键项目 > Java EE Tools > Generate Deployment Descriptor stub 它将在 src/main/webapp/WEB-INF/ 下创建一个 web.xml

¤ 默认情况下，web facet 设置为 2.5。如果需要，您应该在生成 web.xml 之前在项目属性 > 项目构面下更新它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:45:35.057

I assume your current project is a maven project which produces jar. Please confirm.

I have not come across any utility which can convert a jar project to a war project.

You have following two options -

1.  Simple open the pom.xml and change jar to war. Create folder webapp under src/main and create a web.xml
2.  Create a new web app project via maven command line choosing webapp archetype or via eclipse choosing maven webapp achetype. Define dependency to your jar project.

If you can provide more information based on my suggestion then probably I can help.

# apache-flex - 如何使用 BlazeDS WAR 文件将 Flex 连接到 Java？

> ID：16101841
> 
> 赞同：0
> 
> 时间：2013-04-19T09:49:57.600
> 
> 标签：apache-flex, flex4.5, blazeds

我是 Flex 的新手。我不知道如何使用 BlazeDS 将 Flash Builder 连接到 Java。任何人都可以帮助我提供一些屏幕截图。我使用此链接在网上搜索：

[http://cgrant.wordpress.com/2009/11/19/setting-up-flex-blazeds-in-flashbuilder/](http://cgrant.wordpress.com/2009/11/19/setting-up-flex-blazeds-in-flashbuilder/)

请帮我解决一下这个。我不知道我必须在 Java 端或 Flex 端做什么。请帮助我，即使我无法理解`web-inf`flex 文件夹在这里意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:54:26.347

在 Java EE 应用程序中，您可以将应用程序打包到 WAR 文件中。WAR 文件是具有固定结构的 zip 文件。您将几个文件夹放在根目录中，一个特定的文件夹是 WEB-INF。最后一个文件夹包含应用程序外部用户无法访问的所有私有数据。在 WEB-INF 中，您有 META-INF 和元数据和类文件夹。Classes 文件夹存储已编译的 java 类。您可能需要在 WEB-INF 文件夹中创建一个名为 flex 的新文件夹，并将所有 xml 配置文件放入其中。在这里，如果来自 adobe 的好教程可能对您有所帮助。 [http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=lcoverview_4.html](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=lcoverview_4.html)

问候， 布雷诺

# sql - 在多公司数据库中选择公司名称进行查询

> ID：16101843
> 
> 赞同：0
> 
> 时间：2013-04-19T09:50:08.847
> 
> 标签：sql, sql-server-2008

这就是我想做的重点`CompanyName`：

```
SELECT 'Companyname', [Date], [Net Amount] FROM [Company1$Transaction Header] 
```

条件`Companyname`中的公司名称在哪里`FROM``[Company1$Transaction Header]`

这可能吗？

- 编辑

在检查了 Bluefeet 的建议后，我倾向于这样的事情：

你怎么看？

```
DECLARE @CompanyName
SET @CompanyName = (SELECT statement that gets the CompanyName)
SELECT @CompanyName, [Date], [Net amount], FROM [Company1@Transaction Header] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:11:44.780

如果要从表名中提取 CompanyName，则可以使用[`information_schema`](http://msdn.microsoft.com/en-us/library/ms186224.aspx)视图获取数据：

```
select left(table_name, charindex('$', table_name)-1) Company
from information_schema.tables
where table_name ='Company1$Transaction Header'; 
```

然后你可以在查询中使用它：

```
select c.company,
  date, 
  netamount
from [Company1$Transaction Header]
cross join
(
  select left(table_name, charindex('$', table_name)-1) Company
  from information_schema.tables
  where table_name ='Company1$Transaction Header'
) c; 
```

如果您提前知道公司和表的名称，那么您可以将公司名称作为静态字符串包含在查询中：

```
select 'Company1' CompanyName,
  date, 
  netamount
from [Company1$Transaction Header] 
```

# python - 如何在 Django 中使用 ForeignKey 字段作为过滤器？

> ID：16101846
> 
> 赞同：0
> 
> 时间：2013-04-19T09:50:10.867
> 
> 标签：python, django, foreign-keys, django-views

我有 2 个模型：

```
class Category(models.Model):
    title = models.CharField(max_length=250)
    ### other fields

class Album(models.Model):
    category = models.ForeignKey(Category)
    subject = models.CharField(max_length=200)
    ### other fields... 
```

.

我刚刚写了一个按特定类别过滤专辑的视图，我也希望它们都在 home.html 模板中：

```
#views.py
def commercial(request):
    commercial_subjects = Album.objects.filter(category__title__contains="commercial" )
    return render(request, 'gallery/index.html', {'commercial_subjects': commercial_subjects}) 
```

它仅适用于商业类别。如果我想为每个类别编写多个视图，就像硬编码一样。我需要的是一个自动显示所有类别及其相关专辑主题的视图或过滤过程。所以最终的结果一定是这样的：

> 个人的
> 
> *   专辑 1
> *   专辑 2
> 
> 商业的
> 
> *   专辑 4
> *   专辑5

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:05:10.653

这很简单。首先给外键一个[related_name ：](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)

```
class Album(models.Model):
    category = models.ForeignKey(Category, related_name='albums') 
```

从视图通过所有类别：

```
def myView(request):
    categories = Category.objects.all()
    return render(request, 'gallery/index.html', {'categories': categories}) 
```

然后在模板中：

```
<ul>
    {% for category in categories %}
        <li>{{ category.title }}</li>
        {% with category.albums.all as albums %}
            {% if albums %}
                <ul>
                   {% for album in albums %}
                      <li>{{ album.subject }}</li>
                   {% endfor %}
                 <ul>
            {% endif %}
        {% endwith %}
    {% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:02:18.097

```
#views.py
def commercial(request):
    commercial_subjects = Album.objects.filter(category__title="commercial") 
```

# assembly - 哪个 c 代码将更改为 rlwinm power PC assembly instruciton

> ID：16101847
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:50:11.690
> 
> 标签：assembly, powerpc, objdump, instruction-set

哪个 c 代码将更改为 rlwinm 电源 PC 组装说明？

这是objdump的快照..

```
 if(!pool || pool->maxPoolSize > SEQ_MODULUS ) /* Invalid mask or pointer is null */

   29ccc:       41 82 00 dc     beq-    29da8 <asGetSdBuf+0x108>
   29cd0:       80 c3 00 08     lwz     r6,8(r3)
   29cd4:       3c 00 00 ff     lis     r0,255
   29cd8:       60 00 ff ff     ori     r0,r0,65535
   29cdc:       7f 86 00 40     cmplw   cr7,r6,r0
   29ce0:       41 9d 00 78     bgt-    cr7,29d58 <asGetSdBuf+0xb8>

   ind = pool->maxPoolSize & idx;

   /* there are free sdBufs, get one */

   sdBuf = pool->sdBufs + ind;

   29ce4:       81 63 00 10     lwz     r11,16(r3)
   29ce8:       7c 80 30 38     and     r0,r4,r6
   29cec:       54 04 20 36     **rlwinm  r4,r0,4,0,27**

   if(!sdBuf) /* check if sdBuf pointer is null */

   29cf0:       7f eb 22 15     add.    r31,r11,r4
   29cf4:       41 82 00 fc     beq-    29df0 <asGetSdBuf+0x150>
   } 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:05:25.030

`rlwinm r4,r0,4,0,27`

方法

`r4 = (r0 << 4) & 0xFFFFFFF0`

（实际上它是旋转而不是移位，但由于掩码在这里并不重要）。

所以它乘以 16，在下一行被添加到`r11`. 我的猜测是这对应于

`pool->sdBufs + ind`

即`ind`缩放以匹配数据`pool->sdBufs`点的元素大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:07:10.483

在我看来，你已经知道了，大部分情况下。然而：

```
lwz    r11,16(r3)   // tmp1 = pool->sdBufs
and    r0,r4,r6     // ind  = pool->maxPoolSize & idx
rlwinm r4,r0,4,0,27 // tmp2 = ind*sizeof(*pool->sdBufs)
add.   r31,r11,r4   // sdBuf = tmp1 + tmp2; 
```

# c# - 序列化后数组项的顺序

> ID：16101850
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:50:16.253
> 
> 标签：c#, serialization

我想根据序列化后的数组项序列构建一个逻辑。所以我需要确认我从客户端作为 JSON 发送的数组项的序列是否保持不变？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:52:37.323

它绝对保持不变。重新排序数组元素的序列化程序将被破坏。

序列化器的基本要求是：

```
Contract.Assume(Deserialize(Serialize(object)).Equals(object)); 
```

# matlab - 向语音信号中添加噪声

> ID：16101852
> 
> 赞同：0
> 
> 时间：2013-04-19T09:50:19.283
> 
> 标签：matlab, file-io, signal-processing, noise

我正在尝试`.wav`使用以下方法在 matlab 中向语音信号（文件）中添加噪声：

```
load handel.mat;

hfile= 'noisy.wav';

y = wavread('daveno.wav');
y = y + randn(size(y)) * (1/100);
wavwrite(y, Fs, hfile);
nsamples=Fs; 
```

这增加了噪音，但是，它消除了实际的语音，因此仅包含噪音。我是否需要乘以更大的数字，或者，有人可以提出解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:17:22.347

问题是您以错误的采样频率写入文件。[使用wavread](http://www.mathworks.com/help/matlab/ref/wavread.html)`Fs`的第二个输出找到正确的采样频率（即 的值）

```
 [y, Fs] = wavread('daveno.wav') 
```

# extjs - 如何在 Ext Js 树中检查更改时防止 itemclick 事件

> ID：16101853
> 
> 赞同：4
> 
> 时间：2013-04-19T09:50:28.913
> 
> 标签：extjs, tree, click, treeview

我在 Ext.tree.Panel 中添加了两个侦听器“检查更改”和“项目单击”。但我注意到，当检查更改发生时，它也会触发项目单击事件。我希望阻止这个项目的点击事件。

```
 listeners : {
        checkchange: function(node, checked, eOpts){
            alert('this is check change');
        },
        itemclick : function(obj, record, item, index, e, eOpts){
            alert('this is item click');
        }
    } 
```

这是 Ext 树中的侦听器。在检查更改时，我希望仅收到“这是检查更改”此警报。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T11:51:48.067

您可以使用事件 getTarget 方法来检查复选框的 DOM。完整的解决方案如下：

```
onItemClick: function( self, record, item, index, eventObj, eOpts ) {
    var colIdx = eventObj.getTarget('.x-grid-cell').cellIndex;

    if (colIdx===0) { // Apply item event click to the first column only
        var node=self.getTreeStore().getNodeById(record.internalId);

        if (!eventObj.getTarget('.x-tree-checkbox',1,true)) {
            record.set('checked',!record.get('checked'));               
            this.fireEvent('checkchange', node, record.get('checked'));
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-23T14:36:00.687

蹩脚的解决方案！我只能将脚本限制为“itemclick”。在 ExtJs 5.1.1 中运行良好，并且可能在 CSS 复选框类名称为“x-tree-checkbox”的所有版本中运行良好

```
listeners : {
    itemclick : function(panel, record , item , index, event){
        var clazz = '';
        if(event.target.classList != null){
            clazz = event.target.classList[0];
        }
        if(clazz != 'x-tree-checkbox'){
            ...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T09:57:40.843

如果您单击复选框以更改其值，则 itemclick 事件将始终在 checkchange 事件之前触发。如果您不希望 itemclick 事件发生任何事情，只需不要定义它（删除侦听器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T11:27:31.837

您是否尝试过实现“beforeitemclick”事件？当您单击该项目时它会触发，并且在此处理程序中您可以实现 checkchange。

# indexeddb - jaydata 的 IndexedDB 错误 - 在不允许突变的数据库上尝试了突变操作

> ID：16101854
> 
> 赞同：1
> 
> 时间：2013-04-19T09:50:35.300
> 
> 标签：indexeddb, jaydata

我有 2 个数据库。我想清除数据库并添加新内容。我正在使用以下方法。

```
function updateDB(db, dbInstance, newElements) {
    return dbInstance.forEach(function(oldElement) {
        dbInstance.remove(oldElement);
    }).then(function() {
        console.log('Deleted all rows');
        return db.saveChanges(function() {
            dbInstance.addMany(newElements);
            return db.saveChanges(function(){
                console.log('Added '+newElements.length+' rows');
                return true;
            });
        });
    });
} 
```

从技术上讲，我调用了上述方法 2 次。IE

```
return updateDB(db1, db1.dbIns1, newElements1).then(function() {
    return updateDB(db2, db2.dbIns2, newElements2).then(function() {
        return true;
    });
}); 
```

该方法的定义如下。这是在加载时完成的，并且调用了 onready 方法：

```
 $data.Entity.extend("Db1Name", {
            Id: { type: "string", key: true},
            Name: { type: "string"},
                Values : {type: "string"}
    });

   $data.EntityContext.extend("db1Test", {
                db1Ins: { type: $data.EntitySet, elementType: Db1Name }
   });

   var db1 = new db1Test({ name: "indexedDb", databaseName: "db1Ins" }); 
```

在 Firefox 中执行此操作时，我`InvalidStateError: A mutation operation was attempted on a database that did not allow mutations.`会多次执行 db.saveChanges() 。这是代码问题吗？它在 Chrome 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:12:20.740

您的名称具有误导性，当您调用 db1 是一个实例时，db1Ins 是一个实体集，Db1Name 是一个实体类型。在函数中，参数名称也很糟糕：db 是一个上下文，dbInstance 是一个实体集。我建议你使用好名字。

我不喜欢混合回调和承诺链，所以让我们重写它：

```
 function updateDB(ctx, set, newElements) {
    return set.toArray()
    .then(function(oldElements) {
        oldElements.forEach(function(oldElement) {
            set.remove(oldElement);
        };
        console.log('Deleted all rows');
        return ctx.saveChanges();
    })
    .then(function() {
        set.addMany(newElements);
        return ctx.saveChanges();
    })
    .then(function(l){
         console.log('Added '+l+' rows');
         return true;
     });
 } 
```

# php - 在创世纪框架的子菜单中添加一个div的函数

> ID：16101865
> 
> 赞同：0
> 
> 时间：2013-04-19T09:51:06.627
> 
> 标签：php, html, css, wordpress, wordpress-theming

我正在寻找一种方法来使用任何 genesis 钩子或 php 函数在 genesis 框架的子菜单中添加一个新的 div 类。

这是示例：

**原始代码：**

```
<div class="nav">
<ul id="menu-main-menu" class="menu genesis-nav-menu menu-primary">
   <li id="menu-item-1" class="menu-item-type-post_type menu-item-object-page">Menu Item 1</li>
   <li id="menu-item-2" class="menu-item-type-post_type menu-item-object-page">Menu Item 2</li>
      <ul class=submenu>
         <li id="menu-item-111">Menu Item 1</li>
         <li id="menu-item-112">Menu Item 2</li>
      </ul>
    <li id="menu-item-3" class="menu-item-type-post_type menu-item-object-page">Menu Item 3</li>
</ul>
</div> 
```

**我想要实现的目标：**

```
<div class="nav">
<ul id="menu-main-menu" class="menu genesis-nav-menu menu-primary">
   <li id="menu-item-1" class="menu-item-type-post_type menu-item-object-page">Menu Item 1</li>
   <li id="menu-item-2" class="menu-item-type-post_type menu-item-object-page">Menu Item 2</li>
      <ul class=submenu>
         <li id="menu-item-111">Menu Item 1</li>
         <li id="menu-item-112">Menu Item 2</li>
         <div class="nmd"> Some text or images here</div>
      </ul>
    <li id="menu-item-3" class="menu-item-type-post_type menu-item-object-page">Menu Item 3</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:35:45.167

不确定可以做到，但您可以尝试编写自己的自定义 walker 类：[http ://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

您还可以创建一个新的空白菜单项（在仪表板中），并为其指定“nmd”类：http: [//www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus /](http://www.wpbeginner.com/wp-themes/how-to-style-wordpress-navigation-menus/)

# jsf - 从 JSF 2/RichFaces 4 迁移到 JSF 1.2/RichFaces 3 后的错误

> ID：16101866
> 
> 赞同：1
> 
> 时间：2013-04-19T09:51:08.723
> 
> 标签：jsf, richfaces

在应用必要的更改以从 JSF 2/RichFaces 4 迁移到 JSF 1.2/RichFaces 3 后，出现了这些错误，我无法解决它们：

请问这些异常的原因是什么

```
09:45:17,231 WARN  [org.jboss.modules] (MSC service thread 1-1) Failed to define class javax.faces.render.ClientBehaviorRenderer in Module "deployment.project-web.war:main" from Service Module Loader: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/render/ClientBehaviorRenderer
at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_15]
at java.lang.ClassLoader.defineClass(ClassLoader.java:787) [rt.jar:1.7.0_15]
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) [rt.jar:1.7.0_15]
at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.Module.loadModuleClass(Module.java:517) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_15]
at java.lang.ClassLoader.defineClass(ClassLoader.java:787) [rt.jar:1.7.0_15]
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) [rt.jar:1.7.0_15]
at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.Module.loadModuleClass(Module.java:517) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
at org.jboss.as.web.deployment.jsf.JsfAnnotationProcessor.deploy(JsfAnnotationProcessor.java:111)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]

09:45:17,252 WARN  [org.jboss.modules] (MSC service thread 1-1) Failed to define class org.richfaces.renderkit.ComponentControlBehaviorRenderer in Module "deployment.project-web.war:main" from Service Module Loader: java.lang.LinkageError: Failed to link org/richfaces/renderkit/ComponentControlBehaviorRenderer (Module "deployment.project-web.war:main" from Service Module Loader)
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.Module.loadModuleClass(Module.java:517) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
at org.jboss.as.web.deployment.jsf.JsfAnnotationProcessor.deploy(JsfAnnotationProcessor.java:111)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]
Caused by: java.lang.NoClassDefFoundError: javax/faces/render/ClientBehaviorRenderer
at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_15]
at java.lang.ClassLoader.defineClass(ClassLoader.java:787) [rt.jar:1.7.0_15]
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) [rt.jar:1.7.0_15]
at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391) [jboss-modules.jar:1.1.1.GA]
... 15 more
Caused by: java.lang.ClassNotFoundException: javax.faces.render.ClientBehaviorRenderer from [Module "deployment.project-web.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
... 20 more

09:45:17,275 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."project-web.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."project-web.war".INSTALL: Failed to process phase INSTALL of deployment "project-web.war"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018045: Failed to load annotated class: org.richfaces.renderkit.ComponentControlBehaviorRenderer
at org.jboss.as.web.deployment.jsf.JsfAnnotationProcessor.deploy(JsfAnnotationProcessor.java:113)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 5 more

09:45:17,326 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "project-web.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"project-web.war\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"project-web.war\".INSTALL: Failed to process phase INSTALL of deployment \"project-web.war\""}}
09:45:17,328 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) 
JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."project-web.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."project-web.war".INSTALL: Failed to process phase INSTALL of deployment "project-web.war"

09:45:17,330 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"project-web.war\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"project-web.war\".INSTALL: Failed to process phase INSTALL of deployment \"project-web.war\""}}} 
```

提前致谢。

**编辑：**应用程序服务器是 JBoss AS 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:47:54.293

此错误取决于您的 Web 应用程序服务器，您应该将**java-web-app** jar 替换为服务器的实现。通常通过更改**maven**配置文件中的一些参数就足够了。

在您的情况下，对于**Jboss ，您应该有这样的东西（在使用****jboss-tools**构建项目时自动构建）：

```
<!-- JBoss distributes a complete set of Java EE 6 APIs including a Bill
    of Materials (BOM). A BOM specifies the versions of a "stack" (or a collection)
    of artifacts. We use this here so that we always get the correct versions
    of artifacts. Here we use the jboss-javaee-6.0-with tools stack (you can read this as
    the JBoss stack of the Java EE 6 APIs, with some extras tools for your project, such
    as Arquillian for testing) -->
<dependency>
    <groupId>org.jboss.bom</groupId>
    <artifactId>jboss-javaee-6.0-with-tools</artifactId>
    <version>${javaee6.with.tools.version}</version>
    <type>pom</type>
    <scope>import</scope>
</dependency> 
```

从[Oracle 页面](http://www.oracle.com/technetwork/articles/java/unittesting-455385.html)：

通过加载标准 Maven 原型所包含的 Java EE 6 API 类，您将得到一个奇怪的错误（参见清单 6）。

```
 <dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
 </dependency> 
```

**清单 6：对 API 的不可用引用**

Maven 存储库中的标准 Java EE 6 API 由一个工具处理，该工具从字节码中删除方法主体实现，并使 javaee-web-api 依赖项无法用于单元测试。任何从 Java EE 6 API 加载类的尝试都会导致如下错误：

```
Absent Code attribute in method that is not native or abstract in class file javax/enterprise/util/TypeLiteral

java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/enterprise/util/TypeLiteral
 at java.lang.ClassLoader.defineClass1(Native Method)
 at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) 
```

**清单 7：从 Java EE 6 API 加载类导致的错误**

您应该用应用程序供应商实现替换 Java EE 6 API 类。对于 GlassFish v3.1，最方便的方法是使用对嵌入式容器的单一依赖：

```
 <dependency>
    <groupId>org.glassfish.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1</version>
    <scope>provided</scope>
 </dependency> 
```

**清单 8：Java EE 6 API 替换**

问候，

# ruby-on-rails - 沉默 ActionView::Template::Errors，例如“未预编译”

> ID：16101867
> 
> 赞同：1
> 
> 时间：2013-04-19T09:51:10.007
> 
> 标签：ruby-on-rails, asset-pipeline, actionview

我的问题是关于使用 rails 资产管道时动作视图 gem 的标准行为。

只要有未预编译的图像，它就会引发异常，并且应用程序执行停止，因此用户只会看到标准的空白页面说：“......出了点问题”。

像丢失图像这样微不足道的东西（可能是一个图标，也许只是一个拼写错误的名字......）不应该是一个炫耀的东西。应该吗？！

我们希望将这种激进的行为更改为更温和的版本：让应用程序继续工作，但当然会通知我们丢失的图像。

***问题：***

除了猴子修补动作视图gem中包含的辅助方法的相关部分之外，还有其他方法吗？

有没有我们可以修改的配置，所以不需要这个补丁？

在 gem 更新的情况下，拥有这种猴子补丁被认为是维护的噩梦，不是吗？

这是我们的实际补丁：名为：“assetpipe_easy_errors.rb”，驻留在 中`config/initializers`，相关方法为“ `digest_for`”

```
Sprockets::Helpers::RailsHelper::AssetPaths.class_eval do
        attr_accessor :asset_environment, :asset_prefix, :asset_digests, :compile_assets, :digest_assets

        class AssetNotPrecompiledError < StandardError; end

        def asset_for(source, ext)
          source = source.to_s
          return nil if is_uri?(source)
          source = rewrite_extension(source, nil, ext)
          asset_environment[source]
        rescue Sprockets::FileOutsidePaths
          nil
        end

        def digest_for(logical_path)
          if digest_assets && asset_digests && (digest = asset_digests[logical_path])
            return digest
          end

          if compile_assets
            if digest_assets && asset = asset_environment[logical_path]
              return asset.digest_path
            end
            return logical_path
          else
            #original code: raise AssetNotPrecompiledError.new("#{logical_path} isn't precompiled")
            ### own Patch: these next four lines:
            Rails.logger.info(" arrg!! an image is missing ")
            ### example: FeedbackMailer.generic_system_message(subject,bodytext).deliver
            FeedbackMailer.generic_system_message("asset error",logical_path).deliver
            return logical_path
          end
        end

        def rewrite_asset_path(source, dir, options = {})
          if source[0] == ?/
            source
          else
            if digest_assets && options[:digest] != false
              source = digest_for(source)
            end
            source = File.join(dir, source)
            source = "/#{source}" unless source =~ /^\//
            source
          end
        end

        def rewrite_extension(source, dir, ext)
          source_ext = File.extname(source)
          if ext && source_ext != ".#{ext}"
            if !source_ext.empty? && (asset = asset_environment[source]) &&
                  asset.pathname.to_s =~ /#{source}\Z/
              source
            else
              "#{source}.#{ext}"
            end
          else
            source
          end
        end
end 
```

任何想法都受到高度赞赏

# javascript - 从 xml 中获取元素标签值

> ID：16101871
> 
> 赞同：0
> 
> 时间：2013-04-19T09:51:30.430
> 
> 标签：javascript, xml

这是我的 JavaScript 代码：-

```
<!DOCTYPE html>
<html>
  <head>
    <title>Geolocation API with Google Maps API</title>
    <meta charset="UTF-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  </head>
  <body onload="getlg()">
    <script>
       function getlg(){
                var region = $('#region').val();
                var xml;
                $.ajax({
              url: "http://maps.googleapis.com/maps/api/geocode/xml?address="+$("#region").html()+"&sensor=true",
              async: false,
              dataType:'text/xml',
              success: function(data){
                xml=data;
                $('#Div_Get').html('');
          }
          });
                        xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );
   var abc= xmlDoc.getElementsByTagName("lat")[1].firstChild.nodeValue;
          }
    </script>
    <div id="region">Rajkot</div>
    <div id = "Div_Get"></div>
  </body>
</html> 
```

在这里，我尝试在 url 中设置值并获取 xml 文件。
现在我尝试从这个 xml lat 和 long 值中获取。
我正在尝试`getElementsByTagName`，但没有成功，没有任何输出，并`xmlDoc is null`在此行给我错误，`var abc= xmlDoc.getElementsByTagName("lat")[1].firstChild.nodeValue;`
请帮我解决这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:57:27.717

改变你`datatype`从

```
dataType:'text/xml', 
```

至

```
dataType:'xml', 
```

请查看[为 AJAX 请求指定数据类型的](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)文档。

# django - 使用 django 上的管理界面更改用户密码

> ID：16101872
> 
> 赞同：0
> 
> 时间：2013-04-19T09:51:42.307
> 
> 标签：django, apache, admin

我尝试使用管理界面中的标准表单更改用户密码，但是当我输入新密码并点击确定时，我收到以下消息：

```
Forbidden

You don't have permission to access /admin/auth/user/3/ on this server.

Apache Server at <my-site-name>.com Port 80 
```

然后我无法加载管理页面（我得到同样的错误），直到我从这个站点删除所有 cookie。当我检查新密码时，我发现它已成功更改。有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T14:58:16.750

问题已经解决了！这是因为服务器有sql注入保护，将查询归类为攻击

# c# - asp.net c# - 需要获取数据列表行的高度

> ID：16101874
> 
> 赞同：1
> 
> 时间：2013-04-19T09:51:48.743
> 
> 标签：c#, asp.net, height, webpage, datalist

我在网页中有一个数据列表，并且在每一行中都有一个图像。我想将图像拉伸到每一行的高度（因为行高不同），但到目前为止无济于事。可能做一些完全错误的事情。我试图在后面的 C# 代码中设置它。

我的代码（到目前为止）是：

```
for (int j = 0; j <= dlTicksheet.Items.Count - 1; j++)
{
    Image SplitThing = (Image)dlTicksheet.Items[j].FindControl("imgSplit");
    SplitThing.Height = dlTicksheet.Items[j].Height;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:57:51.463

为此，您不需要使用 C#。只需将您的图像添加`background-image`为 html 标记。并将其更改`background-size`为`100%`. 所以它会延伸到父容器

```
background-size:100%; 
```

# asp.net - 操作无法完成 打开 Microsoft Visual Studio 应用程序时访问被拒绝

> ID：16101877
> 
> 赞同：0
> 
> 时间：2013-04-19T09:51:50.520
> 
> 标签：asp.net

我已经格式化了 comp 并安装了 windows 7 企业版。现在将显示我的 Visual Studio 2005 应用程序，同时从解决方案资源管理器源代码打开，但是当我单击设计时，它会显示错误，因为“操作无法完成访问被拒绝”

请帮我

提前谢谢shubha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:55:03.750

可能是由于新安装导致的访问权限问题，请检查所有项目文件夹及其子文件夹的给定权限。

# dynamics-crm-2011 - 如何在 CRM 2011 中使用 LinkEntity 加入两列？

> ID：16101883
> 
> 赞同：0
> 
> 时间：2013-04-19T09:52:22.230
> 
> 标签：dynamics-crm-2011, crm

我正在使用链接实体加入两个实体：

```
LinkEntity pricelevelentity = new LinkEntity();
pricelevelentity.JoinOperator = JoinOperator.Inner;
pricelevelentity.LinkFromEntityName = "product";
pricelevelentity.LinkFromAttributeName = "productid";

pricelevelentity.LinkToEntityName = "productpricelevel";
pricelevelentity.LinkToAttributeName = "productid";
query.LinkEntities.Add(pricelevelentity); 
```

以上是在 ProductId 属性上加入 Product 和 ProductPriceLevel。我还想在 ProductPriceLevel.DefaultUomId 上添加到联接 Product.uomid

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:13:32.607

如果您尝试为链接/连接的实体返回一列以便能够在客户端执行额外的过滤，那么您应该使用`LinkEntity`一个`Column`属性，例如：

```
new QueryExpression("product")
{
    ColumnSet = new ColumnSet("oumid"),
    LinkEntities =
    {
        new LinkEntity("product", "productpricelevel", "productid", "productid", JoinOperator.Inner)
        {
            Columns = new ColumnSet("defaultuomid")
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:07:20.103

不确定詹姆斯的答案是如何被标记为答案的，但您不能使用链接实体加入多个列。您可以使用 James 的答案返回两个值，并在客户端执行连接，但 CRM 不支持这种类型的连接：

```
Select * FROM A INNER JOIN B ON A.OneId = B.OneId AND A.TwoId = B.TwoId 
```

如果您知道产品的 UomId 的值，则可以将其添加到 where 子句中：

```
var qe = new QueryExpression("product");
var productPriceLevel = new LinkEntity("product", "productpricelevel", "productid", "productid", JoinOperator.Inner);
qe.LinkEntities = productPriceLevel;
productPriceLevel.LinkCriteria.AddCondition("defaultuomid", ConditionOperator.Equal, product.UomId); 
```

这实际上看起来像这样：

```
Select * FROM A INNER JOIN B ON A.OneId = B.OneId AND B.TwoId = 10 -- the Value of whatever the single A.TwoId value is you're looking for. 
```

# c++ - 互斥量的返回值

> ID：16101885
> 
> 赞同：-2
> 
> 时间：2013-04-19T09:52:29.083
> 
> 标签：c++, multithreading, mutex

我有互斥锁的例子。`CurrentValue`- 成员`Class`

```
int Class::NextValue()
{
   mutex.lock();
   ++CurrentValue;
   ++CurrentValue;
   int localValue = CurrentValue;
   mutex.unlock();
   return localValue;
} 
```

我不明白为什么使用`localValue`. 下一个代码将无法正常工作？

```
 ...
   mutex.unlock();
   return CurrentValue; 
```

万一`return`不是原子的`CurrentValue`，可以在复制构造函数期间更改。但是在第一个代码示例中可以与`localValue`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:55:06.817

问题是在互斥锁的保护之外`return CurrentValue;`读取。`CurrentValue`这意味着另一个线程可能正在“同时”写入它。这是一场数据竞赛，因此是未定义的行为。

无论如何，代码应该用RAII正确编写，这个问题甚至不值得考虑。

```
int Class::NextValue()
{
   std::lock_guard<std::mutex> lock(mutex);
   ++CurrentValue;
   ++CurrentValue;
   return CurrentValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:53:47.837

`CurrentValue`可以在调用解锁和函数返回之间由另一个线程更改。但是您真正需要的是互斥锁的范围保护。

C++11：

```
int Class::NextValue()
{
   std::lock_guard<std::mutex> lock(mutex);
   ++CurrentValue;
   ++CurrentValue;
   return CurrentValue;
} // mutex unlocked on exiting this scope. 
```

# c++ - 使用 Composite_key 和按位与比较来提升 multi_index_container

> ID：16101886
> 
> 赞同：1
> 
> 时间：2013-04-19T09:52:34.833
> 
> 标签：c++, boost, multi-index, boost-multi-index

我想用 boost multi_index_container 和 composite_key 来实现这样的目标：

 `````
struct LogicalAnd {
    bool operator()(const int& argVal1, const int& argVal2) const {
        return int(argVal1 & argVal2) == argVal1;
    }
};

template<class T, class Enable = void>
class FooContainer;

template <class T>
struct FooContainer<T,typename boost::enable_if<boost::is_base_of<IFoo, T> >::type> {
    typedef multi_index_container<
            boost::shared_ptr<T>,
            indexed_by<
            hashed_non_unique<
            composite_key<
            T,
            const_mem_fun<T,int,&T::getKey1>,
            const_mem_fun<T,int,&T::getKey2>
    >,
    composite_key_equal_to<
    LogicalAnd,
    LogicalAnd
    >
    >
    >
    > shared_ptr_type;
}; 
```` 

`知道：`

 ``````
namespace CustomKey {
    typedef enum {
        VAL1 = 0x00000001,
        VAL2 = 0x00000002,
        ALL = 0xFFFFFFFF
    } type;
} 
```` 

`目标是能够执行以下操作：`

 ``````
container.find(boost::make_tuple(CustomKey::VAL1, CustomKey::ALL)); 
````  `这将允许我检索 LogicalAnd 返回 true 的所有元素。

**问题是我无法让我的 LogicalAnd 比较器与我的 multi_index_container 一起工作。**

我可以通过在composite_key_equal_to 之前添加一个composite_key_hash 来构建它：

 `````
composite_key_hash<
      boost::hash<int>,
      boost::hash<int>
> 
```` 

`但是**find**操作并没有按预期工作，所以它并没有太大变化......`

 `我搜索了 boost 文档，并尝试了各种实现，但我被大量的信息淹没了......

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T17:28:56.113

您正在为多索引使用*哈希。*

这意味着`LogicalAnd`除非在正确的哈希桶中找到某些东西，否则不会调用比较器。

`0x01`并且`0xFF`不要散列到相同的值*，即使* `0x01 & 0xFF == 0x01`. 也就是说，`LogicalAnd`将返回 true，但它从未被调用过。

您将需要一个不变的哈希函数。`LogicalAnd`，而且我认为这是不可能的。根据设计，大多数哈希函数都应该最小化不同键值之间的冲突。

恐怕你需要想出一些不同的索引系统。````````

# javascript - Select2 未通过 AJAX 获取数据

> ID：16101892
> 
> 赞同：13
> 
> 时间：2013-04-19T09:52:47.897
> 
> 标签：javascript, jquery-select2

我有以下代码应该使用 Select2 通过 AJAX 获取数据

```
$('#Organisation').select2({
    ajax: {
        url: AppURL + 'Organisations/Manage/SearchByName/',
        dataType: 'json',
        quietMillis: 100,
        data: function (term) {
            return {
                term: term
            };
        },
        results: function (data) {
            return {
                results: data
            };
        }
    }
}); 
```

如果我在搜索“O”时使用 Web Inspector 查看请求，我会得到：

```
[{"label":"Organisation 1","ID":2},{"label":"Organisation 2","ID":1}] 
```

任何想法我做错了什么？我认为结果函数中有一些不正确的地方。

我得到的错误是：`Uncaught TypeError: Cannot call method 'toUpperCase' of undefined`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-19T10:24:22.000

尝试

```
$('#Organisation').select2({
    ajax: {
        url: 'data.json',
        dataType: 'json',
        quietMillis: 100,
        data: function (term) {
            return {
                term: term
            };
        },
        results: function (data) {
          var results = [];
          $.each(data, function(index, item){
            results.push({
              id: item.ID,
              text: item.label
            });
          });
          return {
              results: results
          };
        }
    }
}); 
```

演示：[Plunker](http://plnkr.co/edit/1JdyIqqiZ7GxVQ2tCCgo)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-01T20:59:36.903

除了上述解决方案，您可以做一件事，而不是返回以下 json

`[{"label":"Organisation 1","ID":2},{"label":"Organisation 2","ID":1}]`

返回这个

`[{"text":"Organisation 1","id":2},{"text":"Organisation 2","id":1}]`

面临同样的问题，并在查看其他人提出的一些解决方案后弄清楚了这一点。

# iphone - 在 MKMapView 中的坐标之间绘制一条线

> ID：16101894
> 
> 赞同：0
> 
> 时间：2013-04-19T09:52:52.913
> 
> 标签：iphone, mkmapview, cllocation, cgcontextref

我想在..中的坐标之间画线。这`MKMapView`是代码

```
aRoute=[NSArray arrayWithObjects:[[CLLocation alloc] initWithLatitude:40.445418 longitude:-79.942714],[[CLLocation alloc] initWithLatitude:40.444469 longitude:-79.948628],[[CLLocation alloc] initWithLatitude:40.44569 longitude:-79.950388],[[CLLocation alloc] initWithLatitude:40.446967 longitude:-79.95053],[[CLLocation alloc] initWithLatitude:40.448874 longitude:-79.951715],[[CLLocation alloc] initWithLatitude:40.45134 longitude:-79.953175],[[CLLocation alloc] initWithLatitude:40.452213 longitude:-79.950895],[[CLLocation alloc] initWithLatitude:40.452564 longitude:-79.949838],[[CLLocation alloc] initWithLatitude:40.453528 longitude:-79.94641],[[CLLocation alloc] initWithLatitude:40.454109 longitude:-79.944487],[[CLLocation alloc] initWithLatitude:40.455858 longitude:-79.938618],[[CLLocation alloc] initWithLatitude:40.457224 longitude:-79.934069],[[CLLocation alloc] initWithLatitude:40.454777 longitude:-79.9932543],[[CLLocation alloc] initWithLatitude:40.453458 longitude:-79.931763],[[CLLocation alloc] initWithLatitude:40.452099 longitude:-79.931148],[[CLLocation alloc] initWithLatitude:40.451258 longitude:-79.930633],[[CLLocation alloc] initWithLatitude:40.449866 longitude:-79.929729],[[CLLocation alloc] initWithLatitude:40.448956 longitude:-79.932543],[[CLLocation alloc] initWithLatitude:40.44846 longitude:-79.934185],[[CLLocation alloc] initWithLatitude:40.447919 longitude:-79.937028], nil];
if (xapp.aRoute && xapp.aRoute .count > 0)
{

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetAlpha(context, 0.5);

    CGContextSetLineWidth(context, POLYLINE_WIDTH);

    for (int i = 0; i < xapp.aRoute .count; i++) {

        CLLocation* location =(CLLocation*) [xapp.aRoute  objectAtIndex:i];
        CLLocationCoordinate2D coordinate=CLLocationCoordinate2DMake(location.coordinate.latitude,location.coordinate.longitude);
        NSLog(@"%f%f",coordinate.longitude,coordinate.latitude);
        CGPoint point = [_mapView convertCoordinate:coordinate toPointToView:_mapView];
        if (i == 0)
            CGContextMoveToPoint(context, point.x, point.y);
        else
            CGContextAddLineToPoint(context, point.x, point.y);
         NSLog(@"%f%f",point.x,point.y);
            }

    CGContextStrokePath(context);

} 
```

这里的问题`convertCoordinate`对我不起作用..我得到`CGPoints`所有坐标的 {0,0}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:05:11.390

我从 MapView 上的画线编写代码如下...

```
-(void) updateRouteView 
{
    CGContextRef context =  CGBitmapContextCreate(nil, 
                                                  routeView.frame.size.width, 
                                                  routeView.frame.size.height, 
                                                  8, 
                                                  4 * routeView.frame.size.width,
                                                  CGColorSpaceCreateDeviceRGB(),
                                                  kCGImageAlphaPremultipliedLast);

    CGContextSetStrokeColorWithColor(context, lineColor.CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 3.0);

    for(int i = 0; i < routes.count; i++) 
    {
        CLLocation* location1 = [routes objectAtIndex:i];
        CGPoint point = [mapView convertCoordinate:location1.coordinate toPointToView:routeView];
        if(i == 0) 
        {
            CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
        }
        else 
        {
            CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
        }
    }

    CGContextStrokePath(context);

    CGImageRef image = CGBitmapContextCreateImage(context);
    UIImage* img = [UIImage imageWithCGImage:image];

    routeView.image = img;
    CGContextRelease(context);

} 
```

**看到这个演示[Serendipitor](https://github.com/mshepard/Serendipitor)**

你能从中得到一些想法吗......

# regex - 用于拆分 txt db 文件的正则表达式

> ID：16101895
> 
> 赞同：1
> 
> 时间：2013-04-19T09:52:53.907
> 
> 标签：regex, split, comma, separator

我正在编写一个 txt 数据库文件到 sql 转换器，我需要拆分行中的项目。问题是在这些项目中可能有可以包含多个逗号的脚本（它们是 db 结构中的分隔符）。好消息是，脚本嵌套在 {}-s 中，因此它使工作类似于解析 csv 文件。唯一的问题是脚本本身可以容纳更多嵌套在 {}-s 中的脚本，这会阻止我的公式工作..

txt 数据库的结构：

```
501,Red_Potion,Red Potion,0,50,,70,,,,,0xFFFFFFFF,7,2,,,,,,{ itemheal rand(45,65),0; },{},{}
502,Orange_Potion,Orange Potion,0,200,,100,,,,,0xFFFFFFFF,7,2,,,,,,{ itemheal rand(105,145),0; },{},{}
503,Yellow_Potion,Yellow Potion,0,550,,130,,,,,0xFFFFFFFF,7,2,,,,,,{ itemheal rand(175,235),0; },{},{}
504,White_Potion,White Potion,0,1200,,150,,,,,0xFFFFFFFF,7,2,,,,,,{ itemheal rand(325,405),0; },{},{} 
```

我用来匹配分隔符以进行拆分的正则表达式：

```
,(?![^{}]*\}) 
```

这可以正常工作，直到它对抗更复杂的嵌套脚本项，例如：

```
1492,Velum_Glaive,Vellum Glaive,4,20,,4500,250,,3,0,0x00004082,7,2,34,4,95,1,5,{ bonus2 bAddRace,RC_DemiHuman,80; if(getrefine()>=6) { bonus2 bSkillAtk,"LK_SPIRALPIERCE",100; bonus2 bSkillAtk,"KN_SPEARBOOMERANG",50; } if(getrefine()>=9) { autobonus2 "{ bonus bShortWeaponDamageReturn,20; bonus bMagicDamageReturn,20; }",100,2000,BF_WEAPON|BF_MAGIC,"{ specialeffect2 EF_REFLECTSHIELD; }"; } },{},{} 
```

那么如何使它只匹配 db 结构分隔符并将脚本中的逗号排除在外？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:08:58.717

这不是正则表达式的工作。正如我在评论中指出的那样，嵌套结构通常超出了正则表达式的能力。PCRE 具有递归构造`(?R)`，.NET 具有平衡组，但解决方案通常变得非常不可读和不可维护。

除此之外，您不仅需要`{}`考虑，还需要考虑脚本中的字符串和注释。你会好很多，手动解析东西。这是一个快速而肮脏的例子，它是如何使用 PHP 完成的（忽略字符串和注释！）：

```
$level = 0;
$values = array();
$start = 0;
for($i = 0; $i < strlen($str); $i++)
{
    switch($str[$i])
    {
    case ",":
        if(!$level) {
            $values[] = substr($str, $start, $i-$start);
            $start = $i+1;
        }
        break;
    case "{":
        $level++;
        break;
    case "}":
        $level--;
        if($level < 0) trigger_error("unexpected }");
        break;
    }
}
if($level > 0) trigger_error("missing }");
$values[] = substr($str, $start); 
```

您已经可以看到，您基本上最终得到了一个更简单的脚本解析器。

# javascript - 在悬停/单击时更改内容

> ID：16101897
> 
> 赞同：0
> 
> 时间：2013-04-19T09:53:01.983
> 
> 标签：javascript, jquery

我有一个客户想要在他们的网站上使用特定功能，但我有点难过如何做到这一点。

基本上，如果您查看他们[现有的网站](http://www.robotwp.com/overseas/)，您可以看到 4 个圆形按钮。

他们想要的是当有人将鼠标悬停（或点击，如果使用 iPad）在下面的文本行中的一个按钮上时，当前显示为“专业手语翻译、咨询和物流”，更改为其他内容。

例如，如果他们将鼠标悬停在“给我们打电话”按钮上，“专业手语翻译、咨询和物流”将变为“给我们打电话：+44(0) 999 999 9999”

最好的方法是什么？

**编辑**

我目前正在使用我在另一个线程上找到的这段代码；

```
$('.button').bind('hover', function() {
    // suppose <a id='about' class='menu'> tag
    $('p.tagline').hide(); // hide all texts
    $('#tag-' + this.id).show(); // show the one with id=text-about
}); 
```

哪个工作正常。

有没有办法让它在点击或悬停时工作，并可能淡入/淡出而不是仅仅切换？

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:57:56.127

有两个 jquery 事件适合您：[`mouseenter`](http://api.jquery.com/mouseenter/)和[`mouseleave`](http://api.jquery.com/mouseleave/)

您可以轻松捕获它们并在您想要的位置添加/删除文本。例如：

```
$('element').mouseenter(function() {
    //do something
}).mouseleave(function() {
    //do something
});; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:04:02.930

你可以这样做：

```
var texts = {
    default: 'Professional Sign Language Interpreting, Consultancy, and Logistics',
    email: 'Email text',
    phone: 'Call us +11111111111',
    twitter: 'Twitter adfa df asd',
    about: 'About us text here'
},

$text = $('.content p');
$('.button').on('mouseover click', function () {
    $text.text(texts[$(this).data('class')]);
})
.on('mouseout', function() {
    $text.text(texts.default);
}); 
```

[http://jsfiddle.net/NJvFP/](http://jsfiddle.net/NJvFP/)

因此，您将所有文本存储在对象中并使用数据属性引用相应的消息。

对于 iPad，您还必须处理使用单击按钮时的情况，如果随后他单击其他位置，则您必须将默认文本切换回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:11:20.747

为电话按钮添加 jQuery 代码，`hover`如下所示在您的 jQuery 代码中。

```
$(document).ready(function(){

$("div.phone").hover(
  function () {
    $("div.homepage-content p").html("Call Us : +44(0) 999 999 9999");
  },
  function () {
    $("div.homepage-content p").html("Professional Sign Language Interpreting, Consultancy, and Logistics");
  }
);

}); 
```

类似`hover`地为其他 3 个带有指定文本的按钮添加功能，以显示`html()`在`$("div.homepage-content p").html("Call Us : +44(0) 999 999 9999");`

# asp.net - 包括 datetime.now

> ID：16101898
> 
> 赞同：1
> 
> 时间：2013-04-19T09:53:02.397
> 
> 标签：asp.net, datetime, insert

我有一个注册页面，当用户单击提交按钮时，注册表中的数据将存储在数据库中。我还需要插入用户创建帐户的日期。如何在我的插入查询中包含“datetime.now”...

下面是我的代码：

```
private void ExecuteInsert(string streetAdr, string city, string state, int countryID, string zipCode, string TelNum, string FaxNum)
    {
        SqlConnection connectionString = new SqlConnection(GetConnectString());
        try
        {
            connectionString.Open();

            // Insert Address
            string addressQuery = "Insert into Address (StreetAdd, City, State, CountryID, ZipCode, TelNum, FaxNum)" +
                              "VALUES (@stAd, @CityAdr, @StateAdr, @IDcountry, @zCode ,@Tnumb ,@Fnumb)";

            SqlCommand addressCmd = new SqlCommand(addressQuery, connectionString);
            SqlParameter[] address = new SqlParameter[7];

            address[0] = new SqlParameter("@stAd", SqlDbType.VarChar, 100);
            address[1] = new SqlParameter("@CityAdr", SqlDbType.VarChar, 100);
            address[2] = new SqlParameter("@StateAdr", SqlDbType.VarChar, 100);
            address[3] = new SqlParameter("@IDcountry", SqlDbType.Int, 100);
            address[4] = new SqlParameter("@zCode", SqlDbType.VarChar, 100);
            address[5] = new SqlParameter("@Tnumb", SqlDbType.VarChar, 100);
            address[6] = new SqlParameter("@Fnumb", SqlDbType.VarChar, 100);

            address[0].Value = streetAdr;
            address[1].Value = city;
            address[2].Value = state;
            address[3].Value = countryID;
            address[4].Value = zipCode;
            address[5].Value = TelNum;
            address[6].Value = FaxNum;

            for (int i = 0; i < address.Length; i++)
            {
                addressCmd.Parameters.Add(address[i]);
            }
            addressCmd.CommandType = CommandType.Text;
            addressCmd.ExecuteNonQuery();

        }
        catch (Exception ex)
        { 

        }
        finally 
        {
            connectionString.Close();
        }
    } 
```

datetime.now 应该放在哪里？谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:55:38.657

您需要在数据库中构建一个日期列，并将日期作为参数传递给上面的其他字段，或者在数据库中为该字段提供默认值。

```
private void ExecuteInsert(string streetAdr, string city, string state, int countryID, string zipCode, string TelNum, string FaxNum)
    {
        SqlConnection connectionString = new SqlConnection(GetConnectString());
        try
        {
            connectionString.Open();

        // Insert Address
        string addressQuery = "Insert into Address (StreetAdd, City, State, CountryID, ZipCode, TelNum, FaxNum, TransactioNDate)" +
                          "VALUES (@stAd, @CityAdr, @StateAdr, @IDcountry, @zCode ,@Tnumb ,@Fnumb, @Date)";

        SqlCommand addressCmd = new SqlCommand(addressQuery, connectionString);
        SqlParameter[] address = new SqlParameter[8];

        address[0] = new SqlParameter("@stAd", SqlDbType.VarChar, 100);
        address[1] = new SqlParameter("@CityAdr", SqlDbType.VarChar, 100);
        address[2] = new SqlParameter("@StateAdr", SqlDbType.VarChar, 100);
        address[3] = new SqlParameter("@IDcountry", SqlDbType.Int, 100);
        address[4] = new SqlParameter("@zCode", SqlDbType.VarChar, 100);
        address[5] = new SqlParameter("@Tnumb", SqlDbType.VarChar, 100);
        address[6] = new SqlParameter("@Fnumb", SqlDbType.VarChar, 100);
        address[7] = new SqlParameter("@Date", SqlDbType.DateTime);

        address[0].Value = streetAdr;
        address[1].Value = city;
        address[2].Value = state;
        address[3].Value = countryID;
        address[4].Value = zipCode;
        address[5].Value = TelNum;
        address[6].Value = FaxNum;
        address[7].Value = DateTime.Now();

        for (int i = 0; i < address.Length; i++)
        {
            addressCmd.Parameters.Add(address[i]);
        }
        addressCmd.CommandType = CommandType.Text;
        addressCmd.ExecuteNonQuery();

    }
    catch (Exception ex)
    { 

    }
    finally 
    {
        connectionString.Close();
    }
} 
```

# javascript - Extjs4 中的网格窗格没有显示任何内容？

> ID：16101904
> 
> 赞同：0
> 
> 时间：2013-04-19T09:53:17.593
> 
> 标签：javascript, extjs

我尝试写一个网格面板，但响应是空白的。app.js 是：

```
//create panel
Ext.create('Ext.grid.Panel', {
    renderTo: Ext.getBody(),
    store: userStore,
    width: 400,
    height: 200,
    title: 'Application Users',
    columns: [{
        text: 'Name',
        width: 100,
        sortable: false,
        hideable: false,
        dataIndex: 'name'
    }, {
        text: 'Email Address',
        width: 150,
        dataIndex: 'email',
        hidden: true
    }, {
        text: 'Phone Number',
        flex: 1,
        dataIndex: 'phone'
    }]
}); 
```

以及模型和商店：

```
Ext.define('User', { 
     extend: 'Ext.data.Model',
     fields: [ 'name', 'email', 'phone' ]
});

// create store
var userStore = Ext.create('Ext.data.Store', {
     model: 'User',
     data: [{
          name: 'Lisa',
          email: 'lisa@simpsons.com',
          phone: '555-111-1224'
     }, {
          name: 'Bart',
          email: 'bart@simpsons.com',
          phone: '555-222-1234'
     }]
}); 
```

我试过了，但浏览器是空白的，没有警告信息。为什么页面是空白的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:57:41.497

您的代码正确且工作正常

```
Ext.onReady(function() {
    Ext.define('User', { 
         extend: 'Ext.data.Model',
         fields: [ 'name', 'email', 'phone' ]
    });

    // create store
    var userStore = Ext.create('Ext.data.Store', {
         model: 'User',
         data: [{
              name: 'Lisa',
              email: 'lisa@simpsons.com',
              phone: '555-111-1224'
         }, {
              name: 'Bart',
              email: 'bart@simpsons.com',
              phone: '555-222-1234'
         }]
    });

    Ext.create('Ext.grid.Panel', {
        renderTo: Ext.getBody(),
        store: userStore,
        width: 400,
        height: 200,
        title: 'Application Users',
        columns: [{
            text: 'Name',
            width: 100,
            sortable: false,
            hideable: false,
            dataIndex: 'name'
        }, {
            text: 'Email Address',
            width: 150,
            dataIndex: 'email',
            hidden: true
        }, {
            text: 'Phone Number',
            flex: 1,
            dataIndex: 'phone'
        }]
    });
}); 
```

[检查演示](http://jsfiddle.net/r3rrA/)

也许您没有使用 Ext.onReady 或者您可以在调试器的控制台中检查一些 javascript 错误

# html - 启用 HTML 表格特定边框？

> ID：16101906
> 
> 赞同：0
> 
> 时间：2013-04-19T09:53:28.793
> 
> 标签：html

如何启用 HTML 表格的特定边框，比如
只有左垂直、
只有右垂直或
只有上水平或
只有下水平或任何？

```
A-------------------B-----------------C
|                   |                 |   
|                   |                 | 
D-------------------E-----------------F 
|                   |                 | 
|                   |                 | 
G-------------------H-----------------I 
```

我希望仅启用`BEH`没有任何 css 的行，但仅启用`table`, `tr`, `td`标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:54:49.723

[http://jsfiddle.net/8M2wp/1033/](http://jsfiddle.net/8M2wp/1033/)

```
table {
    border-top: double;
    border-bottom: double;
    border-right: blank
}
thead, tbody, tfoot {
    border-top: solid;
    border-bottom: solid
} 
```

[看到这里](http://www.w3.org/Style/Tables/examples.html)更多的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:42:32.823

利用

```
<table rules=cols> 
```

该[`rules`属性](http://www.w3.org/TR/REC-html40/struct/tables.html#adef-rules)控制单元格之间的边框，并且此设置仅在列之间设置。

这回答了所提出的问题，但通常使用 CSS 会更好。这样，您还可以控制边框的类型、宽度和颜色。在 HTML 中，您只能设置颜色，甚至只能使用非标准属性，例如`<table rules=cols bordercolor=red frame=void>`.

# perl - 当记录由 utf-8 和 ascii 组成时，在 perl 中固定记录大小文件

> ID：16101914
> 
> 赞同：0
> 
> 时间：2013-04-19T09:53:58.577
> 
> 标签：perl

我想使用 perl 创建一个具有固定记录的文件，其中每个记录可能由 ASCII 或 Unicode 字符组成，以便我可以将该文件评估为随机访问文件。

在记录中，我有三个字符串 str1、str2 和 str3，最大字符数分别为 100、60、40，任何字符串都可能包含 ASCII 或 UTF-8 字符。

我正在使用下面的 perl 打包/解包功能，但无法获得预期的结果。

```
open (FILE,">>:utf8",filename) or die "can't open\n";
$record=pack("U100 U60 U40",$str1,$str2,$str3);
print FILE $record; 
```

读这个

```
open (FILE,"<:utf8",filename) or die "can't open\n";
seek(FILE,$buffer,200);
@data=unpack("U100 U60 U40",$buffer);
print @data; 
```

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:08:22.330

首先，US-ASCII 是 UTF-8 的子集，因此“ASCII 或 UTF-8”与“UTF-8”相同。

其次，“字符”是字符串的一个元素。它们不是一种存储格式，也没有特定的大小，因此字段长度不能以字符来衡量。这些字段可以以*字节*、*Unicode 代码点*或许多其他单位来衡量，但不能以*字符*为单位。

如果字段长度以字节为单位，则所需的填充量会根据编码文本的大小而有所不同，因此您需要在打包之前进行编码。

```
use Encode qw( encode_utf8 );

open(my $fh, '>>:raw',  $filename)
   or die("Can't open $filename: $!\n");

my $record = pack 'a100 a60 a40', map encode_utf8($_), $str1, $str2, $str3;
print $fh $record; 
```

如果在 Unicode 代码点中测量字段长度的可能性很小，则需要在打包后进行编码。

```
open(my $fh, '>>:utf8',  $filename)
   or die("Can't open $filename: $!\n");

my $record = pack 'a100 a60 a40', $str1, $str2, $str3;
print $fh $record; 
```

（在这两种情况下，都使用`a`NUL`A`打包，以及空格打包。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:19:30.967

您对包模板的解释并不准确。您需要`a`字节字符串的模板。您还必须对字符串进行编码才能从中获取字节。

以下脚本创建两条记录并读回第二条记录。字符串在给定大小处被截断，即可能在多字节字符的中间。

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

use Encode;

my $filename = 'utf.txt';
my @sizes    = (8, 4, 2);
my $mask     = join ' ', map "a$_", @sizes;
my $sum      = 0;
$sum        += $_ for @sizes;

sub record {
    return map shift(@_) x ($_ + 10), @sizes;
}

sub output {
    open my $FILE, '>>', $filename or die "Can't open $filename: $!";
    my $record = pack $mask, map { Encode::encode('utf8', $_) } record(@_);
    print $FILE $record;
    close $FILE;
}

sub input {
    my $n = shift;
    open my $FILE, '<', $filename or die "Can't open $filename: $!\n";
    warn  $sum * ($n - 1);
    seek $FILE, $sum * ($n - 1), 0;
    read $FILE, my ($buffer), $sum;
    my @items = unpack $mask, $buffer;
    say for @items;
}

use utf8;
output(qw/ø ¶ đ/);
output(qw/Č á ∀/);
input(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:24:40.277

[Parse::](http://metacpan.org/pod/Parse%3a%3aFixedLength) FixedLength

模块对此非常有用，这样的内容应该有助于解释：

```
use Parse::FixedLength;
my $parser = Parse::FixedLength->new([
    str1    =>  100,
    str2    =>  60,
    str3    =>  40,
]);  
open (FILE,"<:utf8",filename) or die "can't open\n";
while (my $line = <FILE>) {
  my %vals = ('str1' => $str1,
              'str2' => $str2,
              'str3' => $str3,
             );
  print = $parser->pack(\%vals);
}
close FILE; 
```

# java - Solr 未在 id 搜索中返回文档

> ID：16101915
> 
> 赞同：1
> 
> 时间：2013-04-19T09:54:00.590
> 
> 标签：java, solr, lucene, solrj

我正在使用 solr 4.2.x 的分布式搜索，它似乎在其中一个索引上崩溃。错误是 NullPointerException，我已针对以下情况进行了调试

假设我有两个包含文档的索引：

*   index1 具有唯一文档 id=idA 的文档

*   index2 具有唯一文档 id=idB 的文档

当我使用 ids 参数搜索索引时，其中一个不会返回文档 - 即使它在那里（来自管理面板的查询会返回它）。

我执行的请求：

```
http://solr_server:8983/solr/index1/select?ids=idA
http://solr_server:8983/solr/index2/select?ids=idB 
```

其中一个没有返回请求的文件。

模式的 id 部分如下所示（并且在两个索引中都相同）：

```
<fields>

<types>
<fieldType name="textGeneral" class="solr.TextField">
            <analyzer type="index">
                <tokenizer class="solr.StandardTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
        </fieldType>

</types>

...
<field name="solrDocumentNumber" type="textGeneral" indexed="true" stored="true" required="false"/>
...
</fields>

<uniqueKey>solrDocumentNumber</uniqueKey> 
```

我使用标准的 requestHandlers。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:33:22.133

已分析的、标记化的[TextField](http://lucene.apache.org/solr/api-4_0_0/org/apache/solr/schema/TextField.html)不是唯一键的很好表示。它可能导致不可预测的结果。至少，您应该使用[StrField](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/StrField.html)或更好的[UUIDField](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/schema/UUIDField.html)为您的键创建一个字段。Apache wiki 中有一些关于[在 SOLR 中使用 Unique Keys 的](http://wiki.apache.org/solr/UniqueKey#Unique_key_composition)好建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:18:40.887

搜索存储文档 ID 号的字段

```
http://solr_server:8983/solr/index1/select?q=solrDocumentNumber:idA 
```

# php - 如果用户已登录 Google Apps，则在网络应用中自动登录

> ID：16101920
> 
> 赞同：2
> 
> 时间：2013-04-19T09:54:15.963
> 
> 标签：php, openid, lightopenid

我想知道实现自动登录到我的网站的最佳方式。我所说的自动是这样的：

我已经登录了谷歌。我现在去我的网站和它的登录页面。我希望网络应用程序检测到我已经登录 Google 并绕过整个登录页面，而不是单击链接以使用 Google 登录。

我们如何使用 PHP 和 lightopenid 做到这一点？

# jquery - 动态设置 jQuery 滑块值

> ID：16101925
> 
> 赞同：2
> 
> 时间：2013-04-19T09:54:26.787
> 
> 标签：jquery, jquery-ui, user-interface, slider

如何动态设置滑块值？这是我当前的代码：

```
 $( "#slider-range-max" ).slider({
  range: "max",
  min: 1,
  max:61,

  step: 1,
  slide: function( event, ui ) {

    var val = ui.value;
   if(val > 10){

     ui.value = ui.value + 3;

  //   $(this).slider('option','max',500);

} 
```

之后，该值仅更改一次（值从 10 反弹到 13 和 14、15、16 ......之后），但我需要 10、13、16、19 等。我在做什么错？当我尝试 ui.value = ui.value*ui.value 时效果很好（121、144、169、196 等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:09:32.970

你有没有忘记用 "}" 关闭你的 if 语句？

编辑：你有没有尝试过这样的事情：

```
$("#slider").slider('value',50); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T17:27:19.060

The way Pak suggested will recall the slider constructor, which will not be smooth.

The correct way, according to [jQuery UI Docs](http://api.jqueryui.com/slider/) , is:

```
$("#slider").slider('option','value',50); 
```

# iphone - 将信息从弹出表传递到 Web 视图

> ID：16101926
> 
> 赞同：0
> 
> 时间：2013-04-19T09:54:31.317
> 
> 标签：iphone, ios, xcode, uitableview, uiwebview

我正在使用`ViewController`with `Button`for `PopOverView`，在 Popover 视图中我加载了一个仅由代码创建的表，而不是`TableController`我的情节提要中的 a 。

所以我可以使用弹出窗口，我看到一个包含从 plist 获取的内容的表格，但不能将信息从选定的行发送到 ViewController 中的 web 视图。这里的代码：

我的`ViewController.m`（IBAction）产生弹出框：

```
- (IBAction)popover:(id)sender {

    SAFE_ARC_RELEASE(popover); popover=nil;

    //the controller we want to present as a popover
    RADTwitterPicker *controller = [[RADTwitterPicker alloc] initWithStyle:UITableViewStylePlain];
    controller.delegate = self;
    popover = [[FPPopoverController alloc] initWithViewController:controller];
    popover.tint = FPPopoverRedTint;
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        popover.contentSize = CGSizeMake(380, 500);
    }
    else {
        popover.contentSize = CGSizeMake(280, 300);
    }
    [popover presentPopoverFromView:sender];
} 
```

在这里我说要弹出来显示`RADTwitterPicker.m`，我的弹出窗口打开，我可以从表中选择，现在我正在尝试将信息从第一个控制器发送`PopOver`到：`WebView`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if([self.delegate respondsToSelector:@selector(selectedTableRow:)]) {

        RADViewController *detailVC = [[RADViewController alloc] initWithNibName:nil bundle:nil];
        detailVC.twitter = [tweetList objectAtIndex: indexPath.row];
        [self.delegate selectedTableRow:indexPath.row];
    }
} 
```

`RADViewController.m`并使用此方法阅读此内容：

```
- (void)tweetView {
    [twitWidg addSubview: twitLoad];
    [twitWidg loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[twitter objectForKey:@"web"]]]];
    [twitWidg reload];
    twTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(twiterLoad) userInfo:nil repeats:YES];

}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self tweetView];
}

- (void)selectedTableRow:(NSUInteger)rowNum {
    NSLog(@"SELECTED ROW %d",rowNum);
    [self tweetView];
    [popover dismissPopoverAnimated:YES];
} 
```

但是当弹出窗口被解除时，我什么都看不到我的`WebView`......有人有任何想法来解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:45:43.470

重新阅读您的帖子后，我看到了您错过的内容。

以下是我的修复建议：

A. 修改您的委托以返回 twitter 对象而不是 indexPath.row。这是你的新作品：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if([self.delegate respondsToSelector:@selector(selectedTableRow:)]) {

        [self.delegate selectedTableRow:[tweetList objectAtIndex:indexPath.row]];
    }
} 
```

确保修改您的代表的声明以反映这一点。（返回 twitter 对象而不是行号）。

B. 这是你的新的：

```
- (void)selectedTableRow:(WhateverTwitterClassIs *)twitter {

        [popover dismissPopoverAnimated:YES];
       [twitWidg addSubview: twitLoad];
        [twitWidg loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[twitter objectForKey:@"web"]]]];
        [twitWidg reload];
        twTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(twiterLoad) userInfo:nil repeats:YES];

} 
```

# linux - 蓝牙 PCM 通讯失灵

> ID：16101928
> 
> 赞同：0
> 
> 时间：2013-04-19T09:54:33.097
> 
> 标签：linux, command-line, bluetooth, dbus, headset

我有以下系统：

蓝牙耳机 <-- HFP、HSP --> marvell 蓝牙 <-- PCM --> gsm 调制解调器

**我知道的：**

*第一部分作品：*

> rfcomm0: 00:06:C6:36:02:92 -> 00:1A:7D:D0:04:6D 通道 1 已连接 [reuse-dlc release-on-hup tty-attached]

和

> l2ping 00:1A:7D:D0:04:6D Ping: 00:1A:7D:D0:04:6D from 00:06:C6:36:02:92 (data size 44) ... 4 bytes from 00: 1A:7D:D0:04:6D id 0 时间 7.99ms 4 字节从 00:1A:7D:D0:04:6D id 1 时间 20.35ms 4 字节从 00:1A:7D:D0:04:6D id 2 时间16.65ms

*第二部分也有效，因为：*

我测量了信号，

在连接数据线的情况下，我有回声。

**但我无法通过耳机-PCM 系统讲话。**

*您知道错误可能在哪里吗？我确定我必须更改设置上的某些内容。*

**我的想法：**

如果我在嵌入式 Linux 上打开调制解调器端口并开始通话，我的耳机中什么也听不到。然而，似乎我有一个用于 HFP 的开放 rfcomm 串行接口，但我没有创建 SCO 连接，也许蓝牙芯片不会转发我的 PCM。

# javascript - 获取使用 AJAX 动态生成的 div 的属性

> ID：16101937
> 
> 赞同：2
> 
> 时间：2013-04-19T09:54:52.827
> 
> 标签：javascript, jquery, ajax

我想获取使用 AJAX 动态生成的 div 的属性。这是我尝试过的：

```
$.getJSON('/json/layout', function(data) {
     $('#layout').append(data);
}); 
```

这里`data`AJAX 的返回类似于：

```
<div id="my_div" name="my_name"></div> 
```

我检查了 Chrome 的“检查元素”，似乎`#my_div`已生成并附加到`#layout`. 但是当我打印 with 的名字`#my_div`时

```
console.log($('#my_div').attr('name')); 
```

我进入`undefined`控制台。我是 javascript 新手，所以不熟悉 JS 和 AJAX 的基础知识。我真的可以得到动态生成的元素的属性吗？如果没有，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:57:02.230

试试这个：

```
$(data).attr('name') 
```

编辑：

```
$.getJSON('/json/layout', function(data) {
    $('#layout').append(data);
    console.log($('#my_div').attr('name')); // will log result
    console.log($(data).attr('name')); // same
});

console.log($('#my_div').attr('name')); // will log undefined 
```

# jquery - 我需要多次调用 $.getScript 吗？

> ID：16101940
> 
> 赞同：1
> 
> 时间：2013-04-19T09:55:03.020
> 
> 标签：jquery, getscript

我有两个 JavaScript 文件：

1.  scripts.js - 完成所有`onload`设置工作并将事件处理程序附加到控件
2.  map.js - 定义一个`MAP`小部件

当文档加载时，scripts.js`MAP`通过加载 map.js 并调用来初始化一个对象`initMap`：

```
/** ON DOCUMENT LOAD **/
$(document).ready(function() {

  $.getScript('lib/map.js', function() {
    /** Generate a new map **/
    MAP = initMap(10,mapDefault);
  }); 
```

有一个按钮允许用户重新生成地图，它也调用`initMap`. 例如：

```
$('input#regenerateButton').click(function() {
  $.getScript('lib/map.js', function() {
    MAP = initMap($('input#mapSize').val(),mapDefault);
  });
}); 
```

我是否需要再次重新加载脚本 map.js，因为此时它可能已经加载了？

这个问题之前已经被问[过](https://stackoverflow.com/questions/8930017/understanding-jquery-getscript)，但是我不相信关于多次调用的部分`$.getScript`得到了回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:41:02.497

默认情况下，该`$.getScript()`函数会破坏缓存 - 这意味着每次执行时都会再次获取文件。这仅在 js 文件不是静态 js 文件时才有用，即如果它包含一些服务器端代码（例如 PHP），这些代码根据会话可用的一些其他数据自定义数据。

如果您有一个静态 js 文件，看起来您有，您可以通过执行禁用此行为

```
$.ajaxSetup({
  cache: true
}); 
```

（请注意，这对于所有 ajax 调用都是全局的）。

`$.getScript()`如果您的脚本是静态文件，则无需重新加载脚本。如果你不尝试重新加载它，也不需要启用 AJAX 缓存。

有一个例外是不需要重新加载脚本，即使它是静态的：如果 MAP 脚本存储了一些在您执行时不会重置的信息`initMap`。那将是糟糕的设计，但在脚本中可能就是这种情况。

# android - 转接当前通话

> ID：16101944
> 
> 赞同：0
> 
> 时间：2013-04-19T09:55:08.270
> 
> 标签：android

是否可以以编程方式启动当前活动呼叫的呼叫转移？

我不是说直接这样做，我看不出这是一个好主意，甚至不可能，但就像当我发起呼叫时，用户被发送到内置拨号器应用程序以拨打电话，我想知道是否有类似的转接电话功能。

PS：这个还有另一个名字，呼叫转移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:07:18.930

很抱歉，您无法通过您的应用程序执行此操作。我认为这样做的唯一方法是创建自己的自定义构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-31T05:04:33.453

在设备上收到呼叫后，您无法进行呼叫转移原因：因为呼叫转移是由网络提供商而不是您的设备完成的。

流程： - 首先您通过使用：MMI 代码 21 向网络提供商请求呼叫转移。 - 网络提供商将注册您的请求并更改您设备中的呼叫转移设置。- 当新的呼叫网络提供商将直接转发时，您的设备不会收到任何内容。 [如图所示](https://i.stack.imgur.com/mGkRU.png)

# c++ - 在 C++ 中使用深度优先搜索在图形数据结构中查找所有可能的路径

> ID：16101945
> 
> 赞同：1
> 
> 时间：2013-04-19T09:55:10.587
> 
> 标签：c++, data-structures, graph

假设你有一个 Graph，`G`你需要做的是找到从到的*所有可能的路线*。此外，您需要以正确的顺序打印所有路线。你会怎么做？发现节点并不难，它以正确的顺序打印它们并获得距离。`start_node``finish_node`

```
template <class VertexType>
void DepthFirstSearch(Graph<VertexType> routes, VertexType from_vertex, VertexType to_vertex) 
{
    stack<VertexType> mystack;
    queue<VertexType> vertexQ;
    int total_weight = 0;
    int found_count = 0;

    /*stringstream ss;*/

    bool found = false;
    VertexType vertex;
    VertexType item;

    routes.clearMarks();

    // size_t i = 0;
    // size_t j = 0;

    mystack.push(from_vertex); // Adding Location to stack

    do 
    {   
        vertex = mystack.top(); // Get top location
        mystack.pop(); // Getting rid of top location
        if (vertex == to_vertex) // If location == destination, then stop;
        {
            found = true;
            found_count++;
        } else {
            if (!routes.isMarked(vertex)) // If route has not been traveled to
            {
                routes.markVertex(vertex); // Mark place
                routes.goToVertices(vertex, vertexQ); // Add adjacent positions
                while (!vertexQ.empty()) // While there are still positions left to test
                {

                    item = vertexQ.front(); // Get top position
                    vertexQ.pop(); // Get rid of top position from stack
                    if (!routes.isMarked(item)) // If top position is not marked,
                        mystack.push(item); // Add to-visit stack
                }
            }
        }
    } while (!mystack.empty());

    if(!found) 
    {
        std::cout << "Distance: infinity" << std::endl;
        std::cout << "Rout:" << std::endl;
        std::cout << "None" << std::endl;
    } else {
        std::cout << "Found this many times: " << found_count << std::endl;
    }
} 
```

理想情况下，如果有人输入`A B`，那么输出示例将是：

```
distance: 100
A to C, 50
C to D, 40
D to B, 10

distance: 10
A to B, 10 
```

请注意，两者`C`都有`D`它们可以去的其他节点，但是即使深度优先算法会探索它们，它们的距离也不会被考虑在内。这是一个单向图，输入来自文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:55:06.397

您需要跟踪您已经通过的顶点，并将该列表用作路径。

然后你有两个选择：

*   找到路径时打印出顶点列表，然后回溯到下一个可能的分支，
*   或将路径复制到另一个容器，回溯并在最后打印出整个路径列表

这两种方法都是正确的，具体取决于您希望在路径上执行哪种处理。

为了能够正确回溯，您需要知道当前路径上的每个顶点还有哪些相邻顶点需要访问。您当前的算法通过将所有顶点推入`mystack`. 我建议在 中使用迭代器而不是顶点，并让您的图形对象从方法中`mystack`返回此类迭代器。`goToVertices`

由于我不知道您是否有该类可用于您的图形，因此我将使用队列堆栈而不是按级别对顶点进行分组`mystack`。每个队列代表覆盖 dfs 的树的一个级别。

```
deque<queue<VertexType> > mystack;
queue<VertexType> vertexQ;
int total_weight = 0;
int found_count = 0;

VertexType vertex;

routes.clearMarks();

// size_t i = 0;
// size_t j = 0;

vertexQ.push(from_vertex);
mystack.push_front(vertexQ); // Adding Location to stack

do 
{   
    vertexQ = mystack.front(); // Get top location
    if (vertexQ.empty()) {
        mystack.pop_front();
        mystack.front().pop();
        continue;
    }
    if (vertexQ.front() == to_vertex) // If location == destination, then stop;
    {
        // save path: loop on all the queues from mystack and print front.    
        for (stack<queue<VertexType>>::const_reverse_iterator it = mystack.rbegin();
               it != mystack.rend();  ++it){
            // save or process path vertices
            cout << it->front() << endl;
        }               
        // backtrack
        mystack.pop_front();
        mystack.front().pop();
    } else {
        if (!routes.isMarked(vertexQ.front())) // If route has not been traveled to
        {
            routes.markVertex(vertexQ.front()); // Mark place
            mystack.push_front(
                routes.goToVertices(vertexQ.front())); // Get adjacent vertices
        }
    }
} while (!mystack.empty()); 
```

# ios - 无法使用 objectforkeys 从 json 的 nsdictionary 获取数据

> ID：16101946
> 
> 赞同：-2
> 
> 时间：2013-04-19T09:55:14.087
> 
> 标签：ios, nsdictionary, nsjsonserialization

我在 NSDictionary 中得到一个 json。如果我做 NSDictionary 的 NSLog，我正在看这个 json。

```
NSLog->>  {"login":{"pass":"yeeply123","user":"Yeeply"}} 
```

我在这里得到地方字典：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSError *thisError;

    NSDictionary *parsedObject = [NSJSONSerialization JSONObjectWithData:myConnectionData options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments error:&thisError];
    NSLog(@"Prueba %@", parsedObject);
    [self.delegate requestJSONFinishedWithParsedObject:placesDictionary];
} 
```

我将它作为 placesDictionary 传递给其他函数但是当我尝试使用这句话从这个 NSDictionary 获取数据时：

```
 NSDictionary *userDictionary= [placesDictionary objectForKey:@"login"];
 NSString *pass=  [userDictionary objectForKey:@"pass"]; 
```

我收到这样的错误：

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x7172f10 
```

我不知道发生了什么，我在其他项目中做过，它有效..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:13:56.030

您的服务器未发送有效的 JSON。你从服务器得到的是

```
"[{\"pass\":\"example23\"},{\"user\":\"example\"}]"

```

这是一个 JSON*字符串*（包含 JSON 数据）。所以顶层对象不是字典或数组，根据JSON规范是无效的。

你的来电

```
[NSJSONSerialization JSONObjectWithData:myConnectionData:...] 
```

成功只是因为该`NSJSONReadingAllowFragments`选项，否则它将失败。

字符串本身包含有效的 JSON 数据，因此您可以对字符串的内容应用另一个 JSON 解析操作：

```
NSString *parsedObject = [NSJSONSerialization JSONObjectWithData:myConnectionData options:NSJSONReadingAllowFragments error:&thisError];
NSData *innerJson = [parsedObject dataUsingEncoding:NSUTF8StringEncoding];
NSMutableArray *innerObject = [NSJSONSerialization JSONObjectWithData:innerJson options:NSJSONReadingMutableContainers error:&thisError]; 
```

现在`innerObject`是两个字典的数组，您可以像这样访问它们：

```
NSString *pass = [[innerObject objectAtIndex:0] objectForKey:@"pass"]; 
```

（当然更好的解决方案是修复服务器以发送正确的 JSON。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:08:29.943

您的 JSON 是一个字典数组。确保它`placesDictionary`是一个字典，从错误看来它是一个字符串。您的代码中没有错误。

编辑：

从日志中，placesDictionary 是一个数组。

```
NSDictionary *dict = placesDictionary[0];
NSString *itemToPassBack = dict[@"pass"]; 
```

# java - Android 服务调用 AsyncTask

> ID：16101947
> 
> 赞同：3
> 
> 时间：2013-04-19T09:55:15.443
> 
> 标签：java, android, multithreading, android-asynctask, android-service

尝试在服务中调用 asynctask 的构造函数时遇到问题。

我收到了这个错误

```
Can't create handler inside thread that has not called Looper.prepare(). 
```

我应该在 UIThread 中调用 AsyncTask 吗？

奇怪的是，它在 Jellybean 中工作，但在 ICS 中崩溃。

```
 @Override
 public void onCreate(){
    super.onCreate();
    WebRequest wr = new WebRequest(this.serviceURL, this);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
        wr.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, processType, newMap);
    else
        wr.execute(processType, newMap);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:11:39.177

从那个异常看来，您不是从 UI 线程调用它。AsyncTask 只能从 UI 线程调用。据我记得，IntentService 不在 ui 线程上运行，您正在扩展它（？）。所以你不需要使用 AsyncTask。但如果你真的想要，你可以从 Handler 中的 UI 线程做一些事情。

```
private static final Handler handler = new Handler();

private final Runnable action = new Runnable() {
    @Override
    public void run() {
        WebRequest wr = new WebRequest(this.serviceURL, this);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
            wr.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, processType, newMap);
        else
            wr.execute(processType, newMap);
    }
};

@Override
public void onCreate(){
    super.onCreate();
    handler.post(action);
} 
```

# angularjs - 使用 AngularJS 模型观察自原始版本以来的变化

> ID：16101949
> 
> 赞同：0
> 
> 时间：2013-04-19T09:55:24.820
> 
> 标签：angularjs

如果我有一个数据库对象，它是通过我的 Angular 应用程序中的 JSON 加载的，我将使用如下结构：

数据

```
{
  "colours": ["red","yellow","pink","green","purple","orange","blue"]
} 
```

控制器

```
angular.module('MyApp').controller('Page_controller',function($scope,$http) {
  $scope.addColour = function(e) {
    $scope.data.colours.push('')
  };

  $scope.removeColour = function(e) {
    var colour_index = $scope.data.colours.indexOf(the_colour_name);
    $scope.data.colours.splice(colour_index,1);
  }

  $http.json("/database/query.json").success(function(data) {
    $scope.data = data;
  })
}) 
```

/views/display.html

```
<div>
  <ul>
    <ng-include="'/templates/colour.html'" ng-repeat="colour in data.colours"></ng-include>
    <li><a href="" ng-click="addColour()" required>Add a colour</a></li>
  </ul>
  <div id="correct">CORRECT</div>
</div> 
```

/模板/颜色.html

```
<li><input type="text" ng-model="colour" placeholder="Name of colour"></input> <a href="" ng-click="removeColour(some_way_to_refer_to_this_colour)">X</a></li> 
```

现在我可以将颜色添加到列表中并删除它们。（是的，删除它们在上面有点夸张，我想你们都可以看到我想要做的事情！）

`#correct`我的问题是：只有当颜色是最初加载的颜色时，我才能让div 显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:31:54.373

将您的颜色数组复制到其他范围变量，例如`$scope.originalColours`.

将 ng-show 添加到您的 HTML 中：

```
<div ng-show="showCorrect">CORRECT</div> 
```

将手表添加到您的控制器：

```
$watch('data.colours', function() {
    if($scope.data.colours.length === $scope.originalColours.length) {
        // Compare arrays $scope.data.colours and $scope.originalColours.
        // If the two arrays are the same, set $scope.showCorrect
        // to true and return.
    }
    $scope.showCorrect= false;
}, true); 
```

# c++ - QMap，但没有按键排序

> ID：16101952
> 
> 赞同：3
> 
> 时间：2013-04-19T09:55:31.807
> 
> 标签：c++, qt, data-structures, qmap

我需要像 QMap 这样的结构，但没有对键进行排序，所以如果我先在那里插入项目，我可以算出这个项目将在所有其他项目之前。并在指定元素之前或之后插入对。Qt有这样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:59:58.277

`QMap`实现为树，这意味着插入顺序**无关紧要**。看来您正在寻找一个**队列**。但是，如果您需要一个可以按插入顺序迭代并同时通过特定键访问的容器，那么 Qt 没有适合您的结构。

这些可以帮助您：

*   [一个跟踪插入顺序的 std::map ？](https://stackoverflow.com/questions/1098175/a-stdmap-that-keep-track-of-the-order-of-insertion)
*   [使映射键按插入顺序排序](https://stackoverflow.com/questions/2664837/make-map-key-sorted-according-to-insert-sequence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-12T12:12:29.573

我用一个

```
QList<QPair<key,value>> 
```

为达到这个。但是查找会消耗更多时间，因为您需要遍历 QList 并使用 QPair.first 来查找所需的项目。

编辑：如果你不需要它与其他 API 交互很多，你可以使用 QVector 替换 QList 根据 Qt 官方更快

# c# - 覆盖然后设置为空

> ID：16101959
> 
> 赞同：6
> 
> 时间：2013-04-19T09:56:16.167
> 
> 标签：c#, asp.net, sql-server, e-commerce, pci-compliance

我在一个传统的电子商务平台上工作，并且在处理信用卡号码时注意到了一个惯例。C＃

```
cardnumber = "11111111111111111111";
cardnumber = null; 
```

或在 sql

```
update cards set cardnumber = '11111111111111111111' where customerid = @CustomerID
update cards set cardnumber = null where customerid = @CustomerID 
```

我认为原因是在将其设置为 null 之前将其从内存中删除，这可能不会删除该值。但这种推理似乎表明 SQL Server 和/或 .NET VM 存在漏洞，仅将其设置为 null 不会完全删除数据，只是说它是可用的。

1.  我的理解正确吗？
2.  今天还需要执行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:05:04.670

我不知道 SQL，但在 C# 中，它没有意义。由于字符串是不可变的，因此您无法覆盖数据，即使您尽了最大努力。

当你写

```
cardnumber = "11111111111111111111"; 
```

这只是在内存中创建了另一个字符串，但旧卡号仍然存在，在内存中的某个位置。

当你写

```
cardnumber = null; 
```

它取消引用先前创建的字符串，现在您有一个`cardnumber`指向任何内容的引用。但是您包含真实卡号的字符串仍然存在。
所以这段代码不仅是错误的，而且是危险的，因为它给你一种错误的安全感。

看看 MSDN在评论中[George Duckett](https://stackoverflow.com/questions/16101959/overwrite-then-set-to-null/16102127#comment22991731_16101959)分享的[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)页面上所说的话：

> System.String 类的实例是不可变的，并且在不再需要时，不能以编程方式安排垃圾回收；也就是说，实例在创建后是只读的，无法预测实例何时会从计算机内存中删除。因此，如果 String 对象包含密码、信用卡号或个人数据等敏感信息，则存在使用该信息后可能会泄露的风险，因为您的应用程序无法从计算机内存中删除数据。

进一步阅读：

*   [支付处理器 - 如果我想在我的网站上接受信用卡，我需要知道什么？](https://stackoverflow.com/questions/51094/payment-processors-what-do-i-need-to-know-if-i-want-to-accept-credit-cards-on)

# c++ - 共享 boost::shared_ptr<> 变量是线程安全的吗？

> ID：16101961
> 
> 赞同：2
> 
> 时间：2013-04-19T09:56:20.403
> 
> 标签：c++, boost, shared-ptr

```
boost::shared_ptr<A> g_a;

void func1(boost::shared_ptr<A> v)
{
    g_a = v;
}

void func2()
{
    boost::shared_ptr<A> a = g_a;
    // a is good?
} 
```

当 func1() 和 func2() 从不同的线程执行时， func2() 的 a 是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:09:06.290

不，存在数据竞赛。一个线程写入 g_a，另一个线程读取 g_a。需要同步。

# php - Foreach 循环仅迭代一次 - PHP

> ID：16101963
> 
> 赞同：0
> 
> 时间：2013-04-19T09:56:28.577
> 
> 标签：php, foreach, copy, domdocument, explode

我一直在寻找一个 PHP 脚本来从几个网站上抓取图像，但我找不到一个通用且允许抓取多个页面的脚本。所以我构建了一个。

它要求保存路径和要从中刮取图像的网页列表，以逗号分隔。该脚本以逗号分解用户输入的网页，然后循环浏览每个网页。它总是会很好地抓取第一个网页，但随后会跳过其余网页。

这是整个脚本。随意将它复制到 localhost 并运行它，你会明白我的意思。

```
<?php
error_reporting( 0 );

if(isset($_POST['doit'])){
    $scrapethese = explode(",",$_POST['website']);
    foreach($scrapethese as $scrapethis){
        $cleanit = str_replace(" ", "", $scrapethis);
        $html = file_get_contents($cleanit);
        $dom = new domDocument;
        $dom->loadHTML($html);
        $dom->preserveWhiteSpace = false;
        $imgs = $dom->getElementsByTagName('img');
        foreach($imgs as $img){
            $fullimgpath = $img->getAttribute('src');
            $slashexp = explode('/', $fullimgpath);
            $lastindex = count($slashexp)-1;
            $shortpath = $slashexp[$lastindex];
            $filename = $_POST['folder']."\\".$shortpath;
            if(copy($fullimgpath, $filename)){
                echo $slashexp[$lastindex]." Saved<br />";
            }else{
                echo "<b style='color:red;'>Could not save img: </b>".$filename."<br />";
            }
        }
    }
}else{
?>
<form method="POST" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="hidden" name="doit" value="x" />
    <label>The complete path to the page you'd like to scrape. You may enter multiple paths seperated by commas.</label><br />
    <textarea name="website" /></textarea><br />
    <label>Path to the folder you want to save images to</label><br />
    <input type="text" name="folder" /><br />
    <input type="submit" value="save all images" />
</form>
<?php
}
?> 
```

如果有人可以提供一些见解，说明为什么在提供多个网站时脚本没有循环遍历所有网站，我将不胜感激。

# php - php 无法解释导出函数的转义字符

> ID：16101964
> 
> 赞同：0
> 
> 时间：2013-04-19T09:56:29.653
> 
> 标签：php, string

我的 php 服务器无法将“\n”解释为（LF 或 CR）。我的 php.ini 有问题吗？

这里有一个示例代码：

```
<?php echo "hell o boys \n hell o girls \t hell o gays"; ?> 
```

它只是打印：

```
hell o boys hell o girls hell o gays 
```

我希望在哪里

```
hell o boys 
 hell o girls      hell o gays 
```

请需要帮助。真的很为这样的小事烦恼。我不想使用正则表达式。

在这种情况下，我想在下面使用此功能，但由于转义字符问题，它不起作用。这里：

```
<?php
function export_excel_csv()
{
    $conn = mysql_connect("localhost","root","");
    $db = mysql_select_db("database",$conn);

    $sql = "SELECT * FROM table";
    $rec = mysql_query($sql) or die (mysql_error());

    $num_fields = mysql_num_fields($rec);

    for($i = 0; $i < $num_fields; $i++ )
    {
        $header .= mysql_field_name($rec,$i)."\\t";
    }

    while($row = mysql_fetch_row($rec))
    {
        $line = '';
        foreach($row as $value)
        {                                            
            if((!isset($value)) || ($value == ""))
            {
                $value = "\\t";
            }
            else
            {
                $value = str_replace( '"' , '""' , $value );
                $value = '"' . $value . '"' . "\\t";
            }
            $line .= $value;
        }
        $data .= trim( $line ) . "\\n";
    }

    $data = str_replace("\\r" , "" , $data);

    if ($data == "")
    {
        $data = "\\n No Record Found!\n";                        
    }

    header("Content-type: application/octet-stream");
    header("Content-Disposition: attachment; filename=reports.xls");
    header("Pragma: no-cache");
    header("Expires: 0");
    print "$header\\n$data";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:57:46.477

利用

```
nl2br 
```

用换行符替换 \n 的函数。像这样

```
$str = "hell o boys \n hell o girls \t hell o gays";

echo nl2br($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:21:12.587

```
$a = "hell o boys \n hell o girls \t hell o gays";    
$a=str_replace('\n',PHP_EOL,$a);
echo $a; 
```

如果你想在 html 中显示代码。尝试

```
echo "<pre>{$a}</pre>"; 
```

# python - Python 表达式中的神秘逗号

> ID：16101965
> 
> 赞同：2
> 
> 时间：2013-04-19T09:56:30.813
> 
> 标签：python

我想知道逗号在这段代码中的作用：

```
line, = 
```

以下示例显示了该行为：

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax = plt.axes(xlim=(0, 2), ylim=(-2, 2))
line, = ax.plot([], [], lw=2)
print("First:")
print(line)
print("Second:")
line = ax.plot([], [], lw=2)
print(line) 
```

结果：

```
First:
Line2D(_line0)
Second:
[<matplotlib.lines.Line2D object at 0xb137c4c>] 
```

当我尝试使用 line 变量时，它真的变得令人困惑，而且我不知道是否使用尾随逗号：

```
def init():
    line.set_data([], [])
    return line, 
```

或者有没有更好的方法来避免逗号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T09:57:29.320

它只是打开一个 1 元组。例如：

```
line, = ('foo',)   # same as line = 'foo' in this example 
```

与之比较

```
line1, line2 = ('foo', 'bar') # unpack a 2-tuple 
```

等等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T09:59:26.493

它有助于解包元组

在此处查看不同的结果：

```
a = (1,)
print(a) # prints (1,)

a,  = (1,)
print(a) # prints 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:03:56.400

在 Python 中，有一个快捷方式可以一次分配多个变量：

```
(a, b, c) = something 
```

您分配给变量元组而不是单个变量。`something`如果不是恰好包含 3 个元素的集合，此示例将引发异常；否则它将绑定`a`到 中的第一项`something`、`b`第二项和`c`第三项。

您可能知道，在 Python 元组中，括号通常是可选的；重要的是逗号。所以你也可以把我的例子写成：

```
a, b, c = something 
```

这当然适用于任何大小的变量元组，而不仅仅是三个。并且 1 元组由一个带有尾逗号的项目表示，并且 1 后面没有任何^(内容)。所以你的例子：

```
line, = ax.plot([], [], lw=2) 
```

只是断言`ax.plot([], [], lw=2)`返回具有单个元素的集合，并绑定`line`到该元素。它与几乎相同的陈述不同：

```
line = ax.plot([], [], lw=2) 
```

因为这将绑定`line`到集合本身，并且不包含关于它拥有的元素数量的断言。

* * *

¹这有点难看，但很有必要，因为唯一其他明显的语法是`(item)`，这会与简单地为子表达式加上括号的语法发生冲突。例如，没有人愿意`2 * (3 + 1)`给出关于将 an`int`和 a相乘的错误`tuple`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T09:59:38.823

它使变量成为元组中的第一个（并且仅在这种情况下）项。这允许“多重”分配，例如：

```
a, b = 1, 2 
```

这对于交换值特别有用，因此，从上面继续，您可以执行以下操作：

```
a, b = b, a 
```

and`a`变量`b`将交换值。

# vb6 - 错误：从 VB6 使用 ESC/OPOS 时无法打开设备

> ID：16101966
> 
> 赞同：0
> 
> 时间：2013-04-19T09:56:31.113
> 
> 标签：vb6

我正在尝试使用 ESC/OPOS ADK for VB 6 将一些 VB6 代码转换为直接打印到 EPSON TMU 220D 收据打印机。我在我的项目中添加了对 OPOS ADK 的引用。甚至 ADK 附带的示例程序也不起作用。我已经设置了打印机并给它一个逻辑设备名称。我什至卸载了收据打印机自己的驱动程序，然后重新安装了它们。当我调用 OPOS 控件的 open 方法时，我不断收到以下错误：“无法打开设备”。我很困惑，因为文档说 OPOS ADK 是设备独立的。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:58:03.797

知道了。我只需要确保 OPOS 控件的 open 方法的参数（字符串）与使用 OPOS 设备设置实用程序设置打印机时提供给打印机的逻辑设备名称（LDN）相同。也就是说，如果 LDN 是“RECEIPT”并且假设您将 OPOS 控件命名为“OPOSPOSPrinter1”，则调用 OPOS 控件的 open 方法，如下所示：

使用 OPOSPOSPrinter1 。打开“收据”

# hadoop - 好像您正在使用 JRE 运行 sqoop - 但 JAVA_HOME 设置为 JDK

> ID：16101967
> 
> 赞同：4
> 
> 时间：2013-04-19T09:56:39.873
> 
> 标签：hadoop, java, sqoop

我尝试在 Ubuntu 上设置 sqoop (sqoop-1.4.3.bin__hadoop-1.0.0)。我可以毫无问题地运行基本的 sqoop 帮助等。当我运行以下命令时，出现错误：

```
sqoop import --connect jdbc:mysql://localhost/test --table sales -m 1

13/04/19 10:35:24 INFO orm.CompilationManager: HADOOP_MAPRED_HOME is /opt/hadoop/hadoop-1.0.4
13/04/19 10:35:24 ERROR orm.CompilationManager: It seems as though you are running sqoop with a JRE.
13/04/19 10:35:24 ERROR orm.CompilationManager: Sqoop requires a JDK that can compile Java code.
13/04/19 10:35:24 ERROR orm.CompilationManager: Please install a JDK and set $JAVA_HOME to use it.
13/04/19 10:35:24 ERROR tool.ImportTool: Encountered IOException running import job: java.io.IOException: Could not start Java compiler.
    at org.apache.sqoop.orm.CompilationManager.compile(CompilationManager.java:176) 
```

我用谷歌搜索了这个错误的答案，大多数答案都指向将 JAVA_HOME 设置为我拥有的 JDK（在 ~/.bashrc [在 Ubuntu 上]）。

```
$ echo $JAVA_HOME
/usr/lib/jvm/jdk1.7.0_15 
```

这些是我设置的其他变量：

```
export HADOOP_COMMON_HOME=/opt/hadoop/hadoop-1.0.4
export HADOOP_MAPRED_HOME=/opt/hadoop/hadoop-1.0.4
export SQOOP_HOME=/opt/hadoop/sqoop-1.4.3.bin__hadoop-1.0.0
export PATH=$PATH:$SQOOP_HOME/bin 
```

我还将 mysql jdbc 驱动程序添加到 lib 文件夹中。

任何想法为什么我会收到此错误？在此先感谢，老爹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:56:27.320

Scoop creates java classes that represent the schema of the table you are importing in. So to create the classes you need the jdk instead of the jre.

Set the JAVA_HOME in the `./bashrc` and the `$HADOOP_HOME/conf/hadoop-env.sh` as well.

That should work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:16:28.243

Sqoop 最终将执行 Hadoop shell 脚本，因此我将确保您的 Hadoop 配置正确以使用 JDK 而不是 JRE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-21T22:43:55.703

我在 Ubuntu 上遇到了同样的问题。

我的 $JAVA_HOME 已正确设置为 /usr/lib/jvm/java-7-openjdk-amd64，但查看 /usr/lib/jvm/java-7-openjdk-amd64/bin 我注意到“javac”不存在. 这就是 Sqoop 需要但找不到的。

所以问题只是我安装的 Java 没有 Java 编译器。解决方案非常简单：

```
sudo apt-get install openjdk-7-jdk 
```

# javascript - Ajax 请求 ($.ajax(type:'GET')) 不传递大于 45 的数组，但 ($.ajax(type:'POST')) 传递。为什么？

> ID：16101969
> 
> 赞同：2
> 
> 时间：2013-04-19T09:56:45.790
> 
> 标签：javascript, jquery, ajax, arrays, asp.net-mvc-3

我正在开发一个 MVC 3 项目，并且我有一个 ajax 请求（$.ajax），它将一个 javascript 数组传递给一个控制器并返回一个 HTML 结果（带有选择元素和选项的部分视图）。

当数组为 46 项或更大时，不会调用控制器（我在控制器上有一个断点，它没有被触发）。

然后，我将 ajax 更改为请求类型为“POST”的 $.ajax，请求运行良好，其中包含来自他数组的所有数据。

我用谷歌搜索试图理解为什么会这样，但结果却是空的，除了堆栈溢出的这个问题，这对我没有多大帮助，因为它通常说明了 get 和 post 请求之间的区别 - 没有可观察到的变化服务器（这是我想要的）与服务器端的更改。我只是加载数据供用户选择。

也许是我对 ajax get 和 post 请求的理解有点模糊，但如果有人遇到过这种问题并理解原因，我将非常感谢反馈。:)

以下是我尝试执行的代码示例：

```
$(function () {
  $('#SelectedCategory').change(function () {

    //create array of selected attributes to limit returned results set
    var currentAttribs = new Array();
    $('#cboSelectedAttributes option').each(function () {
        currentAttribs.push(this.text);
    });

    //retrieve available attributes from server excluding current selections
    $.ajax({
        url: folder + '/Index_GetAttributes',
        type: "POST",
        data: { strCategory: $(this).find(':selected').val(), lstCurrentAttributes: currentAttribs },
        traditional: true,
        success: function (result) {
            $('#divAvailAAttribs').html(result);
        }
    });
  });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:03:24.693

一般来说，GET 比 POST 短。虽然实际支持的请求数据大小取决于具体的服务器，但不建议 GET 请求 URI 长于 255 字节。

我建议使用一些网络调试工具检查您的 GET 请求的长度，然后您会知道更多。

# android - 如何获得每半小时android的gps位置？

> ID：16101970
> 
> 赞同：0
> 
> 时间：2013-04-19T09:56:56.073
> 
> 标签：android, gps, location

我必须每半小时打开一次 gps 并获取位置并将其关闭是否有此功能的代码，因为我是 android 新手，请帮助我。

谢谢你。

这是我的代码：

```
public void checkLocation(View v) {
        //initialize location manager
        manager =  (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        //check if GPS is enabled
        //if not, notify user with a toast
        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            Toast.makeText(this, "GPS is disabled.", Toast.LENGTH_SHORT).show();
        } else {
            //get a location provider from location manager
            //empty criteria searches through all providers and returns the best one
            String providerName = manager.getBestProvider(new Criteria(), true);
            Location location = manager.getLastKnownLocation(providerName);

            TextView tv = (TextView)findViewById(R.id.locationResults);
            if (location != null) {
                tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
            } else {
                tv.setText("Last known location not found. Waiting for updated location...");
            }
            //sign up to be notified of location updates every 15 seconds - for production code this should be at least a minute
            manager.requestLocationUpdates(providerName, 60000*3, 1, this);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:06:51.423

这次我没有编码，但我会建议你使用系统闹钟并保持半小时的时间间隔。android 闹钟通常用于我们必须在每个间隔后做一些工作的地方，这样电池也不会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:26:53.293

您应该使用[requestLocationUpdates](https://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,+long,+float,+android.app.PendingIntent%29)方法，该方法采用您可以响应的[PendindIntent 。](https://developer.android.com/reference/android/app/PendingIntent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:04:13.860

我会用一个可运行的函数来实现它。这是一个很好的[例子](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

你应该设置`handler.postDelayed(r, 5400000);`（如果我计算正确）。该值以毫秒为单位。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T10:09:54.237

```
thread1=new Thread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            while (true) {
                try {
                    Thread.sleep(1000*60*30);
                    mHandler.post(new Runnable() {

                        public void run() {
                            // TODO Auto-generated method stub
                            // Write your code here to get the gps location.
                   });
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        }
    }); 
```

# mysql - MySQL-案例条件错误

> ID：16101971
> 
> 赞同：0
> 
> 时间：2013-04-19T09:56:57.513
> 
> 标签：mysql, case

我在 MySQL 中遇到以下 Case 语句的问题：

```
CASE  
    WHEN 
    ((SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2) = ('Provider - Remote Client - North')) then SUBSTRING_INDEX('Provider - Remote Client - North', '-', -1)
    ELSE SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2)
END CASE 
```

我收到错误“出乎意料”有人可以建议吗？！？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:01:26.820

你有一个括号，`WHEN`你有一个额外的`CASE`后`END`：

```
CASE  
    WHEN 
      SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2) = 'Provider - Remote Client - North'
    THEN SUBSTRING_INDEX('Provider - Remote Client - North', '-', -1)
    ELSE SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2)
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:01:05.513

帮自己一个忙，仅在需要时使用括号。有一个太多了。

这是正确的查询：

```
CASE  
    WHEN 
    SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2) = 'Provider - Remote Client - North') 
        THEN SUBSTRING_INDEX('Provider - Remote Client - North', '-', -1)
    ELSE SUBSTRING_INDEX('Provider - Remote Client - North', '-', -2)
END CASE 
```

# java - 使用 .contains() 通过 arrayList 搜索

> ID：16101983
> 
> 赞同：0
> 
> 时间：2013-04-19T09:57:38.437
> 
> 标签：java, arraylist, contains

我正在尝试使用 .contains() 搜索我的 arrylist。

这是我在窗口类中的方法：

```
 public void findByID() {
    int customer = Integer.parseInt(findCustomerField.getText());

    if (userA.list.contains(customer)) {
        User user = userA.findById(customer);
        output.setText(user.toString());
    }
} 
```

在我以前的版本中，我使用 customerID 来查找客户，我的 UserArchive 类中的 findByID 方法如下所示：

```
 public User findById(int id) {
    for (User u : list) {
        if (u.getCustomerID() == id) {
            return u;
        }
    }
    return null; // or empty User
} 
```

如果我想使用 .contains()，最后一个方法应该如何？我认为窗口类方法还可以，不确定。我对使用 contains 感到毫无头绪（昨天才听说）。

编辑：我不想再使用 customerID 来查找对象（这就是以前的版本所做的） 我的目标是能够键入例如“Peter”，然后找到包含“Peter”的所有对象。根据我的理解，这可以通过以某种方式使用 .contains() 来实现。

编辑2：我让它工作。现在我可以搜索特定的名字并将其打印出来。编辑目标：我真正想要的是搜索例如“Pe”，然后获取列表中包含“Pe”的每个对象，而不仅仅是名字。将调查 Akshay Singhal 发布的内容。以下是适用于 firstName 的方法：

窗口类：

```
 public void findByID() {
    String customer = findCustomerField.getText();

    if (!customer.equals("")) {
        User user = userA.findByName(customer);
        output.setText(user.toString());
    }
    else
        JOptionPane.showMessageDialog(this, "Does not exist");
} 
```

用户存档类：

```
 public User findByName(String name) {
    for (User u : list) {
        if (u.getFirstName().equals(name)) {
            return u;
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:05:59.773

您无法使用`contains()`. 该方法在列表中搜索对象，而您需要根据列表中对象的*属性*进行搜索。

您当前的代码看起来是正确的。

* * *

关于您最近的编辑：

> 我的目标是能够输入例如“Peter”，然后找到所有包含“Peter”的对象。

在这种情况下，您需要非常相似的代码。只需循环，直到找到具有该属性的对象：

```
public User findByName(String name) {
    for (User u : list) {
        if (u.getName().equals(name)) {
            return u;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:47:07.530

根据列表的大小和执行此代码的频率，您尝试的 custom-iterate-till-you-find-a-match 方法可能没问题，但如果需要频繁查找，您可能需要尝试以下方法之一：

1.  创建一个客户 ID 作为 Key 并将相应的 User 对象作为值的 HashMap 而不是一个列表。无论提供的用户 ID 位于列表顶部还是底部，此方法都应为您提供接近响应时间。

2.  您还可以将 Collections.sort 与自定义比较器一起使用，该比较器比较用户对象的 id 以对列表进行排序，然后使用 Collections.binarySearch 进行搜索，再次使用仅查看用户 id 的比较器。作为输入，您可以创建一个新的 User 对象并将其 Id 设置为您正在搜索的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:07:00.280

contains 方法检查集合中是否存在对象。这基本上意味着确定被检查的对象是否**等于**集合中的任何对象。

为了建立这种相等性，使用对象的 equals 方法。

在这种情况下，您需要覆盖用户对象中的 equals 方法，以说明当 ID 相同时 2 个用户对象相等。

之后，您可以直接使用 contains 进行检查。

注意：不要忘记覆盖哈希码方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T10:10:37.630

考虑覆盖您的 Person-class 的 hashcode 和 equals 来识别您的对象。

另请查看[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)

要使用它，您应该以如下方式覆盖 User 的 equals() 和 hashCode() 方法：

 ``public boolean equals(Object o){

.... some standard stuff like is Null and instanceof

return this.getCustomerID() == ((User) o).getCustomerID();

}`  `如果你使用 eclipse 你可以生成它。``

# r - 通过代理服务器使用 twitteR

> ID：16101984
> 
> 赞同：2
> 
> 时间：2013-04-19T09:57:44.767
> 
> 标签：r, proxy, twitter, rcurl

我正在尝试使用[twitteR](http://cran.r-project.org/web/packages/twitteR/)包下载 Twitter 数据。

我不断收到错误消息

> “功能错误（类型、味精、asError = TRUE）：无法连接到主机”

我相信这是因为我在我的工作计算机上执行此操作，并且我需要传递代理服务器的详细信息。

[为了测试这一点，我尝试了一个关于R 的代理设置](https://stackoverflow.com/a/6467744/1409652)的类似问题的答案之一中给出的示例。

如果我输入：

```
library("RCurl")
getURL("http://stackoverflow.com") 
```

然后我收到与尝试使用 twitteR 时相同的错误消息：

> “功能错误（类型、味精、asError = TRUE）：无法连接到主机”

但是，如果我传递代理服务器的详细信息，那么它就没有问题：

```
library("RCurl")
opts <- list(
  proxy         = "123.456.7.89", 
  proxyusername = "tumbledown", 
  proxypassword = "mypassword",
  proxyport     = 8080
)
getURL("http://stackoverflow.com", .opts = opts) 
```

但是，我在将代理服务器的详细信息传递给**twitteR**时遇到问题。我尝试使用以下方法在 R 的**Rprofile.site**文件中设置它：

```
http_proxy="http://tumbledown:mypassword@123.456.7.89:8080/" 
```

但它似乎没有做任何事情来解决问题。我哪里错了？

**编辑 1：**这是我试图运行的代码，现在我看到它让我意识到这可能更像是一个 ROAuth 问题：

```
library("twitteR")
library("ROAuth")
library("RCurl")

Credentials <- OAuthFactory$new(
  consumerKey = "MY_CONSUMER_KEY",
  consumerSecret = "MY_CONSUMER_SECRET",
  requestURL = "https://api.twitter.com/oauth/request_token",
  authURL = "https://api.twitter.com/oauth/authorize",
  accessURL = "https://api.twitter.com/oauth/access_token")

# I have then tried both of the below handshake methods:

# 1
Credentials$handshake()

# 2
download.file(url="http://curl.haxx.se/ca/cacert.pem", destfile="cacert.pem")
Credentials$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")) 
```

**编辑2：**

下面的代码似乎让我在那里。如果我设置了这些选项，那么我可以开始与 Twitter 的握手过程（间歇性地，它有时仍然会失败）。

```
options(RCurlOptions = list(
    verbose = TRUE,
    proxy ="http://123.456.7.89:8080",
    proxyuserpwd="tumbledown:mypassword",
    proxyauth="ntlm")) 
```

然后我被要求在跟踪 URL 后从 Twitter 输入一个 pin（我不得不费力地输入，因为由于某种原因它不会让我复制/粘贴它）。然后我似乎在握手失败之前完成了握手。这是详细的输出（删除/更改了一些细节）：

```
* About to connect() to proxy 123.456.7.89 port 8080 (#0)
*   Trying 123.456.7.89... * connected
* Connected to 123.456.7.89 (123.456.7.89) port 8080 (#0)
* Establish HTTP proxy tunnel to api.twitter.com:443
> CONNECT api.twitter.com:443 HTTP/1.1
Host: api.twitter.com:443
Proxy-Connection: Keep-Alive

< HTTP/1.1 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )
< Via: 1.1 ORG-TMG1
< Proxy-Authenticate: Negotiate
< Proxy-Authenticate: Kerberos
< Proxy-Authenticate: NTLM
< Connection: close
< Proxy-Connection: close
< Pragma: no-cache
< Cache-Control: no-cache
< Content-Type: text/html
< Content-Length: 719   
< 
* Ignore 719 bytes of response-body
* Received HTTP code 407 from proxy after CONNECT
* About to connect() to proxy 123.456.7.89 port 8080 (#0)
*   Trying 123.456.7.89... * connected
* Connected to 123.456.7.89 (123.456.7.89) port 8080 (#0)
* Establish HTTP proxy tunnel to api.twitter.com:443
* Proxy auth using NTLM with user 'ORG\tumbledown'
> CONNECT api.twitter.com:443 HTTP/1.1
Host: api.twitter.com:443
Proxy-Authorization: NTLM <LOTS OF RANDOM LETTERS>==
Proxy-Connection: Keep-Alive

< HTTP/1.1 407 Proxy Authentication Required ( Access is denied.  )
< Via: 1.1 ORG-TMG1
< Proxy-Authenticate: NTLM <LOTS OF RANDOM LETTERS>==
< Connection: Keep-Alive
< Proxy-Connection: Keep-Alive
< Pragma: no-cache
< Cache-Control: no-cache
< Content-Type: text/html
< Content-Length: 0     
< 
* Establish HTTP proxy tunnel to api.twitter.com:443
* Proxy auth using NTLM with user 'ORG\tumbledown'
> CONNECT api.twitter.com:443 HTTP/1.1
Host: api.twitter.com:443
Proxy-Authorization: NTLM <LOTS OF RANDOM LETTERS>=
Proxy-Connection: Keep-Alive

< HTTP/1.1 200 Connection established
< Via: 1.1 ORG-TMG1
< Connection: Keep-Alive
< Proxy-Connection: Keep-Alive
< 
* Proxy replied OK to CONNECT request
* successfully set certificate verify locations:
*   CAfile: \\ORG-nas/tumbledown/R/win-library/2.15/RCurl/CurlSSL/cacert.pem
  CApath: none
* SSL connection using RC4-SHA
* Server certificate:
*    subject: C=US; ST=California; L=San Francisco; O=Twitter, Inc.; OU=Twitter Security; CN=api.twitter.com
*    start date: 2013-04-08 00:00:00 GMT
*    expire date: 2013-12-31 23:59:59 GMT
*    subjectAltName: api.twitter.com matched
*    issuer: C=US; O=VeriSign, Inc.; OU=VeriSign Trust Network; OU=Terms of use at https://www.verisign.com/rpa (c)09; CN=VeriSign Class 3 Secure Server CA - G2
*    SSL certificate verify ok.
> POST /oauth/access_token HTTP/1.1
Host: api.twitter.com
Accept: */*
Content-Length: 297
Content-Type: application/x-www-form-urlencoded

< HTTP/1.1 200 OK
< cache-control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
< content-length: 160
< content-type: text/html; charset=utf-8
< date: Tue, 23 Apr 2013 11:47:21 GMT
< etag: "<LOTS OF RANDOM LETTERS>"
< expires: Tue, 31 Mar 1981 05:00:00 GMT
< last-modified: Tue, 23 Apr 2013 11:47:21 GMT
< pragma: no-cache
< server: tfe
< set-cookie: _twitter_sess=<LOTS OF RANDOM LETTERS>--<LOTS OF RANDOM LETTERS>; domain=.twitter.com; path=/; HttpOnly
< set-cookie: guest_id=<LOTS OF RANDOM LETTERS>; Domain=.twitter.com; Path=/; Expires=Thu, 23-Apr-2015 11:47:21 UTC
< status: 200 OK
< strict-transport-security: max-age=123456789
< vary: Accept-Encoding
< x-frame-options: SAMEORIGIN
< x-mid: <LOTS OF RANDOM LETTERS>
< x-runtime: 0.04538
< x-transaction: <LOTS OF RANDOM LETTERS>
< x-xss-protection: 1; mode=block
< 
* Connection #0 to host 123.456.7.89 left intact
Error: Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  ) 
```

# mysql - mySql 语法错误行为？

> ID：16101985
> 
> 赞同：0
> 
> 时间：2013-04-19T09:57:44.843
> 
> 标签：mysql, jakarta-ee, syntax-error, tomcat6

我正在执行这个查询：

插入到 sent_emails (mailBody,azRatesFilesSendingId,fileName,tarrif_id,destination,cc,bcc,email_content,attached_file) VALUES ('尊敬的先生，

请查看随附的 TELTAC WORLDWIDE 费率通知。

**经客户经理批准，即日起增效。**

请确认您的收据至 ra@teltacworldwide.com

问候，

===================================**差饷署**

**Teltac World Wide Inc.**

Ibisa Bldg, 3rd Floor, Racreet, Verdun

邮政信箱：43 间卧室

电话：+9632 分机：114

F338

电子邮件： 鼠尾草

====================================

' , '33435','Teltac-Rate Sheet-ATel 2013-Apr-19','276','ratcation.com','ratrldwide.com','','View','Open')

当有人试图执行它时，它给了我一个语法错误：

DBHandler 中的错误---executeUpdateQuery-->com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'MsoNormal" style="margin: 0in 0in 0pt;">尊敬的先生附近使用的正确语法

但是当我在 MySql 服务器中执行它时，该语句成功执行并返回一行已生效！所以我可以看到这不是语法错误，但我无法弄清楚问题所在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:27:47.737

我使用了 apache .jar 中的 StringEscapeUtils，它就像一个魅力！我读到它不安全，因为它可能会带来 SQL 注入问题，但是由于此应用程序仅在内部使用，因此我认为它是安全的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:04:49.860

这似乎是`String`连接和查询构建的问题。如果没有*实际的代码*，这只是一个猜测，但它是有根据的。

`String`使用内容向数据库中插入任意 s时，这是一个非常常见的问题`String`。例如

```
final String query = "SELECT * FROM my_table WHERE value = '" + value + "'"; 
```

上面的查询看起来不错，它做了它应该做的事情。但万一`value`出乎意料呢？

```
final String value = "damn, it's got an apostrophe"; 
```

现在突然你有一个损坏的查询。更糟糕的是，如果我们有

```
final String value = "something'; DROP DATABASE myDatabase --"; 
```

然后我们有一个真正的问题。

您应该使用 a`PreparedStatement`来执行查询，否则您可能会遇到各种奇怪的问题，通常称为 SQL 注入。

这是一个使用您的查询和语法的示例，它在s`SET`中效果更好。`PreparedStatement`

```
final String query = "INSERT INTO sent_emails SET"
        + "mailBody = ?,"
        + "azRatesFilesSendingId = ?,"
        + "fileName = ?,"
        + "tarrif_id = ?,"
        + "destination = ?,"
        + "cc = ?,"
        + "bcc = ?,"
        + "email_content = ?,"
        + "attached_file = ?";
final PreparedStatement preparedStatement = conn.prepareStatement(query);
preparedStatement.setString(1, mailBody);
preparedStatement.setInt(2, azRatesFilesSendingId);
//and the rest of the parameters. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:05:33.173

问题是格式。

您的邮件正文中可能有带有样式信息的 HTML 代码，其中还包含“'”。

在将文本插入数据库之前，您应该确保转义所有单括号和双括号。

# javascript - 如何拆分模板？

> ID：16101988
> 
> 赞同：0
> 
> 时间：2013-04-19T09:57:46.623
> 
> 标签：javascript, meteor

我有一个 HTML 文档：

```
<body>
    {{> today_list}}    
</body> 
```

和模板：

```
<template name="today_list">
   {{#if action_log_mode}}
   ...
   {{/if}}

   {{#if action_list_mode}}
   ...
   {{/if}}
</template> 
```

是否可以将此模板拆分为另外两个。像这样的东西：

```
<body>
  {{#if action_log_mode}}
    {{> one}}
  {{/if}}   
  {{#if action_list_mode}}
    {{> two}}
  {{/if}}   
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:20:07.847

您可以拥有任意数量的模板，并且它们可以嵌套。它们可能位于相同或不同的 .html 文件中。

如果不进行测试，我不知道您是否可以在正文中（在模板之外）确定模板助手的范围。模板助手的范围是特定的模板。例如，“一”`Template.one.listItem = function () { ...`将无法在模板“二”中访问。但是，您可以添加一个全局帮助器（可能在 中工作`<body>`），如下所示（取自[Meteor wiki](https://github.com/meteor/meteor/wiki/Handlebars)）：

```
Handlebars.registerHelper("foo", function() {
  return "blah"; // (calculate value here)
}); 
```

绝对可行的是：

在 app.html 中

```
<body>
  {{ > page }}
</body>

<template name="page">
   {{#if isLogMode}}
     {{ > one }}
   {{else}}
     {{ > two }}
   {{/if}}
</template>

<template name="one">
  ...
</template>

<template name="two">
  ...
</template> 
```

在 app.js 中

```
Template.page.isLogMode = function () {
  // (something like)
  return Session.get('logMode') === "log";
}; 
```

# shell - 使用循环、while、grep 和 awk 查找术语列表和对应值的 Shell 脚本

> ID：16101989
> 
> 赞同：0
> 
> 时间：2013-04-19T09:57:46.663
> 
> 标签：shell, unix, awk, grep

我正在搜索/尝试将源文件中的术语列表（Ensemble Gene IDs）与目标 rnaseq.gtf 文件中的术语列表进行匹配。我想将匹配/grep 的 ENSEMBLE 基因 ID 及其相应的 RPKM1 和 RPKM2 值打印到单独的输出文件中。

source_geneid.csv 文件如下所示：

```
GO Genes ENSEMBLE Gene ID
AATF    ENSG00000108270
ADNP    ENSG00000101126 
```

target_rnaseq.gtf 文件：

```
chr17   gencodeV7   gene    35306175    35414170    0.669763    +   .   gene_id "ENSG00000108270.5"; transcript_ids "ENST00000225402.4,"; RPKM1 "7.81399"; RPKM2 "8.149"; iIDR "0.000";
chr20   gencodeV7   gene    49505585    49547750    0.862675    -   .   gene_id "ENSG00000101126.8"; transcript_ids "ENST00000371602.2,ENST00000349014.3,ENST00000396029.3,ENST00000396032.1,ENST00000534467.1,"; RPKM1 "12.0082"; RPKM2 "8.55263"; iIDR "0.000"; 
```

包含匹配/grep 的gene_id 的输出文件及其对应的 RPKM1 和 RPMK2 值：

```
ENSG00000108270.5 RPKM1 "7.81399"  RPKM2 "8.149"
ENSG00000101126.8 RPKM1 "12.0082" RPKM2 "8.55263" 
```

我已经在命令行上完成了：

```
grep -w "ENSG*" target_rnaseq.gtf| awk '{print $10,$13,$14,$15,$16}' >> output.txt 
```

我也试过（感谢 fedorqui）

```
while read line
do
  var=$(echo $line | awk '{print $2}')
while read line
do
  var=$(echo $line | awk '{print $2}')
  grep -w "$var" target_rnaseq.gtf | awk '{print $10,$13,$14,$15,$16}' >> output.txt
done < source_geneid.csv 
```

但它会从目标文件中打印出所有基因 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:48:23.473

`target_rnaseq.gtf`似乎格式正确，因此您可以轻松地对其进行处理以使工作更容易，例如获取您感兴趣的值很简单：

```
$ awk 'NR>1{gsub(/ ?"/,"",$1);print $1,$3,$4}' FS=';' RS='gene_id' rnaseq
ENSG00000108270.5  RPKM1 "7.81399"  RPKM2 "8.149"
ENSG00000101126.8  RPKM1 "12.0082"  RPKM2 "8.55263" 
```

解析`source_geneid.csv`很简单：

```
$ awk 'NR>1{print $2}' geneid 
ENSG00000108270
ENSG00000101126 
```

把它们放在一起：

```
$ grep -f <(awk 'NR>1{print $2}' geneid) <(awk 'NR>1{gsub(/ ?"/,"",$1);print $1,$3,$4}' FS=';' RS='gene_id' rnaseq)
ENSG00000108270.5  RPKM1 "7.81399"  RPKM2 "8.149"
ENSG00000101126.8  RPKM1 "12.0082"  RPKM2 "8.55263" 
```

# ruby-on-rails - Kaminari 输出 **n** 表，每个表有 **n** 行

> ID：16101990
> 
> 赞同：0
> 
> 时间：2013-04-19T09:57:50.447
> 
> 标签：ruby-on-rails, pagination, kaminari

我是 RoR 的新手，所以我在这里遗漏了一些非常基本的东西，但我无法弄清楚。我通过调用控制器在 RoR 应用程序中使用 Kaminari gem 进行分页：

users_controller.rb：

```
def index
@users =  User.order('created_at DESC').page(params[:page])
end 
```

在我看来，我有：

用户/index.html.erb：

```
<%= paginate @users %>
<%= render @users %> 
```

最后，我的用户部分是：

用户/_user.html.erb

```
<% @users.each do |u| %>
(data output like <%= u.login %> and so on)
<%= end %> 
```

所以它尽可能简单，并且类似于 Kaminari 使用示例。但是，我收到了具有指定行数的正确表，但该表被呈现 n 次，其中 n 是 paginates_per 选项的数量。分页 ifself 工作正常，但我无法调试该问题，我做错了什么？

我在 Kaminari 之前使用过 will_paginate gem，它开箱即用，效果很好，所以我的应用程序并没有在更深的地方完全损坏（如果它可以在这种简单的情况下）。

根据日志，所有内容都呈现一次，因此 @users 对象包含相乘的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:37:40.680

这个问题的原因很简单，一个答案是做改变

用户/index.html.erb：

从：

```
<%= paginate @users %>
<%= render @users %> 
```

至：

```
<%= paginate @users %>
<%= render 'user' %> 
```

但是如果你（或者更确切地说是我）想要呈现我应该在我的部分中拥有的集合

用户/_user.html.erb：

```
 <tr>
    <td><%= user.id %></td>
    <td><%= user.login %></td>
    <td><%= user.email %></td>
    #(and so on...)
    <% end %>
  </tr> 
```

只有那个（将为数据库中的每条记录调用的表的一部分）

所以现在 index.html.erb 看起来像这样：

用户/index.html.erb

```
<table>
  <tr>
    <th>Id</th>
    <th>Name</th>
    #(and whatever you want)
  </tr>

  <%= render @users %>
</table> 
```

现在表格将正确呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:41:37.770

```
<%= @users.each do |u| %>
(data output like <%= u.login %> and so on)
<%= end %> 
```

`<%=`输出代码结果，而`<%`只是执行它。交换你的代码：

```
<% @users.each do |u| %>
(data output like <%= u.login %> and so on)
<% end %> 
```

# clearcase - 是否建议从 clearcase 中的另一个符号链接创建符号链接？

> ID：16101993
> 
> 赞同：1
> 
> 时间：2013-04-19T09:57:51.940
> 
> 标签：clearcase, clearcase-ucm

在我的 clearcase 视图中，我将符号链接从一个组件复制到另一个组件，认为符号链接将始终指向目标文件。

但是当我看到该属性时，它现在指的是父符号链接。我认为它不会有任何问题，因为当父符号链接被更改时，子符号链接也会被反映。

这种（符号链接到符号链接）方法有问题吗？（一个问题是如果我需要查看原始文件，现在我需要扭曲到符号链接两次）。

我应该删除并指向原始文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:13:29.767

我宁愿删除并用指向原始指针的指针替换它，并带有：

```
 cleartool ln -slink -nc ../../some_file.txt 
```

（建议您使用相对 VOB 符号链接，而不是绝对符号链接）

取决于中间目标（可以随时删除--取消引用--）似乎不安全。

您可以尝试编辑复制的链接，以更改其目标，但正如本技术说明中所述，这里的问题[是](http://www-01.ibm.com/support/docview.wss?uid=swg21118146)：

> 将 VOB 符号链接修改为相对路径的唯一方法是创建新的符号链接。
> 如果 VOB 符号链接是使用绝对路径创建的以利用相对路径，则您不能编辑（修改）该 VOB 符号链接。

# asp.net - 全球天气 asmx 服务

> ID：16101996
> 
> 赞同：0
> 
> 时间：2013-04-19T09:58:02.720
> 
> 标签：asp.net

大家晚上好，我最近一直在为 asp.net 寻找天气 asmx 服务，我在网上搜索并找到了一堆但它们中的大多数都不起作用，例如（webserviceX 自 2 周以来不起作用）或其他服务是非常弱，因此我想知道您是否知道任何具有此类服务（天气）的网站？提前谢谢！PS如果您好奇我在运行 WebserviceX 的天气服务时会遇到什么错误：**System.IO.IOException: There is not enough space on the disk**

# node.js - 如何写入具有多行和多列的csv

> ID：16101997
> 
> 赞同：4
> 
> 时间：2013-04-19T09:58:03.133
> 
> 标签：node.js

现在我的 mongodb 中有几个 JSON，例如：

```
{
   title: "title_1",
   content: "content_1",
   author: "author_1"
} 
```

我想将这些数据写入具有以下格式的 csv 文件：

```
title    content     author
title_1  content_1   author_1
title_2  content_2   author_2
... 
```

我使用了 node-csv-parser 模块。但它总是只写入 csv 文件的第一列，例如：

```
title                          content          author
title_1,content_1,author_1
title_1,content_1,author_2
... 
```

我应该怎么做才能实现我的目标？请给我看一些例子。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:08:35.657

转换为嵌套数组，加入。

```
var array = [
  {
    title: "title_1",
    content: "content_1",
    author: "author_1"
  },
  {
    title: "title_1",
    content: "content_1",
    author: "author_2"
  }
];
var keys = Object.keys(array[0]);
var csv = [keys.join('\t')];
array.forEach(function (data) {
  var row = [];
  keys.forEach(function (key) {
    row.push(data[key]);
  });
  csv.push(row.join('\t'));
});
csv = csv.join('\n'); 
```

输出：

```
title   content author
title_1 content_1   author_1
title_1 content_1   author_2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:07:11.507

请参考以下链接以生成您的 json 或 csv，反之亦然

[http://www.cparker15.com/code/utilities/csv-to-json/](http://www.cparker15.com/code/utilities/csv-to-json/)

我希望这对你有用。

谢谢。

# javascript - Javascript设置输入字段的值

> ID：16101999
> 
> 赞同：9
> 
> 时间：2013-04-19T09:58:04.377
> 
> 标签：javascript, html, input, setattribute

因为虽然我无法使用 type=text 设置输入字段的值。以前，我总是使用这样的东西：

```
<input style="display: none" type="text" name="geo_poi" value="" id="geofeld" /> 
```

然后，在 JavaScript 中，我添加了包含这样一行的代码：

```
document.getElementById("geofeld").value = geo_poi; 
```

这总是有效的。也许新的浏览器不想再支持上面的方法了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T09:58:04.377

因此，使用以下方法设置属性效果很好。

```
document.getElementById("geofeld").setAttribute("value", geo_poi); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-20T08:43:24.643

对于 setAttribute 不产生任何结果的情况*（想想 HTML5 用户/密码输入）*，请考虑以下情况：

```
document.getElementById("geofeld").setRangeText("text"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-26T17:50:07.873

HTML

* * *

```
<input type="text" placeholder="Item 1" id="item1" />
<input type="text" placeholder="Item 2" id="item2" /> 
```

JAVASCRIPT

* * *

```
$('#item1').blur(function() {
    var item1var = $('#item1').val();
    $('#item2').val(item1var);
}); 
```

Jsfiddle [HERE](http://jsfiddle.net/6VG6w/)