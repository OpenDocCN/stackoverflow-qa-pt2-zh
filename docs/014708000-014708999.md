# StackOverflow 问答 14708000-14708999

# javascript - JavaScript 相对 AJAX 调用路径

> ID：14708003
> 
> 赞同：3
> 
> 时间：2013-02-05T12:51:22.187
> 
> 标签：javascript, relative-path, include-path

我有一个包含 PHP 和 JavaScript 文件的脚本。所有这些文件都在根文件夹`/myfolder`中。

假设我必须在我的网站上包含的脚本是`/myfolder/script.js`，问题是`script.js`我有 ajax 调用`../myfolder/ajax.php`，因为路径将相对于包含脚本的页面，如果我有类似这样的内容将不起作用页面`/a/b/page.php`：

`<script src="../../myfolder/script.js><script>`因为这将`../myfolder/ajax.php`按照 AJAX 调用中的说明调用 ajax 方法，在本例中为`/a/myfolder/ajax.php`.

如何重写 AJAX 调用 URL，使其始终指向正确的文件，无论`script.js`它包含在何处？

```
ROOT
|---myfolder
    |--script.js
    |--ajax.php
|--page1.php
|--subfolder
   |--page2.php
   |--subfolder
      |--page3.php 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T13:01:46.820

```
/**
 * returns the current context path,
 * ex: http://localhost:8080/MyApp/Controller returns /MyApp/
 * ex: http://localhost:8080/MyApp returns /MyApp/
 * ex: https://www.example.co.za/ returns /
 */
function getContextPath() {
    var ctx = window.location.pathname,
        path = '/' !== ctx ? ctx.substring(0, ctx.indexOf('/', 1) + 1) : ctx;
    return path + (/\/$/.test(path) ? '' : '/');
} 
```

* * *

在这样的 URL 上`http://www.example.com/ajax`：

```
getContextPath() + 'myfolder/ajax.php' 
```

将返回`/ajax/myfolder/ajax.php`

* * *

类似地在如下 URL 上`http://www.example.com/`：

```
getContextPath() + 'myfolder/ajax.php' 
```

将返回`/myfolder/ajax.php`

* * *

最后在一个 URL 上，例如`http://www.example.com/myfolder/a/b/c/d/e/f/g/`：

```
getContextPath() + 'myfolder/ajax.php' 
```

将返回`/myfolder/ajax.php`

# coffeescript - 如何在咖啡脚本中覆盖父方法，同时仍然能够调用父方法

> ID：14708007
> 
> 赞同：15
> 
> 时间：2013-02-05T12:51:33.643
> 
> 标签：coffeescript

我有两个这样的咖啡脚本类。在基本视图模型中，我有一个要在从基本视图模型继承的子项中覆盖的方法。

```
class exports.BaseViewModel
    constructor: () ->

    someBaseMethod: =>
        console.log "I'm doing the base stuff"

class ChildViewModel extends BaseViewModel
    constructor: () ->

    someBaseMethod: =>
        @doSomethingFirst()
        super @someBaseMethod() 
```

这不能按原样工作，因为该行`super @someBaseMethod()`调用自身创建一个无限循环。

有可能在这里实现我想要的吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-05T13:47:29.573

是的，`super`就像它是一个函数一样调用（它表示对您所在方法的超类版本的引用）：

```
class ChildViewModel extends BaseViewModel
  constructor: ->

  someBaseMethod: =>
    @doSomethingFirst()
    super() 
```

# spring - 有没有一种不错的方法可以不为 mybatis-spring 中的每个 DAO 接口定义 MapperFactoryBean？

> ID：14708010
> 
> 赞同：1
> 
> 时间：2013-02-05T12:51:42.470
> 
> 标签：spring, mybatis

众所周知，我们`MapperFactoryBean`为`DAO`接口定义了一个与`mapper.xml`. 但是随着`mapper.xml`以及`DAO`接口的增加，我需要`MapperFactoryBean`在`mybatis-config.xml`. 有没有办法可以自动为我做那件事？就像简单`context:component-scan`，代码一句，spring会自动检测bean本身。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:40:58.140

是的。看看文档：

[http://mybatis.github.io/spring/mappers.html#scan](http://mybatis.github.io/spring/mappers.html#scan)

# c# - 串行端口数据重复或重新发送（一些字符）

> ID：14708011
> 
> 赞同：2
> 
> 时间：2013-02-05T12:51:44.113
> 
> 标签：c#, .net, serial-port

让我解释一下场景：为我带来数据（字符串）的串行端口，如下例所示：

02051014 0009 M 0 741 30041105 2632 0 30041105

我尝试过各种读取（读取、读取字节、读取字符、读取行、读取现有）。我试图更改[新行](https://stackoverflow.com/questions/4345331/c-sharp-serialport-datareceived-problem-when-when-attached-strings)，但数据一直重复。看看上面的例子，现在看看数据是怎么来的：

0220510114 00009 M 0 741 300441105 2632 0 300411055

任何人都知道我该如何解决这个问题？

编码：

```
[...]
try
{
    this.serialPort = new SerialPort("COM1", 2400, Parity.None, 7, StopBits.One);
    this.serialPort.DataReceived += new SerialDataReceivedEventHandler(portaSerial_DataReceived);
    this.serialPort.Handshake = Handshake.XOnXOff;
    this.serialPort.Encoding = Encoding.ASCII;
    this.serialPort.Open();
}
[...]
private void portaSerial_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    try
    {
        var invalidValuesToBreakLine = new int[] { 13, 10, 0 };
        int data;

        while (this.serialPort.BytesToRead > 0)
        {
            data = this.serialPort.ReadChar();

            if (invalidValuesToBreakLine.Contains(data))
            {
                if (!this.breakLineWasPerformed)
                {
                    this.breakLineWasPerformed = true;

                    this.dataList.Add(this.temporaryString);

                    this.temporaryString = string.Empty;
                }
            }
            else
            {
                if (this.breakLineWasPerformed)
                {
                    this.breakLineWasPerformed = false;
                }

                this.temporaryString += (char)data;
            }
        }
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:17:15.397

我会尝试的第一件事是`data`在每次调用该方法后重置为空字符串`ReadChar()`，或者刷新输入缓冲区。

我怀疑调用`BytesToRead()`返回大于零，但 ReadChar() 调用返回串行端口缓冲区上的原始字符。这是由于串行端口的内部时序，以及您的代码对于硬件设备可能“运行得太快”这一事实。

我可能会重新考虑该方法中的整个 while 循环。您可能会简化很多，只需尝试以下（使用您的自定义代码）

```
private void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string indata = sp.ReadExisting();
    Console.WriteLine("Data Received:");
    Console.Write(indata);
} 
```

要更改换行符，只需检查`indata`字符串并中断字符，将结果存储在全局变量中，然后重用剩余的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:38:56.443

经过挖掘，我发现这个[StackOverflow 问题/答案](https://stackoverflow.com/questions/2299187/what-causes-the-net-serialport-class-datareceived-event-to-fire/2299217#2299217)表明该`DataReceived`事件可能会在意外时间触发。所以，如果可能的话，你应该设置一个`NewLine`并触发它。

作为对这个想法的测试，您可以尝试添加一个按钮并等到您**知道**您有一些数据，然后单击它以向您显示流。如果没有重复，则表明该`DataReceived`事件过于急切且触发不正确。然后，您可能想要检查您的`NewLine`,`DtrEnable`等等`DsrHolding`。

```
private void TestButton_Click(object sender, EventArgs e)
{
    string indata = this.serialPort.ReadExisting();
    MessageBox.Show(indata);
} 
```

# ssrs-2008 - 如何根据参数更改标题列的值

> ID：14708012
> 
> 赞同：0
> 
> 时间：2013-02-05T12:51:49.090
> 
> 标签：ssrs-2008, reporting, reporting-services

我创建了一个报告，我想在其中显示基于参数的列标题。我尝试使用表格和矩阵格式，但我无法减少年份。

```
year=2013 
```

例如，如果我`2013`在报告中选择这意味着它将在报告中显示过去 10 年，即`2013,2012,2011,2010,2009,2008,`直到`2002`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:46:36.657

如果我正确理解您的问题，您想查询数据库并将结果显示在每年一列的表中。您可以通过使用 Matrix 对象和 Column Groups 来做到这一点

通过拖放添加您的 Matrix 对象。选择列组 | 组属性并添加组表达式。

使用以下代码作为您的组表达式。

```
=Year(Fields!Date.Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:33:54.663

我认为有两点：

1.  更改您的 sql 以接受参数并在列名 1、2 等中获取 bast 10 年。
2.  然后在标题或标题中使用类似于`=@Parameter!par.Value - Cdec(Data!1.Value)`显示 2013 到 2002 的标题的表达式。

我希望我清楚吗？

# ios - 使用 Quartz 进行小型图形项目

> ID：14708018
> 
> 赞同：1
> 
> 时间：2013-02-05T12:52:01.087
> 
> 标签：ios, uiview, core-graphics, quartz-graphics

我正在开发一个涉及在屏幕上绘制小图形（线条和路径）的 iOS 项目。

我最初选择使用 Quartz 而不是 OpenGL，因为我需要显示一些基本的形状，并且需要每 5 秒更新一次，所以我认为 Quartz 更好更简单。

我发现我不能简单地在视图中绘制，但我必须继承一个 UIView 并在 drawRect 方法中绘制。

在我的项目中，用户应该能够在图形上进行捏合和缩放，所以我计划在视图中添加一个捏合手势，但我对如何在捏合后重新绘制所有内容持怀疑态度。我是否必须删除所有内容并重新添加子视图以便触发 drawRect 或者有更好的方法来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:24:41.920

使用 Quartz 时，从技术上讲，您不必*对*视图进行子类化并替换`drawRect`，但这可能是最佳实践。当您想重绘窗口时，只需调用`[self setNeedsDisplay];`（如果从子类视图调用，或者`[self.view setNeedsDisplay];`从视图控制器调用）。这将导致为您调用您的`drawRect`方法，它会为您处理一切。

有关更多信息，请参阅[`setNeedsDisplay`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)文档。

# java - Android：如何给文本视图中的文本提供项目符号、换行符

> ID：14708023
> 
> 赞同：9
> 
> 时间：2013-02-05T12:52:13.147
> 
> 标签：java, android, textview

我有一个带有大文本的文本视图，但我想给出项目符号、换行符，我尝试`&#8226`在我的项目符号点中放置 xml 实体`string.xml`，但无法获得换行符并且中间很少有文本，我喜欢使用 justify也

```
String nodata="hi how are you<br/>&#8226welcome to stackoverflow"  
TextView nodata= ((TextView) findViewById(R.id.nodata));
nodata.setText(Html.fromHtml(nodatafound)); 
```

它有点工作，但我无法使用 justify ，有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T06:39:42.743

谢谢大家...我终于结束了

```
String nodata="hi how are you<br/>&#8226;welcome to stackoverflow"
TextView nodata= ((TextView) findViewById(R.id.nodata));
nodata.setText(Html.fromHtml(nodatafound)); 
```

并为左对齐，我确实更改了布局文件`android:layout_gravity=center|left`

我希望有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T13:05:43.640

将此代码放在 strings.xml 中

嗨，你好吗\n

•  欢迎来到stackoverflow

将此文本设置为您的文本视图

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-19T10:44:50.600

如果您想在 java 中执行此操作（我的意思是动态），请使用`\n`换行符和 Unicode 字符作为项目符号 ie `\u25CF`。

这就是我使用它的方式

```
textView.setText("Welcome Username\n\u25CF Some Instructions"); 
```

它看起来像
欢迎用户名
● 一些说明

你的情况应该是这样的

```
textView.setText("hi how are you\n\u25CF welcome to stackoverflow"); 
```

这是一些代码

• = \u2022
● =
\u25CF ○ = \u25CB
▪ = \u25AA
■ = \u25A0
□ = \u25A1
► = \u25BA

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T12:54:31.987

之后你忘记了冒号`&#8226;`

所以把它改成这样：

```
String nodata="hi how are you<br/>&#8226;welcome to stackoverflow"
TextView nodata= ((TextView) findViewById(R.id.nodata));
nodata.setText(Html.fromHtml(nodatafound)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T13:02:44.853

试试这个：

```
String s = "hello world"
           + System.getProperty ("line.separator")
           + "hello android"
           + System.getProperty ("line.separator"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-01T12:55:02.393

在 string.xml 文件中添加 `<string name="str">&#8226;item 1\n &#8226;item 2 \n &#8226; item 3</string>`

# actionscript-3 - as3 Thrift Client 及其返回类型

> ID：14708026
> 
> 赞同：1
> 
> 时间：2013-02-05T12:52:19.620
> 
> 标签：actionscript-3, thrift

我写了一个下面的“.thrift”文件

服务检索服务{

二进制 getImageContent(1: string strImgName);

}

我生成了 2 个客户端，一个在 java 中，另一个在 as3 中（使用最新的 thrift-0.9.0.exe）。

我生成的“retriveService.java”文件有以下方法

```
public ByteBuffer getImageContent(String strImgName) with return type as 'ByteBuffer' 
```

我的“retriveService.as”文件有以下方法

```
function getImageContent(strImgName:String, onError:Function, onSuccess:Function):void; 
```

返回类型为 'void'

由于返回类型为 void，我无法在 as3 实现中获取文件内容。有什么想法我在这里想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:40:08.063

方法结果将作为`onSuccess`函数的参数接收。因此，客户端代码可能如下所示：

```
var s : retriveService = ....
s. getImageContent("imageName", 
    function(e : Error) : void {
        //Handle error
    },
    function(r : ByteArray) : void {
        //Handle result
    }, 
```

# html - 无法识别水平菜单中链接之间的奇怪空间

> ID：14708033
> 
> 赞同：1
> 
> 时间：2013-02-05T12:52:49.207
> 
> 标签：html, css

我正在创建简单的水平菜单。当我悬停项目时，它会改变背景颜色，但在链接左侧留下一些奇怪的 3px 空间，我无法确定它出现的原因以及如何删除它。

菜单在这里： http: [//pokerzysta.site44.com/](http://pokerzysta.site44.com/) ( `Linki, Posty, Forum, Dodaj`) 知道它有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:55:47.277

那是因为您使用 . 以水平方式显示列表`display: inline-block;`。在 HTML 标记中呈现的内容是空格（很可能是 li 标记后的换行符）。

如果您将 li-tags 放在没有空格和换行符的 html 中，则不会发生这种情况：

```
<ul id="main-menu" class="horizontal-list fleft">
    <li><a href="#">Linki</a></li><li><a href="#">Posty</a></li><li><a href="#">Forum</a></li><li><a href="#">Dodaj</a><li>
</ul> 
```

@cimmanon 指出了 Chris Coyier 撰写的一篇关于水平显示列表导航的精彩文章：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:01:11.407

您的 LI 元素之间有空格。通过删除它们或使用

```
float: left; 
```

也可以解决问题（但在你的 UL 之后你应该使用 clear: both）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:05:57.837

您的链接是内联块，因此 HTML 空白实际上使用空间；）一个简单的技巧是将 ul 上的字体大小设置为 0 并在 li 中重置正确的字体大小

在你的情况下：

```
.horizontal-list {
   font-size: 0;
}

.horizontal-list li{
   font-size: 17px;
} 
```

# flash - 从 Flash / ActionScript 以编程方式安装新字体

> ID：14708035
> 
> 赞同：0
> 
> 时间：2013-02-05T12:52:56.517
> 
> 标签：flash, actionscript, fonts

是否可以通过嵌入网站的 Flash 文件以编程方式在系统中安装新字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:58:07.990

没有。您唯一能做的就是礼貌地要求用户下载文件并安装它。

你为什么需要这个？如果只是以您设计的方式显示您的内容，只需将字体嵌入您的 Flash 应用程序。

# python - 在python中从多个文件中添加条目

> ID：14708041
> 
> 赞同：-3
> 
> 时间：2013-02-05T12:53:25.600
> 
> 标签：python

我有一个关于如何从 100 个文件中添加条目（每个文件包含两列）然后将它们写入一个新文件（也将包含两列）的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:59:46.617

不确定您是否也需要找到所有这 100 个文件的解决方案？如果是这样，这是一种方法，包括将它们全部读取并将它们写入连接文件：

```
from os import walk
from os.path import abspath

lines = []
for root, folders, files in walk('./path/'):
    for file in files:
        fh = open(abspath(root + '/' + file), 'rb')
        lines.append(fh.read())
        fh.close()
    # break if you only want the first level of your directory tree

o = open('output.txt', 'wb')
o.write('\n'.join(lines))
o.close() 
```

你也可以做一个“**内存高效**”的解决方案：

```
from os import walk
from os.path import abspath

o = open('output.txt', 'wb')

for root, folders, files in walk('./path/'):
    for file in files:
        fh = open(abspath(root + '/' + file), 'rb')
        for line in fh.readline():
            o.write(line)
            del line
        fh.close()
        del fh
    # break if you only want the first level of your directory tree

o.close() 
```

其中大部分是在 Python 中自动化的（我**认为**），但不管是否懒惰，如果您可以在关闭文件之后以及重用变量名之前和之前从内存中删除对象.. 以防万一？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:55:02.497

你想把它们锁起来吗？即，你想要文件 1 的所有行，然后是文件 2 的所有行，......还是你想要合并它们？文件 1 的第 1 行，文件 2 的第 1 行，...

对于第一种情况：

```
from itertools import chain
filenames = ...
file_handles = [open(fn) for fn in filenames]

with open("output.txt", "w") as out_fh:
    for line in chain(file_handles):
        out_fh.write(line)

for fh in file_handles:
    fh.close() 
```

对于第二种情况：

```
from itertools import izip_longest
filenames = ...
file_handles = [open(fn) for fn in filenames]

with open("output.txt", "w") as out_fh:
    for lines in izip_longest(*file_handles, fillvalue=None):
        for line in lines:
            if line is not None:
                out_fh.write(line)

for fh in file_handles:
    fh.close() 
```

重要提示：永远不要忘记关闭您的文件！

正如@isedev 指出的那样，这种方法对于 100 个文件是可以的，但是当我立即打开所有句柄时，对于数千个文件来说这是行不通的。

如果你想克服这个问题，只有选项1（链接）是合理的......

```
filenames = ...

with open("output.txt", "w") as out_fh:
    for fn in filenames:
        with open(fn) as fh:
            for line in fh:
                out_fh.write(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:56:14.437

这是非常不明确的。目前尚不清楚您的问题是什么。

可能你会做类似的事情：

```
entries = []
for f in ["file1.txt", "file2.txt", ..., "file100.txt"]:
  entries.append(open(f).readlines())
o = open("output.txt", "w")
o.writelines(entries)
o.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:07:03.560

一种更具可扩展性的方式，受 Torxed 方法的启发

```
from os import walk
from os.path import abspath

with open('output.txt', 'wb') as o:
    for root, folders, files in walk('./path/'):
        for filename in files:
            with open(abspath(root + '/' + filename), 'rb') as i:
                for line in i:
                    o.write(line) 
```

# c# - Linq 查询优化

> ID：14708045
> 
> 赞同：1
> 
> 时间：2013-02-05T12:53:47.240
> 
> 标签：c#, xml, linq, lambda, linq-to-xml

如何优化此查询并转换为 lambda ？

```
XElement xde = new XElement("Elements", (from a in rootElement.Elements("Class")
                   where a.Attribute("Location").Value.Equals("FirstFloor") 
                   select (from b in a.Elements("Subject")
                           where b.Attribute("Notify").Value.Equals("001")
                           select b.Elements()))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:57:04.923

在性能方面，我认为您的查询无法优化。

`Equals`但是，您可以通过重新调整`==`和删除不必要的内容来使其更具可读性`select`

```
XElement xde =
        new XElement("Elements", (from a in rootElement.Elements("Class")
                                  where a.Attribute("Location").Value == "FirstFloor"
                                  from b in a.Elements("Subject")
                                  where b.Attribute("Notify").Value == "001"
                                  select b.Elements())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:02:55.710

您可以简单地将节点设置为`string`而不是读取节点的值。因此，如果您的 xml 中缺少属性，您将避免异常。另外我建议您使用与元素名称相对应的范围变量名称（更好的可读性）：

```
XElement xde =
    new XElement("Elements",  
         from c in rootElement.Elements("Class")
         where (string)c.Attribute("Location") == "FirstFloor"
         from s in c.Elements("Subject")
         where (string)s.Attribute("Notify") == "001"
         select s.Elements()); 
```

* * *

还可以考虑使用 XPath（所有查询都适合一行）：

```
new XElement("Elements", rootElement
 .XPathSelectElements("Class[@Location='FirstFloor']/Subject[@Notify='001']/*")); 
```

* * *

Lambda（你也想要方法语法）：

```
new XElement("Elements", 
    rootElement.Elements("Class")
               .Where(c => (string)c.Attribute("Location") == "FirstFloor")
               .Elements("Subject")
               .Where(s => (string)s.Attribute("Notify") == "001")
               .Elements()); 
```

# java - 如何使用 Open nlp 的分块解析器提取名词短语

> ID：14708047
> 
> 赞同：13
> 
> 时间：2013-02-05T12:53:52.807
> 
> 标签：java, nlp, stanford-nlp, opennlp

我是自然语言处理的新手。我需要从文本中提取名词短语。到目前为止，我已经使用 open nlp 的分块解析器来解析我的文本以获取树结构。但我无法从树形结构，open nlp 中是否有任何正则表达式模式，以便我可以使用它来提取名词短语。

下面是我正在使用的代码

```
 InputStream is = new FileInputStream("en-parser-chunking.bin");
    ParserModel model = new ParserModel(is);
    Parser parser = ParserFactory.create(model);
    Parse topParses[] = ParserTool.parseLine(line, parser, 1);
        for (Parse p : topParses){
                 p.show();} 
```

在这里，我得到的输出为

(TOP (S (S (ADJP (JJ 欢迎)) (PP (TO) (NP (NNP Big) (NNP Data.))))) (S (NP (PRP We)) (VP (VP (VBP)) (VP (VBG working) (PP (IN on)) (NP (NNP Natural) (NNP Language) (NNP Processing.can))))) (NP (DT some) (CD one) (NN help)) (NP ( PRP us)) (PP(IN in) (S(VP(VBG提取)) (NP(DT the) (NN名词) (NNS词组)) (PP(IN from) (NP(DT the) (NN tree)) ( WP结构。））））））））））

有人可以帮我获得像 NP、NNP、NN 等名词短语吗？有人可以告诉我是否需要使用任何其他 NP Chunker 来获得名词短语？是否有任何正则表达式模式可以实现相同的目的。

请帮助我。

提前致谢

古斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T07:19:46.333

对象是一`Parse`棵树；您可以使用`getParent()`and`getChildren()`和`getType()`来导航树。

```
List<Parse> nounPhrases;

public void getNounPhrases(Parse p) {
    if (p.getType().equals("NP")) {
         nounPhrases.add(p);
    }
    for (Parse child : p.getChildren()) {
         getNounPhrases(child);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-16T00:49:54.377

如果您只想要名词短语，请使用句子分块器而不是树解析器。代码是这样的（您需要从获得解析器模型的同一位置获取模型）

```
public void chunk() {
    InputStream modelIn = null;
    ChunkerModel model = null;

    try {
      modelIn = new FileInputStream("en-chunker.bin");
      model = new ChunkerModel(modelIn);
    }
    catch (IOException e) {
      // Model loading failed, handle the error
      e.printStackTrace();
    }
    finally {
      if (modelIn != null) {
        try {
          modelIn.close();
        }
        catch (IOException e) {
        }
      }
    }

//After the model is loaded a Chunker can be instantiated.

    ChunkerME chunker = new ChunkerME(model);

    String sent[] = new String[]{"Rockwell", "International", "Corp.", "'s",
      "Tulsa", "unit", "said", "it", "signed", "a", "tentative", "agreement",
      "extending", "its", "contract", "with", "Boeing", "Co.", "to",
      "provide", "structural", "parts", "for", "Boeing", "'s", "747",
      "jetliners", "."};

    String pos[] = new String[]{"NNP", "NNP", "NNP", "POS", "NNP", "NN",
      "VBD", "PRP", "VBD", "DT", "JJ", "NN", "VBG", "PRP$", "NN", "IN",
      "NNP", "NNP", "TO", "VB", "JJ", "NNS", "IN", "NNP", "POS", "CD", "NNS",
      "."};

    String tag[] = chunker.chunk(sent, pos);
  } 
```

然后查看您想要的类型的标签数组

```
http://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html#tools.parser.chunking.api 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-09T04:49:41.893

将从**您的代码**本身继续。该程序块将提供句子中的所有名词短语。使用***getTagNodes()***方法获取 Tokens 及其类型

```
Parse topParses[] = ParserTool.parseLine(line, parser, 1);
Parse words[]=null; //an array to store the tokens
//Loop thorugh to get the tag nodes
for (Parse nodes : topParses){
        words=nodes.getTagNodes(); // we will get a list of nodes
}

for(Parse word:words){
//Change the types according to your desired types
    if(word.getType().equals("NN") || word.getType().equals("NNP") || word.getType().equals("NNS")){
            System.out.println(word);
            }
        } 
```

# c++ - 读取字符显示所有字符后跟一些垃圾字符

> ID：14708055
> 
> 赞同：0
> 
> 时间：2013-02-05T12:54:38.830
> 
> 标签：c++

我有一个程序可以读取包含以下列表的 .DAT 文件：

```
removepeer 452
addpeer 6576
removepeer 54245 
```

在某些时候，它会读出垃圾文字：H。</p>

这是我发现错误的代码的一部分：

```
getline(abc, info, '\n'); //data here displays pretty fine

int count = info.size();

char text[count];

for(int a=0; a<count; a++){
    text[a] = data[a];
}
cout << text << endl; //Some rubbish text found in some printout! 
```

它打印出最后一行，然后是一些垃圾文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:03:31.027

`text`数组不会以 null 结尾，这在使用`operator<<`with时是必需的，`char[]`因为它们被视为以 null 结尾的 c 样式字符串。内存中的随机字符将被写入，直到偶然找到一个空终止符。从技术上讲，超出数组范围的访问是未定义的行为。

要更正，请将空终止符附加到`text`. 由于您的编译器作为可变长度数组的扩展（不是标准 C++，但在 C99 中），您可以将其更改为：

```
char text[count + 1];

// snip...

text[count] = 0; 
```

话虽如此，我不确定您为什么要从`std::string`实例复制到`char[]`. `std::string`实例也可以使用`operator<<`.

# c# - 从代码中设置的 ViewBox 的可见性

> ID：14708056
> 
> 赞同：0
> 
> 时间：2013-02-05T12:54:40.263
> 
> 标签：c#, wpf, visibility, viewbox

在我的窗口上，我有一个 ViewBox 控件，其中包含一个自定义进度条。我在设计模式下将其 Visibility 设置为 Collapsed，因为我只需要在特定时刻（登录应用程序期间）显示它。

在我的进度条（用户控件）中，我有 VisibilityChanged 事件的事件处理程序，我在其中停止和启动我的动画。

当用户单击登录按钮时，我需要显示此 ViewBox，直到登录完成并在成功后再次折叠它。但是，当我（在后面的代码中）设置 ViewBox.Visibility = Visible 时，它​​不会出现。

谁能告诉我为什么，或者如何解决？

XAML：

```
 <Viewbox x:Name="cpProgress" Width="50" Height="50" HorizontalAlignment="Center"   VerticalAlignment="Bottom" Grid.Row="1" Visibility="Collapsed" >
        <lc:CircularProgress />             
    </Viewbox> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:11:42.183

更改`ViewBox.Visibility = Visible`并`cpProgress.Visibility = Visible`确保 Grid 为第 1 行定义了适当的行高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:09:43.647

我终于解决了这个问题。这真的很简单:)。我刚刚忘记了如果我在同一个线程中运行登录过程，因为我的窗口在其中，UI 将挂起，直到登录完成。因此解决方案是生成一个新线程，在其上下文中运行登录并等待`completed`在 UI 线程中设置标志。登录过程必须以异步方式运行，因此 UI 可以绘制我的用户控件。

# mysql - 在 MySQL 中连接一个新的标识符

> ID：14708058
> 
> 赞同：0
> 
> 时间：2013-02-05T12:54:48.423
> 
> 标签：mysql, sql, insert, foreign-keys

我有一个名为 Users 的表，其标识符为 IdUser，即 INT 和 AI。我有另一个名为 Subscription 的表，它具有名为 IdUser 的外键，它与表 Users 的主键相连。

现在，我遇到的问题是：如果当我在用户表中插入一行时，我还想在订阅表中插入一行，我该怎么办？

```
insert into users (nome, cognome, ...) values ('x', 'y', ...)
insert into subscription (...,IdUser) values (..., ????) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:02:26.407

对于 mysql

```
insert into users (nome, cognome, ...) values ('x', 'y', ...);
insert into subscription (...,IdUser) values (...,LAST_INSERT_ID()); 
```

见 [http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:01:30.000

如果您将 MySQL 与 PHP 一起使用（您不应该这样做：[MySQL is deprecated](http://php.net/manual/en/migration53.deprecated.php)）

```
mysql_query("insert into users (nome, cognome, ...) values ('x', 'y', ...)
");
$userID = mysql_insert_id();
mysql_query("insert into subscription (...,IdUser) values (..., ".$userID.")"); 
```

# java - 是否可以在某些字符串文本中同时添加多个字体样式？

> ID：14708067
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:20.087
> 
> 标签：java, javax.imageio

我正在尝试将字符串绘制到图像中。是否可以在同一文本中添加多个字体样式（粗体和斜体）。？

我的代码是：

```
 Graphics g = image.getGraphics();
        Font font = new Font("Arial", Font.ITALIC, 16);

        g.setFont(font);
        g.drawString(text, 100, 100);
        g.dispose(); 
```

但我想用粗体属性添加斜体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:59:40.233

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#Font%28java.lang.String,%20int,%20int%29)，您可以 OR 一起使用您想要的样式。

```
Font font = new Font ("Arial", Font.BOLD | Font.ITALIC, 16); 
```

# java - 基于项目选择的Android xml解析

> ID：14708068
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:21.963
> 
> 标签：java, android, xml, dom, xml-parsing

我想解析显示列表的xml，如下所示

```
 Company ABC
 Company XYZ 
```

当用户选择**Company ABC**时，其子内容应显示如下

```
 Alberta
 Ontario 
```

再次选择阿尔伯塔

```
Calgary 
```

再次选择卡尔加里

```
 CFGM- Country
 Cddr- news talk 
```

依此类推，应显示其子类别

我已经尝试了下面链接中的代码，但它对我不起作用，任何人都可以帮助我**使用任何 xml 解析方法**来解决这个问题，在下面的链接中，我使用了 DOM 方法但仍然无法正常工作....

[在android中使用DOM解析XML](https://stackoverflow.com/questions/14706751/parse-xml-using-dom-in-android)

xml 如下所示

![在此处输入图像描述](../Images/e6366db749c3c0b463ba2b1d72aa7e37.png)

# ios - iOS：Xcode - 如何显示单元格下的内容？

> ID：14708073
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:40.823
> 
> 标签：ios, xcode, nstablecellview

我正在尝试创建一个类似于屏幕截图中的应用程序：

[http://imgur.com/oC1yjUc](http://imgur.com/oC1yjUc)

它看起来像一个表格视图，内容在点击的单元格下显示。有谁知道如何做到这一点。我设法创建了一个包含我想要显示的内容的单元格，并在加载表格时限制单元格的高度。点击时高度只会增加。但这不是我想要的。此外，要显示的内容可以是任何高度，因此我需要相应地调整单元格的大小。

也许还有另一种方法可以做我想要实现的目标？

任何输入将不胜感激。

**编辑：** 好的，我已经在一定程度上工作了，但是这有一些问题：1）一些行只显示前行的数据2）展开和折叠单元格会更改内容，当它应该只显示/隐藏

我的代码：

```
 #import "ViewController.h"
    #import "Data.h"

    @interface ViewController ()

    @end

    @implementation ViewController {
        NSArray *data;
        NSInteger selectedIndex;
        NSIndexPath *selectedCellIndexPath;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        selectedIndex = -1;

        self.navigationItem.title = @"Test App";

        UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil action:nil];
        [[self navigationItem] setBackBarButtonItem:backButton];

        // Create Data array
        Data *data1 = [Data new];
        data1.text = @"Abhijit ipsum dolor sit amet, consectetur adipiscing elit.";
        data1.translation = @"AbhijitDE ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data2 = [Data new];
        data2.text = @"Anurag ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data2.translation = @"AnuragDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data3 = [Data new];
        data3.text = @"Chetan ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data3.translation = @"ChetanDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data4 = [Data new];
        data4.text = @"Eric ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data4.translation = @"EricDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data5 = [Data new];
        data5.text = @"Neha ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsumiraj dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data5.translation = @"NehaDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data6 = [Data new];
        data6.text = @"Nilesh ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data6.translation = @"NileshDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data7 = [Data new];
        data7.text = @"Niraj ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsumiraj dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data7.translation = @"NirajDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        data = [NSArray arrayWithObjects:data1, data2, data3, data4, data5, data6, data7, nil];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 1;
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return data.count;
    }

    // This just a convenience function to get the height of the label based on the comment text
    -(CGFloat)getLabelHeightForIndex:(NSString *)string
    {
        CGSize maximumSize = CGSizeMake(320, 10000);

        CGSize labelHeightSize = [string sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0f] constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping];

        return labelHeightSize.height + 10;

    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UILabel *mainLabel, *secondLabel;
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

            // First label
            mainLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 36.00)];
            mainLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0f];
            mainLabel.textColor = [UIColor blackColor];
            mainLabel.backgroundColor = [UIColor clearColor];
            mainLabel.numberOfLines = 0;
            mainLabel.lineBreakMode = NSLineBreakByWordWrapping;
            // mainLabel.autoresizingMask = UIViewAutoresizingFlexibleHeight;
            // mainLabel.clipsToBounds = YES;
            [cell.contentView addSubview:mainLabel];

            // Second label
            secondLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 10.0, 320.0, 36.00)];
            secondLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0f];
            secondLabel.textColor = [UIColor whiteColor];
            secondLabel.backgroundColor = [UIColor grayColor];
            secondLabel.numberOfLines = 0;
            secondLabel.lineBreakMode = NSLineBreakByWordWrapping;
            // secondLabel.autoresizingMask = UIViewAutoresizingFlexibleHeight;
            // secondLabel.clipsToBounds = YES;
            [cell.contentView addSubview:secondLabel];
        }

        // Get data for the current row
        Data *dataContent = [data objectAtIndex:indexPath.row];

        CGFloat dataTextHeight = [self getLabelHeightForIndex:dataContent.text];

        mainLabel.frame = CGRectMake(0.0, 0.0, 320.0, dataTextHeight);
        mainLabel.text = dataContent.text;

        CGFloat dataTranslationHeight = [self getLabelHeightForIndex:dataContent.translation];

        secondLabel.frame = CGRectMake(0.0, dataTextHeight + 10.00, 320.0, dataTranslationHeight);
        secondLabel.text = dataContent.translation;

        if(selectedIndex == indexPath.row)
        {
            secondLabel.hidden = YES;
        }
        else
        {
            secondLabel.hidden = YES;
        }

        return cell;
    }

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
        // Get data for the current row
        Data *dataContent = [data objectAtIndex:indexPath.row];

        CGFloat dataTextHeight = [self getLabelHeightForIndex:dataContent.text];
        CGFloat dataTranslationHeight = [self getLabelHeightForIndex:dataContent.translation];

        if(selectedIndex == indexPath.row)
        {
            return (dataTextHeight + dataTranslationHeight) + 10;
        }
        else
        {
            return dataTextHeight;
        }
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // An expanded cell is clicked, minimize it
        if(selectedIndex == indexPath.row)
        {
            selectedIndex = -1;
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

            return;
        }

        // If any previous cell is expanded, minimize it
        if(selectedIndex >= 0)
        {
            NSIndexPath *previousPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:previousPath] withRowAnimation:UITableViewRowAnimationFade];
        }

        // Expand the currently expanded cell
        selectedIndex = indexPath.row;
        NSIndexPath *currentPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:currentPath] withRowAnimation:UITableViewRowAnimationFade];
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:50:55.727

动态大小的细胞是一种痛苦，然后是一些。查找它，因为在 StackOverflow 上有一堆问题以及一些有趣的解决方案。

就底视图而言，您应该研究一下名为[HHPanningTableViewCell](https://github.com/gloubibou/HHPanningTableViewCell)的出色开源项目。我们已经在几个项目中使用过，它可以解决问题。不幸的是，存在一些性能问题（请参阅我在项目中的未解决问题），因此请确保在设备上对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:02:08.763

在表格视图委托`tableView:didSelectRowAtIndexPath:`方法中，当点击“源语言”单元格时，使用`insertRowsAtIndexPaths:withRowAnimation:`和`deleteRowsAtIndexPaths:withRowAnimation:`方法插入一个新单元格，插入的单元格为“目标语言”。当用户再次点击时，删除“目标语言”单元格。在这两种方法中，都可以指定您希望的显示动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:19:47.470

好的。我想到了。

如果有人需要，这是我更新的代码：

```
 #import "ViewController.h"
    #import "Data.h"

    @interface ViewController ()

    @end

    @implementation ViewController {
        NSArray *data;
        NSInteger selectedIndex;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        selectedIndex = -1;

        self.navigationItem.title = @"Test App";

        UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil action:nil];
        [[self navigationItem] setBackBarButtonItem:backButton];

        // Create Data array
        Data *data1 = [Data new];
        data1.text = @"Abhijit ipsum dolor sit amet, consectetur adipiscing elit.";
        data1.translation = @"AbhijitDE ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data2 = [Data new];
        data2.text = @"Anurag ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data2.translation = @"AnuragDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data3 = [Data new];
        data3.text = @"Chetan ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data3.translation = @"ChetanDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data4 = [Data new];
        data4.text = @"Eric ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data4.translation = @"EricDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data5 = [Data new];
        data5.text = @"Neha ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsumiraj dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data5.translation = @"NehaDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data6 = [Data new];
        data6.text = @"Nilesh ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data6.translation = @"NileshDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        Data *data7 = [Data new];
        data7.text = @"Niraj ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsumiraj dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        data7.translation = @"NirajDE ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

        data = [NSArray arrayWithObjects:data1, data2, data3, data4, data5, data6, data7, nil];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 1;
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return data.count;
    }

    -(CGFloat)getLabelHeightForIndex:(NSString *)string
    {
        CGSize maximumSize = CGSizeMake(320, 10000);
        CGSize labelHeightSize = [string sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0f] constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping];

        return labelHeightSize.height + 10;
    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        static const int mainLabelTag = 1, secondLabelTag = 2;
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

            // First label
            UILabel *mainLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 36.00)];
            mainLabel.tag = mainLabelTag;
            mainLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0f];
            mainLabel.textColor = [UIColor blackColor];
            mainLabel.backgroundColor = [UIColor clearColor];
            mainLabel.numberOfLines = 0;
            mainLabel.lineBreakMode = NSLineBreakByWordWrapping;
            mainLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
            // mainLabel.clipsToBounds = YES;
            [cell.contentView addSubview:mainLabel];

            // Second label
            UILabel *secondLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 10.0, 320.0, 36.00)];
            secondLabel.tag = secondLabelTag;
            secondLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0f];
            secondLabel.textColor = [UIColor whiteColor];
            secondLabel.backgroundColor = [UIColor grayColor];
            secondLabel.numberOfLines = 0;
            secondLabel.lineBreakMode = NSLineBreakByWordWrapping;
            secondLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
            // secondLabel.clipsToBounds = YES;
            [cell.contentView addSubview:secondLabel];
        }

        // Get data for the current row
        Data *dataContent = [data objectAtIndex:indexPath.row];

        CGFloat dataTextHeight = [self getLabelHeightForIndex:dataContent.text];

        UILabel *mainLabel = [cell.contentView viewWithTag:mainLabelTag];
        CGRect mainLabelFrame = mainLabel.frame;
        mainLabel.frame = CGRectMake(0.0, 0.0, mainLabelFrame.size.width, dataTextHeight);
        mainLabel.text = dataContent.text;

        CGFloat dataTranslationHeight = [self getLabelHeightForIndex:dataContent.translation];

        UILabel *secondLabel = [cell.contentView viewWithTag:secondLabelTag];
        CGRect secondLabelFrame = mainLabel.frame;
        secondLabel.frame = CGRectMake(0.0, dataTextHeight + 10.00, secondLabelFrame.size.width, dataTranslationHeight);
        secondLabel.text = dataContent.translation;

        if(selectedIndex == indexPath.row)
        {
            secondLabel.hidden = NO;
        }
        else
        {
            secondLabel.hidden = YES;
        }

        return cell;
    }

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
        // Get data for the current row
        Data *dataContent = [data objectAtIndex:indexPath.row];
        CGFloat dataTextHeight = [self getLabelHeightForIndex:dataContent.text];
        CGFloat dataTranslationHeight = [self getLabelHeightForIndex:dataContent.translation];

        if(selectedIndex == indexPath.row)
        {
            return (dataTextHeight + dataTranslationHeight) + 10;
        }
        else
        {
            return dataTextHeight;
        }
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
        // An expanded cell is clicked, minimize it
        if(selectedIndex == indexPath.row)
        {
            selectedIndex = -1;
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            return;
        }

        // If any previous cell is expanded, minimize it
        if(selectedIndex > -1)
        {
            NSIndexPath *previousPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
            selectedIndex = -1;
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:previousPath] withRowAnimation:UITableViewRowAnimationAutomatic];
        }

        // Expand the currently expanded cell
        selectedIndex = indexPath.row;
        NSIndexPath *currentPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:currentPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    @end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T13:32:14.647

也许尝试类似的东西

```
cell.clipsToBounds = YES;
cell.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

?

# wordpress - 安装 Wordpress 插件期间的提示

> ID：14708074
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:43.550
> 
> 标签：wordpress

我正在寻找一种在安装 Wordpress 插件期间提示管理员的方法。

我希望管理员设置将在下一部分安装中使用的参数。

你知道怎么做吗 ？你有什么线索吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:23:09.283

提示安装的唯一方法是创建2个插件，一个用于插件“框架”的安装和配置，另一个用于框架的使用。

wordpress 中的“安装”功能不会显示任何内容，它是在后端启动的。

# google-apps - 外部用户的 Google Apps SAML2 行为

> ID：14708077
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:50.107
> 
> 标签：google-apps, saml-2.0

当我们为谷歌应用启用 SAML2 SSO 时 - 我们希望谷歌应用外部的用户通过外部 SAML2 IdP 登录。但是 - 看起来谷歌有一个限制 - 即使在外部 SAML2 Idp 上进行身份验证 - 特定用户名也应该出现在 Google Apps 用户存储中。为什么我们会在 Google Apps 中看到这种限制？这将要求所有用户都已配置到 Google Apps。理想情况下，我们希望用户通过 SAML2 登录到 Google Apps。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:43:19.170

确实如此 - 有许多选项可用于将用户添加到 Google Apps。请参阅： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=179832&topic=14586&ctx=topic](http://support.google.com/a/bin/answer.py?hl=en&answer=179832&topic=14586&ctx=topic)

如果您有本地 AD 服务器，Google 的同步工具应该适合。一些联合产品，如 PingFederate，也具有此功能（例如：[https](https://support.pingidentity.com/s/marketplace-integration-details?recordId=a7i1W0000004ID9QAM) ://support.pingidentity.com/s/marketplace-integration-details?recordId=a7i1W0000004ID9QAM - 免责声明我为 Ping 工作）。

# php - 使用 PHP 的 MySQL 搜索限制

> ID：14708078
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:50.993
> 
> 标签：php, mysql, apache, web, pdo

我在我的网站上添加了一个搜索功能，用户可以在其中搜索我页面的内容。

代码：

```
 try
        {
            $pdo = new PDO("mysql:host=hostname;dbname=searchdb", "searchuser", "searchpw", 
array(PDO::ATTR_PERSISTENT => true));
        }
        catch (PDOException $ex) {
            echo $ex->getMessage() . "<br>";
            exit('Connection Closed');
        }
        $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        $stmt = $pdo->prepare($query);
        $stmt->setFetchMode(PDO::FETCH_ASSOC);
        $stmt->execute(); 
```

现在我想知道如何保护它免受搜索过载。我相信任何人都可以创建一个简单的机器人程序，它可以通过太多的搜索查询浪费我的带宽/cpu。

我的意思是我可以跟踪 IP 地址并从那里限制它，但如果可能的话，我想避免这条路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:58:34.377

有很多方法，也许可以尝试限制每个时间间隔对特定 ip 地址的搜索，创建一个表并存储搜索 ips 和搜索时间，并允许尽可能多的搜索.. 简单高效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:05:20.187

没有像“搜索过载”这样的东西。
有一种称为“拒绝服务”的一般攻击类型，由多个同时请求对任意应用程序部分执行。所以，你必须阅读一般的 DOS 保护，因为这种攻击与 mysql 或 PDO 无关。

还有一个有用的建议：一定
要解决他们的外表问题。
换句话说，只解决实际问题，而不是想象的问题。
只要您没有这样的“搜索过载”问题 - 也不要采取反措施。

# ruby-on-rails - 在 Rails 中从 AJAX 获取回调

> ID：14708079
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:52.333
> 
> 标签：ruby-on-rails, ruby, ajax

在我的 index.html.erb 我有一个按钮，如：

```
<%= button_to 'Test', question_path, :remote => true, :class => "btn btn-primary btn-large" %> 
```

这会在我的控制器中触发一个方法，该方法向服务器请求一个简单的字符串值，并且该方法成功地得到了答案。这已由`puts question.gets`.

我想将该答案传递回 index.html.erb 并将其显示在`<div>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:59:34.337

在此处创建`app/views/questions/show.js.erb`并添加您需要的 js 代码。

```
# controller
def show
  @question = ... # fetch question
end

# show.js.erb
$('#div_id').text('<%= escape_javascript @question.gets %>'); 
```

# objective-c - Objective C 不确定在哪里调用方法？

> ID：14708081
> 
> 赞同：0
> 
> 时间：2013-02-05T12:55:59.320
> 
> 标签：objective-c, nsurlconnection

在这里展示我对 Objective C 的了解程度。这两个方法中的第二个被上面的方法调用。虽然我完全不知道在哪里？我希望能够将调用第二种方法的部分包装在 if 语句中，以根据返回的布尔值确定文件是否存在。示例代码将不胜感激，如果有人也可以解释如何调用第二种方法，那也很棒。

```
-(void) queryResponseForURL:(NSURL *)inURL {
    NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:inURL];
    [request setHTTPMethod:@"HEAD"];
    NSURLConnection * connection = [NSURLConnection connectionWithRequest:request delegate:self];
    // connection starts automatically
}

-(BOOL)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    if([(NSHTTPURLResponse *)response statusCode] == 200){
        NSLog(@"file exists");
        return YES;
    }else return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:47:35.870

它被 NSURLConnection 对象调用，所以你不能干预调用它的代码。但是您不应该这样做 - 委托方法的目的是让您能够连接到那些无法访问的代码。

顺便说一句，方法签名是这样的：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

它没有返回值，并且您不能更改方法签名，因为它是 NSURLConnection 对象协议的一部分。请记住，您不调用此方法，而是调用连接对象。但是您可以*响应*该方法。您可以在此方法中处理您的“if file..”代码，或从中调用另一个方法，而不是尝试返回 BOOL。您应该记住，这是在确认已启动响应时（异步）触发的 - 因此您可以检查 HTTP 标头信息，例如 mime 类型 - 但它不能保证完成数据传输（还有[其他委托方法为此](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)）。

另请参阅[NSURLConnection 的开发人员指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:07:25.590

第二种方法是委托或回调方法。当您的连接实例收到来自您连接的服务器的响应时，将调用回调方法。NSURLConnection 有一些关于 NSObject 的非正式协议。这意味着当 NSObject 的任何子类实现了这些方法时，将自动调用这些协议中定义的方法。您的 NSObject 子类已实现这些回调方法之一，因此调用此方法。大多数委托被声明为正式协议，并且需要在您的类中显式定义才能使用它们。NSURLConnection 的非正式协议是规则的例外，尽管这将在未来的 iOS 版本中改变。

PS：Objective-C 中的协议本质上与 Java / C# 中的接口相同。

更多信息在这里：http: [//developer.apple.com/library/ios/ipad/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)

* * *

我猜你想在收到错误回复时取消连接？你应该做的是：

1.  将您的 URLConnection 存储在 ivar 或属性中（我个人更喜欢属性）。
2.  在您的`-connection:didReceiveResponse`委托方法中，如果响应状态代码不是适当的值，请取消您的连接。您可以为此目的使用您的 ivar 或财产。

# iphone - 指向整数转换的不兼容指针将 nsstring 发送到“NSUIInteger”类型的参数

> ID：14708082
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:00.800
> 
> 标签：iphone, nsinteger

我在下面的语句中收到此警告“Incopatible Pointer to integer conversion sent nsstring to parameter of type 'NSUIInteger' (aka unsigned Int)”如何解决这个问题请指导提前谢谢。

```
 DetailTitLbl.text=[lat_long_Array objectAtIndex:parTbl.placemark_Title]; 
```

parTbl.placemark_Title--> 是存储在核心数据表中的字符串类型。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:57:05.040

```
DetailTitLbl.text=[lat_long_Array objectAtIndex:[parTbl.placemark_Title intValue]]; 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:00:48.363

方法 'objectAtIndex' 的参数必须是 NSInteger。

您可以转换该变量。

```
 NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init]
 NSInteger index = [[numberFormatter numberFromString:parTbl.placemark_Title] intValue]
 DetailTitLbl.text=[lat_long_Array objectAtIndex:index]; 
```

# php - 解决 PHP4 到 PHP5 升级错误

> ID：14708083
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:04.743
> 
> 标签：php, php4

我有一个最近升级到 PHP5 的客户。他有一个错误说

```
Parse error: syntax error, unexpected T_CLONE, expecting T_STRING in ms/kernel/object.php on line 528 
```

我正在查看代码，但无法弄清楚为什么会这样。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:02:53.740

由于您没有提供代码，我只能猜测您有使用 now 保留关键字`clone`(from `T_CLONE`) 的类。

如果您只是简单地将所有实例替换为`clone`with `aclone`or `clone1`or something，就可以了，尽管这是一个非常老套的解决方案。这是一个关键指标，表明您使用的任何库都是专门为 PHP4 编写的，并且尚未升级到 5。

# algorithm - 找到所有叶子节点的分支为真

> ID：14708087
> 
> 赞同：1
> 
> 时间：2013-02-05T12:56:11.893
> 
> 标签：algorithm, binary-tree

考虑以下二叉树：（取自[此处](http://lcm.csa.iisc.ernet.in/dsa/node87.html)）

![](../Images/7805ca95573f731597ee3f591bb21636.png)

鉴于叶节点要么是真要么是假，我怎样才能找到所有叶节点都为真的分支（或多个分支）？

因此，如果只有 8、5、6 或 7 为真，那么第一个分支将不匹配（它需要 9 为真才能匹配），但第二个分支将匹配，因为它的所有叶子都为真。

即使为这种类型的搜索识别这个名称也会有所帮助，所以我可以谷歌它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:07:18.170

您可以使用递归函数，深入研究树并自下而上确定某个分支的所有叶子是否为真。然后可以将这些分支存储在某个列表中。

这是一些 Python 代码。使用树的根节点作为第一个参数和一个空列表作为第二个参数调用此函数，列表将填充正确的分支。

```
def allTrue(node, trueList=[]):
    if isLeaf(node):
        return node.value == True
    else:
        leftTrue = allTrue(node.left, trueList)
        rightTrue = allTrue(node.right, trueList)
        bothTrue = leftTrue and rightTrue
        if bothTrue:
            trueList.append(node)
        return bothTrue 
```

需要注意的一件事：许多编程语言试图变得聪明或懒惰，不评估`x and y`, if的第二个参数`x`已经为假。然而，在这种情况下，如果左分支不是全真，这将导致不访问右分支，从而错过一些全真分支。因此，递归调用最好转到单独的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:08:07.510

如果两个孩子的子树的所有叶子都为真，则您可以进行后序树遍历并标记每个非叶节点 x 为真，否则为假（这是孩子标签的 AND 操作）。这样你就可以用你想要的属性递归地标记整棵树。

# java - 生成类之间转换的代码

> ID：14708090
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:15.383
> 
> 标签：java, eclipse, type-conversion

在我正在进行的一个项目中，我们有不同的系统。由于这些系统应该独立发展，我们有许多 CommunicationLib 来处理这些系统之间的通信。CommunicationLib 对象不在任何系统内部使用，而仅用于系统之间的通信。由于许多功能需要数据检索，我经常被迫创建与 CommLib 对象相同的“本地”系统对象。我使用 Converter Utility 类将此类对象转换为 CommLib 对象。

代码可能如下所示：

```
public static CommLibObjX objXToCommLib(objX p) {
    CommLibObjX b = new CommLibObjX();
    b.setAddressName(p.getAddressName());
    b.setCityId(p.getCityId());
    b.setCountryId(p.getCountryId());
    b.setFieldx(p.getFieldx());
    b.setFieldy(p.getFieldy());
            [...]

    return b;
} 
```

有没有办法自动生成这样的代码？使用 Eclipse 或其他工具？某些字段可能有不同的名称，但我想生成一个 Converter 方法草稿并手动编辑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:11:17.903

尝试 Apache commons-beanutils

```
BeanUtils.copyProperties(p, b); 
```

对于属性名称相同的所有情况，它将属性值从源 bean 复制到目标 bean

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:13:19.647

如果您觉得需要自动生成源代码，那么您可能做错了什么。我认为您需要重新检查两个“系统”之间的通信设计。这些“系统”如何通信？

*   如果它们位于不同的计算机或不同的进程中，请设计一个有线协议供它们使用，而不是序列化对象。
*   如果它们是一起使用的类，则设计更好的实体类，它们都适合它们。

# android - 在 DatabaseHandler 扩展 SQLiteOpenHelper 中未调用 onCreate 方法

> ID：14708093
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:28.177
> 
> 标签：android, sqlite

这基本上是我的第一个 android 应用程序，我一直在尝试使用预填充的 sqllite 数据库来解决我的要求。

**我的问题是 onCreate 函数没有被调用。**

我从很多地方获取了一些代码并将它们组合起来形成了这个类。

[在 Android 中更新预填充的数据库](https://stackoverflow.com/questions/4189956/updating-prepopulated-database-in-android)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

还有一些来自 android.com

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Locale;
import java.util.Random;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {

    SQLiteDatabase db;
    private static final String TAG = "DataBaseHelper";
    int id = 0;
    Random random = new Random();
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    // Constructor
    public DatabaseHandler(Context context) {
        super(context, DefinitionContract.DATABASE_NAME, null, DefinitionContract.DATABASE_VERSION);
        Log.d(TAG, "DatabaseHandler constructor called\n");
        db = getWritableDatabase();
        this.myContext = context;
        //createDB();
    }

    @Override
    public void onCreate(SQLiteDatabase db){
        Log.d(TAG, "onCreate called\n");
        createDB();
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.d(TAG, "onUpgrade called\n");
        Log.w(TAG, "Upgrading DB from version " + oldVersion + " to " +
                    newVersion + ", which will destroy all old data");

        // Drop older table if existed
        String sql  = "DROP TABLE IF EXISTS " + DefinitionContract.CATEGORY_TABLE_NAME;
        db.execSQL(sql);

        sql = "DROP TABLE IF EXISTS " + DefinitionContract.CONTENTS_TABLE_NAME;
        db.execSQL(sql);

        // Create table again
        onCreate(db);
    }

    public void createDataBase(SQLiteDatabase db) {
        Log.d(TAG, "createDataBase called\n");
        createDB();
        db.execSQL(DefinitionContract.CREATE_CATEGORY_TABLE);
        db.execSQL(DefinitionContract.CREATE_CONTENTS_TABLE);
    }

    private void createDB() {
        Log.d(TAG, "createDB called\n");
        boolean dbExist = dbExists();
        Log.d("SQL Helper", "Condition:\n");
        if(!dbExist) {
            Log.d("SQL Helper", "Condition 1\n");
            copyDataBase();
        } else if(dbExist) {
            Log.d("SQL Helper", "Condition 2\n");
            copyDataBase();
        }
    }

    private boolean dbExists() {
        Log.d(TAG, "dbExists called\n");
        //File dbFile = new File(DefinitionContract.DATABASE_PATH + DefinitionContract.DATABASE_NAME);
        //return dbFile.exists();

        SQLiteDatabase db = null;
        try {
            String dbPath = DefinitionContract.DATABASE_PATH + DefinitionContract.DATABASE_NAME;
            db = SQLiteDatabase.openDatabase(dbPath, null, SQLiteDatabase.OPEN_READWRITE);
            db.setLocale(Locale.getDefault());
            db.setLockingEnabled(true);
            db.setVersion(DefinitionContract.DATABASE_VERSION);
        }
        catch(SQLiteException e){
            Log.e("SQL Helper", "database not found");
        }
        if(db != null) {
            db.close();
        }
        return db != null ? true : false;
    }

    private void copyDataBase() {
        Log.d(TAG, "copyDataBase called \n");
        InputStream iStream = null;
        OutputStream oStream = null;
        String outFilePath = DefinitionContract.DATABASE_PATH + DefinitionContract.DATABASE_NAME;
        try{
            iStream = myContext.getAssets().open(DefinitionContract.DATABASE_NAME_EXT);
            oStream = new FileOutputStream(outFilePath);
            byte[] buffer = new byte[1024];
            int length;
            while((length = iStream.read(buffer))>0) {
                oStream.write(buffer,0,length);
            }
            oStream.flush();
            oStream.close();
            iStream.close();
        }
        catch(IOException ioe){
            throw new Error("Problem copying database from resource file.");
        }
    }

    public void openDataBase() throws SQLException {
        String myPath = DefinitionContract.DATABASE_PATH + DefinitionContract.DATABASE_NAME_EXT;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {
        Log.d(TAG, "close called\n");
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    public void readDB() {
        Log.d(TAG, "readDB called\n");
        String selectQuery = "SELECT  * FROM " + DefinitionContract.DATABASE_ONLYNAME+"."+DefinitionContract.CATEGORY_TABLE_NAME;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                int arraySize = cursor.getColumnCount();
                String newlog   = "arraySize=" + arraySize + "*****";
                for(int i = 0; i < arraySize; i++) {
                    newlog  = newlog + cursor.getString(i)+ "\n";
                }

                Log.d("Details: ", newlog);
            } while (cursor.moveToNext());
        }
    }

} 
```

我已经进行了谷歌搜索并尝试修复它，但它还没有工作。

[Android SQLiteOpenHelper：未调用 onCreate() 方法。为什么？](https://stackoverflow.com/questions/6791852/android-sqliteopenhelper-oncreate-method-is-not-called-why)

[SQLiteOpenHelper 无法调用 onCreate？](https://stackoverflow.com/questions/5024223/sqliteopenhelper-failing-to-call-oncreate)

LogCat 仅显示“调用 DataBaseHandler 构造函数”，然后显示“关闭 VM”

但是如果我删除**db = getWritableDatabase();** 我的构造函数中的行进一步工作并显示正在调用 readDB() 函数。

一些可能有助于理解我的代码的定义：

```
public static final String DATABASE_NAME        = "mydb.db";

public static final String DATABASE_NAME_EXT        = "mydb.sqllite";

// Database path
public static final String DATABASE_PATH = "/data/data/com.abhishekgdotcom.collection/databases/"; 
```

有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:46:36.780

`onCreate()`好吧，方法对我不起作用的真正原因是因为它仅在应用程序第一次运行时被调用。或者，当您更改 DATABASE_VERSION 时`onUpgrade`，它会被调用，而后者又会再次调用该`onCreate`方法。

我相信这是默认的android工作。

PS我可以通过更改数据库版本或从中删除数据库文件来使onCreate每次都正常工作`/data/data/packagename/databases/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:06:41.257

我会向您推荐另一种代码组织，因为您在同一个类中制作了许多不相关的东西。通常一个好的设计是定义一个`OpenHelper`继承自该类的类，`SQLiteHelper`它只是创建或更新数据库而已。然后，从另一个外部类（通常来自您的活动），实例化`OpenHelper`该类，然后从那里调用 getWritableDatabase()。也许你会很容易找到错误。

# r - R中的log10转换

> ID：14708095
> 
> 赞同：3
> 
> 时间：2013-02-05T12:56:29.347
> 
> 标签：r, transformation

我有一个关于数据转换的问题。我想在 R中转换一个名为`zinc`using transformation 的变量`log10`

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T04:40:58.637

只需使用

```
log10(zinc) 
```

并将其分配给适当的对象（*例如*包含锌的数据框）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-18T17:23:53.880

如果锌中的任何值为零，您可能需要执行 log10(zinc + 1)，因为 log10(0) 未定义。

我发现[这个 youtube 视频](https://www.youtube.com/watch?v=5571wc0iWCI)对解释 R 中的 log10 很有用。

# c# - 使用马尔可夫模型为太阳能收集生成随机数

> ID：14708098
> 
> 赞同：1
> 
> 时间：2013-02-05T12:56:33.503
> 
> 标签：c#, random, simulation, markov

如何在**C#**中使用马尔可夫模型生成**随机数**？我注意到这里几乎所有马尔可夫算法的应用都是用于随机编写文本。是否有某个地方的源代码或教程可以让我完全理解它是如何工作的？我的目标实际上是生成随机数来**模拟太阳能收集**。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:51:40.283

首先决定你的马尔可夫模型有多深。你看前面的数字吗？前两个数字？前三个数字？也许更深？

其次，查看一些实际的太阳能数据并提取一组 1、2 或 3 个数字后面的概率。理想情况下，您将能够获得完全覆盖，但很可能存在差距。对于那些推断或输入一些平均值/随机值的人。

到目前为止，所有这些都是数据。

第三生成前 1、2 或 3 个数字。从您的数据库中选择正确的组合并随机选择可能的追随者之一。当我这样做时，我也有一个低概率的随机元素，所以事情不会陷入困境。

删除 1、2 或 3 个数字中最早的元素。将其他数字向下移动并在末尾添加新数字。重复直到你有足够的数据。

这是我的 1-deep Markov 词生成器的简短摘录，显示了部分数据表：

```
// The line addEntry('h', "e 50 a 23 i 12 o  7 @ 100") shows the the letter
// 'h' is followed by 'e' 50% of the time, 'a' 23% of the time, 'i' 12% of 
// the time, 'o' 7% of the time and otherwise some other letter, '@'.
//
// Figures are taken from Gaines and tweaked. (see 'q')
private void initMarkovTable() {
    mMarkovTable = new HashMap<Character, List<CFPair>>(26);

    addEntry('a', "n 21 t 17 s 12 r 10 l  8 d  5 c  4 m  4 @ 100");
    addEntry('b', "e 34 l 17 u 11 o  9 a  7 y  5 b  4 r  4 @ 100");
    addEntry('c', "h 19 o 19 e 17 a 13 i  7 t  6 r  4 l  4 k  4 @ 100");
    addEntry('d', "e 16 i 14 a 14 o 10 y  8 s  6 u  5 @ 100");
    addEntry('e', "r 15 d 10 s  9 n  8 a  7 t  6 m  5 e  4 c  4 o  4 w 4 @ 100");
    addEntry('f', "t 22 o 21 e 10 i  9 a  7 r  5 f  5 u  4 @ 100");
    addEntry('g', "e 14 h 14 o 12 r 10 a  8 t  6 f  5 w  4 i  4 s  4 @ 100");
    addEntry('h', "e 50 a 23 i 12 o  7 @ 100");
    // ...
} 
```

数据被组织为字母频率对。我使用“@”字符来表示“在这里选择任何字母”。您的数据将改为数字频率对。

为了选择输出，我读取了相应的数据行并生成了一个随机百分比。长时间扫描累积频率的数据，直到累积频率超过随机百分比。那就是您选择的字母（或您的情况下的数字）。****

# linux - 需要创建接受参数的shell脚本

> ID：14708101
> 
> 赞同：1
> 
> 时间：2013-02-05T12:56:42.083
> 
> 标签：linux

Shell 脚本接受两个参数，我有一个名为 createproject.sh 的脚本文件

```
 #!/bin/bash
     echo "Project Name :$1 "
     echo "Group Id : $2 "
     mvn archetype:generate -DgroupId=$2 -DartifactId=$1 -DarchetypeArtifactId=maven-      archetype-quickstart -DinteractiveMode=false

     cd $1
     mvn eclipse:eclipse -Dwtpversion=2.0 
```

我不得不通过命令执行这个

```
 sh createproject.sh projectname com.test.app 
```

projectname 和 com.test.app 在哪里需要项目名称和包结构，但我需要做类似的事情

```
 sh createproject.sh -P projectname and -G com.test.app 
```

这样用户就可以被告知 -P ：项目名称和 -G ：组 ID 。请让我知道更改

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T12:59:31.880

例子：

```
#!/bin/bash
echo "the $1 eats a $2 every time there is a $3"
echo "bye:-)" 
```

[来源 - 维基](http://how-to.wikia.com/wiki/How_to_read_command_line_arguments_in_a_bash_script)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:59:00.833

检查 Bash 关于[位置参数](http://www.gnu.org/software/bash/manual/bashref.html#Positional-Parameters)的文档...

> 位置参数是由一个或多个数字表示的参数，而不是单个数字 0。位置参数在调用时从 shell 的参数分配，并且可以使用 set 内置命令重新分配。位置参数 N 可以引用为 ${N}，或者当 N 由单个数字组成时引用为 $N。位置参数不能用赋值语句赋值。set 和 shift 内置命令用于设置和取消设置它们（请参阅 Shell 内置命令）。执行 shell 函数时，位置参数会被临时替换（请参阅 shell 函数）。
> 
> 当扩展包含多个单个数字的位置参数时，必须将其括在大括号中。

# html - 在手机上显示键盘时调整窗口大小

> ID：14708102
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:43.933
> 
> 标签：html, css, mobile

我开发了该网站的移动版本。按照响应式设计的原则，块大小是一个百分比。

html, body{ 宽度：100%; 高度：100% }

什么或什么时候输入框有焦点虚拟键盘出现。由于屏幕高度减小，其他单元的大小也减小（以主体百分比表示）。我怎样才能避免这种情况？我怎样才能避免这种情况？即块高度必须从设备屏幕的高度计算。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:06:14.617

有没有特别的理由`height: 100%`？你只需要布局来适应屏幕的宽度，而高度很可能是`height:auto;`

# javascript - 可选且按任何顺序

> ID：14708106
> 
> 赞同：0
> 
> 时间：2013-02-05T12:56:53.583
> 
> 标签：javascript, regex

我正在尝试使用以下模式解析 ISO 8601 持续时间：

```
P(\d+Y)?(\d+M)?(\d+D)?(\d+W)?T(\d+H)?(\d+M)?(\d+S)? 
```

但问题是它适用于`PT158M12S`但不适用于`PT12S158M`. 是否可以使后面的组`P`和后面的组`T`按任何顺序排列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:03:06.373

Try

```
P(\d+[YMDW]){0,4}T(\d+[HMS]){0,3} 
```

(shorter version of Rohit's answer)

However this does not prevent to repeat any group, e.g. `PT1M2M`. You will have to check that afterwards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:21:50.063

Google 的 Closure 库具有用于解析此类 ISO 8601 持续时间的内置函数：[Interval.fromIsoString(duration)](http://closure-library.googlecode.com/svn/docs/class_goog_date_Interval.html#goog.date.Interval.fromIsoString)

# c - 将一个空数组从函数传递到主函数

> ID：14708107
> 
> 赞同：1
> 
> 时间：2013-02-05T12:56:55.797
> 
> 标签：c

我正在编写一个函数，它将一些 char 数组作为`main()`. 此函数返回指向 char 的指针。存在三个问题：

1.  如果一切顺利，这个函数应该返回一个指向传递数组的子数组的指针。由于`main()`需要能够访问这个子数组，我可以`malloc`在函数中使用来创建这个全局子数组。
2.  我需要该函数将一个空字符数组传递`{}`给`main()`.
3.  要进行错误检查，我需要传递`NULL`指针。我只对第二个问题有疑问。如何将指向空字符数组的指针传递`{}`给`main()`?

我不知道在`malloc`这里是否会有所帮助。

`**EDIT**`：

好吧，我想我造成了一些混乱。让我指定确切的问题。我正在编写表单的功能`char * test(char * a, int start, int end, int len)`。现在，对此的典型输入将是一个数组，例如`{'a', 'b', 'c'}`数组`start = 0`, `end = 3`, `len = 3`。`len`这是输入数组的长度。`start`是起始位置。在此示例中，它`0`是数组的开头。现在该`end`值表示从该值开始并且不从该值中`start`获取`end`任何元素`start`。在这个例子中，它意味着，`'a'`从那里开始并取 3 个元素，即`'a'`,`'b'`和`'c'`。并用这样的选择形成一个新的数组。在这里，我们得到原始数组。所以让`a[] = {'a', 'b', 'c'}`. 然后`test(a , 0 , 3 , 3)`将返回一个指针 `{'a', 'b', 'c'}`. 同样，`test(a , 0 , 2 , 3)`将返回一个指向的指针`{'a', 'b'}`并将`test(a , 1 , 2 , 3)`返回一个指向 的指针`{'b', 'c'}`。现在我希望函数返回一个`NULL`指针 if `(start < 0) || (end < 0) || (0 == len) || (start+ end > len)`。所以在以下情况下，函数返回一个`NULL`指针。 `test(a , 0 , 4 , 3)` `test(a , 1 , 3 , 3)` `test(a , 2 , 2 , 3)` `test(a , 3 , 1 , 3)` `test(a , -1 , 2 , 3)` `test(a , -1 , -2 , 3)`

如果`a[] = {}` then`test(a , 0 , 1 , 3)`应该返回`NULL`。我明白了这一点。现在如果`end`值是`0`，我想函数返回指向空数组的指针`{}`。函数不应修改原始数组。

`EDIT NO 2:`

我正在做来自[http://admin.cs.mum.edu/Pretest/sampletest.htm](http://admin.cs.mum.edu/Pretest/sampletest.htm)的示例问题 3 。希望有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:05:15.387

您可以返回结构，该结构将包含指向地址和长度的指针，这些指针将在您的函数中填充。

```
struct ret_me
{
    char *p;
    int len;
}

.....

main()
{
    .......
    struct ret_me xxx;
    xxx=your_fun(...);
    if(xxx.len == 0)
    ...array is empty...
    ..........

} 
```

# esper - 计算布尔结果以显示在 Esper 中一对事件是否匹配

> ID：14708112
> 
> 赞同：1
> 
> 时间：2013-02-05T12:57:06.303
> 
> 标签：esper, complex-event-processing

我正在尝试创建一个 EPL 语句，以显示订单是否成功。

该声明应根据购买的 ID 将购买与付款相匹配。结果应包含购买的 ID 和一个布尔值，该值指示购买是否与付款匹配。

当匹配成功时，我得到了下面的语句来返回 true。但是，当购买退出 30 秒时间窗口而没有与付款匹配时，我也想返回 false。

```
SELECT Purchase.purchaseId AS purchaseId, true AS successful
FROM Purchase.win:time(30), Payment.win:time(30) 
WHERE Purchase.purchaseId = Payment.purchaseId 
```

如果事件的顺序无关紧要，那也很好。例如，如果在购买之前付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:22:58.710

请改用外连接。

像这样的东西：

```
SELECT Purchase.purchaseId AS purchaseId, s2 is not null as successfull
FROM Purchase.win:time(30) as s1 left outer join Payment.win:time(30) as s2
on s1.purchaseId = s2.purchaseId 
```

# python - Python列表和元组连接使用加号等于

> ID：14708118
> 
> 赞同：0
> 
> 时间：2013-02-05T12:57:54.633
> 
> 标签：python, list, concatenation, tuples

> **可能重复：**
> [List += Tuple vs List = List + Tuple](https://stackoverflow.com/questions/13332987/list-tuple-vs-list-list-tuple)

所以我遇到了一些相当奇怪的事情，想问是否有人知道为什么会这样。

列表中存在一些数据，我们想将元组中的所有值添加到该列表中（如`list.extend`）

```
>>> data = [0,1,2,3,4]
>>> data += (21,22,23) # all is well
>>> print(data)
[0, 1, 2, 3, 4, 21, 22, 23] 
```

还

```
>>> data = [0,1,2,3,4]
>>> data.extend( (21,22,23) ) # all is well
>>> print(data)
[0, 1, 2, 3, 4, 21, 22, 23] 
```

然而

```
>>> data = [0,1,2,3,4]
>>> data = data + (21,22,23)
TypeError: can only concatenate list (not "tuple") to list 
```

这两个在我看来是相同的操作，但后者失败了。我从中得到的是`+=`使用`extend`where 后者没有，但就是这样。

有人能解释一下这些操作之间的区别吗？更有趣的是为什么？

这似乎发生在 2.7.3 和 3.2.1 中

# android - 绘制位图 - 在 Android 中将内容包装到 Surface 视图

> ID：14708119
> 
> 赞同：2
> 
> 时间：2013-02-05T12:57:57.010
> 
> 标签：android, bitmap, surfaceview

我创建了一个带有线程的自定义表面视图类，并在相对布局内的主要活动中添加了自定义表面视图。现在我在自定义表面视图类构造函数中声明一个位图。

```
public static Bitmap mbitmap;
public Surface(Context ctx, AttributeSet attrSet) {
        super(ctx, attrSet);
        context = ctx;
        mbitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.abc);         
        SurfaceHolder holder = getHolder();
        holder.addCallback(this);
    } 
```

我把它画在画布上

```
public void doDraw(Canvas canvas) {
    canvas.drawBitmap(mbitmap, 0, 0, null);
} 
```

我得到了成功的绘图。但它占据了整个屏幕

```
<RelativeLayout
    android:id="@+id/outer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
 <com.cg.Surface
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
       <RelativeLayout
        android:id="@+id/processing_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </RelativeLayout>
</RelativeLayout> 
```

即使我使用 Wrap_Content 作为高度和宽度，我也会在后面绘制整个屏幕。如何单独绘制适当大小的位图图像？在自定义表面视图类中使用此覆盖方法是否可能：

```
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
int height)
{ } 
```

如果没有如何在其中使用 setMeasuredDimension 并限制位图中的表面视图大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:06:33.457

我们可以使用一个矩形，并在其中使用 Matrix 绘制一个图像，这样我们就可以实现

```
public void doDraw(Canvas canvas)
{
int width = mbitmap.getWidth();
int height = mbitmap.getHeight();
float h= (float) height;
float w= (float) width;
Matrix mat=new Matrix();
mat.setTranslate( 500, 500 );
mat.setScale(800/w ,800/h);
canvas.drawBitmap(mbitmap, mat, null);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T13:38:51.187

我们可以使用

```
public void drawBitmap (Bitmap bitmap, Rect src, Rect dst, Paint paint); 
```

我是说 ：

```
canvas.drawBitmap(bitmap, src, dst, paint); 
```

onDraw 中的方法

```
Rect src = new Rect(0, 0, width, height);
Rect dst = new Rect(x, y, x + width, y + height); 
```

我希望能做到。我认为这可能对其他人有所帮助，因为很长一段时间我都在等待自己达到这个解决方案。

# c# - 谷歌地图 - 确保 LatLng 的价值

> ID：14708120
> 
> 赞同：0
> 
> 时间：2013-02-05T12:58:00.770
> 
> 标签：c#, google-maps, google-maps-api-3

我需要保护用于在谷歌地图上画线的 LatLng 值，因为我有一些工作要做，我不希望任何人复制它..

用于绘制线条的点是否对任何人都可见以查看和复制它，还是最终得到保护？

我在 ajax 调用的成功函数中绘制线条：

```
 var position = new google.maps.LatLng(x, y);
        var myOptions = {
            zoom: 11,
            center: position,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(
            document.getElementById("googlemap"),
            myOptions);

        $.ajax({
            type: "GET",
            dataType: "json",
            url: url,
            success: function (data) {
                $.each(data, function () {
                    $.each(this, function (index, Segment) {
                        $.each(Segment, function () {
                            for (var i = 0; i < Segment.X.length - 1; i++) {
                                var line = new google.maps.Polyline({
                                    path: [new google.maps.LatLng(Segment.Y[i], Segment.X[i]), new google.maps.LatLng(Segment.Y[i + 1], Segment.X[i + 1])],
                                    strokeColor: color,
                                    strokeOpacity: 1.0,
                                    strokeWeight: 2,
                                    map: map
                                });
                            }
                        });
                    });
                });
            }
        }); 
```

那么这一点是否可以复制，因为它是在客户端绘制的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:53:24.347

只要您在客户端渲染线，您就无法保护这些点。一旦您创建了一条折线，这条折线就可以访问并且可以检索到路径（无论您是否以某种方式加密了 JSON）。

到目前为止，我看到的唯一方法是服务器端渲染，例如包含作为叠加层的线的图像或 FusionTableLayer（从具有私有访问权限的 fusionTable 创建）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:37:33.210

是的，客户端代码本质上是不安全和可复制的。例如，您对特定 URL 发出 AJAX 请求，这将返回一些带有一系列点的 JSON。如果其他人直接访问该 URL，他们将能够从同一个 JSON 中获取积分。

# java - 播放框架上的JPA枚举查询错误

> ID：14708128
> 
> 赞同：1
> 
> 时间：2013-02-05T12:58:36.243
> 
> 标签：java, jpa, playframework

我正在使用 java playframework 1.2.4 进行项目，并且我有一个 @Entity 类。它看起来像

```
@Entity
public class EmployeeType extends Model {
    public static enum TYPE { HOURLY, DAILY, MONTHLY };
    public static enum NATIONALITY { LOCAL, FOREIGN };
    @Required
    @Enumerated(EnumType.STRING)
    public TYPE type;
    @Required
    @Enumerated(EnumType.STRING)
    public NATIONALITY nationality;
} 
```

在我的控制器类中，我想使用我的 2 个枚举属性获取 EmployeeTypes 列表。查询看起来像

```
Query query = JPA.em().createQuery("SELECT e FROM EmployeeType e where " +
            "e.nationality = :nationality " +
            "and e.type = :type");
query.setParameter("nationality", NATIONALITY.LOCAL);
query.setParameter("type", TYPE.HOURLY);

List<models.EmployeeType> employeeType = query.getResultList() 
```

给出此错误：发生 IllegalArgumentException：参数值 [LOCAL] 与类型 [models.EmployeeType$NATIONALITY] 不匹配

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:02:04.833

该错误可能是因为您`enum`的 s 嵌套在您的实体中。您需要在实体名称上访问它。

您可以将`setParameter`代码更改为： -

```
query.setParameter("nationality", EmployeeType.NATIONALITY.LOCAL);
query.setParameter("type", EmployeeType.TYPE.HOURLY); 
```

# asp.net - 在 IIS 上部署 Web API 时出错

> ID：14708130
> 
> 赞同：0
> 
> 时间：2013-02-05T12:58:38.490
> 
> 标签：asp.net, iis

我有一个 Web API 项目，将部署在 IIS 上。当我通过 VS2012 发布项目时，我总是遇到错误，例如 - 无法添加文件 'Scripts/jquery.unobtrusive-ajax.min.js'。访问被拒绝。包中的任何文件都不会复制到 wwwroot 中。

但是，在另一台 PC 上它可以完美运行。

有人可以就此提出建议吗？

谢谢博腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:50:50.797

我通过以管理员身份运行 VS2012 解决了这个问题。好像是权限问题。

# algorithm - trie 和 radix trie 数据结构有什么区别？

> ID：14708134
> 
> 赞同：114
> 
> 时间：2013-02-05T12:58:52.857
> 
> 标签：algorithm, data-structures, tree, patricia-trie, radix-tree

*trie*和*radix trie*数据结构是否相同？

如果它们不一样，那么基数特里（AKA Patricia trie）的含义是什么？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-02-05T13:45:40.657

基数树是 trie 的压缩版本。在 trie 中，您在每条边上写一个字母，而在 PATRICIA 树（或基数树）中，您存储整个单词。

现在，假设您有单词`hello`,`hat`和`have`。要将它们存储在*trie*中，它看起来像：

```
 e - l - l - o
  /
h - a - t
      \
       v - e 
```

你需要九个节点。我已将字母放在节点中，但实际上它们标记了边缘。

在基数树中，您将拥有：

```
 *
           /
        (ello)
         /
* - h - * -(a) - * - (t) - *
                 \
                 (ve)
                   \
                    * 
```

你只需要五个节点。上图中的节点是星号。

因此，总体而言，基数树占用*的内存更少*，但实现起来更难。否则两者的用例几乎相同。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-04-09T15:39:58.803

> 我的问题是*Trie*数据结构和*Radix Trie*是否是一回事？

简而言之，没有。*Radix Trie*类别描述了*Trie*的特定类别，但这并不意味着所有尝试都是基尝试。

> 如果它们 [n't] 相同，那么 Radix trie（又名 Patricia Trie）的含义是什么？

我假设您打算写*的不在*您的问题中，因此我进行了更正。

类似地，PATRICIA 表示特定类型的基数树，但并非所有基数树都是 PATRICIA 树。

* * *

### 什么是特里？

“Trie”描述了一种适合用作关联数组的树数据结构，其中分支或边对应于键的*一部分*。*部分*的定义在这里相当模糊，因为尝试的不同实现使用不同的位长来对应边。例如，二叉树的每个节点有两条边，对应于 0 或 1，而 16 路特里树的每个节点有 16 条边，对应于 4 位（或十六进制数字：0x0 到 0xf）。

这张从 Wikipedia 检索到的图表似乎描绘了一个带有（至少）键“A”、“to”、“tea”、“ted”、“ten”、“i”、“in”和“inn”的树插入：

![基本特里](../Images/e46b4971bac3e7dc8aff2b6a93951a72.png)

如果这个 trie 要存储键 't' 或 'te' 的项目，则每个节点都需要额外的信息（图中的数字）来区分空节点和具有实际值的节点。

* * *

### 什么是基数？

正如 Ivaylo Strandjev 在他的回答中所描述的那样，“基数特里树”似乎描述了一种压缩常见前缀部分的特里树形式。考虑一个 256 路的 trie，它使用以下静态分配索引键“smile”、“smiled”、“smiles”和“smiling”：

```
root['s']['m']['i']['l']['e']['\0'] = smile_item;
root['s']['m']['i']['l']['e']['d']['\0'] = smiled_item;
root['s']['m']['i']['l']['e']['s']['\0'] = smiles_item;
root['s']['m']['i']['l']['i']['n']['g']['\0'] = smiling_item; 
```

每个下标访问一个内部节点。这意味着要检索`smile_item`，您必须访问七个节点。八个节点访问对应于`smiled_item`和`smiles_item`，九个对应于`smiling_item`。对于这四个项目，总共有十四个节点。但是，它们都有前四个字节（对应于前四个节点）。通过压缩这四个字节以创建`root`对应于的 a `['s']['m']['i']['l']`，四个节点访问已被优化掉。这意味着更少的内存和更少的节点访问，这是一个很好的指示。可以递归地应用优化以减少访问不必要的后缀字节的需要。最终，您只需要比较*trie 索引位置的搜索键和索引键之间的差异*. 这是一个基数树。

```
root = smil_dummy;
root['e'] = smile_item;
root['e']['d'] = smiled_item;
root['e']['s'] = smiles_item;
root['i'] = smiling_item; 
```

要检索项目，每个节点都需要一个位置。使用“smiles”的搜索键和`root.position`4 的 a，我们访问`root["smiles"[4]]`，恰好是`root['e']`。我们将其存储在一个名为 的变量中`current`。`current.position`是 5，也就是 和 之间的差的位置`"smiled"`，`"smiles"`所以接下来的访问将是`root["smiles"[5]]`。这将我们带到`smiles_item`, 和字符串的结尾。我们的搜索已终止，并且该项目已被检索，只有三个节点访问而不是八个。

* * *

### 什么是 PATRICIA 特里？

PATRICIA trie 是基数尝试的变体，它应该只存在`n`用于包含`n`项目的节点。在上面我们粗略演示的 radix trie 伪代码中，总共有五个节点：（`root`它是一个空节点；它不包含实际值）`root['e']`、`root['e']['d']`、`root['e']['s']`和`root['i']`。在 PATRICIA trie 中应该只有四个。由于 PATRICIA 是一种二进制算法，因此让我们以二进制形式查看这些前缀可能有何不同。

```
smile:   0111 0011  0110 1101  0110 1001  0110 1100  0110 **0**101  0000 0000  0000 0000
smiled:  0111 0011  0110 1101  0110 1001  0110 1100  0110 **0**101  0110 0100  0000 0000
smiles:  0111 0011  0110 1101  0110 1001  0110 1100  0110 **0**101  0111 0011  0000 0000
smiling: 0111 0011  0110 1101  0110 1001  0110 1100  0110 **1**001  0110 1110  0110 0111 ... 
```

让我们考虑按上面介绍的顺序添加节点。`smile_item`是这棵树的根。不同之处（粗体以使其更容易发现）位于 的最后一个字节`"smile"`，位于第 36 位。直到此时，我们所有的节点都具有*相同的*前缀。`smiled_node`属于`smile_node[0]`. `"smiled"`和之间的区别`"smiles"`出现在第 43 位，其中`"smiles"`有一个 '1' 位，`smiled_node[1]`所以`smiles_node`.

而不是使用`NULL`分支和/或额外的内部信息来表示搜索何时终止，分支链接*到*某处的树，因此当要测试的偏移量*减少*而不是增加时搜索终止。这是这样一*棵树*的简单图（尽管 PATRICIA 确实更像是一个循环图，而不是一棵树，正如您将看到的），它包含在下面提到的 Sedgewick 的书中：

![简单的 PATRICIA 图](../Images/1dbeab8605c78b4dd675d92e562ebbad.png)

一个更复杂的涉及变长密钥的 PATRICIA 算法是可能的，尽管 PATRICIA 的一些技术特性在此过程中丢失了（即任何节点都包含与它之前的节点相同的前缀）：

![复杂的 PATRICIA 图](../Images/5484f8bf52d0c32a8638fd55505eae70.png)

通过这样的分支，有很多好处： 每个节点都包含一个值。这包括根。结果，代码的长度和复杂性变得更短，实际上可能更快一些。遵循至少一个分支和最多`k`分支（其中`k`是搜索关键字中的位数）来定位项目。节点*很小*，因为它们每个只存储两个分支，这使得它们非常适合缓存局部性优化。这些属性使 PATRICIA 成为我迄今为止最喜欢的算法......

我将在这里缩短这个描述，以减少我即将发生的关节炎的严重程度，但如果你想了解更多关于 PATRICIA 的信息，你可以查阅 Donald Knuth 的“计算机编程艺术，第 3 卷”等书籍，或 Sedgewick 的任何“{your-favourite-language} 中的算法，第 1-4 部分”。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-11-12T20:50:16.750

**TRIE：**
我们可以有一个搜索方案，而不是将整个搜索键与所有现有键（例如哈希方案）进行比较，我们还可以比较搜索键的每个字符。按照这个想法，我们可以构建一个结构（如下所示），它具有三个现有的键——“<em>dad”、“<em>dab”和“<em>cab”。

```
 [root]
     ...// | \\...
           |  \
           c   d
           |    \
          [*]    [*]
      ...//|\.  ./|\\...        Fig-I
        a       a
       /       /
     [*]      [*]
 ...//|\..  ../|\\...
    /        /   \
   B        b     d
  /        /       \
 []       []       []

(cab)   (dab)     (dad) 
```

这本质上是一棵具有内部节点的 M-ary 树，表示为 [ * ] 和叶节点，表示为 [ ]。这种结构称为***trie***。每个节点的分支决策可以保持等于字母表中唯一符号的数量，比如 R。对于小写英文字母 az，R=26；对于扩展的 ASCII 字母，R=256 和二进制数字/字符串 R=2。

**Compact TRIE：**
通常情况下，***trie***中的节点使用 size=R 的数组，因此当每个节点的边数较少时会导致内存浪费。为了规避内存问题，提出了各种建议。基于这些变化，***trie***也被命名为“<em>compact trie”和“<em>compressed trie”。虽然一致的命名法很少见，但紧凑型树的最常见版本***是***通过在节点具有单边时对所有边进行分组来形成的。使用这个概念，上面（图一）带有键“ ***dad*** ”、“dab”和“cab”的树可以采用以下形式。

```
 [root]
     ...// | \\...
           |  \
          cab  da
           |    \
          [ ]   [*]                Fig-II
               ./|\\...
                 |  \
                 b   d
                 |    \
                []    [] 
```

请注意，“c”、“a”和“b”中的每一个都是其相应父节点的唯一边，因此，它们被合并为单个边“cab”。类似地，'d' 和 a' 合并为标记为“da”的单个边。

**Radix Trie：**
术语*radix*在数学中表示数字系统的基础，它本质上表示表示该系统中任何数字所需的唯一符号的数量。例如，十进制系统是基数十，二进制系统是基数二。使用类似的概念，当我们对通过底层表示系统的唯一符号的数量来表征数据结构或算法感兴趣时，我们用术语“基数”来标记这个概念。例如，某些排序算法的“基数排序”。在同一条逻辑中，***trie的所有变体***其特征（如深度、内存需求、搜索未命中/命中运行时等）取决于底层字母的基数，我们可以称它们为基数“trie's”。例如，当使用字母 az 时，未压缩和压缩的***trie ，我们可以将其称为 radix 26*** ***trie***。任何只使用两个符号（传统上是 '0' 和 '1'）的 trie 都可以称为 radix 2 ***trie***。然而，不知何故，许多文献将术语“Radix Trie”限制为仅用于压缩的***trie***。

**PATRICIA Tree/Trie 的前奏：**
有趣的是，即使作为键的字符串也可以使用二进制字母表示。如果我们假设 ASCII 编码，那么键“dad”可以通过按顺序写入每个字符的二进制表示来以二进制形式写入，例如“<strong>01100100 *01100001* **01100100** ”通过写入二进制形式的 'd', 'a ', 和 'd' 顺序。使用这个概念，可以形成一个***trie （带有基数 2）。***下面我们使用简化的假设来描述这个概念，即字母“a”、“b”、“c”和“d”来自较小的字母表而不是 ASCII。

*图 III 的注意事项：如前所述，为了便于描述，我们假设一个只有 4 个字母 {a,b,c,d} 的字母表，它们对应的二进制表示是“00”、“01”、“10”和“11”分别。这样，我们的字符串键“dad”、“dab”和“cab”分别变为“110011”、“110001”和“100001”。对此的尝试将如下图 III 所示（从左到右读取位，就像从左到右读取字符串一样）。*

```
 [root]
             \1               
              \
              [*]
             0/ \1               
             /   \
           [*]   [*]         
           0/     /               
           /     /0
         [*]    [*]      
        0/      /               
        /      /0
      [*]    [*]
     0/     0/ \1                Fig-III
     /      /   \
    [*]   [*]   [*]
     \1     \1    \1
      \      \     \
      []     []    []
    (cab)   (dab) (dad) 
```

**PATRICIA Trie/Tree：**
如果我们使用单边压缩来压缩上面的二叉树***（***图 III），它的节点会比上面显示的少得多，但是节点仍然会多于 3，它包含的键的数量. ***Donald R. Morrison***（在 1968 年）发现了一种创新的方法，使用二叉树***来***描述仅使用 N 个节点的 N 个键，他将这种数据结构命名为***PATRICIA***. 他的 trie 结构基本上摆脱了单边（单向分支）；在这样做的过程中，他还摆脱了两种节点的概念——内部节点（不描述任何键）和叶节点（描述键）。与上面解释的压缩逻辑不同，他的 trie 使用不同的概念，其中每个节点都包含一个指示，指示要跳过多少位密钥以做出分支决策。他的 PATRICIA trie 的另一个特点是它不存储键 - 这意味着这种数据结构不适合回答诸如*列出与给定前缀匹配的所有键*之类的问题，但对于查找*键是否存在或不在特里*. 尽管如此，从那时起，Patricia Tree 或 Patricia Trie 一词已被用于许多不同但相似的含义，例如，表示紧凑的 trie [NIST]，或表示具有基数 2 的基数树 [如微妙的方式在 WIKI] 等等。

**可能不是 Radix Trie 的 Trie：**
*Ternary Search Trie*（又名 Ternary Search Tree）通常缩写为***TST***是一种数据结构（由*J. Bentley*和*R. Sedgewick*提出），看起来非常类似于具有三向分支的 trie。对于这样的树，每个节点都有一个特征字母“x”，因此分支决策是由一个键的字符是否小于、等于或大于“x”来驱动的。由于这个固定的 3 路分支特性，它为 trie 提供了一种节省内存的替代方案，尤其是当 R（基数）非常大时，例如 Unicode 字母表。有趣的是，与 (R-way) ***trie***不同，TST的特性不受 R 的影响。例如，TST 的搜索未命中是*ln(N)*与R-way Trie 的*log [R] (N)*相反。TST 的内存要求，与 R-way ***trie***不同，它也不是*R*的函数。所以我们应该小心地将 TST 称为 radix-trie。我个人认为我们不应该称它为 radix-trie，因为（据我所知）它的特征都不受其底层字母的基数 R 的影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-10-24T15:31:36.980

在尝试中，大多数节点不存储密钥，而只是在密钥和扩展它的节点之间的路径上的跳跃。大多数这些跃点都是必要的，但是当我们存储长单词时，它们往往会产生长链的内部节点，每个节点只有一个子节点。这是尝试需要太多空间的主要原因，有时甚至超过 BST。

[![在此处输入图像描述](../Images/4b809b4ba542cb2b4d61d9ebf29a18ec.png)](https://i.stack.imgur.com/DZOKU.png)

基数尝试（又名基数树，又名帕特里夏树）基于我们可以以某种方式压缩路径的想法，例如在“中间 t 节点”之后，我们可以在一个节点中使用“hem”，或者在一个节点中使用“idote” .

这是比较 trie 与 radix trie 的图表：

[![在此处输入图像描述](../Images/1b6667e649ec809657cfd10c9acff133.png)](https://i.stack.imgur.com/PCc4a.png)

原始的 trie 有 9 个节点和 8 个边，如果我们假设边有 9 个字节，每个节点有 4 个字节的开销，这意味着

```
 9 * 4 + 8 * 9 = 108 bytes. 
```

右边的压缩树有 6 个节点和 5 条边，但在这种情况下，每条边都带有一个字符串，而不仅仅是一个字符；但是，我们可以通过分别考虑边引用和字符串标签来简化操作。这样，我们仍将计算每条边 9 个字节（因为我们将在边成本中包含字符串终止符字节），但我们可以将字符串长度的总和作为第三项添加到最终表达式中；所需的总字节数由下式给出

```
 6 * 4 + 5 * 9 + 8 * 1 = 77 bytes. 
```

对于这个简单的 trie，压缩版本需要的内存减少了 30%。

# r - 如何将用户评分列表转换为R中的矩阵

> ID：14708140
> 
> 赞同：1
> 
> 时间：2013-02-05T00:56:37.627
> 
> 标签：r, matrix

我正在研究协同过滤问题，并且在将原始数据重塑为用户评分矩阵时遇到了问题。我得到了一个评级数据库，其中包含“电影”、“用户”和“评级”列。从这个数据库中，我想获得一个大小为#users x #movies 的矩阵，其中每一行表示用户的评分。

这是一个最小的工作示例：

```
# given this:
ratingDB <- data.frame(rbind(c(1,1,1),c(1,2,NA),c(1,3,0), c(2,1,1), c(2,2,1), c(2,3,0), 
                         c(3,1,NA), c(3,2,NA), c(3,3,1)))
names(ratingDB) <- c('user', 'movie', 'liked')

#how do I get this?
userRating <- matrix(data = rbind(c(1,NA,0), c(1,1,0), c(NA,NA,1)), nrow=3) 
```

我可以使用两个 for 循环来解决问题，但这当然不能很好地扩展。任何人都可以通过矢量化解决方案帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:40:08.987

这可以在没有任何循环的情况下完成。它适用于以下功能`matrix`：

```
# sort the 'liked' values (this is not neccessary for the example data)
vec <- with(ratingDB, liked[order(user, movie)])

# create a matrix
matrix(vec, nrow = length(unique(ratingDB$user)), byrow = TRUE)

     [,1] [,2] [,3]
[1,]    1   NA    0
[2,]    1    1    0
[3,]   NA   NA    1 
```

这会将存储的向量转换`ratingDB$liked`为矩阵。该参数`byrow = TRUE`允许按行排列数据（默认为按列）。

* * *

**更新：如果`NA`案例不在数据框中怎么办？** （见@steffen 的评论）

首先，删除包含的行`NA`：

```
subDB <- ratingDB[complete.cases(ratingDB), ]

  user movie liked
1    1     1     1
3    1     3     0
4    2     1     1
5    2     2     1
6    2     3     0
9    3     3     1 
```

可以重建完整的数据帧。该函数`expand.grid`用于生成`user`和的所有组合`movie`：

```
full <- setNames(with(subDB, expand.grid(sort(unique(user)), sort(unique(movie)))),
                 c("user", "movie"))

  movie user
1     1    1
2     2    1
3     3    1
4     1    2
5     2    2
6     3    2
7     1    3
8     2    3
9     3    3 
```

现在，子数据帧`subDB`和完整组合数据帧的信息`full`可以用`merge`函数进行组合：

```
ratingDB_2 <- merge(full, subDB, all = TRUE)

  user movie liked
1    1     1     1
2    1     2    NA
3    1     3     0
4    2     1     1
5    2     2     1
6    2     3     0
7    3     1    NA
8    3     2    NA
9    3     3     1 
```

结果与原始矩阵相同。因此，可以应用相同的过程将其转换为`liked`值矩阵：

```
matrix(ratingDB_2$liked, nrow = length(unique(ratingDB_2$user)), byrow = TRUE)

     [,1] [,2] [,3]
[1,]    1   NA    0
[2,]    1    1    0
[3,]   NA   NA    1 
```

# ios - 如何部署到运行 ios 6.1 的越狱设备？

> ID：14708143
> 
> 赞同：1
> 
> 时间：2013-02-05T12:59:40.767
> 
> 标签：ios, objective-c, jailbreak

我正在学习 iOS 编程，是否可以将我的应用程序部署到越狱的 ios 6.1 设备上？如果有请指教，谢谢。顺便说一句，我在 Mac OS X Mountain Lion 10.8.2 上使用 Xcode 4.6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:50:08.410

1.  在越狱设备上安装 appsync 5.0+。
2.  [从这里](https://mega.co.nz/#!aohhQThK!Bx68RwB3-THB1xx3KrFeMyZUkQRkZmTLxXXmWXIRmF8)下载jailcoder 。右键单击 JailCoder.app -> 显示包内容，然后从文件夹资源。
3.  将两个证书 iPhone Developer.cer 和 iPhone Developer.p12 复制到您的桌面。
4.  然后 CMD+Space 并键入 Keychain ENTER（打开 Keychain Access），从左侧视图中选择登录。
5.  单击文件菜单单击导入项目，选择 iPhone Developer.cer 导入。选择始终信任并提供系统要求的密码。
6.  再次单击文件菜单单击导入项目，选择 iPhone Developer.p12 进行导入。
7.  现在输入密码“jailcoder”并忽略错误消息。而已！现在尝试构建或归档您的项目。

祝你好运

# python - 搜索没有 html 标签的漂亮汤输出

> ID：14708150
> 
> 赞同：2
> 
> 时间：2013-02-05T12:59:57.317
> 
> 标签：python, class, sorting, beautifulsoup

我正在做一个项目，该项目需要从实时 Flash 图表中显示的数据输入（位于 的数据记录图表`http://137.205.144.34/flash/index.html#menuIndex=1&accordionIndex=2&menuId=mimic1&menuStruct=S1R2M3C1H1`。由于无法直接访问 html，我使用 Firebug 监控我的活动，并找到了我想要的数据存储在`http://137.205.144.34/services/unload.cmd?format=csvx&sched=&start=-240:00:00&id=75631&step=864`. 但是，当我尝试访问这个 url 时，它会自动将一个文件（包含数据）保存到我的电脑，所以我无法访问 html 源代码。使用该 url，我使用 beautifulsoup 导入数据，但我无法使用 html 标签搜索或操作它，因为它们是未知的。我真正想要的唯一数据是最新的每小时读数 - 约 1300 行之一。在那一行中，我只需要最后一个值。有一种我可以找到 html 标签的方法？如果没有，那么提取我需要的数据位的最佳方法是什么？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:27:28.150

您正在下载的文件中没有 HTML。它是一个逗号分隔的文件，你应该使用[csv 模块](http://docs.python.org/2/library/csv.html)来解析它。

此代码将打印每行中的第一项（包含日期和时间的项）：

```
import csv

with open('unload.cmd', 'r') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        print row[0] 
```

假设您正在使用以默认名称下载的文件，则此方法有效。

为了首先以编程方式下载文件，将其导入字符串，然后将其用作源文件`csv.reader()`：

```
import urllib
import csv
import StringIO

url = 'http://137.205.144.34/services/unload.cmd?format=csvx&sched=&start=-240:00:00&id=75631&step=864'
f = urllib.urlopen(url)
data = f.read()

reader = csv.reader(StringIO.StringIO(data))
for row in reader:
    if row: print row[0] 
```

# android - 如何与android中的xml文件进行通信

> ID：14708152
> 
> 赞同：0
> 
> 时间：2013-02-05T13:00:07.037
> 
> 标签：android, xml, file, sync

我的应用程序应该能够在线和离线工作。当我有互联网时，我将连接到 tomcat 服务器并获取 json 对象并显示详细信息。

但如果我无法访问互联网，我希望我的应用程序能够正常工作。所以我的想法是当我最后一次与服务器通信时，将数据存储在移动设备中某个文件夹的 xml 文件中。是否可以？

如果是这样，我该怎么做..有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:06:26.257

也许您可以使用[首选项](http://developer.android.com/reference/android/preference/package-summary.html)或数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:09:45.160

您可以将数据存储在内部存储器中，并且每次访问服务器时都会删除旧内容。

# iphone - iphone：用于 Web Applicaiton 文本输入的带小数点的数字键盘

> ID：14708153
> 
> 赞同：2
> 
> 时间：2013-02-05T13:00:07.273
> 
> 标签：iphone, html

Iphone type=number step=any 截断小数点后的尾随零。

这里有一个案例：

我希望在另一个框中输入 28.90 美元（90 和 9），但 iphone 将两者都截断为 28.9。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:10:52.660

```
 NSNumberFormatter *fmt = [[NSNumberFormatter alloc] init];
 [fmt setFormat:@"0.##"];
  NSLog(@"%@", [fmt stringFromNumber:[NSNumber numberWithFloat:28.902]]);
  NSLog(@"%@", [fmt stringFromNumber:[NSNumber numberWithFloat:28.9]]);
  NSLog(@"%@", [fmt stringFromNumber:[NSNumber numberWithFloat:28.0]]); 
```

# google-play - 如何以编程方式在 Google Play 上添加应用评 论？

> ID：14708154
> 
> 赞同：2
> 
> 时间：2013-02-05T13:00:12.497
> 
> 标签：google-play

我想请求评论或为包裹添加新评论（带有配额以避免粗略的垃圾邮件）。那么有 Google Play 评论 API 吗？

# php - 以秒和分钟范围显示时间值背后的逻辑

> ID：14708157
> 
> 赞同：0
> 
> 时间：2013-02-05T13:00:17.913
> 
> 标签：php

我想知道显示时间戳（如 x 分钟前或 x 小时前）以及几个小时后显示确切时间（如**下午 7:57 发布**的确切时间）背后使用的逻辑，就像他们在邮件网站和 Twitter 等中所做的那样。

我怎么知道何时显示秒/分钟/小时范围以及何时以上午/下午格式显示实际时间？请建议用于实现此目的的业务逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:06:09.633

从 php 手册：

```
<?php
function nicetime($date)
{
    if(empty($date)) {
        return "No date provided";
    }

    $periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
    $lengths         = array("60","60","24","7","4.35","12","10");

    $now             = time();
    $unix_date         = strtotime($date);

       // check validity of date
    if(empty($unix_date)) {    
        return "Bad date";
    }

    // is it future date or past date
    if($now > $unix_date) {    
        $difference     = $now - $unix_date;
        $tense         = "ago";

    } else {
        $difference     = $unix_date - $now;
        $tense         = "from now";
    }

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
    }

    $difference = round($difference);

    if($difference != 1) {
        $periods[$j].= "s";
    }

    return "$difference $periods[$j] {$tense}";
}

$date = "2009-03-04 17:45";
$result = nicetime($date); // 2 days ago

?> 
```

[http://www.php.net/manual/de/function.time.php#89415](http://www.php.net/manual/de/function.time.php#89415)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:02:55.380

使用 PHP 以常规方式打印时间戳，并使用 jQuery 的 timeago 插件来做一些花哨的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:05:10.803

你可以使用这样的东西

```
$time = $now - $time;

if ($time < 60) {
    $name = "second";
}
elseif ($time < 3600)
{
    $time /= 60;
    $name = "minute";
}
elseif ($time < 86400)
{
    $time /= 3600; //86400;
    $name = "hour";
}
elseif ($time < 604800)
{
    $time /= 86400; //604800;
    $name = "day";
}
elseif ($time < 31536000)
{
    $time /= 604800; //31536000;
    $name = "week";
}
else
{
    $time /= 31536000;
    $name = "year";
} 
```

# javascript - Javascript 突出显示和链接 url - Ruby on Rails

> ID：14708163
> 
> 赞同：0
> 
> 时间：2013-02-05T13:00:48.833
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, hyperlink

我目前有一个表格，用于列出我的 RoR 应用程序中的一系列作业，如下所示：

```
<section id="table-wrapper">
  <table id="jobs">
    <thead>
      <tr>
        <td>position</td>
        <td>company</td>
        <td>location</td>
      </tr>
    </thead>
    <tbody>
      <% @jobs.each do |job| %>
        <%= link_to url_with_protocol(job.job_url), :target => '_blank' do %>
          <tr>
            <td><strong><%= job.title %></strong></td>
            <td><%= job.company %></td> 
            <td><%= job.city %>, <%= job.country %></td>
          </tr>
        <% end %>           
      <% end %>
    </tbody>
  </table>
</section> 
```

我想要发生的是，当用户将鼠标悬停在表格行上时，字体会改变颜色，当他们点击行时，它们会被发送到 job.job_url 方法当前正在传递的 Job URL。

我无法解决的是如何让它与 Javascript 集成？

人们对此提出的任何建议和帮助将不胜感激:)

更新内容

```
#JS
$('table tbody tr').click(function(){
  <%= link_to job.job_url, :target => '_blank' do %>;
})

#HTML
<section id="table-wrapper">
  <table id="jobs">
    <thead>
      <tr>
        <td>position</td>
        <td>company</td>
        <td>location</td>
      </tr>
    </thead>
    <tbody>
      <% @jobs.each do |job| %>
        <tr>
          <td><%= job.title %></td>
          <td><%= job.company %></td>   
          <td><%= job.city %>, <%= job.country %></td>
        </tr>       
      <% end %>
    </tbody>
  </table>
</section> 
```

这似乎仍然不起作用 - 你知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:05:40.317

您可以使用 css 使用选择器更改行的字体粗细`:hover`。至于链接，您可以添加一个`data-url`属性并添加一些观察点击事件的js

```
# css
table tr:hover { font-size: 100px; }

# js
$('table tr').click(function() { window.location = $(this).data('url') })

# html
<table>
  <tr data-url='http://google.com'>
    <td>...</td>
  </tr>
</table> 
```

更新：使用 job.job_url 的 html

假设你有工作清单`@jobs`

```
<table>
  <% @jobs.each do |job| %>
    <tr data-url='<%= job.job_url %>'>
      <td>...</td>
    </tr>
  <% end %>
</table> 
```

更新：使用`href`代替`data-url`（尝试使用 data-url 时可能存在一些遗留问题）

**对此的最终工作答案是：**

```
$ ->
  $('tr[href]').click -> window.open 'http://' + $(this).attr('href'); 
```

# c# - 如何访问主线程

> ID：14708166
> 
> 赞同：2
> 
> 时间：2013-02-05T13:01:01.047
> 
> 标签：c#, multithreading

有没有办法从另一个工作线程获取对 Windows 窗体中主 UI 线程的引用？

像这样的东西：

```
public void FormLoad()//we are in Main UI Thread
    {
        Thread backThread = new Thread(DoWork);
        backThread.Start();

    }
    public void DoWork()
    {
        //get Main Thread instance
        //do some work
    } 
```

更新

如果有一些静态属性或类来获取对主线程的引用，例如 Thread.CurrentThread 以获取当前线程，我很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:10:27.580

```
Thread MainThread=null;//for reference
public void FormLoad()//we are in Main UI Thread
    {
        MainThread=Thread.CurrentThread;//main thread reference
        Thread backThread = new Thread(DoWork);
        backThread.Start();

    }
    public void DoWork()
    {
        //get Main Thread instance
        //do some work
    } 
```

这应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:11:52.130

好吧，你总是可以使用 ParameterizedThreadStart 来启动一个线程并向它发送参数，因为它是一个对象，你可以将一个引用传递给调用线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-18T18:56:12.693

知道`Thread`实例无济于事，因为这不会让您做任何有用的事情。您大概想要的是能够让主线程*做某事*（例如：更新自身）。

在 Windows 窗体中，您应该有一个同步上下文；只需访问`SynchronizationContext.Current`，并且应该能够使用`Post`或`Send`将工作传递给主线程。

或者，如果这不起作用（环境同步上下文是`null`）：将任何控件/表单传递给您的工作人员；然后它可以调用`Invoke`/`BeginInvoke`将工作传递给主线程。

* * *

另一种方法是公开您调用的事件，让 UI 监听该事件，并让 UI 处理切换回主线程，方法是调用`Invoke`/`BeginInvoke`自身（在处理事件时）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-16T22:57:59.490

A 找到它的方法是：

```
var MainThread = (from x in MyProcess.Threads.Cast<ProcessThread>() orderby x.StartTime select x).First(); 
```

# javascript - 使用数组元素值声明多个变量名

> ID：14708172
> 
> 赞同：0
> 
> 时间：2013-02-05T13:01:13.853
> 
> 标签：javascript

我正在寻找使用数组为变量创建唯一名称。我不希望在数组中存储任何计算值，而是能够使用数组声明变量来存储值。我的尝试和研究如何实现这一点让我认为这甚至是不可能的。如果有人可以让我知道以及是否有可能提供有关如何执行此操作的答案/示例，我将不胜感激。我将发布一个关于我希望开始工作的简化示例。

```
var indices = ["index01", "index02", "index03"];
var keys = ["key01", "key02", "key03"];
for (var index = 0; index < indices.length; index++)
{ 
    for (var key = 0; key < keys.length; key++)
    { 
        var  indices[index]+keys[key] //Looking for var index01key01, var index01key02 etc...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:05:26.177

好吧，基本的 javascript 变量在`window`范围内，所以试试：

```
var indices = ["index01", "index02", "index03"];
var keys = ["key01", "key02", "key03"];
for (var index = 0; index < indices.length; index++)
{ 
    for (var key = 0; key < keys.length; key++)
    { 
        // you can now use the variable as window.index01key01, or just index01key01
        window[indices[index]+keys[key]] = null;
    }
} 
```

# scala - “免费”获取案例类的部分构造函数

> ID：14708174
> 
> 赞同：9
> 
> 时间：2013-02-05T13:01:17.890
> 
> 标签：scala, object, dsl, case-class, partial-application

考虑一个定义两个属性的抽象类

```
abstract class A {
  def a: Int
  def b: Int
  // real A has additional members
} 
```

这是各种案例类的基类，例如

```
case class Foo(a: Int, b: Int) extends A
case class Bar(a: Int, b: Int) extends A
// and many more 
```

**目标：**我最终希望能够以两种方式创建上述案例类的实例，即

```
val b1 = Bar(1, 2)
val b2 = Bar(1) has 2
assert(b1 == b2) // must hold 
```

**方法：**因此定义一个帮助类来定义`has`并允许我部分构造`A`s似乎是合理的

```
case class PartialA(f: Int => A) {
  def has(b: Int) = f(b)
} 
```

**问题：**当前的机器不允许像`Bar(1)`这样的调用，因为这实际上是对 的调用`Bar.apply(1)`，即`apply`由编译器生成的对象定义的方法的调用`Bar`。

如果我可以强制编译器将`Bar`对象`object Bar extends PartialAConstructor`生成为

```
abstract class PartialAConstructor{
  def apply(a: Int, b: Int): A // abstract, created when the compiler creates
                               // object Bar
  def apply(a: Int) = PartialA((b: Int) => apply(a, b))
} 
```

但是，似乎不可能影响案例类的伴随对象的生成。

**所需属性：**

*   案例类：`Foo`等`Bar`应该保留案例类，因为我想使用编译器生成的好东西，例如结构相等`copy`和自动生成的提取器。

*   “完全”结构平等：将案例类定义为

    ```
    case class Bar(a: Int)(val b: Int) 
    ```

    不是一个选项，因为编译器生成的`equals`方法只考虑第一个参数列表，因此以下内容将错误地成立：

    ```
    assert(Foo(1)(0) == Foo(1)(10)) 
    ```

*   尽可能少的代码重复：例如，当然可以定义一个

    ```
    def Bar(a: Int) = PartialA((b: Int) => Bar(a, b)) 
    ```

    但是对于扩展的每个案例类都必须这样做`A`，即 is`Foo`等`Bar`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:01:56.723

您可以严重依赖 currying（以及事实上`Foo.apply`，作为任何方法，都会自动提升为函数）和一个小助手来增强语法：

```
object partially {
  def apply[A1,A2,R]( f: (A1, A2) => R ) = f.curried
  def apply[A1,A2,R]( f: (A1, A2) => R, a1: A1 ) = f.curried( a1 )

  def apply[A1,A2,A3,R]( f: (A1, A2, A3) => R ) = f.curried
  def apply[A1,A2,A3,R]( f: (A1, A2, A3) => R, a1: A1 ) = f.curried( a1 )
  def apply[A1,A2,A3,R]( f: (A1, A2, A3) => R, a1: A1, a2: A2 ) = f.curried( a1 )( a2 )

  def apply[A1,A2,A3,A4,R]( f: (A1, A2, A3, A4) => R ) = f.curried
  def apply[A1,A2,A3,A4,R]( f: (A1, A2, A3, A4) => R, a1: A1 ) = f.curried( a1 )
  def apply[A1,A2,A3,A4,R]( f: (A1, A2, A3, A4) => R, a1: A1, a2: A2 ) = f.curried( a1 )( a2 )
  def apply[A1,A2,A3,A4,R]( f: (A1, A2, A3, A4) => R, a1: A1, a2: A2, a3: A3 ) = f.curried( a1 )( a2 )( a3 )
  // ... and so on, potentially up to 22 args
} 
```

然后你可以这样做：

```
scala> val x = partially(Foo)(1)
x: Int => Foo = <function1>
scala> x(2)
res37: Foo = Foo(1,2) 
```

如果您真的想使用您的`has`方法（而不仅仅是直接应用该函数），请在此之上添加一个隐式类：

```
implicit class Func1Ops[-A,+R]( val f: A => R ) extends AnyVal { 
  def has( arg: A ): R = f( arg ) 
} 
```

现在你可以这样做：

```
scala> val x = partially(Foo)(1)
x: Int => Foo = <function1>

scala> x has 2
res38: Foo = Foo(1,2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:17:57.200

有什么问题

```
val x = Foo(1, _: Int) 
```

您还可以向伴侣添加一个`apply`方法，该方法仅需要 1 个 arg 并为您执行部分应用程序。

除此之外，也许还有一种方法可以使用尚未发布的类型宏，但您可以在[宏天堂](http://docs.scala-lang.org/overviews/macros/paradise.html)中使用它们。

**编辑**：

要向案例类伴侣添加一些东西，只需像往常一样做：

```
case class Foo(x: Int, y: Int)

object Foo {
  def apply(x: Int): (Int => Foo) = Foo(x, _: Int)
}

scala> Foo(1,2)
res3: Foo = Foo(1,2)

scala> Foo(1)
res4: Int => Foo = <function1> 
```

在申请中，您还可以返回您的 PartialA 或任何您喜欢的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T18:38:57.250

假设您真的想要“拥有”DSL，并且可能希望它可扩展，那么以下方法也可以：

```
abstract class A {
  def a: Int
  def b: Int
}    

trait PartialHas[T] { 
    self: { def apply(a: Int, b: Int): T } => 
    trait HasWord { def has(b: Int): T }
    def apply(a: Int): HasWord = new HasWord { def has(b: Int): T = apply(a, b) } 
}    

case class Bar(a: Int, b: Int) extends A
object Bar extends PartialHas[Bar] 
```

可能有一种方法可以使用类宏来完全取消显式伴随定义。

# javascript - 按下按钮时在屏幕上和屏幕外设置 div 动画

> ID：14708177
> 
> 赞同：1
> 
> 时间：2013-02-05T13:01:25.003
> 
> 标签：javascript, jquery, html

我是编码新手，希望有人可以帮助我提高我绝望的编码技能。我正在尝试创建一个 div，它会在按下按钮时在屏幕上和屏幕上显示动画。这是我到目前为止所得到的......这可能是愚蠢的错误，但我想这就是这个网站的目的......给你

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <div id="test">Example Text</div>
 <script>
function myFunction()
{
    var position = test.position();
    if("#test".position<0)
    {  
    alert("hello");
    $("#test").animate({
    "left": 0
    },1000);
}else{
    $("#test").animate({
    "left": -15
    },1000);
});
}
</script>   

</body>
</html> 
```

单击图像时调用此函数。我的想法是基本上告诉 div 如果它的位置值小于 0，则在屏幕上设置动画，我认为这告诉它它不在屏幕上。如果它没有检测到它的值在屏幕外，这意味着 div 目前在屏幕上，所以它应该动画掉。我将非常感谢任何人可以提供的任何帮助。首先十分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:44:00.260

干得好。

```
 <!DOCTYPE html>
 <html>
 <head>

 </head>
 <body>
<div id="test">TESTTEST</div>
<input type="button" name="myButton" value="Click Me" onclick="myFunction()" />   
 <script>     
 function myFunction()
{
var divPosition = $("#test").offset();
if(divPosition.left < 0 )
{ 
$("#test").animate({
"left": 0
},1000);
 }else{
$("#test").animate({
"left": -150
},1000);
};
}
 </script>
 </body>
 </html> 
```

和 CSS：

```
 #test{
     background-color:white;
     border:3px solid black;
     font-size:30px;
     position:absolute;
     left:-20%;
     top:10%;
 } 
```

工作小提琴：http: [//jsfiddle.net/KeE4h/48/](http://jsfiddle.net/KeE4h/48/)

# javascript - 将图例名称添加到 JQPlot 工具提示并在工具提示中正确格式化日期

> ID：14708178
> 
> 赞同：1
> 
> 时间：2013-02-05T13:01:27.723
> 
> 标签：javascript, jquery, jqplot

我想将绘图的图例名称添加到系列线的鼠标悬停工具提示中。我[在 bar chart 上使用了这个 jqplot 工具提示](https://stackoverflow.com/questions/4889464/jqplot-tooltip-on-bar-chart)的解决方案之一。

具体来说，我使用了以下功能：

```
function tooltipContentEditor(str, seriesIndex, pointIndex, plot) {
   // display series_label, x-axis_tick, y-axis value
   return plot.series[seriesIndex]["label"] + ", " + plot.data[seriesIndex][pointIndex];
} 
```

但是，我遇到的问题是它不使用图例名称“我的图例名称”，而是使用 JQPlot 默认的“系列 1”或“系列 5”（数字取决于系列位置）。

第二个问题是，一旦我开始使用上述功能，我的日期格式就会丢失。所以我得到一个数字，例如 123672378328，而不是转换为我在 tickOptions 中指定的格式。

我生成图表的代码如下：

```
var plot;
function buildChart(chartDivId, graphData, chartTitle, graphSeriesNames, labelNames) {

    var id = "#" + chartDivId;
    $(id).empty(); 

    var seriesLine = { lineWidth:1, markerOptions: { show:false } };

    plot = $.jqplot(chartDivId, graphData,
        {
            title: chartTitle,
            axes:
            {
                xaxis:
                {
                    label:'Date',
                    renderer:$.jqplot.DateAxisRenderer,
                    tickOptions: { formatString:'%b&nbsp; %#d&nbsp; %H:%M' }
                },
                yaxis: { label: 'Parameter Values', tickOptions: { formatString:'%.2f' }, labelRenderer: $.jqplot.CanvasAxisLabelRenderer, labelOptions : { angle: 270, fontFamily: 'Arial, Verdana, Helvetica', fontSize: '8pt' }, autoscale: true },
            },
            seriesDefaults: {
                 markerOptions: {
                     show: true, style:'filledCircle', size: 4.5      
                 }
            },
            highlighter:
            {
                show: true,
                sizeAdjust: 7.5,
                tooltipContentEditor:tooltipContentEditor  //new code added to attempt to add legend name to mouse over tool tip
            },
            cursor:
            {
                show: true,
                zoom: true,
                showTooltip: false
            },
            legend:
            {
                labels: labelNames ,
                show: true,
                location: 's',
                renderer: $.jqplot.EnhancedLegendRenderer,
                rendererOptions:
                {
                    numberColumns: 10, 
                    numberRows: 5,
                    seriesToggle: 900,
                    disableIEFading: false
                },
                marginTop: '100px',
                marginBottom: '100px',
                placement: 'outside'
            }       
        }
    ); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:11:55.463

进一步更新：

在有点傻并深入挖掘 JQPlot 的绘图对象之后，我意识到传递给 tooltipContentEditor 方法的 str 变量有我需要的东西。所以以下是解决方案：

```
function tooltipContentEditor(str, seriesIndex, pointIndex, plot) {
    // display series_label with x and y values value
    return plot.legend.labels[seriesIndex] + ", " + str;
} 
```

没有提供帮助或建议，所以我想我会在花了几个小时尝试修复后提供我找到的解决方案。

# xcode - 这个图标在 Xcode 4.5 中是什么意思？

> ID：14708180
> 
> 赞同：0
> 
> 时间：2013-02-05T13:01:29.423
> 
> 标签：xcode, xcode4, ide, xcode4.5

![Xcode 图标](../Images/60ca4449dfc8783ced76254084ab317c.png)

每当我运行一个项目时，我都会在 Xcode 4.5 上看到这个图标。我也可能在旧版本的 Xcode 上也看到过这种情况，尽管我记不清了。

这可能意味着什么？

*编辑：图像以前没有加载，现在已经上传了*

*编辑 2：*我想知道图像左侧的数字 3。我理解“114”表示警告“。为之前问题中的模棱两可的解释道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:04:48.477

这意味着你有警告。

在这种情况下，您有 114 个编译器警告！

单击它，您将被带到项目资源管理器中的正确选项卡，您可以在其中开始纠正它们。

至于数字 3，再次单击它 - 它会显示它正在运行的任务数。

只需尝试单击 Xcode 中的内容，您就会发现更多关于它的信息。

# jquery - jQuery animate() on document.ready

> ID：14708184
> 
> 赞同：2
> 
> 时间：2013-02-05T13:01:40.220
> 
> 标签：jquery, jquery-animate, jquery-hover, document-ready

我正在尝试使用以下示例实现照片缩放效果：[http](http://www.tympanus.net/Tutorials/PhotoZoomOutEffect/) ://www.tympanus.net/Tutorials/PhotoZoomOutEffect/ 。但是，我需要在**页面加载**后使这种效果起作用，而不是在**悬停**时起作用。所以我把 hover() 改成了 ready()：

```
 $(function() {
        $('#container img').ready(
            function(){
              var $this = $(this);
              $this.stop().animate({
                  'opacity':'1.0',
                  'height':'200px',
                  'top':'0px',
                  'left':'0px'
              });
           },
           function(){
             var $this = $(this);
             $this.stop().animate({
              'opacity':'0.5',
              'height':'500px',
              'top':'-66.5px',
              'left':'-150px'
             });
           }
        );
    }); 
```

然后我在 Chrome 调试器中遇到了 JS 错误：Uncaught TypeError: Cannot use 'in' operator to search'display' in undefined 有人可以给我一个提示来解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:19:08.130

如果您有不同尺寸的图像，您可以这样做

```
$(document).ready( function(){
    img = $('#container img');
    imageWidth = img.outerWidth();
    imageHeight = img.outerHeight();
    centerX = (200 - imageWidth) / 2;
    centerY = (200 - imageHeight) /4;
    img.css({'opacity': 0.5, 'top': centerY, 'left': centerX})
       .animate({'opacity': 1,'height': '200px', 'top': 0, 'left': 0});
}); 
```

您需要在 CSS 中设置一些值：

```
#container {
      width: 200px;
      height: 200px;
      overflow: hidden; /*important*/
}
#container img{
    position: relative; /*important*/
} 
```

# ruby - 如何从 rails select_date 标签解析/生成日期对象

> ID：14708185
> 
> 赞同：2
> 
> 时间：2013-02-05T13:01:41.983
> 
> 标签：ruby, ruby-on-rails-3

> **可能重复：**
> [如何将从 rails 中的 date_select 返回的哈希值转换为 Date 对象？](https://stackoverflow.com/questions/3501180/how-to-convert-a-hash-value-returned-from-a-date-select-in-rails-to-a-date-objec)

我在表格中有以下日期

```
<%= date_select(:end_date, "end",:default => Time.now , :discard_day => true)%> 
```

当我提交表单时，它会向控制器发送以下请求

```
 "end_date"=>{"(1i)"=>"2012", "(2i)"=>"12", "(3i)"=>"1"}, ...etc 
```

我想从控制器中的上述参数生成 Date 对象。

我的问题是；

*   我是否正确发送参数？
*   如何从上面的参数生成 ruby​​ Date 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:20:42.397

做就是了：

```
#from your example {"end_date"=>{"(1i)"=>"2012", "(2i)"=>"12", "(3i)"=>"1"}}
Date.parse params["end_date"].values.join("-")
=> Sat, 01 Dec 2012 
```

# c# - 数据表上的联合

> ID：14708195
> 
> 赞同：0
> 
> 时间：2013-02-05T13:02:09.127
> 
> 标签：c#, asp.net

我将如何在 Linq 中转换这个 SQL 查询，对不起，但我不是 LINQ 方面的专家

```
select ConnectionId
from LearnerConnections
where LearnerId = 1
union
select LearnerId
from LearnerConnections
where ConnectionId = 1 
```

我也可以编写 DataTable 方法来获得结果（如 DataTable.Select() 方法）吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:07:24.790

类似的东西

```
LearnerConnections.Where(x => x.LearnerId == 1)
                  .Select(m => m.ConnectionId)
                  .Union(LearnerConnections.Where(l => l.ConnectionId ==1)
                                           .Select(lc => lc.LearnerId)

                  ); 
```

使用数据表，它应该看起来像

```
 dtLearnerConnections.AsEnumerable()
                      .Where(m => m.Field<int>("LearnerId") == 1)
                      .Select(m => m.Field<int>("ConnectionId"))
                      .Union(dtLearnerConnections.AsEnumerable()
                                                 .Where(x => x.Field<int>("ConnectionId") == 1)
                                                 .Select(x => x.Field<int>("LearnerId"))
                      ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:07:52.917

希望这会有所帮助

```
var results = (from l in LearnerConnections where l.LearnerId == 1 
                 select l.ConnectionId).Union(from a in LearnerConnections 
                 where a.ConnectionId == 1 select l.LeaenerId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:09:11.933

```
var result = (from lc in LearnerConnections
              where lc.LearnerId == 1
              select lc.ConnectionId)
              .Union
             (from lc in LearnerConnections
              where lc.ConnectionId == 1
              select lc.LearnerId); 
```

如果您使用的是 DataTables，这涉及到使用[LINQ to DataSet](http://blogs.msdn.com/b/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)。这个 SO [question](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)也可能对您有所帮助。

# powershell - Powershell: need to create an "active" ftp transfer connection from a PS script

> ID：14708205
> 
> 赞同：3
> 
> 时间：2013-02-05T13:02:45.253
> 
> 标签：powershell, ftp

I am using the following script file (ftp_test_2.ps1) to transfer files to an ftp server:

```
#we specify the directory where all files that we want to upload are contained 
$Dir="C:/Users/you-who/Documents/textfiles/"
#ftp server

$ftp = "ftp://192.168.100.101:21/"
$user = "aP_RDB"
$pass = "pw"
$webclient = New-Object System.Net.WebClient 
$webclient.Credentials = New-Object System.Net.NetworkCredential($user,$pass)  

#list every txt file
foreach($item in (dir $Dir "*.txt"))
{ 
    "creating URI..."
    $uri = New-Object System.Uri($ftp+$item.Name) 
    $uri
    "attempting upload... $item"
    $webclient.UploadFile($uri, $item.FullName) 
 } 
```

This works fine when the $ftp is set to the local host and also connecting to another ftp test server. However, on the production ftp server, the server rejects the upload with the Powershell error:

```
Exception calling "UploadFile" with "2" argument(s): "The remote server returned an error: 227 Entering Passive Mode (192,168,101,99,228,67)."

At C:\Users\you-who\Documents\SandBox\ftp_test_2.ps1:17 char:24

\+$webclient.UploadFile <<<< ($uri, $item.FullName)
     \+CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
     \+ FullyQualifiedErrorId : DotNetMethodExceptionPP 
```

On the production server there is a FileZilla server running. The messages in the server UI do not "seem" to show any errors:

```
(000029)2/5/2013 5:58:53 AM - (not logged in) (192.168.100.101)> USER aP_RDB
(000029)2/5/2013 5:58:53 AM - (not logged in) (192.168.100.101)> 331 Password required for ap_rdb
(000029)2/5/2013 5:58:53 AM - (not logged in) (192.168.100.101)> PASS *******
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 230 Logged on
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> OPTS utf8 on
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 200 UTF8 mode enabled
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> PWD
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 257 "/" is current directory.
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> CWD /
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 250 CWD successful. "/" is current directory.
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> TYPE I
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 200 Type set to I
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> PASV
(000029)2/5/2013 5:58:53 AM - ap_rdb (192.168.100.101)> 227 Entering Passive Mode   (192,168,101,99,228,74)
(000029)2/5/2013 5:59:14 AM - ap_rdb (192.168.100.101)> disconnected. 
```

From my FileZilla ftp client on my laptop, I can connect and put/get files on the production ftp server **IF** I set the "transfer mode" to "active" (in the FileZilla client) for the connection to the production ftp server.

Since I cannot change the production server, is there a way to set the transfer mode to "active" from within Powershell somewhere in my script above? I searched the web and MS sites for help on this, but could not find anything on . Any help greatly appreciated.

-Dave Ef

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:14:23.747

即使您最终选择了不同的路线 - 我决定回来并提供有关如何子类[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)并确保所有 FTP 请求都是“活动”传输的答案。这需要 PowerShell v2 及更高版本添加新类型。如果您需要在 PowerShell v1 中执行此操作，您可以将类定义编译为程序集并加载它。

另外值得注意的是，您可以轻松地以与属性相同的方式公开`UseBinary`FtpWebRequest 类的`UsePassive`属性 - 如果您还需要设置它。

```
$def = @"
public class ActiveFtpWebClient : System.Net.WebClient
{
  protected override System.Net.WebRequest GetWebRequest(System.Uri address)
  {
    System.Net.WebRequest request = base.GetWebRequest(address);
    if (request is System.Net.FtpWebRequest)
    {
      (request as System.Net.FtpWebRequest).UsePassive = false;
    }
    return request;
  }
}
"@

Add-Type -TypeDefinition $def
$ftp = New-Object ActiveFtpWebClient
$ftp.DownloadString("ftp://server/file.txt") 
```

# xslt - 在使用 1 个 XSLT 时从 XML 输出中删除命名空间

> ID：14708206
> 
> 赞同：0
> 
> 时间：2013-02-05T13:02:46.147
> 
> 标签：xslt, crystal-reports

我正在使用 XSLT 使用 Crystal Report 2011 导出，并且由于某种原因无法在 XSLT 中使用标记命名空间别名。

我有以下 XSLT：-

```
 <xsl:namespace-alias stylesheet-prefix="b" result-prefix="#default"/>

      <xsl:template match="/b:CrystalReport">
        <root>
          <xsl:for-each select="b:Details">
            <person>
              <VRN><xsl:value-of select="b:Section/b:Field[@Name='ITMVEHICLEREGNUM1']/b:FormattedValue"/></VRN>
              <Make><xsl:value-of select="b:Section/b:Field[@Name='ITMMANUDESC1']/b:FormattedValue"/></Make>
              <Model><xsl:value-of select="b:Section/b:Field[@Name='ITMODELDESC1']/b:FormattedValue"/></Model>
              <PolicyNumber><xsl:value-of select="b:Section/b:Field[@Name='POLEXTERNAL11']/b:FormattedValue"/></PolicyNumber>
              <Title><xsl:value-of select="b:Section/b:Field[@Name='TITDESCRIPTION1']/b:FormattedValue"/></Title>
              <FirstName><xsl:value-of select="b:Section/b:Field[@Name='CLIFIRST1']/b:FormattedValue"/></FirstName>
              <LastName><xsl:value-of select="b:Section/b:Field[@Name='CLISURN1']/b:FormattedValue"/></LastName>
              <PostCode><xsl:value-of select="b:Section/b:Field[@Name='ADRPOSTCODE1']/b:FormattedValue"/></PostCode>
              <CoverStartDate><xsl:value-of select="b:Section/b:Field[@Name='POLRENDATE1']/b:FormattedValue"/></CoverStartDate>
              <CoverEndDate><xsl:value-of select="b:Section/b:Field[@Name='POLENDDATE1']/b:FormattedValue"/></CoverEndDate>
              <FullyComp><xsl:value-of select="b:Section/b:Field[@Name='ITMCOVERTYPECDE1']/b:FormattedValue"/></FullyComp>
              <GlassLimit>500</GlassLimit>
              <GlassExcess>75</GlassExcess>
              <VatReg><xsl:value-of select="b:Section/b:Field[@Name='CLIVATREG1']/b:FormattedValue"/></VatReg>
              <AccidentDamageExecess>N/A</AccidentDamageExecess>
              <RepairExcess>0.00</RepairExcess>
              <Insurer><xsl:value-of select="b:Section/b:Field[@Name='INSNAME1']/b:FormattedValue"/></Insurer>
              <Referral><xsl:value-of select="b:Section/b:Field[@Name='CENDESC1']/b:FormattedValue"/></Referral>
            </person>
          </xsl:for-each>
        </root>
      </xsl:template>

    </xsl:stylesheet> 
```

输出看起来像： -

```
 <root xmlns:b="urn:crystal-reports:schemas:report-detail">  
      <person>  
        <VRN>XXXXXX</VRN>  
        <Make>AUSTIN</Make>  
        <Model>A35</Model>  
        <PolicyNumber>XXXXXXXX</PolicyNumber>  
        <Title>Mr</Title>  
        <FirstName>Gareth</FirstName>  
        <LastName>Jones</LastName>  
        <PostCode>AL23 6TR</PostCode>  
        <CoverStartDate>06.04.2011</CoverStartDate>  
        <CoverEndDate>05.04.2012</CoverEndDate>  
        <FullyComp>01</FullyComp>  
        <GlassLimit>500</GlassLimit>  
        <GlassExcess>75</GlassExcess>  
        <VatReg></VatReg>  
        <AccidentDamageExecess>N/A</AccidentDamageExecess>  
        <RepairExcess>0.00</RepairExcess>  
        <Insurer>My Insurer</Insurer>  
        <Referral>Direct</Referral>  
      </person>  
    </root> 
```

我需要能够从标签中删除命名空间，并且只能使用 1 个 XSLT 来完成。

任何帮助表示赞赏。

谢谢克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:10:18.673

你不需要在`namespace-alias`这里使用。结果已经在 null 命名空间中，但如果你想禁止`b`命名空间声明，你只需要使用`exclude-result-prefixes`：

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:b="urn:crystal-reports:schemas:report-detail"
    exclude-result-prefixes="b"> 
```

# jquery - Mac 和 PC 上所有浏览器的相同表单元素

> ID：14708207
> 
> 赞同：0
> 
> 时间：2013-02-05T13:02:51.977
> 
> 标签：jquery, html, css, forms

我正在寻找在 PC 和 Mac 上的所有浏览器中获取相同表单元素的最佳/有效方法。这听起来像是一个非常基本的问题，我应该知道答案，但有趣的是我无法弄清楚。

一段时间以来，我一直在用 CSS 和偶尔的 JQuery 来设计表单，我从不担心浏览器/计算机之间的细微差别。

但现在我在一个项目中，它们实际上必须是相同的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:44:27.123

你不能。复杂表单控件的组件是所谓的*影子 DOM*的一部分：我们可以看到元素由较小的组件组​​成，但我们无法设置它们的样式。

按钮或文本（文本、密码、搜索、网址、电子邮件、电话）输入字段等更简单的元素通常可以设置为跨浏览器的外观一致（前提是所述浏览器支持您使用的样式）。

如果您尝试对其进行样式设置，几乎其他所有内容都看起来很奇怪。最严重的违规者是选择和复杂输入（文件、日期、日期时间、时间、颜色、范围、数字等），因为它们由多个元素组成（例如，输入字段和一个或两个按钮）。除非浏览器允许您通过特殊的 CSS 属性设置这些组件的样式（我确定我在 webkit 前缀下看到过一些，但无法告诉您是哪些），否则您无法触摸它们。

您在这里有 3 个选项：

*   不要以任何会导致它放弃浏览器默认样式的方式设置表单控件的样式（以便简单和复杂的控件继续看起来彼此相似）
*   根本不要使用复杂的表单控件（即没有文件、选择等）
*   通过 JavaScript 将所有复杂的表单控件替换为简单的控件

# c++ - Eclipse Hello World Program will not work

> ID：14708210
> 
> 赞同：0
> 
> 时间：2013-02-05T13:02:53.957
> 
> 标签：c++, eclipse

Eclipse will work just fine on my Linux machine. Although when I installed the C/C++ version (Juno) on Windows, the simple Hello World program it creates will not compile. I have tried setting the path to this previous question [Eclipse - C++ hello world project's error](https://stackoverflow.com/questions/6017890/eclipse-c-hello-world-project-error), but it still does not work. I have attached the screenshot will the displayed errors.

[Screenshot](https://dl.dropbox.com/u/20608771/RzCap-20130205065226.jpg)

![enter image description here](../Images/b5d6ff17e1e13b886a6f2fa0e60060f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:57:05.327

您还需要告诉 eclipse 您正在使用哪个工具链，请参阅：

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_prop_build_toolchain.htm](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_prop_build_toolchain.htm)

如果您从标准 Windows 命令提示符运行 g++ --version，您应该会看到打印的版本。如果你不这样做，windows 可能没有遵循所需的 cygwin 符号链接，你会发现实际的可执行文件根本不叫 g++.exe。例如，在我的系统上，二进制文件**实际上**存在于：

C:\cygwin\bin\gcc-4.exe

我还将确保将 cygwin 安装到不包含空格的目录中，因为众所周知它会弄乱一些东西。还要确保在 PATH 中使用 windows 目录，因此 C:\cygwin 等而不是 /cygdrive。

第一次设置 CDT 有点混乱，但不幸的是所有 C++ Windows IDE 都是 - 甚至是 MSVC。这根本不是一个糟糕的IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:06:07.303

好像找不到编译器exe的，把编译器目录放进`PATH`去应该可以找到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:06:34.930

你可以试试 Code::Blocks。它为 C/C++ 提供了一个很棒的 IDE，并且非常适合编辑 Java 代码（它识别您声明的所有变量/对象的范围，但不会执行您的代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:08:22.370

看来您的 PATH 配置不正确。这篇文章[configure-eclipse-cdt-to-use-g](https://stackoverflow.com/questions/8467937/configure-eclipse-cdt-to-use-g)

看起来正是您正在寻找的东西。我希望它有所帮助。祝你好运

# python - Showing current output from exec in Python

> ID：14708216
> 
> 赞同：0
> 
> 时间：2013-02-05T13:03:09.703
> 
> 标签：python, exec

I am running code as follows (copied from other topic and added `sleep`):

```
import sys
import StringIO
import contextlib

@contextlib.contextmanager
def stdoutIO(stdout=None):
    old = sys.stdout
    if stdout is None:
        stdout = StringIO.StringIO()
    sys.stdout = stdout
    yield stdout
    sys.stdout = old

code = """
import time
i = [0,1,2]
for j in i :
    print j
    time.sleep(5)
"""
with stdoutIO() as s:
    exec code

print "out:", s.getvalue() 
```

When I run this code I have to wait 15 seconds until the program ends to see the output. But what should I do to see the output of the `print` statement in each iteration of the `for` loop every 5 seconds? Not to wait 15 seconds to see the whole output.

Is this possible at all? Is it possible to see the current output of exec?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:25:17.733

这个问题与exec无关。问题与您将 stdout 重定向到`StringIO`. 所有的打印语句都在向屏幕添加内容，`StringIO`而不是打印到屏幕上。因此，您看不到任何输出。将某些内容打印到屏幕上的唯一行是

```
print "out:", s.getvalue() 
```

这发生在 15 秒的睡眠后。

* * *

```
with stdoutIO() as s:
    ... 
```

重定向`stdout`到`StringIO.StringIO`. 只有在`with`上下文完成后才会`stdout`重定向到 orginal `sys.stdout`，然后打印到终端。

* * *

因此，要在打印语句发生时从 exec 获取输出，只需删除`stdeoutIO`上下文管理器：

```
import sys

code = """
import time
i = [0,1,2]
for j in i :
    print j
    time.sleep(5)
"""

exec code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:27:45.513

在您发布的代码中，上下文管理器在`with`执行时只会产生一次。因此代码必须首先执行（全部 15 秒），并且所有代码输出都存储在`StringIO`对象中。因此，使用这样的代码，您*无法*在编写时获得输出。

如果你想即时输出，你需要提供你自己`file`的类而不是`StringIO`重写`write`方法。例如（仅作为示例，非常快速和肮脏的代码）：

```
import sys
import StringIO
import contextlib

class Proxy(object):
    def __init__(self,stdout,stringio):
        self._stdout = stdout
        self._stringio = stringio
    def __getattr__(self,name):
        if name in ('_stdout','_stringio','write'):
            object.__getattribute__(self,name)
        else:
            return getattr(self._stringio,name)
    def write(self,data):
         self._stdout.write(data)
         self._stringio.write(data)

@contextlib.contextmanager
def stdoutIO(stdout=None):
    old = sys.stdout
    if stdout is None:
        stdout = StringIO.StringIO()
    sys.stdout = Proxy(sys.stdout,stdout)
    yield sys.stdout
    sys.stdout = old

code = """
import time
i = [0,1,2]
for j in i :
    print j
    time.sleep(5)
"""

with stdoutIO() as s:
    exec code

print "out:", s.getvalue() 
```

输出：

```
0
1
2
out: 0
1
2 
```

前三行以 5 秒的间隔打印。最后三人合而为一。

# java - 使用 DOM 解析 XML 并在 java 中打印

> ID：14708226
> 
> 赞同：0
> 
> 时间：2013-02-05T13:03:56.577
> 
> 标签：java, xml, parsing, dom

我尝试了很多使用 DOM 解析以下 XML。我无法打印元素的值。谁能帮我打印元素的值。

提前致谢

```
<tns:CustomerDetails xmlns:xe="http://www.w3.org/2001/04/xmlenc#" xmlns:xd="http://www.w3.org/2000/09/xmldsig#" xmlns:tns="http://abc.com/elements" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pf="http://abc.com/Service">
  <tns:CustomerId>360817</tns:CustomerId>
  <tns:CustomerName>ABC Corp</tns:CustomerName>
  <tns:PAN>awap</tns:PAN>
  <tns:Timestamp>2010-05-20T12:20:19Z</tns:Timestamp>
  <tns:RequestId>397</tns:RequestId>
  <tns:PIN>1234</tns:PIN>
</tns:CustomerDetails> 
```

我的代码

```
 File infile = new File("D:\\Cust.xml");
  DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
  DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
  Document doc = dBuilder.parse(infile);
  doc.getDocumentElement().normalize();

  System.out.println("root of xml file " +
                     doc.getDocumentElement().getNodeName());
  System.out.println("==========================");

  NodeList list = doc.getElementsByTagName("CustomerDetails");
  System.out.println(list.getLength());
  Element name = doc.getElementById("CustomerId");
  if (name == null) {
    System.out.println("There is no element with the ID ");
  } else {
    Text text = (Text)name.getFirstChild();
    System.out.println("The ID " + " locates the name " + text.getData());
  } 
```

我试过了

```
Element name = doc.getElementById("tns:CustomerId"); 
```

也..我在打印时得到空值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:38:26.630

你在这里混合你的模型。 `getElementById`适用于具有由文档的 DTD 标识为 ID 的属性的元素，并且由于您的文档没有 DTD，因此它永远不会为您提供任何有用的东西。

因为您的文档使用命名空间，您应该使用“NS”方法来提取元素，并且对于包含在元素中的文本，您可以使用`getTextContent`

```
 File infile = new File("D:\\Cust.xml");
  DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
  // namespaces - DocumentBuilderFactory is *not* namespace aware by default
  dbFactory.setNamespaceAware(true);
  DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
  Document doc = dBuilder.parse(infile);
  doc.getDocumentElement().normalize();

  System.out.println("root of xml file " +
                     doc.getDocumentElement().getNodeName());
  System.out.println("==========================");

  NodeList list = doc.getElementsByTagNameNS(
        "http://abc.com/elements", "CustomerDetails");
  System.out.println(list.getLength());
  for(int i = 0; i < list.getLength(); i++) {
    Element custDetails = (Element)list.item(i);
    Element id = custDetails.getElementsByTagNameNS(
        "http://abc.com/elements", "CustomerId").item(0);
    System.out.println("Customer ID: " + id.getTextContent());
    Element name = custDetails.getElementsByTagNameNS(
        "http://abc.com/elements", "CustomerName").item(0);
    System.out.println("Customer Name: " + name.getTextContent());
  } 
```

# vb.net - How to get users last logon from Active Directory

> ID：14708227
> 
> 赞同：0
> 
> 时间：2013-02-05T13:04:10.267
> 
> 标签：vb.net, active-directory, vb.net-2010

I am trying to work with active directory to get users information. For the most part, it's working. The problem is I cant seem to get a users last logon date. Anyone have any suggestions? My code is as follows:

```
 Public Shared Function GetUsersByUsername(ByVal Username As String) As ADUser
    Dim myUser As New ADUser
    Dim oroot As DirectoryEntry = New DirectoryEntry("GC://ldap.myCompany.com")
    Dim osearcher As DirectorySearcher = New DirectorySearcher(oroot)
    Dim result As SearchResult

    osearcher.Filter = String.Format("(&(SAMAccountName={0}))", Username)
    osearcher.PropertiesToLoad.Add("cn")
    osearcher.PropertiesToLoad.Add("SAMAccountName")   'Users login name  
    osearcher.PropertiesToLoad.Add("givenName")    'Users first name  
    osearcher.PropertiesToLoad.Add("sn")   'Users last name  
    osearcher.PropertiesToLoad.Add("mail")   'Email address       
    osearcher.PropertiesToLoad.Add("accountExpires") 'expiration date

    result = osearcher.FindOne
    Try
        Dim userPath As String() = result.Path.ToString.Split(New Char() {","c})
        Dim parsedString As String
        Dim User As DirectoryEntry
        Dim expirationDate As String

        User = result.GetDirectoryEntry()

        myUser.UserID = result.Properties("cn").Item(0)
        myUser.EmailAddress = result.Properties("mail").Item(0)
        myUser.FirstName = result.Properties("givenName").Item(0)
        myUser.LastName = result.Properties("sn").Item(0)         

        expirationDate = result.Properties("accountExpires").Item(0)

        If (isAccountLocked(User) = True) Then
            myUser.Status = ADUser.AccountStatus.Locked
        ElseIf (isAccountEnabled(User) = False) Then
            myUser.Status = ADUser.AccountStatus.Disabled
        ElseIf (isAccountExpired(expirationDate) = True) Then
            myUser.Status = ADUser.AccountStatus.Expired
        Else
            myUser.Status = ADUser.AccountStatus.Active
        End If

        parsedString = userPath((userPath.Length - 3))
        myUser.Domain = parsedString.Substring(3, parsedString.Length - 3)

    Catch ex As Exception
        Return Nothing
    End Try

    Return myUser
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-18T01:09:37.760

为我工作：

1.  加载属性：

    ```
    osearcher.PropertiesToLoad.Add("lastLogon") 
    ```

2.  访问它：

    ```
    dim myDateInterval = result.Properties("lastLogon").Item(0) 
    ```

请注意，您将获得一个区间值。我认为它是 64 位的，未签名的。.NET 中有一些转换方法，但它们只采用带符号的 64 位。在它成为问题之前，还没有检查过这会提前多少年！

此外，如果您使用 DirectoryServices 中较新的 UserPrincipal ，则其中包含 lastlogon ，这将返回一个可为空的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:04:00.987

您是否尝试过“lastLogon”LDAP 属性？您的代码看起来不错，我猜您只是不确定信息在 AD 中的存储位置？

# java - spring-security-web 错误加载上下文

> ID：14708230
> 
> 赞同：0
> 
> 时间：2013-02-05T13:04:24.743
> 
> 标签：java, spring, junit, spring-security

我正在尝试使用[网络安全表达式](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-access-web)，但是当我在单元测试中加载上下文时，我得到`org.xml.sax.SAXParseException: The markup declarations contained or pointed to by the document type declaration must be well-formed`

我的上下文文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

 // various beans here

 <sec:http use-expressions="true">
   <sec:intercept-url pattern="/admin*"
      access="hasRole('admin') and hasIpAddress('192.168.1.0/24')"/>
  </sec:http>

</beans> 
```

如果我不包含`<sec:http>`标签，我不会收到错误消息。如果我只包括`<sec:http/>`我确实得到了错误。

在我的 pom 中，我包括：

```
<dependancy>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>3.0.5.RELEASE</version>
</dependancy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:00:53.540

像这样的 DTD 文件

```
http://www.springframework.org/schema/security/spring-security-3.0.xsd 
```

在每个解析操作期间必须可用于 XML 解析器。让它们可用，问题就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:21:38.293

原来弹簧安全的模式在`spring-security-config`罐子里。我需要那种依赖。

# java - 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围

> ID：14708231
> 
> 赞同：0
> 
> 时间：2013-02-05T13:04:25.727
> 
> 标签：java, string, exception

我正在获取`StringIndexOutOfBoundsException`以下代码。这是错误

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 0
at java.lang.String.charAt(String.java:694)
at Reflector.readConfig(Reflector.java:103)
at Reflector.run(Reflector.java:48)
at Reflector.main(Reflector.java:419) 
```

这是代码

```
public int readConfig() {
    // validate the contents of the config file
    BufferedReader input=null;
    String name=null; 
    String value=null; 
    String inputLine=null;
    dest=new Hashtable();

    // open and read the config file
    try {
      input = new BufferedReader(new FileReader("reflector.conf"));
      inputLine=input.readLine();
    } catch (IOException e) {
      System.err.println("Error reading reflector.conf.");
      return(-1);
    }
    // loop until entire config file is read
    while (inputLine != null) {
      // skip comments:
      if (inputLine.charAt(0) != '#') {
        // extract a name/value pair, and branch
        // based on the name:
        StringTokenizer tokenizer = 
                            new StringTokenizer(inputLine,"="); 
        name = tokenizer.nextToken(); 
        value = tokenizer.nextToken(); 

        if (name == null) {
          System.out.println("no name"); 
          continue;
        } else if (name.equals(MODE)) {
          if (setMode(value) != 0) {
            System.err.println("Error setting mode to " + value);
            return(-1);
          } 

          }
        } else {
          System.err.println("Skipping invalid config file value: " 
                             + name);
        }
      }
      // read next line in the config file
      try {
        inputLine=input.readLine();
      } catch (IOException e) {
        System.err.println("Error reading reflector.conf.");
        return(-1);
      }
    }

    // close the config file
    try {
      input.close();
    } catch (IOException e) {
      System.err.println("Error closing reflector.conf.");
      return(-1);
    }

    // validate that the combined contents of the config file
    // make sense
    if (! isConfigValid()) {
      System.err.println("Configuration file is not complete.");
      return(-1);
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:06:08.023

您在配置文件的某处有一个空行，因此检查`if(inputLine.charAt(0) != '#')`会引发异常。请记住`readLine()`不读取行尾字符。

要解决此问题，请添加显式检查以跳过空行。最简单的解决方法是执行以下操作：

```
if (!inputLine.isEmpty() && inputLine.charAt(0) != '#') { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:07:55.600

也许在这里：

```
inputLine.charAt(0) 
```

您引用第一个元素并且不检查字符串是否至少有一个。您应该在此字符串不为空之前检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:08:51.667

我认为问题出在这里：

```
if (inputLine.charAt(0) != '#') { 
```

您正在尝试比较`0`索引处的字符，但变量`inputLine`可能有一个空字符串`""`，

所以你还需要检查这个条件`inputLine.length() != 0`

# jquery - Magento 显示 jQuery 相互冲突

> ID：14708233
> 
> 赞同：7
> 
> 时间：2013-02-05T13:04:42.153
> 
> 标签：jquery, magento, jquery-plugins

我是[Magento](http://www.magentocommerce.com/)的新手。我使用[横幅 rotaor 脚本](http://beacon9.ca/labs/jquery-banner-rotator-script)来显示横幅。因为我必须在每个页面中显示横幅，所以我在`header.phtml`文件中实现了滑块，以便我可以在每个页面中显示横幅。所以在 header.phtml 我的滑块代码是这样的

```
 <script language="javascript">
         jQuery.noConflict();
        jQuery(document).ready(function(){
          bannerRotator('#bannerRotator', 500, 5000, true);
        });
      </script>
<div id="bannerRotator">
  <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('homepageslider')->toHtml(); ?>
</div> 
```

这里的滑块运行良好，但是当我`console tab`在 Firefox 中查看时出现了一些错误。这是控制台选项卡错误的图像。 ![在此处输入图像描述](../Images/f68315377f42ac0338101b389a7c09ec.png) 为了解决所有问题，我用谷歌搜索并知道 jQuery 存在冲突。所以要明确我使用`jQuery.noConflict`并删除了所有`$`的`jQuery`. 但我仍然遇到同样的问题。任何帮助和建议都将是非常可观的。谢谢

现场网站可以在[这里找到](http://modulesoft.biz/projects/magento/extream/index.php/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:14:51.823

在 app/design/frontend/default/[theme name]/template/page/html/head.phtml 文件中包含 jquery.noConflict。

您想在包含 jquery 之后和 getCssJsHtml() 之前添加它

我在实现中更进一步，并将其调用为 $j var，但您可以这样做或只实现 jquery.noConflict();

如果您使用 var $j，那么您的所有 jQuery 调用都将使用该对象。

我这样做了：

```
!-- adding jQuery -->
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
//<![CDATA[
     var $j = jQuery.noConflict();
//]]>
</script>
<!-- ************* -->

<?php echo $this->getCssJsHtml() ?> 
```

在你的 header.phtml 中，你需要像这样调用你的滑块：

```
<script language="javascript">
$j(document).ready(function(){
          bannerRotator('#bannerRotator', 500, 5000, true);
        });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:44:59.267

你有两个问题。

1)

您包含 jQuery**两次**。您已经包含 jquery.js (1.7.1)，并且 jquery-1.4.4.min.js 还包含在更下方。这导致了正在看到的问题。

在项目中搜索字符串“jquery-1.4.4.min.js”，您可能会在 XML 配置文件中找到一个 exntry，尝试将其注释掉。

可能两个模块都通过 Magento XML 配置添加 jquery。删除模块 XML 配置文件中的这些条目之一，问题应该会消失。我建议删除 jquery-1.4.4.min.js，因为它包含在大多数其他 jquery 插件之后，这将导致更多问题。

2)

jQuery.noConflict() 在使用 jquery 后调用。如上所述，最好的解决方法是打开 jquery.js 文件，并将其添加到文件的最后： ;jQuery.noConflict();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:01:14.773

根据我的经验，解决冲突的最佳方法如下：

*   删除 1 个版本的 jQuery - 你已经安装了 2 个。通常最新的应该与您的所有插件兼容。
*   编辑您的 jQuery 文件并制作，例如：`jquery-1.7.1-custom.js`
    *   `jQuery.noConflict();`在文件末尾添加。
*   您所做的是正确的 - 不要使用 $ 符号，只需对所有内容使用 jQuery 前缀即可。
*   **在你的情况下最重要的。**确保您的文件按以下顺序加载：
    *   原型
    *   jQuery（自定义）
    *   jQuery 插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:09:18.333

您的主要问题是您在原型之前包含 jquery（查看页面源代码）

```
 <script type="text/javascript" src="..../js/jquery/jquery.js"></script>
 <script type="text/javascript" src="..../js/prototype/prototype.js"></script> 
```

您需要将其更改为

```
 <script type="text/javascript" src=".../js/prototype/prototype.js"></script>
 <script type="text/javascript" src=".../js/jquery/jquery.js"></script>
 //best to add  jQuery noConflict right after 
```

修复这个打开

> /design/frontend/default/[主题]/layout/page.xml

或（如果上面没有找到 jquery）

> /app/design/frontend/default/[主题]/template/page/html/head.phtml

您的 page.xml 应该看起来像

```
<default translate="label" module="page">
    ......
        <block type="page/html_head" name="head" as="head">
            <action method="addJs"><script>prototype/prototype.js</script></action>
            <action method="addJs"><script>lib/ccard.js</script></action>
            <action method="addJs"><script>prototype/validation.js</script></action>
            <action method="addJs"><script>scriptaculous/builder.js</script></action>
            ......
            <action method="addJs"><script>mage/translate.js</script></action>
            <action method="addJs"><script>mage/cookies.js</script></action>

            <action method="addItem"><type>skin_js</type><name>js/jquery-1.7.2.min.js</name></action>
            <action method="addItem"><type>skin_js</type><name>js/jquery.noconflict.js</name></action>
            <action method="addItem"><type>skin_js</type><name>js/jqforms/jquery.jqtransform.js</name></action>
           <!- all other jquery plugin below -->
   ..... 
```

创建一个文件调用 jquery.noconflict.js 并添加

```
 var $j = jQuery.noConflict(); // you could also add this  to the end of jquery-1.7.2.min.js 
```

在您的自定义 jquery 代码中，您不能`$...`再使用（仅由prototypeJs 使用）您需要使用`$j...`或`jQuery...`

然后**删除**

```
 <script src="http://modulesoft.biz:/projects/magento/extream/skin/frontend/base/default/js/jquery-1.4.4.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T13:30:27.523

你可以使用这个 Magento 模块：[https ://github.com/sotastudio/Mage.Ext.Jquery](https://github.com/sotastudio/Mage.Ext.Jquery)

它只是重新组织了 JavaScript 内容的包含并将 jQuery 直接设置为第一个位置。此外，您可以在此代码段中轻松触发 jQuery 内容：

```
(function($) {
  $(function() {
    //console.log($('body'));
  });
})(jQuery); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T13:17:27.100

您必须添加`jQuery.noConflict();`到 jquery.js 脚本文件的末尾，而不是在它之外，因为它必须在prototype.js 脚本被包含之前被调用。

# awk - awk：如何执行命令并读取其输出

> ID：14708234
> 
> 赞同：1
> 
> 时间：2013-02-05T13:04:47.787
> 
> 标签：awk

我想从标准输入读取数据并为每个解析的行执行一个 shell 命令并恢复其输出。

这是一个几乎可以工作的例子：

```
[root@eulbi002] # ping eulbi001 | awk -F'[ =]' '/64 bytes/{"date +%s"|getline D; print D,$11}'
1360069298 0.056
1360069298 0.051
1360069298 0.051 
```

命令 'date +%s' 被执行，我可以恢复输出，但在我看来，执行只发生一次，而不是在每场比赛中。

最终目的是将输出交给 rrdtool 进行存储，而 rrdtool 想要每条记录的时间戳。

@Ed Morton 除了指出一个可行的解决方案外，还提到了 gawk 及其内置的时间功能。这是最优雅的解决方案。

```
[root@eulbi002] # ping eulbi001 | awk -F'[ =]' '/64 bytes/{print systime(),$11}'
1360069298 0.056
1360069298 0.051
1360069298 0.051 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:28:01.720

以防万一这里还有另一个 getline 警告（请参阅[http://awk.info/?tip/getline](http://awk.info/?tip/getline)），请尝试在每次调用后关闭管道，例如：

```
ping eulbi001 |
awk -F'[ =]' 'BEGIN{cmd="date +%s"} /64 bytes/{cmd|getline D; close(cmd); print D,$11}' 
```

看看你是否得到不同的结果。但是，您仍然不应该期望 D 在每次调用时都会更改，只是每秒更改一次。如果您愿意，您可以为更小粒度的时间戳添加“.%N”。

更好的是，使用 GNU awk 和它的内置时间函数，所以你根本不需要处理这些东西。

# javascript - jQuery Mobile - 指定列表视图上的加载指示器

> ID：14708242
> 
> 赞同：0
> 
> 时间：2013-02-05T13:05:12.683
> 
> 标签：javascript, jquery, mobile, loading, indicator

我对 jQuery mobile 有一点问题。在我的移动页面上，我有 3 个异步加载的区域，我想在每个区域上显示加载指示器。当然，我可以保留全局加载指示器，直到每个区域都加载完毕，但这不是重点。如果可能的话，我想使用 jQM 内置功能，如果没有 - 创建新功能不是问题。jQuery 中是否只有全局页面加载指示器？

# c# - 从列表视图控件中获取价值

> ID：14708244
> 
> 赞同：9
> 
> 时间：2013-02-05T13:05:16.277
> 
> 标签：c#

需要帮助从 ListView 中的 custID 列中选择值，以便我可以从数据库中检索值并将其显示在 TextBoxes 中。 SelectedIndex 在 c# 中不起作用

谢谢

[http://img713.imageshack.us/img713/133/listview.jpg](http://img713.imageshack.us/img713/133/listview.jpg)

我的代码

```
private void yourListView_SelectedIndexChanged(object sender, EventArgs e)
{
    if (yourListView.SelectedIndex == -1)
        return;
    //get selected row
    ListViewItem item = yourListView.Items[yourListView.SelectedIndex];
    //fill the text boxes
    textBoxID.Text = item.Text;
    textBoxName.Text = item.SubItems[0].Text;
    textBoxPhone.Text = item.SubItems[1].Text;
    textBoxLevel.Text = item.SubItems[2].Text;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T13:18:38.340

ListView 没有属性`SelectedIndex`。您应该使用`SelectedItems`或`SelectedIndices`。

所以你可以使用这个：

```
private void yourListView_SelectedIndexChanged(object sender, EventArgs e)
{
    if (yourListView.SelectedItems.Count == 0)
        return;    

    ListViewItem item = yourListView.SelectedItems[0];
    //fill the text boxes
    textBoxID.Text = item.Text;
    textBoxName.Text = item.SubItems[0].Text;
    textBoxPhone.Text = item.SubItems[1].Text;
    textBoxLevel.Text = item.SubItems[2].Text;
} 
```

我在这里建议将属性`MultiSelect`设置为`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-05T17:28:50.677

C# 和 WPF 使用这个：

```
private void lv_yourListView_SelectedIndexChanged(object sender, EventArgs 
e)
{
    if (yourListView.SelectedItems.Count == 0)
        return;    

     var item = lvb_listInvoices.SelectedItems[0];
     var myColumnData = item.someField; //use whatever you want
} 
```

# sql - 组合连接表后，然后在其他表中保存/追加

> ID：14708245
> 
> 赞同：0
> 
> 时间：2013-02-05T13:05:18.970
> 
> 标签：sql, vb.net, ms-access, jointable

**加入两个表并保存并添加到当前表：**

这是场景：

每天我们需要将我们制作的所有记录（计划和调度）的列表添加或添加到新表中，即**RECORDS TABLES**。然后，**计划和调度表** 需要删除当天的所有数据/记录。

我已经让这两个表在这里加入代码：

```
SELECT Dispatch.PlateNo, Dispatch.FirstName, Dispatch.LastName, Dispatch.MiddleName , Dispatch.TADDispatch, Schedules.LineNo, Schedules.DepartureTime, Schedules.DepartureTimes FROM Dispatch LEFT OUTER JOIN Schedules ON Dispatch.PlateNo = Schedules.PlateNo; 
```

我不知道如何将其保存或插入到记录表中并删除调度和计划中的所有数据/记录

我正在使用 Microsoft Access 和 VB.Net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:14:30.530

您应该能够像这样进行插入：

```
INSERT INTO RECORDSTABLES
SELECT 
    Dispatch.PlateNo, Dispatch.FirstName, Dispatch.LastName, 
    Dispatch.MiddleName, Dispatch.TADDispatch, Schedules.LineNo, 
    Schedules.DepartureTime, Schedules.DepartureTimes
FROM 
    Dispatch LEFT OUTER JOIN Schedules ON Dispatch.PlateNo = Schedules.PlateNo 
```

然后在原始的两个表上运行 Truncate 语句以删除行。

# qt - 如何在 qwtplot 中将单位添加到绘图的比例

> ID：14708251
> 
> 赞同：1
> 
> 时间：2013-02-05T13:05:42.963
> 
> 标签：qt, qwt

我想创建如下图所示的内容：

我查看了 qwtplot 文档，但我认为这是不可能的。

有人试过吗？ ![情节](../Images/5217e4359a3a06916efca1090caed4ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:15:03.897

看看这个问题的答案：[Not Drawing QWT Plot Axis](https://stackoverflow.com/questions/11872787/not-drawing-qwt-plot-axis) 您应该创建自己的`QwtScaleDraw`子类并`virtual QwtText label(double) const`按照链接中的描述重新定义，如下所示：

```
 virtual QwtText label(double val) const
    {
         return QwtText(QString::number(val) + "s");
    } 
```

有关值的格式和精度的更多信息，请查看[此处](http://qt-project.org/doc/qt-4.8/qstring.html#number-2)。

您可以使用[QwtPlotMarker](http://qwt.sourceforge.net/class_qwt_plot_marker.html)添加自定义标签。这可能看起来像这样：

```
 QwtPlotMarker marker = new QwtPlotMarker();
    marker->attach(your_plot_instance);
    marker->setValue(0.0, 0.0); // location of the label in plot coordinates
    marker->setLabel("title"); 
```

如果您想为绘图标记设置更多属性，请查看[QwtPlotMarker 文档](http://qwt.sourceforge.net/class_qwt_plot_marker.html)

# php - 进行“测验” - 我如何显示以前的答案？

> ID：14708254
> 
> 赞同：0
> 
> 时间：2013-02-05T13:05:51.387
> 
> 标签：php, while-loop

我正在做一个“测验”。用户会被问到一个问题，并且可以在三个答案之间进行选择。这是我的代码：

```
// query
$result = mysql_query("SELECT * FROM `db_game` LEFT JOIN `db_game_printers` ON (db_game.printerId = db_game_printers.id) ORDER BY RAND() LIMIT 1") or die(mysql_error());

while($row = mysql_fetch_array($result)) {

// explode answers
$row['printerQuestion'] = trim($row['printerQuestion']);
$question = explode(",", $row['printerQuestion']);

$printerQuestion = $row['title'];
$printerAnswer = $row['printerAnswer'];

// check answer
$answer = $row['printerAnswer'];
    if (isset($_GET['answer'])) {
        $answerUser = $_GET['answer'];
        if ($answerUser == $answer) {
            $correct = true;
        } else {
            $false = true;
        }
    } 
```

它按预期工作。当用户通过单击答案来回答问题时，将显示下一个问题。我还想表明他们是否真的回答正确或不正确！我写了这段代码：

```
<div id="wrapper">

<div id="question">
<h1><?= $printerQuestion; ?></h1>
</div><!-- /question -->

<ul id="answers">
    <li style="text-align:left;"><a href="index.php?answer=<?=$question[0];?>"><button class="punch"><?=$question[0];?></button></a></li>
    <li style="text-align:center;"><a href="index.php?answer=<?=$question[1];?>"><button class="punch"><?=$question[1];?></button></a></li>
    <li style="text-align:right;"><a href="index.php?answer=<?=$question[2];?>"><button class="punch"><?=$question[2];?></button></a></li>
</ul>
<div class="clear" style="margin-bottom:50px;"></div>

<?php
$prev_printerQuestion = $printerQuestion;
$prev_printerAnswer = $printerAnswer;

} // end while loop
?>

<?php
if (isset($_GET['answer'])) {
    if ($correct) {
        echo "Correct! The ".$prev_printerQuestion." uses the ".$prev_printerAnswer."";
    }
    else if ($false) {
        echo "Not correct. ".$prev_printerQuestion." = ".$prev_printerAnswer."" ;
    }
}
?>

</div><!-- /wrapper --> 
```

检查答案是否正确使用当前数据。不是来自上一个问题。我尝试将这些值放在一个单独的变量中并在 while 循环之外（和内部），但这没有任何区别。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:29:19.367

首先，定义一些函数来表示您要在应用程序中执行的操作。（为了简单起见，我将在这里停止使用函数，而不是谈论 OO 原则）。

了解应用程序功能的这种*封装*是良好软件设计的第一步。

在您的情况下，您的视图层非常简单：

```
function displayQuestion($question, $answers) { /* display html for question and possible answers */ } 
```

为了显示问题，您需要从数据库中获取问题及其答案。你可以这样做：

```
function getQuestion($questionNumber) { /* performs SQL queries and returns some representation of question, answers and correct answer */ } 
```

然后你就有了真正的“商业”（游戏）逻辑本身，即：

```
function checkAnswer($questionNumber, $answerGiven) { /* returns true or false */ } 
```

你还需要一些函数来控制整个游戏，比如：

```
function startNewGame() { /* reset internal variables */ }

function getCurrentQuestionNumber() { /* get the question that the user is up to */ }

function displayCurrentScore() { /* display html for current score */ } 
```

最后一部分是将它们连接在一起。（我的意思是讨论中的最后一件事，而不是你做的最后一件事）。这是您将各个部分连接在一起的地方，从 HTTP 请求开始，一直到模型和业务逻辑，然后返回视图层以通过 HTTP 响应向用户显示页面。您可以想象将整个过程封装为一个方法：

```
function handleRequest() { /* perform the whole request-response cycle, calling the other methods as required */ } 
```

请注意，以上只是对这些功能及其作用的广泛且非常概括的方法，我不知道您的确切要求，因此会缺少部分。这也不是“最佳实践”，但它比将业务逻辑和数据库访问混合到 HTML 代码中更好:-)

# c# - YouTube 搜索结果取决于开发者资料？

> ID：14708262
> 
> 赞同：1
> 
> 时间：2013-02-05T13:06:15.850
> 
> 标签：c#, youtube.net-api

我正在使用 YouTube API，我意识到我的 c# API 结果与我使用网络浏览器（firefox）时得到的结果不同（我只是在搜索诸如“足球”等一般术语）

我的问题是 YouTube API“搜索”结果是否与用户在未登录的情况下进入网络浏览器时获得的结果相同？或者像我使用我的 GoogleAPI.DeveloperKey 和用户名（当我填写“youTubeRequestSettings”时）youtube 给我个性化的结果？

提前谢谢:)

# php - 什么时候应该向 AJAX 返回真/假，什么时候应该回显“真”/“假”

> ID：14708269
> 
> 赞同：2
> 
> 时间：2013-02-05T13:06:38.597
> 
> 标签：php, javascript, jquery, ajax

不知怎的，我把自己弄糊涂了。

不知何故，当我使用 AJAX（如 $.post）访问 PHP 时，我不得不回显“true”或“false”，而不是返回 true/false。我现在看到情况并非如此，但是有人可以为我分解吗？

测试布尔值是否有问题？像这儿

```
... 
$.post('ajax/doThing',{data: data},
    function(response) {
        if(response) {
            doThis();
        }else{
            doThat();
        } 
```

那是问题案例，对吗？在这里我不能返回真/假，而是必须回显一个字符串并测试该字符串，是吗？

```
if(response === "true") 
```

但我已经看到布尔真/假返回到 ajax 函数。如果您无法在 AJAX 端测试布尔值，这有什么用？为什么 ajax 不能测试布尔值？

还是我还在迷茫？

**编辑**

只是想感谢大家对此的良好回答。我现在是+2 smrter。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T13:11:54.317

当请求没有真正成功时，您还可以查看返回 HTTP 错误代码而不是返回“成功”响应（HTTP 状态代码 200），然后使用`error`回调来处理不成功的请求。

但是，如果您想继续使用状态码 200（很多人都这样做）：

客户端和服务器之间传输的数据**始终**是文本。诀窍是确保客户端和服务器就客户端应如何反序列化文本达成一致（在收到时对其进行转换）。通常，您可能会返回以下四种内容之一：

1.  HTML（如果要填充页面元素）

2.  JSON（如果您想要一种轻量级、快速的方式将数据发送到客户端）

3.  XML（如果您想要一种更重、更快速的方式将数据发送到客户端）

4.  纯文本（无论你想要什么，真的）

客户端所做的将取决于`Content-Type`您在 PHP 页面中使用的标头。

我的猜测是，您使用的几种内容类型中的任何一种最终都会将数据作为字符串传递给您的回调。字符串`"true"`是真的，但**字符串** `"false"`也是（只有空字符串是假的）。

长话短说：我可能会在我的 PHP 中使用它：

```
header('Content-Type', 'application/json'); 
```

...并从中返回此文本：

```
{"success": true} 
```

或者

```
{"success": false} 
```

...然后在您的成功处理程序中：

```
if (response.success) {
    // It was true
}
else {
    // It was false
} 
```

或者，您可以返回 a `Content-Type`of`text/plain`并使用

```
if (response === "true") {
    // It was true
}
else {
    // It was false
} 
```

...但这是一种手动反序列化，您可以在其中获得基础设施来为您完成它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T13:08:53.367

您的脚本应该返回一个响应，该响应将转换为您的 PHP 变量的 JavaScript 等效项，以便进行此类比较，*或者*使用 HTTP 状态代码来传达错误条件。

## 响应处理

`jQuery.ajax()`和朋友根据您发送的响应标头解释响应（默认情况下自动），无论是 XML、JSON 等。

以下代码输出 JSON 格式的响应：

```
header('Content-Type: application/json');
echo json_encode(array(
    'success' => true,
)); 
```

发送到浏览器的输出如下所示：

```
{"success": true} 
```

在您的成功处理程序中，您现在可以使用以下代码：

```
if (response.success) { ... } 
```

## 错误处理

`jQuery.ajax()`还可以处理除常规之外的 HTTP 状态代码响应`200 OK`，例如：

```
header('404 Not found');
exit; 
```

这将调用您的错误处理程序：

```
$.ajax({
    url: ...,
    error: function(xhr, status, msg) {
      // xhr - see http://api.jquery.com/jQuery.ajax/#jqXHR
      // status - "error"
      // msg - "Not found"
      alert('Error code ' + xhr.code + ' encountered');
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T13:09:23.960

Ajax 调用需要你的脚本返回一个文本，当你返回一个 php bool 时，它不会被输出，所以你需要回显“something”，它不必是“true”或“false”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T13:11:26.530

一切都取决于您的服务器响应。如果您使用[适当的 MIME 类型](https://stackoverflow.com/q/477816/1048572)，[jQuery](http://api.jquery.com/jQuery.ajax/)可能会自动[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)为您响应，将布尔值传递`true`给您的回调。如果它不能识别 JSON，它将传递`"true"`您需要比较的文本结果：

* * *

```
// PHP:
header('Content-Type', 'application/json');
echo true; // or "true" or json_encode(true)

// JavaScript (with jQuery.ajax):
… function callback(response) {
    typeof response; // "boolean"
    if (response) {…}
} … 
```

* * *

```
// PHP:
header('Content-Type', 'text/plain'); // or similar, also implicit
echo "true";

// JavaScript (with jQuery.ajax):
… function callback(response) {
    typeof response; // "string"
    if (response == "true") {…}
} … 
```

# hibernate - Hibernate + spring-data：WrongClassException - 具有 id 的对象不是指定的子类

> ID：14708270
> 
> 赞同：1
> 
> 时间：2013-02-05T13:06:40.740
> 
> 标签：hibernate, inheritance, spring-data

我有以下类结构：

![类图](../Images/5ae10dadb8885815ce1ba240b1811ee7.png)

我有一个用于 AbstractCompound 的 spring-data 存储库（使用 QueryDSL）：

```
@Repository
public interface AbstractCompoundRepository<T extends AbstractCompound>
    extends JpaRepository<T, Long>, QueryDslPredicateExecutor<T> {
} 
```

以及调用该存储库的服务类：

```
@Service
@Transactional
public class CompoundServiceImpl<T extends AbstractCompound>
    implements CompoundService<T> {

    @Autowired
    private AbstractCompoundRepository<T> compoundRepository;    

    private Class<T> compoundClass;

    private Class<? extends EntityPathBase<T>> compoundQueryClass;

    private PathBuilder<T> pathBuilder;   

    @Autowired
    public CompoundServiceImpl(Class<T> compoundClass,
            Class<? extends EntityPathBase<T>> compoundQueryClass) {
        this.compoundClass = compoundClass;
        this.compoundQueryClass = compoundQueryClass;
        String path = compoundClass.getSimpleName();
        pathBuilder = new PathBuilder<>(compoundClass, path);
    }       

    @Override
    public T findOne(Predicate predicate) {
        return compoundRepository.findOne(predicate);
    }
    //...snipped...
} 
```

ApplicationContext.xml 为每个具体类定义了一个服务（bean）。

如果我运行测试，我会得到提到的异常：

```
WrongClassException - object with id was not of the specified subclass RegistrationCompound 
```

我可以验证是否使用正确的复合类调用了正确的服务。然而，存储库似乎总是期待一个 RegistrationCompound。

我认为这是由于自动装配存储库的原因。我怀疑只创建了一个实例，并且该实例需要一个 RegistrationCompound。我的问题是如何为每个服务类创建一个特定类型的存储库？甚至有可能拥有这样一个通用存储库吗？

编辑：

现在我开始生气了。我想要的，我的设计，对我来说似乎很基本。但是，每个这样的框架使用的任何东西都与示例中的略有不同，它只是在各个方面都中断了。我想知道人们实际上如何将它用于任何不完全简单的事情。

我确实按照 willome 的建议重构了某些东西。但是我仍然得到 WrongClassException。问题是还有一个具有自定义行为的 Class AbstractCompoundRepositoryImpl。并且该类中的所有方法都会抛出该异常。很明显，spring 仍然只创建 1 个实例（始终使用 RegistrationCompound 作为类型）。问题是这个类包含我试图抽象出来的实际复杂的逻辑。如果必须为每个具体类单独实现它，那么它对于我的目的是不可用的。我不明白。我告诉 spring 创建 2 个不同的存储库，所以请按照我告诉你的 spring 做？好的？严重地...

编辑2：

还有一些比赛条件。引发此错误的测试并不总是相同的，它肯定会根据 spring 决定用于创建存储库的复合类型而有所不同（而不是像我告诉它那样创建 2...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:06:54.107

我也怀疑您的问题的原因是@autowired 存储库。

我会像这样更改您的代码：

```
public abstract class AbstractCompoundService<T extends AbstractCompound>
implements CompoundService<T> {
  ...
  protected abstract AbstractCompoundRepository<T> getCompoundRepository();

  @Override
  public T findOne(Predicate predicate) {
    return getCompoundRepository().findOne(predicate);
  }
  ...
}
public RegistrationCompoundService extends AbstractCompoundService<RegistrationCompound> {

   @Autowired
   RegistrationCompoundRepository registrationCompoundRepository;

   protected AbstractCompoundRepository<RegistrationCompound> getCompoundRepository(){
      return registrationCompoundRepository;
   }
} 
```

# java - 使用 libgdx 加载图像

> ID：14708271
> 
> 赞同：0
> 
> 时间：2013-02-05T13:06:42.140
> 
> 标签：java, image, libgdx

我正在尝试在 libgdx 库构建的 java 应用程序上加载两个图像。我加载了背景图像但是，如果我没有将图像的位置设置为（0,0），我无法将其他图像加载到屏幕上。例如; 我将图像的位置设置为0,0，没有问题。但是，当我将图像的位置设置为 20、0 时，就看不到了。

```
batch.draw(Assets.coinRegion, position.x, position.y, 1, 1) 
```

我正在尝试使用上面的代码绘制图像。

谢谢你。

编辑：

```
obstacle = loadTexture("data/obstacle.png"); 
obstacleRegion = new TextureRegion(obstacle, 0, 0, 64, 64);
world.obstacle.position.x += 0.001; 
batch.draw(Assets.obstacleRegion,
world.obstacle.position.x, world.obstacle.position.y, 1, 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:30:19.687

TextureRegion 类描述了纹理内的一个矩形，对于仅绘制纹理的一部分很有用。

```
private TextureRegion region;
...
texture = new Texture(Gdx.files.internal("image.png"));
region = new TextureRegion(texture, 20, 20, 50, 50);
//if you have 2 images in image.png add new region and specify rectangular:
//region2 = new TextureRegion(texture, 70, 0, 100, 100);
...
batch.begin();
batch.draw(region, 10, 10);
batch.end(); 
```

这里的 20, 20, 50, 50 描述了纹理的一部分，然后在 10,10 处绘制。同样可以通过将 Texture 和其他参数传递给 SpriteBatch 来实现，但 TextureRegion 可以方便地使用一个对象来描述两者。

SpriteBatch 有许多绘制纹理区域的方法

来源：[来源](http://code.google.com/p/libgdx/wiki/SpriteBatch#TextureRegion)

如果您在 1 中有 2 个图像，则使用多个“区域”变量..（region1 = new ... 和 region2 = new...），否则加载 2 个文件并执行文档中所写的相同操作。

# java - lucene过滤器区分大小写

> ID：14708272
> 
> 赞同：0
> 
> 时间：2013-02-05T13:06:45.200
> 
> 标签：java, lucene, migration, case-sensitive

我正在从 lucene 3.0.1 迁移到 4.1.0。经过几天的分析，我认为这些版本中查询结果的过滤有所不同。迁移后，我看到相同查询和过滤器的查询结果有所不同。

事情看起来如下：

我使用的是 lucene 3.0.1，但例如 IndexWriter 的 StandardAnalyzer 是这样配置的：

```
new StandardAnalyzer(Version.LUCENE_24) 
```

QueryParser 使用了相同的配置。很少有字段是 NOT_ANALYSED（表示未编入索引；在 4.x 中已弃用），这会导致迁移到 4.0.0 或 4.1.0 后出现问题。问题是某些未分析的文件的值是大写的。搜索过程如下所示：

1.  QueryParser 获取字段（文档对同一字段有很多价值，对用户来说是最重要的信息）和关键字
2.  准备了具有附加用户条件的过滤器 QueryWrapperFilter(TermQuery(...))
3.  我从 org.apache.lucene.search.Filter 覆盖 getDocIdSet 并遍历所有准备好的过滤器调用 filter.getDocIdSet(IndexReader) 并收集过滤后的元素。

我找到[了这个关于区分大小写](https://stackoverflow.com/questions/12355430/lucene-is-not-matching-strings-having-upper-characters)的答案。我知道[在 lucene 2.4 中使用了 LowerCaseFilter](http://www.lhelper.org/dev/lucene-2.4.0/docs/api/core/index.html) 我所做的是我用 4.x 重新构建了索引，但是所有 NOT_ANALYZED 值现在都是小写的。然后问题就消失了。

对于我使用 3.0.3 区分大小写“无关紧要”而在 4.x 中“重要”的解决方案，这可能是什么原因。也许你们中的一些人可以向我解释幕后发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:00:04.623

索引和分析是两个不同的东西。

分析意味着该领域已通过`Analyzer`选择。不是分析的字段按原样放入索引中。

如果您索引一个大写字符串，而不进行分析，它将在索引中保持大写，并且不会使用小写查询找到。

# java - 如何使用数据压缩将数据从服务器传输到 Android 设备？

> ID：14708278
> 
> 赞同：1
> 
> 时间：2013-02-05T13:07:05.400
> 
> 标签：java, android, compression, zip, go

我正在编写一个从服务器下载数据并显示它的应用程序。数据由文本、视频、音频和图片文件组成。数据以所谓的数据包下载。数据包可以由所有数据类型的集合组成，范围从几千字节到数百兆字节。数据包太大的原因是视频文件。

服务器是用 Go 编写的，应用程序是用 Java (Android) 编写的。

**问题**：如果我想传输数据包（小型和大型），哪种压缩算法是最好的方法？Deflate 是否足够，还是我应该考虑更复杂的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:34:12.023

首先，我假设您的视频、音频和图像文件已经使用有损算法进行了压缩。在这种情况下，您通常无法使用其他不同的压缩算法来压缩数据（很多）。如果文本数据通常只是整个数据包的一小部分，我认为我根本不会费心应用任何进一步的压缩，因为增加软件的复杂性以获得非常小的整体收益是不合理的。例如，如果你将一个 10MB 的音频文件与一个 5kB 的文本文件结合起来，并且能够将文本压缩到 1kB（这可能比你在现实中实现的要好得多），那么数据包的完整大小只会从 10.005MB 减少到 10.001MB，或减少 0.04%。

如果文本量通常很高，您可以证明压缩是合理的，Android 支持使用标准 Android API 的 inflate/deflate 和 gzip。还有用于 bzip2 和 lzma(2) 的 3rd 方 Java 库，我想它们可以在不修改 Android 的情况下编译（虽然我没有尝试过）。快速的 Google 搜索也可以找到 Go 的 gzip、bzip2 和 lzma 实现。

这些算法通常以更高的计算成本和内存要求为代价更好地压缩数据，按以下顺序排列：deflate、gzip、bzip2、lzma。尤其是 lzma 编码器/解码器可能需要比 Android 应用程序实际可用的内存更多。特别是压缩器需要相对较多的内存，如果您保留较小的字典，解码器就不需要那么多了。

# c++ - 一个标题用于各种变量

> ID：14708279
> 
> 赞同：2
> 
> 时间：2013-02-05T13:07:09.720
> 
> 标签：c++, header, constants

我有一个大型程序，用于对物理系统进行建模。因此，我需要定义不同的常量和宏。出于这个原因，我选择了一个头文件，我在其中定义了所有这些内容。在需要的地方，我将这个头文件包含在我项目的所有 .cpp 文件中。以下是此类头文件 (constants.h) 的示例：

```
 #ifndef CONSTANTS_H
 #define CONSTANTS_H

 //global library
 #include <fstream>

 //constant
 const double PI = 3.1415926535;

 //macro
 #define exp_2(x) ((x)*(x))

 #endif 
```

我在这里包含的库 fstream，因为我的许多 .cpp 文件都需要它。我不是专业的程序员，但我想听听基于此原理进行大型模拟的一般意见。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:15:35.943

小心宏。它们看起来像函数，但语义不同，因为在您的示例中对 (x) 进行了双重评估，这可能会产生性能后果或逻辑错误。例如，使用宏 max/min/abs：

前任。1：

```
// would spill extra innocent blood 
val = max(100, GetBloodSample(BS_LDL)) 
```

例 2：

```
// can unexpectedly return a number which is less than 3\.     
val = max(3, schroedingerCat.GetNumPaws()) 
```

（定义为 时`#define max(a,b) ((a)>(b)?(a):(b))`）

请改用内联函数。此外，您应该使用 Tau[而不是 PI](http://tauday.com/tau-manifesto) ))

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-05T13:13:58.250

至少你应该将你的 const 变量定义为*static*以避免（可能的）多个包含的错误和编译器警告：

```
static const double PI = 3.1415926535; 
```

另一种方法是在单个*.cpp*文件中定义 PI，然后在标头中将其*外部*化。

# css - CSS悬停在元素A上，但CSS效果在元素B上

> ID：14708294
> 
> 赞同：2
> 
> 时间：2013-02-05T13:07:48.567
> 
> 标签：css

我有一个 B 类元素，它具有以下 css

> .B{ 显示：无；}

和 A 类的元素，当鼠标悬停在上面时，它具有以下 css

> A:hover .B{ 显示:块; }

我想要实现的css效果是，当将鼠标悬停在A类元素上时，会出现B类元素。这个对吗？目前它没有给我我想要的东西。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:14:40.797

你的 CSS 应该可以工作。

但是如果 .B 是 .A 中的唯一元素，那么 .A 的可见大小可能是 0px x 0px。

这意味着 :hover 伪类永远不会被触发。

您可以使用 css 强制 .a 的大小，或者通过在其中添加不可见元素来拉伸其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:09:20.313

CSS 不允许您对 DOM 树的任意元素执行此操作。为此，您将不得不使用 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:09:38.393

只要`.B`类是类的孩子，它就会起作用`.A`。

这里的例子它工作[http://tinkerbin.com/V7ELzMRM](http://tinkerbin.com/V7ELzMRM)因为它`.B`是子级[http://tinkerbin.com/EhEYIlJL](http://tinkerbin.com/EhEYIlJL)它不工作因为不是.`.A``.B``.A`

工作演示：[http ://tinkerbin.com/V7ELzMRM](http://tinkerbin.com/V7ELzMRM)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:10:50.700

这仅适用于 .B 嵌套在 .A 中或者如果它在 DOM 中的旁边，您可以尝试：

```
.A:hover + .B {
   display:block;
} 
```

你可以在这里测试：[http ://cssdesk.com/Mwzzv](http://cssdesk.com/Mwzzv)

如果不是，您将需要使用一些 JS（在这种情况下为 jQuery）

```
$(".A").hover(function(){ $(".B").show() },function(){ $(".B").hide() }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T13:15:16.667

您的 css 绝对正确，但请记住以下 HTML 应该可以正常工作您的 css

```
<div class="A">
  <div class="B">
  </div>
</div> 
```

如果您的 Html 与上述不同，请使用 jQuery

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T13:16:12.027

您可以使用 jquery：

```
$(documnet).ready(function(){
  $(".A").hover(function(){
    $(".B").css("display", "block");
  });
}); 
```

或者你可以使用这个：

```
$(documnet).ready(function(){
  $(".A").mouseenter(function(){
    $(".B").css("display", "block");
  });

$(".A").mouseleave(function(){
  $(".B").css("display", "none");
   });
}); 
```

# ruby-on-rails - 向模型的 named_scope 添加唯一性约束

> ID：14708301
> 
> 赞同：0
> 
> 时间：2013-02-05T13:08:06.773
> 
> 标签：ruby-on-rails, named-scope

我有这个配置：

```
model Box < ActiveRecord::Base
  has_many :toys
  has_many :inventories, :through => :toys

  scope :for_inventory, lambda{ |inv| joins(:toys).where("toys.inventory_id = ?",inv) }
end

model Toy < ActiveRecord::Base
  belongs_to :box
  belongs_to :inventory
end

model Inventory < ActiveRecord::Base
  has_many :toys
  has_many :boxes, :through => :toys
end 
```

现在，担心的是，

```
Inventory.find(2).boxes.count
>> 140 
```

尽管

```
Box.for_inventory(2).count
>> 506
Box.for_inventory(2).uniq.count
>> 506 
```

问题是，如果 a`Box`包含多个`Toys`，它会被多次返回。所以，我认为我可以覆盖该类的`<=>`运算符，因此实际上会做一些事情并将列表从 506 减少到 140。但是没有更好的方法来更改范围，以便在请求时执行此操作吗？`Box``.uniq``Box::for_inventory`

# vb.net - Char.IsSymbol("*") 为假

> ID：14708304
> 
> 赞同：9
> 
> 时间：2013-02-05T13:08:18.593
> 
> 标签：vb.net

我正在研究密码验证例程，并且惊讶地发现 VB 不认为 '*' 是每个 Char.IsSymbol() 检查的符号。这是 QuickWatch 的输出：

```
char.IsSymbol("*")  False   Boolean 
```

[MS 文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.CHAR.ISSYMBOL%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-VB%29&rd=true)没有指定 IsSymbol 匹配哪些字符，但暗示此处包含标准数学[符号](http://msdn.microsoft.com/en-us/library/00k2wda1%28v=vs.100%29.aspx)。

有没有人有任何匹配所有标准美国特殊字符的好主意？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T13:55:49.203

在此上下文中作为符号的字符：、 和`UnicodeCategory.MathSymbol`来自`UnicodeCategory.CurrencySymbol`命名空间。这些是分别指定为 Sm、Sc、Sk 和 So 的 Unicode 字符。所有其他字符返回。`UnicodeCategory.ModifierSymbol``UnicodeCategory.OtherSymbol``System.Globalization``False`

来自.Net 来源：

```
internal static bool CheckSymbol(UnicodeCategory uc)
{
    switch (uc)
    {
        case UnicodeCategory.MathSymbol:
        case UnicodeCategory.CurrencySymbol:
        case UnicodeCategory.ModifierSymbol:
        case UnicodeCategory.OtherSymbol:
            return true;
        default:
            return false;
    }
} 
```

或转换为 VB.Net：

```
Friend Shared Function CheckSymbol(uc As UnicodeCategory) As Boolean
    Select Case uc
        Case UnicodeCategory.MathSymbol, UnicodeCategory.CurrencySymbol, UnicodeCategory.ModifierSymbol, UnicodeCategory.OtherSymbol
            Return True
        Case Else
            Return False
    End Select
End Function 
```

`CheckSymbol``IsSymbol`使用给定字符的 Unicode 类别调用。

由于 属于`*`类别`OtherPunctuation`（您可以使用 进行检查`char.GetUnicodeCategory()`），因此它不被视为符号，并且该方法*正确*返回`False`。

要回答您的问题：使用`char.GetUnicodeCategory()`来检查角色属于哪个类别，并决定是否将其包含在您自己的逻辑中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-26T19:50:52.663

如果您只需要知道该字符不是数字或字母，只需使用

```
!char.IsLetterOrDigit(c) 
```

最好用

```
&& !char.IsControl(c) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:37:01.330

也许你有编译器选项“严格”的，因为

```
Char.IsSymbol("*") 
```

我收到编译器错误

```
BC30512: Option Strict On disallows implicit conversions from 'String' to 'Char'. 
```

要在 VB.NET 中定义字符文字，必须将 ac 添加到字符串中，如下所示：

```
Char.IsSymbol("*"c) 
```

# c# - 如何在运行时添加新的 MvcSitemapProvider 节点

> ID：14708306
> 
> 赞同：6
> 
> 时间：2013-02-05T13:08:27.613
> 
> 标签：c#, .net, asp.net-mvc, mvcsitemapprovider

我正在开发一个带有 wcf-service 数据层的类似 webshop 的 asp.net mvc 4 网站。我的应用程序是使用主类别、子类别和产品构建的。每个产品只能在一个子类别中，我的网址是这样的：

/maincategoryname/subcategoryname/{productid}/producttitle

以及相应的面包屑路径：

首页 > 主分类 > 子分类 > 产品标题

我目前正在使用 MvcSitemapProvider 来生成我的导航菜单和面包屑。我将所有 url 加载为没有缓存的动态节点。这个解决方案适用于几个产品，但是当我添加 1000 个产品时，站点地图需要 6.5 秒才能填充，这太长了。

我在 MvcSitemapProvider 中打开了缓存。这样应用程序加载速度更快。但是当用户添加一个新产品并导航到这个新产品（页面）时。该网址尚未在站点地图文件中，因为它使用缓存。这样我的导航和面包屑就不会生成。

我的问题是：

**用户添加新产品后，是否可以在运行时向站点地图添加新节点？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-18T11:16:42.560

接受的答案现在有点过时了。在 MvcSiteMapProvider v4 中，DynamicNodeProvider 中不再有 GetCacheDescription() 方法。无论如何，这似乎不起作用。

您现在可以通过在更新数据的操作方法上使用 [SiteMapCacheRelease] 属性来[手动使缓存无效：](http://www.shiningtreasures.com/post/2013/08/11/mvcsitemapprovider-4-cache-configuration#expire-cache-programmatically)

```
[MvcSiteMapProvider.Web.Mvc.Filters.SiteMapCacheRelease]
[HttpPost]
public ActionResult Edit(int id)
{

    // Update the record

    return View();
} 
```

或者通过调用静态方法：

```
MvcSiteMapProvider.SiteMaps.ReleaseSiteMap(); 
```

您现在还可以选择扩展框架以[提供您自己的缓存依赖](http://www.shiningtreasures.com/post/2013/08/13/mvcsitemapprovider-4-extending-the-cache#icachedependency)项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:00:37.573

MvcSiteMapProvider 允许解决缓存依赖关系的[动态站点地图。](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps)

您可以通过创建一个实现`IDynamicNodeProvider`. 下面是一个基于数据库查询生成动态节点的示例，并且还设置了对同一查询的缓存依赖关系。

```
public class ProductNodesProvider : IDynamicNodeProvider
{
  static readonly string AllProductsQuery = 
    "SELECT Id, Title, Category FROM dbo.Product;";
  string connectionString = 
        ConfigurationManager.ConnectionStrings ["db"].ConnectionString;

  /// Create DynamicNode's out of all Products in our database
  public System.Collections.Generic.IEnumerable<DynamicNode> GetDynamicNodeCollection()
  {
    var returnValue = new List<DynamicNode> ();

    using (SqlConnection connection = new SqlConnection(connectionString)) {
      SqlCommand command = new SqlCommand (AllProductsQuery, connection);
      connection.Open ();
      SqlDataReader reader = command.ExecuteReader ();
      try {
        while (reader.Read()) {
          DynamicNode node = new DynamicNode (); 
          node.Title = reader [1]; 
          node.ParentKey = "Category_" + reader [2]; 
          node.RouteValues.Add ("productid", reader [0]);

          returnValue.Add (node); 
        }
      } finally {
        reader.Close ();
      }
    }

    return returnValue;
  }

  /// Create CacheDependancy on SQL
  public CacheDescription GetCacheDescription ()
  {
    using (SqlConnection connection = new SqlConnection(connectionString)) {
      SqlCommand command = new SqlCommand (AllProductsQuery, connection);
      SqlCacheDependency dependancy = new SqlCacheDependency (command);

      return new CacheDescription ("ProductNodesProvider")
      {
        Dependencies = dependancy
      };
    }
  }
} 
```

虽然这一切都非常漂亮 - 当您的客户更改数据库中的产品时应该使缓存无效 - 整体`SqlCacheDependancy`可能很棘手并且依赖于 SQL Server 版本。

`CacheDependacy`如果您使用缓存来存储您的产品，您可以使用自定义选项。

# javascript - Highchart：每个 Y 轴的不同单位

> ID：14708307
> 
> 赞同：0
> 
> 时间：2013-02-05T13:08:32.590
> 
> 标签：javascript, highcharts

如何为我的个人 Y 轴添加一个单位？
我有 4 个轴，都有不同的单位（C、hPa、%）

我的工具提示目前是这样的：

```
tooltip: {
    formatter: function() {
    return ''+
    Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:11:32.167

您可以根据系列更改工具提示。

例子

```
tooltip: {
    formatter: function() {
        if(this.series.name === 'Temperature') {
            return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + 'C';
        } else {
            return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + '%';
        }
    }
} 
```

[演示](http://jsfiddle.net/pr8mn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:10:42.113

您可以在 Highcharts.dateFormat() 行的末尾添加符号，例如

```
tooltip: {
formatter: function() {
return ''+
Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y+' hPa';
} 
```

}

# magento - Magento 使用自定义订单状态触发观察者

> ID：14708318
> 
> 赞同：0
> 
> 时间：2013-02-05T13:09:06.583
> 
> 标签：magento, observers

我正在创建一个 Magento 模块，我希望观察者在选择我的自定义订单状态时触发。

实际情况： 人们选择：'Payment Received'`//DO STUFF`在观察者中被触发。

这不起作用，所以这里有什么问题？（虽然状态显示正确）:-(

**配置.xml：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <MOD_PaidStatus>
            <version>1.0.0</version>
        </MOD_PaidStatus>
    </modules>
    <global>
        <sales>
            <order>
                <statuses>
                    <payment_received translate="label"><label>Payment Received</label></payment_received>
                </statuses>
                <states>
                    <processing translate="label">
                        <label>Processing</label>
                        <statuses>
                            <processing default="1"/>
                            <payment_received default="2" />
                        </statuses>
                        <visible_on_front/>
                    </processing>
                    <pending translate="label">
                        <label>Pending</label>
                        <statuses>
                            <pending default="1"/>
                            <payment_received default="2" />
                        </statuses>
                        <visible_on_front/>
                    </pending>
                </states>                  
            </order>            
        </sales> 
        <events>
                <sales_order_resource_save_attribute_after>
                        <observers>
                                <PaidStatus>                                        
                                        <class>MOD_PaidStatus/observer</class>         
                                        <method>observeAttributeChange</method>
                                        <type>singleton</type>
                                </PaidStatus>
                        </observers>
                </sales_order_resource_save_attribute_after>
        </events>
    </global>
</config> 
```

我的**Observer.php**看起来像：

```
class MOD_PaidStatus_Model_Observer {

public function observeAttributeChange($observer){
    $attribute = $observer->getEvent()->getAttribute();
    if  ($attribute->getAttributeCode() == 'status') {
        mail('test@testcase.com', 'testcase', 'foo bar?');
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:32:06.613

为了能够在更改订单的属性“状态”时执行一些操作，最好观察一个事件。在这种情况下，事件将是`sales_order_resource_save_attribute_after`。观察者功能可以设置如下：

```
class YourPackage_YourModule_Model_Observer {

public function observeAttributeChange($observer) 
{

    $attribute = $observer->getEvent()->getAttribute();

    if  ($attribute->getAttributeCode() == 'status') {
    // DO STUFF
    }
} 
```

在您的 config.xml 中输入必要的观察者配置

```
<global>
        <events>
                <sales_order_resource_save_attribute_after>
                        <observers>
                                <your_observer_node_name>                                        
                                        <class>yourpackage_yourmodule/observer</class>         
                                        <method>observeAttributeChange</method>
                                        <type>singleton</type>
                                </your_observer_node_name>
                        </observers>
                </sales_order_resource_save_attribute_after>
        </events>
</global> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:34:38.323

您可以通过重写或观察者来做到这一点。

您将这两个概念混合在一起。

要使用重写，请不要将文件命名为 Observer，请使用**Order** .php 之类的名称：

```
class MOD_PaidStatus_Model_**Order** extends Mage_Sales_Model_Order 
```

并在您的 config.xml 中，在全局节点中，添加以下内容：

```
<models>
    <sales>
         <rewrite>
             <order>MOD_PaidStatus_Model_Order</order>
         </rewrite>
    </sales>
</models> 
```

如果你想通过一个观察者，使用名字 Observer.php 和类名应该是：

```
MOD_PaidStatus_Model_Observer 
```

它不应该扩展任何东西。

功能更像

```
public function myEventHandling($event)
{
    $order = $event->getOrder();
    $status = $order->getStatus();
    //DO YOUR STUFF here
} 
```

但是你应该监听一个不存在的 order_status_changed_after 事件，所以你也添加触发它......如果你不是一个确认的开发人员，那么非常重要。

如果你想要这样的东西，你需要 config.xml 文件中的一个事件节点来将你的观察者及其方法与事件相关联。对 Magento 中的事件处理进行一些搜索

问候，

编辑：对于观察者和事件方式，请查看上一篇文章。但是处理这样一个通用事件是一种非常消耗资源的方式。

# tags - 导出所有标签，而不仅仅是您自己的

> ID：14708323
> 
> 赞同：0
> 
> 时间：2013-02-05T13:09:21.420
> 
> 标签：tags, box-api

当您通过 Box API 获取文件列表时，您还会以字符串格式获取分配给这些文件的标签。这些标签包括您自己的 Box 标签以及共享标签（我的标签与所有标签）。

但是，如果您想在稍后阶段验证其中一些标签是否已被删除，这似乎是不可能的。'export tags' API 方法只返回您自己的标签。这使得保持标签同步变得非常困难，而且我看不出有充分理由说明您可以在 Box UI 中看到标签，但在 API 中却看不到标签。最后，它只是相同数据的另一种表示，或者这就是您所期望的。

任何人都知道可能的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:41:38.017

目前还没有已知的解决方法，但我们正在我们的 V2 API 中构建标签支持，并将考虑这个用例。

# python - 使用 glob.glob 通过给定路径查找多个文件夹中的文件？

> ID：14708331
> 
> 赞同：0
> 
> 时间：2013-02-05T13:09:45.970
> 
> 标签：python

因此，我尝试使用 glob.glob 来通过用户给定的 Python 路径，然后查找 .txt 的所有后续文件夹。目前，下面是我所拥有的，但它似乎不起作用。

```
fileName = raw_input("> ")
listOfTxt = []
for files in glob.glob(os.path.join(fileName, "\\Folder\\*\\*\\*.txt")):
     listOfTxt.append(files) # add it to the list 
```

我不知道如何让它工作，或者我只是不理解 os.path 的 glob.glob。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:26:17.873

如果您只是想要 中所有`.txt`文件的列表`os.path.join(user_dir,'Folder')`，那么`os.walk`可能是一种更好的方法：

```
 import os
 user_dir = os.path.join(raw_input('> '),'Folder')
 file_list = [ ]
 for dirpath,_,filenames in  os.path.walk(user_dir):
     for name in filenames:
         if name.endswith('.txt'):
             file_list.append(os.path.join(user_dir,dirpath,name)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:15:20.643

你用一个路径加入给定的名字，这很奇怪，可能不是你想要的。你可能想要类似的东西

```
glob.glob(os.path.join("\\Folder\\*\\*\\",fileName+".txt")) 
```

?

# regex - 正则表达式提取搜索词周围的片段

> ID：14708333
> 
> 赞同：-2
> 
> 时间：2013-02-05T13:09:48.000
> 
> 标签：regex

我们需要一个正则表达式来从我们正在搜索特定术语或短语的文本中选择句子。结果应该有搜索词的行以及前一行和后一行。这里的行定义可以是从空行开始到任何字符的任何内容。

例如，如果我们在以下文本中搜索术语“沉积”（不区分大小写）：

```
12           xxxxxxxxxx.           )
13   ______________________________)
14
15
16
17
18             VIDEOTAPE DEPOSITION OF JOHN
19                    FRIDAY, OCTOBER 30, 2009
20
21
22
23
24   PAGES 1 - 92 
```

这应该返回我以下结果：

```
17
18             VIDEOTAPE DEPOSITION OF JOHN
19                    FRIDAY, OCTOBER 30, 2009 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:26:21.163

试试这个模式：

```
[^\r\n]*?(?:\r|\n|\r\n)[^\r\n]*?\bDEPOSITION\b[^\r\n]*?(?:\r|\n|\r\n)[^\r\n]*?(?:\r|\n|\r\n) 
```

`DEPOSITION`每次都替换您要查找的单词。为了使搜索不区分大小写，您需要在您选择的正则表达式引擎中进行设置。

这是一个[现场演示](http://gskinner.com/RegExr/?33lou)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:18:14.053

如果您知道要搜索的内容，可以使用以下内容：

```
(\n^.+?DEPOSITION.+?$\n.+?\n) 
```

如果您只想匹配所有组，可以将特定术语替换为 \S（非空格字符），如下所示：

```
(\n^.+?\S.+?$\n.+?\n) 
```

在这两种情况下，确保您已关闭“点匹配换行符”非常重要。在上面，\n 是换行符，.+? 将匹配任何内容，直到下一个字符，^ 匹配行首，$ 匹配行尾。唯一的其他问题可能是一个正则表达式解释器，它有一个用于切换 ^ 和 $ 以匹配文件的开头和结尾而不是行的标志。这应该默认为关闭，但值得确保

# upload - Drupal 7 - 在上传时将元数据添加到文件中

> ID：14708335
> 
> 赞同：2
> 
> 时间：2013-02-05T13:09:52.760
> 
> 标签：upload, drupal-7, metadata

我想让用户填写一些我在上传文件时创建的元数据信息。

我使用文件实体和媒体模块，并为图像文件类型创建了一些字段。例如，一些字段是：位置、类别、标题等。

如果我导航到“管理员/内容/媒体”，我可以查看并完成这些字段。但我希望用户在上传图片时能够查看和填写这些字段。

我在权限表中找不到该设置或任何其他设置的任何内容。有人可以发光吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:46:02.653

我设法找到了一些有用的东西。实际上，我下载了媒体模块（[链接](http://drupal.org/project/media)）和文件实体模块（[链接](http://drupal.org/project/file_entity)）的开发版本。新版本允许用户在上传新文件时编辑自定义字段。

希望这些信息也对其他人有所帮助！

# weblogic - WebLogic 11g 上的 SPDY

> ID：14708337
> 
> 赞同：0
> 
> 时间：2013-02-05T13:10:13.837
> 
> 标签：weblogic, spdy

有没有办法在 WebLogic 11g 服务器上获取 SPDY？我实际上无法想象它，但我至少不得不问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:17:31.363

我不相信 WLS 11g 有原生的 SPDY 支持，但是通常在 WLS 架构中，我们会在 WLS 集群前面放置一个负载均衡器。一些负载均衡器供应商最近添加了 SPDY 支持，例如 F5 BigIP。这是链接：[F5 获得 SPeeDY，增强 BIG-IP](http://www.f5.com/pdf/analyst-reports/esg-brief-f5-spdy.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:38:36.217

如果您可以使用[Jetty](http://eclipse.org/jetty)，那么您将获得完整的 SPDY 支持，以及其他优势功能，例如[透明的 SPDY 推送](http://webtide.intalio.com/2012/06/spdy-we-push/)，据我所知，这是任何其他供应商都没有提供的，它是 SPDY 提供的网站性能改进的第一名。

Jetty 9 还提供了一个完整的 SPDY 代理，可以将 SPDY 或 HTTP 与后端服务器通信（因此您可以使用 Jetty，就像在另一个响应中建议的那样使用 F5），因此即使您坚持使用您的服务器，您也可以利用 SPDY Push后端。

还可以看看[HAProxy](http://webtide.intalio.com/2012/10/jetty-spdy-and-haproxy/)，这是一个软件负载平衡器，可以终止 SSL 和 SPDY 并将 SPDY 透明地转发到后端服务器。

# mysql - 选择数据库中除最新的 3 个条目之外的所有条目

> ID：14708338
> 
> 赞同：0
> 
> 时间：2013-02-05T13:10:14.477
> 
> 标签：mysql

我有一个页面，其中将显示我数据库中的 3 个最新条目，所有较旧的条目都将放置在另一个地方...

我有这个代码来选择最新的 3 个条目：

```
SELECT
  release_id, release_pic, release_artist, release_title, release_info, 
  release_catalognr, beatportlink, ituneslink, traxsourcelink, alternativelink
FROM udgivelse
ORDER BY release_id DESC LIMIT 3; 
```

但是我将如何为我身边的另一部分选择所有其他条目......？这意味着我想从第四个最新条目开始我的选择......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:13:52.297

```
$query= "SELECT * FROM udgivelse";
$result= mysql_query($query);
$count= mysql_numrows($result);

$query2= "SELECT * FROM (SELECT release_id, release_pic, release_artist, release_title, release_info, release_tracks, release_catalognr, beatportlink, ituneslink, traxsourcelink, alternativelink FROM udgivelse ORDER BY release_id ASC LIMIT "+($count-3)+";) ORDER BY release_id DESC;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:17:04.303

您可以将您的更改`LIMIT 3`为：

```
 LIMIT 3,10   //--> this will select 4,5,6,7,8,9,10,11,12,13

--you can change the 10 as much you want get results after the the first 3 results 
```

[这里有一些参考](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

**编辑。**

```
 ORDER BY release_id ASC LIMIT 3,10 ; 
```

**编辑**

使用具有非常高数字的限制作为第二个参数。

```
 limit 3,18446744073709551615; 
```

来自 [MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:16:05.927

一个简单但不完美的方法是为可能的总行数选择一个不可能大的数字，并像这样限制查询：

```
SELECT release_id, release_pic, release_artist, release_title, release_info, release_catalognr, beatportlink, ituneslink, traxsourcelink, alternativelink
                FROM udgivelse
                ORDER BY release_id DESC LIMIT 3, 10000000000; 
```

# php - PHP：您如何使用 Amazon API 获得书的重量和类别/流派？

> ID：14708343
> 
> 赞同：0
> 
> 时间：2013-02-05T13:10:20.883
> 
> 标签：php, zend-framework, amazon-web-services

我有以下内容：

```
$amazon = new Zend_Service_Amazon($this->AMAZON_API_KEY, 'US', $this->AMAZON_API_SECRET);
$book   = $amazon->itemLookup($isbn,
  array(
    'SearchIndex'   => 'Books',
    'AssociateTag'  => 'NON ASSOCIATE',
    'IdType'        => 'ISBN',
    'ResponseGroup' => 'Large,ItemAttributes,Images,EditorialReview',
  )
); 
```

它返回相当多的信息，但不返回重量或类别/类型。如何获得重量和类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T14:22:40.820

Amazon 返回的信息由指定的 ResponseGroup 决定。每个响应组包含的内容的详细信息最好从 Amazon 文档中获得。

[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_ResponseGroupsList.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_ResponseGroupsList.html)

这里需要注意的点是：

*   正如您所指出的，您可以通过用逗号分隔多个响应组来指定它们。
*   小、大和中响应实际上是几个较小响应的组。有时，如果其中包含您所追求的所有信息，则更容易指定其中之一。
*   重量是 ItemAttributes/ItemDimensions 的子项（[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_response_elements.html#Weight](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_response_elements.html#Weight)）
*   类别，尝试流派。

# java - 创建对象与读取 Json

> ID：14708344
> 
> 赞同：0
> 
> 时间：2013-02-05T13:10:20.513
> 
> 标签：java, android, json, object

我正在开发一个 Android 应用程序。应用程序以 JSON 字符串（大学名称和学生名单）的形式获取数据，并根据数据操作应用程序。

什么是更好的方法？

*   创建一个新对象并将 JSON 字符串解析到其中，然后使用该对象，或者
*   保留 JSON 字符串，只要我需要从字符串中获取信息就使用 JSONObject
*   还是有什么其他方式？

如果我正在使用新的对象，我如何将对象转移（或共享）到应用程序中的其他活动？我知道对于字符串我们可以使用`putextra()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:15:48.800

使用对象。
我建议使用[Jackson library](http://jackson.codehaus.org/)，因为它非常快速且易于集成。
你可以在这里找到代码示例：
[http ://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)

PS：杰克逊不是这种方法的唯一图书馆>[杰克逊与。格森](https://stackoverflow.com/questions/2378402/jackson-vs-gson)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:16:59.403

我建议解析字符串（或使用库为您执行此操作！）并填充对象。这样，您的模型对象可以控制数据以及如何与其他对象共享数据，并使用内部数据结构来优化使用。如果您坚持使用 JSON 字符串，您最终会多次解析它以提取数据。

但是，您决定在活动之间共享对象/字符串不应影响您对如何建模数据的决定。在任何情况下，您最终都可能会在活动中传递它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:17:22.023

我几乎总是将 JsonObject 解析成一个特定的对象，例如大学类。

这样做的一个好处是，您可以将它很好地放入集合中。例如 HashMaps、Set 或直接 List。将其作为 JsonObject 处理时，您将无法轻松使用它。

如果你的 Object 继承了 Comparable，你可以对它进行排序，并且可以定义 equals/toString/hashCode。

还有许多其他好处，但我认为您会发现将数据保存在真实的数据结构中会给您带来最大的好处

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:28:45.343

我建议你也使用对象。

您可以使用 Gson 库在 json 字符串和对象之间进行任何转换。它非常非常易于使用。[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

要在其他活动之间传输数据，您可以使您的对象实现`Serializable`接口，这样您就可以使用`.putExtra()`并转发它。

# ruby-on-rails - 在 Rails 中检查值是否存在

> ID：14708346
> 
> 赞同：0
> 
> 时间：2013-02-05T13:10:30.043
> 
> 标签：ruby-on-rails, hash, matching

我有一个哈希：

```
hsh = {"http://localhost:3000/sales?"=>[], "am"=>["Room Service", "Coffee Shop", "Business Center"]} 
```

我还有另一个变量，因为**c.value** 包含“客房服务”

现在我想检查`Room Service`哈希中是否存在值，我使用了它，但它显示错误。

```
if hsh.any? {|x| x[:am] == "#{c.value}" } 
```

错误：

```
can't convert Symbol into Integer. 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:17:52.227

你应该试试

```
if hsh.any? { |key, value| value.include? c.value } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:17:21.010

尝试`hsh.detect { |k,v| v.include? c.value }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:16:45.270

您可以获取“am”键并检查它是否包含您的值。

```
hsh.fetch("am", []).include?(c.value) 
```

这样，即使您没有“am”键，您也不会收到错误消息。

另请注意，您的密钥是一个字符串。

# c++ - 我无法让我的基数排序正确打印到文件

> ID：14708348
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:10:36.720
> 
> 标签：c++, algorithm, sorting, radix-sort

我已经尝试了几个小时才能让它工作，但无论出于何种原因，我都无法正确打印我的数组。这是我的代码（下面的 .txt 文件）

```
//
//  main.cpp
//  cs498 -mp1

#include<iostream>
#include<stdlib.h>
#include <fstream>
#include<time.h>

int sortsize=1000;
int seed=1;

using namespace std;

void readfile(int *input, int size)

{

}

void writefile(int *input, int size)
{
    ofstream myfile;
    myfile.open ("example.txt");
    myfile << "Radix Sort\n";

    for(int i=0; i<size; i++)
        myfile << input[i] << endl;
    myfile.close();

}

void radixsort(int *a, int arraySize)
{
    int i, bucket[sortsize], maxVal = 0, digitPosition =1 ;
    for(i = 0; i < arraySize; i++) {
        if(a[i] > maxVal) maxVal = a[i];
    }

    int pass = 1; 
    while(maxVal/digitPosition > 0) {
        // reset counter 
        int digitCount[10] = {0};

        // count pos-th digits (keys) 
        for(i = 0; i < arraySize; i++)
            digitCount[a[i]/digitPosition%10]++;

        // accumulated count 
        for(i = 1; i < 10; i++)
            digitCount[i] += digitCount[i-1];

        // To keep the order, start from back side
        for(i = arraySize - 1; i >= 0; i--)
            bucket[--digitCount[a[i]/digitPosition%10]] = a[i];

        for(i = 0; i < arraySize; i++)
            a[i] = bucket[i];

        cout << "pass #" << pass++ << ": ";
        digitPosition *= 10;
    } 

}

void ccradixsort(int *array /* you will need more arguments */)
{

}

int main(int argc, char *argv[])
{
    clock_t start, end;
    int *sortarray;
    int *input;

    if(argc > 1)
        sortsize = atoi(argv[1]);

    sortarray = (int *) malloc(sortsize * sizeof(int));
    input = (int *) malloc(sortsize * sizeof(int));

    if(/*argc == 3*/ true)
    {
        seed = atoi(argv[2]);
        for(int i = 0; i < sortsize; i++)
        {
            input[i] = rand();      
        }
    }
    else
    {
        readfile(input,sortsize);
    }

    for(int i = 0; i < sortsize; i++)
    {
        sortarray[i] = input[i];
    }

    start = clock();
    radixsort(sortarray, sizeof(sortarray));
    end = clock();

    cout << "Sorted in " << (double)(end - start)/CLOCKS_PER_SEC << " seconds by radixsort()" << endl;
    writefile(sortarray, sortsize);

/*  
    for(int i = 0; i < sortsize; i++)
    {
        sortarray[i] = input[i];
    }

    start = clock();
    ccradixsort(sortarray);
    end = clock();

    cout << "Sorted in " << (double)(end - start)/CLOCKS_PER_SEC << " seconds by ccradixsort()" << endl;

    //if(argc != 3)
    //  writefile(sortarray, sortsize);
*/
} 
```

这是它生成的文本文件的一部分：

```
>Radix Sort

>16807  
>101027544  
>282475249  
>470211272  
>984943658  
>1144108930  
>1457850878  
>1622650073  
>1458777923  
>2007237709  
>823564440  
>1115438165 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:51:33.520

这里：

```
radixsort(sortarray, sizeof(sortarray)); 
```

因为`sortarray`是`int*`,`sizeof(sortarray)`只有 4 或 8 （取决于你的目标）。

您可能应该`sortsize`像在其他地方一样使用。

# c# - 2D游戏中的顶点着色器？

> ID：14708354
> 
> 赞同：1
> 
> 时间：2013-02-05T13:11:23.617
> 
> 标签：c#, xna, directx, 2d, hlsl

我搜索了一些教程来学习 HLSL，我发现的每个教程都谈到了 VertexShader 和 PixelShader。（教程以 3D 游戏为例）。

所以我不知道 vertexShader 是否对 2D 游戏有用。据我所知，2D 游戏没有任何顶点，对吧？

我必须使用着色器作为后期处理。
我的问题是：`Could you tell me if I have to learn VertexShader for my 2D game ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:55:09.810

XNA（以及 Direct3D、OpenGL 等）中的 2D 图形是通过使用正交投影渲染本质上是 3D 场景来实现的，该**正交**投影基本上忽略了它投影的顶点的深度（随着距离越来越远，事物不会变小） . 您可以使用创建自己的正交投影矩阵`Matrix.CreateOrthographic`。

虽然您可以通过这种方式渲染任意 3D 几何图形，但精灵渲染 - 就像`SpriteBatch`- 只是绘制面向相机的“四边形”（由 2 个由 4 个顶点形成的三角形组成的正方形或矩形）。这些四边形具有 3D 坐标 - 正交投影只是忽略了 Z 轴。

**顶点着色器**基本上在 GPU 上运行并在它们形成的三角形被光栅化之前操纵您传入的顶点。您当然**可以**在这些用于 2D 渲染的顶点上使用顶点着色器。

对于所有现代硬件，顶点变换——包括上面提到的正交投影变换——通常在顶点着色器中完成。这基本上是样板，在 2D 游戏中使用复杂的顶点着色器是不寻常的。但这并非闻所未闻——例如我自己的游戏[Dark](http://andrewrussell.net/dark/)使用顶点着色器来进行 2D 阴影投影。

但是，如果你正在使用`SpriteBatch`，并且你想要的只是一个**像素着色器**，那么你可以`VertexShader`从你的`.fx`文件中省略 - 你的像素着色器仍然可以工作。（要使用它，请将其加载为 an`Effect`并将其传递给 的此[重载](http://msdn.microsoft.com/en-us/library/ff433700.aspx)`SpriteBatch.Begin`）。

如果不替换它，`SpriteBatch`将使用其默认的顶点着色器。[您可以在此处](http://xbox.create.msdn.com/en-US/education/catalog/sample/stock_effects)查看它的来源。它执行单个矩阵变换（传递的矩阵是正交投影矩阵，乘以传递给的可选矩阵`Begin`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:16:14.570

不要这么想。如果您将注意力集中在`2D`游戏上，您可能会避免学习*着色器*以完成您的项目。

另一种选择*可能是*，在`2D`实际生成的场景中渲染`3D`，换句话说，您将场景的投影渲染到*某个*`3D`表面。在这种情况下，您可能需要使用它们，特别是如果您想在没有 CPU 的情况下进行一些很酷的转换（通常也是唯一的选择）。

希望这可以帮助。

# c# - 一个或另一个列表中的一组值，但不是两者

> ID：14708358
> 
> 赞同：4
> 
> 时间：2013-02-05T13:11:35.480
> 
> 标签：c#, linq

我正在区分两个字典，并且我想要 or 或其他字典中的所有键的集合，但不是两者（我不关心顺序）。由于这仅涉及键，我们可以使用字典键的 IEnumerables 来执行此操作。

简单的方法，涉及 2 次通行证：

```
return first.Keys.Except(second.Keys).Concat(second.Keys.Except(first.Keys)); 
```

我们可以连接，因为例外保证列表将完全不同。

但我觉得有一种更好、更灵活的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:14:55.377

我更喜欢非 LINQy 方式：

```
var set = new HashSet<KeyType>(first.Keys);
set.SymmetricExceptWith(second.Keys); 
```

这是您的另一种（但不是更好的）LINQy方式：

```
var result = first.Keys.Union(second.Keys)
                       .Except(first.Keys.Intersect(second.Keys)); 
```

如果您正在寻找（可能）性能更高的东西：

```
var result = new HashSet<KeyType>();

foreach(var firstKey in first.Keys)
{
    if(!second.ContainsKey(firstKey))
        result.Add(firstKey);    
}

foreach(var secondKey in second.Keys)
{
    if(!first.ContainsKey(secondKey))
        result.Add(secondKey);    
} 
```

# youtube-api - 将 YouTube 频道中的所有视频添加到网站

> ID：14708363
> 
> 赞同：0
> 
> 时间：2013-02-05T13:11:48.830
> 
> 标签：youtube-api, youtube-javascript-api, youtube-channels

我正在尝试将 YouTube 频道中的视频提供给网站。我已经能够一一添加视频，但我想在网站上以交互方式添加整个 YouTube 频道。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:16:47.310

使用 Data API v3，您可以获得与您的频道关联的所有播放列表的列表。' [https://developers.google.com/youtube/v3/docs/channels#properties](https://developers.google.com/youtube/v3/docs/channels#properties) ' -> 'contentDetails.relatedPlaylists'

遍历这些播放列表，您可以获得视频 ID 并提供它们。' [https://developers.google.com/youtube/v3/docs/playlistItems#resource](https://developers.google.com/youtube/v3/docs/playlistItems#resource) ' -> 'contentDetails.videoId'

* * *

或者您可以将整个播放列表作为播放器，

去播放列表->'player.embedHtml'

# php - 数据库设计：实现同一实体的几种类型

> ID：14708364
> 
> 赞同：3
> 
> 时间：2013-02-05T13:11:49.350
> 
> 标签：php, mysql, database

我正在编写分类广告网络应用程序。该应用程序有几种类型的广告：

1.  一般广告（电子产品、玩具、宠物、书籍...）
2.  房地产（房屋、公寓、地形...）
3.  车辆（摩托车、汽车、货车、卡车...）

每种类型都有几个公共字段（id、title、description），还有一些是其独有的：

1.  一般广告（无专属字段）
2.  房地产（面积、物业类型...）
3.  车辆（车辆类型、立方容量、公里...）

对于这种情况，最推荐的方法是什么？

*   包含所有字段并将不适用于当前记录集的字段留空的表。
*   包含所有广告通用字段的主表，以及具有专有字段的每种广告类型的附加表。
*   每种广告类型一个表格。
*   其他

这是我的第一个专业 PHP/MySQL 应用程序，如果问题太简单，请原谅。我只是想确保我实施的解决方案是最好的。请讨论为什么以及如何实施您推荐的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:30:57.940

我会根据各种标准构建一个解决方案：

*   如果您认为该表将来会很大（要发布大量广告），您可能希望最小化 JOIN 的数量以获得更好的性能 => 选项 1.“与广告类型无关时包含空字段的表"

*   先前的评论尤其适用于您的数据存储成本较低的情况。

*   如果您必须针对某些字段值（例如房屋大小、汽车公里数）查询数据，您可能会避免使用 phpalix (ad_type | property | value) 或 Andy Gee 描述的解决方案，因为您的 SQL 语法将是一场噩梦，并且更喜欢将所有数据放在同一个表中（再次）。

*   如果每种广告类型有很多自定义字段，您可能更愿意将每种广告类型分别放在各自的表格中，以便于维护和数据存储优化。然后，您可以通过 JOIN 或 UNION 查询您的广告列表。

如果我想到别的东西，我会补充我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:18:43.323

您可以规范化（抽象概念的表和专门的表）或非规范化（包含所有字段的表）

与往常一样，必须根据每个解决方案的成本进行选择，以查询速度为代表（规范化模型意味着更多的连接（缓冲区/cpu），而非规范化的更多磁盘读取通常是因为有时会检索列而不是必要）或两种情况下所需的存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:20:57.043

所有解决方案都是可接受的，并且取决于偏好、性能、复杂性和设计需求。您正在讨论的术语是 Table-Per-Type、Table-Per-Class 和 Table-Per-Hierarchy。如果您在这些方面进行谷歌搜索，您肯定会获得大量的实体框架结果，但底层设计考虑因素大致相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T13:35:54.377

为了灵活性，我会将所有字段放在单独的表中，然后允许将每个字段分配给每种广告类型。这也将允许您在以后轻松添加和删除字段。每个字段可能有不同类型的数据，因此这些信息也应该在单独的表中。

像这样的东西（不是很清楚对不起）

```
Table: fields
field_id, field_type, field_name
1         1           title
2         1           price
3         2           size
4         3           description
5         1           square meters

Table: field_types
field_type_id, type
1,             textbox
2,             select_box
3,             text_area

Table: field_data
field_data_id, ad_id, field_id, field_type_id, field_data
1              1      1         1              Cool t-shirt
2              1      2         1              5.99
3              1      3         2              L,XL,XXL,XXXL
4              1      4         3              Some description
5              2      1         1              Nice house
6              2      2         1              250000
7              2      4         3              Some description
8              2      5         1              1024sq/m

Table: ad_types
ad_type_id, ad_type_name, fields
1           general       1,2,3,4
2           real_estate   1,2,4,5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T13:14:27.337

好吧，将值存储在列中而不是行中，因此创建一个表并包含 3 列：ad_type、property、value

为每种类型的广告定义属性并查询广告类型的字段。

希望有帮助

# ruby-on-rails - rake 任务是否会限制我的类调用外部 API 的功能？

> ID：14708369
> 
> 赞同：0
> 
> 时间：2013-02-05T13:12:08.390
> 
> 标签：ruby-on-rails, rake

AllegroAPI 是 /models 目录中调用外部 API 的类。当我在其他地方而不是通过运行 rake 任务进行测试时，它可以按我的意愿工作。

示例工作代码：

```
require "./AllegroAPI"

allegro = AllegroAPI.new(login: 'LOGIN', 
                      password: File.read('XXXX.txt'),
                      webapikey: File.read('XXX.txt')
                    )
puts allegro.do_search({"search-string"=>"nokia", 
                        "search-price-from"=>300.0, 
                        "search-price-to"=>500.0, 
                        "search-limit"=>50}).to_s 
```

正如我所说，它工作正常。它调用 API 并打印出结果。

文件 allegro.rb 也在模型目录中，它是我通过运行此任务执行的文件：

```
namespace :data do
  desc "Update auctions table in database"
  task update_auctions: :environment do
    Allegro.check_for_new_auctions
  end
end 
```

快板.rb：

```
module Allegro
  require 'AllegroAPI'
  def self.check_for_new_auctions
    allegro = AllegroAPI.new(login: 'LOGIN', 
                      password: File.read('app/models/ignore/XXXX.txt'),
                      webapikey: File.read('app/models/ignore/XXX.txt')
                    )
    looks = Look.all
    looks.each do |l|
      hash_to_ask = ActiveSupport::JSON.decode(l[:look_query]).symbolize_keys
      hash_to_ask = hash_to_ask.each_with_object({}) do |(k,v), h|
        if v.is_number?
          h[k.to_s.split('_').join('-')] = v.to_f
        else
          h[k.to_s.split('_').join('-')] = v 
        end
      end
      results = allegro.do_search(hash_to_ask)
      #do something with data 
    end
  end
end 
```

问题是它不返回任何东西。var 结果不是 nil，但它不包含任何内容。

当我尝试调试它并从内部 do_search 函数调用 API 时，它正在调用 API，不会引发错误，但响应什么都不是。AllegroAPI 工作正常。var "hash_to_ask" 没有问题，它与工作示例中的哈希完全相同。

编辑：

我已经注释掉了 check_for_new_auctions 并使用了“puts”，当我通过执行 rake 任务运行它时它工作正常。然后我使用了与正常文件中使用的代码完全相同的代码：

```
class Allegro
  def self.check_for_new_auctions
    allegro = AllegroAPI.new(login: 'LOGIN', 
                      password: File.read('app/models/ignore/XXXX.txt'),
                      webapikey: File.read('app/models/ignore/XXXX.txt')
                    )
    hash_to_ask = {"search-string"=>"nokia", 
                   "search-price-from"=>300.0, 
                   "search-price-to"=>500.0, 
                   "search-limit"=>50}
    allegro.do_search(hash_to_ask).to_s
  end
end 
```

它没有工作；/ allegro.do_search(hash_to_ask) 的返回值是哈希，不是空的，不是零但是当我尝试打印它时，它什么都不是，空的地方。

编辑：

一切正常，浪费了 15 个小时，总共调试了不存在的问题。我不知道为什么它没有工作，但它在转换为字符串后无法打印到控制台，所以我试着把它写下来盲目地归档。我在文本文件中找到了什么？数据。我不知道为什么它无法在控制台中打印出所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:46:08.067

在您显示的 IRB 脚本中，您有一些 puts 语句不在您的 rake 任务中。因此，为了调试，我会将 puts ... 添加到您的 Rake 任务中，例如：

```
命名空间：数据做
  desc "更新数据库中的拍卖表"
  任务 update_auctions: :environment do
    放“开始拍卖......”
    结果 = Allegro.check_for_new_auctions
    提出“结果：#{results}”
  结尾
结尾

```

现在，当您运行时：

```
rake data:update_auctions 
```

你应该得到一些输出。否则，通过在您调用的方法中添加 puts 语句来冲洗并重复。

# c - 指针的奇怪之处

> ID：14708372
> 
> 赞同：0
> 
> 时间：2013-02-05T13:12:17.830
> 
> 标签：c, visual-studio, pointers

我对 VS C++ 有一些误解。在 2010 版中，以下代码可以正常工作：我可以获得一个字符串，并且可以释放内存后缀。

```
 #include <stdlib.h>
 #include <string.h>
 #include <stdio.h>

 #define MAX 14

 void GetString(char **str);

 int main(int argc, char *argv[])
 {
    char *str = NULL;
    GetString(&str);
    printf("%s\n", str);

    getchar();

    free(str);

    return 0;
 }

 void GetString(char **str)
 {
    char *s = (char *) malloc(sizeof(char) * MAX);
    strcpy(s, "HELLO, WORLD!");
    *str = s;
 } 
```

但在 VS 2008 中，上面的代码最终会出现内存损坏错误。我想，使用的标准存在细微差别。**我对吗？如果不是，请告诉我，为什么相同的代码在不同版本的 Visual Studio 中不起作用？**

预先感谢您的回答。

ps 我很好奇会发生什么，但还没有找到有关该主题的任何信息。

pps 使用的语言 - C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:14:06.440

您没有包含所需的标头，这意味着您的代码可能会被不同的编译器以不同的方式解释。您应该添加：

```
#include <stdlib.h> 
```

做`malloc()`一个定义明确的函数。

你也在打电话`strcpy()`，所以你需要：

```
#include <string.h> 
```

并执行您需要的 I/O：

```
#include <stdio.h> 
```

此外，在 C 中：

```
char *s = (char *) malloc(sizeof(char) * MAX); 
```

最好写成：

```
char *s = malloc(MAX); 
```

自从

1.  将[返回值转换为`malloc()`](https://stackoverflow.com/a/605858/28169)
2.  `sizeof (char)`总是 1，所以它只会增加混乱。

`malloc()`最后，您当然应该在使用返回的指针之前检查是否成功。

# intuit-partner-platform - 通过 IPP Api 添加的客户未在 quckbook online 上列出

> ID：14708377
> 
> 赞同：0
> 
> 时间：2013-02-05T13:12:36.417
> 
> 标签：intuit-partner-platform, quickbooks-online

我已经在 quickbook 上创建了自定义应用程序我试图从我的本地主机添加客户但没有成功，我正在使用 Keith SDK 输出是

发生错误 -1092：XML 解析器说：6：没有要解析的 XML 内容。

但是我从quickbook获得了成功的令牌，密钥。FLAVOR_ONLINE、FLAVOR_DESKTOP 的 realmID 是否不同？当我使用风味桌面数据时似乎添加了。但在线风味失败请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:36:26.707

这个：

> 发生错误 -1092：XML 解析器说：6：没有要解析的 XML 内容。

通常表明你做错了什么。但是没有人能够准确地告诉你出了什么问题，因为你没有真正提供足够的细节。

发布您的代码。

发布您的 XML 请求（例如 print($Service->lastRequest())）；

发布您的 XML 响应（例如 print($Service->lastResponse())）；

> FLAVOR_ONLINE、FLAVOR_DESKTOP 的 realmID 是否不同？

每个 QuickBooks 公司文件（无论是 QuickBooks for Windows 领域还是 QuickBooks Online 领域）都将具有唯一的领域 ID。领域 ID 是 QuickBooks 公司的唯一标识符。

如果您对 QuickBooks Online 公司和 QuickBooks 桌面公司都使用单个领域 ID，那么这肯定是个问题。

# c# - WPF / C#：将资源放入 Application 并强制转换 Application.Current 以访问它们是否被认为是不好的做法？

> ID：14708384
> 
> 赞同：2
> 
> 时间：2013-02-05T13:13:03.733
> 
> 标签：c#, wpf

我有一个派生自 Application 的类型 MyApplication。整个程序只有 1 个 Application 对象在整个时间内运行。如果一些共享资源（如字符串、整数和一些配置值）放在 MyApplication 中，您认为在不引用应用程序对象的情况下从其他类访问它们的可接受方式是什么？可以通过调用访问 MyApplication 中的公共字符串`((MyApplicationType)Application.Current).SomeString`吗？或者我应该明确添加一种引用 Application 对象的方法？

方法呢？我也可以通过调用来访问应用程序的方法`((MyApplicationType)Application.Current).SomeMethod()`吗？它肯定有效，但我不清楚其含义以及这是否被认为是不好的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:35:23.080

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.application.current.aspx)的评论，我认为这样做是可以的。但我认为在 ResourceDictionary 中定义资源是更好的方法，您可以在 XAML / C# 中使用它，并且更容易进行本地化。您可以参考链接： http: [//msdn.microsoft.com/en-us/library/ms750613.aspx](http://msdn.microsoft.com/en-us/library/ms750613.aspx) [http://msdn.microsoft.com/en-us/library/bb613547.aspx](http://msdn.microsoft.com/en-us/library/bb613547.aspx)

评论

Application 是每个 AppDomain 的单例类型，它实现静态 Current 属性以提供对当前 AppDomain 的 Application 实例的共享访问。这种设计保证了由应用程序管理的状态，包括共享资源和状态，可从单个共享位置获得。此属性是线程安全的，可从任何线程获得。

对于方法，我认为这取决于您的方法的作用。如果您的方法只返回临时文件路径，为什么不将其设为静态？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:44:39.980

配置值应该来自读取 app.config 文件。这是一个关于此的 SO Q/A： [如何在 WPF 应用程序中使用 App.config 文件？](https://stackoverflow.com/questions/806174/how-to-use-a-app-config-file-in-wpf-applications)

对于不更改或不可配置的值，请​​使用具有常量成员的静态类以使其可根据需要访问。

```
public static class UsefulConstants
{
  public const int FeetInMile = 5280;

  public const int DaysInWeek = 7;

  public const string SampleString = "This is a sample";
} 
```

使用静态类很简单。

```
int f = UsefulConstants.FeetInMile; 
```

相关的整数值可以指定为枚举。

```
public enum MonthValue
{
    January = 1,
    February = 2,
    March = 3,
    //Omitted for brevity...
    December = 12
} 
```

使用枚举的另一个好处是可以让您将方法参数限制为相关值。

```
public SomeFunction(MonthValue month)
{
   //Do something here with the month passed in
} 
```

# php - 教义：额外的关系（多对多）

> ID：14708385
> 
> 赞同：1
> 
> 时间：2013-02-05T13:13:09.473
> 
> 标签：php, doctrine-orm, many-to-many

这是我的第一个问题，所以我希望我能尽其所能。

我有 2 个具有多对多关系的学说实体，效果很好，但我还想在多对多表上添加额外的检查。问题是在 DQL 中我无法找到正确的列。

我想到了 2 种可能性：抽象父类或本机查询。我将粘贴在下面有效的本机查询，但这不是我所希望的，因为我们必须复制和粘贴它。

**所以我想建立关系+类型。所以对于这个例子，我还需要检查 type = 'Gallery'**

gallery_object (Table)
id、标签、已删除
1、赞助商、0

media_relations (表)
id, mediaid, type, typeId
1, 37, gallery, 1

media_files
id, userid, 文件名, 文件路径, 文件大小, mime_type, 日期, 删除
37, 4, 533882_10151332524797037_1940030593_n_20.jpg, /resources/upload/www/, 82724, image/jpeg, 2013-01-25 15:04:46, 0

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult(Helper::getNamespace('Gallery', 'Models/Entities') . "Object", 'o')
    ->addFieldResult('o', 'id', 'id')
    ->addFieldResult('o', 'tag', 'tag')
    ->addFieldResult('o', 'deleted', 'deleted')
    ->addJoinedEntityResult(ltrim(Helper::getNamespace('Media', 'Models/Entities') . "Media", '\\'), 'm', 'o', 'file')
    ->addFieldResult('o', 'file', 'id')
    ->addFieldResult('m', 'mid', 'id')
    ->addFieldResult('m', 'user', 'userid')
    ->addFieldResult('m', 'filename', 'filename')
    ->addFieldResult('m', 'filepath', 'filepath')
    ->addFieldResult('m', 'filesize', 'filesize')
    ->addFieldResult('m', 'mime_type', 'mime_type')
    ->addFieldResult('m', 'date', 'date')
    ->addFieldResult('m', 'mdeleted', 'deleted');

$sql = "SELECT o.id AS oid, m.id as file, o.tag, o.deleted, m.id AS mid, m.userid, m.filename, m.filepath, m.filesize, m.mime_type, m.date, m.deleted as mdeleted
    FROM gallery_object as o
        INNER JOIN media_relations mr ON (mr.typeid = o.id AND mr.type = 'Gallery')
        INNER JOIN media_files m ON (mr.mediaid = m.id)";
$result = $this->_em->createNativeQuery($sql, $rsm)->getResult();

return $result; 
```

实体看起来像

```
/**
 * Media entity
 *
 * @Entity(repositoryClass = "iTet\Application\Modules\Media\Models\Repositories\Media")
 * @Table(name="media_files")
 * @author Stephen Fenne
 */

class Media
{
/**
 * @Id
 * @Column(type="integer")
 * @GeneratedValue
 * @var int
 */
protected $id;

/**
 * @ManyToOne(targetEntity="iTet\Application\Modules\Core\User\Models\Entities\User")
 * @JoinColumn(name="userId", referencedColumnName="id")
 * @var int
 */
protected $user;

/**
 * @Column(length = 100)
 * @var string
 */
protected $filename;

/**
 * @Column
 * @var string
 */
protected $filepath;

/**
 * @Column(type = "integer")
 * @var int
 */
protected $filesize;

/**
 * @Column
 * @var string
 */
protected $mime_type;

/**
 * @Column(type = "datetime", nullable=true)
 * @var \DateTime 
 */
protected $date;

/**
 * @Column(type = "integer")
 * @var int
 */
protected $deleted = false; 
```

--

```
/**
 *
 * @Entity(repositoryClass="iTet\Application\Modules\Gallery\Models\Repositories\Object")
 * @Table(name="gallery_object")
 * @author Ward Peeters <ward@coding-tech.com>
 * @package
 */
class Object
{
/** @Id
 * @Column(type="integer")
 * @GeneratedValue
 * @var int */
protected $id;
/** @ManyToMany(targetEntity="iTet\Application\Modules\Media\Models\Entities\Media")
 * @JoinTable(name="media_relations",
 *   joinColumns={@JoinColumn(name="typeid", referencedColumnName="id")},
 *   inverseJoinColumns={@JoinColumn(name="mediaid", referencedColumnName="id")}
 * )
 * @var Media */
protected $file;
/** @Column
 * @var string */
protected $tag;
/** @Column(type="integer")
 * @var bool */
protected $deleted = false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:44:16.127

据我所知，您的选择如下：

1.  引入一个实体来表示表中的条目`media_relations`，以及与其他表的适当关联。
2.  通过类表继承引入“媒体关系”层次结构（以模拟不同的“类型”）并仅查询“画廊”类型。[教义继承文档。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html)

在这两种情况下，您都将基础表公开给 Doctrine，以便您可以使用 DQL 获取所需的数据。

高温高压

# java - 想要隐藏由 Jackson 映射到 JSON 的对象的某些字段

> ID：14708386
> 
> 赞同：47
> 
> 时间：2013-02-05T13:13:15.417
> 
> 标签：java, json, jackson

我有一个用户类，我想使用 Jackson 映射到 JSON。

```
public class User {
    private String name;
    private int age;
    prviate int securityCode;

    // getters and setters
} 
```

我使用 - 将其映射到 JSON 字符串

```
User user = getUserFromDatabase();

ObjectMapper mapper = new ObjectMapper();   
String json =  mapper.writeValueAsString(user); 
```

我不想映射`securityCode`变量。有什么方法可以配置映射器以使其忽略此字段？

我知道我可以编写自定义数据映射器或使用 Streaming API，但我想知道是否可以通过配置来做到这一点？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-05T13:44:11.470

你有两个选择：

1.  杰克逊致力于领域的二传手。因此，您可以删除要在 JSON 中省略的字段的 getter。（如果您在其他地方不需要吸气剂。）

2.  或者，您可以在该字段的 getter 方法上使用`@JsonIgnore` [Jackson 的注释，](http://wiki.fasterxml.com/JacksonAnnotations)并且您会在结果 JSON 中看到没有这样的键值对。

    ```
    @JsonIgnore
    public int getSecurityCode(){
       return securityCode;
    } 
    ```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-05-24T20:46:58.823

在此处添加此内容是因为其他人将来可能会再次搜索此内容，例如我。[此答案是已接受答案](https://stackoverflow.com/a/14708961/6785908)的扩展

```
You have two options:

1\. Jackson works on setters-getters of fields. So, you can just remove getter of field which you want to omit in JSON. ( If you don't need getter at other place.)

2\. Or, you can use the `@JsonIgnore` [annotation of Jackson][1] on getter method of that field and you see there in no such key-value pair in resulted JSON. 

        @JsonIgnore
        public int getSecurityCode(){
           return securityCode;
        } 
```

实际上，**较新版本的 Jackson 为 JsonProperty 添加了 READ_ONLY 和 WRITE_ONLY 注释参数**。所以你也可以做这样的事情。

```
@JsonProperty(access = Access.WRITE_ONLY)
private String securityCode; 
```

代替

```
@JsonIgnore
public int getSecurityCode(){
  return securityCode;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-12-09T14:59:04.220

您还可以收集注释类的所有属性

```
@JsonIgnoreProperties( { "applications" })
public MyClass ...

String applications; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-05T14:09:35.053

如果您不想在 Pojos 上添加注释，您也可以使用[Genson](http://code.google.com/p/genson/)。

以下是如何在没有任何注释的情况下排除带有它的字段（如果需要，您也可以使用注释，但您可以选择）。

```
Genson genson = new Genson.Builder().exclude("securityCode", User.class).create();
// and then
String json = genson.serialize(user); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-21T15:49:57.913

现场级别：

```
public class User {
    private String name;
    private int age;
    @JsonIgnore
    private int securityCode;

    // getters and setters
} 
```

班级等级：

```
@JsonIgnoreProperties(value = { "securityCode" })
public class User {
    private String name;
    private int age;
    private int securityCode;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-24T17:40:59.933

如果您使用 GSON，则必须将字段/成员声明标记为 @Expose 并使用 GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()

不要忘记使用@Expose 标记您的子类，否则字段将不会显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-21T15:23:50.613

我有一个类似的情况，我需要反序列化一些属性（JSON 到对象）但不序列化（对象到 JSON）

首先，我选择了`@JsonIgnore`- 它确实阻止了不需要的属性的序列化，但也未能对其进行反序列化。尝试`value`属性也无济于事，因为它需要一些条件。

最后，`@JsonProperty`使用`access`属性就像一种魅力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-10T08:13:09.143

我建议你用这个。

```
 @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)
   private int securityCode; 
```

这允许您设置 securityCode 的值（尤其是如果您使用 lombok @Setter）并且还可以防止该字段出现在 GET 请求中。

# java - IndexOutOfBoundsException：长度=1；指数=2

> ID：14708388
> 
> 赞同：-2
> 
> 时间：2013-02-05T13:13:18.990
> 
> 标签：java, android, eclipse

我遇到了一个错误，希望你能帮我解决。

我从方法 getdata() 返回一个字符串，由 ':' 分隔；在模拟器上一切正常，但是在我的设备上运行应用程序时，该方法返回一个空字符串并且我收到一个错误：IndexOutOfBoundsException: length=1; 索引=2。`

代码：

```
 Databaseengine info = new Databaseengine(this);
    info.open();
    String data = info.getdata();
    info.close();
    String[] values = null;

    values = data.split(":");

    tvans1.setText(values[4]);
    tvans2.setText(values[5]);
    tvans3.setText(values[6]);
    tvans4.setText(values[7]); 
```

该方法如下所示：

```
public String getdata() {
    // TODO Auto-generated method stub
    String[] columns = new String [] { KEY_ROWID, KEY_CATEGORY, KEY_QUESTION, KEY_ANSWER, KEY_ALTONE, KEY_ALTTWO, KEY_ALTTHREE, KEY_ALTFOUR };

    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null , null , null, "RANDOM() LIMIT 1");
    String result = "";
    //The cursor will be looking for these columns:
    int iRow = c.getColumnIndex(KEY_ROWID);
    int iCat = c.getColumnIndex(KEY_CATEGORY);
    int iQuiz = c.getColumnIndex(KEY_QUESTION);
    int iAns = c.getColumnIndex(KEY_ANSWER);
    int iAlt01 = c.getColumnIndex(KEY_ALTONE);
    int iAlt02 = c.getColumnIndex(KEY_ALTTWO);
    int iAlt03 = c.getColumnIndex(KEY_ALTTHREE);
    int iAlt04 = c.getColumnIndex(KEY_ALTFOUR);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iRow) + ":"
        + c.getString(iCat) + ":" + c.getString(iQuiz) + ":" 
        + c.getString(iAns) + ":" + c.getString(iAlt01) + ":" 
        + c.getString(iAlt02) + ":" + c.getString(iAlt03) + ":"
        + c.getString(iAlt04) + "\n";

    }
    c.close();
    return result;
} 
```

请帮助我，在我在这里发疯之前:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:18:13.163

您应该考虑拆分后结果数组的长度。

索要索引号。7、长度必须至少为8个元素：

```
if (values.length > 7) { ..do your work.. } else { ..throw exception.. } 
```

您在模拟器/设备上获得的不同行为必须与正在解析的不同数据有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:18:45.053

我不确定，但试试这个

```
 values = data.split("\\:"); 
```

代替

```
 values = data.split(":"); 
```

# c++ - 为什么用'new'创建的数组设置为NULL？

> ID：14708392
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:13:35.557
> 
> 标签：c++, memory, null, allocation

我有这样的东西：一个具有分配一些内存的成员函数的类。为什么在函数退出时，指针是否设置为指向 NULL？

```
class A
{

private:
    int* memoryblock;
public:
    void assignsome(int n);

};

void A::assignsome(int n)
{
    memoryblock = new int[n]; // At this point, debugger suggests memoryblock is not pointing to null.
}
// On exit of this function, memoryblock points to null! 
```

根据要求：这是完整的细分：

```
int FileHandler::PerValueMemoryBlockRead(char* delimarray, unsigned int sizeofarray)
{
// File Opened and mValues_n calculated.
    mValues = new int[mValues_n + 1];
    mValuesAllocated = true;

// Assignment of the contents of mValues is done.

    mValues[next_value_pos] = 0x0; // Last int set to zero. /// next_value_pos is an int which is incremented. (Code Removed because there is no point showing it.)
    return 0;

}

void FileHandler::SerialPrint()
{
    if(mValuesAllocated){
        std::cout << "Address:" << mValues << std::endl;
        std::cout << "Size=" << mValues_n << "B" << std::endl;
        for(ull pr = 0; pr < mValues_n; pr ++){
            std::cout << (int)mValues[pr] << " ";
        }
        std::cout << std::endl;
    }
    else{
        std::cout << "Nothing to print. 'PerValueMemoryBlockRead' has not yet been called." << std::endl;
    }
} 
```

然后在主要内部：

```
 if((!datahandle.PerValueMemoryBlockRead(delimarray, 3))
    && (!converthandle.PerValueMemoryBlockRead(delimarray, 3))
    && dataoutput.is_open()){

        dataoutput.seekp(0, std::ios::beg);

        // Code
        converthandle.SerialPrint(); // SEG FAULT
        datahandle.SerialPrint(); // SEG FAULT
        // End Code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:33:44.660

调用后，您应该会看到 的实例的`A`值`memoryblock`不等于 NULL `assignsome`：

```
class A
{
private:
    int* memoryblock;
public:
    void assignsome(int n);
};

void A::assignsome(int n)
{
    memoryblock = new int[n];
}

int main () {
    A a;
    a.assignsome(5);
    return 0; // breakpoint here - a.memoryblock isn't NULL
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:18:00.010

如果你把断点放在那里，调试器仍然没有运行该行。

继续到下一行查看它的分配情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:18:48.497

在这种情况下，调试器可能会有点误导。实际上指针不是NULL，调试器只是很困惑，不知道`A`你在说什么。我建议在类似情况下有疑问时使用调试打印。

# spring - Grails Spring Security AbstractPreAuthenticatedProcessingFilter 重定向

> ID：14708393
> 
> 赞同：2
> 
> 时间：2013-02-05T13:13:35.917
> 
> 标签：spring, spring-security, grails-2.0, grails-filters

我正在尝试使用 Spring Security Grails 插件进行 PreAuthentication。我阅读了下面给出的预认证文档，但找不到适合我情况的具体内容 [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)

在我的情况下，我们有一个代理，它解析 SAML 请求并在成功验证后给出一个映射。建议使用这个罐子。因此，我扩展了 AbstractPreAuthenticatedProcessingFilter 并尝试这样做

```
@Override 
    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) { 
      userInfo = agent.readToken(request); 
        if (!userInfo){ 
             WebUtils.retrieveGrailsWebRequest().getCurrentResponse().sendRedirect(ssoUrl) 
        } 
        return userInfo 
} 
```

我已将 myFilter 放在 src/groovy 下，并在 BootStrap 中注册了此过滤器

```
def init = { servletContext -> 
        SpringSecurityUtils.clientRegisterFilter( 
                'myFilter', SecurityFilterPosition.PRE_AUTH_FILTER.order) 
} 
```

它被正确加载，但过滤器没有发出重定向。首先，我想检查这是否是正确的方法，如果是，如何让重定向工作。

我在 grails 用户论坛上问过同样的问题

任何帮助是极大的赞赏。

## 更新：

对我有用的最终配置

按照建议编写了实现 AuthenticationUserDetailsS​​ervice 的 MyAuthenticationService。您还必须定义包装您的自定义服务的 preAuthenticatedAuthenticationProvider

```
resources.groovy

securityFilter(MySSOAuthFilters){ bean ->
    authenticationManager = ref('authenticationManager')
    grailsApplication = ref('grailsApplication')
}

customUserDetailsService(MyAuthenticationService)

preAuthenticatedAuthenticationProvider(org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider) {
    preAuthenticatedUserDetailsService = ref('customUserDetailsService')
} 
```

我无法这样做，`<form-login>`因为在 Grails 中，这是使用 grails.plugins.springsecurity.auth.loginFormUrl 配置参数完成的，该参数只接受相对 url。

我最终做的是 grails.plugins.springsecurity.auth.loginFormUrl = '/login/index'

```
In LoginController

def index() {
    if(springSecurityService.isLoggedIn()){
        log.info("User is logged in")
        return redirect(controller: 'mycontroller', action: 'list')
    }
    log.info("user is not logged in...redirect to sso.")
    return redirect(url: ssoUrl)
} 
```

希望这可以帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:12:53.590

我认为有几件事需要改变。

首先，不要在 preauth 过滤器中发送重定向，只需简单地返回 null。preauth 过滤器仅用于返回一个主题，您的 AuthenticationUserDetailsS​​ervice 可以使用该主题通过在 AuthenticationUserDetailsS​​ervice 的实现中实现以下方法来创建 UserDetails 对象。

```
public UserDetails loadUserDetails(AbstractAuthenticationToken token) {
    return createUserFromSubject((Subject) token.getPrincipal());
} 
```

其次，将表单登录页面设置为配置的一部分。如果不存在主题，这将用于重定向到。

```
<form-login login-page="http://url_youwanttoredirect_to_on_auth_req" authentication-failure-url="http://url_youwanttoredirect_to_on_auth_req"/> 
```

# knockout.js - KnockoutJS 不渲染

> ID：14708394
> 
> 赞同：0
> 
> 时间：2013-02-05T13:13:41.480
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在为一个新网站尝试一个 javscript 框架，而我今天开始使用 knockoutjs。现在我被卡住了，因为数据没有被渲染。希望任何人都可以指出我正确的方向。我正在使用knockoutjs 2.2.1 和knockout mapping 2.4.0。

我的视图模型如下所示：

```
var UserModel = function () {
    var self = this;
    self.user = ko.observable();

    // Load user.
    self.load = function() {
        self.loadUser();     
    };

    self.loadUser = function() {
        // Load the main user object
        $.getJSON('/api/v1/users/17368',
            function(data) {
                var loadedUser = {};
                console.dir(data);
                ko.mapping.fromJS(data, {}, loadedUser);
                self.user(loadedUser);
            }
        );
    };

}

$(document).ready(function () {
    var userModel = new UserModel();
    ko.applyBindings(userModel);
    userModel.load();
}) 
```

我可以看到数据是在 ajax 请求中加载的。更新：到目前为止，我尝试了不同的映射但没有成功：

```
ko.mapping.fromJS(data, {}, loadedUser);

ko.mapping.fromJS(data, loadedUser); 
```

在上面的 loadUser 中，输出到控制台的数据如下所示：

```
Array[1]
  0: Object
    id: "17368"
    email: "john@domain.net"
    firstname: "John"
    lastname: "Morris"
    phone1: "000-1234567" 
```

但是，此数据绑定片段中没有呈现任何内容。它因缺少姓氏或名字而窒息：

```
<table>
     <thead>
        <tr>
            <th>lastname</th>
            <th>firstname</th>
        </tr>
    </thead>    
    <tbody data-bind="foreach: user">
        <tr>
            <td><span data-bind="text: lastname"></span></td>
            <td><span data-bind="text: firstname"></span></td>
        </tr>                
    </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:17:13.573

您不应该对用户使用`foreach`绑定，因为用户不是`observable array`. 改用`with`绑定：

```
<tbody data-bind="with: user">
    <tr>
        <td><span data-bind="text: lastname"></span></td>
        <td><span data-bind="text: firstname"></span></td>
    </tr>                
</tbody> 
```

# java - 从字符串变量中提取值

> ID：14708397
> 
> 赞同：-2
> 
> 时间：2013-02-05T13:13:53.873
> 
> 标签：java

```
String str=(37.028994, 35.26719589999993); 
```

我必须在单独的变量中检索这些。任何人都可以帮助获得这些值吗？

例如，输出应为以下类型。

```
a=37.028994
b=35.26719589999993 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:16:03.620

```
 String str="(37.028994, 35.26719589999993)";
    str = str.substring(str.indexOf("(")+1 , str.indexOf(")"));
    String[] s = str.split(",");
    double a = Double.parseDouble(s[0]);
    double b = Double.parseDouble(s[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:17:46.407

我想你的意思是：`String str = "37.028994, 35.26719589999993";`

为此，您可以使用该`str.split(",");`方法，然后`Double.parseDouble()`对拆分字符串数组的每个元素执行 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:18:22.583

首先，你需要在第一个地方传递一个字符串......所以我假设代码应该是：

```
String str="37.028994,35.26719589999993"; 
```

然后你可以`String.split(",")`用来返回一个字符串数组：

```
String[] splits = str.split(","); 
```

现在用数组做你喜欢的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:16:43.803

```
Matcher m = Pattern.compile ("\\d+\\.\\d+").matcher (str);
m.find ();
double a = Double.parseDouble (m.group ());
m.find ();
double b = Double.parseDouble (m.group ()); 
```

# javascript - 从 javascript 访问 json 元素

> ID：14708398
> 
> 赞同：1
> 
> 时间：2013-02-05T13:13:53.713
> 
> 标签：javascript, jquery, internationalization, node-blade

我有这个 JSON，它使用[i18next](http://jamuhl.github.com/i18next/)的 i18n 一个使用刀片作为[模板引擎](https://github.com/bminer/node-blade)的网站：

```
"guide": {
    "sections": {
        "the-basics": {
            "title": "The Basics",
            "contents": [
                {
                    "title": "Introduction",
                    "content": {"p1": "", "p2": "", "p3": ""}
                },
                {
                    "title": "A Chapter in the Zeitgeist Movement",
                    "content": {"p1": "", "p2": "", "p3": ""}
                }
            ]
        },
        "setting-up-a-national-chapter": {
            "title": "Setting up a National Chapter",
            "contents": [
                {
                    "title": "Gathering Volunteers & Social Media",
                    "content": {"p1": "", "p2": "", "p3": ""}
                }
            ]
        }
    }
} 
```

在我的 javascript 中，我试图访问内容列表，具体取决于索引号。

这是我到目前为止所拥有的：

```
 // Load page
  $('a.nav-link').on('click', function( event ) {
      event.preventDefault();
      var $this = $(this);
      var section =  $this.closest('ul').prev('h3').find('span[data-content]').data('content');
      var subSection = $this.attr("data-content");
      // we can now genrate the section content and push this into the tmpl.
      blade.Runtime.loadTemplate("guide_section.blade", function(err, tmpl) {
          tmpl({
              'sections': {
                  'section': section,
                  'subsection': subSection
              }
          }, function(err, html) {
              if(err) throw err;
                  console.log(html);
                  $('.mainarticle > .content').empty().html(html);
          });
      });
  }); 
```

在我的模板中：

```
#guide_section
    - var i = sections.section
    - var c = sections.subsection
    h5(data-i18n="guide.sections."+i+".title")=i
        h4(data-i18n="guide.sections."+i+".contents.title")=c 
```

上面的代码和jade的模板很相似。

工作正常，因为`H5`它返回标题，但我不确定如何返回内容列表的第 n 个元素。

例如：

```
h5(data-i18n="guide.sections."+i+".title")=i 
```

呈现为

```
<h5 data-i18n="guide.sections.the-basics.title">the-basics</h5 
```

这是正确的，因为然后 i18next 查找`translation.json`并根据该`data-i18n`值设置正确的翻译，但是

```
data-i18n="guide.sections."+i+".contents.title" 
```

呈现为

```
<h4 data-i18n="guide.sections.the-basics.contents[0]">0</h4 
```

但`contents`在这种情况下有两个条目，例如：

```
[{
    "title": "Introduction",
    "content": {"p1": "", "p2": "", "p3": ""}
},{
    "title": "A Chapter in the Zeitgeist Movement",
    "content": {"p1": "", "p2": "", "p3": ""}
}] 
```

那么如何更改我的脚本，以便通过提供索引，我可以访问`contents`列表的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:19:30.650

这有效，取自[http://i18next.com/pages/doc_features.html#objecttree](http://i18next.com/pages/doc_features.html#objecttree)，所以在我的情况下，“内容”是一个数组

```
ul.sub-section
    - var content = t("guide.sections."+i+".contents", { returnObjectTrees: true });
    - for(var c in content)
        - var section_title = t(content[c].title)
        li
            a.nav-link(href="#" data-bind=""+c data-content=""+section_title data-i18n="guide.sections."+i+".contents.title")=t(content[c].title) 
```

# css - 如何确保悬停时覆盖颜色？

> ID：14708402
> 
> 赞同：1
> 
> 时间：2013-02-05T13:14:04.960
> 
> 标签：css, hover, css-selectors, css-specificity

**HTML：**

```
<div class="hovertest" style="background-color: #fff">
    Test 1
</div>
<div class="hovertest" style="background-color: #eee">
    Test 2
</div> 
```

**CSS：**

```
.hovertest:hover {
     background-color: #000;
} 
```

由于内联颜色样式的更高特异性，悬停颜色不会被应用。如果我给 div 一个 ID 并在 ID 样式中应用它们各自的颜色，也会出现同样的问题。我想在两个 div（或更多）之间共享悬停颜色定义，同时在非悬停时显示它们的独特颜色。如果没有大量多余的 css，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:15:36.647

`!important`通过在值之后设置，您可以胜过 CSS 中其他声明的任何特殊性。只有使用另一个声明才能覆盖它`!important`。

```
.hovertest:hover {
    background-color: black !important;
}

#hovertest:hover {
    background-color: red; /* Even using an ID won't override `!important` */
} 
```

**但小心点！**在你的 CSS 中使用`!important`可能会导致一些非常棘手的问题。以尽可能避免使用 CSS 的方式编写 CSS 通常更有用。

**不要使用`!important` *反应性*，使用它*预防性*。**

# ember.js - ember - 等待 ember 数据模型加载的 didLoad 事件

> ID：14708405
> 
> 赞同：3
> 
> 时间：2013-02-05T13:14:26.270
> 
> 标签：ember.js, ember-data

嗨，我有以下路线：

```
MB3.PlaylistRoute = Ember.Route.extend({
  model: function(params) {
    return MB3.Playlist.find(params.playlist_id);
  }
}); 
```

播放列表具有带有曲目的 hasMany 属性。在播放列表视图中，我想对播放列表的第一首曲目的属性做一些逻辑。

所以我添加了这段代码：

```
MB3.PlaylistView = Ember.View.extend({
  didInsertElement: function() {
    console.log(this.get("controller.tracks").objectAt(0).get("title"));
  }
}); 
```

问题是标题未定义（我认为是因为它尚未加载。我尝试的第二件事是等待 didLoad 事件：

```
MB3.PlaylistView = Ember.View.extend({
      didInsertElement: function() {
        var self=this;
        this.get("controller.tracks").on("didLoad", function() {
          console.log(self.get("controller.tracks").objectAt(0).get("title"));
        });
      }
    }); 
```

但这也记录为空。我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:58:18.557

就像 Adrien 在评论中所说的那样，您似乎遇到了[问题 587](https://github.com/emberjs/data/issues/587)。也就是说，在这种情况下，我认为您实际上不需要“didLoad”回调。相反，请尝试使用计算属性来获取 video_id 或曲目标题。例如：

```
MB3.PlaylistView = Ember.View.extend({
  firstTrackTitle: function() {
    return this.get('controller.tracks.firstObject.title');
  }.property('controller.tracks.firstObject.title')      
}); 
```

然后在您的模板中，如果定义了此属性，则嵌入播放器：

```
{{#if view.firstTrackTitle}}
    embed code here
{{/if}} 
```

FWIW我会把这个逻辑放在控制器而不是视图中，但同样的想法。

# actionscript-3 - 识别触发事件的按钮（as3中动态添加的按钮）？

> ID：14708408
> 
> 赞同：1
> 
> 时间：2013-02-05T13:14:34.777
> 
> 标签：actionscript-3

在我的程序中，我需要动态创建按钮及其侦听器。有没有办法确定哪个按钮触发了事件。每个按钮都包含一个唯一的文本，但我尝试使用“this”来访问文本但没有成功。请帮助提供的代码片段：

```
for(i=0;i<3;i++)
{
   subjectCode="MTOO"+(i+1);
   var subjectBtn:MovieClip=new subjectButton();
   subjectBtn.y=y+50+pos;
   subjectBtn.x=60;
   subjectBtn.subjCode.text=subjectCode;
   subjectBtn.addEventListener(MouseEvent.CLICK, displaySubjectAttendance);
   _subList.addChild(subjectBtn);
   pos+=140;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:43:46.683

```
// This is how I will access the text in the event handler:

function displaySubjectAttendance( event:MouseEvent ):void {
    subjectButton( event.currentTarget ).subjCode.text
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:43:57.227

您可以将事件侦听器中的按钮作为 evt.currentTarget 访问。

```
function displaySubjectAttendance(evt:MouseEvent):void {
    var button:MovieClip = evt.currentTarget as MovieClip;
} 
```

# android - android框架源码中启用快速滚动的android Listview代码

> ID：14708410
> 
> 赞同：5
> 
> 时间：2013-02-05T13:14:42.697
> 
> 标签：android, android-listview

在android`setFastScrollEnabled(true);`中用于`ListView`快速滚动。

当 中的项目较少时，此快速滚动不起作用`ListView`。我在某处读到，只有当 listview 总高度是 listview 可见高度的 4 倍或更多时，android 中的快速滚动才有效。我花了几个小时试图在框架源代码中找到它，但我找不到它。

有人可以指出我在 android 框架源代码中放置此条件以在 ListView 中的项目较少时禁用快速滚动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T14:09:28.027

是的，当然，这是链接：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/FastScroller.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/FastScroller.java)

这是第 224-227 行之间的条件。为了设置显示快速滚动需要多少页，有一个常数：

```
private static int MIN_PAGES = 4; 
```

关于禁用它......这是一个私人领域，所以没有简单的方法来做到这一点。您可以尝试使用反射或基于原始创建自定义 FastScroller。但我认为最简单的方法是在 Android 代码中检查这种情况：

```
//pseudocode
int numberOfPages = listView.itemsCount / listView.visibleItemsCount;
if(numberOfPages > yourValue)
    listView.setFastScrollEnabled(true);
else
    listView.setFastScrollEnabled(false); 
```

但它可能只有`yourValue`在大于 4 时才有效。如果你想用更少的值来做，那么你需要使用反射或创建自定义类。

编辑：

对于最新版本，有链接： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/FastScroller.java/](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/FastScroller.java/)

线路是 444-447 :)

对于反思，我会尝试这样的事情：

```
try {
Field scrollerField = AbsListView.class.getDeclaredField("mFastScroller");    //java.lang.reflect.Field
scrollerField.setAccessible(true);
FastScroller instance = scrollerField.get(listViewInstance);

Field minPagesField = instance.getClass().getDeclaredField("MIN_PAGES");
minPagesField.setAccessible(true);
minPagesField.set(instance, yourValue);
} catch (Exception e) {
Log.d("Error", "Could not get fast scroller");
} 
```

它没有经过测试，所以我不知道它是否真的有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T06:27:20.490

您可以尝试设置属性

```
android:fastScrollAlwaysVisible="true" 
```

在你的列表视图 xml

# android - Phonegap 文件传输超时

> ID：14708422
> 
> 赞同：2
> 
> 时间：2013-02-05T13:15:22.053
> 
> 标签：android, cordova

有没有办法在 phonegap 中定义下载文件传输的超时时间。在 android 设备上，如果我尝试下载无响应的 URL，我会在 8 分钟后得到以下信息：

```
02-05 11:50:38.234 W/FileTransfer(12658): Error getting HTTP status code from connection.
02-05 11:50:38.234 W/FileTransfer(12658): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:552)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.io.InputStream.read(InputStream.java:163)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.Streams.readAsciiLine(Streams.java:201)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
02-05 11:50:38.234 W/FileTransfer(12658):   at org.apache.cordova.FileTransfer.download(FileTransfer.java:495)
02-05 11:50:38.234 W/FileTransfer(12658):   at org.apache.cordova.FileTransfer.execute(FileTransfer.java:88)
02-05 11:50:38.234 W/FileTransfer(12658):   at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231)
02-05 11:50:38.234 W/FileTransfer(12658):   at java.lang.Thread.run(Thread.java:856)
02-05 11:50:38.234 W/FileTransfer(12658): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.Posix.recvfromBytes(Native Method)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.Posix.recvfrom(Posix.java:131)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
02-05 11:50:38.234 W/FileTransfer(12658):   at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
02-05 11:50:38.234 W/FileTransfer(12658):   ... 15 more
02-05 11:50:38.234 E/FileTransfer(12658): {"target":"\/storage\/sdcard0\/Android\/data\/uk.ac.edina.mobile\/cache\/edina\/cache\/open_3_21_37.jpg","source":"http:\/\/fieldtripgb.edina.ac.uk\/mapcache\/tms1.0.0\/fieldtripgb@BNG\/3\/21\/37.jpg?version=1.1.1&id=22362b279a637a91&app=free&cache=true","code":3}
02-05 11:50:38.234 E/FileTransfer(12658): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:552)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.io.InputStream.read(InputStream.java:163)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.Streams.readAsciiLine(Streams.java:201)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
02-05 11:50:38.234 E/FileTransfer(12658):   at org.apache.cordova.FileTransfer.download(FileTransfer.java:495)
02-05 11:50:38.234 E/FileTransfer(12658):   at org.apache.cordova.FileTransfer.execute(FileTransfer.java:88)
02-05 11:50:38.234 E/FileTransfer(12658):   at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231)
02-05 11:50:38.234 E/FileTransfer(12658):   at java.lang.Thread.run(Thread.java:856)
02-05 11:50:38.234 E/FileTransfer(12658): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.Posix.recvfromBytes(Native Method)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.Posix.recvfrom(Posix.java:131)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
02-05 11:50:38.234 E/FileTransfer(12658):   at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
02-05 11:50:38.234 E/FileTransfer(12658):   ... 15 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-01-21T00:16:33.293

似乎他们决定不将其作为选项来实现，因此将唯一的选择保留为使用`abort()`and `setTimeout()`。

由于在下载/上传上设置任意时间限制似乎很幼稚，我将重置超时`fileTransfer.onProgress()`

像这样的东西：

```
var downloadTimer = setTimeout(function () {
    downloadTimerExceeded(fileTransfer);
}, 30000);

fileTransfer.onprogress = function (progressEvent) {
        if (downloadTimer) {
            clearTimeout(downloadTimer); //cancel the previous timer.
            downloadTimer = null;
        }
        downloadTimer = setTimeout(function () {
            downloadTimerExceeded(fileTransfer);
        }, 30000);
};

function downloadTimerExceeded(fileTransfer) {
    fileTransfer.abort();
} 
```

如果他们在 FileTransfer 本身上有一个超时选项会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:42:30.590

不，但这是一个功能请求[https://issues.apache.org/jira/browse/CB-2394](https://issues.apache.org/jira/browse/CB-2394)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T04:49:59.753

您是否尝试过使用 chunkedMode 选项？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T14:50:25.477

正如在功能请求评论中所说，这可以通过使用 setTimeout() 操作 abord() 来完成

# javascript - 转义字符串拆分和连接

> ID：14708423
> 
> 赞同：1
> 
> 时间：2013-02-05T13:15:22.290
> 
> 标签：javascript, string, split, escaping

类似于[String split & join](https://stackoverflow.com/questions/9130146/string-split-join)，但对于 Javascript：

我有一个字符串数组。我需要能够将这些项目加入一个字符串，然后再次拆分该字符串以获得原始字符串集合。但是，每个字符串也可能包含连接字符串，所以我必须进行一些转义。有没有关于如何实现这一目标的食谱？

这是一个例子：

```
serialized = ["Hello", ",", "World"].join(",") # Nice would be "Hello,\,,World" 
```

但

```
serialized.split(",") 
```

返回`["Hello", "", "", "World"]`而不是`["Hello", ",", "World"]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:20:17.213

您可以使用`JSON.stringify()`and`JSON.parse()`代替。

```
JSON.stringify(["Hello", ",", "World"]) // -> '["Hello",",","World"]'
JSON.parse('["Hello",",","World"]') // -> ["Hello", ",", "World"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:53:25.367

手动操作我想出了这个，以防有人再次偶然发现这个；）

```
splitAndUnescape = function(character, str, opt_escapeChar) {
  var result = [];
  var escapeChar = opt_escapeChar || '\\';
  var tmp = '';
  for (var index = 0; index < str.length; index++) {
    var ch = str.charAt(index);
    if (ch == escapeChar) {
      ch = str.charAt(++index);
    } else if (ch == character) {
      result.push(tmp);
      tmp = '';
      continue;
    }
    tmp += ch;
  }
  if (tmp || result.length) {
    result.push(tmp);
  }
  return result;
};

escapeAndJoin = function(character, array, opt_escapeChar) {
  var escapeChar = opt_escapeChar || '\\';
  var reEscape = new RegExp('(\\' + character + '|\\' + escapeChar + ')', 'g');
  var out = [];
  for (var index = 0; index < array.length; index++) {
    out.push(array[index].replace(reEscape, escapeChar + '$1'));
  }
  return out.join(character);
}; 
```

概念验证：

```
serialized = escapeAndJoin(",", ["Hello", ",", "World"]); # -> "Hello,\,,World"
splitAndUnescape(",", serialized) # -> ["Hello", ",", "World"] 
```

# jqplot - 如何在 JQPlot 条形图中获取 Clicked Bar 的 ID

> ID：14708433
> 
> 赞同：0
> 
> 时间：2013-02-05T13:15:55.833
> 
> 标签：jqplot

有什么方法可以将 ID 存储在条形图中，然后在 JQplot 条形图中获取单击条的 ID？此 ID 不会显示在任何轴上。这是我正在使用的代码，但它只显示点索引或其 x 轴值，如何获取 ID？

```
 $('#'+chartName).bind('jqplotDataClick',
                function(ev, seriesIndex, pointIndex, data) {
                    alert('series: ' + seriesIndex + ', point: ' + pointIndex + ', data: ' + data);
                }
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:35:36.853

不是 x 轴值，因此`pointIndex`可以用作单击栏的 Id。它是`data`包含实际 x/y 值的对象。

如果您有多个系列，则可以通过同时考虑`seriesIndex`.

# c# - WPToolkit ListPicker 与 SQL Server CE 3.5 DataContext 类 Windows Phone 7.5 的绑定问题

> ID：14708434
> 
> 赞同：0
> 
> 时间：2013-02-05T13:15:56.057
> 
> 标签：c#, windows-phone-7, datacontext, listpicker, sql-server-ce-3.5

好吧，这是我在 StackOverflow 上的第一个问题！我从很久以前就一直在使用这个网站，但我从来不用问什么，因为我总是在别人的问题中找到答案，哈哈显然现在情况不再如此了，哈哈。

无论如何，我正在尝试将自定义类的列表（被装饰为与`DataContext`管理本地 SQL Server CE 3.5 数据库 - 本机包含在 Windows Phone 7.5 中）一起使用的自定义类列表绑定到`ListPicker`来自 WPToolkit 的控件，奇怪的是我可以'看不到我绑定的元素的值`ListPicker`（我确保列表已填充）。

这是课程：

```
[Table(Name = "Rubriques")]
class Rubrique
{
    [Column(IsPrimaryKey = true, DbType = "TINYINT", CanBeNull = false)]
    public Byte Id { get; set; }

    [Column(DbType = "NVARCHAR(40)")]
    public String Nom { get; set; }
} 
```

这是`DataContext`：

```
class IntermediaireDataContext : DataContext
{
    public IntermediaireDataContext() : base("Data Source='isostore:/IntermediaireBDD.sdf';")
    {
    }

    public Table<Rubrique> Rubriques
    {
        get { return this.GetTable<Rubrique>(); }
    }
} 
```

这是我用来将列表绑定到的代码`ListPicker`：

```
using (IntermediaireDataContext context = new IntermediaireDataContext())
{
    rubs = (from x in context.Rubriques select x).ToList<Rubrique>(); //rubs already exists
    RubListPicker.ItemsSource = rubs;
} 
```

这是 XAML：

```
<toolkit:ListPicker x:Name="RubListPicker" SelectionMode="Single" FullModeHeader="Rubriques">
    <toolkit:ListPicker.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Nom}" FontSize="16"/>
            </StackPanel>
        </DataTemplate>
    </toolkit:ListPicker.ItemTemplate>
    <toolkit:ListPicker.FullModeItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Nom}" FontSize="26" FontWeight="Bold"/>
            </StackPanel>
        </DataTemplate>
    </toolkit:ListPicker.FullModeItemTemplate>
</toolkit:ListPicker> 
```

rubs列表`Rubrique`被填充并设置为`ItemsSource`，`RubListPicker`如果我删除`Text="{Binding Nom}"`中的`TextBlock`，`DataTemplate`我可以`MyNamespace.Rubrique`在 中的每个元素中看到类的名称`ListPicker`。

我不知道数据绑定有什么问题......任何帮助将不胜感激:)

我在带有 Windows Phone 8 SDK 的 Visual Studio 2012 Ultimate 中使用来自 NuGet 的最新版本的 WPToolkit 4.2012.10.30。

感谢您抽时间阅读！

问候，

阿里

* * *

## 编辑

我找到了解决方案，它让我大笑起来，哈哈。

我不得不改变我班级Rubrique的安全级别；当我将其设置为公开时，一切正常。

实际上， the`ListPicker`可以访问，`List<Rubrique>`但无法访问 each 的值`Rubrique`。

将来要记住的一个好消息：使用外部库时，请始终检查类/属性/方法的安全级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:37:26.397

这是我在 StackOverflow 中的第一个问题，我自己来回答：Like A Boss :D

所以诀窍是让我的课程公开，以便可以通过 WPToolkit 的 ListPicker 控件访问它；）

干杯!

# asp.net - 渴望加载和分离 EF 上下文

> ID：14708443
> 
> 赞同：0
> 
> 时间：2013-02-05T13:16:23.150
> 
> 标签：asp.net, entity-framework, caching, enterprise-library

我想使用 EF 检索实体。

然后我将它们保存在 enterprise_library_cache

我**有时会**收到一个错误“ObjectContext 已被处理”

我`using`的使用水平很高——每个请求一个，但我猜这些实体是在他们的 contextObject 被处置后使用的。

我认为这将解决我的问题：

我如何强制从数据库中加载（包括所有外来键，即嵌套实体）+

将其从任何上下文中分离出来？

# java - Tomcat中线程的文件问题

> ID：14708447
> 
> 赞同：1
> 
> 时间：2013-02-05T13:16:39.720
> 
> 标签：java, tomcat, servlets, spring-mvc

我有一个 tomcat 服务器，我有一个控制器，它写入一个文件，数据来自请求。所以我怀疑服务器中的多个线程是否可以同时写入同一个文件并导致问题？

我的要求是所有请求都将数据附加到同一个文件中。我没有使用任何线程。

我的代码如下：

```
File file = new File(fileName); 
try { 
    if(!file.exists()) { 
        file.createNewFile();    
    }
    InputStream inputStream = request.getInputStream();
    FileWriter fileWriter = new FileWriter(fileName,true);
    BufferedWriter bufferWriter = new BufferedWriter(fileWriter);
    bufferWriter.write(IOUtils.toString(inputStream));
    bufferWriter.flush(); 
    bufferWriter.close(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:19:33.277

此类问题有标准解决方案。

您必须创建`singleton`类，它将在所有线程之间共享。

这`singleton`将有一些`BlockingQueue`（例如`LinkedBlockingQueue`），其中所有线程都会将它们的消息放入单个文件中。

这`singleton`本身也将是它的方法`Thread`内部`run()`，它会不断地`take`从所需的文件中取值`queue`并按顺序将其写入所需的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:47:23.400

> 我的要求是所有请求都将数据附加到同一个文件

最好使用过滤器`javax.servlet.Filter`（您不必手动创建单例，您可以在需要或不需要其功能时打开或关闭过滤器。

但是，您仍然需要同步对文件的并发访问。正如 Andremoniy 指出的那样，您可以使用自己的线程来执行此操作，这样您的过滤器就不会阻塞请求/响应。

**编辑**

关于用于写入文件的共享对象的一件事：最好将此对象的实例存储在`javax.servlet.ServletContext`而不是创建单例对象中。如果您需要使用 servlet 让 Java Web 应用程序中的所有其他组件都可以访问一个对象，那么这是标准方法。

# c++ - 如何连接几张地图？

> ID：14708450
> 
> 赞同：2
> 
> 时间：2013-02-05T13:16:45.300
> 
> 标签：c++, algorithm, map, stl, merge

我的地图很少`std::map< char, int >`

```
First map:
a - 1
b - 2
c - 3

Second map:
a - 5
c - 6
e - 7 
```

我想将它们连接成`std::map< char, std::vector< int > >`

```
a - 1 5
b - 2 0
c - 3 6
e - 0 7 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:53:01.513

首先想到的是[`std::merge`](http://en.cppreference.com/w/cpp/algorithm/merge)算法。不幸的是，源和目标范围的值类型不兼容，所以我们需要一些可以为我们转换它的东西。[Boost 通过Function Output Iterator](http://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/function_output_iterator.html)为此提供了一个很好的工具。分配给此输出迭代器的任何内容都作为参数传递给它包装的一元函数。与 lambdas 一起，这非常简单：

```
#include <boost/function_output_iterator.hpp>

std::map<char, int> m1 { {'a',1}, {'b',2}, {'c',3} };
std::map<char, int> m2 { {'a',5}, {'c',6}, {'e',7} };

std::map<char, std::vector<int>> m3;

typedef std::map<char, int>::value_type source_type;
auto push_value =
    [&m3](const source_type& p) { m3[p.first].push_back(p.second); };

std::merge(m1.begin(), m1.end(), m2.begin(), m2.end(),
    boost::make_function_output_iterator(push_value)); 
```

这还不是我们想要的。`m3`看起来像这样：

```
a - 1 5
b - 2
c - 3 6
e - 7 
```

对于在`m2`但不在的键，`m1`我们需要在向量的前面挤压一个零。我们可以[`set_difference`](http://en.cppreference.com/w/cpp/algorithm/set_difference)在合并之前做到这一点。我们需要使用只比较地图键的自定义比较器：

```
auto push_zero =
    [&m3](const source_type& p) { m3[p.first].push_back(0); };
auto cmp =
    [](const source_type& p1, const source_type& p2) { return p1.first < p2.first; };

std::set_difference(m2.begin(), m2.end(), m1.begin(), m1.end(),
    boost::make_function_output_iterator(push_zero), cmp); 
```

`m3`就是现在：

```
a - 1 5
b - 2
c - 3 6
e - 0 7 
```

在第三步中，我们为 in`m1`但不在 in的键添加一个零`m2`：

```
std::set_difference(m1.begin(), m1.end(), m2.begin(), m2.end(),
    boost::make_function_output_iterator(push_zero), cmp); 
```

现在我们有了我们想要的：

```
a - 1 5
b - 2 0
c - 3 6
e - 0 7 
```

请参阅[LiveWorkspace](http://liveworkspace.org/code/OhYSP%241)上的完整示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:24:26.683

天真的方法是首先在目标映射中添加所有键。然后为目标映射中的每个键添加第一个映射中的相应值，如果未找到该键，则添加零。然后对第二张地图做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:35:19.437

像这样的辅助函数怎么样：

```
void one_map ( const std::map <char, int> &source, std::map<char, std::vector<int> > &dest, size_t idx )
    for ( auto const &p : source )
        dest [ p.first ] [ idx ] += 1;
    }

void fill_map ( const std::map <char, int> &source, std::map<char, std::vector<int> &dest , const std::vector<int> &zeroes ) {
    for ( auto const &p : source )
        if ( !dest.find ( p.first ))
            dest [ p.first ] = zeroes;
    } 
```

然后你可以写：

```
std::vector<int> z (3, 0);  // three zeros
fill_map ( a, dest, z );
fill_map ( b, dest, z );
fill_map ( c, dest, z );

one_map  ( a, dest, 0 );
one_map  ( b, dest, 1 );
one_map  ( c, dest, 2 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:55:46.443

对于它的价值，这是一个简单的无提升解决方案，它可能会运行得更快一些（不是在大 O 中，而是在总迭代次数中）：

```
 std::map<char,int>::iterator i,j;
   i = m1.begin(); j = m2.begin();

   while (i!=m1.end() || j!=m2.end()) {
      if (j==m2.end() || (i!=m1.end()&&(i->first < j->first))) {
         m3[i->first].push_back(i->second);
         m3[i->first].push_back(0);
         i++;
      } else if (i==m1.end() || (i->first > j->first)) {
         m3[j->first].push_back(0);
         m3[j->first].push_back(j->second);
         j++;         
      } else if (i->first == j->first) {
         m3[i->first].push_back(i->second);
         m3[j->first].push_back(j->second);
         i++;j++;
      } 
   } 
```

可能可以简化以减少代码行数，因为 push_backs 每次执行 3 次（3 种不同情况）......

这里的运行时间是 (# in m1)+(# in m2)-(# in both)。很可能，这大致等于单个集合差异（或单个合并）。

[现场工作空间](http://liveworkspace.org/code/9Rc1z%2412)

# python - emacs-jedi 找不到 numpy 补全

> ID：14708453
> 
> 赞同：9
> 
> 时间：2013-02-05T13:16:57.833
> 
> 标签：python, emacs, numpy, python-jedi

我安装了 emacs-jedi 以在 emacs 中为 python 完成一些代码。总的来说，我必须说我印象深刻！它开箱即用，可以快速找到内置库的补全。但是，我将 python 用于科学目的，并依赖 numpy 和 scipy 来完成我的工作。出于某种原因，我没有完成这些模块。

例子：

```
import numpy 

testVector = numpy.array([1,2,3]) 
```

现在输入 testVector。等待，什么都没有出现

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:37:45.607

我想知道为什么它不起作用。它看起来像`sys.path`问题，但它应该在没有任何配置的情况下工作。但这里有一些蛮力修复的想法。

(1) 运行以下脚本获取 numpy 的加载路径。

```
import os
import numpy
print(os.path.dirname(os.path.dirname(numpy.__file__))) 
```

（2）`jedi:server-args`这样设置强制添加路径。

```
(setq jedi:server-args
      '("--sys-path" "THE/PRINTED/PATH/FOR/NUMPY"
        "--sys-path" "THE/PRINTED/PATH/FOR/SCIPY")) 
```

另见：[http ://tkf.github.com/emacs-jedi/#jedi:server-args](http://tkf.github.com/emacs-jedi/#jedi:server-args)

* * *

**编辑 1**

阅读您对@syohex 答案的评论，您似乎混淆了一些安装方法。jeid.el 使用您拥有 jedi.el 的目录中的 virtualenv“env/”（如果存在）。如果你有 virtualenv，el-get 会自动创建“env/”。所以，如果你喜欢系统安装，你需要告诉 Jedi.el 忽略 "evn/" 通过这样做：

```
(require 'jedi)
(setq jedi:server-command (list "python" jedi:server-script)) 
```

另见：[http ://tkf.github.com/emacs-jedi/#jedi:server-command](http://tkf.github.com/emacs-jedi/#jedi:server-command)

* * *

**编辑 2**

我不知道为什么从你的描述中会发生这种情况。这里有几种方法可以缩小问题的范围。

1.  `make tryout`在 jedi.el 安装的目录下运行（如）`~/.emacs.d/el-get/jedi/`。

    这将打开一个干净的（即，它不会读取您的设置）Emacs 进程，并为 jedi.el 设置最少的设置。看看能不能完成numpy和scipy。

2.  你能*在 Emacs 中*导入 numpy 和 scipy吗？你可以在 Emacs 和 shell 中有不同的环境变量。运行`M-! python -c 'import numpy' RET`。如果这没有给您错误，那很好。

3.  您可以使用 numpy 和 scipy 导入`env/bin/python`吗？最好的方法是从 Emacs 检查它。

    所以首先进入jedi.el 的安装目录（例如，`C-x C-f ~/.emacs.d/el-get/jedi/ RET`）。

    然后运行`M-! env/bin/python -c 'import numpy' RET`。如果这没有给您错误，那么应该可以导入 numpy 和 scipy。

我希望其中至少有一个给你一个错误，否则我需要考虑另一种可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:38:34.670

我可以完成这种情况。喜欢以下

![在此处输入图像描述](../Images/39a8e3c561e678b2a97e5919ffcb13a0.png)

您可以使用旧的需求模块（jedi、epc、argparse）。您应该更新它们并重试。

# php - 获取从 php activerecord 中的模型使用的数据库名称或 url？

> ID：14708455
> 
> 赞同：0
> 
> 时间：2013-02-05T13:17:02.663
> 
> 标签：php, database, phpactiverecord

如何在[php activerecord](http://www.phpactiverecord.org)中获取模型中使用的数据库名称或 url ？

我有

```
$connections = array(
   'conn1' => 'mysql://user:pass1@localhost/db1;charset=utf8',
   'conn2' => 'mysql://user:pass2@localhost/db2;charset=utf8',
   'conn3' => 'mysql://user:pass3@localhost/db3;charset=utf8'
 ); 
```

我需要知道什么数据库正在使用我的模型，所以我想从某个对象方法中获取字符串`conn1`或`mysql://user:pass1@localhost/db1;charset=utf8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:50:55.457

我找到了方法：

`ActiveRecord\Config::instance()->get_default_connection_string()`

# java - 在 VideoView 中播放来自资产的视频，而不是在平板电脑中以全屏模式播放

> ID：14708457
> 
> 赞同：1
> 
> 时间：2013-02-05T13:17:07.380
> 
> 标签：java, android, video, android-videoview

我正在我的应用程序中播放资产中的视频。我正在为平板电脑开发应用程序。我有 mp4 视频。我在 xml 中的视频视图如下。

我的问题是我要在左右两侧对齐视频和间隙。视频需要全屏播放。

```
 <VideoView
    android:id="@+id/videoview1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" /> 
```

这里是我用来播放视频的代码。

```
videoPaths.add("android.resource://" + getPackageName() + "/"
            + R.raw.intro);
    videoPaths.add("android.resource://" + getPackageName() + "/"
            + R.raw.show_buttons);
    videoPaths.add("android.resource://" + getPackageName() + "/"
            + R.raw.loop);

    videoView = (VideoView) findViewById(R.id.videoview1);
    playVideos();

}

private Runnable playerRunnable = new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
        int videoDuration = videoView.getCurrentPosition();
        Log.e(this.getClass().getSimpleName(),
                "videoDuration == " + videoDuration + " total time == "
                        + videoView.getDuration());
        if (isFirstVideo == 0) {

            if (videoDuration > 8500) {
                Log.e(this.getClass().getSimpleName(),
                        "video duration is above 8500");

                isFirstVideo = 1;

                videoView.setVideoURI(Uri.parse(videoPaths
                        .get(isFirstVideo)));

            }

        }

    }
};

private void playVideos() {
    isFirstVideo = 0;
    videoView.setVideoURI(Uri.parse(videoPaths.get(isFirstVideo)));
    videoView.start();
    // handler.post(playerRunnable);
    handler.postDelayed(playerRunnable, 500);
} 
```

# php - 一个文件的多个require_once

> ID：14708469
> 
> 赞同：0
> 
> 时间：2013-02-05T13:17:35.833
> 
> 标签：php

我正在研究由其他开发人员开发的脚本。有一个发送电子邮件的警报系统，每个模块都有自己的警报文件和警报文件`require_once`PHPMailer

```
<?php
    // assume this is 1.php
    //.......... some code above //
    $mail_title = 'Message Title';
    $mail_body = 'Message body with complete details what has been done here';    
    require_once 'module_alert.php'; // <- PHP Mailer is requir_once in this file
    //........... ajax and some response //
?> 
```

只要我 require_once 它会生成一封电子邮件并发送它。

现在我必须更新模块中的 PHP 页面。该页面必须将数据发布到模块的 3 个不同的 php 页面。在该页面仅通过 ajax 向一个 php 页面发送数据之前，其他两个页面使用第一个自动递增的 ID。

由于复杂性，我正在考虑将其他两个文件也包含在文件 1 中

```
<?php
    // assume this is 1.php
    //.......... some code above //
    $mail_title = 'Message Title';
    $mail_body = 'Message body with complete details what has been done here';    
    require_once 'module_alert.php'; // <- PHP Mailer is requir_once in this file
    //........... ajax and some response //
    if($condition){
        include '2.php'; // <- this file again require_once 'module_alert.php'
        include '3.php'; // <- this file again require_once 'module_alert.php'
    }
?> 
```

问题是我想为所有 3 个步骤发送警报，而且我不想更改其他文件中的大量代码，因为我可能会破坏脚本。

在这种情况下我有什么选择生存？

*编辑*

里面有`module_alerts.php`很多东西。邮件布局、表格图像、有条件的收件人、谁应该收到此模块的警报等。 $mail->send() 函数以便将电子邮件发送到特定的收件人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:28:55.933

发送电子邮件的逻辑应该包装在一个函数中，然后您可以在程序中的任何位置使用适当的参数调用该函数。例如：

```
function sendMyEmail($recipient, $subject, $message)
{ ... } 
```

您当然可以构建一个类、一系列函数，实际上是任何类型的合法可重用设施，这将缓解现在和将来的问题。

高温高压

# java - 在java中控制循环执行速度 - Android

> ID：14708470
> 
> 赞同：2
> 
> 时间：2013-02-05T13:17:35.270
> 
> 标签：java, android, loops, imageview, thread-sleep

我知道这是一个很小的问题。但我无法弄清楚这是什么原因。在我的程序中，我运行了一个循环 50 次。在循环内部，我生成一个 0 到 5 的随机整数并将图像（骰子图像）加载到 imageView。所以 imageView 应该会迅速变化，我应该能够看到一些视觉上的骰子值正在迅速变化。

但是我在 imageView 中看不到任何这样的变化，并且在循环结束时，imageView 立即更改。我的意思是，如果初始骰子值是 2，它会保持在两个中，直到循环完成，然后 imageView 突然变为 5 或类似的值.

我意识到我看不到 dice imageView 的变化，因为循环执行得非常快。然后经过 [循环执行速度控制](https://stackoverflow.com/questions/5261943/loop-execution-speed-control)后，我放了 Thread.sleep 方法，但仍然没有变化。

这是我的代码：

```
ImageView dice = (ImageView) findViewById(R.id.imageViewrollingdiceOne);
for (int i=0;i<50;i++){
        int randomNum = random.nextInt(6);
        System.out.println("Random Value"+randomNum);
        dice.setImageResource(images[randomNum]);
        try {
            Thread.sleep(200);
        } catch (Exception e) {
            System.out.println("ex called");
        }
    } 
```

有人可以解释这个原因吗？我在 logcat 中没有收到任何错误。

这是日志猫：

```
02-05 18:38:38.515: D/OpenGLRenderer(27058): Flushing caches (mode 0)
02-05 18:38:42.179: D/TextLayoutCache(27455): Using debug level: 0 - Debug Enabled: 0
02-05 18:38:42.239: D/libEGL(27455): loaded /system/lib/egl/libGLES_android.so
02-05 18:38:42.239: D/libEGL(27455): loaded /system/lib/egl/libEGL_mali.so
02-05 18:38:42.249: D/libEGL(27455): loaded /system/lib/egl/libGLESv1_CM_mali.so
02-05 18:38:42.249: D/libEGL(27455): loaded /system/lib/egl/libGLESv2_mali.so
02-05 18:38:42.279: D/OpenGLRenderer(27455): Enabling debug mode 0
02-05 18:38:50.146: D/OpenGLRenderer(27455): Flushing caches (mode 0)
02-05 18:38:52.148: I/System.out(27455): Random Value0
02-05 18:38:52.348: I/System.out(27455): Random Value4
02-05 18:38:52.579: I/System.out(27455): Random Value2
02-05 18:38:52.789: I/System.out(27455): Random Value1
02-05 18:38:53.029: I/System.out(27455): Random Value2
02-05 18:38:53.219: I/System.out(27455): Random Value4
02-05 18:38:53.420: I/System.out(27455): Random Value1
02-05 18:38:53.620: I/System.out(27455): Random Value1
02-05 18:38:53.830: I/System.out(27455): Random Value5
02-05 18:38:53.870: D/dalvikvm(27455): GC_CONCURRENT freed 1035K, 11% free 9856K/10979K, paused 12ms+2ms
02-05 18:38:54.070: I/System.out(27455): Random Value1
02-05 18:38:54.300: I/System.out(27455): Random Value5
02-05 18:38:54.501: I/System.out(27455): Random Value1
02-05 18:38:54.701: I/System.out(27455): Random Value4
02-05 18:38:54.931: I/System.out(27455): Random Value1
02-05 18:38:55.131: I/System.out(27455): Random Value1 
02-05 18:38:55.331: I/System.out(27455): Random Value1
02-05 18:38:55.532: I/System.out(27455): Random Value1
02-05 18:38:55.732: I/System.out(27455): Random Value1
02-05 18:38:55.942: I/System.out(27455): Random Value3
02-05 18:38:56.162: I/System.out(27455): Random Value1
02-05 18:38:56.362: I/System.out(27455): Random Value4
02-05 18:38:56.563: I/System.out(27455): Random Value5
02-05 18:38:56.763: I/System.out(27455): Random Value0
02-05 18:38:56.973: I/System.out(27455): Random Value2
02-05 18:38:57.193: I/System.out(27455): Random Value4
02-05 18:38:57.393: I/System.out(27455): Random Value3
02-05 18:38:57.594: I/System.out(27455): Random Value4
02-05 18:38:57.794: I/System.out(27455): Random Value4
02-05 18:38:58.004: I/System.out(27455): Random Value0
02-05 18:38:58.204: I/System.out(27455): Random Value0 
02-05 18:38:58.404: I/System.out(27455): Random Value5
02-05 18:38:58.605: I/System.out(27455): Random Value0
02-05 18:38:58.805: I/System.out(27455): Random Value5
02-05 18:38:59.005: I/System.out(27455): Random Value0
02-05 18:38:59.215: I/System.out(27455): Random Value2
02-05 18:38:59.415: I/System.out(27455): Random Value5
02-05 18:38:59.616: I/System.out(27455): Random Value2
02-05 18:38:59.816: I/System.out(27455): Random Value5
02-05 18:39:00.016: I/System.out(27455): Random Value4
02-05 18:39:00.216: I/System.out(27455): Random Value3
02-05 18:39:00.416: I/System.out(27455): Random Value4
02-05 18:39:00.617: I/System.out(27455): Random Value4
02-05 18:39:00.817: I/System.out(27455): Random Value1
02-05 18:39:01.027: I/System.out(27455): Random Value5
02-05 18:39:01.227: I/System.out(27455): Random Value3
02-05 18:39:01.427: I/System.out(27455): Random Value3
02-05 18:39:01.628: I/System.out(27455): Random Value5
02-05 18:39:01.828: I/System.out(27455): Random Value2 
02-05 18:39:02.028: I/System.out(27455): Random Value0
02-05 18:39:02.228: I/System.out(27455): Random Value2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:20:56.383

而不是通过使用创建线程来休眠主 UI 线程`Thread.sleep`或使用 Handler 进行等待以将 ImageView 中的图像更改为：

```
new Handler().postDelayed(new Runnable() {
       public void run() {

            // put your code here to change image in ImageView...

       }
     }, 200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:16:53.507

我解决了这个问题。上面的答案也非常有用。

在 run 方法中使用以下。

```
handler.postDelayed(this, 200); 
```

它奏效了。这是完整的答案。参考[这个](https://stackoverflow.com/questions/14733592/changing-images-in-a-loop-android?answertab=votes#tab-top "循环加载图像")。

```
final Handler handler = new Handler();
Handler.postDelayed(new Runnable(){
public void run(){
    int randomNum = random.nextInt(6);
    dice.setImageResource(images[randomNum]);
    handler.postDelayed(this, 200);
    }
 }, 200); 
```

谢谢。

# php - JQuery $.post 在网络服务器上不起作用

> ID：14708471
> 
> 赞同：1
> 
> 时间：2013-02-05T13:17:37.427
> 
> 标签：php, jquery, ajax

我有一个使用 ajax 向我的 php 文件发送请求的脚本。php 文件应该更新一个 txt 文件。在我的本地主机上，脚本工作正常，但在网络服务器上却不行。

测试html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">

$(document).ready(function(){
for (i=1; i<=100; i++){
    $('#rate'+ i +'_').click(i, function(e){
    sendValue($(this).val(),e.data);
    });
}
});
function sendValue(str,str2){
$.post("/php/test.php",{ sendValue: str, sendValue2 : str2 },
    function(data){
    $('#display').html(data.returnValue);
    }, "json");
}        
</script>
</head>

<body>
<select id="rate1_" name="rate1">
<option value="1" selected="selected">1</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>

<select id="rate2_" name="rate2">
<option value="2" selected="selected">2</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>

<select id="rate3_" name="rate3">
<option value="3" selected="selected">3</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>
</body>
</html> 
```

测试php

```
<?php 
if ((isset($_POST['sendValue'])) and (isset($_POST['sendValue2']))){
    $value = $_POST['sendValue']; 
    $value2 = $_POST['sendValue2']; 

    $array_rate[$value2]=$value;
    $i=0;
    $f1 = fopen('info.txt','r');
    while (!feof($f1)){
        $i=$i+1;
        $array_rate[$i]=fgets($f1);
    }
    $nr=$i;
    fclose($f1);

    $handle = fopen('info.txt','w');
    fclose($handle);

    for ($i=1; $i<=$nr; $i++){
        if ($i!=$value2){
        $array_boss[$i]=$array_rate[$i];
        }else{
        if($i!=$nr){
        $array_boss[$i]=$value."\n";
        }else{
        $array_boss[$i]=$value;
        }
        }
    }
    $handle2 = fopen('info.txt','a');
    for ($i=1; $i<=$nr; $i++){
        fwrite($handle2,$array_boss[$i]);
    }
    fclose($handle2);

    }
?> 
```

在本地主机上，我的 info.txt 已更新，但在服务器上什么也没有...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:19:02.510

请使用 ls -l 或 ll 命令检查您的 Web 服务器上的目录，并确保您正在修改的文本文件旁边有一个“rw”。

有关文件权限的更多信息：

*   [http://ss64.com/bash/chmod.html](http://ss64.com/bash/chmod.html)
*   [http://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions](http://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions)
*   [Apache Webserver - 如何写入权限设置为 755 而不是 777 的目录/文件](https://stackoverflow.com/questions/1155194/apache-webserver-how-to-write-to-dir-files-with-permissions-set-at-755-instead)

正如评论中提到的调试是一个好主意，可以提供更多信息。

Chrome：右键单击并选择“检查元素”，然后单击“控制台”，这应该在运行代码后显示错误

Firefox：安装 firebug [http://getfirebug.com](http://getfirebug.com)

# msbuild - 根据选定的目标在启动时检查属性

> ID：14708472
> 
> 赞同：0
> 
> 时间：2013-02-05T13:17:40.387
> 
> 标签：msbuild

我在使用 msbuild 文件时遇到了一些问题。

我希望构建具有三个目标，按以下顺序执行：

*   `Cleanup`：清理先前构建的输出
*   `Build`: 实际构建
*   `CopyFiles`：打包构建输出以便于部署的任务

现在的问题是：我希望调用者显式设置目标的属性 ( `ReleasePath`) 。此外，如果只调用and任务`CopyFiles`，调用者不必设置输出路径。`Cleanup``Build`

我的第一次尝试是：

```
<PropertyGroup>
  <ReleasePath></ReleasePath>
</PropertyGroup>

<Target Name="Initialize">
  <Error Text="The ReleasePath property isn't defined" Condition="'$(ReleasePath)' == ''"/>
</Target>

<Target Name="CopyFiles" DependsOnTargets="Initialize">
</Target> 
```

它工作正常，但`Initialize`目标是在之前执行的`CopyFiles`，即之后`Build`。并且`Build`目标可能需要很长时间才能执行，所以如果出现问题，我希望立即通知用户。

**所以基本上，有没有办法`Initialize`在一开始就运行目标，但前提`CopyFiles`是包含在目标中？**

我还想过放入项目`Initialize`的`InitialTargets`属性，然后设置一个条件，仅当`CopyFiles`被选中时才执行此目标，但令我惊讶的是，我找不到包含调用者选择的目标列表的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:43:15.873

我认为实现目标的最简单方法是使用属性来切换 CopyFiles 而不是传入的目标列表。如果您始终将 CopyFiles 添加到 AfterBuild 目标但将其设置为“ShouldCopyFiles”之类的属性，那么您也可以条件化 Build 的 DependsOnTargets：

```
 <PropertyGroup>
  <ShouldCopyFiles Condition="'$(ShouldCopyFiles)'==''">false</ShouldCopyFiles>
  <ReleasePath></ReleasePath>
 </PropertyGroup>

 <PropertyGroup>
   <BuildDependsOn>
     BeforeBuild;
     CoreBuild;
     AfterBuild;
     CopyFiles;
   </BuildDependsOn>

 </PropertyGroup>

 <PropertyGroup Condition="'$(ShouldCopyFiles)'=='true'">
    <BeforeBuildDependsOn>
     Initialize;
   </BeforeBuildDependsOn>
 </PropertyGroup>

 <Target Name="Initialize" Condition="'$(ShouldCopyFiles)'=='true'">CheckStuff
 </Target>

 <Target Name="Build" DependsOnTargets="$(BuildDependsOn)"/>

 <Target Name="CoreBuild">YourBuildStuff</Target>
 <Target Name="BeforeBuild" DependsOnTargets="$(BeforeBuildDependsOn)"/>
 <Target Name="AfterBuild" />

 <Target Name="CopyFiles" Condition="'$(ShouldCopyFiles)'=='true'">
   CopyStuff 
 </Target> 
```

此时，您可以像这样调用 MSBuild：

```
 msbuild my.proj /targets:Clean;Build /p:ShouldCopyFiles=true 
```

这将打开它。

# asp.net - 我的代码中有错误或我做得不对

> ID：14708474
> 
> 赞同：0
> 
> 时间：2013-02-05T13:17:43.603
> 
> 标签：asp.net, webforms

我已经在用例上苦苦挣扎了两天了。我只需要从患者就诊表中读取患者的就诊编号，并根据患者编号填充下拉列表。经过大量研究，这两个链接几乎解决了相同的问题。我做了此处描述了 [stackover 站点上的示例，](https://stackoverflow.com/questions/11592266/asp-dropdownlist-databind-from-database)但我的仍然无法正常工作并且没有显示错误。[此处描述了另一个示例](http://aspdotnetcode.blogspot.com/2010/10/dropdownlist.html)！这是我的代码：HTML

```
 <li>
            <asp:Label runat="server" ID ="lblVisits">Visit Number</asp:Label>
            <asp:DropDownList ID="DropDownList2" runat="server" Height="16px" Width="174px" style="margin-left: 46px">
                <asp:ListItem Text=""></asp:ListItem>
                <asp:ListItem Value=""></asp:ListItem>
            </asp:DropDownList>
  </li> 
```

代码隐藏：

```
protected void btn_search_Click(object sender, EventArgs e)
    {
        string connect = System.Configuration.ConfigurationManager.ConnectionStrings["db_connection"].ToString();
        string num = txtPatientNumber.ToString();
        SqlConnection con = new SqlConnection(connect);
        string Statement = "SELECT Visit_Number FROM Visit "
          + "WHERE Patient_Number=@Patient_Number";
        SqlCommand cmd = new SqlCommand(Statement, con);
        cmd.Parameters.AddWithValue("@Patient_Number", num);

        SqlDataReader reader;

        try
        {
            con.Open();
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                DropDownList2.DataSource = reader;
                DropDownList2.DataTextField = reader["Visit_Number"].ToString();
                DropDownList2.DataValueField = reader["Visit_Number"].ToString();
                DropDownList2.DataBind();
            }
            reader.Close();
        }
        catch (SqlException excep)
        {
            //Response.Write("<script language=javascript>alert('Patient Number not Found.');</script>");
            ErrorMessage.Text = "Error Occurred" + excep.Message.ToString();
        }
        finally
        {
            con.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:27:25.483

问题出在这里：

```
while (reader.Read())
{
   DropDownList2.DataSource = reader;
   DropDownList2.DataTextField = reader["Visit_Number"].ToString();
   DropDownList2.DataValueField = reader["Visit_Number"].ToString();
   DropDownList2.DataBind();
} 
```

你用错了`.DataTextField`。`.DataValueField`它应该是这样的：

```
DropDownList2.DataTextField = "Visit_Number";
DropDownList2.DataValueField ="Visit_Number"; 
```

此外，您不应为从 db 返回的每一行重新绑定 DropDownList。所以删除`while (reader.Read())`.

最终代码：

```
DropDownList2.DataSource = reader;
DropDownList2.DataTextField = "Visit_Number";
DropDownList2.DataValueField = "Visit_Number";
DropDownList2.DataBind(); 
```

# c# - VS2010 从 VS2008 升级编译错误

> ID：14708478
> 
> 赞同：1
> 
> 时间：2013-02-05T13:17:49.520
> 
> 标签：c#, visual-studio-2010, projects-and-solutions

所以最近在工作中，我们将我们的项目从 2008 年升级到 2010 年，部署到我们的 Web 服务器的内容编译得很好，但是为我们的应用服务器编译的内容却失败了。我们看到的错误是：

> 解决方案文件 xxx.sln 来自此应用程序的先前版本，必须进行转换才能在此版本的应用程序中构建。要转换解决方案，请在此版本的应用程序中打开解决方案。

我用谷歌搜索并没有发现任何有效的方法。我知道一些常见的 csproj 不是问题，但有几个只存在于这个解决方案中，所以我正在寻找可能的原因。

有趣的是，当我在本地构建解决方案时，一切都很好，只有当发布团队构建它时才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:54:09.567

我似乎解决方案文件尚未转换为新的 Visual Studio 环境。

# c# - 如何编写基于验收的测试（从代码的角度来看）

> ID：14708479
> 
> 赞同：1
> 
> 时间：2013-02-05T13:17:51.743
> 
> 标签：c#, testing, acceptance-testing

我一直在研究基于验收的测试，它们看起来很不错，因为它们更自然地适合基于特性的开发。

问题是我不知道如何在代码中布置它们。我想尽量避免引入另一个框架来处理这个问题，所以我只是在寻找一种简单的方法来启动和运行这些测试。

我对代码结构所需的任何更改持开放态度。我还使用规范来建立复杂的验收标准。

我正在尝试做的示例：

```
public class When_a_get_request_is_created
{
    private readonly IHttpRequest _request;

    public When_a_get_request_is_created()
    {
        _request = new HttpRequest();
    }

    // How to call this?
    public void Given_the_method_assigned_is_get()
    {
        _request = _request.AsGet();
    }

    // What about this?
    public void Given_the_method_assigned_is_not_get()
    {
        _request = _request.AsPost();
    }

    // It would be great to test different assumptions.
    public void Assuming_default_headers_have_been_added()
    {
        _request = _request.WithDefaultHeaders();
    }

    [Fact]
    public void It_Should_Satisfy_RequestIsGetSpec()
    {
        Assert.True(new RequestUsesGetMethodSpec().IsSatisfiedBy(_request));
    }
} 
```

我可能在这里完全不合时宜，但基本上我希望能够运行具有不同假设和给定的测试。只要我可以将某人指向测试以验证给定的标准，我不介意是否必须进行更多课程或少量重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:01:17.457

我强烈建议使用 ATDD 框架`SpecFlow`，甚至`MSpec`用于创建这种性质的测试。然后，实施`SpecFlow`就是使用特定领域的语言编写规范，如果合适的话，与领域专家合作，然后通过代码满足功能中定义的场景步骤。如果不了解更多关于您的确切要求，很难填充代码方面，但示例功能可能如下所示：

```
Feature: HTTP Requests
    In order to validate that HTTP requests use the correct methods
    As a client application
    I want specific requests to use specific methods

Scenario Outline: Making HTTP Requests
    Given I am making a request
    When the method assigned is <Method>
    And the <Header> header is sent
    Then it should satisfy the requirement for a <Method> request

Examples:
| Method | Header   |
| Get    | Header 1 |
| Get    | Header 2 |
| Get    | Header 3 |
| Post   | Header 1 | 
```

然后在绑定到该功能的步骤中，您可以编写满足规范步骤的代码。这是一个例子：

```
[Binding]
public class HttpRequestSteps
{
    [When(@"the method assigned is (.*)")]
    public void WhenTheMethodAssignedIs(string method)
    {
        // not sure what this should be returning, but you can store it in ScenarioContext and retrieve it in a later step binding by casting back based on key
        // e.g. var request = (HttpRequest)ScenarioContext.Current["Request"]
        ScenarioContent.Current["Request"] = _request.AsGet();
    }
} 
```

# c# - 写入 .txt 文件的开头

> ID：14708483
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:18:11.947
> 
> 标签：c#, winforms, filestream

> **可能重复：**
> [C#：在文件开头](https://stackoverflow.com/questions/1343044/c-prepending-to-beginning-of-a-file)
> [添加一行使用 .NET 在文件中间添加一行](https://stackoverflow.com/questions/2044365/adding-a-line-to-the-middle-of-a-file-with-net)

我有一个`file.txt`带有文本的内容，我需要知道`write`此文件开头是否有其他文本？

我的意思是：有一个文本，我想写一些别的东西，而不会丢失我在`file.txt`. 但是，我想在文件的开头插入这个新文本......有可能吗？

我`StreamWriter`用来写文件里面。只需要知道它是否可能以及这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:22:19.000

一种方法是将所有文本放在一个字符串中：

```
using System.IO;

StreamReader streamReader = new StreamReader(filePath);
string initialText = streamReader.ReadToEnd();
streamReader.Close(); 
```

然后添加到字符串的开头：

```
endText = textAtBeginning & initialText; 
```

然后最后写入`endText`替换文件中的所有文本：

```
// Write the string to a file, overwriting the existing text. 

StreamWriter myWriter = new StreamWriter("c:\\test.txt", false))
myWriter.WriteLine(endText);
myWriter.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:21:53.207

试试这是最好的方法

File.WriteAllText("debug.txt", "我叫Test");

```
 using (Stream stream = new FileStream("debug.txt", FileMode.OpenOrCreate))
        {
            stream.Seek(0, SeekOrigin.Begin);
            stream.Write(ASCIIEncoding.ASCII.GetBytes("whatever you text is"), 0, ASCIIEncoding.ASCII.GetBytes("whatever you text is").Length);
        } 
```

您必须使用 seek 属性进行写入，就像前面读取所有内容并删除文件和创建新文件的示例一样，这不是一个好习惯，当您有大文件时这是一个问题，所以使用这是最好的方法。找到你想写的位置，然后写。

# dygraphs - CSV 无法在没有硬编码的情况下在 Dygraphs 中显示两轴

> ID：14708486
> 
> 赞同：0
> 
> 时间：2013-02-05T13:18:25.663
> 
> 标签：dygraphs

我想显示具有两个不同轴的 CSV 数据的图表。

我成功地做到了这一点，但有一些限制。

这是我的 CSV 文件的示例，但列数和列标签可能会有所不同：

```
"date","Tch","HyR","CO2"
2012/12/23-10:41,22.2,43,2379.52
2012/12/23-10:42,22.2,44,2319.36
2012/12/23-10:43,22.2,44,2319.36 
```

我可以使用以下代码显示它：

```
<div id="div_g" style="width:900px; height:400px; border: 1px solid black"></div> 
<script type="text/javascript" src="http://www.dygraphs.com/dygraph-combined.js"></script>

<script> 

        var g = new Dygraph(
        document.getElementById("div_g"),
        "enregistrement-subset0.csv",
        {
            labels:["date","Tch","HyR","CO2"], //the line I'd like to remove
            colors:["red", "blue", "green"],
            "CO2": { axis: {
                yAxisLabelFormatter: function (v) { return v.toPrecision(2); },
                yValueFormatter: function (v) { return v.toPrecision(2); }
            }},
            axes: {
                y: {
                    valueFormatter: function(y) {
                        return y.toPrecision(3);
                    },
                    axisLabelFormatter: function(y) {
                        return y;
                    }
                }
            },
        });
</script> 
```

我试图删除“标签：”行，但是这样做，第二个轴消失了。

jsFiddle 在这里[http://jsfiddle.net/lauhub/jY2m6/](http://jsfiddle.net/lauhub/jY2m6/)

此外，保持这条线会在显示图表时生成警告。

我还想从 CSV 文件中动态加载标签，因为列数和名称可能会有所不同。

是否可以使用 dygraphs 以编程方式执行此操作？如何 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:34:01.007

这是来自 Dygraphs google 组的 Konigsberg 发布的答案：简单的答案是您的 CSV 不认为第 0 列标记为 [date]，它认为它标记为 ["date"]（带引号。）

删除 CSV 周围的引号，你会没事的：

```
date,Tch,HyR,CO2
2012/12/23-10:41,22.2,43,2379.52 
```

有关此操作，请参见[http://jsfiddle.net/KUdsY/2](http://jsfiddle.net/KUdsY/2)。

[此外，我建议使用http://blog.dygraphs.com/2012/12/the-new-and-better-way-to-specify.html](http://blog.dygraphs.com/2012/12/the-new-and-better-way-to-specify.html)中指定的过程使用新方法来指定轴和系列，这使得您的解决方案看起来像[http://jsfiddle.net/KUdsY/4/](http://jsfiddle.net/KUdsY/4/)。

我发布了下面的代码（从最后一个链接复制）：

```
var csv = 'date,Tch,HyR,CO2\n' +
    '2012/12/23-10:41,22.2,43,2379.52\n' +
    '2012/12/23-10:42,22.2,44,2319.36\n' +
    '2012/12/23-10:43,22.2,44,2319.36\n';
var g = new Dygraph(
document.getElementById("graph"),
csv, {
  //  labels: ["date", "Tch", "HyR", "CO2"], //the line I'd like to remove
    colors: ["red", "blue", "green"],
    series : {
        "CO2": {
            axis : 'y2'
        }
    },
    axes: {
        y: {
            valueFormatter: function (y) {
                return y.toPrecision(3);
            },
            axisLabelFormatter: function (y) {
                return y;
            }
        },
        y2: {
            yAxisLabelFormatter: function (v) {
                return v.toPrecision(2);
            },
            yValueFormatter: function (v) {
                return v.toPrecision(2);
            }
        }
    }
}); 
```

# c++ - 使用 QMenu 并传递参数

> ID：14708490
> 
> 赞同：3
> 
> 时间：2013-02-05T13:18:40.640
> 
> 标签：c++, qt, qmenu, qt-signals

我有一个`QMenu`动态构建的几个菜单项。

为此，我遍历了一组菜单项，其中包含名称和操作（如果菜单项被点击，则需要执行），并继续将它们添加到上下文菜单中。所有菜单项都需要连接**到一个公共插槽**。

但不知何故，触发动作没有发生。即到达连接语句，但控制没有传递到指定的SLOT，不采取任何行动。

```
for (int i=0; i<Action_List.size();i++)
{
    tempAct1 = Action_List.at(i); //Action List has the list of Actions
    Context_Menu->addAction(tempAct1);
}
if (Context_Menu!=NULL) {
    Context_Menu->exec(QCursor::pos());
    int r = connect(Context_Menu, SIGNAL(triggered(QAction *)), 
                    this, SLOT(SPlusCommand(QAction *)));
}

int P14MainWindow::SPlusCommand ( QAction* Action)
{
    QVariant tempstr = Action->data();
    QString Qs = tempstr.toString();
    return QPwLocalClient::ExecuteCommand(Qs);
} 
```

谁能告诉我我哪里出了问题，拜托？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:05:04.277

看来您应该`connect` **先** `exec()`搬家：

```
connect(Context_Menu, SIGNAL(triggered(QAction *)), 
        this, SLOT(SPlusCommand(QAction *)));
Context_Menu->exec(QCursor::pos()); 
```

因为*同步*`exec`执行菜单，这意味着只有当您与菜单的所有交互都完成时，它才会从这个方法返回——在它之后连接东西已经太晚了。

 ** * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-05T13:50:29.653

您必须将各个操作与您的插槽连接起来。

```
connect(action, SIGNAL(triggered()), this, SLOT(yourSlot()) 
```*

# webview - WebView Google Maps 在 Qt5 中平移/拖动

> ID：14708496
> 
> 赞同：15
> 
> 时间：2013-02-05T13:18:54.790
> 
> 标签：webview, qtwebkit, qt5

我目前正在将应用程序从 Qt 4 移植到 Qt 5，并且遇到了**WebView** QML 元素的一些问题。我可以成功地将 Google Maps 网页加载到 WebView 中，但是该页面仅响应单击或双击；尝试单击并拖动地图视图以平移可见区域没有效果。

以前，在我的代码的 Qt 4 版本中，我使用了 'pressGrabTime: 0' WebView 属性并欺骗了用户代理以实现点击拖动功能。

我已参考 Qt 5 提供的*MiniBrowser*示例的源代码，它似乎生成模拟触摸事件以启用所需的功能。但是，示例代码使用了许多私有框架，我希望避免将它们合并到我自己的代码中。

任何人都可以解释为什么 WebView 元素不响应点击拖动事件，并提出一种克服这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-11T03:58:49.313

我无法回答您的问题，但也许我可以为您提供另一种解决方案。

谷歌地图为您提供基于长/纬度和缩放级别的地图图块，也许您可​​以向相邻的图块发出侧面请求，并将它们拼接成您想要的图像。

查看 tangogps/foxtrotgps，它是开源的，因此您可以看到他们为使谷歌地图图块与那里的软件一起工作所做的工作。

# c - 如何编写将字符串复制到某个位置的递归函数？

> ID：14708497
> 
> 赞同：0
> 
> 时间：2013-02-05T13:18:56.673
> 
> 标签：c

关于如何编写获取 2 个参数的 RECURSIVE 函数的任何想法：首先是地址 d（char 的位置）。第二个是字符串。该函数将字符串 s 复制到从 d 开始的位置。该函数返回 d 作为结果！我们可以在没有 strcpy 的情况下做到吗？

```
 copy_r(char *s, char *d)
{
    *d = *s;
    if(*s)return copy_r(++s, ++d);
} 
```

错误在哪里？（发现）放还是有问题！如果位置 d 与某个已被 s 占用的位置重叠怎么办？
例如 strcpy(p1, "abcdefghijklomopqrstuvwqyz"); printf(copy_r(p1, p1+10));不起作用——

输出应该是 klomopqrstuvwqyz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:31:36.183

你的复制逻辑是完美的。只是你没有返回任何值（d）......

这应该有效：

```
char* copy_r(char *s, char *d)
{
    *d = *s;
    if(*s)
      return copy_r(s + 1, d + 1 ) - 1 ; //-1 is to take care of d+1 part
    else
      return d;
} 
```

示例用法：

```
int main(){
    char src[]="hello world";
    char dest[50];

    char* t=copy_r(src,dest);

    printf("%s\n%s\n",t,dest); //t==dest. thus you don't really have to return anything from the function.
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:14:49.293

`where is the mistake`

好吧，没有任何错误，此代码示例可以正常工作......我看到的唯一问题是它不能完全按照您的预期工作。你提到你想要它，但`The function returns d as a result`你没有这样做。

该代码当前将`s`内容复制到其中`d`，如果您有类似的内容：

```
char * str = "hello";
char * ptr = malloc(6);
copy_r(str, ptr);
// now ptr has "hello" too 
```

# c# - asp.net mvc 应用程序中的事件

> ID：14708501
> 
> 赞同：0
> 
> 时间：2013-02-05T13:19:11.053
> 
> 标签：c#, javascript, asp.net-mvc-3

控制器

```
 IEnumerable<SelectListItem> process = 
    from proc in         
        XDocument.Load("Processes.xml").Descendants("Process")  
          select new SelectListItem
          {
              Text = (string)proc.Element("ConfigFile")
          };
    ViewBag.process = process; 
```

看法

```
<p>@Html.DropDownList("process")</p> 
```

我想处理在下拉列表中选择的项目上的事件我用谷歌搜索了一下，人们说没有像普通 ASP 或 WinForm 应用程序这样的常规事件处理程序

我不熟悉 javascript 和 jquery，但我可以理解代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:21:05.510

您可以将此 DropDown 放在表单中并使用 javascript 订阅其`onchange`事件并手动提交此表单：

```
@using (Html.BeginForm("SomeAction", "SomeController"))
{
    @Html.DropDownList("process", Model.Items, new { onchange = "this.form.submit();" })
} 
```

这会将选定的值发布到您可以检索它的 SomeAction：

```
[HttpPost]
public ActionResult SomeAction(string process)
{
    // the process argument will contain the selected value from the dropdown
    ...
} 
```

# scikit-learn - 套索路径 [linear_model.lars_path(model = 'lasso')]

> ID：14708502
> 
> 赞同：1
> 
> 时间：2013-02-05T13:19:13.383
> 
> 标签：scikit-learn, sparse-matrix, lasso-regression, lars

`linear_model.lars_path`在 scikit-learn 中运行 (model = 'lasso') 时，我对套索路径的行为感到困惑。

我认为一旦权重（系数）变为活动状态（与 0 的差异），它必须在 LARS 算法的所有即将执行的步骤中保持活动状态。

在我的数据上运行算法时，我注意到有时一个系数会变得活跃，然后它会变为零（从活跃集中删除）。这是 LARS 算法的正确行为，还是 scikit-learn 实现中存在错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:27:26.917

这是 L1 正则化版本的 LARS 的正确行为（而 L1 正则化回归通常称为“套索”）。

在 L1 版本中，如果沿 LARS 路径的一步导致数据矩阵的一列与残差的相关性符号与相应回归系数（例如`sgn(x_i^\top(y-X\beta)) != sgn(\beta_i)`）的符号不同，则该列/系数将为从活动路径中删除。（您可以在 Efron 等人 2003 年的论文“最小角回归”中找到原始描述。）

相反，在 L0 正则化版本的 LARS 中，活动集在每次迭代时都会增长。

# android - 更改选定选项卡上的夏洛克操作栏选项卡文本颜色

> ID：14708503
> 
> 赞同：0
> 
> 时间：2013-02-05T13:19:21.413
> 
> 标签：android

我是夏洛克动作栏的新手。我已经使用视图寻呼机实现了夏洛克动作栏。我想更改所选选项卡上的选项卡文本颜色。我对选择器和样式感到困惑。请建议我一些初学者教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:05:54.287

请查看[github上的默认 ABS 演示应用](https://github.com/JakeWharton/ActionBarSherlock)

并[自定义默认的操作栏元素](http://android-developers.blogspot.co.uk/2011/04/customizing-action-bar.html)

# javascript - 如何从特定对象的树视图中隐藏创建按钮。因为这个对象的所有字段都是只读的

> ID：14708508
> 
> 赞同：5
> 
> 时间：2013-02-05T13:19:35.530
> 
> 标签：javascript, jquery, openerp

如何从特定对象的树视图中隐藏创建按钮？因为这个对象的所有字段都是只读的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T11:54:14.387

这取决于您使用的 OpenERP 版本，如果您需要更具体的答案，请提及。如果您问这个问题，您可能还没有使用 7.0，但知道它可能还是有用的。

## OpenERP 7.0

从 OpenERP 7.0 开始，系统将自动为您执行以下每个可能的操作：*创建、编辑、删除*：如果当前用户没有访问权限（基于访问权限配置），相应的标志将被添加到根目录视图定义的节点，有效地隐藏了 UI 中的选项。这些标志分别对应于以下访问权限：`create`, `write`, `unlink`.

正如 user1576199 所提到的，此标志也可以在您的视图定义中手动设置，但只有当访问权限与您要显示的选项不对应时才需要这样做。您可以以任何组合方式以这种方式执行此操作：

```
<tree create="false" delete="false">
....
</tree>
or
<kanban create="false" edit="false">
....
</kanban>
etc.. 
```

## OpenERP 6.1 及更早版本

没有隐藏这些按钮的选项，因此如果您想专门实现这一点，您需要自定义 OpenERP 客户端。simahawk 的回答为您提供了 Web 客户端 6.1 的一些起点，这可能是您想要自定义的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:02:09.377

没有内置功能。即使您无权访问它们背后的操作，编辑/删除/等按钮也始终存在，也[不会检查权限](https://stackoverflow.com/questions/10994216/different-permissions-based-on-workflow-state)

无论如何，您可以进行 javascript hack 并执行类似 $('button.oe_form_button_edit').hide() 之类的操作。[这里有一些](https://stackoverflow.com/a/11950556/647924)关于如何开始开发网络插件的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:26:54.690

你可以在树视图上这样写

```
<tree string="String" create="false"> 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T12:23:03.393

在 v6 上执行此操作的另一种方法是使用 CSS 隐藏它（这比 @simahawk 的建议更容易）。您可以通过将 CSS 添加到包含树的表单视图 xml 来完成此操作。例如：

```
<html>
  <style>
    .openerp button.oe_form_button_edit { display:none }
  </style>
</html>
<tree ... 
```

您可以根据需要对删除和编辑按钮执行相同操作。

有点破解...我喜欢 v7 功能 - 等不及要升级了 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T02:20:04.860

我不知道这个解决方案是否正确，但我尝试将此代码放在下面的核心 javascript 中，它实际上可以工作。

```
openerp.web.ListView.include({

    start: function() {
        var self = this;
        var ret = this._super.apply(this, arguments);
        var res_model = this.dataset.model;
        if ($.inArray(res_model, MODELS_TO_HIDE) != -1) {
            self.options.addable = false; /* for create button */
            self.options.deletable= false; /* for delete button */
        };
        return ret;
    },
}); 
```

或者你可以参考这个链接： [https ://github.com/kdeldycke/kevin-deldycke-blog/blob/master/content/posts/openerp-61-web-javascript-hacks-hide-buttons.md](https://github.com/kdeldycke/kevin-deldycke-blog/blob/master/content/posts/openerp-61-web-javascript-hacks-hide-buttons.md)

# android - 在构建/启动 android 应用程序之前在 mac 终端中运行 shell 脚本

> ID：14708509
> 
> 赞同：0
> 
> 时间：2013-02-05T13:19:42.043
> 
> 标签：android, eclipse, terminal, android-sdk-2.3, android-sdk-tools

这是我想要实现的目标：-

我有一个 shell 脚本文件。该文件会生成一些文件和文件夹，并将它们放在我的 Android 应用程序的资产文件夹所在的 Finder 中。

每次我更改使用 shell 脚本生成的文件中的某些内容时，我都需要从终端运行该脚本文件，然后构建、安装、运行我的 Android 应用程序。

谁能建议我一种方法，在每次构建 android 应用程序之前执行我的 shell 脚本并生成最新文件，然后这些文件可以被 Android 应用程序使用。

谢谢

# java - 使用浏览器的 cookie 保存 webApplication 数据

> ID：14708510
> 
> 赞同：-3
> 
> 时间：2013-02-05T13:19:42.113
> 
> 标签：java, gwt, httpcookie

在我的 GWT Web 应用程序中，我想将我的一些应用程序数据保存在用户的浏览器 cookie 中。例如布局条件，由用户更改。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:18:33.103

简单的！看看：http: [//google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/Cookies.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/Cookies.html)

还要看看 Window 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:19:21.573

在 GWT 中有一个类

```
import com.google.gwt.user.client.Cookies; 
```

是你要找的吗

```
//get  cookie with name of the cookie
    String msg = Cookies.getCookie("cookiename");

    //set cookie  with name 

    Cookies.setCookie("cookiename",msg); 
```

记住没有值的 cookie 返回 null 。

# java - JPA 实体中的方法是否允许抛出异常？

> ID：14708516
> 
> 赞同：2
> 
> 时间：2013-02-05T13:20:12.473
> 
> 标签：java, jpa, entity, openjpa

我尝试创建的@Entity 有问题。尝试使用 OpenJPA 实现在 Eclipse 中测试类时会出现问题（我**没有**尝试过其他的，所以不确定它是否可以与它们一起使用）。

我的测试用例很简单，它创建了一个 EntityManagerFactory（它会自动在我的类路径中找到 persistence.xml），然后它尝试从工厂创建一个 EntityManager。这是当我遇到一个非常模棱两可的“PersistenceException：null”错误时。

有问题的实体是以下 LogError 类。我已将其精简到最低限度，但它仍然会引发错误。

```
@Entity
@Table(name = "T_LOG_ERROR")
public class LogError {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long ID;

private String ERROR;

protected LogError() {}

public String getErrorName() throws FieldNullException {
    if (this.ERROR == null)
        throw new FieldNullException("error was null", null);
    return this.ERROR;
}

public setError(SystemError error) {
    this.ERROR = error.getClass().getCanonicalName();
} 
```

}

我发现问题似乎在于在 getErrorName() 方法中抛出异常。你看，如果我要像这样注释掉方法的前两行：

```
public String getErrorName() throws FieldNullException {
    //if (this.ERROR == null)
    //  throw new FieldNullException("caughtException was null", null);
    return this.ERROR;
} 
```

然后错误消失。澄清一下，FieldNullException 是我自己定制的异常，但是它并没有什么不同，因为我尝试了标准的 java 异常，例如 NullPointerException，并且错误是相同的。

**所以我的问题是，使用 Entity 类的方法抛出异常是否违法？**

**还有为什么我会出错？**

这是我的测试方法：

```
@Test
public final void test() {
    emf = Persistence.createEntityManagerFactory("testPersistenceUnit");
    emf.createEntityManager(); // problem arises here!
} 
```

我在下面附上了堆栈跟踪：

```
<openjpa-2.2.0-r422266:1244990 fatal general error> org.apache.openjpa.persistence.PersistenceException: null
at org.apache.openjpa.enhance.ClassRedefiner.redefineClasses(ClassRedefiner.java:96)
at org.apache.openjpa.enhance.ManagedClassSubclasser.prepareUnenhancedClasses(ManagedClassSubclasser.java:176)
at org.apache.openjpa.kernel.AbstractBrokerFactory.loadPersistentTypes(AbstractBrokerFactory.java:314)
at org.apache.openjpa.kernel.AbstractBrokerFactory.initializeBroker(AbstractBrokerFactory.java:238)
at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:212)
at org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:156)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:227)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:154)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:60)
at 
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.openjpa.enhance.ClassRedefiner.redefineClasses(ClassRedefiner.java:85)
... 34 more
Caused by: java.lang.VerifyError
at sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)
at sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:144)
... 39 more 
```

**为什么我还是要抛出异常**

对我来说，在每个表示允许 NULL 的列的 getter 方法上抛出 FieldNullException 会强制这些 getter 方法的用户在需要这些 getter 的值时采取适当的操作。

例如：

```
// At some point this object is created:
LogError logError = new LogError();
logError.setError(new SystemError());

// Some point later, someone wants to retreive the error name from this object 
// and pull only the first 10 letters for display
try {
    return logError.getErrorName().substring(0,10); // Safely perform substring
} catch (FieldNullExcepion) {
    return "";
} 
```

如果我的 getter 没有“抛出 FieldNullException”，那么它可能允许 getter 的用户对空对象执行操作：

```
// If getErrorName() returns null, then this will throw NullPointerException!
return logError.getErrorName().substring(0,10) 
```

为了避免这种情况，用户显然可以在执行任何其他操作之前检查 getter 的返回值是否为 null *，这没有任何问题*。我的方式的好处是**简单**地说'*嘿，这个字段可能包含 null 所以采取适当的行动*'。

并且一个实体可以有许多字段，因此在允许 null 的 getter 上附加“抛出 NullFieldException”，将**方便**地向调用者发出信号，哪些确切的字段可能为 null，从而对它们采取替代操作。因此，不必尝试记住哪个可能为 null 或拉起您的实体来检查您的 @NotNull 注释等。

*写一次，让它提醒你*；）

我不使用这些方法进行验证，也看不出它是如何实现业务逻辑的。这完全与底层数据库字段的特性有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:43:11.603

不，这不是非法的，并且一些 JPA 实现（例如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2/)）不会调用 getter（除非使用属性访问，但您不是），这些是供开发人员调用的。持久性规范也不会将任何东西强加给开发人员。没有“正确”的方式来使用语言和设计你的类，所以如果你想让模型类的行为很好，它们应该以同样的方式持久化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:25:01.963

首先要开始[在构建时增强您的实体，或使用 -javaagent](http://openjpa.apache.org/entity-enhancement.html)！不要使用`openjpa.RuntimeUnenhancedClasses`，因为该功能有很多已知的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:38:34.307

即使*可以*做到，也不代表*应该*做。在实体中抛出异常对我来说似乎是一种不好的编码气味。实体不应该*有*任何业务逻辑，所以那里的异常处理无论如何都是不合适的。

Java EE 设计模式鼓励一种程序化的思维方式，在实体级别应用 OO 概念可以用于建模数据（继承、多态等），但不能用于建模行为 - 也就是说，验证逻辑、业务逻辑等应该驻留在外部实体并且仅存在于业务类中。放入实体中唯一有意义的业务逻辑是应用于它的命名查询。

# grails-2.0 - grails 版本 2 中的设备检测

> ID：14708520
> 
> 赞同：0
> 
> 时间：2013-02-05T13:20:23.957
> 
> 标签：grails-2.0

我们正在 grails 2 中构建一个多平台应用程序。我知道我们可以使用 JQuery mobile 来构建视图，但是在 grails 2 中设备检测的最佳插件是什么。

Spring 插件适用于 Grails 版本： 1.3.6 ，是否有一些解决方法？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:54:41.367

使用[http://grails.org/plugin/browser-detection](http://grails.org/plugin/browser-detection) - 它得到积极维护（上个月更新）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T05:30:11.530

使用 grails spring 移动插件。在这里找到如何使用 spring 移动插件实现设备检测。[http://jagadeeshmanne.blogspot.in/2014/02/grails-mobile-device-detection-using.html](http://jagadeeshmanne.blogspot.in/2014/02/grails-mobile-device-detection-using.html)

# java - 什么是 EJB 客户端？

> ID：14708522
> 
> 赞同：4
> 
> 时间：2013-02-05T13:20:27.180
> 
> 标签：java, ejb, ejb-3.0

ALL，我是Java World EJB 的新手，在阅读了名为[Ejb3.0 in Action](https://rads.stackoverflow.com/amzn/click/com/1933988347)的好书后，我有一个关于Session Bean 的问题。会话 bean 的 EJB 客户端是什么？假设我们有一些代码如下所示。

```
//EJB definition
import javax.ejb.Remote;
@Remote
public interface PlaceOrder {
  ..
  void addItem(Long itemId);
  Long confirmOrder(); 
  ..
}

@Stateful
public class PlaceOrderBean implements PlaceOrder {
  private List<Long> items;
  public PlaceOrderBean () {
    items = new ArrayList<Long>();
  }

  public void addItem(Long itemId) {
    items.add(itemId);
  }

  @Remove
  public Long confirmOrder() {
    Order order = new Order();
    ...
    return order.getOrderId();
  }
}

//Client 
import javax.ejb.EJB;
public class PlaceOrderTestClient {
  @EJB
  private static PlaceOrder placeOrder1;
  @EJB
  private static PlaceOrder placeOrder2;
  public static void main(String [] args) throws Exception {
    System.out.println("Exercising PlaceOrder EJB...");
    placeOrder1.addItem(new Long(200));
    placeOrder1.addItem(new Long(201));

    Long orderId = placeOrder1.confirmOrder();
    System.out.println("Order confirmation number: " + orderId);
  }
} 
```

**更新**

EJB 客户端意味着`placeOrder1`和`placeOrder2`/或主应用程序？这是否意味着多个 EJB 客户端？另一个问题是如果它是 in`Servlet`而不是 main 方法怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:24:33.073

`EJBClient``Remote`是一个可以调用和操作Bean的本地程序

在这里，在您的场景中，触发的`PlaceOrderBean`都是客户端

InCase of Servlet，如果`Servlet`调用`EJB`它在技术上是客户端，但经常调用`Facade`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T09:49:18.520

A EJB Client is local program to execute the functionality/behavior implemented at server side.

Here *PlaceOrderTestClient* is EJB Client.

# design-patterns - DAO 是否负责将记录插入到“连接”表中

> ID：14708526
> 
> 赞同：5
> 
> 时间：2013-02-05T13:20:30.827
> 
> 标签：design-patterns, language-agnostic, dao

例如，如果我有两个表：`Customer`并且`Product`我需要将客户映射到产品（多对多）。所以我需要第三个（连接）表，其中包含`CustomerId`and `ProductId`。`DAO` 负责将记录插入到第三个（连接）表中？

PS现在我有`CustomerDAO`和`ProductDAO`。将客户映射到服务层处理的产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:22:42.627

是的，你的 DAO 可以实现类似的方法

*   更新产品（客户 ID）
*   更新客户（产品 ID）
*   findCustomerByProduct(productId)
*   findProductsByCustomer(customerId)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:23:08.160

是的，当然，这是它的责任。如果不是`DAO`，那么谁来代替它呢？

# javascript - 无法理解 javascript 行

> ID：14708530
> 
> 赞同：-3
> 
> 时间：2013-02-05T13:20:41.370
> 
> 标签：javascript

我无法理解一小段 JavaScript 代码。请帮助我了解以下 JavaScript 块的含义：

```
x = 2 + a / 30 >> 0; 
```

JavaScript 中的“>>”是什么意思？

```
D = !0; 
```

D的价值是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:26:07.017

不仅是 JavaScript，它也是几乎所有编程语言通用的 Shift 运算符。

[`Here`](http://msdn.microsoft.com/en-us/library/336xbhcz.aspx)是一个链接：

示例：5 << 1 变为 10..

(0101)b 变成 (1010)b .. 即十进制的 10

# php - MySQL Query 根据用户投票最多的照片获得排名

> ID：14708531
> 
> 赞同：0
> 
> 时间：2013-02-05T13:20:46.730
> 
> 标签：php, mysql, sql, count

现在我正在使用这个查询来获取用户的排名。问题是它使用他所有照片中的所有选票来获得他的排名。我希望查询只使用他投票最多的照片来计算他的排名。

这是原始查询，非常感谢任何帮助：

```
 select WrappedQuery.*
            from (
                select
                  @rownum := @rownum +1 as rank,
                  prequery.user_id,
                  prequery.vote_count
                from
                  ( select @rownum := 0 ) sqlvars,
                    ( SELECT user_id, count(id) vote_count
                      from votes
                      where theme_id = '$currentTheme->id'
                      group by user_id
                      order by count(id) desc) prequery
                  ) WrappedQuery
            where WrappedQuery.user_id = '$me->id' 
```

我试图在预查询中设置一个 LIMIT 0, 1 但没有奏效。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:53:43.377

如果您正在寻找特定照片，则忽略按人分组，但特定元素，然后回滚该信息以获取用户。您对 sqlvars @rownum 的使用原则将保持不变。

让您的内部查询更像（猜测特定“Photo_ID”的列名也会在表中）

```
select
       @rownum := @rownum +1 as rank,
       prequery.user_id,
       prequery.photo_ID,
       prequery.vote_count
   from
      ( select 
              v.User_ID,
              v.Photo_ID, 
              count(*) as Vote_Count
           from 
              IsItStillTheVotesTable v
           group by 
              v.User_ID,
              v.Photo_ID
           order by 
              count(*) desc ) as prequery,
      ( select @rownum := 0 ) sqlvars
   HAVING
      prequery.user_id = '$me->id'
   LIMIT 
      0,1 
```

“预查询”将已经以正确的降序排列顺序返回记录。然后，您必须将 @rownum 应用于所有可能的行并应用 HAVING 子句。Where 子句通常会预先检查一条记录是否符合结果集的要求，如果没有，则在分配 @rownum 之前将其抛出。HAVING 子句允许记录应用@rownum，然后查看它以查找您的“user_ID”，如果没有，则将其丢弃。这样，您将获得用户和特定照片的特定组合的排名。

# html - GWT：Firefox 中 RichTextArea.getHTML() 上的附加 标签

> ID：14708532
> 
> 赞同：0
> 
> 时间：2013-02-05T13:20:50.310
> 
> 标签：html, firefox, gwt, rich-text-editor, richtextarea

我有一个`com.google.gwt.user.client.ui.RichTextArea`带有文本“ *Hello World* ”的文本。当我做：

**IE/铬**

```
String text = richTextArea.getText(); // I get "Hello World" - CORRECT
String value = richTextArea.getHTML();  // I get "Hello World" - CORRECT 
```

**火狐**

```
String text = richTextArea.getText(); // I get "Hello World" - CORRECT
String value = richTextArea.getHTML();  // I get "Hello World<br>" - INCORRECT 
```

有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:36:24.750

我已阅读此问题已被报告为错误。同时，我们可以用这样的代码来解决这个问题：

```
String value = richTextArea.getHTML();
if(value.lastIndexOf("<br>") == value.length()-4)
  value = value.substring(0, value.length()-4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:13:22.303

为此记录的 GWT 问题 - [http://code.google.com/p/google-web-toolkit/issues/detail?id=6798](http://code.google.com/p/google-web-toolkit/issues/detail?id=6798)

解决方法 - 清理 html 字符串 -

```
Class MyRichTextArea extends RichTextArea{
       public String getHTML() {
        return super.getHTML().equals("<br>") ? "" : super.getHTML();
    }
} 
```

这不完全是 GWT 特定的错误。

# php - MySQL 在给定时间段内找到前 x%

> ID：14708537
> 
> 赞同：0
> 
> 时间：2013-02-05T13:20:58.247
> 
> 标签：php, mysql, sql, percentile

我担心这会很快变得相当复杂，但我想知道显示按“人气”排序的最新“活动”的最佳方法是什么 - 这是“喜欢”或“观点”的衡量标准（甚至可能两者都有，如果可能的话 - 将喜欢计算为 2x 视图？）。

因此，如果我的数据库中充满了带有查看和/或喜欢的帖子，我希望能够显示过去 24 小时内最受欢迎的前 5% 的帖子。

我有 3 个表，一个用于帖子，两个用于喜欢和查看（1 行 = 1 个喜欢/查看）

表 1 = “帖子”

```
id | title | timestamp | etc. 
```

表 2 = "posts_likes"

```
post_id | user_id 
```

表 3 =“posts_views”

```
post_id | user_id 
```

使用 MySQL + PHP，运行此查询以按其整体计算的受欢迎程度对我的帖子进行排序的最佳方式是什么？

非常感谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:49:24.067

我会给你一些伪 sql 来展示我会使用的想法，你可以添加缺失的位并让它工作。它假设前 5% 是基于帖子的数量，但如果它是基于喜欢加浏览量的分数，那么调整应该是微不足道的。

```
SET @foo=0.05 * select count(*) from posts where (timestamp < today - 24 hours); 
PREPARE STMT FROM 'SELECT posts,sum(likes) * 2 + sum(views) as POPULAR FROM (tables joined) ORDER BY popular LIMIT ?';
EXECUTE STMT USING @foo; 
```

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:23:45.133

我无法对此进行测试，因为我现在没有可访问的 MySQL 服务器 - 但下面的查询应该让你开始：

```
SELECT p.id, p.title, ((COUNT(l.id) * 2) + COUNT(v.id)) AS popularity 
    FROM posts p 
        LEFT JOIN posts_likes l ON l.post_id = p.id 
        LEFT JOIN posts_views v ON v.post_id = p.id 
    WHERE p.timestamp > (UNIX_TIMESTAMP()-86400)
    GROUP BY p.id
    ORDER BY popularity DESC LIMIT :return_limit 
```

运行查询时，您需要传递一个参数`:return_limit`- 应该是`COUNT()`过去 24 小时内所有帖子的 5%。

# javascript - 在插件命令中获取 Inline CKEditor 的当前实例

> ID：14708540
> 
> 赞同：4
> 
> 时间：2013-02-05T13:21:03.820
> 
> 标签：javascript, jquery, ckeditor

我们最近离开了 tinymce，我们在那里创建了一个自定义函数，其中有一个工具栏按钮，一旦单击该按钮，就会在工具栏正上方滑动一个自定义 div，该按钮会在页面加载时附加到工具栏上。

现在的问题是在使用 Inline 版本时对 CKEditor 做同样的事情。由于任何时候都有十几个处于活动状态的实例，在单击自定义插件按钮后，如何获取当前弹出的内联 Ckeditor 的实例以便我可以使用 jQuery 附加到它？

使用最新版本的 CKEditor 4.x。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T16:21:18.467

很难想象你想要完成什么。无论如何，您可以观察哪个编辑器实例被聚焦（您最终可以将引用存储在某个变量中）：

```
CKEDITOR.on( 'instanceReady', function( event ) {
    event.editor.on( 'focus', function() {
        console.log( 'focused', this );
    });
}); 
```

毕竟，您还可以浏览编辑器实例，因为它们存储`CKEDITOR.instances`在全局命名空间的对象中。有了这个，您可以通过名称、id、任何东西（即以前与您的按钮相关联）找到您的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T13:51:23.263

我会这样做

```
 var ck_instance_name = false;
    for ( var ck_instance in CKEDITOR.instances ){
        if (CKEDITOR.instances[ck_instance].focusManager.hasFocus){
            ck_instance_name = ck_instance;
            return ck_instance_name;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T04:23:44.553

获取 ck 编辑器的当前实例。这是简单的代码

```
var currentEditor;    
 for(var id in CKEDITOR.instances) {
  CKEDITOR.instances[id].on('focus', function(e) {
    // Fill some global var here
    currentEditor = e.editor.name;
});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T04:16:20.733

使用上面接受的答案，我发现触发给定插件的编辑器实例的编辑器“名称”（众所周知）可以通过以下方式访问`this._.editor.name (using CKEditor v4.3)`

因此，您可以通过这种方式检索编辑器内容。

```
CKEDITOR.instances[this._.editor.name].getData(); 
```

# php - 如何输出正确的数据库行

> ID：14708544
> 
> 赞同：1
> 
> 时间：2013-02-05T13:21:14.967
> 
> 标签：php, mysql, sql, database

我的代码是这样的：

```
public function procAllianceAttRanking($limit="") {
  $q = "SELECT " . TB_PREFIX . "users.id userid, " . TB_PREFIX . "users.username username, " . TB_PREFIX . "users.alliance allyid, (

  SELECT SUM( " . TB_PREFIX . "vdata.pop ) 
  FROM " . TB_PREFIX . "vdata
  WHERE " . TB_PREFIX . "vdata.owner = userid
  )totalpop, (

  SELECT SUM( " . TB_PREFIX . "alidata.Aap ) 
  FROM " . TB_PREFIX . "alidata
  WHERE " . TB_PREFIX . "alidata.id = allyid
  )totalpoint, (

  SELECT COUNT( " . TB_PREFIX . "users.alliance ) 
  FROM " . TB_PREFIX . "users
  WHERE " . TB_PREFIX . "users.alliance = allyid
  )totalusers

  FROM " . TB_PREFIX . "users
  WHERE " . TB_PREFIX . "users.alliance > 0
  ORDER BY totalpoint DESC, allyid ASC $limit";
  return mysql_query($q);
} 
```

输出代码是这样的：

```
$sql = $ranking->procAllianceRanking();
$query = mysql_num_rows($sql);
if($query >= 1){ 
  while($row = mysql_fetch_array($sql)){
    if($row['allyid'] == $session->alliance) {
      echo "<tr class=\"hl\"><td class=\"ra fc\" >".$rank.".</td>";
    }else {
      echo "<tr class=\"hover\"><td class=\"ra \" >".$rank.".</td>";
    }
    echo "<td class=\"al \" ><a href=\"allianz.php?aid=".$row['allyid']."\">".$database->getAllianceName($row['allyid'])."</a></td>";

    echo "<td class=\"pla \" >".$row['totalusers']."</td>";
        echo "<td class=\"av \">".round($row['totalpop']/$row['totalusers'])."</td>";
      echo "<td class=\"po lc\">".$row['totalpop']."</td></tr>";
    $rank++;
  }
} 
```

代码的输出是：

```
Greatest Alliance
   Alliance    player       Ø   points
 1\. multii       3          4     11
 2\. multii       3          2      6
 3\. multii       3          2      6
 4\. myallianc    2          5      5
 5\. myallianc    2          1      2 
```

但这不正确！. 每个联盟的真实 travian 只是静态中的一行，所以我的代码输出是错误的。每个联盟的正确输出必须是这样的：

```
Greatest Alliance
   Alliance    player       Ø   points
 1\. multii       3          8    23
 2\. myallianc    2          6    7 
```

对于每个联盟必须只有一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:27:36.123

您的查询应该这样写：

```
SELECT 
  u.id userid, 
  u.username username, 
  u.alliance allyid, 
  SUM(v.pop )   AS totalpop, 
  SUM(a.Aap ) AS totalpoint,
  COUNT(ua.alliance ) AS totalusers
FROM users u
INNER JOIN vdata    v ON v.owner     = u.userid
INNER JOIN alidata  a ON a.id        = u.allyid
INNER JOIN users   ua ON ua.alliance = u.allyid
WHERE users.alliance > 0
GROUP BY u.id,
         u.username, 
         u.alliance 
ORDER BY u.totalpoint DESC, 
         u.allyid ASC ; 
```

**我在这个查询中做了什么：**

我`JOIN`编辑了表格`users`, `vdata`,`alidata`并`users`再次代替了您在问题中使用的这些相关子查询。**请注意：**我再次加入该表`users`以获取那些具有`alliance = u.allyid`但具有不同别名的用户。然后`GROUP BY`，在同一个查询中使用聚合函数。

如果您想包含那些未连接的数据，例如那些在其他表中没有条目的用户，您可能还需要使用`LEFT JOIN`而不是。`INNER JOIN`

* * *

## 更新 1

直接针对 MySQL 测试查询，因为您使用的是 WAMP。就像在以下步骤中一样：

*   **确保 WAMP 服务器正在运行：**

![在此处输入图像描述](../Images/b231515eea619a2e9725305f4519e667.png)

*   **从任务 par 打开 phpMyAdmin：**

![在此处输入图像描述](../Images/c77cbdcfc0bfc5418e9697359f62f82c.png)

*   **选择您正在使用的数据库：**

![在此处输入图像描述](../Images/cec3cba0cfc7d10dc21890fe8099bdf6.png)

*   **导航到 SQL 选项卡：**

![在此处输入图像描述](../Images/4dfd225709a5c7d272a1d5116769a1be.png)

*   **将您的查询粘贴到窗口中：**

![在此处输入图像描述](../Images/664e77b6618ec5110722a71928970de8.png)

*   **然后按下按钮 Go。**

* * *

## 更新 1

试试这个：

```
SELECT 
  u.id               AS userid, 
  u.username         AS username, 
  u.alliance         AS allyid, 
  SUM(v.pop)         AS totalpop, 
  SUM(a.Aap)         AS totalpoint,
  COUNT(ua.alliance) AS totalusers
FROM s1_users u
LEFT JOIN s1_vdata    v ON v.owner     = u.id
LEFT JOIN s1_alidata  a ON a.id        = u.alliance
LEFT JOIN s1_users   ua ON ua.alliance = u.alliance
WHERE u.alliance > 0 
GROUP BY u.id, 
         u.username, 
         u.alliance; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7aacd/4)

这会给你：

```
| USERID |    USERNAME | ALLYID | TOTALPOP | TOTALPOINT | TOTALUSERS |
----------------------------------------------------------------------
|      4 | Multihunter |      1 |       18 |          0 |          3 |
|      5 |     tester1 |      1 |       33 |          0 |          3 |
|      6 |     tester2 |      1 |       18 |          0 |          3 | 
```

**请注意：**`allyid`我在表中找不到列`s1_users`，因此我将表`s1_users`与`s1_alidata`列`alliance`和`s1_users`自身与相同的字段连接起来`alliance`。不确定这是否正确。

* * *

但是你的桌子设计有一个大问题。您的表格已[***标准化***](http://en.wikipedia.org/wiki/Database_normalization)。

例如，字段 、 和 似乎是每个`Tribe`用户的相关属性，因此您可以将它们移动到新表中，例如：`Access``Gold``Silver`

**`UsersFooProperties`：**

*   `PropertyId`,
*   `UserId`用户表的外键，
*   `Tribe`,
*   `Access`,
*   `Gold`,
*   `Silver`,
*   复合键( `ProertyId`, userid`)。

字段`B1`、`B2`和`B3`也是如此`B4`，将它们移动到新表中：

**`UsersBs`：**

*   `UserId`,
*   `B1`,
*   `B2`,
*   `B3`.

但是，如果这些`B`s 超过三个并且此属性还有其他属性`B`，则可以创建一个新表`Bs`：

**`Bes`**：

*   投标，
*   这里的其他属性...

然后：

**`UsersBs`：**

*   `UserId`,
*   `BID`,
*   复合键( `Userid`, `BID`)。

另一个大问题是这 38 个字段：`friend1`, ... , `friend19`, `friend1wait`, ..., `friend19wait`。

你必须为这样的朋友准备一张单独的桌子：

**`用户朋友：**

*   `UserId`用户表的外键，
*   `FriendID`,
*   `WaitOrNot`标志 0 或 1。

因为你只有一个列朋友，在这个列中你可以像这样插入这 38 列的所有朋友：

```
UserId FriendId WaitOrNot
  1       1         0
  1       2         1
  1       3         0
  ...
  ...
  1       19        1 
```

还要尽量避免将多个值存储为逗号分隔的字符串值，就像您在 column 中所做的那样`FQUEST`。为它创建一个新表，如下所示：

**`UsersFQUEST`：**

*   `UserID`,
*   `FQUESTId`.

这只是一个示例，说明如何重新设计您的一个表，`users`这些只是您在此表中的一个坏事示例，除了我提到的这些列之外，您还有其他列。您还必须对其他表执行相同的操作。

有关详细信息，请参阅以下内容：

*   [**^(从维基百科)**](http://en.wikipedia.org/wiki/Join_%28SQL%29)[**加入（SQL）**](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

*   [**SQL 连接的另一种可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

*   [**SQL Queries for Mere Mortals(R): A Hands-On Guide to Data Manipulation in SQL**](https://rads.stackoverflow.com/amzn/click/com/0201433362)，一本 SQL 基础知识的好书。

*   [**关系数据库理论中五种范式的简单指南**](http://www.bkent.net/Doc/simple5.htm)。

# eclipse - 使用 SWTbot API 从 Eclipse 中的复合材料中获取文本

> ID：14708545
> 
> 赞同：1
> 
> 时间：2013-02-05T13:21:38.427
> 
> 标签：eclipse, swt, swtbot

我正在尝试使用 SWTbot API 从 Eclipse 中的 Composite 获取文本。我有 Composite，其中包含主组，而主组包含子组。
我面临的问题是我无法在合成中获取文本，Eclipse 中有没有办法获取该文本。
我附上了我的合成图像，我想在其中获取所有文本，如名称、最小版本等。
请帮忙，它对我的​​项目来说是一种阻碍。 ![在此处输入图像描述](../Images/46e7c56ce608cfd03dff9a8fb4f09914.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:58:07.617

不是直接的，但你可以这样做：

```
public getContainedText(Control c) {
    return getContainedText(c, new ArrayList<String>());
}

private getContainedText(Control c, List<String> strings) {
    if (c instanceof Label) {
        strings.add(((Label) c).getText();
    } else if (c instanceof Text) {
        strings.add(((Text) c).getText();
    }
    // and so on for other control types you want to handle
    // and for text you are interested in.
    // Or as an approximation, use reflection to check if
    // c has getText method and call it, but this will miss
    // List, Combo, etc.

    if (c instanceof Composite) {
        for (Control child : ((Composite) c).getChildren()) {
            getContainedText(child, strings);
        }
    }
} 
```

# android - ALSA - 多线程和对音频硬件的“独占访问”

> ID：14708546
> 
> 赞同：1
> 
> 时间：2013-02-05T13:21:40.403
> 
> 标签：android, linux, audio, alsa

我对 ALSA 声音库有疑问。

让我首先声明，对像我这样的问题的通常回答是“使用 JACK”，并且这个答案没有帮助，因为我可能无法使用 JACK。我在 Android 设备上运行本机 linux 程序（*不是*NDK，而是真正的本机），根据我的收集，JACK 在 Android 上不起作用，因为某些 libc 和 posix 东西不兼容。

问题：

1) 我可以使用 2 个不同的线程，用于 a) 读取捕获的样本和 b) 播放样本吗？我见过的所有ALSA“全双工”示例都只是使用阻塞功能交替读取/写入声卡，这似乎不太好用，特别是如果你的程序应该做更多的事情。

2）据我了解，ALSA 混合不同应用程序播放的音频，就像 Windows 音频混合器一样。是否有可能获得对音频设备的独占访问权限，以保证我的应用程序是唯一一个播放音频的应用程序，而不会发生动态范围的混合和降级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:40:08.953

1.  您可以为两个播放/捕获设备使用两个线程（请参阅[文档](http://www.alsa-project.org/main/index.php/SMP_Design)）。

2.  `dmix`ALSA 仅在使用插件时才混合音频。默认情况下，这仅针对大多数桌面声卡配置。

    如果你打开一个`hw`或`plughw`设备，任何软件混音都会被绕过。

    （只要只播放一个流，数据不会以任何方式降级。）

# ios - 向下滚动时 UISearchBar 不随 Tableview 移动

> ID：14708547
> 
> 赞同：1
> 
> 时间：2013-02-05T13:21:41.927
> 
> 标签：ios, objective-c, xcode, uisearchbar

向下滚动时，UISearchBar 不会随 Tableview 一起移动。

我不想单独放置滚动条。它是一个要求。下面是代码。

```
customSearchBar = [[UISearchBar alloc] init];
customSearchBar.delegate = self;
[customSearchBar sizeToFit];
objListTable.tableHeaderView = customSearchBar; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:28:04.410

需要包含一个 View 并在其上添加 UISearchbar，或者提供 Header 视图的高度。默认情况下，它被视为 0.0。

如果你想使用

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

该方法分配一个高度为默认`UISeachBar`高度的视图。并添加`UISearchBar`它。

或者`UIView`在你的代码上添加一个默认`UISearchBar`高度添加`UISearchBar`它。它将按您的预期工作。

# html - 将服务器上的 html 文件显示到 iframe

> ID：14708550
> 
> 赞同：0
> 
> 时间：2013-02-05T13:21:47.023
> 
> 标签：html, iframe

我想在 iframe 中加载一个 html 文件。如果我在本地使用它

```
iframe id='index-page' src='index.html' 
```

它正在正确显示页面。该文件现在已上传到某个服务器上，并且我在服务器上拥有 html 页面的完整路径。每当我在 iframe 中提供完整路径时。html 文件正在桌面上下载，而 iframe 上不显示任何内容。如何显示服务器上该html文件的内容到iframe？

# symfony - 构建一个表单来处理从 Doctrine Loggable 扩展中恢复的实体

> ID：14708553
> 
> 赞同：3
> 
> 时间：2013-02-05T13:21:50.423
> 
> 标签：symfony, doctrine

我想构建一个特殊的表单来管理 LogEntry 实体（来自[Loggable Behavioral](http://gediminasm.org/article/loggable-behavioral-extension-for-doctrine2)）并处理实体恢复以允许管理员将某些实体恢复到旧版本。

我尝试使用下一个 FormType 生成一个表单，其中包含分配给该特定 LogEntry 的实体版本列表：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

use Gedmo\Loggable\Entity\Repository\LogEntryRepository as EntityRepository;

class LogItemVersionsType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // In that point, I would need the entity assigned to that specific LogEntry to be able to load the diferent versions
        $entity = $builder->getData();
        //var_dump($data);
        $builder
            ->add('version', 'entity', array(
                'class' => 'Gedmo\Loggable\Entity\LogEntry',
                'property' => 'version',
                'query_builder' => function(EntityRepository $er) {
                    return $er->getLogEntriesQuery($entity);
                },
            ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Gedmo\Loggable\Entity\LogEntry'
        ));
    }

    public function getName()
    {
        return 'zashost_zaspanelbundle_logitemversionstype';
    }
} 
```

但我有以下疑问：

*   LogEntry 没有检索记录对象的方法。我应该创建一个继承 LogEntry 的中间类来添加该方法吗？请注意，分配给 LogEntry 的实体是可变的，那么我应该将该方法放在 LogEntry 实体类中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:50:16.237

最后我做了什么，如果它可以帮助某人：

在表单类型中，我将实体设置为回滚作为 __construct 方法中的参数，因此我可以获得此特定对象必须构建表单的版本：

```
class LogItemVersionsType extends AbstractType
{
    protected $entity;

    public function __construct($entity = null)
    {
        $this->entity = $entity;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $entity = $this->entity;
        $builder
            ->add('version', 'entity', array(
                'mapped' => false,
                'class' => 'Gedmo\Loggable\Entity\LogEntry',
                'property' => 'version',
                'query_builder' => function(EntityRepository $er) use ($entity) {
                    return $er->createQueryBuilder('le')->where('le.objectId = ?1')->setParameter('1', $entity->getId());
                },
            ))
        ;
    }
} 
```

在控制器中，我得到关联的实体，然后传递给 FormType 构造函数，之后在 updateAction 中，我再次获得要传递给 revert 方法的对象和版本：

```
/**
 * LogItem controller.
 *
 */
class LogItemController extends Controller
{
    /**
     * Finds and displays a LogItem entity versions form.
     *
     */
    public function versionsAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('GedmoLoggable:LogEntry')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find HttpdHost entity.');
        }

        $loggedobject = $em->getRepository($entity->getObjectClass())->find($entity->getObjectId());

        $editForm = $this->createForm(new LogItemVersionsType($loggedobject), $entity);

        return $this->render('ZashostZaspanelBundle:LogItem:versions.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
        ));

    }

    /**
     * Edits an existing LogItem entity.
     *
     */
    public function updateAction(Request $request, $id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('GedmoLoggable:LogEntry')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find LogItem entity.');
        }

        $refobjrepo = $em->getRepository($entity->getObjectClass());

        $refobject = $refobjrepo->find($entity->getObjectId());

        $editForm = $this->createForm(new LogItemVersionsType($refobject), $entity);
        $editForm->bind($request);

        if ($editForm->isValid()) {
            $repo = $em->getRepository('GedmoLoggable:LogEntry');
            $values = $request->request->get('zashost_zaspanelbundle_logitemversionstype');

            $version = intval($values['version']);

            $repo->revert($refobject , $version);

            $em->persist($refobject);
            $em->flush();

            return $this->redirect($this->generateUrl('logs'));
        }

        return $this->render('ZashostZaspanelBundle:LogItem:versions.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
        ));
    }

} 
```

# java - 如果 JVM 崩溃，是否保证执行 Shutdownhook

> ID：14708559
> 
> 赞同：9
> 
> 时间：2013-02-05T13:22:01.363
> 
> 标签：java

> **可能的重复：**
> [当 Shutdown Hooks 坏掉时](https://stackoverflow.com/questions/8171646/when-shutdown-hooks-break-bad)

我想知道如果JVM崩溃，是否可以保证在场景中执行shutdownhook。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T13:23:32.427

没有。从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)：

> 在极少数情况下，虚拟机可能会中止，即在没有完全关闭的情况下停止运行。当虚拟机在外部终止时会发生这种情况，例如在 Unix 上使用 SIGKILL 信号或在 Microsoft Windows 上使用 TerminateProcess 调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。**如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。**

（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:37:57.557

但是，shutdownhook 会为 JVM 开始关闭之前需要完成的任何任务创建一个线程，如果机器本身关闭，则由 shutdownhook 创建的线程
将永远不会获得 CPU 周期来执行，我认为这里的shutdownhook 不会被执行.. .

# android - 将线程执行绑定到前台服务

> ID：14708568
> 
> 赞同：2
> 
> 时间：2013-02-05T13:22:47.153
> 
> 标签：android, multithreading, android-service

我想在后台线程中执行一些相当短的任务。但是，此任务非常敏感，必须尽可能可靠。

我的第一个想法是使用（同样短暂的）前台服务。我启动服务，在单独的线程中执行任务并在完成后停止它。听起来很简单，类似于 robospice 正在做的事情，但是 Service 的文档并没有说明关于杀死线程的任何内容。由于 Service 本身只是一个对象而不是线程，我想如何“告诉”系统某个线程属于该服务并且不应该被杀死？

*   仅在我的 Service 对象中保存对 Thread 对象的引用就足够了吗？
*   我应该使用 HandlerThread 并持有对 looper 的引用吗？（如 IntentService）
*   我还应该扩展 Thread 类并绑定到服务吗？:)

希望有人能给我一些指导。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:28:49.863

线程仅在整个过程中被杀死。Android 不能杀死任何特定的线程。Android 可以杀死整个进程及其所有线程。所以你不应该让 android 杀死你的应用程序，你的所有线程都会活着。

如果 Android 有前台活动或服务，或者有足够的资源让您的应用程序保持活动状态，它不会杀死您的应用程序。

# c++ - OpenCV 程序运行时错误

> ID：14708570
> 
> 赞同：0
> 
> 时间：2013-02-05T13:22:53.493
> 
> 标签：c++, c, opencv

我使用 OpenCV 2.4.1 制作了一个基本程序来打开 2 个窗口。该程序正在正确编译。当我尝试运行目标文件时，它不会打开窗口。下面给出源代码和编译命令。我哪里错了？

```
#include <cstdio>
#include "cv.h"
#include "highgui.h"

void changeColor(int pos)
{
cvSet(imgColor, CV_RGB(red, green, blue), NULL);    
}

int main()
{
    int red, blue, green;
    cvNamedWindow("DrawArea", 0);   //area for inputting digits
    cvNamedWindow("ColorSelector", 0);  //area for selecting colour of input

    cvCreateTrackbar("Red", "ColorSelector", &red, 255, &changeColor);
    cvCreateTrackbar("Green", "ColorSelector", &green, 255, &changeColor);
    cvCreateTrackbar("Blue", "ColorSelector", &blue, 255, &changeColor);

    cvSetMouseCallback(“Demo”,&on_mouse, 0 );
} 
```

用于编译的命令是：

```
gcc `pkg-config opencv --cflags` paint.cpp  -o paint `pkg-config opencv --libs` 
```

在运行目标文件时，将显示以下输出：

```
./paint
init done 
opengl support available 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T02:44:02.797

您的程序有几个问题。

首先`imgColor`没有声明，你需要：

```
IplImage* imgColor = cvCreateImage(cvSize(640, 480), IPL_DEPTH_8U, 3); 
```

另外，关于：

```
void changeColor(int pos)
{
    cvSet(imgColor, CV_RGB(red, green, blue), NULL);    
} 
```

您既不能访问`red`，也不能访问，`green`也不能访问`blue`这里，因为它们是 main 本地的。我认为这只是一个概念证明示例，让我们将这些声明为全局。

现在来看看为什么没有显示窗口。有两个原因：

1.  这听起来很明显，但是，main 正在返回，您的程序正在退出。正如 sgar91 已经指出的那样，您需要`cvWaitKey(0);`在 main 的末尾，这样您的程序就可以在那里处理 gui 事件。

2.  这听起来也很明显，但您实际上并没有指示 OpenCV 显示任何内容。您需要`cvShowImage("ColorSelector", imgColor);`，这将触发 OpenCV 中的窗口绘制事件；

以下快速而肮脏的示例工作正常，我可以选择窗口上显示的颜色。

```
#include <cstdio>
#include "cv.h"
#include "highgui.h"

int red, blue, green;
IplImage* imgColor = cvCreateImage(cvSize(640, 480), IPL_DEPTH_8U, 3);

void changeColor(int pos)
{
    cvSet(imgColor, CV_RGB(red, green, blue), NULL);   
    cvShowImage("ColorSelector", imgColor);
}

int main()
{
//     cvNamedWindow("DrawArea", 0);   //area for inputting digits
    cvNamedWindow("ColorSelector", 0);  //area for selecting colour of input

    cvShowImage("ColorSelector", imgColor);

    cvCreateTrackbar("Red", "ColorSelector", &red, 255, &changeColor);
    cvCreateTrackbar("Green", "ColorSelector", &green, 255, &changeColor);
    cvCreateTrackbar("Blue", "ColorSelector", &blue, 255, &changeColor);

//     cvSetMouseCallback("Demo", &on_mouse, 0);

    cvWaitKey(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:55:54.883

我试图简化您的问题，这对我有用：

```
#include <cstdio>
#include <cv.h>
#include <highgui.h>

using namespace cv;

void changeColor(int pos) {}

int main() {
    int value;

    cvNamedWindow("ColorSelector", 0);  //area for selecting colour of input
    cvCreateTrackbar("Red", "ColorSelector", &value, 255, &changeColor);

    char key = 0;
    Mat original = imread("/path/to/fileimage.png");
    while ((int)key != 27) {
        Mat temp = original.clone();
        for (int i = 0; i < temp.rows; ++i) {
            for (int j = 0; j < temp.cols; ++j) {
                temp.at<uchar>(i, j, 0) = value * (float)temp.at<uchar>(i, j, 0) / 255;
            }
        }

        imshow("ColorSelector", temp);
        key = waitKey(1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T00:41:41.473

**waitKey()**的参考手册指出：

> 注意：该函数是 HighGUI 中唯一可以获取和处理事件的方法，因此需要定期调用它来进行正常的事件处理，除非在负责事件处理的环境中使用 HighGUI。

因此，您肯定必须在某个时候调用它才能出现窗口并显示图像。

它还指出：

> 注意：该功能仅在至少创建了一个 HighGUI 窗口并且该窗口处于活动状态时才有效。如果有多个 HighGUI 窗口，它们中的任何一个都可以处于活动状态。

从您的示例中，似乎没有窗口处于活动状态，然后 waitKey(0) 什么也不做。正如在 Radford Parker 的回答中一样，您需要显示图像。

# c++ - OpenCV：在 RGB 图像上应用操作（拆分+合并）

> ID：14708572
> 
> 赞同：4
> 
> 时间：2013-02-05T13:23:03.173
> 
> 标签：c++, opencv

抱歉，如果这个问题太基本了，我是 OpenCV 的新手。

我想将直方图均衡应用于 RGB 图像。HE 仅适用于单通道，所以我认为我必须将图像分成 3 个不同的通道，将 HE 应用于每个通道，然后将它们合并在一起以形成输出均衡图像。

所以我就这么做了，这是我真正相信应该有效的程序：

```
#include <iostream>
#include <stdio.h>
#include <cv.h>
#include <highgui.h>

int main(int argc, char * argv[])
{
IplImage* img = cvLoadImage("/Users/Documents/red.jpg");  //Load image file
cvNamedWindow("Trans-in", CV_WINDOW_AUTOSIZE );     //Create input window
cvNamedWindow("Trans-out", CV_WINDOW_AUTOSIZE  );   //Create output window

cvShowImage("Trans-in", img );  //Show input image in input window

//Create space for outputs rgb and its separate channels, r, g and b
IplImage* img0 = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 3);    //rgb
IplImage* r = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 1);    //r
IplImage* g = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 1);    //g
IplImage* b = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 1);    //b

//cvZero(r);
//cvZero(g);
//cvZero(b);

cvSplit(img, b, g, r, NULL);       //OpenCV likes it in BGR format

cvEqualizeHist( img, r );    //equalise r
cvEqualizeHist( img, g );    //equalise g
cvEqualizeHist( img, b );    //equalise b

cvMerge(b, g, r, NULL, img0);  //merge all separate channels together to output image rgb

//cvReleaseImage(&r);
//cvReleaseImage(&g);
//cvReleaseImage(&b);

cvShowImage("Trans-out", img0); //Show output image in output window

cvWaitKey(0);
cvReleaseImage( &img);
cvReleaseImage( &img0);

cvDestroyWindow( "Trans-in");
cvDestroyWindow( "Trans-out");

return 0;
} 
```

如果//评论有点烦人，我深表歉意，但我猜它显示了我的“推理”。直到我点击“运行”按钮，Xcode 才抱怨。它基本上崩溃了（输入图像显示，但不是输出图像）。

加上底部的错误消息：

```
OpenCV Error: Assertion failed (CV_ARE_SIZES_EQ(src, dst) && CV_ARE_TYPES_EQ(src, dst) && CV_MAT_TYPE(src->type) == CV_8UC1) in cvEqualizeHist, file /opt/local/var/macports/build/_Volumes_work_mports_dports_graphics_opencv/opencv/work/OpenCV-2.4.3/modules/imgproc/src/histogram.cpp, line 2414 terminate called throwing an exception 
```

我不知道这意味着什么或下一步该做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:32:03.897

您`cvEqualizeHist`在以下几行中错误地使用了该函数：

```
cvEqualizeHist( img, r );    //equalise r
cvEqualizeHist( img, g );    //equalise g
cvEqualizeHist( img, b );    //equalise b 
```

`img`是 3 通道图像`r`，而`g`和`b`是单通道图像。`cvEqualizeHist`不适用于 3 通道图像。

您必须执行以下操作：

```
cvEqualizeHist( r, r );    //equalise r
cvEqualizeHist( g, g );    //equalise g
cvEqualizeHist( b, b );    //equalise b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:04:12.397

为了对 RGB 图像进行直方图均衡...将其转换为 HSV 图像，然后均衡 V 平面...

1.  将 RGB 转换为 HSV
2.  将 HSV 拆分为 H、S 和 V
3.  均衡V
4.  合并 H、S 和 V

    ```
    vector<Mat> hsv_planes;
    cvtColor(image,image,CV_BGR2HSV);
    split(image,hsv_planes);
    equalizeHist(hsv_planes[2],hsv_planes[2]);
    merge(hsv_planes,image);
    cvtColor(image,image,CV_HSV2BGR); 
    ```

# c# - 比较 DataGridView 的单元格值与字符串

> ID：14708574
> 
> 赞同：0
> 
> 时间：2013-02-05T13:23:08.127
> 
> 标签：c#, checkbox

我用数据库中的值填充 dvgPeople。插入/更新/删除/选择命令工作正常。我想做的是用所选行的值填充表单上的一些组件。我可以填写文本框，但无法处理复选框。这是代码。

```
if (dgvPeople.CurrentRow.Cells[6].Value == "1")
{
    chkGerman.Checked = true;
}
else 
{
    chkGerman.Checked = false;
} 
```

当我调试这种奇怪的情况时：

![在此处输入图像描述](../Images/ba6bc4a1d38e1b4f9b06fe4217b0cd4e.png)

即使 dgvPeople.CurrentRow.Cells[6].Value = 1，它仍然是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:28:43.577

值具有类型对象

```
Value.ToString().Equals("1") 
```

将其作为字符串进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:29:35.883

您尝试根据字符串对象检查布尔值。

这将起作用：

```
if (dgvPeople.CurrentRow.Cells[6].Value.ToString() == "1")
{
    chkGerman.Checked = true;
}
else
{
    chkGerman.Checked = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:31:07.333

你试过了吗：

```
if (dgvPeople.CurrentRow.Cells[6].Value.ToString() == "1") 
```

# c++ - VS2010 中 C++ 代码中花括号的自动对齐

> ID：14708577
> 
> 赞同：0
> 
> 时间：2013-02-05T13:23:09.097
> 
> 标签：c++, visual-studio-2010, curly-braces

我如何教 Visual Studio 2010 格式化

```
 if(f) {

 } 
```

作为

```
if(f) 
{

} 
```

?

注1：我找到了一些C#的解决方案（即去工具->选项->文本编辑器->任何语言->格式->新行）。但是，我在那里找不到 C++ 代码的选项，因为我什至没有看到 ...->Text Editor->C/C++->Formatting->New Lines。

注意2：如果我格式化源代码，VS2010 目前也不会将后者对齐更改为前者。

# java - 动态向表格查看器添加内容

> ID：14708579
> 
> 赞同：0
> 
> 时间：2013-02-05T13:23:23.980
> 
> 标签：java, swt, tableviewer

我正在实现这样的表格查看器

```
folderAssociationTable = componentsRenderer.createTableWidget(container, SWT.BORDER | SWT.MULTI  | SWT.FULL_SELECTION, 2, true);

        folderAssociationTable.addListener(SWT.MeasureItem, new Listener() {
            public void handleEvent(Event event) {
                event.height = 20;
            }
        });
        tableViewer  = new TableViewer(folderAssociationTable);
        tableViewer.getTable().setHeaderVisible(true);
        tableViewer.getTable().setLinesVisible(true);
        tableViewer.setContentProvider(new ArrayContentProvider());

        TableColumn column = new TableColumn(tableViewer.getTable(), SWT.NONE);
        column.setText("CheckBox");
        column.setWidth(100);
        checkBoxColumn = new TableViewerColumn(tableViewer, column);

        column = new TableColumn(tableViewer.getTable(), SWT.NONE);
        column.setText("Source Folder");
        column.setWidth(200);
        sourceFolderColumn = new TableViewerColumn(tableViewer, column);

        column = new TableColumn(tableViewer.getTable(), SWT.NONE);
        column.setText("Target Folder");
        column.setWidth(200);
        targetFolderColumn = new TableViewerColumn(tableViewer, column); 
```

现在我想向这个表添加内容，第一列我想添加复选框，另外两列想在 for 循环中动态添加字符串值，我如何将这些内容添加到表查看器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:27:30.593

首先，如果您只想显示您设置的复选框、字符串和图像，则不需要`TableViewer`. 改用a `Table`！如果您需要更复杂的东西，例如显示任意 Java 对象，查看器会很有用。

1.  如果要添加复选框，请使用[`CheckboxTableViewer`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/CheckboxTableViewer.html)和[`ICheckStateProvider`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ICheckStateProvider.html)。您需要创建具有`SWT.CHECK`样式的表格。
2.  要添加值，您需要为查看器设置一些输入。在 的情况下`ArrayContentProvider`，这只是一个数组或集合：

    ```
    // ModelObject is whatever type of objects you want to show. Maybe just String...
    List<ModelObject> inputList = new ArrayList<ModelObject>();
    // build the list
    while (...) {
        ModelObject newObject = ...
        inputList.add(newObject);
    }

    tableViewer.setInput(inputList); 
    ```

    如果您稍后需要更改列表，请调用`tableViewer.refresh()`。

其余的，请参阅[Vogella 教程](http://www.vogella.com/articles/EclipseJFaceTable/article.html)。

# c# - 使用错误提供程序处理多个错误

> ID：14708582
> 
> 赞同：1
> 
> 时间：2013-02-05T13:23:40.673
> 
> 标签：c#, error-handling

我可以使用一个错误提供程序处理（例如）6 个文本框的多个验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:16:22.700

如果每个文本框为空，示例将给它一个错误，并指定错误是针对哪个文本框。

*用开关编辑

```
private void Form1_Load(object sender, EventArgs e)
{
    foreach (TextBox textBox in Controls) { textBox.Validating += textBox1_Validating; }
}

private void textBox1_Validating(object sender, CancelEventArgs e)
{
    ErrorProvider errProv = new ErrorProvider();
    TextBox txtSender = (TextBox)sender;
    string content = txtSender.Text;
    string error = "";

    switch (txtSender.Name)
    {
        case "textBox1":
            error = "error textbox1";
            break;
        case "textBox2":
            error = "error textbox2";
            break;
        case "textBox3":
            error = "error textbox3";
            break;
        case "textBox4":
            error = "error textbox4";
            break;
        case "textBox5":
            error = "error textbox5";
            break;
        case "textBox6":
            error = "error textbox6";
            break;
        case "textBox7":
            error = "error textbox7";
            break;
        case "textBox8":
            error = "error textbox8";
            break;
    }

    if (content == "") { errProv.SetError(txtSender, error); }
} 
```

# android - 哪些硬件支持眼睛和嘴巴检测？

> ID：14708583
> 
> 赞同：4
> 
> 时间：2013-02-05T13:23:42.840
> 
> 标签：android, android-camera, face-detection, face-recognition

我正在开发一个可以指定为仅在特定硬件上运行的 Android 应用程序（不担心在每个设备上工作）；这个应用程序将具有一些我希望使用的面部识别功能`leftEye`，`rightEye`以及课程中`mouth`的字段`android.hardware.Camera.Face`。

我知道根据文档，这些字段是可选的（`This is an optional field, may not be supported on all devices.`）；但我在 Galaxy Nexus、Nexus 4、nexus 7 和 Nexus 10 上进行了测试，但没有一个支持这些功能。

所以我的问题是：是否有任何硬件可以真正适用于这些领域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:28:48.317

三星GT-I9300可以检测到眼睛，但是不能检测到嘴。

# qt - 如何根据上下文替换 Qt 应用程序运行时中的 UI 标签/工具提示？

> ID：14708584
> 
> 赞同：0
> 
> 时间：2013-02-05T13:23:47.963
> 
> 标签：qt, macros, qtgui, qtranslate, string-externalization

我们正在开发一个 Qt 桌面应用程序。应用程序可以在每个选项卡中打开多个文件，并且每个选项卡（文件）都有自己的上下文。用户可以打开多个文件并在这些选项卡之间切换。

例如：就像一个选项卡是卡车管理，工具栏中的操作（add_Vehicle）应该显示工具提示“添加卡车”，如果另一个选项卡是汽车管理，相同的操作应该显示工具提示“添加汽车”。

有很多这样的事情：

1.  如果我删除卡车（即卡车管理选项卡中的车辆），它应该显示消息框“卡车已成功删除”。如果汽车（即汽车管理选项卡中的车辆）被删除，则应显示“汽车已成功删除”消息。

2.  有一些对话框通过 QtDesinger 直接将文本设置为 QLabels。

**这个问题是怎么产生的？**

以前该应用程序仅支持卡车管理，现在我们正在同一应用程序中添加对汽车管理的支持。所有消息/UI 标签/工具提示都使用“卡车”。现在我们要根据打开的标签（文件）来改变它。

**可行的想法解决方案：（**不在运行时工作）

所有的 UILabels/ToolTips/Messages 都是可翻译的[即用 QObject::tr(..) 编写的]。我们考虑根据选项卡上下文安装 QTranslator，它会自动更改所有位置的文本。安装 QTranslator 运行时不起作用。

还有另一种方法吗？或者任何指针/提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:46:51.133

我没有看到问题，因为标签/工具提示等中的文本很容易在 Qt 中更改。只需使用类方法中的适当文本调用*QLabel::setText*和*QToolTip::showText*方法，即：

```
myTruck::myTruck(QWidget *parent) :
   QObject(parent)
{
   /* do whatever you do in your class constructor */
   <...>
   myLabel->setText("Truck");
   <...>
}

myTruck::~myTruck() :
   QObject(parent)
{
   /* do whatever you do in your class destructor */
   <...>
   myTooltip->showText("Truck deleted successfully");
   <...>
} 
```

*myLabel*和*myTooltip*可能是*MainWindow*的成员，如果您无法直接访问它们（私有成员），可能需要使用信号和插槽机制来更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:47:50.277

文件/选项卡可能知道它管理的内容（“卡车”、“汽车”、“飞机”），因此它需要一个 id 来进行区分

对于工具提示：订阅“当前”文件/选项卡的更改。A`QTabWidget`有一个`void currentChanged(int index)`可以订阅的信号。当当前文件/选项卡更改时（因为打开了新文件并获得焦点，或者因为用户切换到另一个文件/选项卡），从新的当前文件/选项卡中检索 id 并适当地设置工具提示的文本。

对于消息框：当您想显示“...已成功删除”的消息框时，检索当前文件/选项卡的 id 并使用它来构造您需要显示的消息。

# php - 几乎相同的代码，但输出不同，为什么？

> ID：14708585
> 
> 赞同：2
> 
> 时间：2013-02-05T13:23:50.780
> 
> 标签：php, utf-8, fgetc

我正在使用 UTF-8 编码的文本文件，但找不到合适的解决方案...

在我无法解决字符串问题后，我现在正在尝试 fgetc()，但它也不起作用。这段代码：

```
$file = fopen("t1.txt","r+");
while (! feof ($file))
{
  $c= fgetc($file);
  echo $c;
  //echo "\t";
}
fclose($file); 
```

工作正常，并输出：**abcd абвқ efg** 但如果我取消注释 //echo "\t"，它不起作用，它输出： � � � abcd � � � � � � � � � efg

为什么？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:54:45.793

您一次读取文件*字节*。

例如，字符`б`编码为`0xD0 0xB1`UTF-8 中的字节。制表符是`0x09`.

所以没有制表符，你先写`0xD0`, 然后`0xB1`，结果`0xD0 0xB1`是有效的 UTF-8。

使用制表符，您可以`0x09`在每个字节之间写入 - 使其成为：`0xD0 0x09 0xB1`. `0xD0`后面的`0x09`不是有效的UTF-8，所以浏览器会渲染替换字符来处理。

您需要对此更加复杂；这应该工作：

```
$file = fopen("t1.txt","r+");
while (! feof ($file))
{
  $c = fgetc($file);
  $val = ord($c);

  //UTF-8 Lead Byte
  if( $val & 0x80 ) {
    $continuationByteCount = 0;
    if( ($val & 0xF8) == 0xF0) $continuationByteCount = 3;
    else if( ($val & 0xF0) == 0xE0) $continuationByteCount = 2;
    else if( ($val & 0xE0) == 0xC0) $continuationByteCount = 1;

    echo $c;

    while( $continuationByteCount-- ) {
        echo fgetc($file);
    }

  }
  else { //Single-byte UTF-8 unit... I.E. ASCII
      echo $c;
  }
  echo "\t";
}

fclose($file); 
```

一次读取所有内容并拆分为每个项目为 1 个字符（1-4 个字节）的数组：

```
$chars = preg_split( '//u', file_get_contents("t1.txt"), -1, PREG_SPLIT_NO_EMPTY );

foreach( $chars as $char ) {
    echo $char;
    echo "\t";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:30:10.537

我认为这可能是浏览器的编码识别问题。你可以试试

```
<?php
header('Content-type: text/html; charset=utf-8');
?> 
```

或者设置元标记

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

# sql - 使用 PIVOT 选择列值作为列

> ID：14708587
> 
> 赞同：3
> 
> 时间：2013-02-05T13:23:55.653
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有一个场景，我希望将每个唯一列值 (Val2) 的列值 (Val1) 显示为单独的列，最多 10 列。

```
CREATE TABLE #TEMP1 (Val1 NVARCHAR(4), Val2 NVARCHAR(10));

insert into #Temp1 Values ('S01','00731')
insert into #Temp1 Values ('S02','00731')
insert into #Temp1 Values ('S03','00731')
insert into #Temp1 Values ('S04','00731')
insert into #Temp1 Values ('S05','00731')
insert into #Temp1 Values ('S06','00731')
insert into #Temp1 Values ('S07','00731')
insert into #Temp1 Values ('S08','00731')
insert into #Temp1 Values ('S09','00731')
insert into #Temp1 Values ('S07','00731')
insert into #Temp1 Values ('S04','00741')
insert into #Temp1 Values ('S01','00746')
insert into #Temp1 Values ('S01','00770')
insert into #Temp1 Values ('S01','00771')
insert into #Temp1 Values ('S02','00771')

Val1    Val2
--------------------------
S01     00731
S02     00731
S03     00731
S04     00731
S05     00731
S06     00731
S07     00731
S08     00731
S09     00731
S07     00731
S04     00741
S01     00746
S01     00770
S01     00771
S02     00771 
```

然后，我使用一个数据透视列来显示每个唯一的 Val2 值，并使用最多 10 个 Val1 值作为列。

```
SELECT [Val2],
c1, c2, c3, c4, c5, c6, c7, c8, c9, c10
FROM
(SELECT Val1, Val2
FROM         #TEMP1) AS PivotTable
PIVOT
(
MAX([PivotTable].[Val1])
FOR
Val1
IN
(C1, c2, c3, c4, c5, c6, c7, c8, c9, c10)
) AS PivotTable; 
```

我希望得到如下结果：

```
Val2    c1  c2  c3  c4  c5  c6  c7  c8  c9  c10
--------------------------------------------------------------------------------------
00731  S01  S02 S03 S04 S05 S06 S07 S08 S09 S07 
00741  S04  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00746  S01  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00770  S01  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00771  S01  S02 NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL 
```

但我实际上只是得到了列的所有 NULL 值：

```
Val2    c1  c2  c3  c4  c5  c6  c7  c8  c9  c10
--------------------------------------------------------------------------------------
00731  NULL NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00741  NULL NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00746  NULL NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00770  NULL NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
00771  NULL NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:07:28.927

您的要求并不完全清楚，但看起来您正在尝试创建一个名为的新列`c`，然后`row_number()`与它关联 - `c1, c2 c3, etc`。

如果您要在子查询中使用以下内容：

```
SELECT Val1, Val2,
  'C'+ cast(row_number() over(partition by Val2 
                              order by val1) as varchar(10)) col
FROM TEMP1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/eebf4/13)

你会得到结果：

```
| VAL1 |  VAL2 | COL |
----------------------
|  S01 | 00731 |  C1 |
|  S02 | 00731 |  C2 |
|  S03 | 00731 |  C3 |
|  S04 | 00731 |  C4 |
|  S05 | 00731 |  C5 |
|  S06 | 00731 |  C6 |
|  S07 | 00731 |  C7 |
|  S07 | 00731 |  C8 |
|  S08 | 00731 |  C9 |
|  S09 | 00731 | C10 |
|  S04 | 00741 |  C1 |
|  S01 | 00746 |  C1 |
|  S01 | 00770 |  C1 |
|  S01 | 00771 |  C1 |
|  S02 | 00771 |  C2 | 
```

这似乎是您想要的结果`PIVOT`。然后，您将`PIVOT`使用：

```
SELECT Val2,
   c1, c2, c3, c4, c5, c6, c7, c8, c9, c10
FROM
(
  SELECT Val1, Val2,
    'C'+ cast(row_number() over(partition by Val2 
                                order by val1) as varchar(10)) col
  FROM TEMP1
) src
PIVOT
(
  MAX(Val1)
  FOR col IN (C1, C2, C3, C4, C5, C6, C7, C8, C9, C10)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/eebf4/15)。你的最终结果是：

```
|  VAL2 |  C1 |     C2 |     C3 |     C4 |     C5 |     C6 |     C7 |     C8 |     C9 |    C10 |
------------------------------------------------------------------------------------------------
| 00731 | S01 |    S02 |    S03 |    S04 |    S05 |    S06 |    S07 |    S07 |    S08 |    S09 |
| 00741 | S04 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00746 | S01 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00770 | S01 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00771 | S01 |    S02 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | 
```

注意：我的结果与您要求的结果略有不同，因为我正在执行`ORDER BY val1`导致`S07`值组合在一起的操作。

除非您请求，否则数据库中的数据没有顺序，因此无法保证其中一个`S07`值会显示为`C10`. 您可以使用以下方法获取结果，但**不能保证**结果始终按正确的顺序排列：

```
SELECT Val2,
  c1, c2, c3, c4, c5, c6, c7, c8, c9, c10
FROM
(
  SELECT Val1, Val2,
    'C'+ cast(row_number() over(partition by Val2 
                                order by (select 1)) as varchar(10)) col
  FROM TEMP1
) src
PIVOT
(
  MAX(Val1)
  FOR col IN (C1, C2, C3, C4, C5, C6, C7, C8, C9, C10)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/eebf4/16)。使用`order by (select 1)`改变数据的顺序，但它不保证它总是按那个顺序。结果是：

```
|  VAL2 |  C1 |     C2 |     C3 |     C4 |     C5 |     C6 |     C7 |     C8 |     C9 |    C10 |
------------------------------------------------------------------------------------------------
| 00731 | S01 |    S02 |    S03 |    S04 |    S05 |    S06 |    S07 |    S08 |    S09 |    S07 |
| 00741 | S04 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00746 | S01 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00770 | S01 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) |
| 00771 | S01 |    S02 | (null) | (null) | (null) | (null) | (null) | (null) | (null) | (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:07:55.720

您可以尝试使用相关子查询创建交叉表或数据透视表的标准方法，并使用排名函数（在 CTE 中）来确定将值放入哪一列：

```
;with cte as (
    select Val1
        , Val2
        , row_number() over (partition by Val2 order by Val1) as col
        --, row_number() over (partition by Val2 order by Id) as col -- Use this if you have an identity
    from #TEMP1
    --from (select distinct * from #TEMP1) as t -- Use this to rank distinct entries
)
select c.Val2
    , (select Val1 from cte where Val2 = c.Val2 and col = 1) as c1
    , (select Val1 from cte where Val2 = c.Val2 and col = 2) as c2
    , (select Val1 from cte where Val2 = c.Val2 and col = 3) as c3
    , (select Val1 from cte where Val2 = c.Val2 and col = 4) as c4
    , (select Val1 from cte where Val2 = c.Val2 and col = 5) as c5
    , (select Val1 from cte where Val2 = c.Val2 and col = 6) as c6
    , (select Val1 from cte where Val2 = c.Val2 and col = 7) as c7
    , (select Val1 from cte where Val2 = c.Val2 and col = 8) as c8
    , (select Val1 from cte where Val2 = c.Val2 and col = 9) as c9
    , (select Val1 from cte where Val2 = c.Val2 and col = 10) as c10
from cte as c
group by c.Val2
order by c.Val2 
```

请注意，有几种方法可以确定`Val2`属于哪一列，我在 CTE 中提出了几种可能性（一些评论）。但是，您当前所需的输出是不可能达到的，因为目前无法判断它`S07`应该在第十列中。如果您想要的话，也许在临时表中添加一个身份将捕获事件的顺序。我也在 CTE 中包含了这种可能性。

# multithreading - 每个进程不止一个堆栈？

> ID：14708588
> 
> 赞同：2
> 
> 时间：2013-02-05T13:23:56.927
> 
> 标签：multithreading, process, stack

我找到了这个链接：

[关于线程和进程堆栈的一个快速问题](https://stackoverflow.com/questions/2283834/one-quick-question-about-stack-of-thread-and-process)

我理解为什么线程有单独的堆栈，但我读到该进程可能有两个堆栈。为什么是这样？可能是因为我们计算了进程堆栈+线程堆栈吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:34:44.440

那里有解释：

*   一个进程可以有至少一个线程，但它可以有更多
*   一个线程只有一个栈

所以，如果你说，“一个进程可以有两个堆栈”是部分正确的。**进程本身没有**任何堆栈，但它的线程**有**- 与线程数一样多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T01:13:23.613

现代操作系统为每个用户级进程分配称为**内核中断堆栈的东西。**通过用户级进程，我指的是任何未在**kernel-mode**中运行的进程。这使得在处理处理器中断后更容易切换到另一个进程。假设您的处理器正在运行需要对内核进行系统调用的**进程 x**，然后发生了处理器中断，这使得处理器运行该中断的处理程序。在这个处理程序完成后，操作系统可以选择运行进程**y**而不是继续进程**x**。要支持这种类型的开关，您需要这个内核中断堆栈。我们保存在其中**整个执行环境供以后使用。**进程**y**完成后，**x 可以继续进行系统调用而不会出现任何问题**。请注意，如果您的用户级进程没有对内核级的任何系统调用，那么您将有一个**空的内核中断堆栈**。这可能是您正在谈论的第二个堆栈。 [两个堆栈图](https://i.stack.imgur.com/ZvdNv.png)

这被多次使用，不仅用于处理处理器中断。有时进程准备好并**等待轮到它继续执行，然后我们将它的状态保存在它的内核中断堆栈中，当我们开始执行时，我们获取状态并将其放入寄存器中**。此外，如果进程请求完成 I/O 操作，则该进程将暂停，直到 I/O 事件完成，之后，它继续以上述相同的过程执行。

由于内存限制，**UNIX**开始时所有进程的内核中断堆栈都很少，而不是每个进程的内核中断堆栈。然而，在内存变得更便宜之后，现在更容易为每个进程拥有内核堆栈。

有关它的更多信息，您可以查看“操作系统：原理与实践第 2 版”中的第 2 章内核抽象和第 4 章并发和线程

# php - 浏览器窗口中的 PHP 回调

> ID：14708589
> 
> 赞同：0
> 
> 时间：2013-02-05T13:23:57.683
> 
> 标签：php, browser, callback, console, window

我正在尝试了解 PHP 回调。我正在使用来自[phpriot.com](http://www.phpriot.com/articles/php-callbacks)的示例。

```
---------------this code-----------------------------
 // this function simulates downloading data from a site
    function downloadFromSites($sites, $callback = null)
    {
        $ret = array();

        foreach ($sites as $site) {
            sleep(2);

            $data = 'downloaded data here';

            // check if the callback is valid
            if (is_callable($callback)) {
                // callback is valid - call it with given arguments
                call_user_func($callback, $site, $data);
            }

            // write the data for this site to return array
            $ret[] = array(
                'site' => $site,
                'data' => $data
            );
        }

        return $ret;
    }

    // define a fictional class used for the callback
    class MyClass
    {
        // this is the callback method
        public static function downloadComplete($site, $data)
        {
            echo sprintf("Finished downloading from %s\n", $site);
        }
    }

    // imaginary list of sites to download from
    $sites = array(
        'http://www.example1.com',
        'http://www.example2.com'
        // more sites...
    );

    // start downloading and store the return data
    downloadFromSites($sites, array('MyClass', 'downloadComplete'));

    // we don't need to loop over the return data
    // now since the callback handles that instead 
```

当您运行此代码时，您将看到“完成下载”消息显示为每个站点都已完成，而不是最后全部。

* * *

因此，当我在控制台中运行此代码时，它工作正常：每 2 秒出现一个新行，但在浏览器窗口中我必须等到代码完成执行，然后才能看到结果。

所以问题是，为什么它在控制台中工作，而不是在浏览器窗口中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:30:44.323

这可能是因为输出缓冲。

输出缓冲是 PHP 中的一种机制，它将输出保存在内存中，直到稍后调用`flush`缓冲区（当脚本关闭时也会自动发生）。

输出缓冲允许您在脚本内打印内容，并在打印内容后提供对 HTTP 标头的更改。通常，一旦您打印内容并将其发送给 apache（后者又将其发送回客户端），您就不能再修改 HTTP 标头了。通过输出缓冲，PHP 会将此输出存储在内存中，并且在您告诉它之前不会将其交给 apache。

您应该能够通过以下四种方式之一使其工作：

*   `ob_end_clean`在 PHP 脚本的最顶部禁用输出缓冲
*   `output_buffering`在 php.ini 中禁用
*   在 php.ini 中启用`implicit_flush`（不推荐，因为它`output_buffering`毫无意义
*   `ob_flush`在您的`print`/`echo`陈述之后致电

*注意：*输出缓冲还有其他非常合法的用途，例如模板 - 但这在这里并不重要。

**话虽如此**

这不一定适用于所有人。默认情况下，某些浏览器和其他配置的浏览器在连接关闭并收到所有 HTML 内容之前不会开始加载页面。如果您希望它现在可以在大多数浏览器上工作 - 您最好将 AJAX 回调回您的服务器。

**编辑：**要判断是否`output_buffering`打开，一个简单的调用`print ob_get_level()`就会告诉你。如果打印出的数字 > 0，`output_buffering`那就是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:37:11.630

All scripts ran in console come up in real time. This is why it works in the console and not in browser. You have a few options-flush often enough(not a really good solution as most browsers won't be happy about this), use ob_start and on from there or use ajax which is your safest bet I think.

# sql - 删除不满足参照完整性的行

> ID：14708602
> 
> 赞同：0
> 
> 时间：2013-02-05T13:24:36.643
> 
> 标签：sql, sql-server, database

我无法在 Google 上找到这个。

我正在从表中删除行，而不检查是否由于参照完整性而无法删除某些行。我的想法是删除那些满足它的人。我使用的正是查询 "delete from member_companies" 。

但是，如果发现引用完整性失败的行，我正在使用的 SQL Server 2008 R2 会取消所有删除。

是否有一些指令我可以用来指示它删除可能被删除的行？还是我错过了故事的其他方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:07:42.577

使用 CTE 查找要删除的行，然后将其删除。就像是;

```
;WITH RowsToDelete AS (
 SELECT comp_id from member_companies mc 
 LEFT JOIN users u on u.comp_id = mc.comp_id 
 WHERE u.comp_id IS NULL
) 
DELETE 
  FROM member_companies 
 WHERE comp_id IN 
(Select comp_id FROM RowsToDelete) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:16:20.957

当对约束使用“WITH NOCHECK”选项时，或者您使用了批量插入或在创建（引用）约束之前，必须加载不匹配引用完整性的行。除了尝试重新应用“WITH NOCHECK”选项（可能有效）之外，您可能只需要删除在其他表中具有匹配行的那些行，例如：

从存在的成员公司 D 中删除 D（从 D.Comany_ID = C.ID 的公司 C 中选择 NULL）

这可以扩展到多个相关表。而且，不，它不应该很慢，因为 EXISTS / NOT EXISTS 应该分别转换为半连接或反半连接（即不是相关的子查询）并且比游标更好。

在 AdventureWorks 示例数据库上使用的示例：

--此示例删除那些不满足约束的行，以反转它删除 NOT。begin tran delete D from Person.StateProvince D where NOT EXISTS（从 Person.Address C 选择 NULL WHERE D.StateProvinceID = C.StateProvinceID）并且不存在（从 Sales.SalesTaxRate C 选择 NULL WHERE D.StateProvinceID = C.StateProvinceID）回滚

# python - 在 Python 中遍历 XML 树

> ID：14708604
> 
> 赞同：0
> 
> 时间：2013-02-05T13:24:40.170
> 
> 标签：python, xml

第二次尝试。

所以使用

```
>>> for node in tree.iter():
...     print(node.tag)
... 
```

我得到以下。

```
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}DCinemaSecurityMessage
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}AuthenticatedPublic
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}MessageId
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}MessageType
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}AnnotationText
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}IssueDate
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}Signer
{http://www.w3.org/2000/09/xmldsig#}X509IssuerName
{http://www.w3.org/2000/09/xmldsig#}X509SerialNumber
{http://www.smpte-ra.org/schemas/430-3/2006/ETM}RequiredExtensions
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}KDMRequiredExtensions
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}Recipient
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}X509IssuerSerial
{http://www.w3.org/2000/09/xmldsig#}X509IssuerName
{http://www.w3.org/2000/09/xmldsig#}X509SerialNumber
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}X509SubjectName
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}CompositionPlaylistId
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}ContentTitleText
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}ContentKeysNotValidBefore
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}ContentKeysNotValidAfter
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}AuthorizedDeviceInfo
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}DeviceListIdentifier
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}DeviceList
{http://www.smpte-ra.org/schemas/430-1/2006/KDM}CertificateThumbprint 
```

在第一行中，如何查看 DCinemaSecurityMessage 之后的文本？或者遵循 { [http://www.smpte-ra.org/schemas/430-1/2006/KDM](http://www.smpte-ra.org/schemas/430-1/2006/KDM) } 的任何其他测试？

我正在查看的实际 xml 的一部分是：

我不清楚我如何遍历和存储该信息的某些部分。我是否必须知道某个东西是子节点还是节点，或者我是否可以正确地使用一个 for 循环来查找标识符，然后将它找到的内容存储在标识符之后？

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?><DCinemaSecurityMessage xmlns="http://www.smpte-ra.org/schemas/430-3/2006/ETM" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
  <!-- Generated by Waimea 0.4.28l (wlib 0.9.53) -->
<AuthenticatedPublic Id="ID_AuthenticatedPublic">
    <MessageId>urn:uuid:0bb31789-de90-4e17-859b-dc771ff97280</MessageId>
    <MessageType>http://www.smpte-ra.org/430-1/2006/KDM#kdm-key-type</MessageType>
    <AnnotationText>CLOUDATLAS_FTR-1_S_EN-EN_51_PRE_2K_20120830_ADC_OV ~ KDM for SM.Dolby256-DSP100-000004d8</AnnotationText>
    <IssueDate>2012-09-28T17:39:53+00:00</IssueDate>
    <Signer>
      <dsig:X509IssuerName>dnQualifier=G4c6KCUZh7AzcyJnMCXbf9GAfAA=,CN=.cc-wm-2336-000020,OU=.cc-ra-1a.s430-2.ca.cinecert.com,O=.ca.cinecert.com</dsig:X509IssuerName>
      <dsig:X509SerialNumber>61638</dsig:X509SerialNumber>
    </Signer> 
```

# ios6 - plist 文件中的请勿打扰

> ID：14708606
> 
> 赞同：0
> 
> 时间：2013-02-05T13:24:48.470
> 
> 标签：ios6, settings, plist, toggle, jailbreak

我想为 iOS 6 中的请勿打扰功能编写一个 SBSettings 切换，但我找不到保存它的 plist 文件。可以请人帮助我吗？

PS：有没有可能在做某事后检查哪个文件发生了变化？就像一个日志文件。因为我认为寻找我想要搜索的每个保存点非常无聊..

# javascript - 在普通 div 中打开 html 页面

> ID：14708607
> 
> 赞同：0
> 
> 时间：2013-02-05T13:24:55.177
> 
> 标签：javascript, jquery, html

在单击事件时，我想在 div 中打开 html 页面，但条件是我不想使用任何类型的服务器，它应该在 loacl 机器上运行。这在 Mozila 中工作正常，但在 Chrome 和 IE 中不行。

我在 Chrome 中遇到了这种类型的错误。“XMLHttpRequest 无法加载文件：///C:/xampp/htdocs/kaufman/Rev/NIC/Assets/common/introduction.htm。Access-Control-Allow-Origin 不允许 Origin null。”

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:29:16.567

如果您出于安全原因在 Chrome 和 IE 中使用**Ajax**浏览器不允许加载本地文件。您可以为此使用**Iframe**。这意味着通过**Iframe制作****Ajax** 。制作隐藏的**Iframe**然后设置**src 。****使用**onload事件可以理解**iframe**是加载那个时候你可以 用下面的代码获取**iframe数据**

 ******```
var iframeValue=document.getElementById('iframeID').contentWindow.document.body.innerHTML;
alert(iframeValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:30:02.667

你能更好地解释一下吗？iframe 不`<iframe src="http://www.linkedpage.com"></iframe>`适合您的需求吗？

iOS 5 添加了以下样式，可以添加到父 div 以便滚动工作。

```
jQuery("#div").css("-webkit-overflow-scrolling","touch") 
```******

# grid - 如何在编辑器处于活动状态时“清除”单元格？

> ID：14708611
> 
> 赞同：1
> 
> 时间：2013-02-05T13:25:08.970
> 
> 标签：grid, extjs4, editor, extjs4.1, extjs-mvc

我有一个带有 CellEditor 插件的网格。现在我有一个布尔渲染器，它插入一个带有图像类的 html 标记。现在它发生了编辑器没有覆盖这个图像。定义的字段只是放置在上面的图层中。使用 CellEditor 时有没有办法清除/覆盖单元格内容。

请注意，这不会发生在原始类型中，例如渲染器仅输出数字或字符串时。

[例子](http://jsfiddle.net/B3fW3/3/)

列模型

```
{
    header:'Required',
    dataIndex:'Required',
    renderer: function(v){return v?'<div class="icon-class"></div>':''},
    editor: {
        xtype: 'checkbox',
        value: false,
        inputValue: 'true',
        uncheckedValue: 'false'
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:52:04.733

一个代码示例会很有帮助，与此同时，尝试在您的 html 标记上设置一个 css z-index，其值为 -1 到 1，看看是否有帮助。

# c# - 如何在视图中创建方法？

> ID：14708612
> 
> 赞同：0
> 
> 时间：2013-02-05T13:25:12.677
> 
> 标签：c#, asp.net-mvc

在我开始之前，我知道这不是好的做法，但想知道如何（如果有的话）在我的视图中定义一个方法。

我在 ASP.Net MVC 中使用 C#

以下似乎不起作用：

```
decimal DoCalculation(IEnumerable<MyItems> items){
    ...
} 
```

**注意我没有使用 Razor VIEW 引擎**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T13:26:39.917

如果您使用的是 Razor 视图引擎，您可以声明[`inline functions`](http://blogs.msdn.com/b/timlee/archive/2010/07/30/using-functions-in-an-asp-net-page-with-razor-syntax.aspx)：

```
@functions {
    public string DoCalculation(IEnumerable<MyItems> items) {
        ...    
    }
} 
```

或者你也可以使用[`inline helpers`](https://stackoverflow.com/questions/9449728/inline-helpers-and-page-output-how)：

```
@helper DoCalculationAndOutputResult(IEnumerable<MyItems> items)
{
    foreach (var item in items)
    {
        <div>@item.SomeValue</div>
    }
} 
```

如果您使用的是 WebForms 视图引擎：

```
<script type="text/C#" runat="server">
    public string DoCalculation(IEnumerable<MyItems> items) {
        ...    
    }
</script> 
```

显然，在视图中编写 C# 代码与根本不编写任何代码一样糟糕。值得一提的是其他阅读本文的人，以免他们犯与您相同的错误。

# c# - 我可以为现有的 pdf 使用带有文本的 htmlfile

> ID：14708616
> 
> 赞同：0
> 
> 时间：2013-02-05T13:25:17.733
> 
> 标签：c#, html, asp.net, pdf, itext

我有一个问题要使用 itextsharp 在现有 pdf 中添加文本。我想从 html 中添加文本。

这是我的代码：

```
string oldfile = Server.MapPath("~/App_Data/zugang.pdf");
string newfile = @"C:\test.pdf";

PdfReader reader = new PdfReader(oldfile);
Rectangle size = reader.GetPageSizeWithRotation(1);

Document doc = new Document(size);

FileStream fs = new FileStream(newfile, FileMode.Create, FileAccess.Write);
PdfWriter writer = PdfWriter.GetInstance(doc, fs);

doc.Open();

PdfContentByte cb = writer.DirectContent;

BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
cb.SetColorFill(BaseColor.BLACK);
cb.SetFontAndSize(bf, 16);

cb.BeginText();

string text = "tedsfdsfdshfdsdfsdsdsdsvdsgdsdsgsg";

cb.ShowTextAligned(1, text, 600, 300, 0);
cb.EndText();

PdfImportedPage page = writer.GetImportedPage(reader, 1);
cb.AddTemplate(page, 0, 0);

doc.Close();
fs.Close();
writer.Close();
reader.Close(); 
```

但我希望我可以为此使用 html 文件。我可以为此使用html文件吗？

这是我的html文件：

```
<p>Sie haben einen Gastzugang für [Anrede] [Vorname] [Nachname],[Firma] eingerichtet.</p>
                                                       Im folgenden finden Sie die Zugangsdaten
                                                       die für die Anmeldung am Netzwerk benötigt werden.Weitere Informationen stehen auf der Anmeldeseite zur Verfügung.
                                                        <p>

                                                            <b>Benutzername:</b>
                                                            <b>[Benutzername]</b>
                                                            </br>
                                                            <b>Passwort:</b>
                                                            <b>[Passwort]</b>

                                                        </p>
                                                       Der Zugang wird vom [ZeitVon] bis [ZeitBis] freigeschaltet sein. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:28:19.727

是的，iTextSharp 支持 HTML 到 PDF 。这是[如何](http://www.codeproject.com/Questions/203481/HTML-convert-to-PDF-using-itextsharp)

# javascript - 未注册的点击事件

> ID：14708618
> 
> 赞同：13
> 
> 时间：2013-02-05T13:25:32.883
> 
> 标签：javascript, android, jquery, html, webkit

这是 Android 应用程序的主屏幕。一切都在 WebView 中呈现。
![](../Images/a4cb3124c4de493067ccf7c99c4d45a6.png)

当我点击左下角的按钮时，此叠加层会打开，其内容会动态添加到其中。
![](../Images/8ad1c1d5307a8ae3a173472ec3f6df55.png)

当我点击其中一个图标时，它应该被添加到左侧的栏中。它确实如此。
![](../Images/c1f4659c284d073d4755013dc19c68ec.png)

但是，当我点击另一个图标时，什么也没有发生。它应该调用的函数没有运行（我`alert ()`在它的开头放了一个检查）。

当我关闭叠加层（左上角的按钮）并再次打开它（左下角）时，我可以添加另一个图标。但是再一次，直到覆盖层关闭并再次打开，下一个事件才会触发。

我不知道解决这个问题有多容易，因为我不确定是否每个人都遇到过这个问题。我（在运行 Android 4.0.4 的三星 GT-P6200 上）可以。其他人也向我抱怨过这件事。然而，在 SDK 中包含的 Android 模拟器中，Android 4.1 和 4.1 似乎没有发生这种情况。好像是4.0的问题。

叠加层中的图标如下所示；`<div class="appLauncher" onClick="launchApp (' + i + ')"><img src="data:image/png;base64,' + base64 + '" alt="[~]" /><br /><span>' + label + '</span></div>`

如果有什么不同，我会使用 jQuery 来处理 DOM。

```
function launchApp (i)
{
    // Putting an alert () here indicates that the function doesn't get called, because no alert box appears on the screen //
    try
    {
        if (! launcherEdit)
        {
            android.launchAppFromList (i);
        }
        else
        {
            addAppToLauncherFromList (i); // This is what should happen //
        }
    }
    catch (ex)
    {
        handleException (ex);
    }
} 
```

应用程序本身可以在这里找到；[https://play.google.com/store/apps/details?id=be.robinj.ubuntu](https://play.google.com/store/apps/details?id=be.robinj.ubuntu)
的源代码可以在这里找到；[http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/files](http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/files)
这是 Javascript 文件；[http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/view/head:/assets/script.js](http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/view/head:/assets/script.js)

* * *

并且请，请不要在没有正确理解实际问题的情况下将其关闭为*“完全重复” ，就像以前发生过很多次一样。*

* * *

这种血腥的混乱似乎只存在于 Android 4.0.4 及更低版本（或该版本号附近的某个地方）。只有完全忽略了 appLaunchers 的点击。

* * *

我开始在这里看到某种联系......在将项目添加到左侧栏的 jQuery 动画播放后，它总是开始失败。这开始看起来可疑地像一个重绘问题......

* * *

不确定这是否相关，但看到它在我的控制台中弹出......

```
02-12 14:30:22.650: E/dalvikvm(3936): JNI ERROR (app bug): attempt to use stale global reference 0xe
02-12 14:30:22.650: E/dalvikvm(3936): VM aborting
02-12 14:30:22.650: A/libc(3936): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T18:50:17.723

如果您使用 jQuery，最好使用“ **bind** ”事件来绑定您的点击事件。

例如：

```
 <div class="appLauncher" data-id= ' + i + '">
<img src="data:image/png;base64,' + base64 + '" alt="[~]" /><br /><span>' + label + '</span></div> 
```

而不是在您使用的javascript文件中：

```
$(".appLauncher").bind("click",function(){
   var i=$(this)attr("data-id");
   launchApp(i);
}); 
```

试着让我知道它对你有帮助吗:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:05:04.503

不是一个 javascript 的人，但我知道 Android 在“一次性”触发器和可重复使用的触发器 (PendingIntents) 之间做出了明确的区分。您是否有可能以某种方式实例化 .appLaunch 的行为？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T16:32:00.710

我想你被[issue 19827击中了](http://code.google.com/p/android/issues/detail?id=19827)

在这种情况下，请尝试添加对[`preventDefault`](http://api.jquery.com/event.preventDefault/)（未测试）的调用

```
$(".appLauncher").bind("click", function(e) {
   e.preventDefault();
   var i = $(this)attr("data-id");
   launchApp(i);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:22:41.330

我看了[http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/view/head:/assets/script.js](http://bazaar.launchpad.net/~robinj/be.robinj.ubuntu/trunk/view/head:/assets/script.js)

您在脚本文件中设置了“var scrollable = Array ()”。它不应该是 new Array() 还是简单的 []

如果这与您的 JNI 错误（应用程序错误）有关，请尝试：尝试使用过时的全局参考 0xe

# jquery - 如何通过单击 svg-path 来切换 twitter bootstrap jquery 下拉菜单？

> ID：14708620
> 
> 赞同：1
> 
> 时间：2013-02-05T13:25:46.047
> 
> 标签：jquery, drop-down-menu, svg

我想使用 svg -element 通过单击 -element 来“切换”下拉列表（jquery twitter bootstrap）。这很重要，因为形状复杂的仪表板元素。只有当鼠标在路径元素内时，切换事件才可用。我已经构建了一个[jsfiddle 示例](http://jsfiddle.net/zNrcC/42/)来说明问题。因为我是一个 javasript 新手，所以很高兴能有任何钩子来开始。先感谢您！

```
<html><head><title></title>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css"
    rel="stylesheet" media="screen"></head>
<body>
    <div class="dropdown"> <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    I want this action
    <span class="caret"></span>
  </a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
            <li><a tabindex="-1" href="#">Action</a>
            </li>
            <li><a tabindex="-1" href="#">Another action</a>
            </li>
            <li><a tabindex="-1" href="#">Something else here</a>
            </li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="#">Separated link</a>
            </li>
        </ul>
    </div>
    <div class="dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="150" height="30"
        id="Test"> 
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            <g
            transform="translate(0,-850)"
            id="layer1">
                <rect
                class="dropdown-toggle"
                width="150"
                height="30"
                ry="4"
                x="0"
                y="850"
                id="rect3013"
                style="fill:#ff0000;fill-opacity:1;stroke:none" />
            </g>
        </a>
              <text
             x="60.42905"
             y="18.798733">
                 <tspan
               sodipodi:role="line"
               id="tspan3852"
               x="20"
               y="18.798733">toggle from here
                 </tspan>
            </text>
        </svg>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
            <li><a tabindex="-1" href="#">Action</a>
            </li>
            <li><a tabindex="-1" href="#">Another action</a>
            </li>
            <li><a tabindex="-1" href="#">Something else here</a>
            </li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="#">Separated link</a>
            </li>
        </ul>
    </div>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:44:29.333

你可以尝试这样的事情：

**HTML结构**：

```
 <div class="dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="150" height="30"
        id="Test"> <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            <g
            transform="translate(0,-850)"
            id="layer1">
                <rect
                class="dropdown-toggle"
                width="150"
                height="30"
                ry="4"
                x="0"
                y="850"
                id="rect3013"
                style="fill:#ff0000;fill-opacity:1;stroke:none" />
            </g>
            <text x="60.42905" y="18.798733">
                <tspan sodipodi:role="line" id="tspan3852" x="20" y="18.798733">toggle from here</tspan>
            </text>
        </a>

        </svg>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
            <li><a tabindex="-1" href="#">Action</a>

            </li>
            <li><a tabindex="-1" href="#">Another action</a>

            </li>
            <li><a tabindex="-1" href="#">Something else here</a>

            </li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="#">Separated link</a>

            </li>
        </ul>
    </div> 
```

然后，当您单击**svg**时：

```
$("svg").on("click", function () {
    $("ul").fadeIn(200);
}); 
```

此外，要在单击外部时关闭下拉菜单，您可以添加以下内容：

```
$(document).on("click", ":not(svg *)", function (e) {
    $("ul").fadeOut(200);
    e.stopPropagation();
}); 
```

这是一个[**演示**](http://jsfiddle.net/Dim13i/zNrcC/43/)

# asp.net-mvc - 使用 ajax 和 asp.net mvc 4 下载文件

> ID：14708623
> 
> 赞同：0
> 
> 时间：2013-02-05T13:26:07.377
> 
> 标签：asp.net-mvc, jquery, download

当用户单击链接时，我需要下载文件（无需显示进度或任何内容），但如果服务器上发生错误（未找到文件或其他内容），则会弹出带有错误消息的对话框。我在想ajax，但如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:29:27.080

基本上，您将需要服务器上的资源来传递文件（如果您使用的是 .NET，我强烈建议您使用 .ashx 文件，但您也应该能够使用 MVC 控制器来完成）然后，就像您说的那样，一个带有一些 javascript 的网页对服务器资源进行 AJAX 调用。

如果您在服务器上执行 context.Response.BinaryWrite，并确保文件作为字节加载到内存中，那么您就可以开始了。

# sql-server - 列出所有没有参数的存储过程

> ID：14708624
> 
> 赞同：3
> 
> 时间：2013-02-05T13:26:16.577
> 
> 标签：sql-server, tsql

我想找出数据库中哪些存储过程没有参数。我试过这些，但我不确定：

1）连接表`sys.all_parameters`和`sys.all_objects`：

```
select 
   ao.name,ao.type, ao.type_desc
from 
   sys.all_parameters pa
       left outer join 
   sys.all_objects ao
       on pa.object_id = ao.object_id
where 
    pa.name like ''
and 
    ao.type not in ('FN','AF','FS') 
```

2）从表`information_schema.parameters`：

```
select * 
from
    information_schema.parameters 
where 
    parameter_mode not in ('in', 'out', 'inout') 
```

3) 从`information_schema.parameters`：

```
select * 
from
    information_schema.parameters 
where
    parameter_name like '' 
```

但是，我不完全确定这些是否正确。有什么直接的方法吗？

也许是这样的：

```
select * from sys.procedures where xtype = 'P' and has_parameters=0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T13:29:11.480

```
SELECT SCHEMA_NAME(schema_id) AS schema_name,
       name
FROM   sys.procedures pr
WHERE  NOT EXISTS(SELECT *
                  FROM   sys.parameters p
                  WHERE  p.object_id = pr.object_id) 
```

# python - 无法连接到基于 Facebook 的 Spotify 帐户

> ID：14708632
> 
> 赞同：1
> 
> 时间：2013-02-05T13:26:45.973
> 
> 标签：python, spotify

我正在使用 Pyspotify Spotify 客户端。为了连接到会话，它们提供了一个类`SpotifySessionManager`，它接受`username`和`password`参数。然而，我和许多人使用 Facebook 连接到 Spotify，一旦你这样做了，Spotify 就不会提供一种方法来获取更传统的用户名和密码。任何 Pyspotify 用户都知道如何使用这种常见的 Spotify 用户身份验证形式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:39:30.047

据我所知，您可以通过以下方式找到与 Facebook 关联的 Spotify 帐户的用户名：

1.  访问[http://www.spotify.com/](http://www.spotify.com/)
2.  使用您的 Facebook 帐户登录
3.  转到您的帐户概览

帐户概览应显示您的“本机”Spotify 用户名，您可以将其与 pyspotify/libspotify 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T11:19:12.093

我有同样的问题，并`spotify device password`通过我的 spotify 个人资料页面创建一个来解决它：[https ://www.spotify.com/fi/account/set-device-password/](https://www.spotify.com/fi/account/set-device-password/)

pyspotify 会接受此密码和设备用户名。

# c# - 在使用两个 SDK 的 ASP 站点中使用同一 DLL 的两个不同版本

> ID：14708633
> 
> 赞同：2
> 
> 时间：2013-02-05T13:26:47.093
> 
> 标签：c#, asp.net, sdk

我正在尝试使用名为 DynamicDashboards 的应用程序在工作中创建统计信息仪表板。这是使用其他两个依赖项 Ext.Net 1.5.0.0 和 Newtonsoft.Json 4.0.8.0 预编译的。同时我正在尝试使用更新版本的 Ext.Net 2.1 来构建一些需要 Newtonsoft.Json 4.5.0.0 的模块。

由于在这两种情况下，DLL 具有相同的名称和大多数相同的类型，因此我收到关于 DLL 中可用的类型和/或加载了错误版本的错误。

如何将 DynamicDashboards 与 Ext.Net 2.1 一起使用并解决冲突？我没有 DynamicDashboards 的源代码，但我有 Ext.Net 和 Newtonsoft.Json 的源代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:33:34.877

引用这两个程序集。在解决方案资源管理器中选择每个选项并查看属性。应该`Aliases`有财产。通常设置为`global`，但是您可以更改和/或添加到此。例如调用第一个引用`Lib1`和第二个`Lib2`。

然后，在您的 C# 中，您必须为其添加一个 extern，例如：

```
extern alias Lib1; 
```

然后，您可以引用每个单独的程序集，如下所示：

```
Lib1::Some.Namespace.Type
Lib2::Some.Namespace.Type 
```

如果您想对此进行更好的解释，请阅读此博客文章 - [http://www.lloydkinsella.net/2012/07/13/extern-alias-underused-or-unknown/](http://www.lloydkinsella.net/2012/07/13/extern-alias-underused-or-unknown/)

# android - 检测耳机是否有麦克风

> ID：14708636
> 
> 赞同：8
> 
> 时间：2013-02-05T13:27:03.093
> 
> 标签：android, audio, android-audiomanager

我需要检测插入的有线耳机是否有麦克风。

[我可以使用isWiredHeadSetOn()](http://developer.android.com/reference/android/media/AudioManager.html#isWiredHeadsetOn())检查是否插入了耳机，但对于麦克风来说，AudioManager 类中似乎不是这样的方法。

我找到了一些使用[ACTION_HEADSET_PLUG](http://developer.android.com/reference/android/content/Intent.html#ACTION_HEADSET_PLUG)的建议，但即使在打开我的应用程序之前已插入耳机，我也有兴趣了解此信息，在我的应用程序的生命周期内不会触发此事件。

关于这个问题的任何想法？先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T14:03:09.097

**更新：** 继续并`ACTION_HEADSET_PLUG`在您的活动中注册`onResume()`。如果用户在启动后插入/拔出耳机，平台将在恢复时向您的活动提供最新状态。

以下测试代码有效：

```
package com.example.headsetplugtest;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;

public class HeadSetPlugIntentActivity extends Activity {

    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
            if (Intent.ACTION_HEADSET_PLUG.equals(action)) {
                Log.d("HeadSetPlugInTest", "state: " + intent.getIntExtra("state", -1));
                Log.d("HeadSetPlugInTest", "microphone: " + intent.getIntExtra("microphone", -1));
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter filter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
        getApplicationContext().registerReceiver(mReceiver, filter);
    }

    @Override
    protected void onStop() {
        super.onStop();

        getApplicationContext().unregisterReceiver(mReceiver);
    }
} 
```

# google-apps-script - 写入我的通讯录

> ID：14708641
> 
> 赞同：1
> 
> 时间：2013-02-05T13:27:17.263
> 
> 标签：google-apps-script, google-contacts-api

我一直在尝试在“我的联系人”文件夹中创建联系人，以便可以与我的手机同步。我不介意使用群组，但它们的同步在 iPhone 上被破坏了。无论如何，我正在使用这个脚本：

```
function update() {
  var group = ContactsApp.findContactGroup('My Contacts');
  group.addContact(ContactsApp.createContact('Fido','McDog', 'fido@example.com'));
  var contact = ContactsApp.findByEmailAddress('fido@example.com');
  contact.setWorkPhone('123123123123');
} 
```

如果我为“我的联系人”使用任何其他名称，则该脚本可以完美运行。否则我会收到错误：TypeError：无法调用 null 的方法“addContact”。（第 3 行）

这是谷歌的某种限制吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:00:22.820

看来我的联系人组实际上被称为“系统组：我的联系人”。其他系统组的名称类似，以添加到我的联系人而不是其他...

```
function test() {
 var group = ContactsApp.getContactGroup("System Group: My Contacts");
 group.addContact(ContactsApp.createContact('Fido','McDog', 'fido@example.com'));
 var contact = ContactsApp.findByEmailAddress('fido@example.com');
 contact.setWorkPhone('123123123123');
 } 
```

# google-analytics - 阻止谷歌谷歌分析“自动跟踪”

> ID：14708644
> 
> 赞同：0
> 
> 时间：2013-02-05T13:27:21.277
> 
> 标签：google-analytics

我想阻止谷歌谷歌分析自动跟踪并仅使用 _gaq.push(['_trackPageview']) 跟踪我的手动呼叫

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:48:36.627

将 javascript 事件处理程序附加到您用于手动调用的元素：

```
<a href="#" onclick="_gaq.push(['_trackPageview','some url'])">Manual</a> 
```

# .net - 从.NET webservice中的函数返回多个数组

> ID：14708648
> 
> 赞同：0
> 
> 时间：2013-02-05T13:27:28.743
> 
> 标签：.net, arrays, web-services

我需要定义一个在.NET 中返回多个数组的方法。我曾尝试使用“元组”，但它需要将该方法声明为“私有”。就我而言，我正在使用 Web 服务，当我将方法声明为私有时，它不会出现在 Web 服务的方法列表中。有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:29:54.260

例如，您可以返回一个`IEnumerable<int[]>`。只要确保您使用正确的类型而不是`int`.

顺便说一句：使用`Tuple`并不意味着您必须将您的方法设为私有。还有其他事情发生。

# performance - 最高效率

> ID：14708655
> 
> 赞同：4
> 
> 时间：2013-02-05T13:28:13.127
> 
> 标签：performance, algorithm, traveling-salesman, nonlinear-optimization

**最大效率问题**

有N个城市，有一个流浪者。

他从一个城镇到另一个城镇所花费的时间是已知的 - Txy（从城镇 x 到城镇 y）。

他可以从任何城镇去任何其他城镇，所以这是一个完整的图表。

在每个城镇都有流浪者想要收集的一定数量的货币 Mx。

穿越所有城市的时间不够。

有了总可用时间 T 和起点 i，问题是找到最好的路线，以便他收集的钱将是最大的。

输入数字范围：

*   N 介于 400 和 600 之间
*   Mx(M1, M2, ...) 介于 100 和 500 之间，x 介于 1 和 N 之间
*   Txy 介于 80 和 200 之间，x 和 y 介于 1 和 N 之间
*   Txy 是最佳时间距离，使得 Txy < Txz + Tzy，对于介于 1 和 N 之间的任何 x、y 和 z。
*   T 介于 3500 和 5000 之间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:37:59.503

似乎是动态的：

表示**a[ x ]** - 从城市 x 收取的钱。

令**dp[ x ][ t ]**表示他在城市**x**花费时间**t**并完成工作所能收集的最大金钱数量。初始化和更新如下：

 **1.  *对于*起点**x0**，**dp[ x0 ][ 0 ] := a[ x0 ]**。对于其他城市 x **dp[ x ][ 0 ] := -1** (无效);
2.  *对于*从**1**到**T**的每个时间**t**：*对于*每个城市**x**：*对于*每个城市**y** st **edge[ y ][ x ] <= t**：*表示***p := t - edge[ y ][ x ]**；*if* **dp[ y ][ p ] >= 0** // 有可能在时间 p 到达 y *then* **dp[ x ][ t ] = max( dp[ x ][ t ], dp[ y ][ t - edge[ x ][ y ]] + a[ x ])**
**********   *返回*所有 dp[ x ][ t ] 的最大值。*********

 ********总复杂度为**O( T*N^2 )**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:54:41.567

我正在考虑基于回溯的解决方案。您应该定义一种算法来找到最佳解决方案（获得更多资金的解决方案）。当您旅行到所有城市或超过您拥有的时间时，您就结束了算法。忽略不赚钱的候选人：您必须根据仍待访问的最少城市数量来测试赚取的钱是否至少是当前的最佳解决方案；并检查从一个城市到所有剩余城市所需的最短时间。

要知道您将赚取的最低金额，您必须乘以每个城市中的最低金额仍需访问的城市数量。

这同样适用于您访问所有剩余城市所需的最短时间。

编辑：我忘了告诉你这个算法的成本是 O(a^n)，其中**a**是图的 arist 数（即 N*(N-1)），**n**是顶点数（即是 N)。如果您定义好的函数以了解您的实际候选人何时无法成为解决方案以及何时不能比当前的最佳解决方案更好（如果您幸运地在开始时找到解决方案），成本会更好迭代过程，这确实有助于减少操作时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:09:08.713

每个城镇的金额是未知的，所以最好的路线是从一个城镇到下一个城镇的最短路线。

如果我要使用递归在 Javascript 中对此进行编程，我会这样做：

[http://jsfiddle.net/rd13/ShL9X/5/](http://jsfiddle.net/rd13/ShL9X/5/)

```
c = ['london', 'manchester', 'liverpool']; //Cities

t = {
    'liverpool': {
        'manchester': 130,
        'london': 260
    },
    'london': {
        'manchester': 250,
        'liverpool': 260
    },
    'manchester': {
        'london': 250,
        'liverpool': 130
    }
} //Time between cities

cn = 'london'; //Current city

var shortestDistance = 500,
    allottedTime = 300,
    next_city,
    time = 0,
    totalTime = 0,
    path = [cn];

optimal = function (cn) {

    for (i in t[cn]) {
        //So as not to visit cities that we have already visited
        if(path.indexOf(i)===-1) {
            next_city = t[cn][i] < shortestDistance ? i : next_city;
            shortestDistance = t[cn][i];
            totalTime = Math.min(t[cn][i] , shortestDistance);
        }
    }
    time += totalTime;

    path.push(next_city);

    if(time > allottedTime){
        document.write("The most optimal route between cities is: " + path);
    } else {
        optimal(next_city);
    }

}

optimal(cn); 
```

抱歉，对算法没有帮助，这是从编程的角度来看的，因为我认为这是一个有趣的挑战。以上不是最佳思想。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T14:42:28.017

这是一个众所周知的问题的变体，通常称为旅行商问题。您可以在此处找到有关此问题和类似问题的详细描述以及维基百科上的更多链接： [http ://en.wikipedia.org/wiki/Travelling_salesman_problem](http://en.wikipedia.org/wiki/Travelling_salesman_problem)**********

# node.js - 如何清理 Nodejs（heroku + redis）中的所有会话？

> ID：14708656
> 
> 赞同：5
> 
> 时间：2013-02-05T13:28:13.797
> 
> 标签：node.js, heroku, connect, express

我正在使用托管在[heroku](http://www.heroku.com/)上的 nodejs (expressjs) 。

会话存储在 redis 中（ heroku 的[Redistogo](https://redistogo.com)插件）：

```
RedisStore = require('connect-redis')(express)
app.use express.session
      secret: process.env.CLIENT_SECRET
      cookie: { maxAge: 604800000 }
      store: new RedisStore {client: redis} 
```

用户登录后，我将他的信息存储在 req.session

```
after_user_logged_id = (req, user)->    
  req.session.current_user =
    id: user._id
    name: user.name 
```

我需要重新启动服务器并清除所有会话：注销所有用户以强制他们再次登录。我该怎么做？重新启动 redis 插件没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T22:36:14.403

redis.flushdb() 如果你最终在 redis 中存储了其他东西，可能会有点极端。您只需要删除所有“sess:*”键。不幸的是，没有 del *，所以你可以使用这样的东西：

```
redis.keys("sess:*", function(err, key) {
  redis.del(key, function(err) {
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:11:57.937

清理所有 redis 会话的代码：

```
RedisStore = require('connect-redis')(express)
rtg   = require('url').parse process.env.REDISTOGO_URL
redis = require('redis').createClient rtg.port, rtg.hostname  
redis.auth rtg.auth.split(':')[1] # auth 1st part is username and 2nd is password separated by ":"
  try
    console.log "clean sessions"
    redis.flushdb()
  catch err
    console.log "error:", err 
```

# javascript - 如何使用变量构建有效的 JQuery 选择器

> ID：14708659
> 
> 赞同：2
> 
> 时间：2013-02-05T13:28:18.703
> 
> 标签：javascript, jquery, html

我正在尝试构建一个 jQuery 选择器。这涉及连接字符串和变量。但是，由于某种原因，生成的选择器无效。我尝试了许多选项，例如：

```
$('[name="[name='$radioName + (row_id) + ']"][value="$result"]').attr('checked',true); 
```

`$radioName`例如：'Nigeria[Osun][Okuku-;// 尖括号没有闭合，因为 row_id 将在附加闭合括号之前附加到它上面，如上所示。

`$result`例如：'67

`row_id`例子是：5

我如何构建具有这些要求的有效描述符？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:35:03.500

尝试：

```
$('[name="' + $radioName + row_id + ']' + '"][value="' + $result + '"]').attr('checked',true); 
```

当我将连接的表达式放在一起时，我首先使用正确的引号编写静态文本。就像是：

```
$('[name=""][value=""]').attr('checked',true); 
```

然后我粘贴到`'+ +'`我想添加变量的每个位置。像这样：

```
$('[name="'+ +'"][value="'+ +'"]').attr('checked',true); 
```

最后，我添加变量：

```
$('[name="'+ $radioName + row_id + ']' + '"][value="'+ $result +'"]').attr('checked',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:38:42.363

我认为最好像这样拆分选择和比较：

```
$('[name][value]') // select all elements that have both name and value attributes
    .each(function() {
        var $this = $(this);

        if ($this.attr('name') == 'whatever' && $this.attr('value') == 'result') {
            $this.prop('checked', true);
        }
    }); 
```

或过滤它们：

```
$('[name][value]') // select all elements that have both name and value attributes
    .filter(function() {
        var $this = $(this);

        return $this.attr('name') == 'whatever' && $this.attr('value') == 'result';
    })
    .prop('checked', true); 
```

# c++ - 如何更改对 (> 和 <) 运算符的行为？

> ID：14708662
> 
> 赞同：0
> 
> 时间：2013-02-05T13:28:25.500
> 
> 标签：c++, operator-overloading, std-pair

我正在尝试对 a 进行排序，`vector< pair<int,char> >`但我想更改对类型的比较运算符的行为，以便如果第一个值相等并且它与 (>) 运算符进行比较，我希望它与第二个值进行比较(<) 运算符。

我正在尝试这样做以解决“[什么是密码分析](http://uva.onlinejudge.org/index.php?option=onlinejudge&page=show_problem&problem=949)？” uva 的问题。这是我的方法：

```
string toLower(string in){
    string out;
    for(int i=0;i<in.length();i++){
        if(in.at(i)<='Z' && in.at(i)>='A'){
            out+=in.at(i)+('a'-'A');
        }
        else if(in.at(i)<='z' && in.at(i)>='a'){
            out+=in.at(i);
        }
    }
    return out;
}

int main(){
    //freopen("in.txt","r",stdin);
    //freopen("tmp.txt","w",stdout);
    vector< pair<int,char> >vp;
    pair<int,char> tp;

    for(char a='a';a<='z';a++){//buliding a table of values and chars
        tp= make_pair(0,a);
        vp.push_back(tp);
    }
    int T;
    cin >> T;
    string s;
    cin.ignore();
    for(int i=0;i<T;i++){
        getline(cin,s);
        s=toLower(s);//remove special chars and convert all to lower
        int l=s.length();
        for(int j=0;j<l;j++){
            vp[s[j]-'a'].first+=1;//increasing the value of each char found
        }
    }
    sort(vp.begin(),vp.end());//ascending sort
    for(int j=25;j>=0;j--){
        cout << (char)(vp[j].second -('a'-'A')) << " " <<vp[j].first << endl;//cout the Capital char and its value backwards (Descending)
    }
    //system("pause");
    return 0;
} 
```

但这就是输出的样子：

```
S 7
T 6
I 5
E 4
O 3
W 2
U 2
N 2
H 2
A 2
Y 1
Q 1
M 1
C 1
Z 0
X 0
V 0
R 0
P 0
L 0
K 0
J 0
G 0
F 0
D 0
B 0 
```

所以例如我想`W U N H A`成为`A H N U W`

我在其他问题中阅读过有关重载的信息，但我不知道在这里实现它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T13:33:15.330

这是通过将自定义比较器函数传递给`sort`. 您可以使用这样的 lambda 轻松完成此操作：

```
sort(
    vp.begin(),
    vp.end(),
    [](const pair<int,char>& lhs, const pair<int,char>& rhs) -> bool {
        return lhs.first != rhs.first 
            ? lhs.first < rhs.first 
            : lhs.second < rhs.second;
    }
); 
```

此代码先按升序排序`first`，然后按升序排序`second`，但您可以调整两个比较的优先级和方向，以按您想要的方式排序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T13:33:21.853

只需提供您自己的比较功能：

```
bool comp(const std::pair<int, char>& a, const std::pair<int, char>& b)
{
  if (a.first > b.first) {
    return true;
  } else if (a.first == b.first && a.second < b.second) {
    return true;
  }
  return false;
} 
```

然后在排序时使用它：

```
sort(vp.begin(),vp.end(), comp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T13:33:22.340

> 我正在尝试对向量< pair > 进行排序，但我想更改比较的行为

只需定义一个合适的二元谓词函数并将其作为第三个参数传递给`std::sort`. 请记住，它应该实现[严格的弱排序](https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering)：

```
bool foo(const pair<int,char>& lhs, const pair<int,char>& rhs)
{
  // implement logic here
}

....

sort(vp.begin(),vp.end(), foo); 
```

# maven - 从外部文件读取属性 - Maven

> ID：14708663
> 
> 赞同：0
> 
> 时间：2013-02-05T13:28:29.147
> 
> 标签：maven, maven-2

我必须阅读由多个 maven 项目共享的属性，为此我尝试使用 properties-maven-plugin，例如：

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>properties-maven-plugin</artifactId>
            <version>1.0-alpha-1</version>
                <configuration>
                <files>
                    <file>conf.properties</file>
                </files>
            </configuration>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>read-project-properties</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        </plugins>
        </build>

<distributionManagement>
    <snapshotRepository>
        <id>snapshots</id>
        <url>${nexusurl}</url>
    </snapshotRepository>
</distributionManagement>
</project> 
```

文件 conf.properties 包含：

```
 nexusurl=http://localhost:8081/nexus/content/repositories/snapshots 
```

问题是使用 mvn deploy 时，属性 nexusurl 没有解析，错误跟踪结果是：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy
(default- deploy) on project parent: Failed to deploy artifacts/metadata: No connector 
available to access repository snapshots (${nexusurl}) of type default using the 
available  factories WagonRepositoryConnectorFactory -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute
goal   org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on 
project  parent: Failed to deploy artifacts/metadata: No connector available to 
access repository snapshots (${nexusurl}) of type default using the available
factories WagonRepositoryConnectorFactory 
```

我曾尝试更改插件的执行阶段（验证、安装、部署），将插件的版本更改为 1.0-alpha-2，但问题仍然存在。

我会感谢任何帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:58:57.847

问题是 pom.xml 被读取并与属性集成比插件加载要早得多。您可以将插件用于构建中的值 - 例如在插件之间，但您尝试做的事情不会像那样工作。

# ruby - Ruby 1.8 未显示在命令行上

> ID：14708672
> 
> 赞同：0
> 
> 时间：2013-02-05T13:28:58.790
> 
> 标签：ruby, command-line, ubuntu-10.04

我已经从命令行在我的 Ubuntu 机器上安装了 ruby​​1.8。但是系统显示没有安装ruby。

这是控制台输出：

```
frank@my-version3:~/apps$ sudo apt-get install ruby1.8 ruby1.8-dev irb rdoc ri
Reading package lists... Done
Building dependency tree       
Reading state information... Done
ruby1.8 is already the newest version.
ruby1.8-dev is already the newest version.
irb is already the newest version.
rdoc is already the newest version.
ri is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.

frank@my-version3:~/apps$ which ruby

frank@my-version3:~/apps$ ruby -v
-bash: ruby: command not found

frank@my-version3:~/apps$ ruby
-bash: ruby: command not found

frank@my-version3:~/apps$ irb
irb(main):001:0> exit

frank@my-version3:~/apps$ 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:25:49.187

你可以使用 update-alternatives 做这个

```
update-alternatives --set ruby /usr/bin/ruby1.8 
```

获取替代品列表

```
update-alternatives --query ruby 
```

**更新：**对于可能遇到相同问题的用户，请参阅[此链接](http://ubuntuforums.org/showthread.php?p=10057489)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:54:48.177

在“cd”之后你能在 /usr/bin 中看到 ruby​​ 吗？您还可以运行*echo $PATH*以查看您的路径是否设置正确。

# python - 我可以在 Python 中用 5 位 unicode 替换字符串吗？

> ID：14708676
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:16.040
> 
> 标签：python, unicode

早些时候，我问过这个问题： [如何在 Python 3.3 中将某些字符转换为五位 unicode 1？](https://stackoverflow.com/questions/14624765/how-to-convert-some-character-into-five-digit-unicode-one-in-python-3-3)

但是今天我发现大写 U 代码点在打印时有效，但是当我在文件中尝试时，结果却失败了。为什么？

```
import re

f = codecs.open('test.txt', 'r', encoding="utf-8")
g = codecs.open('test_output.txt', 'w', encoding="utf-8")
fin = f.read()
output = re.sub('m', '\U000243D0', fin)
g.write(output) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:31:31.497

这对我来说很好：

```
import re

with open('/tmp/test.txt', 'w', encoding='utf8') as testfile:
    testfile.write("I don't go to school on mondays")

with open('/tmp/test.txt', 'r', encoding='utf8') as testfile, open('/tmp/test_output.txt', 'w', encoding='utf8') as testout:
    output = re.sub('m', '\U000243D0', testfile.read())
    testout.write(output)

with open('/tmp/test_output.txt', 'r', encoding='utf8') as testfile:
    print(repr(testfile.read())) 
```

输出

```
"I don't go to school on ondays" 
```

# assembly - VLD1 中的对齐

> ID：14708679
> 
> 赞同：2
> 
> 时间：2013-02-05T13:29:20.207
> 
> 标签：assembly, arm, neon

我对 ARM Neon VLD1 指令的对齐有疑问。以下代码中的对齐如何工作？

```
DATA            .req r0  
vld1.16         {d16, d17, d18, d19}, [DATA, :128]! 
```

这条读指令的起始地址是否移动到DATA+一个正整数，使得它是不小于DATA的16的最小倍数（16字节=128位），还是DATA本身变为16的最小倍数？小于数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:37:33.683

这是对 CPU 的提示。[我从 ARM 网站上的一篇博](http://blogs.arm.com/software-enablement/161-coding-for-neon-part-1-load-and-stores/)文中读到了有关这种提示有用性的唯一内容，声称它使加载速度更快，但没有说明如何或为什么。可能是因为 CPU 可以发出更广泛的负载。

> > 您还可以使用可选的 : 参数为 Rn 中传递的指针指定对齐方式，这通常会加快内存访问速度。

如果您提供*提示*，则必须确保它`DATA`与 16 字节对齐，否则您将获得硬件异常。

[此硬件行为在ARM ARM](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0406b/index.html)的 VLD1 描述中描述为

```
if ConditionPassed() then
    EncodingSpecificOperations(); CheckAdvSIMDEnabled(); NullCheckIfThumbEE(n);
    address = R[n]; if (address MOD alignment) != 0 then GenerateAlignmentException();
    if wback then R[n] = R[n] + (if register_index then R[m] else ebytes);
    Elem[D[d],index,esize] = MemU[address,ebytes]; 
```

主要是这条线

```
if (address MOD alignment) != 0 then GenerateAlignmentException(); 
```

我实际上无法理解为什么 CPU 可以自行检查对齐并应用最佳条件。可能会花费太多的周期。

# java - Java 7 使用可变参数重载

> ID：14708681
> 
> 赞同：6
> 
> 时间：2013-02-05T13:29:27.813
> 
> 标签：java, overloading, variadic-functions

> **可能重复：**
> [可变参数和重载的错误？](https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading)

谁能解释一下这个是如何工作的：

```
class Vararg {
    static void vararg(int... x) {
        System.out.println("Integer..."); 
    }

    static void vararg(long... x) { 
        System.out.println("long..."); 
    }

    public static void main(String [] args) {
        int s = 0;
        vararg(s,s);
    }
} 
```

获取编译时错误

```
class Vararg {
    static void vararg(Integer... x) {
        System.out.println("Integer..."); 
    }

    static void vararg(long... x) {
        System.out.println("long..."); 
    }

    public static void main(String [] args) {
        int s = 0;
        vararg(s,s);
    }
} 
```

还会出现编译时错误。当我们使用可变参数重载时的机制是什么？这是重载可变参数方法的错误吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T13:37:20.550

In substance, to determine which method is applicable, [the compiler runs a few steps](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2):

*   first trying to find a method without using boxing/unboxing or varargs
*   second trying to find a method, allowing boxing / unboxing, but without varargs
*   third allowing boxing, unboxing and varargs

In your case, the third step is applicable to all methods.

The compiler then determines which methods are applicable and if one is more specific than another. The detailed rules are in the [JLS 15.12.2.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.4). In short, it looks at the types and checks if one is more specific than another (i.e. one type is a subclass of the other for references or one type is narrower than another for primitives).

In your case:

*   in example 1, both methods are applicable but `int` is more specific than `long` so the `vararg(int...)` is chosen
*   in example 2, `Integer` has no *specificity* relationship with `long` (one is a reference the other is a primitve), so both are maximally specific and there is an ambiguity which leads to a compile error.

* * *

**EDIT**

I thought you were saying that your first example compiles but not the second (which is the expected behaviour). You seem to be saying that neither compiles, in which case it is probably due to a bug in you version of `javac`, which has been fixed with Java 7\. See details in the [release notes](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html), section called "Changes in Most Specific Varargs Method Selection".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:40:17.327

由于您在 vararg(type... var) 方法中发送了 int 值，并且重载的方法包含一个 Integer 和一个 long 因此，int 值会自动转换为 long 并因此产生歧义。在重载方法中使用不同的参数类型。

```
class Vararg {
static void vararg(Integer... x) {
    System.out.println("Integer..."); 
}

static void vararg(String... x) {
    System.out.println("String..."); 
}

public static void main(String [] args) {
    int s = 0;
    vararg(s,s);
} 
```

}

# html - 清除响应表中的 colspan

> ID：14708682
> 
> 赞同：1
> 
> 时间：2013-02-05T13:29:29.397
> 
> 标签：html, css, responsive-design, html-table

我有一个响应表（在可变 div 宽度内设置为 100% 宽度），我试图在其中“重置”colspan，以便下一个表行不继承固定宽度`td`。

在我的示例中，数字 td（1 到 7）具有 40px 的固定宽度，由“位置”类给出。下一个表格行有两个按钮，每个按钮应该是 50%。我可以通过在示例中添加半类来做到这一点，但这会撤消“位置”类的宽度。因为我有 8 个 td，所以我给每个按钮的 colspan 为 4，但最后一个按钮 td 继承了 4 个“位置”类的宽度，所以它设置为 160px 固定.. 是否可以清除 colspan 和固定宽度呢？

数字可能取决于 (1-7)，因此添加具有相同数量数字的 colspan 不是一个好的解决方案。

[演示](http://jsfiddle.net/zt5W9/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:46:38.497

正如我在评论中所说

“代码运行良好。但第一个`td`宽度比其他代码最大。`colspan="4"`选择前 4`td`秒（名称、1、2、3），第二个`colspan`选择其他 4`td`秒（4、5、6、7）。

这不能与`td`. 如果你愿意，试试这个方法。

**HTML**

```
<tr>
    <td colspan="8">
        <div class="half"><a href="#" class="button">Button one<a/></div>
        <div class="half"><a href="#" class="button">Button two<a/></div>
    </td>
</tr> 
```

**CSS**

```
.half{
    float: left;
    width: 50%;
} 
```

演示：http: [//jsfiddle.net/enve/zt5W9/2/](http://jsfiddle.net/enve/zt5W9/2/)

# ios - 直接从 iOS 应用登录 facebook - facebook sdk 3.1

> ID：14708685
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:39.583
> 
> 标签：ios, facebook

我已经看到一些应用程序使用弹出窗口让用户在应用程序内登录到 Facebook。

我搜索了很多，知道 Facebook.m 需要更改。但是要改变的方法并不存在。所以我假设这是针对以前版本的 sdk (fb sdk 3.0)

在 sdk 3.1 中，`FBSession.m`似乎是需要更改的文件。我尝试`safariAuth:NO`在某些地方制作，但没有帮助。

我尝试用 That 替换所有`FBSessionLoginBehavior`枚举`FBSessionLoginBehaviorForcingWebView`也没有帮助。

怎么做？

我使用`openActiveSessionWithReadPermissions:`方法登录

好的，有两个地方在`safariAuth:YES`那里。我在第一个，第二个，两个地方都将值更改为 NO。弹出窗口来了，但它只是一个带有活动指示器的白屏。没有登录的东西出现。

更新：所以我首先更改了 safariAuth:NO，并且仅在我使用的方法中更改了 FBSessionLoginBehaviorForcingWebView。它现在有点工作。

登录webView出现，我登录。然后，当我尝试调用重新授权方法时，会出现 Web 视图以获得发布权限。它登录，但没有发生该方法的回调`reauthorizeWithPublishPermissions`和回调`startWithGraphPath`。

# regex - 我的 Perl 正则表达式匹配代码无法正常工作

> ID：14708687
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:43.960
> 
> 标签：regex, perl, utf-8

我有一个不能正常工作的脚本 perl 的问题。该脚本在参数上采用 2 个文件：

第一个是词法：

```
a
à
abaissa
abaissable
abaissables
abaissai
abaissaient
abaissais
abaissait
abaissâmes 
```

第二个是语料库：

```
ASEAN New Markets (renommé « Equity ASEAN » à partir du 24 juin 2011), Gems World, Emerging Internai Demand (renommé « Equity Emerging Internai\
 Demand » à partir du 24 juin 2011), Emerging Markets (intégré au Compartiment « Emerging World » le 24 juin 2011) et Emerging World (renommé «\
 Equity Emerging World » à partir du 24 juin 2011).
Les Actions de catégorie « B » ne sont pas soumises à des Frais sur vente réglés d'avance (c'est-à-dire des Frais sur vente qui réduisent le mo\
ntant de la souscription au Fonds d'un investisseur) mais sont soumises à des FVDE prélevés sur les rachat d'Actions de catégorie « B » effectu\
és dans les quatre (4) années suivant la date d'achat (qui, pour les Actions de catégorie « B » acquises le 29 février lors de n'importe quelle\
 année, seront réputées avoir été achetées le jour précédent) comme suit :
Les Actions de catégorie « B » peuvent être échangées à la valeur liquidative par Action des Actions de catégorie « B » du Portefeuille sans qu\
'aucun Frais de vente ne soit prélevé à ce moment-là.
« Jour ouvrable » :
Les « transactions couvertes » comprennent les prêts ou extensions de crédit, les achats d'actifs et certains autres types de transactions (y c\
ompris les transactions sur produits dérivés et les garanties) qui entraîneraient pour les entités bancaires ou leurs sociétés affiliées un ris\
que de crédit par rapport à des fonds gérés par leurs sociétés affiliées.
«CSSF» désigne la Commission de Surveillance du Secteur Financier.
« Jour de négociation » :
«Directive 78/660/CEE» (Directive 78/660/EEC) désigne la directive 78/660/CEE du 25 juillet 1978 fondée sur l’Article 54 paragraphe 3 g) du Tra\
ité concernant les comptes annuels de certaines formes de sociétés, telle que modifiée.
les « démarcheurs » ou les « commissions d'indication de clients » pour avoir orienté les investisseurs vers les Portefeuilles, Comptes client/\
GS et autres produits ;
« Global Diversified Equity » - Ce Compartiment vise l'appréciation du capital sur le moyen et long terme en investissant principalement dans u\
n portefeuille diversifié d'actions et d'instruments apparentés à des actions émis par des sociétés du monde entier. 
```

和脚本：

```
use strict;
use utf8;
open(LEX, "<$ARGV[0]" ) or die "Usage: ./script PATH_TO_LEXIQUE PATH_TO_CORPUS\nAn error occured, open: $!";

my $tmp = "";

while ( <LEX> )
{
    $tmp = $_;

    open(CORPUS, "<$ARGV[1]" ) or die "Usage: ./script PATH_TO_LEXIQUE PATH_TO_CORPUS\nAn error occured, open: $!";

    S: while ( <CORPUS> )
    {
        if ($_ =~ m/$tmp/)
        {
            print "Matched !";
    }
        last S if $_ =~ m/$tmp/;
    }
    if ($_ =~ m/$tmp/)
    {

    }
    else
    {
        print $tmp;
    }
    close(CORPUS);
}
close(LEX); 
```

但是正则表达式永远不会匹配，尽管他应该这样做，因为两个文档中都存在字符“à”。

我尝试了几个测试，似乎 $tmp = a（词汇的第一行）的长度（$tmp）等于 4？！任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:38:09.173

我认为问题在于您没有读取具有正确编码的文件。

使用 utf8 不是为了这个。

[如何使用菱形运算符 (<>) 读取 UTF-8？](https://stackoverflow.com/questions/519309/how-do-i-read-utf-8-with-diamond-operator)

打开文件后使用binmode，utf8。

```
binmode LEX, ':utf8';
binmode CORPUS, ':utf8'; 
```

使用 data::dumper 打印出实际数据进行检查。

使用 Data::Dumper；...

```
S: while ( <CORPUS> )
{

    if ($_ =~ m/$tmp/){
        print "Matched !";
    }
    die Dumper($tmp,$_); 
    last S if $_ =~ m/$tmp/;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T13:44:29.620

行以换行符结束。您正在搜索两个字符“a\n”而不是“a”。用于[`chomp`](http://perldoc.perl.org/functions/chomp.html)删除尾随的换行符。

已修复，以及许多其他问题和糟糕的代码：

```
use strict;
use warnings;
use utf8;
use open ':std', ':utf8';

@ARGV == 2
    or die("Usage: ./script PATH_TO_LEXIQUE PATH_TO_CORPUS\n");

open(my $LEX, "<", $ARGV[0])
    or die("Can't open $ARGV[0]: $!\n");

WORD: while (my $word = <$LEX>) {
    chomp($word);
    my $pat = quotemeta($word);

    open(my $CORPUS, "<", $ARGV[1])
       or die("Can't open $ARGV[1]: $!\n");

    while (<$CORPUS>) {
        if (/$pat/) {
            print "Matched $word!\n";
            next WORD;
        }
    }

    print "Didn't match $word\n";
} 
```

* * *

要调试，

1.  删除每个文件中除第一行之外的所有内容。

2.  将以下内容添加到您的代码中：

    ```
    use Data::Dumper qw( Dumper );

    sub dump_str {
        local $Data::Dumper::Useqq = 1;
        local $Data::Dumper::Terse = 1;
        local $Data::Dumper::Indent = 0;
        return Dumper($_[0]);
    } 
    ```

3.  在之前添加以下内容`if (/$pat/)`：

    ```
    printf("\$_=%s; \$pat=%s\n", dump_str($_), dump_str($pat)); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:44:01.400

$tmp=$_ 之前的行你需要一个 chomp 来删除 eol 字符

# ios - 保留此 JSON 数据以在 iOS 6 中的 UITableView 中使用的最佳方法

> ID：14708690
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:46.680
> 
> 标签：ios, json, uitableview

我的服务器正在向我发送 JSON 响应，如下所示：

```
[
  {
    "fields": {
      "message": "Major Network Problems", 
      "message_detail": "This is a test message"
    }, 
    "model": "notification", 
    "pk": 5
  }, 
  {
    "fields": {
      "message": "test", 
      "message_detail": "Some content"
    }, 
    "model": "notification", 
    "pk": 4
  }, 
  {
    "fields": {
      "message": "Test Message", 
      "message_detail": "Testing testing"
    }, 
    "model": "notification", 
    "pk": 3
  }
] 
```

我想用每个项目的一行填充一个 UITableView，只显示字段的值，`message`然后我将点击该行以显示一个包含`message`和`message_detail`值的新视图。这些消息可能会在以后`pk`维护该值的日期更新，因此保留该信息可能很重要。

解析这些数据并将其持久化以供下次启动应用程序使用的最合适和最有效的方法是什么？

我认为 plist 将是一个好方法，但我希望看到一些建议，包括一些关于如何最好地从提供的 JSON 数组到填充 UITableView 并为下次启动保留数据的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:36:28.057

假设您有一些类属性：

```
@interface ViewController ()
@property (nonatomic, strong) NSArray *array;
@end 
```

只需使用`NSJSONSerialization`：

```
NSError *error;
NSData *data = [NSData dataWithContentsOfURL:url];
self.array = [NSJSONSerialization JSONObjectWithData:data
                                             options:0
                                               error:&error]; 
```

如果您想将数组保存在您的`Documents`文件夹中以进行持久存储，以便在将来调用应用程序时进行检索，您可以：

```
NSString *docsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *filename = [docsPath stringByAppendingPathComponent:@"results.plist"];
[self.array writeToFile:filename atomically:NO]; 
```

稍后在下次调用时从文件中读取它（以防您不想从服务器重新检索它）：

```
NSString *docsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *filename = [docsPath stringByAppendingPathComponent:@"results.plist"];
self.array = [NSData dataWithContentsOfFile:filename]; 
```

要将它用于 a `UITableView`，您可以将其存储在类属性中并响应适当的`UITableViewDataSource`方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    NSDictionary *rowData = self.array[indexPath.row];
    NSDictionary *fields = rowData[@"fields"];

    cell.textLabel.text = fields[@"message"];
    cell.detailTextLabel.text = fields[@"message_detail"];

    return cell;
} 
```

# unit-testing - 想在 Rails 3 中启动 Rspec 如何从基本免费开始

> ID：14708692
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:54.840
> 
> 标签：unit-testing, rspec, ruby-on-rails-3.2, tdd, rspec-rails

我想使用 Rspec 启动 TDD，所以我应该从哪里开始

1) 如何在 Rails 中获得 Rspec 集成？2) 我可以从哪里获得与文档相关的帮助？3) 我如何获得基本的入门指南和推进支持？4) 最好使用哪些宝石组合？5）需要免费资源而不是定价相关讲座

**注意：**请不要提供需要登录和涉及定价的链接也不需要厚重的书:) 我想学习重点的东西而不是阅读一本无聊的书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:50:37.400

你知道如何使用 rspec 吗？或者您对 rspec-rails 集成部分感兴趣。

对于后者，您可以查看[rspec-rails](http://rubydoc.info/gems/rspec-rails/frames) gem。通常你会更新`Gemfile`你的 rails 项目目录中的文件以包含这个用于开发和测试环境的 gem。然后运行

```
bundle update 
```

那应该安装gem。然后，您可以按照此操作创建规范文件夹 et.all。

```
rails generate rspec:install 
```

现在，当您生成模型时，它也应该为规范文件创建存根。

我正在使用Rspec[书](http://rspec.info/)和[pragprog rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)书。还在读书。。

我看到了一个可能对你有用的[免费教程。](http://ruby.railstutorial.org)

# ruby-on-rails - 是否可以使用 Paperclip 将 Amazon Cloudfront 签名 URL 用于附件

> ID：14708693
> 
> 赞同：4
> 
> 时间：2013-02-05T13:29:56.733
> 
> 标签：ruby-on-rails, paperclip, amazon-cloudfront

我正在使用 Paperclip 在 Amazon S3 上存储图像附件并通过 Cloudfront 交付它们。我环顾四周，找不到与签名 URL 一起使用以保护内容的示例。我想知道这里是否有人知道如何做到这一点？

谢谢，

伦纳德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-01T15:54:10.347

有点晚了，但对于寻找答案的人来说永远不会太晚。

像往常一样将图片上传到 S3，设置`s3_permissions`为私有，这样它们就无法通过 S3 进行公共访问。设置`s3_host_alias`回形针在询问附件的 URL 时使用该主机，然后只需签署该 URL。

您可以同时使用签名 URL 或签名 cookie。例如，使用`cloudfront-signer`宝石：

```
has_attached_file :photo,
                  s3_permissions: :private,
                  s3_host_alias: "dcx01yp1dg1u1.cloudfront.net"

# Now photo.url will point to dcx01yp1dg1u1.cloudfront.net instead of S3
Aws::CF::Signer.sign_url photo.url, expires: Time.now + 600 
```

有关其他详细信息，请参阅[https://github.com/leonelgalan/cloudfront-signer#usage](https://github.com/leonelgalan/cloudfront-signer#usage)。免责声明，我是这个 gem 的当前维护者。

# php - 如何在没有请求范围的情况下呈现资产 URL

> ID：14708694
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:56.727
> 
> 标签：php, symfony, twig

我遇到了一个问题，这个问题在这个 GitHub 问题 [https://github.com/symfony/symfony/issues/4514中得到了很好的解释](https://github.com/symfony/symfony/issues/4514)

短版：无法从 CLI 呈现资产 URL，因为没有 Request 对象。Github 问题已关闭。我想这不是一个错误，但它阻止了我的系统在 cronjobs 中呈现 HTML 电子邮件。

**所以我的问题：**

有没有办法允许模板`{{ asset() }}`在没有服务器请求范围的 Symfony 命令中使用？

某种虚拟请求听起来可以工作，但我不知道如何进入那个特定的黑匣子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:12:49.087

就像[如何在控制台命令中发送电子邮件中解释的一样](http://symfony.com/doc/2.0/cookbook/console/sending_emails.html)

这样做

```
$context = $this->getContainer()->get('router')->getContext();
$context->setHost('example.com');
$context->setScheme('https'); 
```

# matplotlib - 在 matplotlib 中以厘米为单位指定图形大小

> ID：14708695
> 
> 赞同：46
> 
> 时间：2013-02-05T13:29:57.143
> 
> 标签：matplotlib

我想知道您是否可以在 matplotlib 中以厘米为单位指定图形的大小。此刻我写道：

```
def cm2inch(value):
    return value/2.54

fig = plt.figure(figsize=(cm2inch(12.8), cm2inch(9.6))) 
```

但是有本地方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-04-01T13:31:25.387

这不是对“**有本地方式吗？ ”这个问题的答案。**''，但我认为，有一种更优雅的方式：

```
def cm2inch(*tupl):
    inch = 2.54
    if isinstance(tupl[0], tuple):
        return tuple(i/inch for i in tupl[0])
    else:
        return tuple(i/inch for i in tupl) 
```

然后可以发出`plt.figure(figsize=cm2inch(12.8, 9.6))`，我认为这是一种更清洁的方式。该实现还允许我们使用`cm2inch((12.8, 9.6))`，我个人不喜欢，但有些人可能会这样做。

* * *

**编辑：**尽管目前无法在本地执行此操作，但我在[**这里**](https://github.com/matplotlib/matplotlib/issues/1369)找到了一个讨论。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-19T13:34:06.723

我已经向 GitHub 上的 matplotlib 存储库提交了一个拉取请求，以包含图形的 set_size_cm 和 get_size_cm 功能（[https://github.com/matplotlib/matplotlib/pull/5104](https://github.com/matplotlib/matplotlib/pull/5104)）

如果它被接受，那应该允许您使用*本机方法*来设置以厘米为单位的尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T12:02:14.180

AFIK`matplotlib`没有转换功能。

如果您经常需要转换单位，您可以考虑使用[pint](http://pint.readthedocs.org/)。它还提供`NumPy`支持。

对于您的示例，您可以执行以下操作：

```
from pint import UnitRegistry
ureg = UnitRegistry()

width_cm, height_cm = (12.8 * ureg.centimeter, 9.6 * ureg.centimeter)
width_inch, height_inch = (width_cm.to(ureg.inch), height_cm.to(ureg.inch))

figsize_inch = (width_inch.magnitude, height_inch.magnitude)
fig = plt.figure(figsize=figsize_inch) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T01:27:11.080

我认为[这里](https://matplotlib.org/devdocs/gallery/subplots_axes_and_figures/figure_size_units.html)提供的解决方案也很有帮助。所以，在你的情况下，

```
cm = 1/2.54  # centimeters in inches
plt.figure(figsize=(12.8*cm, 9.6*cm)) 
```

# java - EasyMock 是否对 JUnit 代码进行对象注入？

> ID：14708696
> 
> 赞同：0
> 
> 时间：2013-02-05T13:29:59.067
> 
> 标签：java, junit, easymock

我是 JUnit 和 EasyMock 的新手。我需要将一些类注入到我的 JUnit 测试中。

```
private static TheManager theManager;

public static void setUpBeforeClass() throws Exception {
theManager = EasyMock.createMock(TheManagerImpl.class);
theManager.init();
} 
```

这会实例化“TheManagerImpl”的对象吗？正如我认为的那样，它没有在实现中调用代码。如何让 EasyMock 为我做这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:47:28.627

EasyMock 不会创建 TheMangerImpl 的实例，而是它的模拟实例。这个想法是，如果你想测试一个使用 TheManagerImpl 的类 A，你不应该担心 TheManager 是如何实现的，而只关心类 A 中的逻辑。在这种情况下，你为 TheManager 创建一个模拟，将它注入到实例中A 类，然后您在测试中指定 A 类应该如何调用 TheManager（什么方法、什么参数以及 TheManager 应该返回什么）。

# php - 如何在不使用 Yii 的情况下获取基于 Yii 的 URL 的模块、控制器、操作和请求参数

> ID：14708704
> 
> 赞同：1
> 
> 时间：2013-02-05T13:30:18.750
> 
> 标签：php, yii, yii-components

**设想**

我有一个 YII 项目，它与 URL Manager（SEO 友好 URL）一起工作正常，因此 URL 将如下所示

[http://example.com/Controllername/action/paramName/ParamValue](http://example.com/Controllername/action/paramName/ParamValue)

我在行 php 中实现了另一个 php 应用程序（没有 Yii），我将在行 php 应用程序中将此 URL 作为输入参数，但我需要将其分解为单独的模块、控制器、操作和参数。

我想使用 Yii 的相同算法来解码模块、控制器、动作、参数名称和值。

如何通过在行 php 代码中提供 Yii 的 URL 来获取模块名称、控制器名称、操作名称和参数名称？

注意：我在 Url Manager 中没有特殊条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:15:18.087

好吧，您的 ulrManager 可能有一些 url 规则。如果不知道规则，就不可能可靠地正确解码参数（以及控制器、模块、动作）。我建议在规则中包含 yii 配置，并使用 yii url manager`parseUrl()`来获取参数。

# asp.net-mvc - Knockout JS - 一种方式绑定以保持服务器值？

> ID：14708708
> 
> 赞同：3
> 
> 时间：2013-02-05T13:30:39.153
> 
> 标签：asp.net-mvc, knockout.js

我目前正在 MVC 应用程序中的 Knockout 中设置一个表单并显示来自数据库的数据，例如：

```
@Html.EditorFor(model => model.AddressPostcode) // This is filled in from the Controller. 
```

这很好，正如预期的那样。但是，我在 Knockout JS 上做了很多工作，并希望在我的搜索中使用这个值（因此，`data-bind="value: postcode"`在这个邮政编码元素上）。

问题？好吧，当您绑定到 时`postcode: ko.observable('')`，预先填充的服务器值将被替换为 ''（正如您所期望的那样）。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:37:12.620

值绑定覆盖了预定义的值，我认为它是同时使用服务器端 MVC 和客户端 MVVM 的反模式，但是如果你真的想采用这条路线，你需要创建自己的绑定，比如

```
ko.bindingHandlers.valueWithInit = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        var observable = valueAccessor();
        var value = element.value;

        observable(value);   

        ko.bindingHandlers.value.init(element, valueAccessor, allBindingsAccessor, context);
    },
    update: ko.bindingHandlers.value.update
}; 
```

# java - 这种 try-catch 嵌套是否可取 - 任何性能成本？

> ID：14708710
> 
> 赞同：3
> 
> 时间：2013-02-05T13:30:53.653
> 
> 标签：java, exception-handling, design-patterns

好吧，问题的标题说明了一切。

在介绍代码之前，我有几点要说明：

*   如果我知道特定类型的异常发生在特定的语句集中，那么将它们全部放在单个 try 中立即放置相应的 catch 是一种好习惯吗？
*   或者我应该将所有容易发生异常的代码放在单个代码块中，并在单次尝试之后放置所有相应的 catch 块。是否有任何与之相关的性能成本？

    ```
    {   
        try
        {
             exec();//can cause ExceptionXYZ
        }
        catch(ExceptionXYZ e){ }            
        try
        {
             exec(); //can cause ExceptionPQR
        }
        catch(ExceptionPQR e){ }
            try
        {
             exec(); //can cause ExceptionABC
        }
        catch(ExceptionABC e){ }
    } 
    ```

那么上面的方法是好还是低于一个

```
 {
        try
        {
             exec(); //can cause ExceptionXYZ          
             exec(); // can cause ExceptionPQR        
             exec(); //can cause ExceptionABC
        }
        catch(ExceptionXYZ e){ }
        catch(ExceptionPQR e){ }
        catch(ExceptionABC e){ }
    } 
```

也有可能混合上述两种模式，比如**在 try 中嵌套 try**。 **关于何时使用的任何其他注意事项/要点？**有一件事是肯定嵌套会使代码复杂一点。

在其他场景中还有一些其他注意事项（**嵌套在 finally 块下**），例如在关闭数据库 JDBC 资源时，我们必须独立处理每次关闭，以确保一次 close() 中的 NullPointerException 不会让其他资源保持打开状态：

```
 try
    { } 
    catch(Exception e)
    { }
    finally
    {
        if (rs != null)  //ResultSet
            try 
            {
                rs.close();
            }
            catch(SQLException se1)
            {
                se1.printStackTrace();
            }
        if(pstmt!=null)  //PreparedStatement
            try
            {
                pstmt.close();
            }
            catch(SQLException se2)
            {
                se2.printStackTrace();
            }
        if(conn!=null)   //Connection
            try
            {
                conn.close();
            }
            catch (SQLException se3) 
            {
                se3.printStackTrace();
            }   
    } 
```

有什么想法吗？或者只是不必要地过度思考。

**编辑**

更多考虑/事实（过度思考：p）

*   **只是概括**一下：如果有一些代码块在任何情况下都需要执行，那么我们应该将它们放在单独的 try-catch 中，并且这些 catch 块之外的任何其他代码都不应导致任何异常：

    ```
    {
       try
       {
          mustexec(); 
       }
       catch(){ }

       noexceptionexec();   

       try
       {
          mustexec();
       }
       catch() { }
    } 
    ```

*   **确保通过 catch() 减少失败**：如果我们确定某些语句集会导致特定的异常集，我们应该将这些代码行放入仅处理相应异常的尝试中，而不是将其放在外部尝试之后。因此，上述第三种情况（混合模式）可能是合适的一种：

    ```
    {
        try
        {
           exec(); //can cause ExceptionXYZ
        }
        catch(ExceptionABC){ }
        catch(ExceptionPQR){ }
        catch(ExceptionXYZ){ }
    } 
    ```

上面的效率可能比

```
 {
        try
        {
           try
           {
              exec(); //can cause ExceptionXYZ
           }
           catch(ExceptionXYZ){ }
        }
        catch(ExceptionABC){ }
        catch(ExceptionPQR){ }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T13:34:21.450

Code1 和 Code2 不等价。

```
try{
   exec1();
   exec2(); // if exec1 fails,  it is not executed
}catch(){}

try{
   exec1();
}catch(){}
try{
   exec2(); // if exec1 fails,  it is  executed
}catch(){} 
```

而对于第 3 点是的。你可以混合你的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T13:35:02.690

如果我要引入一个`catch`块，我更喜欢让它更接近可能引发相应异常的代码，这与我声明变量更接近使用它们的位置的原因相同——即更好的可读性。因此，您的第一个示例显然更可取。

将`try`/`catch`与一系列`if`语句结合起来并不那么干净，因为它要求代码的读者更好地理解异常处理程序块上方发生的事情：具体来说，在您的示例中，读者必须知道只有一个条件是`true`.

尽管有时需要在清理代码中设置异常处理程序，但通常在清理期间“丢弃”二级异常，只报告一级异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:02:27.377

我认为您的主要关注点应该是：

1.  代码的正确性，然后

2.  代码的可读性。

正如其他人指出的那样，您示例中的两种形式并不意味着同一件事。很可能其中一种形式比另一种形式更正确。

如果你有两个同样正确的版本，那么最好的版本就是最易读的版本。

您无法根据此类人工示例对相对正确性或可读性做出合理的判断。所以底线是这个决定没有*最佳实践*规则。

* * *

假设这两个版本的代码同样正确且同样可读，使用多个 try/catch 块与使用多个处理程序的一个 try/catch 相比具有*小的性能优势。*这完全取决于处理异常时会发生什么。如果有多个`catch`块，则 JVM依次`instanceof`对每个`catch`块执行等效的操作，直到找到匹配的块（或耗尽它们）。如果您有 N`catch`个块，则最多需要执行 N 个测试。

但是，我应该强调差异*很小*，*尤其是*当您认为异常应该是*例外*时；也就是说，在绝大多数情况下，您不需要处理异常。（如果这个假设不正确，那么您可能会遇到更大的性能问题，因为 Java 异常中最昂贵的部分*通常*是异常对象的构造。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T13:34:03.497

也可以只使用一个 try-catch，参见以下内容：

```
try {
    // some code that throws different exceptions
}
catch (Exception ex)            
{                
    if (ex is ExceptionA)
    {
        //do something
    }
    else if (ex is ExeptionB)
    {
        //do something
    }
} 
```

等等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T13:39:44.647

嵌套诗句而不是嵌套是一个设计决策。如果您可以从异常中恢复，那么嵌套似乎很好。如果异常是终端，那么不嵌套似乎很好。这是一个例子：

```
try
{
   try
   {
     ... code that may throw RecoverableException1 or TerminalException
   }
   catch (RecoverableException1 exception)
   {
     ... recover.  Perhaps use default values and add a log entry.
   }

   try
   {
     ... code that may throw RecoverableException2 or TerminalException
   }
   catch (RecoverableException2 exception)
   {
     ... recover.  Perhaps use default values and add a log entry.
   }

}
catch (TerminalException exception)
{
  ... log the terminal exception and terminate.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T13:36:33.280

The first (and possibly) only thing you should consider is how to write the simplest and clearest code you can. Only after you have a working application which might have performance problems and you have profiled to determine you have measurable issue. The you can compare alternatives to see if one is better than another.

Until you have established you have a performance issue, I would stick to writing the simplest code you can.

Note: can you assume that if an exception is thrown in the first block you can continue as if it didn't matter, often this is not the case and it makes more sense to wrap all the code in a try/catch block.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T13:34:29.177

正如你所写，你想多了。只需查看[http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)上的官方 Oracle 文档，您就会清楚地看到处理异常的建议方法是

```
try {

} catch (ExceptionType name) {

} catch (ExceptionType name) {

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T13:35:11.633

如果没有异常，进入和离开 try/catch 的 CPU 时间为零。如果方法中有许多 try/catch 块，则将异常分派到适当的 catch 块可能会花费更多的 CPU，因为 JVM 需要在其他块中找到适当的 catch。对我来说，你在这里想多了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-25T10:42:40.800

检查[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)它应该有帮助...

# php - Twig 中的成员过滤器

> ID：14708715
> 
> 赞同：0
> 
> 时间：2013-02-05T13:31:23.617
> 
> 标签：php, symfony, twig

我有一些类别和项目给他们。我希望能够仅删除尚未设置项目的类别。例如，我有书籍类别，但没有添加具体书籍，因此我可以将其删除。我有食品类别，其中有比萨饼、三明治、苹果——所以我不能删除它。我在想如何最好地做到这一点。

```
<table class="table table table-striped spacer">
    {% for c in cat %}
        <tr>
            <td>
                {# If in edit mode, display edit form #}
                {% if id == c.id %}

                <form class="form-inline" action="{{ path('edit_category', {'id': c.id}) }}" method="post" {{ form_enctype(form) }}>

                    {% form_theme form 'EMBudgetTrackerBundle:Forms:inputs.html.twig' %}

                    {% for field in form %}
                    {{ form_row(field) }}
                    {% endfor %}

                    <button type="submit" class="btn"><i class="icon-ok"></i></button>

                </form>

                {# Else display the name #}
                {% else %}
                    {{ c.name }} 
                    <a href="{{ path('edit_category', {'id': c.id}) }}"><i class="icon-pencil"> </i></a> 
                    <a href="{{ path('delete_category', {'id': c.id}) }}"> <i class="icon-remove"></i></a> 
                {% endif %}
            </td>
        </tr>
    {% endfor %}
</table> 
```

这就是我为每个类别所做的。我想要的是如果有添加的项目，不提供删除链接。我唯一能想到的就是有两个数组——一个是带有项目的类别，另一个是没有项目的类别，并且对于这两个数组都使用了这个 for 循环。但这会导致代码重复——一切都是一样的，只是一个循环没有`<a href="{{ path('delete_category', {'id': c.id}) }}"> <i class="icon-remove"></i></a>`这一行，而且看起来不太优雅。我在想类似的东西

```
if(c.name not member of array_with_categories_without_items) 
then display the delete link 
```

但我不知道是否有办法做到这一点。有人可以给我一些想法吗？非常感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:37:39.723

根据您的应用程序，您可以做几件事。

我的偏好是显示所有类别的删除链接，并在您的实际删除页面上进行验证。这有几个额外的好处：

*   **让你在删除页面上思考这个逻辑**。当用户删除一个类别时，许多人都陷入了隐藏他们忘记实际检查该逻辑的链接中。这意味着如果他们手动更改删除链接以将类别的 ID 包含在项目中，您的应用程序将很乐意将其删除。
*   **降低整个应用程序的复杂性**。并不是说一个简单的 MySQL 查询会使您的应用程序更复杂，但它肯定有助于视图层在没有条件逻辑来显示链接的情况下表现得更干净一些
*   **减少服务器负载**。在打印删除链接之前，您不必检查每个类别中的子项（尽管，根据您的设置，这可能是一个便宜的操作）
*   **它让用户知道发生了什么**。否则，在不了解您的应用程序的情况下，他们会想知道为什么没有删除链接。有一个删除链接，如果他们单击它会显示错误，这将告诉他们如果他们想删除一个类别，他们需要删除所有子项。

话虽如此，您可以这样做：

```
SELECT
    c.category_name,
    c.category_id,
    COUNT(f.food_id) AS children
FROM 
    categories c
    LEFT JOIN food f ON (c.category_id = f.food_id)
GROUP BY
    c.category_id 
```

这显然是在猜测您的数据库结构，但这将为您提供一个类别列表，其中每个类别都有一个子项

# java - 我如何解决 Android 应用程序的 StackOverflowError？

> ID：14708720
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:31:40.483
> 
> 标签：java, android

****我是一名新的 android 开发人员。我使用 android 屏幕布局...lauout 设计是****

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/row1"
android:orientation="horizontal" >

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".1" >
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".5"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".2" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:src="@drawable/man" />
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".2" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:src="@drawable/man" />
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".2" >
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".1" >
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="3"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="BRUCE LEE $ MAO ZEDONG"
android:textColor="#000"
android:textSize="12sp"
android:textStyle="bold" />

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:layout_marginLeft="25dp"
android:src="@drawable/clock" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="30 minute ago "
android:textColor="#000"
android:textSize="10sp"
android:textStyle="bold" />
</TableRow>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="3"
android:background="@drawable/backimage"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".5" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="4" >

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".2" >
</TableRow>

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="1" >

<ImageView
android:id="@+id/imageView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/defaultbi" />
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="3"
android:orientation="vertical" >

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="LOREM IPSUM DOLOR SPECIAL OFFER 30%"
android:textColor="#000"
android:textSize="8sp"
android:textStyle="bold" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="prosato vai is a software enginure jhjdshjhjkfhjkfjksdjjdjjjkjiddsdj"
android:textColor="#fff"
android:textSize="8sp"
android:textStyle="bold" />
</LinearLayout>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".4"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".5" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="2" >

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/arrow" />
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".5" >
</TableRow>
</LinearLayout>
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".8" >
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:src="@drawable/pin" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="245 milles 22mb Baker Street London"
android:textColor="#000"
android:textSize="8sp"
android:textStyle="bold" />

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/cro" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="at Scroll Bar"
android:textColor="#000"
android:textSize="8sp"
android:textStyle="bold" />
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".1" >
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="fill_parent"
android:layout_height="1dp" >

<View
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#a3a3a3" />
</TableRow>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/row1"
android:orientation="horizontal" >

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".1" >
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".8"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".8" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1.2" >

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/man" />
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight=".8" >
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight=".1" >
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="4"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="JACKIE CHAN"
android:textColor="#000"
android:textSize="12sp"
android:textStyle="bold" />

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:layout_marginLeft="45dp"
android:src="@drawable/photo" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:layout_marginLeft="5dp"
android:text="photo "
android:textColor="#000"
android:textSize="10sp"
android:textStyle="bold" />

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:src="@drawable/clock" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:layout_marginLeft="5dp"
android:text="40 minute ago"
android:textColor="#000"
android:textSize="10sp"
android:textStyle="bold" />
</TableRow>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="3"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="4" >

<TableRow
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="2.5" >

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="fghghjdjdjfhdjfhjhjjjn  jhjhdfjds hjhdfjdnf " />
</TableRow>

<LinearLayout
android:layout_width="0dip"
android:layout_height="fill_parent"
android:layout_weight="1"
android:orientation="vertical" >

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >
</TableRow>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/threetwo"
    android:text="Agree"
    android:textColor="#ffffff"
    android:textSize="14sp"
    android:textStyle="bold" />
</TableRow>

</LinearLayout>
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" >

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:src="@drawable/pin" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="245 milles 22mb Baker Street London"
android:textColor="#000"
android:textSize="8sp"
android:textStyle="bold" />

<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/cro" />

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:text="at Scroll Bar"
android:textColor="#000"
android:textSize="8sp"
android:textStyle="bold" />
</TableRow>
</LinearLayout>

<TableRow
android:layout_width="0dip"`enter code here`
android:layout_height="fill_parent"
android:layout_weight=".2" >
</TableRow>
</LinearLayout>

</LinearLayout> 
```

但是当我运行我的应用程序时，它会显示 StackOverflowError.那些错误显示到 logcat .....

```
 FATAL EXCEPTION: main
    java.lang.StackOverflowError
at android.view.View.draw(View.java:6739)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)`enter code here`
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.ja`enter code here`va:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.widget.AbsListView.dispatchDraw(AbsListView.java:1365)
at android.widget.ListView.dispatchDraw(ListView.java:3046)
at android.view.View.draw(View.java:6845)
at android.widget.AbsListView.draw(AbsListView.java:2257)
at android.view.View.buildDrawingCache(View.java:6501)
at android.view.View.getDrawingCache(View.java:6287)
at android.view.ViewGroup.drawChild(ViewGroup.java:1573)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.support.v4.view.ViewPager.draw(ViewPager.java:1923)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at    com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1872)
at android.view.View`enter code here`Root.draw(ViewRoot.java:1422)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1167)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1744) 
```

**现在，我该如何解决这个错误，请帮帮我..（我使用 htc 2.2 os 设备）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:39:14.507

首先，你必须重新定义你的布局。您正在不当使用`TableRow`. A`TableRow`应始终用作 a 的子级`TableLayout`。

我建议您阅读有关在 Android 中设计正确布局的文档。很少有用途`TableLayout/TableRow`（但很多人在网页设计中滥用它们，增加了很多不受欢迎的额外处理）。通常使用一个主要`RelativeLayout`的几个内部`LinearLayout`和`RelativeLayout`实例（尽量不要嵌套很多），您可以实现大多数布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:37:47.350

## 堆栈溢出错误

当正在运行的程序的堆栈深度超过某些平台或 VM 特定限制时抛出。通常，这只会在程序变得无限递归时发生，但它也可能发生在正确编写（但深度递归）的程序中。

# linux - Bash 文件名前缀替换

> ID：14708721
> 
> 赞同：0
> 
> 时间：2013-02-05T13:31:41.980
> 
> 标签：linux, bash, shell, operators, filenames

我已经阅读过，但我似乎无法理解这一点。我正在将我用 flac 制作的翻录文件转换为 mp3 以供 mp3 播放器使用。不过，这套 CD 来自两张 CD，因此它们的数字前缀是不可取的。

一些文件名示例：

```
01 Foo 9.flac
02 Foo 10.flac
03 Foo 11.flac
04 Foo 12.flac
05 Foo 13.flac
25 Foo 1.flac
26 Foo 2.flac
... 
```

这是我到目前为止所拥有的

```
$for file in *Foo*.flac; do flac -cd "$file" | lame -q 0 -V0 - "/media/mp3player/speech/${file%.flac}.mp3"; done 
```

如何删除数字和空格前缀，理想情况下将其替换为与结束数字对应的内容？

所以朝着正确的方向迈出一步是
从：25 Foo 1
到：Foo 1

但这将是理想的
从：25 Foo 1
到：1 Foo 1

我已经阅读了 Bash 参考手册的 Shell Parameter Expansion 部分，但没有示例，我很难过。我会继续修补，但我想发帖看看是否有人有任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:57:12.770

可能有更好的版本，但这应该可以工作：

```
for file in *Foo*.flac
do
  n=${file#*Foo} # erase from filename Foo and preceding characters
  n=${n%.flac}   # get file index
  fileout=${n}${file#[0-9]?}.mp3  #this works as long as you have two digits numbers only
  flac -cd "$file" | lame -q 0 -V0 - "/media/mp3player/speech/${fileout}.mp3"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:18:09.187

```
awk '{old=$0;a=$NF;gsub(".flac","",a);$1=a;new=$0;system("mv \""old"\" \""new"\"");}' 
```

测试如下：

```
> ls -1 01*
01 Foo 25.flac
01 Foo 26.flac
01 Foo 9.flac

> ls -1 01*| awk '{old=$0;a=$NF;gsub(".flac","",a);$1=a;new=$0;system("mv \""old"\" \""new"\"");}'

> ls -1 *.flac
25 Foo 25.flac
26 Foo 26.flac
9 Foo 9.flac
> 
```

# sql - 从元组中选择不为空的列

> ID：14708723
> 
> 赞同：0
> 
> 时间：2013-02-05T13:31:48.110
> 
> 标签：sql, null

想象一下，如果我们有一张桌子：

```
| col1 | val1 | val2 | val3 | val4 | val5 |
------------------------------------------
| 一个 | 1 | 空 | 空 | 空 | 1 |
| 乙| 空 | 1 | 空 | 1 | 空 |
| C | 1 | 空 | 1 | 空 | 空 |
```

我可以编写一个 SQL 查询来给我以下结果，我可以在其中获取不为空的列：

```
| col1 | val1 | val5 |
----------------------
| 一个 | 1 | 1 |
```

而不是使用单独的函数来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:29:32.257

答案是“不”，不是标准 SQL。该`select`语句指定返回的特定列。您不能改变列数。

一种选择是切换到“动态”SQL，将查询创建为字符串，然后执行。用于此的方法高度依赖于数据库。

另一种选择是将所有值分组到一个列中，使用类似的东西`listagg`（您的评论表明您正在使用 Oracle）。

如果您还想要非 NULL 列名，则可以使用`listagg`一个巨大的`case`语句来执行此操作。或者，您可以取消透视数据以获取名称-值对，然后使用`listagg`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:34:44.180

您没有指定正在使用的 RDBMS，但您可以*取消透视*数据以返回包含非空值的数据。如果您没有`UNPIVOT`功能，则可以使用`UNION ALL`：

```
select col1, 'val1' col, val1
from yourtable
where val1 is not null
union all
select col1, 'val2' col, val2
from yourtable
where val2 is not null
union all
select col1, 'val3' col, val3
from yourtable
where val3 is not null
union all
select col1, 'val4' col, val4
from yourtable
where val4 is not null
union all
select col1, 'val5' col, val5
from yourtable
where val5 is not null 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/14c81/4)。

如果您有一个带有 unpivot 函数的 RDBMS，那么查询将类似于以下内容：

```
select col1, col, value
from yourtable
unpivot
(
  value
  for col in (val1, val2, val3, val4, val5)
) unpiv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/14c81/1)。数据作为行而不是单独的列返回，但结果是：

```
| COL1 |  COL | VALUE |
-----------------------
|    A | val1 |     1 |
|    A | val5 |     1 |
|    B | val2 |     1 |
|    B | val4 |     1 |
|    C | val1 |     1 |
|    C | val3 |     1 | 
```

# java - 内部 JSON 对象的 GWT Java 覆盖

> ID：14708724
> 
> 赞同：0
> 
> 时间：2013-02-05T13:31:52.933
> 
> 标签：java, javascript, gwt, overlay

我有一个关于为 JSON 对象创建 GWT Java 覆盖的问题。

```
"flightTracks": [
{
"flightId": 287679776,
"carrierFsCode": "AA",
"flightNumber": "100",
"departureAirportFsCode": "JFK",
"arrivalAirportFsCode": "LHR",
"departureDate": {
"dateLocal": "2013-02-05T18:15:00.000",
"dateUtc": "2013-02-05T23:15:00.000Z"
},
"equipment": "777",
"bearing": 51.350983507381706,
"positions": [],
"waypoints": [
 {
 "lon": -73.76667022705078,
 "lat": 40.63333511352539
 },
.....many different waypoints here.........
 {
 "lon": -73.76667022705078,
 "lat": 40.61666488647461
 },
], 
```

有人告诉我，内部字段“waypoints”是一个数组，可以通过以下方式访问。

```
public final native double getWaypointsLatitude() /*-{
    return this.waypoints[0].lat;
}-*/; 
```

使用这种方法，我只需在位置 0 处获得双精度值。但我需要包含在数组中的所有位置。

我也试过这个：

```
public static final native double[] getLongitude() /*-{

    var longitudes = new Array();

    {
        for (i = 0; i < this.waypoints.length; i++) {
            longitudes[i] = this.waypoints[i];
        }
    }

    return longitudes;
}-*/; 
```

稍后，我想从我的 GWT Java 代码中访问此方法，执行如下操作：

```
for(int i = 0; i< entry.getLongitude().length; i++ ){
hp.add(new Label(""+ entry.getLongitude(i)));

} 
```

但这根本不起作用（我也尝试了不同的方法，但都没有奏效。）

有人可以告诉我如何使用 Java GWT 代码中的循环从内部数组“航路点”访问 lon/lats 吗？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:32:36.930

首先，您的代码不起作用的原因是因为 JavaScript 数组`JavaScriptObject`在 Java 中表示为 a （当通过 JSNI 边界时），并且可以更具体地转换为 a`JsArray`或在您的情况下为 a `JsArrayNumber`。

也就是说，您最好在 Java 中映射与 JavaScript 中完全相同的结构，并带有一个`Coordinates`对象：

```
public class Coordinates extends JavaScriptObject {
  protected Coordinates() { }

  public final native double getLatitude() /*-{ return this.latitude; }-*/;
  public final native double getLongitude() /*-{ return this.longitude; }-*/;
} 
```

在`FlightTrack`对象中：

```
public final native JsArray<Coordinates> getWaypoints() /*-{ return this.waypoints; }-*/; 
```

然后，您可以遍历您的航点并提取它们的经度：

```
JsArray<Coordinate> waypoints = entry.getWaypoints();
for (int i = 0, l = waypoints.length(); i < l; i++) {
  hp.add(new Label("" + waypoints.get(i).getLongitude());
} 
```

* * *

注意：您的`for`循环未优化：`getLongitude()`将构造一个 Array 只是为了读取它的长度，并且您将在每次迭代时都这样做；而不仅仅是使用`getLongitudeCount()`：

```
public native final int getLongitudeCount() /*-{ return this.waypoints.length; }-*/;
public native final double getLongitude(int i) /*-{ return this.waypoints[i].longitude; }-*/; 
```

我不认为以这种方式扁平化你的 API 有任何优势（实际上恰恰相反），所以我宁愿使用更多的`JavaScriptObject`子类来密切映射你在 Java 中的结构（如上所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:37:54.097

您可以使用 JSONParser 如下：

```
JSONValue root = JSONParser.parseStrict(jsonString);
JSONObject obj = root.isObject();
JSONValue waypoints = obj.get("waypoints");
JSONNumber lon = obj.get("lon").isNumber();
double num = lon.doubleValue(); 
```

等等

# spring - WebSphere 7 中使用 Spring（JSR 330 注释）的依赖注入不起作用

> ID：14708725
> 
> 赞同：2
> 
> 时间：2013-02-05T13:31:53.683
> 
> 标签：spring, dependency-injection, websphere, code-injection, jsr330

我有一个使用 Java 6、Spring Framework 3.1.2 和 Mule-ESB 3.3.0 以及与此问题无关的其他库构建的企业应用程序。

我们的 bean 和服务都使用 JSR-330 注释声明`@Named`，`@Inject`分别用于自动组件扫描和依赖注入（没有 EJB，只有服务 bean）。当部署到 JBoss 4.2.3（我们的测试环境）中时，一切正常。但是，当部署到 WebSphere 7 中时，JSR-330 注释似乎不起作用。标记 的 bean`@Named`根本没有被检测到。

我可以保证一切都配置正确（因为它在 JBoss 中工作）。具体来说，`<context:component-scan />`具有`base-package`正确定义的`scope-resolver`属性和正确配置使用的属性`Jsr330ScopeMetadataResolver`（我们也尝试过不使用它）。

我知道 WebSphere 7 (7.0.0.23) 可能不支持这种注释。我还没有用 Spring 等价物对其`@Component`进行测试。`@Autowired`不幸的是，我们非常希望使用 JSR 330 注释，这样我们的类就不会直接依赖于 Spring，即使我们在底层使用了 Spring Framework。

尽管如此，尽管我花了一整天的时间寻找关于 WebSphere 7 不支持 JSR 330 注释的明确声明，但到目前为止我还没有找到任何东西。

此外，我不明白为什么它不起作用，因为我假设 Spring Framework 是通过文件`<context:component-scan />`中的指令完成所有工作的框架`application-context.xml`。

任何人都可以为这个问题带来一些启示吗？

有没有办法通过 WebSphere 7 中的注释激活依赖注入？

如果我从 JSR 330 `@Named`/`@Inject`注释切换回 Spring 自己的注释，`@Component`它`@Autowired`可能会起作用吗？

在绝望的尝试中，我是否可以扩展 Spring`ComponentScanBeanDefinitionParser`以使其即使在 WebSphere 7 中也能检测到 JSR 330 注释？

如果没有任何效果，我最终将退回到纯 XML 配置。然而，这是非常不可取的，因为将有数百个 bean 需要在 XML 中手动配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:13:46.170

我最终通过扩展 Spring Framework 的 Component Scan 和 Autowire 功能想出了一个解决方法。

首先，我在组件扫描器中添加了一个包含过滤器，以便`@Named`注释也被认为有资格检测并注册到 Spring 容器：

```
<context:component-scan base-package="com.mycompany.mysystem">
    <context:include-filter type="annotation" expression="javax.inject.Named" />
</context:component-scan> 
```

之后，我还向 中添加了一个 bean 定义`org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcesso‌​r`，将自动装配资格扩展到`@Inject`注释：

```
<bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor">
    <property name="autowiredAnnotationType" value="javax.inject.Inject" />
</bean> 
```

最初，这可以很好地“重新激活”`@Named`和`@Inject`注释。但是，我仍然在 autowire 候选解决过程中遇到了一些冲突 bean 的问题。这是由于 Spring 和 JSR-330 的默认解析过程不同。这不是什么大问题，因为只有少数豆子属于这种情况。`@Qualifier`通过添加一些战略性的注释，它们都得到了解决。

现在一切都运行良好且优雅，几乎没有额外的配置。尽管如此，我仍然不明白为什么会这样。我所知道的是，当我将应用程序部署到 JBoss 4.2.3 时，确实会出现以下 3 行。另一方面，它们没有出现在 WebSphere 中：

```
INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] JSR-330 'javax.inject.Named' annotation found and supported for component scanning 
```

和

```
DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Creating instance of bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] JSR-330 'javax.inject.Inject' annotation found and supported for autowiring 
```

我仍然不知道为什么会发生这种情况，因为正如@Dreamer 所说，这应该是 Spring 的责任，因此不属于 WebSphere 业务。

如果有人确实有这样的线索，请赐教。我敢肯定，这对参与此讨论的每个人都会非常清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:38:41.210

WebSphere 8 似乎是正确的版本；它支持 EE6（WebSphere 7 是 EE5），而后者又包含 CDI 1.0（因此是 JSR 299）。

下面是来自[DeveloperWorks](http://www.ibm.com/developerworks/websphere/techjournal/1301_stephen/1301_stephen.html)的片段，它总结了 WebSphere 版本、JSR 299 和 JSR 300 之间的关系

> 依赖注入是一种在进入 Java EE 世界之前已经多次出现在各种实现中的技术。Spring Framework 和 Google Guice 库是流行的实现。在 JSR 330 中，尝试将这些功能包含到 J2SE 平台中。**JSR 299 是使用 JSR 330 中定义的 API 并添加更多功能来支持 Java EE 需求的规范**。**IBM WebSphere Application Server V8 和 V8.5（非 Liberty 配置文件）是完全兼容的 Java EE 6 容器并实现 JSR 299**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T21:54:07.730

同意 duffymo，它应该适用于 WS 7。由于 Spring 位于 Websphere 之上，因此 Spring 注释不属于 webshere 的业务（有点）。

您可能需要在 WS 7 上检查的一件事（即使您说每个配置在 JBoss 上工作时都是正确的）是单击您的应用程序 -> 单击`Class loading and update detection`，确保`Classes loaded with local class loader first (parent last)`已选中。这将使服务器首先获取应用程序的库，然后是 websphere 的库。

# javascript - 如何在 WordPress 中包含/需要外部 JavaScript 库？

> ID：14708728
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:11.463
> 
> 标签：javascript, wordpress, google-maps

我正在用 javascript 为 wordpress 页面编写交互式谷歌地图。据我所知，将 javascript 与 wordpress 一起使用的唯一方法是创建一个单独的 .js 文件，然后在 wordpress 页面中从那里调用方法。所以我的问题是，如果我需要在我的 javascript 代码中使用 google maps api，我如何在 .js 文件中“包含”它而不是`<script>`在 html 中使用标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:34:20.293

`include`AFAIK在javascript中没有。看看[wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)。

**编辑**

刚刚偶然发现 Alex Sexton 的[yepnope.js 库](http://yepnopejs.com/)。也许这就是你要找的。

# windows-phone-8 - 在系统范围内捕获 NFC NDEF 文本标签？

> ID：14708729
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:13.747
> 
> 标签：windows-phone-8, nfc, ndef

`NDEF-Text`无论用户当前是在另一个应用程序中还是在主屏幕上，我的 Windows Phone 8 应用程序都应该对编码的 NFC 标签做出反应。在 Android 上，这是通过让应用程序“订阅”某些标签（例如，在我的情况下为 NDEF-Text）来实现的，如果有多个应用程序可以处理扫描的标签。WP8有什么可比的吗？目前，我正在使用

```
 ProximityDevice _device = ProximityDevice.GetDefault();
 long _subscriptionIdNdef = _device.SubscribeForMessage("NDEF", MessageReceivedHandler); 
```

在我的 MainPage 类中，它工作正常，但显然只有当用户在扫描标签之前启动了我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:08:12.903

不幸的是，目前 Windows Phone 8 上的第三方应用程序无法处理 NDEF-Text 标签。

如果您希望操作系统启动您的应用程序，则必须使用 NDEF-LaunchApp 记录类型或注册自定义 URI 方案。

# coding-style - SML 中的嵌套 case 语句

> ID：14708732
> 
> 赞同：19
> 
> 时间：2013-02-05T13:32:32.513
> 
> 标签：coding-style, sml

这更像是一个风格问题，而不是其他任何问题。给定以下代码：

```
case e1 of                    (* datatype type_of_e1  = p1 | p2 *)
    p1 => case e11 of         (* datatype type_of_e11 = NONE | SOME int *)
              NONE => expr11
            | SOME v => expr12 v
  | p2 => case e21 of         (* datatype type_of_e21 = NONE | SOME string *)
              NONE => expr21
            | SOME v => expr22 v 
```

*除了将p1*的表达式括在括号中之外，有没有办法解决`types of rules don't agree`由于尝试将*e11*与*p2进行模式匹配而导致的错误？**p2*模式有另一个 case 语句，以避免“*只是切换模式”的*答案;-)。

 *****更新：**更改了代码以反映更具体的情况

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-18T18:05:42.693

答案是“（”和“）”。我的例子：

```
case e1 of                   
   p1 => ( case e11 of         
              NONE => expr11
              | SOME v => expr12 v )
   | p2 => ( case e21 of         
                NONE => expr21
                | SOME v => expr22 v ) 
```

这真的有效！酷:) 你也可以试试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-05T20:44:22.350

不可以。标准 ML 定义中的句法规则规定 case 表达式的匹配臂试图最大限度地消耗潜在的子句。而且由于语言中没有“结束案例”或类似的标记，解析器会愉快地吃掉你输入的每个“| pat => exp”子句，直到它看到终止匹配子句列表的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T15:28:47.627

简单而简短的回答：不。但是括号有什么问题？

（当然，您也可以用其他方式括起来，例如使用“let”，或将辅助函数分解，但括号是规范的解决方案。）***

# css - 一个选择器的两个过滤器

> ID：14708733
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:36.067
> 
> 标签：css, css-selectors

是否可以在 CSS（包括 3 个）中做这样的事情？

```
ul li:visible:nth-child(odd) {...} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:38:49.447

纯粹使用 CSS 是不可能的。您可以链接伪类，例如[`li:nth-child(2n):hover`](http://jsfiddle.net/pGW9g/1/)但是[`:visible`](http://api.jquery.com/visible-selector/)jQuery，而不是 CSS。

CSS 没有类似的功能，因为 CSS 当前无法确定元素是否可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:51:03.513

我同意安迪但它不会选择第一个元素所以添加`+1`并且代码将`li:nth-child(2n+1):hover.`参考安迪的答案

# php - HTTPS 上的漏洞利用，如何更改 https 表单值

> ID：14708735
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:41.977
> 
> 标签：php, security, exploit

我是电子商务开发人员并且有一个问题，在购买的某些部分，我的代码会生成一个包含购买信息的提交表单。并发送到支付网关。

这个表单是在 PHP 上生成的，在生成后他写

```
document.getElementById('formnid').submit(); 
```

我遇到了问题，因为有人向网关发送折扣值，我不知道如何。

在某些时候，我的项目会在生成此表单并提交后保存日志。在我的日志上一切都很好。所以我想他改变了我的发送信息和网关获取信息之间的值。

有人可以给我一个光明，我需要发现他是如何做到这一点的。

提前TY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:37:48.120

永远不要相信表单上的值，该值必须始终在服务器端设置\验证。根据我收集到的信息，您将值作为表单上的隐藏字段传递，而用户只是在更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:39:06.060

当支付确认从网关返回时，您应该检查实际支付的金额是否与应支付的金额相符。只有这样，用户才付费。可以将价格与您的表格一起发布，但必须始终在完成时进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:40:38.857

如果定价/折扣信息隐藏在 DOM 上（例如，通过隐藏的输入），使用 Chrome 的“开发者工具栏”或 Firefox 的“Firebug”操作 DOM 是微不足道的，允许任何最终用户更改这些隐藏的输入，而无需缓刑。

# xml - 解析一组 XML 文件以生成综合报告

> ID：14708737
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:50.837
> 
> 标签：xml, xpath, wildcard, xslt-2.0

我必须根据一组 xml 文件生成报告。每天都会从系统中提取一些统计信息，我想生成一个 HTML 报告，该报告读取当前目录中的所有 xml 输入文件（由“Daily Request*.xml”之类的掩码标识）。

“每日请求文件”示例：每日请求Extract_20130205-130822.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<tasks startDate="2013/02/04 13:08:21" endDate="2013/02/05 13:08:21" environment="Q000">
  <task create="2013/02/04 20:44:15" type="deliverDistrib" jobName="TUAJW1W0" mode="Batch" synch="false" status="Completed" duration="633.44" />
  <task create="2013/02/05 08:18:36" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="true" status="Completed" duration="48.35" />
  <task create="2013/02/05 08:19:21" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="false" status="Completed" duration="17.36" />
  <task create="2013/02/05 08:19:21" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="false" status="Completed" duration="2.93" />
  <task create="2013/02/05 08:19:26" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="true" status="Completed" duration="9.57" />
  <task create="2013/02/05 08:19:34" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="false" status="Completed" duration="8.67" />
  <task create="2013/02/05 08:19:34" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="false" status="Completed" duration="2.95" />
  <task create="2013/02/05 08:21:23" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="true" status="Completed" duration="7.87" />
  <task create="2013/02/05 08:21:30" type="deliverDistrib" jobName="LVAJW1W0" mode="Online" synch="false" status="Completed" duration="5.87" />
</tasks> 
```

我已经阅读了文档和一些示例，我们可以使用函数 document() 检索外部文件。但显然它不支持通配符。我发现另一个线程说我们必须使用 Xpath 函数：**collection()**

就像是

```
collection('file:///./?select=Daily*.xml') 
```

我想开始将所有元素连接到流中，以便我可以从中编写报告。

我建议的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet exclude-result-prefixes="xs" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="*">
  <xsl:for-each select="collection('file:///./?select=Daily*.xml')/tasks">
     <xsl:copy-of select="."/>
  </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

但是 id 不输出任何东西：-/

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:49:14.020

我显然用这个 xsl 得到了它：

```
<xsl:stylesheet exclude-result-prefixes="xs" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="*">
  <xsl:for-each select="collection('./?select=Daily*.xml')/tasks">
     <xsl:copy-of select="task"/>
  </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

# c# - 防止用户使用 WireShark 等窃取密码

> ID：14708739
> 
> 赞同：3
> 
> 时间：2013-02-05T13:32:53.053
> 
> 标签：c#, ftp, sftp, wireshark

我有一个 Windows 窗体应用程序，它与 FTP 服务器通信，一切正常，除了用户能够使用[WireShark](http://www.wireshark.org/)、过滤 FTP 并轻松获得对我的 FTP 服务器的完全访问权限。我真的需要一种方法来防止这种情况，但我能想到的唯一想法是使用 SFTP 或 FTPS。问题是目前我正在[免费使用 edtFTPnet](http://www.enterprisedt.com/products/edtftpnet/overview.html)并且找不到任何免费的 SFTP 或 FTPS 类来在我当前的代码上实现。

解决这个问题的最佳方法是什么（免费或极低成本）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:36:39.397

我认为你在这里走错路了。

你并没有真正控制客户端，所以不要费心去保护它。

相反，请保护您的服务器。
确保您的应用程序使用的帐户在 FTP 服务器上只有有限的权限。例如，您可以禁止 DIR 或将他限制到某个目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T13:39:08.350

有一些免费的 SSH 库：（例如[SharpSSH](http://www.tamirgal.com/blog/page/SharpSSH.aspx)，[SSH.Net ）](http://sshnet.codeplex.com/)

问题是您依赖于不查看密码的人。相反，向您的客户颁发他们自己的凭据。无论是每个用户的用户名和密码，还是向客户端颁发证书。

此外，丹尼尔的建议是合理的。确保如果他们确实获得了密码，那么几乎不会造成任何损害

# javascript - jquery拖动和调整条形图

> ID：14708740
> 
> 赞同：2
> 
> 时间：2013-02-05T13:32:53.523
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, raphael

我坚持解决问题。

我想使用 raphaeljs 或其他方法构建条形图，主要功能是一旦绘制，条形图应该可以通过鼠标拖动来调整大小，并且一旦拖动停止就能够获得它们的当前值。我已经尝试了下面的代码，但它不起作用。

```
 function  drawchart()
        {

            var data  =  [1,2,3];

            /* 
             * Create an instance of raphael and specify:
             * the ID of the div where to insert the graph
             * the width
             * the height
             * Tip: Remember that the reference point (0, 0) is at the top left position.
             */
            var r = Raphael("holder",600,300);

            // start, move, and up are the drag functions
            start = function () {
                // storing original coordinates
                this.ox = this.attr("x");
                this.oy = this.attr("y");
                this.attr({opacity: 1});

                this.sizer.ox = this.sizer.attr("x");
                this.sizer.oy = this.sizer.attr("y");
                this.sizer.attr({opacity: 1});
            },
            move = function (dx, dy) {
                // move will be called with dx and dy
                this.attr({x: this.ox + dx, y: this.oy + dy});
                this.sizer.attr({x: this.sizer.ox + dx, y: this.sizer.oy + dy});        
            },
            up = function () {
                // restoring state
                this.attr({opacity: .5});
                this.sizer.attr({opacity: .5});        
            },
            rstart = function () {
                // storing original coordinates
                this.ox = this.attr("x");
                this.oy = this.attr("y");

                this.box.ow = this.box.attr("width");
                this.box.oh = this.box.attr("height");        
            },
            rmove = function (dx, dy) {
                // move will be called with dx and dy
                this.attr({x: this.ox + dx, y: this.oy + dy});
                this.box.attr({width: this.box.ow + dx, height: this.box.oh + dy});
            };   

            var chart = r.g.barchart(5, 5, 200, 280, data, {stacked: false, type: "square"}).label(['a','b','c']);

            chart.drag(move, start, up);

            chart.hover(function() {
                // Create a popup element on top of the bar
                this.flag = r.g.popup(this.bar.x, this.bar.y, (this.bar.value || "0") + "%").insertBefore(this);
            }, function() {
                // hide the popup element with an animation and remove the popup element at the end
                this.flag.animate({opacity: 0}, 300, function () {this.remove();});
            });

            /*
             * Define the default text attributes before writing the labels
             */
            r.g.txtattr = {font:"12px Fontin-Sans, Arial, sans-serif", fill:"#000", "font-weight": "bold"};

            // iterate over all the bar
            for (var i = 0; i < chart.bars[0].length; i++) {
                var bar = chart.bars[0][i];
                // if the value of the bar is greater or equals to 15 we change the color to red
                if (bar.value >= 15) {
                    bar.attr("fill", "#bf2f2f");
                    bar.attr("stroke", "#bf2f2f");
                }
            }

        } 
```

任何形式的帮助将不胜感激。

提前致谢

# postgresql - 如何找到继承的列？

> ID：14708741
> 
> 赞同：0
> 
> 时间：2013-02-05T13:32:57.397
> 
> 标签：postgresql

我想获取数据库中继承列的列表。有什么查询可以用来找到这个吗？

我正在使用 PostgreSql 8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:35:51.817

这是执行此操作的简单查询：

```
select relname as table_name, attname as column_name 
from pg_class 
join pg_inherits on pg_class.oid = pg_inherits.inhrelid
join pg_attribute on pg_inherits.inhparent = attrelid
where attnum > 0; 
```

# ruby-on-rails - RSpec 误报 - 这怎么可能？

> ID：14708743
> 
> 赞同：1
> 
> 时间：2013-02-05T13:33:07.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2

RSpec 在我的帮助页面上说一切都很好，但不应该如此。什么会导致误报。（我已经多次重启了我的测试套件）。

这是我的规格页面：

```
require 'spec_helper'

describe "Static pages" do

  subject { page }

  shared_examples_for "all static pages" do
    it { should have_selector 'h1',    text: heading }
    it { should have_selector 'title', text: full_title(page_title) }
  end

.
.
.

  describe "Help page" do
    before { visit help_path }

    let(:heading) { 'Help' }
    let(:page_title) { 'Help' }
  end

.
.
.

end 
```

这是我的帮助页面：

```
<% provide(:title, '') %>
<h1></h1>
<p>
  Get help on the Ruby on Rails Tutorial at the
  <a href="http://railstutorial.org/help">Rails Tutorial help page</a>.
  To get help on this sample app, see the
  <a href="http://railstutorial.org/book">Rails Tutorial book</a>.
</p> 
```

就是说测试通过了。怎么修？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:49:59.027

看起来你失踪了：

```
it_should_behave_like 'all static pages' 
```

在`describe 'Help Page'`块中。您已经为“所有静态页面”定义了共享示例，但没有告诉 rspec '帮助页面'应该表现得像一个。

另外，请查看[this answer](https://stackoverflow.com/a/11093917/2004045) to a *very similar* question。它展示了如何重构规范以更清楚地表达意图。

# c# - 包含文件的 T4“标头保护”

> ID：14708745
> 
> 赞同：4
> 
> 时间：2013-02-05T13:33:09.000
> 
> 标签：c#, visual-studio, code-generation, t4

我正在尝试为代码生成编写一些漂亮且结构化的 t4。我将我的逻辑分解为可重用的函数并将它们放入单独的文件中（就像“普通”代码一样）。问题是我不能包含一个通用文件，因为它会被包含多次。

例如，我有 4 个文件：`Core.tt`、`File1.tt`和. 都包含在和中。虽然和包含在`File2.tt``MainTemplate.tt``Core.tt``File1.tt``File2.tt``File1.tt``File2.tt``MainTemplate.tt`

当我想从中生成输出时，`MainTemplate.tt`出现以下错误：

```
Error   8   Compiling transformation: The type 'Microsoft.VisualStudio.TextTemplating62CD98C8FF0EB737CAFBD5ED17A158C3.GeneratedTextTransformation' already contains a definition for 'PropertyAttribute' 
```

我想，原因是它`Core.tt`被收录了两次。我的问题有解决方法吗？在 c++ 中可以添加标头保护：`#ifndef xxx #define xxx #endif`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-17T18:05:54.040

是的，此功能内置于 T4 系统中。

[T4 'include' 指令支持 'once' 属性](https://msdn.microsoft.com/en-us/library/gg586949.aspx)，它应该确保模板只包含一次，防止重复。

例子：

```
<#@ include file="filePath.tt" once="true" #> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:52:02.070

不幸的是，我无法找到一种方法来让它工作，因为在 C# 中可以使用#define 的位置存在严格的限制，而且#include 在代码中出现得太晚了。

此时最好的选择是在[http://visualstudio.uservoice.com](http://visualstudio.uservoice.com)上记录功能请求并尝试争取一些支持。

就个人而言，我很想将此功能融入产品中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T17:59:23.797

我在以下错误消息中遇到了类似的问题：

```
Compiling transformation: The type 'GeneratedTextTransformation' already contains a definition for 'BaseCodegenTemplate' 
```

`CTRL`我用++在我的项目中搜索了这行文本`SHIFT`：`F`

```
<#@ include file="BaseCodegenTemplate.tt" #> 
```

并在 2 个不同的文件中发现此行出现 2 次。在我从其中一个文件中删除其中一个事件后，错误消失了。

但是因为 BaseCodegenTemplate.tt 文件的 include 语句现在在该文件中丢失，该文件中的某些代码以红色突出显示，因为 BaseCodegenTemplate.tt 中包含的类型定义丢失。但整体代码编译良好：在 BaseCodegenTemplate.tt 中定义的类型在构建过程中包含，因为 BaseCodegenTemplate.tt 在另一个文件中被引用。

# c++ - XML 到 C++ 中的结构

> ID：14708752
> 
> 赞同：2
> 
> 时间：2013-02-05T13:33:37.280
> 
> 标签：c++, xml, struct

寻找可以获取 xml 文件并将其转换为这样的结构的东西。

```
typedef struct XMLpage{
    string type;
    string names[];
    string text;
    int Pos;

    struct XMLpage *Pages[];
}; XMLpage 
```

基本上我有一个页面可以包含可以包含其他页面的其他页面，并且计划是让它从 xml 文件中读取并将其作为结构输出，以便以后以某种方式使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:37:06.317

I used to use xerces and use SAX, DOM Parsers provided by it, parse and store it in Class/Struct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:10:15.223

看看[TinyXML](http://www.grinninglizard.com/tinyxml/)，我用过这个库很多，我非常满意。它将 XML 读入一个方便的对象结构，您可以轻松地读取/操作。

您必须编写一些简单的代码来将数据放入您的结构中，但这非常值得。

# ruby-on-rails-3 - Rails 3 中本地方法的 Monkeypatching

> ID：14708757
> 
> 赞同：1
> 
> 时间：2013-02-05T13:33:47.607
> 
> 标签：ruby-on-rails-3, monkeypatching, activesupport

我有如下情况：

```
Module Task
  def get(a)
      fetch(a)
  end

  def fetch(a)
      query(a)
  end

  def query(a)
      puts a
  end
end 
```

并且只有`get`方法是从模块外部调用的

```
Task.get('name') 
```

我想猴子补丁唯一的方法`query`来对方法的响应做出一些改变，`get`因为它调用`query`实习生。

请提出一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:55:38.687

为了在这种情况下进行猴子补丁，我们需要在 lib 文件夹中包含一个文件。在这种情况下，您需要在同名的 lib 文件夹中创建一个文件。其中首先包含模块 TASK，然后在其中使用`MODULENAME.module_eval`和添加方法。在此文件中，您可以覆盖实际模块中的方法并向其添加方法。为了使它工作，您必须要求您在 config/initializers/app.rb 中的 lib 中创建的文件

如果您正在使用的模块存在于文件夹中（例如在 ruby​​ gem 的情况下），您需要包含整个路径。例如。

```
Module_1.Module_2.module_eval 
```

其中模块 2 在模块 1 内。

# java - 带有 zxing 的 CMYK 条码

> ID：14708758
> 
> 赞同：1
> 
> 时间：2013-02-05T13:33:48.387
> 
> 标签：java, rgb, cmyk

我想在打印机中打印一堆条形码，他们告诉我，我的条形码（Code128 和 QR 码）不在正确的颜色空间中。它们是 RGB，但我需要 CMYK。我该怎么做才能将这些图像转换为 CMYK 图像？

先感谢您！

# c++ - 布尔数到 64 位整数的 char 数组

> ID：14708760
> 
> 赞同：1
> 
> 时间：2013-02-05T13:33:53.160
> 
> 标签：c++

我有一个字符数组（比如 char charr[5]），其中包含 0/1（布尔数的 char 数组）。现在，我想将字符数组转换为 64 位整数（如果数组是 {0, 0, 0, 1, 0}，它将给出 2）。怎么做 ？有库函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:36:03.247

No, there's no standard function for that. But it's pretty trivial:

```
uint64_t pack(const uint8_t *bits, size_t n)
{
  uint64_t x = 0, value = 1 << (n - 1);

  while(n > 0)
  {
    x += value * *bits++;
    n--;
    value /= 2;
  }
  return x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:51:13.757

Unwind 的基本思路是对的，但是实现起来比较复杂。这也有效：

```
uint64_t pack(const uint8_t *bits, size_t n)
{
  uint64 x = 0;
  for(;n > 0; n--) // For all input bits.
  {
    x <<= 1; // make room for next bit.
    assert(*bits <= 1); // It better be a 0 or 1.
    x += *bits++; // Add new bit on the end.
  }
  return x;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:37:42.600

尝试以 2 为底的[strtoll](http://www.cplusplus.com/reference/cstdlib/strtoll/)：

```
int val = strtoll(input, NULL, 2); 
```

# php - 无法将数据库值“1876-01-01 00:00:00-00:00:00”转换为教义类型日期时间

> ID：14708763
> 
> 赞同：1
> 
> 时间：2013-02-05T13:34:03.677
> 
> 标签：php, postgresql, datetime, doctrine-orm

为什么 Doctrine 不喜欢旧日期？

```
Exception was thrown : Could not convert database value "1876-01-01 00:00:00-00:00:00" to Doctrine Type datetime 
```

还有一个：

```
Exception was thrown : Could not convert database value "0000-00-00 00:00:00-00:00:00" to Doctrine Type datetime 
```

在我的实体中，我确实覆盖`datetime`并`datetimetz`

```
Type::overrideType('datetime', 'Doctrine\DBAL\Types\VarDateTimeType');
Type::overrideType('datetimetz', 'Doctrine\DBAL\Types\VarDateTimeType'); 
```

如果我将日期更新为`1976-01-01 00:00:00-00:00:00`它工作正常。

更新：

所以我正在运行 Ubuntu 12.04 64 位，我也知道我有 64 位 time_t 从这些测试中工作：

> strtotime() 在运行 PHP 5.3.3 的 32 位和 64 位系统上产生不同的输出（如前所述）。这会影响“零日期”（“0000-00-00 00:00:00”）以及传统 32 日期范围之外的日期。

测试：

```
strtotime("0000-00-00 00:00:00") returns FALSE on a 32 bit system.
strtotime("0000-00-00 00:00:00") returns -62169955200 on a 64 bit system. 
```

执行时`echo strtotime("0000-00-00 00:00:00");`我得到这个：

```
php time_test.php -62169966000 
```

那么Doc​​trine有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:38:19.147

PHP 中的纪元是 1970 年或 1901 年，具体取决于您的系统。

来自 PHP 手册：

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# .net - TPL 和 Parallel.for

> ID：14708774
> 
> 赞同：0
> 
> 时间：2013-02-05T13:34:27.220
> 
> 标签：.net, task-parallel-library

网上有人说下面的C#代码不能转换成一些Parallel.for（多核系统）是这样吗？如果是，是否有更好的方法来进一步优化它。谢谢

```
 for (int i = 0; i < 4; i++)
            {
                var tmp = i;
                tasks[i] = Task.Factory.StartNew(() => Console.WriteLine(tmp));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:40:01.603

好吧，你最后没有 a `Tast.WaitAll(tasks)`，这`Parallel.For`对你有用，所以你并没有完全做`Parallel.For`正在做的事情（除非你没有把代码放在你的问题中。如果是这样，那么下一行就是你的代码看起来像一个 Parallel.For 循环）

```
Parallel.For(0,4, (i) => Console.WriteLine(i)); 
```

除此之外，我不明白为什么不能将其转换为 Parallel.For。该人给出了无法转换它的什么原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:13:55.080

因为我们没有外部循环代码，所以我在这里暗中尝试。如果您只是测量总体平均运行时间，则不需要存储任务，您可以使用类似这样的方法来测量串行和并行版本：

```
var iterations = 100;
var stopwatch = new Stopwatch();

// Run Serial version
stopwatch.Start();    
for(int i = 0; i < iterations; i++)
{
    for (int i = 0; i < 4; i++)
    {
        Console.WriteLine(tmp);
    }
}

stopwatch.Stop();
var serialTime = stopwatch.ElapsedMilliseconds;
stopwatch.Reset();

// Run parallel version
stopwatch.Start();

for(int i = 0; i < iterations; i++)
{
    Parallel.For(0,4, (i) => Console.WriteLine(i));    
}

stopwatch.Stop();

var parallelTime = stopwatch.ElapsedMilliseconds;

Console.WriteLine("Serial took  : {0}ms", serialTime / (double)iterations);
Console.WriteLine("Parallel took: {0}ms", parallelTime / (double)iterations); 
```

由于工作量很轻，这可能不是衡量加速的一个很好的测试。您可以尝试调用具有更多开销的函数或`Thread.Sleep`模仿更多工作。另请参阅我在[此 StackOverflow 问题](https://stackoverflow.com/questions/14326211/amdahls-law-example-in-c-sharp/14352640#14352640)上的回答，了解如何在 C# 中测量 Amdahl 定律加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:38:05.267

首先，关于您报告的错误：

> 未处理的异常：System.AggregateException：发生了一个或多个错误。System.ArgumentExcpetion：任务数组包含至少一个空元素参数名称：Tasks

错误很明显，它是由您的`Task.WaitAll`调用引发的 - 它表示您的`tasks`数组中的任务槽之一为空。

其次，衡量性能`Console.WriteLine`不好有两个原因：

1.  工作量太轻：我猜设置开销会使实际工作相形见绌；
2.  `Console.WriteLine`是同步的——这意味着所有任务都将开始，然后立即同步——在这种情况下，使用 map reduce API 是绝对不合适的。只需设计一个真实的计算工作负载（例如计算素数）；

# .net - 如何在没有OverflowException的情况下将无符号整数转换为有符号整数

> ID：14708778
> 
> 赞同：11
> 
> 时间：2013-02-05T13:34:34.010
> 
> 标签：.net, vb.net, casting, bitconverter, overflowexception

我希望能够将高值无符号整数（使用最高位的值）转换为有符号整数。在这种情况下，我不在乎该值是否高于有符号整数类型的最大值。我只是希望它转换为任何位值表示为有符号整数。换句话说，我希望它会产生一个负数。

但是，对于 VB.NET，该`CType`操作不能以这种方式工作（或任何其他转换函数，如`CShort`and `CInteger`）。当您尝试转换高于所需有符号类型最大值的无符号值时，它会抛出一个`OverflowException`而不是返回一个负数。例如：

```
Dim x As UShort = UShort.MaxValue
Dim y As Short = CShort(x)  ' Throws OverflowException 
```

同样值得一提的是，该`DirectCast`操作不能用于在有符号和无符号类型之间转换值，因为这两种类型都不继承或实现另一个。例如：

```
Dim x As UShort = UShort.MaxValue
Dim y As Short = DirectCast(x, Short)  ' Won't compile: "Value of type 'UShort' cannot be converted to 'Short' 
```

我已经想出了一种方法来做我想做的事，但这似乎不必要地难看。这是我如何让它工作的：

```
Dim x As UShort = UShort.MaxValue
Dim y As Short = BitConverter.ToInt16(BitConverter.GetBytes(x), 0)  ' y gets set to -1 
```

就像我说的那样，这行得通，但是如果在 VB.NET 中有更简单、更清洁的方法，我很想知道它是什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T13:50:33.287

如果你经常使用它，那么持续使用`BitConverter`会有点不方便——尤其是在性能方面。如果那是我，我会非常想在 C# 中添加一个可以进行直接转换的实用程序库（通过`unchecked`，尽管`unchecked`通常是 C# 中的默认值*）*，并为此引用该库。另一种选择可能是滥用“联合”结构；以下应该很容易转换为VB：

```
[StructLayout(LayoutKind.Explicit)]
struct EvilUnion
{
    [FieldOffset(0)] public int Int32;
    [FieldOffset(0)] public uint UInt32;
}
...
var evil = new EvilUnion();
evil.Int32 = -123;
var converted = evil.UInt32; 
```

IE

```
<System.Runtime.InteropServices.StructLayout(Runtime.InteropServices.LayoutKind.Explicit)>
Structure EvilUnion
    <System.Runtime.InteropServices.FieldOffset(0)>
    Public Int32 As Integer
    <System.Runtime.InteropServices.FieldOffset(0)>
    Public UInt32 As UInteger
End Structure
...
Dim evil As New EvilUnion
evil.Int32 = -123
Dim converted = evil.UInt32 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:16:32.777

回到 VB6 时代，我们不得不一直编写这样的例程：

```
Private Function ToShort(ByVal us As UShort) As Short
   If (us And &H8000) = 0 Then
      Return CType(us, Short)
   Else
      Return CType(CType(us, Integer) - UShort.MaxValue - 1, Short)
   End If
End Function 
```

至少在 .NET 中，您可以创建一个扩展方法，使其更好地通过

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-23T14:08:46.287

我认为最简单的方法如下：

```
Public Function PutSign(ByVal number As UShort) As Short
    If number > 32768 Then 'negative number
        Return (65536 - number) * -1
    Else
        Return number
    End If
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-19T19:54:43.003

非常简单：

### 对于 32 位

```
 Dim uVal32 As UInt32 = 3000000000
    Dim Val32 As Int32 = Convert.ToInt32(uVal32.ToString("X8"), 16) 
```

val32 结束 = -1294967296

### 对于 16 位

```
 Dim uVal16 As UInt16 = 60000
    Dim Val16 As Int16 = Convert.ToInt16(uVal16.ToString("X4"), 16) 
```

val16 结束 = -5536

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-23T16:02:15.813

我发现了这个：*[??问题类型转换在 VB.NET??](http://bytes.com/topic/visual-basic-net/answers/732622-problems-typecasting-vb-net)*

大约在页面的一半是这样的：

> 旧的，VB“正确”的“侧步”到十六进制并再次返回的技巧仍然有效！

```
Dim unsigned as UInt16 = 40000
Dim signed as Int16 = CShort(Val("&H" & Hex(unsigned))) 
```

它似乎工作得非常顺利！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-23T17:57:01.550

我刚刚也遇到了这个问题并且不喜欢 BitConverter 方法，因为它似乎不是很优化。因此，我认为对于 int 和 uint，内存中数据的存储实际上只有 4 个字节。

以下似乎是处理此问题的最有效方法，并且适用于所有可以使用 Marshal 类的 .NET 语言...

```
Dim x as UInteger = &H87654321
Dim gch as GCHandle = GCHandle.Alloc(x, Pinned)
Dim y as Integer = Marshal.ReadInt32(gch.AddrOfPinnedObject)
gch.Free 
```

希望这可以帮助某人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-29T06:08:56.827

通常，这将使用高级语言中的流来完成，但 .Net 框架公开了一种方法，无需使用 Marshal 的中间流对象。

```
Imports System.Runtime.InteropServices
Module Module1
    Sub Main()
        Dim given As Int16 = -20
        Dim buffer As IntPtr = Marshal.AllocCoTaskMem(Marshal.SizeOf(given))
        Marshal.StructureToPtr(given, buffer, False)
        Dim result As UInt16 = Marshal.PtrToStructure(buffer, GetType(UInt16))
        MsgBox(result)
    End Sub
End Module 
```

令我惊讶的是，根据我得到的统计数据，使用 Marshal 似乎比使用 Math 更有效

```
4 seconds of v1 yielded: 2358173 conversions
4 seconds of v2 yielded: 4069878 conversions 
```

从测试：

```
Imports System.Runtime.InteropServices

Module Module1
    Function v1(given As Int16) As UInt16
        Dim buffer As IntPtr = Marshal.AllocCoTaskMem(Marshal.SizeOf(given))
        Marshal.StructureToPtr(given, buffer, False)
        Dim result As UInt16 = Marshal.PtrToStructure(buffer, GetType(UInt16))
        v1 = result
    End Function

    Function v2(given As Int16) As UInt16
        If given < 0 Then
            given = (Not given) + 1
        End If
        v2 = given
    End Function

    Sub Main()
        Dim total0 As Integer
        Dim total1 As Integer
        Dim t0 As DateTime = DateTime.Now()
        While ((DateTime.Now() - t0).TotalSeconds() < 4)
            v1(-Rnd() * Int16.MaxValue)
            total0 = total0 + 1
        End While

        Console.WriteLine("4 seconds of v1 yielded: " & total0 & " conversions")
        t0 = DateTime.Now()
        While ((DateTime.Now() - t0).TotalSeconds() < 4)
            v2(-Rnd() * Int16.MaxValue)
            total1 = total1 + 1
        End While
        Console.WriteLine("4 seconds of v2 yielded: " & total1 & " conversions")

        Console.ReadKey()
    End Sub

End Module 
```

更奇怪的是，Marshal 方法似乎与 C# 样式转换一样有效，可以忽略不计。在我的第一次运行中，marshal 方法较慢，但在第二次运行中，marshal 方法更快。这是第二次运行的结果

```
4 seconds of v1 yielded: 1503403 conversions
4 seconds of v2 yielded: 1240585 conversions
4 seconds of v3 yielded: 1592731 conversions 
```

使用此代码

```
using System;
using System.Runtime.InteropServices;

class Program
{
    static DateTime startTime = DateTime.Now;        

    static double time {
        get {
            return (DateTime.Now - startTime).TotalMilliseconds;
        }
    }
    static ushort v1(short given) {
        if (given > 0) {
            return (ushort)given;
        }
        return (ushort)(~given + 1);
    }    

    static ushort v2(short given) {
        var buffer = Marshal.AllocCoTaskMem(Marshal.SizeOf(given));
        Marshal.StructureToPtr(given, buffer, false);
        ushort result = (ushort)Marshal.PtrToStructure(buffer, typeof(ushort));
        return result;
    }

    static ushort v3(short given)
    {
        return (ushort)given;
    }

    static void Main(string[] args)
    {
        int total0 = 0;
        int total1 = 0;
        int total2 = 0;
        double t0;

        t0 = time;
        while (time - t0 < 4000) {
            v1((short)(-new Random().NextDouble() * Int16.MaxValue));
            ++total0;
        }

        Console.WriteLine("4 seconds of v1 yielded: " + total0 + " conversions");

        t0 = time;
        while (time - t0 < 4000) {
            v2((short)(-new Random().NextDouble() * Int16.MaxValue));
            ++total1;
        }
        Console.WriteLine("4 seconds of v2 yielded: " + total1 + " conversions");

        t0 = time;
        while (time - t0 < 4000) {
            v3((short)(-new Random().NextDouble() * Int16.MaxValue));
            ++total2;
        }
        Console.WriteLine("4 seconds of v3 yielded: " + total2 + " conversions");

        Console.ReadKey();
    }
} 
```

现在请国王进来；

```
// ConsoleApplication3.cpp : main project file.

#include "stdafx.h"

using namespace System;
using namespace System::Runtime::InteropServices;

unsigned __int16 v4(__int16 given) {
    return (unsigned __int16)given;
}

public ref class Program
{
public:
    static DateTime startTime = DateTime::Now;

    static property double time {
        double get() {
            return (DateTime::Now - startTime).TotalMilliseconds;
        }
    }

    static UInt16 v1(Int16 given) {
        if (given > 0) {
            return given;
        }
        return (UInt16)(~given + 1);
    }    

    static UInt16 v2(Int16 given) {
        IntPtr buffer = Marshal::AllocCoTaskMem(Marshal::SizeOf(given));
        Marshal::StructureToPtr(given, buffer, false);
        Type ^t = UInt16::typeid;
        UInt16 result = (UInt16)Marshal::PtrToStructure(buffer, t);
        return result;
    }

    static UInt16 v3(Int16 given)
    {
        return (UInt16)given;
    }

    typedef String ^string;
    static void _Main(array<string> ^args)
    {
        int total0 = 0;
        int total1 = 0;
        int total2 = 0;
        int total3 = 0;
        double t0;

        t0 = time;
        while (time - t0 < 4000) {
            Double d = (gcnew Random())->NextDouble();
            v1((short)(-d * Int16::MaxValue));
            ++total0;
        }

        Console::WriteLine("4 seconds of v1 yielded: " + total0 + " conversions");

        t0 = time;
        while (time - t0 < 4000) {
            v2((short)(-((gcnew Random())->NextDouble()) * Int16::MaxValue));
            ++total1;
        }
        Console::WriteLine("4 seconds of v2 yielded: " + total1 + " conversions");

        t0 = time;
        while (time - t0 < 4000) {
            v3((short)(-((gcnew Random())->NextDouble()) * Int16::MaxValue));
            ++total2;
        }
        Console::WriteLine("4 seconds of v3 yielded: " + total2 + " conversions");

        t0 = time;
        while (time - t0 < 4000) {
            v4((short)(-((gcnew Random())->NextDouble()) * Int16::MaxValue));
            ++total3;
        }
        Console::WriteLine("4 seconds of v4 yielded: " + total3 + " conversions");

        Console::ReadKey();
    }
};

int main(array<System::String ^> ^args)
{
    Program::_Main(args);
    return 0;
} 
```

嗯，结果很有趣

```
4 seconds of v1 yielded: 1417901 conversions
4 seconds of v2 yielded: 967417 conversions
4 seconds of v3 yielded: 1624141 conversions
4 seconds of v4 yielded: 1627827 conversions 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-12T09:55:23.810

死灵术。
作为对 Marc Gravell 回答的补充，如果您想知道如何在头脑中做到这一点：

一般可以这样写：

```
<unsigned_type> value = unchecked(<unsigned_type>.MaxValue + your_minus_value + 1); 
```

由于类型检查，代码如下所示：

```
public uint int2uint(int a)
{
    int sign = Math.Sign(a);
    uint val = (uint) Math.Abs(a);

    uint unsignedValue;
    if(sign > 0) // +a
        unsignedValue = unchecked(UInt32.MaxValue + val + 1);
    else // -a, a=0
        unsignedValue = unchecked(UInt32.MaxValue - val + 1);

    return unsignedValue;
} 
```

然后，如果你想在头脑中这样做，你可以这样做：

```
BigInt mentalResult= <unsigned_type>.MaxValue + your_value;
mentalResult = mentalResult % <unsigned_type>.MaxValue;
if (your_value < 0) // your_value is a minus value
    mentalResult++;

// mentalResult is now the value you search 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-02T15:56:50.280

如果您需要经常这样做，您可以创建高性能的扩展方法，如下所示：

```
Imports System.Runtime.CompilerServices

Module SignConversionExtensions

    <StructLayout(LayoutKind.Explicit)> _
    Private Structure Union
        <FieldOffset(0)> Public Int16 As Int16
        <FieldOffset(0)> Public UInt16 As UInt16
    End Structure

    <Extension()> Public Function ToSigned(ByVal n As UInt16) As Int16
        Return New Union() With {.UInt16 = n}.Int16
    End Function

    <Extension()> Public Function ToUnsigned(ByVal n As Int16) As UInt16
        Return New Union() With {.Int16 = n}.UInt16
    End Function

End Module 
```

这使得有符号-无符号转换非常简单：

```
Dim x As UShort = UShort.MaxValue  ' unsigned x = 0xFFFF (65535)
Dim y As Short = x.ToSigned        ' signed y = 0xFFFF (-1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-20T10:50:56.820

在下面的这个例子中，Marc Gravell 的答案被扩展以证明在 VB 中的有用性：

```
<System.Runtime.InteropServices.StructLayout(Runtime.InteropServices.LayoutKind.Explicit)>
Structure vbUnion16
    <System.Runtime.InteropServices.FieldOffset(0)>
    Public UnSigned16 As UInt16
    <System.Runtime.InteropServices.FieldOffset(0)>
    Public Signed16 As Int16
    <System.Runtime.InteropServices.FieldOffset(0)>
    Public High8 As Byte
    <System.Runtime.InteropServices.FieldOffset(1)>
    Public Low8 As Byte
End Structure 
```

从概念上讲，它不同于“转换”类型的变量。相反，该方法演示了存储实体。同时提供了访问其中各个部分的不同方式。

由于操作是“访问”而不是“转换”，因此非常快速、精简和高效（参见成员对 Marc 帖子的评论）。

字节序由编译器处理。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-01-25T15:28:50.810

不了解 VB，但我希望它类似于 C#，因为它是 .NET 代码。在 C# 中，您可以简单地使用类型转换：

```
UInt16 ui = 65000;
Int16   i = (Int16)ui; 
```

完毕。

# qt-creator - Qt Creator - 从项目文件夹中移动 *.user 设置文件

> ID：14708779
> 
> 赞同：1
> 
> 时间：2013-02-05T13:34:35.237
> 
> 标签：qt-creator

我在 Windows 和 Linux 上使用相同的项目文件夹使用 Qt Creator。问题是 Qt Creator 在项目目录中创建`CMakeLists.txt.user`（或`project_name.pro.user`用于 qmake 项目）文件。每次我切换操作系统时，Qt Creator 都无法加载设置文件并使用默认设置重写它，这很烦人。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T16:16:01.617

我相信这是因为您的编译器偏好随操作系统而变化，并且没有办法保存您的用户文件以进行重写，除非您手动备份它。

# asp.net-mvc - 如何让 Visual Studio 2012 检测是否需要重新映射虚拟目录？

> ID：14708781
> 
> 赞同：15
> 
> 时间：2013-02-05T13:34:38.250
> 
> 标签：asp.net-mvc, visual-studio-2012, iis-express

**我的情况：**
我正在开发一个 ASP.NET MVC 项目并在 IIS-Express 中进行调试。有时当我们创建一个临时分支时，这个分支会使用同一个端口进行调试。这意味着 IIS 中的虚拟目录是相同的，我不能同时运行它们。

**它在 vs2010 中是如何工作的：**
这不是一个真正的问题，因为我不想同时运行它们。但是，在 VS2010 中，我第一次打开分支时会收到警告。它问我是否要重新映射 URL。当我后来返回打开后备箱时，我会收到相同的警告（请参阅[https://stackoverflow.com/a/3093534/210336](https://stackoverflow.com/a/3093534/210336)）。 ![vs2010中的消息](../Images/6d91fbec55c32bbbb30789a2fcea57bc.png)

**它如何在 vs2012 中不起作用：**
现在在 VS2012 中，我不再收到警告。如果我忘记手动进入设置并按“创建虚拟目录”（这已经发生了几次），那么当我在分支中单击运行时，它实际上会运行主干。这可能非常令人困惑。特别是如果我尝试调试或系统因异常而中断。来自主干的源文件将在分支解决方案中打开。然后我认为我正在编辑分支，但实际上我正在编辑主干...... ![VS2012中我需要按下的按钮](../Images/ddea920cb3425b8eb031856c5b1bb76d.png)

无论如何让VS2012执行与VS2010相同的检查？

还是我在做/理解其他完全错误的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T17:52:20.760

VS 实际上会编辑在这些路径之一中找到的 IIS Express 配置文件

```
%userprofile%\documents\iisexpress\config\applicationhost.config
%userprofile%\my documents\iisexpress\config\applicationhost.config 
```

当把它留给 VS 时，我倾向于看到重复和冲突的配置。

对于本地开发，我更喜欢从 cmd 或 powershell 脚本启动 IIS Express，因为它不需要附加（但可以附加）并且让我可以控制配置。我制作了 iis 配置的副本并在 iis express 命令中指定了配置文件。我有一个 powershell 脚本，它根据执行目录设置路径，所以无论哪个分支，它总是设置为我正在工作的那个。

以下是有关从命令行运行 iis express 的一些信息：

[http://www.iis.net/learn/extensions/using-iis-express/running-iis-express-from-the-command-line](http://www.iis.net/learn/extensions/using-iis-express/running-iis-express-from-the-command-line)

这是从 powershell 运行 iis express 的一个很好的资源：

[https://blog.differentpla.net/post/UaYcAPDfiVJBAAAC/running-iis-express](https://blog.differentpla.net/post/UaYcAPDfiVJBAAAC/running-iis-express)

# c# - 无法识别文本文件中的字符（如 € ² µ）

> ID：14708782
> 
> 赞同：3
> 
> 时间：2013-02-05T13:34:38.497
> 
> 标签：c#, .net, encoding

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:44:59.903

If you are using ANSI, you can do it like this:

```
using (TextReader reader = new StreamReader(fs, System.Text.Encoding.Default)) 
```

However, that will only work if your current code page is correct for the file that you are reading. It probably will be, but for full portability you should determine the actual code page that you're using and use:

```
using (TextReader reader = new StreamReader(fs, new System.Text.Encoding(codePageNumber))) 
```

where *codePageNumber* is the code page of the text file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:37:17.350

You can use the Mozilla Universal Charset Detector, a .NET port of which is available [here](http://code.google.com/p/ude/) to determine the encoding for a file pretty reliably. That will let you then open most files with the correct encoding with very little effort on your part.

# wordpress - 按名字获取以特定字母开头的用户

> ID：14708786
> 
> 赞同：4
> 
> 时间：2013-02-05T13:35:04.413
> 
> 标签：wordpress, function

我必须得到所有名字以字母“A”开头的用户。我使用 get_users() 函数获取用户信息。如何使用参数查询来获取名字字母以“A”开头的用户？

我使用了下面的功能

```
 <?php $users = get_users(array('role' => 'user_role', 
                                        'meta_key' => 'first_name',
                                        'meta_value' => 'A*',
                                        'meta_compare' => 'LIKE')); 
```

我没有发现任何结果。这里有错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:43:01.253

为了使用`LIKE`，您需要使用`meta_query`

```
$args = array(
    'role' => 'user_role', 
    'meta_query' => array(
        array(
            'key' => 'first_name',
            'value' => array( 'A', 'B'),
            'compare' => 'BETWEEN'
        )
    )
);
$users= get_users($args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T05:28:36.557

如前所述，使用 LIKE 意味着它将匹配包含该字母的任何值，无论该字母是否位于开头。所以使用 LIKE 可能不会得到你想要的。

WordPress 中的方法似乎是使用“BETWEEN”比较，因此它将匹配单词介于一个字母和后续字母之间的任何值。

[根据http://www.essentialwp.com/tag/meta_query/](http://www.essentialwp.com/tag/meta_query/)上的教程，您可以获取您希望单词开头的字符，然后使用 PHP 功能查找后续字符，这使您可以正确过滤结果。

```
// Get the value for surname and attach it to a variable
$letter = $_GET['surname'];]

// We need to establish the letter after the first letter from $letter, so in this case 'D'
$letterAfter = chr(ord($letter)+1);

// Craft a custom wp_query call
$args = array(
    'post_type' => 'profiles',  // use this if you are using a custom post type
    'order' => 'ASC',
    'meta_query' => array(
        array(
            'key' => 'surname', // name of your custom field
            'value' => array( $letter, $letterAfter ),
            'orderby' => 'meta_value',
            'compare' => 'BETWEEN',
            'order' => 'ASC'
        )
    )
 );
$wp_query = new WP_Query( $args );

// then run your loop.... 
```

您可能需要以不同的方式处理字母 Z，请参阅[Get the users by first name start with letter “Z”</a>](https://stackoverflow.com/questions/24498769/get-the-users-by-first-name-start-with-letter-z)

[](https://stackoverflow.com/questions/24498769/get-the-users-by-first-name-start-with-letter-z)

[您可能还对](https://stackoverflow.com/questions/24498769/get-the-users-by-first-name-start-with-letter-z)[使用 PHP 获取字母表中下一个字母的最有效方法感兴趣](https://stackoverflow.com/questions/2673360/most-efficient-way-to-get-next-letter-in-the-alphabet-using-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-17T08:53:27.283

对于那些仍在为此苦苦挣扎的人，要使用 % 运算符，请尝试以下代码：

```
$args = array(
    'role' => 'user_role', 
    'meta_key' => 'first_name',
    'meta_query' => array(
        array(
            'key' => 'first_name',
            'value' => '^'.$search_term.'.*',
            'compare' => 'REGEXP'
        )
    )
); 
```

此代码将返回以您要查询的字母开头的“first_name”，然后是任何内容。

此处的法典对此进行了解释： [https ://codex.wordpress.org/Class_Reference/WP_User_Query#Custom_Field_Parameters](https://codex.wordpress.org/Class_Reference/WP_User_Query#Custom_Field_Parameters)

**注 2**：使用 'LIKE' 时，值参数更改为 '%%'。因此，在自定义字段值中的任何位置都会搜索该字符串。如果 value 参数包含一个 '%' 它被转义。因此它禁止搜索以某些字符开头的字符串，例如...要构造此查询，您必须在值参数中使用带有正则表达式的 'REGEXP'（例如：'^n.*' 匹配以 " 开头的所有值n”或“N”）。

# c# - Subquerying in SQL Server CE

> ID：14708793
> 
> 赞同：0
> 
> 时间：2013-02-05T13:35:26.330
> 
> 标签：c#, sql, sql-server-ce

I am writing a C# application that interfaces with SQL Server CE, but I have encountered one of the many limitations that CE has.

My database has the tables `Customer`, `List`, and `CustomerList`. Customers can be subscribed to many lists and lists can have many customers - so I have the customerlist table as a junction table (columns are `CustomerListId`, `CustomerId`, `ListId` - that's all).

The design is that we have a master list that will always have every customer listed in it.

So in my code I am writing a function that sets all the listed customers to be subscribed to the master list. This is my very simple SQL query:

```
insert into customerlist (CustomerId, ListId)
values (
(select customerid from customer),
(select 1 from list where ShortDesc='Master')) 
```

This query does not work in SQL Server CE and I am racking my brains trying to find an alternative that does not involve a painful for-each row-by-row code. Any ideas would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:38:54.133

为什么不直接使用：

```
INSERT INTO  customerlist (CustomerId, ListId) 
SELECT customerid,1  FROM customer 
```

我错过了什么吗？

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:20:49.837

我想出了一个解决方案。

我首先做了一个获取主列表 ID 的 C# cmd。

```
string sqlGetId = "select listid from list where ShortDesc='Master'";
SqlCeCommand cmdGetMasterId = new SqlCeCommand(sqlGetId, DbConnection.ceConnection);
int key = (int)cmdGetMasterId.ExecuteScalar(); 
```

然后我在更简单的第二个查询中使用了该键：

```
sql2 = "insert into customerlist (CustomerId, ListId) select customerid, " + key + " from customer";
cmd2 = new SqlCeCommand(sql2, DbConnection.ceConnection);
cmd2.ExecuteNonQuery(); 
```

我意识到添加带参数的 SQL 命令总是比连接更好 - 但由于此应用程序的范围，SQL 注入不是问题。

（很抱歉这个简单的问题/答案，但我是新手^^）

# c# - Should I make a method static that will be used across many aspx.cs files

> ID：14708795
> 
> 赞同：6
> 
> 时间：2013-02-05T13:35:37.370
> 
> 标签：c#, asp.net

I have a method with the following signature:

```
string GetTableCellValue(DataTable table, string columnName, int rowIndex){} 
```

As you might guess, this method returns the value of the cell located at the specified column of the specified row of the specifies table in string format. It turns out that I need this methods almost in all the webpages. Here's my quetion(s):

1.  Should I put this method in all the code files or?
2.  Should I have it as a static method of some class, like Utilities_Class or?
3.  Should I have it as a public NON-STATIC method of some class , like Utilities_Class?

The last 2 choices seem to be better idea. But I don't know which one to choose eventually.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T13:38:40.157

您可能想为此创建一个静态方法。具体来说，[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)：

```
public static class Extensions
{
    public static string GetTableCellValue(this DataTable table,
                                           string columnName, int rowIndex)
    {
        // ...
    }
} 
```

现在，您可以像在`DataTable`对象上调用实例方法一样调用它：

```
DataTable dataTable = ...;
var value = dataTable.GetTableCellValue("column", row); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:38:45.303

我会选择第二个选项，因为我不需要类的实例，例如 Utilities_Class。GetTableCellValue 与它的数据成员或方法无关，使其成为静态是相当合理的。使其[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)来调用它，就像它存在于 DataTable 类中一样。

```
public static class DataExtensions
{
    public static string GetTableCellValue(this DataTable table, string columnName, int rowIndex)
    {
        // implementation
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:38:54.433

您还可以将其创建为扩展方法，例如：

```
public static class DataExtensions
{
    public static string GetTableCellValue(this DataTable table, string columnName, int rowIndex)
    {
        // implementation
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:40:21.053

这些都没有。

我建议您定义自己的 Page（我们称之为 BasePage）继承自 Page，并在 BasePage 中添加方法。

您的每个页面都应该是 BasePage 的实例，而不是常规 Page。

**编辑**：正如 Daniel Hilgarth 指出的那样，扩展是比我建议的更好的选择。请保留此帖子，以便其他人了解不该做什么:)

# html - Fixed container relative to a DIV - is this possible?

> ID：14708796
> 
> 赞同：1
> 
> 时间：2013-02-05T13:35:41.177
> 
> 标签：html, css, position, css-position

I'm looking for a way to make navigation arrows (red boxes) follow the screen this way:

![enter image description here](../Images/015f1d939a40bb9521b8b58f0498421f.png)

But I can not find a way to put them there... it would be very easy to put them to the very left and very right but I'd like it to be in the middle and it's a bit problematic. I managed to make it work in 90% of browsers (green solution) but it's not perfect and it doesn't work in some popular browsers.

UPDATE #1: There's one more important thing - I'd like red boxes to be sometimes above 600px content (on small resolutions around 600px and below).

UPDATE #2: 600px container has actually: `max-width: 1600px; width: 90%;` and `600px` is just an example resolution to better illustrate the gap.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:01:57.253

像[这样](http://codepen.io/ByScripts/pen/psihx)的东西？

您可以使用 max-width 来测试多个宽度。

检查是否适合您。

* * *

我在这里复制代码，以“面向未来”（如果有一天 codepen 消失）

### HTML

```
<div id="buttons">
  <div id="left">L</div>
  <div id="right">R</div>
</div>

<div id="foobar">
  <div id="content">
    <p>content</p>
    <p>content</p>
    <p>content</p>
    <p>content</p>
    <p>content</p>
    <p>content</p>
  </div>
</div> 
```

### CSS

```
#foobar {
  max-width: 800px;
  margin: 0 auto;
  padding: 0 50px;
}

#content {
  background-color: #ddd;
}

#buttons {
  width: 700px;
  margin-left: -350px;
  background-color: #aaa;
  position: fixed;
  left: 50%;
  top: 50%;

}
#left, #right {
  width: 50px;
  height: 50px;
  position: absolute; 
  background-color: red;
}
#right {
  right: 0
} 
```

### JS (JQUERY)

```
$(function(){
  refresh_buttons = function(){
    w = $('#foobar').width() + 100;
    $('#buttons')
      .css('width', w)
      .css('margin-left', -w/2);
  };

  refresh_buttons();
  $(window).resize(refresh_buttons);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:44:50.007

是的你可以。在 50% 处使用左侧或右侧，然后根据您使用的方式向左或向右调整边距。假设你的盒子有 100px 宽度：

```
#box1{
    position: fixed;
    right: 50%;
    margin-right:-300px; //adjust more or less as you want
}
#box2{
    position: fixed;
    left: 50%;
    margin-left:-300px; //adjust more or less as you want
} 
```

# javascript - Turning a 1-D Array into a 2-D Array with JavaScript

> ID：14708799
> 
> 赞同：0
> 
> 时间：2013-02-05T13:35:58.863
> 
> 标签：javascript

I have to convert about three hundred *1x10000* matrices into *100x100 matrices* in the console with JavaScript. What is the most efficient way to split each matrix into a *100x100* matrix? I assume I need to somehow find the 100th instance of a `,` (comma) and replace that comma with `], [`. I am just learning programming here.

```
var myArray = [2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 7, 7, 1, 1, 1, 1, 1, 1, 1, 1, 1, 7, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 7, 7, 1, 1, 1, 1, 1, 1, 1, 1, 1, 7, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, 9, 8, ... ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:39:24.607

这很容易做到`Array.slice`：

```
var myMatrix = Array();
for(i=0; i<100; i++) {
    myMatrix.push(myArray.slice(i*100, (i+1)*100));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:41:01.603

```
var newArray = new Array();
var index= 0;
for (var i=0; i<100; i++)
{ 
    for (var j=0; j<100; j++)
    { 
       newArray[i,j] = myArray[index];
       index++;
    }
} 
```

# javascript - d3js 轴日期仅开始和结束值

> ID：14708802
> 
> 赞同：5
> 
> 时间：2013-02-05T13:36:13.660
> 
> 标签：javascript, canvas, svg, charts, d3.js

**解决：**

谢谢，tickValues 给了我想要的结果。我使用了 d3.min 和 d3.max 的值：

![结果](../Images/04b0e39b0c0b4a54e2c79068c377de12.png)

```
 var xMin = d3.min(groups, function(c) { return d3.min(c.values, function(v) { return v.date; }); });
    var xMax = d3.max(groups, function (c) { return d3.max(c.values, function (v) { return v.date; }); });

    x.domain([xMin,xMax]);

        var xAxis = d3.svg.axis()
            .scale(x)
            .tickFormat(d3.time.format('%y-%m-%d'))
            .orient("bottom")
            .tickValues([xMin, xMax]); 
```

**问题：**

所以我有一个 D3js 多系列折线图。

![图表](../Images/dcdb3abab1f3211fcea85dbeccaca0b6.png)

X 轴是底部，是时间（其范围取决于用户选择，可以是几天、几周、几个月甚至几年）。Y 轴是数值并且是十进制的。

我遇到的问题是轴上的标签是重叠的，而且看起来很差。

所以我的问题是，是否有办法只显示轴上的第一个日期和最后一个日期？

我的图表基于这个： [http ://bl.ocks.org/3884955](http://bl.ocks.org/3884955)

我的 x 轴代码：

```
 var x = d3.time.scale().range([0, dimensions.width]);

    x.domain([
        d3.min(groups, function (c) { return d3.min(c.values, function (v) { return v.date; }); }),
        d3.max(groups, function (c) { return d3.max(c.values, function (v) { return v.date; }); })
    ]);

        var xAxis = d3.svg.axis()
            .scale(x)
            .tickFormat(d3.time.format('%a %d'))
            .orient("bottom")
            .ticks(5);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + dimensions.height + ")")
            .call(xAxis); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T13:48:39.043

尝试使用该[`ticks()`函数](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)调整刻度数，或者，如果这不能产生所需的结果，请尝试使用 显式设置刻度值[`tickValues()`](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)。

# mongoid - 如果文档嵌入了带有 Mongoid 的文档，则仅保留文档？

> ID：14708803
> 
> 赞同：1
> 
> 时间：2013-02-05T13:36:15.557
> 
> 标签：mongoid, activemodel

我有一个包含以下类的 2 级嵌套表单（很像[这样）。](http://railscasts.com/episodes/196-nested-model-form-revised)我遇到的问题是，当我不添加任何间隔（最深的嵌入文档）时，我也不希望保留第二深的文档。在所有者中，我添加了一个拒绝语句来检查是否有任何间隔被传递，这是有效的。

但是，当计划最初有间隔但它们以形式（通过传递_destroy：true）被破坏时，计划也需要被破坏。最好的方法是什么？我想避免在保存后销毁文档的时间表回调。

```
class Owner
  include Mongoid::Document  
  embeds_many :schedules

  attr_accessible :schedules_attributes

  accepts_nested_attributes_for :schedules, allow_destroy: true, reject_if: :no_intervals?

  def no_intervals?(attributes)
    attributes['intervals_attributes'].nil?
  end      
end

class Schedule
  include Mongoid::Document
  embeds_many :intervals
  embedded_in :owner

  attr_accessible :days, :intervals_attributes

  accepts_nested_attributes_for :intervals,
                                allow_destroy: true,
                                reject_if: :all_blank
end

class Interval
  include Mongoid::Document
  embedded_in :schedule
end 
```

更新：也许这是最好的形式本身？如果所有时间间隔都用 _destroy: true 标记，那么还要用 _destroy: true 标记时间表。但理想情况下，解决方案将与客户无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:18:05.217

如何将其添加到 Owner 类：

```
before_update do 
  schedules.each |schedule|
    schedule.destroy if schedule.intervals.empty?
  end
end 
```

# javascript - Managing models relations in AngularJS

> ID：14708804
> 
> 赞同：1
> 
> 时间：2013-02-05T13:36:19.507
> 
> 标签：javascript, orm, angularjs

how you manage models relations with AngularJS? It is very easy in Ember, but how to deal with it in AngularJS and not produce bunch of messy code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T23:06:41.700

我使用[https://github.com/klederson/ModelCore/](https://github.com/klederson/ModelCore/)它非常简单易用

```
var ExampleApp = angular.module('ExampleApp', ['ModelCore']); //injecting ModelCore

ExampleApp.factory("Users",function(ModelCore) {
  return ModelCore.instance({
    $type : "Users", //Define the Object type
    $pkField : "idUser", //Define the Object primary key
    $settings : {
      urls : {
        base : "http://myapi.com/users/:idUser",
      }
    },
    $myCustomMethod : function(info) { //yes you can create and apply your own custom methods
        console.log(info);
    }
  });
}); 
```

然后我只需要注入我的控制器并使用它

```
function MainCrtl($scope, Users) {
  //Setup a model to example a $find() call
  $scope.AllUsers = new Users();

  //Get All Users from the API
  $scope.AllUsers.$find().success(function() {
    var current;
    while(current = $scope.AllUsers.$fetch()) { //fetching on masters object
      console.log("Fetched Data into Master Object",$scope.AllUsers.$toObject()) //reading fetched from master
      //or just get the fetched object itself
      console.log("Real fetched Object",current.$toObject())
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:04:56.187

Angular 没有像 ember-data 这样的“数据存储”层，但如果您愿意，可以集成任何现有的 ORM -[哪些选项可用于客户端 JavaScript ORM？](https://stackoverflow.com/questions/6786307/which-javascript-orm-to-use)

# php - Yii render Javascript file on view

> ID：14708806
> 
> 赞同：1
> 
> 时间：2013-02-05T13:36:22.567
> 
> 标签：php, javascript, yii, include

I want to include JavaScript file in my view.

And I want to render it together and not as script file (registerScriptFile).

How can I do that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:10:17.200

只是`renderFile()`它会渲染任何文件，记得用`<script>`标签包装它。

# json - Accessing POST json in clojure

> ID：14708807
> 
> 赞同：6
> 
> 时间：2013-02-05T13:36:25.827
> 
> 标签：json, post, clojure, compojure

**EDIT** - The [source code is on github](https://github.com/PhosperousGodzilla/clojurejsonapi) if you're interested. Thanks

* * *

I am a bit confused as to how to access json data that has been posted to a url in clojure; I just can't seem to get it to work.

This is my route:

```
(cc/POST "/add" 
request
(str ": " request)) 
```

I am not entirely sure what I have to put in place of `request` - I just saw some blog online and tried to follow it, but couldn't get it to work.

Here's how I'm trying to post: (from [fiddler](http://www.fiddler2.com/fiddler2/))

![fiddler posting data](../Images/54ab25b22d9911d88ddc85d968ae52c7.png)

^(note: request header port is different in the image; it's a mistake, I was trying to mess with that data to see what it says so ignore that part in the above image please)

In curl, I'm just doing this:

```
curl -X POST -H "Content-Type: application/json" -d '{"foo":"bar","baz":5}' 
     http://localhost:3005/add 
```

It looks like clojure is not receiving the json data that I posted at all.

Here's what the request var contains:

```
: {:scheme :http, :query-params {}, :form-params {}, :request-method :post, 
   :query-string nil, :route-params {}, :content-type "\"application/json\"", 
   :uri "/event", :server-name "localhost", :params {}, 
   :headers {"user-agent" "Fiddler", "content-type" "\"application/json\"", 
          "content-length" "23", "host" "localhost:3005"}, 
   :content-length 23, :server-port 3005, :character-encoding nil, :body #} 
```

As you can see, all `params` are empty...

I am using compojure and cheshire - and I can convert data into json and return them just fine for `GET` routes.. I need to figure out how to pass json and convert it into clojure data..

thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:08:10.133

那是因为 :params 由处理“表单编码”主体的环形中间件填充。

您可以使用 ring-json 将您的应用程序包装到其他中间件中。它将解析 JSON 正文并相应地填充 :params。( [https://github.com/ring-clojure/ring-json](https://github.com/ring-clojure/ring-json) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:36:22.367

这是一个可以满足您要求的示例。代码取自这个[项目](https://github.com/drsnyder/poky)。在 README 中，您将看到它支持的一些访问模式。代码有点乱，但它应该说明如何做到这一点。

```
(ns poky.protocol.http.jdbc.text
  (:require [poky.kv.core :as kv]
    (compojure [core :refer :all]
               [route :as route]
               [handler :as handler])
    [ring.util.response :refer [response not-found]]
    (ring.middleware [format-response :as format-response ]
                     [format-params :as format-params])
    [cheshire.core :as json]
    [ring.middleware.stacktrace :as trace]))

;
; curl -d"some data" -H'Content-Type: application/text' -v -X PUT http://localhost:8080/xxx
; curl -d'{"bla":"bar"}' -H'Content-Type: application/json' -v -X PUT http://localhost:8080/bla

(def valid-key-regex #"[\d\w-_.,]+")

; FIXME: this should be split- one fn for get, one for mget
(defn- wrap-get
  [kvstore ks params headers body]
  (response 
    (let [eks (clojure.string/split ks #",")
          nks (count eks)
          multi (> nks 1)
          ret (if multi (kv/mget* kvstore eks) (kv/get* kvstore ks))]
    (condp = (get headers "accept")
      "application/json" ret
      "text/plain" (if multi (throw (Exception. "Multi get unsupported with Accept: text/plain")) (get ret ks))
      ret))))

(defn- wrap-put
  [kvstore ks params headers body]
  (if (and 
        (= (get headers "content-type") "application/json")
        (get params (keyword ks) nil))
    (kv/set* kvstore ks (get params (keyword ks)))
    (kv/set* kvstore ks body))
  (response ""))

(defn api
  [kvstore]
  (let [api-routes
        (routes
          (GET ["/:ks" :ks valid-key-regex] {{:keys [ks] :as params} :params body :body headers :headers}
               (wrap-get kvstore ks params headers body))
          (PUT ["/:ks" :ks valid-key-regex] {{:keys [ks] :as params} :params 
                                             body :body body-params :body-params headers :headers} 
               (let [body (slurp body)
                     body (if (empty? body) body-params body)]
                 (wrap-put kvstore ks params headers body))))]

    (-> (handler/api api-routes)
        (format-params/wrap-format-params
          :predicate format-params/json-request?
          :decoder #(json/parse-string % true)
          :charset format-params/get-or-guess-charset)
        (format-response/wrap-format-response
          :predicate format-response/serializable?
          :encoders [(format-response/make-encoder json/encode "application/json")
                     (format-response/make-encoder identity "text/plain")]
          :charset "utf-8")
        trace/wrap-stacktrace))) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T10:02:29.650

只是对先前答案的更新，现在足以将`formats`带有格式列表的键添加到您的处理程序中，这些格式将由 Ring 处理。

所以像

```
(def app (noir.util.middleware/app-handler 
           [your-routes]
           :formats [:json-kw])) 
```

# html - Get point from webpage VB.NET

> ID：14708809
> 
> 赞同：0
> 
> 时间：2013-02-05T13:36:29.380
> 
> 标签：html, vb.net, browser

How can I get the point from a webpage? Let's say I want to click on a textbox from a site, because it's easier than searching all the tag names and stuff. So...when click on a button I can go to the webbrowser and get the point of that textbox (e.g 400,210), but I want to get the point to work for the webbrowser not matter what size it is. How can I do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:01:32.080

听起来您正在尝试编写屏幕刮板。我建议你看看[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

# vb.net - 制作错误窗口

> ID：14708813
> 
> 赞同：0
> 
> 时间：2013-02-05T13:36:42.513
> 
> 标签：vb.net

我想创建我的版本错误报告表单而不是默认错误窗口。

如何创建我的版本表单错误报告？

例如：

![在此处输入图像描述](../Images/09994778d4978f14e3b80543275d171a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:03:55.917

所以你想在发生异常时调用自定义处理程序？没问题，只需在程序开头定义这 3 行神奇的行（作为 的第一行`Sub Main`）：

```
AddHandler Application.ThreadException, AddressOf GenericHandler
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException)
AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledHandler 
```

然后定义 GenericHandler 和 UnhandledHandler，它们将调用您的自定义表单。

这是两个处理程序的示例实现：

```
Public Shared Sub GenericHandler(ByVal sender As Object, ByVal args As Threading.ThreadExceptionEventArgs)
  ReportException(args.Exception)
End Sub

Public Shared Sub UnhandledHandler(ByVal sender As Object, ByVal args As UnhandledExceptionEventArgs)
  If Not Debugger.IsAttached Then
    ReportException(args.ExceptionObject)
  End
End If

Public Shared Sub ReportException(ByVal ex As System.Exception)
  MsgBox(ex.ToString, MsgBoxStyle.OkOnly Or MsgBoxStyle.Exclamation, "Unhandled exception - Please contact support")
  'you can further improve this to add custom logging etc.
End Sub 
```

# visual-studio-2012 - vs2012 Do not merge option is not working

> ID：14708819
> 
> 赞同：2
> 
> 时间：2013-02-05T13:37:12.533
> 
> 标签：visual-studio-2012

I am visual studio 2012\. When i am trying to publish my asp.net webform website by using the "`Advanced Precompile Settings Dialog Box`" there is option "`Do not merge`".

After publishing merge all files in single assembly. I want separate assembly of each page.

"`Do not merge`" option is not working could you please help out me.

# asp.net-mvc - 在不是每个人都安装了 Mindscape 扩展的团队中使用 SASS

> ID：14708821
> 
> 赞同：3
> 
> 时间：2013-02-05T13:37:16.010
> 
> 标签：asp.net-mvc, visual-studio, sass

我有一个巨大的 MVC 项目，我想在其中使用 SASS。我无法真正改变它的结构，所以我一直在使用的解决方案是 Mindscape。

Mindscape 很棒，因为它在幕后运行 SASS 观察程序，让我可以编辑我的 SASS 文件，将其即时编译到我的 Styles 目录中（另外：它带有指南针支持）。

问题是没有这个扩展的人现在必须手动安装它，因为它不是 Nuget 依赖管理器的一部分。我有两个问题：

*   是否可以在构建时自动安装 Mindscape，就好像它是一个依赖项一样？
*   如果这是不可能的，我可以使用什么来编译我的 SASS 文件，因为我保存它们以便输出将转到不同的文件夹？

我已经看到[了这个的扩展](https://github.com/ServiceStack/Bundler#installing-the-run-on-save-vsnet-2010-extension)，但它适用于 VS *2010*而不是 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:58:05.887

我已经设法以各种方式将 sass 设置为项目的一部分，但是，Compass - 它为 SASS 提供了非常强大的功能，仍然需要外部 ruby​​ 构建。

由于我们有各种必须协同工作的 CI 流程，而且将整个 Compass 库移植到项目中听起来有点矫枉过正，

我们将使用[Mindscape](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)进行本地开发，并在我们的远程服务器上设置一个 SASS 构建器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:34:12.467

一种方法是不要让每个人都编辑 sass/css 并将其维护与前端开发人员隔离:)

然后可以将编译的 css 文件添加到其 sass 源旁边的版本控制中 - 这样*每个人都*可以使用最新的样式在本地运行网站，而*前端开发人员只能*根据需要编辑源。这也消除了在部署服务器上安装 sass 编译器的需要，这可能会破坏交易，具体取决于基础设施维护此类工具的意愿。

这不是解决问题的完美方法，但与让每个人都在本地运行 sass 的开销相比，它是两害相权取其轻。在协议的初始设置之后，到目前为止，这对我们来说一直有效（大型 .NET 开发商店）

PS：我正在考虑切换到 .less 只是因为这样每个人都可以将[dotless](http://www.dotlesscss.org/)与[梳子](https://github.com/buunguyen/combres)一起使用，这样就不会依赖第三方工具。缺乏类似指南针的工具包对我来说不是一个大问题，但你的情况可能会有所不同

# php - Run url in background in php

> ID：14708824
> 
> 赞同：5
> 
> 时间：2013-02-05T13:37:23.150
> 
> 标签：php, url

In my application i have to send the sms to user while registration. But while inserting record in database i want to hit this url in browser.

Can any one suggest how to run this url at backgound

`http://www.myurl.com/smpp/sendsms?username=XX&password=XX&to=XX&from=XX&text=Test`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T13:47:55.287

好吧，这取决于您的意思，`background`我假设您的意思是用户不会被重定向到该页面。

如果我是你，如果你安装了[cURL](http://php.net/manual/en/book.curl.php) ，我会选择它，因为你似乎唯一想做的就是发出一个普通的请求，也许，阅读响应。下面的代码未经测试，但应该给你一个提示。

```
$req = curl_init();
curl_setopt($req, CURLOPT_URL,"theaddress_and_params");
curl_exec($req); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-01T07:07:09.710

```
public function get_url($url)
{
    $cmd  = "curl --max-time 60 ";
    $cmd .= "'" . $url . "'";
    $cmd .= " > /dev/null 2>&1 &";
    exec($cmd, $output, $exit);
    return $exit == 0;
} 
```

它将通过 cli 调用 curl。它将在后台运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-03T00:08:49.847

如果这样做，您将在 URL（或标题）中公开用户名和密码。让用户提前登录并使用会话变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T13:45:41.930

不要从客户端发送这个，因为每个用户都可以很容易地通过加载带有一些（可能是恶意的）参数的 URL 来“伪造”数据。“用户名”和“密码”根本不受保护，我相信您的服务会很快关闭。

相反，您可以使用 PHP 的 curl 函数在后台（服务器端）轻松执行此操作：

[http://www.php.net/manual/en/curl.examples-basic.php](http://www.php.net/manual/en/curl.examples-basic.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T02:15:16.963

```
$url = 'http://yoursmsgateway.com/WebSMS/SMSAPI.jsp?username='.$smsuser.'&password='.$smspwd.'&sendername='.$smssender.'&mobileno='.$number.'&message='.urlencode($message);

echo $url;

   $mystring = get_data($url);

//echo "hi!";

echo $mystring;

function get_data($url) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

你可以试试这个代码，但你必须安装 cUrl DLL 文件。安装 CURL 的过程如下：-

1.)打开 php.ini 文件

2.)找到这个dll文件---> ;extension=php_curl.dll

3.）删除；（分号）

4.)如---> extension=php_curl.dll

5.) 保存 (Ctrl+s)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T13:40:56.453

您可以使用 pcntl php 扩展分叉一个子进程。

（实现此功能的库：[https](https://github.com/kriswallsmith/spork) ://github.com/kriswallsmith/spork ）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T13:41:04.507

我认为没有像多线程这样的概念（本质上是您所要求的），因为 PHP 代码中的所有内容都是增量运行的，但是您可以找到解决方案。看到[这个](https://stackoverflow.com/questions/1532065/php-multithread)和[这个](https://stackoverflow.com/questions/70855/how-can-one-use-multi-threading-in-php-applications)问题及其答案。

PHP中没有多线程的原因是因为一切都**在服务器中处理**，而您作为客户端已经收到完成的响应，因此PHP中的“在后台运行”与“顺序运行”相同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T13:41:25.537

当用户点击提交按钮时进行 AJAX 调用。这将导致该 URL 处的脚本在您当前的 PHP 将记录插入数据库时​​在后台运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T13:42:04.300

阿贾克斯？使用 ajax 在 div 中加载该 URL，同时使用 ajax 保存调用另一个 php 文件的记录。

# powershell - How to create a Windows Service in Powershell for "Network Service" account?

> ID：14708825
> 
> 赞同：32
> 
> 时间：2013-02-05T13:37:25.493
> 
> 标签：powershell, windows-7, windows-services

I want to create a Windows Service using Powershell. Creating it for a given user is piece of cake. I used this function adapted from [here](https://github.com/yaplex/CodeSamples/blob/master/PowerShell/Install-Windows-Service.ps1).

```
function ReinstallService1 ($serviceName, $binaryPath, $login, $pass)
{  
    Write-Host "installing service"
    # creating credentials which can be used to run my windows service
    $secpasswd = ConvertTo-SecureString $pass -AsPlainText -Force
    $mycreds = New-Object System.Management.Automation.PSCredential ($login, $secpasswd)

    # creating widnows service using all provided parameters
    New-Service -name $serviceName -binaryPathName $binaryPath -displayName $serviceName -startupType Automatic -credential $mycreds
    Write-Host "installation completed"
} 
```

My question is: **How can I create for "Network Service" account?**

If I modify **New-Service** line and remove credential parameter, the service is created for **"Local System"** account. Nearly miss.

```
New-Service -name $serviceName -binaryPathName $binaryPath -displayName $serviceName -startupType Automatic 
```

I googled a lot and saw no way of indicating service account. If I try to use Credential parameter for user **"NETWORK SSERVICE"**, I don't know what password to put and if I invent one (just in case cmdlet ignores it) it doesn't work. The error is:

> New-Service : Service 'XXXX (XXXX)' cannot be created due to the following error: **The account name is invalid or does not exist, or the password is invalid for the account name specified**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T22:35:18.700

帐户的正确名称是`NT AUTHORITY\NETWORK SERVICE`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-24T12:43:28.457

这是重新安装服务的最终版本，为了大家的利益，特别是针对 Aniket。

```
function ReinstallService ($serviceName, $binaryPath, $description, $login, $password, $startUpType)
{
        Write-Host "Trying to create service: $serviceName"

        #Check Parameters
        if ((Test-Path $binaryPath)-eq $false)
        {
            Write-Host "BinaryPath to service not found: $binaryPath"
            Write-Host "Service was NOT installed."
            return
        }

        if (("Automatic", "Manual", "Disabled") -notcontains $startUpType)
        {
            Write-Host "Value for startUpType parameter should be (Automatic or Manual or Disabled) and it was $startUpType"
            Write-Host "Service was NOT installed."
            return
        }

        # Verify if the service already exists, and if yes remove it first
        if (Get-Service $serviceName -ErrorAction SilentlyContinue)
        {
            # using WMI to remove Windows service because PowerShell does not have CmdLet for this
            $serviceToRemove = Get-WmiObject -Class Win32_Service -Filter "name='$serviceName'"

            $serviceToRemove.delete()
            Write-Host "Service removed: $serviceName"
        }

        # if password is empty, create a dummy one to allow have credentias for system accounts: 
        #NT AUTHORITY\LOCAL SERVICE
        #NT AUTHORITY\NETWORK SERVICE
        if ($password -eq "") 
        {
            #$secpassword = (new-object System.Security.SecureString)
            # Bug detected by @GaTechThomas
            $secpasswd = (new-object System.Security.SecureString)
        }
        else
        {
            $secpasswd = ConvertTo-SecureString $password -AsPlainText -Force
        }
        $mycreds = New-Object System.Management.Automation.PSCredential ($login, $secpasswd)

        # Creating Windows Service using all provided parameters
        Write-Host "Installing service: $serviceName"
        New-Service -name $serviceName -binaryPathName $binaryPath -Description $description -displayName $serviceName -startupType $startUpType -credential $mycreds

        Write-Host "Installation completed: $serviceName"

        # Trying to start new service
        Write-Host "Trying to start new service: $serviceName"
        $serviceToStart = Get-WmiObject -Class Win32_Service -Filter "name='$serviceName'"
        $serviceToStart.startservice()
        Write-Host "Service started: $serviceName"

        #SmokeTest
        Write-Host "Waiting 5 seconds to give time service to start..."
        Start-Sleep -s 5
        $SmokeTestService = Get-Service -Name $serviceName
        if ($SmokeTestService.Status -ne "Running")
        {
            Write-Host "Smoke test: FAILED. (SERVICE FAILED TO START)"
            Throw "Smoke test: FAILED. (SERVICE FAILED TO START)"
        }
        else
        {
            Write-Host "Smoke test: OK."
        }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-28T03:15:30.940

您可以像这样简单地获得网络服务的信誉：

```
$login = "NT AUTHORITY\NETWORK SERVICE"
#### #just set a dummy psw since it's just used to get credentials

$psw = "dummy"

$scuritypsw = ConvertTo-SecureString $psw -AsPlainText -Force

$mycreds = New-Object System.Management.Automation.PSCredential($login, $scuritypsw)
#### #then you can use the cred to new a windows service

$serviceName = "Test"
$binaryPath = "C:\Test\Test.exe"

New-Service -name $serviceName -binaryPathName $binaryPath -displayName $serviceName -startupType Automatic -credential $mycreds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-14T14:19:57.883

`Get-WmiObject`现在已弃用。但是，PowerShell 现在已内置 cmdlet 以使用服务。这是`ReinstallService`来自 Oscar Foley 的答案的更新版本，相应地调整了方便的默认值和包装器来启动和停止服务：

```
# https://stackoverflow.com/questions/35064964/powershell-script-to-check-if-service-is-started-if-not-then-start-it
function TryStopService([string] $serviceName)
{
    Write-Host "Attempting to stop service: $serviceName..."
    $service = Get-Service -Name $serviceName -ErrorAction SilentlyContinue

    if($service)
    {
        if ($service.Status -ne 'Running')
        {
            Write-Host "    Service: $serviceName is not running."
        }
        else
        {
            Stop-Service -name $serviceName
            Write-Host "    Stopped service: $serviceName."
        }
    }
    else
    {
        Write-Host "    Service: $serviceName is not found."
    }
}

function UninstallService([string] $serviceName)
{
    Write-Host "Attempting to uninstall service: $serviceName..."
    if (Get-Service $serviceName -ErrorAction SilentlyContinue)
    {
        Remove-Service -Name $serviceName
        Write-Host "    Uninstalled service: $serviceName."
    }
    else
    {
        Write-Host "    Service: $serviceName is not found."
    }
}

function StartSertice([string] $serviceName)
{
    Write-Host "Attempting to start service: $serviceName..."
    $service = Get-Service -Name $serviceName -ErrorAction SilentlyContinue

    if($service)
    {
        if ($service.Status -eq 'Running')
        {
            Write-Host "    Service: $serviceName is already running."
            return
        }
    }

    # Trying to start new service.
    Write-Host "    Trying to start new service: $serviceName."
    Start-Service -Name $serviceName

    #Check that service has started.
    Write-Host "    Waiting 5 seconds to give service time to start..."
    Start-Sleep -s 5
    $testService = Get-Service -Name $serviceName

    if ($testService.Status -ne "Running")
    {
        [string] $errMessage = "    Failed to start service: $serviceName"
        Write-Host $errMessage
        Throw $errMessage
    }
    else
    {
        Write-Host "    Started service: $serviceName."
    }
}

function ReinstallService ([string] $serviceName, [string] $binaryPath, [string] $description = "", [string] $login = "NT AUTHORITY\NETWORK SERVICE", [string] $password = "", [string] $startUpType = "Automatic")
{
    Write-Host "Attempting to reinstall service: $serviceName..."

    #Check Parameters
    if ((Test-Path $binaryPath)-eq $false)
    {
        Write-Host "    BinaryPath to service was not found: $binaryPath."
        Write-Host "    Service was NOT installed."
        return
    }

    if (("Automatic", "Manual", "Disabled") -notcontains $startUpType)
    {
        Write-Host "    Value for startUpType parameter should be (Automatic or Manual or Disabled) and it was $startUpType"
        Write-Host "    Service was NOT installed."
        return
    }

    TryStopService -serviceName $serviceName
    UninstallService -serviceName $serviceName

    # if password is empty, create a dummy one to allow having credentias for system accounts:
    #     NT AUTHORITY\LOCAL SERVICE
    #     NT AUTHORITY\NETWORK SERVICE
    if ($password -eq "")
    {
        $secpassword = (new-object System.Security.SecureString)
    }
    else
    {
        $secpassword = ConvertTo-SecureString $password -AsPlainText -Force
    }

    $mycreds = New-Object System.Management.Automation.PSCredential ($login, $secpassword)

    # Creating Windows Service using all provided parameters.
    Write-Host "Installing service: $serviceName with user name: '$login'..."
    New-Service -name $serviceName -binaryPathName $binaryPath -Description $description -displayName $serviceName -startupType $startUpType -credential $mycreds
    Write-Host "    Installed service: $serviceName."

    # Trying to start new service.
    StartSertice -serviceName $serviceName
} 
```

# java - Spring Ajax - @ResponseBody - 返回空响应

> ID：14708827
> 
> 赞同：7
> 
> 时间：2013-02-05T13:37:32.213
> 
> 标签：java, ajax, spring, spring-mvc, jackson

在我的spring webapp中，我有一个回答json的ajax servlet（使用jackson）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

    <context:component-scan base-package="com.myapp.ajax" />

    <util:list id="messageConvertersList">
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="supportedMediaTypes">
                <list>
                    <value>application/json;charset=UTF-8</value>
                </list>
            </property>
        </bean>
    </util:list>

    <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
        <property name="messageConverters" ref="messageConvertersList" />
    </bean>
    <bean id="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping" />

    <mvc:interceptors>
        <mvc:interceptor>
            <mvc:mapping path="/**" />
            <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
                <property name="paramName" value="lang" />
            </bean>
        </mvc:interceptor>
    </mvc:interceptors>

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver" />

    <bean id="handlerExceptionResolver" class="com.myapp.ajax.AjaxExceptionHandlerResolver">
        <property name="exceptionHandler">
            <bean class="com.myapp.ajax.AjaxExceptionHandler" />
        </property>
        <property name="messageConverters" ref="messageConvertersList" />
    </bean> 
```

我有以下 ajax 服务：

```
@RequestMapping(value = "getLoggedUser")
@ResponseBody
public DtoUser getLoggedUser() {
    return authenticationService.getLoggedUser();
} 
```

当用户登录时，它会返回如下内容：

```
{ userName : "jojo", email : "john.doe@email.com", firstName : "John", lastName : "Doe" } 
```

当用户未登录时，预期的行为是返回

```
null 
```

但它返回一个空响应，它不是一个有效的 JSON 响应（另外还有一个错误的 Content-type 标头）

为什么会这样？
我有解决方案来获得预期的行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T08:56:08.317

> 当用户未登录时，预期的行为是返回 null

这是我的预期行为，因为在 Java 和 Javascript/JSON 中，**null**都是一个有效值，它的含义不同于空值、空值或错误/异常。

我希望 Spring 回答空响应而不是专门处理它。在这种情况下，null (Java) 的预期转换将为 null (JSON)
**我的预期转换表：**

```
Java Exception => HTTP Error Code
null => null
empty map / object => {}
void => no response 
```

> 为什么会这样？

对于 Spring，返回 null 的控制器意味着“无响应”而不是“值为 null 的响应”。此规则适用于所有控制器方法，包括带有 @ResponseBody 注释的方法。
这允许手动写入响应，而无需稍后将某些内容附加到响应中：

```
if (mySpecialCase) {
    Writer writer = response.getWriter();
    writer.write("my custom response");
    return null;
} else {
     return myObject;
} 
```

因此，当返回 null 时，Spring 不向响应中写入任何内容，也不向 Content-type 标头或正文写入任何内容。

> 我有解决方案来获得预期的行为吗？

我做了以下肮脏的黑客攻击：在我的 ajax 路径上添加一个过滤器，当没有提交响应时将 null 写入响应。

```
public class AjaxEmptyResponseFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        chain.doFilter(request, response);
        if (!response.isCommitted()) {
            response.setCharacterEncoding("UTF-8");
            response.setContentType("application/json");
            Writer writer = response.getWriter();
            writer.write("null");
            writer.close();
            response.flushBuffer();
        }
    }

} 
```

此解决方案以相同的方式处理回答 null 的方法和回答无 (void) 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:15:57.300

你有会话过滤器吗？

我认为，您可以为错误绑定一个全局 ajax 事件并在那里进行相应的验证。

这是一个类似案例的示例：[如何使用 spring-security 和 jQuery 处理过期会话？](https://stackoverflow.com/questions/7242901/how-to-handle-expired-session-using-spring-security-and-jquery)

# javascript - xmpp 与工作组

> ID：14708829
> 
> 赞同：0
> 
> 时间：2013-02-05T13:37:35.737
> 
> 标签：javascript, xmpp, chat

我阅读了这份文件：

[http://xmpp.org/extensions/xep-0142.html#proto-agent-states](http://xmpp.org/extensions/xep-0142.html#proto-agent-states)

但它很快就解释了如何通过用户或代理获取工作组。

唯一的方法是使用网络服务吗？我只想为此使用javascript。

我正在使用openfire和spark。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:32:31.020

Spark 不会为您提供帮助，因为我认为它不支持该规范。事实上，该规范已被推迟，因此您可能根本无法获得太多支持。话虽如此，Openfire 有几个插件（[Fastpath Service 和 Fastpath Webchat](http://www.igniterealtime.org/projects/openfire/plugins.jsp)）可以提供一些支持。

[Smack](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/workgroup/package-summary.html)中也有一些 Java 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:23:03.767

我解决了。答案在服务发现处。

[http://xmpp.org/extensions/xep-0142.html#disco](http://xmpp.org/extensions/xep-0142.html#disco)

# c - 在 Telnet 会话中处理转义序列

> ID：14708830
> 
> 赞同：2
> 
> 时间：2013-02-05T13:37:37.833
> 
> 标签：c, networking, telnet, termios

我借用了一个简短的 C 代码，它使用子父方案建立 telnet 会话，并通过伪终端设备处理两个进程之间的通信。

代码运行得很好，但有一个主要缺陷，telnet 进程不执行大多数转义序列，而是打印它们（ESC 打印 ^[[, arrows ^[[A ^[[B ^[[C ^[[D, ETC。）。

我现在已经做了很多研究，但我找不到任何好的资源来解释你应该如何处理或传递用户输入，以便最终过程可以适当地解释特殊代码，从而实现真正的交互式会话。

基本代码：[http ://dl.dropbox.com/u/15117414/pty.c](http://dl.dropbox.com/u/15117414/pty.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:03:11.550

我解决了这个问题，现在我终于可以分享我的问题的答案了。必须转换为原始模式的文件描述符是父进程的标准输入，而不是伪终端设备的从端：

```
new_term_settings = slave_orig_term_settings;
cfmakeraw(&new_term_settings);
tcsetattr(0, TCSANOW, &new_term_settings); 
```

这样，父进程将所有未触及的用户输入传递给子进程，子进程已经知道如何处理这些特殊字符并相应地解析它们。

# c# - 从 jquery 访问 WCF Web 服务

> ID：14708831
> 
> 赞同：0
> 
> 时间：2013-02-05T13:37:38.510
> 
> 标签：c#, jquery, wcf

我创建了一个 WCF 项目。网址是`URL:http://localhost:4501/MathOperationService/`

我的服务中有两种方法：`topla(x,y)`和`carp(x,y)`. 我在 Visual Studio 2012 中创建了一个客户端项目。我可以从此客户端项目访问我的 wcf 服务，因为我使用代理文件从客户端访问我的服务方法。现在我的问题是..

如何从 Jquery 访问我的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:44:03.787

看看这篇文章，它讨论了用 REST URI 模板装饰你的 WCF 服务。

[http://msdn.microsoft.com/en-gb/library/vstudio/bb412172(v=vs.90).aspx](http://msdn.microsoft.com/en-gb/library/vstudio/bb412172(v=vs.90).aspx)

# sql - 更改列名后出错

> ID：14708837
> 
> 赞同：1
> 
> 时间：2013-02-05T13:37:51.547
> 
> 标签：sql, entity-framework, ef-model-first

我首先使用实体​​框架模型。最近，我在表格中将`Clip`列名从`PropertyName`更改为`Name`。`Clip`有一个 id 为 table 的外键`Main`。我想向 table 添加一条新记录`Main`，但收到一个奇怪的异常：

> 列名“PropertyName”无效。

我刷新了 edmx，更改了 DTO，但没有帮助。我不知道该怎么办。这里有什么问题？为什么我的程序还记得这个列名，为什么当我向表中添加记录时会发生这种情况`Main`？

# image-processing - 将多个 Haar 分类器与 OpenCV 相结合

> ID：14708845
> 
> 赞同：4
> 
> 时间：2013-02-05T13:38:26.577
> 
> 标签：image-processing, opencv, computer-vision, cascade, classification

如果有一种方法可以将来自不同训练的级联的 Haar 分类器结合起来，我一直在徘徊？我有一个场景，我检测到一个根据对象的角度而不同的对象。所以我分离了我的训练样本来训练多个分类器。他们在课堂上工作得很好。现在我按顺序运行它们，这花费了我大量的计算时间。

我认为 OpenCV 可能每次都在计算所有特征，因此每次都进行新的迭代。我想，如果我可以通过 OR 操作组合我的分类器，那么 OpenCV 可能只使用一个级联，因此只能迭代一次，并且只计算一次所需的特征，依此类推。这可能会大大提高我的表现。但是我不确定是否（以及如何）可以做到这一点。也许其他人以前尝试过类似的东西？

干杯! ——阿图尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T13:27:03.893

好吧，当你训练一个特定的分类器时，AdaBoost 算法（在每个阶段）会选择不同的特征来最小化训练错误。该过程针对级联的每个阶段完成。

不幸的是，对于每个对象，这些特征都不相同（尽管您有固定数量的特征形状，但尺寸不同），因此特征空间也不相同。因此，即使有一种方法可以组合这些分类器，其好处也是微乎其微的，因为您可能没有针对不同对象的相同特征，因此您需要再次评估几乎所有特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:31:36.277

我将每个人作为单独的并行任务运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T14:01:02.797

我不等待所有，而是处理每个，因为它们以引发事件结束。

# javascript - Parsing xml document

> ID：14708847
> 
> 赞同：0
> 
> 时间：2013-02-05T13:38:35.027
> 
> 标签：javascript, xml, dom

I have a question regarding dom selectors. This is a part of an xml file I am trying to parse.

```
<title>LASTorder "Reindeer"</title>
<enclosure length="23152990" type="application/x-shockwave-flash" url="http://vimeo.com/moogaloop.swf?clip_id=58822081"/> 
```

When I do a query

```
getElementsByTagName('title').childnnodes[0].nodevalue 
```

it returns me the content of the title tag.

What query should I make to get the url value inside enclosure ?

```
getElementsByTagName('enclosure').childnnodes[2].nodevalue 
```

This doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:39:45.693

The element hasn't got any child nodes, it only has attributes.

```
element.getAttribute('name_of_attribute'); 
```

# cufon - 无法更改 Cufon 字体

> ID：14708851
> 
> 赞同：0
> 
> 时间：2013-02-05T13:38:41.843
> 
> 标签：cufon

我有一个网站以一种奇怪的方式使用 cufon 字体（至少我以前没见过这个）。我正在尝试更改这些字体，因为它们很奇怪。为显示一个简单的“库存产品”而编写的代码如下：

```
<h2><cufon class="cufon cufon-canvas" alt="Stock " style="width: 68px; height: 26px; "><canvas width="93" height="29" style="width: 93px; height: 29px; top: -3px; left: -3px; "></canvas><cufontext>Stock </cufontext></cufon><cufon class="cufon cufon-canvas" alt="Products" style="width: 96px; height: 26px; "><canvas width="116" height="29" style="width: 116px; height: 29px; top: -3px; left: -3px; "></canvas><cufontext>Products</cufontext></cufon></h2> 
```

它们仅在标头中包含一个 cufon.js 文件。

我试图像这样替换字体：

```
<script src="scripts/cufon-yui.js" type="text/javascript"></script>-->
<script src="scripts/Adobe_Fan_Heiti_Standard_OpenType_600.font.js" type="text/javascript"></script>
<script type="text/javascript">
       Cufon.replace('h2','h1','h3','h4');
     </script> 
```

这甚至不起作用。代码太长，文件太多，无法在任何地方手动编辑代码。请提出一些解决方案。

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:44:15.697

您的 cufon 语法似乎不正确。一开始，而不是

```
Cufon.replace('h2','h1','h3','h4'); 
```

尝试

```
Cufon.replace('h2'); 
```

根据 Cufon API，要实现您的代码所指示的内容，您必须使用：

```
Cufon.replace('h1')('h2')('h3')('h4'); 
```

或者，如果您在您的网站上使用 jQuery 或类似的 JS 框架，它可能是：

```
Cufon.replace('h1, h2, h3, h4'); 
```

有关更多信息，请参阅：[https ://github.com/sorccu/cufon/wiki/API](https://github.com/sorccu/cufon/wiki/API)

# reporting-services - SSRS 2005 条形图的条件格式？

> ID：14708859
> 
> 赞同：1
> 
> 时间：2013-02-05T13:38:59.533
> 
> 标签：reporting-services, reportingservices-2005

整个下午，

我在 SSRS 2005 中有一个简单的条形图。我希望​​对这个条形图应用一些条件格式，但我无法让它工作。

我相信我应该能够在“图表属性”->“数据”选项卡->“值”部分中添加格式？我已将以下代码添加到表达式编辑器，但这不起作用。当我预览报告时，它显示条形图颜色为绿色，因为这是默认调色板？

```
=IIF(fields!Value.Value <=129, "blue", "yellow") 
```

我也尝试将其添加到图表的“格式”属性中，但我仍然无法看到这种格式。

我错过了什么吗？任何人都可以提出一个可行的解决方案或其他方法吗？

问候贝蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:57:17.963

应该可以正常工作吗？**我通过在Data Field** -> **Properties** -> **Appearance** -> **Series Style** -> **Fill** -> **Color**下设置表达式来复制。

```
=IIf(Fields!val.Value < 150, "Red", "Blue") 
```

所以像：

![在此处输入图像描述](../Images/271fc95f714ab4b0f763fbf36e103078.png)

最后结果：

![在此处输入图像描述](../Images/8d5bd4f1aeef4021c59350ac7a1bbc4f.png)

只有其他考虑因素是，根据您的基础数据，您可能需要在表达式中进行聚合：

```
=IIf(Sum(Fields!val.Value) < 150, "Red", "Blue") 
```

但是你可以看到它应该是可能的。

# php - 将 html 网站转换为静态 wordpress 网站

> ID：14708860
> 
> 赞同：0
> 
> 时间：2013-02-05T13:39:04.703
> 
> 标签：php, html, wordpress

我正在将单页 html 网站转换为静态 wordpress 网站。原来的html主页（唯一的页面）主要是使用jquery，当点击远处菜单中的一个选项时，下拉一个小文本区域。附加我转换后的主题的 index.php。

```
<div class="content" id="content1">
<a href="" onclick="deanimate('content1')"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/close.png" style="position:absolute; right:5px; top:5px; width:15px;"/></a>
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/face.png" style="padding-left:15px; padding-top:20px; width:454px;" />
</div>

<div class="content" id="content2">
<a href="" onclick="deanimate()"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/close.png" style="position:absolute; right:5px; top:5px; width:15px;"/></a>
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/face2.png" style="padding-right:15px; padding-top:30px; width:453px; height:200px;" />
</div> 
```

等等..我想以这样的方式添加内容，我应该能够在 wordpress 应用程序中修改它而无需编辑主题文件？可能吗 ？wordpress 新手。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:26:18.003

是的，您可以从 wp-admin 编辑内容。在 admin 下的页面管理中，您可以创建页面，然后在 page.php 或您的模板文件中添加循环，它将显示您在 admin 中编写的内容。

```
<?php while ( have_posts() ) : the_post(); ?>
<?php the_title();?>
<?php the_content();?>
<?php endwhile;?> 
```

使用上面的代码，您可以在浏览器上显示页面管理内容。

# git - 我必须初始化我的主存储库中的其他文件夹/目录吗？

> ID：14708861
> 
> 赞同：0
> 
> 时间：2013-02-05T13:39:05.500
> 
> 标签：git

几天前我开始学习 git，所以我是 git 的初学者，在此之前我从未使用过任何类型的版本控制。

我真正想做的是——想用git来跟踪我的项目本地（离线）。为此，我将我的主文件夹/目录命名为“项目”，并使用`git init`将其初始化为 git 存储库。现在在`project`目录中，我创建了 3 个子目录或文件夹，称为

```
Design
Css
Images 
```

我是否必须初始化我的主存储库中的其他文件夹/目录？

任何关于在本地（离线）跟踪我的项目的建议对我有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:52:29.910

查看以下教程：

*   [Github 的 Git 简介](http://learn.github.com/p/intro.html)
*   [Pro Git，免费在线版本](http://git-scm.com/book)

简要回答您的问题：不，您只需在`git init`每个存储库中运行一次。之后，您通过使用添加它们来标记要跟踪的文件夹和文件`git add`。但是还有更多内容，我真的建议您在继续之前完成教程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:35:18.567

git 不跟踪空文件夹。

如果您需要解决方法，请检查此[查询。](https://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:22:50.307

一旦你在一个文件夹中初始化了一个 git repo（你的意思是 master repo），在它里面创建的任何文件或文件夹都会被自动跟踪，并且不需要进一步的 git 初始化。只需继续使用

```
 git add <filename> 
```

当你跑步时

```
 git status 
```

，这些文件将显示为被跟踪。你仍然需要学习更多才能有基本的了解。

您可以参考上面reto建议的教程，这些肯定会有所帮助。

# javascript - GAE：为一个请求打开 2 个单独的页面

> ID：14708872
> 
> 赞同：0
> 
> 时间：2013-02-05T13:39:37.363
> 
> 标签：javascript, html

我有一个表单，当用户单击提交按钮（发送请求）时，我想打开 2 个不同的网页。可能吗？

# javascript - 可以从网站上的导演那里选择图像的表格

> ID：14708874
> 
> 赞同：0
> 
> 时间：2013-02-05T13:39:40.887
> 
> 标签：javascript, html, forms

我正在查看问题，但没有看到回答我的问题的问题。我正在一个预先存在的网站上工作，客户希望能够在该网站上更新他或她的产品。我已经有一个目录，里面装满了产品图片，所以他们可以从现场目录中选择图片，而不是仅仅上传和替换图片。

*   有没有办法使用`file`输入来搜索网站上的目录？即：site.com/images

*   除了我会处理的一些可能的安全问题之外，这样做还有其他潜在问题吗？

*   如果我不能只用 html 做到这一点，有没有办法在 javascript 中做到这一点？

如果还有其他问题可以回答这个问题，请不要留下可恶的评论和反对票。在评论中发布该问题的链接，如果它充分回答了我的问题，我将删除此帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:42:37.967

“有没有办法使用文件输入来搜索站点上的目录？即：site.com/images” 不，不能这样做。

您需要为您的用户构建一种方式，以便能够选择他们的图像，无论是简单的选择下拉菜单，还是更精细的图像浏览器，都会在选择图像时填充表单中的隐藏字段（涉及 JavaScript）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:44:42.680

```
html file input help only in selecting client side file. 
```

浏览器中的 javascript 允许访问文件系统。您可以要求用户输入文件名以搜索并发布到服务器，并使用某些服务器端语言搜索文件并显示输出（此处为文件名）。

# ruby-on-rails - 删除成功后刷新表数据

> ID：14708876
> 
> 赞同：0
> 
> 时间：2013-02-05T13:39:41.510
> 
> 标签：ruby-on-rails, jquery, destroy

查看成功销毁后如何刷新部分事件列表

_event_list.haml（部分用于刷新）

```
%table.twelve#events
  %thead
    %tr
      -#%th Game/Event
      -#%th Result
      -#%th Team
      %th Opponent
      -#%th Date
      -#%th Time
      %th Location
      - if can? :update, @event
        %th.span1 Manager
  %tbody
    - @events.each do |event|
      %tr
        -#%td= event_display(event.event)
        -#%td= find_result(event)
        -#%td= event.team.name
        %td= link_to event.opponent.name, event
        -#%td= check_date(event)
        -#%td
          = "#{event.datetime.to_s(:event_time)} - #{end_time(event)}"
          %div{:style => 'font-size: .8em;color:#666; margin-top: 3px'}= "Arrived at #{arrive_time(event)}"
        %td
          - if event.location
            = link_to event.location.name, event, :rel => 'tooltip-html', :title => 'View ' + event.location.name
        - if can? :update, @event
          %td
            .btn-group
              %button.btn.dropdown-toggle{"data-toggle" => "dropdown"}
                %i.icon-pencil
                Manage
                %span.caret
              %ul.dropdown-menu
                %li= link_to "Edit #{event_display(event.event)}", edit_event_path(event)
                %li= link_to "Delete #{event_display(event.event)}", event, :method => :delete, :remote => :true, :class => 'deleteRecord' 
```

destroy.js.erb $("events").html("<%= escape_javascript(render(:partial => "events_list")) %>");

事件控制器

```
def destroy
    @event = Event.find(params[:id])
    @event.destroy

    respond_to do |format|
      format.html { redirect_to(events_url,
                                :notice => "#{event_display_c(@event.event)} vs #{@event.opponent.name} was successfully deleted.") }
      format.js
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:45:32.793

你应该声明`@events`销毁动作

```
def destroy
  @event = Event.find(params[:id])
  @event.destroy

  respond_to do |format|
    format.html { redirect_to(events_url, notice: "#{event_display_c(@event.event)} vs #{@event.opponent.name} was successfully deleted.") }
    format.js { @events = Event.all # or something }
  end
end 
```

然后更改`destroy.js.erb`为（假设 jquery）

```
$("#events").replaceWith("<%= escape_javascript render('events_list') %>"); 
```

# ios - Facebook 点赞帖子

> ID：14708879
> 
> 赞同：1
> 
> 时间：2013-02-05T13:39:50.123
> 
> 标签：ios, objective-c, facebook-graph-api, facebook-like, objective-c-blocks

我正在尝试在我的 ios 应用程序上添加点赞按钮。当我在图形 api 资源管理器中点击 url 时，它工作正常，并且给了我真实的响应。但是当我在我的代码中点击它时，什么也没发生

```
(void)likeFacebookPost:(NSString*)likeID
{

    NSString *theWholeUrl = [NSURL URLWithString:[NSString stringWithFormat:
                                                  @"%@/%@/likes&access_token=%@",
                                                  GRAPH_API_BASEURL,likeID,
                                                  [_facebookToken stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

    NSURL *facebookUrl = [NSURL URLWithString:theWholeUrl];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:facebookUrl];
    [req setHTTPMethod:@"POST"];

    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&err];
    NSString *content = [NSString stringWithUTF8String:[responseData bytes]];

    NSLog(@"responseData: %@", content);

} 
```

# javascript - SVG元素的矩形选择（对于Raphael）

> ID：14708880
> 
> 赞同：8
> 
> 时间：2013-02-05T13:39:51.197
> 
> 标签：javascript, svg, raphael

我遇到了以下问题，希望有人知道如何帮助我：

我使用 JavaScript 库[Raphael](http://raphaeljs.com/)。现在，我想做的是，当我有许多 Raphael SVG 元素时，只需使用“矩形选择”选择更多元素，即通过从图形背景开始拖动鼠标来创建一个选择矩形（我希望我足够清楚)，并移动该矩形中的元素。

现在，我发现了类似的东西（有人从[我的上一个问题中](https://stackoverflow.com/questions/14421128/how-can-i-make-rectangle-selection-on-multiple-nodes-with-graph-dracula)发布了它）：

```
var paper = Raphael(0, 0, '100%', '100%');

var circle = paper.circle(75, 75, 50);
var rect = paper.rect(150, 150, 50, 50);

var set = paper.set();

set.push(circle, rect);
set.attr({
    fill: 'red',
    stroke: 0
});

var ox = 0;
var oy = 0;
var dragging = false;

set.mousedown(function(event) {
    ox = event.screenX;
    oy = event.screenY;
    set.attr({
        opacity: .5
    });
    dragging = true;
});

set.mousemove(function(event) {
    if (dragging) {
        set.translate(event.screenX - ox, event.screenY - oy);
        ox = event.screenX;
        oy = event.screenY;
    }
});

set.mouseup(function(event) {
    dragging = false;
    set.attr({
        opacity: 1
    });
}); 
```

这段代码可以在[jsfiddle](http://jsfiddle.net/Wrajf/)上执行。但是，正如您所看到的，这会选择所有元素，只需将它们添加到 Raphael 集中即可。

现在，我认为我的问题将通过以下方式解决：

1.  进行矩形选择
2.  将矩形中的节点添加到 Raphael 集中
3.  仅移动选定的项目（即仅移动带有 set.mousemove 的 Raphael 集中的项目）

我现在的问题是前两个问题。

任何想法如何做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T22:26:03.190

有趣的问题。您可以通过在所有其他对象后面放置一个与画布大小相同的矩形“垫子”，并在其上附加一个拖动事件以选择其他元素。（请注意，此解决方案使用较新版本的 Raphael 2.1.0：

```
var paper = Raphael(0, 0, '100%', '100%');

//make an object in the background on which to attach drag events
var mat = paper.rect(0, 0, paper.width, paper.height).attr("fill", "#FFF");

var circle = paper.circle(75, 75, 50);
var rect = paper.rect(150, 150, 50, 50);
var set = paper.set();

set.push(circle, rect);
set.attr({
    fill: 'red',
    stroke: 0
});
//the box we're going to draw to track the selection
var box;
//set that will receive the selected items
var selections = paper.set(); 
```

现在，我们添加一个拖动事件——类似于鼠标悬停事件，但具有三个功能（[参见文档](http://raphaeljs.com/reference.html#Element.drag)），并绘制一个框来跟踪选择空间：

```
//DRAG FUNCTIONS
//when mouse goes down over background, start drawing selection box
function dragstart (x, y, event) {
    box = paper.rect(x, y, 0, 0).attr("stroke", "#9999FF");    
}

// When mouse moves during drag, adjust box.
// If the drag is to the left or above original point,
// you have to translate the whole box and invert the dx 
// or dy values since .rect() doesn't take negative width or height
function dragmove (dx, dy, x, y, event) {
    var xoffset = 0,
        yoffset = 0;
    if (dx < 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy < 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    box.transform("T" + xoffset + "," + yoffset);
    box.attr("width", dx);    
    box.attr("height", dy);    
}

function dragend (event) {
    //get the bounds of the selections
    var bounds = box.getBBox();
    box.remove();
    reset();
    console.log(bounds);
    for (var c in set.items) {
        // Here, we want to get the x,y vales of each object
        // regardless of what sort of shape it is.
        // But rect uses rx and ry, circle uses cx and cy, etc
        // So we'll see if the bounding boxes intercept instead

        var mybounds = set[c].getBBox();
        //do bounding boxes overlap?
        //is one of this object's x extremes between the selection's xe xtremes?
        if (mybounds.x >= bounds.x && mybounds.x <= bounds.x2 || mybounds.x2 >= bounds.x && mybounds.x2 <= bounds.x2) {
            //same for y
            if (mybounds.y >= bounds.y && mybounds.y <= bounds.y2 || mybounds.y2 >= bounds.y && mybounds.y2 <= bounds.y2) {
                selections.push(set[c]);       
            }
        }
        selections.attr("opacity", 0.5);
    }
}

function reset () {
    //empty selections and reset opacity;
    selections = paper.set();
    set.attr("opacity", 1);    
}

mat.drag(dragmove, dragstart, dragend);
mat.click(function(e) {
   reset(); 
}); 
```

就像那样，您有一个新的集合（选择），其中包含通过鼠标拖动选择的每个对象。然后，您可以将鼠标悬停事件从原始应用到该集合。

请注意，如果您用选择框在其边界框的角上划线，这将选择圆形对象，即使它不与圆形区域重叠。如果这是一个问题，您可以为圆圈制作一个特殊情况。

[jsFiddle](http://jsfiddle.net/Wrajf/348/)

# assembly - MASM 寻址模式语法

> ID：14708887
> 
> 赞同：1
> 
> 时间：2013-02-05T13:40:26.467
> 
> 标签：assembly, syntax, x86, nasm, masm

以下是生成 Microsoft ASM 程序集的反汇编程序产生的 2 行：

```
mov    dl, loc_0040540c[edx]
jmp    dword ptr [loc_00405450][edx*4] 
```

有人可以解释它们是什么意思吗？我主要使用 NASM，因此 NASM 等价物也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:48:20.527

在 NASM 中：

```
mov    dl, [loc_0040540c + edx]
jmp    [loc_00405450 + edx*4] 
```

这些`loc_0040540c`可能是各自的地址/常数（例如`0040540cH`）。

# iphone - 我们如何从 iphone sdk 中的图像中获取价值

> ID：14708888
> 
> 赞同：0
> 
> 时间：2013-02-05T13:40:27.500
> 
> 标签：iphone, objective-c, xcode

> **可能重复：**
> [iPhone：关于 OCR 技术？](https://stackoverflow.com/questions/3341076/iphone-regarding-ocr-technology)

我正在开发一个彩票应用程序。我需要扫描图像并获取每个文本的打印文本值。![在此处输入图像描述](../Images/b2fc30ed9ef81c796884a720a9bf5a25.png)

我想获得以下详细信息：07 16 27 29 45

价格：20.00 美元开奖时间：2012 年 3 月 26 日星期一

我无法获得正确的价值

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T13:44:39.577

您可能需要一些 OCR 框架，例如[http://code.google.com/p/tesseract-ocr/](http://code.google.com/p/tesseract-ocr/)（编辑：Tesseract 的 Objective-C 包装器：[https](https://github.com/ldiqual/tesseract-ios) ://github.com/ldiqual/tesseract-ios ）

不过，可能有更好的解决方案。谷歌是你的朋友！

# visual-studio - 以编程方式读取用户定义的项目宏

> ID：14708889
> 
> 赞同：0
> 
> 时间：2013-02-05T13:40:32.087
> 
> 标签：visual-studio, visual-c++

如何从 C++ 的源代码中读取 VS 项目环境变量或用户定义的宏，例如 ${SolutionPath}？

我刚刚创建了一个新的用户定义的宏，我想在其中存储项目的当前版本。我想在构建过程中使用这个值，并在 GUI 中显示它。您有什么更好的办法让我的产品只有一个地方存储当前版本吗？

似乎使用 /D 为每个项目定义额外的预处理器标志可能是一个解决方案，但我无法让它工作来定义一个带有值的预编译器标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:38:45.370

您可以使用以下格式添加额外的编译器选项

```
/D "VariableName=\"VariableValue\"" 
```

这将使宏在项目中可用，就像您键入：

```
\#define VariableName VariableValue 
```

# mfc - MFC 不使用 LineTo 绘制矩形边

> ID：14708892
> 
> 赞同：0
> 
> 时间：2013-02-05T13:40:36.343
> 
> 标签：mfc, visual-c++-2012

使用 MFC CDC 类以及 LineTo 和 MoveTo 函数绘图时出现问题。CDC 对象不是从我移动指针的点开始，而是将第一个 Pixel blanc 留在图像中心。当我在图像左侧的角周围绘制时，很明显 CDC 对象将最外面的像素留空。我确实尝试加载自定义画笔，但没有不同的结果。

![边缘示例](../Images/eeaa600e9076d7aa9196b0379cdb5311.png)

```
 memDC.FillSolidRect(client, BACKGROUND_COLOR);
    CPen penBorder(PS_ENDCAP_SQUARE | PS_SOLID, BORDER_WIDTH, BORDER_COLOR);
    //Draw the Horizontal line for the Status Bar
    CPen* oldPen = memDC.SelectObject(&penBorder);
    memDC.MoveTo(client.left + 0.5f * BORDER_WIDTH, client.top + 0.5f * BORDER_WIDTH);
    memDC.LineTo(client.Width() - 0.5f * BORDER_WIDTH, client.top + 0.5f * BORDER_WIDTH);
    CPen penRecess(PS_ENDCAP_SQUARE | PS_SOLID, BORDER_WIDTH, RECESS_COLOR);
    //Draw the recess
    memDC.SelectObject(&penRecess);
    memDC.MoveTo(client.left + 1.5f * BORDER_WIDTH, client.top + 1.5f * BORDER_WIDTH);
    memDC.LineTo(client.Width() - 0.5f * BORDER_WIDTH, client.top + 1.5f * BORDER_WIDTH); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:47:36.573

该问题与 MFC 无关，而是在底层 Windows GDI 函数中固有的。的[文档`LineTo`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145029%28v=vs.85%29.aspx)说：

> LineTo 函数从当前位置到指定点绘制一条线，但不包括指定点。

如果您需要绘制最后一个点，您应该在`LineTo`距离第一个像素的地方再做一个像素。

# backbone.js - 对照数组检查输入值

> ID：14708894
> 
> 赞同：1
> 
> 时间：2013-02-05T13:40:42.277
> 
> 标签：backbone.js, input

我将这个插件用于我的自动完成表单： [http ://www.planbox.com/blog/news/updates/jquery-autocomplete-plugin-for-backbone-js.html](http://www.planbox.com/blog/news/updates/jquery-autocomplete-plugin-for-backbone-js.html)

而不是只检查一项，如下面的代码（`if (inputVal == 'bakaxel')`），我想检查整个集合的选定值

```
var collection = new Backbone.Collection([
    {id:"AB", name:"Alberta"},
    {id:"AD", name:"Album"},
    {id:"BA", name:"barn"},
    {id:"BC", name:"bak"},
    {id:"BD", name:"baby"},
    {id:"BE", name:"band"},
    {id:"BF", name:"bakaxel"},
    {id:"BG", name:"batteri"},
    {id:"BH", name:"barbie"},
    {id:"MB", name:"Manitoba"},
    {id:"AP", name:"Armed Forces Pacific"}
]);

$('input.search').autocomplete({
    collection: collection,
    attr: 'name',
    noCase: true,
    ul_class: 'search_options tr_list',
    ul_css: {'z-index':1234}
});

$('input.search').each(function(){
    $(this).blur(function(){
        var inputVal = $('input.search').val();

        if (inputVal == 'bakaxel') {
            $('#search_result_page').load('searchResult.html');
            $('#searchPage').addClass('hidden');
        }      

    });
}); 
```

我试过这个，但我不想再次创建 ar 数组，只使用主干集合：

```
$('input.search').each(function(){

    $(this).blur(function(){
        var inputVal = $('input.search').val();
        var ar = ["Alberta", "Album", "barn", "bak", "baby", "band", "bakaxel", "batteri", "barbie", "Manitoba", "Armed Forces Pacific"];

        if (jQuery.inArray(inputVal, ar) != -1) {
            $('#search_result_page').load('searchResult.html');
            $('#searchPage').addClass('hidden');
        } 

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:23:41.253

骨干代理下划线功能，尤其是在您的情况下[http://underscorejs.org/#where](http://underscorejs.org/#where)

> **where** *_.where(list, properties) 查看列表*
> 中的每个值，返回包含属性中列出的所有键值对的所有值的数组。

你的测试可以写成

```
var matches = collection.where({
    name: inputVal
});
if (matches.length>0) {
...
} 
```

或者正如@mu 在评论中建议的那样，您可以使用[http://underscorejs.org/#find检查输入是否存在](http://underscorejs.org/#find)

```
var found = collection.find(function(model) {
    return model.get('name') === inputVal
});
if (found) {
    ...
} 
```

# sql - 如何以 Rails 方式编写此 SQL

> ID：14708896
> 
> 赞同：0
> 
> 时间：2013-02-05T13:40:49.260
> 
> 标签：sql, ruby-on-rails-3, join, relational-database

*重写了整个问题，这样会更清楚..

这就是我的表的样子（没有无用的列）我用 pgadmin 生成了这个

![在此处输入图像描述](../Images/c74bf4eac6c16e4ca67f91ec97307c8f.png)

```
SELECT 
  notifications.id
FROM 
  activities, 
  notifications, 
  comments
WHERE 
  activities.trackable_id = comments.id AND
  notifications.activity_id = activities.id; 
```

使用 pgadmin，这个查询给出了正确的结果。

我不知道如何使用包含（或者可能是连接）来拥有 3 个表作为上面的 sql。

我的尝试

```
@notifications = current_user.notifications.includes(:activity, :comments).where("activities.trackable_id = comments.id AND notifications.activity_id = activities.id") 
```

没有成果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:10:04.333

默认情况下，当您通过 ActiveRecord::Base#joins 命名关联时，它将使用可能的主键执行 INNER JOIN。正如我们在您的模型中看到的那样，ID 并不是默认方式，因此您可以区分将使用哪个键来连接`joins`方法内的表。有点像这样：

```
@notifications = current_user.notifications.
  joins("INNER JOIN activities ON notifications.activity_id = activities.id").
  joins("INNER JOIN comments ON activities.trackable_id = comments.id") 
```

# php - 围绕不同的循环改变数组数据

> ID：14708903
> 
> 赞同：0
> 
> 时间：2013-02-05T13:41:01.133
> 
> 标签：php, arrays

我的 PHP 中有一个数组，我迭代了两次，每次都做不同的事情。该数组称为`$data`。
我有 2 个这样的 foreach 循环：

```
foreach($data as $item){
//doing stuff
}
foreach($data as $item){
//doing different stuff
} 
```

我不能将 2 组合起来，因为这是应用程序的样子，但我想在第一次迭代中将数据移动到 $data 数组中，该数组将出现在第二次迭代中。我能想到的唯一方法是在下面。例如

```
foreach($data as $item){
$data[]['new key']='my new data';
}
foreach($data as $item){
var_dump($item['new key']);//print 'my new data'
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:42:29.637

听起来您想**通过数组 BY REFERENCE**。
这意味着您不是将数组视为典型的数组（副本），而是将其视为指向`$data`数组的指针。
它类似于您使用对象的方式（它不是副本而是实例本身）。

您可以通过以下方式实现：

```
foreach($data as &$item){
    $item['new var'] ='my new data';
}

foreach($data as $item){
    var_dump($item['new key']);//print 'my new data'
} 
```

希望有帮助

# ios - 如何访问类类别中的 dealloc 方法？

> ID：14708905
> 
> 赞同：5
> 
> 时间：2013-02-05T13:41:02.600
> 
> 标签：ios, objective-c, cocoa-touch, memory-management, nstimer

我需要在一个类别的 dealloc 方法中执行一个动作。我试过 swizzling 但这不起作用（也不是一个好主意）。

如果有人问，答案是否定的，我不能使用子类，这是专门针对一个类别的。

我想使用`[NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:]`or对延迟执行操作，`[self performSelector:withObject:afterDelay:]`并在 dealloc 上取消它。

第一个问题是`NSTimer`保留目标，这是我不想要的。`[self performSelector:withObject:afterDelay:]`不保留，但我需要能够调用`[NSObject cancelPreviousPerformRequestsWithTarget:selector:object:]`该`dealloc`方法，否则我们会崩溃。

任何建议如何在类别上执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T10:43:45.073

*我仍然认为子类化你的类而不弄乱运行时会更好，但如果你确定你需要在一个类别中做，我有一个选项供你参考。它仍然与运行时混淆，但比我认为的 swizzling 更安全。*

考虑编写一个辅助类，比如说调用它`DeallocHook`，它可以附加到任何对象上，并在它被释放`NSObject`时执行一个操作。`NSObject`然后你可以做这样的事情：

```
// Instead of directly messing with your class -dealloc method, attach
// the hook to your instance and do the cleanup in the callback 
[DeallocHook attachTo: yourObject 
             callback: ^{ [NSObject cancelPrevious... /* your code here */ ]; }]; 
```

您可以实现`DeallocHook`using `objc_setAssociatedObject`：

```
@interface DeallocHook : NSObject
@property (copy, nonatomic) dispatch_block_t callback;

+ (id) attachTo: (id) target callback: (dispatch_block_t) block;

@end 
```

实现将是这样的：

```
#import "DeallocHook.h"
#import <objc/runtime.h>

// Address of a static global var can be used as a key
static void *kDeallocHookAssociation = &kDeallocHookAssociation;

@implementation DeallocHook

+ (id) attachTo: (id) target callback: (dispatch_block_t) block
{
    DeallocHook *hook = [[DeallocHook alloc] initWithCallback: block];

    // The trick is that associations are released when your target
    // object gets deallocated, so our DeallocHook object will get
    // deallocated right after your object
    objc_setAssociatedObject(target, kDeallocHookAssociation, hook, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

    return hook;
}

- (id) initWithCallback: (dispatch_block_t) block
{
    self = [super init];

    if (self != nil)
    {
        // Here we just copy the callback for later
        self.callback = block;
    }
    return self;
}

- (void) dealloc
{
    // And we place our callback within the -dealloc method
    // of your helper class.
    if (self.callback != nil)
        dispatch_async(dispatch_get_main_queue(), self.callback);
}

@end 
```

有关关联引用的更多信息，请参阅 Apple 关于[Objective-C 运行时](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)的文档（尽管我会说文档对这个主题不是很详细）。

我没有彻底测试过这个，但它似乎工作。只是想我会给你另一个方向去研究。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-14T22:08:16.787

我只是偶然发现了一个我以前从未见过的解决方案，而且似乎有效......

我有一个类别——就像一个经常做的那样——需要一些状态变量，所以我使用`objc_setAssociatedObject`，像这样：

```
Memento *m = [[[Memento alloc] init] autorelease];
objc_setAssociatedObject(self, kMementoTagKey, m, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

而且，我需要知道我的类别扩展的实例何时被`dealloc`编辑。就我而言，这是因为我设置了观察者`self`，并且必须在某个时候移除这些观察者，否则我会收到`NSKVODeallocateBreak`泄漏警告，这可能会导致坏事。

突然间我恍然大悟，因为我的关联对象正在被`retain`编辑（因为使用`OBJC_ASSOCIATION_RETAIN_NONATOMIC`），它们也必须被编辑`release`，因此被`dealloc`编辑......事实上，我已经`dealloc`在我为存储而创建的简单存储类中实现了一个方法我的国家价值观。而且，我假设：*我的关联对象必须在我的类别实例**之前被释放！***所以，我可以让我的关联对象在他们意识到他们正在被编辑时通知他们的所有者`dealloc`！由于我已经拥有了保留的关联对象，我只需要添加一个`owner`属性（*未*指定为`retain`！），设置所有者，然后在关联对象的方法中调用所有者的一些`dealloc`方法。

这是我的类别的 .m 文件的修改部分，其中包含相关位：

```
#import <objc/runtime.h> // So we can use objc_setAssociatedObject, etc.
#import "TargetClass+Category.h"

@interface TargetClass_CategoryMemento : NSObject
{
    GLfloat *_coef;
}
@property (nonatomic) GLfloat *coef;
@property (nonatomic, assign) id owner;
@end
@implementation TargetClass_CategoryMemento
-(id)init {
    if (self=[super init]) {
        _coef = (GLfloat *)malloc(sizeof(GLfloat) * 15);
    }
    return self;
};
-(void)dealloc {
    free(_coef);
    if (_owner != nil 
        && [_owner respondsToSelector:@selector(associatedObjectReportsDealloc)]) {
        [_owner associatedObjectReportsDealloc];
    }
    [super dealloc];
}
@end

@implementation TargetClass (Category)

static NSString *kMementoTagKey = @"TargetClass+Category_MementoTagKey";

-(TargetClass_CategoryMemento *)TargetClass_CategoryGetMemento
{
    TargetClass_CategoryMemento *m = objc_getAssociatedObject(self, kMementoTagKey);
    if (m) {
        return m;
    }
    // else
    m = [[[TargetClass_CategoryMemento alloc] init] autorelease];
    m.owner = self; // so we can let the owner know when we dealloc!
    objc_setAssociatedObject(self, kMementoTagKey, m,  OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    return m;
}

-(void) doStuff
{
    CCSprite_BlurableMemento *m = [self CCSprite_BlurableGetMemento];
    // do stuff you needed a category for, and store state values in m
}

-(void) associatedObjectReportsDealloc
{
    NSLog(@"My associated object is being dealloced!");
    // do stuff you need to do when your category instances are dealloced!
}

@end 
```

我在这里学到的模式（可能在 SO 上）使用工厂方法来获取或创建纪念品对象。现在它将所有者设置在备忘录上，并且备忘录的`dealloc`方法回调以让所有者知道它正在被`dealloc`编辑

注意事项：

*   显然，您必须将关联对象设置为`OBJC_ASSOCIATION_RETAIN_NONATOMIC`，否则它不会自动为您保留和释放。
*   如果您的纪念品/状态相关对象`dealloc`在其他情况下被编辑而不是被编辑的所有者，这将变得更加棘手`dealloc`......但您可能会训练一个对象或另一个对象以忽略该事件。
*   该`owner`属性不能声明为`retain`，否则您将真正创建一个强引用循环，并且这两个对象都没有资格被`dealloc`编辑！
*   我不知道在所有者被完全编辑之前`OBJC_ASSOCIATION_RETAIN_NONATOMIC`关联对象必须是d 的记录，但它似乎是这样发生的，并且几乎必须是这种情况，至少直观地说。`release``dealloc`
*   我不知道是否`associatedObjectReportsDealloc`会在's dealloc方法*之前*或*之后被调用——**这可能很重要！*如果它之后运行，如果您尝试访问成员对象，您将崩溃！我的猜测是之后。`TargetClass`*`TargetClass`*

 *这有点混乱，因为您正在双重链接您的对象，这需要您非常小心地保持这些引用的正确性。但是，它不涉及 swizzling 或对运行时的其他干扰——这仅依赖于运行时的某种行为。如果您已经有关联的对象，这似乎是一个方便的解决方案。在某些情况下，创建一个只是为了抓住你自己的 s 可能是值得`dealloc`的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T20:56:42.260

不幸的是，您提出的解决方案不起作用：*因为* 保留了它的目标，所以在计时器失效之前`NSTimer`，目标永远不会运行它。`dealloc`目标的保留计数将始终悬停在 1 或以上，等待计时器释放它。你必须先到*计时器* `dealloc`。（在 ARC 之前，您*可以*覆盖`retain`和`release`销毁计时器，尽管这确实不是一个好的解决方案。）

[`NSThread`也有这个问题](https://stackoverflow.com/a/10032660/603977)，解决方法很简单：稍微重新设计一下，把线程的控制器从“模型”中分离出来。创建和拥有线程的对象，或者在这种情况下的计时器，不应该也是计时器的目标。然后，不是您当前拥有的保留周期（计时器拥有拥有计时器的对象），而是一条很好的直线：控制器拥有拥有目标的计时器。外部对象只需要与控制器交互：当它被释放时，它可以关闭计时器，而无需您使用覆盖`dealloc`或其他内存管理方法玩游戏。

这是处理这个问题的最好方法。如果由于某种原因你不能这样做 - 你正在谈论类别覆盖，所以显然你没有作为计时器目标的类的代码（但你仍然可以制作一个即使在这种情况下也可以使用控制器）——您可以使用弱引用。不幸的是，我不知道有什么方法可以`NSTimer`对其目标进行弱引用，但 GCD 会通过`dispatch_after()`. 获取对目标的弱引用，并在您传递的块中专门使用它。Block 不会通过弱引用保留对象（方式会），如果对象在 Block 运行之前已被释放，那么`NSTimer`弱引用当然会是这样，因此您可以安全地编写发送给您喜欢的任何消息。`nil`*

# c++ - WinAPI 中 DLL 导出的函数列表

> ID：14708907
> 
> 赞同：0
> 
> 时间：2013-02-05T13:41:11.903
> 
> 标签：c++, windows, winapi, dynamic, dll

> **可能重复：**
> [Win32 API 枚举 dll 导出函数？](https://stackoverflow.com/questions/1128150/win32-api-to-enumerate-dll-export-functions)

我正在编写一个插件子系统，其中一个想法是遍历 DLL 导出的函数。我知道还有其他方法，只是真的想尝试一下。

我想知道，有没有办法在 WinAPI 中获取 DLL 导出的函数列表？

提前致谢！

# php - 为客户使用带 timzone 的日期有什么更好的方法

> ID：14708909
> 
> 赞同：1
> 
> 时间：2013-02-05T13:41:20.390
> 
> 标签：php, date, joomla, time, timezone

我正在为 joomla 构建一个组件，其中包含其他人的公告。并且该公告具有其事件的创建日期和日期。我的客户可能在不同的国家。一个人可以在两个不同的时刻出现在两个国家。所以我认为他的时区应该是动态的。对于此类问题，哪种方式更好地设置创建日期和事件日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:45:38.180

Joomla 会自动处理这个问题，因为您除了 UTC 之外什么都不存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:44:06.360

我总是在***GMT***中保存日期时间并根据需要在 PHP 端显示它，这取决于您可以从该用户的浏览器标题、IP 地址或某些配置文件设置中获得的时区。

即使客户端位于 2 个不同的时区，您也应该能够跟踪他们以这种方式查看页面的浏览器（从哪个时区）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:44:12.417

您应该**始终**以 UTC (GMT) 时间存储数据，最好以 Unix 时间戳的形式存储。这是一个不受任何类型夏令时变化影响的标准，非常适合保存一个恒定的时间点。

然后，在向单个用户显示日期和时间时，您可以将该时间戳转换为他们的本地日期和时间。

# android - 如何暂停和恢复 For 循环？

> ID：14708916
> 
> 赞同：3
> 
> 时间：2013-02-05T13:41:45.343
> 
> 标签：android, multithreading, loops, wait, postdelayed

我是 Android 的菜鸟，我正在尝试从字符串数组列表中循环文本并将它们显示在文本切换器中。我希望文本每两秒更改一次。我使用[这个](https://stackoverflow.com/questions/13680281/text-for-marquee-dynamically)SO question 作为我的指南，并且使用按钮切换文本没有问题。但是，当我尝试使用具有 2 秒延迟的 for 循环循环文本时，它仅显示 arrayList 中的第一个文本。如何让循环在暂停的情况下连续执行？任何帮助是极大的赞赏。

我的代码；

```
private void updateCounter()
{   

    try{
    for (int i=0; i< CoinShowReader.tickercontent.size(); i++){                             

        mHandler.postDelayed(new Runnable() { 
             public void run() { 
                m_switcher.setText((CoinShowReader.tickercontent.get(CoinShowReader.m_counter)));               
                CoinShowReader.m_counter++;
             } 
        }, 2000);

        }

    }catch(Exception e){
        e.printStackTrace();    
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:47:28.987

删除循环，您不需要它，只需在处理程序中安排 anther runnable ，如下所示：

```
void updateTextView(){
        m_switcher.setText((CoinShowReader.tickercontent.get(CoinShowReader.m_counter)));               
        CoinShowReader.m_counter++;

            mHandler.postDelayed(new Runnable() { 
                             public void run() { 
                               updateTextView(); 
        } } ,2000);  }
    } 
```

这样每次通话都可以`updateTextView()`安排下一次通话，依此类推...

**注意：** **不要忘记插入触发器以停止该行为，因为它是无限的**

# php - 按字符数拆分字符串而不拆分单词

> ID：14708917
> 
> 赞同：1
> 
> 时间：2013-02-05T13:41:49.120
> 
> 标签：php, explode, strsplit

我想将字符串分解为（例如）50 个符号（分钟），但不将单词分成两部分。

这可能吗？

使用`str_split()`会导致最后一个词被拆分，这是我*不*想要的。

**示例**：将字符串按 5 个符号分割；

```
$input = 'This is example, example can be anything.';

$output[0] = 'This';
$output[1] = 'is example,';
$output[2] = 'example';
$output[3] = 'can';
$output[4] = 'be anything'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:55:12.560

我不认为有一个内置函数可以为你做这件事，但你可以做这样的事情：

[键盘示例在这里](http://codepad.org/2ujRgrR5)

```
$string = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nec elit dui, nec fermentum velit. Nullam congue ipsum ac quam auctor nec massa nunc.";

$output = array();
while (strlen($string) > 50) {
    $index = strpos($string, ' ', 50);
    $output[] = trim(substr($string, 0, $index));
    $string = substr($string, $index);
}
$output[] = trim($string);

var_dump($output);

// array(3) {
//   [0]=>
//   string(50) "Lorem ipsum dolor sit amet, consectetur adipiscing"
//   [1]=>
//   string(55) "elit. Quisque nec elit dui, nec fermentum velit. Nullam"
//   [2]=>
//   string(43) "congue ipsum ac quam auctor nec massa nunc."
// } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:54:46.897

只需遍历字符串，然后在一个数字（数字 = 5）的字符后检查下一个字符是否为空格并拆分。如果没有空间，不要拆分并转到下一个空间:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:54:53.923

我想我也理解你，那么你可以使用这个功能：

```
<?php

    function str_split_len($str, $len)
    {
        if( $len > strlen($str) )
        {
            return false;
        }

        $strlen = strlen($str);
        $result = array();
        $words = ($strlen / $len);

        for( $x = 1; $x <= $len; $x++ )
        {
            $result[] = substr($str, 0, $words);
            $str = substr($str, $words, $strlen); 
        }

        return $result;
    }

    /* Example */
    $res = str_split_len("Split me !haha!", 3);
    print_r($res);
?> 
```

# c# - 添加 .NET Framework DLL 作为对 Windows 商店应用程序的引用

> ID：14708921
> 
> 赞同：22
> 
> 时间：2013-02-05T13:42:02.477
> 
> 标签：c#, .net, windows-8, windows-store-apps, labview

我正在开发一个 Windows 商店应用程序项目，我想从 National Instruments DAQ 读取简单的温度测量数据。但是，DAQ 的 DLL 库采用 .NETFramework 4.0 格式，当将其添加为我的 windows 商店应用程序项目的引用时，我收到以下错误：**“项目以 '.NetFramework' 为目标，而文件引用以 '.NetCore' 为目标”**

在网上搜索，我发现 Windows 商店应用程序只能使用对另一个 .NETCore 或 Portable Library 二进制文件的引用，它不能引用完整的 .NET 4.0 库。我想有很多人有类似的问题，所以我想知道是否有任何绕行技巧？

![](../Images/479e640e886d51d9561ff4916963bccf.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T14:58:37.393

如果您坚持使用其他人提供的库，并且如果试图游说他们制作可移植版本的尝试不太可能成功，那么您唯一能做的就是找到其他地方来托管 DLL，然后进行通信无论是托管它。例如，对于某些场景，可以编写一个基于 ASP.NET Web API 的服务，该服务将能够使用完整的 .NET Framework，从而能够使用 DLL。

显然，这以一个问题换另一个问题：您现在需要一台可以为您运行 Web 服务的机器。（不幸的是，我相信微软并不正式支持在运行 Windows Store 应用程序的同一台机器上运行该 Web 应用程序。您也许可以让它在您的开发盒上运行，但您将无法部署Web 应用程序本身通过 Windows 应用商店。）

而且这里没有简单的路径 - 您必须编写一个层，通过 HTTP 服务公开您需要的所有内容，以及使用这些服务的客户端代码。您还需要考虑如何保护对服务的访问。

向您的供应商恳求可能更容易......

从理论上讲，如果库没有使用核心 .NET 配置文件之外的任何内容，那么您可以使用 ILDASM 和 ILASM 反编译和重新编译代码，在这样做之前将其转换为可移植库. 但是，如果它是商业代码，这很可能会违反您的许可协议，并且在任何情况下都很可能不起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T13:43:55.313

“解决方法”是创建一个您想要作为可移植库的库版本。这里的所有都是它的。您根本*没有*可用的完整框架。

将类库转换为可移植类库所涉及的困难在很大程度上取决于该库的功能以及它使用 BCL 的哪些区域。

# paypal-sandbox - 贝宝沙盒。无法确认测试账户上的银行账户和购买订阅

> ID：14708924
> 
> 赞同：3
> 
> 时间：2013-02-05T13:42:17.453
> 
> 标签：paypal-sandbox

我在一周内创建了几个预配置的买家测试帐户。没有一个生成的银行账户被确认。我已经完成了文档上的步骤，但无济于事。在其中一些上，它在完整的银行设置下的继续按钮上出错。它在按钮上方的银行帐户详细信息中未发送存款。是说对不起，单击最后一个链接后发生错误...很抱歉，我们遇到了暂时的困难。请稍后再试。如果在付款时发生此错误，请在重新付款前检查您的帐户概览以避免重复付款。我已经清除了 cookie，但都无法继续前进。在其他人身上，我会完成完整的提交，并恭喜您确认您的帐户。但是在测试帐户网站上显示未确认。

此外，我根本无法使用任何帐户购买订阅。它说不能使用这张卡，请选择其他资金来源。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:40:31.240

我刚刚测试了这个设置。如果您从 developer.paypal.com 创建一个预配置的个人买家账户，该银行账户应该已经得到确认和验证。创建预配置帐户时，请确保选择“买家（用于代表客户体验）”而不是“店内买家（用于代表客户在店内结账的体验）”。店内结账不会为您提供已确认的银行账户。

当您创建店内结账买家账户时，您将看到以下错误：账户创建成功但未能添加信用卡和银行。

*   要测试商家交易，您必须使用测试企业帐户
*   要测试买家交易，您必须使用个人账户

# android - 如何在android中获取json数组值？

> ID：14708935
> 
> 赞同：6
> 
> 时间：2013-02-05T13:42:50.760
> 
> 标签：android, json

JSON 响应值如下所示`"types" : [ "sublocality", "political" ]`。如何获取类型的第一个值或如何获取单词 sublocality？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T13:53:46.973

```
String string = yourjson;

JSONObject o = new JSONObject(yourjson);
JSONArray a = o.getJSONArray("types");
for (int i = 0; i < a.length(); i++) {
    Log.d("Type", a.getString(i));
} 
```

如果您只解析上面提供的行，这将是正确的。请注意，要从 GoogleMaps 地理编码访问类型，您应该得到一个结果数组，而不是 address_components，然后您可以访问对象 components.getJSONObject(index)。

这是一个仅解析 formatted_address 的简单实现——我在项目中需要的。

```
private void parseJson(List<Address> address, int maxResults, byte[] data)
{
    try {
        String json = new String(data, "UTF-8");
        JSONObject o = new JSONObject(json);
        String status = o.getString("status");
        if (status.equals(STATUS_OK)) {

            JSONArray a = o.getJSONArray("results");

            for (int i = 0; i < maxResults && i < a.length(); i++) {
                Address current = new Address(Locale.getDefault());
                JSONObject item = a.getJSONObject(i);

                current.setFeatureName(item.getString("formatted_address"));
                JSONObject location = item.getJSONObject("geometry")
                        .getJSONObject("location");
                current.setLatitude(location.getDouble("lat"));
                current.setLongitude(location.getDouble("lng"));

                address.add(current);
            }

        }
    catch (Throwable e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:51:48.020

您应该解析该 JSON 以获取这些值。您可以在 Android 中使用 JSONObject 和 JSONArray 类，也可以使用 Google GSON 之类的库从 JSON 中获取 POJO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:53:54.977

我会坚持你使用 GSON。我创建了一个用于解析相同地图响应的演示。您可以找到完整的演示[`here`](https://github.com/lalit3686/GSONDemo)。此外，我还创建了一个全局 GSON 解析器类，可用于轻松解析 JSON 格式的任何响应。

# python - PyVISA mac OS X (Mountain Lion) 安捷伦 33250a

> ID：14708938
> 
> 赞同：1
> 
> 时间：2013-02-05T13:43:01.090
> 
> 标签：python, visa

我无法使用 GPIB-USB 控制器连接到 Agilent 33250a 仪器。有人知道如何让 PyVISA 识别安捷伦吗？

为了在终端中运行 PyVISA，我使用以下命令：

```
export VERSIONER_PYTHON_PREFER_32_BIT=yes
python-magic.sh
python
import visa 
```

测试：（Agilent 33250a 未连接）

```
>>> visa.get_instruments_list()
['ASRL1', 'ASRL2'] 
```

现在尝试使用 GPIB-USB 控制器连接安捷伦。安装[http://www.ftdichip.com/Drivers/VCP.htm（62](http://www.ftdichip.com/Drivers/VCP.htm)位）。

终端中的另一个测试：输入：`sudo system_profiler SPUSBDataType`

输出：

```
 H82357 ():

      Product ID: 0x0718
      Vendor ID: 0x0957  (Agilent Technologies, Inc.)
      Version: 0.00
      Serial Number: 8235730073
      Speed: Up to 480 Mb/sec
      Manufacturer: AGILENT Technologies, Inc.
      Location ID: 0x1d110000 / 7
      Current Available (mA): 500
      Current Required (mA): 500 
```

但是，当我连接 Agilent 33250a 时，visa.get_instruments_list() 没有检测到它。又名我仍然得到：

```
>>> visa.get_instruments_list()
['ASRL1', 'ASRL2'] 
```

这是因为我无法在 Mac 上安装 IOSuite for Agilent 吗？Agilent IO Suite 仅作为 .exe 文件存在。有任何想法吗？

```
 >>> agilent = visa.instrument("GPIB::1")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/visa.py", line 288, in instrument
    vpp43.parse_resource(resource_manager.session, resource_name)
  File "/Library/Python/2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/vpp43.py", line 777, in parse_resource
    byref(interface_board_number))
  File "/Library/Python/2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/vpp43.py", line 398, in check_status
    raise visa_exceptions.VisaIOError, status
pyvisa.visa_exceptions.VisaIOError: VI_ERROR_INTF_NUM_NCONFIG: The interface type is valid but the specified interface number is not configured.
>>> 
```

# grails - Grails - 注册 ServletContextListener 或通过 BootStrap.groovy 初始化

> ID：14708939
> 
> 赞同：0
> 
> 时间：2013-02-05T13:43:07.047
> 
> 标签：grails, servlets

我只是在我的 Grails 项目中重新考虑了 Logback 初始化的实现，它是通过`ServletContextListener`提供`ServletContext`一次触发并触发整个 Logback 初始化的东西来实现的。

在闭包中`BootStrap.groovy`我已经有了一个`ServletContext`对象`init`，那么为什么不从这个闭包触发 Logback 初始化呢？

使用 BootStrap 初始化的一个巨大好处（对我来说）是，我不必`grails install-templates`在文件中运行和注册监听器`web.xml`...... **如果我不注册 a`ServletContextListener`而是取`ServletContext`from有什么缺点`BootStrap.groovy`吗？**

我很想看看你对此的看法；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:26:47.323

正如我从一个简单的测试中看到的那样，到目前为止，它肯定会在启动时生效，因为在`ServletContextListener`文件中注册 a`web.xml`而不是从`BootStrap.groovy`文件中调用方法时，在启动过程中更早地调用了 Logback 初始化...

据我所知，`JVM`它将首先编译所有`Java`类，这样底层的 Spring Framework 就会比`Groovy`它上面的文件更快地触发。

**结论：**如果您在启动早期需要它们，请 不要调用方法`BootStrap.groovy`，否则没有缺点（至少到目前为止我还没有看到任何缺点）......

# cocoa - 基于视图的 NSTableView 中的 NSPopupButton：让绑定工作

> ID：14708947
> 
> 赞同：6
> 
> 时间：2013-02-05T13:43:41.183
> 
> 标签：cocoa, nstableview, cocoa-bindings, nspopupbutton

### 问题描述

我正在尝试实现一些应该简单且相当常见的事情：在绑定填充的 NSTableView 中填充 NSPopupButton 绑定。Apple 在他们的文档[Implementing To-One Relationships Using Pop-Up Menus](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/Tasks/onerelation.html#//apple_ref/doc/uid/20002301-BCICADHC)中为基于单元格的表格描述了这一点，它看起来像这样：

![在此处输入图像描述](../Images/191d9854f935f2f8d61c1a09efd8d1bc.png)

我不能让它适用于基于视图的表。无论我做什么，“作者”弹出窗口都不会自行填充。

我有两个数组控制器，一个用于表中的项目（**Items**），一个用于作者（**Authors**），它们都与我的核心数据模型中的各个实体相关联。我在界面生成器中将 NSManagedPopup 绑定到我的单元格中，如下所示：

*   *内容*->**作者**（控制器键：*排列对象*）
*   *内容值*->**作者**（控制器键：*排列对象*，模型键路径：*名称*）
*   *选定对象*->**表格单元格视图**（模型键路径：*objectValue.author*

如果我将弹出窗口放在表格之外的某个地方，它可以正常工作（显然选择除外），所以我想绑定设置应该没问题。

* * *

### 我已经尝试过的事情

1.  有人建议对**Authors数组控制器**[使用 IBOutlet 属性的解决方法，](https://stackoverflow.com/questions/10768492/how-to-populate-nspopupbutton-from-coredata-in-view-based-nstableview)但这似乎对我也不起作用。

***   在[另一个 SO question](https://stackoverflow.com/questions/14003452/nspopupbutton-within-a-view-based-nstableview)中，建议将 NSTableCellView 子类化并以编程方式建立所需的连接。我试过这个，但只取得了有限的成功。

    如果我按如下方式设置绑定：

    ```
    - (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
        NSView *view = [tableView makeViewWithIdentifier:tableColumn.identifier owner:self];

        if ([tableColumn.identifier isEqualToString:@"Author") {
            AuthorSelectorCell *authorSelectorCell = (AuthorSelectorCell *)view;
            [authorSelectorCell.popupButton bind:NSContentBinding toObject:self.authors withKeyPath:@"arrangedObjects" options:nil];
            [authorSelectorCell.popupButton bind:NSContentValuesBinding toObject:self.authors withKeyPath:@"arrangedObjects.name" options:nil];
            [authorSelectorCell.popupButton bind:NSSelectedObjectBinding toObject:view withKeyPath:@"objectValue.author" options:nil];
        }

        return view;
    } 
    ```

    弹出窗口确实显示了可能的作者列表，但当前选择始终显示为“无值”。如果我添加

    ```
    [authorSelectorCell.popupButton bind:NSSelectedValueBinding toObject:view withKeyPath:@"objectValue.author.name" options:nil]; 
    ```

    当前选择完全为空。显示当前选择的唯一方法是设置

    ```
    [authorSelectorCell.popupButton bind:NSSelectedObjectBinding toObject:view withKeyPath:@"objectValue.author.name" options:nil]; 
    ```

    一旦我选择了不同的作者，它就会中断，因为它会尝试将 an 分配`NSString*`给一个`Author*`属性。** 

 **有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-11T10:50:10.927

我有同样的问题。我在 Github 上放了一个[示例项目，表明这是可能的。](https://github.com/blishen/TableViewPopup)

> 有人建议对 Authors 数组控制器使用 IBOutlet 属性的解决方法，但这似乎对我也不起作用。

这是对我有用的方法**，**并且在[示例项目](https://github.com/blishen/TableViewPopup)中得到了演示。谜题中缺少的一点是数组控制器的 IBOutlet 需要位于提供 TableView 委托的类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:01:07.627

有同样的问题并找到[了这个解决方法](https://stackoverflow.com/questions/10768492/how-to-populate-nspopupbutton-from-coredata-in-view-based-nstableview)- 基本上使用 IBOutlet 将您的作者数组控制器从 nib 中取出并通过文件所有者绑定到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T18:20:04.340

你可以试试这个 NSPopUpbutton 的 FOUR + 1 设置：

在我的示例中，“allPersons”等同于您的“作者”。我将 allPersons 作为文件所有者中的属性 (NSArray*) 提供。

此外，我将 tableView 委托绑定到 File 的所有者。如果这没有绑定，我只会得到一个默认列表：Item1，Item2，Item3

[![在此处输入图像描述](../Images/916bf359c20f2cd7424bb5e3fb50bc56.png)](https://i.stack.imgur.com/8Oyqd.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-13T16:48:20.633

我总是更喜欢程序化方法。在 NSTableCellView 上创建一个类别：

```
+(instancetype)tableCellPopUpButton:(NSPopUpButton **)popUpButton
                         identifier:(NSString *)identifier
                    arrayController:(id)arrayController
                       relationship:(NSString *)relationshipName
        relationshipArrayController:(NSArrayController *)relationshipArrayController
              relationshipAttribute:(NSString *)relationshipAttribute
      relationshipAttributeIsScalar:(BOOL)relationshipAttributeIsScalar
                  valueTransformers:(NSDictionary *)valueTransformers
{
    NSTableCellView *newInstance = [[self alloc] init];
    newInstance.identifier = identifier;

    NSPopUpButton *aPopUpButton = [[NSPopUpButton alloc] init];
    aPopUpButton.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;

    [aPopUpButton bind:NSContentBinding  //the collection of objects in the pop-up
        toObject:relationshipArrayController
     withKeyPath:@"arrangedObjects"
         options:nil];

    NSMutableDictionary *contentBindingOptions = [NSMutableDictionary dictionaryWithDictionary:[[TBBindingOptions class] contentBindingOptionsWithRelationshipName:relationshipName]];

    NSValueTransformer *aTransformer = [valueTransformers objectForKey:NSValueTransformerNameBindingOption];
    if (aTransformer) {
        [contentBindingOptions setObject:aTransformer forKey:NSValueTransformerNameBindingOption];
    }
    [aPopUpButton bind:NSContentValuesBinding // the labels of the objects in the pop-up
        toObject:relationshipArrayController
     withKeyPath:[NSString stringWithFormat:@"arrangedObjects.%@", relationshipAttribute]
         options:[self contentBindingOptionsWithRelationshipName:relationshipName]];

    NSMutableDictionary *valueBindingOptions = [NSMutableDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithBool:YES], NSAllowsEditingMultipleValuesSelectionBindingOption,
        [NSNumber numberWithBool:YES], NSConditionallySetsEditableBindingOption,
        [NSNumber numberWithBool:YES], NSCreatesSortDescriptorBindingOption,
        [NSNumber numberWithBool:YES], NSRaisesForNotApplicableKeysBindingOption,
        [NSNumber numberWithBool:YES], NSValidatesImmediatelyBindingOption,
        nil];;

    @try {
        // The object that the pop-up should use as the selected item
        if (relationshipAttributeIsScalar) {
            [aPopUpButton bind:NSSelectedValueBinding
                toObject:newInstance
             withKeyPath:[NSString stringWithFormat:@"objectValue.%@", relationshipName]
                 options:valueBindingOptions];
        } else {
            [aPopUpButton bind:NSSelectedObjectBinding
                toObject:newInstance
             withKeyPath:[NSString stringWithFormat:@"objectValue.%@", relationshipName]
                 options:valueBindingOptions];
        }
    }
    @catch (NSException *exception) {
        //NSLog(@"%@ %@ %@", [self class], NSStringFromSelector(_cmd), exception);
    }
    @finally {
        [newInstance addSubview:aPopUpButton];
        if (popUpButton != NULL) *popUpButton = aPopUpButton;
    }

    return newInstance;
}

+ (NSDictionary *)contentBindingOptionsWithRelationshipName:(NSString *)relationshipNameOrEmptyString
{
    NSString *nullPlaceholder;
    if([relationshipNameOrEmptyString isEqualToString:@""])
        nullPlaceholder = NSLocalizedString(@"(No value)", nil);
    else {
        NSString *formattedPlaceholder = [NSString stringWithFormat:@"(No %@)", relationshipNameOrEmptyString];
        nullPlaceholder = NSLocalizedString(formattedPlaceholder,
                                            nil);
    }

    return [NSDictionary dictionaryWithObjectsAndKeys:
            nullPlaceholder, NSNullPlaceholderBindingOption,
            [NSNumber numberWithBool:YES], NSInsertsNullPlaceholderBindingOption,
            [NSNumber numberWithBool:YES], NSRaisesForNotApplicableKeysBindingOption,
            nil];
} 
```**

# iphone - 如何防止 UItable 视图的 tableHeaderView 滚动，粘在顶部

> ID：14708954
> 
> 赞同：3
> 
> 时间：2013-02-05T13:43:59.040
> 
> 标签：iphone, objective-c, uitableview, uisplitviewcontroller, nstableheaderview

在我的拆分视图应用程序中，无法将搜索栏添加到拆分视图的 rootView

所以我在ui表视图的tableHeaderView中动态添加了搜索栏，如下所示

```
searchBar = [[UISearchBar alloc] init];
      searchBar.frame=CGRectMake(0, self.tableView.frame.origin.y, self.tableView.frame.size.width, 44);
      [searchBar sizeToFit];
      self.tableView.tableHeaderView = searchBar; 
```

![在此处输入图像描述](../Images/ace69509fd688070a6b16ca2c05c5d99.png)

向下滚动时：iThe tableHeaderView 也会向下滚动，因此搜索栏也会滚动

![在此处输入图像描述](../Images/61405e4448aefd3786a0481b5cbcb4ac.png)

滚动顶部时：tableHeaderView 也会滚动到顶部，因此搜索栏也会滚动

![在此处输入图像描述](../Images/5aeeec2243a9d087b328cb03584a622e.png)

**我实现了如下代码来解决此问题** ***`this helps only when scrolls down`***，但是**当我们将表格视图滚动到顶部时，它再次与表格视图一起移动**

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
      CGRect rect = self.tableView.tableHeaderView.frame;
      rect.origin.y = MIN(0, self.tableView.contentOffset.y);
      self.tableView.tableHeaderView.frame = rect;
} 
```

我需要始终将 tableHeaderView/ 搜索栏放在视图顶部

这个怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:17:48.547

您可以添加 tabBar 与 tableView 分开

```
mySearchBar = [[UISearchBar alloc] init];
[mySearchBar setHidden:NO];
mySearchBar.placeholder = @"Search item here";
mySearchBar.tintColor = [UIColor darkGrayColor];
mySearchBar.frame = CGRectMake(0, 0, 320, 44);
mySearchBar.delegate = self;
[mySearchBar sizeToFit];
[mySearchBar setAutocapitalizationType:UITextAutocapitalizationTypeNone];

[self.view addSubview:mySearchBar]; 
```

和tableView

```
UITableView *tableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 44, 320, 436)];
[self.view addSubview:tableView]; 
```

如果你想添加 xib 然后

![在此处输入图像描述](../Images/034a6f9bded4cc11bf1317745412174f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:49:40.700

将您的 searchBar 放在单独的视图中，并将该视图放在表格视图上方。这意味着它保持不变。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-05T15:56:17.270

我确信这已经被回答过，但假设你正在使用`UITableViewController`，你可以让`view`属性成为你想要的任何东西。因此，一种方法是设置一个容器视图，顶部是搜索栏，下面是表格，并`view`成为这个容器。默认情况下，`tableView`返回`view`，因此您需要注意的另一个细节是覆盖该`tableView`属性以返回实际的表视图（您已存储在 ivar 中）。代码可能如下所示：

```
@synthesize tableView = _tableView;

- (void)loadView
{
    [super loadView];

    _tableView = [super tableView];

    // Container for both the table view and search bar
    UIView *container = [[UIView alloc] initWithFrame:self.tableView.frame];

    // Search bar
    UIView *searchBar = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 50)];

    // Reposition the table view below the search bar
    CGRect tableViewFrame = container.bounds;
    tableViewFrame.size.height = tableViewFrame.size.height - searchBar.frame.size.height;
    tableViewFrame.origin.y = searchBar.frame.size.height + 1;
    self.tableView.frame = tableViewFrame;

    // Reorganize the view heirarchy
    [self.tableView.superview addSubview:container];
    [container addSubview:self.tableView];
    [container addSubview:searchBar];
    self.view = container;
} 
```

# php - 这个网站用什么编码？

> ID：14708958
> 
> 赞同：-8
> 
> 时间：2013-02-05T13:44:04.873
> 
> 标签：php, javascript, jquery, scriptaculous

网站 sym baloo .com 可以在屏幕上移动图标。您可以将小瓷砖从一个方块拖放到另一个方块。这也必须能够使用瓷砖的新位置更新数据库。

谁能告诉我实现这一目标的最佳方法是什么，无论是他们完成的方式还是其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:47:20.387

有问题的网络使用[MooTools](http://mootools.net/)和可能的扩展来实现拖放效果。查看[他们的构建器站点](http://mootools.net/more/)以构建您的网站所需的功能。

至于数据库更新，这不是他们使用什么的问题。您需要为其设计自己的数据库架构和后端（PHP、ASP.NET、Ruby...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:48:33.227

```
-- id = Id of content what u drag--
    $("#id").draggable({
        revert: true
    });
-- id= Id of content where u drop--
        $("#id").droppable();

        $("#id").droppable({
            tolerance: 'touch',
            over: function () {
                $(this).css('backgroundColor', '#cedae3');
            },
            out: function () {
                $(this).css('backgroundColor', '#a6bcce');
            },
}
); 
```

# java - 使用外部数据更新 ActivePivot 连续查询？

> ID：14708968
> 
> 赞同：0
> 
> 时间：2013-02-05T13:44:32.907
> 
> 标签：java, olap, real-time-updates, activepivot

在我们的 ActivePivot 解决方案中，我们编写了一个**后处理器**，它根据股票价格（和波动率参数）计算股票期权的价格。当它被评估时，后处理器（暂时）连接到谷歌金融服务以即时检索股票价格。因此，每次用户在 ActivePivot 上进行查询时，都会使用最新价格实时计算聚合。

但我们也想利用 ActivePivot 中的**连续查询**，并将更改的聚合实时推送给用户（而不是定期点击 ActivePivot Live 的刷新按钮）。我们知道它通常是通过编写一个连续的处理程序来实现的，它将价格变化事件传播到 ActivePivot 并让 ActivePivot 计算对订阅查询的影响。但谷歌财经不提供推送 API，如果我们通过定期轮询数百只股票来打击这项服务，我们将被禁止。

您建议在 ActivePivot 中使用什么机制来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:41:10.240

当后处理器的数据源太不可预测时（例如在您的情况下没有推送功能的远程 Web 服务），最好的方法是为此后处理器创建一个**流**和一个**处理程序，告诉****ActivePivot**整个结果这个后置处理器每**N**秒改变一次。

您可以创建一个 TickingStream，它发送一个具有固定周期的（空）事件，如下所示：

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.Timer;
import java.util.TimerTask;

import com.quartetfs.biz.pivot.IActivePivotSession;
import com.quartetfs.biz.pivot.query.aggregates.IAggregatesContinuousQueryEngine;
import com.quartetfs.biz.pivot.query.aggregates.impl.AStream;
import com.quartetfs.fwk.QuartetExtendedPluginValue;
import com.quartetfs.fwk.types.impl.ExtendedPluginInjector;

/**
 * Stream sending an event at a regular rate.
 *
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.query.aggregates.IStream", key = TickingStream.PLUGIN_KEY)
public class TickingStream extends AStream<Void> {

    private static final long serialVersionUID = 1L;

    public static final String PLUGIN_KEY = "TICKING";

    /** The default ticking period, in ms. **/
    protected static final long DEFAULT_PERIOD = 1000;

    /** The ticking period, in ms. **/
    protected long period = DEFAULT_PERIOD;

    /** The task responsible for sending the ticking events. */
    protected final TimerTask sendEventTask;

    /** The timer that schedules the {@link #sendEventTask}. */
    protected Timer tickingTimer;

    /**
     * Create a ticking stream.
     *
     * @param engine
     * @param session
     */
    public TickingStream(IAggregatesContinuousQueryEngine engine,
            IActivePivotSession session) {
        super(engine, session);

        // Create the task that will send the events.
        sendEventTask = new TimerTask() {

            @Override
            public void run() {
                sendEvent(null);
            }
        };
        // Schedule this task with the default period:
        rescheduleTask();
    }

    /**
     * Schedule the {@link #sendEventTask} with the {@link #period} period.
     * Removes also all previous scheduling of this task.
     */
    protected void rescheduleTask() {
        if (tickingTimer != null) {
            tickingTimer.cancel();
        }
        tickingTimer = new Timer();
        tickingTimer.schedule(sendEventTask, 0, period);
    }

    /**
     * Change the ticking period of this stream. This will reschedule the task
     * according to this new period. This setter will be called via
     * {@link ExtendedPluginInjector extended plugin injection}
     *
     * @param period the period to set. Must be strictly positive.
     *
     * @throws IllegalArgumentException if period is smaller or equal to 0.
     */
    public void setPeriod(long period) {
        if (period <= 0) {
            throw new IllegalArgumentException("Non-positive period.");
        }
        this.period = period;
        rescheduleTask();
    }

    /** {@inheritDoc} */
    @Override
    public Class<Void> getEventType() {
        return Void.class;
    }

    /** {@inheritDoc} */
    @Override
    public String getType() {
        return PLUGIN_KEY;
    }
} 
```

以及要求刷新与后处理器相关的所有连续查询部分的处理程序在每个滴答时都有此处理程序：

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.Collections;

import com.quartetfs.biz.pivot.IActivePivot;
import com.quartetfs.biz.pivot.ILocation;
import com.quartetfs.biz.pivot.query.aggregates.IImpact;
import com.quartetfs.biz.pivot.query.aggregates.impl.AAggregatesContinuousHandler;
import com.quartetfs.biz.pivot.query.aggregates.impl.Impact;
import com.quartetfs.fwk.QuartetExtendedPluginValue;

/**
 * The handler associated with a {@link TickingStream}.
 *
 * This handler asks for a full refresh of the locations queried on
 * post-processors with this handler each time it receives a tick.
 * <p>
 * This is the handler to use for post processors that have unpredictable data
 * sources which prevent the creation of a stream and a handler that can decide
 * which subset of the currently queried locations should be updated in a
 * continuous query.
 *
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.query.aggregates.IAggregatesContinuousHandler", key = TickingStream.PLUGIN_KEY)
public class TickingHandler extends AAggregatesContinuousHandler<Void> {

    private static final long serialVersionUID = 1L;

    /**
     * @param pivot
     */
    public TickingHandler(IActivePivot pivot) {
        super(pivot);
    }

    /**
     * {@inheritDoc}
     * <p>
     * The impact on a queried location is the whole location since there is no
     * way for us to know which part of the location should be updated or not.
     */
    @Override
    public IImpact computeImpact(ILocation location, Void event) {
        return new Impact(location, Collections.singleton(location), Collections.singleton(location));
    }

    /** {@inheritDoc} */
    @Override
    public String getStreamKey() {
        // This handler is made to be used with the TickingStream.
        return TickingStream.PLUGIN_KEY;
    }

    /** {@inheritDoc} */
    @Override
    public String getType() {
        return TickingStream.PLUGIN_KEY;
    }
} 
```

并且您将后处理器配置为以这种方式使用此处理程序：

```
<measure name="..." folder="..." aggregationFunctions="...">
            <postProcessor pluginKey="yourPPpluginKey">
                <properties>
                    <entry key="continuousQueryHandlerKeys" value="TICKING" />
                </properties>
            </postProcessor>
        </measure> 
```

在某种程度上，您将轮询 Google 金融服务，因为您的后处理器将每秒调用一次（默认周期）。但这只有在用户使用您的后处理器进行连续查询时才会发生，并且您的后处理器只会在用户查询的位置上被调用，因此希望您只需要一小部分 Google 财经信息。此外，对您的后处理器的调用将在多个用户之间共享，以便您向 Google 财经发出最少数量的查询。

# python - Linux：获取日志文件的位置

> ID：14708969
> 
> 赞同：3
> 
> 时间：2013-02-05T13:44:36.010
> 
> 标签：python, linux, logging, environment-variables

我想让我的（python）脚本（位于任何地方）编写一个日志文件并将该日志文件放在适当的位置。在 Linux:Debian 中，这可能是 /var/log。

我想知道是否可以从系统中检索到这样的日志文件位置？有环境变量还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:56:25.080

登录 Linux/UNIX 的典型方法是使用系统记录器。从您的应用程序（或守护程序）调用`syslog`系统函数（参见手册页）。

此功能会将您的日志转发到系统记录器。从那里，系统记录器将负责将这些日志消息写入文件。然后，您还可以自定义系统记录器的行为，将您的一些消息写入特殊文件，或忽略它们。

为了直接回答您的问题，[FHS](http://www.pathname.com/fhs/)`/var/log/`将其定义为必须写入日志文件的位置。无需依赖环境变量。

# marmalade - 无法在 Windows 中打开 mkb 文件

> ID：14708971
> 
> 赞同：1
> 
> 时间：2013-02-05T13:44:38.287
> 
> 标签：marmalade

在 Windows 中打开果酱的 .mkb 文件时出现错误。

它在尝试打开示例应用程序 .mkb 文件时显示以下错误：

```
C:\Marmalade\6.2\s3e\makefile_builder\mkb.py
C:\Marmalade\6.2\examples\IwGx\IwGxBasicLighting.mkb
Building project: c:/Marmalade/6.2/examples/IwGx/IwGxBasicLighting.mkb
Executing: 'c:\marmalade\6.2\s3e\bin\mdev.bat update'
Downloading: http://source.madewithmarmalade.com/packages/6.2/Packages
error: error downloading url: http://source.madewithmarmalade.com/packages/6.2/Packages (<urlopen error (10060, 'Operation timed out')>)
c:/marmalade/6.2/modules/iwutil/iwutil.mkf(19) : 
error: Executing 'c:\marmalade\6.2\s3e\bin\mdev.bat update' failed. (return code 1)
FAILED (error code=3)* 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:24:06.687

您需要有任何有效的互联网连接才能打开 mkb。Marmalade 需要下载某些更新文件以进行许可证检查和模块更新才能正常工作。由于您可能是第一次运行 marmalade，它会引发错误。

# php - 如何使用 php str_word_count 计算文本区域中的单词

> ID：14708972
> 
> 赞同：0
> 
> 时间：2013-02-05T13:44:38.513
> 
> 标签：php, textarea

我在入门级 php 课程。课程是创建一个带有 textarea 提交表单的 HTML 页面，其本质是使用字数作为成本向客户收取分类广告费用。那部分是完整的。第二页是一个使用 str_word_count 的 php 脚本。您如何计算文本区域中的单词，然后对超过设定数量的每个单词按单词收费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:51:17.523

这是文档[**`str_word_count`**](http://php.net/str_word_count)

使用它真的很容易。例如，如果您的 textarea 名为“ `mytextarea`”，并且您通过 POST ( `<form method="POST">`) 发送了表单，那么您的 textarea 数据将位于`$_POST['mytextarea']`

然后数单词：

```
$count = str_word_count($_POST['mytextarea']); 
```

然后你只需要使用 $count 变量来做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:55:07.183

```
$var =textareaObject.value ; //Store textarea text in $var 

print_r(str_word_count($var)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:00:25.513

那么就使用怎么样`$words= str_word_count($_POST['clientdetails']);` ，可能只是做一个简单的数学，比如

`$fee = $words * 0.50;`

0.50 是您要收取的金额

然后，类似：

`<?php echo 'we are going to charge you '.$fee.' for these words'; ?>`

# qt - Windows中的自动化功能测试qt应用程序

> ID：14708976
> 
> 赞同：2
> 
> 时间：2013-02-05T13:44:46.557
> 
> 标签：qt, testing, automation

我正在尝试创建脚本来测试窗口内是否存在某些 GUI 组件（组合框、复选框、复选框的状态等）。我要测试的应用程序是用 QT 编写并在 Windows 7 上运行的。它内容是动态创建的。

我尝试过使用 swapy/pywinauto、AutoHotkey 和 AutoIt。但是由于它们依赖于标准的 Windows API 调用，因此它们对此毫无用处（需要一个涉及 QT 的解决方案）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:51:26.750

您可以尝试[使用 QtTestLib](http://doc.qt.digia.com/solutions/4/qttestlib/qttestlib-manual.html)来获得集成解决方案，或者，如果您想要（并且负担得起）商业解决方案，我知道[squish](http://www.froglogic.com/squish/)和[kdexecutor](http://freecode.com/projects/kdexecutor)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:06:22.093

您是否知道 AutoHotKey Windows Spy 允许您查看某些 GUI 对象是否存在于窗口中。在示例图像中，您可以看到我将鼠标悬停在名为 的组合框上`ComboBox5`。您是否尝试在此级别进行测试？

![在此处输入图像描述](../Images/14528eb9066a19fb4e6cb54207cf26d9.png)

其余的可以在这里找到：[检查某个按钮是否存在或不使用自动热键](https://stackoverflow.com/questions/8585290/check-if-a-certain-button-is-existing-or-not-using-autohotkey)

# php - jQuery post() 到 php 页面

> ID：14708978
> 
> 赞同：1
> 
> 时间：2013-02-05T13:44:54.280
> 
> 标签：php, javascript, jquery

我正在学习 php/javascript 所以不要笑...

我尝试从 page1.php 将 3 个变量发布到 page2.php。我不确定出了什么问题......这是代码（简化模式）：

**page1.php**

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  
</head>
<body>
<script type="text/javascript">
window.onload = post_text;
function post_text() {
test1="111";
test2="222";
test3="333";
$.post("page2.php", { test1:test1 , test2:test2, test3=test3 });
}
</script>
</body>
</html> 
```

**page2.php**

```
<?php
$a=$_POST['test1'];
$b=$_POST['test2'];
$c=$_POST['test3'];
echo $a.$b.$c;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:47:48.013

```
$.post("page2.php", { test1:test1 , test2:test2, test3:test3 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T13:48:38.100

由于您正在学习，您可能会尝试通过编写较短的代码块并查看它们是否首先工作来隔离问题。在这种情况下，您的第一个问题是一个普通的错字（test3=test3，而不是 test3: test3），因此您的整个 JS 不会解析。您应该会在 firebug 控制台（或 chrome 控制台）中看到相关的错误消息。

# android - 如何在我的 android 应用程序中使用现有的 sql lite 数据库，其大小为 2.3 Mb

> ID：14708985
> 
> 赞同：0
> 
> 时间：2013-02-05T13:45:31.233
> 
> 标签：android, database, performance, sqlite, android-sqlite

我正在开发 android 应用程序。我的客户端为我提供了一个很大的数据库。它几乎是 2.3Mb。最初我不知道如何使用现有数据库，我遵循了本教程 [教程](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

用于访问现有数据库。但我得到了错误。我想知道如何访问这种类型的大型数据库。谁能帮我。

在这里，我有我的 DataBaseHelper 类。

公共类 DataBaseHelper 扩展 SQLiteOpenHelper {

```
// The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.example.readdatabase/databases/";

private static String DB_NAME = "categories.sqlite";

private SQLiteDatabase myDataBase;

private final Context myContext;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
}

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database does't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public Cursor performTransaction(String query) {

    Cursor cur = myDataBase.rawQuery(query, null);

    return cur;
} 
```

}

这是我的主要课程

公共类 MainActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    DataBaseHelper db = new DataBaseHelper(this);
    try {
        db.createDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }
    db.openDataBase();

    String query = "select * from PrayerInfo";
    Cursor cursor = db.performTransaction(query);
    System.out.println(cursor.getColumnCount());
} 
```

}

它在 Android 2.3 和更高版本中运行良好。但它在较低版本上不起作用。我收到错误之类的错误。任何人都可以帮助我

java.lang.Error：在 com.example.readdatabase.MainActivity.onCreate(MainActivity.java:18) 的 com.example.readdatabase.DataBaseHelper.createDataBase(DataBaseHelper.java:48) 复制数据库时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:49:38.560

这是通常的做法。您可以将现有数据库复制到资产文件夹，然后在设备上安装后，用它填充设备的内部数据库。错误是什么？如果您不发布您的 LogCat 和相关的 Java 代码，那么没有人可以帮助您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:59:16.807

这个库可能对你有用：[Android SQLite Asset Helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

请注意，您将无法直接使用原始数据库，只能使用副本，因此会浪费一些空间。

* * *

另一种解决方案可能是将原始数据库转换为 SQL（可以压缩为 zip 文件），并在`SqliteOpenHelper.onCreate`方法中播放脚本。

请参阅此链接了解如何执行此操作：[如何转储某些 SQLite3 表的数据？](https://stackoverflow.com/questions/75675/how-do-i-dump-the-data-of-some-sqlite3-tables)

# ios - NSArray objectAtIndex：简写

> ID：14708987
> 
> 赞同：24
> 
> 时间：2013-02-05T13:45:34.537
> 
> 标签：ios, objective-c, nsarray, shorthand

> **可能重复：**
> [Objective-C 中是否有一些文字字典或数组语法？](https://stackoverflow.com/questions/9693647/is-there-some-literal-dictionary-or-array-syntax-in-objective-c)

我最近注意到一些奇怪的东西似乎在 Objective-c 中起作用。

当我有一个数组时，

```
NSArray *myArray = @[@"1", @"b", @"3", @"d"]; 
```

我通常可以通过以下方式访问第二个元素，

```
NSString *element = [myArray objectAtIndex:1]; // second element 
```

但是我现在似乎也可以通过它访问它。

```
NSString *element = myArray[1]; 
```

有谁知道这现在是否是一种定义的行为，因此可以安全使用，还是应该避免它？感谢任何能提供帮助的人！！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-05T13:48:36.290

此语法是在 Clang 3.3 中添加的：[Objective C Literals](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。本质上，编译器将类型`objCObj[idx]`的表达式转换为表达式`[objCObj objectAtIndexedSubscript:idx]`。它也适用于字典，您可以自由地将它用于您自己的对象。

因此，假设您将使用现代版本的 Objective C 和适当更新的 Objective C 编译器（即 Clang），那么您使用它是完全安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T13:48:57.070

这是objective-c 的一个新特性，自xCode 4.5 起可用

使用这种语法是安全的，你甚至可以为你自己的类提供支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T13:51:08.637

是的，使用这些语法是安全的。

这些语法是现代 Objective-C 的一部分。

您可以查看这篇文章以获取更多选项：[**ObjectiveCLiterals**](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T13:53:25.577

对于最新版本的 LLVM 编译器来说，这是一个完全有效的代码。到目前为止，它对其他编译器（例如 GCC）无效。

无论您是否应该避免它 - 嗯，这是一个品味问题。由于索引的行为略有不同（使用完全不同的方法来实现它），因此互联网上有几个关于它的大讨论。也有关于是否使用表达式文字的讨论，因为有时它们会降低代码的可读性（例如，它们写得像文字，但它们实际上是自动释放的对象）。请注意，一切都是使用文字完成的，可以使用简单的宏来完成。

# ios - iOS 内存不足警告和模拟器的“模拟内存警告”

> ID：14708994
> 
> 赞同：3
> 
> 时间：2013-02-05T13:45:54.337
> 
> 标签：ios, xcode, memory, ios-simulator

iOS 下的应用程序通过以下机制收到内存不足警告：

*   `[AppDelegate applicationDidReceiveMemoryWarning:]`

*   `UIApplicationDidReceiveMemoryWarningNotification`

*   `[UIViewController didReceiveMemoryWarning]`

这些项目之间的关系是什么？它们都是在收到内存不足的情况时发生的，还是有细微的差别？它们按什么顺序执行？

在模拟器中有一个“模拟内存警告”选项。`didReceiveMemoryWarning:`除了在所有 UIViewControllers 上调用之外，这有什么作用吗？

我想使用 Xcode 分析器工具来查看这些天在缓存`[UIImage imageNamed:]`方法加载的图像周围发生了什么——它们是未缓存的吗？- 但我需要知道如何“正确”触发低内存条件 - 即使它只是通过分配大量内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:05:01.467

在回答您关于`UIImage`缓存的问题时`imageNamed`，是的，它似乎确实清除了缓存。在这里，我通过加载 225 张图像`imageNamed`，然后在执行 20 秒后，我模拟了一个内存警告：

![imageNamed 的分配](../Images/d5872a42d984904702debfea4f94b2ae.png)

话虽如此，我认为`imageNamed`缓存是一个钝器，我更喜欢通过 来做我自己的缓存`NSCache`，所以我可以通过设置来限制它应该在缓存中保留多少图像，`countLimit`目的是完全防止内存警告。顺便说一句，虽然`NSCache`不响应`UIApplicationDidReceiveMemoryWarningNotification`，但它会在真正的低内存情况下自动清除自己。但是，它不会响应在模拟器中手动模拟内存警告。

无论如何，这里是使用 a 加载图像的日志`NSCache`，首先没有 the `countLimit`，其次是 a`countLimit`为 50，在每个结束时清除缓存：

![NSCache 没有和有 countLimit](../Images/96d05a5bb19a8992e5c333a71e61e1a6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:04:25.127

部分答案：

我已经确认在模拟器上（iOS Simulator 6.0 上的 iOS6.1），“模拟内存警告”会导致所有三种机制都被触发，顺序如下：

1.  `[AppDelegate applicationDidReceiveMemoryWarning:`
2.  `[UIViewController didReceiveMemoryWarning]`
3.  `UIApplicationDidReceiveMemoryWarningNotification`

# sql - 选择 IN(NULL,>=SYSDATE) 的日期

> ID：14708995
> 
> 赞同：0
> 
> 时间：2013-02-05T13:45:58.737
> 
> 标签：sql, oracle10g

那可能吗？可以一个

```
SELECT * FROM DATES_TBL WHERE DATES_TBL.DATES IN(NULL, >=SYSDATE) 
```

? 也许我的格式不正确，或者错过了一个勾号？

我想要的`select`是日期字段中`NULL`大于或等于今天日期（`>=SYSDATE`）的值。任何帮助，将不胜感激。

SQL 10g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:48:07.623

```
SELECT * 
FROM DATES_TBL
WHERE DATES IS NULL OR DATES >= SYSDATE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:47:16.907

NULL 值是一个特殊值，因此您必须像这样编写语句：

```
SELECT *
FROM   DATES_TBL
WHERE  DATES IS NULL
OR     DATES >= SYSDATE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T13:48:31.557

这绝对不是一个有效的语法：`IN`查询需要特定的项目；`IN`另外，因为在 SQL 中 null 永远不等于任何东西，包括其他 null，所以将 null 放入列表中是没有意义的。

你需要的是一个`OR`：

```
SELECT * WHERE (DATES_TBL.DATES IS NULL) OR (DATES_TBL.DATES>=SYSDATE)
--              ^^^^^^^^^^^^^^^^^^^^^^^      ^^^^^^^^^^^^^^^^^^^^^^^^
--                |                             |
--                |                             +- This is how you compare for >=
--                +------------- This is how you check for NULL 
```

> 每次我尝试使用 OR 子句时，都会导致大量运行时间

在`OR`引入 when 来组合非重叠结果的情况下（在这种情况下是这样，因为列是或者`null`大于`SYSDATE`，但不是两者），您可以使用它`UNION ALL`来潜在地加速搜索：

```
SELECT * WHERE DATES_TBL.DATES IS NULL
UNION ALL
SELECT * WHERE DATES_TBL.DATES >= SYSDATE 
```

您需要确保该`DATES_TBL.DATES`列已编入索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T21:57:13.413

假设这是针对 Oracle 的，试试这个：

SELECT * FROM DATES_TBL WHERE（DATES_TBL.DATES 为空或 DATES_TBL.DATES >= sysdate）

括号使它工作。

# entity-framework - 如何从 System.Data.Entities.DynamicProxies 获取 EF POCO

> ID：14708997
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:10.157
> 
> 标签：entity-framework, automapper, poco

我的问题和这个[一样](https://stackoverflow.com/questions/12382982/ef-code-first-get-poco-from-proxy)

但是，我在那里并没有真正看到解决方案。假设我有一个简单的模型，其中包含两个 POCO，即 Country 和 State。

```
public class Country
{
    public string Code { get; set; }
    public string Name { get; set; }
}
public class State 
{
    public string Code { get; set; }
    public string Name { get; set; }

    public virtual Country Country { get; set; }
} 
```

当我使用 .GetStateByCode(myCode) 的存储库时，它会检索一个动态代理对象。我想使用 WCF 服务通过网络将其发送给我的客户。动态代理不是已知类型，因此它会失败。

这是我的替代方案。我可以在上下文中将 ProxyCreationEnabled 设置为 false，然后我的 .GetStateByCode(myCode) 给了我一个很棒的 POCO。但是，POCO to Country 中的导航属性为 NULL（不是很好）。

我应该新建一个状态 POCO 并手动填充并从存储库返回的动态代理返回它吗？我应该尝试使用 AutoMapper 将动态代理对象映射到 POCO 吗？这里有什么我完全想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:38:15.890

我认为 Ladislav Mrnka 的答案很明确。警告仍然适用。即使下面有这个想法。小心被捡起的东西。他只是没有包括，如果你想继续如何轻松地将数据从对象 a 获取到对象 B。这确实是手头的问题。

样品溶液

请参阅 nuget 包**ValueInjecter** （不是唯一可以执行此操作的工具......但非常易于使用）它允许将一个对象轻松复制到另一个对象，尤其是具有相同属性和类型的对象。（记住延迟加载/导航的含义）。

**所以香草选项是：**

```
 var PocoObject = new Poco();
 PocoObject.InjectFrom(DynamicProxy); // copy contents of DynamicProxy to PocoObject 
```

**但检查默认行为并考虑自定义规则**

```
 var PocoObject = new Poco();
     PocoObject.InjectFrom<CopyRule>(DynamicProxy);

 public class CopyRule : ConventionInjection
    {
        protected override bool Match(ConventionInfo c)
        {
            bool usePropertry;   // return if the property it be included in inject process
            usePropertry = c.SourceProp.Name == "Id";  // just an example
            //or
            // usePropertry = c.SourceProp.Type... == "???"
            return usePropertry;
        }
    } 
```

# c++ - 无法创建位图图像；文件头/信息头是错误的

> ID：14708998
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:12.240
> 
> 标签：c++, image, bitmap

我正在尝试从高性能相机（Allied Vision Technologies Prosilica GT2750）捕获的图像创建 24 位图图像。这是我到目前为止所拥有的：（注意 VmbUInt32 被定义为“typedef unsigned __int32 VmbUint32_t;”并且 VmbUchar_t 只是一个无符号字符）

```
 VmbUint32_t imageSize = 0;
        pFrame->GetImageSize(imageSize); //imageSize = 6054400

        VmbUint32_t imageWidth = 0;
        pFrame->GetWidth(imageWidth);    //imageWidth = 2752
        VmbUint32_t imageHeight = 0;
        pFrame->GetHeight(imageHeight);  //imageHeight = 2200

        //////////////////////////////////////////////////////////////////////////
        //////////  Set Bitmap Settings   ////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////

        //file header
        BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
        bf->bfType              = 0x4d42;
        bf->bfSize              = imageSize + 40 + 14; //image size + infoheader size + fileheader size 
        bf->bfOffBits           = 54;

        //info header
        BITMAPINFOHEADER* bi = new BITMAPINFOHEADER;
        bi->biSize              = 40;
        bi->biWidth             = imageWidth;
        bi->biHeight            = imageHeight;
        bi->biPlanes            = 1;
        bi->biBitCount          = 24;
        bi->biCompression       = 0;
        bi->biSizeImage         = imageSize;
        bi->biXPelsPerMeter     = 2835;
        bi->biYPelsPerMeter     = 2835;
        bi->biClrUsed           = 0;
        bi->biClrImportant      = 0;

        //image data
        VmbUchar_t* imageData = new VmbUchar_t[imageSize];
        pFrame->GetImage(imageData);

        //////////////////////////////////////////////////////////////////////////
        //////////  Output File to .bmp   ////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////

        std::ofstream outFile;

        outFile.open("test.bmp", std::ios::binary|std::ios::out);

        outFile.write(reinterpret_cast<char *>(bf), sizeof(BITMAPFILEHEADER));
        outFile.write(reinterpret_cast<char *>(bi), sizeof(BITMAPINFOHEADER));
        outFile.write(reinterpret_cast<char *>(imageData), imageSize);

        outFile.close(); 
```

基本上正在发生的事情是数据正在正确写入 test.bmp，但 test.bmp 在标准图像查看器中仍然无法打开。当我在十六进制编辑器中查看 test.bmp 时，似乎一切正常。我知道 imageData 工作正常，因为当我将灯光调到最大时，imageData 只是一堆 FF（又名白色），当我关灯时，imageData 的每个像素都是 00、01 或 02。​​（又名黑色或接近黑色）。因此文件的 imageData 部分正在正确写入。我可以使用他们提供的软件来查看相机的图像，因此我知道相机工作正常（这也是我用来确保光线足够亮以成为白屏并且足够暗以用于黑屏的方法）。但是，文件头或信息头（或两者）一定有问题，

这是文件头和信息头的十六进制数据：

```
42 4D 36 62 5C 00 CD CD CD CD 36 00 00 00 28 00 00 00 C0 
0D 0A 00 00 98 08 00 00 01 00 18 00 00 00 00 00 00 62 5C 
00 13 0B 00 00 13 0B 00 00 00 00 00 00 00 00 00 00 
```

每次运行时的 imageSize、imageWidth 和 imageHeight 都是相同的（分别为 6054400、2752、2200），获取它们的函数来自相机的 API。这些工作正常并且简单地返回整数（至少从我在汽车中看到的）。

其他信息：我正在使用 Visual Studio 2010。

TL;DR：我的文件头和/或信息头有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:28:17.477

您可能缺少 File 标头中的两个保留字段。

文件头：4字节BMP文件的大小，以字节为单位，2字节保留；实际值取决于创建图像的应用程序 保留 2 个字节；实际值取决于创建图像的应用程序 4 字节偏移量，即起始地址，位图图像数据（像素阵列）可以找到的字节。