# StackOverflow 问答 15126000-15126999

# c# - 使用 LLBLGEN 的左外连接

> ID：15126000
> 
> 赞同：1
> 
> 时间：2013-02-28T01:42:38.760
> 
> 标签：c#, asp.net, llblgenpro

我如何在下表中执行左外连接

```
Product table
- productId (pk)
- productTitle
- pDescription

Product Status
- statusId (pk)
- productId (fk)
- comment 
```

我需要选择产品表中的所有内容

```
DataAccessAdapter daa = clsMethods.GetNewAdapter();
IPrefetchPath2 pp = new PrefetchPath2(SDL.EntityType.ProductEntity);
pp.Add(ProductEntity.PrefetchPathProductStatus);

RelationPredicateBucket bucketbucket = new RelationPredicateBucket();
bucketbucket.Relations.Add(ProductEntity.Relations.ProductStatusEntityUsingProductId, JoinHint.Left) 
```

上面的代码只返回产品id记录在产品状态id中的产品。我如何执行从产品表中选择所有内容的左外连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:20:11.077

为什么不选择从 ProductEntity 开始？获取产品实体并预取 ProductStatusEntity？

# javascript - 在 D3.js 中专门将数据转换为颜色

> ID：15126004
> 
> 赞同：1
> 
> 时间：2013-02-28T01:42:54.177
> 
> 标签：javascript, d3.js, rgb

我刚开始使用 D3.js，我正在阅读以下内容： http: [//alignedleft.com/tutorials/d3](http://alignedleft.com/tutorials/d3)

在创建条形图的部分，作者给出了一个非常简单的例子，使用循环中的当前数据来指定矩形填充颜色的 RGB 值。这非常有用。但是比较有限。

比如说，我有一个特定类型的图表，它显示了数据的各种优先级。因此，值越高，优先级越高。优先级将用红色、橙色、黄色和绿色分别表示高、中、低、无。

在方法中使用 switch case 或 if/else 相当简单`.attr('fill', function(d){})`，如下所示：

```
.attr('fill', function(d) {
  if (percentage(d) <= 0.25) { // 0.25 is a percentage value representing the data
    return 'green';
  }
  else if (percentage(d) <= 0.50) {
    return 'yellow';
  }
  else if (percentage(d) <= 0.75) {
    return 'orange';
  }
  else if (percentage(d) <= 1) {
    return 'red';
  }
}); 
```

但是如果我想根据数据的强度动态地改变颜色本身的强度/阴影呢？因此，它不仅具有基本颜色值，而且在转换为下一种颜色之前，通过根据数据强度使颜色具有不同的阴影（或饱和度），从而可视化该颜色范围内的数据强度。

我假设的一种方法是将每个百分比的两种策略结合起来，但这意味着我必须有 25 个 if 语句嵌套在我已经拥有的每个 1% 数据表示的 5 个 if 语句中。有没有更好、更有效的方法呢？

我知道我可以将每种颜色的阴影数量限制为较小的数量 - 但我想看看除了嵌套​​条件之外是否还有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:50:23.963

一种方法是使用[d3.hsl](https://github.com/mbostock/d3/wiki/Colors#wiki-d3_hsl)，根据 3 个参数构造颜色对象：色相、饱和度和色阶。

您可以使用类似于上面建议的 switch 语句来选择一个介于 0 到 360 之间的数字，对应于所需的**色调**（绿色、黄色、橙色、红色）。

**饱和度**很可能是一个常数，可能在 0.5 到 1 之间。您需要对其进行试验并选择您喜欢的饱和度。

**级别**将是一个介于 0 和 1 之间的数字，但不能太接近 0，因为那样会产生黑色。这个数字对应于你所代表的**强度。**越强烈，数字越高——因此越亮。您可以使用 a`d3.scale.linear()`将数据值转换为 0 到 1 范围内。

一旦你构造了 hsl 颜色对象，你`.rgb()`就调用它，这就是你设置为你的 svg 形状的填充属性。

# c++ - 清理堆分配对象的良好做法或约定？

> ID：15126006
> 
> 赞同：4
> 
> 时间：2013-02-28T01:43:21.067
> 
> 标签：c++, heap-memory

我正在学习 C++。我有 C、C#、ObjC 背景。相当高级的语言。

在 C# 或 ObjC 上，作为函数或方法的结果，返回堆分配的对象是微不足道的。因为对象的清理是管理的（按照惯例）。它会在适当的时候被销毁。

但我不知道我应该如何在 C++ 中处理这个问题。

例如，

```
std::string* makeString()
{
    std::string* str = GetSomeStringFromArbitrarySource ();
    SaveSomewhereElseInternally (str);
    return str;
}
void useString ()
{
    std::string* str = makeString ();

    // Where and how should I cleanup the `str` object?
    // It is not safe `delete str` here because it may be used on another place.
} 
```

当通过许多函数传递时，清理堆分配对象的推荐和常规方法是什么？

我查看了几个智能指针，但它们看起来并没有真正*降低*复杂性或需要关心的事情。我误解了智能指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:49:51.423

> 我查看了几个智能指针，但它们看起来并没有真正降低复杂性或需要关心的事情。我误解了智能指针吗？

很可能，是的。在 C++ 中，由于您必须自己处理（没有 GC 会为您清理），因此您需要一种方法来跟踪每个对象的使用情况。

您可以手动将 every`new`与 a匹配`delete`，但这有时很困难或不可能，例如在上面的场景中。无法知道该对象是否正在其他地方使用。

智能指针通过为您管理生命周期来解决此问题，因此您无需删除。他们使用各种机制来跟踪对象正在使用的位置，并`delete`在最后一个完成时调用。

*话虽如此，在这种特定情况下*根本没有太多理由使用指针。如果您正在使用`std::string`，则可以按值传递字符串，这永远不会成为问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:01:21.910

您误解智能指针的原因很可能与您编写的原因相同：

```
std::string* makeString() 
```

而不是大多数 C++ 程序员会写的：

```
std::string makeString() 
```

您需要更好地理解[C++ 中的对象生命周期](http://msdn.microsoft.com/en-us/library/hh438473.aspx)，然后智能指针概念会容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T01:50:22.517

您需要确定对象所需的生命周期，然后使用类型系统来强制执行该生命周期。

从您的示例中，当您想要销毁对象时根本不清楚。

在 C++ 中，对象通过值传递是很常见的（因为原始类型在 Java/C#/etc 中），所以除非你需要`std::string`在不同的代码之间共享，通常的事情就是返回按值（写`makeString`为`std::string makeString()`）的字符串。

如果确实需要多个位置引用同一个对象，则应仔细考虑设计，并确定程序的哪个部分可以安全地控制对象的生命周期。在那个地方按值创建对象，然后在别处传递指针和引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T02:00:29.847

您可能误解了智能指针。在 C++ 中，另一种选择是程序员需要跟踪动态分配对象的生命周期和使用情况。这会影响软件的设计，还会导致人为错误的蔓延。当您使用智能指针时，对象的生命周期几乎会为您处理好。

我是在 C++ 的经典风格（没有智能指针）中长大的，所以如果需要，我可以这样编程，但是如果你是从 C++ 开始的，那么智能指针确实是必须的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T01:51:08.843

如果您可以使用 C++11，请使用[共享指针](http://www.cplusplus.com/reference/memory/shared_ptr/)。这些指针实现了一种机制，一旦它们中的最后一个被销毁，就删除分配的对象。如果您使用的是 C++03，请使用 boost 的 [共享指针](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)。如果您不能使用任何一个，请尝试将堆分配包装在您在堆栈上分配的类中，然后将引用传递给周围的那些，同时阅读[RAII wiki](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。

# javascript - 将 javascript 数组传递给 servlet 问题

> ID：15126012
> 
> 赞同：0
> 
> 时间：2013-02-28T01:43:58.517
> 
> 标签：javascript, servlets, jquery-post

早上好，我正在使用从 JSP 向 servlet 发送一个 java-script 数组，`jQuery.post()`但这里的问题是它`java.lang.NullPointerException at servlets.DeleteServlet.doPost(DeleteServlet.java:45)`在执行操作时抛出了一个将数组发送到 servlet 的 java-script 方法：

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script> 
```

```
 var myIdsArray = new Array;

function getCarId(tableID) { // these methods fills the array with values
    try {

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        for ( var i = 0; i < rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if (null != chkbox && true == chkbox.checked) {
                if (rowCount <= 2) {
                    alert("Cannot delete all the rows.");
                    break;
                }
                myIdsArray.push(table.rows[i].cells[1].innerHTML);
            }

        }
        sendArrayToServer();

    } catch (e) {
        alert(e);
    }
}
        function sendArrayToServer() {
    alert("Called");
    $.post('DeleteServlet', {
        arrayData : myIdsArray,
        mode : "insert"
    }); 
```

这是我的servlet：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String[] arrayData=request.getParameterValues("arrayData");
    PrintWriter out=response.getWriter();
    for (String string : arrayData) { // line 45
        out.println(string);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:42:29.057

`request.getParameterValues("arrayData")` 将返回一个名为“arrayData”的所有 HTTP 请求参数的字符串数组。参数可以在查询字符串中，也可以在 HTTP POST 正文中。

然而，

```
$.post('DeleteServlet', {
        arrayData : myIdsArray,
        mode : "insert"
}); 
```

不使用此名称创建任何参数。这就是你在第 45 行得到一个空指针的原因。

在这种情况下，发送到服务器的是 JSON 字符串。你需要做的是在服务器上解析这个字符串。这将意味着 (1) 从 POST 正文中获取字符串。(2) 解析它。您可能想要使用第 3 方 JSON 解析器。json-simple 是一个不错的选择。

或者，如果您希望保持服务器代码不变，您可以更改客户端代码以创建这些请求参数。可能最简单的方法是将它们放在查询字符串中。

# batch-file - 为什么在批处理脚本中不能正确解释带空格的多个参数？

> ID：15126020
> 
> 赞同：1
> 
> 时间：2013-02-28T01:45:44.740
> 
> 标签：batch-file, cmd

我正在运行一个带有多个参数的 exe，这些参数可能包含也可能不包含空格。我用引号将它们括起来，但它们以某种方式没有正确传递给 exe。

这是我正在使用的命令：

```
makeblastdb -in "D:\d b\sequence.fasta" -input_type fasta -dbtype prot -title xd -out "D:\d b\xd" 
```

我认为 cmd 应该将 10 个参数传递给 exe，但不知何故它没有正确传递。

这是我得到的结果

```
BLAST options error: File "D:\d" does not exist. 
```

这基本上是说第二个论点由于某种原因被砍掉了？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:50:58.733

根据您对问题的评论，BLAST 实用程序无法正确处理带空格的引用路径，并且您的卷不支持短文件名。

显然，您可以将工作目录移动到不包含空格的路径。

另一种方法是使用 SUBST 临时创建一个指向有问题的路径的虚拟驱动器。

```
subst K: "d:\d b"
makeblastdb -in "K:\sequence.fasta" -input_type fasta -dbtype prot -title xd -out "K:\xd"
subst /d K: 
```

键入`subst /?`命令的帮助。

***根据您在 python 中运行命令的事实进行更新***

在您对此答案的评论中，您声明您将尝试让命令在 python 中工作。这可能是您问题的全部根源。

您应该尝试直接从 Windows 命令提示符（cmd.exe 控制台）运行问题中的命令。

如果命令在命令提示符下不起作用，那么问题确实出在 BLAST 实用程序上，而 SUBST 是一个很好的解决方案。

如果该命令在命令提示符下确实有效，那么问题在于您如何从 python 中输出命令，并且不应该需要 SUBST 命令。

我不是 python 用户，但我看到很多人在 Windows 上使用 python 时遇到类似的问题。也许这会有所帮助：[如何从 python 执行程序？os.system 由于路径中的空格而失败](https://stackoverflow.com/q/204017/1012053)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T19:21:41.460

makeblastdb 有一个奇怪的转义约定。试试这个：

```
-in \""D:\d b\sequence.fasta"\" 
```

不幸的是，这对 -out 不起作用，所以 dbenham 的答案可能是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:56:00.320

另一种方法是您可以尝试使用“ `D:\d b`”的目录短名称，您可以通过`dir /X`在 D 驱动器上运行命令来找到它。例如，如果我在我的 C 驱动器上运行 dir /X 这是我得到的：

```
01/21/2013    09:47 AM    <DIR>      PROGRA~1     Program Files 
```

所以你想用`C:\Program Files`你也可以用`C:\PROGRA~1`.

# c# - WCF 中的线程和依赖属性（调用线程无法访问此对象，因为不同的线程拥有它异常）

> ID：15126021
> 
> 赞同：0
> 
> 时间：2013-02-28T01:45:46.063
> 
> 标签：c#, multithreading, wcf

任何帮助将不胜感激。

我们有一个 WCF 服务（托管在 IIS 中）正在调用一个方法，并且在这个方法内部有一个对依赖属性的 getter 的调用（这个 getter 是收集在单个对象中的几个依赖属性的一部分并用于所有种转换）。

我们有时会看到 WCF 服务端发生崩溃，但并不一致，并带有以下异常消息：

“**调用线程无法访问此对象，因为不同的线程拥有它**”。

我做了一些搜索，发现了一个[类似的问题](https://stackoverflow.com/questions/5267943/the-calling-thread-cannot-access-this-object-because-a-different-thread-owns-it)。

从阅读中我了解到有一种情况是在不同的线程上调用 getter，这就是为什么我们一直没有看到这个异常的原因。

但是，我仍然对解决方案感到困惑。WCF 服务是否有一个调度程序，我可以在其上激活 CheckAccess() 然后调用 Dispatcher.Invoke() 方法（如在 WPF 应用程序中）？

有人可以建议吗？

谢谢，

埃拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:19.297

您可以做的是在继承自[DispatcherObject](http://msdn.microsoft.com/en-ca/library/system.windows.threading.dispatcherobject.dispatcher.aspx)的“主”线程中创建一个类。这将使您能够访问 WCF 中的 Dispatcher 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:35:16.750

所有 DependencyObject 都具有线程关联性。它们只能由实例化它的线程访问。调用 DependencyObject.CheckAccess() 以确定是否在正确的线程上。这是一个例子。即使代码使用了 Button，但 Button 仍然是 DependencyObject。

```
private void TryToUpdateButtonCheckAccess(object uiObject)
{
    Button theButton = uiObject as Button;

    if (theButton != null)
    {
        // Checking if this thread has access to the object
        if(theButton.CheckAccess())
        {
            // This thread has access so it can update the UI thread
            UpdateButtonUI(theButton);
        }
        else
        {
            // This thread does not have access to the UI thread
            // Pushing update method on the Dispatcher of the UI thread
            theButton.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
                new UpdateUIDelegate(UpdateButtonUI), theButton);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:29:18.020

由于您的问题与跨多个线程访问依赖项属性有关，因此您可以在 WCF 服务中使用 STA 线程模型。

本文介绍了该方法

[http://www.netfxharmonics.com/2009/07/Accessing-WPF-Generated-Images-Via-WCF](http://www.netfxharmonics.com/2009/07/Accessing-WPF-Generated-Images-Via-WCF)

相关部分在文章末尾附近。听起来他正在描述您的确切问题。

# java - 崇高文本中 system.out.println 的快捷方式 2

> ID：15126025
> 
> 赞同：10
> 
> 时间：2013-02-28T01:46:19.700
> 
> 标签：java, autocomplete, sublimetext2

我想在 sublime text 2 中有快捷命令。

我想简单地键入`sopl`并按下`tab`以生成所选`System.out.println('text');`单词`'text'`并准备好替换它。

我想简单地键入`sop`并按下`tab`以生成所选`System.out.print('text');`单词`'text'`并准备好替换它。

我已经安装了 SublimeJava 插件，但显然没有这样的捷径

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-28T02:18:27.537

您正在寻找`pl<tab>`和。它没有放置，但确实将光标放在正确的位置以进行键入。另请注意，与 Eclipse 或 IntelliJ 一样，当您展开 Snippet 时，将继续移动您通过 Snippet 中的位置，直到您填满所有空白。`System.out.println(|);``p<tab>``System.out.print(|);``'text'``Tab`

这些被称为“片段”，您可以在`Tools -> Snippets...`. 您可以使用`Tools -> New Snippet...`.

# php - Facebook api('/me','GET') 即使在注销后也会返回用户数据

> ID：15126034
> 
> 赞同：0
> 
> 时间：2013-02-28T01:47:27.910
> 
> 标签：php, facebook, facebook-graph-api, sdk, facebook-php-sdk

在我当前的项目中，我`api('/me','GET')`用于检索当前登录用户的用户数据。我的项目有一个与 Facebook 用户同步的选项，我也可以停用同步，问题是即使我退出 Facebook 并更改 Facebook 用户并再次同步，它仍然返回以前的用户数据。

这是代码片段：

```
$user_profile = $facebook->api('/me','GET');

$fname = $user_profile["first_name"]; 
```

我`$fname`用于在同步后显示 Facebook 用户的名字，场景是：

*我的项目现在已同步到我的 Facebook 用户，然后我退出我的 Facebook 并重新同步我的项目。然而，它显示了我之前使用的用户的名字。

我似乎无法理解为什么它会保留以前用户的用户数据，它与新 Facebook 用户同步的唯一时间是我注销并重新登录我的网站项目时。顺便说一句，我正在使用 PHP SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:54:09.213

那可能是因为`access_token`仍然有效。令牌通常保存在 cookie 中，因此即使用户从 Facebook 注销，此 cookie 仍然可用并且令牌保持有效，因为它不与登录或退出 Facebook 的用户相关联，而是与您的应用程序相关联，直到它过期了。

因此，您可以手动删除 cookie，以便您的应用在用户注销后无法访问它。或者，您可以通过向“/me/permissions”发送`DELETE`请求来使访问令牌无效。

我不是 100% 确定，但是当使用 JS SDK 时这个过程是自动的。

# python - 尝试在 python 中打印 \ 时扫描字符串文字时 EOL

> ID：15126038
> 
> 赞同：1
> 
> 时间：2013-02-28T01:47:51.810
> 
> 标签：python, printing, eol

我正在尝试仅打印一个`\`using python ，它似乎`\`是某种保留字符或其他东西。代码`print "\"`返回`SyntaxError: EOL while scanning string literal`。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:49:44.827

反斜杠在 Python 中用于[转义序列](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)。做你想做的事情的正确方法是：

```
print "\\" # You need to escape the \ character 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:50:44.053

您不能以`\`字符结尾字符串，因为您可能会要求它转义`"`字符。你需要使用`"\\"`

# macos - 如何获得一个白色的半透明 NSView

> ID：15126043
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:22.973
> 
> 标签：macos, nsview, nscolor

我想要的结果是：

![在此处输入图像描述](../Images/c0eb624c385418e9ff855e9d3ec2375c.png)

我试图将那个“白色透明视图”的背景颜色设置为白色，alpha 约为 0.5f。但我得到的结果是：

![在此处输入图像描述](../Images/49f84c7aa138761b5b1a232f2c24a1fb.png)

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:48:03.617

经过几天的研究，我发现 Mac OS 的开发与 iOS 不同。那就是我无法通过使用半透明视图来实现这一点。我需要使用整个背景图像。我可以通过在我使用的图像上做我想要的！这对我来说确实有点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T05:55:39.763

```
import Cocoa

class TranslucentView: NSView {

    override func awakeFromNib() {
        self.wantsLayer = true
        self.layer?.backgroundColor = CGColorCreateGenericRGB(0, 0, 0, 0.1)

    }

} 
```

# .net - 如何在 IE 托管的 ActiveX 控件中保留状态信息？

> ID：15126044
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:23.313
> 
> 标签：.net, internet-explorer, activex

我有一个托管在 IE 中的 .NET ActiveX 控件，其界面必须符合不可更改的客户端规范。问题是我需要跨页面加载跟踪控件中的单个持久值（如果用户转到另一个页面并稍后返回。）

有什么方法可以保留这些信息，而不必与页面本身（我不能这样做）或网络服务器（如果有必要我可以这样做，但不希望这样做。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:29:36.190

它不太理想，但我能够通过写入/读取临时文件来完成这项工作。我通过从操作系统获取一个临时文件并将 a 序列化`Dictionary<string, object>`到其中来做到这一点。我需要坚持的一切我只是添加到字典中并保存了它。

# php - 回显到 div 而不是空白页

> ID：15126046
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:27.860
> 
> 标签：php, security, html, echo

我正在使用此代码在 PHP 中创建安全登录页面。我从[http://girlswhogeek.com/tutorials/2006/creating-a-secure-php-login-page](http://girlswhogeek.com/tutorials/2006/creating-a-secure-php-login-page)得到它。

```
<?php
   $username = "user";
   $password = "pass";
   $randomword = "bibblebobblechocolatemousse";

    if (isset($_COOKIE['MyLoginPage'])) {
        if ($_COOKIE['MyLoginPage'] == md5($password.$randomword)) {
?>
    CONTENT HERE
<?php
   exit;
        } else {
         echo "<p>Bad cookie. Clear please clear them out and try to login again.</p>";
         exit;
      }
   }

    if (isset($_GET['p']) && $_GET['p'] == "login") {
      if ($_POST['name'] != $username) {
         echo "<p>Sorry, that username does not match. Use your browser back button to go back and try again.</p>";
         exit;
      } else if ($_POST['pass'] != $password) {
         echo "<p>Sorry, that password does not match. Use your browser back button to go back and try again.</p>";
         exit;
      } else if ($_POST['name'] == $username && $_POST['pass'] == $password) {
         setcookie('MyLoginPage', md5($_POST['pass'].$randomword));
         header("Location: $_SERVER[PHP_SELF]");
      } else {
         echo "<p>Sorry, you could not be logged in at this time. Refresh the page and try again.</p>";
      }
   }
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>?p=login" method="post">
    <fieldset>
        <label>
            <input type="text" name="name" id="name" /> Name
        </label>
        <br />
        <label>
            <input type="password" name="pass" id="pass" /> Password
        </label>
        <br />
        <input type="submit" id="submit" value="Login" />
   </fieldset>
</form> 
```

它确实很好用，但是，当登录信息出现错误时，它会切换到空白页面并回显一条消息，指出登录信息错误。我想知道是否有办法让它与输入一起回显到页面上的 div。我尝试将相关的回显消息放在一个 div 中，但它没有用。我必须承认，我什至不知道为什么它会变成空白页。

另外，这是最好的方法还是有办法让它更安全？

感谢您提供的任何帮助。

本尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:56:48.623

有2个问题：

*   您的`exit`代码中的 停止执行页面，因此在“回显”您的消息后，页面停止
*   如果要在div中显示，将消息设置在变量中，并在div代码中显示

这是您的代码示例，经过了一些修改（您可能需要调整）：

```
<?php
$message = NULL;
if (isset($_COOKIE['MyLoginPage'])) {
    if ($_COOKIE['MyLoginPage'] == md5($password . $randomword)) {
        ?>
        CONTENT HERE
        <?php
        exit;
    } else {
        $message = "<p>Bad cookie. Clear please clear them out and try to login again.</p>";
    }
}

if (isset($_GET['p']) && $_GET['p'] == "login") {
    if ($_POST['name'] != $username) {
        $message = "<p>Sorry, that username does not match. Use your browser back button to go back and try again.</p>";
    } else if ($_POST['pass'] != $password) {
        $message = "<p>Sorry, that password does not match. Use your browser back button to go back and try again.</p>";
    } else if ($_POST['name'] == $username && $_POST['pass'] == $password) {
        setcookie('MyLoginPage', md5($_POST['pass'] . $randomword));
        header("Location: $_SERVER[PHP_SELF]");
    } else {
        $message = "<p>Sorry, you could not be logged in at this time. Refresh the page and try again.</p>";
    }
}
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>?p=login" method="post">
    <fieldset>
    <label><input type="text" name="name" id="name" /> Name</label>
        <br />
    <label><input type="password" name="pass" id="pass" /> Password</label>
        <br />
    <input type="submit" id="submit" value="Login" />
    </fieldset>
    <?php
    if (isset($message)) {
        echo "<div>" . $message . "</div>";
    }
    ?>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:59:00.593

您是否将*整个*内容（包括`<html>`标签）放在其中`CONTENT HERE`？

唯一应该去那里的是安全的内容，而不是整个页面。您的样板 html`<html><head><title>title</title></head><body> ... </body></html>`应该围绕您发布的整个代码块。仅在成功登录后显示的内容`CONTENT HERE`，因此不应在此处显示任何不安全的内容。

这是我很久以前写的一个[PHP page locker](http://www.digitalgemstones.com/code/tools/auth/authenticate.php)的替代实现，可能会让这个更清楚。</shameless plug>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:54:56.427

如果登录失败，您将回显登录结果，但不显示带有它的页面。如果您想在您的网站设计中显示登录失败页面，我建议您将它们发送回登录页面并显示错误消息。例如：

```
header("Location: http://website.com/loginpage.php?failed=1"); 
```

然后在登录页面的代码中：

```
if ($_GET['failed'] == '1') echo "Failed to login. Please try again."; 
```

这样，如果登录失败，它们将被发送回登录页面并显示错误消息。

# python - 在 Windows 上运行 Python 以获取 Node.js 依赖项

> ID：15126050
> 
> 赞同：250
> 
> 时间：2013-02-28T01:48:44.793
> 
> 标签：python, windows, node.js, npm

我正在进入一个 Node.js 代码库，它要求我通过 NPM 下载一些依赖项，即 jQuery。

在尝试运行`npm install jquery`时，我不断收到此错误：

```
Your environment has been set up for using Node.js 0.8.21 (x64) and NPM

C:\Users\Matt Cashatt>npm install jquery
npm http GET https://registry.npmjs.org/jquery
npm http 304 https://registry.npmjs.org/jquery
npm http GET https://registry.npmjs.org/jsdom
npm http GET https://registry.npmjs.org/xmlhttprequest
npm http GET https://registry.npmjs.org/htmlparser/1.7.6
npm http GET https://registry.npmjs.org/location/0.0.1
npm http GET https://registry.npmjs.org/navigator
npm http GET https://registry.npmjs.org/contextify
npm http 304 https://registry.npmjs.org/htmlparser/1.7.6
npm http 304 https://registry.npmjs.org/xmlhttprequest
npm http 304 https://registry.npmjs.org/location/0.0.1
npm http 304 https://registry.npmjs.org/navigator
npm http 304 https://registry.npmjs.org/jsdom
npm http 304 https://registry.npmjs.org/contextify
npm http GET https://registry.npmjs.org/bindings
npm http GET https://registry.npmjs.org/cssom
npm http GET https://registry.npmjs.org/cssstyle
npm http GET https://registry.npmjs.org/request
npm http 304 https://registry.npmjs.org/bindings

> contextify@0.1.4 install C:\Users\Matt Cashatt\node_modules\jquery\node_module
s\contextify
> node-gyp rebuild

C:\Users\Matt Cashatt\node_modules\jquery\node_modules\contextify>node "C:\Progr
am Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\b
in\node-gyp.js" rebuild
npm http 304 https://registry.npmjs.org/cssstyle
npm http 304 https://registry.npmjs.org/cssom
npm http 304 https://registry.npmjs.org/request
gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYT
HON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files\nodejs\node_modules\npm\nod
e_modules\node-gyp\lib\configure.js:113:14)
gyp ERR! stack     at C:\Program Files\nodejs\node_modules\npm\node_modules\node
-gyp\lib\configure.js:82:11
gyp ERR! stack     at Object.oncomplete (fs.js:297:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modu
les\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Users\Matt Cashatt\node_modules\jquery\node_modules\contextify
gyp ERR! node -v v0.8.21
gyp ERR! node-gyp -v v0.8.4
gyp ERR! not ok
npm ERR! error rolling back Error: ENOTEMPTY, rmdir 'C:\Users\Matt Cashatt\node_
modules\jquery\node_modules\jsdom\node_modules\request\tests'
npm ERR! error rolling back  jquery@1.8.3 { [Error: ENOTEMPTY, rmdir 'C:\Users\M
att Cashatt\node_modules\jquery\node_modules\jsdom\node_modules\request\tests']
npm ERR! error rolling back   errno: 53,
npm ERR! error rolling back   code: 'ENOTEMPTY',
npm ERR! error rolling back   path: 'C:\\Users\\Matt Cashatt\\node_modules\\jque
ry\\node_modules\\jsdom\\node_modules\\request\\tests' }
npm ERR! contextify@0.1.4 install: `node-gyp rebuild`
npm ERR! `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the contextify@0.1.4 install script.
npm ERR! This is most likely a problem with the contextify package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls contextify
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "jquery"
npm ERR! cwd C:\Users\Matt Cashatt
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! code ELIFECYCLE
npm ERR! Error: ENOENT, lstat 'C:\Users\Matt Cashatt\node_modules\jquery\node_mo
dules\jsdom\node_modules\request\tests\test-pipes.js'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "jquery"
npm ERR! cwd C:\Users\Matt Cashatt
npm ERR! node -v v0.8.21
npm ERR! npm -v 1.2.11
npm ERR! path C:\Users\Matt Cashatt\node_modules\jquery\node_modules\jsdom\node_
modules\request\tests\test-pipes.js
npm ERR! fstream_path C:\Users\Matt Cashatt\node_modules\jquery\node_modules\jsd
om\node_modules\request\tests\test-pipes.js
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! fstream_stack C:\Program Files\nodejs\node_modules\npm\node_modules\fst
ream\lib\writer.js:284:26
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\Matt Cashatt\npm-debug.log
npm ERR! not ok code 0

C:\Users\Matt Cashatt> 
```

看起来失败是由于缺少 Python 安装。好吧，我已经安装了 Python，设置了变量，然后重新启动，仍然是错误。

关于我缺少什么的任何线索？

* * *

## 回答 #1

> 赞同：504
> 
> 时间：2016-09-22T20:43:18.127

如果您没有安装 python 以及所有 node-gyp 依赖项，只需使用管理员权限打开 Powershell 或 Git Bash 并执行：

```
npm install --global --production windows-build-tools 
```

然后安装软件包：

```
npm install --global node-gyp 
```

安装后，您将下载所有 node-gyp 依赖项，但您仍然需要环境变量。验证 Python 确实在正确的文件夹中找到：

```
C:\Users\ben\.windows-build-tools\python27\python.exe 
```

*[注意 - 它使用 python 2.7 而不是 3.x，因为它不受支持*](https://github.com/nodejs/node-gyp)

如果它没有抱怨，请继续创建您的（用户）环境变量：

```
setx PYTHON "%USERPROFILE%\.windows-build-tools\python27\python.exe" 
```

重新启动 cmd，并验证变量是否存在，通过`set PYTHON`它应该返回变量（`$env:PYTHON`如果使用 Powershell）

最后重新申请`npm install <module>`

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2013-02-28T02:00:39.937

你的问题是你*没有*设置环境变量。

该错误清楚地说明了这一点：

```
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYTHON env variable. 
```

在您的评论中，您说您这样做了：

```
set PYTHONPATH=%PYTHONPATH%;C:\My_python_lib 
```

这很好，但这并没有设置`PYTHON`变量，它设置了`PYTHONPATH`变量。

* * *

同时，仅使用该`set`命令只会影响当前`cmd`会话。`cmd`如果您在那之后重新启动，正如您所说的那样，您最终会得到一个没有设置该变量的全新会话。

有几种方法可以永久设置环境变量——最简单的是在 XP 的系统控制面板中，这在 Vista 中当然不同，在 7 中再次不同，在 8 中再次不同，但你可以 google 为它。

或者，只需`set`在命令之前执行正确的操作`npm`，而无需在其间重新启动。

* * *

您可以通过执行配置脚本尝试执行的完全相同的操作来测试您是否做对了：在运行之前`npm`，尝试运行`%PYTHON%`。如果你做对了，你会得到一个 Python 解释器（你可以立即退出）。如果你得到一个错误，你没有做对。

* * *

这有两个问题：

```
set PYTHON=%PYTHON%;D:\Python 
```

首先，您设置`PYTHON`为`;D:\Python`. 额外的分号适用于以分号分隔的路径列表，例如`PATH`or `PYTHONPATH`，但不适用于单个值，例如`PYTHON`. 同样，当您想向路径列表添加另一个路径时，向现有值添加一个新值是您想要的，而不是单个值。所以，你只想要`set PYTHON=D:\Python`.

其次，`D:\Python`不是您的 Python 解释器的路径。类似于`D:\Python\Python.exe`, 或`D:\Python\bin\Python.exe`. 找到正确的路径，确保它可以自己运行（例如，键入`D:\Python\bin\Python.exe`并确保您获得了 Python 解释器），然后设置变量并使用它。

* * *

所以：

```
set PYTHON=D:\Python\bin\Python.exe 
```

或者，如果您想使其永久化，请在控制面板中执行等效操作。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-12-06T13:02:07.187

对我来说，在安装 windows-build-tools 后使用以下评论

```
npm --add-python-to-path='true' --debug install --global windows-build-tools 
```

运行下面的代码

```
npm config set python "%USERPROFILE%\.windows-build-tools\python27\python.exe" 
```

已经奏效了。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-02-28T02:52:42.303

这是一个为我解决了很多这些问题的指南。

[http://www.steveworkman.com/node-js/2012/installing-jsdom-on-windows/](http://www.steveworkman.com/node-js/2012/installing-jsdom-on-windows/)

我记得特别重要的是 python 版本。确保安装 2.7.3 而不是 3。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-09-05T13:19:22.850

其中一个和/或多个应该有助于：

1.  添加`C:\Python27\`到您的`PATH`变量（考虑到您在此目录中安装了 Python）
    如何设置环境`PATH`变量：[http](http://www.computerhope.com/issues/ch000549.htm)
    ://www.computerhope.com/issues/ch000549.htm 设置变量后重新启动控制台和/或 Windows。

2.  在与上面相同的部分（“环境变量”）中，添加具有名称`PYTHON`和值`C:\Python27\python.exe`
    的新变量 设置变量后重新启动控制台和/或 Windows。

3.  *在管理员模式下*打开 Windows 命令行 ( `cmd`) 。 将目录更改为您的 Python 安装路径： 使某些安装需要符号链接： *`cd C:\Python27`
    `mklink python2.7.exe python.exe`*

 *请注意，**您应该使用 Python 2.x 而不是 3.x**来运行`node-gyp`基于安装的！

下面的文字是关于 Unix 的，但 Windows 版本也需要 Python 2.x：

```
You can install with npm:

$ npm install -g node-gyp
You will also need to install:

On Unix:
python (v2.7 recommended, v3.x.x is not supported)
make
A proper C/C++ compiler toolchain, like GCC 
```

这篇文章也可能有帮助：[https ://github.com/nodejs/node-gyp#installation](https://github.com/nodejs/node-gyp#installation)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-07-07T13:30:34.447

我有同样的问题，这些答案都没有帮助。在我的情况下，PYTHON 变量设置正确。然而python安装得太深，即路径太长。所以，我做了以下事情：

1.  将 python 重新安装到 c:\python
2.  将环境变量 PYTHON 设置为 C:\python\python.exe

就是这样！

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-10-10T14:39:43.037

这有帮助：[https ://www.npmjs.com/package/node-gyp](https://www.npmjs.com/package/node-gyp)

我按照以下步骤操作：

```
npm install -g node-gyp 
```

然后：

```
npm install --global --production windows-build-tools 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-02-11T07:32:41.710

有一些解决方案可以解决这个问题：1）以“管理员”身份运行命令提示符。

如果第一个解决方案不能解决您的问题，请尝试以下解决方案：

2）以管理员身份打开命令提示符，粘贴以下代码行并回车：

```
npm install --global --production windows-build-tools 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-07-08T08:44:20.443

我在尝试[安装 node-sass@4.9.4](https://www.npmjs.com/package/node-sass)时遇到了同样的挑战。

在查看了当前的官方文档并阅读了上面的答案之后，我注意到您可能不必安装 node-gyp 或安装 windows-build 工具。这就是它所说的，这里[是关于在 windows 上安装 node-gyp](https://github.com/nodejs/node-gyp#on-windows)。记住 node-gyp 参与了 node-sass 的安装过程。而且您实际上不必重新安装另一个 python 版本。

这是救星，配置“npm”在安装任何需要构建工具的包时应该查找的 python 路径。

```
C:\> npm config set python /Python36/python 
```

我已经在 windows-7 上安装了 python3.6.3。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2019-10-23T16:24:42.677

这是让 NPM 为您做所有事情的最简单方法

```
npm --add-python-to-path='true' --debug install --global windows-build-tools 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-02-09T05:36:27.967

以下内容以管理员身份从命令行为我工作：

安装 windows-build-tools（这可能需要 15-20 分钟）：

```
 npm --add-python-to-path='true' --debug install --global windows-build-tools 
```

添加/更新环境变量：

```
setx PYTHON "%USERPROFILE%\.windows-build-tools\python27\python.exe" 
```

安装节点gyp：

```
npm install --global node-gyp 
```

将 exe 文件的名称从 Python 更改为 Python2.7。

```
C:\Users\username\.windows-build-tools\python27\Python2.7 
```

`npm install module_name --save`

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-09-01T11:08:46.183

**TL;DR 使用名称 python2.7.exe 复制您的 python.exe 或别名**

我的 python 2.7 安装为

```
D:\app\Python27\python.exe
```

无论我如何设置（和验证）PYTHON env 变量，我总是得到这个错误：

```
吉普错误！堆栈错误：找不到 Python 可执行文件“python2.7”，您可以设置 PYTHON 环境变量。
吉普错误！堆栈在 failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:103:14)

```

原因是在 node-gyp 的 configure.js 中，python 可执行文件被解析为：

`var python = gyp.opts.python || process.env.PYTHON || 'python'`

事实证明，gyp.opts.python 的值为“python2.7”，因此覆盖了 process.env.PYTHON。

我通过创建一个名为 node-gyp 的 python.exe 可执行文件的别名来解决这个问题：

`D:\app\Python27>mklink python2.7.exe python.exe`

您需要管理员权限才能执行此操作。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-03-10T01:57:14.640

我不禁要提到这一点。如果您使用的是 Python3 并且使用 node-gyp 失败，那么我很遗憾地告诉您 node-gyp 目前不支持 python3。

这是一个链接： [https ://github.com/nodejs/node-gyp/issues/1268](https://github.com/nodejs/node-gyp/issues/1268) [https://github.com/nodejs/node-gyp/issues/193](https://github.com/nodejs/node-gyp/issues/193)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-03-16T02:55:14.503

[正确的方法是 1) 从这里](https://www.python.org/downloads/)下载并安装 python 2.7.14 。[2）从这里](https://www.pythoncentral.io/add-python-to-path-python-is-not-recognized-as-an-internal-or-external-command/)为python设置环境变量。

完毕！

注意：请相应地设置环境变量。我在这里回答了windows。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-01-22T15:13:22.743

对我来说，这些步骤解决了这个问题：

1-以管理员身份运行此 cmd：

`npm install --global --production windows-build-tools`

2-然后`npm rebuild`在第一步完成后运行***（特别是完成python 2.7安装，这是问题的主要原因）***

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-10-15T14:59:58.283

为什么不在[这里](https://www.python.org/downloads/release/python-2714/)下载 python 安装程序？当您检查路径安装时，它会为您工作

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-08-24T16:12:44.343

如果您尝试在 Cygwin 上使用它，那么您需要按照[此](https://stackoverflow.com/a/39128152/6704455)答案中的说明进行操作。（Cygwin 如何处理 Windows 符号链接是一个问题。）

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-08-16T15:16:52.480

> 吉普错误！配置错误gyp ERR！堆栈错误：找不到 Python 可执行文件“python”，您可以设置 PYT HON 环境变量。

不需要重新安装，这个异常由 node-gyp 脚本抛出，然后尝试重建。这是足够的设置环境变量，就像我所做的那样：

```
SET PYTHON=C:\work\_env\Python27\python.exe 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-06-16T10:11:53.043

我尝试了上述所有步骤，没有一个对我有用。我试图在 Windows 10 系统上通过 yarn 安装 argon2 npm 包。

所以这就是最终奏效的方法

1.  我 `npm --add-python-to-path='true' --debug install --global windows-build-tools`在命令终端中以管理员身份运行 python 安装，上面的命令遇到了一个无限循环，您可以使用 Ctrl + C 终止该循环。
2.  我通过运行这个设置环境变量 `setx PYTHON "%USERPROFILE%\.windows-build-tools\python27\python.exe"`
3.  我通过运行此命令全局安装了 node-gyp
    `npm install --global node-gyp`
4.  我下载了 VS 2019 社区版安装程序，在安装时我添加了使用 C++ 的桌面开发，如图所示 [![在此处输入图像描述](../Images/b58df593d8aae67ee3e5c707b22197c7.png)](https://i.stack.imgur.com/8IMT6.png)
5.  我再次运行了 yarn 命令。例如`yarn add argon2`

我希望这些步骤对您有所帮助。我花了几个小时才找到这个解决方案

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-05-27T00:43:45.400

这是正确的命令： set path=%path%;C:\Python34 [替换为您的 python 安装的正确路径]

我有同样的问题，我只是这样解决了这个问题。

正如其他一些人指出的那样，这是可变配置，它仅适用于当前的 cmd 会话，并且（显然）您必须在运行 npm install 之前设置路径。

我希望这有帮助。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-11-12T13:17:55.253

示例：pg_config 不可执行 / 错误 node-gyp

解决方案：在 Windows 上尝试添加 PATH Env -> C:\Program Files\PostgreSQL\12\bin

为我工作，现在我可以使用 npm i pg-promise 或其他依赖项。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-08T13:41:05.370

对我来说，问题是我使用的是 node 的最新版本，而不是`LTS`稳定版本并推荐给大多数用户的版本。
使用`LTS`版本解决了这个问题。
您可以从这里下载：

[LTS 版本](https://nodejs.org/en/download/)

[当前最新版本](https://nodejs.org/en/download/current/)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-05-16T19:58:47.947

在下载 Akveo ngx-admin 模板后尝试执行“npm install”时，我遇到了同样的错误。

这是一种奇怪的情况，因为我只是在另一台笔记本电脑上启动了相同的模板。我意识到我安装了另一个版本的 npm。

[![在此处输入图像描述](../Images/b8d119514e4e843256a0d01c3ece3b22.png)](https://i.stack.imgur.com/MrJCc.png)

如您所见，我的节点版本是“14.17.0”，第一步我的 npm 版本是“7.13.0”。然后我意识到我另一台笔记本电脑的npm版本是“6.14.11”，所以我决定通过执行“npm install -g npm@6.14.11”来降级npm版本。

然后“npm install”工作得很好。

注意：无需安装 windows-build-tools 或任何 python 版本。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-10-25T20:20:32.680

什么对我有用：

*   去[这里](https://www.python.org/downloads/)安装需要的python版本
*   使用 cmd 运行以下命令`npm config set python C:\Users\jorge\AppData\Local\Programs\Python\Python310\python.exe`

*更改目录的路径*

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-07-23T07:46:39.693

设置如下路径，它将起作用

```
> set PYTHON=D:\\ranjith\\installed\\python-3.6.4\\python.exe

> npm config set python D:\\ranjith\\installed\\python-3.6.4\\python.exe 
```

然后构建你的项目（对我来说）

```
> yarn build 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2021-07-20T22:25:48.120

我的问题的答案很简单。

在 Python 安装期间，我打开了一个 Windows 命令窗口。

安装 Python 后，我尝试从该窗口启动 Python。

对我来说解决方案很简单。

当我关闭命令窗口并打开一个新的命令窗口时，问题就消失了。

我必须打开一个新的命令窗口，以便路径环境变量包含 Python 的路径。*

# php - 带有无线电组的多个插入

> ID：15126051
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:47.440
> 
> 标签：php, mysql

我有一个包含三个部分的表格；级别 1、级别 2 和级别 3。每个部分都包含四个文本区域和一个单选组，每个文本区域旁边都有单选按钮：

```
 <form action="" method="post" name="form" id="form" onSubmit="return validate();">
    <table width="123%" border="0" cellpadding="5">
      <th colspan="6">
        <div align="center"><strong>Level 1</strong></div>      </th>
      <tr>
        <td valign="top"><strong>Pathway</strong></td>
        <td colspan="2"><strong>Blocking or Accepting Comment</strong></td>
        <td valign="top"><strong>Appropriate</strong></td>
      </tr>
      <tr>
        <td width="26%" valign="top"><strong>Pathway 1:</strong> No action - See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l1_p1_comment" id="l1_p1_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td width="18%" valign="top"><p>
            <input type="radio" name="l1_allowed" value="1" id="l1_allowed_0" />
        </td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 2:</strong> See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l1_p2_comment" id="l1_p2_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l1_allowed" value="1" id="l1_allowed_1" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 3:</strong> Refer to ED</td>
        <td colspan="2"><div class="required">
            <textarea name="l1_p3_comment" id="l1_p3_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l1_allowed" value="1" id="l1_allowed_2" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 4:</strong> Refer to Specialist</td>
        <td colspan="2"><div class="required">
            <textarea name="l1_p4_comment" id="l1_p4_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l1_allowed" value="1" id="l1_allowed_3" /></td>
      </tr>
      <tr>
        <td valign="top">&nbsp;</td>
        <td colspan="2">&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
    <th colspan="6">
        <div align="center"><strong>Level 2</strong></div>      </th>
      <tr>
        <td valign="top"><strong>Pathway</strong></td>
        <td colspan="2"><strong>Blocking or Accepting Comment</strong></td>
        <td valign="top"><strong>Appropriate</strong></td>
      </tr>
      <tr>
        <td width="26%" valign="top"><strong>Pathway 1:</strong> No action - See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l2_p1_comment" id="l2_p1_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td width="18%" valign="top"><p>
            <input type="radio" name="l2_allowed" value="1" id="l2_allowed_0" />
        </td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 2:</strong> See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l2_p2_comment" id="l2_p2_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l2_allowed" value="1" id="l2_allowed_1" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 3:</strong> Refer to ED</td>
        <td colspan="2"><div class="required">
            <textarea name="l2_p3_comment" id="l2_p3_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l2_allowed" value="1" id="l2_allowed_2" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 4:</strong> Refer to Specialist</td>
        <td colspan="2"><div class="required">
            <textarea name="l2_p4_comment" id="l2_p4_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l2_allowed" value="1" id="l2_allowed_3" /></td>
      </tr>
      <tr>
        <td valign="top">&nbsp;</td>
        <td colspan="2">&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
          <th colspan="6">
        <div align="center"><strong>Level 3</strong></div>      </th>
      <tr>
        <td valign="top"><strong>Pathway</strong></td>
        <td colspan="2"><strong>Blocking or Accepting Comment</strong></td>
        <td valign="top"><strong>Appropriate</strong></td>
      </tr>
      <tr>
        <td width="26%" valign="top"><strong>Pathway 1:</strong> No action - See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l3_p1_comment" id="l3_p1_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td width="18%" valign="top"><p>
            <input type="radio" name="l3_allowed" value="1" id="l3_allowed_0" />
        </td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 2:</strong> See again</td>
        <td colspan="2"><div class="required">
            <textarea name="l3_p2_comment" id="l3_p2_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l3_allowed" value="1" id="l3_allowed_1" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 3:</strong> Refer to ED</td>
        <td colspan="2"><div class="required">
            <textarea name="l3_p3_comment" id="l3_p3_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l3_allowed" value="1" id="l3_allowed_2" /></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 4:</strong> Refer to Specialist</td>
        <td colspan="2"><div class="required">
            <textarea name="l3_p4_comment" id="l3_p4_comment" cols="35" rows="5"></textarea>
          </div></td>
        <td valign="top"><input type="radio" name="l3_allowed" value="1" id="l3_allowed_3" /></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td colspan="2"><input type="submit" name="submit" id="submit" value="Create Pathways for All Levels" /></td>
        <td>&nbsp;</td>
      </tr>
    </table>
  </form> 
```

提交时，有多个插入：

```
$l1_p1_comment = $_POST['l1_p1_comment'];
$l1_p2_comment = $_POST['l1_p2_comment'];
$l1_p3_comment = $_POST['l1_p3_comment'];
$l1_p4_comment = $_POST['l1_p4_comment'];

$l2_p1_comment = $_POST['l2_p1_comment'];
$l2_p2_comment = $_POST['l2_p2_comment'];
$l2_p3_comment = $_POST['l2_p3_comment'];
$l2_p4_comment = $_POST['l2_p4_comment'];

$l3_p1_comment = $_POST['l3_p1_comment'];
$l3_p2_comment = $_POST['l3_p2_comment'];
$l3_p3_comment = $_POST['l3_p3_comment'];
$l3_p4_comment = $_POST['l3_p4_comment'];

$l1_allowed = $_POST['l1_allowed'];
$l2_allowed = $_POST['l2_allowed'];
$l3_allowed = $_POST['l3_allowed'];

if(isset($_POST['submit'])){ 

$query = 
"INSERT INTO pathway 
(pathway_pk, case_fk, level, pathway_allowed, comment, created, created_by) 
VALUES 
('', '$case_fk', '1', '$l1_allowed', '$l1_p1_comment', NOW(), '$author_pk'), 
('', '$case_fk', '1', '$l1_allowed', '$l1_p2_comment', NOW(), '$author_pk'),
('', '$case_fk', '1', '$l1_allowed', '$l1_p3_comment', NOW(), '$author_pk'), 
('', '$case_fk', '1', '$l1_allowed', '$l1_p4_comment', NOW(), '$author_pk'),
('', '$case_fk', '2', '$l2_allowed', '$l2_p1_comment', NOW(), '$author_pk'), 
('', '$case_fk', '2', '$l2_allowed', '$l2_p2_comment', NOW(), '$author_pk'),
('', '$case_fk', '2', '$l2_allowed', '$l2_p3_comment', NOW(), '$author_pk'), 
('', '$case_fk', '2', '$l2_allowed', '$l2_p4_comment', NOW(), '$author_pk'),
('', '$case_fk', '3', '$l3_allowed', '$l3_p1_comment', NOW(), '$author_pk'), 
('', '$case_fk', '3', '$l3_allowed', '$l3_p2_comment', NOW(), '$author_pk'),
('', '$case_fk', '3', '$l3_allowed', '$l3_p3_comment', NOW(), '$author_pk'), 
('', '$case_fk', '3', '$l3_allowed', '$l3_p4_comment', NOW(), '$author_pk')
";
$result = mysql_query($query, $connection) or die(mysql_error()); 
```

现在，我想让三个部分（第 1 级、第 2 级和第 3 级）中的每一个的无线电组为选定的无线电提交值“1”（即允许），每个组中的其他无线电提交“0”从：

```
$l1_allowed = $_POST['l1_allowed'];
$l2_allowed = $_POST['l2_allowed'];
$l3_allowed = $_POST['l3_allowed']; 
```

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:39:29.793

好的，我认为多次插入太难了，所以将三个区域分成单独的形式并使用：

```
$l1_allowed = intval($_POST['l1_allowed']);
$l2_allowed = intval($_POST['l2_allowed']);
$l3_allowed = intval($_POST['l3_allowed']);

if(isset($_POST['pathways_level_1'])){ 

$pathway_comment_l1 = array();

foreach($_POST['comment_l1'] as $comment_l1) {
    $pathway_comment_l1[]= mysql_real_escape_string($comment_l1);
}

for($i=0, $count = count($pathway_comment_l1);$i<$count;$i++) {
    $comment_l1 = $pathway_comment_l1[$i];
    $query_level_1 = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$case_pk',
           '1',
           '%s',
           '$comment_l1')", $l1_allowed === $i ? 'y' : 'n');

       $result_level_1 = mysql_query($query_level_1, $connection) or die(mysql_error());
}
if($result_level_1){
$message = "- The pathways for level 1 have been created.";
}
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:00:56.690

首先，[正确转义您的输入](http://php.net/manual/en/mysqli.real-escape-string.php)。

然后将处理表单数据的代码放到一个单独的页面中，例如 submit_action.php。并尽量避免使用`if(isset($_POST['submit'])){`. 反而：

```
if(isset($_POST['input1'])) {
$input1 = ($_POST['input1']);   
} else {
$input1 = "None";
}
if(isset($_POST['input2'])) {
$input1 = ($_POST['input2']);   
} else {
$input1 = "None";
}

<form action="submit_action.php" method="post" name="aFormName" id="form"> 
```

然后，在您的 INSERT 中：

```
$query="INSERT INTO $tbl_name(col1, col2)VALUES('$input1', '$input2')"; 
```

你指的是什么，无论如何？我在您的问题中没有看到页面链接。什么是验证（）？

# android - 从 SharedPreferences 加载值

> ID：15126052
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:49.873
> 
> 标签：android, variables, global-variables, sharedpreferences

在我的应用程序类中，我有以下内容：

```
public void loadPrefs(){
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);  
Boolean soundValue = sharedPrefs.getBoolean("SOUND", false);    
}

public void savePrefs(String key, boolean value){

SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit = sharedPrefs.edit();       
    edit.putBoolean(key, value);            
edit.commit();                          

} 
```

据我所知，一切都还好。

现在在我扩展 SurfaceView 的主类中，我有以下内容：

```
myApp mySettings = (myApp)getContext().getApplicationContext(); 
```

然后我可以像这样保存值：（再次来自我的surfaceView活动）

```
myPlanSettings.savePrefs("SOUND", false);} 
```

但是，我无法解决的是如何读回该值，以便我可以像这样设置一个局部变量：

```
Boolean thisValue = (the value from the shared preferences). 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:52:08.857

尝试这个

```
public Object loadPrefs(String key,String defaul){
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);  
return  sharedPrefs.get(key,default);
} 
```

在使用获取值时使用类型进行转换

基本用法：

```
boolean b=(Boolean)loadPrefs("value","default value") 
```

# c - 冒泡排序二维数组

> ID：15126053
> 
> 赞同：0
> 
> 时间：2013-02-28T01:48:50.740
> 
> 标签：c, arrays, sorting, 2d

我有一个看起来像这样的二维数组；

```
0\. PID: 0, PRI:-1
1\. PID: 0, PRI:-1
2\. PID: 0, PRI:-1
3\. PID: 15, PRI:4
4\. PID: 209, PRI:5
5\. PID: 0, PRI:0
6\. PID: 0, PRI:0
7\. PID: 0, PRI:0
8\. PID: 0, PRI:0
9\. PID: 0, PRI:0 
```

将具有有效 PRI（其中 PRI > 0）的 PI​​D 移动到数组顶部，同时根据 PRI 保持数字顺序的最快和最合乎逻辑的方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:24:15.710

至少从您的描述来看，您只关心对 PRI 值进行排序，但希望负值排在正值之后（但正值要按顺序排列）。

一种简单的方法是在进行比较之前将 PRI 值强制转换为无符号。当转换为无符号时，负值将以 2 ^N -1 为模减少，因此（例如）-1 将转换为 UINT_MAX（更重要的是，所有负数都将转换为大于任何开始为正数的无符号数签名号码）。

```
typedef struct { 
    int PID;
    int PRI;
} proc;

int cmp(void const *a, void const *b) { 
    proc const *aa = (proc const *)a;
    proc const *bb = (proc const *)b;

    if ((unsigned)(bb->PRI) < (unsigned)(aa->PRI))
        return -1;
    if ((unsigned)(aa->PRI) < (unsigned)(bb->PRI))
        return 1;
    return 0;
} 
```

最后，您可能还希望添加 PID 的比较，而不是仅基于 PRI 值的相等性返回 0，因此将按 PID 对等于 PRI 值的项目进行排序。我暂时忽略了它，因为你没有说你真的需要/想要它（它使代码更长一些并且可能更难理解，特别是如果你不期望它在那里）。

编辑：如果不清楚，则此比较功能旨在与 一起使用`qsort`，并且（假设您正确进行了比较）不需要稳定的排序。如果您决定首先对一个字段进行排序（几乎总是较慢），然后对第二个字段进行第二次（单独）排序，而不是在一次比较中比较所有相关字段，则您只需要一个稳定的排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:13:49.370

您可以按降序对 PRI 上的数组进行排序。或者，您可以像这样定义无效的 PRI，而不是使用 -1：

```
const int INVALID_PRI = INT_MAX; 
```

并对 PRI 列上的数组进行排序。

# c - 如何检测 FILE 对象是否已关闭？

> ID：15126056
> 
> 赞同：3
> 
> 时间：2013-02-28T01:49:08.930
> 
> 标签：c, fclose

请参阅以下代码块，我如何确保 FILE 对象在调用 fclose 之前未关闭？顺便说一句，两次调用 fclose 是否安全？

```
 FILE* f = fopen('test.txt')

    //some code here, f may be closed by someone, but they may not set it to NULL
    ...

    /// I want to make sure f is not closed before, how can I do it here?
    if(...)
    {
       fclose(f)
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T01:56:28.217

不，您必须自己跟踪它。这类似于判断指向已分配块的指针是否已被释放的问题。由于指针不再有效，因此无法进行此类测试。这同样适用于`FILE *`。关闭文件后，任何访问底层对象的尝试都会导致未定义的行为。

更新：

请注意，引用 Linux 手册页：

```
如果流参数是
非法指针，或者是已经传递给先前调用的描述符
fclose() 的阳离子。
```

请记住，未定义的行为并不意味着它会崩溃或它不会“工作”。这意味着不保证任何特定的行为并且操作是不安全的。之后访问`FILE`结构`fclose()`是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:51:54.150

每当您在程序中的任何位置调用 fclose() 时，都应将 FILE* 文件指针设置为 NULL，如下所示，您可以稍后在文件末尾的清理过程中对其进行检查。

```
fclose(f)
f = NULL; 
```

文件末尾的清理部分如下所示：

```
if (f != NULL)
{
    fclose(f);
    f = NULL;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T02:29:02.543

粘贴android-bionic的fclose源代码：（fclose.c文件）

```
int fclose(FILE *fp)
{
    int r;

    if (fp->_flags == 0) {  /* not open! */
        errno = EBADF;
        return (EOF);
    }
    FLOCKFILE(fp);
    WCIO_FREE(fp);
    r = fp->_flags & __SWR ? __sflush(fp) : 0;
    if (fp->_close != NULL && (*fp->_close)(fp->_cookie) < 0)
        r = EOF;
    if (fp->_flags & __SMBF)
        free((char *)fp->_bf._base);
    if (HASUB(fp))
        FREEUB(fp);
    if (HASLB(fp))
        FREELB(fp);
    fp->_r = fp->_w = 0;    /* Mess up if reaccessed. */
    fp->_flags = 0;     /* Release this FILE for reuse. */
    FUNLOCKFILE(fp);
    return (r);
} 
```

在关闭的 FILE 对象上调用 fclose 似乎是安全的。

# c - 如何用c打开一个mp3文件

> ID：15126058
> 
> 赞同：2
> 
> 时间：2013-02-28T01:49:23.333
> 
> 标签：c, windows, audio

我在尝试构建这个“简单”程序时遇到了一些麻烦。

我的目标是创建一个 C 程序，它执行一个说“Hello”的 mp3 声音文件并在 Windows 启动时运行。

```
#include<stdio.h>

main(int argc, char *argv[]){

FILE *fp;
char s[100];
int i;

    if((fp=fopen("Hello.mp3","rb"))==NULL) //Open file and read on binary mode
       { 
         printf("Could not open the file\n");
         exit(1);
    }

fclose(fp);

 } 
```

我认为要解释 MP3 编码数据，我必须使用库，但我真的需要帮助。

此致，

里卡多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:31:29.980

我认为我们不能像任何常规文本文件那样以这种方式打开 mp3 文件。

```
fp=fopen("Hello.mp3","rb") 
```

我们必须使用编解码器，才能真正播放 mp3 文件，或者至少使用有一个库。

一定要看看这些地方。

[如何在 C 中播放 MP3 文件？](https://stackoverflow.com/questions/428884/how-to-play-mp3-files-in-c?lq=1)

[SDL 混音教程](http://kekkai.org/roger/sdl/mixer/index.html)

# build - 如何从詹金斯的另一份工作中提升特定的内部版本号？

> ID：15126059
> 
> 赞同：63
> 
> 时间：2013-02-28T01:49:27.007
> 
> 标签：build, jenkins, promotions

我安装了`Promoted Build Plugin`from `Jenkins`，现在我在推广现有工作的构建时遇到了一些麻烦。这是场景：

1.  有一个现有的`Nightly Build`工作每天晚上运行，运行所需的所有测试和指标；

2.  有一个`Deploy Build`接受参数 ${BUILD_NUMBER} 并部署具有相应 ${BUILD_NUMBER} 的构建`Nightly Build`

    *   假设 [Nightly Build] 运行并成功构建了工件 #39
    *   现在我可以运行将 #39 作为参数传入的 [Deploy Build]
        *   [Nightly Build] #39 中的工件将被部署

到目前为止，一切都很好。现在是我要添加`Build Promotions`...的部分

![这正是我需要实现的](../Images/669b038e3dae7805d75312b880f00f50.png)

**有*没有*办法从`Nightly Build #39`_ 或者甚至可能来自其他地方，坦率地说，我有点迷失在这里:(*`Deploy Build`***

 *我没有看到它们具有明确的上游/下游关系，因为它们没有：*始终运行此构建，然后在执行过程中运行另一个 - [Deploy Build] 有时仅在 [Nightly构建]*。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-03-04T17:03:22.757

## 从 Parameterized Trigger Plugin 2.23 版开始更新：

随着版本 2.23+ 的[行为发生变化](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin#ParameterizedTriggerPlugin-Backwardcompatibilitywithversion2.22)（感谢[AbhijeetKamble](https://stackoverflow.com/users/2383282/abhijeetkamble)指出）。***调用（构建*****）作业的预定义参数**部分传递的任何参数都必须存在于被调用（***部署***）作业中。此外，调用作业参数的限制适用，因此如果调用作业的参数是一个**选项**，它必须预先填充所有可能的值（来自促销）。或者只使用**Text**参数类型。

 ******## 解决方案

是的，我有完全相同的设置：*构建*作业（基于 SVN 提交）和手动执行的*部署*作业。当用户从*构建*作业中选择任何构建（包括旧构建）时，他们可以转到**Promotion Status**链接并执行各种*部署*促销，例如*Deploy to DEV*、*Deploy to QA*等

## 以下是如何在*构建*作业上设置促销：

*   您将需要这些插件：[**Parameterized Trigger Plugin**](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)、[**Promoted Builds Plugin**](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)
*   您还需要在此构建作业上设置默认**存档 Artifacts构建后操作。**
*   复选标记**促进构建时**
*   定义**名称**“部署到 DEV”
*   在**标准**复选标记下**仅在手动批准时**
*   在**Actions**下，在其他项目上使用**Trigger/call 构建**
*   在**要构建的项目中，**在此处输入*部署*作业的名称
*   选中标记**阻止，直到触发的项目完成其构建**
*   **如果触发的构建更差或等于**：FAILURE（根据部署作业的状态进行调整），则将此构建标记为失败
*   **预定义参数** （代码 A）

**代码 A：**

```
Server=IP_of_my_dev_server`  
Job=$PROMOTED_JOB_NAME`  
BuildSelection=<SpecificBuildSelector><buildNumber>$PROMOTED_NUMBER</buildNumber></SpecificBuildSelector> 
```

在上面的**预定义参数部分中，= 左侧的名称是在***部署*作业中定义的参数。= 右侧是执行此促销时将分配给这些参数的值。定义三个参数`Server`和。`Job``BuildSelection`

该参数`Server=`是我自己的，因为我的部署作业可以*部署*到多个服务器。但是，如果您的*部署*作业被硬编码为始终部署到特定位置，则您不需要这样做。

该`Job=`参数是必需的，但参数的名称取决于您在*部署作业*中设置的内容（我将在那里解释配置）。该值`$PROMOTED_JOB_NAME`必须保持原样。这是升级过程知道的一个环境变量，它引用您的*构建*作业的名称（配置升级过程的那个）

该`BuildSelection=`参数是必需的。整条线必须保持原样。传递的值是`$PROMOTED_NUMBER`，促销再次意识到这一点。在您的示例中，它将是`#39`.

**在触发项目完成其构建之前阻塞**复选标记将使升级过程等到*部署*作业完成。如果没有，升级过程将触发部署作业并成功退出。等待*部署*作业完成的好处是，如果*部署*作业失败，促销星也会被标记为失败。

（这里有一点注意：在部署作业运行时促销星会显示成功。*如***​​果**部署失败，它只会在*部署*作业完成后变为失败。逻辑......但如果你可能会有点混乱部署完成前看推广星）

 **## 这是设置*部署*作业的方法

*   您将需要[**Copy Artifacts 插件**](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)
*   在**此构建下已参数化**
*   使用**名称配置****选择（或文本）**类型的参数（此名称必须与上一节中促销的**预定义参数**中的配置匹配） **`Server`**
*****   选择：输入上一节中促销的**预定义参数**将使用的可能服务器 IP 列表（*请参阅下面的更新说明*）*   使用**名称配置****选择（或文本）**类型的参数（此名称必须与上一节中促销的**预定义参数**中的配置匹配） **`Job`*******   选择：输入您的*构建*作业的默认名称。~~仅当您手动触发~~~~*部署*~~~~作业时才需要这样做。当*部署*作业从升级触发时，升级将提供值~~**（`Job=`来自我们配置的**预定义参数）。****此外，如果促销的预定义参数**没有传递任何值，则将使用首选值。如果*构建*作业和*部署*作业之间存在一对一的关系，则可以省略`Job=`升级配置中的参数。*****   **更新：** [自 Parameterized Trigger 版本 2.23 起，](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin#ParameterizedTriggerPlugin-Backwardcompatibilitywithversion2.22)***部署***作业配置中的可用选项必须具有来自促销预定义参数的所有可能值。如果您不想要该限制，请使用“文本”而不​​是“选择”*   为具有**名称****的复制工件配置构建选择器**类型的参数：**`BuildSelection`*****   **默认选择器**：最新成功构建*   在**构建**步骤下*   配置**从另一个项目复制工件***   在**项目名称**中输入`${Job}`*   在**哪个构建**选择`Specified by a build parameter`*   在**参数名称**中输入`BuildSelection`（不带`${...}`！）*   为将从*构建*作业复制到*部署*作业工作区的工件相应地配置其余部分*   *根据需要在部署*作业中使用复制的工件以进行部署************

 ******因此，现在，通过上述*部署*作业，您可以手动运行它并从*构建*作业中选择要部署的构建号（上次构建、上次成功、按构建号等）。您可能已经对其进行了非常相似的配置。*构建*作业上的*提升*将基本上执行相同的操作，并根据执行的提升提供构建号。

 *如果您对说明有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T22:53:54.350

标记的答案是对问题的很好解释。但我想为那些寻找“如何从詹金斯推广另一个工作”的人提出一个解决方案

我们可以使用通用解决方案使用 CURL 和 REST API 进行强制提升。您可以从 Shell 或 Groovy 脚本执行 curl。

[使用CURL](https://curl.haxx.se/docs/manpage.html)的外壳解决方案：

```
 user_name="jenkins_user"
    user_token="token" 
    promotion_name="Test_Promote"
    jenkins_url="http://build-server.com"
    JOB_NAME="job_name"
    JOB_NO="job-no"

    url="--silent -u $user_name:$user_token $jenkins_url/job/$JOB_NAME/$JOB_NO/promotion/forcePromotion?name=$promotion_name"
    curl $url

Groovy Soultion:
        user_name="jenkins_user"
        user_token="token" 
        promotion_name="Test_Promote"
        jenkins_url="http://build-server.com"
        JOB_NAME="job_name"
        JOB_NO="job-no"

def response = "curl -u $user_name:$user_token \" $jenkins_url/job/$JOB_NAME/$JOB_NO/promotion/forcePromotion?name=$promotion_name".execute().text 
```

如何生成jenkins用户令牌：[https ://jenkins.io/blog/2018/07/02/new-api-token-system/](https://jenkins.io/blog/2018/07/02/new-api-token-system/)****************

# objective-c - 忽略 Objective-C 中的“属性类型与继承自的类型不兼容”警告

> ID：15126060
> 
> 赞同：4
> 
> 时间：2013-02-28T01:49:28.583
> 
> 标签：objective-c, warnings, clang, suppress-warnings

在子类中，我将属性的类型覆盖为该属性的子类，其工作方式如下：

```
ClassA: NSObject
@property (nonatomic) NSValue *value;

ClassB : ClassA
@property (nonatomic) NSNumber *value; 
```

但是，我发现如果`ClassA`没有上课，那么会有以下形式的警告`#import`：。`NSNumber``ClassB``Property type 'NSNumber *' is incompatible with type 'NSValue *' inherited from 'ClassA'`

我不想在`ClassA`. 如何覆盖 Clang 的警告？我知道语法是：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-somethingGoesHere"
#pragma clang diagnostic pop 
```

但我不知道我应该通过什么标志。有没有地方我可以查看该警告要传递的标志？我参考了[Clang 用户手册](http://clang.llvm.org/docs/UsersManual.html)并尝试使用该`"-w"`标志禁用该行的所有警告，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T15:51:03.630

我面临的问题与您的问题略有相似，希望这个答案也对您有用。 [问题](https://stackoverflow.com/questions/23859596/ignore-clang-warnings-related-to-property)。

现在我得到了忽略警告的解决方案。希望这个解决方案也对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-28T02:36:21.870

您可以在 Xcode 构建日志活动中显示警告并找到 clang 标志。尝试这个：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wincompatible-property-type"
...
#pragma clang diagnostic pop 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T02:08:48.193

您不应该覆盖子类中的属性。我理解你为什么认为你应该这样做，但这确实不是正确的设计。将第二个命名为其他名称，例如“numberValue”。

# iphone - UIImageView 单元格 contentView 的视图之一没有与其父视图一起扩展

> ID：15126065
> 
> 赞同：2
> 
> 时间：2013-02-28T01:49:58.357
> 
> 标签：iphone, ios, uiview, uitableview, uiimageview

我有一个 UITableView，其中每个单元格在其 contentView 中包含一个 UIView，我们称它为 V。V 也有子视图，一个 UIImageView 和 UILabel.UIImage 只是一个白色圆角矩形我希望我的单元格（连同 UIImageView）在何时展开和缩小选择。我在 didSelectRowAtIndexPath 和 heightForRowAtIndexPath 方法中添加了一些代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSNumber * key = [NSNumber numberWithInt:indexPath.row];
    UITableViewCell *cell = [cells objectAtIndex:indexPath.row];
    UIView * v = [[[cell contentView] subviews] objectAtIndex:0];
    UIImageView  * image = [[v subviews] objectAtIndex:0]; 

    _tappedIndex = [key intValue];
    _expanded = [_tappedCells objectForKey:key] == nil;
    NSLog(@"view's old params: %@", [GGStackPanel printFrameParams:v]); //prints out the frame params
    NSLog(@"image's old params: %@", [GGStackPanel printFrameParams:image]);
    if (_expanded)
    {
        [_tappedCells setObject:key forKey:key];
        v.frame = CGRectMake(v.frame.origin.x, v.frame.origin.y, v.frame.size.width, v.frame.size.height*1.5);
        image.frame = CGRectMake(image.frame.origin.x, image.frame.origin.y, image.frame.size.width, v.frame.size.height + 73);
    }
    else
    {
        [_tappedCells removeObjectForKey:key];
        v.frame = CGRectMake(v.frame.origin.x, v.frame.origin.y, v.frame.size.width, v.frame.size.height/1.5 );
        image.frame = CGRectMake(image.frame.origin.x, image.frame.origin.y, image.frame.size.width, v.frame.size.height - 113);
    }
    NSLog(@"view's new params: %@", [GGStackPanel printFrameParams:v]);
    NSLog(@"image's new params: %@", [GGStackPanel printFrameParams:image]);

    [tableView beginUpdates];
    [tableView endUpdates];
}

- (CGFloat)tableView:(UITableView *)tv heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *v = [_cells objectAtIndex:indexPath.row];
    CGFloat height = v.frame.size.height;
    if (indexPath.row == _tappedIndex)
    {
        if (_expanded)
        {
            height = v.frame.size.height * 1.5;
        }

        else
        {
            height = v.frame.size.height/1.5;
        }
    }
    return height;
} 
```

单元格框架和 V 正在扩展，我记录了它们的框架参数。但是 imageView 始终保持不变，即使您在每次选择单元格时更改其框架。它的框架在 didSelectRowAtIndexPath 方法中发生了变化，但是当你再次点击同一个单元格时，它说它的框架与上次相比没有改变。

如果我放置另一个 UIView 而不是 imageView，它会随其父 View 和单元格展开和缩小。因此，我想出了一个非常奇怪的解决方案：剪下圆角矩形，将狭窄的顶部和底部部分保留为 imageView。然后在中间放一个空白的UIView，颜色和矩形一样。现在我的“矩形”正在扩展，因为空白 UIView 扩展并且这两个 imageViews 上下移动。我不喜欢这个解决方案，因为如果您将手机切换到横向模式，或者尝试从横向模式扩展单元格并返回纵向模式，UI 就会变得混乱。

有什么意见、建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:03:30.317

如果您使用 initWithImage:，UIImage 视图的大小与其图像相同。我假设您在 IB 中添加图像，所以我猜测 IB 使用该方法来填充图像视图。如果您无法在扩展后添加图像（使用 setImage 会导致图像填充图像视图的大小），那么我只会使用带有圆角的 UIView。您不需要进行切片，只需使用带圆角的图层即可。这就是我为使单元格具有分组外观所做的工作，方法是在单元格内放置一个圆角白色矩形。这是子视图的 init 方法：

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        self.backgroundColor = [UIColor whiteColor];
        CALayer *bgLayer = self.layer;
        [bgLayer setMasksToBounds:YES];
        [bgLayer setCornerRadius:8];
    }
    return  self;
} 
```

如果您这样做，请务必导入 QuartzCore 框架。

# jquery - jQuery打开所有滑块元素然后跳转到锚链接

> ID：15126066
> 
> 赞同：0
> 
> 时间：2013-02-28T01:50:05.500
> 
> 标签：jquery, accordion, jquery-ui-accordion, jquery-ui-slider

目标：我有一些现有内容（大量文本和多个页面），我正在更新以在动态 jQuery 滑块中隐藏/分段（[此处为创建者的演示页面和代码](http://www.snyderplace.com/demos/collapsible.html)）。但是，内容充满了不同位置的内部链接，我不想单独更新。

我想出的解决方案可能性：（a）创建 jQuery 以自动检测锚在哪个滑块 div 中，并自动打开它，或者（b）如果 URL 包含哈希标签，则触发 openAll 函数以打开所有滑块，然后滚动到锚点位置。

问题：我是新手。我选择了选项 B，并认为我的代码有正确的想法，但它破坏了页面。想法？

```
var hash = location.hash.replace('#', '');
$('body').find('ul'+hash+':first');
function hashload {
if(window.location.hash) {
    $('.collapsible').openAll();
    $('html, body').animate({
    scrollTop: $('#'+hash).offset().top}, 'fast');}} 
```

可能具有这一切的关键的相关资源（也就是我所基于的......）： [链接到 JQuery 选项卡式内容中的锚点](https://stackoverflow.com/questions/10595351/link-to-an-anchor-within-jquery-tabbed-content)（以及此处的随附解决方案：http: [//jsfiddle.net/TGMDd/65/](http://jsfiddle.net/TGMDd/65/) )

如果 url 包含 # ... 并且： [获取 URL 哈希位置，并在 jQuery 中使用它，](https://stackoverflow.com/questions/1822598/getting-url-hash-location-and-using-it-in-jquery)[则不执行脚本](https://stackoverflow.com/questions/7384796/dont-execute-script-if-url-contains)

[JQuery滚动到点击锚点？](https://stackoverflow.com/questions/5508819/jquery-scroll-to-anchor-on-click)

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:11:00.533

假设可行`$('.collapsible').openAll();`，请尝试删除此行：

```
$('body').find('ul'+hash+':first'); 
```

1.  它似乎没有做任何有效的事情。
2.  选择器不正确。

它应该看起来像：

```
$(document.body).find('ul.'+hash+':first'); 
```

# c - 等价于数组的指针

> ID：15126070
> 
> 赞同：1
> 
> 时间：2013-02-28T01:50:12.677
> 
> 标签：c, arrays, pointers

我知道如果我定义一个像

```
int a [10]; 
```

我可以使用指针表示法来访问它的地址 using`a+<corresponding_item_in_array>` 和它的值 using, `*(a+<corresponding_item_in_array>)`。

现在我想反转事情，我曾经`malloc`为整数指针分配内存，并尝试用下标表示法表示指针，但它不起作用

```
int *output_array;
output_array = (int *) (malloc(2*2*2*sizeof(int))); //i.e, space for 3d array

output_array[0][0][1] = 25;  
// ^ produces error: subscripted value is neither array nor pointer 
```

我可能使用了存储映射的指针表达式，但不是更简单的方法可用吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:00:03.663

该`int*`类型*不*等同于 3D 数组类型；它相当于一维数组类型：

```
int *output_array;
output_array = (int *) (malloc(8*sizeof(int))); //i.e, space for array of 8 ints
output_array[5] = 25; // This will work 
```

更高等级数组的问题在于，为了索引到 2D、3D 等数组，编译器必须知道除第一个维度之外的每个维度的大小，以便正确计算索引的偏移量。要处理 3D 数组，请定义一个 2D 元素，如下所示：

```
typedef int element2d[2][2]; 
```

现在你可以这样做：

```
element2d *output_array;
output_array = (element2d*) (malloc(2*sizeof(element2d))); 
output_array[0][0][1] = 25; // This will work now 
```

[ideone 上的演示。](http://ideone.com/Tdjgfi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:13:56.553

是什么类型的`output_array`？`int *`.

`*(output_array+n)`or的类型是`output[n]`什么？`int`.

是否允许下标`int`？两个下标（例如`*(output_array+n)`和`output[n]`）都是指针操作，而`int`不是指针。这解释了您收到的错误。

您可以像这样声明指向 int[x][y] 的指针：`int (*array)[x][y];`

您可以分配适合替代 3D 数组的存储以`array`使用：`array = malloc(42 * x * y);`. 这相当于`int array[42][x][y];`，除了数组不是可修改的左值，alignof、sizeof 和 address-of 运算符的工作方式不同并且存储持续时间不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:01:45.037

因为编译器不知道每个维度的大小，所以它无法找出`output_array[0][0][1]`应该在哪里。

你可以试试这个

```
typedef int (* array3d)[2][2];
array3d output_array;
output_array = (array3d) malloc(2 * 2 * 2 * sizeof(int));
output_array[0][0][1] = 25;
printf("%d\n", output_array[0][0][1]); 
```

# java - 如何将 MOXy JAXB 指定为 Apache CXF 2.2.6 的 Apache CXF 实现

> ID：15126071
> 
> 赞同：3
> 
> 时间：2013-02-28T01:50:12.673
> 
> 标签：java, cxf, eclipselink, moxy

如何告诉 Apache CXF 使用 MOXy JAXB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:46:02.407

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

`jaxb.properties`对于 Apache CXF 中的 JAX-RS 应用程序，在与域模型相同的包中添加一个文件可能就足够了，将MOXy 指定为[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)提供程序 ( [http://blog.bdoughan.com/2011/05/](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)使用以下条目[指定-eclipselink-moxy-as-your.html ）：](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

[**这就是使用Jersey**](http://jersey.java.net/)创建 JAX-RS 应用程序时所需的全部内容。

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html)

> 在我看来，Apache CXF 使用 org.apache.cxf.databinding.JAXBDataBinding 类作为允许潜在覆盖的主要手段。我看到您的解决方案标题为“将 EclipseLink MOXy 指定为您的 JAXB 提供程序”。如果我理解正确，似乎我可能必须将此属性文件放在每个具有 JAXB 类的包中。这是一个正确的假设吗？

该`jaxb.propertie`文件至少需要位于用于创建`JAXBContext`.

**EclipseLink 2.5 即将推出**

类似于`MOXyJsonProvider`我们在 EclipseLink 2.4 中添加的类，以便轻松将 MOXy 配置为您的 JSON 提供程序（请参阅：[http ://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider .html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html) )，在 EclipseLink 2.5 中，我们添加了它，以便在简单添加文件不起作用`MOXyXmlProvider`的环境中轻松使用 MOXy 作为您的 XML 提供程序。`jaxb.properties`

*   [http://bugs.eclipse.org/397125](http://bugs.eclipse.org/397125)

# java - 基于 Errai-UI 的 GWT 应用程序的导航

> ID：15126072
> 
> 赞同：0
> 
> 时间：2013-02-28T01:50:15.167
> 
> 标签：java, gwt, errai

我在使用基于 Errai-UI 的 GWT 应用程序时遇到了一些问题，试图创建一个带有导航选项卡的页面。我面临的问题是导航和页脚没有被呈现，似乎我的应用程序 WelcomePage 是浏览器上唯一呈现的应用程序：

```
@Dependent
@Templated("#home")
@Page(startingPage=true)
public class WelcomePage extends Composite { 
 // stuff
} 
```

上述 WelcomePage 的关联 HTML 是唯一在浏览器上呈现的 HTML。

引导代码：

```
@Templated("#main")
@ApplicationScoped
@EntryPoint
public class Bootstrap extends Composite
{

    @Inject
    Navigation navigation;

    @Inject @DataField
    private NavBar navbar;

    @PostConstruct
    public void buildUI()
    {
        RootPanel.get().add(navigation.getContentPanel());
    }

} 
```

这是相应的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta charset="utf-8">
    <title>Title</title>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div data-field="main">
        <!--top part start -->
        <div id="top">
            <a href="index.html"><img src="images/logo.gif" alt="individual" width="286" height="66" border="0" /></a>
            <div data-field="navbar">Navbar Goes here</div>
        </div>
        <!--top part end -->

        <div data-field="content"></div>

        <!--footer start -->
        <div id="footerMain">
            <div id="footer">
                <ul>
                        <li><a href="#">Home</a>|</li>
                </ul>
            </div>
        </div>
        <!--footer end -->          
    </div>
    <!-- main end -->
</body>
</html> 
```

我的应用程序工作正常，只是没有呈现导航和页脚。我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:34:48.337

好吧，我认为这是因为您只是将实际的内容面板添加到 DOM。DOM 是有向无环图，因此不能有重复的注释。因此，当您使用 RootPanel.get().add(navigation.getContentPanel()) 将内容面板显式添加到 DOM 时，浏览器正在将整个 DOM 树替换为由

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:42:32.850

解决方案是：

```
@PostConstruct
public void buildUI()
{
    content.add(navigation.getContentPanel()); // Just a SimplePanel with data-field in the Bootstrap html
    RootPanel.get("rootPanel").add(this);
} 
```

# ember.js - ember-data 海关序列化

> ID：15126081
> 
> 赞同：3
> 
> 时间：2013-02-28T01:50:45.797
> 
> 标签：ember.js, ember-data, serialization

您好，我是 ember 的新手并正在探索它，我已经能够对资源进行简单的发布，但它会像这样呈现我的对象

```
{"person":{"atribute1":"jjj","atribute2":"jjj"}} 
```

有没有办法像自定义序列化程序一样删除“登录”，我的端点通过以以下形式传递对象来工作

```
{"atribute1":"jjj","atribute2":"jjj"} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:07:50.030

我能找到的唯一解决方案是在我拥有之前覆盖 createRecord

```
data[root] = this.serialize(record, { includeId: true }); 
```

我删除了 root 的索引并得到了这个：

```
App.Store = DS.Store.extend({
                revision: 11,
                adapter : 'App.CustomAdapter'

        });

        App.CustomAdapter = DS.RESTAdapter.extend({

                        createRecord: function(store, type, record) {
                            var root = this.rootForType(type);

                            var data = {};
                            data = this.serialize(record, { includeId: true });

                            this.ajax(this.buildURL(root), "POST", {
                              data: data,
                              context: this,
                              success: function(json) {
                                Ember.run(this, function(){
                                  if ( this.rootForType(type) == 'login' ) {
                                          return;
                                      }

                                  this.didCreateRecord(store, type, record, json);
                                });
                              },
                              error: function(xhr) {
                                //HERE to handle login operation failed
                                this.didError(store, type, record, xhr);
                              }
                            });
                        }

        }); 
```

可能需要诸如 withRoot 之类的属性或类似的属性。

# php - 在特定时间运行 PHP 脚本的最佳方式是什么？

> ID：15126084
> 
> 赞同：1
> 
> 时间：2013-02-28T01:50:54.000
> 
> 标签：php, unix, cron

我有一个拍卖会在不同时间结束的网站。拍卖结束后，我需要向卖家和买家发送一封自动电子邮件，通知他们拍卖结束和结果。显然，我真的不能等待有人加载页面来运行脚本，那么有没有一种好方法可以通过检查当前时间并将其与拍卖结束时间进行比较并运行该脚本来自动执行此操作？

该站点位于 UNIX 服务器上，因此可以选择 cron 作业，但我担心运行这样的 cron 作业会给服务器带来相当大的负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:53:20.903

一个 cron 作业每分钟最多运行一次。

无论它在服务器上产生什么负载，实际上都取决于您要运行的脚本类型。顺便说一句，我假设您正在使用`cli`来运行脚本（而不是仅仅执行`curl http://mysite.com`.

如果您的脚本花费的时间超过一分钟（您应该对此进行监控），只需：

*   增加运行之间的间隔时间，或者，
*   使用[锁定文件](http://php.net/flock)确保脚本的两个实例不能同时运行。

    ```
    if (($fp = fopen('/tmp/mylockfile', "r+")) === false) {
        die("Could not open lock file");
    }
    if (!flock($fp, LOCK_EX | LOCK_NB)) {
        die("Could not obtain lock");
    }
    // run your code here

    // release the lock and close file
    fclose($fp); 
    ```

OTOH 如果脚本需要每分钟运行一次以上，您将需要完全不同的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:53:31.793

使用 Cron。它允许您每分钟最多运行一次任何命令：http: [//clickmojo.com/code/cron-tutorial.html](http://clickmojo.com/code/cron-tutorial.html)

就服务器负载而言，除非您在非常低端的服务器上经常运行大量数据库调用，否则它通常不会成为问题。我笼统地说，但这个想法是合理的。

如果您使用其他东西（除了 PHP）来运行您的拍卖计时器机制，我建议您将一些代码附加到该计时器机制上，当计时器运行到零并确定获胜者时，该机制还会执行邮件发送脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:02:53.487

问：在特定时间或间隔运行 PHP 脚本的最佳方式是什么？
答：使用[cron](http://www.scrounge.org/linux/cron.html)

问：cronjob 会在服务器上产生很大的负载吗？
A：当然取决于你的剧本。但是检查是否应该关闭拍卖，关闭它并发送两封电子邮件应该不难。请务必创建某种锁定文件，以确保*如果*您的脚本运行时间超过设置的时间间隔，它不会运行两次。

问：运行间隔小于 1 分钟的脚本
答：无法为您回答这个问题。对不起 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T01:57:34.030

将 PHP 脚本作为命令行脚本运行。这不会给网络服务器带来负担——只是给服务器带来负担，您可以通过 CRON 轻松运行它。

如果您添加`#!/usr/bin/php`到脚本的顶部并更改文件上的执行位，`chmod +x scriptname.php`您可以直接执行脚本而无需通过php传递

[http://php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T02:06:11.583

你需要做几件事：

1.  在您的拍卖信息中存储一些内容，表明您是否已发送此电子邮件（可以是布尔值或发送日期，可能为空）。尽管我不得不假设您除了发送这封电子邮件之外还需要做一些事情吗？喜欢将拍卖标记为已结束，这样就不能再进行竞标了吗？

2.  查找需要发送此电子邮件的拍卖的一些代码：例如，它们已经结束并且还没有被提醒。

3.  重复执行 2 中的代码的东西。你可以使用 cron。或者，您可以为 unix 编写一个非常简单的守护程序，该守护程序在循环中不断运行（等待至少几毫秒或更长时间；做一些事情）。后者的工作量更大，但在我看来，规模要好得多。如果您对这种方法感兴趣，请参阅[http://pear.php.net/package/System_Daemon以获取一些有用的工具。](http://pear.php.net/package/System_Daemon)

需要考虑的一件事是，您要小心避免意外重复发送这封电子邮件。如果您只在单个线程中运行此代码，这很容易，但如果您想要构建到拥有多个不同的分布式机器来创建和发送这些电子邮件的地步，您必须更加小心。如果你用 cron 运行它，你能保证它的一次运行总是在另一次开始之前完成吗？

# javascript - Javascript 在 JSP 中输入空值测试

> ID：15126092
> 
> 赞同：1
> 
> 时间：2013-02-28T01:51:48.190
> 
> 标签：javascript, jsp, testing, null

我目前正在尝试填写表格中的一些字段。我正在做一个测试 if`extnReason`和`extnDt`are `null`，我什么也不做。但由于某种原因，它不断输入支票并用 加载我的字段`null`，这是我不想要的。

```
function preloadFields() {

//these values are coming in as null
var extnReason = '<%=extnReason%>';
var extnDt = '<%=extnDt%>';

//set Extension Date blank on load
$('#extnDt').val("");

alert("reason ++++ " + extnReason);
alert("extnDt ++++ " + extnDt);

//it is entering these tests but I don't want them to
if(extnReason != null || extnReason != "null"){ 
    console.log("entered reason");
    $('#extnReason').val(extnReason);
}

if(extnDt != null || extnDt != "null") {
    console.log("entered extnDt");
    $('#extnDt').val(extnDt);
}

} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:57:26.833

你需要

```
if(extnReason != null && extnReason != "null") 
```

代替

```
if(extnReason != null || extnReason != "null") 
```

因为 if`extnReason`是`'null'`第一个条件`'null' != null`将返回`true`，所以 OR 检查将评估为`true`并因此输入设置您的值的代码块。

其他if条件相同...

预加载字段的替代方法：您也可以只设置`value`输入标签的属性而不是使用`preloadFields`？即类似的东西：

```
 <input type="text" id="extnDt" value="${extnDt != null ? extnDt : ''}" /> 
```

# c++ - 临时ostream对象的c ++问题

> ID：15126096
> 
> 赞同：5
> 
> 时间：2013-02-28T01:52:01.173
> 
> 标签：c++, temporary-objects, anonymous-objects

我想转换这个工作代码：

```
ofstream outfile("my_file.txt");
copy(v.begin(), v.end(), ostream_iterator<int>(outfile)); 
```

进入这个：

```
copy(v.begin(), v.end(), ostream_iterator<int>(ofstream("my_file.txt"))); 
```

换句话说，我使用了 ofstream 对象的“匿名”或未命名版本。

两个问题：

(1) 为什么第二次尝试失败？

(2) 第二次尝试在风格上是否更好，或者在 C++ 中明确命名所有内容是否更好？我来自 Python 背景，一直在动态创建对象。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:58:38.190

构造函数接受对流对象的`ostream_iterator<T>`非`const` *引用*，而临时对象最多可以作为`const`引用传递（至少在 C++03 中）；[这个问题](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object)很好地解释了这样做的理由。

顺便说一句，这里没有太多关于如何传递流的选择：`const`引用没有意义（`ostream_iterator` *必须*修改流），并且纯文本`ostream`是不可接受的，因为它是不可复制的（切片会杀死多态性）。

在 Python 中，您可以随时构建/传递东西，因为您总是在处理对*引用**计数*（和垃圾收集）*对象*的引用。

C++ 对象语义完全不同——对象*是*对象，而不是引用；要获得类似于 Python 的语义，您必须动态分配每个对象`new`并将它们传递给包裹在`shared_ptr<T>`.

> 在 C++ 中明确命名所有内容是否更好

不一定——创建临时对象是完全正常的，但你必须知道你可以对它们做什么，不能做什么，引用如何影响它们的生命周期等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:01:52.790

我从我的编译器收到以下错误消息，解释了它。

`std::ostream_iterator`的构造函数采用非 const 引用。没有采用 std::ofstream 的构造函数版本。

```
Untitled 33.cpp:21: error: no matching function for call to ‘std::ostream_iterator<int, char, std::char_traits<char> >::ostream_iterator(std::ofstream)’
/usr/include/c++/4.2.1/bits/stream_iterator.h:185: note: candidates are: std::ostream_iterator<_Tp, _CharT, _Traits>::ostream_iterator(const std::ostream_iterator<_Tp, _CharT, _Traits>&) [with _Tp = int, _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.2.1/bits/stream_iterator.h:181: note:                 std::ostream_iterator<_Tp, _CharT, _Traits>::ostream_iterator(std::basic_ostream<_CharT, _Traits>&, const _CharT*) [with _Tp = int, _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.2.1/bits/stream_iterator.h:169: note:                 std::ostream_iterator<_Tp, _CharT, _Traits>::ostream_iterator(std::basic_ostream<_CharT, _Traits>&) [with _Tp = int, _CharT = char, _Traits = std::char_traits<char>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:22:53.703

在 C++ 中，我们也经常即时构造对象，但需要注意所有权问题。

问题`ostream_iterator<int>(ofstream("my_file.txt"))`是临时对象被传递给构造函数，但构造的`ostream_iterator`对象不拥有临时对象的职责。如果`ostream_iterator`也不是临时的，它将继续在下一行代码中持有无效引用。

有一些方法可以解决这个问题，通过传递给一个身份函数或通过强制转换。但是它们通常会牺牲安全性，因为如果您在持久变量上使用这种机制，它将创建一个悬空引用。

当您有多个通过引用链接的对象时，没有包含容器的关系，当前的 C++ 最佳实践是使用命名对象，而不是临时对象。

如果您不喜欢这样，您可以选择更频繁地使用共享指针。该模式允许在多个引用之间共享所有权，并隐藏一个容器。但这不是 iostreams 的一部分，作为设计决策，这里会有点问题。

# algorithm - 使用二叉搜索树进行除法

> ID：15126097
> 
> 赞同：2
> 
> 时间：2013-02-28T01:52:01.627
> 
> 标签：algorithm, binary-search-tree

有没有使用二叉搜索树执行除法（比如 div b）。

# mysql - INNER JOIN 的 SQL 语法问题

> ID：15126098
> 
> 赞同：0
> 
> 时间：2013-02-28T01:52:06.380
> 
> 标签：mysql, join

我在 MySql 中有三个表。表 1 有以下字段

表格1：

```
EventType
-etid
-description 
```

表 2：

```
EventAsks
-etid
-qid 
```

表3：

```
Questions
-qid
-textofquestion 
```

如果我有一个特定的 etid，并且我想找到该事件要求的所有问题。因此，鉴于下表...

```
EventType
etid     description
1        hiking
2        biking

EventAsks
etid      qid
1         1
1         3
2         2
2         3

Questions
qid   textofquestion
1     Is it fun?
2     Is it lots of exercise
3     Is it expensive 
```

因此，给定 etid 的结果说 etid=1，我希望返回与 etid=1 相关的问题...

```
Result
Is it fun?
Is it expensive? 
```

我确定这与加入有关，但我不知道具体该怎么做？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:55:07.980

经典*的 n 对 n*关系：

```
SELECT Questions.textofquestion FROM EventType
LEFT JOIN EventAsks ON EventAsks.etid = EventType.etid
LEFT JOIN Questions ON Questions.quid = EventAsks.qid
WHERE EventType.etid = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:56:17.913

你可以做：

```
SELECT Questions.textofquestion
FROM EventType
   INNER JOIN EventAsks 
        ON EventType.etid = EventAsks.etid
   INNER JOIN Questions 
        ON EventAsks.qid = Questions.qid
WHERE EventType.etid = 1 
```

由于您已经拥有`etid=1`yuou，因此可以简化为：

```
SELECT Questions.textofquestion
FROM EventAsks 
   INNER JOIN Questions 
        ON EventAsks.qid = Questions.qid
WHERE EventAsks.etid = 1 
```

# hadoop - 如何在hadoop中的所有reduce作业之间拥有一个共享变量

> ID：15126099
> 
> 赞同：0
> 
> 时间：2013-02-28T01:52:08.553
> 
> 标签：hadoop, mapreduce, word-count

我有 1 TB 的未排序字数（字数：字数），我想运行一个 map reduce 作业来选择字数最多的单词。在这种情况下，我希望有一个在所有减少作业之间共享的变量，该变量将保存迄今为止最大字数的单词。reduce 函数只会检查这个变量并在必要时更新它。那可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:24:15.543

你可以

*   将减速器的数量设置为 1
*   向 reducer 类添加两个实例变量，一个用于计数，一个用于单词，以保存有关最常见单词的信息。
*   在 reduce setup() 方法中初始化变量
*   在 reduce() 方法中检查当前单词是否比最频繁出现的单词多，如果是，则将单词和计数存储在变量中
*   在 cleanup() 方法中，您可以访问变量以获得最常用的单词

如果需要运行多个 reducer，则修改 reducer 的 cleanup() 方法，改为将单词及其计数作为键值对写入上下文。与上面的原始 reducer 类似的后续 reducer 可以轻松找到出现次数最多的单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:13:52.900

我认为您误解了 Mapreduce 的工作原理。尽管您受到 Mapreduce 模型机制的限制，但它不会在机器之间共享内存以增加吞吐量。

为了做你所说的，你会做以下事情：

```
Map : (word, count) -> (KEY_CONSTANT, (count, word)) 
```

和

```
Combine/Reduce : (key, List<(count, word)>) -> (key, (count*, word*) with max count) 
```

如果您添加`count`到键，但确保所有内容仍在一个分区中，您可以告诉 MapReduce 按降序对键进行排序`count`，然后您可以实现一个单独的 reducer，它只检查每个列表中的第一个值。但是，您不能对输入未排序的组合器执行此操作。由于它不会读取其余数据，因此可能会使实现速度更快。

有关如何有效使用排序阶段的更多信息，请参阅**[MapReduce 框架如何实现排序阶段？](https://stackoverflow.com/questions/9363761/how-does-mapreduce-framework-implement-the-sort-phase)**

[过程的一般描述： http](http://wiki.apache.org/hadoop/HadoopMapReduce) ://wiki.apache.org/hadoop/HadoopMapReduce

# c# - 如何删除 mediaElement 已经使用的音频文件（在 WPF-C# 中）？

> ID：15126103
> 
> 赞同：0
> 
> 时间：2013-02-28T01:52:55.620
> 
> 标签：c#, wpf, audio, mediaelement

现在我必须编写一个在每个进程之后自动生成声音文件（result.mp3）的模块。我在 WPF 中使用 MediaElement 来制作音频和滑块按钮。

在每个过程中，我都必须覆盖文件 result.mp3。但是，每次我去删除result.mp3（已经被mediaElement监听后使用过），程序经常会带来一个异常：访问被拒绝。当然，每当我生成新的音频文件时，我也会重置新的 Url 以停止 MediaElement。

```
mediaElement.Stop();
mediaElement.Source=new Uri("result.mp3");
mediaElement.Start(); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:05:05.050

最后，我有解决此错误的方法。

您必须在以下事件中关闭 mediaElement： 1\. 停止按钮。2\. MediaElement_End 事件

```
 private void stopButton_Event()
        {
            fileIsPlaying = false;
            playtimer.Stop();
            mediaElement.Stop();
            mediaElement.Close();
            seekSlider.Value = 0;
            currentTimeTextBlock.Content = "00:00";
            buttonPlay.Content = "Play";
        } 
```

我仍然不知道是什么导致了这个错误

# javascript - 从封装对象访问对象中的变量

> ID：15126104
> 
> 赞同：1
> 
> 时间：2013-02-28T01:52:57.873
> 
> 标签：javascript

标题有点模棱两可，但代码非常清楚地解释了这个问题：

```
function Game() {
    this.secret = '';
    this.Playground = {
        this.someTreat: function() {
            console.log('how to access secret from here ?');
        }
    };
}

var Test = new Game();
Test.Playground.someTreat(); 
```

我提供了一个具有相同代码的[JSFiddle 。](http://jsfiddle.net/gzSt5/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:02:49.363

您必须`this`在`Game`函数中创建一个副本。规范的做法是创建一个名为`that`.

```
function Game() {
    this.secret = 'secret information';
    var that = this;
    this.Playground = {
        someTreat: function() {
            console.log(that.secret);
        }
    };
}
var test = new Game();
test.Playground.someTreat(); 
```

您可以[在 jsFiddle 上看到这一点](http://jsfiddle.net/HcMk5/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:08:51.593

在您的代码中，您需要对访问变量的方式进行一些更改`secret`-您可以通过将`this`关键字复制到`that`像彼得的答案这样的变量中来做到这一点。

另一种方式可能是这样的：

```
function Game() {
  var secret = 'secret information';
  this.Playground = {
    this.someTreat = function() {
        console.log(secret);
    };
  };
} 
```

Because of the `Game` function enclosure the secret variable is private to that scope. And as long as you define your functions within that enclosure, those functions will have access to the secret "private" variable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:07:03.457

（我在 Playground 和 someTreat 的定义中修正了你的错误）

在“this”上使用闭包：

```
function Game() {
    var self = this;
    this.secret = 'xyz';
    this.Playground = {
        someTreat: function() {
            console.log('how to access secret from here ?');
            console.log('response: use self');
            console.log('self.secret: ' + self.secret);
        }
    };
} 
```

# javascript - 以这种方式实现 Javascript 单例模式有什么问题吗？

> ID：15126106
> 
> 赞同：2
> 
> 时间：2013-02-28T01:53:01.333
> 
> 标签：javascript, singleton

有没有人看到以下用于创建单例的代码块有任何问题？

```
Singleton = {
    getInstance : function() {
        if (Singleton._instance)
            return Singleton._instance;

        Singleton._instance = new function() {
            //create object here
        };

        return Singleton._instance;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:57:51.370

在 Javascript 中，通常更简单的是使用对象文字创建单例对象并将其放入人们可以获取的变量中。

```
var mySingleton = {
    some_variable: 10,
    some_method: function(x){
        console.log(this.some_variable * x);
    }
}

mySingleton.some_method(); 
```

使用复杂的模式可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:03:28.827

另一种常见的单例模式是“模块模式”，它允许您声明“私有”变量。

```
var singleton = (function singletonMod() {
  // private
  var foo = 'foo';

  function getFoo() {
    return foo;
  }

  // expose public vars and methods
  return {
    getFoo: getFoo
  };
}()); 
```

# c# - 从 AssemblyInfo.cs 获取程序集版本

> ID：15126113
> 
> 赞同：31
> 
> 时间：2013-02-28T01:53:31.750
> 
> 标签：c#, asp.net-mvc, assemblyinfo

我们的 Web 应用程序中有一个`AssemblyInfo.cs`文件，但我们在同一个解决方案中确实有其他项目。它们主要是类库。我被告知`AssemblyInfo.cs`在我们的 UI 上显示 Assembly Version。我从程序中的[C# AssemblyFileVersion 使用中找到了以下解决方案](https://stackoverflow.com/questions/699580/c-sharp-assemblyfileversion-usage-within-a-program)

```
using System.Reflection;
Version version = Assembly.GetExecutingAssembly().GetName().Version; 
```

或者

```
using System.Reflection;
using System.IO;

FileVersionInfo fv = System.Diagnostics.FileVersionInfo.GetVersionInfo
                               (Assembly.GetExecutingAssembly().Location);

Console.WriteLine("AssemblyVersion : {0}", 
         Assembly.GetExecutingAssembly().GetName().Version.ToString());

Console.WriteLine ("AssemblyFileVersion : {0}" , 
         fv.FileVersion.ToString ()); 
```

但这让我有点困惑。它说`GetExecutingAssembly()`如果它在来自其他类库的另一个程序集上运行怎么办？这些代码会一直从`AssemblyInfo.cs`驻留在 Web 项目中的文件中获取吗？（这就是我想要的）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-28T01:57:21.827

正如文档所述，`Assembly.GetExecutingAssembly()`获取在其中编译调用代码的程序集。

如果你想更明确（更快），你可以写`typeof(SomeType).Assembly`，`SomeType`你正在寻找的项目中的任何类型。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2018-02-07T14:53:34.023

如果你想读取文件，那么你可以这样做。

```
string path = @"d:\AssemblyInfo.cs";
        if (File.Exists(path))
        {
            // Open the file to read from.
            string[] readText = File.ReadAllLines(path);
            var versionInfoLines = readText.Where(t => t.Contains("[assembly: AssemblyVersion"));
            foreach (string item in versionInfoLines)
            {
                string version = item.Substring(item.IndexOf('(') + 2, item.LastIndexOf(')') - item.IndexOf('(') - 3);          
                Console.WriteLine(version);
            }

        } 
```

输出

```
1.0.0.0 
```

# android - 单例与 Android 中 Database Helper 类的静态内部类

> ID：15126115
> 
> 赞同：9
> 
> 时间：2013-02-28T01:53:39.450
> 
> 标签：android, android-contentprovider, android-sqlite

我正在尝试查看哪些实现更适合在 Android 应用程序中访问 sqlite 数据库

# 实施1

使用扩展 SqliteOpenHelper 的 DatabaseHelper 类并使用单例模式。在极少数情况下，我确实会因为数据库关闭而看到崩溃。虽然有点烦人，但我让他们通过只是因为它在宏伟的计划和我拥有的项目数量上是次要的。

```
public class DBHelper extends SQLiteOpenHelper {

        private static DBHelper instance;

        private final String CREATE_HEALTH_DATA_TABLE = "CREATE TABLE IF NOT EXISTS my_table ( " 
        + BaseColumns._ID   + " INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "
        + MT_FIELD_NAME     + " TEXT NOT NULL );";

        private DBHelper getInstance(Context c) {
             if (instance == null) {
                  instance = new DBHelper(c);
             }
             return instance;
        }

        private DBHelper(Context c) {
             super(c, "my_database.sqlite", null, 0);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_TABLE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}

    } 
```

# 实施 2

实现这一点的另一种方法是将帮助程序类创建为 Content Provider 类中的静态内部类。这就是示例中记事本示例中的操作方式。

```
public class DataProvider extends ContentProvider {

    /*..Content provider implementation only dbhelper variable and onCreate are shown */

    private MTDBHelper dbHelper;

    @Override
    public boolean onCreate() {
         dbHelper = new DBHelper(getContext());
         return true;
    }

    private static class DBHelper extends SqliteOpenHelper {

    /// Implementation without making it a singleton

    }

} 
```

其中哪一个是更好或标准的事情方式，为什么。我猜这是第二种方法，因为它是一个内部私有类，但希望获得专家意见。

如果这很重要，我总是使用内容提供者。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:09:03.857

我也不做。我有一个扩展的非静态类`SqliteOpenHelper`。每当我需要数据库时，我都会通过创建一个新`DBHelper`实例来打开它，做我需要做的事情，然后立即关闭它，只有在我需要时才重新打开它。这种实现可能会遇到两段代码尝试同时修改数据库的情况。为避免这种情况，请将每个方法包装在同步块中。我对这种方法没有任何问题。

# php - 用链接替换单词

> ID：15126119
> 
> 赞同：0
> 
> 时间：2013-02-28T01:54:23.480
> 
> 标签：php, mysql, drupal

在我的网站上，我有天主教百科全书。它有超过 11,000 篇文章。

我有兴趣将我网站上文章中的单词和短语替换为天主教百科全书中相关条目的链接。所以，如果有人说：

> 圣彼得是第一位教皇。

它应该用指向关于圣彼得的文章的链接替换圣彼得，用指向关于教皇的文章的链接替换教皇。

我有它的工作，但它很慢。有超过 30,000 种可能的替换，因此优化很重要。我只是不确定从这里去哪里。

这是我现有的代码。请注意，它使用的是 Drupal。此外，它用 [cathenlink] 标记替换单词，并且该标记稍后在代码中被真实的 HTML 链接替换。

```
function ce_execute_filter($text)
{

    // If text is empty, return as-is
    if (!$text) {
        return $text;
    }

    // Split by paragraph
    $lines = preg_split('/\n+/', $text, -1, PREG_SPLIT_DELIM_CAPTURE);

    // Contains the parsed and linked text
    $linked_text = '';

    foreach ($lines as $line)
    {

        // If this fragment is only one or more newline characters,
        // Add it to $linked_text and continue without parsing
        if (preg_match('/^\n+$/', $line)) {
            $linked_text .= $line;
            continue;
        }

        // Select any terms that might be in this line
        // Ordered by descending length of term,
        // so that the longest terms get replaced first
        $result = db_query('SELECT title, term FROM {catholic_encyclopedia_terms} ' .
                "WHERE :text LIKE CONCAT('%', CONCAT(term, '%')) " .
                'GROUP BY term ' .
                'ORDER BY char_length(term) DESC',
                array(
                    ':text' => $line
                    ))
            ->fetchAll();

        // Array with lowercase term as key, title of entry as value
        $terms = array();

        // Array of the terms only in descending order of length
        $ordered_terms = array();

        foreach ($result as $r)
        {
            $terms[strtolower($r->term)] = $r->title;
            $ordered_terms[] = preg_quote($r->term);
        }

        // If no terms were returned, add the line and continue without parsing.
        if (empty($ordered_terms)) {
            $linked_text .= $line;
            continue;
        }

        // Do the replace
        // Get the regexp by joining $ordered_terms with |
        $line = preg_replace_callback('/\b('.
                    implode('|', $ordered_terms) .
                    ')\b/i', function ($matches) use($terms)
                {
                if ($matches[1]) {
                return "[cathenlink=" .
                $terms[strtolower($matches[1])] . "]" .
                $matches[1] . "[/cathenlink]";
                }
                },
                $line);

        $linked_text .= $line;
    }

    return $linked_text;
} 
```

我正在这样做 preg_replace 这样它就不会替换一个单词两次。我会使用 strtr，但是没有办法确保它是一个完整的单词，而不仅仅是单词的一部分。

有什么办法可以让这更快吗？现在它很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:56:00.320

好的，我认为我这样做的方式可能是最有效的。我想出的是将结果缓存一周，这样帖子就不必每周解析一次以上。实施此解决方案后，我发现网站的速度有了显着提高，因此它似乎可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:30:42.290

您可以使用诸如 Lucene 之类的索引系统来索引天主教百科全书。我不怀疑它经常变化，因此可以每天更新索引。Lucene 是用 Java 编写的，但我知道 Zend 有一个可以读取索引的 PHP 模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:05:22.077

我认为`LIKE`关键字会减慢您的速度。是`indexed`吗？

[你可以在这里](https://stackoverflow.com/questions/10354248/optimizing-mysql-like-string-queries-in-innodb)找到一些线索

# ant - 捕获构建失败 Ant

> ID：15126120
> 
> 赞同：1
> 
> 时间：2013-02-28T01:54:31.153
> 
> 标签：ant

我正在使用并行任务来测试和关闭我的服务器。

这是代码：

```
 <target name="runandtest" description="run the server and test it">
          <parallel  timeout="1380000">
            <sshexec host="XXX.XX.XX.XX" username="XXXXX" password="xxxxxxxxx" trust="true" command='cd test;nohup bin/server > log.txt'/>
            <sequential>
              <sleep seconds="1200"/>
              <!-- run test-->
               <scp file="XXXXXX:XXXXXX@XXX.XX.XX.XX:/home/XXXXX/test/log.txt" todir="/ant/" trust="true" />           
               <mail enableStartTLS="true" mailhost="smtp.gmail.com" mailport="587" user="XXXXXXX" password="XXXXXXX" subject="Run test"  from="XXXXXXXX" tolist="XXXXXXX" files="log.txt" message="blabla"/>
            <!-- FAIL BELOW  -->       
               <sshexec host="XXX.XX.XX.XX" username="XXXX" password="XXXXX" trust="true" command="kill $(ps aux | grep '[s]erver' | awk '{print $2}')"/>
            </sequential>
          </parallel>
        </target> 
```

在我写评论的地方构建失败。

这确实很合乎逻辑，因为一旦我的测试完成，我只需在同一台服务器上 ssh 并终止第一个并行任务的进程。

但是在我的运行-测试-关机过程中，这是一个完全正常的行为，所以我想知道是否有可能捕获这个 BUILD FAIL 错误，以便我的 ant 项目可以继续。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:03:27.453

Ant [sshexec](http://ant.apache.org/manual/Tasks/sshexec.html)任务有一个`failonerror`默认为 true 的属性 - 也许您可以为您的关闭目标将其设置为 false。

# android - 将以“content//:”或“/data/..”开头的路径转换为 URI

> ID：15126121
> 
> 赞同：1
> 
> 时间：2013-02-28T01:54:46.310
> 
> 标签：android

我有两种类型的文件路径，一种是从我的 sqlite db 中获取的，另一种是从本地获取的。

来自 db 的格式如下“content://mnt/sdcard/data/download/image1” 而本地的格式为“/data/data/com.mytestapp/files/image1.png”

我需要在不知道我得到哪一个的情况下将两者都转换为 URI。有没有办法做到这一点？

从反复试验看来， Uri.parse 在第二种类型上不起作用，因为它没有添加前缀 file:/// 。

URI.fromFile 不适用于第一种类型，因为它变为 file:///content:/.....etc

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:01:43.317

```
File file = new File(path);
if(file.exists()) {
    return Uri.fromFile(file);
}
else {
    return Uri.parse(path);
} 
```

# ruby-on-rails-3 - Rails 3.2 - 为什么覆盖 [] 会混淆 has_many 关系？

> ID：15126125
> 
> 赞同：1
> 
> 时间：2013-02-28T01:55:05.553
> 
> 标签：ruby-on-rails-3, activerecord, has-many

我正在将旧版 Rails 应用程序从 3.0 升级到 3.2，并且遇到了一些来自 ActiveRecord 的非常令人费解的行为。我有两个非常简单的模型：

```
class Newsletter < ActiveRecord::Base
  has_many :newsletter_entries

  def [](key)
    # Weird old code, not related to NewsletterEntry
  end

  # etc.
end 
```

和

```
class NewsletterEntry < ActiveRecord::Base
  belongs_to :newsletter

  # etc.
end 
```

在我的 Rails 3.0 分支中，一切正常。但是在我的 Rails 3.2 分支中，无论出于何种原因，在时事通讯上调用 newsletter_entries 总是返回空。查看 SQL 语句，很快发现 ActiveRecord 总是在 newsletter_entries 表中搜索 newsletter_id=NULL 的条目，而不管我正在处理的 Newsletter 的实际主键是什么。考虑此控制台输出末尾的 SQL：

```
> newsletter = Newsletter.create! :title => "Proof of Concept"
### SQL and irrelevant fields omitted
=> #<Newsletter id: 13, title: "Proof of Concept", created_at: "2013-02-28 00:44:25", updated_at: "2013-02-28 00:44:25"> 

> newsletter.newsletter_entries
  NewsletterEntry Load (0.4ms)  SELECT `newsletter_entries`.* FROM `newsletter_entries` WHERE `newsletter_entries`.`newsletter_id` IS NULL
=> [] 
```

经过大量的哀号和咬牙切齿后，我将问题追溯到 Newsletter 模型上的自定义 [] 方法 - 删除它，一切都恢复正常。这种覆盖一开始就是一种代码味道，现在我知道源头就可以轻松解决问题了——但是整个事件让我对 [] 在 ActiveRecord 关系中的作用产生了病态的好奇。谁能向我解释这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:12:54.577

您的`Newsletter`类继承自`ActiveRecord::Base`中定义的`activerecord/lib/active_record/base.rb`。

里面包含的模块之一`class Base`是`AttributeMethods`，它在`activerecord/lib/active_record/attribute_methods.rb`.

并且定义了方法：

```
# activerecord/lib/active_record/attribute_methods.rb
def [](attr_name)
  read_attribute(attr_name) { |n| missing_attribute(n, caller) }
end 
```

这就是您的代码破坏 Rails 代码的地方。

如何找到这个：

*   克隆 Rails 存储库。
*   查找全部`def []`：执行`grep -r 'def \[\]' ./activerecord/`
*   查找`class Base`：执行`grep -r 'class Base' ./activerecord/`
*   打开这个类并将所有`def []`搜索结果与包含在`class base`（类本身定义在文件底部附近）中的模块进行比较`activerecord/lib/active_record/base.rb`。

# c - 错误：结构未正确定义

> ID：15126129
> 
> 赞同：0
> 
> 时间：2013-02-28T01:55:27.777
> 
> 标签：c, struct, c-preprocessor, gpio

我正在用 beaglebone 做一些 GPIO，目前在我的代码中有这个：

```
#include <linux/gpio.h>         //for GPIO

char label[] = "sys/kernel/debug/gpio";

struct gpio xx[] = {
    { gpio1, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio2, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio3, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio4, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio5, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio6, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio7, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio8, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio9, GPIOF_DIR_OUT|GPIOF_INIT_LOW, label },
    { gpio10, GPIOF_DIR_OUT|GPIOF_INIT_HIGH, label },
    }; 
```

其中 gpio#, 都定义为整数。GPIOF_DIR_OUT 和 GPIOF_DIR_LOW 是“linux/gpio.h”中的函数。

该结构未在函数内部声明。我相信这是我的问题，但我不确定它是如何被宣布为错误的。我已经看到了其他线程，但对我的问题没有任何帮助。我认为问题在于我正在从我的结构中调用一个函数。如果有人可以验证或帮助我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:16:37.563

如果`gpio1`through`gpio10`是整数，如您所说，那么您在这里声明的内容，正如编译器所说，是无效的。C 中的全局变量初始化器必须是*常量表达式*，这意味着不允许使用变量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:18:52.030

> [...] 其中 gpio#, 都定义为整数 [...]

我假设您的意思可能是：

```
const int gpio1 = 42;
const int gpio2 = 84;
const int gpio3 = 43;
// etc. 
```

但是，由于`xx`是在全局范围内初始化的，所以它是在编译时分配和初始化的。但是，根据我的假设，`gpio1`朋友是在运行时分配和初始化的，所以很明显编译器会告诉你它不能初始化`xx`。

您将需要使用常量表达式（或将扩展为文字常量的宏）才能使其工作。例如，你会这样做：

```
enum {
    gpio1 = 42, 
    gpio2 = 84, 
    gpio3 = 43, 
    // etc.
}; 
```

...或者：

```
#define gpio1 42
#define gpio2 84
#define gpio3 43
// etc. 
```

在你问之前，`label`在这个上下文中衰减成一个指向字符串文字的指针。这使它成为一个常量表达式，所以这个是允许的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:24:22.220

制作`gpio1`etc`const`值，它将编译，例如：

```
const unsigned gpio1 = 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T02:19:01.433

GPIOF_DIR_OUT、GPIOF_INIT_LOW、GPIOF_INIT_HIGH 是宏，不是函数。所以这不是原因。

我认为这个问题可能与 gpio1~gpio10 的定义有关，这些东西是变量还是宏？

# excel - 列表框的宏：将索引公式添加到链接单元格

> ID：15126130
> 
> 赞同：0
> 
> 时间：2013-02-28T01:55:34.633
> 
> 标签：excel, listbox, excel-2010, vba

我创建了一个列表框（xactive 控件），其宏如下所示：

```
Private Sub Workbook_Open()

    With Sheet1.ListBox1
       .AddItem "AAA"
       .AddItem "BBB"
       .AddItem "CCC"
       .LinkedCell = "$A$5"
    End With

End Sub 
```

完成列表框，点击“AAA”显示1，点击“BBB”显示2，点击“CCC”显示3。

我在网上搜索了两天，解决方法是将索引公式添加到链接单元格。但是我不能使用索引公式，因为我的列表填充范围在宏中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:28:14.447

**必要的改变**

在 VB 编辑器中，双击 Sheet1 并输入以下代码：

```
Private Sub ListBox1_Change()

    Sheet1.Range("$A$5").Value = ListBox1.ListIndex

End Sub 
```

从您的代码中删除这一行：

```
.LinkedCell = "$A$5" 
```

并再次运行它。现在从您的列表框中选择一个项目。

**可选建议**

只是一个建议，您可以将其用于现有代码。更简洁一点，特别是如果您必须添加更多项目。

```
Private Sub Workbook_Open()
    Dim data() As Variant
    data = Array("AAA", "BBB", "CCC")
    Sheet1.ListBox1.List = data
End Sub 
```

# groovy - groovy 中的 XML 树生成器

> ID：15126131
> 
> 赞同：1
> 
> 时间：2013-02-28T01:55:40.410
> 
> 标签：groovy

给定给定节点的 id 和路径图，我构建一个 xml 树：

```
def trees = [:]
trees.put(1,"TEST/folder1")
trees.put(2,"TEST/folder2")
trees.put(3,"TEST/folder1/folder1.1")
trees.put(4,"TEST/folder2/folder2.1/folder2.1.2")
trees.put(5,"TEST/folder1/folder1.2") 
trees.put(6,"TEST/folder1/folder1.2/folder1.2.1/")                        
trees.put(7,"TEST/folder1/folder1.2/folder1.2.2/")
trees.put(8,"TEST/folder1/folder1.2/folder1.2.2/1.2.2.1")       

sw = new StringWriter()

def rslt = { [:].withDefault{ owner.call() } }().with { t ->
  trees.each { k, v ->
      v.tokenize( '/' ).inject( t ) { tr, i -> tr[ i ] }
  }
  return t
}

new groovy.xml.MarkupBuilder(sw).with {
            visitor = { k, v -> "$k" { v instanceof Map ? v.collect(visitor) : mkp.yield(v) } }
            ROOT { rslt.collect visitor }
        }
println sw.toString() 
```

最后得到这个输出：

```
 <TEST>
    <folder1>
      <folder1.1 />
      <folder1.2>
        <folder1.2.1 />
        <folder1.2.2>
          <1.2.2.1 />
        </folder1.2.2>
      </folder1.2>
    </folder1>
    <folder2>
      <folder2.1>
        <folder2.1.2 />
      </folder2.1>
    </folder2>
  </TEST>
</ROOT> 
```

有没有一种常规的方法来添加从初始树图值继承的属性 id、名称、父深度、url？

格式良好的 xml 文档示例：

```
<folder2 name="folder2" id="2" parent="TEST" depth="1" url="TEST/folder2">
      <folder2.1.1 name="folder2.1.1" id="2" parent="TEST" depth="2" url="TEST/folder2">
           <folder2.1.1.1 name="folder2.1.1.1" id="3" parent="TEST" depth="3" url="TEST/folder2"/>
       </folder2.1.1>
</folder2> 
```

有什么想法或建议吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:29:41.123

我将开始假设您的模型并创建一些模拟数据：

```
class Dir {
  String name, url, id
  Dir parent
  List<Dir> children

  String toString() { "Dir(name:$name, url:$url, parent:$parent)" }
}

dir1 = new Dir( name: "folder1", url: "TEST/folder1", id: "1" )
dir2 = new Dir( name: "folder2", url: "TEST/folder2", id: "2" )
dir11 = new Dir( name: "folder1.1", url: "TEST/folder1/folder1.1", id: "11", parent: dir1 )
dir12 = new Dir( name: "folder1.2", url: "TEST/folder1/folder1.2", id: "12", parent: dir1 )
dir121 = new Dir( name: "folder1.2.1", url: "TEST/folder1/folder1.2/folder1.2.1", id: "121", parent: dir12 )
dir212 = new Dir( name: "folder2.1.2", url:"TEST/folder2/folder2.1/folder2.1.2", id: "212", parent: dir2 )

dir1.children = [dir11, dir12]
dir12.children = [dir121]
dir2.children = [dir212]

dirs = [dir1, dir2] 
```

现在您只需使用 markupbuilder 或 streamingmarkupbuilder 构建 xml 结构，使用 gstrings 创建动态标签：

```
sw = new StringWriter()

def depthCalculator // used to calculate the depth of the folder object
depthCalculator = { Dir dir, Integer count = 1 -> 
  if (dir.parent) depthCalculator dir.parent, count++
  count 
}

new groovy.xml.MarkupBuilder(sw).with {

  setDoubleQuotes true

  /*
   * This closure creates the tag using a gstring for the tag name. 
   * It recursively iterates through every children of the Dir parent object.
   */
  def collector 
  collector = { Dir dir -> 
    def depth = depthCalculator dir
    "${dir.name}" (
          name: dir.name, 
          id: dir.id, 
          url: dir.url, 
          parent: (dir.parent?.name ?: ""), 
          depth: depth) { 
      dir.children.each collector
    }
  }

  dirs.each collector
}

println sw.toString() 
```

这是生成的 XML：

```
<folder1 name="folder1" id="1" url="TEST/folder1" parent="" depth="1">
  <folder1.1 name="folder1.1" id="11" url="TEST/folder1/folder1.1" parent="folder1" depth="2" />
  <folder1.2 name="folder1.2" id="12" url="TEST/folder1/folder1.2" parent="folder1" depth="2">
    <folder1.2.1 name="folder1.2.1" id="121" url="TEST/folder1/folder1.2/folder1.2.1" parent="folder1.2" depth="2" />
  </folder1.2>
</folder1>
<folder2 name="folder2" id="2" url="TEST/folder2" parent="" depth="1">
  <folder2.1.2 name="folder2.1.2" id="212" url="TEST/folder2/folder2.1/folder2.1.2" parent="folder2" depth="2" />
</folder2> 
```

# python - 解析带有字典的列表

> ID：15126133
> 
> 赞同：0
> 
> 时间：2013-02-28T01:55:51.597
> 
> 标签：python, dictionary

我只需要一些关于如何完成以下操作的输入

我有以下输入，我需要获取最新的“Depends-on”标签，然后打印它的值，下面的示例输入和输出......

输入：-

```
[{u'timestamp': 1361325046, u'message': u"Patch Set 1: I would prefer that you didn't submit this\n\n1) Now that this project is mapped to noship, should x-ship be set to none?\n\n2) Make sure that noship_common_HY11/22 are updated to not ship this folder. I see release/crm/noship_common_HY22:LINUX\\android\\vendor\\company\\proprietary\\wlan. This needs to be removed and wlan-noship has to be included in both HY11/22 files. \n\n3) Make a customer variant build and post results. \n\n4) Follow these guidelines for commit text. http://qwiki.company.com/quic/Git#Formatting_Commit_Messages", u'reviewer': {u'username': u'nname', u'name': u'Nagender name', u'email': u'nname@company.com'}}, {u'timestamp': 1361341193, u'message': u'Patch Set 1:\n\nThis change is being verified in lookahead for the following manifests along with other changes as detailed below:\n\n\n\n=====================================================================================\n\ngit-android.company.com/platform/manifest:jb_mr1:default.xml\n\n=====================================================================================\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=723644\n\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  o https://review-android.company.com/#change,252804\n\n\n\nPlease note that verification of all changes in this batch need to be successful before this change can be merged.\n\nPLEASE DO NOT UPLOAD A NEW PATCH SET, OR REMOVE APPROVALS UNTIL THE VERIFICATION IS COMPLETE.\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}, {u'timestamp': 1361344352, u'message': u'Patch Set 1: Fails\n\nFailed lookahead verification. You may find the results of the verification by following the link(s) below:                 If you feel this is an automation error and want it to be re-verified\nplease use https://commander.company.com/commander/runProcedure.php?procedureName=reset_failed_bit&projectName=Android_Main to reset the failed verify bit.\n\nYou may find the results of the verification by following the link(s) below:\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=723644\n\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}, {u'timestamp': 1361477871, u'message': u'Uploaded patch set 2.', u'reviewer': {u'username': u'name', u'name': u'name', u'email': u'name@qca.company.com'}}, {u'timestamp': 1361477872, u'message': u'Patch Set 2:\n\nNew patchset patch-id matches previous patchset, but commit message has changed.', u'reviewer': {u'username': u'gituser', u'name': u'Git User Service Account', u'email': u'gituser@localhost'}}, {u'timestamp': 1361477891, u'message': u'Patch Set 2: Looks good to me, but someone else must approve\n\nYour change has passed all of the checks enforced by the android patch\nchecker.', u'reviewer': {u'username': u'checkpatch', u'name': u'Checkpatch Service Account', u'email': u'checkpatch@localhost'}}, {u'timestamp': 1361491295, u'message': u'Patch Set 2:\n\nDepends-on:254994', u'reviewer': {u'username': u'nname', u'name': u'Nagender name', u'email': u'nname@company.com'}}, {u'timestamp': 1361494370, u'message': u'Uploaded patch set 3.', u'reviewer': {u'username': u'name', u'name': u'name', u'email': u'name@qca.company.com'}}, {u'timestamp': 1361494386, u'message': u'Patch Set 3: Looks good to me, but someone else must approve\n\nYour change has passed all of the checks enforced by the android patch\nchecker.', u'reviewer': {u'username': u'checkpatch', u'name': u'Checkpatch Service Account', u'email': u'checkpatch@localhost'}}, {u'timestamp': 1361535719, u'message': u'Patch Set 3:\n\nThis change is being verified in lookahead for the following manifests along with other changes as detailed below:\n\n\n\n=====================================================================================\n\ngit-android.company.com/platform/manifest:jb_mr1:default.xml\n\n=====================================================================================\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=733150\n\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  o https://review-android.company.com/#change,252804\n\n  o https://review-android.company.com/#change,254994\n\n\n\nPlease note that verification of all changes in this batch need to be successful before this change can be merged.\n\nPLEASE DO NOT UPLOAD A NEW PATCH SET, OR REMOVE APPROVALS UNTIL THE VERIFICATION IS COMPLETE.\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}, {u'timestamp': 1361536209, u'message': u'Patch Set 3: Fails\n\nFailed lookahead verification. You may find the results of the verification by following the link(s) below:                 If you feel this is an automation error and want it to be re-verified\nplease use https://commander.company.com/commander/runProcedure.php?procedureName=reset_failed_bit&projectName=Android_Main to reset the failed verify bit.\n\nYou may find the results of the verification by following the link(s) below:\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=733150\n\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}, {u'timestamp': 1361544517, u'message': u"Patch Set 3: I would prefer that you didn't submit this\n\n(1 inline comment)\n\n", u'reviewer': {u'username': u'name', u'name': u'Satya Durga Srinivasu Prabhala', u'email': u'a_name@company.com'}}, {u'timestamp': 1361560535, u'message': u'Uploaded patch set 4.', u'reviewer': {u'username': u'name', u'name': u'name', u'email': u'name@qca.company.com'}}, {u'timestamp': 1361560553, u'message': u'Patch Set 4: Looks good to me, but someone else must approve\n\nYour change has passed all of the checks enforced by the android patch\nchecker.', u'reviewer': {u'username': u'checkpatch', u'name': u'Checkpatch Service Account', u'email': u'checkpatch@localhost'}}, {u'timestamp': 1361565513, u'message': u'Patch Set 4: Looks good to me, but someone else must approve; Developer Build and Test Successful\n\nFixed all the comments and made a customer-variant build @\n\\\\wbit-linux1\\workspace\\name\\wbit\\LA_builds\\AU_LINUX_ANDROID_JB_MR1.04.02.00.49.041 ,please let me know if anything else is needed', u'reviewer': {u'username': u'name', u'name': u'name', u'email': u'name@qca.company.com'}}, {u'timestamp': 1361594838, u'message': u'Patch Set 4: Looks good to me, approved\n\n', u'reviewer': {u'username': u'nname', u'name': u'Nagender name', u'email': u'nname@company.com'}}, {u'timestamp': 1361833588, u'message': u'Patch Set 4:\n\nDepends-on:254994 258334', u'reviewer': {u'username': u'name', u'name': u'name', u'email': u'name@qca.company.com'}}, {u'timestamp': 1361846437, u'message': u'Patch Set 4: No code review score\n\n', u'reviewer': {u'username': u'name', u'name': u'Satya Durga Srinivasu Prabhala', u'email': u'a_name@company.com'}}, {u'timestamp': 1361922741, u'message': u'Patch Set 4:\n\nThis change is being verified in lookahead for the following manifests along with other changes as detailed below:\n\n\n\n=====================================================================================\n\ngit-android.company.com/platform/manifest:jb_2.5:default.xml\n\n=====================================================================================\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=746359\n\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  o https://review-android.company.com/#change,258334\n\n\n\n=====================================================================================\n\ngit-android.company.com/platform/manifest:jb_mr1:default.xml\n\n=====================================================================================\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=746360\n\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n  o https://review-android.company.com/#change,258334\n\n  o https://review-android.company.com/#change,252804\n\n  o https://review-android.company.com/#change,254994\n\n\n\nPlease note that verification of all changes in this batch need to be successful before this change can be merged.\n\nPLEASE DO NOT UPLOAD A NEW PATCH SET, OR REMOVE APPROVALS UNTIL THE VERIFICATION IS COMPLETE.\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}, {u'timestamp': 1361923330, u'message': u'Patch Set 4: Fails\n\nFailed lookahead verification. You may find the results of the verification by following the link(s) below:                 If you feel this is an automation error and want it to be re-verified\nplease use https://commander.company.com/commander/runProcedure.php?procedureName=reset_failed_bit&projectName=Android_Main to reset the failed verify bit.\n\nYou may find the results of the verification by following the link(s) below:\n\nhttps://commander.company.com/commander/pages/SimplifiedJobView/LoadComponent_run?jobId=746360\n\n', u'reviewer': {u'username': u'lnxbuild', u'name': u'Linux Build Service Account', u'email': u'lnxbuild@localhost'}}] 
```

输出：-

[254994 258334]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:58:30.587

你**不应该有**那个输入；有人只是打印出 Python `repr`s，这是不行的。考虑使用内置[`json`](http://docs.python.org/2/library/json.html#basic-usage)模块在进程之间进行通信。

同时，[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)这是将其转回 Python 结构的唯一安全方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:35:54.110

如果标签总是在消息的末尾，那么`str.rpartition()`可以提取它：

```
tag = "Depends-on:"
latest = max((d for d in data if tag in d["message"]),
             key=lambda d: d["timestamp"])
print(latest["message"].rpartition(tag)[2]) 
```

### [输出](http://ideone.com/GCccxt)

```
254994 258334 
```

# typo3 - TYPO3 v6：如何包含自定义用户表？

> ID：15126137
> 
> 赞同：0
> 
> 时间：2013-02-28T01:56:06.170
> 
> 标签：typo3

免责声明：我对 CMS 和 Typo3 世界很陌生，所以如果有任何我遗漏的地方，请随时编辑。

我想从已经存在的数据库中导入内容以使其可由 Typo3 管理：使用搜索表单执行搜索，并（最终）通过 Typo3 后端模块对其进行编辑。

从我目前的研究情况来看，Typo3 的标准内容是存放在“tt_content”中的，而要添加其他表，则需要使用所谓的 $TCA 数组（参见[Typo3 TCA 参考](http://docs.typo3.org/typo3cms/TCAReference/WhatIsTca/Structure/Index.html)）

幸运的是，所谓的 Kickstarter 扩展将帮助我们创建一个扩展，包括表的 $TCA 和 SQL 定义。不幸的是，它与 6.0 版本不兼容。请参阅[已知不兼容扩展列表](http://wiki.typo3.org/TYPO3_6.0_Incompatible_Extensions_K)。此外，自 v6 版本以来，Kickstarter 没有更新。

如何在 Typo3 6.0 中创建这样的扩展？为什么管理自定义内容如此困难？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:28:27.090

无论如何，Kickstarter 多年来一直被用来创建老派的扩展，因为几年来有创建扩展的新方法 - Extbase。它使用 MVC 模式并基于 FLOW3 理念，因此它将在未来很长一段时间内使用。

使用存储库中最新版本的“Extension Builder”来“启动”您自己的 Extbase ext

**编辑**你需要花一些时间来了解它是如何工作的（尤其是存储库和模型），最好用少量的字段创建一些简单的扩展，并尝试识别它的结构，你会很快熟悉。

然后使用 Builder 的“工作*表视图*”来“*绘制*”当前表格的结构。如果您仔细操作，您几乎可以毫无问题地导入现有数据。可能会有一些差异，但这比从头开始更容易。

# javascript - 使用modernizr 测试视频标签

> ID：15126140
> 
> 赞同：1
> 
> 时间：2013-02-28T01:56:35.367
> 
> 标签：javascript, browser, modernizr

我被分配了一项任务，我必须使用 Modernizr 来检查浏览器是否能够运行某些功能。我已经在 Firefox、Safari 和 chrome 上测试了这段代码。（我在所有三个浏览器中都是最新的）。我的地理定位和本地存储代码有效。但是，我根本无法在浏览器中显示视频。除了加载并将其显示在页面上之外，我并没有尝试对视频做太多事情。我确实收到了警报，尽管它说 video.js 已加载。我的控制台中也出现两个错误“未声明框架文档的字符编码。如果在没有框架文档的情况下查看该文档可能会出现不同”，并且“文本/html”的“HTTP内容类型”不是支持的。媒体资源负载[http://www.youtube.com/watch?v=jVVmsxR67ZE](http://www.youtube.com/watch?v=jVVmsxR67ZE)失败。”关于如何修改或更正它以便加载视频的任何建议？

```
<script src="Modernizr.js"></script>
   <script>
        Modernizr.load([
           "features.js",
           {
               test: Modernizr.geolocation,
               yep: "geolocation.js",
               nope: "noGeolocation.js"
               },
           {
               test: Modernizr.localstorage,
               yep: "localStorage.js",
               nope: "noLocalStorage.js"                             
             },
           {
               test: Modernizr.video,
               yep: "video.js",
               nope: "novideo.js",
               complete: function() {
                 init();
               }
             }            
          ]);
  </script>
</head>
<body>
 <div id="id">
 </div>
 <ul id="features">
 </ul>
</body>

function showVideo() {
 var id = document.getElementById("id");
 var video = document.createElement("video");
 video.setAttribute("src", "http://www.youtube.com/watch?v=uBc7UWZ8-hg"); 
 id.appendChild(video);
 video.play();
 alert("video.js loaded");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:16:53.677

```
 video.setAttribute("src", "http://www.youtube.com/watch?v=uBc7UWZ8-hg"); 
```

src 应该指向一个实际的视频文件，它不是视频文件，它是一个 html 网页。

在尝试使用modernizr之前尝试使您的页面正常工作

# sql - 当多个记录对于“Order By”子句中定义的列具有相同的值时，是否存在从数据库返回的隐式顺序？

> ID：15126143
> 
> 赞同：3
> 
> 时间：2013-02-28T01:56:42.237
> 
> 标签：sql, database, select, sql-order-by

我主要在 Oracle 和 PostgreSQL 数据库中工作，但我很好奇是否有任何通用标准。正如标题所示，我一直在寻找有关`Order By`SQL 语句子句的问题的答案。例如，如果我有一些基本表`Users`：

```
-------------------------------------------
| id |     name     | birth_date | gender |
-------------------------------------------
|  1 |  xx_coolKid  | 12-DEC-1960|   M    |
-------------------------------------------
|  2 |  def@test.co | 24-JUN-1976|   F    |
-------------------------------------------
|  3 |    NULL?     | 30-AUG-1990|   M    |
-------------------------------------------
|  4 |    JeffR     | 12-DEC-1960|   M    |
-------------------------------------------
|  5 |    lol19     | 12-DEC-1960|   F    |
------------------------------------------- 
```

我要运行查询：

```
SELECT * FROM Users ORDER BY gender, birth_date; 
```

`gender`返回的与和都匹配的行是否有任何特定顺序`birth_date`？还是不能保证那些匹配行的返回顺序，就好像没有`ORDER BY`定义子句一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:59:26.963

不保证退货单。这方面没有明确的标准。键具有相同值时的返回顺序是任意的，并且在同一数据库上相同数据的运行之间可能会发生变化。

一些排序算法是稳定的，这意味着输入上的记录顺序是隐式的最终顺序键。但是，数据库通常不实现稳定的排序。

Microsoft SQL[文档](http://msdn.microsoft.com/en-us/library/ms188385.aspx)`order by`实际上很好地解释了这一点：

> 要在使用 OFFSET 和 FETCH 的查询请求之间获得稳定的结果，必须满足以下条件：
> 
> (1) 查询使用的基础数据不得更改。也就是说，查询所涉及的行没有更新，或者查询中的所有页面请求都使用快照或可序列化事务隔离在单个事务中执行。有关这些事务隔离级别的详细信息，请参阅 SET TRANSACTION ISOLATION LEVEL (Transact-SQL)。
> 
> (2) ORDER BY 子句包含保证唯一的列或列组合。

这些条件在大多数数据库中都是正确的。

# jquery - 如何将 li 分组为 ul 然后移动到父 li？

> ID：15126152
> 
> 赞同：0
> 
> 时间：2013-02-28T01:57:21.720
> 
> 标签：jquery, html-lists

假设我有一个这样编码的列表：

```
 <ul id="Folder" name="Folder">
    <li value="0">Top Folder</li>
    <li value="11">2nd Folder 01</li>
    <li value="17" class="third">---3rd Folder 01-01</li>
    <li value="18" class="third">---3rd Folder 01-02</li>
    <li value="383" class="fouth">------4th Folder 01-02-01</li>
    <li value="384" class="fifth">---------5th Folder 01-02-01-01</li>
    <li value="385" class="fifth">---------5th Folder 01-02-01-02</li>
    <li value="386" class="fifth">---------5th Folder 01-02-01-03</li>
    <li value="387" class="fifth">---------5th Folder 01-02-01-04</li>
    <li value="388" class="fifth">---------5th Folder 01-02-01-05</li>
    <li value="19" class="third">---3rd Folder 03</li>
    <li value="20" class="third">---3rd Folder 04</li>
    <li value="22" class="third">---3rd Folder 05</li>
    <li value="130" class="fouth">------5th Folder 01-02-05-01</li>
    <li value="131" class="fouth">------5th Folder 01-02-05-02</li>
    <li value="132" class="fouth">------5th Folder 01-02-05-03</li>
    <li value="133" class="fouth">------5th Folder 01-02-05-04</li>
    <li value="134" class="fouth">------5th Folder 01-02-05-05</li>
    <li value="398" class="fouth">------5th Folder 01-02-05-06</li>
    <li value="158">2nd Folder 02</li>
    <li value="257" class="third">---3rd Folder 02-01</li>
    <li value="258" class="third">---3rd Folder 02-02</li>
    <li value="259" class="third">---3rd Folder 02-03</li>
    <li value="16">2nd Folder 03</li>
    <li value="382" class="third">---3rd Folder 03-01</li>
    <li value="51" class="third">---3rd Folder 03-02</li>
    <li value="113" class="fouth">------4th Folder 03-02-01</li>
    <li value="125" class="fouth">------4th Folder 03-02-02</li>
    </ul> 
```

我使用了jquery：

```
 $('li.fifth').wrapAll('<ul>');
    $('li.fouth').wrapAll('<ul>');
    $('li.third').wrapAll('<ul>'); 
```

所以我可以将所有的第 5、4 和 3 li 组合成一个组。

我现在遇到的问题是，如何将第 5 个 ul 组移动到第 4 个 li 父级？和第 4 ul 组到第 3 li 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:54:54.113

我没有看到使用方法`.wrapAll`。

相反，我使用了`prev + next`选择器。

下面的代码获取`<li class="fifth">`紧随`<li class="fouth">`. 然后它备份到前一个元素，即`<li class="fouth">`. 然后它创建一个`<ul>`并开始将`<li class="fifth">`元素移动到其中。最后，它将`<ul>`放在`<li class="fouth">`.

注意：`<ul>`是在 DOM 之外构建的，然后插入到 DOM 中。这样，DOM 永远不会处于无效状态，其中 a`<ul>`是 an 的兄弟姐妹`<li>`或类似的东西。

我将代码放在一个可以反复调用的函数中。

```
function moveToParent(parentClass, childClass) {
    $('li.' + parentClass + ' + li.' + childClass).each(function(e) {
        var $parentFolder = $(this).prev();
        var $ul = $('<ul/>');
        while ($parentFolder.next().is('li.' + childClass)) {
            $parentFolder.next().appendTo($ul);
        }
        $parentFolder.append($ul);
    });
}

moveToParent('fouth', 'fifth');
moveToParent('third', 'fouth'); 
```

[jsfiddle 上的现场演示](http://jsfiddle.net/xJM3V/1/)

注意：我将“fourth”拼错为“fouth”，因为那是您在 html 中的内容。

# c# - WPF：绑定到对象的属性；当对象改变时会发生什么？

> ID：15126157
> 
> 赞同：4
> 
> 时间：2013-02-28T01:57:59.460
> 
> 标签：c#, wpf, data-binding

假设您有一个具有属性的对象和一个绑定到该对象的属性的控件。当该对象更改时会发生什么？

例如，视图模型：

```
public class TheViewModel : INotifyPropertyChanged
{
        private TheObjectClass theObject;
        public TheObjectClass TheObject
        {
            get { return theObject; }
            set { theObject = value; 
                  OnPropertyChanged("TheObject"); }
        }
} 
```

对象的类：

```
public class TheObjectClass : INotifyPropertyChanged
{
        private ThePropertyClass theProperty;
        public ThePropertyClass TheProperty
        {
            get { return theProperty; }
            set { theProperty= value; 
                  OnPropertyChanged("TheProperty"); }
        }
} 
```

物业等级：

```
public class ThePropertyClass : INotifyPropertyChanged
{
        private object objectToBindTo;
        public object ObjectToBindTo
        {
            get { return objectToBindTo; }
            set { objectToBindTo= value; 
                  OnPropertyChanged("ObjectToBindTo"); }
        }
} 
```

然后在一个窗口（将 ViewModel 设置为 DataContext）中，您有一个绑定到该对象的控件，例如：

```
<TextBlock Text={Binding TheObject.TheProperty.ObjectToBindTo}/> 
```

然后在某处重置 ViewModel.TheObject（在绑定完成后）：

```
ViewModel.TheObject = new TheObjectClass(); 
```

在我的测试中（不是专门针对此代码，这只是我的应用程序中代码的简化示例），有时绑定会存活，有时会停止工作。我应该期待在这里发生什么？对我来说，当父对象实例化为另一个对象时，属性绑定会中断，这似乎是合乎逻辑的，但有时它似乎仍然存在，这真的让我感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T02:04:20.917

通常，这是受支持的操作，并且绑定应该始终“存活”。WPF 绑定系统在 上看到属性更改通知`TheObject`，并应将绑定重置为新的子对象。

在实践中，绑定偶尔会无法生存，但这通常是因为在某个时间点，链上的一个对象变为`null`，然后会破坏绑定。如果一个对象变为`null`，WPF 会有效地取消订阅`PropertyChanged`调用（因为没有要监听的对象），并且永远不会看到设置了新值，这反过来又会阻止它运行。

# jquery - jquery-ui datepicker没有出现

> ID：15126158
> 
> 赞同：0
> 
> 时间：2013-02-28T01:58:00.873
> 
> 标签：jquery, jquery-ui, datepicker

我试图用 jquery-ui 做一些代码我想知道为什么它不工作

我的html代码是

```
<a>open form</a>
<div></div> 
```

我的js代码是

```
$(document).ready(function(){
    $("a").click(function(){
        $.ajax({
            url:"data.php",
            success:function(data){
                $("div").html(data);
            }
        });
    });
})
$(function(){
    $("input").on('click', function(){ $(this).datepicker(); });
}); 
```

和 data.php 包含

```
<input type="text" /> 
```

结果是，为什么日期选择器没有出现..？

另一个问题就像这段代码

```
(document).ready(function(){
    $("a").click(function(){
        $("div").html("<input id='datepicker'><input id='tb_submit' type='submit' value='Submit' />");
    });
})
$(function(){
    $("body").on('click', "input#datepicker",function(){ $(this).datepicker(); });
    $("body").on('click','input#tb_submit',function(){$(this).button();})
}); 
```

应该单击该按钮，然后显示真正的按钮。你有解决方案吗？？

实时代码：http: [//jsfiddle.net/5Ps6P/28/](http://jsfiddle.net/5Ps6P/28/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:05:52.157

试试这个代码：

```
$(function(){
    $(document).on('click', "input",function(){ $(this).datepicker(); });
}); 
```

使用此代码：

```
$(document).ready(function(){
    $("a").click(function(){
        $("div").html("<input id='datepicker'><input id='tb_submit' type='submit' value='Submit' />");
        $("input#datepicker").datepicker();
        $('input#tb_submit').button();
    });
}) 
```

您只需在添加后初始化它，不需要自己绑定点击处理程序。

这是jsfiddle。[http://jsfiddle.net/5Ps6P/30/](http://jsfiddle.net/5Ps6P/30/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:05:15.357

尝试将您的代码更改为：

**编辑：**

```
$(document).ready(function(){
    $("a").click(function(){
        $.ajax({
            url:"data.php",
            success:function(data){
                var newInput = $(data);
                newInput.datepicker();
                $("div").html(newInput);
            }
        });
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:05:16.837

```
This should work :
$(document).ready(function(){

$("a").click(function(){
    $("div").html("<input id='datepicker' type='text'>");
     $("#datepicker").datepicker();
});

 }) 
```

但是我建议隐藏输入并在单击链接时显示它。这将确保您的事件在创建 DOC 时绑定到输入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T02:07:45.423

尝试使用 live() jQuery 函数来监听页面加载后插入的元素。

```
// listen to clicks on input elements
$('input').live('click', function() {

  // apply datepicker to this input element
  $(this).datepicker();
}); 
```

为匹配当前选择器的所有元素附加一个事件处理程序，**现在和将来**。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

# winapi - Windows 损坏的小型转储

> ID：15126161
> 
> 赞同：1
> 
> 时间：2013-02-28T01:58:31.020
> 
> 标签：winapi, minidump, dbghelp, minidumpwritedump

当我的程序崩溃时，它会从未处理的异常处理程序中创建一个小型转储。我遇到的问题是人们向我发送故障转储，但是当我尝试在 Visual Studio 2010 中打开它们时，它说它们已损坏（“转储文件的格式无效”）。我没有分发`dbghelp.dll`我的程序，我需要吗？我假设如果是版本问题，Visual Studio 会让我知道并且不会输出上述消息。

我用来生成日志的代码是

```
LONG WINAPI OnUnhandledException(PEXCEPTION_POINTERS pExceptionInfo)
    {
        MINIDUMP_EXCEPTION_INFORMATION ei;
        ei.ExceptionPointers = pExceptionInfo;
        ei.ThreadId = GetCurrentThreadId();
        ei.ClientPointers = FALSE;

        DWORD dwProcessId = GetCurrentProcessId();
        SYSTEMTIME stLocalTime;
        GetLocalTime(&stLocalTime);
        wchar_t CrashDumpW[1024];
        swprintf_s(CrashDumpW, NELEMS(CrashDumpW), 
                L"%s\\%s-%s-%04X-%04d%02d%02d-%02d%02d%02d-%ld-%ld.dmp", 
                g_CrashDirectory.c_str(), L"Program", MAJOR_VERSION_STR, 
                INTERNAL_VERSION, stLocalTime.wYear, stLocalTime.wMonth,
                stLocalTime.wDay, stLocalTime.wHour, stLocalTime.wMinute, 
                stLocalTime.wSecond, dwProcessId, ei.ThreadId);

        HANDLE hFile = CreateFileW(CrashDumpW, GENERIC_READ | GENERIC_WRITE,
            NULL, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
        MiniDumpWriteDump(GetCurrentProcess(), dwProcessId, hFile, 
            MiniDumpScanMemory, &ei, NULL, NULL);
        CloseHandle(hFile);

        return EXCEPTION_EXECUTE_HANDLER;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T19:23:51.137

这可能是由某人调试您的进程引起的。我注意到，如果一个进程附加了调试器，它产生的小型转储通常会以完全相同的方式损坏。它们的尺寸比正常生产的要小。

由于您`EXCEPTION_EXECUTE_HANDLER`从处理程序返回，默认的未处理异常处理程序将在您的处理程序之后执行，这可能会导致 DrWatson 发挥作用并作为调试器附加到您的进程。

# ssrs-2008 - 在 SSRS 中使用条件来提高可见性

> ID：15126166
> 
> 赞同：3
> 
> 时间：2013-02-28T01:58:52.030
> 
> 标签：ssrs-2008, visibility, conditional-statements

在我创建的 SSRS (BIDS) 2008 报告中，我有一个条件语句，我试图用它来确定列中项目的可见性。

与此几乎相同的表达式适用于“常规”选项卡，但不适用于“可见性”选项卡。尝试预览报告时出现以下错误

> 本地报告处理过程中发生错误。文本框“状态”中使用的隐藏表达式返回的数据类型无效。

我已经粘贴了下面的条件供您参考。可见性表达式的规则/格式与常规选项卡的规则/格式是否不同？谢谢！

```
=IIf(Fields!tagname.Value="3981.CompA1.Bool.CompA1StatusOnline"
And Fields!Status.Value="0","True",
iif(Fields!tagname.Value="3981.CompA1.Bool.CompA1StatusFaulted"
And Fields!Status.Value="1","True",
iif(Fields!tagname.Value="3981.CompA1.Bool.CompA1StatusOffline"
And Fields!Status.Value="0","True","False"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:53:35.777

尝试使用`true`而不是`"true"`.

# c# - FullCalendar 事件添加和更新示例

> ID：15126168
> 
> 赞同：4
> 
> 时间：2013-02-28T01:59:17.303
> 
> 标签：c#, jquery, asp.net, ajax, fullcalendar

我一直在查看 FullCalendar 文档。

根据我收集的信息，日历通过使用 start 和 end 参数转到其 url 并期望 json 作为回报来从源中获取数据。没关系，例子表明了这一点。

然而，更新的工作方式尚不清楚。

举个例子，事件丢弃[http://arshaw.com/fullcalendar/docs/event_ui/eventDrop/](http://arshaw.com/fullcalendar/docs/event_ui/eventDrop/)

在更新我的数据库方面我应该如何处理这个问题。我应该做一个ajax调用`Update.aspx?id=event.id....`

这是我应该如何进行更新吗？

另外，我想知道revert func。我想要这个有两个原因：如果我的 ajax 调用失败，如果我的 ajax 调用返回 db update failed。我怎样才能通过revert

一起说

```
: success(data) {
} 
```

如果有人在每个必需的事件中都有一个带有 ajax 调用的示例，那就太好了。服务器端的东西我没有问题，我只是不清楚我应该对我的网站进行哪些 ajax 调用来更新什么是合适的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:09:06.923

您可以调用 ajax 调用来更新某些事件，然后刷新日历：

```
eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
    var id = event.id.toString();
    var start = (event.start.getTime()/1000).toString();
    var end = (event.end.getTime()/1000).toString();
    url = '/some/function/for/update/'+id+'/'+start+'/'+end+'/';
    $.ajax({
        url: url,
        success: function(){
            $('#id_of_calendar').fullCalendar( 'refetchEvents' );
            #generate some message here
        },
        error: function(){
            $('#id_of_calendar').fullCalendar( 'refetchEvents' );
            #generate some message here
        }
    });
}, 
```

# c++ - 这个警告好吗 - “#368-D: 没有定义构造函数来初始化以下内容：“？

> ID：15126171
> 
> 赞同：0
> 
> 时间：2013-02-28T01:59:56.437
> 
> 标签：c++, constructor, compiler-warnings

在我的 C++ 代码中，我有一个结构类型的对象的 const 数组。这个结构有一些 const 成员。

我的硬件编译器（GHS Multi2000）抛出警告：

> 警告#368-D：类没有定义构造函数来初始化以下内容：

这个警告好吗？我在网上看到这个可以忽略。只是编译器期望在构造函数初始化列表中初始化 const 成员。可以取消此警告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:17:18.143

警告没问题，而且有意义。`const`如果没有初始化器，您希望这些成员具有什么价值？那么为什么不删除它们呢？

# validation - symfony2 断言继承

> ID：15126174
> 
> 赞同：0
> 
> 时间：2013-02-28T02:00:12.857
> 
> 标签：validation, symfony

我正在使用 Symfony2。
我有两个班级：`employee`和`physician`。`doctor`是 的子类`employee`。

实体`employee`：

```
@UniqueEntity(fields={"email"}, message="Este valor ya se ha utilizado.") 
```

当我唯一实体时，有效的电子邮件字段仅针对员工和医生分别进行验证。

如果我插入employee3`mail1@mail.com`错误断言symfony2 工作正常
如果我插入医生2`mail3@mail.com`错误断言symfony2 工作正常
如果我插入医生2`mail1@mail.com`显示错误sql 但没有错误断言symfony2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:37:39.420

这是`UniqueEntityValidator`课程的一部分：

```
$repository = $em->getRepository($className);
$result = $repository->{$constraint->repositoryMethod}($criteria);

/* If the result is a MongoCursor, it must be advanced to the first
 * element. Rewinding should have no ill effect if $result is another
 * iterator implementation.
 */
if ($result instanceof \Iterator) {
    $result->rewind();
}

/* If no entity matched the query criteria or a single entity matched,
 * which is the same as the entity being validated, the criteria is
 * unique.
 */
if (0 === count($result) || (1 === count($result) && $entity === 
    ($result instanceof \Iterator ? $result->current() : current($result)))) {
    return;
} 
```

如您所见，`$em->getRepository($className)`将用作存储库。问题是，如果没有`repositoryMethod`选项，Symfony 将使用`findBy`Doctrine 的方法，在每个存储库中都可用，甚至是继承自`EntityRepository`.

当您的实体是 时，Symfony 将**仅在员工中**`Employee`寻找具有给定字段的现有实体：

 **```
$em->getRepository('AcmeHelloBundle:Employee')->findBy($criteria); 
```

当实体是`Physician`（**仅在医生中查看**）时也会发生同样的情况：

```
$em->getRepository('AcmeHelloBundle:Physician')->findBy($criteria); 
```

引用你的话：

> 如果我插入 employee3 mail1@mail.com 错误断言 symfony2 工作正常

那是因为没有电子邮件为 mail1@mail.com 的员工

> 如果我插入医生2 mail3@mail.com 错误断言 symfony2 工作正常

出于与上述相同的原因。

> 如果我插入医生2 mail1@mail.com 显示错误 sql 但没有错误断言 symfony2

这就是问题所在！没有mail1@mail.com 邮箱的医生！有一位员工使用相同的电子邮件，但在`findBy`针对医生存储库使用时，它返回`0`.

也许您应该将选项设置为**将查找****或****使用数组作为条件进行搜索**`repositoryMethod`的存储库方法。**`employee``physician`****

# objective-c - 如何在objective-c中从电话号码中删除非数字字符？

> ID：15126175
> 
> 赞同：15
> 
> 时间：2013-02-28T02:00:23.340
> 
> 标签：objective-c, phone-number

这是我第一次尝试制作 ios 应用程序。

我正在使用人员选择器向用户询问电话号码，但是当它使用下面的代码检索时，我的`NSString *phone`显示为 (0) 111192222-2222。我来自巴西，这里正确的手机号码掩码是 (01111) 92222-2222（9 是可选的，有些号码没有其他号码）。如何修复这个面具？还是完全删除？

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
{
    ABMultiValueRef multiValue = ABRecordCopyValue(person, property);
    CFIndex index = ABMultiValueGetIndexForIdentifier(multiValue, identifier);
    NSString *phone = (__bridge NSString *)ABMultiValueCopyValueAtIndex(multiValue, index);
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-28T03:47:45.970

看到这个答案：[https ://stackoverflow.com/a/6323208/60488](https://stackoverflow.com/a/6323208/60488)

基本上：

```
NSString *cleanedString = [[phoneNumber componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""]; 
```

对于您的情况，您可能希望从字符集中删除字符“-”、“（”和“）”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:44:47.193

您可以使用一些 NSString 和 NSMutableString 的方法：

```
NSString *phone=@"(0) 111192222-2222";
//I'm from Brazil and here the correct mask for mobile phone numbers is (01111) 92222-2222
NSMutableString *editPhone=[NSMutableString stringWithString:[phone stringByReplacingOccurrencesOfString:@")" withString:@""]];
editPhone=[NSMutableString stringWithString:[editPhone stringByReplacingOccurrencesOfString:@" " withString:@""]];

[editPhone insertString:@") " atIndex:6];

NSLog(@"%@",editPhone);//(01111) 92222-2222 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T03:13:59.837

我认为有办法解决这个问题：

1.  使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)删除除数字之外的任何内容。您可以[在此处](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)或[此处查看](https://stackoverflow.com/questions/5478170/regular-expression-in-ios)以了解如何验证电话号码。
2.  编写您自己的扫描仪以删除您不需要的字符。[删除空格](https://stackoverflow.com/questions/10426194/how-to-identify-and-remove-newline-and-white-spaces)或[删除除数字以外](https://stackoverflow.com/questions/1129521/remove-all-but-numbers-from-nsstring)的所有内容。
3.  使用[UITextFieldDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)，编写 `textField:shouldChangeCharactersInRange:replacementString:`方法，检查替换字符串是否在 0-9 范围内。

希望有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T02:15:51.333

我会使用正则表达式来验证电话号码，而不是自杀来制作自定义键盘，iOS 更新可以更改这些功能。因此，允许所有字符并在代码中验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-27T11:56:34.333

**SWIFT 5.0**解决方案

```
let purePhoneNumber = phoneNumber.replacingOccurrences(of: "[^0-9]", 
                                                       with: "", 
                                                       options: .regularExpression) 
```

如果要留下`+`登录字符串，可以使用 regexp `[^0-9+]`。

# android - 我可以将任何设计模式应用于 Android 位置管理器帮助程序类吗？

> ID：15126178
> 
> 赞同：1
> 
> 时间：2013-02-28T02:00:37.063
> 
> 标签：android, design-patterns, memory-management, location

我正在为我的 android 项目编写一个**位置管理器助手类**。助手类应该能够从应用程序模块中的任何位置使用和检索位置信息。我想知道是否有任何**合适的设计模式**可以应用于它。

我正在考虑在位置帮助程序类中使用像**单例**这样的设计模式，因为我可以立即检索位置信息，而无需为每个活动类提供单独的位置管理器对象。但是**在删除位置更新时会出现问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:52:21.100

可能是某种单例类，因此您可以从代码中的任何位置访问以获取所需的信息。

问题是 android 中的当前位置管理器已经作为服务实现，所以基本上你可能正在寻找的是某种“门面”

看：

立面 - [http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)

单例 - [http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

服务 - [http://en.wikipedia.org/wiki/Service_layers_pattern](http://en.wikipedia.org/wiki/Service_layers_pattern)

# c++ - 迭代器究竟是如何工作的？（多项选择）

> ID：15126181
> 
> 赞同：0
> 
> 时间：2013-02-28T02:00:44.873
> 
> 标签：c++, linked-list

我很困惑为什么这个多项选择题的最终答案（选择 e.）是错误的：

```
Which of the following statements is the most accurate regarding linked lists?

a. Linked-lists take up more space than STL vectors because they allocate extra storage 
space for future growth.
b. The asymptotic complexity of inserting at the end of a doubly-linked list container 
storing only the pointer to the first element is O(1).
c. A loop in a singly-linked-list can be found in O(log(n)) time and O(n) memory overhead
d. A loop in a singly-linked-list can be found in O(n) time and O(1) memory overhead.
e. The number of elements in a linked-list is end_ptr -start_ptr + 1, where start_ptr points
to the first element in the linked list and end_ptr points to the last item of the linked-list. 
```

也就是说，为什么两者都不*是*d。和 e。正确的？在什么情况下，迭代器会返回带有 的大小`end_ptr-start_ptr+1`，在什么情况下不会？选择应该`end_ptr-start_ptr`改为说明吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:05:16.000

链表不能保证是连续的（事实上，从来都不是——至少在现实世界中不是）。

这意味着减去它们的迭代器不能是一个恒定的时间操作（好吧，它可能是，但不是没有做出不希望的权衡）。

通常，除非它是一个常数时间操作，否则不会在迭代器上定义减号和加号运算符。

* * *

此外，即使您可以减去它们，迭代器也会指向最后一个元素，而不是最后一个元素。这意味着`length = end - begin`. 不需要加一。

例如，使用`std::vector`：

```
size_t len = v.end() - v.begin(); 
```

（尽管您通常只使用`v.size()`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:05:27.650

与向量不同，列表中的项目不存储在连续的位置。所以链表.end() 应该为 null 以标记列表的结尾。这就是为什么您无法通过算术获得列表大小的原因。此外，end 指向一个无效项，即最后一个有效元素之后的一项。

# ruby-on-rails - 你会如何重构这个

> ID：15126188
> 
> 赞同：0
> 
> 时间：2013-02-28T02:01:59.893
> 
> 标签：ruby-on-rails, refactoring

'定义显示

```
 @dept = Dept.find(params[:id])
    @members = @dept.members_list.collect{|a|a.name}
    dif = @dept.users.collect{|a|[a.name,a.id]}
    @admin_list = @dept.admin_users.collect{|a|a.user}
   @not_member_users = User.all_users - dif
   @not_admin_user = (@dept.list_of_deptmembers - @dept.admin_users).collect{|a|[a.user.name, a.id]}' 
```

我如何重构@not_admin_user？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:49:28.787

在某些情况下，搜索基于`id`'s 的表会更快、更便宜——这可能是其中一种情况。

```
@dept = Dept.find(params[:id])

# assuming both `members_list` and `admin_users` actually point to `User` objects
member_ids = @dept.members_list.collect(&:id)
admin_ids = @dept.admin_users.collect(&:id)
non_admin_id = member_ids - admin_ids

non_admin_users = User.where("id in ?", non_admin_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:17:32.690

对于初学者，您可以将所有这些逻辑下推到 Dept 模型中。

```
def show
  @dept = Dept.find(params[:id])
  @admin_list = @dept.admin_list
  @members = @dept.members
  @not_member_users = @dept.not_member_users
  @not_admin_user = @dept.not_admin_user
end

class Dept < ActiveRecord::Base
  def members
    self.members_list.collect{ |a| a.name }
  end

  def admin_list
    self.admin_users.collect{ |a| a.user }
  end

  def not_member_users(user = User)
    dif = self.users.collect{|a|[a.name,a.id]}
    user.all_users - dif
  end

  def not_admin_user
    (self.list_of_deptmembers - self.admin_users).collect{|a|[a.user.name, a.id]}
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T04:57:04.427

最好处理对象的集合，而不是对象的属性数组。所以`@members`应该是一个`Member`或`User`对象的数组，而不是名称的字符串数组。

对于你的问题，这可能不是一个很好的答案，但我会遵循由外而内开发的原则，旨在能够像这样得到你想要的：

```
def show
  @dept = Dept.find(params[:id])
  @members          = @dept.members
  @admin_list       = @dept.admin_users
  @not_member_users = @dept.non_member_users
  @not_admin_users  = @dept.non_admin_users
end 
```

在您的 Dept 模型中，设置范围/关联，以便将适当的结果返回给上面使用的方法。使用 Ruby 过滤结果是最后的手段。

# php - 如何从 VB6 与服务器端 PHP API 进行通信？

> ID：15126200
> 
> 赞同：0
> 
> 时间：2013-02-28T02:03:27.500
> 
> 标签：php, http, vb6

这是一个关于VB6和服务器端PHP之间通信的问题。

WooCommerce 有一个插件，可让您序列化软件产品的销售。它通过 PHP API 与软件应用程序通信。API 调用的语法如下：

```
wp_get_request('http://174.120.19.162/~fab/?wc_api=software_api&request=request_key&Secret_Key=<sekret>&email=<email>') 
```

我有一个需要与这个 api 通信的 VB6 应用程序。我正在使用以下代码发送 URL 请求：

```
blah = INetObject.OpenURL("http://174.120.19.162/~fab/wp_get_request('http://174.120.19.162/~fab/?wc_api=software_api&request=request_key&Secret_Key=<sekret>&email=<email>')") 
```

API 应该返回一个 JSON 对象（等等），然后我对其进行解析以获取我想要的数据。但是它不起作用。我尝试了各种语法排列都无济于事。大多数情况下，我得到目标页面的 XML 描述，所以我的问题是：

如何从 VB6 与此 API 通信？我一直在处理这个问题大约一个星期，但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:28:17.473

您混淆了要在 wordPress 代码中内部使用的 API，以及您需要在外部调用什么。

此示例由您提供，并调用 WordPress 内部的函数来发出 HTTP 请求：

```
wp_get_request('http://174.120.19.162/~fab/?wc_api=software_api&request=request_key&Secret_Key=<sekret>&email=<email>') 
```

`wp_get_request()`VB6 中的等价物是`INetObject.OpenURL()`：

```
blah = INetObject.OpenURL('http://174.120.19.162/~fab/?wc_api=software_api&request=request_key&Secret_Key=<sekret>&email=<email>') 
```

您的错误是试图将两者混合在一起，认为`wp_get_request`是 HTTP API 本身的一部分。

# python - 以下错误“com.apple.kextd [38]：无法解析原始路径/System/Library/Extensions/ni488lock.kext”是什么意思？意思是？

> ID：15126202
> 
> 赞同：1
> 
> 时间：2013-02-28T02:03:28.773
> 
> 标签：python, macos, kernel-extension

我正在运行以下命令：

```
from pyvisa.vpp43 import visa_library
visa_library.load_library("/Library/Frameworks/Visa.framework/VISA")
import visa
print visa.get_instruments_list() 
```

参考：[http ://www.rau-deaver.org/Mac-PyVISA.html](http://www.rau-deaver.org/Mac-PyVISA.html)

# 系统日志

com.apple.kextd[38]：无法解析原始路径 /System/Library/Extensions/ni488lock.kext。

ReportCrash[395]：将 Python[383] 版本 2.7.2 (2.7.2) 的崩溃报告保存到 /Users//Library/Logs/DiagnosticReports/Python_2013-02-27-175134_Motions-Mac-mini.crash

# 崩溃日志

```
Process:         Python [383]
Path:            /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Identifier:      Python
Version:         2.7.2 (2.7.2)
Code Type:       X86 (Native)
Parent Process:  bash [294]
User ID:         501

PlugIn Path:       /Library/Frameworks/nipalu.framework/Versions/1/nipalu
PlugIn Identifier: com.ni.framework.nipalu
PlugIn Version:    2.7.0 (2.7.0f0)

Date/Time:       2013-02-27 17:51:31.185 -0800
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
/Library/Frameworks/ni488.framework/NI488
abort() called

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x92f3aa6a __pthread_kill + 10
1   libsystem_c.dylib               0x9639facf pthread_kill + 101
2   libsystem_c.dylib               0x963d64f8 abort + 168
3   com.ni.framework.nipalu         0x006664b1 libSetSSPackageClientLoadStatus(long) + 129
4   com.ni.framework.NI488          0x007cafdf __static_initialization_and_destruction_0(int, int) + 45
5   dyld                            0x8fe9bcda ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) + 230
6   dyld                            0x8fe9bfde ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 64
7   dyld                            0x8fe98268 ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 356
8   dyld                            0x8fe980ba ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 62
9   dyld                            0x8fe8ce0b dyld::runInitializers(ImageLoader*) + 88
10  dyld                            0x8fe92605 dlopen + 718
11  libdyld.dylib                   0x987c9dbe dlopen + 68
12  com.apple.CoreFoundation        0x908931f2 _CFBundleDlfcnLoadFramework + 210
13  com.apple.CoreFoundation        0x90858746 _CFBundleLoadExecutableAndReturnError + 822
14  com.apple.CoreFoundation        0x90858396 CFBundleGetFunctionPointerForName + 70
15  com.ni.framework.VISA           0x003a78d6 visaLibSymbol + 68
16  com.ni.framework.GpibPassport   0x00544375 bundleLoad + 811
17  com.ni.framework.GpibPassport   0x00544f5b bundleLoad + 3857
18  com.ni.framework.GpibPassport   0x00543808 0x53a000 + 38920
19  com.ni.framework.VISA           0x003bbb9a viUnlock + 673
20  com.ni.framework.VISA           0x003a23d9 visaRegisterOper + 5942
21  com.ni.framework.VISA           0x003be5e1 viFindRsrc + 1153
22  libffi.dylib                    0x0038191d ffi_call_SYSV + 29
23  libffi.dylib                    0x00381c0b ffi_call + 125
24  _ctypes.so                      0x003722d5 _ctypes_callproc + 807
25  _ctypes.so                      0x0036c61d 0x36a000 + 9757
26  org.python.python               0x0009ce1e PyObject_Call + 97
27  org.python.python               0x001470c9 PyEval_EvalFrameEx + 8651
28  org.python.python               0x0014ae37 0x8d000 + 777783
29  org.python.python               0x00146f77 PyEval_EvalFrameEx + 8313
30  org.python.python               0x00144eb2 PyEval_EvalCodeEx + 1777
31  org.python.python               0x0014aea8 0x8d000 + 777896
32  org.python.python               0x00146f77 PyEval_EvalFrameEx + 8313
33  org.python.python               0x00144eb2 PyEval_EvalCodeEx + 1777
34  org.python.python               0x001447bc PyEval_EvalCode + 87
35  org.python.python               0x000b510e 0x8d000 + 164110
36  org.python.python               0x000b4f6d PyRun_InteractiveOneFlags + 492
37  org.python.python               0x000b4a05 PyRun_InteractiveLoopFlags + 205
38  org.python.python               0x000b4890 PyRun_AnyFileExFlags + 70
39  org.python.python               0x000d7c66 Py_Main + 2962
40  libdyld.dylib                   0x987ca725 start + 1 
```

# actionscript-3 - 错误 1084：在左括号之前需要左括号

> ID：15126205
> 
> 赞同：0
> 
> 时间：2013-02-28T02:03:32.317
> 
> 标签：actionscript-3, flash

```
package
{
    import flash.events.* 
    import flash.ui.*

    public class tank () //1084: Syntax error: expecting leftbrace before leftparen.
    {
        //other stuff
    }
} 
```

这是一个反复出现的错误，我无法弄清楚，它似乎是我无法通过谷歌搜索找到的错误 1084 的一个版本......

我尝试将左大括号放在括号之前的那行之后和整行之前，其他错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:08:10.020

你的语法不正确。如果你想创建一个类，你需要去掉左右括号（就像错误告诉你的那样，你给了它错误的输入并且它需要一个左括号（`{`））。因此，请尝试以下操作：

```
package
{
import flash.events.*; // Put a semi-colon after imports
import flash.ui.*; // Here too

//public class tank () // 1084: Syntax error: expecting leftbrace before leftparen.
public class tank // This should not error on you.
{
     //other stuff
}
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:38:48.180

类定义不使用括号。*您可能会将类定义与*使用括号并嵌套在类中的构造函数混淆。

基本上，只需删除`()`此处末尾的：

```
public class tank 
```

然后您的构造函数将在其中使用括号，如下所示：

```
public class tank
{
    // This is a constructor. It is a public method with the same name as
    // the class it is defined within, and is called when an instance of
    // this class is created.
    public function tank()
    {
        //
    }
} 
```

# smarty - 在 Smarty 模板中引用 PHP 常量

> ID：15126207
> 
> 赞同：2
> 
> 时间：2013-02-28T02:04:08.060
> 
> 标签：smarty

我是这个话题的新手。我有一个使用 Smarty 模板的应用程序。在其中一个 HTML 文件中，我希望能够提取存储在 Smarty 变量中的文件路径的文件名部分，并通过管道使用 PHP 函数作为修饰符来执行此操作：

```
{$file|pathinfo:PATHINFO_FILENAME} 
```

当然，这是行不通的。当我改为替换文字时，它按预期工作：

```
{$file|pathinfo:2} 
```

因此，如果 Smarty 变量 $file 包含字符串“images/products/foo.png”，我会得到“foo.png”，这就是我想要的。我的问题：有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:05:42.463

在 php 文件中，尝试使用`extends`：

```
$smarty->display("extends:PATHINFO_FILENAME|CURRENT_TPL_FILE"); 
```

# eclipse - 如何在 Eclipse 中将 JavaFX Preloader 与独立应用程序一起使用？

> ID：15126210
> 
> 赞同：10
> 
> 时间：2013-02-28T02:04:12.217
> 
> 标签：eclipse, osgi, javafx, preloader

我的 IDE 是 Eclipse，我的项目是一个独立的 JavaFX 应用程序（带有 OSGI 框架的纯 CS 架构）。

如何使用预加载器，因此预加载器将在我的主应用程序之前启动并稍后隐藏？

我在这里找到了一些代码：

[http://docs.oracle.com/javafx/2/deployment/preloaders.htm#BABGGDJG](http://docs.oracle.com/javafx/2/deployment/preloaders.htm#BABGGDJG)

但我仍然不知道如何在 OSGI 框架中使用我的启动应用程序部署预加载器。

我在下面给出了我的启动应用程序的一些代码：

```
public class MyPrjMain extends Application {
    private static Stage primaryStage;

    public void start(final Stage stage) throws BusinessException {
        primaryStage = stage;

        init(primaryStage);

        primaryStage.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-01T00:57:09.360

这是一个很长的答案，对于不耐烦的人来说，快速的答案是下载这个[示例代码，用于显示一个启动任务的启动页面](https://gist.github.com/jewelsea/2305098)，看看它是否适合您的情况。

* * *

[我的回答提供了有关 JavaFX 中Preloader](http://docs.oracle.com/javafx/2/api/javafx/application/Preloader.html)样式功能的一般信息。您的问题特别提到`Preloader`了在 Eclipse 和 OSGI 环境中的使用，但我不会直接解决这种情况，因为我不使用这些技术。希望一般信息仍然适用于您的场景。

**1\. Java 原生支持在 Java 启动时显示启动页面。**

*   这可以使用`-splash:<image>` [VM switch](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html)进行。

的优点和缺点：

`+`让您的独立应用程序显示启动图像的最简单方法。

`+`可以非常快速地显示 => 它是 VM 进程的参数输入，因此（可能）它甚至可以在 VM 本身完全初始化之前显示。

`-`功能有限 => 仅允许显示图像，而不是其他预加载器功能，例如报告初始化进度、动画、登录提示等（除非您[使用 AWT API](http://java.dzone.com/news/displaying-splash-image-java-6)）

`-`在 Java 8 之前无法在所有平台上工作（请参阅问题[Mac：Impossible to use -splash: with JavaFX 2.2 and JDK 7](http://javafx-jira.kenai.com/browse/RT-23328)）。

**2\. 预加载器可用于独立应用程序。**

[JavaFX Preloader 教程](http://docs.oracle.com/javafx/2/deployment/preloaders.htm)在部分中有一个示例`9.3.4 Using a Preloader to Display the Application Initialization Progress`。`LongInitAppPreloader`本教程在和类中提供了可执行的示例代码`LongInitApp`（使用我在此答案中提供的类名，因为本教程中的一个名称目前是错误的）。

示例独立应用程序具有较长的初始化时间，并且自定义`Preloader`提供了有关初始化进度的反馈。该示例通过调用来模拟长时间的初始化[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)`Thread.sleep`，但真正的应用程序将执行诸如建立网络连接、检索和解析网络数据以及设置初始应用程序[场景](http://docs.oracle.com/javafx/2/api/javafx/scene/Scene.html)之类的操作。

预加载器并非特定于小程序和 WebStart，而是主要针对这些部署类型。applet 和 WebStart 初始化过程比独立应用程序初始化更复杂，因此 Preloader 文档的大部分内容都专门针对那些更复杂的场景。

**3\. 您不需要将 Preloader 放在单独的 JAR 中。**

您可以将其放在与您的[Application](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)类`Preloader`相同的 JAR 中。对于通过网络加载协议（如[WebStart](http://en.wikipedia.org/wiki/Java_Web_Start) ）动态部署和更新的大型应用程序，将其放在单独的 JAR 中是有意义的。对于执行基于网络的初始化的独立应用程序，它可能没有太大区别，并且可以跳过单独的打包步骤以简化构建和部署过程。`Preloader`

**4\. 您可以在不使用 Preloader 的情况下实现 Preloader 风格的功能。**

Preloader 的大部分（不是全部）功能都可以在不[继承 Preloader](http://docs.oracle.com/javafx/2/api/javafx/application/Preloader.html)的情况下实现。

你可以：

1.  在应用程序的[start](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#start%28javafx.stage.Stage%29)方法中创建一个启动[阶段。](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)
2.  在启动阶段放置一个启动图像和[ProgressBar](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ProgressBar.html)。
3.  为冗长的应用程序初始化过程提供后台[任务。](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)
4.  从后台任务将初始化进度报告回您的启动阶段。
5.  初始化完成后，可以：
    *   一种。用新创建的应用程序阶段替换启动阶段或
    *   湾。将启动阶段的场景内容替换为应用程序的新场景。

5b 可能是首选，这样您就不需要创建多个窗口。

有关此策略的示例，请参阅我对以下问题的回答：

*   [设计启动画面 (java)](https://stackoverflow.com/a/10001479/1155209)
*   [如何在 JavaFX 中创建具有透明背景的启动画面](https://stackoverflow.com/a/14973758/1155209)

在不使用 a 的情况下在 JavaFX 中显示进度监控启动画面的相关示例代码`Preloader`是：

*   [用于显示带有进度监控的密集启动任务的 JavaFX 启动页面的代码](https://gist.github.com/jewelsea/2305098)
*   [用于出色网站的 JavaFX 独立应用程序启动页面](https://gist.github.com/jewelsea/1588531)

上面的代码可以重构为使用 Preloader 子类，在这种情况下，有一个定义良好的框架来通知应用程序初始化事件，并且可以使用更灵活的部署模型（例如，单独的 jar 中的预加载器）。但是使用 a`Preloader`可能有点复杂。对于某些实现，可能不值得花时间了解`Preloader`框架。

**5\. WebStart 应用程序具有对 Splash Images 的 JNLP 支持**

（这一点无关紧要，只是为了完整性而包括在内）。

I believe that [webstart applications can have a flag in their jnlp file](https://blogs.oracle.com/thejavatutorials/entry/changing_the_java_web_start) to show the startup image as the webstart application launches, but I've never been able to get that flag to work in a JavaFX 2 application, only in a Swing application and even then it wasn't all that reliable as it would only display the second time the application was launched.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:11:04.840

恕我直言，预加载器仅在您作为 applet 或 webstart 运行时才有意义，因为预加载器可以打包为一个额外的 Jar，它首先下载并在后台下载应用程序的其余部分时执行。

所以我的建议是在你获得舞台的第一个时间点打开一个舞台，例如显示一个飞溅。

# android - 无法在 SQLite for Android 中插入特定值

> ID：15126212
> 
> 赞同：2
> 
> 时间：2013-02-28T02:04:28.887
> 
> 标签：android, sqlite

在我的程序中，我使用 ID 从服务器获取一些值。返回的一些 ID 是 0。我正在执行一个插入语句，我在其中插入这些值。当我进行选择查询时，我无法获取 ID = 0 的值。我正在获取其他所有 ID。我无法查看数据库表，因为它是加密的。我不确定它是否没有将其插入数据库或查询没有获取它。SELECT 查询确实返回 ID 为 != 0 的值。只是没有返回 ID = 0 的值。关于我可能做错了什么的任何线索，或者我如何跟踪我的程序中出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:06:56.003

不要将服务器 ID 用作 SQLite 中的索引。

为您的主键设置另一列，并将服务器 ID 存储在一个普通的 NUMERIC 列中。

# sql - Linq to Entities 查询仅识别整数

> ID：15126214
> 
> 赞同：0
> 
> 时间：2013-02-28T02:04:55.470
> 
> 标签：sql, entity-framework, linq-to-entities

我的应用是使用 DbContext 的 EF 5.0 Code First。我一直在尝试使用 Linq 操作（过滤和排序）。我首先尝试将上下文加载到本地，例如：

```
context.mytable.orderby(function a a.somestring).thenby(function b d.someint).load 
```

我没有收到任何错误，但字符串排序被忽略了。int 排序有效。同样，当我尝试设置绑定源时，比较字符串或日期的 linq 部分不起作用，但是当我使用整数时它起作用。我假设这些没有正确转换为 SQL 查询，但我不知道如何修复它们。我会欣赏正确方向的观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:49:02.510

但是 Load() 不会创建任何东西，它只需要一堆项目并将它们从底层源加载到您的上下文中。您不能对 context.mytable 强加排序，因为 mytable 不包含实际数据，它包含您将用于获取实际数据的查询的一部分。

要对您的 UI 进行排序，您需要对要绑定的列表进行排序，或者使用无序列表并将其包装在一个对象中，该对象的工作是应用排序。由于您使用的是 Local ，因此请使用后者并使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)。

这是 WPF 中 CollectionViewSource 的示例。它绑定到 DataContext 的属性 StateOrProvinces ，这是我想要按顺序显示的无序列表：

```
<UserControl.Resources>
    <CollectionViewSource x:Key="stateOrProvinceViewSource" Source="{Binding Path=StateOrProvinces}" >
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="Name" />
        </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
</UserControl.Resources> 
```

与 scm 是：

```
xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase" 
```

代码中的相同内容：

```
 CollectionViewSource orderedView = new CollectionViewSource()
     {
         Source = StateOrProvinces,
     };
 orderedView.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending)); 
```

使用额外的层来应用排序有一些优点。它使您可以在不同的地方显示具有不同排序的相同列表，并且您可以从基础列表中添加/删除项目，而无需每次都手动应用排序。

您还应该查看具有一些额外花里胡哨的[CollectionView类，但我不会进入它，以减少信息过载。](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview)

# c# - 在 asp.net gridview 中禁用文本换行

> ID：15126215
> 
> 赞同：15
> 
> 时间：2013-02-28T02:04:56.733
> 
> 标签：c#, asp.net, gridview

输出是这样的：

```
MyNameIsJohnSmithAnd
Imaperson 
```

我想要的是仅在一行中显示它

```
MyNameIsJohnSmithAndImaperson 
```

我的 Aspx gridview 代码是：

```
<asp:GridView ID="GridView1" runat="server" BackColor="LightGoldenrodYellow" 
    BorderColor="Tan" BorderWidth="1px" CellPadding="5" Font-Names="Calibri" 
    Font-Size="Medium" Font-Underline="False" ForeColor="Black">
    <RowStyle Wrap="False"/>
    <EmptyDataRowStyle Wrap="False"/>
    <FooterStyle BackColor="Tan" BorderColor="Black" BorderStyle="Solid" Wrap="False"/>
    <PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" 
        HorizontalAlign="Center" Wrap="False" />
    <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" Wrap="False"/>
    <HeaderStyle BackColor="Tan" BorderStyle="Solid" Font-Bold="True" Wrap="False"/>
    <EditRowStyle Wrap="False"/>
    <AlternatingRowStyle BackColor="PaleGoldenrod" Wrap="False"/>
</asp:GridView> 
```

我在gridview中禁用了所有的wrap属性为false。但文字仍然换行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-24T18:32:51.430

您还必须将 gridview 的单个列的自动换行设置为 False。

```
<asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" >
            <ItemStyle Wrap="False" />
            </asp:BoundField> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-28T02:11:50.437

尝试将此事件添加到您的网格视图。

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    for (int i = 0; i < e.Row.Cells.Count; i++)
    {
        e.Row.Cells[i].Attributes.Add("style", "white-space: nowrap;");
    }
} 
```

[这](http://forums.asp.net/t/1104548.aspx/1)是参考。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-12T10:03:58.140

在 .Net 中非常简单 在属性窗口中选择您的网格视图（如在设计模式中）并遵循此 RowStyle -->Font -->>Wrap=False

完成了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-16T12:27:38.147

你可以通过css做到这一点。

```
#GridView1
    {
      white-space:nowrap;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-18T17:27:46.130

我的列标题文本是换行的，所以我最终需要一个稍微不同但类似于 user3578419 建议的解决方案。

在设计视图中，我编辑了“ColumnHeadersDefaultCellStyle”属性并将“WrapMode”值更改为“False”。

# django - XMLHttpRequest 的访问控制允许来源错误

> ID：15126226
> 
> 赞同：1
> 
> 时间：2013-02-28T02:06:30.300
> 
> 标签：django, xmlhttprequest

我正在开发一个 Django 服务器。[我需要从这里](http://www.ngdc.noaa.gov/geomag-web/calculators/declinationHelp)的外部服务获取一些数据。

这是我正在使用的 JavaScript 代码：

```
 function getDeclination(latitude, longitude) {

        var url = 'http://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination';

        url += '?';
        url += 'lat1=' + latitude;
        url += '&'
        url += 'lon1=' + longitude;
        url += '&';
        url += 'resultFormat=xml';

        var xmlHttp = null;
        xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", url, false );

        xmlHttp.send();
        xml = xmlHttp.responseXML;

        var temp_d = xml.getElementsByTagName('declination');

        var string = temp_d[0].childNodes[0].nodeValue;

        string = string.substring(1, string.length - 2);

        return parseFloat(string);
    } 
```

使用此代码调用*getDeclination(46.0815605783, 13.2158580422) 会*引发此错误：

```
 XMLHttpRequest cannot load 
 http://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination?lat1=46.0815605783&lon1=13.2158580422&resultFormat=xml. 
 Origin http://127.0.0.1:8000 is not allowed by Access-Control-Allow-Origin 
```

我怎样才能摆脱这个问题并返回测试？

**编辑：**

所以我安装了中间件和JS，但我无法得到结果。也许我在安装中间件的过程中出了点问题，这对我来说是第一次。我知道 Django 找到了它，并且它正在使用它，但我不知道我是否正确完成了设置。

```
 XS_SHARING_ALLOWED_ORIGINS = "http://127.0.0.1:8000"
 XS_SHARING_ALLOWED_METHODS = ['POST','GET','OPTIONS', 'PUT', 'DELETE'] 
```

我已将此代码放在*settings.py 中*，是否正确？因为我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:16:39.430

在开发时使用[此中间件](https://gist.github.com/barrabinfc/426829)，并在将所有内容投入生产时禁用它。

**编辑：**

至于 Javascript 方面，我刚刚对此进行了测试，它工作正常。它确实需要安装 jQuery 和中间件。

```
function getDeclination(latitude, longitude){
    var url = "http://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination";

    url += "?";
    url += "lat1=" + latitude;
    url += "&"
    url += "lon1=" + longitude;
    url += "&";
    url += "resultFormat=xml";

    $.ajax({
        url: url,
        success: function(data){
            var declination = parseFloat($(data).find("declination").text());
            alert(declination);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:43:19.363

最后，我实现了从服务器调用中获取偏角的代码。

为了完整起见，这里是代码：

```
 import urllib2 
 from xml.dom.minidom import parseString

 # build the url
 def buildUrl(latitude, longitude):
    return settings.MAGNETIC_URL + '?' + 'lat1=' + str(latitude) + '&' + 'lon1=' + str(longitude) + '&' + 'resultFormat=xml'

 # load the page from the address       
 def retrieveWeb(address):

    try:                 
            web_handle = urllib2.urlopen(address)

    except urllib2.HTTPError, e: 
            error_desc = BaseHTTPServer.BaseHTTPRequestHandler.responses[e.code][0] 
            print "Cannot retrieve URL: HTTP Error Code", e.code, "Error: ", error_desc 
            sys.exit(1)         
    except urllib2.URLError, e: 
            print "Cannot retrieve URL: " + e.reason[1] 
            sys.exit(1)         
    except:                 
            print "Cannot retrieve URL: unknown error"                 
            sys.exit(1) 

    return web_handle  

 # main function to get declination
 def retrieveDeclination(lat, lng):

    # build url
    address = buildUrl(lat, lng) 

    # get the page
    page = retrieveWeb(address)

    # get xml
    xml = page.read()  

    page.close()

    # inizio il parsin
    dom = parseString(xml)

    #retrieve the first xml tag (<tag>data</tag>) that the parser finds with name tagName:
    xmlTag = dom.getElementsByTagName('declination')[0].toxml()

    #strip off the tag (<tag>data</tag>  --->   data):
    xmlData=xmlTag.replace('<declination>','').replace('</declination>','')

    # parse the output as float
    return float(xmlData) 
```

# iphone - GData将\添加到元素的末尾

> ID：15126228
> 
> 赞同：0
> 
> 时间：2013-02-28T02:06:45.437
> 
> 标签：iphone, objective-c, gdata, gdata-api, gdataxml

连接到 Web 服务后出现解析错误。我不会发布这个问题（还），因为我正在处理可能的问题。

我注意到显示单个 GData 元素的一个原因是它在元素的末尾放置了一个“\”。

它应该是什么样子的示例：“Element1”xxxxx”“/Element1”

它在做什么的例子：“Element1/”xxxxx“”/Element1”

引号代表小于和大于符号...我不知道如何让它们显示在这里。

不知道是什么原因造成的……知道为什么吗？

示例代码：

```
GDataXMLElement *sellerElement = [GDataXMLNode elementWithName:@"Element1"];
GDataXMLElement *credElement = [GDataXMLNode elementWithName:@"Element2"];

[sellerElement addChild:credElement];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:path] cachePolicy:NSURLCacheStorageAllowedInMemoryOnly timeoutInterval:60];

[request setHTTPMethod:@"POST"];
[request setValue:@"733" forHTTPHeaderField:@"COMPATIBILITY-LEVEL"];
[request setValue:@"xxxxxxxxx" forHTTPHeaderField:@"API-DEV-NAME"];
[request setValue:@"yyyyyyyyy" forHTTPHeaderField:@"API-APP-NAME"];
[request setValue:@"GeteSomething" forHTTPHeaderField:@"API-CALL-NAME"];
[request setValue:@"0" forHTTPHeaderField:@"API-SITEID "];
[request setValue:@"text/mxl" forHTTPHeaderField:@"Content-Type"];

[request setHTTPBody:[xmldoc XMLData]];

NSURLResponse *response = nil;
NSError *error;
NSData *data = nil;
data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if ([data length] > 0)  {
    GDataXMLDocument *xmldoc = [[GDataXMLDocument alloc] initWithData:data options:0 error:&error];
    NSLog(@"Recieved  %@", xmldoc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:09:58.230

在搞砸了几天之后，我发现这一直是我的错误。

将 NSLOG 放在 SellerElement credElement 上，可以得到上面的结果。问题是它不完整，因为我没有看将（addChild）元素一起添加后的结果，xml都放在一起。

在 SellerElement 上放置 NLSOG 后，显示了我期望的结果。

# visual-c++ - Visual C++ 不允许我使用模板？

> ID：15126229
> 
> 赞同：0
> 
> 时间：2013-02-28T02:06:50.867
> 
> 标签：visual-c++

这是我制作的快速模板 Dequeue 对象，它在 mac 终端上运行良好，但 Visual c++ 对我不起作用。如果这是一个愚蠢的问题，请提前抱歉，我对 C++ 和模板有点陌生。这是代码：

```
#include <iostream>
using namespace std;

template <typename T>
class Dequeue;

template <typename T>
class node;

template <typename T>
ostream& operator<<(ostream&, const Dequeue<T>&);

template <typename T>
class node{
public:
    node<T>* next;
    node<T>* prev;
    T data;
    node(T data=T(), node<T>* next=NULL, node<T>* prev=NULL);
};

template <typename T>
node<T>::node(T _data, node<T>* _next, node<T>* _prev){
    data = _data;
    next = _next;
    prev = _prev;
}

template <typename T>
class Dequeue{
private:
    node<T>* head;
    node<T>* tail;
    int _size;
    void clear();
public:
    Dequeue();
    ~Dequeue();
    Dequeue(const Dequeue<T>&);
    const Dequeue<T>& operator=(const Dequeue<T>&);
    friend ostream& operator<< <>(ostream&, Dequeue<T>&);
    void push_front(T&);
    void push_back(T&);
    void pop_front();
    void pop_back();
    T front();
    T back();
    int size();
    bool isEmpty();
};

template <typename T>
Dequeue<T>::Dequeue(){
    _size = 0;
    head = NULL;
    tail = NULL;
}

template <typename T>
Dequeue<T>::~Dequeue(){
    clear();
}

template <typename T>
void Dequeue<T>::clear(){
    while(_size > 0)
        pop_front();
}

template <typename T>
Dequeue<T>::Dequeue(const Dequeue<T>& other){
    head = NULL;
    tail = NULL;
    _size = 0;

    *this = other;
}

template <typename T>
const Dequeue<T>& Dequeue<T>::operator=(const Dequeue<T>& other){
    if(this = &other)
        return *this;
    clear();
    node<T>* np = other.head;
    while(np!=NULL){
        node<T>* p = new node<T>(np->data);

        if(head == tail == NULL)
            head = tail = p;

        else{
            tail->next = p;
            p->prev = tail;
        }

        tail = p;
        np = np->next;
    }

    _size = other._size;
    return *this;
}

template <typename T>
ostream& operator<<(ostream& out_str, Dequeue<T>& other){
    node<T>* np = other.head;

    while(np != NULL){
        out_str << np->data << endl;
        np = np->next;
    }
    return out_str;
}

template <typename T>
void Dequeue<T>::push_front(T& object){
    node<T>* np = new node<T>(object);

    np->next = head;
    head->prev = np;
    head = np;

    _size++;
}

template <typename T>
void Dequeue<T>::push_back(T& object){
    node<T>* np = new node<T>(object);

    tail->next = np;
    np->prev = tail;
    tail = np;

    _size++;
}

template <typename T>
void Dequeue<T>::pop_front(){
    node<T>* np = head;
    head = head->next;
    delete np;
    head->prev=NULL;

    _size--;
}

template <typename T>
void Dequeue<T>::pop_back(){
    node<T>* np = tail;
    tail = np->prev;
    delete np;
    tail->next = NULL;

    size--;
}

template <typename T>
T Dequeue<T>::front(){
    return head->data;
}

template <typename T>
T Dequeue<T>::back(){
    return tail->data;
}

template <typename T>
int Dequeue<T>::size(){
    return _size;
}

template <typename T>
bool Dequeue<T>::isEmpty(){
    if(size == 0)
        return true;
    else
        return false;
}

int main(){
    Dequeue<int> A;

    A.push_back(5);
    A.push_front(6);
    A.push_back(7);

    cout << A << endl;

    cin.get();
    return 0;
} 
```

这是我得到的错误：

```
1>------ Build started: Project: Kevin, Configuration: Debug Win32 ------
1>  Dequeue.cpp
1>c:\users\kevin nguyen\documents\visual studio 2010\projects\kevin\kevin\dequeue.cpp(184): error C2664: 'Dequeue<T>::push_back' : cannot convert parameter 1 from 'int' to 'int &'
1>          with
1>          [
1>              T=int
1>          ]
1>c:\users\kevin nguyen\documents\visual studio 2010\projects\kevin\kevin\dequeue.cpp(185): error C2664: 'Dequeue<T>::push_front' : cannot convert parameter 1 from 'int' to 'int &'
1>          with
1>          [
1>              T=int
1>          ]
1>c:\users\kevin nguyen\documents\visual studio 2010\projects\kevin\kevin\dequeue.cpp(186): error C2664: 'Dequeue<T>::push_back' : cannot convert parameter 1 from 'int' to 'int &'
1>          with
1>          [
1>              T=int
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:20:19.500

您的问题是，在您的声明中，您试图引用`T`. 在这种情况下，您传递给函数的文字（`A.push_back(5)`例如）不一定是可以引用的东西。您的声明应该看起来更像这样：

```
/* use `const` */
void Dequeue<T>::push_front( const T& object )
/* Same for push_back: use `const` */
void Dequeue<T>::push_back( const T& object ) 
```

Const 将允许您传递常量数据作为参考。`const`无论如何你都要复制它，所以如果它们正在引用，请确保你的所有声明一直使用。

Also, it may be wise not to tell your `T data` parameter in your node to default to a freshly created `T`. That will force any data type you use with your Linked List to have a default constructor. Just take a `const T& data` instead, or no `T` at all.

# javascript - 我的右轴被切断了......我该如何纠正它？

> ID：15126233
> 
> 赞同：3
> 
> 时间：2013-02-28T02:07:39.877
> 
> 标签：javascript, css, svg, charts, d3.js

我正在创建一个`svg`带有左右轴的图表。我创建了一个带有右轴和左轴的图表。但是，右轴正在被切断。看[我的小提琴](http://jsfiddle.net/eWx4D/)

我试过的：

1.  我尝试将 .background 和 .plot 的宽度调整为更宽更窄
2.  我尝试将轴标签的 z-index 设置为 9999
3.  我试图通过将 .background 的宽度和高度设置为 90% 来放大 svg
4.  我尝试将文本标签向左移动，但随后它开始渗入绘图区域
5.  我尝试将 .background 的溢出设置为可见

我没主意了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:12:52.343

编辑小提琴：http: [//jsfiddle.net/eWx4D/5/](http://jsfiddle.net/eWx4D/5/)

我调整了宽度：

```
<g class="graph line-graph vertical">
<rect y="0" x="0" width="1000" height="301" class="background"/> 
```

我更改了宽度`900`并添加`1`了高度像素以覆盖出血背景..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:37:07.870

您将宽度强制设置为`900`，您可以将宽度设置为`1000`并解决您的问题。

```
<svg ... width="900" viewBox="0 0 900 300"> 
```

但是如果你想保留它，`width="900"`你也可以将`viewBox`宽度设置为 1000，你的图表将被缩放到 svg 的大小。

```
<svg ... width="900" viewBox="0 0 1000 300"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T16:35:10.657

我通过使用边距解决了这个问题：

```
var plotWidth = 1000;
var plotHeight = 600;

var margin = {top: 20, right: 40, bottom: 30, left: 40},
    width = plotWidth - margin.left - margin.right,
   height = plotHeight - margin.top - margin.bottom;

var x = d3.scale.linear().range([0, width]);
var y = d3.scale.linear().range([height, 0]);
// etc.

svg = d3.select("#mydiv").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")"); 
```

对我来说，它更容易思考，并根据需要进行调整。

# php - 文件内容到多维数组

> ID：15126236
> 
> 赞同：1
> 
> 时间：2013-02-28T02:07:46.700
> 
> 标签：php, arrays, multidimensional-array

我有一个这种形式的多维数组的输出：

```
Array
(
[MiddleName] => de
[FirstName] => Lianne
[Id] => 2937
[LastName] => Natris
)
Array
(
[MiddleName] => de
[FirstName] => Herman
[Id] => 2215
[LastName] => Groot
) 
```

我已经通过玩 API 搞砸了用户数据，所以我现在需要修复它。这个输出是我留下的唯一正确的数据。API 更新功能的工作原理如下：

```
$grp = array('LastName' => 'John', 'MiddleName' => 'van'); 
$rID = $app->dsUpdate("Contact", $cID, $grp); 
```

如何将此输出解析回多数组？我对正则表达式的了解非常有限:((

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:20:17.427

的输出`print_r()`并不真正适合对原始结构进行“逆向工程”。

如果您只想使用字符串表示，则可以使用[`serialize()`](http://www.php.net/serialize)and[`unserialize()`](http://www.php.net/unserialize)代替。

```
// turn array into a string format
$str = serialize($arr);

// get it back into an array
var_dump(unserialize($str)); 
```

`var_export()`如果您想将结构写入脚本文件（如简单缓存），或者`json_encode()`结构`json_decode()`是否需要与 JavaScript 共享，您还可以查看。

**更新**

如果你真的别无选择：

```
$arrays = array();
if (preg_match_all('/^Array\s*\((.*?)\)/ms', $s, $matches)) {
  foreach ($matches[1] as $match) {
    if (preg_match_all('/\[([^]]+)\] => (.*)/', $match, $params)) {
      $arrays[] = array_combine($params[1], $params[2]);
    }
  }
  print_r($arrays);
} else {
  die("Arrrrgh");
} 
```

[**演示**](http://codepad.viper-7.com/KKAvBb)

# python - 在自定义 Heroku Python buildpack 中，如何设置配置变量？

> ID：15126237
> 
> 赞同：1
> 
> 时间：2013-02-28T02:07:46.980
> 
> 标签：python, django, heroku, buildpack

我正在尝试为我的 Python 应用程序设置一个自定义配置变量以供使用。具体来说，当前 SHA 用作静态文件中的 URL 参数，以强制 CDN 在每次部署时重新启动。我正在尝试使用基于普通 Heroku Python 的自定义构建包来完成此操作（[https://github.com/heroku/heroku-buildpack-python](https://github.com/heroku/heroku-buildpack-python)）。

我现在在哪里，我已经开始修改`compile`脚本了。到目前为止，我已经能够获得我需要的值，但是在 GIT_DIR 未设置之前，在顶部附近运行，在第 30 行附近

`export GIT_SHA=$(git log -1 --format="%h")`

然后，在第 175 行左右，我认为它是为应用程序设置配置变量的地方。我尝试添加自己的：

`set-env GIT_SHA '$GIT_SHA'`

无济于事

我已经运行`heroku labs:enable user-env-compile`了我认为是必要的步骤，但我无法终生弄清楚如何让 buildpack 实际设置我的应用程序使用的配置变量。

**编辑** 能够通过安德鲁的建议解决这个问题。我创建了一个自定义构建包，它调用一个 Python 脚本，该脚本使用 Heroku python 绑定来设置 var，从构建包中设置的环境变量中读取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:19:34.690

如果我对您的问题的理解是正确的，您希望在编译时设置一个 env 变量，但在执行期间读取它（每当在您的应用程序中访问静态文件 URL 时）。那准确吗？

编译是在与应用程序完全不同的 dyno 上完成的，因此在编译期间执行 set-env 可能会改变编译 dyno 的环境，但不会影响稍后启动的生产 dyno 的环境。

我认为`heroku labs:enable user-env-compile`这里无关紧要，因为这使您可以在编译时从配置中读取，但不允许您对其进行写入。

如果你真的想使用环境变量，你可以使用[Heroku API 的 python 绑定](https://github.com/heroku/heroku.py)来动态修改你的应用程序的配置。您还可以尝试使用已编译的输出在某处保存一个临时文件，然后在启动您的测功机的 buildpack 部分中从该文件中读取。或者可以在启动时直接从生产测功机获取 SHA，根本不涉及编译测功机。

但是，所有这些都是相当不规则的，并且可能有一种更简洁的方法来实现您在 CDN 上对静态文件进行版本控制的目标。

# c++ - 使用 operator/ 目录：好主意还是坏主意？

> ID：15126239
> 
> 赞同：1
> 
> 时间：2013-02-28T02:08:15.717
> 
> 标签：c++, directory, operator-overloading

我有一个`Directory`类，它存储一个字符串并有一个`/`运算符，因此`a / b`where `a`is a`Directory`和`b`is a`std::string`将添加`"/"`和`b`存储在 中的字符串`a`，如下所示：

```
Directory a("/home/joe/foo");
Directory b = a / "bar"; 
```

这将`b`存储字符串`/home/joe/foo/bar`。这真的有用吗，还是只是不必要的花哨？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:14:47.037

Boost Filesystem 以类似的方式重载了 operator/。在你走得太远之前，你检查过 boost 文件系统吗？ [http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:10:43.713

这是一个坏主意，因为您正在更改 / 运算符的常见含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:12:36.957

以这种方式重载运算符是……奇怪。我不会说它糟糕或糟糕，但你必须记住，在大多数情况下`operator/`，它更像是说“除以那个”。现在，您可以自由地将运算符重载为您想要的任何内容，但是字符串（可以表示目录）的约定通常是您会重载类似的东西`+`。

当我第一次遇到这段代码时，我有一种奇怪的感觉，你试图用别的东西来划分一个目录。这真的很令人困惑，也不太清楚。`+`可能是更好的选择，或者只是使用明确的方法名称，如`Append`or `Combine`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T02:15:47.993

我认为这不是一个好主意，因为它不符合常识。在书中，它提供了运算符重载的规则：不要重载具有内置含义的运算符

# objective-c - Theos 用同一类中的另一个方法调用替换方法调用 - 需要越狱

> ID：15126241
> 
> 赞同：1
> 
> 时间：2013-02-28T02:08:41.690
> 
> 标签：objective-c, jailbreak, theos

晚安 :) 我想替换我的类的方法调用

```
Player

-(BOOL)checkDone:(NSString*)name;
-(BOOL)checkWrong:(NSString*)name; 
```

我正在尝试做

```
%hook Player
-(BOOL)checkDone:(NSString*)name{
return [self checkWrong:string];
%end 
```

编译器不知道 checkWrong 的定义在哪里......它在我想挂钩的类中......但它没有编译......我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:53:14.523

```
%hook Player
-(BOOL)checkWrong:(NSString*)name
{ 
    return %orig;
}
%end` 
```

您的代码格式也有不平衡的括号。

# ruby-on-rails - 更改活动记录的 default_timezone

> ID：15126244
> 
> 赞同：1
> 
> 时间：2013-02-28T02:08:56.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, migration

在 Rails 中，我首先有以下用于 activerecord 的配置。

```
config.active_record.default_timezone = :utc 
```

现在，我想使用本地时区，所以我将其更改为：

```
config.active_record.default_timezone = :local 
```

问题是，我需要将日期/日期时间列中的所有现有数据转移到本地时区。实现这一目标的最佳方法是什么？

* * *

[为什么我必须这样做是因为我必须在本地时区上进行聚合，例如 :group => 'DATE(created_at)', GROUP BY DATE(created_at) 将基于 UTC，但我想聚合当地时区一天。

我知道如何编写迁移文件来迁移某个日期时间列。但是这样的专栏有很多，所以我正在寻找更好的解决方案。] 

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T16:30:34.497

这很危险，但这是我在迁移中要做的：

```
class MigrateDateTimesFromUTCToLocal < ActiveRecord::Migration

  def self.up
    # Eager load the application, in order to find all the models
    # Check your application.rb's load_paths is minimal and doesn't do anything adverse
    Rails.application.eager_load!

    # Now all the models are loaded. Let's loop through them
    # But first, Rails can have multiple models inheriting the same table
    # Let's get the unique tables
    uniq_models = ActiveRecord::Base.models.uniq_by{ |model| model.table_name }

    begin
      # Now let's loop
      uniq_models.each do |model|
        # Since we may be in the middle of many migrations,
        # Let's refresh the latest schema for that model
        model.reset_column_information

        # Filter only the date/time columns
        datetime_columns = model.columns.select{ |column| [ :datetime, :date, :time].include? column.type }

        # Process them
        # Remember *not* to loop through model.all.each, or something like that
        # Use plain SQL, since the migrations for many columns in that model may not have run yet
        datetime_columns.each do |column|
          execute <<-SQL
            UPDATE #{model.table_name} SET #{column.name} = /* DB-specific date/time conversion */
          SQL
        end

      rescue
        # Probably time to think about your rescue strategy
        # If you have tested the code properly in Test/Staging environments
        # Then it should run fine in Production
        # So if an exception happens, better re-throw it and handle it manually
      end

    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T17:53:34.910

我的第一个建议是强烈建议您不要这样做。你正在向一个受伤的世界敞开大门。也就是说，这就是你想要的：

```
class ShootMyFutureSelfInTheFootMigration
  def up
    Walrus.find_each do |walrus|
      married_at_utc = walrus.married_at
      walrus.update_column(:married_at, married_at_utc.in_time_zone)
    end
  end

  def down
    Walrus.find_each do |walrus|
      married_at_local = walrus.married_at
      walrus.update_column(:married_at, married_at_local.utc)
    end
  end
end 
```

您可以将首选时区传入 DateTime#in_time_zone，如下所示：

```
central_time_zone = ActiveSupport::TimeZone.new("Central Time (US & Canada)")
walrus.update_column(:married_at, married_at_utc.in_time_zone(central_time_zone)) 
```

或者你可以离开它，Rails 将使用你当前的时区。请注意，这不是您所在的位置，而是您的服务器所在的位置。因此，如果您在冰岛和上海有用户，但您的服务器在加利福尼亚，则每个“本地”时区都是美国太平洋时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:14:52.590

必须更改数据库中的数据吗？您可以改为显示本地时区的日期吗？这有帮助吗：[在 Rails 3 中将 UTC 转换为本地时间](https://stackoverflow.com/questions/5300493/convert-utc-to-local-time-in-rails-3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T17:29:25.190

就像许多其他人所说的那样，您可能不想这样做。

您可以在分组之前将时间转换为不同的区域，所有这些都在数据库中。例如，使用 postgres，转换为山区标准时间：

```
SELECT COUNT(id), DATE(created_at AT TIME ZONE 'MST') AS created_at_in_mst
FROM users GROUP BY created_at_in_mst; 
```

# javascript - 使用 Object.defineProperty 在原型中创建特定于实例的属性？

> ID：15126250
> 
> 赞同：0
> 
> 时间：2013-02-28T02:09:24.903
> 
> 标签：javascript, properties, prototype, pseudo-class, defineproperty

我正在尝试在原型中创建一个属性，以便它在所有实例中都可用（不能将它放在构造函数中，并且宁愿不通过 instance.propertyname = *; 创建它，如果可能的话。举个例子下面的代码：

```
function A() {

}
A.prototype.constructor = A;

Object.defineProperty(A.prototype, 'B', {
    writable: true,
    enumerable: true,
    value: null
});

var a = new A();
a.B = 'test';
var b = new A();
var c = new A();
b.B = '2';

console.log(a,b,c); 
```

产生输出：

```
A {B: "test", B: null} A {B: "2", B: null} A {B: null} 
```

我如何让它改为产生：

```
A {B: "test"} A {B: "2"} A {B: null} 
```

# android - 将 EditText 放入 XML 布局文件时出现 NullPointerException

> ID：15126252
> 
> 赞同：1
> 
> 时间：2013-02-28T02:09:25.103
> 
> 标签：android, xml, nullpointerexception, android-edittext

这是一个与 Android 开发相关的问题。我在 Windows 7 64bits 中使用 ADT 和 Eclipse Indigo

首先我们有xml布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">

  <EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >
  </EditText>

</LinearLayout> 
```

其次，我们有一个引用上述 xml 文件的类

```
package com.example.test_table;

import android.os.Bundle;
import android.app.Activity;

public class Home extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

    }

} 
```

第三名，我们在类 Home 的清单中得到了声明

```
<activity
    android:name="com.example.test_table.Home"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
 </activity> 
```

然后，当我尝试运行时，Eclipse 返回一个空指针异常。但是当我从 xml 布局文件中删除 EditText 时，应用程序可以工作。这个问题突然出现在我的电脑上，我正在尝试解决它。

日志猫：

```
02-27 22:42:39.051: E/AndroidRuntime(12164): FATAL EXCEPTION: main
02-27 22:42:39.051: E/AndroidRuntime(12164): java.lang.RuntimeException: Unable to start activity ComponentInfo {com.example.test_table/com.example.test_table.Home}: java.lang.NullPointerException
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.os.Looper.loop(Looper.java:137)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at java.lang.reflect.Method.invoke(Method.java:511)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at dalvik.system.NativeStart.main(Native Method)
02-27 22:42:39.051: E/AndroidRuntime(12164): Caused by: java.lang.NullPointerException
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.sec.clipboard.ClipboardExManager.updateData(ClipboardExManager.java:241)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.widget.EditText.onFocusChanged(EditText.java:134)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.View.handleFocusGainInternal(View.java:3727)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.View.requestFocus(View.java:5420)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.View.requestFocus(View.java:5370)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.View.requestFocus(View.java:5348)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.parseRequestFocus(LayoutInflater.java:753)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.Activity.setContentView(Activity.java:1835)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at com.example.test_table.Home.onCreate(Home.java:11)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.Activity.performCreate(Activity.java:4465)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-27 22:42:39.051: E/AndroidRuntime(12164):    ... 11 more 
```

那么，我想知道是什么导致 ADT 停止识别 Edittext？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:35:57.293

对我来说奇怪的是这个日志：

```
02-27 22:42:39.051: E/AndroidRuntime(12164):    at android.sec.clipboard.ClipboardExManager.updateData(ClipboardExManager.java:241) 
```

将其放入谷歌搜索似乎会提取有关三星设备和软键盘中的错误的结果。我假设这就是您正在使用的，因为它看起来不像任何非三星结果出现。我会调查这个错误，并可能尝试在应用程序首次启动时禁用键盘出现。这可能会阻止它崩溃，`onCreate()`直到您`EditText`通过单击它来真正聚焦它。把这样的东西放进去`onCreate()`可以帮助你：

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

就像我在评论中所说，您的代码是正确的。尝试在模拟器或其他 Android 设备上进行测试。如果还有其他问题，我会尽力帮助您。

以下是我浏览的一些链接：

*   [https://code.google.com/p/android/issues/detail?id=35358](https://code.google.com/p/android/issues/detail?id=35358)
*   [http://forum.xda-developers.com/showthread.php?t=1655619](http://forum.xda-developers.com/showthread.php?t=1655619)
*   [https://code.google.com/p/android/issues/detail?id=36322](https://code.google.com/p/android/issues/detail?id=36322)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:24:33.913

尝试在您的 java 文件中使用编辑文本并引用它

```
EditText edt = (EditText) findViewById(path); 
```

# sql - 如何为给定的一组行创建某种迭代器（或人工 id）？

> ID：15126254
> 
> 赞同：1
> 
> 时间：2013-02-28T02:09:40.147
> 
> 标签：sql, postgresql, iterator, counter

对不起，愚蠢的标题，但我根本不知道如何称呼它。

这就是我想要的。查看以下查询：

```
SELECT *
FROM (
  SELECT xyz
)
JOIN ...
ORDER BY RANDOM() 
```

我想知道`xyz`查询结束时行的初始顺序。所以我想到了这样的事情（伪SQL）：

```
iterator = 1;
SELECT *
FROM (
  SELECT iterator++, xyz
)
JOIN ...
ORDER BY RANDOM() 
```

所以之后我的结果集将如下所示：

```
iterator | some other data
--------------------------
5        | ...
1        | ...
6        | ...
8        | ...
4        | ...
2        | ...
7        | ...
3        | ... 
```

因此，之后可以重新创建原始订单。

现在你可能会说：为什么你不简单地使用`id`where you select `xyz`？很简单：没有`id`。`xyz`数据是用户输入，我想在查询中创建一个人工输入`id`。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:12:58.593

SQL标准方式是：

```
select row_number() over (order by random()) as seqnum
from (your query goes here) t
order by 1 
```

这使用窗口函数`row_number()`作为您的“迭代器”。然后它按指定的顺序返回行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:13:19.003

您应该能够使用`row_number()`（这是一个[窗口函数](http://www.postgresql.org/docs/8.4/static/functions-window.html)）来分配您想要的“迭代器”。这将为每一行创建一个序列号：

```
select *
from
(
  select col,
     row_number() over(order by col) rn
  from yourtable
) src
order by random() 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!1/5b2d5/2)

# php - 使用 PHP 检索我的 Youtube 视频

> ID：15126257
> 
> 赞同：-3
> 
> 时间：2013-02-28T02:10:13.217
> 
> 标签：php

所有，我真的必须下载整个 Zend 框架才能获得我的 youtube 视频吗？我只想显示我上传的内容并将它们显示在我的网页上。我是否必须进行经过身份验证的呼叫才能执行此操作，还是有一种简单的方法来获取我的视频？我只想在我的页面上显示它们，然后让用户能够从那里播放它们。我的视频也都不是私人的。对此的任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:17:47.463

使用 HTML（不是 PHP），您可以在您的网页中嵌入视频。请参阅[http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:52:22.840

事实上，您所要做的就是从 youtube 获取代码。如果你去分享，你应该看到多个选项。您想要“嵌入”，然后将其复制到您的网页。

# c++ - std::list 严格弱排序

> ID：15126259
> 
> 赞同：0
> 
> 时间：2013-02-28T02:10:20.267
> 
> 标签：c++, list, stl, strict-weak-ordering

我在使用 std::list::sort 函数时遇到了很多麻烦，它在大多数情况下都有效，但是每隔一段时间它就会抛出一个断言“无效运算符<”。研究这个问题，我意识到这是因为我的排序函数没有遵循严格的弱排序，但是当我查看我的代码时，我不明白为什么它没有遵循严格的弱排序，因为它看起来是正确的，我错过了什么这里？

此函数的目的是根据希尔系统将元素列表排序为公式字符串，即。碳第一，氢第二，所有其他按字母顺序排列。FormulaStruct 仅表示完整公式中的单个元素和数量。

```
struct FormulaStruct
{
    FormulaStruct(const std::string & strSymbol, int nNum, bool bHasCarbon)
        :
            m_strSymbol(strSymbol),
            m_nNum(nNum), m_bHasCarbon(bHasCarbon)
    {
    }

    bool operator < (const FormulaStruct & rhs)
    {
        //If the symbols are equal
        if(m_strSymbol == rhs.m_strSymbol)
            return true;

        if(m_bHasCarbon)
        {       
            if(m_strSymbol == "C")
                return true;        
            else        
            if(rhs.m_strSymbol == "H")
                return false;           
        }

        return m_strSymbol < rhs.m_strSymbol;
    }

    bool operator == (const FormulaStruct & rhs)
    {
        return m_strSymbol == rhs.m_strSymbol;
    }

    std::string m_strSymbol;
    int         m_nNum;
    bool        m_bHasCarbon;
};

list<FormulaStruct> FormulaList; //A list of FormulaStructs, assumed to be filled
FormulaList.sort(); 
```

**编辑** bHasCarbon 是公式中有碳的条件，因为希尔系统要求如果公式中有碳，那么接下来是氢，否则一切都是按字母顺序排列的，包括氢，这在我的代码的另一部分中规定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:45:57.307

其他答案已经解决了这个`m_strSymbol == rhs.m_strSymbol`问题。

但是，根据您的描述（首先是“C”，然后是“H”，其他一切都按顺序），如果您有 C++11，您似乎*可能想要：*

```
return std::tie(m_strSymbol != "C", m_strSymbol != "H", m_strSymbol)
    < std::tie(rhs.m_strSymbol != "C", rhs.m_strSymbol != "H", rhs.m_strSymbol); 
```

这是编写 StrictWeakOrderings 的一种简单方法（从[这里](http://www.advogato.org/person/redi/)窃取）

或者，如果您没有 C++11（或 Boost pre-C++11），您可以执行以下操作：

```
// order of checks here is important, in case both are "C"
if(rhs.m_strSymbol == "C")
    return false;
if(m_strSymbol == "C")
    return true;
// neither symbol is "C"
if(rhs.m_strSymbol == "H")
    return false;
if(m_strSymbol == "H")
    return true;
// neither symbol is "C" or "H"
return m_strSymbol < rhs.m_strSymbol; 
```

我很确定我做对了，但是正如上面发布的文章中所述，手动操作很容易出错，可能应该避免......而且，这肯定可以进一步优化以减少字符串比较的数量，有引入错误和混淆代码的风险。

但目前尚不清楚**m_bHasCarbon**是什么意思以及应该有什么影响，所以我不确定这是否是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:16:40.710

```
//If the symbols are equal
if(m_strSymbol == rhs.m_strSymbol)
        return true; 
```

这意味着两者都是正确的`a<b`，`b<a`如果符号相等。

在这种情况下，也许你应该**`return false`**，因为`a==b`和因此。`!a<b`

您的第二组比较也令人困惑……什么是`m_bHasCarbon`.

# jmeter - Jmeter和拖放

> ID：15126260
> 
> 赞同：0
> 
> 时间：2013-02-28T02:10:20.887
> 
> 标签：jmeter, performance-testing

如何使用 jmeter 记录拖放操作。它会记录客户端活动吗 我们正在测试 documentum 应用程序的性能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:51:58.770

拖放是一个 UI 动作，jmeter 在网络级别上工作。

使用 JMeter 代理服务器，它将捕获这些：

*   [http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

# php - PHP MySQL 代码错误

> ID：15126266
> 
> 赞同：0
> 
> 时间：2013-02-28T02:10:48.227
> 
> 标签：php, html, mysql

我的一些 PHP 似乎有问题。它从 HTML 页面获取数据，然后将其添加到 MySQL 数据库中，但信息不会出现。

```
<?php

    // Variables
    $email = $_POST["email"]; 
    $username = $_POST["username"]; 
    $password = $_POST["password"]; 
    $passwordconfirmation = $_POST["passwordconfirmation"];

    // Failure
    if ($password !== $passwordconfirmation)
    { 
       echo "The password fields do not match. Please enter your password again."; 
    } 

    // Success
    else
    {
    $connection = mysqli_connect("*****.com", "*****", "*****", "charlesfriessdatabase"); // Connect

     // Error Message
    if (!$connection)
    {
        die ("Error"); 
    }

    mysqli_query("INSERT INTO accounts (email, username, password) VALUES ($email, $username, $password)"); // Inserter

    mysqli_close($connection); // Connection Closer

    echo "You have successfully signed up! Please check your email to confirm your account."; // Success Message
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:21:03.157

在变量中，您需要放置`'` Try Add this char 并让我们知道。

应该是这样的：

```
mysqli_query("INSERT INTO accounts (email, username, password) VALUES ('$email', '$username', '$password')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:15:13.410

> `if ($password !== $passwordconfirmation)`

改成

```
if ($password != $passwordconfirmation) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:15:53.743

您有语法错误。这个

```
if ($password !== $passwordconfirmation) 
```

应该

```
if ($password != $passwordconfirmation) 
```

只有一个`=`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T02:16:24.410

尝试 != 而不是 !== 进行密码比较。

也许

```
if (!$connection) {
    die('Connect Error: ' . mysqli_connect_errno());
} 
```

# prolog - Prolog - 检查元素是否是二叉树的成员

> ID：15126270
> 
> 赞同：1
> 
> 时间：2013-02-28T02:11:17.710
> 
> 标签：prolog

如何检查元素是否在二叉树中？例如，

```
tree1(node(10,empty, node(100,empty, empty))).
tree2(node(~, node(+, empty, node(*, empty, empty)), node(!, node(/,empty, empty),empty))).
badTree( node(3, node(5, empty), empty)) .

?- tree2(T), memberT(!,T).
T = node(~, node(+, empty, node(*, empty, empty)), node(!, node(/, empty, empty), empty)) .
?- tree1(T),memberT(100,T).
T = node(10, empty, node(100, empty, empty)) . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:22:00.820

不确定这是否正是您的问题，但这是生成您给出的结果的代码（假设它们是规范）：

```
memberT(Val, node( Val,  _Left, _Right)).
memberT(Val, node(_Val1,  Left, _Right)) :- memberT(Val, Left).
memberT(Val, node(_Val1, _Left,  Right)) :- memberT(Val, Right). 
```

# php - TCPDF 证书

> ID：15126274
> 
> 赞同：12
> 
> 时间：2013-02-28T02:11:39.333
> 
> 标签：php, certificate, tcpdf

我想在服务器上为加密的 PDF 生成证书（目前是自签名的）。我感兴趣的是如何使用 TCPDF 实现这一点的工作流程。

**我做了什么：**

1）生成密钥：

```
openssl req -x509 -nodes -days 365000 -newkey rsa:1024 
openssl pkcs12 -export -in tcpdf.crt -out tcpdf.p12 
```

`.crt`2）然后用-file生成PDF

3) 然后我启动了 acrobat reader 并安装了证书 ( `tcpdf.p12`)。我使用了文档->安全设置->数字身份证

4) 我可以导入安全设置，但仍然无法打开 PDF。不知道我做得对不对？acrobat reader 9.5.4 打开一个输入密码的对话框会发生什么。我输入密码并出现错误 -> 未知错误 -> CRecipientList-218

5）我使用的代码（基本相同）

```
$certificate = 'file://../tcpdf.crt';
$info = array(
'Name' => 'TCPDF',
'Location' => 'Office',
'Reason' => 'Testing TCPDF',
'ContactInfo' => 'http://www.tcpdf.org',
);
$pdf->setSignature($certificate, $certificate, 'tcpdfdemo', '', 2, $info);
$pdf->SetProtection($permissions=array('print', 'copy'), $user_pass='', owner_pass=null, $mode=1, $pubkeys=array(array('c' => 'file://../tcpdf.crt', 'p' => array('print')))); 
```

我结合了以下示例：

[http://www.tcpdf.org/examples/example_052.phps](http://www.tcpdf.org/examples/example_052.phps)

[http://www.tcpdf.org/examples/example_016.phps](http://www.tcpdf.org/examples/example_016.phps)

PS：我知道这是一个非常实际的例子。只是认为更容易理解我正在执行的步骤。

**问题：**

1.  关于如何（！）处理带有加密的 PDF 证书的一般工作流程是否正确？

2.  当我生成`.p12`文件时，我必须提供该文件的密码，我稍后在将证书导入 acrobat 时使用该密码。我之所以问，是因为我也有可能“在生成时”提供密码。

3.  如果工作流程是正确的......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T14:26:20.490

该方法基本上是正确的 - 但您可能错过了其中的一些细节。

我一直在使用`*.crt`没有密码（包括私钥和公钥）的格式的证书，它工作正常。

另请注意，您必须在 PHP 中安装 OpenSSL 扩展。

`TCPDF::setSignature()`请参阅Nicola Asuni对方法的评论：

```
* To create self-signed signature: openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout tcpdf.crt -out tcpdf.crt
* To export crt to p12: openssl pkcs12 -export -in tcpdf.crt -out tcpdf.p12
* To convert pfx certificate to pem: openssl pkcs12 -in tcpdf.pfx -out tcpdf.crt -nodes 
```

您无需在 Acrobat Reader 中安装任何证书 - 生成的使用自签名证书签名的 PDF 文档只会显示为不受信任，但它们仍然可以正常打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:06:45.373

我希望你也看看评论;）有一个迷你如何使用提供的文件设置pdf

尤其：

```
// To open the document you need to install the private key (tcpdf.p12) on the Acrobat Reader. The password is: 1234 
```

但是，您需要为 setProtection 提供现有密钥：

```
'c' => 'file://../tcpdf.crt' 
```

您给出的路径只是显示您需要给出路径的位置，但路径本身需要更改

摘要：请再次阅读示例 016 文件中的注释，它们将有助于使其按您需要的方式工作

# java - 如何在 Android 中做单例

> ID：15126276
> 
> 赞同：0
> 
> 时间：2013-02-28T02:12:18.300
> 
> 标签：java, android, service, singleton

我从这个例子中尝试过 [https://stackoverflow.com/a/9472019/485978](https://stackoverflow.com/a/9472019/485978)

我有一个服务，这个服务直接连接到数据库，我把所有数据放在这个类中的一个 bean 中。

```
public class ServiceApplication extends Application {

  private static ServiceApplication mInstance;

  public ServiceApplication() {
    super();
  }

  public static ServiceApplication getInstance() {
    return mInstance;
  }

  @Override
  public void onCreate() {
    super.onCreate();
    mInstance = this;
  }

  private Person personalData;

  public Person getPersonalData() {
    return personalData;
  }

  public void setPersonalData(Person personalData) {
    this.personalData = personalData;
  }
} 
```

从数据库中检索数据时，我使用了 AsyncTask，其中 doBackground() 这是代码

```
ServiceApplication.getInstance().setPersonalData(personalData);
Log.d("AndroidService", "First name: "+ ServiceApplication.getInstance().getPersonalData().getFirstName()); 
```

到目前为止，它可以检索到名字。

但是，当我尝试从另一个活动访问这些数据时，我得到的都是空的。

我尝试了两种方法，但它产生 null

第一次实现：

```
ServiceApplication app = (ServiceApplication) getApplication();
String name = (app.getPersonalData() != null) ? app.getPersonalData().getFirstName().trim() : "user"; 
```

第二种实现：

```
String name = (ServiceApplication.getInstance().getPersonalData() != null) ? ServiceApplication.getInstance().getPersonalData().getFirstName().trim() : "user"; 
```

你们不知道如何保存数据以及如何从其他活动中检索数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:22:50.383

如果您尝试在服务和活动之间传递数据，则必须使用另一种方法，如此[处](http://developer.android.com/guide/components/bound-services.html)所述。如果您只想将`Person`数据从数据库加载到单例中，那么您不需要`Service`. 只需打开与数据库的连接，读取数据并存储它。就像是：

```
...
public Person getPersonalData() {
  if(personalData == null) {
    ... open the db and load the data here ...
  }

  return personalData;
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:22:12.553

请注意，仅`mInstance`是静态的。它不保证您将收到相同的`personalData`对象。`personalData`可能而且绝对`null`是你的情况。

您可能还想声明`personalData`为静态的。

```
private static Person personalData; 
```

但在这种情况下，您将在下次调用时重置数据`setPersonalData`。

我建议您创建一个`static structure`as

```
private static ArrayList<Person> pList = new ArrayList<Person>(); 
```

然后在你的`setPersonalData()`你可以将对象添加到你的`pList`.

您可以更换您`getPersonalData`的退货`pList`。因此，您可以使用`singleton`活动中的相同实例将数据添加到列表并使用相同的实例来检索

# c++ - 使用 shared_ptr c++ 提升 tcp 套接字

> ID：15126277
> 
> 赞同：2
> 
> 时间：2013-02-28T02:12:18.813
> 
> 标签：c++, boost, tcp, boost-asio, shared-ptr

我正在尝试使用 c++ 中的新类来包装 boost TCP。当我直接调用 boost 函数时，事情就像一个魅力。但是，当关闭包装在类函数中时，我无法调用套接字关闭。请帮助查看以下代码。

**类定义：**

```
typedef boost::shared_ptr<tcp::socket> Socket;
class TCPConnector{
public :
    bool isConnected;
    Socket sock;
    string ip;
    int port;
    TCPConnector(string ip, int port);

    void Close();
    bool Connect();
}; 
```

**职能：**

```
TCPConnector::TCPConnector(string ip,int port):ip(ip),port(port)
{

}

void TCPConnector::Close() {
    boost::system::error_code error;
    if (!isConnected)
        return;
    isConnected = false;

    try {

        sock->shutdown(boost::asio::ip::tcp::socket::shutdown_both, error);
        cout << "ShutDown" << endl;
        if (error)
            throw boost::system::system_error(error);
        sock->close(error);
        if (error)
            throw boost::system::system_error(error);
    } catch (exception& e) {
        cout << "#TCPConnector::Close()#" << e.what() << endl;
    }
} 
```

**主功能：**

```
int main(int argc, char* argv[]) {
    try {
        TCPConnector* conn = new TCPConnector("127.0.0.1",8088);

        for (int i = 0; i < 2; i++) {
            boost::asio::io_service io_service;
            tcp::resolver resolver(io_service);
            tcp::resolver::query query(tcp::v4(), "127.0.0.1", "8088");
            tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
            conn->sock.reset(new tcp::socket(io_service));
            conn->sock->connect(*endpoint_iterator);
            cout << "Connected" << endl;
            boost::thread acceptorThread(boost::bind(receive,conn));
            sleep(1);
            unsigned char msg[8] = { 0, 6, 55, 56, 55, 56, 55, 0 };
            boost::system::error_code error;
            try {

                boost::asio::write(*conn->sock, boost::asio::buffer(msg, 8),
                        boost::asio::transfer_all(), error);
                cout << "Sent" << endl;
                if (error)
                    throw boost::system::system_error(error);
                conn->sock->shutdown(boost::asio::ip::tcp::socket::shutdown_both,
                        error);
                if (error)
                    throw boost::system::system_error(error);

                conn->sock->close(error);//close socket directly , the result is ok
                //conn->Close();// close by calling functions, it causes problems.

                cout << "Closed" << endl;
                if (error)
                    throw boost::system::system_error(error);
                io_service.stop();
            } catch (std::exception& e) {
                std::cerr << "Exception in thread: " << e.what() << "\n";
            }
            cout << "Sleep" << endl;
            sleep(2);
            cout << "Wake up" << endl;
        }
    } catch (std::exception& e) {
        std::cerr << e.what() << std::endl;
    }
    return 0;
} 
```

这两条线给出了不同的行为。我不知道为什么第二个会引起问题。

```
conn->sock->close(error);//close socket directly , the result is ok
conn->Close();// close by calling functions, it causes problems. 
```

**互斥锁：打印了**无效的参数****

 **```
sock->close(error);
        if (error)
            throw boost::system::system_error(error); 
```

问题与shared_ptr有关吗？或者我错过了关闭套接字的重要内容？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:06:48.190

问题是`io_service`应该比`socket`.

在`for`循环的第一次迭代之外的所有迭代中，该语句都会`conn->sock.reset(new tcp::socket(io_service));`调用前一次迭代套接字的析构函数。这个析构函数访问之前迭代的元素`io_service`（特别是它的互斥体），这些元素本身已经被破坏了。

要解决此问题，您可以移动循环`io_service`外部`for`，或者您可以`conn->sock.reset();`在循环结束时`for`调用，以便在仍然有效`socket`时调用 的析构函数。`io_service`**

# highcharts - 多点数据不能用Hightcharts画线

> ID：15126279
> 
> 赞同：0
> 
> 时间：2013-02-28T02:12:33.803
> 
> 标签：highcharts

我试图为超过 300 个点的数据绘制线条样式的图表。我无法获得预期的图表，但只能使用标记。但是，当我缩放图表时，可以看到这条线。我做了很多工作来展示这条线，但我失败了。最后，当我减少数据点的数量时，我可以看到这条线。我经历过flot，但我没有遇到过这种问题。是highcharts中的错误吗？我怎样才能克服这个困难？我期待着您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:56:04.410

可能你没有足够的容器宽度，并且标记“重叠”线。所以尝试禁用标记[http://api.highcharts.com/highcharts#plotOptions.line.marker.enabled](http://api.highcharts.com/highcharts#plotOptions.line.marker.enabled)并检查是否出现线条。

附言。源代码会很有帮助（你能在 jsfiddle.net 中重现它吗）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:04:18.510

非常感谢您对这个问题的关注。我已经自己解决了这个问题。当我用 JSON.stringify 再次检查我的数据时，我发现最后一个绘图数据是 [NaN，NaN]。当我删除这些数据并再次绘图时，我得到了线图。我从文本文件创建数据并忘记修剪文本的原因。当我从数据数组中添加 /removed [NaN, NaN] 时，该行可以显示或消失。现象可以重现。

这是示例代码。data1 不能成行显示，但 data2 可以。var 图表；

```
var data1 = [
  [0, 1],
  [1, 2],
  [3, 5],
  [10, 9]
 ];

data1.push([NaN, NaN]); // if the last data is [NaN, NaN], the line will not be shown.

var data2 = [
  [2, 3],
  [4, 5],
  [10, 1]

];

$(function () {
    // define the options
    var options = {

        chart: {
            renderTo: 'container'
        },

        plotOptions: {
            series: {
                    lineWidth: 2,

                    marker: {
                        enabled: false
                    }
            }
        },

        series: [{
            name: 'test 1',
            data: data1
        }, {
            name: 'test 2',
            data: data2
        }]
    };

 chart = new Highcharts.Chart(options);

}); 
```

# android - 将设置添加到 Android 应用程序

> ID：15126290
> 
> 赞同：5
> 
> 时间：2013-02-28T02:13:51.917
> 
> 标签：android

这绝对是一个菜鸟问题。[我已经按照http://developer.android.com/guide/topics/ui/settings.html#Activity](http://developer.android.com/guide/topics/ui/settings.html#Activity)的说明进行操作，当我点击设置时，什么也没有发生。

这是我在 MainActivity.java 中的内容：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);   
    PreferenceManager.setDefaultValues(this, R.xml.preferences, false);
} 
```

然后我有一个名为 PrefsActivity.java 的新 java 文件

```
public class PrefsActivity extends PreferenceActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
}    } 
```

然后我有 res/xml/preferences.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<CheckBoxPreference
    android:key="face_up"
    android:title="@string/face_up"
    android:summary="@string/face_up_desc"
    android:defaultValue="false" />
</PreferenceScreen> 
```

如果可能，我正在尝试使其与 minsdk 7 兼容。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T02:18:56.347

当您单击设置按钮时，您需要打开您的活动。如果您使用操作栏，请使用以下内容：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent intent = new Intent(this, SettingsActivity.class);
            startActivity(intent);
            return true;
        }
        return super.onOptionsItemSelected(item);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T08:01:48.510

在您的主要活动中

```
 // Ensure the right menu is setup
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    // Start your settings activity when a menu item is selected
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        if (item.getItemId() == R.id.action_settings) {
             Intent settingsIntent = new Intent(this, PrefsActivity.class);
             startActivity(settingsIntent);
        }
        return super.onOptionsItemSelected(item);
    } 
```

# java - 如何创建一个使用命令行参数编译和运行 java 代码的 Makefile？

> ID：15126291
> 
> 赞同：5
> 
> 时间：2013-02-28T02:13:53.757
> 
> 标签：java, compilation, makefile, executable

我需要能够编译我的程序，然后每次使用不同的 .txt 文件作为第一个命令行参数执行 3 次不同的时间，而这一切都需要使用单个“make”命令来完成。我希望我的 Makefile 执行的相应终端命令如下：

```
javac MainDriver.java FSA.java State.java Transition.java
java MainDriver test1.txt
java MainDriver test2.txt
java MainDriver test3.txt 
```

这是我目前拥有的：

```
JC = javac
JCR = java

.SUFFIXES: .java .class
.java.class:
    $(JC) $*.java

CLASSES = \
    MainDriver.java \
    FSA.java \
    State.java \
    Transition.java 

default: classes

classes: $(CLASSES:.java=.class)

clean:
    $(RM) *.class *~ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:30:38.827

```
JC = javac
JCR = java

.SUFFIXES: .java .class
.java.class:
    $(JC) $*.java

CLASSES = \
    MainDriver.java \
    FSA.java \
    State.java \
    Transition.java 

TXT_FILES = \
    test1.txt \
    test2.txt \
    test3.txt \

default: classes exec-tests

classes: $(CLASSES:.java=.class)

clean:
    $(RM) *.class *~

exec-tests: classes
    set -e; \
    for file in $(TXT_FILES); do $(JCR) MainDriver $$file; done;

.PHONY: default clean classes exec-tests 
```

# java - 使用 Java 以编程方式使用不同的 keytab 登录多个 kerberos 领域

> ID：15126295
> 
> 赞同：6
> 
> 时间：2013-02-28T02:14:02.243
> 
> 标签：java, authentication, kerberos

出于某种原因，我的客户需要登录到两个 kerberos 领域……比如说 REALM1 和 REALM2。我的委托人已在两个领域中签名，并创建了两个不同的密钥表（principal/host@REALM1 和 keytab1 和 principal/host@REALM2 和 keytab2）。换句话说，我可以针对两个不同的领域 kinit 和 klist 我的委托人。

现在我需要运行一个应用程序，其中首先需要在领域1中完成一些任务，然后需要在领域2中完成其他任务，所以我必须先登录领域1，完成一些工作然后再登录领域2。我试图通过在我的程序中间重置系统属性“java.security.krb5.conf”来做到这一点，但未能从领域1切换到领域2（登录失败，似乎默认领域保持不变。）

我搜索并看到了相关帖子的答案（Kerberos Auth with JAAS and multiple realms），我知道一个 keytab 绑定到一个领域——我不明白的是——我已经为两个领域生成了两个 keytab——为什么可以因此不登录两个领域？是通过跨领域身份验证的唯一方法..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:56:34.920

不要那样做。建立跨域信任，您可以使用客户端的原始密钥表来执行外部域中的所有任务。我们这里至少有 30 个领域，我的 Unix 机器当然也加入了一个领域。这很整洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T18:25:07.673

在您的情况下，您可以在每次使用之前使用 JAAS login.conf 中的 KRB5LoginModule 中的 refreshKrb5Config=true 选项简单地强制重新加载配置（请参阅[Reload Kerberos config in JAVA without restarting JVM](https://stackoverflow.com/questions/1437281/reload-kerberos-config-in-java-without-restarting-jvm)）。

这在多线程应用程序中效果不佳，因为您必须序列化对此共享资源的访问。Java Kerberos 实现使用系统属性（和单个配置文件）这一事实是不必要的限制，甚至可能是一个错误。

使用跨域信任的公认答案有时可能很好，但并非总是如此。例如，如果您的网络管理员不希望所有服务都信任另一个域，而只是这个特定的服务，那么您就不走运了。假设您有一个用 Java 编写的多线程应用程序，并提供了一项服务，该服务希望接受来自多个领域的票证，您必须在每个领域运行该应用程序的一个实例（krb5.conf 主机名是静态的，只是 keytab 和 kdc 更改）。如果这个特定的应用程序是使用 SPNEGO 在端口 443 上运行的 Web 服务，这将成为一个大难题。现在您需要不同端口上的两个应用程序服务器实例吗？哎哟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T17:52:26.887

I would recommend you look at the [oVirt](http://www.ovirt.org) open source project.

Look at the java code of oVirt engine, and look at the bll module (ovirt-engine/backend/modules/bll) for the authentication code (look at `DirectorySearcher.java`) - we do support login in to several kerberos realms.

We have a tool called engine-manage-domains that let you add a "domain user" (which we use mainly for searching users and groups in the added realm) for a domain - for example:

You can add user "aaa" from domain "example.com" which is ActiveDirectory. This modifies the `krb5.conf` defined which is held at `/etc/ovirt-engine/krb5.conf`, and which the ovirt-engine uses.

Look at the place in the code where we create a JAAS login object and perform login (we perform explicit login if we don't a valid ticket to the realm).

I think too that cross realm authentication is better solution, but you might face scenarios in which you will not be able to create such trust. For example, at the case of oVirt - it's an open source virtualization management system, and it should not "interfere" or force changing of setups of other systems installed at user's organization.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T18:24:41.797

如果它帮助别人：

您可以在 krb5.conf 中指定哪些域应该用于哪些域。例子：

```
[libdefaults]
  default_realm = A.COM

[realms]
  A.COM = {
    kdc = ...
  }
  B.COM = {
    kdc = ...
  }

[domain_realm]
  .b.com = B.COM 
```

然后当您连接到 *.b.com 时，它将使用 B.COM 领域而不是 A.COM，否则默认为 A.COM。

更多信息：[https ://web.mit.edu/kerberos/krb5-1.12/doc/admin/conf_files/krb5_conf.html#domain-realm](https://web.mit.edu/kerberos/krb5-1.12/doc/admin/conf_files/krb5_conf.html#domain-realm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-13T20:55:55.010

我迟到了，但这可能会帮助其他在搜索中找到这个问题的人。

使用跨领域身份验证是最好的，但并不总是可行的。例如，您可能作为受信任的第三方将数据从一个组织复制到另一个组织，而这两个组织都可能不会对其开放。

javax.security.auth.login.LoginContext 类通常使用能够支持多个条目的外部配置文件。如果您的 devops 支持它，这是一个很好的方法，但是在许多环境中这是不可能的，例如，如果您在应用服务器上部署为 .war 文件。（经典示例：您的应用程序在 AWS 弹性 beantalk 上自动缩放。）

在我们的例子中，我们使用了带有 Configuration 对象的 LoginContext 构造函数。我们必须自己维护必要的信息，但我们可以自己处理几乎所有事情。（我们可以下载我们的 keytab 文件并将其写入一个临时目录，并在配置对象中指向它。记住在应用程序退出时对该文件进行核对！）

在这种情况下，有助于记住配置对象是一个包，而 AppConfigurationEntry 是单个服务的信息。

编辑添加：您可能希望在选项中指定不同的凭据缓存文件 (ccache) 位置。我不记得 ccache 文件是否支持多个条目，但指定不同的文件不会有什么坏处。

# ruby-on-rails - 限制对 Ruby on Rails 应用程序中“销毁”功能的访问

> ID：15126297
> 
> 赞同：0
> 
> 时间：2013-02-28T02:14:10.007
> 
> 标签：ruby-on-rails, ruby, model-view-controller, ruby-on-rails-2

在此先感谢您的帮助！我有一个用 Ruby on Rails (2.3.15, 1.8.7) 构建的站点，它允许人们创建到不同位置的路线，并在每个位置进行不同的活动。该站点有一种方法可以确保当前用户只能删除与其帐户关联的行程。执行此操作的 itineraries_controller.rb 中的代码如下所示：

```
def destroy
  @itinerary = Itinerary.find(params[:id])
  if @itinerary.user_id == current_user.id

    @itinerary.destroy

    respond_to do |format|
      format.html { redirect_to('/home') }
      format.xml  { head :ok }
    end
  else
    redirect_to '/'
  end
end 
```

这个系统运行良好。但是，我想为活动做同样的事情。在activity_controller 中，我要确保当前用户只能删除与其帐户关联的活动。

目前，这是我的四个模型（去掉了不必要的东西）：

用户.rb

```
class User < ActiveRecord::Base
  has_many :itineraries
end 
```

行程.rb

```
class Itinerary < ActiveRecord::Base
  has_many :locations
  belongs_to :user
end 
```

位置.rb

```
class Location < ActiveRecord::Base
  belongs_to :itinerary
  has_many :activities
end 
```

活动.rb

```
class Activity < ActiveRecord::Base
  belongs_to :location
end 
```

这是我从activity_controller.rb 开始的地方。仅供参考，我的 current_user.id 是由authenticated_system.rb 创建的，所以不要担心那部分。

```
def destroy
  @activity = Activity.find(params[:id])
  if @itinerary.user_id == current_user.id

    @activity.destroy

    respond_to do |format|
      format.html { redirect_to("/") }
      format.xml  { head :ok }
    end
  else
    redirect_to '/'
  end
end 
```

我尝试使用 has_many :through 方法连接模型，但我不知道如何为超过三个模型执行此操作，而且我不确定这是正确的方法。再次感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:25:41.063

你可以简单地做

```
if @activity.location.itinerary.user_id == current_user.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:29:50.873

您实际上只需要向活动询问其位置，然后向该位置询问其行程，而不是向其询问其用户。这有点违反得墨忒耳法则，但它会起作用。

```
loc = @activity.location
itin = loc.itinerary
if itin.user_id = current_user.id
... 
```

那应该行得通。

# events - 获取委托点击事件的来源

> ID：15126305
> 
> 赞同：0
> 
> 时间：2013-02-28T02:15:35.217
> 
> 标签：events, sencha-touch-2

好的，所以在这里进行了一些挖掘，我希望我找到的解决方案是有用的。不过，我更希望有一种不那么自大的方法来做到这一点，并且有人可以指出这一点。

我试图弄清楚如何从轮播中的项目中获取委托点击事件的来源，而不是从列表或其他类似结构中获取 Sencha Touch 2 中内置的可传递参数；默认情况下，事件的范围是具有侦听器的容器。通过该函数传递的所有参数都与鼠标单击事件有关，而不是与源有关。请参阅下面的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:56:01.693

另一种方式

```
tap: function(list, index, target, record, e, eOpts){
    var elm = Ext.get(e.target);
    Ext.getCmp(elm.dom.id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:15:35.217

就像我说的，这是一个 hacky 解决方案，如果有更好的东西会很棒，请在此处发布。无论如何，这是我使用的委托侦听器代码：

```
{
    element:    'element',
    delegate:   '.completed_button',
    event:      'tap',
    fn: function(element){
        var source_id = element.getTarget().id;
        Ext.getCmp(source_id);
    }
} 
```

换句话说，传递 click 事件参数，获取它的目标，并获取该目标的 id。我通过窥探`console.log(element)`向我展示的东西发现了这一点。

# ios - 处理来自后台的网络调用。苹果允许吗？

> ID：15126316
> 
> 赞同：0
> 
> 时间：2013-02-28T02:16:13.087
> 
> 标签：ios, objective-c

我们正在开发一个类似 groupon 的应用程序，当用户进入报价范围时，会向用户显示警报。

即使应用程序在后台，客户也坚持要发出警报。

由于系统的架构，应用程序会定期获取客户端的位置，并与服务器检查是否有任何新警报。如果是这样，应用程序会在本地数据库中进行一些处理并显示通知。

无法使用 APN，因为此项目无法更改服务器中的更改。

我的问题是 Apple 是否会在 AppleStore 中接受它，因为我已经阅读了关于它的不同意见，并且 Apple 不鼓励使用它，正如 iOS 开发者库的摘录中一样

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

> 在唤醒时，您的应用程序将进入后台并给予少量时间来处理位置数据。因为您的应用程序在后台，所以它应该做最少的工作并避免任何可能阻止它在分配的时间到期之前返回的任务（例如查询网络）。如果没有，您的应用程序可能会被终止

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:27:37.633

您的应用多久从用户那里获取位置信息？根据 Apple 的[Background Execution and Multitasking](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，如果您定期获取位置更新（我认为不到 10 分钟），如果您添加`location`到`UIBackgroundModes`您的`info.plist`. 有了这些`CLLocation`坐标，您就可以处理您的 Web 服务请求。

我个人没有做过这样的事情，所以我不能肯定地告诉你苹果是否会拒绝你的应用程序。但是，如果一切都在 Apple 设定的指导方针和要求之内，我不明白他们为什么会拒绝您的应用程序。

**编辑**：

**来自苹果文档：**

> 为用户提供持续位置更新（即使在后台）的应用程序可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）来启用后台位置服务。在 UIBackgroundModes 键中包含此值不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据要传递时唤醒应用程序。因此，此键有效地让应用程序在后台运行，以便在位置更新发生时处理它们。

我猜即使应用程序被暂停，只要有新的位置数据要传递，它也会唤醒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:35:25.950

我认为你应该重新考虑你对这个应用程序的方法。听起来您已经决定构建一组功能，这些功能不一定充分了解或非常适合运行应用程序的设备的特征。

您写道“应用程序每 n 分钟获取一次位置”，但这不是 iOS 定位服务的工作方式。当您的应用程序在前台运行时，偶尔查询当前位置的位置服务是一种好方法，但一旦暂停或终止，这不是一个选项。相反，您需要以某种程度的准确度订阅位置事件，并且当设备的位置发生变化时，您的应用会收到通知。无法保证您收到这些事件的时间表，它会根据您要求的准确性和设备移动的速度而有所不同。

此外，获取位置是一项昂贵的操作，并且会很快耗尽设备的电池。在一两个小时内消耗用户的可用电池电量是快速卸载应用程序的好方法。在可能的情况下，您应该使用重要的位置更改服务以最小的功耗获得低精度的位置更新。如果您需要更高的精度，请考虑对定义的区域使用边界交叉事件，或者至少尽可能降低您要求的精度。

有了所有这些，您仍然需要在有限的时间内工作，一旦通过位置更新启动您的应用程序就必须运行。这可能不足以往返服务器。如果网络连接已经处于活动状态并且设备恰好具有低延迟，您可能会在某些时候收到响应，但我希望看到应用程序经常被操作系统终止。发生这种情况时，我不知道您是否会继续收到位置更新，否则可能会重新启动该应用程序。

与其下载警报列表并在本地显示它们，更好的解决方案可能是在您看到重大位置变化时尝试通过 UDP 将您的当前位置发送到服务器。这样您就可以在不等待响应的情况下触发网络请求。只有其中一些请求仍然会成功，但至少您的应用不会被终止。然后，您可以处理您在服务器上收到的位置，并在适当的时候发送推送通知。

我意识到您似乎无法进行服务器端更改。在这种情况下，您可以做的最好的事情是在应用程序运行时预先获取附近区域的警报（如果您曾经设法在后台完成往返）。这样，您可以将位置更新与该列表进行比较，而无需在每次位置更新时触发网络请求。不幸的是，听起来您可能会陷入困境，在您当前的限制下没有可靠的解决方案可用。

# java - 'Book of Vaadin' 中的 Vaadin 示例未编译

> ID：15126320
> 
> 赞同：0
> 
> 时间：2013-02-28T02:16:27.423
> 
> 标签：java, vaadin

我正在尝试从他们的 Vaadin (LayoutExample.java) 书中重新创建一些 Vaadin 示例。我正在使用他们的最新版本 v7。但是，当尝试编译以下代码时，编译器会抱怨`addComponent`在最后一行中没有为 type 定义`Panel`。我的问题是，Vaadin 书中的示例是否应该使用不同版本的 Vaadin 编译？

我正在为一个项目评估 Vaadin，但到目前为止，我在他们的网站上发现了许多不使用最新的 Vaadin 库编译的示例。我错过了什么吗？

```
 HorizontalLayout horlayout = new HorizontalLayout();

    Panel menuContainer = new Panel("The Possible Places");
    horlayout.addComponent(menuContainer);

    // A menu tree, fill it later.
    Tree menu = new Tree();
    menuContainer.addComponent(menu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:58:29.503

正如它[在 Vaadin 之书的序言中所说的那样](https://vaadin.com/book/-/page/preface.html)

> 编写本手册是一项持续的工作，很少能完全与快速发展的产品保持同步。此版本是 Vaadin 7 发布后不久拍摄的快照。
> 
> 虽然此版本主要针对 Vaadin 7 进行了更新，但仍可能包含一些与 Vaadin 6 相关的过时内容。

当然，这并不理想；[如果您可以向Vaadin 论坛](https://vaadin.com/forum)报告包含过时示例的 URL ，它可以被更正，这将有助于其他用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:23:01.380

好吧，在阅读了他们的 api 文档后，我意识到 a`Panel`只包含一个组件，应该在构造函数中提供。下面的代码解决了我的问题，但我只是想知道他们什么时候会更新他们的示例，以及他们的 vaadin 书！

```
 // A menu tree, fill it later.
    Tree menu = new Tree();
    menu.setSizeUndefined();

    // Layout for the menu area. Wrap the menu in a Panel to allow
    // scrollbar.
    Panel menuContainer = new Panel("The Possible Places", menu); 
```

# android - Android中的AsyncTask启动但不处理

> ID：15126321
> 
> 赞同：1
> 
> 时间：2013-02-28T02:16:36.323
> 
> 标签：android, multithreading, android-asynctask

我知道已经有很多类似的`AsyncTask`问题，但就我而言，有些事情很不寻常，或者我错过了什么！？

由于`AsyncTask`不允许多次运行。我用它来调用它，`new B().execute();`所以它应该在每次运行时创建一个单独的实例！？正确的？

问题是在 B 类创建并执行一次后，用户第二次调用该`startBClass()`方法时它不会工作（只是打开对话框，但实际工作没有发生）。

**我刚刚调试了代码，发现Dialog关闭后，线程还在后台运行。对话框关闭时停止后台线程的正确方法是什么？**- 由于我关闭 B 类中的第一个对话框并创建 B 类的另一个实例，为什么第二个不工作？多个 AsyncTask 不能并行运行！？

我简化了课程以便于理解我正在尝试的内容：

```
public class A {

   /* Is called when user clicks a button */
   private void startBClass() {
       new B().execute();
   }

   /* Opens a Dialog with a countdown TextView (works first call only) */
   private class B extends AsyncTask<Void, Integer, Void> {

       private int secondsPassed = 0;
       private double totalToPay = 0;

       private Dialog dialog;
       private TextView tvCost;
       private Button dialogBtn;

       @Override
       protected void onPreExecute() {
           super.onPreExecute();

           dialog = new Dialog(ConfigurationActivity.this);
           dialog.setCancelable(true);
           dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
           dialog.setContentView(R.layout.dialog);
           dialog.setCanceledOnTouchOutside(false);

           dialog.setOnCancelListener(new OnCancelListener() {
                 @Override
                 public void onCancel(DialogInterface dialog) {
                      onPostExecute(null);
                 }
           });

           tvCost = (TextView) dialog.findViewById(R.id.textCounter);
           dialogBtn = (Button) dialog.findViewById(R.id.button1);
           dialogBtn.setOnClickListener(new OnClickListener() {
                 @Override
                 public void onClick(View v) {
                      dialog.cancel();
                 }
           });

           dialog.show();
       }

       @Override
       protected Void doInBackground(Void... arg0) {
           while(true){
               publishProgress(secondsPassed++);
               SystemClock.sleep(1000);
           }
       }

       @Override
       protected void onProgressUpdate(Integer... values) {
           super.onProgressUpdate(values);
           totalToPay = 12.00;
           tvCost.setText(totalToPay + " USD");
       }

       @Override
       protected void onPostExecute(Void result) {
           super.onPostExecute(result);
           final AlertDialog alert = new AlertDialog.Builder(ConfigurationActivity.this).create();
           alert.setTitle("Information");
           alert.setMessage("You should pay about " + totalToPay + " USD.");
           alert.setButton("OK", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface alertDialog, int which) {
                      alertDialog.dismiss();
                }
           });

           alert.show();
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:47:12.383

```
dialog.setOnCancelListener(new OnCancelListener() {
    @Override
    public void onCancel(DialogInterface dialog) {
        onPostExecute(null);
    }
}); 
```

这不好。根据[文档](http://developer.android.com/reference/android/os/AsyncTask.html)：

> 不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

为了结束它，我将同时更改上面的代码和`doInBackground()`.

```
 protected Void doInBackground(Void... arg0) {
       while(running){
           publishProgress(secondsPassed++);
           SystemClock.sleep(1000);
       }
   } 
```

`running``true`是您在 中设置的布尔值`onPreExecute()`。将其设置为`false`您想要结束它的时间。然后你的循环将退出并被`onPostExecute()`正确调用。

旁注：`secondsPassed`曾经在哪里使用过？

# c - 生成从 1 到限制的所有可能的非重复整数

> ID：15126324
> 
> 赞同：0
> 
> 时间：2013-02-28T02:16:38.290
> 
> 标签：c, recursion, integer, user-input

我很难改变这个程序。该算法对于生成非重复列表已经是正确的。但是，我希望从用户的整数范围生成列表。(1 到 n)

例如：用户输入 5 -> 打印 (1 2 3 4 5) 然后要求 5 个整数来生成组合。

我将如何改变这一点，以便从 (1-n) 中找到组合，而不是单独输入整数 n 次？任何帮助将不胜感激。（对不起，如果它很乱，我是学生：P）

```
#include<stdio.h> stdio.h
#include<stdlib.h> stdlib.h

int a1[50], a2[50]; // arrays
int count=-1, range;
int w; // user defined variable

void main()
{ 

    printf("Please enter a number. (1-10): ");
    scanf("%d", &w);

    int x,y; // comparing
    printf("You have entered %d\n\n",w);
    for(range=1; range<=w; range++){
        printf("%d", range);
        printf(" ");
    } // end for "range"

    printf("\n");

    for(x=0; x<w; x++){

        a1[x]=0;
        y=x+1;
        scanf("%d\n\n" ,&a2[y]); 

    }// end for 

    combo(w);

} // end main

combo(int z) // function with algorithm to find combonations 
{
    while (w<1 || w>10){

        printf("\nThat number is not in range. Please try again. \n\n");
        printf("Please enter a number. (1-10): ");
        scanf("%d", &w);

    } // end while

    int x;
    a1[z]=++count;

    if(count==w){

        for(x=0; x<w; x++)
        printf("%2d",a2[a1[x]]);
        printf("  ");

    } // end if 

    for(x=0; x<w; x++)
    if(a1[x]==0)
    combo(x);
    count--;
    a1[z]=0;

} // end "combo" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:38:38.247

```
#include <stdio.h>
#include <string.h>

void swap (int *X, int *Y)
{
  int temp;
  temp = *X;
  *X = *Y;
  *Y = temp;
}

void print_array(int *a, int n) {
   int i; 
   printf("\t=>  ");
   for(i = 0; i < n; i++){
     printf("%d, ", a[i]);
   }
   printf("\n");
}

void mixmatch (int *Arr, int i, int n)
{
  int j;
  int *A = Arr;
  if (i == n)
     print_array(A,n+1);
  else
  {
     for (j = i; j <= n; j++)
     {
        swap((A+i), (A+j));
        mixmatch(A, i+1, n);
        swap((A+i), (A+j));
     }
  }
}

int main()
{
   int A[10];
   int k;
   int i;
   printf("Enter a number between (1-10):");
   scanf("%d", &k);
   for(i = 0; i < k && i < 10; i++) {
       printf("%d, ",i);
       A[i] = i; 
   }
   printf("\n");
   mixmatch(A, 0, k-1);
   return 0;
} 
```

这就是您可以修改它以合并整数和它们的数组的方式。

# algorithm - 谷歌算法面试

> ID：15126325
> 
> 赞同：15
> 
> 时间：2013-02-28T02:16:38.997
> 
> 标签：algorithm

我潜伏了很长时间，刚刚接受了谷歌的采访，他们问了我这个问题：

各种艺术家想在皇家阿尔伯特音乐厅演出，您负责安排他们的音乐会。在大厅表演的请求将按照先到先得的政策予以满足。每天只能进行一场演出，而且在 5 天内不能举行任何音乐会

给定一个不可能的请求时间 d（即在已经安排好的表演的 5 天内），给出一个 O(log n) 时间的算法来找到下一个可用的日期 d2 (d2 > d)。

我不知道如何解决它，现在面试结束了，我很想弄清楚如何解决它。知道你们大多数人有多聪明，我想知道您是否可以在这里帮帮我。这不适用于家庭作业或任何类似的东西。我只是想学习如何在以后的面试中解决它。我试着问后续问题，但他说这就是我能告诉你的全部。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T04:55:16.070

您需要一个正常的可用日期间隔的二叉搜索树。只需搜索包含 d 的区间。如果不存在，则将间隔 next（按顺序）到搜索停止的点。

注意：连续间隔必须在单个节点中融合在一起。例如：可用日期间隔 {2 - 15} 和 {16 - 23} 应变为 {2 - 23}。如果音乐会预订被取消，可能会发生这种情况。

或者，如果将连续的不可用间隔融合在一起，则可以使用不可用日期树来代替。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T02:27:35.743

将预定的音乐会存储在[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)中，并通过二叉搜索找到可行的解决方案。

像这样的东西：

```
FindDateAfter(tree, x):
  n = tree.root
  if n.date < x 
    n = FindDateAfter(n.right, x)
  else if n.date > x and n.left.date < x
    return n
  return FindDateAfter(n.left, x)

FindGoodDay(tree, x):
  n = FindDateAfter(tree, x)
  while (n.date + 10 < n.right.date)
    n = FindDateAfter(n, n.date + 5)
  return n.date + 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-12T15:25:32.830

我使用了一个二叉搜索树 (BST)，它保存了可以为表演安排的有效空闲天数的范围。其中一个范围必须以 int.MaxValue 结尾，因为我们有无限的天数，所以它不能被绑定。

以下代码搜索与请求日期最近的日期，并将其返回。

当 H 为树高时，时间复杂度为**O(H) （通常为***H=log(N)*，但在某些情况下可能变为*H=N*。）。空间复杂度与时间复杂度相同。

```
public static int FindConcertTime(TreeNode<Tuple<int, int>> node, int reqDay)
{
    // Not found!
    if (node == null)
    {
        return -1;
    }
    Tuple<int, int> currRange = node.Value;
    // Found range.
    if (currRange.Item1 <= reqDay &&
        currRange.Item2 >= reqDay)
    {
        // Return requested day.
        return reqDay;
    }
    // Go left.
    else if (currRange.Item1 > reqDay)
    {
        int suggestedDay = FindConcertTime(node.Left, reqDay);
        // Didn't find appropriate range in left nodes, or found day
        // is further than current option.
        if (suggestedDay == -1 || suggestedDay > currRange.Item1)
        {
            // Return current option.
            return currRange.Item1;
        }
        else
        {
            // Return suggested day.
            return suggestedDay;
        }
    }
    // Go right.
    // Will always find because the right-most node has "int.MaxValue" as Item2.
    else //if (currRange.Item2 < reqDay)
    {
        return FindConcertTime(node.Right, reqDay);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T06:51:36.490

上面已经提到过，但基本上用二叉树保持简单。您知道二叉树的复杂度为 log N。所以你已经知道你需要使用什么算法。您所要做的就是提出一个树节点结构并使用二叉​​树插入算法来查找下一个可用日期： 可能的一种：树节点有两个属性：d（音乐会日期）和 d+5（结束锁定期为 5 天的日期）。再次为简单起见，对两个日期属性使用时间戳。现在通过使用初始条件为 root = null 的二叉树中序插入算法找到下一个可用日期是微不足道的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:55:43.203

存储每年、每季度和每月的使用夜数。要查找免费住宿，请先查找未订满的第一年，然后查找该年内的季度，然后查找月份。然后检查那个月的每个晚上。

日历系统中的不规则性使这有点棘手，因此您可以将 4 晚作为“月”，将 16 晚作为“季度”，等等，而不是使用年和月。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-09T20:12:45.183

Assume, at level 1 all schedule details are available. Group schedule of 16 days schedule at level 2. Group 16 level 2 status at level 3. Group 16 level 3 status at level 4. Depends on number of days that you want to expand, increase the level.

Now search from higher level and do binary search at the end.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-14T20:34:01.197

渐近复杂度：- 这意味着运行时间随着输入的增长而变化。假设我们有一个输入字符串“abcd”。在这里，我们遍历每个字符以找到它的长度，因此所花费的时间与字符串中的字符数成正比，例如 n 个字符。因此 O(n)。但是如果我们将字符串“abcd”的长度放在一个变量中，那么无论字符串有多长，我们仍然可以通过查看变量 len 来找到字符串的长度。(len = 4)。例如：返回 23。无论您输入什么，我们的输出仍然为 23。因此复杂度为 O(1)。因此，该程序将在输入大小的恒定时间内运行。对于 O(log n) - 操作以对数步长进行。

[https://drive.google.com/file/d/0B7eUOnXKVyeERzdPUE8wYWFQZlk/view?usp=sharing](https://drive.google.com/file/d/0B7eUOnXKVyeERzdPUE8wYWFQZlk/view?usp=sharing)

观察上面链接中的图像。在这里我们可以看到弯曲的线（对数线）。在这里，我们可以说，对于较小的输入，O(log n) 表示法效果很好，因为我们在弯曲线中可以看到所花费的时间更少，但是当输入增长时，线性表示法即 O(n) 被认为是更好的方法。还可以看到最好和最坏的情况。就像上面的例子。

你也可以参考这个作弊算法：[http ://bigocheatsheet.com/](http://bigocheatsheet.com/)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-07-28T22:40:15.253

为什么不尝试使用 Union-Find？您可以将每个音乐会日+接下来的 5 天分组为一组的一部分，然后在给定的日期执行 FIND，这将返回下一个集 ID，这将是您的下一个音乐会日期。

如果使用树实现，这会产生 O(log n) 时间复杂度。

# php - 使用 .htaccess 保护成员区域文件夹中的内容的主机问题

> ID：15126328
> 
> 赞同：0
> 
> 时间：2013-02-28T02:16:45.000
> 
> 标签：php, apache, .htaccess

好的，我们的专用服务器上有一个订阅站点。我们将内容提供给通过我们的登录页面访问该网站的付费会员。订阅由第三方记账员处理，该记账员将新会员信息写入我们服务器上的数据库。成员身份验证使用 MySQL 数据库而不是 .htaccess/.htpassword 完成。其原因是大量研究表明 .htaccess/.htpassword 方法不安全（通过纯文本传输用户信息）并且它无法让用户退出。因此通过 MySQL 进行数据库身份验证。这一切都很好。

除了我们有一个问题，即包含仅限会员的内容的文件夹需要保护，以防止任何人输入完整的文件路径和文件名来访问下载内容，从而绕过我们的网站。

所以我们去了主机并编写了一个自定义的 .htaccess 文件。为了时间，我们不得不这样做，他们声称知道这种事情，所以我们聘请他们编写 .htaccess 文件。

第一次迭代：它将每个用户登录重定向回 index.php 页面，而不是允许访问成员区域。但是，直接文件访问被阻止。

第二次迭代：恢复了会员对会员区的访问权限，并且内容再次容易被直接下载。

第三次迭代：成功进入会员专区。内容访问被阻止以直接浏览器访问。但是，以前在会员区域中与每个下载文件一起显示的所有 .jpg 文件现在都已断开链接。相关下载文件照片库中的所有缩略图现在都是断开的链接，无法查看它们所代表的较大图像。

结论：主持人正在退出交易，说我们想要的东西无法完成。回顾一下，我们想要的是：

1.  允许我们的注册会员使用我们的登录页面访问我们的会员区。

2.  防止通过浏览器直接访问我们的内容。

3.  允许所有 .jpg 图像与下载文件和缩略图库一起显示。

他们声称这做不到，我怀疑他们不知道该怎么做。当然，互联网上有许多订阅网站使用 .htaccess 文件来保护其内容。

附加信息：我们有此域的 SSL 证书。这会导致问题吗？保护我们会员区域内容的 .htaccess 不应该在会员区域文件夹中而不是在根目录中（就像现在一样，这不会使 .htaccess 文件的编码变得不那么复杂吗？）？

我很难相信我们要求做的事情是不可行的。

请指教。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:39:09.413

跳过`.htaccess`路线。将“成员内容”的文件名存储在 MySQL 中。然后使用 .php 链接到这些“仅限会员”。PHP 只知道识别信息而不知道实际的文件名。EG MySQL 索引号、存储日期、成员 ID - 所有这些都可用于生成（和检索）您永远不会公开的唯一文件名。

我之前在 Java 中使用 img 标记的 'src=' 部分中的 servlet 完成了此操作。我希望 PHP 能提供类似的东西。

# pyqt - 如何访问插槽内的按钮组成员？

> ID：15126331
> 
> 赞同：0
> 
> 时间：2013-02-28T02:17:02.897
> 
> 标签：pyqt, members

我用 QT Designer 设计了我当前的 GUI。底层代码创建并启动多个线程。对于每个线程，我设置了几个 QPushButton：开始、停止、暂停、恢复和状态。我想对它们进行分组，但它们不是排他性的，所以我需要为每个相关按钮从信号槽设置启用属性，具体取决于单击了哪个按钮。我尝试为每组按钮创建一个 QButtonGroup。我可以获得 sender()，但看不到如何访问属于该组的其他按钮。尝试了几件事，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:53:59.883

好的，我想我有我需要的。问题是如何根据发件人的身份设置组中按钮的启用状态？

我有一个可能的 x 个可以控制的线程。每个QButtonGroup中按钮的objectNames如下：

```
pushButton_start_x
pushButton_stop_x
pushButton_status_x
pushButton_pause_x
pushButton_resume_x 
```

在我的 Python 代码中，我有以下字典：

```
# Each key represents a button type that requires setting the group's
# buttons enabled state

# Each key's values map to these buttons: [start,stop,status,pause,resume]

testManagerButtonEnableStates = {}
testManagerButtonEnableStates["start"] = [False,True,True,True,False]
testManagerButtonEnableStates["stop"] = [True,False,True,False,False]
testManagerButtonEnableStates["pause"] = [False,False,True,False,True]
testManagerButtonEnableStates["resume"] = [False,True,True,True,False] 
```

此例程根据发送者的 objectName 设置状态：

```
# Note that the status button does not require any action here

def setButtonGroupEnabledStates(self):
    buttonType = str(self.sender().objectName().toAscii()).split('_')[1]
    if buttonType == "status":
        return
    i = 0
    for button in self.sender().group().buttons():
        button.setEnabled(self.testManagerButtonEnableStates[buttonType][i])
        i+=1 
```

也许不是最有效的，但它让我到达那里......

# ember.js - 观察渲染事件

> ID：15126333
> 
> 赞同：2
> 
> 时间：2013-02-28T02:17:19.547
> 
> 标签：ember.js

在渲染视图/模板时，是否有我可以观察到的事件，类似于 ember-data 围绕数据加载的事件，例如 isLoaded/isUpdating？

我有一个大约 1000 个元素的列表进入一个列表，甚至渲染也需要相当长的时间（整个另一个问题的主题）。我想向用户显示正在完成渲染工作的一些指示。

还有更微观层面的事件，例如：[http](http://emberjs.com/api/classes/Ember.View.html#event_willClearRender) ://emberjs.com/api/classes/Ember.View.html#event_willClearRender 。我很想知道在执行*任何*渲染时是否有事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T06:43:10.647

`Ember.Instrumentation`提供了一种通用的方法来检测代码，并且默认情况下，Ember 会在呈现任何内容时发出检测事件。

`Ember.subscribe`用于设置之前和之后的侦听器——事件以句点命名，因此订阅“render”将使您获得所有渲染检测调用，默认情况下类似于“render.boundHandlebars”、“render.metamorph”、“渲染.view" ...

这是一个可以帮助您入门的小功能..您可以将其粘贴到控制台中，然后在您的应用程序周围单击以检查它（或者如果您想从一开始就查看所有渲染，请将其粘贴到代码中的某个位置，以便在之后加载ember 但在您的应用程序之前）。

如果没有事件传递给`beginInstrumentation`它将默认为`render`...

```
beginInstrumentation = function(eventName) {
  var styles;
  if (eventName == null) {
    eventName = "render";
  }

  styles = {
    "render.render.metamorph": "color: #a47701;",
    "render.render.boundHandlebars": "color: #0f51fe;",
    "render.view": "color: #37be02;"
  };

  Ember.subscribe(eventName, {
    before: function(name, ts, payload) {
      console.group(name);
      return ts;
    },
    after: function(name, ts, payload, b_ts) {
      var elapsed, style;
      style = styles[name] || "";
      elapsed = (ts - b_ts).toFixed(4);
      console.log("%c" + payload.object + ": " + elapsed + "ms", style);
      return console.groupEnd();
    }
  });
};

beginInstrumentation(); 
```

当我将其粘贴到 TodoMVC 应用程序并单击所有/已完成/活动过滤器时，这是 chrome 中的输出（也应该在 firefox/firebug 中工作）

![在此处输入图像描述](../Images/817ed56382f78d58d66b7db595853ea1.png)

# javascript - Backbone.js 内存管理，上升的 DOM 节点数

> ID：15126334
> 
> 赞同：15
> 
> 时间：2013-02-28T02:17:19.700
> 
> 标签：javascript, backbone.js, google-chrome-devtools, mustache, zepto

**情况**：我正在开发一个相当复杂的单页 Backbone 应用程序，它可能会连续运行 8-12 小时以上。因此，需要确保应用程序不会泄漏，并且会因 X 小时后崩溃或显着减速而享有盛誉。

**应用程序**：该应用程序基于[Backbone](http://backbonejs.org/) (mv*)、[Zepto](http://zeptojs.com/)（类似于 jquery）、[Curl](https://github.com/cujojs/curl)（amd 加载器）和[Mustache](http://mustache.github.com/)（模板）构建。

**问题**：我刚刚征服了事件监听器。垃圾收集器似乎在清理这些家伙方面做得很好，**但 DOM 节点数不会停止攀升。**

**问题**：

*   是否有适当的方法来处理 DOM 节点，以便正确地对它们进行垃圾收集，或者这个 DOM 节点计数是一个永远不会减少的运行总数？
*   有谁知道这些框架中的任何一个不能很好地处理 DOM 节点？可能是胡子？
*   DOM Node Count 是一个可靠的数字吗？

我真的只是在寻找阻止这些 DOM 节点上升的冒险的开始。任何帮助或指导将不胜感激（并因此受到支持）。

我假设一旦事件侦听器被正确处理，DOM 节点计数就会自行管理，但情况似乎并非如此。

## 测试

* * *

![管理不善的 DOM 节点数](../Images/0a051912f8223b9588bde4f4c30b07ef.png)

*   **第一次测试**：6.8 分钟，110,000 个 DOM 节点

* * *

**编辑**：在没有时间线记录的情况下，我重新运行相同的脚本以随机混搭链接，并在大约 7 分钟时截取了屏幕截图。GC通过后，我得到了这些结果。

![管理不善的 DOM 节点数](../Images/45bbef142fa28f6fc5c42faa61a2cd03.png)

*   **第二次测试**：7.1 分钟，141,000 个 DOM 节点（没有时间线记录）

* * *

**编辑：修复后**：

![DOM 节点数受控制](../Images/1940edd812cdf4b4d2ca556835f2d434.png) **升级 Backbone 并在各处使用 listenTo 和 stopListening**

*   **7 分钟**：6,926 个 DOM 节点（请参阅下面的标记答案）。
*   **20 分钟**：6,000 个 DOM 节点，20 个事件监听器，内存 20 MB。
*   **25 分钟**：11,600 个 DOM 节点，44 个监听器，内存 21.7 MB。
*   **28 分钟**：9,000 个 DOM 节点，22 个事件监听器，内存 21.7 MB。
*   **30 分钟**：13,700 个 DOM 节点，123 个事件监听器，内存 21.7。
*   **31 分钟**：7,040 个 DOM 节点，30 个监听器，内存 21.7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T08:27:06.710

> 我假设一旦事件侦听器被正确处理，DOM 节点计数就会自行管理，但情况似乎并非如此。

如果我说得对，您正试图通过从中删除侦听器来处理节点，是这样吗？

请注意，将事件侦听器添加到 DOM 节点并不会阻止该节点被垃圾收集，依赖是相反的方向：当节点处于活动状态时，侦听器函数将不会被收集。

> *   是否有适当的方法来处理 DOM 节点，以便正确地对它们进行垃圾收集，或者这个 DOM 节点计数是一个永远不会减少的运行总数？

为了确保 DOM 节点可以被垃圾收集，你应该

1.  从文档树中删除节点。
2.  清除从 javascript 到节点的所有引用以及对同一子树中所有节点的引用**，**因为从 javascript 到子树中某个节点的引用将保留整个子树。

因此，仅从节点中删除侦听器以使其可收集是不够的。此外，如果您希望收集节点，则**无需从节点中删除侦听器。**

当一些节点被 GC 收集并销毁时，DOM 节点数应该会减少。该数字表示当前已创建但未销毁的 DOM 节点数量，因此它不应无限增长，除非存在内存泄漏。

> *   DOM Node Count 是一个可靠的数字吗？

是的。它应该是一个可靠的数字，因为每当创建一个新的 DOM 节点时它就会增加，而当它被销毁时它会减少。因此，实现非常简单，可以信任它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T00:38:28.893

它是固定的！- 升级骨干。（继续阅读）

## 我们从 Backbone 0.9.2 升级到 Backbone 0.9.10，并在每个视图/模型/集合上实现了 listenTo 和 stopListening。结果是 OMGFANTASTIC 的。

运行相同的压力测试 7 分钟后，结果如下： ![在此处输入图像描述](../Images/7aaf7b72f9d97039a71401943d086c2a.png)

**结果**：7.0 分钟，6,926 个 DOM 节点（没有时间线记录）和事件侦听器计数看起来像**BLUE BLADES OF GRASS**。我感到震惊。与之前的测试相比，内存使用率也低得惊人。

**18 分钟后**：事件侦听器计数相同，从未超过 154，并且 DOM 节点计数始终低于 25,000！显然有一些东西漏掉了（很可能一些仍在使用的非骨干组件），但改进是惊人的。

**结论**：在此版本的 Backbone 之前，我们在 Backbone 本身内清理侦听器方面做得不是很好。DOM 的侦听器处理得很好，但不是在模型/视图/集合之间。许多涉及的回调都与 Backbone Views 相关联，我猜这会阻止垃圾收集器释放 DOM 节点。Backbone 中的大量散乱的事件侦听器/回调（不仅仅是绑定到 DOM）创建了许多不能被垃圾收集的散乱的 DOM 节点。

如果这还不是升级 Backbone 的充分理由，我不知道是什么；o

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T05:47:14.383

上升的 DOM 节点数是内存泄漏的主要标志（通常在我们页面的代码中）。所以你需要与之抗争。该问题的答案中描述了标准技术[。](https://stackoverflow.com/questions/11969062/tool-to-track-down-javascript-memory-leak/12061206)

快照内容有太多细节。这 3 个快照模式可帮助您过滤掉快照中不感兴趣的部分，并仅显示泄漏的候选者。

请确保您运行的是最新版本的 chrome，例如 Chrome Canary。它应该是一个没有扩展名的带有单个选项卡的新实例。最好在控制台中没有错误消息，没有断点并且不要在异常上停止，因为所有这些事情都可能影响页面并因此影响快照内容。

[这篇文章](https://plus.google.com/u/0/115133653231679625609/posts/hEMupRLRJSF)对你来说可能也很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T02:19:45.257

我找到了另一种避免卡顿的方法

```
render: function() {
  this.$el.empty();
  var container = document.createDocumentFragment();
  // render each subview, appending to our root element
  _.each(this._views, function(subview) {
     container.appendChild(subview.render().el)
  });
  this.$el.append(container);
} 
```

在此处参考[http://ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html](http://ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html)

# javascript - 当其容器还包含任何图像时，复选框会触发两次事件

> ID：15126339
> 
> 赞同：1
> 
> 时间：2013-02-28T02:17:49.060
> 
> 标签：javascript, jquery, google-maps, jquery-tabs

我的网站上有谷歌地图。单击相应的标记时，每个信息窗口都会打开，并包含一个带有单独 ID 的复选框。当复选框被选中时，会触发控制台消息。这是代码：

```
function initialize() 
{
    var mapOptions = 
    {
        center: new google.maps.LatLng(-34.600, -58.400),
        zoom: 12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        minZoom: 12,
        scrollwheel: false,
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var point1 = new google.maps.LatLng(-34.600, -58.400)
    dot0001 = new google.maps.Marker(
    {
        position: point1,
        map: map,
    })

    var point2 = new google.maps.LatLng(-34.620, -58.400)
    dot0002 = new google.maps.Marker(
    {
        position: point2,
        map: map,
    })

    var infowindow = new google.maps.InfoWindow({});

    function filltheinfowindow(markername, numbercode, object) 
    {
        infowindow.open (map, markername)
        infowindow.setContent( 
            '<div id="tabsinfo'+numbercode+'" class="infotabs">'+
            '<ul><li><a href="#tabsinfo0001-1">Details</a></li>'+
            '<li><a href="#tabsinfo0001-2">Photos</a></li></ul>'+

            '<div id="tabsinfo0001-1">'+
            '<input name="" type="checkbox" id="checkboxinfo'+numbercode+'" value="">'+
            '</div>'+

            '<div id="tabsinfo0001-2">'+
            '<img src="_objects/_object0001/_images/1.jpg">'+
            '</div>'+   
        '</div>')
    }

    function activatecheckbox(numbercode)
    {
        $("#tabsinfo"+numbercode).tabs();

        $('#checkboxinfo'+numbercode).change(function() 
        {
            if($('#checkboxinfo'+numbercode).is(':checked'))
            {
                console.log("checkboxtest")
            }
        })
    }

    google.maps.event.addListener(dot0001, 'click', function()
    {
        filltheinfowindow(dot0001, "0001")
    })

    google.maps.event.addListener(dot0002, 'click', function()
    {
        filltheinfowindow(dot0002, "0002")
    })

    google.maps.event.addListener(infowindow, 'domready', function()    
    {
        activatecheckbox("0001") 
    })

    google.maps.event.addListener(infowindow, 'domready', function()
    {
        activatecheckbox("0002") 
    })
} 
```

**这是问题所在：** 选中复选框时会触发两次控制台消息。

**这是奇怪的事情：**当我在标签二中加载没有图像的网页时，控制台消息只触发一次，就像它应该的那样。不幸的是，这些图像是我网站的重要组成部分。

对我来说，这完全没有意义。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:39:53.547

在我看来，您有两个“domready”事件侦听器。

```
1) google.maps.event.addListener(infowindow, 'domready', function()    
{
    activatecheckbox("0001")  
})

2) google.maps.event.addListener(infowindow, 'domready', function()
{
    activatecheckbox("0002") 
}) 
```

因此，当 dom 准备好时，这会触发 activatecheckbox 两次（每个事件侦听器一次）。

# wordpress - ?wprptest=0, 1, 2, 3 等在我在谷歌分析中的所有 URL 的末尾

> ID：15126340
> 
> 赞同：0
> 
> 时间：2013-02-28T02:17:56.877
> 
> 标签：wordpress, cloudflare

所以我在大约 20 分钟内就在我的网站上收到了 8000 次点击。我在看这是实时的谷歌分析。

突然之间，一个有 100 人左右的页面，在 url 的末尾出现了这样的字符串。

website.com/page?wprptest=0（100 个活跃用户）

我觉得这很奇怪，然后突然之间有点疯狂，我有 5 或 6 个版本的同一页面，但字符串不同，就像这样......

website.com/page?wprptest=0 (100 活跃用户)
website.com/page?wprptest=1 (80 活跃用户)
website.com/page?wprptest=2 (20 活跃用户)
website.com/page?wprptest= 3（23 个活跃用户）
website.com/page?wprptest=4（43 个活跃用户）

我正在运行 wordpress，最近没有进行任何更改。我使用 Yoast SEO、W3 Total Cache 和 cloudflare。我一直在绞尽脑汁，但无法弄清楚这些是从哪里来的。有人有想法么？在这个奇怪的事件中，我也收到了大约 3 倍于平时的流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:39:48.413

它与您的链接的推特/转发有关。这就解释了为什么您的流量增加了。

很抱歉，我无法评论而不是对其进行评论，因为我无法告诉你为什么、如何或从哪里开始，但我可以说，如果你用谷歌搜索`?wprptest=0`（就像你可能做的那样），你只会得到 twitter结果。
少数非推特结果来自从一些推文复制链接的帖子。您有使用任何特定的共享插件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:40:54.470

这带有与 wordpress 相关的帖子插件，他们似乎用它来测试手机和设备上的相关帖子。他们这样做是为了改进他们在您的页面上显示的相关帖子并跟踪我猜的流量。这似乎很好，所以不要担心。因此，您获得的流量增加了 3 倍，这表明它对您非常有用。对我来说，它使网站上的人们每次访问最多 15 页。如果你不喜欢它，你可以改变插件。

# ruby-on-rails - 隐藏列的 Ruby 电子表格

> ID：15126352
> 
> 赞同：1
> 
> 时间：2013-02-28T02:19:13.313
> 
> 标签：ruby-on-rails, ruby, gem, spreadsheet

我在电子表格中隐藏我的一列时遇到问题。我使用**电子表格**gem(电子表格 (0.6.5.9, 0.6.5.5))

我制作了整个工作簿并试图隐藏所有工作表中的第 7 列。

```
workbook.worksheets.each do |sheet|
  sheet.column(7).hidden = true
end 
```

这不是这样做的。

让我知道是否有人让它工作

谢谢拉米亚

# ssas - 在 Analysis Services OLAP Cube 中聚合过时的事件

> ID：15126353
> 
> 赞同：0
> 
> 时间：2013-02-28T02:19:30.323
> 
> 标签：ssas, aggregation, cube

我有一个表，其中包含存储各种事件日期的列，如下所示：

```
<pre>
PersonID  DatePassedExam1 DatePassedExam2
   1      NULL            NULL
   2      01-11-2012      NULL
   3      01-12-2012      10-12-2012
</pre> 
```

我想构建一个多维数据集，以按人员属性和时间（例如年初至今）查看通过考试 1 和考试 2 的人数。

所以，

```
YTD for Oct2012: exam1count=0, exam2count=0  
YTD for Nov2012: exam1count=1, exam2count=0  
YTD for Dec2012: exam1count=2, exam2count=1 
```

我猜这需要半加法聚合？

我无法在数据库中进行更改（没有困难）并且没有使用企业版。

感激地收到任何建议。

谢谢，达尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:38:47.687

我会取消透视表以传递以下列：PersonID、Exam、DatePassed。您的示例数据将导致 PersonID 2 为 1 行，PersonID 3 为 2 行。

然后我会创建一个考试维度并链接它。

然后我会将度量创建为 PersonID 的不同计数。

# php - HTML 文档 --logoimage

> ID：15126356
> 
> 赞同：1
> 
> 时间：2013-02-28T02:19:42.807
> 
> 标签：php, html-parsing, pdf-generation, htmldoc

我试图在创建 pdf 文档时放置不同的页眉和页脚图像。问题是我无法使用 --logoimage 命令插入两个不同的图像。我尝试了不同的方法，但都失败了。创建的文档获取我使用 --logoimage 设置的最后一个图像，在下面的示例中，它设置页脚很好，但页眉为空白，反之亦然。

htmldoc --webpage --quiet --no-compression -t pdf12 --size "/home/test/bbb557c4886b2f1c840130eeef93b395.txt"

htmldoc --webpage --quiet --logoimage [http://test.com/images/pdf/header.gif](http://test.com/images/pdf/header.gif) --header l --no-compression -t pdf12 --size -f "/home/test/bbb557c4886b2f1c840130eeef93b395。文本文件”

htmldoc --webpage --quiet --logoimage [http://test.com/images/pdf/footer.gif](http://test.com/images/pdf/footer.gif) --footer l --no-compression -t pdf12 --size -f "/home/test/bbb557c4886b2f1c840130eeef93b395。文本文件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:30:29.590

似乎我们不能通过适当的方式为页眉和页脚使用单独的图像。无论如何，我最终找到了一种解决方法，它使我们能够使用不同的图像。

我在页眉中使用了正确的 logoimage，但是为了让页脚工作，我找到了一种解决方法。我实际上使用了一个背景图像，它实际上是一个完整的页面长度的白色图像，底部有一个页脚。因此，一旦我使用 --bodyimage image.gif 它的行为就好像我在使用页脚一样。

htmldoc --webpage --quiet --logoimage [http://test.com/images/pdf/header.gif](http://test.com/images/pdf/header.gif) --header l --footer --bodyimage [http://test.com/images/pdf/footer.gif](http://test.com/images/pdf/footer.gif) --no-compression -t pdf12 --size -f "/home/test/bbb557c4886b2f1c840130eeef93b395.txt"

# html - 导航加载延迟

> ID：15126357
> 
> 赞同：0
> 
> 时间：2013-02-28T02:19:50.583
> 
> 标签：html, css, nav

我注意到我建立的网站上有一个奇怪的加载问题。当导航链接加载到页面顶部时，它们会在加载前以非样式化形式显示在浏览器的左下角，并带有项目符号、下划线等。**有没有一种方法可以让我以不同的方式进行编码，以便隐藏加载过程？**

这里有几张图片显示了页面加载期间的问题：

**导航加载：** ![导航加载](../Images/9abc0b557a983bb899f52256f2442593.png)

**导航已加载：** ![导航已加载](../Images/ff597c2fdb1a9ee10075005cd6bdcefe.png)

**这是CSS的副本：**

```
/*Header Link Wrap & Align*/

#nav-wrap { 
    width: 100%;
    overflow: hidden;
    height: 52px;
    background-image: url(/images/hlink-bg.jpg);
    background-repeat: repeat-x;

}

#nav {
    text-align: center;
    margin:0px;
    padding:0px;

}

#nav li {
    list-style: none;
    display: inline-block;
    vertical-align: middle;
    padding: 0px 10px 0px 0px;
}

#nav a {
    color: #FFFFFF;
    display: inline-block;
    font-family:arial;
    margin: 0;
    padding: 9px 18px 9px 18px;
    text-decoration: none;
    vertical-align: middle;
}

#nav a:hover {
    background-color: #ffa500;
    color: #fff9;
}

.head-divider {
    list-style: none;
    vertical-align: middle;
    display: inline-block; 
    margin: 0;
    width:2px;
    height:52px;
    background-image:url(/images/h-divider.jpg);
    background-repeat: no-repeat;

} 
```

**的HTML：**

```
<div id="nav-wrap">
    <ul id="nav">
    <li><a href="homes.php">Custom Homes</a></li>
    <li class="head-divider"></li>
    <li><a href="inspections.php">Inspection Services</a></li>
    <li class="head-divider"></li>
    <li><a href="energy.php">Energy Audits</a></li>
    <li class="head-divider"></li>
    <li><a href="complete-services.php">Complete Services</a></li>
    <li class="head-divider"></li>
    <li><a href="contact.php">Contact</a></li>
    <li class="head-divider"></li>
    <li><a href="http://www.newdayhomes.us/blog/">Blog</a></li>
    </ul>   
</div>  
</div> 
```

***非常感谢您的帮助！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:29:12.527

您需要移动您的脚本调用，以便它们在您的 CSS 调用之后出现。发生的情况是，当页面被加载时，浏览器在继续读取您的样式表之前等待脚本加载，从而导致无样式内容的闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:30:43.883

可能是你的服务器很慢。您的#nav 样式表是否在不同的主机中？

尝试将这些样式添加到您的`<head>`部分并查看。如果您有图像，但仍然是基本的 HTML，则 CSS 必须快速加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:41:30.447

感谢您的帮助，我意识到我的 Header PHP 包含是在 Scripts & CSS 之后加载的，

所以我把它放在页面的最顶部，它现在加载速度更快了。感谢您的帮助！

# firebase - 可以以相反的顺序遍历 Firebase 节点的子节点吗？

> ID：15126360
> 
> 赞同：6
> 
> 时间：2013-02-28T02:20:12.503
> 
> 标签：firebase

我正在考虑实现一个 in-firebase 索引，如下所述：[https](https://stackoverflow.com/a/10559689/534086) ://stackoverflow.com/a/10559689/534086 ，并试图弄清楚如何处理按降序排序的数据。如果您有一个带有子节点“a”、“b”、“c”的节点，是否有可能检索它们“c”、“b”、“a”？（同时仍然能够以原始顺序检索它们？）

如果无法向前和向后遍历节点并且我需要创建两个索引，那么它们是否是一种简单的算法来生成以反向字典顺序排序的键？对于数字，我认为您可以乘以 -1，但不确定如何处理字符串...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T04:58:13.553

听起来你想要的是一个类似于“limit()”现在工作方式的“reverse()”查询。Firebase 还不能做到这一点，但我们正计划添加它。

根据您的用例，您可能很容易解决这个问题。例如，如果您使用 Firebase 的排序来保持列表按顺序显示给用户，您可以简单地修改显示逻辑以向后呈现内容（例如，前置项目而不是附加）。如果您要查询以从大量子项中选择一个数据窗口（例如，从一个长列表中获取前 10 个项目），那么排序顺序应该不重要——您的起点和终点查询将保持不变，除非它们会被反转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T12:15:17.843

您可以自己使用`[limitToLast()](https://www.firebase.com/docs/web/api/query/limittolast.html)`和排序结果集吗？我知道如果你碰巧在使用 Angular，这种方法会起作用，`items`$scope 上的 Firebase 数组对象在哪里；

```
<li ng-repeat="item in items | orderBy:'-fieldName'"> {{ item.fildName }}</li> 
```

# mysql - 从`MySQL`中删除重复项并根据订单保留单个记录

> ID：15126363
> 
> 赞同：-3
> 
> 时间：2013-02-28T02:20:30.907
> 
> 标签：mysql

我需要删除所有重复项，只保留一个数量最多的。也许我应该做一些 JOIN 操作，但我对 . 我有这个查询：

```
SELECT * 
FROM invoices 
GROUP BY user 
ORDER BY  amount DESC 
```

它查询所有行，按数量对它们进行排序，并在按用户分组时“删除”重复项，但显然不会删除重复项。任何帮助表示赞赏。为了清楚起见，必须永久删除重复项。架构：

```
 user varchar(125), amount int 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:22:37.573

如果您这样做`SELECT *`，即使使用`GROUP BY`.

```
SELECT user, MAX(amount) amount
FROM  invoices
GROUP BY user
ORDER BY amount DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:25:11.863

请注意，由于您使用`GROUP BY`. MySQL[扩展了它的功能](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)。您希望始终指定在 中选择的列`GROUP BY`：

```
SELECT col1, col2, AGGREGATE(col3)
FROM table
GROUP BY col1, col2 
```

> **我需要选择所有行找到重复项**

要找到`MAX`每个的金额`user`：

```
SELECT user, 
       Max(amount) AS amount 
FROM   invoices 
GROUP  BY user 
```

> **并只保留金额最高的行**

**选项1**

使用`LEFT JOIN`（感谢 JW）：

```
DELETE    invoices
FROM      invoices
LEFT JOIN 
     (SELECT user, MAX(amount) AS amount
     FROM invoices
     GROUP BY user) j 
          ON j.user = invoices.user 
              AND j.amount = invoices.amount
WHERE j.amount IS NULL 
```

[http://sqlfiddle.com/#!2/ce2f8/1](http://sqlfiddle.com/#!2/ce2f8/1)

**选项 2**

创建临时表：

```
CREATE TABLE invoices (
  user int,
  amount decimal(5,2));

INSERT INTO invoices VALUES
(1, 100.00),
(1, 200.00),
(1, 300.00);

CREATE TABLE invoicesStg (
  user int,
  amount decimal(5,2));

INSERT INTO invoicesStg
(SELECT user, MAX(amount) AS amount
FROM invoices
GROUP BY user);

TRUNCATE invoices;

INSERT INTO invoices
SELECT user, amount
FROM invoicesStg;

DROP TABLE invoicesStg; 
```

[http://sqlfiddle.com/#!2/0381e/1](http://sqlfiddle.com/#!2/0381e/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:34:49.043

为了查找重复项，您可以尝试：

```
SELECT  id, COUNT(amount) AS cnt, MAX(amount) AS mx 
FROM    invoices 
GROUP   BY user HAVING cnt > 1 
ORDER   BY amount DESC 
```

从那里，您可以继续删除这些记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T02:29:38.057

如果您想要金额最高的行，请尝试以下操作：

```
select *
from invoices
order by amount desc
limit 1 
```

我不确定您所说的“删除”是什么意思。您真的要删除除数量最多的行之外的所有行吗？

# android - 在 android 布局文件中管理 ID

> ID：15126369
> 
> 赞同：0
> 
> 时间：2013-02-28T02:21:04.313
> 
> 标签：android, android-layout

我不知道我问的是正确的问题还是错误的问题。这听起来可能很愚蠢，但我仍然觉得要清除我的基本疑问。问题是：我为单个活动提供了三个不同的布局文件。根据启动活动的目的，它将这些布局文件之一作为其内容。这些布局有许多共同的领域。我有一个问题，在这些不同的布局文件中，我可以为公共字段使用相同的“id”。

例如：我对所有三种布局都有一个保存按钮。在所有这三个布局文件中.....我可以拥有（对于按钮）

```
android:id="@+id/save_button" 
```

所有三个文件中的相同 ID 属性。

我需要这个，因为我的布局文件中有太多元素（组件）。如果可以用通用名称识别它们（因为它们在各自的布局中具有相同的目的），那么要记住的名称/ID 就会非常少，这将使我的程序易于阅读，并且我要记住的东西更少。否则我将不得不为具有相同功能的组件编写相同的代码。

先感谢您。您的回答将帮助我消除疑虑。如果我使用错误的概念，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:28:11.880

这不仅是允许的，而且我会鼓励它。跨文件使用相同的 id 允许您创建新的布局文件，而无需更改任何引用按钮的代码。只要 id 描述了它所涉及的内容，那么它就不应该引起任何问题。

# java - 更改微调器项目中的字体

> ID：15126370
> 
> 赞同：0
> 
> 时间：2013-02-28T02:21:25.987
> 
> 标签：java, android, android-spinner

我有 ArrayAdapter 有微调项目的字符串

如何务实地更改代码

注意：我知道我应该覆盖并实现 View .. 等，但我需要更多细节：

```
 Typeface font = Typeface.createFromAsset(getAssets(), "extrafine.ttf");  

    String array_spinner[];
    array_spinner=new String[3];
    array_spinner[0]="general";
    array_spinner[1]="quisiton";
    array_spinner[2]="suggsution";

    final Spinner spinner = (Spinner) findViewById( R.id.spinner1 ); 

        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(
                this, android.R.layout.simple_spinner_item, array_spinner);
        spinnerArrayAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

        spinner.setAdapter(spinnerArrayAdapter); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T02:33:45.007

在您的适配器中尝试这样的事情：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.spinaca, items) {

     public View getView(int position, View convertView, ViewGroup parent) {
             View v = super.getView(position, convertView, parent);

             Typeface externalFont=Typeface.createFromAsset(getAssets(), "fonts/HelveticaNeueLTCom-Lt.ttf");
             ((TextView) v).setTypeface(externalFont);

             return v;
     }

     public View getDropDownView(int position,  View convertView,  ViewGroup parent) {
              View v =super.getDropDownView(position, convertView, parent);

             Typeface externalFont=Typeface.createFromAsset(getAssets(), "fonts/HelveticaNeueLTCom-Lt.ttf");
             ((TextView) v).setTypeface(externalFont);

             return v;
     }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:24:55.937

创建数组适配器时，您传递的是“android.R.layout.simple_spinner”。这是微调器中每个细节行的默认布局。您需要使用 textview 提供您自己的版本。然后，您可以在 textview 上指定“textSize”属性并将其设置为您想要的任何大小。

查看“android.R.layout.simple_spinner”以了解您可以进行哪些其他更改。您甚至可以将该文件复制到布局目录中，并将其用作更改的起点。

# c++ - 哪种对不同数字进行排序的更好方法？

> ID：15126377
> 
> 赞同：0
> 
> 时间：2013-02-28T02:22:50.027
> 
> 标签：c++, sorting, stl

在使用 STL 的 C++ 中，这两个操作中的哪一个需要更少的 CPU 时间来对大的不同数字进行排序：

*   将元素推入一个集合
*   将元素存储在向量中并调用 sort() 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T02:47:23.150

如果是一次性操作，我会使用 a`std::vector`后跟 a `std::sort`。

就涉及渐近复杂度而言，这两种解决方案应该是等价的：插入一个集合是 O(log(n))，而你对 N 个元素执行此操作，所以它是 O(N log(N))（[证明](http://www.wolframalpha.com/input/?i=lim%20N-%3E%2binf%20%28sum%20for%20i%20=%201%20to%20N%20log%28i%29%29%20/%20%28N%20%2a%20log%28N%29%29)）。

另一方面，插入向量（前提是你事先知道大小）是 O(N)，排序是 O(N log(N))，所以全局是 O(N log(N))。

*但是*：向量需要一次性分配（或者，如果您不知道最终大小，它应该在典型实现中达到 O(log(N)) 重新分配的最终大小）；另一方面，如果将集合实现为 RB 树，则需要为每个节点进行分配，这意味着您必须调用分配器 N 次 - 在 POD 容器中，分配器调用可能会是其中之一瓶颈。此外，树通常具有较少的缓存局部性*并*使用更多内存，因此所有这些开销可能会损害性能。

此外，big-O 表示法显示了函数时间依赖性，但隐藏了乘法常数；不要相信我的话，但我几乎可以肯定 N*set 插入最终会花费超过一次排序，因为每个元素都要进行所有额外的簿记（树插入通常需要一些努力恢复 RB 树属性）。

* * *

另一方面，如果你必须*保持*你的数据结构排序（随着新数据的到来），那么集合通常是正确的解决方案。

* * *

但是，与往常一样，当有疑问*时*。

# yacc - YACC 代码支持？IDE，插件，什么的？

> ID：15126378
> 
> 赞同：-1
> 
> 时间：2013-02-28T02:22:51.847
> 
> 标签：yacc, code-editor

我正在学习 YACC，我喜欢学习新的语言，让编辑现场指出我的错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:51:23.313

你可以试试 xcode，它可以编译 lex 和 yacc，你可以用它调试。

# python - 两个排序函数之间的效率

> ID：15126382
> 
> 赞同：0
> 
> 时间：2013-02-28T02:23:22.553
> 
> 标签：python, sorting, python-2.7, memory-efficient

我创建了两个函数，它们将整数从最低值排序到最高值，然后再回到最低值。这种类型的排序存在吗？无论如何，我创建了以下两个排序函数，它们产生相同的输出。我想知道两者中哪个效率最高？有什么我可以做的改进吗？

1.  *`sortMiddleMax1`*
    *   创建一个新的反向排序的原始列表
    *   从索引 1 开始到列表长度逐步增加 2
2.  *`sortMiddleMax2`*
    *   就地对列表进行排序
    *   从最后一个索引开始到 0 逐步 2

我试图让第二个比第一个更有效率。我没有在内存中创建新列表，而是将其附加到末尾，而不是向右推动整个列表。我在这个假设中正确吗？

**功能**

```
def sortMiddleMax1(aList=None, verbose=False):
  if aList == None or len(aList) < 2:
    return aList
  else:
    sList = sorted(x, key=None, reverse=True)
    if verbose: print sList
    index = 1
    while index < len(sList):
      tmp = sList[index]
      del sList[index]
      sList.insert(0, tmp)
      index+=2
      if verbose: print sList
    return sList

def sortMiddleMax2(aList=None, verbose=False):
  if aList == None or len(aList) < 2:
    return aList
  else:
    aList.sort()
    if verbose: print aList
    index = len(aList)-1
    while index > 0:
      tmp = aList[index]
      del aList[index]
      aList.append(tmp)
      index-=2
      if verbose: print aList
    return aList 
```

**主要的**

```
x = [1,4,6,8,3,5,7,1,5,8,3,9,2,8]
print '############# sortMiddleMax1 #############'
x1 = sortMiddleMax1(x, True)
print '############# sortMiddleMax2 #############'
x2 = sortMiddleMax2(x, True) 
```

**输出**

```
############# sortMiddleMax1 #############
[9, 8, 8, 8, 7, 6, 5, 5, 4, 3, 3, 2, 1, 1]
[8, 9, 8, 8, 7, 6, 5, 5, 4, 3, 3, 2, 1, 1]
[8, 8, 9, 8, 7, 6, 5, 5, 4, 3, 3, 2, 1, 1]
[6, 8, 8, 9, 8, 7, 5, 5, 4, 3, 3, 2, 1, 1]
[5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 3, 2, 1, 1]
[3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 2, 1, 1]
[2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 1, 1]
[1, 2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 1]
############# sortMiddleMax2 #############
[1, 1, 2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 8, 9]
[1, 1, 2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 8, 9]
[1, 1, 2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 9, 8]
[1, 1, 2, 3, 3, 4, 5, 5, 6, 8, 8, 9, 8, 7]
[1, 1, 2, 3, 3, 4, 5, 6, 8, 8, 9, 8, 7, 5]
[1, 1, 2, 3, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4]
[1, 1, 2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3]
[1, 2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:54:24.397

您可以使用 Python 的扩展切片。`[::2]`意味着每隔一个元素。`[::-2]`意味着从最后取出第二个元素并向后工作。这里第一个切片从 0 开始表示偶数长度列表，从 1 开始表示奇数长度列表

```
>>> x = [1, 4, 6, 8, 3, 5, 7, 1, 5, 8, 3, 9, 2, 8]
>>> x = sorted(x)
>>> x[len(x)%2::2] + x[::-2]
[1, 2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:48:39.877

您可以使用列表切片来获得结果，而无需 for 循环：

```
x = sorted([1,4,6,8,3,5,7,1,5,8,3,9,2,8])
x2 = x[::2] + x[1::2][::-1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:48:49.237

我怀疑您的两个当前版本的性能完全相同。但是，它们都可以通过使用切片来获取列表中的值来改进，而不是通过删除和插入值。

每`del`一个`insert`都是`O(N)`，你正在做`N/2`每一个，所以排序将是`O(N^2)`. 切片也是`O(N)`如此，但只需要进行两次。排序所花费的时间`O(N log N)`将逐渐占主导地位。

```
def sortMiddle3(aList):
    s = sorted(aList) # sort the provided list

    # now take the even indexed items, followed by the odd indexes in reverse
    if len(s) % 2 == 0: # is the number of items even?
        return s[::2] + s[-1::-2] # if so, the last item has an odd index
    else:
        return s[::2] + s[-2::-2] 
```

示例输出：

```
>>> x = [1,4,6,8,3,5,7,1,5,8,3,9,2,8]
>>> sortMiddle3(x)
[1, 2, 3, 5, 6, 8, 8, 9, 8, 7, 5, 4, 3, 1] 
```

# asp.net - 加快 ASP.Net 网站的加载时间

> ID：15126384
> 
> 赞同：0
> 
> 时间：2013-02-28T02:23:31.910
> 
> 标签：asp.net, performance, webforms

我们有一个 ASP.Net Webforms 站点 (.Net 3.5)，在项目中有大约 100 个引用，所以它并不小。重建网站可能需要 20-30 秒，但加载时间才是杀手锏。在我们的开发机器上的浏览器中打开第一页之前至少 5 分钟。我们正在 VS 2012 fwiw 中构建。

我们可以做些什么来加快速度？您可以在 web.config 中添加一个“optimizeCompilation”标志，这有点帮助，但没有我们希望的那么大。是否有一个清单可以让我们尝试找出网站加载时间的真正瓶颈？

我可以说，当站点即将启动时，ASP.Net 临时文件夹会慢慢积累文件。总而言之，那里大约有 2500 个文件，总大小约为 70MB。几乎感觉就像我们可以使用记事本手写该文件夹的内容，速度比 ASP.Net 将它们放在那里更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:26:53.203

如果您从 Debug 更改为 Release，您会得到什么不同？

另外，看看原生图像生成：

[使用 NGEN 有帮助吗？](https://stackoverflow.com/questions/385841/does-it-help-to-use-ngen)

最后，100 次引用似乎过多！你在和他们做什么？是你自己的代码吗？您可以将自己的代码合并到单个项目中吗？其中一些引用本身是否引用了 Web 服务或类似的东西？

# android - 在android中编辑带有标签的文本

> ID：15126385
> 
> 赞同：5
> 
> 时间：2013-02-28T02:23:35.733
> 
> 标签：android, android-edittext

![在此处输入图像描述](../Images/58ae33491edda6d64e54f72b4d988ff0.png)

谁能知道怎么做这个？

我认为这是一个editText，但我怎样才能同时放置标签和文本？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T02:27:00.300

试试这个：

```
<FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="40dp" >

        <requestFocus />
    </EditText>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:paddingLeft="10dp"
            android:text="Gender" />
</FrameLayout> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-13T01:15:44.837

您也可以使用“提示”属性：android:hint="@string/hint_email"

*然后，当您输入值时，文本标签将被忽略。*

有关设置提示文本的颜色，请参阅[此处的 stackoverflow](https://stackoverflow.com/questions/30824009/change-edittext-hint-color-when-using-textinputlayout/30824183)

# c++ - __func__ C++11 函数的局部预定义变量，不会编译

> ID：15126387
> 
> 赞同：13
> 
> 时间：2013-02-28T02:24:12.737
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, standards-compliance

函数的`__func__`C++11 本地预定义变量无法在 Visual Studio 2012 Professional（安装了 Update 1）中使用默认的内置 Visual Studio 2012 (v110) 编译器或 2012 年 11 月 CTP (v120_CTP_Nov2012) 编译器进行编译。但是，编辑并没有抱怨 . 下有任何红色波浪下划线`__func__`。`__func__`应该给出其包含函数的名称，在这种情况下`foo`，但这既不会编译也不会让编辑器抱怨：

```
#include <iostream>
using namespace std;

void foo()
{
    cout << __func__ << endl;
    return;
}

int main()
{
    foo();
    return 0;
} 
```

它给出了编译器错误：

```
error C2065: '__func__' : undeclared identifier 
```

我是否在我的代码中遗漏了某些内容，或者这是否会在未来的更新中起作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T02:49:02.007

MSVC 对 C99 的支持总体上很差；您最好的选择可能是使用特定于 MSVC 的`__FUNCTION__`宏。有关详细信息，请参阅此问题：[为宏 __FUNCTION__ 和 __func__ 定义 #define 跨平台](https://stackoverflow.com/questions/2281970/cross-platform-defining-define-for-macros-function-and-func)

**更新 (2015-06-22)**：Visual Studio 2015 支持`__func__`，请参阅[博客文章](http://blogs.msdn.com/b/vcblog/archive/2015/04/29/c-11-14-17-features-in-vs-2015-rc.aspx)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-06-07T09:01:04.083

使用 C++11 标准编译程序，就像`__func__`C++11 功能一样。

所以，像这样编译它：

```
g++ -std=c++11 foo.cpp -o foo 
```

# .net - 更长的发送超时也意味着更长的延迟？

> ID：15126389
> 
> 赞同：0
> 
> 时间：2013-02-28T02:24:17.467
> 
> 标签：.net, performance, wcf, timeout

我经常收到发送超时错误，这可能是由于数据库负载过大和数据庞大。如果发送对 wcf 请求的回复需要 3 分钟，那么将超时设置为 3 分钟以上就足够了。

**但这是否也意味着端口 80 将忙碌 3 分钟，并且在当前回复完成之前不会发送其他回复？**

如果是这种情况，那么我将需要优化我的 WCF 并重建我的索引以及可能对服务器的硬件进行一些升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:49:23.407

是的，WCF 线程系统确实具有可以根据您的服务限制配置和实例模式处理的特定数量的并发线程/进程。它不会为单个请求阻塞端口 80，因此不会妨碍它；但是，如果您有很多同时用户，如果他们都在运行长时间的服务操作调用并使用您的所有线程，则可能会使系统陷入困境。

您仍然应该考虑优化您的服务/数据库。你的普通客户用它做什么？如果是网络，那么显然 3 分钟等待时间太长了。至少我知道如果事情花了那么长时间我会离开的！

俗话说，有很多方法可以给猫剥皮，如果不知道你的整个系统，很难选择一个来使用，所以这里有一些选择（在它上面扔更多的硬件应该是最后的手段）：

从数据库的角度来看，如果获取数据需要很长时间，也许您应该考虑对数据进行反规范化/预处理以使其更容易检索。

从服务的角度来看，有一些方法至少可以将控制权交还给客户端，这样它就可以在等待服务操作完成的同时继续处理。

1.  完成后使用带有回调客户端的双工调​​用
2.  使用带有 ID 的单向请求，手动客户端“检查完成”
3.  使用 MSMQ 处理并保存结果以供客户端在完成时检查

# eclipse - 在 Eclipse 上安装 Aptana Studio3 插件

> ID：15126392
> 
> 赞同：0
> 
> 时间：2013-02-28T02:24:35.143
> 
> 标签：eclipse, macos, aptana, pydev

我有应用了所有更新的 OS X Lion、Eclipse 4.2.1、PyDev 2.7.1。尝试安装 Aptana Studio 3.3.2 Eclipse 插件，但当我尝试（[http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install)）时，出现以下错误。我需要先卸载 PyDev 吗？谢谢！

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Aptana Studio 3 Plugin 3.3.2.201302081500-7G7F17UIS_IYK7UrNh8biKtz0dax (com.aptana.feature.studio.feature.group 3.3.2.201302081500-7G7F17UIS_IYK7UrNh8biKtz0dax)
  Software currently installed: PyDev for Eclipse 2.7.1.2012100913 (org.python.pydev.feature.feature.group 2.7.1.2012100913)
  Only one of the following can be installed at once: 
    Pydev Extensions 1.5.5.2010030420 (com.python.pydev 1.5.5.2010030420)
    Pydev Extensions 2.3.0.2011121518 (com.python.pydev 2.3.0.2011121518)
...several more lines like these, clipped...
  Cannot satisfy dependency:
    From: Aptana Studio 3 Plugin 3.3.2.201302081500-7G7F17UIS_IYK7UrNh8biKtz0dax (com.aptana.feature.studio.feature.group 3.3.2.201302081500-7G7F17UIS_IYK7UrNh8biKtz0dax)
    To: com.aptana.pydev.feature.feature.group [2.7.0.2013012902-7g9I-8Jez0cez0LZfI]
  Cannot satisfy dependency:
    From: Aptana Pydev 2.7.0.2013012902-7g9I-8Jez0cez0LZfI (com.aptana.pydev.feature.feature.group 2.7.0.2013012902-7g9I-8Jez0cez0LZfI)
    To: com.python.pydev [2.7.0.2013012902]
  Cannot satisfy dependency:
    From: PyDev for Eclipse 2.7.1.2012100913 (org.python.pydev.feature.feature.group 2.7.1.2012100913)
    To: com.python.pydev [2.7.1.2012100913] 
```

# sql - 根据 2 列中的值在 SQL 中搜索

> ID：15126399
> 
> 赞同：0
> 
> 时间：2013-02-28T02:25:44.547
> 
> 标签：sql

我的数据库目前有 2 列，我正在尝试返回第 1 列中不包含第 2 列中某个值的所有值：

例如：第 1 列有 9 位随机值，有时会重复。第 2 列有 4 个不同的选项；P1、P2、P3、P4。

我试图仅在第 1 列中显示第 2 列中没有 P4 值的值。如果它们没有 P4，那么我希望它们全部显示，但是一旦第 1 列值关联使用 P4，我不希望显示任何第 1 列值。此过程将继续遍历所有第 1 列值，直到第 1 列中显示的唯一值是没有与之关联的 P4 第 2 列值的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:32:02.017

你的意思是这样的？

```
SELECT *
FROM YOUR_TABLE
WHERE COLUMN1 NOT IN (
    SELECT COLUMN1
    FROM YOUR_TABLE
    WHERE COLUMN2 = 'P4'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:34:48.157

这不就是

```
SELECT column1 FROM <table> WHERE column2 != 'P4' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:35:14.620

这是一个查询示例，您在其中查看集合中的集合——即，column1 的值中的 column2 集合。对于这些查询，我更喜欢使用`group by`and ：`having`

```
select column1
from t
group by column1
having sum(case when column2 = 'P4' then 1 else 0 end) = 0 
```

要获取所有值，您将连接回原始表：

```
select t.*
from t join
     (select column1
      from t
      group by column1
      having sum(case when column2 = 'P4' then 1 else 0 end) = 0
     ) c1
     on t.column1 = c1.column1 
```

# ruby-on-rails - 显示用户 profile_name 知道 user_id

> ID：15126402
> 
> 赞同：0
> 
> 时间：2013-02-28T02:26:10.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在我的指南模型中添加了一个 updated_by 属性，它存储了更新指南的人的 user_id。我想在我的显示视图中显示这个作为 update_by 的人的 profile_name

在guidelines_controller.rb 中：

```
def update

    @guideline = Guideline.find(params[:id])

    respond_to do |format|
      if @guideline.update_attributes(params[:guideline])
        @guideline.update_attribute(:updated_by, current_user.id) 
```

这似乎工作正常并将当前用户的 id 分配给 updated_by。

```
def show

    @guideline = Guideline.find(params[:id])
    @created = @user.where(:id=>@guideline.updated_by).first.profile_name 
```

然后我的显示视图

```
<%= @created %> 
```

错误是

```
NoMethodError (undefined method `where' for nil:NilClass):
  app/controllers/guidelines_controller.rb:137:in `show' 
```

如何从 updated_by id 获取配置文件名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:30:00.347

您需要将查找器作为类方法而不是对象方法来调用。

```
@created = User.where(:id => @guideline.updated_by ).first.profile_name 
```

或者更清洁

```
@created = User.find(@guideline.updated_by).profile_name 
```

您也可能需要搜索`@guideline.updated_by.id`而不是 `@guideline.updated_by`. 在这种情况下，它将是：

```
@created = User.find(@guideline.updated_by.id).profile_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:31:04.510

这一行：

```
@created = @user.where(:id=>@guideline.updated_by).first.profile_name 
```

应该读：

```
@created = User.where(:id=>@guideline.updated_by).first.profile_name 
```

`where`是`User`模型上的类方法。`@user`在这种情况下，（通常）指的是您尚未实例化的用户实例。（它是`nil`；这就是为什么你得到`NilClassError`.）

这条线的一个更干净的版本是：

```
@created = User.find(@guildeline.updated_by).profile_name 
```

由于`User.find`查找给定 user_id 的用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:31:19.217

该错误是由于您在 @user 上调用 where 而不是在 User 上调用。打电话

```
@created = User.where(:id=>@guideline.updated_by).first.profile_name 
```

不确定这是否是唯一的问题，但让我们一个一个地处理它们。

# jquery - 在悬停时显示子菜单并保持在那里

> ID：15126404
> 
> 赞同：0
> 
> 时间：2013-02-28T02:26:25.607
> 
> 标签：jquery, css

当我将鼠标悬停在菜单项上时，背景会改变颜色并且还会显示子菜单。当我将鼠标从菜单项移动到子菜单上时，如何让子菜单继续显示并保留更改背景？

我的html

```
<div class="shoplink"><a>Online Shop</a></div>
<div id="shop-menu">
            <ul>
                <li>Food</li>
                <li>Home & Living</li>
                <li>Personal Assistance</li>
                <li>Kids</li>
                <li>Musical Instruments</li>
                <li>Beauty & Wellbeing</li>
                <li>Outdoor</li>
                <li>Office & Stationery</li>
                <li>Cards & Gift Paper</li>
                <li><b>Browse All</b></li>
            </ul>
        </div> <!-- #shop-menu --> 
```

到目前为止我的JS....

```
$('#shop-menu').hide();
$('.shoplink').live('hover', function(e) {
    $(this).toggleClass('activeitem');
    $('#shop-menu').toggle();
}); 
```

因此，当我将鼠标悬停在 .sublink 上时，我可以显示商店菜单。当我将鼠标从 .shoplink 移动到 #shop-menu 以选择一个项目时，我只是将其保留在那里。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:29:59.200

尝试将下拉菜单项放在菜单项中

```
<div class="shoplink">
     <a>Online Shop</a>
     <div id="shop-menu">
            <ul>
                <li>Food</li>
                <li>Home & Living</li>
                <li>Personal Assistance</li>
                <li>Kids</li>
                <li>Musical Instruments</li>
                <li>Beauty & Wellbeing</li>
                <li>Outdoor</li>
                <li>Office & Stationery</li>
                <li>Cards & Gift Paper</li>
                <li><b>Browse All</b></li>
            </ul>
     </div> <!-- #shop-menu -->
</div> 
```

演示：http: [//jsfiddle.net/cU629/](http://jsfiddle.net/cU629/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:30:02.920

我认为您的工具正在显示和隐藏菜单...尝试：

```
$('#shop-menu').hide();
$('.shoplink').live('hover', function(e) {
    $(this).addClass('activeitem');
    $('#shop-menu').show();
}); 
```

为了将其改回，您可以检查@Madhu Rox 的答案并这样做：

```
$('#shop-menu').live('mouseleave', function(e) {
    $('.shoplink').removeClass('activeitem');
    $('#shop-menu').hide();
}); 
```

您也可以`unbind`像悬停事件一样`$(this).unbind('hover');`，但是，如果页面中的另一个操作将其关闭并且您想重新打开，则必须重新绑定悬停事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:28:25.487

更改您的 HTML 以包装整个子菜单和菜单项`<div class="shoplink">`

你的代码会像

```
<div class="shoplink">
  menu item
    sub menu
</div> 
```

或作为先前的答案，将您的 java 脚本更新为

```
$('#shop-menu').hide();
$('.shoplink').live('hover', function(e) {
    $(this).addClass('activeitem');
    $('#shop-menu').show();
}); 
```

并在之后添加以下代码

```
$('#shop-menu').live('mouseleave', function(e) {
    $('.shoplink').removeClass('activeitem');
    $('#shop-menu').hide();
}); 
```

# php - 在 onchange 中调用 php 文件有什么问题

> ID：15126406
> 
> 赞同：0
> 
> 时间：2013-02-28T02:26:53.800
> 
> 标签：php, html

```
mainTwo.php:

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd"
    >
<html lang="en">
<head>
    <title>Setlist</title>
</head>
<body>

<?php require 'provsetlist.php'; ?>
<? include("combo.php"); ?>

    <script  type="text/javascript" src="crlist.js"> </script>

</body>
</html> 
```

组合.php

```
<?php

echo '<select id="tunelist" name="tunelist" onchange="Window.location=provsetlist.php">'; 
$link = mysql_connect('localhost', 'setlist', 'music');
$query = mysql_query("SHOW DATABASES");
while ($row = mysql_fetch_assoc($query)) {
   echo '<option value="'.$row['Database'].'">'.$row['Database'].'</option>';
}
echo '</Select>'
?> 
```

这会引发 ReferenceError: provsetlist is not defined

我查看了一堆示例和教程，但无法弄清楚这一点。我假设我需要定义 provsetlist.php 但在哪里以及如何定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:32:51.760

```
onchange="window.location.href = './provsetlist.php';" 
```

# java - 按字符比较 2 个字符串以找出差异

> ID：15126410
> 
> 赞同：0
> 
> 时间：2013-02-28T02:27:04.983
> 
> 标签：java, string, binary, iterator

只是想知道是否有一种快速的方法来确定 @ 字符串中元素不同的点。我有 2 个二进制字符串，我想知道@它们不一样的地方有多少。

```
1111111100010001111011100010001011011101001100111100110001000100
0001001011001101110110000101001111111010000000010001110001000000 
```

所以我想我需要一个 for 循环和一个计数器，但我只知道 compare() 和类似的东西，但不知道如何逐个字符地进行。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:41:00.287

将字符串转换为字节数组并使用 XOR (^) 运算符。

计算 1 的个数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:28:29.140

编写自己的[KMP变体实现](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:35:24.700

```
 public static int diff( byte [] a, byte [] b){
    int diff = 0;
    String byteAr1;
    String byteAr2;
    char A1 [];
    char A2 [];

    byteAr1 = hexToBin(a);
    byteAr2 = hexToBin(b);

    A1 = byteAr1.toCharArray();
    A2 = byteAr2.toCharArray();

    for( int i = 0; i < A1.length; i++){
        if(A1[i] != A2[i]){
            diff++;
        }
    }
    return diff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T02:35:48.487

你的弦总是一样长吗？如果是这样，您可以执行以下操作：

```
for(int i = 0; i < string1.length(); i++) {
    if(string1.charAt(i) == string2.charAt(i))
    //the two chars are equal
} 
```

如果字符串的长度不同，则会失败，因为您将尝试访问不存在的字符

# jquery - 如何阻止粘性div在页脚上重叠？

> ID：15126416
> 
> 赞同：0
> 
> 时间：2013-02-28T02:27:45.307
> 
> 标签：jquery

我已将不同博客中的代码复制到我的小提琴帐户中。一切正常。当您向下滚动页面时，黄色条会粘在页面上，当您滚动到底部时，页脚会将黄色条向上推，这绝对没问题。但问题是，当我通过单击“添加”按钮添加文本框超过 10 到 15 次时，黄色条与页脚重叠，文本框位于浏览器窗口下方且不可见。我希望页脚将黄色粘性条向上推，即使它的高度很小或很大。任何人都可以帮我解决问题吗？

[演示在这里 http://jsfiddle.net/awaises/k7xfc/](http://jsfiddle.net/awaises/k7xfc/)

**jQuery**

```
$window = $(window),
$sidebar = $(".sidebar"),
sidebarTop = $sidebar.position().top,
sidebarHeight = $sidebar.height(),
$footer = $(".footer"),
footerTop = $footer.position().top,    
$sidebar.addClass('fixed');

$window.scroll(function(event) {
scrollTop = $window.scrollTop(),
topPosition = Math.max(0, sidebarTop - scrollTop),
topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
$sidebar.css('top', topPosition);
});

$(document).ready(function () {
var counter = 2;
$("#addButton").click(function () {

        $('<div/>',{'id':'TextBoxDiv' + counter}).html(
          $('<label/>').html( 'Textbox #' + counter + ' : ' )
        )
        .append( $('<input type="text">').attr({'id':'textbox' + counter,'name':'textbox' + counter}) )
        .appendTo( '#TextBoxesGroup' )       
        counter++;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:07:49.893

阻止您获得预期结果的主要问题是您的代码正在使用*初始*计算的侧边栏高度，而不是在每个滚动事件期间获取更新的高度。

```
$window.scroll(function (event) {
    var scrollTop = $window.scrollTop();
    var topPosition = Math.max(0, sidebarTop - scrollTop);

    // Ensure you are using the current sidebar height and not the initial height
    topPosition = Math.min(topPosition, (footerTop - scrollTop) - $sidebar.height());

    $sidebar.css('top', topPosition);
}); 
```

我推荐的另一个建议是在`addButton`单击处理程序期间触发窗口滚动处理程序，以确保在添加项目时进行适当的调整。

```
$("#addButton").click(function () {
    $('<div/>', {
        'id': 'TextBoxDiv' + counter
    }).html(
    $('<label/>').html('Textbox #' + counter + ' : '))
        .append($('<input type="text">').attr({
            'id': 'textbox' + counter,
            'name': 'textbox' + counter
    })).appendTo('#TextBoxesGroup');

    // Trigger the scroll handler to ensure the sidebar is properly positioned
    $window.triggerHandler('scroll');

    counter++;
}); 
```

**[演示](http://jsfiddle.net/SVzmz/1/)**

# jquery - jQuery & Ajax：一键触发两个事件并更新两个 div

> ID：15126419
> 
> 赞同：0
> 
> 时间：2013-02-28T02:28:26.543
> 
> 标签：jquery, ajax, google-app-engine

我正在使用 Python 开发 Google App 引擎。我有一个网页，其中有一个`login`div 和一个`menu`div。我希望当用户成功登录后，系统会在`login`div 中显示一条问候消息，同时 div 中的项目`menu`会根据用户的权限进行调整。模板引擎也用于更新 div。

代码如下：

HTML：

```
...
<div id="loginDiv">
  {% if not loggedIn %}
    <form class="loginSubmitForm" action="/login" method="post">
      Account: <input type="text" name="account" /><br />
      Password: <input type="password" name="password" /><br />
      <input type="submit" value="Log in" />
    </form>
  {% else %}
    {{gretingMessage}}
  {% endif %}
</div>

...

<div id="menuDiv">
  {% if privlige1 %}
    some items
  {% else %} {% if previlige2 %}
    other items
  {% endif %} {% endif %}
</div>

... 
```

jQuery：

```
// Login submit form
$('.loginSubmitForm').ajaxForm({
  success: function(returnData) {
    $('#loginDiv').html(returnData);
  }
}); 
```

我的问题：如何触发两个事件并仅通过一次登录单击更新两个 div？

# javascript - 根据路由切换 ng-include 的可见性

> ID：15126423
> 
> 赞同：7
> 
> 时间：2013-02-28T02:28:54.093
> 
> 标签：javascript, angularjs, angularjs-routing

我有以下配置：

```
$routeProvider
.when('/cars', { templateUrl: 'app/cars/index.html', controller: 'CarsCtrl', reloadOnSearch: false })
.when('/bikes', { templateUrl: 'app/bikes/index.html', controller: 'BikesCtrl', reloadOnSearch: false }); 
```

在我的根 index.html 的某个地方有一个：

```
<a href="#/cars">Cars</a>
<a href="#/bikes">Bikes</a>
<div ng-view></div> 
```

现在，我希望同时**在 DOM 中加载和生成**两个视图，并根据路由/URL 显示其中一个。

类似于以下内容（不是实际的工作代码，只是为了给您一个想法）。

应用程序.js：

```
$routeProvider
.when('/cars', { controller: 'CarsCtrl', reloadOnSearch: false })
.when('/bikes', { controller: 'BikesCtrl', reloadOnSearch: false }); 
```

根索引.html：

```
<a href="#/cars">Cars</a>
<a href="#/bikes">Bikes</a>
<div ng-include="'app/cars/index.html'" ng-show="carsVisible"></div>
<div ng-include="'app/bikes/index.html'" ng-show="bikesVisible"></div> 
```

**更新**：我知道 ng-view 可以做到这一点，但存在细微差别。我希望每个视图的 html 生成一次并始终保留在 DOM 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T01:51:30.697

我创建了一个 RouteCtrl 来通过 ng-include 加载所有视图。不使用 ng-view。我内联了模板。模板可以包含它们自己的 ng-controller 指令来引入特定的控制器。

```
<body ng-controller="RouteCtrl">
  <a href="#/cars">Cars</a>
  <a href="#/bikes">Bikes</a>
  <div ng-controller="RouteCtrl">
      <div ng-include="'/cars.html'"  ng-show="carsVisible"></div>
      <div ng-include="'/bikes.html'" ng-show="bikesVisible"></div>
  </div>

  <script type="text/ng-template" id="/cars.html">
     Cars template.
  </script> 
  <script type="text/ng-template" id="/bikes.html">
     Bikes template.
  </script> 
```

$routeProvider 仍然配置，但没有指定模板或控制器，导致 RouteCtrl 始终处于活动状态。该控制器监听`$routeChangeSuccess`事件并相应地操作 ng-show 属性。

```
app.config(function($routeProvider) {
  $routeProvider
     .when('/cars', {} )
     .when('/bikes', {})
});

app.controller('RouteCtrl', function($scope, $route, $location) {
  $scope.$on('$routeChangeSuccess', function() {
    var path = $location.path();
    console.log(path);
    $scope.carsVisible = false;
    $scope.bikesVisible = false;
    if(path === '/cars') {
       $scope.carsVisible = true;
    } else if(path === '/bikes') {
       $scope.bikesVisible = true;
    }
  });
}); 
```

[普朗克](http://plnkr.co/edit/7gJMIH6ZTsj14j6iSv4X?p=preview)

这个解决方案的想法来自[@Andy](https://stackoverflow.com/a/11180019/215945)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-23T20:42:10.250

我找到了另一种方式，我认为这是最简单、最快捷和最易于管理的方式：

[如何使用 Angular JS 设置引导导航栏活动类？](https://stackoverflow.com/questions/16199418/how-do-i-implement-the-bootstrap-navbar-active-class-with-angular-js)

这是：

使用 ng-controller 在 ng-view 之外运行单个控制器：

```
<div class="collapse navbar-collapse" ng-controller="HeaderController">
    <ul class="nav navbar-nav">
        <li ng-class="{ active: isActive('/')}"><a href="/">Home</a></li>
        <li ng-class="{ active: isActive('/dogs')}"><a href="/dogs">Dogs</a></li>
        <li ng-class="{ active: isActive('/cats')}"><a href="/cats">Cats</a></li>
    </ul>
</div>
<div ng-view></div> 
```

并包含在 controllers.js 中：

```
function HeaderController($scope, $location) 
{ 
    $scope.isActive = function (viewLocation) { 
        return viewLocation === $location.path();
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:42:35.267

`ng-include`您应该使用;而不是使用`ng-view`;

这将显示`app/cars/index.html`或`app/bikes/index.html`

```
<a href="#/cars">Cars</a>
<a href="#/bikes">Bikes</a>
<div ng-view></div> 
```

请参阅[http://docs.angularjs.org/tutorial/step_07中的](http://docs.angularjs.org/tutorial/step_07)**模板**部分

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T10:27:09.227

使用带有 show 指令的服务：

```
<div ng-show="myService.isActive('/')">Show this when at default route</div>
<div ng-show="myService.isActive('/cars')">Show this when at cars</div> 
```

服务：

```
myApp.factory('MyService',
    function ($location) {
        return {
            isActive: function (path) {
                return (($location.path() == path));
            }
        }
    }
); 
```

应用程序.js：

```
// this is run after angular is instantiated and bootstrapped
myApp.run(function ($rootScope, myService) {
    $rootScope.breadcrumbService = MyService;
}); 
```

# c# - Oledb 更新命令

> ID：15126427
> 
> 赞同：4
> 
> 时间：2013-02-28T02:29:20.837
> 
> 标签：c#, oledb

我做了一个保存和更新数据库数据的程序，我可以保存和读取数据，我也可以更新，但问题是，我不能选择作为索引，这是我使用作为索引的`"ID"`示例代码，`"ID"`

```
cmd = new OleDbCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "UPDATE Records SET FirstName = @firstname, LastName = @lastname, Age = @age, Address = @address, Course = @course WHERE [ID] = @id";
cmd.Parameters.AddWithValue("@id", int.Parse(label7.Text));
cmd.Parameters.AddWithValue("@firstname", textBox1.Text);
cmd.Parameters.AddWithValue("@lastname", textBox2.Text);
cmd.Parameters.AddWithValue("@age", textBox3.Text);
cmd.Parameters.AddWithValue("@address", textBox4.Text);
cmd.Parameters.AddWithValue("@course", textBox5.Text);
cmd.Connection = cn;
cn.Open();
cmd.ExecuteNonQuery();
{
    MessageBox.Show("Update Success!");
    cn.Close();
} 
```

这是我的更新代码，但索引是`"firstname"`，

```
cmd = new OleDbCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "UPDATE Records SET FirstName = @firstname, LastName = @lastname, Age = @age, Address = @address, Course = @course WHERE FirstName = @firstname";
//cmd.Parameters.AddWithValue("@id", int.Parse(label7.Text));
cmd.Parameters.AddWithValue("@firstname", textBox1.Text);
cmd.Parameters.AddWithValue("@lastname", textBox2.Text);
cmd.Parameters.AddWithValue("@age", textBox3.Text);
cmd.Parameters.AddWithValue("@address", textBox4.Text);
cmd.Parameters.AddWithValue("@course", textBox5.Text);
cmd.Connection = cn;
cn.Open();
cmd.ExecuteNonQuery();
{
    MessageBox.Show("Update Success!");
    cn.Close();`
} 
```

它有效，但问题是我无法更新`"FirstName"`，有没有办法也可以更新名字？或使用`"ID"`作为索引？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T03:12:08.823

我不知道您要反对什么数据库，但是，我不知道 OleDB 是否对您的参数的序数顺序很挑剔。即：您是否尝试将“ID”参数放在最后一个位置以匹配更新命令字段的实际顺序？不知道是不是扔了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-28T21:04:20.303

您应该在最后一行之后添加以下代码`ID`：

```
cmd = new OleDbCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "UPDATE Records SET FirstName = @firstname, LastName = @lastname, Age = @age, Address = @address, Course = @course WHERE [ID] = @id";
cmd.Parameters.AddWithValue("@firstname", textBox1.Text);
cmd.Parameters.AddWithValue("@lastname", textBox2.Text);
cmd.Parameters.AddWithValue("@age", textBox3.Text);
cmd.Parameters.AddWithValue("@address", textBox4.Text);
cmd.Parameters.AddWithValue("@course", textBox5.Text);
cmd.Parameters.AddWithValue("@id", int.Parse(label7.Text));
cmd.Connection = cn;
cn.Open();
cmd.ExecuteNonQuery(); {
    MessageBox.Show("Update Success!");
    cn.Close();
} 
```

# c# - 如何从服务器中的客户端池中识别客户端 - 设计

> ID：15126428
> 
> 赞同：2
> 
> 时间：2013-02-28T02:29:24.467
> 
> 标签：c#, c++, sockets, network-programming

好的，所以我有一个正在工作的客户端/服务器库。服务器可以接受来自客户端的多个连接。在每次调用 Accept() 时，如果成功，客户端套接字的句柄将被推送到映射，并使用假定的唯一 ID 作为键。这样当服务器稍后想要向特定客户端发送消息时，它会使用此 ID 找到客户端。

我的问题：每个客户的唯一 ID 是什么？IP 地址是不可能的，因为多个客户端可以来自同一个 IP 地址。如果没有，任何人都可以提出其他一些好的设计。谢谢

插图：

```
ClientSocket workerSock = Server.Accept();

Map.Add(workerSock);

       Map
____________________
|Key   | Value     |
|------------------|
| ?    |workerSock1| ------------------------ client application 1
|------------------|
| ?    |workerSock2| ------------------------ client application 2
|------------------|
| ?    |workerSock3| ------------------------ client application 3
-------------------- 
```

场景：服务器想要发送给特定的客户端，所以它必须有一些 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:46:21.793

[我们在创建网络库networkComms.net](http://www.networkcomms.net)时解决了类似的问题。我们的解决方案是通过 IPEndPoint ( [MSDN](http://msdn.microsoft.com/en-gb/library/system.net.ipendpoint.aspx) )、Guid ( [MSDN](http://msdn.microsoft.com/en-us/library/cey1zx63.aspx) ) 和连接类型（例如 TCP、UDP 等）来跟踪对等点。Guid 在高级连接握手期间交换，以便两端都知道对方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:35:53.593

也许，`workerSock.GetHashCode()`会吗？

# macos - 如何在 NSSearchField 中自定义光标？

> ID：15126429
> 
> 赞同：2
> 
> 时间：2013-02-28T02:29:34.980
> 
> 标签：macos, cocoa, nstextfield, nstextview, nssearchfield

这似乎应该很容易，但任何人都可以给我指点如何做到这一点？似乎我应该继承 NSTextView 并使用 drawInsertionPointInRect:color:turnedOn: 但我该怎么做呢？我真的不想做大的定制，也许只是稍微厚一点或短一点，但问题是在哪里？

谢谢，

rc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:59:45.023

这不是很直接，因为 a`NSSearchField`是`NSTextField`and not的子类`NSTextView`。但是，每个都`NSTextField`使用一个代理`NSTextView`进行绘图，并且这个代理`NSTextView`（称为字段编辑器）由当前窗口维护。因此，您要做的是创建您的自定义`NSTextView`子类，在您的窗口控制器（或您用作窗口委托的任何地方）中将其实例化，然后创建以下方法：[`windowWillReturnFieldEditor:toObject:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSWindowDelegate/windowWillReturnFieldEditor%3atoObject%3a).

在该方法中，您检查 toObject 是否是您的搜索字段（或只是任何搜索字段，以防您想为窗口中的每个搜索字段覆盖它），然后返回您的 custom `NSTextView`，否则返回`nil`默认字段编辑器默认行为。

# sql-server - SQL Server XML 字符串操作

> ID：15126430
> 
> 赞同：1
> 
> 时间：2013-02-28T02:29:36.867
> 
> 标签：sql-server, xml, sql-server-2008-r2

让我声明我是 XML 新手。也就是说，我的问题是我有一个创建 XML 数据的 SQL Server，并将其放入必须通过安全门到达另一台服务器的文件中。门有一个列表，其中包含几个“脏”字，如果它们被包含，将导致文件失败。我需要的是一种 SQL 搜索 XML 数据、每个节点的方法，如果存在“脏”值，则将其删除（替换为空白）。XML 不是强类型的，“脏”字可能是较长字符串的一部分。在这种情况下，字符串的其余部分必须保持完整。

例如，如果“脏”字是“持有”，则字符串“我们认为这些真理是不言而喻的”将变成“我们这些真理是不言而喻的”。

同样，这个“脏”字可能在任何节点中，并且标签并不总是相同的。我需要编写一个基于脏字列表分析 XML 值的过程或触发器来清理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:48:00.703

将 XML 分解为一个表，每个节点都有一行。该表需要一个与已分解 XML 中的节点位置相对应的 id，以便能够写回更改。

将您的坏词放在一个表中，并为每个词使用`replace`节点值从表中删除它们。

最后，您遍历清理过的值并将它们一次写回 XML 一个节点，用于实际修改的节点。

```
-- A table to hold the bad words
declare @BadWords table
(
  ID int identity,
  Value nvarchar(10)
)

-- These are the bad ones.
insert into @BadWords values
('one'),
('three'),
('five'),
('hold')

-- XML that needs cleaning
declare @XML xml = '
<root>
  <itemone ID="1one1">1one1</itemone>
  <itemtwo>2two2</itemtwo>
  <items>
    <item>1one1</item>
    <item>2two2</item>
    <item>onetwothreefourfive</item>
  </items>
  <hold>We hold these truths to be self evident</hold>
</root>
'

-- A helper table to hold the values to modify
declare @T table
(
  ID int identity,
  Pos int,
  OldValue nvarchar(max),
  NewValue nvarchar(max),
  Attribute bit
)

-- Get all attributes from the XML
insert into @T(Pos, OldValue, NewValue, Attribute)
select row_number() over(order by T.N),
       T.N.value('.', 'nvarchar(max)'),
       T.N.value('.', 'nvarchar(max)'),
       1
from @XML.nodes('//@*') as T(N)

-- Get all values from the XML
insert into @T(Pos, OldValue, NewValue, Attribute)
select row_number() over(order by T.N),
       T.N.value('text()[1]', 'nvarchar(max)'),
       T.N.value('text()[1]', 'nvarchar(max)'),
       0
from @XML.nodes('//*') as T(N)

declare @ID int
declare @Pos int
declare @Value nvarchar(max)
declare @Attribute bit

-- Remove the bad words from @T, one bad word at a time
select @ID = max(ID) from @BadWords
while @ID > 0
begin
  select @Value = Value
  from @BadWords
  where ID = @ID

  update @T
  set NewValue = replace(NewValue, @Value, '')

  set @ID -= 1
end

-- Write the cleaned values back to the XML
select @ID = max(ID) from @T
while @ID > 0
begin
  select @Value = nullif(NewValue, OldValue),
         @Attribute = Attribute,
         @Pos = Pos
  from @T
  where ID = @ID

  print @Attribute

  if @Value is not null
    if @Attribute = 1  
      set @XML.modify('replace value of ((//@*)[sql:variable("@Pos")])[1] 
                       with sql:variable("@Value")')
    else
      set @XML.modify('replace value of ((//*)[sql:variable("@Pos")]/text())[1] 
                           with sql:variable("@Value")')
  set @ID -= 1
end

select @XML 
```

注意：在某些情况下，上面的代码不会处理修改本身会产生错误值的值。

```
<item>fioneve</item> 
```

将被修改为

```
<item>five</item> 
```

# ios - 将图像插入 EGOTextView

> ID：15126436
> 
> 赞同：1
> 
> 时间：2013-02-28T02:30:03.853
> 
> 标签：ios, image, rich-text-editor

我已经下载了一个 EGOTextView Demo。并用它做一些富编辑器。现在的问题是，我怎样才能在其中插入图像？任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T17:20:53.613

[有](https://github.com/enormego/EGOTextView/issues/17) 一些描述如何将图像添加到 EGOTextView，但它没有完全描述解决方案

# android - Android webview 不显示内部存储的适合屏幕的 HTML

> ID：15126437
> 
> 赞同：1
> 
> 时间：2013-02-28T02:30:04.170
> 
> 标签：android, html, webview

它只是一个简单的文本，它显示在 AVD 的左上角

```
setContentView(R.layout.activity_main);

WebView myWebView = (WebView) findViewById(R.id.webview);

myWebView.getSettings().setLoadWithOverviewMode(true);
myWebView.getSettings().setUseWideViewPort(true);

WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
myWebView.loadUrl("file:///android_asset/new2.html"); 
```

这是非常基本的xml，一旦完成，我将稍后添加更多小部件。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   tools:context=".MainActivity" >
  <WebView android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  </WebView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:13:06.383

![在此处输入图像描述](../Images/d2563e7f00ff8da2d1e7b9aecfc52028.png)我不确定这是否是您的意思，但我认为您想显示 html 文件并适合屏幕。

我现在刚刚做了一个项目，它正在工作。

**xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**主要活动**

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView myWebView = (WebView) findViewById(R.id.webView1);

        myWebView.getSettings().setLoadWithOverviewMode(true);

        myWebView.getSettings().setUseWideViewPort(true);

        WebSettings webSettings = myWebView.getSettings();

        webSettings.setJavaScriptEnabled(true);

        myWebView.loadUrl("file:///android_asset/new2.html");
    } 
```

**编辑** 您的网络视图不是问题，它正在填满屏幕。这是您需要更改的 HTML。我不擅长网络东西，但我确信有办法解决这个问题，但它与 Android 无关。同时，如果您愿意，您可以添加缩放此代码以添加缩放控件：

```
myWebView.getSettings().setBuiltInZoomControls(true); 
myWebView.getSettings().setSupportZoom(true); 
```

# c++ - 如何让 QPushButton 移动 onMouseClick？

> ID：15126438
> 
> 赞同：0
> 
> 时间：2013-02-28T02:30:08.647
> 
> 标签：c++, qt

我有 2 个 QPushButton，其中一个没有视觉提示它已被按下，另一个将 QPixmap 向下和向右移动 1 或 2 个像素。我不知道为什么第一个不做与第二个相同的动作。我如何让它也这样做？（是否有一些我已经覆盖的 QSS 可以做到这一点？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:38:13.630

似乎您的 QPushButton 之一是“默认”。为所有必要的状态创建正确的样式（删除填充）：[http ://doc.qt.digia.com/4.7/stylesheet-examples.html#customizing-qpushbutton](http://doc.qt.digia.com/4.7/stylesheet-examples.html#customizing-qpushbutton)

# ruby-on-rails - 验证失败时重新填充表单

> ID：15126440
> 
> 赞同：7
> 
> 时间：2013-02-28T02:30:17.833
> 
> 标签：ruby-on-rails

我有一个表格供用户在他们的个人资料页面上创建一个问题（除了用户模型之外，还有一个问题模型，带有嵌套的答案）。它从用户个人资料页面 /views/users/show.html.erb 提交到 questions_controller.rb 的创建操作。如果它没有验证，我认为 Rails 的默认设置是呈现表单（表单中包含无效信息供用户编辑）。但是，由于我是从用户个人资料页面提交问题模型的表单，因此在验证失败时不会发生预填充；用户被迫再次输入表单中的所有信息。在这种情况下，有没有办法让用户显示页面上的表单填写提交之前输入的信息？

questions_controller

```
def create
    @question = current_user.questions.build(params[:kestion])

    if @question.save
      redirect_to current_user, :notice => "Successfully created question."
    else
      ###render  :action => 'show'
      redirect_to current_user

    end
  end 
```

更新我也改变了创建方法的结尾

```
Redirect ( : back ), :notice => "something went wrong.try again" 
```

但是我仍然无法填充表单，并且验证错误消息也没有显示，只有 Flash 通知。

更新用户控制器的 show 方法创建新问题（与用户一起）

```
 def show
        @user = User.find(params[:id])
        @question = Question.new 
        3.times {@question.answers.build}

   end 
```

/views/users/show.html.erb

```
<%= form_for @question do |f| %>
   <% if @question.errors.any? %>
  <h2><%= pluralize(@question.errors.count, "error") %> prohibited this question
    from being saved: </h2>
    <ul>
      <% @question.errors.full_messages.each do |msg| %>
      <li> <%= msg %></li>
    <% end %>
    </ul>   
  <% end %>
  <p>
     <%= f.label :content, "Question"%>
    <%= f.text_area :content, :class => 'span4', :rows => 1 %>   
  </p>
  <p>
    <%= f.label :link, "QuoraLink" %>
    <%= f.text_field :link, :class => 'span4', :rows => 1  %>   
  </p>  
  <%= f.fields_for :answers do |builder| %>
    <p>
      <%= render 'answer_fields', :f => builder %>
    </p>
   <% end %>
   <p><%= link_to_add_fields "Add Answer", f, :answers %></p>
  <p><%= f.submit %></p>
<% end %> 
```

从问题部分呈现的 answer_fields 部分

```
<p class="fields">
<%= f.label :content, "Answer..." %>

  <%= f.text_field :content, :class => 'span3', :rows => 1%>

   <%= f.label :correctanswer, "Correct" %>
  <%= f.check_box :correctanswer, :class => 'span1' %>

   <%= link_to_remove_fields "remove answer", f %>      
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:30:40.580

首先，使用 using`redirect_to`而不是`render`不会重新填充表单的原因是，当 you 时`redirect_to`，操作的控制器逻辑运行，而 using`render`忽略了控制器逻辑。

因此，当您`render :action => 'show'`（“默认”行为）时，它会呈现`show.html.erb`，`@question`设置如下：

```
@question = current_user.questions.build(params[:kestion]) 
```

当 you 时，它会使用您的操作中的代码与set一起`redirect_to current_user`呈现：`show.html.erb``@question``show`

```
@question = Question.new 
3.times {@question.answers.build} 
```

这就是为什么您会得到一个新的（空白）表格，而不是预先填充的表格。

你使用它*真的*那么重要`redirect_to`吗？如果是，您需要获取您的`show`方法来进行验证。例如，您可以将您的`show`方法重写为：

```
def show
  @user = User.find(params[:id])
  if params.has_key?(:kestion)
    @question = @user.questions.build(params[:kestion])
  else
    @question = Question.new 
    3.times {@question.answers.build}
  end
end 
```

然后将您的表单指向该页面，例如：

```
<%= form_for(@question, url: users_path(@question.user) do |f| %>
  ...
<% end %> 
```

（取决于您的路线是如何设置和命名的）。当然，到那时，整个事情变得可怕地缺乏 RESTful，有点混乱，而且绝对不是 Rails 的做事方式。（另一个更糟糕的选择是重定向回来并通过 get 查询传递参数。）在我看来，你会因为一点点收获而失去很多，我不确定我是否真的会推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T05:31:40.113

目前，在 views/users/show.rb 你做

```
@question = Question.new 
```

这会产生一个空的新问题。然后使用这个空模型填充表单。你可以做的是：

```
if session[:question]
  @question = @user.questions.new(session[:question])
  session[:question] = nil
  @question.valid? # run validations to to populate the errors[]
else
  @question = Question.new
end 
```

现在剩下要做的就是在你的 questions_controller 中填充 session[:question]，然后重定向到:controller=>"users", :action=>"show"。就像是：

```
if @question.save
  redirect_to current_user, :notice => "Successfully created question."
else
  session[:question] = params[:question]
  redirect_to current_user
end 
```

您可能需要额外进行序列化/反序列化以填充/使用 session[:question]。我没有尝试编译，所以不确定。

所有这些都是必需的，因为当您执行 redirect_to 您对用户请求的处理结束时，用户浏览器会从您的服务器获取重定向状态代码并转到另一个页面，向您发送一个新请求（该请求落在路径上，最终到达控制器 /操作，您重定向到该操作）。因此，一旦您从请求处理中返回，您的所有变量都会丢失。对于下一个请求，您从头开始。

该`render :action => "show"`方法（在原始脚手架中并且您已注释掉）之所以有效，是因为您没有返回给用户，而是使用您已经拥有的变量（包括@question，在哪个 ' save' 被调用并失败，因此内部验证被调用并填充了错误对象）。

实际上，这提醒我您可能想使用另一种方法。与其通过 session[] 传递参数并重定向到 UsersController，您可能希望填充所有必需的变量并仅从该控制器呈现视图。如下所示：

```
if @question.save
  redirect_to current_user, :notice => "Successfully created question."
else
  @user = current_user
  render "users/show"
end 
```

# java - 未为 Scanner 类型定义方法 split(String)

> ID：15126448
> 
> 赞同：0
> 
> 时间：2013-02-28T02:31:17.493
> 
> 标签：java

为什么我不能使用 split 方法`input`？在 Eclipse 中，它说： 对于 Scanner 类型，方法 split(String) 未定义。我不知道我做错了什么，如果有人可以指导我正确的方向。

```
btnFile.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {

        JFileChooser chooser = new JFileChooser("C:\\");
        chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);

        FileNameExtensionFilter filter = new FileNameExtensionFilter(
                " Only .txt", "txt");
        chooser.setFileFilter(filter);

        int code = chooser.showOpenDialog(null);
        if (code == JFileChooser.APPROVE_OPTION) {
            File selectedFile = chooser.getSelectedFile();
            Scanner input;
            try {
                input = new Scanner(selectedFile); // <-- Here
                String[] splits = input.next().split(" "); <-- And here

                for (int i = 0; i < splits.length; i++) {
                    textArea.setText(splits[i]);
                    System.out.println(splits[i]);
                }
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:34:36.247

在尝试之前，您必须先摆脱[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)困境。您可能正在寻找或。[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)[`Scanner.next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)[`Scanner.nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)

如果您尝试读取整个文件，则需要使用循环一次读取一行，直到[`Scanner.hasNextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextLine%28%29)返回 false。`String`或者，您可以使用[commons-io FileUtils.readFileToString()](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File%29)将整个文件读入。

# c++ - CALLBACK 关键字在 Win-32 C++ 应用程序中的含义是什么？

> ID：15126454
> 
> 赞同：8
> 
> 时间：2013-02-28T02:31:55.520
> 
> 标签：c++, windows, winapi, visual-c++

Win-32 C++ 应用程序中的一些函数调用应用了`CALLBACK`关键字，如下例所示（取自[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644996%28v=vs.85%29.aspx#modal_box)）：

```
BOOL CALLBACK DeleteItemProc(HWND hwndDlg, UINT message,
                             WPARAM wParam, LPARAM lParam) 
{
    // ... code here ...
} 
```

我通过 Visual Studio 看到`CALLBACK`关键字被定义（使用`#define`）为`__stdcall`. [__stdcall 文档](http://msdn.microsoft.com/en-us/library/zxk0tw93%28v=vs.80%29.aspx)并没有让它更清楚（至少对我来说）它的作用。

简而言之，**using`CALLBACK`对我**有什么用？它是绝对必要的，还是我可以不做那个声明？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T02:38:32.933

这是必需的，__stdcall 不是大多数编译器的默认调用约定。__cdecl 是正常的默认值。调用约定错误将使您的程序行为异常，难以诊断。参数值错误，堆栈变得不平衡。

这只是 32 位代码的问题，64 位代码只有一个调用约定。谁再添一个，谁就将被立即禁止在南大西洋的一个小岛上生活。__stdcall 是一个历史性的事故，始于 DOS 和 16 位 Windows 中的 pascal 调用约定，当可用内存如此之少时，从调用中删除指令很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:49:43.407

`CALLBACK`不是关键字。它只是一个预处理器宏，它被适当的调用约定替换，正如您已经注意到的那样，它是`__stdcall`.

这是一种“类似 Pascal”的调用约定，[不支持可变数量的参数](http://www.nynaeve.net/?p=53)，Win32 API 从早期就使用它，并且由于历史原因仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:36:00.930

`CALLBACK`被定义为`__stdcall`机制。但这本身就是一个函数，它会在发生事件（比如）时被其他函数调用。

是必须的吗？是的！为什么？因为默认是`__cdecl`

# mobile - 媒体查询工作但不正确

> ID：15126456
> 
> 赞同：0
> 
> 时间：2013-02-28T02:32:22.820
> 
> 标签：mobile, media, tablet

我有点问题。我在[http://www.nickpassaro.com/ClientSiteDev/New-NPD/](http://www.nickpassaro.com/ClientSiteDev/New-NPD/)建立了一个响应式站点，但由于某种原因，虽然它在桌面上完美运行，并且在您调整浏览器窗口大小时可以正确重新排列其布局，但它不是t 在移动设备上正常工作。在 iPhone 上，它将我发送到平板电脑站点，在 windows phone 8 上，它向我显示移动站点，但一切看起来都被缩小了。我的媒体查询设置为移动设备使用低于 640 像素，平板电脑使用低于 960，桌面使用超过 960。有人可以在我的网站上点击查看源代码，看看他们是否可以看到为什么它使用设备像素而不是 CSS 像素？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:38:53.933

它无法正常工作的原因是您没有分配视口。

[https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

您的案例的基本视口可以是：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

# deployment - Debian 软件包与 Fabric 部署

> ID：15126457
> 
> 赞同：6
> 
> 时间：2013-02-28T02:32:23.327
> 
> 标签：deployment, package, debian, fabric

与使用 Fabric 相比，使用 Debian 软件包部署 Web 应用程序的优缺点是什么？我只使用过 Debian 软件包。

我也有兴趣了解您在使用 Fabric 时遇到的问题，并且希望您使用过 Debian 软件包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:58:00.343

## Debian

它是一个包管理器。它允许用户通过各种程序（如系统`dpkg`或`apt`系统）来管理包。

它为您做什么：

*   从源代码构建包
*   处理包依赖，包版本
*   在系统上安装、更新和删除程序
*   在低级别工作，编译的二进制文件可能是系统特定的（i386，amd64）

缺点：

*   要部署应用程序，必须在包中提供配置，或者必须使用某些配置作为默认配置
*   具有不同架构的系统的不同二进制文件

* * *

## 织物

它是一个 Python 库和命令行工具，用于简化 SSH 在应用程序部署或系统管理任务中的使用。

它为您做什么：

*   配置您的系统
*   在本地/远程服务器上执行命令（系统管理）
*   部署你的应用，做回滚，主要是通过脚本自动化部署
*   在更高级别上工作，不依赖于系统架构，而是依赖于操作系统和包管理器

[你如何使用 pip、virtualenv 和 Fabric 来处理部署？](https://stackoverflow.com/questions/2441704/how-do-you-use-pip-virtualenv-and-fabric-to-handle-deployment)

缺点：

*   它不能替换系统上的包管理器，它在它之上管理包
*   您应该了解特定于您的包管理器/操作系统的系统、命令文件夹

* * *

**更新**

当 Fabric 出现时，我已经熟悉 Debian。所以 Debian 一直是我更喜欢的工具。为什么我使用 Fabric，它简化了应用程序的部署，并且是开发人员的便捷工具。以下是我使用 Debian 而不是 Fabric 的一些原因：

1.  当我不投入生产时，仍在开发和测试东西。Debian 在大多数情况下都适用，当代码被添加/修改时。Fabric 只是简化了从开发到生产的过渡。
2.  有时，如果我只在我的机器上部署应用程序，Fabric 似乎有点矫枉过正。如果部署不涉及很多机器，需要几个依赖项，我会坚持使用 Debian。
3.  当回滚或撤消不是一个选项时。Fabric 将简单地执行您的命令是否安全，如果您不擅长处理系统错误/异常，请在使用 Fabric 之前在某个地方尝试一下。（Debian 是系统的一部分，所以必须使用 Debian 和其他系统工具）

# prolog - Prolog - 树中和树之间的减法

> ID：15126458
> 
> 赞同：0
> 
> 时间：2013-02-28T02:32:51.430
> 
> 标签：prolog

这是我遇到的一个问题。如何递归地减去二叉树中的值？

```
subtractTree(tree(leaf(4), tree(leaf(2), leaf(1))),S).
  S = 3. 
```

对于此示例，它首先减去每棵树中的叶子，然后再减去树之间的值。所以对于第一棵树，它的值为 4。第二棵树的值为 1，因为 2-1=1。然后它在树之间减去 4-1，答案是 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:43:06.327

因为你的树结构有 arity 2（它必须是），你可以做一个非常简单的访问

```
subtractTree(leaf(N), N).
subtractTree(tree(L, R), S) :-
    subtractTree(L, X),
    subtractTree(R, Y),
    S is X - Y. 
```

测试：

```
?- subtractTree(tree(leaf(4), tree(leaf(2), leaf(1))),S).
S = 3. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:24:20.920

你有 4 个案例： 基本案例：一棵只有叶子的树

```
subtractTree(tree(leaf(A), leaf(B)),S) :-
         S is A-B. 
```

2个中间案例，一棵树和一棵树作为叶子

```
subtractTree(tree(leaf(A), Tree2),S) :-
    subtractTree(Tree2, S1),
    S is A - S1.

subtractTree(tree(Tree1, leaf(B)),S) :-
    subtractTree(Tree1, S1),
    S is S1 - B. 
```

一般情况下，一棵树的叶子是树：

```
subtractTree(tree(Tree1, Tree2),S) :-
    subtractTree(Tree1, S1),
    subtractTree(Tree2, S2),
    S is S1 - S2. 
```

# c# - 线程之间的线程通信

> ID：15126460
> 
> 赞同：2
> 
> 时间：2013-02-28T02:32:53.280
> 
> 标签：c#, .net, naudio, multithreading

所以我有一个参数化的线程启动，它初始化了一些 NAudio 的东西......但我需要一个单独的线程告诉 NAudio 线程启动。当我尝试它时，它崩溃了。如何实现安全的跨线程通信？

这是线程（这个类成为主线程中的音频对象）：

```
class Audio
{
    public IWavePlayer OutDevice;
    public WaveStream OutStream;

    public Thread thread;

    public Audio(string file)
    {
        this.thread = new Thread(new ParameterizedThreadStart(InitAudio)); thread.Start(file);
    }

    private void InitAudio(object data) {

        this.OutDevice = new WaveOut();
        this.OutStream = new WaveChannel32(new Mp3FileReader(data.ToString()));
        this.OutDevice.Init(OutStream);
    }
} 
```

我需要能够让我的主线程调用 audio.OutDevice.Play(); 但我不能，因为它是跨线程的并且它崩溃了。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:30:36.313

您的音频播放正在使用硬件资源，并且通常情况下，必须在创建它们的同一线程上访问这些资源。在您的代码中，您没有留下继续访问线程的空间。我很惊讶您听到该代码的任何声音，因为您拥有的线程很快就会超出范围。只是因为您将这些变量与类相关联，才会发生任何事情。我个人认为在这种情况下您不需要单独的线程，因为我相信播放是或可以是非阻塞的。尽管如此，你可以按照你的计划使用这样的东西（伪代码）：

```
public bool ShouldPlay;
private void InitAudio(object data) {

        var OutDevice = new WaveOut();
        var OutStream = new WaveChannel32(new Mp3FileReader(data.ToString()));
        var OutDevice.Init(OutStream);

        while(!_exitEvent.WaitOne(50ms)){
                 if(ShouldPlay && !OutDevice.IsPlaying)
                        OutDevice.Play();
                 else if(!ShouldPlay && OutDevice.IsPlaying)
                        OutDevice.Stop();
            }
          OutDevice.Stop();
          OutDevice.Dispose();
          OutStream.Dispose();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:59:22.723

如果您希望在后台线程上填充音频缓冲区，我建议使用 WaveOutEvent 类。这将创建自己的后台线程，用于通过管道提取音频。然后，您可以从主线程调用 Play 和 Stop。在这种情况下，您需要注意的主要线程问题是，如果您需要在正在播放的文件中实现重新定位，因为重新定位将发生在 GUI 线程上，而读取可能在另一个线程上进行。

对于 WinForms/WPF 应用程序，最可靠的机制是使用 WaveOut 的 windows 消息回调（如果您在 GUI 线程上创建 WaveOut，则默认情况下会得到这个）。这样就无需担心要重新定位的线程。此外，通过对所有内容使用 GUI 线程，它可以避免潜在的 MTA 与 STA 线程问题，如果您使用基于 COM 的 API，例如 Windows Media API、MediaFoundation 或 DirectX 媒体对象重采样器，就会遇到这些问题。

# c# - 使用初始化器创建对象数组似乎失败了

> ID：15126461
> 
> 赞同：1
> 
> 时间：2013-02-28T02:33:14.520
> 
> 标签：c#, object, unity3d, object-initializer

我有一个我们称之为 GM 的 GameObject。附加到它的是一个脚本，该脚本旨在成为游戏的主要逻辑控制器。

在那个脚本的某个地方，我有：

```
private dbEquipment equipment_database = new dbEquipment(); 
```

来自 dbEquipment.cs 的相关片段：

```
public class dbEquipment {
    private int total_items = 13;
    private clEquipment[] _master_equipment_list;

    public dbEquipment() {
        _master_equipment_list = new clEquipment[total_items];
        _master_equipment_list[0] = new clEquipment {
            ... //large amount of object initializing here
        };
        ... //etc, for all 13 items
    }
} 
```

当我运行 Unity 时，我得到：

```
NullReferenceException: Object reference not set to an instance of an object 
```

指向行：

```
_master_equipment_list[0] = new clEquipment { ... 
```

我尝试遍历数组并将每个 clEquipment 对象初始化为一个空的 clEquipment() 首先：

```
for(int x = 0; x < total_items; x++) { _master_equipment_list[x] = new clEquipment(); } 
```

只是为了完全确定数组实际上已被填充，但我得到了相同的结果。

我还尝试将其更改为`List<clEquipment>`，并适当地更改所有内容-没有骰子。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:46:31.087

我的猜测是，您可能在`//large amount of object initializing here`创建新`clEquipment`.

```
_master_equipment_list[0] = new clEquipment {
    ... //check for nulls here
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:48:59.203

您可能想要发布 clEquipment 类的代码。你说你尝试初始化每个对象......你在断线之前这样做了吗？如果它没有破裂，那是一个好兆头。

另外，很难从您的代码中分辨出来，但是您是否需要在初始化时中断的“（）”？只是一个想法

```
_master_equipment_list[0] = new clEquipment () { 
```

# git - 如何在没有额外提交的情况下将本地修改与 git stash 合并？

> ID：15126463
> 
> 赞同：5
> 
> 时间：2013-02-28T02:33:30.637
> 
> 标签：git

我隐藏了我的更改以处理另一项任务。当我完成另一项任务时，我继续处理我隐藏的修改，只是我`pop`先忘记了它们。现在我已经部分完成了本地修改和 git stash 中的工作。当我尝试使用 合并它们时`git stash pop`，出现以下错误：

```
error: Your local changes to the following files would be overwritten by merge:
    file.js
Please, commit your changes or stash them before you can merge.
Aborting 
```

我希望 git 在提交之前在本地合并隐藏的更改。我已经尝试过寻找解决方案，但到目前为止都是空的。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T02:35:54.783

我想到了。我需要在 之前提交我的本地更改`git stash pop`，所以我只是做了一个`git add file.js`然后然后`git stash pop`合并按预期进行。希望这对某人有帮助！

# sql-server - 从 Access 查询转换为 SQL Server

> ID：15126465
> 
> 赞同：0
> 
> 时间：2013-02-28T02:33:49.133
> 
> 标签：sql-server, ms-access

我正在尝试将报表查询从 Access 转换为 SQL SERVER 2008。使用相同的数据库，但我无法获得相同的结果。差远了。Access 查询是这样的：

```
SELECT Sum(INPUT_ItemSaleLines.TaxExclusiveTotal) AS TotalexTax,([TotalexTax])- Sum(    Nz([SumOfTaxExclusiveAmount])+ Nz([CostOfGoodsSoldAmount])+ Nz  
    (   
            Nz
            (   IIf
                (   Left([Input_Items.ItemNumber],5)='31-63',136*[Quantity]/1000,
                    IIf(Left([Input_Items.ItemNumber],6)='34S-63',200*[Quantity]/1000)
                )
            )+ Nz
            (   IIf
                (   Left([Input_Items.ItemNumber],5)='34-63',250*[Quantity]/1000,
                    IIf(Left([Input_Items.ItemNumber],6)='26-63',250*[Quantity]/1000)
                )
            )
        )
    ) AS Margin,    
    INPUT_Cards_1.Name AS SalesPerson, INPUT_Sales.SalesPersonID, 
    INPUT_Sales.InvoiceStatusID, INPUT_Cards.Name, INPUT_Items.ItemName, 
    Sum(INPUT_ItemSaleLines.Quantity) AS TotalQty, 
    Sum(INPUT_ItemSaleLines.CostOfGoodsSoldAmount) AS TotalCOGS, 
    Count(INPUT_Sales.SaleID) AS [Number of Sales], 
    Sum(qryShippingTotalexGST.SumOfTaxExclusiveAmount) AS ShippingTotal

FROM 
    (   qryShippingTotalexGST RIGHT JOIN 
        (
            (
                (   
                    INPUT_Items INNER JOIN INPUT_ItemSaleLines 
                    ON INPUT_Items.ItemID = INPUT_ItemSaleLines.ItemID
                ) INNER JOIN INPUT_Sales ON INPUT_ItemSaleLines.SaleID = INPUT_Sales.SaleID
            ) INNER JOIN INPUT_Cards ON INPUT_Sales.CardRecordID = INPUT_Cards.CardRecordID
        ) ON qryShippingTotalexGST.JobID = INPUT_ItemSaleLines.JobID
    ) LEFT JOIN INPUT_Cards AS INPUT_Cards_1 ON INPUT_Sales.SalesPersonID = INPUT_Cards_1.CardRecordID
WHERE 
    (((INPUT_Sales.Date) Between [Forms]![MenuReports]![StartDate] And [Forms]![MenuReports]![EndDate]))
GROUP BY INPUT_Items.ItemNumber,    
    INPUT_Cards_1.Name, INPUT_Sales.SalesPersonID, INPUT_Sales.InvoiceStatusID, 
    INPUT_Cards.Name, INPUT_Items.ItemName
HAVING 
    (((INPUT_Sales.InvoiceStatusID)<>"OR")); 
```

然后我这样编写的 SQL Server 脚本：

```
SELECT MYOBItems.ItemName, MYOBCards.Name AS SalesPerson, MYOBCards1.Name, 
    SUM(MYOBsalesLines.Qty) AS TotalQty, 
    SUM(MYOBsalesLines.CostOfGoodsSoldAmount) AS TotalCOGS, 
    COUNT(MYOBSales.SaleID) AS NumberOfSales, 
    SUM(MYOBsalesLines.TaxExclusiveAmount) AS TotalexTax,
    SUM(cast(MYOBJobsShippingTotals.TaxExclusiveAmount AS Decimal(18,2))) AS ShippingTotal,
    (SUM(MYOBsalesLines.TaxExclusiveAmount)) - SUM
    (
        COALESCE(cast(MYOBJobsShippingTotals.TaxExclusiveAmount AS Decimal(18,2)),0)+ COALESCE(MYOBsalesLines.CostOfGoodsSoldAmount,0)+ COALESCE
        (
            COALESCE
            (   
                CASE 
                    WHEN LEFT(MYOBItems.ItemNumber,5) = '31-63' THEN (136*MYOBsalesLines.Qty/1000)
                    WHEN LEFT(MYOBItems.ItemNumber,6) = '34S-63' THEN (200*MYOBsalesLines.Qty/1000) 
                    ELSE 0
                END, 0                          
            )+ COALESCE
            (   
                CASE 
                    WHEN LEFT(MYOBItems.ItemNumber,5) = '34-63' THEN (250*MYOBsalesLines.Qty/1000)
                    WHEN LEFT(MYOBItems.ItemNumber,6) = '26-63' THEN (250*MYOBsalesLines.Qty/1000)  
                    ELSE 0  
                END , 0     
            ), 0
        )
    )AS Margin      
    , MYOBSales.InvoiceStatusID FROM 
    (   MYOBJobsShippingTotals RIGHT JOIN 
        (
            (
                (   
                    MYOBItems INNER JOIN MYOBsalesLines 
                    ON MYOBItems.ItemID = MYOBsalesLines.ItemID                     
                ) INNER JOIN MYOBSales ON MYOBsalesLines.SaleID = MYOBSales.SaleID
                    AND MYOBSales.ElevateCompanyID = MYOBsalesLines.ElevateCompanyID
            ) INNER JOIN MYOBCards AS MYOBCards1 ON MYOBSales.CardRecordID = MYOBCards1.CardRecordID
                AND MYOBsalesLines.ElevateCompanyID = MYOBCards1.ElevateCompanyID 
            AND MYOBSales.ElevateCompanyID = MYOBCards1.ElevateCompanyID
        ) ON MYOBJobsShippingTotals.JobID = MYOBsalesLines.JobID
    ) LEFT JOIN MYOBCards ON MYOBSales.SalesPersonID = MYOBCards.CardRecordID 
GROUP BY MYOBItems.ItemName, MYOBCards.Name,
    MYOBCards1.Name, MYOBSales.InvoiceStatusID 
```

我怀疑连接的表有问题，但不知道如何解决。我的 SQL Server 脚本中是否有与 Access 语法无关的错误？提前感谢您的帮助。并为我的长脚本感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:21:55.307

您的 SQL 服务器查询缺少 MS Access 查询的 WHERE 和 HAVING 子句，它的 GROUP BY 子句与 MS Access 查询的列数或顺序不同，并且具有 MS 中没有的其他 JOIN 条件访问查询。

更忠实的转换如下所示：

```
SELECT SUM(MYOBsalesLines.TaxExclusiveAmount) AS TotalexTax
     , SUM(MYOBsalesLines.TaxExclusiveAmount)
       - SUM
         (
           COALESCE(cast(MYOBJobsShippingTotals.TaxExclusiveAmount AS Decimal(18,2)), 0)
           + COALESCE(MYOBsalesLines.CostOfGoodsSoldAmount,0)
           + COALESCE
             (
               COALESCE
               (   
                 CASE 
                   WHEN LEFT(MYOBItems.ItemNumber,5) = '31-63' THEN (136*MYOBsalesLines.Qty/1000)
                   WHEN LEFT(MYOBItems.ItemNumber,6) = '34S-63' THEN (200*MYOBsalesLines.Qty/1000) 
                   ELSE 0
                 END
                 , 0                          
               )
               + COALESCE
                 (   
                   CASE 
                     WHEN LEFT(MYOBItems.ItemNumber,5) = '34-63' THEN (250*MYOBsalesLines.Qty/1000)
                     WHEN LEFT(MYOBItems.ItemNumber,6) = '26-63' THEN (250*MYOBsalesLines.Qty/1000)  
                     ELSE 0  
                   END
                   , 0     
                 )
               , 0
             )
         )
       AS Margin
     , MYOBCards1.Name AS SalesPerson
     , MYOBSales.SalesPersonID
     , MYOBSales.InvoiceStatusID
     , MYOBCards.Name
     , MYOBItems.ItemName
     , SUM(MYOBsalesLines.Qty) AS TotalQty
     , SUM(MYOBsalesLines.CostOfGoodsSoldAmount) AS TotalCOGS
     , COUNT(MYOBSales.SaleID) AS NumberOfSales
     , SUM(cast(MYOBJobsShippingTotals.TaxExclusiveAmount AS Decimal(18,2))) AS ShippingTotal   
FROM 
(
    MYOBJobsShippingTotals RIGHT JOIN 
    (
        (
            (   
                MYOBItems INNER JOIN MYOBsalesLines 
                ON MYOBItems.ItemID = MYOBsalesLines.ItemID                     
            ) INNER JOIN MYOBSales ON MYOBsalesLines.SaleID = MYOBSales.SaleID
        ) INNER JOIN MYOBCards ON MYOBSales.CardRecordID = MYOBCards.CardRecordID
    ) ON MYOBJobsShippingTotals.JobID = MYOBsalesLines.JobID
) LEFT JOIN MYOBCards AS MYOBCards1 ON MYOBSales.SalesPersonID = MYOBCards1.CardRecordID
WHERE MYOBSales.Date BETWEEN ? AND ?
GROUP BY MYOBItems.ItemNumber
       , MYOBCards1.Name
       , MYOBSales.SalesPersonID
       , MYOBSales.InvoiceStatusID
       , MYOBCards.Name
       , MYOBItems.ItemName
HAVING MYOBSales.InvoiceStatusID <> 'OR' 
```

其中两个问号是您的 [Forms]![MenuReports]![StartDate] 和 [Forms]![MenuReports]![EndDate] 值。

# jquery - 使用 CSS 和 jQuery 将所有大写字母转换为正确大小写

> ID：15126466
> 
> 赞同：3
> 
> 时间：2013-02-28T02:33:52.320
> 
> 标签：jquery, css

我正在尝试做类似于此线程[https://stackoverflow.com/a/3471258/2117845](https://stackoverflow.com/a/3471258/2117845)的事情 ，我想我想要使用 jquery 代码发布的类似 Harmen 的内容，并说它现在是一个插件？

我所拥有的是来自数据库的所有大写标题。例如：

狐狸快要跳过栅栏了

我想看起来像：

快速棕色狐狸即将跳过栅栏

那么有没有办法使用 CSS 和 jQuery 来转换文本并消除某些单词被制作成正确的大小写？但我想我需要保留第一个实例。就像我消除了“the, is, to and”，那么标题中的第一个“the”将全部小写。那么只有当它不是第一个词时，我才能以某种方式消除那些常用词？

我知道这很多，但我对 jQuery 不是很熟悉。是否有任何地方的教程或插件显示如何做这样的事情。我已经看到很多关于如何转换 ALL CAPS 文本的问题，所以一个解决方案可能会非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T03:24:52.773

我修改了[Greg Dean 在相关问题中的回答中的代码。](https://stackoverflow.com/a/196991/402706)

我认为这个算法充其量是有根据的猜测，因为它实际上并没有评估英文大写规则。您可能需要在 noCaps 列表中添加更多单词以获得更好的准确性。

## [例子](http://jsfiddle.net/wm5kZ/4/)

**JS**

```
var ele = $('p'); 
ele.text(toProperCase(ele.text())); 

function toProperCase(str)
{
    var noCaps = ['of','a','the','and','an','am','or','nor','but','is','if','then', 
'else','when','at','from','by','on','off','for','in','out','to','into','with'];
    return str.replace(/\w\S*/g, function(txt, offset){
        if(offset != 0 && noCaps.indexOf(txt.toLowerCase()) != -1){
            return txt.toLowerCase();    
        }
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
} 
```

**HTML**

```
<p>THE QUICK BROWN FOX IS ABOUT TO JUMP OVER THE FENCE</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:16:23.133

我刚刚修改了 Harmen 的代码以满足您的需求。把它放在你的 JS 文件中。

```
jQuery.fn.ucwords = function() {
   return this.each(function(){
      var val = $(this).text().toLowerCase(), newVal = '';
      val = val.split(' ');

      for(var c=0; c < val.length; c++) {
         if (c>0 && val[c]=="is" || c>0 && val[c]=="to" || c>0 && val[c]=="the"){
             newVal+=val[c]+' ';
         } else newVal += val[c].substring(0,1).toUpperCase() + val[c].substring(1,val[c].length) + (c+1==val.length ? '' : ' ');

      }
      $(this).text(newVal);
  });
}

$(document).ready(function(e) {
    $('p.link').ucwords();
}); 
```

示例的 HTML

```
<p class="link">THE QUICK BROWN FOX IS ABOUT TO JUMP OVER THE FENCE</p> 
```

和 JSFiddle 为你[http://jsfiddle.net/fqEvX/](http://jsfiddle.net/fqEvX/)

# mysql - 在插入查询中使用内爆

> ID：15126480
> 
> 赞同：0
> 
> 时间：2013-02-28T02:35:12.467
> 
> 标签：mysql, database, insert, implode

如何在查询中使用 implode 将值插入到数据库中。这是我的例子：

html格式：

```
<form action="insert.php" method="post">
name:<input type="text" name="name" /><br />
address:<input type="text" name="address" /><br />
phone:<input type="text" name="phone" /><br />

<input type="submit" name="insert" value="insert" />
</form> 
```

我使用此代码从申请表中获取 _POST 值：

```
$x =  array_values($_POST); 
```

并在这里在字符串之间放置“，”逗号，以便我可以在查询中使用它：

```
$x =  "'".implode("','",$x)."'"; 
```

这是我所做的：

```
mysql_query("INSERT INTO dbtable (name, address, phone) 
                       VALUES
                      ($x)"); 
```

当我回显 $x: 结果是：'name','address','phone','insert'

代码打印“插入”<-它是提交按钮。我认为这是问题所在

谁能帮我改正我的错误谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:29:59.753

内爆应该是这样的：

```
$x =implode("','",$x)."'"; 
```

# android - Android 键盘正在从数字变为字母

> ID：15126481
> 
> 赞同：2
> 
> 时间：2013-02-28T02:35:15.103
> 
> 标签：android, android-edittext, android-softkeyboard, numeric

我在我的程序中做了以下代码：

```
<RelativeLayout
....>

<EditText
    android:id="@+id/EditText"
    android:layout_width="150dp"
    android:layout_height="37dp"
    android:layout_below="@+id/Header"
    android:layout_toRightOf="@+id/Button"
    android:inputType="number"
    android:textSize="14dp" />

</RelativeLayout> 
```

但是每当我在我的应用程序上尝试它时，该应用程序首先会弹出数字键盘，然后一秒钟后，它将变为字母键盘并且edittext不再是焦点。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:42:16.100

这听起来像是在您的布局或 UI 代码中的某个地方正在使用其他东西`requestFocus`，也许是另一个不是数字类型的输入字段。

# ios - UITableViewCell 格式删除后重用

> ID：15126483
> 
> 赞同：1
> 
> 时间：2013-02-28T02:35:24.400
> 
> 标签：ios, objective-c, uitableview

我继承了 UITableViewCell。基本上发生的情况是，当您按下单元格图层上的 UITableViewCell 绘图时，会导致单元格看起来不同。但是，当我删除一个单元格时，该绘图会下降到它下面的单元格。对我来说，这似乎表明单元格的格式正在被正常使用。因此，我重新绘制了 CellForRowAtIndexPath 中的单元格，如下所示...

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
AGProgressViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
cell.textLabel.backgroundColor = [UIColor clearColor];
cell.detailTextLabel.backgroundColor = [UIColor clearColor];
//NSLog(@"progress value = %f", [cell.progress floatValue]);

if (!cell) {
    cell = [[AGProgressViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

Task * task = nil;

if (indexPath.section == 0){
    task = [self.tasksByDay[@"anyday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 1){
    task = [self.tasksByDay[@"monday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 2){
    task = [self.tasksByDay[@"tuesday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 3){
    task = [self.tasksByDay[@"wednesday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 4){
    task = [self.tasksByDay[@"thursday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 5){
    task = [self.tasksByDay[@"friday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 6){
    task = [self.tasksByDay[@"saturday"] objectAtIndex:indexPath.row];
} else if (indexPath.section == 7){
    task = [self.tasksByDay[@"sunday"] objectAtIndex:indexPath.row];
}
cell.progress = [NSNumber numberWithFloat:([task.timeSpent floatValue]/[task.time floatValue])];
// this is calling the redrawing method in the cell
[cell drawFillInAtPercent:[task.timeSpent floatValue]/[task.time floatValue]];

//NSLog(@"progress value = %f vs. time spent = %f", [cell.progress floatValue], [task.timeSpent floatValue]/[task.time floatValue]);

cell.textLabel.text = task.name;
cell.detailTextLabel.text = [NSString stringWithFormat:@"%d minutes",
                             [task.time intValue] - [task.timeSpent intValue]];

return cell;
} 
```

但是，这并没有解决问题。所有这些 NSLog 都显示单元格在每次重新绘制时都处于正确的级别。这意味着，由于某种原因，被删除的单元格没有在 cellForRowAtIndex 路径中被调用。奇怪的是文本标签正在改变，只是我在 UITableViewCell 子类中所做的自定义绘图没有改变。

这是我在子类中调用的方法。

```
-(void) drawFillInAtPercent: (float) percent{
//if (percent > 0){
    NSLog(@"progress layer at percent %f", percent);
    _progressLayer = [CAGradientLayer layer];
    _progressLayer.frame = CGRectMake(self.bounds.origin.x,
                                      self.bounds.origin.y,
                                      self.bounds.size.width * percent,
                                      self.bounds.size.height);
    _progressLayer.colors = @[(id)[[UIColor colorWithRed:0/255.0 green:0/250.0 blue:250.0/255.0 alpha:1.0f] CGColor],
    (id)[[UIColor colorWithRed:150.0/200.0 green:150.0/200.0 blue:150.0/200.0 alpha:.5] CGColor],
    (id)[[UIColor colorWithRed:200.0/200.0 green:200.0/200.0 blue:200.0/200.0 alpha:.5] CGColor],
    (id)[[UIColor colorWithWhite:0.3f alpha:0.1f] CGColor]];
    _progressLayer.locations = @[@0.00f, @0.2f, @0.90f, @1.00f];
    [self.layer insertSublayer:_progressLayer atIndex:1];
//}
} 
```

我不知道发生了什么，而且我似乎无法访问重用的单元格以重绘它。

这些是删除方法：

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

   if (editingStyle == UITableViewCellEditingStyleDelete) {

    [self deactivateTimers];
    NSArray * days = [NSArray arrayWithObjects: @"anyday", @"monday", @"tuesday",       @"wednesday", @"thursday", @"friday", @"saturday", @"sunday", nil];

    Task * task = self.tasksByDay[days[indexPath.section]][indexPath.row];

    if ([task.weekly boolValue]){
        task.finished = [NSNumber numberWithBool:1];
    } else {
        [managedObjectContext deleteObject:task];
    }

    [self.managedObjectContext save:nil];

    [self grabTasksFromContext];

   }

}

-(void) grabTasksFromContext{
   NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
   NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Task"  
   inManagedObjectContext:managedObjectContext];
   [fetchRequest setEntity:entity];
   NSError *error;
   NSMutableArray * managedObjects = [NSMutableArray arrayWithArray:[managedObjectContext  
   executeFetchRequest:fetchRequest error:&error]];
   int numObjects = [managedObjects count];

   for (int i = 0; i < numObjects; i ++){
       Task * task = [managedObjects objectAtIndex:i];
       NSLog(@"name %@", task.name);
    // if the task is finished we don't want it to be displayed in the list
       if ([task.finished boolValue]){
           NSLog(@"finished");
           [managedObjects removeObject:task];
           i -= 1;
           numObjects -= 1;
       }
    }

    self.tasks = managedObjects;

// This implementation is pretty ugly
// I'm sorry about that and will fix it in the future
// probably the more attractive way to do this is to make an array of the days, and then              cycle through that and check through the array of tasks
monday = tuesday = wednesday = thursday = friday = saturday = sunday = anyday = 0;

NSMutableArray * mondayArray = [[NSMutableArray alloc] init];
NSMutableArray * tuesdayArray = [[NSMutableArray alloc] init];
NSMutableArray * wednesdayArray = [[NSMutableArray alloc] init];
NSMutableArray * thursdayArray = [[NSMutableArray alloc] init];
NSMutableArray * fridayArray = [[NSMutableArray alloc] init];
NSMutableArray * saturdayArray = [[NSMutableArray alloc] init];
NSMutableArray * sundayArray = [[NSMutableArray alloc] init];
NSMutableArray * anydayArray = [[NSMutableArray alloc] init];

for (Task * task in self.tasks){
    if ([task.day isEqualToString:@"monday"]){
        mondayArray[monday] = task;
        monday++;
    } else if ([task.day isEqualToString:@"tuesday"]){
        tuesdayArray[tuesday] = task;
        tuesday++;
    } else if ([task.day isEqualToString:@"wednesday"]){
        wednesdayArray[wednesday] = task;
        wednesday++;
    } else if ([task.day isEqualToString:@"thursday"]){
        thursdayArray[thursday] = task;
        thursday++;
    } else if ([task.day isEqualToString:@"friday"]){
        fridayArray[friday] = task;
        friday++;
    } else if ([task.day isEqualToString:@"saturday"]){
        saturdayArray[saturday] = task;
        saturday++;
    } else if ([task.day isEqualToString:@"sunday"]){
        sundayArray[sunday] = task;
        sunday++;
    } else {
        anydayArray[anyday] = task;
        anyday++;
    }
 }

    self.tasksByDay = [[NSDictionary alloc] initWithObjectsAndKeys: mondayArray,@"monday",     
    tuesdayArray, @"tuesday", wednesdayArray, @"wednesday", thursdayArray, @"thursday",   
    fridayArray, @"friday", saturdayArray, @"saturday", sundayArray, @"sunday", 
    anydayArray, @"anyday", nil];

     [self.tableView reloadData];
 } 
```

任何有关正在发生的事情的帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:43:29.477

> 但是，当我删除一个单元格时，该绘图会下降到它下面的单元格。

这是关键的观察：它向我表明，在重绘发生时，模型（即你的`self.tasksByDay[dayName]`）*尚未*更新。当某一行的单元格被删除时，`taskByDay`需要更新对应日期的 以从 中删除对应的行`NSArray`。如果这没有发生，则已删除任务的数据将影响在下一个索引处绘制单元格，因此视觉效果似乎会“下降”一行。根据您的描述，听起来这正是正在发生的事情。

您需要确保在刷新表时（或将单元格删除通知发送到`UITableView`），模型已经更新为没有被删除的行。这样，表格视觉效果将按照您的预期进行更新。

与问题没有直接关系，但如果你创建一个数组

```
NSArray *dayName = @[@"anyday", @"monday", @"tuesday", @"wednesday", etc.]; 
```

`if`您可以将s的长链替换为

```
task = [self.tasksByDay[dayName objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]; 
```

代码中的另一个问题是每次调用`drawFillInAtPercent:`时都会添加一个新`CAGradientLayer`的。当您上下滚动时，重复使用的单元格会累积新层，而不会删除之前添加的层。您需要更改代码以仅添加一次渐变层，然后在您的`drawFillInAtPercent:`方法中重用现有的。例如，您可以在 的指定初始化程序中添加层`AGProgressViewCell`，将其分配给`_progressLayer`实例变量，然后将其添加到层层次结构中一次。从那时起，`drawFillInAtPercent:`将改变现有的`_progressLayer`，而不是每次都创建新的。

# rotation - Panda3D：如何旋转物体以使其 X 轴指向空间中的某个位置？

> ID：15126492
> 
> 赞同：0
> 
> 时间：2013-02-28T02:36:03.257
> 
> 标签：rotation, quaternions, euler-angles, panda3d

我有一个对象（比如`fromObj`）存储在 NodePath 中的 3D 点位置（比如`fromPoint`）。它的航向俯仰滚转 (HPR) 是`(0,0,0)`. 我想旋转它，使其 X 轴指向`toPoint`空间中的另一个点。我只想计算实现这种旋转的 HPR 并将其用于其他目的。

我试过`fromObj.lookAt(toPoint)`了，但它的 Y 轴指向`toPoint`。我希望它的 X 轴指向`toPoint`。

如何计算将**旋转**对象以使其**X 轴**指向空间中给定**位置的****HPR**？

 ******注意：我知道 StackOverflow 上的这个问题： [Calculate rotations to look at a 3D point?](https://stackoverflow.com/questions/1251828) 但是，我正在寻找一种使用现有 Panda3D API 的解决方案，并且我想要 Panda3D HPR 格式的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:34:00.873

**感谢Panda3D**论坛上的乐于助人，我得到了一个[更简单的解决方案](http://www.panda3d.org/forums/viewtopic.php?p=91994)：

```
def getHprFromTo( fromNP, toNP ):
    # Rotate Y-axis of *from* to point to *to*
    fromNP.lookAt( toNP ) 

    # Rotate *from* so X-axis points at *to*
    fromNP.setHpr( fromNP, Vec3( 90, 0, 0 ) )

    # Extract HPR of *from* 
    return fromNP.getHpr() 
```

如果您只有点位置，请为两个点创建虚拟节点路径以执行此计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:07:31.360

我不知道如何使用 Panda3D API 来做到这一点。但它可以通过原始计算来完成，如下所示：

```
def getHprFromTo( fromPt, toPt ):
    """
    HPR to rotate *from* point to look at *to* point
    """

    # Translate points so that fromPt is origin
    pos2 = toPt - fromPt

    # Find which XY-plane quadrant toPt lies in
    #    +Y
    #    ^
    #  2 | 1
    # ---o---> +X
    #  3 | 4

    quad = 0

    if pos2.x < 0:
        if pos2.y < 0:
            quad = 3
        else:
            quad = 2
    else:
        if pos2.y < 0:
            quad = 4

    # Get heading angle

    ax   = abs( pos2.x )
    ay   = abs( pos2.y )
    head = math.degrees( math.atan2( ay, ax ) )

    # Adjust heading angle based on quadrant

    if 2 == quad:
        head = 180 - head
    elif 3 == quad:
        head = 180 + head
    elif 4 == quad:
        head = 360 - head

    # Compute roll angle 

    v    = Vec3( pos2.x, pos2.y, 0 )
    vd   = abs( v.length() )
    az   = abs( pos2.z )
    roll = math.degrees( math.atan2( az, vd ) )

    # Adjust if toPt lies below XY-plane

    if pos2.z < 0:
        roll = - roll

    # Make HPR
    return Vec3( head, 0, -roll ) 
```

基本思想是想象你的头部在空间中的 fromPoint 处静止。你的头（或眼睛）朝向 +ve X 轴，+ve Y 轴从你的左耳出来，你的向上向量是 +ve Z 轴。在你周围空间的某个地方是 toPoint。

要查看它，您首先在全局 XY 平面中旋转您的头部（就像在恐怖电影中一样），直到 toPoint 在您的上方或下方。这是航向角。

现在，您抬起头或向下抬起头，最终使 toPoint 出现在您的视线中。这是滚动角。请注意，这是滚动而不是俯仰，尽管看起来是这样。这是因为它在你头部的坐标系中滚动。这给了你 HPR！******

# c++ - 使用统一初始化构造对象的简单程序编译失败

> ID：15126495
> 
> 赞同：6
> 
> 时间：2013-02-28T02:37:19.377
> 
> 标签：c++, c++11, constructor, initialization, uniform-initialization

考虑以下程序：

```
struct X
{
    X(int, int) { }
    X(X&&) { }
};

int main()
{
    X x( {0, 1} ); // Doesn't compile on ICC 13.0.1, compiles on
                   // Clang 3.2, GCC 4.7.2, and GCC 4.8.0 beta.
} 
```

当使用 GCC 4.7.2、GCC 4.8.0 和 Clang 3.2 编译时，该程序执行以下操作 (*)：

1.  构造一个临时的类型`X`传递值`0`和`1`构造函数，然后；
2.  `X`从那个临时的移动构造。

相反，使用 ICC 13.0.1，它不会编译。

**问题1：谁是对的？**

(*)*实际上，临时的创建和对移动构造函数的调用被省略了，但是使用`-fno-elide-constructors`选项编译并向构造函数添加一些打印输出表明这是正在发生的事情。*

* * *

现在考虑以下，上述程序的轻微变化，其中*统一初始化*用于直接初始化`x`：

```
int main()
{
    X x{ {0, 1} }; // ERROR! Doesn't compile.
//     ^........^
} 
```

我不希望在这里使用大括号而不是括号来改变任何东西，但它会以某种方式改变：这个程序不能在我测试过的*任何*编译器上编译（Clang 3.2，GCC 4.7.2，GCC 4.8。 0 测试版和 ICC 13.0.1）。

**问题2：为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:00:13.610

这只是所有编译器中的一个错误。§8.5.4/3 说，

> 类型 T 的对象或引用的列表初始化定义如下：
> 
> — 如果初始值设定项列表没有元素并且 T 是具有默认构造函数的类类型，则对象是值初始化的。
> 
> — 否则，如果 T 是一个聚合，则执行聚合初始化 (8.5.1)。
> 
> — 否则，如果 T 是 std::initializer_list 的特化，则按如下所述构造一个 initializer_list 对象并用于初始化该对象……</p>
> 
> **— 否则，如果 T 是类类型，则考虑构造函数。枚举适用的构造函数，并通过重载决议（13.3、13.3.1.7）选择最佳构造函数。如果需要缩小转换（见下文）来转换任何参数，则程序格式错误。**
> 
> — 否则，如果 T 是引用类型，则 T 引用的类型的纯右值临时是列表初始化的，并且引用绑定到该临时。
> 
> — 否则，如果初始化列表只有一个元素，则从该元素初始化对象或引用；如果需要缩小转换（见下文）将元素转换为 T，则程序格式错误。
> 
> …</p>

有*不少*案例。请注意，您实际上是在列表初始化绑定到右值引用的纯右值临时对象。

至于 GCC，我认为它正在尝试将上面提到的最后一项应用于单元素初始值设定项列表。如果我将构造函数签名更改为`X(X&&, int = 3)`，则初始化程序`{ {0, 1} }`失败但`{ {0, 1}, 3 }`成功。单个项目应该成功，因为该元素是一个花括号初始化列表，我相信这种情况应该允许额外的封闭大括号，类似于括号。但是这种失败类似于 GCC 的其他缺点，带有大括号省略。

我的高级印象是，当编译器尝试将列表视为具有类型的对象时会出现问题，但事实并非如此。很难将其转换回带括号的参数列表之类的东西。

更具体地查看错误消息（感谢 LWS 链接），

*   ICC 坚称它期待表达。这是错误的，因为根据基本语法，花括号初始化列表可以包含其他花括号初始化列表，而不仅仅是表达式。

*   Clang 说*“候选构造函数不可行：无法将初始值设定项列表参数转换为 'X'”*，但如果转换是显式的，则它可以工作，使用`X x{ X{0, 0 } };`. 那没有意义。这不是转换，因为列表没有要转换的类型。这是列表初始化。

*   GCC 说*“没有已知的参数 1 从 '' 到 'X&&' 的转换”，*这表明它甚至没有达到定义一个临时绑定到引用的地步。与 Clang 一样，它似乎正在尝试虚假转换，并指定`X{0,0}`修复它。

# android - 我收到错误“LinearLayout 无法解析为一种类型”，还有说明“此行有多个标记”

> ID：15126499
> 
> 赞同：-1
> 
> 时间：2013-02-28T02:37:56.390
> 
> 标签：android

我是 Android 新手，我正在尝试 Pinch to Zoom 代码。我在此行收到错误“LinearLayout 无法解析为类型”。mainView =(LinearLayout)findViewById(R.id.linearLayout); 这是下面的代码，你能帮我解决这个问题吗？谢谢您的帮助。

```
package com.zoomlayout;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.PointF;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ZoomLayout extends Activity {
 View mainView = null;

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_zoom_layout);
  mainView =(LinearLayout)findViewById(R.id.linearLayout); //got the error here

  Button buttonZoomOut = (Button)findViewById(R.id.buttonZoomOut);
  Button buttonNormal = (Button)findViewById(R.id.buttonNormal);
  Button buttonZoomIn = (Button)findViewById(R.id.buttonZoomIn);

  buttonZoomOut.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    zoom(0.5f,0.5f,new PointF(0,0));    
   }
  });
  buttonNormal.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    zoom(1f,1f,new PointF(0,0));  
   }
  });
  buttonZoomIn.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    zoom(2f,2f,new PointF(0,0));   
   }
  });
 }

 /** zooming is done from here */
 public void zoom(Float scaleX,Float scaleY,PointF pivot){
  mainView.setPivotX(pivot.x);
  mainView.setPivotY(pivot.y);  
  mainView.setScaleX(scaleX);
  mainView.setScaleY(scaleY);  
 } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:38:59.200

你需要`import android.widget.LinearLayout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:41:23.410

在 Eclipse 中，只需执行 CTRL + SHIFT + O，它就会自动修复您的导入，无论是添加需要的还是删除不必要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-11T07:16:13.690

`import android.widget.LinearLayout;`

```
protected void onCreate(......
mainView = (LinearLayout) findViewById(R.id.LinearLayout1);
//Change the UI layout as `Linear-layout` and name it (my layout name is "LinearLayout1" 
```

# entity-framework - 实体框架错误 3021：映射到多个概念侧属性

> ID：15126514
> 
> 赞同：1
> 
> 时间：2013-02-28T02:39:07.130
> 
> 标签：entity-framework

我有一张带有 PK 的 Authors 表`AuthorID`。

然后我有一个名为 AuthoritativeAuthors 的表，带有 PK `AuthorID`。

AuthoritativeAuthor.AuthorID 是指向 Authors.AuthorID 的外键。Authors 中的 AuthorID 可能会或可能不会出现在 AuthoritativeAuthors 中。

这是我得到的错误 `Error 3021: Problem in mapping fragments starting at line 4365:Each of the following columns in table AuthoritativeAuthors is mapped to multiple conceptual side properties: AuthoritativeAuthors.AuthorID is mapped to <FK_AuthoritativeAuthors_Authors.AuthoritativeAuthor.AuthorID, FK_AuthoritativeAuthors_Authors.Author.AuthorID>`

这是 edmx 中似乎相关的所有代码。

存储模型

```
<EntityType Name="Authors">
    <Key>
        <PropertyRef Name="AuthorID" />
    </Key>
    <Property Name="AuthorID" Type="int" Nullable="false" />
    <Property Name="Name" Type="nvarchar" MaxLength="254" />
</EntityType>
<EntityType Name="AuthoritativeAuthors">
    <Key>
        <PropertyRef Name="AuthorID" />
    </Key>
    <Property Name="AuthoritativeAuthorID" Type="int" Nullable="false" />
    <Property Name="AuthorID" Type="int" Nullable="false" />
</EntityType>
<Association Name="FK_AuthoritativeAuthors_Authors">
    <End Role="AuthoritativeAuthor" Type="WCDBModel.Store.AuthoritativeAuthors" Multiplicity="0..1" />
    <End Role="Author" Type="WCDBModel.Store.Authors" Multiplicity="1" />
    <ReferentialConstraint>
        <Principal Role="Author">
            <PropertyRef Name="AuthorID" />
        </Principal>
        <Dependent Role="AuthoritativeAuthor">
            <PropertyRef Name="AuthorID" />
        </Dependent>
    </ReferentialConstraint>
</Association> 
```

概念模型

```
<EntitySet Name="AuthorSet" EntityType="WCDBModel.Author" />
<EntitySet Name="AuthoritativeAuthorSet" EntityType="WCDBModel.AuthoritativeAuthor" />
<AssociationSet Name="FK_AuthoritativeAuthors_Authors" Association="WCDBModel.FK_AuthoritativeAuthors_Authors">
    <End Role="Author" EntitySet="AuthorSet" />
    <End Role="AuthoritativeAuthor" EntitySet="AuthoritativeAuthorSet" />
</AssociationSet>
<EntityType Name="Author">
    <Key>
        <PropertyRef Name="AuthorID" />
    </Key>
    <Property Name="AuthorID" Type="Int32" Nullable="false" />
    <Property Name="Name" Type="String" Nullable="true" />
    <NavigationProperty Name="AuthoritativeAuthors" Relationship="WCDBModel.FK_AuthoritativeAuthors_Authors" FromRole="Author" ToRole="AuthoritativeAuthor" />
</EntityType>
<Association Name="FK_AuthoritativeAuthors_Authors">
    <End Type="WCDBModel.Author" Role="Author" Multiplicity="1" />
    <End Type="WCDBModel.AuthoritativeAuthor" Role="AuthoritativeAuthor" Multiplicity="0..1" />
</Association>
<EntityType Name="AuthoritativeAuthor">
    <Key>
        <PropertyRef Name="AuthorID" />
    </Key>
    <Property Type="Int32" Name="AuthorID" Nullable="false" />
    <Property Type="Int32" Name="AuthoritativeAuthorID" Nullable="false" />
    <NavigationProperty Name="Author" Relationship="WCDBModel.FK_AuthoritativeAuthors_Authors" FromRole="AuthoritativeAuthor" ToRole="Author" />
</EntityType> 
```

映射

```
<EntitySetMapping Name="AuthorSet">
    <EntityTypeMapping TypeName="IsTypeOf(WCDBModel.Author)">
        <MappingFragment StoreEntitySet="Authors">
            <ScalarProperty Name="Name" ColumnName="Name" />
            <ScalarProperty Name="AuthorID" ColumnName="AuthorID" />
        </MappingFragment>
    </EntityTypeMapping>
</EntitySetMapping>
<EntitySetMapping Name="AuthoritativeAuthorSet">
    <EntityTypeMapping TypeName="IsTypeOf(WCDBModel.AuthoritativeAuthor)">
        <MappingFragment StoreEntitySet="AuthoritativeAuthors">
            <ScalarProperty Name="AuthoritativeAuthorID" ColumnName="AuthoritativeAuthorID"/>
            <ScalarProperty Name="AuthorID" ColumnName="AuthorID" />
        </MappingFragment>
    </EntityTypeMapping>
</EntitySetMapping>
<AssociationSetMapping Name="FK_AuthoritativeAuthors_Authors" TypeName="WCDBModel.FK_AuthoritativeAuthors_Authors" StoreEntitySet="AuthoritativeAuthors">
    <EndProperty Name="AuthoritativeAuthor">
        <ScalarProperty Name="AuthorID" ColumnName="AuthorID" />
    </EndProperty>
    <EndProperty Name="Author">
        <ScalarProperty Name="AuthorID" ColumnName="AuthorID" />
    </EndProperty>
    <Condition ColumnName="AuthorID" IsNull="false" />
</AssociationSetMapping> 
```

任何帮助查找此错误的原因将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:33:43.500

我最终在我的 AuthoritativeAuthor 表中创建了一个伪主键，它也不是外键。

# android - Toast 不能在非活动类中“显示（）”

> ID：15126522
> 
> 赞同：0
> 
> 时间：2013-02-28T02:40:08.640
> 
> 标签：android, toast

我不知道您是否可以从非活动类（不是活动本身的类）启动祝酒词。我想在我的输入过滤器类中使用我的 toast，所以我首先尝试将整个活动传递给另一个类，但严重失败。所以我决定将上下文本身传递给非活动类，在本例中是 InputFilterMinMax。从那里我使用该上下文尝试将 Toast 显示到当前活动。我的问题是，这是否可能，如果是这样，为什么我的 toast 尝试启动后我的应用程序会崩溃。谢谢。

```
package com.TechDigy.parabolicmotion;

import android.app.Activity;
import android.content.Context;
import android.text.InputFilter;
import android.text.Spanned;
import android.widget.Toast;

public class InputFilterMinMax implements InputFilter {

    private int min, max;
    Context context;

    public InputFilterMinMax(int min, int max) {
        this.min = min;
        this.max = max;
    }

    public InputFilterMinMax(String min, String max) {
        this.min = Integer.parseInt(min);
        this.max = Integer.parseInt(max);
    }

    public InputFilterMinMax(Context context2) {
        // TODO Auto-generated constructor stub
        context = context2;
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {   
        try {
            int input = Integer.parseInt(dest.toString() + source.toString());
            if (!isInRange(min, max, input))
                Toast.makeText(context, "Max Angle 90 Degrees", Toast.LENGTH_LONG).show();
            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) { }     
        return "";
    }

    private boolean isInRange(int a, int b, int c) {
        return b > a ? c >= a && c <= b : c >= b && c <= a;
    }
} 
```

**输入信息活动**

```
package com.TechDigy.parabolicmotion;

    import android.app.Activity;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.text.InputFilter;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;

public class EnterInformation extends Activity { 

    //Name the String which will be used to identify the file name of the SharedPreference
    public static final String REFS = "checkedornot";
    //final String[] names = new String[]{"DegreeLaunchInitialVelocity","DegreeLaunchInitialYVelocity","DegreeLaunchInitialXVelocity","InitialYVelocityInitialXVelocity"};
    boolean DegreeLaunchInitialVelocity,DegreeLaunchInitialYVelocity,DegreeLaunchInitialXVelocity,InitialYVelocityInitialXVelocity;
    boolean testout = true;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.next);
        //Reference the Edit Texts
        final EditText InitialVelocity = (EditText) findViewById(R.id.eTInitialVelcity);
        final EditText DegreeOfLaunch = (EditText) findViewById(R.id.eTDegreeOfLaunch);
        final EditText InitialYVelocity = (EditText) findViewById(R.id.eTInitialYVelocity);
        EditText TimeOfFlight = (EditText) findViewById(R.id.eTTimeOfFlight);
        EditText DistanceXDirection = (EditText) findViewById(R.id.eTDistanceTraveled);
        EditText PeakHeight = (EditText) findViewById(R.id.eTPeakHeight);
        final EditText InitialXVelocity = (EditText) findViewById(R.id.eTInitialXVelcity);
    //  if(DegreeOfLaunch.getText().toString().length() >2){
        //  Toast.makeText(getApplicationContext(), "Max Angle 90 Degrees", Toast.LENGTH_LONG).show();
    //  }
        //Pass the context
        InputFilterMinMax context = new InputFilterMinMax(getApplicationContext()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:51:33.507

请尝试换`getApplicationContext()`行

```
InputFilterMinMax context = new InputFilterMinMax(getApplicationContext()); 
```

到

```
EnterInformation.this 
```

所以，这条线看起来像，

```
InputFilterMinMax context = new InputFilterMinMax(EnterInformation.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T15:35:19.413

我遇到了同样的问题，但我解决了它。！在非活动类中，您只需宣布一个“公共静态字符串”。然后在您的 MainActivity 或其他活动中，您可以直接使用 Toast。

就我而言，我声明了一个非活动类 NoteDB。所以我 `public static String S`在课堂上声明。（您可以在课堂上更改 S 值。然后在我的 MainActivity 中，我宣布

```
Toast(MainActivity.this, NoteDB.S ,TOAST.SHORT_LENTGH).show(); 
```

它运作良好。

# objective-c - 如何将字符串插入 NSArray 并稍后返回以进行打印或比较？

> ID：15126523
> 
> 赞同：0
> 
> 时间：2013-02-28T02:40:17.873
> 
> 标签：objective-c, nsarray, nslog

我正在尝试创建一个大小为 100 的 NSMutableArray，然后用三个空格的字符串填充每个索引，`" "`. 我要么错误地创建了数组，要么错误地**返回**了对象。这是我创建数组的方法：

```
-(void) initBoard{
    _board = [board initWithCapacity:100];
    for(int i =0; i < 100; i++){
        [_board addObject:@"   "];
    }
} 
```

此方法无法正常运行。我在上面包含的循环之后添加了一个 for 循环，`NSLog @"@%", [_board objectAtIndex: i];`以便我可以验证每个索引处实际上有由三个空格组成的字符串，但它会在控制台中打印出的所有内容都是“nil”。到目前为止，我已经尝试过：

*   我认为这可能`addObjectAtIndex`是问题所在，所以我只是将其更改为`addObject`并将其更改`initWithCapacity`为只是`init];`为了允许 for 循环将数组构建为 100 大小。

*   然后我认为问题可能在于尝试插入文字字符串`@" "`（IDK 如何让 Stackoverflow 显示我的 3 个空格，而不仅仅是 1 个），所以我`NSString *input = @" ";`在 for 循环之前添加，然后更改`[_board addObject:@" "];`为 `[_board addObject:输入;

关于如何实际创建大小为 100 的 NSMutableArray 并使每个点包含相同的三个空格字符串的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:47:06.317

您需要`alloc`吃掉可变数组而不是`init`ialize：

```
-(void) initBoard{
    _board = [[NSMutableArray alloc] initWithCapacity:100];
    for(int i =0; i < 100; i++){
        [_board addObject:@"   "];
    }
} 
```

# ruby-on-rails - 如何在 simple_form 中生成取消按钮？

> ID：15126524
> 
> 赞同：6
> 
> 时间：2013-02-28T02:40:22.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我想使用 simple_form 生成一个取消按钮....但不太确定如何做到这一点。

```
<%= f.button :submit, :class => "btn btn-warning btn-small", :label => "Save Changes" %>
<%= f.button :cancel, :class => "btn btn-inverse btn-small", :label => "Cancel" %> 
```

但是取消按钮不起作用。

我怎么得到它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T02:45:28.867

这应该由简单的形式支持吗？我快速浏览了 github 并没有发现任何相关内容。

怎么样`link_to "Cancel", :back`？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-02T08:47:36.893

您可以使用引导程序轻松完成。

```
<button type="submit" class="btn btn-default">Create Plan</button>
<%= link_to "Cancel", :back, {:class=>"btn btn-default"} %> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-18T02:05:17.267

使用 simple_form 和 erb：

```
<%= f.submit, 'Save', class: 'btn btn-primary' %>
<%= f.button :button, 'Cancel', type: :reset, class: 'btn btn-none' %> 
```

这样做**不会**将您带到上一页，它会将表单重置为其初始状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T03:52:32.290

或者从 Rails 3 开始：

```
link_to "Cancel", @foo 
```

`@foo`您的新模型或现有模型对象在哪里。根据具体情况，此链接会将您带到`edit`或`new`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T09:50:44.917

您可以用作`<%= button_tag "Cancel", :type => 'reset' %>`

# java - 将 JNI Java byte[] 转换为 C++ bytearray，返回 0

> ID：15126526
> 
> 赞同：5
> 
> 时间：2013-02-28T02:40:50.077
> 
> 标签：java, java-native-interface

我这里有一个很大的问题。我正在尝试将 byte[] 从 Java 传递到 C++，并且在转换后得到负值。我已经通过在 Java byte[] 中具有唯一字符来确定问题，在转换并执行日志之后，值是 0 或负数。

我尝试使用字符串字符的测试字节 []，它工作正常。

这是我的代码，如果有帮助的话。

爪哇

```
public static native void SendMessage(byte[] message, int size); //size = message.length 
```

C++

```
static void SendMessage(JNIEnv *env, jclass cls, jbyteArray array, jint array_length)
 {
     jbyte* content_array = (env)->GetByteArrayElements(array,NULL);
     //*env->GetByteArrayRegion(array,0,array_length,content_array); //tried this as well, same results
     LOGD("content:\n"); 
     for (int i=0; i < array_length; i++) 
     {
         LOGD("%d",content_array[i]); 
     } 

     //EDIT
     SendMessage(client, (uint8_t*)content_array, array_length); //<- could the problem be at the point where I convert it to uint8_t?

      (env)->ReleaseByteArrayElements(array,content_array,0); 
  } 
```

输出

```
content: 48
content: 23
content: 13
content: 56
content: 0 // <--- the problem starts here
content: -122
content: 0
content: 78
content: 32
content: -28
etc...
..
.. 
```

现在，使用一个简单的测试 byte[] Java

```
String test = "ABC";
byte[] message = test.getBytes();
public static native void SendMessage(byte[] message, int size); //size = message.length 
```

C++

```
static void SendMessage(JNIEnv *env, jclass cls, jbyteArray array, jint array_length)
 {
     jbyte* content_array = (env)->GetByteArrayElements(array,NULL);
    //*env->GetByteArrayRegion(array,0,array_length,content_array); //tried this as well, same results
    LOGD("content:\n"); 
    for (int i=0; i < array_length; i++) 
    {
        LOGD("%d",content_array[i]); 
      } 
      (env)->ReleaseByteArrayElements(array,content_array,0); 
  } 
```

输出

```
content: 65 //this works perfectly
content: 66
content: 67 
```

谢谢你的帮助。非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:23:49.917

您如何`byte[]`在问题案例中获得数组？这也是a的转换`String`吗？如果是这样，在日志输出中获取零和负值可能是完全有效的。这取决于您用于转换为字节数组的输入字符和编码。如果您使用`String.getBytes()`as 与您的简单文本，您将使用平台默认编码。您的简单案例表明默认编码与 ASCII 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:23:59.977

我不确定你认为问题出在哪里。在 Java 中，`byte`是有符号类型，所以负值并不意外。Jbyte 可能是要匹配的 8 位有符号 C++ 类型。

最可能的解释是：

*   这是您创建字节数组的方式的一些人工制品；例如，您已以 UTF-8 编码（尽管零往往表示其他情况......）

*   您得到的`size`参数值不正确：

    *   由于某种原因，它大于字节数组的大小。

    *   将内容写入字节数组的进程没有将`size`字节放入其中。

* * *

值得注意的是，您的 JNI 代码不会检查`0 <= size < message.length`. 如果使用超出范围的参数调用此方法`size`，则可能会发生坏事……包括分段错误，这将导致 JVM 严重崩溃。

# firebase - 如何在 Firebase 中批量更新我的数据？

> ID：15126528
> 
> 赞同：1
> 
> 时间：2013-02-28T02:40:59.157
> 
> 标签：firebase

有一段时间，我使用已弃用的 .removeOnDisconnect() 函数来管理客户端的存在，所以现在一些文档永久显示有多个查看者，即使只有一个查看他们的文档。为了解决这个问题，我想为每个暂存器删除所有“客户”的孩子。我通读了文档，但找不到这样做的好方法。有什么建议么？

我的数据树如下所示：

`scratchpad.firebaseio.com/:scratchpad_id/clients/:client_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:00:50.897

Firebase 还没有您描述的操作。

我建议在 Firebase 的根目录附加一个“child_added”回调，然后为每个孩子删除“clients”位置。这将需要您同步整个 Firebase，但对于运行 Node.js 的服务器来说，这可能没什么大不了的。

# ruby-on-rails - 具有多个 has_many/belongs_to 关联的嵌套模型形式

> ID：15126530
> 
> 赞同：1
> 
> 时间：2013-02-28T02:41:01.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, nested-forms, nested-attributes, activemodel

我有三个模型：

```
class Rate < ActiveRecord::Base
  attr_accessible :user_id, :car_id, :rate

  belongs_to :user
  belongs_to :car
end

class User < ActiveRecord::Base
  attr_accessible :name

  has_many :rates
  accepts_nested_attributes_for :rates
end

class Car < ActiveRecord::Base
  attr_accessible :name

  has_many :rates
  accepts_nested_attributes_for :rates
end 
```

和一个控制器：

```
class UsersController < ResourceController
  def new
    # Assume user is loaded
    @user.rates.build
  end
end 
```

我正在尝试构建一个嵌套表单，该表单将关联用户/汽车列表及其相关费率。

就像是：

```
<% form_for @user do |f| %>
  <%= @user.name %><br />
  <% Car.all.each do |car| %>
    <%= car.name %><br />
    <%= f.fields_for :rates do |r| %>
      <%= r.number_field :rate %>
    <% end %>
  <% end %>
<% end %> 
```

问题是我希望 Rate 模型按如下方式存储数据：

```
USER_ID    CAR_ID    RATE
1          1         10
1          2         20
1          3         30
2          1         40
3          2         50 
```

我无法弄清楚如何正确构建`fields_for`助手来为`user_id`和构建正确的参数`car_id`。

就像是：

```
user[car=1][rate]
user[car=2][rate] 
```

我已经尝试过更明确的`fields_for`这样的：

```
<%= r.fields_for 'user[car][rate]' %> 
```

但它仍然没有正确构建嵌套参数。未正确识别汽车参数。

任何帮助，将不胜感激！谢谢。

编辑：控制器动作必须在用户之下。为简洁起见，上面的示例已被缩短，但其他与用户相关的属性可通过表单获得，因此它必须使用 users 控制器。

回答：我想出了一个办法。我[添加了自己的答案](https://stackoverflow.com/a/15143990/403664)来解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:02:41.237

```
<% form_for @user do |f| %>
  <%= @user.name %><br />
   <%= f.fields_for :rates do |r| %>
      <% Car.all.each do |car| %>
      <%= car.name %><br />
      <%= r.number_field :rate %>
    <% end %>
  <% end %>
<% end %> 
```

这可能是您的问题的解决方案。只是检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:26:56.240

我想我已经弄清楚了。

在我的控制器中，我修改了构建方法如下：

```
Car.all.each { |c| @user.rates.build(car_id: c.id) } if @user.rates.count == 0 
```

然后，在我的模型中，我需要以下内容：

```
attr_accessible :rates_attributes 
```

最后，该`fields_for`块应如下所示（记住，这是在@user 表单对象 f 中）：

```
<%= f.fields_for :rates do |r| %>
  <%= r.hidden_field :car_id %>
  <%= r.object.car.name %><br />
  <%= r.number_field :rate %>
<% end %> 
```

这会正确构建参数哈希并在提交表单时创建速率模型条目。

在控制器中检查现有用户费率将确保在表单中使用现有值并且不构建新值（我认为构建考虑了......？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:01:16.367

该表单将创建一个新速率而不是一个新用户，因此该方法应该在 RatesController 而不是 UsersController 中。

有了这个逻辑，问题似乎就解决了。你可以写`field_for rate[user]`和`field_for rate[car]`

# android - 将 ID 分配给动态创建的 ListFragment

> ID：15126532
> 
> 赞同：2
> 
> 时间：2013-02-28T02:41:20.317
> 
> 标签：android, bundle, fragment

我目前正在为 Android 编写这段代码，它有一个动态创建的 listfragment。甚至列表视图也被动态分配给它。它从 SQL Lite 获取一个简单的游标对象并将其分配给适配器。

这一切都很好，问题是当方向发生变化时，savedInstanceState 包始终为空。即使我覆盖 OnSaveInstanceState 并将项目添加到该包或 onCreateView。我做了一些研究，发现这是因为片段没有分配给它的 ID。

关于将 ID 分配给 listfragment 的位置以及如何分配，我遇到了一些问题。我正在使用 FragmentTransaction 并使用 TAG 标识符。

对于此事，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:56:07.837

您可以在进行交易时执行此操作。如果你打电话

```
FragmentTransaction.replace(containerViewId, fragment, tag); 
```

**或者**

```
FragmentTransaction.add(fragment,tag) 
```

**或者**

```
FragmentTransaction.add(containerViewId, fragment, tag); 
```

然后，您可以使用`tag`来获取对`Fragment`此类的引用

```
FragmentManager.findFragmentByTag(tag); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:52:18.700

看看这个问题：[Android - Set fragment id](https://stackoverflow.com/questions/9363072/android-set-fragment-id)

您不能将 ID 分配给动态创建的片段。

但是，您可以创建一个 .xml 布局文件并使用 .xml 为您的片段分配一个 id `android:id="@+id/my_fragment"`。您是否有理由不使用 xml 定义的片段？

# actionscript - Adobe flash(cs5)如何替换动画

> ID：15126537
> 
> 赞同：0
> 
> 时间：2013-02-28T02:41:47.497
> 
> 标签：actionscript, flash-cs5

我有一个人站立的符号，他有孩子的movieClips，比如手、腿、头、身体……那么如果我按下按钮或在舞台上单击，我需要如何立即更改动画？

我想：

1）创建一个新的movieClip，它具有所有相同的部分，但动画为行走（例如），然后制作类似：

```
if(keypressed)
{
   person.replaceSymbol(myNewAnimatedSymbol); //method that not exist
} 
```

2）例如，如果我的站立动画从 1 到 30，我可以在同一行中制作另一个动画，比如说从 31 到 60，他正在跑步，然后写：

```
if(keypressed)
{
   person.legs.gotoAndPlay(31); //in the 60 frame he go back to 31 by using gotoAndPlay(31)
   person.hands.gotoAndPlay(31);
   person.body.gotoAndPlay(31); //and so on...
} 
```

你能告诉我我需要使用哪种方法吗？或者如果你有更好的想法如何制作它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:20:57.057

嗯嗯。我想说你的第二种方法更容易绘制和控制，特别是如果它最终会重新给你的 MC 换皮，比如说你的人会穿上一件连接在身体和手臂上的斗篷，你的“新动画符号”可能需要进行更改以适应该服装，而对于一个符号，您可以为其部分指定另一种外观，例如`person.hands.cover=clothing.handpart; person.legs.cover=clothing.legpart`等，然后动画将包含对`cover`被更改的引用，以便正确的服装部分出现在所有移动部件。

实际上，您可能不需要将您的MC`person`分成不同`body`的 、`hands`、`legs`等 MC，而是使您的人`legs`成为一个容器，可以容纳裸露的身体部位（裸腿图）或穿着的身体部位（靴子、裤子等），并通过使这些容器根据人应该如何行走、站立、奔跑、攻击等方式移动来为主体部分设置动画，这样您就可以用一个点来装饰您的整个人的动画集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:10:20.120

这取决于例如我的角色有大约 100 个动画。将它们放在一个时间线上并告诉他们从这个标签到那个标签（或框架）是一个巨大的混乱管理。

所以我有 100 个带有导出符号的库项目。我不断在它们之间切换。这使它易于管理。

所以，我认为问题是你有多少动画？你能在一个时间线上管理它们吗？如果可以的话，我会说使用标签或跳帧。

您的两种方法都是正确的，第二种方法会更快，因为您没有从显示列表中添加或删除任何内容。

# ios - UISegmentControl 在视图控制器之间切换

> ID：15126538
> 
> 赞同：0
> 
> 时间：2013-02-28T02:41:49.563
> 
> 标签：ios, ipad, cocoa-touch, uitableview, uisegmentedcontrol

我有一个导航控制器，它的导航栏上有一个**UISegmentControl**，我已经将一个 UIViewController 设置为导航控制器的 rootViewController。现在，当用户选择 UISegmentControl 时，我需要在另外两个 UITableViewController 之间切换。

我设置

```
[rootViewController.view addSubview:firstTableView.view] 
```

当我处理段控制值更改事件时，我像这样设置另一个表视图控制器

```
[rootViewController.view removeFromSubview];
[rootViewcontroller.view addSubview:secondTableView.view];
[segmentControl setEnabled:YES forSegmentAtIndex:segmentControl.selectedSegmentIndex]; 
```

但是当段控制切换到第二个表格视图时，什么都没有！！！只是空白。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:57:06.570

为了将视图控制器添加为子视图，您可以这样做：

```
[rootViewController.view addSubview:firstTableView.view];
[rootViewController addChildViewController:firstTableView]; 
```

并删除它：

```
[firstTableView.view removeFromSuperview];
[firstTableView removeFromParentViewController];

[rootViewcontroller.view addSubview:secondTableView.view];//now you can add second tableviewcontoller
[rootViewController addChildViewController:secondTableView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T04:57:16.880

```
-viewDidLoad()
{

[ self.view addSubview: firstTableView] ;
firstTableView.hidden = yes;
[ self.view addSubview: secondTableView] ;
secondTableView.hidden = yes;

}

-(IBAction) segmentAction:(id)sender 
{
    UISegmentedControl* control = sender ;

    if( [control selectedSegmentIndex] == 0 )
    {
       firstTableView.hidden = no;
       secondTableView.hidden = yes;

    }
    if( [control selectedSegmentIndex] == 1 ) 
    {  

       firstTableView.hidden = yes;
       secondTableView.hidden = no;
    }

} 
```

# android - 通过文本宽度而不是字符数限制 Android 中的 EditText

> ID：15126543
> 
> 赞同：0
> 
> 时间：2013-02-28T02:42:28.630
> 
> 标签：android, android-edittext

我试图适应`EditText`不同的`ImageView`模板。对于每个模板，我想将其限制`EditText`为特定宽度。

例如，在我的一个模板中，该`EditText`字段的最大宽度应为 300 像素，因此我想将文本宽度限制设置为 300 像素。

但是，我不能通过字符长度来限制长度，因为键入：

“iiiiii”与“wwwwwwwwww”的宽度不同。

有人会碰巧有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:09:44.313

您可以使用 textWatcher。这将有一个名为 onTextChanged() 的方法。您可以覆盖它以获取长度。完成此操作后，您可以更改 textView 本身的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:49:19.477

[http://www.rqna.net/qna/tssiw-android-edittext-limit-string-length-not-by-characters.html](http://www.rqna.net/qna/tssiw-android-edittext-limit-string-length-not-by-characters.html)

那个家伙在 2 个月前用可能是最好的答案回答了你的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-26T16:17:03.693

您可以`android:paddingRight`通过 xml实现类似的功能

# java - struts2中如何使用表单提交复合对象

> ID：15126546
> 
> 赞同：0
> 
> 时间：2013-02-28T02:43:04.753
> 
> 标签：java, jsp, jakarta-ee, struts2

我有以下课程

```
public class Address {
  private String unit;
  private String street;
  ... getter and setters go here....
}

public class Person {
   private String name;
   private Address address;
   public Person(){
      address = new Address();
   }
   ... getter and setters go here...
 }

public class Employee extends Person {
    ... 
} 
```

例如，我可以使用以下代码访问地址类的单元字段

```
 <s:form method="POST" action="updateEmployee">
    <s:textfield name ="unit" label="Unit" value="%{employee.address.unit}" />
    <s:textfield name ="name" label="Name" value="%{employee.name}" />
 </s:form> 
```

但是当我提交表单时，它会发送除地址类字段之外的所有字段。它显示单位为空。

```
 @Action
 public class myaction implements ModelDriven {

 Employee emp = new Employee();

 public String updateEmployee(){
    System.out.println("Unit is" + employee.getAddress().getUnit();
    System.out.println("Unit is" + employee.getName();
    return "SUCCESS";
 }

 public Employee getEmployee() {
    return employee;
}

public void setEmployee(Employee employee) {
    this.employee = employee;
}

@Override
public Object getModel() {
    return employee;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:07:08.207

尝试

```
<s:textfield name ="employee.address.unit" label="Unit" value="%{employee.address.unit}" />
<s:textfield name ="employee.name" label="Name" value="%{employee.name}" /> 
```

# php - PHP如何按参数对树孩子进行降序排序

> ID：15126553
> 
> 赞同：0
> 
> 时间：2013-02-28T02:43:50.657
> 
> 标签：php, sorting, tree

我有一棵这样的树

```
array(
array('name'=>'n1', 'timestamp'=>1000, 'children'=> array()),
array('name'=>'n2', 'timestamp'=>2000, 'children'=> array(
    array('name'=>'n3', 'timestamp'=>3000, 'children'=> array()),
    array('name'=>'n4', 'timestamp'=>4000, 'children'=> array(
        array('name'=>'n5', 'timestamp'=>4000, 'children'=> array()),
        array('name'=>'n6', 'timestamp'=>3000, 'children'=> array())
    )), 
)),
array('name'=>'n7', 'timestamp'=>3000, 'children'=> array())
)

-n1
-n2
    -n3
    -n4
        -n5
        -n6
-n7 
```

我想按每个级别 DESC 上的时间戳对其进行排序，因此结果将是

```
-n7
-n2
    -n4
        -n5
        -n6
    -n3
-n1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:11:54.343

```
function timestamp_sort(&$a, &$b)
{
  if (!empty($a['children']))
    usort($a['children'], 'timestamp_sort');
  if ($a['timestamp'] == $b['timestamp'])
    return 0;
  return $a['timestamp'] < $b['timestamp'] ? 1 : -1;
}

usort($tree, 'timestamp_sort'); 
```

我假设您熟悉该`usort`功能 - 如果不熟悉，您应该阅读[文档](http://www.php.net/manual/en/function.usort.php)。

除了基本用法之外，`usort`我们还做了两件事：

*   递归排序 -`timestamp_sort`当数组包含本身需要排序的项目时，该函数会调用自身。
*   通过引用将参数传递给函数——这样当我们对子数组进行排序时，我们的更改会更新原始数组。同样，如果您不熟悉参考资料，您应该[阅读它](http://php.net/manual/en/language.references.php)。

# sql - 我可以连接来自 2 个不同 DB2 数据库的数据吗？（如 SQL Server 链接数据库）

> ID：15126560
> 
> 赞同：7
> 
> 时间：2013-02-28T02:44:52.903
> 
> 标签：sql, db2, linked-server

我正在增强现有的 java 应用程序。在 2 个不同的 DB2 数据库中有数据。该应用程序已经从 2 个不同的数据库中获取数据，但它总是先从一个数据库中查找，然后再从另一个数据库中查找。有没有办法使用一个 SQL SELECT 连接来自 2 个不同 DB2 数据库的数据？

这是我尝试过的：

```
CREATE ALIAS remote_orders FOR remote_db.schema.orders;

select *
from myid.remote_orders a
inner join local_schema.parts b on (a.key = b.key)
with ur FETCH FIRST 200 ROWS ONLY 
```

我收到此错误：

```
STATEMENT REFERENCE TO REMOTE OBJECT IS INVALID. SQLCODE=-512, SQLSTATE=56023, DRIVER=4.14.113 
```

我可以用临时表做点什么吗？我可以毫无错误地运行此选择，但它对我没有帮助......（还）

```
select *
from myid.remote_orders
with ur FETCH FIRST 200 ROWS ONLY 
```

**编辑：**

[DB2 临时表](https://stackoverflow.com/questions/11422572/db2-equivalent-of-tsql-temp-table)可能会有所帮助。我能够创建一个。现在我需要（上床睡觉）并尝试选择它，然后加入我的行列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:32:13.400

使用完全限定名称`<database>.<user/schema>.<tablename>`

就像是：

```
select *
from DB1.myid.remote_orders a
inner join DB2.local_schema.parts b on (a.key = b.key)
with ur FETCH FIRST 200 ROWS ONLY 
```

# java - Sharepoint 2010 oData Atom 提要内容属性在 Java 中解析

> ID：15126565
> 
> 赞同：1
> 
> 时间：2013-02-28T02:45:53.640
> 
> 标签：java, sharepoint-2010, odata, restlet, atom-feed

我正在使用 Java 使用 Sharepoint 2010 oData 列表。到目前为止，使用 SSL 和 NTLMv2 的连接运行良好，我得到了 Atom 格式的响应。Sharepoint 似乎禁用了 JSON 格式。下一步是高效解析响应以获取 Java 中的 List 条目内容属性。

我有几个选择，比如使用：

*   罗马来解析提要响应，但这并不容易让我解析我需要的内容属性。
*   oData4J - 但它似乎不支持基于 NTLM 的身份验证（基于文档和未解决的问题）。
*   Restlet 框架 - 是否有人使用它来使用安全且经过身份验证的 Sharepoint oData 服务？
*   XML解析

对上述任何一项有任何见解或经验，以及推荐的有效方法是什么？

我要解析或获取的内容属性是：

```
<m:properties xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
 <d:ContentTypeID xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">0x01005FC9ED59F2FC4842B6D</d:ContentTypeID>
 <d:Activity xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">Activity 1</d:Activity>
 <d:StartDate xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.DateTime">2012-04-16T00:00:00</d:StartDate>
 <d:EndDate xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.DateTime">2012-04-16T06:00:00</d:EndDate>
 <d:ActivityTypeValue xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:null="true" />
 <d:CreatedById xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.Int32">193</d:CreatedById>
 <d:ModifiedById xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.Int32">193</d:ModifiedById>
 <d:Id xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.Int32">357</d:Id>
 <d:ContentType xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">Item</d:ContentType>
 <d:Modified xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.DateTime">2012-03-30T13:07:18</d:Modified>
 <d:Created xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" m:type="Edm.DateTime">2012-03-30T11:35:42</d:Created>
 <d:Version xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">1.0</d:Version>
</m:properties> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T18:30:36.967

JSON实际上是可能的，你只是不能使用 $format=json url参数来获取它。

您必须使用“接受”标题。

```
httppost.setHeader("Accept", "application/json"); 
```

刚刚完成了一个项目，我不得不使用 ODATA 与 SharePoint 2010 Enterprise 进行交互，我对你的工作表示同情 :)

我使用 ODATA JSON 将数据推送到 SharePoint。最后，尽管事实证明 SOAP 接口包含更多用于实际从列表中读取的信息。解析从 SOAP 返回的 XML 也很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:43:31.600

在 ROME 中，您可以为命名空间创建自定义模块（[定义自定义模块](https://rometools.jira.com/wiki/pages/viewpage.action?pageId=4227109)）`dataservices`。这可能也是其他人想要使用的东西。

# android - 无法调用 onNewIntent

> ID：15126580
> 
> 赞同：0
> 
> 时间：2013-02-28T02:47:21.283
> 
> 标签：android

我的程序有 MainActivity 和 myService。

MainActivity 是`'singletop'`，并且 MainActivity 覆盖`onNewIntent`类。

myService 是“**前台**”服务。它弹出一个通知。通知中有`Intent(this,MainActivity.class)`在pendingIntent 中启动MainActivity。

我的程序流程是

从图标启动（开始） MainActivity ( `startService`) myService ( `send broadcast`) 广播`class(start MainActivity)onNewIntent@MainActivity`

当程序像这样的流程启动时，onNewIntent 被准确地调用。

但是当程序从通知启动时，onNewIntent 永远不会被调用。

从通知启动`(start) MainActivity (startService) myService (send broadcast) broadcast class(start MainActivity)onNewIntent@MainActivity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:04:24.250

来自[http://developer.android.com/guide/topics/manifest/activity-element.html上的指南](http://developer.android.com/guide/topics/manifest/activity-element.html)

类似地，也可以创建“singleTop”活动的新实例来处理新意图。但是，如果目标任务在其堆栈顶部已经有活动的现有实例，则该实例将接收新意图（在 onNewIntent() 调用中）；未创建新实例。在其他情况下——例如，如果“singleTop”活动的现有实例在目标任务中，但不在堆栈的顶部，或者如果它在堆栈的顶部，但不在目标任务中 -将创建新实例并将其推送到堆栈上。

因此，只有在堆栈顶部存在活动的现有实例时才会调用 onNewIntent。

# ios - iOS：块复制并添加到可变数组中，清空数组时是否需要释放它们？

> ID：15126584
> 
> 赞同：3
> 
> 时间：2013-02-28T02:47:50.533
> 
> 标签：ios, objective-c, nsmutablearray, objective-c-blocks

所以如果我有：

```
SomeBlock myBlock = ^(){};
[self.mutableArray addObject: [myBlock copy] ]; 
```

以后如果我需要：

```
[self.mutableArray removeAllObjects]; 
```

那么我应该先遍历数组中的所有块并释放它们吗？

谢谢

编辑：

我没有使用 ARC，当我将一个块添加到数组时我在某处看到我需要复制它，这就是`[block copy]`我将它添加到数组时这样做的原因，因此我认为我应该在从数组中删除所有对象之前释放它们.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:04:41.580

我假设您*没有*使用 ARC（那时这个问题不会很有趣）。

在您的代码中，您确实需要发送`release`到所有块：：虽然`NSArray`保留放入其中的对象，并在释放数组本身时释放对象，但您添加的对象已经具有保留计数`1`，因为`copy`方法为您提供了保留计数为 的对象`1`。这就是为什么在将块添加到数组之前需要遵循的原因`copy`，如下所示：`autorelease`

```
[self.mutableArray addObject: [[myBlock copy] autorelease]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:56:43.173

每当您获得任何对象的所有权时，您都有责任释放它，否则会发生内存泄漏。

> 如果您不释放指向该对象的指针，那将是泄漏。当你释放数组时，它会在它持有的所有对象上调用释放，因为它之前调用了保留。

对于 ARC，它将处于自动释放状态，因此您需要释放自己。

# mysql - Mysql中的日期范围（之间）

> ID：15126587
> 
> 赞同：0
> 
> 时间：2013-02-28T02:48:14.863
> 
> 标签：mysql

我想获取数据库中日期在两个给定参数之间的所有值。以下是我的代码。这里 Date 是 $date1' 和 '$date2 是给定的参数。

```
$result1 = mysql_query("SELECT * FROM model WHERE  Date BETWEEN('$date1' AND '$date2')");
while($row=mysql_fetch_array($result1)){
        $d=$row['Date'];

            echo $d;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:51:10.287

您的语法有错误。去掉后面的括号`between`：

```
$result1 = mysql_query("SELECT * FROM model WHERE  Date BETWEEN '$date1' AND '$date2' "); 
```

我猜这是你的问题。

# database - 理解 3NF：请简单的英语

> ID：15126588
> 
> 赞同：8
> 
> 时间：2013-02-28T02:48:18.763
> 
> 标签：database, database-normalization, 3nf

我正在解决一个示例问题，我们试图确定以下哪些关系属于第三范式（3NF）。以下是我们给出的关系：

**R1(ABCD)
ACD -> B AC -> D D -> C AC -> B**

R2(ABCD)
AB -> C ABD -> C ABC -> D AC -> D

R3(ABCD)
C -> B A -> B CD -> A BCD -> A

R4(ABCD)
C -> B B -> A AC -> D AC -> B

我知道答案是 R1 在 3NF 中，但我很难理解确定什么违反 3NF 的步骤。有人可以用简单的英语为每个关系分解吗？如果您可以逐步向我展示每个关系如何违反 3NF 规则之一，那将非常有帮助：

1.  X -> A，则 A 是 X 的子集
2.  X 是一个超级键
3.  A 是 R 的某个键的一部分

对于 R1，我采取的第一步是将其分解为闭包：

ACD+ = ABCD
AC+ = ABCD
D+ = C

ACD 和 AC 是超密钥，它们满足规则 2。
1\. D -> C，但 C 不是 D 的子集。违反了规则 1。
2\. D 不是超级键。违反了规则 2。
3\. C 是 R 的某个键的一部分。C 是 AC 和 ACD 的一部分。那么，第3条是否成立？

不确定我是否正确地执行了这些步骤，所以对于那些在这些概念上苦苦挣扎的人，请尽可能简单地分解它。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-05-15T20:35:57.980

我发现的关系的最佳定义`third normal form (3NF)`如下：

```
A relation schema R is in 3NF if, whenever a function dependency X -> A holds in R, either
    (a) X is a superkey of R, or
    (b) A is a prime attribute of R. 
```

现在有三个定义需要澄清，`key`、`superkey`和`prime attribute`。

对于定义，我们将使用 R1 关系中的示例来描述它们：

```
R1(ABCD)
ACD -> B   AC -> D   D -> C   AC -> B 
```

`key:`键是确定关系的每个属性的属性。换句话说，它是一组属性，它将为您提供不在该组中的所有其他关系属性。在上述示例的关系 R1 中，键是`AC`和`AD`。为什么是`AC`钥匙？因为通过知道属性`A`和`C`你可以确定剩余的属性，`B`和`D`。为什么是`AD`钥匙？同样的原因。`A`并将`D`最终确定`B`和`C`。

`superkey:`超级键基本上是键的超集。超级键将始终包含键并且可能包含更多属性。在前面的例子中，`AC`是一个键。因此`AC`, `ACD`,`ACB`等是超级键。请注意，密钥本身就是超级密钥。

`prime attribute:`主要属性基本上是作为键的一部分的属性。因此`A`和`C`是主要属性，因为它们是 key 的一部分`AC`。但是请注意，密钥和超级密钥之间的区别。对于超级键`ACB`，`B`不是主要属性，因为`B`它不是键的一部分。只需将主要属性视为键的子集。

* * *

现在让我们看看这四个关系：

```
R1(ABCD)
ACD -> B   AC -> D   D -> C   AC -> B

R2(ABCD)
AB -> C   ABD -> C   ABC -> D   AC -> D

R3(ABCD)
C -> B   A -> B   CD -> A   BCD -> A

R4(ABCD)
C -> B   B -> A   AC -> D   AC -> B 
```

对于每个关系，我们将写下`keys`和`prime attributes`。然后我们将查看是否满足定义。

```
R1:
keys: AC, AD
prime attributes: A, C, D 
```

`ACD -> B:`左侧是超级键。满足（一）。

`AC -> D:`左侧是一个键，因此是一个超级键。满足（一）。

`D -> C:`左侧不是超级键。不满足（a）。但是，右侧是主要属性。满足 (b)。

`AC -> B:`左边是钥匙。满足（一）。

在所有情况下都满足（a）或（b）。因此`R1`在`3NF`.

```
R2:
keys: AB
prime attributes: A, B 
```

`AB -> C:`左侧是一个键，因此是一个超级键。满足（一）。  

`ABD -> C:`左侧是超级键。满足（一）。

`ABC -> D:`左侧是超级键。满足（一）。

`AC -> D:`左侧不是超级键。不满足（a）。右侧不是主要属性。不满足（b）。

由于 (a) 或 (b) 在所有情况下都不满足，`R2`不在`3NF`.

```
R3:
keys: CD, 
prime attributes: C, D 
```

`C -> B:`左侧不是超级键。不满足（a）。右侧不是主要属性。不满足（b）。

由于我们已经找到了一个不满足 (a) 或 (b) 的情况，我们可以立即得出结论，`R3`它不在`3NF`.

```
R4:
keys: C
prime attributes: C 
```

`C -> B:`左侧是一个键，因此是一个超级键。满足（一）。  

`B -> A:`左侧不是超级键。不满足（a）。右侧不是主要属性。不满足（b）。

同样，我们可以在这里停下来，因为第二种情况既不满足 (a) 也不满足 (b)。关系`R4`不在`3NF`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T23:14:51.830

3NF 的简化表达式是“如果每个传递依赖于键的属性都是键属性，则关系在 3NF 中”。¹ 键属性是*任何*候选键的一部分的属性。

R [3]是关于 3NF 分析的更简单的方法之一。

R [3] (ABCD)

*   C -> B
*   A -> B
*   光盘 -> 一个
*   BCD -> A

唯一的候选键是 CD。

*   是否存在传递依赖？是的，有：CD->A 和 A->B。B 传递地依赖于密钥。
*   B是关键属性吗？不，这不对; CD是唯一的钥匙。

所以 R [3]不在 3NF 中。

R [4]类似。C 是唯一的候选键。

*   是否存在传递依赖？是的，有：C->B 和 B->A。
*   A是关键属性吗？不，这不对; C是唯一的关键。

所以 R [4]不在 3NF 中。

在R [1]中，候选键是AC和AD。

*   是否存在传递依赖？是的，有：AC->D 和 D->C。
*   C是关键属性吗？是的。

所以 R [1] *在*3NF 中。

* * *

1.  “关系模式设计的新范式”，Carlo Zaniolo，ACM Transactions on Database Systems，Vol。7，第 3 期，1982 年 9 月，第 492 页。最近的工作使用*素数属性*来指代属于任何候选键的属性，使用*非素数属性*来指代*不*属于任何候选键的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T13:11:20.603

让我用简单的话解释一下：

对于给定的关系 **R1(ABCD)**，函数依赖关系是：

> **ACD -> B**
> 
> **交流-> D**
> 
> **D -> C**
> 
> **交流 -> 乙**

处于**3NF的条件**

**X->Y**这里当 Y 是非主属性时X 是**超级键，否则它可以是任何属性**

> **主属性**是属于超级键的属性
> 
> **非主属性**是不属于超键的属性

让我们回到关系 R1，

> AC+=ABCD
> 
> AD+=ABCD
> 
> ACD+=ABCD 和
> 
> D+=直流

因此，我们得到 AD、AC、ACD 作为我们的超级键

A , **C,D**是**素数**属性，**B**是非**素数**属性

ACD->B

> 这种功能依赖在 3NF 中，因为 ACD 是超级键，B 是主要属性

交流->D

> 这种功能依赖也在 3NF 中，因为 AC 是超级键，D 是主要属性

D->C

> 这种函数依赖也在 3NF 中，因为 D 是主要属性，C 也是主要属性

交流->乙

> 这种功能依赖也在 3NF 中，因为 AC 是超级键，B 是非主属性

```
 Thus,the relation is not in 3NF only when non-prime attributes
  does not depend on super key 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T09:46:24.453

用简单的英语，这里有 3 种范式：

**1NF：** “key”的存在保证了表在1NF（key must be there）。

2NF：要求“每个”非关键属性依赖于“整个关键”，以确保2NF。

**3NF：**进一步要求“每个”非关键属性都依赖于“除了关键”确保了 3NF。

现在，为此：

> R1(ABCD) ACD -> B AC -> D D -> C AC -> B

看看这些 ACD -> B 和 AC -> B: 显然违反了 2NF 条件。忘记 3NF，这种关系甚至不在 2NF 中。“整个关键”-> 概念不成立。

我认为，您已经使用 SET 证明了这一点。

# c# - 等待似乎悄悄归来

> ID：15126591
> 
> 赞同：0
> 
> 时间：2013-02-28T02:48:37.453
> 
> 标签：c#, windows-store-apps

我有一个在异步方法上调用 await 的方法。

```
private async void LoadPic(string imageFileName)
{
    StorageFolder sf = Windows.ApplicationModel.Package.Current.InstalledLocation;
    StorageFolder subFolder = await sf.GetFolderAsync("Assets");
    StorageFile sfile = await subFolder.GetFileAsync(imageFileName); 
```

当我在下一行设置断点时，断点永远不会被击中。它只是退出方法并返回。

```
public PixelData GrabPixelData(string imageFileName)
{
    if (!ImageDictionary.ContainsKey(imageFileName))
    {
        // doesn't exist yet, so load it
        LoadPic(imageFileName);
    }

    PixelData pd = new PixelData();
    bool found = false;
    while( found == false ) {
        found = ImageDictionary.TryGetValue(imageFileName, out pd);
    }
    return pd;
   // throw new NullReferenceException();
} 
```

在我调用 LoadPic() 之后，我添加了一个循环，不断检查它是否将此文件中的图像添加到字典中。它似乎永远不会被添加，只是挂起。

这种方法在我从中抽象出来的子类上运行良好。

* * *

编辑：

修改了一些东西。现在一切似乎都正常了，但是当我将结果分配给子类时，我得到一个空异常错误（即使调试器没有指示任何内容为空！）。

我想知道它是否与它被包装在任务中的事实有关。

儿童班：

```
private async void LoadPic()
{
     // I realize the async void is to be avoided, but ... I'm not sure because there isn't anything I want it to return. Should it just return a dummy task?
     sat1.pixelData = await rootPage.GrabPixelData("sat1.png"); 
```

加载图片：

```
 private async Task<PixelData> LoadPic(string imageFileName)
        {
            StorageFolder sf = Windows.ApplicationModel.Package.Current.InstalledLocation;
            StorageFolder subFolder = await sf.GetFolderAsync("Assets");
            StorageFile sfile = await subFolder.GetFileAsync(imageFileName);
...
            return pd; 
```

抓取像素数据：

```
public async Task<PixelData> GrabPixelData(string imageFileName)
{
    if (!ImageDictionary.ContainsKey(imageFileName))
    {
        // doesn't exist yet, so load it
        PixelData pd = await LoadPic(imageFileName);
        ImageDictionary.Add(imageFileName, pd);
    }

    var test = ImageDictionary[imageFileName];

    return ImageDictionary[imageFileName];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:07:11.513

你应该避免`async void`。此外，轮询共享状态以检测异步操作的完成是不可以的。这种 CPU 使用率会导致您的应用被 Windows 应用商店拒绝。

我建议你改`LoadPic`回`Task<PixelData>`。然后将您的`ImageDictionary`from更改`Dictionary<string, PixelData>`为`Dictionary<string, Task<PixelData>>`. 然后，您的`GrabPixelData`方法可能如下所示：

```
public Task<PixelData> GrabPixelData(string imageFileName)
{
  if (!ImageDictionary.ContainsKey(imageFileName))
  {
    // doesn't exist yet, so load it
    ImageDictionary.Add(imageFileName, LoadPic(imageFileName));
  }

  return ImageDictionary[imageFileName];
} 
```

# java - 平板电脑屏幕优化

> ID：15126593
> 
> 赞同：1
> 
> 时间：2013-02-28T02:48:39.673
> 
> 标签：java, android, android-layout, optimization, padding

我已经为几乎所有 Android 手机优化了我的应用程序。我的应用程序的设置方式，我在它的左侧和右侧有一个 16dp 的填充，在顶部和底部有一个 65dp 的填充（见下面的截图）。在手机上看起来很漂亮。

但在平板电脑上，它看起来很糟糕。手机上的 65dp 与平板电脑上的 65dp 完全不同。在平板电脑上，问题周围的黑色边框超出了滚动背景的一侧，并且内容位于滚动背景的顶部和底部。

我有什么办法来解决这个问题？是否有填充的百分比/重量选项？我认为这将完全解决它，但我所知道的没有这样的事情。

![在此处输入图像描述](../Images/d8dcaf7ca39f67aa4bedf05ae908abf2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:57:16.407

您可以为不同的显示尺寸创建多个资源文件。Android 会自动为您选择正确的资源文件。使用这种技术，您可以为任何屏幕尺寸甚至完全独特的布局指定填充值，以便由 Android 自动为您选择。

请参阅[多屏幕设计](http://developer.android.com/training/multiscreen/index.html)。

使用多维资源文件将使根据屏幕大小更改填充的任务非常简单。查看[更多资源类型](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。

# c# - 获取文件 asp.net 的相对路径

> ID：15126594
> 
> 赞同：2
> 
> 时间：2013-02-28T02:48:43.137
> 
> 标签：c#, asp.net

我有一个 MVC4 应用程序，一个控制器方法需要一些文件（这个文件有一些 Json 对象），读取它 proccessit 然后删除它。

这些文件使用 ftp 上传到我的站点。我的项目结构是这样的

```
wwwroot
  bin
  content
  images
  scripts 
  suscribers // This is my ftp folder 
    _suscriber1
      _proccess1
        file1.txt //This is a Json file 
        file2.txt 
        ...
      _proccess2
      ...
    _suscriber2 
    ... 
```

我所有的文件（file1.txt...）都加载好了。在我的控制器上，我正在尝试以这种方式读取 file1.txt：

```
string suscriberDir= string.Format("_{0}", suscriber.Id);
string[] laPath = {System.AppDomain.CurrentDomain.BaseDirectory, "suscribers", suscriberDir};
string lcPath = Path.Combine(laPath);
string[] laPath2 = { lcPath, "_proccess1" , "_File1.txt" };
lcPath = Path.Combine(laPath2);
StreamReader reader = new StreamReader(lcPath);
string personas = reader.ReadToEnd();
reader.Close(); 
```

我的问题是它向我抛出了一个 filenotfound 异常。

读取 file1.txt 并获取其内容的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T02:58:10.627

尝试使用`Server.MapPath("_File1.txt");`

# php - Ajax 从 php 获取返回值？

> ID：15126600
> 
> 赞同：19
> 
> 时间：2013-02-28T02:49:31.917
> 
> 标签：php, javascript, jquery, ajax

我想提醒一个 php 方法的返回值，但没有任何反应。这是ajax和php方法。谁能看到我做错了什么？

--------------------------------------------------...... Ajax 脚本

```
$.ajax({
    type: 'get',
    url: '/donation/junk/4',
    data: datastring,
    success: function(data) {
        alert(data');
    }
}); 
```

------------------------------------------ php方法

```
function junk($id)
{
    return "works11";
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-28T02:52:54.663

在 PHP 中，您不能简单地返回您的值并将其显示在 ajax 响应中。你需要`print`或`echo`你的最终价值观。（也有其他方法，但这是离题了）。

此外，您的`alert()`通话中有一个尾随撇号，这将导致错误，应将其删除。

固定的：

```
$.ajax({
    type: 'get',
    url: '/donation/junk/4',
    data: datastring,
    success: function(data) {
        alert(data);
    }
}); 
```

PHP：

```
function junk($id)
{
    print "works11";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:53:34.537

你有一个额外的 ' 在 alert(data') 行

这应该工作

```
$.ajax({
    type: 'get',
    url: '/donation/junk/4',
    data: datastring,
    success: function(data) {
        alert(data);
    }
}); 
```

您的 PHP 代码也应该调用该方法并回显该值

```
function junk($id) {
    return 'works11';
}
exit(junk(4)); 
```

您当前所做的只是创建方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T02:55:07.110

ajax 返回文本，它不通过方法与 php 通信。它请求一个 php 页面，并且 ajax 请求的返回是我们宝贝在浏览器中打开时会显示的任何内容。

# java - 删除表中的值的问题

> ID：15126602
> 
> 赞同：-2
> 
> 时间：2013-02-28T02:49:46.897
> 
> 标签：java, swing, jtable, actionlistener

好的，所以我所拥有的是一个带有表格设置的 GUI，（大多数情况下，仍然存在一些问题）但我需要知道的是这个。将以下代码：

```
public void removeSelectedRows(JTable table)
    {
        DefaultTableModel model = (DefaultTableModel) table.getModel();
        int[] rows = table.getSelectedRows();
        for (int x=0;x<rows.length;++x){
            model.removeRow(rows[x]-x);
        }
        for (int x=0;x<animals;++x)
        {
            if (Pets[x][0].equalsIgnoreCase(table.getValueAt(table.getSelectedRow(),0)+""))
            {
                Pets[x][0]=null;
                Pets[x][1]=null;
                Pets[x][2]=null;
                Pets[x][3]=null;
                Pets[x][4]=null;
            }
        }
        animals=animals-1;
    } 
```

删除用户选择的行？（我的意思是简单地单击该行，然后单击删除按钮）。我不希望删除行本身，但我希望删除用户选择的行中包含的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:32:34.297

准备好弄脏你的手。

在某些时候，`DefaultTableModel`将不再满足您的需求，您应该准备好推出自己的实现。

第一件事。您正在使用面向对象的语言，您应该利用这一事实并将您的数据表示为对象。

其次，当从表中删除多个值时，很快就会变得非常棘手。删除第一行后，索引不再匹配，您需要某种方法将值映射回它们出现在模型中的索引。

第三，可见的行索引可能与模型的不同，尤其是在对表进行排序时。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;

public class TestJTable {

    public static void main(String[] args) {
        new TestJTable();
    }

    public TestJTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                List<Pet> pets = new ArrayList<>(25);
                pets.add(new Pet("Tyrannosauridae", "TYRANNOSAURUS", 20, 35));
                pets.add(new Pet("Dromaeosauridae", "VELOCIRAPTOR", 45, 90));
                pets.add(new Pet("Ceratopsidae", "TRICERATOPS", 15, 30));
                pets.add(new Pet("Stegosauridae", "STEGOSAURUS", 22, 25));
                pets.add(new Pet("Titanosauridae", "MALAWISAURUS", 22, 25));
                pets.add(new Pet("Compsognathidae", "COMPSOGNATHUS", 8, 25));
                pets.add(new Pet("Brachiosauridae", "BRACHIOSAURUS", 8, 25));
                pets.add(new Pet("Diplodocidae", "DIPLODOCUS", 8, 25));

                final PetTableModel model = new PetTableModel(pets);
                final JTable table = new JTable(model);

                InputMap im = table.getInputMap(JTable.WHEN_FOCUSED);
                ActionMap am = table.getActionMap();
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0), "delete");
                am.put("delete", new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        int[] indices= table.getSelectedRows();
                        // Convert the view's row indices to the models...
                        int[] mapped = new int[indices.length];
                        for (int index = 0; index < indices.length; index++) {
                            mapped[index] = table.convertRowIndexToModel(indices[index]);
                        }
                        model.removePets(mapped);
                    }
                });

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PetTableModel extends AbstractTableModel {

        private List<Pet> pets;

        public PetTableModel() {
            pets = new ArrayList<>(25);
        }

        public PetTableModel(List<Pet> pets) {
            this.pets = pets;
        }

        @Override
        public int getRowCount() {
            return pets.size();
        }

        public void removePets(int... indicies) {
            // Build a tempory list of Pet objects based
            // on the supplied indices...
            List<Pet> old = new ArrayList<>(indicies.length);
            for (int index : indicies) {
                old.add(pets.get(index));
            }

            // For each pet, get it's index in the model
            // remove it from the model
            // notify any listeners of the change to the model...
            for (Pet pet : old) {
                int index = pets.indexOf(pet);
                pets.remove(pet);
                fireTableRowsDeleted(index, index);
            }
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            Class clazz = String.class;
            switch (columnIndex) {
                case 2:
                case 3:
                    clazz = Float.class;
            }
            return clazz;
        }

        @Override
        public String getColumnName(int column) {
            String name = "??";
            switch (column) {
                case 0:
                    name = "Breed";
                    break;
                case 1:
                    name = "Category";
                    break;
                case 2:
                    name = "Buy Price";
                    break;
                case 3:
                    name = "Sell Price";
                    break;
            }
            return name;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Pet pet = pets.get(rowIndex);
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = pet.getBreed();
                    break;
                case 1:
                    value = pet.getCategory();
                    break;
                case 2:
                    value = pet.getBuyPrice();
                    break;
                case 3:
                    value = pet.getSellPrice();
                    break;
            }
            return value;
        }

        public void add(Pet pet) {
            pets.add(pet);
            fireTableRowsInserted(getRowCount() - 1, getRowCount() - 1);
        }

    }

    public class Pet {

        private String breed;
        private String category; 
        private float buyPrice; 
        private float sellPrice; 

        public Pet(String breed, String category, float buyPrice, float sellPrice) {
            this.breed = breed;
            this.category = category;
            this.buyPrice = buyPrice;
            this.sellPrice = sellPrice;
        }

        public String getBreed() {
            return breed;
        }

        public float getBuyPrice() {
            return buyPrice;
        }

        public String getCategory() {
            return category;
        }

        public float getSellPrice() {
            return sellPrice;
        }

    }

} 
```

# ios - 当 UITextView 当前是第一响应者时，如何让它注册触摸？

> ID：15126603
> 
> 赞同：0
> 
> 时间：2013-02-28T02:49:53.300
> 
> 标签：ios, touch, uitextview, tap, first-responder

我需要一种方法来知道当 UITextView 是第一响应者时它何时被触摸。我已经看到了一些关于这个的线程，但我从来没有弄清楚如何让它工作。我假设一定有办法？任何输入将不胜感激谢谢！

rc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:38:33.100

`UITextField`是 的子类`UIControl`，因此您可以使用 将自己添加为事件的侦听器[`addTarget:action:forControlEvents:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget%3aaction%3aforControlEvents%3a)。

# javascript - 在 PhoneGap 的浏览器中打开链接（使用非本地 index.html 根目录）

> ID：15126604
> 
> 赞同：3
> 
> 时间：2013-02-28T02:50:04.257
> 
> 标签：javascript, html, cordova, uiwebview, webview

我已经看到了一些关于如何在浏览器中打开链接而不是像[这样](https://stackoverflow.com/questions/14070841/phonegap-open-link-in-browser)的 WebView和[Phonegap 自己的文档的](https://build.phonegap.com/blog/access-tags)不同讨论。不过，我在让这两者中的任何一个工作时都遇到了问题，我想知道这是否是因为我正在加载一个不是本地`index.html`文件的 URL。这是我的设置。

我正在加载一个 URL `www.example.com`。我希望`www.non-example.com`在浏览器中打开所有 URL，同时将所有子 URL 加载到我的 WebView 中。我已经编辑`cordova.xml`过

```
<access origin="http://www.example.com"/> 
```

但是当我放一个网址时

```
<a href="http://www.non-example.com" target="_blank">Foo</a> 
```

并在我的 Android 设备中单击它，它只是在 WebView 而不是浏览器中打开它。我不知道这是否相关，但我在这个版本中将我的 PhoneGap 更新到了 2.2，并添加了一个`config.xml`与我相同的级别`index.html`（虽然我不确定它是否被使用，因为我没有重新创建我的 Android 项目从头开始）。所以我的问题归结为这些：

1) 如果我使用非本地 index.html，如何确保在浏览器中打开 URL？

2) 我如何知道我的`config.xml`文件是否正在被使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:17:13.410

我刚刚尝试了您所描述的内容，它适用于 Cordova 2.3。

广告 1)

您是否确保删除了其他冲突的访问规则，即默认规则 (access origin=".*") - 最宽松的规则获胜。

广告 2)

在重建项目之前清理项目以确保使用更新的 config.xml。

如果你想强制执行一个确切的行为，你总是可以使用插件和本机代码，尽管对于打开浏览器来说这可能是一种矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:39:06.580

[这里](https://stackoverflow.com/questions/14070841/phonegap-open-link-in-browser)似乎有一个公认的答案。要点看起来你可以调用导航器对象并告诉它打开一个链接，传递一个参数 {external: true}。不过我还没有测试过，祝你好运！

# windows-phone-8 - IconicTileData BackgroundColor 未显示

> ID：15126605
> 
> 赞同：1
> 
> 时间：2013-02-28T02:50:10.070
> 
> 标签：windows-phone-8, windows-phone

我正在尝试在 Windows Phone 8 中使用 IconicTileData 类，除了磁贴的颜色外，一切都运行良好。

无论我将属性设置为什么，磁贴都会显示强调色，而不是提供的强调色。

```
ShellTile.Create(navigateUri, new IconicTileData
{
    Title = category.Name,
    BackgroundColor = Colors.Magenta,
    IconImage = new Uri("/Resources/Tiles/IconicLarge.png", UriKind.Relative),
    SmallIconImage= new Uri("/Resources/Tiles/IconicSmall.png", UriKind.Relative)
}, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:58:40.573

不完全确定为什么会这样，但添加了一个

```
await System.Threading.Tasks.Task.Yield(); 
```

在调用 ShellTile.Create 似乎起作用之前。

# content-management-system - ModX 同上：订购电视？

> ID：15126609
> 
> 赞同：0
> 
> 时间：2013-02-28T02:50:28.377
> 
> 标签：content-management-system, modx, modx-evolution, ditto

我想通过名为“city”的电视订购 Dittos 结果

我已经这样设置了我的同上电话：

```
[!Ditto? &parents=`87` &display=`99` &orderBy=`city ASC` &tpl=`dittotpl`!] 
```

但这不起作用。

我在网上找不到任何资源来做到这一点。有什么可以帮助我的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:08:10.387

`&orderBy=`在创建初始 Ditto 语句后，我插入了该语句。`<span>`TinyMCE出于某种原因将其包装在 a中。删除它，一切都很好

# r - ggplot2 geom_rug 重新调整未使用的轴 - 我该如何阻止它？

> ID：15126613
> 
> 赞同：2
> 
> 时间：2013-02-28T02:51:22.523
> 
> 标签：r, ggplot2

我正在画一条`geom_smooth`线，想加一块地毯。y 可变性远大于平均值，因此当仅绘制平滑线时，y 尺度会从实际数据范围减小。当我在底部添加地毯时，它会重新调整 y 轴的比例，就好像 y 轴上也有地毯一样，因此很难看到平滑线的关系。

例子：

```
ggplot(diamonds, aes(y=carat, x=price, color=cut)) + 
    geom_smooth(se=F, method='lm') 
```

以上将 y 轴缩放到大约 0 到 3 的范围。

仅将地毯添加到底部：

```
ggplot(diamonds, aes(y=carat, x=price, color=cut)) + 
        geom_smooth(se=F, method='lm') + geom_rug(sides='b') 
```

y 轴现在放大到 5，即使没有在 3 以上绘制。

我知道我可以手动调整轴刻度，但我希望能够为大量变量动态地执行此操作，而且这种行为似乎是不正确的。因此，我假设我使用不正确。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:06:13.737

由于克拉值最多为 5，因此您会得到 y 轴的这种*奇怪*行为。这可以通过使用`geom_point()`. 当您使用`geom_rug()`它时，它会查看所有点并为每个实际值绘制地毯。设置`sided="b"`只是隐藏 y 侧的地毯，但该侧用于地毯的空间保持不变。

```
ggplot(diamonds, aes(y=carat, x=price, color=cut)) + 
  geom_point() + geom_smooth(se=F, method='lm') + geom_rug() 
```

![在此处输入图像描述](../Images/6041c05b9d5f9aea20cf987128a41da9.png)

`coord_cartesian()`您可以使用和设置参数将 y 轴缩放到所需的范围`ylim=`。

```
ggplot(diamonds, aes(y=carat, x=price, color=cut)) + 
  geom_smooth(se=F, method='lm') + geom_rug(sides='b')+
   coord_cartesian(ylim=c(0,3)) 
```

# api - Google Drive (Docs) 电子表格中的 Google Static Maps API

> ID：15126615
> 
> 赞同：0
> 
> 时间：2013-02-28T02:51:35.987
> 
> 标签：api, google-maps, google-sheets

我正在尝试使用**Google Static Maps** API 将图像提取到 Google Drive 电子表格中。它似乎主要是有效的。但是，它似乎随机不适用于某些邮政编码。但是，如果我在浏览器的地址栏中手动输入这些邮政编码，它就可以正常工作。这是我在单元格中的代码：

> =image(" [https://maps.googleapis.com/maps/api/staticmap?size=50x50&markers=color:green|size:tiny|](https://maps.googleapis.com/maps/api/staticmap?size=50x50&markers=color:green|size:tiny|) "&E10&"&markers=color:red|size:tiny|"&B1&"&sensor=错误的”）

单元格 E10 和 B1 中有邮政编码。如果我更改 B1，则某些邮政编码不起作用。具体来说，B1 = 20001 和 E10 = 22408 不起作用。然而：

```
https://maps.googleapis.com/maps/api/staticmap?size=50x50&markers=color:green|size:tiny|22408&markers=color:red|size:tiny|20001&sensor=false 
```

在我浏览器的地址栏中工作得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T19:20:14.403

我能够让它工作的唯一方法是使用[http://goo.gl](http://goo.gl)缩短URL 在电子表格中粘贴该 URL 将起作用。

```
=image("http://goo.gl/dOmcVP", 1) 
```

# javascript - 如何在运行激烈的 Javascript 时更新 DOM？

> ID：15126618
> 
> 赞同：3
> 
> 时间：2013-02-28T02:52:01.823
> 
> 标签：javascript, javascript-events

我正在编写 Javascript，它正在为一个项目计数到一定数量。这个数字可能在 100,000 左右，完成处理大约需要 10-15 秒。我希望脚本在用户调用页面后立即运行，并且在脚本完成时进行重定向。是否可以在 DOM 运行时暂停 10 毫秒以更新 DOM 以提供诸如“仍在工作”之类的反馈？

我想避免使用 jQuery 和 web-workers 在这种情况下不是一个选项。我意识到这不是一个真实世界的应用程序！

编辑：添加了一些代码作为示例：

在头上

```
function myCounter (target) {
    var t = target;
    var count = 0;
    while (t != count){
        if (t == count) {
        window.location.replace("http://example.com"); // redirect
        }
    count++;
    }
} 
```

在身体里

```
<script>myCounter(100000);</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:00:49.067

在大多数浏览器中，JavaScript 和 UI 在同一个线程中运行。`setTimeout`您可以使用（或）将线程返回给浏览器`setInterval`。

```
var myNumber = 0;
updateNumber();

function updateNumber(){
    // do heavy work for great good, ideally divided into smaller chunks

    document.getElementById('updateDiv').innerHTML = 'still working, up to ' + myNumber;

    if(myNumber < limit) {
      setTimeout(updateNumber, 20);
    }
} 
```

有关一般过程的更多详细信息，此答案值得一读：[https ://stackoverflow.com/a/4575011/194940](https://stackoverflow.com/a/4575011/194940)

# jquery - Ruby on Rails 使用灵魂伴侣 URL 自动完成

> ID：15126619
> 
> 赞同：2
> 
> 时间：2013-02-28T02:52:08.893
> 
> 标签：jquery, ruby-on-rails, autocomplete

我正在使用 Soulmate [https://github.com/seatgeek/soulmate](https://github.com/seatgeek/soulmate)在我的项目上创建一个自动完成表单，并使用本教程作为指导。[http://patshaughnessy.net/2011/11/23/finding-your-soulmate-autocomplete-with-redis-in-rails-3-1](http://patshaughnessy.net/2011/11/23/finding-your-soulmate-autocomplete-with-redis-in-rails-3-1)

我的问题是，我如何包含该项目的网址。例如，我正在为艺术家编制索引，我希望 json 对象包含数据、指向 /artist/1 的 url

我需要这个，以便我的 jQuery 自动完成可以链接到搜索结果。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:06:36.643

After going to the link you provided, I see in the docs that they have a rendering callback function, presumably meant to make use of your ajax responses.

Notice how I simply returned what I wanted the list item to contain. This may not be completely accurate, but you get the idea. look in the docs further for more information. (there doesn't seem to be a lot of documentation written, though.)

```
var render = function(term, data, type){
    var link = "<a href="data.url.or.something">"+term+"</a>";
    return link;
}

$('#search-input').soulmate({
  renderCallback: render, //this is a reference to the function above.
  url:            'http://soulmate.YOUR-DOMAIN.com/search',
  types:          ['type1', 'type2', 'type3', 'type4'],
  selectCallback: select,
  minQueryLength: 2,
  maxResults:     5
}); 
```

# c++ - 如何在 Qt5 中使用 OpenCV

> ID：15126620
> 
> 赞同：1
> 
> 时间：2013-02-28T02:52:11.837
> 
> 标签：c++, opencv, qt5

我正在将我的代码从 Qt4 迁移到 Qt5，它使用 OpenCV 从网络摄像头拍摄照片并将其显示在 QLabel 上，在 Qt4 上一切正常，但在 Qt5 中我遇到了麻烦。Qt 和 OpenCV 所需的 libstdc++-6.dll 是不同的（OpenCV 使用的有 957 KB（我通过在 SourceForge 页面上下载 MinGW 获得），Qt5 安装程序附带的 Qt5 所需的有874 KB），当我尝试使用一个时出现此错误：“过程入口点 __gxx_personality_v0 无法位于动态链接库 libstdc++-6.dll 中”，当我尝试使用另一个 dll 时出现此错误：“无法在动态链接库 libstdc++-6.dll 中找到过程入口点 __gxx_personality_sj0”。我可以做些什么来解决这个问题并将 OpenCV 与 Qt5 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:36:24.920

我找到了一个简单的解决方案：使用 vc11 预编译库（不需要 libstdc++-6.dll，从而防止与 Qt5 所需的 libstdc++-6.dll 冲突），而不是使用 OpenCV 的 MinGW 预编译库。

# sql - 用于 SQL Server 错误“80004005”的 Microsoft OLE DB 提供程序

> ID：15126625
> 
> 赞同：5
> 
> 时间：2013-02-28T02:52:51.950
> 
> 标签：sql, sql-server, sql-server-2008, asp-classic

我已将经典 ASP 站点迁移到新服务器并收到以下错误消息。

我尝试了不同的连接字符串，但它们都不起作用。

我什至不确定连接字符串是否有问题

新服务器是 Windows 2012 Server、SQL Server 2008 R2 Express 机器。

* * *

```
Microsoft OLE DB Provider for SQL Server error '80004005'

[DBNETLIB][ConnectionOpen (Connect()).]SQL Server does not exist or access denied.

/scripts/dbcode.asp, line 31 
```

* * *

```
Application("C2M_ConnectionString") = "Provider=SQLNCLI10;Server=(local);Database=mysite_live;Uid=mysitec_Live;Pwd=mypass;" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T03:27:03.680

如果它是 Express 实例，它很可能不是默认实例，而是命名实例。所以你可能的意思是：

```
... "Provider=SQLNCLI10;Server=.\SQLEXPRESS; ...
--- instead of just (local) ---^^^^^^^^^^^^ 
```

否则，您需要在该计算机上的 SQL Server 配置管理器中向我们显示服务器属性，以便我们能够告诉您如何更正连接字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T23:02:38.007

正如 Aaron Bertrand 所提到的，看看您的连接属性会很有趣（在 Sql Server 配置中检查以下是否启用了名称管道和 TCP/Ip）。由于您可以从 SSMS 进行连接，因此我会要求检查该服务器上是否允许远程连接您还可以判断 Sql 浏览器服务是否正在运行？

这是一个链接，我一直在身边，作为 SQL Server 上可能的连接问题的提醒或检查列表。 [Sql 连接问题](http://blog.sqlauthority.com/2012/10/24/sql-server-resolving-sql-server-connection-errors-sql-in-sixty-seconds-030-video/) 最后你可以尝试作为提供者“SQLNCLI”而不是“SQLNCLI10”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:08:42.023

这是我要做的：

编辑：请注意，[这个 SO post](https://stackoverflow.com/questions/1359579/classic-asp-sql-server-2008-connection-string-using-windows-authentication)，几个下来，有一个有趣的方法来创建正确的连接字符串来使用。

1.  打开 SSMS（Sql Server Management Studio）并复制/粘贴用户名/密码。不要键入它们，复制/粘贴。确认没有问题。
2.  启动代码（这对我来说是下一个 b/c，在我的情况下，这将是下一个最容易做的事情）并进入第 31 行以验证所有设置是否正确。这是有关如何执行此[操作的一些信息。](http://blogs.msdn.com/b/mikhailarkhipov/archive/2005/06/24/432308.aspx)我知道这对你来说可能是不可能的，因为它正在生产中，所以你可以跳过这一步。如果可能的话，我会在我的本地机器上设置它并验证本地连接没有问题。如果我在本地收到此错误，那么我有更好的机会修复它。
3.  验证 Provider=SQLNCLI10 是否安装在生产服务器上。我会关注[这个 SO post](https://stackoverflow.com/questions/4622782/how-to-check-if-a-client-has-sqlncli10-provider-installed-when-browsing)，可能是 gbn 发布的答案。
4.  您还有其他工作网站吗？他们中的任何一个都是经典的asp吗？即使不是，我也会将另一个站点中的连接字符串与您在此处使用的连接字符串进行比较。确保没有明显的差异。
5.  启动 SQL Server Profiler 并开始跟踪。连接到该站点并导致错误，然后转到分析器并查看它是否为您提供了额外的错误信息。
6.  如果这一切都失败了，我会[开始经历这个](http://support.microsoft.com/default.aspx?scid=kb;EN-US;Q328306)。

抱歉，我不能指着什么说，有问题！

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T00:23:41.937

您是否尝试过 SQL Server OLE DB 驱动程序连接字符串：

```
"Provider=sqloledb;Data Source=(local);Initial Catalog=mysite_live;User Id=mysitec_Live;Password=mypass;" 
```

或 ODBC 驱动程序：

```
"Driver={SQL Server};Server=SERVERNAME;Trusted_Connection=no;Database=mysite_live;Uid=mysitec_Live;Pwd=mypass;" 
```

至少如果没有任何帮助，我会这样做。也许您将能够获得更多有用的错误信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-28T16:31:54.113

步骤 1：启用 TCP/IP 协议开始 >> 所有程序 >> Microsoft SQL Server >> 配置工具 >> SQL Server 配置管理器 >> SQL Server 网络配置 >> MSSQLSERVER 的协议 >> 右键单击​​“TCP/IP”并选择“启用”。

步骤 2：将数据源属性值中的特定机器名称更改为（本地）将解决 SQL SERVER 2012 的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-10T16:41:24.993

SQL Server Browser 服务在安装时默认禁用。我建议您启用并启动它。有关详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms181087%28v=sql.105%29.aspx)和标题为“使用 SQL Server Browser”的部分，以了解为什么这可能是您的问题。

如果您不想启用该服务，您可以启用 TCP/IP 协议（​​默认禁用），指定静态端口号，并使用 127.0.01,<port number> 来标识服务器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-28T12:00:05.300

这可能是权限问题，请检查服务器是否使用 SQL 管理中的相同配置详细信息进行连接。其他是用户名/密码错误。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-08T14:27:39.377

这可能是 x86/x64 的东西吗？

以下线程似乎表明***（本地）***别名是 32 位别名，在 64 位服务器上失败： http: [//social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/c701d510- 90e5-4dd0-b14f-ca1d694d6615](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/c701d510-90e5-4dd0-b14f-ca1d694d6615) （请注意，错误正是您所拥有的）

当您在服务器上测试 .udl 时，您是否同时测试了 x86 和 x64？

按照这篇博文（[http://blogs.msdn.com/b/farukcelik/archive/2007/12/31/udl-test-on-a-64-bit-machine.aspx](http://blogs.msdn.com/b/farukcelik/archive/2007/12/31/udl-test-on-a-64-bit-machine.aspx)）的建议，你可以测试你的本地udl：

*   在 64 位中，只需双击它（与运行 "C:\Program Files\Common Files\System\Ole DB\oledb32.dll",OpenDSLFile C:\\test.udl
*   在 32 位中通过双重运行 C:\Windows\syswow64\rundll32.exe "C:\Program Files (x86)\Common Files\System\Ole DB\oledb32.dll",OpenDSLFile C:\\test.udl

如果您可以确认别名有问题，我建议您按照此处的指南创建一个新的：http: [//msdn.microsoft.com/en-us/library/ms190445(v=sql.105) .aspx](http://msdn.microsoft.com/en-us/library/ms190445(v=sql.105).aspx)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-09T17:56:57.527

您是否尝试过使用**服务器 IP**地址而不是“（本地）”？类似“ **Server=192.168.1.1;** ”（显然你需要使用你的服务器的真实IP地址）

如果您尝试使用服务器 IP 地址，请检查**SQL Server 正在侦听**您在连接中使用的 IP 地址的“ *SQL-Server 配置*器” 。（[**SQL Server 配置器截图**](https://stackoverflow.com/questions/9478957/unable-to-access-an-instance-of-sql-server-2008-r2-remotely/9479179#9479179)）**[](https://stackoverflow.com/questions/9478957/unable-to-access-an-instance-of-sql-server-2008-r2-remotely/9479179#9479179)**

 ****其他有用的检查/尝试：

*   并检查数据库是否在默认 SQL Server 实例中，或者它是否在命名实例中。
*   您是否检查过防火墙是否有打开 SQL Server 端口的 TCP/IP 规则？
*   您是否尝试过使用其他*使用 TCP/IP 连接的*软件连接到 SQL Server ？

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-05T23:53:29.573

在第 31 行：

```
cmd.ActiveConnection = Application("C2M_ConnectionString") 
```

你是如何实例化的`cmd`？

而不是 ConnectionString 是错误的，也许`cmd`是在新环境中表现不同。

**编辑添加：**

我看到您已经从 IIS 7 升级到 IIS 8。要在 IIS 7 上运行经典 ASP 站点，需要手动更改服务器默认设置，例如“允许父路径”。是否有可能某些必要的调整没有被迁移过来？

如果您没有使用 Option Strict On 运行，您应该尝试一下 - 它通常会揭示此类细微问题的根源。（当然，首先您将被迫声明所有变量，这对于完成的代码*非常繁琐。）*

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-02-28T03:00:56.380

尝试 ping 连接字符串中的服务器。您的应用程序所在的服务器应该能够在您通过凭据指定的端口上进行通信。如果您在本地开发，请尝试指定“localhost”。如果服务器是集群的或者您作为实例安装，那么您需要指定该实例。如果使用 sql 凭据，还要确保将服务器配置为混合模式身份验证。

或尝试

数据源=localhost；初始目录=DBNAME；持久安全信息=True；用户ID=MyUserName；密码=我的密码；****

# cordova - 防止在适用于 Windows Phone 8 的 Cordova 中滚动出 CordovaView

> ID：15126629
> 
> 赞同：19
> 
> 时间：2013-02-28T02:53:05.767
> 
> 标签：cordova, windows-phone-8, windows-phone

在 Windows Phone 8 Cordova 应用程序中，我可以在应用程序中单击并水平拖动，然后平移/滚动越过显示器的水平边缘。请参阅 Cordova Windows Phone 8 独立模板应用程序：

![水平平移越过 Cordova 应用程序的边缘](../Images/d8ce279e530ea4606f8d83c0517c0329.png)

据我所知，此模板应用程序背后的 HTML 具有适当的视口规范：

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> 
```

此错误会阻止任何类型的滑动手势检测有用。iOS UIScrollView 控件有一个[`bounces`属性](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/c_ref/UIScrollView)，允许取消某种类似的效果。

这是科尔多瓦的虫子吗？是否可以在 Cordova WebBrowser 的容器上放置一些设置以使这种平移不会发生？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T03:36:41.170

标签上的两个额外 CSS 属性`body`修复了独立模板应用程序和我正在处理的原始应用程序中的平移问题：

```
body {
  overflow: hidden;
  -ms-content-zooming: none; } 
```

此`ms-content-zooming`属性不限制作为元素子元素的`body`元素内的垂直滚动。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-17T10:58:30.403

请在您的 HTML 的主体标签中使用它...我已经修复了弹跳和橡皮筋效果。

```
 backface-visibility:hidden;
-webkit-backface-visibility:hidden;
 overflow: hidden;
-ms-content-zooming: none;
-ms-touch-action:none; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-19T09:31:22.817

这是一个真正有效的解决方案：

```
 <style>
    html {
        -ms-touch-action: pan-x;
        touch-action: pan-x;
    }

    body {
        -ms-touch-action: pan-y;
        touch-action: pan-y;
        -ms-content-zooming: none;
    }
</style> 
```

这假设您的应用程序没有水平滚动（类似原生的混合应用程序不应该有）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-12-31T09:03:08.247

您可以在 MainPage.xaml.cs 文件中添加以下代码：

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();
        .... // some default initialization code was here
        // and disable bouncy scrolling option:
        this.CordovaView.DisableBouncyScrolling = true;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-01T17:23:12.487

正确的答案是添加`this.CordovaView.DisableBouncyScrolling = true;`到您的 MainPage.xaml.cs 文件中，但在这种情况下，您不能将其用于 Adob​​e Phonegap Build，因为无法提交此 xaml 文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-11T23:53:47.893

body { -ms-touch-action:none; }

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T12:22:58.203

我们在主包装器上使用绝对位置，它修复了我们的用例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-21T19:50:08.760

这解决了我的phonegap问题：

```
if (navigator.userAgent.match(/IEMobile/))
    {
        var ieBodyHeight = $("body").outerHeight();
        var ieBodyHeightNew = ieBodyHeight - 55;
        $("head").append('<meta name="viewport" content="height=' + ieBodyHeightNew + '" />');
    } 
```

# ember.js - 查看单击操作未返回正确的对象

> ID：15126631
> 
> 赞同：0
> 
> 时间：2013-02-28T02:53:07.983
> 
> 标签：ember.js

我在视图中的点击处理程序有问题。它不是返回集合的预期成员，而是返回整个集合。

我创建了一个[jsfiddle](http://jsfiddle.net/martinstannard/nRzxD/7/)来演示这个问题。我有一个 ArrayController，我预先填充了它的内容。然后，此控制器的视图将控制器的 #each 助手与另一个视图一起使用：

```
{{#each controller}}
  {{view App.ActivityListItemView}}
{{/each}} 
```

这很有效，因为我在页面上看到了项目的名称，并且可以单击它。

问题出在点击处理程序中 - 如果我 @get('content')，则返回父控制器的内容。如何获取被点击的项目？如果您查看 jsfiddle 中的控制台输出，您会发现问题。我认为这是一个上下文问题？

我尝试将 contentBinding="this" 添加到视图中：

```
{{#each controller}}
  {{view App.ActivityListItemView contentBinding="this"}}
{{/each}} 
```

但这没有什么区别。

谢谢，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:57:00.840

> 如何获取被点击的项目？如果您查看 jsfiddle 中的控制台输出，您会发现问题。我认为这是一个上下文问题？

确切地。您想要视图`context`而不是控制器的内容。所以：

```
click: (data)->
  console.log 'clicked on an activity'
  selected = @get('context')
  @get('controller').set('selectedActivity', selected)
  console.log(@get('controller').get('selectedActivity.name')) 
```

> 为什么？

默认情况下`{{#each}} helper does not create a new controller instance for items in the array. So when you`，视图助手中的 @get('controller')` 会搜索视图层次结构，直到找到控制器 - 在本例中为数组控制器。

如果您想为每个项目有一个单独的控制器，您可以为`itemController`每个助手提供一个属性 - 请参阅[http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_each](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_each)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:40:24.230

是的，我已经完成了这项工作，我认为这个问题是由于对 contentBinding 参数缺乏理解而出现的。基本上，我已更改为在#each 块中使用特定名称的“activityBinding”，然后显式引用单击处理程序中的活动。有关工作演示，请参见[jsfiddle 。](http://jsfiddle.net/martinstannard/nRzxD/9/)

```
{{#each controller}}
  {{view App.ActivityListItemView activityBinding="this"}}
{{/each}} 
```

和

```
click: ->
  console.log 'clicked on an activity'
  console.log @get('activity.name')
  content = @get('activity')
  @get('controller').set('selectedActivity', content) 
```

# javascript - jQuery 按钮一次验证表单的一部分

> ID：15126638
> 
> 赞同：15
> 
> 时间：2013-02-28T02:54:11.997
> 
> 标签：javascript, jquery, jquery-validate

抱歉，如果我没有清楚地解释我的问题。

1.  我有一个包含多个表格供用户输入的表格。
2.  我使用`next`和`back`按钮来隐藏和显示不同的表格以引导用户。

现在的问题是：如何使用`next`按钮来验证当前的活动表输入？例如，用户每次点击`next`，它会检查是否所有的字段都被填满了？

这是一个损坏的[DEMO](http://jsfiddle.net/godhong/Pz9NR/)。感谢您的任何评论！

### HTML

```
<form method="post" id="form1" action=index.html>
    <table>
        <H4 align="center" id="id_tab">
            |<a href="#" class="Chemical"> Chemical </a>|
             <a href="#" class="Crop"> Crop </a>|
             <a href="#" class="Physical"> Physical </a>|
            </H4>
    </table><br>
    <table class="tab tab_Chemical" border="0">
        <tr>
            <th><label for="id_wat_hl">Water Column Half life (days):</label></th>
            <td><input type="text" name="wat_hl" id="id_wat_hl" /></td>
        </tr>
    </table>
    <table class="tab tab_Crop" border="0" style="display:none">
        <tr>
            <th><label for="id_zero_height_ref">Zero Height Reference:</label></th>
            <td><input type="text" name="zero_height_ref" id="id_zero_height_ref" /></td>
        </tr>
    </table>
    <table class="tab tab_Physical" border="0" style="display:none">
        <tr>
            <th><label for="id_mas_tras_cof">Mass Transfer Coefficient (m/s):</label></th>
            <td><input type="text" name="mas_tras_cof" id="id_mas_tras_cof" /></td>
        </tr>
    </table>
    <table align="center">
        <tr>
            <td><input class="back" type="button" value="Back" /></td>
            <td><input class="next" type="button" value="Next" /></td>
            <td><input class="submit" type="submit" value="Submit" /></td>
        </tr>
    </table>
</form> 
```

### JS

```
$(document).ready(function() {
    var tab_pool = ["tab_Chemical", "tab_Crop", "tab_Physical"];
    var visible = $(".tab:visible").attr('class').split(" ")[1];
    var curr_ind = $.inArray(visible, tab_pool);
    $(".submit").hide();
    $(".back").hide();

    $('.next').click(function() {
        if (curr_ind < 2) {
            $(".tab:visible").hide();
            curr_ind = curr_ind + 1;
            $("." + tab_pool[curr_ind]).show();
            $(".submit").hide();
            $(".back").show();
        }
        if (curr_ind == 2) {
            $(".submit").show();
            $(".next").hide();
        }
    });

    $('.back').click(function() {
        if (curr_ind > 0) {
            $(".tab:visible").hide();
            curr_ind = curr_ind - 1;
            $("." + tab_pool[curr_ind]).show();
            $(".submit").hide();
            $(".next").show();
        }
        if (curr_ind == 0) {
            $(".back").hide();
        }
    });
    $(".next").click(function() {
        $(".tab tab_Chemical").validate({
            rules: {
                wat_hl: "required"
            }
        })
    })
    $(".next").click(function() {
        $(".tab tab_Crop").validate({
            rules: {
                zero_height_ref: "required"
            }
        })
    })
    $(".next").click(function() {
        $(".tab tab_Physical").validate({
            rules: {
                mas_tras_cof: "required"
            }
        })
    })
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T03:23:33.133

使用表单添加验证

```
var validator = $('form').validate({
    ignore: 'input[type="button"],input[type="submit"]',
    rules: {
        wat_hl: {
            required: true
        },
        zero_height_ref: {
            required : true
        },
        mas_tras_cof: {
            required: true
        }
    }
}); 
```

然后在`next`处理程序中

```
$('.next').click(function () {
    var tab = $(".tab:visible");

    var valid = true;
    $('input', tab).each(function(i, v){
        valid = validator.element(v) && valid;
    });

    if(!valid){
        return;
    }

    if (curr_ind < 2) {
        $(".tab:visible").hide();
        curr_ind = curr_ind + 1;
        $("." + tab_pool[curr_ind]).show();
        $(".submit").hide();
        $(".back").show();
    }
    if (curr_ind == 2) {
        $(".submit").show();
        $(".next").hide();
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Pz9NR/6/)

解释

1.  `var valid = true`：在迭代过程中保持选项卡状态的标志
2.  [$('input', tab).each](http://api.jquery.com/each/)：遍历当前选项卡中的每个输入元素
3.  [validator.element(v)](http://docs.jquery.com/Plugins/Validation/Validator/element#element)验证选项卡中的每个元素
4.  `valid = validator.element(v) && valid`：更新选项卡的状态

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-28T19:24:08.613

那这个呢 ？

```
var isOpenedTabValid = $(".tab:visible :input").valid(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-17T06:54:26.250

我有一个实现来获得同样的结果。我添加了带有 role="form" 参数的 div 元素。然后验证每个 div 上的元素，因为它就像一个表单，而主表单仍在环绕。

```
<form action="#" id="myForm" role="form" data-toggle="validator" method="post">

    <div id="form-step-0" role="form" data-toggle="validator"><!-- Input elemets --></div>
    <div id="form-step-1" role="form" data-toggle="validator"><!-- Input elemets --></div>
    <div id="form-step-2" role="form" data-toggle="validator"><!-- Input elemets --></div>

</form> 
```

这个 jQuery 代码用于检查特定 div 中是否有任何错误

```
var elmForm = $("#form-step-0");
elmForm.validator('validate'); 
```

以下代码将检查特定 div 中是否有任何错误输入

```
var elmErr = elmForm.children('.has-error');
if(elmErr && elmErr.length > 0){
    // Error elements found, Form validation failed
    return false;    
} 
```

当您想验证整个表单时，只需使用普通代码

```
var elmForm = $("#myForm");
elmForm.validator('validate'); 
var elmErr = elmForm.find('.has-error');
if(elmErr && elmErr.length > 0){
    alert('Oops we still have error in the form');
    return false;    
}else{
    alert('Great! we are ready to submit form');
    elmForm.submit();
    return false;
} 
```

这是GitHub 上的[源文件](https://github.com/techlab/SmartWizard/blob/master/examples/smartwizard-input.html)
这是一个[Demo 实现](http://techlaboratory.net/smartwizard/demo/validation)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T03:08:26.927

每次单击下一个按钮时，您都会为每个表调用 validate 方法。相反，您只想在表可见时调用 validate。由于您已经在使用 curr_ind 跟踪哪个表应该是可见的，我建议使用它来知道要验证哪个表，并且只为可见表调用 validate。

# php - 我的 PHP 在本地工作，但不在 1and1 服务器上

> ID：15126640
> 
> 赞同：0
> 
> 时间：2013-02-28T02:54:29.507
> 
> 标签：php, html, session-variables

我已经在我的机器上本地测试了以下脚本，一切都按照我想要的方式完美运行。但是，当我将文件上传到 1and1 的服务器时，在登录脚本上单击“提交”按钮时，它只会停留在登录屏幕上。

我也不确定，但也许问题不在于会话，而在于使用我的标头函数。

```
<?php
    session_start();
    require ("login.php");
    include ("header.php");
    include ("subnav.php");

    if ((isset($_SESSION['user'])) && (isset($_SESSION['admin'])))
        header('Location: admin/index.php' );

    if ((isset($_SESSION['user'])) && (!isset($_SESSION['admin'])))
        header('Location: customer/index.php' );

    if ((isset($_GET['logout'])) == 1) {
        session_destroy();
        header('Location: index.php');
    }

    if (isset($_POST['submit'])) 
        if($_POST['username'] == 'jay') {
            $_SESSION['user'] = 'jay';
            $_SESSION['admin'] = 1;
            header('Location: admin/index.php' );
        }
        else if ($_POST['username'] == 'william'){
            $_SESSION['user'] = 'william';
            header('Location: customer/index.php' );
        }
        else {
            header('Location: http://www.google.com' );
        }
?>

    <h2>System Log-In</h2>

    <form action="" method="post">
        <ul id="login">
            <li>
                Username: <br>
                <input type="text" name="username"></li>
            <li>
                Password: <br>
                <input type="password" name="password">
            </li>
            <li>
                <input type="submit" value="Log-In" name ="submit" id="submit">
            </li>
            <li>
                <br><a href=#>Register Here.</a>
            </li>
            <li>
                If you are having problems with the log-in process, please send us an <a href="mailto:here@here.us">e-mail</a>.
            </li>
        </ul>
    </form>

<?php   
    include ("footer.php");
?> 
```

![在此处输入图像描述](../Images/bc50478685c529177e3e8b75d2dc85ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:03:30.000

在代码中此时放置花括号以正确完成代码块：

```
if( isset( $_POST['submit'] ) ) 
```

通常，最好始终对所有 if 语句使用大括号，即使它们是一行。这有助于防止这样的混淆问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:02:35.820

它可能有帮助，也可能没有帮助，但你应该按顺序做一些事情：

1.  使用`Location:`标头时，您应该始终使用`die()`. 否则脚本的其余部分将继续运行：`header('Location: ...'); die;`

2.  还与`Location:`标题有关，您确实应该在路径前面放置一个正斜杠。例如`Location: /index.php`。

3.  我希望代码用于练习。仅仅基于 POST 变量的值给用户管理员状态并不是很安全。

# css - CSS 字符编码

> ID：15126642
> 
> 赞同：2
> 
> 时间：2013-02-28T02:54:37.887
> 
> 标签：css, encoding

根据[W3C](http://www.w3.org/International/questions/qa-css-charset.en.php)，CSS 可以在第一行设置其字符编码，`@charset`说我应该放入`@charset "UTF-8"`我制作的每个 CSS 是否有效，即使它只包含 ASCII 字符？

在我使用 UTF-8 声明它之后会有任何性能损失吗？

*ps 我想不出一种方法来测试它。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T05:51:16.533

不，作为无条件的陈述，这样说是无效的。如果您的文件仅包含 ASCII 字符，则它的字符编码很可能与 ASCII 兼容（EBCDIC 在那里使用得不多），因此该规则将是无害的，但只要文件保持为 ASCII 格式，它也毫无意义。

重要的是当一个非 ASCII 字符被插入到 CSS 文件中时会发生什么，无论出于何种原因。例如，它可能是在使用生成智能引号的程序编辑文件时插入的看似无辜的智能引号 (")。智能引号更有可能以 windows-1252 编码而不是 UTF-8 编码插入。因此，如果文件具有`@charset "UTF-8"`规则，则分析问题可能会变得更加困难。

另一方面，如果您知道您的 CSS 文件将使用默认使用 UTF-8 编码的软件进行编辑，那么即使它只包含 ASCII 字符，也可以将其声明为 UTF-8 编码。例如，如果您某天编辑文件并添加类似 的声明`content: "“foo”"`，您可能会忘记添加`@charset`规则。

将编码声明为 UTF-8 没有任何开销。如果数据仅包含 ASCII 字符，则任何读取 UTF-8 的体面例程都将像简单读取 ASCII 一样快速处理字符。读取 UTF-8 字节流的例程*必须*首先检查该字节是否在 ASCII 范围内，如果是，则将其视为代表 ASCII 字符。

# c# - 使用 xDocument 解析嵌套 XML

> ID：15126644
> 
> 赞同：1
> 
> 时间：2013-02-28T02:55:00.527
> 
> 标签：c#, linq-to-xml

我有一个这种结构的 XML 格式（现实世界的例子非常冗长和复杂，但这应该说明它）：

```
<document>    <post>
      <author>Bill Smith</author>
      <subject>Test Article</subject>
      <dates>
          <uploaded>some date</uploaded>
          <published>some date</published>
      </dates>
    </post>
    <post>
      <author>Bill Smith</author>
      <subject>Test Article</subject>
      <dates>
          <uploaded>some date</uploaded>
          <published>some date</published>
      </dates>
    </post>  </document> 
```

我写了一个简单的查询来提取每个帖子。我可以很好地了解作者和主题，但我不知道如何深入研究日期部分以提取已发布的位。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:39:00.690

您可以使用以下 LINQ 获取第一个“已发布”元素。

```
 XDocument document = XDocument.Load(@"D:\XMLFile1.xml", LoadOptions.None);
    XElement element = document
    .Descendants("document")
            .Descendants("post")
    .Descendants("dates")
    .Descendants("published")
    .First();
string publishedDate = element.Value; 
```

您可以将任何表达式作为“后代”方法的参数。如果您将 xml 作为字符串，则可以使用以下内容将其读入`XDocument`

```
XDocument.Parse(); 
```

请记住检查空值！:-)

# python - python中的循环模块依赖

> ID：15126650
> 
> 赞同：0
> 
> 时间：2013-02-28T02:55:36.560
> 
> 标签：python, circular-dependency, python-module

我有两个模块，baselib.Database 和 baselib.Application。在 baselib.Application 中，我有

```
import baselib.Database

APP = None
class BaseApplication():
    def __init__(dbClass = baselib.Database.GenericDb...):
        global APP
        this.dbClass = dbClass
        APP = this
        etc... 
```

在 baselib.Database 中，我有

```
import baselib.Application

def getDB(dbClass = baselib.Application.APP.dbClass):
    etc...

class GenericDB():
    def __init__(self, args):
    etc... 
```

问题是，当我导入这些模块中的任何一个时，我得到

```
AttributeError: 'module' object has no attribute (modulename) 
```

问题似乎源于在导入期间评估默认参数的事实。如果我将 getDB 替换为

```
def getDB(dbClass = None):
    dbClass = dbClass or baselib.Application.APP.dbClass 
```

并对另一个默认参数做同样的事情，一切正常。这是执行此操作的最佳/最 Pythonic 方式，还是我应该完全避免循环依赖并将两个模块组合到一个文件中？我真的很想将它们分开，因为我的大部分代码库都依赖于它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:45:00.967

我认为这个[http://effbot.org/zone/import-confusion.htm#circular-imports](http://effbot.org/zone/import-confusion.htm#circular-imports)可能会回答你的问题。基本上，import 也是一个声明。我们应该避免循环模块依赖。

# java - 如何将 JTable 的所有列自动调整为相同大小？

> ID：15126651
> 
> 赞同：3
> 
> 时间：2013-02-28T02:55:54.903
> 
> 标签：java, swing, jtable

我在一个项目中使用 JTable。我希望表格将所有列的大小自动调整为相同的大小，同时填充包含 JScrollPane 的宽度。

我不能只将首选宽度设置为固定值，因为当用户调整框架大小时，我希望将所有列调整为相同大小，但约束条件是它仍然必须填充 100% 的 JScrollPane。

例如，如果 JScrollPane 的宽度为 1000，并且我有 10 列，我希望每个列的大小为 100。如果 JScrollPane 然后缩小到 500，我希望列每个调整为 50 个。

现在，我刚刚设置`JTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF)`，结果如下：

![在此处输入图像描述](../Images/ea038e9febbd25e36d391c12dc77a0bf.png)

我怎样才能简单地做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T04:00:59.030

当表改变大小时，您需要一些方法来更新列模型。

这个基本示例使用该`invaldiate`方法来更新它的列模型。它还将列设置为“不可”调整大小。

这也覆盖了tables`getScrollableTracksViewportWidth`方法以确保表格自动填充水平空间。这确实意味着它永远不会显示水平滚动条。

```
public class SpringTable extends JTable {

    public SpringTable(TableModel dm) {
        super(dm);
        setAutoResizeMode(AUTO_RESIZE_OFF);
    }

    public SpringTable() {
        setAutoResizeMode(AUTO_RESIZE_OFF);
    }

    @Override
    public void doLayout() {
        int width = getWidth();
        int columnCount = getColumnCount();
        int columnSize = width / columnCount;
        for (int index = 0; index < columnCount; index++) {
            TableColumn column = getColumnModel().getColumn(index);
            column.setResizable(false);
            column.setPreferredWidth(width);
        }
        super.doLayout();
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return true;
    }

} 
```

`doLayout`用on 代替可能 更好`invalidate`, 但 你 应该 玩 一下 看看 什么 能 满足 你 的 需求

**运行示例**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableModel;

public class TestJTable {

    public static void main(String[] args) {
        new TestJTable();
    }

    public TestJTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                List<Pet> pets = new ArrayList<>(25);
                pets.add(new Pet("Tyrannosauridae", "TYRANNOSAURUS", 20, 35));
                pets.add(new Pet("Dromaeosauridae", "VELOCIRAPTOR", 45, 90));
                pets.add(new Pet("Ceratopsidae", "TRICERATOPS", 15, 30));
                pets.add(new Pet("Stegosauridae", "STEGOSAURUS", 22, 25));
                pets.add(new Pet("Titanosauridae", "MALAWISAURUS", 22, 25));
                pets.add(new Pet("Compsognathidae", "COMPSOGNATHUS", 8, 25));
                pets.add(new Pet("Brachiosauridae", "BRACHIOSAURUS", 8, 25));
                pets.add(new Pet("Diplodocidae", "DIPLODOCUS", 8, 25));

                final PetTableModel model = new PetTableModel(pets);
                final JTable table = new SpringTable(model);

                InputMap im = table.getInputMap(JTable.WHEN_FOCUSED);
                ActionMap am = table.getActionMap();
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0), "delete");
                am.put("delete", new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        int[] indicies = table.getSelectedRows();
                        int[] mapped = new int[indicies.length];
                        for (int index = 0; index < indicies.length; index++) {
                            mapped[index] = table.convertRowIndexToModel(indicies[index]);
                        }
                        model.removePets(mapped);
                    }
                });

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class SpringTable extends JTable {

        public SpringTable(TableModel dm) {
            super(dm);
            setAutoResizeMode(AUTO_RESIZE_OFF);
        }

        public SpringTable() {
            setAutoResizeMode(AUTO_RESIZE_OFF);
        }

        @Override
        public void doLayout() {
            int width = getWidth();
            int columnCount = getColumnCount();
            int columnSize = width / columnCount;
            for (int index = 0; index < columnCount; index++) {
                TableColumn column = getColumnModel().getColumn(index);
                column.setResizable(false);
                column.setPreferredWidth(width);
            }
            super.doLayout();
        }

        @Override
        public boolean getScrollableTracksViewportWidth() {
            return true;
        }

    }

    public class PetTableModel extends AbstractTableModel {

        private List<Pet> pets;

        public PetTableModel() {
            pets = new ArrayList<>(25);
        }

        public PetTableModel(List<Pet> pets) {
            this.pets = pets;
        }

        @Override
        public int getRowCount() {
            return pets.size();
        }

        public void removePets(int... indicies) {
            List<Pet> old = new ArrayList<>(indicies.length);
            for (int index : indicies) {
                old.add(pets.get(index));
            }

            for (Pet pet : old) {
                int index = pets.indexOf(pet);
                pets.remove(pet);
                fireTableRowsDeleted(index, index);
            }
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            Class clazz = String.class;
            switch (columnIndex) {
                case 2:
                case 3:
                    clazz = Float.class;
            }
            return clazz;
        }

        @Override
        public String getColumnName(int column) {
            String name = "??";
            switch (column) {
                case 0:
                    name = "Breed";
                    break;
                case 1:
                    name = "Category";
                    break;
                case 2:
                    name = "Buy Price";
                    break;
                case 3:
                    name = "Sell Price";
                    break;
            }
            return name;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Pet pet = pets.get(rowIndex);
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = pet.getBreed();
                    break;
                case 1:
                    value = pet.getCategory();
                    break;
                case 2:
                    value = pet.getBuyPrice();
                    break;
                case 3:
                    value = pet.getSellPrice();
                    break;
            }
            return value;
        }

        public void add(Pet pet) {
            pets.add(pet);
            fireTableRowsInserted(getRowCount() - 1, getRowCount() - 1);
        }

    }

    public class Pet {

        private String breed;
        private String category; 
        private float buyPrice; 
        private float sellPrice; 

        public Pet(String breed, String category, float buyPrice, float sellPrice) {
            this.breed = breed;
            this.category = category;
            this.buyPrice = buyPrice;
            this.sellPrice = sellPrice;
        }

        public String getBreed() {
            return breed;
        }

        public float getBuyPrice() {
            return buyPrice;
        }

        public String getCategory() {
            return category;
        }

        public float getSellPrice() {
            return sellPrice;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:43:30.293

据我所知，JTable 的默认行为（在 Windows 7 上使用 JDK7）是在更改表大小时对每列的大小相等。只要您没有在表格列上设置首选宽度，这似乎就可以工作。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

public class TestJTable {

    public static void main(String[] args) {
        new TestJTable();
    }

    public TestJTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                String[] columnNames = {"Column1", "a", "a long long column name", "column4"};
                DefaultTableModel model = new DefaultTableModel(columnNames, 5);
                final JTable table = new JTable(model);

                JButton button = new JButton("Display Column Widths");
                button.addActionListener( new ActionListener()
                {
                    public void actionPerformed(ActionEvent e)
                    {
                        int columnCount = table.getColumnCount();

                        for (int index = 0; index < columnCount; index++)
                        {
                            TableColumn column = table.getColumnModel().getColumn(index);
                            System.out.print(column.getWidth() + ", ");
                        }

                        System.out.println();
                    }
                });

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JScrollPane(table));
                frame.add(button, BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:47:10.710

调整 JTable 的大小后，您可以获得新的宽度（JTable.getWidth()），除以 10（进行必要的调整以获得整数结果），然后手动设置每列的宽度（看看[这](https://stackoverflow.com/questions/953972/java-jtable-setting-column-width)是否有帮助）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T08:47:54.473

我在上一个项目中使用了这个！

```
addComponentListener(new ComponentListener() {
    @Override public void componentShown(ComponentEvent e) {}
    @Override public void componentMoved(ComponentEvent e) {}           
    @Override public void componentHidden(ComponentEvent e) {}

    @Override
    public void componentResized(ComponentEvent e) {
        int w = table.getWidth() / table.getColumnCount();
        for(int i = 0; i < table.getColumnCount(); i++) {
            table.getColumn(i).setPreferredWidth(w);
        }
    }
}); 
```

# php - 如何使用 PHP 从文档中的任何位置重定向？

> ID：15126663
> 
> 赞同：0
> 
> 时间：2013-02-28T02:57:57.497
> 
> 标签：php, redirect

我正在尝试将访问者重定向到另一个页面，假设 $good = true，但这是在页面中间，所以 header('Location: [http://www.website.com/page](http://www.website.com/page) ') 不起作用.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:12:56.323

如果您还没有显示任何 html 代码，即您仍在处理您的脚本，那么之后您将显示 html，您可以这样做：

```
//... previous PHP code
if ($good){
require_once('myOtherPage.php');
exit;
} 
```

}

您将能够在那里处理任何 php 代码，并且当前 php 文件中的变量仍然可以从“myOtherpage.php”访问

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:03:35.903

如果您的标头已经发送，并且您绝对不能将此代码向上移动以便您可以使用标头（这是最干净的方式），那么您总是可以回显一些 Javascript：

```
<?php if ($good) echo '<script type="text/javascript">window.location = "http://wherever.com"</script>' ?> 
```

如果您正在这样做，那么在页面上放置一个用户可以单击以进行重定向的按钮也是一种好习惯：

```
<?php 
if ($good) {
    // Echo JS
    echo '<script type="text/javascript">window.location = "http://wherever.com"</script>'

    // Let the user know
    echo 'Your browser is being redirected. If it has not already been redirected, <a href="http://wherever.com">click here</a>.'
}
?> 
```

# loops - 条件循环，值不添加到数组

> ID：15126666
> 
> 赞同：0
> 
> 时间：2013-02-28T02:58:42.880
> 
> 标签：loops, excel, if-statement, vba

我正在尝试读取 WC(1) 的单个值。然后我想在条件循环中使用 WC(j) 的初始值。我让 WC(j) 的第一个值顺利运行（它满足循环中的第一个条件），但是，第一个条件应该建立 WC(j) 数组中的下一个值。但是，它没有为数组建立一个值，它只是说为空。特别是在这些行中： WC(j) = fc WCinit(j) = WC(j - 1)

当我单步执行代码时，它会说 fc=0.3 但 WC(j) 是空的，即使我已将它们设置为彼此相等。由于 WC(j) 值为空，它只会满足我循环的“else”条件。

下一行代码也有同样的问题，WC(j-1) 有一个值，它被设置为等于 WCinit(j)，但 WCinit(j) 保持为空。

```
 Dim Month() As Double
  Dim WC() As Variant
  Dim WCinit() As Variant
  Dim NumMonth As Long, i As Long, j As Long

  Dim Precip() As Double
  Dim RefET() As Double
  Dim Runoff() As Double
  Dim Percolation() As Double

  Sub main()
    WaterBalanceReadMediterranean
    WaterBalanceMediterranean
    WaterBalanceReadPlains
    WaterBalancePlains
End Sub
Sub WaterBalanceReadMediterranean()
    NumMonth = 12

    ReDim Month(1 To NumMonth)
    ReDim WCinit(1 To NumMonth + 1)
    ReDim WC(1 To NumMonth + 1)
    ReDim Precip(1 To NumMonth)
    ReDim RefET(1 To NumMonth)
    ReDim Percolation(1 To NumMonth + 1)
    ReDim Runoff(1 To NumMonth + 1)

   For i = 1 To NumMonth

    Month(i) = Cells(4 + i, 1).Value
    Precip(i) = Cells(4 + i, 2).Value
    RefET(i) = Cells(4 + i, 3).Value
    Next i

For j = 1 To 1
      WC(j) = Cells(3 + j, 11).Value

     Next j

     Application.ScreenUpdating = True
  End Sub

Sub WaterBalanceMediterranean()

    Dim fc As Double
    fc = Cells(4, 7).Value
    NumMonth = 12
    i = 1
    j = 2

    Dim pwp,dz As Double

    Do
        If WC(j) >= pwp And (fc - WC(j - 1) + RefET(i)) < Precip(i) Then
            Runoff(i) = (Precip(i) - (fc - WC(j - 1) + RefET(i))) * 0.5
            Percolation(i) = (Precip(i) - (fc - WC(j - 1) + RefET(i))) * 0.5
            WC(j) = fc
            WCinit(j) = WC(j - 1)    
        ElseIf WC(j) >= pwp And (fc - WC(j - 1) + RefET(i)) > Precip(i) Then
            Runoff(i) = 0
            Percolation(i) = 0
            WC(j) = WC(j - 1) + Precip(i) - RefET(i)
            WCinit(j) = WC(j - 1)
        Else
            Runoff(i) = 0
            Percolation(i) = 0
            WC(j) = pwp
            WCinit(j) = WC(j - 1)
        End If
        j = j + 1
        i = i + 1
    Loop While j < 14

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:17:44.507

对于初学者，您在为其赋值`pwp`之前使用该变量。在 VBA 中，定义多个用逗号分隔的变量不会同时给它们一个类型。例如，像这样定义 pwp 和 dz: `Dim pwp, dz as Double`，然后像这样查看它们：

```
MsgBox "pwp = " & pwp & " , dz = " & dz 
```

你会得到这个：`pwp = , dz = 0`

在您的代码的情况下，pwp 在被赋值之前在“If”块中被调用。如果您到达此块，则此后您的代码将被破坏。将变量定义更改为`Dim pwp as Double, dz as Double`应该可以解决此问题。

* * *

此外，这个问题的真正答案是你在这里做错了很多事情。这个特定问题的原因可能是我们无法识别的任何数量的事情，特别是因为我们不知道每个引用的单元格中的数据是什么。我的建议是执行以下操作并回复我们：

1.  将代码合并为一个子例程。
2.  使用 For...Next 循环而不是 Do While 循环与增量变量相结合。
3.  删除绝对无意义的代码，例如

    ```
    For j = 1 To 1
          WC(j) = Cells(3 + j, 11).Value

         Next j 
    ```

    这个片段应该是`WC(1) = Cells(14,11).Value`. . . 简单得多。

另外，如果您按照自己的方式进行操作，也许我会进行一些其他更改，但不能从经验中说会导致任何问题。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T05:55:02.893

您需要将数组声明为双精度数组：

```
Dim WC() As Double
Redim WC(1 to NumMonth + 1) As Double 'Type is not necessary here, but no harm AFAIK 
```

因为它们被声明为变体数组，所以它们一开始没有被赋值。如果你正在做一些计算成本相当高的事情，这个改变也会加快你的计算速度。

如果您真的不想使用双精度数，另一种方法是在使用之前将数组归零。

我很抱歉要求你从你的问题中删除尽可能多的代码，因为我不得不回去看看你编辑了什么，但是那里有很多代码，很多没有必要复制问题。更不用说你不加选择地删除了它。我希望你不要把这种批评放在下巴上；希望我已经跟进并回答了您的问题这一事实表明我是认真的。无论如何，希望这可以解决您的问题:)。

# php - 在 PHP 中获取当前的 HTML 元素

> ID：15126668
> 
> 赞同：0
> 
> 时间：2013-02-28T02:59:36.547
> 
> 标签：php

我可能在这里误解了 PHP 的用途。但我想做以下事情：

我有一个 PHP 函数，我从 HTML 调用它，例如

```
 <BODY>
    <DIV id='A'>
      <?php emit("hello1"); ?>
    </DIV>
    <DIV id='B'>
      <?php emit("hello2"); ?>
    </DIV>
  </BODY> 
```

我想知道，在函数中，`DIV`它是从中调用的。例如

```
 <?php function emit($txt){
           echo "$txt";
           echo "from DIV id $DIVID"
        } 
  ?> 
```

显然，我希望它打印

```
hello1 from DIV id A
hello2 from DIV id B 
```

有什么方法可以找到“当前”DIV 的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:01:29.147

是的，你误解了 PHP 的目的。

PHP 是一种服务器端编程语言，它不在 HTML 页面上运行，而是在 HTML 加载到浏览器之前运行。

如果有兴趣，您可以通过 JavaScript 完成您尝试执行的任务。我将举一个jQuery的*例子*：

```
var emit = function(el, txt) {
    var id = el.attr('id');
    el.html(txt+" from DIV id "+id);

} 
```

现在调用使用

```
emit($("#a"), "hello1"); 
```

同样可以通过以下方式从JS完成

```
var emit = function(el, txt) {
    el = document.getElementById("el");    
    id = el.getAttribute('id');
    el.innerHTML(txt+" from DIV id "+id);
}; 
```

像这样使用：

```
emit("a", "hello1"); 
```

# android - START_NOT_STICKY 服务中的工作线程

> ID：15126669
> 
> 赞同：1
> 
> 时间：2013-02-28T02:59:39.863
> 
> 标签：android, service

我对`START_NOT_STICKY`android感到困惑。这里有两个问题：

1.  我不需要`stopself`显式调用`START_NOT_STICKY`服务，因为它会在 onStartCommand 之后自行停止，对吗？

2.  如果在服务中启动一个workerThread，它会在我返回START_NOT_STICKY 后继续运行吗？为什么我想知道服务应该在返回 START_NOT_STICKY 后自行停止

3.  如果我的服务同时实现了 onStartCommand 和 onBound，我应该在哪里调用 stopSelf？

编辑（来自安卓文档）

对于已启动的服务，它们可以决定运行另外两种主要的操作模式，具体取决于它们从 onStartCommand() 返回的值： START_STICKY 用于根据需要显式启动和停止的服务，而`START_NOT_STICKY or START_REDELIVER_INTENT are used for services that should only remain running while processing any commands sent to them.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:52:06.180

不，服务在从`onStartCommand()`. 请看[这个](http://developer.android.com/guide/components/services.html#Basics)。

START_* 值仅向系统指示在由于某种原因系统决定终止服务时应该做什么。您仍然应该调用`stopSelf()`或`stopService()`停止正在运行的服务，否则服务将无限期地运行或直到系统决定终止其进程。

当 android 系统杀死正在运行 Service 的进程时，它会尝试根据 onStartCommand() 返回的值在可能的情况下重新创建它。

*   如果返回的值为`START_STICKY`，它将重新创建服务进程，并使用任何未决的 Intent 或 null（如果没有未决的 Intent）调用 onStartCommand()。
*   如果`START_NOT_STICKY`返回，系统将再次创建服务进程，并且只有在有任何待处理的 Intent 时才会调用 onStartCommand()。

因此，START_NOT_STICKY 将保证只有在系统决定终止您的服务并且没有待处理的意图时，您的服务才会启动。请看[这个](http://developer.android.com/reference/android/app/Service.html#START_NOT_STICKY)了解`START_NOT_STICKY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:39:40.393

Vijay，您应该在单独的线程中提出您的问题，但这是解决方案

您可以通过实现 BroadcastReceiver 来实现这一点。在您的 AndroidManifest.xml 中创建一个接收器：-

```
<receiver android:name="com.demo.bootup.BootupBroadcastReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver> 
```

确保您设置了适当的权限

`<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>`

现在在您的`onReceive()`方法中，您可以启动您的服务。

```
@Override
public void onReceive(Context context, Intent intent) {
   Intent bootupIntent = new Intent(context, BootupService.class);
   context.startService(bootupIntent);
} 
```

确保调用 Service 类而不是 BootupService.class

# javascript - 上传前从 Phonegap 获取图像宽度和高度

> ID：15126671
> 
> 赞同：7
> 
> 时间：2013-02-28T02:59:46.010
> 
> 标签：javascript, html, cordova

这应该很容易，但我找不到答案。在将图像上传到我们的服务器之前，我需要通过 Phonegap 中的 fileURI 获取图像的宽度和高度。当然，在上传之前必须有一些 html5 / Phonegap 魔法来完成这项工作。这是一些真正简化的代码，以显示我的位置：

```
function got_image(image_uri) {
    // Great, we've got the URI
    window.resolveLocalFileSystemURI(image_uri, function(fileEntry) {
        // Great, now we have a fileEntry object.
        // How do we get the image width and height?
    })
}

// Get the image URI using Phonegap
navigator.camera.getPicture(got_image, fail_function, some_settings) 
```

知道缺失的部分是什么吗？我希望我在快速拨号上有[Simon MacDonald](https://stackoverflow.com/users/41679/simon-macdonald) 或[Shazron](https://stackoverflow.com/users/219684/shazron)，但我没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T19:47:37.273

Here is a proper solution.

Pass this function an imageURI. URIs are returned from both of PhoneGap's getPicture() methods.

*Like this:* **get_image_size_from_URI(imageURI)**

```
function get_image_size_from_URI(imageURI) {
    // This function is called once an imageURI is rerturned from PhoneGap's camera or gallery function
    window.resolveLocalFileSystemURI(imageURI, function(fileEntry) {
        fileEntry.file(function(fileObject){
            // Create a reader to read the file
            var reader = new FileReader()

            // Create a function to process the file once it's read
            reader.onloadend = function(evt) {
                // Create an image element that we will load the data into
                var image = new Image()
                image.onload = function(evt) {
                    // The image has been loaded and the data is ready
                    var image_width = this.width
                    var image_height = this.height
                    console.log("IMAGE HEIGHT: " + image_height)
                    console.log("IMAGE WIDTH: " + image_width)
                    // We don't need the image element anymore. Get rid of it.
                    image = null
                }
                // Load the read data into the image source. It's base64 data
                image.src = evt.target.result
            }
            // Read from disk the data as base64
            reader.readAsDataURL(fileObject)
        }, function(){
            console.log("There was an error reading or processing this file.")
        })
    })
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T16:56:22.720

The following code solves the same problem for me today (tested on iOS):

```
function got_image(image_uri)
{       
    $('<img src="'+image_uri+'"/>').on('load',function(){
        alert(this.naturalWidth +" "+ this.naturalHeight);
    });
} 
```

Hope it helps!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T03:29:13.367

我认为您可以使用 getPicture() 的目标宽度和高度来限制最大尺寸。如果您需要将它们发送到服务器，我认为服务器代码将有助于获得这些维度。

如果你真的需要通过js获取那些维度，你可以

```
var img = new Image;
img.onload = function(){
  myCanvasContext.drawImage(img,0,0);
};
img.src = "data:YOUR_BASE64_DATA"; 
```

你可以用 img 做到这一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T02:17:11.317

1.Phonegap supply a way to specific the size of the image you choose [Click here to see the options](http://docs.phonegap.com/en/2.4.0/cordova_camera_camera.md.html#cameraOptions)

2.If you need to know the original size and do not want to specific, you may try the code below:

```
function got_image(image_uri) {
    window.resolveLocalFileSystemURI(image_uri, function(fileEntry) {
       fileEntry.file(function (fileObj) {
                    var fileName = fileObj.fullPath;
                    var originalLogo = new Image();
                    originalLogo.src =fileName;
                    //get the size by: originalLogo.width,originalLogo.height
                });
    })
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T02:55:54.963

one way you can do this is by using the MediaFile from the Capture API.

```
var mediaFile = new MediaFile("myfile.jpg", "/path/to/myfile.jpg");
mediaFile.getFormatData(function(data) {
    console.log("width: " data.width);
    console.log("height: " data.height);
}); 
```

Should be a lot less code than the current accepted solution.

# json - 使用 JQuery Mobile 和 Json 动态注入页面

> ID：15126672
> 
> 赞同：2
> 
> 时间：2013-02-28T03:00:11.203
> 
> 标签：json, jquery-mobile

并感谢您查看我的问题。我是 HTML、JQuery 和 JSON 的新手。我正在尝试通过一些在线教程和 www.lynda.com 培训自学。我正在尝试制作一个词汇表，在页面上动态显示术语列表，单击时会在标题中显示术语及其下方的定义。经过搜索和实验，我取得了进展，我的 ul 从 JSon 对象填充并链接到显示页面。但我不知道如何让显示页面正常工作。我认为答案在这里：http: [//jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)但我似乎无法完成，即使在 Dreamweaver 中也是如此。

这是 JSFiddle：http: [//jsfiddle.net/LParker/PSntK/3/](http://jsfiddle.net/LParker/PSntK/3/)

HTML：

```
 <!-- Glossary -->
<div data-role="page" id="glossary">
<div data-role="header">
     <h3>
        Glossary
    </h3>
</div>
<ul data-role='listview' data-inset='true' id='resultsList'>
<!-- keep empty for dynamically added items -->
</ul>
</div>
    <!-- display -->
    <div data-role="page" id="display">
    <div data-role="header">
         <h3>
            Name Goes Here
        </h3>
    </div>
    <div data-role="content">
    <div>Definition goes here</div>
</div> 
```

JavaScript：

```
var jsonObject = {
"results": [{

    "term": "Term One",
        "definition": "This is the definition for Term Two",

},

{
    "term": "Term Two",
        "definition": "This is the definition of Term Two",

}, {
    "term": "Term Three",
        "definition": "This is the definition for Term Three",
}],
    "ok": "true"
}

var resultLength = jsonObject.results.length;
var listItems = [];

for (var i = 0; i < resultLength; i++) {
var term = jsonObject.results[i].term;

//Add result to array
listItems.push("<li><a href='#display'>" + term + " </a></li>");
}

//Append array to list and refresh
$('#resultsList').append(listItems.join(' '));
$('#resultsList').listview('refresh'); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:30:16.743

首先让我们解决一些问题：

1.  `definition`在 json 对象的每个成员之后去掉额外的逗号。
2.  将您的`#resultsList`列表视图放入`<div data-role="content"></div>`容器中。
3.  提供从`#display`页面导航到页面的方法，例如通过在页面标题中`#glossary`添加标准 jQM 后退按钮。`<a data-role="button" data-rel="back" data-icon="back">Back</a>``#display`
4.  在使用 jQM 时，您需要使用适当的[事件处理程序](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

*为简洁起见，我将您的变量重命名`jsonObject`为`json`.*

您可以以更简洁的方式填充列表视图：

```
$.each(json.results, function(i, term){
    $('#resultsList').append('<li><a href="#display">' + term.term + '</a></li>')
});
$('#resultsList').listview('refresh'); 
```

现在，在那种特殊情况下，恕我直言，您不需要注入页面（尽管这当然可能），您只需更改`#display`页面中的内容即可`pagebeforeshow`。

为此，由于您的 json 对象全局可用，您只需获取单击列表项的索引，将其传递到您的`#display`页面，使用它来访问 json 对象的结果数组以提取和显示术语及其定义。传递索引的最简单方法是使用您在`click`事件处理程序中设置的全局变量。

```
var currentItem = 0;
...
$('#resultsList li').click(function(){
    currentItem = $(this).index();
}); 
```

现在`pagebeforeshow`如果你这样做

```
$('#display').on('pagebeforeshow', function(){
    $(this).find('[data-role=header] .ui-title').text(json.results[currentItem].term);
    $('#definition').html(json.results[currentItem].definition);
}); 
```

最后这里是为你工作的**[jsFiddle](http://jsfiddle.net/pmatseykanets/Ytbhb/)**。

# javascript - 仅在加载 iframe 页面时显示 DIV

> ID：15126674
> 
> 赞同：3
> 
> 时间：2013-02-28T03:00:13.813
> 
> 标签：javascript, jquery, iframe

我在 DIV 中有一个 iframe 页面，我只希望在 iframe 页面加载/可用后显示 DIV。如果 iframe 页面未加载/不可用，则根本不显示该 DIV。

我写了一些 JS，但是它并没有像我预期的那样工作，无论 iframe 页面是否可用，DIV 仍然显示。

代码：

```
<div class="ad-container" style="display:none">
   <iframe src="//oonagi.org" border="0" scrolling="no" allowtransparency="true" width="500" height="300"></iframe>
</div>

var adContainer = $('.ad-container');
// check if ad container exist
if(adContainer.length > 0) {
  // only show ad once iframe page is loaded
  adContainer.find('iframe').load(function() {
    adContainer.css('display', 'block');
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:31:46.673

您应该更改 iframe src`document.ready`以使其触发您的 iframe 加载事件。您可以尝试以下操作：

```
$(document).ready(function() {

    $('#frame').bind('load', function() { //binds the event
        $('#ad-container').show();
    });

    var newSrc = $('#frame').attr('src') + '?c=' + Math.random(); //force new URL
    $('#frame').attr('src', newSrc); //changing the src triggers the load event

}); 
```

# php - PHP 邮件表单每天发送随机电子邮件

> ID：15126678
> 
> 赞同：0
> 
> 时间：2013-02-28T03:00:28.523
> 
> 标签：php, html

我在一个网站上使用一个基本的 PHP 邮件表单，我的客户向我提到，他每天都会在他的收件箱中收到一封随机的电子邮件，而这封邮件完全是空白的。我读到了这个问题，并认为每次加载页面时邮件表单都会发送一封电子邮件，对吗？或者这是另一个问题？

**PHP**

```
<?php     

$mail_to = "email1@gmail.com, email2@gmail.com"; // specify your email here

// Assigning data from the $_POST array to variables

$name = $_POST['sender_name'];

$mail_from = $_POST['sender_email'];

$phone = $_POST['sender_phone'];

$web = $_POST['sender_web'];

$company = $_POST['sender_company'];

$addy = $_POST['sender_addy'];

$message = $_POST['sender_message'];

// Construct email subject

$subject = 'Web Prayer Request from ' . $name;

// Construct email body

$body_message = 'From: ' . $name . "\r\n";

$body_message .= 'E-mail: ' . $mail_from . "\r\n";

$body_message .= 'Phone: ' . $phone . "\r\n";

$body_message .= 'Prayer Request: ' . $message;

// Construct email headers

$headers = 'From: ' . $name . "\r\n";

$headers .= 'Reply-To: ' . $mail_from . "\r\n";

$mail_sent = mail($mail_to, $subject, $body_message, $headers);

if ($mail_sent == true){ ?>

<script language="javascript" type="text/javascript">
alert('Your prayer request has been submitted - thank you.');

window.location = 'prayer-request.php';

</script>

<?php } else { ?>

<script language="javascript" type="text/javascript">
alert('Message not sent. Please, notify the site administrator info@info.com');

window.location = 'prayer-request.php';
</script>

<?php

    }

?> 
```

**网站链接： http: [//tinyurl.com/dy48jom](http://tinyurl.com/dy48jom)**

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:18:27.547

您必须考虑在您的邮件表单中实施验证码，以便自动脚本不会从您的域发送邮件。[验证码](http://en.wikipedia.org/wiki/CAPTCHA)还确保您将某些字段设置为`required`（不仅使用 js 验证，还使用服务器端 php 代码验证）。

# python - 绘制熊猫中每个唯一值计数的键计数

> ID：15126679
> 
> 赞同：22
> 
> 时间：2013-02-28T03:00:33.367
> 
> 标签：python, plot, pandas

我有一组数据，我想从中绘制每个*唯一 ID 计数**的键*数 （x=unique_id_count，y=key_count），并且我正在尝试学习如何利用.*`pandas`*

 *在这种情况下：

unique_ids 1 = 密钥计数 2

unique_ids 2 = 密钥计数 1

```
from pandas import *
key_items = ("a", "a", "a", "a", "a", "b", "b", "b", "b", "b", "c", "c", "c")
id_data = ("X", "X", "X", "X", "X", "X", "X", "Y", "Y", "Y", "X", "X", "X")

df = DataFrame({'keys': key_items, 'ids': id_data}) 
```

通过从数据框中提取数据并对其进行重组，并重建一个新的数据框，我已经设法将数据分解为我想要的数据。在这种情况下，最好在没有熊猫的情况下在 python 中完成这一切......

```
unique_values = defaultdict(list)
for items in df.itertuples(index=False):
    key = items[1]
    v = items[0]
    unique_values[key].append(v)

unique_values_count = {}
for k, values in unique_values.iteritems():
    unique_values_count[k] = [len(set(values))]

# reformat for plotting
key_col = ("a", "b", "c")
id_col = [unique_values_count[k][0] for k in key_col]

df2 = DataFrame({"keys":key_col, "unique_id_count": id_col})
df2.groupby("unique_id_count").size().plot(kind="bar") 
```

有没有更好的方法可以更直接地使用初始数据框来做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2017-07-12T17:00:08.627

直接使用怎么样`value_counts()`

```
pd.value_counts(df['ids']).plot.bar() 
```

[![在此处输入图像描述](../Images/81375bf02a43896a51c0f1cfc0787442.png)](https://i.stack.imgur.com/awhwr.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-28T03:25:20.130

```
s = df.groupby("keys").ids.agg(lambda x:len(x.unique()))
pd.value_counts(s).plot(kind="bar") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-04T08:45:40.777

一个简单的解决方案是 -

```
df['your_column'].count_values().plot.bar(rot=0) 
```

如果您希望在值太多的情况下限制柱的数量 -

```
df['your_column'].count_values()[:no_of_values].plot.bar(rot=0) 
```*

# c# - 基于 XPath 查找 XML 字符串的行号

> ID：15126680
> 
> 赞同：0
> 
> 时间：2013-02-28T03:00:46.147
> 
> 标签：c#, .net, xml, xpath

我试图在包含 XML 的多行字符串中找到给定 Xpath 指向的行。

换句话说，我有一个包含 XML 的字符串。我有一个给定的 Xpath，我想用它来查找字符串的确切行号。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:30:06.960

您可以考虑改用[XmlTextReader](http://msdn.microsoft.com/en-us/library/7hh47ty4.aspx)。这具有 LineNumber 和 LinePosition 属性。

确实有一些有限的`XmlTextReader`“在到达某某节点之前读取”属性，但它们不像 XPath 那样复杂。根据 XPath 的复杂程度，这可能有效，也可能无效。

我确实在[这里](http://www.pcreview.co.uk/forums/get-line-numbers-evaluating-xpath-expressions-t3326046.html)找到了有关该主题的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:07:40.667

您可以将 XML 从字符串加载到实际的 XML 类中。

```
XDocument x = XDocument.Parse(yourStringContainingXML);
string contentOfNode = x.Descendants(XName.Get("NameOfTheNode")).First().Value; 
```

# jakarta-ee - 使用 netbeans 7.2 创建 EAR

> ID：15126684
> 
> 赞同：1
> 
> 时间：2013-02-28T03:01:10.620
> 
> 标签：jakarta-ee, ejb, war

我使用**netbeans 7.2分别创建了****web 项目**和**ejb**。是否有可能创建新的**企业应用程序项目**并将**web 和 ejb 项目**添加到其中？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T11:40:05.437

1.  只需使用 NewProject --> Enterprise 和 Packaged Archive 等选项将 WAR 文件导入 Netbeans

2.  创建一个 EnterpriseApplication 并删除 Netbeans 创建的默认 ejb 和 war 组件

3.  点击 - EnterpriseApplication - 新建 JavaEE 模块并添加已经导出为打包 ARchive 的 War 文件

现在构建项目，您可以在 dist 文件夹中找到 EAR 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T15:49:05.063

是的，创建 EAR 项目后，进入 NetBeans 左侧的 Project 面板，然后，右键单击刚刚创建的新 EAR 项目，然后单击“Add Java EE Module...”。您必须在一个小窗口中看到：您在列出之前创建的 EJB 和 Web 项目，您选择了它们以添加到 EAR 项目中。******

# javascript - jQuery 元素自定义敲除 customBinding

> ID：15126691
> 
> 赞同：0
> 
> 时间：2013-02-28T03:02:03.263
> 
> 标签：javascript, jquery, knockout.js, coffeescript, custom-binding

我正在尝试对能够知道对 dom 的任何更改（属性、文本、html、附加、删除等）的 jQuery 对象进行淘汰绑定。

```
ko.bindingHandlers.jqHtml =
  init: (element, valueAccessor) ->
    $(element).preMutate (options, el) ->
      if ko.isObservable valueAccessor()
        valueAccessor().valueWillMutate()
    $(element).onMutate _.debounce (argsCollection) =>
      @argsCollection = argsCollection
      if ko.isObservable valueAccessor()
        valueAccessor().valueHasMutated()
    , 100

  update: (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) ->
    content = valueAccessor()
    $(element).children().each( (i,el) -> ko.cleanNode(el) )
    if _.difference($(element).children().get(), content.get()).length > 0 || _.difference(content.get(),$(element).children().get()).length > 0
      $(element).children().peek().detach().unpeek()
      $(element).peek().append(content).unpeek()
    ko.applyBindingsToDescendants(viewModel, element) 
```

我有一个正在进行的[jsFiddle](http://jsfiddle.net/92xsX/117/)

jsfiddle 明确指出的问题是，jquery 不会跟踪 dom 中的重复项，而是移动元素。因此，如果我有多个绑定到同一个 jq 元素，jQuery 将只能将它放在一个数据绑定中。我在想可能有一种方法可以创建一个 jqObservable，其中包含原始 jquery 元素，然后分发该元素的副本。并且每当收到 onMutate 通知时，它都会更新每个副本。当然，我需要一个 inception 阻止程序（数据绑定到已绑定元素下的同一元素）。我认为 og 的一个问题是知道哪个订阅正在调用 observable 以知道要返回的 jquery 元素的哪个副本，因此它不会返回错误的副本，并且知道要销毁已取消绑定/取消订阅的元素。还有我 d 需要在其中一个被修改时更新其余的 jquery 副本。顺便说一句，我不在乎它是否在 jQuery 函数之外进行了修改，只应在此插件中的元素上调用 jQuery 函数。

任何建议都会非常感激。

附言

OnMutate 是我自己的自定义 jQuery 插件

我最初试图订阅更改事件，但这不适用于输入以外的任何内容。没有顶级订阅子树修改，最接近的事情是每秒刷新一次以检查 html 中的差异。另一个选项是我在堆栈溢出时看到的另一个插件，[jollytoad 的突变事件](https://github.com/jollytoad/jquery.mutation-events)

虽然它只适用于几个函数，但它给了我为我需要它们的所有元素创建回调的想法，仅此而已，所以我创建了这个函数来自动为我想要的尽可能多的 jQuery 函数创建回调，以及任何其他插件。我在下面创建的。

```
(($, window) ->
  hasArgs = () -> arguments.length > 0
  noArgs = () -> arguments.length == 0
  class DomCallbacks
    ###*
     * Defines the jQuery functions to create callbacks for, and which type of callback they contain
     * @type {defaults}
     *   @properties {array of jQuery function names, and test to determine if the callback 
     *   should be run based on input to the jQuery function, passed the same arguments that the jQuery
     *   function is}
    ###
    defaults:
      Mutate: 
        jqfuncs: ["addClass","append","appendTo","attr","clone","css","detach","empty","hasClass","height","html","innerHeight","innerWidth","insertAfter","insertBefore","offset","outerHeight","outerWidth","position","prepend","prependTo","prop","remove","removeAttr","removeClass","removeProp","replaceAll","replaceWith","scrollLeft","scrollTop","text","toggleClass","unwrap","val","width","wrap","wrapAll","wrapInner"]
        defaultCheck: hasArgs
      Look: 
        jqfuncs:["addClass","after",'append',"appendTo","attr","before","clone","css","detach","empty","hasClass","height","html","innerHeight","innerWidth","insertAfter","insertBefore","offset","outerHeight","outerWidth","position","prepend","prependTo","prop","remove","removeAttr","removeClass","removeProp","replaceAll","replaceWith","scrollLeft","scrollTop","text","toggleClass","unwrap","val","width","wrap","wrapAll","wrapInner"]
        defaultCheck: noArgs

    constructor: (options) ->
      @categories = $.extend({}, @defaults, options)

    originals: {} 

    ###*
     * Creates a function in jQuery's function object by replacing the name with a wrapper function
     * and then calling the original function, and has the new function call each category of callback
     * for the starting element and it's parents
     * @param {string} name       the name/key of the function being replaced
     * @param {string} categories the type of callback that the function should notify
    ###
    addCallback: (name, categories) ->
      pairs = (obj) ->
        pairs = []
        for key of obj 
          if (hasOwnProperty.call(obj, key))
            pairs.push([key, obj[key]])
        pairs

      if !@originals[name]?
        @originals[name] = $.fn[name]
      _this = @

      categories = $.grep pairs(categories), (pair) ->
        $.grep(pair[1].jqfuncs, (val) -> val.name == name || val == name).length > 0
      ###*
       * The actual wrapper function being created
       * @return {object} returns the original functions return
      ###
      $.fn[name] =  () ->
        options = {args: arguments}
        ittr = []
        if !$.fn[name].peek          
          ittrArray = for category in categories
            key = category[0]
            val = category[1]
            funcs = ($.grep(val.jqfuncs, (checking) -> checking.name == name || checking == name)).slice(0,1)[0].check
            {key:key, val: val ,funcs:funcs}

          for ittr in ittrArray
            if !ittr.funcs?
              ittr.funcs = ittr.val.defaultCheck
            if !ittr.funcs? or ittr.funcs.apply(@,arguments)
              @["pre"+ittr.key](null, options)
              @parents()["pre"+ittr.key](null, options)

        funcRet = _this.originals[name].apply(@, arguments)
        options.funcRet = funcRet

        if !$.fn[name].peek
          for ittr in ittrArray
            if !ittr.funcs?
              ittr.funcs = ittr.val.defaultCheck
            if !ittr.funcs? or ittr.funcs.apply(@,arguments)
              @["on"+ittr.key](null, options)
              @parents()["on"+ittr.key](null, options)

        funcRet

      $.fn[name].peek = false

    ###*
     * restores the original function to it's property in the jQuery function object
     * @param  {string} name key used to find function to restore
     * @return {[type]}      [description]
    ###
    removeCallback: (name) ->
      if @originals[name]?
        $.fn[name] = @originals[name]
        delete @originals[name]  

  ###*
   * Creates a jQuery plugin capable of subscribing to and calling callbacks
   * for each node
   * @param  {string} precedence names the function to run before or after the subscripton function
   * @param  {string} category   the name of the type of
   * @return {function}          returns the function capable of setting and running callbacks for individual elements
  ###
  createCallbackPlugin = (precedence, category) ->
    ###*
     * A jQuery plugin which creates a sets callbacks for elements and calls them if none are passed in
     * @param  {function} callback the callback to be set (optional)
     * @param  {object}   options  options to be sent to the callback, set by the trigger function
     * @return {jQuery}            returns jQuery object for chaining
    ###
    return (callback, options) ->
      @each (i, el)  ->
        if callback?
          if !el['domCallbacks']?
            el['domCallbacks'] = {}
          if !el['domCallbacks']['_'+precedence+category]?
            el['domCallbacks']['_'+precedence+category] = []
          el['domCallbacks']['_'+precedence+category].push callback
        else
          if el['domCallbacks']? && el['domCallbacks']['_'+precedence+category]?
            for cb in el['domCallbacks']['_'+precedence+category]
              cb(options, el)
        @
      @

  domCallbacks = new DomCallbacks()

  ###*
   * This creates each function inside of jQuery capable of setting and running callbacks on
   * individual elements.
   * @param  {[type]} options [description]
   * @return {[type]}         [description]
  ###
  $.extend createDomCallbacks: (options) ->
    $.extend({}, domCallbacks.categories, options)
    categoryFunctions = {}
    for key, category of domCallbacks.categories
      categoryFunctions['pre'+key] = createCallbackPlugin('pre',key)
      categoryFunctions['on'+key] = createCallbackPlugin('on',key)
      $.extend $.fn, categoryFunctions
    for key, category of domCallbacks.categories
      for val in category.jqfuncs
        domCallbacks.addCallback( (if val.name then val.name else val) , domCallbacks.categories)

    ###*
     * removes any callbacks each element in the jquery object
     * @param  {object} options an object conatining keys for the type of callback to be removed (e.g. options = {Mutate: {}})
     * @return {[type]}         returns jquery object for chaining
    ###
    $.extend $.fn, removeDomCallbacks: (options) ->
      @each (i, el) ->
        if el['domCallbacks']?
          if !options?
            delete el['domCallbacks']
          for category of options
            delete el['domCallbacks']["_pre"+category]
            delete el['domCallbacks']["_on"+category]

        @
      @
    ###*
     * turns off all callbacks for performing actions without notifying up the dom
     * @return {jQuery} for chaining
    ###
    $.extend $.fn, peek: () ->
      for key,val of domCallbacks.originals
        $.fn[key].peek = true
      @each (i, el) ->
        @
      @

    ###*
     * turns off all callbacks for performing actions without notifying up the dom
     * @return {jQuery} for chaining
    ###
    $.extend $.fn, unpeek: () ->
      for key,val of domCallbacks.originals
        $.fn[key].peek = false
      @each (i, el) ->
        @
      @

) @jQuery, @ 
```

# javascript - 删除字符串的特定部分并在末尾添加另一个

> ID：15126693
> 
> 赞同：1
> 
> 时间：2013-02-28T03:02:18.300
> 
> 标签：javascript, jquery

我的网站上有这个跨度和这些值。

```
<span>1,4,4,7,5,9,10</span> 
```

我想使用 jquery`"1,"`从字符串的开头删除（或第一个数字是什么）并`",12"`在末尾添加（或任何其他数字而不是 12），所以它看起来像这样：

```
<span>4,4,7,5,9,10,12</span> 
```

如何使用 jquery 或 java 脚本做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:10:56.020

```
<span id="myText">1,4,4,7,5,9,10</span> 
```

JS：

```
var text = $('#myText').html().split(',').slice(1);
text.push('12');
$('#myText').html(text.join(',')); 
```

[http://jsfiddle.net/samliew/RD6W8/7/](http://jsfiddle.net/samliew/RD6W8/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T03:11:30.273

您可以在 string.replace 中使用拆分或正则表达式

以下是如何使用拆分：

```
var arr = '1,4,4,7,5,9,10'.split(',');
arr.shift();
arr.push('12');
var result = arr.join(','); 
```

或者使用正则表达式（我承认不是一个非常易读的表达式）：

```
'1,4,4,7,5,9,10'.replace(/^\d+,(.*)$/, '$1,12') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T03:12:47.483

```
$('span').text(function(i, t) {
   return t.replace(/\d+,/, '') + ',12';
}) 
```

[http://jsfiddle.net/dnkEV/](http://jsfiddle.net/dnkEV/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T03:22:20.110

使用 DOM API，您可以这样做：

```
var tn = span.firstChild;

tn.deleteData(0, tn.data.indexOf(",") + 1);
tn.data += ",12"; 
```

[http://jsfiddle.net/KMzau/](http://jsfiddle.net/KMzau/)

* * *

或者像这样：

```
var tn = span.firstChild;

tn.data = tn.data.slice(tn.data.indexOf(",") + 1) + ",12"; 
```

# scala - Scala：在多个迭代器上的高效迭代

> ID：15126696
> 
> 赞同：0
> 
> 时间：2013-02-28T03:02:46.697
> 
> 标签：scala, iterator, scala-collections

我正在编写一个应用程序服务器，并且有一个消息发送循环。消息由字段组成，因此可以被视为遍历字段的迭代器。并且有一个消息队列由消息循环处理，但循环在任何时候都是可中断的（例如，当套接字缓冲区已满时），以后可以恢复。当前的实现如下所示：

```
private val messageQueue: Queue[Iterator[Field]]

sent = 0
breakable {
  for (iterator <- messageQueue) {
    for (field <- iterator) {
      ... breakable ...
    }
    sent += 1
  }
} finally messageQueue.trimStart(sent) 
```

这可行而且还不错，但后来我想如果我可以用使用 ++ 运算符连接迭代器的迭代器替换队列，我可以使代码更简洁。说：

```
private val messageQueue: Iterator[Field] = message1.iterator ++ message2.iterator ++ ...

breakable {
  for (field <- messageQueue) {
    ... breakable ...
  }
} 
```

现在代码看起来更干净了，但存在性能问题。连接的迭代器在内部形成一个（不平衡的）树，因此 next() 操作需要 O(n) 的时间。所以迭代需要 O(n^2) 的时间。

总而言之，消息只需要处理一次，因此队列不需要是 Traversable。一个迭代器（TraversableOnce）就可以了。我想将消息队列视为连续迭代器的集合，但 ++ 存在性能问题。是否有一个很好的解决方案可以使代码更清晰但同时又高效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:11:14.410

您是否考虑过使用`Stream`和`#:::`懒惰地将您的消息连接在一起？

```
private val messageQueue: Stream[Field] = message1.toStream #::: message2.toStream #::: ...

breakable {
  for (field <- messageQueue) {
    ... breakable ...
  }
} 
```

至于这里的时间复杂度，我相信您要连接的迭代器数量为 O(n) （您需要调用`toStream`每个迭代器并将`#:::`它们一起调用）。但是，个人`toStream`和`#:::`操作应该是 O(1)，因为它们是懒惰的。以下是 的`toStream`实现`Iterator`：

```
def toStream: Stream[A] =
    if (self.hasNext) Stream.cons(self.next, self.toStream)
    else Stream.empty[A] 
```

这将花费恒定的时间，因为 Stream.cons 的第二个参数是按名称调用的，因此在您实际访问尾部之前不会对其进行评估。

但是，转换为 Stream*将为*每个元素访问添加一个恒定的开销因素，即，不仅调用`next`迭代器，还必须执行一些额外的方法调用来强制流的惰性尾部并访问包含的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T04:14:45.417

如果你只是把它们弄平怎么办？

```
def flattenIterator[T](l: List[Iterator[T]]): Iterator[T] = l.iterator.flatten 
```

# html - Dojo gfx：onmousemove 连接到破坏 onmouseup 的形状？

> ID：15126697
> 
> 赞同：0
> 
> 时间：2013-02-28T03:02:58.923
> 
> 标签：html, canvas, dojo, gfx

我正在尝试使用 Canvas 作为渲染器在 Dojo 的 gfx 中实现一个橡皮筋选择框。我的意图是在单击并拖动鼠标时绘制选择框，然后在释放鼠标后消失。不幸的是，我遇到了问题。

jsFiddle 示例：http: [//jsfiddle.net/7F9fy/](http://jsfiddle.net/7F9fy/)

主要问题出在 onmousemove 的某个地方（或与之相关）：

```
whiteRect.connect("onmousemove",function(e) {
    if(isMouseDown) {
        if(whiteRect.groupSelector_) {
            pStat.innerHTML = "dragging...";
            console.debug("dragging...");
            e.stopImmediatePropagation();
            e.preventDefault();
            var ex = (e.x ? e.x : e.clientX);
            var ey = (e.y ? e.y : e.clientY);                   

            if(groupSelector) {
                // Also tried getShape, editing that shape, and setShape on groupSelector--same
                // behavior, though.                    
                var rectX = (ex - cnvDiv.offsetLeft < whiteRect.groupSelector_.x ? ex - cnvDiv.offsetLeft : whiteRect.groupSelector_.x);
                var rectY = (ey - cnvDiv.offsetTop < whiteRect.groupSelector_.y ? ey - cnvDiv.offsetTop : whiteRect.groupSelector_.y);

                surface.remove(groupSelector);
                groupSelector = surface.createRect({
                    x: rectX,
                    y: rectY, 
                    width: Math.abs(ex - cnvDiv.offsetLeft - whiteRect.groupSelector_.x), 
                    height: Math.abs(ey - cnvDiv.offsetTop - whiteRect.groupSelector_.y)
                }).setStroke({color: "blue", width: 3});

            } else {
                groupSelector = surface.createRect({
                    x: whiteRect.groupSelector_.x,
                    y: whiteRect.groupSelector_.y,
                    width: Math.abs(ex - cnvDiv.offsetLeft - whiteRect.groupSelector_.x), 
                    height: Math.abs(ey - cnvDiv.offsetTop - whiteRect.groupSelector_.y)
                }).setStroke({color: "blue", width: 3});
            }
            e.stopPropagation();
        }
    }
}); 
```

如果我在我的鼠标事件连接到的形状/组（上例中的白色方块）中按住鼠标左键并开始拖动，则框开始绘制，跟随我的拖动动作。当我释放鼠标时，有时该框会消失，有时则不会。如果没有，该框会继续绘制，并按照我拖动时定义的鼠标移动。

在 jsFiddle 中，如果您在画布下观看 console.debug 或段落报告器，您会看到有时，当您释放鼠标时 onmouseup 不会触发（我也检查了 mouseup，但这有同样的问题）。在 onmouseup 从不触发的情况下， onmousemove 会继续触发。如果再次单击，有时会触发完整的鼠标单击系列（向下、向上、单击和移动），然后使绘制的矩形消失。但是，有时这不会发生，并且 onmousemove 会继续触发。如果在拖动/onmousemove 变为“卡住”之后单击并且没有任何反应，则这些事件没有调试行或对报告器的更改，因此就好像除 onmousemove 之外的所有鼠标事件都被压制了。我尝试添加 stopPropagation、stopImmediatePropagation 和 preventDefault，但这没有帮助。

为了在 onmousemove 中重新绘制框，我尝试了 'getShape -> edit properties -> setShape' 以及删除形状并制作了一个全新的形状；这些方法都没有解决问题，并且它们之间没有任何明显的区别。

我使用的是 Dojo 1.8.3，这发生在 Chrome (v25) 和 Firefox (v19) 中，使用 Canvas 或 SVG 作为渲染器。

想法？我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:33:47.693

整理出来。问题是当您决定停止拖出形状时的 onmouseup 事件可能会在基础/附加形状或您正在拖动的形状上触发。它是随机的，取决于光标位置，但如果您的拖动没有偏移或延迟，则有利于绘制的形状。（dojox/gfx 中的 Moveable.js 和 Mover.js 为我指明了正确的方向。）

我在尝试使其工作的过程中将我的盒子更改为一条路径，这似乎表现更好，但不是必需的。

关键是创建一个通用的“onMouseUp”函数，然后从创建者形状的 onmouseup 以及拖动形状的 onmouseup 调用它。我的例子很草率，但我希望它能够理解重点。

jsfiddle：http: [//jsfiddle.net/n3KGY/1/](http://jsfiddle.net/n3KGY/1/)

关键代码：

```
// General method to clear out a selector if
// one was being drawn.
var selectorMouseUp = function(e) {
    reporter.innerHTML = "onmouseup";
    isMouseDown = false;
    whiteRect.groupSelector_ = null;
    if(groupSelector) {
        if(selectorUp) {
            groupSelector.disconnect(selectorUp);
        }               
        surface.remove(groupSelector);
        groupSelector = null;
    }
    e.stopImmediatePropagation();
    e.stopPropagation();
    e.preventDefault();
};

// Mouseup event for the background/workspace
whiteRect.connect("onmouseup",function(e){
    selectorMouseUp(e);
});

// Make a selector as a path on the surface
// and attach a mouseup to it
var makeSelector = function(x,y,w,h) {
    groupSelector = surface.createPath()
        .moveTo(x,y)
        .hLineTo(x+w).vLineTo(y+h).hLineTo(x).vLineTo(y)
        .setStroke({color: "blue", width: 3})
        .closePath();
    // Attach the same mouseup method as the workspace/background
    selectorUp = groupSelector.connect("onmouseup",function(e){
        reporter.innerHTML = "onmouseup (selector)";
        selectorMouseUp(e);
    });         
};

bigRect.connect("onmousemove",function(e){  
    if(isMouseDown) {
        if(bigRect.groupSelector_) {
            var ex = e.clientX;
            var ey = e.clientY;

            reporter.innerHTML = "dragging at " + ex+","+ey;

            var downX = bigRect.groupSelector_.x;
            var downY = bigRect.groupSelector_.y;
            var leadingX = (ex - grn.offsetLeft < downX ? ex - grn.offsetLeft : downX);
            var leadingY = (ey - grn.offsetTop < downY ? ey - grn.offsetTop : downY);
            var selWidth = Math.abs(ex - grn.offsetLeft - downX);
            var selHeight = Math.abs(ey - grn.offsetTop - downY);

            if(groupSelector) {
                // If there's already a selector being drawn, get rid of it.
                groupSelector.disconnect(selectorUp);
                surface.remove(groupSelector);
            }
            // Draw the current selector
            makeSelector(leadingX,leadingY,selWidth,selHeight);
            e.stopImmediatePropagation();
            e.stopPropagation();
            e.preventDefault();
        }
    }
}); 
```

# php - codeigniter multi-upload 仅第二次上传

> ID：15126698
> 
> 赞同：0
> 
> 时间：2013-02-28T03:03:00.070
> 
> 标签：php, codeigniter, multi-upload

任何人都可以帮助我..只有在至少上传了 2 个文件然后第一个文件没有移动到上传文件夹时才能工作..任何人都可以帮助..这是我的代码

// 看法

```
<?php echo form_open_multipart($this->uri->uri_string());  ?>
    <p>
    <?php echo form_label('Image') ?>
    <input type="file" name="userfile[]" size="20" class="multi" accept="gif|jpg|png"/>
    </p> 
```

// 控制器

```
function album($id){         
    if (isset($_POST['submit']))
    {
        $config['upload_path'] = './assets/gallery/'; // server directory
        $config['allowed_types'] = 'gif|jpg|png'; // by extension, will check for whether it is an image
        $config['max_size']    = '1000'; // in kb
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);
        $this->load->library('Multi_upload');

        $files = $this->multi_upload->go_upload();

        if ( ! $files )        
        {
            $data['error'] = $this->upload->display_errors();               
        }    
        else
        {
            $data = array('upload_data' => $files);             
        }

    }       
    $id = $this->uri->segment(3);
    $data['query']      = $this->administrator_model->getAllPhoto($id);
    $data['current']    = 'home';
    $data['side']       = 'gallery';
    $data['attr']       = 'view_album';
    $data['content']    = 'backend/administrator_manage';
    $data['sidebar']    = 'backend/home_sidebar';
    $this->load->view("backend/index", $data);
} 
```

[// 我从这里](http://www.mitesdesign.com/blog/open-source/multi-upload-jquery-code-igniter)使用的多上传库

稍加修改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:16:28.013

使用纯PHP多文件上传非常简单。看看这个脚本

看法

```
<form method="post" action="<?php echo base_url('users/upload/'); ?>" enctype="multipart/form-data">
    <label for="upload">Select : </label>
    <input type="file" name="userfile[]" id="userfile" multiple="multiple" />
    <input type="submit" name="fsubmit" id="fsubmit" value="Upload" />
</form> 
```

控制器

```
public function album($id)
{
    if (isset($_FILES['userfile']['name'])) {
        // total files //
        $count = count($_FILES['userfile']['name']);
        // all uploads //
        $uploads = $_FILES['userfile'];

        for ($i = 0; $i < $count; $i++) {
            if ($uploads['error'][$i] == 0) {
                // FCPATH = root directory project
                move_uploaded_file($uploads['tmp_name'][$i], FCPATH . 'assets/gallery/' . $uploads['name'][$i]);
                echo $uploads['name'][$i] . "\n";
            }
        }
    }
} 
```

希望这可以帮助。谢谢！！

# c# - 在 C# 中使用需要操作级别授权的 WSDL

> ID：15126700
> 
> 赞同：1
> 
> 时间：2013-02-28T03:03:14.697
> 
> 标签：c#, soap, visual-studio-2012, wsdl, service-provider

我正在尝试使用第 3 方 WSDL。我已将其添加为服务参考。我像这样初始化客户端和查询参数：

```
var ltRequest = new SearchEmailAddressStatus 
            {
                 EmailAddress = emailAddressList.ToArray()
            };
var ltClient = new CommunicationPreferenceServiceClient
             {
                ClientCredentials =
                   {
                       UserName = 
                         {
                             UserName = ltProperties.CompanyCredential.UserName,
                             Password = ltProperties.CompanyCredential.Password
                         }
                     }
              };  
var ltResponse = ltClient.searchEmailAddressStatusWS(ltRequest); 
```

在 Fiddler 中查看数据包后，我注意到 Auth 标头从未发送到服务器。有没有办法在我的请求中手动插入授权标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:24:00.697

好的，经过大量挖掘，我找到了答案。声明客户端后，我使用了以下代码：

```
using (var scope = new OperationContextScope(ltClient.InnerChannel))
{
    var reqProperty = new HttpRequestMessageProperty();
    reqProperty.Headers[HttpRequestHeader.Authorization] = "Basic " 
             + Convert.ToBase64String(Encoding.ASCII.GetBytes(
               ltClient.ClientCredentials.UserName.UserName + ":" + 
               ltClient.ClientCredentials.UserName.Password));

    OperationContext.Current
        .OutgoingMessageProperties[HttpRequestMessageProperty.Name] = reqProperty;

    var ltResponse = ltClient.searchEmailAddressStatusWS(ltRequest);
} 
```

我相信这是在 wsdl 请求中获取自定义标头的最不脏的方法。如果有人有更好的方法，我很想听听。

# ruby - 如何将文档添加到将显示在 ruby gems.org 上的 gem 中？

> ID：15126701
> 
> 赞同：1
> 
> 时间：2013-02-28T03:03:20.640
> 
> 标签：ruby, rubygems, rdoc

尝试将我的第一个 gem 推送到 ruby​​gems.org，我试图弄清楚如何为其生成在线文档。对于大多数宝石“显示”页面，当我单击“文档”链接时，我会被带到[http://rubydoc.info/gems/gemname/version/frames](http://rubydoc.info/gems/gemname/version/frames)。如果我在正确的位置生成文档，这会自动发生吗？我必须在 gemspec 中指定一些东西吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:20:46.190

[rubydoc.info](http://rubydoc.info)会自动为你的 gem 生成 API 文档。至少，这些文档将包含所有类、模块和方法的签名，以及您在每个方法和类之前放置的注释。

如果将 yardoc 标记添加到文件中，文档会变得更好。这是一个方法的一小部分 yardoc 标记：

```
# Validate the value.
# @param long_mailer_id truthy if the mailer ID is long (9 digits).
# @raise ArgumentError if invalid

def validate(long_mailer_id) 
```

[yardoc是](http://yardoc.org/)[ruby​​doc.info](http://rubydoc.info)使用的文档引擎，它将查找特定格式的注释并将它们格式化为漂亮的文档。

您还可以在 gem 的根目录中添加`README.md`Markdown[格式](http://en.wikipedia.org/wiki/Markdown)的。这将被格式化并用作文档的“主页”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:19:55.500

这是我从 RubyDoc 社区中的某个人那里收到的回复：

> 你好呀，
> 
> 新宝石最多可能需要一天时间才能进入 RubyGems 的主宝石列表。我们对此无能为力。从那时起，大约需要一个小时才能将新*版本*的 gem 填充到列表中（我们在 *:15 处运行 cron 作业来更新我们的副本）。

这是一个让足够的时间过去的问题。

# c# - 使用 C# 代码设置 Internet 选项

> ID：15126706
> 
> 赞同：1
> 
> 时间：2013-02-28T03:03:42.137
> 
> 标签：c#, asp.net, http, registry

我不想选择工具->Internet选项->连接->局域网设置->自动配置->自动检测设置，这样我在使用HTTP客户端时可以更快地访问网页。

如何使用 Visual Studio 2010 和 .NET Framework 4 中的 C# 代码执行此操作？

# python - Python - 如何将字符串从二进制列表转换为整数列表？

> ID：15126707
> 
> 赞同：1
> 
> 时间：2013-02-28T03:04:13.290
> 
> 标签：python

我有一个字符串，如：

```
s = "\0x01\0x02\0x01\0x11" 
```

我想得到那个字符串的平均数。我试过这个：

```
sum = 0
for d in s:
    sum += int(d) 
```

但它说“int() 的无效文字，基数为 10:'\x08'”:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:07:59.093

我推荐[结构模块](http://docs.python.org/2/library/struct.html)。

```
>>> import struct
>>> s = '\x01\x02\x01\x11'
>>> struct.unpack('=4B', s)
(1, 2, 1, 17) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:16:37.233

可以使用python`int()`函数，第一个参数是字符串，第二个是数字的底数。

您需要检查基数，因为您发布的内容看起来像十六进制数（0x0 通常表示十六进制数，另外 02 不是有效的二进制数）。

对于二进制（以二为基数）：

```
num = int("0x11", 2); # num will be 3 
```

对于十六进制（以 16 为底）：

```
num = int("0x0A", 16); # num will be 10 
```

要转换您的字符串 ("\0x01\0x02\0x01\0x11")：

```
numbers = [int(s, base) for s in "\\0x01\\0x02\\0x01\\0x11".split("\\") if len(s)] 
```

如果运行`base = 16`，输出：`numbers = [1, 2, 1, 17]`

然后，您可以使用以下方法找到平均值：

```
average = sum(numbers)/len(numbers) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:34:19.017

当给定一个长度为 1 的字符串时，[`ord()`](http://docs.python.org/2/library/functions.html#ord)遗嘱会为您提供该字符串中字符的代码点。您应该能够使用它而不是`int()`在您的代码中，它看起来像这样：

```
sum = 0
for d in s:
    sum += ord(d) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-22T00:31:25.347

你可以这样做：

```
s = "\0x01\0x02\0x01\0x11"
list = s.split('\0x')
list.remove('')

sum = 0
for d in list:
    sum += int(d)

# 15 
```

# python - python 格式说明符是否允许使用逗号作为小数点？

> ID：15126710
> 
> 赞同：0
> 
> 时间：2013-02-28T03:04:26.240
> 
> 标签：python, localization, string-formatting

从技术上讲，我使用的是 javascript，但[d3.format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)函数支持 python[格式说明符语言](http://docs.python.org/release/3.1.3/library/string.html#formatspec)。

我正在构建一些要在德国使用的东西，他们希望数字用逗号格式化为十进制符号，如下所示：`14,5`. 是否可以创建一个像这样格式化它的说明符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:19:30.603

在 Python 中，我认为这超出了 python 格式说明符语言的范围，因为它包含在[locale 模块](http://docs.python.org/2/library/locale.html#locale.localeconv)中。

[python 格式](http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language)确实具有特定于区域设置的`n`表示类型，但[d3.format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)映射`n`到`,g`.

# javascript - 如何保护我对 Devise/CanCan/JavaScript 的使用？

> ID：15126711
> 
> 赞同：2
> 
> 时间：2013-02-28T03:04:26.493
> 
> 标签：javascript, ruby-on-rails, devise, cancan

我有一个受 Devise/CanCan 保护的控制器`:authenticate_user!`和`load_and_authorize_resource`. 我必须添加`:except => [:sort]`这些内容才能使我的`sort`操作在 javascript 中运行，因为与`sort`操作的 javascript 连接不包括`current_user`其角色。

我通过使用[gon](https://rubygems.org/gems/gon)来传递角色的角色`current_user`（如果没有`current_user`，那么它传递“匿名”）来解决这个问题。我不确定这在 JavaScript 端是否安全（也许可以在浏览器的控制台中设置/覆盖该变​​量），并且我确定我的`sort`操作不安全，因为我已将其打开以进行直接 POST访问 - 我通过发送正确的操作参数使用 RESTed 对此进行了测试，这导致数据重新排序。

那么：如何从 JavaScript 启用对受 Devise/CanCan 保护的 Rails 控制器的安全访问？

这是我的 Rails 应用程序的详细信息...

这是（截断的）控制器，显示我如何免除`sort`Devise/CanCan 的操作并将`gon.current_user_role`变量设置为 的角色（`current_user`如果有）：

```
class ThingsController < ApplicationController
  before_filter :authenticate_user!, :except => [:sort]
  load_and_authorize_resource :except => [:sort]

  def show
    @thing = Thing.find(params[:id])

    if current_user
      gon.current_user_role = current_user.role
    else
      gon.current_user_role = "anonymous"
    end

    respond_to do |format|
      format.html
    end
  end

  def sort
    params[:thing].each_with_index do |id, index|
      Thing.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end

end 
```

在我看来，我有一个无序列表的项目应该*只能*由具有“管理员”角色的用户排序：

```
<ul class="things" data-update-url="<%= sort_things_url %>">
  <% @things.each do |t| %>
    <%= content_tag_for(:li, t) do %>
      <%= image_tag t.image %>
    <% end %>
  <% end %>
</ul> 
```

`gon.current_user_role`这是 application.js 文件中的 javascript，如果变量是“admin” ，我只会在其中使列表可排序：

```
$(function() {
  if (gon.current_user_role == "admin")
  {
    $( ".things" ).sortable({
      update: function() {
        return $.post($(this).data('update-url'), $(this).sortable('serialize'));
      }
    });
    $( ".things" ).disableSelection();
  }
}); 
```

最后，我的 routes.rb 文件打开了`sort`POST 调用的操作：

```
 resources :things do
    collection { post :sort }
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:22:40.680

我误认为与排序操作的 JavaScript 连接不包括`current_user`其角色。我弄错的原因是因为我使用的是[Pow](http://pow.cx/)，所以我一直在[http://railsapp.dev](http://railsapp.dev)访问我的 Rails 应用程序......但是我的 JavaScript 请求被标记为来自 127.0.0.1 ......所以他们' 被视为 XSS 请求。

当我`rails s`使用`current_user`.

我的控制器最终是这样的：

```
class ThingsController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource

  def show
    @thing = Thing.find(params[:id])

    if current_user
      gon.current_user_role = current_user.role
    else
      gon.current_user_role = "anonymous"
    end

    respond_to do |format|
      format.html
    end
  end

  def sort
    params[:thing].each_with_index do |id, index|
      Thing.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end

end 
```

我的视图和 JavaScript 保持不变。

此设置不允许对操作进行任意 POST 调用`sort`，并且还可以防止没有“管理员”角色的人重新排列项目。如果有人*确实*知道如何操作`gon.current_user_role`JavaScript 变量，他们将能够明显地重新排列页面上的项目，但重新排列不会存储在数据库中，因为该`sort`操作将不允许请求（并且他们的更改将在下一页加载）。

此设置不能解决我的 Pow 问题，但我可以接受。

# python - 如何将标准输出放入 Tkinter、python 中的文本中？

> ID：15126713
> 
> 赞同：1
> 
> 时间：2013-02-28T03:04:38.423
> 
> 标签：python, button, python-2.7, python-3.x, tkinter

我使用一个按钮来回调函数 foo：

```
def foo(value):
  print value 
root = Tk()
text = Text(root)
remap_button = Tk.Button(root, text = 'Remap', command = lambda: foo(val)) 
```

如何将 foo 的输出打印到 Tkinter、python 中的文本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:15:53.140

如果您的意思是您正在寻找将内容添加到 Text 小部件的功能：

```
def foo(value):
    text.insert(END, value) 
```

如果您正在尝试使用`print`并希望将其输出从标准输出*重定向*到小部件，那么它不是这样工作的：P

# python - 将窗口保存到图像文件

> ID：15126716
> 
> 赞同：1
> 
> 时间：2013-02-28T03:05:03.843
> 
> 标签：python, wxpython, jpeg

我正在阅读“wxpython in action”，并在书中找到了一个paintwindow 演示。它使用 cpickle(*.paint) 保存其数据。我想知道如何将窗口中的数据保存为 jpg 文件，以便我可以使用标准图像查看器查看它。

**书中的saveas函数：**

```
def OnSaveAs(self, event):
        file_wildcard = "Paint files(*.paint)|*.paint|All files(*.*)|*.*"
        dlg = wx.FileDialog(self, "save paint as ...", os.getcwd(), style=wx.SAVE|wx.OVERWRITE_PROMPT, wildcard=file_wildcard)
        if dlg.ShowModal() == wx.ID_OK:
            filename = dlg.GetPath()
            if not os.path.splitext(filename[1]):
                filename += ".paint"
            self.filename = filename
            self.SaveFile()
            self.SetTitle(self.Title + " -- " + self.filename)
        dlg.Destroy()

def SaveFile(self):
    if self.filename:
        data = self.paint.GetLinesData()
        f = open(self.filename, "w")
        cPickle.dump(data, f)
        f.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:19:41.563

不久前，我写了一篇关于如何使用 wxPython 截取应用程序屏幕截图的教程：http: [//www.blog.pythonlibrary.org/2010/04/16/how-to-take-a-screenshot-of-your -wxpython-app-and-print-it/](http://www.blog.pythonlibrary.org/2010/04/16/how-to-take-a-screenshot-of-your-wxpython-app-and-print-it/)

您可能不需要整个窗口，因此您可能需要计算面板的大小，或者您的绘图相对于框架侧面的大小。但是该示例中的其余代码应该可以帮助您入门。

# c# - 为什么以及在哪里需要托管模块

> ID：15126717
> 
> 赞同：1
> 
> 时间：2013-02-28T03:05:06.523
> 
> 标签：c#, .net, clr, .net-assembly

我知道托管模块是包含 PE32 标头、CLR 标头、元数据和 IL 代码的逻辑代码容器。程序集可以包含使用程序集链接器 (AI.exe) 链接的多个托管模块。但是 VS 不支持多个托管模块程序集。我想知道如果我们不能在没有程序集的情况下使用托管模块等，我们何时以及为什么需要托管模块。我们不能只使用程序集吗？

我确信有一个合乎逻辑的解释，但我不确定我知道它是什么:-)

有关什么是托管模块的更多信息：[什么是托管模块（与程序集相比）？](https://stackoverflow.com/questions/1326556/what-is-a-managed-module-compared-to-an-assembly)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:10:53.117

[在另一个问题上发布](https://stackoverflow.com/a/1327051/102937)的图表似乎很清楚：

![在此处输入图像描述](../Images/75debcb10e2a5f85ad3025fc6c3ae56f.png)

基本上，当您想将代码组织为程序集中的容器时，您会使用托管模块。理论上，这应该会给你更好的灵活性。

实际上，这几乎不会发生，因为大多数人将他们的解决方案组织为一个项目集合，每个项目都有自己的关联 DLL。这种安排允许您在物理上换出 DLL，而不必替换整个（多模块）程序集。

# java - 如何从 SQLite db 将文本随机设置为四个按钮？

> ID：15126720
> 
> 赞同：1
> 
> 时间：2013-02-28T03:05:44.133
> 
> 标签：java, android, sqlite, android-sqlite

我在资产中导入了一个 SQLite 表，试用了一个 10 行和 6 列（_ID、QUESTION、ANSWER、OPTION1、OPTION2 和 OPTION3）的表。我设法从数据库中读取随机行并将该数据分配给文本视图，并使用以下代码为我的按钮分配四个可能的答案：

```
TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        mDbHelper.open();

        final Cursor c = mDbHelper.getTestData();

        question.setText(c.getString(1));
        bOdgovor1.setText(c.getString(2));
        bOdgovor2.setText(c.getString(3));
        bOdgovor3.setText(c.getString(4));
        bOdgovor4.setText(c.getString(5)); 
```

我的 TestAdapter 类中也有这一行：

```
String sql ="SELECT * FROM tblPitanja ORDER BY RANDOM() LIMIT 1"; 
```

这一切都很好，但我不会随机分配问题给按钮，因为每次答案在按钮 1 时都会这样。如何在我的按钮之间混合问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:37:05.230

将您的字符串放入列表中，并使用[它](http://developer.android.com/reference/java/util/Collections.html#shuffle%28java.util.List%3C?%3E%29)来随机播放它们。

这是一个例子：

```
List<String> labels = new ArrayList<String>();

labels.add(c.getString(2));
labels.add(c.getString(3));
labels.add(c.getString(4));
labels.add(c.getString(5));

Collections.shuffle(labels);

bOdgovor1.setText(labels.get(0));
bOdgovor2.setText(labels.get(1));
bOdgovor3.setText(labels.get(2));
bOdgovor4.setText(labels.get(3)); 
```

# cygwin - 如何通过 cygwin 调用使用 Windows Geany 构建 C 源代码？

> ID：15126725
> 
> 赞同：2
> 
> 时间：2013-02-28T03:06:54.367
> 
> 标签：cygwin, geany

是否可以在其中设置这样的构建命令，它将通过**cygwin**调用编译源代码？

首选项中的默认命令是`gcc -Wall -o "%e" "%f"`调用**MinGW**，但某些文件只能使用**cygwin**版本的**gcc 编译**（那些具有 linux 特定库的文件，如 termios.h 等）。

我试过了`c:\cygwin\bin\bash -c "gcc -Wall -o %e %f"`，它就像默认行一样工作，它再次不使用 linux 库构建这些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T01:41:07.477

如果您将命令设置为：

```
C:/cygwin/bin/gcc -Wall -o %e %f 
```

根据[一些文档](http://cygwin.com/cygwin-ug-net/setup-env.html)，Cygwin 导入 Windows 环境变量，因此即使`gcc`从 Cygwin 内部启动，由于 Windows 环境变量，`bash`它可能仍然会发现错误`gcc`（即 MinGW 之一）`PATH`。以下是这些文档的简介：

> Cygwin 应用程序使用 PATH 环境变量作为目录列表来搜索要运行的可执行文件。当 Cygwin 进程首次启动时，此环境变量会从 Windows 格式（例如 C:\Windows\system32;C:\Windows）转换为 UNIX 格式（例如 /cygdrive/c/Windows/system32:/cygdrive/c/Windows） ...

您可能需要修改链接器的库搜索路径（例如 LD_LIBRARY_PATH）并`gcc`包含目录。

# php - 如何停止 curl 脚本？

> ID：15126732
> 
> 赞同：2
> 
> 时间：2013-02-28T03:07:32.717
> 
> 标签：php, curl, rotten-tomatoes

我有一个名为烂番茄的 curl 脚本。每次我运行它时，即使在从 1 到 10 的 for 循环中，它也会无限运行。阻止它的唯一方法是重新启动服务器，该页面继续调用烂番茄站点，直到服务器关闭。curl 脚本适用于其他 API，因此它应该适用于这个。在这里，有什么想法吗？：对于 , `$temp_movie`，它得到了它的价值并且可以正常工作。

```
$ch = curl_init();
$api_link = "http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=****&q=".$temp_movie."&page_limit=1";
echo $api_link."<br>";
curl_setopt($ch, CURLOPT_URL, $api_link);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, '3');
$content = trim(curl_exec($ch));
curl_close($ch);
$rottentomatoes = json_decode($content, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:18:10.297

我不知道为什么会这样，但就像我说的，curl 脚本适用于其他 API，所以我尝试复制并粘贴相同的 curl 代码（再次）并再次尝试。这有什么原因？有什么我没有看到的区别吗？：

```
$ch = curl_init();
$api_link = "http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=****&q=".$temp_movie."&page_limit=1";
curl_setopt($ch, CURLOPT_URL, $api_link);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, '3');
$content = trim(curl_exec($ch));
curl_close($ch);
$rottentomatoes = json_decode($content, true); 
```

# css - 使 HTML DIV/P 绝对位置适合任何屏幕

> ID：15126736
> 
> 赞同：0
> 
> 时间：2013-02-28T03:07:56.677
> 
> 标签：css, css-position, pdf-to-html

我将 PDF 文件转换为 HTML 单个文件。当它成功转换为 html 时，文本位置类似于它在 PDF 中的位置（这很好）。PDF 的大小为 8.5 x 11，我的问题是当它被转换为 html 时，文本以绝对定位定位，所以当我在移动 webview 中查看它时，文本会溢出。

这里有人可以对此有类似的问题吗？如何使绝对位置 div/p 适合任何屏幕？我想让 html 内容看起来与 pdf 文件相同。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:05:06.350

html

```
<div class="Wrap">
      <div class="inside">
      </div>
    </div> 
```

css

```
.wrap {
float:left;
position:relative
}

.inside {
float:left;
position:absolute
} 
```

希望这有帮助

`%`顺便说一下宽度的百分比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T10:15:48.863

使用您的字体大小`vw`而不是`px`. 如果你正在使用

```
h1 {
    font-size: 15px;
} 
```

那么你必须使用

```
h1 {
    font-size: 4.5vw;
} 
```

只有一次。无需为每个媒体 css 编写。

我希望这能帮到您。

# jquery - 使用 jQuery 清除单选按钮组中的错误时遇到问题

> ID：15126738
> 
> 赞同：0
> 
> 时间：2013-02-28T03:08:17.830
> 
> 标签：jquery, forms, validation, radio-button, each

当未选中组并提交表单时，我正在使用以下代码突出显示单选按钮字段。

我想这样做，以便从已检查的单选按钮组的标签元素中删除错误类。

有人可以通过修改下面的代码来告诉我如何做到这一点吗？

```
 checkRadios : function (form) {
    var $form = $(form),
        radioGroups = $form.find(".radiogroup")
        radios = radioGroups.find("input");

radios.each(function () {
  if ($radios.is(':checked')) {
    $(this).closest("tr")
           .find("label")
           .removeClass("error");
  } else {
    $(this).closest("tr")
           .find("label")
           .addClass("error");

    $(this).on("change", function () {
      checkRadios(form);
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:37:39.567

我认为这会做

```
function checkRadios() {
    var form = $('form')
    var grps = $('.radiogroup')
    grps.each(function(i, v){
        if($('input:checked', v).length > 0){
            $(v).closest('tr').find("label").removeClass('error');
        }else{
            $(v).closest('tr').find("label").addClass('error');
        }
    });
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/dCRaH/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:39:03.260

试试这个代码：

```
radioGroups.each(function () {
    if ($(this).find("input:checked").length > 0) {
       $(this).closest("tr")
           .find("label")
           .removeClass("error");
    } else {
       $(this).closest("tr")
           .find("label")
           .addClass("error");
    }
}); 
```

这个想法是循环分组并查找每个组中是否有任何选中的收音机：

```
$(this).find("input:checked").length > 0 
```

# php - 用户个人资料页面生成

> ID：15126739
> 
> 赞同：0
> 
> 时间：2013-02-28T03:08:18.097
> 
> 标签：php, facebook, web-applications

我正在使用 PHP 开发一个动态网站。当网站的用户创建帐户时，应为该用户创建个人资料页面。假设一个名为“dev23”的用户在我的网站上创建了一个帐户，他的个人资料应该可以通过链接 www.mysite.com/dev23 访问

我如何创造这样的东西？我应该创建一个像 userprofile.php 这样的标准页面，其中填充特定于所提供用户名的数据吗？或者我应该为每个用户创建一个永久网页？

请让我知道解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:19:30.870

www.mysite.com/dev23 是公开的还是只对登录用户可见？

如果它只对登录用户可见，您可以创建一个 myprofile.php 文件，该文件从会话中检索登录用户并相应地检索数据。

如果它是其他用户可以点击的 URL，您可能需要某种带有传递数据的 userprofile.php 页面来识别要查看的用户。例如，url 可能是 www.mysite.com/userprofile.php?user=dev23。如果您将 Apache 用于您的 Web 服务器，您可以查看使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)使 URL 更漂亮。因此，您可以将 URL www.mysite.com/user/dev23 路由到 userprofile.php?user=dev23 并且您的 PHP 处理相同。它只是使 URL 比裸查询字符串更易于使用的一种方法。这在许多基于 PHP 的 CMS 系统中很常见，例如 WordPress、Joomla 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:22:30.440

理想情况下，您应该创建一个处理所有用户的文件。

某些框架（如[SkyPHP）](http://switchbreak.com/skyphp)通过将有效页面后的属性定义为“查询文件夹”来实现这一点，该查询文件夹可以像 GET/POST 变量一样使用。

如果您不使用框架，我可能会建议您考虑使用一个来简化您的任务。

SkyPHP 还有一个功能，可以使用表中的单个字段来提取此数据，只需将页面定义为 _table.field_name_

它将检查是否有匹配的表和字段可以从中提取数据，并将自动提取字段值与 url 值匹配的记录的 id 并将其分配给变量。

示例...如果我们有一个名为 category 的表和一个名为 slug 的字段，我们将创建一个名为`_category.slug_.php`

然后 url... ***[http://mydomain.com/watches](http://mydomain.com/watches)***将在 category.slug 中查找“ *watches* ”并拉回记录的标识符，因为`$category_id`它`$category_slug`也可用。

如果您愿意试一试，它将解决您的问题。

再次参考这里的文档... [http://switchbreak.com/skyphp](http://switchbreak.com/skyphp)

# ruby-on-rails - Backbone.js 是否有来自 Ruby on Rails 的“rake routes”之类的东西？

> ID：15126741
> 
> 赞同：2
> 
> 时间：2013-02-28T03:08:32.260
> 
> 标签：ruby-on-rails, backbone.js, architecture, routes

有没有一种简单的方法可以查看我的 Backbone.js 应用程序在运行时构建的所有路由？

Ruby on Rails 有`rake routes`，显示如下：

```
 unicorns GET    /unicorns(.:format)          unicorns#index
             POST   /unicorns(.:format)          unicorns#create
 new_unicorn GET    /unicorns/new(.:format)      unicorns#new
edit_unicorn GET    /unicorns/:id/edit(.:format) unicorns#edit
     unicorn GET    /unicorns/:id(.:format)      unicorns#show
             PUT    /unicorns/:id(.:format)      unicorns#update
             DELETE /unicorns/:id(.:format)      unicorns#destroy 
```

Backbone 有等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:40:46.197

您始终可以检查路由器原型/实例`routes`属性以获取所有静态声明的路由。因此，如果您不以编程方式生成它们，您将获得最干净的输出：

```
console.log( router.routes ); 
```

如果您使用`this.route()`动态添加路由，那么您应该检查`Backbone.History`对象，这将是您的应用程序中使用的完整路由列表；虽然输出有点混乱（路由编译为正则表达式等）。

```
console.log( Backbone.history.handlers ); 
```

请注意，此属性未记录在案，因此无法保证它将保留在 Backbone 的未来版本中。我只会将它用于调试目的。

# c - 练习 2.16 中 0x00E22277 处的未处理异常 - 训练 Re-arrangement.exe：0xC00000FD：堆栈溢出（参数：0x00000000、0x002A2000）

> ID：15126745
> 
> 赞同：3
> 
> 时间：2013-02-28T03:09:39.370
> 
> 标签：c, exception, stack-overflow

这个错误是什么意思？

> 练习 2.16 - Train Re-arrangement.exe 中 0x00E22277 处未处理的异常：0xC00000FD：堆栈溢出（参数：0x00000000、0x002A2000）。

这使我无法运行我的程序......我不明白“堆栈溢出”是什么意思，我需要做什么才能处理这个异常？

整个代码有点长，我总结一下：

它获取用户输入并通过无限循环以处理输入。并且通过满足 if 语句和某些情况，它会中断并且程序终止 + 输出处理后的数据。

这个程序在 NetBeans 上运行良好（我不知道为什么），但是 Visual Studio 中的调试器说有一个未处理的异常，所以它无法运行......所以，我认为这很容易修复？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T03:14:05.453

堆栈溢出通常发生在无限递归时，即当函数调用自身（直接或间接）并且不返回时。因此，每次调用都会在堆栈上产生更多数据，直到没有更多空间并且程序终止，如您所见。

# javascript - jquery自动完成源不起作用

> ID：15126747
> 
> 赞同：0
> 
> 时间：2013-02-28T03:09:49.133
> 
> 标签：javascript, jquery, autocomplete

[我从jQuery 自动完成演示](http://jqueryui.com/autocomplete/#remote)复制源代码并将相对 url 替换为绝对 url，但是当我在 localhost 中测试页面时，自动完成小部件不起作用。谁能帮我？

```
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Autocomplete - Remote with caching</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />
        <style>
            .ui-autocomplete-loading {
                background: white url('http://jqueryui.com/resources/demos/autocomplete/images/ui-anim_basic_16x16.gif') right center no-repeat;
            }
        </style>
        <script>
            $(function () {
                $("#birds").autocomplete({
                    source: "http://jqueryui.com/resources/demos/autocomplete/search.php",
                    minLength: 2
                });
            });
        </script>
    </head>

    <body>
        <div class="ui-widget">
            <label for="birds">Birds:</label>
            <input id="birds" />
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:12:59.753

您不能向其他主机发出请求。localhost 与 jqueryui.com 不同，因此您被[同源策略阻止](http://www.w3.org/Security/wiki/Same_Origin_Policy)

# codeigniter - 使用参数处理 CodeIgniter 重新映射

> ID：15126750
> 
> 赞同：0
> 
> 时间：2013-02-28T03:10:10.027
> 
> 标签：codeigniter, remap

我将以下代码添加到由我的所有控制器扩展的 MY_Controller 中：

```
public function _remap($method, $params = array())
    {//exit($this->router->fetch_class());
        if (array_search($method, $this->private_methods) !== false && !$this->logged_in)
        {
            $this->session->set_flashdata('message', array(
                                                        'message'   =>  'You must login to access the requested area',
                                                        'error'     =>  1
                                                        )
                                        );
            redirect('/');
        }
        else if (method_exists($this, $method))
        {
            $this->$method($params);
        }
        else
        {
            redirect('/');
        }

    } 
```

正在创建的问题是调用`$this->$method($params)`将参数压缩到一个数组中。因此，以下方法会中断：

```
function some_method($param1, $param2, $param3) 
```

**有没有办法将这个数组分解成这样的函数的单个项目？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T12:21:31.437

我试图做同样的事情并发现同样的问题

```
$this->$method($params); 
```

我找到了另一个选择

```
call_user_method_array($method,$this,$params); 
```

哪个有效但已被弃用。 [不推荐使用 PHP 中的函数，我现在应该使用什么？](https://stackoverflow.com/questions/2151125/function-in-php-deprecated-what-should-i-use-now)

但希望这是新的。

```
call_user_func_array(array($this,$method), $params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-04T15:14:22.120

我已经尝试过了，它对我有用

```
public function _remap($method,$params = array())
  {
    if (method_exists($this, $method)) {

      if($method == 'delete_photo' || $method == 'delete_video'){

        call_user_func_array(array($this,$method), $params);
        }

      else{
        $this->$method();
        }
      }
      else {
      $this->index($method);
    }
  } 
```

现在您只需将“delete_photo”和“delete_video”替换为包含参数的方法名称，当然您可以添加任意数量的方法。

# jquery - jquery 切换动态列表三态

> ID：15126751
> 
> 赞同：0
> 
> 时间：2013-02-28T03:10:25.367
> 
> 标签：jquery, jstl

我有一个动态生成的列表。

当我单击一条线时，我想切换背景颜色，比如说-red green yellow。例如，当 id 不是动态时，我已经看到了答案。

```
<ul data-role="listview" id="my-listview"  >
    <c:forEach var="line" items="${tl.reqs}">
        <li id="lnk"><a href="#" onclick= '
            $(this).toggle(function(){
                $(this).css("background-color","green");},
            function(){
                $(this).css("background-color","red");},
            function(){
                $(this).css("background-color","yellow");}
            );'
            ${line.name}</a>
        </li>
    </c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:39:11.190

在链接中添加一个 id（或类）：

```
<a href="#" id="myLink">Test</a> 
```

jQuery：

```
$('#myLink').click(function() {
    var color = $(this).css("background-color");
    console.log(color);
    switch(color) {
        case 'rgb(255, 255, 0)': 
            $(this).css("background-color", "green");
            break;
        case 'rgb(0, 128, 0)': 
            $(this).css("background-color", "red");
            break;
        case 'rgb(255, 0, 0)': 
        default:
            $(this).css("background-color", "yellow");
            break;
    }
    return false;
}); 
```

[http://jsfiddle.net/samliew/SJwLy/9/](http://jsfiddle.net/samliew/SJwLy/9/)

# c# - 使用 kinect for wpf C# 捕获头部图像

> ID：15126752
> 
> 赞同：1
> 
> 时间：2013-02-28T03:10:32.323
> 
> 标签：c#, wpf, kinect

我正在尝试在不使用面部检测的情况下在头部周围使用 Microsoft Kinect 捕获图像。我设法捕捉到整个相机图像，但不仅仅是头部周围。我在互联网上找到了一些示例代码，但它似乎不适用于我的程序。在我的程序中使用 Microsoft SDK v1.6 和 Microsoft Visual Studio。谁可以帮我这个事？非常感谢XD

我尝试了 CroppedBitmap

```
CroppedBitmap croppedImage = new CroppedBitmap();
              croppedImage.BeginInit();
              croppedImage.Source = colorImageBitmap;
              croppedImage.SourceRect = new Int32Rect((int)headPos.X, (int)headPos.Y, (int)imageHeight, (int)imageWidth);
              croppedImage.EndInit();
              headImage.Source = croppedImage; 
```

[还有 Kinect 裁剪图像编码，但我听说 SDKv.16 Kinect 裁剪图像](https://stackoverflow.com/questions/7682447/kinect-crop-image)中不再存在平面 图像

我也试过[https://stackoverflow.com/questions/11435544/how-do-i-save-a-croppedbitmap-to-an-image-file](https://stackoverflow.com/questions/11435544/how-do-i-save-a-croppedbitmap-to-an-image-file)，但我有 NullReferenceException 是未处理的错误。

双图像高度 = heightDiff * 1.2;

双图像宽度 = ((heightDiff * 1.2) / 2);

```
 Int32Rect cropRect = new Int32Rect((int)headPos.X, (int)headPos.Y, (int)imageWidth, (int)imageHeight);

            this.headImageBitmap = new WriteableBitmap(this.headImageBitmap.PixelWidth, this.headImageBitmap.PixelHeight, 96, 96, PixelFormats.Bgr32, null);

            this.headImageBitmap.WritePixels(new Int32Rect((int)headPos.X, (int)headPos.Y, (int)imageWidth, (int)imageHeight), colorData, (int)imageWidth * colorFrame.BytesPerPixel, 0);

            CroppedBitmap croppedImage = new CroppedBitmap(colorImageBitmap, cropRect);
            headImage.Source = croppedImage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:48:26.697

我得到了我想要的结果。非常感谢你们！

这就是我捕捉图像的方式。

我的图像的名称称为 headImage。

私人无效捕获图像（）

```
 {

        BitmapEncoder encoder = new JpegBitmapEncoder();

        encoder.Frames.Add(BitmapFrame.Create(this.croppedImage));

        string time = System.DateTime.Now.ToString("hh'-'mm'-'ss", CultureInfo.CurrentCulture.DateTimeFormat);

        string myPhotos = Environment.GetFolderPath(Environment.SpecialFolder.MyPictures);

        string path = System.IO.Path.Combine(myPhotos, "KinectSnapShot-" + time + ".jpg");

        try
        {
            using (FileStream fs = new FileStream(path, FileMode.Create))
            {
                encoder.Save(fs);
            }
            imageTB.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteSuccess, path);
        }
        catch (IOException)
        {
            imageTB.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteFailed, path);
        }
    } 
```

这是我从croppedBitmap中使用的编码

Int32Rect cropRect = new Int32Rect((int)(headPos.X * 0.8), (int)(headPos.Y * 0.7), (int)headImage.Width, (int)headImage.Height);

```
 this.headImageBitmap = new WriteableBitmap(colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null);

            this.headImageBitmap.WritePixels(new Int32Rect((int)headPos.X, (int)headPos.Y, (int)headImage.Width, (int)headImage.Height), colorData, (int)headImage.Width * colorFrame.BytesPerPixel, 0);

            croppedImage = new CroppedBitmap(colorImageBitmap, cropRect);

            headImage.Source = croppedImage; 
```

# php - 超过 8mb 的文件不会在 wordpress 中上传

> ID：15126753
> 
> 赞同：0
> 
> 时间：2013-02-28T03:10:46.270
> 
> 标签：php, wordpress

我正在尝试在 WordPress 服务器上上传文件。在 8 mb 上传文件中断后。有三种方法可以增加上传文件的大小。

1.  PHP.ini（更改 PHP.ini 文件的设置）
2.  htaccess （也更改了 htaccess 文件中的设置，但仍然没有用）
3.  更改 wp-admin 文件中的设置。

一切都没有工作。

是否有任何其他方式来增加上传文件的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:17:10.043

这取决于您上传文件的位置，即。在哪个网站上。你的连接带宽是多少。

多少上传你的`WordPress service provider`支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:17:39.933

除了最大文件大小设置外，如有必要，请尝试在 php.ini中查找`max_execution_time`和配置。`post_max_size`然后，重新启动 Apache。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:28:08.550

您必须在 php.ini upload_max_filesize 和 post_max_size 中配置这两件事，然后重新启动您的网络服务器

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-04T07:50:26.700

您的脚本可以有一组有限的时间来执行。

尝试使用 set_time_limit() 在 php 脚本中设置请求超时（用于时间限制测试，而不是用于上传）

通常，当限制由文件大小表示时，您应该在上传开始之前收到一条消息警告。在这种情况下，服务器允许您上传，因此在大多数情况下，这不是大小问题。

还要考虑到一些提供商会从 Web 服务器设置中强制执行时间，因此您也必须检查这一点。如果我是你，我会尝试执行一个什么都不做（等待）几分钟的脚本，看看请求超时的时间是否与上传文件相同。

# c - 我在弹出函数（队列）C 中做错了什么

> ID：15126756
> 
> 赞同：1
> 
> 时间：2013-02-28T03:11:09.807
> 
> 标签：c, linked-list, queue

我必须编写一个程序来实现一个带有各种菜单选项的队列（这些都完成了）。我的“pop”功能有问题。

我的计划是员工餐厅候补名单。每当顾客打电话或进入餐厅时，他们都会被列入等候名单。弹出（就座）的唯一方法是客户的状态是在餐厅等候。我已经正确编写了将客户从呼入到在餐厅等候的部分。

此外，如果组大小大于桌子大小，我应该去下一个节点并检查下一个组是否符合就座标准。

```
enum status(WAIT,CALL);

typedef struct restaurant
{
//stuff
}list;

//I call pop in the main as follows:

pop(&head, &tail);   

void pop(list** head, list** tail)
{
    list* temp = *head;
    int tableSize;

    if(*head == *tail && *tail == NULL)
    {
        printf("The queue is empty... exitting program... \n");
        exit(EXIT_FAILURE);
    }

    printf("What is the table size? ");
    scanf(" %d", &tableSize);

    if(temp->groupSize > tableSize || temp->waitStatus == CALL)
        while(temp->groupSize > tableSize || temp->waitStatus == CALL)
            temp = temp->nextNode;

    else
        *head = (*head)->nextNode;

    if(*tail == temp)
        *tail = (*tail)->nextNode;

    free(temp);
} 
```

当我显示我的输出时，如果它必须跳过队列中的第一个人，它不会删除实例中的节点。但是，当第一个人符合标准时，它确实有效。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:23:56.840

首先，您的 pop 似乎允许删除列表中间的项目。虽然这是可行的，但它要求您记住指向*弹出*节点的内容，以确保将其设置为弹出节点*之后*的节点。有很多方法可以做到这一点。

此外，您的 empty() 条件已关闭。`head`如果列表为空，则将始终为 NULL，前提是您正确地将新添加的节点`nextNode`成员设置为 NULL。不需要对 NULL进行比较`tail`或检查。`tail`

最后，也许您可​​能需要考虑从弹出窗口中返回*数据*（如果有的话），并将布尔条件 true/false 作为函数返回结果来指示是否有东西被取出。否则，您的程序如何知道数据已成功检索，以及该数据*是*什么？

无论如何，只需使用您当前删除匹配内容的口头禅：

```
void pop(list** head, list** tail)
{
    list *temp = NULL, *prior = NULL;
    int tableSize = 0;

    if(*head == NULL)
    {
        printf("The queue is empty... exitting program... \n");
        exit(EXIT_FAILURE);
    }

    printf("What is the table size? ");
    scanf(" %d", &tableSize);

    temp = *head;
    while (temp && (temp->groupSize > tableSize || temp->waitStatus == CALL))
    {
        prior = temp;
        temp = temp->nextNode;
    }

    if (temp)
    {
        // only way prior is set is if temp is NOT
        //  pointing to the first node, therefore *head
        //  is not changed.
        if (prior)
        {
            prior->nextNode = temp->nextNode;

            // if we made it to the tail ptr, then it needs
            //  to be moved back to the prior node
            if (*tail == temp)
                *tail = prior;
        }
        else
        {   // first node was removed. so move head to
            //  the next node (which may be NULL)
            *head = temp->nextNode;
        }

        // release the node
        free(temp);
    }
} 
```

# c - 路由套接字 RTM_GET RTA_NETMASK 与路由表条目不匹配

> ID：15126757
> 
> 赞同：3
> 
> 时间：2013-02-28T03:11:10.540
> 
> 标签：c, sockets, ipv6

我的路由表上有以下条目：

```
tecik:ihsan $ netstat -rn -f inet6 | grep 2400:3700:61:4::/64
2400:3700:61:4::/64               2400:3700:60:4::2             UG       gif104 
```

我通过路由套接字做了一个 RTM_GET 请求，我设法正确地获取了 RTA_DST 信息，但是 RTA_NETMASK 总是返回 0，尽管路由表说它是 /64。

我如何获得正确的网络掩码条目。

编码：

```
 /* fill in request header */
pid = getpid();
buf = calloc(0, sizeof(char) * buflen);
rtm = (struct rt_msghdr *) buf;
rtm->rtm_version = RTM_VERSION;
rtm->rtm_flags = RTF_UP | RTF_GATEWAY;
rtm->rtm_addrs = RTA_DST | RTA_NETMASK;
rtm->rtm_type  = RTM_GET;
rtm->rtm_pid   = pid;
rtm->rtm_seq   = seq;

/* take the dst AFI and assume the rest are of the same AFI */
if (dst->sa_family == AF_INET6) {
    sin6 = (struct sockaddr_in6 *) (rtm + 1);
    memcpy(sin6, dst, sizeof(struct sockaddr_in6));
    sin6 = (struct sockaddr_in6 *) ((char *) sin6 + alignsa(sizeof(struct sockaddr_in6)));
    memcpy(sin6, mask, sizeof(struct sockaddr_in6));
    sin6 = (struct sockaddr_in6 *) ((char *) sin6 + alignsa(sizeof(struct sockaddr_in6)));
    rtm->rtm_msglen = (char *) sin6 - buf;
}

/* write to routing socket */
write(s, rtm, rtm->rtm_msglen);

/* now read the reply */
do {
    n = read(s, rtm, buflen);
} while (rtm->rtm_type != RTM_GET || rtm->rtm_seq != seq || rtm->rtm_pid != pid);

close(s);
/* cycle through all routing replies, checking for expected sockaddr */
rtm = (struct rt_msghdr *) buf;
sin6 = (struct sockaddr_in6 *) (rtm + 1);
for (rtax = 0; rtax < RTAX_MAX; rtax++) {
    if (rtm->rtm_addrs & (1 << rtax)) {
        sa = (struct sockaddr *) sin6;

        if (rtax == RTAX_DST) {
            al->rt = malloc(sizeof(char) * MAX_ADDRSTR);
            getaddrstr(al->rt, sa);
        }
        else if (rtax == RTAX_NETMASK) {
            sa->sa_family = AF_INET6;
            al->rtplen    = getcidr(sa);
        }

        sin6 = (struct sockaddr_in6 *) (char *) sin6 + alignsa(sizeof(struct sockaddr_in6));
    }
}

if (al->rtplen == 0)
    def = 1;

if (def)
    debug("%s has default route, ignoring..", al->ifname);
else
    debug("%s has route %s/%u", al->ifname, al->rt, al->rtplen);

free(buf); 
```

alignsa() 是：

```
size_t
alignsa(size_t s)
{
    return (1 + (((s) - 1) | (sizeof(size_t) - 1)));
} 
```

getcidr() 是

```
/* all zeros netmask */
if (sa->sa_len == 0)
    return(plen);

switch (sa->sa_family) {
    case AF_INET:

        break;

    case AF_INET6:
        s = (uint8_t *) &((struct sockaddr_in6 *)sa)->sin6_addr;

        if (*s == 0)
            break;

        for (i = 0; ((i < 16) && (*s == 0xff)); i++, s++)
            plen += 8;

        break;

    default:
            return(-1);
}

return(plen); 
```

如果我打印出 al->rt 的值，它会显示为 2400:3700:61:4:: 但 rtplen 始终为 0。

如果我打印出网络掩码的 sockaddr_in6，它的输出与 ffff:ffff:ffff:ffff:: 或 /64 完全相同，所以我认为对于 RTA_NETMASK，sin6_len 为 0，但我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:24:19.523

**编辑：这个答案是错误的，因为它只适用于 netlink RTM_GETROUTE。操作员询问路由套接字。**

我会假设你的意思是 RTM_GETROUTE，即使你的主题是 RTM_GET。RTM_GETROUTE 不返回由 netstat -6 -rn 显示的相同信息。该命令可以返回缓存的路由。也许更令人惊讶的是，RTM_GETROUTE 可以在路由缓存中**创建路由。**

这来自 iproute2 文档（在我的 Ubuntu 上，它在*man 8 ip-route*中列出）：

> ```
>  Note that this operation is not equivalent to ip route show.  show
>    shows existing routes.  get resolves them and creates new clones if
>    necessary.  Essentially, get is equivalent to sending a packet along
>    this path.  If the iif argument is not given, the kernel creates a
>    route to output packets towards the requested destination.  This is
>    equivalent to pinging the destination with a subsequent ip route ls
>    cache, however, no packets are actually sent.  With the iif argument,
>    the kernel pretends that a packet arrived from this interface and
>    searches for a path to forward the packet. 
> ```

在您的情况下，您可以比较*ip -6 route show table all*和*ip -6 route get 2400:3700:60:4::123*的输出。它们可能会有点不同，*ip route get版本包含最后**缓存*的单词。

我目前在一个没有 IPv6 连接的位置，但是这条本地路线说明了我的意思：

> thuovila@glx:~$ ip -6 rl table all |grep ff00::/8
> 
> ff00::/8 dev eth1 表本地度量 256
> 
> thuovila@glx:~$ ip r get ff00::/8
> 
> ff00:: from :: via ff00:: dev eth1 src fe80::21b:b1ff:fe48:1a75 metric 0 cache

正如您所注意到的，缓存的路由不包含目标地址长度（网络掩码）。

为了解决您的问题，（如何获取网络掩码）我建议研究过滤网络链接消息。您将不得不转储符合您的条件的路由并过滤*克隆*的路由，而不是单个 RTM_GET 请求。iproute2 工具在例如带有函数的[iproute.c](http://git.kernel.org/?p=linux/kernel/git/shemminger/iproute2.git;a=blob_plain;f=ip/iproute.c;hb=HEAD)模块中执行此操作`static int filter_nlmsg`。除其他内容外，它还包含一条说明`if (filter.cloned == !(r->rtm_flags&RTM_F_CLONED))`删除克隆（即源自缓存）路由的行。调用它`route_print()`来限制显示哪些路线。在*ip route list*命令中，路由是通过调用 libnetlink function 转储的`rtnl_dump_filter()`。

有关如何使用 netlink 的更多提示，请检查 iproute2 的来源，尤其是*ip/iproute.c*和*lib/libnetlink.c*模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:48:15.970

我已经设法解决了这个问题，事实证明我没有正确地将缓冲区转换回主函数上的 sockaddr_in6 ：

```
sin6 = (struct sockaddr_in6 *) (char *) sin6 + alignsa(sizeof(struct sockaddr_in6)); 
```

虽然它应该是：

```
sin6 = (struct sockaddr_in6 *) ((char *) sin6 + alignsa(sizeof(struct sockaddr_in6))); 
```

通过将所有内容投射到第一个 sockaddr_in6 投射的右侧，并从 rt_msghdr 结构中删除 RTA_NETMASK 请求，我设法返回了正确的网络掩码信息。

所以现在一切都很好。

# php - 在sql中获取除上个月之外的所有行

> ID：15126763
> 
> 赞同：0
> 
> 时间：2013-02-28T03:11:56.470
> 
> 标签：php, mysql, sql

这是一个查询，用于获取过去一个月的所有行。

```
$time = time() - 9676800;

$q = $this->db->query("
    select id
    from ipAddress
    where date > {$time}
"); 
```

但是我怎样才能调整这个查询来获取过去一个月的所有行呢？基本上我想最终删除超过 1 个月大的所有行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:15:03.470

只要您计算“上/上个月”的方法让您满意，那么它很简单：

`where date <= {$time}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:17:15.067

您可以使用 date_format、date_sub 函数来获取上个月的日期。在这里找到答案： [mysql last month date statement](https://stackoverflow.com/questions/1479745/mysql-last-month-date-statement) 和这里 [MySQL Query to calculate the Previous Month](https://stackoverflow.com/questions/1138190/mysql-query-to-calculate-the-previous-month)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:18:35.613

你可以这样做

```
$time = strtotime('-1 Month');

$q = $this->db->query("
    select id
    from ipAddress
    where `date` <= {$time}
"); 
```

但如果`date`是 TIMESTAMP、DATE 或 DATETIME 字符串，`2013-02-27 22:16:38`或者`2013-02-27`你需要类似的东西

```
$time = date('Y-m-d H:i:s', strtotime('-1 Month'));

$q = $this->db->query("
    select id
    from ipAddress
    where `date` <= '{$time}'
"); 
```

或者纯粹在 SQL 中

```
select id
from ipAddress
where `date` <= DATE_SUB(NOW(), INTERVAL 1 MONTH) 
```

如果我没记错的话，`date`是一个保留的 mysql 单词，所以在你的 sql 中使用反引号。

# sql - 为二进制可执行文件启用 sql 跟踪

> ID：15126768
> 
> 赞同：0
> 
> 时间：2013-02-28T03:12:55.410
> 
> 标签：sql, oracle, trace

我有一个连接到 Oracle 并执行一些 sql 的可执行文件。我想为此可执行文件启用跟踪。通常我们会使用 alter session sstatement 来启用跟踪，但会话是在可执行文件中创建的。如何为此启用跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:26:34.947

如果您无法更改可执行文件/其调用 SQL，则一种选择是创建一个设置跟踪的登录触发器。然后让可执行文件连接到数据库，它应该开始跟踪。

# ruby-on-rails - “bundle install --deployment”如何在 Rails 4 中工作

> ID：15126770
> 
> 赞同：2
> 
> 时间：2013-02-28T03:12:56.837
> 
> 标签：ruby-on-rails, ruby-on-rails-4

用于生产中的 gem 依赖管理，`bundle install --deployment`用于将所有 gem 隔离到`vendor/bundle`. 从 rails 4 开始，`vendor`目录已被删除。标志将如何`--deployment`工作？这个选项也会被删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:21:47.913

只有`vendor/plugins`被弃用。休息将继续工作。

# antlr - 删除警告而不是使用回溯选项

> ID：15126772
> 
> 赞同：1
> 
> 时间：2013-02-28T03:13:32.563
> 
> 标签：antlr, antlr3

我不知道如何在不使用 backtrack=true; 的情况下解决这个问题。

我的示例语法：

```
grammar Test;
options {
  language = Java;
  output = AST;
}

parse : expression 
      ;
expression : binaryExpression 
           | tupleExpression 
           ;

binaryExpression : addingExpression (('=='|'!='|'<='|'>='|'>'|'<') addingExpression)*
                 ;

addingExpression : multiplyingExpression (('+'|'-') multiplyingExpression)*
                 ;

multiplyingExpression : unaryExpression 
                        (('*'|'/'|'div'|'inter') unaryExpression)*
                      ;

unaryExpression: ('!'|'-')* primitiveElement;   

primitiveElement : literalExpression
                 | id
                 | sumExpression
                 | '(' expression ')'
                 ;  

sumExpression : 'sum'|'div'|'inter' expression
              ;

tupleExpression : ('<' expression '>' (',' '<' expression '>')*)
                ;

literalExpression : INT
                  ;              

id : IDENTIFIER
   ;

// L E X I C A L   R U L E S      

INT : DIGITS ;   

IDENTIFIER : LETTER (LETTER | DIGIT)*;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;
fragment LETTER : ('a'..'z' | 'A'..'Z' | '_') ;
fragment DIGITS: DIGIT+;
fragment DIGIT : '0'..'9'; 
```

有没有办法修复语法，这样就不会发生警告？假设我想根据情况选择这两种选择。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:21:21.720

注意：

```
sumExpression : 'sum'|'div'|'inter' expression
              ; 
```

被解释为：

```
sumExpression : 'sum'   /* nothing */
              | 'div'   /* nothing */
              | 'inter' expression
              ; 
```

因为 的`|`优先级较低。你可能想要：

```
sumExpression : ('sum'|'div'|'inter') expression
              ; 
```

> 假设我想根据情况选择这两种选择。

这是不可能的：你不能让解析器同时选择两个（或多个）选项，它只能选择一个。

我想你知道为什么语法是模棱两可的吗？如果不是，原因如下：`A div B`可以通过两种方式解析输入：

## 备选方案 1

```
unaryExpression 'div' unaryExpression
      |                     |
      A                     B 
```

## 备选方案 2

```
id sumExpression
 |       |   \
 A     'div'  B 
```

看起来你想要`'sum'`，`'div'`并且`'inter'`成为某种一元运算符，在这种情况下，你可以将它们合并到你的`unaryExpression`规则中：

```
unaryExpression : '!' unaryExpression
                | '-' unaryExpression
                | 'sum' unaryExpression
                | 'div' unaryExpression
                | 'inter' unaryExpression
                | primitiveElement
                ; 

primitiveElement : literalExpression
                 | id
                 | '(' expression ')'
                 ; 
```

这样你就没有歧义了。请注意，`A div B`现在将被解析为 a`multiplyingExpression`和`A div sum B`as：

```
multiplyingExpression
       /    \    
    'div'   unaryExpression
    /            / \ 
   A         'sum'  B 
```

# c# - 如何在 C# 中声明和显示变量？

> ID：15126773
> 
> 赞同：0
> 
> 时间：2013-02-28T03:13:53.310
> 
> 标签：c#

我有一个有两个构造函数的类库。第一个构造函数接受两个参数，第二个接受三个参数。下面是我的类库代码。编写代码比尝试解释它更容易。

```
public class Student
    {
        public string name;
        public string course;
        public MyDate bday;

        public Student(string name, string course)
        {
            this.name = name;
            this.course = course;
        }

        public Student(string name, string course, MyDate bday)
        {
            this.name = name;
            this.course = course;
            this.bday = bday;
        } 
```

MyDate 库有另一个构造函数，它接受三个参数，即生日的日期、月份和年份。现在我有一个包含 3 个列表框的表单，在第三个列表框上我将显示生日。我在代码中声明了生日（就像我在下面显示的那样）现在我在如何显示它时遇到了问题。

```
MyDate[] bd = new MyDate[5] {  new MyDate(29, 3, 1990),
                                       new MyDate(30, 1, 1988),
                                       new MyDate(9, 6, 1987),
                                       new MyDate(2, 4, 1989),
                                       new MyDate(17, 8, 1986),
        };
        Student[] s = new Student[5] { new Student("John", "BSCS"),
                                       new Student("Paul", "BSIT"),
                                       new Student("George", "BSCP"),
                                       new Student("Jane", "BSCS"),
                                       new Student("May", "BSIT")
        }; 
```

谁能告诉我我该怎么做？我试过这个*Student[] s = new Student[5] { new Student("John", "BSCS", bd[0])*等等，但它给了我错误。我知道这是一个初学者的问题，我是一个初学者。谢谢你。

编辑：初始化是在 form1.cs 中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:23:50.563

根据错误，您正在尝试使用另一个非静态字段初始化一个字段（成员数据）；你不能那样做。最简单的解决方法是将初始化代码移至构造函数。

所以你的代码是

```
partial class Form
{
   MyDate[] bd = ...;
   Student[] s;

   public Form()
   {
      InitializeComponent();

      s = ...;
   }
} 
```

* * *

您还应该链接您的`Student`构造函数，为什么您有自己的日期类而不是使用`System.DateTime`？您还应该使用自动属性而不是`public`字段。

```
public class Student
    {
        public string name { get; set; }
        public string course { get; set; }
        public DateTime bday { get; set; }

        public Student(string name, string course)
        {
            this.name = name;
            this.course = course;
        }

        public Student(string name, string course, DateTime bday)
        : this(name, course)
        {
            this.bday = bday;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:22:00.307

你可以[在这里看到：](http://forums.asp.net/t/1169107.aspx/1)

您应该在构造函数下设置字段初始值设定项。

```
class TestClass
{
    MyDate[] bd;
    Student[] s; 

    public TestClass()
    {
         bd = new MyDate[5] {  new MyDate(29, 3, 1990),
                                   new MyDate(30, 1, 1988),
                                   new MyDate(9, 6, 1987),
                                   new MyDate(2, 4, 1989),
                                   new MyDate(17, 8, 1986),
                            };

         s = new Student[5] { new Student("John", "BSCS"),
                                   new Student("Paul", "BSIT"),
                                   new Student("George", "BSCP"),
                                   new Student("Jane", "BSCS"),
                                   new Student("May", "BSIT")
                             };
    }
} 
```

> 基本上是说你需要在构造函数中设置这个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:22:39.120

这是做同样事情的一种方法：

```
 Student[] s = new Student[5];
    s[0] = new Student("John", "BSCS", bd[0]);
    s[1] = new Student("Bill", "BSCS", bd[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T04:33:13.547

我必须在这里遗漏一些东西，因为我无法重新创建这里讨论的错误。以下代码对我来说很好（.NET 4.0）

```
public class MyDate
{
    public MyDate(int date, int month, int year)
    {
        this.date = date;
        this.month = month;
        this.year = year;
    }

    public int date;
    public int month;
    public int year;
}

public class Student
{
    public string name;
    public string course;
    public MyDate bday;

    public Student(string name, string course)
    {
        this.name = name;
        this.course = course;
    }

    public Student(string name, string course, MyDate bday)
    {
        this.name = name;
        this.course = course;
        this.bday = bday;
    }
} 
```

..我能够像下面这样初始化对象..

```
 MyDate[] bd = new MyDate[5]
                          {
                              new MyDate(29, 3, 1990),
                              new MyDate(30, 1, 1988),
                              new MyDate(9, 6, 1987),
                              new MyDate(2, 4, 1989),
                              new MyDate(17, 8, 1986),
                          };

        Student[] s = new Student[5]
                          {
                              new Student("John", "BSCS", bd[0]),
                              new Student("Paul", "BSIT", bd[1]),
                              new Student("George", "BSCP", bd[2]),
                              new Student("Jane", "BSCS", bd[3]),
                              new Student("May", "BSIT", bd[4])
                          }; 
```

你到底什么时候收到这个错误？

# redirect - 在 apache2 上托管多个网站？

> ID：15126777
> 
> 赞同：0
> 
> 时间：2013-02-28T03:14:13.827
> 
> 标签：redirect, apache2, directory, virtualhost

我正在使用带有 Apache2 的 Ubuntu Server 来托管我的网站。

我有两个域，www.test.com 和 www.domain.com（不是实名）

在我的可用站点中，我有一个指向我的 www.test.com 域的默认值，然后我在里面为 www.domain.com 创建了一个：

```
<VirtualHost *:80>
ServerName www.domain.com
ServerAlias domain.com
DocumentRoot /var/www/domainfolder
<Directory />
Options +FollowSymLinks
AllowOverride all
</Directory>
</VirtualHost> 
```

现在该网站正常工作，我可以导航到它并使用它，但是由于我将它用于 wordpress，所以当我点击说 Admin CP 时，它会尝试导航到 www.domain.com/domainfolder/admin-cp/ 我'我只是不确定为什么它试图访问它存储的文件夹？

使用 .htaccess 只会给我一个内部服务器错误，因为它总是在一个目录下，这是代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !(.*)folder 
RewriteRule ^(.*)$ domainfolder/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:53:13.220

他们需要虚拟主机中的单独地址才能使用单独的目录。

给定 example.com 和文件夹一、二和三

您需要选择 1.example.com（一）、example.com/two 和 example.com/three 或 example.com（一）、two.example.com 和 three.example.com

1.  example.com（一）、two.com 和three.com

给定 DocumentRoot /www/subdomain/sub1 ServerName www.sub1.domain.tld ServerPath /sub1/

```
RewriteEngine On
RewriteRule ^(/sub1/.*) /www/subdomain$1 
```

您是否有类似于上面突出显示的部分的规则，重写是您获得所需漂亮地址的方式。

另外，确保启用了 apache mod_rewrite。

# hadoop - 关于通过 Kerberos 的 Hadoop 安全性

> ID：15126779
> 
> 赞同：4
> 
> 时间：2013-02-28T03:14:30.647
> 
> 标签：hadoop, kerberos

我正在尝试了解如何在 Hadoop 中实现 Kerberos。
我浏览了这个文档 [https://issues.apache.org/jira/browse/HADOOP-4487](https://issues.apache.org/jira/browse/HADOOP-4487)
我也浏览了基本的 Kerberos 东西（[https://www.youtube.com/watch?v=KD2Q-2ToloE](https://www.youtube.com/watch?v=KD2Q-2ToloE)）

1) Apache doc 使用**“Token”**一词，而 Internet 上的一般 doc 使用**“Ticket”一词**。

Token 和 Ticket 一样吗？

2) Apache 文档还“DataNodes 不对对其数据块的访问实施任何访问控制。

这使得未经授权的客户端可以读取数据块，只要她可以提供其块 ID。任何人都可以将任意数据块写入 DataNode。”

我对此的看法：-

我可以使用以下命令从文件路径中获取块 ID：-

```
hadoop@Studio-1555:/opt/hadoop/hadoop-1.0.2/bin$ ./hadoop fsck /hadoop/mapred/system/jobtracker.info -files -blocks 
```

FSCK 由 hadoop 从 /127.0.0.1 开始，路径 /hadoop/mapred/system/jobtracker.info 在 Mon Jul 09 06:57:14 EDT 2012 /hadoop/mapred/system/jobtracker.info 4 个字节，1 个块: OK 0\. blk_-9148080207111019586_1001 len=4 repl=1

由于我被授权访问这个文件 jobtracker.info，我能够使用上面的命令找到它的 blockID。
我认为如果我向这个块 ID 添加一些偏移量并写入该数据节点。

如何在将文件写入 HDFS 时明确提及 blockID。（命令是什么？）
将任意数据块写入 DataNodes 的任何其他方式？

请告诉我我的方法是否错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:00:55.647

> Token 和 Ticket 一样吗？

不会。票证由 Kerberos 发出，然后 Hadoop 中的服务器（NameNode 或 JobTracker）发出令牌以在 Hadoop 集群内提供身份验证。例如，Hadoop 不依赖 Kerberos 来验证正在运行的任务，而是使用基于 Kerberos 票据颁发的自己的令牌。

> Apache 文档还“DataNodes 不会对其数据块的访问执行任何访问控制。

我猜你是从通过 BlockAccessTokens提供访问控制（ [https://issues.apache.org/jira/browse/HADOOP-4359 ）的 JIRA 中获取的。](https://issues.apache.org/jira/browse/HADOOP-4359)假设它被打开——它应该在一个安全的集群中——没有这样的令牌，一个人无法访问数据节点上的块，这是由 NameNode 在通过 Kerberos 和 HDFS 自己的文件系统权限进行身份验证和授权后颁发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T03:22:13.330

> 如何访问Datanode并任意写入数据？

我不确定你在这里的意思。你的意思是当用户没有权限时？正如 Jacob 提到的，除非用户有权根据文件系统权限访问数据，否则您将不会获得有效的 BlockAccessToken，假设您拥有安全的 Hadoop 集群。

# c# - 不确定为什么我的多对多查找表在实体框架中引发 FK 引用错误

> ID：15126781
> 
> 赞同：0
> 
> 时间：2013-02-28T03:14:41.200
> 
> 标签：c#, sql-server, entity-framework, ef-code-first

为了简洁起见，我将把所有内容都精简一下。我有两个模型，它们将具有多对多关系。模型是用户和域。在这种情况下，域是一个大公司的某个领域，比如母公司，它的姐妹公司，也许还有一些小公司都在同一个伞下。这是 User.cs 模型

```
public class User
{
    public User()
    {
        Domains = new HashSet<Domain>();
    }
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public ICollection<Domain> Domains { get; set; }
} 
```

这是 Domain.cs 模型：

```
public class Domain
{
    public Domain()
    {
        Users = new HashSet<User>();
    }

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int DomainId { get; set; }
    public string DomainName { get; set; }
    public ICollection<User> Users { get; set; }
} 
```

然后我在我的 Context.cs 中做这个神奇的魔法

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasMany(c => c.Domains)
            .WithMany(p => p.Users)
            .Map(
            m =>
            {
                m.MapLeftKey("DomainId");
                m.MapRightKey("UserId");
                m.ToTable("DomainUsers");
            });
        base.OnModelCreating(modelBuilder);
    } 
```

这可以很好地创建 DomainUsers 表。使用 DomainID 和 UserID 制作两列表。

在我的种子数据中，我有一个用户（UserId = 1）和三个域（ID = 1、2、3）。在查找表上，我可以添加一条记录：

```
UserID | DomainId
1      |  1 
```

但是，如果我尝试添加另一个：

```
UserID | DomainId
1      |  1
1      |  2 
```

我收到以下错误：

```
The INSERT statement conflicted with the FOREIGN KEY constraint 
"FK_dbo.DomainUsers_dbo.Users_DomainId". Conflict occured in database "MyDatabase"
table "dbo.Users", column "UserId" 
```

我在这里错过了一些基本的数据库设计概念，还是与实体框架有其他关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:24:25.270

您的映射是向后的。来自[MSDN 博客文章](http://msdn.microsoft.com/en-us/data/hh134698.aspx)

```
> modelBuilder.Entity<Post>()
>                 .HasMany(p => p.Tags)
>                 .WithMany(t => t.Posts)
>                 .Map(mc =>
>                    {
>                        mc.ToTable("PostJoinTag");
>                        mc.MapLeftKey("PostId");
>                        mc.MapRightKey("TagId");
>                    }); 
```

> 在指定哪个是 MapLeftKey 和哪个是 MapRightKey 时需要小心。Left 将是您指向的第一个类的键，即 Post，而 right 是关系的另一端。如果你把这些倒过来，你的数据将被错误地存储，你的用户会很困惑。

尝试：

```
 modelBuilder.Entity<User>()
            .HasMany(c => c.Domains)
            .WithMany(p => p.Users)
            .Map(
            m =>
            {
                m.MapLeftKey("UserId");
                m.MapRightKey("DomainId");
                m.ToTable("DomainUsers");
            }); 
```

# c++ - 包含双打的向量

> ID：15126785
> 
> 赞同：-3
> 
> 时间：2013-02-28T03:15:12.283
> 
> 标签：c++

我需要计算向量内值的平均值、中位数和标准差。我可以对向量进行排序以找出中位数，但有没有更简单的方法来找到平均值和标准差而不是添加东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:30:44.097

你可以用 找到中位数`std::nth_element`。与（显然）流行的看法相反，这通常比排序更快，然后找到中间元素——通常是 O(N)（线性），而排序通常是 O(N log N)。

要添加均值的元素，您可以使用 ust `std::accumulate`，例如：

```
 double total = std::accumulate(std::begin(v), std::end(v), 0.0); 
```

[注意：根据您的编译器的年龄，您可能需要使用`v.begin()`and`v.end()`而不是`begin(v) and`end(v)`)。]

计算方差已在[前面的问题](https://stackoverflow.com/q/1721980/179910)中讨论过。标准偏差只是方差的平方根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:25:07.427

为了找到平均值，您只需将向量内容相加即可。您可以在不首先对向量进行实际排序的情况下找到中位数，但是用于计算未排序向量中位数的算法几乎肯定会比排序复杂得多。另外，我很确定，如果您计算在未排序的向量上找到中位数的时间，几乎可以肯定它会超过排序和提取中位数的总时间。（如果你只是为了技术挑战，我会为你写一个......）

由于您可能必须对向量进行排序，因此您可以在排序时计算平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:35:11.130

编辑：没有看到 C++ 标签！

如果您使用的是提供函数式编程工具的语言，则可以使用 + 函数对向量进行折叠，然后除以其长度以获得平均值。

对于 stddev，您可以使用 lambda : x -> (x - mean)^2 并用 + 折叠结果。

它的计算效率并不高，但它可能会节省很多开发人员的时间！

# wcf - 如何在 wcf rest 服务中添加全局错误处理

> ID：15126788
> 
> 赞同：3
> 
> 时间：2013-02-28T03:15:33.693
> 
> 标签：wcf, rest

在我的 Web 应用程序中，我使用 global.asax 中的 Application_Error 函数来记录所有异常，如下所示：

```
void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();

    while (ex.GetBaseException() != null)
    {
        ex = ex.GetBaseException();
    }

    log.writeError(ex.ToString());
} 
```

我在 WCF REST 服务中尝试过类似的方法，但没有成功。我将如何添加全局错误处理？我看到了[这篇文章](https://stackoverflow.com/questions/6875267/adding-global-error-handling-to-wcf-rest-service)，但我对实现 IServiceBehavior 是新手。我将在哪里添加上面的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T14:31:24.800

我用：

1) AppDomain.CurrentDomain.UnhandledException 事件

2) TaskScheduler.UnobservedTaskException 事件

3) 错误处理程序：

```
 public class ErrorHandler : IErrorHandler
    {
        public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
        {
            var faultException = new FaultException<string>("Server error: " + error.Format());
            var messageFault = faultException.CreateMessageFault();
            fault = Message.CreateMessage(version, messageFault, null);
        }

        public bool HandleError(Exception error)
        {
            return false;
            //return true; //if handled
        }
    }

[AttributeUsage(AttributeTargets.Class)]
public class ErrorHandlerBehavior : Attribute, IEndpointBehavior, IServiceBehavior
{
    public void Validate(ServiceEndpoint endpoint)
    {

    }

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {
        endpointDispatcher.ChannelDispatcher.ErrorHandlers.Add(new ErrorHandler()); 
    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {

    }

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {

    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers)
        {
            channelDispatcher.ErrorHandlers.Add(new ErrorHandler());
        }
    }
} 
```

这可以应用于整个服务实现。班级：

```
[ErrorHandlerBehavior]
    public class SubscriberInfoTaskService : {} 
```

或到端点：

```
var endpoint = Host.Description.Endpoints.FirstOrDefault();

//foreach (ChannelDispatcher channelDispatcher in Host.ChannelDispatchers) //ChannelDispatcherBase
//{                 
//    channelDispatcher.ErrorHandlers.Add(new ErrorHandler());
//}

endpoint.Behaviors.Add(new ErrorHandlerBehavior()); 
```

这里关于使用配置： http: [//www.steverb.com/post/2008/11/24/Useful-WCF-Behaviors-IErrorHandler.aspx](http://www.steverb.com/post/2008/11/24/Useful-WCF-Behaviors-IErrorHandler.aspx)

# html - 删除水平间距 使用列表样式类型：无

> ID：15126789
> 
> 赞同：6
> 
> 时间：2013-02-28T03:15:45.247
> 
> 标签：html, css

在[http://www.w3schools.com/cssref/playit.asp?filename=playcss_ol_list-style-type&preval=none](http://www.w3schools.com/cssref/playit.asp?filename=playcss_ol_list-style-type&preval=none)`list-style-type`上，为不同的值提供了一个很好的概述。

但是，对于 value `none`，它仍然为空列表符号保留了一些水平空间。有没有办法删除这个水平间距，使文本实际上向左移动，就好像它不是列表一样？我想`text-align:center`在列表项上使用，这种水平间距使它们没有真正居中。我需要使用`<ul>`，因为 CMS 以这种方式带来了它。

基本上，默认情况下在子弹上`list-style-type:none`做 a `visibility:hidden`，而我想`display:none`在子弹上实现。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T03:17:51.010

添加该空间的是浏览器默认样式，只需使用 CSS 重置来*重置*所有浏览器默认样式。大多数块元素都有一些默认的边距/填充 .. 即使`<body>`元素默认应用了 8px 的边距。

这是 Eric Meyer 重置的链接：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

只是为了自己看看，添加：

```
ol {
margin: 0;
padding: 0;
}
/* This would be declared in the above reset */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:38:18.740

确保在开始使用 CSS 之前添加浏览器重置样式。

你必须添加这个：

```
ol, li {
  margin: 0px;
  padding: 0px;
} 
```

对于这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-14T11:05:02.413

这些天我最近发现的一个更好的方法是`<ul>`将`display: contents;`. 因此 css 应该看起来像这样：

```
ul {
       list-style-type: none;
       display: contents;
   }

ul > li {

        padding: 0;
        margin: 0; 
        text-align: center;
   } 
```

这应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:17:57.370

添加

`margin:auto; float:none; display block;`到您的 ol 元素的 css 中，这将删除填充并在中心对齐元素

# .net - 如何读取并获取第一行后跟字符串“已发布”.net

> ID：15126791
> 
> 赞同：0
> 
> 时间：2013-02-28T03:16:14.220
> 
> 标签：.net, string

我想得到下一个第一行，后跟字符串“已发布”。这是我的代码：

```
Dim builder As New StringBuilder()
Dim reader As New StringReader(txtOCR.Text)
While True
    Dim line As String = reader.ReadLine()
    If line Is Nothing Then Exit While
    If Not line.ToLower().Contains("published") Then
        builder.AppendLine(line)
    End If
End While
txtOCR.Text = builder.ToString() 
```

此代码获取所有行后跟字符串“已发布”，但我只想获取下第一行..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:06:15.180

如果您想要包含“已发布”一词的行之后的行：

```
Dim found as Boolean = False
Dim line as String = reader.ReadLine()
While Not line is Nothing
    If Found Then
        builder.AppendLine(line)
        Exit While
    End If
    If line.ToLower().Contains("published") Then
        Found = True
    End If
    line = reader.ReadLine()
End While 
```

请原谅任何语法错误。我对VB不是很流利。

# javascript - 当参数功能齐全时，Window.open 创建新选项卡而不是弹出窗口

> ID：15126794
> 
> 赞同：1
> 
> 时间：2013-02-28T03:16:29.360
> 
> 标签：javascript

我已经看到很多问题询问如何使用 window.open 打开选项卡，但我想要相反。单击链接时，我想要一个功能齐全的新窗口（不会丢失其地址栏或任何内容），而不是新选项卡。

我一直在使用这个：

```
window.open('http://example.com', 'blah', 'titlebar=1,toolbar=1,scrollbars=1,location=1,status=1,menubar=1,resizable=1,width=800,height=600,top=10,left=10'); 
```

在 FF 我得到新窗口作为弹出窗口。在 Chrome（和 IE9）中，它作为新标签打开。

如果我设置状态 = 0，我会弹出窗口，但它不是 chrome 中的普通窗口（但在 IE9 中）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:49:46.920

没有办法告诉 JS 或 HTML 动作在新选项卡和新窗口中打开链接。它完全取决于浏览器。

欺骗 SO [target="_blank" 在 IE9 中打开一个新窗口，而不是一个新选项卡](https://stackoverflow.com/questions/6661696)

IE 设置：[http ://www.techrepublic.com/article/set-internet-explorer-to-open-links-in-a-new-window-automatically/5222050](http://www.techrepublic.com/article/set-internet-explorer-to-open-links-in-a-new-window-automatically/5222050)

超级用户的 Chrome 设置：[https ://superuser.com/questions/166479](https://superuser.com/questions/166479)

Firefox 对 mozilla 支持的设置：http: [//support.mozilla.org/en-US/kb/tab-preferences-and-settings](http://support.mozilla.org/en-US/kb/tab-preferences-and-settings)

# php - PHP - 在 $_SESSION 数组中找不到现有字符串值

> ID：15126796
> 
> 赞同：1
> 
> 时间：2013-02-28T03:16:39.110
> 
> 标签：php, mysql

我之前问过这个问题，但没有得到回应，所以我删除了最后一个问题，并简化/澄清了问题，并重新发布

* * *

我有一个漫画网站...我正在开发一个 SO 风格的标记系统。用户可以选择一个或多个标签来显示所有相关的漫画。

为了记住用户的选择，我将它们存储在 $_SESSION 数组中。

**我遇到的问题**是，在用户选择后存储在 $_SESSION['tagnames'] 数组中的字符串之一“业务”在数组中找不到...

它应该工作的方式是用户选择一个标签，然后取消选择它，他们再次单击它......所以我检查字符串是否在 $_SESSION 中......如果是，取消设置它......这里是一个片段：

```
 //var_dump shows these are both set fine when a user clicks on the tag they want
    $tagid = (isset($_GET['tagid']) ? ($_GET['tagid']) : null); 
    $tagname = (isset($_GET['tagname']) ? ($_GET['tagname']) : null); 

    ...

//Tag IDS are added and removed without issue:
    //if tag id exists in $_SESSION['tags'] array, remove it 

    if ($key = array_search($tagid, $_SESSION['tagids'])) {
        unset($_SESSION['tagids'][$key]);
    }
    else {
        $_SESSION['tagids'][] = $tagid;
    }

    ...

//but one of the tag names, 'business', is not being removed... and is actually added again even when I press F5 to refresh

    if ($key =  array_search($tagname, $_SESSION['tagname'])) {
        unset($_SESSION['tagname'][$key]);
    }
    else {
        $_SESSION['tagname'][] = $tagname;
    } 
```

这是`var_dump`sql 语句的一个：它正确地显示正在根据选择的标记 id 更改的查询。

![在此处输入图像描述](../Images/d08eeb32d76ef489531ba4d98efc3b5a.png)

这是其中的一个`var_dump`……`$_SESSION['tagname']`你可以看到它识别出标签 2 和 3（差异和相似之处）何时已经添加（我曾经`array_search()`检查过），但它没有找到 tagid 1，'business'，即使它是显然被添加了好几次。

![在此处输入图像描述](../Images/27a5fdc0662f4c1185a2f517d2384140.png)

**这是将所选标签名称返回给用户的函数：**

```
function getSelectedTags() {

 global $tagid, $tagname;

    if ($key =  array_search($tagname, $_SESSION['tagname'])) {
        unset($_SESSION['tagname'][$key]);
    }
    else {
        $_SESSION['tagname'][] = $tagname;
    }

    var_dump($_SESSION['tagname']);

    foreach ($_SESSION['tagname'] as $tagname) { 
        echo '<span class="tags">' . $tagname . '</span>';
    }
} 
```

任何想法为什么标记名称“业务”是唯一导致问题的原因？

即使在我销毁会话后，按 F5 刷新也会自动将标记名“业务”放入`$_SESSION['tagname'] array.`

* * *

编辑：更全面的代码：

**Homepage.php：**用户单击从 getDBTags() 返回的标签以将标签添加到 imageDisplay.php 上的 $_SESSION 数组

```
<h5>Tags</h5>
<?php echo getDBTags(); ?>
<br/>
<p>Your tags:</p>
<?php echo getSelectedTags(); ?> 
```

**imageDisplay.php：**负责处理图像如何过滤和显示...

*getDBTags()*从数据库中返回标签选择，以便用户可以点击它们：

```
function getDBTags() {
include 'dbconnect.php';

global $cat;

$sql = "SELECT tagid, tagname FROM tags";

$query = $mysqli->query($sql);

while ($row = $query->fetch_assoc()) {
    echo '<span class="tags"><a href=".?action=homepage&cat='.$cat.'&tagid='.$row['tagid'].'&tagname='.$row['tagname'].'">'.$row['tagname'].'</a></span>';
}
mysqli_close($mysqli);
} 
```

*getFilters()*决定如何通过动态查询过滤图像，然后将查询发送到 pagination()，它在页面上显示过滤后的图像。

```
function getFilters() {
include 'dbconnect.php';

global $cat, $site, $table, $tagid;

$order = " ORDER BY date DESC";

//if tag id exists in $_SESSION['tags'] array, remove it 
if ($key = array_search($tagid, $_SESSION['tagids'])) {
    unset($_SESSION['tagids'][$key]);
}
//if it doesn't, add it
else {
    $_SESSION['tagids'][] = $tagid;
}
//var_dump($_SESSION['tagids']);

if ($cat != null) $catquery = " AND catidFK = $cat";
else $catquery = null;

$sql = 
 "SELECT c.*, t.* 
 FROM comics c 
 INNER JOIN comictags ct ON (c.id = ct.comicID)
 INNER JOIN tags t ON (t.tagid = ct.tagID)
 WHERE ct.tagID IN ('" . implode(', ', $_SESSION['tagids']). "')
". $catquery ." " . $order;

if (!$mysqli->query($sql)) printf("<br /><b>Error:</b> %s\n", $mysqli->error); 

$query = $mysqli->query($sql);

var_dump($sql);
mysqli_close($mysqli);

return $query;
} 
```

*getSelectedTags()*将选定的标签标题返回给用户，以便他们可以看到他们选择的内容。如果他们再次单击一个标签（从上面的*getDBTags()*返回），它将从 $_SESSION['tagname'] 中删除该标签。这是问题区域：

```
function getSelectedTags() {

global $tagid, $tagname;
if ($key =  array_search($tagname, $_SESSION['tagname'])) {
    unset($_SESSION['tagname'][$key]);
}
else {
    $_SESSION['tagname'][] = $tagname;
}
//var_dump($key =  array_search($tagname, $_SESSION['tagname']));
var_dump($_SESSION['tagname']);

foreach ($_SESSION['tagname'] as $tagname) { 
    echo '<span class="tags">' . $tagname . '</span>';
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:56:30.330

有三个突出的问题（两个突出，一个非常微妙）。

### 1.只打开一个DB连接并离开它：

首先，不要在函数中打开和关闭连接，而是`$mysqli`在脚本开始时执行一次并保持打开状态。您需要修改您的函数以接受`$mysqli`作为参数（首选）或通过`global $mysqli;`（非首选）访问它。无需调用`mysqli_close()`，因为这是隐式完成的。

在您的`getFilters()`函数中，您实际上是在关闭 MySQLi 资源`$mysqli`，然后尝试查找结果资源`return $query;`在哪里`$query`。这样做会使结果资源无用。

```
// Pass $mysqli as a parameter
function getFilters($mysqli) {
  //...
  // Do alll your stuff...
  // And do not call mysqli_close()!
  return $query
} 
```

### 2\. 使用严格的比较和测试`FALSE`with `array_search()`：

使用时`array_search()`，如果您的结果是数组中 key 处的第一个元素，则`[0]`周围`if ()`条件会将其视为虚假返回，而不是应有的肯定结果。因此，位置处的标签`[0]`将被重复添加而不是删除。这将需要在几个地方修复......

```
// First get the key, which is an int or FALSE
$key = array_search($tagid, $_SESSION['tagids']);
// Unset if it is FALSE by strict comparison
if ($key !== FALSE) { 
  unset($_SESSION['tagids'][$key]); 
} 
else {
   $_SESSION['tagids'][] = $tagid;
} 
```

### 3\. 全局变量`$tagname`被 a 破坏了`foreach`：

您已访问全局`$tagname`in `getSelectedTags()`。但是在那个函数中，你有一个`foreach`循环：

```
foreach ($_SESSION['tagname'] as $tagname) 
```

当`$tagname`在那里用作循环的变量时，它实际上是`$tagname`在每次迭代时覆盖全局。您需要将其更改为不同的值，或者无论何时调用`getSelectedTags()`，`$tagname`全局都将成为最后一个标签的任何内容`$_SESSION['tagname']`，无一例外。

```
// use a different varname in the loop
foreach ($_SESSION['tagname'] as $tn) {
  // Also calling htmlspecialchars to escape here. Do this in any variable to HTML output...
  echo '<span class="tags">' . htmlspecialchars($tn) . '</span>';
} 
```

# iphone - 我正在努力比较我制作的 UIcolor

> ID：15126797
> 
> 赞同：1
> 
> 时间：2013-02-28T03:16:46.723
> 
> 标签：iphone, ios, objective-c, ipad, uicolor

我已经构建了一组自定义颜色以在我的应用程序中使用，例如石灰

```
mylimeColor = [UIColor colorWithRed:0.502 green:1.000 blue:0.000 alpha:1.000]; 
```

将某些内容设置为这种颜色效果很好，但是当我想根据视图具有的自定义颜色更改某些内容时，我在应用程序中会遇到困难。我使用以下没有问题：

```
if (bgColor == [UIColor redColor]) {
// do something
} 
```

但是一旦我开始使用自己的颜色，这就会中断。

```
if (bgColor == myredColor) {
// do something
} 
```

我可以检查 NSLog 中的背景颜色，它看起来完全符合我的预期。

有没有另一种方法可以让我找出某些东西（UIView、UITextFeild 等）的背景是什么？我在网上查看过，但似乎只是在寻找设置我的自定义颜色的帮助，这对我来说不是问题。

我的下一步是为每种颜色设置一个整数到一个特定的数字并检查它，但似乎比较颜色本身是一种更好的方法。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T03:21:33.037

`UIColor`是一类。使用`isEqual:`比较颜色。

# javascript - js循环排序数字

> ID：15126798
> 
> 赞同：0
> 
> 时间：2013-02-28T03:17:03.400
> 
> 标签：javascript, jquery, sorting, for-loop

我有一个表格，我希望人们填写他们的出生年份。您只能在 18 岁以上的情况下申请，所以在出生年份字段中，我希望最小年龄为 18 岁。我已按如下所示进行了此操作，但是我想将最近一年的数字排在最前面，最老的一年排在底部。目前我先显示 1913，但我想先显示 1994。这是我的代码

```
<div id="my-container"></div>

<script>
      var d = new Date();
      var y = d.getFullYear();
      var selectList = "<select>";
      for (var x = (y-100); x < (y - 18); x++) {
          selectList += "<option>" + x + "</option>";
      }
      selectList += "</select>";
      $('#my-container').html(selectList);
      </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:22:33.247

正如[尼罗所说](https://stackoverflow.com/questions/15126798/js-for-loop-sort-numbers/15126843#comment21290540_15126798)，

```
var d = new Date();
var y = d.getFullYear();
var selectList = "<select>";
for (var x = y-18; x >= y-100; x--) {
    selectList += "<option>" + x + "</option>";
}
selectList += "</select>";
$('#my-container').html(selectList); 
```

[http://jsfiddle.net/samliew/WzwKw/](http://jsfiddle.net/samliew/WzwKw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:22:08.180

试试这个

```
 <script>
  var d = new Date();
  var y = d.getFullYear();
  var selectList = "<select>";
  for (var x = y-18; x > y - 100; x--) {
      selectList += "<option>" + x + "</option>";
  }
  selectList += "</select>";
  $('#my-container').html(selectList);
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T04:54:22.090

```
<script>
    $( document ).ready( function() {
    var d = new Date();
    var y = d.getFullYear();
    var selectList = "<select>";
    for (var x = (y-18); x >= (y - 100); x--) {
      selectList += "<option>" + x + "</option>";
    }
    selectList += "</select>";
    $('#my-container').html(selectList);
    });
</script> 
```

请试试这个。

# java - 错误消息“蓝牙不可用。” 老实说不确定原因

> ID：15126803
> 
> 赞同：1
> 
> 时间：2013-02-28T03:17:52.640
> 
> 标签：java, android, file, bluetooth, forceclose

我收到错误消息“从 Eclipse 或设备本身运行我的最新应用程序时，蓝牙不可用。有问题的设备是两部启用了蓝牙的 Galaxy Nexus 手机（CDMA/LTE）。一个正在使用 Android 运行 AOKP 4.2.1，另一个是现货，安卓4.1.1。

我曾相信我对其他蓝牙问题的独特解决方案需要硬编码的 MAC 地址可能是问题，因为这些设备没有外部存储，而是将内部存储安装到 /mnt/sdcard。但是，我尝试硬编码 mac 地址而不是从文件中读取它，但无济于事。第一个链接是我的 MainActivity，第二个链接是我的 Manifest.xml（我对蓝牙和存储 (r/w) 有适当的权限。我将在第三个链接中附上 logcat。

主要活动：

```
package com.hyperspacecg.thermolitics;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.RadioGroup;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    public static final String PREFS_NAME = "ThermolyticsPrefsFile";
    String Packet = null;
    private BluetoothAdapter mBluetoothAdapter = null;
    private BluetoothSocket btSocket = null;
    private OutputStream outStream = null;

    SeekBar seekbarTemp, seekbarBlower;
    TextView valueTemp, valueBlower;
    RadioGroup ventilation;
    private static int Blower = 0;
    private static int Vent = 255;
    private static int Temp = 0;
    private static int Defrost = 0;
    private static int AC = 0;

private static final UUID MY_UUID = UUID
        .fromString("00001101-0000-1000-8000-00805F9B34FB");

// hardcoded MAC address
private static String address = null;
private BufferedReader buf;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);

    valueTemp = (TextView) findViewById(R.id.textViewTemp);
    seekbarTemp = (SeekBar) findViewById(R.id.seekBarTemp);
    valueBlower = (TextView) findViewById(R.id.textViewBlower);
    seekbarBlower = (SeekBar) findViewById(R.id.seekBarBlower);
    ventilation = (RadioGroup) findViewById(R.id.radioGroup1);

    BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available.",
                Toast.LENGTH_LONG).show();
        finish();
        return;
    }

    if (!mBluetoothAdapter.isEnabled()) {
        Toast.makeText(this,
                "Please enable your BT and re-run this program.",
                Toast.LENGTH_LONG).show();
        finish();
        return;
    }

    int sbar_blower_position = settings.getInt("seekbar_blower_pref", 0);
    seekbarBlower.setProgress(sbar_blower_position);
    valueBlower.setText("Blower Power: " + sbar_blower_position);
    Blower = sbar_blower_position;

    int sbar_temp_position = settings.getInt("seekbar_temp_pref", 0);
    seekbarTemp.setProgress(sbar_temp_position);
    valueTemp.setText("Temperature: " + sbar_temp_position);
    Temp = sbar_temp_position;

    Vent = ventilation.indexOfChild(findViewById(ventilation.getCheckedRadioButtonId()));

    seekbarBlower.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            valueBlower.setText("Blower Power: " + progress);
            Blower = progress;
            packet(Blower, Temp, Vent, AC, Defrost);

        }
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }
    });

    seekbarTemp.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            valueTemp.setText("Temperature:" + progress);

            Temp = progress;
            packet(Blower, Temp, Vent, AC, Defrost);

        }
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }
    });    
}

@Override
public void onStart() {
    super.onStart();
}

@Override
public void onResume() {
    super.onResume();
    try{
           File f = new File(Environment.getExternalStorageDirectory()+"/therm.txt");
           FileInputStream fileIS = new FileInputStream(f);
           buf = new BufferedReader(new InputStreamReader(fileIS));
           String readString = new String(); 
           //just reading each line and pass it on the debugger
           while((readString = buf.readLine())!= null){
              address = readString;
           }
        } catch (FileNotFoundException e) {
           e.printStackTrace();
        } catch (IOException e){
           e.printStackTrace();
        }

    // When this returns, it will 'know' about the server,
    // via it's MAC address.
    address = "00:16:68:2B:40:90";
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);

    try {
        btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) {
    }

    mBluetoothAdapter.cancelDiscovery();

    try {
        btSocket.connect();
    } catch (IOException e) {
        try {
            btSocket.close();
        } catch (IOException e2) {
        }
    }

    // Create a data stream so we can talk to server.
    try {
        outStream = btSocket.getOutputStream();
    } catch (IOException e) {
    }

    packet(Blower, Temp, Vent, AC, Defrost);

    byte[] msgBuffer = Packet.getBytes();
    try {
        outStream.write(msgBuffer);
        Toast.makeText(this, "BT successfully connected.",
                Toast.LENGTH_LONG).show();
    } catch (IOException e) {
    }
}

    public void onClickDefrost(View v) throws IOException 
        {
        if(Defrost == 1)
            {
            Defrost = 0;
            }
        else
            {
            Defrost = 1;
            }       
        packet(Blower, Temp, Vent, AC, Defrost);
        byte[] msgBuffer = Packet.getBytes();
        try 
            {
            outStream.write(msgBuffer);
            }   
        catch (IOException e) 
            {
            }
        }

    public void onClickAC(View v) throws IOException 
    {
    if(AC == 1)
        {
        AC = 0;
        }
    else
        {
        AC = 1;
        }       
    packet(Blower, Temp, Vent, AC, Defrost);
    byte[] msgBuffer = Packet.getBytes();
    try 
        {
        outStream.write(msgBuffer);
        }   
    catch (IOException e) 
        {
        }
    }

    @Override
    public void onPause() {
        super.onPause();

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt("seekbar_blower_pref", Blower);
        editor.putInt("seekbar_temp_pref", Temp);
        editor.commit();

        if (outStream != null) {
            try {
                outStream.flush();
            } catch (IOException e) {
            }
        }

        try {
            btSocket.close();
        } catch (IOException e2) {
        }
        }

@Override
public void onStop() {
    super.onStop();
}

@Override
public void onDestroy() {
    super.onDestroy();
    // Stop the Bluetooth chat services

}

public String packet(int Blower, int Temp, int Vent, int AC,int Defrost) {
    Blower = Blower * 4;
    Temp = Temp * 4;
    Packet = "<HMG:" + Blower + ":" + Temp + ":" + Vent + ":" + AC + ":" + Defrost + ">";
        return Packet;
    }   
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hyperspacecg.thermolitics"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.hyperspacecg.thermolitics.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

日志猫：

```
02-27 21:59:54.572: D/dalvikvm(8472): Late-enabling CheckJNI
02-27 21:59:54.689: E/Trace(8472): error opening trace file: No such file or directory (2)
02-27 21:59:55.041: D/dalvikvm(8472): GC_CONCURRENT freed 81K, 10% free 2696K/2964K, paused 2ms+6ms, total 115ms
02-27 21:59:55.236: D/dalvikvm(8472): GC_CONCURRENT freed 18K, 7% free 3078K/3308K, paused 12ms+12ms, total 69ms 
```

# php - 这种粗略的 PHP 验证方法有什么问题？

> ID：15126808
> 
> 赞同：0
> 
> 时间：2013-02-28T03:18:26.440
> 
> 标签：php, verification

所以，这是我的代码：

```
$login_user_name = $_POST['login-user-name'];
//salt is declared earlier
$login_user_pword = super_encrypt($_POST['login-user-pword'], $login_salt);     

$login_veri_query = mysql_query("SELECT * FROM zebra_users WHERE username='".$login_user_name."'");

$login_veri_numrows = mysql_num_rows($login_veri_query);

if ($login_veri_numrows != 0) {
    while ($value = mysql_fetch_array($login_veri_query)) {
        if ($value['password'] == $login_user_pword) {
            $login_error .= '<p class="success">Logged in Successfully!</p><br/>';
            $main_error .= '<p class="success">Logged in Successfully!</p><br/>';
            $login_good = true;
            $login_error .= '<script type="text/javascript"> <!-- window.location = "main.php" //--> </script>';
        } else {
            $login_error .= '<p class="warning">Incorrect password, try again.</p><br>';
        }
    }
}
} 
```

如果有一个用户名为“user”，密码为“pword”，并且这些凭据被输入到表单中，“验证”方法将声称密码不正确。

这里有什么问题？

另外，我知道这不是一个很好的登录方式，但我将其用作占位符，直到我使用 cookie，但我不这样做'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:56:52.700

首先，它很容易受到 sql 注入的影响，因为您没有转义用户名。

其次，您应该将散列密码发送到数据库，并且它应该返回任何用户名和密码散列匹配的用户。这样一来，人们就不能仅仅通过输入错误的密码来强制数据库发送密码哈希。

第三，如果数据库没有返回任何行会发生什么？密码失败的操作应与用户名失败的操作相同。

第四，您应该一直使用 === 来比较密码（尽管您根本不应该使用这种方法）。您不希望空密码匹配 FALSE 或类似的东西。另外，它只是节省资源。

# c++ - boost测试单元不能调用mpi函数

> ID：15126814
> 
> 赞同：1
> 
> 时间：2013-02-28T03:18:57.950
> 
> 标签：c++, testing, mpi, boost-test

我已经仔细查看过，但找不到任何关于这个问题的参考。

我编写了一个 c++ 程序，我正在使用 boost/unit 进行测试。串行版本工作正常，单元测试工作正常。
现在，我通过一个函数使程序并行化，该函数与 MPI 进行了令人尴尬的并行工作。如果写下我自己的调用并行函数的测试——让我们称之为 parafunction——它运行良好，MPI 运行正常。
编译是用 mpic++ 完成的，我使用 mpixec 来运行程序。

但是，如果我在 boost 测试用例中调用 parafunction，MPI 就会出错，测试会被多次启动，并且在多次`MPI::Init`调用时进程会崩溃。这是我得到的错误示例：

> 在调用 MPI_FINALIZE 之后调用 MPI_comm_size() 函数。
> 
> MPI 标准不允许这样做。
> 
> 您的 MPI 作业现在将中止。

我的测试用例在 test_unit 上，由 master_test_suite 自动处理。正如我所说，没有并行化它工作得很好。

辅助函数调用`MPI::Init`and `MPI::Finalize`，并且文件的其他函数不应该做任何与 MPI 相关的事情。

有没有人遇到过类似的问题？

我的测试运行时间很长，因此我真的可以使用我的程序的并行版本！

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:43:17.720

一个既初始化又完成的函数只能被调用一次，因为 MPI 在程序的生命周期内只能被初始化一次，并且只能被完成一次。为防止多次初始化调用，请将调用置于`MPI_Init()`或`MPI_Init_thread()`条件中：

```
int already_initialised;

MPI_Initialized(&already_initialised);
if (!already_initialised)
   MPI_Init(NULL, NULL); 
```

至于最终确定，它应该移到你的函数之外，`atexit(3)`如果你不想用 MPI 调用污染外部范围，可能在处理程序中。例如：

```
void finalise_mpi(void)
{
   int already_finalised;

   MPI_Finalized(&already_finalised);
   if (!already_finalised)
      MPI_Finalize();
}

...
atexit(finalise_mpi);
... 
```

该`atexit()`调用可能是初始化代码的一部分，例如：

```
int already_initialised;

MPI_Initialized(&already_initialised);
if (!already_initialised)
{
   MPI_Init(NULL, NULL);
   atexit(finalise_mpi);
} 
```

`atexit(3)`如果 MPI 已经初始化，这将不会安装处理程序。基本思想是，如果 MPI 在进入函数时被初始化，那么这将意味着它`MPI_Init()`在外部范围内被调用，并且人们通常会期望它`MPI_Finalize()`也在那里被调用。

如果我是你，我会将 MPI 初始化和终结移出并行处理功能。正确的调用顺序是初始化 MPI，运行测试，然后完成 MPI。

我在上面的文本中使用了 C 绑定，因为 C++ 绑定在 MPI-2.2 中被弃用，然后在 MPI-3.0 中被删除。

# linux - 在文件中查找然后使用 Linux 移动该文件？

> ID：15126821
> 
> 赞同：0
> 
> 时间：2013-02-28T03:19:58.233
> 
> 标签：linux

我希望能够找到包含某些字符串的文件并将该文件列表移动到目录 X

我可以使用此命令查找文件

```
find . -iname 'commaus*' | xargs grep '>24901<' -sl 
```

和这个命令来移动文件

```
mv * /home/user/scripts/xslt 
```

但是有没有办法组合这些命令以便移动找到的文件。

我见过类似的联合查找/操作命令，例如

```
find /home/user -name property_images -ok rm -f {} \; 
```

但遵循此结构返回错误

```
find . -iname 'commaus*' | xargs grep '>24901<' -sl -ok mv {} /home/user/scripts/xslt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:27:21.290

您可以通过将其包装在 for 循环中来做到这一点

```
for i in `find /path/to/search -iname 'optionalfilename' -exec grep -H -m1 '>24901<' {} \; | awk -F: '{print $1}'
do
   mv $i /path/to/new/location
done 
```

如果文件名包含空格或冒号，这将无法按预期工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T03:30:10.643

使用循环。在这种情况下，请尝试：

```
for i in `find . -iname 'commaus*' | xargs grep '>24901<' -sl`; do mv "$i" /home/user/scripts/xslt/; done 
```

非常hackish，但它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T03:49:34.673

也可以尝试（无循环）：

```
find . -iname 'commaus*' | grep '>24901<' -sl -ok | xargs mv -t /home/user/scripts/xslt 
```

# grammar - 创建“上下文无关语法”的提示

> ID：15126824
> 
> 赞同：14
> 
> 时间：2013-02-28T03:20:21.237
> 
> 标签：grammar, context-free-grammar, lexical-analysis, formal-languages

我是 CFG 的新手，
有人可以给我创建生成某些语言的 CFG 的提示吗

例如

> `L = {a^m b^n | m >= n}`

我得到的是：

> `S[o] -> a | aS[o] | aS[1] | e`
> `S[1] -> b | bS[1] | e`

但我认为这个区域是错误的，因为**`b`**'s 的数量有可能大于**`a`**'s。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-28T08:06:33.467

## 如何用示例 a ^m b ^(n编写 CFG)

> L = {a ^m b ^n | m >= n}。

**语言描述：** a ^m b ^n由**`a`**后跟**`b`**其中 number of**`a`**等于或大于 number of 组成**`b`**。

一些示例字符串：`{^, a, aa, aab, aabb, aaaab, ab......}`

所以总是有一对一**`a`**的，**`b`**但额外**`a`** 的也是可能的。感染字符串只能包含**`a`**。还要注意**`^`**null 是语言的成员，因为在**`^`** `NumberOf(a) = NumberOf(b) = 0`

> 如何编写一个接受由字符串 a ^m b ^n形成的语言的语法？

在语法中，应该有这样的规则，如果你添加一个**`b`**符号，你也会添加一个**`a`**符号。

这可以通过以下方式完成：

```
 S --> aSb 
```

但这是不完整的，因为我们需要一个规则来生成额外`a`的 s：

```
 A --> aA | a 
```

将两个产生式规则组合成一个语法**CFG。**

```
 S --> aSb | A
   A --> aA  | a 
```

因此，您可以生成由**`a`**also**`a`**和**`b`**in (a ^m b ^n ) 模式组成的任何字符串。

但是在上面的语法中，**没有**办法生成**`^`**字符串。

所以，像这样改变这个语法：

```
 S --> B   | ^
   B --> aBb | A
   A --> aA  | a 
```

该文法可以生成 {a ^m b ^n | m >= n} 语言。

**注意**：要生成`^`空字符串，我在语法中添加了一个额外的第一步`S--> B | ^`，因此您可以添加`^`符号**`a`**和字符串**`b`**。（*现在`B`扮演`S`从以前的语法生成相等数量的**`a`**和**`b`***的角色）

**编辑：**感谢@Andy Hayden
您还可以为相同的语言编写等效语法 {a ^m b ^n | m >= n}：

```
 S --> aSb | A
   A --> aA | ^ 
```

注意：这里`A --> aA | ^`可以生成零个或任意数量的**`a`**. 这应该比我的语法更可取，因为它会为相同的字符串生成一个更小的解析树。
（*由于高效解析，高度优选较小*）

以下**提示**可能有助于为正式语言编写语法：

> *   你要清楚它所描述的语言（含义/模式）。
> *   您可以记住一些基本问题的解决方案（您可以编写新语法的想法）。
> *   您可以为基本语言编写规则，就像[我在这个示例中为 RE 编写的那样编写 Right-Linear-Grammmar](https://stackoverflow.com/questions/13816439/left-linear-and-right-linear-grammars/13945932#13945932)。这些规则将帮助您编写新语言语法。
> *   一种不同的方法是首先绘制*自动机*，然后将自动机转换为语法。我们有预定义的技术，可以从任何类型的形式语言的自动机编写语法。
> *   就像一个优秀的程序员通过阅读别人的代码来学习一样，同样地，一个人也可以学习为形式语言编写语法。

[你写的语法也是错误的。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-26T15:53:39.190

您想为以下语言创建语法

```
 L= {an bm | m>=n } 
```

这意味着“b”的数量应该大于或等于“a”的数量，或者您可以说对于每个“b”最多可以有一个“a”。不是其他方式。

这是该语言的语法

```
 S-> aSb | Sb | b | ab 
```

在这个语法中，每个“a”都有一个“b”。但是可以在不生成任何“a”的情况下生成 b。

您还可以尝试以下语言：

```
 L1= {an bm | m > n }
           L2= {an bm | m >= 2n }
           L3= {an bm | 2m >= n }
           L4= {an bm | m != n } 
```

我正在为每种语言提供语法。

对于 L1

```
 S-> aSb | Sb | b 
```

对于 L2

```
 S-> aSbb | Sb | abb 
```

对于 L3

```
 S-> AASb | Sb | aab | ab | b 
```

对于 L4

```
 S-> S1 | S2
        S1-> aS1b | S1b | b
        S2-> aS2b | aS2 | a 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-18T18:00:19.010

最小变量：S -> a S b | 一个 S | e

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T21:12:31.783

变量更少：

S -> a S b | 一个 S | ab | e

# windows - 我将如何启用未聚焦的窗口以仍接收事件侦听器？

> ID：15126825
> 
> 赞同：0
> 
> 时间：2013-02-28T03:20:43.123
> 
> 标签：windows, client-server, keyboard-shortcuts

我正在开发一个客户端-服务器应用程序，服务器将根据单击的按钮触发键盘的所有事件。它也仅限于键盘。

我正在为我的左手制作一个自定义键盘。一个朋友只有一只手，所以这对他有好处。他们的键盘将是某种触摸设备，可能是大型平板电脑，它将通过网络和端口连接与我的服务器建立连接。

我的服务器应用程序（用任何东西编写，python、C、C++、java，我知道很多语言）将接受一个标志，然后执行一组命令。

基本上我想做类似的事情：

```
if(key_pressed == 'f1')
  execute the 'F1' key in focused window. 
```

服务器应用程序不集中，将在屏幕上隐藏或最小化。

有没有办法在不构建自定义驱动程序或其他东西的情况下做到这一点？

**编辑：**

客户端就像有一个键盘服务器就像驱动程序。我希望服务器能够启动一些东西，就好像它是一个被操纵的字符设备一样。我正在研究的事情是我正在阅读一篇或 2 篇文章，其中说只有聚焦的应用程序才能接收新闻，这很好，我希望它们在聚焦窗口中执行，但在后台，是一个将捕获然后像上面的 key_pressed 一样执行想要的信号

# ios - 如何延迟 iOS 键盘弹出？

> ID：15126828
> 
> 赞同：0
> 
> 时间：2013-02-28T03:20:48.530
> 
> 标签：ios, uiscrollview, keyboard

所以......当键盘弹出时，我让我的 UIScrollView 向上移动，这很有效......除了它们 UIScrollView 和键盘不同步......首先，键盘弹出，然后是 UIScrollView。

我知道有一种方法可以延迟键盘，以便在视图向上滚动的同时显示出来；我怎么做？？我在 viewDidLoad 中试过这个：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil]; 
```

...我也有这个：

```
- (void)keyboardWillShow:(NSNotification *)notification
{
    [NSTimer scheduledTimerWithTimeInterval:4000 target:self selector:@selector(keyboardWillShow:) userInfo:nil repeats:NO];
} 
```

（我知道，4000 是一个巨大的数字，但我想确保有延迟！！）

此外，当我关闭键盘而不是平滑滚动时，UIScrollView 只是简单地跳回原位而不是放松……有没有合理的方法来解决这个问题？

* * *

更新：

明白了...感谢 Steven Fisher 帮助我走上正确的道路...我将所有内容移至keyboardWillShow，并添加了以下代码：

```
[UIScrollView beginAnimations:nil context:NULL];
[UIScrollView setAnimationDelegate:self];
[UIScrollView setAnimationDuration:.32];
[UIScrollView setAnimationBeginsFromCurrentState:NO]; 
```

不知何故，当键盘消失时，这也解决了我的“跳跃”问题！呜呼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:50:01.767

```
 - (void)viewDidLoad
  {

     [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification
                                           object:nil];
     [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardWillHideNotification
                                           object:nil];
 }

 - (void)keyboardWasShown:(NSNotification *)notification
{
  // To avoid keyboard hides the view
  CGRect frame = self.view.bounds; 
if (capitalTextField.enabled ==YES) 
{
     if ([notification name]== UIKeyboardDidShowNotification ) 
     {

        frame.origin.y += 200;
        [self.scrollView scrollRectToVisible:frame animated:YES];
     }
     else
     {
        frame.origin.y -= 200;
        [self.scrollView scrollRectToVisible:frame animated:YES]; 
     }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:19:13.573

下面的代码会延迟弹出

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3f];
[textField becomefirstresponder];
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:37:02.333

这是苹果文档针对这种情况给出的代码。

```
// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications
{
   [[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(keyboardWasShown:)
        name:UIKeyboardDidShowNotification object:nil];

   [[NSNotificationCenter defaultCenter] addObserver:self
         selector:@selector(keyboardWillBeHidden:)
         name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
 {
   NSDictionary* info = [aNotification userInfo];
   CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
   // Your application might not need or want this behavior.
   CGRect aRect = self.view.frame;
   aRect.size.height -= kbSize.height;
   if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
    [scrollView setContentOffset:scrollPoint animated:YES];
   }
  }

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{  
UIEdgeInsets contentInsets = UIEdgeInsetsZero;
scrollView.contentInset = contentInsets;
scrollView.scrollIndicatorInsets = contentInsets;
} 
```

# ruby - 是否可以阻止 Jekyll 为每个帖子生成页面

> ID：15126829
> 
> 赞同：7
> 
> 时间：2013-02-28T03:20:56.393
> 
> 标签：ruby, jekyll

我正在将 Jekyll 用于博客/投资组合网站。我有几篇文章是投资组合条目，还有几篇是博客条目。

我可以使用投资组合条目帖子来构建投资组合页面（www.alexmarchant.com/portfolio），但 Jekyll 仍然为每个投资组合条目生成一个永久链接的单独页面。有什么办法可以关闭它吗？

我在帖子的 YAML front-matter 部分尝试了以下内容：

*   固定链接：无
*   永久链接：假

两者都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:45:42.283

我发现了一个*hack*来做你想做的事：当你将永久链接设置为一个已经存在的页面时，它不会被生成（原始页面会在那里），但它仍然可以作为帖子/页面实体使用在杰基尔。

因此，如果您在这样的 url: 处有一个投资组合的索引页面`/portfolio/index.html`，然后在您`/_posts/`的任何帖子中都会有任何在 YAML front matter: 中包含此内容的帖子`permalink: /portfolio/index.html`，那么这些页面将不会生成。

# cvs - CVS 存储库提交文件

> ID：15126830
> 
> 赞同：1
> 
> 时间：2013-02-28T03:20:57.763
> 
> 标签：cvs

当我尝试使用 CVS 提交文件时出现错误（请注意，我是初学者）。

仅供参考：我在我的终端本地执行此操作……而不是使用 Eclipse。

到目前为止我已经采取的步骤。

1.  为 cvs 创建了一个存储库。

2.  成功将我的模块导入到存储库中。

3.  成功对我的模块进行了检出，我在文件夹 ( `~testing.cpp`)中看到了修订副本

4.  然后我更改了文件 testing.cpp 并进行了一些更新。

5.  然后我去提交文件 testing.cpp

命令行：

```
cvs commit testing.cpp 
```

我收到此错误消息：

> 无法打开 CVS/Entries 进行阅读：没有这样的文件或目录 cvs commit：对“testing.cpp”一无所知

我究竟做错了什么？

# audio - 使用 WebRTC 录制短音频文件

> ID：15126831
> 
> 赞同：4
> 
> 时间：2013-02-28T03:20:58.310
> 
> 标签：audio, compression, webrtc, recording

在在线社交学习应用中，我们希望参与者能够录制简短的音频片段以与他人分享。通常，录音将是一个口语单词或一个句子。

我一直在看WebRTC。我了解如何创建和共享音频流。但是，我们希望参与者能够手动开始录制，并在录制完成时停止录制（如果更早，则在 15 秒后停止录制）。理想情况下，我们希望压缩生成的文件以节省带宽，并将其上传到数据库。

任何人都可以推荐任何有关如何执行此操作的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:33:20.767

也许[RecordRTC](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/RecordRTC)可以帮助你。[https://webrtc-experiment.appspot.com/RecordRTC/](https://webrtc-experiment.appspot.com/RecordRTC/)

**试试这个演示：**

[https://github.com/muaz-khan/WebRTC-Experiment/tree/master/AudioVideoRecorder](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/AudioVideoRecorder)

在演示中；`MediaRecorder API`用于录制音频流。这正是您想要的；但是当前支持的是 Firefox Nightly（仅限）。

Chrome 团队也[开始讨论](https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/2l_G_apqk30)可能的场景；和影响。他们`MediaRecorder API`很快就会实施。

# ios - 自动编辑 NSString？

> ID：15126834
> 
> 赞同：0
> 
> 时间：2013-02-28T03:21:35.450
> 
> 标签：ios, objective-c, nsstring

什么代码可以用来编辑一个的部分`NSString`，我想让它把“国际”改为“国际”。并从字符串中删除单词“Airport”。

示例：“檀香山国际机场”将变为“檀香山国际机场”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:25:21.497

这会将所有出现的字符串“International”替换为“Intl”。在你的`NSString`：

```
NSString *newString = [initialString stringByReplacingOccurrencesOfString:@"International" withString:@"Intl."]; 
```

还，

可以添加更多功能的是`NSMutableString`. 它继承了 的所有功能`NSString`，但增加了可变性，这意味着您可以删除或替换字符串的某些部分，或者添加更多内容。这是[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)`NSMutableString`文档。此外，你可以谷歌更多的教程。

# jsf-2 - primefaces：渲染输入类型=提交

> ID：15126840
> 
> 赞同：1
> 
> 时间：2013-02-28T03:22:23.817
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces 3.5，我需要一个`<input type="submit">`，如何从 primefaces 呈现这个标签？我看到 primefaces`<p:button .../>`和`<p:commandButton .../>`render`<button type="button" />`但这不适用于我想在我的项目中执行的操作，我也接受 jsf2，但我需要 ajax 提交，有人知道如何使用 p:someComponent 或 h:someComponent 呈现输入类型提交和 ajax 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:42:12.463

The standard `<h:commandButton type="submit"/>` renders as `<input type="submit">`, but as far as I'm aware none of the Primefaces components do. Of course you'll lose the themeroller look and feel, so you'd need to add the appropriate `ui-` styles manually (otherwise it's going to look pretty out of place!).

# javascript - 在标签中包装单词的所有实例？

> ID：15126842
> 
> 赞同：3
> 
> 时间：2013-02-28T03:22:31.680
> 
> 标签：javascript, jquery

如果我有一个`div`包含的话，像这样：

```
<div class="content">
    In condimentum facilisis porta. Sed nec diam eu diam mattis porta viverra.
</div> 
```

我怎样才能找到一个单词的每个实例，比如说`porta`，并用标签包装它，这样它就变成了：

```
<div class="content">
    In condimentum facilisis <span class="highlight">porta</span>. Sed nec diam eu diam mattis <span class="highlight">porta</span> viverra.
</div> 
```

我看过各种例子，我认为这是正确的：

```
var elem = $(".content");
elem.text(elem.text().replace("porta", "######")); 
```

但这时不时会失败，并且不会取代每个实例。我也想远离使用`REGEX`，因为它太麻烦了，不应该使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:25:55.410

尝试：

```
$('.content').html($('.content').html().replace(/(porta)/g,'<span class="highlight">$1</span>')); 
```

请参阅：[演示 jsFiddle](http://jsfiddle.net/5mvAc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T04:12:47.430

在各种情况下，将单词包含在元素中变得很困难。最简单的情况是您有简单的文本内容：

```
<div>foo bar foo</div> 
```

然后将“foo”包装在 B 元素中可以像：

```
div.innerHTML = div.textContent.replace(/(foo)/g,'<b>$1<\/b>'); 
```

但是，如果您拥有以下内容，生活会更加复杂：

```
<div>foo bar <span>foo</span></div> 
```

以上将删除跨度（以及div内的任何其他元素）。您可以通过迭代子元素而不是使用 textContent （或适当的 innerText ）来处理这个问题。

还有像这样的情况：

```
<div>foo bar <span>f</span>oo</div> 
```

您可能还需要处理单词边界。“foo”应该在任何地方匹配，还是只作为一个完整的单词匹配？给定

```
<div>myfoo bar foo</div> 
```

应该`myfoo`成为`my<b>foo</b>`还是应该被忽略？如果你只想匹配整个单词，那么你需要类似的东西：

```
div.innerHTML = div.textContent.replace(/(\b|\s)(foo)(\b|\s)/g,'$1<b>$2<\/b>$3'); 
```

这是您可以通过限制解决方案的适用性（例如仅针对元素的纯文本内容）使您的生活更轻松的情况之一，通用解决方案将非常笨拙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:31:07.820

看看 each() 函数：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

```
$( ".content .highlight" ).each(function( ) {
   this.text().replace("porta","###");
}); 
```

这可以解决问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:57:16.530

看看这个解决方案，应该适用于所有文本，并且不使用正则表达式。

```
var elem = $(".content");
var ar = elem.text().split(' '), newval='';
for (var i=0; i<ar.length; i++){
    if (ar[i].indexOf("porta") == 0) {
        var partial = ar[i].split('porta');
        (partial[1]=="." || partial[1]==",") ? newval+="<div class='highlight'>porta</div>"+partial[1]+" " : newval+=ar[i]+' ';
        }
    else newval+=ar[i]+' ';
}
elem.html(newval); 
```

和 jsFiddle - [http://jsfiddle.net/u5RxZ/2/](http://jsfiddle.net/u5RxZ/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-11T01:53:01.757

```
function highlighter = (string,val){
    String.prototype.splice = function(start, delCount, newSubStr) {
        return this.slice(0, start) + newSubStr + this.slice(start + Math.abs(delCount));
    };
    var spanBegin = "<span class='highlight'>";
    var spanEnd = "</span>";
    var search_regexp = new RegExp(val, "gi");
    var myArray;
    var indexCollection = [];
    while ((myArray = search_regexp.exec(string)) !== null) {
        indexCollection.push(myArray.index);
    }

    indexCollection.forEach(function(stringIdx,idxInCol,col){
        var offset1 = (idxInCol * (spanBegin.length + spanEnd.length));
        var offset2 = stringIdx + offset1 + val.length + spanBegin.length;
        string = string.splice((stringIdx + offset1),0,spanBegin);
        string = string.splice(offset2,0,spanEnd);
    });

    return string;
} 
```

# oracle - 未使用级别或开始时出现 ORA-01788 错误

> ID：15126844
> 
> 赞同：1
> 
> 时间：2013-02-28T03:22:38.217
> 
> 标签：oracle, plsql

我刚刚开始学习 PL/SQL。在 stackoverflow 的帖子之后，我编写了一个脚本来搜索 Oracle 中的某个值，如下所示：

```
DECLARE
  match_count INTEGER;
  v_owner VARCHAR2(255);
  v_search_value NUMBER;
BEGIN
  v_owner:='USERA USERB';
  v_search_value:=4823.0;
  EXECUTE IMMEDIATE
  'INSERT INTO TMP SELECT owner, table_name, column_name FROM all_tab_cols WHERE instr(:1, owner)>0 AND data_type like ''%NUMBER%''' USING v_owner;
  commit;
  FOR t IN (SELECT owner, table_name, column_name FROM TMP) LOOP
    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '||t.owner||'.'||t.table_name||' WHERE '||t.column_name||'= :1'
    INTO match_count
    USING v_search_value;
    IF match_count > 0 THEN
      EXECUTE IMMEDIATE
      'INSERT INTO RESULT VALUES(:1, :2, :3, :4)'
      USING t.owner, t.table_name, t.column_name, match_count;
      commit;
    END IF;
  END LOOP;
END; 
```

在执行脚本之前已正确创建表 TMP 和 RESULT。但是，当我运行脚本时，我在第 12 行收到 ORA-01788 错误，提示“需要按子句连接”。我想知道为什么代码会导致此错误以及如何更改脚本以正确执行。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T08:44:09.450

您可能有一个表，其中有一列名为`level`（正如我不看时弗洛林建议的那样），这是一个[保留字](http://docs.oracle.com/cd/E11882_01/server.112/e10592/ap_keywd001.htm)。

在任何情况下都可能是 - 不仅是`level`，而是`LEVEL`，或者`Level`- 所以要检查你可以这样做：

```
select owner, table_name, column_name
from all_tab_columns
where upper(column_name) = 'LEVEL'; 
```

或者寻找任何正在使用的保留字（尽管这并不总是能找到所有潜在的问题）：

```
select atc.owner, atc.table_name, atc.column_name, vrw.keyword
from all_tab_columns atc
join v$reserved_words vrw on vrw.keyword = upper(atc.column_name); 
```

您可以针对其他地方运行类似的查询`all_tables`或`all_objects`查找潜在问题。

如果我运行您的查询的修改版本，它不会打扰`TMP`表格 - 不确定您为什么想要那个；不使用动态 SQL 进行插入；不提交（这是在一个块中做的一件奇怪的事情——你不需要在每次插入之后都这样做）；并且只是为了我的利益只显示匹配项而不需要建立一个`results`表：

```
declare
  match_count integer;
  v_owner varchar2(255);
  v_search_value number;
begin
  v_owner := 'USERA USERB';
  v_search_value := 4823.0;
  for t in (
      select owner, table_name, column_name
      from all_tab_cols
      where instr(v_owner, owner) > 0
      and data_type like '%NUMBER%'
    ) loop
    execute immediate 
      'select count(*) from ' || t.owner ||'.'|| t.table_name
        || ' where ' || t.column_name || ' = :1'
      into match_count using v_search_value;
    if match_count > 0 then
--    insert into results values (t.owner, t.table_name,
--      t.column_name, match_count);
      dbms_output.put_line('Matched ' || t.owner ||'.'|| t.table_name
        ||'.'|| t.column_name ||': '|| match_count);
    end if;
  end loop;
end;
/ 
```

...这成功完成。如果我添加一个带有`level`列的表：

```
create table t42 ("LEVEL" number); 
```

...然后再次运行相同的块然后我也得到：

```
ORA-01788: CONNECT BY clause required in this query block
ORA-06512: at line 14
01788\. 00000 -  "CONNECT BY clause required in this query block"
*Cause:    
*Action: 
```

除了避免在对象名称中使用保留字之外，您还可以通过将所有对象名称括在双引号中来完成这项工作：

```
 execute immediate 
      'select count(*) from "' || t.owner ||'"."'|| t.table_name
        || '" where "' || t.column_name || '" = :1'
      into match_count using v_search_value; 
```

这也将处理大小写混合的对象名称，您也应该避免这种情况。

# java - Java入门：打印乘法表

> ID：15126848
> 
> 赞同：-3
> 
> 时间：2013-02-28T03:22:57.287
> 
> 标签：java

我正在尝试打印出偶数的乘法表。有人可以帮忙吗？我需要有人解释为什么我得到一个奇怪的结果而不是我想要的结果。

```
public class even {

public static void main(String[] args)
{
int i = 0;

while(i <= 10){
int j = 0; 
    while(j <= 10) {
        j+=2;
        System.out.print(i*j + "\t");
    }
    System.out.println();
    i+=2; 
}
}

} 
```

我想要的输出是在垂直轴上打印出：0,2,4,6,8，然后在水平轴上再次打印出来。我希望图表像乘法表一样阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:27:11.077

这个怎么样？我怀疑您的问题可能是因为您`j`在计算答案之前添加了`j+=2;`

```
public static void main(String[] args) {

    int startAt = 2;

    for (int i = startAt; i <= 10; i += 2) {
        for (int j = startAt; j <= 10; j += 2) {
            System.out.print(i*j + "\t");
        }
        System.out.println();
    }
} 
```

for 循环的使用在这里非常完美，因为它将几行合并为一条（变量初始化、while 循环和变量增量）。

这是一个`while`循环，但它并不理想：

```
public static void main(String[] args) {

    int startAt = 2;
    int i = startAt;

    while (i <= 10){
        int j = startAt; 

        while (j <= 10) {
            // Notice these lines are swapped!
            System.out.print(i*j + "\t");
            j+=2;
        }

        System.out.println();
        i+=2; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T03:29:32.173

```
import java.util.Scanner;
public class WhileLoop
{   
   public static void main(String[] args) 
   {

    int startAt = 1;
    int i = startAt;

    while (i <= 20){
        int j = startAt; 

        while (j <= 20) {
            // Notice these lines are swapped!
            System.out.print(i*j + "\t");
            j+=1;
        }

        System.out.println();
        i+=1; 
    }
  }
} 
```

# erlang - Erlang 添加用户定义的符号，如 ** 或 <*

> ID：15126849
> 
> 赞同：3
> 
> 时间：2013-02-28T03:23:03.217
> 
> 标签：erlang

我想在我的 Erlang 库中添加更多符号。示例 对于矩阵库 A**B 可能意味着矩阵乘法等。我找不到任何帮助。也有人知道如何使用 erlang:apply() 来应用 + - 或 % 等函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:47:34.203

您可以使用任何原子作为函数名。如果您在 atom 中有特殊符号，则必须使用其引用形式`'**'`：

```
-module(operator).
-export(['**'/2]).

'**'(A, B) ->
    {'**', A, B}. 
```

但是，没有语法糖可以使用此类运算符。所有默认运算符都是在模块中定义的函数`erlang`，可以这样访问：

```
1> operator:'**'(a, b).
{'**',a,b}
2> F0 = fun operator:'**'/2.
#Fun<operator.**.2>
3> F0(c, d).
{'**',c,d}
4> F1 = fun erlang:'+'/2.
#Fun<erlang.+.2>
5> F1(1, 2).
3
6> F2 = fun erlang:'rem'/2.
#Fun<erlang.rem.2>
7> F2(5, 3).
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:43:35.217

如果您真的非常想要这个，您可以使用解析转换，但您的代码在转换之前必须在语法上正确。因此，例如，您的解析转换可以重写`A *_* B`为`exp(A, B)`，因为`A *_* B`将被解析为`(A * _) * B`. 但是，您将无法转换`A ** B`。

此外，对如此无聊的事情使用解析转换是一个非常糟糕的主意。

# javascript - jQuery 转换

> ID：15126857
> 
> 赞同：0
> 
> 时间：2013-02-28T03:23:58.123
> 
> 标签：javascript, jquery, jquery-animate

我在这个页面有问题[http://ncca.co/indust.php](http://ncca.co/indust.php)

我希望“内容”区域出现在选择适当的 a href 时，然后黑色页脚从左侧扫过。选择链接时，我希望“内容”消失，新的内容出现，向右扫过的黑条有一个轻微的间隙，新的黑色边框从左侧扫入。

我怎样才能做到这一点？

我不知道如何发布代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:28:29.103

通常，您需要做的是在“内容” div 内有一个非常宽的 div，该 div 设置为溢出：隐藏。然后为 x 值的偏移设置动画以获取您想要查看的 div。

```
<style>
    #container {
        width: 100px;
        overflow: none;
        position: relative;
    }

    #inner {
        width: 300%;
        position: relative;
        left: 0;
    }

    #container div {
        width: 100px;
        float: left;
    }
</style>
<div id="container">
    <div id="inner">
        <div>Foo</div>
        <div>Bar</div>
        <div>Baz</div>
    </div>
</div>
<a id="show_1">Link 1</a>
<a id="show_2">Link 2</a>
<a id="show_3">Link 3</a>
<script>
    $(document).ready(function() {
        $("#show_1").click(function(){
            $("#inner").animate(
                {"left": 0}
                1000 // Animate for 1 second
            );
        });

        $("#show_2").click(function(){
            $("#inner").animate(
                {"left": 100}
                1000 // Animate for 1 second
            );
        });

        $("#show_3").click(function(){
            $("#inner").animate(
                {"left": 200}
                1000 // Animate for 1 second
            );
        });
    });
</script> 
```

此处有关动画的文档：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

现场示例：[http ://www.volunteerspot.com/Organizer/Register](http://www.volunteerspot.com/Organizer/Register)

希望这会为您指明正确的方向！

# java - 引发与扫描仪相关的错误的引用数组

> ID：15126859
> 
> 赞同：0
> 
> 时间：2013-02-28T03:24:06.480
> 
> 标签：java, arrays, eclipse, reference, error-handling

这是有问题的代码：

```
 public class GradeBookRunner
 {
 public static void main( String args[] )
  {
    out.println("Welcome to the Class Stats program!");
    int num = 1;
    int count = 0;
    String stuGrades = "";
    String stuName = "";
    Scanner keyboard = new Scanner(System.in);
    out.print("What is the name of this class? ");
    String clsName = keyboard.nextLine();
    out.println("\n");
    out.print("How many students are in this class? ");
    int clsNum = keyboard.nextInt();
    Class CSAB = new Class(clsName, clsNum);
    out.println("\n");
    out.print("Enter the name of student 1 : ");
    stuName = keyboard.nextLine();
    keyboard.next();
    out.print("Enter the grades for " + stuName + "\nUse the format x - grades ( 2 - 100 100) : ");
    //count = keyboard.nextInt();
    //keyboard.next();
    //for(int i = 0; i < count; i++)
    //{
        stuGrades += keyboard.nextLine() + " ";
    //}

    Student add = new Student(stuName,stuGrades);
    CSAB.addStudent(num, add);
    stuGrades = "";
    num++;
    out.println(); 
```

这个使用的类的代码可以在以下链接中找到：

Grades.java：http://pastebin.com/ahYRS2WD [_](http://pastebin.com/ahYRS2WD)

Student.java：http://pastebin.com/EBF4BBCb [_](http://pastebin.com/EBF4BBCb)

[类.java： http](http://pastebin.com/A1C9fCL1) ://pastebin.com/A1C9fCL1

我的问题发生在我运行代码并输入班级名称、班级人数、学生姓名之后，这些都很好，当我输入学生的成绩时，下一点会引发错误，例如`3 - 70.2 65.3 45.1`

**编辑** 这是我得到的错误：

欢迎来到班级统计计划！这个班级的名字是什么？ap

这个班有多少学生？1

输入学生 1 的姓名：几乎没有

输入成绩很难

使用格式 x - 等级 (2 - 100 100)：线程“主”中的异常

java.util.NoSuchElementException

```
at java.util.Scanner.throwFor(Unknown Source)

at java.util.Scanner.next(Unknown Source)

at java.util.Scanner.nextInt(Unknown Source)

at java.util.Scanner.nextInt(Unknown Source)

at lab19b.Grades.setGrades(Grades.java:31)

at lab19b.Grades.<init>(Grades.java:25)

at lab19b.Student.<init>(Student.java:27)

at lab19b.GradeBookRunner.main(GradeBookRunner.java:42) 
```

**编辑2**

我现在认为问题是我需要`stuGrades`阅读整行，例如`3 - 70.2 65.3 45.1`但我无法弄清楚我需要将键盘输入放入字符串的哪个扫描仪语句

**编辑3**

这是我正常工作的证据`grades.java`：

```
package lab19b;

import java.util.Arrays;
import java.util.Scanner;
import static java.lang.System.*;
import static java.util.Arrays.*;

 public class GradesTester
 {
public static void main( String args[] )
 {
    Grades test = new Grades("5 - 90 85 95.5 77.5 88");
    out.println(test);
    out.println("sum = " + test.getSum());  
    out.println("num grades = " + test.getNumGrades());                                         
    out.println("low grade = " + test.getLowGrade());       
    out.println("high grade = " + test.getHighGrade()+ "\n\n");

    test.setGrades("9 - 10 70 90 92.5 85 95.5 77.5 88 100.0");
    out.println(test);
    out.println("sum = " + test.getSum());  
    out.println("num grades = " + test.getNumGrades());                                         
    out.println("low grade = " + test.getLowGrade());       
    out.println("high grade = " + test.getHighGrade()); 
```

输出如下： 90.0 85.0 95.5 77.5 88.0

总和 = 436.0

成绩数 = 5

低等级 = 77.5

高等级 = 95.5

10.0 70.0 90.0 92.5 85.0 95.5 77.5 88.0 100.0

总和 = 708.5

成绩数 = 9

低等级 = 10.0

高等级 = 100.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:07:23.290

`setGrades(String gradeList)`您的问题在于Grades 中的 public void功能`Line 27` 这意味着整个`gradeList`类似于“ab c”。将此转换为数组函数并读取单个字符串。[a]，[b]，[c]。使用`split`String 的函数来形成一个数组并填充你的`grades[i]`

Scanner 中的这种方法导致了这个问题，这意味着没有输入可以解析`scan.nextInt()`；

```
 // If we are at the end of input then NoSuchElement;
  903     // If there is still input left then InputMismatch
  904     private void throwFor() {
  905         skipped = false;
  906         if ((sourceClosed) && (position == buf.limit()))
  907             throw new NoSuchElementException();
  908         else
  909             throw new InputMismatchException();
  910     } 
```

# algorithm - 为复杂排序选择数据结构的建议

> ID：15126863
> 
> 赞同：1
> 
> 时间：2013-02-28T03:24:55.247
> 
> 标签：algorithm, perl, sorting

我正在寻找一些帮助编写一些 Perl 代码来对日志文件进行排序。

一般来说，我是编码和 perl 的相对新手！

我需要尽可能只使用核心 perl 模块编写我的代码，但如果这被证明是不可能的，我对 CPAN 模块持开放态度。日志文件包含一个记录的消息列表，需要按顺序重新排列。应该很简单，但是有很多陷阱，这给我带来了如何设计数据结构的麻烦。输入文件格式为 CSV，输出需要与时间戳顺序的消息相同，并首先与第一个消息部分组合在一起的串联消息。

*陷阱*

1.  消息需要按时间戳排序。
2.  如果消息已被拆分为多行，则在最终字段“（消息参考 1 的第 3 部分中的第 1 部分）”中将具有类似以下内容。对于特定的消息引用，所有部分都需要按顺序排列，因此第 1 部分，然后是第 2 部分，然后是第 3 部分，等等。
3.  该字段开头的十六进制数字告诉我它是 8 位还是 16 位引用，并且具有相同引用号的 8 位引用与具有相同编号的 16 位引用不匹配（作为副本）。所以我需要考虑到这一点。
4.  消息部分可能会丢失，所以我们可能只得到第 1 部分和第 2 部分，共 3 部分。
5.  重复的消息参考号是可能的，因此每个消息参考都需要绑定到 from 字段以赋予其唯一标识。
6.  即使使用（3）中的唯一标识，仍然可能随着时间的推移重复（因为在它们重置之前只有这么多消息参考号），所以我需要检查收到的最后一部分的时间以及重复的消息参考。如果消息部分之间的间隔超过 3 天，那么我可以将其视为新消息。
7.  最后，日志文件中可能有数十万行需要重新排序，因此将这些全部加载到内存中可能不是一种选择。

如果我只是放一些示例输入数据，然后它需要如何输出，这可能是最好的。

*输入数据*

```
#message uniqueID,From,To,Time,flag,content,IP,concatenation info   
1,"+1231231234","+15125562100","7 Sep 2012 22:08:33","","abcdefghijklmnopqrstuvwxyz",,
2,"+1231231234","+15125562100","7 Sep 2012 22:08:37","","abcdefghijklmnopqrstuvwxyz",,
3,"+1231231234","+15125562100","7 Sep 2012 22:08:41","","abcdefghijklmnopqrstuvwxyz",,
4,"+8888888888","+15125562100","7 Sep 2012 22:09:01","","SHORTUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wi",,"BQADAQMB  (part 1 of 3 of message reference 1)"
5,"+8888888888","+15125562100","7 Sep 2012 22:09:04","","h my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall ",,"BQADAQMC  (part 2 of 3 of message reference 1)"
6,"+8888888888","+15125562100","7 Sep 2012 22:09:05","","ress, ah, nevermore!",,"BQADAQMD  (part 3 of 3 of message reference 1)"
7,"+8888888888","+15125562100","7 Sep 2012 22:09:06","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIDAQ==  (part 1 of 3 of message reference 2)"
8,"+8888888888","+15125562100","7 Sep 2012 22:09:07",""," my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall p",,"BggEAAIDAg==  (part 2 of 3 of message reference 2)"
10,"+1231231234","+15125562100","7 Sep 2012 22:09:46","","abcdefghijklmnopqrstuvwxyz",,
11,"+1231231234","+15125562100","7 Sep 2012 22:09:50","","abcdefghijklmnopqrstuvwxyz",,
12,"+1231231234","+15125562100","7 Sep 2012 22:09:55","","abcdefghijklmnopqrstuvwxyz",,
13,"+8888888888","+15125562100","13 Sep 2012 22:10:36","","SHORTUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wi",,"BQADAQMB  (part 1 of 3 of message reference 1)"
14,"+8888888888","+15125562100","13 Sep 2012 22:10:38","","h my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall ",,"BQADAQMC  (part 2 of 3 of message reference 1)"
15,"+8888888888","+15125562100","13 Sep 2012 22:10:39","","ress, ah, nevermore!",,"BQADAQMD  (part 3 of 3 of message reference 1)"
16,"+8888888889","+15125562100","7 Sep 2012 22:09:06","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIDAQ==  (part 1 of 3 of message reference 2)"
17,"+8888888889","+15125562100","7 Sep 2012 22:10:42",""," my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall p",,"BggEAAIDAg==  (part 2 of 3 of message reference 2)"
18,"+8888888889","+15125562100","7 Sep 2012 22:10:43","","ess, ah, nevermore!",,"BggEAAIDAw==  (part 3 of 3 of message reference 2)"
19,"+1231231234","+15125562100","13 Sep 2012 20:12:52","","Deposit SMS with readreceiptrequest = false #0",,
20,"+1231231234","+15125562100","13 Sep 2012 20:12:53","","Deposit SMS with readreceiptrequest = false #1",,
21,"+1231231234","+15125562100","13 Sep 2012 20:12:54","","Deposit SMS with readreceiptrequest = false #2",,
22,"+8888888888","+15125562100","13 Sep 2012 20:12:55","","Deposit SMS with readreceiptrequest = false #0: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms ",,"BQADAAMB  (part 1 of 3 of message reference 0)"
23,"+8888888888","+15125562100","13 Sep 2012 20:12:57","","ore; This and more I sat divining, with my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with",,"BQADAAMC  (part 2 of 3 of message reference 0)"
24,"+8888888888","+15125562100","13 Sep 2012 20:12:58","","the lamplight gloating oer She shall press, ah, nevermore!",,"BQADAAMD  (part 3 of 3 of message reference 0)"
25,"+8888888888","+15125562100","7 Sep 2012 22:10:40","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIEAQ==  (part 1 of 2 of message reference 3)"
26,"+8888888888","+15125562100","7 Sep 2012 22:10:42","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIEAQ==  (part 1 of 2 of message reference 3)"
27,"+8888888888","+15125562100","7 Sep 2012 22:10:43","","ess, ah, nevermore!",,"BggEAAIEAw==  (part 2 of 2 of message reference 3)"
28,"+8888888888","+15125562100","13 Sep 2012 20:13:02","","Deposit SMS with readreceiptrequest = false #2: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms ",,"BQADAgMB  (part 1 of 3 of message reference 2)"
29,"+8888888888","+15125562100","13 Sep 2012 20:13:03","","ore; This and more I sat divining, with my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with",,"BQADAgMC  (part 2 of 3 of message reference 2)"
30,"+8888888888","+15125562100","13 Sep 2012 20:13:04","","the lamplight gloating oer She shall press, ah, nevermore!",,"BQADAgMD  (part 3 of 3 of message reference 2)"
31,"+1231231234","+15125562100","13 Sep 2012 20:13:08","","Deposit SMS with readreceiptrequest = true #0", 
```

*输出数据*

```
#message uniqueID,From,To,Time,flag,content,IP,concatenation info   
1,"+1231231234","+15125562100","7 Sep 2012 22:08:33","","abcdefghijklmnopqrstuvwxyz",,
2,"+1231231234","+15125562100","7 Sep 2012 22:08:37","","abcdefghijklmnopqrstuvwxyz",,
3,"+1231231234","+15125562100","7 Sep 2012 22:08:41","","abcdefghijklmnopqrstuvwxyz",,
4,"+8888888888","+15125562100","7 Sep 2012 22:09:01","","SHORTUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wi",,"BQADAQMB  (part 1 of 3 of message reference 1)"
5,"+8888888888","+15125562100","7 Sep 2012 22:09:04","","h my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall ",,"BQADAQMC  (part 2 of 3 of message reference 1)"
6,"+8888888888","+15125562100","7 Sep 2012 22:09:05","","ress, ah, nevermore!",,"BQADAQMD  (part 3 of 3 of message reference 1)"
16,"+8888888889","+15125562100","7 Sep 2012 22:09:06","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIDAQ==  (part 1 of 3 of message reference 2)"
17,"+8888888889","+15125562100","7 Sep 2012 22:10:42",""," my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall p",,"BggEAAIDAg==  (part 2 of 3 of message reference 2)"
18,"+8888888889","+15125562100","7 Sep 2012 22:10:43","","ess, ah, nevermore!",,"BggEAAIDAw==  (part 3 of 3 of message reference 2)"
7,"+8888888888","+15125562100","7 Sep 2012 22:09:06","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIDAQ==  (part 1 of 3 of message reference 2)"
8,"+8888888888","+15125562100","7 Sep 2012 22:09:07",""," my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall p",,"BggEAAIDAg==  (part 2 of 3 of message reference 2)"
10,"+1231231234","+15125562100","7 Sep 2012 22:09:46","","abcdefghijklmnopqrstuvwxyz",,
11,"+1231231234","+15125562100","7 Sep 2012 22:09:50","","abcdefghijklmnopqrstuvwxyz",,
12,"+1231231234","+15125562100","7 Sep 2012 22:09:55","","abcdefghijklmnopqrstuvwxyz",,
25,"+8888888888","+15125562100","7 Sep 2012 22:10:40","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIEAQ==  (part 1 of 2 of message reference 3)"
26,"+8888888888","+15125562100","7 Sep 2012 22:10:42","","LONGUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wit",,"BggEAAIEAQ==  (part 1 of 2 of message reference 3)"
27,"+8888888888","+15125562100","7 Sep 2012 22:10:43","","ess, ah, nevermore!",,"BggEAAIEAw==  (part 2 of 2 of message reference 3)"
19,"+1231231234","+15125562100","13 Sep 2012 20:12:52","","Deposit SMS with readreceiptrequest = false #0",,
20,"+1231231234","+15125562100","13 Sep 2012 20:12:53","","Deposit SMS with readreceiptrequest = false #1",,
21,"+1231231234","+15125562100","13 Sep 2012 20:12:54","","Deposit SMS with readreceiptrequest = false #2",,
22,"+8888888888","+15125562100","13 Sep 2012 20:12:55","","Deposit SMS with readreceiptrequest = false #0: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms ",,"BQADAAMB  (part 1 of 3 of message reference 0)"
23,"+8888888888","+15125562100","13 Sep 2012 20:12:57","","ore; This and more I sat divining, with my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with",,"BQADAAMC  (part 2 of 3 of message reference 0)"
24,"+8888888888","+15125562100","13 Sep 2012 20:12:58","","the lamplight gloating oer She shall press, ah, nevermore!",,"BQADAAMD  (part 3 of 3 of message reference 0)"
28,"+8888888888","+15125562100","13 Sep 2012 20:13:02","","Deposit SMS with readreceiptrequest = false #2: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms ",,"BQADAgMB  (part 1 of 3 of message reference 2)"
29,"+8888888888","+15125562100","13 Sep 2012 20:13:03","","ore; This and more I sat divining, with my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with",,"BQADAgMC  (part 2 of 3 of message reference 2)"
30,"+8888888888","+15125562100","13 Sep 2012 20:13:04","","the lamplight gloating oer She shall press, ah, nevermore!",,"BQADAgMD  (part 3 of 3 of message reference 2)"
31,"+1231231234","+15125562100","13 Sep 2012 20:13:08","","Deposit SMS with readreceiptrequest = true #0",
13,"+8888888888","+15125562100","13 Sep 2012 22:10:36","","SHORTUDH: Thus I sat engaged in guessing, but no syllable expressing To the fowl, whose fiery eyes now burned into my bosoms core; This and more I sat divining, wi",,"BQADAQMB  (part 1 of 3 of message reference 1)"
14,"+8888888888","+15125562100","13 Sep 2012 22:10:38","","h my head at ease reclining On the cushions velvet lining that the lamplight gloated oer, But whose velvet violet lining with the lamplight gloating oer She shall ",,"BQADAQMC  (part 2 of 3 of message reference 1)"
15,"+8888888888","+15125562100","13 Sep 2012 22:10:39","","ress, ah, nevermore!",,"BQADAQMD  (part 3 of 3 of message reference 1)" 
```

到目前为止我所做的事情是

1.  将时间字段转换为纪元时间以使任何比较更容易
2.  可以读入（和写出文件）。
3.  可以解析所有 CSV 列。
4.  可以将串联信息拆分成部分，即 8 位或 16 位引用的位置、部分编号、总数和引用 ID。

现在我坚持想出有效过滤和排序数据的最佳方法。我尝试过使用哈希并将文件首先加载到内存中，以便我可以对特定的消息引用进行排序，但我不确定这是否适用于大文件。

然后我考虑逐行阅读它，但我可能会遇到一个问题，即第二行包含连接 SMS 的第一部分，我们可能要到文件的最后才得到后续部分，所以我想也许这也不是一个好主意。

我也想到了一个数据库，但我认为在需要运行的系统上设置太复杂了。另一种选择可能是编写一个包并将复杂的结构存储为一个对象？也许我把事情复杂化了？我的大脑肯定会变得糊状！

无论如何，任何想法或指导将不胜感激。

希望以上内容很清楚，但如果您有任何问题，请询问我。

谢谢，威尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:00:50.853

如果正确分解，我认为这个问题不会太复杂。

在我看来，您的排序程序将包含以下阶段：

1.  从每一行中提取相关信息（时间戳和连接信息）。
2.  按消息引用对行进行分组，这可以通过缓存高效地完成。
3.  按时间戳对组进行排序。
4.  将组展平为原始线条。

### 施瓦茨变换

在 Perl 中排序时，Schwartzian 是一种常见的模式[。](https://en.wikipedia.org/wiki/Schwartzian_transform)它加快了排序，其中排序索引必须从实际排序的数据中提取，通过提取该数据一次，而不是每次比较。它也可以被描述为decorate-sort-undecorate。

示例：按长度对字符串进行排序。请注意，在这种情况下，幼稚的实现实际上会更好。

```
my @words = qw( aaa b cccc );
my @sorted_words = 
    map  { $_->[1]             } # flatten
    sort { $a->[0] <=> $b->[0] } # sort by first field (length)
    map  { [ length $_, $_ ]   } # decorate: return arrayref with key and data
    @words;
print "[@sorted_words]\n"; # prints "[b aaa cccc]" 
```

为您的任务记住这种模式会很好

### 1.提取

你已经做到了。对于每一行，我们输出一个数组引用或具有以下字段的类似内容：

```
0: timestamp (in epoch)
1: part no            \
2: total parts        | these are undef if no concat info is present
3: message reference  /
4: The unmodifed line 
```

对于 CSV 提取，您应该使用[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV), 来计算纪元，您应该查看[`DateTime`](https://metacpan.org/module/DateTime)

### 2.分组

我们以散列的形式定义缓存，其中消息引用作为键，组作为值。组是上面指定的提取格式的arrayref，但可能在第5 位及以后的位置包含更多行（即每个标记的行都是一个组）。

对于收到的每个标记行，我们执行以下过程：

```
# pseudocode
# this is how I understood your requirements,
# but it may be wrong. The general principle still holds
# (you may need to choose a different key)
IF the line doesn't have part information, THEN
    pass it on immediately.
ELSE
    IF the hash has an entry for our message reference, THEN
        IF the timestamp of the present group is too old, THEN
            pass on the existing group.
            Add our line for this key.
        ELSE
            Update the group with our line,
            adding the original line (at position 3 + part no),
            but not the metadata to the group.
            IF the group is made complete, THEN
                pass it on immediately,
                delete this entry from the hash.
    ELSE
        Add the line as a group.
        Make sure the content is at position 3 + part no, to allow easy updating. 
```

在没有新行出现后，我们将散列中的每个剩余值传递到下一个阶段。

要意识到的重要一点是，您不必将所有行都保存在内存中，而只保留不完整的组。

有趣的 Perl 函数是`exists $hash{element}`和`delete $hash{element}`。这`delete`对于节省内存可能很重要。

### 3\. 排序

我们只需按时间戳对每个元素进行排序。如果系统无法处理的总数据过多，我们可以使用一个技巧：

1.  对较小的数据块进行排序，将它们保存到文件中。
2.  打开每个文件。
3.  从每个文件中加载第一项
4.  Do-While 至少一个文件有剩余项目：
    1.  对所有加载的项目进行排序
    2.  传递第一个结果元素。
    3.  从当前第一个元素来自的文件中加载下一项
5.  以正确的顺序传递其他（已经加载的）项目

然而，这是耗时的。

### 4\. 展平

在这里，我们只接收排序和分组的项目。我们所要做的就是以正确的顺序输出包含的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:41:46.553

我将分两个阶段执行此操作：组合消息部分和排序。这应该会稍微简化问题。

首先，我将使用外部排序实用程序（例如 GNU 排序工具）按消息编号排序。这至少会将具有相同消息编号的所有部分组合在一起。一个简单的`sort <inputfile >outputfile`将做你需要的。您真正感兴趣的只是让所有以开头的部分，例如，`371,"...`彼此相邻。

然后，您可以编写一个 Perl 程序来读取输出并累积具有相同消息编号的行。当您看到不同的消息编号时，过滤您积累的行以组合来自不同部分的消息。并将该记录写入文件。您可能希望以更易于排序的形式编写输出。也许通过在记录前面输出您要排序的字段，必要时补零以简化排序。

完成后，您将拥有一个每行包含一条记录的文件，如果您正确构建了记录，则可以再执行一次`sort <inputfile >outputfile`以按照您想要的顺序获取数据。

这也大大简化了您的编程：您不必担心为数据编写自定义排序。相反，您编写一个相对简单的 Perl 程序来转换数据，以便更容易通过现有工具进行排序。

# wordpress - 显示自定义分类和元字段

> ID：15126864
> 
> 赞同：1
> 
> 时间：2013-02-28T03:24:55.953
> 
> 标签：wordpress

我正在尝试基于自定义帖子类型的自定义分类法构建滑块。自定义帖子是产品，分类是类型。

我已经能够成功地让分类法正确显示，但是我无法获得我添加的自定义元字段来显示。

我的工作分类显示代码如下，我想让元字段（称为块图标）显示在

希望这是有道理的，有人可以提供帮助。谢谢！

```
<div id="slider"><?php
        $args = array( 'taxonomy' => 'type' ); $types = get_terms('type', $args);
        $count = count($types); $i=0;
        if ($count > 0) {
            foreach ($types as $type) {
                $i++;
                $type_list .= '<div class="slider-' . $type->slug . ' container">';
                $type_list .= '<div class="slider-text divider">';
                $type_list .= '<i class="aspera-icon lrg">a</i>';
                $type_list .= '<h1>' . $type->name . '</h1>';
                $type_list .= '<h5>' . $type->description .'</h5>';
                $type_list .= '</div>';
                $type_list .= '</div>';
            }
        echo $type_list;
        }   
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:01:27.283

```
<?php
$args = array(
    'tax_query' => array(
        array(
            'taxonomy' => 'sliders_category',
            'field' => 'id',
            'terms' => '5'
        )
),
'post_type'=>'sliders',
'order'=>'ASC',
'posts_per_page'=>-1
);
query_posts($args);
    while ( have_posts() ) : the_post(); 
?>
    <?php the_title();?>
    <?php the_content(); ?>
    <?php 
    endwhile; 
    wp_reset_query();
?> 
```

# c# - C# 需要帮助编辑我的行号代码

> ID：15126866
> 
> 赞同：0
> 
> 时间：2013-02-28T03:25:05.497
> 
> 标签：c#, return, word-wrap, line-numbers

我得到了一个行号代码，它非常适合以常规方式对行进行编号，但我正在寻找一些不同的东西。我希望我的代码仅在我按 Enter 键时计算换行符（程序收到返回键码），而不是文本框自动使用自动换行剪切行。这是我现在正在使用的代码：

```
//Instructions
    int maxLC = 1; //maxLineCount - should be public
    private void InstructionsSyncTextBox_KeyUp(object sender, KeyEventArgs e)
    {
        int linecount = InstructionsSyncTextBox.GetLineFromCharIndex(InstructionsSyncTextBox.TextLength) + 1;
        if (linecount != maxLC)
        {
            InstructionsLineNumberSyncTextBox.Clear();
            for (int i = 1; i < linecount + 1; i++)
            {
                InstructionsLineNumberSyncTextBox.AppendText(Convert.ToString(i) + "\n");
            }
            maxLC = linecount;
        }
    } 
```

我认为最简单的方法是每次有人按 Enter 键时保存行数到列表中，并且每次有人按 Enter 键时它都会使用列表中所述位置的每个行号更新行号 texbox。但我不知道如何检测退货何时被删除。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:54:58.123

计算您发布的代码中的行数的非常基本的示例：

```
 class Program
    {
        static void Main(string[] args)
        {
            string stringFromTextBox = 
@"  int maxLC = 1; //maxLineCount - should be public
    private void InstructionsSyncTextBox_KeyUp(object sender, KeyEventArgs e)
    {
        int linecount = InstructionsSyncTextBox.GetLineFromCharIndex(InstructionsSyncTextBox.TextLength) + 1;
        if (linecount != maxLC)
        {
            InstructionsLineNumberSyncTextBox.Clear();
            for (int i = 1; i < linecount + 1; i++)
            {
                InstructionsLineNumberSyncTextBox.AppendText(Convert.ToString(i) + ""\n"");
            }
            maxLC = linecount;
        }
    }";
            Regex r = new Regex("\r", RegexOptions.Multiline);
            int lines = r.Matches(stringFromTextBox).Count;
            //You'll need to run this line every time the user presses a key

        }
    } 
```

# objective-c - “objectAtIndex”的 NSUserDefaults 错误

> ID：15126871
> 
> 赞同：3
> 
> 时间：2013-02-28T03:25:34.220
> 
> 标签：objective-c, arrays, nsuserdefaults

在这行代码中收到错误消息：

```
Team *team = [leagueLocal.teams objectAtIndex:indexpath.row]; 
```

错误是“使用未声明的标识符'indexpath'”......但我不确定我会在**objectAtIndex:**上放什么，而不是**indexpath.row**，因为这在这个应用程序的 TableView 部分中对我有用。

大图，我正在尝试使用 NSUserDefaults 保存选择的团队名称。团队名称是通过 JSON 从 Web 服务中提取的。

这是到目前为止我拥有的 NSUserDefaults 部分的完整代码：

```
 // Create User Defaults Variable
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

   // Tell it where to look
Sport *sportLocal = [sports objectAtIndex:0];
League *leagueLocal = [sportLocal.leagues objectAtIndex:0];
Team *team = [leagueLocal.teams objectAtIndex:indexpath.row];  //  This is where error is

   // Store the data, this is the stuff I want to save
[defaults setObject:team.abbreviation forKey:[NSString stringWithFormat:@"teamAbbreviation%d", _buttonNumber]];

   // After saving, synchronize data
[defaults synchronize]; 
```

谢谢您的帮助！让我知道是否需要更多信息，或者如果需要我可以在哪里帮助澄清。

**编辑**- 我`viewDidLoad`在错误下方添加了一个 NSLog 以查看我得到了什么，它返回 null：`NSLog(@"object at index: %@", team.abbreviation);`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T00:47:10.503

如果这是在 viewDidLoad 中，那么除非您已经初始化 indexPath 变量，否则它将无效。它仅在您的 tableView 方法中有效，因为它是通过函数传入的。

您有几个选项来获取您正在寻找的 indexPath：

```
Team *team = [leagueLocal.teams objectAtIndex:[NSIndexPath indexPathForRow:i inSection:k];
//where i and k are integers that indicate the row/section for the tableViewCell your looking for...(k would just be equal to 0 if you only have one section) 
```

或者另一种方式是，如果用户之前已经选择了您要查找的内容，那么您可以使用：

```
NSIndexPath *indexPath=[self.tableView indexPathForSelectedRow];
Team *team = [leagueLocal.teams objectAtIndex:indexPath.row];//now you can use it the way you have it written in your question 
```

希望能帮助到你！

# android - 在 Android 中读取 .txt 文件

> ID：15126872
> 
> 赞同：0
> 
> 时间：2013-02-28T03:25:38.893
> 
> 标签：android, inputstream

我有包含 JSON 内容的 txt 文件，该文件的大小为 88KB，现在我正在尝试读取此文件内容，但出现`Nullpointerexception`错误这是我的代码和 logcat。请帮忙。

我发布了我的解析 JSONcode

```
InputStream stream = getResources().openRawResource(R.raw.topiclist);
readTextFile(stream);//While debugging i got sourcenotfound on this line

public static void readTextFile(InputStream is)
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append((line + "\n"));
        }
    } catch (IOException e) {
        Log.w("LOG", e.getMessage());
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            Log.w("LOG", e.getMessage());
        }
    }
    topic=new GetTopicList();
    topic.parseJson(sb.toString());     

} 
```

**日志猫**

```
 02-27 22:29:45.170: E/AndroidRuntime(2099): FATAL EXCEPTION: main
    02-27 22:29:45.170: E/AndroidRuntime(2099): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.postreply/com.example.postreply.PostReply}: java.lang.NullPointerException
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.os.Handler.dispatchMessage(Handler.java:99)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.os.Looper.loop(Looper.java:137)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at java.lang.reflect.Method.invokeNative(Native Method)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at java.lang.reflect.Method.invoke(Method.java:511)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at dalvik.system.NativeStart.main(Native Method)
    02-27 22:29:45.170: E/AndroidRuntime(2099): Caused by: java.lang.NullPointerException
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.tomovwgti.socketio.SQLiteAdapter.openToWrite(SQLiteAdapter.java:56)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.tomovwgti.socketio.GetTopicList.parseJson(GetTopicList.java:126)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.example.postreply.PostReply.readTextFile(PostReply.java:200)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at com.example.postreply.PostReply.onCreate(PostReply.java:86)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.Activity.performCreate(Activity.java:5008)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    02-27 22:29:45.170: E/AndroidRuntime(2099):     ... 11 more 
```

**parseJson():**

```
public void parseJson(String response)
    {

        sqlAdapter=new SQLiteAdapter(context);

        sqlAdapter.openToWrite();

        //long s=sqlAdapter.countjournals();

        JSONArray ja = null;
        JSONObject json=null;
        String status = null;

            try {
                json=new JSONObject(response);
                status=json.getString("Status");

            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            if(status.equals("0"))
            {
                String addtopics;
                try {
                    addtopics = json.getString("AddTopics");
                    ja = new JSONArray(addtopics);
                } catch (JSONException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                int len=ja.length();

                topicid = new String[len];
                topic = new String[len];
                field = new String[len];
                subject = new String[len];
                topiccode = new String[len];
                topicStatus = new String[len];

                JSONObject jo;

                for(int j=0;j<len;j++)
                {

                    try
                    {
                        jo = ja.getJSONObject(j);
                        topicid[j] = jo.getString("TopicID");
                        field[j] = jo.getString("Field");
                        subject[j] = jo.getString("Subject");
                        topic[j] = jo.getString("Subcategory");
                        topiccode[j] = jo.getString("TopicCode");
                        topicStatus[j] = jo.getString("TopicStatus");

                        sqlAdapter.insert(topicid[j], field[j], subject[j], topic[j], topiccode[j], topicStatus[j]);

                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
                sqlAdapter.close();
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:37:16.523

此行正在生成错误：

```
sqlAdapter.openToWrite(); 
```

这意味着那`sqlAdapter`是`null`。这可能是因为它的初始化

```
sqlAdapter=new SQLiteAdapter(context); 
```

正在返回一个`null`值。您需要找出发生这种情况的原因并加以解决。

# c - 写入 char* 数组的 char 以某种方式发生变异

> ID：15126873
> 
> 赞同：0
> 
> 时间：2013-02-28T03:25:43.623
> 
> 标签：c, char, buffer

这应该是一个简单的函数（它计算字符串中唯一字符的数量），但我遇到了一个奇怪的问题。请注意，我的代码使用只需要 ASCII 字母 az 和 AZ。

```
int unique_chars(char* my_str) {
//printf("starting unique_chars\n");
  char seen_buffer[52]; // max 52 letters a-z & A-Z
  int seen_count = 1; // not ever expecting my_str to be NULL 
  int i, j;
  char next;
//printf("first char is %c\n", my_str[0]);
  seen_buffer[0] = my_str[0]; // first char must be unique

  for (i=1; i<strlen(my_str); i++) { // walk along the rest of my_str
    next = my_str[i];

    if (next >= 97) {
      next = next - 32; // the next char will always be capital, for convenience
    }

    for (j=0; j<seen_count; j++) { // compare next to all the unique chars seen before
//printf("current char is %c, checking against %c\n", next, seen_buffer[j]);
      if ((next==seen_buffer[j]) || (next+32==seen_buffer[j])) {
//printf("breaking\n");
        break; // jump to the next char in my_str if we find a match
      }
      if (j==seen_count-1) { // at this point, we're sure that next hasn't been seen yet
//printf("new unique char is %c\n", next);
        seen_count++;
        seen_buffer[seen_count] = next;
//printf("new char val is %c, should be %c\n", seen_buffer[seen_count], next);
        break;
      }
    }
  }
  return seen_count;
}

int main(int argc, char* argv[]){
  char* to_encode = argv[1];
  printf("unique chars: %d\n", unique_chars(to_encode));
} 
```

当我用某些字符串调用时，我得到不正确的结果。例如，尝试：

```
./a.out gghhiijj 
```

产生（printf未注释）：

```
starting unique_chars
first char is g
current char is G, checking against g
breaking
current char is H, checking against g
new unique char is H
new char val is H, should be H
current char is H, checking against g
current char is H, checking against 
new unique char is H
new char val is H, should be H
current char is I, checking against g
current char is I, checking against 
current char is I, checking against H
new unique char is I
new char val is I, should be I
current char is I, checking against g
current char is I, checking against 
current char is I, checking against H
current char is I, checking against H
new unique char is I
new char val is I, should be I
current char is J, checking against g
current char is J, checking against 
current char is J, checking against H
current char is J, checking against H
current char is J, checking against I
new unique char is J
new char val is J, should be J
current char is J, checking against g
current char is J, checking against 
current char is J, checking against H
current char is J, checking against H
current char is J, checking against I
current char is J, checking against I
new unique char is J
new char val is J, should be J 
```

所以我一直在我的 seen_buffer 中得到重复，因为一些空白字符存储在那里，而不是应该在那里的字母字符！然而，当我在写入 seen_buffer 后立即进行比较时（即新字符 val 是 %c，应该是 %c\n），会显示正确的字符！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:07:38.127

你在这里有一个错误：

```
 seen_count++;
    seen_buffer[seen_count] = next; 
```

第一个字符进入`seen_buffer[0]`并`seen_count`设置为 1。这意味着之后进入的*下一个*新字符递增到 2。没有任何内容进入（这是您在 printfs 中不断看到的空白字符），并且在检查字符时，你永远不会检查你刚刚输入的最后一个字符。`seen_buffer[2]``seen_count``seen_buffer[1]``seen_buffer`

交换这些行，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:57:51.310

您没有检查输入的值是否在 A 到 Z 和 a 到 z 之间

此外，您当前的代码可能在 char seen_buffer[52] 处出现缓冲区溢出，因此在代码中添加边界检查

我认为您的代码可以非常简单

这是一个简单的算法给你

```
 unsigned int returnUniqueChar (const char *input)
 {
     int count[52] = {0}; // initialize all the memory with zero
     int unique = 0;

     while (*input != '\0')
     {
          if ( (input >= 'A' && input <= 'Z') 
          {
                count[input -'A']++;
          }

           else if (input >= 'a' && input <= 'z')
          {
              count[input -'a'+ 26]++;
          }
          input++;
     }

     for (int i = 0; i < 56 && (count[i] == 1) ; i++ )
            unique++;

    return unique;

 } 
```

# email - 为什么 Outlook 在我的电子邮件模板中用损坏的 img 标签替换我的图像标签？

> ID：15126874
> 
> 赞同：2
> 
> 时间：2013-02-28T03:25:44.047
> 
> 标签：email, outlook, gmail, image

我正在用一些图像创建一个简单的电子邮件。它在 gmail 中看起来非常好（使用 Firefox、Google Chrome 甚至 IE 9 进行了测试），但在 Outlook 中，我原来的 img 标签被替换为随机的 img 标签，例如

> `<img src="http://part3.06070903.04020009@xxxxx.com">`

xxxx = 我的公司名称。

同样，当我在 html 中键入`<td height="20"></td>`仅用于保证金目的时，我`<br>`在 gmail 和 Outlook 中都得到了它的内部信息。这太奇怪了，因为在处理电子邮件之前我没有遇到这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:56:16.257

也许这个支持列表会对您有所帮助：

[http://msdn.microsoft.com/en-us/library/aa338201.aspx](http://msdn.microsoft.com/en-us/library/aa338201.aspx)

一般来说，最大的区别在于 Outlook 2007/2010 与其他 Outlook 版本之间由于法律原因使用旧的文字渲染器。

对于用 <br>-Tags 填充的空标签，我建议尝试使用   或   作为占位符内容来抑制 <br>。

# java - Apache CXF 和 tomcat

> ID：15126875
> 
> 赞同：8
> 
> 时间：2013-02-28T03:25:46.353
> 
> 标签：java, tomcat, cxf

我对 Apache CXF 和 tomcat 相当陌生。我正在尝试构建一个简单的 Web 服务并将其部署在 tomcat 上。下面是我的 web.xml 但是，当我尝试使用浏览器访问“服务”文件夹时，它说没有找到服务。我尝试创建 java web 服务客户端，但它也无法找到该服务。这有什么问题？

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>Sample web service provider</display-name>
    <listener>
        <!-- For Metro, use this listener-class instead: 
             com.sun.xml.ws.transport.http.servlet.WSServletContextListener -->
        <listener-class>
              org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
    <!-- Remove below context-param element if using Metro -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
              classpath:META-INF/cxf/cxf.xml
        </param-value>
    </context-param>
    <servlet>
        <servlet-name>WebServicePort</servlet-name>
        <!-- For Metro, use this servlet-class instead: 
             com.sun.xml.ws.transport.http.servlet.WSServlet  -->
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>WebServicePort</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T10:51:20.100

This means that you don't have any services exposed in your application. Your `web.xml` seems to be correct but I've just missed one thing, your Spring configuration. Add your Spring config location in your `web.xml`, for e.g.:

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

Also, you have to create a class which will implement your web service interface and expose it as the CXF endpoint in your Spring `applicationContext.xml` configuration file. For e.g.:

```
<bean id="candidateImpl" class="some.pckg.CandidateImpl"/>

<jaxws:endpoint id="candidateEndpoint"
                implementor="#candidateImpl"
                address="/Candidate"
        /> 
```

Your `CandidateImpl` class should have [@WebService](http://docs.oracle.com/javaee/6/api/javax/jws/WebService.html) annotation. For e.g.:

```
@WebService(targetNamespace = "http://something.com/ws/candidate",
        portName = "CandidateService",
        serviceName = "Candidate",
        endpointInterface = "some.pckg.types.CandidateService",
        wsdlLocation = "WEB-INF/wsdl/CandidateService.wsdl")
public class CandidateImpl implements CandidateService {
     //Implementation of all methods from CandidateService.
} 
```

If you've done everything correctly you should see that there is one service available under:

```
http(s)://whateverhost.com:<somePort>/SomeContextPath/services 
```

And you should be able to get the WSDL file like this:

```
http(s)://whateverhost.com:<somePort>/SomeContextPath/services/Candidate?wsdl 
```

**See also:**

*   [Writing a Web Service with Spring](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T18:46:32.537

您需要在 web.xml 中配置一个 servlet。下面举个例子。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE web-app
       PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
       "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>

   <servlet>
       <servlet-name>CXFServlet</servlet-name>
       <display-name>CXF Servlet</display-name>
       <servlet-class>
           org.apache.cxf.transport.servlet.CXFServlet
       </servlet-class>
       <init-param>
           <param-name>config-location</param-name>
           <param-value>/WEB-INF/spring-ws-servlet.xml</param-value>
       </init-param>
       <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
       <servlet-name>CXFServlet</servlet-name>
       <url-pattern>/services/*</url-pattern>
   </servlet-mapping>

</web-app> 
```

现在您需要在 WEB-INF 文件夹下定义一个名为 spring-ws-servlet.xml 的文件。下面是 spring-ws-servlet.xml 内容的示例，其中包含 Web 服务的实际配置。当然，这取决于您的逻辑：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.2.xsd
       http://cxf.apache.org/jaxws
       http://cxf.apache.org/schemas/jaxws.xsd">

   <context:component-scan base-package="com.sample.service"/>

   <!-- JAX-WS Service Endpoint -->
   <bean id="personImpl" class="com.sample.service.impl.PersonServiceImpl"/>

   <jaxws:endpoint id="personEndpoint"
                   implementor="#personImpl"
                   address="/person">
       <jaxws:properties>
           <entry key="schema-validation-enabled" value="true"/>
       </jaxws:properties>
   </jaxws:endpoint>
   <!-- JAX-WS Service Endpoint End-->
</beans> 
```

[有了这个，您可以在http://localhost:8080/services/person?wsdl](http://localhost:8080/services/person?wsdl)下访问您的 Web 服务

这是取自这篇文章。这是一个关于使用 IntelliJ Idea 和 Spring 创建 Cxf 服务的教程

[https://aldavblog.wordpress.com/2015/01/22/creating-a-web-service-from-scratch-using-spring-maven-apache-cxf/](https://aldavblog.wordpress.com/2015/01/22/creating-a-web-service-from-scratch-using-spring-maven-apache-cxf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T15:08:04.070

您需要设置 spring 配置文件位置才能使其工作。您可以按如下方式进行设置。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

# c++ - 在 C++ 中有效使用布尔真假？

> ID：15126881
> 
> 赞同：1
> 
> 时间：2013-02-28T03:26:47.597
> 
> 标签：c++, memory, optimization, compiler-construction, storage

任何编译器专家都能够评论布尔值的有效使用吗？具体来说，编译器是否能够优化 a`std::vector<boolean>`以使用最少的内存？是否有等效的数据结构？

过去，有些语言的编译器可以将布尔数组压缩为每个布尔值仅一位的表示形式。也许对 C++ 可以做的最好的事情是使用`std::vector<char>`存储布尔值以最小化内存使用？

这里的用例将存储数亿个布尔值，其中单个字节将节省大量空间，超过每个值 4 个或更多字节和单个位，甚至更多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T03:31:05.910

看[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)

> **专长**
> 
> 标准库为 bool 类型提供了 std::vector 的专门化，它针对空间效率进行了优化。
> vector<bool> 节省空间的动态位集（类模板特化）

并来自“C++ 工作草案，2012-11-02”

> **23.3.7 类向量 [vector.bool]**
> 1 为了优化空间分配，提供了一个专门用于 bool 元素的向量：
> template <class Allocator> class vector<bool, Allocator> {
> ...
> }
> 
> 3 不要求将数据存储为布尔值的连续分配。建议使用空间优化的位表示。

所以没有要求，而只是建议，将`bool`值存储为位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:29:19.870

std::vector for bool 是一个模板专业化，可以满足您的要求。

[你可以在这里](http://www.cplusplus.com/reference/vector/vector-bool/)阅读更多。

您可能还想探索标准的[bitset](http://www.cplusplus.com/reference/bitset/bitset/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T03:50:03.643

请注意，这`vector<bool>`不是一个容器，但是它假装是一个并提供了迭代器。如果您将其视为普通容器，例如尝试获取元素的地址，那么有一天可能会导致混乱和错误。

如果您需要为每个布尔值存储 1 位，您可以考虑`std::bitset`或[boost::dynamic_bitset 。](http://www.boost.org/doc/libs/1_53_0/libs/dynamic_bitset/dynamic_bitset.html)这些数据结构并不伪装成容器，因此在使用它们时不太可能出错，尤其是在模板代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:29:48.140

在被广泛认为是标准中的一个缺陷中，[std::vector](http://en.cppreference.com/w/cpp/container/vector_bool)专门用于使用单个位来表示每个`bool`值。

如果这恰好是您正在寻找的东西，那么就使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T03:38:26.550

作为一种保证高效存储的与标准无关的方式，您可以创建自己的`Bitvector`类。基本上对于每 8`bool`个值，您只需要分配一个`char`，然后您可以将每个值存储`bool`在一个位中。然后，您可以在访问器/突变器中使用位移技术来存储/检索您的各个位。

Ron Penton 和 André LaMothe 的[Data Structures for Game Programmers](https://rads.stackoverflow.com/amzn/click/com/1931841942)中概述了一个这样的示例（我也建议将其作为一般数据结构参考）。不过自己写也不是太难，而且，虽然我没有详细搜索，但互联网上可能还有一些更多的例子。

# java - 在开始测量性能之前预热代码

> ID：15126887
> 
> 赞同：0
> 
> 时间：2013-02-28T03:27:33.167
> 
> 标签：java, sql, database, multithreading, performance-testing

我已经开始研究一个项目，在该项目中我将传递我需要使用的线程数，然后我将尝试测量`SELECT sql`执行所需的时间，因此我在这条线之前有一个计数器`preparedStatement.executeQuery();`和一个计数器测量这条线之后的时间。

以下是我的代码片段-

```
public class TestPool {

    public static void main(String[] args) {

        final int no_of_threads = 10;

        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(no_of_threads);

        // queue some tasks
        for(int i = 0; i < 3 * no_of_threads; i++) {
            service.submit(new ThreadTask());
        }

        // wait for termination
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

        // Now print the select histogram here
        System.out.println(ThreadTask.selectHistogram);
    }
} 
```

下面是我实现 Runnable 接口的 ThreadTask 类-

```
class ThreadTask implements Runnable {

    private PreparedStatement preparedStatement = null;
    private ResultSet rs = null;

    public static ConcurrentHashMap<Long, AtomicLong> selectHistogram = new ConcurrentHashMap<Long, AtomicLong>();

    public ThreadTask() {
    }

    @Override
    public void run() {

        ...........

        long start = System.nanoTime();
        rs = preparedStatement.executeQuery();
        long end = System.nanoTime() - start;

        final AtomicLong before = selectHistogram.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
           before.incrementAndGet();
        }

        ..............

    }
} 
```

**问题陈述：-**

今天我开了一个设计会议，会议上大多数人说不要在运行程序后立即开始测量时间。有一些热身时间，然后开始测量。所以我认为在那之后这样做是有道理的。现在我在想我应该如何在我的代码中加入这个变化。我将在什么基础上这样做？任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:34:15.513

最简单的热身方法之一是在运行实际（定时）测试之前在同一个 JVM 中运行相同的测试，而无需计时。您应该运行数千次迭代，让 JIT 有机会识别和优化热点。[How do I write a correct micro-benchmark in Java?](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)的答案中有更多详细信息？（关于这个和其他你需要考虑的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:25:25.453

您可以运行它大约 15 分钟来创建新的线程任务。之后清除 selectHistogram 重新运行所需的线程数以打印指标。

# html5-canvas - Kineticjs Draggable 不适用于 -ms-transform

> ID：15126888
> 
> 赞同：1
> 
> 时间：2013-02-28T03:27:47.300
> 
> 标签：html5-canvas, kineticjs

我一直在尝试使用 Kineticjs 4.3.3。创建图形图像并可以拖过父 div，但如果父 div 在其样式属性下设置了缩放，它将不起作用（提供的示例[http://jsfiddle.net/kreavie/MZSE9/](http://jsfiddle.net/kreavie/MZSE9/)）。有没有人知道如何在之前设置缩放时拖动工作？

谢谢， krlib

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script type="text/javascript">

 window.onload = function () {

        var par = document.getElementById('frame');
        var canvas = document.createElement('div');
        canvas.id = "canvas1";
        par.appendChild(canvas);

        var stage = new Kinetic.Stage({
            container: 'canvas1',
            width: 500,
            height: 500
        });

        var layer = new Kinetic.Layer();
        var triangle = new Kinetic.Polygon({
            stroke: "red",
            strokeWidth: 4,
            points: [60, 100, 90, 100, 90, 140],
            draggable: true
        });

        layer.add(triangle);
        stage.add(layer);

    }
    </script>

</head>
<body >

     <div id="frame" style="width: 200px; height: 200px; -ms-transform: scale(0.420091);">
                  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:19:38.843

见：http: [//jsfiddle.net/MZSE9/2/](http://jsfiddle.net/MZSE9/2/)

您的对象是 canvas 元素的本地对象，而不是您应用缩放的另一个 div。

如果您想缩放对象、图层或整个舞台，只需执行以下操作：

```
 shape.setScale(xAmount, yAmount);
 stage.setScale(xAmount, yAmount);
 layer.setScale(xAmount, yAmount); 
```

# git - git 与 git-svn 捆绑

> ID：15126889
> 
> 赞同：2
> 
> 时间：2013-02-28T03:27:51.133
> 
> 标签：git, git-svn, git-bundle

我正在尝试将 git-bundle 与 git-svn 存储库一起使用。本质上，我需要创建一个离线 git 存储库，其中包含我们生产 SVN 系统的克隆。SVN 仓库是通过 git-svn 克隆的，效果很好。它会克隆我们的代码，并将其列在 remotes/* 下。

现在是困难的部分。我需要将其与我们的离线存储库保持同步。离线环境无法访问互联网，并且只能通过单向方法（例如 cd 等）获取更新。这是一种单向交易。我想用 git-bundle 做到这一点。问题似乎归结为 git-svn 将 svn 存储库标记为远程。我曾尝试使用...检查一个捆绑包`git bundle create ____.bundle --all`，但它只包括我的主人。它不包括遥控器参考。但是，我需要获取所有这些信息。

这有意义吗？任何提示/建议？应该明确的是，我们不会提交到 SVN 端的 git 存储库，它将是只读的。在离线方面，我们将分支远程分支，并在那里提交。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T04:17:01.093

尽管 git svn 最初进行了设置，以便 svn 分支显示为远程，但可以通过更改用于创建分支的 refspec 来更改。但是，这应该在从 svn 存储库中获取任何内容之前完成。

```
git svn init --stdlayout http/svn.server/path svnclone
cd svnclone
edit .git/config 
```

然后更改`fetch`and`branches`行，并可能将`tags`行更改为：

```
fetch = trunk:refs/heads/trunk
branches = branches/*:refs/heads/*
tags = tags/*:refs/tags/* 
```

如果 svn 存储库没有使用标准布局，您可以像往常一样在调用`git svn init`. 在这种情况下，您希望将上述行的部分保留在冒号之前，因为它们只是更改冒号之后的部分。

完成该设置后，您就可以使用它`git svn fetch`来实际复制内容。由于分支进入`refs/heads`命名空间，包含命令的 git`bundle`会将它们视为本地分支。只要该克隆仅用作其他克隆的源（通过捆绑包或仅使用克隆命令），就应该没有问题。虽然如果有一个名为的 svn 分支`master`或者`trunk`这可能是一个问题。

# google-maps - 谷歌地图多个实例

> ID：15126894
> 
> 赞同：0
> 
> 时间：2013-02-28T03:28:29.590
> 
> 标签：google-maps

我是谷歌地图开发的新手。我正在使用谷歌地图 javasccript api v3。

使用以下 url url：[https](https://developers.google.com/maps/documentation/javascript/tutorial#api_key) ://developers.google.com/maps/documentation/javascript/tutorial#api_key 我能够生成生成/显示地图所需的密钥。我为此尝试了一个示例。

我真正想知道的是：我们可以同时在一个页面上添加**多个谷歌地图实例**吗？*

另外，我有点困惑，就像一天内可以加载地图的次数有限制（大约 25,000 次），如果超过该次数，那么该特定地图的下一次请求会收费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:09:10.700

1) 在 Google Dev Console 中，它指出 Android Google Maps v2 调用没有限制，而常规 Google Maps v2 有一个设置为 (25,000)。我会链接到控制台，但你必须登录。

2) 不，我认为您不能一次在一项活动上运行多个地图实例。

希望这可以帮助。

# sql-server - 从 3 个表中获取记录

> ID：15126896
> 
> 赞同：0
> 
> 时间：2013-02-28T03:28:39.070
> 
> 标签：sql-server, tsql, join

在 SQL Server 中，是否有机会显示 3 个表的结果？（实际上是 4 个）

第 4 个表包含 1 列与其他列类似。其他3张表的相似列的值不同。换句话说，如果您在第 4 个表格列中选择“1”，则应显示第一个表格的结果，如果您选择“2”，则应显示第 2 个等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:34:14.747

```
select fourth.pk,
case fourth.columnx
when '1' then one.columnx
when '2' then two.columnx
when '3' then three.columnx
else 'Exception to the rule?' 
end as 'Column A'
from fourth 
join one on fourth.joinid=one.joinid
join two on fourth.joinid=two.joinid
join three on fourth.joinid=three.joinid 
```

# css - 以宽度 100% 定位

> ID：15126897
> 
> 赞同：1
> 
> 时间：2013-02-28T03:28:50.657
> 
> 标签：css, positioning

我无法弄清楚为什么 div 类 pic-container 不会与其他 3 个页面顶部对齐。

每个子 div 的宽度为 25%。

我有一种感觉我错过了一些明显的东西..

这里的例子：http: [//tinkerbin.com/NS7vagaq](http://tinkerbin.com/NS7vagaq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:32:50.687

放

```
.pic-container{
    font-size:0;
    } 
```

到`display: inline;`

所以它是：

```
.pic-container{
    font-size:0;
    display:inline;
    } 
```

* * *

由于您更改了代码的结构，因此上述方法不再有效，请改用以下方法：

```
<div class="pic_container">
    <img src="images/1.jpg">  
    <span class="viewer">  
        <img src="images/2.jpg">
        <img src="images/3.jpg">
    </span>
    <img src="images/4.jpg">
</div> 
```

不需要特殊的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:31:22.280

在您的示例中，您在 DIV 中有第四个标识，与其他三个不同。由于 DIV 是块级元素，因此第二个“pic-container”div 中的标识将出现在其他 div 的下方。

如果您将第四个标识也移动到与前三个相同的 div 容器中，它们会排成一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:31:48.277

因为 div 是块级元素。将其更改为内联并瞧。

```
div {
  display:inline;
} 
```

[http://tinkerbin.com/rz9WlaIg](http://tinkerbin.com/rz9WlaIg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:33:58.333

将 CSS 更改为：

```
.pic-container{
    font-size:0;
    display: inline;
} 
```

### 小提琴：[http ://tinkerbin.com/DH6nLkQO](http://tinkerbin.com/DH6nLkQO)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T03:45:06.727

你也可以漂浮它。

```
.pic-container img { margin:0; padding: 0; float:left; } 
```

# actionscript-3 - 在 Flash 动作脚本中绘制矩形

> ID：15126898
> 
> 赞同：-2
> 
> 时间：2013-02-28T03:29:03.480
> 
> 标签：actionscript-3, flash

按住鼠标时，我试图在 Flash 中绘制一个矩形。

这是我在 flash 文件中的代码：

```
import flash.events.MouseEvent;

var color:Number;

stage.addEventListener(MouseEvent.MOUSE_DOWN,startDrawing);
stage.addEventListener(MouseEvent.MOUSE_UP,stopDrawing);
function startDrawing(e:MouseEvent):void
{
    stage.addEventListener(MouseEvent.MOUSE_MOVE, makeShapes);
    color = Math.random() * 0xFFFFFF;
}
function stopDrawing(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, makeShapes);
}

function makeShapes(e:MouseEvent):void
{
    var rectangle:Rectangle = new Rectangle(10,10,color);
    addChild(rectangle);
    rectangle.x = mouseX;
    rectangle.y = mouseY;
} 
```

这是我的 actionscript 3.0 课程中的内容：

```
package  {

    import flash.display.MovieClip; 

    public class Rectangle extends MovieClip {

        public function Rectangle(w:Number=40,h:Number=40,color:Number=0xff0000) {
            graphics.beginFill(color);
            graphics.drawRectangle(0,0,w,h);
            graphics.endFill();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:39:29.863

我需要更改的只是 actionscript 值的代码

我改变了这个：

```
graphics.drawRectangle(0,0,w,h); 
```

对此：

```
graphics.drawRect(10,10,10,10); 
```

# asp.net-mvc - DTO 如何适应 MVC 应用程序的 Repository+Service 模式？

> ID：15126899
> 
> 赞同：3
> 
> 时间：2013-02-28T03:29:06.797
> 
> 标签：asp.net-mvc, model-view-controller, dto

我进入 MVC 大约一个月，据我了解，应用程序架构的一个很好的方法是：

MVC <> 服务 <> 存储库 <> 核心

在 MVC 中，我们有视图和控制器来填充控制器的视图模型。我的问题是：数据传输对象到底是从哪里来的？我正在构建一个单页网络应用程序，并且我正试图从一开始就这样做。

根据我所做的阅读，我应该使用 DTO 来“扁平化”模型对象，然后再将它们传递给 ViewModel。它们是否充当从服务传递到控制器的“我需要的唯一数据”对象，此时视图模型被构造？如果是这样，那么每个模型定义（即 Sets、Cards、Users）是否应该在 Core 层具有相应的 DTO 类？这里的任何澄清都会很棒，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:58:21.147

首先，关于这句话：“一个非常好的应用程序架构方法是......”：我不相信所有应用程序都有一个好的方法，我更喜欢总是使用最简单的方法（即更少层）可以解决您手头的问题。

当您说“服务”时，它似乎是一整层 Web 服务，而不仅仅是一些域服务类；在我使用 Asp.Net MVC 看到的大多数情况下，控制器本身可以完成服务的角色，因此无需再添加一层。当然也有例外，只要确保你增加复杂性的理由是合法的。

关于 DTO 和视图模型：DTO 就像您所描述的那样，将对象模型展平并返回“仅我需要的数据”。DTO 是一个更通用的术语，通常用于您不知道谁是消费者的 Web 服务。将（Asp.Net MVC）视图模型视为一种更专业的 DTO，它返回“仅*视图*需要的数据”。因此，如果您不需要额外的服务层，也不需要额外的 DTO 层，只需使用视图模型直接展平域类并从控制器返回它们。

事实上，对于非常简单的应用程序，即使模型 x ViewModels 的分离也是多余的——在 ViewBag 的帮助下，可以使用单个模型层来完成这两个角色。我不知道你的要求，所以我不能说哪个更适合你。

最后，有一条评论：如果你必须构建一个单页应用程序，Asp.Net MVC 并不是最适合这项工作的工具。我建议在服务器上使用 Asp.Net Web Api（只有服务，没有视图）和**客户端**mvc 框架，例如 BackboneJs 或 AngularJs。

# haskell - Data.Map中键/值关系的静态保证

> ID：15126902
> 
> 赞同：12
> 
> 时间：2013-02-28T03:29:43.793
> 
> 标签：haskell, compile-time, functional-dependencies, type-constraints, gadt

我想为 Data.Map 创建一个特殊的智能构造函数，对键/值对关系的类型有一定的约束。这是我试图表达的约束：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, DataKinds #-}

data Field = Speed | Name | ID
data Value = VFloat Float | VString ByteString | VInt Int

class Pair f b | f -> b where
    toPair :: f -> b -> (f, b)
    toPair = (,)

instance Pair Speed (VFloat f) 
instance Pair ID (VInt i) 
```

对于每个字段，只有一种类型的值应该与之关联。就我而言，将`Speed`字段映射到`ByteString`. 一个`Speed`字段应该唯一地映射到一个`Float`

但我收到以下类型错误：

```
Kind mis-match
The first argument of `Pair' should have kind `*',
but `VInt' has kind `Value'
In the instance declaration for `Pair Speed (VFloat f)' 
```

使用`-XKindSignatures`：

```
class Pair (f :: Field) (b :: Value) | f -> b where
    toPair :: f -> b -> (f, b)
    toPair = (,)

Kind mis-match
Expected kind `OpenKind', but `f' has kind `Field'
In the type `f -> b -> (f, b)'
In the class declaration for `Pair' 
```

我明白为什么我会得到 Kind 不匹配，但是我该如何表达这个约束，以便`toPair`在不匹配的`Field`和`Value`.

#haskell 建议我使用 a `GADT`，但我还没有弄清楚。

这样做的目标是能够写

```
type Record = Map Field Value

mkRecord :: [Field] -> [Value] -> Record
mkRecord = (fromList .) . zipWith toPair 
```

这样我就可以`Map`在尊重键/值不变量的地方制作安全的 s。

所以这应该类型检查

```
test1 = mkRecord [Speed, ID] [VFloat 1.0, VInt 2] 
```

但这应该是编译时错误

```
test2 = mkRecord [Speed] [VInt 1] 
```

编辑：

我开始认为我的具体要求是不可能的。使用我原来的例子

```
data Foo = FooInt | FooFloat
data Bar = BarInt Int | BarFloat Float 
```

为了在`Foo`and上强制执行约束，必须有某种方法在类型级别`Bar`区分 a `FooInt`and并且类似地 for 。因此我需要两个 GADT`FooFloat``Bar`

```
data Foo :: * -> * where
    FooInt   :: Foo Int
    FooFloat :: Foo Float

data Bar :: * -> * where
    BarInt   :: Int   -> Bar Int
    BarFloat :: Float -> Bar Float 
```

现在我可以编写一个实例`Pair`，仅当`Foo`和`Bar`都被标记为相同类型时才成立

```
instance Pair (Foo a) (Bar a) 
```

我有我想要的属性

```
test1 = toPair FooInt (BarInt 1)   -- type-checks
test2 = toPair FooInt (BarFloat 1) -- no instance for Pair (Foo Int) (Bar Float) 
```

但我失去了写作的能力，`xs = [FooInt, FooFloat]`因为那需要一个异构的列表。此外，如果我尝试使用`Map`同义词`type FooBar = Map (Foo ?) (Bar ?)`，我会坚持使用`Map`只有`Int`类型或只有`Float`类型，这不是我想要的。它看起来相当绝望，除非有一些我不知道的强大的类型类魔法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T05:08:19.560

你可以像这样使用 GADT，

```
data Bar :: * -> * where
   BarInt   :: Int -> Bar Int
   BarFloat :: Float -> Bar Float 
```

现在您有 2 种不同类型的 Bar 可用（Bar Int）和（Bar Float）。然后您可以将 Foo 拆分为 2 种类型，除非有理由不这样做。

```
data FooInt 
data FooFloat

class Pair f b c| f b -> c where
    toPair :: f -> b -> c

instance Pair FooInt (Bar Int) (FooInt,Int) where
    toPair a (BarInt b)= (a,b) 
```

这是一个有点笨拙的例子，但它展示了如何使用 GADT 专门化类型。这个想法是他们随身携带“幻影类型”。[在此页面上以及此页面](http://en.wikibooks.org/wiki/Haskell/GADT)上的 DataKinds对此进行了很好的描述[。](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/kind-polymorphism-and-promotion.html)

编辑：

如果我们同时制作 Foo 和 Bar GADT，我们可以使用[这里描述](http://www.haskell.org/haskellwiki/GHC/Type_families)的类型或数据族。因此，这种组合允许我们根据键类型设置 Map 的类型。仍然感觉还有其他可能更简单的方法来实现这一点，但它确实展示了 2 个很棒的 GHC 扩展！

```
data Foo :: * -> * where
   FooInt   :: Int   -> Foo Int
   FooFloat :: Float -> Foo Float

data Bar :: * -> * where
   BarInt   :: Int   -> Bar Int
   BarFloat :: Float -> Bar Float

class Pair f b c| f b -> c where
    toPair :: f -> b -> c

instance Pair (Foo Int) (Bar Int) ((Foo Int),Int) where
   toPair a (BarInt b)= (a,b)    

type family FooMap k :: *

type instance FooMap (Foo Int) = Map (Foo Int) (Bar Int) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:28:47.687

使用 Dynamic and Typeable 和 FunDeps 的老式版本。为了保证它的安全，你只需要不导出破坏抽象的东西，比如`SM`构造函数和`SMKey`类型类。

```
{-# LANGUAGE DeriveDataTypeable, MultiParamTypeClasses, FunctionalDependencies, TypeSynonymInstances, FlexibleInstances #-}
module Main where
import qualified Data.Map as M
import Data.Dynamic
import Data.Typeable

data SpecialMap = SM (M.Map String Dynamic)

emptySM = SM (M.empty)

class (Typeable a, Typeable b) => SMKey a b | a -> b

data Speed = Speed deriving Typeable
data Name = Name deriving Typeable
data ID = ID deriving Typeable

instance SMKey Speed Float
instance SMKey Name String
instance SMKey ID Int

insertSM :: SMKey k v => k -> v -> SpecialMap -> SpecialMap
insertSM k v (SM m) = SM (M.insert (show $ typeOf k) (toDyn v) m)

lookupSM :: SMKey k v => k -> SpecialMap -> Maybe v
lookupSM k (SM m) =  fromDynamic =<< M.lookup (show $ typeOf k) m

-- and now lists

newtype SMPair = SMPair {unSMPair :: (String, Dynamic)}
toSMPair :: SMKey k v => k -> v -> SMPair
toSMPair k v = SMPair (show $ typeOf k, toDyn v)

fromPairList :: [SMPair] -> SpecialMap
fromPairList = SM . M.fromList . map unSMPair

{-
*Main> let x = fromPairList [toSMPair Speed 1.2, toSMPair ID 34]
*Main> lookupSM Speed x
Just 1.2
-} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T13:57:10.210

当我第一次阅读这篇文章时，我试图解决在所需情况下强制编译错误的问题，但似乎有些不对劲。然后我尝试了一种具有多张地图和提升功能的方法，但仍有一些事情困扰着我。然而，当我意识到你实际上要做的是创建某种形式的可扩展记录时，它让我想起了几个月前我意识到的一个非常酷的包：[Vinyl 包](https://github.com/jonsterling/Vinyl)（可[在 Hackage 上获得](http://hackage.haskell.org/package/vinyl-0.1.0.0)）。这可能是也可能不是您所追求的效果，它确实需要 GHC 7.6，但这里有一个改编自[自述文件](https://github.com/jonsterling/Vinyl/blob/master/README.lhs)的示例：

```
{-# LANGUAGE DataKinds, TypeOperators #-}
{-# LANGUAGE FlexibleContexts, NoMonomorphismRestriction #-}

import Data.Vinyl

speed = Field :: "speed" ::: Float
name  = Field :: "name"  ::: String
iD    = Field :: "id"    ::: Int 
```

现在可以创建包含任意数量的这些字段的记录：

```
test1 = speed =: 0.2

test2 = speed =: 0.2 
    <+> name  =: "Ted"
    <+> iD    =: 1 
```

它们属于不同的类型，因此尝试在给定函数中传递错误数量的信息将导致编译错误。类型同义词可以使其更易于使用，但不需要类型注释。

```
type Entity = Rec ["speed" ::: Float, "name" ::: String, "id" ::: Int]
test2 :: Entity 
```

该库在不需要模板 Haskell 的情况下为这些类型提供自动镜头，并提供允许轻松处理子类型的铸造功能。例如：

```
test2Casted :: Rec '["speed" ::: Float]
test2Casted = cast test2 
```

（需要额外的勾号才能获得适合单个字段记录的种类）。

这不允许`mkRecord`您使用确切的类型，但它似乎确实满足了对可扩展记录进行静态检查的要求。如果这对您不起作用，您仍然可以使用 Vinyl 源中的巧妙类型技术来到达您想去的地方。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T19:20:00.897

我会用一些 getter 和 setter 创建一个不透明的数据类型。

```
module Rec (Rec, getSpeed, getName, getID, setSpeed, setName, setID, blank) where

data Rec = R { speed :: Maybe Double; name :: Maybe String; id :: Maybe Int }

getSpeed :: Rec -> Maybe Double
getSpeed = speed

setSpeed :: Double -> Rec -> Rec
setSpeed s r = r { speed = s }

blank = R { speed = Nothing, name = Nothing, id = Nothing } 
```

# ibm-mobilefirst - Android 的 Worklight 初始化始终清除 WebView 历史记录

> ID：15126904
> 
> 赞同：0
> 
> 时间：2013-02-28T03:30:05.023
> 
> 标签：ibm-mobilefirst

我注意到每次在 Android 应用程序中初始化 Worklight/Cordova 时都会调用 cordovaInitCallback。特别是，它调用 Cordova 的“clearHistory”来清除 WebView 历史记录。当我尝试在多页应用程序中使用 window.history 时，这一直是一个问题，因为在从一页到另一页的初始化过程中，历史总是被重置。

由于评论表明此 clearHistory 调用的目的是防止在直接更新场景中返回旧页面，因此是否可以通过 Android 环境检查加强该条件，以便仅在刚刚发生直接更新时调用它? 例如，我能想到的一种情况是当connectOnStartup=false 时，就不会发生直接更新。

wlclient.js：

```
 var cordovaInitCallback = function(returnedData) {
            onEnvInit(options);
            if (WL.Client.getEnvironment() == WL.Env.ANDROID) {
                if (returnedData !== null && returnedData !== "") {
                    WL.StaticAppProps.APP_VERSION = returnedData;
                }
                // In development mode, the application has a settings
                // widget in which the user may alter
                // the application's root url
                // and here the application reads this url, and replaces the
                // static prop
                // WL.StaticAppProps.WORKLIGHT_ROOT_URL
                // __setWLServerAddress for iOS is called within
                // wlgap.ios.js's wlCheckReachability
                // function because it is an asynchronous call.

                // Only in Android we should clear the history of the
                // WebView, otherwise when user will
                // press the back button after upgrade he will return to the
                // html page before the upgrade
                if (**WL.Env.ANDROID == getEnv()**) {
                    cordova.exec(null, null, 'Utils', 'clearHistory', []);
                }
            } 
```

我目前正在使用 Worklight 5.0.5，并检查了 5.0.5.1 中是否存在同样的情况。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:48:28.457

Worklight 的架构设计是 SPA（单页应用程序）。
`cordovaInitCallback`在应用程序的生命周期中应该只调用一次。
也就是说，如果你愿意，你可以覆盖它。

# objective-c - 设置一对多关系后，NSFetchRequest 查询返回 nil

> ID：15126908
> 
> 赞同：0
> 
> 时间：2013-02-28T03:30:23.997
> 
> 标签：objective-c, core-data, nspredicate, nsfetchrequest, magicalrecord

我有两个`NSManagedObject`子类，`Book`和`Category`. 两者是一对多的关系。

另一方面`Book`，它与 有`categories`关系`Category`。反向`Category`连接到`Book`via `books`。

我的应用程序设置是每次打开应用程序时从我的服务器下载数据。下载的数据将被遍历并保存在应用程序中。在我的应用程序中，我使用[Magical Record](https://github.com/magicalpanda/MagicalRecord)与 CoreData 进行交互。

`Category`数据将首先下载，然后以 JSON 格式保存：

```
{
    "categories" : [
        {
            "id" : 1,
            "name" : "Fiction"
        },
        {
            "id" : 2,
            "name" : "Non-fiction"
        }
    ]
} 
```

保存没有问题`Category`。而稍后应用生命周期`Book`数据将以 JSON 格式保存，如下所示：

```
{
    "books" : [
        {
            "id" : 1,
            "name" : "Fiction 1",
            "category_id" : 1
        },
        {
            "id" : 2,
            "name" : "Fiction 2",
            "category_id" : 2
        }
    ]
} 
```

当我想将`Book`关系分配给`Category`. 我分配关系的代码：

```
for (NSDictionary *bookInfo in jsonObject[@"books"]) {
    Book *book = [Book createEntity];
    book.identifier = bookInfo[@"id"];
    book.name = bookInfo[@"name"];

    Category *category = [Category findFirstByAttribute:@"identifier" withValue:bookInfo[@"category_id"]];

    book.category = category;

    [[NSManagedObjectContext contextForCurrentThread] saveNestedContexts];
} 
```

在第一个循环中，bookObject 被成功保存。但是在第二个循环和下一个循环中，`Category`不能再查询了。它返回 nil，尽管`identifier`是相同的。

我确实对所有`Category`通孔进行了检查`[Category findAll]`并遍历了所有记录，发现`Category`在第二个和下一个循环中仍然存在具有相同 id 的。

问题是为什么在第二个循环`findFirstByAttribute:withValue:`中检索失败？`Category`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:42:23.797

我通过将[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)更新到最新版本 (2.1) 解决了这个问题。

然后我修改了我的`NSManagedObject`保存方法`saveNestedContexts`从新添加的方式`saveUsingCurrentThreadContextWithBlockAndWait`。

# jquery - 如何解决多个jquery版本之间的冲突？

> ID：15126912
> 
> 赞同：2
> 
> 时间：2013-02-28T03:30:59.183
> 
> 标签：jquery

我意识到关于在一个页面上使用多个 jquery 版本的问题已经有各种各样的答案，但我无法弄清楚如何应用它们。

在我的页面上，我有两个 .js 文件 - 一个用于操作可折叠菜单，第二个用于厚盒画廊。当我添加图库时，可折叠菜单停止工作。当我尝试使用下面链接中的无冲突解决方案时，菜单有效，但画廊图像将不再加载。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

关于我做错了什么的任何想法？我需要向 .html 文件和 .js 文件中添加内容吗？

代码：

```
<script type="text/javascript" src="../../01 Main/includes/jquery-1.6.min.js"></script>
<script type="text/javascript" src="../../01 Main/includes/main.js"></script>
<script type="text/javascript">
<div id="log">
  <h3>Before $.noConflict(true)</h3>
</div>
</script>

<script type="text/javascript" src="../scripts/jquery-latest.js"></script>
<script type="text/javascript" src="../scripts/thickbox.js"></script>
<script type="text/javascript">
var $log = $( "#log" );

$log.append( "2nd loaded jQuery version ($): " + $.fn.jquery + "<br>" );

jq16min = jQuery.noConflict(true);

$log.append( "<h3>After $.noConflict(true)</h3>" );
$log.append( "1st loaded jQuery version ($): " + $.fn.jquery + "<br>" );
$log.append( "2nd loaded jQuery version (jqlatest): " + jqlatest.fn.jquery + "<br>" );
</script> 
```

也试过：

```
<script type="text/javascript" src="../../01 Main/includes/jquery-1.6.min.js"></script>
<script type="text/javascript" src="../../01 Main/includes/main.js"></script>
<script type="text/javascript">
var jQuery_1_6_min = $.noConflict(true);
</script>

<script type="text/javascript" src="../scripts/jquery-latest.js"></script>
<script type="text/javascript" src="../scripts/thickbox.js"></script>
<script type="text/javascript">
var jQuery_latest = $.noConflict(true);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:47:16.220

使用多个版本的 jquery 似乎一点也不聪明，但如果必须，您可以将其中一个版本分配给另一个全局变量，即链接到第一个版本

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
window._$ = jQuery; 
```

然后加载下一个版本；

```
(function(){
  var newscript = document.createElement('script');
     newscript.type = 'text/javascript';
     newscript.async = true;
     newscript.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(newscript);
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T03:53:57.893

可能重复：[我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)

简而言之，他的回答：

```
<!-- load jQuery 1.1.3 -->
<script type="text/javascript" src="http://example.com/jquery-1.1.3.js"></script>
<script type="text/javascript">
var jQuery_1_1_3 = $.noConflict(true);
</script>

<!-- load jQuery 1.3.2 -->
<script type="text/javascript" src="http://example.com/jquery-1.3.2.js"></script>
<script type="text/javascript">
var jQuery_1_3_2 = $.noConflict(true);
</script> 
```

不得不经历同样的事情:)

# javascript - 如何检查标签是否仅包含jquery中的特定字符

> ID：15126917
> 
> 赞同：2
> 
> 时间：2013-02-28T03:31:19.817
> 
> 标签：javascript, jquery

我能够检查输入是否包含特定字符。但我想知道输入文本是否包含多个该字符。

例如，

当我在文本框中只有“，”时，我可以处理它之前的单词，但我必须检查整个文本框是否包含多个逗号。例如，当我按“,,,”时。

任何帮助检查它都会做。

谢谢

这是我的代码：

```
function changeSubject(current_value) {
    if (current_value != "," && current_value != "") {
        var new_value = current_value.slice(0, -1);
        $(".main-tag-elements").append("<span>" + new_value + "<a class='delete-tag'></a></span>");
        $(".tag-input").val("");
        if ($("#ClassroomSubject").val() == "") {
            $("#ClassroomSubject").val(new_value);
        } else {
            $("#ClassroomSubject").val($("#ClassroomSubject").val() + "," + new_value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:35:03.810

尝试

```
$('input:contains("one"):contains("second")') 
```

# ios - 无法从 json 响应中设置部分中的 UICollectionView 项目数

> ID：15126918
> 
> 赞同：2
> 
> 时间：2013-02-28T03:31:20.450
> 
> 标签：ios, objective-c, cocoa-touch, nsurlconnection, uicollectionview

我对 iOS 编程非常陌生，正在尝试从 json 响应中设置 UICollectionView 项目。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self downloadJSONData];

    /* uncomment this block to use subclassed cells */
    [self.collectionView registerClass:[CVCell class] forCellWithReuseIdentifier:@"cvCell"];
    /* end of subclass-based cells block */

    // Configure layout
    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
    [flowLayout setItemSize:CGSizeMake(150, 150)];
    [flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
    [self.collectionView setCollectionViewLayout:flowLayout];
    [self.collectionView reloadData];
}

-(void) downloadJSONData {
    NSURL *serviceUrl = [[NSURL alloc]initWithString:@"http://myurlhere.com/"];
    NSURLRequest *request = [NSURLRequest requestWithURL:serviceUrl];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [conn start];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.data = [[NSMutableData alloc]init];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)responsedata {
    [self.data appendData:responsedata];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Error : %@", error);
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"Succeeded! Received %d bytes of data",[self.data length]);
    NSString *txt = [[NSString alloc] initWithData:self.data encoding: NSASCIIStringEncoding];
    NSLog(@"response data %@", txt);
    self.dictionaryData = [txt JSONValue];
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

    //NSMutableArray *sectionArray = [self.dataArray objectAtIndex:section];
    self.jsonArray = [self.dictionaryData objectForKey:@"images"];
    return [self.jsonArray count];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    // Setup cell identifier
    static NSString *cellIdentifier = @"cvCell";

    /*  Uncomment this block to use nib-based cells */
    // UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    // UILabel *titleLabel = (UILabel *)[cell viewWithTag:100];
    // [titleLabel setText:cellData];
    /* end of nib-based cell block */

    /* Uncomment this block to use subclass-based cells */
    CVCell *cell = (CVCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    NSMutableArray *data = [self.dataArray objectAtIndex:indexPath.section];
    NSString *cellData = [data objectAtIndex:indexPath.row];
    [cell.titleLabel setText:cellData];
    /* end of subclass-based cells block */

    // Return the cell
    return cell;
} 
```

当我运行代码时，它什么也不显示。我想要的是它显示项目并且数量等于数组的计数。还有一件事，关于如何将图像异步加载到集合视图中的任何建议？

我很抱歉我的英语。如果有人可以帮助我，我会很高兴。

谢谢。干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:39:23.920

在`connectionDidFinishLoading`方法中添加：

```
[self.collectionView reloadData]; 
```

对于 Asyn 图像加载，您可以检查以下任何一项，

1.  [SDWebImage](https://github.com/rs/SDWebImage)
2.  [异步图像视图](https://github.com/nicklockwood/AsyncImageView)
3.  [LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html) - 它适用于 UITableView，但您可以对 UICollectionView 使用相同的概念

# html - 为什么没有用户代理为视频元素实现 CSS 光标样式

> ID：15126921
> 
> 赞同：4
> 
> 时间：2013-02-28T03:31:50.727
> 
> 标签：html, firefox, css, webkit, html5-video

我试图弄清楚是否可以更改`cursor`默认 HTML5`video`元素的 CSS 属性。到目前为止，我的测试已经结束：

1.  默认情况下没有用户代理（浏览器）实现`cursor: pointer`。所以你只剩下正常的操作系统箭头/控制指示器

2.  当您尝试设置`cursor: pointer`时，只有当光标不在元素内的可点击元素上时，用户代理才会更改光标`video`......即：播放、暂停、搜索、静音、全屏。

3.  这似乎与应该发生的事情的实施相反。标签的可点击元素`video`（控制栏，中心播放按钮）应该获得光标样式......或者地狱，只需将其应用于整个事物。

有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:29:28.147

For webkit you can target their pseudo elements

```
video::-webkit-media-controls-panel

video::-webkit-media-controls-play-button

video::-webkit-media-controls-volume-slider-container

video::-webkit-media-controls-volume-slider

video::-webkit-media-controls-mute-button

video::-webkit-media-controls-timeline

video::-webkit-media-controls-current-time-display

video::-webkit-full-page-media::-webkit-media-controls-panel

video::-webkit-media-controls-timeline-container

video::-webkit-media-controls-time-remaining-display

video::-webkit-media-controls-seek-back-button

video::-webkit-media-controls-seek-forward-button

video::-webkit-media-controls-fullscreen-button

video::-webkit-media-controls-rewind-button

video::-webkit-media-controls-return-to-realtime-button

video::-webkit-media-controls-toggle-closed-captions-button 
```

**Update**

Extended list of webkit pseudo elements: [https://gist.github.com/afabbro/3759334](https://gist.github.com/afabbro/3759334)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T21:01:02.627

> 为什么没有用户代理为视频元素实现 CSS 光标样式？

因为没必要

> 这似乎与应该发生的事情的实施相反。

你认为“应该”发生什么？交互元素不需要指针。例如，如果您将鼠标悬停在滚动条上，您的箭头将保持为箭头。事实上，大多数计算机软件的大多数按钮都不会改变光标。这不是必需的，因为交互元素的悬停和焦点状态足以提供可点击性。

原因`cursor: pointer`在网络上很常见，而必须的原因是由于超链接。默认情况下，超链接不会对悬停做出反应。指针用于提示用户*可以*点击链接。

对于`<video>`元素，有足够的悬停状态，无需更改光标。

# android - MotionEvent.ACTION_POINTER_DOWN 不检测位置

> ID：15126922
> 
> 赞同：1
> 
> 时间：2013-02-28T03:31:56.930
> 
> 标签：android, multi-touch, motionevent

我是Android的新手，最近我得到了这个奇怪的东西：

我有我的自定义视图，在 onTouchEvent 方法中，我尝试检测多点触控手势，但无论我的第二根手指是否触摸视图，都会触发 MotionEvent.ACTION_POINTER_DOWN。

似乎 ACTION_POINTER_DOWN 的行为与 ACTION_DOWN 不同，因为如果我的手指没有触摸视图，则不会触发 ACTION_DOWN。

请告诉我这是什么问题，这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:32:53.727

它按预期工作。一旦你触地，所有的触摸事件都会进入你的视图，直到发生取消或向上。

# javascript - 如何在Javascript中对对象数组进行排序？

> ID：15126924
> 
> 赞同：2
> 
> 时间：2013-02-28T03:32:07.637
> 
> 标签：javascript, arrays, multidimensional-array

我知道这个问题在这个社区已经被问过很多次了，但我几乎看不到笔记本电脑的显示器，因为我工作了很长时间。一些帮助请。

我想对这个对象数组进行排序，以获得自动插入到数组中的所有给定值的最大值和最小值。

```
var catesArrayHolder = new Array();
for(var chartGetter=1; chartGetter <= num; chartGetter++){
    var catesArray = new Array();
    for(var chartGetterArray=1; chartGetterArray <= series; chartGetterArray++){
        idOfInput  = "cate"+chartGetter+"_series"+chartGetterArray;
        values = $("#"+idOfInput).val();
        if(values == ""){
            values = 0;
        }

        catesArray.push(values);
    }
    catesArrayHolder.push(catesArray);
} 
```

此功能不适用于我...它适用于一维数组

```
catesArrayHolder.sort(function(a,b){return a-b}); 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:43:04.510

# Edit

To sort on the Sum of the sub arrays you can use:

## [Example](http://jsfiddle.net/4NYfZ/2/)

**JS**

```
var twoDArray = [[9,1],[5,3],[8,2]];

twoDArray.sort(function(a, b){
    //sort by sum of sub array
    return eval(a.join('+')) - eval(b.join('+')); 
}); 

alert(JSON.stringify(twoDArray)); 
```

So your code would look like:

```
catesArrayHolder.sort(function(a, b){
    return eval(a.join('+')) - eval(b.join('+')); 
}); 
```

# Original

Looks like you're trying to sort a two dimensional array.

You'll need to specify the secondary array position in the sort function.

## [Example](http://jsfiddle.net/4NYfZ/)

**JS**

```
var twoDArray = [[9,1],[5,3],[4,2]];

twoDArray.sort(function(a, b){
    //Sort by the first value in the sub array
    return a[0] - b[0]; 
}); 

alert(JSON.stringify(twoDArray)); 

twoDArray.sort(function(a, b){
    //sort by the second value in the sub array
    return a[1] - b[1]; 
}); 

alert(JSON.stringify(twoDArray)); 
```

So to get your code working, you'll need something to the effect of:

```
var posToSortOn = 0; //position in the sub arrays that dictates sort precedence 
catesArrayHolder.sort(function(a,b){return a[posToSortOn]-b[posToSortOn]}); 
```

# c - 分叉后调试子进程（配置了follow-fork-mode子）

> ID：15126925
> 
> 赞同：41
> 
> 时间：2013-02-28T03:32:08.690
> 
> 标签：c, gdb, signals, fork

我正在开发一个应用程序，父母分叉一个孩子来处理某些任务。我遇到了一个问题，我已将 gdb 配置为 follow-fork-mode child，但在 fork 之后，到达断点后，它会发送一个 SIGTRAP 但孩子会以某种方式终止并将 SIGCHLD 发送给父级。

我已经`signal(SIGTRAP, SIG_IGN)`在 fork 之前进行了配置，所以我的理解是，当断点到达但没有发生时，孩子应该继承并忽略 SIGTRAP。

如果我不正确，请帮助我理解这一点。

如何成功调试子进程？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-02-28T05:03:27.900

子进程从父进程继承信号处理程序，但不是挂起的信号。

分叉后尝试`SIGTRAP`在代码中子进程在分叉后执行的位置安装信号处理程序。如果您不处理`SIGTRAP`，则默认操作是终止孩子。

如果要调试子进程，则必须使用`follow-fork-mode`. 您必须使用设置模式

```
set follow-fork-mode child 
```

但是，现在只能调试子级，而父级运行未选中。

有[另一种](https://sourceware.org/gdb/onlinedocs/gdb/Forks.html)调试子进程的方法。

`fork()`执行后，`sleep()`在子程序执行的代码中调用，使用`ps`实用程序获取子程序的 PID，然后附加 PID。

```
attach <PID of child process> 
```

现在，您可以像调试任何其他进程一样调试子进程。

调试后，您可以使用分离 PID

```
detach 
```

# winforms - 如何为 bindingNavigator 上的按钮分配快捷键？

> ID：15126928
> 
> 赞同：5
> 
> 时间：2013-02-28T03:32:31.407
> 
> 标签：winforms, keyboard-shortcuts, bindingnavigator

有没有办法将快捷键分配给 BindingNavigator 中的标准导航 ToolStrip 项？

使用 .AddStandardItems 方法添加的项目属于 ToolStripItem 类型，它没有 ShortcutKeys 属性。

我试图投射到 ToolStripMenuItem ，但它失败了。

```
 public void ConfigureMyNavigator()
    {
               // Adds ToolStripItems which don't support shortcut keys           
                m_navigator.AddStandardItems();

                // Adds a ToolStripMenuItem which can support a shortcut key
                var button = new ToolStripMenuItem
                {
                    Size = new Size(0, 0),
                    Text = "Save",
                    ShortcutKeys = (Keys)Shortcut.CtrlS,
                    ToolTipText = "Press Ctrl+S to save"
                };
                button.Click += tsmi_Click;

                m_navigator.Items.Add(button);

                //   This fails with invalid cast exception
                ((ToolStripMenuItem)m_navigator.Items[1]).ShortcutKeys = (Keys)Shortcut.AltLeftArrow;

    } 
```

我想我可以用toolstripmenuitems一个一个地替换toolstripitems，但是觉得这很尴尬。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T22:46:57.100

您可以侦听键盘命令，然后单击相应的 ToolStripButton。覆盖`ProcessCmdKey`表单代码中的方法：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    switch (keyData)
    {
        case (Keys.Alt | Keys.Left):
            m_navigator.Items[1].PerformClick();
            break;
        case (Keys.Alt | Keys.Right):
            m_navigator.Items[6].PerformClick();
            break;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-28T10:00:51.990

Did you try adding "&" symbol in front of the button caption?

> Text = "&Save"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:45:33.583

您可以重写 AddStandardItems 方法并重载 ToolStripMenuItem 的构造函数以接受 ToolStripItem 作为参数，以便更轻松地创建项目。

但这仍然是“一件一件更换物品”。

# string - 在 Smalltalk VisualWorks 7.9.1 中将 Open Sound Control ByteArray 转换为字符串

> ID：15126931
> 
> 赞同：2
> 
> 时间：2013-02-28T03:32:46.977
> 
> 标签：string, bytearray, smalltalk, osc, visualworks

我正在从服务器接收 UDP 数据包（确切地说：打开声音控制数据包）。我将这些数据包存储在 ByteArray 中。

我想将此 ByteArray 转换为 String，以便我可以利用接收到的数据。我尝试了很多转换，但每次我都有不可读的字符。

这是代码：

```
| server peerAddr |
server := SocketAccessor newUDPserverAtPort: 3333.
peerAddr := IPSocketAddress new.
buffer := ByteArray new: 1024.
[ server readWait.
server receiveFrom: peerAddr buffer: buffer.

Transcript show: (buffer asString) ; cr ; flush. ] repeat. 
```

我也尝试了以下转换但徒劳无功：

```
buffer asByteString.
buffer asStringEncoding:#UTF8.
buffer asStringEncoding:#UTF16.
buffer  asString.
buffer  asBase64String.
buffer  asFourByteString
buffer withEncoding: #ASCII 
```

这是字符串输出： ![在此处输入图像描述](../Images/caf2146316f78554134d0602b3a5a597.png)

有什么帮助吗？

**附加信息**：接收到的数据是开放的声音控制数据，因此它具有特定的格式，这就是为什么它像这样显示的原因，我需要解析整数、浮点数、字符串，以及特定的字节数组索引。有没有人推荐一个提供这些可能性的包？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:35:02.257

如果要从字节数组中读取数据，请使用 UninterpretedBytes 类。

你可以做：

ubytes := UninterpretedBytes 来自：aByteArray。ubytes doubleAt：5。

类似的东西。您还可以使用未解释的字节从字节中读取字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:19:55.080

将字节转换为字符串的正确方法肯定是应用正确的字符编码。以下

```
(65 to: 75) asByteArray asStringEncoding: #UTF8 
```

应该产生

```
'ABCDEFGHIJK' 
```

使用 #asStringEncoding: 是正确的方法。然而，看着你的屏幕截图，你收到的字节似乎不是一个直接的字符串。可能有一些二进制数据包格式需要您先拆开，然后仅将那些您知道实际上是 utf8 编码（或任何编码）的部分解码为字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T01:50:53.137

你可能可以借用很多 Squeak 的 OSC 包的代码：http: [//opensoundcontrol.org/implementation/squeak-osc](http://opensoundcontrol.org/implementation/squeak-osc)

# mysql - 根据今天日期 + 3 个月针对 sql 日期发送邮件不起作用

> ID：15126938
> 
> 赞同：0
> 
> 时间：2013-02-28T03:33:08.573
> 
> 标签：mysql, arrays, email, date

我目前正在处理一项计划任务，其中任务计划程序将每天运行文件以获取从现在起 3 个月后的到期日期并将电子邮件发送给收件人。但是在这个时候，我似乎想不出正确的语法来做到这一点。这就是我现在所拥有的，这只会给我一个错误。

```
<?php
//authentication for database
$hostname = "localhost";
$username = "admin";
$password = "xxxxxx";

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("notification",$dbhandle) 
or die("Could not select examples");

//execute the SQL query and return records
$result = mysql_query("SELECT * FROM tbl_lead WHERE pass_expiry >= DATE(NOW() + INTERVAL 3 MONTHS");

//variable for email message
$emailBody = "";
$headers = 'From: Pass Validity Reminder' . "\r\n" .
'Reply-To: myemail@email.com' . "\r\n" .
'Cc: ccemail@Wemail. com' . "\r\n".
'X-Mailer: PHP/' . phpversion();
$to = "myemail@email.com";

//fetch tha data from the database 
while ($row = mysql_fetch_array($result))
{
$subject = $row['company_name']."'s"." work pass is expiry soon";
$emailBody .="Creator: ".$row['rlog_create_user_name']." \n". "Email: ".$row['email']."
\n"."Comment: ".$row['comment']." \n"."Contact: ".$row['contact']." \n";

}

mail($to, $subject, $emailBody, $headers); 

echo 'Email sent successfully!';    
//close the connection
mysql_close($dbhandle);
?> 
```

但是，此错误不断出现，我很确定当没有匹配时也会出现错误消息。我该如何完善这个脚本？

```
( ! ) Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in
C:\wamp\www\notification\staff\notify2.php on line 27
Call Stack
#   Time    Memory  Function    Location  
1   0.0005  681120  {main}( )   ..\notify2.php:0
2   1.0247  689424  mysql_fetch_array ( )   ..\notify2.php:27

( ! ) Notice: Undefined variable: subject in C:\wamp\www\notification\staff\notify2.php on line34
Call Stack
#   Time    Memory  Function    Location   
1   0.0005  681120  {main}( )   ..\notify2.php:0 
```

我已经根据@peterm 的建议进行了修改，现在错误已经消失了。但是，现在电子邮件仍然不会发送。

我添加了对电子邮件参数的检查。我在错误消息之前回显了结果，以确保它通过查询。

```
//fetch tha data from the database 
while ($row = mysql_fetch_array($result))
{
$subject = $row['company_name']."'s"." work pass is expiry soon";
$emailBody .= "Company: ".$row['company_name']." \n"."Comment: ".$row['comment']."    
\n"."Contact: ".$row['contact']." \n";
}

if(mail($to, $subject, $emailBody, $headers)) {
echo 'Email sent successfully!';
} else {
echo $emailBody;
die('Failure: Email was not sent!');

} 
```

该脚本假设检查数据库中的每个条目并为每个匹配的条目发送电子邮件。很抱歉评论中的编码，我是 stackoverflow 的第一次用户，并且已经 8 年多没有接触编程了。忘记一切，nv 听说过 PDO。@peterm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:56:24.427

您的查询失败，因为`SELECT`有错误。

试试这个：

```
SELECT * FROM events WHERE event_date >= DATE(NOW() + INTERVAL 3 MONTH) 
```

您没有关闭`DATE()`函数的括号，并且正确`INTERVAL`的关键字 is `MONTH`。

现在，当查询执行失败[`mysql_query()`](http://php.net/manual/en/function.mysql-query.php)时返回`FALSE`而不是资源。`$result`因此，在传递给之前总是检查返回值`mysql_fetch_*`：

```
$result = mysql_query(...);
if (!$result) {
    //handle your error
    die('The query failed.'); //There are certainly better ways to handle it
}
... 
```

**请停止对新代码使用 mysql_* 函数。它们已被[弃用](http://php.net/manual/en/intro.mysql.php)。对[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)使用 [准备好的语句](http://goo.gl/vn8zQ)。这是很好的[PDO 教程](http://goo.gl/vFWnC)。**

# mysql - 批量插入mysql

> ID：15126940
> 
> 赞同：0
> 
> 时间：2013-02-28T03:33:13.533
> 
> 标签：mysql

我在 asp.net 页面中有一个带有复选框列的 gridview。我需要将gridview上的那些检查行插入到mysql表中。

最简单的方法之一是找到选定的行并在循环中一一插入。

但是，考虑到任何时候都可能有 10000 行，这很耗时。鉴于这是一个耗时的过程，在插入过程中存在丢失连接的风险。

有什么方法可以加快插入大量行吗？

谢谢， 巴拉吉 G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:38:24.167

您可以先获取所有检查的记录，然后将它们写入制表符分隔或逗号分隔的格式，然后使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)中的语法进行批量插入。

这是示例格式：

```
LOAD DATA INFILE 'data.txt' INTO TABLE tbl_name
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'; 
```

# random - Objective-C EXC_BAD_ACCESS

> ID：15126941
> 
> 赞同：2
> 
> 时间：2013-02-28T03:33:19.787
> 
> 标签：random, nsmutablearray, exc-bad-access

好的，所以我最近决定尝试自学 Objective-C（我对 iPhone 开发感兴趣），但是我以前从未使用过 C 或其任何衍生产品，因此遇到了一些问题。我决定从编写一个非常基本的卡片应用程序开始，它创建一副卡片，洗牌，然后使用 UIButtons 在屏幕上显示卡片，但是我的洗牌算法有问题。每次调用它时，我都会收到一个 EXC_BAD_ACCESS 错误，我知道这意味着我的代码存在严重错误，但我就是不知道它是什么。

```
- (void) randomize {
    NSMutableArray *tmpDeck = [[NSMutableArray alloc] init];
    for(Card *tmp in _cards) {
        BOOL didInsert = NO;
        while(!didInsert) {
            NSUInteger random = arc4random_uniform(54);
            if([[tmpDeck objectAtIndex:random] isEqual:nil]) {
                [tmpDeck insertObject:tmp atIndex:random];
                didInsert = YES;
            }
        }
    }
    _cards = tmpDeck;
    _hasBeenRandomized = YES;
} 
```

_cards 是指向 NSMutableArray 的指针，其中包含未洗牌的卡片对象，而 _hasBeenRandomized 是一个布尔值（显然），用于跟踪卡片组是否已随机化。

我试图使用调试器来弄清楚这里到底发生了什么，但我什至无法在程序崩溃的情况下进入该方法。这使我相信问题必须来自第一行，但这只是 NSMutableArray 的直接创建，所以我不知道它是怎么回事。此方法是从 viewDidLoad 中调用的。这是当前 viewDidLoad 方法的全部。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    _deck = [[Deck alloc] init];
    [_deck randomize];
} 
```

任何和所有的帮助将不胜感激。对不起，如果答案很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:39:13.530

这是因为您试图插入一个尚不存在的索引。您需要在数组中根据卡片的需要使用尽可能多的位置来初始化数组。或者使用 NSMutableDictionary 并插入以索引为键的对象。

要添加另一个注释，在数组上调用 initWithCapacity 也不会为您解决这个问题，因为这只会给出大小的“提示”。您需要数组的 count 属性实际上至少与您尝试插入的索引一样大。如果你想做一个数组，那么你首先需要先在每个索引中填充一些东西。您可以在新的数组文字格式中定义它，或者使用 for 循环来循环您需要的次数（您的最大索引）并在其位置插入一个虚拟对象。

```
for (int i=0; i< _cards.count; ++i) 
{
    [tmpDeck insertObject:@"dummy" atIndex:i];
} 
```

然后，不是在替换之前检查“nil”，而是检查它是否等于您插入的虚拟对象。这将为您提供一个可以插入到任何这些索引中的数组。我个人仍然可能将它们存储在 NSMutableDictionary 中。但是，如果您出于其他目的需要它在数组中，那么这是一种方法。

您还需要确保替换对象而不是插入，否则您将继续添加索引。

```
[tmpDeck replaceObjectAtIndex:random withObject:tmp]; 
```

如果您仍然遇到相同的错误，请在调试器中设置断点并检查随机数是什么以及数组的计数是多少。如果您的随机数大于您的数组计数，那么您将收到此错误。

# css-transitions - 有没有办法在 CSS3 -animation-timing-function 中结合 ease-in 和 linear？

> ID：15126942
> 
> 赞同：2
> 
> 时间：2013-02-28T03:33:27.763
> 
> 标签：css-transitions

我问是因为我正在努力使黑胶唱片轻松移动，然后它需要以恒定速度旋转。通过添加这些类，我可以轻松地使其旋转，并轻松地轻松进出：

```
#label_vinyl.rotate {
    -webkit-animation-name:             rotate; 
    -webkit-animation-duration:         12s; 
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}

#label_vinyl.ease {
    -webkit-animation-name:             rotate; 
    -webkit-animation-duration:         12s; 
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function: ease-in;
} 
```

我的问题是从一个班级切换到另一个班级。当我尝试用旋转类替换类缓和类时。或者，如果我首先添加了两个类（因为它是最后一个而使缓入覆盖），然后删除缓入类，它仍然具有“缓动动画”，即使缓入类不再附加到我的 div/图片

就好像即使我换班，轻松学习也永远存在。我的问题是：有没有办法将两者结合或链接起来？类似于以下内容：

```
 -webkit-animation-iteration-count: 1, infinity;
    -webkit-animation-timing-function: ease-in, linear; 
```

前者不起作用顺便说一句。

编辑：如果没有，真的应该有！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:00:13.620

你可以只使用 jQuery 来控制类吗？

```
$('#label_vinyl').toggleClass('ease','rotate'); 
```

或者你想要做这一切的CSS？

# php - 将 .exe 文件从 linux 服务器运行到 Windows 客户端？

> ID：15126943
> 
> 赞同：-1
> 
> 时间：2013-02-28T03:33:30.927
> 
> 标签：php, exe, mac-address

.exe 文件可以从 linux 服务器运行到 Windows 客户端.. 看看这个：

```
$command = '../views/macaddress/macaddress.exe';
exec( $command, &$output);
var_dump($output,$dir); 
```

当我在 Windows 上运行它时，var_dump 的输出是

```
array(0){   } 
```

请任何人帮助我。我求求你了……大约一周前我开始做这个的时候。

顺便说一句，这个 exe 文件。将生成 txt 文件。并有它的mac地址..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:39:07.680

PHP 正在服务器端执行，因此它无法访问客户端计算机。此外，如果*任何*网站都可以在无辜客户的计算机上运行 exe，这将是一个重大的安全问题。

您将需要使用用户允许运行的客户端方式获取用户的 mac 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:44:38.253

bljak 窗户

但它不可能采取客户端macaddress 来做到这一点，你需要一些java 小程序来接收它并发送给你

无论如何，也许你想要服务器 mac-address 这个 sis 方式

```
$ipconfiguration= exec('ifconfig'); 
```

你应该得到

eth0 Link encap:Ethernet HWaddr 00:23:13:55:79:78
inet addr:xxx.xxx.xxx.xxx Bcast:xxx.xxx.xxx.xxx Mask:xxx.xxx.xxx.xxx inet6 addr:xxx。 xxx.xxx.xxx:7978/64 范围：链接 UP BROADCAST RUNNING MULTICAST MTU:1500 指标：1 RX 数据包：2 错误：0 丢弃：0 超限：0 帧：0 TX 数据包：2 错误：0 丢弃：0 超限： 0 载波：0 冲突：0 txqueuelen：1000 RX 字节：2 (2.1 GiB) TX 字节：232330926 (1.6 GiB) 中断：23 内存：fc300000-fc1300

所以**HWaddr 00:23:13:55:79:78** 是mac地址

# php - 表之间的联接

> ID：15126945
> 
> 赞同：0
> 
> 时间：2013-02-28T03:33:53.183
> 
> 标签：php

我的查询有点麻烦。

我有这个数据库结构

进程 process_id process_name

ITENS item_id item_process_id item_name

文件 file_id file_item_id file_name

我运行此查询以获取进程 ID：

```
$result = mysql_query("SELECT * FROM processes WHERE process_id='$process_id'");
$row = mysql_fetch_array($result, MYSQL_BOTH);
$process_id = $row['process_id']; 
```

将此 ID 放入 LOOP 以从表中获取所有 Itens：

```
$query="SELECT * FROM itens WHERE item_process_id='$process_id'";
$result = mysql_query($query) or die(mysql_error());
$num = mysql_numrows($result); 
```

并将 Item name 称为 LOOP

问题是当我尝试从 FILES 表中调用“file_name”时。我尝试使用 LEFT JOIN 连接到表，但没有成功。“file_name”变量为空

谁能帮我理解如何解决这个问题？

TKS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:52:47.180

在 file_id = file_item_id 上尝试 LEFT JOIN 文件

# ios - 在 UIWebView iPhone iOS XCode 中打开 SharePoint URL - 将凭据嵌入 URL 请求以避免提示输入凭据

> ID：15126948
> 
> 赞同：0
> 
> 时间：2013-02-28T03:34:03.593
> 
> 标签：ios, xcode, url, sharepoint, credentials

**我是 iOS 开发的新手。我正在开发一个小型应用程序，它可以打开指定的 SharePoint 网站 URL，而无需手动传递需要凭据。我尝试打开的 URL 需要凭据，但我想将这些凭据嵌入到我将在 UIWebView 控件中打开 URL 的请求中。我不想在 Safari 中打开 URL。

您能帮我找到解决方案吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T04:03:46.613

您可以使用`-connection:didReceiveAuthenticationChallenge:`委托来解决您的问题。首先做一个正常`NSURLConnection`如下，

```
- (void) someMethod
{
    NSURLRequest* request = [[NSURLRequest alloc] 
         initWithURL:[NSURL urlWithString:@"Your sharepoint web url"]

    NSURLConnection* connection = [[NSURLConnection alloc] 
         initWithRequest:request delegate:self];

    [connection release];
    [request release];
} 
```

之后您会收到回电。在这里，您应该处理凭据的挑战。

```
- (void) connection:(NSURLConnection *)connection 
      didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    //  Make sure to use the appropriate authentication method for the server to
    //  which you are connecting.
    if ([[challenge protectionSpace] authenticationMethod] == 
             NSURLAuthenticationMethodBasicAuth)
    {
            //  This is very, very important to check.  Depending on how your 
            //  security policies are setup, you could lock your user out of his 
            //  or her account by trying to use the wrong credentials too many 
            //  times in a row.
        if ([challenge previousFailureCount] > 0)
        {
            [[challenge sender] cancelAuthenticationChallenge:challenge];

            UIAlertView* alert = [[UIAlertView alloc] 
                            initWithTitle:@"Invalid Credentials" 
                                  message:@"The credentials are invalid." 
                                 delegate:nil 
                        cancelButtonTitle:@"OK" 
                        otherButtonTitles:nil];
            [alert show];
            [alert release];      
        }
        else
        {
            [challenge useCredential:[NSURLCredential 
                   credentialWithUser:@"someUser" 
                             password:@"somePassword" 
                          persistence:NSURLCredentialPersistenceForSession 
           forAuthenticationChallenge:challenge]];
        }
    }
    else
    {
        //  Do whatever you want here, for educational purposes, 
            //  I'm just going to cancel the challenge
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
} 
```

**更新** 将此代码用于此[链接](https://stackoverflow.com/questions/1769888/how-to-display-the-authentication-challenge-in-uiwebview)。

```
 -(void)viewDidLoad{
        NSString *strWebsiteUlr = [NSString stringWithFormat:@"http://www.roseindia.net"];

        NSURL *url = [NSURL URLWithString:strWebsiteUlr];

       NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

       [webView loadRequest:requestObj];
            [webview setDelegate:self]
     } 
```

在头文件中

```
@interface yourViewController : UIViewController<UIWebViewDelegate>{
  Bool _authed;
} 
```

@property（强，非原子）IBOutlet UIWebView *webView;

# c# - 如何将复杂的模型发布到行动中？

> ID：15126959
> 
> 赞同：0
> 
> 时间：2013-02-28T03:34:53.530
> 
> 标签：c#, .net, ajax, asp.net-mvc

我的模型定义：

```
public class RulePageViewModel
{
    public List<RuleItem> RuleItemList { get; set; }

    public RuleViewModel RuleViewModel { get; set; }
} 
```

我的行动定义：

```
public JsonResult Save(RulePageViewModel viewmodel) 
```

我尝试发布 json，viewmodel.RuleItemList.Count > 0，但 viewmodel.RuleItemList 中的实例为空。如果使用模型绑定，如何在视图中绑定列表？

我没有尝试绑定模型，只是使用 ajax 将 json 发布到操作。我认为它会起作用，但失败了代码：

```
var s = { "RuleItemList": [{ "RuleGroupId": 1, "RuleGroupName": "", "Keywords": "ajax", "ResponseDescribe": "dadhsa" }], "RuleViewModel": { "RuleGroupId": 14, "RuleList": [{ "RuleId": 567, "SourceId": 125, "KeyValue": "callback", "SourceType": 0 }], "SourceList": [] } };
var ss = JSON.stringify(s);
var json = JSON.parse(ss);
$.ajax({
    url: '@Url.Action("Save")',
    type: 'POST',
    data: json,
    dataType: 'json',
    success: function(response) {
        alert('success');
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus);
    }
}); 
```

* * *

好的，我解决了：

```
var json = { "RuleItemList": [{ "RuleGroupId": 1, "RuleGroupName": "", "Keywords": "ajax", "ResponseDescribe": "dadhsa" }], "RuleViewModel": { "RuleGroupId": 14, "RuleList": [{ "RuleId": 567, "SourceId": 125, "KeyValue": "callback", "SourceType": 0 }], "SourceList": [] } };

$.ajax({
    url: '@Url.Action("Save")',
    type: 'POST',
    data: JSON.stringify(json),
    dataType: 'json',
    contentType: 'application/json',
    success: function(response) {
        alert('success');
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus);
    }
}); 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:42:46.660

Generally you should do something like that:

```
 @for(var i = 0;i<Model.RuleItemList.Count;++i)
    {
        @Html.TextBoxFor(m => m.RuleItemList[i].Name);
    }

    @Html.EditorFor(m = > m.RuleViewModel.PropertyOne);
    @Html.EditorFor(m = > m.RuleViewModel.PropertyTow);
    @Html.EditorFor(m = > m.RuleViewModel.PropertyThree); 
```

Which will eventually generate something like that to the html:

```
<input type="text" name="RuleViewModel.PropertyOne" value="" />
<input type="text" name="RuleViewModel.PropertyTow" value="" />
<input type="text" name="RuleViewModel.PropertyThree" value="" /> 
```

Now because you did not place any view code or any code from your `RuleItem` an `RuleViewModel` classes that is going to be some problem to specifically answer your question so please post more info but in general you should understand from what i wrote here how to implement such a from that will post the data to your controller action so that the `Model Binder` will know which properties to bind..

[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# java - 使用 JAXRS 的 GET 方法的多个参数

> ID：15126967
> 
> 赞同：0
> 
> 时间：2013-02-28T03:36:26.840
> 
> 标签：java, rest, jersey, jax-rs

我正在使用 java (Netbeans IDE) 创建宁静的服务。我从两个相关的表中创建了两个实体类。而且我还从模式创建了宁静的服务。我使用了 Container-Item 设计模式。我需要从单个 Container 调用两个以上的资源。我已经完成了以下代码

分类资源.java

```
@Path("/categories")
public class CategoriesResource {

    @Context
    private UriInfo context;

    EjbLookup lookup=new EjbLookup();
    CategoryFacade categoryFacade=lookup.lookupCategoryFacadeBean();

    public CategoriesResource() {
    }

    @GET
    @Produces("application/json")
    public List<Category> getAllCategories() {
        List<Category> categoryList;
        categoryList=categoryFacade.findAll();
        return categoryList;
    }

    @POST
    @Consumes("application/json")
    @Produces("application/json")
    public Response addCategory(Category content) {
        categoryFacade.create(content);
          return Response.created(context.getAbsolutePath()).build();
    }

//    @Path("{category}")
//    public CategoryResource getCategoryResource(@QueryParam("category") String category) {
//        return CategoryResource.getInstance(category);
//    }
    //when I uncomment these four lines of code it gives an exception java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    @Path("{siteID}")
    public CategoryBySiteResource getCategoryBySiteResource(@QueryParam("siteId") Integer site) {
        return CategoryBySiteResource.getInstance(site);
    }

} 
```

CategoryBySiteResource.java

```
public class CategoryBySiteResource {

    private Integer site;

    EjbLookup lookup=new EjbLookup();
    CategoryFacade categoryFacade=lookup.lookupCategoryFacadeBean();

    private CategoryBySiteResource(Integer site) {
        this.site = site;
    }

    public static CategoryBySiteResource getInstance(Integer site) {
        return new CategoryBySiteResource(site);
    }

    @GET
    @Produces("application/json")
    public List<Category> getCategoryById() {
       return categoryFacade.retrieveCategory(site);
    }

} 
```

类别资源.java

```
public class CategoryResource {

    private String category;

    EjbLookup lookup=new EjbLookup();
    CategoryFacade categoryFacade=lookup.lookupCategoryFacadeBean();

    private CategoryResource(String category) {
        this.category = category;
    }

    public static CategoryResource getInstance(String category) {
        return new CategoryResource(category);
    }

    @GET
    @Produces("application/json")
    public Category getCategoryById() {
       return categoryFacade.find(Integer.parseInt(category));
    }

    @PUT
    @Consumes("application/json")
    public void updateCategory(Category content) {
        categoryFacade.edit(content);
    }

    @DELETE
    public void deleteCategoryById() {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:49:30.440

您的每个子资源定位器都需要有一个唯一的路径。但是您正在为每个解析为相同 URL 的路径参数指定一个路径参数。请注意，如果为路径参数指定不同的名称，则无关紧要，因为路径参数名称仅在 URL-> 方法参数映射的上下文中有用。从 URL 解析的角度来看，它们是相同的。

```
Root Relative Path: /categories
Sub Resource Path1: /{category}
Sub Resource Path2: /{siteID} 
```

例如，给定一个 URL，`http://www.example.com/categories/10`运行时无法确定是调用子资源方法`getCategoryResource`还是`getCategoryBySiteResource`，因为它们都是***符合***条件的匹配项。

为了解决这个问题，您需要为每个子资源方法赋予唯一的路径名。

# asp.net-mvc - T4MVC 为控制器错误地生成命名空间

> ID：15126969
> 
> 赞同：1
> 
> 时间：2013-02-28T03:36:37.300
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvccontrib, t4mvc

我刚刚将 T4MVC (3.5.1) 插入到我的 ASP.NET MVC3 项目中。

它似乎在 *.generated.cs 文件中生成了错误的命名空间。例如：

```
using System.Web;
using System.Web.Hosting;
using System.Web.Mvc;
using System.Web.Mvc.Ajax;
using System.Web.Mvc.Html;
using System.Web.Routing;
using T4MVC;

namespace MyCompany.MyCompany.MyProject.Web.Controllers
{
    public partial class HomeController
    {
        //snip

        [GeneratedCode("T4MVC", "2.0"), DebuggerNonUserCode]
        public partial class T4MVC_HomeController : MyCompany.MyCompany.MyProject.Web.Controllers.HomeController
        {
            //snip
        }

        //snip
    }
} 
```

在这个生成的文件中，第一个`MyCompany`显示`MyCompany.MyCompany`在智能感知中，所以生成的命名空间试图在 寻找我的控制器`MyCompany.MyCompany.MyCompany.MyProject.Web.Controllers.HomeController`，当然`MyCompany.MyCompany`不包含`MyCompany`！

如何让 T4MVC 为我的解决方案正确生成命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:33:08.930

David Ebbo 为我指出了正确的方向，其他人在这里遇到了同样的问题： [https ://t4mvc.codeplex.com/discussions/404550](https://t4mvc.codeplex.com/discussions/404550)

我使用了`global::`那里提到的解决方案，特别是在`T4MVC.tt`第 321 行中，我更改了：

```
public partial class <#=controller.DerivedClassName #> : <#=controller.FullClassName #> 
```

至

```
public partial class <#=controller.DerivedClassName #> : global::<#=controller.FullClassName #> 
```

* * *

编辑：我还必须更新第 1592 行以考虑参数（我的模型有相同的命名空间问题）。我对此做了一个快速而肮脏的改变：

```
TT.Write(p.Type + " " + p.Name); 
```

对此：

```
if (p.Type.StartsWith("FooBar"))
    TT.Write("global::" + p.Type + " " + p.Name);
else
    TT.Write(p.Type + " " + p.Name); 
```

# php - 带空格的国际电话号码验证

> ID：15126971
> 
> 赞同：0
> 
> 时间：2013-02-28T03:36:44.807
> 
> 标签：php, regex, codeigniter

我正在使用 codeigniter 验证库...对于国际号码，我正在尝试接受 15 位数字..也允许使用空格..但由于某种原因下面不起作用...它不接受空格.. .

```
 if(isset($data['perfume_int_contact']))
           {
            //$this->form_validation->set_rules('phone_int_area_code','Contact Phone Number','trim|required|numeric');

            $this->form_validation->set_rules('phone_int_first','Contact Phone Number','trim|required|numeric'); 
```

我应该能够像这样输入：1234 1234 1234 45678 我应该为此创建自己的验证类吗？或者我可以在 set_rules.. 中使用它来创建一个回调函数吗？或者做一个我自己的正则表达式？任何输入表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:46:58.757

```
if (isset($data['perfume_int_contact'])) {
    $this->form_validation->set_rules('phone_int_first', 'Contact Phone Number', 'trim|numeric|required|callback_phone_check');
}

function phone_check($phone_number)
{
    $regex = '/^\d{3}\s\d{3}\s\d{4}\s\d{3}$/'; // validates 123 123 1234 123
    if (!preg_match($regex, $phone_number)) {
        $this->form_validation->set_message('phone_check', 'Phone Number not valid.');
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:53:14.677

// 在表单验证规则中

```
$this->form_validation->set_rules('phone_int_first', 'Contact Phone Number', 'trim|required|max_length[15]|callback_checkPhone'); 
```

// 回调函数

```
 function checkPhone($phoneNumber) {
    $output = preg_match('/[^0-9\s]/', $phoneNumber);
    if (empty($output)) {
      return TRUE;
    } else {
      $this->form_validation->set_message('checkPhone', 'This phone number conatins only numbers & white space');
      return FALSE;
    }
  } 
```

# c++ - N叉树的二进制表示

> ID：15126977
> 
> 赞同：2
> 
> 时间：2013-02-28T03:37:20.797
> 
> 标签：c++, tree, binary-tree

我目前正在尝试使用具有未知数量的子节点的节点创建树结构，但我还必须跟踪父节点。我在 C 中查看了这个问题[N-ary trees](https://stackoverflow.com/questions/189855/n-ary-trees-in-c)并制作了一个类似于链接中建议的结构：

```
template <class T>
struct treeNode {

public: 

T  * data;
treeNode *parent;
treeNode *kids; //left 
treeNode *siblings; //right

treeNode();
~treeNode();
treeNode(T data);
void treeInsert(T newItem);

}; 
```

它说通过以这种方式制作树，可以使某些算法更容易编码。但是，我很难弄清楚如何为此结构创建 insert() 和 search() 方法，因为我需要跟踪父节点。关于我如何解决这个问题有什么建议吗？

编辑：

这是我的 insert() 方法：

```
template<class T>
bool NewTree<T>::insert( T *data, treeNode<T> * parent)
{
if(this->root == NULL)
{
    this->root = new treeNode<T>();
    this->root->data = data;
    this->root->parent = NULL;
    this->root->children = NULL;
}
else
{
    treeNode temp = new treenode<T>();
    temp.data = data;
    temp.parent = parent;
    parent->children->siblings = temp; // add node to siblings of parent's   children
    parent->children = temp; // add node to children of parent

}

} 
```

这看起来正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:42:01.337

对于任何树结构，搜索都将使用相对相同的算法（如果未排序则使用深度优先递归，如果已排序则使用简单的树搜索（如二叉搜索树））。插入时，您需要做的就是将新节点分配给`.parent`父节点。然后将新节点分配给`.parent.child[1]`新节点（从而将父节点链接到子节点）。然后，检查父节点的其他子节点以分配新节点的兄弟节点（如果有）。

好的，所以这里有一些伪代码（主要像 java - 抱歉，这是我今天一直在写的），它将使用您提供的链接中的第二个示例实现节点创建和一系列分配以将其维护在树结构中：

（节点来源）：

```
class Node {
  // generic data store
  public int data;
  public Node parent;
  public Node siblings;
  public Node children;
} 
```

（树源）：

```
class NewTree {
  // current node
  public Node current;
  // pointer to root node
  public Node root;

  // constructor here
  // create new node
  public boolean insert(int data) {
    // search for the node which is immediately BEFORE where the new node should go
    // remember that with duplicate data values, we can just put the new node in
    // front of the chain of siblings
    Node neighbor = this.search(data);
    // if we've found the node our new node should follow, create it with the 
    // found node as parent, otherwise we are creating the root node
    // so if we're creating the root node, we simply create it and then set its
    // children, siblings, and parent to null
    // i think this is the part you're having trouble with, so look below for a 
    // diagram for visual aid
  }

  public Node search(int target) {
    // basically we just iterate through the chain of siblings and/or children 
    // until this.current.children is null or this.current.siblings is null
    // we need to make certain that we also search the children of 
    // this.index.sibling that may exist (depth-first recursive search)
  }
} 
```

当我们找到新节点应该去的位置（使用 search()）时，我们需要将新节点内的父节点、子节点和兄弟节点“链接”重新分配给它的新父节点、子节点和兄弟节点。例如，我们采取这个：

```
A-|
|
B-C-|
| |
| F-G-|  
| |
| -
|
D-E-|
| |
- H-|
  |
  - 
```

我们将在 F 所在的位置插入一个新节点 (X)。这只是为了说明我们如何重新分配每个新节点的链接。更精细的细节可能略有不同，但这里重要的是链接重新分配的实现示例：

```
A-|
|
B-C-|
| |
| X-F-G-|  
| | |
| - -
|
D-E-|
| |
- H-|
  |
  - 
```

我们所做的是：1）创建 X。2）将 x.parent 分配给 c。3) 将 c.children 重新分配给 x。4) 将 x.siblings 分配给 f。这会插入一个新节点（请注意，插入与排序不同，如果您明确*需要*特定的排序，您的树可能需要重新排序）。

# apache - 后端/前端应用程序的 htaccess 重写规则

> ID：15126979
> 
> 赞同：0
> 
> 时间：2013-02-28T03:37:29.053
> 
> 标签：apache, .htaccess, url-rewriting

我有一个后端和前端分开的 yii 应用程序。我正在尝试制作友好的网址。我尝试了一些在线工具但无法正确所以我想要这个网址

*   `http://mydomain.lc/abs/admin/some/crazy/urls` `(for example some/crazy/urls can be admin/index)`

将被改写为：

*   `http://mydomain.lc/abs/backend.php/some/crazy/urls` `(because this url works directly)`

我也有前端站点，但它们都在同一个项目中，所以它们共享 .httacess。.htaccess 前端的规则是：这个 url：

*   `http://mydomain.lc/abs/some/crazy/urls` `(some can not be admin here, so we can differentiate btw fron and back end)`

应该

*   `http://mydomain.lc/abs/index.php/some/crazy/urls`

我有：

```
<IfModule mod_rewrite.c>
    RewriteEngine On 
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^abs/admin/?(.*?)$ abs/backend.php?url=$1 [QSA,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(?!abs/admin\/)(.*?)$ abs/index.php?url=$1 [QSA,L]

</IfModule> 
```

上面的脚本不起作用。根目录在 abs 文件夹下，.htaccess 在根目录下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:48:45.753

我想问题出在`RewriteBase`.

您可以在目录中的 .htaccess 文件中尝试此操作`/abs`：

**根据最后的 OP 评论**更新：**`this one is correct: backend.php/some/crazy/urls`**

 **```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /abs

# Backend admin
RewriteCond %{REQUEST_URI} !backend\.php  [NC]
RewriteRule ^admin(.*)  /backend.php/$1   [QSA,L,NC]

# Frontend
RewriteCond %{REQUEST_URI} !index\.php      [NC]
RewriteCond %{REQUEST_URI} !admin           [NC]
RewriteRule ^(.*)     /index.php/$1   [QSA,L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:07:33.627

你不需要改变任何东西`RewriteBase /`，除了`RewriteBase /abs`

```
RewriteEngine On 
RewriteBase /abs

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^admin/?(.*?)$ backend.php?url=$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(?!admin\/)(.*?)$ index.php?url=$1 [QSA,L] 
```**

# php - 在 fancybox 中使用 title 在单独的窗口中打开另一个链接

> ID：15126982
> 
> 赞同：0
> 
> 时间：2013-02-28T03:37:41.270
> 
> 标签：php, jquery

所有，我有以下代码来显示一组 instagram 照片，然后我用 fancybox 在我的网站上打开它们：

```
$output .= '<script type="text/javascript">
jQuery(document).ready(function($) {
    $(".fancybox").fancybox();
});
</script>';

$output .= '<div id="bd-instagram">';

for($i=0; $i<$count; $i++){
    $output .= '<div class="bd-instagram-item">
    <a rel="instagram-widget" class="fancybox" title="This is a title" href="'.$images[$i]['image_large'].'">
    <img src="'.$images[$i]['image_small'].'" alt=""></a>
    </div>';
} 
```

花式框打开并在图像下方显示标题“这是一个标题”。但是，我实际上希望将其设为链接，以便当有人单击标题时，它会打开一个链接。我试图做这样的事情：

```
<a rel="instagram-widget" class="fancybox" title="<a href="http://www.instagram.com">Testing</a>" href="'.$images[$i]['image_large'].'"> 
```

但这不起作用，并在我的页面上产生了一些奇怪的 HTML。有谁知道如何做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:52:43.943

尝试对标题中的 HTML 进行编码。例如，`&lt;`用于 < 符号。不知道这是否可行，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:56:41.397

Fancybox 有一个 titleFormat 选项，您可以将其设置为回调。我看到这样的：

```
function formatTitle(){
   return "<a href='http://instagram.com' target="_blank">test</a>";
}

$(".fancybox").fancybox({
'titleFormat' : formatTitle
}); 
```

我不确定我是对的，但[文档](http://fancybox.net/api)说：

*titleFormat - 自定义标题区域的回调。您可以设置任何 html - 自定义图像计数器甚至自定义导航*

# console - openoffice可以从控制台计算单词吗？

> ID：15126983
> 
> 赞同：5
> 
> 时间：2013-02-28T03:37:53.857
> 
> 标签：console, openoffice.org, word-count

我有一个小问题，我需要计算控制台内的单词才能阅读 doc、docx、pptx、ppt、xls、xlsx、odt、pdf ......所以不要建议我 | wc -w 或 grep 因为它们仅适用于文本或控制台输出并且它们只计算空格并且在日语、中文、阿拉伯语、印度教、希伯来语中它们使用不同的分隔符，所以字数是错误的，我试图用这个来计算

```
pdftotext file.pdf -| wc -w
/usr/local/bin/docx2txt.pl < file.docx | wc -w
/usr/local/bin/pptx2txt.pl < file.pptx | wc -w
antiword file.doc -| wc -w 
antiword file.word -| wc -w 
```

在某些情况下 microsoft word , openoffice 悲伤 1000 字和计数器返回 10 或 300 字如果语言是（日语、中文、印度教等...），但如果我使用普通字符，那么我没有问题，最大的错误在于在某些情况下，少 3 个字符的女巫是“好的”

我尝试使用 soffice ， openoffice 进行转换，然后尝试 WC -w 但我什至无法转换，

```
soffice --headless --nofirststartwizard --accept=socket,host=127.0.0.1,port=8100; --convert-to pdf some.pdf /var/www/domains/vocabridge.com/devel/temp_files/23/0/东京_1000_words_Docx.docx 
```

或者

```
 openoffice.org  --headless  --convert-to  ........ 
```

或者

```
openoffice.org3 --invisible 
```

因此，如果有人知道正确计数或使用 openoffice 或其他任何东西或使用控制台显示文档统计的任何方法，请分享

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:40:25.660

如果你有 Microsoft Word（当然还有 Windows），你可以编写一个 VBA 宏，或者如果你想直接从命令行运行，你可以编写一个类似于以下内容的 VBScript 脚本：

```
wordApp = CreateObject("Word.Application")
doc = ... ' open up a Word document using wordApp
docWordCount = doc.Words.Count
' Rinse and repeat... 
```

如果您有 OpenOffice.org/LibreOffice，您有类似（但更多）的选项。如果您想留在办公室应用程序中并运行宏，您可能可以这样做。我不太了解 StarBasic API，无法告诉您如何操作，但我可以为您提供另一种选择：创建一个 Python 脚本以从命令行获取字数。粗略地说，您执行以下操作：

*   使用适当的参数从命令行启动您的 OOo/LibO 副本，以接受传入的套接字连接。[http://www.openoffice.org/udk/python/python-bridge.html](http://www.openoffice.org/udk/python/python-bridge.html)有关于如何做到这一点的说明。去那里并使用浏览器的页内查找功能来搜索 `accept=socket'

*   编写一个 Python 脚本以使用 OOo/LibO UNO 桥（基本上等同于上面的 VBScript 示例）来一次打开一个 Word/ODT 文档并获取每个文档的字数。上面的页面应该为您提供了一个良好的开端。

*   您可以从文档模型对象的 WordCount 属性中获取字数：[http ://www.openoffice.org/api/docs/common/ref/com/sun/star/text/GenericTextDocument.html#WordCount](http://www.openoffice.org/api/docs/common/ref/com/sun/star/text/GenericTextDocument.html#WordCount)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:47:48.147

我找到了答案创建一项服务

```
#!/bin/sh
#
# chkconfig: 345 99 01
#
# description: your script is a test service
#

(while sleep 1; do
  ls pathwithfiles/in | while read file; do
    libreoffice --headless -convert-to pdf "pathwithfiles/in/$file" --outdir pathwithfiles/out
    rm "pathwithfiles/in/$file"
  done
done) & 
```

然后我需要的 php 脚本计算了所有内容

```
 $ext = pathinfo($absolute_file_path, PATHINFO_EXTENSION);
        if ($ext !== 'txt' && $ext !== 'pdf') {
            // Convert to pdf
            $tb = mktime() . mt_rand();
            $tempfile = 'locationofpdfs/in/' . $tb . '.' . $ext;
            copy($absolute_file_path, $tempfile);
            $absolute_file_path = 'locationofpdfs/out/' . $tb . '.pdf';
            $ext = 'pdf';
            while (!is_file($absolute_file_path)) sleep(1);
        }
        if ($ext !== 'txt') {
            // Convert to txt
            $tempfile = tempnam(sys_get_temp_dir(), '');
            shell_exec('pdftotext "' . $absolute_file_path . '" ' . $tempfile);
            $absolute_file_path = $tempfile;
            $ext = 'txt';
        }
        if ($ext === 'txt') {
            $seq = '/[\s\.,;:!\? ]+/mu';
            $plain = file_get_contents($absolute_file_path);
            $plain = preg_replace('#\{{{.*?\}}}#su', "", $plain);
            $str = preg_replace($seq, '', $plain);
            $chars = count(preg_split('//u', $str, -1, PREG_SPLIT_NO_EMPTY));
            $words = count(preg_split($seq, $plain, -1, PREG_SPLIT_NO_EMPTY));
            if ($words === 0) return $chars;
            if ($chars / $words > 10) $words = $chars;
            return $words;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T01:06:39.127

`wc`能理解 Unicode 并使用系统`iswspace`函数判断 unicode 字符是否为空格。“iswspace() 函数测试 wc 是否是表示程序当前语言环境中类空间字符的宽字符代码。” 因此，如果您的语言环境 ( ) 配置正确，`wc -w`应该能够正确计算字数。`LC_CTYPE`

[`wc`程序的源代码](http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob_plain;f=src/wc.c;hb=HEAD)

[该`iswspace`功能的手册页](http://pubs.opengroup.org/onlinepubs/7908799/xsh/iswspace.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:36:24.383

我认为这可能会达到您的目标

```
# Continuously updating word count
import unohelper, uno, os, time
from com.sun.star.i18n.WordType import WORD_COUNT
from com.sun.star.i18n import Boundary
from com.sun.star.lang import Locale
from com.sun.star.awt import XTopWindowListener

#socket = True
socket = False
localContext = uno.getComponentContext()

if socket:
    resolver = localContext.ServiceManager.createInstanceWithContext('com.sun.star.bridge.UnoUrlResolver', localContext)
    ctx = resolver.resolve('uno:socket,host=localhost,port=2002;urp;StarOffice.ComponentContext')
else: ctx = localContext

smgr = ctx.ServiceManager
desktop = smgr.createInstanceWithContext('com.sun.star.frame.Desktop', ctx)

waittime = 1 # seconds

def getWordCountGoal():
    doc = XSCRIPTCONTEXT.getDocument()
    retval = 0

    # Only if the field exists
    if doc.getTextFieldMasters().hasByName('com.sun.star.text.FieldMaster.User.WordCountGoal'):
        # Get the field
        wordcountgoal = doc.getTextFieldMasters().getByName('com.sun.star.text.FieldMaster.User.WordCountGoal')
        retval = wordcountgoal.Content

    return retval

goal = getWordCountGoal()

def setWordCountGoal(goal):
    doc = XSCRIPTCONTEXT.getDocument()

    if doc.getTextFieldMasters().hasByName('com.sun.star.text.FieldMaster.User.WordCountGoal'):
        wordcountgoal = doc.getTextFieldMasters().getByName('com.sun.star.text.FieldMaster.User.WordCountGoal')
        wordcountgoal.Content = goal

    # Refresh the field if inserted in the document from Insert > Fields >
    # Other... > Variables > Userdefined fields
    doc.TextFields.refresh()

def printOut(txt):
    if socket: print txt
    else:
        model = desktop.getCurrentComponent()
        text = model.Text
        cursor = text.createTextCursorByRange(text.getEnd())
        text.insertString(cursor, txt + '\r', 0)

def hotCount(st):
    '''Counts the number of words in a string.

    ARGUMENTS:

    str st: count the number of words in this string

    RETURNS:

    int: the number of words in st'''
    startpos = long()
    nextwd = Boundary()
    lc = Locale()
    lc.Language = 'en'
    numwords = 1
    mystartpos = 1
    brk = smgr.createInstanceWithContext('com.sun.star.i18n.BreakIterator', ctx)
    nextwd = brk.nextWord(st, startpos, lc, WORD_COUNT)
    while nextwd.startPos != nextwd.endPos:
        numwords += 1
        nw = nextwd.startPos
        nextwd = brk.nextWord(st, nw, lc, WORD_COUNT)

    return numwords

def updateCount(wordCountModel, percentModel):
    '''Updates the GUI.
    Updates the word count and the percentage completed in the GUI. If some
    text of more than one word is selected (including in multiple selections by
    holding down the Ctrl/Cmd key), it updates the GUI based on the selection;
    if not, on the whole document.'''

    model = desktop.getCurrentComponent()
    try:
        if not model.supportsService('com.sun.star.text.TextDocument'):
            return
    except AttributeError: return

    sel = model.getCurrentSelection()
    try: selcount = sel.getCount()
    except AttributeError: return

    if selcount == 1 and sel.getByIndex(0).getString == '':
        selcount = 0

    selwords = 0
    for nsel in range(selcount):
        thisrange = sel.getByIndex(nsel)
        atext = thisrange.getString()
        selwords += hotCount(atext)

    if selwords > 1: wc = selwords
    else:
        try: wc = model.WordCount
        except AttributeError: return
    wordCountModel.Label = str(wc)

    if goal != 0:
        pc_text =  100 * (wc / float(goal))
        #pc_text = '(%.2f percent)' % (100 * (wc / float(goal)))
        percentModel.ProgressValue = pc_text
    else:
        percentModel.ProgressValue = 0

# This is the user interface bit. It looks more or less like this:

###############################
# Word Count            _ o x #
###############################
#            _____            #
#     451 /  |500|            #
#            -----            #
# ___________________________ #
# |##############           | #
# --------------------------- #
###############################

# The boxed `500' is the text entry box.

class WindowClosingListener(unohelper.Base, XTopWindowListener):
    def __init__(self):
        global keepGoing

        keepGoing = True
    def windowClosing(self, e):
        global keepGoing

        keepGoing = False
        setWordCountGoal(goal)
        e.Source.setVisible(False)

def addControl(controlType, dlgModel, x, y, width, height, label, name = None):
    control = dlgModel.createInstance(controlType)
    control.PositionX = x
    control.PositionY = y
    control.Width = width
    control.Height = height
    if controlType == 'com.sun.star.awt.UnoControlFixedTextModel':
        control.Label = label
    elif controlType == 'com.sun.star.awt.UnoControlEditModel':
        control.Text = label
    elif controlType == 'com.sun.star.awt.UnoControlProgressBarModel':
        control.ProgressValue = label

    if name:
        control.Name = name
        dlgModel.insertByName(name, control)
    else:
        control.Name = 'unnamed'
        dlgModel.insertByName('unnamed', control)

    return control

def loopTheLoop(goalModel, wordCountModel, percentModel):
    global goal

    while keepGoing:
        try: goal = int(goalModel.Text)
        except: goal = 0
        updateCount(wordCountModel, percentModel)
        time.sleep(waittime)

if not socket:
    import threading
    class UpdaterThread(threading.Thread):
        def __init__(self, goalModel, wordCountModel, percentModel):
            threading.Thread.__init__(self)

            self.goalModel = goalModel
            self.wordCountModel = wordCountModel
            self.percentModel = percentModel

        def run(self):
            loopTheLoop(self.goalModel, self.wordCountModel, self.percentModel)

def wordCount(arg = None):
    '''Displays a continuously updating word count.'''
    dialogModel = smgr.createInstanceWithContext('com.sun.star.awt.UnoControlDialogModel', ctx)

    dialogModel.PositionX = XSCRIPTCONTEXT.getDocument().CurrentController.Frame.ContainerWindow.PosSize.Width / 2.2 - 105
    dialogModel.Width = 100
    dialogModel.Height = 30
    dialogModel.Title = 'Word Count'

    lblWc = addControl('com.sun.star.awt.UnoControlFixedTextModel', dialogModel, 6, 2, 25, 14, '', 'lblWc')
    lblWc.Align = 2 # Align right
    addControl('com.sun.star.awt.UnoControlFixedTextModel', dialogModel, 33, 2, 10, 14, ' / ')
    txtGoal = addControl('com.sun.star.awt.UnoControlEditModel', dialogModel, 45, 1, 25, 12, '', 'txtGoal')
    txtGoal.Text = goal

    #addControl('com.sun.star.awt.UnoControlFixedTextModel', dialogModel, 6, 25, 50, 14, '(percent)', 'lblPercent')

    ProgressBar = addControl('com.sun.star.awt.UnoControlProgressBarModel', dialogModel, 6, 15, 88, 10,'' , 'lblPercent')
    ProgressBar.ProgressValueMin = 0
    ProgressBar.ProgressValueMax =100
    #ProgressBar.Border = 2
    #ProgressBar.BorderColor = 255
    #ProgressBar.FillColor = 255
    #ProgressBar.BackgroundColor = 255

    addControl('com.sun.star.awt.UnoControlFixedTextModel', dialogModel, 124, 2, 12, 14, '', 'lblMinus')

    controlContainer = smgr.createInstanceWithContext('com.sun.star.awt.UnoControlDialog', ctx)
    controlContainer.setModel(dialogModel)

    controlContainer.addTopWindowListener(WindowClosingListener())
    controlContainer.setVisible(True)
    goalModel = controlContainer.getControl('txtGoal').getModel()
    wordCountModel = controlContainer.getControl('lblWc').getModel()
    percentModel = controlContainer.getControl('lblPercent').getModel()
    ProgressBar.ProgressValue = percentModel.ProgressValue

    if socket:
        loopTheLoop(goalModel, wordCountModel, percentModel)
    else:
        uthread = UpdaterThread(goalModel, wordCountModel, percentModel)
        uthread.start()

keepGoing = True
if socket:
    wordCount()
else:
    g_exportedScripts = wordCount, 
```

链接了解更多信息

[https://superuser.com/questions/529446/running-word-count-in-openoffice-writer](https://superuser.com/questions/529446/running-word-count-in-openoffice-writer)

希望这对汤姆有帮助

编辑：然后我发现了这个

[http://forum.openoffice.org/en/forum/viewtopic.php?f=7&t=22555](http://forum.openoffice.org/en/forum/viewtopic.php?f=7&t=22555)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T20:03:01.550

只是建立在@Yawar 写的内容之上。这是有关如何从控制台使用 MS word 进行字数统计的更明确的步骤。

我还使用更准确`Range.ComputeStatistics(wdStatisticWords)`的而不是 Words 属性。有关更多信息，请参见此处：https: [//support.microsoft.com/en-za/help/291447/word-count-appears-inaccurate-when-you-use-the-vba-words-property](https://support.microsoft.com/en-za/help/291447/word-count-appears-inaccurate-when-you-use-the-vba-words-property)

1.  制作一个名为的脚本`wc.vbs`，然后将其放入其中：

    ```
    Set word = CreateObject("Word.Application")
    word.Visible = False
    Set doc = word.Documents.Open("<replace with absolute path to your .docx/.pdf>")
    docWordCount = doc.Range.ComputeStatistics(wdStatisticWords)
    word.Quit
    Dim StdOut : Set StdOut = CreateObject("Scripting.FileSystemObject").GetStandardStream(1)
    WScript.Echo docWordCount & " words" 
    ```

2.  `wc.vbs`在您保存并运行的目录中打开 powershell，`cscript .\wc.vbs`您将获得字数 :)

# wordpress - 如何访问我的 wordpress 页面？

> ID：15126984
> 
> 赞同：0
> 
> 时间：2013-02-28T03:38:04.357
> 
> 标签：wordpress

我知道 wordpress 将页面内容存储在数据库中。如果我想在页面中添加内容和一些编程内容，我该怎么做？除了去wordpress仪表板>页面>所有页面之外，有没有办法访问页面文件，以便我可以直接将代码写入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:06:12.693

您可以使用虚拟主机的文件管理器或您自己的 FTP 客户端来修改组成 wordpress 的文件。虽然我不建议这样做；如果您想做的不仅仅是编辑外观，您应该从头开始设计您的网站。如果只是外观，请搜索有关制作 wordpress 主题的教程，然后应用您闪亮的新主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:53:52.980

您将使用 page.php 或 page-template.php 文件，`wp-content/themes/yourthemeName/` 这样您将更改文件模板...。

# sql - codeigniter 中的 SQL“VIEW”

> ID：15126986
> 
> 赞同：1
> 
> 时间：2013-02-28T03:38:12.733
> 
> 标签：sql, codeigniter

我想在 codeigniter 模型中创建一个 SQL 视图。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:52:18.327

我根据需要工作的表使用多个模型

应用程序/核心/MY_model.php

```
<?php
/**
 * CRUD Model
 * A base model providing CRUD, pagination and validation.
 */

class MY_Model extends CI_Model
{

    public $table;
    public $primary_key;
    public $default_limit = 15;
    public $page_links;
    public $query;
    public $form_values = array();
    protected $default_validation_rules = 'validation_rules';
    protected $validation_rules;
    public $validation_errors;
    public $total_rows;
    public $date_created_field;
    public $date_modified_field;
    public $native_methods = array(
        'select', 'select_max', 'select_min', 'select_avg', 'select_sum', 'join',
        'where', 'or_where', 'where_in', 'or_where_in', 'where_not_in', 'or_where_not_in',
        'like', 'or_like', 'not_like', 'or_not_like', 'group_by', 'distinct', 'having',
        'or_having', 'order_by', 'limit'
    );

    function __construct()
    {
        parent::__construct();
    }

    public function __call($name, $arguments)
    {
        call_user_func_array(array($this->db, $name), $arguments);

        return $this;
    }

    /**
     * Sets CI query object and automatically creates active record query
     * based on methods in child model.
     * $this->model_name->get()
     */
    public function get($with = array(), $include_defaults = true)
    {
        if ($include_defaults) {
            $this->set_defaults();
        }

        foreach ($with as $method) {
            $this->$method();
        }

        $this->query = $this->db->get($this->table);

        return $this;
    }

    /**
     * Query builder which listens to methods in child model.
     * @param type $exclude
     */
    private function set_defaults($exclude = array())
    {
        $native_methods = $this->native_methods;

        foreach ($exclude as $unset_method) {
            unset($native_methods[array_search($unset_method, $native_methods)]);
        }

        foreach ($native_methods as $native_method) {
            $native_method = 'default_' . $native_method;

            if (method_exists($this, $native_method)) {
                $this->$native_method();
            }
        }
    }

    /**
     * Call when paginating results.
     * $this->model_name->paginate()
     */
    public function paginate($with = array())
    {
        $uri_segment = '';
        $offset = 0;
        $per_page = $this->default_limit;

        $this->load->helper('url');
        $this->load->library('pagination');

        $this->set_defaults();

        foreach ($with as $method) {
            $this->$method();
        }

        $this->total_rows = $this->db->count_all_results($this->table);

        $uri_segments = $this->uri->segment_array();

        foreach ($uri_segments as $key => $segment) {
            if ($segment == 'page') {
                $uri_segment = $key + 1;

                if (isset($uri_segments[$uri_segment])) {
                    $offset = $uri_segments[$uri_segment];
                }

                unset($uri_segments[$key], $uri_segments[$key + 1]);

                $base_url = site_url(implode('/', $uri_segments) . '/page/');
            }
        }

        if (!$uri_segment) {
            $base_url = site_url($this->uri->uri_string() . '/page/');
        }

        $config = array(
            'base_url' => $base_url,
            'uri_segment' => $uri_segment,
            'total_rows' => $this->total_rows,
            'per_page' => $per_page
        );

        if ($this->config->item('pagination_style')) {
            $config = array_merge($config, $this->config->item('pagination_style'));
        }

        $this->pagination->initialize($config);

        $this->page_links = $this->pagination->create_links();

        /**
         * Done with pagination, now on to the paged results
         */
        $this->set_defaults();

        foreach ($with as $method) {
            $this->$method();
        }

        $this->db->limit($per_page, $offset);

        $this->query = $this->db->get($this->table);

        return $this;
    }

    function paginate_api($limit, $offset)
    {
        $this->set_defaults();
        if (empty($limit)) {
            $limit = $this->default_limit;

        }
        if (empty($offset)) {
            $offset = 0;
        }
        $this->db->limit($limit, $offset);
        return $this->db->get($this->table)->result();
    }

    /**
     * Retrieves a single record based on primary key value.
     */
    public function get_by_id($id, $with = array())
    {
        foreach ($with as $method) {
            $this->$method();
        }

        return $this->where($this->primary_key, $id)->get()->row();
    }

    public function save($id = NULL, $db_array = NULL)
    {
        if (!$db_array) {
            $db_array = $this->db_array();
        }

        if (!$id) {
            if ($this->date_created_field) {
                $db_array[$this->date_created_field] = time();
            }

            $this->db->insert($this->table, $db_array);

//          $this->session->set_flashdata('alert_success', 'Record successfully created.');

            return $this->db->insert_id();
        } else {
            if ($this->date_modified_field) {
                $db_array[$this->date_modified_field] = time();
            }

            $this->db->where($this->primary_key, $id);
            $this->db->update($this->table, $db_array);

//          $this->session->set_flashdata('alert_success', 'Record successfully updated.');

            return $id;
        }
    }

    /**
     * Returns an array based on $_POST input matching the ruleset used to
     * validate the form submission.
     */
    public function db_array()
    {
        $db_array = array();

        $validation_rules = $this->{$this->validation_rules}();

        foreach ($this->input->post() as $key => $value) {
            if (array_key_exists($key, $validation_rules)) {
                $db_array[$key] = $value;
            }
        }

        return $db_array;
    }

    /**
     * Deletes a record based on primary key value.
     * $this->model_name->delete(5);
     */
    public function delete($id, $others = array())
    {
        if (!empty($others)) {
            foreach ($others as $k => $v) {
                $this->db->where($k, $v);
            }
        } else {
            $this->db->where($this->primary_key, $id);
        }

        return $this->db->delete($this->table);

//      $this->session->set_flashdata('alert_success', 'Record successfully deleted.');
    }

    /**
     * Returns the CI query result object.
     * $this->model_name->get()->result();
     */
    public function result()
    {
        return $this->query->result();
    }

    /**
     * Returns the CI query row object.
     * $this->model_name->get()->row();
     */
    public function row()
    {
        return $this->query->row();
    }

    /**
     * Returns CI query result array.
     * $this->model_name->get()->result_array();
     */
    public function result_array()
    {
        return $this->query->result_array();
    }

    /**
     * Returns CI query row array.
     * $this->model_name->get()->row_array();
     */
    public function row_array()
    {
        return $this->query->row_array();
    }

    /**
     * Returns CI query num_rows().
     * $this->model_name->get()->num_rows();
     */
    public function num_rows()
    {
        return $this->query->num_rows();
    }

    /**
     * Used to retrieve record by ID and populate $this->form_values.
     * @param int $id
     */
    public function prep_form($id = NULL)
    {
        if (!$_POST and ($id)) {
            $this->db->where($this->primary_key, $id);
            $row = $this->db->get($this->table)->row();

            foreach ($row as $key => $value) {
                $this->form_values[$key] = $value;
            }
        }
    }

    /**
     * Performs validation on submitted form. By default, looks for method in
     * child model called validation_rules, but can be forced to run validation
     * on any method in child model which returns array of validation rules.
     * @param string $validation_rules
     * @return boolean
     */
    public function run_validation($validation_rules = NULL)
    {
        if (!$validation_rules) {
            $validation_rules = $this->default_validation_rules;
        }

        foreach (array_keys($_POST) as $key) {
            $this->form_values[$key] = $this->input->post($key);
        }

        if (method_exists($this, $validation_rules)) {
            $this->validation_rules = $validation_rules;

            $this->load->library('form_validation');

            $this->form_validation->set_rules($this->$validation_rules());

            $run = $this->form_validation->run();

            $this->validation_errors = validation_errors();

            return $run;
        }
    }

    /**
     * Returns the assigned form value to a form input element.
     * @param type $key
     * @return type
     */
    public function form_value($key)
    {
        return (isset($this->form_values[$key])) ? $this->form_values[$key] : '';
    }

} 
```

然后当我需要特定数据库的模型时，我在模型中使用类

模型/内容.php

```
class content_types extends MY_Model
{
    function __construct()
    {
        parent::__construct();
        $this->curentuserdata = $this->session->userdata('lg_result');
        $this->userprofile = $this->session->userdata('user_profile');
    }

    public $table = 'content_types';
    public $primary_key = 'id';
    public $default_limit = 50;

    public function default_order_by()
    {
        $this->db->order_by('id asc');
    }

} 
```

那么我需要在哪里调用模型

```
$this->modelname->save($id,array());
$this->modelname->where()->get()->row(); 
```

所以为“视图表”创建一个，为插入表创建另一个

# ruby - 在 Ruby 中解析函数字符串的参数

> ID：15126990
> 
> 赞同：0
> 
> 时间：2013-02-28T03:38:26.410
> 
> 标签：ruby, string

谢谢你的时间！

我得到一个字符串，看起来像这样：

```
web_custom_request("pricing_approval",
    "URL=http://loanoriginationci:8080/ro-web/service/pricing/task/list/pricing_approval?uniqueId=1362015883531",
    "Method=GET",
    "Resource=0",
    "RecContentType=text/xml",
    "Referer=http://loanoriginationci:8080/MAUIWeb/MAUIShell.swf/[[DYNAMIC]]/6",
    "Snapshot=t76.inf",
    "Mode=HTTP",
    LAST); 
```

我想获取这个函数字符串的参数，并将它们存储在不同的变量中。然后我想到的是把这个字符串分成`string.split(",")`，然后得到它的每个部分。

但是如果参数里面有逗号，说这个`"Body=xxxx,xxxx",`上面的方法就错了。

那么有没有一些优雅而整洁的方法来处理它呢？再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:40:32.377

您可以使用[参数](http://www.ruby-doc.org/core-2.0/Method.html#method-i-parameters)来做到这一点。下面的示例返回一个`hash`，其键是局部变量名称，值是方法调用中传递的值。

```
def web_custom_request(a,b,c,d,e,f,g,h,i)
  Hash[*method(__method__).parameters.map { |arg| arg[1] }.map { |arg| [arg.to_s, "#{eval arg.to_s}"] }.flatten]
end

h = web_custom_request("pricing_approval",
                       "URL=http://loanoriginationci:8080/ro-web/service/pricing/task/list/pricing_approval?uniqueId=1362015883531",
                       "Method=GET",
                       "Resource=0",
                       "RecContentType=text/xml",
                       "Referer=http://loanoriginationci:8080/MAUIWeb/MAUIShell.swf/[[DYNAMIC]]/6",
                       "Snapshot=t76.inf",
                       "Mode=HTTP",
                       "LAST");

puts h # {"a"=>"pricing_approval", "b"=>"URL=http://loanoriginationci:8080/ro-web/service/pricing/task/list/pricing_approval?uniqueId=1362015883531", "c"=>"Method=GET", "d"=>"Resource=0", "e"=>"RecContentType=text/xml", "f"=>"Referer=http://loanoriginationci:8080/MAUIWeb/MAUIShell.swf/[[DYNAMIC]]/6", "g"=>"Snapshot=t76.inf", "h"=>"Mode=HTTP", "i"=>"LAST"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:34:41.933

我认为这取决于您的字符串的格式。

如果如您在上面给出的那样，那么 using `string.split`（不指定分隔符）将起作用，因为它将拆分字符串，在您的情况下，空格自然落在不同的“参数”之间。

如果您的字符串中根本没有间距，例如：

```
string = 'web_custom_request("pricing_approval","Method=GET","Body=xxxx,xxxx")' 
```

那么您可以使用正则表达式来查找引号之间的部分，例如`string.scan(/"([^"]*)"/)`

这给出了以下匹配组：

```
[["pricing_approval"], ["Method=GET"], ["Body=xxxx,xxxx"]] 
```

# haskell - 引用存在类型变量

> ID：15126993
> 
> 赞同：9
> 
> 时间：2013-02-28T03:38:29.643
> 
> 标签：haskell, existential-type

我想在我的代码中为一些本地函数添加类型签名。但是，它们的类型涉及匿名的、存在绑定的类型变量。由于它们是匿名的，我不知道如何编写类型签名。我怎样才能引用这样的类型变量？

在下面的示例中，`go`has type `[b] -> Int -> Int`，其中`b`是由模式 match 绑定的类型`T (x_shared:xs) g`。我可以为它写什么类型的签名？

```
data T = forall a. T [a] (a -> a -> Int)

f :: T -> Int
f (T (x_shared:xs) g) = go xs 0
  where
    -- go :: what type?
    go (x:xs) n = go xs $! n + g x_shared x
    go []     n = n 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T03:58:14.497

通过`ScopedTypeVariables`扩展，您可以向范围添加类型注释`g`并将类型变量引入`a`范围。

```
f (T (x_shared:xs) (g :: a -> a -> Int)) = go xs 0 
```

`go`然后你可以为with写一个类型签名`a`。

```
go :: [a] -> Int -> Int 
```

# python - Blender3D 中更高效的 Python 脚本

> ID：15126994
> 
> 赞同：1
> 
> 时间：2013-02-28T03:38:43.077
> 
> 标签：python, performance, blender, processing-efficiency

我基本上是在使用原始 UV 球体构建 3D 散点图，并且在尝试一次创建超过几百个点时遇到内存问题。我的笔记本电脑只有 2.1Ghz 处理器，但我想知道是否有更好的方法来写这个：

```
import bpy
import random 

while count < 5:
    bpy.ops.mesh.primitive_uv_sphere_add(size=.3,\
    location=(random.randint(-9,9), random.randint(-9,9),\
    random.randint(-9,9)), rotation=(0,0,0))

    count += 1 
```

我意识到，使用如此简单的脚本，任何性能提升都可能微不足道，但无论如何都想试一试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:15:56.033

一些可能的建议

*   我会预先计算 x、y、z 值，将它们存储在 mathutil 向量中，并将其添加到要迭代的 dict 中。
*   复制应该比实例化新对象提供更小的内存占用。`bpy.ops.object.duplicate_move(OBJECT_OT_duplicate=(linked:false, TRANSFORM_OT_translate=(transform)`

编辑：

做进一步的研究，每次 bpy.ops.* 被称为重绘函数时都会出现。一位用户记录了生成 UV 球所需的时间呈指数增长。

CoDEmanX 向另一个用户提供了以下代码片段。

```
import bpy

bpy.ops.object.select_all(action='DESELECT')
bpy.ops.mesh.primitive_uv_sphere_add()
sphere = bpy.context.object

for i in range(-1000, 1000, 2):
    ob = sphere.copy()
    ob.location.y = i
    #ob.data = sphere.data.copy() # uncomment this, if you want full copies and no linked duplicates
    bpy.context.scene.objects.link(ob)
bpy.context.scene.update() 
```

那么这只是调整代码以设置对象位置的情况

```
obj.location = location_dict[i] 
```

# vagrant - vagrantfile 食谱路径

> ID：15126995
> 
> 赞同：0
> 
> 时间：2013-02-28T03:38:43.933
> 
> 标签：vagrant

我想将食谱路径设置到某个地方，这样我就不需要每次都修改 Vagrantfile（在 vagrant init 之后）。

我发现[Vagrantfile](http://docs.vagrantup.com/v1/docs/vagrantfile.html)加载了几个地方，所以我决定在 ~/.vagrant.d/Vagrantfile 中设置我的食谱路径信息，（这个文件是 Vagrantfile 加载顺序的第 3 个），例如：

```
...
   config.vm.provision :chef_solo do |chef|
     chef.cookbooks_path = ["D:/lib/chef/cookbooks"]
     chef.add_recipe "dev::default"
   end
... 
```

但是当我创建一个新的虚拟机并修改 Vagrantfile 时（这个文件是 Vagrantfile 加载顺序的第四个）：

```
...
  config.vm.provision :chef_solo do |chef|
     chef.add_recipe "torch"
  end
... 
```

错误：

```
[2013-02-28T03:23:36+00:00] ERROR: Running exception handlers
[2013-02-28T03:23:36+00:00] ERROR: Exception handlers complete
[2013-02-28T03:23:36+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-02-28T03:23:36+00:00] FATAL: Chef::Exceptions::CookbookNotFound: Cookbook torch not found. If
you're loading torch from another cookbook, make sure you configure the dependency in your metadata
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

但我确信特定的食谱在我的食谱路径下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:46:43.387

尝试以下步骤： - 在 vagrantfile 的目录中创建一个文件夹 cookbooks - 将食谱签出到此目录 - 将以下内容添加到您的 vagrantfile

```
 chef.cookbooks_path = ["cookbooks"] 
```

希望有所帮助

# performance - 直接查询比使用连接的子查询慢得多

> ID：15126996
> 
> 赞同：2
> 
> 时间：2013-02-28T03:38:49.373
> 
> 标签：performance, postgresql, postgis, database-performance

我有 2 张桌子。它们的结构大致如下；不过我改了名字。

```
CREATE TABLE overlay_polygon
(
  overlay_polygon_id SERIAL PRIMARY KEY,
  some_other_polygon_id INTEGER REFERENCES some_other_polygon (some_other_polygon_id)
  dollar_value NUMERIC,
  geom GEOMETRY(Polygon,26915)
)

CREATE TABLE point
(
  point_id SERIAL PRIMARY KEY,
  some_other_polygon_id INTEGER REFERENCES some_other_polygon (some_other_polygon_id)
  -- A bunch of other fields that this query won't touch
  geom GEOMETRY(Point,26915)
) 
```

`point`在其列上具有空间索引`geom`，名为`spix_point`，并且在其`some_other_polygon_id`列上也具有索引。

中大约有 500,000 行`point`，并且几乎所有行都`point`与 中的某些行相交`overlay_polygon`。最初，我的`overlay_polygon`表包含几行，它们的面积非常小（大部分小于 1 平方米），并且在空间上不与`point`. 删除不与 中的任何行相交的小行后`point`，共有 38 行。

顾名思义，是一个多边形表，它是由其他 3 个表（包括）`overlay_polygon`的多边形叠加而生成的。`some_other_polygon`特别是，我需要使用`dollar_value`和一些列进行一些计算`point`。当我开始删除不相交的行以加快将来的处理时，我最终查询了 COUNT 行。最明显的查询似乎如下。

```
SELECT op.*, COUNT(point_id) AS num_points
FROM overlay_polygon op
LEFT JOIN point ON op.some_other_polygon_id = point.some_other_polygon_id AND ST_Intersects(op.geom, point.geom)
GROUP BY op.overlay_polygon_id
ORDER BY op.overlay_polygon_id
; 
```

这是它的`EXPLAIN (ANALYZE, BUFFERS)`.

```
GroupAggregate  (cost=544.45..545.12 rows=38 width=8049) (actual time=284962.944..540959.914 rows=38 loops=1)
  Buffers: shared hit=58694 read=17119, temp read=189483 written=189483
  I/O Timings: read=39171.525
  ->  Sort  (cost=544.45..544.55 rows=38 width=8049) (actual time=271754.952..534154.573 rows=415224 loops=1)
        Sort Key: op.overlay_polygon_id
        Sort Method: external merge  Disk: 897016kB
        Buffers: shared hit=58694 read=17119, temp read=189483 written=189483
        I/O Timings: read=39171.525
        ->  Nested Loop Left Join  (cost=0.00..543.46 rows=38 width=8049) (actual time=0.110..46755.284 rows=415224 loops=1)
              Buffers: shared hit=58694 read=17119
              I/O Timings: read=39171.525
              ->  Seq Scan on overlay_polygon op  (cost=0.00..11.38 rows=38 width=8045) (actual time=0.043..153.255 rows=38 loops=1)
                    Buffers: shared hit=1 read=10
                    I/O Timings: read=152.866
              ->  Index Scan using spix_point on point  (cost=0.00..13.99 rows=1 width=200) (actual time=50.229..1139.868 rows=10927 loops=38)
                    Index Cond: (op.geom && geom)
                    Filter: ((op.some_other_polygon_id = some_other_polygon_id) AND _st_intersects(op.geom, geom))
                    Rows Removed by Filter: 13353
                    Buffers: shared hit=58693 read=17109
                    I/O Timings: read=39018.660
Total runtime: 542172.156 ms 
```

但是，我发现此查询的运行速度要快得多：

```
SELECT *
FROM overlay_polygon
JOIN (SELECT op.overlay_polygon_id, COUNT(point_id) AS num_points
      FROM overlay_polygon op
      LEFT JOIN point ON op.some_other_polygon_id = point.some_other_polygon_id AND ST_Intersects(op.geom, point.geom)
      GROUP BY op.overlay_polygon_id
     ) x ON x.overlay_polygon_id = overlay_polygon.overlay_polygon_id
ORDER BY overlay_polygon.overlay_polygon_id
; 
```

它`EXPLAIN (ANALYZE, BUFFERS)`在下面。

```
Sort  (cost=557.78..557.88 rows=38 width=8057) (actual time=18904.661..18904.748 rows=38 loops=1)
  Sort Key: overlay_polygon.overlay_polygon_id
  Sort Method: quicksort  Memory: 126kB
  Buffers: shared hit=58690 read=17134
  I/O Timings: read=9924.328
  ->  Hash Join  (cost=544.88..556.78 rows=38 width=8057) (actual time=18903.697..18904.210 rows=38 loops=1)
        Hash Cond: (overlay_polygon.overlay_polygon_id = op.overlay_polygon_id)
        Buffers: shared hit=58690 read=17134
        I/O Timings: read=9924.328
        ->  Seq Scan on overlay_polygon  (cost=0.00..11.38 rows=38 width=8045) (actual time=0.127..0.411 rows=38 loops=1)
              Buffers: shared hit=2 read=9
              I/O Timings: read=0.173
        ->  Hash  (cost=544.41..544.41 rows=38 width=12) (actual time=18903.500..18903.500 rows=38 loops=1)
              Buckets: 1024  Batches: 1  Memory Usage: 2kB
              Buffers: shared hit=58688 read=17125
              I/O Timings: read=9924.154
              ->  HashAggregate  (cost=543.65..544.03 rows=38 width=8) (actual time=18903.276..18903.379 rows=38 loops=1)
                    Buffers: shared hit=58688 read=17125
                    I/O Timings: read=9924.154
                    ->  Nested Loop Left Join  (cost=0.00..543.46 rows=38 width=8) (actual time=0.052..17169.606 rows=415224 loops=1)
                          Buffers: shared hit=58688 read=17125
                          I/O Timings: read=9924.154
                          ->  Seq Scan on overlay_polygon op  (cost=0.00..11.38 rows=38 width=8038) (actual time=0.004..0.537 rows=38 loops=1)
                                Buffers: shared hit=1 read=10
                                I/O Timings: read=0.279
                          ->  Index Scan using spix_point on point  (cost=0.00..13.99 rows=1 width=200) (actual time=4.422..381.991 rows=10927 loops=38)
                                Index Cond: (op.gopm && gopm)
                                Filter: ((op.some_other_polygon_id = some_other_polygon_id) AND _st_intersects(op.geom, geom))
                                Rows Removed by Filter: 13353
                                Buffers: shared hit=58687 read=17115
                                I/O Timings: read=9923.875
Total runtime: 18905.293 ms 
```

正如您所看到的，它们具有可比较的成本估算，尽管我不确定这些成本估算的准确性如何。我对涉及 PostGIS 功能的成本估算持怀疑态度。自上次修改和运行查询之前，这两个表都已`VACUUM ANALYZE FULL`在它们上运行。

也许我根本无法阅读我`EXPLAIN ANALYZE`的 s，但我不明白为什么这些查询的运行时间如此不同。任何人都可以识别任何东西吗？我能想到的唯一可能性与`LEFT JOIN`.

## 编辑 1

根据@ChrisTravers 的建议，我增加`work_mem`并重新运行了第一个查询。我不认为这代表了重大改进。

执行

```
SET work_mem='4MB'; 
```

（它是 1 MB。）

然后执行第一个查询给出了这些结果。

```
GroupAggregate  (cost=544.45..545.12 rows=38 width=8049) (actual time=339910.046..495775.478 rows=38 loops=1)
  Buffers: shared hit=58552 read=17261, temp read=112133 written=112133
  ->  Sort  (cost=544.45..544.55 rows=38 width=8049) (actual time=325391.923..491329.208 rows=415224 loops=1)
        Sort Key: op.overlay_polygon_id
        Sort Method: external merge  Disk: 896904kB
        Buffers: shared hit=58552 read=17261, temp read=112133 written=112133
        ->  Nested Loop Left Join  (cost=0.00..543.46 rows=38 width=8049) (actual time=14.698..234266.573 rows=415224 loops=1)
              Buffers: shared hit=58552 read=17261
              ->  Seq Scan on overlay_polygon op  (cost=0.00..11.38 rows=38 width=8045) (actual time=14.612..15.384 rows=38 loops=1)
                    Buffers: shared read=11
              ->  Index Scan using spix_point on point  (cost=0.00..13.99 rows=1 width=200) (actual time=95.262..5451.636 rows=10927 loops=38)
                    Index Cond: (op.geom && geom)
                    Filter: ((op.some_other_polygon_id = some_other_polygon_id) AND _st_intersects(op.geom, geom))
                    Rows Removed by Filter: 13353
                    Buffers: shared hit=58552 read=17250
Total runtime: 496936.775 ms 
```

## 编辑 2

嗯，这是一种我以前没有注意到的好闻的大气味（主要是因为我在阅读`ANALYZE`输出时遇到了麻烦）。抱歉我没有早点注意到。

```
Sort  (cost=544.45..544.55 rows=38 width=8049) (actual time=271754.952..534154.573 rows=415224 loops=1) 
```

估计行数：38。实际行数：超过 400K。想法，有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:56:41.557

我的直接想法是，这可能与 work_mem 限制有关。计划之间的区别在于，在第一个中，您加入然后聚合，而在第二个中，您聚合和加入。这意味着您的聚合集更窄，这意味着该操作使用的内存更少。

如果您尝试将 work_mem 加倍并再次尝试，看看会发生什么变化会很有趣。

**编辑：** 现在我们知道增加 work_mem 只会带来适度的改进，下一个问题是排序行估计。我怀疑它实际上在这里超过了 work_mem 并且它期望这会很容易，因为它预计只有 38 行，而是得到很多行。我不清楚规划器从哪里获得这些信息，因为很清楚规划器（正确地）估计 38 行是我们期望从聚合中得到的行数。这部分对我来说开始看起来像一个计划错误，但我很难找到它。可能值得在 pgsql-general 电子邮件列表中写出来并提出。在我看来，计划者几乎在排序所需的内存和聚合所需的内存之间感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:43:49.137

正如您在 中概述的那样`EDIT 2`，确实，返回的估计行数和实际行数之间存在很大的不匹配。但是问题的根源在树的下方，这里：

```
Index Scan using spix_point on point  (cost=0.00..13.99 rows=1 width=200) 
   (actual time=95.262..5451.636 rows=10927 loops=38) 
```

这会影响树的所有节点，`Nested Loop`并且`Sort`.

我会尝试执行以下操作：

1.  首先，确保统计数据是最新的：

    ```
    VACUUM ANALYZE point;
    VACUUM ANALYZE overlay_polygon; 
    ```

2.  如果不走运，请增加列的[统计目标](http://www.postgresql.org/docs/current/interactive/sql-altertable.html#AEN64390)`geometry`：

    ```
    ALTER TABLE point ALTER geom SET STATISTICS 500;
    ALTER TABLE overlay_polygon ALTER geom SET STATISTICS 1500; 
    ```

    然后再次分析表格。

3.  恕我直言，`Nested Loops`这里不好，`Hash`会[更合适](http://www.postgresql.org/docs/current/interactive/runtime-config-query.html)。尝试发出：

    ```
    SET enable_nestloop TO off; 
    ```

    [在会话级别上](http://www.postgresql.org/docs/current/interactive/sql-set.html#AEN78159)，看看它是否有帮助。

* * *

在对查询进行了更多查看之后，我认为值得提高该`some_other_polygon_id`列的统计目标：

```
ALTER TABLE point ALTER some_other_polygon_id SET STATISTICS 5000; 
```

另外，我看不出为什么您的第二个查询比第一个查询快得多。我是否正确地说这两个查询都只执行一次并且在“冷”数据库上执行？确实感觉，第二个查询利用了 OS 文件系统缓存，因此执行得更快。

在这里使用`spix_point`是计划者的错误决定，因为`point` *将被完整扫描*到 fullfil `LEFT JOIN`。因此，改进查询的一种方法可能是强制`Seq Scan`此表。这可以在以下方面的帮助下完成[`CTE`](http://www.postgresql.org/docs/current/interactive/queries-with.html)：

```
WITH p AS (SELECT point_id, some_other_polygon_id, geom FROM point)
SELECT op.*, COUNT(p.point_id) AS num_points
  FROM overlay_polygon op
  LEFT JOIN p ON op.some_other_polygon_id = p.some_other_polygon_id
       AND ST_Intersects(op.geom, p.geom)
 GROUP BY op.overlay_polygon_id
 ORDER BY op.overlay_polygon_id; 
```

但这将在物化领域放缓。不过，试一试。

# symfony - 是否有关于在“一对多”关系中非动态地将“多”添加到“一”的文档？

> ID：15126997
> 
> 赞同：0
> 
> 时间：2013-02-28T03:38:50.970
> 
> 标签：symfony

我有一个`Customer`谁有几个`PhoneNumber`s。

用户通过表单创建一个新`Customer`的，我希望他能够指定一个`PhoneNumber`.

`PhoneNumber`Symfony 的文档告诉我如果用户正在创建一个并且还必须指定一个`Customer`（[链接](http://symfony.com/doc/current/book/forms.html#embedded-forms)），如何执行此操作。它还告诉我如何使用一些 Javascript 来解决我的问题，如 Cookbook 的动态添加实体的配方（[链接](http://symfony.com/doc/current/cookbook/form/form_collections.html)）所述。

我缺少的是文档的一部分，它只是描述了一个非动态表单，允许您在提交时添加单个实体。因此，用户填写客户的详细信息，输入电话号码，一切顺利。

我想我可以制作一个单独的表格，给它一个`PhoneNumberType`，然后在提交时调用`$customer->addPhoneNumber($phoneNumber)`。但似乎应该有一种方法可以通过单独的关系和单一的形式来处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:12:21.450

回到这个问题，我意识到答案很简单。在我的控制器中，

```
// CustomerController.php
$customer = new Customer();

$phoneNumber = new PhoneNumber();
$customer->addPhoneNumber($phoneNumber); 
```

现在，当我构建表单时，我将有一个`PhoneNumber`与 new 关联的空白`Customer`，并且一切都会按预期持续存在。