# StackOverflow 问答 15676000-15676999

# jquery - Jquery自动完成无法将值传递给隐藏字段

> ID：15676001
> 
> 赞同：2
> 
> 时间：2013-03-28T06:59:47.663
> 
> 标签：jquery, jsp, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

我一直在尝试使用 JQuery 和 JSP 进行自动完成，但到目前为止我无法成功获取隐藏字段中的值，但我能够获取部门名称。

有人能指出究竟是什么问题吗？

代码

```
 <link rel="stylesheet" type="text/css" href="css/jquery.autocomplete.css" />
  <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
 <script type="text/javascript" src="js/jquery.autocomplete.js"></script>

<script type="text/javascript"> 
$(document).ready(function() { 
$("#dept").autocomplete( 
"myData.jsp", 
{ 
minChars:4, 
delay:30, 
autoFill:false, 
matchSubset:false, 
matchContains:1, 
selectOnly:1, 
select: function(event, ui) { 
$("#hid").val(result) 
} 
} 
); 

}); 
```

在 myData.jsp 我有 // 将代码移动到 Servlet

```
Department t = new Department ();    
    String query = request.getParameter("q");    
    List<String> tenders = t.getDepartments(query); 

    Iterator<String> iterator = tenders.iterator();
    while(iterator.hasNext()) {
        String deptName= (String)iterator.next();
        String depto = (String)iterator.next();
        out.println(deptName);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:15:06.333

试试这个：

```
$("#dept").on('blur keyup change', function(){
   $("#hid").val($(this).val()); 
}); 
```

尝试获取事件`blur keyup`并`change`在`#dept`文本输入时获取这些事件`#hid`将获取它的值。

# javascript - 无法从 Kendo Window 中的内容关闭窗口

> ID：15676005
> 
> 赞同：2
> 
> 时间：2013-03-28T07:00:08.987
> 
> 标签：javascript, jquery, html, jsp, kendo-ui

根据[这个页面](http://www.kendoui.com/forums/ui/window/close-window-from-within-external-content.aspx)，我所要做的就是从窗口的内容中调用以下代码，因为我没有使用 iframe：

```
$(buttonInsideWindow).closest(".k-window-content").data("kendoWindow").close(); 
```

它不起作用。当我尝试从控制台手动关闭它时，当您尝试检索 kendoWindow 时它返回 null。（也就是说，它在`$(buttonInsideWindow).closest(".k-window-content")`被调用时返回正确的 div 但`.data("kendoWindow")`on 它返回 null）。

我在窗口内容中使用了一个自定义按钮，它手动调用关闭事件。这就是我首先调用窗口的方式：

```
function otherCusLogInWindow_Open() 
{
    var otherCusLogInWindow = $("#otherCusLogInWindow");

    otherCusLogInWindow.kendoWindow({
        width: "535px",
        height: "850px",
        title: "ASDF",
        modal: true,
        actions: ["Minimize", "Maximize", "Close"],
        content: "otherCusLogIn.jsp",
        iframe: false,
        visible: false,
        draggable: true,
        resizable: true

    }).data("kendoWindow").center().open();
} 
```

在窗口内容中，关闭事件是微不足道的：

```
function closeWindow(parentFuncCall) {
    $("#otherCusLogInWindow").closest(".k-window-content").data("kendoWindow").close();
} 
```

只是为了解决这个问题，由于其他原因，我无法使用 iframe。我需要让它在当前状态下工作。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:24:24.747

尝试这个：

`$("#otherCusLogInWindow").data("kendoWindow").close();`

以下是有关获取客户端对象参考的文档：[http ://docs.kendoui.c​​om/getting-started/web/window/overview#accessing-an-existing-window](http://docs.kendoui.com/getting-started/web/window/overview#accessing-an-existing-window)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T11:53:50.207

当您的内容页面返回一个视图而不是部分视图时，可能会出现此问题，因为您的内容页面有一个新的`jquery.js`. 所以`jquery`数据方法不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-28T11:47:34.973

```
window.parent.$("#otherCusLogInWindow").data("kendoWindow").close() 
```

# c++ - 使用私有变量初始化数组

> ID：15676008
> 
> 赞同：1
> 
> 时间：2013-03-28T07:00:15.400
> 
> 标签：c++, oop

我正在尝试做一个小应用程序来计算给定图形的一些路径。

我创建了一个类来处理简单的图形，如下所示：

```
class SimpleGraph {

    int _nbNodes;
    int _nbLines;

   protected:
    int AdjMatrix[_nbNodes, _nbNodes]; //Error happens here...
    int IncMatrix[_nbNodes, _nbLines]; //...and here!

   public:
    SimpleGraph(int nbNodes, int nbLines) { this->_nbNodes = nbNodes - 1; this->_nbLines = nbLines - 1; };
    virtual bool isSimple();
}; 
```

在编译时，我收到两个受保护成员声明的错误。

我不明白出了什么问题，因为只有一个构造函数将这些值作为参数。因此，它们不能未初始化。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:02:14.313

编译器需要知道为 class 的成员分配多少空间`SimpleGraph`。然而，由于`AdjMatrix`和`IncMatrix`是在堆栈上定义的，并且它们的大小是在运行时（即编译后）确定的，所以它不能这样做。具体来说，该标准规定类中数组的大小必须为[`constexpr`](http://thenewcpp.wordpress.com/2011/11/14/constexpr/).

要解决此问题，您可以：

*   而是在堆上分配`AdjMatrix`和`IncMatrix`，然后您可以在运行时分配内存。
*   对两个数组使用固定大小并将它们保留在堆栈上。

--

您的代码的另一个主要问题是您无法使用逗号 ( ) 创建多维数组`AdjMatrix[int, int]`。您必须改为使用：

*   `AdjMatrix[int][int]`
*   `AdjMatrix[int * int]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:02:55.753

C++ 中的对象具有固定大小，需要在编译时知道。AdjMatrix 和 InMatrix 的大小在编译时是未知的，只有在运行时才知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:27:02.723

在行中

```
int AdjMatrix[_nbNodes, _nbNodes]; //Error happens here...
int IncMatrix[_nbNodes, _nbLines]; //...and here! 
```

数组符号是错误的。您不能在 C++ 中以这种方式指定二维数组。正确的符号在每个维度上使用括号，例如：

```
int data[5][2]; 
```

关于您面临的问题，C++ 中数组的维度必须在编译时指定，即。编译器必须知道在编译程序时用于指示数组维度的值是什么。这显然不是这里的情况。您必须恢复使用整数文字，如我的示例中所示，或更改代码以使用向量：

```
std::vector<std::vector<int> > AdjMatrix; 
```

在构造函数中：

```
SimpleGraph(int nbNodes, int nbLines) : AdjMatrix(nbNodes) {
    for (int i = 0; i< nbNodes; i++)
        AdjMatrix[i].resize(20);
} 
```

请注意，您将不再需要`_nbNodes`，而是`size()`使用`AdjMatrix`. 您将必须为`IncMatrix`.

如果您在编译时知道这些值，另一种选择是使用宏以符号方式定义它们。

```
#define NBNODES  20

int AdjMatrix[NBNODES][NBNODES]; 
```

但由于您希望将它们作为构造函数参数传递，这可能不符合您的需要。不过，如果您知道参数在编译时是常量，则可以`constexpr`在构造函数参数上使用 C++11 限定符。

# ember.js - Ember.js RC1 - 指定“模板”时不显示视图

> ID：15676017
> 
> 赞同：1
> 
> 时间：2013-03-28T07:00:37.450
> 
> 标签：ember.js

按照 Ember 模板指南，我执行以下操作：

```
App.PostsView = Ember.View.extend({
    template: Ember.Handlebars.compile('I am the template')
}); 
```

但是什么都没有渲染。当我使用`templateName`视图*呈现*：

// html

```
<script type='text/x-handlebars' data-template-name='posts-template'>
    <h1>I am the template</h1>
</script> 
```

// js

```
App.PostsView = Ember.View.extend({
    templateName: 'posts-template'
}); 
```

如何使用`template`指南中所述的功能使模板正常工作？

**编辑：**

我确实遇到过这些：

[emberjs 模板编译在 rc1 中不起作用](https://stackoverflow.com/questions/14984207/emberjs-template-compile-doesnt-work-in-rc1)

[如何在 ember.js RC1 中指定使用带有已编译车把的视图](https://stackoverflow.com/questions/14915027/how-do-i-specify-using-a-view-with-a-compiled-handlebar-in-ember-js-rc1)

所以这*可能*看起来像重复。但是，这首先似乎使用了 Ember 指南中未指定的一些额外工作，第二个是我正在做的，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:34:14.347

好的，这有效：

```
Ember.TEMPLATES['posts-template'] = Ember.Handlebars.compile('I am the template');
App.PostsView = Ember.View.extend({
    templateName: 'posts-template'
}); 
```

我们发生的事情是我们的**预编译**模板被添加到`Handlebars.templates`而不是`Ember.TEMPLATES`我们使用这个返回编译模板的事实，例如：

```
App.PostsView = Ember.View.extend({
    template: Handlebars.templates['posts-template']
}); 
```

因此，似乎应该避免干扰`template`函数，而是*始终*使用`templateName`将在`Ember.TEMPLATES`.

希望这可以帮助某人节省一些时间:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:20:19.517

您还可以指定预期内容`templateName`和实际`template`内容：

```
App.PostsView = Ember.View.extend({
  templateName: 'posts',
  template: Ember.Handlebars.compile('I am the template')
}); 
```

[JSBin 示例](http://jsbin.com/ixupad/271/edit)

# sql - 如何在 has_many 关系中搜索？

> ID：15676018
> 
> 赞同：0
> 
> 时间：2013-03-28T07:00:43.033
> 
> 标签：sql, ruby-on-rails, database

例如，一位教授有很多约会。所以我们将有一个教授表和一个约会表。在后者中，每个条目都有一个外键指向教授表中的条目，这是 Rails 中典型的 has_many 关系。

我的问题是，如果我想查询特定教授的所有约会怎么办？由于没有从教授到约会的反向指针，这意味着我必须查找整个约会表并检查仅针对这一位教授的那些。我知道这种方式有效，但效率似乎很差。因此，任何人都可以在 has_many 关系中给我一个更好的反向搜索解决方案（我不知道你怎么称呼它，所以我在这里编造术语）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:11:48.013

鉴于此代码：

```
class Professor < ActiveRecord::Base
  has_many :appointments
end

class Appointment < ActiveRecord::Base
  belongs_to :professor
end 
```

您可以使用关联来查询数据库，如下所示：

```
professor = Professor.find(1)
appointments = professor.appointments 
```

这将仅检索属于特定教授的约会。此代码不会将整个约会表加载到内存中。它正在构建一个仅选择所需数据子集的查询。

# css - CSS 属性“不透明度”如何在浏览器（IE、Chrome、Firefox、Opera）中呈现？

> ID：15676019
> 
> 赞同：1
> 
> 时间：2013-03-28T07:00:43.697
> 
> 标签：css, browser

我注意到，在应用“淡入”效果时，模式对话框的颜色会发生变化。那么，想知道，CSS 属性“不透明度”在浏览器中究竟是如何呈现的？

谁能解释一下不同的浏览器如何呈现 CSS 不透明度？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:22:26.267

不透明度是通过基于不透明度值的权重年龄对像素值进行*平均操作来完成的。*

例如，如果您有一个像素

`R: 200, G: 220, B: 100`在`10, 10`

如果您想渲染一个背景颜色为 的元素`150, 120, 100`，`opacity: 0.5`则生成的像素颜色将计算为：

```
opacity = 0.5

R = 200 * (1-opacity) + 150 * opacity
G = 220 * (1-opacity) + 120 * opacity
B = 100 * (1-opacity) + 100 * opacity 
```

将对半透明元素跌落的所有像素执行上述计算（可能在硬件级别）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:20:03.053

我不确切知道浏览器是如何渲染它的。但我知道具有 opacity 属性的元素中的所有元素也会受到影响。

希望这对您有所帮助。

# c# - DataGrid 选择的值无法访问，它正在获取匿名类型对象

> ID：15676021
> 
> 赞同：0
> 
> 时间：2013-03-28T07:00:51.800
> 
> 标签：c#, wpf, datagrid

我有一个绑定数据人、地点和数量的数据网格。在 SelectionChanged 事件中，我试图访问数据，但它说类型是匿名的。

![在此处输入图像描述](../Images/75fca26d70ee38dd06c801b1c570fc33.png)

如何转换此对象并获取值？

任何帮助或建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:14:43.807

您可以尝试使用反射来获取属性值。

```
private void workgrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    object selectedItem = ((DataGrid)sender).SelectedItem;
    Type type = selectedItem.GetType(); 

    string name = (string)type.GetProperty("PersonName").GetValue(selectedItem, null);
    int amount = (int)type.GetProperty("Amount").GetValue(selectedItem, null);
    string place = (string)type.GetProperty("Place").GetValue(selectedItem, null);
} 
```

不过，推荐的方法是为您将用于将 DataGrid 绑定到的集合创建自己的类型。这将允许您避免直接绑定到匿名类型。

```
public class AccountInfo
{
    public string PersonName { get; set; }
    public int Amount { get; set; }
    public string Place { get; set; }
} 
```

# javascript - 检查字符串是否只包含特殊字符

> ID：15676022
> 
> 赞同：-2
> 
> 时间：2013-03-28T07:00:57.370
> 
> 标签：javascript, regex, special-characters

是否可以使用javascript检查字符串是否仅包含特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:40:09.113

匹配字符串只有字符，这些字符不在此处定义为的类中`a-z`，`A-Z`或`0-9`。

```
var regex = /^[^a-zA-Z0-9]+$/ 
```

测试一下...

```
console.log( "My string to test".match(regex) )
console.log( "My string, to test!".match(regex) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T13:09:06.913

是的，有可能。试试下面，它应该工作。

```
function hasOnlySpecialCharater(val) {
    var pattern = /^[^a-zA-Z0-9]+$/;
    return (pattern.test(val));
}

console.log(hasOnlySpecialCharater("@#$"));
console.log(hasOnlySpecialCharater("ChiragP&^")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-08T08:02:32.240

我们可以这样写：

```
 function checkOnlySplChar(str) {
            // to check if string contains only special characters 
            var alphaNumOnly = RegExp('/^[^a-zA-Z0-9]+$/');
            return (alphaNumOnly.test(str));
        } 
```

# c++ - pthread广播然后等待？

> ID：15676027
> 
> 赞同：5
> 
> 时间：2013-03-28T07:01:23.997
> 
> 标签：c++, pthreads, mutex, race-condition

我正在尝试设置几个线程处于等待状态，直到它们收到`pthread_cond_broadcast()`.

完成一项工作后，我希望线程回到它们的等待状态。

我还希望调用 的进程`pthread_cond_broadcast()`在继续之前等待所有线程返回其等待状态。在这种情况下，调用广播的是 main() 函数。我正在尝试执行此操作 b 让 main(0`pthread_cond_wait()`在调用广播后执行 a 。

```
void* Work::job(void* id)
{
    int idx = (long)id;

    while(1)
    {
        pthread_mutex_lock(&job_lock);

        while(!jobs_complete)
        {
            // wait for main to broadcast
            pthread_cond_wait(&can_work, &job_lock);
            pthread_mutex_unlock(&job_lock);

            // work here

            pthread_mutex_lock(&job_lock);
            ++jobs_completed;

            if(jobs_completed == NUM_THREADS)
            {
                jobs_complete = true;
                pthread_cond_signal(&jobs_done);
                pthread_mutex_unlock(&job_lock);
            }
            pthread_mutex_unlock(&job_lock);
        }

        pthread_mutex_unlock(&job_lock);
    }

    return NULL;
} 
```

**NUM_THREADS**是 4，**job_lock**是 a `pthread_mutex_t`，**can_work**和**jobs_done**是`pthread_cond_t`，**jobs_completed**是 a `bool`，**jobs_complete**是 an `int`。

```
// work

jobs_completed = false;
jobs_complete = 0;
pthread_mutex_lock(&job_lock);
pthread_cond_broadcast(&can_work);
pthread_cond_wait(&jobs_complete);
pthread_mutex_unlock(&job_lock);

// work that depends on jobs_complete 
```

现在，我现在通过调用`pthread_cond_broadcast()`然后`pthread_cond_wait()`在它之后立即执行此操作，但这似乎陷入僵局。

谁能解释我应该怎么做或者我哪里出错了？我会很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:36:17.323

我只是发布这个（这几乎是所有 C 代码，但 pthreads 也是如此，所以请稍微松懈一下）来演示一种方法来做我*认为*你想要完成的事情。显然，您希望将其中的大部分正确地封装在适当的类等中。希望这将向您展示条件变量、互斥锁以及它们与*谓词管理和通知*的关系如何工作。

希望对你有帮助。祝你有美好的一天。

```
#include <iostream>
#include <unistd.h>
#include <pthread.h>
using namespace std;

// our global condition variable and mutex
pthread_cond_t cv = PTHREAD_COND_INITIALIZER;
pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;

// our predicate values.
bool finished = false;
int jobs_waiting = 0;
int jobs_completed = 0;

// our thread proc
static void *worker_proc(void* p)
{
    intptr_t id = (intptr_t)p;  // our id
    size_t n_completed = 0;     // our job completion count

    // always latch prior to eval'ing predicate vars.
    pthread_mutex_lock(&mtx);
    while (!finished)
    {
        // wait for finish or work-waiting predicate
        while (!finished && jobs_waiting == 0)
            pthread_cond_wait(&cv, &mtx);

        // we own the mutex, so we're free to look at, modify
        //  etc. the values(s) that we're using for our predicate
        if (finished)
            break;

        // must be a job_waiting, reduce that number by one, then
        //  unlock the mutex and start our work. Note that we're
        //  changing the predicate (jobs_waiting is part of it) and
        //  we therefore need to let anyone that is monitoring know.
        --jobs_waiting;
        pthread_cond_broadcast(&cv);
        pthread_mutex_unlock(&mtx);

        // DO WORK HERE (this just runs a lame summation)
        for (int i=0,x=0;i<1048576; x += ++i);
        ++n_completed;

        // finished work latch mutex and setup changes
        pthread_mutex_lock(&mtx);
        ++jobs_completed;
        pthread_cond_broadcast(&cv);
    }

    // final report
    cout << id << ": jobs completed = " << n_completed << endl;

    // we always exit owning the mutex, so unlock it now. but
    //  let anyone else know they should be quitting as well.
    pthread_cond_broadcast(&cv);
    pthread_mutex_unlock(&mtx);
    return p;
}

// sets up a batch of work and waits for it to finish.
void run_batch(int num)
{
    pthread_mutex_lock(&mtx);
    jobs_waiting = num;
    jobs_completed = 0;
    pthread_cond_broadcast(&cv);

    // wait or all jobs to complete.
    while (jobs_completed != num)
        pthread_cond_wait(&cv, &mtx);

    // we own this coming out, so let it go.
    pthread_mutex_unlock(&mtx);
}

// main entry point.
int main()
{
    // number of threads in our crew
    static const size_t N = 7;
    pthread_t thrds[N] = {0};

    // startup thread crew.
    intptr_t id = 0;
    for (size_t i=0; i<N; ++i)
        pthread_create(thrds + i, NULL, worker_proc, (void*)(++id));

    // run through batches. each batch is one larger
    //  than the prior batch. this should result in some
    //  interesting job-counts per-thread.
    for (int i=0; i<64; ++i)
        run_batch(i);

    // flag for shutdown state.
    pthread_mutex_lock(&mtx);
    finished = true;
    pthread_cond_broadcast(&cv);
    pthread_mutex_unlock(&mtx);
    for (size_t i=0; i<N; pthread_join(thrds[i++], NULL));

    return 0;
} 
```

**样本输出 #1**

```
3: jobs completed = 256
6: jobs completed = 282
5: jobs completed = 292
2: jobs completed = 242
1: jobs completed = 339
4: jobs completed = 260
7: jobs completed = 409 
```

**样本输出 #2**

```
6: jobs completed = 882
1: jobs completed = 210
4: jobs completed = 179
5: jobs completed = 178
2: jobs completed = 187
7: jobs completed = 186
3: jobs completed = 194 
```

**样本输出#3**

```
1: jobs completed = 268
6: jobs completed = 559
3: jobs completed = 279
5: jobs completed = 270
2: jobs completed = 164
4: jobs completed = 317
7: jobs completed = 159 
```

* * *

**固定批量大小**

相同的代码，但改变了这一点：

```
for (int i=0; i<64; ++i)
    run_batch(i); 
```

对此：

```
for (int i=0; i<64; ++i)
    run_batch(N); 
```

给出以下内容，这可能更接近你真正想要的。

**样本输出 #1**

```
4: jobs completed = 65
2: jobs completed = 63
5: jobs completed = 66
3: jobs completed = 63
1: jobs completed = 64
7: jobs completed = 63
6: jobs completed = 64 
```

**样本输出 #2**

```
3: jobs completed = 65
5: jobs completed = 62
1: jobs completed = 67
7: jobs completed = 63
2: jobs completed = 65
6: jobs completed = 61
4: jobs completed = 65 
```

**样本输出#3**

```
2: jobs completed = 58
4: jobs completed = 61
5: jobs completed = 69
7: jobs completed = 68
3: jobs completed = 61
1: jobs completed = 64
6: jobs completed = 67 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:48:12.100

在函数结束时，您有 3 次可能的连续调用`pthread_mutex_unlock`，这将导致未定义的行为。你实际上不需要两个内部的。如果`jobs_complete`是`true`，线程将退出循环并释放锁，否则它将循环并需要它来等待`can_work`条件。

还有，还有

```
 pthread_cond_wait(&jobs_complete); 
```

你可能的意思是：

```
pthread_cond_wait(&jobs_complete,&job_lock); 
```

此外，该函数需要 a`pthread_cond_t *`和 a `pthread_mutex_t *`，而不是 a `int`，因此即使那样，该代码也显然被破坏了。

请注意，条件变量上的信号或广播只会对*已经*在等待变量的线程产生影响。该信号不会保留以供将来等待。因此，当线程在 while 块上循环`jobs_complete`并再次等待时，必须再次向它们发出信号以恢复工作。

另一件事：您提到`job_complete`as`int` 和`job_completed`as的类型`bool`，但您的代码似乎不同意：

```
 if(jobs_completed == NUM_THREADS)
        {
            jobs_complete = true; 
```

这是我的建议：学习信号量和屏障抽象模型，如果可以的话，使用现有的实现（`boost`或`std`在 C++11 中），或者使用`pthread`API 重新实现它们。与操作 cond 变量相比，这些将帮助您更轻松地处理这种情况。在这个网站上寻找现有的解决方案。例如[这个问题](https://stackoverflow.com/questions/15252292/extend-the-life-of-threads-with-synchronization-c11/15252935#15252935)处理一个非常相似的问题，我提供的解决方案可以很容易地修改为使用 pthread API 来满足您的要求。

# android - 带有片段的可扩展列表视图

> ID：15676033
> 
> 赞同：0
> 
> 时间：2013-03-28T07:01:43.933
> 
> 标签：android, android-fragments

在android中开发应用程序时遇到问题。经过大量搜索后，我没有找到解决方案。

一个有两个片段面板的应用程序。第一个，`Fragment`显示类别和子类别的列表，用户可以在其中选择一个类别或更具体地说是它的子类别。然后其适当的描述将显示在第二个片段上。

我正在使用可扩展`view`的类别列表。但是我在运行时遇到了错误。

> 系统服务在 onCreate() 之前对活动不可用

以下是我的应用程序中使用的 xml 和代码

**activity_main_base.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top"
    android:orientation="horizontal"
    tools:context=".MainBase" >
   <LinearLayout
       style="@style/FullscreenActionBarStyle"
        android:orientation="vertical"
       android:layout_width="match_parent"
       android:layout_height="50dp">

   </LinearLayout>
    <LinearLayout
        android:id="@+id/categoryfragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
   </LinearLayout> 
```

**MainBase.java**

```
package my.newapp.x;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

public class MainBase extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_base);
        Fragment f=new Jobcat();
        FragmentManager fm=getSupportFragmentManager();
        FragmentTransaction ft=fm.beginTransaction();
        ft.add(R.id.categoryfragment,f);
        ft.commit();

    }
} 
```

**catlayout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:scrollbars="vertical">

    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:childIndicatorRight="30dp"
        >        
    </ExpandableListView>

</LinearLayout> 
```

**作业猫.java**

```
package my.newapp.x;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Jobcat extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v=inflater.inflate(R.layout.catlayout,container,false);
        return v;

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        try{
         categoryfill j =new categoryfill();
         j.fillme();

        }
        catch(Exception e){
            System.out.println("Errrr +++ " + e.getMessage());
        }
    }

} 
```

**categoryfill.java**

```
package my.newapp.x;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.app.ExpandableListActivity;
import android.widget.ExpandableListView;
import android.widget.SimpleExpandableListAdapter;

public class Jobcategoryfill extends ExpandableListActivity {

    private SimpleExpandableListAdapter listadapter;
    ExpandableListView expand;

    public  void fillme()
    {
      List<Map<String,String>> category=new ArrayList<Map<String,String>>();
      List<List<Map<String, String>>> subcategory=new ArrayList<List<Map<String,String>>>();

      Map<String,String> cat1=new HashMap<String, String>();
      cat1.put("Parent","A");
      category.add(cat1);

      List<Map<String,String>> sublist1=new ArrayList<Map<String,String>>();

      Map<String,String> sub11=new HashMap<String, String>();
      sub11.put("child","a1");
      sublist1.add(sub11);
      Map<String,String> sub12=new HashMap<String, String>();
      sub12.put("child","a2");
      sublist1.add(sub12);
      Map<String,String> sub13=new HashMap<String, String>();
      sub13.put("child","a3");
      sublist1.add(sub13);
      Map<String,String> sub14=new HashMap<String, String>();
      sub14.put("child","a4");
      sublist1.add(sub14);
              sublist1.add(sub115);
              subcategory.add(sublist1);

      listadapter=new SimpleExpandableListAdapter(this, category, R.layout.categoryparent, new String[] { "Parent" },new int[]{R.id.parentview}, 
                    subcategory, R.layout.categorychild, new String[]{"child"},new int[]{R.id.childview});
      setListAdapter(listadapter);
    }

} 
```

我无法找到解决方案。请任何人帮助我解决这个问题或建议我另一种方法来实现这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:11:23.013

下面这行应该可以很好地解释这个问题。

`System service not available to activities before onCreate()`

您应该使用该方法`onCreate()`而不是`onCreateView()`.

# asp.net-mvc - ASP.Net MVC Razor - 显示国家/地区显示错误

> ID：15676039
> 
> 赞同：0
> 
> 时间：2013-03-28T07:01:55.093
> 
> 标签：asp.net-mvc

我正在尝试列出视图中的国家。我创建了一个名为 tbl_Countries 的模型，代码如下

```
public class tbl_Countries
{
    public int ID { get; set; }
    public string Country_Name { get; set; }
} 
```

我有一个名为 Home 的控制器，代码如下。我为 TestDB 数据库创建了一个 edmx 文件

```
public ActionResult Index()
{            
    TestDBEntities TestdbContext = new TestDBEntities();
    var countries = TestdbContext.tbl_Countries.ToList();
    return View(countries);
} 
```

下面是我的查看代码@model IList，显示使用 ul li 和 foreach 的国家/地区

如果我运行应用程序会收到此错误：

```
The model item passed into the dictionary is of type 'System.Collections.Generic.List1[TestMVC.tbl_Countries]', 
but this dictionary requires a model item of type 'System.Collections.Generic.IList1[TestMVC.Models.tbl_Countries] 
```

我只想显示视图中的国家列表，我想知道如果不创建模型类，是否可以绑定网格？是否必须`@model`在视图中使用指令指定模型名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:31:33.743

在模型中创建国家类型列表

```
 public List< tbl_Countries> country{get;set;} 
```

在索引页面中设置此列表的值

```
 public ActionResult Index()
    {            
     TestDBEntities TestdbContext = new TestDBEntities();
     tbl_Countries objModel=new tbl_Countries(); 
     objModel.country = TestdbContext.tbl_Countries.ToList();
     return View(objModel);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:10:15.063

您收到此错误，因为您在视图中指定了@model List，但将其传递给 List，尝试在视图中将其更改为 List

是的，您完全可以删除@model，但在这种情况下，您的视图不会是强类型的，因此您将无法使用智能感知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:47:31.103

根据错误消息，您期望`List<TestMVC.Models.tbl_Countries>`视图中类型的模型与`List<TestMVC.tbl_Countries>`您的操作方法返回的类型不同。

要解决此问题，您可以创建视图期望的列表并将您从实体框架获得的数据映射到它。

例如：

```
public ActionResult Index()
{            
 TestDBEntities TestdbContext = new TestDBEntities();
 var countries = new List<TestMVC.Models.tbl_Countries>();
 countries = (from country in TestdbContext.tbl_Countries
              select new TestMVC.Models.tbl_Countries
              { 
                  Country_Name = country.Country_Name
              }).toList();

 return View(countries);
} 
```

要分离视图和数据访问的逻辑，最好让模型独立于数据模型和示例中的 EF 模型。

# matlab - 轴/标题八度中的乳胶文本

> ID：15676044
> 
> 赞同：1
> 
> 时间：2013-03-28T07:02:11.827
> 
> 标签：matlab, latex, gnuplot, octave, matlab-figure

我正在尝试运行我现在在 Octave 中拥有的一些 Matlab 代码。（我知道 Octave 不支持**所有**Matlab 代码）特别是我正在尝试运行

```
xlabel('Frequency in $\pi$ units','Interpreter','LaTex') 
```

但是，我收到一条错误消息，告诉我 Octave 不支持 Latex 解释器。我在[网上](http://octave.1599824.n4.nabble.com/Re-LaTex-interpreter-td4395346.html)找到了一种解决方法，但它特定于 Windows，并且我正在运行 Linux Mint 14。我想知道是否有人知道 Linux 的解决方法，我想使用 gnuplot（或其他任何可以完成工作的方法！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T03:44:56.990

这个答案取决于您的八度音阶版本。像你一样设置标签：

```
xlabel('Whatever')
ylabel('Whenever') 
```

然后将您的答案打印到乳胶文件中：

```
print -dpslatex 'filename' 
```

它并不完美，字体大小无法更改，但它是一种解决方案。

# javascript - 剑道编辑器以编程方式添加/删除所需的字体集

> ID：15676056
> 
> 赞同：3
> 
> 时间：2013-03-28T07:02:50.060
> 
> 标签：javascript, jquery, html, jsp, kendo-ui

Kendo 编辑器的字体选择组合框默认将所有字体显示为（继承的字体）。我想手动添加自己喜欢的字体集。

根据 API 文档，似乎没有这样的方式来做我需要的事情。我猜也许我需要编辑 css 或操作从浏览器继承的字体，但我找不到任何相关信息。

[http://docs.kendoui.c​​om/api/web/editor](http://docs.kendoui.com/api/web/editor)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T18:46:32.710

如果 JavaScript 版本的 KendoUI 没问题，您可以使用[`tools.items`](http://docs.kendoui.com/api/web/editor#configuration-tools.items).

初始化编辑器类似于：

```
$("#editor").kendoEditor({
    tools: [
        // Other tools that you want to use
        {
            name : "fontName",
            items: [
                { text: "Courier", value: "Courier" },
                { text: "Times New Roman", value: "Times New Roman" },
                { text: "Trebuchet MS", value: "Trebuchet MS" }
            ]
        },
        // More tools
    ]
}); 
```

唯一的问题是您需要定义所有工具，它不是增量的。

这里有一个 JSFiddle 示例[http://jsfiddle.net/OnaBai/kZegN/](http://jsfiddle.net/OnaBai/kZegN/)

# asp.net - 如何实现让我登录asp.net

> ID：15676057
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:02:54.043
> 
> 标签：asp.net

如何使用asp.net中的登录控制和成员资格来实现让我保持登录asp.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:08:19.473

通过添加一个复选框..

如果它被选中，你必须创建一个带有身份验证的cookie，如果它没有被选中，你必须把它放在会话中

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx)

另一种方法是实现一个不持久的 cookie，如果它像这样未选中：

```
int timeout = rememberMe ? 525600 : 30; // Timeout in minutes, 525600 = 365 days.
var ticket = new FormsAuthenticationTicket(userName, rememberMe, timeout);
string encrypted = FormsAuthentication.Encrypt(ticket);
var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encrypted);
cookie.Expires = System.DateTime.Now.AddMinutes(timeout);
cookie.HttpOnly = true; // cookie not available in javascript.
Response.Cookies.Add(cookie); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:34:49.447

首先，您需要在登录按钮上创建 Cookie，单击如下并将登录详细信息存储在其中

```
protected void btnLogin_Click(object sender, System.EventArgs e)
{
    string username = txtUsername.Text;
    string Password = txtPassword.Text;

    // Create Cookie and Store the Login Detail in it if check box is checked
    if ((CheckBox1.Checked == true)) {
        HttpCookie mycookie = new HttpCookie("LoginDetail");
        mycookie.Values("Username") = txtUsername.Text.Trim();
        mycookie.Values("Password") = txtPassword.Text.Trim();
        mycookie.Expires = System.DateTime.Now.AddDays(1);

        Response.Cookies.Add(mycookie);
    }    
    Response.Redirect("Default2.aspx");
} 
```

然后检查cookie是否存在（记住我检查过），如果是，请填写以下详细信息-

```
protected void Page_Load(object sender, System.EventArgs e)
{
    //check if cookie exist then login page from 
    if ((Response.Cookies("LoginDetail") != null)) {    
        //Username 
        string uname =                     Response.Cookies("LoginDetail").Values("Username").ToString();
        string pass = Response.Cookies("LoginDetail").Values("Username").ToString();

    Response.Redirect("Default2.aspx");
    }

} 
```

# c# - 如何通过命令行执行命令并等待它完成

> ID：15676058
> 
> 赞同：31
> 
> 时间：2013-03-28T07:02:54.363
> 
> 标签：c#

我正在尝试通过命令行执行一个命令，然后执行另一个命令（不在 cmd 中），这取决于前一个命令的结果。问题是第一个命令大约需要 2 分钟才能结束，而第二个命令不会“等待”第一个命令结束。我怎样才能保持第二个命令等到第一个结束？

提前致谢！

```
public void runCmd(){
  String command = @"/k java -jar myJava.jar";
  ProcessStartInfo cmdsi = new ProcessStartInfo("cmd.exe");
  cmdsi.Arguments = command;
  Process cmd = Process.Start(cmdsi);
}
.
.
.
runCmd();           //first command, takes 2 minutes to finish
MessageBox.Show("This Should popup only when runCmd() finishes"); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-28T07:04:59.350

使用[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)方法：

```
 public void runCmd()
 {
    String command = @"/k java -jar myJava.jar";
    ProcessStartInfo cmdsi = new ProcessStartInfo("cmd.exe");
    cmdsi.Arguments = command;
    Process cmd = Process.Start(cmdsi);
    cmd.WaitForExit();    
 }
.
.
.
 runCmd();        
 MessageBox.Show("This Should popup only when runCmd() finishes"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T07:06:16.800

您可以使用 WaitForExit()。

***注意***：

1.  `WaitForExit(int milliseconds)`等待指定的毫秒数以使关联的进程退出。
2.  `WaitForExit()`无限期地等待相关进程退出。

> ```
> public void runCmd()
> {
>   String command = @"/k java -jar myJava.jar";
>   ProcessStartInfo cmdsi = new ProcessStartInfo("cmd.exe");
>   cmdsi.Arguments = command;
>   Process cmd = Process.Start(cmdsi);
>   cmd.WaitForExit(); //wait indefinitely for the associated process to exit.
> }
> .
> .
> .
> runCmd();           //first command, takes 2 minutes to finish
> MessageBox.Show("This Should popup only when runCmd() finishes"); 
> ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-25T10:31:11.833

更短：

```
Process.Start("cmd.exe", @"/k java -jar myJava.jar").WaitForExit(); 
```

这是有效的，因为静态方法`Process.Start`返回一个`Process`对象。然后您可以直接在其上调用该`WaitForExit`方法，甚至无需将其存储在局部变量中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T07:08:35.697

您可以使用[`Process.WaitForExit()`](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)方法；

> 指示 Process 组件无限期地等待关联的进程退出。

```
// Start the process with the info you specified.
// Call WaitForExit and then the using statement will close.
using(Process cmd = Process.Start(cmdsi))
{
      cmd.WaitForExit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:59:02.407

`WaitForExit();`正如其他人所说，最好使用该过程。

指定命令退出的时间（以毫秒为单位）或按照建议无限期退出。

# android - 什么时候应该使用“spring for android”？

> ID：15676060
> 
> 赞同：1
> 
> 时间：2013-03-28T07:02:57.183
> 
> 标签：android, spring, mvvm, android-framework

我遇到了[spring for android](http://www.springsource.org/spring-android)，它声称提供`Spring Framework`旨在简化原生 Android 应用程序的开发。

如果有人已经使用或探索过这个框架，请分享你对这可能比标准 android 框架（有点像*MVVM*）有益的场景或情况的想法。

总而言之，我正在寻找这个框架提供的额外好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:51:30.783

我调查了android的spring，我的分析是：

它不提供控制反转。提供 RestTemplate、Social Integration for Android 等流行的 spring 工具。Spring 也提供了解析框架，被认为不如 jackson 高效。更多尚未添加，请保持手指交叉。

这意味着每当您想要一个现成的 RESTor Social Integration (fb/twitter) 解决方案以及具有正常功能的解析器时，spring for android 可能是您的正确选择。

如果有人会发布更准确的答案，我一定会接受。

# c# - UI 在读取端口时挂起

> ID：15676062
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:03:01.287
> 
> 标签：c#, sockets

我正在使用以下代码从以太网​​端口读取数据：

```
System.Net.Sockets.TcpClient clientSocket = new System.Net.Sockets.TcpClient();

class ClsReadPort
    {

    public void Connect()
        {
            try
            {
                clientSocket = new System.Net.Sockets.TcpClient();
                if (!clientSocket.Connected)
                {
                    clientSocket.Connect("192.168.0.25", 1324);
                }
              }
            catch (Exception ex)
            {
               MsgBox(ex.Message)

            }
        }

        public string Capture()
        {
            try
            {
                if (clientSocket.Connected)
                {
                   NetworkStream serverStream = clientSocket.GetStream();
                        byte[] inStream = new byte[clientSocket.ReceiveBufferSize + 1];
                        serverStream.Read(inStream, 0, Convert.ToInt32(clientSocket.ReceiveBufferSize));
                        string returndata = System.Text.Encoding.ASCII.GetString(inStream);

                        oCapture = returndata;
                 }
              }

            }
            catch (Exception ex)
            {
             MsgBox(ex.Message)
            }
        }
} 
```

在我用于更新读数值的主程序中：

```
ClsReadPort objRead = new ClsReadPort();

private void timer1_Tick(object sender, EventArgs e)
{
txtReadValue.Value = objRead.Capture();
} 
```

它工作正常。但是，一旦以太网电缆断开连接，整个 UI 就会挂起。它停留在这条线上：

```
serverStream.Read(inStream, 0, Convert.ToInt32(clientSocket.ReceiveBufferSize)); 
```

如何在不影响 UI 的情况下将其作为并行任务执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:05:53.657

在 .net 4.5 中，您可以使用[async 方法](http://msdn.microsoft.com/de-de/library/hh194211.aspx)并等待它们 For Async 看看[这里](http://msdn.microsoft.com/de-de/library/vstudio/hh156513.aspx)

这也是一个没有等待表单 MSDN的[异步套接字示例](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:17:27.837

您可以使用 Dispatcher 在单独的线程中启动 Capture 任务

```
Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() =>
{  
    try
    {       
        txtReadValue.Value = objRead.Capture();   
    }
    catch { } 
} 
```

# c# - Monogame 模棱两可的 Vector2

> ID：15676064
> 
> 赞同：1
> 
> 时间：2013-03-28T07:03:03.010
> 
> 标签：c#, xna, monogame, farseer

我遇到了一个问题，我在 Monogame 和 XNA 库之间不断出现歧义错误。无论我做什么，我都无法编译它。我已经从我的计算机上删除了 XNA，但错误仍然存​​在。完整的错误是：

```
Error   4   Argument 1: cannot convert from 'Microsoft.Xna.Framework.Vector2 [c:\Program Files (x86)\MonoGame\v3.0\Assemblies\WindowsPhone\x86\MonoGame.Framework.dll]' to 'Microsoft.Xna.Framework.Vector2' 
```

在诸如以下的行上：

```
 EngineGlobal.world = new World(new Vector2(0,9.8f), false); 
```

有人对如何摆脱冲突有任何建议吗？我想继续在 monogame 而不是 XNA 上进行开发，因为代码将被移植到 Android、iPhone 等的 MonoGame 环境中。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T11:49:29.717

我的回复有点晚了，但是如果您查看 MonoGame 项目模板的作用，您会发现在 csproj 文件中定义了一个额外的构建目标。

在我的情况下添加这个：

```
<Target Name="MonoGame_RemoveXnaAssemblies" AfterTargets="ImplicitlyExpandTargetFramework">
<Message Text="MonoGame - Removing XNA Assembly references!" Importance="normal" />
<ItemGroup>
  <ReferencePath Remove="@(ReferencePath)" Condition="'%(Filename)%(Extension)'=='Microsoft.Xna.Framework.dll'" />
  <ReferencePath Remove="@(ReferencePath)" Condition="'%(Filename)%(Extension)'=='Microsoft.Xna.Framework.GamerServices.dll'" />
  <ReferencePath Remove="@(ReferencePath)" Condition="'%(Filename)%(Extension)'=='Microsoft.Xna.Framework.GamerServicesExtensions.dll'" />
  <ReferencePath Remove="@(ReferencePath)" Condition="'%(Filename)%(Extension)'=='Microsoft.Xna.Framework.Input.Touch.dll'" />
  <ReferencePath Remove="@(ReferencePath)" Condition="'%(Filename)%(Extension)'=='Microsoft.Xna.Framework.MediaLibraryExtensions.dll'" />
</ItemGroup> 
```

到带有模棱两可的引用的 csproj 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:49:19.120

这种错误几乎总是与引用有关。如果您绝对确定它没有引用 XNA，它可能引用了不同版本的 MonoGame。

尝试从所有项目中删除所有 MonoGame 和 XNA 引用并重新引用它们。这包括已经用 XNA 编译的项目。它们可能需要重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T00:07:40.733

据我所知，Farseer 可以在多个平台上运行。它通过条件编译（部分）实现了这一点。

我注意到在 Farseer 解决方案中重新定义了几个 XNA 类型，但使用了原始的 Microsoft XNA 命名空间。

这通常不是问题，因为这些定义在 XNA 桌面、Windows Phone 和 XBox 等平台上被排除在外。

然而，当 Farseer 与一个意想不到的平台一起使用时，这确实会成为一个问题：MonoGame。

为了解决这个问题，我只需下载源代码并删除带有 XNA 重新定义的文件。

## 或者

如果您正在使用源代码，您应该能够通过定义以下任何一个**条件编译符号**来防止这些定义被编译：

*   `XNA`
*   `WINDOWS_PHONE`
*   `XBOX`
*   `ANDROID`

这可以在项目属性的**Build**选项卡中完成。

或者更好的是，定义一个`MONOGAME`符号并将其添加到条件编译行：

`#if !XNA && !WINDOWS_PHONE && !XBOX && !ANDROID && !MONOGAME`

# silverlight - IIS 平滑流式处理 - Silverlight 视频 - 在末尾添加可点击链接

> ID：15676066
> 
> 赞同：0
> 
> 时间：2013-03-28T07:03:08.950
> 
> 标签：silverlight, iis, expression-blend

我使用 IIS Smooth Streaming Transform Manager 对一些视频进行了编码。我发现[Silverlight 媒体框架](http://smf.codeplex.com/documentation)允许我添加其他`<PlayListItem>`条目以在播放列表中将多个视频串在一起，但是在视频末尾我想显示一个可点击的链接 - 这可能吗？

基本上，我想在用户观看视频后让他们参加调查。

# sql - 停车费的计算

> ID：15676071
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:03:38.900
> 
> 标签：sql, sql-server, sql-server-2008

餐桌时间：

```
ID  Time in    Time out  Vehicle Type
1   10:30      11:20     bike
2   10:40      12:30     car 
```

表收费：

```
Id  Vehicle Type  Rate
1   bike          50
2   Car           100 
```

帮助我编写一个查询，通过应用与车辆类型相关的费率，在两个单独的列中返回总持续时间和成本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:48:20.583

给你一个**[SQL FIDDLE 示例](http://sqlfiddle.com/#!3/fa9b0/3)**。

你也可以用同样的方式提问。我认为这可以帮助您收取更多费用，因为多出 1 分钟将被视为多出一小时.....

```
 select A.id, 
       Time_in, 
       Time_out,
       A.Vehicle_type,
       CEILING(DATEDIFF(Minute, Time_in, Time_out)/60.0) as Park_Duration_Hours,
       B.Rate * CEILING(DATEDIFF(Minute, Time_in, Time_out)/60.0) as TotalCharge
from TableTime A
left join TableCharges B
on A.Vehicle_Type = B.Vehicle_Type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:35:16.613

对于持续时间，您可以先转换为`[Time in]`然后减去`[Time out]``DateTime`

`DATEDIFF(hour, cast('2013-01-01 ' + t1.[Time in] as datetime), cast('2013-01-01 ' + t1.[Time out] as datetime) )`

最终查询是：

```
SELECT 
  t1.id, t1.[Time in], t1.[Time out], t1.[Vehicle Type]
, cast('2013-01-01 ' + t1.[Time IN]  as  datetime) as tin
, cast('2013-01-01 ' + t1.[Time out]  as  datetime) as tout
, DATEDIFF(hour,  cast('2013-01-01 ' + t1.[Time in] as datetime), cast('2013-01-01 ' + t1.[Time out] as datetime) ) 
as Duration
, (DATEDIFF(hour,  cast('2013-01-01 ' + t1.[Time in] as datetime), cast('2013-01-01 ' + t1.[Time out] as datetime) ) ) * 
( select rate from t2 where t2.[Vehicle Type] = t1.[Vehicle Type] )
as Charge 

FROM t1 
```

这是 **[SQL 小提琴](http://www.sqlfiddle.com/#!6/8adba/10)**

# events - AngularJS Broadcast 在第一次控制器加载时不起作用

> ID：15676072
> 
> 赞同：4
> 
> 时间：2013-03-28T07:03:50.093
> 
> 标签：events, angularjs, broadcast, publish-subscribe

在这个 PlunkerDemo 中，我试图将事件从父控制器广播到子控制器。但是，直接在父控制器中执行它是行不通的。处理程序不注册事件。但是，基于 ng-click 或基于 setTimeout 执行此操作，它可以工作。是因为范围生命周期吗？

[http://beta.plnkr.co/edit/ZU0XNK?p=preview](http://beta.plnkr.co/edit/ZU0XNK?p=preview)

请参阅已接受答案的评论。他们解释了我的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T07:08:24.870

对角度范围的任何更改都必须在角度框架内进行，如果必须在框架外进行任何更改，我们必须使用[.$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)函数。

> $apply() 用于从 Angular 框架外部执行 Angular 表达式。

在您的情况下，您正在触发[$broadcast](http://docs.angularjs.org/api/ng.$rootScope.Scope#$broadcast) within `setTimeout`，其中回调在角度框架之外被调用。

所以你有两种解决方案，要么使用 angular 提供的[$timeout](http://docs.angularjs.org/api/ng.$timeout)服务，要么使用[.$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)函数。

我更喜欢使用该`$timeout`功能。

```
var ParentCtrl = function($scope, $rootScope, $timeout){

    $scope.broadcast = function(){
        $rootScope.$broadcast('Sup', 'Here is a parameter');
    };

    $timeout(function(){
        $scope.$broadcast('Sup');
    }, 1000);

    //this one does not work! Most likely due to scope life cycle
    $scope.$broadcast('Sup');

    $scope.$on('SupAgain', function(){
        console.log('SupAgain got handled!');
    });

}; 
```

演示：[小提琴](http://beta.plnkr.co/edit/NBcoTk?p=preview)

使用`$apply`

```
setTimeout(function(){
    $scope.$apply(function(){
        $scope.$broadcast('Sup');
    });
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T01:01:04.353

更可靠的选择是在子控制器中使用 $interval。因此，不会有明显的超时，而是每隔一个小间隔进行轮询。此外，不要使用广播，而是使用带有标志的服务。每次投票都会检查是否设置了标志。当父控制器设置标志时，计时器将在下一次轮询期间停止。这可以表明事件发生了。父控制器也可以通过服务与子控制器共享数据。

# php - 将隐藏变量从一页发送到另一页

> ID：15676077
> 
> 赞同：-2
> 
> 时间：2013-03-28T07:04:12.970
> 
> 标签：php, html

我的主页上有一个登录脚本，我的登录表单也在我的主页上。当用户向登录提交表单时，他/她提交他/她的用户名和密码。

脚本访问的数据库存储了用户注册时的用户名、密码和电子邮件地址。

一旦用户成功登录，他/她将被重定向到一个页面，该页面加载他们以前在页面上的“评论”，这些评论存储在同一数据库的不同表中。

我需要将电子邮件从一个表发送到重定向页面上的查询。

这是我处理登录的 PHP 代码的代码：

```
<?php

//If the user has submitted the form
if(isset($_REQUEST['username'])){
    //protect the posted value then store them to variables
    $username = protect($_POST['username']);
    $password = protect($_POST['password']);

    //Check if the username or password boxes were not filled in
    if(!$username || !$password){
        //if not display an error message
        echo "<center>You need to fill in a <b>Username</b> and a <b>Password</b>!</center>";
    }else{
        //if they were continue checking

        //select all rows from the table where the username matches the one entered by the user
        $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."'");
        $num = mysql_num_rows($res);

        //check if there was no match
        if($num == 0){
            //if none, display an error message
            echo "<center>The <b>Username</b> you supplied does not exist!</center>";
        }else{
            //if there was a match continue checking

            //select all rows where the username and password match the ones submitted by the user
            $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."' AND `password` = '".$password."'");
            $num = mysql_num_rows($res);

            //check if there was no match
            if($num == 0){
                //if none display error message
                echo "<center>The <b>Password</b> you supplied does not match the one for that username!</center>";
            }else{
                //if there was continue checking

                //split all fields from the correct row into an associative array
                $row = mysql_fetch_assoc($res);

                //check to see if the user has not activated their account yet
                if($row['active'] != 1){
                    //if not display error message
                    echo "<center>You have not yet <b>Activated</b> your account!</center>";
                }else{
                    //if they have log them in

                    //set the login session storing there id - we use this to see if they are logged in or not
                    $_SESSION['uid'] = $row['id'];

                    //update the online field to 50 seconds into the future
                    $time = date('U')+50;
                    mysql_query("UPDATE `users` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");

                    //redirect them to the usersonline page
                    echo 'REDIRECT';

                }
            }
        }
    }

    exit;
}

?> 
```

这是重定向到页面上的 PHP 代码：

```
<?php
  $con=mysqli_connect("","","","");
  // Check connection
  if (mysqli_connect_errno())
  {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
  $result = mysqli_query($con,"SELECT * FROM comments
    WHERE email='$_POST[email]' ORDER BY dt");

  while($row = mysqli_fetch_array($result))
  {
    echo $row['dt'] ." " . $row['email'] . " " . $row['body'];
    echo "<br>";
    echo "<br>";
  }
?> 
```

我需要在第一个代码中添加一些内容，以便从用于验证登录信息的表中提取电子邮件地址，并将其发送到第二个代码以接收“评论”。我试过用谷歌搜索答案，但一无所获。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:14:22.240

由于您在代码中使用了该`$_SESSION`数组（可能是从某处复制的），因此您可以类似地将电子邮件地址存储在同一个数组中。

```
$_SESSION['email'] = $row['email']; 
```

* * *

在后面的页面中，您需要替换`$_POST['email']`为`$_SESSION['email']`.

# objective-c - 视图控制器中缺少方法声明

> ID：15676082
> 
> 赞同：0
> 
> 时间：2013-03-28T07:04:38.557
> 
> 标签：objective-c, uiviewcontroller

我已将其输入到我的 .m 文件中 -`StudentLoginViewController`并且编译器不断给我错误：

> “NOSbject”没有可见的@interface 声明选择器“viewDidLoad”

这是我的代码：

```
// StudentLoginViewController.h

#import <UIKit/UIKit.h>

@interface StudentLoginViewController : NSObject  <UITextFieldDelegate> {
    IBOutlet UILabel *Username ,*Password ;
    IBOutlet UIButton *LoginButton ;
    IBOutlet UITextField *UsernameText ,*PasswordText;
}

@end

// StudentLoginViewController.m

#import "StudentLoginViewController.h"

@interface StudentLoginViewController ()

@end

@implementation StudentLoginViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UsernameText.delegate=self;
    PasswordText.delegate=self;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    // this text will not be updated to the newest text yet,
    // but we know what what the user just did to get into a string

    NSString *Username, *Password;
    if (textField == UsernameText) {
        Username = @"jzarate";
        Password = PasswordText.text; 
    } else {
        Username= UsernameText.text;
        Password = @"14054";
    }

    // If both the username and password are correct  then enable the button
    LoginButton.enabled = ([Username isEqualToString:@"jzarate"] && [Password isEqualToString:@"14054"]);

    // return YES so that the users edits  are used
    return YES;
}

@end 
```

请注意，.m 文件上面的代码是其中的所有代码，我已经删除了上面和下面的其他位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:12:39.427

这是因为当您将继承自而不是 NSObject`viewDidLoad`时会调用它。NSObject 本身就是一个超类，所以它没有任何父类，父类声明 viewDidLoad。因此，您在以下位置遇到错误：`StudentLoginViewController``UIViewController`

`[super viewDidLoad];`

写：

`@interface StudentLoginViewController : UIViewController <UITextFieldDelegate>`

代替

`@interface StudentLoginViewController : NSObject <UITextFieldDelegate>`

# ruby - Ruby 停止并移动到 for 循环的下一次迭代

> ID：15676088
> 
> 赞同：1
> 
> 时间：2013-03-28T07:05:01.323
> 
> 标签：ruby, loops, for-loop, escaping, iteration

我有一个内部带有 if elsif 语句的 for 循环。在第一个 if 中，如果满足条件，我希望它停在那里并继续循环的下一次迭代。

这是我正在尝试做的一个非常简化的版本：

```
array = [1,2,3,4,"x"]
for i in 0..(array.count -1)
    if array[i] == "x"
        #start next for loop iteration without executing the elsif
    elsif array[i] < 3
        puts "YAY!"
    end
end 
```

我真正想做的是遍历一个数组，其中除了一个元素之外的所有元素都是整数，但其中一个是字符串。在字符串元素上，我需要循环（无论哪种最好）来跳过其余代码并进入循环的下一次迭代。这很重要，因为第二个 if 语句使用 'array_element < 11 条件'，所以如果它在字符串元素上运行，我会得到“字符串与 11 的比较失败”

所以我想要 arr[x][3] 这是我尝试过的，但它给了我 8 8 8 8 而不是单个 8。

```
arr = [[1,2,3,"4"], [5,6,7,8], [9,10,11,12]] 

    arr.each{|x| 
    x.each {|i| 
        next if x[3].instance_of? String 
        if x[3] < 12 puts x[3] 
        end 
} 
} 
```

好的，这行得通！谢谢iAmRubuuu！！

```
arr = [1,2,3,"4"], [5,6,7,8], [9,10,11,12], [13,14,15,"16"], [17,18,19,20]]

arr.each_with_index{|x, i| 

    next if x.last.instance_of? String

    if x.last < 21
    puts x.last
    end
} 
```

给我输出

```
8
12
20 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:07:42.307

不使用`for in`，使用`each`。

```
(0..10).each do |i|
  next if i == 5

  if i == 10
    puts "YAY!"
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:30:53.263

根据您的编辑，希望您正在寻找以下内容：

```
arr = [1, 2, 3, "11", 11]
arr.each do |x|
  next if x.instance_of? String
  puts "#{x} is #{x.class}"
end 
```

*输出：*

```
1 is Fixnum
2 is Fixnum
3 is Fixnum
11 is Fixnum 
```

**编辑**

代码：

```
arr = [[1,2,3,"4"], [4,5,6,7], [8,9,10,11]] 

arr.each{|x|
x.each{ |i|
next if i.instance_of? String
puts "#{i} is #{i.class}"
}
} 
```

*输出：*

```
1 is Fixnum
2 is Fixnum
3 is Fixnum
4 is Fixnum
5 is Fixnum
6 is Fixnum
7 is Fixnum
8 is Fixnum
9 is Fixnum
10 is Fixnum
11 is Fixnum 
```

**V_1（来自您在我的回答帖子中的第一条评论）**

```
arr = [[1,2,3,"4"], [4,5,6,7], [8,9,10,11]] 
puts arr[1].last,arr.last.last 
```

*输出：*

```
7
11 
```

**V_2（来自您在我的回答帖子中的第一条评论）**

```
arr = [[1,2,3,"4"], [4,5,6,7], [8,9,10,11]] 
arr.each_with_index{ |x,i|
next if i == 0
#p x,i
p "last element of inner array:#{x.last}"
} 
```

*输出：*

```
"last element of inner array:7"
"last element of inner array:11" 
```

# java - 项目构建路径中的 Httpclient-4.2 和 commons httpclient

> ID：15676089
> 
> 赞同：0
> 
> 时间：2013-03-28T07:05:01.373
> 
> 标签：java, apache-httpclient-4.x, apache-commons-httpclient

我不能在我的项目构建路径中拥有`commons-httpclient.jar`和`httpclient-4.2.3 jar`作为引用的库吗？

ant-build 失败并显示消息

```
[javac]  Note: Some input files use unchecked or unsafe operations.
[javac]  Note: Recompile with -Xlint:unchecked for details. 
```

我尝试在 ant 中将 -Xlint:unchecked 选项传递给 javac，现在我在项目中所有未经检查的强制转换都被作为错误和警告抛出。有没有办法通过拥有两个 jar 来成功构建我的项目？

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:27:40.773

到目前为止，我发现的唯一方法是从 httpclient 3.1 迁移到 httpclient 4.2。迁移后，我迁移的文件适用于 4.2 版 jar。

[http://blog.teamextension.com/migrating-from-httpclient-3-1-to-4-0-34](http://blog.teamextension.com/migrating-from-httpclient-3-1-to-4-0-34) 这个链接对我帮助很大

# mfc - MFC CSrollView 缩放

> ID：15676095
> 
> 赞同：1
> 
> 时间：2013-03-28T07:05:29.217
> 
> 标签：mfc

我有一个从 CScrollView 派生的 CViewIamge 类。在 CDialog 派生对话框的图片控件上显示图像。如何添加放大功能？目前在 OnDraw 中使用 SetDIBitsToDevice。

# ios - 需要在 ios 应用程序中打开 Facebook 页面而不是在 Safari 中

> ID：15676097
> 
> 赞同：0
> 
> 时间：2013-03-28T07:05:37.373
> 
> 标签：ios, facebook

这是我的代码：

```
NSURL *fanPageURL = [NSURL URLWithString:@"fb://profile/210227459693"];
    [[UIApplication sharedApplication] openURL: fanPageURL]; 
```

我希望这个 URL 在我的 iOS 应用程序中的任何 UIview 控制器中打开，但它在 Safari 中打开。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:09:22.903

在您的 UIViewController 中创建一个 UIWebView 并加载`NSURL *fanPageURL = [NSURL URLWithString:@"fb://profile/210227459693"];`到您的 UIWebView 中。您可以使用`UIWebView`Delegate 方法来处理更多功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:40:36.917

使用以下代码

```
[webView loadRequest:[NSURLRequest requestWithURL:fanPageURL]]; 
```

这里 webView 是您在项目中使用的 Webview 名称。

# r - 如何将不同的 R 输出附加到一个 Excel 电子表格中

> ID：15676104
> 
> 赞同：1
> 
> 时间：2013-03-28T07:06:15.517
> 
> 标签：r, excel, append

因此，每当我想为不同的数据集分别运行我的代码时......我希望我的代码输出保存在同一个 Excel 电子表格中，但保存在不同的工作表中......所以如果我为 20 个不同的数据集运行我的代码...... .我希望所有输出都保存在同一个 excel 电子表格但不同的工作表中......所以我将在一个 excel 电子表格中有 20 个工作表...... r 中有一个特殊功能可以让我这样做吗？.. ...所以可以说我现有的电子表格称为“Values.csv”....我如何将其余的输出附加到同一个电子表格中。

我通常只使用`write.csv(data,'Values.csv')`等......但我不确定如何将我的输出附加到同一个工作表......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:23:06.183

您可以使用库`XLConnect`来执行此操作。

```
library(XLConnect)

#some sample data
your.data=data.frame(a=1:10,b=21:30)

#Create .xls file
wb <- loadWorkbook("newfile.xls", create = TRUE)

#Create Sheet in file
createSheet(wb,name="name_one")

#write data
writeWorksheet(wb,your.data,sheet="name_one")

#save .xls file
saveWorkbook(wb) 
```

# android - 应用程序已成功安装但未在模拟器上启动

> ID：15676108
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:06:25.950
> 
> 标签：android

我在这里放置控制台详细信息，我需要更改任何模拟器设置或需要在清单文件中添加任何语句。帮助我，谢谢

```
 [2013-03-28 11:08:29 - Lisnx] Android Launch!
    [2013-03-28 11:08:29 - Lisnx] adb is running normally.
    [2013-03-28 11:08:29 - Lisnx] Performing com.lisnx.activity.SplashActivity activity launch
    [2013-03-28 11:08:34 - Lisnx] Launching a new emulator with Virtual Device 'AVD_4.0'
    [2013-03-28 11:08:45 - Lisnx] New emulator found: emulator-5554
    [2013-03-28 11:08:45 - Lisnx] Waiting for HOME ('android.process.acore') to be launched...
    [2013-03-28 11:10:49 - Lisnx] HOME is up on device 'emulator-5554'
    [2013-03-28 11:10:49 - Lisnx] Uploading Lisnx.apk onto device 'emulator-5554'
    [2013-03-28 11:11:00 - Lisnx] Installing Lisnx.apk...
    [2013-03-28 11:12:43 - Lisnx] Success!
    [2013-03-28 11:12:43 - facebook_y] Could not find facebook_y.apk!
    [2013-03-28 11:12:43 - Lisnx] Starting activity com.lisnx.activity.SplashActivity on device emulator-5554 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:10:49.883

看起来您需要在应用程序运行之前将 facebook sdk 安装到模拟器中。

尝试这个：

```
adb install %HOMEPATH%\facebook-android-sdk-3.0.1\bin\FBAndroid-2.1.apk 
```

摘自[此处](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/) 第 #2 节

# javascript - 是否可以使用任何方法执行 javascript 代码？

> ID：15676109
> 
> 赞同：-2
> 
> 时间：2013-03-28T07:06:26.450
> 
> 标签：javascript, jquery

我在运行时将 JavaScript 代码初始化为字符串变量。如何执行存储的 JavaScript 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:08:58.077

您可以使用`eval`

```
var code = "alert('sdfdf');";
eval(code); // this will execute the code inside the string 
```

## 注意：使用 eval 是个坏主意。

# ruby - 红宝石机器人控制

> ID：15676113
> 
> 赞同：4
> 
> 时间：2013-03-28T07:07:00.417
> 
> 标签：ruby, robotics, robot

一个人如何使用 Ruby 来控制机器人或其他机器人设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:39:50.523

我认为[Arduino](http://www.arduino.cc/)在创建可以由计算机控制的电子设备方面变得越来越流行。看来您可以使用名为`serialport`( [http://playground.arduino.cc/interfacing/ruby](http://playground.arduino.cc/interfacing/ruby) ) 的 gem 在 Ruby 中控制它。

# properties - AS3，简单：从其时间线内更改影片剪辑属性

> ID：15676115
> 
> 赞同：0
> 
> 时间：2013-03-28T07:07:13.140
> 
> 标签：properties, parent, movieclip

另一个菜鸟问题。

我在 Main Timelime 上有电影剪辑 spaceship_mc。
它的实例名称是 spaceship1_mc（手动从库中添加）。
在库中，此符号有 2 层：对象层和​​动作层。

我在动作层里面放了这么简单的代码：

```
var spaceship1_mc:MovieClip = new MovieClip;
spaceship1_mc.blendMode = BlendMode.SCREEN;
spaceship1_mc.scaleX = 2;
spaceship1_mc.scaleY= 2; 
```

我想，在运行时，这段代码必须自动运行，并且所有这些参数都将在一开始就设置好。

然而，什么都没有改变。好像这段代码不起作用。

**问题1**：请告诉我有什么问题吗？
也许我应该使用一些更复杂的点语法？

**问题2 ：***主时间线*的名称是什么？
我尝试在上面的代码中使用*stage*、*root*、*MainTimeLine*，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:32:38.040

使用谷歌我找到了一个决定。
也许，这有点多余并且（..嘿... WTF？这是天际线上的直升机，伙计们！...酷...）...好吧。

这里是：

```
var ship1:MovieClip = parent.getChildByName("spaceship1_mc") as MovieClip;
ship1.blendMode = BlendMode.SCREEN;
ship1.scaleX = 2;
ship1.scaleY= 2; 
```

嗯...我想这有点太间接了。
所以我们必须读取某个实例的名称并将其确定为变量。我想一定有一些更简洁的方式。

# sql - 如何选择它们的状态只是在一个集合中的记录？

> ID：15676119
> 
> 赞同：3
> 
> 时间：2013-03-28T07:07:25.483
> 
> 标签：sql, sql-server, select

假设我有下表 `Person table`和`personStatus table`.

```
declare @Persons table
(PersonId int)

insert into @Persons select 10   
insert into @Persons select 11    
insert into @Persons select 12   
insert into @Persons select 13  
insert into @Persons select 14    

declare @PersonStatus table
(id int,statuss int)
insert into @PersonStatus (id,statuss) values(14,4)
insert into @PersonStatus (id,statuss) values(10,0)
insert into @PersonStatus (id,statuss) values(10,0)
insert into @PersonStatus (id,statuss) values(11,1)
insert into @PersonStatus (id,statuss) values(10,1)
insert into @PersonStatus (id,statuss) values(11,2)
insert into @PersonStatus (id,statuss) values(12,0)
insert into @PersonStatus (id,statuss) values(12,1)
insert into @PersonStatus (id,statuss) values(12,2)
insert into @PersonStatus (id,statuss) values(13,1)
insert into @PersonStatus (id,statuss) values(13,3) 
```

现在我想找到他们的状态只是在这个集合 {0,1,2} 结果是---> 10,11,12

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:24:23.413

```
SELECT  ID
FROM    PersonStatus
GROUP   BY ID
HAVING  SUM(CASE WHEN statuss IN (0, 1, 2) THEN 1 ELSE 0 END) >= 1 AND
        SUM(CASE WHEN statuss NOT IN (0, 1, 2) THEN 1 ELSE 0 END) = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/2180ee/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:16:13.407

试试这个

```
SELECT DISTINCT ID
FROM @PersonStatus PT
WHERE NOT EXISTS (SELECT * FROM @PersonStatus WHERE statuss not in (0,1,2) AND id=PT.id) 
```

# jasper-reports - Jaspersoft iReport 我们可以在列表组件中进行小计吗？

> ID：15676120
> 
> 赞同：0
> 
> 时间：2013-03-28T07:07:26.130
> 
> 标签：jasper-reports, ireport

我只是想知道是否可以在列表组件中进行小计？如果是这样，是否就像使用变量并将重置类型设置为“组”并放置表达式一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:27:54.740

List 组件有很多限制（计算、返回值、页眉和页脚……）。请参阅 ireport-ultimate-guide 中的“13.1.3 列出组件问题”部分。

尝试使用子报表而不是列表。它更适合对数据子集进行计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T07:44:32.727

是的，有可能。

1.  首先在数据集中创建一个变量，然后打开变量属性，设置计算总和设置变量表达式要从列表组件中求和的字段（如`$F{paidAmount}`）并保存
2.  在主报表中创建一个变量打开报表 XML 源然后进入列表组件中的位置并像这样将数据集中的值分配给主变量

    ```
    <returnValue fromVariable="sumOfPayment"toVariable="mainSumOfPayment"/> 
    ```

例子 ：

```
<datasetRun subDataset="CreditorList" uuid="6aebc237-1aa2-47db-9435-8b133cef2b31">
 <dataSourceExpression><![CDATA[$F{invoices}]]></dataSourceExpression>
 <returnValue fromVariable="sumOfPayment" toVariable="mainSumOfPayment"/>               
</datasetRun> 
```

3.  然后将邮件变量拖到可能的位置，您可以在列表之外显示列表组件字段的总和。然后打开变量属性面板，并且必须设置评估时间 - 报告

# javascript - 带有滚动功能的 jQuery Mobile 列表视图描述

> ID：15676121
> 
> 赞同：2
> 
> 时间：2013-03-28T07:07:32.027
> 
> 标签：javascript, jquery, jquery-mobile, mobile

我有一个带有一些长标题的列表视图，它会自动隐藏在小屏幕显示上并用...固定发布

如果整个标题没有显示在屏幕上，我不确定是否可以使这些长标题的描述滚动。

[jsFiddle 上的示例](http://jsfiddle.net/yVtVE/16/)

```
<div data-role="page" id="MessagesPage">
    <div data-role="header">
        <a href="#HomePage" data-icon="home" data-direction="reverse">Home</a>      
        <h1 id="ScheduleDayText">Messages</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview" id="MessagesList" data-autodividers="false">
            <li date="2013-03-20"><a href="#">Event 1 With take every second Saturday of each month</a></li>
            <li date="2013-03-20"><a href="#">Event 2 With take every second Thrusday of each month</a></li>
            <li date="2013-03-19"><a href="#">Event 3</a></li>
       </ul>
    </div>
</div> 
```

我们可以让标题在鼠标悬停时向左或向右滚动，以便用户在点击链接或按钮之前可以阅读标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T09:41:57.360

这不是您想要的，但是当您将鼠标悬停在列表上时，它会显示全部内容

```
$("#MessagesList a").bind('hover',function(event){
 $("#MessagesList a").css('white-space', 'nowrap');
 $(this).css('white-space', 'normal');
 $("#MessagesList").listview("refresh");
}); 
```

这是一个现场小提琴[http://jsfiddle.net/mayooresan/w6wSC/](http://jsfiddle.net/mayooresan/w6wSC/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T10:11:22.533

**更新**

我想出了一个更好的主意，使用 CSS3 动画。`vmouseover`一个类`.marquee`将被添加到它`<a>`的文本并为其设置动画。动画完成后，一切都会恢复正常。

[演示在这里。](http://jsfiddle.net/Palestinian/Jfpnc/)

HTML

```
<div data-role="page" id="MessagesPage">
 <div data-role="header"> <a href="#HomePage" data-icon="home" data-  direction="reverse">Home</a> 
     <h1 id="ScheduleDayText">Messages</h1>

</div>
<div data-role="content">
    <ul data-role="listview" id="MessagesList" data-autodividers="false">
        <li date="2013-03-20"><a href="#">Lorem ipsum dolor sit amet.</a>

        </li>
        <li date="2013-03-20"><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam laoreet ullamcorper vehicula. Cras eros augue, mollis vitae aliquet auctor, porta.</a>

        </li>
        <li date="2013-03-19"><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum et.</a>

        </li>
    </ul>
 </div>
</div> 
```

CSS + 动画

```
.marquee {
 white-space: nowrap !important;
 overflow: visible !important;
 animation: right-left 5s ease;
 -moz-animation: right-left 5s ease;
 -webkit-animation: right-left 5s ease;
}

@-moz-keyframes right-left {
0% {
    -moz-transform:translateX(0);
}
50% {
    -moz-transform:translateX(-50%);
 }
 100% {
    -moz-transform:translateX(-200%);
 }
}
/** Webkit Keyframes **/
 @-webkit-keyframes right-left {
 0% {
    -webkit-transform:translateX(0);
 }
 50% {
    -webkit-transform:translateX(-50%);
 }
 100% {
    -webkit-transform:translateX(-200%);
 }
} 
```

JS

```
$("#MessagesList li").on('vmouseover', function (event) {
 var text = $(this).find('a').text();
 var textlength = $(this).find('a').text().length;
 var where = $(this).find('a');
 var root = $(this);
 if (textlength > 50) {
    where.addClass('marquee');
    where.css('text-overflow', '');
    //$("MessagesList").listview('refresh');
}
$("a").on('animationend animationend webkitAnimationEnd oanimationend MSAnimationEnd', function () {
    $(this).removeClass('marquee');
    //$("MessagesList").listview('refresh');
    $(this).css('text-overflow', 'ellipsis');
 });
}); 
```

* * *

**旧答案**

好吧，我找到了一种添加`<marquee>`到滚动的方法。但是，我没有在手机上测试它。我希望这对你有用。

```
$("#MessagesList a").on('vmouseover vmouseout', function (event) {
 var text = $(this).text();
 if (event.type == 'vmouseover') {
  $(this).html('<marquee behavior="slide" direction="left">' + text + '</marquee>');
 }
 if (event.type == 'vmouseout') {
  $(this).text(text);
  $(this).find('marquee').remove();
 }
}); 
```

# php - Ubuntu 12.10 上的 PHP MySQL 问题

> ID：15676127
> 
> 赞同：0
> 
> 时间：2013-03-28T07:07:53.563
> 
> 标签：php, mysql, ubuntu

我是 PHP 新手，MySQL 开发者。我正在尝试制作一个简单的 webapp，正在按照教程进行操作。这是它显示的用于获取有关“侦探”表的信息的 PHP 脚本。

```
<?php
$mysqli = new mysqli('localhost', 'root', 'root!', 'intrepid_detectives');
$result = $mysqli->query("SELECT * FROM detectives");

echo "<pre>";
print_r($result); 
```

但是当我在浏览器上打开这个页面时`localhost/index.php`，它给了我这个错误：

> 该网站在检索 时遇到错误`http://localhost/index.php`。它可能因维护而停机或配置不正确。

我问了一个人，他说问题出在`mysqli`，所以我在 SO 上进行了搜索，并关注 [了这个帖子](https://stackoverflow.com/questions/10769148/extension-mysqli-is-missing-phpmyadmin-doesnt-work)，但它仍然给出了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:13:41.210

要尝试的事情：

*   您可以在同一目录中打开一个简单的 html 文件，例如 index.html 吗？
*   您是否尝试在页面上显示错误`ini_set('display_errors', 1); error_reporting(E_ALL);`？或者 error.log 中有什么东西？
*   您是否有 .htaccess 或 vhost 配置可能会干扰您想要的内容？

检查这些肯定会为您指明正确的方向，我希望 :)

# android - 从 sdcard 获取音频文件时出错

> ID：15676130
> 
> 赞同：0
> 
> 时间：2013-03-28T07:08:12.327
> 
> 标签：android

我正在尝试从 SD 卡中获取音频文件。这是我正在使用的代码：

```
//the URI where I want the query to be performed
Uri externalAudio = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;

String projection[] = new String[] {"android.provider.MediaStore.Audio.Media.TITLE"};
Cursor curExternalAudio = cr.query(externalAudio, projection, null, null, null);
//code to display result 
```

错误在最后一行，但它是由投影数组引起的。logcat中显示的错误如下：

```
E/AndroidRuntime(1994): Caused by: android.database.sqlite.SQLiteException: near ".": syntax error (code 1): , while compiling: SELECT android.provider.MediaStore.Audio.Media.TITLE FROM audio 
```

谁能告诉我这段代码有什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:26:14.337

目前，您`android.provider.MediaStore.Audio.Media.TITLE`在投影数组中作为列名传递，这不是有效的列名。您将需要传递的值`android.provider.MediaStore.Audio.Media.TITLE`也是 ContentProvider 中的字符串列名。将您的投影数组更改为：

```
String projection[] = new String[] {android.provider.MediaStore.Audio.Media.TITLE};
Cursor curExternalAudio = cr.query(externalAudio, projection, null, null, null); 
```

**笔记：-**

[android.provider.MediaStore.Audio.Media.TITLE](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/provider/MediaStore.java#MediaStore.MediaColumns.0TITLE)的字符串值为“title”

# iphone - 如何在iphone编程上将位置从临时文件更改为高清

> ID：15676131
> 
> 赞同：0
> 
> 时间：2013-03-28T07:08:13.130
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller, iphone-video

我想在我的应用程序中拍摄高分辨率视频。到目前为止，当我调用该函数时`[uiimagepickerobject startVideoCapture]`

当录制达到 20 秒时，它会收到内存警告和应用程序崩溃。我想当我调用`startVideoCapture`它存储的方法时

> 文件：//localhost/private/var/mobile/Applications/CC223635-96EF-405F-8E1D-001359868A3C/tmp/capture-T0x1c56b020.tmp.2FQRmN/capturedvideo.MOV

它需要内存，因此应用程序崩溃。

是否有可能将临时文件更改为 hd.??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:17:48.117

由于您粘贴的文件路径是一个文件路径，它已经在 iPhone 的硬盘驱动器上（并且不太可能首先记录到内存中）。

尝试运行静态分析器（构建 -> 分析）和仪器（构建 -> 配置文件，泄漏工具）以查看应用程序的内存使用情况。

# jquery - 是否可以为 ajax 请求发送硬编码的 json 响应

> ID：15676140
> 
> 赞同：0
> 
> 时间：2013-03-28T07:08:43.807
> 
> 标签：jquery

对于 ajax 请求，我想发送 JSON 响应（硬编码在 .json 文件中）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:14:34.333

如果您的 JSON 文件位于

```
<webroot>/data/products.json 
```

您可以通过 AJAX 直接检索该文件：

```
$.getJSON('/data/products.json', function(_products) {
   // iterate thru products here
}); 
```

如果您的 JSON 文件不在 下，您可以使用服务器端脚本来读取文件并返回其内容。例如：在 PHP 下，这将是：

```
echo file_get_contents(<path-to-json-file>); 
```

# wcf - 如何在 innosetup 中使用静默安装程序下载和安装 .net framework 4.5？

> ID：15676142
> 
> 赞同：1
> 
> 时间：2013-03-28T07:08:51.610
> 
> 标签：wcf, inno-setup

我想检查最终用户 PC 中是否有 .net framework 4.5。如果没有，它应该从这个链接[http://www.microsoft.com/en-us/download/confirmation.aspx下载并安装 .net framework 4.5 ?id=30653](http://www.microsoft.com/en-us/download/confirmation.aspx?id=30653)，使用 innosetup 和静默安装程序...

实际上我点击了这个链接[http://www.vincenzo.net/isxkb/index.php?title=.NET__-_Detect_framework](http://www.vincenzo.net/isxkb/index.php?title=.NET_-_Detect_framework)，但是在这个链接中它需要到网络浏览器页面并且正在下载，我想下载并安装.net framework 4.5 innosetup 向导本身，它应该像静默安装一样发生。

如何完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:04:26.290

为此使用 Inno Setup ITDDownload 插件：[Inno setup: 从 Internet 安装文件](https://stackoverflow.com/questions/6887428/inno-setup-install-file-from-internet)

检测 .NET 框架的代码很好，但不是执行浏览器：

```
ShellExec('open', 'http://download/.../dotnetfx.exe','','',SW_SHOWNORMAL,ewNoWait,ErrorCode); 
```

将文件 (.exe) 下载到某个目录并运行它：

```
function ITD_DownloadFile(const url, filename: string): boolean;
function Exec(const Filename, Params, WorkingDir: String; const ShowCmd: Integer; const Wait: TExecWait; var ResultCode: Integer): Boolean; 
```

使用上面的程序 - 它们需要一些初始化（您可以在 ITD 示例中找到它（我是从头开始写的）

# sublimetext2 - 如何编辑默认语法，添加新关键字到 Sublime Text 2？

> ID：15676146
> 
> 赞同：4
> 
> 时间：2013-03-28T07:09:19.000
> 
> 标签：sublimetext2

我希望 Sublime Text 2 语法高亮系统能够支持新的 C++11 关键字，例如`constexpr`.

但是，我没有弄清楚如何实现它，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:57:21.743

编辑这个文件：

`~/Library/Application Support/Sublime Text 2/Packages/C++/C.tmLanguage`

转到大约。第 55 行并添加`constexpr`到列表中

```
 <dict>
        <key>match</key>
        <string>\b(const|extern|register|restrict|static|volatile|inline)\b</string>
        <key>name</key>
        <string>storage.modifier.c</string>
    </dict> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T18:04:38.613

我知道这是一个 Sublime Text 2 问题，但是当我尝试用谷歌搜索 Sublime Text 3 时，我遇到了这篇文章，所以我想我会提到 Sublime Text 3 有它自己的系统（[此处](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html)和[此处](https://www.sublimetext.com/docs/3/syntax.html)的文档），并且作为用户[lthreed](https://stackoverflow.com/users/3330202/lthreed)在[这个问题](https://stackoverflow.com/questions/25184605/cloning-a-sublime-text-3-highlighting-syntax-definition)上提到，您可以使用[PackageResourceViewer](https://sublime.wbond.net/packages/PackageResourceViewer)包来查看 Sublime Text 的预打包语法定义的来源（然后将它们复制/粘贴到您自己的语法中进行编辑）。

# objective-c - 如何从 afnetworking 中提取 JSON 为对象提供数据而不会崩溃

> ID：15676147
> 
> 赞同：0
> 
> 时间：2013-03-28T07:09:19.607
> 
> 标签：objective-c, multithreading, afnetworking, afjsonrequestoperation

我正在使用 afnetworking 从我的 rest api 中获取 JSON 数据。从该 JSON 数据中，我根据数组中有多少项创建 UIViewControllers。例如，如果我的 JSON 数据有 3 个项目，则创建 3 个 UIViewControllers 并将其添加为我正在创建的滑块对象的子视图。

问题是因为来自 afnetworking 的数据完成与我的主线程分开加载，程序崩溃，因为没有数据可以创建我的 UIViewControllers。

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -   [__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array'. 
```

我该如何解决这个问题？我读到我可以使用 [operation waitUntilFinished] 来阻止主线程运行，直到我的服务器加载了所有数据，但人们建议不要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:22:52.120

你绝对不想阻塞主线程。那很糟; 它使您的应用程序看起来像被冻结了。

听起来您想要一个“加载”屏幕。这样，您可以在数据准备好时执行类似发布通知之类的操作。然后，您的加载屏幕的视图控制器将观察该通知，然后在它进入时显示其余数据。

# android - 以编程方式过滤设备日志

> ID：15676148
> 
> 赞同：1
> 
> 时间：2013-03-28T07:09:19.737
> 
> 标签：android, logging, android-logcat

我正在实现在我的应用程序中读取设备日志的功能。

为此，我从以***[编程方式阅读日志](http://www.helloandroid.com/tutorials/reading-logs-programatically)***中获得了帮助。此代码段提供设备日志（所有正在运行的进程的日志）。那很好，可以工作。

现在我想从设备日志 中过滤**应用程序日志。*****那么我该如何以编程方式进行呢？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:18:16.510

您是否检查了 logcat 参考？[http://developer.android.com/tools/debugging/debugging-log.html#alternativeBuffers](http://developer.android.com/tools/debugging/debugging-log.html#alternativeBuffers) 和[http://developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)

你可以试试

```
public class LogTest extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    try {
      Process process = Runtime.getRuntime().exec("logcat -b main -d");
      BufferedReader bufferedReader = new BufferedReader(
      new InputStreamReader(process.getInputStream()));

      StringBuilder log=new StringBuilder();
      String line;
      while ((line = bufferedReader.readLine()) != null) {
        log.append(line);
      }
      TextView tv = (TextView)findViewById(R.id.textView1);
      tv.setText(log.toString());
    } catch (IOException e) {
    }
  }
} 
```

您所要做的就是指定您的命令。您可以通过在 adb 上运行命令来测试您的命令。要进一步过滤它，请查看[http://developer.android.com/tools/debugging/debugging-log.html#filteringOutput](http://developer.android.com/tools/debugging/debugging-log.html#filteringOutput)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:18:49.023

1) Ice Cream Sandwich 无法以编程方式读取日志。

2) 使用`PackageManager`获取包管理器来获取已安装应用程序的包名。

3) 使用您`ActivityManager`获取正在运行的进程列表。

将应用程序的包名称与正在运行的进程匹配，并找到进程 ID。并通过包名或进程ID过滤属于目标应用程序的日志。

这只是大图。

# html - django 链接按钮在 safari 中有效，但在 Firefox 中无效

> ID：15676150
> 
> 赞同：1
> 
> 时间：2013-03-28T07:09:22.000
> 
> 标签：html, css

```
class A(models.Model):
.....
....
  def link_method(self):
        return "<a href='path_to_link/%s'><input type='submit' value='Label'></a>" % (self.id) 
```

按钮上的链接`Label`在 safari 中工作正常，但在 Firefox 中没有任何反应。将鼠标悬停在按钮上时，链接路径正确显示在底部。

该链接指向`view`. 单击 Firefox 上的按钮时，在 safari 一切正常时未到达视图。因此，我假设该方法存在一些问题。

有人能指出问题吗？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:16:34.017

`<input>`标签需要在`<form>`标签内；否则你正在处理非标准的 HTML。非标准 HTML 的问题在于行为没有定义；浏览器可以自由选择非标准 HTML 的实现。

我建议使用以下内容：

```
def link_method(self):
    return '<form action="path_to_link/%s" method="get"><input type="submit" value="Label"></form>' % (self.id) 
```

但是，链接和按钮有不同的用途；如果您只想去其他地方，最好保留一个`<a>`您可以使用 css 设置样式的标签，使其看起来像一个按钮。您可以使用[Bootstrap](http://twitter.github.com/bootstrap/components.html#labels-badges)等库轻松制作徽章和标签。

# c# - 仅用一个换行符替换多个换行符

> ID：15676153
> 
> 赞同：3
> 
> 时间：2013-03-28T07:09:23.970
> 
> 标签：c#, regex

我想在 C# 中`\r\n`只用一个替换任意数量的。`\r\n\r\n`对不起，如果这是一个愚蠢的问题，但我是正则表达式的新手。
其实我试过

```
clearstring = Regex.Replace(clearstring, @"\r\n+", "\r\n\r\n", RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.ExplicitCapture | RegexOptions.IgnoreCase); 
```

但它没有用，有什么建议吗？我会很感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:11:42.387

尝试

```
clearstring = Regex.Replace(clearstring, @"(\r\n)+", "\r\n\r\n", RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.ExplicitCapture | RegexOptions.IgnoreCase); 
```

规则是量词（在您的情况下为加号）仅适用于前一个组或字符类，在您的情况下仅为 \n。如果要包含多个字符或类，则应将它们分组在括号中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-08T21:15:50.200

```
Regex.Replace(str, @"(\r\n){2,}", Environment.NewLine) 
```

仅当找到两个或多个连续的空行时才会替换

# iphone - UIScrollView 或 UITableView 中图像的平铺排列

> ID：15676156
> 
> 赞同：0
> 
> 时间：2013-03-28T07:09:34.223
> 
> 标签：iphone, ios, ipad, uiscrollview, uiimageview

我有一个像照片共享这样的应用程序，我需要在像 GOOGLE IMAGE SEARCH 这样的平铺视图中显示图像。

照片应根据图像的大小以平铺方式排列为了更好地解释，我附上了谷歌图像搜索的示例。

![在此处输入图像描述](../Images/c06eac79597cdc0d62e32bdad555b395.png)

和

![在此处输入图像描述](../Images/660ac2d2ca33bbf87b246b40e5e5c8a5.png)

如果您对此有任何想法，请分享您的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:17:16.770

这是类似于您所要求的iOS库的源代码。您可以从[Source Code](https://github.com/norsez/BDDynamicGridViewController)获得有关如何完成此操作的基本概念。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T07:33:24.290

使用滚动视图。

设置两个参数，分别称为 xOffset 和 yOffset 和 UIScrollview *scrollView

```
int yOffset = 0;
int xOffset = 0;
for (int height=0; height < [y count]; height++)
{
    for (int width=0; width < [x count]; width++)
      {
          NSString *imageName = 
          UIImage *image = [UIImage imageNamed:imageName];
          UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
          imageView.frame = CGRectMake(xOffset, yOffset, imageView.frame.size.width, imageView.frame.size.height);
          [scrollView addSubview:imageView];
          xOffset += imageView.frame.size.width;
      }
   yOffset += imageView.frame.size.height;

}
[scrollView setContentSize:CGSizeMake(xOffset,yOffset)]; 
```

希望这可以帮助...

# apache - 我有更改服务器，TinyMCE 在上传所有内容之前添加 www

> ID：15676159
> 
> 赞同：1
> 
> 时间：2013-03-28T07:09:45.490
> 
> 标签：apache, upload, tinymce

在以前的主机上它工作得很好，但在我的新主机上，通过 TinyMCE 添加时，上传的文件在它们之前有 www。

例如

```
/www/uploads/pages/file/my-uploaded-file.png 
```

而不是正确的：

```
/uploads/pages/file/my-uploaded-file.png 
```

我猜这是服务器设置不正确的问题。

有人可以帮我在服务器上配置什么错误，因为在我的本地主机和以前的服务器上它按预期工作;(

**编辑：** 结果链接如下所示：

```
http://mywebsite.com/www/uploads/pages/file/my-uploaded-file.png 
```

我需要：

```
http://mywebsite.com/uploads/pages/file/my-uploaded-file.png 
```

# php - 使用php在文件夹中搜索文件

> ID：15676160
> 
> 赞同：1
> 
> 时间：2013-03-28T07:09:58.597
> 
> 标签：php

我正在使用我的 php 脚本将用户上传的文件（如 pdf 图像和 txt 文件）存储在单独的文件夹中，我想从文件夹上传中检索文件名，并将 pdf 和 txt 分组并提供搜索特定文件的方法。

我还需要将文件重命名为`$ja`变量

```
$ja
$da = date("dmY");
$ja = $uid.$da;

    move_uploaded_file($mi, $uploadpath) 
```

还使用了我在堆栈中找到的这段代码

示例 01：

```
<?php
  // read all files inside the given directory
  // limited to a specific file extension
  $files = glob("./ABC/*.txt");
?> 
```

示例 02：

```
<?php
  // perform actions for each file found
  foreach (glob("./ABC/*.txt") as $filename) {
    echo "$filename size " . filesize($filename) . "\n";
  }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:16:17.267

扫描目录（）；功能会帮助你

```
<?php
$dir    = '/tmp';
$files1 = scandir($dir);
print_r($files1);
?> 
```

[http://www.php.net/manual/en/function.scandir.php](http://www.php.net/manual/en/function.scandir.php)

现在您在指定的位置拥有所有文件的数组，您可以使用数组函数来完成工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:17:17.583

[您可以尝试使用scandir](http://php.net/manual/en/function.scandir.php)列出目录，然后在您将获得的 php 文件名数组中进行过滤

# javascript - jQuery 碰撞插件 | 如何实际检查是否有碰撞

> ID：15676161
> 
> 赞同：1
> 
> 时间：2013-03-28T07:09:58.820
> 
> 标签：javascript, jquery-ui, collision-detection, pong, jquery-collision

我在一个简单的（或者我认为的）乒乓球游戏中使用[jQuery Collision 。](http://sourceforge.net/projects/jquerycollision/)没有人工智能或在线互动，只有两个桨和现实生活中一两个玩家可以控制的球。

当试图为球设置动画并检查它是否真的与任何东西发生碰撞时，我做不到。我已经阅读了 SourceForge 上的文档（请参阅上面的链接），但是对于如何实际检查对撞机是否真的击中任何东西，我仍然有点迷茫。在我看来，文档可以使用一些示例。

我目前拥有的 JavaScript 代码：

```
$(document).ready(function()
{
    var ball = $("#ball");
    var topPaddle = $("topPaddle");
    var bottomPaddle = $("bottomPaddle");
    var topPaddleHits = $("#ball").collision("#topPaddle", { mode: "collision", obstacleData: "topOData" });
    var bottomPaddleHits = $("#ball").collision("#bottomPaddle", { mode: "collision", obstacleData: "bottomOData" });
    var anim = setInterval(function()
    {
        ball.css({ "left": "+=5", "top": "+=5" });
        if (bottomPaddleHits.data("bottomOData") == bottomPaddle)
        {
            anim = clearInterval(anim);
            alert("Bottom paddle hit!");
        }
    }, 50);
}); 
```

我也试过`if (bottomPaddleHits == 1)`，但也不好。

* * *

顶部/底部桨和球的 CSS，如果重要的话：

```
#ball
{
    width: 10px;
    height: 10px;
    position: absolute;
    background: #FFF;
    top: 200px;
    left: 100px;
}   
#topPaddle
{
    position: absolute;
    width: 300px;
    height: 10px;
    background: lime;
    top: 100px;
    left: 50px;
}
#bottomPaddle
{
    position: absolute;
    width: 300px;
    height: 10px;
    background: lime;
    bottom: 100px;
    left: 50px;
} 
```

我只是不确定如何检查某些东西是否真的被击中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:33:16.313

那个碰撞插件似乎有相当糟糕的文档我认为使用像 jQuery UI 这样的东西会更容易，它有更好的文档和支持。这是我放在一起的快速检测碰撞的东西。

```
<div class="drop">
    <div class="drag"></div>
    <div class="drag"></div>
    <div class="drag"></div>
    <div class="drag"></div>
    <div class="drag"></div>
</div>

$('.drop').droppable({
    tolerance: 'fit'
});

$('.drag').draggable({
    revert: 'invalid',
    stop: function(){
        $(this).draggable('option','revert','invalid');
    }
});

$('.drag').droppable({
    greedy: true,
    tolerance: 'touch',
    drop: function(event,ui){
        //ui.draggable.draggable('option','revert',true);
        alert('touched');
    }
}); 
```

以及警报的放置位置，您可以使用 ui 参数来获取发生碰撞的位置和偏移量。

[http://jsfiddle.net/kAXdE/](http://jsfiddle.net/kAXdE/)

# django - 在 Django 中显示纯 HTML 而不是 Captcha 小部件？

> ID：15676162
> 
> 赞同：0
> 
> 时间：2013-03-28T07:10:01.073
> 
> 标签：django, recaptcha

我正在使用来自谷歌的 recaptcha-client。我注册并获得了本地主机的私钥和公钥。我正在向模板发送重新验证码，如下所示：

```
from django.conf import settings
from summary.captcha import displayhtml

 public_key = settings.RECAPTCHA_PUBLIC_KEY
 script = displayhtml(public_key=public_key)
return render_to_response('index.html', {'state':state, 'script':script}, context_instance=RequestContext(request)) 
```

显示此 html 而不是小部件：

```
<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6Lf5Cd8SAAAAAD9TUGVAkEOHfHJWnZc9mK2lO5-W"></script> <noscript> <iframe src="http://www.google.com/recaptcha/api/noscript?k=6Lf5Cd8SAAAAAD9TUGVAkEOHfHJWnZc9mK2lO5-W" height="300" width="500" frameborder="0"></iframe><br /> <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea> <input type='hidden' name='recaptcha_response_field' value='manual_challenge' /> </noscript> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:31:29.887

您必须将`script`变量标记为安全。

在模板中，您可以：

```
{{ script|safe }} 
```

# jquery - 将csv加载到html中，在哪里设置csv的路径？

> ID：15676167
> 
> 赞同：1
> 
> 时间：2013-03-28T07:10:41.100
> 
> 标签：jquery, html, csv, path

我令人尴尬的问题......我的大脑没有这么早工作：D

我有一个 html 页面，我在其中使用 csv 文件的导入来显示在后台运行的作业的状态。

一切正常，直到我不得不更改我的 csv 文件的路径。

在我将 csv 文件与 apache 的 webapp 文件夹中的 html 文件放在同一个文件夹中之前。

现在我必须将 csv 文件的路径更改为 C:/tmp/。

我尝试了很多方法来更改函数以使其更改到 C:/tmp/ 的路径，但我无法让它工作。

我必须在哪里进行更改？

函数现在看起来像这样：

```
function()                                        
                {                                        
                $('#csv').load(lnr.val()+'_JobStatus.csv?'+new Date().getTime(),function(data){$(this).html(data).fadeIn("slow");});          }); 
```

我试过这样的东西，但它不工作..

```
$('#csv').load('C:/tmp/'+lnr.val()+'_JobStatus.csv? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:15:23.920

试试看。

```
$(document).ready(function() {
 $("#loadData").click(function() {
    $.ajax({
        url : "articlename.csv",
        dataType: "text",
        success : function (data) {
            $("#csv").html(data);
        }
    });
 });
}); 
```

# ios - 如何将@selector 从一个方法参数传递给另一个？

> ID：15676169
> 
> 赞同：-2
> 
> 时间：2013-03-28T07:10:52.900
> 
> 标签：ios, objective-c

我想这样做，但 'performSelectorOnMainThread:recievedDataSelector' 会引发无法识别的选择器异常。

```
-(void)updateStatus
{   
    [self makeRequest:@"http://someplace.com/blah.php"
       onRecievedData:@selector(updateStatusRecievedData)];
}

-(void)makeRequest:(NSString *)url onRecievedData:(SEL) recievedDataSelector
{
    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
    [NSURLConnection sendAsynchronousRequest:urlRequest queue:_operationQueue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
             [self performSelectorOnMainThread:recievedDataSelector
                                    withObject:data
                                 waitUntilDone:YES];
     }
}

(void)updateReceivedData:(NSData *) data
{
    NSLog(@"[updateReceivedData]");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:11:47.070

你想念' **`:`**'到`updateStatusRecievedData`方法

```
-(void)updateStatus
{   
    [self makeRequest:@"http://someplace.com/blah.php"
       onRecievedData:@selector(updateStatusRecievedData:)];
} 
```

# javascript - Backbone.js 验证集合

> ID：15676180
> 
> 赞同：7
> 
> 时间：2013-03-28T07:11:49.837
> 
> 标签：javascript, validation, backbone.js

[Backbone.js](http://backbonejs.org)为模型提供验证。但是没有一种简单的方法可以检查集合中的所有模型是否有效。没有`.isValid`收藏品。

我使用这样的黑客：

```
_.isEmpty(_.filter(myCollection.models, function(m) {return m.validationError;})) 
```

是否有更优化的方式来“验证”收藏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T07:30:52.407

使用[某种](http://underscorejs.org/#some)方法怎么样？

```
var hasErrors = _.some(myCollection.models, function(m) {
    return m.validationError;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T10:19:40.187

BackboneJS Collection[委托](http://backbonejs.org/#Collection-Underscore-Methods)了一些 UnderscoreJS 方法，例如[`some`](http://underscorejs.org/#some). 你可以这样使用它：

```
var hasErrors = myCollection.some(function(model) {
    return model.validationError;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T08:29:00.410

[lodash.js](http://lodash.com/)支持这样的构造（使用“_.pluck”回调简写）：

```
_.some(myCollection.models, 'validationError'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T20:34:52.240

我知道这是一个老问题，但请看看我对这个问题的决定。简而言之，它可以作为 github repo[主干集合验证](https://github.com/vogdb/backbone-collection-validation)。现在，到细节。验证这样的集合

```
Collection = Backbone.Collection.extend({
  validate: function (collection) {
    var nonExistIds = [];
    _.forEach(collection, function (model) {
      var friends = model.get('friends');
      if (friends && friends.length) {
        for (var i = friends.length - 1; i >= 0; i--) {
          if (!this.get(friends[i])) {
            nonExistIds.push(friends[i]);
          }
        }
      }
    }, this);
    if (nonExistIds.length) {
      return 'Persons with id: ' + nonExistIds + ' don\'t exist in the collection.';
    }
  }
}) 
```

你需要用这个扩展你的主干

```
//This implementation is called simple because it
// * allows to set invalid models into collection. Validation only will trigger
//   an event 'invalid' and nothing more.
var parentSet = Backbone.Collection.prototype.set;

Backbone.Collection.prototype.set = function (models, options) {
  var parentResult = parentSet.apply(this, arguments);
  if (options && options.validate) {
    if (!_.isFunction(this.validate)) {
      throw new Error('Cannot validate a collection without the `validate` method');
    }
    var errors = this.validate(this.models);
    if (errors) {
      this.trigger('invalid', this, errors);
    }
  }
  return parentResult;
}; 
```

或者有了这个

```
//This implementation is called advanced because it
// * doesn't allow to set invalid models into collection.

var parentSet = Backbone.Collection.prototype.set;

Backbone.Collection.prototype.set = function (models, options) {
  if (!options || !options.validate) {
    return parentSet.apply(this, arguments);
  } else {
    if (!_.isFunction(this.validate)) {
      throw new Error('Cannot validate a collection without the `validate` method');
    }

    var clones = [];
    _.forEach(this.models, function (model) {
      clones.push(model.clone());
    }, this);
    var exModels = this.models;
    this.reset(clones);
    var exSilent = options.silent;
    options.silent = true;
    parentSet.apply(this, arguments);

    var errors = this.validate(this.models);

    this.reset(exModels);
    if (typeof exSilent === 'undefined') {
      delete options.silent;
    } else {
      options.silent = exSilent;
    }
    if (errors) {
      this.trigger('invalid', this, errors);
      return this;
    } else {
      return parentSet.apply(this, arguments);
    }
  }
}; 
```

# android - 如何使焦点随按钮移动？

> ID：15676183
> 
> 赞同：0
> 
> 时间：2013-03-28T07:12:19.657
> 
> 标签：android

我做了一个简单的按钮移动动画。但是在我完成按钮翻译动画后，按钮焦点并没有随着按钮移动。焦点仍然停留在原始位置。

如何使焦点随按钮移动？我的 sdk api 级别是 15。

代码是这样的：

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;

public class MainActivity extends Activity {

    private Button mButton;

    private Animation mButtonAnimation;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mButton = (Button) findViewById(R.id.button1);
        mButton.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                mButtonAnimation.setFillAfter(true);
                mButton.startAnimation(mButtonAnimation);
            }
        });

        mButtonAnimation = AnimationUtils.loadAnimation(this, R.anim.button_anim);
    }
} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

</RelativeLayout> 
```

button_anim.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="500"
        android:fromYDelta="0"
        android:interpolator="@android:anim/linear_interpolator"
        android:toYDelta="100" />
</set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:50:35.227

试试看[sdk](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3afillAfter)`fillAfter = true` _

# linux - 将地址从内核空间传递到用户空间

> ID：15676185
> 
> 赞同：1
> 
> 时间：2013-03-28T07:12:23.447
> 
> 标签：linux, linux-kernel, scheduler

我正在研究 linux-3.7.6/kernel/sched/core.c，在 schedule() 函数中，我必须记录进程的 pid 和 tgid，并且必须将记录的值显示给用户空间。我在存储 tgid 和 pid 的内核空间中获取了全局结构数组，我在想是否可以将数组的地址传递给用户空间，然后在用户空间访问 tgid 和 pid 的值。

```
typedef struct process{
int pid;
int tgid;
}p;

p proc[100]; 
```

有没有一种方法可以一次性将存储在结构数组中的所有数据发送到用户空间？我之前使用过 copy_to_user 但只是停留在这里，因为 copy_to_user 以块的形式复制数据，如何发送这些整组值？如果有人可以指导我如何继续前进，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:16:39.297

我假设您希望在将数组复制到用户级别时保持原子性。

一个简单的方法是：

```
 p local_array[100];

preemption_disable();   //disable preemption so you array content will not change,
                        //because no schedule() can be executed at this time.

memcpy(local_array, array, sizeof(array));   //then we get the consistent snapshot of
                                             //array.
preemption_enable();

copy_to_user(user_buff_ptr, local_array, sizeof(array)); 
```

# shell - “sftp：找不到命令”从 Unix Shell 脚本运行 sftp

> ID：15676190
> 
> 赞同：1
> 
> 时间：2013-03-28T07:12:53.563
> 
> 标签：shell, unix, sftp

`sftp`我可以使用提示符将文件从一台服务器传输到另一台服务器。

我尝试`sftp`在 shell 脚本中使用，但出现以下错误：

```
"sftp: command not found" 
```

我从脚本中尝试了以下代码：

```
sftp ${USER}@${HOST} <<EOF
quote pass ${PASSWD}
cd  ${PATH}
mput *.csv
EOF 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:16:23.510

使用绝对文件位置而不是取决于路径 - 例如 sftp 二进制文件可能位于`/usr/bin/`所以而不是仅仅使用`sftp`- 尝试使用`/usr/bin/sftp`

要找出二进制文件的位置，请使用 which 命令

`which sftp`

# javascript - JavaScript V8 中的普通对象有隐藏类吗？

> ID：15676192
> 
> 赞同：2
> 
> 时间：2013-03-28T07:13:02.013
> 
> 标签：javascript, v8

我在[V8 Design Elements:Fast Property Access](https://developers.google.com/v8/design#prop_access)阅读了隐藏类。

示例中的对象由构造函数创建

```
var p1 = new Point(1,2) 
```

p1 有一个隐藏类，用于快速访问它的属性'x'，'y'。

```
var p2 = {x:1,y:2} 
```

所以，我的问题#1 是：p2 是否与 p1 共享一个隐藏类？

而且，如果 p2 确实有一个隐藏类，下面的代码会改变隐藏类吗？（问题#2）

```
delete p2.x 
```

这是这篇文章让我问这个问题：

[编写快速、内存高效的 JavaScript](http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/)

只需阅读**DE-REFERENCING MISCEPTIONS**部分。

这篇关于删除财产的文章是否正确？（问题#3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-16T12:24:07.140

所以，我的问题#1 是：p2 是否与 p1 共享一个隐藏类？答：不，只有使用相同构造函数创建的对象才能共享隐藏类。

回答 #2 问题：删除 p2 上的属性将更改 p2 的隐藏类。

我已经通过使用 chrome 开发工具上可用的堆内存快照选项验证了这一点。

谢谢，

# ruby-on-rails - Rails - 我可以在生产中运行的最大 resque 工人数量是多少？

> ID：15676195
> 
> 赞同：0
> 
> 时间：2013-03-28T07:13:16.253
> 
> 标签：ruby-on-rails, background-process, resque

现在我正在运行 3 个 resque 工作人员来运行后台作业。我的系统有大约*50K*用户，队列中有许多待处理的作业。

1.  我可以增加 resque 工作人员的数量吗，但这不应该影响网站的性能。
2.  我可以在生产中运行的最大 resque 工人数量是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:23:15.847

只要您运行它们的计算机可以处理负载，您就可以根据需要将运行的工作人员数量扩大到任意数量。这个数字会因机器和应用程序而异；你必须做一些测试来看看你的应用程序和硬件有什么限制（虽然一般来说，如果你的工作人员加载你的 Rails 应用程序，内存往往是主要的限制）。

请记住，worker 不必在运行 Rails 应用程序的同一机器上运行。我们目前在专用服务器上运行大约 9 个队列（其中 9 个工作人员专用于一个或多个特定队列，其中 2 个是通配符工作人员）上的 11 个工作人员，我们正在考虑通过获得更强大的工作人员来增加我们的工作人员数量EC2 实例或启动第二个实例以在其上运行额外的工作程序。

# zurb-foundation - Zurb 4 个可单独滚动的部分

> ID：15676196
> 
> 赞同：6
> 
> 时间：2013-03-28T07:13:28.830
> 
> 标签：zurb-foundation

根据对先前提出的问题的回答，我有一个全屏布局：

[CSS 全屏网格布局（带有一些滚动部分）](https://stackoverflow.com/questions/3191006/css-fullscreen-grid-layout-with-some-scrolling-sections)

我正在使用的线框：

![在此处输入图像描述](../Images/612e40256bc62d96f5b604b7b452530e.png)

编辑：这是我希望在 Zurb 4 中重新创建的非常相似的布局行为（虽然不需要固定宽度和高度）： [http ://stevesanderson.github.com/fixed-height-layouts-demo/窗格转换-tablet.html](http://stevesanderson.github.com/fixed-height-layouts-demo/pane-transitions-tablet.html)

效果很好，但是我现在尝试在 Zurb Foundation 4 中对相同/相似的布局进行建模，但遇到了两件事：

1.  目前还不清楚我如何让 B 和 E 垂直独立滚动（想想 Mac 上的 Mail.app 布局）

2.  目前还不清楚我如何将 C 和 F 固定到屏幕底部。

与我之前的问题不同，我不打算为这些部分设置固定的像素宽度。

注意：**我相信移动优先设计，但我不明白为什么其中任何一个都不会被视为“响应式”。** 我确实计划根据设备和方向调整大小和显示/隐藏部分。但是 Zurb 似乎缺少滚动和全高部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T01:58:04.733

根据您的要求，需要做的主要事情是：

**首先，使用页面的整个宽度**

您希望布局填满整个页面，为此您需要覆盖这样的 Foundation 类：

```
.row {
  max-width: 100%;
} 
```

**其次，将页脚粘贴到底部**，以便为`B`和提供滚动条`E`。这是一个粘性 CSS，我对其进行了修改以使其与 Foundation 模板一起使用。

```
html, body, #wrapper{ height: 100%; }
body > #wrapper{height: auto; min-height: 100%;}
#main { padding-bottom: 75px; /*  same height as the footer */
    overflow:hidden;
    top: 75px; bottom: 0; left: 0; right: 0;        
    padding-bottom: 75px;    
    position: absolute;           
}  
#footer { 
    position: relative;
    margin-top: -75px; /* negative value of footer height */
    height: 75px;
    clear:both;
} 

.clearfix:after {content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;}
.clearfix {display: inline-block;} 
```

关键是四个容器 div：wrap、header、main 和 footer。我假设您的标题将具有固定的高度，因为它可以是横幅或菜单，因此您可以在以下代码中添加类（参见第三点）。

**第三，让中间的 DIV 拉伸，**让它们有滚动条来显示长内容

```
#header {
   height:75px; // your desired height
}  
// additional style for the "main" class
#main {
   top: 75px; bottom: 0; left: 0; right: 0; // top is the same as header.height
}
// this will create a scroll bar on section B
#main .b {
    overflow:auto;
    height:100%; 
}
// this will create a scroll bar on section E
#main .e {
    overflow:auto;            
    height:100%;
} 
```

请注意，虽然部分`B`和`E`将响应，因为它们将相互堆叠，但高度将是固定的，我认为您希望这会发生，因为您希望在每个部分上都有一个滚动条。

正如您在评论中提到的那样，我以前的代码不起作用，这是因为如果您在移动设备上查看它，您可以使用的区域很小。设备越小，您拥有的真实状态就越少。你需要做的是决定**在什么时候你不想滚动你的主要内容**（部分`B`和`E`）。

让您的用户滚动您网站的某些部分并不是一个好主意。然后让他们很难滚动到其余部分（页面的其余部分），只是让他们在其他部分再次滚动。那是在他们到达页面底部之前。因此，根据该建议，您需要做的是：

```
@media only screen and (max-width: 768px) {
    #main {                
        padding-bottom: 0;
        position:inherit
    }  
    #footer {                 
        margin-top: 0;                
    } 
    #main .b {
        overflow:auto;
        height:auto; 
    }
    #main .e {
        overflow:auto;            
        height:auto;
    }
} 
```

[在这里查看它的实际应用](http://jsfiddle.net/TDqcM/)。您会在那里看到，在较小的设备上，页脚将粘在底部，两个容器堆叠在另一个容器的顶部。在桌面视图中，页脚将贴在底部，如果需要，您将拥有主要内容的滚动条。

# jar - 如何知道jar文件的用途？

> ID：15676198
> 
> 赞同：1
> 
> 时间：2013-03-28T07:13:35.123
> 
> 标签：jar

我正在使用**struts2**开发一个项目，使用**eclipse IDE进行****休眠**。在这里，我有很多 jar 文件，例如

 **1.  antlr-2.7.6.jar
2.  aopalliance-1.0.jar
3.  asm.jar
4.  cglib-2.2.jar
5.  classworlds-1.1.jar
6.  commons-beanutils-1.7.0.jar
7.  commons-chain-1.2.jar
8.  commons-collections-3.2.jar
9.  commons-digester-2.0.jar
10.  commons-fileupload-1.2.1.jar

还有很多。但现在，我想知道这些 jar 文件的用途。是否有任何网站可以了解所有 jar 文件的用途？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:37:27.293

这些 jars 是高效和快速运行 struts2 应用程序的依赖项。由于上述所有 jar 都是开源项目，由世界各地的各种开发人员开发和维护。这些罐子的设计和开发旨在针对一些特定目标，并且这些罐子最适合专门的需求部分。这些罐子是使用最佳算法开发的。例如**commons-fileupload-1.2.1.jar**最适合**文件上传任务**。

因此，与其浪费时间为项目开发自己的类和 jar，为什么我们不使用已经开发的最适合的项目作为 jar。它减少了时间并提高了生产力。**所以struts2使用这些jars的方式来实现一些目标和任务，相对完成用户的需求。**

例如 struts2 使用**commons-fileupload-1.2.1.jar**来满足其文件上传要求。模块化和利用现有资源只是**OOP**编程的最终目标，这样做是可以实现的。

**请记住，重新发明轮子是没有用的。****

# ruby-on-rails - 跟踪 Web/Intranet 上的 Rails 应用程序使用情况

> ID：15676200
> 
> 赞同：0
> 
> 时间：2013-03-28T07:13:48.380
> 
> 标签：ruby-on-rails, web-applications, drm, piracy-prevention

我们在 LGPL 许可下开发了一个开源 Web 应用程序，并托管在 LIVE 演示服务器中。源代码也可以在 source forge 中找到。每天都会通知大量下载。因此，我们想跟踪该应用在网络上的实时使用情况，以了解实时用户的数量。

Rails 中是否有任何方法可以跟踪此应用程序在连接到 Internet 的系统中的配置和使用情况？信息丰富的答案将帮助我们在我们的应用程序中找出或开发这样一种方法，如果我们将来将该产品作为商业产品，这肯定会帮助我们阻止盗版。

谢谢 ：）-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:02:52.080

Your question is really two questions:

1.  How can I see how popular my application is?

    *   You can look at the download counts. Not foolproof because people might download from each other, and you'll miss them.

    *   Crawl the web and see how many sites respond with your app's signature. Takes massive resources, plus you won't catch the ones that modified your code, and false positives from people spoofing your app's signature.

    *   Make the app call home. Again, since people can just take out the code that does this, not foolproof.

2.  How can I make sure no one can pirate my app?

    *   Your source code is free, so... you can't.

How does it make sense to be "selling" an open source app? Better to sell support.

Also, since you're using ruby, you'll have to use a compiler to produce a binary in order to avoid giving away your source code (as per the MIT license, which rails is released under).

A quick googling shows that some may exist, but making sure you produce a binary that works is going to take a lot of resources. So, there is a significant legal/technical barrier to keeping your source code closed. (Also, decompilers could easily be used to reverse engineer your app.)

# jdbc - 在 Pentaho 数据集成工具中更改默认的 jdbc 驱动程序类

> ID：15676208
> 
> 赞同：2
> 
> 时间：2013-03-28T07:14:23.803
> 
> 标签：jdbc

我正在尝试 Pentaho 数据集成，我想使用 MySql 作为我的输出 RDBMS，但使用的默认驱动程序类是 org.gjt.mm.mysql.Driver 用于 mm.mysql 数据库但我想使用通常的 com .mysql.jdbc.Driver 类连接到 mysql。我不知道如何更改它或添加新的驱动程序。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-04T09:39:31.843

对于新版本的 MySQL JDBC 驱动程序（在我的例子中是 8.1 版），主驱动程序类的名称已更改。即使您下载驱动程序并重新启动spoon，Pentaho Data Integration (PDI) 的MySQL 连接器仍然会查找错误的类名。

解决方法是在 PDI 中使用“**通用数据库**”连接类型并手动添加新的类名。典型的连接细节是：

```
Dialect: MySQL 
Custom connection URL: jdbc:mysql://localhost:3306/database_name 
Custom driver class name: com.mysql.cj.jdbc.Driver 
```

参考：[https ://jira.pentaho.com/browse/PDI-17341](https://jira.pentaho.com/browse/PDI-17341)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T20:36:50.003

我面临着同样的问题。 **缺少驱动程序文件。** 对于刚开始使用 PDI 的人来说，这个错误真的很常见。

1.  下载 MySQL JDBC 驱动程序。
2.  复制 .jar 文件 (mysql-connector-java-5.1.29) 并将其粘贴到您的**Lib**文件夹中： Windows: C:\Program Files\pentaho\design-tools\data-integration\lib OS X: /Applications/data -集成/库
3.  重新启动 Pentaho 数据集成并测试您的连接。

最好的祝福。

# json - 在 sencha touch 中按类别解析 json 数据

> ID：15676209
> 
> 赞同：0
> 
> 时间：2013-03-28T07:14:31.417
> 
> 标签：json, parsing, sencha-touch, sencha-touch-2

对于我的 sencha touch 应用程序，我的 json 数据是这样的，

```
{
  "type": "FeatureCollection",
  "features": [
{
  "type": "Feature",
  "id": "rodos_business_pois.1",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.21962354993591,
      36.452844361147314
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "AQUARIOUM",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "BAR",
    "category_c": "020200",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "28 GRIVA GEORGIOU",
    "street_nam": "ÃÑÉÂÁ ÃÅÙÑÃÉÏÕ",
    "number": "28",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.24102778E9,
    "fax": 0,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
{
  "type": "Feature",
  "id": "rodos_business_pois.2",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.225417523605692,
      36.436470953176716
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "ZIGOS",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "BAR",
    "category_c": "020200",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "89 KAZOULI STEFANOU",
    "street_nam": "ÊÁÆÏÕËÇ ÓÔÅÖÁÍÏÕ",
    "number": "89",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.24103987E9,
    "fax": 0,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
{
  "type": "Feature",
  "id": "rodos_business_pois.3",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.223100266167258,
      36.45251556942936
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "LA ROSA FASHION BAR",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "BAR",
    "category_c": "020200",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "4 PAPANIKOLAOU GEORGIOU",
    "street_nam": "ÐÁÐÁÍÉÊÏËÁÏÕ ÃÅÙÑÃÉÏÕ",
    "number": "4",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.2410974E9,
    "fax": 0,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
{
  "type": "Feature",
  "id": "rodos_business_pois.4",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.226588152300117,
      36.43403310824089
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "G-NET",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "RESTAURANT",
    "category_c": "020100",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "135 AGIAS ANASTASIAS",
    "street_nam": "ÁÃÉÁÓ ÁÍÁÓÔÁÓÉÁÓ",
    "number": "135",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.2410351E9,
    "fax": 0,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
{
  "type": "Feature",
  "id": "rodos_business_pois.5",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.215719877096184,
      36.43079419827729
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "ANDRMEDA LOUNGE BAR",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "CAFE",
    "category_c": "020100",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "4 PAPANDREOU GEORGIOU",
    "street_nam": "ÐÁÐÁÍÄÑÅÏÕ ÃÅÙÑÃÉÏÕ",
    "number": "4",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.2410974E9,
    "fax": 2.2410975E9,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
{
  "type": "Feature",
  "id": "rodos_business_pois.6",
  "geometry": {
    "type": "Point",
    "coordinates": [
      28.226209613062103,
      36.43806195312573
    ]
  },
  "geometry_name": "geom",
  "properties": {
    "id": null,
    "business_p": "DOLCE CAFE",
    "name_owner": null,
    "surname_ow": null,
    "middle_nam": null,
    "category_n": "RESTAURANT",
    "category_c": "020100",
    "category_1": null,
    "category_2": null,
    "category_3": null,
    "address": "14 DODEKANISIAKIS NEOLEAS",
    "street_nam": "ÄÙÄÅÊÁÍÇÓÉÁÊÇÓ ÍÅÏËÁÉÁÓ",
    "number": "14",
    "postcode": null,
    "places_en_": "RODOS",
    "f16": 1,
    "f17": 0,
    "tel": 2.24102988E9,
    "fax": 0,
    "mob": 0,
    "email": null,
    "url": null,
    "places_gr": null,
    "places_en": null
  }
},
.......
.......
....... and so on.. 
```

我可以使用 sencha touch json reader 一次解析所有这些数据，但现在我想按类别解析这些数据，这意味着我想一次解析所有那些具有**BAR**或**CAFE**或**RESTAURANT**等类别的数据。

任何帮助都会得到帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:05:32.437

这是您过滤商店的方式

```
store.filterBy(function(record, id){
    var cat = record.get('category_n');
    if(cat == 'BAR' || cat == 'CAFE' || cat == 'RESTAURANT'){
        return true;
    }else{
        return false;
    }
}); 
```

这将迭代每条记录并将其传递给函数，所以如果你想检查 category_n

编辑：确保下次将数据加载到商店时清除商店过滤器

```
store.clearFilter(); 
```

# android - youtube 视频未在 iframe 的 android webview 中播放

> ID：15676210
> 
> 赞同：4
> 
> 时间：2013-03-28T07:14:33.320
> 
> 标签：android, android-webview, android-video-player, video-player

我正在开发一个安卓应用程序。

这是我的 xml 提要标签：

```
<FullContent>
  <style> img {padding:2px;} p{color:#fff} </style>
   <p> Actor Hrithik Roshan has always nursed a</p> <br/><br/><br/><br/><br/>
   <p style=font-size:12px>@Notch 2013</p>
    <iframe src="http://www.youtube.com/embed/k8T3_JupGhI?fs=0" 
     width="500" height="298" frameborder="0"></iframe>
     </FullContent> 
```

我正在尝试使用以下代码在 android WebView 中播放视频-

```
 content = (WebView) findViewById(R.id.fullcontent);
  content.setWebChromeClient(new WebChromeClient());
   content.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
   content.getSettings().setJavaScriptEnabled(true);
    content.getSettings().setDomStorageEnabled(true);
     content.getSettings().setPluginsEnabled(true);
       String fullcontent = in.getStringExtra("FullContent");
         full_content=fullcontent.substring(1);
          content.loadDataWithBaseURL(null,full_content, "text/html", "UTF-8",null); 
```

但是当我点击它时，视频没有播放。

我的代码有什么问题？

**编辑：**

```
 I have added below code on my android app

    web.getSettings().setPluginState(PluginState.ON_DEMAND);
    web.getSettings().setPluginState(PluginState.ON);
    web.getSettings().setPluginsEnabled(true); 
```

现在我也面临同样的问题。视频已打开。但是当我点击它时，视频没有播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:16:50.917

不要尝试包含 iframe，而只需提供直接链接到 YouTube 页面或 h264 文件的视频缩略图。

较早的讨论，有一个[可能的解决方案](https://stackoverflow.com/questions/7586475/google-reader-esque-optimizing-of-webviews-on-android)。

# php - Smarty 与 JQuery 冲突

> ID：15676223
> 
> 赞同：2
> 
> 时间：2013-03-28T07:15:28.467
> 
> 标签：php, jquery, smarty

我正在使用一个 .tpl 文件，并在其中包含了 Jquery 选项卡。现在它给出了错误：粗体文本是它所说的行：

> 致命错误：Smarty 错误：[在 header.tpl 第 35 行]：语法错误：无法识别的标签：jQuery('#menu2').tabify(); （Smarty_Compiler.class.php，第 446 行）在 /home/jifcccom/public_html/hrm/_includes/smarty/libs/Smarty.class.php 第 1093 行

```
<script src="{$BASE_URL}js/jquery.form.js" type="text/javascript"></script>
<script src="{$BASE_URL}js/jquery.js" type="text/javascript"></script>
    <script src="{$BASE_URL}js/cmxforms.js" type="text/javascript"></script>
    <script src="{$BASE_URL}js/jquery.metadata.js" type="text/javascript"></script>
    <script src="{$BASE_URL}js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="{$BASE_URL}js/functions.js" type="text/javascript"></script>
    <script src="{$BASE_URL}_templates/{$THEME}/js/jquery.tabify.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
            // <![CDATA[

            **$(document).ready(function () {**
                $('#menu2').tabify();
            });

            // ]]>
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:17:15.347

尝试将 JS 代码包装在`{literal}{/literal}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:20:13.800

封装js代码insdie`{literal}{/literal}`

参考：[http ://www.smarty.net/docsv2/en/language.function.literal](http://www.smarty.net/docsv2/en/language.function.literal)

```
 <script type="text/javascript">
    {literal}

        $(document).ready(function () {
            $('#menu2').tabify();
        });

    {/literal}
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:18:54.520

尝试在顶部添加一个 jQuery 库：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="{$BASE_URL}js/cmxforms.js" type="text/javascript"></script>
<script src="{$BASE_URL}js/jquery.metadata.js" type="text/javascript"></script>
<script src="{$BASE_URL}js/jquery.validate.min.js" type="text/javascript"></script>
<script src="{$BASE_URL}js/functions.js" type="text/javascript"></script>
<script src="{$BASE_URL}_templates/{$THEME}/js/jquery.tabify.js" type="text/javascript" charset="utf-8"></script>

 {literal}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#menu2').tabify();
        });
    </script>
 {/literal} 
```

尝试将脚本标签包含在标签内`{literal}{/literal}`。

### [检查此链接以获取信息](http://www.smarty.net/docsv2/en/language.function.literal)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:17:27.130

看起来你忘了加载 jquery.js ..（我在你发布的代码中看不到它）

```
<script src="{$BASE_URL}js/jquery.js" type="text/javascript"></script> 
```

# file-upload - CSV 数据在 SFTP 上上传时以单行形式出现

> ID：15676227
> 
> 赞同：0
> 
> 时间：2013-03-28T07:15:44.267
> 
> 标签：file-upload, ftp, sftp

我们有一个带有 | 的 csv 文件。符号作为分隔符。文件中的数据跨越多行，例如

123|2323|2323|23232|2323|232323|2323|2323|2323|3434 1213|323|2323|2323|3|323|323|2323|3434|3434|3434 3434|34343|434

但是，一旦我们将这个文件上传到 sftp 并在那里下载，它就会在一行中显示数据。如果我们在最后下载它，它会显示正确的数据，即上传时的数据。

有人知道可能是什么原因以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:23:47.187

我才发现原因，实际上是在文本模式下上传的，一旦我们将其更改为二进制模式。它工作得很好。

# objective-c - 如何将字符串转换并运行为图像（base64）xcode

> ID：15676232
> 
> 赞同：3
> 
> 时间：2013-03-28T07:16:06.597
> 
> 标签：objective-c, uiimage, base64

我想从服务器中的（php文件）以base64方式获取图像字符串。

但我不知道什么解码这个字符串并转换为图像并在 UIImage 中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:23:05.377

```
NSURL *urlString = [NSURL URLWithString:@"your string"];

NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation([UIImage imageWithData:

[NSData dataWithContentsOfURL:urlString]])];

UIImage *image = [UIImage imageWithData:imageData]; 
```

试试这个.....可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T08:49:02.807

```
NSData* data = UIImageJPEGRepresentation(yourImage, 1.0f);

 NSString *strEncoded = [Base64 encode:data]; 
```

**解码为：**

```
 NSData* data = [Base64 decode:strEncoded ];;
 image.image = [UIImage imageWithData:data]; 
```

# python - 正则表达式拆分的 maxsplit 功能

> ID：15676236
> 
> 赞同：4
> 
> 时间：2013-03-28T07:16:15.327
> 
> 标签：python, regex, string, split

我有一个这样的字符串

```
aa = 'nilesh-sharma-is-learning-python' 
```

现在我想将此字符串拆分为`-`分隔符并拆分`max_split`3 次。它可以很容易地做到这一点

```
In [35]: aa.split('-',3)
Out[35]: ['nilesh', 'sharma', 'is', 'learning-python'] 
```

使用正则表达式，我们也可以拆分字符串

```
In [36]: re.split('-',aa)
Out[36]: ['nilesh', 'sharma', 'is', 'learning', 'python'] 
```

`max_split`在 regex split 的情况下如何实现功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:17:56.337

根据[Docs](http://docs.python.org/2/library/re.html)，您也可以提供`maxsplit`参数。（第三个参数，或关键字`maxsplit`.

```
>>> import re
>>> aa = 'nilesh-sharma-is-learning-python'
>>> re.split('-', aa, maxsplit=3)
['nilesh', 'sharma', 'is', 'learning-python']
>>> 
```

[https://docs.python.org/3/library/re.html#re.split](https://docs.python.org/3/library/re.html#re.split)

# java - 如何将具有 <%some code %> 作为其名称的单选按钮传递给 java 操作类？

> ID：15676240
> 
> 赞同：1
> 
> 时间：2013-03-28T07:16:31.483
> 
> 标签：java, jsp-tags

这是我的 JSP 表单中的单选按钮：

```
<label>Present</label><input type = "radio" name = 'updateattendance +
<%=String.valueOf(search.getEmpId())%>' value = "present" />
<label>Absent</label><input type = "radio" name= 'updateattendance +
<%=String.valueOf(search.getEmpId())%>' value = "absent"/>` 
```

Java类中获取单选按钮值的常用方法如下：

```
String attStatus = request.getParameter("radiovalue"); 
```

`radiovalue`JSP 中单选按钮的名称属性在哪里。但是在我上面的代码中，单选按钮的名称有一些代码。

```
'updateattendance + <%=String.valueOf(search.getEmpId())%>' 
```

那么我应该如何在我的 Java 类中获取它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:33:47.763

您可以遍历参数名称并查找以“updateattendance”开头的参数。

这是代码示例：

```
Enumeration parameters = request.getParameterNames();
  while(parameters.hasMoreElements()) {
    String parameterName = parameters.nextElement().toString();
    if(parameterName.startsWith("updateattendance")){
       String parameterValue = request.getParameter(parameterName);
       // parameterValue is value of radio button parameter
    }
  } 
```

# android - 在android phonegap中使用jquery ajax从服务器获取数据

> ID：15676241
> 
> 赞同：6
> 
> 时间：2013-03-28T07:16:31.637
> 
> 标签：android, codeigniter, rest, jquery, cordova

嗨，我正在为 android 开发一个应用程序（使用 phonegap、html5 和 javascript），它将自身连接到远程 mysql 数据库。我创建了一个 RESTful (codeigniter) Web 服务来访问 mysql 数据库，然后 Android 应用程序可以调用 Web 服务来获取或发布数据到数据库，使用 XML 或 JSON 作为数据格式。

在使用 jquery ajax 的网络浏览器中，我成功地得到了结果，但在 android 应用程序中没有得到响应。

```
jQuery.ajax({
url : 'http://10.10.1.129/index.php/apiauth/auth/?'+jQuery("#form-login").serialize(),
async :true,
cache :false,
/*crossDomain : true,*/
dataType : 'jsonp',
success:function(data){
    alert(data);
    }  
}); 
```

在服务器中：

```
require APPPATH.'/libraries/REST_Controller.php';
    class Apiauth extends REST_Controller
    {
        function auth_get()
        {
            $this->load->model('mauth');
            $username   = $this->input->get('username') ? $this->input->get('username') : $this->get('username');
            $password   = $this->input->get('password') ? $this->input->get('password') : $this->get('password');
            $auth       = $this->mauth->getUserLogin('*',$username,$password);
            $row        = $auth->row();
            if($row){
                $data   = array('username'=>$row->username, 'fullname'=>$row->fullname,'error'=>FALSE);
            }else{
                $data   = array('error'=>true);
            }
            $this->response($data, 200);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T08:14:32.800

您是否添加了具有 ajax 请求中指定的 ip 地址的访问源？该文件位于您的 application-dir/res/xml/config.xml localhost 默认是允许的，但您需要在使用时添加其他主机。所以你的 config.xml 应该是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<!--
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<cordova>
    <!--
    access elements control the Android whitelist.
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->
    <access origin="http://10.10.1.129*"/> <!-- allow requests from your server -->

    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <access origin=".*"/>

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="false" />
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="Temperature" value="org.apache.cordova.TempListener"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
</plugins>
</cordova> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T06:17:41.587

`<access origin=".*"/>`根本没有用，我们必须输入我们在 ajax 请求期间调用的特定 url。

`<access origin="http://10.10.1.129"/>`这行得通。

# wpf - 选择 WPF 控件

> ID：15676244
> 
> 赞同：1
> 
> 时间：2013-03-28T07:16:46.080
> 
> 标签：wpf, wpf-controls

我需要为用户提供更改 NLog 规则的日志记录级别的选项。

有 12 条规则，每条规则都有自己的日志记录级别。

您可以推荐使用哪些控件来在 WPF 中提供此选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:22:53.677

我不熟悉 NLog，但我想如果你必须在少量预先确定的选项之间进行选择，那么 a`ComboBox`是最好的 UI 元素。

`ItemsControl`你说你有 12 个日志级别，所以在这种情况下，使用 an来实际显示这些项目而不是自己创建所有 UI 元素是最有意义的：

```
<Window x:Class="MiscSamples.LogLevelsSample"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LogLevels" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding LogRules}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Width="100" Margin="2" Text="{Binding Name}"/>
                    <ComboBox ItemsSource="{Binding DataContext.LogLevels, RelativeSource={RelativeSource AncestorType=Window}}"
                              SelectedItem="{Binding LogLevel}" Width="100" Margin="2"/>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
 public partial class LogLevelsSample : Window
    {
        public LogLevelsSample()
        {
            InitializeComponent();

            DataContext = new LogSettingsViewModel();
        }
    } 
```

视图模型：

```
 public class LogSettingsViewModel
    {
        public List<LogLevels> LogLevels { get; set; }

        public List<LogRule> LogRules { get; set; } 

        public LogSettingsViewModel()
        {
            LogLevels = Enum.GetValues(typeof (LogLevels)).OfType<LogLevels>().ToList();

            LogRules = Enumerable.Range(1, 12).Select(x => new LogRule()
                                                               {
                                                                   Name = "Log Rule " + x.ToString(),
                                                                   LogLevel = MiscSamples.LogLevels.Debug
                                                               }).ToList();
        }
    } 
```

数据项：

```
 public class LogRule
    {
        public string Name { get; set; }

        public LogLevels LogLevel { get; set; }
    }

    public enum LogLevels
    {
        Trace,
        Debug,
        Warn,
        Info,
        Error,
        Fatal
    } 
```

结果：

![在此处输入图像描述](../Images/4511bc0832fc7095bdc93172fb8651bb.png)

注意事项：

*   我看到您有几个未回答的 WPF 问题，您对此感到非常沮丧。不要这样。这是一个美丽而优秀的框架。我创建了这个例子，希望你能看到它真正的美。如果没有更多的代码和努力，您不可能在 winforms 中实现同样的示例。
*   看看这段代码实际上是多么的简单和漂亮。我正在广泛使用 WPF 的数据绑定功能，这让一切变得更容易。
*   请注意，没有一行代码引用或操作任何 UI 元素。我所做的只是创建适当的数据结构，然后创建适当的 UI 来显示/操作它。
*   数据和 UI 之间的“粘合剂”`DataContext`是属性，它是所有 XAML 绑定所针对的解析对象。
*   如果你来自 winforms 或其他传统背景，你真的需要忘记你所知道的一切并拥抱[MVVM](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)（点击链接它不是维基百科）。
*   同样，我不熟悉 NLog，所以我不确定我创建的数据结构是否符合您的需要。无论如何让我知道。
*   如果您需要进一步的帮助，请告诉我。我很乐意帮助您迈出 WPF 的第一步。

# java - 导出 Java 应用程序时保留 SQL 数据库？

> ID：15676248
> 
> 赞同：0
> 
> 时间：2013-03-28T07:17:13.957
> 
> 标签：java, mysql, database, netbeans, derby

我正在使用 Netbeans IDE，并且该应用程序在 Netbeans 中运行时运行良好。

基本上，当我将程序编译为 Jar 时，应用程序正常启动，但是当我尝试访问需要连接到数据库的程序部分时，没有输出。但是，在 Netbeans 中，我能够从数据库中获取输出。

当我在关闭数据库的情况下在 Netbeans 中运行应用程序时，出现错误：

```
java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect. 
```

如果数据库启动，则应用程序在 Netbeans 中正常工作。基本上我在问如何在 Netbeans 之外运行它。对不起一个新手问题:)

更新：

我去了项目的属性，编译库中的 Java DB 驱动程序似乎仍然不能在 Netbeans 之外工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:46.620

Derby 既可以作为嵌入式数据库运行，也可以作为客户端-服务器数据库运行。

下面是一组很棒的材料，可帮助您了解更多关于配置和运行 Derby 的基础知识：http: [//db.apache.org/derby/docs/10.9/getstart/cgstutorialintro.html](http://db.apache.org/derby/docs/10.9/getstart/cgstutorialintro.html)

# django - 为什么我不能编辑 css 文件并在 django 模板中使用 css？

> ID：15676253
> 
> 赞同：0
> 
> 时间：2013-03-28T07:17:21.623
> 
> 标签：django, static-files, appfog

所以我决定用 appfog 部署我的第一个 django 应用程序，在 appfog 中创建应用程序，下载源代码以便使用他们的项目结构，进行必要的更改和更新。一切都很顺利，直到我`python manage.py collectstatic`收集了所有的静态文件，但我无法更改静态文件，无法在模板中使用 css。我只是不明白为什么。在我的 settings.py

```
ROOT_PATH = os.path.dirname(__file__)
STATIC_ROOT = os.path.join(ROOT_PATH, 'static')
STATIC_DIR = /absolute/path/to/static 
```

在 urls.py

```
url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

我的项目结构是这样的，基本上是appfog的结构

```
-env
-.afignore
-settings.py
-templates
-static
-app1 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:22:22.080

你`run python manage.py collectstatic`什么时候会`create static folder`哪个`copy the files inside staticfiles folder`，对吧？

如果您想进行更改，请不要尝试在您的静态文件夹中进行更改。只需更改您的 staticfiles 文件夹中的文件。之后，运行 python manage.py collectstatic 以在您的静态文件夹中进行更新。

# redirect - 指向一个站点的特定语言的两个不同域

> ID：15676260
> 
> 赞同：2
> 
> 时间：2013-03-28T07:17:46.397
> 
> 标签：redirect, multilingual

我正在为客户开发一个博客，他需要它是双语的（英语和西班牙语）。现在他想要的是用户可以基于域以正确的语言获取内容；例如，John 进入`www.domain.com`并获得英语版本，Juan 进入`www.elsenordominio.com`获得西班牙语版本。

所有内容都将由 PHP 验证，因此用户和搜索引擎只读取与域相关的语言。

我需要什么才能使用标头重定向或`301`？对SEO有害吗？谷歌会惩罚我吗？

# javascript - 我应该使用 XmlHttpRequest POST 发送其他标头吗？

> ID：15676263
> 
> 赞同：1
> 
> 时间：2013-03-28T07:18:00.740
> 
> 标签：javascript, ajax, apache, post, xmlhttprequest

打开 XmlHttpRequest POST 连接后

```
var http = new XMLHttpRequest();
http.open("POST", url, true); 
```

[有些人](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)建议在发送请求之前包含这些额外的标头：

```
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close"); 
```

在 Apache+PHP 服务器上是否需要？没有这些标头，它在我的服务器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:40:06.880

您的代码在没有标题的情况下可以正常工作，因为`application/x-www-form-urlencoded`默认情况下`post content-type`您可以在控制台中看到它。但如果您`sending a file`必须将其专门设置为`multipart/form-data`仅服务器接受文件。此外，如果服务器没有发送正确的标题作为响应，它变得不可能从客户端读取响应的类型，例如在需要 json 响应的情况下，`APPLICATION/JSON`否则将被解释为`text/html`.

# bash - bash 将带星号的文件移动到另一个文件夹

> ID：15676268
> 
> 赞同：1
> 
> 时间：2013-03-28T07:18:33.543
> 
> 标签：bash, mv

我在尝试将具有类似措辞的文件夹中的文件删除到另一个文件夹时遇到问题....它吐出说没有这样的文件或目录...

这就是我正在做的事情：

```
mv "$OUTPUT_DIRECTORY/$RANDOM6* $OUTPUT_DIRECTORY/$YEAR/$MONTH/$DAY/" 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:40:13.053

您确实希望`$OUTPUT_DIRECTORY`在双引号中包含变量引用（例如 ），以防止 shell 过度解释其内容（例如，将空格视为分词符，而不仅仅是文件名的一部分），但您*不能*在源代码和源代码之间使用星号或空格引用的目的地，否则它们*将不会*被解释。所以这是我推荐使用的：

```
mv "$OUTPUT_DIRECTORY/$RANDOM6"* "$OUTPUT_DIRECTORY/$YEAR/$MONTH/$DAY/" 
```

请注意，第一个字符串部分是双引号（所有带有变量的部分），部分不加引号（星号）。这使得 shell 在字符串的每个部分应用适当的解释级别和类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:32:32.423

编程是否糟糕，但这有效，我只需要删除引号：

```
mv $OUTPUT_DIRECTORY/$RANDOM6* $OUTPUT_DIRECTORY/$YEAR/$MONTH/$DAY/ 
```

所有变量都是事先发出的......

# search - 如何更换 通过 é 在 vi m 中

> ID：15676270
> 
> 赞同：0
> 
> 时间：2013-03-28T07:18:41.373
> 
> 标签：search, vim, utf-8, ansi

我想用“é”搜索并替换“< *e9* >”。

> :%s/< *e9* >/é/g

不起作用，但 < *e9* > 似乎 vim 特殊字符

> / ctrl+v xe9

只找到正确的“é”而不是“< *e9* >”

如果我在 < *e9* > 上并且我输入 :ascii 我得到了这个结果：

> <é> 233，六进制 00e9，八进制 351

如果我在“é”上并且我输入 :ascii 我得到了这个结果：

> <é> 233，六进制 00e9，八进制 351

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:37:06.227

您的文本已经包含正确的`é`字符（如`:ascii`命令所示），只是 Vim 没有那样显示它。（您可以使用另一个文本列表器/编辑器进行验证。）

字符的显示方式由`'isprint'`选项控制。它的帮助说：

> 当 'encoding' 是 Unicode 时，从 128 到 255 的非法字节显示为`<xx>`，字节的十六进制值。

因此，假设您没有更改 'isprint' 值，您可能会遇到编码检测问题。查看

```
:set encoding? fileencodings? fileencoding? 
```

并且正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:38:05.340

AFAIK`<e9>`是一个因编码转换而损坏的单个字符。

在命令模式下，当您的光标位于`<e9>`give command上时`yl`。这会将字符拉到缓冲区。然后通过给出命令搜索被拉出的字符`/<C-R>-`（这涉及进入搜索模式，按下`CTRL+R`并按下`-`。）您的搜索应该找到`<e9>`文本中的所有字符。最后使用最后的搜索结果进行替换：

```
%s//é/g 
```

# rabbitmq - 如何使用 RabbitMQ 管理消费者的顺序工作？

> ID：15676279
> 
> 赞同：1
> 
> 时间：2013-03-28T07:19:34.923
> 
> 标签：rabbitmq

我正在使用 RabbitMQ 处理大量数据。我有三种类型的消费者：`downloader, extracter`和`importer`。它们必须按照我上面提到的顺序依次工作，例如，`downloader`将下载一堆文件，传递给`extracter`它们，在提取它们之后，`importer`应该将文件中的信息导入数据库。我的问题是如何实现这种功能？这是将消息从( )放入`extracter`' 队列的好方法吗？还是有另一种解决方案？`downloader``consumer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:34:21.680

这似乎是使用三个独立队列的好案例。您将有一个`download`队列，一个`extraction`队列和一个`import`队列。

每个队列的消费者将负责在完成工作后将消息放入管道中的下一个队列。

所以工作流程看起来像这样（队列前缀`queue.`以使其明显）：

```
??? -> queue.download
queue.download -> downloader -> download complete -> queue.extraction
queue.extraction -> extracter -> extraction complete -> queue.import
queue.import -> importer -> import complete -> ??? 
```

有几点需要注意：

*   您需要一些东西来将消息放入`download`队列以启动。
*   您可以轻松地在管道中添加其他步骤——想要添加一个`compression`步骤（例如）？让下载器将消息放入`compression`队列，然后在该步骤完成后，将消息放入`extraction`队列。
*   您可以轻松地在管道的任何阶段进行水平扩展。下载时间太长？启动更多`downloader`从同一工作队列中提取消息的实例。

希望这可以帮助！

# ruby-on-rails - 使用独角兽启动 Rails 应用程序时抛出异常 NameError、LoadError

> ID：15676293
> 
> 赞同：0
> 
> 时间：2013-03-28T07:20:41.353
> 
> 标签：ruby-on-rails, unicorn

*我们在使用 unicorn启动*我们的 rails 应用程序时遇到 NameError、LoadError 问题（例如 unicorn -p 3000）。这开始突然发生，我该如何避免这个问题。

[http://pastie.org/7146907](http://pastie.org/7146907)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:15:13.463

你先跑了`bundle install`吗？您还应该使用`bundle exec unicorn ...`.

# wpf - wpf如何将一个网格分配给另一个网格

> ID：15676294
> 
> 赞同：0
> 
> 时间：2013-03-28T07:20:45.070
> 
> 标签：wpf, grid

我想先定义一个用户控件，它里面包含一个网格（这个网格包含一个数据网格和一些其他控件）。

然后在另一个窗口中，我想直接使用那个网格，可以吗？

编辑：在那个窗口中，我不想只使用那个网格（因为我还想在那个窗口中显示其他东西），所以我不能将它的内容设置为那个用户控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:22:51.637

是的。制作一个用户控件并将该网格（及其内容）作为用户控件的子级。然后在任何可以使用该用户控件的地方。

要定义用户控件：

1.  我在解决方案中的项目下方创建了一个新文件夹。此文件夹的名称是`UserInterface`（您可以将其他用户控件和窗口放在此文件夹中）

2.  右键单击此文件夹并创建一个新的用户控件（名为`UserControl`）并将您想要的任何内容放入其中。此用户控件的默认名称空间是`[YourProjectName].UserInterface`（这里我的项目名称是`WpfApplication`）

3.  现在在`MainWindow`（或您将要使用此用户控件的任何窗口）中添加正确的名称空间，如下所示：

    ```
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Title="MainWindow" Height="350" Width="525"
         xmlns:myNamespace="clr-namespace:WpfApplication1.UserInterface">
     <Grid>
         <myNamespace:UserControl1 x:Name="myUserControl"/>
      </Grid> 
    ```

# android - EditText 的可见滚动条

> ID：15676295
> 
> 赞同：2
> 
> 时间：2013-03-28T07:20:48.393
> 
> 标签：android, android-edittext, scrollbar

我知道如何`EditText`通过设置使滚动

```
 e=(EditText)findViewById(R.id.editText2);
    e.setScroller(new Scroller(AndroidExplorer.this)); 
    e.setVerticalScrollBarEnabled(true); 
    e.setMovementMethod(new ScrollingMovementMethod()); 
```

但它只是显示一个滚动条。我如何使用该滚动条滚动，如何实现？

现在我可以通过滚动我的edittext来滚动，滚动条也随之移动。但我需要使用滚动条滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:05:05.503

您需要设置以下内容：

```
android:fadeScrollbars="false"         //in XML 
```

或者

```
e.setScrollbarFadingEnabled(false);    //in code 
```

# html - Webkit (Chrome & Safari) 溢出后留下伪影：对隐藏可见

> ID：15676298
> 
> 赞同：1
> 
> 时间：2013-03-28T07:21:07.730
> 
> 标签：html, css, webkit

当您使用覆盖和溢出将鼠标悬停在缩略图上时，我试图获得全尺寸图像：隐藏和可见。

它在 Firefox 和 IE 中运行良好，但 Chrome 和 Safari 却一团糟。你可以在这里看到它 [Webkit artefact](http://www.galadai.com/artefacts.html)

这是我正在使用的 CSS：

```
.img-thumb
{
    position:relative;
    height:60px;
    width:60px;
    overflow:hidden;
    padding:5px;
    font-family:Comic Sans MS, cursive, sans-serif;
    font-size:14px;
}
.img-full
{
    position:absolute;
    display:none;
    top:0px;
    left:0px;
}
.img-thumb:hover .img-full
{
    display:block;
    z-index:10;
}
.img-thumb:hover
{
    overflow:visible;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T19:43:13.650

我有同样的问题，但使用 JS/jQuery 解决：

例如：

```
$(".img-thumb").hover(
  function () {
    $(".img-thumb > .img-full").show();
  },
  function () {
    $(".img-thumb > .img-full").fadeOut(1);
  }
); 
```

fadeOut(1) 使元素在 1ms 内淡出，因此用户无法注意到效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:27:10.100

我在这里看到的唯一选择（作为部分解决方法）是为悬停的 img-thumb 容器分配适当的高度（这允许浏览器准确地知道鼠标移出时要清除的框）。

```
.img-thumb:hover
{
    overflow:visible;
    height: 500px; /* when added clears the artefacts - but total height of hover must be known as set here and shall not change */
} 
```

请参阅[http://jsfiddle.net/YqSVP/](http://jsfiddle.net/YqSVP/)作为查看修复的工作示例 - 仅当悬停高度已知并且可以在 css 中固定为某个值时才足够。

在我看来，webkit 对框鼠标的清理过程进行了过多的优化，并且在清理框时忽略了绝对定位的子项 - 尽管悬停时的显示效果很好（我敢打赌这是 webkit 中的一些错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:59:07.083

该错误似乎取决于`position: absolute`（我已经尝试过`position: relative`，并且错误也出现了。）对于`.img-full`.

当然，制作它`position: static`（或简单地删除`position: absolute`）会使`overflow: hidden`工作正常，但你会遇到定位你的`.img-full`.

# c# - ASP.net Gridview 复选框勾选/取消勾选更新

> ID：15676304
> 
> 赞同：1
> 
> 时间：2013-03-28T07:21:39.613
> 
> 标签：c#, asp.net, gridview

我在 ASP.NET 中有一个 Gridview，我需要在其中包含 gridview 的复选框和一个更新按钮。在选中特定行的复选框时，应触发更新事件并单击更新按钮应保存更改。我已经编写了 C# 代码来更新 Gridview 而不使用复选框。但是，当包含复选框时无法继续。网格视图设计代码是：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label ID="Label1" runat="server" Text="Employee ID"></asp:Label>
        <asp:TextBox ID="TextBox1" runat="server" style="margin-left: 110px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label2" runat="server" Text="Employee Name"></asp:Label>
        <asp:TextBox ID="TextBox2" runat="server" style="margin-left: 90px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label3" runat="server" Text="Employee Experience"></asp:Label>
        <asp:TextBox ID="TextBox3" runat="server" style="margin-left: 61px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label4" runat="server" Text="Employee Address"></asp:Label>
        <asp:TextBox ID="TextBox4" runat="server" style="margin-left: 79px"></asp:TextBox>
        <br />
        <br />
        <asp:Button ID="Button2" runat="server" onclick="Button2_Click" 
            style="text-align: left" Text="Submit" />
    <asp:GridView ID="EmployeeGridView" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="Emp_id" onrowcancelingedit="EmployeeGridView_RowCancelingEdit" 
            onrowediting="EmployeeGridView_RowEditing" 
            onrowdeleting="EmployeeGridView_RowDeleting" 
            onrowupdating="EmployeeGridView_RowUpdating" AllowPaging="True" CellPadding="4" 
            ForeColor="#333333" GridLines="None" 
            onpageindexchanging="EmployeeGridView_PageIndexChanging" 
            Width="408px" AllowSorting="True" 
            onselectedindexchanged="EmployeeGridView_SelectedIndexChanged">   
        <AlternatingRowStyle BackColor="White" />
    <Columns>
    <asp:TemplateField HeaderText="Sr.No">
    <ItemTemplate><%#Container.DataItemIndex+1 %></ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Name">
    <ItemTemplate><%#Eval("Emp_name") %></ItemTemplate>
    <EditItemTemplate>
    <asp:TextBox ID="txtempname" runat="server" Text='<%#Eval("Emp_name") %>'></asp:TextBox>
    </EditItemTemplate>
    </asp:TemplateField>    
     <asp:TemplateField HeaderText="Experience">
    <ItemTemplate><%#Eval("Emp_exp") %></ItemTemplate>
    <EditItemTemplate>
    <asp:TextBox ID="txtempexp" runat="server" Text='<%#Eval("Emp_exp") %>'></asp:TextBox>
    </EditItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Address">
    <ItemTemplate><%#Eval("Emp_address") %></ItemTemplate>
    <EditItemTemplate>
    <asp:TextBox ID="txtempaddress" runat="server" Text='<%#Eval("Emp_address") %>'></asp:TextBox>
    </EditItemTemplate>
    </asp:TemplateField>

  <asp:CommandField ShowEditButton="true" ButtonType ="Button" 
            ItemStyle-ForeColor= "Aqua">
<ItemStyle ForeColor="Aqua"></ItemStyle>
        </asp:CommandField>
  <asp:CommandField ShowDeleteButton="true" ButtonType="Button" HeaderText="Delete" />  
    </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerSettings FirstPageText="First" LastPageText="Last" 
            Mode="NumericFirstLast" PageButtonCount="4" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>

    </div>
    <asp:Button ID="Button1" runat="server" Text="Update" />
    </form>
</body>
</html> 
```

C#代码后面是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class _Default : System.Web.UI.Page
{
    string connstr = @"Data Source=xxxxxxx\SQLEXPRESS;Initial Catalog=xxxxxxxxx;Integrated Security=True";
    protected void EmployeeGridView_Sorting(object sender, GridViewSortEventArgs e)
    {
        Session["sortBy"] = e.SortExpression;
        FillGrid();
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        Session["sortBy"] = null;
        if (!Page.IsPostBack)
        {
            FillGrid();
        }
    }
    public void FillGrid()
    {
        SqlConnection con = new SqlConnection(connstr);
        con.Open();
        SqlCommand cmd = new SqlCommand("GetEmployeeInfo", con);
        SqlDataReader dr = cmd.ExecuteReader();//it reads froword only data from database
        DataTable dt = new DataTable();//object of data table that uses to conatin whole data
        dt.Load(dr);//Sql Data reader data load in data table it is DataTable Method.
        EmployeeGridView.DataSource = dt;
        EmployeeGridView.DataBind();

    }
    protected void EmployeeGridView_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        EmployeeGridView.EditIndex = -1;
        FillGrid();

    }
    protected void EmployeeGridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        EmployeeGridView.EditIndex = e.NewEditIndex;
        FillGrid();
    }

    protected void EmployeeGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        int empid = Convert.ToInt32(EmployeeGridView.DataKeys[e.RowIndex].Value.ToString());//Get Each Row unique value from DataKeyNames
        string name = ((TextBox)EmployeeGridView.Rows[e.RowIndex].FindControl("txtempname")).Text;//get TextBox Value in EditItemTemplet that row is clicked
        string experience = ((TextBox)EmployeeGridView.Rows[e.RowIndex].FindControl("txtempexp")).Text;
        string address = ((TextBox)EmployeeGridView.Rows[e.RowIndex].FindControl("txtempaddress")).Text;
        SqlConnection con = new SqlConnection(connstr);
        con.Open();
        SqlCommand cmd = new SqlCommand("EmployeeUpdate", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@emp_id ", empid);
        cmd.Parameters.AddWithValue("@emp_name ", name);
        cmd.Parameters.AddWithValue("@emp_exp ", experience);
        cmd.Parameters.AddWithValue("@emp_address ", address);
        cmd.ExecuteNonQuery();//Sql Command Class method return effected rows use for insert,update, delete
        EmployeeGridView.EditIndex = -1;// no row in edit mode
        FillGrid();
    }
    protected void EmployeeGridView_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        int empid = Convert.ToInt32(EmployeeGridView.DataKeys[e.RowIndex].Value.ToString());
        SqlConnection con = new SqlConnection(connstr);
        con.Open();
        SqlCommand cmd = new SqlCommand("DeleteEmployee", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@emp_id ", empid);
        cmd.ExecuteNonQuery();
        FillGrid();

    }
    protected void EmployeeGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        EmployeeGridView.PageIndex = e.NewPageIndex;
        FillGrid();

    }
    private void UpdateOrAddNewRecord(string Emp_id, string Emp_name, string Emp_exp, string Emp_address)
    {
        SqlConnection con = new SqlConnection(connstr);
        string sqlStatement = string.Empty;
        sqlStatement = "INSERT INTO tbl_employee" +
                       "(Emp_id, Emp_name, Emp_exp, Emp_address)" +
                       "VALUES (@Emp_id, @Emp_name, @Emp_exp, @Emp_address)";
        con.Open();
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        cmd.Parameters.AddWithValue("@Emp_id", Emp_id);
        cmd.Parameters.AddWithValue("@Emp_name", Emp_name);
        cmd.Parameters.AddWithValue("@Emp_exp", Emp_exp);
        cmd.Parameters.AddWithValue("@Emp_address", Emp_address);
        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
        con.Close();
    }
    protected void Button2_Click(object sender, EventArgs e)
    {
        UpdateOrAddNewRecord(TextBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text);
        FillGrid();
    }
} 
```

我没有保留 DeleteEmployee、EmployeeUpdate、GetEmployeeInfo 存储过程的代码。

在上面的代码中，我需要为 gridview 插入复选框并更新检查的项目，而不是单击编辑按钮然后更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:50:57.607

在单击更新按钮时执行这些操作。循环遍历网格的每一行。在每一行中，获取相应的复选框检查 CheckedBox 是否已选中如果已选中，则从当前行检索其他值并调用您的更新方法。

```
 for (int innercounter = 0; innercounter < grid.Rows.Count; innercounter++)
 {
CheckBox chkSelect;
chkSelect = (CheckBox)grid.Rows[innercounter].Cells[0].FindControl("ChkSelect");
if (chkSelect.Checked == true)
  {
     Label Field1 = (Label)grid.Rows[innercounter].Cells[1].FindControl("txtFieldName1");
     Label Field2 = (Label)grid.Rows[innercounter].Cells[2].FindControl("txtFieldName2");
     Update(Field1.text,Field2.text)
  }

} 
```

# javascript - Facebook、Twitter 与 Phonegap 应用程序集成，无需使用插件

> ID：15676306
> 
> 赞同：0
> 
> 时间：2013-03-28T07:21:49.227
> 
> 标签：javascript, facebook, cordova, plugins, twitter

我正在为多个平台开发一个**Phonegap 应用程序。**

我需要整合**社交网站（Facebook 和 Twitter）**。

我可以使用**Plugins**进行集成，但我不想为这些使用**Plugins**，因为我也必须为不同版本创建插件。

因此，任何想法都可以为这些功能的 phonegap 应用程序集成**Javascript代码，这样我们就可以通过使用单个****HTML、Javascript**文件轻松地在多个平台上工作。

急需这个答案。任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:53:48.380

1.  使用 Facebook 的 Javascript API：[单击此处](https://developers.facebook.com/docs/reference/javascript/)
2.  使用 Twitter 的 jQuery API：[点击这里](https://code.google.com/p/jquery-twitter-api/)

# android - 如何在android中单击按钮时加载gif文件？

> ID：15676307
> 
> 赞同：0
> 
> 时间：2013-03-28T07:21:56.153
> 
> 标签：android, android-canvas

我是安卓的新手。我想`gif`在按钮单击时加载或播放图像。`gif`我在布局上加载了这两个文件。但是当我单击下一个按钮时，将播放下一个图像，在这里我们为按钮单击编写 setonclickListener .... 如何`gif`在 android 中单击按钮时播放图像。如果你知道请告诉我。

这是我的代码..

```
package com.androidqa;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Movie;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class AnimationView extends View 
{
    private Movie mMovie,mMovie1;
    private long mMovieStart;
    private long mMovieStart1;
    Button btnFirst,btnSecond;
    private static final boolean DECODE_STREAM = true;
    private static byte[] streamToBytes(InputStream is) 
    {
    ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
     byte[] buffer = new byte[1024];
     int len;
     try 
     {
        while ((len = is.read(buffer)) >= 0) {
          os.write(buffer, 0, len);
        }
      } catch (java.io.IOException e) {
      }
      return os.toByteArray();
    }
    @SuppressWarnings("unused")
    private static byte[] streamToBytes1(InputStream is1) 
    {
    ByteArrayOutputStream os1 = new ByteArrayOutputStream(1024);
     byte[] buffer1 = new byte[1024];
     int len;
     try 
     {
        while ((len = is1.read(buffer1)) >= 0) {
          os1.write(buffer1, 0, len);
        }
      } catch (java.io.IOException e) {
      }
      return os1.toByteArray();
    }

     public AnimationView(Context context,AttributeSet attrs) 
     {
      super(context,attrs);
      setFocusable(true);
      java.io.InputStream is;
      java.io.InputStream is1;
      is = context.getResources().openRawResource(R.drawable.th_welcome);
      is1 = context.getResources().openRawResource(R.drawable.animimage);
      if (DECODE_STREAM) 
      {
        mMovie = Movie.decodeStream(is);
        mMovie1=Movie.decodeStream(is1);
      } else 
      {
        byte[] array = streamToBytes(is);
        mMovie = Movie.decodeByteArray(array, 0, array.length);
        byte[] array1 = streamToBytes1(is1);
        mMovie1= Movie.decodeByteArray(array1, 0, array1.length);
      }
    }
    @Override
    public void onDraw(Canvas canvas) 
    {
     long now = android.os.SystemClock.uptimeMillis();

      if (mMovieStart == 0) { // first time
        mMovieStart = now;
      }
      if (mMovie != null) 
      {
        int dur = mMovie.duration();
        if (dur == 0) {
          dur = 3000;
        }
        int relTime = (int) ((now - mMovieStart) % dur);
       Log.d("", "real time :: " +relTime);
        mMovie.setTime(relTime);
        mMovie.draw(canvas, getWidth() - 200, getHeight()-200);
        invalidate();
      }
      if (mMovieStart1 == 0) { // first time
          mMovieStart1 = now;
        }
        if (mMovie1 != null) 
        {
          int dur = mMovie1.duration();
          if (dur == 0) {
            dur = 3000;
          }
          int relTime = (int) ((now - mMovieStart1) % dur);
         Log.d("", "real time :: " +relTime);
          mMovie1.setTime(relTime);
          mMovie1.draw(canvas, getWidth() - 200, getHeight()-200);
          invalidate();
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:47:10.667

Android 不支持播放动画 GIF 文件。如果您需要播放它们，则需要将它们分成帧，并一帧一帧地为每一帧设置动画。

另请参阅下面的链接以了解更多信息：-

[如何在 Android 中播放 GIF 文件？](https://stackoverflow.com/questions/7306846/how-to-run-gif-file-in-android)

[是否可以在 Android 中播放 GIF 格式？](https://stackoverflow.com/questions/3163706/is-it-possible-to-play-gif-format-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T20:19:34.707

在您的 MainActivity 中编写处理按钮单击的代码。IE：

```
static boolean clicked = false;

public void onClick(View v) {

clicked = true;
AnimationView.invalidate();

/* When I am referring to AnimationView, I mean the name of your AnimationView and not the class. */

} 
```

并在您的 onDraw 方法中创建一个 if 语句，说明仅当单击为 true 时视图才无效。

祝你好运

# android - 使用 DOM 解析器进行解析

> ID：15676308
> 
> 赞同：0
> 
> 时间：2013-03-28T07:22:02.550
> 
> 标签：android, web-services, xml-parsing

```
 Visit_all_class parser = new Visit_all_class(); 
        String xml = parser.Call3(URL); // getting XML 
        Document doc = parser.getDomElement(xml); // getting DOM element 

        NodeList nl = doc.getElementsByTagName(KEY_VISIT); 

        // looping through all item nodes <item> 
        for (int i = 0; i < nl.getLength(); i++) { 
            // creating new HashMap 

            HashMap<String, String> map = new HashMap<String, String>(); 
            Log.v("map","map" +map);
            Element e = (Element) nl.item(i); 
            // adding each child node to HashMap key => value 
            map.put(KEY_ACCOUNTNUMBER, parser.getValue(e, KEY_ACCOUNTNUMBER)); 
            map.put(KEY_LOCATION, parser.getValue(e, KEY_LOCATION)); 
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME)); 
            map.put(KEY_VISITID, parser.getValue(e, KEY_VISITID)); 
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_LAST, parser.getValue(e, KEY_LAST));
            map.put(KEY_PLANNED, parser.getValue(e, KEY_PLANNED));
            map.put(KEY_COMPLETION, parser.getValue(e, KEY_COMPLETION));
            map.put(KEY_START, parser.getValue(e, KEY_START));
            map.put(KEY_STATUS, parser.getValue(e, KEY_STATUS));

            // adding HashList to ArrayList 
            menuItems1.add(map); 
```

我已经解析了来自 web 服务的值并将其放在 menuItems 中。但是，我想从 web 服务中单独解析值并将其传递给为数据库创建的方法。

请建议如何从 web 服务中单独解析值的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:04:07.067

这取决于如何`org.w3c.dom.Document`格式化，但您使用`org.w3c.dom.Node`接口中的方法。见[这里](http://developer.android.com/reference/org/w3c/dom/Node.html)。

例如，如果您希望 XML 的格式如下：

```
...
<visit>
    <account_no>1234</account_no>
    <location>www.example.com/locaiton1</location>
    <name>Ammu</name>
</visit>
<visit>
    <account_no>4321</account_no>
    <location>www.example.com/locaiton2</location>
    <name>William</name>
</visit>
... 
```

你会这样做：

```
Element e = (Element) nl.item(i); 
int accountNo = (int) e.getChildNodes().item(0).getTextContent();
String location = e.getChildNodes().item(1).getTextContent();
String name = e.getChildNodes().item(2).getTextContent(); 
```

# dynamics-crm-2011 - 从分配的活动返回到我的活动区域

> ID：15676311
> 
> 赞同：0
> 
> 时间：2013-03-28T07:22:22.757
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

**我在“等待批准**”中创建一个活动并将其分配给另一个队友。如果我的队友被“批准”了分配的活动。那时**我如何将同一个活动返回到我的活动区域并获得批准状态CRM 2011** .How to Do this,这意味着什么是工作流程？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:16:01.773

听起来您需要一个在状态更改时运行的工作流，它检查状态现在是否为“已批准”并重新分配活动。在所描述的场景中，您只需将 Campaign 重新分配回创建它的用户即可。

为了更加灵活，您可以向 Campaign 实体添加自定义查找字段/关系。当分配了活动或状态更改时，请检查状态现在是否为“等待批准”。如果是这样，请将“上次修改者”用户存储在自定义字段中。然后，当您再次重新分配时，对这个用户执行此操作，而不是由用户创建。

# apache - http请求头中地址为192.168.0.0网络的IP地址

> ID：15676312
> 
> 赞同：0
> 
> 时间：2013-03-28T07:22:24.970
> 
> 标签：apache, http, http-headers, ip, mod-perl

在 Apache 1.3 中使用 mod_perl。客户端地址获取标头 X-Forwarded-For、HTTP_X_FORWARDED_FO 或环境变量 $ENV{REMOTE_ADDR}：

```
sub address {
    my $self = shift;
    unless(defined $self->{address}){
        my $header = $self->apache->headers_in->{'X-Forwarded-For'} ||
            $ENV{HTTP_X_FORWARDED_FOR} || '';
        my ($ip) = $header =~ /([^,\s]+)$/;
        $self->{address} = $ip || $ENV{REMOTE_ADDR} || ''; 
    }
    return $self->{address};
} 
```

问题是有时会有192.168.200.11、192.168.1.156、192.168.0.73等地址。虽然服务器没有连接到网络 192.168.0.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:28:04.910

当您明确查看[HTTP_X_FORWARDED_FOR](http://en.wikipedia.org/wiki/X-Forwarded-For)标头时，预期该标头（如果所有代理都正确设置）将包含所有中间 IP 和原始客户端 IP。由于大多数人都在本地家庭网络中，因此大多数原始 IP 都在 192.168.xx.xx 范围内。

# ios - 如何在 iOS 中从 sqlite 复制和粘贴整行数据？

> ID：15676326
> 
> 赞同：0
> 
> 时间：2013-03-28T07:23:36.880
> 
> 标签：ios, sqlite, copy-paste

我想将表数据从 1 id 复制并粘贴到 sqlite 中的另一个 id。我在 iOS 上使用 sqlite。我有一个 ID 为 1 的类别 X，另一个是 ID 为 2 的 Y。X 在树中有 n 级数据，我想复制 X 的整个树并粘贴 ID 为 2 的 Y。

在 iOS 中怎么可能？

# python - 如何在python中解析google-blogger中的xml文件？

> ID：15676333
> 
> 赞同：3
> 
> 时间：2013-03-28T07:24:34.220
> 
> 标签：python, xml, parsing

我有一个[xml 文件](http://s.yunio.com/bmCS5h)。
这是我在 Google-blogger 中的文件列表，我如何在 python 中解析它以获取每篇文章？请给我正确的代码，它可以得到准确的结果。

```
import feedparser
d = feedparser.parse('blog.xml')
for entry in d.entries:
    print entry.content[0]['value'] 
```

我在 google-blogger 中获取了我所有的文章，但是文件的格式很乱，我可以只得到 woeds 来删除输出中的 html 标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:50:28.927

那是一个[Atom 提要](http://en.wikipedia.org/wiki/Atom_(standard))；使用[feedparser](http://pythonhosted.org/feedparser/)将该文件解析为单独的文章。

```
import feedparser
d = feedparser.parse('/path/to/your/xmlfile.xml')
for entry in d.entries:
    print entry.title 
```

这打印：

```
模板: R
为此博客设置的发布类型。
此博客管理员的电子邮件列表。
此博客是否包含成人内容
是否允许使用备用的 JS 渲染
博客的 Google Analytics（分析）帐号
存档索引日期格式的编号
此博客的存档频率应该为多少
有权进行发布的作者的电子邮件列表。
是否在博客中显示评论反向链接
是否为每个帖子提供存档页
哪些人能发表评论
是否要求评论者完成 Captcha
用于接收新评论通知的电子邮件地址列表
为博客评论所提供的 Feed 类型
博客评论表位置
博客评论消息
是否启用评论审阅
新评论进行审阅的天数
用于接收需要审阅新评论的通知的电子邮件地址 
```

等等

您可以通过查看`.keys()`方法的结果来查看每个条目定义的项目：

```
>>> d.entries[0].keys()
['updated', u'gd_image', 'updated_parsed', 'published_parsed', 'tags', 'title', 'links', 'summary', 'content', 'guidislink', 'title_detail', 'link', 'author', 'published', 'authors', 'author_detail', 'id'] 
```

如果要将 HTML 内容转换为文本，有几个选项。大多数列在： [Extracting text from HTML file using Python](https://stackoverflow.com/questions/328356/extracting-text-from-html-file-using-python)

# highcharts - SQL Server2008 输入到 Asp Not Net 代码示例中的 Highcharts

> ID：15676335
> 
> 赞同：1
> 
> 时间：2013-03-28T07:24:41.197
> 
> 标签：highcharts, dotnethighcharts

我是 Asp.Net 的新手。我想将来自 SQL Server 2008 的数据绘制到 Highcharts 中。示例代码将不胜感激。我在网上看到的关于这个主题的大多数示例代码都不起作用。谢谢！

# java - java.lang.IllegalStateException：已经在使用输出流

> ID：15676337
> 
> 赞同：5
> 
> 时间：2013-03-28T07:25:05.303
> 
> 标签：java, jsp, servlets, outputstream, illegalstateexception

当用户单击按钮时，客户端浏览器上的 Windchill GUI 应下载到他的系统上。我通过使用以下代码实现了这一点。

```
 <body>
    <%
    String pdfname=   session.getAttribute("pdfname").toString();
    String Pdfpath=   session.getAttribute("pdfpath").toString();
    File f =new File(Pdfpath);
     Boolean flag=false;
      if(f.exists())
      {
     BufferedInputStream filein = null;
     BufferedOutputStream out2=null;
    try {
    File file = new File(Pdfpath);//specify the file path
    byte b[] = new byte[1048576];
    int len = 0;
    filein = new BufferedInputStream(new FileInputStream(file));
    out2=new BufferedOutputStream(response.getOutputStream());
    response.setHeader("Content-Length", ""+file.length());
    response.setContentType("application/pdf");
    response.setHeader("Content-Disposition","attachment;filename="+pdfname);
    response.setHeader("Content-Transfer-Encoding", "binary");
    while ((len = filein.read(b)) > 0) {
    out2.write(b, 0, len);
    out.println("Your Pdf Document Is Generated Please close it");
    }
    filein.close();
    out2.flush();
    out2.close();
  }
    catch(Exception e)
{
    out.println(e);
    }

      }else{

        String error ="File Not Found Or File Has Bean Deleted Already";
        request.setAttribute("error", error);
        RequestDispatcher s = request.getRequestDispatcher("NoFile.jsp");
                s.forward(request, response);
    }
     %>
    </body> 
```

此代码工作正常，文件正在下载，但之后它会引发异常。以下是我的方法服务器日志

```
ERROR : org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/Windchill].[jsp]  - Servlet.service() for servlet jsp threw exception
Thu 3/28/13 12:29:07: TP-Processor7: java.lang.IllegalStateException: Already using output stream
Thu 3/28/13 12:29:07: TP-Processor7:    at wt.servlet.CompressionFilter$GzippingResponse.getWriter(CompressionFilter.java:860)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:173)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.runtime.JspWriterImpl.close(JspWriterImpl.java:187)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jsp.netmarkets.jsp.gt.get_jsp._jspService(get_jsp.java:105)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
Thu 3/28/13 12:29:07: TP-Processor7:    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
Thu 3/28/13 12:29:07: TP-Processor7:    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
Thu 3/28/13 12:29:07: TP-Processor7:    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
Thu 3/28/13 12:29:07: TP-Processor7: ...... 
```

……

谷歌有很多关于这个例外的帖子，但我无法清除我的错误。我也尝试在 servlet 而不是 jsp 中添加它。这也显示了同样的异常。这种方式对于下载文件是否正确，或者我的方式错误？我需要帮助

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T08:16:11.713

您不能同时使用`getServletOutputStream()`和`getWriter()`在相同的响应中。

来解决你的问题。避免在 JSP 中编写 scriptlet。无论你在 JSP 中做什么，都在 Servlet 中实现它。

您`response.getOutputStream();`在 JSP 中调用这是非法的。您应该使用`ServletResponse.getOutputStream()`或`ServletResponse.getWriter()`。由于 JSP 默认使用 ServletResponse.getWriter()。您应该写入 ServletResponse.getWriter() 而不是 ServletResponse.getOutputStream()

这就是 Java Doc 所说的：

> ## 获取输出流...
> 
> ### ServletOutputStream getOutputStream() 抛出 IOException
> 
> 返回适合在响应中写入二进制数据的 ServletOutputStream。servlet 容器不对二进制数据进行编码。
> 
> 在 ServletOutputStream 上调用 flush() 会提交响应。可以调用此方法或 getWriter() 来编写正文，而不是两者。
> 
> 返回：用于写入二进制数据的 ServletOutputStream **抛出：IllegalStateException - 如果已在此响应上调用 getWriter 方法**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:31:14.383

似乎从这一行引发了异常。

```
out.println(e); 
```

如果您在编写过程中将 PDF 作为应用程序发送的代码失败，那么它将抛出异常，并且在尝试使用上述行打印异常时，输出输入流已经被使用。

不要在 JSP 中混合 UI 和业务逻辑。使用 Servlet 来完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:33:56.193

你有`</body>`你的脚本。它会在响应输出流中打印一些内容，但您之前已经关闭了那个。

`<body>`当您真正想要做的是将 PDF 流式传输回客户端时，在您的响应中包含标签有什么意义？

# mongodb - 为什么 mongo db serverStatus 连接当前不等于 netstat 计数

> ID：15676338
> 
> 赞同：3
> 
> 时间：2013-03-28T07:25:13.627
> 
> 标签：mongodb

正如问题所说

我登录了 mongos，做了一个 db.serverStatus().connections，如下所示

```
mongos> db.serverStatus().connections
{ "current" : 110, "available" : 19890 } 
```

但是，当我使用

```
$ sudo netstat -nap | grep mongos -c
  1369 
```

如您所见，它的计数是 1387

并且

```
$ sudo netstat -nap | grep mongos | grep ESTABLISHED -c
1366 
```

我的问题是：为什么这两个计数不一样（甚至相似）？？？

请给我指路，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:52:09.570

`netstat`可能正在计算卡在关闭状态、超时等的连接。

显示什么`netstat -nap | grep mongos | grep ESTABLISHED`？

# class - 类中的逻辑 SELECT-OPTIONS

> ID：15676341
> 
> 赞同：1
> 
> 时间：2013-03-28T07:25:47.687
> 
> 标签：class, if-statement, conditional, selection, abap

`SELECT-OPTIONS`我遇到了通过语句在类方法中构建复杂逻辑条件的问题：

```
IF col IN seltab.
  ...logic....
ENDIF. 
```

我收到错误**local SELECT-OPTIONS are not allowed...**

我根据ABAPDOCU中的[示例进行编码。](http://help.sap.com/abapdocu_702/en/abenlog_exp_in_abexa.htm)下面的代码也没有意义：

```
DATA: codes TYPE RANGE OF tcode.
codes-sign = 'I'.
codes-option = 'EQ'.
codes-low = 'VL32N'.
apppend codes. 
```

我得到错误**代码是一个没有标题行的表，因此没有名为 sign 的组件**。

是否可以在类中使用逻辑选择表？如果没有，还有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:47:10.347

是的，这是可能的，并且系统准确地说明了问题所在。您需要声明：

```
DATA: lt_range_codes TYPE RANGE OF tcode,         " this is an internal table WITHOUT a header line
      ls_range_codes LIKE LINE OF lt_range_codes. " this is a corresponding structure

ls_range_codes-sign   = 'I'.
ls_range_codes-option = 'EQ'.
ls_range_codes-low    = 'VL32N'.
APPEND ls_range_codes TO lt_range_codes. 
```

请记住，ABAP 对象类中不允许带有标题行的表，因此您总是需要一个额外的结构。当然，字段符号也`APPEND INITIAL LINE TO ... ASSIGNING <...>`可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:32:12.060

请记住，您还可以在事务 SE11 中创建范围表。如果您在多个类中使用相同的范围表，我会推荐这个。使用 SE11 创建一个表数据类型，然后转到 EDIT->DEFINE AS RANGE TABLE TYPE，其余的都是不言自明的。输入您想要范围表的元素类型，然后您可以在所有类中使用此类型。

# php - 将日期 dd/mm/yyyy 格式化为 yyyy-mm-dd PHP

> ID：15676344
> 
> 赞同：13
> 
> 时间：2013-03-28T07:26:08.270
> 
> 标签：php, date

我有一个表格，其中以英国格式输入日期，我需要将其转换为

```
yyyy-mm-dd 
```

例如输入的日期是：`31/03/2013`我想转换`'2013-03-31'`为数据库插入。

我正在使用以下仅在某些时候奇怪地起作用的东西：

```
$dateInput = $mysqli->real_escape_string($_POST['date']);
$show_date = date('Y-m-d', strtotime($dateInput)); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T07:28:24.117

您可能想使用[DateTime::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)：

```
$show_date = DateTime::createFromFormat('d/m/Y', $dateInput)->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-28T07:30:13.897

尝试一下。

```
$dateInput = explode('/','31/03/2013');
$ukDate = $dateInput[2].'-'.$dateInput[1].'-'.$dateInput[0]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T07:28:43.030

> 以下仅在某些时候奇怪地起作用：

```
$show_date = date('Y-m-d', strtotime($dateInput)); 
```

这是没有其他更短的方法......我一生都在使用它......直到现在还没有注意到任何奇怪的事情......检查是否还有其他事情搞砸了

其他方法是

```
$timestamp = strtotime(str_replace('/', '.', $dateInput));
$mysql_date = date('Y-m-d', $timestamp); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T08:18:06.180

试试这个 ：

```
$dte  = '28/03/2013';
$dt   = new DateTime();
$date = $dt->createFromFormat('d/m/Y', $dte);
echo $date->format('Y-m-d'); 
```

输出：`2013-03-28`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T07:29:29.643

PHP 5.3 及更高版本

使用[DateTime::createFromFormat。](http://php.net/manual/en/datetime.createfromformat.php)它允许您指定一个精确的掩码 - 使用 date() 语法 - 来解析传入的字符串日期。

PHP 5.2 及更低版本

您必须使用 substr() 手动解析元素（年、月、日、小时、分钟、秒），并将结果交给[mktime()](http://de.php.net/manual/en/function.mktime.php)，这将为您构建时间戳。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-24T13:48:19.763

```
$date_array = explode("/",$your_date); // split the array
$var_day = $date_array[0]; //day seqment
$var_month = $date_array[1]; //month segment
$var_year = $date_array[2]; //year segment
echo $new_date_format = "$var_year-$var_day-$var_month"; // join them  together 
```

这将起作用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T07:42:06.453

几种替代方法。两者都输出 2013-03-31：

方法 1 - “看，没有功能”

```
<?php
    $in = '31/03/2013';
    echo $in[6].$in[7].$in[8].$in[9].'-'.$in[3].$in[4].'-'.$in[0].$in[1];
    ?> 
```

方法 2 - 正则表达式

```
<?php
    echo ($output = preg_replace('!^([0-9]{2})/([0-9]{2})/([0-9]{4})$!',"$3-$2-$1",$input));
?> 
```

# java - gen [生成的 Java 文件]

> ID：15676348
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:26:24.690
> 
> 标签：java, generated

我的项目无法在 64 位 PC 中导出，因为 gen [Generated Java File] 部分存在未解决的问题。它可以在昨天在 32 位 PC 上运行。PC版有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:28:11.813

`gen`是自动生成的，您可以清理项目并重建它。在 Eclipse 中，选择“项目”→“清理...”。

# visual-studio-2010 - 如何在 VS2010 中公开 MSBuild 的“条件”（对于 vc++）

> ID：15676350
> 
> 赞同：5
> 
> 时间：2013-03-28T07:26:31.743
> 
> 标签：visual-studio-2010, visual-c++, msbuild, msbuild-4.0

我的 VC++ 项目在 VS2010 中有一个自定义构建规则。在这条规则中，我想允许用户添加关于文件是否被处理的复杂条件。

这也需要在目标执行时进行评估，而不是在 'Item' 本身的 'Condition' 中进行评估（由于只有 'application' 项目可以处理它并且需要使用设置来处理它“应用程序”项目而不是依赖项目）。

我尝试向对象添加自定义字段，然后在执行时从组中删除项目。例如

```
<ItemGroup>
    <MyItemType Remove="@(MyItemType)" Condition="!(%(MyItemType.IncludeCondition))" />
</ItemGroup> 
```

不幸的是，这给了我错误：

错误 MSB4113：指定条件 "!(%(MyItemType.IncludeCondition))" 计算结果为 "!'testfilename1' == 'testfilename2' or false" 而不是布尔值。

（'%(MyItemType.IncludeCondition)' 中的原始条件表达式是`'%(Filename)' == 'testfilename2' or $(TestBooleanFalse)`）

似乎 MSBuild 不会将项目元数据的内容评估为布尔值（在大多数情况下这似乎是一种很好的做法，只是不是这个）。

无论如何，我可以让 MSbuild 将元数据实际评估为布尔值，还是有其他方法可以用来获得相同的结果？

* * *

PS 我已经简要浏览了 MSBuild [Property Functions](http://msdn.microsoft.com/en-us/library/dd633440%28v=vs.100%29.aspx)，但看不到任何可以在函数输入上运行 MSBuild 布尔评估代码的东西）

* * *

一个非常精简的 MSBuild 项目示例，显示了该问题，由 Lanrokin 提供：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
    <ItemGroup>
        <MyItemType Include="item1.ext1" />
        <MyItemType Include="item1.ext2" />
    </ItemGroup>

    <Target Name="SpecifyConditions">
        <ItemGroup>
            <MyItemType>
                <IncludeCondition>'%(Filename)%(Extension)' == 'item1.ext1'</IncludeCondition>
            </MyItemType>
        </ItemGroup>
    </Target>

    <Target Name="Build" DependsOnTargets="SpecifyConditions">
        <Message Importance="high" Text="@(MyItemType)" Condition="%(MyItemType.IncludeCondition)" />
    </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:04:24.023

这与 MSBuild 的评估方式有关。有关详细信息，请参阅 Sayed 的书：[Microsoft® Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735645248)

通过移动样本中条件的位置，您可以完成我认为您想要实现的目标。

```
<Target Name="SpecifyConditions">
    <ItemGroup>
        <MyItemType Condition="'%(Filename)%(Extension)' == 'item1.ext1'">
            <IncludeCondition>true</IncludeCondition>
        </MyItemType>
    </ItemGroup>
</Target>

<Target Name="Build" DependsOnTargets="SpecifyConditions">
    <Message Importance="high" Text="@(MyItemType)" Condition="%(MyItemType.IncludeCondition) == 'true'" />
</Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:40:40.740

我认为您的条件语句的一个小调整来自：

```
'%(Filename)' == 'testfilename2' or $(TestBooleanFalse) 
```

至

```
('%(Filename)' == 'testfilename2') or $(TestBooleanFalse) 
```

通过将第一个条件包裹在括号内将解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:11:43.737

尝试内联声明条件而不是项目元数据：

```
 <ItemGroup>
    <MyItemType Remove="@(MyItemType)" Condition="('%(MyItemType.Filename)' == 'testfilename2')" />
  </ItemGroup> 
```

或者**[`Property Functions`](http://msdn.microsoft.com/en-us/library/dd633440)**在元数据条件中使用：

```
<Target Name="SpecifyConditions">
    <ItemGroup>
        <MyItemType>
            <IncludeCondition>$([System.String]::Equals('%(Filename)%(Extension)', 'item1.ext1'))</IncludeCondition>
        </MyItemType>
    </ItemGroup>
</Target>

<Target Name="Build" DependsOnTargets="SpecifyConditions">
    <Message Importance="high" Text="@(MyItemType)" Condition="%(MyItemType.IncludeCondition)" />
</Target> 
```

# python - 使用带有视图功能的 webapp2 微框架时如何渲染模板？

> ID：15676351
> 
> 赞同：3
> 
> 时间：2013-03-28T07:26:37.767
> 
> 标签：python, google-app-engine, python-2.7, webapp2

[我正在使用 webapp2 指南 ( http://webapp-improved.appspot.com/guide/handlers.html](http://webapp-improved.appspot.com/guide/handlers.html) )中描述的 webapp2 微框架：

```
import webapp2

class WSGIApplication(webapp2.WSGIApplication):
    def __init__(self, *args, **kwargs):
        super(WSGIApplication, self).__init__(*args, **kwargs)
        self.router.set_dispatcher(self.__class__.custom_dispatcher)

    @staticmethod
    def custom_dispatcher(router, request, response):
        rv = router.default_dispatcher(request, response)
        if isinstance(rv, basestring):
            rv = webapp2.Response(rv)
        elif isinstance(rv, tuple):
            rv = webapp2.Response(*rv)
        return rv

    def route(self, *args, **kwargs):
        def wrapper(func):
            self.router.add(webapp2.Route(handler=func, *args, **kwargs))
            return func
        return wrapper 
```

然后我定义我的视图函数：

```
import micro_webapp2

app = micro_webapp2.WSGIApplication()

@app.route('/')
def hello_handler(request, *args, **kwargs):
    return 'Hello, world!' 
```

相反，我想呈现模板、调用重定向并使用 webapp2 会话扩展。

使用 webapp2 微框架时应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:29:22.800

**回复：模板**

看起来 webapp2 似乎没有内置模板引擎。然而，有很多非常高质量的 Python 模板系统。一些最受欢迎的包括[jinja2](http://jinja.pocoo.org/)、[django-templates](https://docs.djangoproject.com/en/1.5/ref/templates/api/)和[Pystache](https://github.com/defunkt/pystache)。

如果您计划部署到谷歌应用引擎，您可能需要选择 Django 模板或 Jinja2，因为它们[都支持开箱即用](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)：

我推荐 jinja2，因为它很容易上手，有[很好的文档](http://jinja.pocoo.org/docs/)，而且效果很好（虽然我以前用过 django 和 Pystache，两者都很棒）。

Jinja2 有一个[入门指南](http://jinja.pocoo.org/docs/api/#basics)，可以帮助您快速入门。一旦你安装了 Jinja2，使用它应该只是制作一个适当的“模板”目录，其中包含一个模板。说'hello.html'：

```
<!doctype html>
<html><head><title>Hello {{ who }}</title></head>
<body><h1>Hello {{ who }}</h1></body>
</html> 
```

并使您的视图看起来像：

```
import micro_webapp2
from jinja2 import Environment, PackageLoader

app = micro_webapp2.WSGIApplication()
env = Environment(loader=PackageLoader('my_application_name', 'templates'))

@app.route('/')
def hello_handler(request, *args, **kwargs):
    template = env.get_template('hello.html')
    return template.render(who='world') 
```

我希望这是有帮助的，

担

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:59:53.020

我现在正在使用这个微框架：

```
import webapp2

from webapp2_extras import jinja2, routes, sessions

class WSGIApplication(webapp2.WSGIApplication):

    def __init__(self, *args, **kwargs):
        super(WSGIApplication, self).__init__(*args, **kwargs)
        self.router.set_dispatcher(self.__class__.custom_dispatcher)

    @staticmethod
    def custom_dispatcher(router, request, response):
        rv = router.default_dispatcher(request, response)
        router.session_store = sessions.get_store(request=request)
        if isinstance(rv, basestring):
            rv = webapp2.Response(rv)
        elif isinstance(rv, tuple):
            rv = webapp2.Response(*rv)
        router.session_store.save_sessions(rv)
        return rv

    def route(self, *args, **kwargs):
        def wrapper(func):
            self.router.add(routes.RedirectRoute(handler=func, strict_slash=True, *args, **kwargs))
            return func
        return wrapper

    def jinja2_factory(self, app):
        j = jinja2.Jinja2(app)
        j.environment.globals.update({
            'config': app.config,
            'uri_for': webapp2.uri_for
        })
        return j

    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(factory=self.jinja2_factory, app=self)

    def session_store(self):
        return sessions.get_store(request=self.request)

    def session(self):
        return self.session_store().get_session()

    def add_flash(self, value, level=None):
        self.session().add_flash(value, level=level)

    def redirect_to(self, _name, *args, **kwargs):
        return webapp2.redirect_to(_name, *args, **kwargs)

    def render_template(self, _filename, **context):
        session = self.session()
        ctx = {
            'flashes': session.get_flashes(),
            'session': session
        }
        ctx.update(context)
        rv = self.jinja2.render_template(_filename, **ctx)
        return rv 
```

它向应用程序实例添加了方便的方法。这使得类似的事情成为可能：

```
@app.route('/book/list', methods=['GET'], name='book_list')
def book_list(request):
    return app.render_template('book/list.html', books=[])

@app.route('/book/create', methods=['GET'], name='book_create')
def book_create(request):
    app.add_flash('Create book not yet implemented!', level='warning')
    return app.redirect_to('book_list') 
```

它基于我在[https://github.com/commonsense/CommonConsensus/blob/master/server/webapp2_flask.py上找到的代码](https://github.com/commonsense/CommonConsensus/blob/master/server/webapp2_flask.py)

欢迎对这种方法提出任何意见！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:17:43.670

重定向与普通的 webapp2 方式相同：

```
@app.route('/')
def hello_handler(request, *args, **kwargs):
    return webapp2.redirect('/another_url') 
```

至于模板，您只需返回您在渲染模板时获得的字符串作为结果。

# laravel - Laravel 4：为什么我的类自动加载但全局变量不可用

> ID：15676353
> 
> 赞同：10
> 
> 时间：2013-03-28T07:26:45.933
> 
> 标签：laravel, laravel-4

我已经自动加载了一个具有正确命名空间和 PSR-0 的类。我把它放在 app/lib/CI 中，类和它的文件名是相同的“DB”。类文件本身在实际类之前包含一个配置文件：

```
require( 'config.php' );

class DB {
  // ...
} 
```

该类显然是自动加载的，因为当我调用静态方法 connect 时，它确实会从 ::connect() 内部显示一条错误消息。问题是，包含在 config.php 中的全局变量在 class::method 中不可用。

因此，需要明确的是，数组 $connection_settings 位于 config.php 中，但即使在使用时：

```
global $connection_settings; 
```

$connection_settings 没有在 connect 方法中设置。

有趣的是，即使该类是自动加载的，如果我从 routes.php 文件的顶部包含该类，一切正常。那么，让自动加载以我认为“正常”的方式工作，我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T15:39:47.477

这是[Composer](http://getcomposer.org)而不是 Laravel 的问题。Composer 尽一切努力在自动加载期间不污染全局范围（在[#1297](https://github.com/composer/composer/pull/1297)中简要讨论）。如果要强制使用全局变量，则应在配置文件以及使用它们的任何函数中将它们声明为全局变量。

[PHP手册](http://www.php.net/manual/en/language.variables.scope.php "PHP：变量范围")说：

> 在函数外部使用 global 关键字不是错误。如果文件包含在函数内部，则可以使用它。

下面的代码对我有用（在 PHP 5.4.13 上使用 Laravel 4b4）。删除任一全局行会破坏代码（以不同的方式）。

### 配置文件

```
global $connection_settings;
$connection_settings = array(/* ... */); 
```

### 数据库文件

```
require 'config.php';
class DB {
    static function connect()
    {
        global $connection_settings;
        // Do something with $connection_settings
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-30T06:31:22.330

这与 Laravel*或Composer**无关*，而是与**自动加载机制**有关。[Phill Sparks 的出色回答](https://stackoverflow.com/a/15883356/624066)已经指出了使用自动加载包含文件的一个微妙但至关重要的区别，这是理解和解决您的问题的关键：

 ***[PHP手册](http://www.php.net/manual/en/language.variables.scope.php "PHP：变量范围")说：

> 在函数外部使用 global 关键字不是错误。如果文件包含在函数内部，则可以使用它。

当您使用 autoload via`spl_autoload_register()`时，`include`会发生*在*autoloader 函数内部。因此，在包含的文件主体中声明的任何变量都**没有**全局范围，对于您的`config.php`vars 也是如此。

因此，虽然您可以在 body 中访问此类 var ，但它们*在*其类和函数`DB.php`中不可用。这就是为什么只在内部使用不起作用的原因：因为这样的变量首先并不是真正的全局变量！*`global``connect()`*

 *因此，您需要先“使”它们成为全局*变量*，方法是在声明它们的相同范围内使用`global`（在`DB.php`或`config.php`），*然后*在内部`global` *再次*使用`connect()`以访问此类变量。

一个简单的例子：

**`test.php`：**

```
<?php
spl_autoload_register(function ($class) {
    require(__DIR__.'/'.$class.'.php');
});

$foo = new Foo();
var_dump($foo->bar()); 
```

**`Foo.php`：**

```
<?php

global $foobar;
$foobar = "just a test";

class Foo
{
    function bar() {
        global $foobar;
        return $foobar;
    }
} 
```

它完美地工作并打印`just a test`。第一个`global` *放在* `$foobar`全局范围内，第二个*访问*它。删除*其中任何一个*都会破坏代码，第一个遗漏更“邪恶”，因为它会打印`NULL`没有错误。****

# sharepoint - Sharepoint 2007 列表迁移大数据

> ID：15676355
> 
> 赞同：2
> 
> 时间：2013-03-28T07:26:48.757
> 
> 标签：sharepoint, sharepoint-2010, data-migration

我们有一个带有附件的 sharepoint 2007 列表，其大小超过 7 GB。我们尝试将其保存为模板 [with content] 并将其迁移到 sharepoint 2010 环境。但是由于模板太大，无法保存。您能否提供任何其他方式来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:24:40.350

[我会推荐这个工具](http://spdeploymentwizard.codeplex.com/)，对于移动内容非常有用。

# perl - 如何在perl中从包含完整文件路径的字符串中分离文件名和文件路径

> ID：15676357
> 
> 赞同：1
> 
> 时间：2013-03-28T07:26:54.020
> 
> 标签：perl

我有一个 perl 程序，其中有一个变量，其值为文件的完整路径。

例如：

```
$FullPath = "C:\sample\file.txt"; 
```

我想提取`file.txt`$FileName 变量中的文件名 ( ) 和变量中的路径 ( `C:\sample\`) `FilePath`。

任何人都可以通过示例代码帮助我做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:40:27.097

```
use File::Basename qw( fileparse );
my ($fname, $dir) = fileparse($FullPath); 
```

* * *

请注意，您的`$FullPath`不包含`C:\sample\file.txt`. 要得到它，你需要

```
my $FullPath = "C:\\sample\\file.txt"; 
```

或者

```
my $FullPath = 'C:\sample\file.txt'; 
```

一直用`use strict; use warnings;`！它会因为没有意义而发出警告`"\s"`。

* * *

要在任何机器上解析 Windows 路径，您可以使用以下命令：

```
use Path::Class qw( foreign_file );
my $file = foreign_file('Win32', $FullPath);
my $fname = $file->basename();
my $dir   = $file->dir(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:31:13.223

我建议你使用`splitpath`from `File::Spec::Functions`。此函数将卷、目录和文件名作为三个单独的值返回。

下面的代码将这些值放入一个数组中，然后删除第二个（目录）元素并将其附加到第一个元素，在`@path`.

```
use strict;
use warnings;

use File::Spec::Functions 'splitpath';

my $full_path = 'C:\sample\file.txt';
my @path = splitpath $full_path;
$path[0] .= splice @path, 1, 1;

print "$_\n" for @path; 
```

**输出**

```
C:\sample\
file.txt 
```

# iphone - 我可以使用 UIWebView 的缩放功能来增加 HTML 文本大小吗？并且不会丢失任何内容？

> ID：15676358
> 
> 赞同：1
> 
> 时间：2013-03-28T07:26:55.663
> 
> 标签：iphone, html, ios, uiwebview, zooming

我有一个 UIWebView 用来显示非常简单的 HTML。当我启用 Scales Pages to Fit 时，我可以捏合和缩放，这很酷。但问题是它不是“智能”变焦。它只会放大我捏的地方，不适合的内容会被推离页面的一侧。所以为了看到你最终做了侧滚动的事情。

缩放时是否可以重绘内容？所以不是只是缩放，而是实际上使文本更大并且智能地使其全部适合屏幕？

我可以通过更改 HTML 字体大小来实现这一点，但是滑块有点笨拙。我想让这个很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:17:23.407

试试下面的方法，我试过做一个UIWebView的category，所以这里self的意思是UIWebview的实例

```
-(void)setFontSizeWithValue: (float)fontSize
{
   NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%f%%'",(fontSize * 10.0)];
  [self stringByEvaluatingJavaScriptFromString:jsString];
  [jsString release];
} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:33:16.943

您将必须创建一个混合解决方案，这意味着检测用户捏合和缩放手势并基于该更改该 html 字体大小。

您将不得不自定义 UIwebView 并实现[UIResponder 委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)

> – touchesBegan:withEvent:
> 
> – touchesMoved:withEvent:
> 
> – touchesEnded:withEvent:
> 
> – touchesCancelled:withEvent:

# ruby - 为什么 local_variables 返回尚未分配的局部变量？

> ID：15676360
> 
> 赞同：4
> 
> 时间：2013-03-28T07:27:00.207
> 
> 标签：ruby

为什么`local_variables`返回尚未赋值的局部变量（调用后赋值`local_variables`）？

```
a = 2
@aa = 1
# a = b # this will raise an error.
puts "local: #{ local_variables }"
puts "instance: #{ instance_variables }"

b = 2
@bb = 2
puts "local: #{ local_variables }"
puts "instance: #{ instance_variables }" 
```

结果：

```
local: [:a, :b]
instance: [:@aa]
local: [:a, :b]
instance: [:@aa, :@bb] 
```

我期望的是像 那样的行为`instance_variables`，它只返回在那一刻已经分配的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:14:55.960

Ruby[在编译时创建局部变量](http://www.ruby-forum.com/topic/155673#685906)。实例变量明确地绑定到实例并且可以很容易地访问。但是，`b`可能是：

1.  方法调用
2.  `self.b`
3.  局部变量`b`

在此处查看[Brian Candler 的回复（Google 缓存）](http://webcache.googleusercontent.com/search?q=cache%3aaEB1UxO-V1IJ%3agroups.google.com/group/ruby-talk-google/browse_thread/thread/b36a49bb4944baf9+&cd=1&hl=en&ct=clnk)。这也是为什么你不能在运行时用 eval 创建局部变量的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:42:27.367

[`Kernel#local_variables`](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-local_variables)列出当前范围内的所有局部变量，包括那些可能尚未赋值的局部变量。[MRI](http://en.wikipedia.org/wiki/Ruby_MRI)解析每个作用域中的局部变量并在代码本身（`puts local_variables.inspect`如下所示）运行之前声明它们，因此即使在`local_variables`定义这些变量之前调用它们也会显示它们

但请注意，在调用时`defined?`仍会返回`nil`尚未分配给的变量`local_variables`：

```
$ cat /tmp/locals
#!/usr/bin/env ruby

a = 5
puts local_variables.inspect
puts defined?(a)
puts (defined?(b) || "[undefined]")
b = 10
puts defined?(b)

def foo
  c = 15
  puts local_variables.inspect
  d = 20
end
foo

$ ruby /tmp/locals
[:a, :b]
local-variable
[undefined]
local-variable
[:c, :d] 
```

# matlab - MATLAB——如何从 nxn 矩阵绘制热图？

> ID：15676363
> 
> 赞同：15
> 
> 时间：2013-03-28T07:27:08.170
> 
> 标签：matlab, plot

我有一个 50x50 矩阵，其中一些数字从 0 到略大于 1。如何使用颜色条显示这些数据的热图？我正在寻找的是一个图，其中`x`和`y`值的范围从`1`to`50`和`1`to `50`，每个点 ( `x`, `y`) 的颜色对应于矩阵条目 ( `x`, `y`) 处的数据大小。有关此类热图的示例，请查看[此有趣的 xkcd 帖子](http://xkcd.com/1138/)。

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-28T07:35:16.810

你怎么看这个例子？[还看到](https://stackoverflow.com/questions/12851352/matlab-heat-map)吗？

```
>> A = randi([10,60],100,100);
>> colormap('hot')
>> imagesc(A)
>> colorbar 
```

![在此处输入图像描述](../Images/aee8cd6086acb2ca50c51ab30cb39b3a.png)

# r - R tcltk, tkframe 扩展

> ID：15676365
> 
> 赞同：1
> 
> 时间：2013-03-28T07:27:35.770
> 
> 标签：r, tk

我正在考虑创建一个带有 2 个复选按钮的小部件，每个复选按钮都在一个 tkframe 中。通过单击第一个检查按钮，我希望第一帧将展开以显示更多选项行。但是当单击第二个检查按钮时，我希望第二个框架会扩大，但第一帧会缩小到只包含第一个检查按钮。这就像通过单击复选按钮激活了几条隐藏线。有谁知道如何做到这一点？

谢谢，DD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:08:01.303

您可以在 gWidgets for tcltk（或 github 上的 gWidgets2 中获得类似的东西，您可以在其中看到它是如何完成的[https://github.com/jverzani/gWidgets2tcltk/blob/master/R/gexpandgroup.R](https://github.com/jverzani/gWidgets2tcltk/blob/master/R/gexpandgroup.R)）。这是模式：

```
library(gWidgets)
options(guiToolkit="tcltk")

lorem <- "lorem ipsum dolor sit amet, consectetur adipiscing
elit. Suspendisse tempus aliquam ante, at malesuada tellus
vulputate at. Morbi ac diam augue, vel bibendum lorem.
Curabitur ut est molestie leo sagittis vestibulum.
"

w <- gwindow()
size(w) <- c(800, 400)
g <- ggroup(cont=w, horizontal=FALSE)
expand1 <- gexpandgroup("frame 1", cont=g, anchor=c(-1,1))
expand2 <- gexpandgroup("frame 2", cont=g, anchor=c(-1,1))
visible(expand2) <- FALSE

## put stuff into expanding groups
glabel(lorem, cont=expand1)
glabel(lorem, cont=expand2)

callback <- function(h,...) {
  print("click 2")
  if(visible(expand2) & visible(expand1))
    visible(expand1) <- FALSE
}
addHandlerChanged(expand2, callback) 
```

expandgroup 小部件实际上仅在堆叠时才有效，而不是并排。用普通的 tcltk 将其集成到 GUI 中并非不可能。

# jasper-reports - 如何在 JasperReports 中设计具有多个详细信息行的表格？

> ID：15676366
> 
> 赞同：3
> 
> 时间：2013-03-28T07:27:36.460
> 
> 标签：jasper-reports

我正在使用 iReport 来设计下表：

```
| 项目 | 值1 |
| 公司| 值2 |
| 客户 | 价值3 |

| 项目 | 价值4 |
| 公司| 价值5 |
| 客户 | 价值6 |

```

这`project, company, client`是行“标题”，整个组应该重复。

即所有三行都应重复并用适当的值填充。到目前为止，我能够创建一个只有一个细节行重复的表格。

我该如何设计这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:49:28.937

最后，我决定使用子报表作为解决方法。只留下一个细节带，没有页眉或页脚和文本字段来构建我想要的表格。必须在定位和调整大小方面进行一些调整，以使 hte 表按应有的方式伸展

# git - 推送到裸存储库，即使它没有显示错误，更改也没有生效

> ID：15676386
> 
> 赞同：2
> 
> 时间：2013-03-28T07:28:43.640
> 
> 标签：git

我按照以下说明操作：[如何将普通的 Git 存储库转换为裸存储库？](https://stackoverflow.com/questions/2199897/how-to-convert-a-git-repository-from-normal-to-bare)然后我尝试推送到主仓库，我只是更改了`test.txt`文件中的一些文本。

当我推它时，工作完成了输出

`1 file changed, 1 line added...`

但是当我连接 FTP 以查看我的 test.txt 文件时，它不存在！

这是我使用的命令：

```
git push ssh://username@domain:22/~/repo 
```

您认为我应该将命令更改为：

```
git push ssh://username@domain:22/~/repo/reponame.git master 
```

因为我现在这样做了，我正在等待回复，因为它需要很长时间..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:33:19.313

裸存储库**没有**工作副本：

> 但是当我连接 ftp 以查看我的 test.txt 文件时，它不存在！

这意味着，没有签出文件，例如 test.txt。

如果您想验证它是否存在（在 .git/objects 数据库中），请使用以下任何一项（在该服务器上）：

```
git ls-files -- test.txt
git archive HEAD -- test.txt > test.tar

git cat-file -p master:test.txt 
```

或者只是将 repo 克隆到另一个位置以检查它是否包含该文件。

从您用来推送的客户端，您可以将其与远程进行比较

```
git remote add server ssh://username@domain:22/~/repo
git remote update --prune 
```

通过做例如

```
git log --left-right --graph --oneline HEAD ... server/master 
```

您将确切地看到*哪些*提交仅在相应的分支之一中。或者

```
git diff --stat server/master 
```

列出本地 HEAD 和远程 master 分支之间的任何区别

# scala - 简单的 ScalaXB 示例在 Dispatch 中导致 NoSuchMethodError

> ID：15676388
> 
> 赞同：1
> 
> 时间：2013-03-28T07:28:58.033
> 
> 标签：scala, soap, wsdl, scala-dispatch, scalaxb

我是 Scala 的新手，我正在尝试使用[ScalaXB](http://scalaxb.org/)的示例。

我正在使用 IntelliJ IDEA 和最新的 Scala 版本 2.10.1。

ScalaXB 使用[Dispatch](http://dispatch.databinder.net)，所以我将它（版本 0.9.5）添加为项目的依赖项。我还必须添加依赖项 slf4j-nop:1.6.2。因此，之后所有内容都已编译，但不断出现异常：

```
Exception in thread "main" java.lang.NoSuchMethodError: scala.util.control.Exception$Catch.either(Lscala/Function0;)Lscala/Either;
at dispatch.Promise$class.result(promise.scala:64)
at dispatch.ListenableFuturePromise.result(promise.scala:223)
at dispatch.Promise$class.apply(promise.scala:75)
at dispatch.ListenableFuturePromise.apply(promise.scala:223)
at scalaxb.DispatchHttpClients$DispatchHttpClient$class.request(httpclients_dispatch.scala:12)
at scalaxb.DispatchHttpClients$$anon$1.request(httpclients_dispatch.scala:4)
at scalaxb.SoapClients$SoapClient$class.soapRequest(soap12.scala:32)
at scalaxb.SoapClients$$anon$1.soapRequest(soap12.scala:14)
at scalaxb.SoapClients$SoapClient$class.requestResponse(soap12.scala:51)
at scalaxb.SoapClients$$anon$1.requestResponse(soap12.scala:14)
at eu.getintheloop.sample.XMLProtocol$WeatherSoap12Bindings$WeatherSoap12Binding$class.getWeather(xmlprotocol.scala:53)
at eu.getintheloop.sample.XMLProtocol$WeatherSoap12Bindings$$anon$3.getWeather(xmlprotocol.scala:48)
at eu.getintheloop.sample.main$.main(main.scala:20)
at eu.getintheloop.sample.main.main(main.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

代码行是：

```
protected lazy val result = allCatch.either { claim } 
```

这看起来很奇怪，因为“claim”似乎是一个非常好的 java.lang.String 对象：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<GetWeatherResponse xmlns="http://litwinconsulting.com/webservices/">
<GetWeatherResult>Sunny</GetWeatherResult>
</GetWeatherResponse>
</soap:Body>
</soap:Envelope> 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:47:17.260

当你有`java.lang.NoSuchMethodError`Scala 标准库的东西时，我的猜测是，在 IntelliJ 或 sbt 设置的某个地方，你使用的是非 2.10.1 Scala 编译器或库。

**编辑**：每次调度，请查看我[对 dispatch.databinder.net 正确 mvn 版本的](https://stackoverflow.com/questions/15508401/correct-mvn-version-for-dispatch-databinder-net/15508707#15508707)回答。您不必自己构建它。

# node.js - 节点 JS 运行时错误

> ID：15676389
> 
> 赞同：2
> 
> 时间：2013-03-28T07:29:08.657
> 
> 标签：node.js

我是 Node.JS 的新手。当我使用以下命令运行时，我遇到了问题。谁能帮我在这里解决这个问题。

admin6@admin6-desktop:~/Desktop/shraddha/postingData$ npm init 这个实用程序将引导您创建一个 package.json 文件。它仅涵盖最常见的项目，并尝试猜测合理的默认值。

请参阅 npm help json 以获取有关这些字段的权威文档以及它们的确切作用。

之后使用 npm install --save 安装一个包并将其作为依赖项保存在 package.json 文件中。

随时按 ^C 退出。名称：（postingData）版本：（0.0.0）git存储库：关键字：许可证：（BSD）即将写入/home/admin6/Desktop/shraddha/postingData/package.json：

```
{
  "name": "postingData",
  "version": "0.0.0",
  "description": "ERROR: No README.md file found!",
  "main": "recipes.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  }, 
```

“依赖”：

```
{
    "express": "2.5.11",
    "ejs": "0.7.2"
  }, 
```

“存储库”：“”，“作者”：“aarna”，“许可证”：“BSD”，“devDependencies”：{} }

在命令行中运行时出现以下错误。

这个可以吗？（是）npm WARN package.json postingData@0.0.0 找不到 README.md 文件！

我正在等待快速解决方案。

谢谢施拉达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:36:21.687

Can 可以安全地忽略`npm WARN`消息，但在这种情况下，这是一个非常容易解决的问题。只需制作一个 README.md 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T10:16:59.253

您也应该尝试在其中添加一些文本。它对我有用。无论如何，拥有一个 README 文件并不是一个坏主意。:)

# testng - 如何获取在 TestNG 中运行的测试套件的数量？

> ID：15676391
> 
> 赞同：3
> 
> 时间：2013-03-28T07:29:34.023
> 
> 标签：testng

大家好，我正在尝试使用控制台自定义 testng 执行结果输出`TestNG Listeners`，我在父测试套件下有不同的测试套件，我坚持在测试执行时运行测试套件的数量。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:36:44.993

在运行时跟踪的选项之一......您可以实现 ISuiteListener 并增加启动的套件数。您也可以为已完成的套件维护一个计数器并输出到您的控制台。比如说在 onstart 中，为已启动的套件增加全局计数器，在 onfinish 中，增加已完成的套件。您也可以维护一个正在运行的套房柜台。

# c# - 在 C# 中根据不同情况向上或向下舍入小数

> ID：15676393
> 
> 赞同：1
> 
> 时间：2013-03-28T07:29:50.070
> 
> 标签：c#, winforms, decimal

我使用 C#编写了**计费系统的应用程序。**

**总账单**可以向上或向下四舍五入，以方便客户向收银员付款。这取决于以美分结尾的最后一个值。我使用数据类型作为**十进制**来进行计算。

当以美分 0.00、0.01、0.02 结尾时**，**将**向下舍**入为**0.00**

例子：

*   10.00、10.01 或 10.02 向下舍入到 10.00
*   10.10、10.11 或 10.12 向下舍入到 10.10

当以 0.03、0.04、0.05 美分结尾时**，**它将**向上取整**为**0.05**

例子 ：

*   10.03、10.04 或 10.05 向上取整到 10.05
*   10.13、10.14 或 10.15 向上取整到 10.15

当以**0.05、0.06 或 0.07 美分结束时，**将**向下舍**入为**0.05**

例子 ：

*   10.05、10.06 或 10.07 向下舍入到 10.05
*   10.15、10.16 或 10.17 向下舍入到 10.15

当以美分**0.08 或 0.09 ** 结尾时，它将 **四舍五入**为**0.10**

例子 ：

*   10.08 或 10.09 向下舍入到 10.10
*   10.18 或 10.19 向下舍入到 10.20

现在的问题是我不能使用**Math.Round**因为答案不同并且不符合系统要求。假设我的**总账单是 10.14**，它将**向下舍入到 10.10**但答案应该**向上舍入到 10.15。**

我希望有人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:39:22.533

我打算建议一种检查最后一位数字的扩展方法。但是您可以通过乘以并确保您使用正确的圆形类型来做到这一点。

你可以从这个答案中得到它。

[如何四舍五入到最接近的 0.5？](https://stackoverflow.com/questions/1329426/how-do-i-round-to-the-nearest-0-5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T08:00:28.113

简单的答案是：

```
public decimal Round(decimal value)
{
    return Math.Round(value * 20) / 20;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:48:39.583

```
static public decimal RoundToNickel(decimal value)
{
    var mod = value % 0.05M;

    if (mod >= 0.03M)
    {
        return value + 0.05M - mod;
    }

    return value - mod;
} 
```

# navigation - 在单击链接或通过跳转到该链接的 url 访问后，防止固定导航栏覆盖文本/标题

> ID：15676399
> 
> 赞同：3
> 
> 时间：2013-03-28T07:30:39.437
> 
> 标签：navigation, css-position

JSfiddle 应该解释一下：http: [//jsfiddle.net/UMW26/](http://jsfiddle.net/UMW26/)

或者

就像标题说的那样，如何防止固定导航栏在单击链接或通过 url 地址访问后覆盖文本/标题，这将跳转到它。

这是我使用的示例代码：

```
<!DOCTYPE html>

<style type="text/css">
body { margin: 0; }
#content { height: 1500px;margin-top: 20px;background-color:skyblue; }
#fix-nav-bar { position: fixed; width:100%; top:0; text-align:center; background-color: pink; }

#content-title { margin-top: 250px;font-weight:bold;font-size:16pt; }
</style>

<div id="fix-nav-bar">
fixed navigation bar
</div>

<div id="content">
<a href="#content-title">Click here to jump to Title:</a>

<div id="content-title">Sample Content Title/Name</div>
How do I prevent fixed navigation bar from covering title after clicking "<b>Click here to jump to Title</b>" but just keep it slightly above it?
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-27T19:41:41.970

我用一些jquery通过以下方式解决了这个问题：

1.  抓取 URL 并检查其末尾是否有 ID`#divID`并将其设置为变量
    `var id = '#divID'`

如果 ID 存在...

2.  获取导航栏的高度（或随心所欲，下面使用 50px）
3.  从您的 div 的 id 设置 scrollTop 属性。

```
$('html,body').animate({
  scrollTop: $(id).offset().top - 50
});
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T09:33:05.940

JS 解决方案：使用 div 代替导航栏中的链接。附加一个 onclick 函数，该函数滚动到元素的 y 坐标，减去导航栏的高度。

例子：

HTML

```
<div class="nav-links">
    <div class="link" onclick="goTo('#about')">About</div>
    <div class="link" onclick="goTo('#tours')">Tours</div>
    <div class="link" onclick="goTo('#contact')">Contact</div>
</div> 
```

JS：

```
function goTo(id) {
  let destination = document.querySelector(id);
  let yCoord = destination.offsetTop - 70;
  window.scrollTo({
    top: yCoord,
    behavior: "smooth"
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T21:18:16.653

我找到了当前[最简单的解决方案](https://css-tricks.com/fixed-headers-on-page-links-and-overlapping-content-oh-my/)

```
/* CSS */

html {
    scroll-padding-top: 44px; /* Replace with your fixed navbar height */
}

body {
    margin: 44px auto 0; /* Replace with your fixed navbar height */
} 
```

# java - 使用 JaxB 解析类层次结构

> ID：15676401
> 
> 赞同：3
> 
> 时间：2013-03-28T07:30:39.983
> 
> 标签：java, xml-parsing, jaxb

我有类层次结构

```
interface Intf {}

Class A implements Intf{}

Class B implements Intf{} 
```

现在我在上面使用`Class A`并使用`Class B`JaxB 的 elp 读取两个不同的 XML 文件。有人可以建议我如何在 JaxB 中配置和使用上述结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:22:17.920

对于您的用例，接口不考虑在内。如果您想映射`A`到`B`不同的 XML 结构，您可以继续这样做，我将在下面通过一个示例进行演示。

**JAVA模型**

***整数***

```
public interface IntF {

    public String getFoo();

    public void setFoo(String foo);

} 
```

***一种***

```
import javax.xml.bind.annotation.*;

@XmlRootElement
public class A implements IntF {

    private String foo;

    @Override
    @XmlElement(name="renamed-foo")
    public String getFoo() {
        return foo;
    }

    @Override
    public void setFoo(String foo) {
        this.foo = foo;
    }

} 
```

***乙***

```
import javax.xml.bind.annotation.*;

@XmlRootElement
public class B implements IntF {

    private String foo;

    @Override
    @XmlAttribute
    public String getFoo() {
        return foo;
    }

    @Override
    public void setFoo(String foo) {
        this.foo = foo;
    }

} 
```

**演示代码**

***演示***

```
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(A.class, B.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        A a = new A();
        a.setFoo("Hello World");
        marshaller.marshal(a, System.out);

        B b = new B();
        b.setFoo("Hello World");
        marshaller.marshal(b, System.out);
    }

} 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8"?>
<a>
    <renamed-foo>Hello World</renamed-foo>
</a>
<?xml version="1.0" encoding="UTF-8"?>
<b foo="Hello World"/> 
```

# javascript - Jasmine 测试一个对象是否有某种方法

> ID：15676402
> 
> 赞同：24
> 
> 时间：2013-03-28T07:30:40.587
> 
> 标签：javascript, coffeescript, jasmine

我正在使用 Jasmine，我想测试一个对象是否具有某种方法，如下所示：

```
it "should have 'open' method", ->
    @xhr = ajax.create()
    expect(@xhr).toHaveMethod "open" # I want to test like this! 
```

我该如何测试？谢谢你的好心。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-10T14:28:04.573

@david 回答正确。`toBeDefined()`可能是你想要的。但是，如果您想验证它是一个函数而不是一个属性，那么您可以使用`toEqual()`with `jasmine.any(Function)`。这是一个例子：http: [//jsbin.com/eREYACe/1/edit](http://jsbin.com/eREYACe/1/edit)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-28T14:52:08.970

没有内置的方法可以做到这一点，但您可以通过这样做来获得所需的结果。

```
it "should have 'open' method", ->
    @xhr = ajax.create()
    expect(typeof @xhr.open).toBe("function") 
```

请注意，测试是否按照其他答案中的建议进行了定义，在某些极端情况下它会通过，但不应该通过。如果你采取以下结构，它会通过，它绝对不是一个函数。

```
{ open : 1 } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-28T08:09:01.573

我会尝试：

```
it "should have 'open' method", ->
    @xhr = ajax.create()
    expect(@xhr.open).toBeDefined() 
```

看到这个[小提琴](http://jsfiddle.net/XN379/3/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-20T09:14:18.950

我是这样做的。角度示例：

```
beforeEach(inject(function ($injector) {
    service = $injector.get("myService");       
}));

it("should have myfunction function", function () {
    expect(angular.isFunction(service.myfunction)).toBe(true);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-01T19:00:41.303

Jasmine 允许您编写自己的“匹配器”。文档对此进行了解释。 [http://jasmine.github.io/2.0/custom_matcher.html](http://jasmine.github.io/2.0/custom_matcher.html)

您可以编写一个非常具体的匹配器，称为

```
expect(obj).toHaveMethod("methodName"); 
```

就我个人而言，我会写一些更通用的东西来检查值类型。这样，我不仅可以使用它来检查是否在对象/实例上定义了方法，还可以检查任何可以存储值的东西。它还使我可以检查函数类型以外的类型。

```
expect(obj.methodName).toBeA(Function); 
```

要让它工作，你必须确保添加 toBeA “匹配器”。

```
beforeEach(function(){
    jasmine.addMatchers({
      toBeA: toBeA
    });
});

function toBeA() {
  return {
    compare: function (value, type) {
      var result = {pass: val != null && val.constructor === type || val instanceof type};

      if (result.pass) {
        result.message = 'Expected ' + value + ' to be a ' + type.name
      } else {
        result.message = 'Expected ' + value + ' to not be a ' + type.name
      }

      return result;
    }
  };
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-09T15:24:23.533

我尝试了这个解决方案并且它有效：

```
spyOn(@xhr,"open") 
```

如果没有打开函数，它会抛出错误，因为它不能在上面启动 spyig

# android - 在具有相同 id 的 viewpager 中显示图像

> ID：15676405
> 
> 赞同：1
> 
> 时间：2013-03-28T07:30:53.333
> 
> 标签：android, image, arraylist, android-viewpager, universal-image-loader

我的应用程序是在 gridview 上单击图像并将其显示在 viewpager 中。我的数据库有两个表。tbl_cafe 和 tbl_pictures。tbl_cafe 存储了 id、title、desc 和 tbl_picture 存储了 cafe_id 和图片。

`ImagePagerActivity`我查询了 tbl_pictures 并存储在`<ArrayList<HashMap<String, Object>>`. ImagePagerActivity 我将通用图像加载器库用于`Viewpager`. 在 ViewpagerActivity 我查询图像名称并将其与 url 连接以下载图像。此时它显示了我数据库中的所有图像。

我使用不同的表格，导致我只能在 viewpager 中显示相同的 id 图像。

**我想要的是，`TopActivity`在 Viewpager 中仅显示具有相同 ID 的图像后，单击我的网格视图上的图像。**

热门活动

```
gridView1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            Intent i = new Intent(TopActivity.this, ImagePagerActivity.class);
            i.putExtra(CafeDbOpenHelper.CAFE_ID, position);
            i.putExtra(CafeDbOpenHelper.CAFE_TITLE, position);
            i.putExtra(CafeDbOpenHelper.CAFE_ADDRESS, position);
            i.putExtra(CafeDbOpenHelper.CAFE_DESCRIPTION, position);
            startActivity(i);
        }
    }); 
```

tbl_cafe & tbl_pictures

![在此处输入图像描述](../Images/db40ffc3c6c9f6d3798e2163a0fa4fe6.png)

ImagePagerActivity 完整的[ImagePagerActivity](http://pastie.org/7147004)

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ac_image_pager);

    dataSource = new CafeDataSource(this);
    dataSource.open();
    arrCursor = dataSource.getArrCursor();
    arrCursorPicture = dataSource.getArrCursorPicture();
    pagerPosition  = arrCursorPicture.size();

    ImageLoader.getInstance().init(config);

    if(savedInstanceState != null){
        position = savedInstanceState.getInt(STATE_POSITION);
    }   

    pager = (ViewPager) findViewById(R.id.pager);
    arrImageUrl = getArrImageUrl();
    pager.setAdapter(new ImagePagerAdapter(arrImageUrl));
    pager.setCurrentItem(0);

} // End onCreate

public ArrayList<HashMap<String, Object>> getArrImageUrl(){
    arrImageUrl = new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> map;
    for (int i = 0; i < pagerPosition; i++) {
        map = new HashMap<String, Object>();
        url = "http://xxx.xxx/xxx/place_pictures/"+arrCursorPicture.get(i).get(CafeDbOpenHelper.PICTURE_URL);
        map.put("image_url", url);
        arrImageUrl.add(map);
    }
    return arrImageUrl;

}

@Override
public void onSaveInstanceState(Bundle outState){
    outState.putInt(STATE_POSITION, pager.getCurrentItem());
}

private class ImagePagerAdapter extends PagerAdapter {

    private ArrayList<HashMap<String, Object>> myArr = new ArrayList<HashMap<String,Object>>();;
    private LayoutInflater inflater;

    ImagePagerAdapter(ArrayList<HashMap<String, Object>> myArr) {
        this.myArr = myArr;
        inflater = getLayoutInflater();
        imageLoader = ImageLoader.getInstance();
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public int getCount() {
        return myArr.size();
    }

    @Override
    public Object instantiateItem(ViewGroup view, int position) {
        View imageLayout = inflater.inflate(R.layout.item_pager_image, view, false);
        ImageView imageView = (ImageView) imageLayout.findViewById(R.id.imv_pager);
        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

        imageLoader.displayImage((String) myArr.get(position).get("image_url"), imageView, options, new SimpleImageLoadingListener() {
            @Override
            public void onLoadingStarted(String imageUri, View view) {
                spinner.setVisibility(View.VISIBLE);
            }

            @Override
            public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
                String message = null;
                switch (failReason.getType()) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case DECODING_ERROR:
                        message = "Image can't be decoded";
                        break;
                    case NETWORK_DENIED:
                        message = "Downloads are denied";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                spinner.setVisibility(View.GONE);
            }

            @Override
            public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
                spinner.setVisibility(View.GONE);
            }
        });

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:52:04.730

你到底想在这里做什么？

```
 i.putExtra(CafeDbOpenHelper.CAFE_ID, position);
        i.putExtra(CafeDbOpenHelper.CAFE_TITLE, position);
        i.putExtra(CafeDbOpenHelper.CAFE_ADDRESS, position);
        i.putExtra(CafeDbOpenHelper.CAFE_DESCRIPTION, position); 
```

你所做的只是把你的信息放在一个数字上。表示列表中项目位置的数字。

您想使用它来获取原始对象及其列表中的数据。

# android - dalvikvm-heap 在上传视频时增长堆（碎片案例）android

> ID：15676409
> 
> 赞同：2
> 
> 时间：2013-03-28T07:31:08.307
> 
> 标签：android

我在从 4x 设备上传视频时遇到问题。我知道只有 15 秒的视频录制会在三星 S2 中创建一个 30 mb 的文件，但是当我尝试首先在 php 服务器上上传视频时，它会显示像 D 这样的味精/dalvikvm(7638): GC_FOR_ALLOC 释放 263K, 9% free 12838K/14087K, 暂停 13ms, 总共 13ms I/dalvikvm-heap(7638): 将堆（碎片情况）增加到 14.481MB 分配 1048592 字节 D/dalvikvm(7638 ): GC_FOR_ALLOC freed <1K, 9% free 13861K/15175K, paused 22ms, total 22ms D/dalvikvm(7638): GC_CONCURRENT freed <1K, 9% free 13862K/15175K, paused 12ms+2ms, total 27ms

```
I know it is the memory managment concept and device memory dependent but I want a real solution for it as I am stuck here from quite a few days.
Below is my code to call and upload the video to server.

public void newmethod( String Imageurl ) throws ClientProtocolException, IOException
{
    byte[] data ; 
    int bytenumber,bufferSize,bytesRead;
    int maxBufferSize = 1*1024*1024;
      DataOutputStream dos = null;
     //File sourceFile =  searchForFileInExternalStorage("video.3gp");

     Log.e("in the method the path", ""+Imageurl);

      FileInputStream fileInputStream = new FileInputStream(Imageurl);
      bytenumber = fileInputStream.available();
      Log.e("in the method the the size of the file is", ""+bytenumber);
     // dos = new DataOutputStream(conn.getOutputStream());
      bufferSize = Math.min(bytenumber, maxBufferSize);
      data = new byte[bufferSize];
     //ProgressDialog pr = new ProgressDialog(getApplicationContext());
    // pr.addContentView(getCurrentFocus(), null);
       // read file and write it into form...
       bytesRead = fileInputStream.read(data, 0, bufferSize);

       while (bytesRead > 0) {
       // dos.write(data, 0, bufferSize);
        bytenumber = fileInputStream.available();
         bufferSize = Math.min(bytenumber, maxBufferSize);
        bytesRead = fileInputStream.read(data, 0, bufferSize);
        }

     // pr.show();

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost("http://67.52.165.116/Kakz/mobiles/uploadvideo");
    ByteArrayBody bab = new ByteArrayBody( data, Imageurl);
    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    reqEntity.addPart("user_video", bab);

    FormBodyPart bodyPart=new FormBodyPart("title", new StringBody(title));
    reqEntity.addPart(bodyPart);
    bodyPart=new FormBodyPart("desc", new StringBody(description));
    reqEntity.addPart(bodyPart);
    bodyPart=new FormBodyPart("source", new StringBody("android"));
    reqEntity.addPart(bodyPart); 
    postRequest.setEntity(reqEntity);
    final HttpResponse response = httpClient.execute(postRequest);
    // FileInputStream fileInputStream = new FileInputStream(response.getEntity().getContent());

    runOnUiThread(new Runnable() {
         public void run() {

    //stuff that updates ui

             BufferedReader in = null;
            try {
                in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            } catch (IllegalStateException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
                String line = null;

    try {
        while((line = in.readLine()) != null) {
            System.out.println(line);

            titleText.setText("");
            descriptionText.setText("");
          //  Toast.makeText(getApplicationContext(), "Video Uploaded successfully", Toast.LENGTH_LONG).show();

            if (line.equalsIgnoreCase("Its too Heavy")) {
            //  pr.dismiss();
                // titleText.setText("");
                //descriptionText.setText("");
                Toast.makeText(getApplicationContext(), "Video size is too heavy", Toast.LENGTH_LONG).show();

            }

            else if (line.equalsIgnoreCase("Error")) {
            //  pr.dismiss();
                // titleText.setText("");
                //descriptionText.setText("");
                Toast.makeText(getApplicationContext(), "Error uploading video", Toast.LENGTH_LONG).show();

            }

            else  if (line.equalsIgnoreCase("Uploaded")) {
                //pr.dismiss();
                 //titleText.setText("");
                //descriptionText.setText("");
                Toast.makeText(getApplicationContext(), "Video uploaded successfully", Toast.LENGTH_LONG).show();

            }

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
         }
});

Please let me know that how I should manage the code to get it right.
Any help would be appreciated ASAP`enter code here` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:53:40.610

> 我在从 4x 设备上传视频时遇到问题。

这不是问题。当您进行成本非常高的操作时，这是正常行为。您的堆大小（隐式确定）在一瞬间还不够，因此需要长大。你应该如何写入清单是平等的行为

```
android:largeHeap="true" 
```

这个属性不起作用。当堆需要更大的大小时，它会自己长大——当它需要的时候。当您没有太多内存时，通常会显示此消息。

> GC_FOR_ALLOC 释放 263K，9% 释放 12838K/14087K，暂停 13ms，总共 13ms I/dalvikvm-heap(7638)

在这里你只有 9% 的内存和堆需要长大。通常它发生在`ALLOC`低于 10% 的时候，并且无论你是否使用 Thread 都没有关系，一旦它是一个高成本的操作。当您的堆大小达到一个“临界点”时，出于安全原因以及虚拟机，应用程序将自动停止。

一种可能的解决方案是您需要将文件拆分为更小的块并逐个上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:41:20.040

我不知道回答我自己的问题是个好主意。但是我仍然想为那些像我一样面临同样问题的人提供我的经验，因为在搜索了很多东西之后，我知道这个问题没有具体的解决方案，因为它依赖于设备和大量的内存消耗过程。然后我寻找其他选项，例如在上传之前压缩视频，但我也没有为此获得任何开源库。所以现在视频上传并不像我一开始想的那么简单。:)

# php - 使用 php 下载图像并同时调整其大小

> ID：15676416
> 
> 赞同：-3
> 
> 时间：2013-03-28T07:31:29.453
> 
> 标签：php

我想下载这张图片： `http://imgs.xkcd.com/clickdrag/1n2w.png`

但是图像对我来说太大了，所以我想调整它的大小，让它比现在小 100 倍。我还希望图像具有其原始名称（在本例中为 1n2w.png）。

```
For downloading i was thinking of using somet
$content = file_get_contents('http://imgs.xkcd.com/clickdrag/1n2w.png');
file_put_contents('/images', $content); 
```

但它没有用。也许我需要为此使用 curl？至于调整大小的部分，我不知道该使用什么，所以如果可能的话，我也希望看到一些关于此的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:36:16.267

对于图像重新调整大小，您可以使用它。

```
 $percent = 0.5;

    $filename = '/home/Pictures/downloaded_file.jpg';

    header('Content-type: image/jpeg');

    list($width, $height) = getimagesize($filename);

    $new_width = $width * $percent;

    $new_height = $height * $percent;

    $image_p = imagecreatetruecolor($new_width, $new_height);

    $image = imagecreatefromjpeg($filename)
    ;
    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

    imagejpeg($image_p, null, 100); 
```

# c# - 静态字段初始化失败

> ID：15676419
> 
> 赞同：0
> 
> 时间：2013-03-28T07:31:37.207
> 
> 标签：c#, .net

我已经简化了我的问题，因为扩展方法与它无关。

这是代码片段：

```
class MyClass
{
    private static readonly char[] InvalidChars = new []{'\\', '/'};

    public MyClass()
    {
        if (InvalidChars == null)
        {
             //how can this block be accessable? 
        }
    } 

} 
```

我的问题是：在 MyClass 构造函数中访问 InvalidChars 时，是否有任何情况可以返回 null？显然有，因为这是我在我的应用程序中看到的。虽然我不明白这怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:37:07.870

由于您已将其标记为静态，因此只读变量只能在类的静态构造函数中初始化。

在声明中初始化变量时，例如：

```
public readonly int y = 5; 
```

对于实例字段，在包含字段声明的类的实例构造函数中，**或者对于静态字段，在包含字段声明的类的静态构造函数中。**这些也是唯一可以将只读字段作为 out 或 ref 参数传递的上下文。

因此，当您删除声明中的 static 关键字时，您将能够在构造函数中初始化变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:06:51.567

Ohoho，对不起，我在仔细查看调用堆栈后发现了问题。你是对的，我的代码示例不完整。这是完整的版本：

```
class MyClass
{
    private static readonly MyClass Default = new MyClass();
    private static readonly char[] InvalidChars = new []{'\\', '/'};

    public MyClass()
    {
        if (InvalidChars == null)
        {
         //how can this block be accessable? 
        }
    } 

} 
```

难怪我得到一个空值。

# c# - 获取 Sybase 数据库的“底层提供程序在打开时失败”异常

> ID：15676420
> 
> 赞同：0
> 
> 时间：2013-03-28T07:31:39.000
> 
> 标签：c#, entity-framework, sybase

我正在开发使用 Sybase 数据库和实体框架来访问数据库的应用程序。我正在尝试让应用程序自行打开连接并关闭它。我使用 Sybase 数据库文件创建了模型，现在连接到它以获取数据。但是当我尝试获取数据时，我得到异常“底层提供程序无法打开”。

这是我的代码。

```
var connectionString = metadata=res://*/SampleModel.csdl|res://*/SampleModel.ssdl|res://*/SampleModel.msl; + 
         provider=iAnywhere.Data.SQLAnywhere; + 
         provider connection string="DBF=D:\SampleDatabase.db;UID=DBA;PWD=sql"
var dataContext = new SampleContext(connectionString);
var contacts = dataContext.Contacts; --> Here I get this exception. 
```

注意：如果我在 ODBC 中创建 DSN 并使用 DSN 而不是给出文件名，它会给我未连接到数据库异常。如果我打开这个连接并且不关闭它，那么它工作正常。但我不想创建 DSN 条目并手动打开它。我希望我的程序能够做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:58:42.423

我的 Sybase 版本有问题。我使用的是 Sybase 12 的 3840 版本。我删除了它并安装了 3769 版本，它工作正常。在不同的论坛上，我发现最新的（3840）有问题。

# mysql - 批量将所有 MySQL 列设置为全部 NULL

> ID：15676421
> 
> 赞同：3
> 
> 时间：2013-03-28T07:31:44.563
> 
> 标签：mysql, null

我有一个大型数据库，其中包含一堆表和列，其中一些允许 NULL，而另一些则不允许 NULL..

我最近刚刚决定标准化我的方法并为所有空字段等使用 NULL。因此我需要在我的所有表中设置所有列以允许 NULL（当然，主要的除外）

我可以编写一个 php 代码来循环这个，但我想知道是否有一种快速的方法可以通过 SQL 来完成它？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:44:49.437

您可以使用系统表中的元数据来确定您的表、列、类型等。然后使用它，动态构建一个包含您的 UPDATE SQL 的字符串，并将表名和列名连接到其中。然后执行。

我最近发布了一个解决方案，该解决方案允许 OP 搜索包含特定值的列。代替任何人提供更完整的答案，这应该会给你一些关于如何解决这个问题的线索（或者至少，研究什么）。您需要提供表名或加入它们，然后执行与此类似的操作，除了您要检查类型而不是值（并且您构建的动态 SQL 将构建更新，而不是选择）。

我将在几个小时内进一步帮助您解决您的具体情况......如果到那时您对此（或其他答案）没有运气，那么我将提供更完整的内容。

**编辑：**刚刚意识到您已将其标记为 mySql... 我的解决方案是针对 MS SQL Server。假设 MySql 允许您查询其元数据并执行动态生成的 SQL 命令，原则应该是相同的（因此我将保留这个答案，因为我认为您会发现它很有用）。

[SQL Server - 选择满足特定条件的列？](https://stackoverflow.com/questions/15538985/sql-server-select-columns-that-meet-certain-conditions/15539460#15539460)

# javascript - 在 innerHTML 中加载 javascript

> ID：15676426
> 
> 赞同：0
> 
> 时间：2013-03-28T07:32:16.303
> 
> 标签：javascript

如何将javascript加载到innerhtml并执行脚本，我的脚本只是没有警报hello world，而是从openx嵌入的代码。

CODE 1\. 这是我的原始代码，这段代码会显示一个横幅：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div id="banner">
            <script type='text/javascript'>
                <!--//<![CDATA[
                var m3_u = (location.protocol=='https:'?'https://203.130.226.231/advediax/www/delivery/ajs.php':'http://203.130.226.231/advediax/www/delivery/ajs.php');
                var m3_r = Math.floor(Math.random()*99999999999);
                if (!document.MAX_used) document.MAX_used = ',';
                document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
                document.write ("?zoneid=1");
                document.write ('&amp;cb=' + m3_r);
                if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
                document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
                document.write ("&amp;loc=" + escape(window.location));
                if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
                if (document.context) document.write ("&context=" + escape(document.context));
                if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
                document.write ("'><\/scr"+"ipt>");
                //]]>-->
            </script>
        </div>
    </body>
</html> 
```

CODE 2\. 这是我的转换代码。但不工作，我想在上面的代码中显示横幅：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <script>
            function getstring(){
                var mystring = '<!--//<![CDATA \nvar m3_u = (location.protocol=="https:"?"https://203.130.226.231/advediax/www/delivery/ajs.php":"http://203.130.226.231/advediax/www/delivery/ajs.php");'+
                    'var m3_r = Math.floor(Math.random()*99999999999);'+
                    'if (!document.MAX_used) document.MAX_used = ",";'+
                    'document.write ("<scr"+"ipt type=\'text/javascript\' src=\'"+m3_u);'+
                    'document.write ("?zoneid=1");'+
                    'document.write (\'&amp;cb=\' + m3_r);'+
                    'if (document.MAX_used != \',\') document.write ("&amp;exclude=" + document.MAX_used);'+
                    'document.write (document.charset ? \'&amp;charset=\'+document.charset : (document.characterSet ? \'&amp;charset=\'+document.characterSet : \'\'));'+
                    'document.write ("&amp;loc=" + escape(window.location));'+
                    'if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));'+
                    'if (document.context) document.write ("&context=" + escape(document.context));'+
                    'if (document.mmm_fo) document.write ("&amp;mmm_fo=1");'+
                    'document.write ("\'><\/scr"+"ipt>");'+
                    '//]]>-->';
                return mystring;
            }

            var div = document.createElement("div");
            div.id="banner";
            div.innerHTML = getstring();
            div.style.cssText = "padding: 10px; border:1px solid; background-color: #000; color: #fff;";
            document.getElementsByTagName("body")[0].appendChild(div);
            document.getElementsByTagName("body")[0].insertBefore(
            document.getElementById("banner"),
            document.getElementsByTagName("body")[0].firstChild);

            var scripts = getstring();
            for (var i = 0; i < scripts[i].length; i++) {
                eval(scripts[i].text);
            }

        </script>
    </body>
</html> 
```

我希望 CODE 2 与 CODE 1 一样运行。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:49:22.550

将您的 getString() 放入 eval()

~~div.innerHTML = eval(getstring());~~

~~当我测试您的代码 2 示例时，它对我有用。~~

编辑：请参阅下面关于此答案的第一条评论

# jquery - 添加 jQuery Mobile 时页面加载两次？

> ID：15676429
> 
> 赞同：1
> 
> 时间：2013-03-28T07:32:46.627
> 
> 标签：jquery, iphone, jquery-mobile, mobile

我对 jQuery mobile 有一个奇怪的问题。当我添加 jQuery mobile 时，以前的工作页面停止工作。当我诊断时，我发现 jQuery mobile 仅在移动 Iphone（而不是桌面）中向同一页面发送额外请求。我已经解决了服务器端的问题，使用，

```
 if (Request.Url == Request.UrlReferrer) {
       Response.End();
 } 
```

现在正在工作。但是如何阻止 jQuery mobile 发送这个额外的请求。注意如果我删除 jQuery mobile，一切都很好。

# java - 使用 Final For If 条件

> ID：15676433
> 
> 赞同：4
> 
> 时间：2013-03-28T07:32:56.360
> 
> 标签：java

我知道如何使用 final 来设置 int，如下所示：

```
final int junk = whatever ? 1 : 2; 
```

但是，如何在更复杂的 if 语句中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T07:33:57.160

## 如何使用 Java “final” 在 if() 条件中设置值

**示例**：

```
final int junk;
if(whatever) {
    junk = 1;
} else {
    junk = 2;
} 
```

您可以将最终值设置嵌套到任何深度，如果您进行任何重复或跳过任何路径，Java 将标记错误。

**示例**：

```
final int junk;
if(whatever) {
    junk = 1;
} else {
    if(however) {
        junk = 2;
    } else {
        junk = 3;
    }
} 
```

我`final`尽可能使用局部变量闭包，以确保不会意外重用变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:42:56.053

您可以将`?`运算符用于嵌套*的 if 语句*，如下所示：

```
final int junk = whatever ? 1 : whatever2 ? 3 : 4; .... and so on 
```

（如果这就是你所说的*“复杂”*的意思）

虽然，当您遇到*“复杂*`if-else`”条件时，使用它而不是运算符更具可读性`?`。

# c# - AJAX modalpopupextender 中的 Tabindex

> ID：15676435
> 
> 赞同：1
> 
> 时间：2013-03-28T07:33:06.930
> 
> 标签：c#, asp.net, ajax, tabindex

我有一个 AJAX ModalPopupExtender，其中还有另一个 ModalPopupExtender。我实际上是在子弹出窗口中使用 tabindex。当显示父弹出窗口时，tabindex 工作正常，当在父项中显示子弹出窗口时（使用链接按钮单击），tabindex 不起作用；t work.. 以前有人知道这个问题吗？如果是，请告诉我解决方案。

# javascript - jQuery .on('click') 与 :not() 选择器一起使用时触发多次

> ID：15676441
> 
> 赞同：3
> 
> 时间：2013-03-28T07:33:31.397
> 
> 标签：javascript, jquery

早上好，

我在页面上有一组显示为列表的框，在这些框中可能有一些可以单击的链接。我希望框内的链接正常工作（即冒泡并执行默认操作或然后由事件处理程序进一步处理 DOM），但如果在其他任何地方单击框，则它应该被特定的附加到包含所有框的“列表”的事件处理程序。

简单的 html 表示

```
<div class="boxlist">
    <div class="box" data-boxid="1">
        Some text, and possibly a <a href="#">link</a> and another <a href="#">link</a>, and perhaps even a third <a href="#">link</a>.
    </div>
    <div class="box" data-boxid="2">
        Some more text, this time without a link.
    </div>
</div> 
```

我认为应该工作的javascript。

```
$(function () {
    $('.boxlist').on('click', '.box :not(a)', function (e) {
        var boxid= $(this).closest('.box').data('boxid');
        console.log('open: ' + boxid);
    });
}); 
```

我的期望是上面的 javascript 应该处理所有不是来自标签的点击。但是，由于某种原因，当单击框时（框本身或标签都无关紧要），它会触发此事件 X 次，其中 X 是框列表中的标签总数。

所以我有两个问题： 1\. 我在 :not() 选择器上做错了什么。2.有没有更好的方法来处理这种情况？

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:46:57.477

linkUsing jQuery :not 选择器实际上非常慢，例如： http: [//jsperf.com/not-vs-notdasdsad/4](http://jsperf.com/not-vs-notdasdsad/4)，最好只使用[事件委托](http://davidwalsh.name/event-delegate)。因此，在这种情况下，您希望跟踪 .boxlist 上的每次点击，但检查节点类型以查看其是否为锚点。这是一个例子。

```
$(function () {
    $('.boxlist').on('click', function(ev){
        if(ev.target.tagName != "A"){
            // handle box click code
            console.log('box click');
            return false;
        }
        // Otherwise allow event to bubble through.
    });
}); 
```

这是一个jsfiddle示例 [http://jsfiddle.net/drXmA/](http://jsfiddle.net/drXmA/)

他们也是您的代码不起作用的几个原因

```
.box :not(a) 
```

应该

```
.box:not(a) 
```

并且这也不起作用的原因是因为 .box 不是锚标记它具有作为锚标记的子元素它永远不会找到名为 .box 的锚标记，如果它们是一个回调将不会执行。将 .box 更改为锚标记将使代码不会执行，因为 .box 是锚并且它仅在 .box:not(a) 时运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:52:24.567

我猜你想要这样的东西：

```
$('.boxlist').on('click', '.box:not(a)', function (e) {
   var boxid = $(this).closest('.box').data('boxid');
   console.log('open: ' + boxid);
}).on('click', '.box a', function (e) {
   e.preventDefault().stopPropagation();
}); 
```

### [演示小提琴](http://jsfiddle.net/6peyQ/)

我认为最好停止默认行为并停止事件冒泡到其父级。`.on()`链接到其中`.box`排除的项目`<a>`并停止默认行为和事件气泡`e.preventDefault().stopPropagation();`

# javascript - 内联样式中删除了无效的 css 属性

> ID：15676445
> 
> 赞同：2
> 
> 时间：2013-03-28T07:33:49.120
> 
> 标签：javascript, css, inline-styles

我在元素中定义了一些内联样式

```
<div id="box" style="-ms-grid-row:1; background-color: yellow;"></div> 
```

然后用javascript我想设置一个样式。

```
var box = document.getElementById('box');
box.innerHTML += '<br>before: ' + box.getAttribute('style');
box.style.height = '100px';
box.innerHTML += '<br>after: ' + box.getAttribute('style'); 
```

输出变为：

```
before: -ms-grid-row:1; background-color: yellow;
after: background-color: yellow; height: 100px; 
```

测试[http://jsfiddle.net/P7eBN/](http://jsfiddle.net/P7eBN/)

浏览器删除了我不希望这样做的 -ms-grid-row 属性，因为我正在编写一个使用 -ms-grid-row 属性读取内联样式的插件，因此需要以某种方式保留 -ms-grid-row 。使用 jQuery 时也是如此，例如。`$(box).height(100)`

我怎样才能以最好的方式允许用户通过 style.height 设置高度，并且之后仍然能够以某种方式读取 -ms-grid-row 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:40:50.480

*我正在编写一个使用 -ms-grid-row 属性读取内联样式的插件，因此需要以某种方式保留 -ms-grid-row*。听起来像是数据属性的工作：

```
<div id="box" data-ms-grid-row="1" style="background-color: yellow;"></div> 
```

您的插件会将其读取为（跨浏览器方式）

```
box.getAttribute('data-ms-grid-row') 
```

或者对于现代浏览器：

```
box.dataset.msGridRow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:39:10.117

那这个呢？

```
var box = document.getElementById('box');
box.innerHTML += '<br>before: ' + box.getAttribute('style');
box.setAttribute('style', box.getAttribute('style') + ' height : 100px;');
box.innerHTML += '<br>after: ' + box.getAttribute('style'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:37:13.990

当您编写任何 CSS 样式时，它将被浏览器过滤并应用于元素。比如说，你写这个 CSS：

```
border-radius: 5px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px; 
```

当你在 Chrome 开发者工具中检查时，你只会看到`-webkit-border-radius: 5px;`，其他的不会被应用。

**解决方案**

假设您将 HTML 提供给一个不错的浏览器版本，那么您可以使用这些`data-`属性。以这种方式将样式发送到两者：

```
style="border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;"
data-style="border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;" 
```

现在您阅读`data-style`, 而不是`style`. 您的最终代码将类似于：

```
var box = document.getElementById('box');
box.innerHTML += '<br>before: ' + box.getAttribute('data-style');
box.setAttribute('style', box.getAttribute('style') + '; height : 100px');
box.innerHTML += '<br>after: ' + box.getAttribute('data-style'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:21:14.487

我在 Internet Explorer 9 上尝试了您的页面，并按预期保留了该属性。-ms- 前缀被 Internet Explorer 以外的浏览器忽略。因此你无法看到它。

# css - 自定义输入 [type="submit"] 样式不适用于 jquerymobile 按钮

> ID：15676447
> 
> 赞同：18
> 
> 时间：2013-03-28T07:33:54.587
> 
> 标签：css, html, jquery-mobile

我想在带有 jquerymobiles 按钮的 input[type="submit"] 按钮上使用我的自定义样式，但它不起作用。我的html代码是：

```
<input type="submit"  value="Button name"> 
```

我的CSS代码是：

```
input[type="submit"]
{
    border:1px solid red;
    text-decoration:none;
    font-family:helvetica;
    color:red;
    background:url(../images/btn_hover.png) repeat-x;
} 
```

当我使用以下 html 代码时，同样的风格适用：

```
<a href="#" class="selected_btn" data-role="button">Button name</a> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T09:31:18.983

### jQuery 移动 >= 1.4

创建一个自定义类，例如`.custom-btn`. 请注意，要在不使用 的情况下覆盖 jQM 样式`!important`，应尊重 CSS 层次结构。`.ui-btn.custom-class`或`.ui-input-btn.custom-class`。

```
.ui-input-btn.custom-btn {
   border:1px solid red;
   text-decoration:none;
   font-family:helvetica;
   color:red;
   background:url(img.png) repeat-x;
} 
```

添加`data-wrapper-class`到`input`. 自定义类将被添加到`input`包装 div。

```
<input type="button" data-wrapper-class="custom-btn"> 
```

> **[演示](http://jsfiddle.net/Palestinian/w0mzswqd/)**

* * *

### jQuery 移动 <= 1.3

`Input`按钮由具有类的 DIV 包装`ui-btn`。您需要选择该 div 和`input[type="submit"]`. 使用`!important`对于覆盖 Jquery Mobile 样式是必不可少的。

> [**演示**](http://jsfiddle.net/Palestinian/SkKVX/)

```
div.ui-btn, input[type="submit"] {
 border:1px solid red !important;
 text-decoration:none !important;
 font-family:helvetica !important;
 color:red !important;
 background:url(../images/btn_hover.png) repeat-x !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:14:29.737

我假设您无法使用锚标记让 css 为您的按钮工作。`!important`因此，您需要使用属性覆盖被其他元素覆盖的 css 样式。

**HTML**

```
<a href="#" class="selected_btn" data-role="button">Button name</a> 
```

**CSS**

```
.selected_btn
{
    border:1px solid red;
    text-decoration:none;
    font-family:helvetica;
    color:red !important;            
    background:url('http://www.lessardstephens.com/layout/images/slideshow_big.png') repeat-x;
} 
```

这是**[演示](http://jsfiddle.net/gs6sv/)**

# php - 更改区域设置后保存/恢复表单数据

> ID：15676451
> 
> 赞同：0
> 
> 时间：2013-03-28T07:34:06.573
> 
> 标签：php, jquery, forms

我有一个用 PHP（前端的 jQuery/JS）编写的数据库应用程序，它有双语标签/文本。目前只能在维护页面上更改自己的语言（表单提交，然后 PHP 用他们的新语言选择更新会话变量），但用户希望我添加一个语言下拉菜单，该下拉菜单会出现在所有页面的角落。当页面包含表单时，我不希望用户在碰巧更改语言时丢失部分输入的数据，因此我需要以某种方式保存/恢复表单数据。有没有简单的方法可以做到这一点？我知道我可以使用 jQuery 来序列化表单，但是接下来呢？将添加到 URL 中的内容发送并在 PHP 中获取？然后呢？编写一些例程来遍历表单字段并正确处理它们（输入、选择、单选框等）。都不同）？似乎应该有一个更简单的方法。我不介意将自己限制在支持 HTML5 的解决方案或添加 jQuery 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:43:39.590

[本地存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)怎么样？

如果用户填写了任何输入字段，请将它们保存到 localStorage 并在用户提交表单后删除数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:39:13.813

我的建议是：

`$.ajax`将语言更改到服务器时使用或提交语言和任何想要的用户数据`$.post`

# java - 移动精灵的方向

> ID：15676452
> 
> 赞同：4
> 
> 时间：2013-03-28T07:34:09.817
> 
> 标签：java, math, direction

我正在做一个简单的突破游戏，但我有一些问题要理解我应该如何处理球的速度和方向，以使其在不同的对角线路径上移动。我在更新方法中使用此代码：

```
xPos += xSpeed * direction;
yPos += ySpeed * direction; 
```

如果我使用不同的值`xSpeed = 2`，`YSpeed = 1`我可以更改为不同的对角线路径，但我仍然想要相同的速度。如果我增加 的值`xSpeed = 4`以获得另一条对角线路径，那么速度也会增加，我希望球以相同的速度移动。对于`direction`I 的值，使用 1 或 -1。但我想改变 的值`direction`以获得对角线路径的度数会更好吗？在突围比赛中，球必须朝相反的方向反弹。我数学不好，所以我会寻求一些帮助来解决这个问题。有什么想法可以改进我的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:38:49.610

您可以使用`sine`and`cosine`函数来获得`x`和`y`轴的相对运动。

像：

```
xPos += speed * Math.sin(movementAngle);
yPos += speed * Math.cos(movementAngle); 
```

在各种动画中使用上述（[极坐标](http://en.wikipedia.org/wiki/Polar_coordinate_system)）具有易于修改方向或运动速度（分别是`speed`和`movementAngle`变量）的优点。使用笛卡尔坐标（`x`和位置）时，速度或运动方向的变化将需要对和`y`进行不明显的更改。`x``y`

上述解决方案中的公式只不过是从极坐标到笛卡尔坐标的转换。

**编辑：**要获得更“自然”的行为，当`movementAngle`of`0`意味着向右移动时，`PI/2`-向上，`PI`-向左和`3*PI/2`-向右，请使用以下命令：

```
xPos += speed * Math.cos(-1*movementAngle);
yPos += speed * Math.sin(-1*movementAngle); 
```

# forms - Struts 2 - 日期实例变为字符串

> ID：15676466
> 
> 赞同：1
> 
> 时间：2013-03-28T07:35:58.330
> 
> 标签：forms, hibernate, struts2, submit, action

当我提交表单时，出现输入错误。`JourneyDate`是“日期”的实例。但是，这里它变成了不被 setter 和 getter 接受的 String。

```
<s:hidden name="JourneyDate" value="%{JourneyDate}"></s:hidden> 
```

我想要`JourneyPlan`作为日期类型，但它变成了字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:44:14.237

在将值传递给 getter/setter 之前尝试拦截该值。例如，从您的表单发送 JourneyDateString，从字符串创建一个日期，然后将其传递给您的 getter/setter。就像是：

```
public void setJourneyDateString(String journeyDateString)
{
     //journeyDateString could be "2013-03-28" for example
     Date journeyDate = new SimpleDateFormat("yyyy-MM-dd").parse(journeyDateString);
     setJourneyDate(journeyDate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:31:00.193

您在`value`属性中设置的对象将保持其类型为`Date`. 然后需要在action中定义相应的setter来设置`Date`. 如果您将值放在标签的正文中，它将转换为字符串。

# python - SCRIPT_NAME 与 apache cgid 模块中的 web.py 不匹配 REQUEST_URI

> ID：15676467
> 
> 赞同：1
> 
> 时间：2013-03-28T07:36:01.693
> 
> 标签：python, apache, web.py

我正在尝试使用 mod_cgid 模块在 Apache 中部署我的 web.py 应用程序。

我在 urls.py 中定义了这样的 url

```
urls = (
    '/app/', 'index.index',
    '/', 'index.index'
) 
```

这是我的应用程序启动 webstart.py 的地方

```
import web, urls, sys, os
def notfound():
    return web.notfound()
if __name__ == "__main__":
   app = web.application(urls.urls, globals())
   app.notfound = notfound
   app.run() 
```

我的 Apache 配置如下所示

```
<Directory "dirname">
   Options +ExecCGI +FollowSymLinks +Indexes
   Order allow,deny
   Allow from all
   Require all granted
   DirectoryIndex webstart.py
</Directory> 
```

当我尝试使用 localhost/app/ 访问我的服务器时，它总是显示未找到的页面，并且在日志中，我看到消息**“警告：SCRIPT_NAME 与 REQUEST_URI 不匹配”**

然后我尝试在它自己的未找到页面中打印这两个变量，我分别得到了 /app/webstart.py 和 /app/ 。

当我使用 localhost/app/ 访问它时，如何让我的应用程序工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:53:35.047

```
DirectoryIndex webstart.py 
```

您已经在 Apache 配置中为目录访问指定了默认主页。因此，当您访问诸如 URL 之类的目录时，例如。`localhost/app/`, Apache 将此视为`localhost/app/webstart.py`然后将请求发送到 web.py。尝试从 Apache 配置中删除该条目并重新启动 Apache 守护程序。

**更新**：

当你[通过 CGI 部署 web.py 时](http://webpy.org/cookbook/cgi-apache)，你会得到一个 server 条目`http://localhost/webstart.py`，因为你已经`ScriptAlias`ed`/`成为你的 CGI 脚本目录。webstart.py 中的路由定义位于该 url 之后。所以你应该参观`http://localhost/webstart.py/app/`你的`/app/`路线。你需要一些`mod_rewrite`定义来获取像`http://localhost/app/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:45:08.460

无法解决这个问题，所以使用了 wsgi 模块。我就是这样做的... [http://dfourtheye.blogspot.in/2013/03/deploying-webpy-application-in-apache.html](http://dfourtheye.blogspot.in/2013/03/deploying-webpy-application-in-apache.html)

# php - 打开 Yii 应用程序导致下载 index.php

> ID：15676469
> 
> 赞同：2
> 
> 时间：2013-03-28T07:36:05.563
> 
> 标签：php, linux, ubuntu, yii

我最近`Yii`在我的 linux-ubuntu 系统中下载。将文件解压缩到 后`/var/www/vishnu/`，我开始创建第一个`webapp`.

我所做的是`/var/www/vishnu/yii/framework/yiic webapp anyname`在我的命令行中执行。它成功地在下创建了应用程序`/home/ti/anyname`

但是每当我尝试访问它时，它都会下载`index.php`文件而不是打开 webapp 主页！为什么会这样？我试过了，以下网址..

*   localhost/vishnu/anyname/ - 未找到返回
*   home/ti/anyname/index.php- 下载文件
*   home/ti/anyname/index-test.php- 下载文件

我可以看到文件`file:///home/ti/anyname/`但无法打开任何东西。当我点击它时，它正在被下载！如果您有任何解决方案，请分享您的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:43:31.767

非常感谢你。我从[这个](http://roshanbook.wordpress.com/2012/03/21/starting-yii-development-in-ubuntu-part-1/)博客得到它。

我改变了`command`这样，webapp 将指向我的`localhost`itslef。

IE`php /var/www/vishnu/yii/framework/yiic.php webapp /var/www/vishnu/yii/anyname/`

现在它的工作...... :)

# java - Pig：在 Java 中将字符串重解析为元组

> ID：15676470
> 
> 赞同：1
> 
> 时间：2013-03-28T07:36:06.333
> 
> 标签：java, apache-pig

我将有一个 Pig 脚本，最后将其内容存储在一个文本文件中。

```
STORE foo into 'outputLocation'; 
```

在一个完全不同的工作中，我想读取这个文件的行，并将它们解析回元组。foo 中的数据可能包含字符数组，其中包含保存 Pig Bags/tuples 时使用的字符，例如 { } ( ) 等。我可以使用类似的代码读取以前保存的文件。

```
FileSystem fs = FileSystem.get(UDFContext.getUDFContext().getJobConf());
FileStatus[] fileStatuses = fs.listStatus(new Path("outputLocation"));

for (FileStatus fileStatus : fileStatuses) {
    if (fileStatus.getPath().getName().contains("part")) {
        DataInputStream in = fs.open(fileStatus.getPath());             
        String line;
        while ((line = in.readLine()) != null) {
           // Do stuff
        }
    }
} 
```

现在在哪里`// Do stuff`，我想将我的字符串解析回元组。这可能吗/Pig 是否提供 API？我能找到的最接近的是 StorageUtil 类 textToTuple 函数，但这只会生成一个包含一个 DataByteArray 的元组。我想要一个包含其他包、元组、字符数组的元组，就像它原来的那样，这样我就可以轻松地重新获取原始字段。如果有帮助，我可以更改保存原始文件的 StoreFunc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T10:14:27.870

这是不使用 JSON 或 UDF 的普通 Pig 解决方案。我发现它很难。

```
import org.apache.pig.ResourceSchema.ResourceFieldSchema;
import org.apache.pig.builtin.Utf8StorageConverter;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.Tuple;
import org.apache.pig.newplan.logical.relational.LogicalSchema;
import org.apache.pig.impl.util.Utils; 
```

假设您要解析的字符串是这样的：

```
String tupleString = "(quick,123,{(brown,1.0),(fox,2.5)})"; 
```

首先，解析您的架构字符串。请注意，您有一个封闭的元组。

```
LogicalSchema schema = Utils.parseSchema("a0:(a1:chararray, a2:long, a3:{(a4:chararray, a5:double)})"); 
```

然后用你的模式解析你的元组。

```
Utf8StorageConverter converter = new Utf8StorageConverter();
ResourceFieldSchema fieldSchema = new ResourceFieldSchema(schema.getField("a0"));
Tuple tuple = converter.bytesToTuple(tupleString.getBytes("UTF-8"), fieldSchema); 
```

瞧！检查您的数据。

```
assertEquals((String) tuple.get(0), "quick");
assertEquals(((DataBag) tuple.get(2)).size(), 2L); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:13:48.487

我只是将数据输出为 JSON 格式。Pig 原生支持解析 JSON，直到元组。它将避免您必须编写 UDF。

# c# - ByteTag 识别在 SUR40 上不稳定（表面 2.0 sdk）

> ID：15676474
> 
> 赞同：0
> 
> 时间：2013-03-28T07:36:23.333
> 
> 标签：c#, xna, touch, multi-touch, pixelsense

我们正在使用**XNA**和**WPF**在触摸桌表面[**SUR40**](http://www.samsunglfd.com/product/feature.do?modelCd=SUR40)上开发应用程序，但供应商提供的打印字节标签在表面上效果不佳。

 ****详细信息是标签在桌面（触摸表面）周围移动或旋转时**闪烁。**而且，在某些角度，即使在静止状态下，**标签识别也会闪烁。**我已经遍历了几个论坛，但对于这个问题没有那么多明确的答案。

我在这里提出一些问题，以防有经验的人给出好的建议：

*   标签识别最重要的特征是什么：标签的平整度、标签大小、标签材料、背景场景……或其他。

*   如何序列化标签的生产。

我们尝试了很多方法（使用柔软的厚双面胶带、硬橡胶板、亚克力片），但都可以得到模糊的手动解决方案，我们无法区分为什么这块好而那些不是。

感谢您的所有帮助，因为我知道这个问题在编程领域非常隐蔽。

P/S：字节标签在这里： [http ://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11029](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11029)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:27:54.460

看看这个打印指南[http://msdn.microsoft.com/en-us/library/ee804885(v=surface.10).aspx](http://msdn.microsoft.com/en-us/library/ee804885(v=surface.10).aspx)

还有这个用于故障排除的线程[http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/78a9e60d-9f99-400f-9ba9-273843414314/](http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/78a9e60d-9f99-400f-9ba9-273843414314/)

众所周知，Surface v1 和 Surface v2 之间的标签跟踪性能有所下降，但这两个链接的提示可以帮助您获得更好的性能。

至于序列化生产，我不太确定你的意思。只有 255 个可能的值，因此打印一套完整的纸张不需要超过 4 张纸，然后您可以根据需要剪切和使用。****

# ruby-on-rails - cloud9,rails s, 权限被拒绝 - bind(2) (Errno::EACCES)

> ID：15676475
> 
> 赞同：0
> 
> 时间：2013-03-28T07:36:31.703
> 
> 标签：ruby-on-rails, cloud9-ide

当我使用 cloud9 的文档进行操作时[https://docs.c9.io/running_a_rails_app.html](https://docs.c9.io/running_a_rails_app.html)

最后，我编写了代码***rails s -p 3000 -b 0.0.0.0***

然后错误显示：

```
/opt/rh/ruby193/root/usr/share/ruby/webrick/utils.rb:85:in `initialize': Permission denied - bind(2) (Errno::EACCES)                                                                                                                                                               
   。。。。。。                                                                                                                                                                                                                              

     Error: you may be using the wrong PORT & HOST for your server app 
```

Cloud9 对于 rails，使用：'rails s -p $PORT -b $IP'
对于 Sinatra，使用：ruby app.rb -p $PORT -o $IP'

无论我尝试 ip 和端口，错误就是错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T11:29:41.677

我对 cloud9 IDE 没有任何经验，但假设您可以访问您的环境......我会尝试通过以下方式解决这个问题

1.  确保您的环境变量是正确的

    `echo '$PORT' # should be '3000' per your question`

    `echo '$IP' # should be '0.0.0.0' per your question`

2.  使用 rvmsudo 在端口 80 上运行您的 Web 服务器（端口 80，因为您的 iptables 中可能会发生什么——请参阅 #2）

    `rvmsudo rails s -b 0.0.0.0`

3.  修改您的 iptables 以允许端口 3000 上的流量

    `sudo vim /etc/sysconfig/iptables`

    添加行：`-A INPUT -m state --state NEW -m tcp -p tcp --dport 3000:7010 -j ACCEPT`

4.  更改您的 webrick 文件的用户、组和权限（显然更改您的“用户”和“组”）：

    `sudo chown user:group /opt/rh/ruby193/root/usr/share/ruby/webrick/*`

    `sudo chmod 755 /opt/rh/ruby193/root/usr/share/ruby/webrick/*`

完成后，您可能希望稍后将 webrick 文件的权限更改为更严格的权限。

# c# - 我有两个下拉列表，但只有一个下拉列表值应该插入数据库

> ID：15676477
> 
> 赞同：1
> 
> 时间：2013-03-28T07:36:43.023
> 
> 标签：c#, asp.net

在此代码中，即使我选择 dropdownlist2，其他部分也可以单独工作。

```
string Varddl;

if(DropDownList2.SelectedItem.Text.ToString()== null )
{

   Varddl = DropDownList2.SelectedItem.Text;

}
else
{
   Varddl = DropDownList3.SelectedItem.Text;
}

string OIMSquery="Insert into tablename values('" + varddl + "')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:38:49.707

调用后你永远不会得到 null`ToString()`并且条件永远不会实现并且总是`else`if 的一部分会执行，你可能需要将它与空字符串进行比较。

```
if(DropDownList2.SelectedItem.Text == "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:38:52.143

像这样设置条件>>

```
if(DropDownList2.SelectedItem== null )
{
    .
    .
}
else
{
} 
```

它会起作用的。

# sencha-touch-2 - Sencha Touch 2.1 将笛卡尔图表轴值更改为整数

> ID：15676483
> 
> 赞同：1
> 
> 时间：2013-03-28T07:37:17.543
> 
> 标签：sencha-touch-2, sencha-charts

![在此处输入图像描述](../Images/3f0818fc7f7042fc6dc50660f79fe152.png)嗨
，我正在使用 sencha touch 2.1.1 图表以笛卡尔图表格式显示投票结果。我将轴类型指定为“整数”。我给图表商店的输入值总是只有整数（比如 1,2,3...）。但是绘制的图形轴包含小数，但我的轴不需要小数。
如何解决这个问题。在此先感谢。

```
Ext.define("KBurra1.view.PollChart",{
extend:"Ext.chart.CartesianChart",
requires:['Ext.data.JsonStore','Ext.chart.axis.Numeric','Ext.chart.axis.Category','Ext.chart.series.Bar'],
config:{
    store:null,
//id:"poll_chart",
height:'200px',
flipXY: true,
axes: [{
    type: 'numeric',
    minimum:0,
    //maximum:3,
    //increment:1,
    position: 'bottom',
    title: 'Number of Votes',
    grid: {
        odd: {
            opacity: 1,
            fill: '#dddc',
            stroke: '#bbb',
            lineWidth: 1
        },

    },

}, {
    type: 'category',
    position: 'left',
    grid: true,
    label: {
        rotate: {
            degrees:330
        },

    }
}],
series: [{
    //title : ['data1'],
    type: 'bar',
    xField: 'answer',
    yField: ['votecount'],
    style: {

        fill:'#57a4f7',
        minGapWidth:5,

    },
    stacked : false
}]
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T11:52:02.467

您可以使用内置的 javascript 函数“toFixed(0)”，这将给它 0 个小数位。此外，如果您想要 1 个小数位，只需输入 1 而不是 0。

要在图表中使用它，请使用执行此操作的小函数向轴添加渲染属性。在我的应用程序中，我处理数以百万计的数字，所以我除以 1000000，然后只显示 1 个小数。

```
axes: [
                {
                    type: 'numeric',
                    position: 'left',
                    fields: ['population','phones'],
                    minimum: 0,
                    renderer: function (value) {
                                value = value / 1000000;
                                return value.toFixed(1);
                            },
                    grid: true
                }, 
```

在您的情况下，只需乘以 100 并使用 toFixed(0)

# asp.net - 如何根据下拉列表中的选择在gridview中显示数据

> ID：15676486
> 
> 赞同：1
> 
> 时间：2013-03-28T07:37:34.557
> 
> 标签：asp.net, gridview, drop-down-menu, datatable

我有一个这样的下拉列表：

```
<asp:DropDownList ID="ddlPortal2" runat="server" AutoPostBack="True">
        <asp:ListItem>Select</asp:ListItem>
        <asp:ListItem>TRAVELONG</asp:ListItem>
        <asp:ListItem>ONETRAVEL</asp:ListItem>
    </asp:DropDownList> 
```

和带有 sqlconnection 的网格视图：

```
 <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" onrowcommand="GridView1_RowCommand" 
        AutoGenerateColumns="False">
        <Columns> 
       <asp:BoundField DataField="Portal" HeaderText="Portal" />
        <asp:BoundField DataField="TID" HeaderText="TID" />
        <asp:BoundField DataField="PNR" HeaderText="PNR" />
        <asp:BoundField DataField="TicketNumber" HeaderText="Ticket Number" />
        <asp:BoundField DataField="ESACCode" HeaderText="ESACCode" />
        <asp:BoundField DataField="WaiverCode" HeaderText="WaiverCode" />
        <asp:BoundField DataField="Remarks" HeaderText="Remarks" />
        <asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" />
        <asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmount" />
        <asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" />
        <asp:BoundField DataField="ddlAirlinePenality" HeaderText="ddlAirlinePenality" />
        <asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" />
        <asp:BoundField DataField="ddlNetRefundProcess" HeaderText="ddlNetRefundProcess" />
        <asp:BoundField DataField="RefundableCommission" HeaderText="RefundableCommission" />
        <asp:BoundField DataField="ddlRefundableCommission" HeaderText="ddlRefundableCommission" />
        <asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" />
        <asp:BoundField DataField="RefundType" HeaderText="RefundType" /> 
    </Columns>       
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:BartConnectionString %>" 
        SelectCommand="SELECT select * [Test]">
        </asp:SqlDataSource> 
```

现在，当我从下拉列表中选择 Travelong 并按下搜索按钮时，gridview 中显示的所有数据都可以告诉我该怎么做。我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:39:30.997

您可以使用[SqlDataSource.FilterExpression 属性](http://msdn.microsoft.com/en-IN/library/system.web.ui.webcontrols.sqldatasource.filterexpression.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:54:01.837

使用SqlDataSource 的[SelectParameters](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selectparameters.aspx)属性

```
<asp:DropDownList ID="ddlPortal2" runat="server" AutoPostBack="True">
    <asp:ListItem>Select</asp:ListItem>
    <asp:ListItem>TRAVELONG</asp:ListItem>
    <asp:ListItem>ONETRAVEL</asp:ListItem>
</asp:DropDownList>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:BartConnectionString %>" 
    SelectCommand="SELECT select * [Test] WHERE Portal = @Portal"">
      <selectparameters>
          <asp:controlparameter name="Portal" controlid="ddlPortal2" propertyname="SelectedValue"/>
      </selectparameters>
  </asp:sqldatasource> 
```

[参考](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selectparameters.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:56:59.713

我得到了答案

```
 DataSet ds = new DataSet();
    SqlDataAdapter da = new SqlDataAdapter();
    SqlConnection con;
    if (ddlPortal2.SelectedIndex != 0)
    {
        con = new SqlConnection("Data Source=.;Initial Catalog=Bart;Integrated Security=True");
        con.Open();
        da = new SqlDataAdapter("select * from Test where Portal='"+ddlPortal2.SelectedValue+"' and CONVERT(VARCHAR(25), [DateTime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "'", con);
        da.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
        con.Close();
    }
    else if (ddlPortal2.SelectedValue == "All")
    {
        SqlConnection conn = new SqlConnection("Data Source=.;Initial Catalog=Bart;Integrated Security=True");
        conn.Open();
        da = new SqlDataAdapter("Select * from Test where Portal=Portal", conn);
        da.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
        conn.Close();
    } 
```

# android - 如何在 Android 中更新 JSON 数据

> ID：15676495
> 
> 赞同：0
> 
> 时间：2013-03-28T07:38:07.207
> 
> 标签：android, json

如何在 Android 中更新 JSON 数据。我得到了几个数据集，我想改变一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:45:29.180

您可以轻松地覆盖`value`您想要的，只需将相同的`Object`（键、具有相同键和不同值的值对）再次放入`JSONObject`.

**例如：-**

```
String jsonStr = "{\"a\" = 1, \"b\" = 2}";
try {
    JSONObject json = new JSONObject(jsonStr);
    json.put("a", 3);
} catch (JSONException e) {} 
```

根据您的需要和`JSON`结构进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:43:43.570

你可以参考

[http://www.vogella.com/articles/AndroidJSON/article.html#androidjson_write](http://www.vogella.com/articles/AndroidJSON/article.html#androidjson_write)

```
 public void writeJSON() {
      JSONObject object = new JSONObject();
      try {
        object.put("name", "Jack Hack");
        object.put("score", new Integer(200));
        object.put("current", new Double(152.32));
        object.put("nickname", "Hacker");
      } catch (JSONException e) {
        e.printStackTrace();
      }
      System.out.println(object);
    } 
```

# sql - 为什么 [NOT IN ] 语法不起作用？

> ID：15676510
> 
> 赞同：1
> 
> 时间：2013-03-28T07:39:24.393
> 
> 标签：sql, sql-server, sql-server-2012

我尝试执行以下查询，但它没有得到任何数据，尽管它应该得到一行：

```
select * from [DB1.table1] where col1 not in (select col2 from DB2.table2) 
```

col1,col2 是 varchar 类型

为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:43:27.760

“*不起作用*”并不能很好地描述您的问题，但在几乎所有情况下，这都是由子选择返回 NULL 值引起的。

你可能想要这个：

```
select * from [DB1.table1] 
where col1 not in (select col2 from DB2.table2 where col2 is not null); 
```

与`NULL`总是产生“未定义”的比较，因此如果子选择中的至少一行`NULL`在`col2`列中包含 a ，则整个表达式为“未定义”。由于 undefined not "true"，整个查询不返回任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:44:57.607

如果你有`NULL`s in `col2`，`table2`你会得到你描述的行为：

```
create table table2 (
    col2 varchar(10) null
)
insert into table2 (col2) values ('abc'),(null)
create table table1 (
    col1 varchar(10) null
)
insert into table1 (col1) values ('abc'),('def')

select * from table1 where col1 not in (select col2 from table2) 
```

不产生行。这是因为一旦发生比较，结果`NOT IN`就变成了。`UNKNOWN``NULL`

您可以使用以下方法修复它：

```
select * from table1 where col1 not in (select col2 from table2 where col2 is not null) 
```

如果这是您的情况的正确逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:46:54.397

正如其他人已经指出导致此问题的原因一样，您可以获得相同的结果，使用它比带有vlaues`LEFT JOIN`的谓词更安全：`IN``NULL`

```
select t1.* 
from [DB1.table1] AS T1 
LEFT JOIN  DB2.table2 AS t2 ON t1.col1 = t2.col2
where t1.col2 IS NULL; 
```

# java - Spring Batch - 集群环境 - 故障转移机制

> ID：15676521
> 
> 赞同：6
> 
> 时间：2013-03-28T07:41:02.847
> 
> 标签：java, spring, ftp, spring-batch, failover

**问题：spring batch 最支持的故障转移策略是什么？必须关注资源使用、故障转移机制。有什么建议么？**

用例 - 必须运行 Spring 批处理才能从服务器读取文件（将由另一个应用程序放在服务器上）并处理它。

环境是集群的。因此，可能有多个服务器实例会触发批处理作业在到达时尝试读取相同的文件。

我的想法：可以做轮询来检查文件的到达并调用spring批处理作业。由于它是集群的，我们可以使用主动/被动策略来轮询。也可以使用其他类型，例如循环或时间分片。

如果我不清楚，请原谅我。如果有不清楚的地方，我可以解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T07:23:18.347

据我了解，从这里

[http://static.springsource.org/spring-batch/reference/html/scalability.html](http://static.springsource.org/spring-batch/reference/html/scalability.html)

更好的方法是只有一个轮询器，而不是通过 spring Batch 提供的一种机制将作业分发到集群（我认为这里名为 Remote Chunks 的机制是最好的选择）。

我认为您不应该担心集群策略，因为这是由 Spring Batch 或其他集群分发机制处理的。

# ruby-on-rails - 如何避免刷新宝石列表

> ID：15676522
> 
> 赞同：8
> 
> 时间：2013-03-28T07:41:06.557
> 
> 标签：ruby-on-rails, unicorn

我在使用 unicorn 启动 Rails 应用程序时看到以下语句，它有什么作用以及如何避免这种情况：

```
I, [2013-03-28T06:46:05.060194 #1762]  INFO -- : worker=0 spawning...
I, [2013-03-28T06:46:05.066834 #2137]  INFO -- : worker=0 spawned pid=2137
I, [2013-03-28T06:46:05.067210 #2137]  INFO -- : Refreshing Gem list 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-16T15:41:11.903

您提供给我们的日志包含：

# 工人=0 产卵

将响应您的 HTTP 请求的工作人员作为一个单独的进程生成，pid 为**2137**。

# 刷新宝石列表

根据 Unicorn 官方文档 ( [http://unicorn.bogomips.org/SIGNALS.html)，Gem](http://unicorn.bogomips.org/SIGNALS.html)集会按顺序重新加载，因此“您的应用程序的更新代码可以获取新安装的 RubyGems”

查看源代码，每当构建应用程序时都会调用消息“Refreshing Gem list”：

```
def build_app!
    if app.respond_to?(:arity) && app.arity == 0
      if defined?(Gem) && Gem.respond_to?(:refresh)
        logger.info "Refreshing Gem list"
        Gem.refresh
      end
      self.app = app.call
    end
  end
end 
```

设置[`preload_app`配置](https://www.rubydoc.info/gems/unicorn/Unicorn%2FConfigurator:preload_app)提供了对此行为的一些控制。

# javascript - Highcharts - 设置 minRange 独立于系列，范围

> ID：15676528
> 
> 赞同：0
> 
> 时间：2013-03-28T07:41:33.167
> 
> 标签：javascript, jquery, highcharts

我有一个动态填充多个系列的图表 (3)。x 轴正在绘制日期时间、值，因此数据点如下所示 -

['02/20/2013 13:35PM', '55'] ['02/20/2013 13:45PM', '75'] ['02/20/2013 14:15PM', '65'] [' 2013 年 2 月 20 日下午 15:25'，'85']

问题是对于一个月的数据，我们得到大约 50 个数据点，这意味着 x 轴有 50 个标签。有没有办法设置 minRange 所以它只有一天，并且每天 x 轴上有一个标签，但图表上有多个点？

当我设置 minRange = 86400000 时，即使有 30 个数据点，它也会使报告停止并冻结浏览器。

帮助？有没有人让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:49:42.650

您将日期指定为字符串。您需要将 x 值指定为 UTC 数字，以便 highcharts 为日期和时间创建合理的 xAxis 标签。

尝试像这样指定您的数据：

```
[Date.UTC(2013,01,20,13,35,00),55],[Date.UTC(2013,01,20,13,45,00),75], etc. 
```

这会将日期转换为 UTC 日期（自 1970 年 1 月 1 日以来的毫秒数）。请注意，javascript 月份从 0 到 11。

如果您像这样指定数据，您可以告诉 highcharts 在 xAxis 上使用日期时间逻辑，如下所示：

```
xAxis: {
    type:"datetime"
} 
```

# debugging - 内部错误：糟糕：OMAP 设备上的 17

> ID：15676530
> 
> 赞同：0
> 
> 时间：2013-03-28T07:41:36.313
> 
> 标签：debugging, linux-kernel, crash-dumps

我有 ARM OMAP 系统，它在一些测试中会产生 Oops。系统还活着，但是创建 Oops 的线程已经死了。我在下面粘贴了 oops 日志。请帮我调试这个问题。

从日志中我看到：

```
Process appl (pid: 427, stack limit = 0x86faa2e8) 
```

此 proc 427 是在主进程中创建的 5 个线程之一。我有 /proc/kallsyms 文件，并检查 PC 是否显示正确的崩溃函数 (put_page+0x14)。

## 日志：

```
[Wed Mar 27 19:34:51.796 2013] Unable to handle kernel NULL pointer dereference at virtual address 00000000
[Wed Mar 27 19:34:51.796 2013] pgd = 86f94000
[Wed Mar 27 19:34:51.796 2013] [00000000] *pgd=87a9f031, *pte=00000000, *ppte=00000000
[Wed Mar 27 19:34:51.796 2013] Internal error: Oops: 17 [#1] PREEMPT
[Wed Mar 27 19:34:51.796 2013] last sysfs file: /sys/devices/virtual/spi/spi/dev
[Wed Mar 27 19:34:51.796 2013] Modules linked in: spi_mod hr_driver isp(P) spv(P) gp
[Wed Mar 27 19:34:51.796 2013] CPU: 0    Tainted: P            (2.6.33_Visor #1)
[Wed Mar 27 19:34:51.796 2013] PC is at put_page+0x14/0x184
[Wed Mar 27 19:34:51.796 2013] LR is at __pskb_pull_tail+0x210/0x2b4
[Wed Mar 27 19:34:51.796 2013] pc : [<800b22c4>]    lr : [<80230254>]    psr: 60000013
[Wed Mar 27 19:34:51.812 2013] sp : 86fabb28  ip : 800b22c4  fp : 86fabb44
[Wed Mar 27 19:34:51.812 2013] r10: 00000054  r9 : 00000006  r8 : 00000007
[Wed Mar 27 19:34:51.812 2013] r7 : 00000007  r6 : 00000000  r5 : 00000000  r4 : 87340500
[Wed Mar 27 19:34:51.812 2013] r3 : 86fe1cc0  r2 : 86fe1d44  r1 : 86fe1d14  r0 : 00000000
[Wed Mar 27 19:34:51.812 2013] Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment user
[Wed Mar 27 19:34:51.812 2013] Control: 10c5387d  Table: 86f94019  DAC: 00000015
[Wed Mar 27 19:34:51.812 2013] Process appl (pid: 427, stack limit = 0x86faa2e8)
[Wed Mar 27 19:34:51.812 2013] Stack: (0x86fabb28 to 0x86fac000)
[Wed Mar 27 19:34:51.812 2013] bb20:                   86fe1cc0 87340500 00000000 00000000 86fabb6c 86fabb48
[Wed Mar 27 19:34:51.812 2013] bb40: 80230254 800b22bc 87340500 86d49140 87a2a800 00000000 86d49154 00000000
[Wed Mar 27 19:34:51.812 2013] bb60: 86fabb9c 86fabb70 802392a0 80230050 87340500 0000000e 00000000 87340500
[Wed Mar 27 19:34:51.812 2013] bb80: 86d49140 0000000e 00000000 86d49154 86fabbc4 86fabba0 8025a6a0 802391f4
[Wed Mar 27 19:34:51.812 2013] bba0: 87340500 86faa000 87a2a800 00000000 86fe1c8c 0000ffff 86fabbe4 86fabbc8
[Wed Mar 27 19:34:51.812 2013] bbc0: 8025a770 8025a434 8025a6d8 87340500 86fe1c78 87340500 86fabbfc 86fabbe8
[Wed Mar 27 19:34:51.812 2013] bbe0: 802583d8 8025a6e4 00000000 86d7fa80 86fabc94 86fabc00 80259fec 802583b0
[Wed Mar 27 19:34:51.812 2013] bc00: 802555a4 802555e4 00000001 86fabc38 00000102 00000000 802c69bc 80237f9c
[Wed Mar 27 19:34:51.812 2013] bc20: 87a2ab88 86fabc38 86fabc54 86fabc38 8002d4dc 8002bf80 8002bfa4 00000001
[Wed Mar 27 19:34:51.812 2013] bc40: 8026c77c 86faa000 86fabc7c 86fabc58 8002bfe0 8002d4c4 86fabcec 00000001
[Wed Mar 27 19:34:51.828 2013] bc60: 8026c77c 87ab3080 00000014 86d7fa80 87340500 86faa000 00000014 86fe1c8c
[Wed Mar 27 19:34:51.828 2013] bc80: 00000006 0000ffff 86fabcec 86fabc98 8026c7a0 80259d04 86fabcec 00000020
[Wed Mar 27 19:34:51.828 2013] bca0: 000000c0 87340500 00000000 00000000 00000000 00000000 00000000 00000000
[Wed Mar 27 19:34:51.828 2013] bcc0: 87340500 86d7fa80 87340500 86d7fae4 000000fa 86faa000 00000006 86d7fd0c
[Wed Mar 27 19:34:51.828 2013] bce0: 86fabd04 86fabcf0 8026c960 8026c02c 86d7fa80 00000000 86fabd24 86fabd08
[Wed Mar 27 19:34:51.828 2013] bd00: 8026104c 8026c898 8022f70c 800d3964 86d7fa80 00000006 86fabd9c 86fabd28
[Wed Mar 27 19:34:51.828 2013] bd20: 802617bc 80260f04 8002d4dc 8002bf80 8002bfa4 00000001 00000000 86d7fae4
[Wed Mar 27 19:34:51.828 2013] bd40: 86d7fde8 86d7fb18 86d7fd28 00000000 86fabf3c 00000001 00000000 00000000
[Wed Mar 27 19:34:51.828 2013] bd60: 00000001 00000000 86fabd8c 86fabd78 80049998 86fabf3c 803c0e8c 00000040
[Wed Mar 27 19:34:51.828 2013] bd80: 00000000 00000040 86faa000 2e4128a2 86fabdd4 86fabda0 80229d34 80261068
[Wed Mar 27 19:34:51.828 2013] bda0: 00000040 00000000 86fabdb4 00000000 00000500 00000000 00000000 86fabde0
[Wed Mar 27 19:34:51.828 2013] bdc0: 00000100 86fabf3c 86fabeb4 86fabdd8 8022767c 80229cf4 00000040 86fabde8
[Wed Mar 27 19:34:51.828 2013] bde0: 802277c4 80261de0 00000000 00000001 ffffffff 00000000 00000000 00000000
[Wed Mar 27 19:34:51.828 2013] be00: 00000000 00000000 87a70740 86fabe18 00000000 00000000 8002bfa4 00000001
[Wed Mar 27 19:34:51.828 2013] be20: 86fabe58 86fabf60 86fabe5c 86fabe38 8002bfe0 8002d4c4 86fabe94 00000001
[Wed Mar 27 19:34:51.828 2013] be40: 800d9094 86fabf60 00000000 00000040 86fabe74 86fabe60 80049998 8009ec3c
[Wed Mar 27 19:34:51.828 2013] be60: 00000040 00000100 87541080 86fabe78 00000000 86fabf3c 86fabe78 fffffff7
[Wed Mar 27 19:34:51.843 2013] be80: 80226524 802278a8 86fabeb4 86fabe98 802278a8 8022651c 00000040 87541080
[Wed Mar 27 19:34:51.843 2013] bea0: 00000100 006766f0 86fabf8c 86fabeb8 8022804c 802275d8 8002bfa4 87803140
[Wed Mar 27 19:34:51.843 2013] bec0: 86f67800 a0000013 87800440 00000003 86fabefc 86fabee0 800d3944 8009ed38
[Wed Mar 27 19:34:51.843 2013] bee0: 00000000 00000508 87a25290 86faa000 86fabf14 86fabf00 80186658 800d3810
[Wed Mar 27 19:34:51.843 2013] bf00: 86f67800 00000508 86fabf7c 86fabf18 80186d90 80186648 86fabf3c 2e4128a0
[Wed Mar 27 19:34:51.843 2013] bf20: 86fabf8c 87a25290 87a25298 803b0d7c 86fabf84 00100100 00200200 86fabebc
[Wed Mar 27 19:34:51.843 2013] bf40: 00000080 86fabf58 00000001 00000000 00000000 2e41289c 006766f6 000000fa
[Wed Mar 27 19:34:51.843 2013] bf60: 00000001 fffffff7 86faa000 006766ec 0066b138 00000000 00000123 8002a328
[Wed Mar 27 19:34:51.843 2013] bf80: 86fabfa4 86fabf90 802280cc 80227fc4 00000000 00000000 00000000 86fabfa8
[Wed Mar 27 19:34:51.843 2013] bfa0: 8002a100 802280b0 006766ec 0066b138 0000000f 006766f0 00000100 00000040
[Wed Mar 27 19:34:51.843 2013] bfc0: 006766ec 0066b138 00000000 00000123 00000740 0066b138 2e4128a2 000005d8
[Wed Mar 27 19:34:51.843 2013] bfe0: 00000000 2e411a30 2ad8cfe4 2ad7fc24 80000010 0000000f 00000000 00000000
[Wed Mar 27 19:34:51.968 2013] Backtrace: 
[Wed Mar 27 19:34:51.968 2013] [<800b22b0>] (put_page+0x0/0x184) from [<80230254>] (__pskb_pull_tail+0x210/0x2b4)
[Wed Mar 27 19:34:51.968 2013]  r6:00000000 r5:00000000 r4:87340500 r3:86fe1cc0
[Wed Mar 27 19:34:51.984 2013] [<80230044>] (__pskb_pull_tail+0x0/0x2b4) from [<802392a0>] (dev_queue_xmit+0xb8/0x474)
[Wed Mar 27 19:34:51.984 2013] [<802391e8>] (dev_queue_xmit+0x0/0x474) from [<8025a6a0>] (ip_finish_output+0x278/0x2b0)
[Wed Mar 27 19:34:51.984 2013]  r8:86d49154 r7:00000000 r6:0000000e r5:86d49140 r4:87340500
[Wed Mar 27 19:34:51.984 2013] [<8025a428>] (ip_finish_output+0x0/0x2b0) from [<8025a770>] (ip_output+0x98/0xa0)
[Wed Mar 27 19:34:51.984 2013] [<8025a6d8>] (ip_output+0x0/0xa0) from [<802583d8>] (ip_local_out+0x34/0x38)
[Wed Mar 27 19:34:51.984 2013]  r6:87340500 r5:86fe1c78 r4:87340500 r3:8025a6d8
[Wed Mar 27 19:34:51.984 2013] [<802583a4>] (ip_local_out+0x0/0x38) from [<80259fec>] (ip_queue_xmit+0x2f4/0x364)
[Wed Mar 27 19:34:51.984 2013]  r4:86d7fa80 r3:00000000
[Wed Mar 27 19:34:51.984 2013] [<80259cf8>] (ip_queue_xmit+0x0/0x364) from [<8026c7a0>] (tcp_transmit_skb+0x780/0x7dc)
[Wed Mar 27 19:34:51.984 2013] [<8026c020>] (tcp_transmit_skb+0x0/0x7dc) from [<8026c960>] (tcp_send_ack+0xd4/0xdc)
[Wed Mar 27 19:34:51.984 2013] [<8026c88c>] (tcp_send_ack+0x0/0xdc) from [<8026104c>] (tcp_cleanup_rbuf+0x154/0x164)
[Wed Mar 27 19:34:51.984 2013]  r5:00000000 r4:86d7fa80
[Wed Mar 27 19:34:51.984 2013] [<80260ef8>] (tcp_cleanup_rbuf+0x0/0x164) from [<802617bc>] (tcp_recvmsg+0x760/0x87c)
[Wed Mar 27 19:34:51.984 2013]  r5:00000006 r4:86d7fa80
[Wed Mar 27 19:34:51.984 2013] [<8026105c>] (tcp_recvmsg+0x0/0x87c) from [<80229d34>] (sock_common_recvmsg+0x4c/0x60)
[Wed Mar 27 19:34:51.984 2013] [<80229ce8>] (sock_common_recvmsg+0x0/0x60) from [<8022767c>] (sock_recvmsg+0xb0/0xcc)
[Wed Mar 27 19:34:51.984 2013]  r6:86fabf3c r5:00000100 r4:86fabde0
[Wed Mar 27 19:34:51.984 2013] [<802275cc>] (sock_recvmsg+0x0/0xcc) from [<8022804c>] (sys_recvfrom+0x94/0xec)
[Wed Mar 27 19:34:51.984 2013]  r6:006766f0 r5:00000100 r4:87541080
[Wed Mar 27 19:34:51.984 2013] [<80227fb8>] (sys_recvfrom+0x0/0xec) from [<802280cc>] (sys_recv+0x28/0x30)
[Wed Mar 27 19:34:51.984 2013]  r8:8002a328 r7:00000123 r6:00000000 r5:0066b138 r4:006766ec
[Wed Mar 27 19:34:51.984 2013] [<802280a4>] (sys_recv+0x0/0x30) from [<8002a100>] (ret_fast_syscall+0x0/0x38)
[Wed Mar 27 19:34:51.984 2013] Code: e92dd878 e24cb004 e52de004 ebfddfbf (e5903000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:25:28.377

猜猜 TCP/IP 堆栈中的一些错误，与您的网络接口卡 (NIC) 驱动程序中的 S/G IO 功能冲突。

您可以检查您的网卡驱动程序是否设置了这些功能标志 NETIF_F_FRAGLIST 和 NETIF_F_SG，如果是，请尝试取消设置，看看是否仍然出现此问题。

# iphone - 使用加速度计测量小距离 - iOS

> ID：15676535
> 
> 赞同：3
> 
> 时间：2013-03-28T07:41:52.983
> 
> 标签：iphone, objective-c, ios6, accelerometer

嗨，我是堆栈溢出和 iOS 应用程序编程的新手。我已经学习了基本中级的 Objective C 编码，并且对实际的 iOS 应用程序做了一些零碎的工作，但还没有真正在 App Store 上发布过。

我有兴趣做的第一个我只是一个使用加速度计的基本应用程序。我想制作一个应用程序，在 iPhone 的屏幕上有一个尺子，你可以沿着一个平面物体移动它，最后它会给你它的长度。我已经阅读了有关加速度计的 iOS 文档，但我不知道如何应用它来给我一些东西的距离......

任何帮助，如通读链接、代码摘录或类似的开源应用程序，将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T20:37:46.563

你还记得学校的物理吗？牛顿运动定律？

速度=距离/时间

所以：

距离 = 速度 x 时间。

加速度是速度随时间的变化吗？你做剩下的...

不管怎样，废话少说，这里是Objective-C：

你需要遵守`<UIAccelerometerDelegate>`然后你可以：

```
 -(void)startMeasuringAcceleration{

        [[UIAccelerometer sharedAccelerometer] setUpdateInterval:0.125];
        [[UIAccelerometer sharedAccelerometer] setDelegate:self];

    }

    -(void)stopMeasuringAcceleration{

        [[UIAccelerometer sharedAccelerometer] setDelegate:nil];

    }

    //this is a delegate method
    - (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{

        NSLog(@"%f, %f, %f, %f", acceleration.x, acceleration.y, acceleration.z, acceleration.timestamp);
} 
```

# ruby-on-rails-3 - Rails + best_in_place + Twitter Bootstrap

> ID：15676545
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:43:03.583
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, bootstrap-typeahead, best-in-place

我对最佳位置和 Twitter 引导程序有一个非常烦人的问题。我已经花了很多时间。我已经浏览了好几页 - best_in_place github 页面和问题。所以我想，我修复了它，但没有，我不知道错误在哪里。

当我使用 best_in_place 进行第一次编辑时，它可以工作，保存值并将输入更改回具有新值的“正常”视图。但是当我想第二次做同样的动作（编辑它）时，它不起作用。我必须重新加载页面，然后我只能再次编辑它一次。我的代码如下：

**AccountsController.rb**

```
def update
    @account = current_user.account
    respond_to do |format|
      if @account.update_attributes(params[:account])
        format.json { respond_with_bip(@account) }
      else
        format.json { respond_with_bip(@account) }
      end
    end
  end 
```

**看法**

```
<%= best_in_place current_user.account, :introduction, :type=> :input,
        :nil => "Click me to add your introduction!", 
                :html_attrs => {:'data-provide' => "typeahead" } %> 
```

**account.js.coffee**

```
jQuery ->
  $('.best_in_place').best_in_place() 
```

我已经看过这个页面并没有找到答案： [SO Thread](https://stackoverflow.com/questions/14796415/how-to-use-best-in-place-with-twitter-bootstrap) , [ExampleApp](https://github.com/fiedl/best_in_place_typeahead_example) , [Best_in_place Issue](https://github.com/bernat/best_in_place/issues/212)

请问，有人可以帮我吗？我知道这可能是由 Twitter Bootstrap 引起的，但我不知道如何解决它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:26:18.487

好的，我已经找到了解决方案。“问题”在这一行：

```
format.json { respond_with_bip(@account) } 
```

我将其替换为：

```
format.json { render json: @account} 
```

它现在正在工作。但这只是运气。有谁知道这里的主要区别是什么？为什么一个工作，第二个没有？respond_with_bip 究竟做了什么？

# android - 如何从 Instrumentation 类中获取服务实例？

> ID：15676547
> 
> 赞同：2
> 
> 时间：2013-03-28T07:43:16.530
> 
> 标签：android, automated-tests, integration-testing

我尝试为我的业务逻辑编写一个集成类。我所做的：启动一个活动，执行单击以启动另一个活动和向服务器发送命令的服务，获取第二个活动的实例，并在一段时间后执行停止以结束所有工作 - 活动和服务

测试成功我区分内容提供者是否没有任何数据，但这还不够。我需要检查发送命令后返回的服务。问题是该服务有一个从服务器接收响应的类实例，我不知道如何从我的测试用例中获取服务。

```
class MyTestCase extends InstrumentationTestCase {
    public void testMethos() {
                Instrumentation instrumentation = getInstrumentation();

    Log.i(TAG, "Try to add monitor");
    ActivityMonitor monitor = instrumentation.addMonitor(
            MyActivity.class.getName(), 
            null, false);
     final DriverActivity myActivity = (MyActivity) 
        instrumentation.waitForMonitorWithTimeout(monitor, 5);
}
} 
```

因此，在这种情况下，我可以访问现在正在运行的活动，但这种方法仅适用于 Activity 而不是服务。如果我能够获得一项服务，我将获得我的类的内部实例，该实例可响应来处理来自服务器的响应——我将通过反射来做到这一点。

主要问题是如何从我的测试用例中获取服务实例？

# android - 无法访问 mBuffer

> ID：15676555
> 
> 赞同：0
> 
> 时间：2013-03-28T07:43:56.550
> 
> 标签：android

我使用下面的代码：

```
Bitmap myBmp = Bitmap.createBitmap( 720, 1280, Config.ARGB_8888 );

byte []data = myBmp.mBuffer ???? 
```

但是我发现android.graphics.Bitmap的mBuffer无法访问。在 Eclipse 中没有任何提示。

这个怎么解决？</p>

# javascript - 仅应用 jquery mobile 的一部分页面？

> ID：15676562
> 
> 赞同：2
> 
> 时间：2013-03-28T07:44:14.560
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我有一个我们设计得很好的示例页面。现在，我们只需要在页面的一部分中使用 jquery mobile。问题是，当我添加 jquery mobile 时，它​​会弄乱我所有的 UI 内容。有没有办法只应用 jquery mobile 的一部分页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T09:47:35.010

有几种方法可以实现这一点，你可以在我的另**[一篇文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到它们，或者在**[这里](https://stackoverflow.com/questions/14550396/jquery-mobile-markup-enhancement-of-dynamically-added-content/14550417#14550417)**找到。搜索名为：**标记增强预防方法的**章节。

这是一个带有示例的简短描述。有几种解决方案，您需要选择正确的一种：

## 标记增强预防的方法：

这可以通过几种方式完成，有时您需要将它们结合起来才能达到预期的结果。

*   **方法一**：

    它可以通过添加这个属性来做到这一点：

    ```
    data-enhance="false" 
    ```

    到页眉、内容、页脚容器。

    这也需要在应用加载阶段开启：

    ```
    $(document).one("mobileinit", function () {
        $.mobile.ignoreContentEnabled=true;
    }); 
    ```

    ***在初始化 jquery-mobile.js 之前初始化它（看下面的例子）。***

    更多相关信息可以在这里找到：

    [http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

    示例：http: [//jsfiddle.net/Gajotres/UZwpj/](http://jsfiddle.net/Gajotres/UZwpj/)

    要再次重新创建页面，请使用以下命令：

    ```
    $('#index').live('pagebeforeshow', function (event) {
        $.mobile.ignoreContentEnabled = false;
        $(this).attr('data-enhance','true');
        $(this).trigger("pagecreate")
    }); 
    ```

*   **方法二**：

    第二种选择是使用此行手动执行此操作：

    ```
    data-role="none" 
    ```

    示例：http: [//jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

*   **方法3**：

    可以防止某些 HTML 元素进行标记增强：

    ```
     $(document).bind('mobileinit',function(){
          $.mobile.page.prototype.options.keepNative = "select, input";
     }); 
    ```

    示例：http: [//jsfiddle.net/Gajotres/jjETe/](http://jsfiddle.net/Gajotres/jjETe/)

# wcf - 在我的 WCF Web 服务中生成一个 svc / wsdl URL

> ID：15676564
> 
> 赞同：7
> 
> 时间：2013-03-28T07:44:24.973
> 
> 标签：wcf, web-services, svc

`.svc`通常，当我实现第 3 方 WCF Web 服务时，我会得到一个以扩展名结尾的 URL 。

我刚刚在 VS2010 中创建了一个 WCF Web 服务并且我能够运行该服务，但是我在测试客户端中看不到任何以`.svc`扩展名结尾的 URL。

为了获得这样的 URL，我还需要做些什么吗？因为通常从那里人们也可以通过添加`?wsdl`到末尾来获得 WSDL，例如： `http://site.com/service1.svc?wsdl`

如何在我的 Web 服务中生成这样的 URL？

* * *

这就是我的 App.Config 中的内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="TestWebservice.Test">
        <endpoint address="" binding="wsHttpBinding" contract="TestWebservice.ITest">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/TestWebservice/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

# 编辑

我`mexHttpBinding`从配置文件中删除了端点。当我现在启动我的 Web 服务时，它会自动显示一个 WSDL 的 URL：

```
http://localhost:8732/Design_Time_Addresses/TestWebservice/?wsdl 
```

`/`之前的部分`?wsdl`似乎***很***重要。否则它将无法正常工作。

但这仍然让我想到最后一个问题。如何指定`.svc`文件的 URL？我想要一个像这样的网址：`http://localhost:8732/Design_Time_Addresses/TestWebservice/Test.svc?wsdl`

* * *

# 编辑 2

我走得更远了。我读到这个：http: [//msdn.microsoft.com/en-us/library/aa751792.aspx](http://msdn.microsoft.com/en-us/library/aa751792.aspx)

因此`Test.svc`，我使用以下代码在项目的根目录中创建了一个文件：

```
<% @ServiceHost Service="TestWebservice.ITest" %> 
```

然后我尝试`svc`通过以下 URL 访问我的文件，但都对我不起作用：

```
http://localhost:8732/Design_Time_Addresses/TestWebservice/Test.svc
http://localhost:8732/Design_Time_Addresses/Test.svc 
```

甚至可以`svc`在 Visual Studio 内部托管吗？还是我真的需要先在 IIS 中托管它？

* * *

# 编辑 3 - 已修复！

我终于让它工作了！我将 重新添加`mexHttpBinding`到我的 App.Config 中。

我安装了 IIS7。将 Web 服务发布到我的`C:\`驱动器中的文件夹。然后在 IIS 中映射该文件夹并尝试`.svc`在浏览器中请求该文件。

起初它对我不起作用，因为它无法识别`.svc`扩展名。然后我所要做的就是输入以下 cmd:`aspnet_regiis.exe -i`现在一切正常。

现在一切似乎都运行良好。`.svc`猜测当服务由 Visual Studio 托管时，您无法请求文件。但是当它托管在 IIS 中时它可以工作。

# php - 使用 exif_imagetype 验证图像，但仍然能够上传非图像文件

> ID：15676566
> 
> 赞同：0
> 
> 时间：2013-03-28T07:44:26.780
> 
> 标签：php, phpmailer, exif

我不确定我的 exif_imagetype 是否编码错误。它可以很好地发送带有照片的电子邮件。但是当我尝试附加非图像文件时，它仍然允许我这样做并发送带有附件的电子邮件。请帮忙。

```
 ob_start();
require("class.phpmailer.php");

    $photo = $_FILES['photo'];

    isset($_POST['submit']);
$active_keys = array();
foreach($_FILES[$photo]['name'] as $key => $filename){
if(!empty($filename)){
    $active_keys[] = $key;
}    }

foreach($active_keys as $key){    
switch(exif_imagetype($_FILES[$photo]['tmp_name'][$key])) {
case IMAGETYPE_JPEG:
case IMAGETYPE_PNG:
    break;
    default:
 echo "{";
 echo        "$errors: 'This is no photo..'\n";
 echo "}";
  exit(0);
    } }
$message = "some message";
$mail = new PHPMailer();
$mail->From     = ('sample@youdomain.net');
$mail->AddAddress=('sample@youdomain.net');
$mail->Subject  = "Submitted Photos";
$mail->Body     = $message;
$mail->WordWrap = 50;

foreach($_FILES['photo']['tmp_name'] as $photo) 
if(!empty($photo)) {
     $mail->AddAttachment($photo);
}

$mail->Send();

header("Location: thankyou.php");
   exit();     
   }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:18:43.203

在处理任何东西之前使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)函数，它提供了更好的结果

例子：

```
if(getimagesize($fullpath_to_file)){
 //then do something here
} 
```

# java - PrimeFaces 组件未按需要更新（生成嵌套按钮）

> ID：15676571
> 
> 赞同：1
> 
> 时间：2013-03-28T07:44:53.447
> 
> 标签：java, jsf, primefaces, commandbutton

`commandButton`我的 JSF 页面上有组件：

![初始按钮](../Images/9e90b6f217b01a5c53fef722ae8df4d4.png)

```
<p:commandButton id="period"
    value="#{myBean.isMonthly == false ? 'Yearly' : 'Monthly'}"
    action="#{myBean.doSomeOtherStuff()}"
    update="period myDataTable">
</p:commandButton> 
```

我正在尝试通过`dataTable`单击上面的按钮来更新 a。当我单击它时，它`dataTable`会根据需要进行更新，而它的`commandButton`行为却很奇怪，导致显示如下：

![更新后的按钮](../Images/3406a2537347f59b3ccdac9c7c597435.png)

有人可以帮助我了解这种奇怪情况的原因并在可能的情况下提供解决方案吗？

**笔记：**

*   *JSF 实现和版本：* Mojarra (javax.faces-2.1.11.jar)
*   *查看技术：* Facelets (XHTML)
*   *复制'n'粘贴'n'可运行的例子！(SSCCE)*下面列出：

**FilterBean.java：**

```
package com.turkcell.mdealer.bean.impl;

import org.springframework.stereotype.Component;

@Component
public class FilterBean {
    private boolean monthly = true;

    public String applyPeriod(String caller) {
        monthly = !monthly;
        return caller;
    }

    public boolean isMonthly() {
        return monthly;
    }

    public void setMonthly(boolean monthly) {
        this.monthly = monthly;
    }
} 
```

**示例.xhtml：**

```
<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:turkcell="http://turkcell.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:pm="http://primefaces.org/mobile" contentType="text/html"
    renderKitId="PRIMEFACES_MOBILE">
    <pm:page title="Bayi Raporlari">
        <pm:view id="FaturasizAktivasyon" swatch="c">
            <p:outputPanel id="FaturasizPanel">
                <h:form id="FaturasizForm">
                    <pm:content>
                        <p:commandButton id="period"
                            value="#{filterBean.monthly == false ? 'Yearly' : 'Monthly'}"
                            action="#{filterBean.applyPeriod('sample')}" update="period">
                        </p:commandButton>
                    </pm:content>
                </h:form>
            </p:outputPanel>
        </pm:view>
    </pm:page>
</f:view> 
```

**图书馆概况：**

![在此处输入图像描述](../Images/45a568d40c02d9f957ec173ed1a743ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:51:20.083

我不知道奇怪行为的原因

但是，您可以使用**两个条件渲染按钮**来实现相同的效果：

```
<p:panelGroup>
    <p:commandButton value="Monthly"
        action="#{myBean.doSomeOtherStuff()}"
        update="myDataTable @parent" rendered="#{myBean.isMonthly}" />
    <p:commandButton value="Yearly"
        action="#{myBean.doSomeOtherStuff()}"
        update="myDataTable @parent" rendered="#{not myBean.isMonthly}" />
</p:panelGroup> 
```

# postgresql - count() 对应满足某个条件的不同值的 max()

> ID：15676574
> 
> 赞同：4
> 
> 时间：2013-03-28T07:45:01.003
> 
> 标签：postgresql, postgresql-8.4

我有以下表格：

**用户组**

```
usergrp_id      bigint     Primary Key
usergrp_name    text 
```

**用户**

```
user_id             bigint     Primary Key
user_name           text
user_usergrp_id     bigint
user_loc_id         bigint 
```

`user_usergrp_id`有来自 user_group 表 `user_loc_id`的对应 id 有来自分支表的对应 id(branch_id)。

**分支**

```
branch_id      bigint     Primary Key
branch_name    text
branch_type    smallint 
```

`branch_type`默认设置为 1。尽管它可能包含 1 到 4 之间的任何值。

**用户项目**

```
proj_id          bigint     Primary Key
proj_name        text
proj_branch_id   smallint 
```

`proj_branch_id`从分支表中具有相应的 id(branch_id)。

**user_approval**

```
appr_id           bigint     Primary Key
appr_prjt_id      bigint
appr_status       smallint
appr_approval_by  bigint 
```

`appr_approval_by`具有来自用户表的相应 id(user_id)
`appr_status`可能包含不同的状态值，例如 10,20,30... 对于单个`appr_prjt_id`

**用户组**

```
usergrp_id | usergrp_name
-------------------------
    1      | Admin
    2      | Manager 
```

**用户**

```
user_id | user_name | user_usergrp_id |user_loc_id
---------------------------------------------------
    1   | John      |      1          |     1
    2   | Harry     |      2          |     1 
```

**分支**

```
branch_id | branch_name | branch_type
-------------------------------------
    1     |  location1  |    2
    2     |  location2  |    1
    3     |  location3  |    4
    4     |  location4  |    2
    5     |  location4  |    2 
```

**用户项目**

```
proj_id | proj_name | proj_branch_id
------------------------------------
    1   | test1      |       1
    2   | test2      |       2
    3   | test3      |       1
    4   | test4      |       3
    5   | test5      |       1
    6   | test5      |       4 
```

**user_approval**

```
appr_id | appr_prjt_id | appr_status | appr_approval_by
-------------------------------------------------------
    1   |    1         |     10      |     1
    2   |    1         |     20      |     1
    3   |    1         |     30      |     1
    4   |    2         |     10      |     2
    5   |    3         |     10      |     1
    6   |    3         |     20      |     2
    7   |    4         |     10      |     1
    8   |    4         |     20      |     1 
```

**条件：**输出必须取for each的`MAX()`值并计数。`appr_status``appr_prjt_id`

即，在上表中`appr_prjt_id=1`有 3 种不同的状态：10、20、30。它的计数必须只显示在输出中对应于 30 的状态（不在状态 10 和 20 中），对应于特定的用户组`branch_name`。同样对于该字段中的每个其他 id`appr_prjt_id`

[SQL小提琴](http://www.sqlfiddle.com/#!11/f5243)

**期望的输出：**

```
 10   |    20  |  30

         ------> Admin     0    |    1   |   1
         |
location1
         |
         ------> Manager   1    |    1   |   0 
```

我怎样才能做到这一点？

[SQL小提琴](http://www.sqlfiddle.com/#!11/f5243)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:19:29.177

[SQL小提琴](http://www.sqlfiddle.com/#!11/f5243/3)

```
select
    branch_name, usergrp_name,
    sum((appr_status = 10)::integer) "10",
    sum((appr_status = 20)::integer) "20",
    sum((appr_status = 30)::integer) "30"
from
    (
        select distinct on (appr_prjt_id)
            appr_prjt_id, appr_approval_by, appr_status
        from user_approval
        order by 1, 3 desc
    ) ua
    inner join
    users u on ua.appr_approval_by = u.user_id
    inner join
    user_group ug on u.user_usergrp_id = ug.usergrp_id
    inner join
    branch b on u.user_loc_id = b.branch_id
group by branch_name, usergrp_name
order by usergrp_name 
```

适用于大多数 DBMS 的经典解决方案是使用`case`：

```
select
    branch_name, usergrp_name,
    sum(case appr_status when 10 then 1 else 0 end) "10", 
```

但是 Postgresql 具有布尔类型，并且它具有转换为整数 ( `boolean::integer`) 的结果，从而产生 0 或 1，从而减少了冗长的代码。

在这种情况下，也可以使用 a `count`in 而不是 a `sum`：

```
select
    branch_name, usergrp_name,
    count(appr_status = 10 or null) "10", 
```

我确实更喜欢，`count`但我的印象是它更难理解。诀窍是要知道`count`计算任何不为空的东西，并且 a (`true`或 null) 是`true`并且 a (`false`或 null) 为空，因此只要条件为真，它就会计算在内。

# php - PHP 上的 md5()、crc32() 和 sha1() 加密有什么区别？

> ID：15676575
> 
> 赞同：6
> 
> 时间：2013-03-28T07:45:05.077
> 
> 标签：php

不同之处在于它们生成的长度。

crc32() 给出 32 位代码

sha1() 给出 128 位代码

md5() 给出 160 位代码

这样对吗？？或者他们之间还有什么区别吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T08:09:21.670

它们各自实现不同的加密散列函数，并且每个散列函数生成不同大小的散列。您在此处显示的三个函数之间的主要区别在于[sha1](http://en.wikipedia.org/wiki/SHA-1)和[md5](http://en.wikipedia.org/wiki/MD5)实际上是为了加密安全。crc32（crc 代表[循环冗余校验](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)）函数不是加密函数，旨在生成用于检查文件完整性的散列（主要用于确定文件在下载过程中是否损坏）。

附带说明：请不要将[md5](http://en.wikipedia.org/wiki/MD5#Security)或[sha1](http://www.schneier.com/blog/archives/2005/02/sha1_broken.html)用于任何真正的加密工作（例如散列密码）。这些都被严重破坏（只需询问evernote或使用这种旧算法烧毁的任何其他公司）。而是使用[php crypt() 函数](http://www.php.net/manual/en/function.crypt.php)并使用 SHA-256 或 SHA-512（优于 256）或河豚。并且[总是给你的哈希加盐......](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T07:50:03.453

我认为不仅`length`不同，而且他们对数据使用不同的算法`encrypt`。

> PHP 中的加密使用很简单，但这并不意味着它是免费的。首先，根据您要加密的数据，您可能有理由在数据库中存储 32 位值而不是 160 位值以节省空间。其次，加密越安全，传递哈希值的计算时间就越长。如果需要频繁生成 md5()，大容量站点可能会显着减慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T08:16:14.500

## crc32 不是散列算法

[crc32](http://php.net/manual/en/function.crc32.php)生成“作为整数的 str 的 crc32 校验和”。- 它的预期用途是快速验证某物的完整性，并广泛用于检测意外更改，例如网络传输错误。

## md5 和 sha1 是哈希算法

您最好阅读包含示例[的 php 文档：](http://php.net/manual/en/faq.passwords.php)

> **为什么 md5() 和 sha1() 等常见的散列函数不适用于密码？** 诸如 MD5、SHA1 和 SHA256 之类的散列算法被设计为非常快速和高效。借助现代技术和计算机设备，“蛮力”这些算法的输出以确定原始输入已变得微不足道。

An`md5` [是 128 位](http://en.wikipedia.org/wiki/MD5)， a`sha1` [是 160 位](http://en.wikipedia.org/wiki/Sha1)。在问题中，这是相反的。

`md5`和之间的主要区别在于`sha1`尚未找到[碰撞](https://security.stackexchange.com/questions/19705/is-sha1-better-than-md5-only-because-it-generates-a-hash-of-160-bits)[示例。`sha1`](https://security.stackexchange.com/questions/19705/is-sha1-better-than-md5-only-because-it-generates-a-hash-of-160-bits)即如果你使用`md5`两个不同的输入，就有可能得到相同的哈希值；`sha1`不是。除此之外，它们实现了不同的算法，但例如，尽管通常用于存储密码，但它们都不**适合存储密码。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T08:00:10.813

crc32() 不打算用于加密目的。它的目的是它非常快速地产生一个散列，所以当你最关心的时候你想使用它——你想要一个通常有用的散列。出于这个原因，它被用于网络设备。

md5() 和 sha1() 都是加密散列，这意味着它们打算具有非常好的属性，例如很难找到仅给定散列值就产生特定散列的消息。但是，sha1 比 md5 更安全、更现代。实际上，如果您关心安全性，则应考虑弃用 md5。

还要记住通过将额外的东西与它们连接来对密码的哈希进行加盐，或者称为“彩虹表”的东西，它是一个预先散列的常用密码的大列表，可用于找出哈希对应的内容并破解用户帐户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T07:51:48.807

这些被称为哈希函数。

[http://en.wikipedia.org/wiki/Hash_function](http://en.wikipedia.org/wiki/Hash_function) - 解释不同类型的哈希函数

它们在内部的工作方式完全不同。

注意：请勿`crc32`用于加密目的。它的用途是快速散列，它不如`sha1`or安全`md5`。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-03-28T07:52:32.613

**主要区别在于生成的哈希的长度。**

```
CRC32 is, evidently, 32 bits, 
sha1() returns a 128 bit value, 
and md5() returns a 160 bit value. 
```

避免碰撞很重要。

# php - 在 PHP 和 MySQL 中读取和写入临时文件

> ID：15676576
> 
> 赞同：-2
> 
> 时间：2013-03-28T07:45:28.883
> 
> 标签：php, mysql, temp

我正在使用临时文本文件将 html Web 表单数据提交到数据库。基本上流程是：提交表单数据 ==> 将表单数据写入 temp.txt ==> 将 temp.txt 数据提交到数据库。我知道如何将数据写入文本文件以及如何从文本文件中读取数据。如何确保在文本文件关闭后立即将数据写入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:52:30.153

当可以立即将表单数据写入数据库时​​，我看不到将表单数据写入文本文件的意义。首先将其写入文本文件只会减慢进程。

任何状况之下：

```
$data = $_POST['data']; 
// Make sure to check the data before insertion to the database!
$file = fopen('temp.txt', 'w');
fwrite($file, $data);
fclose($file);

// Write the data to the database here. 
```

或者

```
$data = $_POST['data']; 
// Make sure to check the data before insertion to the database!
$file = fopen('temp.txt', 'w+');
fwrite($file, $data);
// Write the data here, and save yourself from having to open the file again.
fclose($file); 
```

# wordpress - 如何循环除wordpress中打开的所有类别帖子？

> ID：15676579
> 
> 赞同：0
> 
> 时间：2013-03-28T07:45:38.380
> 
> 标签：wordpress, loops, posts

在我的 single.php 中，我想显示除已打开帖子之外的所有类别帖子。

这是我的代码：[pastebin.com 循环代码](http://pastebin.com/7cgddUTV)

这是类别帖子循环的代码，它循环所有类别帖子和打开的帖子，我不想再次循环打开的帖子

```
<?php $catid = the_category_ID( false ); ?> 
                        <?php $postCount = 1; $loop = new WP_Query( array( 'tax_query' => array(array(
                                'taxonomy' => 'category',
                                'field' => 'id',
                                'terms' => $catid
                            )), 'post_type' => 'post', 'posts_per_page' => 15 ) ); if ($loop->have_posts()) { ?> 
```

**更新：**

我有解决方案：

```
<?php $catid = get_the_category(); $catid = $catid[0]->term_id; ?>
                        <?php $postCount = 1; $loop = new WP_Query( array( 'tax_query' => array(array(
                                'taxonomy' => 'category',
                                'field' => 'id',
                                'terms' => $catid
                            )),
                            'post_type' => 'post',
                            'posts_per_page' => 15,
                            'post__not_in' =>array($post->ID) ) );
                        if ($loop->have_posts()) { ?> 
```

你需要使用'post_not_in'选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:53:50.360

使用这个：（避免类别 3 的示例）

```
 query_posts( 'cat=-3' ); 
```

检查这个：[http ://codex.wordpress.org/Function_Reference/query_posts#Exclude_Categories_From_Your_Home_Page](http://codex.wordpress.org/Function_Reference/query_posts#Exclude_Categories_From_Your_Home_Page)

然后在您的页面中，您只需检查您所在的帖子的类别，并将“-3”替换为您要避免的类别 ID。

# ruby-on-rails - 子域而不是资源复数作为控制器/路由逻辑的 url 基础

> ID：15676582
> 
> 赞同：3
> 
> 时间：2013-03-28T07:46:25.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

对不起，如果我的标题不够清楚。在我的应用程序中，我有一个博客资源。现在，通常这可能会变成“www.example.com/blogs/new”、“www.example.com/blogs/the-internet-blog”等，但我想要的是从后面移动“博客” .com 成为子域。（“blogs.example.com/new”、“blogs.example.com/the-internet-blog”）。

我现在真的需要基本上手动路由我的所有操作，还是有一个休息资源的选项来让它知道那个微小的 url 逻辑变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:56:24.330

是的，您可以使用[Rails 路由指南](http://guides.rubyonrails.org/routing.html#request-based-constraints)`:subdomain`中描述的约束在Rails 路由中指定子域：

```
constraints :subdomain => "admin" do
  resources :photos
end 
```

要使用子域构建链接，您可以使用`url_for`此 ASCIICast 帖子中描述的扩展名：

> [Rails 3 中的子域](http://asciicasts.com/episodes/221-subdomains-in-rails-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:00:48.693

根据 Stuart M 的回答，我现在可以开始工作了，我也错过了重要的路径选项。

这些是我现在用于博客逻辑的路线：

```
constraints :subdomain => "blogs" do
  resources :blogs, :path => "/"
end 
```

# c# - 在c#中将字符串转换为常量类型

> ID：15676584
> 
> 赞同：2
> 
> 时间：2013-03-28T07:46:36.630
> 
> 标签：c#, constants

我们在静态类中定义了常量以及类似的函数

```
public const string MSG_1 = "New error {0}" 
public const string MSG_2 = "Random error occurred {1}"

public static string Message_ToForm(string MType, string[] vals)

public static GetNewType(string MType)
{
  switch (MType)
    {
      case "MSG_1" :  ...........
    }
} 
```

我需要从像 Message_ToForm("MSG_1", string[]); 这样的程序中调用它

如何转换它以从字符串类型中获取常量的值？基本上，当“MSG_1”通过时，它应该将我返回为“新错误 {0}？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:49:35.473

我真的对你的问题感到困惑，但认为这就是你要找的：

```
public static string GetNewType(string MType)
{
  switch (MType)
    {
      case "MSG_1": return MSG_1;
      case "MSG_2": return MSG_2;
      default: throw new ArgumentException("MType");
    }
} 
```

但我必须说 - 这真的很糟糕！**你应该重新考虑你的设计**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:54:43.043

我将创建一个 MessageType 枚举并基于它进行切换。

```
enum MessageType
{ 
   None = 0,
   Msg1,
   Msg2
}

public static string GetNewType(MessageType MType)
{
    string msg = string.Empty;
    switch (MType)
    {
      case MessageType.Msg1:
         msg = MSG_1;
         break;
      case MessageType.Msg2:
         msg = MSG_2;
         break;
    }
    return msg;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T07:56:34.480

您的方法缺少返回类型。我相信这就是你想要的。

```
static string GetNewType(string MType)
{
   switch (MType)
      {
         case "MSG_1" :
            return MSG_1;
         case "MSG_2":
            return MSG_2;
      }
   return "";
} 
```

但是有没有理由将您的字符串保存为变量中的常量？你不能只返回开关中的字符串吗？像这样：

```
switch (MType)
{
   case "MSG_1" :
      return "New error {0}";
   case "MSG_2":
      return "Random error occurred {1}";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T07:58:51.823

您可能需要 GetNewType 的返回类型为 String

***建议：***

如果常量没有被重用，并且它仅用于您的查找。

您可以使用 a`Dictionary`进行查找

```
 Dictionary<string, string> constValues = new Dictionary<string, string>()
                                                         {
                                                             {"MSG_1", "New error {0}"},
                                                             {"MSG_2", "Random error occurred {1}"}
                                                         };

    public string GetNewType(string MType)
    {
        if (constValues.ContainsKey(MType))
            return constValues[MType];

        return string.Empty;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:00:38.817

创建一个静态只读 ReadOnlyDictionary 属性，其中填充您的“常量”：

```
private static readonly System.Collections.ObjectModel.ReadOnlyDictionary<string, string> _msgDictionary =
    new System.Collections.ObjectModel.ReadOnlyDictionary<string, string>(
        new Dictionary<string, string>()
        {
            { "MSG_1", "New error {0}" },
            { "MSG_2", "Random error occurred {1}" }
        });

public static System.Collections.ObjectModel.ReadOnlyDictionary<string, string> Messages
{
    get { return _msgDictionary; }
} 
```

然后用法：

```
var msg = Messages["MSG_1"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T08:02:48.847

```
public static GetNewType(string MType)
{
string MType = yourClass.MSG_1
  switch (MType)
    {
      case yourClass.MSG_1
        break;
          ....
        default:
       // Code you might want to run in case you are
       // given a value that doesn't match.
       break;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T08:05:03.007

我强烈建议使用开箱即用的 .NET 本地化功能。您只需将资源文件添加到项目中并将所有字符串消息放入其中，资源文件就像字符串资源的键值对，IDE 会自动为每个字符串消息创建一个属性，您可以在代码中使用该属性。

查看[如何在 C# 中使用本地化以](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp)获取更多详细信息。

# wpf - 获取有关在 WPF 中创建控件的通知

> ID：15676586
> 
> 赞同：0
> 
> 时间：2013-03-28T07:46:51.037
> 
> 标签：wpf, controls

WPF 中有没有一种方法可以在创建或销毁 WPF 控件时收到通知？
（例如我可以注册到“Control.ControlCreated”的事件......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:24:25.423

类的[Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)和[Initialized](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.initialized.aspx)事件`FrameworkElement`（及其对应事件）呢？它们不是路由事件，但具有一些样式，并且`EventSetters`可以连接到所有必需的控件。其余的取决于您需要在事件处理程序中执行的操作。

除此之外，我没有看到任何可以满足您要求的常见[控制事件。](http://msdn.microsoft.com/en-us/library/system.windows.controls.control_events.aspx)

# ruby-on-rails - force_ssl 在 Rails 中做了什么？

> ID：15676596
> 
> 赞同：96
> 
> 时间：2013-03-28T07:47:28.807
> 
> 标签：ruby-on-rails, ssl, nginx

在上一个[问题](https://stackoverflow.com/questions/15673328/how-does-nginx-pass-ssl-encrypted-data-to-a-rails-app)中，我发现我应该设置 nginx ssl 终止并且不让 Rails 处理加密数据。

那么为什么会存在以下内容呢？

```
config.force_ssl = true 
```

我看到这在生产配置文件中被注释掉了。但是，如果期望 nginx 将处理所有 ssl 内容，以便我的 rails 应用程序不处理加密数据，那么会`config.force_ssl = true`做什么呢？

如果我知道我将一直使用 nginx，是否应该在生产中将其注释掉？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2014-11-04T15:04:00.013

它*不仅*会强制您的浏览器将 HTTP 重定向到 HTTPS。它还将您的 cookie 设置为标记为“安全”，并启用[HSTS](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security "HSTS")，其中每一个都是非常好的防止 SSL 剥离的保护措施。

即使 HTTPS 保护您在“ [https://example.com/yourapp](https://example.com/yourapp) ”上的应用程序免受 MITM 攻击，如果有人在您的客户端和您的服务器之间进行攻击，他们也可以很容易地让您访问“ [http://example.com/yourapp](http://example.com/yourapp) ” . 如果没有上述保护措施，您的浏览器会很乐意将会话 cookie 发送给执行 MITM 的人。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-09-13T17:57:16.980

设置`config.force_ssl`包括`ActionDispatch::SSL`. 文档描述的`ActionDispatch::SSL`功能如下（为清楚起见添加了重点）：

> 请参阅此处包含的内容[和](http://api.rubyonrails.org/classes/ActionDispatch/SSL.html)[此处](https://github.com/rails/rails/blob/b326e82dc012d81e9698cb1f402502af1788c1e9/railties/lib/rails/application/default_middleware_stack.rb#L14)的 ActionDispatch::SSL 文档。

### 文档

该中间件在 时被添加到堆栈`config.force_ssl = true`中，并通过在 中设置的选项`config.ssl_options`。它执行三项工作来强制执行安全的 HTTP 请求：

1.  TLS 重定向：**将 http:// 请求永久重定向到** 具有相同 URL 主机、路径等的 https://。默认启用。设置`config.ssl_options` 为修改目标 URL（例如`redirect: { host: "secure.widgets.com", port: 8080 }`），或设置 `redirect: false`为禁用此功能。

2.  安全 cookie：在 cookie 上**设置`secure`标志**以告诉浏览器它们不能与 http:// 请求一起发送。默认启用。设置 `config.ssl_options`为`secure_cookies: false`禁用此功能。

3.  HTTP 严格传输安全 (HSTS)：**告诉浏览器将此站点记住为 TLS-only 并自动重定向非 TLS 请求**。默认启用。配置`config.ssl_options`为`hsts: false`禁用。设置`config.ssl_options`以`hsts: { … }`配置 HSTS：

    *   `expires`：这些设置会持续多长时间（以秒为单位）。默认为 `180.days`（推荐）。符合浏览器预加载列表的最低要求是`18.weeks`.
    *   `subdomains`：设置为`true`告诉浏览器将这些设置应用于所有子域。这可以保护您的 cookie 免受子域上易受攻击的站点的拦截。默认为`true`.
    *   `preload`: 宣传本网站可能包含在浏览器的预加载 HSTS 列表中。HSTS 会在每次访问时保护您的网站，但第一次访问*除外，*因为它还没有看到您的 HSTS 标头。为了缩小这一差距，浏览器供应商提供了一个支持 HSTS 的站点的内置列表。转到[https://hstspreload.appspot.com](https://hstspreload.appspot.com)提交您的网站以供收录。要关闭 HSTS，省略标头是不够的。浏览器会记住原始的 HSTS 指令，直到它过期。相反，使用标头告诉浏览器立即使 HSTS 过期。设置`hsts: false`是`hsts: { expires: 0 }`.

请求可以选择退出重定向`exclude`：

```
config.ssl_options = { redirect: { exclude: -> request { request.path =~ /healthcheck/ } } } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-28T08:13:56.993

此设置通过将 HTTP 请求重定向到相应的 HTTPS 来强制使用 HTTPS。所以浏览器访问`http://domain.com/path`将被重定向到`https://domain.com/path`.

将设置注释掉将允许这两种协议。

您仍然需要配置您的 Web 服务器来处理 HTTPS 请求。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-28T07:52:26.380

它强制与服务器的所有通信都被加密并使用 SSL，即通过 HTTPS。

当您将它包含在控制器中时，该控制器将仅接受 HTTPS 请求。

有用的网址：

1.  [http://api.rubyonrails.org/classes/ActionController/ForceSSL/ClassMethods.html](http://api.rubyonrails.org/classes/ActionController/ForceSSL/ClassMethods.html)
2.  [http://rubydoc.info/docs/rails/ActionController/ForceSSL](http://rubydoc.info/docs/rails/ActionController/ForceSSL)
3.  [http://railscasts.com/episodes/270-authentication-in-rails-3-1?view=comments](http://railscasts.com/episodes/270-authentication-in-rails-3-1?view=comments)

# c++ - 如何使这段代码更快

> ID：15676598
> 
> 赞同：-3
> 
> 时间：2013-03-28T07:47:36.347
> 
> 标签：c++, optimization

每次调用程序时，以下代码会执行 2000 万次，因此我需要一种方法来尽可能优化此代码。我不是高级 C++ 程序员，所以我寻求这个令人难以置信的社区的帮助。

```
int WilcoxinRST::work(GeneSet originalGeneSet, vector<string> randomGenes) {
vector<string> geneIDs;
vector<bool> isOriginal;
vector<int> rank;
vector<double> value;
vector<int> score;
int genesPerSet = originalGeneSet.geneCount();
unsigned int totalGenes, tempScore;
/**
 * Fill the first half of the vectors with original gene set data
 */
totalGenes = genesPerSet * 2;
for (int i = 0; i < genesPerSet; i++) {
    geneIDs.push_back(originalGeneSet.getMemberGeneAt(i));
    isOriginal.push_back(true);
    value.push_back(fabs(expressionLevels.getValue(geneIDs[i], statType)));
}
/**
 * Fill the second half with random data
 */
for (unsigned int i = genesPerSet; i < totalGenes; i++) {
    geneIDs.push_back(randomGenes.at(i - genesPerSet));
    isOriginal.push_back(false);
    value.push_back(fabs(expressionLevels.getValue(geneIDs[i], statType)));
}
totalGenes = geneIDs.size();
/**
 * calculate the scores
 */
if (statType == Fold_Change || statType == T_Statistic
        || statType == Z_Statistic) {
    //      Higher value is a winner
    for (unsigned int i = 0; i < totalGenes; i++) {
        tempScore = 0;
        if (!isOriginal[i]) {
            for (int j = 0; j < genesPerSet; j++) {
                if (value.at(i) > value.at(j)) {
                    tempScore++;
                }
            }

        } else {
            for (unsigned int j = genesPerSet; j < totalGenes; j++) {
                if (value.at(i) > value.at(j)) {
                    tempScore++;
                }
            }

        }

        score.push_back(tempScore);
    }

} else if (statType == FDR_PValue || statType == PValue) {
    // Lower value is a winner
    for (unsigned int i = 0; i < totalGenes; i++) {
        tempScore = 0;
        if (!isOriginal[i]) {
            for (int j = 0; j < genesPerSet; j++) {
                if (value.at(i) < value.at(j)) {
                    tempScore++;
                }
            }

        } else {
            for (unsigned int j = genesPerSet; j < totalGenes; j++) {
                if (value.at(i) < value.at(j)) {
                    tempScore++;
                }
            }

        }

        score.push_back(tempScore);
    }

} else {
    cout << endl << "ERROR. Statistic type not defined." << endl;
}

/**
 * calculate Ua, Ub and U
 */
int U_Original = 0, U_Random = 0, U_Final;
for (int j = 0; j < genesPerSet; j++) {
    U_Original += score[j];
}
for (unsigned int j = genesPerSet; j < totalGenes; j++) {
    U_Random += score[j];
}
U_Final = (U_Original < U_Random) ? U_Original : U_Random;

/**
 * calculate z
 */
double Zn, Zd, Z;
Zn = U_Final - ((genesPerSet * genesPerSet) / 2);
Zd = sqrt(
        (double) (((genesPerSet * genesPerSet
                * (genesPerSet + genesPerSet + 1)))) / 12.0);
Z = Zn / Zd;

/**
 * Return 0/1/2
 * 2: p value < 0.01
 * 1: 0.01 < p value < 0.05
 * 0: p value > 0.05
 */
if (fabs(Z) > 2.303)
    return 2;
else if (fabs(Z) > 1.605)
    return 1;
else
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:55:26.023

您的代码的复杂度为 O(N*N) [ `genesPerSet`=N]。但是使用值的顺序与您无关这一事实，我们可以在 O(N•log(N)) 中对其进行排序，并在 O(N) 中计算“分数”。（可能会快数千倍）。

此外，我们总共进行了 N*N 次比较。然后`U_Original + U_Random`= N*N，这意味着我们不需要计算 U_Random。此外，您的统计量 Zn= Umin-N*N/2;[`Umix=min(U_Original,U_Random)],`当您仅 abs(Zn/Zd) 围绕 N*N/2 对称时。我们只需要一种算法。

1.- 首先可以通过 (const) 引用获取参数：

```
int WilcoxinRST::work(const GeneSet &originalGeneSet, const vector<string> &randomGenes) 
```

2.- 你填写载体geneIDs；但不使用它？为什么？

3.- 你只能迭代 2 次。

4.-您将信号值（探针强度？）一起保存在一个向量中，并使用另一个向量来表示每个项目是什么——简单地保存在两个向量中。

5.- 你不需要分数向量，只需要总和。

6.- 为什么是 2000 万次？我猜你正在计算一些“统计”稳定性或 BStrap。可能您多次使用相同的 originalGeneSet。我认为您可以在另一个问题中发布调用此函数的代码，以便每次制作值向量和排序。

这里首先是新的 O(N•log(N)) 代码。

接下来是清理你的代码，但仍然是 O(N*N)，速度很快，但只有一个常数因子。

然后是相同的代码，但与您的原始代码和更多注释混合在一起。

请调试这个并告诉我是怎么回事。

```
#include<vector>
#include<algorithm>

int WilcoxinRST::work(const GeneSet &originalGeneSet , const vector<string>& randomGenes) 
{
    size_t genesPerSet = originalGeneSet.geneCount();
    std::vector<double> valueOri(genesPerSet), valueRnd(genesPerSet);
    /**
     * Fill the valueOri vector with original gene set data, and valueRnd with random data
     */
    for (size_t i = 0; i < genesPerSet; i++) 
    {
      valueOri[i] = std::fabs(expressionLevels.getValue( originalGeneSet.getMemberGeneAt(i) , statType ));
      valueRnd[i] = std::fabs(expressionLevels.getValue( randomGenes.at(i)                  , statType ));
    }
    std::sort(valueOri.begin(),valueOri.end());
    std::sort(valueRnd.begin(),valueRnd.end());

    /**
     * calculate the scores Ua, Ub and U
     */
    long U_Original ;

    if (statType == Fold_Change || statType == T_Statistic  || statType == Z_Statistic 
        statType == FDR_PValue  || statType == PValue ) 
    {
        //      Higher value is a winner
        size_t j=0;
        for (size_t i = 0; i < genesPerSet /*totalGenes*/; i++)      // i   -  2x
        {   
            while(valueOri[i]  > valueRnd[j]) ++j ;
            U_Original += j;
        }
    } else { cout << endl << "ERROR. Statistic type not defined." << endl;  }

    /**
     * calculate z
     */
    double Zn, Zd, Z;
    Zn = U_Original - ((genesPerSet * genesPerSet) / 2);
    Zd = std::sqrt( (double) (((genesPerSet * genesPerSet* (genesPerSet + genesPerSet + 1)))) / 12.0);
    Z = Zn / Zd;

    /**
     * Return 0/1/2
     * 2: p value < 0.01
     * 1: 0.01 < p value < 0.05
     * 0: p value > 0.05
     */
         if (std::fabs(Z) > 2.303)  return 2;
    else if (std::fabs(Z) > 1.605)  return 1;
    else                            return 0;
} 
```

接下来是清理你的代码，但仍然是 O(N*N)，速度很快，但只有一个常数因子。

```
#include<vector>
using namespace std;
class GeneSet ;
class WilcoxinRST;

int WilcoxinRST::work(const GeneSet &originalGeneSet , const vector<string>& randomGenes) 
{
    size_t genesPerSet = originalGeneSet.geneCount();
    vector<double> valueOri(genesPerSet), valueRnd(genesPerSet);
    /**
     * Fill the valueOri vector with original gene set data, and valueRnd with random data
     */
    for (size_t i = 0; i < genesPerSet; i++) 
    {
        valueOri[i]   =  fabs(expressionLevels.getValue( originalGeneSet.getMemberGeneAt(i) , statType ));
        valueRnd[i]   =  fabs(expressionLevels.getValue( randomGenes.at(i)                  , statType ));
    }
    /**
     * calculate the scores Ua, Ub and U
     */
    long U_Original = 0, U_Random = 0, U_Final;

    if (statType == Fold_Change || statType == T_Statistic  || statType == Z_Statistic) 
    {
        //      Higher value is a winner
        for (size_t i = 0; i < genesPerSet /*totalGenes*/; i++)      // i   -  2x
        {   for (size_t j = 0; j < genesPerSet; j++)   
            {   U_Random  +=  (valueRnd[i]  > valueOri[j]);// i en 2 set=Rnd, j in 1 set=Ori. count how many Ori are less than this Rnd 
                U_Original+=  (valueOri[i]  > valueRnd[j]);// i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are less than this Ori 
            }
        }
    } else 
    if (statType == FDR_PValue || statType == PValue) 
    {
        // Lower value is a winner
        for (size_t i = 0; i < genesPerSet; i++)   
        {   
            for (size_t j = 0; j < genesPerSet; j++)   
            {   U_Random  +=  (valueRnd[i]  < valueOri[j]);// i en 2 set=Rnd, j in 1 set=Ori. count how many Ori are > than this Rnd 
                U_Original+=  (valueOri[i]  < valueRnd[j]);// i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are > than this Ori 
            }
        }
    } else { cout << endl << "ERROR. Statistic type not defined." << endl;  }

    U_Final = (U_Original < U_Random) ? U_Original : U_Random;

    /**
     * calculate z
     */
    double Zn, Zd, Z;
    Zn = U_Final - ((genesPerSet * genesPerSet) / 2);
    Zd = sqrt(
            (double) (((genesPerSet * genesPerSet
                    * (genesPerSet + genesPerSet + 1)))) / 12.0);
    Z = Zn / Zd;

    /**
     * Return 0/1/2
     * 2: p value < 0.01
     * 1: 0.01 < p value < 0.05
     * 0: p value > 0.05
     */
         if (fabs(Z) > 2.303)       return 2;
    else if (fabs(Z) > 1.605)       return 1;
    else                            return 0;
} 
```

相同的代码，但与您的原始代码和更多注释混合。

```
int WilcoxinRST::work(const GeneSet &originalGeneSet , const vector<string>& randomGenes) 
{
    size_t genesPerSet = originalGeneSet.geneCount();
    unsigned int totalGenes, tempScore;
    totalGenes = genesPerSet * 2;

    //vector<string> geneIDs;
    //vector<bool>   isOriginal;
    //vector<int>    rank;
    vector<double> valueOri(genesPerSet), valueRnd(genesPerSet);
    //vector<int>    score;
    /**
     * Fill the first half of the vectors with original gene set data
     */

    for (size_t i = 0; i < genesPerSet; i++) 
    {
        //geneIDs.push_back( originalGeneSet.getMemberGeneAt(i)  );
        //isOriginal.push_back(true);

        valueOri[i]   =  fabs(expressionLevels.getValue( originalGeneSet.getMemberGeneAt(i) , statType ));
        valueRnd[i]   =  fabs(expressionLevels.getValue( randomGenes.at(i)                  , statType ));
    }
    /**
     * Fill the second half with random data
     */
    //for (unsigned int i = genesPerSet; i < totalGenes; i++) {
    //  geneIDs.push_back(randomGenes.at(i - genesPerSet));
    //  isOriginal.push_back(false);
    //  value.push_back(fabs(expressionLevels.getValue(geneIDs[i], statType)));
    //}
    //totalGenes = geneIDs.size();
    /**
     * calculate the scores
     */
        /**
     * calculate Ua, Ub and U
     */
    long U_Original = 0, U_Random = 0, U_Final;
    //for (int j = 0; j < genesPerSet; j++) // j in 1 set=Ori. count how many Ori are less than this Rnd
    //{
    //  U_Original += score[j];
    //}
    //for (unsigned int j = genesPerSet; j < totalGenes; j++) // j in 2 set=Rnd, count how many Rnd are less than this Ori 
    //{
    //  U_Random += score[j];
    //}

    if (statType == Fold_Change || statType == T_Statistic  || statType == Z_Statistic) 
    {
        //      Higher value is a winner
        for (size_t i = 0; i < genesPerSet /*totalGenes*/; i++)      // i   -  2x
        {   //tempScore = 0;
            //if (!isOriginal[i])  // i en 2 set=Rnd, j in 1 set=Ori. count how many Ori are less than this Rnd 
            for (size_t j = 0; j < genesPerSet; j++)   
            {   U_Random  +=  (valueRnd[i]  > valueOri[j]);// i en 2 set=Rnd, j in 1 set=Ori. count how many Ori are less than this Rnd 
                U_Original+=  (valueOri[i]  > valueRnd[j]);// i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are less than this Ori 
            }
            //} else 
            //{
            //  for (unsigned int j = genesPerSet; j < totalGenes; j++)  // i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are less than this Ori 
            //  {   if (value.at(i) > value.at(j)) {    tempScore++;        }
            //  }

            //}
            //score.push_back(tempScore);
        }

    } else 
    if (statType == FDR_PValue || statType == PValue) 
    {
        // Lower value is a winner
        for (size_t i = 0; i < genesPerSet; i++)   
        {   
            for (size_t j = 0; j < genesPerSet; j++)   
            {   U_Random  +=  (valueRnd[i]  < valueOri[j]);// i en 2 set=Rnd, j in 1 set=Ori. count how many Ori are > than this Rnd 
                U_Original+=  (valueOri[i]  < valueRnd[j]);// i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are > than this Ori 
            }
            //} else 
            //{
            //  for (unsigned int j = genesPerSet; j < totalGenes; j++)  // i in 1 set=Ori, j in 2 set=Rnd, count how many Rnd are less than this Ori 
            //  {   if (value.at(i) > value.at(j)) {    tempScore++;        }
            //  }

            //}
            //score.push_back(tempScore);
        }

        //for (unsigned int i = 0; i < totalGenes; i++) 
        //{   tempScore = 0;
        //  if (!isOriginal[i]) 
        //  {   for (int j = 0; j < genesPerSet; j++) {
        //          if (value.at(i) < value.at(j)) {  // Rnd i < Ori j increm U_Random
        //              tempScore++;
        //          }
        //      }

        //  } else {
        //      for (unsigned int j = genesPerSet; j < totalGenes; j++) { // Ori i < Rnd j. Increm U_Original
        //          if (value.at(i) < value.at(j)) {
        //              tempScore++;
        //          }
        //      }

        //  }

        //  score.push_back(tempScore);
        //}

    } else { cout << endl << "ERROR. Statistic type not defined." << endl;  }

    U_Final = (U_Original < U_Random) ? U_Original : U_Random;

    /**
     * calculate z
     */
    double Zn, Zd, Z;
    Zn = U_Final - ((genesPerSet * genesPerSet) / 2);
    Zd = sqrt(
            (double) (((genesPerSet * genesPerSet
                    * (genesPerSet + genesPerSet + 1)))) / 12.0);
    Z = Zn / Zd;

    /**
     * Return 0/1/2
     * 2: p value < 0.01
     * 1: 0.01 < p value < 0.05
     * 0: p value > 0.05
     */
    if (fabs(Z) > 2.303)
        return 2;
    else if (fabs(Z) > 1.605)
        return 1;
    else
        return 0;
} 
```

# jruby - 无法在 jruby 上使用 Rails 4 解决 gem 依赖项-doorkeeper、sass-rails

> ID：15676600
> 
> 赞同：1
> 
> 时间：2013-03-28T07:47:45.940
> 
> 标签：jruby, gemfile, ruby-on-rails-4, railtie, doorkeeper

我在谷歌上搜索了很多以找到答案，但找不到答案。我该如何解决这个依赖问题。如果我删除 sass-rails （这不实用，但只是为了测试问题），那么问题只是将 Gemfile 滚动到具有依赖冲突的咖啡轨。

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    doorkeeper (~> 0.6.7) java depends on
      railties (~> 3.1) java

    sass-rails (~> 4.0.0.beta1) java depends on
      railties (4.0.0.beta1) 
```

我尝试删除 Gemfile.lock 并重做捆绑安装。没有喜悦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:05:57.240

我在 GitHub 上检查了 applicake/doorkeeper 问题。这个 gem 还不支持 Rails 4，0.6.x 也不支持。

[https://github.com/applicake/doorkeeper/pull/200](https://github.com/applicake/doorkeeper/pull/200)

> 我们不打算为 rails 4 支持低于 1.0 的版本。

[但是有人已经像这样https://github.com/applicake/doorkeeper/pull/213](https://github.com/applicake/doorkeeper/pull/213)为 Rails 4 分叉了。
您可以按如下方式使用这些叉子。

```
# Gemfile
gem 'doorkeeper', github: 'kaznum/doorkeeper', branch: 'support_rails4' 
```

希望能帮到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T05:20:30.783

我会使用仅提前提交的最新分叉

`gem 'doorkeeper', github: 'stas/doorkeeper', branch: 'rails4'`

# php - 如何设置zendFramework应用程序公用文件夹

> ID：15676602
> 
> 赞同：0
> 
> 时间：2013-03-28T07:48:04.497
> 
> 标签：php, .htaccess, zend-framework

我的网络服务器结构：

```
mysite.com/www/here goes zendFramework folders and files.. 
```

我想让我的网址像这样

```
mysite.com 
```

但是，不是这样的：

```
mysite.com/public/ 
```

那么如何使它成为最好的方法呢？，使用 .htaccess 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:24:16.360

阅读这篇文章：[http ://akrabat.com/zend-framework/zend-framework-on-a-shared-host/](http://akrabat.com/zend-framework/zend-framework-on-a-shared-host/)

在根文件夹的 index.php 中：

```
<?php 
define('RUNNING_FROM_ROOT', true);
include 'public/index.php'; 
```

在根文件夹中的 .htaccess 文件中：

```
SetEnv APPLICATION_ENV production

RewriteEngine On
RewriteRule .* index.php 
```

# angularjs - 链接 vs 编译 vs 控制器

> ID：15676614
> 
> 赞同：534
> 
> 时间：2013-03-28T07:48:54.237
> 
> 标签：angularjs, angularjs-directive

创建指令时，可以将代码放入编译器、链接函数或控制器中。

在文档中，他们解释说：

*   compile 和 link 函数用于角循环的不同阶段
*   控制器在指令之间共享

但是，对我来说，不清楚哪种代码应该放在哪里。

例如：我可以在编译中创建函数并将它们附加到链接中的范围，还是只将函数附加到控制器中的范围？

如果每个指令都可以有自己的控制器，那么控制器如何在指令之间共享？控制器真的是共享的还是只是范围属性？

* * *

## 回答 #1

> 赞同：474
> 
> 时间：2013-03-28T11:58:06.113

**编译：**

这是 Angular 实际编译指令的阶段。对于给定指令的每个引用，此编译函数仅调用一次。例如，假设您正在使用 ng-repeat 指令。ng-repeat 必须查找它附加到的元素，提取它附加到的 html 片段并创建一个模板函数。

如果您使用过 HandleBars、下划线模板或类似的模板，就像编译它们的模板以提取模板函数一样。向此模板函数传递数据，该函数的返回值是包含正确位置数据的 html。

编译阶段是 Angular 中返回模板函数的那一步。这个 Angular 中的模板函数称为链接函数。

**链接阶段：**

链接阶段是将数据 ( $scope ) 附加到链接函数的地方，它应该返回链接的 html。由于该指令还指定了此 html 的去向或更改的内容，因此它已经很好了。这是您要更改链接的 html 的函数，即已经附加了数据的 html。如果您在链接函数中编写代码，则它通常是链接后函数（默认情况下）。这是一种在链接函数将数据与模板链接后调用的回调。

**控制器 ：**

控制器是您放置一些指令特定逻辑的地方。该逻辑也可以进入链接功能，但是您必须将该逻辑放在范围内以使其“可共享”。这样做的问题是，你会用你的指令破坏范围，这并不是真正的预期。那么，如果两个指令想要相互交谈/相互合作，还有什么选择呢？当然，您可以将所有这些逻辑放入服务中，然后使这两个指令都依赖于该服务，但这只会带来更多的依赖。另一种方法是为此范围提供一个控制器（通常是隔离范围？），然后当该指令“需要”另一个指令时，将此控制器注入到另一个指令中。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2014-06-04T19:59:44.587

我还想补充一下 Google 团队的 O'Reily AngularJS 书中所说的：

> 控制器 - 创建一个控制器，该控制器发布用于跨指令通信的 API。一个很好的例子是[Directive to Directive Communication](https://thinkster.io/a-better-way-to-learn-angularjs/directive-to-directive-communication)
> 
> 链接 - 以编程方式修改生成的 DOM 元素实例、添加事件侦听器并设置数据绑定。
> 
> 编译 - 以编程方式修改 DOM 模板以跨指令副本的功能，就像在 ng-repeat 中使用时一样。您的编译函数还可以返回链接函数来修改生成的元素实例。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-09-29T14:07:00.370

A`directive`允许您以声明方式扩展 HTML 词汇表以构建 Web 组件。该`ng-app`属性是一个指令，`ng-controller`所有`ng- prefixed attributes`. 指令可以是`attributes`，`tags`甚至是`class` `names`，`comments`。

指令是如何产生的（`compilation`和`instantiation`）

**编译：**我们将在渲染之前将`compile`函数用于DOM 并返回一个函数（它将为我们处理链接）。这也是放置需要与所有该指令共享的任何方法的地方。`manipulate``link``instances`

**链接：**我们将使用该`link`函数在特定 DOM 元素（从模板中克隆）上注册所有侦听器，并设置与页面的绑定。

如果在`compile()`函数中设置它们只会设置一次（这通常是您想要的）。如果在`link()`函数中设置，则每次将 HTML 元素绑定到对象中的数据时都会设置它们。

```
<div ng-repeat="i in [0,1,2]">
    <simple>
        <div>Inner content</div>
    </simple>
</div>

app.directive("simple", function(){
   return {
     restrict: "EA",
     transclude:true,
     template:"<div>{{label}}<div ng-transclude></div></div>",        
     compile: function(element, attributes){  
     return {
             pre: function(scope, element, attributes, controller, transcludeFn){

             },
             post: function(scope, element, attributes, controller, transcludeFn){

             }
         }
     },
     controller: function($scope){

     }
   };
}); 
```

`Compile`函数返回`pre`和`post`链接函数。在预链接函数中，我们有实例模板以及来自 的范围`controller`，但是模板没有绑定到范围并且仍然没有嵌入的内容。

`Post`链接功能是发布链接是最后执行的功能。现在`transclusion`已完成，`the template is linked to a scope`和`view will update with data bound values after the next digest cycle`。该`link`选项只是设置`post-link`功能的快捷方式。

**控制器：**指令控制器可以传递到另一个指令链接/编译阶段。它可以被注入到其他指令中，作为指令间通信的一种手段。

您必须指定所需指令的名称——它应该绑定到相同的元素或其父元素。该名称可以带有前缀：

```
? – Will not raise any error if a mentioned directive does not exist.
^ – Will look for the directive on parent elements, if not available on the same element. 
```

使用方括号`[‘directive1′, ‘directive2′, ‘directive3′]`需要多个指令控制器。

```
var app = angular.module('app', []);

app.controller('MainCtrl', function($scope, $element) {
});

app.directive('parentDirective', function() {
  return {
    restrict: 'E',
    template: '<child-directive></child-directive>',
    controller: function($scope, $element){
      this.variable = "Hi Vinothbabu"
    }
  }
});

app.directive('childDirective', function() {
  return {
    restrict:  'E',
    template: '<h1>I am child</h1>',
    replace: true,
    require: '^parentDirective',
    link: function($scope, $element, attr, parentDirectCtrl){
      //you now have access to parentDirectCtrl.variable
    }
  }
}); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-11-07T15:47:07.190

此外，使用控制器与链接函数的一个很好的理由（因为它们都可以访问范围、元素和属性）是因为您可以将任何可用的服务或依赖项传递给控制器​​（并且以任何顺序），而你不能用链接功能做到这一点。注意不同的签名：

```
controller: function($scope, $exceptionHandler, $attr, $element, $parse, $myOtherService, someCrazyDependency) {... 
```

对比

```
link: function(scope, element, attrs) {... //no services allowed 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-07-18T15:28:54.297

这是理解指令阶段的一个很好的示例 [http://codepen.io/anon/pen/oXMdBQ?editors=101](http://codepen.io/anon/pen/oXMdBQ?editors=101)

```
var app = angular.module('myapp', [])

app.directive('slngStylePrelink', function() {
    return {
        scope: {
            drctvName: '@'
        },
        controller: function($scope) {
            console.log('controller for ', $scope.drctvName);
        },
        compile: function(element, attr) {
            console.log("compile for ", attr.name)
            return {
                post: function($scope, element, attr) {
                    console.log('post link for ', attr.name)
                },
                pre: function($scope, element, attr) {
                    $scope.element = element;
                    console.log('pre link for ', attr.name)
                        // from angular.js 1.4.1
                    function ngStyleWatchAction(newStyles, oldStyles) {
                        if (oldStyles && (newStyles !== oldStyles)) {
                            forEach(oldStyles, function(val, style) {
                                element.css(style, '');
                            });
                        }
                        if (newStyles) element.css(newStyles);
                    }

                    $scope.$watch(attr.slngStylePrelink, ngStyleWatchAction, true);

                    // Run immediately, because the watcher's first run is async
                    ngStyleWatchAction($scope.$eval(attr.slngStylePrelink));
                }
            };
        }
    };
}); 
```

html

```
<body ng-app="myapp">
    <div slng-style-prelink="{height:'500px'}" drctv-name='parent' style="border:1px solid" name="parent">
        <div slng-style-prelink="{height:'50%'}" drctv-name='child' style="border:1px solid red" name='child'>
        </div>
    </div>
</body> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-06-22T14:50:35.140

*   **compile**：当我们需要修改指令模板时使用，例如添加新表达式，在该指令中附加另一个指令
*   **控制器**：当我们需要共享/重用 $scope 数据时使用
*   **link**：它是我们需要附加事件处理程序或操作 DOM 时使用的函数。

# c# - c# 设计器中的扩展控件

> ID：15676615
> 
> 赞同：0
> 
> 时间：2013-03-28T07:48:55.817
> 
> 标签：c#, controls, designer

我像这样扩展了一个控件

```
public partial class NewControl : OriginalControl
{

    public NewControl()
    {

    }

} 
```

并将 MyForm.Designer.cs 中的这些行从

```
private OriginalControl control1;
this.control1 = new OriginalControl(); 
```

到

```
private NewControl control1;
this.control1 = new NewControl(); 
```

但是，当我在设计器中打开表单时，会出现此错误：

> 无法加载设计器。检查源代码是否有语法错误，并检查是否所有引用都可用。
> 
> ICSharpCode.FormsDesigner.FormsDesignerLoadException：System.ComponentModel.Design.Serialization.CodeDomSerializerException：找不到类型“NewControl”。请确保引用了包含此类型的程序集。如果此类型是您的开发项目的一部分，请确保已使用当前平台或任何 CPU 的设置成功构建项目。在 System.ComponentModel.Design.Serialization.CodeDomSerializerBase.Error(IDesignerSerializationManager manager, String exceptionText, String helpLink) at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializeExpression(IDesignerSerializationManager manager, String name, CodeExpression expression) at System.ComponentModel.Design .Serialization.CodeDomSerializer。
> 
> System.ComponentModel.Design.Serialization.CodeDomSerializerException：变量“control1”未声明或从未分配。在 System.ComponentModel.Design.Serialization.CodeDomSerializerBase.Error(IDesignerSerializationManager manager, String exceptionText, String helpLink) at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializeExpression(IDesignerSerializationManager manager, String name, CodeExpression expression) at System.ComponentModel.Design .Serialization.CodeDomSerializerBase.DeserializeExpression(IDesignerSerializationManager manager, String name, CodeExpression expression) at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializeStatement(IDesignerSerializationManager manager, CodeStatement statement)
> 
> 在 ICSharpCode.FormsDesigner.FormsDesignerViewContent.LoadDesigner()
> 在 ICSharpCode.FormsDesigner.FormsDesignerViewContent.LoadAndDisplayDesigner() 在 ICSharpCode.FormsDesigner.FormsDesignerViewContent.LoadInternal(OpenedFile 文件，流流) 在 ICSharpCode.SharpDevelop.Gui.AbstractViewContentHandlingLoadErrors.Load(OpenedFile 文件，流溪流）

我如何错误地扩展我的控制权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:53:33.313

这可能纯粹是这两个控件出现的命名空间的问题。看看一个完全限定的类名是否恰好解决了你的问题。

# java - 在 Android 应用程序的其他线程中尝试访问 Activity 成员时出现 CalledFromWrongThreadException

> ID：15676616
> 
> 赞同：0
> 
> 时间：2013-03-28T07:48:55.930
> 
> 标签：java, android, textbox

我试图将我的问题放在下面的伪代码中：

```
public class something extends Activity {

    // some buttons and text view declaration
    public TextView textViewSomethingStatus;

    on create() {
            textViewSomethingStatus = (TextView) findViewById(R.id.something);
            //Here at one point i have stated thread
             new specialThread().start();
    }

    // some methods

    class specialThreads extends Thread {

         public void run() {
          //after performing some task.
          textViewSomethingStatus.setText("hello world");//This gives me crash
          }    
     }
} 
```

当我想从另一个类更新文本框中的文本时，我遇到了崩溃。我该怎么做呢？与在 Java 中一样，我们不能扩展多个类。

**编辑 ：**

**E/AndroidRuntime(605): android.view.ViewRootImpl$CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸它的视图。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:52:41.320

由于您`specialThreads`在`something`班级内，因此您可以访问它。那不应该是抛出错误的那个（因为如果你不能在那里访问它，那么它本身就会显示一个编译错误）。

该错误是因为`onCreate()`在初始化`TextView`.

```
setContentView(R.layout.activity_main); 
```

这是为了修复与android相关的错误。对于发布此更改后您可能会遇到的线程问题，请参阅此处发布的其他答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T07:53:31.280

```
 public void run() {

//check some status of something here

runOnUiThread(new Runnable() {

            @Override
            public void run() {
                 textViewSomethingStatus.setText("hello world");//This will not give you crash now 

            }
        }) 
```

为什么这样 ？

阅读有关 Android 线程概念的信息。并且不要忘记纠正`onCreate()`错字：你写的是方法名`oncreate()`而不是`onCreate()`; 是`setContentView(layout_id)`的也不见了`onCreate()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T07:52:41.940

除非这是“主”线程，否则您无法从另一个线程更新您的 UI。不过，有一些方法可以在 Android 上做到这一点。[我会在这里](http://developer.android.com/reference/android/os/Handler.html)使用处理程序

此外，除非你指定什么是“崩溃”——你得到什么错误，真的很难说。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T07:54:43.337

没有堆栈跟踪，很难确定正确的错误，但我认为你必须在你的 UI 线程上运行线程：试试那个示例代码：

```
something.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
                             textViewSomethingStatus.setText("hello world");//
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T08:04:42.397

我也遇到过你之前遇到的问题。所以这里是：

* * *

**注意**：（如果您只是不喜欢这个建议，请尝试将您想要使用的所有内容作为 static.ie.classes、variables 等等）

* * *

## 你能做的最好的事情

你应该使用[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)这里有一个很好的[教程。](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html).

你需要照顾的一些简单的事情......

*   制作一个扩展的类`BroadcastReceiver`。（在活动本身中）

    ```
     private class RecvrPClass extends BroadcastReceiver {

    /**
     * 
     */
    public RecvrPClass() {
        // TODO Auto-generated constructor stub
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * android.content.BroadcastReceiver#onReceive(android.content.Context,
     * android.content.Intent)
     */
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        // Toast.makeText(arg0, "GOT HERE", Toast.LENGTH_LONG).show();
    //fetch whatver you need to do here ;refresh();

    }} 
    ```

*   创建一个实例并注册它

    ```
     private BroadcastReceiver _refreshReceiver = new RecvrPClass();

    IntentFilter filter = new IntentFilter("SOME DESCRIPTION");

        this.registerReceiver(_refreshReceiver, filter); 
    ```

*   `SendBroadcast`s 使用`Intents`任何你需要触发/调用实现的地方

    ```
     Intent inBiz = new Intent("SOME DESCRIPTION");
            sendBroadcast(inBiz); 
    ```

# c# - 如何将数据从 C# 推送到 ZeroMQ 并从 Node.JS 拉取数据，反之亦然？

> ID：15676617
> 
> 赞同：2
> 
> 时间：2013-03-28T07:48:58.793
> 
> 标签：c#, node.js, client-server, zeromq

**场景**：

我正在尝试`String`通过 ZeroMQ 从 C# сonsole 应用程序向 Node.JS 服务器发送数据（比如类型）。

**信息：**

分别将 clrzmq 用于 c# 和 ZeroMQ 库用于 C# 和 Node.JS

我可以从 Node.JS执行[推拉](https://github.com/JustinTulloss/zeromq.node/blob/master/examples/push_pull.js)，也[可以](https://github.com/zeromq/clrzmq#example-server)从 C#[推拉。](https://github.com/zeromq/clrzmq#example-client)

因此，确认一件事是[ZeroMQ - 智能传输层](http://www.zeromq.org/)已安装在机器上（Windows 7 64 位）

**问题**：

我无法将数据从 C# 控制台应用程序推送到 Node.JS 应用程序（甚至尝试反之亦然），两者都在同一台机器上和同一地址上，即`tcp://127.0.0.1:2222`

Node.js 代码：

```
var zmq = require('zeromq.node');
var pull_socket = zmq.socket('pull');    
pull_socket.connect('tcp://127.0.0.1:2222');    
pull_socket.on('message', function (data) {
    console.log('received data:\n');
    console.log(data);
}); 
```

C#代码：

```
namespace DataServiceEngine
{
    class Program
    {
        static void Main(string[] args)
        {
            //clsApp App = new clsApp();
            //App.appId = "001";
            //App.name = "Back Office";

            //Console.WriteLine("appId :" + App.appId + "\n");
            //Console.WriteLine("name:" + App.name + "\n");

            try
            {
                // ZMQ Context and client socket
                using (var context = new Context(1))
                {
                    using (Socket client = context.Socket(SocketType.PUSH))
                    {
                        client.Connect("tcp://127.0.0.1:2222");

                        string request = "Hello";
                        for (int requestNum = 0; requestNum < 10; requestNum++)
                        {
                            Console.WriteLine("Sending request {0}...", requestNum);
                            client.Send(request, Encoding.Unicode);

                            string reply = client.Recv(Encoding.Unicode);
                            Console.WriteLine("Received reply {0}: {1}", requestNum, reply);
                        }
                    }
                }
            }
            catch (ZMQ.Exception exp)
            {
                Console.WriteLine(exp.Message);
            }
        }
    }
} 
```

**问题**：谁能告诉我可能是什么原因或我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:23:47.293

我有同样的问题（但我发出了通信 Node.JS -> Node.JS）。为了解决我过去`sendersocket.connect("tcp://"+host+":"+port);`在发送方和`receiversocket.bindSync("tcp://*:"+port);`接收方做的问题。

希望这能解决您的问题。

# objective-c - Objective C 语法帮助 - 文字

> ID：15676618
> 
> 赞同：1
> 
> 时间：2013-03-28T07:49:03.467
> 
> 标签：objective-c, syntax, literals

需要以下objective-c语法的帮助：

```
[error.userInfo[FBErrorParsedJSONResponseKey][@"body"][@"error"][@"type"] isEqualToString:@"OAuthException"] 
```

这里发生了什么？如何使用正文、错误和类型文字？

这是完整的块调用：

```
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (!error) {
        // handle successful response
    } else if ([error.userInfo[FBErrorParsedJSONResponseKey][@"body"][@"error"][@"type"] isEqualToString:@"OAuthException"]) { 
        NSLog(@"The facebook session was invalidated");
        [self logoutButtonTouchHandler:nil];
    } else {
        NSLog(@"Some other error: %@", error);
    }
}]; 
```

我也看过类似的语法

```
self.userProfile = [PFUser currentUser][@"profile"]; 
```

哪里`userProfile`是`NSDictionary`和`[PFUser currentUser]`返回`PFUser`。如何`[PFUser][@"profile]`初始化字典？

# android - java.lang.IllegalArgumentException：注销时出现无效的上下文参数错误

> ID：15676622
> 
> 赞同：3
> 
> 时间：2013-03-28T07:49:23.533
> 
> 标签：android, facebook

我创建了一个使用 facebook 登录和注销的简单应用程序。登录时没问题，但注销时应用程序停止了。有什么解决方案吗？

**这是我的代码**

**活动**

```
public class Login extends Activity implements OnClickListener {

    ImageView pic, button;
    Facebook fb;
    SharedPreferences sp;
    TextView welcome;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        String APP_ID = getString(R.string.app_id);
        fb = new Facebook(APP_ID);

        sp = getPreferences(MODE_PRIVATE);
        String access_token = sp.getString("access_token",null);
        long expires = sp.getLong("access_expires", 0);

        if(access_token != null){
            fb.setAccessToken(access_token);
        }
        if(expires != 0){
            fb.setAccessExpires(expires);
        }

        welcome = (TextView) findViewById(R.id.welcome);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        button = (ImageView)findViewById(R.id.login);
        pic = (ImageView)findViewById(R.id.picture_pic);
        button.setOnClickListener(this);

        updateButtonImage();

    }

    @SuppressWarnings("deprecation")
    private void updateButtonImage() {
        if (fb.isSessionValid()){
            button.setImageResource(R.drawable.logout_button);
            pic.setVisibility(ImageView.VISIBLE);

            JSONObject obj = null;
//          URL img_url = null;

            try {
                String jsonUser = fb.request("me");
                obj = Util.parseJson(jsonUser);

                String id = obj.optString("id");
                String name = obj.optString("name");

                welcome.setText("Welcome, " + name + " Your id is " + id);

            } catch (FacebookError e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }else{
            button.setImageResource(R.drawable.login_button);
            pic.setVisibility(ImageView.INVISIBLE);

        }
    }

    @SuppressWarnings("deprecation")
    @Override
    public void onClick(View v) {
        // logout from facebook
                if(fb.isSessionValid()){

                    try {
                        fb.logout(Login.this);
                        updateButtonImage();
                        welcome.setText("Please Login !");

                    } catch (MalformedURLException e) {

                        e.printStackTrace();
                    } catch (IOException e) {

                        e.printStackTrace();
                    }
                }else{
                    //login to facebook             
                fb.authorize(Login.this, new String[] {"email"} ,new DialogListener(){

                    @Override
                    public void onComplete(Bundle values) {
                        Editor editor = sp.edit();
                        editor.putString("access_token", fb.getAccessToken());
                        editor.putLong("access_expires", fb.getAccessExpires());
                        editor.commit();

                        updateButtonImage();

                //      Intent intent = new Intent (Login.this,Home.class);
                //      startActivity(intent);
                //      finish();
                    }

                    @Override
                    public void onFacebookError(FacebookError e) {
                        Toast.makeText(Login.this, "onFBError", Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onError(DialogError e) {
                        Toast.makeText(Login.this, "onError", Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onCancel() {
                        Toast.makeText(Login.this, "onCancel", Toast.LENGTH_SHORT).show();
                    }

                });
                }
    }
    @SuppressWarnings("deprecation")
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

        fb.authorizeCallback(requestCode, resultCode, data);

    }

} 
```

这是来自 Logcat 的错误报告

```
> 03-28 07:27:37.379: W/dalvikvm(4094): threadid=1: thread exiting with
> uncaught exception (group=0xa62df288) 03-28 07:27:37.383:
> E/AndroidRuntime(4094): FATAL EXCEPTION: main 03-28 07:27:37.383:
> E/AndroidRuntime(4094): java.lang.IllegalArgumentException: Invalid
> context argument 03-28 07:27:37.383: E/AndroidRuntime(4094):  at
> android.webkit.CookieSyncManager.createInstance(CookieSyncManager.java:86)
> 03-28 07:27:37.383: E/AndroidRuntime(4094):   at
> com.facebook.internal.Utility.clearCookiesForDomain(Utility.java:255)
> 03-28 07:27:37.383: E/AndroidRuntime(4094):   at
> com.facebook.internal.Utility.clearFacebookCookies(Utility.java:279)
> 03-28 07:27:37.383: E/AndroidRuntime(4094):   at
> com.facebook.Session.closeAndClearTokenInformation(Session.java:593)
> 03-28 07:27:37.383: E/AndroidRuntime(4094):   at
> com.facebook.android.Facebook.logoutImpl(Facebook.java:667) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> com.facebook.android.Facebook.logout(Facebook.java:644) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> com.innoark.motivator.Login.onClick(Login.java:118) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> android.view.View.performClick(View.java:4084) 03-28 07:27:37.383:
> E/AndroidRuntime(4094):   at
> android.view.View$PerformClick.run(View.java:16966) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> android.os.Handler.handleCallback(Handler.java:615) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> android.os.Handler.dispatchMessage(Handler.java:92) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> android.os.Looper.loop(Looper.java:137) 03-28 07:27:37.383:
> E/AndroidRuntime(4094):   at
> android.app.ActivityThread.main(ActivityThread.java:4745) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> java.lang.reflect.Method.invokeNative(Native Method) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> java.lang.reflect.Method.invoke(Method.java:511) 03-28 07:27:37.383:
> E/AndroidRuntime(4094):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
> 03-28 07:27:37.383: E/AndroidRuntime(4094):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 03-28
> 07:27:37.383: E/AndroidRuntime(4094):     at
> dalvik.system.NativeStart.main(Native Method) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-12T21:39:36.720

我在一个旧应用程序中遇到了这个错误，该应用程序仍在使用这个问题中使用的现已弃用的注销方法。由于时间不够，我选择修补 SDK 以快速修复而不是升级。

正如堆栈跟踪所暗示的，问题在于在这一行，传递给 CookieSyncManager 的上下文参数为空：

`android.webkit.CookieSyncManager.createInstance(CookieSyncManager.java:86)`

如果再往上看，可以看到传入的 Context 参数是`Session`Facebook SDK 中类的 staticContext 成员变量。无论出于何种原因，他们将此变量设置为 null，因此当`logout`被调用时，应用程序会因此异常而崩溃。

为了解决这个问题，我只是编辑了 Session 类来创建`initializeStaticContext`一个公共方法。然后，在调用注销之前调用它：

```
Session.initializeStaticContext(this.getApplicationContext());
fb.logout(Login.this); 
```

当然，这不是最好的解决方案，但它可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T20:46:03.543

[https://developers.facebook.com/bugs/547340878743830/](https://developers.facebook.com/bugs/547340878743830/)的解决方法是创建一个 com.facebook.Door 类，以便能够调用 Session.initializeStaticContext()，并在调用注销之前调用其方法。

```
package com.facebook;

import android.content.Context;

public class Door {
  public static void initializeStaticContext(Context context) {
    Session.initializeStaticContext(context);
  }
} 
```

# php - 将下拉列表中的选定值存储到php中的变量

> ID：15676626
> 
> 赞同：-5
> 
> 时间：2013-03-28T07:49:39.960
> 
> 标签：php, mysql, drop-down-menu

我使用网页中数据库中的值填充了一个下拉列表。我使用**MySQL**数据库和**PHP**进行编码，使用**HTML**进行设计。现在，如果我从下拉列表中选择一个值并提交它，我希望将所选值存储在一个新变量中。我将再次将变量传输到新网页。我尝试使用**$_GET**和**$_REQUEST**代码来执行此操作，但它们都不起作用。请建议我解决方案。

这是代码：

下拉列表的 PHP 和 HTML 代码：

```
<?php
$yearval=$_GET['year'];
$classval=$_GET['class'];
$semesterval=$_GET['semester'];
mysql_connect("localhost","root",""); // (host, username, password)
mysql_select_db("digint") or die("Unable to select database"); //select db
?>
<table width="500" border="1" align="center" cellpadding="0" cellspacing="1">
<tr>
<td>SELECT YOUR SUBJECT AND ENTER THE SUBJECT ACCESS CODE</td>
<table width="400" border="1" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<form method="post" action="accesscheck.php">
<tr>
<td>Select Subject</td>
<td>
<?php
//Subject selection
$result = mysql_query("select DISTINCT subject from accessindex where semester=$semesterval");
echo '<select id="subject" name="subject"><OPTION>';
echo "Select a subject</OPTION>";
while ($row = mysql_fetch_array($result)){
$subject = $row["subject"];
echo "<OPTION value=\"$subject\">$subject</OPTION>";
}
echo '</SELECT>';
?>
</td>
</tr>
<tr>
<td width="78">AccessKey</td>
<td width="294"><input name="myaccesskey" type="password" id="myaccesskey"></td>
</tr>
<td>
<input type="submit" name="AccessCheck" value="Submit">
</td>
</tr>
</body>
</html> 
```

使用选定值的 PHP 代码：

```
<?php
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$myaccesskey=$_POST['myaccesskey']; 
$subjectval=$_POST['subject'];

$myaccesskey = stripslashes($myaccesskey);
$myaccesskey = mysql_real_escape_string($myaccesskey);
$subjectval = stripslashes($subjectval);
$subjectval = mysql_real_escape_string($subjectval);
$sql="SELECT accesskey FROM accessindex WHERE accesskey='$myaccesskey' and subject=$subjectval";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
if($count==1){
header("location:marksentry.php");
}
else {
echo "Wrong Subject Access Key";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:54:53.117

提交后，您可以使用您使用的方法获取选择下拉列表的值`GET`或`POST`

`$select_val = $_POST['subject'];`

`$_POST['subject']`下拉列表的选定值在哪里，是下拉列表`subject`的名称

**尝试这个**

```
<?php
//Subject selection
$result = mysql_query("select DISTINCT subject from accessindex where semester=$semesterval");
echo '<form method="POST" action="new_webpage_action.php">';
echo '<select id="subject" name="subject"><OPTION>';
echo "Select a subject</OPTION>";
while ($row = mysql_fetch_array($result)){
$subject = $row["subject"];
echo "<OPTION value=\"$subject\">$subject</OPTION>";
}
echo '</SELECT>';
echo '<input type="submit" name="submit" value="submit"/>';
echo '</form>';
?> 
```

# java - java.io.FileNameFilter

> ID：15676627
> 
> 赞同：1
> 
> 时间：2013-03-28T07:49:47.947
> 
> 标签：java, file, io

```
interface FilenameFilter {
    boolean accept(File dir, String name);
} 
```

据我所知 FileNameFilter 用于根据特定模式或扩展名选择文件。对于那个“字符串名称”就足够了。为什么需要“文件目录”参数？有什么具体的原因或用途吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:53:06.677

**dir**对象是文件的父目录，**name**是文件名。

* * *

[**接受**](http://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/filefilter/AbstractFileFilter.html)

```
public boolean accept(File dir,
                      String name) 
```

检查文件是否应该被这个过滤器接受。

**指定者：**

在接口 FilenameFilter 中接受

**指定者：** 接口IOFileFilter中的accept

**参数：**

`dir`- 要检查的目录文件

`name`- 要检查的目录中的文件名

**回报：**

如果此文件与测试匹配，则为 true

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:52:55.250

`FilenameFilter`- 只是界面。

您可以编写自己的实现来关心`dir`文件的放置位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:51:49.077

检查[文档](http://docs.oracle.com/javase/7/docs/api/java/io/FilenameFilter.html#accept%28java.io.File,%20java.lang.String%29)

```
Parameters:
dir - the directory in which the file was found.
name - the name of the file. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:54:44.293

[接口文件名过滤器](http://docs.oracle.com/javase/7/docs/api/java/io/FilenameFilter.html)

> 实现此接口的类的实例用于过滤文件名。这些实例用于过滤类 File 的 list 方法中的目录列表，并由 Abstract Window Toolkit 的文件对话框组件。

# jquery - jquery 使用 iframe 和 div 标签调整大小

> ID：15676636
> 
> 赞同：0
> 
> 时间：2013-03-28T07:50:48.197
> 
> 标签：jquery, html, resize

我正在阅读有关 jquery-resize [http://jqueryui.com/resizable/](http://jqueryui.com/resizable/)的信息 我有 html 页面，其中包含 3 个 div 标签和 1 个 iframe - 比如

```
<link rel="stylesheet" type="text/css" href="/static/reset.css" />

<body class="site">
   <div id="mytag1">
    <iframe src="/some/path/" scrolling="no" frameborder="0"></iframe>
   </div>

   <div id="mytag2">

     <div id="mytag3">
     </div>
  </div>
</body>
</html> 
```

我想允许用户调整包含在 div-id#mytag1 中的 iframe 的大小如何做到这一点？感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:57:16.003

使包含它的`iframe`合身。`div`因此将其 CSS 样式属性设置`width`为.`height``100%`

然后设置大小`div`并制作`resizable()`。

这是你要找的东西：http: [//jsfiddle.net/PHbHN/](http://jsfiddle.net/PHbHN/)？

# ruby-on-rails-3.2 - Autotest re: Thor 中的“Bundler:GemNotFound”错误

> ID：15676637
> 
> 赞同：0
> 
> 时间：2013-03-28T07:50:50.867
> 
> 标签：ruby-on-rails-3.2, bundler, autotest, thor, ruby-2.0

**编辑**：我回滚到 Thor 0.17.0，这似乎有效。不知道为什么，但它就在那里。

我可以弄清楚是什么原因造成的，但是我的自动测试停止了运行测试并给了我以下错误：

```
"/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby" -rrubygems -S "/usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/exe/rspec" --tty "/Users/charliekim/programming/Ganesh/spec/controllers/pages_controller_spec.rb" "/Users/charliekim/programming/Ganesh/spec/controllers/student_groups_controller_spec.rb" "/Users/charliekim/programming/Ganesh/spec/controllers/students_controller_spec.rb" "/Users/charliekim/programming/Ganesh/spec/controllers/users_controller_spec.rb" "/Users/charliekim/programming/Ganesh/spec/models/student_group_spec.rb" "/Users/charliekim/programming/Ganesh/spec/models/student_spec.rb" "/Users/charliekim/programming/Ganesh/spec/models/user_spec.rb" "/Users/charliekim/programming/Ganesh/spec/requests/layout_links_spec.rb"
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:92:in `block in materialize': Could not find thor-0.18.0 in any of the sources (Bundler::GemNotFound)
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `map!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/spec_set.rb:85:in `materialize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/definition.rb:114:in `specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/definition.rb:159:in `specs_for'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/definition.rb:148:in `requested_specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/environment.rb:18:in `requested_specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:13:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler.rb:120:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.3.4/lib/bundler/setup.rb:17:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/charliekim/programming/Ganesh/config/boot.rb:6:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/charliekim/programming/Ganesh/config/application.rb:1:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/charliekim/programming/Ganesh/config/environment.rb:2:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/charliekim/programming/Ganesh/spec/spec_helper.rb:3:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/charliekim/programming/Ganesh/spec/controllers/pages_controller_spec.rb:1:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load_spec_files'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/command_line.rb:22:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:80:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

我在 SO 上看到了一些关于 GemNotFound 错误的类似问题，但解决方案似乎对此不起作用。当我运行`bundle exex gem list`Thor 时，存在 0.18.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:17:13.320

我在运行 rake 任务时遇到了类似的问题，并执行了以下操作来解决该问题。

在您的 gemfile 中，将源代码从 https 更改为[http://rubygems.org](http://rubygems.org)，然后运行 ​​bundle install。

然后我的 rake 任务开始工作，但不完全确定为什么会发生这种情况，因为我很确定我的两台开发机器的设置相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T10:41:06.357

解决方案是回滚到`Thor 0.17.0`

# java - 包含 webview 的警报对话框内的进度条

> ID：15676639
> 
> 赞同：0
> 
> 时间：2013-03-28T07:51:03.600
> 
> 标签：java, android, webview, progress-bar, android-alertdialog

我创建了一个活动，在其中单击特定按钮时，**将打开一个包含 WebView 的警报对话框**。

一切正常，除非 WebView 的 url 被加载。在加载 WebView 的内容时，会显示警报对话框的磁贴和按钮，看起来有点奇怪。

这是在**为其中的 webview 加载网页时警报对话框的屏幕截图**：

![加载 webview 内容时的警报对话框](../Images/a063389a0f1a41300bd06fac9fdcc517.png)

成功加载 webview 的内容后**，如下所示**：

![加载 webview 内容后](../Images/68f6a218d190d75313938ba445c41114.png)

**我想要的是在加载 webview 的内容时，会显示一个进度条或显示一个固定的背景图像。如何做到这一点？**

**我用来创建此警报**的方法是：

```
//method to zoom images

public void zoomImage(String imageUrl)
{
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Zoomed Image");
    WebView wv = new WebView(this);
    wv.setBackgroundColor(Color.WHITE);
    wv.getSettings().setBuiltInZoomControls(true);
    wv.setInitialScale(400);
    wv.loadUrl(imageUrl);
    wv.setWebViewClient(new WebViewClient()
    {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
      view.loadUrl(url);
      return true;
    }
  });
alert.setView(wv);
alert.setNegativeButton("Close", new DialogInterface.OnClickListener()
{
@Override
public void onClick(DialogInterface dialog, int id)
{
}
});
alert.show();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:03:31.063

您可以在警报对话框自定义布局中使用进度条，并使 OnPageFinishedMethod 中的可见性消失。

您可以像这样创建自定义警报对话框：

```
 LayoutInflater inflater = getLayoutInflater();
        View dialoglayout = inflater.inflate(R.layout.big_east, (ViewGroup) getCurrentFocus());
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setView(dialoglayout);

    builder.setTitle("Zoomed Image"); 
```

你应该重写两个方法，就像“shouldOverrideUrlLoading”一样。方法是“OnPageStart”和“OnPageFinished”。

在 OnPageStart 中显示对话框，在 OnPageFinish 中使进度条消失。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:56:26.613

您可以使用 a `WebView.PictureListener`（已弃用，但仍然有效。不确定是否有可用的替代方法）：

```
wv.setPictureListener(new WebView.PictureListener() {
    @Override
    public void newPicture(WebView view, Picture arg1) {
        alert.show();
    }
} 
```

# crash - cloudfoundry vmc推送崩溃

> ID：15676653
> 
> 赞同：0
> 
> 时间：2013-03-28T07:52:21.110
> 
> 标签：crash, push, cloud-foundry, vmc

**当我将我的应用程序推送到 cloudfoundry vmc 时，请告诉我：**

上传我的网站...失败 上传失败。再试一次 'vmc push TypeError: no implicit conversion of ni 有关更多信息，请参阅 ~/.vmc/crash

****然后我打开 ~/.vmc/crash 下的内容是什么****

崩溃时间：2013-03-28 15:39:33 +0800

TypeError：没有将 nil 隐式转换为 String

```
multipart-post-1.2.0/lib/composite_io.rb:85:in `initialize'
multipart-post-1.2.0/lib/composite_io.rb:85:in `open'
multipart-post-1.2.0/lib/composite_io.rb:85:in `initialize'
cfoundry-0.5.2/lib/cfoundry/v1/base.rb:57:in `new'
cfoundry-0.5.2/lib/cfoundry/v1/base.rb:57:in `upload_app'
cfoundry-0.5.2/lib/cfoundry/upload_helpers.rb:48:in `upload'
vmc-0.5.0/lib/vmc/cli/app/push.rb:86:in `block in upload_app'
interact-0.5.2/lib/interact/progress.rb:98:in `with_progress'
vmc-0.5.0/lib/vmc/cli/app/push.rb:85:in `upload_app'
vmc-0.5.0/lib/vmc/cli/app/push.rb:65:in `setup_new_app'
vmc-0.5.0/lib/vmc/cli/app/push.rb:48:in `push'
mothership-0.5.1/lib/mothership/base.rb:66:in `run'
mothership-0.5.1/lib/mothership/command.rb:72:in `block in invoke'
manifests-vmc-plugin-0.6.2/lib/manifests-vmc-plugin/plugin.rb:142:in `call'
manifests-vmc-plugin-0.6.2/lib/manifests-vmc-plugin/plugin.rb:142:in `block in create_and_save_manifest'
mothership-0.5.1/lib/mothership/callbacks.rb:74:in `with_filters'
manifests-vmc-plugin-0.6.2/lib/manifests-vmc-plugin/plugin.rb:140:in `create_and_save_manifest'
manifests-vmc-plugin-0.6.2/lib/manifests-vmc-plugin/plugin.rb:80:in `wrap_push'
manifests-vmc-plugin-0.6.2/lib/manifests-vmc-plugin/plugin.rb:29:in `block in <class:ManifestsPlugin>'
mothership-0.5.1/lib/mothership/command.rb:82:in `instance_exec'
mothership-0.5.1/lib/mothership/command.rb:82:in `block (2 levels) in invoke'
mothership-0.5.1/lib/mothership/command.rb:86:in `instance_exec'
mothership-0.5.1/lib/mothership/command.rb:86:in `invoke'
mothership-0.5.1/lib/mothership/base.rb:55:in `execute'
vmc-0.5.0/lib/vmc/cli.rb:150:in `block (2 levels) in execute'
vmc-0.5.0/lib/vmc/cli.rb:161:in `save_token_if_it_changes'
vmc-0.5.0/lib/vmc/cli.rb:149:in `block in execute'
vmc-0.5.0/lib/vmc/cli.rb:100:in `wrap_errors'
vmc-0.5.0/lib/vmc/cli.rb:145:in `execute'
mothership-0.5.1/lib/mothership.rb:45:in `start'
vmc-0.5.0/bin/vmc:11:in `<top (required)>'
C:/Ruby200-x64/bin/vmc:23:in `load'
C:/Ruby200-x64/bin/vmc:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:34:08.437

请尝试使用 vmc 版本 0.4.0。我在使用 vmc 0.50 时遇到了类似的问题，在我更改为 vmc 0.4.0 后，它工作正常！

# matlab - 使用matlab将球体投影到平面

> ID：15676656
> 
> 赞同：5
> 
> 时间：2013-03-28T07:52:26.580
> 
> 标签：matlab, 3d, geometry, 2d, projection

这可能是非常基本的matlab，请见谅。我使用该命令`sphere`创建一个 3D 球体，并`x,y,z`使用 surf 生成它的矩阵。例如：

```
[x,y,z]=sphere(64); 
```

我想将此 3D 球体投影（或求和）到笛卡尔 2D 平面之一（例如 XY 平面）中，以获得将成为该球体投影的 2D 矩阵。在输出上使用`imshow`or`imagesc`应该如下所示：

![在此处输入图像描述](../Images/6a6c9c04afbb29d43475ce536eae07d5.png)

简单的求和显然不起作用，我怎样才能在 Matlab 中完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T20:30:18.883

我可能完全误解了你的问题，在这种情况下，我道歉；但我认为以下三种方法之一实际上可能是您所需要的。请注意，方法 3 给出的图像看起来很像您提供的示例......但我到达那里的路线非常不同（根本不使用`sphere`命令，而是通过直接工作计算“内部体素”和“外部体素”与他们到中心的距离）。与第三张相比，我倒置了第二张图像，因为这样看起来更好 - 用零填充球体使它看起来几乎像一个黑色圆盘。

![在此处输入图像描述](../Images/45c290c0fd271d38564c00464bcef95b.png)

```
%% method 1: find the coordinates, and histogram them
[x y z]=sphere(200);
xv = linspace(-1,1,40);
[xh xc]=histc(x(:), xv);
[yh yc]=histc(y(:), xv);

% sum the occurrences of coordinates using sparse:
sm = sparse(xc, yc, ones(size(xc)));
sf = full(sm);

figure; 
subplot(1,3,1);
imagesc(sf); axis image; axis off
caxis([0 sf(19,19)]) % add some clipping
title 'projection of point density'

%% method 2: fill a sphere and add its volume elements:
xv = linspace(-1,1,100);
[xx yy zz]=meshgrid(xv,xv,xv);
rr = sqrt(xx.^2 + yy.^2 + zz.^2);
vol = zeros(numel(xv)*[1 1 1]);
vol(rr<1)=1;
proj = sum(vol,3);
subplot(1,3,2)
imagesc(proj); axis image; axis off; colormap gray
title 'projection of volume'

%% method 3: visualize just a thin shell:
vol2 = ones(numel(xv)*[1 1 1]);
vol2(rr<1) = 0;
vol2(rr<0.95)=1;
projShell = sum(vol2,3);
subplot(1,3,3);
imagesc(projShell); axis image; axis off; colormap gray
title 'projection of a shell' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:13:42.993

您可以使用以下方法在 Matlab 中的 XY 平面上投影：

```
[x,y,z] = sphere(64);
surf(x,y,zeros(size(z))); 
```

但我认为你不应该为此使用 Matlab，因为问题很简单，你可以分析地做到这一点......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:48:44.477

我会看一下为此目的而设计的地图投影。

搜索“map projections matlab”会产生关于[Matlab 映射工具箱](http://www.mathworks.com/help/map/index.html)的文档。但是，如果您想要或需要自己滚动，[USGS](http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html)网站上有一个很好的摘要，以及[wikipedia](https://en.wikipedia.org/wiki/Map_projection)文章。

# ruby-on-rails-3 - 如何在 HAML 中为设计生成视图

> ID：15676663
> 
> 赞同：11
> 
> 时间：2013-03-28T07:52:43.163
> 
> 标签：ruby-on-rails-3, devise, haml

这是我的 Gemfile

```
gem 'haml'
group :development do
  gem 'hpricot'
  gem 'ruby_parser'
end 
```

然后我在终端/命令窗口中执行了以下语句：

```
bundle install
rails generate devise:views users -e haml 
```

或者

```
rails generate devise:views users -t = haml 
```

但是在 erb 中创建设计视图。如何解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-01T15:29:29.547

更简单的解决方案。

我在 Gemfile 的开发部分安装了 erb2haml，所以我只运行：

```
rails generate devise:views
rake haml:erb2haml
# or
rake haml:replace_erbs # outdated 
```

完毕！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-28T08:13:55.150

我必须这样做

```
rails generate devise:views

gem "html2haml"
bundle install

for file in app/views/devise/**/*.erb; do html2haml -e $file ${file%erb}haml && rm $file; done 
```

现在它是完美的。

另请参阅[设计 wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-Haml-and-Slim-Views)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-31T11:16:08.677

在这里快速浏览一下。它从设计文档中给出了详细的解释

[操作方法：创建 Haml 和 Slim 视图](http://github.com/plataformatec/devise/wiki/How-To%3a-Create-Haml-and-Slim-Views)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T17:38:56.283

似乎缺少指示要使用哪个模板引擎的选项（版本 3.0.0）。对此有一个问题。[https://github.com/plataformatec/devise/issues/2455](https://github.com/plataformatec/devise/issues/2455)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-08T17:09:50.610

它只是 erb 到 haml 的转换案例。您可以使用任何类型的haml 转换器。像这个 [http://htmltohaml.com/](http://htmltohaml.com/)

# c - 如何在内核编程中执行shell命令？

> ID：15676667
> 
> 赞同：17
> 
> 时间：2013-03-28T07:53:24.937
> 
> 标签：c, ubuntu, linux-kernel, kernel-module

我想在我的 c 代码中使用`system()`函数。`stdlib.h`我实际上正在从事内核编程。

每当我想在其中使用`system()`它时，都会出错`stdlib.h`说没有找到这样的文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T15:06:50.677

这很简单！

```
#include <linux/kmod.h>

char * envp[] = { "HOME=/", NULL };
char * argv[] = { "/bin/ls", NULL };

call_usermodehelper(argv[0], argv, envp, UMH_WAIT_EXEC); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T08:38:18.053

您可能想要的是[执行用户空间功能](https://stackoverflow.com/questions/5246636/executing-a-user-space-function-from-the-kernel-space)。该 SE 答案包括指向 IBM 文章的链接，其中包含从内核调用的示例用户空间进程。您应该使用的搜索词是“usermodehelper”和“usermode helper”。

在内核中，请参见：

```
yba@tavas:~/linux-2.6/linux-2.6$ find . -type f | xargs grep "usermode.helper"
./kernel/cgroup.c:      /* Drop the lock while we invoke the usermode helper,
./kernel/kmod.c:    /* CLONE_VFORK: wait until the usermode helper has execve'd
./kernel/kmod.c: * call_usermodehelper_setup - prepare to call a usermode helper
./drivers/block/drbd/drbd_int.h:extern char usermode_helper[];
./drivers/block/drbd/drbd_nl.c: char *argv[] = {usermode_helper, cmd, mb, NULL };
./drivers/block/drbd/drbd_nl.c: dev_info(DEV, "helper command: %s %s %s\n", usermode_helper, cmd, mb);
./drivers/block/drbd/drbd_nl.c: ret = call_usermodehelper(usermode_helper, argv, envp, UMH_WAIT_PROC);
./drivers/block/drbd/drbd_nl.c:             usermode_helper, cmd, mb,
./drivers/block/drbd/drbd_nl.c:             usermode_helper, cmd, mb,
./drivers/block/drbd/drbd_nl.c: char *argv[] = {usermode_helper, cmd, tconn->name, NULL };
./drivers/block/drbd/drbd_nl.c: conn_info(tconn, "helper command: %s %s %s\n", usermode_helper, cmd, tconn->name);
./drivers/block/drbd/drbd_nl.c: ret = call_usermodehelper(usermode_helper, argv, envp, UMH_WAIT_PROC);
./drivers/block/drbd/drbd_nl.c:           usermode_helper, cmd, tconn->name,
./drivers/block/drbd/drbd_nl.c:           usermode_helper, cmd, tconn->name,
./drivers/block/drbd/drbd_main.c:char usermode_helper[80] = "/sbin/drbdadm";
./drivers/block/drbd/drbd_main.c:module_param_string(usermode_helper, usermode_helper, sizeof(usermode_helper), 0644);
./drivers/block/drbd/drbd_main.c:        * currently blocked waiting for that usermode helper to
./security/keys/request_key.c: * Initialise a usermode helper that is going to have a specific session
./security/keys/request_key.c: * Clean up a usermode helper with session keyring.
./security/keys/request_key.c: * Call a usermode helper with a specific session keyring. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:20:25.657

没有简单的方法，因为 system() 是一个用户级的 C 库函数，它涉及许多系统调用，包括：

```
 sys_fork()
 sys_execve() 
```

您可以使用以下方式获得 system() 效果（我猜）：

```
 create a kernel thread.

 let the kernel thread execute sys_execve( your command name) 
```

不确定这是否可行，但您可以尝试。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-28T08:14:46.853

您不能使用内核中的 system() 。故事结局。没有应用程序级代码可以从内核空间执行。

# javascript - 不使用 eval() 绘制图形

> ID：15676671
> 
> 赞同：4
> 
> 时间：2013-03-28T07:53:34.000
> 
> 标签：javascript, jquery, graph, eval

我创建了一个 Chrome 扩展程序，可以绘制用户输入的数学方程图。为了`y`轻松获得价值，我使用了`eval()`（是的，我知道这很糟糕），因为这是实现它的最简单方法。

```
var equ = $("#equ1").val();                //some element

//let's say equ = "2(2^x) + 3x"

//some magic code
//equ becomes "2*(pow(2,x))+3*x"

for(var x = -10; x < 10; x++){
    var y = eval(equ.replace(/x/ig, x));   //calculate y value
    drawPoint(x, y);
}
console.log("Graphing done."); 
```

但是，由于[新的清单版本 2](http://developer.chrome.com/extensions/manifestVersion.html#manifest-v1-changes)，我不能再使用`eval`了。我想不出任何方法来操纵字符串。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:27:11.493

干净的方法：您可以尝试使用[Jison](http://zaach.github.com/jison/docs/)解析表达式并从输入字符串构建 AST。然后，将函数与 AST 节点相关联，这些函数将节点表示的操作应用于提供给它们的数据。这意味着你必须在你的语法和节点代码中明确地放置你想要支持的每个数学表达式，但另一方面，这也可以更容易地支持 JS 不支持的数学运算符。如果您愿意投入一些时间，这可能就是您要走的路。

`eval`肮脏的方式：如果您的扩展程序用于普通网站，您可能可以通过向网站中注入一个元素来做某种间接的`<script>`- 但是，这可能是不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:34:55.553

你试过`New Function() ...`吗？？

```
var some_logic = "2*(Math.pow(2,x))+3*x";
args = ['x', 'return (' + some_logic + ');'];
myFunc = Function.apply(null, args);

for (var x = -10; x < 10; x++) {
    var y = myFunc(x);
    console.log(x, y);
}

console.log("Graphing done."); 
```

小提琴 - [http://jsfiddle.net/atif089/sVPAH/](http://jsfiddle.net/atif089/sVPAH/)

# android - 分享成功后如何从sd卡中删除图片

> ID：15676674
> 
> 赞同：3
> 
> 时间：2013-03-28T07:53:41.063
> 
> 标签：android

我想在分享图像后从 sdcard 中删除图像

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
switch (requestCode) 
{
case TAKE_IMAGE:
    try {
        if (resultCode == RESULT_OK) {

            // we need to update the gallery by starting MediaSanner
            // service.
            mScanner = new MediaScannerConnection(ProfilePicFromCamera.this,new MediaScannerConnection.MediaScannerConnectionClient()
            {
               public void onMediaScannerConnected() {
                   mScanner.scanFile(imageUri.getPath(),null /*mimeType*/);
            }           

                public void onScanCompleted(String path, Uri uri) {
                    if (path.equals(imageUri.getPath())) {
                        mScanner.disconnect();
                        ProfilePicFromCamera.this.runOnUiThread(new Runnable() {
                                public void run() {
                                    updateUI();
                            }
                        });
                    }
                }
            });
            mScanner.connect();

        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    break;
case UPLOAD_IMAGES:
     if(requestCode==UPLOAD_IMAGES)
        {
            if(requestCode==UPLOAD_IMAGES && resultCode==Activity.RESULT_OK)    
            {
                            if(file.exists())
                                file.delete();  
                Toast.makeText(this, "Mail sent.", Toast.LENGTH_SHORT).show();
            }
            else if (requestCode==UPLOAD_IMAGES && resultCode==Activity.RESULT_CANCELED)
            {
                Toast.makeText(this, "Mail canceled.", Toast.LENGTH_SHORT).show();
            }
            else 
            {
                Toast.makeText(this, "Please try again.", Toast.LENGTH_SHORT).show();
            }
        }   
    break;

}
} 
```

# php - 查找字符串中给定值的出现次数？

> ID：15676680
> 
> 赞同：1
> 
> 时间：2013-03-28T07:53:52.133
> 
> 标签：php, regex, string

考虑如下字符串。

```
$string="Lorem ipsum $ 1000 ,ipsum $2000 sopr $250 gerb $ 150 dfkuer fsdf erwer 1020 $ gsdfasdtwe qw $ 5000 efk kdfgksgdf 2000 $ sdhfgsd fsdf 620 $ sdfjg jsdf3000$"; 
```

我必须找出这个字符串中有多少个数字。但是数字等于 1000 和 1000 以上，然后是 $ 符号。

示例：1000 美元（或）1000 美元（或）1000 美元（或）1000 美元及以上仅限 1000 美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:05:43.823

使用 preg_match_all() 和 foreach 循环：

```
$string="Lorem ipsum $ 1000 ,ipsum $2000 sopr $250 gerb $ 150 dfkuer fsdf erwer 1020 $ gsdfasdtwe qw $ 50000 efk kdfgksgdf 2000 $ sdhfgsd fsdf 620 $ sdfjg jsdf3000$";

preg_match_all('/(\$\s?)(?P<before>\d{4,})|(?P<after>\d{4,})(\s?\$)/', $string, $m);

$tmp = array_filter($m["before"]) + array_filter($m["after"]);
$number = array();
foreach($tmp as $n){
    if($n >= 1000){
        if(isset($number[$n])){
            $number[$n]++;
        }else{
            $number[$n] = 1;
        }
    }
}

print_r($number);
// Key => number, value => n occurences 
```

我曾经`\d{4,}`匹配 1000 或更高的 4 位数字，但是例如说有一个类似 的数字`0500`，这也将被匹配。所以我使用了一个 foreach 循环来过滤数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:15:28.343

```
<?php
$string="Lorem ipsum $ 1000 ,ipsum $2000 sopr $250 gerb $ 150 dfkuer fsdf erwer 1020 $ gsdfasdtwe qw $ 5000 efk kdfgksgdf 2000 $ sdhfgsd fsdf 620 $ sdfjg jsdf3000$";
$pattern = "#([$][\s]*)?([1-9]\d{3})([\s]*[$])?#";
//(?<=$|$\s)
//(?=$|\s$)
preg_match_all($pattern, $string, $out);
print_r($out[2]);

Array
(
    [0] => 1000
    [1] => 2000
    [2] => 1020
    [3] => 5000
    [4] => 2000
    [5] => 3000
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:29:48.333

试试这个 ：

```
$string  ="Lorem ipsum $ 1000 ,ipsum $2000 sopr $250 gerb $ 150 dfkuer fsdf erwer 1020 $ gsdfasdtwe qw $ 5000 efk kdfgksgdf 2000 $ sdhfgsd fsdf 620 $ sdfjg jsdf3000$";

preg_match_all('/\$\s?(?P<pr>\d{4,})|(?P<fl>\d{4,})\s?\$/',$string,$match);
$res     = array_merge(array_filter($match['pr']),array_filter($match['fl']));

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [0] => 1000
    [1] => 2000
    [2] => 5000
    [3] => 1020
    [4] => 2000
    [5] => 3000
) 
```

# sql - 使用 sql server 存储过程对记录进行分页

> ID：15676685
> 
> 赞同：5
> 
> 时间：2013-03-28T07:54:19.627
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个存储过程，它使用外连接和 where 条件从两个表返回结果。它也有 order by 子句。我想向它添加分页，以便只返回请求的记录数。我该怎么做？我需要提供页码、记录总数、当前页等？我的存储过程是：

```
CREATE PROCEDURE [dbo].[hr_SearchVacanciesForService]

    @SearchText NVARCHAR(50) = NULL,
    @DutyStationID INT = NULL,
    @VacancyCategoryIDs VARCHAR(1000) = NULL,
    @Language INT = 1
AS

SELECT *
FROM dbo.hr_Vacancies LEFT OUTER JOIN dbo.hr_DutyStations ON dbo.hr_Vacancies.DutyStationID = dbo.hr_DutyStations.DutyStationID 
    LEFT OUTER JOIN dbo.hr_Companies    
        ON dbo.hr_Vacancies.CompanyID = dbo.hr_Companies.CompanyID 
WHERE dbo.hr_Vacancies.Deleted = 0 
        AND (dbo.hr_Vacancies.JobTitleLang1 LIKE @LoacalSeacrchText 
        OR dbo.hr_Vacancies.JobTitleLang2 LIKE @LoacalSeacrchText 
        OR dbo.hr_Vacancies.DescriptionLang1 LIKE @LoacalSeacrchText 
        OR dbo.hr_Vacancies.DescriptionLang2 LIKE @LoacalSeacrchText    
    AND (dbo.hr_Vacancies.DutyStationID = @DutyStationID OR @DutyStationID IS NULL OR @DutyStationID = 0)
    ORDER BY HavePriority DESC, StartDate DESC, dbo.hr_Vacancies.VacancyID DESC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T08:19:31.620

将选项与[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)和[OVER()](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句一起使用

```
CREATE PROCEDURE [dbo].[hr_SearchVacanciesForService]
@SearchText NVARCHAR(50) = NULL,
@DutyStationID INT = NULL,
@VacancyCategoryIDs VARCHAR(1000) = NULL,
@Language INT = 1,
@NumberOfPages int
AS
;WITH cte AS
 (
  SELECT *, ROW_NUMBER() OVER (ORDER BY HavePriority DESC, StartDate DESC, dbo.hr_Vacancies.VacancyID DESC) AS Pages
  FROM dbo.hr_Vacancies LEFT OUTER JOIN dbo.hr_DutyStations ON dbo.hr_Vacancies.DutyStationID = dbo.hr_DutyStations.DutyStationID 
                        LEFT OUTER JOIN dbo.hr_Companies ON dbo.hr_Vacancies.CompanyID = dbo.hr_Companies.CompanyID 
  WHERE dbo.hr_Vacancies.Deleted = 0 
    AND (dbo.hr_Vacancies.JobTitleLang1 LIKE @LoacalSeacrchText 
    OR dbo.hr_Vacancies.JobTitleLang2 LIKE @LoacalSeacrchText 
    OR dbo.hr_Vacancies.DescriptionLang1 LIKE @LoacalSeacrchText 
    OR dbo.hr_Vacancies.DescriptionLang2 LIKE @LoacalSeacrchText    
    AND (dbo.hr_Vacancies.DutyStationID = @DutyStationID OR @DutyStationID IS NULL OR @DutyStationID = 0)
  )
  SELECT *, COUNT(*) OVER() AS totalOfPages
  FROM cte
  WHERE Pages BETWEEN 1 AND ISNULL(@NumberOfPages, Pages) 
```

使用带有表达式的 OVER() 子句的示例：

```
SELECT ... ROW_NUMBER() OVER (ORDER BY
CASE WHEN dbo.hr_Vacancies.Priority = 0 
     THEN 0 ELSE 
CASE WHEN CONVERT(DATETIME,CONVERT(CHAR(10),dbo.hr_Vacancies.PriorityDateExpired,101)) > CONVERT(DATETIME,CONVERT(CHAR(10),GETDATE(),101)) OR dbo.hr_Vacancies.PriorityDateExpired IS NULL 
     THEN 1 ELSE 0 END END DESC, your_second_expression_StartDate DESC) 
```

如果要显示 20 到 30 的记录：

```
CREATE PROCEDURE [dbo].[hr_SearchVacanciesForService]

    @SearchText NVARCHAR(50) = NULL,
    @DutyStationID INT = NULL,
    @VacancyCategoryIDs VARCHAR(1000) = NULL,
    @Language INT = 1,
    @StartPage int = NULL,
    @EndPage int = NULL
AS
;WITH cte AS
 (
  SELECT *, ROW_NUMBER() OVER (ORDER BY your_case_expressionForColumnHavePriority DESC, your_case_expressionForColumnStartDate DESC, dbo.hr_Vacancies.VacancyID DESC) AS Pages
  FROM dbo.hr_Vacancies LEFT OUTER JOIN dbo.hr_DutyStations ON dbo.hr_Vacancies.DutyStationID = dbo.hr_DutyStations.DutyStationID 
                        LEFT OUTER JOIN dbo.hr_Companies ON dbo.hr_Vacancies.CompanyID = dbo.hr_Companies.CompanyID 
  WHERE dbo.hr_Vacancies.Deleted = 0 
          AND (dbo.hr_Vacancies.JobTitleLang1 LIKE @LoacalSeacrchText 
          OR dbo.hr_Vacancies.JobTitleLang2 LIKE @LoacalSeacrchText 
          OR dbo.hr_Vacancies.DescriptionLang1 LIKE @LoacalSeacrchText 
          OR dbo.hr_Vacancies.DescriptionLang2 LIKE @LoacalSeacrchText    
      AND (dbo.hr_Vacancies.DutyStationID = @DutyStationID OR @DutyStationID IS NULL OR @DutyStationID = 0)
  )
  SELECT *, COUNT(*) OVER() AS totalOfPages
  FROM cte
  WHERE Pages BETWEEN ISNULL(@StartPage, Pages) AND ISNULL(@EndPage, Pages) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T02:51:15.647

您可以阅读以下论文：

[SQL Server 存储过程对大型表或查询进行分页](http://www.mssqltips.com/sqlservertip/1699/sql-server-stored-procedures-to-page-large-tables-or-queries/)

或者

[具有排序、分页和过滤的存储过程](http://pranavwithyou.wordpress.com/2013/01/07/stored-procedure-having-sorting-paging-and-filtering/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-02T09:10:53.117

旧方法 - 带有（限制、订单方向、订单列、开始索引）的简单分页脚本

```
@orderColumn  int ,
@orderDir  varchar(20),
@start  int ,
@limit  int,
@searchKey varchar(20)

declare @to as int = @start+@limit

select IDENTITY(int, 1, 1) AS SnoID,null as abc, make.link,make.manf,make.name
into #tempMake
 from make where status=1 and UPPER(make.name) like upper('%'+@searchKey+'%')

select * from #tempMake where SnoID>@start and SnoID<=@to
    order by               
                CASE WHEN @orderColumn = 1 AND @orderdir = 'desc' THEN #tempMake.[manf] END DESC,
                CASE WHEN @orderColumn = 1 AND @orderdir = 'asc' THEN #tempMake.[manf] END ASC,
                CASE WHEN @orderColumn = 2 AND @orderdir = 'desc' THEN #tempMake.[link] END DESC,
                CASE WHEN @orderColumn = 2 AND @orderdir = 'asc' THEN #tempMake.[link] END ASC

select count(#tempMake.SnoID) as row_count from #tempMake 

drop table #tempMake 
```

# jquery - 如何从嵌套在div中的隐藏输入元素中获取文本

> ID：15676687
> 
> 赞同：1
> 
> 时间：2013-03-28T07:54:24.323
> 
> 标签：jquery, input, selector, hidden

我有以下html代码：

```
<a class="tog" href="#">Click Me</a> 
<div class="result">
    <input type="hidden" name="hid" value="val01" />
    This is a container div
</div> <br />
<a class="tog" href="#">Click Me</a> 
<div class="result">
    <input type="hidden" name="hid" value="val02" />
    This is a another container div
</div> 
```

如何在点击时从隐藏的输入中获取价值`<a>`？我正在尝试使用此 jquery 代码，但无法从那些隐藏的输入元素中检索值。

```
$(document).ready(function(){
 $(".tog").click(function(){
   var $this=$(this);
 if (!$this.next(".result").data('loaded')){ 
   alert($this.next("input[name=hid]").val());
  }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:03:45.960

简单的

```
$(".tog").click(function () {
    var $this = $(this);
    if (!$this.next(".result").data('loaded')) {
        alert($this.next(".result").children("input:hidden").val());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:57:57.600

它应该是：

```
$(document).ready(function () {
  $(".tog").click(function () {
    var $this = $(this);
    if (!$this.next(".result").data('loaded')) {
        alert($this.next().find("input[name=hid]").val());
    }
  });
}); 
```

**[演示](http://jsfiddle.net/FFTWV/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:59:36.577

您的代码的问题在于，您正在使用文档中的[next()](http://api.jquery.com/next/)来 *获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。*. 在这里，您的 '$this' 指向锚点，当您尝试执行`$this.next("input[name=hid]").val()`它时，没有任何名为“hid”的直接同级，这就是您得到未定义的原因。

试试这个代码：

```
$(document).ready(function(){
    $(".tog").click(function(){
       var $this=$(this);
    alert($this.next("div").find("input[name=hid]").val());   
     });
}); 
```

[jsfiddle](http://jsfiddle.net/arjuncc/QxADt/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:01:24.890

您可以执行以下操作：

获取下一个元素，即带有结果类的 div。从那里你可以找到隐藏的输入并获得它的价值。

[**演示**](http://jsfiddle.net/LctTZ/)

**Javascript：**

```
$(document).ready(function(){
    $(".tog").click(function(){
        var atag = $(this);
        var hiddenInput = atag.next().find('input[type=hidden]');
        alert(hiddenInput.val());         
    });
}); 
```

# c# - 为什么我收到“无法转换错误”？

> ID：15676688
> 
> 赞同：0
> 
> 时间：2013-03-28T07:54:25.807
> 
> 标签：c#

我在一个新类中有这个代码：

```
Object[] temp_arr = new Object[5];
                temp_arr[0] = csFiles;
                temp_arr[1] = mainUrl;
                temp_arr[2] = levels;
                temp_arr[3] = currentCrawlingSite;
                temp_arr[4] = sitesToCrawl; 
```

变量 csFiles 和 currentCrawlingSite 都是 List<string>。

然后在底部我做了：

```
public class WebCrawlerProgressEventHandler : EventArgs
{
    public List<string> csFiles { get; set; }
    public string mainUrl { get; set; }
    public int levels { get; set; }
    public List<string> currentCrawlingSite { get; set; }
}

protected void OnProgressEvent( Object[] some_params)
{
    if (ProgressEvent != null)
        ProgressEvent(this,
                      new WebCrawlerProgressEventHandler()
                      {
                          csFiles = some_params[0],
                          mainUrl = some_params[1],
                          levels = some_params[2],
                          currentCrawlingSite = some_params[3]
                      });
} 
```

现在我在新`WebCrawlerProgressEventHandler()`的所有行上都收到错误，每行都有相同的错误：

> *错误 2 无法将类型“object”隐式转换为“System.Collections.Generic.List”。存在显式转换（您是否缺少演员表？）*

但是，如果我删除 line:`public List<string> currentCrawlingSite { get; set; }`和 line:`currentCrawlingSite = some_params[3]`就没有错误。

我不明白。`csFiles`并且`currentCrawlingSite`都是`List<string>`类型变量。为什么，当我添加 时`currentCrawlingSite`，我会收到错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:58:15.850

因为编译器不知道也不可能知道`Object`-array 的第一个和第四个元素恰好是`List<string>`.

您必须相应地投射它们：

```
csFiles = (List<String>)some_params[0] 
```

等等或更好，如果可能的话，使用适当的类型而不是简单的`Object`-array 来传递数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:58:49.833

这里的重点`OnProgressEvent`是向您发送一个`Object`数组，因此您试图在该“罪魁祸首”行中分配一个`Object`类型`List<string>`变量，从而隐式调用强制转换操作。你真的应该在那里做一个明确的演员来解决你的问题。

C# 中新的和首选的语法是：

```
csFiles = some_params[0] as List<String>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:58:30.977

假设您分配的数据是 List<string> 您需要将其转换为这种类型：

```
new WebCrawlerProgressEventHandler()
{
    csFiles = (List<string>)some_params[0],
    mainUrl = some_params[1],
    levels = some_params[2],
    currentCrawlingSite = (List<string>)some_params[3]
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:58:49.593

它是强大的打字保护。您应该显式地转换一个对象以`List<string>`确保您不会在编译时混淆不同的类型

```
csFiles = (List<string>)some_params[0] 
```

您没有错误，`mainUrl = some_params[1]`因为每个对象都有`ToString()`方法，并且默认行为是调用此方法进行隐式类型转换。

J. Richter 在他的书中写道：

> 例如，C# 不需要任何特殊语法即可将对象转换为其任何基类型，因为转换为基类型被认为是安全的隐式转换。但是，C# 确实要求开发人员将对象显式转换为其任何派生类型，因为这种转换可能在运行时失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T07:59:57.110

`currentCrawlingSite`是 的一个实例`List<string>`，`some_params`是`object`数组的一个实例。

您不能*隐式*转换这两种类型。你必须使用明确的对话。你可以像这样使用它们；

```
currentCrawlingSite = (List<string>)some_params[3]; 
```

也相等

```
currentCrawlingSite = some_params[3] as List<string>; 
```

您可以阅读更多详细信息[`Casting and Type Conversions (C# Programming Guide)`](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

# sql-server - SQL Server 2008 R2 - 从 Powershell 执行维护计划

> ID：15676691
> 
> 赞同：0
> 
> 时间：2013-03-28T07:54:31.330
> 
> 标签：sql-server, powershell, sql-server-2008-r2

我有一个数据库备份维护计划和 SQL SERVER 2008 R2 中的一些东西。是否有可能从 PowerShell 执行此维护计划？

谢谢！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:23:55.167

如果这是 SQL API 支持的东西，是的，那么您可以通过在 PowerShell 中组装加载相同的 API 来完成。

# hadoop - 如何通过 cmd 行获取 JT 上的实时 tasktracker 节点

> ID：15676694
> 
> 赞同：0
> 
> 时间：2013-03-28T07:54:37.367
> 
> 标签：hadoop

有没有办法找到 JT url 上可用的实时 Tasktracker 节点的编号，但通过命令行，实际上我无法访问 JT 和 NN URL。

问候维卡斯·斯利瓦斯塔瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:29:33.500

Hadoop 带有[hadoop 作业](http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#job)命令。试试吧。

如果您键入，它将列出其中所有可用的子命令`hadoop job`。

`list-active-trackers`选项可能对您有用

# php - PHP 后期静态绑定无法正常工作

> ID：15676699
> 
> 赞同：3
> 
> 时间：2013-03-28T07:54:46.083
> 
> 标签：php, late-static-binding, static-binding

在 PHP 中编码和使用后期静态绑定时，我发现了一些奇怪的行为。在其父类中创建的子对象`static()`可以访问其父类的私有方法。

这是一个例子：

```
class Attachment
{
  public static function createFromFile($file)
  {
    $attachment = new static();
    echo get_class($attachment) . PHP_EOL;
    $attachment->loadFromFile($file);
  }

  private function loadFromFile($file)
  {
    echo 'attachment';
  }
}

class PictureAttachment extends Attachment
{
  //...
}

PictureAttachment::createFromFile('example.txt'); 
```

输出：

```
PictureAttachment
attachment 
```

这是正确的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T07:58:25.593

*是*的，这是正确的。调用私有方法的类与声明它的类相同。它可能会或可能不会实例化子类并不重要。您只是不能在子类中有任何代码调用父类的私有方法。

换句话说：

```
class Foo {

    protected function bar() {
        $this->baz();
    }

    private function baz() { }

}

class Bar extends Foo {

    protected function bar() {
        parent::bar();   // <-- works
        parent::baz();   // <-- doesn't work
    }

} 
```

# php - 向多维数组添加新索引

> ID：15676701
> 
> 赞同：3
> 
> 时间：2013-03-28T07:54:58.840
> 
> 标签：php

我有一个多维数组。

IE。

```
Array
(
    [0] => Array
        (
            [item_id] => 1
            [item_name] => x

        )

    [1] => Array
        (
            [item_id] => 1
            [item_name] => y

        )

) 
```

我需要一种向该数组添加新索引的方法。

```
Array
(
    [0] => Array
        (
            [item_id] => 1
            [item_name] => x
            [value] => 1

        )

    [1] => Array
        (
            [item_id] => 1
            [item_name] => y
            [value] => 1
        )

) 
```

该值可能/可能不会始终保持不变。

实现这一点的一种方法是循环数组并插入新索引`value`。

我的问题是有没有其他更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T08:51:49.643

你不需要使用[`array_walk_recursive`](http://uk1.php.net/manual/en/function.array-walk-recursive.php)，你可以使用[`array_walk`](http://uk1.php.net/manual/en/function.array-walk.php)：

```
array_walk($array, function(&$a) {
  $a['value'] = 1;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:31:07.580

假设 $arr 是您的数组，并且`$yourval`是要存储为新数组元素的值。您可以按如下方式进行。

```
for($i=0;$i<count($arr);$i++){
     $arr[$i]['value'] = $yourval;
}
echo '<pre>';
print_r($arr);//Will display the new array 
```

# mysql - 使用 group by 子句进行 MYSQL 性能调优

> ID：15676706
> 
> 赞同：1
> 
> 时间：2013-03-28T07:55:40.097
> 
> 标签：mysql, sql, mysql-workbench

我有一个这样的查询。

```
SELECT count(*)
FROM table1 e
WHERE e.column1=1
  AND e.id IN
    (SELECT MAX(ID)
     FROM table2 A
     WHERE A.column1=1
       AND A.date=CURDATE()
     GROUP BY A.column2); 
```

当我运行此查询时，由于我有数千条记录，因此花费了太多时间。如何调整查询以更好地执行。

提前致谢。

编辑：table2 中的 column2 是 Table1 的 id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:00:58.223

更改 (. . .) 改为使用 join 。像

```
SELECT count(*) 
FROM table1 AS e
Inner join   
(
  SELECT MAX(ID) 
  FROM table2 A
  WHERE A.column1 = 1 
    AND A.date = CURDATE() 
  GROUP BY A.column2
) t2 on e.id = t2.id
WHERE e.column1 = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:02:23.747

也许：

```
SELECT count(*)
FROM table1 e
WHERE e.column1=1
  AND EXISTS 
    (SELECT *
     FROM table2 A
     WHERE A.column1=1
       AND A.date=CURDATE()
       AND A.ID = e.id); 
```

# objective-c - 加载照片时更新 PSTCollectionView 内容

> ID：15676709
> 
> 赞同：1
> 
> 时间：2013-03-28T07:55:57.840
> 
> 标签：objective-c, uicollectionview, alassetslibrary, pstcollectionview

我正在使用[PSTCollectionView 类](https://github.com/steipete/PSTCollectionView)从 iPhone 相机胶卷中加载照片。我希望照片在加载时出现，而不是等到所有内容都被读取。我的代码如下所示：

```
-(void) loadAssetGroups {

        void (^assetGroupEnumerator)
        (ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop) {
            NSLog(@"group....%@",[group valueForProperty:ALAssetsGroupPropertyName]);
            [self loadAssetForGroup:group];
            }
        };

        void (^assetGroupEnumberatorFailure)(NSError *) = ^(NSError *error) {
            NSLog(@"A problem occured. Error: %@", error.localizedDescription);
        };

        [[ImagePickerViewController defaultAssetsLibrary] enumerateGroupsWithTypes:ALAssetsGroupAll
                                     usingBlock:assetGroupEnumerator
                                   failureBlock:assetGroupEnumberatorFailure];

}

-(void) loadAssetForGroup:(ALAssetsGroup*)group {
    ALAssetsFilter *filter = [ALAssetsFilter allPhotos];
    [group setAssetsFilter:filter];
    __block NSMutableArray *indexes = [NSMutableArray arrayWithCapacity:0];

    [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if (result == nil)
        {
            return;
        }

        if (![self.allPhotos containsObject:result]) {

            [self.assets setValue:result forKey:[result valueForProperty:ALAssetPropertyURLs]];

            [self.allPhotos addObject:result];

            [indexes addObject:[NSIndexPath indexPathForItem:[self.allPhotos count]-1 inSection:0]];
            [self.collectionView performSelectorOnMainThread:@selector(insertItemsAtIndexPaths:) withObject:[NSArray arrayWithObject:[NSIndexPath indexPathForItem:self.allPhotos.count-1 inSection:0]] waitUntilDone:NO];
        }

    }];
} 
```

从控制台我看到 collectionView 正在`cellForItemAtIndexPath`为前几个对象调用它的 dataSource 方法（这将在屏幕上可见），但我需要等待所有照片都被读取，直到我看到 collectionView 刷新。

有没有办法让它更“随时随地”运行？

# javascript - 如何防止可能的 javascript 内存占用导致浏览器崩溃

> ID：15676710
> 
> 赞同：1
> 
> 时间：2013-03-28T07:56:03.903
> 
> 标签：javascript, performance, while-loop

尤其是在使用 while 循环时，可能会出现 javascript 卡在可能导致浏览器崩溃的连续循环中的情况。

我通常通过使用变量来计算 while 执行的次数并在一段时间后中断 while 来处理这种可能性。

虽然浏览器不再崩溃，但它仍然可以大大减慢速度。

有没有更有效的方法来处理这种可能性？

# java - 将父 Activity 的自定义对话框覆盖到所有视图，包括 android 中的子 Activity

> ID：15676715
> 
> 赞同：2
> 
> 时间：2013-03-28T07:56:18.917
> 
> 标签：java, android, android-activity, dialog, android-context

我需要在所有子活动上显示自定义对话框覆盖。但是该对话框的基本上下文是背景。是否可以？。这用于唤醒（屏幕开启）后对整个应用程序的自定义锁定。我有一个广播接收器来管理它。但是该接收者是通过父活动注册的。当屏幕从父活动进入睡眠状态时，对话/进程正确执行。但是屏幕从子活动进入睡眠状态，该对话框显示子活动的背景，当我将返回父活动时，就会显示。我认为这发生在对话的上下文中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:05:56.027

您需要使用 a`Activity`而不是 a `Dialog`。将您的主题设置为在清单`Activity`中模拟 a 。`Dialog`

**示例**- AndroidManifest.xml：

```
android:theme="@android:style/Theme.Dialog" 
```

然后，您将拥有更大的灵活性和对其显示的控制权。

# php - 如何使用 json、jquery ajax 从 php 获取两个数组？

> ID：15676722
> 
> 赞同：10
> 
> 时间：2013-03-28T07:56:55.840
> 
> 标签：php, jquery, ajax, json

我想在 jqchart 中构建一个图，我需要在其中获取两个数组

现在我想执行下面给出的操作。这当然会出错。

```
html
 $.ajax(
        {
            type: "GET",
            url: "customer_coverage.php",
            data: {id:id},
            contentType: "application/json",
            dataType: "json",
            success: function (data21,data22) {

                initChart2(data21,data22);
            }
        });

        function initChart2(data21,data22) {
            $('#jqChart2').jqChart({

                series: [
                {
                            type: 'column',
                            title: 'no of days ',
                data:data21,

                        },
                {
                            type: 'column',
                            title: 'no of days ',
            data:data22,

                        },

                        ]
            });
        } 
```

继承人PHP代码

```
 echo json_encode($arr1);
  echo json_encode($arr2); 
```

所以有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T08:03:49.660

无需回显 json 编码两次....合并数组并发送数据....

```
echo json_encode(array('result1'=>$arr1,'result2'=>$arr2)); 
```

并通过

```
initChart2(data.result1,data.result2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T08:13:35.490

看看你是否能够生成两个 json 对象数组，然后你可以试试这个：

```
 var data21,data22; 
    $.ajax({
        type: "GET",
        url: "customer_coverage.php",
        data: {id:id},
        contentType: "application/json",
        dataType: "json",
        success: function (data) {
            $.each(data, function(i, item){
               data21 = item.data21;
               data22 = item.data22;
            });
            initChart2(data21,data22);
        }
    }); 
```

我想如果你能做到这一点：

```
[
 {
    "data21": {
        .........
    },
    "data22": {
        ........
    }
 }
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T08:03:21.973

你不能像那样得到多个对象。对于 JSON 对象，您需要有单个对象。所以你可以做的是，创建一个包装对象，把这两个数组放在里面。

所以基本上，你的 php 代码将是：

```
<?php
$arr= array();
$arr['arr1'] = $arr1;
$arr['arr2'] = $arr2;

echo json_encode($arr);
?> 
```

所以现在你将拥有一个主数组和一个 JSON 对象。

在 JS 方面，您将获得单个数据。小修改将是

```
$.ajax(
        {
            type: "GET",
            url: "customer_coverage.php",
            data: {id:id},
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
            var data21=data['arr1'];
            var data22=data['arr2'];
                initChart2(data21,data22);
            }
        }); 
```

这应该有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T08:03:56.800

您需要使用`array_merge()`.

**例子**

```
$response = array();

$response = array_merge($arr1,$arr2);
echo json_encode($response); 
```

# permissions - 在liferay中登录门户后隐藏一个portlet

> ID：15676723
> 
> 赞同：2
> 
> 时间：2013-03-28T07:57:01.637
> 
> 标签：permissions, liferay, hide

我正在开发一个liferay 门户。我的要求是我有一个 portlet，即一个 webcontent dislpay，在主页中显示一些消息，但是一旦用户登录到门户，作为 web 内容的 portlet 不应该是可见的。我已经为访客单独提供了查看权限，但是登录后我仍然可以在我的主页中看到 portlet。

谢谢和问候， S.Ponraj。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:28:25.977

您可以仅为此 portlet 扩展 portlet css，以便在用户登录时隐藏 portlet。

打开 portlet 配置（右上角）“外观”->“高级样式”并放在“输入您的自定义 CSS”下

```
.signed-in #portlet_INSTANCE_id {
    display: none;
} 
```

保存并准备好。

您找到了“输入您的自定义 CSS”的`portlet_INSTANCE_id`上部。对于网络内容，dislpay 类似于`p_p_id_56_INSTANCE_8CkxspjsmzWq_`.

ps：回滚使用 Firebug 或 Crhome-Dev-Console。

# android - 应用程序更新推送通知

> ID：15676724
> 
> 赞同：3
> 
> 时间：2013-03-28T07:57:05.033
> 
> 标签：android, push-notification, google-cloud-messaging, google-play-services

在我的项目中，如果 Play 商店有更新，我必须向用户发送推送通知。通过使用 Google Play 服务，我们只能在用户运行应用程序时获取更新。但是每次用户解锁手机时我都必须通知。有没有办法通过使用 Google Cloud Messaging (GCM) 来做到这一点。请帮助我。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T08:05:16.733

是的你可以。

将 GCM 集成到您的应用中。将您更新的 apk 上传到 Google Play 并激活它。等待几个小时让它上线，然后向您的应用发送推送通知，说明有更新。

这个通知应该有一些预定义的文本，你的应用知道这意味着有更新可用。一旦你得到这个，你可以在 SharedPreferences 中设置一个标志，说明有更新。

现在收听`USER_PRESENT`广播，该广播是在设备解锁时发送的。在此广播的接收器中，检查您的 SharedPreferences 标志是否设置为 true。如果是，请显示通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:42:20.087

有很多应用程序可以做到这一点。使用服务器端配置文件来反映应用商店中可用的版本，并设置`AlarmManager`每 X 天运行一次并轮询此文件。此文件应包含 google play 上可用的最新版本代码。

您可以使用此代码段检查应用程序的当前版本。

```
PackageInfo info = getPackageManager().getPackageInfo(getPackageName(), 0);
code = info.versionCode 
```

如果远程文件中的版本代码大于您当前安装的版本代码，则意味着有新版本可供下载。发生这种情况时向用户触发本地通知。

# multithreading - 为什么左/右序列在哲学家晚餐的指挥解决方案中很重要？

> ID：15676725
> 
> 赞同：2
> 
> 时间：2013-03-28T07:57:06.287
> 
> 标签：multithreading, algorithm, deadlock, semaphore, dining-philosopher

所描述的哲学家晚餐问题的指挥解决方案建议使用大小为 4 的信号量，并且所有哲学家都尝试在右叉之前先获得左叉。[http://en.wikipedia.org/wiki/Dining_philosophers_problem#Conductor_solution](http://en.wikipedia.org/wiki/Dining_philosophers_problem#Conductor_solution)

它还表明哲学家按左/右顺序拿起叉子？

为什么哲学家按左/右顺序拿起叉子很重要？

还是都在同一个序列中（我猜它们也可以是右/左）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:45:05.987

当您的锁有订单问题时，通常会发生死锁，例如：

```
Thread 1: acquire lock1 then lock2
Thread 2: acquire lock2 then lock1 
```

如果 T1 设法同时获得 lock1 和 T2 获得 lock2，它们都被阻塞并且你有一个死锁。

通过引入特定的顺序，例如：lock1 必须始终在 lock2 之前获取，您可以消除问题：

```
Thread 1: acquire lock1 then lock2
Thread 2: acquire lock1 then lock2 
```

一旦 T1 获得 lock1，T2 就无法取得进展并获得 lock2，而 lock2 仍然可供 T1 使用。

强加一个先左后右的顺序可以实现相同的目标并简化指挥者的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:45:48.570

首先-它说对于所有哲学家来说，序列必须是左/右或右/左。

这一切都取决于额外的微妙假设。我认为，如果我们假设服务员足够聪明，那么在问题的“指挥解决方案”中，左/右顺序并不重要。如果服务员知道整个餐桌的情况，他可以以“保守”的方式授予分叉，这样就不会发生死锁——这将是一个集中的解决方案。固定顺序有助于指挥者决定是否可以授予分叉，因为哲学家以更可预测的方式行事。

# ember.js - TodoMVC - Ember.run.once

> ID：15676726
> 
> 赞同：6
> 
> 时间：2013-03-28T07:57:08.397
> 
> 标签：ember.js, todomvc

我一直在[为 Ember 开发 Todo MVC 应用程序](https://github.com/addyosmani/todomvc)。`Ember.run.once`在模型中，我注意到对包含在See中的 commit() 方法的调用： [https ://github.com/addyosmani/todomvc/blob/gh-pages/architecture-examples/emberjs/js/models/todo.js# L9](https://github.com/addyosmani/todomvc/blob/gh-pages/architecture-examples/emberjs/js/models/todo.js#L9)

```
todoDidChange: function () {
    Ember.run.once(this, function () {
        this.get('store').commit();
    });
}.observes('isCompleted', 'title'); 
```

`this.get('store').commit()`包裹如何`Ember.run.once`帮助？我将方法更改为：

```
todoDidChange: function () {
    this.get('store').commit();
}.observes('isCompleted', 'title'); 
```

但我没有看到任何明显的区别。我阅读[了文档](http://emberjs.com/api/classes/Ember.run.html#method_once)，并且之前的[SO 讨论](https://stackoverflow.com/questions/13597869/what-is-ember-runloop-and-how-does-it-work)无法弄清楚。

这是因为它只是一个小应用程序而没有显示差异的情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:27:39.643

我找到了答案作为[对另一个问题的回应](https://stackoverflow.com/questions/15732285/ember-js-managing-asynchronous-events-callbacks/15750336#15750336)。

如果您对数组的每个项目都有一个侦听器，如下所示：

```
App.IssuesController = Ember.ArrayController.extend({ 
    issue_list: ['a','b','c'],
    issueListObserver : function(){
        Ember.run.once(this, this.categorize);
    }.observes('issue_list.@each"),

    this.categorize: function () {
        console.log('foo');
    }
}); 
```

没有`Ember.run.once`,`this.categorize()`将为列表中操作的每个项目调用。如果修改了三个项目，那么将有三个调用。使用 categorize 包裹`Ember.run.once`，它只会在链的末尾被调用一次。

# objective-c - 为什么 UIActivityIndi catorView 没有显示在 UIWebView 上？

> ID：15676727
> 
> 赞同：0
> 
> 时间：2013-03-28T07:57:12.413
> 
> 标签：objective-c, uiwebview, uiactivityindicatorview

代码：

```
CGPoint centerPoint = [_inner_web_view center];
CGRect frame = CGRectMake(centerPoint.x, centerPoint.y, 100, 100);
_activity_indicator = [[UIActivityIndicatorView alloc]
                       initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
[_activity_indicator setFrame:frame];
[_inner_web_view addSubview:_activity_indicator]; 
```

我需要的是在 UIWebView 上显示 ActivityIndi​​cator。即使在使用 [_activity_indicator startAnimating] 之后也没有任何反应。:(

有人可以帮我找出为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:05:09.723

您的`Activity Indicator View's`样式是白色的`UIActivityIndicatorViewStyleWhite`，`UIWebView`加载时也有白色背景。试试灰色风格`UIActivityIndicatorViewStyleGray`。

# java - 如何将身份验证标头添加到 WebService Stub？

> ID：15676728
> 
> 赞同：2
> 
> 时间：2013-03-28T07:57:12.527
> 
> 标签：java, web-services, authentication, soap, cxf

我已经在 Eclipse 和 RAD 7.0 中使用 Apache CXF、IBM Jax-WS 和 Axis 生成了存根。

在上述所有 3 种情况下，它给了我以下异常

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: ARERR [149] A user name must be supplied in the control record 
```

搜索后，我得出结论，我必须将身份验证信息添加到客户端存根创建的 Soap 标头中。

我试过这个链接上的答案

[如何将 wsdl 中定义的 Soap Header 添加到 CXF 中的 Web 服务客户端？](https://stackoverflow.com/questions/11767209/how-do-you-add-a-soap-header-defined-in-a-wsdl-to-a-web-service-client-in-cxf?rq=1)

但无法成功。我是 SOAP 和 WebServices 的新手

因此，如果有人对此进行了研究，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T10:21:32.163

几天前我遇到了这个问题，这让我很头疼。生成存根时，您必须将标志**-XadditionalHeaders**添加到 wsimport 命令。

```
"C:\Program Files\Java\jdk1.X.X_XX\bin\wsimport.exe" -p com.company.package -keep -XadditionalHeaders -d folder1 http://mywsdllocation.com/doc.wsdl 
```

其中： **-p：**将包含生成的类的包 -keep **：**保留 .java 文件（否则只会获得 .class 文件） **-XadditionalHeaders：**将创建用于身份验证的类 **-d：**将放置生成的类的文件夹。

之后，您只需将生成的 java 文件复制到您的项目中，在选择的包（本例中为 com.company.package）下。然后，您创建了一个 AuthenticationInfo 对象并将其插入到存根方法的调用中，如下所示：

```
WSService service = new WSService(); 
WSPortTypePortType port = service.WSPortTypeSoap();
AuthenticationInfo auth = new AuthenticationInfo();
auth.setUserName(yourUsername);
auth.setPassword(yourPassword);
port.method(param1,param2,auth); 
```

希望能帮助到你！

# javascript - ExtJS：为 RowEditor 设置自定义验证消息

> ID：15676735
> 
> 赞同：0
> 
> 时间：2013-03-28T07:58:02.553
> 
> 标签：javascript, extjs

有谁知道如何让 ExtJS 3.4 中的 RowEditor 显示自定义验证消息？

例如，ExtJS 示例 ( [http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/row-editor.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/row-editor.html) ) 的第一列编辑器定义如下：

```
editor: {
    xtype: 'textfield',
    allowBlank: false
} 
```

当此字段为空时，使用此 RowEditor 会显示“必填字段”消息。我需要用自定义消息替换此消息，因此我更改了编辑器定义：

```
editor: {
    xtype: 'textfield',
    allowBlank: false,
    invalidText: 'Cannot be empty'
} 
```

但 RowEditor 仍显示默认消息。有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T14:12:19.543

由于您的验证是允许空白，所以您应该使用属性“blankText”，

```
editor: {
  xtype: 'textfield',
  allowBlank: false,
  blankText: 'Cannot be empty'
} 
```

# java - Netbeans Maven 项目：未正确定义 JAVA_HOME

> ID：15676739
> 
> 赞同：0
> 
> 时间：2013-03-28T07:58:20.050
> 
> 标签：java, maven, netbeans, maven-2, netbeans-platform

我有一个使用 Maven2 构建的 NetBeans 平台项目。当我尝试创建一个新的平台模块时，我收到了这个奇怪的错误：

```
cd ~/src; JAVA_HOME=/usr/lib/jvm/jdk1.7.0/bin/java ~/netbeans-7.3/java/maven/bin/mvn -DarchetypeGroupId=org.codehaus.mojo.archetypes...
Error: JAVA_HOME is not defined correctly.
  We cannot execute /usr/lib/jvm/jdk1.7.0/bin/java/bin/java 
```

在`~/.bashrc`我有以下定义`JAVA_HOME`：

```
export JAVA_HOME="/usr/lib/jvm/jdk1.7.0"
export JDK_HOME="/usr/lib/jvm/jdk1.7.0" 
```

最后没有斜线，但是 maven 附加`/bin/java/bin/java`到这个路径。我可以毫无问题地使用 Maven 构建已经存在的模块，只是在创建新模块时它会失败。Maven从哪里得到这个`JAVA_HOME`？

**编辑：** 行家设置：

```
$ mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)
Java version: 1.7.0_17
Java home: /usr/lib/jvm/java-7-oracle/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux" version: "3.2.0-39-generic" arch: "amd64" Family: "unix" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:01:48.183

您在`JAVA_HOME`命令行上重新定义指向`/usr/lib/jvm/jdk1.7.0/bin/java`，这是错误的：

```
cd ~/src; JAVA_HOME=/usr/lib/jvm/jdk1.7.0/bin/java ... 
```

`JAVA_HOME=/usr/lib/jvm/jdk1.7.0/bin/java`从命令行中删除：

```
cd ~/src; ~/netbeans-7.3/java/maven/bin/mvn -DarchetypeGroupId=org.codehaus.mojo.archetypes... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:17:06.347

netbeans 从 IDE 中 Java 平台的定义中获取 JAVA_HOME（请参阅工具/Java 平台）

除非您选择自定义平台，否则 IDE 将使用默认平台，即 IDE 正在运行的平台。

所有平台都需要在“工具/Java 平台”对话框中定义，并进行验证检查以选择正确的文件夹。

也许有些东西及时改变了你，并且那里的定义不正确？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:20:01.163

问题在于`JAVA_HOME`in 的定义不正确`~/.bash_profile`

Maven 的 NetBeans 集成更喜欢：

```
System.getenv("JAVA_HOME") 
```

前：

```
System.getProperty("java.home") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T01:47:48.027

对于 linux 在 netbeans 的 java/maven/bin 文件夹下找到 mvn 可执行文件并添加

```
from="/bin/bin/java"
to="/bin/java"
JAVACMD="${JAVACMD/$from/$to}" 
```

行前

```
if [ ! -x "$JAVACMD" ] ; then
  echo "Error: JAVA_HOME is not defined correctly." 
```

干杯

# python - Python如何从表达式中提取变量

> ID：15676741
> 
> 赞同：-1
> 
> 时间：2013-03-28T07:58:29.587
> 
> 标签：python, regex

对不起，我是 python 新手。我正在尝试从表达式中提取变量，例如：

```
ABC=DEF=5
C=DF/10 
```

我想提取 ABC、DEF、C、DF 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:02:13.030

这适用于您给出的示例，对于更复杂的代码当然会失败。

```
>>> import re
>>> text = '''ABC=DEF=5
C=DF/10'''
>>> re.findall(r'[a-zA-Z_]\w*', text)
['ABC', 'DEF', 'C', 'DF'] 
```

# winapi - 如何找出 timeGetTime 精度？

> ID：15676756
> 
> 赞同：0
> 
> 时间：2013-03-28T07:59:17.543
> 
> 标签：winapi, time

timeGetTime[函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757629%28v=vs.85%29.aspx)文档说：

> timeGetTime 函数的默认精度可以是五毫秒或更多，具体取决于机器。您可以使用 timeBeginPeriod 和 timeEndPeriod 函数来提高 timeGetTime 的精度。

所以精度取决于系统。但是如果我不想*提高*精度怎么办，我只想知道它在当前系统中是什么。是否有标准方法（例如 API）来获取它？还是我应该轮询`timeGetTime`一段时间，看看结果如何并从中推断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:50:32.333

我建议使用[GetSystemTimeAsFileTime 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)。此函数开销低并显示系统时钟。请参阅[此答案](https://stackoverflow.com/a/11743614/1504523)以获取有关时间粒度和用于查询计时器分辨率的 API 的更多详细信息（例如`NtQueryTimerResolution`）。找出系统文件时间增量的代码也可以在那里找到。 `Windows 8`并提供应该更准确`Server 2012`的新[GetSystemTimePreciseAsFileTime 函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706895%28v=vs.85%29.aspx)MSDN 状态*具有尽可能高的精度（<1us）*. 但是，这只适用于 W8 和 Server 2012，关于如何获得这种额外准确性的文档很少。似乎MS正在采用类似Linux（gettimeofday）的方式将性能计数器频率与系统时钟相结合。 [这篇文章](https://stackoverflow.com/q/13175573/1504523)你也可能感兴趣。

**编辑：**截至 2014 年 2 月，MSDN 上有一些关于时间问题的更详细信息：[Acquiring high-resolution time stamps](http://msdn.microsoft.com/en-us/library/windows/desktop/dn553408%28v=vs.85%29.aspx)。

# c#-2.0 - 在 request.rawurl 中用另一个字符串替换一个字符串不起作用

> ID：15676758
> 
> 赞同：0
> 
> 时间：2013-03-28T07:59:22.360
> 
> 标签：c#-2.0, str-replace

我想像这样替换我的网址中的一些字符串

```
request.RawUrl.ToString().Replace("sometext566666", "othertest") 
```

但它不起作用为什么会这样？

例如，原始 url 就像

```
/sometext4554544454.aspx 
```

我想要这样

```
/sometext.aspx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:16:31.853

我猜这是.NET。如果是这样，您应该知道`String.Replace()`返回一个包含替换结果的*新*字符串（就像所有其他声称修改字符串的方法一样）。

因此，您需要将结果分配给变量或字段以保存结果。在某些情况下，您可能会将结果分配回您从中获取原始字符串的同一位置。但是您不允许覆盖`RawUrl`（而且，这样做可能会让您感到困惑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T20:44:29.090

您正在使用的语句正在运行，但您没有分配替换函数的结果，只是执行它。

```
request.RawUrl.ToString().Replace("sometext566666", "othertest") 
```

如果要保留结果，则需要将其分配给字符串。

例如

```
String result = request.RawUrl.ToString().Replace("sometext566666", "othertest"); 
```

否则，您可以将其分配给相同的 RawURL，但我认为这是一个 URI，因此您需要使用新的 URI，例如：

```
request.RawUrl = new URI(request.RawUrl.ToString().Replace("sometext566666", "othertest")); 
```

不过，我不确定您是否可以实际编辑该属性。

# asp.net - 在不在 Web.config 中的 aspx 页面上将 Debug 设置为 False

> ID：15676761
> 
> 赞同：1
> 
> 时间：2013-03-28T07:59:41.723
> 
> 标签：asp.net

是否可以为单个 asp.net 页面设置 Debug=false。我想为整个应用程序启用调试，但应用程序中有一个页面我想仅为该页面设置 Debug = false ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:01:54.157

是的，您可以`Debug="false"`在 .aspx 标记顶部的页面指令上进行设置。

```
<%@ Page language="C#" Debug="false" .... %> 
```

# c++ - 我自己的模板类中的向量 std::out_of_range （指向列表节点的指针向量），但我不明白为什么

> ID：15676763
> 
> 赞同：0
> 
> 时间：2013-03-28T07:59:48.143
> 
> 标签：c++, list, vector

我正在为带有链表和指向链表中某些节点的指针向量的模板类编写代码。代码很丑，因为我只是写了我认为可能有用的东西，并更正了它，专注于修复错误消息。

列表（相应地，向量也是）保持排序，因为它每次插入项目时都会使用 position 方法找到正确的位置。

最初，我有很多错误，经过大量尝试后我能够修复它们。现在它可以编译了，但是当我用 main 方法测试它时，如果这个模板类工作正常，它会抛出一条错误消息：

在抛出 'std::out_of_range' 的实例后调用终止

什么（）：向量：：_M_range_check

中止（核心转储）

我知道 std::out_of_range 是什么，但我真的不明白为什么会发生这个错误。我的代码中甚至没有很多部分可以访问向量的元素。

下面是测试 main 方法的代码，接下来是我的模板类（和嵌套迭代器类）的定义。

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>
#include <vector>
#include "ValliHN.h"
using namespace std;

int main() {
    Valli<string> valli;

    valli.insert("K");
valli.insert("H");
valli.insert("N");
valli.insert("H");
valli.insert("J");

for (Valli<string>::iterator i = valli.begin(); i != valli.end(); i++)
    cout << *i << endl;

return 0;
} 
```

模板类

```
#include"DList.h"
#include<iostream>
#include<vector>
#include<algorithm>
#include<cstdlib>

using std::cout;
using std::endl;
using std::cerr;
using std::vector;

template<typename I>
class Valli {

vector< DNode<I>* > va;
DList<I> lli;
size_t ratio;
friend class iterator;
friend class DList<I>;

public: 

class iterator {

  typename DList<I>::iterator list_iter;
  iterator(DNode<I>* node) 
   : list_iter(typename DList<I>::iterator(node)) { }
  friend class Valli<I>;
  friend class DList<I>;

public:
     I& operator*() const {
        return *list_iter;
     }

     iterator& operator++() {
        ++list_iter;
        return *this;
     }

     iterator operator++(int) {
        iterator* ret = this;
        ++list_iter;
        return *ret;
     }

     iterator& operator--() {
        --list_iter;
        return *this;
     }

     iterator operator--(int) {
        typename DList<I>::iterator ret = list_iter;
        --list_iter;
        return ret;
     }

     bool operator==(const iterator& rhs) const {
        return list_iter == rhs.list_iter;
     }

     bool operator!=(const iterator& rhs) const {
        return list_iter != rhs.list_iter;
     }

     DNode<I>* returnCurr() const {
        return list_iter.returnCurr();
     }
};

explicit Valli<I>(size_t ratio=4)
 : ratio(ratio),
  lli(DList<I>()),
  va(vector< DNode<I>* >()) { }

//   Valli<I>()
//    : Valli<I>(4) { }

~Valli<I>() {
//      delete[] va;
//      delete lli;
}

iterator insert(const I& item) {
   iterator pos = position(va, item);
   lli.insert(pos.returnCurr(), item);
   refresh(4);
   return --pos;
}

iterator find(const I& item) const {
  iterator start = iterator(va.at(binsearch(va, item)));
  iterator end = iterator(va.at(binsearch(va, item)+1));
  while(start != end) {
     if(*start = item) {
        return start;
     }
     else {
        ++start;
     }
  }
}
//   void erase(iterator itr) {}

iterator begin() const {
   lli.begin();
}

iterator end() const {
   lli.end();
}

private:
int binsearch(const vector< DNode<I>* > vec, const I& item) const {
  int left = 0;
  int right = vec.size()-1;
  while(left <= right) {
     int mid = (left+right)/2;
     iterator iter = iterator(vec.at(mid));
     if(item < *iter) {
        right = mid-1;
     }
     else if(item == *iter) {
        return mid;
     }
     else {
        left = mid+1;
     }
  }
  return left;
 }

iterator position(const vector< DNode<I>* > vec, const I& item) const {
  iterator start = iterator(vec.at(binsearch(vec, item)));
  iterator end = iterator(vec.at(binsearch(vec, item)+1));
  while(start != end) {
     if(*start < item) {
        ++start;
     }
     else {
        return start;
     }
  }

}

void refresh(size_t newRatio) {
  iterator iter = begin();
  int count = 0;
  va.clear();
  while(iter!=end()) {
     if(count % newRatio == 0) {
        va.push_back(iter.returnCurr());
     }
     //push_backing the last node - to be added
     iter++;
     count++;
  }
}

}; 
```

DList.h 类与标准库列表类非常相似。你能在我的代码中看到问题吗？另外，您能否告诉我，就良好的编程实践和编码方向的实施而言，我的代码整体看起来是好是坏？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:04:27.150

在我看来，您在第一次插入时有一个超出范围的向量。insert 调用位置，它调用 binsearch。binsearch 返回 0，因为向量为空，然后位置调用 vector.at(0)（和 vector.at(1)）。这两个都是超出范围的错误，因为向量是空的。

我只是盯着代码，所以我可能犯了一个错误。真的，您应该使用调试器，并找出问题发生的确切位置。

# database - Mysql中不同机器上的数据库/模式共享

> ID：15676768
> 
> 赞同：1
> 
> 时间：2013-03-28T08:00:16.747
> 
> 标签：database, shared, saas, multi-tenant

我一直在研究多租户架构应用程序，决定使用每个数据库每个租户的架构。我搜索了如何扩展数据库并跨多个数据库机器进行访问，但没有找到任何可靠的解决方案。

场景是我想在多台机器上共享租户的数据库，比如机器 1 上的 db_t1 机器 2 上的 db_t1023。我可以设置某种集群以便实现这一点吗？或者任何其他可能的基于云或基于软件的解决方案，对应用程序是透明的。

# python - 简单 Python 程序中的递归深度错误

> ID：15676773
> 
> 赞同：0
> 
> 时间：2013-03-28T08:00:34.403
> 
> 标签：python, python-2.7, recursion

我是编程新手，并试图使用基本的 Python 在 Project Euler 上 解决[这个问题。](http://projecteuler.net/problem=31)

本质上，我尝试使用基于在每个阶段选择的最大值的递归，并使用列表来维护未来选择的可能选项。

代码很短，如下所示：

```
def func(n,l):
    if n<0:
        return 0
    if l==[1] or n==0:
        return 1
    else:
        j=0
        while l != []:
            j=j+func(n-l[0],l) 
            del l[0]
        return j

print func(200,[200,100,50,20,10,5,2,1]) 
```

例如，如果我们有

```
func(5,[5,2,1]) 
```

递归将其拆分为

```
func(0,[5,2,1]) + func(3,[2,1]) + func(4,[1]) 
```

但是代码似乎永远不会通过。它要么说有`list-index-out-of-range`错误，要么说有`maximum-recursion-depth`错误（即使对于非常小的玩具实例）。我找不到错误。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:09:57.920

在 Python 中，列表通过引用而不是值传递给函数。对您的程序最简单的修复是将递归调用更改为`func(n - l[0], l[:])`. 这样，列表将按值传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:07:25.893

您没有考虑到的一件事是：

```
j=j+func(n-l[0],l) 
```

不复制`l`.

因此，所有递归调用都`func`在同一个列表上进行。当最里面的调用删除最后一个元素`l`并返回时，它的调用者将尝试`del l[0]`并得到一个`IndexError`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T08:27:28.740

在每次递归时，做出以下 2 个决定：

1.  从可用的硬币类型中取出第一枚硬币（比如`f`），然后检查我们是否可以从这些硬币中制造（nf）。这导致了一个子问题 func(n - f, l)
2.  忽略第一个硬币类型，并检查我们是否可以从剩余的硬币类型中得到 n。这导致了一个子问题 func(n, l[1:])

组合的总数应该是两个子问题的总和。所以代码是：

```
def func(n, l):
    if n == 0:
        return 1
    if n < 0 or len(l) == 0:
        return 0
    if l == [1] or n == 0:
        return 1

    return func(n - l[0], l) + func(n, l[1:]) 
```

每个递归的副本`l`由`l[1:]`. 这可以在下一次递归之前被`pop`元素省略并在`append`之后恢复。

```
def func(n, l):
    if n == 0:
        return 1
    if n < 0 or len(l) == 0:
        return 0
    if l == [1] or n == 0:
        return 1

    full = func(n - l[-1], l)
    last = l.pop()
    partial = func(n, l)
    l.append(last)
    return full + partial 
```

# c++ - 最佳实践 - 会话处理/超时

> ID：15676774
> 
> 赞同：4
> 
> 时间：2013-03-28T08:00:34.980
> 
> 标签：c++, mysql, session, cookies

使用 MySQL 在 C++ 服务器中处理会话和超时的最佳实践是什么。

我的 C++ 服务器生成一个会话 GUID 并将其作为 Set-Cookie 发送到客户端浏览器。

我应该超时任何会话吗？

我应该将会话 GUID 保存在我的 MySQL 用户表中吗？

当用户做某事时，我应该更新表中的任何时间戳还是应该将会话和上次操作直接保存在 C++ 服务器中？

我应该如何处理“保持登录”，永不过期的会话 GUID？（这可能是一个很大的安全漏洞）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:55:22.323

我无法在 C++ 部分为您提供帮助，但这里有一些关于会话（服务器端）的指示：

*   Session 对象至少应该保持

    *   上次访问的时间（发出请求）
    *   每次访问时计算的过期时间，方法是将当前时间添加到 Max Idle Time（在会话被视为过期之前没有进行访问的最长时间）
*   在每次访问时，将存储在 Session 对象中的到期时间与当前时间进行比较，以确定会话是否到期。如果是这种情况，则会话无效并且会话对象从会话管理器的缓存中删除。在 Web 服务器的情况下，将 302 发送回客户端并且 cookie 已过期。

*   会话管理器可以实现一个会话缓存，它要么在内存中，要么保存在磁盘上。将其持久化到磁盘可在服务器重新启动的情况下提供会话恢复。缓存还可以是分布式缓存（例如 Memcache），它允许集群中的多个服务器共享 Sessions 对象并提供跨服务器的负载平衡。

# generics - 我们可以在黑莓应用程序开发中使用泛型或集合类吗

> ID：15676776
> 
> 赞同：1
> 
> 时间：2013-03-28T08:00:43.880
> 
> 标签：generics, blackberry, collections, java

我是黑莓应用程序开发的新手。我正在使用 BB JRE 5.0 制作一个黑莓项目。我想将另一个与 J2SE 1.5 配合使用的项目集成到其中。我怎样才能做到这一点。是否可以？如果不是，那么如何在黑莓开发中使用泛型和集合类。表示哪个 BB JRE 支持集合和泛型类。请给我一些替代方案，我会非常感谢你们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:09:38.400

BlackBerry Java SDK 不支持 Java 2 标准版的泛型和集合类。

RAPC 编译器（BlackBerry 编译器）使用`-target 1.3`选项编译您的 java 文件，这意味着二进制代码应与 java 1.3 兼容。而且没有泛型。

您也不能使用枚举和所有 java 1.5 的东西。

仅 RIM Java API 中列出的类可用。

检查此链接以获取最新的 Java API javadoc：

[http://www.blackberry.com/developers/docs/7.1.0api/index.html?net/rim/device/api/crypto/keystore/package-summary.html](http://www.blackberry.com/developers/docs/7.1.0api/index.html?net/rim/device/api/crypto/keystore/package-summary.html)

# image - 限制对文件的访问

> ID：15676779
> 
> 赞同：0
> 
> 时间：2013-03-28T08:00:51.337
> 
> 标签：image, security

我目前正在 MVC3 上开发图片存储，并且有一个问题如何限制对图像的访问。如果我将图像插入 HTML lice `<img src="/ImagesFolder/image0001.jpg">`，它将正确显示，但任何在浏览器中编写完整路径的人也会得到该图像。我不想允许。一种方法是将图像嵌入为 base64 字符串，但它仅适用于小图像，我有大图像。

我已经看到了创建图像访问操作的建议，并使用类似的东西 `<img src="/GetImage?ID=1123">`，但是在那个 GetImage 页面上，我仍然会使用直接路径或 base64 方法吗？并且在第一种方式中，图像文件的完整路径将被转换为父视图，并且仍然可以在图片属性中看到？

有没有办法以`<img src="">` 或任何其他方式使用 System.Drawing.Image？你知道任何样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:10:49.830

一种方法是将所有图像放入 http 服务器未发布的路径中。这样就没有用户可以放入浏览器的直接路径。

脚本本身位于服务器上，因此它们可以访问此路径。您的图像访问方法应该是一个脚本，它返回实际数据并将自身标识为它为 jpegs 提供图像/jpeg 的数据。这样，如果有人通过您设计的方式以外的其他方式访问 GetImage 方法，则脚本可以检测到它（通过引用或其他方式）并且不返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:07:43.513

我认为您提到的“图像访问操作”解决方案是最容易实现的解决方案。例如，GetImage 脚本可以检查您在应用程序中设置的 cookie，以便只有第一次访问您的站点的人才能收到图像。

现在，如果您想阻止人们在访问您的网站*后*通过在浏览器中键入 URL 来显示图像，这将更加棘手，并且在我看来，没有一个简单的解决方案。您可以检查`Referer`HTTP 标头以查看请求是否与您的网站相关（因为在将 URL 放入 URL 栏中时，Referer 将为空，但当包含图像时，将包含包含图像的页面的 URL`<img src=...>`)，但是这个解决方案有一个缺点，因为它会阻止浏览器不发送 Referer 标头（通常是出于隐私原因；它不是一个非常广泛的配置，但会发生这种情况）根本看不到您的图像。第二个可能的缺点是人们可能会通过键入他们的 URL 来查看已经缓存在浏览器中的图像，除非您可以将服务器配置为使用一些不允许缓存的标头来为它们提供服务。

# android - 如何在我的应用程序中存储事件及其时间？（在乐器应用程序中模拟录制声音）

> ID：15676780
> 
> 赞同：0
> 
> 时间：2013-03-28T08:00:53.427
> 
> 标签：android, soundpool

我正在开发一个带有一些按钮的应用程序。触摸按钮时，应用程序会使用`SoundPool`方法播放声音。用户可以像钢琴应用一样使用此应用播放音乐。为了记录节奏，我想存储播放的声音以及用户稍后可以播放的确切时间。前任：

```
sound: S1    time: 00:01:45 (m:s:mls)
sound: S4    time: 00:01:93 (m:s:mls)
sound: S6    time: 00:02:05 (m:s:mls)    
sound: S2    time: 00:02:05 (m:s:mls)    
sound: S1    time: 00:03:25 (m:s:mls)    
sound: S5    time: 00:04:61 (m:s:mls)

... 
```

# c# - 在 c#.net 中使用对象，例如 vb.net

> ID：15676783
> 
> 赞同：0
> 
> 时间：2013-03-28T08:01:01.190
> 
> 标签：c#, .net, vb.net

我在 VB.Net 中有一个调用表单按钮的方法：

```
Private Sub BUTTON_CAL( _
    ByVal frm As Object, ByVal e As System.Windows.Forms.KeyEventArgs)

    If e.KeyCode = Keys.A AndAlso e.Modifiers = Keys.Control Then
        If frm.AddButton.Enabled = True Then Call frm.AddButton.PerformClick()
        e.SuppressKeyPress = True
    End if
End Sub 
```

我已将此代码转换为 c#

```
public static void BUTTON_CAL(object frm, System.Windows.Forms.KeyEventArgs e) {
    if(e.KeyCode==Keys.A&&e.Modifiers==Keys.Control) {
        if(frm.AddButton.Enabled==true) {
            frm.AddButton.PerformClick();
        }
        e.SuppressKeyPress=true;
    }
} 
```

在 C#.Net 中我收到错误

> 'object' 不包含 AddButton' 的定义，并且找不到接受第一个类型为 'object' 的参数的扩展方法 'AddButton'（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T08:03:54.037

将“frm”转换为您期望的数据类型（运行时检查是否有效是个好主意）

```
Form form = frm as Form;

if( null == form )
    // error

form.AddButton(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:25:18.847

```
public static void BUTTON_CAL(object sender, KeyEventArgs e) {
    if(sender is Form) {
        var frm=sender as Form;

        if(e.KeyCode==Keys.A && e.Modifiers==Keys.Control) {
            if(frm.AddButton.Enabled)
                frm.AddButton.PerformClick();

            e.SuppressKeyPress=true;
        }
    }
} 
```

1.  的签名`KeyEventHandler`是

    ```
    public delegate void KeyEventHandler(object sender, KeyEventArgs e); 
    ```

2.  而`if(SomeBool)`不是`if(SomeBool==true)`. 不要不必要地复杂。

3.  放`someObject as SomeType`一个`if(someObject is SomeType)`就安全了。它似乎有点多余，但比 null 更具可读性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T05:26:06.600

感谢大家花时间解决问题我已经通过使用以下方法解决了问题：

```
public static void BUTTON_CAL(object sender, System.Windows.Forms.KeyEventArgs e) 
{
     var frm = sender as Form;

     if(e.KeyCode==Keys.A&&e.Modifiers==Keys.Control) 
     {  
          if(frm.Controls["AddButton"].Enabled==true)
          {
             ((Button)frm.Controls["AddButton"]).PerformClick();
          }
          e.SuppressKeyPress=true;
     }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-28T08:05:13.310

将 frm 转换为表单的类名

```
if (((Form1)frm).AddButton.Enabled == true){
   ((Form1)frm).AddButton.PerformClick();
} 
```

我假设 Form1 是您的表单的名称，它有一个名为 AddButton 的按钮，并且该按钮具有适当的访问修饰符。

# crystal-reports - 上一字段的计算

> ID：15676785
> 
> 赞同：0
> 
> 时间：2013-03-28T08:01:04.083
> 
> 标签：crystal-reports

CR 新手，使用 CR v10 和 SQL Server 2000。

对于第一条记录，即期初余额，计算是输入日期的 sum(field)，我在 SP 中计算为 BegDateSum

但是对于一个组下的其余记录，计算应该是previous(balance)+IN+OUT

样品已给出：

```
Date      Doc Descrip IN   OUT  Balance
Group Header--------    Beginning Balance-------------- 50    <---- sum(field) from my inputdate
3/2/2012  A           -1    0    49 <-- (50+(-1)+0)
4/2/2012  B           -2    0    47 <-- (49+(-2)+0)
5/2/2012  C            0    3    50
6/2/2012  D           -2    3    51 
```

我如何实现这一目标？

我不确定是否使用运行总计，以防万一我必须怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:03:46.900

在这种情况下，运行总计字段将不起作用，它们旨在将一个字段相加（或计数或平均等）并自动为您提供小计。但是，我们可以做一些自定义函数来提供您需要的结果。假设您的初始 50 是一个静态值，您可以将一个变量设置为该数量，然后添加 IN 和 OUT 值（打印该结果）。

首先，使用如下公式初始化报表标题中的值：

```
WhilePrintingRecords;
Global NumberVar Balance;
Balance := 50;
""; //print nothing on the screen 
```

然后，计算和显示新余额的公式，在数据所在的栏中：

```
WhilePrintingRecords;
Global NumberVar Balance;
Balance := Balance + {tableName.IN} + {tableName.OUT}; 
```

最后一行计算新值，并告诉公式的结果应该是什么。

如果以某种方式计算“50”，则必须在计算新余额的公式之前完成。如果它基于读入的第一条记录，您将需要使用包含 的公式`If PreviousIsNull({tableName.Balance}) Then ...`，这通常是数据集中第一条记录的良好指标（除非该字段可以为空）。

# ruby-on-rails-3 - 带有关联的 rails activerecord 验证

> ID：15676798
> 
> 赞同：0
> 
> 时间：2013-03-28T08:02:10.857
> 
> 标签：ruby-on-rails-3, validation

我的模型关联如下：

```
 class Group < ActiveRecord::Base
       has_many :group_links, :dependent => :destroy
     end

      class GroupLink < ActiveRecord::Base
       belongs_to :group
       validates_presence_of :group_id
       validates_presence_of :url, :message => "We need a url to create a link"
       validates_uniqueness_of :url, :message => "A link with this url already exists"
       validates_presence_of :text, :message => "We need a text to create a link"
       validates_uniqueness_of :text, :message => "A link with this text already exists"
      end 
```

我希望它像在每个组中一样工作，组链接应该是唯一的。然而，它的工作方式是，即使其他一些组具有薄组链接，它也会引发验证错误。

我究竟做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:00:00.753

我使用 :scope => :group_id 进行唯一性验证以使其正常工作

# android - 自定义警报对话框中的共享首选项

> ID：15676802
> 
> 赞同：1
> 
> 时间：2013-03-28T08:02:49.263
> 
> 标签：android, sharedpreferences, android-alertdialog

我想将`EditText`（在 中`AlertDialog`）字段的值存储在`SharedPreference`. 它显示`NullPointerException`在这一行`SharedPreferences.Editor editor = sp.edit();`**注意：代码在没有 SharedPreferences 的情况下工作**

```
 private void myDialog() {
    // TODO Auto-generated method stub
    LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
    View view = inflater.inflate(R.layout.cus_dialog, null);
    AlertDialog.Builder ab = new AlertDialog.Builder(this);
    ab.setView(view);
    final EditText input = (EditText) view.findViewById(R.id.etValue);

    ab.setCancelable(false);
    ab.setPositiveButton("Send", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            String s = input.getText().toString();
            SharedPreferences.Editor editor = sp.edit();
            editor.putString("A", s);
            editor.commit();
            Toast.makeText(getApplicationContext(), "" + s,
                    Toast.LENGTH_SHORT).show();
        }
    });
    ab.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            dialog.cancel();
        }
    });
    AlertDialog ad = ab.create();

    ad.show();
} 
```

![在此处输入图像描述](../Images/fc56eb9a48714911e24865be2c4a8761.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:06:11.243

```
SharedPreferences preferences = PreferenceManager
                        .getDefaultSharedPreferences(acivity.this);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("a", "a");
                editor.commit(); 
```

# linux - DTrace for Linux ustack() 操作中的无效地址

> ID：15676805
> 
> 赞同：2
> 
> 时间：2013-03-28T08:03:03.310
> 
> 标签：linux, dtrace

当我使用 DTrace for Linux 运行以下 .d 脚本时：

```
#!/usr/sbin/dtrace -s
syscall::open:entry
{
    @[ustack()] = count();
} 
```

我收到许多以下类型的错误：

```
dtrace: error on enabled probe ID 2 (ID 320864: syscall:x64:open:entry): invalid address (0xfffd) in action #2
dtrace: error on enabled probe ID 2 (ID 320864: syscall:x64:open:entry): invalid address (0xfffd) in action #2
dtrace: error on enabled probe ID 2 (ID 320864: syscall:x64:open:entry): invalid address (0xfffd) in action #2 
```

我应该怎么做才能修复它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T11:06:33.963

您应该尝试更高版本的 dtrace。我相信这已经解决了——由于编译器、发行版和 32 位与 64 位内核的不稳定，堆栈遍历代码必须不断被重写。

# c++ - C++ 中的接口：为什么我需要一个接口类 + 另一个父类？

> ID：15676807
> 
> 赞同：0
> 
> 时间：2013-03-28T08:03:19.883
> 
> 标签：c++, interface

[这个问题](https://stackoverflow.com/questions/318064/how-do-you-declare-an-interface-in-c)很好地解释了如何在 C++ 中创建接口。这是代码：

```
class IDemo
{
    public:
        virtual ~IDemo() {}
        virtual void OverrideMe() = 0;
};

class Parent
{
    public:
        virtual ~Parent();
};

class Child : public Parent, public IDemo
{
    public:
        virtual void OverrideMe()
        {
            //do stuff
        }
}; 
```

不过，我不清楚一件事：我需要这门课`Parent`做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:08:15.423

除了接口之外，您不需要继承任何东西来使用接口，但是您可以这样做，并且该答案向您展示了如何。关键是您不需要只从一个或多个接口继承，您还可以添加类作为类的基础 - 几乎允许类和接口的任何组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:30:56.377

其实我也不知道，为什么。您也可以执行以下操作：

```
class IDemo
{
public:
    virtual ~IDemo() {}
    virtual void OverrideMe() = 0;
};

class Child : public IDemo
{
public:
    virtual void OverrideMe()
    {
        //do stuff
    }

    ~Child()
    {
    }            
}; 
```

一切都只取决于你的程序的架构以及实际`Parent`和`Child`是什么。看 C# 示例 -`IDisposable`是一个接口，它允许处理实现它的类使用的资源。要求基类是没有意义的——它甚至会使使用`IDisposable`更难使用，因为也许我不想要基类的功能（尽管事实上，每个 .NET 类都派生自 .NET `Object`，但那是另一回事了）。

如果您提供有关实际程序架构的更多信息，我们也许可以判断是否需要基类。

还有一点值得指出。请记住，在 C++ 中，IDemo 实际上是一个类，仅从您的角度来看它是一个接口。所以在我的例子中， Child 实际上*有*一个基类。

# android - 即使我使用 dp 作为单位，Android 屏幕也不能正确缩放？

> ID：15676810
> 
> 赞同：1
> 
> 时间：2013-03-28T08:03:41.893
> 
> 标签：android, screen-size, android-screen-support, android-screen, android-resolution

我已经阅读了很多关于 SO 的内容并到处搜索，但仍然无法得到我的答案......我有这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/welcomeRelativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/graph_paper" >

 <LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/first"
        android:layout_width="40dp"
        android:layout_height="90dp"
        android:layout_marginTop="70dp"
        android:background="@color/Blue" />

    <TextView
        android:id="@+id/second"
        android:layout_width="40dp"
        android:layout_height="90dp"
        android:layout_marginTop="70dp"
        android:background="@color/Cyan" />

    <TextView
        android:id="@+id/third"
        android:layout_width="40dp"
        android:layout_height="90dp"
        android:layout_marginTop="70dp"
        android:background="@color/Brown" />
</LinearLayout>

<LinearLayout
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="203dp"
    android:background="@color/Black"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/Yellow" >

        <ImageView
            android:id="@+id/welcomeWImageView"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_marginBottom="16dp"
            android:src="@drawable/w" />

        <ImageView
            android:id="@+id/WelcomeOImageView"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/o" />

        <ImageView
            android:id="@+id/welcomeRImageView"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/r" />

        <ImageView
            android:id="@+id/welcomeDImageView"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/d" />
    </LinearLayout>

    <TextView
        android:id="@+id/welcomeTextView"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="@color/lime" />

    <LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/Pink" >

        <ImageView
            android:id="@+id/ImageView03"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_marginBottom="16dp"
            android:src="@drawable/w" />

        <ImageView
            android:id="@+id/ImageView04"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/o" />

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/r" />

        <ImageView
            android:id="@+id/ImageView02"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:src="@drawable/d" />
    </LinearLayout>
</LinearLayout>

</RelativeLayout> 
```

正如来自不同线程的答案所述，我使用 dp 作为缩放单位，但是当从不同的屏幕尺寸和分辨率移动时，我仍然会得到这些图像。

以下是我在不同屏幕尺寸和分辨率上获得的不同图像：

![3.7（480x800）](../Images/dd5b81bfa79bbf0a290bfb578731e705.png)

![3.7(480x854)](../Images/b460dfc4fe72dd4c3c9308ad2dab20d9.png)

![7.0(1024x600)](../Images/85e9d75623c7defdceef474e4b6157be.png)

![10.1(1280x800)](../Images/0a864b6df8eb41f74862662c088ad602.png)

为什么文本框不与屏幕尺寸和分辨率成比例增长？因为它们是没有图形的文本视图，并且 dp 用于该单元。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:45:37.783

我不能真正告诉您解决此问题的确切 xml 代码，但作为一个想法，您需要利用以下属性在视图之间平均分配屏幕区域：

```
android:weightSum       //for your LinearLayout
android:layout_weight   //for your child views 
```

并且根据您的 LinearLayout 的方向，您需要将以下任一设置为您的子视图。

```
android:layout_height="0dp"
android:layout_width="0dp" 
```

例如，阅读[this](http://www.chess-ix.com/blog/the-use-of-layout_weight-with-android-layouts/)和[this](http://blog.stylingandroid.com/archives/312)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T08:36:12.043

您必须为您的应用程序创建三种不同的布局。
1- 布局文件夹（基本上用于小屏幕）
2- 布局大（基本上用于大屏幕，例如 5.0）
3- 布局-xlarge（用于大屏幕“平板电脑”）
以使您的应用程序适合每个屏幕完美，您必须创建这些文件夹。以下步骤显示了如何使用它
1- 在 res 文件夹 layout-large 和 layout-xlarge 中创建新的两个文件夹。
2-`layout.xml`从布局文件夹中复制您的并将其粘贴到您现在创建的每个文件夹中。
3-打开它们，您会看到它们在更大的屏幕上的外观，然后您只需在每个文件夹上的 layout.xml 上进行一些更改。

希望你所寻求的。就这么简单。两个额外的文件夹

# javascript - JavaScript 中循环的最后一次迭代

> ID：15676819
> 
> 赞同：7
> 
> 时间：2013-03-28T08:04:14.453
> 
> 标签：javascript, loops, for-loop

我想做这样的事情：

```
for (var i=1; i<=10; i++) {
   document.write(i + ",");
} 
```

它显示如下结果：

```
1,2,3,4,5,6,7,8,9,10, 
```

但是我想去掉最后一个“，”，结果应该是这样的：

```
1,2,3,4,5,6,7,8,9,10 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T08:09:48.970

您应该`.join`改用：

```
var txt = [];                          //create an empty array
for (var i = 1; i <= 10; i++) {
    txt.push(i);                       //push values into array
}

console.log(txt.join(","));            //join all the value with "," 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T08:05:32.640

您可以在生成时简单地测试：

```
for (var i=1; i<=10; i++) {
   document.write(i);
   if (i<9)  document.write(',');
} 
```

请注意，当您从数组开始时，这可能是您提出的问题背后的真正问题，有一个方便的`join`功能：

```
var arr = [1, 2, 3];
document.write(arr.join(',')); // writes "1,2,3" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T08:06:41.097

您应该检查是否已到达循环末尾（ i == 10）：

```
for (var i=1; i<=10; i++) {
    document.write(i + (i==10 ? '': ','));
} 
```

这是一个小提琴：

[**小提琴**](http://jsfiddle.net/9YUNb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:07:21.113

试试这个-

```
str="";
for (var i=1; i<=10; i++) {
   str=str+i + ",";
}
str.substr(0,str.length-1);
document.write(str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:09:15.363

尝试一下。

```
 var arr = new Array();
 for (i=1; i<=10; i++) {
    arr.push(i);
 }
 var output = arr.join(',');
 document.write(output); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T08:10:48.823

```
for (var i=1; i<=10; i++) {
    if (i == 10) {
        document.write(i);
    }
    else {
        document.write(i + ",");
    }
} 
```

# jsf - Jboss AS / Tomcat debian 部署：JSF FileNotFoundException

> ID：15676824
> 
> 赞同：1
> 
> 时间：2013-03-28T08:04:25.020
> 
> 标签：jsf, jboss, richfaces, debian

简短介绍：

我试图在 Jboss AS 7 上部署一个 jsf 2.1 项目（也在 Tomcat 7 上尝试过）。部署工作没有任何问题，但是当我尝试访问站点 css 时，找不到图像和 javascript，并且我从日志中得到大量以下异常类型：

```
0:04:58,261 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[Faces Servlet]] (http--127.0.0.1-8080-21) Servlet.service() for servlet Faces Servlet threw exception: com.sun.faces.context.FacesFileNotFoundException: /projectName/rfRes/calendarIcon.png.xhtml Not Found in ExternalContext as a Resource 
```

在浏览器中它看起来像：

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) 
```

例如，在模板中，图像如下所示：

```
<h:graphicImage library="images" name="logo.png" /> 
```

从人脸到资源的生成路径：

```
<img src="/projectName/javax.faces.resource/logo.png.xhtml;jsessionid=30AEAD88CADB047E3DFBDDA372732F08?ln=images"> 
```

图片路径：

```
WebContent/resources/images 
```

我尝试使用不同的配置来部署它：Jboss 7.0/7.1、Tomcat 6/7、Java 6/7。但它仅适用于我的本地部署，不适用于 debian。一种解决方案是在不使用 jsf 的情况下将资源的直接路径放在任何地方，但是如何处理richfaces 图像和所有内容......

**项目和系统配置：**

Java 7
休眠 3
Jsf 2.1
Richfaces 4.2
Debian 6

**人脸配置**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <application> 
        <locale-config>
            <default-locale>en_EN</default-locale>
        </locale-config>
        <resource-bundle>
            <base-name>language</base-name>
            <var>language</var>
        </resource-bundle>
        <factory>
            <exception-handler-factory>
                package.ViewExceptionHandlerFactory
            </exception-handler-factory>
        </factory>
        <lifecycle>
            <phase-listener>package.AuthListener</phase-listener>
        </lifecycle>
    </application>
</faces-config> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app metadata-complete="true" id="WebApp_ID" version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>Name</display-name>
    <servlet id="JSF_Front_Controller_Servlet">
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
            <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>package.services</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
    <filter>
        <display-name>AuthFilter</display-name>
        <filter-name>AuthFilter</filter-name>
        <filter-class>package.AuthFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>AuthFilter</filter-name>
        <url-pattern>/view/user/*</url-pattern>
    </filter-mapping>
    <filter>
        <display-name>HibernateFilter</display-name>
        <filter-name>HibernateFilter</filter-name>
        <filter-class>package.HibernateFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>HibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>package.HibernateListener</listener-class>
    </listener>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>view/start.xhtml</welcome-file>
    </welcome-file-list>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>shadow</web-resource-name>
            <url-pattern>/services/payment/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
</web-app> 
```

**更新 1**

好像是服务器问题。我使用 apache2 和以下虚拟主机运行 debian 6：

```
<VirtualHost *:80>
<Proxy *>
 Order deny,allow
 Allow from all
</Proxy>

 RewriteEngine On
 ProxyPreserveHost On

 RewriteRule ^/(.*)$  http://127.0.0.1:8080/project-name/$1 [P]

ServerName url.com
</VirtualHost> 
```

重写规则对 jsf 来说是有问题的

# windows-7 - 在 Windows 7 上使用 Python 安装 Robot Framework 时发生错误

> ID：15676828
> 
> 赞同：5
> 
> 时间：2013-03-28T08:04:44.597
> 
> 标签：windows-7, python-3.x, path, robotframework

我已成功安装“python-3.3.0.msi”并将 PATH 设置为“C:\Python33;” 在 Windows 7 上。之后，我尝试使用“robotframework-2.7.7.win32.exe”安装 Robot Framework（双击 .exe 文件）。在安装的最后一步，我发现了以下错误：

```
File "<string>", line 35
    except Exception, err:
                    ^
SyntaxError: invalid syntax 
```

我点击了“完成”按钮——>安装向导消失了。我将 PATH 设置为“C:\Python33\Scripts”。然后我在命令提示符下使用命令“pybot --version”检查了版本。显示以下错误：

```
Traceback (most recent call last):
  File "C:\Python33\lib\runpy.py", line 140, in _run_module_as_main
    mod_name, loader, code, fname = _get_module_details(mod_name)
  File "C:\Python33\lib\runpy.py", line 102, in _get_module_details
    loader = get_loader(mod_name)
  File "C:\Python33\lib\pkgutil.py", line 482, in get_loader
    return find_loader(fullname)
  File "C:\Python33\lib\pkgutil.py", line 499, in find_loader
    pkg = importlib.import_module(pkg_name)
  File "C:\Python33\lib\importlib\__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1577, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1558, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1525, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 586, in _check_name_wrapper
  File "<frozen importlib._bootstrap>", line 1023, in load_module
  File "<frozen importlib._bootstrap>", line 1004, in load_module
  File "<frozen importlib._bootstrap>", line 562, in module_for_loader_wrapper
  File "<frozen importlib._bootstrap>", line 869, in _load_module
  File "<frozen importlib._bootstrap>", line 313, in _call_with_frames_removed
  File "C:\Python33\lib\site-packages\robot\__init__.py", line 22, in <module>
    from robot.rebot import rebot, rebot_cli
  File "C:\Python33\lib\site-packages\robot\rebot.py", line 268, in <module>
    from robot.conf import RebotSettings
  File "C:\Python33\lib\site-packages\robot\conf\__init__.py", line 17, in <mo
    from .settings import RobotSettings, RebotSettings
  File "C:\Python33\lib\site-packages\robot\conf\settings.py", line 172
    except EnvironmentError, err:
                           ^
SyntaxError: invalid syntax 
```

如何解决上述错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:52:04.313

Robot Framework 还不支持 Python 3。您应该尝试改用 Python 2.7。（Python 3 更改了语言语法中的许多内容，包括此回溯中显示的用于捕获异常的语法）。因此，请按照以下安装步骤操作：

1.  安装Python2.7.3
2.  安装robotframework2.7.7
3.  将 PATH 设置为“C:\Python27\;C:\Python27\Scripts\”
4.  在命令提示符下使用命令“pybot --version”验证安装。如果一切正常，
    将显示以下消息：“Robot Framework 2.7.7 (Python 2.7.3 on win32)”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-18T02:42:52.720

你应该运行“pip install robotframework-python3” [https://pypi.python.org/pypi/robotframework-python3](https://pypi.python.org/pypi/robotframework-python3)

# mongodb - 更改 MongoDB 数组中嵌套文档中的值

> ID：15676831
> 
> 赞同：0
> 
> 时间：2013-03-28T08:04:53.413
> 
> 标签：mongodb

我有文件：

```
{
    "_id" : ObjectId("5152ba0708c164359d5ca616"),
        "info": "Some interesting information.",
    "elements" : [
        {
            "status" : "accepted",
            "id" : "10"
        },
                {
            "status" : "waiting",
            "id" : "20"
        },
                {
            "status" : "accepted",
            "id" : "30"
        }
    ]
} 
```

如何将“status”修改为“accepted”，其中“status”为“waiting”，“id”为 20？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T09:39:03.550

使用位置 ("$") 运算符。

```
// single
db.collection.update({ _id: ..., "elements.id": "20" }, { $set: { "elements.$.status": "status" } })

// all
db.collection.update({ "elements.id": "20" }, { $set: { "elements.$.status": "status" } }, { multi: true  }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T09:00:25.733

您必须使用 elemMatch ( [http://docs.mongodb.org/manual/reference/projection/elemMatch/](http://docs.mongodb.org/manual/reference/projection/elemMatch/) )。要匹配数组中的项目，例如 status 和 id 20 ，您可以使用 $set 命令。使用 elemMatch 背后的原因是它会在返回结果之前确保两个条件在同一个子文档上匹配

```
db.CollectionName.update({"_id" : ObjectId("5152ba0708c164359d5ca616") , "elements" : { "$elemMatch : {"status" : "waiting" , "Id" : "20"}}},{ $set : {"elements.$.status" : "accepted"}}); 
```

# php - 表格未向控制器发布数据

> ID：15676847
> 
> 赞同：1
> 
> 时间：2013-03-28T08:05:37.390
> 
> 标签：php, .htaccess, mod-rewrite, joomla, joomla2.5

我面临一个奇怪的问题，即每当我提交表单时，它都会弹出一个错误，例如“***所有字段都是必需的***”。当我调试它时，我发现每当提交表单时，我的控制器中都没有得到任何发布数据，它是一个空数组。

在我的本地主机上一切正常。我已经搜索过它并得出结论，这是我的`.htacess`文件有问题。我已经设置了添加**斜杠**的规则，发现这会产生问题。

所以我想知道，如何为我的组件中执行的特定任务删除此规则。任何的意见都将会有帮助。这是添加斜杠的代码：

```
RewriteEngine On

# Start –301 redirect for "http://" to "http://www"
rewritecond %{http_host} ^testdomain.com [nc]
rewriterule ^(.*)$ http://www.testsdomain.com/$1 [r=301,L]
# End - 301 redirect rule

# add trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*[^/]$ /$0/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:30:55.550

检查您的表单张贴到哪里。如果表单`action`是不带斜线的 url，那么一旦您`POST`向它发出请求，htaccess 将重定向您，并且您将向`GET`您应该发布数据的页面发出请求。但是由于您的请求已被重定向并更改为`GET`，因此不会提交任何数据。

**解决方案：**要么修复表单操作，要么删除添加斜杠的代码。说到斜杠，据我所知，Joomla 会在没有它的情况下生成 SEF 链接，所以我想知道您为什么首先添加它，每次单击某些内容时都会进行重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:38:58.673

我已经解决了我的问题，通过以下更改规则并开始工作并在 url 中添加**斜杠。**我希望它会在未来对其他人有所帮助。

```
RewriteEngine On

# Start –301 redirect for "http://" to "http://www"
rewritecond %{http_host} ^testdomain.com [nc]
rewriterule ^(.*)$ http://www.testsdomain.com/$1 [r=301,L]
# End - 301 redirect rule

# add trailing slash
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://www.testdomain.com/$1/ [L,R=301] 
```

# gnuplot - gnuplot 中发生的错误

> ID：15676854
> 
> 赞同：0
> 
> 时间：2013-03-28T08:06:01.393
> 
> 标签：gnuplot

当我输入指令时

```
gnuplot>plot "cbr_delay" 
```

在终端，系统显示错误如下

```
 0.100000 0.038706
^
"cbr_delay", line 1: invalid command 
```

显示文件 cbr_delay

```
0.100000 0.038706
0.108000 0.038706
0.116000 0.038706
0.124000 0.038706
0.132000 0.038706
0.140000 0.038706
0.148000 0.038706
0.156000 0.038706
0.164000 0.038706
0.172000 0.038706
0.180000 0.038706
0.188000 0.038706
0.196000 0.038706
0.204000 0.038706
0.212000 0.038706
0.220000 0.038706
0.228000 0.038706
0.236000 0.038706
0.244000 0.038706
0.252000 0.038706 
```

我该怎么做才能避免错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:08:29.503

在我看来，您输入的内容*正是*您的 shell 解释为：

```
gnuplot cbr_delay > plot 
```

这对 shell 意味着 gnuplot 应该运行脚本 cbr_delay 并将标准输出流放在一个名为“plot”的文件中。您可以通过在当前目录中查找名为“plot”的文件来测试这一点。

您要做的是*首先*通过简单地键入来进入 gnuplot 提示符`gnuplot`。然后你可以输入你的 gnuplot 命令：

```
gnuplot  #enter gnuplot

#at this point, you should see a gnuplot prompt which looks like "gnuplot>"
#now enter your gnuplot command
plot "cbr_delay" 
```

# android - 如何在android中的imageview上画一条线

> ID：15676858
> 
> 赞同：0
> 
> 时间：2013-03-28T08:06:31.937
> 
> 标签：android, imageview, draw

在我的应用程序中，我想在 imageview 上画一条线。当我触摸它时，我想用手指写一条线。这是我的要求。为此，我用谷歌搜索了很多，并使用下面的链接：

[如何在 Android 上的 ImageView 中画一条线？](https://stackoverflow.com/questions/6178896/how-to-draw-a-line-in-imageview-on-android).

在我的活动中，我创建了 MyImageView 类的对象，并在我的 OnTouchListener 覆盖 onTouch() 方法和 MotionEvent.ACTION_DOWN: switch case 我编写了 update() 方法。我收到了这个错误：“方法 update() 是未定义类型 new View.OnTouchListener(){}"。所以请任何人建议我如何执行此操作。感谢您提前提供的任何帮助。

这是我的代码： imageView.setOnTouchListener(new View.OnTouchListener() {

```
@Override
public boolean onTouch(View v, MotionEvent event) {
// TODO Auto-generated method stub

ImageView view = (ImageView) v;
view.setScaleType(ImageView.ScaleType.MATRIX);
float scale;

switch (event.getAction() & MotionEvent.ACTION_MASK) 
{
case MotionEvent.ACTION_DOWN:   // first finger down only
savedMatrix.set(matrix);
start.set(event.getX(), event.getY());
og.d(TAG, "mode=DRAG"); // write to LogCat
mode1 = DRAG1;
if(checkPencil){
//update();
}
break;

case MotionEvent.ACTION_UP: // first finger lifted

case MotionEvent.ACTION_POINTER_UP: // second finger lifted

mode1 = NONE1;
Log.d(TAG, "mode1=NONE1");
break;
case MotionEvent.ACTION_MOVE:
if (mode1 == DRAG1) 
{ 
if(check){                                                                                                                                   matrix.set(savedMatrix);                                                             matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the   transformation in the matrix  of points
}
} 
else if (mode1 == ZOOM1) 
{ 
if(check){
Log.e("if elseeeeeee","dfgrtgytey");
// pinch zooming
float newDist = spacing(event);
Log.d(TAG, "newDist=" + newDist);
if (newDist > 5f) 
{
                                                             matrix.set(savedMatrix);
scale = newDist / oldDist; // setting the scaling of the
                                                                                          // matrix...if scale > 1 means
                                                                                        // zoom in...if scale < 1 means
                                                                                        // zoom out
                                                                matrix.postScale(scale, scale, mid.x, mid.y);

}
// its for rotation..
if (lastEvent!=null){
newRot = rotation(event); 
//if (Constant.TRACE) Log.d("Degreeeeeeeeeee", "newRot="+(newRot));
float r = newRot-d;                                                               matrix.postRotate(r, view.getMeasuredWidth()/2, view.getMeasuredHeight()/2);  
}
}
}
break;
//rotation..
case MotionEvent.ACTION_POINTER_DOWN:
oldDist = spacing(event);
Log.d(TAG, "oldDist=" + oldDist);
if (oldDist > 10f) {                                                          savedMatrix.set(matrix);
midPoint(mid, event);
mode1 = ZOOM1;
Log.d(TAG, "mode=ZOOM")
}
lastEvent = new float[4];
lastEvent[0] = event.getX(0);
lastEvent[1] = event.getX(1);
lastEvent[2] = event.getY(0);
lastEvent[3] = event.getY(1);
d = rotation(event);
break;

}//switch

view.setImageMatrix(matrix); // display the transformation on screen

return true; // indicate event was handled

}
}); 
```

在我的应用程序中拖动图像，旋转图像并缩放图像一切正常。我的要求是当我单击按钮时，绘图功能将正常工作。这就是我在这个块中编写更新方法的原因：“如果(checkPencil){ //update(); }。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:42:04.027

```
Canvas c = null;
c = mSurfaceHolder.lockCanvas();
imageview.line(canvas);

mSurfaceHolder.unlockCanvasAndPost(c);

public void line(Canvas draw){
// set the layout parameters
// get the background image as ImageView
// Use the gesture Overlay concept. 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:10:53.103

您发布的链接应该可以工作。不要使用股票图像视图，而是创建一个扩展它的类。您扩展的图像视图将支持一个名为 addLine 的方法，该方法将在数组列表中添加线条并覆盖 onDraw 方法以在数组列表中绘制线条

```
public class Line{
   int x1,y2, x2,y2;
   Paint p;
   public Line(int x1, y1, x2, y2){
      this.x1 = x1;
      this.y1 = y1;
      this.x2 = x2;
      this.y2 = y2;
      p= new Paint(Paint.ANTI_ALIAS_FLAG);
   }

   public void draw(Canvas c){
    c.drawLine(x1, y1, x2, y2, p);
   }
}

public class MyImageView extends ImageView{
    ArrayList<Line> lines;

    public void addLine(int x1, int y1, int x2, int y2){
        lines.add(new Line(x1,y1,x2,y2));
        //this.invalidate(); //queue a call to the onDraw method
    }

    public MyImageView(Context context) {
        super(context);
        lines = new ArrayList<Line>();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        for(Line l : lines){
            l.draw(canvas);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T02:48:51.040

hye friends 用画布简单画线：-

```
 public class MainActivity extends Activity {

    private RelativeLayout relativelayout;

    private Paint mPaint, mBitmapPaint;
    private MyView mView;
    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    relativelayout = (RelativeLayout) findViewById(R.id.item);

    DisplayMetrics metrics = getBaseContext().getResources().getDisplayMetrics();
    int w = metrics.widthPixels;
    int h = metrics.heightPixels;

    System.out.println(" width " + w);
    System.out.println(" height " + h);

    mView = new MyView(this, w, h);
    mView.setDrawingCacheEnabled(true);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.Black);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(5);

    relativelayout.addView(mView);
    }

    public class MyView extends View {

   public MyView(Context c, int w, int h) {
    super(c);
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);

    mCanvas = new Canvas(mBitmap);
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    mBitmapPaint
    .setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    }

    @Override
    protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.TRANSPARENT);
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 5;

    private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
    }

    private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
    mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
    mX = x;
    mY = y;
    }
    }

    private void touch_up() {
    mPath.lineTo(mX, mY);

    mCanvas.drawPath(mPath, mPaint);

    mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    touch_start(x, y);
    invalidate();
    break;
    case MotionEvent.ACTION_MOVE:
    touch_move(x, y);
    invalidate();
    break;
    case MotionEvent.ACTION_UP:
    touch_up();
    invalidate();
    break;
    }
    return true;
    }
    }
    } 
```

# ios - 为什么对象有指针而不是int？

> ID：15676862
> 
> 赞同：6
> 
> 时间：2013-03-28T08:06:45.393
> 
> 标签：ios, objective-c, pointers

如果我们输入

```
MyObject *obj = [[MyObject alloc] init]; 
```

“obj”是指向内存地址的指针。

...当我们创建一个 int 时，我们输入：

```
int x = 10; 
```

我们为什么不打字？

```
int *x = 10; 
```

问题是，为什么我们需要一个指向对象的指针而不是 int、float 等...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T08:17:50.897

### 效率。

将 int 从一个地方移动到另一个地方很容易。移动一个对象需要 CPU 做更多的工作。移动对象的地址就像移动 int 一样简单。

在纯 C 中，出于同样的原因，处理指向结构的指针是很常见的。C 语言使用 -> 操作符很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:20:55.483

在某些语言中，您可以在堆栈上“不使用指针”创建对象。例如，C++。将对象放在堆栈上的一大好处是它们会在作用域结束时自动释放，这有助于内存管理。[它也更快](https://stackoverflow.com/questions/161053/c-which-is-faster-stack-allocation-or-heap-allocation)。

将对象放在堆栈上的一件坏事是，当范围结束并且堆栈消失时，它们会自动释放。而且由于对象通常比局部变量寿命更长，因此您必须将对象的内存复制到某个地方。这是完全可能的，但它使事情复杂化。

而且，基于堆栈的对象不仅仅是内存生命周期复杂。考虑分配，`foo = bar`对于两种对象类型。如果对象始终是指针 ( `Class*`)，您只需分配一个指针并获得两个指向相同对象的指针；简单的。如果`foo`是基于堆栈的 ( `Class`)，则赋值语义开始变得模糊——你可以以原始对象的副本结束。

引入一个规则，即所有对象都在堆上分配（“使用指针”）是一个很好的简化。碰巧的是，速度差异并不重要，编译器现在还可以在超出范围后自动插入代码以释放基于堆的对象，因此这通常是双赢的局面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T08:11:12.317

你也可以有 int 和 float 的指针。

对象是在堆上创建的。要访问它，您需要地址。这就是为什么它们是指针类型的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T08:17:16.013

因为那是物体的本质。

Objective-C 直接派生自 C。这就是为什么对象被称为指针。内存地址大小的 int 类型变量是指针。最后，内存中的对象与内存中的结构没有太大区别。

但是，在使用 Objective-C 时，建议将这些变量视为对象的引用，而不是指向对象内存区域的指针。像 Java 一样思考它们，不要花太多心思在系统如何管理引用上。还有更重要的事情需要考虑，例如分配/保留与释放/自动释放或分别遵循更简单的 ARC 规则。

顺便提一句：

```
MyObject obj; 
```

那将声明一个对象，而不是指针。这在 Objective-C (afaik) 中是不可能的，当然也不合理。但是，如果它是合理且可能的，那么这就是语法的样子。

```
int *x; 
```

这确实创建了一个指向 int 的指针。要使用它，您必须分配内存并将其地址分配给 x。在 Objective C 中也很少合理，但在标准 C 中非常有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T08:17:51.277

它是在堆栈或堆上的对象之间的区别。去`int x = 10`x 现在在堆栈上。`int *x = 10`只是错误的（很可能不是您想要的），因为它声明了一个指向地址 10 的指针，无论它可能是什么。你会想要`int *x = malloc(sizeOf(int));`CodaFi 建议的。这将在一个 int 大小的堆上分配内存。

在`MyObject *obj = [[Myobject alloc] init];`后台运行编译器是为您将对象分配到堆中，但其原理基本相同

# bash - 将长 bash 命令结果放入变量中

> ID：15676864
> 
> 赞同：0
> 
> 时间：2013-03-28T08:07:07.180
> 
> 标签：bash

我在 shell 中使用以下行，它返回的结果很好，但是如何将结果放入变量中？请帮忙：

```
SAVED="ffmpeg -i INPUT 2>&1 | grep "Duration"| cut -d ' ' -f 4 | sed s/,// | awk '{ split($1, A, ":"); split(A[3], B, "."); print 3600*A[1] + 60*A[2] + B[1] }'"

echo $SAVED | bash 
```

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:10:04.987

您必须使用反引号或特殊`$()`运算符：

```
SAVED=`ffmpeg ...` 
```

或者

```
SAVED=$(ffmpeg ...) 
```

# ruby - 如何将不同的哈希对象转储到 erb 模板中

> ID：15676865
> 
> 赞同：-1
> 
> 时间：2013-03-28T08:07:19.560
> 
> 标签：ruby, yaml, erb

我有一个这样的 erb 模板，我想直接将哈希对象转储到其中。

```
# test.yml.erb
---
name: <%= name || "bat" %>
director_uuid: <%= uuid %>

release:
  name: bat
  version: <%= release.name || "latest" %>

<%= YAML.dump(compilation) %>

update:
  canaries: 1
  canary_watch_time: 3000-90000

<%= YAML.dump(network)%> 
```

但我`ERB.new(test.yml.erb).result(binding)`只是得到这个：# test.yml --- name: bat director_uuid: uuid

```
release:
  name: bat
  version: lastest

---
compliaton:
  workers: 1
  network: default    

update:
  canaries: 1
  canary_watch_time: 3000-90000

---
networks:
  name: default 
```

有没有办法删除不需要的`---`？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:36:44.900

只需从 YAML 的转储输出中删除它：

```
<%= YAML.dump(compilation).sub(/.*?\n/, '') %> 
```

# delphi - Windows 版本与版本

> ID：15676868
> 
> 赞同：-4
> 
> 时间：2013-03-28T08:07:32.473
> 
> 标签：delphi, delphi-xe2

我有一个项目使用 Delphi XE2 显示版本类型从“Windows 95”到“Windows 8”的 Windows 版本。首先，我尝试了“TOSVersion”功能。但问题是：

```
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  VersionNameOfOperatingSystem : String;
begin
  VersionNameOfOperatingSystem := TOSVersion.Name;
  Edit01.Text := VersionNameOfOperatingSystem;
end 
```

在 Windows 8 环境中仅显示“Windows”，另一个问题是 Ii 无法检测到“Windows 版”。然后我尝试了“GetProductInfo”功能。但这里还有另一个问题：

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
dwSpMinorVersion: DWORD; pdwReturnedProductType: PDWORD): BOOL stdcall;
external kernel32;

procedure TMainForm.BitBtn01Click(Sender: TObject);
var
rpt: cardinal;
begin
  if GetProductInfo(6, 0, 0, 0, @rpt) then Edit02.Text :=IntToStr(rpt);
end 
```

和

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
dwSpMinorVersion: DWORD; pdwReturnedProductType: PDWORD): BOOL stdcall;
external kernel32;

procedure TMainForm.BitBtn01Click(Sender: TObject);
var
rpt: cardinal;
begin
  if GetProductInfo(6, 1, 0, 0, @rpt) then Edit02.Text :=IntToStr(rpt);
end 
```

和

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
dwSpMinorVersion: DWORD; pdwReturnedProductType: PDWORD): BOOL stdcall;
external kernel32;

procedure TMainForm.BitBtn01Click(Sender: TObject);
var
rpt: cardinal;
begin
  if GetProductInfo(6, 2, 0, 0, @rpt) then Edit02.Text :=IntToStr(rpt);
end 
```

和

```
function GetProductInfo(dwOSMajorVersion, dwOSMinorVersion, dwSpMajorVersion,
dwSpMinorVersion: DWORD; pdwReturnedProductType: PDWORD): BOOL stdcall;
external kernel32;

procedure TMainForm.BitBtn01Click(Sender: TObject);
var
rpt: cardinal;
begin
  if GetProductInfo(6, 2, 2, 2, @rpt) then Edit02.Text :=IntToStr(rpt);
end 
```

产生相同的结果如果我在 Windows Vista Enterprise SP2 中运行编译的 exe 文件，并且不能使用早期版本的 Windows。如果我如下调用“TOSVersion”

```
begin
  TOSVersion.Platform of
    pfWindows : 
      begin
      .
      .
      .
      .
      end
    else
      beging
      .
      .
      .
      end
end; 
```

然后调用“GetProductInfo”然后我得到“错误”，告诉两者不能同时调用。最后我尝试了“OSVERSIONINFO 结构”来识别它是否是“服务器”和“Windows XP 版本类型”的“GetVersionEx 函数”。我完全困惑如何开始我的编程。这个论坛有很多经验丰富的程序员。任何人都可以写下完整的程序。我用谷歌搜索了它，但所有可用的程序都没有更新到“Windows 7”。此论坛中的一个可用版本也是“Windows 7”且未更新。请不要告诉“我们不能坐在您的键盘前为您输入代码”。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:29:14.327

在我看来，您最近的所有问题都与以下问题有关：

1.  您想获取操作系统的完整产品名称。您尝试过的各种示例代码都有缺陷。例如，您尝试过的许多示例都无法识别 Windows 8。
2.  您想知道产品类型。您希望检测 Ultimate 版本。

我建议您使用 WMI 来执行此操作。这将在未来证明您的代码，以便它可以在尚未发布的 Windows 版本上运行。

对于我的 WMI 代码，我从这个答案中无耻地重新使用了 WMI 专家 RRUZ 的代码：[如何在不显着增加应用程序文件大小的情况下将 WMI 与 Delphi 一起使用？](https://stackoverflow.com/questions/2761328/how-do-i-use-wmi-with-delphi-without-drastically-increasing-the-applications-fi#2762023)

```
unit SimpleWMI;

interface

uses
  SysUtils, ActiveX, ComObj, Variants;

function GetWMIprops(const wmiHost, root, wmiClass: string; const wmiProps: array of string): TArray<string>;

implementation

function GetWMIprops(const wmiHost, root, wmiClass: string; const wmiProps: array of string): TArray<string>;
var
  objWMIService: OLEVariant;
  colItems: OLEVariant;
  colItem: OLEVariant;
  oEnum: IEnumvariant;
  iValue: LongWord;

  function GetWMIObject(const objectName: String): IDispatch;
  var
    chEaten: Integer;
    BindCtx: IBindCtx;
    Moniker: IMoniker;
  begin
    OleCheck(CreateBindCtx(0, BindCtx));
    OleCheck(MkParseDisplayName(BindCtx, StringToOleStr(objectName), chEaten, Moniker));
    OleCheck(Moniker.BindToObject(BindCtx, nil, IDispatch, Result));
  end;

var
  i: Integer;

begin
  objWMIService := GetWMIObject(Format('winmgmts:\\%s\%s', [wmiHost, root]));
  colItems := objWMIService.ExecQuery(Format('SELECT * FROM %s', [wmiClass]), 'WQL', 0);
  oEnum := IUnknown(colItems._NewEnum) as IEnumvariant;
  SetLength(Result, Length(wmiProps));
  while oEnum.Next(1, colItem, iValue) = 0 do
    for i := 0 to high(wmiProps) do
      Result[i] := colItem.Properties_.Item(wmiProps[i], 0);
end;

end. 
```

所以现在你可以用这个简单的程序解决你的问题：

```
program OSVersionDemo;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  Windows,
  ActiveX,
  SimpleWMI in 'SimpleWMI.pas';

function IsUltimateEdition(ProductType: DWORD): Boolean;
begin
  Result := ProductType in [PRODUCT_ULTIMATE,PRODUCT_ULTIMATE_N,PRODUCT_ULTIMATE_E];
end;

var
  PropValues: TArray<string>;
  ProductType: DWORD;

begin
  CoInitialize(nil);
  try
    PropValues := GetWMIprops('.', 'root\CIMV2', 'Win32_OperatingSystem', ['Caption', 'Version', 'OperatingSystemSKU']);
    Writeln('OS Name: ' + PropValues[0]);
    Writeln('Version: ' + PropValues[1]);
    ProductType := StrToInt(PropValues[2]);
    Writeln('Ultimate edition: ' + BoolToStr(IsUltimateEdition(ProductType), True));

    Readln;
  finally
    CoUninitialize;
  end;
end. 
```

在我的机器上，输出是：

```
操作系统名称：Microsoft Windows 7 Professional
版本：6.1.7601
终极版：假

```

该类[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394239.aspx)加载了更多信息。因此，如果您想获取服务包信息，请询问该`CSDVersion`属性。像这样：

```
PropValues := GetWMIprops('.', 'root\CIMV2', 'Win32_OperatingSystem', ['Caption', 'Version', 'OperatingSystemSKU', 'CSDVersion']);
Writeln('OS Name: ' + Trim(PropValues[0]) + ' ' + Trim(PropValues[3]));
Writeln('Version: ' + PropValues[1]);
ProductType := StrToInt(PropValues[2]);
Writeln('Ultimate edition: ' + BoolToStr(IsUltimateEdition(ProductType), True)); 
```

我希望这为您提供了足够的信息来填写您的问题实际需要的信息。

尽管您说您希望支持 Windows 95、98 和 ME，但请注意使用 Unicode 版本的 Delphi（例如 XE2）生成的程序不能在那些古老的系统上运行。

# c++ - 内联类函数和共享库 (dll) 构建

> ID：15676873
> 
> 赞同：6
> 
> 时间：2013-03-28T08:07:53.900
> 
> 标签：c++, mingw, shared-libraries, inline, dllexport

我正在尝试将一些代码移动到共享库中（独立编译时工作正常），但遇到类内联函数的一些问题。mingw/gcc v4.7.2。

部分问题似乎是因为我更喜欢在类声明之外定义我的内联函数（它使类声明更整洁，更易于阅读）。我一直认为这是可以接受的，并且等同于在类声明中定义......但似乎并非总是如此。我创建了一个简单的示例来演示这些问题。（显然 dllexport 通常会在一个宏中在导入/导出之间切换。）

标题：

```
// Uncomment one at a time to see how it compiles with: -O2 -Winline
//#define INLINE_OPTION 1 // implicit - builds without inline warnings
#define INLINE_OPTION 2 // simple external inline - gives inline warnings
//#define INLINE_OPTION 3 // external forced inline - gives inline errors

class __attribute__((dllexport)) Dummy {
public:
    Dummy() : m_int{0} {}
    ~Dummy() {}
    #if INLINE_OPTION == 1
    int get_int() const { return m_int; }
    #else
    int get_int() const;
    #endif
    int do_something();
private:
    int m_int;
};

#if INLINE_OPTION == 2
inline int Dummy::get_int() const
{ return m_int; }
#endif

#if INLINE_OPTION == 3
inline __attribute__((always_inline)) int Dummy::get_int() const
{ return m_int; }
#endif 
```

.cpp 文件：

```
int Dummy::do_something()
{
    int i = get_int();
    i *= 2;
    return i;
} 
```

如上所述，使用 INLINE_OPTION == 1（隐式，类内内联定义）代码编译时没有警告。

使用 INLINE_OPTION == 2 （类外内联定义）我收到以下警告：`int Dummy::get_int() const' can never be inlined because it uses attributes conflicting with inlining [-Winline]`

使用 INLINE_OPTION == 3 （试图强制内联），我得到与上面相同的警告，并且我得到这个错误：`error: inlining failed in call to always_inline 'int Dummy::get_int() const': function not inlinable`，有关它的信息是从 .cpp 文件中的 Dummy::do_something() 内的第一行调用的. 请注意，这是关于尝试在库本身内内联函数！对于简单的访问器函数，这可能是非常重要的开销。

难道我做错了什么？将类外定义内联函数与类内函数定义区别对待，gcc 是否正确？（我真的被迫弄乱类声明吗？）

注意：问题不仅仅影响我声明的内联内容。当涉及继承时，它还会影响任何声明为 constexpr 甚至声明为“= default”的析构函数。

**编辑：**

刚刚尝试使用 mingw64 / gcc v4.8.0 得到相同的结果。请注意，这包括选项 1 没有内联在 do_something 中的事实（我检查了汇编程序输出），因此显然选项 1 和选项 2 之间的唯一区别是只有选项 2 会给出 -Winline 警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:51:34.017

我对如何在 Windows 上制作共享库一无所知。在 linux/OSX 中，源代码不需要特殊处理，因此共享 (.so) 和普通 (.a) 库都可以从相同的源创建而无需特殊处理。

如果您确实需要将符号导出到共享库中的特殊属性，那么您可以简单地拆分代码，例如

```
namespace implementation_details {
  class __attribute__((dllexport)) DummyBase
  {
  protected:
    DummyBase() : m_int{0} {}
    ~DummyBase() {}
    int do_something();
    int m_int;
  };
}

struct Dummy: private implementation_details::DummyBase
{
  using implementation_details::DummyBase::do_something;
  int get_int() const noexcept;
};

inline __attribute__((always_inline)) int Dummy::get_int() const noexcept
{ return m_int; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:19:24.493

好吧，也许我的回答有点神秘......让我给你一个简单的例子，说明我的意思是使用你的代码片段。

假人.h：

```
#ifndef _DUMMY_H_
#define _DUMMY_H_

class __attribute__((dllexport)) Dummy {
public:
  Dummy() : m_int{0} {}
  ~Dummy() {}
  int get_int() const;
  int do_something();
private:
  int m_int;
};

// here goes the include of the implementation header file
#include "dummy.h.impl"
#endif // _DUMMY_H_ 
```

dummy.h.impl：

```
// there will be no symbol for Dummy::get_int() in the dll.
// Only its contents are copied to the places where it
// is used. Placing this in the header gives other binaries
// you build with this lib the chance to do the same.
inline int Dummy::get_int() const
{ return m_int; } 
```

当然，您可以将内联定义放在同一个头文件中的类声明下方。但是，我发现这仍然违反了声明和定义的分离。

虚拟.cpp：

```
// this method will become a symbol in the library because 
// it is a C++ source file.
int Dummy::do_something()
{
  // i would if i knew what to do...
  return 0;
} 
```

希望我能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T00:27:54.157

我在另一个帖子上所做的编辑似乎没有被采纳，而且无论如何似乎一些额外的清晰度可能是合适的，所以我发布了我已经发送到另一个论坛的详细信息。下面的代码`class C`是解决这个问题的方法——只导出非内联成员，而不是整个类。如其他地方的评论中所述，`__declspec(dllexport)`并且`__attribute__((dllexport))`是等效的。

测试.hpp

```
class __declspec(dllexport) A {
public:
    int fa() { return m; }
    int ga();
private:
    int m{0};
};

class __declspec(dllexport) B {
public:
    int fb();
    int gb();
private:
    int m{0};
};
inline int B::fb() { return m; }

class C {
public:
    int fc() { return m; }
    __declspec(dllexport) int gc();
private:
    int m{0};
}; 
```

测试.cpp

```
#include "test.hpp"

int A::ga() { return (fa() + 1); }

int B::gb() { return (fb() + 1); }

int C::gc() { return (fc() + 1); } 
```

如果您使用选项编译它：（`-std=c++11 -O2 -S -Winline`使用 mingw/ming64 和 gcc v4.7.2 或 v4.8.0）您可以看到为库函数 ga、gb 和 gc 生成的汇编程序如下所示：

嘎：

```
subq    $40, %rsp
.seh_stackalloc 40
.seh_endprologue
call    _ZN1A2faEv
addl    $1, %eax
addq    $40, %rsp
ret 
```

国标：

```
subq    $40, %rsp
.seh_stackalloc 40
.seh_endprologue
call    _ZN1B2fbEv
addl    $1, %eax
addq    $40, %rsp
ret 
```

GC：

```
.seh_endprologue
movl    (%rcx), %eax
addl    $1, %eax
ret 
```

你会收到警告：
`warning: function 'int B::fb()' can never be inlined because it uses attributes conflicting with inlining [-Winline]`
`warning: inlining failed in call to 'int B::fb()': function not inlinable [-Winline] (called from B::gb())`

请注意，没有关于 fa 未内联的警告（我认为这是预期的）。但也要注意 ga、gb 和 gc 都是库函数。无论您认为是否应该导出内联函数本身，都没有充分的理由不能在库中内联内联。因此我认为这是编译器中的一个错误。

看看广受好评的代码，看看你发现有多少只导出显式成员。例如，被编译到库中的那几个 boost 部分（例如：正则表达式），使用该`class A`技术，这意味着许多访问器函数没有被内联到库中。

但是，除此之外，现在的答案是`class C`技术（显然在实际代码中，它必须包含在宏中才能在导出和导入之间切换，就像您通常在类级别所做的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-23T08:28:47.977

正如一些人所建议的，这不是编译器错误。在 C++ 中，如果函数是内联的，则必须在每个声明中将其声明为内联。有 5 个属性必须满足，其中之一是：

```
 An inline function with external linkage (e.g. not declared static) has the following additional properties:
1) It must be declared inline in every translation unit.
... 
```

在您的示例中，您首先在类定义中将函数 Dummy::get_int() 声明为非内联。这意味着函数不能重新声明为内联

来源：[http ://en.cppreference.com/w/cpp/language/inline](http://en.cppreference.com/w/cpp/language/inline)

顺便说一句：内联说明符在 C 中的工作方式不同，您可以在其中声明同一函数的内联和非内联版本。不过，您必须同时实现两者并确保它们做同样的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T10:14:10.500

为什么不在类声明（`inline int get_int() const;`）中内联声明你的函数？也许有错误？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T15:03:15.870

编译器不能内联必须在 dll 中导出的函数。毕竟，当从与您的 dll 链接的可执行文件调用时，该函数应该有一个地址。很可能来自 do_something 的调用将被内联，但在一般情况下，我认为这是不可能的

# java - 如何将异步 HTTP 请求响应合并为一个？

> ID：15676875
> 
> 赞同：1
> 
> 时间：2013-03-28T08:08:08.460
> 
> 标签：java, asynchronous

我正在尝试异步发出 x 数量的 HTTP 请求。我看了问题[Java中的异步IO？](https://stackoverflow.com/questions/592303/asynchronous-io-in-java)以及[如何在 JAVA 中创建异步 HTTP 请求？](https://stackoverflow.com/questions/3142915/how-do-you-create-an-asynchronous-http-request-in-java). 我找到了很好的库[Asynchronous Http and WebSocket Client library for Java](https://github.com/AsyncHttpClient/async-http-client)，但我不明白如何安全地将多个结果组合成一个结果。例如，如果我有以下代码：

```
AsyncHttpClient c = new AsyncHttpClient();
List<String> urls = getUrls();
List<MyResultObject> results = new ArrayList<>();
for(String url : urls)
{
    // Create asynchronous request
    Future<MyResultObject> f = c.prepareGet(url).execute(handler);

    // How can I add completed responses to my results list ???
} 
```

如何安全地将这些结果合并到 List 中，并在所有请求完成后继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:40:34.953

我找到了使用期货的[本教程](http://www.vogella.com/articles/JavaConcurrency/article.html#futures)。您可以执行以下操作：

```
AsyncHttpClient c = new AsyncHttpClient();
List<String> urls = getUrls();
List<Future<MyResultObject>> futures = new ArrayList<>();  // keep track of your futures
List<MyResultObject> results = new ArrayList<>();
for(String url : urls)
{
    // Create asynchronous request
    Future<MyResultObject> f = c.prepareGet(url).execute(handler);
    futures.add(f);
}

// Now retrieve the result
for (Future<MyResultObject> future : futures) {
  try {
    results.add(future.get());
  } catch (InterruptedException e) {
    e.printStackTrace();
  } catch (ExecutionException e) {
    e.printStackTrace();
  }
}
// continue with your result list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:10:12.813

您可以调用`get()`Future 类的方法来获取结果。请注意，对该方法的调用可能会阻塞，直到结果可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T06:58:08.040

如果你想合并几个http请求并获得所有结果。你可以看看代码打击。

```
package ParallelTasks;

import org.apache.commons.lang3.tuple.MutablePair;
import org.apache.commons.lang3.tuple.Pair;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.*;

public class ParallelHttpRequest {
    //thread pool to execute http request task.
    static final ExecutorService businessRequestExecutor = Executors.newCachedThreadPool();

    public static void main(String[] args) throws InterruptedException, ExecutionException {
        List<String> urlList = new ArrayList<String>();

        final CountDownLatch latch = new CountDownLatch(urlList.size());

        List<Future<Pair<String, String>>> list = new ArrayList<Future<Pair<String, String>>>();
        for (final String url : urlList) {
            Future<Pair<String, String>> future = businessRequestExecutor.submit(new Callable<Pair<String, String>>() {
                public Pair<String, String> call() throws Exception {
                    try {
                        //do post or get http request here.
                        //SoaHttpUtil.post(config.getUrl(), buReqJson);

                        String result = "";

                        return new MutablePair<String, String>(url, result);
                    } catch (Exception ex) {
                        System.out.println(ex);
                        return new MutablePair<String, String>(url, null);
                    } finally {
                        latch.countDown();
                    }
                }
            });
            list.add(future);
        }

        //wait no more than 5 seconds.
        latch.await(5000, TimeUnit.MILLISECONDS);

        //print finished request's result.
        for (Future<Pair<String, String>> future : list) {
            if (future.isDone()) {
                System.out.println(future.get().getValue());
            }
        }
    }
} 
```

# web-services - 创建实现日历协议（如 caldav）的 Web 服务

> ID：15676876
> 
> 赞同：2
> 
> 时间：2013-03-28T08:08:10.017
> 
> 标签：web-services, calendar, protocols, caldav

我正在制作一个日历应用程序，它必须连接到网络服务。Web 服务将从第三方数据库获取数据。有没有办法为此使用日历协议，如 Caldav？如果是，webservice应该如何实现calender协议？它是否必须使用特定的库或类似的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:51:48.220

您可以使用 CalDAV，CalConnect 有一个 CalDAV 资源页面来提供有关协议和库的一些信息

如果您想获得 SOAPy，则有[CalWS-SOAP 协议，您将](http://www.calconnect.org/pubdocs/CD1301%20CalWS-SOAP%20SOAP%20Web%20Services%20Protocol%20for%20Calendaring%20V1.0.pdf)[在工件页面](http://www.calconnect.org/artifacts.shtml)上获得该协议的架构和 XML 中的 iCalendar

# regex - 如何通过 perl 中的字符串解析以提取某个值？

> ID：15676879
> 
> 赞同：0
> 
> 时间：2013-03-28T08:08:22.800
> 
> 标签：regex, perl

我有以下字符串

```
> show box detail
   2 boxes:
1) Box ID: 1
   IP:                  127.0.0.1
   Interface:           1/1
   Priority:            31
2) Box ID: 2
   IP:                  192.68.1.1
   Interface:           1/2
   Priority:            31 
```

如何从 perl 中的上述字符串获取 BOX ID？这里的盒子数量可能会有所不同。那么根据盒子“n”的数量，如果显示盒子细节可以以相同的格式达到 n 个节点，如何提取盒子 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:12:44.747

```
my @ids = $string =~ /Box ID: ([0-9]+)/g; 
```

更严格：

```
my @ids = $string =~ /^[0-9]+\) Box ID: ([0-9]+)$/mg; 
```

# c++ - 为什么不能使用“链接”作为类名

> ID：15676888
> 
> 赞同：6
> 
> 时间：2013-03-28T08:09:17.047
> 
> 标签：c++, class

如标题所述。以下代码显示错误：

```
#include <iostream>
using namespace std;

class link
{
    public:
        link()
        {
            num=0;
            next=NULL;
        }

        int num; 
        link* next;
};

int main() {
    link test;

    return 0;
} 
```

编译这段代码

```
g++ test.cpp -o test 
```

我的 g++ 版本是

> g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

并且编译器显示以下错误

```
test.cpp: In function ‘int main()’:
test.cpp:18:10: error: expected ‘;’ before ‘test’ 
```

如果我评论这个“链接测试”声明，那么一切都很好。此外，如果我将 'link' 替换为 'Link' 之类的其他名称，也一切正常。

在**Visual Studio**或**VC**中，代码还可以......所以它让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:04:56.263

总结评论：GCC 包含一个*名为*`link`. 为了与 C 兼容，C++ 允许您定义与函数同名的结构（或类），但您必须在使用时消除它们的歧义。

即在这种情况下，修复是`class link test;`

使用`link`里面的定义`class link`是一个例外，那里总是指类本身。这是能够编写构造函数的必要条件，因为您无法在此处消除名称的歧义。没有允许它的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:17:43.973

有一个[int 链接(const char *path1, const char *path2);](http://www.manpagez.com/man/2/link/) unistd.h 中的函数，它似乎包含在 iostream 中。Gcc 过去曾[遇到](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35557)过此类问题。（我注意到 4.7.2 没有显示这种行为。）

正如 MSalters 所指出的，添加一个

```
class link test; 
```

应该消除问题。

# php - 函数计数不起作用

> ID：15676893
> 
> 赞同：-5
> 
> 时间：2013-03-28T08:09:50.347
> 
> 标签：php, mysql, count

我想计算来自查询的结果并将其显示给用户`$queryrun`变量保存查询运行并在我的页面中的代码下面提到但我收到了这个消息：

> 您的查询发现警告：mysql_result() 期望参数 1 是资源，布尔值在 C:\xampp\htdocs\ss.com\spd\index.php 中的第 145 行属性中在您选择的位置请这里是代码：

```
<?php 
mysql_connect('localhost', 'root', '') or die(mysql_error());
mysql_select_db('test') or die(mysql_error());

$count=mysql_query('SELECT COUNT($queryrun) FROM properties'); 
?>

<div>Your Query Found <strong><?php echo $Result=mysql_result($count, 0)?></strong> 
     Properties in Your Selected Location</div><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:20:51.120

以这种方式尝试您的查询。

```
$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM table1", $link);
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n"; 
```

[mysql的php手册](http://php.net/manual/en/function.mysql-num-rows.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:14:37.213

此查询失败

```
$count=mysql_query('SELECT COUNT($queryrun) FROM properties'); 
```

为了将变量插入引号内，它必须是双引号而不是单引号。

```
$count=mysql_query("SELECT COUNT($queryrun) FROM properties"); 
```

**注意：**这假设 PHP 变量`$queryrun`已经在这一行之前定义。如果你的意思是这`queryrun`是你表的一个字段，那么你可以这样做

```
$count=mysql_query("SELECT COUNT(queryrun) FROM properties"); 
```

这就是为什么`mysql_result`没有得到它所期望的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:15:13.497

首先在`" "`而不是写查询`''`，`$variable`在单引号中不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:15:32.180

如果 $queryrun 是应该被替换的 php 字符串变量，那么你的语法是错误的，因为它没有得到扩展。尝试

```
"SELECT COUNT($fieldname) FROM properties" 
```

或者

```
'SELECT COUNT(' . $fieldname . ') FROM properties' 
```

代替

```
'SELECT COUNT($fieldname) FROM properties' 
```

将您的查询与以下内容进行比较：

```
"select count(*) from ( select 3 ) as q1;" 
"select count(Db) from mysql.db;"
"select count(blah) as bzz from ( select 3 as blah ) as q1;" 
```

这些“工作”中的每一个，而你没有。分析差异，你会明白为什么:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:21:20.513

错误消息意味着您的查询没有成功。`mysql_query`将`FALSE`在失败时返回。检查结果代码的`mysql_query`稳健性并修复您的查询。

# java - UnsatifiedLinkException java -- 由 LTI-CIVIL 引起

> ID：15676894
> 
> 赞同：1
> 
> 时间：2013-03-28T08:09:55.047
> 
> 标签：java, webcam, unsatisfiedlinkerror, lti

```
Exception in thread "main" com.lti.civil.CaptureException: java.lang.UnsatisfiedLinkError: no civil in java.library.path
    at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:24)
    at pst.CaptureSystemTest.main(CaptureSystemTest.java:27)
Caused by: java.lang.UnsatisfiedLinkError: no civil in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:21)
    ... 1 more 
```

我正在尝试运行`CaptureSystemTest.java`lti-civil 下载附带的。我已经将该类添加到我自己的包中，`Eclipse`并且添加了 lti-civil 下载附带的所有 jar。

我在堆栈上查看了与此类似的问题，唯一的答案是将以下代码添加到程序中：

```
System.setProperty( "java.library.path", "C:/Work/lti-civil/native/win32-x86/" );
Field fieldSysPath = ClassLoader.class.getDeclaredField( "sys_paths" );
fieldSysPath.setAccessible( true );
fieldSysPath.set( null, null ); 
```

但是，`Field`Eclipse 给出了 18 条导入建议，将其标记为错误。

我的问题是：
**如何开始使用 LTI-CIVIL 进行应用程序开发？**
我的意思是，我需要做什么？像添加罐子等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:17:56.563

我不知道什么是 LTI-CIVIL，但通常 3rd 方库被打包到 jars 中，你必须将它包含在你的构建类路径中。搜索可以将 jars 添加到类路径的各种方法，例如[本](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)教程。

# vb.net - 脚本不再正确地自动点击

> ID：15676896
> 
> 赞同：1
> 
> 时间：2013-03-28T08:09:58.753
> 
> 标签：vb.net, login, browser

我有一个脚本可以登录到一个网站，并且可以在给定的时间间隔内非常快速地自动点击一些东西。现在，自从我添加了最新的细节后，脚本中的所有内容都可以正常工作，除了自动点击器。一旦我点击按钮启动自动点击器，它甚至不会点击一次。这是我刚刚添加的代码

```
 With WebBrowser1

        Do Until Not (.IsBusy)
            Application.DoEvents()
        Loop

        Do Until .ReadyState = WebBrowserReadyState.Complete
            Application.DoEvents()
        Loop

    End With

    Dim htmlText As String

    If Not (WebBrowser1.Document.Body.InnerHtml) Is Nothing Then

        htmlText = WebBrowser1.Document.Body.InnerHtml

        If InStr(htmlText, "Microsoft account") Then

            MessageBox.Show("You have entered in a wrong password or the account doesn't exist.")
            'code to go here if it is true
        Else

            MessageBox.Show("Sign in successful. Proceed on...")
            'code to go here if it is false

        End If

    End If 
```

代码的作用是告诉您您使用了正确的登录凭据还是错误的凭据。但我不明白这会如何影响我的自动点击按钮？

```
 Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If RadioButton1.Checked = True Then
        Timer1.Interval = 40
    ElseIf RadioButton2.Checked = True Then
        Timer1.Interval = 100
    Else
        Timer1.Interval = 500
    End If

    Timer1.Start()

    WebBrowser1.Document.GetElementById("NewGamertag").SetAttribute("value", txtTurbo.Text)
    WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")
End Sub 
```

其中计时器1 =

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:51:15.900

做你的`timer1.enable = true`，否则它不会工作。

# android - 使用 R.id.image 而不是 R.drawable.image 将 imageView 中的图像保存到数据库中

> ID：15676899
> 
> 赞同：1
> 
> 时间：2013-03-28T08:10:06.097
> 
> 标签：android, android-imageview

我想`ImageView`使用 R.id 而不是 R.drawable 将图像保存到数据库中，因为图像可以更改（因为它是相机图片）。l 不能使用图片路径保存，因为图库可能被篡改。

```
HotOrNot entry = new HotOrNot(this);  
byte[] image4 = HotOrNot.getBytes(BitmapFactory.decodeResource(null, R.id.imageView2));
entry.open();
entry.createEntry(image4);
entry.close();

public static byte[] getBytes(Bitmap bitmap) {
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, stream);
    return stream.toByteArray();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:26:43.037

您需要了解，这`R.drawable.image`是`ID`实际图像的。并且`R.id.imageView2`是`ID`的`ImageView`。

您的论点是您要存储的图像可以更改。所以在这种情况下，你可以做的是使用`yourImageView.getDrawable()`，这样你就会得到当前图像，`ImageView`然后将其转换为`Bitmap`使用这个

```
BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
Bitmap bitmap = bitmapDrawable.getBitmap();
byte[] image4 = HotOrNot.getBytes(bitmap); // Your code from here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:18:25.347

所代表的`R.id..`是项目预编译资产中资源类型的 id。我认为您无法获得`id`使用相机拍摄的图像的价值。

另请注意，类型`R.id..`是 int。

我知道以上不是答案。如果您想使用相机拍摄图像并将其保存在数据库中，请在 SO 中检查[此问题。](https://stackoverflow.com/questions/9941637/android-how-to-save-camera-images-in-database-and-display-another-activity-in-li)希望能帮助到你。

# html - 是否可以在静态站点中创建 layout/application.html 文件？

> ID：15676900
> 
> 赞同：1
> 
> 时间：2013-03-28T08:10:06.580
> 
> 标签：html, github-pages

有没有办法为 Github pages 站点使用布局页面？例如，如果我有一个包含 index.html、about.html 和 contact.html 的网站，那么这些页面中的每一个页面中都会有一些内容不会发生变化（例如，导航或 Google 分析）。例如，在 Rails 站点中，可以保留保持不变的内容，`layouts/application.html.erb`这样您就不必在每个页面中重复它。有没有办法用静态网站做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:13:41.303

是的，Jekyll 有布局。将您的布​​局放在静态站点顶部的 _layouts 目录中。`{{ content }}`在页面内容所在的布局中使用标签。然后，在您的 YAML 前端，放置一个`layout: default`（或您想要使用的任何布局）。

[https://help.github.com/articles/using-jekyll-with-pages](https://help.github.com/articles/using-jekyll-with-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:13:21.037

有一些工具（您可能不喜欢）例如 Dreamweaver 可以自动执行此操作。否则，我们所做的就是编写脚本来将我们的 PHP 文件转换为静态 html 文件。

```
php about.php > about.html 
```

# php - 如何在不提交的情况下从 FORM 中获取 VALUE？

> ID：15676903
> 
> 赞同：1
> 
> 时间：2013-03-28T08:10:14.563
> 
> 标签：php, html

我想在不提交表格的情况下从表格中获得价值，因为客户必须选择正确类型的房屋模型才能获得适合所选房屋模型的正确表格，无需提交，只需选择房屋模型，例如继续之后的其他形式。

到目前为止，我已经尝试过：

```
<form method="GET" action="foo.php">
  <select name="house_model">
    <option value="">------</option>
    <option value="<?php echo $model1;?>">Model 1</option>
    <option value="<?php echo $model2;?>">Model 2</option>
    <option value="<?php echo $model3;?>">Model 3</option>
  </select>
</form>

<?php    
$a = $_GET["housemodel"];

if($a<>'')
{
if($a == $model1)
{
   echo "<input type=\"text\" name=\"a\" value=\"something model1\">";
}
else if($a == $model2)
{
   echo "<input type=\"text\" name=\"b\" value=\"something model2\">";
} 
else if($a == $model3)
{
   echo "<input type=\"text\" name=\"c\" value=\"something model3\">";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:13:35.077

如果您不想提交表单，请使用 JavaScript 获取元素。或者您也可以使用 jquery 来访问该值。确保`id = "something"`使用`$('#something').val();`

如果你想使用 JavaScript，

```
<select name="house_model" id="model">
    <option value="">------</option>
    <option value="<?php echo $model1;?>">Model 1</option>
    <option value="<?php echo $model2;?>">Model 2</option>
    <option value="<?php echo $model3;?>">Model 3</option>
</select>

<script type="text/javascript">
    var model= document.getElementById('model');
    alert("You entered: " + model);
</script> 
```

AJAX 代码在这里

```
 $("#model").live("change", function () {
     alert("You choose " + $('#model').val());
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:17:32.753

我认为，如果您不想`page`在用户从下拉列表中选择值时刷新，那么您可以使用`ajax`. `AJAX`用于此目的。如果你谷歌，那么你会发现很多与`AJAX`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T08:18:43.940

如果您不想提交表单，您可以使用 AJAX/jQuery 获取元素。

```
<form method="GET" action="foo.php" onChange="getHouseModel">
  <select name="house_model" id="house_model">
    <option value="">------</option>
    <option value="<?php echo $model1;?>">Model 1</option>
    <option value="<?php echo $model2;?>">Model 2</option>
    <option value="<?php echo $model3;?>">Model 3</option>
  </select>
</form>

<script type='text/javascript'>
   function getHouseModel(){
      var model=$('#house_model').val();
      alert(model);
}
</script> 
```

或者你可以这样写 jquery。所以你不必在标签中调用函数

```
<script type="text/javascript">
    $('#house_model').select(function() {
       var model=$('#house_model').val();
      alert(model);
     });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:15:18.147

在 PHP 中提交之前，无法从表单中获取数据！这是因为在提交表单之前，根本不会调用 PHP 脚本。

如果您想在发送数据之前进行一些验证，您必须使用在客户端浏览器上运行的 javascript。看看 jQuery 库，这很容易：[http ://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

如果您只想使用 PHP，那么您需要将表单分成两个页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T08:16:01.400

您必须使用 ajax 来实现这一点。例如

```
<form method="GET" action="foo.php">
  <select name="house_model" id="house_model">
    <option value="">------</option>
    <option value="<?php echo $model1;?>">Model 1</option>
    <option value="<?php echo $model2;?>">Model 2</option>
    <option value="<?php echo $model3;?>">Model 3</option>
  </select>
</form>

 $("#house_model").live("change", function () {
   //Write the ajax and post the value to server side
    }); 
```

# java - Java NIO isConnectable 总是返回 true

> ID：15676904
> 
> 赞同：0
> 
> 时间：2013-03-28T08:10:16.327
> 
> 标签：java, client-server, nio

我正在使用 Java NIO 做客户端服务器 Java 程序。基本上对于服务器代码，我从[这里](http://www.xinotes.org/notes/note/694/)获取。而对于客户端，我从[这里](http://kramasundar.blogspot.com/2009/06/java-supports-nonblocking-io-since-java.html)拿走了。现在看来还不错。我现在想要实现的是将数据从客户端发送到服务器，服务器将发送回客户端。

但我的逻辑有问题。假设我放了“AMessage”，然后我必须放“BMessage”才能从服务器检索“AMessage”。我做了调试，似乎我`key.isConnectable()`的总是 return `true`。我尝试设置关键兴趣，重新注册它，但我还没有找到任何解决方案。

我试过这个`key.interestOps(0);`，，`myChannel.register(selector, SelectionKey.OP_READ);`但似乎什么也没发生。`isConnectable`仍然返回 true。我发现其他人告知的一些问题说这是本地主机问题。我不知道。但现在我在 localhost 上运行服务器和客户端。有人有什么想法吗？

谢谢 ：）

编辑：这是我的代码的一部分：-

```
if (key.isConnectable()) {
if (myChannel.isConnectionPending()) {
    try{
        myChannel.finishConnect();
    }
    catch(IOException e){
        System.out.println(e);
    }
    System.out.println("Status of finishCOnnect(): " + myChannel.finishConnect() );
    System.out.println("Connection was pending but now is finished connecting.");
}

    ByteBuffer bb = null;
    ByteBuffer incomingBuffer = null;

    Scanner input = new Scanner(System.in);  // Declare and Initialize the Scanner

    while (true) {

        System.out.println("Status isReadable is " + key.isReadable() + " and isWritable is " + key.isWritable() + 
                                            " and isConnectable is " + key.isConnectable());

        readMessage(key); //read if server send data

        //send data to server here
        String inputFromClient = input.nextLine(); //Get the input from client

        System.out.println("debugging after get input...");

        bb = ByteBuffer.allocate(inputFromClient.length()); //Allocate buffer size according to input size

        byte[] data = inputFromClient.getBytes("UTF-8"); //convert the input to form of byte
        bb = ByteBuffer.wrap(data); //wrap string inside a buffer

        myChannel.write(bb); //Write the buffer on the channel to send to the server
        bb.clear();

        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:50:43.193

```
if (key.isConnectable()) {
if (myChannel.isConnectionPending()) {
    try{
        myChannel.finishConnect();
    }
    catch(IOException e){
        System.out.println(e);
    }
    System.out.println("Status of finishCOnnect(): " + myChannel.finishConnect() );
    System.out.println("Connection was pending but now is finished connecting.");
} 
```

这里有几个问题。

1.  `isConnectionPending()`测试是多余的。它必须处于未决状态，否则您将无法获得该事件，但您可能会通过测试它来诱惑普罗维登斯。摆脱这个测试。

2.  您在通话中没有做正确的事情`finishConnect()`。如果`finishConnect()`返回 true ，*则*可以注销`OP_CONNECT`和注册`OP_READ`或其他任何内容。如果它返回false，那就不行了。

3.  如果`finishConnect()`抛出异常，则连接失败，您必须关闭通道。

4.  您调用`finishConnect()`了两次：一次在`try`块中，一次在记录状态时。摆脱第二个调用并使用第一个调用的结果，如果有的话。我将重新组织它以分别记录（a）成功`finishConnect()`，（b）失败`finishConnect()`和（c）异常`finishConnect()`。

5.  你的决赛`System.out.println()`只是三个案例中的两个的谎言。不要告诉自己一些你不知道是真的事情。它只是混淆了图片。如上所述分别记录每个案例。

6.  您假设连接是可读的，而不是测试`isReadable().`

# wpf - 在 LostFocus 上提交更改

> ID：15676905
> 
> 赞同：0
> 
> 时间：2013-03-28T08:10:23.767
> 
> 标签：wpf, xaml, binding

为什么单击另一个`TextBox`不会引发`LostFocus`当前（绑定）的事件，`TextBox`从而提交对数据源的更改？My`UpdateSourceTrigger`没有设置，所以我假设默认情况下 WPF 会在`LostFocus`.

当我使用 TAB 键而不是鼠标单击执行相同操作时，我的更改会正确提交。

**编辑**

我刚刚发现单击`TextBox`出现在同一父容器中的 es 确实会引发`LostFocus`并提交更改，但是当我单击位于屏幕`TextBox`主`ToolBar`屏幕中的 es 时，它似乎显示了这种有问题的行为。

**编辑 2**

尽管我已将 BastiOnWpf 的帖子标记为下面的正确答案，但我找到了同样好的或更好的解决方案来解决此问题。解决方案是简单地设置

```
FocusManager.IsFocusScope="False" 
```

在您`ToolBar`的 XAML 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:18:53.183

问题在于，当单击/聚焦菜单或其内容时，文本框实际上并*没有失去焦点。*这是因为 Toolbar 驻留在另一个 UIContext 中。

您当然可以将 更改`UpdateSourceTrigger`为`PropertyChanged`，但这并不总是可行的解决方法：

以下是解决问题的一些方法： [使用 UpdateSourceTrigger==LostFocus 绑定不会触发 Menu 或 Toolbar 交互](https://stackoverflow.com/questions/5631243/binding-with-updatesourcetrigger-lostfocus-do-not-fire-for-menu-or-toolbar-inte)

这也是为什么绑定工具栏到当前UI的ViewModel不起作用的原因。

# android - 如何将选定的微调器值存储在 sqlite 数据库中？

> ID：15676908
> 
> 赞同：0
> 
> 时间：2013-03-28T08:10:27.820
> 
> 标签：android, database, sqlite, spinner

我想将选定的微调器值存储在 sqlite 数据库中我通过数组适配器给出微调器值以下是我的微调器代码

```
ArrayList<String> incorparray = new ArrayList<String>();
incorparray = new ArrayList<String>();
    incorparray.add("DOB");
    incorparray.add("Incorporation Date");
    incorparray.add("Establishment Date");
ArrayAdapter<String> adapter = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item, incorparray);

            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    incorporation.setAdapter(adapter); 
```

请帮忙！我急需

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:14:35.787

> 我想将选定的微调器值存储在 sqlite 数据库中

因此，首先您需要设置`OnItemSelectedListener()`Spinner 以便能够处理选择事件。然后只需在 onItemSelected() 方法上使用适当的方法执行插入到 SQLite 中。

**例子：**

```
yousSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

   public void onItemSelected(AdapterView<?> parent, View v, int pos, long id) {
      String selectedItem = parent.getItemAtPosition(pos).toString();
      // make insertion into database
   }

   public void onNothingSelected(AdapterView<?> parent) {

   }
}); 
```

其中**parent.getItemAtPosition(pos).toString()**从 Spinner 返回选定的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:13:57.727

在微调器上的选定侦听器上添加集合，然后将选定值存储在项目中。现在使用插入查询将项目的值存储在 sqlite 中。

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

public void onItemSelected(AdapterView<?> parent, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

    item = (String) parent.getItemAtPosition(arg2);
    // ((TextView) parent.getChildAt(0)).setTextColor(0x00000000);

    }

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

}); 
```

# java - 在 Java 中获取按钮输入

> ID：15676909
> 
> 赞同：1
> 
> 时间：2013-03-28T08:10:28.570
> 
> 标签：java, joystick, gamepad

所以我正在编写一个应该使用 6 个游戏手柄作为输入的应用程序。我找到了很多关于名为 JINPUT 的库的文档。但是官方下载链接给了我一个404错误。如果这里有人知道我可以使用的替代方案，那就太棒了。或者知道一个好的下载链接。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:13:06.833

JInput 可以在那里找到：

[http://java.net/projects/jinput](http://java.net/projects/jinput)

您可以使用 SVN 来获取它：

[http://java.net/projects/jinput/sources/svn/show/trunk?rev=252](http://java.net/projects/jinput/sources/svn/show/trunk?rev=252)

您可以使用网络上的一些教程。

# neural-network - 将感知器与之前的输出连接起来？

> ID：15676912
> 
> 赞同：0
> 
> 时间：2013-03-28T08:10:38.267
> 
> 标签：neural-network, theory

由于我在这里获得和研究的帮助，我能够在 C# 中创建一个简单的感知器，其代码如下：

```
 int Input1 = A;
       int Input2 = B;
        //weighted sum
        double WSum = A * W1 + B * W2 + Bias;

        //get the sign: -1 for negative, +1 for positive
        int Sign=Math.Sign(WSum);

        double error = Desired - Sign;
        //updating weights
        W1 += error * Input1 * 0.1; //0.1 being a learning rate
        W2 += error * Input2 * 0.1;
        return Sign; 
```

我在这里不使用 Sigmoid，只得到 -1 或 1。
我有两个问题：
1）我的权重得到 -5 等值是否正确？例如，当输入为 100,50 时，它类似于： W1+=error*100*0.1
2) 我想更深入地创建更多连接的神经元——我想我至少需要两个来为第三个提供输入。第三个将被输入值只是-1..1，这是正确的吗？我的目标是一个简单的模式识别，但到目前为止还不明白它应该如何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:15:17.430

尝试将体重设置为两倍。

另外我认为使用数组要好得多，尤其是在神经网络中，而感知器是唯一的方法。

你将需要一些 for 或 while 循环来实现你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:19:01.017

您的权重值范围从 -Infinity 到 +Infinity 是完全有效的。您应该始终使用实数而不是整数（如上所述，double 可以工作。32 位浮点精度对于神经网络来说已经足够了）。

此外，您应该在每个学习步骤中衰减您的学习率，例如在每次更新后将其降低 0.99 倍。否则，您的算法会在接近最佳值时出现振荡。

如果你想“更深入”，你需要实现一个多层感知器（MLP）。有证据表明，具有简单阈值神经元和多层的神经网络总是具有仅具有 1 层的等价物。这就是为什么几十年前研究界暂时放弃了人工神经网络的想法。1986 年，Geoffrey Hinton 使反向传播算法流行起来。有了它，您可以训练具有多个隐藏层的 MLP。

要解决 XOR 等非线性问题或模式识别等其他复杂问题，您需要应用非线性激活函数。首先看一下逻辑 sigmoid 激活函数。f(x) = 1\. / (1\. + exp(-x))。执行此操作时，您应该将输入和输出值标准化为 [0.0; 1.0]。这对于输出神经元尤其重要，因为逻辑 sigmoid 激活函数的输出正好定义在这个范围内。

[可以在此答案](https://stackoverflow.com/questions/15395835/simple-multi-layer-neural-network-implementation/15591782#15591782)中找到使用数组的前馈 MLP 的简单 Python 实现。

**编辑：**您还需要至少 1 个隐藏层来解决例如 XOR。

# angularjs - 在带有 Angular UI 的 fullCalendar 中使用 gotoDate

> ID：15676918
> 
> 赞同：2
> 
> 时间：2013-03-28T08:11:08.020
> 
> 标签：angularjs, fullcalendar, angular-ui

我已经使用带有 Angular UI 的 FullCalendar 设置了一个日历。它工作正常，我可以很好地切换事件类别，但是每次更新 eventSource 时，日历视图都会设置为当前日期。

我已经尝试使用该`gotoDate`方法，我可以看到它可以工作（它也可以从控制台工作），但几乎是在日历恢复到当前日期之后立即进行的。由于我是 AngularJS 的新手，我可能把它`gotoDate`放在了错误的地方。但我无能为力把它放在别处。

我正在使用一个服务，它返回一堆事件对象并将它们推送到`eventSources`日历元素的 ng-model 中。没什么特别的，在控制器中我有：

```
$scope.eventSources = [];
var promise = UserCalendarEvents.get(groupName);
promise.then(
    function(events) {
        $scope.eventSources.push(events);
        $('#events-calendar').fullCalendar('gotoDate', 2012, 11);
    },
    function(reason) {
        console.log('Error: ' + reason);
    }
); 
```

在这种情况下，将获取并`$scope.eventSources`填充事件。然后将日历视图设置为 2012 年 12 月，之后，几乎立即，视图切换到当前日期。是否是某种 ng-model 的手表重新渲染了 fullcalender，如果是这样，我该如何设置选择的日期？

**更新**：我结束了使用 joshkurz 修复，但是在一个修改版本中，尊重所选视图，即如果用户选择了 basicWeek 并更改源数据，则视图不应更改为例如月视图。这就是我的用户所需要的。

```
 function update() {
        scope.calendar = elm.html('');
        var view = scope.calendar.fullCalendar('getView');
        var m;
        var xtraOptions = {};
        //calendar object exposed on scope
        if(view){
          var viewDate = new Date(view.start);
          if(m !== 'Invalid Date'){
            y = viewDate.getFullYear();
            m = viewDate.getMonth();
            d = viewDate.getDate();
            if(!isNaN(y) && !isNaN(m) && !isNaN(d)){
              xtraOptions = {
                year: y,
                month: m,
                date: d
              };
            }
          }
          view = view.name; //setting the default view to be whatever the current view is. This can be overwritten.
        }
        /* If the calendar has options added then render them */
        var expression, 
            options = { defaultView : view, eventSources: sources };
        if (attrs.uiCalendar) {
            expression = scope.$eval(attrs.uiCalendar);
            // Override defaultView if is set in ui-calendar attribute - OK? 
            if (expression.defaultView) {
                expression.defaultView = view;
            }     
        } else {
            expression = {};
        }
        angular.extend(options, uiConfig.uiCalendar, expression, xtraOptions);
        scope.calendar.fullCalendar(options);

      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:28:25.217

这是日历的错误。你是第一个在 StackOverflow 上发表任何评论的人。荣誉。

有几种方法可以解决这个问题。它是在 github [https://github.com/angular-ui/angular-ui/pull/520](https://github.com/angular-ui/angular-ui/pull/520)上提出的，我们取消了指令如何在手表被触发时重新创建自身，这将阻止这种行为。我相信，如果我们能让这种方法在生产中发挥作用，那将是最好的解决方案。

在那之前，解决方法是从 view.start 字段创建的日期对象中获取当前月份。本月应添加到用于呈现日历的选项中。

下面是新更新函数在 calendar 指令中应该是什么样子的片段。

```
/* update the calendar with the correct options */
        function update() {
          scope.calendar = elm.html('');
          var view = scope.calendar.fullCalendar('getView');
          var m;
          var xtraOptions = {};
          //calendar object exposed on scope
          if(view){
            var d = new Date(view.start);
            m = new Date(view.start);
            if(m !== 'Invalid Date'){
              m = m.getMonth();
              if(!isNaN(m)){
                xtraOptions = {
                  month: m
                };
              }
            }
            view = view.name; //setting the default view to be whatever the current view is. This can be overwritten.
          }
         // console.log(m)
          /* If the calendar has options added then render them */
          var expression,
            options = {
              defaultView : view,
              eventSources: sources
            };
          if (attrs.exCalendar) {
            expression = scope.$eval(attrs.exCalendar);
          } else {
            expression = {};
          }
          angular.extend(options, uiConfig.exCalendar, expression, xtraOptions);
          scope.calendar.fullCalendar(options);
        } 
```

这尚未在 angular-ui CI 服务器上进行适当测试，但它工作正常，因为我目前在生产中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:11:34.883

使用 AngularUI 将 FullCalendar 包装在一个指令中，可以通过 $scope.calendar 访问日历对象。“AngularJS 方式”是为了避免控制器中的直接 DOM 操作。

在您的特定情况下，您将改为：

```
$scope.calendar.fullCalendar('gotoDate', 2012, 11); 
```

AngularUI 确实对 eventSource 和 event 进行了监视，每次更改的长度都会调用更新函数。您可以在此处查看源代码：

[https://github.com/angular-ui/angular-ui/blob/master/modules/directives/calendar/calendar.js](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/calendar/calendar.js)

您可以看到，每次事件模型更改时，都会使用一组新事件重新创建 $scope.calendar 中的日历对象。这就是您的日期更改没有通过的原因 - 正在添加事件，触发更新，您的日期更改进入，整个日历被更改并且您的日期更改丢失。

在不更改 AngularUI 代码的情况下，我会弹出两件事（不是最好的）：

1.  您可以使用 AngularJS 的 $timeout 服务并在加载事件后等待一段时间，日历完成更新，然后调用您的日期更改。

2.  您可以在每次日历对象更改时触发日期更改的范围上添加 $watch：

    [http://plnkr.co/edit/Ww08VX?p=preview](http://plnkr.co/edit/Ww08VX?p=preview)

我在上面创建了那个例子。在 test() 方法中，我只是通过承诺将一些假数据加载到事件中（它们将在 2013 年 3 月添加）然后将日期更改为 2012 年 12 月。我正在观看 $scope.calendar 并且每次它发生变化（指令中触发更新）我重新发送 date 命令。你应该在没有看到新事件进入的情况下被送到 2012 年 12 月，但如果你回到 2013 年 3 月，它们应该在那里。我把手表放在另一个 .then 假设您将使用返回的一些值来动态设置日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:07:12.343

在不更改 Angular-UI 源的情况下解决问题的另一种方法是像这样声明日历：

```
<div ui-calendar="{viewDisplay:viewDisplayHandler,month:monthVal,year:yearVal}" ng-model="eventsArr"></div> 
```

并`viewDisplayHandler`在范围内设置`monthVal`和`yearVal`设置适当的值的功能，以便在整个日历重新创建之后设置日历上的日期：

```
$scope.viewDisplayHandler = function(view) {
    var viewStart = view.start;
    $scope.yearVal = viewStart.getFullYear();
    $scope.monthVal = viewStart.getMonth();
} 
```

这就是我在 GitHub 上发出拉取请求之前解决它的方法；我猜这不是最佳方法，但我已经在生产中使用它一段时间了，它似乎没问题，不需要更改 Angular-UI 的代码。

# android - apk 动作不正常

> ID：15676925
> 
> 赞同：0
> 
> 时间：2013-03-28T08:12:10.420
> 
> 标签：android, button, apk, back

我在导出 apk 时遇到了一个奇怪的问题。当我在 Eclipse 上运行项目时，它工作正常。但是，如果我在删除旧手机后导出 apk 并安装同一部手机，则它不是同一个应用程序。有趣的是，当安装 apk 完成时，我有两个选项 Open 和 Done，当我按下 Open 时，我可以复制前面描述的问题，但是当我选择 Done 时，它​​工作正常。更改是关于后退按钮的。我的代码部分如下：

```
@Override
public void onBackPressed() {
moveTaskToBack(true);
} 
```

如果我不在 Eclipse 上运行项目，此代码将无法正常工作。  

**更新 ：**

问题已解决。我尝试了这个解决方案，它对我有用。

[Android Activity Stack 未按文档中的说明工作 - 未显示任务堆栈中的最后一个活动](https://stackoverflow.com/questions/11006539/android-activity-stack-is-not-working-as-stated-in-the-docs-last-activity-in-t)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:18:57.500

试试这个

```
 @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
        super.onKeyDown(keyCode, event);
            switch(keyCode)
            {

            case KeyEvent.KEYCODE_BACK:

                return true;
            }

            return false;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:17:36.673

清理项目并重建它并使用新创建的apk，我认为它会使你的apk运行良好。这也发生在我身上，我以这种方式修复它

# sql - 如何在 SQL Server 中减去两个日期时间以获得精确的十进制结果

> ID：15676931
> 
> 赞同：0
> 
> 时间：2013-03-28T08:12:42.080
> 
> 标签：sql, sql-server

我知道`datediff`只给你一个整数，有没有一种替代方法可以为你提供两个日期时间之间差异的十进制结果？

以下内容是否足够/准确：

```
CAST(DateA- DateB AS decimal(7 , 2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:19:40.193

不，但是您可以确定它返回的 int 的粒度 - 它可以是年、季、月、周、日、小时、分钟、秒、毫秒……我认为这就是全部。

这是一个以秒为单位返回差异然后转换为分钟、小时等的示例：

```
declare @start datetime
declare @end datetime

set @start = '2013-01-01 00:00:00'
set @end = getdate()

declare @deltaSeconds int

set @deltaSeconds = DATEDIFF( ss, @start, @end )

select @deltaSeconds Seconds, @deltaSeconds / 60.0 [Minutes], @deltaSeconds / 60.0 / 60.0 [Hours], @deltaSeconds / 60.0 / 60.0 / 24.0 [Days] 
```

# android - 我想将表单中的用户输入与查询的数据进行比较。但我希望它不区分大小写。我怎么做？

> ID：15676935
> 
> 赞同：0
> 
> 时间：2013-03-28T08:12:53.777
> 
> 标签：android

/**将 txtOrigin 和 txtDestination 的值与查询变量进行比较，假设它匹配*/

```
 if((origin.getText().toString().matches(queryOrigin))
                        && (destination.getText().toString().matches(queryDestination)))
                {
                //proceed to route found layout
                    Intent openRouteFound = new Intent("com.icommute.feu.RouteFound");
                    startActivity(openRouteFound);
                }

            /**compares the values of txtOrigin 
            and txtDestination to the query 
            variables assuming it doesn't match*/
                else
                {
                //proceed to no routes found layout
                    Intent openNoRoute = new Intent("com.icommute.feu.NoRoute");
                    startActivity(openNoRoute);
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T08:16:18.843

请尝试：

```
 if((origin.getText().toString().equalsIgnoreCase(queryOrigin))
      && (destination.getText().toString().equalsIgnoreCase(queryDestination)))
 {
    ...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:18:37.470

使用 .equalsIgnoreCase() 方法，例如：

```
if((origin.getText().toString().equalsIgnoreCase(queryOrigin))
                    && (destination.getText().toString().equalsIgnoreCase(queryDestination)))
            { 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:17:16.373

试试这个

`origin.getText().toString().matches("(?i)" + queryOrigin)`.

这将使正则表达式`CASE_INSENSITIVE`

# forms - 提供补救工具提示的方法

> ID：15676943
> 
> 赞同：0
> 
> 时间：2013-03-28T08:13:29.347
> 
> 标签：forms, remedy

我们可以使用补救开发人员创建许多字段和表单。我只是想知道是否有任何选项可以为这些字段提供工具提示，以便用户可以更好地理解各个字段。

例如：如果有一个字段说**价格**，说工具提示，如**接受的十进制值**或合理的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:58:07.613

尝试为小工具提示编辑字段的“替代文本”属性。

如果您想要一个更大的，例如概览控制台表等，请运行 AL 日志并查看哪个 AL 打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T09:30:11.753

悬停选项适用于 ARS 7.6 或更高版本，以下是 BMC 文档为您提供的一些信息：

**使用消息操作创建工具提示**

工具提示是为响应用户对屏幕上的对象的操作而显示的简短信息消息。工具提示通常用于提供菜单项、工具栏按钮或其他对象的描述。

在 AR System 中，工具提示可以应用于表格、附件、字段标签或字段数据。

可以通过将鼠标悬停在表单中的某个区域上或通过单击按钮等对象来显示工具提示。对于表格字段，可以通过将鼠标悬停在一行上来显示工具提示。工具提示显示被悬停的行的值，即使该行不是当前选定的行。

当通过悬停出现工具提示时，当鼠标移到工具提示的边界之外时，它会关闭。当通过单击出现工具提示时（例如，当您单击按钮时出现工具提示时），当您单击工具提示边框外的任何位置时，它会关闭。

也可以通过按 Escape 键来关闭工具提示。工具提示可以包括 URL 链接，可以通过设置字段操作添加。

**实施工具提示**

工具提示通过两种类型的 AR System 功能实现：

*   悬停事件
*   活动链接 消息操作

# java - Java，Spring，还记得我 Login.jsp 页面的选项吗？

> ID：15676945
> 
> 赞同：1
> 
> 时间：2013-03-28T08:13:34.053
> 
> 标签：java, spring, session-cookies

实际上我正在开发基于 Spring Annotation 的应用程序。在那个 Login.jsp 文件中是他们的。

当用户输入详细信息并单击记住我复选框时，cookie 会记住浏览器相同的 gmail 服务（留在）。

所以我在谷歌搜索，我发现 Spring 也提供记住我的功能，但它需要支持的 Jar 文件。

他们是在浏览器上存储 Cookie 的简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:16:00.383

使用spring-mvc 的其中一个`@SessionAttribute`或`@CookieValue`注释。阅读更多关于它的[弹簧手册](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-sessionattrib)

# svn - 只提交 svn 合并信息

> ID：15676948
> 
> 赞同：5
> 
> 时间：2013-03-28T08:13:37.273
> 
> 标签：svn, merge, mergeinfo

我们正在合并从主干到分支的更改。当我们这样做时，合并信息会被记录下来。

由于分支中可能还有其他更改，是否有一种安全的方法可以仅提交因合并而受影响的文件（假设没有其他更改）以及合并属性/信息？

" 假设我想将修订版 'r1' 从主干合并到分支。我对 'r1' 进行从主干到分支的合并。现在对于 'r1'，在分支文件夹中记录合并信息。如果我做svn diff 在分支中，它显示“。” "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:22:38.730

如果您使用的是像 TortoiseSVN 这样的 SVN 客户端，在正常合并中，`mergeinfo`将自动更新为根文件夹的文件夹属性，并在文件提交列表期间列出属性更改的文件夹。

如果这不是自动提交的，那么如果您使用 TortoiseSVN 客户端，您甚至可以通过以下步骤手动执行此操作（假设`root`作为父级，`mytask`作为当前任务分支，`subtask`作为已经从当前分支合并的返回分支，并且`programs`作为每个分支中的代码文件夹）：

1.  右键单击`programs`分支工作副本上的文件夹，`mytask`然后选择选项`TortoiseSVN-->Properties`。
2.  在新窗口中，如果您之前已经`mergeinfo`记录过，那么它将列出`svn:mergeinfo`具有类似于以下值的值的属性：

    > 根/程序：1-489
    > 
    > 根/任务/我的任务/任务/子任务/程序：380-410

    然后您可以执行以下步骤：

    a) 通过选择 svn:mergeinfo 项目在窗口中选择选项 Edit-->Advanced 并更新您要提交的合并信息，然后单击“确定”。

3.  在新窗口中，如果您没有任何以前`mergeinfo`的 ，那么您可以执行以下步骤：

    a) 选择选项`New-->Advanced`。

    b)`svn:mergeinfo`从下拉列表中选择，`mergeinfo`在值文本框中添加适当的值并保存。

4.  通过单击文件夹执行 SVN 提交，`programs`它将列出`programs`要提交的文件中的文件夹，仅更改属性，您可以提交它。

**另一方面**

如果您只想在从父级到工作副本的合并过程中提交合并的文件，并保持本地修改的其他文件未提交，那么，没有直接的方法可以实现这一点。间接方法是保留任务分支 ( ) 的两个单独的工作副本（假设为 copy1 和 copy2 `mytask`）并执行以下步骤：

1.  `copy1`正在进行所有本地更改，您可以将其搁置一段时间
2.  SVN 签出`copy2`您分支的新工作副本。
3.  合并来自你父母的更改`copy2`并提交。这可确保您仅将合并的更改提交到服务器，并满足`mergeinfo`您的所有需求。
4.  然后转到您`copy1`的 SVN 更新，它将从服务器获取新的合并更改到此工作副本。（如果有一些文件在合并过程中更新并且在本地更改过程中也被您更改，那么在此 SVN 更新期间它将发生冲突）。解决冲突，然后您可以继续进行本地更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T08:09:21.213

这是一个老话题，但是，因为我也需要类似的东西并且在 stackoverflow 上没有找到任何东西，所以这是我的看法：使用 'svn commit --depth=empty folder_with_mergeinfo merge_files'。

就我而言，我正在合并两个分支，如果我尝试“svn ci branch”，它将尝试提交在该分支下修改的所有内容。使用 --depth=empty 可确保仅提交文件夹合并信息和您想要的文件。

# sql-server - SSIS包中的日期格式问题日转年，年转日

> ID：15676952
> 
> 赞同：1
> 
> 时间：2013-03-28T08:13:49.883
> 
> 标签：sql-server, ssis

我正在尝试通过包`datetime`在 SQL Server 的数据类型列中插入日期值。`SSIS`

在源 *. `csv`文件格式为`dd-mm-yy`.

当我手动运行 SSIS 包时，没有错误。.csv 文件`DD-MM-YY`中的日期格式以格式成功插入 SQL Server 数据库`DD-MM-YYYY`。

但是，当我通过 SQL Server 代理中的作业运行相同的包时，它会转换为不正确的日期格式，因为 DAY 转换为 YEAR，YEAR 转换为 DAY。

例如，如果 .csv 文件中的日期是`15-03-13`(DD-MM-YY)，它将被插入为`13-03-2015`.

尝试了很多以在数据库中以正确格式获取日期，但都是徒劳的。

请建议如何解决此问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:55:07.610

示例如何做，示例数据：

![在此处输入图像描述](../Images/20be0f63604b792681b6ac94f5aadf8f.png)

1.  您需要将列转换为字符串：

![在此处输入图像描述](../Images/c12185023e20dcd341d5b11af0f34ae1.png)

2.然后转换为 Ms Sql 日期格式：

![在此处输入图像描述](../Images/fe128a21afcdb2ddbc081701d7a6b536.png)

3.派生列代码：

`SUBSTRING([Copy of Datee],7,2) + "-" + SUBSTRING([Copy of Datee],4,2) + "-" + SUBSTRING([Copy of Datee],1,2)`

`(DT_DATE)(SUBSTRING([Copy of Datee],7,2) + "-" + SUBSTRING([Copy of Datee],4,2) + "-" + SUBSTRING([Copy of Datee],1,2))`

结果：

![在此处输入图像描述](../Images/40b66a660cbeb8bc463fcd1f56bae56a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:09:10.623

在派生列中，您必须编写：

```
DateReceived == "" ? NULL(DT_DATE) : (DT_DATE)((LEN(RTRIM(DateReceived)) == 10 ? SUBSTRING(DateReceived,7,4) : ("20" + SUBSTRING(DateReceived,7,2))) + "-" + SUBSTRING(DateReceived,4,2) + "-" + SUBSTRING(DateReceived,1,2)) 
```

# visual-studio-2010 - 如何在 VS 中使用“查找和替换”将 \t 插入代码中

> ID：15676953
> 
> 赞同：1
> 
> 时间：2013-03-28T08:13:50.673
> 
> 标签：visual-studio-2010, replace

是否可以在 Visual Studio 中使用“查找和替换”插入`\t`代码？替换为`\t`puts 4 个空格并替换为`\\t`puts `\\t`。（我正在尝试运行正则表达式来格式化我的“字符串”..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:47:19.000

不知道您的问题的确切答案。但是你可以尝试这样的事情。

1.  替换为`foobart`第一个。
2.  再次使用 find 和 replace 替换`foobar`为`\`.

# asp.net - 如何在asp.net中编写我自己的正则表达式

> ID：15676956
> 
> 赞同：-3
> 
> 时间：2013-03-28T08:13:56.273
> 
> 标签：asp.net, regex, validation

在 asp.net 中，我必须验证文本框控件是否以“.aspx”结尾，否则显示错误消息请指导我如何为此条件创建自定义正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:56:52.730

如果您对使用 RegEx 很执着，您可以尝试以下方法：

```
private bool ValidateFilename(string input)
{ 
    RegEx r = new RegEx(@".*?\.aspx$");
    return r.IsMatch(input);
} 
```

然而，RegEx 不一定是这种情况下的最佳选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T08:15:32.640

您可以只取最后 5 个字符并检查它们，您不需要正则表达式......

（在这样做之前检查长度......）

这是正则表达式：

> `".*?\.aspx$"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T08:17:03.147

您不必使用正则表达式，但如果您真的想要，请尝试：

```
MatchCollection matches = Regex.Matches(TextBox1.Text, ".*?\.aspx$"); 

                string[] var_matches = matches.Cast<Match>()
                                         .Select(match => match.Value)
                                         .ToArray();

if (var_matches.Length > 0)
{
   // do stuff
} 
```

编辑

如果您想使用**asp:RegularExpressionValidator**，请尝试：

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1"  ValidationExpression=".*?\.aspx$" ControlToValidate="TextBox1" 
    runat="server" ErrorMessage="Error!"></asp:RegularExpressionValidator> 
```

# asp.net-mvc-3 - 视图（模型）与视图（“视图名称”，模型）

> ID：15676959
> 
> 赞同：0
> 
> 时间：2013-03-28T08:14:11.897
> 
> 标签：asp.net-mvc-3

两个重载之间的基本区别是什么`View(model)`，`View("viewName", model)`如果我的操作名称与视图名称相同。

其中哪一个更适合用于使代码更清晰？有性能差异吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:28:32.553

我知道应该没有任何区别，这两种方法只是重载。

这是来自 MVC3 代码库的源代码 -

```
 protected internal ViewResult View() {
        return View(null /* viewName */, null /* masterName */, null /* model */);
    }

    protected internal ViewResult View(object model) {
        return View(null /* viewName */, null /* masterName */, model);
    }

    protected internal ViewResult View(string viewName) {
        return View(viewName, null /* masterName */, null /* model */);
    }

    protected internal ViewResult View(string viewName, string masterName) {
        return View(viewName, masterName, null /* model */);
    }

    protected internal ViewResult View(string viewName, object model) {
        return View(viewName, null /* masterName */, model);
    }

    protected internal virtual ViewResult View(string viewName, string masterName, object model) {
        if (model != null) {
            ViewData.Model = model;
        }

        return new ViewResult {
            ViewName = viewName,
            MasterName = masterName,
            ViewData = ViewData,
            TempData = TempData
        };
    } 
```

在内部，如果`viewName`没有通过，MVC 会使用`ControllerContext`.

# css - 合并div元素的两个css类

> ID：15676961
> 
> 赞同：3
> 
> 时间：2013-03-28T08:14:15.360
> 
> 标签：css, html

我有以下 css 类并想合并为一个，

```
.classA {
  height: 500px;
  width: 800px;
}

.classB {
 height: 800px;
}

.classB > div {
 xxxx
 yyyy
}

.classA > div {
 xxxx
 yyyy
} 
```

这里 'ClassA > div' 和 'classB > div' 具有相同的属性。所以我需要把它作为单个类应用到 div 元素。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:15:53.160

使用逗号：

```
.classA > div, .classB > div {
 xxxx
 yyyy
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:16:38.187

使用`,`.

```
ClassA > div , classB > div { /* css rules */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T08:16:12.593

这样做：

```
.classA > div, .classB > div {
    xxxx
    yyyy   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T08:18:22.920

```
.classB > div, 
.classA > div 
{
   xxxx
   yyyy
} 
```

只需使用逗号

# python - 快速排序 cType 数字数组

> ID：15676962
> 
> 赞同：0
> 
> 时间：2013-03-28T08:14:26.117
> 
> 标签：python, ctypes, quicksort

我正在尝试在 Python 3 中的整数 ctypes 数组上实现几个排序方法，但似乎无法弄清楚 Quicksort 方法。我相信我的大部分代码都是正确的，但我只是错过了一个愚蠢的陈述。现在，当我尝试打印返回的数组时，我得到的只是一个“NoneType”对象。

非常感谢。

```
#Quicksort Algorithm
def quicksort(list):
    n = len(list)
    return recquick(list, 0, n-1)

#Recursive Quicksort Function
def recquick(list, first, last):
    #Base Case
    if first >= last:
        return
    else:
        #Save pivot value
        pivot = list[first]

        pos = partseq(list, first, last)

        #Repeat the process on the two subsequences
        recquick(list, first, pos-1)
        recquick(list, pos+1, last)

#Partitions subsequence using first key as pivot
def partseq(list, first, last):
    #Save pivot value
    pivot = list[first]

    #Find pivot position and move elements around the pivot
    left = first + 1
    right = last
    while left <= right:
        #Find the first key larger than the pivot
        while left < right and list[left] < pivot:
            left += 1

        #find the last key in the sequence that is smaller than the pivot
        while right >= left and list[right] >= pivot:
            right -= 1

        #Swap the two keys
        if left < right:
            tmp = list[left]
            list[left] = list[right]
            list[right] = tmp

        #Put the pivot in the proper position
        if right != first:
            list[first] = list[right]
            list[right] = pivot

        #Return index position of the pivot value
        return right 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:32:37.950

您的外部 while 循环在`partseq`. right 和 pivot 的交换应该只在 while 循环之外发生一次。return 语句也应该在 while 之外

同样基于[这个链接](http://www.cise.ufl.edu/~ddd/cis3020/summer-97/lectures/lec17/sld002.htm)，我对算法做了一些小的调整

*   `left`开始于`first`
*   第一个内部while循环运行到`list[left] <= pivot`，第二个内部while循环运行到`list[right] > pivot`

> ```
> #Quicksort Algorithm
> def quicksort(list):
>     n = len(list)
>     return recquick(list, 0, n-1)
> 
> #Recursive Quicksort Function
> def recquick(list, first, last):
>     #Base Case
>     if first >= last:
>         return
>     else:
>         #Save pivot value
>         pivot = list[first]
> 
>         pos = partseq(list, first, last)
> 
>         #Repeat the process on the two subsequences
>         recquick(list, first, pos-1)
>         recquick(list, pos+1, last)
> 
> #Partitions subsequence using first key as pivot
> def partseq(list, first, last):
>     #Find pivot position and move elements around the pivot
>     pivot = list[first]
> 
>     left = first 
>     right = last
>     while left<right: 
>         #Find the first key larger than the pivot
> 
>         while left < right and list[left] <= pivot:
>             left += 1
> 
>         #find the last key in the sequence that is smaller than the pivot
>         while right >= left and list[right] > pivot:
>             right -= 1
> 
>         #Swap the two keys
>         if left < right:
>             tmp = list[left]
>             list[left] = list[right]
>             list[right] = tmp
> 
>     #Put the pivot in the proper position
>     #right to left
>     if right != first:
>         list[first] = list[right]
>         list[right] = pivot
> 
>     #Return index position of the pivot value
>     return right 
> ```

结果

```
>>> import try1
>>> a=[1,2,3,4,5,6,]
>>> try1.quicksort(a)
>>> a
[1, 2, 3, 4, 5, 6]
>>> a=[6,5,4,3,2,1,]
>>> try1.quicksort(a)
>>> a
[1, 2, 3, 4, 5, 6]
>>> a=[1]
>>> try1.quicksort(a)
>>> a
[1]
>>> a=[]
>>> try1.quicksort(a)
>>> a
[]
>>> a=[43,76,9,10,1,15,62,]
>>> try1.quicksort(a)
>>> a
[1, 9, 10, 15, 43, 62, 76] 
```

# string - 用于解析/检索在另一个字符串/匹配之后找到的字符串的 Shell 脚本

> ID：15676969
> 
> 赞同：0
> 
> 时间：2013-03-28T08:14:46.713
> 
> 标签：string, parsing, shell, sed

shell 脚本将传递一个参数字符串。我要解析的键/值的位置可能会随着时间而改变，即它可能随时出现在另一个键之前或之后，因此在两个键之间进行解析不是一种选择。

我希望从这样的字符串中解析域密钥：

```
maxpark 0 maxsub n domain sample.foo maxlst n max_defer_fail_percentage user oli force no_cache_update 0 maxpop n maxaddon 0 locale en contactemail 
```

键是“域”，值是“sample.foo”。域密钥可以有多个“.”。在其中，所以我需要获取整个域密钥。

我不是最擅长正则表达式，但我想使用“sed”是我需要做的。

我正在使用 $* 访问这个完整的字符串，如果我可以通过访问 $DOMAIN 来简单地引用密钥，那就太好了，但是因为我唯一的选择是基于位置访问 $3，并且位置可能会改变，那不是一个选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:00:30.077

使用 PERL 解决了这个问题。

```
#!/usr/bin/perl -w

use strict;

my %OPTS = @ARGV;

open(FILE, "</var/named/$OPTS{'domain'}.db") || die "File not found";
my @lines = <FILE>;
close(FILE);

my @newlines;
foreach(@lines) {
   $_ =~ s/$LOCAL_IP/$PUBLIC_IP/g;
   push(@newlines,$_);
}

open(FILE, ">/var/named/$OPTS{'domain'}.db") || die "File not found";
print FILE @newlines;
close(FILE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:02:46.817

如果你有 perl，只需使用你的 shell 脚本中的这一行。

```
domain=$( echo $* | perl -ne '/domain\s([^\s]+)\s/ and print "$1"' ) 
```

或者，如果您只想这样做`sed`：

```
domain=$( echo $* | sed 's/.*\<domain \([^ ]\+\).*/\1/' ) 
```

# php - fileinfo 不只限制 pdf

> ID：15676971
> 
> 赞同：0
> 
> 时间：2013-03-28T08:15:02.450
> 
> 标签：php, fileinfo

我正在使用以下脚本来验证上传的文件是否为 pdf 以及是否使用 phpmailer 发送。它发送电子邮件，但没有附件。此外，它还允许我附加非 pdf 文件。请帮忙。

```
ob_start();
require("class.phpmailer.php");

if(isset($_FILES['upload']['tmp_name'])){
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime=finfo_file($finfo, $_FILES['upload']['tmp_name']);
if($mime=='application/pdf'){

$message = "some message";
$mail = new PHPMailer();
$mail->From     = ('sample@youdomain.net');
$mail->AddAddress=('sample@youdomain.net');
$mail->Subject  = "Submitted files";
$mail->Body     = $message;
$mail->WordWrap = 50;

foreach($_FILES['upload']['tmp_name'] as $upload) 
if(!empty($upload)) {
$mail->AddAttachment($upload);
}
$mail->Send();

header("Location: thankyou.php");
exit();     
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:21:55.280

目前您有：

```
if( ... ) { 
    ...
    if($mime=='application/pdf') {
    }
}
// some code you want to be executed
// only if the mime type is application/pdf 
```

但你想要：

```
if (...) {
  ..
  if ($mime=='application/pdf') {
        // place the code you want to be executed
        // only if the mime type is application/pdf
        // here - before the closing }
    }
} 
```

# ruby-on-rails - 为什么从另一个分支创建的分支与父分支不同？

> ID：15676974
> 
> 赞同：1
> 
> 时间：2013-03-28T08:15:14.257
> 
> 标签：ruby-on-rails, git

所以我有一个分支`develop`，并从中创建了一个新分支`git checkout -b syntax_highlight`。

问题是，当我去我的新分支时，新分支中`Gemfile`的我与父分支不同。

就像我`Gemfile`在后台打开的一样，当我切换分支时我可以看到它发生了变化。

然而，没有任何上演。

```
$ git checkout syntax_highlight
Already on 'syntax_highlight'
$ git rebase develop
Current branch syntax_highlight is up to date.
$ git checkout develop
Switched to branch 'develop'
$ git checkout syntax_highlight
Switched to branch 'syntax_highlight'
$ git checkout develop
Switched to branch 'develop'
$ git status
# On branch develop
nothing to commit (working directory clean)
$ git checkout syntax_highlight
Switched to branch 'syntax_highlight'
$ git status
# On branch syntax_highlight
nothing to commit (working directory clean) 
```

对于我的生活，我无法弄清楚为什么我的存在差异，`Gemfile`这让我想知道是否还有 git 没有告诉我的其他差异。

**编辑 1**

在两个分支上运行后`git log`，您将看到两者都有相同的提交，只是该`syntax_highlight`分支有 1 个最近的提交 - 这是有道理的，因为那是我当前正在处理的分支。

```
$ git log
commit a0b320a001cb24f42e2cf0f3dfee38cfd53e2290
Author: marcamillion
Date:   Thu Mar 28 02:27:08 2013 -0500

    Got the HABTM counter_cache working.

commit 64b73338c34259f02daa2ed943bd5d47ac5bacc0
Author: marcamillion
Date:   Mon Mar 25 03:16:43 2013 -0500

    Added the basic sidebar layout.

commit 7989813e9a379e480500f12ee01367967b791cd4
Author: marcamillion
Date:   Sun Mar 24 14:36:33 2013 -0500

    Got the basics of the sidebar layout, along with the navigational bar listing useful tags.

commit 1f0feea2f6db36e5c89aaf83c51cfc3b4bdbf01f
Author: marcamillion
Date:   Sun Mar 24 02:48:20 2013 -0500

    Installed bullet gem.

##

$ git checkout syntax_highlight
Switched to branch 'syntax_highlight'
$ git log
commit cccc5cd3350dbcd751e1ceccd0d4865948fd6993
Author: marcamillion
Date:   Thu Mar 28 03:02:20 2013 -0500

    Installed pygments, but haven't been able to test successfully yet.

commit a0b320a001cb24f42e2cf0f3dfee38cfd53e2290
Author: marcamillion
Date:   Thu Mar 28 02:27:08 2013 -0500

    Got the HABTM counter_cache working.

commit 64b73338c34259f02daa2ed943bd5d47ac5bacc0
Author: marcamillion
Date:   Mon Mar 25 03:16:43 2013 -0500

    Added the basic sidebar layout.

commit 7989813e9a379e480500f12ee01367967b791cd4
Author: marcamillion
Date:   Sun Mar 24 14:36:33 2013 -0500

    Got the basics of the sidebar layout, along with the navigational bar listing useful tags.

commit 1f0feea2f6db36e5c89aaf83c51cfc3b4bdbf01f
Author: marcamillion
Date:   Sun Mar 24 02:48:20 2013 -0500

    Installed bullet gem. 
```

**编辑 2**

这是`git diff`一个特定的结果：

```
$ git diff-tree --no-commit-id --name-only -r cccc5cd3350dbcd751e1ceccd0d4865948fd6993
Gemfile
Gemfile.lock
app/assets/stylesheets/pygments.css.erb
app/views/home/index.html.erb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:21:39.607

我不知道你为什么期望它是一样的（除非你确定你从未提交过文件）。你可以在两个分支上运行 git log 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:11:12.567

您来自 cccc5cd3350dbcd751e1ceccd0d4865948fd6993 的提交已经更新了 Gemfile...所以期待看到您的 Gemfile 更新...当您从开发中重新设置基准时，您只需在开发的任何更改之上重新应用您的提交（无）。您的 syntax_highlight 分支的唯一更改是上面提到的更新 Gemfile 的提交。这有意义吗？

# java - 连接池、jdbc和jndi的区别

> ID：15676990
> 
> 赞同：22
> 
> 时间：2013-03-28T08:16:07.737
> 
> 标签：java, jdbc, jndi

我需要知道我对上述内容的理解是否正确。

在连接池中，您可以使用 java.sql.Datasource 设置多个连接。

在 jdbc 中，我们直接指定连接 url 和 oracle.jdbc.driver.OracleDriver 并且它始终是一个连接，另一个请求必须等待连接完成处理。

使用 JNDI，它类似于直接 jdbc，我们通过名称引用 jdbc 设置，这样我们就可以在应用程序服务器中指定连接 url 和其他设置，而不是将它们绑定到应用程序，对吧？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-28T08:20:43.003

嗯，这是两个不同的东西。

JDBC 是 Java 数据库连接 API，而 JNDI 是 Java 命名和目录接口 API。

这里的主要内容是，在 JNDI 目录中，您实际上存储的是 JDBC 数据源，因此，您只是使用 JDBC 通过 JNDI 查找来获取连接。

简而言之：JDBC 是数据库领域，JNDI 允许您将对象存储在可以是本地、远程的虚拟上下文（目录）中（实现细节通常无关紧要）。

您可以通过名称访问此上下文，获取存储的对象，这有助于在不同模块之间共享内容。

应用程序服务器通常具有用于在不同应用程序之间共享全局对象的 JNDI 上下文，连接池恰好是为什么通过 JNDI 共享是好的（定义 1 个连接池，在多个 web 应用程序之间共享）的最明显示例之一。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T08:19:55.680

*   [连接池](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html)
*   [JDBC](http://docs.oracle.com/javase/tutorial/jdbc/)
*   [JNDI](http://docs.oracle.com/javaee/6/tutorial/doc/bncji.html)

我知道当你第一次学习 Java 时所有的首字母缩略词都令人望而生畏，但要习惯它，花很多时间阅读 .. 尤其是来自 Java/Oracle 的官方资源