# StackOverflow 问答 15004000-15004999

# linux - 在 Linux 构建服务器上从 Windows 中的 Eclipse 构建

> ID：15004005
> 
> 赞同：4
> 
> 时间：2013-02-21T13:53:20.000
> 
> 标签：linux, eclipse, build, clearcase, gnu

设置： - 在 Windows 7 上运行的 Eclipse Juno - 位于 Linux 构建服务器上的 GNU 工具链 - 可从 Windows 7 机器和 Linux 构建服务器访问的 ClearCase 存储库

我想在 Windows 中从 Eclipse 打开一个 C++ 项目，并能够在远程 Linux 构建服务器上构建该项目。在 2013 年的 Eclipse 开发状态下，实现这一目标的最佳方式是什么？

（有一些过时的问题，部分解决方案。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:14:36.050

您需要直接在 linux 路径上创建快照视图，这可以通过 samba 实现：您的 Windows 服务器将用于`view_server.exe`，但您的快照视图的根目录将在 Linux 上。

这给您留下了从 Windows 会话中从 Linux 执行 gnu 工具集的问题。它在这个[2011 线程](http://www.eclipse.org/forums/index.php/mv/tree/63588/#page_top)中进行了讨论。

> 基本上`Remote Builder`为托管构建项目添加了一个新的“”选项。
> 类似于`Internal Builder`，但它会通过 SSH 或用户选择的任何协议调用编译命令。

这将是一个 RMB（远程托管构建），如“[远程构建](http://eclipsebook.in/c-cpp-development/building-code/remote-build/)”中。

# css - 取消现有网站的样式

> ID：15004009
> 
> 赞同：1
> 
> 时间：2013-02-21T13:53:24.947
> 
> 标签：css, styling

我正在学习 CSS，并希望自定义一个由我的供应商提供的预先存在的开箱即用的 cookie 切割器 CSS 样式网站。

有没有办法可以删除链接在 head 标签中的 css 文件，以便我可以轻松地删除/取消整个页面的样式？

我正在阅读有关 reset.css、Normalize.css 和 CSS 重构工具的帖子，不确定它们是否是正确的工具。任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:56:33.267

如果您使用 Firefox，我建议安装 Firebug，以便您可以轻松查看不同的样式表以及它们的用途。从那里删除`<link rel="stylesheet" href="filename.css">`具有您尝试剥离并重新开始的样式的元素。创建您自己的文件并将其重新插入到`<head>`所述站点中。

通过你的问题，这就是我能想象的你想要完成的全部 - 如果我误解了你，请原谅我..

这是下载 firebug 的链接：[https ://getfirebug.com/downloads](https://getfirebug.com/downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:56:28.610

只需删除该部分中的标记，CSS 应该不再存在，前提是所有 CSS 实际上都在 CSS 文件中而不是内联。

# javascript - 在 AJAX 加载的部分视图 (MVC4) 上使用自动完成 (Jquery)

> ID：15004010
> 
> 赞同：1
> 
> 时间：2013-02-21T13:53:25.490
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-4, jquery-autocomplete

我有一个创建项目模型的视图，其中包含（除其他外）公司相关数据表。

我添加了一个执行 AJAX 调用以检索局部视图并将其添加到表中的按钮：

```
$("#addCompanyRoleProject").click(function () {
        cache: false,
        $.get('CompanyRoleProjectEntryRow', function (result) {

                $("#companyTable").append(result); // Add the row to the table

        }, "html").done(function (result) { 

            });

            return false;
        }); 
```

部分视图是一个 < tr >，其中一个 < td > 有一个输入字段：

```
<input class="company-role-project-company" type="text" data-containerPrefix="@ViewData["ContainerPrefix"]" /> 
```

我希望 ajax 接收的部分视图中的输入字段是自动完成（[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)），以便用户能够从每个 < input > 的每行的一组选项中进行选择桌子。

我似乎无法在主视图中访问我的 AJAX 调用中的对应字段。我尝试在成功和完成功能上使用“filter()”和“find()”。

我可以将我的 javascript 代码放在部分视图中，但它会被复制，更不用说可能的 ID colisions =\

关于如何实现这一目标的任何想法？

**编辑：**

我相信我的观点中正确引用了所有内容：

```
@section Scripts {
    @Styles.Render("~/Content/themes/base/css")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    @Scripts.Render("~/bundles/jqueryval")

    <<<< My JS code is here >>>>

} 
```

在我页面的源代码中，我可以看到：

```
<script src="/Scripts/jquery-1.7.1.js"></script>
<script src="/Scripts/jquery-ui-1.8.20.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

**编辑2：**

在将结果附加到表后，我遵循了 Darin Dimitrov 的建议并将其添加到 ajax 成功回调中：

```
$('input.company-role-project-company', result).autocomplete({
    ...define source etc...
}); 
```

但是当我在输入字段中输入内容时，它的行为就像一个常规文本字段......在我使用 ajax 调用的过程中是否有问题：请求部分视图，将其附加到表中，使其成为自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:03:37.087

将新的部分标记附加到 DOM 后，在 AJAX 成功回调中尝试这样的操作：

```
$('input.company-role-project-company', result).autocomplete({
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:03:52.690

我最终这样做了：

```
 // Add entry to table
    $(function () {
        $("#addItemButton").click(function () {
            cache: false
            $.get('URL.......', function (template) {
                $('#table> tbody:last').append(template);
            });
            return false;
        });
    });

   $(".the-class-used-in-the-desired-field-from-partial-view").live("click", function () {
        $(this).autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "URL.........", type: "GET", dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { ....... };
                        }))
                    }
                })

            },
            minLength: 1,
            select: function (event, ui) {

                ... Do some magic ...
            }
        });
    }); 
```

IE，我在 AJAX 之外用 .live 函数绑定了自动完成功能。可能不是最好的方法，但到目前为止，它可以按我的意愿工作，用于多个条目。

无论如何，感谢 Darin Dimitrov 为我指明了正确的方向

```
$('input.company-role-project-company', result) 
```

# java - JSF 中值的逻辑

> ID：15004011
> 
> 赞同：0
> 
> 时间：2013-02-21T13:53:27.963
> 
> 标签：java, jsf-2

我在 JSF 2.0 中有一个简单的问题，我需要建议什么是更好的解决方案。所以，在我的 .xhtml 页面上有一个组件，它有 2 个值：是和否。

```
<h:outputLabel id=v1 value="#{someValue}"/>
<f:selectItem itemValue="0" itemLabel="#{msg['label.no']}" />
<f:selectItem itemValue="1" itemLabel="#{msg['label.yes']}" /> 
```

我想要完成的是根据 outputLabel 获取 f:select 的默认值。例如：如果 outputLabel 获取值：业余而不是默认值 f:selectItem 为“是”，否则为“否”默认值。在支持 bean 中使用一些逻辑还是通过在 xhtml 页面上呈现更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:10:08.917

您需要在输入组件属性后面的`value`属性中设置它。您没有显示完整的代码，但如果它是`<h:selectOneRadio>`这样的

```
<h:outputLabel for="foo" value="#{bean.label}" />
<h:selectOneRadio id="foo" value="#{bean.value}">
    <f:selectItem itemValue="0" itemLabel="#{msg['label.no']}" />
    <f:selectItem itemValue="1" itemLabel="#{msg['label.yes']}" />
</h:selectOneRadio> 
```

那么你应该设置`#{bean.value}`in bean的（post）构造函数。完整的图片还不清楚，所以这里是一个基本的启动示例，而不是一个非常合适的解决方案：

```
private String label;
private Integer value;

@PostConstruct
public void init() {
    label = "Amateur";
    value = "Amateur".equals(label) ? 1 : 0;
} 
```

# sql - SQL中如何不对数字进行四舍五入

> ID：15004018
> 
> 赞同：0
> 
> 时间：2013-02-21T13:53:55.257
> 
> 标签：sql

我有一个这样的查询：

```
Select Customer,JobType,sum(SThours),
sum(OThours),SortMonth,
str((sum(OThours)/sum(SThours)),5,2)AS Ratios 
from #data
group by Customer,JobType,SortMonth

Sum (SThours): 688
sum(OThours): 618 
```

比率应该是 618/688=0.90 但我的结果是 1.00

我是 SQL 新手，需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:58:07.243

尝试将除法的一侧或另一侧转换为浮点数 - 强制浮点而不是整数除法。

```
SELECT
  Customer,
  JobType,
  sum(SThours),
  sum(OThours),
  SortMonth,
  str((CAST(sum(OThours) AS FLOAT)/sum(SThours)),5,2) AS Ratios
FROM
  #data
GROUP BY
  Customer,
  JobType,
  SortMonth 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:58:54.553

您的问题是您正在执行整数除法，这将始终导致返回整数值。在除以之前，您应该将总和转换为浮点数值（十进制应该可以）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:00:08.340

尝试将数字转换为十进制

```
SELECT
  Customer,
  JobType,
  sum(SThours),
  sum(OThours),
  SortMonth,
  str((CAST(sum(OThours) AS DECIMAL)/sum(SThours) ),5,2) AS Ratios
FROM
   #data
GROUP BY
  Customer,  JobType,  SortMonth 
```

试试这个示例[小提琴](http://sqlfiddle.com/#!2/a2581/5316)

这是显示获取十进制值的简单示例

# sql - 获取表格两列之间的变化值

> ID：15004023
> 
> 赞同：-4
> 
> 时间：2013-02-21T13:54:15.133
> 
> 标签：sql, sql-server

我有一张如下格式的表格：

```
ID            Date                  Frequency
1            01/06/2009               1
2            01/06/2009               1
3            01/06/2009               2
4            01/06/2009               1      *
5            01/06/2009               1
6            01/06/2009               2      * 
```

我想要如下结果集：

```
Current   : 6            01/06/2009               2      
Previous  : 4            01/06/2009               1 
```

我正在使用 SQL Server 2000 数据库。请为上述结果集提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:58:17.680

这是一个非常基本的 SQL 语句

```
SELECT count(ID), date, Frequency
FROM yourTable
Group By Date, Frequency
ORDER BY Frequency DESC 
```

但由于 * 和当前的原因，我并不积极：上一个：声明

# java - 即使实现了可序列化，也会抛出 java.io.NotSerializableException

> ID：15004026
> 
> 赞同：0
> 
> 时间：2013-02-21T13:54:33.180
> 
> 标签：java, android, serializable

我正在尝试将地图保存到文件中，但我得到`java.io.NotSerializableException`. 我知道这意味着我必须为类实现 Serializable。问题是即使实现了 Serializable 也会引发错误。

存储代码：

```
private void storePoints(Map<String,WifiPoint> list) throws IOException{
    // store in file
    FileOutputStream fos = context.openFileOutput("points", Context.MODE_PRIVATE);
    ObjectOutputStream os = new ObjectOutputStream(fos);
    os.writeObject(list);
    os.close();
} 
```

无线点：

```
public class WifiPoint implements Serializable{
    private static final long serialVersionUID = 2;
    public String ssid;
    public String bssid;
    public String capabilities;
    public double latitude;
    public double longitude;
    public int level;
} 
```

更新：真正的解决方法是：我需要在一个单独的文件中声明 WifiPoint，而不是在另一个类中声明它。

抱歉，我没有正确输入代码以便任何人得到正确答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:57:07.223

您正在尝试序列化`Map`您正在使用的 Map 类的检查`Serializable`

注意： A`HashMap`是`Serializable`，所以如果可能的话切换到那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:59:35.903

*   检查您是否实际实施`java.io.Serializable`
*   检查您要序列化的地图也实现`java.io.Serializable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:57:18.117

我需要在一个单独的文件中声明 WifiPoint，而不是在另一个类中声明它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:01:28.957

您将 Map 对象传递给 storePoints 方法，检查您传递的 Map 对象是否实现 Serializable。（如果你使用HashMap，java.util包的TreeMap肯定会实现Serializable。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:04:26.517

检查 Map 没有实现序列化接口：

```
All Known Implementing Classes:
AbstractMap, Attributes, AuthProvider, ConcurrentHashMap, ConcurrentSkipListMap,
EnumMap, HashMap, Hashtable, IdentityHashMap, LinkedHashMap, PrinterStateReasons,             Properties, Provider, RenderingHints, SimpleBindings, TabularDataSupport, TreeMap,
UIDefaults, WeakHashMap 
```

来源：[http ://docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

你可以试试这个：[Java: Writting/Reading a Map from disk](https://stackoverflow.com/questions/4738162/java-writting-reading-a-map-from-disk)

# mediaelement.js - mediaelemnt.js 无法在 Windows Server 2008 桌面上运行

> ID：15004031
> 
> 赞同：1
> 
> 时间：2013-02-21T13:55:03.087
> 
> 标签：mediaelement.js

我使用 Windows Server 2008 和 ie9 查看了我的页面，但播放器无法正常工作，任何想法为什么会这样。

我被告知 html5 音频和视频在 Windows Server 2008 桌面和 ie 上不起作用，但应该回退到 flash 版本

# matlab - Matlab：优化器/求解器的准确性差

> ID：15004035
> 
> 赞同：0
> 
> 时间：2013-02-21T13:55:30.367
> 
> 标签：matlab, mathematical-optimization, solver, equation-solving, optimization

我很难在 Matlab 上的求根问题中达到足够的准确性。我有一个函数 ，`Lik(k)`并且想找到`k`where的值`Lik(k)=L0`。基本上，问题在于各种内置的 Matlab 求解器 ( `fzero`, `fminbnd`, `fmincon`) 并没有像我希望或期望的那样接近解决方案。

`Lik()`是一个用户定义的函数，它涉及广泛的编码来计算数值拉普拉斯逆变换等，因此我不包括完整的代码。但是，我已广泛使用此功能，并且它似乎可以正常工作。 `Lik()`实际上需要几个输入参数，但是对于当前步骤，所有这些都是固定的，除了`k`. 所以这实际上是一个一维求根问题。

我想找到`k >= 165.95`which的值`Lik(k)-L0 = 0`。`Lik(165.95)`小于`L0`，我希望`Lik(k)`从这里单调增加。事实上，我可以`Lik(k)-L0`在感兴趣的范围内进行评估，并且它似乎顺利过零：例如`Lik(165.95)-L0 = -0.7465, ..., Lik(170.5)-L0 = -0.1594, Lik(171)-L0 = -0.0344, Lik(171.5)-L0 = 0.1015, ... Lik(173)-L0 = 0.5730, ..., Lik(200)-L0 = 19.80`。因此，该功能似乎表现良好。

但是，我尝试用几种不同的方法“自动”找到根，但准确性不如我预期的那么好......

使用`fzero(@(k) Lik(k)-L0)`：如果限制在区间内`(165.95,173)`，`fzero`返回`k=170.96`with `Lik(k)-L0=-0.045`。好吧，虽然不是很好。出于实际目的，如果没有大量的手动试验和错误，我不会知道如此精确的上限。如果我使用 interval `(165.95,200)`，`fzero`返回`k=167.19`where `Lik(k)-L0 = -0.65`，这是相当糟糕的。我一直在将*Display*设置为*iter*来运行这些测试，这样我就可以看到发生了什么，并且似乎在第 4 次迭代时`fzero`命中`167.19`，然后在第 5 次迭代时停留在那里，这意味着`k`从一次迭代到下一次迭代的变化较小比`TolX`（设置为 0.001），因此程序结束。退出标志表明它成功收敛到一个解决方案。

我还尝试最小化`abs(Lik(k)-L0)`使用`fminbnd`（给出上限和下限`k`）和`fmincon`（给出一个起点`k`）并遇到类似的准确性问题。特别是，`fmincon`可以同时设置`TolX`和`TolFun`，但是玩弄这些（低至 10^-6，比我需要的精度高得多）并没有任何区别。令人困惑的是，有时优化器甚至会在较早的迭代中找到一个比它返回的最终 k 值更接近使目标函数为零的 k 值。

因此，该算法似乎正在迭代到某个点，然后未能采取任何足够大小的进一步步骤来找到更好的解决方案。有谁知道为什么该算法不采取另一个更大的步骤？有什么我可以调整来改变的吗？（我查看了*optimset*下的列表，但没有提出任何有用的信息。）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T13:29:03.460

我在使用 fmincon 时也遇到了这个问题。这是我修复它的方法。

我需要在优化循环（多个变量）中找到函数（单个变量）的解决方案。正因为如此，我需要为单变量函数的解提供一个较大的区间。问题是如果搜索间隔太大，fmincon（或 fzero）不会收敛到一个解。为了解决这个问题，我在一个 while 循环中解决了这个问题，它有一个巨大的起始上限 (1e200)，并限制了求解器产生的 fval 值。如果得到的 fval 不够小，我将上限减小一个因子。代码看起来像这样：

```
fval = 1;
factor = 1;
while fval>1e-7
    UB = factor*1e200;
    [x,fval,exitflag] = fminbnd(@(x)function(x,...),LB,UB,options);
    factor = factor * 0.001;
end 
```

当找到一个好的解决方案时，求解器会退出。当然，您也可以通过引入另一个因子和/或增加因子步长来使用 LB。我的第一语言不是英语，所以我为所犯的任何错误道歉。

干杯，克里斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:34:24.693

由于您似乎有一个“狂野”功能，该功能在该地区似乎是单调的，兴趣范围相当小，并且对精度的要求不是很高，我认为推荐*蛮力*方法的所有标准都已满足。

假设在一个点上评估函数不需要太多时间，请试试这个：

找到一个`xmax`上限和一个下限`xmin`，选择一个首选`stepsize`并评估您的函数

```
xmin:stepsize:xmax 
```

如果需要（并且确实适用单调性），您可以通过这样做获得另一个上限和下限，并重复该过程以获得更好的准确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:45:58.170

为什么不使用简单的二分法？您总是评估某个区间的中间值，然后将其减少到右侧或左侧部分，这样您总是有一个边界给出负值，而另一个边界给出正值。您可以非常快速地降低到任意精度。由于您每次将间隔减半，它应该会很快收敛。

但是，我怀疑该功能还有其他一些问题，因为它具有不连续性。fzero 工作得如此糟糕似乎很奇怪。是确定性函数吧？

# sql - 为视图生成未连接的额外行

> ID：15004040
> 
> 赞同：1
> 
> 时间：2013-02-21T13:55:40.670
> 
> 标签：sql, sql-server, view

对不起，我真的不知道使用什么关键字来为我的问题寻求帮助。

我正在构建一个关于 SQL 的视图，以便在其他具有自身过滤功能的软件中使用。我想将视图用于多个目的，所以我有一些非正统的想法：

最初，我想 LEFT OUTER JOIN 两个表。但是：即使 SQL 找到匹配项，我也想要一条额外的记录，但无论如何都没有 Right 表中的数据。这是一个例子：

t1：

```
pk   data
1    a
2    b
3    c 
```

t2：

```
pk  fk  data
1    a   line1
2    a   line2
3    c   line3
4    c   line4
5    c   line5 
```

这是我目前得到的：查询：

```
select t1.data, t2.data from t1 left outer join t2 on t1.data = t2.fk 
```

返回：

```
t1.data  t2.data
a        line1
a        line2
b        <NULL>
c        line3
c        line4
c        line5 
```

我真正想要返回的内容：

```
t1.data  t2.data
a        <NULL>
a        line1
a        line2
b        <NULL>
c        <NULL>
c        line3
c        line4
c        line5 
```

我想要这个结果的原因是我可以在其他软件中使用视图并只过滤 t2.data = NULL 的记录

有谁知道我该怎么做？我不想手动加入该软件，因为它的性能低效到最终用户无法承受的程度。

感谢您的帮助。

PS我想过用一个完全外部连接一个不匹配的top（1）选择的子选择替换右表，但我不知道如何正确地做到这一点：-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:58:51.750

你的答案是这样的：使用 an`INNER JOIN`这样你就不会得到 NULL 的记录，然后在 t1 上使用 UNION 强制 NULL t2.data 列。

```
SELECT t1.data, t2.data
FROM t1
INNER JOIN t2 ON t1.data = t2.fk
UNION ALL
SELECT t1.data, NULL
FROM t1 
```

这应该可以为您提供所需的结果集。

# .net - Azure 中的 .NET Forms 身份验证 - 多个 VM 需要进行哪些更改？

> ID：15004042
> 
> 赞同：3
> 
> 时间：2013-02-21T13:56:00.450
> 
> 标签：.net, session, azure, forms-authentication, session-state

我们目前正在将 .NET Web 应用程序迁移到 Azure 云服务，Web 层在多个节点上运行（最初是两个）。我想知道我们应该如何修改基于表单的身份验证机制以在负载平衡环境中运行？这是我们过去从未需要考虑的问题，因为我们的应用程序一直仅限于一台物理服务器。

目前我们在 web.config 中定义受保护的文件夹，如下所示：

```
<location path="secure-area">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location> 
```

登录页面中的代码如下所示：

```
if accountIsValid = true then
   FormsAuthentication.SetAuthCookie(sessionID, False)
   response.redirect("secure-area/index.aspx")
end if 
```

然后在整个应用程序中检索活动会话，如下所示：

```
Dim sessionID as string = User.Identity.Name.ToString 
```

想必这种方法不会跨多个节点自动持久化会话状态吧？我想知道 Azure Fabric 控制器是否会为我解决所有这些问题，而无需更改代码。也许是一厢情愿！

任何帮助或在线指南链接将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:37:06.797

这不是关于 Azure 的问题，更多的是关于使用负载平衡 ASP.NET 应用程序的表单身份验证。Forms 身份验证使用服务器上的 machineKey 来加密发送给客户端的 cookie。默认情况下，此密钥是在每个实例的服务器上随机生成的。要使表单身份验证跨多个节点工作，您需要将机器密钥设置为在 web.config 中的两个实例中相同。这里有一些例子：

[表单身份验证是否适用于 Web 负载均衡器？](https://stackoverflow.com/questions/3357850/does-forms-authentication-work-with-web-load-balancers)

[http://msdn.microsoft.com/en-us/library/eb0zx8fc(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/eb0zx8fc(v=vs.100).aspx)

[http://support.microsoft.com/kb/910443](http://support.microsoft.com/kb/910443)

希望这行得通，快乐的编码！

# mysql - MySQL 巨表 JOIN 使数据库崩溃

> ID：15004045
> 
> 赞同：3
> 
> 时间：2013-02-21T13:56:04.023
> 
> 标签：mysql, sql, performance, optimization, greatest-n-per-group

根据我最近的问题[Select information from last item and join to the total amount](https://stackoverflow.com/questions/14961426/select-information-from-last-item-and-join-to-the-total-amount)，我在生成表时遇到了一些内存问题

我有两张桌子`sales1`，`sales2`像这样：

> 编号 | 日期 | 客户 | 销售

使用此表定义：

```
CREATE TABLE sales (
    id int auto_increment primary key, 
    dates date,
    customer int,
    sale int
); 
```

`sales1`并`sales2`具有相同的定义，但在每个领域都有`sales2`。`sale=-1`客户可以不在一个表中，也可以在一个表中或两个表中。这两个表都有大约 300.000 条记录和比这里指出的更多的字段（大约 50 个字段）。他们是 InnoDB。

我想为每个客户选择：

*   购买次数
*   上次购买价值
*   购买总量，当它具有正值时

我正在使用的查询是：

```
SELECT a.customer, count(a.sale), max_sale
FROM sales a
INNER JOIN (SELECT customer, sale max_sale 
        from sales x where dates = (select max(dates) 
                                    from sales y 
                                    where x.customer = y.customer
                                    and y.sale > 0
                                   )

       )b
ON a.customer = b.customer
GROUP BY a.customer, max_sale; 
```

**问题是：**

我必须得到结果，我需要某些计算，日期分开：2012 年的信息，2013 年的信息，还有所有年份的信息。

每当我做一年的时候，存储所有信息大约需要 2-3 分钟。

但是当我尝试收集这些年来的信息时，数据库崩溃了，我收到如下消息：

```
InternalError: (InternalError) (1205, u'Lock wait timeout exceeded; try restarting transaction') 
```

似乎加入如此巨大的表对于数据库来说太多了。当我`explain`查询时，几乎所有时间百分比都来自`creating tmp table`.

我想把收集的数据分成四等份。我们每三个月获得一次结果，然后加入并对其进行排序。但我想这个最终的连接和排序对于数据库来说又太多了。

**那么**，只要我不能更改表结构，您的专家会建议如何优化这些查询？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T15:24:44.270

300k 行不是一个巨大的表。我们经常看到 3 亿行表。

查询的最大问题是您使用的是相关子查询，因此它必须为外部查询中的*每一行重新执行子查询。*

通常情况下，您不需要在一个 SQL 语句中完成*所有*工作。将其分解为几个更简单的 SQL 语句有以下优点：

*   更容易编码。
*   更容易优化。
*   更容易调试。
*   更容易阅读。
*   如果/当您必须实施新要求时，更容易维护。

## 购买次数

```
SELECT customer, COUNT(sale) AS number_of_purchases
FROM sales 
GROUP BY customer; 
```

sales(customer,sale) 的索引最适合此查询。

## 最后购买价值

这是经常出现[的每组最大 n](https://stackoverflow.com/questions/tagged/greatest-n-per-group)问题。

```
SELECT a.customer, a.sale as max_sale
FROM sales a
LEFT OUTER JOIN sales b
 ON a.customer=b.customer AND a.dates < b.dates
WHERE b.customer IS NULL; 
```

换句话说，尝试将行匹配到具有相同客户和更大日期`a`的假设行。`b`如果未找到此类行，则`a`必须具有该客户的最大日期。

销售索引（客户、日期、销售）最适合此查询。

如果您可能在该最大日期为一位客户进行了多次销售，则此查询将为每位客户返回多行。您需要找到另一列来打破平局。如果您使用自动增量主键，它适合作为决胜局，因为它保证是唯一的并且它往往会按时间顺序增加。

```
SELECT a.customer, a.sale as max_sale
FROM sales a
LEFT OUTER JOIN sales b
 ON a.customer=b.customer AND (a.dates < b.dates OR a.dates = b.dates and a.id < b.id)
WHERE b.customer IS NULL; 
```

## 购买总额，当它具有正值时

```
SELECT customer, SUM(sale) AS total_purchases
FROM sales
WHERE sale > 0
GROUP BY customer; 
```

sales(customer,sale) 的索引最适合此查询。

您应该考虑使用 NULL 而不是 -1 来表示缺失的销售值。SUM() 和 COUNT() 等聚合函数会忽略 NULL，因此您不必使用 WHERE 子句来排除 sale < 0 的行。

* * *

**回复：你的评论**

> 我现在拥有的是一张表，其中包含年、季度、total_sale（关于（年、季度）这对）和销售字段。我想收集的是有关某个时期的信息：本季度，季度，2011 年......信息必须分为顶级客户，销售额较大的客户等。是否有可能从客户那里获得最后的购买价值total_purchases 大于 5？

## 2012 年第四季度前五名客户

```
SELECT customer, SUM(sale) AS total_purchases
FROM sales
WHERE (year, quarter) = (2012, 4) AND sale > 0
GROUP BY customer
ORDER BY total_purchases DESC
LIMIT 5; 
```

我想根据真实数据对其进行测试，但我相信销售索引（年、季度、客户、销售）最适合此查询。

## 总购买次数 > 5 的客户的最后一次购买

```
SELECT a.customer, a.sale as max_sale
FROM sales a
INNER JOIN sales c ON a.customer=c.customer
LEFT OUTER JOIN sales b
 ON a.customer=b.customer AND (a.dates < b.dates OR a.dates = b.dates and a.id < b.id)
WHERE b.customer IS NULL
GROUP BY a.id
HAVING COUNT(*) > 5; 
```

与上面的其他每组最大 n 查询一样，sales(customer,dates,sale) 的索引最适合此查询。它可能无法同时优化连接和分组依据，因此这将产生一个临时表。但至少它只会做一个临时表而不是很多。

* * *

这些查询足够复杂。您不应该尝试编写可以给出*所有*这些结果的单个 SQL 查询。记住 Brian Kernighan 的经典名言：

> 每个人都知道，调试的难度是一开始编写程序的两倍。因此，如果您在编写它时尽可能地聪明，您将如何调试它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:10:53.843

我认为您应该尝试在`sales(customer, date)`. 子查询可能是性能瓶颈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:59:28.287

你可以让这只小狗*尖叫*。转储整个内部连接查询。真的。这是一个几乎没人知道的技巧。

假设`dates`是一个日期时间，**将**其转换为可排序的字符串，**连接**您想要的值，**最大值**（或最小值）、**子字符串**、**强制转换**。您可能需要调整日期转换功能（这个在 MS-SQL 中有效），但这个想法在任何地方都适用：

```
SELECT customer, count(sale), max_sale = cast(substring(max(convert(char(19), dates, 120) + str(sale, 12, 2)), 20, 12) as numeric(12, 2))
FROM sales a 
group by customer 
```

瞧。如果您需要更多结果列，请执行以下操作：

```
SELECT yourkey
            , maxval = left(val, N1)                  --you often won't need this
            , result1 = substring(val, N1+1, N2)
            , result2 = substring(val, N1+N2+1, N3)   --etc. for more values
FROM ( SELECT yourkey, val = max(cast(maxval as char(N1))
                               + cast(resultCol1 as char(N2))
                               + cast(resultCol2 as char(N3)) )
       FROM yourtable GROUP BY yourkey ) t 
```

确保除了最后一个字段之外的所有字段都具有固定长度。这需要一些工作才能让你明白，但它是非常可学习和可重复的。它适用于任何数据库引擎，即使你有排名功能，它通常也会大大优于它们。

更多关于这个非常常见的挑战[在这里](https://stackoverflow.com/questions/14880313/sql-get-other-rows-from-aggregate-function/14881009#14881009)。

# wpf - WPF 装饰器与自定义装饰器？

> ID：15004046
> 
> 赞同：2
> 
> 时间：2013-02-21T13:56:05.800
> 
> 标签：wpf, adorner, adornerlayer

我想创建一个图表编辑器，并且需要移动和调整大量项目的大小。

而且我还听说默认的 WPF 装饰器很慢。

使响应式崇拜者分层的最佳方法和建议是什么？自定义还是基于 WPF 内置的装饰器？据我所知，表达式混合也在使用它自己的装饰器实现。

对我来说，性能比实施时间更重要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:11:19.967

在实际实现之后进行测试：如果您有很多复杂的控件和性能指标，最好使用 OnRender() 方法。预览活动可以很好地发现您即将与假装饰者互动，但这是一项额外的工作。

# visual-studio-2010 - 如何在 Visual Studio 中创建静态组件？

> ID：15004050
> 
> 赞同：0
> 
> 时间：2013-02-21T13:56:18.687
> 
> 标签：visual-studio-2010, thread-safety

我正在做一些具有很多表单的应用程序，并且某些组件必须从另一种表单访问一些组件....当我公开我的richtextbox并尝试从其他地方访问它时，它说线程安全错误bla bla ...所以我将该文本框设为静态，以便只有属于该类的对象，我可以像这样访问它。

```
Form1.richTextBox.Text 
```

这工作正常，但问题是每次我向winform添加一个新组件时，我的静态对象都变成非静态的，我对对象的所有直接访问都会出错。我的问题是如何让 Visual Studio 停止修改我的代码（设计代码）？还是从其他形式安全地访问对象而没有循环依赖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:39:00.167

尝试创建一些静态元素，如 String myStatic 并从其他表单访问该元素。在您需要更新此元素的地方使用一些方法，例如

```
void UpdateMyStatic() {
myStatic = richTextBox.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:37:18.627

从您的评论“尝试从其他地方访问它说线程安全错误”我相信问题是跨线程操作。那是在后台/工作线程上执行的“其他地方”吗？IE。不是您的richtextbox 实例化的线程。如果是这样，您必须测试 InvokeRequired 属性。来自 MSDN：“获取一个值，该值指示调用者在对控件进行方法调用时是否必须调用调用方法，因为调用者位于与创建控件的线程不同的线程上。”

顺便说一句：即使您看到一个 C# 对象（richtextbox），它也只是 Windows 句柄的一个外观。因此，Visual Studio 的行为是正确的。一个控件只能有一个父级（即窗口） 如果您“认为”您需要一个静态富文本框，那么您应该重新考虑您的设计。

# java - 如何以与变量成反比的特定概率链接元素

> ID：15004055
> 
> 赞同：0
> 
> 时间：2013-02-21T13:56:35.753
> 
> 标签：java, probability-theory

我有两个数组列表，我想将第一个数组中的元素链接到第二个数组列表的元素。元素有一个属性，比如 A。

条件是：第一个数组中元素值较高的元素。getA() 更喜欢与第二个数组中 A 值较低的元素链接。

我知道，为了根据有*偏*的概率选择一个元素，我可以计算累积概率，然后做这样的事情[选择概率与信任成正比的节点](https://stackoverflow.com/questions/2215132/selecting-nodes-with-probability-proportional-to-trust)

让我们看看这是否更清楚：考虑优先依附机制。在这种情况下，一个节点链接到另一个节点的概率随着所选节点的程度而增加。我只是想破解优先附件，并偏向一个节点链接另一个节点的概率，不仅在第二个节点的属性上，而且在第一个节点的属性上。我希望这是相反的，就像小节点更喜欢链接大节点，而大节点更喜欢链接小节点。

最好的问候，西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:06:39.043

[编辑]

对于每一对，计算差异（或绝对差异，或差异平方）。然后使用该差异作为权重来选择一对。

删除不再有效的对并重复。

# hibernate - 休眠删除不起作用

> ID：15004057
> 
> 赞同：1
> 
> 时间：2013-02-21T13:56:42.783
> 
> 标签：hibernate, delete-row

在调试我的服务器端代码时，我意识到我的删除行不起作用。我刚刚从我的插入中复制了这段代码，并将 session.saveORUpdate 替换为 session.delete。删除对象是否正确？我在这里做错了什么？

我没有任何例外。

```
public void delete(Object dataStore) throws DidNotSaveRequestSomeRandomError {
    Transaction txD;
    Session session;
    session = currentSession();

    //get first and then fallback to begin.
    if (session.getTransaction() != null
            && session.getTransaction().isActive()) {
        txD = session.getTransaction();
    } else {
        txD = session.beginTransaction();
    }

    try {
        session.delete(dataStore);
    } catch (MappingException e) {
        e.printStackTrace() ;
    }
    try {
        txD.commit();
        while (!txD.wasCommitted())
            ;
    } catch (ConstraintViolationException e) {
        log.error("Unable to delete data from "
                + dataStore.getClass().toString());
        txD.rollback();
        throw new DidNotSaveRequestSomeRandomError(dataStore,
                feedbackManager);
    } catch (TransactionException e) {
        log.debug("txD state isActive" + txD.isActive()
                + " txD is participating" + txD.isParticipating());
        log.debug(e);
        txD.rollback();
    } finally {
        session.flush();
        txD = null;
        session.close();
    }
} 
```

编辑 ：

我尝试将 session.flush 放在 session.delete 之后，但没有用。

# javascript - 获取特定的 Google Analytics（分析）目标漏斗阶段

> ID：15004058
> 
> 赞同：5
> 
> 时间：2013-02-21T13:56:50.073
> 
> 标签：javascript, php, google-analytics, google-analytics-api

我正在尝试获得特定的目标阶段值。但我只能通过 API Expolorer 获得

startGoal 和 Goal Completed （查看我附上的图片以了解我无法获得的内容）与

> ga:goal1Start

我能得到数字：**15,963（看我附上的图片就明白了）**

并与

> ga:goal1Completions

我能得到数字：**31（看我附上的图片就明白了）**

![目标阶段图像](../Images/6c7237eb9e4d26e9e4b79bddf89b1fef.png)

如何获得值为 156 的目标的中间阶段？这甚至可能吗？

Api Explorer： [https ://developers.google.com/apis-explorer/#p/analytics/v3/analytics.data.ga.get?ids=ga%253A68044380&start-date=2013-02-20&end-date=2013- 02-20&metrics=ga%253Agoal1Starts%252C+ga%253Agoal1Completions&_h=24&](https://developers.google.com/apis-explorer/#p/analytics/v3/analytics.data.ga.get?ids=ga%253A68044380&start-date=2013-02-20&end-date=2013-02-20&metrics=ga%253Agoal1Starts%252C+ga%253Agoal1Completions&_h=24&)！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T23:32:23.253

那些中间数字不能通过 API 直接访问——既不是典型的 GA API 也不是新的 Multi Channel Funnels API。Multi Channel Funnels API 处理在完成目标之前从多个来源（或“渠道”）访问的用户，因此其名称中的“渠道”实际上指的是与我们在这里关注的不同类型的渠道——一次访问中的综合浏览量漏斗。

虽然这些中间数不能直接通过 API 获得，但我们可以使用 API 和一些基于文档的知识来计算它们。

这份[Google Analytics 文档](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2976313)提供了有关如何计算漏斗可视化报告的重要信息。为了清楚地计算您在中间步骤中看到的数字，我将参考本文档的各个部分，因为这些数字不像页面浏览量或对该步骤的访问量那么简单。

查看您的漏斗，我相信您已选择“必需的第一步”选项。我将首先在没有此选项的情况下进行解释，然后解释我们如何修改我们的流程以考虑所需的第一步。我将您的漏斗建模为第 1 步 > 第 2 步 > 第 3 步 > 完成，我假设我们想要与第 3 步关联的数字。第 2 步的过程将类似。

## 无需第一步

我们需要从 API 中收集以下信息。为此，您应该在 GA 界面中创建高级细分以匹配这些人群，然后通过[数字 id](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#segment)在 API 中使用细分：

1.  对与第 3 步关联的 URL 的访问次数（请参阅文档“唯一网页浏览量”）。
2.  未访问步骤 3 的完成 URL 访问次数，因为漏斗可视化报告将回填这些访问（请参阅文档“回填漏斗步骤”）。

**无需步骤 3 的完成访问的高级细分** ![无需步骤 3 的完成访问的高级细分](../Images/9b3cdd67c9dbad750249ef1393726909.png)

然后将1和2的结果相加。

## 需要第一步

您将收集与上述第 1 步和第 2 步相同的信息，但您将扩展高级细分以要求访问也包括第 1 步。

**第 3 步访问的高级细分，需要第 1 步** ![第 3 步访问的高级细分，需要第 1 步](../Images/9bb87088dfdffee290a2362509e0da0a.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-03T20:56:22.263

您无法通过访问普通的 Google Analytics API 来获取此信息，但还有另一个 API 称为“多渠道漏斗”API（更准确地说：[转化路径 - 维度和指标](https://developers.google.com/analytics/devguides/reporting/mcf/dimsmets/conversionpaths)）应该可以让您提取您正在寻找的数据。到目前为止，我自己只使用过这些`ga:`调用，但据我了解，这正是`mcf:`调用的目的。

# facebook - Facebook Like-box 不适用于特定网站

> ID：15004062
> 
> 赞同：0
> 
> 时间：2013-02-21T13:56:58.423
> 
> 标签：facebook, facebook-likebox

我看到一种奇怪的失败与like box一起工作......我看不到like box，但地址看起来不错：

```
<div class="fb-like-box" data-href="http://www.facebook.com/instituto.vannghiespana"
                 data-width="292" data-height="570" data-show-faces="true"
                 data-stream="true" data-header="true"></div> 
```

我尝试将“http”更改为“https”，但仍然没有回答。即使我尝试在like box facebook 开发人员网站上生成代码，验证表明代码没问题，但我仍然看不到该网站。

但是......当我使用旧网站时：

```
data-href="https://www.facebook.com/pages/Instituto-Van-Nghi-Espa%C3%B1a/133758943312622" 
```

工作正常。

谢谢你的时间。

（已编辑）

我已经在正文之后包含了 facebook 片段

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script> 
```

甚至我尝试将 js.src = "//connect 更改为 js.src = "http//connect

有任何想法吗？

纳乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:47:27.470

您是否有所需的 fb-root html 标签：

```
<div id="fb-root"></div> 
```

以及相应的javascript代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:30:49.993

您忘记了 JavaScript 代码：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId={{APP_ID}}";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

更仔细地查看[文档](https://developers.facebook.com/docs/reference/plugins/like/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:07:23.473

Facebook Like Box 插件用于为 Facebook 页面点赞。您列出的示例`instituto.vannghiespana`是（假）个人资料，而不是页面。

类似框插件不能与配置文件一起使用。如果这是您的个人资料，您应该将其转换为主页（一方面，个人资料的好友不能超过 5000 个）

# javascript - 类的最后一个元素

> ID：15004063
> 
> 赞同：-3
> 
> 时间：2013-02-21T13:57:00.827
> 
> 标签：javascript, jquery, class, css-selectors

如何检查具有某个类的元素是否是该类的最后一个？

```
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div> // I want to check if this is the last element of this class
<div class="bar"></div>
<div class="bar"></div>
<div class="bar"></div>
<div class="bar"></div>
<div class="bar"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:59:15.460

以下将循环每个 div 并说出哪个 div 是最后一个 div

```
var count = $('div.foo').length;

$('div.foo').each(function(index){
  if(index == (count-1))
  {
    alert("this is last div" + index);
  }
}); 
```

* * *

像这样你可以得到类的最后一个元素

```
 var last_foo_div = $('div.foo:last'); 
```

或者

```
 var foodivs= $('div.foo');
   var lastdiv  = foodivs.last(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:00:19.927

由于我不确定您是如何识别此变量的，假设`$foo`是该特定元素的 jQuery 对象。

你可以这样做：

```
if (!$foo.next(".foo").length){
   //its the last foo
} 
```

***现场演示：http:** [//jsfiddle.net/2W6eT/](http://jsfiddle.net/2W6eT/)*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T13:59:42.527

```
if ($('.foo').next('.foo').length == 0)
   alert("This is last Element") 
```

# castle-windsor - WindsorContainers AddChildContainer 真的这么糟糕吗？

> ID：15004066
> 
> 赞同：3
> 
> 时间：2013-02-21T13:57:06.003
> 
> 标签：castle-windsor, ioc-container

我正在尝试从一组基本注册中分支一些子容器，以方便不同的配置设置。

根据[Mark Seemanns 关于子容器如何工作的回复](https://stackoverflow.com/questions/1974224/castle-windsor-equivalent-of-structuremap-objectfactory-with-getinstance)，我认为我可以使用子容器来覆盖基本注册中的特定组件。然而，我似乎不像 Seemann 所说的那样工作。

根据马克，这应该工作：

```
[TestMethod]
public void OverrideRegistrationInParentContainer()
{
    //IBusinessComponent depends on IBasicComponent
    var parentContainer = new WindsorContainer();
    parentContainer.Register(Component.For<IBasicComponent>().ImplementedBy<BasicComponent>()); //Returns 42
    parentContainer.Register(Component.For<IBusinessComponent>().ImplementedBy<RealBusinessComponent>()); //Returns the result of IBasicComponent

    var childContainer = new WindsorContainer();
    childContainer.Register(Component.For<IBasicComponent>().ImplementedBy<BasicComponent2>()); //Returns 40

    parentContainer.AddChildContainer(childContainer);

    var service = childContainer.Resolve<IBusinessComponent>();
    Assert.AreEqual(40, service.GetBusinessValue()); //This fails with the actual value being 42
} 
```

但是，所有依赖项显然都是从父级解决的。

如果我从 parentContainer 中删除 IBasicComponent 注册，由于缺少注册，我什至无法解决依赖关系。

谁能解释你如何让容器像 Seemann 声称的那样运行，或者 WindsorContainer 真的无法以优雅的方式处理这种类型的配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:41:20.093

您所指的行为曾经在旧温莎版本中工作，但在更新的版本中有所改变。

基本上这是一个错误，它将允许子容器中的组件在其范围之外可见（当组件表单父级依赖于子级组件时）

因此，允许依赖项来自子项 --> 父项，但不能相反。

# python - 运行由字符串标识的函数 -> 正确方式

> ID：15004075
> 
> 赞同：0
> 
> 时间：2013-02-21T13:57:27.050
> 
> 标签：python, django, function, reference

在像 celery 这样的 django 应用程序中，您可以编写一个函数，将其放入特定文件夹 (myFunc) 中的文件 (func.py) 中。现在您可以在 django 中创建一个对象，并引用此函数以由调度程序运行。

我不想写一个新的芹菜，我想知道用什么技术来完成这样的行为：运行由字符串/或 CharField 引用的函数。

**简短的例子**

*文件夹结构：*

```
myApp
---myFunc
-----func.py
-models.py 
```

*函数.py*

```
def test():
  print "foo" 
```

*模型.py*

```
class RunAFunction(models.Model):
  function = models.CharField(max_length=100) 
```

*python manage.py 外壳*

```
> from myApp.models import RunAFunction
> func = RunAFunction(function="test()")
> func.save() 
```

现在我想`myFunc.func.test()`和我的`RunAFunction()`班级一起跑步。请不要告诉我我需要使用`eval()`;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T14:01:05.943

拆分最后一个字符串`.`以获取模块和函数名称，然后使用[`importlib`](http://docs.python.org/2/library/importlib.html)and[`getattr()`](http://docs.python.org/2/library/functions.html#getattr)获取对象：

```
import importlib
modulename, funcname = string.rsplit('.', 1)

module = importlib.import_module(modulename)
function = getattr(module, funcname)

result = function() 
```

因此，如果`string = 'myApp.myFunc.test'`, 则上面的代码将其拆分为`'modulename = 'myApp.myFunc'`and `funcname = 'test'`，然后调用`importlib.import_module('myApp.myFunc')`，并`getattr(module, 'test')`在结果上为您提供对该函数的引用，然后可以调用该函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T14:01:02.107

第一步是仅通过名称来识别您的函数，因此使用“test”而不是“test()”。然后，您应该能够使用 getattr() 之类的方法在全局命名空间或其他模块中查找它。一旦你在变量中拥有函数，你就可以把括号放在上面并调用它。

# silverlight - Silverlight 中的同步

> ID：15004076
> 
> 赞同：0
> 
> 时间：2013-02-21T13:57:27.283
> 
> 标签：silverlight, synchronization

我在 Silverlight 应用程序中有两个包含文本框 (1) 的用户控件，当我开始在其中一个文本框中写入时，如何同步这些文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:23:33.100

在每个控件中创建一个更改文本框值的[依赖属性，然后将控件绑定到另一个控件的值。](http://msdn.microsoft.com/en-us/library/ms752914.aspx#why_dependency_properties)

例子

```
 public static readonly DependencyProperty InnerTextProperty= 
                 DependencyProperty.Register(
    "InnerText", typeof(string),
        new PropertyMetadata(false, OnTextInput) );
public bool InnerText
{
    get { return (bool)GetValue(InnerTextProperty); }
    set { SetValue(InnerTextProperty, value); }
}

private static void OnTextInput(DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    YourControl c = obj as YourControl
    if(c != null)
    {
        c._innerTextBox.Text = e.Value;
    }

} 
```

# javascript - 倒计时 Javascript 不适用于 Chrome 扩展

> ID：15004078
> 
> 赞同：1
> 
> 时间：2013-02-21T13:57:29.650
> 
> 标签：javascript, google-chrome, google-chrome-extension, countdown

我是扩展的新手，这让我发疯。当我在浏览器中本地加载页面时，我的倒计时工作，但是当我尝试使其成为扩展时，只显示 html，并且 javascript 不起作用（例如，当我在启动扩展时单击开始按钮时，没有任何变化，倒计时永远不会开始。）我把我的代码放在下面，它与我没有把javascript放在“背景”中有关吗？我不明白 Chrome Docs 的那部分

```
 <html>
  <head>
  </head>
  <body>

<script>var countdown;
var countdown_number=10000*3600
var days;
var hours;
var minutes;
var seconds;

function countdown_init() {
    //countdown_number = 11;
    countdown_trigger();
}

function countdown_trigger() {
    if(countdown_number > 0) {
        countdown_number--;
        //store()
        days = Math.floor(countdown_number/(3600*24))
        hours = (Math.floor(countdown_number/(3600))-days*24) % 24;
        minutes = (Math.floor(countdown_number/(60))-hours*60) % 60;
        seconds = (Math.floor(countdown_number)-minutes*60) % 60;
        update_counter();
        if(countdown_number > 0) {
            countdown = setTimeout('countdown_trigger()', 1000);
        }
    }
}

function update_counter(){
     document.getElementById('timer_text').innerHTML = "Days: "+days+"<br>"+
        " Hours: " + hours +"<br>"+" Minutes: " + minutes +"<br>"+" Seconds: " + seconds;
}

function countdown_clear() {
    clearTimeout(countdown);
}

function countdown_reset(){
    countdown_number=10000*3600;
    update_counter();
    clearTimeout(countdown);
}

function writeItem(){
    localStorage[1] = countdown_number;
}

function returnItem() {
    var stored = localStorage[1];
    document.getElementById('item').innerHTML=countdown_number;
  }

function store(){
    writeItem();
}
</script>

<div>
    <h1> 10,000 Hours Timer </h1>
    <input type="button" value="start countdown" onclick="countdown_init()" />
    <input type="button" value="stop countdown" onclick="countdown_clear()" />
    <input type="button" value="reset" onclick="countdown_reset()"/>
    <input type="button" value="store" onclick="store()"/>
    <p id="item">Hi</p>
</div>
<div id="timer_text">Ready To Start?</div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:36:02.533

Chrome 扩展不支持内联 JavaScript。 [http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

试试这个 JS：-

```
document.addEventListener('DOMContentLoaded', function () {
  document.querySelector('#start').addEventListener('click', countdown_init);
  document.querySelector('#stop').addEventListener('click', countdown_clear);
  document.querySelector('#reset').addEventListener('click', countdown_reset);
  document.querySelector('#store').addEventListener('click', store);

});

var countdown_number=10000*3600;
var days;
var hours;
var minutes;
var seconds;
var countdown;

function countdown_init(e) {
    //countdown_number = 11;
    countdown_trigger();
}

function countdown_trigger() {
    if(countdown_number > 0) {
        countdown_number--;
        //store()
        days = Math.floor(countdown_number/(3600*24));
        hours = (Math.floor(countdown_number/(3600))-days*24) % 24;
        minutes = (Math.floor(countdown_number/(60))-hours*60) % 60;
        seconds = (Math.floor(countdown_number)-minutes*60) % 60;
        update_counter();
        if(countdown_number > 0) {
            countdown = setTimeout(countdown_init, 1000);
        }
    }
}

function update_counter(){
     document.getElementById('timer_text').innerHTML = "Days: "+days+"<br>"+
        " Hours: " + hours +"<br>"+" Minutes: " + minutes +"<br>"+" Seconds: " + seconds;
}

function countdown_clear(e) {
    clearTimeout(countdown);
}

function countdown_reset(e){
    countdown_number=10000*3600;
    update_counter();
    clearTimeout(countdown);
}

function writeItem(){
    localStorage[1] = countdown_number;
}

function returnItem() {
    var stored = localStorage[1];
    document.getElementById('item').innerHTML=countdown_number;
  }

function store(e){
    writeItem();
} 
```

和 HTML：-

```
<div>
    <h1> 10,000 Hours Timer </h1>
    <input type="button" id="start" value="start countdown"  />
    <input type="button" id="stop" value="stop countdown"  />
    <input type="button" id="reset" value="reset" />
    <input type="button" id="store" value="store" />
    <p id="item">Hi</p>
</div>
<div id="timer_text">Ready To Start?</div> 
```

# asp.net-mvc - TempData 存储在哪里？

> ID：15004081
> 
> 赞同：22
> 
> 时间：2013-02-21T13:57:35.397
> 
> 标签：asp.net-mvc, asp.net-mvc-2, tempdata

TempData 存储在 ASP.NET MVC 框架（更具体地说，是 ASP.NET MVC 2）中的什么位置？它是存储在服务器端还是发送到客户端？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T13:59:29.277

默认情况下，TempData 使用 ASP.NET 会话作为存储。所以它存储在服务器上（`InProc`是默认值）。但是您可以定义其他 ASP.NET 会话状态模式：StateServer 和 SqlServer。如果您不想使用 ASP.NET 会话，也可以编写自定义 TempData 提供程序并自己处理存储。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-21T14:01:41.100

`TempData`它存储在会话存储中，但和之间有一个关键区别`Session`：

`TempData`**仅对用户的 session**可用，因此它**只会持续到我们阅读它**并在 HTTP 请求结束时被清除。

适合使用 , 的场景`TempData`是当数据需要在两个请求之间持久存在时——重定向场景。我能想到的另一种情况是在 POST 操作失败后返回错误消息。

# java - JOptionPane.showOptionDialog 不工作

> ID：15004083
> 
> 赞同：0
> 
> 时间：2013-02-21T13:57:39.750
> 
> 标签：java, swing, joptionpane

我正在尝试制作一个小弹出游戏。我已经添加了这个故事，一切都很好，直到我添加了这段代码：

```
 Object[] choices = null;
    Object[] options = { "Caitlyn", "Warwick", "Teemo", "Olaf", "Ashe" };
      int select = JOptionPane.showOptionDialog(null, "Who do you want to fight against?", "Champion selection",
            JOptionPane.CLOSED_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, action
            ); 
```

现在，这些选项出现在出现的每个选项对话框上。我该如何解决？

这是我的代码

```
Object[] choices = null;
    Object[] options = { "Caitlyn", "Warwick", "Teemo", "Olaf", "Ashe" };
      int select = JOptionPane.showOptionDialog(null, "Who do you want to fight against?", "Champion selection",
            JOptionPane.CLOSED_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, action
            );

      switch (select)
        {
        case 0: 
            int cait = 0;
            cait++;
            JOptionPane.showMessageDialog(null, "You will be fighting against the following champion:" + " " + caitlyn.Champion + "  " + "\n She is level" + "  " + caitlyn.Level + " " + "\n And she is a " + caitlyn.Type + "-Champion");

            JOptionPane.showMessageDialog(null, "You have started with 2000HP, Caitlyn has 1700HP.");

            // health

            newchamp.health = 2000;
            caitlyn.enemyhealth = 1700;

            //begin

            Object[] choices1 = null;
            Object[] options1 = { "Criticals", "Pure Damage", "Heal 300 points", "Flee" };
              int action = JOptionPane.showOptionDialog(null, "What will you do?", "action",
                    JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
                    null, options, options[0]);

            switch (action)
            {
            case 0: 
                int Criticals = (int) (Math.random()*500);
                Criticals++;
                caitlyn.enemyhealth = (caitlyn.enemyhealth-Criticals);
                JOptionPane.showMessageDialog(null, "Caitlyn now has" +" " + caitlyn.enemyhealth + "HP left");
                break;
            case 1:
                int PureDamage = (int) (Math.random()*300);
                PureDamage++;
                caitlyn.enemyhealth = (caitlyn.enemyhealth-PureDamage);
                JOptionPane.showMessageDialog(null, "Caitlyn now has" + " " + caitlyn.enemyhealth + "HP left");
                break;
            case 2:
                int heal = 300;
                heal++;
                newchamp.health = (newchamp.health+heal);
                JOptionPane.showMessageDialog(null,  "You now have"+ " " + newchamp.health + "HP points!");
                break;
            case 3:
                String flee;
                JOptionPane.showMessageDialog(null, "You failed to flee the battle, better luck next round!");
                break;

            }

            JOptionPane.showMessageDialog(null, "It's Caitlyn's turn now!");
            JOptionPane.showMessageDialog(null, "Caitlyn used a damaging attack!");

            int enemyDamage = (int) (Math.random()*350);
            newchamp.health = (newchamp.health - enemyDamage);
            JOptionPane.showMessageDialog(null, "You now have" + " " + newchamp.health +" "+ " HP Left");

            JOptionPane.showMessageDialog(null, "It's your turn again!");

            Object[] choices2 = null;
            Object[] options2 = { "Criticals", "Pure Damage", "Heal 300 points", "Flee" };
              int action1 = JOptionPane.showOptionDialog(null, "What will you do?", "action",
                    JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
                    null, options, options[0]);

            switch (action1)
            {
            case 0: 
                int Criticals = (int) (Math.random()*700);
                Criticals++;
                caitlyn.enemyhealth = (caitlyn.enemyhealth-Criticals);
                JOptionPane.showMessageDialog(null, "Caitlyn now has" +" " + caitlyn.enemyhealth + "HP left");
                break;
            case 1:
                int PureDamage = (int) (Math.random()*300);
                PureDamage++;
                caitlyn.enemyhealth = (caitlyn.enemyhealth-PureDamage);
                JOptionPane.showMessageDialog(null, "Caitlyn now has" + " " + caitlyn.enemyhealth + "HP left");
                break;
            case 2:
                int heal = 300;
                heal++;
                newchamp.health = (newchamp.health+heal);
                JOptionPane.showMessageDialog(null,  "You now have"+ " " + newchamp.health + "HP points!");
                break;
            case 3:
                String flee;
                JOptionPane.showMessageDialog(null,"You have failed to flee the battle, better luck next round!");
                break;

            }
            JOptionPane.showMessageDialog(null, "It's Caitlyn's turn again!");
            JOptionPane.showMessageDialog(null, "Caitlyn hit a critical!");

            int enemyDamage1 = (int) (Math.random()*650);
            newchamp.health = (newchamp.health - enemyDamage);
            JOptionPane.showMessageDialog(null, "You now have" + " " + newchamp.health +" "+ " HP Left");
            if (caitlyn.enemyhealth < newchamp.health){
                JOptionPane.showMessageDialog(null, "Caitlyn is too injured by your strength to continue this battle. You are victorious!");
            }
            else
                JOptionPane.showMessageDialog(null, "You are too injured to continue this battle. You are defeated.");
            break;
        case 1:
            int war = 0;
            war++;
            JOptionPane.showMessageDialog(null, "Warwick is still being made. This window will now exit the program.");
            break;
        case 2:
            int teem = 0;
            teem++;
            JOptionPane.showMessageDialog(null, "Teemo is still being made. This window will now exit the program.");
            break;
        case 3:
            int ola = 0;
            ola++;
            JOptionPane.showMessageDialog(null, "Olaf is still being made. This window will now exit the program.");
            break;
        case 4:
            int ash = 0;
            ash++;
            JOptionPane.showMessageDialog(null, "Ashe is still being made. This window will now exit the program.");
            break;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:12:24.310

您是否注意到这部分代码

```
Object[] choices2 = null;
        Object[] options2 = { "Criticals", "Pure Damage", "Heal 300 points", "Flee" };
          int action1 = JOptionPane.showOptionDialog(null, "What will you do?", "action",
                JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
                null, **options**, options[0]); 
```

** 表示可能的问题。不应该`options2`吗？（还有一些其他地方可能有同样的错误）

# android - 如何在android中设置应用程序支持多屏？

> ID：15004085
> 
> 赞同：0
> 
> 时间：2013-02-21T13:57:49.683
> 
> 标签：android, android-ui, android-screen-support

我正在创建一个 Android 应用程序。如何设置多屏支持？

如何使用 Photoshop 为不同的屏幕设计按钮背景、背景图像等？

# jquery - 选择第n个元素并执行字符串操作

> ID：15004090
> 
> 赞同：0
> 
> 时间：2013-02-21T13:58:06.580
> 
> 标签：jquery, jquery-selectors, replace

如何在下面的 HTML 中选择第二个 dd 元素的值？（编辑：这只是一个小列表，实际列表要长得多）。如果可能的话，也从值中删除 , ？

```
<dl class="field field-name-field-movie-genre field-type-taxonomy-term-reference field-label-inline clearfix">
    <dt>Genre</dt>
    <dd class="even">Love / Romance,</dd>
    <dd class="odd">Comedy,</dd>
    <dd class="even">Action</dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:00:21.540

由于它具有“奇数”类，因此您应该能够将其用作选择器：

```
$('.odd') 
```

或者，如果您想将其定义为字段元素的子元素，您可以使用：

```
$('.field .odd') 
```

**更新**

要按位置选择特定元素，可以使用[:nth-child()](http://api.jquery.com/nth-child-selector/)选择器：

```
$('.field :nth-child(2)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:02:46.380

```
var e = $("dl dd:eq(1)");
e.text(e.text().slice(0,-1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:09:26.793

我认为这样的事情应该有效

```
$('dl dd').eq(1).text().replace(/,/g,""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:10:39.330

您可以使用[:nth-child()](http://api.jquery.com/nth-child-selector/) jQuery 选择器和 JavaScript 替换来进行字符串操作：

```
$('.field :nth-child(2)').val($('.field :nth-child(2)').val().replace(',', '')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:41:50.240

没有直接回答这个问题，但从你发布的内容来看，最好在服务器端去掉不需要的字符而不是使用 javascript/jquery。这将使页面更容易缓存并为用户带来更好的性能。

我假设该列表是使用使用 php 或类似的应用程序生成的。只需将`string replace`过滤器添加到生成 html 列表的任何函数中。

# android - 使用 http post 传递数据

> ID：15004101
> 
> 赞同：0
> 
> 时间：2013-02-21T13:58:35.213
> 
> 标签：android, http-post

我正在制作一个应用程序，它应该在单击按钮时做出响应，例如

```
-- REQUEST HEADERS --
User-Agent: XYZ
Host: root.url
Content-Type: application/json; charset=utf-8
Content-Length: 123
...

-- REQUEST BODY --
{
    "Apikey": "abcdefgh-ijkl-mnop-qrst-uvwxyz12345",
    "Imei": "0123456789012354"
    "Gps": {
        "Latitude": 1.23,
        "Longitude": 4.56
    },
    // Request specifics go here 
} 
```

如何使用 http post 方法传递这些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:07:57.153

嗨检查这个答案：

[https://stackoverflow.com/a/10410693/1168654](https://stackoverflow.com/a/10410693/1168654)

[http://localtone.blogspot.in/2009/07/post-json-using-android-and-httpclient.html](http://localtone.blogspot.in/2009/07/post-json-using-android-and-httpclient.html)

创建如下所示的数组并将其传递给`HttpPost`方法。

```
ArrayList<NameValuePair> nameValuePairs1 = new ArrayList<NameValuePair>();

nameValuePairs1.add(new BasicNameValuePair("user_id", ""));
nameValuePairs1.add(new BasicNameValuePair("product_id", ""));
nameValuePairs1.add(new BasicNameValuePair("product_review",""+text)); 
```

* * *

```
HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost(URL);

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs1));

HttpResponse responce = httpclient.execute(httppost);

HttpEntity entity = responce.getEntity();

is = entity.getContent();

BufferedReader bufr = new BufferedReader(new InputStreamReader(is1,"iso-8859-1"), 8);

StringBuilder sb = new StringBuilder();

sb.append(bufr.readLine() + "\n");

String line = "0";

while ((line = bufr.readLine()) != null) 

{

sb.append(line + "\n");

}

is1.close();

result = sb.toString(); 
```

该数组通过 url 传递并给你结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:11:43.670

由于您的 Web 服务在请求中期望 JSONObject，您**可以**使用**`setEntity()`**.

例如：

```
JSONObject objRequest = new JSONObject();
objRequest.put("Apikey","abcdefgh-ijkl-mnop-qrst-uvwxyz12345");
objRequest.put("Imei","0123456789012354");

JSONObject objGps = new JSONObject();
objGps.put("Latitude",1.23);
objGps.put("Longitude",4.56);

objRequest.put(Gps, objGps); 
```

现在，这是一种使用请求数据调用 Web 服务的方法：

```
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httpPost= new HttpPost(url);

     post.addHeader("Content-Type", "application/json; charset=utf-8");    // addHeader()    
     httpPost.setEntity(new StringEntity(objRequest.toString(),"utf-8"));  // request data

     HttpResponse response = httpclient.execute(httpPost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
 }catch(Exception e){
      Log.e("log_tag", "Error in http connection "+e.toString());
 } 
```

# java - 如何使用 AXL API CUCM 6 添加新的 ip phone cisco 和 Java 新线路？

> ID：15004103
> 
> 赞同：2
> 
> 时间：2013-02-21T13:58:43.393
> 
> 标签：java, cisco-axl, cucm

我想使用 Cisco Call Manager 6 的 AXL API 添加一个新的 IP 电话和 Java 新线路。这是我的代码：

```
 XRoutePartition partition = new XRoutePartition();
        partition.setName("PT_INTERNAL");

        XNPDirectoryNumber dirn = new XNPDirectoryNumber();
        dirn.setPattern("1006");
        dirn.setRoutePartition(partition);
        XLine phoneLine = new XLine();
        phoneLine.setDirn(dirn);

        XLine[] phoneLineArray = new XLine[1];
        phoneLineArray[0] = phoneLine;

        AddLineReq addLine = new AddLineReq();
        addLine.setNewLine(dirn);
        XIPPhone.Lines lines = new XIPPhone.Lines();
        lines.getLine().add(0, phoneLine);
        XIPPhone xp = new XIPPhone();

        xp.setName("SEP64168D50552C");
        xp.setDescription("Laroussi Nader Test");
        xp.setProduct("Cisco 7911");
        xp.setClazz("Phone");
        xp.setModel("Cisco 7911");
        xp.setProtocol("SCCP");

        xp.setProtocolSide("User");
        xp.setDefaultProfileName("Standard Common Phone Profile");
        //XDevicePool devicePool = new XDevicePool();
        //devicePool.setName("Default");
        xp.setDevicePoolName("Default");
        //XLocation location = new XLocation();
        //location.setName("Hub_None");
        xp.setLocationName("Hub_None");
        xp.setLines(lines);

        AddPhoneReq addPhoneReq = new AddPhoneReq(); 
        addPhoneReq.setNewPhone(xp);
        StandardResponse response = axlPort.addPhone(addPhoneReq); 
```

SOAP 响应是：**指定的名称包含无效字符或格式不适合此设备类型。**

我能做些什么来解决这个问题？谢谢

# java - 在 javafx 应用程序中单击对话框按钮时内存增加

> ID：15004106
> 
> 赞同：6
> 
> 时间：2013-02-21T13:58:51.423
> 
> 标签：java, memory-management, memory-leaks, javafx-2

我附上了以下 javafx 的示例应用程序，其中有一个用于对话框的对话框类。虽然单击按钮存在于对话框中 - 它的内存被提升太多。只是当对话框显示时-在taskmanager中支持它需要57kb，然后当我们单击按钮并处理对话框时-taskmanager显示其内存开始增加-最后它崩溃了，出现转储内存异常。

**示例Dialog.java**中有以下类 ：它显示对话框，带有确定 - 取消按钮 **MessageDialog.fxml**：这个 fxml 创建对话框 **MessageDialogController**是关联文件到 MessageDialog.fxml **JavaFXSample.java**是运行这个的主类样本。

**对话框.java**

```
package javafxsample;

import java.io.IOException;
import java.io.InputStream;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.fxml.JavaFXBuilderFactory;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.StageStyle;

/**
 *
 * @author Admin
 */
public class Dialog {

    public static void ShowinfoDialog(String title, String Message, Stage parentStage, double w, double h) {
        if (title == null || title.trim().isEmpty()) {
            title = "Info";
        }
        showMessageDialog(title, Message, parentStage, "sidetheme.png", w, h);
    }

    public static void showMessageDialog(String title, String Message, Stage parentStage, String image, double w, double h) {
        Stage stage = new Stage();
        MessageDialogController messageDialogController = (MessageDialogController) replaceScene("/javafxsample/MessageDialog.fxml", stage);
        messageDialogController.init(stage, Message, image);
        if (parentStage != null) {
            stage.initOwner(parentStage);
        }
        stage.initModality(Modality.APPLICATION_MODAL);
        stage.initStyle(StageStyle.UTILITY);
        stage.setResizable(false);
        if (title != null && !title.trim().isEmpty()) {
            stage.setTitle(title);
        }
        stage.setWidth(w);
        stage.setHeight(h);
//        Utility.setCentreLocation(stage, parentStage);
        InputStream inputStream = null;
        try {
            inputStream = Dialog.class.getResourceAsStream(image);
            stage.getIcons().add(new Image(inputStream));
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException ex) {
                }
            }
        }
        stage.showAndWait();
    }

    public static Initializable replaceScene(String fXml, Stage mystage) {
        InputStream in = null;
        try {
            FXMLLoader loader = new FXMLLoader();
            in = Dialog.class.getResourceAsStream(fXml);
            loader.setLocation(Dialog.class.getResource(fXml));
            loader.setBuilderFactory(new JavaFXBuilderFactory());
            AnchorPane page;
            try {
                page = (AnchorPane) loader.load(in);
            } finally {
                in.close();
            }
            Scene scene = new Scene(page);
            mystage.setScene(scene);
            return loader.getController();
        } catch (Exception ex) {
            System.out.println("Exception in replaceScene. " + fXml + ".Error:" + ex.getMessage());
            return null;
        }
    }
} 
```

**JavaFXSample.java**

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package javafxsample;

    import javafx.application.Application;
    import javafx.event.ActionEvent;
    import javafx.event.EventHandler;
    import javafx.scene.Scene;
    import javafx.scene.control.Button;
    import javafx.scene.layout.StackPane;
    import javafx.stage.Stage;

    /**
     *
     * @author JavaUser1
     */
    public class JavaFXSample extends Application {

        @Override
        public void start(final Stage primaryStage) {
            Button btn = new Button();
            btn.setText("   Click on ME  ");
            btn.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent event) {
                    Dialog.ShowinfoDialog("Sample", "Clicked on button", primaryStage, 400.0, 150.0);
                }
            });

            StackPane root = new StackPane();
            root.getChildren().add(btn);

            Scene scene = new Scene(root, 300, 250);

            primaryStage.setTitle("Hello World!");
            primaryStage.setScene(scene);
            primaryStage.show();
        }

        /**
         * The main() method is ignored in correctly deployed JavaFX application.
         * main() serves only as fallback in case the application can not be
         * launched through deployment artifacts, e.g., in IDEs with limited FX
         * support. NetBeans ignores main().
         *
         * @param args the command line arguments
         */
        public static void main(String[] args) {
            launch(args);
        }
    } 
```

**消息对话框.fxml**

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane id="AnchorPane" prefHeight="138.0" prefWidth="306.0" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxsample.MessageDialogController">
  <children>
    <TitledPane animated="false" collapsible="false" prefHeight="138.0" prefWidth="347.0" text="" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="-40.0">
      <content>
        <AnchorPane id="Content" minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0">
          <children>
            <GridPane prefHeight="112.0" prefWidth="282.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
              <children>
                <Label fx:id="lblicon" text="" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.rowIndex="0">
                  <GridPane.margin>
                    <Insets top="20.0" fx:id="x1" />
                  </GridPane.margin>
                </Label>
                <Label fx:id="lblMessage" text="" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="0">
                  <font>
                    <Font size="14.0" />
                  </font>
                  <GridPane.margin>
                    <Insets left="2.0" top="20.0" />
                  </GridPane.margin>
                </Label>
                <Separator prefWidth="200.0" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="1" />
                <Separator prefWidth="200.0" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="1">
                  <GridPane.margin>
                    <Insets top="4.0" />
                  </GridPane.margin>
                </Separator>
                <HBox id="HBox" fx:id="hBox" alignment="CENTER" spacing="5.0" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.halignment="CENTER" GridPane.rowIndex="2" />
              </children>
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="82.0" minWidth="82.0" prefWidth="82.0" />
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="-1.0" minWidth="10.0" prefWidth="220.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints maxHeight="-1.0" minHeight="10.0" prefHeight="68.0" vgrow="SOMETIMES" />
                <RowConstraints maxHeight="15.0" minHeight="15.0" prefHeight="15.0" vgrow="SOMETIMES" />
                <RowConstraints maxHeight="29.0" minHeight="29.0" prefHeight="29.0" vgrow="SOMETIMES" />
              </rowConstraints>
            </GridPane>
          </children>
        </AnchorPane>
      </content>
    </TitledPane>
  </children>
</AnchorPane> 
```

**MessageDialogController.java**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javafxsample;

import java.io.InputStream;
import java.net.URL;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

/**
 * FXML Controller class
 *
 * @author Admin
 */
public class MessageDialogController implements Initializable {

    @FXML
    private Label lblMessage;
    @FXML
    private Label lblicon;
    @FXML
    private HBox hBox;
    private Stage myStage;
    private String clicked = "cancel";

    /**
     * Initializes the controller class.
     */
    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // TODO
    }

    public void btnOkEvent(ActionEvent event) {
        clicked = "yes";
        myStage.close();
    }

    public void btnCancelEvent(ActionEvent event) {
        clicked = "no";
        myStage.close();
    }

    public void init(Stage stage, String Message, String image) {
        Button btnOk = new Button("OK");
        btnOk.setPrefSize(70.0, 23.0);
        btnOk.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                btnOkEvent(t);
            }
        });
        hBox.getChildren().add(btnOk);
        lblMessage.setText(Message);
        if (image != null && !image.trim().isEmpty()) {
            Image imageRunBackupPlan = new Image(getClass().getResourceAsStream(image));
            lblicon.setGraphic(new ImageView(imageRunBackupPlan));
        }
        this.myStage = stage;
    }

    public void init(Stage stage, String Message, String btnOkText, String btnCancelText, String image) {
        clicked = "cancel";
        Button btnOk = new Button(btnOkText);
        btnOk.setPrefHeight(23);
        Button btnCancel = new Button(btnCancelText);
        btnCancel.setPrefHeight(23);
        hBox.getChildren().addAll(btnOk, btnCancel);
        btnOk.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                btnOkEvent(t);
            }
        });
        btnCancel.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                btnCancelEvent(t);
            }
        });
        lblMessage.setText(Message);
        if (image != null && !image.trim().isEmpty()) {
            InputStream inputStream = null;
            Image imageRunBackupPlan = new Image(getClass().getResourceAsStream(image));
            lblicon.setGraphic(new ImageView(imageRunBackupPlan));
        }
        this.myStage = stage;
    }

    public String clickedOn() {
        return clicked;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T07:09:48.737

如果您的 Dialog.java 的目的只是创建一个对话框，则将其删除并使用它。它只是一个你必须导入到项目中的 jar 文件

[http://code.makery.ch/blog/javafx-2-dialogs](http://code.makery.ch/blog/javafx-2-dialogs)

# debugging - 您能否在 BIDS 中监视 SSIS 包在服务器上运行时的执行情况？

> ID：15004109
> 
> 赞同：7
> 
> 时间：2013-02-21T13:58:52.443
> 
> 标签：debugging, sql-server-2005, ssis, bids

虽然我的头衔说明了我目前的目标，但我对替代解决方案持开放态度。简而言之，我有一系列计划在我们的 SQL Server 机器上每晚运行的 SSIS 包。

由于我的公司 IT*以太网*中发生的各种更新，有时这些导出会停止，并且该过程将在工作中停止工作。为了解决这个过程，我在我的工作站上启动 BIDS 并重新启动哪个过程失败。这很有用，因为根据我的经验，从 BIDS 中生成的任何错误都比我从 SQL Server/包执行历史记录或服务器事件日志中发现的任何错误都要有用得多。

从历史上看，我的问题是并非所有问题都会出现在 BIDS 中，但它们会始终出现在服务器上。这些问题诊断起来很痛苦，并且花费了我很多时间。

因此，我想做的是将我的包发布到 SSIS 服务器，从 BIDS 启动服务器实例并在项目运行时对其进行监控。这可能吗？

如果没有，我还能做些什么，以便在流程执行时监控内部步骤？

我担心这一切都不可能，但我不得不问。这将使我的调试和故障排除生活变得更加轻松。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T14:36:30.453

### 可能的选项：

您需要利用*`Logging`*SSIS 中的功能。它允许您配置要为其捕获消息的事件。我通常更喜欢日志*`OnWarning`*并*`OnError`*跟踪包中出现的所有警告和错误消息。您有各种提供程序来保存日志记录数据。我更喜欢使用 SQL Server，以便我可以查询日志记录信息。

### SSIS 2012 中显示的日志记录选项：

*`Business Intelligence Development Studio (BIDS)`*如果您正在 SSIS 2005 - 2008 R2*`SQL Server Data Tools (SSDT)`*中开发包或正在 SSIS 2012 中开发包，则要启用包中的日志记录，您需要单击该包。

单击*`SSIS`*菜单，然后单击*`Logging...`*

您将看到配置 SSIS 日志对话框。

在左侧，您可以检查包或单个任务以记录事件数据。

在*Providers and Logs*选项卡上，您可以选择一个适当的提供程序来保存日志信息。下面的屏幕截图显示事件信息是使用连接管理器在 SQL Server 数据库中捕获的*`OLEDB_PracticeDB`*。

![配置 SSIS 日志 - 提供程序和日志](../Images/2d7d142a75e7331cc3f27d2a0c4e5cc8.png)

在*详细信息*选项卡上，您可以选择要捕获的事件。下面的屏幕截图显示我正在捕获以下事件。

*   *错误*
*   *信息*
*   *任务失败*
*   *警告*

感谢[@William Todd Salzman](https://stackoverflow.com/users/236348/william-todd-salzman)推荐*`OnTaskFailed`*活动

![配置 SSIS 日志 - 详细信息选项卡](../Images/f7d5a2b631d059f1545b9b2ddcbde388.png)

### 样品包装图：

假设我们有一个名为*`SO_15004109.dtsx`*Data *Flow Task*和*Script Task*的包。数据流任务只是一个内部没有组件的虚拟对象。

![示例包 - 数据流选项卡](../Images/a638d084d697a6e5a68406cac05045ab.png)

脚本任务在 Main 方法中有以下代码来触发自定义信息、警告和错误消息，因此我们可以观察它是如何在日志数据源中捕获的。该代码是为 SSIS 2012 编写的，因此您可能需要为 SSIS 2005 更改它。我之所以选择**`VB.NET`**不是，是因为您已在[sql-server-2005](/questions/tagged/sql-server-2005 "显示标记为“sql-server-2005”的问题")**`C#`**下标记了此问题，并且 SSIS 2005 仅支持 VB.NET。

### 用于 SSIS 2005 及更高版本的 VB.NET 中的脚本任务代码。

```
#Region "Imports"
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Runtime
#End Region

<Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute()> _
<System.CLSCompliantAttribute(False)> _
Partial Public Class ScriptMain
    Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase

    Public Sub Main()

        Dim fireAgain As Boolean = False
        Dts.Events.FireInformation(101, "Custom Script Information", "This is a test information message.", String.Empty, 0, fireAgain)
        Dts.Events.FireWarning(201, "Custom Script Warning", "This is a test warning message.", String.Empty, 0)
        Dts.Events.FireError(201, "Custom Script Error", "This is a test error message.", String.Empty, 0)

        Dts.TaskResult = ScriptResults.Success
    End Sub

#Region "ScriptResults declaration"

    Enum ScriptResults
        Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success
        Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
    End Enum

#End Region

End Class 
```

![脚本任务代码](../Images/9253ad29319e3a3823e6f3494d8273d9.png)

如果我们执行包，它将失败，因为我们在*Script Task*中引发了错误。

![包执行](../Images/17c594ea7d8738397d75dac50dc142ca.png)

如果您导航到记录错误的数据源，您会注意到如果您选择 SQL Server 日志记录提供程序，SSIS 会创建一个表来记录信息。下表列出了 SSIS 在选择作为日志提供程序的 SQL Server 数据库中创建的日志记录表。

```
SSIS Version   Log table name    Table type
-------------- ----------------  ----------
SSIS 2005      dbo.sysdtslog90   User
SSIS 2008      dbo.sysdtslog100  User
SSIS 2008 R2   dbo.sysssislog    System
SSIS 2012      dbo.sysssislog    System 
```

在数据库中执行以下查询以查看此示例包捕获的事件。您会注意到一些消息两次，因为每个容器和任务都记录了这些事件。之所以命名该表，是*`dbo.sysssislog`*因为该包是在 SSIS 2012 中创建的。

```
select id, event, source, message from dbo.sysssislog; 
```

![记录数据](../Images/86b0702ce26f93f7c9cb8af6a65f0efa.png)

### 个人日志记录经验：

我在查看日志记录错误消息以了解出了什么问题方面取得了相当大的成功。在我看来，不建议在生产环境中调试包。但是，最好捕获日志事件。

当我在 SSIS 2005 和 2008 工作时，我创建了基于 SSRS 的报告，该报告查询日志表以生成作业执行的每日报告并将 PDF 附件发送给感兴趣的人。

SSIS 2012 中的情况有所改进，该工具具有内置报告功能，[*集成服务目录*](http://msdn.microsoft.com/en-us/library/hh479588.aspx)可创建名为*`SSIDB`*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:16:31.357

在我目前的演出中，我们已经开始使用 Pragmatic Works 的一款名为[BIxPress](http://pragmaticworks.com/Products/BI-xPress)的产品，其中包括将日志代码注入现有 SSIS 包并在它们执行时监控正在运行的包的工具。它并不便宜，但我们发现它很有帮助。（特别是因为这意味着我们不必推出自己的监控代码......）

# ruby-on-rails - 针对远程主机测试 ActionMailer 交付

> ID：15004111
> 
> 赞同：0
> 
> 时间：2013-02-21T13:58:55.563
> 
> 标签：ruby-on-rails, cucumber, capybara, actionmailer

所以我有一个简单的场景，新注册的用户必须得到管理员的批准。批准后，他们会收到邮件通知。但是，测试在最后一步失败。这是点心：

```
@javascript
Scenario: approving users
  Given user exists with email: "user@site.com", approved: false
    And I am on the admin panel
  When I approve the user user@site.com
  Then user should exist with email: "user@site.com", approved: true
    And the page should have no "approve" items
    And an email should have been sent to "user@site.com" with the subject "user_mailer.notify_approved.subject" 
```

步骤定义（在[此处](http://pastie.org/6288724)）尝试在 ActionMailer 传递中查找邮件但找不到。

导致测试失败的原因是，在我的测试设置中，我告诉 Capybara 不要运行服务器实例，而是连接到远程服务器（使用自签名证书进行瘦身）。这是设置：

```
config.use_transactional_fixtures = false

config.include Devise::TestHelpers, type: :controller
config.include FactoryGirl::Syntax::Methods

config.before(:suite) do
  DatabaseCleaner.strategy = :truncation
end

config.before(:each) do
  DatabaseCleaner.start
end

config.after(:each) do
  DatabaseCleaner.clean
end

# have to run the test env server separately, e.g. with thin:
# thin start -p 5678 --ssl -e test
Capybara.configure do |c|
  c.run_server = false
  c.server_port = 5678
  c.app_host = "https://localhost:%d" % c.server_port
end 
```

显然，由于邮件是从远程测试服务器发送的，由 Capybara 单击批准链接触发的，因此缺少传递：

```
When /^I approve the user (.*?)$/ do |email|
  page.find(:xpath, "//tr[descendant::a[text()='#{email}']]/td[@class='actions']//li[@class='approve']/a").click
end 
```

所以问题是是否有办法以某种方式判断邮件在这种情况下是否真的送达了。我能想到的一种方法是扩展上面的步骤以在本地更新相应的用户实例，这将在本地执行相同的代码，但这似乎很臭。不使用 SSL 可能是另一个 w/a，但我真的应该通过 https 运行。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:49:33.807

好的，因为没有答案，我是这样解决的：

```
When /^I approve the user (.*?)$/ do |email|
  page.find(:xpath, "//tr[descendant::a[text()='#{email}']]/td[@class='actions']//li[@class='approve']/a").click

  u = User.find_by_email(email)
  u.approved = true
  u.save
end 
```

添加的三行确保邮件通知回调也在本地触发。

# php - 在没有foreach的PHP中按字符解析字符串

> ID：15004112
> 
> 赞同：1
> 
> 时间：2013-02-21T13:59:00.183
> 
> 标签：php, string, parsing

我想在php中进行以下转换：

```
from: "0110001" to: "Tuesdays, Wednesdays, Sundays". 
```

这样做的奖励积分：

```
from: "0110001" to: "Tuesdays, Wednesdays and Sundays". 
```

输入是七个字符，每个字符代表一周中的一天。

如果没有 foreach 循环，我怎么能做到这一点？我想使用 array_walk 或 array_reduce。

* * *

工作解决方案，但有一个 foreach ：

```
<?php

    function parseDays($str) {
      $days = array("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday");
      $result = array();
      foreach (str_split($str) as $k=>$v) {
        if ($v == '1') {
          $result[] = $days[$k];
        }
      }
      return join(', ', $result);
    }

echo parseDays("0110001"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:06:05.067

您可以只使用内置函数来完成第一个版本：

```
$daynames = array(
    'Mondays', 'Tuesdays', // etc
);

$in = "0110001";
echo implode(', ', array_intersect_key($daynames, array_filter(str_split($in)))); 
```

这是如何工作的：

1.  将输入拆分为 1 和 0 数组；至关重要的是，这个数组的键与`$daynames`.
2.  过滤掉零；幸运的是`array_filter`保留了密钥。
3.  用于`array_intersect_key`将键映射到`$daynames`.
4.  用于`implode`制作以逗号分隔的上述列表。

如果您想将最后一个逗号转换为`"and"`，最简洁的方法是正则表达式（我个人认为这个解决方案有问题，尽管不可否认它有效）：

```
echo preg_replace('/,(?=[^,]+$)/', ' and', implode(...)); 
```

## 然而

请不要忘记，最好的代码是不存在的代码（保证零错误！），其次是闭上眼睛就能理解的代码。

上面的代码当然不*属于*这些类别。我的专业建议是，`foreach`如果这会导致要维护它的人熟悉的代码，则使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:25:33.840

```
<?php

$bits = array();
$bits = str_split("0110001");

function print_day($key, $item) {

  $days_of_the_week = array(
    "0" => "Mondays",
    "1" => "Tuesdays",
    "2" => "Wednesdays",
    "3" => "Thursdays",
    "4" => "Fridays",
    "5" => "Saturdays",
    "6" => "Sundays",
  );

  if ($key) {
    echo $days_of_the_week[$item] . " ";
  }
}

array_walk($bits, 'print_day');

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:10:11.093

这应该做你需要做的事情

```
function convertDays($input) {
    $days = array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
    $dayNames = array_intersect_key($days, array_filter(str_split($input)));

    if (count($dayNames) < 2) {
        return implode(', ', $dayNames);
    }

    $commaSeparatedDays = array_slice($dayNames, 0, -1);
    return implode(', ', $commaSeparatedDays) . ' and ' . end($dayNames);
} 
```

# ios - 如何检查我的应用是否可以访问手机图库

> ID：15004114
> 
> 赞同：16
> 
> 时间：2013-02-21T13:59:06.110
> 
> 标签：ios, uiimage, gallery

我有一个应用程序，我在其中用相机拍照并将该图像存储到本机图库中。但是，如果应用程序没有权限，我希望用户知道这一点。那么我该如何检查呢？

顺便说一句：我将图像存储到图库中：

```
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-21T14:05:07.210

您需要检查状态`ALAssetLibrary` 以确保您已`AssetsLibrary/AssetsLibrary.h`包含在文件中

```
 ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus]; 
```

// 检查`ALAuthorizationStatusAuthorized`or的状态，`ALAuthorizationStatusDenied`例如

```
 if (status != ALAuthorizationStatusAuthorized) {
        //show alert for asking the user to give permission

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-03T01:22:32.870

斯威夫特 3

```
import photos

PHPhotoLibrary.requestAuthorization { status in
     switch status {
     case .authorized:
          self.processSnapShotPhotos()
     case .restricted:
          print("handle restricted")
     case .denied:
          print("handle denied")     
     default:
       // place for .notDetermined - in this callback status is already determined so should never get here
            break
     }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-12T06:47:37.687

如果您正在使用照片框架，因为 ALAsset 库已从 ios 9 中弃用，您可以使用 PHAuthorizationStatus 检查图库访问权限。您还需要导入照片框架。

```
 #import <Photos/Photos.h>

- (BOOL)hasGalleryPermission
{
    BOOL hasGalleryPermission = NO;
    PHAuthorizationStatus authorizationStatus = [PHPhotoLibrary authorizationStatus];

    if (authorizationStatus == PHAuthorizationStatusAuthorized) {
        hasGalleryPermission = YES;
    }
    return hasGalleryPermission;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T14:04:20.493

注意：仅限 iOS 6

这是你想要的

```
[ALAssetsLibrary authorizationStatus] == ALAuthorizationStatusAuthorized; 
```

authorizationStatus 的其他值是

```
ALAuthorizationStatusRestricted,        // This application is not authorized to access photo data.
                                            // The user cannot change this application’s status, possibly due to active restrictions
                                            //  such as parental controls being in place.
    ALAuthorizationStatusDenied,            // User has explicitly denied this application access to photos data.
    ALAuthorizationStatusAuthorized         // User has authorized this application to access photos data. 
```

# php - 通过 ID = ID 更新单个记录

> ID：15004118
> 
> 赞同：0
> 
> 时间：2013-02-21T13:59:12.437
> 
> 标签：php, html, mysql

我现在碰壁了，这段代码会在每条记录的末尾打开一个带有按钮的表格。一旦按下它，就会执行一个功能，将健康记录更新 -5。

这对这项工作很有用，但它会影响所有行，我试图让它只通过 ID 触及一条记录，但没有运气！如果您能提供帮助，那就太好了！

php

```
$sql="SELECT `id` , `FirstName` , `Health` FROM ajax_demo WHERE `id` = `id` LIMIT 0 , 30";
$result = mysql_query($sql);

if(isset($_REQUEST['submit']))
{
counterminus();
}
  function  counterminus()
{
$cmeter = $cmeter - 1;

$id = $_POST["id"];
$FirstName = $_POST["FirstName"];

mysql_query("UPDATE ajax_demo SET `Health` = `Health` - `Damage` WHERE id = {$id}");
Header("location:oo_test.php");
} 
```

这是 php / 表格

```
<?php 
echo 
"<table border='1'>
<tr>
<th>id</th>
<th>Firstname</th>
<th>health</th>
</tr>";

while($row = mysql_fetch_row($result)) {
    echo '<tr>';
    foreach($row as $cell) {
        echo "\n<td>$cell</td>";
}
echo '<td><form id="theForm" action="" method="POST" >
<input type="submit" name="submit"  id="submit" value="Attack" />
<input type="hidden" name="'.$row[1].'" /></form></td></tr>';
 echo "\n\n";
 }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:03:25.060

这很容易通过`$_POST['id']`变量进行攻击。通过 PDO 或 MySQLi使用`mysql_real_escape_string`或更好的准备查询，无论如何这与您遇到的问题是正交的，了解它只是一个好主意。

你从来没有真正提交一个名为 name 的 HTML 表单字段`id`。此外，在您的 HTML 中，`$row`将`NULL`在您的 while 循环之外，因此首先将是未定义的。这将意味着您的隐藏字段的名称将为空白，并且您的 SQL 说的是`UPDATE WHERE id=`，这是无效的并会导致错误。

要解决此问题，您需要提交一个名为“id”的表单字段，该字段`$_POST['id']`实际上包含一个值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T14:03:10.047

你为什么写 {id} 而不是 $id ？

此外，您的代码完全不安全，很容易被更改和黑客攻击。

您应该尝试使用 PDO 而不是 mysql_query 也已折旧。 [http://php.net/PDO](http://php.net/PDO)

# java - 如何从设置菜单（或 UI 中的其他位置）获取 Android 序列号或 Android ID

> ID：15004133
> 
> 赞同：4
> 
> 时间：2013-02-21T13:59:36.457
> 
> 标签：java, android, device

我通过使用代码获得了Android序列号

```
android.os.Build.SERIAL 
```

然后我将其与设置菜单中的序列号（设置-> 关于设备-> 状态-> 序列号）进行比较。

我已经对其进行了测试，似乎在某些设备（例如 Nexus）上，这两个代码是相同的，而在其他设备（例如 Galaxy Note）上，这两个代码完全不同：Java 代码返回一个 16 位字母数字（小写）代码，而在屏幕上我可以看到一个 11 位字母数字（大写）代码。

 - 这怎么可能？这两个代码是相同的，还是完全不同的？

 - 如果它们相同，有没有办法从两者之一转换为另一个？

 - 有没有更好的方法来识别设备？我知道我可以使用 

1.  电话设备 ID（IMEI、MEID、...），可通过以下方式获取：

    ```
    ` TelephonyManager tManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
     tManager.getDeviceId();`

    but not all devices are phones, and not all of them have this code; 
    ```

2.  Android ID，可通过以下方式检索

    `Secure.getString(context.getContentResolver(),Secure.ANDROID_ID);`

    但是我在“设置”菜单的任何地方都找不到它，我需要我的用户通过从用户界面读取它的代码来告诉我它的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T07:37:05.260

google play（免费）上的应用程序“Android id”显示不同的 ID，例如：

*   android_ID
*   android.os.build.serial
*   电话管理器设备ID
*   无线网络

# opengl - GL_CLAMP_TO_EDGE 不可用

> ID：15004137
> 
> 赞同：3
> 
> 时间：2013-02-21T13:59:55.527
> 
> 标签：opengl

我听说它`GL_CLAMP`已被弃用，但似乎我无权访问`GL_CLAMP_TO_EDGE`，应该改用它。我只能使用`GL_CLAMP`. 我正在使用 Visual Studio 2012。我该如何解决这个问题？

我检查了我的 OpenGL 版本，它是 3.1.0：

```
3.1.0 - Build 8.15.10.2418 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:17:35.260

引用[这个答案](https://stackoverflow.com/questions/3272831/opengl-sdk-on-windows)

> 微软已经有一段时间没有更新他们的 OpenGL 头文件/库了。要使用较新的功能，您通常需要使用 GLEW 或 GLEE。

而[这个答案](https://stackoverflow.com/questions/13492035/msvc-opengl-version-1-2-where-to-find)

> 要访问 OpenGL 1.2 或更高版本，您需要使用扩展加载机制。我建议你看看……看看 GLEW 或 GLEE。

GL_CLAMP_TO_EDGE 是在 OpenGL 1.2 版本中引入的

# sql - 从表的 SQL 中抓取/重新排列数据

> ID：15004139
> 
> 赞同：0
> 
> 时间：2013-02-21T14:00:08.690
> 
> 标签：sql

我在 sql 中有如下数据：

```
Month  PersonID  Level 
 01       102      2
 01       506      1
 02       617      3
 02       506      1
 03       297      2 
```

我需要查询这些数据以接收它以在看起来像这样的表中使用

```
 Jan  Feb  March ...etc
Level 1
Level 2
Level 3 
```

值是每个级别每个月有多少人。

我是一个完整的 SQL 菜鸟，所以任何帮助和解释答案的相关链接将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:09:57.117

试试这个：

```
SELECT 'Level' + CAST(level as varchar), [January], [February], [March]
FROM (SELECT DATENAME(month, '2013'+Month+'01') Month, PersonID, Level FROM Tbl) T
PIVOT
(
  COUNT(PersonID) FOR Month IN ([January], [February], [March])

) A 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/40390/14)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:06:17.580

```
SELECT 'Level ' + CAST("Level" AS VARCHAR(2)),
    SUM(CASE Month WHEN '01' THEN 1 ELSE 0 END) AS Jan,
    SUM(CASE Month WHEN '02' THEN 1 ELSE 0 END) AS Feb,
    SUM(CASE Month WHEN '03' THEN 1 ELSE 0 END) AS Mar,
    ...

FROM myTable
GROUP BY "Level" 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!6/31518/1)

这基本上是一个穷人的数据透视表，应该适用于大多数 RDBMS。它所做的是使用带有 CASE 的 SUM 来实现每个月的计数。也就是说，对于一月份，如果 = '01'，每行的值为 1 `Month`，否则为 0。将这些值相加得到表中所有“一月”行的总数。

该`GROUP BY Level`子句告诉引擎为 中的每个不同值生成一个结果行`Level`，从而按不同级别分隔数据。

* * *

由于您使用的是支持 的 SQL Server 2005，因此[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)您可以简单地执行以下操作：

```
SELECT 'Level ' + CAST("Level" AS VARCHAR(2)), 
    [01] AS [Jan], [02] AS [Feb], [03] AS [Mar], ...
FROM myTable
PIVOT
(
    COUNT(PersonId)
    FOR Month IN ([01], [02], [03], ...)
) x 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!6/31518/4)

# functional-programming - 尝试进一步了解OCaml的接口/模块

> ID：15004147
> 
> 赞同：0
> 
> 时间：2013-02-21T14:00:40.180
> 
> 标签：functional-programming, ocaml

我了解在 OCaml 中有 和 的`interfaces`概念`module`。

我现在明白如何使用它们了。

但是，我不明白如何充分利用它们。

* * *

例如，在 Java 中，假设我们有一个接口，并且`Map`我们也有一个实现。`Hashtable``HashMap``Map`

在代码中，我可以这样做：

```
Map m = new Hashtable();
m.put("key", value); 
```

有一天，如果我改变主意，我可以`Hashmap`通过更改为 来快速更改`Map m = new Hashtable();`为`Map m = new HashMap();`，对吗？

* * *

**但是我怎样才能在 Ocaml 中轻松做到这一点？**

例如，我在 OCaml 中有`MapSig`和 'HashMap:MapSig `and "Hashtable:MapSig`。

**如何轻松更改实现？**

我认为我不能，因为在 OCaml 中我必须这样做：

```
let m = Hashtable.create ();;

Hashtable.put m key value;; 
```

如果我想`HashMap`改用，我必须将代码中的每个替换为，对吗`Hashtable`？`HashMap`

* * *

## 编辑：

我不仅在寻找一种为模块创建别名的方法。我还考虑了实现的有效性，即实现是否遵循所需的接口。

例如，在上面的 Java 示例中，只有`HashMap`实现了`Map`接口，我才能替换`Hashtable`为`HashMap`. 否则，Java 编译器会报错。

但是如果我`module M = Hashtable`在 OCaml 中这样做，并且如果`HashMap`不遵循`MapSig`并且我替换`Hashtable`为`HashMap`，会发生什么？我认为编译器不会抱怨，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:23:58.047

从 3.12.1 开始，OCaml 允许使用以下语法来打开和别名模块：

```
let foo .... =
  let module HashTable = HashMap in (* magic is here *)
  let h = HashTable.create () in
  .... 
```

所以你只需要在你使用它的地方重命名你正在使用的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:54:20.193

这是一个示例，显示了我认为您要求的内容：

```
# module type HASH = sig type t val hash : t -> int end ;;
module type HASH = sig type t val hash : t -> int end
# module I = struct type t = int let hash i = i end ;;
module I : sig type t = int val hash : 'a -> 'a end
# module J = struct type t = int end ;;
module J : sig type t = int end
# module M : HASH = I ;;
module M : HASH
# module N : HASH = J ;;
Error: Signature mismatch:
       Modules do not match: sig type t = int end is not included in HASH
       The field `hash' is required but not provided 
```

额外的“ `: HASH`”指定模块必须匹配 HASH 签名（并且它也将其限制为该签名）。

顺便说一句，我相信 OCaml 模块系统因其表现力而闻名于世（至少在模块系统圈子中）。我仍然是初学者，但值得学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-25T04:38:12.210

您的 Java 示例和 OCaml 之间最直接的对应关系是使用函子（OCaml 将模块之间的静态函数称为模块）。因此，假设您在 OCaml 中实现了以下内容：

```
module type Map = sig
  (* For simplicity assume any key and value type is allowed *)
  type ('k, 'v) t

  val make : unit -> ('k, 'v) t
  val put : ('k, 'v) t -> ~key:'k -> ~value:'v -> unit
end

module Hashtable : Map = struct ... end
module HashMap : Map = struct ... end 
```

然后你会写一个这样的函子：

```
module MyFunctor(Map : Map) = struct
  let my_map =
    let map = Map.make () in
    Map.put map ~key ~value;
    map
end 
```

然后你将使用仿函数实例化一个模块：

```
module MyModule = MyFunctor(Hashtable) 
```

瞧，改变实现是一个单行差异，因为两个模块实现都符合`Map`签名：

```
module MyModule = MyFunctor(HashMap) 
```

# c# - 如何将 2 级深度 foreach 循环转换为 LINQ 表达式以生成字典 >?

> ID：15004152
> 
> 赞同：1
> 
> 时间：2013-02-21T14:00:58.117
> 
> 标签：c#, linq, c#-4.0

如何转换此功能：

```
void MyFunc () {
    foreach (var k in problems.Keys)
    {
        var list = new ObservableCollection<ListViewItem>();
        listViewItems.Add(k, list);
        foreach (var i in problems[k].Items)
        {
            list.Add(new ListViewItem
            {
                Token = i.Token,
                IsFatalError = i.IsFatal,
                Checked = false,
                Line = i.Token.Position.Line,
                Description = i.Description,
                BackgroundBrush = i.IsFatal ? Brushes.Red : null
            });
        }
    }
} 
```

到 LINQ 查询语法？以下是类型和变量：

```
public class ProblemsList {
    public class Problem {
        public IToken Token { get; set; }
        public string Description { get; set; }
        public bool IsFatal { get; set; }
    }
    public List<Problem> Items { get { return problems; } }
}

public class ListViewItem {
    public bool IsFatalError { get; set; }
    public bool Checked { get; set; }
    public int Line { get; set; }
    public string Description { get; set; }
    public Brush BackgroundBrush { get; set; }
}

Dictionary<string, ProblemsList> problems;

Dictionary<string, ObservableCollection<ListViewItem>> listViewItems
    = new Dictionary<string, ObservableCollection<ListViewItem>>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:11:57.720

这是我的做法（使用链式方法语法）：

```
listViewItems = problems.ToDictionary(
    p => p.Key,
    p => new ObservableCollection<ListViewItem>(
        p.Value.Items.Select(
            i => new ListViewItem
                {
                    Token = i.Token,
                    IsFatalError = i.IsFatal,
                    Checked = false,
                    Line = i.Token.Position.Line,
                    Description = i.Description,
                    BackgroundBrush = i.IsFatal ? Brushes.Red : null
                }
            )
        )
    ); 
```

* * *

### 更新

尽可能使用查询语法的版本：

```
listViewItems = (
        from p in problems
        select new
            {
                Key = p.Key,
                Value = from i in p.Value.Items
                        select new ListViewItem
                                {
                                    Token = i.Token,
                                    IsFatalError = i.IsFatal,
                                    Checked = false,
                                    Line = i.Token.Position.Line,
                                    Description = i.Description,
                                    BackgroundBrush = i.IsFatal 
                                                        ? Brushes.Red 
                                                        : null
                                }
            }
    ).ToDictionary(x => x.Key, x => x.Value); 
```

# box-api - 如何使用 box-api 获取共享项？

> ID：15004157
> 
> 赞同：1
> 
> 时间：2013-02-21T14:01:12.990
> 
> 标签：box-api

我可以举个例子，说明如何使用 box-api V2 使用共享链接 api 获取共享项目详细信息。

例如，如果文件夹是公开共享的

```
1\. Do I need use authorization in calling the API get the folder details ? 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:49:46.600

您需要查看文档以生成共享链接 ( [http://developers.box.com/docs/#files-create-a-shared-link-for-a-file](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file) ) 并获取有关文件和文件夹的信息.

如果您有权访问该文件，则可以“获取有关文件的信息”以确定是否启用了共享链接。如果否，则为 Null，如果已启用，则提供 Web URL 或下载 URL，以及“打开”、“公司”或“仅限合作者”链接。

但是，如果您不拥有或无权访问该文件，但有指向该文件的共享链接，您可能还需要查看此文档。 [http://developers.box.com/using-shared-items/](http://developers.box.com/using-shared-items/)

# c - 由于权限错误 (EACCES)，无法创建 POSIX 命名信号量

> ID：15004163
> 
> 赞同：1
> 
> 时间：2013-02-21T14:01:27.130
> 
> 标签：c, posix, solaris

这是困难的一个。

`sem_open`无论系统上没有信号量的名称如何（因此没有名称重叠的机会），都无法创建名为 semaphore ( ) 的 POSIX 。这是一个能够使用 shmget 创建共享内存的非特权用户。

**平台**：Solaris 10

**硬件**：Intel Xeon E5000 系列 CPU

在使用非特权用户运行 AMD CPU 的其他 Solaris 10 平台上不会发生。在 Linux 机器上不会发生。这些机器之间没有明显的区别，除了这台机器很可能是虚拟化的。

代码：

```
 const char* name = "/permission_test_semaphore";

    sem_t* sem = sem_open(name, O_CREAT | O_EXCL, 0644, 0);
    if (SEM_FAILED == sem)
    {
            printf("Could not create test semaphore %s, errno = %d\n", name, errno);
    } 
```

输出是：

```
Could not create test semaphore /permission_test_semaphore, errno = 13 
```

欢迎任何想法 - 我的希望没有实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:06:48.320

原因是`/tmp`目录中没有权限。用于创建 POSIX 命名信号量的 SunOS 实现需要在**硬编码** `/tmp`路径中创建文件。这在*SOLARIS Internals, Core Kernel Architecture* book, page 454 中有记录：

> POSIX 信号量代码使用**/tmp**文件系统来创建和存储代码内存映射的文件，这些文件基于**sem_open** (3R) 调用中传递的参数。

运行将在给出屏幕错误之前`truss <executable>`显示访问权限。`/tmp/.SEML<sem_name>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:06:57.220

首先想到的是安全或资源限制设置正在阻止它。我会浏览[http://docs.oracle.com/cd/E19575-01/821-0182/fxxtz/index.html](http://docs.oracle.com/cd/E19575-01/821-0182/fxxtz/index.html)以了解这方面的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:08:23.643

在 linux 上，POSIX 共享内存和信号量必须存在 /dev/shm。我怀疑 Solaris 需要类似的东西。

# sql-server - n 行到 n/2 列：Sqlserver

> ID：15004166
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:01:34.337
> 
> 标签：sql-server, sql-server-2008

我有这样的桌子

```
insert into attn (StaffNo, ADate, ATime) values ('12345',   '12-02-2013',   09.10)
insert into attn (StaffNo, ADate, ATime) values ('12345',   '12-02-2013',   10.03)
insert into attn (StaffNo, ADate, ATime) values ('12345',    '12-02-2013',   10.40)
insert into attn (StaffNo, ADate, ATime) values ('12345',   '12-02-2013',   17.30) 
```

我想要这种格式

输出：

```
 StaffNo        ADate       InTime     OutTime
      12333,      12-02-2013     09.10      10.03
      12333,      12-02-2013     10.40      17.30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:37:06.040

这样的事情将适用于您的示例行：

```
with attnJoin as
(
  select attn.StaffNo
  , attn.ADate
  , InTime = attn.ATime
  , OutTime = prev.ATime
  , eventNumber = row_number() over (partition by attn.StaffNo, attn.ADate order by attn.ATime)
  from attn
  outer apply
  (
    select top 1 ATime
    from attn prev
    where attn.StaffNo = prev.StaffNo
    and attn.ADate = prev.ADate
    and attn.Atime < prev.ATime
    order by ATime
  ) prev
)
select StaffNo
  , ADate
  , InTime
  , OutTime
from attnJoin
where eventNumber % 2 = 1 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/b20d2/12)。

然而，在某些情况下，这可能是不稳定的，例如丢失数据、多天等。只有在查看实时数据时才能确定。

此外，如前所述，设计可能存在更多基本问题，例如将时间与不需要的日期分开存储。如果您有一个指示哪一行进/出的标志，那也会更容易。

# javascript - 匹配任意（用户提供的）字符串的正则表达式

> ID：15004172
> 
> 赞同：0
> 
> 时间：2013-02-21T14:02:00.827
> 
> 标签：javascript, regex

用户将提供字符串，我想通过预定义字符串列表搜索该字符串。诀窍是用户的字符串可以是任何东西，并且可能包含正则表达式字符，如 [*.?^ 等。所以像

```
"first half of my regex"   + `USER_STRING` +  "second half of my regex" 
```

不会工作。一个明显的解决方案是将所有特殊字符`USER_STRING`与它们的转义对应项一起转义，但必须有更好的方法。

PS：另外，简单的字符串搜索不会做，因为我需要匹配字符串左侧和右侧的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:07:06.097

JavaScript 没有内置的正则表达式转义函数（例如，类似于 PHP 的`preg_quote`）。不过，有些人已经自己创建了一个等价物：[https ://stackoverflow.com/a/6829401/454533](https://stackoverflow.com/a/6829401/454533)

所以不，没有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:08:54.817

只需使用此函数确保在正则表达式中引用所有特殊字符并将其视为文字字符：

```
function escapeRegex(input) {
    return input.replace(/[[\](){}?*+^$\\.|]/g, '\\$&');
} 
```

该函数需要一个字符串作为输入，并输出一个所有特殊字符都已转义的字符串。这意味着创建一个字符串，可以将其馈送到`RegExp`构造函数以创建与原始字符串匹配的正则表达式。关于此方法的输出是否可以安全连接，请查看下面我的附加说明。

MDN 上[JS 正则表达式中所有特殊字符的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)列表。

*   这些没什么好说`^`的`$`，，，，，，，，。`.`_ `|`_ 这也有效地禁用了inside if the first character 和inside if the first character 的特殊含义。 跟在量词之后的 for和惰性匹配行为相同。 `*``?``+`
    `^``[]``?``()`
    `?`

*   `-`仅在内部有意义-但在,被转义`[]`时不再有意义。**如果**模板字符串是. 我不在这里模拟字符类的行为和内部字符类，但如果你愿意，你可以在上面的函数中添加正则表达式。`[``]`
    **`"[" + input + "]"``\Q``\E``-`**

***   `\``\`后面跟一些特殊的序列在转义时会失去意义。
    在相关说明中，我上面的方法失败的情况是模板字符串为`"\\" + input`. 但是，我会说***错误在于编写模板字符串的人***，因为这完全是胡说八道。

    *   `:`, `=`,`!`仅在内部有意义`()`（对于非捕获组和前瞻）并且必须在之后，但在和被转义`?`时也失去了意义。已经被转义了，所以当转义字符串插入到 之间时不会出现问题。 如果不转义这些，当模板字符串为. 我再次责怪写这篇文章的人，因为他们是允许注射的人。`(``)``?``()`
    `"(?" + input + ")"`

    *   `,`只是在里面有意义，但在被转义的时候就`{}`失去了意义。**转义失败的情况**是当您拥有模板字符串（例如，匹配初始化程序）时，但通常情况下，如果打算将它们作为文字字符匹配，则会转义并在模板字符串中。 也有重复的情况，但是模板字符串应该是，并且输入必须首先被清理。 `{``}`
    **`"\\w+ = {" + input + "}"``{``}`
    `".{" + start + "," + end + "}`**** 

 ****总之，模板字符串中的元字符必须正确转义才能使任何转义函数起作用。如果要在字符类中使用转义字符串，请添加`-`到字符类。****

# php - PHP + JSON - 处理不同的输出（错误和成功）

> ID：15004176
> 
> 赞同：0
> 
> 时间：2013-02-21T14:02:10.990
> 
> 标签：php, json

为简单起见，我使用 file_get_contents（带参数的 url）调用 API，然后解码返回的内容。

如果调用成功，我会收到如下回复：

```
Array ( 
[data] => Array ( 
    [internalName] => nemonorm 
    [name] => nemonorm 
    [acctId] => 28685607 
    [profileIconId] => 544 
    [revisionDate] => /Date(1361354064000)/ 
    [summonerLevel] => 30 
    [summonerId] => 24286314 
) 
[success] => 1 
```

)

我可以抓取这些数据。但是，如果 API 找不到用户名（在参数中传递），则它会响应以下内容：

```
Array ( 
      [success] => [error] => Summoner RandomName was not found.
) 
```

我的问题是，我如何判断它是成功回复（第一次响应），还是正确返回错误（第二次响应）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:06:30.083

你可以这样做

```
$var = file_get_contents(...);
if($var['success'])
    echo 'success';
else
    echo 'fail'; 
```

# php - 使用乌龟 svn 复制忽略属性？

> ID：15004181
> 
> 赞同：0
> 
> 时间：2013-02-21T14:02:24.517
> 
> 标签：php, svn, tortoisesvn

我找不到以下问题的好答案。

我们使用 windows 机器和 Tortoise svn 来维护我们的项目。我们创建一个存储库并进行结帐。

在这个结帐中，我们复制我们的基本“php 项目”并提交它。

假设我们有一些文件夹，例如：

资产/新闻/

资产/相册/

所有这些文件夹都应该有一个忽略模式来忽略其中的所有文件。因为我们不想提交文件，因为它们不应该更新到我们的生产环境中。

有没有办法为每个新存储库设置默认忽略或使用脚本在资产文件夹中的每个文件夹上添加忽略？

我尝试在根文件夹中添加一个 svn:ignore 作为“assets/*/*.*”，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:13:41.200

您只能设置`svn:ignore`该目录中的文件。

我有一个可以工作的[预提交钩子。](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)它允许您使用通配模式或正则表达式根据名称禁止将某些文件添加到存储库。

将此添加到控制文件中：

```
[ FILE You can't add files into the assets directory ]
file = **/assets/**
access = read-only
users = @ALL 
```

并且没有人能够添加或修改资产目录下的任何文件。在很多方面，它都比 svn:ignore 更好，后者本身可以被*忽略*。这是一个完全彻底的禁令。

# macos - 如何在 Weblogic 启动脚本中转义 OSX 上的空格

> ID：15004182
> 
> 赞同：0
> 
> 时间：2013-02-21T14:02:26.993
> 
> 标签：macos, bash, escaping, space

这是脚本有问题的部分：export JAVA_OPTIONS="-javaagent:/Users/tipton_g/Library/Application Support/IntelliJIdea12/jr-ide-idea/lib/jrebel/jrebel.jar $JAVA_OPTIONS"

找不到“应用程序支持”目录，因为无法识别空间。不幸的是，在这种情况下，Application\ Support 和“Application Support”（引号）都不起作用，因为整个参数都是一个字符串。

一个建议是我只是对文件进行符号链接，但我想知道当整个东西已经在引号内时是否有办法逃脱空间。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:17:48.847

我最终只是为文件创建了一个符号链接并引用了脚本中的符号链接。似乎工作正常，如果有点hacky。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T01:01:30.257

您可以下载 JRebel 的[ZIP 存档](http://zeroturnaround.com/software/jrebel/prev-releases)并将其解压缩到不包含空格的目录中。实际上，如果您使用 JRebel 代理从 IDE 启动容器，这就是 JRebel IntelliJ 插件正在做的事情 - 它将 jrebel.jar 复制到一个临时文件夹中，该文件夹中不包含路径中的空格，因此转义不会有任何问题.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:05:33.087

在路径周围添加单引号：

```
JAVA_OPTIONS="-javaagent:'/Users/tipton_g/Library/Application Support/IntelliJIdea12/jr-ide-idea/lib/jrebel/jrebel.jar' $JAVA_OPTIONS" 
```

但是，除非`$JAVA_OPTIONS` 在任何进一步的脚本中使用双引号，否则您将再次遇到此问题。

# r - 在 R 中创建具有组从属关系的列

> ID：15004183
> 
> 赞同：1
> 
> 时间：2013-02-21T14:02:27.160
> 
> 标签：r, grouping

假设我有一个包含“a”列的数据框，并且我想添加一个“b”列，其中包含指定间隔的组从属关系。我可以使用`cut`并`classIntervals`解决这个创建这样的函数：

```
 library(classInt)
    df<-data.frame(a=c(1:120))
    function.group.data<-
                    function(my.data,my.method,my.number){
                           cut(my.data,
                               breaks=data.frame(classIntervals(my.data,  
                                                                method=my.method,
                                                                n=my.number)[2])[,1]
                                ,include.lowest=T)
    }
    df$b<-function.group.data(df$a,"quantiles",10) 
```

但这有一些限制。例如，在 b 列中，组名有点像这样写下来`[1,12.9]`。出于绘图目的，我宁愿它们是这样的`01-12.9`矿石。

此外，我非常相信 R 中有一些内置函数，我不必发明新的东西。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:31:39.330

我不认为你可以格式化`cut`函数的标签。标签是使用“（a，b]”间隔表示法构造的。但是使用`gsub`和一些正则表达式，您可以格式化您的剪切输出。例如：

```
library(classInt)
x <- 1:120
b <- gsub('\\((.*)[,](.*)\\]','0\\1-\\2', 
          cut(x,classIntervals(x,10,'quantile',dataPrecision=2)$brks))
b <- as.factor(b)      ## because gsub returns a character
droplevels(head(b))    ## to remove extra levels(just for display here)
[1] <NA>    01-12.9 01-12.9 01-12.9 01-12.9 01-12.9
Levels: 01-12.9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:37:55.147

试试这个：

`levels(df$b) <- gsub('([^0-9]*)((?<=\\[|\\()[0-9\\.]*),([0-9\\.]*).*','\\2-\\3',levels(df$b),perl=T)`

编辑：更漂亮的正则表达式

`levels(df$b) <- gsub('.(.*),(.*).','\\1-\\2',levels(df$b),perl=T)`

# cvs - 在 cvs 中获取文件的最新修订信息的最短方法是什么？

> ID：15004185
> 
> 赞同：1
> 
> 时间：2013-02-21T14:02:33.090
> 
> 标签：cvs

为了获取有关某些文件的签入数据，我使用`cvs log filename`它打印所有修订的长列表。是否有更好的方法来获取仅最后一次签入信息（修订、数据、用户）。我看过`cvs log`选项，`-r`选项想要修订号。有没有办法在不知道修订号的情况下获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:49:06.033

`cvs log`根据[此参考页面](http://www-e815.fnal.gov/webspace/cvs/commands.html#log)，似乎没有办法只请求文件的最后修订。

`cvs log -N`不包括标签名称，以缩短输出，您可以通过管道将其通过`head -20`，例如，以减少输出量：

```
cvs log -N filename | head -20 
```

根据您想要获得的聪明程度 - 或者您想在这方面花费多少时间 - 您可以做得更好，通过使用`cvs status`为您提供文件当前版本号的事实，例如

```
cvs -Q status  Readme.Overview.txt
===================================================================
File: Readme.Overview.txt       Status: Up-to-date

   Working revision:    1.7
   Repository revision: 1.7     /cvsroot/tortoisecvs/TortoiseCVS/Readme.Overview.txt,v 
```

因此，您可以编写一个脚本，`Working revision`从该输出中提取值，然后将其传递给`cvs log -r`.

# visual-studio - 在 Visual Studio 2008 中为自定义构建步骤设置工作目录

> ID：15004194
> 
> 赞同：3
> 
> 时间：2013-02-21T14:03:09.057
> 
> 标签：visual-studio, visual-studio-2008, visual-c++, working-directory, custom-build-step

是否可以在 Visual Studio 2008 C++ 项目中为“自定义构建步骤”命令设置工作目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:04:10.617

我不知道您是否可以设置默认工作目录，但您可以在自定义构建步骤中自行更改。

在具有自定义构建步骤的文件的“***属性页”对话框中，选择“******命令行***”字段并单击`...`按钮：

![属性页对话框](../Images/c05c5cb2ff75813c4e8a858fbbdf5f60.png)

在***命令行***对话框中，您可以添加多个命令，所有这些命令都将为自定义构建执行。要将工作目录更改为**C:\MyFolder**并启动位于该文件夹中的**MyProgram.exe ，请添加以下行：**

![命令行对话框](../Images/81f022d5046d494f9007f6256f840986.png)

另一种方法是在 bat 文件中定义所有这些，例如**MyCustomBuild.bat并在*****命令行***字段中调用它：`call MyCustomBuild.bat`

# php - 将数据传递给模型 CI

> ID：15004196
> 
> 赞同：-2
> 
> 时间：2013-02-21T14:03:10.287
> 
> 标签：php, mysql, codeigniter, select

感谢@Mischa 在这里帮助我。

回答 ：

模型 ：

```
function validate_login($username, $password) {
        $bcrypt = new Bcrypt(17);

        $sql = "SELECT * FROM users WHERE username = ? ";
        $loginQ = $this -> db -> query ($sql, array($username));
        $database = $loginQ->row();

        $hash = $database->password;
        if ($bcrypt -> verify($password, $hash)){
            return $loginQ;
        }
    } 
```

控制器 ：

```
function validate_credentials() {
        $this -> load -> library('form_validation');
        $this -> load -> library('bcrypt'); 

        $this -> form_validation -> set_rules('username', 'Username', 'required|alpha_numeric|min_length[4]|max_length[15]');
        $this -> form_validation -> set_rules('password', 'Password', 'required|min_length[7]|alpha_dash|max_length[20]');

        if ($this -> form_validation -> run() == FALSE) {
            $this -> index();
        } else {
            $this -> load -> library('bcrypt');     
            $this -> load -> model('login_model');

            $username = $this -> input -> post('username');
            $password= $this -> input -> post('password');

            if ($loginQ = $this -> login_model -> validate_login($username, $password)) {
                if ($activated = $this -> login_model -> activated($username)) {
                    $session_array = array('username' => $this -> input -> post('username'), 'loggedin' => TRUE);
                    $this -> session -> set_userdata($session_array);
                    redirect('staff_controller/index');
                } else {
                    $this -> session -> sess_destroy();
                    $this -> load -> view('accessdenied_view');
                    $this -> output -> _display();
                    die();
                }
            } else {
                $this -> index();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:08:01.533

您尝试执行的操作仅在将数据传递给视图时才有效。您只需将单独的变量传递给您的模型。像这样的东西：

```
function validate_login($username, $password) {
  $bcrypt = new Bcrypt(17);

  $sql = "SELECT * FROM users WHERE username = ? LIMIT ? ";
  $loginQ = $this -> db -> query ($sql, array($username, 1));
  $row = $loginQ->result();

  $hash = $row['password'];
  if ($brcrypt -> verify($password, $hash)){
    return $loginQ;
  }
} 
```

当然，这意味着您还必须更改控制器代码以分别传递这些变量。

另一种选择是在您的模型中使用`$date['username']`和`$data['password']`，但我不建议这样做，因为它会使您的代码更难阅读。

**更新以使其更清晰：**

控制器：

```
$username = $this->input->post('username');
$password = $this->input->post('password');
$this->login_model->validate_login($username, $password); 
```

模型：

```
function validate_login($username, $password) {
  // Etc.
} 
```

# php - 如何设置一个 cronjob 每隔一个星期三运行 5 次？

> ID：15004198
> 
> 赞同：0
> 
> 时间：2013-02-21T14:03:23.693
> 
> 标签：php, cron

我需要每隔一个星期三运行 5 次脚本。更复杂的是，脚本需要在每次运行之间暂停至少 1 小时，1 小时 10 分钟会很好。

我需要这个暂停，因为它是一个时事通讯发件人，它发送大量电子邮件，并且服务器的邮件限制是每小时 3000 封电子邮件。

所以脚本应该何时运行的例子：

```
Wednesday February 20th at 10.00, 11.10, 12.20, 13.30, 14.40.
Wednesday March 6th at 10.00, 11.10, 12.20, 13.30, 14.40.
Wednesday March 20th at 10.00, 11.10, 12.20, 13.30, 14.40.
Wednesday April 3th at 10.00, 11.10, 12.20, 13.30, 14.40. 
```

等等。

有可能吗，还是我应该以其他方式解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:06:53.240

您的发送逻辑（调度、节流等）实际上应该在应用程序本身中处理，而不是通过 cron。如果您将逻辑移至应用程序，您可以设置一个 cronjob 以每 10 分钟运行一次您的应用程序脚本，它只会在时间合适且应用程序告诉它发送时发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:15:33.530

PHP 中的 datetime 类也可用于获取日期和复杂的时间戳组合。您可以使用一个循环来计算所有未来的日子。这样，您可以索引星期三并使用偏移计数器来定义您希望它执行多少周和/或时间的延迟。

[http://us2.php.net/manual/en/book.datetime.php](http://us2.php.net/manual/en/book.datetime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:20:35.633

这是使用 php 管理 crons 的指南：http: [//net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

基本上你的 cron 将采用以下形式：

```
Minutes [0-59]  
|   Hours [0-23]  
|   |   Days [1-31]  
|   |   |   Months [1-12]  
|   |   |   |   Days of the Week [Numeric, 0-6]  
|   |   |   |   |  
1   2   3   4   5 home/path/to/command/the_command.sh 
```

您可能需要单独的作业来运行所需的模式，或者每 10 分钟运行一次作业并让您的脚本确定日期/时间是否正确

# mongodb - 使用接口通过mgo从数据库中检索

> ID：15004200
> 
> 赞同：1
> 
> 时间：2013-02-21T14:03:28.317
> 
> 标签：mongodb, interface, go, mgo

我有以下（未经测试的）功能：

```
func Execute(task MyInterface) {
    db := session.DB(task.Database()).C(task.Collection())
    var tasks []MyInterface
    db.Find(nil).All(&tasks)
    for _, t := range tasks { t.Do() }
} 
```

我想给我的函数一个实现 interface 的结构`MyInterface`。然后它应该从 mongodb 中检索一些值并在检索到的结构上调用一个方法。

问题是`error: reflect.Set: value of type bson.M is not assignable to type mypkg.MyInterface`- 有什么方法可以使这项工作？我尝试`tasks`使用原始结构的类型进行实例化，但无法使其正常工作。

任何帮助将不胜感激 - 谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:22:58.123

`mgo`无法创建`MyInterface`对象，因为 MyInterface 只是一个接口。尝试做：

```
myObject := &MyInterface{}  //fails 
```

我认为这基本上`mgo`是它试图解组的每条记录所要做的事情。

要实现您想要`tasks`的，请使用 type`[]map[string]interface{}`或`[]bson.M`（后者是前者的别名），然后：

```
for _, o := range tasks {
    t := &MyTypeThatImplementsMyInterface{ 
        Field1 : o["my_field"],
        //etc.  
    } 
    t.Do()
} 
```

要么，要么制作`tasks`一个类型 ( `var tasks []MyStructType`) 的对象切片，它实现`MyInterface`并且其字段与数据库中 bson 对象的键和值类型匹配。如果您存储的数据的类型不止一种，那么这可能不起作用`MyInterface`，因此上面的 map 切片选项。

另外，请谨慎使用`Find(nil).All(&tasks)`. 如果您在该集合中有数百万条记录，则根据记录的大小，您可能会出现内存不足。

# c# - 如何将 GridViewComboBoxColumn 绑定到多个字段？

> ID：15004201
> 
> 赞同：0
> 
> 时间：2013-02-21T14:03:30.000
> 
> 标签：c#, wpf, xaml, data-binding, telerik

我的 GridViewComboBox ItemsSource 是一个可观察的联系人集合。它在两列中同时显示 FullName 和 PhoneExtension。组合框是我的 Telerik WPF RadGridView 中的一列。GridViewComboBoxColumn（不工作）xaml 如下所示：

```
<telerik:GridViewComboBoxColumn Name="contactsComboBox"  Header="Contact"
   DisplayMemberPath="FullName"
   SelectedValueMemberPath="FullName"
   ItemsSource="{Binding ContactListObservable}"
   DataMemberBinding="{Binding PhoneExtension}" >

    <telerik:GridViewComboBoxColumn.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition  Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Text="{Binding FullName}" />
                <TextBlock Text="    Phone: "  Grid.Column="1" />
                <TextBlock Text="{Binding PhoneExtension}"  Grid.Column="2" />
            </Grid>
        </DataTemplate>
    </telerik:GridViewComboBoxColumn.ItemTemplate>
</telerik:GridViewComboBoxColumn> 
```

我想同时绑定 FullName 和 PhoneExtension，但似乎 DataMemberBinding 中只能有一个字段。我不确定 DisplayMemberPath 或 SelectedValueMemberPath 中的内容。

我也愿意使用事件而不是绑定。如果您可以同时显示 AddHandler 和组合框的 SelectionChangedEvent 的代码，将不胜感激。

**如何将我的多列 GridViewComboBox 绑定到多个字段？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:36:33.817

嗨，一种方法是覆盖 ToString() 方法，另一种方法是使用 Converter。

```
 public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        Students = new ObservableCollection<Student>();
        Students.Add(new Student() { Name = "abc", RollNo = 1, Course = "MCA" });
        Students.Add(new Student() { Name = "xyz", RollNo = 1, Course = "MCA" });
        Students.Add(new Student() { Name = "pqr", RollNo = 1, Course = "MCA" });
        Students.Add(new Student() { Name = "stu", RollNo = 1, Course = "MCA" });
    }
    public ObservableCollection<Student> Students { get; set; }
}

public  class Student
{
    public string Name { get; set; }
    public string Course  { get; set; }
    public int RollNo { get; set; }

    public override string ToString()
    {
        return this.Name + "  " + this.Course;
    }
}

<ComboBox ItemsSource="{Binding Students}"/> 
```

另一种方法是使用转换器，如

```
 public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        if (value is Student)
            return ((Student)value).Name + "  " + ((Student)value).Course;
        else
            return null;

    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:44:51.190

我认为将 MultiBinding 与 MultiValueConverter 一起使用应该可以为您解决问题。[请参阅此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)上的示例

该示例显示如何将 text 属性绑定到从 2 个绑定属性 FirstName 和 LastName 计算的值

```
<telerik:GridViewComboBoxColumn  
                    ItemsSource="{Binding}">
   <telerik:GridViewComboBoxColumn.DisplayMemberBinding>
      <MultiBinding Converter="{StaticResource myNameConverter}"
                  ConverterParameter="FormatLastFirst">
         <Binding Path="FullName"/>
         <Binding Path="PhoneExt"/>
      </MultiBinding>  
   </telerik:GridViewComboBoxColumn.DisplayMemberBinding> 
```

DisplayMemberBinding 似乎是您希望组合框下拉显示的内容。DataMemberBinding 是您想要获取/设置回商店的内容。例如，您可以向用户显示“电话号码，分机”，但在选择更改时，只会修改电话分机值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:00:31.623

这是我解决这个问题的方法（我正在回答我自己的问题）。

首先是我使用的 Multibinding TypeConverters：

```
public class CombineFullNameAndPhoneExtensionMultiConverter : IMultiValueConverter
{
    public object Convert(object[] values,
                          Type targetType,
                          object parameter,
                          System.Globalization.CultureInfo culture)
    {
        if (values[0] as string != null)
        {
            string fullName = (string)values[0] ?? "Unknown";
            string phoneExtension = (string)values[1] ?? "Unknown";
            string namePlusExtension = fullName.Trim() + "    Phone: " + phoneExtension.Trim();
            return namePlusExtension;
        }
        return null;
    }

    public object[] ConvertBack(object value,
                                Type[] targetTypes,
                                object parameter,
                                System.Globalization.CultureInfo culture)
    {
        NotesContact c = (NotesContact)value;

        string[] returnValues = { c.FullName.Trim(), c.PhoneExtension.Trim() };
        return returnValues;
    }
}

public class CombineLastNameFirstNameAndPhoneExtensionMultiConverter : IMultiValueConverter
{
    public object Convert(object[] values,
                         Type targetType,
                         object parameter,
                         System.Globalization.CultureInfo culture)
   {
       if (values[0] as string != null)
       {
           string lastName = (string)values[0] ?? "Unknown";
           string firstName = (string)values[1] ?? "Unknown";
           string phoneExtension = (string)values[2] ?? "Unknown";

           string lastCommaFirstPlusExtension = lastName.Trim() + ", " + firstName.Trim() + "    Phone: " + phoneExtension.Trim();
           return lastCommaFirstPlusExtension;
       }
       return null;
   }

   public object[] ConvertBack(object value,
                               Type[] targetTypes,
                               object parameter,
                               System.Globalization.CultureInfo culture)
   {
       throw new NotImplementedException();
   }
} 
```

以下是 xaml 中的 Converter 声明：

```
<local:CombineFullNameAndPhoneExtensionMultiConverter x:Key="combinedFullNameAndPhoneExtensionConverter"/>
<local:CombineLastNameFirstNameAndPhoneExtensionMultiConverter x:Key="combinedLastNameFirstNameAndPhoneExtensionConverter"/> 
```

现在这里是 ComboBox xaml：

```
<telerik:GridViewComboBoxColumn Name="contactsGridViewComboBox"  Header="Contact"
        ItemsSource="{Binding ContactListObservable, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}">
<telerik:GridViewComboBoxColumn.CellTemplate>
    <DataTemplate>
        <TextBlock>
            <TextBlock.Text>
                <MultiBinding  Converter="{StaticResource combinedFullNameAndPhoneExtensionConverter}">
                        <Binding Path="FullName"/>
                        <Binding Path="PhoneExtension"/>
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </DataTemplate>
</telerik:GridViewComboBoxColumn.CellTemplate>
<telerik:GridViewComboBoxColumn.CellEditTemplate>
    <DataTemplate x:Name="ContactsCellEditTemplate">
        <Grid FocusManager.FocusedElement="{Binding ElementName=ContactsTemplateComboBox}">
            <telerik:RadComboBox x:Name="ContactsTemplateComboBox" IsSynchronizedWithCurrentItem="False" IsEditable="False" ItemsSource="{Binding ContactListObservable, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"  IsDropDownOpen="True" TextSearchMode="Contains" IsFilteringEnabled="True" OpenDropDownOnFocus="True">
                <telerik:RadComboBox.SelectedItem>
                    <MultiBinding Converter="{StaticResource combinedFullNameAndPhoneExtensionConverter}">
                        <Binding Path="FullName" UpdateSourceTrigger="PropertyChanged"/>
                        <Binding Path="PhoneExtension" UpdateSourceTrigger="PropertyChanged"/>
                    </MultiBinding>
                </telerik:RadComboBox.SelectedItem>
                <telerik:RadComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock DataContext="{Binding}">
                            <TextBlock.Text>                                                        
                                <MultiBinding  Converter="{StaticResource combinedLastNameFirstNameAndPhoneExtensionConverter}">                             
                                    <Binding Path="LastName"/>                                                                                                                                                             <Binding Path="FirstName" />
                                    <Binding Path="PhoneExtension"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </DataTemplate>
                </telerik:RadComboBox.ItemTemplate>
            </telerik:RadComboBox>
        </Grid>
    </DataTemplate>
</telerik:GridViewComboBoxColumn.CellEditTemplate> 
```

请注意，我使用了**Multibinding**、**CellTemplate**（在查看模式下获取或设置单元格的数据模板）和**CellEditTemplate**（在编辑模式下获取或设置单元格的数据模板）。由于我的时间不多了，我让代码自己说话。如果您需要澄清，请发表评论，如果这太令人困惑，请发布新的 Stack Overflow 问题。我非常感谢 SO 社区。你摇滚！

# c# - 如何在c#中快速上传文件到服务器

> ID：15004203
> 
> 赞同：1
> 
> 时间：2013-02-21T14:03:34.847
> 
> 标签：c#

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("request_uri_string");
FileStream fileStream = new FileStream("path_to_my_file", FileMode.Open, FileAccess.Read); 
Stream requestStream = request.GetRequestStream(); 
byte[] buffer = new Byte[checked((uint)Math.Min(4096, (int)fileStream.Length))];   
int bytesRead = 1;
while (bytesRead != 0)
{
    bytesRead = fileStream.Read(buffer, 0, buffer.Length);
    if (bytesRead > 0)
    {
        requestStream.Write(buffer, 0, bytesRead);
    }
} 
request.Close(); 
fileStream .Close(); 
```

目前我正在使用上面的代码。

还有比这更好的方法（意味着 FAST）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:09:07.990

不确定这是否更快，但更具可读性：

```
using (var webClient = new WebClient())
{
    webClient.DownloadFile(remoteFileUrl, localFileName);
} 
```

编辑：

既然`WebClient`是`IDisposable`，它应该被妥善处理（我补充说`using`）。

MSDN 说：

> 此方法使用`RETR`命令下载 FTP 资源。对于 HTTP 资源，使用该`GET`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:14:55.490

这是 WebClient 的所有方法：http: [//msdn.microsoft.com/en-us/library/ekfaaeay.aspx](http://msdn.microsoft.com/en-us/library/ekfaaeay.aspx)

您可以确定是要执行异步还是常规。对于 URI 和常规字符串路径，DownloadFile 有一些公开的方法。

# c# - 使用 linq 将通用列表转换为数据表 ..？

> ID：15004207
> 
> 赞同：2
> 
> 时间：2013-02-21T14:03:44.873
> 
> 标签：c#, linq, linq-to-dataset

```
List<Employee> objEmpList = new List<Employee>();
    for (int i = 0; i < 5; i++)
    { 
        objEmpList.Add(new Employee(){ID=i, Name="aa" + i});
    } 
```

我想使用 linq 或 lambda 表达式将通用列表项创建为行...如何做到这一点..?？我使用循环做到了，但我想使用 linq 做到这一点......！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T14:08:54.183

使用[CopyToDataTable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.copytodatatable.aspx)扩展。请参阅 msdn 文章[如何：在通用类型 T 不是 DataRow 的情况下实现 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)

```
DataTable table = objEmpList.CopyToDataTable(); 
```

顺便说一句，这里是创建员工列表的更简单方法：

```
Enumerable.Range(0,5)
          .Select(i => new Employee { ID = i, Name = "aa" + i })
          .ToList(); 
```

也考虑使用[NBuilder](http://nbuilder.org/)：

```
Builder<Employee>.CreateListOfSize(5).Build() 
```

# mysql - 社交网络应用程序的数据库设计是否正确或者我应该做一些修改？

> ID：15004210
> 
> 赞同：1
> 
> 时间：2013-02-21T14:04:02.610
> 
> 标签：mysql, database, database-design, relational-database, database-schema

我正在制作一个社交网络应用程序。数据库将是 MySQL 大约 10000。到目前为止，我已经有了以下数据库方案。

User-details（用户第一次注册时的这两张表）

数据库设计
User_Table(user_id,username,password);
个人信息(*user_id*,dob,sex,contact)

发布状态（当用户发布状态并在其他人的墙上更新时）我正在考虑为此制作 4 个单独的表格）

1.  用于发布具有唯一 ID 的状态。
2.  用于存储和检索喜欢该状态的人的姓名。
3.  用于存储和检索有关发表评论的人的状态和姓名的评论。
4.  用于检索对状态发表的评论的喜欢。

数据库Schema如下： Status_Table(*status_id*,user_id,status,date,time,no_of_likes,profile_pic_id) Likes_Table(status_id,username) Comment_Table(status_id,user_id,comment,comment_id,no_of_likes_on_comments) Likes_on_Comments(comment_id,username)

关注系统（就像 twitter）
数据库模式
关注者（user_id，followers_id）；

通知（对于喜欢、评论、标签、关注）
数据库模式
通知（notification_id、user_id、sender_id、status_id、type、is_seen）；

这个数据库设计最适合我的应用程序还是我应该想出一些改变？

我也不确定照片的实现。我应该在哪里存储所有用户的图片。（图片包括（个人资料图片，相册）是将其存储在数据库中的好方法还是应该将它们存储在文件系统中。并给出照片/相册的路径数据库？？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-17T11:45:37.017

关于您的架构的几条评论：

1）你应该考虑合并几个表。如果两个表具有“一对一”关系，并且从一个表到另一个表的信息之间存在很强的联系，那么您应该合并这些表。这将是 USER_TABLE 和 PERSONAL_INFO 的情况。

2) 关于 STATUS_TABLE、STATUS_LIKES、COMMENTS 和 COMMENTS_LIKES - 我会考虑将所有表格合并到两个表中 -

USER_ACTION - 将举行评论、图片发布或状态更改等操作。

LIKES - 将保存 USER_ACTION 表的喜欢。

# javascript - 使用 javascript 访问外部 CSS

> ID：15004211
> 
> 赞同：1
> 
> 时间：2013-02-21T14:04:02.620
> 
> 标签：javascript, css, canvas

JS：

```
var layer1 = document.getElementById('layer1');
ctx1 = layer1.getContext('2d'); 
layer1.style.zIndex=z1; //it is not working in my case 
```

CSS：

```
canvas#layer1 { 
z-index: 3;} 
```

如何访问这个外部 CSS，以及改变 z-index 的值。

* * *

我的错：

layer1.style.zIndex=cellValue; //不是 layer1.style.zIndex=z1; :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:09:14.227

尝试：

```
document.getElementById("layer1").style.zIndex = 3; 
```

**注意**：当你必须处理被分割的属性时，你必须在 JavaScript 中使用 CamelCase 样式`-`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:11:10.460

```
var canvas=document.getElementById('layer1');
canvas.styles.zIndex=anyIntegerValue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:12:59.073

这是一种只注入 CSS 规则而不固定在引用中定位它们的通用方法。适用于所有浏览器。

```
function css_add_inline( css_code ) {
    var div = document.createElement( "div" );
    div.innerHTML = "<p>x</p><style>" + css_code + "</style>";
    document.body.appendChild(div.childNodes[1]);
}

css_add_inline( "#layer1 { z-index: 3 !important }" ); 
```

看到这个东西在行动： http: [//pp19dd.com/2012/01/add-inline-css-or-remote-css-file-with-javascript/](http://pp19dd.com/2012/01/add-inline-css-or-remote-css-file-with-javascript/)

# c# - 如何使用 TopShelf 无法识别的命令行参数？

> ID：15004212
> 
> 赞同：23
> 
> 时间：2013-02-21T14:04:06.240
> 
> 标签：c#, .net, windows-services, topshelf

当我通过 TopShelf 安装并启动它作为 Windows 服务时，我想将一些自定义参数传递给控制台应用程序。

当我使用：

```
MyService install start /fooBar: Test 
```

控制台应用程序失败：

> [失败] 命令行 发现未知的命令行选项：DEFINE: fooBar = Test

**问题：**

我怎样才能让我的论点被 TopShelf 识别，以便我可以使用它们的值？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-18T17:27:08.573

编辑：这仅在运行 .exe 时有效，在作为服务运行时无效。作为替代方案，您可以将该选项添加为配置值并在启动时读取它（无论如何这可能是更好的做法）：

```
using System.Configuration;

// snip

string foobar = null;

HostFactory.Run(configurator =>
{
    foobar = ConfigurationManager.AppSettings["foobar"];

    // do something with fooBar

    configurator.Service<ServiceClass>(settings =>
    {
        settings.ConstructUsing(s => GetInstance<ServiceClass>());
        settings.WhenStarted(s => s.Start());
        settings.WhenStopped(s => s.Stop());
    });

    configurator.RunAsLocalService();
    configurator.SetServiceName("ServiceName");
    configurator.SetDisplayName("DisplayName");
    configurator.SetDescription("Description");
    configurator.StartAutomatically();
}); 
```

* * *

根据文档，您需要以这种模式指定命令：

```
-foobar:Test 
```

您还需要在服务配置中添加定义：

```
string fooBar = null;

HostFactory.Run(configurator =>
{
    configurator.AddCommandLineDefinition("fooBar", f=> { fooBar = f; });
    configurator.ApplyCommandLine();

    // do something with fooBar

    configurator.Service<ServiceClass>(settings =>
    {
        settings.ConstructUsing(s => GetInstance<ServiceClass>());
        settings.WhenStarted(s => s.Start());
        settings.WhenStopped(s => s.Stop());
    });

    configurator.RunAsLocalService();
    configurator.SetServiceName("ServiceName");
    configurator.SetDisplayName("DisplayName");
    configurator.SetDescription("Description");
    configurator.StartAutomatically();
}); 
```

# python - Python进程间通信，获取从另一个Python进程开始的独立进程（不是子进程）的pid

> ID：15004214
> 
> 赞同：0
> 
> 时间：2013-02-21T14:04:09.487
> 
> 标签：python, process, communication, pid

我有一个感觉应该很简单的问题。作为旁注，我已经在使用该`multiprocessing`模块，所以我有点不愿意使用该`subprocess`模块。无论如何，我有一个 Python 程序，它通过该函数`foo.py`启动另一个 Python 程序。`bar.py``os.system()`

```
os.system("start python bar.py") 
```

由于其他复杂的原因，这必须以这种方式完成，而不是启动某种子进程。问题是，我想知道`bar.py`. 最优雅或最有效的方法是什么？目前，我通过`bar.py`将其 pid 写入临时文件以`foo.py`供读取来解决此问题，但我觉得必须有更好的方法。

顺便说一句，显然很容易`bar.py`知道 的 pid `foo.py`，因为`foo.py`可以使用`os.system`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:08:16.280

多处理！=子进程

您仍然可以在多处理中使用子进程，而不是 os.system('...') 并通过在 Popen 对象上键入“.pid”来获得所需的内容。

正如您[在此处](http://docs.python.org/2/library/subprocess.html#replacing-os-system)看到的，子进程可以（并且您应该使用它！）替换 os.system。

在您的情况下，您需要进程 ID，因此您可以创建一个 Popen 对象，就像在[此处](http://docs.python.org/2/library/subprocess.html#replacing-os-popen-os-popen2-os-popen3)找到的示例中一样。然后让我们写几行代码：

```
import subprocess
args = ['/path/to/python', 'bar.py']
process = subprocess.Popen(args, shell=True, creationflags=subprocess.CREATE_NEW_CONSOLE) # you can also set only shell=True
print process.pid 
```

# android - 获取点击的 ListView 项目编号

> ID：15004215
> 
> 赞同：0
> 
> 时间：2013-02-21T14:04:09.467
> 
> 标签：android

如何获取单击的列表视图项目的编号，然后我可以通过 Intent 发送该编号？

**例子**

我单击列表项编号 2 并返回 1（因为它们从 0 开始）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T14:08:20.737

onItemClick 在您单击列表项时被调用，第三个参数是单击的项目的索引。

```
ListView listview = (ListView) findViewById(R.id.listview);

listview.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
    {
       Log.i.("app","I clicked item number " + position);
       //int position is your index , 0,1,2 etc.
       Intent myIntent = new Intent(this, Next.class);
       myIntent.putExtra("itemNumber",position);
       startActivity(myIntent);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:07:41.127

[`ListView.getCheckedItemPosition()`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPosition%28%29)是你的朋友。

# c++ - std::vector 推送速度？

> ID：15004221
> 
> 赞同：6
> 
> 时间：2013-02-21T14:04:37.090
> 
> 标签：c++, performance, containers

我正在使用向量来管理我的大型结构数据。但是突然，当我发现`vector`源代码时，我很惊讶地看到下面的一些代码：

```
inline void push_back(const _Ty& _X)
    {insert(end(), _X); }
//...

void insert(iterator _P, size_type _M, const _Ty& _X)
    {
//////////////////////////////////////////////////////////////
        iterator _S = allocator.allocate(_N, (void *)0);
        iterator _Q = _Ucopy(_First, _P, _S);
        _Ufill(_Q, _M, _X);
        _Ucopy(_P, _Last, _Q + _M);
        _Destroy(_First, _Last);
        allocator.deallocate(_First, _End - _First);
//////////////////////////////////////////////////////////////
    } 
```

它是**“破坏”**然后**重新分配**其整个矢量数据的片段代码。这太烦人了，因为我的结构尺寸很大，一个向量必须管理​​数百个元素，而我只使用`vector::operator []`and `vector::push_back()`，尤其是**`pushing back`**占用了我大部分的程序时间（这很耗时）。就我而言，有没有更好的容器可以比`std::vector`, 而我尝试 google 但没有运气？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T14:14:13.537

每次向量超过其当前*容量时，分配复制删除（或 C++11 中的分配移动删除）仅发生一次。*每次这样的重新分配，容量都会翻倍。这会随着时间的推移而平均化，因此 的*摊销复杂度*是[`push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)恒定的。

[`reserve()`](http://en.cppreference.com/w/cpp/container/vector/reserve)您可以使用其成员函数预先分配向量的容量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:11:06.467

[在添加元素之前保留](http://www.cplusplus.com/reference/vector/vector/reserve/)您需要的所有空间会解决您的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:11:19.387

仅当您的向量大小超过其容量时才会发生重新分配。如果您提前（甚至粗略地）知道您的向量将包含多少项目，您可以使用它的[保留](http://www.cplusplus.com/reference/vector/vector/reserve/)成员来预先分配足够的容量。即使在填充向量时，您也可以自己以受控方式触发重新分配，以减少调用的次数，从而获得更好的性能。

现在，如果您想要保证恒定时间插入，则可以使用一些容器，但需要权衡取舍（例如，`std::list`将分配许多小内存块，这些内存块最终可能不会比您当前的向量使用更快，`new`因为慢，而且内存使用也会更重要，并且您会丢失随机访问，但请确保*每次*插入所花费的时间与其他插入大致相同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:11:29.480

如果您知道最终数据大小，则可以使用它`reserve`来预分配向量所需的内存。这将删除所有重新分配和复制。

如果您不知道确切的大小，请根据您对传入数据的了解进行有根据的猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:05:05.267

向量是一个动态扩展的容器，但它的内容需要在一个连续的内存块中（我记得，这在 C++11 之前没有指定，但每个人都这样做了）。所以如果你的vector已经有8个元素，而vector当前的容量是8个元素，那么当你push_back第9个元素时，容器必须为更大的容量分配新的空间，复制容器中已经存在的8个元素，将第 9 个元素复制到新空间，然后销毁旧空间。如果您使用的是 C++11，并且您的元素支持移动构造，那么 8 个副本可以变成 8 个移动。或者，如果您想产生管理指针的开销，您可以存储指向元素的指针而不是元素（复制指针很便宜，但现在您需要处理寿命问题）。

至于哪个容器比向量快，这是一个很大的开放式问题。它取决于各种访问/操作模式。std::list 被提及为候选人。O(1) 添加到列表的末尾，但可能比向量使用的摊销 O(1) 更大。您失去了对容器的随机访问权。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T14:09:53.713

众所周知，大部分时间是`push_back()`恒定的，但是当`size()`到达`capacity()`.

如果您想要恒定时间插入，您必须尝试 a`std::list`或 a `std::deque`。特别是 a`std::deque`在靠近其接口中的向量的同时，为在容器末尾的插入提供了正确的性能。

[从cpp 参考中](http://www.cplusplus.com/reference/deque/deque/)提取：

> 因此，它们提供了与向量相似的功能，但在序列的开头也可以有效地插入和删除元素，而不仅仅是在序列的结尾。但是，与向量不同，双端队列不能保证将其所有元素存储在连续的存储位置，因此不允许通过偏移指向元素的指针进行直接访问。

# iolanguage - 使用 Future 抛出`调度程序：没有什么可以恢复，所以我们正在退出`

> ID：15004224
> 
> 赞同：3
> 
> 时间：2013-02-21T14:04:47.167
> 
> 标签：iolanguage

我在玩Io的Futures。我有一些方法可以做一些工作：

```
a := method(10 + 20)
b := method(20 + 30)
c := method(30 + 40) 
```

我想同时运行它们。这按预期工作：

```
m := method(list(@a, @b, @c))

f := @m
writeln((f join(" + ")) .. " = " .. f sum) 
```

但是，将创建字符串的工作移到方法`m`中不起作用：

```
m := method(
    s := list(@a, @b, @c)
    ((s join(" + ")) .. " = " .. (s sum))
)

f := @m
writeln(f) 
```

这引起了`Scheduler: nothing left to resume so we are exiting`.

为什么？我有什么不明白的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T07:30:57.723

这是交互式解释器中的一个错误。如果您将代码放在文件中，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T20:03:54.077

我没有你的问题的答案，但我相信这个错误与你的问题无关，因为我遇到它在解释器中做更简单的工作。

```
Io> 1 proto
==> 0
Io> 5 proto
==> 0
Io> 0 proto
==> 0
Scheduler: nothing left to resume so we are exiting
  ---------
  Coroutine callStack                  A4_Exception.io 244
  Coroutine backTraceString            A4_Exception.io 274
  Coroutine showStack                  A4_Exception.io 177
  Coroutine pause                      A4_Exception.io 286 
```

然后我再次尝试了该命令，它工作正常：

```
╰─➤  io
Io 20110905
Io> 0 proto
==> 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-11T07:51:36.927

在 io 源代码目录中：

1.  `rm ./libs/iovm/source/IoVMInit.c`
2.  打开`./libs/iovm/io/A4_Exception.io`并取消注释此行 `//Exception raise("Scheduler: nothing left to resume so we are exiting")`
3.  重建并重新安装

# jquery - 我的 jQuery Deferred() 用法有什么问题？

> ID：15004225
> 
> 赞同：1
> 
> 时间：2013-02-21T14:04:53.023
> 
> 标签：jquery, jquery-deferred

我正在尝试使用 Deferred 正确排序对 API 的删除调用。该应用程序处理项目和图像：

```
Item:
ItemId

Images:
ImageId
ItemId 
```

所以在删除与之关联的项目之前必须删除图像，否则我的 DeleteItem() ajax 调用将在数据对象中返回错误。

在下面的代码中，我试图在进行任何 DeleteItem() ajax 调用之前对所有 DeleteImage() ajax 调用进行分组。

```
var deferreds1 = [];  
var deferreds2 = [];   

...
// push()ing an unknown number of DeleteImage() ajax calls to deferred1 
// push()ing an unknown number of DeleteItem() ajax calls to deferred2
...

if (deferreds1.length > 0) {
    $.when
        .apply($, deferreds1)
        .then(function(){
             console.log('deferred1 then');
             $.when
                  .apply($, deferreds2)
                  .then(function() {
                       console.log('deferred2 then');
                  })
                  .fail(function() {
                       console.log('deferred2 fail');
                  });
             })
         .fail(function(){
              console.log('deferred1 fail');
         });
}

function DeleteItemImage() {
    var dfd = $.Deferred();

    $.ajax({
        ...
        success: function (data) {
            if (!data.success) {
                alert('error');
            }
            dfd.resolve();
        }
        ...
    }); 

    return dfd.promise();
}

function DeleteItem() {
    var dfd = $.Deferred();

    $.ajax({
        ...
        success: function (data) {
            if (!data.success) {
                alert('error');
            }
            dfd.resolve();
        }
        ...
    }); 

    return dfd.promise();
} 
```

似乎大多数时间都是按照预期的顺序拨打电话，但并非总是如此。帮助我找到我确定我错过的一个小细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:33:14.710

看起来您在解决所有延迟`DeleteItem`之前调用您的函数。`DeleteItemImage`我认为你需要这样做。

```
var deferreds1 = [];  
var deferreds2 = [];   

...
// push()ing an unknown number of DeleteImage() ajax calls to deferred1 
// do not call DeleteItem here.  Wait until all of deferreds1 are resolved.
...

if (deferreds1.length > 0) {
    $.when
        .apply($, deferreds1)
        .done(function(){
             console.log('deferred1 done');
             // NOW call DeleteItem and add to deferreds2,
             // since now all the Images are deleted.
             deferreds2.push(DeleteItem()); // for each item...
             $.when
                  .apply($, deferreds2)
                  .done(function() {
                       console.log('deferred2 done');
                  })
                  .fail(function() {
                       console.log('deferred2 fail');
                  });
             })
         .fail(function(){
              console.log('deferred1 fail');
         });
} 
```

# c# - GeckoWebBrowser 框架导航

> ID：15004226
> 
> 赞同：1
> 
> 时间：2013-02-21T14:04:54.313
> 
> 标签：c#, winforms, frame, gecko

是否可以在文档中导航某些框架？WebBrowser 之类的东西

```
HtmlWindow frame = webBrowser1.Document.Window.Frames["main"]; 
frame.Navigate("http://" + webBrowser1.Url.Host + "/some_page.php"); 
```

# mobile - 智能手机浏览器分辨率

> ID：15004227
> 
> 赞同：0
> 
> 时间：2013-02-21T14:04:59.187
> 
> 标签：mobile, responsive-design, windows-phone

我一直在为基于视口尺寸的网站编写 HTML5/jQuery 响应模板。我正在使用 HTC 8X 进行一些测试，虽然设备的屏幕分辨率为 1280x720，但浏览器中视口的宽度报告为 320 像素纵向和 480 横向（纵向反转）？

虽然这本身不是问题，但我想知道为什么会发生这种情况？这是否会在所有智能手机（iOS、“Droid 和 Windows Phone”）中发生。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:16:09.430

windows mobile 和 iOS 中的浏览器支持 meta MobileOptimized 来告诉浏览器要报告什么资源。

IE。您可以通过使用告诉浏览器报告和反应，就好像它是 320 宽一样

```
<meta name="MobileOptimized" content="320"/> 
```

# javascript - addPoint 使用 highcharts (javascript)

> ID：15004230
> 
> 赞同：2
> 
> 时间：2013-02-21T14:05:03.423
> 
> 标签：javascript, highcharts

我已经开始使用 highcharts.js，但无法在我的条形图中添加新点：每次进入 addPoint 时，Firefox 都会冻结 :( 我正在使用 Firebug，当它尝试添加点时，它总是冻结 :(

```
// if no graph
if (! charts[0])
{
    // make chart table
    var round_ids = [];
    var total_players = [];
    var total_bets = [];
    $.each(last_rounds_cache.last_rounds_data, function(index, value)
        {
            round_ids.push(Number(value[0]));
            total_players.push(Number(value[2]));
            total_bets.push(Number(value[3]));
        }
    )

    charts[0] = new Highcharts.Chart({
        chart: {
            renderTo: 'players_per_round',
            type: 'column',
            events: {
                click: function(e) {
                    // find the clicked values and the series
                    var x = e.xAxis[0].value,
                        y = e.yAxis[0].value,
                        series = this.series[0];

                    // Add it
                    series.addPoint([x, y]);

                }
            }
        },
        title: {
            text: 'Players/Bets per Round'
        },
        xAxis: {
            categories: round_ids,
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Rainfall (mm)'
            }
        },
        legend: {
            layout: 'vertical',
            backgroundColor: '#FFFFFF',
            align: 'left',
            verticalAlign: 'top',
            x: 10,
            y: 10,
            floating: false,
            shadow: true
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ this.y;
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: 'Players',
            data: total_players
        }, {
            name: 'Bets',
            data: total_bets
        }]
    });
}
else
{
    if (newChartsPoints.length > 0)
    {

        $.each(newChartsPoints, function(index, value)
        {
            // retreive data
            var temp_round_id = value[0];
            var temp_total_players = value[1][0];
            var temp_total_bets = value[1][1];

            // add points
            var series = charts[0].series;
            series[0].addPoint([temp_round_id, temp_total_players], false);
            series[1].addPoint([temp_round_id, temp_total_bets], false);

            // add categories
            categories = charts[0].xAxis[0].categories;
            categories.push(temp_round_id);
            charts[0].xAxis[0].setCategories(categories, false);
            charts[0].redraw();
        });
    }
} 
```

# jquery - WCF GET URL 长度限制问题：错误请求 - 无效 URL

> ID：15004232
> 
> 赞同：20
> 
> 时间：2013-02-21T14:05:08.340
> 
> 标签：jquery, ajax, wcf, browser, get

我尝试使用 GET 方法通过 jQuery AJAX 调用访问 WCF 服务。因此，有时 URL 带有参数很长。

当参数变得如此冗长时，jQuery AJAX 调用会失败，并且什么也不返回。所以我放了一个断点，把网址拿出来测试。当我在浏览器中尝试相同的 URL（我尝试了 FireFox 和 Chrome）时，当 URL 长度太长时，它会返回以下内容。

> **错误请求 - 无效的 URL**
> 
> HTTP 错误 400。请求 URL 无效。

我也检查了长度限制。当 URL 中的字符数（以编码格式）超过 1011 个字符（包括 http://）时，只有我得到错误。

任何人都有同样的情况并找到任何解决方案？是 Windows 限制还是可以通过任何设置以编程方式进行管理？

我尝试了 POST 方法，但我不知道我不能让它工作。因为它需要一些 web.config 更改。

**编辑**

我测试生成错误的 URL

```
http://localhost:64973/Member.svc/SaveMemberWithDetail/%7B%22ID%22%7C%222%22,%22TypeID%22%7C%222%22,%22Title%22%7C%22Mr.%22,%22FirstName%22%7C%22Firnas%22,%22MiddleName%22%7C%22%22,%22LastName%22%7C%22Aliyar%22,%22Gender%22%7C%221%22,%22DateOfBirth%22%7C%222000-01-01%22,%22Nationality%22%7C%22Sri%20Lankan%22%7D/%5B%7B%22AddressLine1%22%7C%22Changed%20Address%20Line1%22,%22AddressLine2%22%7C%22Colombo%22,%22City%22%7C%22Colombo%2010%22,%22State%22%7C%22WP%22,%22PostCode%22%7C%2201000%22,%22CountryID%22%7C%221%22,%22ID%22%7C%227%22,%22TypeID%22%7C%221%22%7D%5D/%5B%7B%22Telephone%22%7C%22015154645%22,%22TypeID%22%7C%221%22%7D%5D/%5B%7B%22EmailAddress%22%7C%22gen1@dfs%22,%22ID%22%7C%2226%22,%22TypeID%22%7C%221%22%7D,%7B%22EmailAddress%22%7C%22gen2@jfasd%22,%22ID%22%7C%2227%22,%22TypeID%22%7C%221%22%7D,%7B%22EmailAddress%22%7C%22g1@e.cm%22,%22ID%22%7C%2228%22,%22TypeID%22%7C%221%22%7D,%7B%22EmailAddress%22%7C%22g2@gogle.com%22,%22ID%22%7C%2229%22,%22TypeID%22%7C%221%22%7D,%7B%22EmailAddress%22%7C%22g@go.com%22,%22ID%22%7C%2229%22,%22TypeID%22%7C%221%22%7D%5D/%7B%7D/481 
```

URL 的未编码版本：

```
http://localhost:64973/Member.svc/SaveMemberWithDetail/{"ID"|"2","TypeID"|"2","Title"|"Mr.","FirstName"|"Firnas","MiddleName"|"","LastName"|"Aliyar","Gender"|"1","DateOfBirth"|"2000-01-01","Nationality"|"Sri Lankan"}/[{"AddressLine1"|"Changed Address Line1","AddressLine2"|"Colombo","City"|"Colombo 10","State"|"WP","PostCode"|"01000","CountryID"|"1","ID"|"7","TypeID"|"1"}]/[{"Telephone"|"015154645","TypeID"|"1"}]/[{"EmailAddress"|"gen1@dfs","ID"|"26","TypeID"|"1"},{"EmailAddress"|"gen2@jfasd","ID"|"27","TypeID"|"1"},{"EmailAddress"|"g1@e.cm","ID"|"28","TypeID"|"1"},{"EmailAddress"|"g2@gogle.com","ID"|"29","TypeID"|"1"},{"EmailAddress"|"g@go.com","ID"|"29","TypeID"|"1"}]/{}/481 
```

我的参数是一组 Json 对象。我认为任何字符都不会导致问题，因为如果我只是将几个字母数字字符减少到小于限制，它就可以工作。

我在 Windows 8 Professional 中的 Visual Studio 2012 Premium 中运行我的应用程序，所以它是 .NET 4.5 和 IIS Express。

**进一步的研究**

当我尝试进一步调查时，这不是我已经提到的限制，即完整 url 的长度。但是，每个参数的长度限制为 260 个字符。

所以，我不确定 URL 总长度，但每个参数（由“/”分隔）都有限制。我发布的上述 URL 的问题是电子邮件地址 JSON 参数的长度为 261 个字符，如下所示。

```
[{"EmailAddress"|"gen1@dfs","ID"|"26","TypeID"|"1"},{"EmailAddress"|"gen2@jfasd","ID"|"27","TypeID"|"1"},{"EmailAddress"|"g1@e.cm","ID"|"28","TypeID"|"1"},{"EmailAddress"|"g2@gogle.com","ID"|"29","TypeID"|"1"},{"EmailAddress"|"g@go.com","ID"|"29","TypeID"|"1"}] 
```

如果我从中删除 1 个字符，它会起作用。

是浏览器限制吗？操作系统限制？

**更新：解决方案**

当我对此进行进一步研究时，我找到了一个对我有用的解决方案。我在这里更新，因为它可能对遇到这个问题的其他人有用。

**这是一个 IIS 设置**

问题是因为，REST url 中每个参数的默认字符限制是 260，这是在注册表中定义的。

因此，您必须更新注册表以增加运行 IIS 服务器/IIS Express 的大小限制。

以下是注册表的位置：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\HTTP\Parameters 
```

值名称是`UrlSegmentMaxLength`. 如果它不存在，请创建一个 Type of `REG_DWORD`。并指定更高的值，`value data`例如十六进制的 1000 或十进制的 4096。

这是一个 http.sys 设置。有关 http.sys 设置的更多信息：http: [//support.microsoft.com/kb/820129](http://support.microsoft.com/kb/820129)

确保重新启动服务器/机器以应用注册表更改。就是这样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-09-08T12:09:39.590

**将更新重新发布为答案，因为你们中的一些人可能会直接跳到答案部分。**

当我对此进行进一步研究时，我找到了一个对我有用的解决方案。我在这里更新，因为它可能对遇到这个问题的其他人有用。

这是一个 IIS 设置

问题是因为，REST url 中每个参数的默认字符限制是 260，这是在注册表中定义的。

因此，您必须更新注册表以增加运行 IIS 服务器/IIS Express 的大小限制。

以下是注册表的位置：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\HTTP\Parameters 且值名称为 UrlSegmentMaxLength。如果它不存在，请使用 REG_DWORD 类型创建一个。并为数值数据指定更高的值，例如十六进制的 1000 或十进制的 4096。

这是一个 http.sys 设置。有关 http.sys 设置的更多信息：http: [//support.microsoft.com/kb/820129](http://support.microsoft.com/kb/820129)

确保重新启动服务器/机器以应用注册表更改。就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T15:22:10.070

需要考虑的几件事：

1）您不应该使用 GET 来保存数据，尽可能使用 POST。主要原因与安全有关。使用 GET 可以让您面临更多潜在的 CSRF 攻击。请记住，POST 不能免受 CSRF 的影响，但使用它可以稍微减少漏洞。

2) 查看 URL，逗号在我看来不合适，这可能是您收到无效 URL 错误的原因。

3) 你在哪个版本的 IIS 下运行？这可能决定了您必须做些什么来增加最大 URL 长度。

对于 IIS7，您可以在配置文件中添加到 System.Web：

```
<httpRuntime maxUrlLength="2000" /> 
```

**编辑：**

您应该再次尝试将其更改为 POST，因为它不会尝试将其映射到文件系统。

从[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)，windows api 只允许 260。

> 在 Windows API（以下段落中讨论的一些例外情况）中，路径的最大长度为 MAX_PATH，定义为 260 个字符。本地路径按以下顺序构造：驱动器号、冒号、反斜杠、由反斜杠分隔的名称组件和终止空字符。例如，驱动器 D 上的最大路径是“D:\some 256-character path string”，其中“”表示当前系统代码页的不可见终止空字符。（字符 < > 在此处用于视觉清晰，不能作为有效路径字符串的一部分。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T07:57:32.683

通过编辑记录，它解决了我的错误请求 400 的问题，但在我添加之前仍然对我不起作用，

```
<httpRuntime maxUrlLength="6144" relaxedUrlToFileSystemMapping="true" /> 
```

请注意，我尝试在编辑我的记录之前添加此配置，但它没有工作，所以我想在编辑记录之后并使用此配置我设置得很好。可以帮助别人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-15T00:38:15.400

添加另一个答案只是为了完整性。就我而言，我在 web.config 中有所有正确的值：

```
 <system.web>
    ...
        <!--Make sure to keep maxAllowedContentLength and maxRequestLength are in Synch-->
        <!--This is for ASP.NET and is in KBytes-->
        <httpRuntime maxRequestLength="50000" maxUrlLength="3000" maxQueryStringLength="3000"/>
    </system.web>
...
  <system.webServer>
    <security>
      <requestFiltering>
        <!--This is for IIS7+ and is in Bytes (Equivalent to 50MB)-->
        <requestLimits maxAllowedContentLength="52428800" maxQueryString="3000" />
      </requestFiltering>
    </security>
  </system.webServer>
... 
```

但是，我仍然在其中一台 IIS 服务器上收到 400 错误。经过更多的调查和配置比较，原来是 UrlScan IIS 模块是罪魁祸首。通过卸载模块或编辑 UrlScan.ini 文件以修改最大长度值，问题已得到解决：

```
...
[RequestLimits]
MaxAllowedContentLength=104857600
MaxUrl=3000
MaxQueryString=3000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T16:01:04.827

上述解决方案对我有用：

maxQueryStringLength="3000" maxUrlLength="3000"

和上面的注册表修复。

# database-design - 如何为应用程序设计数据库以处理多个国家/地区的特殊需求

> ID：15004234
> 
> 赞同：1
> 
> 时间：2013-02-21T14:05:12.597
> 
> 标签：database-design, architecture

在开发多区域应用程序时，在数据库设计方面，处理货币差异、工作日和时间差异等问题的最佳实践是什么？

*   您是否为每个不同的地区/国家创建单独的数据库？
*   有一个不受国家或地区特性影响的公用表的数据库，然后为每个特殊地区创建单独的数据库？
*   将它们全部放在一个数据库中，并具有关系父子引用，例如 Country 表、Currencies 表、Charges 表等。

还有一个工作日的问题，几乎每个国家和每年都会有所不同。假设代理商将在每个工作日收取罚款，因为他们没有银行收款，因为每个国家/地区都不同，在设计数据库时如何处理这个问题。

我可能有点混淆了我的问题，但我希望本质足够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:27:30.593

除非您有其他要求（例如可扩展性/冗余），否则最好的方法是将所有内容保存在单个数据库实例中，定义一个收集您感兴趣的所有国家/地区的表（以及它们特定于国家/地区的属性）。

例如：

```
Country-cd |Country-Name | Currency | Language | Time-zone | Region-cd
     it      Italy           EUR         IT        MET         EMEA
     ...     ...             ...         ...       ...         ...
     jp      Japan           JPY         jp        JST         Far-East 
```

然后使用国家代码作为可能具有特定国家内容的其他表的键的一部分......比如价格：

```
 Item-id  | Country-cd  | Valid-from  | Valid-to    | Amount x unit
 950595   |    IT       | 03-MAY-2013 |  31-DEC-2099|    23.56 
 950595   |    JP       | 01-FEB-2013 |  12-AUG-2013|  2643.00
 950595   |    JP       | 13-AUG-2013 |  31-DEC-2099|  2810.00 
```

因此，同款商品在意大利售价为 23.56 欧元，而在 2 月 1 日至 8 月 12 日期间，它将以 2643 日元的价格在日本出售，然后价格将上涨至 2810 日元。

**几个警告**

1.  我使用了国家和货币的 ISO 代码。这应该足够强大以避免将来出现问题。为了上帝的爱，请勿将特定于应用程序的代码用于状态或货币等内容。即使你是为世界的一小部分设计它，比如，不知道......“德语国家”（德国、奥地利、瑞士的一部分）抵制使用 GER/AUS/SWI 之类的东西或任何其他东西的诱惑不标准。
2.  时区管理起来非常麻烦。我把它和国家放在同一张表中只是为了说明什么样的数据应该与国家条目相关联，但实际上有些国家跨越多个时区（俄罗斯、美国），因此您可能需要一个更复杂的模式。
3.  在上面的第 (2) 点之上，如果您的应用程序真的存在于单实例数据库中，您必须确定如何向用户显示时间的规则并*坚持下去。*始终如一。见下文。

跨世界应用程序的问题在于，您可能在班加罗尔拥有一台服务器，而用户在罗马。因此，您基本上有两种选择-您可以使用实际服务器“驻留”的时区为每个操作添加时间戳，并让用户根据差异进行心理调整，或者您仍然使用特定时区为所有操作添加时间戳（您当然可以使用UTC 而不是本地时间，这也适用于其他方法）并在显示时自动将其转换为用户本地时区。

因此，您的数据库中可能会存储“在 UTC 2014 年 5 月 12 日 00:34 创建的记录”之类的内容，并向我显示“记录是在 2014 年 5 月 12 日 01:34 MET 创建的”，因为我正在使用您来自意大利的应用程序.

（这将证明对用户来说更容易，特别是如果应用程序允许他们创建带有时间作为输入的条目 - 例如预订会议室 - 但在开发方面会花费您更多，并且可能会变得有点复杂管理当可以从不同的时区更新相同的记录时）。

这些是基础知识，真的……当然，您还必须阅读有关[I18N](http://en.wikipedia.org/wiki/Internationalization_and_localization)的内容，并决定是否希望错误消息和 UI 标签是多语言的。I18N 主要关心这一点（即如何管理不同语言的输入和输出），但它也为更深奥的东西提供了指导，比如文化上的图标，所以我建议对它做一些研究。

# machine-learning - 哪种机器学习算法适合这种情况

> ID：15004240
> 
> 赞同：2
> 
> 时间：2013-02-21T14:05:40.117
> 
> 标签：machine-learning, data-mining, expert-system

我有一个 PHP/MySQL 应用程序来存储症状和适当的药物。我应该使用什么机器学习算法来预测药物的任何症状。另外，训练集的格式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:28:40.490

好吧，您的数据最终将如下所示：

```
row_id  symptom_x symptom_y degree_of_symptom_z ... best_drug

1       false     true      0.8                     drug_x
2       true      null      0.0                     drug_q 
```

您将使用统计分类器根据症状学习最佳药物。然后你会喂它新的症状，它会指示最好的药物。

可能会有很多可用的症状，因此算法需要能够处理许多列。

我将从支持向量机开始，并尝试逻辑回归。

查看 RapidMiner。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:11:36.307

在 ML 中，这种情况没有“最佳解决方案”，这种方法/数据几乎总是能满足我的需求吗？因此，尝试使用简单的 ML 技术（例如决策树），如果不起作用，请尝试更复杂的方法。如果它不起作用，请尝试更改数据，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:21:33.750

我认为您最好的选择是确定一个可以很好地集成到您的环境中的可靠库。

一般来说：

*   好的数据几乎总是有帮助的：即预处理您的数据以提取您认为对人类也有用的特征（“摘要”）。
*   避免无用的功能：选择一些好的功能而不是许多可能会有所帮助的棘手功能。
*   请注意，不可能有一个神奇的黑匣子：您需要调整您的算法。大多数机器学习算法都有几个所谓的“超参数”，它们会影响算法的工作方式；例如学习率；平滑; 窗口大小等
*   由于它不是黑匣子，因此请查找一些机器学习介绍，并至少对这些技术的工作原理和原因有一个基本的了解。很容易从 ML 算法中得到完全的废话，所以至少对这些事情是如何工作的有一些了解是很重要的，这样你就可以适当地设置你的问题。
*   首先尝试一些*非常*简单的东西，比如最近邻（你需要一个距离度量）。可能就够了。

虽然我最近没有使用过，但我相信如果 NN 不够好，SVM 仍然可能是你最好的选择。这不是时髦的新事物，但它们通常很好，没有太多的调整。但是，使用经过良好调整的弱算法（即具有您理解的文档和可以尝试大量超参数变体的实现）几乎总是比调整不佳的强算法更好。当然，如果你真的不知道你在做什么。

换句话说：保持简单，并确保在特征选择阶段使用大量常识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T22:12:40.710

这是一个分类问题：您已经标记了要用于训练模型的数据。

由于您将遇到一些错误，您应该决定是否最小化您的误报或误报结果并平衡您的算法以实现这一目标。

您可以使用简单的决策 3 并使用测试集（例如医生开出的一些真实处方）来查看性能如何。

请注意，您的处方可能需要不止一种药物或不需要。

您应该考虑的一个问题是，如果您服用某些药物，您就不能服用其他药物，并且患者可能会出现一些过敏。因此，我建议您查看[http://en.wikipedia.org/wiki/Association_rule_learning](http://en.wikipedia.org/wiki/Association_rule_learning)和 Prolog。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:23:47.947

看到这个问题你可能会有很多未知变量，我建议使用贝叶斯网络来解决它。

这只是基于简要描述和以前使用医疗诊断软件（如 WebMD 等）的经验的猜测。

与大多数其他 ML 算法相比，贝叶斯网络在处理大量未知变量时往往具有更高的“精度”（例如，神经网络往往需要更准确的数据才能进行准确的回归 - 从而提出准确的建议）。

您需要对可能遇到的过度拟合预防、平滑和其他问题进行一些研究。

同样，这不是一个确定的答案。您没有提供任何详细数据供我根据假设以外的任何内容进行猜测。我强烈建议在决定之前进行更深入的研究。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T14:33:33.137

您将需要自己**尝试数百种算法、预处理等**。

*没有任何*通用的“最佳算法” 。

当其他人没有您的数据时，特别是不适用于数据驱动的事物。

所以，**尝试一些事情**，看看什么**对你有用**。因为对他人有用的不一定对你有用，反之亦然。

此外，为了获得良好的结果，经验和专业知识是必不可少的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-03T15:44:47.390

尝试 K 最近邻，我认为这是一个分类问题。您的处方可能需要不止一种或多种药物，另一个问题是机器可能并不总是准确的，因为它将有机会决定没有经过培训的药物。你需要一个非常详细的数据集。

下面的例子是基于 ml-idea（机器学习思想）[Github-ML-Idea](https://github.com/brucetruth/ml-idea/)

虽然没有完美的算法，但只要正确准备好数据就可以了。

`

```
 //symptoms
  //1 = 'Symptom 1';
  //2 = 'Symptom 2';
  //3 = 'Symptom 3';
  //4 = 'Symptom 4';

$samples = [[1, 3], [1, 4], [2, 4], [3, 1], [4, 1], [4, 2]];
$labels = ['drug a', 'drug A', 'drug x', 'drug x', 'drug a', 'drug x'];

$classifier = new KNearestNeighbors(6, true);
$classifier->train($samples, $labels);
$data = $classifier->predict([2, 1]);

echo "<pre>";
print_r($data);
echo "</pre>"; 
```

`

# c++ - 在 C++ 中返回对象集合的函数

> ID：15004242
> 
> 赞同：2
> 
> 时间：2013-02-21T14:05:45.563
> 
> 标签：c++, design-patterns

在我当前的项目中，我需要实现相当多的函数/方法，这些函数/方法采用一些参数并生成一组结果（相当大）。因此，为了在不复制的情况下返回这个集合，我可以创建一个新集合并返回一个智能指针：

```
boost::shared_ptr<std::vector<Stuff> > generate(); 
```

或引用将被填充的向量：

```
void generate(std::vector<Stuff> &output); 
```

这两种方法都有好处。第一个清楚地表明向量是函数的输出，在并行化场景中使用它是微不足道的，等等。第二个在循环中调用时可能更有效（因为我们不是每次都分配内存），但是那么参数是输出就不是那么明显了，需要有人从向量中清除旧数据...

在现实生活中哪个更习惯（即最佳做法是什么）？在 C#/java 中，我认为第一个，在 C++ 中是什么情况？

此外，是否可以使用 C++11 按值有效地返回向量？会有什么陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:09:49.713

先做正确性，*然后*在必要时进行优化

由于移动语义和返回值优化共同使普通函数结果不可复制，您可能必须努力使其效率低到值得优化工作

所以，只需将集合作为函数结果返回，然后**MEASURE**如果你觉得它太慢了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:10:05.727

你应该**按价值返回。**

> 是否可以使用 C++11 按值有效地返回向量？

是的，C++11 支持[*移动语义*](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)。您返回一个值，但编译器知道它是一个临时值，因此可以调用一个特殊的构造函数（移动构造函数），该构造函数专门设计用于简单地“窃取”返回对象的内容。毕竟，你不会再使用那个临时对象了，既然你可以移动它的内容，为什么还要复制它呢？

除此之外，可能值得一提的是，大多数 C++ 编译器，甚至是 C++11 之前的编译器，都实现了[（命名的）返回值优化](http://www.google.com/url?sa=t&rct=j&q=nrvo%20wikipedia&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FReturn_value_optimization&ei=1yomUezgDYmM4gTWnIC4Cw&usg=AFQjCNE4f004wOvYKvcVgvTdGsT2QuMjsw&bvm=bv.42661473,d.Yms)，这无论如何都会省略副本，不会产生任何开销。因此，您可能希望在优化之前实际测量（可能）获得的性能损失。

[*我认为只有在需要引用语义*](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873)时才应该通过引用传递或返回共享指针。这似乎不是你的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:48:32.593

信不信由你，我将建议不要采用任何一种方法，而是采用明显的实现并按值返回！编译器通常能够优化掉将被诱导的名义副本，将其完全删除。通过以最明显的方式编写代码，您可以让未来的维护者非常清楚其意图是什么。

但是假设您尝试按值返回并且您的程序运行速度太慢*，*让我们进一步假设您的分析器显示按值返回实际上是您的瓶颈。在这种情况下，我将在堆上分配容器并`auto_ptr`在 C++03 或`unique_ptr`C++11 中以 a 的形式返回，以清楚地表明所有权正在转移，并且生成器不会`shared_ptr`为自己保留一份副本以后的目的。

最后，[http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)上的系列文章为几乎完全相同的问题提供了很好的视角。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:11:15.740

最佳实践可能会让您感到惊讶。我建议在 C++03 和 C++11 中按值返回。

*   在 C++03 中，如果您创建一个`std::vector`本地 to`generate`并返回它，则该副本可能会被编译器忽略（几乎肯定会）。参见 C++03 §12.8/15：

    > 在具有类返回类型的函数中的return语句中，当表达式是与函数返回类型具有相同cv非限定类型的非易失性自动对象的名称时，可以通过构造自动对象来省略复制操作直接进入函数的返回值

*   在 C++11 中，如果您创建一个`std::vector`本地 to`generate`并返回它，则该副本将首先被视为一个移动（这已经非常快），然后*可能*会被忽略（几乎肯定会）。参见 C++11 §12.8/31：

    > 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，通过将自动对象直接构造到函数的返回值中，可以省略复制/移动操作

    和§12.8/32：

    > 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

所以按价值返回！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T14:10:45.923

有一种替代方法。如果您可以使您的函数模板化，则使它们将输出迭代器（其类型是模板参数）作为参数：

```
tempalte<class OutputIterator>
void your_algorithm(OutputIterator out) {
    for(/*condition*/) {
        ++out = /* calculation */;
    }
} 
```

这样做的好处是调用者可以决定他想在哪种集合中存储结果（输出迭代器可以例如直接写入文件，或将结果存储在 a 中`std::vector`，或过滤它等）。

# php - 无法在 CI 2.1 中加载模型。给出 500 内部服务器错误

> ID：15004243
> 
> 赞同：0
> 
> 时间：2013-02-21T14:05:45.890
> 
> 标签：php, codeigniter, codeigniter-2

我最近升级到 CodeIgniter 2.1，但无法加载模型。这是要了我的命。我知道这很愚蠢，但仍然无法弄清楚。有人可以告诉我我在哪里犯了错误吗？谢谢

我的控制器-> site.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller {

    public function test()
    {
        $this->load->model('site_model')
        $info['rows'] = $this->site_model->getInfo();
        $this->load->view('test_view',$info);
    }
} 
```

我的模型-> site_model.php

```
<?php
class Site_model extends CI_Model {

    public function getInfo() {

        $q = $this->db->query('SELECT * FROM dmart_product');

        if($q->num_rows() > 0) {
            foreach ($q->result() as $row) {
                $data_info[] = $row;
            }
            return $data_info;
        }       

    }

} 
```

我的视图 -> test_view.php ：只包含 HTML 代码。

仍然给我**“500 内部服务器错误”**

有任何想法吗？非常感谢提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:13:05.757

我认为问题是行加载模型上的“缺少分号”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:09:55.633

您需要在 Site_model 中添加 __construct() 方法 像这样

```
public function __construct()
{
    parent::__construct();
} 
```

# html - 带有视频文件的 Web 浏览器离线应用程序缓存？

> ID：15004247
> 
> 赞同：0
> 
> 时间：2013-02-21T14:06:15.317
> 
> 标签：html, video, mp4, browser-cache

我正在尝试使用清单文件将离线内容加载到应用程序缓存中，使网站在 Web 浏览器（特别是：Mobile Safari 和/或 Google Chrome）中离线可用。

这适用于图像、html 内容甚至字体文件。但对于我要存储的视频，情况并非如此。移动 Safari 要求将存储空间增加到 50MB（应该如此）以容纳视频，但在离线时视频不会显示。总而言之，缓存的内容总计 37MB。

我正在使用 JWPlayer 显示视频（将 HTML5 播放器版本设置为首选播放器），但我也尝试了自己的 HTML5 视频标签，但无济于事。JWPlayer 在离线时返回“无法加载视频文件”消息，就像 URL 无效一样（但它们在线工作正常）。这些视频是在 MP4 容器中编码的 H264。

iPad 上的 Mobile Safari 是否能够存储和检索 MP4（或其他视频）文件？有什么特别的技巧需要使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T23:53:01.993

The problem is that Safari itself doesn't play the videos. They're played by the QuickTime plugin, which ignores the browser's caches. See [this article](http://mobiforge.com/developing/story/using-html5-application-cache-mobile-web-apps).

I don't know of any workaround (other than PhoneGap etc.), but I would certainly love to have one!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T02:37:37.857

您无法离线使用 JWplayer（至少在您当前的版本中）。在他们的脚本（swf）中，它从他们的服务器获取一些外部脚本（包括他们的徽标），例如

[http://p.jwpcdn.com/ ... /jwpsrv_frq.js](http://p.jwpcdn.com/%20...%20/jwpsrv_frq.js)

[http://p.jwpcdn.com/...../jwpsrv.js](http://p.jwpcdn.com/6/5/jwpsrv.js)

[http://p.jwpcdn.com/...../logo.png](http://p.jwpcdn.com/...%20/5/logo.png) (JwPlayer 文字)

我认为这都是关于他们的授权和许可证检查。您需要花费一定的时间才能摆脱付费版本的徽标，他们可能会询问您的域，他们会将其添加到客户的有效网站域列表中，并且他们还会在静态链接中为您提供一个脚本，您可以将其添加到您的缓存文件中。

# mysql - mysql数据的交互式但基本图形

> ID：15004253
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:06:41.930
> 
> 标签：mysql, charts, visualization

在网络上有许多库和程序可以用于基本的数据显示，但似乎没有一个能够基于来自 mysql 数据库的简单拖放输入快速生成基本的 x/y 图。

是否有可用的开源/免费/付费方法以图形方式获得快速且（如果需要）非常脏的数据视图？最好它应该插入 Workbench 或者是一个独立的（网络）应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:47:29.343

如果你使用Java，你可以参考[http://www.jfree.org/jfreechart/](http://www.jfree.org/jfreechart/)，如果你使用Python，你可以参考[http://matplotlib.org/](http://matplotlib.org/)。

# sql - 导出数据库中的所有对象（表、主键/外键等）

> ID：15004257
> 
> 赞同：1
> 
> 时间：2013-02-21T14:06:50.167
> 
> 标签：sql, sql-server-2008-r2

我正在运行 SQL Server 2008 R2，但无法导出表之间的关系（即外键/主键、索引等）

我的目标是导出与数据库相关的所有内容（除了数据）并将其导入实体关系图（有超过 100 个表）。

如果有人能提供如何导出的步骤，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:34:42.447

您想要编写数据库脚本。

在 SQL Server Management Studio 中，右键单击数据库。然后选择`Tasks-->Generate Scripts`。这将打开 SQL Server 脚本向导。

你可能可以从那里拿走它。该向导询问您要创建哪些脚本和对象。

# java - 从列表中读取数据并创建字符串以写入平面文件

> ID：15004265
> 
> 赞同：0
> 
> 时间：2013-02-21T14:07:00.527
> 
> 标签：java

我在 ArrayList 中有多行数据。我需要从 List 中读取数据并将其转换为另一种格式并写入平面文件。

```
List Data:
General Details|S|!|!|66T4051|N|MACH|a
Charge Details|S|!|!|66T4051| 3827|N|
Charge Details|S|!|!|66T4051| 3828|N| 
Insurance Details|S|!|!|66T4051|   f|
Insurance Details|S|!|!|66T4051|   h|
Insurance Details|S|!|!|66T4051|   p| 
```

这里 GeneralDetails 计数为 1，这是主数据。收费明细计数为 2。保险明细计数为 3。

我需要将上述列表数据转换为以下格式的一个字符串。

```
ROW1|General Details|S|!|!|66T4051|N|MACH|a|2|Charge Details|S|!|!|66T4051| 3827|N|Charge Details|S|!|!|66T4051| 3828|N|3|Insurance Details|S|!|!|66T4051|   f|Insurance Details|S|!|!|66T4051|  h|Insurance Details|S|!|!|66T4051|   p$ 
```

我需要在每条记录之前放置计数。让我们说。

```
ROW1 - 1 is the count of General Details
|2|Charge Details - 2 is the count of Charge Details
|3|Insurance Details - 3 is the count of Insurance Details 
```

请建议如何实现这一目标？

我得到了每一行的计数。

```
map>{Charge Details=2, General Details=1,Insurance Details=3} 
```

但在那之后我无法继续。

```
public void processRows(LinkedList<LinkedList<Object>> linkedList,String intfCode,String bankId)
{
for(int i=0;i<linkedList.size();i++)
{
   List<Object> list =  linkedList.get(i);
   //System.out.println("list>>"+i+""+list);

   List<Object> tableNameList =  new ArrayList<Object>();
   LinkedHashMap map = new LinkedHashMap();

   for(int j=0;j<list.size();j++)
   {
       String rowOfLine = (String)list.get(j);
       String split[] = (rowOfLine.split("\\|"));
       String tableName=split[0];
       tableNameList.add(tableName);
   }
   for(int j=0;j<list.size();j++)
   {
       String rowOfLine = (String)list.get(j);
       String split[] = (rowOfLine.split("\\|"));
       String tableName=split[0];

       int count = Collections.frequency(tableNameList, tableName);
       System.out.println("count>>"+count);
       if(!(map.containsKey(tableName)) && tableName!=null)
       {
       map.put(tableName, count);
       }
       //transformRow(tableName,intfCode,bankId,rowOfLine,collateralType);
   }
       System.out.println("map>"+map);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:13:35.423

遍历所有列表并注意列表的正确顺序。每当一个新的列表类型开始时，在迭代之前将列表的数量附加到您的 String 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:33:08.267

`I have rows of data in ArrayList. I need to read the data from List and convert it to another format and write to flat file.`

以下是您如何解决问题的想法。请记住，我尚未测试此代码，我的目的是向您展示如何解决问题的想法。假设您`ArrayList`的数据被命名为`contents`...

```
Map<String, List<String>> indexedContents = new HashMap<String, List<String>>();
for (String str : contents) {
    String[] splittedString = str.split("\\|");
    if (splittedString.length > 0) {
    //Index your map on the first entry which is something like
    //"Charge Details"
    if(indexedContents.get(splittedString[0]) == null){
        indexedContents.put(splittedString[0], new ArrayList<String>());
    }
    indexedContents.get(splittedString[0]).add(str);
    }
}
StringBuffer output = new StringBuffer();
for(String key : indexedContents.keySet()){
    output.append(indexedContents.get(key).size()).append("|");
    for(String values : indexedContents.get(key)){
    output.append(values).append("|");
    }
} 
```

地图中的条目将跟踪您的大小，因为它是一个`List`. 最后的 for 循环实际上创建了您的输出格式，可以根据需要进行更改。我希望这个对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:45:55.567

这是您要求的代码。

代码：

导入 java.util.ArrayList；

```
public class Sample1 {

    public static void main( String[] str ) {
        ArrayList<String> list = new ArrayList<String>();
        list.add( "General Details|S|!|!|66T4051|N|MACH|a" );
        list.add( "Charge Details|S|!|!|66T4051| 3827|N|" );
        list.add( "Charge Details|S|!|!|66T4051| 3828|N|" );
        list.add( "Insurance Details|S|!|!|66T4051|   f|" );
        list.add( "Insurance Details|S|!|!|66T4051|   h|" );
        list.add( "Insurance Details|S|!|!|66T4051|   p|" );

        StringBuffer mainBuf = new StringBuffer();
        StringBuffer tempBuf = new StringBuffer();

        int count = 0;
        String header = null;
        for( String item : list ) {
            String[] values = item.split( "\\|" );

            // if this is first element
            if( header == null ) {
                header = values[0];
                count = 1;
            }
            // check if the previous element and present element is not same.
            else if(!header.equals(values[0])) {
                append( count, header, mainBuf, tempBuf.toString() );
                tempBuf.delete( 0, tempBuf.length() );
                count = 1;
                header = values[0];
            } else {
                count++;
            }
            if( tempBuf.length() > 0 && tempBuf.charAt( tempBuf.length() - 1 ) != '|' ) {
                tempBuf.append( "|" );
            }
            tempBuf.append( item );
        }
        append( count, header, mainBuf, tempBuf.toString() );

        // replace last character as $ 
        int lastIndex = mainBuf.length();
        mainBuf.replace( lastIndex - 1, lastIndex, "$" );
        System.out.println(" mainBuf => " + mainBuf );
    }

    public static void append( int count, String header, StringBuffer mainBuf, String str ) {
        if( header.equalsIgnoreCase(  "General Details" ) ) {
            mainBuf.append( "ROW" + count + "|" ).append( str );
        } else {
            if( mainBuf.charAt( mainBuf.length() - 1 ) != '|' ) {
                mainBuf.append( "|" );
            }
            mainBuf.append( count + "|" ).append( str );
        }
    }
} 
```

# ios - 从 uitableview 检索 nsmutablearray 并将其重新保存到 nsuserdefaults

> ID：15004267
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:07:10.510
> 
> 标签：ios, objective-c, uitableview, nsmutablearray, nsuserdefaults

我有一个 uitableview，其中包含从应用程序本地的 JSON 文件填充的项目列表。一切都可以将列表放到表格中，并在选择（或取消选择）时将多个项目保存到 nsmutablearray 中。

问题是当用户离开视图并返回并选择另一个项目（或取消选择当前选择的项目）时。此时可变数组为空。

我不确定可变数组的 nsuserdefaults 保存是否是问题所在。它保存得很好，但是当视图重新出现（此时可变数组的值很好）并且用户触摸表格行时，数组再次为空。

我的 .h 文件：

```
@interface CategoriesViewController : UITableViewController {

    NSMutableArray *_selectedItems;

    NSString *filePath;

    NSString *string;

}

// arForTable array will hold the JSON results from the api
@property (nonatomic, retain) NSArray *arForTable;

@property (nonatomic, retain) NSMutableArray *categorySelected;

@property (nonatomic, retain) NSString *jsonStringCategory;
@property(nonatomic, retain) UIView *accessoryView;

@end 
```

我的 .m 文件：

```
@implementation CategoriesViewController
@synthesize arForTable = _arForTable;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.categorySelected = [[NSMutableArray alloc] init];

    [self reloadMain];

    // assignment reference so don't release
     _selectedItems = [(AppDelegate *)[[UIApplication sharedApplication] delegate] selectedCategories];

    self.tableView.hidden = NO;

}

-(void) reloadMain {

    // countrySaved value from NSUserDefaults
    NSUserDefaults * defaults =  [NSUserDefaults standardUserDefaults];

    NSString *countryString = [defaults stringForKey:@"selectedCountryTableString"];
    NSString *cityString = [defaults stringForKey:@"selectedCityTableString"];
    NSLog(@"countrystring from category is %@", countryString);
    NSLog(@"citystring from category is %@", cityString);

    // getting path to the file

    if ([defaults stringForKey:@"selectedCountryTableString"] == NULL) {

        filePath = [[NSBundle mainBundle] pathForResource:@"categoriesit" ofType:@"json"];

    } else if ([countryString isEqualToString:@"UK"]) {

        filePath = [[NSBundle mainBundle] pathForResource:@"categoriesuk" ofType:@"json"];

    } else if ([countryString isEqualToString:@"Italy"]) {

        filePath = [[NSBundle mainBundle] pathForResource:@"categoriesit" ofType:@"json"];

    } else if ([countryString isEqualToString:@"Spain"]) {

        filePath = [[NSBundle mainBundle] pathForResource:@"categorieses" ofType:@"json"];

    } else if ([countryString isEqualToString:@"Brazil"]) {

        filePath = [[NSBundle mainBundle] pathForResource:@"categoriesbr" ofType:@"json"];
    }

    NSString *fileContent = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

    //NSLog(@"File content: %@", fileContent);

    // creating new parser
    SBJSON *parser = [[SBJSON alloc] init];

    // parsing the first level
    NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];
    NSDictionary *menu = (NSDictionary *) [data objectForKey:@"menu"];

#ifdef DEBUG
    NSLog(@"menu is %@",menu);
#endif

    NSMutableArray *itemsTMP = [[NSMutableArray alloc] init];

    NSData *jsonData = [NSData dataWithContentsOfFile:filePath];
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:nil error:nil];

    // NSLog(@"results File test %@",dict);

    itemsTMP = [dict objectForKey:@"results"];
    // NSLog(@"itemsTMPitemsTMP File test %@",itemsTMP);

    self.arForTable = [itemsTMP copy];

    [self.tableView reloadData];

}

#pragma mark - Table view data source

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.arForTable count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        [cell.textLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];
        [cell.detailTextLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];

        cell.selectedBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];

        cell.selectedBackgroundView.backgroundColor = [UIColor colorWithRed:204.0/255.0 green:56.0/255.0 blue:55.0/255.0 alpha:1];

    }

    UIImageView *cellAccessoryImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon-tick.png"]] ;
    UIImageView *cellAccessoryNoneImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@""]] ;

    if([_selectedItems containsObject:indexPath]){
        cell.accessoryView = cellAccessoryImageView;
    } else {
        cell.accessoryView = cellAccessoryNoneImageView;
    }

    // Get item from tableData
    NSDictionary *item = (NSDictionary *)[_arForTable objectAtIndex:indexPath.row];

    // encoding fix

    NSString *correctStringTitle = [NSString stringWithCString:[[item objectForKey:@"key"] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding];

    cell.textLabel.text = [correctStringTitle capitalizedString];

    NSNumber *num = [item objectForKey:@"id"];

    cell.detailTextLabel.text = [num stringValue];

    cell.detailTextLabel.hidden = YES;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    NSUserDefaults * defaults =  [NSUserDefaults standardUserDefaults];

    if([_selectedItems containsObject:indexPath]){
        [_selectedItems removeObject:indexPath];

        [self.categorySelected removeObject:[[self.arForTable objectAtIndex:indexPath.row] objectForKey:@"id"]];

        string = [self.categorySelected componentsJoinedByString:@","];

        [defaults setObject:string forKey:@"selectedCategoryTableString"];

        NSLog(@"%@ defaults from did select remove categorySelected",[defaults stringForKey:@"selectedCategoryTableString"]);

        NSLog(@"%@ STRING FROM contains / removeObj",string);

    } else {

        [_selectedItems addObject:indexPath];

        [self.categorySelected addObject:[[self.arForTable objectAtIndex:indexPath.row] objectForKey:@"id"]];

        NSUserDefaults * defaults =  [NSUserDefaults standardUserDefaults];

        string = [self.categorySelected componentsJoinedByString:@","];

        [defaults setObject:string forKey:@"selectedCategoryTableString"];

        NSLog(@"%@ providerSelected from did select add ",self.categorySelected);

        NSLog(@"%@ STRING FROM contains / addObj",string);

    }

    [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    //      [tableView reloadData];
}

-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:NO];

    [self.navigationController setNavigationBarHidden:YES animated:NO];

    self.navigationController.toolbarHidden = YES;

    NSUserDefaults * defaults =  [NSUserDefaults standardUserDefaults];

 //   NSLog(@"ALL DEFAULTS %@", [[NSUserDefaults standardUserDefaults] dictionaryRepresentation]);

    NSLog(@"%@ defaults from view appear categorySelected",[defaults stringForKey:@"selectedCategoryTableString"]);

    string = [defaults stringForKey:@"selectedCategoryTableString"];

    NSLog(@"%@ STRING from will appear",string);

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

同样在我在.h中的应用程序委托中：

```
@property (strong, nonatomic) NSMutableArray *selectedCategories; 
```

在 .m 中：

```
 `_selectedCategories = [NSMutableArray new]; 
```

在`didFinishLaunchingWithOptions:`方法中

只是要清楚：

当视图再次出现时（如果我 nslog 输出），mutablearray 已被保存并被正确检索。可变数组仅在再次触摸 tablerow 时自行清除。感谢是否有人可以提供帮助。我已经坚持了一段时间了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:11:08.517

每次用户转到其他视图并返回然后 `self.categorySelected = [[NSMutableArray alloc] init];`执行时，它都会导致它成为一个空数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:56:44.080

离开视图时先序列化数组：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:@[@"1",@"2",@"3"]];
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"myarray"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后当您返回该视图时反序列化它：

```
NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:@"myarray"];
NSArray *myarray = [NSKeyedUnarchiver unarchiveObjectWithData:data];
NSLog(@"MYARRAY %@", myarray); 
```

注意：如果未找到密钥，则初始化一个新数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T21:52:56.720

**编辑**

```
// DONT EVER EVER EVER EVER EVER EVER DO THIS!!!
//  We don't use types as variable names, that is implicit...
//  I get it, this is a string, BUT WHAT IS IT A STRING OF, the name
//  'string' does you, and anyone else, no good.  Think about all your 
//  code like you are writing it for someone else, because when you come
//  back to it in 6 months, you will be someone else, and you won't know
//  what this means
NSString *string; 
```

**结束编辑**

我不会以这种方式使用 NSUserDefaults。您已经将 JSON 解析为可归档对象 (NSMutableArray)。在 viewDidLoad 中，您可能应该尝试执行以下操作：

```
-(void)viewDidLoad
{
     // Load the array from a plist file
     self.dataYouNeed = [NSMutableArray arrayWithContentsOfFile:@"someFileName.plist"];
     // If we got back nil, that file didn't exist, so call 'reloadMain',
     //  do your parsing there THEN SAVE to a plist using:
     //
     // [myArray writeToFile:@"someFileName.plist"]
     //
     if(self.dataYouNeed == nil) [self reloadMain];

     // Then do the exact same thing when you try to persist your selection...
     //  aka do not store a CSV string, just store an Array, and call writeToFile:
     //  when you want to save, and arrayWithContentsOfFile when you want to read 
     //  it back in

} 
```

最重要的是，根据您的数据来自何处，我会将您的所有数据移出 JSON 文件并将其设置在 plist 中，然后您可以放弃所有解析代码.... :)。基本上我是说这对于这样一个简单的任务来说有点太复杂了，让你自己的生活更轻松。

**编辑**

您可能会遇到不使用“self.string”的问题，简单地引用“string”是危险的，您每次都在创建一个新的引用。这很可能会造成内存泄漏。（ARC 不是魔法，它不能为你处理所有的内存管理）

**编辑**

好的，所以重新阅读您的代码，我注意到了一些事情。

## 1\. 为什么将 CSV 字符串存储在“字符串”实例变量中？

这有点多余。如果没有在之前的几行代码中设置它，您永远不会从这个变量中读取。它应该只是在方法范围内声明的 NSString 。

## 2\. 您是否希望 '_selectedItems' 保留您对 AppDelegate 上的 'selectedCategories' 数组的引用？

您不能做出这种假设，尤其是在没有做出@property 声明的情况下。ARC 不知道如何处理它，并且可能会在您离开视图时释放引用。更有可能的是，每次设置该变量时都会造成内存泄漏。您也不能保证再次调用 viewDidLoad 来重置引用。您可能应该在 viewWillAppear 中设置它。

## 3\. 你遇到的是哪个 NSMutableArray 的 nil 引用？

If it is '_selectedItems', consider #2\. If it is 'categorySelected', this is also probably being released when this view disappears. If this is really what you are trying to persist, then why are you not populating it from the viewDidAppear method. The only thing you do in viewDidAppear is set the 'string' variable (which is never actually read from, like #1 says). Did you mean to set 'categorySelected' here? I believe you meant to get your list from NSUserDefaults, then populate 'categorySelected' using that string's componentsSeparatedByString: method, which returns an array

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T14:11:57.907

您可以尝试在这里将“保留”更改为“强”吗？

```
@property (nonatomic, retain) NSMutableArray *categorySelected; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T12:14:25.750

I think the issue is, you are setting the `selectedItems` array in `viewDidLoad` method. Probably the `viewDidLoad` is working once.

Just add the following line in your `viewWillAppear` method:

```
_selectedItems = [(AppDelegate *)[[UIApplication sharedApplication] delegate] selectedCategories]; 
```

# ios - 防止一个视图控制器自动旋转？

> ID：15004271
> 
> 赞同：17
> 
> 时间：2013-02-21T14:07:34.793
> 
> 标签：ios, objective-c, uiviewcontroller, ios6, autorotate

我的应用程序可以自动旋转，但我需要其中一个视图仅以纵向模式显示并且不知道如何实现这一点。

我试过这个（除其他外），但有问题的视图仍然旋转：

```
//  ViewController.m

-(BOOL)shouldAutorotate
{            
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

有人可以指出我做错了什么吗？谢谢。

-编辑-

适用于 iOS 6.1

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-21T14:15:48.103

当涉及 a 时，在and`UINavigationController`上创建一个类别。 `UINavigationController``override supportedInterfaceOrientations`

```
#import "UINavigationController+Orientation.h"

@implementation UINavigationController (Orientation)

- (NSUInteger)supportedInterfaceOrientations {
   return [self.topViewController supportedInterfaceOrientations];
}

- (BOOL)shouldAutorotate {
    return YES;
}

@end 
```

现在，iOS 容器（例如 UINavigationController）不咨询它们的子容器来确定它们是否应该自动旋转。

**如何创建类别**
1\. 添加一个新文件（cocoa touch 下的Objective c- category）
2\. `Category`: UINavigationController 上的方向
3\. 将上述代码添加到`UINavigationController+Orientation.m`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-28T21:18:23.740

Swift 3 版本接受的答案：

```
extension UINavigationController {

    open override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
        // Change `.portrait` to whatever your default is throughout your app
        return topViewController?.supportedInterfaceOrientations ?? .portrait
    }

    open override var shouldAutorotate: Bool {
        return true
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-25T07:52:15.683

根据[文档](https://developer.apple.com/documentation/uikit/uiviewcontroller)。

> 视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。

所以我们需要覆盖`shouldAutorotate`和`supportedInterfaceOrientation`定位`view controllers`。

> 通常，系统仅在窗口的根视图控制器或呈现为填充整个屏幕的视图控制器上调用此方法。

如果您有非常简单的配置，例如您的目标`view controller`是或被呈现覆盖整个屏幕，`rootViewController`这将起作用。`window`

如果目标视图控制器的配置很复杂，例如嵌入在其他一些容器视图控制器中。

> 子视图控制器使用其父视图控制器为它们提供的窗口部分，不再直接参与有关支持哪些旋转的决策。

因此，这些容器视图控制器的默认实现可能不会向那里的孩子询问那里的`supportedInterfaceOrientation`偏好。

因此，为了让我们的目标`child view controller`在那里指定，`supportedIntefaceOrientation`我们需要告诉那里的容器视图控制器这样做。

你也可以[在这里](https://stackoverflow.com/a/49473584/6149270)查看我之前的回答。

并[在嵌入容器视图控制器时了解 UIViewController 旋转。](https://gist.github.com/NeilsUltimateLab/21d551126f0f03b11a0154a681a48e71)

# android - 使用简单光标适配器时如何在列表项中添加两个图像

> ID：15004272
> 
> 赞同：0
> 
> 时间：2013-02-21T14:07:37.287
> 
> 标签：android, android-listview

使用简单光标适配器时如何在列表项中添加两个图像。我尝试通过扩展 SimpleCursorAdapter 类来覆盖 setViewImage。对于单个图像没有问题。但是如何添加两个图像？

**MyFragment.java：**

```
geoAdapter = new MySimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.listitem_cdf_geolist, c1, new String[] {DBConstants.LATITUDE,DBConstants.LONGITUDE,DBConstants.TOLERANCE,DBConstants.IMEI,DBConstants.IMEI}, new int[] {R.id.li_cdf_tv_latitude,R.id.li_cdf_tv_longitude,R.id.li_cdf_tv_tolerance,R.id.li_cdf_icon_georemove,R.id.li_cdf_icon_geoedit},0);
geoList.setAdapter(geoAdapter); 
```

**在 MySimpleCursorAdapter.java 文件中：**

```
@Override
    public void setViewImage(ImageView imageView, String imei) { 
        Log.i("simple", "text->"+imei);

        //Here how to set two images and set imei as tag for those images

        imageView.setTag(imei);
        imageView.setImageResource(R.drawable.action_edit);

        final ImageView myimageView=imageView;

        imageView.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
              Log.i("simple", "clicked");
              String selectedIMEI = v.getTag().toString();
            }
        });

    } 
```

**列表项布局 XML 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/li_cdf_stv_latitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="@string/li_cdf_stv_latitude" />

    <TextView
        android:id="@+id/li_cdf_tv_latitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@id/li_cdf_stv_latitude" />

    <TextView
        android:id="@+id/li_cdf_stv_longitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/li_cdf_stv_latitude"
        android:layout_below="@id/li_cdf_stv_latitude"
        android:layout_marginTop="10dp"
        android:text="@string/li_cdf_stv_longitude" />

    <TextView
        android:id="@+id/li_cdf_tv_longitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/li_cdf_tv_latitude"
        android:layout_below="@id/li_cdf_tv_latitude"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@id/li_cdf_stv_longitude" />

    <TextView
        android:id="@+id/li_cdf_stv_tolerance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/li_cdf_stv_longitude"
        android:layout_below="@id/li_cdf_stv_longitude"
        android:layout_marginTop="10dp"
        android:text="@string/li_cdf_stv_tolerance" />

    <TextView
        android:id="@+id/li_cdf_tv_tolerance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/li_cdf_tv_longitude"
        android:layout_below="@id/li_cdf_tv_longitude"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@id/li_cdf_stv_tolerance" />

    <ImageView
        android:id="@+id/li_cdf_icon_georemove"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/li_cdf_icon_georemove"
        android:onClick="removeGeofence" />

    <ImageView
        android:id="@+id/li_cdf_icon_geoedit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/li_cdf_icon_georemove"
        android:contentDescription="@string/li_cdf_icon_geoedit"
        android:onClick="editGeofence" />

    <View
        android:layout_width="1dp"
        android:layout_height="30dp" >
    </View>

</RelativeLayout> 
```

**更新 ：**

我试图超越 bindview。为每个列表项显示的图像。但是，如果我为每个图像设置标签，则将相同的标签应用于所有图像。还删除图标 onclick 事件仅在单击编辑和删除图像时触发。如何

```
@Override
    public void bindView(View view, Context context, Cursor c) {
        super.bindView(view, context, c);
        ImageView geoEditIcon = (ImageView)view.findViewById(R.id.li_cdf_icon_geoedit);
        geoEditIcon.setImageResource(R.drawable.action_editvehicle);
        geoEditIcon.setTag(c.getString(c.getColumnIndex(DBConstants.IMEI)));

    geoEditIcon.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
          Log.i("geolist", "geoRemoveIcon clicked");
          String selectedIMEI = v.getTag().toString();
          Log.i("geolist", "geoRemoveIcon selectedIMEI->"+selectedIMEI);
        }
    });

    ImageView geoRemoveIcon = (ImageView)view.findViewById(R.id.li_cdf_icon_georemove);
    geoRemoveIcon.setImageResource(R.drawable.action_removevehicle);
    geoRemoveIcon.setTag(c.getString(c.getColumnIndex(DBConstants.IMEI)));

    geoRemoveIcon.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
          Log.i("geolist", "geoRemoveIcon clicked");
          String selectedIMEI = v.getTag().toString();
          Log.i("geolist", "geoRemoveIcon selectedIMEI->"+selectedIMEI);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:15:57.577

Try to override method bindView. This will look like:

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
ImageView frst = (ImageView )view.findViewById(R.id.li_cdf_icon_georemove);
ImageView scnd = (ImageView )view.findViewById(R.id.li_cdf_icon_geoedit);
...
} 
```

# mysql - 在mysql中获取多行和单行

> ID：15004274
> 
> 赞同：0
> 
> 时间：2013-02-21T14:07:39.887
> 
> 标签：mysql, sql, database, select

我有一张桌子

```
id = 1
name = 'one'
group = 1

id = 2
name = 'two'
group = 1

id = 3
name = 'three'
group = 2 
```

我必须在一个 sql 查询中查询所有单曲名称，在这种情况下 id = 3 和另一个 sql 所有名称都是倍数，在这种情况下 id = 1 和 id = 2，因为它们具有相同的组。我想它应该是选择中的选择，但不确定。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:11:36.640

听起来您想使用类似的东西：

```
select id
from yourtable
group by `group`
having count(`group`) = 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/8ce31/7)。

然后，如果您想返回所有详细信息，则可以将查询扩展为：

```
select *
from yourtable t1
where id in (select id
            from yourtable t2
            group by `group`
            having count(`group`) = 1) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/8ce31/4)。

如果要返回具有相同组的所有行，则可以使用：

```
select *
from yourtable t1
where `group` in (select `group`
                  from yourtable t2
                  group by `group`
                  having count(`group`) > 1) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/9ff21/11)

然后，如果您想返回所有内容和一个标识它是单个还是多个的标志，那么您可以使用与此类似的东西。你会注意到我包含了一个标志来显示哪些`groups`有一行，然后哪些组有不止一行：

```
select *, 'single' Total
from yourtable t1
where `group` in (select `group`
                  from yourtable t2
                  group by `group`
                  having count(`group`) = 1)
union all
select *, 'multiple' Total
from yourtable t1
where `group` in (select `group`
                  from yourtable t2
                  group by `group`
                  having count(`group`) > 1) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/9ff21/13)

# jquery - 将类添加到正文时销毁 jQuery 脚本

> ID：15004277
> 
> 赞同：0
> 
> 时间：2013-02-21T14:07:46.383
> 
> 标签：jquery, css

我目前正在开发一个具有动态布局的网站。每当窗口调整大小时，它会检查（通过 jQuery）哪个布局最适合（我为此设置了几个像素范围）并将 .high .med 或 .low 类应用于页面上的元素。

到目前为止，我已经完成了几乎所有工作。剩下的只有几件事我无法弄清楚。

因为布局严重依赖浮动，所以我使用了“equalheights”jQuery 插件来使列的大小达到相等的高度：

```
(function($) {
    $.fn.equalHeights = function(minHeight, maxHeight) {
        tallest = (minHeight) ? minHeight : 0;
        this.each(function() {

            if($(this).height() > tallest) {
                tallest = $(this).height();
            }
        });

        if((maxHeight) && tallest > maxHeight) tallest = maxHeight;
        return this.each(function() {
            $(this).height(tallest).css;
        });
    }
})(jQuery); 
```

问题是当布局切换时，列将不断调整大小。这通常不是问题，但布局差异很大。

首先，我尝试在调整大小之前添加一个 if “has class” 语句，但这不起作用，因为脚本在添加时没有“看到”类。这可能与函数的执行顺序有关。

我应该注意，我只是一个初学者（4 周的 javascript/jQuery 经验），但我非常愿意学习更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:40:09.943

我**建议您使用 CSS3 媒体**查询而不是脚本来进行**响应式/自适应网页设计。**

请看看[这个](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

这些**不会处理很多**，因此**重量轻，大多数现代浏览器和设备都支持 CSS3，**因此是一个**方便可靠的选项。**

# gcc - 在 GCC makefile 的目标中允许空间

> ID：15004278
> 
> 赞同：11
> 
> 时间：2013-02-21T14:07:49.900
> 
> 标签：gcc, makefile, mingw, target, space

使用 make.exe 时，有没有办法让目标名称中的空格起作用？如果这个非常古老的错误报告是正确的，这似乎是不可能的： [http ://savannah.gnu.org/bugs/?712](http://savannah.gnu.org/bugs/?712)

作为参考，最大的问题是 makefile 命令的片段，例如：

```
"foo bar baz": $(OBJ)
    $(CPP) $(LINKOBJ) -o $(BIN) $(LIBS) 
```

...似乎被视为三个单独的命令：一个构建“foo（注意包含的”），一个构建 bar，最后一个构建 baz”（同样，包括“）。这是因为 make.exe 似乎使用空格作为分隔符。

然而，假设一个人可能想要构建“Hello World.exe”是合理的。这似乎是不可能的。双引号不起作用，转义单独的单词也不起作用（我在某处读过，不记得链接了）：

```
"foo\\ bar\\ baz": $(OBJ)
    $(CPP) $(LINKOBJ) -o $(BIN) $(LIBS) 
```

有没有其他方法可以解决这个问题？官方手册仅确认 tokenize-by-spaces 的东西，但没有提供将空间用于任何其他目的的方法： [http ://www.gnu.org/software/make/manual/make.html#Rule-句法](http://www.gnu.org/software/make/manual/make.html#Rule-Syntax)

**编辑：**正如建议的那样，我也尝试过单斜杠，但它们与双斜杠具有完全相同的效果。抱怨它找不到第一个单词的规则：

```
mingw32-make.exe: *** No rule to make target `foo', needed by `all'.  Stop. 
```

虽然可以正确生成可执行文件“foo bar baz.exe”，但每次每个单词都会进行链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:07:39.483

而不是双反斜杠使用单个反斜杠。以下 Makefile 有效（至少对于 gnu make）：

```
goal:   foo\ bar

foo\ bar:
    gcc -o "foo bar" "foo bar.c" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T10:35:49.317

正如马蒂亚斯所说，这是“\”的问题，但也是双引号的问题。这是我成功的方法：

```
EXECUTABLE=foo\ bar\ baz
all: $(SOURCES) $(EXECUTABLE)
$(EXECUTABLE): $(OBJECTS)
                $(CC) $(OBJECTS) -o "$@" $(LDFLAGS) 
```

注意 $@ 周围的双引号在我看来，当 make 到达目标“$(EXECUTABLE)”时，它会扩展“\”，所以命令行变为

```
gcc file.o -o foo bar baz -LFlags 
```

这不是您想要的，您需要在文件名周围加上双引号。

现在你在 Windows 上，我不记得它如何处理名称中的空格，所以正如 Matthias 所说，首先检查“cmd.exe”如何处理空格（除了用双引号括起来的名称......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-05T07:11:07.237

也许更容易考虑一个更简单的 Makefile，它忽略标准`targetRule: dependencies`调用中的依赖关系。OP适用于Windows，下面是在Linux的`bash`shell中完成的；但我猜它可能应该适用于使用`bash`shell的 Windows。`cygwin`我有以下内容（注意，命令之前`Makefile`应该有一个，所以转换为空格）：`TAB``echo`

```
testA:
    echo "testA"

unrelated:
    echo "unrelated"

testA\ clean:
    echo "testA clean"

clean:
    echo "clean" 
```

如果我`make`使用目标`clean`或`testA`在`bash`shell 终端中调用，我会得到预期的结果：

```
$ make testA 
echo "testA"
testA
$ make clean
echo "clean"
clean 
```

现在，如果我`make testA clean`按原样调用，`bash`shell 将在空格处拆分参数，因此`make`将接收两个参数，并将分别运行它们：

```
$ make testA clean
echo "testA"
testA
echo "clean"
clean 
```

...但是如果我将提供给的目标`make`用引号括起来 - 或者如果我转义了空格 - shell 将理解它应该是一个内部带有空格的单个参数，并将其传播到`make`，这将继续执行写为`testA\ clean`目标规则的内容：

```
$ make "testA clean"
echo "testA clean"
testA clean
$ make testA\ clean
echo "testA clean"
testA clean 
```

这样做的一个后果是，不幸的是，您不能在命令行中使用“TAB”来自动完成`testA\ clean`; 如果您`make te``TAB`在命令行键入，则 only`testA`将自动完成（并且`testA\ clean`不会显示为自动完成选项）。

# android - 为上下文菜单创建自定义布局

> ID：15004283
> 
> 赞同：3
> 
> 时间：2013-02-21T14:07:59.067
> 
> 标签：android, contextmenu

您可以为上下文菜单的正文扩展自定义 xml 布局吗？现在我有一个在 longpress 上工作的上下文菜单，但我想让它看起来比一个文本选项列表更好。我现在正在使用 menuinflater 来扩充一个简单的 xml 菜单项文件。有没有办法扩展自定义 xml 布局并使用它来代替文本？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-29T02:54:38.030

如果您要显示的项目不是太多，我认为您可以弹出一个自定义对话框。

# mysql - 如果 CONCAT 中有“null”值，则得到空结果

> ID：15004286
> 
> 赞同：0
> 
> 时间：2013-02-21T14:08:05.610
> 
> 标签：mysql, sql, database, null

如果没有中间名，我希望得到没有中间名的全名，但如果列“M_NAME”为 Null，则 select 语句返回空。我该如何解决这个问题？

```
 SELECT CONCAT(`Employee`.`F_NAME`, ' ', LEFT(`Employee`.`M_NAME`, 1), '. ', `Employee`.`L_NAME`) FROM `ccms`.`Employee` WHERE HR_ID = '223'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:08:58.657

采用[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

```
SELECT CONCAT(`Employee`.`F_NAME`, ' ', COALESCE(LEFT(`Employee`.`M_NAME`, 1), ''), '. ', `Employee`.`L_NAME`) FROM `ccms`.`Employee` WHERE HR_ID = '223'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:13:54.903

[`CONCAT``NULL`如果任何参数为空，则返回。](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)`IFNULL`您可以通过将任何可为空的列包装在or 中来确保没有空参数为空`COALESCE`（后者可以采用两个以上的参数）来解决此问题。

```
SELECT
    CONCAT(
        IFNULL(F_NAME, ''),
        ' ',
        IFNULL(CONCAT(LEFT(M_NAME, 1), '. '), ''),
        IFNULL(L_NAME, '')
    )
FROM
    ccms.Employee
WHERE
    HR_ID = '223'; 
```

`NULL`这样做是用空字符串替换列值，这可能是您的意图。请注意，我更新了 的选择，`M_NAME`以便仅在值不为空时才通过使用此行为添加句点。

编辑：如果需要，您可以使用反引号和限定列名，但对于这个确切的查询，这不是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:14:25.513

使用`IFNULL()`.

任何你有可能为 NULL 字段的地方，用 IFNULL(whatever, '') 包装它，然后你会得到一个空字符串而不是一个杀死结果的 NULL。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T14:23:47.433

另一个简单的解决方案是使用**CONCAT_WS**。它肯定会起作用。

> SELECT CONCAT_WS('' F_NAME, '', LEFT(M_NAME, 1), L_NAME) FROM ccms.Employee WHERE HR_ID = '223';

# google-maps - 自动完成找不到带有“！”的地方

> ID：15004287
> 
> 赞同：0
> 
> 时间：2013-02-21T14:08:07.530
> 
> 标签：google-maps, google-places-api

我正在使用自动完成功能，我注意到一个名为 Play！（在 170 State St. Los Altos CA）不会在自动完成结果中返回。我可以在谷歌地方找到这个地方，所以我知道它存在： [https ://maps.google.com/maps?q=Play!+170+State+Street,+Los+Altos,+CA,+US&hl=en&sll= 31.406252,35.081059&sspn=7.188377,16.907959&hq=玩！&hnear=170+State+St,+Los+Altos,+Santa+Clara,+California+94022&t=m&z=17](https://maps.google.com/maps?q=Play!+170+State+Street,+Los+Altos,+CA,+US&hl=en&sll=31.406252,35.081059&sspn=7.188377,16.907959&hq=Play!&hnear=170+State+St,+Los+Altos,+Santa+Clara,+California+94022&t=m&z=17)

以下是我用来查找它的查询（当然删除了 API 密钥）： [https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Play!&types=establishment&location=37.379935,-122.116057 &radius=50&sensor=假&key=](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Play!&types=establishment&location=37.379935,-122.116057&radius=50&sensor=false&key=)

没有输入参数“Play！”的相同查询 也找不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:27:47.970

我只是尝试将您的查询与我的密钥一起使用，我得到了很好的结果。我也尝试没有参数“播放！” 它没有用。但是，如果您删除“！” 它再次起作用。

所以我认为你的问题出在你的钥匙上。但无论如何，我建议您避免输入查询中的特殊字符。

希望它有所帮助。

# image - Facebook linter 报告 og:image 太小，当它大于它选择的图像时

> ID：15004288
> 
> 赞同：5
> 
> 时间：2013-02-21T14:08:08.703
> 
> 标签：image, facebook-opengraph

问题：

*   linter 报告指定的 og:image 太小。图像为 628x464。
*   linter 而是从页面中选择一个 380x214 的随机图像，小于 og:image!

短绒向我展示了什么：

[http://developers.facebook.com/tools/debug/og/object?q=futuremark.com](http://developers.facebook.com/tools/debug/og/object?q=futuremark.com)

背景：

在过去的 9 个月里，我们一直在愉快地使用 130x110 og:images，没有出现任何问题。在过去的几周里，我注意到页面不再共享正确的图像。使用 linter，Facebook 最近似乎决定 og:images 至少应为 200x200。所以我一直在用更大的例子替换我们的 og:images，但 linter 仍然说它们太小了。

有什么想法可以解决这个问题，还是 Facebook 的问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-29T07:13:15.920

现在我猜 Facebook 没有找到高度和宽度的标签，并认为它们为空。就我而言，下一个标签解决了这个问题：

```
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="1280" />
<meta property="og:image:height" content="855" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:04:21.323

您是否在不更改元标记`http://www.futuremark.com/images/facebook/futuremark-logo.png`中指定的 URL 的情况下更改了图像文件的大小？`og:image`

如果 URL 没有更改，图像本身将被缓存，因此您需要更改 URL（或`?v=1`在末尾添加现金破坏参数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T23:50:32.347

这个问题有一个有用的解决方法。如果您使用 URL 缩短器来创建新 URL，则图像似乎可以正常加载。

例如，将您的 Youtube URL 粘贴到[bitly.com 的 URL 缩短器](https://bitly.com/)中，然后将缩短的 URL 粘贴到 Facebook。然后将按预期显示缩略图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-13T22:58:01.723

我遇到了同样的问题，对我来说，问题在于 og:image 中定义的 URL 与正在检查的 URL 不匹配

例如我的 og:image 标签有

```
<meta property="og:image" content="http://www.soundfuse.co.uk/public/images/logo_300px.png"/> 
```

我实际检查的 URL 是

```
http://soundfuse.co.uk 
```

注意丢失的 www。在 TLD 上？这导致从 soundfuse.co.uk 到 www.soundfuse.co.uk 发生 301 重定向，但是一旦我匹配两个主 URL，它就会按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-06T04:53:56.297

如果您使用 .htaccess [301] 不强制使用斜杠，也会触发此问题。如果不存在 og:url，Facebook 会推断出这个斜线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-09T14:50:40.803

请参阅以下链接了解 facebook 打开图形图像缓存问题： [https ://developers.facebook.com/docs/sharing/webmasters/?locale=en_US#images](https://developers.facebook.com/docs/sharing/webmasters/?locale=en_US#images)

它说：

> 图片的网址。要在发布后更新图像，请使用新图像的新 URL。图片基于 URL 缓存，除非 URL 更改，否则不会更新。

因此，总而言之，如果您已经有一个由 facebook 索引的开放图形图像，并且如果您想更新它，您应该更改 URL。

# bash - 如何使用换行符作为输出记录分隔符从对话框重定向 stderr？

> ID：15004290
> 
> 赞同：0
> 
> 时间：2013-02-21T14:08:14.037
> 
> 标签：bash, dialog, stdout, separator

每次我运行命令时，我都希望将 stderr 重定向到*/tmp/test*。测试文件应该有由换行符分隔的记录，而不是转到同一行。

如果我对选项域名服务器的输入是 192.168.0.1 和选项路由器 192.168.0.2，那么这两个将出现在同一行。它们应该出现在不同的行上。

我正在使用这些 IP 地址：

1.  192.168.0.1
2.  192.168.0.2

使用此命令行：

```
$ dialog --title "Inputbox - Example" \
--inputbox "option domain-name-servers" 8 50 "option domain-name-servers " \
--inputbox "option routers" 8 50 "option routers " \
2> /tmp/test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:37:57.670

## 使用`--separate-widget`标志

您可以使用*--separate-widget*标志强制小部件用换行符而不是默认的制表符分隔。例如：

```
dialog --separate-widget $'\n' \
       --title "Inputbox - Example" \
       --inputbox "option domain-name-servers" 8 50 "option domain-name-servers " \
       --inputbox "option routers" 8 50 "option routers " \
       2> /tmp/test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:45:37.643

这是最终代码。*dhcpd.conf*现在将为输入框的每个输入提供正确的输出和换行符。

```
#!/bin/bash

dialog --title "DHCP-CONFIGURATION" \
dialog --separate-widget $'\n' \
--inputbox "option domain-name-servers" 8 50 "option domain-name-servers "
--inputbox "option routers" 8 50 \ "option routers " 
--inputbox "ddns-update-style" 8 50 \ "ddns-update-style"
--inputbox "subnet and netmask" 8 50 \ "subnet and netmask "
--inputbox "range" 8 50 \ "range "
--inputbox "default-lease-time" 8 50 \ "default-lease-time "
--inputbox "max-lease-time" 8 50 \ "max-lease-time "
--inputbox "}" 8 50 \ "} "
2> /tmp/dhcpd.conf 
```

# mamp - Mamp 和虚拟主机

> ID：15004294
> 
> 赞同：0
> 
> 时间：2013-02-21T14:08:19.140
> 
> 标签：mamp

我创建了一个新主机，但我忘记添加磁盘位置，然后按下应用按钮。现在我的 Mamp pro 在 mysql 激活中被阻止了，我不知道如何阻止它以删除我插入的主机..

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:16:47.203

在终端中，执行以下命令以停止正在运行的服务：

```
/Applications/MAMP Pro/bin/stopApache.sh
/Applications/MAMP Pro/bin/stopMysql.sh 
```

（我实际上只使用 MAMP 而不是 MAMP Pro，所以我猜你的 stopApache 和 stopMysql 在 MAMP Pro 中，而不是像我这样的 MAMP。）

# derby - 更改 Derby 数据库密码

> ID：15004297
> 
> 赞同：7
> 
> 时间：2013-02-21T14:08:24.177
> 
> 标签：derby, change-password

我已经在 Glassfish/Netbeans 中设置了 Derby DB 密码。我还选中了记住我复选框。

现在我不能再更改密码了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T14:12:38.793

要更改密码，您只需执行：

```
call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.user.<my user name>', '<your new password>') 
```

例如，如果您的用户名是“john”并且您希望新密码是“johnsnewpassword”，您可以调用：

```
call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.user.john', 'johnsnewpassword') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-21T12:19:37.803

称呼

```
SYSCS_UTIL.SYSCS_RESET_PASSWORD('userid', 'newpassword'); 
```

请参阅[Java DB 参考手册中的内置系统过程/SYSCS_UTIL.SYSCS_RESET_PASSWORD](https://db.apache.org/derby/docs/10.9/ref/rrefnativeresetpasswordproc.html)。

# php - Yii，同一页面上的多个网格视图

> ID：15004299
> 
> 赞同：0
> 
> 时间：2013-02-21T14:08:35.127
> 
> 标签：php, ajax, gridview, yii

我在单个页面上面临多个网格视图的一些问题。

在开始时，当我在 jQueryUI 选项卡中打开单个网格视图时，它的分页工作正常。现在，当我使用 ajax 调用打开一个带有新网格视图的新选项卡时，新网格视图上的分页工作正常，但第一个网格视图上的分页链接呈现/打开一个新页面，而不是使用 ajax 更新网格视图，就像寻呼机一样链接是普通链接

我没有得到确切的问题或原因，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:00:48.797

问题在于 ajax 加载的内容，内容上的点击事件不会被注册，你需要 .on('click') 而不是 .click()

问题在[这里解释](https://stackoverflow.com/questions/10948475/how-to-bind-events-to-element-generated-by-ajax-in-yii)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T04:10:34.557

我以前也有同样的问题。单击分页或排序后，链接将在新页面中打开。

如果您注意到，您会发现 url 中没有`&ajax=id-of-the-grid`值，其中 id 是您要更新的网格的 id。

为我解决问题的是在视图中添加脚本 jquery.yiigridview.js 文件，并手动重新初始化视图。

这是一段工作代码，它为我解决了烦人的问题。

```
 <script type="text/javascript" src="/Project/assets/dd5f9a70/gridview/jquery.yiigridview.js"></script>
    <script type="text/javascript">

    /*<![CDATA[*/
    jQuery(function($) {
    jQuery('[data-toggle=popover]').popover();

    jQuery('body').tooltip({"selector":"[data-toggle=tooltip]"});

    jQuery('#project-grid').yiiGridView(
{'ajaxUpdate':['project-grid'],
'ajaxVar':'ajax',
'pagerClass':'pagination',
'loadingClass':'grid-view-loading',
'filterClass':'filters',
'tableClass':'table table-stats table-striped table-sortable',
'selectableRows':1,
'enableHistory':false,
'updateSelector':'{page}, {sort}',
'filterSelector':'{filter}',
'url':'/Project/index.php/realTime/AjaxUpdateProjectGrid',
'pageVar':'Project_page',
'afterAjaxUpdate':function() {
                jQuery('.popover').remove();
                jQuery('[data-toggle=popover]').popover();
                jQuery('.tooltip').remove();
                jQuery('[data-toggle=tooltip]').tooltip();
            }});
    });
    /*]]>*/

    </script> 
```

希望它可以帮助某人。谢谢，麦克斯

# c# - Lambda 多个条件来验证对象列表中的列表？

> ID：15004300
> 
> 赞同：-5
> 
> 时间：2013-02-21T14:08:39.060
> 
> 标签：c#, linq, c#-4.0

我有一个由以下项目组成的列表

```
List<person> lst = new List<person>()
lst.Add(new person(){ name="abc", age="24" });
lst.Add(new person(){ name="xyz", age="25" });
lst.Add(new person(){ name="zxc", age="28" });
lst.Add(new person(){ name="wer", age="38" });

List<string> strlst = new List<string>();
strlst.Add("abc");
strlst.Add("zxc"); 
```

现在我正在验证列表

```
lst.Exists(a => strlst.Contains(a.name)) 
```

如果它包含“abc xyz”，我如何验证整个列表`and`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:48:59.057

如果您找到`Intersect`两个名称中的一个，您将获得两个列表共有的名称。如果该交集与您的字符串列表的大小相同，则意味着它们都在交集中，这意味着它们都在另一个列表中。

```
return list.Select(person => person.name)
       .Intersect(strlst).Count() == strlst.Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:49:54.847

如果我错了，请纠正我，但我相信您的初衷是针对您的`lst`变量进行验证，而不是`strlst`. 如果是 for `strlist`，那么我相信@LosManos 的回答是一个非常好的方法。如果您尝试`List<person> lst`使用其中的值进行验证，`strlst`那么您应该执行以下操作：

```
var allNames = lst.Select(l => l.name);
var containsAll = strlist.All(s => allNames.Contains(s)); 
```

即使您需要比较两个以上的东西，这种方式也可以确保您可以正确地做到这一点。

# vbscript - VBS 给出错误“预期语句结束”

> ID：15004302
> 
> 赞同：1
> 
> 时间：2013-02-21T14:08:47.950
> 
> 标签：vbscript, syntax-error

嗨，我正在尝试运行此脚本，但它给了我“预期的语句结束”。

```
wscript.exe "C:\test.vbs" "your_file.bat" 
```

我将以上内容放在run.vbs 中，并尝试通过双击文件从withing windows 执行run.vbs。我收到“预期语句结束”错误

在 invis.vbs 中有：

```
CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0, False 
```

早些时候我得到了这个解决方案：[Windows 启动时在后台运行批处理文件](https://stackoverflow.com/questions/289498/running-batch-file-in-background-when-windows-boots-up)

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:25:03.793

这个

```
wscript.exe "C:\test.vbs" "your_file.bat" 
```

用于在命令提示符/控制台/dos 框窗口中进行文本输入。如果将其放入 .VBS 文件中，您（应该并且）会收到语法错误。这个：

```
CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0, False 
```

看起来像有效的 VBScript 代码（无论是在 invis.vbs 还是 test.vbs 中）。

如果您打算将参数传递给脚本，则尝试通过双击运行 .VBS 是个坏主意。

因此，您应该重新开始并清楚地思考/描述您想要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:24:06.660

wscript.exe "c:\test.vbs" "your_file.bat" 你不能放入run.vbs。这是批处理脚本。把它放在一个run.bat中......

或者

修改 run.vbs 看起来像：

```
Set objShell = CreateObject("WScript.Shell")
objShell.run("wscript C:\test.vbs your_file.bat") 
```

# android - WebView 在第二次初始化后显示为纯白框

> ID：15004304
> 
> 赞同：3
> 
> 时间：2013-02-21T14:08:48.433
> 
> 标签：android, android-webview, layout-inflater

编辑：tl；博士：WebView 显示为白框，即使我似乎设置正确，并且确实前两次确实有效，但随后失败）

编辑：[显示问题的视频...](http://youtu.be/0cR-37MP3as)

我有以下代码从定义它的 xml 中膨胀一个视图（其中包含一个 WebView）：

```
private void createCard(ViewGroup cvFrame, Card card) {

    //... setup vairables...

    cvFrame.clearDisappearingChildren();
    cvFrame.clearAnimation();

    try {
        View cv = LayoutInflater.from(getBaseContext()).inflate(R.layout.card_back_view,
                cvFrame, true);
        cv.setBackgroundDrawable(Drawable.createFromStream(mngr.open(deckName + "_Card_back.png"), deckName));

        TextView suit = (TextView)cv.findViewWithTag("card_back_suit");
        //...setup text view for suit, this code works fine every time...

        WebView title = (WebView)cv.findViewWithTag("card_back_title");
        //This WebView doesn't appear to be the one which actually appears on screen (I can change settings till I'm blue in the face, with no effect)
        if (title != null) {
            title.setBackgroundColor(0x00000000);
            title.loadData(titleText, "text/html", "UTF-8");
        } else {
            Log.e("CardView", "Error can't find title WebView");
        }
    } catch (IOException e) {
        Log.e("CardView", "Error making cards: ", e);
    }
} 
```

当此方法在我的 Activity 中作为 onCreate 方法的一部分调用时，WebView 包含正确的代码，并且是适当透明的。

我有一个手势监听器，它用不同的内容替换 ViewGroup 的内容（它将顶部卡片向左移动，用卡片 2 替换顶部卡片的内容，将顶部卡片放回原处，然后用卡片 3 替换卡片 2 )

```
//Gesture listener event
ViewGroup cvFrame = (ViewGroup)findViewById(R.id.firstCard);
cardLoc++
cvFrame.startAnimation(slideLeft); 
```

（onAnimationEnd 代码）

```
public void onAnimationEnd(Animation animation) {
    if (animation == slideLeft) {
        ViewGroup cvFrameOldFront = (ViewGroup)findViewById(R.id.firstCard);
        ViewGroup cvFrameNewFront = (ViewGroup)findViewById(R.id.secondCard);

        createCard(cvFrameOldFront, cards.get((cardLoc)%cards.size()));
        createCard(cvFrameNewFront, cards.get((cardLoc+1)%cards.size()));

        TranslateAnimation slideBack = new TranslateAnimation(0,0,0,0);
        slideBack.setDuration(1);
        slideBack.setFillAfter(true);
        cvFrameOldFront.startAnimation(slideBack);

    } 
} 
```

当动画发生并且我替换卡片的内容时，TextView`suit`被替换得很好，代码肯定会通过代码来替换 WebView 内容，但由于某种原因，我最终得到了一个白色矩形，其大小和形状与WebView，没有内容，没有透明度。

如果我将 WebView 更改为 TextView，它的内容会被很好地替换，所以这是一个仅在 WebView 控件中出现的问题：S

谁能告诉我为什么/建议修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:14:10.537

事实证明，当使用 LayoutInflater 替换 ViewGroup 的内容时，WebView 不会被清除。其他控件似乎都被删除了（或者至少`findViewWithTag()`为每个其他控件返回了正确的引用）。我刚刚在`cvFrame.removeAllViews()`LayoutInflater 执行此操作之前添加了该行并解决了该问题。如果有人对此有任何更好的解释，我会按照他们的方式提出观点，否则他们只会进入以太......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:05:45.707

我在加载几个 WebViews 内容时遇到了类似的问题。这是因为误用了[pauseTimers](http://developer.android.com/reference/android/webkit/WebView.html#pauseTimers%28%29)函数

情况是：第一个 webView 不再需要了，我很认真地想在释放它之前暂停它。调用 onPause() 和 pauseTimers()

pauseTimers 对任何 web 视图都是通用的，它破坏了之后发生的每一次 webview 的使用，只显示白色矩形。

也许这不是你的问题，但值得检查你没有在`WebView.pauseTimers()`某个地方打电话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:13:57.920

通过调用 findViewById，您会获得对先前加载的 webview 的引用，对吗？

所以失败的 loadData 调用是您在单个 webview 实例上进行的第二个调用。

您可能想检查一下： [Android WebView - 1st LoadData() 工作正常，后续调用不更新显示](https://stackoverflow.com/questions/4096783/android-webview-1st-loaddata-works-fine-subsequent-calls-do-not-update-disp)

看来 loadData() 不会加载数据两次...您可能想尝试[WebView.loadDataWithBaseUri()](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:06:56.440

为了确认您的答案，源代码[`LayoutInflater.inflate(int resource, ViewGroup root, boolean attachToRoot)`](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28int,%20android.view.ViewGroup,%20boolean%29)实际上确实在[内部调用`root.addView()`](http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/view/LayoutInflater.java#496)了将新膨胀的视图附加到根子节点的末尾而不是替换它们。

所以现在的谜团是为什么你的调用`findViewWithTag()`是为你的其他小部件返回预期的对象（这将是顶部，最近创建的实例），但对于你的 WebView 它返回的是别的东西。

您的布局 XML 中是否可能有另一个对象共享相同的**“card_back_title”**标签？

我也想知道为什么你不使用更常见的`findViewById()`，但我不确定它是否会有所作为。

# jquery - Can't get jQuery to work with Icefaces + Liferay

> ID：15004314
> 
> 赞同：1
> 
> 时间：2013-02-21T14:09:09.970
> 
> 标签：jquery, jsf, xhtml, liferay, icefaces

I'm trying to develop a simple Liferay portlet with the Icefaces framework and cannot get jQuery to work.

The main problem is, that I can't load the jQuery library properly. Whenever I add script tags to my xhtml header like this

```
<h:head>
    <script></script>
</h:head> 
```

the page shows an error message:

> failed to append text[ ] into #document

So I tried loading the jQuery libray with the *h:outputScript* tag instead, but in Icefaces, the target="head" option doesn't work - see [http://jira.icesoft.org/browse/ICE-8313](http://jira.icesoft.org/browse/ICE-8313).

```
<h:outputScript library="scripts" name="jquery-1.9.1.js" target="head" /> 
```

So, at this point I'm clueless who to include the jQuery (or any javascript) library.

Please don't suggest using another framework. Icefaces is demanded in future projects, so I have to get used to it.

All I'm trying to do is something like this: [http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

Thanks in advance, Fabi.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:19:11.800

I hope you know that this `<h:head>` tag would ultimately generate an HTML `<head>` tag.

And since portlets are just fragments they should not contain any type of `<head>` tag, so in liferay you can specify your javascript either in [`<header-portlet-javascript>`](https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/definitions/liferay-portlet-app_6_1_0.dtd#L656) or [`<header-portal-javascript>`](https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/definitions/liferay-portlet-app_6_1_0.dtd#L650) element in [`liferay-portlet.xml`](https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/portal-web/docroot/WEB-INF/liferay-portlet.xml#L18).

Or else include your javscript library in the theme you would create inside the [`portal_normal.vm`](https://github.com/liferay/liferay-portal/blob/6.1.1-ga2/portal-web/docroot/html/themes/_unstyled/templates/portal_normal.vm#L10).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:21:27.927

You can import a JS-Library with the `<header-portlet-javascript>` in the `liferay-portlet.xml` file. Maybe this (older) [example](http://www.liferay.com/web/jonas.yuan/blog/-/blogs/5241428) can help you.

# c++ - 模板类来区分对象类型？

> ID：15004316
> 
> 赞同：0
> 
> 时间：2013-02-21T14:09:15.423
> 
> 标签：c++, templates, polymorphism

我可以使用 C++ 模板类来区分对象类型吗？或者我应该使用什么？

例如。我有一个类`Synonym`，它可以是`Statement, Procedure, etc`例如类型。我有接受这些同义词并根据其类型评估它们的函数。所以我想如果我能做这样的事情会很好：

```
enum Types { Statement, Procedure, Variable, ... };

template <typename Types>
class Synonym { ... }

void evaluate(Synonym<Statement> s, Synonym<Variable> v) { do something }
              ^ so that I can do this ... instead of checking the type in function like: 

void evaluate(Synonym s, Synonym v) {
    assert(s.type == Statement);
    assert(v.type == Variable);

    // also would like to eliminate things like: (if possible)
    switch(s.type) {
        case XXX: doSomething ... 
        case YYY: doAnotherThing ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:37:19.177

我认为使用变体和访问者模式会很合适。在此处查看 Boost.Variant：http: [//www.boost.org/doc/libs/1_51_0/doc/html/variant.html](http://www.boost.org/doc/libs/1_51_0/doc/html/variant.html)，最后一个示例（也在下方但已扩展）显示了访问者实现。还有其他变体和访问者实现。std::any 和 loki 也是选项。我个人喜欢 loki，但这可能只是因为我是 Alexandrescu 的忠实粉丝。

```
#include "boost/variant.hpp"
#include <iostream>

class ToLengthVisitor : public boost::static_visitor<int>
{
public:
    int operator()(int i) const
    {
        return i;
    }

    int operator()(const std::string & str) const
    {
        return str.length();
    }

    int operator()(const char * str) const
    {
        const char * temp = str;
        while(*temp != '\0') temp++;
        return temp-str;
    }
};

int main()
{
    typedef boost::variant< int, std::string, const char * > MyVariant;
    MyVariant u(std::string("hello world"));
    std::cout << u; // output: hello world

    MyVariant cu(boost::get<std::string>(u).c_str());

    int result = boost::apply_visitor( ToLengthVisitor(), u );
    std::cout << result; // output: 11 (i.e., length of "hello world")
    result = boost::apply_visitor( ToLengthVisitor(), cu );
    std::cout << result; // output: 11 (i.e., length of "hello world")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:15:16.627

您可以创建一个函数模板，然后专门研究该模板

```
template<typename Type>
void evaluate (Type t) {}

template<>
void evaluate<Statement>( Statement s)
{} 
```

这样，当您传递 a`Statement`时，它将选择该重载，并且您可以根据类型执行不同的行为。

# c++ - 离开一个函数，引用一个没有默认构造函数的类型的对象

> ID：15004317
> 
> 赞同：1
> 
> 时间：2013-02-21T14:09:17.703
> 
> 标签：c++, pointers, c++11, unique-ptr

例如

```
bool read(Input &input);

Input input; //error
bool success = read(input); 
```

将是一个错误，因为 Input 没有默认构造函数。

在这种情况下，我可以使用任何技巧将 Input 对象从函数中取出吗？我想我一定有一些 unique_ptr 技巧可用，但我不确定具体如何。随意建议其他方法。

请举例说明读取功能的外观。

我宁愿不为此目的为 Input 创建一个（无意义的）默认构造函数，并注意这只是一个愚蠢的例子，所以不要给“Input”、“read”等词附加任何特殊含义： )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:17:15.027

```
bool read(unique_ptr<Input> &input)  // read asume input is disposable/empty
{    ....
  input.reset(new Input( a,d,c ) );
     ....
 }

....
unique_ptr<Input> input;      //error ?
bool success = read(input);
if (input)
  if (succes)
     input->X();
  else
     input->Y(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:18:27.377

从评论中，您的问题似乎是设计一个功能

*   可能会失败（如果是这样，应该向调用者发出信号），

*   但如果不是，则生成一个没有默认 cconstructor 的类型的值

第一点很简单：使用异常。

第二点也很简单：使用函数返回值特性。

IE，

```
Object foo()
{
    if( "didna wrok" )
    {
        throw std::runtime_error( "foo: I failed, miserably" );
    }

    return Object( arg1, arg2, arg3 );
} 
```

现在也有很多其他的方法可以做到这一点，但上面是最自然的，直接使用旨在支持和完全解决这些方面的语言特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:21:58.083

```
unique_ptr<Input> input_ptr = read(); 
```

其中`read()`定义为：

```
unique_ptr<Input> read()
{
    .
    .
    .
    return unique_ptr<Input>(new Input(x,y,z));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:32:21.740

如果您处于 C+11 之前的世界，可以使用以下解决方法`malloc`：

```
bool read(Input &input); // keep the function read intact 

Input* input = static_cast<Input*>(malloc(sizeof(Input))); // bypass constructor
bool success = read(*input);
...
free(input); // don't forget to free input later 
```

# android - 为什么我在运行 android 应用程序时会在 DDMS 中出现这些错误？

> ID：15004320
> 
> 赞同：0
> 
> 时间：2013-02-21T14:09:21.980
> 
> 标签：android, console

所以正如问题所说，我在运行我的android应用程序时遇到了这些错误。我将控制台切换到 Android，然后在运行应用程序时返回 DDMS 并显示以下内容：

```
[2013-02-21 22:12:53 - ddmlib] An established connection was aborted by the software in your host machine
java.io.IOException: An established connection was aborted by the software in your host machine
    at sun.nio.ch.SocketDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(Unknown Source)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(Unknown Source)
    at sun.nio.ch.IOUtil.write(Unknown Source)
    at sun.nio.ch.SocketChannelImpl.write(Unknown Source)
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
    at com.android.ddmlib.Client.requestAllocationStatus(Client.java:421)
    at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:837)
    at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:805)
    at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:765)
    at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:652)
    at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:44)
    at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:580) 
```

这是什么意思？模拟器本身也不接受鼠标输入（或者似乎不接受），因为当我单击启动器图标时，模拟器加载时没有任何反应。所以我只是等待 android 应用程序的第一个活动启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:18:23.390

简单的解决方案 这些问题可以通过关闭 Eclipse 并重新启动来简单地解决。Eclipse 有时无法与模拟器建立连接，因此在某些情况下可能会发生这种情况。

# bitmap - 从 Monodroid 项目中的 ImageView 获取位图

> ID：15004322
> 
> 赞同：1
> 
> 时间：2013-02-21T14:09:32.167
> 
> 标签：bitmap, imageview, xamarin.android

是否可以检索 imageView 的位图？

我试过[这个](https://stackoverflow.com/questions/8306623/get-bitmap-attached-to-imageview)，但我得到 NullPointerException 并且编辑的代码在 monodroid 中不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:30:13.920

感谢您的回答。最后我这样做了：

```
var imageView = FindViewById<ImageView>(Resource.Id.image);
Bitmap bmp = ((BitmapDrawable)imageView.Drawable).Bitmap; 
```

ps：我有一个 NullPointerException 因为 imageView 在另一个视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:45:26.243

这是我正在使用的一个工作示例。

```
 view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        Bitmap save = view.getDrawingCache(); 
```

在哪里`view`，`ImageView`如果你想保存它。好吧，这是我从图像视图中获取视图并将其另存为的保存方法`.PNG`

```
 void Save() {
    if (null != view.getDrawable()) {
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        save = view.getDrawingCache();
        final File myDir = new File(folder);
        myDir.mkdirs();
        final Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        final String fname = "StyleMe-" + n + ".png";
          file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            final FileOutputStream out = new FileOutputStream(file);
            save.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            Toast.makeText(getApplication(), "Image Saved",
                    Toast.LENGTH_SHORT).show();
        } catch (final Exception e) {
            Toast.makeText(getApplication(),
                    "Something Went Wrong check if you have Enough Memory",
                    Toast.LENGTH_LONG).show();
        }
    } else {
        final Toast tst = Toast.makeText(getApplication(),
                "Please Select An Image First", Toast.LENGTH_LONG);
        tst.setGravity(Gravity.CENTER, 0, 0);
        tst.show();
    }
    view.setDrawingCacheEnabled(false);
} 
```

这是我的变量。

```
 String folder = "/sdcard/Pictures/StyleMe";
        static File file; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:32:30.867

您应该能够通过*Drawable*属性访问分配的图像。确保在访问之前检查 null。

# javascript - 使用 Socket.IO 在 Compound.js 中显示对象计数

> ID：15004323
> 
> 赞同：1
> 
> 时间：2013-02-21T14:09:33.410
> 
> 标签：javascript, node.js, express, socket.io

我正在为一个使用 Compound.js（基于 node.js/Express.js 构建）的新项目测试 Socket.IO，但我遇到了一个问题。我已经设法使基础工作正常，以下消息工作正常：

服务器端 JS (applicationname/config/initializers/socketio.js)：

```
var sio = require('socket.io');
var http = require('http');
var activeClients = 0;

module.exports = function (compound) {
    var app = compound.app;
    var server = http.createServer(app);
    compound.server = server;
    var io = compound.io = sio.listen(server);

    io.sockets.on('connection', function (socket) {
        activeClients +=1;

        var connections = setInterval(function () {
            socket.emit('news', { clients: activeClients });
        }, 1000);

        socket.on('disconnect', function () {
            activeClients -= 1;
            io.sockets.emit('user disconnected');
            clearInterval(connections);
        });
    });
} 
```

前端JS（applicationname/public/index.html）：

```
<script src="/socket.io/socket.io.js"></script>
<script>
      var socket = io.connect('http://localhost');

      function msgReceived(msg){
        $clientCounter.html(msg.posts);
      }

      $(document).ready(function () {
        $clientCounter = $("#client_count");
        socket.on('news', function (data) {
            msgReceived(data);
            socket.emit('my other event', { my: 'data' });
          });
      });
</script> 
```

我现在要做的是获取服务器上发布的帖子数量。我使用默认的脚手架来生成 Posts 方法、控制器和视图。

我现在如何找到帖子总数并将该值传递给服务器端 JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:44:25.857

只需计算服务器端的发射次数并发送？

```
 ...
    var emits = 0;
    var connections = setInterval(function () {
        emits++;
        socket.emit('news', { clients: activeClients , num_messages: emits});
    }, 1000);

    ... 
```

或者创建可以从客户端轮询的特定消息

# java - Jasper Reports 5.0.1 中的文件解析器

> ID：15004325
> 
> 赞同：4
> 
> 时间：2013-02-21T14:09:36.410
> 
> 标签：java, jasper-reports, websphere, deprecated, resolver

在 5.0.1 中，REPORT_FILE_RESOLVER 已被弃用，示例实现：http: [//jasperreports.sourceforge.net/sample.reference/tableofcontents/index.html#fileresolver](http://jasperreports.sourceforge.net/sample.reference/tableofcontents/index.html#fileresolver)

声明强烈建议切换到 JasperReportsContext。

我找不到 JasperReportsContext 使用的任何示例。据我所知，我应该寻找具有 FileResolver getter 和 setter 的 LocalJasperReportsContext。

我在问，它必须怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T11:59:28.620

浏览资源后，我找到了解决方案。

JRXML imageExpression 标签：

```
<band height="79" splitType="Stretch">
<image scaleImage="FillFrame" isLazy="true" onErrorType="Blank">
    <reportElement uuid="3340bf0f-8471-45e9-8ea4-bdf44a7c0e68" x="0" y="0" width="150" height="69"/>
    <imageExpression class="java.io.File"><![CDATA["image.jpg"]]></imageExpression>
</image> 
```

Java代码片段：

```
FileResolver resolver = new FileResolver() {
@Override
public File resolveFile(String filename) {
    return new File("/some/path");
}
};

InputStream jasperfile = getClass().getClassLoader().getResourceAsStream("file.jasper");

LocalJasperReportsContext ctx = new LocalJasperReportsContext(DefaultJasperReportsContext.getInstance());
ctx.setClassLoader(getClass().getClassLoader());
ctx.setFileResolver(resolver);
JasperReport jasperReport = (JasperReport) JRLoader.loadObject(jasperfile);

JasperFillManager fillmgr = JasperFillManager.getInstance(ctx);
JasperExportManager exmgr = JasperExportManager.getInstance(ctx);

JasperPrint jasperPrint = fillmgr.fill(jasperReport, parameters, beanColDataSource);
ByteArrayOutputStream pdfBytes = new ByteArrayOutputStream();
exmgr.exportToPdfStream(jasperPrint, pdfBytes); 
```

您必须创建一个新上下文并将其传递给 JasperFillManager 和 JasperExportManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T07:32:12.070

使用扩展是另一种方式。

1.  在 jasperreports_extension.properties net.sf.jasperreports.extension.registry.factory.repository.th.resource.file.resolve=th.motive.jasper.report.extension.factory.ResourceFileResolveRepositoryExtensionsRegistryFactory 上注册一个自定义 ExtensionsRegistryFactory

2.  创建 ExtensionRegistry 调用 ResourceFileResolveRepositoryExtensionRegistry

3.  在 ResourceFileResolveRepositoryExtensionRegistry 你可以注册你的服务来处理文件解析器

(*) 它不仅仅是文件解析器，你可以做任何 StreamRepositoryService 做的事情

您从我的示例[https://bitbucket.org/idplugin/th.motive.jasperreport.extend中完整引用](https://bitbucket.org/idplugin/th.motive.jasperreport.extend)

# wpf - 如何从 Windows.UI.Xaml.UIElement 转换为 System.Windows.Controls.UIElement

> ID：15004329
> 
> 赞同：2
> 
> 时间：2013-02-21T14:09:51.960
> 
> 标签：wpf, xaml, windows-runtime

我正在尝试为我使用 Windows 运行时 API 为 Windows 应用商店开发的应用程序创建一个新的 UI。这个新客户端将是一个 WPF 桌面应用程序。我正在尝试尽可能多地重用代码，但我面临着几个问题。

幸运的是，有一种方法可以在 WPF 桌面应用程序中使用 WinRT（请参阅[此](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)和[此](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)）

现在我被以下问题阻止了：[MediaCapture](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.mediacapture.aspx)类有一个方法来启动设备的预览，在我开始预览后，我可以创建一个[CaptureElement](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.captureelement)来显示预览。CaptureElement 是 Windows.UI.Xaml.Controls 的一部分，不能在构建 WPF UI 的 System.Windows.Controls 的容器中使用。

我会用这种方法去任何地方吗？你会推荐什么？如何在 WPF 应用程序中显示设备的预览？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:05:29.297

`CaptureElement`不能在桌面应用程序中使用 - 文档显示“[仅限 Windows 应用商店应用程序]”。通常 - WPF 和 WinRT/XAML 中的 UI 控件不能在其各自域（桌面/沉浸式 UI）之外使用。在 WPF 应用程序中，您需要使用 WPF 控件 - 例如 DirectShow 用于相机捕捉，

# oracle - 在 oracle 中识别重复项以及匹配的唯一记录

> ID：15004333
> 
> 赞同：0
> 
> 时间：2013-02-21T14:10:01.767
> 
> 标签：oracle, duplicates

您好我正在运行以下查询来识别重复记录。

```
SELECT *
          FROM unique2 P WHERE EXISTS(SELECT 1 FROM unique2 C 
                                    WHERE ( (C.surname) =  (P.surname)) 
                                      AND ( (C.postcode) =  (P.postcode)) 
                                      AND ((( (C.forename) IS NULL OR  (P.forename) IS NULL) 
                                      AND  (C.initials) =  (P.initials)) 
                                        OR  (C.forename) =  (P.forename))
                                      AND ( (C.sex) =  (P.sex) 
                                        OR  (C.title) =  (P.title)) 
                                      AND (( (C.address1))=( (P.address1)) 
                                        OR ( (C.address1))=( (P.address2)) 
                                        OR ( (C.address2))=( (P.address1))
                                        OR  instr(C.address1_notrim, P.address1_notrim) > 0 
                                        OR  instr(P.address1_notrim, C.address1_notrim) > 0)
                                      AND C.rowid < P.rowid); 
```

但是通过此查询，我无法识别与重复记录匹配的唯一记录 ID。有没有办法识别重复项以及与这些重复项匹配的唯一记录 ID（我的表具有唯一键）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:25:23.507

您也可以使用分析函数执行此操作：

```
select id, num_of_ids, first_id, surname, postcode, dob
from (
    select id,
        count(*) over (partition by surname, postcode, dob) as num_of_ids,
        first_value(id)
            over (partition by surname, postcode, dob order by id) as first_id,
        surname,
        postcode,
        dob
    from promolog
)
where num_of_ids > 1; 
```

* * *

根据您的更新，我认为您可以进行自加入，您可以根据需要将其复杂化：

```
select dup.*, master.id as duplicate_of
from promolog dup
join promolog master
on master.surname = dup.surname
and master.postcode = dup.postcode
and master.dob = dup.dob
... and <address checks etc. > ...
and master.rowid < dup.rowid; 
```

但也许我仍然缺少一些东西。顾名思义，`exists`就是用于测试匹配记录的存在；如果您想从匹配的记录中检索任何数据，那么您需要在某个时候加入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:18:19.353

```
select id
from promolog
where surname, postcode, dob in (
  select surname, postcode,dob
  from (
    select surname, postcode, dob, count(1)
    from promolog
    group by surname,postcode,dob
    having count(1) > 1
  )
) 
```

# c# - 通用 DAL / BLL 类

> ID：15004334
> 
> 赞同：1
> 
> 时间：2013-02-21T14:10:01.570
> 
> 标签：c#, .net, generics, data-access-layer, business-logic-layer

我目前正在为我们的新应用程序构建数据访问层和业务逻辑层类，我有一个问题（显然）。首先，这里有一些可能会有所帮助的细节：

*   使用 Entity Framework 5 进行模型类和数据访问
*   每个“层”在不同的类库和命名空间（即 App.Model、App.DAL、App.BLL）中分开

从 DAL 开始 - 我决定为所有 DAL 类编写一个基类来继承。

```
public abstract class DALBase<T> : IDisposable
{
    protected AppEntities context;
    protected DbSet set;

    public DALBase()
    {
        context = new OECCORPEntities();
        set = context.Set(typeof(T));
    }

    protected virtual void Save()
    {
        context.SaveChanges();
    }

    public virtual void Add(T model)
    {
        set.Add(model);
        Save();
    }

    public virtual T Get(int id)
    {
        return (T)set.Find(id);
    }

    public virtual List<T> GetAll()
    {
        return set.OfType<T>().ToList();
    }

    public virtual void Delete(int id)
    {
        T obj = Get(id);
        set.Remove(obj);
        Save();
    }

    public virtual void Update()
    {
        Save();
    }

    public void Dispose()
    {
        context.Dispose();
    }
} 
```

正如您将看到的，基类实现了一个泛型类型，它应该是 DAL 类负责使用的模型的类型。使用泛型类型，在构造函数中，它使用泛型参数的类型创建一个 DbSet - 它在下面预定义的类似 CRUD 的虚函数中使用（添加、获取等）。

然后我明白了——等一下……因为它是通用的，我真的不必为每个模型都实现 DAL 类。我可以写这样的东西：

```
public class GenericDAL<T> : DALBase<T>
{
    public GenericDAL() : base() {}
} 
```

...我可以用于任何模型。好的，等等到业务逻辑层。我也为 BLL 创建了一个基类：

```
public abstract class BLLBase<T>
{
    protected GenericDAL<T> dal;

    public BLLBase()
    {
        dal = new GenericDAL<T>();
    }

    public virtual void Add(T model)
    {
        dal.Add(model);
    }

    public virtual T Get(int id)
    {
        return dal.Get(id);
    }

    public virtual List<T> GetAll()
    {
        return dal.GetAll();
    }

    public virtual void Delete(int id)
    {
        dal.Delete(id);
    }

    public virtual void Update()
    {
        dal.Update();
    }
} 
```

...它使用 GenericDAL 来完成它的工作。所以以一种类似的方式，我只是写了一个看起来像这样的 GenericBLL 类：

```
public class GenericBLL<T> : BLLBase<T>
{
    public GenericBLL() : base() { }
} 
```

为了测试它，一个简单的控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        GenericBLL<ADMIN> bll = new GenericBLL<ADMIN>();
        List<ADMIN> admins = bll.GetAll();
    }
} 
```

...其中“ADMIN”是模型类型。奇迹般有效。

这背后的想法是避免为每个模型编写 DAL / BLL 类，除非它需要额外的功能。有人能告诉我为什么我*不想*这样做吗？我认为通用 DAL / BLL 类可以完成工作并节省开发时间。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:29:04.993

好吧，一个缺点是，如果您决定稍后添加一些业务规则，则必须将类型从**GenericBLL[Whatever]**切换到**WhateverBLL**。

一个明显的解决方案是创建一个继承自**GenericBLL[Whatever]**的类。喜欢：

```
public class WhateverBLL : GenericBLL<Whatever> 
```

并改用这个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:44:19.247

现在，您的 BLL 并没有特别增加价值。每个调用都只是传递到另一层。也许是您的应用程序的简单性（感谢您的幸运星，您是如此幸运），或者您拥有我将其归类为生活在其他地方的实际业务逻辑。

对我来说，业务逻辑是在持久化数据之前完成的所有事情，在检索数据之后完成的所有事情，以及类似的事情。决定，道路上的岔路口，所采取的行动。相比之下，实际上保存和检索数据通常是极其微不足道的。

因此，当我查看您的通用 DAL 基类时，我认为这是一个好的开始。我可能会从中提取一个接口，以便在测试时替换它。目前，*继承*基础的类没有增加任何价值。不要仅仅为了它而创建图层和类，确保它增加了价值并以某种方式让你的生活更轻松。

当我查看您的通用 BLL 类时，我认为您可能将*真正的*业务逻辑隐藏在某种形式的代码隐藏中，或者隐藏在控制台应用程序的类文件中。虽然肯定有可能存在仅因类型而异的通用功能，但我不认为*一个类*是你想要的。我的建议是重新考虑您认为的实际业务逻辑。到 DAL 的简单传递层可能不是它。

# css - 如何为样式表中的所有样式生成参考页面

> ID：15004343
> 
> 赞同：0
> 
> 时间：2013-02-21T14:10:19.133
> 
> 标签：css

我得到了一个由另一位开发人员创建的扩展样式表，我被要求根据这些样式构建一些页面。我正在寻找一种以每种样式输出示例文本的方法，以便我可以为我们的设计团队提供参考页面。

任何人都知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:13:20.197

您可以通过[Zen Coding HTML 生成](http://code.google.com/p/zen-coding/)器运行每个选择器，它从类似 CSS 选择器的语法生成 HTML，并确保每条生成的 HTML 都包含一些示例文本/图像/等。

# database - Scala Slick 提升日期 GroupBy

> ID：15004345
> 
> 赞同：1
> 
> 时间：2013-02-21T14:10:36.980
> 
> 标签：database, scala, slick

我正在使用带有 Slick 1.0.0 的 Scala 2.10 并尝试进行提升查询。

我有一个表“登录”，我试图在其中进行加载，并在时间戳列上进行分组。但是，当我尝试分组时，当我尝试格式化时间戳字段以仅提取日期部分以按同一天对对象进行分组时，我遇到了问题。

给定对象：

```
id | requestTimestamp
1  | Jan 1, 2013 01:02:003
2  | Jan 1, 2013 03:04:005
3  | Jan 1, 2013 05:06:007
4  | Jan 2, 2013 01:01:001 
```

我想在类似的日子里从数据库中返回一个分组，为了简洁起见，发生以下格式化时间戳到 id 关系，其中 id 实际上是一个对象列表

```
Jan 1, 2013 -> (1, 2, 3)
Jan 2, 2013  (4) 
```

我有以下光滑的表格对象：

```
private implicit object Logins extends Table[(Int, Timestamp)]("LOGINS") {
    def id = column[Int]("ID", O.PrimaryKey)
    def requestTimeStamp = column[Timestamp]("REQUESTTIMESTAMP", O.NotNull)
    def * = logId ~ requestTimeStamp
} 
```

以下查询方法：

```
val q = for {
    l <- Logins if (l.id >= 1 && l.id <= 4)
} yield l

val dayGroupBy = new java.text.SimpleDateFormat("MM/dd/yyyy")
val q1 = q.groupBy(l => dayGroupBy.format(l.requestTimeStamp))

db.withSession {
    q1.list
} 
```

但是，我没有得到预期的分组，而是在尝试 groupBy 的那一行出现异常：

```
java.lang.IllegalArgumentException: Cannot format given Object as a Date 
```

有人对按数据库中的时间戳正确分组有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:08.983

`Timestamp`和`Date`不是一回事！尝试使用or转换`Timestamp`为人类可理解的文本。`calendar``SimpleDateTime`

虽然不太确定第二个！

# sql - SQL 使用 3 个单独的表连接和分组

> ID：15004353
> 
> 赞同：0
> 
> 时间：2013-02-21T14:10:49.083
> 
> 标签：sql, sql-server-2008

我在这里有两个单独的查询，我需要将它们合并为一个查询，我将发布查询，然后尝试解释我正在尝试做的事情。

```
SELECT Distinct I.ITMCDE, V.VNDRCDE, V.VNAME
  FROM (SELECT RIGHT(Items.[Item Number], 3) as ITMCDE FROM Items) I, 
       (SELECT LEFT(Vendors.[Vendor ID], 3) as VNDRCDE, 
               Vendors.[Vendor Name] as VNAME
          FROM Vendors) V
 WHERE I.ITMCDE = V.VNDRCDE 
```

在第一个中，我只是将供应商代码与项目代码进行匹配，以获取生产该项目的供应商名称。

```
SELECT DISTINCT (Items.[Item Description]), ItemQuantities.[QTY Available],
       Items.[Selling U Of M], Items.[Item Number] 
  FROM ItemQuantities 
 INNER JOIN Items ON ItemQuantities.[Item Number] = Items.[Item Number] 
 WHERE Items.[Item Number] LIKE 'WH%'
   AND Items.[Item Number] NOT LIKE '%RMW' 
```

在第二个中，我选择项目描述，两个单独表格中的可用数量（可用数量在不同的表格中，使用项目编号匹配它们）

如您所见，三个表之间的唯一关联是项目编号，甚至在供应商表中也没有。项目编号的最后三个字符与供应商 ID 的前三个字符相关......我没有设计这个设置。我现在只是在尝试使用它。

如何将这两个语句合并为一个语句，该语句将为我提供供应商名称、项目描述、计量单位（销售 U 的 M）和项目描述唯一的项目数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:21:08.533

我认为这应该有效：

```
SELECT DISTINCT Items.[Item Description], 
       ItemQuantities.[QTY Available],
       Items.[Selling U Of M], 
       Items.[Item Number], 
       V.VNAME
FROM ItemQuantities 
   INNER JOIN Items ON ItemQuantities.[Item Number] = Items.[Item Number] 
   INNER JOIN Vendors ON 
       RIGHT(Items.[Item Number], 3) = LEFT(Vendors.[Vendor ID], 3)
WHERE Items.[Item Number] LIKE 'WH%'
       AND Items.[Item Number] NOT LIKE '%RMW' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:21:19.503

你可以加入它：

```
SELECT DISTINCT (i.[Item Description]), iq.[QTY Available],
       i.[Selling U Of M], i.[Item Number],
       V.VNDRCDE, V.VNAME
FROM ItemQuantities iq INNER JOIN
     Items i
     ON iq.[Item Number] = i.[Item Number] left outer join
     Vendors v
     on LEFT(v.[Vendor ID], 3) = RIGHT(i.[Item Number], 3) 
WHERE i.[Item Number] LIKE 'WH%' and
      i.[Item Number] NOT LIKE '%RMW' 
```

我不确定你是否打算用括号来做任何特别的事情`i.[Item Description]`。`distinct`关键字适用于整行。

如果您`distinct`只想要描述，那么您需要使用`group by`. 就像是：

```
SELECT i.[Item Description],
       max(iq.[QTY Available]),
       max(i.[Selling U Of M]), max(i.[Item Number]),
       max(V.VNDRCDE), max(V.VNAME)
FROM ItemQuantities iq INNER JOIN
     Items i
     ON iq.[Item Number] = i.[Item Number] left outer join
     Vendors v
     on LEFT(v.[Vendor ID], 3) = RIGHT(i.[Item Number], 3) 
WHERE i.[Item Number] LIKE 'WH%' and
      i.[Item Number] NOT LIKE '%RMW'
group by i.[Item Description]) 
```

将`max()`返回最大值。如果一切都相同，那么这是获得“任意”值的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:23:40.927

@sgeddes 谢谢。

这就是我想出的

```

```
``SELECT DISTINCT
            Item.ITEMNMBR AS [Item Number], 
            Item.ITEMDESC AS [Item Description], 
            Item.ITMGEDSC AS [Item Category], 
            Item.SELNGUOM AS [Unit of Measure], 
            (SELECT VENDNAME FROM PM00200 WHERE (VENDORID = IV00103.VENDORID)) AS [Vendor Name], 
            (CASE WHEN Quan.QTYONHND > 0 THEN 'In Stock' ELSE 'Out of Stock' END) AS [Stock Status]
FROM       IV00101 AS Item INNER JOIN
                      IV00102 AS Quan ON Item.ITEMNMBR = Quan.ITEMNMBR INNER JOIN
                      IV00103 ON Item.ITEMNMBR = IV00103.ITEMNMBR AND Quan.ITEMNMBR = IV00103.ITEMNMBR
WHERE     (Item.ITEMNMBR LIKE 'WH%') AND (IV00103.VENDORID NOT LIKE '%MIL')`` 
```

```

# c++ - ']' 标记之前的预期主表达式

> ID：15004364
> 
> 赞同：1
> 
> 时间：2013-02-21T14:11:13.807
> 
> 标签：c++, class

我尝试使用 C++ (Kdevelop platfrom) 中的类来编写一个简单的代码来计算 ave。我的头文件是：

```
#include <string>
class gradeBank
{
public:
gradeBank(std::string, float [], int n);
void setCourseName(std::string Coursename);
std::string getCourseName();
void gradeProcess();
float Max();
float Min();
double average();
//
private:
std::string Coursename;
int n;  // n= number of students, size of grade-array
float grade[];
}; 
```

我与头文件相关的cpp是：

```
#include <iostream>
#include <stdio.h>
#include "gradeBank.h"
//
gradeBank::gradeBank(std::string name, float gradeArray[], int n)
{
setCourseName(name);
float grade[n];
for (int i = 0; i < n; i++)
    grade[i] = gradeArray[i];
}
//
void gradeBank::setCourseName(std::string name)
{
Coursename = name;
}
//
std::string gradeBank::getCourseName()
{
return Coursename;
}
//
void gradeBank::gradeProcess()
{
std::cout << "class average is: " << average() << std::endl;
std::cout << "Maximum grade is: " << Max() << std::endl;
std::cout << "minimum grade is: " << Min() << std::endl;
}
//
float gradeBank::Max()
{
float max = 0.0;
for (int i = 0; i < n; i++)
    max = max > grade[i] ? max : grade[i];
return max;
}
//
float gradeBank::Min()
{
float min = 0.0;
for (int i = 0; i < n; i++)
    min = min > grade[i] ? min : grade[i];
return min;
}
//
double gradeBank::average()
{
double sum = 0.0, ave;
for (int i = 0; i < n; i++)
sum += grade[i];
ave = sum / n;
return ave;
} 
```

程序的主体是：

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include "gradeBank.h"
#include <iostream>
//
int main()
{
std::string name;
int num, i;
float gradeArray[num];
std::cout << "Please enter the name of the course: ";
std::cin >> name;
std::cout << "Please enter number of students: ";
std::cin >> num;
for (i = 0; i < num; i++)
  {  std::cout << "Studnet " << i << " : ";
    std::cin >> gradeArray[i];
    std::cout << std::endl;
  }
gradeBank t1(name, gradeArray[], num);
t1.gradeProcess();
std::cin.get();
  return 0;
} 
```

我收到以下错误：

```
 In function ‘int main()’:
 ...e/main.cpp:23: error: expected primary-expression before ‘]’ token 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:13:50.873

改变这个：

```
gradeBank t1(name, gradeArray[], num); 
```

对此：

```
gradeBank t1(name, gradeArray, num); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:14:10.927

在第 23 行，您错误地传递了数组，它应该是

```
gradeBank t1(name, gradeArray, num); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:17:22.907

传递数组时，您永远不应该添加 [ ]。所以这条线应该是这样的：

```
gradeBank t1(name, gradeArray, num); 
```

如果要传递某个元素，请仅使用 [ ]，例如：`gradeArray[5]`

# controller - JavaFX 2.2 -fx:include - 如何从子控制器访问父控制器

> ID：15004365
> 
> 赞同：6
> 
> 时间：2013-02-21T14:11:14.207
> 
> 标签：controller, javafx

我有来自stackoverflow的“从父控制器访问子控制器”的代码，如下所示。

父控制器.java

```
public class ParentController  implements Initializable{

    @FXML private childController childController;

    @Override
    public void initialize(URL location, ResourceBundle resources) {
        childController.sessionLabel.setText("Real blabla");
        System.out.println("sessionLabel= " + childController.sessionLabel.getText());
    }

} 
```

childController.java

```
public class childController  implements Initializable{

    @FXML public Label sessionLabel;

    @Override
    public void initialize(URL location, ResourceBundle resources) {
    }

} 
```

孩子.fxml

```
<AnchorPane maxHeight="20.0"  prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="childController">
   <children>
      <HBox id="hbox_top" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
         <Label fx:id="sessionLabel" prefHeight="20.0" text="" />  
      </HBox>
   </children>
</AnchorPane> 
```

父.fxml

```
<AnchorPane id="AnchorPane" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="ParentController">
<children>
    <fx:include fx:id="child" source="child.fxml"/>
     <Label fx:id="lebelInParent" prefHeight="20.0" text="" />  
</children>
</AnchorPane> 
```

我的查询 - 我想从 childController.java 访问 parent.fxml 的 lebelInParent。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:49:20.113

我做了以下 -

```
public class childController  implements Initializable{

    @FXML public Label sessionLabel;
    @FXML private AnchorPane child;

    @Override
    public void initialize(URL location, ResourceBundle resources) {
    }
    @FXML
    private void mClicked (){
        System.out.println(child.getParent().lookup("#lebelInParent"));
    }
} 
```

孩子.fxml

```
<AnchorPane fx:id="child" xmlns:fx="http://javafx.com/fxml" fx:controller="childController">
   <children>
      <HBox id="hbox_top" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
         <Label fx:id="sessionLabel" prefHeight="20.0" text="" onMouseClicked="#mClicked"/>  
      </HBox>
   </children>
</AnchorPane> 
```

解释 - 它加载 parent.fxml，当我单击 sessionLabel 时，它调用 childController 和 child.getParent().lookup 的 mClicked 方法，搜索 Id 并返回节点。

# php - 比较字符串和时间

> ID：15004374
> 
> 赞同：0
> 
> 时间：2013-02-21T14:11:24.940
> 
> 标签：php, sql

我正在尝试从报告中获取总数字到 sql。我只希望在一行比最后一行更新进入 sql 时发生这种情况，所以我添加了在报告中标记的日期和时间：

例如

```
141480128217,WRONG_PERFORMANCE,g3t3,19/01/2013 02:58pm
182483629803,WRONG_PERFORMANCE,g3t3,19/01/2013 03:01pm
108484044725,WRONG_PERFORMANCE,g3t1,19/01/2013 03:10pm 
```

所以如果我已经运行了这个并且之前添加的最后一行是下午 03:01 的那个所以总的“错误性能”是 2 但再次运行它我希望它是 3 但我每次更新都会加倍所以第一行会是 2，第二个是 5，即使没有新行，下次更新仍然是 8 (5 + 3)，依此类推。为避免这种情况，我想确保报告中的日期比 sql 的最后一次更新更新（我将添加每一行的日期并替换前一行的日期，以便最后添加的日期是sql 中的日期），但由于它是一个字符串，因此无法正确比较。我该怎么做呢？我尝试了几种不同的方法，但无济于事。

**编辑** 我尝试了以下方法：

```
$newDate = date("d/m/y/ h:i:s", strtotime("19/01/2013 01:42pm")); 
```

并得到了结果：

```
01/01/70/ 12:00:00 
```

我尝试像这样切换日期和月份：

```
$newDate = date("d/m/y h:i:s", strtotime("01/19/2013 01:42pm")); 
```

并得到以下信息：

```
19/01/13 01:42:00 
```

那么我怎样才能让它与报告一起工作呢？！？

***结果***

```
$date = str_replace("/", "-", "19/01/2013 01:42pm");
$newDate = date("d/m/y h:i:s", strtotime("$date"));
echo $newDate; 
```

返回正确的日期格式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:20:49.967

将日期转换为 YYYY-MM-DD 格式（如果需要，请包括时间），然后可以按数字对日期进行排序。那么你的第一个（或最后一个，取决于你如何排序）记录将是最新的。

编辑：

str_replace 解决了您的问题，因为引用 php.net：

“通过查看各个组件之间的分隔符来消除 m/d/y 或 dmy 格式的日期：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。”

因此，通过将分隔符设置为 -，您使 php 查找 dmy 日期而不是 am/d/y 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:41:45.673

您可以将字符串原样转换为日期时间并使用它来比较日期。 *但是*，您的日期是 D/M/Y 格式，并且您的服务器很可能设置为将日期解释为 M/D/Y，并且没有第 19 个月。:)

如果是这样，请尝试[SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx) DMY。

# php - 将表单提交给自身 - 服务器自身或脚本名称？

> ID：15004377
> 
> 赞同：-2
> 
> 时间：2013-02-21T14:11:34.363
> 
> 标签：php, forms

我想向自己提交一个表格。现在我直接给出文件名，即硬编码它。

但我经常更改文件名。所以我决定使用 PHP 中的一些函数。

在搜索中，我发现了两个功能：

`$_SERVER[SCRIPT_NAME]`和`$_SERVER[PHP_SELF]`。两者都返回相同的值。

我的问题是，两者之间有什么区别以及哪个更好用？

提前致谢！！

PS：我很好地搜索了这样一个问题。没有结果出现在我身上。很抱歉，如果这已经被问到了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:16:02.890

来自文档： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

`$_SERVER[PHP_SELF]`

> 当前执行脚本的文件名，相对于文档根目录。例如，地址[http://example.com/test.php/foo.bar](http://example.com/test.php/foo.bar)的脚本中的 $_SERVER['PHP_SELF']将是 /test.php/foo.bar。

`$_SERVER[SCRIPT_NAME]`

> 当前执行脚本的绝对路径名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:19:27.133

也不要使用。*如果有的话*，您应该使用它，`$_SERVER['REQUEST_URI']`因为它将包含查询字符串参数，但即使这样也是不必要的。根据 RFC 3986 标准，具有空操作的表单将提交回自身。

# iphone - CLLocationManager 误差范围

> ID：15004381
> 
> 赞同：2
> 
> 时间：2013-02-21T14:11:42.320
> 
> 标签：iphone, ios, objective-c, gps, cllocationmanager

我正在为足球场开发基于位置的应用程序。

我必须在地图上为用户预先定义几个位置并引导用户到那个位置。

有谁知道`CLLocationManager`当前使用位置的误差范围是多少

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:18:52.393

这取决于您设置的精度常数。从[文档](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CoreLocationConstantsRef/Reference/reference.html)：

> **kCLLocationAccuracyBestForNavigation**
> 
> 使用尽可能高的精度并将其与其他传感器数据相结合。这种精度水平适用于始终需要精确位置信息的导航应用程序，并且只能在设备插入时使用。在 OS X v10.7 及更高版本中可用。在 CLLocation.h 中声明。
> 
> **kCLLocationAccuracyBest**
> 
> 使用最高级别的准确性。在 OS X v10.6 及更高版本中可用。在 CLLocation.h 中声明。
> 
> **kCLLocationAccuracy最近十米**
> 
> 精确到所需目标的十米以内。在 OS X v10.6 及更高版本中可用。在 CLLocation.h 中声明。
> 
> kCLLocationAccuracyHundredMeters
> 
> 精确到百米以内。在 OS X v10.6 及更高版本中可用。在 CLLocation.h 中声明。
> 
> **kCLLocationAccuracyKilometer**
> 
> 精确到最近的公里。在 OS X v10.6 及更高版本中可用。在 CLLocation.h 中声明。
> 
> **kCLLocationAccuracyThreeKilometers**
> 
> 精确到最近的三公里。在 OS X v10.6 及更高版本中可用。在 CLLocation.h 中声明。

**更新：**

[这](http://www.cocoabuilder.com/archive/cocoa/275476-iphone-cllocation-accuracy.html)是有关其准确性的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:25:16.557

如果您使用`kCLLOcationAccuracyBest`并且您对开阔的天空有良好的视野，您将在 95% 的测量中获得 3-6m 的定位精度。如果视野不好，可能会发生 30m。

这是你能做到的最好的。iphone 拥有最好的 GPS 模块之一（如果不是消费设备中最好的）。但最好是尝试一下。我不确定 GPS 是否通过体育场的部分屋顶接收到良好的信号。体育场越大，天空的视野就越好，从而提供更好的准确性。

使用支持航点的 GPS 应用程序，并设置一些航点。

1小时后做同样的事情，比较距离误差。（或尝试在谷歌地图中查看）

# haskell - 链接额外的库/对象失败

> ID：15004383
> 
> 赞同：5
> 
> 时间：2013-02-21T14:11:44.330
> 
> 标签：haskell, ffi, ghci

我将 FFI 绑定到 C++ unordered_map(aka hash_map) 容器及其名为`libstl.a`. 第一次，它曾经运行良好。但是在某个时间点之后，它无法将库与以下错误消息链接起来，我不知道为什么。

```
$ ghci -L. -lstl -lstdc++ 
GHCi, version 7.6.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading object (static archive) ./libstl.a ... done
Loading object (dynamic) /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.so ... done
final link ... ghc: ./libstl.a: unknown symbol `_ZZNKSt8__detail20_Prime_rehash_policy11_M_next_bktEmE10__fast_bkt'
linking extra libraries/objects failed 
```

该库的源代码位于[https://github.com/comatose/stl-container](https://github.com/comatose/stl-container)。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T21:57:13.837

我在将 .o 文件加载到 ghci 时遇到了类似的问题。据我了解，问题在于 g++ 在 .o 文件中留下了“弱符号”，而 ghci 不能很好地处理它们。

我找到了一个关于它的线程，并提供了有用的后续操作：

[http://www.haskell.org/pipermail/haskell-cafe/2012-March/099926.html](http://www.haskell.org/pipermail/haskell-cafe/2012-March/099926.html)

其中建议的解决方案是将 g++ 编译的所有内容放入共享库（.so 文件而不是 .a）中，这似乎解决了弱符号问题。共享库可能有点痛苦。我建议你看看 libtool。这是一个可以处理很多复杂情况的辅助程序：

[http://www.gnu.org/software/libtool/](http://www.gnu.org/software/libtool/)

# actionscript-3 - 如何在 flex 4.5 mobile 中为 textinput 控件提供 textinput 皮肤

> ID：15004384
> 
> 赞同：0
> 
> 时间：2013-02-21T14:11:53.730
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我创建了一个从 TextInputSkin 扩展的类 RoundedTextInputSkin

```
 package skins
{

    import assets.TextInput_389X35;

    import spark.skins.mobile.TextInputSkin;

    public class RoundedTextInputSkin extends TextInputSkin
    {

        public function RoundedTextInputSkin()
        {
            super();
            borderClass =  TextInput_389X35;
            layoutBorderSize = 5;
        } 
    }
} 
```

现在我已将此皮肤作为 skinClass 赋予 textInput 控件。我可以看到 roundedTextInput 但在 textinput 中输入的文本不可见。谁能告诉我我的代码出了什么问题。

这是我的 fxg 文件

```
 <?xml version="1.0" encoding="utf-8" ?>
<Graphic version="2.0" ai:appVersion="16.0.0.682" ATE:version="1.0.0" flm:version="1.0.0" d:using="" xmlns="http://ns.adobe.com/fxg/2008" xmlns:ATE="http://ns.adobe.com/ate/2009" xmlns:ai="http://ns.adobe.com/ai/2009" xmlns:d="http://ns.adobe.com/fxg/2008/dt" xmlns:flm="http://ns.adobe.com/flame/2008">
      <Group x="3" y="1.35449" ai:seqID="1" flm:knockout="false">
        <Rect x="0.5" y="0.5" width="389" height="35" radiusX="16.9997" radiusY="16.9997" ai:seqID="2">
          <fill>
            <LinearGradient x="194.5" y="0.38916" scaleX="34.2022" rotation="90">
              <GradientEntry ratio="0" color="#B0B0B0"/>
              <GradientEntry ratio="1" color="#E0E0E0"/>
            </LinearGradient>
          </fill>
        </Rect>
        <Rect x="0.5" y="0.5" width="389" height="35" radiusX="16.9997" radiusY="16.9997" ai:seqID="3"/>
      </Group>
</Graphic> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:46:56.690

目前尚不清楚您的 FXG 文件与您展示的皮肤类别有何关联。但是，我将假设您提供的 FXG 是代码中引用的 TextInput_389X35。我假设您的自定义边框位于所有其他元素之上；使它们不可见。根据 TextSkinBase 的 createChildren() 方法；边框元素放置在其他所有元素之上：

```
override protected function createChildren():void
{
 super.createChildren();
 if (!textDisplay)
 {
     textDisplay = StyleableTextField(createInFontContext(StyleableTextField));
     textDisplay.styleName = this;
     textDisplay.editable = true;
     textDisplay.useTightTextBounds = false;
     addChild(textDisplay);
 }

 if (!border)
 {
   border = new borderClass();
   addChild(border);
 }
} 
```

默认的 Border FXG 元素使用路径来创建边框，因此“填充”是一个边框。通过使用矩形，您可以在其他所有内容之上放置一个大正方形。

# linux - 无法将包添加到 Buidroot

> ID：15004398
> 
> 赞同：3
> 
> 时间：2013-02-21T14:12:18.677
> 
> 标签：linux, embedded, buildroot

我正在尝试向 buildroot 添加一个包，但我没有取得太大的成功。我要添加的`autotools`包是一个名为`scew`. 我遵循了关于添加包的 buildroot 指南，虽然在运行时列出了​​包，但是`make menuconfig`当我运行 make 时，最终的`rootfs.tar`.

我还复制了另一个`.mk`用于安装的简单文件`which`，并相应地更改了变量名和 URL。这是我的副本`scew.mk`：

```
SCEW_VERSION = 1.1.3
SCEW_SITE = http://savannah.nongnu.org/download/scew/
SCEW_LICENSE = GPLv3
SCEW_LICENSE_FILES = COPYING

$(eval $(autotools-package)) 
```

在我拥有的同一目录中`Config.in`，如下所示：

```
config BR2_PACKAGE_SCEW
 bool "scew"
 help
     google scew 
```

我还将以下几行添加到`package/Config.in`：

```
menu "My Packages"

  menu "Packages I Wrote"
   source "package/MyPackages/packagesIWrote/hello/Config.in"
   source "package/MyPackages/packagesIWrote/helloworld/Config.in"
  endmenu

  menu "External Packages"
   source "package/MyPackages/external-packages/scew/Config.in"
  endmenu

endmenu 
```

这部分似乎有效，因为软件包已列出并且可以选择。hello 和 helloworld 包是添加包指南的副本，取自该网站（用法语编写）：[添加 Hello World](http://www.linuxembedded.fr/2011/03/ajouter-un-package-dans-buildroot-en-5-minutes/ "添加 Hello World")。

hello world 软件包也不起作用。我会很高兴收到任何建议，因为我似乎只是在这个问题上兜圈子，而且我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-06T21:03:48.047

要构建适当的文件：

1.  将您的源包从原始文件差异到一个名为的文件中。包名-编号-描述.patch。在哪里。包名 - 必须与包名相同。...

2.  将此文件放入与 [packagename] 相同级别的包中。mk 文件和 package/Config.in 文件。

# xamarin.ios - monotouch this.NavigationController 为 iPad 返回 null

> ID：15004400
> 
> 赞同：0
> 
> 时间：2013-02-21T14:12:26.113
> 
> 标签：xamarin.ios

对于我的通用应用程序在 iPad 上运行时，this.NavigationController 会返回一个 NavigationController。

当我以 iPad 为目标运行它时，它为空。所以我不能使用它。

它是初始视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:26:49.413

Its my mistake,

For iPad design I used push RootNavigationController to Login.

It would be RelationShip.

Sorry for stealing your time friends.

# javascript - 用于样式的 Mootools addClass

> ID：15004402
> 
> 赞同：0
> 
> 时间：2013-02-21T14:12:28.687
> 
> 标签：javascript, mootools, styling

所以我已经学习了一段时间的 JavaScript，并且刚刚开始整合一个框架。我出于各种原因选择了 MooTools，但这有点离题了。

因此，我创建的第一个小代码用于向 li 元素添加一个类，该类与鼠标悬停时的样式相关，并在鼠标离开时将其删除。我已经在 J​​avaScript 中做过很多次了，不用担心，但无法使用 MooTools 让它工作。

HTML 片段：

```
 <ul id="navBar">
    <li><a href="#">Test</a></li>
    <li><a href="#">Test</a></li>
    <li><a href="#">Test</a></li>
    <li><a href="#">Test</a></li>
</ul> 
```

JS 框架片段：

```
window.addEvent('domready', function() {

$('navBar').getElements('a').addEvent({
    mouseenter:function(){
        $(this).addClass('navHover');
    },
    mouseleave:function(){
        $(this).removeClass('navHover');
    }
});
}); 
```

CSS 片段：

```
.navHover {
color: #FFF;
} 
```

可能我没有正确实现框架，也许我应该恢复到普通的旧 JavaScript？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:35:55.953

你只是省略了一个“s”。:-)

```
 $('navBar').getElements('a').addEvents({
                                        ^ here 
```

如果您打算这样做`addEvent`，那么您应该知道它只能添加一个单数事件，所以如果必须是：`$('navBar').getElements('a').addEvent("mouseenter", function() { ... });`正如您所写的那样，它是`addEvents`.

来源（虽然我认为这个问题是一个错字）：[http ://mootools.net/docs/core/Element/Element.Event#Element:addEvents](http://mootools.net/docs/core/Element/Element.Event#Element:addEvents)

和 jsfiddle 工作示例：http: [//jsfiddle.net/pxLTX/](http://jsfiddle.net/pxLTX/)

# c# - windows phone 和.aspx 页面之间的通信

> ID：15004403
> 
> 赞同：1
> 
> 时间：2013-02-21T14:12:37.653
> 
> 标签：c#, asp.net, .net, silverlight, windows-phone

我使用 .NET 制作了一个 windows phone 应用程序，并使用 asp.net 制作了一个网站。

现在我希望窗口电话应用程序调用 .aspx 页面中的函数。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:14:35.007

你最好看看 web 服务和 web api，当然，你可以在你的 aspx 页面中调用一个函数，你可以使用查询字符串来提供参数。

查看此页面： http: [//www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T18:10:22.643

您不能调用 a 在 aspx 页面中的函数。您可以在 Web 服务中公开一些方法，然后在您的 aspx、Windows 手机或任何地方使用它。

# javascript - 浏览器如何处理 HTML 元素上的无效/未指定属性？

> ID：15004405
> 
> 赞同：5
> 
> 时间：2013-02-21T14:12:39.417
> 
> 标签：javascript, jquery, html, web

例如，如果我有这个：

```
<div id="blah" myattribute="something">whatever</div> 
```

我可以确保没有浏览器会忽略（从而使旧版 JavaScript 无法访问）`myattribute`吗？我知道这很丑陋且不标准，但非常有用。或者如果他们这样做了，jQuery 仍然能够得到它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:14:38.573

您应该使用`data`属性，它们是网络标准。

像这样：

```
<div id="blah" data-myattribute="something">whatever</div> 
```

然后在jQuery中你可以这样做：

```
var value = $("#blah").data("myattribute"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T14:19:02.253

浏览器不会抱怨无法识别的属性，Javascript 和 jQuery 仍然可以访问它们：

```
console.log( $('#blah').attr('myattribute') ); // something
console.log( document.getElementById('blah').getAttribute('myattribute') ); // something 
```

但是，您应该使用`data-*`专门用于自定义属性的 HTML5 属性。jQuery 有[`data()`](http://api.jquery.com/jQuery.data/)访问/设置它们的方法：

```
<div id="blah" data-myattribute="something">whatever</div>

<script>
console.log( $('#blah').data('myattribute') ); // something
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:14:37.947

为什么不使用 data-attributes [Data-attributes, HTML5](http://ejohn.org/blog/html-5-data-attributes/)？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:14:34.203

浏览器将忽略无效属性。如果您想指定自己的属性，请使用 data- 属性，因为这被认为是有效的。

关于数据属性的 w3 文档

[http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

# c# - 基于自定义属性的 IHostBufferPolicySelector

> ID：15004406
> 
> 赞同：1
> 
> 时间：2013-02-21T14:12:40.077
> 
> 标签：c#, stream, asp.net-web-api, buffer

我正在尝试`IHostBufferPolicySelector`基于自定义属性实现（C# 和 Web API）。即，我想根据控制器方法的属性确定是否应该缓冲请求。像这样：

```
[NoBuffer]
[HttpPost]
public void UploadData()
{
  // Read from the stream here...
} 
```

我如何实现这一目标？我的 IHostBufferPolicySelector 实现需要一些方法来确定 NoBuffer 属性是否存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:09:03.017

可以肯定地说，使用当前的 Web API 架构是不行的。

事实上，控制器级别在堆栈中为时已晚，无法做出有关缓冲请求的决定。

`IHostBufferPolicySelector`是一个**全局**服务，在堆栈中尽可能低地根深蒂固 - into `HttpControllerHandler`，它是 Web API 的核心（它只是一个 HTTP 处理程序）。因此，实际上不可能将其应用于您想要的特定请求。

*Web API 在内部*方法中对每个请求执行的操作`HttpControllerHandler`是：

```
// Choose a buffered or bufferless input stream based on user's policy
    IHostBufferPolicySelector policySelector = _bufferPolicySelector.Value;
    bool isInputBuffered = policySelector == null ? true : policySelector.UseBufferedInputStream(httpContextBase);
    Stream inputStream = isInputBuffered
                            ? requestBase.InputStream
                            : httpContextBase.ApplicationInstance.Request.GetBufferlessInputStream(); 
```

其中`_bufferPolicySelector`是全局配置值；因此它根据该全局值选择缓冲方法。

我认为您可以将其记录在 ASP.NET Web 堆栈的 Codeplex 问题列表中作为建议的功能，但现在您必须使用一个全局`IHostBufferPolicySelector`设置。

我想象它*可以*实现的方式是，必须在启动时扫描程序集的 [NoBuffer] 属性，并且必须使用不应发生缓冲的 url 映射创建一些静态配置。然后，在最低级别，必须`HttpControllerHandler`将此映射与传入的请求 url 进行比较以确定缓冲策略。

# dynamics-crm-2011 - 早期绑定对象中定义的具有不同 EntityTypeCode 的实体会导致问题吗？

> ID：15004407
> 
> 赞同：2
> 
> 时间：2013-02-21T14:12:40.123
> 
> 标签：dynamics-crm-2011, dynamics-crm

我有两个不同的 CRM 端点，它们的实体元数据完全相同，除了几个选项集（不要问为什么）。今天早上，我将 CrmServiceUtil 中使用的早期绑定 URL 从端点 1 切换到了端点 2。在签入时进行了比较，我注意到很多实体的 EntityTypeCode 发生了变化。到目前为止我还没有注意到问题，但我想知道是否需要花一些时间来强制 EntityTypeCodes 匹配。

有谁知道这些 EntityTypeCodes 的用途（我假设一切都从 EntityLogicalName 开始），如果使用 EntityTypeCodes 与 CRM 中的内容不匹配的早期绑定类会导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:56:09.193

EntityTypeCode 用于引用实体，通常您在组织之间有不同的实体类型代码，一个很好的例子是在环境（DEV、QA、PROD）之间。

LogicalName 是避免这种差异的最佳方法，您必须小心以下情况：

*   引用 url 表单，例如 main.aspx? **etc=1**，逻辑名称为 main.aspx?etn=account
*   创建 EntityReference 时

到目前为止只是这样，但如果我记得更多，我会更新。

# php - 在 Yii 中如何使用和在哪里

> ID：15004419
> 
> 赞同：0
> 
> 时间：2013-02-21T14:13:08.713
> 
> 标签：php, yii

有谁知道如何在 yii 中使用 andWhere() 条件。当我使用它时，我收到以下错误。

```
CDbCommand and its behaviors do not have a method or closure named "andWhere". 
```

这是示例代码

```
 $result=Yii::app()->db->createCommand()
->select()
->from('{{product}}')
->andWhere('price>:param1', array(':param1'=>150))
->andWhere('price<:param2', array(':param2'=>210))
->queryAll(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T14:21:57.253

该[`andWhere()`](http://www.yiiframework.com/doc/api/1.1/CDbCommand#andWhere-detail)功能是在 yii 1.1.13 中添加的。看来您使用的是旧版本的 yii。更新框架

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T14:21:38.307

试试这个方法怎么样，很简单

```
Yii::app()->db->createCommand()
       ->select("*")
       ->from('package')
       ->where('id=:id and status:status', array(':id'=>5,':status'=>1))
       ->queryRow(); 
```

甚至

```
 $criteria = new CDbCriteria();
    $criteria->condition = 'id=:id and status=:status';
    $criteria->params = array(':id'=>$id,':status'=>1); 
```

确切地说

```
$result=Yii::app()->db->createCommand()
   ->select()
   ->from('{{product}}')
   ->where('price>:param1 and price<:param2', array(':param1'=>150,':param2'=>210))
   ->queryAll(); 
```

# android - Mediaplayer 被 AsyncTask 停止 - MediaPlayer 已完成但未释放

> ID：15004428
> 
> 赞同：1
> 
> 时间：2013-02-21T14:13:48.930
> 
> 标签：android, android-asynctask, android-mediaplayer

我通过下载新文件来启动我的应用程序，如果有任何文件开始播放循环。然后，我每 x 秒启动一个任务来寻找新媒体。一旦调用任务，视频就会停止播放，并出现错误**MediaPlayer finalized without being released**。

*如果有的话，它应该下载新媒体，然后更新播放列表。*

从它的日志中我可以看到第一个播放被调用，然后错误出现然后。它只是一次又一次地调用任务。它就像它卡在那里？

我确定这是我在这里遗漏的一些愚蠢问题。我不确定为什么媒体播放器停止了？

**主要活动**

```
public class MainActivity extends Activity implements OnCompletionListener {

    int playListIndex;
    int currentMedia;
    String mediaName;
    ArrayList<Integer> playList = new ArrayList<Integer>();
    File[] filelist;
    private VideoView videoView;
    private ImageView imageView;
    Uri mediaPath;
    private Handler mHandler = new Handler();
    private SurfaceHolder holder;

//  Get this shit from login!
    public String channelid = "5e6299eb-asd6600d58fc9";
    public String username = "tvasd";
    public String linkid = "70casd6600d3f7d7";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

//      File mediadir = getDir("tvr", Context.MODE_PRIVATE);
//        filelist = mediadir.listFiles();
        try {
            downloadMedia(this);
            updateMediaTask(this);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

//       Delete all files in folder
//        if (mediadir.isDirectory()) {
//            String[] children = mediadir.list();
//            for (int i = 0; i < children.length; i++) {
//                new File(mediadir, children[i]).delete();
//            }
//        }
    }
    @Override
    public void onCompletion(MediaPlayer mp) {
        Log.i("media player", "play next please!");
        if (mp != null) {
            mp.release();
        }
//      play next video
        currentMedia++;
        if (currentMedia > playList.size() - 1) {
            currentMedia = 0;
        }
        Log.d("MEDIA_COUNTER", String.format("%d", currentMedia));
        try {
            playMedia(currentMedia);
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private void playMedia(int playListIndex) throws IOException {
        Log.i("media player", "play media!");
        String path = filelist[playListIndex].getAbsolutePath();
        FileInputStream fileInputStream = new FileInputStream(path);
        final Uri uri = Uri.parse(path);
        String filename = filelist[playListIndex].getName();
        Log.i("FILENAME", path);
        if (filename.contains("image")) {
            imageView = (ImageView)findViewById(R.id.imageView);
            imageView.setVisibility(View.VISIBLE);
            imageView.setImageURI(uri);
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    imageView.setVisibility(View.GONE);
                    imageView.setImageURI(uri);
                    onCompletion(null);
                }
            }, 4000);
        } else if (filename.contains("video")) {

            Log.d("PLAY",String.format("%s", fileInputStream.getFD()));
            Log.i("media player", "play video!");
            SurfaceView surface = (SurfaceView) findViewById(R.id.surface);
            holder = surface.getHolder();
            holder.addCallback(new SurfaceHolder.Callback() {
                @Override
                public void surfaceCreated(SurfaceHolder holder) {
                    Log.i("SURFACE", "Created");
                }
                @Override
                public void surfaceDestroyed(SurfaceHolder holder) {}
                @Override
                public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {}
            });
            MediaPlayer pl = new MediaPlayer();
            pl.setOnCompletionListener(this);
            pl.setDisplay(holder);
            pl.setDataSource(fileInputStream.getFD());
            pl.prepare();
            pl.start();
        }
    }

    void createPlayList(Context context) {
        ContextWrapper cw = new ContextWrapper(context);
        File mediadir = cw.getDir("tvr", Context.MODE_PRIVATE);
        filelist = mediadir.listFiles();
        if (filelist != null)
        {
            for ( int i = 0;i<filelist.length;i++)
            {
               Log.i("FOKKER", filelist[i].getName());
               Log.i("FOKKER", filelist[i].getAbsolutePath());
            }
        }

        currentMedia = 0;

        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                try {
                    playMedia(currentMedia);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

    private void updateMediaTask(final MainActivity a) throws IOException, JSONException {
        int delay = 1000; // delay for 1 sec. 
        int period = 3000; // repeat every 10 minutes. 60000 
        Timer timer = new Timer(); 
        timer.scheduleAtFixedRate(new TimerTask() { 
            public void run()  { 
                new updateFiles(a).execute(getBaseContext(),"update");
            } 
        }, delay, period); 
    }

    private void downloadMedia(Context context) throws IOException, JSONException {
        new updateFiles(this).execute(context,"new");
    }

} 
```

这是**updateFiles**类：

```
public class updateFiles extends AsyncTask<Object, Integer, Long> {

     public MainActivity activity;

        public updateFiles(MainActivity a) { activity = a;}

    @Override
    protected Long doInBackground(Object... params) {
        Context context = (Context) params[0];
        String method = (String) params[1];
        File mediadir = context.getDir("tvr", Context.MODE_PRIVATE);
        JSONArray channels = Json.getJson("http://192.168.2.136:8080/rest/channel/"+ linkid +"/"+ username, "GET");
        try {
            for (int i=0; i < channels.length(); i++) { 
                JSONObject channel_data = channels.getJSONObject(i);
                String channelID = channel_data.getString("ChannelID").toLowerCase();
                JSONArray json = Json.getJson("http://192.168.2.136:8080/rest/program/"+ linkid +"/"+ username +"/" + channelID, "GET");
                try {
                    for (int j=0; j < json.length(); j++) { 
                        JSONObject json_data = json.getJSONObject(j);
                        String name = json_data.getString("Name").toLowerCase();
                        name = name.replace("-", "_");
                        if (name.contains("mp4") || name.contains("png") || name.contains("jpg") || name.contains("jpeg")) {
                            if (name.contains("mp4")) {
                                name = "/video_"+name;
                            } else if (name.contains("png") || name.contains("jpg") || name.contains("jpeg")) {
                                name = "/image_"+name;
                            }
                            String _name = name.replace("/", "");
                            File file = new File(mediadir, _name);
                            if(file.exists()) {
                                Log.i("FILE FOUND", _name);
                            } else {
                                new Download().execute(context, name, "http://192.168.2.136:8080/rest/transfer/"+ linkid +"/"+ username +"/" + json_data.getString("ID"));
                            }
                        }

                    }
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } catch (NullPointerException e) {
            e.printStackTrace();
        }
        Log.i("UPDATEFILES done", method);
        if ( method == "new" ) {
            Log.i("XXX", "This is a new method, so play now");
            activity.createPlayList(context);
        } else {
            Log.i("XXX", "This is a update method, so just update, dont play again. Go on playing");
//          activity.filelist = mediadir.listFiles();
        }
        return null;

    }

} 
```

**日志**：_

```
02-21 16:16:13.429: I/FILE FOUND(24010): video_tvr_webtrailer2.mp4
02-21 16:16:13.429: I/FILE FOUND(24010): video_tvr_consumerintro.mp4
02-21 16:16:13.429: I/JSON(24010): http://192.168.2.136:8080/rest/program/70c8223f-e054-4f33asd3f7d7/asdco/6cfbasdbe-a16600d5ac24
02-21 16:16:13.476: D/JSON result(24010): [{"ChannelID":"6casdd2-47f3-95be-a16600d5ac24","ChannelPath":"\\asda","DateChanged":"2\/15\/2013 10:59:20 AM","DateCreated":"2\/15\/2013 12:58:59 PM","ID":"5e25edasd-b82b-a16600d5f4ef","LastWriteUTC":"\/Date(1352527205000+0200)\/","Name":"Video_05-safety-ccw_mynhardt.wmv","Size":125727228}]
02-21 16:16:13.476: I/JSON(24010): **http://192.asd0/rest/program/7asd4-4f33-9b6b-a1660asd89-be1a-a16600e0bcee**
02-21 16:16:13.523: **D/JSON result(24010): []**
02-21 16:16:13.523: **I/UPDATEFILES done(24010): update**
02-21 16:16:13.523: I/XXX(24010): **This is a update method, so just update, dont play again. Go on playing** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T09:09:02.660

这个问题很久以前就被问过了。但该问题的解决方案不是异步任务，而是在类中创建一个 MediaPlayer 字段，而不是将其作为任何方法的局部变量。

目前在您的情况下，它是私有 void playMedia() 方法的一部分。由于这是在一个方法中，只要方法完成，它就有资格进行垃圾收集。做这样的事情： -

```
public class MainActivity extends Activity implements OnCompletionListener {

   private MediaPlayer pl;  // This makes sure mediaplayer is there if activity is alive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T12:54:18.997

不使用时释放媒体播放器`mp.release();`。它会解决你的问题。

例如。

```
mp.setOnCompletionListener(new OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {    
        mp.release();
    }
}); 
```

# linux - Mono / Ubuntu中的ReadProcessMemory Win32API？

> ID：15004432
> 
> 赞同：0
> 
> 时间：2013-02-21T14:13:58.557
> 
> 标签：linux, ubuntu, mono, readprocessmemory

我已经在 Windows 中编程了一段时间，今天和一个朋友谈论 Ubuntu，我现在很好奇这个功能是否存在。我知道它在 win32api 中，因为我以前使用过它，但它在 Linux 上会在哪里？

有帮手吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:21:17.940

无处。该函数是 WinAPI 的一部分。Linux 没有实现 WinAPI，因为 Linux 是……嗯，Linux，它不是 Windows。

# javascript - 从具有隔离范围的指令中的指令访问控制器

> ID：15004440
> 
> 赞同：2
> 
> 时间：2013-02-21T14:14:25.270
> 
> 标签：javascript, controller, angularjs, directive

我刚刚开始使用 angularJS，并且在使用指令和控制器确定范围时遇到了一些问题。

在下面链接到的示例中，我有一组两个指令；一个属性指令 ( `showMessage`) 和一个元素指令 ( `parentDirective`)。

[http://jsfiddle.net/ejSxM/1/](http://jsfiddle.net/ejSxM/1/)

我想`showMessage`用作一种行为，这样当单击一个元素时，它会在控制器中触发一个函数。这适用于普通的 html 元素，但是当我将它应用到 my 时`parentDirective`，`showMessage`会占用 的范围`parentDirective`，而不是控制器。

这可以在随附的示例中进行演示。单击“我一个人”时，指令具有控制器的范围，因此`showMessage`控制器范围内的函数调用正常。但是，当单击“我是指令”时，该指令现在具有父指令的范围，并标记错误。

有没有一种方法可以从嵌套指令访问控制器范围，即使父指令具有隔离范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:22:51.637

您可以像这样将表达式传递给您的指令： `<my-directive onsomeevent="functionInMyController()"></my-directive>`

然后在你的指令中：

```
...
scope: {
    onevent: '&onsomeevent'
},
link: function() {
    element.bind('click',function () {
       scope.onevent(); 
    });
}
... 
```

也就是说，您从`onsomeevent`参数绑定表达式，以便您可以在指令中执行它，而无需知道表达式是什么。表达式是在父作用域上执行的，所以`functionInMyController`需要在父作用域中定义。您还可以将链接函数中的变量传递给该表达式，您可以在此处（在范围部分）[指令](http://docs.angularjs.org/guide/directive)中找到一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:51:10.883

您可以为指令设置控制器。

```
controller - Controller constructor function. The controller is instantiated 
before the pre-linking phase and it is shared with other directives if they 
request it by name (see require attribute).
This allows the directives to communicate with each other and augment each other's 
behavior. The controller is injectable with the following locals:
$scope - Current scope associated with the element
$element - Current element
$attrs - Current attributes obeject for the element
$transclude - A transclude linking function pre-bound to the correct transclusion
scope:     
function(cloneLinkingFn). 
```

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# batch-file - 在服务器启动时运行 .bat 脚本并保持控制台

> ID：15004443
> 
> 赞同：0
> 
> 时间：2013-02-21T14:14:33.767
> 
> 标签：batch-file, scheduled-tasks, windows-server

我可以使用控制面板中的计划任务安排在 Windows Server 系统启动时执行的 .bat 脚本，并指定一个用户代表执行此执行。

但是当这个脚本启动并运行其他程序时，即使我登录系统，它们对我来说都是不可见的。我在任务管理器中看到它们，并且只建立了一个用户会话。

他们的问题是，是否有办法让这些控制台和应用程序可见，以便我可以看到执行过程并在需要时停止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:18:35.983

只要你的用户有管理员权限，这很简单：任务管理器左下角有一个按钮，你可以“显示所有用户的进程”

我每天都在做这个...

如果您对每个程序的标准输出感兴趣，则必须将其通过管道传输到文本文件/日志文件中。

用于创建和写入新的日志文件使用：

```
program.exe > logfile.txt 
```

附加到现有的一个用途：

```
program.exe >> logfile.txt 
```

使用类似 tail ( [http://tailforwin32.sourceforge.net/](http://tailforwin32.sourceforge.net/) ) 的日志文件滚轮在程序执行时查看这些日志文件。

除此之外，我不认为，无需以该用户身份登录，就可以将另一个用户的 UI 输出获取到您的屏幕上。但是如果你真的在同一个用户会话上登录，我认为程序 UI 应该在脚本执行程序时弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T23:46:09.527

在任务计划程序中，当您选择要在系统启动时运行的任务时，右侧的“操作”窗格在“选定项目”菜单下有一个“结束”操作，您可以使用它来停止进程（作为终止进程的替代方法）任务管理器）。正如 Jurgen 在他的回答中解释的那样，似乎没有任何方法可以像从 Windows 资源管理器运行脚本时所期望的那样在控制台窗口上实际查看当前进程输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:17:08.230

在你的批处理文件的末尾，你可以放一个

```
 pause 
```

这将需要用户输入才能继续。或者，如果您愿意，可以将其放在语句之间。

您还可以执行 @echo 并将消息传达给最终用户。

# mongodb - MongoDB通用事务解决方案

> ID：15004450
> 
> 赞同：0
> 
> 时间：2013-02-21T14:14:41.027
> 
> 标签：mongodb, frameworks, transactions

在 mongodb 中有一种推荐的交易方式：http: [//docs.mongodb.org/manual/tutorial/perform-two-phase-commits/](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)

是否有一个解决方案/框架，它自动为任何插入/更新/删除语句封装所有必要的事务逻辑？

# java - 为什么 % 不允许

> ID：15004452
> 
> 赞同：1
> 
> 时间：2013-02-21T14:14:45.500
> 
> 标签：java, special-characters

如果我输入密码为`Admin$&%^`or`Admin$&^%`然后我的 ajax 调用有效，但如果我输入它这样 `Admin$!%`or `Admin$!%^`。ajax 调用引发以下异常.....

请帮助，因为我无法找到此问题的根本原因

```
INFO: Character decoding failed. Parameter [txt_password] with value [Admin$!%] has been ignored. No
te that the name and value quoted here may be corrupted due to the failed decoding. Use debug level
logging to see the original, non-corrupted values.
java.io.CharConversionException: EOF
        at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:80)
        at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:46)
        at org.apache.tomcat.util.http.Parameters.urlDecode(Parameters.java:410)
        at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:370)
        at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:217)
        at org.apache.catalina.connector.Request.parseParameters(Request.java:2647)
        at org.apache.catalina.connector.Request.getParameter(Request.java:1106)
        at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:355)
        at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:158) 
```

在探索时我发现：

```
Special characters are not allowed inside the query string. They must be replaced by a "%" followed by the ASCII code in Hex. E.g., "~" is replaced by "%7E", "#" by "%23" and so on. Since blank is rather common, it can be replaced by either "%20" or "+" (the "+" character must be replaced by "%2B"). This replacement process is called URL-encoding, and the result is a URL-encoded query string. 
```

那么这是否意味着我们不能在输入字段中使用 % 作为值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:43:42.037

您正在尝试对已在上一步中进行 URL 解码的字符串进行 URL 解码。那是你的根本原因。

您的两组验证和无效字符串之间的区别是“&”字符。不确定为什么带有＆符号的验证...可能解析器在到达“％”之前停止，因为“&”被视为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:35:00.243

终于找到解决办法了

在查询字符串中添加参数之前，我使用了 javascript 的 encodeURIComponent 函数。来自[W3Schools](http://www.w3schools.com/jsref/jsref_encodeuri.asp "W3学校")

```
The encodeURI() function is used to encode a URI.
This function encodes special characters, except: , / ? : @ & = + $ # (Use encodeURIComponent() to encode these characters).

Tip: Use the decodeURI() function to decode an encoded URI. 
```

# android - 如何使 TextView 高度填满屏幕并将图像放置在列表视图旁边

> ID：15004453
> 
> 赞同：1
> 
> 时间：2013-02-21T14:14:46.093
> 
> 标签：android, android-layout, xamarin.android

我试图找出布局的几个问题，希望有布局知识的人能提供帮助。我有下面的 xml 以及我最终想要实现的屏幕截图以及 xml 当前将显示的屏幕截图。

1）在中心部分（屏幕截图中的lorem ipsum文本）我需要让高度充满屏幕。基本上，我正在尝试扩展该部分，以便将办公室文本及其下方的项目向下推。

2）在底部我有两个图像按钮来左右滚动和中间的列表视图。我无法弄清楚如何让正确的图像按钮出现在列表视图的右侧。

这是xml和屏幕截图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minWidth="25px"
    android:minHeight="25px">
    <RelativeLayout
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/relativeLayout1">
        <ImageView
            android:id="@+id/ivPhoto"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="38dp"
            android:layout_height="52dp"
            android:layout_marginRight="5dp" />
        <TextView
            android:id="@+id/tvName"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/ivPhoto" />
        <TextView
            android:id="@+id/tvPracticeName"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/ivPhoto"
            android:layout_below="@+id/tvName" />
        <TextView
            android:id="@+id/tvPracticeType"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/ivPhoto"
            android:layout_below="@+id/tvPracticeName" />
        <ImageView
            android:id="@+id/ivFacebook"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="16dp"
            android:layout_height="16dp"
            android:layout_below="@+id/tvPracticeType"
            android:layout_toRightOf="@+id/ivPhoto"
            android:layout_marginRight="5dp" />
        <ImageView
            android:id="@+id/ivFacebook"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="16dp"
            android:layout_height="16dp"
            android:layout_below="@+id/tvPracticeType"
            android:layout_toRightOf="@+id/ivPhoto"
            android:layout_marginRight="5dp" />
        <ImageView
            android:id="@+id/ivLinkedIn"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="16dp"
            android:layout_height="16dp"
            android:layout_below="@+id/tvPracticeType"
            android:layout_toRightOf="@+id/ivFacebook"
            android:layout_marginRight="5dp" />
        <ImageView
            android:id="@+id/ivTwitter"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="16dp"
            android:layout_height="16dp"
            android:layout_below="@+id/tvPracticeType"
            android:layout_toRightOf="@+id/ivLinkedIn"
            android:layout_marginRight="5dp" />
    </RelativeLayout>
    <LinearLayout
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout1">
        <TextView
            android:text="This section needs to growth vertically as to push the offices down."
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/textView1" />
    </LinearLayout>
    <TextView
        android:text="Offices"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/textView1" />
    <RelativeLayout
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout1">
        <ImageView
            android:id="@+id/ivLeftScroll"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="38dp"
            android:layout_height="52dp" />
        <ListView
            android:id="@+id/lvOffices"
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="0dp"
            android:layout_height="120dp"
            android:layout_toRightOf="@+id/ivLeftScroll" />
        <ImageView
            android:id="@+id/ivRightScroll"
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="38dp"
            android:layout_height="52dp"
            android:layout_alignParentRight="true" />
    </RelativeLayout>
</LinearLayout> 
```

￼这最终是我想要实现的，我可以做造型，我只需要上面两个问题的帮助：

![在此处输入图像描述](../Images/51fe0db92a40448390701541b8e249ee.png)

以下是 xml 生成的内容：

![在此处输入图像描述](../Images/b527fa5d24e31f694f092ccbe7464a7d.png)

谢谢您的帮助！！

*** 更新：我更新了 xml 并使最后一部分成为相对布局，并将 ListView 宽度更改为 0dp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:23:39.663

`ListView`试试下面的代码，设置高度也不是一个好主意，`wrap_content`所以我将它设置为 120dp，为你的目的设置一个合适的值：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="25px"
    android:minWidth="25px" >

    <ImageView
        android:id="@+id/ivPhoto"
        android:layout_width="38dp"
        android:layout_height="52dp"
        android:layout_marginRight="5dp"
        android:src="@android:drawable/ic_menu_gallery" />

    <TextView
        android:id="@+id/tvName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/ivPhoto"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvPracticeName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvName"
        android:layout_toRightOf="@+id/ivPhoto"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/tvPracticeType"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvPracticeName"
        android:layout_toRightOf="@+id/ivPhoto"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <ImageView
        android:id="@+id/ivFacebook"
        android:layout_width="16dp"
        android:layout_height="16dp"
        android:layout_below="@+id/tvPracticeType"
        android:layout_marginRight="5dp"
        android:layout_toRightOf="@+id/ivPhoto"
        android:src="@android:drawable/ic_menu_gallery" />

    <ImageView
        android:id="@+id/ivFacebook"
        android:layout_width="16dp"
        android:layout_height="16dp"
        android:layout_below="@+id/tvPracticeType"
        android:layout_marginRight="5dp"
        android:layout_toRightOf="@+id/ivPhoto"
        android:src="@android:drawable/ic_menu_gallery" />

    <ImageView
        android:id="@+id/ivLinkedIn"
        android:layout_width="16dp"
        android:layout_height="16dp"
        android:layout_below="@+id/tvPracticeType"
        android:layout_marginRight="5dp"
        android:layout_toRightOf="@+id/ivFacebook"
        android:src="@android:drawable/ic_menu_gallery" />

    <ImageView
        android:id="@+id/ivTwitter"
        android:layout_width="16dp"
        android:layout_height="16dp"
        android:layout_below="@+id/tvPracticeType"
        android:layout_marginRight="5dp"
        android:layout_toRightOf="@+id/ivLinkedIn"
        android:src="@android:drawable/ic_menu_gallery" />
</RelativeLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="Growing section"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Offices"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/ivLeftScroll"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@android:drawable/ic_menu_gallery" />

    <ListView
        android:id="@+id/lvOffices"
        android:layout_width="0dp"
        android:layout_height="120dp"
        android:layout_weight="1" />

    <ImageView
        android:id="@+id/ivRightScroll"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@android:drawable/ic_menu_gallery" />
</LinearLayout>

</LinearLayout> 
```

# java - 覆盖后退按钮

> ID：15004454
> 
> 赞同：3
> 
> 时间：2013-02-21T14:14:53.997
> 
> 标签：java, android, overriding, onkeydown

我有这个代码用于覆盖`back`按钮并使其像`home`按钮一样工作：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

它运行良好。我的问题是，如果有一个位置，我可以把它放在所有活动中。现在，我在每个活动中都复制了这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:22:00.967

创建您自己的 BaseActivity 并使用 Activity 扩展它，然后覆盖那里。现在，在您的整个应用程序中，使用该 BaseActivity 而不是使用 Activity。

像这样的东西：

```
public abstract class BaseActivity extends Activity 
{
    final protected void onCreate(Bundle savedInstanceState)
   {
    super.onCreate(savedInstanceState);
    onCreate_Impl(savedInstanceState);
   }

   abstract protected void onCreate_Impl(Bundle savedInstanceState);
} 
```

您必须使用 onCreate_Impl 代替 onCreate。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:19:26.603

创建一个基本活动，在那里处理密钥并从基本活动继承所有其他活动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T14:19:54.250

使用此代码创建一个 BaseActivity（扩展 Activity），然后让您的所有活动都扩展 BaseActivity，而不是 Activity。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T16:17:37.373

您可以创建一些抽象类，它扩展了 Activity 并实现了此方法。然后在您的应用程序的每个活动中对其进行子类化。一次只能扩展一个类，但在大多数情况下，最好有一些抽象的 Activity 类，其中包含一组应用程序活动的一些常用功能。

# c++ - 删除智能指针，但仍然可以访问指针？

> ID：15004460
> 
> 赞同：0
> 
> 时间：2013-02-21T14:15:15.470
> 
> 标签：c++

我已经从运算符 T*() 返回了指针类型，并通过智能指针调用了删除运算符，并尝试调用成员函数，但我没有遇到任何运行时错误。这怎么可能？还是我的理解有误？请建议。

```
#include <iostream>

using namespace std;

template <typename T>
class sPtr
{
    private:
       T * pointee__;
     public:

        operator T * () {
                cout <<"Inside T* () "<<endl;
                return pointee__;
        };
    explicit sPtr ( T * t )
    {

      pointee__ = t;
    };
    T * operator->() {
        return pointee__;
     }
};

class JTest
{
 private:
        int x;
 public:
   JTest ( int l=100) { x=l; };
    void display ();
};

void JTest::display()
{
  cout <<"Display API x is "<<x<<endl;
}

void JFunc (JTest * tmp)
{
  cout <<" JFunc"<<endl;
  tmp->display ();
  cout <<"Invoking JTest -> display "<<endl;
}

int main ( int argc, char ** argv)
{
 sPtr <JTest> t(new JTest);
 t->display();
 delete t; // Invokes operator T* () , and it is dangerous!!!..
t->display  ();

} 
```

**输出：**

```
Display API x is 100
Inside T* () 
Display API x is 100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:22:49.227

删除 t 将 t 指向的内存标记为未使用，但保留存储在 t 中的地址不变。当您尝试使用存储在 t 处的对象时，C++ 不会检查它是否已被删除，因此虽然您经常会崩溃，但如果已删除对象使用的内存尚未被系统覆盖，它可能偶尔会起作用.

简而言之：有时这会起作用，但经常会崩溃，而且这总是一个坏主意。

如果您想保护自己免受自己的伤害，请在删除后将 t 设置为 NULL。

# android - 哪种方法更适合覆盖 onBackPressed？

> ID：15004462
> 
> 赞同：2
> 
> 时间：2013-02-21T14:15:25.623
> 
> 标签：android

**第一个案例**

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) { 
```

**第二种情况**

```
OnBackPressed(); 
```

哪种情况更好地覆盖 backKeypress 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:29:51.307

如果你想在 2.0 之前赶上后压，你可以使用如下`onKeyDown`方法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        //Do something on back press
    }
    return super.onKeyDown(keyCode, event);
} 
```

有趣的是，如果您同时覆盖 onBackPressed 和 onKeyDown，两者都会先捕获后按`onKeyDown`。

如果您像我们上面所说`super.onKeyDown`的那样调用，那么该方法将触发。如果您不调用，则永远不会被调用。 `onKeyDown``onBackPressed``super.onKeyDown``onBackPressed`

除非您有特定的理由将目标定在 2.0 以下，否则没有太多理由打扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:19:55.823

我认为你应该使用：

```
 @Override
    public void onBackPressed() {

        //...
    } 
```

以防您只想覆盖事件。如果您想检测用户物理单击返回键，第一种方法会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:26:07.940

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) { 
```

如果您正在谈论覆盖此事件，则第一个是正确的实现方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:23:57.773

你应该使用：

```
 @Override
    public void onBackPressed() {

    } 
```

# cassandra - 有没有办法将 Cassandra 1.2 数据迁移到 Cassandra 1.1？

> ID：15004463
> 
> 赞同：3
> 
> 时间：2013-02-21T14:15:26.200
> 
> 标签：cassandra

我需要在 Cassandra 1.2.1 中迁移一些数据，因为我们遇到了一个非常糟糕的错误。我想将它移动到我们知道非常稳定的 1.1.9 集群，但我无法让任何导出方法工作。我终于尝试了 sstable2json 和 json2sstable，但现在看起来 1.2.x 出来的 json 和 1.1.x 出来的不一样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:56:27.477

您可以将所需数据导出为`SSTable`（Cassandra 用于存储其数据的数据结构），然后将其重新导入 Cassandra 1.1。您可以从[Datastax 文档](http://www.datastax.com/dev/blog/simple-data-importing-and-exporting-with-cassandra)中了解该过程。该文档在页面底部包含示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T05:05:13.273

Lyuben 提供的链接很有用，但对于大型数据集，您希望使用[sstable 加载程序](http://www.datastax.com/dev/blog/bulk-loading)而不是 COPY TO / COPY FROM。后者没有并行化并且仅限于可用的本地磁盘空间。

# ruby-on-rails - 无法在 Mac OS X 10.8 上使用 Homebrew FreeTds 捆绑安装 tiny_tds

> ID：15004464
> 
> 赞同：12
> 
> 时间：2013-02-21T14:15:27.203
> 
> 标签：ruby-on-rails, ruby, macos, freetds, tiny-tds

**我的问题**
我可以采取哪些可靠的步骤来 100% 使其正常工作？我需要真正的指示，而不是一个简单的答案或对该过程的模糊概念描述。

让我们深入了解这一点。似乎某处存在冲突，并且我在 GitHub 上的 gem 开发人员就我在 Ruby / Rails / Bundler / Homebrew 方面的经验得到了低于标准的帮助，所以这不完全是他们的错：P 但我需要弄清楚如何尽快让这个工作，所以这与我目前的这个问题的状态有关。

* * *

**更新：2/25/2013**
更新了 GCC / XCODE 版本 4.6 (4H127) 并下载了最新版本的 XCODE 命令行工具，现在 iconv_open() 出现在 extconf 检查器中。现在我收到这些错误：

我相信它们现在是 tiny_tds 和与最新 xcode 路径的兼容性的问题。

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

            /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
    checking for iconv_open() in iconv.h... yes
    checking for sybfront.h... yes
    checking for sybdb.h... yes
    checking for tdsdbopen() in -lsybdb... yes
    checking for ct_bind() in -lct... yes
    creating Makefile

    make
    xcrun cc -I. -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -DHAVE_ICONV_OPEN -DHAVE_SYBFRONT_H -DHAVE_SYBDB_H -I-I/usr/local/php5/include -I-I/usr/include -I-I/usr/local/include -I-I/opt/local/include -I-I/usr/local/MacGPG2/include -I-I/opt/sm/pkg/active/include -I/usr/local/php5/include -I/usr/include -I/usr/local/include -I/opt/local/include -I/usr/local/MacGPG2/include -I/opt/sm/pkg/active/include  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common  -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common    -c client.c
    xcrun: Error: could not stat active Xcode path '/Developer'. (No such file or directory)
    xcrun cc -I. -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -DHAVE_ICONV_OPEN -DHAVE_SYBFRONT_H -DHAVE_SYBDB_H -I-I/usr/local/php5/include -I-I/usr/include -I-I/usr/local/include -I-I/opt/local/include -I-I/usr/local/MacGPG2/include -I-I/opt/sm/pkg/active/include -I/usr/local/php5/include -I/usr/include -I/usr/local/include -I/opt/local/include -I/usr/local/MacGPG2/include -I/opt/sm/pkg/active/include  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common  -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common    -c result.c
    xcrun: Error: could not stat active Xcode path '/Developer'. (No such file or directory)
    xcrun cc -I. -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -DHAVE_ICONV_OPEN -DHAVE_SYBFRONT_H -DHAVE_SYBDB_H -I-I/usr/local/php5/include -I-I/usr/include -I-I/usr/local/include -I-I/opt/local/include -I-I/usr/local/MacGPG2/include -I-I/opt/sm/pkg/active/include -I/usr/local/php5/include -I/usr/include -I/usr/local/include -I/opt/local/include -I/usr/local/MacGPG2/include -I/opt/sm/pkg/active/include  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common  -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common    -c tiny_tds_ext.c
    xcrun: Error: could not stat active Xcode path '/Developer'. (No such file or directory)
    cc  -pipe -bundle -undefined dynamic_lookup -o tiny_tds.bundle client.o result.o tiny_tds_ext.o -L. -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L/usr/local/heroku/lib -L/usr/local/php5/lib -L/usr/local/Cellar/ruby/1.9.3-p194/lib -L/usr/lib -L/usr/local/lib -L/opt/local/lib -L/usr/local/MacGPG2/lib -L/opt/sm/pkg/active/lib -L/Users/rountrjf/.rvm/lib -L/usr/local/Cellar/vertx/lib -L/usr/local/Cellar/vertx/mods/node.vert.x/lib -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L.       -lruby -lct -lsybdb  -lpthread -ldl -lobjc   
    i686-apple-darwin11-llvm-gcc-4.2: client.o: No such file or directory
    i686-apple-darwin11-llvm-gcc-4.2: result.o: No such file or directory
    i686-apple-darwin11-llvm-gcc-4.2: tiny_tds_ext.o: No such file or directory
    make: *** [tiny_tds.bundle] Error 1

Alright, since /Developer doesn't exist.
I used `sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer` thinking that would fix it.  Now I'm back to square one... iconv_open() not found when checked with `extconf.rb` 
```

**更新 2：2013**
年 2 月 25 日好的 ，所以我重新安装了所有东西，Ruby / Rails / 等。并使用评论者的一些建议来使用“：path =>”，这是我现在运行时的输出`rails s`

```
/Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- tiny_tds (LoadError)
    from /Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
    from /Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-sqlserver-adapter-3.2.10/lib/active_record/connection_adapters/sqlserver_adapter.rb:31:in `sqlserver_connection'
    from /Users/rountrjf/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection' 
```

* * *

**我尝试过的事情**

***1.) 最初的 EASY 设置说明与其他任何...***

```
$ rails new test_app
$ cd test_app 
```

现在将这些行添加到`Gemfile`

```
gem 'tiny_tds'
gem 'activerecord-sqlserver-adapter' 
```

现在继续命令...

```
$ bundle install

Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.6.1) 
Using activesupport (3.2.12) 
Using builder (3.0.4) 
Using activemodel (3.2.12) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.5) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.12) 
Using mime-types (1.21) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.12) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.12) 
Using activerecord-sqlserver-adapter (3.2.10) 
Using activeresource (3.2.12) 
Using bundler (1.2.4) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.3) 
Using json (1.7.7) 
Using rdoc (3.12.1) 
Using thor (0.17.0) 
Using railties (3.2.12) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.2.1) 
Using rails (3.2.12) 
Using sass (3.2.5) 
Using sass-rails (3.2.6) 
Installing tiny_tds (0.5.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/Cellar/ruby/1.9.3-p194/bin/ruby extconf.rb 
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
-----
libiconv is missing.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/Cellar/ruby/1.9.3-p194/bin/ruby
    --enable-lookup
    --disable-lookup
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-freetds-dir
    --without-freetds-dir
    --with-freetds-include
    --without-freetds-include=${freetds-dir}/include
    --with-freetds-lib
    --without-freetds-lib=${freetds-dir}/lib
    --with-iconvlib
    --without-iconvlib

Gem files will remain installed in /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/gems/tiny_tds-0.5.1 for inspection.
Results logged to /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/gems/tiny_tds-0.5.1/ext/tiny_tds/gem_make.out
An error occurred while installing tiny_tds (0.5.1), and Bundler cannot continue.
Make sure that `gem install tiny_tds -v '0.5.1'` succeeds before bundling. 
```

**输出`tsql -C`**

```
$ tsql -C
Compile-time settings (established with the "configure" script)
                            Version: freetds v0.91
             freetds.conf directory: /usr/local/Cellar/freetds/0.91/etc
     MS db-lib source compatibility: no
        Sybase binary compatibility: no
                      Thread safety: yes
                      iconv library: yes
                        TDS version: 7.1
                              iODBC: yes
                           unixodbc: no
              SSPI "trusted" logins: no
                           Kerberos: no 
```

***2.) 想象中的成功 / 假装成功 / 大失所望 / 高级设置说明***
找到此博客条目... [http://talltroym.blogspot.com/2012/04/installing-activerecord-sqlserver.html](http://talltroym.blogspot.com/2012/04/installing-activerecord-sqlserver.html)

然后，我找到了 libiconv 库和 freetds 库的正确路径。接下来，我像这样运行它：

```
$ sudo gem install tiny_tds -- --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib --with-freetds-lib=/usr/local/Cellar/freetds/0.91/lib --with-freetds-include=/usr/local/Cellar/freetds/0.91/include
Password:
Building native extensions.  This could take a while...
Successfully installed tiny_tds-0.5.1
1 gem installed
Installing ri documentation for tiny_tds-0.5.1...
Installing RDoc documentation for tiny_tds-0.5.1... 
```

再次尝试`bundle_install`，震惊......它仍然没有通过`gem 'tiny_tds'`Gemfile 安装......

所以我从 Gemfile 中删除 tiny_tds 并继续启动服务器......正如预期的那样......

```
$ rails s
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- tiny_tds (LoadError)
... 
```

***3.) MINI PORTILE***

```
$ sudo gem install mini_portile
$ sudo gem install rakecompiler
$ rake TINYTDS_FREETDS_VERSION="current"
Could not find gem 'tiny_tds (>= 0) ruby' in the gems available on this machine.
Run `bundle install` to install missing gems. 
```

* * *

**其他相关问题和资源**

*   [通过 gem install tiny_tds 在 OSX 10.6 上安装 TinyTDS 时出错](https://stackoverflow.com/questions/12043003/error-installing-tinytds-on-osx-10-6-via-gem-install-tiny-tds) （根本没有信息……因为它根本不适合我。）
*   [FreeTDS Mac OS X MiniPortile](https://stackoverflow.com/questions/9369454/freetds-mac-os-x-miniportile) （关于 miniportile 的方法或如何使用它的信息不是很丰富......）
*   [Homebrew / TinyTDS / FreeTDS 捆绑错误](https://stackoverflow.com/questions/9997722/homebrew-tinytds-freetds-bundle-error) （与 linux 相关，与 Mac 无关）
*   [ROR + 无法安装 tiny_tds](https://stackoverflow.com/questions/7525109/ror-unable-to-install-tiny-tds)
*   [http://talltroym.blogspot.com/2012/04/installing-activerecord-sqlserver.html](http://talltroym.blogspot.com/2012/04/installing-activerecord-sqlserver.html) （一个给了我错误希望的博客条目）
*   [https://github.com/rails-sqlserver/tiny_tds/issues/71](https://github.com/rails-sqlserver/tiny_tds/issues/71)（我在 github 问题上发表了评论，其中我收到了一些建议，说我理解得不够好，无法转化为成功故事）
*   [https://github.com/rails-sqlserver/tiny_tds（tiny_tds](https://github.com/rails-sqlserver/tiny_tds) gem的github）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-02T18:28:43.117

这对我有用（2014 年 10 月 2 日 / OSX 10.9.5）：

```
brew install freetds 
```

在铁轨中：

```
gem 'tiny_tds'
bundle install 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T19:13:14.240

首先安装[free_tds](http://freetds.schemamania.org/)和所需的依赖项。

这对我有用，你的路径可能不同

```
gem install tiny_tds -- --with-freetds-include=/usr/local/include
--with-freetds-lib=/usr/local/lib
--with-iconv-include=/usr/local/Cellar/libiconv/1.14/include
--with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T19:49:32.647

好吧，不幸的是，我现在已经开始工作并且不知道我是如何做到的，但我会在这个答案中列出我迄今为止所做的所有事情来解决它。

最后，`bundle install`标准`gem 'tiny_tds', '0.5.1'`最终工作正常。它通过 RVM 运行 Ruby 版本 1.9.3-p194。

**这是我相当确定黄金的地方......**
我用过`rvm pkg install iconv`并且`rvm reinstall 1.9.3 --with-iconv-dir=$rvm_path/usr`

完成后，我删除了所有旧的 gem 文件夹...我切换了捆绑配置路径以匹配新的 ruby​​ 路径...

然后捆绑安装，然后繁荣。

它还使用 iconv 1.13 而不是 1.14 不确定这是否重要。

我希望这对任何人都有帮助……这对我来说绝对是一次巨大的学习经历。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T19:01:01.947

我已经解决了：

```
brew install freetds 
```

进而

```
bundle install 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T19:55:50.490

我对鲁比了解不多。只是摸索了一下。您始终可以直接安装 vertx，而不是我认为您可以更好地控制目录位置，并且更容易升级。我为 Ops 团队编写了一份生产指南（实际上是一项正在进行的工作）。它可能会帮助你。可能不会。

我写了一个小安装指南。我计划添加一些关于如何配置 TCP/IP 堆栈和 Vertx 以扩展的调整（临时端口设置、文件描述符限制、负载测试、调整回收缓冲区等）

[http://rick-hightower.blogspot.com/2013/11/installing-vertx-on-ubuntu-13.html](http://rick-hightower.blogspot.com/2013/11/installing-vertx-on-ubuntu-13.html)

**在 Ubuntu 13 上安装 Vertx**

**环境细节**

实例类型：EC2 hi1.4xlarge

*   操作系统：Ubuntu 13.10（64 位）Java 虚拟机：

*   java 版本“1.7.0_25”（IcedTea 2.3.12）（内部版本 23.7-b01）

*   vertx：2.1M1（建于 2013-10-29 11:11:22）

**安装软件**

**Java 7 JDK：**

```
 $ sudo apt-get install openjdk-7-jdk 
```

**顶点**：

**下载顶点**

```
$ wget http://dl.bintray.com/vertx/downloads/vert.x-2.1M1.tar.gz
$ tar -zxf vert.x-2.1M1.tar.gz 
$ ls
vert.x-2.1M1  vert.x-2.1M1.tar.gz 
```

进入标准 Unix 结构：

```
$ sudo mv vert.x-2.1M1 /usr/local/share/
$ ls /usr/local/share/
  ...  vert.x-2.1M1  xml 
```

创建指向 /usr/local/share/vertx 的符号链接，以便升级更容易。

```
$ sudo ln -s /usr/local/share/vert.x-2.1M1/ /usr/local/share/vertx
$ ls /usr/local/share/vertx
api-docs  bin  client  conf  lib 
```

将 vertx 符号链接添加到您的 /usr/bin/ 目录。

```
$ sudo ln -s /usr/local/share/vertx/bin/vertx /usr/bin/vertx 
```

安装一个真正该死的编辑器：

```
$ sudo apt-get install emacs 
```

创建测试脚本以测试 vertx 是否正确安装：

```
var vertx = require('vertx');
vertx.createHttpServer().requestHandler(function(r) {
r.response.end("test 1\n");}).listen(8080); 
```

现在针对测试脚本运行 vertx：

```
$ vertx run test.js &
[1] 11493
$ Succeeded in deploying verticle 
```

现在测试安装是否正常：

```
$ curl 127.0.0.1:8080
test 1 
```

如果你得到“测试 1”，这意味着 vertx 已安装并且能够为 verticles 提供服务。

稍后我计划添加 init.d 脚本来启动 vertx，也许还有一个进程会唤醒并确保每分钟左右一切都在运行。我还计划使用 NGINX 反向代理来处理一些 vertx 实例，这样每个盒子可以处理接近 1,000,000 个请求并具有更多的 DOS 保护。无论如何...正在进行中的工作...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-21T06:15:04.643

对我有用的是上面 mr.ruh.roh 的宝石构建选项，在此转载：

```
gem install tiny_tds -- --with-freetds-include=/usr/local/include   
    --with-freetds-lib=/usr/local/lib
    --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include
    --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib 
```

在一行中。该 gem install 安装了 gem，但即使 gem 已经构建和安装，捆绑仍然失败。然而，为捆绑器添加这些选项是有效的。

```
bundle config build.tiny_tds -- --with-freetds-include=/usr/local/include 
  --with-freetds-lib=/usr/local/lib 
  --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include 
  --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib 
```

再次，在一行中。使用该捆绑器配置集，`bundle install`工作。

请注意，我已经运行：

```
brew install freetds
brew install libiconv 
```

这于 2015 年 2 月 20 日在安装了 Xcode 6.1.1 的 OS X 10.9.5 上为我工作

# opencv - CMAKE 包配置和标志设置

> ID：15004465
> 
> 赞同：0
> 
> 时间：2013-02-21T14:15:31.080
> 
> 标签：opencv, cmake, blob, compiler-flags, ros

我在这个领域退出了新手，但我需要在我的 cmake 文件中包含（对于 ROS 节点）：

```
gcc main.cpp `pkg-config --cflags opencv` -o test `pkg-config cvblob opencv --libs` 
```

我想在 ROS 节点中使用 cvblob 和 opencv 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:34:35.660

来自[ROS wiki](http://www.ros.org/wiki/rosbuild/CMakeLists/Examples#Using_pkg-config_to_find_an_external_dependency)的解决方案，opencv 依赖项在 manifest.xml 中声明

```
include($ENV{ROS_ROOT}/core/rosbuild/FindPkgConfig.cmake)
pkg_check_modules(CVBLOB REQUIRED cvblob)
include_directories(${CVBLOB_INCLUDE_DIRS})
link_directories(${CVBLOB_LIBRARY_DIRS})
target_link_libraries(bagDetect ${CVBLOB_LIBRARIES}) 
```

# ios - 如何运行 CorePlot 示例？

> ID：15004469
> 
> 赞同：0
> 
> 时间：2013-02-21T14:15:43.960
> 
> 标签：ios, xcode, core-plot

我正在尝试运行 CorePlot 的 CPTTestApp-iPhone 示例项目，但无法构建。它给了我以下错误：

`NSUInteger loc = MAX(0, (NSInteger)range.location - expandBy);`
在“CPTUtilities.m”中的代码行中，“? 的操作数将签名：'int' 更改为'NSUInteger'（又名'unsigned int'） ”

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:23.863

这是一个已知问题并已修复。看一看：

[http://code.google.com/p/core-plot/issues/detail?id=501&can=1&sort=-id](http://code.google.com/p/core-plot/issues/detail?id=501&can=1&sort=-id)

# python - 更新另一个类的按钮

> ID：15004472
> 
> 赞同：0
> 
> 时间：2013-02-21T14:15:49.447
> 
> 标签：python, tkinter

我正在尝试编写一个 python 程序，并且我希望能够在单击另一个类时更新另一个类的按钮。例如：

gui.py 文件：

```
class main(Frame):

    def __init__(self, parent):
        Frame.__init__(self, parent, background="white")   

        self.parent = parent

        self.initUI()
        #menu bar
        menu = Menu(parent)
        parent.config(menu=menu)
        parent.option_add('*tearOff', FALSE)
        #file menu
        fileMenu = Menu(menu)
        menu.add_cascade(label="File", menu=fileMenu)
        fileMenu.add_command(label="New Show", command=shows.saves.open)
        fileMenu.add_command(label="Save Show", command=shows.saves.save)
        fileMenu.add_command(label="Save Show As", command=shows.saves.saveas)
        fileMenu.add_separator()
        fileMenu.add_command(label="Exit", command=self.quit)
        #edit menu
        editMenu = Menu(menu)
        menu.add_cascade(label="Edit", menu=editMenu)
        editMenu.add_command(label="Copy (ctrl+c)", command=shows.saves.open)
        editMenu.add_command(label="Cut (ctrl+x)", command=shows.saves.save)
        editMenu.add_command(label="Paste (ctrl+v)", command=shows.saves.saveas)
        #insert menu
        insrtMenu = Menu(menu)
        menu.add_cascade(label="Insert", menu=insrtMenu)
        insrtMenu.add_command(label="Add Audo Cue (ctrl + 1)", command=shows.saves.open)
        insrtMenu.add_command(label="Add Memo Cue (ctrl + 2)", command=shows.saves.save)

        #toolbar
        toolbar = Frame(parent)
        b1 = Button(toolbar, text="Mode = Setup", command=m.mode.switch)
        b1.pack(side=LEFT, padx=2, pady=2)
        b2 = Button(toolbar, text="Preview", command=shows.saves.open)
        b2.pack(side=LEFT, padx=2, pady=2)
        b3 = Button(toolbar, text="Edit", command=shows.saves.open)
        b3.pack(side=LEFT, padx=2, pady=2)
        b4 = Button(toolbar, text="Edit", command=shows.saves.open)
        b4.pack(side=LEFT, padx=2, pady=2)
        toolbar.pack(side=TOP, fill=X)

        #main table
        screen_width = parent.winfo_screenwidth()
        screen_height = parent.winfo_screenheight()
        listbox = Listbox(parent, width=screen_width, height=screen_height, bg="black", fg="white")
        listbox.pack()

        listbox.insert(END, "Cue1 - Rain")
    def initUI(self):

        self.parent.title("PyCue ALPHA 0.1")
        #self.pack(fill=BOTH, expand=1) 
```

m.py 文件：

```
class mode():
    def switch():
        if b1["text"] == "Mode = Setup":
            b1["text"] = "Mode = Run"
        else:
            b1["text"] = "Mode = Setup" 
```

有人可以解释一下我该怎么做吗？我所有的（非常 alpha）代码都在 github 上：[https](https://github.com/codefail/PyCue) ://github.com/codefail/PyCue如果你想查看整个事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:20:14.047

我认为您需要制作`switch`一个静态方法：

```
class mode():
    @staticmethod
    def switch(b1):
        if b1["text"] == "Mode = Setup":
            b1["text"] = "Mode = Run"
        else:
            b1["text"] = "Mode = Setup" 
```

您还需要某种将按钮传递给回调的方法——您不能通过传递`callback`给构造函数来做到这一点。您需要分两行完成：

```
b1 = Button(toolbar, text="Mode = Setup")
b1.config(command=lambda : m.mode.switch(b1)) 
```

虽然，我真的不认为这里需要一个类 ( `mode`)。您似乎没有使用实例，因此您并没有真正共享任何数据......看起来您可以只使用一个`switch` *函数*并完全摆脱`mode`该类。

# php - 我想使用 HTML5 将图像从“div”拖放到另一个 div（dropzone）中

> ID：15004474
> 
> 赞同：1
> 
> 时间：2013-02-21T14:15:51.990
> 
> 标签：php, html, drag-and-drop

就像我在标题中描述的那样，我想将图像拖出“列表”（实际上只是一个 div，我将图像加载到数据库之外）并希望将其放入“dropzone”中。

希望每个人都能理解我的英语。

我的问题是：我对 JavaScript 和 HTML5 完全陌生，我的应用程序只能部分工作。

我将图像拖放到 dropzone 中……到目前为止一切都很好……但是传输的图像已从我的列表中消失了 --> 我只想复制/克隆图像。

将图片放入拖放区后，我的函数只是将图片附加到拖放区中......我知道“appendChild”与它有关，但我不知道如何解决这个问题。

如果有人可以帮助我，那将是非常好的？！

JavaScript 代码：

```
//controls the beginning of an drag-event
function dragStart(ev)
{
    ev.dataTransfer.effectAllowed= "copyLink";
    ev.dataTransfer.setData("Text", ev.target.getAttribute("id"));
    return true;
}

//handles the dropzone
function dragEnter(ev)
{
 //avoids placing the element somewhere else (instead of in the dropzone)
    event.preventDefault();
    return true;
}

//handles dropping an element before the target area
function dragOver(ev)
{
    return false;
}

//handles the actual drop part (not working)
function dragDrop(ev)
{
    var eleid = ev.dataTransfer.getData("Text");
    ev.target.appendChild(document.getElementById(eleid));
    ev.preventDefault();
    ev.returnValue();
} 
```

HTML：

-标签：

```
<img id="person_id_'. $metaData["meta_id"] . '" draggable="true" "ondragstart= "return dragStart(event)" src="'. $path .'"/> 
```

拖放区：

```
<div id= "dropzone" ondragenter= "return dragEnter(event)" ondragover= "return dragOver(event)" ondrop= "return dragDrop(event)"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:18:34.293

这确实是 jQuery 的任务。纯 HTML5 除了表示 DOM 元素之外，实际上并不能做更多的事情。JavaScript 至少是 DOM 语言的修饰符；最方便的一个 :) jQuery 完成了您想要解决的大部分复杂任务（也在主要浏览器中），不用担心不使用它。

检查这些文档：

*   [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)
*   [http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

Dropables 可以接受来自其他 DIV 元素的可拖动对象，例如：[http ://api.jqueryui.com/droppable/#option](http://api.jqueryui.com/droppable/#option)

幸运的是，互联网上几乎每个 jQuery 函数/子 API 都有数百个不同的示例。尝试谷歌一些例子，它非常容易学习。在这种情况下，jQuery-UI 是主 jQuery 库的扩展，但它真的很简单。只需添加 SCRIPT-tags 即可阅读！

# libgdx - Libgdx Actions => 逐渐将 Actor 从 A 点移动到 B 点

> ID：15004480
> 
> 赞同：7
> 
> 时间：2013-02-21T14:16:06.110
> 
> 标签：libgdx

我想逐渐为我的 Actor 设置动画。我添加了这个动作来将 Actor 从 A 点移动到 B 点。

```
addAction(Actions.sequence(Actions.moveBy(1, 1), Actions.moveTo(posX, posY))); 
```

也试过这个（10秒内moveTo）：

```
addAction(Actions.moveTo(posX, posY, 10))); 
```

但是Actor动作太快了。怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T16:24:47.947

第二种形式：

```
addAction(Actions.moveTo(posX, posY, 10))); 
```

应该在 10 秒内将你的演员移动到 posX, posY。

第一种形式将在 x 和 y 上移动演员 1 步，完成后立即将演员移动到 posX，posY。 `Actions.sequence`一个接一个地运行给定的动作，它们不会相互修改。

你是如何（以及在​​哪里）在舞台上打电话`act()`的？这决定了在一帧中更新多少`Actor`，因此如果您每帧多次调用它或传递错误的值，则动作将通过得太快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-04T22:27:11.343

仅仅因为当我搜索“Libgdx Move to Point”时你的答案是最高的，我将在这里发布一个解决方案。

这是一个解决方案，不是专门针对演员的：

**在类中定义 Vector2 变量，这些变量将用于对象位置：**

```
protected Vector2 v2Position;
protected Vector2 v2Velocity; 
```

**该位置在构造函数或其他任何地方设置。要获取对象的速度并将其移动到给定点：**

```
public void setVelocity (float toX, float toY) {

// The .set() is setting the distance from the starting position to end position
v2Velocity.set(toX - v2Position.x, toY - v2Position.y);
v2Velocity.nor(); // Normalizes the value to be used

v2Velocity.x *= speed;  // Set speed of the object
v2Velocity.y *= speed;
} 
```

**现在只需将速度添加到位置，对象将移动到给定的点**

```
@Override public void update() {
    v2Position.add (v2Velocity);    // Update position
} 
```

# javascript - 在动力学 js 中使用 stage.toJSON() 重新加载时获取重复图像

> ID：15004483
> 
> 赞同：1
> 
> 时间：2013-02-21T14:16:13.953
> 
> 标签：javascript, image, html, html5-canvas, kineticjs

我的画布很少有可调整大小并支持拖放的图像。

保存画布后，我正在做

```
 var stage = Kinetic.Node.create(json, 'container'); 
```

如果我只是在画布上添加一个图像，它会很好。但如果我添加超过 1 个，我会得到多个图像。就像如果我添加 2 个不同的图像，我会得到 4 个图像，每个图像 2 个。如果我加 3，我会得到 3。依此类推。

这是一个小片段

```
 var stage = Kinetic.Node.create(json, 'container');
   var images = stage.get('.image');
   console.log(images) 
```

在 console.log 中，我得到了同一图像的多个 json 结果。休息我只是使用 src 来加载图像

```
 for(i=0;i<images.length;i++)
   {  
   //function to induce scope
   (function() {
   var image = images[i];

   console.log(images[i])
  var width = images[i].attrs.width;
  var height = images[i].attrs.height; 
  var imageObj = new Image();
  imageObj.onload = function() {
      image.setImage(imageObj);
       image.getLayer().draw();
    };
  imageObj.src = image.attrs.src;
  })();
 } 
```

任何人都知道为什么会这样吗？

# java - 如何使用数据库中的动态数据显示多个页面？

> ID：15004484
> 
> 赞同：1
> 
> 时间：2013-02-21T14:16:16.983
> 
> 标签：java, xml, jquery-ui, jqgrid

我正在从 cassandra 数据库中读取数据并在 jqGrid 中显示。但它在所有页面上显示相同的记录

我正在使用来自[http://javahunter.wordpress.com/2010/12/07/jqgrid-example/的代码](http://javahunter.wordpress.com/2010/12/07/jqgrid-example/)

* * *

这是我的 jsp 文件：请说明为什么分页不起作用。提前谢谢。

```
<title>User Grid</title>

 <script>
  function fillGridOnEvent()          //function called through ready function
 {
    // $("#jQGrid").html("<table id=\"list\"></table><div id=\"page\"></div>");
    jQuery("#list").jqGrid({
    url:'<%=request.getContextPath()%>/JQGridServlet?q=1&action=fetchData',
    datatype: "xml",
    // cellEdit:true,
    //     width:'1000',
    height: '500',
    // altRows: true,
    //  width: 1000,
    colNames:['SrNo','Source IP','Destination IP','Bytes Sent',"Bytes Received"],
    colModel:[
         {name:'srNo',index:'srNo', width:90,sortable:true,align:'center'},
         {name:'stdName',index:'stdName',   
    width:130,sortable:false,align:'center',editable:true},
         {name:'stdStd',index:'stdStd', width:100,sortable:false,align:'center'},
         {name:'stdRollNo',index:'stdRollNo', width:180,sortable:false,align:'center'},
         {name:'view',index:'view', width:100,sortable:false,align:'center'}
             ],
    multiselect: false,
    autowidth:true,
    paging: true,
    viewrecords: true,
    // viewpages: true,
     rowNum:10,
   sortname:'srNo',
   //   sortorder:asce,
     rowList:[10,20,30,40,50],
     // recordtext: "View {0} - {1} of {10}",
     pager: jQuery('#page'),
     loadComplete:function()
          {

          },
     loadonce:false,
     caption: "Student Details"
     }).navGrid('#page',{edit:true,add:true,del:true});
  }

      jQuery().ready(function (){
                        alert("in ready");
                        fillGridOnEvent();
                                });
 </script>

 </head>
 <style>
.ui-jqgrid tr.jqgrow td {white-space: normal}
</style>

<body onload="fillGridOnEvent();">
<table id="list"><tr><td/></tr></table>
    <div id="page" align="center" >
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:38:22.890

这是因为您没有处理发送到控制器的寻呼信息。

如果您查看您的网格在页面发送时发送的 POST，您会看到它正在将此信息发送到您的控制器。您的控制器可以接受此信息，然后选择要返回给 jqGrid 的信息页面

例如您的控制器将期望的参数

```
(string sidx, string sord, int page, int rows, bool _search, string filters) 
```

一个粗略的分页逻辑示例，用于获取此信息并为 jqGrid 生成不同的数据页面以显示。

```
var pagedQuery = filteredQuery.OrderBy(sidx + " " + sord).Skip((page - 1) * rows).Take(rows); 
```

这绝不是您可以将粘贴复制到您的应用程序中的代码，但会为您设置正确的路径来查找示例以及您正在尝试做的事情。

# android - 重绘视图后Android触发onConfigurationChanged

> ID：15004494
> 
> 赞同：0
> 
> 时间：2013-02-21T14:17:21.790
> 
> 标签：android, webview, screen-rotation

我有一个使用 WebView 进行自定义旋转处理的活动。问题是由于方向更改，我需要在重新绘制布局**后触发一个事件。**在我的旋转处理程序中，我正在检测比 webview 更宽的元素。在 onConfigurationChanged 中触发此处理程序时，尚未重新计算视图大小，因此我在旋转之前获得了宽度。

我有两个不好的解决方案：

*   从其他屏幕尺寸和所有填充和其他视图以编程方式计算尺寸，但它太复杂且无效。
*   用一些超时触发处理程序，但是长时间超时很丑陋，而短超时不可靠。

重绘布局后是否触发了一些事件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:26:21.733

怎么样`View.onAttachedToWindow()`？

如果这不起作用（文档说它甚至可能在之前被调用`onMeasure()`，所以我不确定时间和频率是否适合您的需求），您可以通过扩展您使用的 View 对象之一来挂钩布局过程，并覆盖`View.onLayout`以安排 UI 线程回调。不过，我会为多次出现做准备。

# ruby-on-rails - 获取每个对象的平均评分

> ID：15004499
> 
> 赞同：3
> 
> 时间：2013-02-21T14:17:32.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scopes

对大多数人来说可能是一个简单的问题，但仍然要掌握数据库查询。我有可以评分的食谱，我现在想收集这些评分并获得平均评分。一个菜谱有很多评分（我认为这是正确的关系）

我已经创建了一个这样的范围

```
class Recipe < ActiveRecord::Base
belongs_to :user
has_many :ratings
attr_accessible :country, :description, :name
scope :average_rating,includes(:ratings).group('recipe_id').where('AVG(ratings.rating)');
end 
```

评级模型

```
class Rating < ActiveRecord::Base
has_many :users
attr_accessible :ratings, :recipe_id, :user_id
end 
```

我的评分是否也应该包括 has_many :recipes ？

在我的控制器中，我创建了一个实例变量来显示结果

```
@avgrating = Recipe.average_rating 
```

但坚持如何让它在我的视图中显示在这个块中，例如在我的索引中，控制器只是

```
 @recipes = Recipe.all 
```

和视图

```
<% @recipes.each do |recipe| %>
<tr>
<td><%= recipe.name %></td>
<td><%= recipe.description %></td>
<td><%= recipe.country %></td>
<td>Avg Rating =<%= not sure here %></td>
</td>
</tr>
<% end %> 
```

当我看到答案时，我肯定会感到很傻，但现在想不出该怎么做

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T14:20:17.133

尝试`<td>Avg Rating =<%= recipe.ratings.average(:ratings) %></td>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:20:55.123

试试这个：

```
 recipe.ratings.average(:ratings) 
```

或者

```
 <% ratings = recipe.ratings %>
  <%= ratings.map(&:ratings).sum/ratings.count %> 
```

# javascript - Highcharts，如果图表上有多个系列，则更改线型

> ID：15004506
> 
> 赞同：0
> 
> 时间：2013-02-21T14:18:02.137
> 
> 标签：javascript, jquery, highcharts, highstock

使用highcharts图表，如果图表中有超过1个系列，是否可以设置线型，可以在主题中设置吗？

基本上我在想类似的东西：

```
var lineType = 'area'; 
```

然后在图表选项中是这样的：

```
chart: { type: lineType } 
```

了解图表中有多少系列的最佳方法是什么？然后我猜我需要某种 if 语句来知道有多少系列，并相应地设置 lineType 变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:49:16.197

如果你有一个系列的容器，像这样：

```
var series = [{}, {}, {}]; 
```

然后你可以在创建图表时尝试这样的事情：

```
new Highcharts.Chart({
  chart: {
    renderTo: 'div'
    type: series.length > 5 ? 'line' : 'column'
  }, 
  // rest of optipons
  series: series
} 
```

# linux - 如何正确为 Gentoo 编写 ebuild

> ID：15004513
> 
> 赞同：1
> 
> 时间：2013-02-21T14:18:15.990
> 
> 标签：linux, package, gentoo

任何人都可以帮助为[GBS](https://source.tizen.org/documentation/reference/git-build-system)创建 ebuild吗？这是我的工件**ebuild**（为 osc 修改了 ebuild）：

```
# Copyright 1999-2013 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

EAPI=5

PYTHON_DEPEND="2:2.7:2.7"

inherit distutils

DESCRIPTION="Command line tool for building packages for Tizen platform"
HOMEPAGE="https://source.tizen.org/documentation/reference/git-build-system"

LICENSE="GPL-2"
SLOT="0"
IUSE=""
KEYWORDS="amd64 x86"

DEPEND="
    >=dev-util/osc-0.131
    dev-vcs/git
    app-arch/rpm
    dev-util/suse-build
"

RDEPEND="${DEPEND}
    app-admin/sudo
    dev-util/obs-service-meta
"

pkg_setup() {
    python_set_active_version 2
    python_pkg_setup
}

src_unpack() {
    unpack ${PF}.tar.gz
}

src_compile() {
    distutils_src_compile
}

src_install() {
    distutils_src_install

    ### Commented from original ebuild #
    #dosym osc-wrapper.py /usr/bin/osc
    #keepdir /usr/lib/osc/source_validators
    #cd "${ED}"/usr/
    #find . -type f -exec sed -i 's|/usr/bin/build|/usr/bin/suse-build|g'   {} +
    #find . -type f -exec sed -i 's|/usr/lib/build|/usr/share/suse-build|g' {} +
    #rm -f "${ED}"/usr/share/doc/${PN}*/TODO*
} 
```

**叠加信息：**

```
ls /usr/local/portage/dev-util/gbs/
Manifest  gbs-0.13.tar.gz  gbs-0.13_alpha.ebuild  gbs-0.13_alpha.tar.gz

cat /etc/portage/make.conf | grep DISTDIR
DISTDIR="/usr/local/portage/distfiles"

emerge -s "%@dev-util/gbs"
*  dev-util/gbs
      Latest version available: 0.13_alpha
      Latest version installed: [ Not Installed ]
      Size of files: 0 kB
      Homepage:      https://source.tizen.org/documentation/reference/git-build-system
      Description:   Command line tool for building packages for Tizen platform
      License:       GPL-2 
```

当我试图编译这个 ebuild（至少解包）时，我收到以下错误。解包源代码的输出：

```
ebuild   /usr/local/portage/dev-util/gbs/gbs-0.13_alpha.ebuild unpack
>>> Existing ${T}/environment for 'gbs-0.13_alpha' will be sourced. Run
>>> 'clean' to start with a fresh environment.
>>> Not marked as unpacked; recreating WORKDIR...
 * checking ebuild checksums ;-) ...                                                                                        [ ok ]
 * checking miscfile checksums ;-) ...                                                                                      [ ok ]
>>> Unpacking source...
>>> Unpacking gbs-0.13_alpha.tar.gz to /var/tmp/portage/dev-util/gbs-0.13_alpha/work
 * ERROR: dev-util/gbs-0.13_alpha failed (unpack phase):
 *   gbs-0.13_alpha.tar.gz does not exist
 * 
 * Call stack:
 *          ebuild.sh, line   93:  Called src_unpack
 *        environment, line 3719:  Called unpack 'gbs-0.13_alpha.tar.gz'
 *   phase-helpers.sh, line  297:  Called die
 * The specific snippet of code:
 *              [[ ! -s ${srcdir}${x} ]] && die "${x} does not exist"
 * 
 * If you need support, post the output of `emerge --info '=dev-util/gbs-0.13_alpha'`,
 * the complete build log and the output of `emerge -pqv '=dev-util/gbs-0.13_alpha'`.
 * This ebuild is from an overlay named 'x-portage': '/usr/local/portage/'
 * The complete build log is located at '/var/tmp/portage/dev-util/gbs-0.13_alpha/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-util/gbs-0.13_alpha/temp/environment'.
 * Working directory: '/var/tmp/portage/dev-util/gbs-0.13_alpha/work'
 * S: '/var/tmp/portage/dev-util/gbs-0.13_alpha/work/gbs-0.13_alpha' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:48:07.500

您尚未定义 SRC_URI。这就是它用来下载压缩包的方法。您没有将它包含在 ebuild 的目录中。即使您事先已经下载了它，您也可以保存在 /usr/portage/distfiles 中。

此外，您的所有功能（可能 pkg_setup 除外，不确定）都是多余的。默认功能可以正常工作，因此请删除它们。

# c++ - 将元素从 std::vector 移动到另一个

> ID：15004517
> 
> 赞同：72
> 
> 时间：2013-02-21T14:18:22.927
> 
> 标签：c++, vector

如何将一些元素从第一个向量移动到第二个，并且这些元素将从第一个向量中删除？
如果我使用`std::move`，则未从第一个向量中删除的元素。
这是我写的代码：

```
 move(xSpaces1.begin() + 7, xSpaces1.end(), back_inserter(xSpaces2)); 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2018-02-08T10:29:14.097

复活一个旧线程，但我很惊讶没有人提到[`std::make_move_iterator`](https://en.cppreference.com/w/cpp/iterator/make_move_iterator)与`insert`. 它具有在目标向量中预分配空间的重要性能优势：

```
v2.insert(v2.end(), std::make_move_iterator(v1.begin() + 7), 
                    std::make_move_iterator(v1.end())); 
```

正如其他人指出的那样，第一个向量`v1`现在处于不确定状态，所以`erase`用来清除混乱：

```
v1.erase(v1.begin() + 7, v1.end()); 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-21T14:24:13.743

`std::move`并对*元素*`std::copy`进行操作，而不是*容器*。您必须单独改变容器。例如，要将 的前 17 个元素移动到新的 vector中：**`v1``v2`**

 **```
std::vector<Foo> v1, v2;

// populate v1 with at least 17 elements...

auto it = std::next(v1.begin(), 17);

std::move(v1.begin(), it, std::back_inserter(v2));  // ##

v1.erase(v1.begin(), it); 
```

在 line 之后`##`， 的前 17 个元素`v1`仍然存在，但它们已被“移出”，因此它们处于不确定状态。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-02-21T14:23:37.807

允许您移动对象，而`std::move`不是复制它们，从而实现更快的执行速度。当您移动一系列值时，节省的费用可能会更大。但是，当您从容器中[移动范围](http://en.cppreference.com/w/cpp/algorithm/move)时，容器仍会保留曾经被这些值占用的位置。

如果您想摆脱这些占位符，您需要手动调整容器的大小以删除它们（您不必这样做，以防您希望将这些容器点重用于其他元素）。一种方法是调用[`vector::erase`](http://en.cppreference.com/w/cpp/container/vector/erase)您移出容器的同一范围。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-21T14:19:55.693

您不能按照您的想法将元素从一个向量移动到另一个向量；您将始终必须从第一个向量中**删除元素位置。**

如果要将第一个向量中的**所有元素**更改为第二个向量，反之亦然，您可以使用[swap](http://www.cplusplus.com/reference/vector/vector/swap/)。

如果要在两个向量之间移动**相同数量的元素**，可以使用[swap_ranges](http://www.cplusplus.com/reference/algorithm/swap_ranges/)**

# iphone - 如何停止在 mkmapview 中滚动？

> ID：15004522
> 
> 赞同：2
> 
> 时间：2013-02-21T14:18:26.980
> 
> 标签：iphone, ios, objective-c, mkmapview

我`MKMapView`在我的应用程序中使用并使用`mapView.scrollEnabled=NO;`，但它不起作用。这是我的代码：

```
mapView=[[MKMapView alloc] initWithFrame:CGRectMake(20, 100, 282, 209)];
        mapView.delegate=self;
        mapView.scrollEnabled=NO;
        [self.view addSubview:mapView]; 
```

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T14:26:17.657

您在代码中使用`YES`了而不是。`NO`请`NO`如下使用。

```
mapView.scrollEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:29:02.033

尝试设置

```
mapView.scrollEnabled=NO; 
```

或设置

```
mapView.userInteractionEnabled = NO; 
```

但它不允许你放大或缩小和其他东西。点击[这里](https://stackoverflow.com/questions/11830516/prevent-scrolling-in-a-mkmapview-also-when-zooming)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:22:27.640

尝试设置 to的`userInteractionEnabled`属性。`MKMapView``NO`

```
mapView.userInteractionEnabled = NO; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:33:09.730

您是否检查过本教程：

[向 MKMapView 添加边界](http://blog.jamgraham.com/blog/2012/04/29/adding-boundaries-to-mkmapview)

或者这个问题：

[防止在 MKMapView 中滚动，也在缩放时](https://stackoverflow.com/questions/11830516/prevent-scrolling-in-a-mkmapview-also-when-zooming)

# dtd - DTD不是决定论者吗？

> ID：15004527
> 
> 赞同：0
> 
> 时间：2013-02-21T14:18:36.333
> 
> 标签：dtd

我有一个这样的 xml 文档：

```
<root>
   <text>
       <ID>01</ID>
       <weight>1</weight>
       <word>attend</word>
       <note>important</note> 
   </text>  
   <text>
       <note>very important</note> 
       <ID>01</ID>
       <weight>1</weight>
       <word>slow</word>
   </text> 
```

规则是：id、weight、word必须按顺序作为text节点的子节点出现，note节点可以出现在id节点之前或之后。所以我的DTD是：

```
<!ELEMENT text (note?, ID, weight, word, note?)> 
```

但是 xml 编辑器说“这不是决定论”。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T08:31:35.587

使用此**`XML`**文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root SYSTEM "test.dtd">
<root>
    <text>
        <ID>01</ID>
        <weight>1</weight>
        <word>attend</word>
        <note>important</note> 
    </text>  
    <text>
        <note>very important</note> 
        <ID>01</ID>
        <weight>1</weight>
        <word>slow</word>
    </text>
</root> 
```

这个**`DTD`**文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT root (text+) >
<!ELEMENT text (note?, ID, weight, word, note?)>
<!ELEMENT note (#PCDATA) >
<!ELEMENT ID (#PCDATA) >
<!ELEMENT weight (#PCDATA) >
<!ELEMENT word (#PCDATA) > 
```

文档有效，没有错误（Oxygen Xml Editor 14.2）

# vb.net - 用于各种争论类型的对象类型转换器

> ID：15004532
> 
> 赞同：0
> 
> 时间：2013-02-21T14:18:53.920
> 
> 标签：vb.net, list, dictionary, casting, return-type

假设我有两个字典：

```
Dim dict1 as new dictionary(Of Integer, String)
Dim dict2 as new dictioanry(Of customType, customtype2) 
```

我想将它们转换为方法中的列表并返回争论的字典值类型的列表。所以....

```
Public Function DictToListConverter(ByVal argDict as Dictionary(Of Object, Object), ByVal argType as Type) **What goes here. 
```

我知道我可以在调用例程上强制返回，但这不是最好的解决方案。我不想返回包含值的自定义类。换句话说，我正在寻找一种方法来执行以下操作：

传入 dictionary(Of Integer, **String** ) 并返回 List(Of **String** )

同时，如果我传入一个字典（字符串，**布尔值**），那么函数应该返回 List（**布尔值**）

看起来这是不可能的，我要么必须使用类/结构，要么只是在调用例程中转换对象。只是想验证此请求是否可行。

再次，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:06:57.653

假设您使用的是 .Net 3.5 或更高版本，您可以使用以下方法执行此操作...

```
Public Function DictToListConverter(Of TKey, T)(dict As Dictionary(Of TKey, T)) As List(Of T)
    Return dict.Select(Function(i As KeyValuePair(Of TKey, T)) i.Value).ToList()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:36:26.360

您需要使用`List(Of Object)`, 或`ArrayList`，它或多或少是相同的。

# mysql - 无循环会话的浏览量

> ID：15004533
> 
> 赞同：0
> 
> 时间：2013-02-21T14:18:54.913
> 
> 标签：mysql, sql

我有一个具有挑战性的 SQL 问题：假设您有一个页面浏览量表，如下所示：

```
CREATE TABLE pageviews (
  id          INT(11) NOT NULL AUTO_INCREMENT,
  user_id     INT(11) NOT NULL,
  timestamp   DATETIME NOT NULL,
  PRIMARY KEY (id)
) 
```

在此表中，您有大量记录（> 1 亿）。从这些数据中，您想要生成另一个如下所示的表：

```
CREATE TABLE sessions (
  id          INT(11) NOT NULL AUTO_INCREMENT,
  user_id     INT(11) NOT NULL,
  started_at  DATETIME NOT NULL,
  ended_at    DATETIME NOT NULL,
  PRIMARY KEY (id)
) 
```

规则是会话是任意数量的浏览量的任意序列，其中**不包含任何大于 30 分钟的间隔**。

现在我已经设法使用一个使用循环来获取会话的存储过程来生成这个表：

```
DELIMITER |
CREATE PROCEDURE generate_sessions() 
BEGIN
  TRUNCATE sessions;

  INSERT INTO sessions
  SELECT NULL, p.user_id, p.timestamp, p.timestamp FROM pageviews p
  LEFT JOIN pageviews2 p2 ON p2.user_id = p.user_id AND p2.timestamp > p.timestamp AND p2.timestamp < DATE_ADD(p.timestamp, INTERVAL 30 MINUTE)
  WHERE p2.id IS NULL;

  REPEAT    
    UPDATE sessions s
    LEFT JOIN pageviews p ON p.user_id = s.user_id AND p.timestamp < s.started_at AND p.timestamp > DATE_SUB(s.started_at, INTERVAL 30 MINUTE)
    SET s.started_at = p.timestamp
    WHERE p.id IS NOT NULL;
  UNTIL ROW_COUNT() = 0 END REPEAT;
END | 
```

基本上，该过程所做的是首先获取任何会话的最新页面浏览量，将其插入表中，然后迭代回溯，直到所有会话完成。

不用说，这非常慢。任何人都有更好的解决方案，最好是只涉及一个查询的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:52:41.730

这是 MySQL 中的一个难题。你真的想要这个的窗口函数。

但是，有办法。首先，您需要定义每个会话。为此，请找出浏览量之间大于半小时的间隔。以下查询向后看，因此称为`PrevSessionEnd`.

接下来，由于时间在增加，请为在给定页面视图上或之前发生的用户的所有页面视图选择此值的最大值。结果应该是每个页面视图都会获得一个在会话期间保持不变的值。第一个将为 NULL，第二个将是第一个会话的最大时间戳，依此类推。

然后，按此数量分组。

```
select USER_ID, MIN(timestamp) as started_at, MAX(timestamp) as ended_at
from (select pv.*,
             (select MAX(prevSessionEnd)
              from (select pv.*,
                           (select timestamp
                            from pageviews pv2
                            where pv2.useid = pv.user_id and pv2.timestamp < pv.timestamp and
                                  (pv.timestamp - pv2.timestamp) > 0.5/24
                            order by timestamp
                            limit 1
                          ) as PrevSessionEnd
                    from pageviews pv
                   ) pv2
              where pv.user_id = pv2.user_id and pv2.timestamp <= pv.timestamp
             ) as SessionGrouper
      from pageviews pv
     ) pv
group by user_id, SessionGrouper 
```

此特定查询尚未经过测试，因此可能存在语法错误。

我把决赛留给`insert`你。

如果你有一个索引，这反过来会运行得更快`pageviews(user_id, timestamp)`。只能使用此索引来解析子查询。

# php - 这个mysql查询似乎有什么问题？

> ID：15004534
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:19:01.813
> 
> 标签：php, mysql

这简直是​​疯了。似乎没有什么问题：

```
$q_messages = $db->query( "SELECT `messages`.`MessageID`, `messages`.`MsgDate`, `messages`.`MsgStatus`, " .
                "`messages`.`Subject`, `messages`.`Message`, CONCAT(users.LastName, ', ', users.FirstName) SenderName " .
                 "FROM `messages` " .
                 "INNER JOIN `users` ON `messages`.`Sender` = `users`.`UserID` " . 
                 "WHERE (`messages`.`Recipient`=$userid)" ); 
```

该查询导致引发以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\', \', users.FirstName) SenderName FROM `messages` INNER JOIN `users` ON `messa' at line 
```

我还尝试在 concat 函数中将 ', ' 替换为 \", \" ，但这也没有解决问题。顺便说一句，如果我删除 concat 函数的第二个参数，它可以工作

PS。我在 phpmyadmin 中运行了查询，它成功了！

这是回显的sql。对不起，我一开始没有意识到你的意思：D

```
SELECT `messages`.`MessageID`, `messages`.`MsgDate`, `messages`.`MsgStatus`, `messages`.`Subject`, `messages`.`Message`, CONCAT(users.LastName, ', ', users.FirstName) SenderName FROM `messages` INNER JOIN `users` ON `messages`.`Sender` = `users`.`UserID` WHERE (`messages`.`Recipient`=30) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:28:17.370

一种可能性是 的值`$userid`。例如，如果它是一个字符串，那么它应该用引号括起来。

此外，在提供此类查询时，最好显示正在发送的实际 SQL。也就是说，在参数替换之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:34:08.853

试试这个连接：

```
CONCAT(users.LastName, ' , ', users.FirstName) as SenderName 
```

我对其进行了测试并且工作正常；）

PS：尝试将您的查询连接到一个变量中，例如：

```
$query = "select * from my_table";
$q_messages = $db->query($query); 
```

通过这种方式，您可以对 $query 进行回显并查看发生了什么；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:43:20.440

在评论中，您说`$db`是自定义`Database`对象。它的`query`方法可能是转义传递给它的字符串，这将导致它转义 周围的引号`', '`，从而破坏语法。

# css - CSS div 交替颜色

> ID：15004537
> 
> 赞同：72
> 
> 时间：2013-02-21T14:19:08.893
> 
> 标签：css, html, zebra-striping

我正在尝试在我的网站中对我的 div 进行斑马条纹，听起来很简单，但是我发现当我在我的 div 的行之间添加一个标题时，它似乎计算了奇数/偶数样式中的标题

HTML

```
<div class="container">
    <h3>Title</h3>
    <div class="row">Content</div>
    <div class="row">Content</div>
    <h3>Title</h3>
    <div class="row">Content</div>
    <div class="row">Content</div>
    <div class="row">Content</div>
    <h3>Title</h3>
    <div class="row">Content</div>
    <div class="row">Content</div>
    <div class="row">Content</div>
    <div class="row">Content</div>
</div> 
```

CSS

```
.container {
    width:600px;
    margin:0 auto;
}

.row {
    line-height:24pt;
    border: solid 1px black;
}

.row:nth-child(odd) {
    background: #e0e0e0;
}

h3 {
    line-height:36pt;
    font-weight:bold;
    color:blue;
} 
```

[小提琴](http://jsfiddle.net/exrWm/1/)

我原以为小提琴中已经存在的代码基本上会忽略标题并继续进行条带化，但似乎它将标题视为一个孩子

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-02-21T14:24:24.757

不要使用[nth-child](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)，使用[nth-of-type](https://developer.mozilla.org/en-US/docs/CSS/:nth-of-type)

```
div.container > div:nth-of-type(odd) {
    background: #e0e0e0;
} 
```

```
.container {
  width: 600px;
  margin: 0 auto;
}

.row {
  line-height: 24pt;
  border: solid 1px black;
}

div.container>div:nth-of-type(odd) {
  background: #e0e0e0;
}

h3 {
  line-height: 36pt;
  font-weight: bold;
  color: blue;
}
```

```
<div class="container">
  <h3>Title</h3>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <h3>Title</h3>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <h3>Title</h3>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <h3>Title</h3>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
  <div class="row">Content</div>
</div>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T14:25:29.467

您可能想要匹配类型，而不是孩子。

使用*:nth-of-type*例如

```
.row:nth-of-type(odd) {
    background: #e0e0e0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T14:23:06.053

最简单的解决方案当然是包装你想要条纹的元素。

[您更新的 jsFiddle](http://jsfiddle.net/exrWm/3/)。

**HTML**

```
<div class="container">
    <h3>Title</h3>
    <div class="zebra">
        <div class="row">Content</div>
        <div class="row">Content</div>
    </div>
    <h3>Title</h3>
    <div class="zebra">
        <div class="row">Content</div>
        <div class="row">Content</div>
        <div class="row">Content</div>
    </div>
    <h3>Title</h3>
    <div class="zebra">
        <div class="row">Content</div>
        <div class="row">Content</div>
        <div class="row">Content</div>
        <div class="row">Content</div>
    </div>
</div> 
```

**CSS**

```
.row:nth-child(odd) {background: #e0e0e0;} 
```

还要记住，如果[浏览器支持](http://caniuse.com/#feat=css-sel3)对您很重要，您可能希望为斑马条纹服务器端生成额外的类。

# python - 如何调用一个类整数并增加它的值？

> ID：15004540
> 
> 赞同：0
> 
> 时间：2013-02-21T14:19:12.280
> 
> 标签：python, django

我们的 models.py 中有一个类：

```
class Score(model.Model):
    score = models.IntegerField() 
```

当答案正确时，我们想调用 score 对象并在我们的 views.py 中更新它：

```
def answer(request, level_id):
    # next three lines are working for us.
    o = Level.objects.get(id=level_id)
    guess = request.GET.get('guess', '').strip()
    correct = o.answers.filter(value__iexact=guess).exists()

    b = Score.objects.get('score')
    b.score += o.points
    b.save() 
```

我们还没有使用`if`语句使 b.score += o.points 运行，因为首先我想看看我们是否可以更新 b.score。

```
class Level(model.Models):
    points = models.IntegerField("Point Value') 
```

我们得到的错误是：

```
ValueError at /answer/1 too many values to unpack 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:39:19.930

您必须指定要查询的 Score 实例。

假设您之前创建了一个，并且它的主键为 1，您可以使用以下命令访问它：

```
b = Score.objects.get(pk=1) 
```

或者，如果这是第一次，您可以运行：

```
b, created = Score.objects.get_or_create(pk=1) 
```

`created`如果您刚刚创建它，那将是真实的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:23:04.573

尝试这个！

```
def answer(request, level_id):
    # next three lines are working for us.
    o = Level.objects.get(id=level_id)
    guess = request.GET.get('guess', '').strip()
    correct = o.answers.filter(value__iexact=guess).exists()

    b = Score.objects.get(score)
    b.score += int(o.points)
    b.save() 
```

更新对象时，您缺少保存对象。

```
 b.save() # should save it 
```

# javascript - 如何将此 javascript 应用于所选图像？

> ID：15004546
> 
> 赞同：2
> 
> 时间：2013-02-21T14:19:26.417
> 
> 标签：javascript, jquery, class, jquery-animate, mouseover

我将此javascript应用于我的网页：

```
$(function() {

$('img.gallery_left').mouseover(function(){

    $('img.gallery_left').animate({
borderWidth: '10px',
width: '750px',
height: '500px',
marginLeft: '1px',
zIndex: '15'}, 'default');

});

$('img.gallery_left').mouseout(function(){

    $('img.gallery_left').animate({
borderWidth: '4px',
width: '300px',
height: '200px',
marginLeft: '1px'}, 'default');

    });
}); 
```

我将gallery_left 类应用于许多图像，当我将鼠标悬停在其中一个图像上时，它会使每个带有gallery_left 类的图像的大小、边框等都增加。我如何使它*只有*悬停的图像over 被应用，还是我必须让每一个图像都成为它自己的类？（我宁愿不必这样做......）

PS我对JavaScript不是很流利，（我很惊讶我能做到这一点！！）所以如果我不能立即理解你想要理解的内容，请注意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:21:29.227

在事件处理程序中，替换`$('img.gallery_left')`为`$(this)`，例如：

```
$('img.gallery_left').mouseover(function() {
    $(this).animate({...});
}); 
```

然后它们只会影响看到事件的特定元素，而不是整个元素类。

# function - 在 gnuplot 中创建函数

> ID：15004547
> 
> 赞同：0
> 
> 时间：2013-02-21T14:19:26.583
> 
> 标签：function, gnuplot

我正在从文件中读取数据，并确定最小值和最大值。

我想实现一个函数，如果 min==max，则 min = 0

到目前为止，我有 thios：

```
reset

# Define two helper functions
ismin(x) = (x<min)?min=x:0
ismax(x) = (x>max)?max=x:0

# Initialise the 'global' vars
max=-1e38
min=1e38

plot "Data.txt" u 0:(ismin($3)*ismax($3))

#set terminal windows
set terminal png medium size 900,600
set output "Data.png"

print min
print max

iseq(min,max) = (min == max)?min = 0 :0

print min
print max 
```

如果 min==max，如何将 min 设置为 0？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:40:04.223

声明如何`if`：

```
if (min == max) min = 0 
```

# python - 从单个模块中拆分工厂、超级和潜艇

> ID：15004549
> 
> 赞同：2
> 
> 时间：2013-02-21T14:19:29.893
> 
> 标签：python

我有一个工作模块，其中包含一个工厂函数、一个超类和两个子类。实际模块在[这里](https://github.com/natemarks/CiscoXMLPexpect/blob/master/CiscoXMLPexpect/commandler.py)。

我将工厂拆分为自己的文件，并将两个子类放入 commands/ 目录中，这样我就可以解决由于在包含我的 super 的模块中导入我的子类而引起的递归问题。

就在我认为我已正确导入所有内容时，当我尝试时，工厂被一个空的子类列表卡住：

```
for cls in Command.__subclasses__(): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:04:18.527

它不漂亮，但它有效。我想要一种更优雅的方式将字符串转换为类名。循环遍历 __subclasses__ 确实太挑剔了。我只是不太了解元类来应用它。

```
from commands.shVersionCmd import shVersionCmd
from commands.shVRFCmd import shVRFCmd
def CommandFactory(commandnode):
    if commandnode.attrib['name'] == 'shVersionCmd': return shVersionCmd(commandnode)        
    if commandnode.attrib['name'] == 'shVRFCmd': return shVRFCmd(commandnode) 
```

# php - 如何检查数字是否有一位或两位小数？

> ID：15004552
> 
> 赞同：0
> 
> 时间：2013-02-21T14:19:32.887
> 
> 标签：php, cakephp, if-statement, numbers, conditional-statements

我想知道如何检查一个数字是否有一位或两位小数，如果它只有一位小数，例如 12,9，然后用额外的 0 回显该数字，所以它看起来像 12,90。

```
<?php
$number = '12,9';

if $number //has 2 decimals // {
echo $number; }
else { 
echo $number.'0';
}
endif;
?> 
```

我不知道如何正确地做到这一点，任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:21:44.203

如果您的输入是`.`（点）分隔的小数，您可以使用[`number_format()`](http://php.net/manual/en/function.number-format.php)：

```
number_format('12.9', 2); 
```

或者，[`NumberFormatter`](http://php.net/numberformatter)如果您需要支持多个语言环境或使用逗号作为小数点分隔符的数字，则可以使用该类。如：

```
$formatter = new NumberFormatter('de_DE', NumberFormatter::DECIMAL);
$formatter->setAttribute(NumberFormatter::MIN_FRACTION_DIGITS, 2);
$formatter->setAttribute(NumberFormatter::MAX_FRACTION_DIGITS, 2);
echo $formatter->format($formatter->parse('12,9')); 
```

**注意**：使用`NumberFormatter`需要`intl`扩展名。它可以通过简单的`sudo apt-get install php5-intl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:21:15.827

你需要的是 number_format 函数 [http://www.php.net/manual/en/function.number-format.php](http://www.php.net/manual/en/function.number-format.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:23:29.780

由于 PHP 不是严格类型的，你可以这样：

```
$parts = explode(",", $number);
$num_decimals = strlen($parts[1]);

if ($num_decimals == 2) //has 2 decimals // {
  echo $number; 
} else { 
  echo $number.'0';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:27:54.087

如果您确定数字始终像您发布的那样格式化，那么您可以这样做：

```
number_format(str_replace(',', '.', '12,9'), 2, ',', '.'); 
```

# javascript - 如何在 iframe 中获取 PDF 文档加载的高度

> ID：15004555
> 
> 赞同：7
> 
> 时间：2013-02-21T14:19:49.147
> 
> 标签：javascript, pdf, iframe

有什么方法可以获取 iframe 中加载的 PDF 内容的实际高度？

我在 iPad 设备中滚动 PDF 内容时遇到问题？我可以获得正文内容的高度使滚动成功，但仅适用于 HTML 页面。

```
this.contentWindow.document.body.scrollHeight 
```

但是对于 PDF，它没有返回 PDF 文档的确切高度？有什么办法可以得到吗？

谢谢

彼得

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T08:08:00.833

我在我的 iPad 上测试了它，它可以工作，也许它对你也有好处。mozilla 有一个 HTML5 js 项目，它呈现 pdf 文件并显示它们，您可以在 pdf 文件中获取页面的视口。 [https://mozillalabs.com/en-US/pdfjs/](https://mozillalabs.com/en-US/pdfjs/) [https://github.com/mozilla/pdf.js/blob/master/examples/helloworld/hello.js](https://github.com/mozilla/pdf.js/blob/master/examples/helloworld/hello.js)

```
PDFJS.getDocument('helloworld.pdf').then(function(pdf) {
  // Using promise to fetch the page
  pdf.getPage(1).then(function(page) {
    var scale = 1.5;
    var viewport = page.getViewport(scale);

    //
    // Prepare canvas using PDF page dimensions
    //
    var canvas = document.getElementById('the-canvas');
    var context = canvas.getContext('2d');
    canvas.height = viewport.height;
    canvas.width = viewport.width;

    //
    // Render PDF page into canvas context
    //
    var renderContext = {
      canvasContext: context,
      viewport: viewport
    };
    page.render(renderContext);
  });
}); 
```

* * *

**2020 年更新**：pdf.js 的 API 略有变化：

```
PDFJS.getDocument('helloworld.pdf').promise.then(function(pdf) {
  // Using promise to fetch the page
  pdf.getPage(1).then(function(page) {
    var viewport = page.getViewport({scale: 1.5});

    //
    // Prepare canvas using PDF page dimensions
    //
    var canvas = document.getElementById('the-canvas');
    var context = canvas.getContext('2d');
    canvas.height = viewport.height;
    canvas.width = viewport.width;

    //
    // Render PDF page into canvas context
    //
    var renderContext = {
      canvasContext: context,
      viewport: viewport
    };
    page.render(renderContext);
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T23:21:28.650

答案是**否定**的（不幸的是）。

因为在元素级别，如果显示的文档需要，PDF `object`/ `embed`s 不会自动增长以占用更多高度，因此它们的真实高度永远不会暴露给 DOM。

即使您通过将 PDF 指定为 an 的源来直接调用 PDF，`iframe`您也会看到 iframe 具有与任何其他页面一样的 DOM 布局，无论如何都带有pdf的`object`or 。`embed``body`

此 PDF '元素' 内是所有相应 PDF 插件的领域，无法通过`javascript`. 可能有一些`flash`,`java`或浏览器插件可以让你与之交互，但我还没有听说过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-04T09:06:56.343

彼得，您无法在 iOS Safari 上的 iFrame 中获得 PDF 的高度，因为没有可用于苹果移动设备的 adobe reader safari 插件。您可以使用 HTML 5-Canvas 呈现 PDF 和开源客户端库，如 pdfjs...等...

如果没有这个，你可以获得高度[或宽度]的唯一方法是从服务器，使用 iTextSharp.dll 类型的组件并获取 pdf 页面的高度/宽度，稍后你可以乘以页数，这些你都可以轻松完成在服务器端。使用检索到的高度/宽度来设置 iFrame 的样式，然后在 iFrame 的源属性中提供该 PDF。iFrame 将拉伸，您将获得滚动效果。

或者

如果您有任何可以将 PDF 转换为图像的工具或组件，那么您只需在 HTML 上从服务器抛出图像，使用 javascript 您可以控制获取属性。我们有 MS-SSRS 来满足我们的报告需求，对于可在 iPad 上访问的一小部分应用程序，我们从 MS-SSRS 而不是 PDF 获取图像。我们采用这个选项的原因是，如果页面数量增加，那么像 PDF-JS 这样的客户端框架将无法在画布上呈现。

您有多种选择可以在 iPad 上处理 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T20:37:15.203

pdf 查看器选项是否`view=fit`适用于您要完成的工作（[为 iframe 设置自动高度](https://stackoverflow.com/questions/13218687/set-auto-height-for-iframe)）：

```
<iframe src="Path/MyPDF.pdf#view=fit"></iframe> 
```

此解决方案在尝试获取高度之前将高度设置为自动（[https://stackoverflow.com/a/11864824/1803682](https://stackoverflow.com/a/11864824/1803682)）：

```
objIframe = document.getElementById('theIframeId');    
objIframe.style.height = 'auto';

document.body.scrollHeight 
```

最后 - 此处的博客文章：[http](http://dev.magnolia-cms.com/blog/2012/05/strategies-for-the-iframe-on-the-ipad-problem/) ://dev.magnolia-cms.com/blog/2012/05/strategies-for-the-if​​rame-on-the-ipad-problem/和[iScroll4](http://cubiq.org/iscroll-4)可能值得一看。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-09-03T22:11:27.517

这可以通过使用 JQuery 来解决。

让我们假设你有如下的 iframe 和一个 id

```
<iframe src="name.pdf" id="pdf_frame"></iframe> 
```

现在通过使用 JQuery，我们可以将 iframe 的高度设为自动，因为您需要在 iframe 内显示 pdf。

```
$('#pdf_frame').css('height','auto'); 
```

你可以得到高度

```
document.body.scrollHeight 
```

# .net - .NET 中 XPath id() 的替代方案

> ID：15004559
> 
> 赞同：5
> 
> 时间：2013-02-21T14:19:57.037
> 
> 标签：.net, xpath, linq-to-xml

我有以下 XML 文档：

```
<text xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:termRule selector="//term" term="yes" termInfoPointer="id(@def)"/>
 </its:rules>
 <p>We may define <term def="TDPV">discoursal point of view</term>
 as <gloss xml:id="TDPV">the relationship, expressed through discourse
  structure, between the implied author or some other addresser,
  and the fiction.</gloss>
 </p>
</text> 
```

`termInfoPointer`是一个指向`<gloss xml:id="TDPV">`元素的 XPath 表达式。

我使用 LINQ-to-XML 来选择它。

```
XElement term = ...;
object value = term.XPathEvaluate("id(@def)"); 
```

我得到以下异常：`System.NotSupportedException: This XPathNavigator does not support IDs.`

我找不到这个问题的解决方案，所以我尝试`id()`用其他表达式替换：

```
//*[@xml:id='TDPV'] // works, but I need to use @def

//*[@xml:id=@def]
//*[@xml:id=@def/text()]
//*[@xml:id=self::node()/@def/text()] 
```

但这些都不起作用。

有没有办法`id()`用另一个表达式实现或替换它？

我更喜欢不涉及替换`id()`另一个表达式的解决方案/解决方法，因为这个表达式可能很复杂，例如`id(@def) | id(//*[@attr="(id(@abc()))))))"])`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:08:32.687

**如果`def`保证该属性在 XML 文档中只出现一次，请使用：**

```
//*[@xml:id = //@def] 
```

如果可能有不同的`def`属性，那么您需要提供一个 XPath 表达式，`def`在您的情况下准确选择所需的属性：

```
//*[@xml:id = someExpressionSelectingTheWantedDefAttribute] 
```

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select="//*[@xml:id = //@def]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<text xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:termRule selector="//term" term="yes" termInfoPointer="id(@def)"/>
 </its:rules>
 <p>We may define <term def="TDPV">discoursal point of view</term>
 as <gloss xml:id="TDPV">the relationship, expressed through discourse
  structure, between the implied author or some other addresser,
  and the fiction.</gloss>
 </p>
</text> 
```

**对 XPath 表达式求值，并将该求值的结果（选定元素）复制到输出**：

```
<gloss xmlns:its="http://www.w3.org/2005/11/its" xml:id="TDPV">the relationship, expressed through discourse
  structure, between the implied author or some other addresser,
  and the fiction.</gloss> 
```

# jquery - 在 jquery 中使用 DropDown 值

> ID：15004561
> 
> 赞同：0
> 
> 时间：2013-02-21T14:20:13.827
> 
> 标签：jquery, html-select

我需要`<select>`在一些 jquery 的元素中发送所选选项的值以发送到我的 php 文件。

不幸的是，我一直得到一个未定义的值......

```
<select name="query" id="query">
    <option value="join-us">Join Us</option>
    <option value="work-with-us">Work with us</option>
    <option value="about-pf">About Planet Fitness</option>
    <option value="other">Other</option>
</select>

var query = $('#query option:selected').text();

console.log('query = ' + query); 
```

console.log 返回

> 查询=未定义

我试过使用`$('#query').val();`和`$('#query').text();`

我不知道在这里还能做什么。

在我看来，`:selected`psuedoclass 需要选项在标记中显示如下。

```
<option value="bla" selected="selected">bla</option> 
```

显然，我错过了这些，但更改下拉列表中的选择并没有改变这一点，我认为自己将其添加到标记中没有任何意义......

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:31:18.820

你应该使用`.val()`

```
$('#query').change(function () {
    var query = $(this).val();
    $('#result').html('query = ' + query);
}); 
```

你应该在`$('#query').val()`你要提交的那一刻打电话。

[http://jsfiddle.net/33GSy/1/](http://jsfiddle.net/33GSy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:49:24.027

给你……使用 jQuery 1.8.3……

* * *

***实验一***：[**现场演示**](http://jsfiddle.net/3E6jJ/)

**代码**

```
<select name="query" id="query">
    <option value="join-us">Join Us</option>
    <option value="work-with-us">Work with us</option>
    <option value="about-pf">About Planet Fitness</option>
    <option value="other">Other</option>
</select>

<script>
    var query1 = $('#query option:selected').text();
    var query2 = $('#query').val();
    var query3 = $('#query').text();

    alert('query1 = ' + query1 + '\nquery2 = ' + query2 + '\nquery3 = ' + query3);
    console.log('query1 = ' + query1 + '\nquery2 = ' + query2 + '\nquery3 = ' + query3);
</script> 
```

**输出**

铬合金：

```
query1 = Join Us
query2 = join-us
query3 = 
    Join Us
    Work with us
    About Planet Fitness
    Other 
```

IE：

```
query1 = Join Us
query2 = join-us
query3 = Join Us Work with us About Planet Fitness Other 
```

火狐：

```
query1 = Join Us
query2 = join-us
query3 = 
    Join Us
    Work with us
    About Planet Fitness
    Other 
```

* * *

***实验二***：[**现场演示**](http://jsfiddle.net/3MjPc/)

**代码**

```
 <script>
        function getMyValue() {
            var query1 = $('#query option:selected').text();
            var query2 = $('#query').val();
            var query3 = $('#query').text();

            alert('query1 = ' + query1 + '\nquery2 = ' + query2 + '\nquery3 = ' + query3);
            console.log('query1 = ' + query1 + '\nquery2 = ' + query2 + '\nquery3 = ' + query3);
        }
    </script>
</head>

<body>
    <select name="query" id="query">
        <option value="join-us">Join Us</option>
        <option value="work-with-us">Work with us</option>
        <option value="about-pf">About Planet Fitness</option>
        <option value="other">Other</option>
    </select>

    <button onclick="getMyValue();">Click Me</button>
</body> 
```

**输出**（选择“与我们合作”后单击按钮

铬合金：

```
query1 = Work with us
query2 = work-with-us
query3 = 
    Join Us
    Work with us
    About Planet Fitness
    Other 
```

IE：

```
query1 = Work with us
query2 = work-with-us
query3 = Join Us Work with us About Planet Fitness Other 
```

火狐：

```
query1 = Work with us
query2 = work-with-us
query3 = 
    Join Us
    Work with us
    About Planet Fitness
    Other 
```

* * *

**推理**

Your code works fine, should be something wrong with the way you are invoking it, try putting alerts all over the place...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:26:08.453

你什么时候打电话`$('#query option:selected').text();`？

这对我来说很好：

```
$('#query').change(function() {
    var query = $('#query option:selected').text();

    console.log('query = ' + query);
}) 
```

[JSF](http://jsfiddle.net/6excJ/)中。

**编辑：**反对票是怎么回事？我提供的示例在 Chrome 和 IE 中运行良好。

这是一个更新版本，显示了与按钮单击事件完全相同的内容：[JSFiddle](http://jsfiddle.net/6excJ/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:27:48.193

```
$('#query option').filter(':selected').val(); 
```

见[JSFIDDLE](http://jsfiddle.net/wE8Xe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:33:31.470

这工作得很好。

```
var query = $('#query option:selected').text();
console.log('query = ' + query); 
```

请参阅下面的 jsFiddle：

[http://jsfiddle.net/FJCSu/3/](http://jsfiddle.net/FJCSu/3/)

# java - 如何实现一个具有多行按钮的 java GUI 彼此等距

> ID：15004565
> 
> 赞同：1
> 
> 时间：2013-02-21T14:20:16.367
> 
> 标签：java, swing, jbutton, layout-manager, japplet

我试图在我的顶行获得 4 个按钮，在底行获得 4 个按钮，我需要在该按钮下方有一个按钮 - 这是一个投票应用程序，每个按钮代表一个候选人。initializeThings() 是从这个小程序的 init 方法调用的唯一方法。Person 类只是一个包含 3 个字符串的容器，这些字符串表示名称、候选人的竞选位置以及有关他们的其他信息。我的主要问题实际上只是弄清楚如何使用顶行的 4 个按钮、底部的 4 个按钮和底行下方的投票按钮来格式化它。

```
public class MainElectionWindow extends JApplet implements ActionListener, MouseListener{
private JPanel panel, topRow, bottomRow, voteBtnRow;
private JButton person1But,person2But,person3But,person4But,person5But,person6But,person7But,person8But,castVote;
private Person person1,person2,person3,person4,person5,person6,person7,person8;
private ImageIcon pic1, pic2, pic3, pic4, pic5, pic6, pic7, pic8;

private static final int HORIZONTAL_SPACING = 10;
private static final int VERTICAL_SPACING = 20;

private void initializeThings() {

// Initialize variables
topRow = new JPanel();
topRow.setLayout(new BoxLayout(topRow,BoxLayout.X_AXIS));

bottomRow = new JPanel();
bottomRow.setLayout(new BoxLayout(bottomRow,BoxLayout.X_AXIS));

voteBtnRow = new JPanel();

//Create people with names, position they're running for, and other info
person1 = new Person("Name 1", "Pos 1", "Other Info 1");
person2 = new Person("Name 2", "Pos 2", "Other Info 2");
person3 = new Person("Name 3", "Pos 3", "Other Info 3");
person4 = new Person("Name 4", "Pos 4", "Other Info 4");
person5 = new Person("Name 5", "Pos 5", "Other Info 5");
person6 = new Person("Name 6", "Pos 6", "Other Info 6");
person7 = new Person("Name 7", "Pos 7", "Other Info 7");
person8 = new Person("Name 8", "Pos 8", "Other Info 8");

pic1 = new ImageIcon("facebackground.png");
pic2 = new ImageIcon("facebackground.png");
pic3 = new ImageIcon("facebackground.png");
pic4 = new ImageIcon("facebackground.png");
pic5 = new ImageIcon("facebackground.png");
pic6 = new ImageIcon("facebackground.png");
pic7 = new ImageIcon("facebackground.png");
pic8 = new ImageIcon("facebackground.png");

// Get the content pane
Container container = this.getContentPane();

// Add panel to container
container.add(topRow);
container.add(bottomRow);
container.add(voteBtnRow);

person1But = new JButton(pic1);
person2But = new JButton(pic2);
person3But = new JButton(pic3);
person4But = new JButton(pic4);
person5But = new JButton(pic5);
person6But = new JButton(pic6);
person7But = new JButton(pic7);
person8But = new JButton(pic8);
castVote = new JButton("Vote");

// Add action listeners
person1But.addActionListener(this);
person2But.addActionListener(this);
person3But.addActionListener(this);
person4But.addActionListener(this);
person5But.addActionListener(this);
person6But.addActionListener(this);
person7But.addActionListener(this);
person8But.addActionListener(this);
castVote.addActionListener(this);

//Add Mouse Listeners
person1But.addMouseListener(this);
person2But.addMouseListener(this);
person3But.addMouseListener(this);
person4But.addMouseListener(this);
person5But.addMouseListener(this);
person6But.addMouseListener(this);
person7But.addMouseListener(this);
person8But.addMouseListener(this);

// Add components to the visual panel1
topRow.add(person1But);
topRow.add(person2But);
topRow.add(person3But);
topRow.add(person4But);
bottomRow.add(person5But);
bottomRow.add(person6But);
bottomRow.add(person7But);
bottomRow.add(person8But);
voteBtnRow.add(castVote);

// Make it visible
//person1But.requestFocusInWindow();

add(container);

setVisible(true);
} 
```

感谢您花时间阅读此/帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:26:11.787

你可以看看 TableLayoutManager，我自己使用 Java 的经验并不多，但在学校我喜欢使用它。

[http://code.google.com/p/table-layout/](http://code.google.com/p/table-layout/)

也尝试循环你的人，图片等，以简化你的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:25:56.223

来自 NetBeans

![在此处输入图像描述](../Images/3216a833c78203f96b59b42f7a17305c.png)

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * NewJPanel.java
 *
 * Created on Feb 21, 2013, 11:23:48 PM
 */
package javaapplication19;

/**
 *
 * @author yccheok
 */
public class NewJPanel extends javax.swing.JPanel {

    /** Creates new form NewJPanel */
    public NewJPanel() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        jButton6 = new javax.swing.JButton();
        jButton7 = new javax.swing.JButton();
        jButton8 = new javax.swing.JButton();

        setLayout(new java.awt.GridLayout(2, 4));

        jButton1.setText("jButton1");
        add(jButton1);

        jButton2.setText("jButton2");
        add(jButton2);

        jButton3.setText("jButton2");
        add(jButton3);

        jButton4.setText("jButton2");
        add(jButton4);

        jButton5.setText("jButton2");
        add(jButton5);

        jButton6.setText("jButton2");
        add(jButton6);

        jButton7.setText("jButton2");
        add(jButton7);

        jButton8.setText("jButton2");
        add(jButton8);
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JButton jButton7;
    private javax.swing.JButton jButton8;
    // End of variables declaration
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:23:18.900

我建议你看一下`GridBagLayout`，一旦你弄清楚如何使用它，你的用户界面就会很容易做到。

# richfaces - 带有 spacer.gif 的额外 td 由 Richfaces 在使用 richfaces:tabpanel 生成的选项卡之间插入

> ID：15004569
> 
> 赞同：0
> 
> 时间：2013-02-21T14:20:27.747
> 
> 标签：richfaces, space, html-table, tabpanel, extra

我需要创建选项卡并使用`richfaces:tabpanel`组件。

该问题是`<td>`由richfaces 生成的，其中包含`spacer.gif`并且因此选项卡之间有空间。

我尝试使用`richfaces:tabpanel property headerspacing="0px";`但空间存在。

我们正在使用`richfaces version 3.3.3.Final`和`jsf version 1.2`

# jsp：

```
 <td width="100%">
<rich:tabPanel headerSpacing="0px;">
 <rich:tab id="tab1">
 <f:facet name="label">
 <h:outputText value="Tab1"></h:outputText>
 </f:facet>
  <ui:include src="./tab1.jspx"/>
  </rich:tab>
  <rich:tab id="tab2"> 
  <f:facet name="label">
 <h:outputText value="tab2"></h:outputText>
 </f:facet>
  <ui:include src="./tab2.jspx"/>
 </rich:tab> 
 </rich:tabPanel>
 </div>
 </td> 
```

# CSS：

```
.rich-tabhdr-side-border {
    border: none;   
    background-image: none;
}

.rich-tabhdr-side-cell{
    border: 1px solid #ABAA96;  
    height:23px;
    display:block;
    background:url(../images/ButtonConatinerBG.gif) repeat-x top;
    border-bottom:1px solid #A1A290;
    font-size: 12px;
    font-weight:bold;
    color: #FFFFFF;
    }

.rich-tabpanel-content {
 font-family: verdana;
font-size: 12px;
color: #000000;    
background-color:#F9F9FB; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:54:04.030

您可以使用 CSS 隐藏这些分隔符：

```
.rich-tabpanel img[src="path/to/spacer.gif"] {
    display: none;
} 
```

# linux - 列出除一个以外的所有目录

> ID：15004571
> 
> 赞同：5
> 
> 时间：2013-02-21T14:20:30.147
> 
> 标签：linux, bash, shell

我有以下目录结构

```
libs logs src etc .........
  |-- logs
  |-- src
  |-- inc 
```

“logs”目录在里面无处不在。所以我想列出除“日志”之外的所有目录。什么是shell命令。

就像是

```
#!/bin/bash
for dir in `find * -type d`; do
    if [[ ${dir} != "{logs}*" ]]; then
        echo ${dir}
    fi
done 
```

但这似乎不起作用。

问候， Farrukh Arshad。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:27:21.303

与其尝试通过检查一次处理这些事情，不如获取*所有*目录并过滤掉不需要的目录：

```
find * -type d | egrep -v '^logs/|/logs/' 
```

`grep`简单地删除包含`logs/`在开头或任何地方的行`/logs/`。

这比逐个检查每个目录要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:56:16.267

如上述评论中所述，您可以使用 egrep 和 | 分隔模式或像下面一样在 find 中定义它

```
 find . -type d -print
.
./logs1
./test
./logs

$ find . -type d -not -name logs -not -name logs1  -print
.
./test 
```

# ios - iOS：从应用程序内收集数据有哪些限制？

> ID：15004574
> 
> 赞同：1
> 
> 时间：2013-02-21T14:20:36.480
> 
> 标签：ios

我有一个应用程序，我将其作为概念验证并放在应用程序商店只是为了获得通过该过程的经验，但事实证明，它获得了相当多的下载，可能每周 30 次。没有愤怒的小鸟，但该应用程序对它提供的数据非常具体。这是一个免费的应用程序，我现在想做的是收集一些关于用户的数据——他们使用它的频率、他们在哪里、他们正在搜索和保存什么信息。我无意接触个人数据，但我希望能够汇总所有用户正在做的事情，看看这是否有任何价值。

这在 iOS 应用程序中是否允许？我看到应用程序收集的数据比这更多的报告（比如 Path 拉动你所有的联系人），我认为我想要做的是非常标准的。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:54:23.793

检查 App Store 批准指南。那是你拥有的最好的资源。 [https://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

一些可能与您相关的摘录：

地点

> 4.1 收集、传输或使用位置数据前未通知并征得用户同意的应用将被拒绝
> 
> 4.2 使用基于位置的 API 对车辆、飞机或其他设备进行自动或自主控制的应用程序将被拒绝
> 
> 4.3 使用基于位置的 API 进行调度、车队管理或紧急服务的应用程序将被拒绝
> 
> 4.4 位置数据只能在与应用程序向用户提供的功能和服务直接相关或支持批准的广告用途时使用
> 
> 隐私
> 
> 17.1 未经用户事先许可，应用程序不得传输有关用户的数据，并为用户提供有关数据使用方式和使用地点的信息的访问权限
> 
> 17.2 要求用户分享电子邮件地址和出生日期等个人信息才能正常运行的应用程序将被拒绝
> 
> 17.3 针对未成年人进行数据收集的应用将被拒绝

独立于指南所说的内容，您应该注意用户的隐私。只要您不将收集的信息固定给个人用户，我想您可能会没事。关于位置数据，该指南指出，如果与应用程序的使用无关，则不能收集用于分析目的。但是，它指的是gps数据。您可以通过网络访问信息获取位置以进行分析。

# django - 使 django url 标签静默失败

> ID：15004575
> 
> 赞同：2
> 
> 时间：2013-02-21T14:20:43.793
> 
> 标签：django, django-urls, django-templates

Django {% url %} 模板标签在无法反转提供的 URL 时会引发 NoReverseMatch 错误。这在开发中很有用，但在生产中，这会阻止用户陷入丑陋的 500 错误，阻止整个页面，并导致他们认为我们的网站已损坏。

模板开发人员不应该因为拼写错误而破坏整个网站。我想要做的是透明地覆盖此行为，以便仅在生产中，如果找不到反向匹配，它会输出一个默认 url，如“#”，并在后台向我们的异常跟踪系统报告错误，但仍然允许用户继续他们正在做的事情而不会引发 500 错误。

有没有办法用我自己的更安全的版本透明地替换默认的 {% url %} 标记？我不想在网站上每个模板的顶部添加 {% load my_custom_url_tag %}，因为在某些时候人们会忘记，否则标签的行为将是相同的，唯一的区别在于它如何处理错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:10:13.603

您可以在静默模式下使用内置的 url 标记，尝试查找，然后使用它找到的 URL——如果它找到了什么。

来自[Django 文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)：

> 如果缺少视图，此`{% url ... as var %}`语法不会导致错误。在实践中，您将使用它来链接到可选的视图：

```
{% url 'path.to.view' as the_url %}
{% if the_url %}
   <a href="{{ the_url }}">Link to optional stuff</a>
{% endif %} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:25:42.223

通过实现您自己的 url 标签，您将面临许多前向兼容性问题。我的建议是添加自定义 500 错误处理程序：[https ://docs.djangoproject.com/en/1.4/topics/http/views/#the-500-server-error-view](https://docs.djangoproject.com/en/1.4/topics/http/views/#the-500-server-error-view)

如果模板开发人员打错字，我认为您实际上希望视图抛出错误。试图掩盖这种行为似乎不合逻辑 - 这还不足以进行一些简单的单元测试以确保您的视图至少返回 200 响应代码吗？

# java - java中如何使用开闭原理进行网页操作调用？

> ID：15004576
> 
> 赞同：0
> 
> 时间：2013-02-21T14:20:43.530
> 
> 标签：java, design-principles

我有一个网页，用户可以在其中填写和提交表单：

```
 <form id=email...
 send email ....
 <input type="hidden"id="method" value="sendemail"...
 />
  .............

 <form id=writeindatabase
 some data
      ............
 <input type="hidden"id="method"  value="writeindatabase"... 
```

在服务器端：

```
if (method.compareTo("sendemail")==0) {
 doSendEmail(....
}
else if (method.compareTo("writeindatabase")==0) {
  doWriteInDatabase(....

 .............................. 
```

我不喜欢这种架构，因为它违反了[开闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)。是否有可能重构这个来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:43:54.920

您可以以结构化、安全的方式使用反射，或者类似地使用命令模式。

*   **反射：**制作一个`Map<String, Method>`将每个可接受的方法名称映射到一个反射`Method`对象，您可以`invoke`在查找它之后。

*   **命令模式：**以与上述类似的方式使用 a `Map<String, Callable<?>>`。将 s 实例化为通过调用适当的服务方法`Callable`实现的匿名内部类。`call`

# ruby-on-rails - 设计正在失去我的 current_user

> ID：15004577
> 
> 赞同：3
> 
> 时间：2013-02-21T14:20:47.283
> 
> 标签：ruby-on-rails, authentication, devise

我正在尝试使用 Devise 根据遗留 api 实现我自己的身份验证机制。我正在使用[http://4trabes.com/2012/10/31/remote-authentication-with-devise/中概述的技术](http://4trabes.com/2012/10/31/remote-authentication-with-devise/)

由于某种原因，Devise 丢失了我的自定义身份验证模块返回的对象。

这是我的 remote_authentication 方法返回的对象

```
#<User:0xb65033d4 @id="MMS", @password="password", @name="MMS", @acl="YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN"> 
```

这是传递给 serialize_into_session 的值：

```
#<User:0xb66c6be4 @id=nil, @password=nil, @name=nil, @acl=nil> 
```

在这一点上，夹具当然是向上的。

有谁知道为什么会发生这种情况以及如何解决它？

彼得

# vba - 使用宏验证 excel 中的唯一复合键

> ID：15004579
> 
> 赞同：0
> 
> 时间：2013-02-21T14:20:48.147
> 
> 标签：vba, excel

我正在创建一个 excel 宏。作为其中的一部分，我需要验证 Excel 中的唯一复合键。即说 Column1 + Column2 + Column3 不应该重复。

如果是这样，该行应以红色突出显示。

最好的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:53:46.207

有几种方法可以做到这一点：两种取决于对数据进行排序，而第三种则不是。我将提供不同的答案，以便读者可以指出他们更喜欢哪个。

### 排序和应用条件格式

**优点：**动态（根据数据变化进行调整），不需要任何代码
**缺点：**需要排序，可能会变得混乱

1.  按关键列手动排序
2.  创建条件格式规则并将其应用于所有数据行。

    1.  突出显示所有数据，但从第一行数据开始
    2.  选择条件格式 -> 新规则
    3.  将格式设置为红色填充
    4.  选择“使用公式确定要格式化的单元格”
    5.  这是您需要的公式，假设您的**选择从第 2 行开始**（第 1 行有一个标题），并且您的**关键列是 A、B 和**C。仔细注意`$`标志出现的地方和不出现的地方：

        ```
        =OR((CONCATENATE($A2,$B2,$C2)=CONCATENATE($A1,$B1,$C1)),
            (CONCATENATE($A2,$B2,$C2)=CONCATENATE($A3,$B3,$C3))) 
        ```

        这将突出显示具有重复键的*两*行，或者如果有两个以上的行，则突出显示所有行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:19:00.233

有几种方法可以做到这一点：两种取决于对数据进行排序，而第三种则不是。我将提供不同的答案，以便读者可以指出他们更喜欢哪个。

### 在 VBA 中使用字典识别重复项

**优点：**快速，不需要排序
**缺点：**需要代码，不会自动更新

在这种情况下，我将实际识别重复行的问题与突出显示它们的简单步骤分开处理。此函数返回一个字典，其中键是具有多行的复合键，值是包含与键匹配的所有行的行号的集合。它相当于`Dictionary<string,List<int>>`.NET 中的 a。从概念上讲，它看起来像这样：

```
"some..key..1" : [1, 42, 401]
"some..key..2" : [134, 135] 
```

键是每个键列的连接内容，由空字符分隔。我使用不可打印的空字符，以便键集（“A”、“Dog”、“2”）不等于（“AD”、“o”、“g2”）。

正如所写，关键比较是区分大小写的。如果您需要不区分大小写的匹配，请将 和 的属性`CompareMode`设置为。`dctValues``dctDuplicates``TextCompare`

**注意**：您需要添加对 Microsoft Scripting Runtime 的引用

```
Public Function FindDuplicates(ByVal DataRange As Range, ParamArray KeyColumns()) As Dictionary
    Dim ws As Worksheet
    Dim vKeyRange, rngCol As Range
    Dim dctKeys As New Dictionary
    Dim colKeys
    Dim keyParts() As String
    Dim strKey As String
    Dim dctValues As New Dictionary
    Dim dctDuplicates As New Dictionary
    Dim i As Long, ub As Long
    Dim lngFirstRow As Long, lngLastRow As Long, lngRow As Long

    Set ws = DataRange.Worksheet

    ' Identify unique key column numbers
    For Each vKeyRange In KeyColumns
        For Each rngCol In vKeyRange.Columns
            dctKeys(rngCol.Column) = True
        Next
    Next
    colKeys = dctKeys.Keys

    ub = UBound(colKeys)
    ReDim keyParts(ub)

    ' Find first and last row of data range
    lngFirstRow = DataRange.Cells(1, 1).Row
    lngLastRow = DataRange.Cells(DataRange.Rows.Count, 1).Row

    ' Loop through rows
    For lngRow = lngFirstRow To lngLastRow
        ' Get the parts for the key
        For i = 0 To ub
            keyParts(i) = ws.Cells(lngRow, colKeys(i)).Value
        Next

        ' Concatenate the parts with an unprintable character as
        ' the delimiter, so that "A" + "Dog" != "AD" + "og"
        strKey = Join(keyParts, Chr(0))

        ' If the key hasn't been found yet, create a new collection
        If Not dctValues.Exists(strKey) Then
            dctValues.Add strKey, New Collection
        End If

        ' Push the row number to the list of rows with this key
        dctValues(strKey).Add lngRow

        ' If this is the second row with this key, add the
        ' list to the dictionary of keys with multiple rows
        If dctValues(strKey).Count = 2 Then
            dctDuplicates.Add strKey, dctValues(strKey)
        End If
    Next

    Set FindDuplicates = dctDuplicates
End Function 
```

用法：查找 A2:I5000 中所有重复的行，使用 A、B 和 E 列作为键列

```
Dim ws As Worksheet, dctDups As Dictionary, vKey, vRow
Set ws = ThisWorkbook.Worksheets(1)
Set dctDups = FindDuplicates(ws.Range("A2:I5000"), ws.Range("A:B"), ws.Range("E:E"))
For Each vKey In dctDups
    For Each vRow In dctDups(vKey)
        ws.Range("A" & vRow & ":I" & vRow).Interior.Color = vbRed
    Next
Next 
```

# amazon-s3 - Amazon S3 存储桶访问日志中的未知 IP 地址

> ID：15004584
> 
> 赞同：0
> 
> 时间：2013-02-21T14:21:03.513
> 
> 标签：amazon-s3

我已在存储桶上启用 S3 访问日志。所有条目都来自我的 EC2 实例，除了一些来自未知私有 IP 地址的条目。这些 IP 的地址如 10.xxx 是某种恶意活动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:00.530

10.xxx 可能是内部的，也可能是恶意的。最好是为了安全起见，并确保只需更改您的访问详细信息并扫描您的计算机以查找任何可能嗅探这些详细信息的内容。

# simplexml - 这段代码有什么问题？简单XML元素

> ID：15004587
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:21:11.767
> 
> 标签：simplexml, php

```
$fn = $Cache_Path . '/n' . $Node . '.xml';
$store = file_get_contents( $fn );
SimpleXMLElement;
$xml = new ( $store );
$link = ''; 
```

错误：

> 解析错误：语法错误，意外的 '('，期待 T_STRING 或 T_VARIABLE 或 '$' in.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:24.410

你可能的意思是：

```
$fn = $Cache_Path . '/n' . $Node . '.xml';
$store = file_get_contents( $fn );
$xml = new SimpleXMLElement ( $store );
$link = ''; 
```

# imacros - macros 使用 % 和 $

> ID：15004588
> 
> 赞同：1
> 
> 时间：2013-02-21T14:21:15.697
> 
> 标签：imacros

此代码有效：

```
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:reg CONTENT=%1
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:code CONTENT=%67 
```

此代码不起作用：

```
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:reg CONTENT={{!COL2}}
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:code CONTENT={{!COL3}} 
```

或其任何变体

```
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:reg CONTENT=%{{!COL2}}
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:code CONTENT=%{{!COL3}} 
```

或者

```
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:reg CONTENT=%*{{!COL2}}*
TAG POS=1 TYPE=SELECT FORM=NAME:formular ATTR=ID:code CONTENT=%*{{!COL3}}* 
```

即使 csv 文件直接包含 %1 和 %67 它也不起作用。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T14:28:20.787

例子：

`<select> <option value="this">Next</option> </select>`

如果你正在使用`%`，那么 iMacros 将匹配**this**的值。如果使用`$`, 将匹配**Next**的值。

在您的情况下，您应该使用`${{!COL2}}`和`${{!COL3}}`

# python - 尝试在 Ubuntu 12.10 上使用 pip 和 easy_install 和 Python2.7 安装 GDAL 时出错

> ID：15004590
> 
> 赞同：3
> 
> 时间：2013-02-21T14:21:17.633
> 
> 标签：python, ubuntu, gdal

我的错误是

```
__main__.gdal_config_error: [Errno 2] No such file or directory 
```

我在尝试在 Ubuntu 12.10 上使用 pip 和 easy_install 和 Python2.7 安装 GDAL 时得到了这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:45:46.367

试试这个：

sudo apt-get install python-gdal

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:09:24.823

试试这个：

```
sudo add-apt-repository ppa:ubuntugis/ppa
sudo apt-get update
sudo apt-get install gdal 
```

[来源](http://lists.osgeo.org/pipermail/gdal-dev/2012-May/032946.html)

# java - chrome和ie浏览器之间的java request.getQueryString()值不同

> ID：15004593
> 
> 赞同：2
> 
> 时间：2013-02-21T14:21:25.573
> 
> 标签：java, jsp, url, servlets

我有一个请求，在浏览器地址栏中输入：

```
http://localhost:8888/cmens-tops-outwear/t-b-f-a-c-s-fLoose-p-g-e-i-o.htm?'"--></style></script><script>netsparker(0x0000E1)</script>= 
```

`Tomcat6.0.35`我已经设定`URIEncoding="UTF-8"`

`request.getQueryString()`在 servlet 中使用：

如果`chrome`，我得到

```
'%22--%3E%3C/style%3E%3C/script%3E%3Cscript%3Enetsparker(0x0000E1)%3C/script%3E= 
```

如果`ie`，我得到

```
'"--></style></script><script>netsparker(0x0000E1)</script>= 
```

为什么？

**额外的**

我想`request.getQueryString()`创建一个uri

```
URI uri = URI.create(url) 
```

如果即：

```
java.net.URISyntaxException: Illegal character in query at index 36: /cmens/t-b-f-a-c-s-f-p-g-e-i-o.htm?'"--></style></script><script>netsparker(0x0000E1)</script>
    at java.net.URI$Parser.fail(URI.java:2809)
    at java.net.URI$Parser.checkChars(URI.java:2982)
    at java.net.URI$Parser.parseHierarchical(URI.java:3072)
    at java.net.URI$Parser.parse(URI.java:3024)
    at java.net.URI.<init>(URI.java:578)
    at java.net.URI.create(URI.java:840) 
```

**如何判断queryString是否已经编码？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:29:23.400

根据[`HttpServletRequest#getQueryString()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString%28%29)定义未解码。另见[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString%28%29)（重点是我的）：

> ### 回报：
> 
> 一个包含查询字符串的字符串，如果 URL 不包含查询字符串，则为 null。**该值不被容器解码。**

`getParameterXxx()`基本上，如果您出于某种原因想要手动解析它而不是使用方法（隐式解码参数！），您需要自己对其进行 URL 解码。

```
String decodedQueryString = URLDecoder.decode(request.getQueryString(), "UTF-8"); 
```

至于为什么 Chrome 发送它编码而 IE 不发送，那是因为 Chrome 在以安全/正确的方式处理 HTTP 请求方面做得更好。这是你无法控制的。如果您出于某种原因打算手动解析查询字符串，请始终自行对查询字符串进行 URL 解码。该`URIEncoding="UTF-8"`配置仅对`getParameterXxx()`GET 请求期间的方法有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:24:57.093

Chrome 版本是 URLEncoded，而 IE 字符串是解码的。

使用此工具比较 URLEncoded 和解码版本： http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:28:32.810

Chrome 使用的是 URL 编码方式，而 IE 使用的是字符串。

例如： " 在 URL 编码中是 %22。

< 是 %3E 并且 > 是 %3C

Chrome 正在以“正确的方式”做这件事，但 IE 不能像其他所有的那样做。

您可以在此处找到完整的 URL 字符列表：http: [//www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:29:37.043

Chrome 发送编码后的 url。尝试使用解码查询字符串

```
URLDecoder.decode(queryString, "UTF-8"); 
```

如javadoc所述，查询字符串不被容器解码：

> 如果 URL 不包含查询字符串，则返回包含查询字符串的字符串或 null。该值不被容器解码。

[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString%28%29)

# windows - 未修饰的 Microsoft 符号：SomeClass::`vftable'{for `Foo::Bar'}

> ID：15004594
> 
> 赞同：1
> 
> 时间：2013-02-21T14:21:25.793
> 
> 标签：windows, symbols, dbghelp

我正在使用`UnDecorateSymbolNameW`dbghelp 来取消装饰 Microsoft 符号名称。当用 取消装饰时`UNDNAME_COMPLETE`，符号名称有时可以有，我理解的是，一些编译器附加了信息。例如，一个 vftable 符号有时可以有一个大括号块，其中包含一个`for`关键字，后跟一个类/接口名称，例如

> SomeClass::'vftable'{for 'Foo::Bar'}

谁能告诉我`"{for 'Foo::Bar'}"`名字的一部分是什么意思？

此外，是否有人知道有关此的一些文档，所以我可以阅读，因为我找不到任何东西。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:43:24.460

您的类`SomeClass`使用多重继承，并且它有多个带有虚拟方法的基类。因此，`SomeClass`需要多个 vtables（每个基类都有一个虚拟方法）。`{for 'Foo::Bar'}`告诉你你有哪个 vtable 。在这种情况下，它是`Foo::Bar`基类的 vtable。

（这从名字上应该是不言而喻的。）

# javascript - 使用 Javascript 仅刷新收藏夹

> ID：15004603
> 
> 赞同：3
> 
> 时间：2013-02-21T14:21:46.010
> 
> 标签：javascript, user-interface, tridion, tridion-2011

我有一个数据扩展器，可以在请求收藏时修改收藏的标题。但是当我添加一个收藏夹时，只会更新该项目而不调用整个列表。我的问题是如何使用 JavaScript 仅刷新 Tridion 中的收藏夹部分，以便检索整个收藏夹列表并通过我的数据扩展器运行该列表，以便更新标题。

那么如何使用 JavaScript 仅在 Tridion 中刷新收藏夹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T15:07:45.837

`$models.$cme.getShortcuts().getList().unload()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:45:31.177

我没有打开实例进行测试，但在 PowerTools [AddUser](http://code.google.com/p/tridion-2011-power-tools/wiki/AddUser)工具中，我使用以下命令刷新主列表：

```
$display.getView().refreshList(); 
```

我想您可以将视图名称传递给函数以指定要刷新的视图。

工具命令的来源在

[http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/AddUser/AddUserCommand.js](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/AddUser/AddUserCommand.js)

# css - 图标字体在 Opera Mobile 中不起作用

> ID：15004604
> 
> 赞同：1
> 
> 时间：2013-02-21T14:21:52.533
> 
> 标签：css, icons, font-face, webfonts

我开始使用 FontAwesome 集合并在不同的操作系统/浏览器上对其进行测试。
我发现它适用于 IE > 7、Firefox、Chrome、Safari（iPhone、iPad）、Opera Desktop，真的很棒！

只有 Opera Mini 不支持**@font-face**，但 Opera Mobile (v 12.19) 支持。
但它只适用于带有字母的*普通字体。*[FontAwesome](http://fortawesome.github.com/Font-Awesome)或[icnfnt](http://www.icnfnt.com/#/)
等标志性字体不起作用！

我认为原因是，因为图标不使用普通的字母字符。图标字符以十六进制格式描述，（ISO CSS 内容：`i:before {content: "\f000"}`）。我尝试在 HTML 代码中以数字格式描述图标（从十六进制转换为十进制：）`<i>&#61440;</i>`，但这也不起作用。

那么有没有在 Opera Mobile 上显示标志性字体的解决方案？

相关链接：[HTML 字形](http://css-tricks.com/snippets/html/glyphs/)

![在此处输入图像描述](../Images/65a84574d8f627e8fcbaf5ba6949e2a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:30:53.463

我对 Opera Mobile/Opera Mini 也有同样的问题。对我有用的是从 Font Awesome 切换到[Elusive Icons](http://aristeides.com/elusive-iconfont/index.html)。它们也是“为 Bootstrap 构建的”并且具有基本相同的可用图标，当我切换时我什至不必更改任何图标类名称，只需要更改字体文件和 less/css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:47:59.313

> 我发现它适用于 IE > 7 ...

Font-Awesome 带有一个*不*使用`@font-face`. 您是否尝试过包含它以查看它是否也解决了 Opera Mobile 问题？

`font-awesome-ie7.min.css`

# objective-c - 目标 C - 向空的 NSTableView 添加新行

> ID：15004614
> 
> 赞同：2
> 
> 时间：2013-02-21T14:22:40.780
> 
> 标签：objective-c, macos, cocoa, nstableview

我有一个基于视图的 NSTableView，它最初应该是空的。我还有“添加”和“删除”按钮，用于从同一个 NSTableView 添加和删除行。

我的委托方法和添加新行的方法如下所示：

```
#import "PreferencesApiKeysViewController.h"
#import "UserKeys.h"

@interface PreferencesApiKeysViewController ()

@property (weak) IBOutlet NSTableView *keysTableView;

@end

@implementation PreferencesApiKeysViewController
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    // Get a new ViewCell
    NSTableCellView *cellView = [tableView makeViewWithIdentifier:tableColumn.identifier owner:self];

    if([tableColumn.identifier isEqualToString:@"userKeysColumn"]) {
        UserKeys *allKeys = [self.allKeys objectAtIndex:row];
        cellView.textField.stringValue = allKeys.userKeyName;
        return cellView;
    }
    return cellView;
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    NSLog(@"Initial rows: %li", (unsigned long)[self.allKeys count]);
    return [self.allKeys count];
}

- (IBAction)addKey:(id)sender {
    UserKeys *newKey = [[UserKeys alloc] initWithKeyName:@""
                                                   apiID:@""
                                                 apiCode:@"" ];

    [self.allKeys addObject:newKey];
    NSLog(@"Total rows: %li", (unsigned long)self.allKeys.count);
    NSInteger newRowIndex = self.allKeys.count;
    if (newRowIndex == 0) {
        NSLog(@"No rows.");
        newRowIndex = 0;
    } else {
        NSLog(@"Has rows.");
        newRowIndex = self.allKeys.count-1;
    }
    NSLog(@"New Index: %ld", (long)newRowIndex);

    [self.keysTableView insertRowsAtIndexes:[NSIndexSet indexSetWithIndex:newRowIndex] withAnimation:NSTableViewAnimationSlideDown];

    [self.keysTableView selectRowIndexes:[NSIndexSet indexSetWithIndex:newRowIndex] byExtendingSelection:NO];
    [self.keysTableView scrollRowToVisible:newRowIndex];
}

@end 
```

在我的 AppDelegate.m 中，我这样称呼我的观点：

```
#import "AppDelegate.h"
#import "UserKeys.h"
#include "PreferencesApiKeysViewController.h"

@interface  AppDelegate()
@property (nonatomic,strong) IBOutlet PreferencesApiKeysViewController *prefsViewController;
@end

@implementation AppDelegate
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.prefsViewController = [[PreferencesApiKeysViewController alloc] initWithNibName:@"PreferencesApiKeysViewController" bundle:nil];

    // Create few rows as dummy data
    /*
    UserKeys *key1 = [[UserKeys alloc] initWithKeyName:@"key one"
                                                 apiID:@"123"
                                               apiCode:@"xxx" ];

    UserKeys *key2 = [[UserKeys alloc] initWithKeyName:@"key two"
                                                 apiID:@"456"
                                               apiCode:@"yyy" ];
    NSMutableArray *tempKeys = [NSMutableArray arrayWithObjects:key1, key2, nil];
    self.prefsViewController.allKeys = tempKeys;
    */
    // done.

    [self.window.contentView addSubview:self.prefsViewController.view];
    self.prefsViewController.view.frame = ((NSView*)self.window.contentView).bounds;
}

@end 
```

现在，这里的问题是，如果我取消注释在 AppDelegate 中添加虚拟数据的那几行并启动我的应用程序，一切正常。我可以毫无问题地添加/删除行，我什至可以删除所有行，然后再添加一个新行。

但是，如果我再次评论这些行，我的应用程序会从一个空表开始（这是我需要的），当我想添加新行时，我会收到一个错误：

```
*** Assertion failure in -[NSTextFieldCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1187.34/AppKit.subproj/NSCell.m 
```

进一步看线程，我只看到一行引用了我的应用程序：

```
0x0000000100003116 -[PreferencesApiKeysViewController tableView:viewForTableColumn:row:] + 406 
```

我猜如果`allKeys`数组真的不包含任何单个对象，我的 TableView 没有正确实例化，但我不知道如何解决这个问题？如何创建一个空的 NSTableView 并能够在单击“添加”按钮时自己添加第一行（不添加任何虚拟数据`allKeys`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:39:29.930

将此添加到的实现中`PreferencesApiKeysViewController`：

```
@implementation PreferencesApiKeysViewController

- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)bundle {
    if ((self = [super initWithNibName:nibName bundle:bundle])) {
        self.allKeys = [NSMutableArray array];
    }
    return self;
}

// add the following only if not using ARC
- (void)dealloc {
    [_allKeys release];
    [super dealloc];
}

@end 
```

当您允许编译注释掉的代码时发生的事情是您将`NSMutableArray`实例分配给`allKeys`实例变量。因此，添加和删除项目的工作方式与您预期的一样。

Generally, in a case like this, the class that manages the `NSMutableArray` should override the `init` method to make sure the array is properly initialized to an empty array. (By default, non-`IBOutlet` instance variables are initialized to `nil`, which won't allow you to properly add or remove items from it).

# json - 即使在 JSON 文件中存在也找不到名称已更新

> ID：15004615
> 
> 赞同：0
> 
> 时间：2013-02-20T04:18:07.577
> 
> 标签：json, directory, runtime-error, libgdx, auto-update

有一个运行时错误一直告诉我该名称尚未找到。看看这个错误：

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: java.lang.RuntimeException: Name 'lame' was not found.
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:111)
Caused by: java.lang.RuntimeException: Name 'lame' was not found.
    at aurelienribon.bodyeditor.BodyEditorLoader.attachFixture(BodyEditorLoader.java:79)
    at com.bodapps.shootme.physics.controller.BodyPhysicsSettings.setGoalPostBody(BodyPhysicsSettings.java:32)
    at com.bodapps.shootme.view.GameScreen.show(GameScreen.java:273)
    at com.badlogic.gdx.Game.setScreen(Game.java:59)
    at com.bodapps.shootme.Start.create(Start.java:11)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:125)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:108) 
```

此错误来自此代码。看看下面的代码评论。

```
 goalPost1 = wc.getWorld().createBody(def1);
    goalPost1.setActive(true);
    goalPost1.setGravityScale(0);
    goalPostLoader1.attachFixture(goalPost1, "lame", fixtures1, 5); // --> Under the same JSON filenamename and added and updated this name "lame." However, this is where it stops here.

    goalPost2 = wc.getWorld().createBody(def2);
    goalPost2.setActive(true);
    goalPost2.setGravityScale(0);
    goalPostLoader2.attachFixture(goalPost2, "soccer ball", fixtures2, 5); // --> This name, also in the same JSON filename. Even it has a space, it should be worked too. 
```

JSON 文件名“ball Physics.json”，这是我从**物理体编辑器**引擎中获取的。

![在此处输入图像描述](../Images/1974d595e887e174cd7f49986f70c9db.png)

这是 JSON 文件中的代码。

```
{
"rigidBodies":
[
    {
        "name":"soccer ball",
        "imagePath":"../images/soccer ball.png",
        "origin":{"x":0,"y":0},"polygons":[],
        "circles":[{"cx":0.5,"cy":0.5,"r":0.4756574332714081}],
        "shapes":[{"type":"CIRCLE","vertices":[{"x":0.5,"y":0.5},{"x":0.5250000357627869,"y":0.02500000037252903}]}]
    },

    {
        "name":"lame",
        "imagePath":null,
        "origin":{"x":0,"y":0},
        "polygons":[[{"x":0.625,"y":0.05000000074505806},{"x":0.625,"y":0.949999988079071},{"x":0.3499999940395355,"y":0.949999988079071},{"x":0.3499999940395355,"y":0.05000000074505806}]],
        "circles":[],
        "shapes":[{"type":"POLYGON","vertices":[{"x":0.3499999940395355,"y":0.05000000074505806},{"x":0.3499999940395355,"y":0.949999988079071},{"x":0.625,"y":0.949999988079071},{"x":0.625,"y":0.05000000074505806}]}]
    }
],

"dynamicObjects":[]
} 
```

在保存为 JSON 文件的物理体编辑器编辑后，我注册了名称“ **lame ”。**不幸的是，即使我是正确的，编程软件也会欺骗我。请帮我尽快修复它。

**更新问题！（截至 2013 年 4 月 11 日）**

我想知道桌面启动项目文件夹中的资产是否与 Android 启动项目文件夹匹配或与 Android 启动项目文件夹具有相同的目录？如果是这种情况，在项目文件夹（Android starter）的 assets 文件夹中添加的更新文件是否会在 Desktop starter 项目文件夹中自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:38:53.817

由于在桌面启动项目文件夹更新的问题，图像文件和 JSON 文件**不是直接从 Android 的资产自动复制到桌面的资产**！如果出现此问题，我必须手动复制它。这是我能做的唯一最好的事情。从 Android assets 文件夹中，选择指定的文件和目录（文件夹）并将其复制到 Desktop 中的 assets 文件夹中。确保目录和文件名正确。

# sql - 根据列名确定索引

> ID：15004616
> 
> 赞同：1
> 
> 时间：2013-02-21T14:22:45.677
> 
> 标签：sql, sql-server, indexing

有什么方法可以将列名与索引所具有的列名匹配。

因此，例如让我们说 index1 使用列名称、年龄、地址和 index2 使用（在同一个表中）名称、年龄。（全部用于一个特定的表）

如果我将名称、年龄和表名传递给存储过程，我应该编写什么查询，它将返回 index2 而不是 index1。

我遇到了许多关于如何列出具有索引和表名的列的示例，例如：

[我们如何检查该表是否有索引？](https://stackoverflow.com/questions/2735963/how-can-we-check-that-table-have-index-or-not)

但仍然有问题为我的使用编写 sql 查询。

任何帮助将非常感激，

谢谢

（这适用于 Microsoft sql server 2008 - 2012）

这是我写的，它不能正常工作，因此问题

```
select index1.name,sys.tables.name, Stuff((SELECT ',' + sys.columns.name AS [text()]
FROM
(
     select sys.columns.name
     from sys.columns
     inner join sys.index_columns On sys.index_columns.index_column_id=sys.columns.column_id
     inner join sys.indexes on sys.indexes.index_id=sys.index_columns.index_id 
     where sys.indexes.index_id=index1.index_id
) x
For XML PATH (''), type ).value('(./text())[1]','NVARCHAR(MAX)'),1,1,'') As coLName
from sys.indexes as index1 
inner join sys.tables on sys.tables.object_id=index1.object_id
inner join sys.index_columns On index1.index_id=sys.index_columns.index_id  AND sys.index_columns.object_id = sys.tables.object_id
inner join sys.columns on sys.columns.column_id=sys.index_columns.column_id And sys.columns.object_id=sys.tables.object_id
where sys.tables.name=TABLE_NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:16:16.537

[您可以使用CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)尝试此查询

```
 DECLARE @searchIndex nvarchar(100) = 'name,age',
         @tableName nvarchar(100) = 'your_tableName'
;WITH cte AS
 (
  SELECT i.name AS index_name, c.name      
  FROM sys.indexes i LEFT JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
                     LEFT JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
  WHERE i.object_id = OBJECT_ID(@tableName) AND ic.is_included_column != 1
  ), cte2 AS
 (
  SELECT c2.index_name, 
    STUFF((SELECT ',' + c.name
           FROM cte c
           WHERE c.index_name = c2.index_name
  FOR XML PATH, TYPE).value('.[1]', 'nvarchar(max)'), 1, 1, '') [columns]
  FROM cte c2
  GROUP BY c2.index_name 
  )
  SELECT *
  FROM cte2
  WHERE [columns] = @searchIndex 
```

在第二种情况下，无论顺序指定列和空间

```
DECLARE @searchIndex nvarchar(100) = '  age, name' ,
        @tableName nvarchar (100) = 'your_tableName'       
;WITH ParsSearchIndex AS
 (
  SELECT SUBSTRING(@searchIndex , 0 , CHARINDEX ( ',' , @searchIndex )) AS val ,
         CAST(STUFF (@searchIndex + ',' , 1, CHARINDEX( ',', @searchIndex), '') AS nvarchar (100 )) AS stval        
  UNION ALL
  SELECT LTRIM(SUBSTRING (stval , 0, CHARINDEX( ',', stval))),
         CAST(STUFF (stval , 1, CHARINDEX( ',' , stval ), '' ) AS nvarchar(100 ))        
  FROM ParsSearchIndex
  WHERE stval != ''
  ), max_ParsSearchIndex AS
 (
  SELECT val, COUNT(*) OVER() AS cnt
  FROM ParsSearchIndex
  WHERE val != ''
  ), cte AS
 (
  SELECT i.name AS index_name, c.name , ic .is_included_column,
         MAX(ic .index_column_id) OVER( PARTITION BY i. index_id) AS maxIndex_column_id
  FROM sys.indexes i LEFT JOIN sys. index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
                     LEFT JOIN sys. columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
  WHERE i.object_id = OBJECT_ID(@tableName )
  ), cte2 AS
 (
  SELECT c2.index_name , COUNT (*) AS cnt, c2\. maxIndex_column_id,
    STUFF((SELECT ',' + c .name
           FROM cte c
           WHERE c .index_name = c2 .index_name        
  FOR XML PATH , TYPE ).value( '.[1]', 'nvarchar(max)'), 1 , 1, '') [columns]
  FROM cte c2
  WHERE c2.is_included_column != 1 AND EXISTS (
                         SELECT 1
                         FROM max_ParsSearchIndex p
                         WHERE c2 .name = p .val AND p .cnt = c2.maxIndex_column_id
                         )
  GROUP BY c2 .index_name, c2\. maxIndex_column_id
  )
  SELECT index_name, [columns]
  FROM cte2
  WHERE cnt = maxIndex_column_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:29:52.670

这对我有用。

```
DECLARE @searchIndex nvarchar(100) = 'age,name',
        @schemeName nvarchar(100) = 'dbo',
        @tableName nvarchar(100) = 'tableName'

SELECT
    name
FROM (SELECT
    indexes.name,
    (SELECT
            c1.name + ','
    FROM sys.schemas s1
    INNER JOIN sys.tables t1
        ON s1.schema_id = t1.schema_id
        AND tables.object_id = t1.object_id
    INNER JOIN sys.columns c1
        ON t1.object_id = c1.object_id
    INNER JOIN sys.indexes i1
        ON t1.object_id = i1.object_id
        AND indexes.index_id = i1.index_id
    INNER JOIN sys.index_columns ic1
        ON t1.object_id = ic1.object_id
        AND i1.index_id = ic1.index_id
        AND c1.column_id = ic1.column_id
    WHERE schemas.schema_id = s1.schema_id
    ORDER BY c1.name
    FOR xml PATH (''))
    AS colName
FROM sys.schemas
INNER JOIN sys.tables
    ON schemas.schema_id = tables.schema_id
    AND tables.name = @tableName
INNER JOIN sys.indexes
    ON tables.object_id = indexes.object_id
WHERE schemas.name = @schemeName) A
WHERE A.colName = @searchIndex + ',' 
```

# jquery - jQuery中的两个斜杠是什么意思

> ID：15004618
> 
> 赞同：3
> 
> 时间：2013-02-21T14:22:48.950
> 
> 标签：jquery, syntax

有人可以解释这行 jQuery 吗？我不确定斜线是什么意思：

```
var age=$('#main\\:mainForm\\:months').val(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T14:25:19.903

从[文档](http://api.jquery.com/category/selectors/)中：

> 要将任何元字符（例如 `!"#$%&'()*+,./:;<=>?@[\]^`{|}~`）用作名称的文字部分，必须使用两个反斜杠对其进行转义：`\\`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:25:59.317

它是转义字符，所以它的意思是使用文字`:`值，所以寻找一个元素`id="main:mainForm:months"`

有关更多信息，请参阅[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:26:01.727

因为它们是反斜杠，所以第一个反斜杠转义了第二个反斜杠，因此字符串的实际内容计算为：

```
#main\:mainForm\:months 
```

该`:`字符在选择中具有特殊含义。它允许自定义表达式，例如`:nth-child()`. 使用`\`字符转义`:`允许您选择具有`[id]`属性的元素`#main:mainForm:months`

# ios - GPUImage：YUV 或 RGBA 对性能的影响？

> ID：15004621
> 
> 赞同：2
> 
> 时间：2013-02-21T14:23:03.950
> 
> 标签：ios, image-processing, gpuimage

我正在做一些静态图像处理，GPUImage 是一个非常棒的框架（感谢 Brad Larson！）。

我明白那个 ：

*   某些过滤器只需 1 个组件即可完成。在这种情况下，图像应该是 YUV（YCbCr），我们只使用 Y（luma = 图像灰度级）。
*   其他滤镜需要来自 3 个组件（R、G 和 B）的所有颜色信息。
*   提供 YUV -> RGB 转换（在 中`GPUVideoCamera`），RGB -> YUV 可以硬编码到片段着色器中（例如`GPUImageChromaKeyFilter`：）

我有很多图像处理步骤，有些可以基于 YUV，有些可以基于 RGB。基本上，我想混合 RGB 和 YUV 滤镜，所以我的一般问题是：

这种连续转换的成本/信息损失是多少，您会推荐任何设计吗？

谢谢！

（PS：iPhone4 YUV->RGB 转换和`AVCaptureStillImageOutput`像素格式有什么问题？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T00:12:30.283

在 GPUImage 中使用 YUV 是一个相当新的补充，我仍在尝试。我想引入 YUV 来尝试提高过滤器性能，减少内存使用，并可能提高色彩保真度。到目前为止，我的修改只实现了这三个之一。

如您所见，我从相机中提取 YUV 帧，然后决定在过滤器管道的后续阶段如何处理它们。如果相机输入目标的所有过滤器都只需要单色输入，则相机输入将仅在管道上发送未处理的 Y 通道纹理。如果任何滤镜需要 RGB 输入，相机输入将执行从 YUV->RGB 的基于着色器的转换。

对于采用单色的滤镜，这可以通过消除 RGB 转换阶段（由 AV Foundation 在请求 BGRA 数据时或在我的转换着色器中完成）以及将 RGB 冗余转换回亮度。在 iPhone 4 上，在 720p 帧上运行的 Sobel 边缘检测滤波器的性能从 RGB 输入的每帧 36.0 ms 到使用直接 Y 通道的 15.1 ms。这也避免了由于从将 YUV 转换为 RGB 并返回到亮度的舍入而导致的轻微信息丢失。8 位颜色通道只有这么多的动态范围。

即使在使用 RGB 输入时，这种转换从 AV Foundation 转移到我的着色器中也会带来性能上的提升。在 iPhone 4S 上，使用我的转换着色器而不是 AV Foundation 的内置 BGRA 输出，针对 1080p 输入运行饱和过滤器从每帧 2.2 毫秒下降到每帧 1.5 毫秒。

两种 RGB 方法的内存消耗几乎相同，因此我正在尝试一种改进方法。对于单色输入，由于输入的纹理尺寸较小，内存使用量显着下降。

实现全 YUV 管道更具挑战性，因为您需要为 Y 和 UV 平面维护并行渲染路径和着色器，并为两者提供单独的输入和输出纹理。从 RGB 中提取平面 YUV 很棘手，因为您需要以某种方式从一个输入中提取两个输出，而 OpenGL ES 本身并不支持这些输出。您需要进行两次渲染通道，这是相当浪费的。交错的 YUV444 作为多级管道的颜色格式可能更实用，但我还没有玩过这个。

再说一次，我才刚刚开始修补这个。

# gruntjs - 列出 grunt.js 任务

> ID：15004624
> 
> 赞同：87
> 
> 时间：2013-02-21T14:23:08.427
> 
> 标签：gruntjs

我正在尝试弄清楚如何打印所有可用的 grunt 任务的列表。使用 rake 将是：

`$ rake -T`

咕噜声的等价物是什么？例如

`$ grunt -T`

*   连接
*   茉莉花
*   缩小

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-21T19:49:37.263

`grunt --help`列出可用的任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-27T15:41:56.633

sh/bash 中列表的解决方法，以防您需要触发某些内容并且无法修改原始代码：

```
grunt -h --no-color | sed -n '/^Available tasks/,/^$/ {s/^  *\([^ ]\+\)  [^ ]\+.*$/\1/p}' 
```

# php - 如何判断是单击鼠标还是按下键盘

> ID：15004625
> 
> 赞同：1
> 
> 时间：2013-02-21T14:23:10.443
> 
> 标签：php, javascript, jquery, html

我想检查鼠标是点击还是按键。
就像如果我单击某些东西，我可以将 Timer 设置回零。或按任意键，同样操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:26:19.813

使用 jQuery，绑定`keypress`和`click`事件到文档：

```
$(document).on('keypress click', function(e) {
    //reset timer to 0
}); 
```

阅读[API 文档](http://api.jquery.com/on/)以获取`.on()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:26:20.813

使用 jQuery 库提供的按键和单击事件。您的事件应该与 DOM 中的元素相关联

参考

[http://api.jquery.com/click/](http://api.jquery.com/click/)

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:26:51.780

如果您希望在单个函数中同时实现这两个功能，则可以只使用涵盖鼠标单击和键盘输入的提交事件监听器。

# powershell - 在 powershell 脚本中使用“开始于”而不是包含？

> ID：15004627
> 
> 赞同：1
> 
> 时间：2013-02-21T14:23:16.027
> 
> 标签：powershell, hashtable

在我当前的 powershell 脚本中，我有带有值的哈希表。我正在使用这种语法

```
$x = $f.contains("$k") 
```

但我最近发现这种方法有问题我想知道powershell是否有一些说“开始于”或相关的东西，它会通过哈希表搜索“开始于”而不是`contains`

哈希表示例：

```
"bio.txt" = "server1\datafiles\bio";
etc....... 
```

**编辑**评论中的样本

```
foreach ($key in $filehash.keys) { 
    $path = $filehash.get_Item($key)
    $filecount = 0
    foreach ($file in $FileArray) { 
        if ($file.LastWriteTime -lt($(GetDate).adddays(-1))) { 
            [string] $k = $key.ToLower()
            [string] $f = $file.name.ToLower() 
            if ($x = $f.contains("$k")) { } 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:54:37.260

尝试使用`-like`检查字符串是否以`yourvalue`. 我在评论中重写了您的示例以使用它：

```
$filehash.GetEnumerator() | foreach {
    #$_ is now current object from hashtable(like foreach)
    #$_.key is key and $_.value is path
    $filecount = 0
    foreach ($file in $FileArray) {
        if ( ($file.LastWriteTime -lt $((Get-Date).AddDays(-1))) -and ($file.name -like "$($_.Key)*") ) {
            #process file

        }
    }
} 
```

# facebook - 从 Facebook 全球页面的子页面获取粉丝数

> ID：15004632
> 
> 赞同：2
> 
> 时间：2013-02-21T14:23:29.250
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-page

有一种方法可以从全球 Facebook 页面的子页面中检索粉丝数，例如使用经典 API-FB 图？

因为有了 FB 最近实施的这个新功能（我认为是 2012 年 11 月），所有子页面的粉丝数都等于全局页面（然后是所有子页面的粉丝数之和）。

比如下面的FB页面（FB-marketing的页面），在开发者API-tester（[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)）中执行这个查询，我们可以看到这个页面是一个全局页面并有孩子。但是，当我们用 opengraph 打开其中一个孩子时，粉丝数等于父“全局页面”。

示例的 FQL 查询：

```
SELECT global_brand_child_page_id FROM page_global_brand_child WHERE parent_page_id=74100576336 
```

任何人都找到了一个解决方案，只为孩子们检索粉丝数（或页面的点赞数）？

# apache-camel - 意外的Bindy行为 - 骆驼

> ID：15004636
> 
> 赞同：0
> 
> 时间：2013-02-21T14:23:35.637
> 
> 标签：apache-camel

使用 bindy 时，我创建了一个提供无效 CSV 输入的测试。查看文档（[http://camel.apache.org/bindy.html](http://camel.apache.org/bindy.html)）时，它指出：

```
If this field is not present in the record, than an error will be raised by the parser with the following information :
Some fields are missing (optional or mandatory), line : 
```

但是当我运行我的测试时，无效行会被忽略，不会引发错误。我声明了三个必填字段，所以我预计会出现错误......我做错了什么？

巴里

这里有一些代码片段来澄清

路线

```
@Override
protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder() {
        @Override
        public void configure() throws Exception {

            JaxbDataFormat xmlFormat = new JaxbDataFormat();
            xmlFormat.setContextPath("be.smals.dp.asktutor.response");
            BindyCsvDataFormat csvFormat = new BindyCsvDataFormat ("be.smals.dp.asktutor.response");
            context.setTracing(true);

            from("direct:marshall")
                    .wireTap("log:test")
                    .unmarshal(csvFormat)
                    .to("mock:marshall");

            from("direct:unmarshall")
                    .marshal(xmlFormat)
                    .wireTap("log:test")
                    .to("mock:unmarshall");

        }
    };
} 
```

我测试的一部分

```
@Test
public void testTransformFromCSVToXML() throws Exception {

    // Create CSV input and process it
    String payload = AskTutorResponseCSVMother.getInvalidCSVLines();
    template.sendBody("direct:marshall", payload);

    AskTutorsResponse askTutorsResponse = 
        ExchangeToObjectHelper.getAskTutorsResponseObjectFromExchange(
            mockMarshall.getExchanges().get(0));
    assertEquals("00000000123", askTutorsResponse.getAskTutorResponses().get(0).getSsinChild()); 
```

输入 csv 字符串

```
public static String getInvalidCSVLines () {
    String payload = "";
    payload += "00000000321;20121212" + NEWLINE;
    payload += "10000000123;10000000321;20131010" + NEWLINE;
    payload += "20000000123;20000000321;20100909" + NEWLINE;
    return payload;        
} 
```

还有我的（直截了当的）绑定：

```
@XmlType
@XmlAccessorType(XmlAccessType.NONE)
@CsvRecord(separator = ";", skipFirstLine = false)
public class AskTutorResponse {

    @DataField(pos = 1, required = true)
    @XmlElement(name = "SINNChild", required = true)
    private String ssinChild;

    @DataField(pos = 2)
    @XmlElement(name = "SINNTutor", required = true)
    private String ssinTutor;

    @DataField(pos = 3)
    @XmlElement(name = "date", required = true)
    private String date; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T23:17:45.210

我遇到了在同一个包中具有绑定注释的多个类无法正确解组的问题。原因是 bindy 试图将每个 CSV 行解组为每个带注释的类的实例。我的第一个解决方法是将每个绑定类放入自己的包中。从那以后，我编写了自己的绑定数据格式，允许将单个类指定为解组目标。[这是代码。](https://stackoverflow.com/questions/16408839/can-i-have-multiple-bindy-annotated-classes-in-a-package-and-still-unmarshal-csv/16408840#16408840)

# php - 如何从两个表中选择并从一个表中仅显示一项，从第二个表中显示许多项？

> ID：15004643
> 
> 赞同：0
> 
> 时间：2013-02-21T14:23:48.470
> 
> 标签：php, mysql

我有两个表用户和图像表我只想选择图像表中的个人资料图片，在用户表中我可以选择 3 个字段。我尝试使用内部连接，但看不到没有显示图像，也没有错误。下面是我的代码

```
<?Php
$target = "image_uploads/";
$image_name = (isset($_POST['image_name']));
$query ="select * from
 tish_user inner join tish_images
 on tish_user.user_id = tish_images.user_id";
    $result= $con->prepare($query);
    $result->execute();

$table = <<<ENDHTML
<div style ="text-align:center;">
<h2>Client Review Software</h2>
<table id ="heredoc" border ="0" cellpaddinig="2" cellspacing="2" style = "width:100%"  ;
margin-left:auto; margin-right: auto;>
<tr>
<th>Name</th>
<th>Last Name</th>
<th>Ref No</th>
<th>Cell</th>
<th>Picture</th>
</tr>
ENDHTML;

while($row = $result->fetch(PDO::FETCH_ASSOC)){
    $date_created = $row['date_created'];
        $user_id = $row['user_id'];
        $username = $row['username'];

        $image_id = $row['image_id'];

        #this is the Tannery  operator to replace a pic when an id do not have one
$photo = ($row['image_name']== null)? "me.png":$row['image_name'];
#display image 

$table .=  <<<ENDINFO
<tr>
<td><a href ="client_details.php?user_id=$user_id">$username </a></td>
<td>$image_id</td>
<td></td>
<td>c</td>
<td><img src="'.$target.$photo.'" width="100" height="100">
</td>
</tr>
ENDINFO;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:51:31.117

我真的看不出上面的代码有什么问题，所以检查几件事。

1.  您可以 var_dump() 查询结果或在工作台等编辑器中运行查询吗？当您这样做时，image_uploads 中是否有与您在 image_name 字段中看到的值相对应的图像，包括？

2.  image_uploads 是包含此 php 页面的文件夹的子文件夹吗？这可能是一个显而易见的问题，但有时就像这样简单。

3.  还是行不通？然后请在您的问题中发布查询结果的前几行，我会看看是否可以进一步帮助您。

# web-applications - 在 netbeans 和 tomcat 中将 solr 与 java web 应用程序一起使用

> ID：15004644
> 
> 赞同：0
> 
> 时间：2013-02-21T14:23:50.157
> 
> 标签：web-applications, netbeans, solr

我正在使用使用 Apache Tomcat 的 netbeans 开发一个小型 Java Web 应用程序。

我让 solr 运行，我可以进行查询。但它在不同的端口（8983）上作为单独的应用程序运行。因此，当我通过 java 脚本从我的 Web 应用程序查询此应用程序时，我得到了 CORS 错误。我知道这个错误的原因是跨域策略。所以我想知道如何使用 netbeans 使 solr 和我的 web 应用程序作为一个完整的单个应用程序工作。此外，我不允许更改服务器策略以接受来自某些不同域的请求。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:12:53.410

您可以考虑使用 JSONP 绕过 CORS 问题。有关如何使用 JSONP 查询 Solr 的示例，请参阅[Solr with JSONP with JQuery 。](http://skipperkongen.dk/2011/01/11/solr-with-jsonp-with-jquery/)

**更新：**

由于 JSONP 在您的方案中不是一个选项，因此使它们成为单个应用程序的方法是使用作为 SolrJ Java 客户端一部分的[EmbeddedSolrServer 。](http://wiki.apache.org/solr/Solrj#EmbeddedSolrServer)

# ruby-on-rails-3 - 用于#的未定义方法“选择器” 使用 mongoid 保存记录时

> ID：15004645
> 
> 赞同：0
> 
> 时间：2013-02-21T14:23:52.153
> 
> 标签：ruby-on-rails-3, mongodb, mongoid, ruby-1.9.2

```
undefined method `selector' for #<ActiveRecord::Relation:0xbb8710c> 
```

尝试执行以下代码时出现此错误：

```
c = Content.first
c.is_processed = true
c.save # or c.update_attributes(:is_processed => true) 
```

我的内容模型如下所示：

```
class Content
  include Mongoid::Document

  field :username 
  field :name
  filed :is_processed, :type => Boolean

  belongs_to :language
  has_many :translations    
end 
```

我正在使用 Mongoid 2.4、bson_ext 1.5、Ruby 1.9.2、Rails 3.2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:59:45.647

我发现了错误。我的内容模型有这一行：

```
has_many :translations 
```

我已将内容模型从 ActiveRecord 迁移到 Mongoid。但是，所有其他表仍在 ActiveRecord 中。`has_many`指的是 ActiveRecord 模型。这导致了这个问题。我评论了这条线，现在更新工作正常。

# objective-c - 如何使用 Cocoa 自动布局在 NSTableCellView 中满足无边距

> ID：15004650
> 
> 赞同：0
> 
> 时间：2013-02-21T14:24:02.677
> 
> 标签：objective-c, macos, cocoa, autolayout

我创建了一个自定义 NSTableCellView，其中一些子视图使用 Cocoa 自动布局对齐。除了我将 NSOutlineView（使用自定义 NSTableCellView）放在 NSSplitView 中之外，没有什么不好的。

当我尝试折叠自定义 NSTableCellView 始终无法满足水平约束的 splitView 时，会出现问题，详细而言，_imageView 和 _textField 之间的“-”字符指定的边距不为零长度。

水平约束如下所示：

```
[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_imageView]-[_textField]|"
                                                                 options:NSLayoutAttributeNotAnAttribute
                                                                 metrics:nil
                                                                   views:NSDictionaryOfVariableBindings(_imageView, _textField)]]; 
```

有人知道如何使 _imageView 和 _textField 之间的边距灵活吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:18:02.667

您可以使用`H:|[_imageView]-(<=8)-[_textField]|`使边距灵活。或者您可以保留约束并在需要折叠拆分视图时将其删除

# apache - Mod rewrite 在 localhost 上将 url 从小写改写为大写

> ID：15004654
> 
> 赞同：0
> 
> 时间：2013-02-21T14:24:11.353
> 
> 标签：apache, mod-rewrite

因此，如果我有一个**名为 CONTENT**的目录和类似 localhost/ **content** /something 的 url。MR 将 url 重写为 www.localhost/ **CONTENT** /something。我不在规则和 !-f 和 !-d cond 中使用 nc 标志。对此没有影响（无论是否在评论中都是一样的）。我的 .htaccess 看起来像这样：

```
Options +FollowSymlinks
RewriteEngine on

#ignore all real files (php skripts, imgs, styles)
RewriteCond %{REQUEST_FILENAME} !-f

#ignore all real directories
#RewriteCond %{REQUEST_FILENAME} !-d  

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/myCMS/$1 [R=301,L]  # localhost
######RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]  # real hosting

RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
#####RewriteRule ^(.*)$ indexTest.php?url=$1 [L,QSA] 
```

httpd.conf 中是否有一些设置默认大小写？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:58:57.707

我发现原因是 Windows 不对目录名称进行区分大小写的比较。因此，如果他应该找到“contend”并且有一个名为“CONTEND”的真实目录，他会使用 UC 目录名称来处理其他所有内容。

# c# - ASP.NET AJAX 控件工具包选项卡控件不显示

> ID：15004655
> 
> 赞同：1
> 
> 时间：2013-02-21T14:24:11.747
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有以下标签控制代码

```
<asp:TabContainer ID="exteriorDataTabsContainer" runat="server" Height="150px" Width="400px" ActiveTabIndex="1" style="visibility:visible">
                        <asp:TabPanel HeaderText = "Create task" >
                        <ContentTemplate>
                        create task
                        </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel HeaderText = "Upload task data">
                        <ContentTemplate>
                        upload task data
                        </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel HeaderText = "Download task data" >
                        <ContentTemplate>
                        download task data
                        </ContentTemplate>
                        </asp:TabPanel>
                        </asp:TabContainer> 
```

当它被渲染时，它看起来像

```
<div id="ctl00_ContentPlaceHolder1_exteriorDataTabsContainer" class="ajax__tab_xp" style="width:400px;visibility:hidden;">
    <div id="ctl00_ContentPlaceHolder1_exteriorDataTabsContainer_header" class="ajax__tab_header">

    </div><div id="ctl00_ContentPlaceHolder1_exteriorDataTabsContainer_body" class="ajax__tab_body" style="height:150px;display:block;"> 
```

为什么 div 隐藏在那里？如何让它可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:55:05.487

添加`runat="server"`到您的 `asp:TabPanel`

试试这个：

```
<asp:TabContainer ID="exteriorDataTabsContainer"  ActiveTabIndex="1" runat="server" Height="150px" Width="400px" style="visibility:visible">
                        <asp:TabPanel HeaderText = "Create task" runat="server" ID="a1"   >
                        <ContentTemplate>

                        create task
                        </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel HeaderText = "Upload task data" runat="server" ID="a2" >
                        <ContentTemplate>
                        upload task data
                        </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel HeaderText = "Download task data" runat="server" ID="a3" >
                        <ContentTemplate>
                        download task data
                        </ContentTemplate>
                        </asp:TabPanel>
                        </asp:TabContainer> 
```

# java - 如何在 Eclipse RCP 中创建自定义 UI 构建器

> ID：15004669
> 
> 赞同：1
> 
> 时间：2013-02-21T14:24:48.363
> 
> 标签：java, user-interface, swt, eclipse-rcp, builder

我有一个基于 Eclipse RCP 的应用程序，我希望它创建自定义 UI 构建器，最终用户可以在其中创建自己的仪表板（视图），其中将包含各种仪表、按钮、文本等。我​​只想像一些实现了几个 UI 构建器（类似于[WindowBuilder SWT](http://www.eclipse.org/windowbuilder/)），即包含带有 UI 元素的调色板、属性元素 UI 构建器等。结果将存储在一个 XML 文件中，该文件将加载 RCP 应用程序和这个 XML 文件应该创建视图。不幸的是，我不知道从哪里开始（有什么问题），创建自定义 UI 构建器的示例？

**编辑：**我已经完成了一个 UI 构建器，所以我是一个完整的初学者，但我想写一个新的更好的。保存/加载xml文件不需要解决。困扰我（不知道怎么做）的是实际的 UI 构建器，即创建一个调色板 UI 元素，使用鼠标复制和移动元素，选择多个元素（移动）等。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:42:03.773

我有一个非常相似的要求，但我没有使用 RCP。我了解您希望将创建的 UI 的结构保存在一个 XML 中，然后在您想再次加载 UI 时加载该结构。所以我认为，如果您使用 XML，则必须为代表 UI 的 XML 标准文档使用模式或 XSD 模板。定义 UI 中允许的元素，示例：按钮、文本字段、标签等。您需要有一个定义明确的模板，因为无论何时编写 xml 或读取 xml，它都必须尽可能标准。

如果你和xsd相处不好，你可以先定义你的xml，然后使用xsd生成器，网上有很多。

例如：

```
<UIBuilder>
<ownerProperties>
<username>Marcelo Tataje</username>
</ownerProperties>
<ui>
<header>
<textlabel label="Welcome" />
</header>
<menu>
<button label="Home" name="btnHome">goHome()</button>
<button label="Contacts" name="btnContacts">showContacts()</button>
</menu>
<mainFrame>
<textfield label="Name:" name="txtName" canEdit=false />
<button label="Show name" name="btnProcess">processData()</button>
</mainFrame>
<footer></footer>
</ui>
<UIBuilder> 
```

基于此，您可以创建一个模式：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="UIBuilder">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ownerProperties">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="username"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="ui">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="header">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="textlabel">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="label"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="menu">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="button" maxOccurs="unbounded" minOccurs="0">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="label" use="optional"/>
                            <xs:attribute type="xs:string" name="name" use="optional"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="mainFrame">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="textfield">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="label"/>
                            <xs:attribute type="xs:string" name="name"/>
                            <xs:attribute type="xs:string" name="canEdit"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="button">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute type="xs:string" name="label"/>
                            <xs:attribute type="xs:string" name="name"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element type="xs:string" name="footer"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我用[http://www.freeformatter.com/xsd-generator.html](http://www.freeformatter.com/xsd-generator.html)

并使用 Jaxb 创建逻辑处理以创建基于定义的格式良好的 XML 文档的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:46:49.233

[一个人通过将一个大项目分解](http://en.wikipedia.org/wiki/Decomposition_%28computer_science%29)成越来越小的部分来开始一个大项目，直到你可以为一个部分编写代码。

您可以从底部开始向上工作，也可以从顶部开始向下工作。

这里有几个问题可以帮助你分解。

您的项目将支持哪些组件（仪表、按钮、文本等）？

一个用户有多少个不同的组件可用于一个面板？

就编码而言，继续设置一个带有多面板编辑器的 Eclipse RCP 项目。

# jquery - KineticJs 更改图像对象

> ID：15004671
> 
> 赞同：0
> 
> 时间：2013-02-21T14:24:54.177
> 
> 标签：jquery, kineticjs

当用户在下拉菜单中选择一个项目时，我正在尝试用新图像替换 kineticJS 舞台/图层上的现有图像对象。下面的代码有效，但是当图像被 #template_select 更改时，原始图像看起来并没有被删除，新图像只是被添加。

再次......非常感谢，

托德

KineticJS：

```
 var stage = new Kinetic.Stage({
        container: 'tag_canvas',
        width: 306,
        height: 306
    });

    var layer = new Kinetic.Layer();
    var imageObj = new Image();

    var kinetic_common_name = new Kinetic.Text({
        x: 30,
        y: 40,
        text: commonname,
        fontSize: commonFontSize,
        fontFamily: commonFont,
        fill: 'green',
        draggable: true
    });
    var kinetic_botanical_name = new Kinetic.Text({
        x: 80,
        y: 115,
        text: latinname,
        fontSize: latinFontSize,
        fontFamily: latinFont,
        fill: 'green',
        draggable: true
    });

    imageObj.onload = function() {

        var template_image = new Kinetic.Image({
            x: 0,
            y: 0,
            image: imageObj,
        });

        // add the shape to the layer
        layer.add(template_image);
        layer.add(kinetic_common_name);
        layer.add(kinetic_botanical_name);

        // add the layer to the stage
        stage.add(layer);

    contextt.translate(306, 0);
    contextt.scale(-1, 1);

    contextt.drawImage(newRev, 0, 0);

    }; //END imageObj.onload
    imageObj.src = getTemplatePath(tag_template);

    var canvass = document.getElementById('reverse_tag_canvas');
    var contextt = canvass.getContext('2d');
    var newRev = layer.getCanvas().getElement();

  layer.afterDraw(function(){
        contextt.drawImage(newRev, 0, 0); //redraw reverse image
  });

    //change template
  $("#template_select").change(function(){
        imageObj.src = getTemplatePath($(this).val());
    layer.draw();

  }); 
```

HTML

```
Choose a template: 
<select id="template_select" name="template_select">
  <option value="sm_oval">Small Oval</option>
  <option value="lg_oval">Large Oval</option>
  <option value="xlg_oval">Extra Large Oval</option>
  <option value="hibiscus">Hibiscus</option>
</select> 
```

我通常不喜欢把我的网址放在上面，但是 js fiddle 似乎不适用于 kinetic js。所以你可以在这里尝试模板选择菜单：http: [//planttagmaker.herobo.com/index copy.php](http://planttagmaker.herobo.com/index%20copy.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:28:13.977

让 image.onload 只改变图像而不做其他事情。因此，从该函数中删除所有不必要的代码。

在您的代码中，每当加载图像时，您都会添加形状、图层等等。

这导致了您遇到的问题。

```
imageObj.onload = function() {
    layer.draw();
}; 
```

# wxpython - 将 wxPython 与 Octave 连接以启动 .m 文件

> ID：15004672
> 
> 赞同：0
> 
> 时间：2013-02-21T14:24:55.377
> 
> 标签：wxpython, octave

考虑将 wxPython GUI 与 .m 函数集成 我需要 Octave 来做到这一点吗？如果是这样，我如何将 wxPython 与 octave 接口并访问驻留在我桌面上的 .m 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:27:10.647

Octave 本身听起来像是一种编程语言。如果你想用另一个程序打开一个文件，那么你通常想看看 Python 的 subprocess 模块。你可以在这里阅读：http: [//docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

在 wxPython 的事件处理程序中放置子进程调用非常容易。您只需将按钮绑定到事件（例如 wx.EVT_BUTTON），然后在处理程序中调用子进程。如果 .m 文件用于 MATLAB，那么您也可以使用 subprocess 调用它。MATLAB 的替代方案是 NumPy 和 SciPy 包，但我认为您不能使用它们运行 MATLAB 文件。有关详细信息，请参阅以下文章：[https ://sites.google.com/site/pythonforscientists/python-vs-matlab](https://sites.google.com/site/pythonforscientists/python-vs-matlab)

# java - 带有多个文件的 Spring 3 @ImportResource

> ID：15004674
> 
> 赞同：24
> 
> 时间：2013-02-21T14:24:56.450
> 
> 标签：java, spring, spring-3

我试图找到使用 Spring 3 @ImportResource 注释导入多个 spring xml 上下文文件的语法。

我尝试使用逗号分隔文件名，如下图所示，但这不起作用：

```
@Configuration
@ImportResource("spring-context1.xml", "spring-context2.xml")
public class ConfigClass { } 
```

@ImportResource 的文档说“指示一个**或多个**包含要导入的 bean 定义的资源。” 所以我相信应该有一种方法来指定多个上下文文件。令人惊讶的是，我无法在 Google 上找到任何示例

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-26T15:39:52.130

尝试：

```
@Configuration  
@ImportResource( { "spring-context1.xml", "spring-context2.xml" } )  
public class ConfigClass { } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-03T01:00:45.383

您需要在文件名之前添加类路径

```
@ImportResource(value = { 
    "classpath:file1.xml",
    "classpath:file2.xml"
    }) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-22T16:03:30.757

如果有人在**groovy**项目中使用它，只需添加以供将来参考。

在 groovy 中，正确的语法使用**[] 方括号**。花括号会导致编译错误。请在下面找到示例。

```
@Configuration  
@ImportResource( [ "spring-context1.xml", "spring-context2.xml" ] ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T21:22:59.143

使用 Spring 3 定义多个 spring 资源 spring xml 上下文文件的正确格式`@ImportResource`：

```
@Configuration  
@ImportResource( { "spring-context1.xml", "spring-context2.xml" } ) 
```

# android - 如何在应用程序打开时启动方法

> ID：15004683
> 
> 赞同：0
> 
> 时间：2013-02-21T14:25:22.637
> 
> 标签：android

应用程序打开是否有事件，例如，当我从最后一个应用程序菜单中打开以前通过主键应用程序打开和关闭时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:28:44.140

您绝对应该阅读有关 Android 生命周期的信息：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:14:22.430

一般来说，在谈论应用程序时，您可以实现一个 Application 类，在其中覆盖其 onCreate() 回调方法，该方法在每次应用程序启动时调用。在谈论 Activity 类实例时，使用 Activity 类回调方法来检查当前 Activity 是否进入前台（对用户可见）。例如，您可能需要实现 onResume() 和/或 onStart() 生命周期回调方法............

Android Application 类没有 onResume() 方法。实际上用户看到并与活动交互（即使他们使用对话框或片段）。一般来说，应用程序可能不仅包含活动，还包含服务、内容提供者和广播接收器。因此，如果您愿意，您可以在特定的应用程序类中自己实现 onResume() 方法，并从 Activity 的 onResume()（或 onStart()）中调用它。当然，从应用程序中的每个活动都进行这样的调用并不方便。因此，实现一些 BaseActivity（扩展 Activity）并通过每个应用程序活动对其进行子类化是有意义的。

# c# - SerialPort.GetPortNames()

> ID：15004684
> 
> 赞同：1
> 
> 时间：2013-02-21T14:25:22.250
> 
> 标签：c#, usb

我正在对 COM 端口进行快速测试。我在我的电脑上运行以下代码，但它只将 COM1 添加到组合框中？我的电脑有 6 个 USB 端口，为什么只能找到 1 个？

```
string[] ports = SerialPort.GetPortNames();

foreach (string port in ports)
{

    comboBox1.Items.Add(port);

 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:26:19.160

即使你有一百个，SerialPort 类是用来控制串口资源的，USB 不是串口。

有多个库可以让您对 USB 端口进行编程，但您到底想实现什么？

查看 LibUsbDotNet C# USB 库

[http://sourceforge.net/projects/libusbdotnet/](http://sourceforge.net/projects/libusbdotnet/)

如果您只是想枚举可用的 USB 端口，您可以通过查询 WMI 来做到这一点，有关如何执行此操作的更多详细信息，请参阅此答案：[获取已连接 USB 设备的列表](https://stackoverflow.com/questions/3331043/get-list-of-connected-usb-devices)

# php - 在提交之前获取用户输入值并将其插入表单中的其他位置？

> ID：15004689
> 
> 赞同：0
> 
> 时间：2013-02-21T14:25:30.120
> 
> 标签：php, jquery, wordpress, forms

是否可以在提交之前获取输入值并将其插入表单中的其他位置？

```
<form action="<?php echo get_option('home'); ?>/wp-login.php" method="post" id="login-form">
    <p>Please login.</p>
        <input type="text" placeholder="Username" name="log" id="log" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" />
        <input type="password" placeholder="Password" name="pwd" id="pwd" />
    <p>
        <input name="rememberme" id="rememberme" type="checkbox" checked="checked" value="forever" /> Remember me
    </p>
    <input type="hidden" name="redirect_to" value="<?php echo $_SERVER['REQUEST_URI']; ?>/<?php echo $_POST['log']; ?>" />
    <p>
        <a href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword">Recover password</a>
    </p>                                
    <input type="submit" name="submit" value="LOGIN" class="login-button" />                                
</form> 
```

我想采用用户输入此输入的值：

```
<input type="text" placeholder="Username" name="log" id="log" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" /> 
```

并将值放入此：

```
<input type="hidden" name="redirect_to" value="<?php echo $_SERVER['REQUEST_URI']; ?>/<?php echo $_POST['log']; ?>" /> 
```

我已经通过投入尝试了，`S_POST['log']`但这不起作用。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:41:55.910

您可以在提交之前尝试 JQuery 来分配值。

```
// 1\. Change the type='submit' to type='button'
// 2\. Give new submit button an id, DO NOT USE 'submit' 

$(document).ready(function() {
    $('input#submits').click(function(event) {

        $('input[name="redirect_to"]').val( $('input[id="log"]').val() ); 
        if( $('input[name="redirect_to"]').val() != '' )
           $('form#login-form').submit();

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:57:19.210

如果你要使用 JQuery，你可以像这样设置一个监听器：

```
$("#log").bind('input', function() {
    $("IDofHiddenField").val("www.domain.com" + $("#log").val());
  } 
```

# linq - 对对象数组的 LINQ 查询

> ID：15004694
> 
> 赞同：0
> 
> 时间：2013-02-21T14:25:48.093
> 
> 标签：linq, highcharts

我有一个 Linq 查询，它从数据库中获取一组日期和值，我需要能够使用 JSON 将其推送到 HighCharts 图表中。

我一直在使用我常用的 linqy 东西的查询是这样的：

```
var data = _db.CampaignValues.GroupBy(t => t.ValueDate)
        .Select(g => new GraphValue() { T = g.Key, V = g.Sum(t => t.MessageCount) })
        .OrderBy(g => g.T)
        .Where(g => g.T > start)
        .ToArray()
; 
```

作为背景，我试图将数据提取到 HighCharts“不规则间隔的时间数据”图表中。他们的例子中给出的数据格式是：

```
data: [
    [Date.UTC(1970,  9, 27), 0   ],
    [Date.UTC(1970, 10, 10), 0.6 ],
    [Date.UTC(1970, 10, 18), 0.7 ],
    [Date.UTC(1970, 11,  2), 0.8 ]
] 
```

我的问题是我似乎无法将其转换为 JSON 格式以匹配上述内容。我要么得到引用的值，要么得到布局错误的数组。

我曾尝试在视图中使用 JsonConvert，但现在我受限于我对 JS 和 Linq 的了解。

```
@model IQueryable<GatorWatch.Web.Controllers.GraphValue>
@{
    var data = JsonConvert.SerializeObject(Model.ToList());
}

<script type="text/javascript">

    var chart1;
    $(document).ready(function() {
        chart1 = new Highcharts.Chart({
            //snip
            series: [{
                type: 'line',
                name: 'Messages',
                data: [@Html.Raw(data)]
            }]
        });
    });

<script type="text/javascript"> 
```

但这会创建一个像这样的字符串：

```
data: [[
    {"T":"2013-01-02T00:00:00","V":684112},
    {"T":"2013-01-03T00:00:00","V":524172},
    {"T":"2013-01-04T00:00:00","V":769807},
    {"T":"2013-01-05T00:00:00","V":25076}
]] 
```

另一种方法是使用[DotNet.Highcharts](http://dotnethighcharts.codeplex.com/)库。图书馆给出的例子是数据的形式：

```
var data = new object[,]
    {
        {new DateTime(1970, 9, 27), 0},
        {new DateTime(1970, 10, 10), 0.6},
        {new DateTime(1970, 10, 18), 0.7},
        {new DateTime(1970, 11, 2), 0.8},
    } 
```

* * *

这是我在亚历克斯回答的帮助下提出的解决方案。

在控制器中：

```
private static long ToJavaScriptMilliseconds(DateTime dt)
{
    long datetimeMinTimeTicks = (new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).Ticks;
    return (long)((dt.ToUniversalTime().Ticks - datetimeMinTimeTicks) / 10000);
}

public ActionResult Index()
{
    var v1 = _db.CampaignValues.GroupBy(t => t.ValueDate)
        .Select(g => new GraphValue() { T = g.Key, V = g.Sum(t => t.MessageCount) })
        .Where(g => g.T > start)
        .OrderBy(g => g.T)
        .AsEnumerable()
        .Select(g => new object[] { ToJavaScriptMilliseconds(g.T), g.V })
        .ToArray()
    ;

    return View(v1);

} 
```

然后在视图中：

```
@model object[][]

// snip 

series: [{
    type: 'line',
    name: 'Messages',
    data: @Html.Raw(JsonConvert.SerializeObject(Model))
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:58:47.680

将您`GraphValue`的投影到对象数组中：

```
var data = _db.CampaignValues.GroupBy(t => t.ValueDate)
    .GroupBy(t => t.ValueDate)
    .Select(g => new GraphValue() { T = g.Key, V = g.Sum(t => t.MessageCount) })
    .Where(g => g.T > start)
    .OrderBy(g => g.T)
    .Select(g => new object[] { g.T,  g.V })
    .ToArray(); 
```

注意：排序没有意义，然后过滤相同的数据。最好先过滤，然后订购更少的数据。

# iphone - 首次应用启动时导入核心数据

> ID：15004700
> 
> 赞同：0
> 
> 时间：2013-02-21T14:26:07.443
> 
> 标签：iphone, ios, core-data

我在启动应用时遇到数据导入问题。在第一次启动时，我创建了很多核心数据对象（几乎 400 个对象）。问题是，当我在模拟器中尝试应用程序时，一切似乎都是正确的，但在设备上，由于我的导入，我不得不等待很多时间，也许应用程序崩溃（不是每次都崩溃）。

有人遇到过这个问题吗？我应该尝试使我的导入脚本更高效吗？是否存在一些关于使用 Core Data 导入数据的良好做法？

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:51:58.207

我通常使用与 Gopal 相同的技术。除了文件大小之外，我遇到的唯一缺点是您在发送的数据中发现错误。如果发生这种情况并且您需要修复数据，则需要确定用户数据中是否存在不良数据并进行更新。我在启动时通过检查应用程序的 NSUserDefaults 中的 didUpdateToVersionX 值、查询用户数据存储以查找错误记录、更新相关对象、保存存储和设置偏好标志来处理此问题。

您的种子数据是用户可编辑的还是只读的？如果它是只读的，您应该能够拥有单独的只读和用户可写存储（前者在应用程序包中，后者在 Documents 目录中）。Marcus Zarra在回答另一个问题时[对这种技术做了一篇很好的文章。](https://stackoverflow.com/a/3258480/24168)根据您的设置，它可能涉及一些额外的工作。我想将上述应用程序切换到使用这种技术，但我从来没有机会。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T15:24:29.223

我通常捆绑在应用程序本身中具有初始数据的 sqlite 文件。在应用程序启动时，检查 db 文件是否存在，如果不存在，则将其从捆绑包复制到文档目录或任何位置。

以增加应用程序大小为代价加快启动时间。

# iphone - 如何在 iOS 上正确调用单例类

> ID：15004710
> 
> 赞同：2
> 
> 时间：2013-02-21T14:26:24.820
> 
> 标签：iphone, ios, singleton, shared

我有一个`AppSettingsController`用几个方法命名的单例类。

一般来说，我这样称呼他们：

```
[[AppSettingsController sharedInstance] myMethod]; 
```

这很好。

这是创建实例的方式：

```
+ (id)sharedInstance
{
    static AppSettingsController *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
} 
```

但我正在考虑别的事情。假设我必须循环调用 myMethod 。创建这个单例的局部变量并用这个变量调用这个方法不是更好吗？

```
AppSettingsController *mySharedInstance = [AppSettingsController sharedInstance];
loop
  [mySharedInstance myMethod]; 
```

...而不是直接调用它？

```
loop
  [[AppSettingsController sharedInstance] myMethod]; 
```

哪种方式更有效或两者相等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:32:02.767

`[[AppSettingsController sharedInstance] myMethod];`代码将循环调用两个方法

和

> AppSettingsController *mySharedInstance = [AppSettingsController sharedInstance];
> 循环
> [mySharedInstance myMethod];

只会打电话给一个

在第二种情况下，您正在保存单个方法调用，因此第二种更有效。此外，如果在您的`sharedInstance`方法中您说`4`了更多方法调用和一些初始化语句，那么在这种情况下，您也将保存调用和初始化语句。

* * *

**更新**

编写 sudo 汇编代码（使用 Sudo 汇编器：P）。只需了解这个想法，不要使用确切的汇编代码

```
Case 1:
Loop start:
1 Call method sharedInstance

  [this code step 2-7 will be called only once]
  2 Create a static AppSettingsController *sharedInstance = nil; in sharedInstance method
  3 Create static dispatch_once_t onceToken;
  4 Call dispatch_once
  5 Now dispatch_once takes lock of onceToken (and other task which is not visible for me)
  6 Call [self alloc]
  7 Call [self init]

8 Return from sharedInstance
9 Call myMethod
Loop ends:

Case 2:
1 Call method sharedInstance
2 Create a static AppSettingsController *sharedInstance = nil; in sharedInstance method
3 Create static dispatch_once_t onceToken;
4 Call dispatch_once
5 Now dispatch_once takes lock of onceToken (and other task which is not visible for me)
6 Call [self alloc]
7 Call [self init]
8 Return from sharedInstance
9 Assign sharedInstance value to mySharedInstance variable
Loop starts:
10 Call myMethod
Loop Ends: 
```

在这里你可以清楚地看到你在保存什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:22:04.183

恕我直言，对于大多数情况，这是一个理论上的讨论——当每次在循环中访问 sharedInstance 而不是在循环之前设置局部变量时只访问一次时，您不会感受到更多一级间接的性能影响。

使用您最喜欢的版本（可读性），或者如果您确实关心性能损失，请使用局部变量方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:29:51.953

在我看来，你做的第一件事更好：

```
[[AppSettingsController sharedInstance] myMethod]; 
```

它是一个单例，因为它不需要实例。所以，第一种方法更好。我认为创建一个实例可能比直接调用使用更多的内存，但我不确定这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:33:39.497

去打第二个电话

```
[[AppSettingsController sharedInstance] myMethod]; 
```

因为这种方式被世界使用并且更具可读性。

# django - 表单中缺少的 Django admn 错误 ImproperlyConfigured

> ID：15004711
> 
> 赞同：0
> 
> 时间：2013-02-21T14:26:32.553
> 
> 标签：django, django-admin

尝试在 Django 管理员中列出我的产品时，我收到以下错误消息（见下文）。但是，如您所见，我已经定义了 qr_code。

**在 /admin/products/product/ 'ProductAdmin.fieldsets[4][1]['fields']' 中配置不当是指表单中缺少的字段 'qr_code'。**

**模型.py**

```
class Product(models.Model):
    title = models.CharField(max_length=60)
    qr_url = models.URLField(blank=True)
    qr_image = models.ImageField(
        upload_to="public/uploads/",
        height_field="qr_image_height",
        width_field="qr_image_width",
        null=True,
        blank=True,
        editable=False
    )
    qr_image_height = models.PositiveIntegerField(null=True, blank=True, editable=False)
    qr_image_width = models.PositiveIntegerField(null=True, blank=True, editable=False)

    def __unicode__(self):
        return self.title

    def qr_code(self):
        return '' % self.qr_url
    qr_code.allow_tags = True 
```

**管理员.py**

```
from django.contrib import admin
from models import Product

class ProductAdmin(admin.ModelAdmin):

    list_display = ['title']
    fieldsets = (
        (None, {
            'fields': ('title', 'description', 'active')
        }),
        ('QR Code', {
            'classes': ('collapse',),
            'fields': ('qr_url', 'qr_code')
        }),

    )

admin.site.register(Product, ProductAdmin) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:28:51.777

`qr_code`不能在表单中作为模型上的方法引用。如果您打算在模型管理员的表单中使用它，则必须将其定义为模型字段或表单字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T10:25:22.743

`readonly_fields`在 ProductAdmin 中添加 qr_code 。

```
readonly_fields = ('qr_code') 
```

# ios - 什么是iOS睡眠功能

> ID：15004712
> 
> 赞同：28
> 
> 时间：2013-02-21T14:26:34.540
> 
> 标签：ios, multithreading, sleep

我正在寻找一个函数，它可以让 iOS 上的线程进入 c++ 代码，甚至是 Objective-c 代码，我的编译器无法识别 sleep(0)

谢谢，

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-03-30T01:54:34.527

阻塞 0.5 秒：

```
[NSThread sleepForTimeInterval:.5]; 
```

# java - 是否可以为进化 sql 脚本提供更易读的名称？

> ID：15004713
> 
> 赞同：0
> 
> 时间：2013-02-21T14:26:35.137
> 
> 标签：java, playframework

Play2.x 是否可以为进化 sql 脚本而不是 {1,2,3-N}.sql 提供更具可读性的名称？万一我在其中一个中犯了错误，如果没有 grepping 就很难找到哪里。Fe 1-items-create.sql、2-items-update.sql、3-order-create.sql等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:45:53.263

[根据源文件](https://github.com/playframework/Play20/blob/2.1.0/framework/src/play-jdbc/src/main/scala/play/api/db/evolutions/Evolutions.scala#L101)，不幸的是不能使用其他名称：

```
def updateEvolutionScript(db: String = "default", revision: Int = 1, comment: String = "Generated", ups: String, downs: String)(implicit application: Application) {
    ...
    val evolutions = application.getFile("conf/evolutions/" + db + "/" + revision + ".sql"); 
```

`revision`参数是`Int`类型，而不是`String`。

# multithreading - gwt 用计时器重绘

> ID：15004714
> 
> 赞同：0
> 
> 时间：2013-02-21T14:26:40.263
> 
> 标签：multithreading, gwt, extjs, rpc

我是 GWT 的新手，我遇到了一个大问题。我有一个 gwt/extjs gwt2.2.0 应用程序。我需要建立一个图表，显示每秒传入消息数量的实时信息。系统监视器之类的东西。我发现的唯一方法是添加从服务器调用 messageQueueSize 的代码，并将其添加到区域图中，使用 timer.shedule(1000) 将其添加到计时器块中，并将所有这些添加到

```
$while(true) 
```

堵塞。当我尝试运行我的应用程序时，我的应用程序正在循环（因为 While 占用了所有线程）。请帮我解决这个问题或找到实现这部分应用程序的想法。这是我正在尝试做的代码：

```
$ public class ExampleChart extends ContentPanel{

    ArrayList<String> timeList = new ArrayList<String>();
    ArrayList<Long> queueSize = new ArrayList<Long>();
    private final ServerManagementAsync serverManagementSvc = GWT.create(ServerManagement.class);
      public ContentPanel createChart(final String customerId, boolean warrant){
       setHeading("Messages by domain");
       setFrame(true);
       setSize(550, 400);
       setLayout(new FitLayout());

       String url = "/gxt/chart/open-flash-chart.swf";
       final Chart chart = new Chart(url);

       chart.setBorders(true);

       timeList = getTimeList(timeList);
       while (warrant){
           Timer t = new Timer(){
               public void run(){
                   ExampleChart ec = new ExampleChart();
                   AsyncCallback<Long> ac = new AsyncCallback<Long>() {
                       @Override
                       public void onFailure(Throwable throwable) {
                       }

                       @Override
                       public void onSuccess(Long integer) {
                           timeList = getTimeList(timeList);
                           if (queueSize.size()<11){
                               queueSize.add(integer);
                           } else{
                               for (int i = 0; i<queueSize.size()-1; i++){
                                   queueSize.set(i,queueSize.get(i+1));
                               }
                           }
                           chart.setChartModel(getAreaChart(timeList, queueSize));
                           add(chart);
                           repaint();
                       }
                   };
                   serverManagementSvc.getMessageQueueSize(customerId, ac);
               }
           };
           t.schedule(2000);
       }
       chart.setChartModel(getAreaChart(timeList, queueSize));
       add(chart);
       repaint();
       return this;

    }

    public ArrayList<String> getTimeList(ArrayList<String> TimeList){
        ArrayList<String> timeList = TimeList;
        if (timeList.size() < 11){
            timeList.add(getCurrentTime());
        } else {
            for (int i = 0; i<timeList.size()-1; i++){
                timeList.set(i, timeList.get(i+1));
            }
            timeList.set(10, getCurrentTime());
        }
        return timeList;
    }

    public String getCurrentTime(){
        Date date = new Date();
        String hrs = Integer.toString(date.getHours());
        String min = Integer.toString(date.getMinutes());
        String sec = Integer.toString(date.getSeconds());
        return hrs + ":" + min + ":" + sec;
    }
    public ChartModel getAreaChart(ArrayList<String> dateList, ArrayList<Long> queueSize)
    {
        ChartModel cm = new ChartModel("Messages per domain", "font-size: 14px; font-family: Verdana;");
        cm.setBackgroundColour("#ffffff");
        XAxis xa = new XAxis();
        xa.setLabels(dateList);
        cm.setXAxis(xa);
        AreaChart area1 = new AreaChart();
        area1.setFillAlpha(0.3f);
        area1.setColour("#ff0000");
        area1.setFillColour("#ff0000");
        for (int n = 0; n<queueSize.size(); n++){
                area1.addValues(queueSize.get(n));
        }
        cm.addChartConfig(area1);

        return cm;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:03:45.197

您应该使用**'if(warrant)'**语句而不是**'while(warrant)'**。这里不需要**'While'语句，因为定时器每 2000 毫秒重复执行一次 run() 方法。**

您不应该在不知道前一个是否返回的情况下触发异步调用。

用以下代码块替换您的 while 块。

```
 boolean isAsyncCallReturned = true;
       if (warrant)
       {
             Timer t = new Timer()
             {
                public void run()
                {
                   if( isAsyncCallReturned )
                   {  
                      ExampleChart ec = new ExampleChart();
                      AsyncCallback<Long> ac = new AsyncCallback<Long>() 
                      {
                             @Override
                             public void onFailure(Throwable throwable) 
                             {
                             }

                             @Override
                             public void onSuccess(Long integer) 
                             {
                                    timeList = getTimeList(timeList);
                                    if (queueSize.size()<11)
                                    {
                                         queueSize.add(integer);
                                    } 
                                    else
                                    {
                                           for (int i = 0; i<queueSize.size()-1; i++)
                                           {
                                                 queueSize.set(i,queueSize.get(i+1));
                                           }
                                    }
                                    chart.setChartModel(getAreaChart(timeList, queueSize));
                                    add(chart);
                                    repaint();
                                    isAsyncCallReturned = true;
                             }
                    };
                    isAsyncCallReturned = false;
                    serverManagementSvc.getMessageQueueSize(customerId, ac);
                  }
                }
            };
            t.schedule(2000);
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:14:05.670

谢谢，但我找到了另一个解决方案。我可以创建计时器，而不是 t.shedule(2000)，我使用 t.scheduleRepeating(2000)。所以我不需要 if() 或 while()。还是非常感谢。如果需要，写信给我，我会发布工作代码。

# c++ - 使用 Boost 序列化时如何删除此重复代码？

> ID：15004716
> 
> 赞同：2
> 
> 时间：2013-02-21T14:26:52.467
> 
> 标签：c++, serialization, boost, boost-serialization

在我的应用程序中，我有许多希望能够序列化的类。因此，每个实例需要可序列化的类都具有以下内容：

```
 friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive& ar, const unsigned int version)
    {
       // ar & (all data members) 
    } 
```

要序列化对象，我需要从类外部使用此代码：

```
 ObjectToSerialize obj;
    stringstream ss;
    boost::archive::text_oarchive oa(ss);
    oa << obj; 
```

这第二段代码让我很烦，因为每次我想序列化一个对象时都必须使用它。有什么方法可以将此代码移动到一个位置并在需要序列化对象时调用它？

我可以用这个方法有一个对象：

```
 string serializeObject(Serializable obj) 
```

但是这样做的问题是没有办法确定哪些对象是“可序列化的”，因为在添加 boost 序列化功能时，没有一个类必须实现的超类型。

那么如何将这段代码放在一个地方，并且只允许将可序列化的对象传递给方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:31:15.463

制作一个模板函数，该函数接受一个具有序列化函数的对象。

```
template <typename T> std::string serializeObject(T obj) {
    stringstream ss;
    boost::archive::text_oarchive oa(ss);
    oa << obj;
    //...
}

std:String str = serializeObject(ObjectToSerialize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:35:46.610

这很简单：您不需要也不需要这些对象的基类。因此，不要使用动态多态性，而是使用*静态*多态性：

```
template <class Serializable>
std::string serializeObject(Serializable& s)
{
  stringstream ss;
  boost::archive::text_oarchive oa(ss);
  oa << obj;
  return ss.str();
} 
```

现在，如果您将某些内容传递给不可序列化的函数，则会出现编译器错误。为了使错误更具可读性，您可以尝试使用一些基于 SFINAE 的技术，例如`std::enable_if`

# asp.net - 无论如何要在 iis 7 上模拟服务器繁忙错误 500.13？

> ID：15004717
> 
> 赞同：3
> 
> 时间：2013-02-21T14:26:57.623
> 
> 标签：asp.net, iis-7, custom-errors

有什么方法可以从 IIS 返回 500.13 错误？我需要测试 500.13 错误的自定义错误页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:50:44.760

我不相信 IIS 包括错误模拟，但是，您可以使用基准测试/压力测试应用程序。唯一的缺点是您*实际上*必须使您的（测试？）服务器处于实际压力之下，直到 IIS“崩溃”。

首先，您应该将 IIS 应用程序池大小降低到可用的最小值。

![IIS - 应用程序池队列长度](../Images/f27bd1f539c830fa0f040ff720037bab.png)

我建议你使用[Apache 的 JMeter](http://jmeter.apache.org/)。掌握和使用相对简单。

下载并运行后，以下是执行压力测试的基本步骤：

1.  **添加一个“线程组”** ——*让一切正常工作的东西* ![JMeter - 添加线程组](../Images/c17ec256ef0fc79ee05b1d202fc744fa.png)

2.  **Set Thread Group parameters** -*这里你设置并发线程的数量（即用户）* ![JMeter - 设置线程组参数](../Images/1dd54a9e8b0c073f938b58c72aa6c698.png)

3.  **将 HTTP 请求添加到线程组**-*这是一个测试*步骤。 ![JMeter - 将 HTTP 请求添加到线程组](../Images/56810a45225dcac7e596f895820653c1.png)

4.  **设置 HTTP 请求参数**-*在此处指定 Web 地址（localhost、www.yourdomain.com 等）以及您需要的任何其他配置* ![JMeter - 设置 HTTP 请求参数](../Images/5beea7207cd38c4a01411446873e424d.png)

5.  **添加报告**-*报告是您查看结果以及服务器请求和响应的方式* ![JMeter - 添加报告](../Images/b9f17a117435817ae95af6e26f6a6112.png)

6.  **运行测试计划并查看结果** ![JMeter - 运行测试计划并查看结果](../Images/de6be048f3d3c1b7f9a406cc26037156.png)

* * *

**最后**，在运行测试并查看失败后，您可以在首选浏览器下浏览到您的服务器并实时查看结果。

* * *

**编辑**

如果您可以访问多台计算机/服务器，您甚至可以尝试分布式压力测试。该教程[可](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)在他们的网站上找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T16:43:43.567

您不能从代码中引发“服务器繁忙”错误。您可以模拟其他答案中显示的错误代码，但它不允许您确定您的自定义错误页面是否将正确显示，因为“服务器忙”错误的全部要点是代码无法执行 - 所以它是非常安全的假设是 IIS 会做一些不同的事情来引发这种错误。

但据我所知，500.13 错误是由 ASP 引发的，而不是 ASP.NET 应用程序。相反，对于 ASP.NET 应用程序，您会看到 503 Service Unavailable 错误。

您可以通过以下方式触发 503 状态代码：

1.  打开 IIS Management Studio，转到应用程序池，打开应用程序池的高级设置并将队列长度更改为 10（最小值）。
2.  在您的 ASP.NET 应用程序中添加对`Thread.Sleep(50000)`.
3.  现在开始攻击 Web 服务器 - 很快你就会收到 503 Service Unavailable 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:39:47.837

把它放在 Page_Init 事件中：

```
protected void Page_Init(object sender, EventArgs e)
{
    Response.Clear();
    Response.StatusCode = 500;
    Response.SubStatusCode = 13;
    throw new Exception();
} 
```

但是 AFAIK，无法在`customErrors`Web.config 部分设置子代码错误。但是，您可以检查 Global.asx Application_Error 事件中的子代码：

```
int subCode = HttpContext.Current.Response.SubStatusCode; 
```

如果您遵循逻辑，则可以模拟任何 IIS 错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T05:32:29.530

您可以使用框架来模拟负载。[Selenium Grid](http://selenium-grid.seleniumhq.org/)可能会有所帮助。

Visual Studio Team System 也可以模拟负载，但它不是免费的。
看看[使用 Visual Studio Team System 进行负载测试](http://blogs.msdn.com/b/amit_chatterjee/archive/2009/01/29/web-and-load-testing-with-visual-studio-team-system.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T03:11:29.417

这是 StackOverflow 上的类似问题。这与您要完成的工作相匹配吗？[在 IIS/.net 中伪造 Http 状态码以进行测试](https://stackoverflow.com/questions/7724998/faking-http-status-codes-in-iis-net-for-testing)

# clearcase - 干净的透明盒。在 cc explorer 中加载视图失败后的纯卸载等

> ID：15004723
> 
> 赞同：1
> 
> 时间：2013-02-21T14:27:18.563
> 
> 标签：clearcase

我有从 CLI 运行的视图，但 cc-explorer 无法加载，因此我没有简单的方法来执行基本操作。有任何想法吗？

我完全删除了它，但有些东西被遗忘了，所以卸载并重新安装没有帮助

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:39:46.327

如果您可以从 CLI ( [`cleartool update`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_update.htm)) 加载快照视图，那么您可以直接从所述加载的快照视图启动 ClearCase Explorer：

```
cd /root/of/your/snapshot/view
clearexplorer . 
```

这样，即使 ClearCase Explorer 不加载它们，它至少可以显示它们加载的内容。

# php - CakePHP 项目升级的问题

> ID：15004724
> 
> 赞同：0
> 
> 时间：2013-02-21T14:27:19.277
> 
> 标签：php, cakephp-1.3, cakephp-2.0

我有一个 CakePHP 项目，最初是使用 1.3 版构建的。我很久以前就保存了这些文件，现在想在我的新机器上部署该站点。我的新机器在 PHP 5.4 上运行，因此有很多“严格标准”警告。

然后，我下载了 CakePHP 2.0 版并将其替换为我的旧“蛋糕”文件夹。之后，我运行了“全部更新”命令。我收到一条成功更新的消息。但是，我仍然需要手动更改几个文件夹的名称（从 config 到 Config 等）并在 app/webroot/index.php 中指定 bootstrap.php 的路径

我已经设法克服了所有错误，但有一个错误，即第 82 行的“致命错误：在 /path/to/app/webroot/index.php 中找不到类 'Dispatcher'”。这是特定于路径的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:27:55.873

您还需要手动替换以下内容：

*   应用程序/index.php
*   应用程序/webroot/index.php
*   应用程序/webroot/test.php
*   任何 .htaccess 文件
*   app 文件夹中的任何其他核心文件，例如 cake.generic.css

# javascript - 收到无法获取属性“执行”的值：对象为空或未使用 Jscript 定义 - Crm2011 Onchange 事件

> ID：15004726
> 
> 赞同：1
> 
> 时间：2013-02-21T14:27:28.300
> 
> 标签：javascript, dynamics-crm-2011

我在 CRM 表单中创建了 3 个整数字段：var1 var2 和 result

我需要从 var1 中减去 var 2 并在结果字段中显示结果

在表单事件中添加了 Jscript 代码，在 var1 和 var2 字段中添加了 onchange 事件。

我收到错误消息：
无法获取属性“执行”的值：对象为空或未定义

这是我的 JScript：

```
function calculates( )
{

    var val1 = Xrm.Page.entity.attributes.get(safe_val1).getValue();
    var val2 = Xrm.Page.entity.attributes.get(safe_val2).getValue();

    if(val1=null) return;
    if(val2=null) return;

    var result = val1 - val2;

    Xrm.Page.entity.attributes.get(safe_result).setValue(result);
} 
```

提前感谢任何回答我问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:39:57.930

的基本语法 `Xrm.Page.data.entity.attributes.get`要求您传递字段的名称。

例如，假设我在`Contact`表格上并且我想抢占该`firstname`字段，我会使用

```
 Xrm.Page.data.entity.attributes.get('firstname'); 
```

在上面的示例中，您将传递给`variables`被调用的`safe_val1`and `safe_val2`。没有建议这些在任何地方初始化，所以这意味着你正在通过`null`这将使 CRM 哭泣。

您需要查看要传入的字段的名称并改为使用它们。

编辑：刚刚注意到你错过了这个`data`对象

edit2：或者，您可以使用速记/快捷方式

```
Xrm.Page.getAttribute('new_fieldname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:48:16.933

I'll give it a whack, but I'm not in front of the computer so it's just a general suggestion (that **might** resolve your issue).

There are some issues with the code. I'd rewrite it as follows and get back to tell what's happening then.

```
function calculate() {
  // Make sure that you refer the right fields.
  var val1 = Xrm.Page.entity.attributes.get("var1").getValue();
  var val2 = Xrm.Page.entity.attributes.get("var2").getValue();

  // Yes! Triple equality sign. I'm not BS'ing. I'm JS'ing.
  if(val1 === null || val2 === null) return;

  // Make sure that the computation's been carried out properly.
  var result = val1 - val2;
  alert(result);

  Xrm.Page.entity.attributes.get(safe_result).setValue(result);
} 
```

If you want to tear out your eyes from the sockets watching the ugly and weird

```
if(val1 === null || val2 === null) return; 
```

you might want to exchange it for

```
if(!val1 || !val2) return; 
```

which is also ugly and weird but less. And if this fails, comment everything out and do **exactly** the following. Just to make sure that we eliminate other issues you might have.

```
function calculate(){
  alert("Konrad Viltersten is godlike but humble.");
} 
```

If it works, you go shotgun and add **one line** at a time to see when the weird stuff starts happening. (JS - where the joy of programming goes to die.)

# intuit-partner-platform - 在同步我的发票和销售收据后，IDS 和 QB Desktop 都丢失了

> ID：15004730
> 
> 赞同：1
> 
> 时间：2013-02-21T14:27:32.427
> 
> 标签：intuit-partner-platform

> 我已经在 IDS 上创建了一张带有成功消息的发票，并且我还从 IDS 获取了发票详细信息，直到我从 QB 桌面同步管理器中进行了同步。

同步时我也没有收到任何错误。有时我在 QBDesktop 中使用相同的流程创建了几张发票。

> 我无法找出数据（发票/销售收据）丢失的原因？？

我还有一个问题：如果我在 QBDesktop 中创建了一个名为 ABC 的客户/项目，然后在同步之前在 IDS 上创建了相同的名称。它在 IDS 上成功创建，也从 IDS 获取，但是当我从 Sync Manager 同步时，客户/项目从 IDS 丢失。??

我也想知道我们如何获取和管理 SyncStaus 来解决冲突？参考。

> [http://apiexplorer.developer.intuit.com](http://apiexplorer.developer.intuit.com) ...

这些问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:14:59.897

请[在此处](https://stackoverflow.com/questions/14863355/payment-not-being-created#answer-14863873)查看我关于处于错误状态的对象以及如何解决它们的帖子。

# mysql - SQL 从 2 个表中选择，其中键不在 1 个表的某些行中

> ID：15004731
> 
> 赞同：1
> 
> 时间：2013-02-21T14:27:36.683
> 
> 标签：mysql, sql

我有一张这样的桌子

```
ID       Type
---     -------
1        17    
2        18    
3        18   
10       16 
```

还有这样的第二张桌子

```
ID       Month
---     -------
1        Feb    
2        Feb    
3        Feb
4        Feb 
```

我想选择第二个表中的所有内容并将其与第一个表中的类型匹配。如果它在第一个表中没有匹配的 ID，我仍然想显示它。

现在我正在做这个查询

```
 select t2.id, t2.month, t1.type
 from t2, t1
 where t1.id = t2.id 
```

它给了我这个结果

```
ID   MONTH  TYPE
1    Feb     17
2    Feb     18
3    Feb     18 
```

但我想要的是这个结果

```
ID   MONTH  TYPE
1    Feb     17
2    Feb     18
3    Feb     18
4    Feb     0 
```

我怎样才能写一个 SQL 语句这会给我上面的结果？

SQL 小提琴：[http ://sqlfiddle.com/#!2/c90f5/1](http://sqlfiddle.com/#!2/c90f5/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:28:36.360

你只需要使用一个`LEFT JOIN`——我也曾经`COALESCE`为类型返回 0——你也可以使用`IFNULL`：

```
SELECTt2.id, t2.month,  COALESCE(t1.type,0) type
FROM t2 LEFT JOIN t1
    ON t1.id = t2.id 
```

[更新小提琴](http://sqlfiddle.com/#!2/c90f5/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:32:59.170

您必须使用外连接，它为您提供一个表的所有行以及连接的另一个表的值。像这样：

```
select t2.id, t2.month, t1.type
from t2 left outer join t1
on t1.id = t2.id 
```

但是 2 月 4 日缺少 type 的值，因此它们为空。

如果这是您需要的，则必须在字段列表中将 null 映射为 0，但我不建议这样做，因为这完全是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:33:28.073

```
SELECT t2.id, t2.month, t2.type
FROM t2 LEFT OUTER JOIN t1
    ON t1.id = t2.id 
UNION(
SELECT t2.id, t2.month, '0' AS type
FROM t2
EXCEPT
SELECT t2.id, t2.month, '0' AS type
FROM t2 LEFT OUTER JOIN t1
    ON t1.id = t2.id ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:34:07.693

你可以 make a`LEFT JOIN`并使用 a`IFNULL`

```
SELECT table2.id, table2.month, IFNULL(table1.type, 0) as type FROM t2 as table2 LEFT JOIN t1 table1 ON table2.id = table1.id 
```

# sharepoint - 如何绑定一个列表中的文本框/列表框，具体取决于 InfoPath 中填充了另一个共享点列表的其他下拉列表？

> ID：15004734
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:27:45.800
> 
> 标签：sharepoint, infopath, infopath2010, infopath-forms-services

我有一个`DropDownList`填充了 One SharePointList 的内容，`INFOPATH DESIGNER`并且使用规则和操作根据此 DropDownList 选定值填充了其他文本框的值。这工作正常。

但是，现在我想检索其他列表中存在的 TextBox 或 ListBox 中的数据。`(Want to use ClientID as LookUp value)`取决于下拉列表的选定值。

```
Eg: ClientList(ClientID,Name,City)
    ClientAddress(ClientID,Address1,Address2)

Depending on ClientID from DropDownList the TextBox Value must be filled with Corresponding Address1,Address2. 
```

帮助赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:39:11.520

创建到另一个列表的数据连接，然后创建规则以填充文本字段。有几种方法：

1.  将新数据连接中查询字段的ID字段设置为表单字段的值，然后查询数据连接，将目标字段的值设置为新数据连接的数据字段

2.  将目标字段的值设置为新数据连接的值，按表单字段的 ID 值过滤。

# shader - 在着色器中保持纹理比例

> ID：15004738
> 
> 赞同：0
> 
> 时间：2013-02-21T14:27:54.037
> 
> 标签：shader, cg-language

我有一个以给定方式组合 2 个纹理的着色器。

我如何将第一个纹理定位在第二个纹理的中心以保持对应比例？

即我有一个 100x100 的图像和另一个 1024x 768 的图像。如何组合这两个纹理，使第一个图像居中在第二个图像前面，保持图像之间的差异（没有小图像拉伸整个材料） ？

这是我的着色器：

```
 sampler2D _MainTex;
        sampler2D _MainTex2;

        float4 _Color;
        float _bwBlend;

        struct Input {
            float2 uv_MainTex;
            float2 uv_MainTex2;
        };

        void surf (Input IN, inout SurfaceOutput o) 
        {

            half4 c = tex2D(_MainTex, IN.uv_MainTex);
            half4 c2 = tex2D(_MainTex2, IN.uv_MainTex2);

        o.Normal =c.a > .2f ? (.1,.1,.1) : (0,0,0);
            o.Albedo = c.a > .2f ? c  : c2;
       } 
```

语言是 CG，但我认为任何对着色器有基本知识的人都可以回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:52:35.217

我找到了答案：

```
 void surf (Input IN, inout SurfaceOutput o) 
        {
        float2 a = IN.uv_MainTex*3 ;
            half4 c = tex2D(_MainTex, a);
            half4 c2 = tex2D(_MainTex2, IN.uv_MainTex2);

           // half lum = c.r*.3 + c.g*.59 + c.b*.11;
           // half3 bw = half3( lum, lum, lum );

         if(frac(IN.uv_MainTex.x) > .3f && frac(IN.uv_MainTex.x) < .7f && frac(IN.uv_MainTex.y) > .3f && frac(IN.uv_MainTex.y) < .7f)
         { 
            o.Normal =c.a > .2f ? (.1,.1,.1) : (0,0,0);
               o.Albedo = c.a > .2f ? c  : c2;
         }
         else
          {
          o.Normal = (0,0,0);
             o.Albedo = c2;
           }    

         } 
```

我将小图像的 uvs 相乘，这样我就得到了我想要的图像（小图像的 3x3 网格）。之后，我“禁用”了其他非居中图像的绘制。

# html - HTML5中的iOS底部导航（主页等）？

> ID：15004740
> 
> 赞同：0
> 
> 时间：2013-02-21T14:27:58.910
> 
> 标签：html, cordova

我创建了一个 HTML5 应用程序（测试应用程序，没什么特别的），它被加载到 phonegap 中。工作正常。但是...我想稍微扩展一下，并在底部有标准的 IOS 按钮“主页、应用程序、联系人”。顶部还有某种形式的导航。

由于我制作的应用程序是在“app.html”中启动的，所以我想创建一个带有按钮的“index.html”，也许还有一些用于“app.html”的 iframe？

有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:17:55.050

一些 html5 和 javascript 框架将帮助您执行此操作，例如 jquery mobile、sencha touch 和 jquery touch

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:42:28.677

[我建议你在这里](http://jquerymobile.com/)查看 jQuery Mobile

问候

# sql-server - 如何编写 XQuery 访问存储在不同 SQL Server 表中的 XML？

> ID：15004743
> 
> 赞同：3
> 
> 时间：2013-02-21T14:28:16.227
> 
> 标签：sql-server, xquery, xquery-sql

我创建了一个包含两个表的新数据库来测试 SQLServer 2008 XML 功能。

如果我能成功获得所需的行为，我将不得不创建大约 50 个表，然后为新项目导入大量 XML 文件。

我的测试环境是这样创建的：

```
create table Employees(
    idEmployeeFeed bigint primary key IDENTITY(1,1),
    EmployeeFeed xml
)
go

create table GeoCountries(
    CountriesFeed xml
)
go 
```

然后我在Employees 表中加载了大约1000 个xml 文件，在GeoCountries 表中加载了1 个文件。GeoCountries 文件包含 249 个国家的经纬度质心坐标以及国家名称和 ISO 3 字符国家代码。

每个员工都有一个国家代码。我已经在另一个产品中准备好了 XQuery，现在我需要根据客户的要求迁移到 SQL Server。

使用 XQuery 获得的两个表中的示例数据：

```
select EmployeeFeed.query('//employee') as employee
from Employees
/* output:
    <employee empID="1111" >
      <displayName>John</displayName>
      <country code="USA" />
    </employee>
    <employee empID="2222" >
      <displayName>Mario</displayName>
      <country code="ITA" />
    </employee>
    ...
*/

select EmployeeFeed.query('//employee/country') as employee
from Employees
/* output:
    <country code="USA" />
    <country code="ITA" />
    ...
*/

select CountriesFeed.query('//country')
from GeoCountries
/* output:
    <country>
      <ISO3166A3>USA</ISO3166A3>
      <ISOen_name>United States</ISOen_name>
      <latitude>38.000</latitude>
      <longitude>-97.000</longitude>
    </country>
    <country>
      <ISO3166A3>ITA</ISO3166A3>
      <ISOen_name>Italy</ISOen_name>
      <latitude>42.833</latitude>
      <longitude>12.833</longitude>
    </country>
    ...
*/

select CountriesFeed.query('//country/ISO3166A3')
from GeoCountries
/* output:
    <ISO3166A3>USA</ISO3166A3>
    <ISO3166A3>ITA</ISO3166A3>
    ...
*/ 
```

这是我试图运行的查询：

```
select EmployeeFeed.query(N'
  let $ccc := //country
  let $ttt := //employee
  for $t in $ttt  
  return
        <geoEmp
        empCode="{ $t/@empID }" 
        countryCode="{ $t/country/@code }" 
        latit="{ $ccc[ISO3166A3 = $t/country/@code]/latitude/text() }" 
        longit="{ $ccc[ISO3166A3 = $t/country/@code]/longitude/text() }"
        />
') as GeoEmployees
from Employees
/* output:
    <geoEmp empCode="1111" countryCode="USA" latit="" longit="" />
    <geoEmp empCode="2222" countryCode="ITA" latit="" longit="" />
    ...
*/ 
```

如您所见，国家代码 + 纬度/经度已预加载到变量 $ccc 中以将其用作查找表，但是，作为另一个 SQL 表 (GeoCountries) 中的数据，它无法在当前 XQuery 上下文中找到绑定到 SQL 表员工。

有没有办法运行 XQuery 访问存储在单独 SQL 表中的 XML？如果我迁移，我将有 100-200 个类似的情况需要管理，我需要为这个问题找到一个有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:44:18.260

这个怎么样：

```
select e.empID as '@empCode', c.code as '@countryCode', c.lat as '@latit', c.long as '@longit' from (
    select e.emp.value('(@empID)[1]', 'int') as empID, e.emp.value('(country/@code)[1]', 'varchar(32)') as code
    from Employees
    cross apply EmployeeFeed.nodes('//employee') e(emp)
) e
inner join (
    select c.country.value('(ISO3166A3)[1]', 'varchar(32)') as code, c.country.value('(latitude)[1]', 'varchar(32)') as lat, c.country.value('(longitude)[1]', 'varchar(32)') as long
    from GeoCountries
    cross apply CountriesFeed.nodes('//country') c(country)
) c on e.code = c.code
for xml path('geoEmp'), type 
```

# iphone - 核心数据轻量级迁移不起作用

> ID：15004746
> 
> 赞同：1
> 
> 时间：2013-02-21T14:28:19.160
> 
> 标签：iphone, ios, objective-c, core-data, nspersistentdocument

我有一个使用核心数据的应用程序。目前我使用的是 V1.5，在这些版本中，我对核心数据库进行了一些更改。在有人抱怨该应用程序仍然崩溃后，我发现我应该实施`Core data lightweight`。现在的问题是，我不再知道我在不同版本中所做的更改。

同样为了处理核心数据，我遵循了斯坦福大学的视频教程。 [这里是第13课。](https://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)

当您查看本教程时，您会发现他无法使用 XCODE 在 appdelegate 中生成的标准代码。我将简要解释他在做什么。

在 de`ViewWillAppear`我检查是否有托管文档。如果没有，我创建一个。

```
 if (!self.genkDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default appGenk Database"];
        // url is now "<Documents Directory>/Default Photo Database"
        self.genkDatabase = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
    } 
```

设置文档后，我调用该`UseDocument`函数

```
- (void)setGenkDatabase:(UIManagedDocument *)genkDatabase
{
    if (_genkDatabase != genkDatabase) {
        _genkDatabase = genkDatabase;
        [self useDocument];
    }
} 
```

然后在 useDocument 我检查文档状态是什么，然后获取并将我的数据保存在核心数据库中。

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"no database created yet");
             [self fetchNewsIntoDocument:self.genkDatabase];
           [self setupFetchedResultsController];
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        NSLog(@"closed");
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {

                [self fetchNewsIntoDocument:self.genkDatabase];
            [self setupFetchedResultsController];     
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [self setupFetchedResultsController];
    }
} 
```

这就是我将数据提取到数据库中的方式。

```
- (void)fetchNewsIntoDocument:(UIManagedDocument *)document
{
    dispatch_queue_t fetchNews = dispatch_queue_create("news fetcher", NULL);
    dispatch_async(fetchNews, ^{
        NSArray *news           = [GenkData getNews];
     [document.managedObjectContext performBlock:^{

        int newsId          = 0;
        for (NSDictionary *genkInfo in news) {
            newsId++;
            [News newsWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withNewsId:newsId];
        }

        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
       }];
    });
   dispatch_release(fetchNews);
} 
```

我知道这是很多代码，但我想得到一个好的答案，因为我正在寻找这个问题好几天。在我听说轻量级核心数据迁移之前，我的 appdelegate 中没有任何关于核心数据的内容。在研究了轻量级迁移之后，我在我的 appdelegate 中添加了标准的 core-dat 代码，并将其添加到代码中。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Default appGenk Database.sqlite"];
    [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil];
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    NSDictionary *options = @{
                              NSMigratePersistentStoresAutomaticallyOption : @YES,
                              NSInferMappingModelAutomaticallyOption : @YES
                              };

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
} 
```

现在经过大量代码，我们正在解决实际问题。当我在安装了第一个版本的 iPad 上运行项目时，在将数据插入数据库后出现以下错误。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.' 
```

我希望任何人都可以帮助我解决这个问题。我不是 IOS 开发人员，我很难解决这个问题。

亲切的问候

# validation - 数据绑定验证不会捕获异常

> ID：15004749
> 
> 赞同：0
> 
> 时间：2013-02-21T14:28:22.453
> 
> 标签：validation, silverlight-5.0

我将一个文本框绑定到内存中的一个对象，当输入错误的值时会引发异常。

如果 TextBox 将 ValidatesOnException 设置为 true 并且 Mode=TwoWay，那么如果发生异常，它应该被 Binding 拦截，但事实并非如此。

文本框看起来像：

```
 <TextBox Name="txtAge"
             Text="{Binding Age, Mode=TwoWay, ValidatesOnExceptions=True}"
              /> 
```

我在内存中创建了一个对象，并将 layoutroot 网格的 DataContext 设置为 UserControl 的构造函数中创建的对象。

```
Student std = new Student();
LayoutRoot.DataContext = std; 
```

绑定对象类型为：

```
public class Student {

   private string _name;
   public string Name {
       get { return _name; }
       set { _name = value; }
   }

   private int _age;
   public int Age {
       get { return _age; }
       set {
           if (value > 100 || value < 0) {
               throw new Exception("Please enter age between 0 - 100");
           }
           _age = value;
       }
   }
} 
```

应拦截输入数字 < 0 或 > 100 时属性 Age 引发的异常。

这是我期望的行为：

[![图像1](../Images/bfb522e74c27058373af65fa2df6ce78.png)](https://i.stack.imgur.com/ud3wl.jpg)

但我得到了例外。

我正在研究这个博客的验证，我发现[http://www.codeproject.com/Articles/86955/Silverlight-4-Data-Validation-Tip-of-the-Day-Part](http://www.codeproject.com/Articles/86955/Silverlight-4-Data-Validation-Tip-of-the-Day-Part)

这是第8步，这应该是行为，作者解释了NotifyOnValidationError和BindingValidationError超出了这一步。

我可能无法进行哪些设置？

提前致谢，

拉斐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:19:11.623

您可以禁用所有用户未处理的异常的中断，或者只是将异常添加到不中断的异常列表中（从[这里](http://jeffhandley.com/archive/2009/04/01/184.aspx)）

转到Debug -> Exceptions -> 并取消选中异常，即System.ComponentModel.DataAnnotation.ValidationException

或者，从[此处](http://www.silverlightshow.net/items/Data-Validation-in-Silverlight-3.aspx)的评论中，将`[System.Diagnostics.DebuggerHidden()]`属性应用于属性。（“请注意，您可能仍会收到 VS Just-in-Time Debugger 对话框，询问您是否要调试它。”）

# java - 如何将 java 项目从 Windows 中的 Netbeans 移动到 Ubuntu

> ID：15004752
> 
> 赞同：-3
> 
> 时间：2013-02-21T14:28:35.337
> 
> 标签：java, windows, ubuntu, netbeans

我在 Windows 中使用 netbeans 制作了一个 java 项目。现在我想在 Ubuntu 桌面版上运行该项目。我尝试安装环境并尝试运行。但不工作。你能提供什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T05:28:43.397

使用版本控制，从而将代码传输和共享到 ubuntu。我成功地在 windows 和 ubuntu 之间同步了几个项目，我使用了 code.google.com、bitbucket.org 和 xp-dev.com。还有 bitbucket 和 sourceforge。如此多的版本控制提供程序使您可以并且建议您使用版本控制来移动代码。使用 netbeans 和例如 svn，您可以使用版本控制和 netbeans 插件将项目迁移到 ubuntu。

或者，如果您只想运行您的项目，您可以在 windows 上创建一个可运行的 jar 文件，然后在 ubuntu 上使用`java -jar <filename>.jar`.

我希望这会有所帮助，或者您可以澄清您的情况，以便我们获得更多帮助。

# delphi - 使用智能效果组件时出错？

> ID：15004756
> 
> 赞同：0
> 
> 时间：2013-02-21T14:28:44.463
> 
> 标签：delphi, delphi-7, effects

我在delphi中使用智能效果组件。我使用animationform和animationlist，我运行它，但是当我关闭应用程序时，它会出现如下图所示的错误，，如何解决？或者是否有任何组件可以获得像智能效果这样的过渡/动画效果？

帮帮我，谢谢,,,,

![关闭时出错](../Images/ca80bb2d6a4d7d96d57abfd1d0b68ea3.png) ![在此处输入图像描述](../Images/d61ecc9e0df9174a84be2481a9aad360.png)

![SEAnimationList 属性](../Images/fbfa9e8c155ebd87a7eef4a2615385fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:47:06.783

查看您提供的输出，我们可以看到调试器已在此行中断：

```
while time < FShowAnimation.Time do 
```

你的错误信息是

```
访问冲突 .... 读取地址 00000034

```

当您尝试从指向`nil`. 由此我们可以得出结论，`FShowAnimation`没有被实例化。

解决方案是确保`FShowAnimation`已实例化。

# search - 我可以在 Solr 中保护短词免受 n-gram 过滤器的影响吗？

> ID：15004758
> 
> 赞同：4
> 
> 时间：2013-02-21T14:28:49.680
> 
> 标签：search, solr, lucene, n-gram

我见过[这个](https://stackoverflow.com/questions/3021226/search-for-short-words-with-solr)关于在 Solr 中搜索短词的问题。我想知道类似问题是否有另一种可能的解决方案。我正在使用 minGramSize 为 3 的 EdgeNGramFilter。我想保护一组特定的较短单词（主要是两个字母的首字母缩略词）不被忽略，但我想将 minGramSize 保留为 3 用于其他所有内容。EdgeNGramFilter 不支持受保护的单词列表。是否有任何过滤器或设置可以在单个字段类型中实现这一点，还是我需要编写一个？

或者，我是否以错误的方式思考这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:30:26.543

认真思考了这个问题，但是您提到的另一个问题的答案似乎是唯一的方法。不过，这对于 EdgeNGramFilter 来说将是一个有用的功能。

现在，您可以只使用您需要的首字母缩写词为其保留一个复制字段和一个[KeepWordFilterFactory 。](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeepWordFilterFactory)或者，如果您的首字母缩略词列表事先不知道，请使用[LengthFilter](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.LengthFilterFactory)。

# javascript - 如何在javascript中过滤具有条件索引的数组

> ID：15004759
> 
> 赞同：0
> 
> 时间：2013-02-21T14:28:50.690
> 
> 标签：javascript, filter, indexof

由于任何编码的背景较少，我正在尝试从具有 javascript 中 indexof 条件的现有数组中获得过滤后的数组。

我的代码：

```
function CheckIfexists(element) {
  return (element.indexOf(formInput) > -1);
}
var filtered = data.filter(CheckIfexists);
window.alert(filtered[1] + " " + filtered[2] + " " + filtered[3]); 
```

上面的代码不起作用

添加信息：

forminput 是取自表单字段的输入。

```
var formInput = document.getElementById("textReader").value; 
```

我得到的数据数组...

```
var data = oRequest.responseText.split("\r\n"); 
```

* * *

我尝试的另一种方法是..

```
function CheckIfexists(formInput) {
   for (var i = 0; i < data.length; i += 1) {
       if (data[i].indexOf(formInput) > -1) {
           return false;
       }
   } 
   return true;
}

var filtered = data.filter(CheckIfexists);
window.alert(filtered[1] + " " + filtered[2] + " " + filtered[3]); 
```

上面的代码也不起作用..

* * *

不要怀疑数据数组和表单输入，因为我用代码检查了每个元素，al

```
for(var i=0; i<data.length; i++) {  
    if (data[i] === formInput) {
        alert("You want to retrieve report?");
        didntfind = false;
        break;
    } 
}

     if (didntfind) alert("sorry. part not found"); 
```

我得到了匹配和不匹配的。添加注意：数据数组有部分名称，forminput可能与数据数组中的元素不完全相同，它也可以是部分的。我的努力是在新数组中获取过滤后的元素。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T15:00:30.720

函数`CheckIfexists`将在数组中的每个元素上调用。阅读并运行此代码以更好地理解：

```
var data = [1,2,3,4,10];
console.log(data.filter(function (item) { return item > 3; })); 
```

我可以看到你想做什么。我想，你需要写这样的东西：

```
var formInput = document.getElementById("textReader").value;
var data = oRequest.responseText.split("\r\n");

function CheckIfExists(element) {
  return (element === formInput);
};

var filtered = data.filter(CheckIfexists); 
```

在 javascript 中检查元素的相等性（例如，“1”！== 1）时要注意。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-22T09:38:03.187

```
var newArray = [];
for(var i=0;i<data.length;i++) {
    var item = data[i];
    if(item.indexOf(formInput1) > -1) {
        newArray.push(item);
    }
}); 
```

我明白了..上面的代码对我有用...再次感谢..

# java - 方法正在更改我的类变量 char[][] 但我不知道为什么 java

> ID：15004761
> 
> 赞同：0
> 
> 时间：2013-02-21T14:28:53.013
> 
> 标签：java, arrays, char

我真的不知道该怎么称呼这个问题，所以请随意编辑它...

基本上我有一个 char[][] 类变量“canvasArray[][]”

它以不同的方法填充了代表画布上字母的字符（类似于 ASCII 艺术）

我有一个方法可以水平翻转这个图像

```
void mirrorHorizontally()
{
    char[][]horizontalImage = canvasArray;

    for (int i = 0; i < height /2; i++)
    { 
       for(int j = 0; j < width; j++)
       {            
           horizontalImage[height - (i+1)][j] = horizontalImage[i][j];           
           horizontalImage[i][j] = horizontalImage[height - (i+1)][j];
       }
    }

    printPicture(horizontalImage);
} 
```

从我所看到的，我只是将 char[][] 水平图像设置为 canvasArray 的值，但似乎不是因为如果我打印 canvasArray 而不是它向我显示相同的值。

我需要画布数组保持不变，因为我还有其他方法也需要使用它

有任何想法吗？？

提前致谢

编辑：感谢所有回答的人，恐怕答案是你们所说的一切的结合，所以我不知道该接受谁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:39:36.400

我会选择类似的东西：

```
void mirrorHorizontally()
{
    char[][]horizontalImage = new char[horizontalImage.length][horizontalImage[0].length]; // assumes all lines have same length

    for (int i = 0; i < height /2; i++)
    { 
       for(int j = 0; j < width; j++)
       {            
           horizontalImage[height - (i+1)][j] = canvasArray[i][j];           
           horizontalImage[i][j] = canvasArray[height - (i+1)][j];
       }
    }

    printPicture(horizontalImage);
} 
```

这样我正在创建一个新缓冲区（不引用和修改旧缓冲区）并直接使用它来填充新缓冲区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:32:50.337

您的第一次调用会抹去 处的旧值`[height - (i+1)][j]`。相反，存储旧值，以便您可以在下面使用它：

```
char temp = horizontalImage[height - (i+1)][j];
horizontalImage[height - (i+1)][j] = horizontalImage[i][j];
horizontalImage[i][j] = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:35:58.727

在 Java 中，数组是对象。因此，当您同时分配`char[][]horizontalImage = canvasArray;`两者`horizontalImage`并`canvasArray`指向同一个数组对象时。这意味着当您修改时，`horizontalImage`您也会修改`canvasArray`. 您需要将值从复制`canvasArray`到新的`horizontalImage`.

编辑：试试这个：

```
for (int i = 0; i < height /2; i++)
   { 
   for(int j = 0; j < width; j++)
   {            
       horizontalImage[height - (i+1)][j] = canvasImage[i][j];           
       horizontalImage[i][j] = canvasImage[height - (i+1)][j];
   }
} 
```

并省略循环前的赋值。

# javascript - 在输出中删除 %20

> ID：15004762
> 
> 赞同：0
> 
> 时间：2013-02-21T14:28:52.703
> 
> 标签：javascript, html-encode

我使用来自 aweber 的此代码将用户信息从注册传递到下一页，这是来自 aweber 的代码

```
<script type="text/javascript"> 
    var formData = function(){
        var query_string = (location.search)?((location.search.indexOf('#') != -1) ? location.search.substring(1, location.search.indexOf('#')) : location.search.substring(1)) : '';
        var elements = [];
        if(query_string){
            var pairs = query_string.split("&");
            for(i in pairs) { 
                if (typeof pairs[i] == 'string') {
                    var tmp = pairs[i].split("="); 
                    var queryKey = unescape(tmp[0]);
                    queryKey = (queryKey.charAt(0) == 'c') ? queryKey.replace(/\s/g, "_") : queryKey;elements[queryKey] = unescape(tmp[1]);
                }
            }
        }
        return{display: function(key){if(elements[key]){document.write(elements[key]);
    }else {
        document.write("<!--If desired, replace everything between these quotes with a default in case there is no data in the query string.-->");
    }}}}();
</script> 
```

那么这是页面上显示名称的代码

`<script type="text/javascript">formData.display("fullname")</script>`

示例输出将是`FirstName%20LastName`

有没有办法`%20`可以去掉？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T14:31:43.060

%20 是 url 编码中的空格符号。由于某种原因，您的函数返回 url 编码的数据。尝试对输出进行 url 解码，您的 %20 应该表示为空格。

您可以使用 decodeURI ( [http://www.w3schools.com/jsref/jsref_decodeuri.asp](http://www.w3schools.com/jsref/jsref_decodeuri.asp) )

编辑：

这是一个有效的 js-fiddle。

```
var result = 'Firstname%20Lastname';
var result = decodeURI(result);

document.getElementById('demo').innerHTML = result; 
```

[http://jsfiddle.net/p82HN/](http://jsfiddle.net/p82HN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:30:36.603

该数据是 URL 编码的，所以使用`decodeURI`或`decodeURIComponent`解码它：

```
var result = decodeURI(input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:33:06.957

看起来您需要对数据进行 urldecode，请查看`decodeURIComponent()`

# javascript - 在 JavaScript 中使用带有局部变量的“窗口”进行全局访问

> ID：15004768
> 
> 赞同：4
> 
> 时间：2013-02-21T14:29:04.297
> 
> 标签：javascript, variables, global-variables

我想全局访问一个局部变量（不更改变量的命名空间或位置）。我[读到](https://stackoverflow.com/questions/4862193/javascript-global-variables/)我可以使用“窗口。”，但它不起作用：

```
var myNameSpace = {
        window.localVar : 'foo'
    };

alert(window.localVar);  // Not working 
```

[JSFiddle](http://jsfiddle.net/gKWNr/)

像这样的东西可以工作吗？

另外，我读过关于全局变量的风险。如果我几乎可以肯定变量的名称没有被重用的风险，它安全吗？

```
$myTotallyUniqueVarName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:31:13.763

```
var myNameSpace = { };

myNameSpace.localVar = window.localVar = 'foo'; 
```

*从另一个对象定义密钥*时，您无法访问另一个对象，就像您尝试过的那样。但是您当然可以为同一个值创建多个引用/分配，如上所示。

但是，请注意，在这种情况下，我们分配了一个*原始值*，这意味着`window.localVar`并且`myNameSpace.localVar`将拥有它们自己的唯一值。任何改变都**不会**反映在另一面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:38:12.840

每个与全局对象相关的变量都可以全局访问。在浏览器中，window 变量代表全局对象。

```
function a() {
  bvar = 3; // Accessible
  var cvar = 4; // Inaccessible
}

a();

alert(window.bvar === 3); // true
alert(window.cvar === 4); // false, cvar is undefined

// This refers here to the global object
alert(window.bvar === this.bvar); // true 
```

# java - 使用图像 tiff 和 x/y 分辨率缩放图像

> ID：15004769
> 
> 赞同：0
> 
> 时间：2013-02-21T14:29:07.607
> 
> 标签：java, scale, resolution, dpi

如果只给出 x 轴和 y 轴的 DPI 分辨率，我会遇到将 tiff 图像缩放到原始大小的问题。你能
指点我一个How-To或解释一下吗？

x分辨率：203 DPI
y分辨率：98 DPI
tiff图像是一个字节[]

如果你想给我一个例子：我正在使用Java。
先感谢您！

# python - itertools中chain和chain.from_iterable有什么区别？

> ID：15004772
> 
> 赞同：82
> 
> 时间：2013-02-21T14:29:14.067
> 
> 标签：python, iterator, itertools

我在互联网上找不到任何有效的例子，我可以看到它们之间的区别以及为什么选择一个而不是另一个。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-21T14:30:20.163

第一个接受 0 个或多个参数，每个参数是一个可迭代对象，第二个接受一个参数，该参数预计会产生可迭代对象：

```
from itertools import chain

chain(list1, list2, list3)

iterables = [list1, list2, list3]
chain.from_iterable(iterables) 
```

但`iterables`可以是任何产生可迭代对象的迭代器：

```
def gen_iterables():
    for i in range(10):
        yield range(i)

itertools.chain.from_iterable(gen_iterables()) 
```

使用第二种形式通常是一种方便的情况，但因为它会懒惰地循环输入迭代器，所以它也是链接*无限*数量的有限迭代器的唯一方法：

```
def gen_iterables():
    while True:
        for i in range(5, 10):
            yield range(i)

chain.from_iterable(gen_iterables()) 
```

上面的例子将给你一个迭代，它产生一个循环的数字模式，它永远不会停止，但永远不会消耗比单个`range()`调用所需更多的内存。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-07-17T00:55:09.550

> 我找不到任何有效的例子......在那里我可以看到它们 [`chain`和`chain.from_iterable`] 之间的区别以及为什么选择一个而不是另一个

接受的答案是彻底的。对于那些寻求快速申请的人，可以考虑将几个列表展平：

```
list(itertools.chain(["a", "b", "c"], ["d", "e"], ["f"]))
# ['a', 'b', 'c', 'd', 'e', 'f'] 
```

您可能希望稍后重用这些列表，因此您可以创建一个可迭代的列表：

```
iterable = (["a", "b", "c"], ["d", "e"], ["f"]) 
```

**试图**

但是，传入一个可迭代的 to`chain`会得到一个不平坦的结果：

```
list(itertools.chain(iterable))
# [['a', 'b', 'c'], ['d', 'e'], ['f']] 
```

为什么？你传入了*一个*项目（一个元组）。 `chain`分别需要每个列表。

* * *

**解决方案**

如果可能，您可以解压缩一个可迭代对象：

```
list(itertools.chain(*iterable))
# ['a', 'b', 'c', 'd', 'e', 'f']

list(itertools.chain(*iter(iterable)))
# ['a', 'b', 'c', 'd', 'e', 'f'] 
```

更一般地说，使用`.from_iterable`（因为它也适用于无限迭代器）：

```
list(itertools.chain.from_iterable(iterable))
# ['a', 'b', 'c', 'd', 'e', 'f']

g = itertools.chain.from_iterable(itertools.cycle(iterable))
next(g)
# "a" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-10T22:25:02.177

他们做的事情非常相似。对于少量的可迭代对象`itertools.chain(*iterables)`并`itertools.chain.from_iterable(iterables)`执行类似的操作。

的关键优势`from_iterables`在于能够处理大量（可能无限）的可迭代对象，因为它们在调用时不需要全部可用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-20T10:34:33.900

另一种查看方式：

`chain(iterable1, iterable2, iterable3, ...)`当你已经知道你有什么迭代时，你可以把它们写成这些逗号分隔的参数。

`chain.from_iterable(iterable)`用于当您的可迭代对象（如 iterable1、iterable2、iterable3）从另一个可迭代对象获得时。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-22T11:53:04.630

扩展[@martijn-pieters 答案](https://stackoverflow.com/a/15004794/610569)

尽管对可迭代内部项目的访问保持不变，并且在实现方面，

*   `itertools_chain_from_iterable`（即`chain.from_iterable`在 Python 中）和
*   `chain_new`（即`chain`在 Python 中）

在 CPython 实现中，都是[chain_new_internal的鸭子类型](https://github.com/python/cpython/blob/47a23fc63fa5df2da8dbc542e78e521d4a7f10c9/Modules/itertoolsmodule.c#L1868)

* * *

**使用 是否有任何优化好处`chain.from_iterable(x)`，其中`x`是可迭代的可迭代；主要目的是最终消耗扁平化的项目列表？**

我们可以尝试使用以下方法对其进行基准测试：

```
import random
from itertools import chain
from functools import wraps
from time import time

from tqdm import tqdm

def timing(f):
    @wraps(f)
    def wrap(*args, **kw):
        ts = time()
        result = f(*args, **kw)
        te = time()
        print('func:%r args:[%r, %r] took: %2.4f sec' % (f.__name__, args, kw, te-ts))
        return result
    return wrap

def generate_nm(m, n):
    # Creates m generators of m integers between range 0 to n.
    yield iter(random.sample(range(n), n) for _ in range(m))

def chain_star(x):
    # Stores an iterable that will unpack and flatten the list of list.
    chain_x = chain(*x)
    # Consumes the items in the flatten iterable.
    for i in chain_x:
        pass

def chain_from_iterable(x):
    # Stores an iterable that will unpack and flatten the list of list.
    chain_x = chain.from_iterable(x)
    # Consumes the items in the flatten iterable.
    for i in chain_x:
        pass

@timing
def versus(f, n, m):
  f(generate_nm(n, m)) 
```

P/S：基准测试正在运行...等待结果。

* * *

# 结果

## 链星，m=1000，n=1000

```
for _ in range(10):
    versus(chain_star, 1000, 1000) 
```

[出去]：

```
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6494 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6603 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6367 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6350 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6296 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6399 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6341 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6381 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6343 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 1000, 1000), {}] took: 0.6309 sec 
```

## chain_from_iterable，m=1000，n=1000

```
for _ in range(10):
    versus(chain_from_iterable, 1000, 1000) 
```

[出去]：

```
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6416 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6315 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6535 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6334 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6327 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6471 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6426 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6287 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6353 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 1000, 1000), {}] took: 0.6297 sec 
```

## 链星，m=10000，n=1000

```
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2659 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2966 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2953 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.3141 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2802 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2799 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2848 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.3299 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.2730 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 10000, 1000), {}] took: 6.3052 sec 
```

## chain_from_iterable, m=10000, n=1000

```
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.3129 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.3064 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.3071 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2660 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2837 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2877 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2756 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2939 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2715 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 10000, 1000), {}] took: 6.2877 sec 
```

## 链星，m=100000，n=1000

```
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.7874 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 63.3744 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.5584 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 63.3745 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.7982 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 63.4054 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.6769 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.6476 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 63.7397 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 100000, 1000), {}] took: 62.8980 sec 
```

## chain_from_iterable, m=100000, n=1000

```
for _ in range(10):
    versus(chain_from_iterable, 100000, 1000) 
```

[出去]：

```
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7227 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7717 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7159 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7569 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7906 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.6211 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.7294 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.8260 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.8356 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 100000, 1000), {}] took: 62.9738 sec 
```

## 链星，m=500000，n=1000

```
for _ in range(3):
    versus(chain_from_iterable, 500000, 1000) 
```

[出去]：

```
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 500000, 1000), {}] took: 314.5671 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 500000, 1000), {}] took: 313.9270 sec
func:'versus' args:[(<function chain_star at 0x7f5c7188ef28>, 500000, 1000), {}] took: 313.8992 sec 
```

## chain_from_iterable, m=500000, n=1000

```
for _ in range(3):
    versus(chain_from_iterable, 500000, 1000) 
```

[出去]：

```
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 500000, 1000), {}] took: 313.8301 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 500000, 1000), {}] took: 313.8104 sec
func:'versus' args:[(<function chain_from_iterable at 0x7f5c7188eb70>, 500000, 1000), {}] took: 313.9440 sec 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-20T14:42:57.060

另一种看待它的方法是使用 chain.from_iterable

当您有一个可迭代的可迭代对象时

# asp.net-mvc - Asp.net mvc & 如何将 jquery 函数应用于动态控件

> ID：15004773
> 
> 赞同：3
> 
> 时间：2013-02-21T14:29:14.910
> 
> 标签：asp.net-mvc, jquery-ui

有点难过，这适用于第一个控件，但我如何将其应用于其余控件（列表）

```
 $(function () {
        $("#spinner").spinner({
            step: 0.01,
            numberFormat: "n"
        });

    });
@foreach (var item in Model)
{<input id="spinner"  value="@item.Price" name="price_@item.Id"/>} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:33:00.727

使用`CSS class`an`ID`是唯一的并且只会选择 1 个元素，一个类可以应用于多个元素：

```
$(function () {
    $(".spinner").spinner({
        step: 0.01,
        numberFormat: "n"
    });
});

@foreach (var item in Model)
{
   <input class="spinner"  value="@item.Price" name="price_@item.Id"/>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:32:53.327

尝试为输入提供一个类，然后设置您的 jQuery 选择器以使用该类。

IE。

```
$(".spinner").spinner({
 ...
});

<input class="spinner" ... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:33:27.103

好吧，我认为您的问题是您的代码创建了具有相同 ID 的多个输入。

ID 应该是唯一的。否则，您将无法使用 Jquery 选择它们。

改用一个类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:46:10.670

请注意重复的 html ID，因为在您的示例中，您的所有输入元素都将具有相同的 ID。这违反了[HTML 4 规范](http://www.w3.org/TR/html4/struct/global.html#adef-id)和[HTML 5 规范](http://www.w3.org/TR/2012/CR-html5-20121217/dom.html#the-id-attribute)。像使用名称一样分配唯一 ID，或者根本不分配 ID。

如前所述，为每个输入元素分配一个类并通过类选择器进行选择：例如

```
$(".spinner").spinner({....}); 
```

# javascript - 从打字稿调用网络服务时出错

> ID：15004778
> 
> 赞同：2
> 
> 时间：2013-02-21T14:29:36.463
> 
> 标签：javascript, jquery, ajax, typescript

我有以下打字稿实现：

```
/// <reference path="jquery.d.ts" />
interface INotificationService {
    serviceUrl: string;
    getNotifications(onNotificationReceived: (notifications: string) => any): void;
}
module GRCcontrol.Messaging {
    export class Notifier implements INotificationService {
        private serviceUrl: string;
        constructor(serviceUrl: string) {
            this.serviceUrl = serviceUrl;
            jQuery.support.cors = true;
        }
        getNotifications(onNotificationReceived: (notifications: string) => any) {
            var that = this;
            $.getJSON(that.serviceUrl, {}, function (response) {
                alert(response);
            }).fail(function (err) {
                alert(err.statusText);
            });
        }
    }
}
$(document).ready(function () {
    var notifier = new GRCcontrol.Messaging.Notifier("http://clwebsvr01/wp7test/api/user/getemail/P6dNT1EFOKYPtHxdPWgng2lKyMg=");
    notifier.getNotifications(function (notifications) {
        alert(notifications);
    });
}); 
```

Javascript 中的输出是这样的：

```
var GRCcontrol;
(function (GRCcontrol) {
    (function (Messaging) {
        var Notifier = (function () {
            function Notifier(serviceUrl) {
                this.serviceUrl = serviceUrl;
                jQuery.support.cors = true;
            }
            Notifier.prototype.getNotifications = function (onNotificationReceived) {
                var that = this;
                $.getJSON(that.serviceUrl, {
                }, function (response) {
                    alert(response);
                }).fail(function (err) {
                    alert(err.statusText);
                });
            };
            return Notifier;
        })();
        Messaging.Notifier = Notifier;        
    })(GRCcontrol.Messaging || (GRCcontrol.Messaging = {}));
    var Messaging = GRCcontrol.Messaging;
})(GRCcontrol || (GRCcontrol = {}));
$(document).ready(function () {
    var notifier = new GRCcontrol.Messaging.Notifier("http://clwebsvr01/wp7test/api/user/getemail/P6dNT1EFOKYPtHxdPWgng2lKyMg=");
    notifier.getNotifications(function (notifications) {
        alert(notifications);
    });
}); 
```

问题是它不断进入fail 方法并返回status = 0 和statusText = error。我用Fiddler查看调用是否完成，fiddler收到响应没有问题。

我怎样才能让这个东西正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:14:14.260

这似乎根本不是 TypeScript 问题，而是 JavaScript/JQuery 尝试`cors`启用 ajax 调用的问题。

有充分的理由，`cors`不允许全面访问所有跨域资源。有关更多详细信息，请参阅此 SO 问题和答案：[使用 $.support.cors = true 是否安全；在 jQuery 中？](https://stackoverflow.com/questions/7852225/is-it-safe-to-use-support-cors-true-in-jquery)

# winapi - 来自 GDI+ 区域的 SetWindowRgn

> ID：15004787
> 
> 赞同：2
> 
> 时间：2013-02-21T14:30:00.350
> 
> 标签：winapi, gdi+, gdi

我正在构建一个 MFC C++ 应用程序。我需要将窗口呈现为动态字符串的形状。为了存档这个，我做了以下事情：

1.  使用 GDI+在 GDI+ 中使用`GraphicsPath`和呈现文本`AddString`
2.  从创建`Region`对象`GraphicsPath`
3.  转换`Region`为`CRng`并用于`SetWindowRgn`设置窗口形状

这是代码：

在`OnInitDialog`：

```
CClientDC dc(this);
Graphics graphics(dc.GetSafeHdc());
graphics.SetSmoothingMode(SmoothingModeAntiAlias);
graphics.SetInterpolationMode(InterpolationModeHighQualityBicubic);

GraphicsPath path;
FontFamily fontFamily(L"Arial");
StringFormat strformat;
wchar_t pszbuf[] = L"testString";
path.AddString(pszbuf, wcslen(pszbuf), &fontFamily, FontStyleRegular, 14, 
Gdiplus::Point(0,16), &strformat );
Region myRgn(&path);    

CRng rgn;
rgn.FromHandle(myRgn.GetHRGN(&graphics));
SetWindowRgn(rgn,TRUE) ; 
```

在`OnPaint`

```
RECT rect;
GetWindowRect(&rect);
CBrush brush;
brush.CreateSolidBrush(color);
paint_dc.FillRect(&rect, &brush); 
```

问题是我没有看到任何显示的内容。任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:07:21.843

一个问题可能是您的 CRgn 在绘制窗口之前超出了范围。如果您查看文档 ( [http://msdn.microsoft.com/en-us/library/aa930600.aspx](http://msdn.microsoft.com/en-us/library/aa930600.aspx) )，它会显示“系统不会复制该区域”。尝试将您的 CRgn 作为窗口类的成员变量，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T22:14:58.180

让这个工作的最好方法是确保`CRgn`变量在`OnPaint`. `CRgn`结束后立即超出范围`OnInitDialog`其次，使用`ClientDC`而不是`WindowDC`. 您可能必须将`Graphics`/`GraphicsPath`变量修改为全局变量，以便可以从`OnPaint`. 希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T09:39:18.427

'CRgn::FromHandle()' 是一个返回 CRgn 的静态函数。

利用

```
CRgn * rgn = CRgn::FromHandle(myRgn.GetHRGN(&graphics)); 
```

代替

```
rgn.FromHandle(myRgn.GetHRGN(&graphics)); 
```

# python - WindowsError 在哪里定义？

> ID：15004796
> 
> 赞同：3
> 
> 时间：2013-02-21T14:30:31.227
> 
> 标签：python

我是初学者。来这里学习。

一段代码正在引发 WindowsError。我抓住它并将其重命名为`exception`.

`dir(exception)`我通过,内省对象，`type(exception)`试图`print(exception.__dict__)`找到一个引用来运行一些文档命令：例如 help(areference)`。

我找不到 WindowsError 的定义位置。我试过`help(os.WindowsError)`了，但这显然无济于事。

最终目的是找到 WindowsError 的来源，但是对于这个问题，我从谷歌那里得到了答案，我想**学习**如何通过 Python 命令找到这个问题。

具体来说：

*   获取定义类型的模块
*   获取我在异常中获得的类的超类型（甚至......*任何类*？！）

我反省错了吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:35:13.033

**问题1：定义类型的模块**

根据我的 Python，它是在名为的内置模块中定义的`exceptions`：

```
>>> WindowsError
<type 'exceptions.WindowsError'> 
```

`__module__`以编程方式，您可以通过读取其属性找出定义类型的模块：

```
>>> WindowsError.__module__
'exceptions'
>>> sys.modules[WindowsError.__module__]
<module 'exceptions' (built-in)> 
```

**问题2：找到一个类型的超类**

类型的`__bases__`属性列出了它的超类。

```
>>> WindowsError.__bases__
(<type 'exceptions.OSError'>,) 
```

**问题3：给定对象的类型是什么**

你实际上并没有问这个问题，但你的评论表明你应该这样做。要查找对象的类型，请使用该`type()`函数。

```
>>> i = 666
>>> type(i)
<type 'int'>
>>> type(i).__bases__
(<type 'object'>,)
>>> type(i).__module__
'__builtin__' 
```

所以，当你捕获一个异常时，你有一个对象而不是一个类型，也就是说你有一个类的实例。所以要了解类型你必须首先使用`type()`来获取类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:35:48.327

您可能想看一下该[`inspect`](http://docs.python.org/2/library/inspect.html)模块。特别是[`inspect.getmodule`](http://docs.python.org/2/library/inspect.html#inspect.getmodule)功能。

要获取一个类的父类，您可以简单地查看一个类`__bases__`属性：

```
>>> IOError.__bases__
(<type 'exceptions.EnvironmentError'>,) 
```

或者可以通过`__mro__`属性获取类的层次结构：

```
>>> IOError.__mro__
(<type 'exceptions.IOError'>, <type 'exceptions.EnvironmentError'>, <type 'exceptions.StandardError'>, <type 'exceptions.Exception'>, <type 'exceptions.BaseException'>, <type 'object'>) 
```

`__mro__`告诉你python在类层次结构中以什么顺序查找方法和属性。

请注意，由于 python 允许多重继承，您不能定义“超类”的概念。每个类可以有多个父类，层次结构可以成为一个相当复杂的图，试图考虑超类只会导致陷阱（例如，当子类重新定义签名等时，方法调用失败等）

# python - 即使 Google 协作平台 API 创建了站点，我们仍然无法访问该站点

> ID：15004797
> 
> 赞同：1
> 
> 时间：2013-02-21T14:30:36.150
> 
> 标签：python, google-app-engine, google-sites

我在通过 Google App Engine 部署的 python 代码中使用 Google Sites API。我遇到了一个问题：Google Sites API 允许创建站点，将用户添加到站点（访问权限）等，但是我们从正在创建站点的 API 中获得状态：200，并且对于将用户添加到Google 网站，但是当我去 sites.google.com 访问该网站时，它仍然显示“正在创建您的网站”

我可以看到一个站点锁定在等待状态将近一周。我们没有任何具体的步骤来重现它，它的外观是随机的。

请提出正确的解决方案，或者如果没有完美的解决方案，请提出解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:32:55.447

我认为您可以尝试联系 Google API 的开发人员告诉他们这个错误，他们可能不知道。

# google-maps-api-3 - 使用 ArcGIS 服务器在 google maps api 上缓冲绘制图

> ID：15004801
> 
> 赞同：0
> 
> 时间：2013-02-21T14:30:41.750
> 
> 标签：google-maps-api-3, buffer, arcgis-server

我正在尝试在谷歌地图上缓冲绘图图形。但似乎它无法做缓冲。

我有一个画画的听众：

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(evt) {
    event = evt;
    ...
  }); 
```

那么缓冲函数需要缓冲这个图形：

```
function GmapBuffering() {
  gsvc = new esri.tasks.GeometryService(gsvcURL);

  //setup the buffer parameters
  var params = new esri.tasks.BufferParameters();
  params.distances = [dojo.byId("distance").value];
  params.bufferSpatialReference = gmaps.ags.SpatialReference.WEB_MERCATOR;
  params.outSpatialReference = gmaps.ags.SpatialReference.WEB_MERCATOR;
  params.unit = eval("esri.tasks.GeometryService." + dojo.byId("unit").value);
  params.geometries = [event.overlay];

  gsvc.buffer(params, function(results, err) {
    console.log(results);
    if (!err) {
      var g= results.geometries[i][j];
      g.setMap(Gmap);
      buffers.push(g);
    } else {
      alert(err.message + err.details.join(','));
    }
  });
} 
```

这是问题所在，我收到如下错误：

> TypeError: geom.toJson is not a function [http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.3](http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.3)第 34 行

似乎**arcgis GeometryService 无法识别“事件”图形**。任何想法将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:47:28.227

我解决了问题。该错误是由我如何定义 GeometryService 引起的。

假设我们有 arcgis GeometryService 的 URL。为了使用 Google Maps API 3 进行缓冲，我们需要定义 GeometryServiceas 如下：

```
var gsvcURL = "http://localhost:6080/arcgis/rest/services/Utilities/Geometry/GeometryServer";
var gsvc2 = new gmaps.ags.GeometryService(gsvcURL); 
```

这个例子很有帮助：http: [//google-maps-utility-library-v3.googlecode.com/svn-history/r168/trunk/arcgislink/examples/buffer.html](http://google-maps-utility-library-v3.googlecode.com/svn-history/r168/trunk/arcgislink/examples/buffer.html)

# android - 无法在 Eclipse 中启动 Android JUnit 测试。卡在：启动：创建源定位器

> ID：15004802
> 
> 赞同：6
> 
> 时间：2013-02-21T14:30:43.130
> 
> 标签：android, junit

我是 Android JUnit 测试的新手：

我编写了一个扩展 AndroidTestCase 的类（我将其命名为 XmlTest.java），以便在 Eclipse 中测试我的 Android 项目。

当我右键单击 XmlTest.java 然后选择“Run As->Android JUnit Test”时，Eclipse 似乎在启动测试时卡住了。在底部的进度条中，我看到了“Launching: Creating source locator...”。

<[我可以运行 Robotium 测试但无法调试它](https://stackoverflow.com/questions/11573833/i-can-run-robotium-test-but-cannot-debug-it)> 这家伙有类似的问题。但解决方案对我不起作用。我也试过重启我的电脑，但问题仍然存在。

有谁知道如何解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:47:41.977

我刚刚下载了另一个 Eclipse，并且在新的 Eclipse 中一切正常。

所以我之前的 Eclipse 中可能有一些东西损坏了。好奇怪！

# ios - iphone网络编程

> ID：15004804
> 
> 赞同：0
> 
> 时间：2013-02-21T14:30:45.307
> 
> 标签：ios

我是IOS编程的新手。我想使用 WiFi 网络通过 TCP/IP 协议向 iPhone 发送数据。我已经完成了客​​户端发送数据的工作。我想知道Iphone可以成为接收数据并在屏幕上显示的服务器吗？服务器必须从客户端侦听端口我想使用什么命令或方法？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:35:11.970

检查这是否对您有帮助：[https ://github.com/fpotter/socketio-cocoa](https://github.com/fpotter/socketio-cocoa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:39:39.617

是的，iPhone 可以充当服务器。

一个简单的方法是使用 Robbie Hanson 的名为[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)的包装器。

它带有服务器示例。我相信服务器代码是为 OSX 编写的，但它可以很容易地转换为 iOS 使用。

您可能遇到的一个问题是可发现性 - 查找设备的当前 IP - 您可以使用 Bonjour 解决此问题，但这是另一个主题。不过很容易实现。

# int - C 将 int 转换为十六进制并剪切最后两位数字

> ID：15004805
> 
> 赞同：0
> 
> 时间：2013-02-21T14:30:48.977
> 
> 标签：int, hex

我正在用 C 语言编写，并且在转换整数时遇到问题。

我想要做的是以下内容：

我有一个整数叫做：校验和。

我想将此整数转换为十六进制格式，然后只取最后两个数字并将它们转换回 dez 格式的整数。

**例子：**

校验和 = -864

在十六进制中，这将是：FFFFFFFFFFFFFCA0

最后两位数字是：A0

dez格式的“A0”是：160。

我怎样才能在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:36:16.137

```
char m_c_end_dec = (char)checksum & 0xff;
int m_end_dec = (int)m_c_end_dec; 
```

简单转换需要最后一位，因为 char 只有 1 位，然后将其重新转换为 int，将 A0 设为 160。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:35:45.667

我不知道这与（中间）十六进制表示有什么关系（我也不明白你为什么需要大喊大叫）。只需获取校验和的最后一个字节并使用适当的格式字符串来打印它：

```
printf("checksum is %d\n", checksum & 0xff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:36:41.877

或使用字符串格式。例如

printf("%02x", 校验和)

或大写 printf("%02X", checksum)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:41:41.063

如果您接受字符串作为结果，则可以递归地实现到十六进制的[转换。](http://en.wikipedia.org/wiki/Hexadecimal#Division-remainder_in_source_base)从此字符串中，您可以轻松地删除最后两位数字（检查 google/SO）并将它们转换回来

# url - # 签署 drupal 后获取 url 参数

> ID：15004808
> 
> 赞同：0
> 
> 时间：2013-02-21T14:31:00.913
> 
> 标签：url, drupal-7

每个人，如果我们想像这样在 url 中获取参数

```
/node/x/y
we use arg(1) -> get x and arg(2) -> get y
but if i have a url like that 
/node/x/y#abc 
```

我如何`abc`在drupal中获取参数非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:36:53.327

从服务器端，您无法获取标志之后的 URL 部分`#`或`#`标志本身。

浏览器在登录后不会向`#`服务器发送任何导致页面加载的内容。这就是为什么您`#`在许多 Ajax 应用程序的 URL 中看到的原因（尽管 HTML5 可以更改完整的 URL）。

如果您仍然需要根据哈希标记显示不同的内容，则必须添加一些 Ajax 以通过 JavaScript 向服务器发出第二个请求。

# android - 在 Google Maps API v1 和 v2 之间进行选择

> ID：15004817
> 
> 赞同：1
> 
> 时间：2013-02-21T14:31:20.253
> 
> 标签：android, google-maps

在开发 Android 应用程序的过程中，我使用 Google Map android v1 获取 API 密钥并添加到 Xml 及其显示中。我怀疑 v2 现在可用，我在 Google 搜索中发现 v1 APIkey 提供将从 3 月 3 日起停止。所以现在，如果我用 v1 创建它会在 3 月 3 日之后在果冻豆的 froyo 中工作。

由于 v2 将支持新版本的 API 级别 17，并且不支持没有 OpenGL 的较低版本，所以如果我使用 v1 创建应用程序，是否可以支持 API 级别 7 到 17？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:39:53.577

```
Will I be given opportunity to edit API key after March 3rd ? 
```

***不***

```
if I create with v1 will it be working in froyo to Jelly Bean after March 3rd. 
```

***是的***

> 最好使用 Google Maps Api V2 而不是 V1，因为**Google Maps Android API v1 不会添加任何新功能。但是，使用 v1 的应用程序将继续在设备上运行**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:47:12.167

两种 API 在设计上都非常不同，从一个到另一个需要大量工作。v2 的唯一限制是 Android 2.3 和 OpenGL ES 2.0，根据 Android dashbord，截至 2 月 1 日，Android 2.3 为 90%，截至 10 月 1 日，opengl 2.0 为 92%。

因此，我建议您直接从 v2 开始。

v1 是一个“工作”的 API，但存在严重的设计问题，而 v2 限制性更强，因为它更加优化。（您必须在 v1 上进行的大多数优化，您不再需要在 v2 上进行）

# java - java.lang.ClassNotFoundException：org.apache.commons.lang.exception.NestableRuntimeException

> ID：15004822
> 
> 赞同：12
> 
> 时间：2013-02-21T14:31:44.360
> 
> 标签：java, servlets

我正在尝试从数据库中检索数据。当我运行程序时，它显示错误`java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException`我的目录中有`json-lib`jar 文件`WEB-INF --> lib`，我不知道为什么它显示此错误`JSONArray`。

我的代码是：

```
 StringBuilder sb=new StringBuilder(1024);
        sb.append("select * from ").append(uname.trim()).append("vcomments").append(" where itemid=").append(itemId).append(" and albumid=").append(albumId);
        sql=sb.toString();
        stmt = conn.prepareStatement(sql);
        ResultSet rs = stmt.executeQuery();
        //ArrayList<String> CommArray=new ArrayList();
        JSONArray arrayObj=new JSONArray();                //#100

         while(rs.next()){
            Commenter comment = new Commenter();
            comment.setUname(rs.getString("uname").trim());
            comment.setComment(rs.getString("comments").trim());
            arrayObj.add(comment.toString());

            }    
         commentObj=gson.toJsonTree(arrayObj);
         myObj.add("commentInfo", commentObj);
         out.println(myObj.toString());
         rs.close();                                                              
         stmt.close();                                                            
         stmt = null;                                                             

         conn.close();                                                            
         conn = null;                                                  

     } 
```

控制台输出是：

```
 SEVERE: Servlet.service() for servlet [VComment] in context with path [/skypark] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
at skypark.VComment.doGet(VComment.java:100)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

请任何人告诉我如何解决这个问题......谢谢......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T17:07:28.510

我有同样的问题 - 和你一样 - 我下载了最新的 commons-lang。但实际上我可以通过下载 [apache commons-lang 2.6](http://commons.apache.org/proper/commons-lang/download_lang.cgi) ( [DDL](http://mirror.nexcess.net/apache//commons/lang/binaries/commons-lang-2.6-bin.tar.gz) ) 并将 jar 放在 WEB-INF/lib下来解决它

希望您在此期间解决了它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-29T08:20:29.997

您缺少 commons-lang jar VERSION 2（即不是最新版本）

最新的 commons-lang jar VERSION 3 的类在包中：org.apache.commons.lang3

虽然 OLDER commons-lang jar VERSION 2 的类在包中：org.apache.commons.lang

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T14:41:04.120

[findjar.com](http://www.findjar.com/class/org/apache/commons/lang/exception/NestableRuntimeException.html)建议使用可能丢失的几个 jar 文件之一。您应该将[Apache commons-lang](http://commons.apache.org/lang/) .jar 文件与您的解决方案打包在一起。它应该在您部署的 .war 文件中，或者在您的 Tomcat lib 目录中。

如果您拥有它（并且您已确认可以在解决方案中从该 .jar 实例化/引用类），那么可能是 .jar 版本问题。您的 JSON 库应该引用哪个*版本的 commons-lang？*

查看 JSON-lib[传递依赖](http://json-lib.sourceforge.net/dependencies.html)项（向下滚动查看这些）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-29T09:04:34.880

使用 net.sf.json 使用 Commons Lang，在 Brian 提供的列表 ( [http://json-lib.sourceforge.net/dependencies.html](http://json-lib.sourceforge.net/dependencies.html) ) 中，指定了 Commons Lang 2.5 版。net.sf.json 的当前版本与 Commons Lang 3 不兼容。为了安全起见，您应该使用指定的版本 (2.5)，即使我们发现 2.6 版工作正常。

NestableRuntimeException 的 ClassNotFoundException 是尝试将 Commons Lang 3 与 net.sf.json 一起使用的效果。

由于您的 WEB-INF/lib 中有 Commons Lang jar，因此您只需将版本 3 中的那个与 Commons Lang 2.5（或 2.6）jar 交换即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T15:00:49.800

看起来，它找不到**org.apache.commons.lang.exception.NestableRuntimeException**。

确保您在 WEB-INF --> lib 中具有**commons-lang依赖项。**

你在这里找到它 [http://commons.apache.org/lang/download_lang.cgi](http://commons.apache.org/lang/download_lang.cgi)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T14:33:48.223

您使用的是哪种应用程序引擎？我在使用 Eclipse 代码引擎时遇到了重大问题，但我更改为 Apaches Tomcat 7，只是将 .xml 文件重定向为使用应用程序项目中的那个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-14T06:07:16.163

**缺少一些库（jar 文件）**

因为我使用了“json-lib-2.4-jdk15.jar”，所以我必须添加其他需要库才能与它们一起使用，例如：

*   commons-beanutils-1.8.3.jar
*   commons-collections-3.2.1.jar
*   commons-lang-2.4.jar
*   commons-logging-1.1.1.jar
*   ezmorph-1.0.jar

* * *

*参考链接：*

> *   [https://atin.tistory.com/418](https://atin.tistory.com/418)
> *   [https://redtrain.tistory.com/819](https://redtrain.tistory.com/819)

*更多细节检查这个*

> [http://json-lib.sourceforge.net](http://json-lib.sourceforge.net)

# php - 使用 PHP 将 HTML 格式转换为文本文件

> ID：15004823
> 
> 赞同：3
> 
> 时间：2013-02-21T14:31:44.600
> 
> 标签：php, html, forms

我有一个用 HTML 编写的表单和一个 PHP 文件，该文件应该能够将输入生成到同一目录中的文本文件中。我之前用一个不同的简单 HTML 文件对其进行了测试，它可以工作，现在我试图将它应用到一个更大的 HTML 文件，但不知何故它不会工作，我找不到它有什么问题。

反馈.html：

```
<html>
<head>
        <script>
        function myFunction()
        {
            alert("Your feedback has been sent! Thank you");
        }   
        </script>
</head>
<body>
<div class="Linksediv">
    <h3>Feedback</h3>
    <p>Please enter your name and give us some feedback</p>
        <form action="form1.php" method="post">
            Name<input id="Email" size="30" type="text" name="field1"/><br/>
                <textarea id="pass" type="text" name="field2" rows="4" cols="24">Please give us some feedback
                    </textarea>
             <br/>
                <input type="button" name="submit" value="submit" id="buttonOk" onclick="myFunction()" value="Show alert box" />
        </form>

</div>
</body>
</html> 
```

Form1.php

```
<?php
if(isset($_POST['field1']) && isset($_POST['field2'])) {                    //Check if fields are there in HTML file
    $data = $_POST['field1'] . ' - ' . $_POST['field2'] . "\n";             //output
    $ret = file_put_contents('data1.txt', $data, FILE_APPEND | LOCK_EX);    //file dir for data1.txt
    if($ret === false) {                                                    //check if anything was written down
        die('There was an error writing this file');
    }
    else {
        echo "$ret bytes written to file"."\n";
    }
}
?> 
```

如果我在我的表单上按提交，那么我只会收到一个带有警报的弹出窗口，并且不会写入文本文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:36:19.433

以下行

```
<input type="button" name="submit" value="submit" id="buttonOk" onclick="myFunction()" value="Show alert box" /> 
```

创建一个输入 type="button"，而不是 type="submit"，因此实际上并没有提交表单。

另外，考虑在帖子之后而不是点击时显示成功消息，当文件成功写入后，只需在 form1.php 脚本上回显它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:42:16.567

在将输入类型从按钮更改为提交后，您可能还需要向 onclick 处理程序添加“return true”语句。返回 false 会阻止提交按钮执行其默认操作，即提交表单。如果您没有返回值，则行为可能相同。

```
function myFunction()
{
   alert("Your feedback has been sent! Thank you");
   return true;
} 
```

# loops - 循环变量字符串 BATCH 中的每个字符

> ID：15004825
> 
> 赞同：7
> 
> 时间：2013-02-21T14:31:55.710
> 
> 标签：loops, batch-file, character

我正在尝试遍历 string 中的每个字符。但是，我只知道如何使用以下方法循环字符串中的每个单词：

```
(set /P MYTEXT=)<C:\MYTEXTFILE.txt

set MYEXAMPLE=%MYTEXT%
for %%x in (%MYEXAMPLE%) do (
ECHO DO SOMTHING
) 
```

如何将其配置为按字符而不是按单词工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-29T16:26:05.007

这是遍历字符串中每个字符的简单直接的方法：

```
@echo off
setlocal ENABLEDELAYEDEXPANSION

set /P mytext= < MYTEXTFILE.txt
echo Line is '%mytext%'

set pos=0
:NextChar
    echo Char %pos% is '!mytext:~%pos%,1!'
    set /a pos=pos+1
    if "!mytext:~%pos%,1!" NEQ "" goto NextChar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T18:14:55.747

AFAIK，`FOR`无法进行字符迭代 - 一种可能的解决方法是构建这样的循环：

```
@ECHO OFF
:: string terminator: chose something that won't show up in the input file
SET strterm=___ENDOFSTRING___
:: read first line of input file
SET /P mytext=<C:\MYTEXTFILE.txt
:: add string terminator to input
SET tmp=%mytext%%strterm%
:loop
:: get first character from input
SET char=%tmp:~0,1%
:: remove first character from input
SET tmp=%tmp:~1%
:: do something with %char%, e.g. simply print it out
ECHO char: %char%
:: repeat until only the string terminator is left
IF NOT "%tmp%" == "%strterm%" GOTO loop 
```

**注意：**问题标题表明您要循环遍历“变量字符串中的每个字符”，这表明输入文件仅包含一行，因为该命令`(set /P MYTEXT=)<C:\MYTEXTFILE.txt` **只会读取** `C:\MYTEXTFILE.txt`. 如果您想遍历文件中的所有行，则解决方案有点复杂，我建议您为此打开另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-28T18:56:55.497

下面的`splitStr`子程序：

*   将逐个打印出字符串中的每个字符
*   无论延迟扩展的状态如何，都可以安全地调用
*   没有超慢`goto`循环
*   处理 CR 和 LF
*   设置`errorLevel`字符串中的字符数

```
@echo off & setLocal enableExtensions disableDelayedExpansion
(call;) %= sets errorLevel to 0 =%

set "testStr=uncopyrightable"
call :splitStr testStr
if errorLevel 1 (
    >&2 echo(string is %errorLevel% char(s^) in length
) else (
    >&2 echo(empty string
    goto die
) %= if =%
goto end

:die
(call) %= sets errorLevel to 1 =%
:end
endLocal & goto :EOF

:splitStr string=
:: outputs string one character per line
setLocal disableDelayedExpansion
set "var=%1"

set "chrCount=0" & if defined var for /f "delims=" %%A in ('
    cmd /v:on /q /c for /l %%I in (0 1 8190^) do ^
    if "!%var%:~%%I,1!" neq "" (^
    echo(:^!%var%:~%%I^,1^!^) else exit 0
') do (
    set /a chrCount+=1
    echo%%A
) %= for /f =%

endLocal & exit /b %chrCount% 
```

# java - 从 Eclipse 解密保存的密码

> ID：15004834
> 
> 赞同：0
> 
> 时间：2013-02-21T14:32:42.567
> 
> 标签：java, android, eclipse, keystore, encryption

看来我放错了一个 Android 项目的密钥库的密码。我仍然有密钥库，但没有密码。但是，密码保存在 Eclipse 中的 Signing and Keys 选项卡中。我在 org.eclipse.equinox.security 目录中也有 secure_storage 文件，似乎我存储的密码在那里，已编码。对我来说，如果我使用存储的密钥库密码版本，那么密码需要在某个时候被解码，才能传递给密钥库。因此，我想知道我需要做什么来自己解码并检索密码。

任何帮助，将不胜感激！

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:06:36.223

经过大量研究，我找到了如何从安全存储中恢复密码。正如我推测的那样，Eclipse 必须有办法提取保存的密码，否则它永远无法用于解锁密钥库。我发现了这篇文章：[Eclipse password recovery](https://stackoverflow.com/questions/13100747/eclipse-password-recovery)这使我进入了查看已保存密码的方法。唯一需要一些工作的是实际执行代码。我没有走 eclipse-shell 路径，而是使用该代码创建了一个 eclipse 插件项目。请注意，该代码不适用于标准 Java 项目。

当然，实际的安全存储是使用操作系统身份验证加密的，因此这仅适用于从最初加密的机器上解密密码。问题从来不在于没有正确密码的解密，而是在于使用内置的解密方法来获取纯文本密码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-21T14:36:59.630

你不能。它使用操作系统加密或/和 jvm。标准通常是一些 AES-256 位，很难破解。

我不认为你会在这里得到任何帮助。

# android - Android parse.com 收不到推送通知

> ID：15004836
> 
> 赞同：4
> 
> 时间：2013-02-21T14:32:43.433
> 
> 标签：android, android-notifications, parse-platform

我无法使用 parse.com 服务接收推送通知。
我使用快速指南试图解决我的问题。我试图使用频道这个指定的名称和“”作为频道名称。我还发现[无法使用 trigger.io 和 parse.com 在 Android 中接收推送通知](https://stackoverflow.com/questions/14499947/cannot-receive-push-notifications-in-android-with-trigger-io-and-parse-com)
**我成功将对象发送到 parse.com 并订阅通知（至少我可以在 parse.com 上的 DataBrowser 中看到我的应用程序）**

```
public class ParseStarterProjectActivity extends Activity {

     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         setContentView(R.layout.main);

          PushService.subscribe(this, "push", TestParse.class);
          PushService.setDefaultPushCallback(this, TestParse.class);

     }
}

 public class ParseApplication extends Application {

      @Override
      public void onCreate() {
       super.onCreate();
       Parse.initialize(this, my_id, my_client_key);
      }  

}

public class TestParse extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.parse);
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.parse.starter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <application
        android:name="ParseApplication"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <service android:name="com.parse.PushService" />

        <receiver android:name="com.parse.ParseBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.USER_PRESENT" />
            </intent-filter>
        </receiver>

        <activity
            android:name=".ParseStarterProjectActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TestParse"
            android:label="@string/app_name" />
    </application>

</manifest> 
```

**最近我注意到 LogCat 错误：**

> 02-21 18:17:45.381: ERROR/Trace(8952): 错误打开跟踪文件: 没有这样的文件或目录 (2)
> 02-21 18:17:48.534: ERROR/com.parse.PushService(8888): 未知主持人

我真的很想收到通知。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:29:48.247

在这里解析员工。为了处理我们的推送服务增加的负载，我们增加了服务 push.parse.com 的机器数量。当 DNS 解析返回这么多服务器时，一些 ISP 开始出现问题。上周五下午，我们推出了一个自定义 DNS 服务器，它通过 3rd 方 DNS 解析解决了这些问题。这应该不再是一个问题。

# javascript - mongoose.js CastError：在路径“未定义”处为值“[object Object]”转换为数字失败

> ID：15004837
> 
> 赞同：10
> 
> 时间：2013-02-21T14:32:47.373
> 
> 标签：javascript, mongoose, schema

与. `Mongoose.js`_`node.js`

我有这个架构：

```
var Photo = new Schema({
     URL:String
    ,description:String
    ,created_by:{type:ObjectId, ref:'User'}
    ,created_at:{type:Date, default:Date.now()}
});

var User = new Schema({
    name:{type:String,index:true}
    ,email:{type:String,index:true, unique:true}
});

//Task model                                                                                                                                                                                       
var Task = new Schema({
    title:String
   ,created_by:{type:ObjectId, ref: 'User'}
   ,created:{type:Date, default:Date.now()}
   ,responses:[{
       type:Number
      ,user:{type:ObjectId, ref: 'User'}
       ,comment:String
       ,avatarURL:String
       ,photo:{type:ObjectId, ref: 'Photo'}
      ,created:{type:Date, default:Date.now()}
   }]
});

//Group model                                                                                                                                                                                      
var Group = new Schema({
     name:String
    ,tasks:[Task]
}); 
```

并且此代码出错（组很好，idx 处的任务很好，响应是一个空数组，用户有效，照片有效）：

```
var typePhoto = 6;
 var resp = {
      type: typePhoto//photo                                                                                                                                                 
      ,user: user._id
      ,photo: photo._id
 };

 group.tasks[taskIdx].responses.push(resp); //errors out here 
```

那时我收到以下错误：

```
/home/admin/notitws/node_modules/mongoose/lib/utils.js:434
        throw err;
              ^
CastError: Cast to number failed for value "[object Object]" at path "undefined"
    at SchemaNumber.cast (/home/admin/notitws/node_modules/mongoose/lib/schema/number.js:127:9)
    at Array.MongooseArray._cast (/home/admin/notitws/node_modules/mongoose/lib/types/array.js:78:15)
    at Object.map (native)
    at Array.MongooseArray.push (/home/admin/notitws/node_modules/mongoose/lib/types/array.js:187:23)
    at exports.taskAddPhoto (/home/admin/notitws/routes/group.js:1097:35)
    at Promise.exports.createPhoto (/home/admin/notitws/routes/photos.js:106:4)
    at Promise.addBack (/home/admin/notitws/node_modules/mongoose/lib/promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/home/admin/notitws/node_modules/mongoose/lib/promise.js:66:38)
    at Promise.complete (/home/admin/notitws/node_modules/mongoose/lib/promise.js:77:20) 
```

有关如何解决此问题或可能导致此问题的任何想法？

PS不知道这是否重要，但在我正在填充`tasks.responses.user`和获取组的呼叫`tasks.responses.photo`中`tasks.created_by`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-21T14:44:25.977

mongoose 使用“type”关键字来确定字段的类型。Mongoose 可能认为响应的类型是 Number 而不是数组。

尝试：

```
responses:[{
   type: {type: Number}
   ,user:{type:ObjectId, ref: 'User'}
   ,comment:String
   ,avatarURL:String
   ,photo:{type:ObjectId, ref: 'Photo'}
   ,created:{type:Date, default:Date.now()}
}] 
```

另一种选择是将您的响应对象包装到一个模式中：

```
responses: [Response] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T18:49:51.180

我正在发布将我的转换固定为 objectId 的内容。这是我的 features 文档的 updatedBy key 的故事。我添加了一些评论，向您展示有问题的区域对应于铸造问题。

进口猫鼬；

```
 var mongoose = require('mongoose'); 
```

定义对象ID；

```
 var ObjectId = mongoose.Schema.Types.ObjectId; 
```

在你的模式中定义类型；

```
 var featureSchema = new Schema({
        name: String,
        isSystem: { type: Number, min: 0, max: 1 },
        updatedBy: {type:ObjectId, ref:'users'}, //here I defined the field!
        updatedAt: { type: Date, default: Date.now }
}); 
```

然后通过 post 方法插入文档；

```
 app.post('/features', function (req, res){
          var feature;
          console.log("POST: ");
          console.log(req.body);
          feature = new Feature({
                   name: req.body.name,
                   isSystem: req.body.isSystem,
                   updatedBy: req.body.updatedBy, //here I insert the objectId field
                   updatedAt: new Date()
          });
          feature.save(function (err) {
                   if (!err) {
                            return console.log("created");
                   } else {
                        return console.log(err);
                   }
          });
         return res.json({ features: feature });
    }); 
```

最后这是你的 json 字符串。您可以从 google chrome javascript 控制台或类似控制台启动它；

```
 jQuery.post("/features", {
                "name": "Receipt",
                "isSystem": 0,
                "updatedBy": "528f3d44afcb60d90a000001" 
     },function (data, textStatus, jqXHR) {
                 console.log("Post resposne:"); console.dir(data);                 
                 console.log(textStatus);                             
                 console.dir(jqXHR);
     }); 
```

# python - 如何将列表写入 Excel 列？

> ID：15004838
> 
> 赞同：7
> 
> 时间：2013-02-21T14:32:48.420
> 
> 标签：python, openpyxl

我有一个 Python 中的一些值的列表，并希望使用 openpyxl 将它们写入 Excel 电子表格列。

到目前为止，我尝试过，`lstStat`需要写入 Excel 列的整数列表在哪里：

```
for statN in lstStat:
    for line in ws.range('A3:A14'):
        for cell in line:
            cell.value(statN) 
```

我`TypeError: 'NoneType' object is not callable`在代码片段的最后一行得到了一个。

你能帮我弄清楚如何将我的数据写入 Excel 列吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T14:38:08.600

要将值分配给单元格，请使用`=`：

```
cell.value = statN 
```

您还需要修复循环。请注意，现在，对于 中的*每个*元素`lstStat`，您正在编写*整个范围*。除了不是你想要的那样，它也不太灵活：如果`lstStat`有更多或更少的元素会发生什么？

你想要做的只是循环`lstStat`并在你去的时候增加行号。就像是

```
r = 3
for statN in lstStat:
    ws.cell(row=r, column=1).value = statN
    r += 1 
```

你也可以使用 Python 的`enumerate`函数：

```
for i, statN in enumerate(lstStat):
    ws.cell(row=i+3, column=1).value = statN 
```

（请注意，`cell(row=1, column=1)`从[OpenPyXL 版本 2.0.0 开始](https://openpyxl.readthedocs.io/en/default/changes.html#id300)引用 A1 ；在早期版本中，A1 是`cell(row=0, column=0)`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-12T08:52:39.537

```
from openpyxl import load_workbook,Workbook

wb=load_workbook('Book1.xlsx')
ws1=wb.get_sheet_by_name('Sheet1')

shs=wb.get_sheet_names()
print(type(shs))
# shs is list

for r in range(0,len(shs)):
    ws1.cell(row=r+1,column=1).value=shs[r]

wb.save('Book1.xlsx') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T09:17:16.570

Openpyxl 不允许您在 excel 单元格中编写列表，但是如果您将列表转换为字符串，您可以将其粘贴到 excel 中。

例如，这会导致错误

`my_list = ['1','2','3'] ws.cell(row=r, column=1).value = my_list`

但是，这会将列表的字符串粘贴到excel中

`my_list = ['1','2','3'] new_list = str(my_list) ws.cell(row=r, column=1).value = new_list`

# sql - 将 NULL 与空间索引一起使用

> ID：15004850
> 
> 赞同：1
> 
> 时间：2013-02-21T14:33:10.953
> 
> 标签：sql, sql-server, null, geospatial, spatial-index

我在 SQL Server 数据库中有大量照片（约 1000 万张），其地理坐标列可以为 NULL 或 NOT NULL（未放置或放置在地图上）。

我还在这个地理信息上创建了一个空间索引。

现在我正在尝试选择某个多边形内的所有照片。

有两种方法可以存储不在地图上的照片：

*   如果我将 NULL 分配给不在地图上的所有照片的地理位置，则此类查询的性能太慢（正如我所不理解的，空间索引根本不适用于 NULL 列）。

*   如果我分配`POINT(0 0)`给不在地图上的所有照片的地理位置，则性能很好，除了这个零点的情况`POINT(0 0)`。此类请求也返回错误的照片（它们在地图上不存在）。

我怎样才能克服这些问题？

我应该添加包含 NULL 或 NOT NULL 位的列并从两列（此列和地理信息）创建索引吗？

**更新**我试图从两列创建索引，但这是不可能的，因为空间索引只包含一列带有地理信息（[MSDN](http://technet.microsoft.com/ru-ru/library/bb934196.aspx)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:47:44.637

您使用的是什么版本的 SQL Server？2008 和 2008 R2 中的可空空间列存在一个已知问题请查看我关于同一主题的问题：[SQL Server 2008 Performance on nullable geography column with spatial index](https://stackoverflow.com/questions/4954875/sql-server-2008-performance-on-nullable-geography-column-with-spatial-index)

我通过有一个单独的表来存储空间数据类型解决了这个问题。在我的项目中，我有一个带有 Id 列、一个纬度和一个经度列的地址表然后我有一个 AddressCoordinate 表，它对地址的 Id 和一个地理列有一个外键约束。最后，我有一个脚本可以每天填充丢失的有效地址坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:02:47.587

据我了解，我的问题有两种解决方案：

*   零点`POINT(0 0)`向远北点移动`POINT(0 90)`。此解决方案并不理想，但可以正常工作并且不需要更改 SQL Server 版本。
*   通过执行以下脚本将 SQL Server 版本更改为 110（在此版本中修复了 NULL 错误）：ALTER DATABASE database_name SET COMPATIBILITY_LEVEL = 110

# java - 如何确定设备是否已在 onResume 中从睡眠模式中唤醒

> ID：15004853
> 
> 赞同：2
> 
> 时间：2013-02-21T14:33:14.880
> 
> 标签：java, android, nfc, nfc-p2p

无论如何检查是否从Android中从睡眠状态唤醒的设备调用了onResume？

我需要检查的原因是如果从睡眠状态恢复，我不希望它调用特定的方法：

```
@Override
public void onResume() {
    super.onResume();
    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())
        && !SomeCrazyMethodOrPropertyCheckingIfDeviceWakedUpFromSleep) {
        processIntent(getIntent());
    }
} 
```

你可能会说“从 onResume 中取出那个 processintent 方法”......这不是一个选项，NFC P2P 模式要求你在 onResume 中处理收到的 NDEF 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:45:25.947

我认为你可以尝试做一些事情[`ACTION_SCREEN_ON`](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_ON)：

*   为它注册一个接收器（你需要在代码中，它在清单中不起作用）。
*   在`onReceive`做类似的事情：

`MY_FLAG_JUST_WAKE_UP = true;`

并在`onResume()`：

```
if(!MY_FLAG_JUST_WAKE_UP){
  doStuff();
}
MY_FLAG_JUST_WAKE_UP = false; 
```

但是，它需要测试，我不知道你是否总是会在`onResume()`被调用之前收到意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:33:52.213

我建议重写`onNewIntent()`以处理 NFC 意图：

```
@Override
public void onNewIntent(final Intent intent) {
  setIntent(intent);
  if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
    processIntent(intent);
  }
} 
```

您`processIntent()`可以检查是否已经处理了意图：

```
private void processIntent(final Intent intent) {
  if ((intent.getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) != 0) {
//  Log.v(TAG, "Ignoring intent; already treated this intent.");
    return;
  }
  intent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY);
  // new intent; process it
  ...
} 
```

这可能会解决您的问题。

# iphone - 恢复时相机变黑

> ID：15004855
> 
> 赞同：0
> 
> 时间：2013-02-21T14:33:18.367
> 
> 标签：iphone, ios, camera, preview

我的应用程序为 Apple 的演示项目 AVCam 使用了多种功能。一切正常，除了当我退出应用程序并返回时，它不再显示相机预览。有谁知道我应该使用哪段代码以及它属于哪里？我尝试搜索，但弹出了很多与 android 相关的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:49:28.803

应用程序再次激活后，您需要重新初始化相机。在您的应用程序委托方法中，覆盖、applicationDidBecomeActive 并发送通知，以便您的视图控制器知道您的应用程序再次处于活动状态。

等待收到通知，您可以重新加载 viewDidLoad，或将 viewDidLoad 的内容移动到 viewDidAppear。有多种方法可以做到这一点。您还可以在 viewWillAppear 中重新加载 viewDidLoad 的内容。就像我说的，有很多很多方法可以做到这一点。

# sql - 将条件传递给子查询 - rails activerecords

> ID：15004862
> 
> 赞同：1
> 
> 时间：2013-02-21T14:33:36.233
> 
> 标签：sql, ruby-on-rails, rails-activerecord

我有一个 QuestionCategory 模型，他有很多问题。

当我执行此查询时，`@quizzs = QuestionsCategory.find(:all)`一切正常。它正在查询所有类别和相关问题：

```
QuestionsCategory Load (0.2ms)  SELECT `questions_categories`.* FROM `questions_categories` 
  Question Load (0.3ms)  SELECT `questions`.* FROM `questions` WHERE `questions`.`questions_category_id` = 1
  Question Load (0.4ms)  SELECT `questions`.* FROM `questions` WHERE `questions`.`questions_category_id` = 2
  Question Load (0.3ms)  SELECT `questions`.* FROM `questions` WHERE `questions`.`questions_category_id` = 3 
```

但是，我想将条件传递给问题子查询。就像是 `@quizzs = QuestionsCategory.find(:all, :questions => [ :conditions => {MY CONDITIONS} ])`

然后得到如下所示的子查询：

SELECT questions.* FROM questions WHERE questions.questions_category_id = 2`AND MY CONDITIONS`

可能的？欢呼队友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:37:04.457

要获得`SQL`( `SELECT questions.* FROM questions WHERE questions.questions_category_id = 2 AND MY CONDITIONS`) 的结果，您可以执行以下操作：

```
 QuetionsCategory.find(2).questions.all(:conditions => [Your conditions]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:29:31.267

您需要模型中的默认范围。

将此放入您的 QuestionCategory 模型中。

```
default_scope joins(:questions).where(conditions) 
```

然后

QuestionCategory.all 应该给你预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:23:02.940

范围呢？

问题类别控制器：

```
def your_action_name
  @quizzs = QuestionsCategory.all.collect{|qc| qc.questions.published == true} 
```

问题模型：

```
class Question < ActiveRecord::Base
  scope :published, where(:published => true)
end 
```

通过这种方式，您可以链接您想要应用到的所有范围（条件）`Question`

# vbscript - 从 txt 复制信息并粘贴到另一个 vbscript

> ID：15004871
> 
> 赞同：2
> 
> 时间：2013-02-21T14:34:15.910
> 
> 标签：vbscript, copy-paste

我正在尝试从 .txt 复制一行文本-> 粘贴到另一个文件中并保存。我一直在粘贴部分给我错误的代码。我在这方面是全新的，并且在我去的时候学习。我的主要目标是将信息粘贴到`Host=`另一个文件中。但我需要先把它弄下来。

到目前为止，这是我的代码

```
 ///OPEN FILE and READ
Set objFileToRead = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\vnc\vnc.txt",1)
strFileText = objFileToRead.ReadAll()
objFileToRead.Close

' ///PASTE 
Set objFSO = CreateObject("Scripting.FileSystemObject") 
Set objFileToWrite = objFSO.OpenTextFile("c:\vnc\testfile.vnc", 2)
objFileToWrite.Write strFileText
objFileToWrite.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:43:21.623

这对我有用：

```
'//OPEN FILE and READ
Set objFileToRead = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\vnc.txt",1)
strFileText = objFileToRead.ReadAll()
objFileToRead.Close

' ///PASTE 
Set objFSO = CreateObject("Scripting.FileSystemObject") 
Set objFileToWrite = objFSO.OpenTextFile("c:\vnc.vnc", 2)
objFileToWrite.Write strFileText
objFileToWrite.Close 
```

我所做的唯一区别是删除子文件夹，并放入 C 的根目录：脚本有效。

我手动创建了源文件和目标文件。如果这两个文件都存在并且没有被锁定（就像您在另一个应用程序中打开/锁定它一样），那么该 VNC 文件夹的权限一定是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T10:56:07.177

如果您的文件权限仍然拒绝您写入，那么您必须使用鼠标右键单击更改该文件的安全性，并更新高级设置。

# c# - 如何从数据表中提取特定数据？

> ID：15004872
> 
> 赞同：0
> 
> 时间：2013-02-21T14:34:16.410
> 
> 标签：c#, database, datatable

我正在创建一个游戏，其中我所有的敌人都位于数据库中。我将表放在我的数据表中，但是如何访问其中的特定数据？例如，我想访问数据表中精灵的敌人。我知道您可以使用 foreach 显示整行，但我只想从该行获取某些值来创建我的敌人对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:44:07.823

要访问 a 中的特定数据，`DataTable`您可以这样做：

```
dataTable.Rows[0][0] 
```

或者您可以通过字段名称进行操作：

```
dataTable.Rows[0]["field_name"] 
```

所以你可以用这样的语句初始化你的属性。

* * *

如果您正在与`DataRow[]`@lazyberezovsky 所说的类似的人一起工作，那么它可能看起来像这样：

```
dataRowArray[0][0] 
```

或者：

```
dataRowArray[0]["field_name"] 
```

# java - 在 JFrame 和 Windows 任务栏中使用不同的图标

> ID：15004874
> 
> 赞同：3
> 
> 时间：2013-02-21T14:34:22.677
> 
> 标签：java, swing, icons, taskbar

有没有办法在 JFrame 和 Windows 任务栏上使用不同的图标？

当我设置 JFrame.setIconImage(img) 时，这个相同的图像用作 Windows 图标。我可以对 JFrame 和 Windows 任务栏使用不同的图标吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T15:02:14.383

这项工作在运行标准 Java 7 的 Windows 7 中：

```
List<Image> icons = new ArrayList<Image>();
icons.add(new ImageIcon("16.png").getImage());
icons.add(new ImageIcon("32.png").getImage());
f.setIconImages(icons); 
```

图标必须**正好是**16x16 和 32x32。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:57:34.923

您可以使用 setIconImages() 提供不同大小的图标列表。JRE 将为每次使用选择最佳可用尺寸（因此，当图标以较大尺寸显示时，可以显示更详细的版本）。

AFAIK 没有计划的方式来显示特定用途的不同图标。

您可以使用 setUndecorated(true) 并自己渲染窗户装饰，但要使其按预期工作并非易事（由于外观和感觉）。一个 hacky 解决方案可能是通过窗口对等组件（在运行时使用 JDK 源 + 反射）找到您的方式，并为一个或另一个对等组件提供不同的图标。同样，这可能需要特定于活动 L&F 的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T18:08:27.220

我无法使用建议的解决方案，因为我有 jdk 1.5 作为要求...

所以，我这样做了：

```
public void setAppIcons(JFrame frame) {
    List<Image> images = new ArrayList<Image>();
    images.add(getImage(MessageUtils.getString("application.images.icon.app.32")).getImage());
    images.add(getImage(MessageUtils.getString("application.images.icon.app.16")).getImage());

    try {
        Class<?> [] types = {java.util.List.class};
        Method method = Class.forName("java.awt.Window").getDeclaredMethod("setIconImages", types);

        Object [] parameters = {images};
        method.invoke(frame, parameters);
    } catch (Exception e) {
        frame.setIconImage(images.get(0));
    }       
} 
```

如果客户端在 jre 1.6 或major 中运行应用程序，应用程序将选择要设置的图像列表...

谢谢你的建议。

# c# - 什么是 和 在泛型

> ID：15004876
> 
> 赞同：2
> 
> 时间：2013-02-21T14:34:27.890
> 
> 标签：c#, generics

我理解泛型中的“T”在这种情况下是什么：

```
public interface IEquatable<T>
{            
    bool Equals(T other);
} 
```

但不要像这种情况下那样理解“in T”：

```
public interface IComparer<in T>
{            
    int Compare(T x, T y);
} 
```

和“out T”，如本例所示：

```
public interface IEnumerable<out T> : IEnumerable
{            
    IEnumerator<T> GetEnumerator();
} 
```

有人可以帮我理解这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T14:36:40.003

`<out T>`表示`T`是*协变*的。

可以将一系列长颈鹿视为一系列动物似乎是合理的。接口的“协变”意味着“如果存在从 to 的隐式引用转换，那么也存在从`Giraffe`to的隐式引用转换。构造类型的可转换性与类型参数的可转换性“在同一方向上变化”。`Animal``I<Giraffe>``I<Animal>`

*例子：*

```
// Valid!                                // Invalid!
// Every giraffe is an animal            // Not every animal is a giraffe
IEnumerable<Giraffe> giraffes = ...;     IEnumerable<Animal> animals = ...;
IEnumerable<Animal> animals = giraffe;   IEnumerable<Giraffe> giraffes = animals;
Animal animal = animals.First();         Giraffe giraffe = giraffes.First(); 
```

* * *

`<in T>`表示`T`是*逆变*的。

可以比较两只动物的代码也可以比较两只长颈鹿，这似乎是合理的。界面的“逆变”与方向相反的协方差相同。这意味着“如果存在从 to 的隐式引用转换，那么也存在从`Giraffe`to的隐式引用转换。构造类型的可转换性“以相反的方向变化”作为类型参数的可转换性。`Animal``I<Animal>``I<Giraffe>`

*例子：*

```
// Valid!                                // Invalid!
// Animal comparer can compare           // Giraffe comparer cannot compare
// giraffes                              // arbitrary animals
IComparer<Animal> animalC = ...;         IComparer<Giraffe> giraffeC = ...;
IComparer<Giraffe> giraffeC = animalC;   IComparer<Animal> animalC = giraffeC;
int result = giraffeC.Compare(x, y);     int result = animalC.Compare(x, y); 
```

* * *

*看：*

*   [协变和逆变（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/ee207183.aspx)
*   [泛型接口的差异（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/dd233059.aspx)
*   [out（通用修饰符）（C# 参考）](http://msdn.microsoft.com/en-us/library/dd469487.aspx)
*   [in（通用修饰符）（C# 参考）](http://msdn.microsoft.com/en-us/library/dd469484.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:36:14.947

您可以阅读[`generic covariance and contravariance`](http://msdn.microsoft.com/en-us/library/dd799517.aspx).NET 4.0 中引入的内容。Eric Lippert 也有[`series of blog posts`](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/default.aspx)这个话题。

# php - Magento 可配置产品/简单产品未更新

> ID：15004879
> 
> 赞同：0
> 
> 时间：2013-02-21T14:34:49.997
> 
> 标签：php, magento, magento-1.7

我有一个可配置产品目录，每个产品都有相关的简单产品。

例如

狗粮有 2 公斤、6 公斤、8 公斤。

2kg 5.99 6kg 10.99 8kg 11.99

前端的价格应反映所选下拉选项的价格。

我的问题。它不是。

我的故障排除

*   我有角色回到默认主题来测试这个但没有运气
*   然后我研究了使用 SCP（简单可配置产品）来使用 AJAX 进行更新，我在另一个站点上有这个，这很好用。
*   然后，我查看了 Magento 论坛上讨论的从 priceHtml 块中删除 -clone

当我使用 SCP 选择下拉菜单后将产品添加到购物车时，价格会在添加到购物车时更新，但不会在产品视图页面上更新。

我现在正在查看数据，所有数据看起来都正确，并且简单产品与可配置相关联。

自定义主题或默认主题中没有 JS 错误。

我正在使用 Magento 1.7

有任何想法吗？

# android - 使用 ContentProvider 处理数据库操作是一种好习惯吗？

> ID：15004880
> 
> 赞同：1
> 
> 时间：2013-02-21T14:34:52.710
> 
> 标签：android, android-sqlite

首先让您知道我是 Android 新手。

1.  仅使用 ContentProvider 为一个应用程序处理数据库表操作是一种好习惯吗？

2.  试图创建多个类来处理数据库表操作。创建了一个数据库助手，如下所示：

    公共类 WSDatabaseHelper 扩展 SQLiteOpenHelper {

    ```
     private static final String DATABASE_NAME = "wsemp";
        private static final int DATABASE_VERSION = 5;

        public WSDatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            ItemTable.onCreate(database);
            CustomerTable.onCreate(database);
        }

        @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
            ItemTable.onUpgrade(database, oldVersion, newVersion);
            CustomerTable.onUpgrade(database, oldVersion, newVersion);
        }
    } 
    ```

创建了一个类来处理数据库表操作：

```
public class CustomerBean {
    private WSDatabaseHelper database;

    @Override
    public boolean onCreate() {
        database = new WSDatabaseHelper(getContext());
        return false;
    }

public boolean insertObject(valObj) {
    SQLiteDatabase db = database.getWritableDatabase();
    db.insert(CustomerTable.TABLE_CUST_ACCOUNT_INDEX, null, values);
    }
} 
```

但是现在我不确定如何从我的活动或会话文件中调用这个 insertObject 函数。我试过 CustomerBean.isnertObject(obj) 但它要求将方法更改为静态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:50:15.950

> 仅使用 ContentProvider 为一个应用程序处理数据库表操作是一种好习惯吗？

如果您的数据仅适用于您的应用程序并且其他应用程序无法使用它，我认为没有任何理由使用 ContentProviders。ContentProvider 用作将您的应用程序数据共享给其他应用程序的接口。如果您的数据可以共享或其他应用程序依赖于它，那么您必须使用 ContentProvider。

您还可以为内容提供者创建一组权限，以限制提供者中的某些操作。

# c# - 如何使用 AForge.NET BlobCounter 对 blob 进行垂直排序？

> ID：15004881
> 
> 赞同：1
> 
> 时间：2013-02-21T14:34:58.650
> 
> 标签：c#, feature-detection, aforge

我有斑马条纹图像，其中每个条纹都被视为一个斑点以进行进一步处理，但其中也包含不应考虑的斑点。我正在使用 AForge.NET/C#/VisualStudio2010。一个典型的例子是：

![在此处输入图像描述](../Images/0c803c328358b6bab702460a36a1e904.png)

计划是这样做的：

1.  选择一些定义垂直线的 X 坐标；
2.  取每个穿过这条垂直线的白色斑点；
3.  输出应该是垂直排序的 blob 或 blob 索引列表（这是必要的），以便白边从高到低排序。

我有这段代码，它只成功地隔离了穿过参考垂直线的边缘：

```
using AForge.Imaging;
using AForge.Imaging.Filters;

Bitmap threshold_binary = gimme_threshold_image();
var blob_counter = new BlobCounter();
blob_counter.ProcessImage(threshold_binary);
var blobs = blob_counter.GetObjects(threshold_binary, true);

int midline_x_coord = threshold_binary.Width/2;
int counter = 1;
foreach (var blob in blobs)
{
    // This saves an image for each blob (white fringe) which crosses the vertical reference line,
    // but the fringes are not sorted vertically!
    if (blob.Rectangle.X < midline_x_coord & (blob.Rectangle.X + blob.Rectangle.Width) > midline_x_coord) {
        blob_counter.ExtractBlobsImage(threshold_grayscale, blob, true);
        var blobimage = blob.Image.ToManagedImage();
        blobimage.Save(String.Format("{0}singlefringes/{1}_singlefringe.png", base_input_dir, counter));
        counter++;
    }
} 
```

由于上面的块不返回排序的边缘，另一种方法是垂直扫描中线，逐个像素，识别有序的斑点，但我很难弄清楚如何去做。一个命题是这样的：

```
for (int y = 0; y < threshold_binary.Height; y++) {
    if (threshold_binary.GetPixel(midline_x_coord, y)) {
        // somehow create a List of blobs or blob indexes,
        // but only if I can find out which blob
        // this pixel is in (brute-force would be ugly, right?)
    }
} 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T15:44:31.790

您可以通过选择按面积或大小或 x 或 y（您必须选择 y）获取 blob 的方式来垂直排序：

```
BlobCounter bc = new BlobCounter();
bc.ObjectsOrder = ObjectsOrder.YX; 
```

# compact-framework - CF 中的资源文件 - 未嵌入

> ID：15004883
> 
> 赞同：0
> 
> 时间：2013-02-21T14:35:07.543
> 
> 标签：compact-framework

我在 VS2005 中有一个 PPC2003 项目。我在项目中添加了一个资源文件 (SomeResources.resx)。`My.Resources.SomeResources.MyTestString`我可以使用（我正在使用VS 提供的默认*自定义工具名称*）访问我在文件中的测试字符串。

当 的*Build Action*属性设置为`Embedded Resource`时，应用程序引用`MyTestString`成功。

但我**不想**嵌入文件，以便在部署/安装后可以修改它的字符串值。

因此，我将*Build Action*更改为`Content`，以便将文件复制到设备上，以便将来进行操作。当我打电话时，`MyTestString`我收到以下错误：

> MissingManifestResourceException 堆栈跟踪：在 System.Resources.ResourceManager.InternalGetResourceSet() 在 System.Resources.ResourceManager.InternalGetResourceSet() 在 System.Resources.ResourceManager.InternalGetResourceSet() 在 System.Resources.ResourceManager.GetString() 在 MyApp.My.Resources .SomeResources.get_MyTestString() 在 MyApp.fMain.fMain_Load() 在 System.Windows.Forms.Form.OnLoad() 在 System.Windows.Forms.Form._SetVisibleNotify() 在 System.Windows.Forms.Control.set_Visible()在 System.Windows.Forms.Application.Run() 在 MyApp.fMain.Main()

由于文件没有嵌入，我可能需要先手动加载它吗？如果是这样，怎么做？还有其他想法吗？在实现之后就不可能做我想做的事情，我应该只创建自己的 XML 文件/阅读器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:42:19.013

资源（resx 文件）专门设计用于编译到应用程序中。如果您希望它成为目标上的可编辑内容文件，那么您必须以不同的方式处理它并使用 XML 文件之类的东西并用访问器包装它（类似于完整框架中的 Configuration 命名空间的东西）。

# php - 创建新文件时递归目录删除

> ID：15004889
> 
> 赞同：1
> 
> 时间：2013-02-21T14:35:30.277
> 
> 标签：php, file, caching, recursion, directory

所以我想创建一个删除文件夹及其内容的脚本，但是在执行此操作时可能会创建新文件。做这个的最好方式是什么？

一些例子是 - 我们有“缓存”文件夹，我想删除整个缓存，但是在执行此操作时，缓存文件夹中创建了更多文件，并且它永远不会为空，因此无法删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:38:48.170

将目录移出位置（`/tmp`例如）。然后删除它。移动是原子的，快速的（因为它只是文件系统上的指针更改，并且无论文件夹中的内容如何，​​都不会真正涉及繁重的磁盘 I/O）。

为了获得针对任何类型问题的最佳弹性，您应该创建如下目录结构：

```
/var/www/website/
    releases/
        1111/
        1112/
        1113/
    current_release/ 
```

假设您的网站当前位于`/var/www/website/releases/1113/`. `DocumentRoot`您的apache 应该设置有一个`/var/www/website/current_release/`符号链接到`/var/www/website/releases/1113`

当您需要清除缓存时，您应该做的是部署一个新版本，例如`/var/www/website/releases/1114`. 当 ti 被部署并且有一个空的缓存目录时，将符号链接翻转`/var/www/website/current_release/`到你的新版本目录。

然后，Apache 将使用空缓存文件夹从新目录中提供文件。

这是完成此类事情的唯一真正原子方式，除了使服务器脱机（这通常不是清除缓存这样微不足道的事情的选择）。

这将是该问题的一种企业级解决方案，但它还具有允许您轻松回滚生产服务器的额外好处（只需将符号链接切换到以前的版本）。如果您非常关心这个问题，这似乎是过度设计，这是*正确*的方法。

# php - php中的动态函数名

> ID：15004890
> 
> 赞同：13
> 
> 时间：2013-02-21T14:35:31.857
> 
> 标签：php, function, dynamic, wordpress

我想简化在 WordPress 中创建“自定义帖子类型”，因为通过相同的脚本并一遍又一遍地手动更改所有自定义帖子类型名称实例是乏味的。

通过创建一个包含 CPT 名称的变量并在需要的任何地方使用它来实现非常简单。这样，我所要做的就是在脚本的开头声明变量，剩下的就交给我了。

唯一的问题是，为了让它工作，我还需要在脚本中的每个函数前面加上 CPT 名称的前缀，似乎在函数名称中使用变量并不容易，甚至在 PHP 中也不推荐。

那么我该如何解决呢？

为了清楚起见，下面是一个示例：

```
$prefix = 'news';

function news_custom_type_init()
{
    global $prefix;

    register_post_type($prefix, array(
    'labels' => array(
          'name' => $prefix,
          'singular_label' => $prefix,
          'add_new' => 'Add',
          ...
        ));

        register_taxonomy_for_object_type( 'category', $prefix );
}
add_action('init', $prefix.'_custom_type_init'); 
```

这几乎没问题并且可以标准化，只要我可以动态地重命名函数以便不必在它前面写单词“news”而是使用“$prefix”代替。

这本来可以很好，但不起作用：

```
$prefix = 'news';

$functionName= $prefix."_custom_type_init";

function $functionName()
{
    global $prefix;

    register_post_type($prefix, array(
    'labels' => array(
          'name' => $prefix,
          'singular_label' => $prefix,
          'add_new' => 'Add',
          ...
        ));

        register_taxonomy_for_object_type( 'category', $prefix );
}
add_action('init', $prefix.'_custom_type_init'); 
```

必须手动命名函数有点违背了我尝试的最初目的（尤其是当脚本嵌入了像这样的几十个函数时）。

最好的方法是什么？

PS：我在谷歌上搜索并“stackoverflowed”了很多关于这个但没有找到任何适合我需要并且不会生成 WordPress 错误消息的有效解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T14:39:26.720

很简单，这是一个类似的项目截图：

```
$function = $prefix . '_custom_type_init';
if(function_exists($function)) {
  $function();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-04T12:42:20.693

这是一个旧线程，但只是使用匿名函数：

```
add_action('init', function() use($args) {
    //...
}); 
```

那么就没有必要声明这么多函数了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:52:29.233

编辑（2017-04）：匿名函数（正确实现）是要走的路，请参阅 David Vielhuber 的回答。

**这个答案是不明智**的，任何将代码作为字符串的方法也是如此，因为这会邀请（除其他外）连接。

* * *

我不确定是否建议使用它，或者它是否对您有帮助，但 php 允许您创建“匿名”函数：

```
function generateFunction ($prefix) {
    $funcname = create_function(
        '/* comma separated args here */', 
        '/* insert code as string here, using $prefix as you please */'
    );
    return $funcname;
}

$func= generateFunction ("news_custom_type_init");
$func(); // runs generated function 
```

我假设 add_action 只是调用你传递的任何函数。

[http://php.net/manual/en/function.create-function.php](http://php.net/manual/en/function.create-function.php)

注意：create_function 不会返回一个你想要的名字的函数，但是函数的内容会在你的控制之下，函数的真实名字并不重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-27T00:18:11.880

我想你可以使用

`runkit_function_add`

[http://php.net/manual/pl/function.runkit-function-add.php](http://php.net/manual/pl/function.runkit-function-add.php)

另一种可用的方法是使用`eval()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-19T15:03:29.250

这篇文章很旧，但 PHP 7 可能会解决这个问题。

尝试：

```
$prefix = 'news';

$functionName = $prefix . "_custom_type_init";

${$functionName} = function() use ($prefix) {

    register_post_type($prefix, array(
        'labels' => array(
            'name' => $prefix,
            'singular_label' => $prefix,
            'add_new' => 'Add'
        )
    );

    register_taxonomy_for_object_type( 'category', $prefix );
};

add_action('init', '$' . $functionName); 
```

我认为它应该适用于 WordPress。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-28T21:01:16.660

动态函数在 PHP 中命名为`variable functions`

[https://www.php.net/manual/en/functions.variable-functions.php](https://www.php.net/manual/en/functions.variable-functions.php)

例如

```
$functionName = function () {
    global $prefix;

    register_post_type($prefix, array(
    'labels' => array(
          'name' => $prefix,
          'singular_label' => $prefix,
          'add_new' => 'Add',
          ...
        ));

        register_taxonomy_for_object_type( 'category', $prefix );
} 
```

你可以通过键入来调用它`$functionName()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-03T11:53:24.027

我不确定上述任何内容是否真正回答了有关动态创建自定义帖子类型的问题。这对我有用：

```
$languages = ("English", "Spanish", "French");

foreach($languages as $language):

    $example = function () use ($language) {

        $labels = array(
                'name' => __( $language . ' Posts' ),
                'singular_name' => __( $language . ' Post' )
        );

        $args = array(

            'labels'              => $labels,
            'hierarchical'        => false,
            'public'              => true,
            'show_ui'             => true,
            'show_in_menu'        => true,
            'show_in_nav_menus'   => true,
            'show_in_admin_bar'   => true,
            'menu_position'       => 5,
            "rewrite" => array( "slug" => $language . "_posts", "with_front" => true ),
            'capability_type'     => 'page',
         );
        register_post_type( $language . "_posts", $args );  

    };
    add_action( 'init', $example, 0 );

endforeach; 
```

# c# - C# Outlook VSTO - 有没有用部分字符串/通配符过滤器搜索全局地址列表？

> ID：15004891
> 
> 赞同：1
> 
> 时间：2013-02-21T14:35:32.247
> 
> 标签：c#, outlook, vsto, addressbook

我有一个 VSTO 插件，我正在尝试将地址列表中的人员列表显示到表单中。我想在我的全局地址列表中搜索，但只根据通配符进行搜索。

我看到[这段代码](http://msdn.microsoft.com/en-us/library/office/ff184654%28v=office.14%29.aspx)循环遍历地址列表中的所有条目，但我有超过 100K 条目，所以我不想做一个循环，所以我认为可能有一种方法可以在搜索中进行预先过滤

例如，我想在通讯录中搜索姓名以“ABC”开头的任何人。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:29:40.040

我实际上会使用 EWS（Exchange 的 WCF 类 Web 服务），而不是使用 VSTO。这样，几乎可以在任何环境中调用代码。

[http://vivekiyer.net/2010/07/17/querying-the-global-address-list-gal-via-exchange-web-services-ews/](http://vivekiyer.net/2010/07/17/querying-the-global-address-list-gal-via-exchange-web-services-ews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:46:40.337

Outlook 对象模型不会让您这样做。在扩展 MAPI 级别（仅限 C++ 或 Delphi）上，您可以针对 GAL 容器创建 PR_ANR 限制。

您还可以使用[Redemption](http://www.dimastr.com/redemption)及其[RDOAddressList](http://www.dimastr.com/redemption/RDOAddressList.htm) .ResolveNameEx 方法来获取所有匹配条目的列表：

```
 set Session = CreateObject("Redemption.RDOSession")
  Session.MAPIOBJECT = Application.Session.MAPIOBJECT
  set AdrrEntries = Session.AddressBook.GAL.ResolveNameEx("ABC")
  Debug.Print AdrrEntries.Count & " names were returned by ResolveNameEx:"
  for each AE in AdrrEntries
    Debug.Print AE.Name
  next 
```

# android - 带有 ImageView 和 TextView 的 Android 片段的自定义适配器

> ID：15004897
> 
> 赞同：2
> 
> 时间：2013-02-21T14:35:48.883
> 
> 标签：android, android-fragments, baseadapter

我正在尝试实现这样[的东西 - 看看](http://www.tinyuploads.com/images/G0EY2I.png)。

这是我的 BaseAdapter 类

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
LayoutInflater in = (LayoutInflater) mContext
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder view;
    if (convertView == null) {

        view = new ViewHolder();
        convertView = in.inflate(R.layout.country_row, null);

        view.txtView = (TextView) convertView
                .findViewById(R.id.countryName);

        view.txtView.setText(countryName[position]);

        convertView.setTag(view);

    } else {
        view = (ViewHolder) convertView.getTag();
    }
    view.imgView = (ImageView) convertView.findViewById(R.id.countryImage);
    view.imgView.setImageResource(mThumbIds[position]);

    return convertView;
}

private Integer[] mThumbIds = { R.drawable.india_flag,
        R.drawable.china_flag, R.drawable.argentina_flag,
        R.drawable.england_flag, R.drawable.france_flag,
        R.drawable.united_states_flag, R.drawable.uruguay_flag,
        R.drawable.pakistan_flag, R.drawable.united_kingdom_flag,
        R.drawable.italy_flag, R.drawable.germany_flag,
        R.drawable.brazil_flag, R.drawable.belgium_flag,
        R.drawable.denmark_flag, R.drawable.czech_republic_flag,
        R.drawable.jamaica_flag, R.drawable.indonesia_flag,
        R.drawable.kenya_flag, R.drawable.korea_flag,
        R.drawable.ireland_flag,

};
private String[] countryName = { "India", "China", "Argentina", "England",
        "France", "United States", "Uruguay", "Pakistan", "United Kingdom",
        "Italy", "Germany", "Brazil", "Belgium", "Denmark",
        "Czech Republic", "Jamaica", "Indonesia", "Kenya", "Korea",
        "Ireland"

};

public static class ViewHolder {
    public ImageView imgView;
    public TextView txtView;
} 
```

country_row.xml 包含**ImageView 和 TextView**。
Country 类扩展了 Fragment，counties.xml 包含**GridView**（我想我在这个类中搞砸了，但我无法纠正它）

```
public class Countries extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.countries,container,false);
    GridView gridView = (GridView) view.findViewById(R.id.myGrid);
    gridView.setAdapter(new ImageAdapter(view.getContext())); 
    return view;

} 
```

}
**country_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
android:id="@+id/relativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="5dp">

<ImageView
    android:layout_height="128dp"
    android:id="@+id/countryImage"
    android:layout_width="128dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true">
</ImageView>

<TextView
    android:layout_height="wrap_content"
    android:id="@+id/countryName"
    android:layout_width="wrap_content"
    android:layout_below="@+id/countryImage"
    android:layout_marginTop="2dp"
    android:layout_centerHorizontal="true"
    android:textSize="18sp"
    android:ellipsize="marquee"></TextView>

</RelativeLayout> 
```

**国家.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:orientation="vertical" >

<GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myGrid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnWidth="130dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit"
    android:padding="10dp"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp" />

</LinearLayout> 
```

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="horizontal">

  <fragment 
  android:name="com.example.fragmentsproject.Countries"
  android:id="@+id/frag1"
  android:layout_weight="1"
  android:layout_width="0px"
  android:layout_height="match_parent"/>

<fragment 
  android:name="com.example.fragmentsproject.Capitals"
  android:id="@+id/frag2"
  android:layout_weight="1"
  android:layout_width="0px"
  android:layout_height="match_parent"/>

</LinearLayout> 
```

**主要活动**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

}

这是我的日志猫

```
02-20 17:44:50.576: E/AndroidRuntime(1362): FATAL EXCEPTION: main
02-20 17:44:50.576: E/AndroidRuntime(1362): java.lang.RuntimeException: Unable to start     activity     ComponentInfo{com.example.fragmentsproject/com.example.fragmentsproject.MainActivity}:     android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.os.Looper.loop(Looper.java:132)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.app.ActivityThread.main(ActivityThread.java:4123)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invoke(Method.java:491)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at dalvik.system.NativeStart.main(Native Method)
02-20 17:44:50.576: E/AndroidRuntime(1362): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
02-20 17:44:50.576: E/AndroidRuntime(1362):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479) 
```

请有人帮助我，

在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:43:48.957

尝试从您的 GridView 声明中删除**xmlns:android="http://schemas.android.com/apk/res/android" 。**我也建议改变

> gridView.setAdapter(new ImageAdapter(view.getContext()));

对此

> gridView.setAdapter(new ImageAdapter(getActivity()));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:12:57.360

您提供的跟踪中的根本原因是“02-20 17:44:50.576: E/AndroidRuntime(1362): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment”，所以确保，您正在使用：

```
import android.support.v4.app.Fragment; 
```

作为一个类来扩展你的国家类。使用片段的 Activity 也应该扩展 FragmentActivity 而不是常规的 Activity。进口：

```
import android.support.v4.app.FragmentActivity; 
```

此外，我不建议您以这种方式初始化类字段：

```
LayoutInflater in = (LayoutInflater) mContext
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

因为 mContext 字段可以在构造函数调用后保存空引用。最好在构造函数中进行一些条件检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T11:13:46.493

将您的 LayoutInflater 放入 getView

像，

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater in = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# css - 大尺寸手机的响应式设计

> ID：15004898
> 
> 赞同：0
> 
> 时间：2013-02-21T14:35:52.173
> 
> 标签：css, responsive-design, media-queries

我正在使用媒体查询设计一个网站，并且在桌面和我的 iPad 上看起来一切都很好......但我的手机是一个不同的故事。像素尺寸为 1024x768，因为它是一款较新的智能手机，所以它试图像我的平板电脑一样显示它。如何使用媒体查询来指定我的手机在 1024x768 的显示应该与我的 iPad 不同？谢谢你的帮助。

这是我一直在努力的开始：

```
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:11:09.673

**最初的想法**

有关手机上确切布局问题的一些附加信息会有所帮助。另外，请确保您使用了正确的`<meta>`标签（如@Lokase 建议的那样）。可以在[这里](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)找到一个很好的失败。

**两种可能的解决方案**

1.  使用`min-height`并`max-height`结合 `width`您已经使用的媒体查询来尝试定位您的手机。

2.  如果这不是一个选项，您可以使用 javascript 通过尝试检测用户代理来定位您的手机，但这可能会被击中或错过。

**一句警告**

尽管如此， **尝试为特定视口进行设计将导致无穷无尽的挫败感**。您可能需要更费时地退后一步，重新考虑您的布局，以及您如何使用媒体查询。这可能很难实现，但从长远来看，你会感谢自己。只需考虑现在市场上高分辨率安卓手机的数量，以及即将发货的数量。

# jakarta-ee - 注销时清除客户端 SSL 状态（使用双向 SSL）

> ID：15004906
> 
> 赞同：5
> 
> 时间：2013-02-21T14:36:16.370
> 
> 标签：jakarta-ee, jsf-2, ssl-certificate

我正在开发一个需要双向身份验证来向服务器识别用户的项目。然后，服务器会根据用户的身份显示该用户可用的信息和选项。

我在主模板上放置了一个“退出”链接。这样做的目的是使所有内容无效/清除并将它们重定向到显示“您已注销”的非安全页面。使用“登录”按钮将他们重定向回登录页面。

登录页面应该提示用户输入他们的证书（它确实是第一次）。但是，当您单击“已注销”页面上的“登录”按钮时，它使用的是前一个用户的 SSL 状态，并且不会出现证书提示。

我真正需要的是一种注销方法（最好不要使用 java 脚本），它将清除所有缓存、使所有会话对象无效并清除 SSL 状态。

*这是我到目前为止所做的：*

1.) 在 web.xml 中设置安全约束，强制任何页面匹配模式 '/secure/*' 只能通过 https 访问。这很好用...

2.) 创建了一个过滤器来防止缓存...

3.）创建了一个功能来退出......

任何和所有的帮助将不胜感激！

**过滤器代码：**

```
@WebFilter("/secure/*")
public class NoCacheFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
        httpResponse.setHeader("Cache-Control", "no-cache,no-store,must-revalidate");
        httpResponse.setHeader("Pragma", "no-cache");
        httpResponse.setDateHeader("Expires", 0L); // Proxies.
        filterChain.doFilter(servletRequest, servletResponse);
    }

    @Override
    public void destroy() {}
} 
```

**退出功能**

```
public void signOut() {
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();

    // Log Out of the Session
    request.logout();

    // Invalidate the Session objects
    externalContext.invalidateSession();
    if (externalContext.getRequestCookieMap().get(OPEN_TOKEN_COOKIE) != null) {
        externalContext.addResponseCookie(OPEN_TOKEN_COOKIE,null,Collections.<String, Object>singletonMap("maxAge", 0));
    }

    // Redirect to the Sign out page
    String signOutURL = MessageFormat.format("http://{0}{1}/{2}",externalContext.getRequestServerName(),externalContext.getRequestContextPath(),"goodbye.jsf");
    externalContext.redirect(signOutURL);
} 
```

- - - - - - - - - - - 编辑 - - - - - - - - - - -

我知道我说过我不想使用 JavaScript，但在找到更好的解决方案之前我会这样做，我会与你分享我是如何做到的。

我正在使用 PrimeFaces 按钮，其动作指向前面的 signOut 函数引用。oncomplete 参数指向清除 Internet Explorer 和 Firefox 的 SSL 状态的 JavaScript（尚未尝试其他）。

**退出按钮**

```
<p:commandButton value="Sign out" action="#{adminNavigationBean.signOut}" oncomplete="clearSSLState();" styleClass="commandButton"/> 
```

**JavaScript clearSSLState()**

```
<script type="text/javascript">
    function clearSSLState() {
        document.execCommand("ClearAuthenticationCache");
        window.crypto.logout();
    }
</script> 
```

请务必注意，我的 goodbye.xhtml 页面不在我的 /secure/ 文件夹中。如果是，将立即提示用户选择证书。这是由 web.xml 中的安全约束引起的，并且是正确的行为。

**web.xml 安全约束**

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Protected Context</web-resource-name>
        <url-pattern>/secure/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

希望这对其他人有帮助。

# c# - 实体框架和自引用表和自引用实体

> ID：15004908
> 
> 赞同：1
> 
> 时间：2013-02-21T14:36:23.380
> 
> 标签：c#, entity-framework, linq-to-entities

我有一个自引用表，有时有一个自引用实体，如下所示：（ **是的，IdFamily 可以为空）**

```
...
//At my Business
newFile.Family = newFile;
...
//At my ASP.NET MVC action I call:
context.SaveChanges(); 
```

它抛出一个 DbUpdateException：

```
[UpdateException: Unable to determine a valid ordering for dependent operations. Dependencies may exist due to foreign key constraints, model requirements, or store-generated values.]
   System.Data.Mapping.Update.Internal.UpdateTranslator.DependencyOrderingError(IEnumerable`1 remainder) +4302030
   System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) +4300384
   System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) +583
   System.Data.Entity.Internal.InternalContext.SaveChanges() +382

[DbUpdateException: Unable to determine a valid ordering for dependent operations. Dependencies may exist due to foreign key constraints, model requirements, or store-generated values.]
   System.Data.Entity.Internal.InternalContext.SaveChanges() +485
   System.Data.Entity.Internal.LazyInternalContext.SaveChanges() +63
   System.Data.Entity.DbContext.SaveChanges() +75 
```

解决方法很难看，因为我需要调用 SaveChanges，设置 Id 并再次调用 SaveChanges。破坏 UnitOfWork，因此要解决此问题，我需要将所有请求放入 TransactionScope 中。

```
...
//At my Business
//newFile.Family = newFile;
context.SaveChanges();//BREAK UNIT OF WORK
newFile.IdFamily = newFile.Id;
...
//At my ASP.NET MVC action I call(Action Wrapped in TransactionScope):
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:21:59.177

这里的问题是，这需要两次写入数据库以保存单个实体（一个用于获取存储生成的 PK，另一个用于将该 PK 保存到 FK）或更新管道和提供程序模型生成更多实体的能力复杂的 SQL 可以在服务器上完成这一切。目前更新管道不支持其中任何一个。

正如您所说，解决方法是手动执行双重保存。

我认为我们没有跟踪此特定问题的错误，因此我建议您在 CodePlex 上提交一个。你也可以考虑提供一个修复——我不确定修复会有多困难，因为我对更新管道代码不是很熟悉。

# java - 方法调用的 ManagedBean 和 xhtml 设计策略

> ID：15004909
> 
> 赞同：0
> 
> 时间：2013-02-21T14:36:23.443
> 
> 标签：java, jsf

假设我有这样的课程：

```
@ManagedBean
public class A {

@ManagedProperty("#{B}")
private B b;

private Object o;

public void operation() {
    b.methodCall(o);
}

public void setB(B b) {
    this.b = b;
}

public Object getO() {
    return o;
}

public void setO(Object o) {
    this.o = o;
}

} 
```

现在，当我从 xhtml 进行方法调用时，我可以简单地编写：

```
<p:commandButton actionListener="#{a.operation()}" /> 
```

但是我也可以向我的托管 bean 添加一个吸气剂：

```
public B getB() {
    return b;
} 
```

并像这样调用相同的方法，从而无需在我的托管 bean 的第一个版本中编写 operation() 方法。

```
<p:commandButton actionListener="#{a.b.methodCall(b.o)}" /> 
```

在我看来，第一种方法在重构时会更容易，因为 ide 支持重构 java 类，但同时它让我编写了一个简单的方法，它只是作为传递参数的一种手段。

哪个是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:56:52.673

我认为这个问题没有直接的答案。该方法应基于我们的要求。两者都有自己的优点和缺点。

但是我可以说的一件事是：-您的第一种方法更可行。因为在您的第二种方法中，您应该在 a 中引用 b，除非确实需要，否则不需要 [ **A**不需要知道**B**，如果是独立实体]。**如果B**不在视图范围内，您可以从 spring 容器中获取**B**的实例（这样可以避免应用程序中**B的重复实例）。**

 **第二个问题是当你使用 abmethod 时，我们应该确保 b 在任何时候都不能为空。当我们在一个 html 中有不同的实体引用时，应用程序将紧密耦合。如果您有任何计划将其用作通用 html，则 html 不能与任何其他实体一起使用。

希望我的解释很清楚。**

# testing - 黄瓜 vs 水豚

> ID：15004918
> 
> 赞同：47
> 
> 时间：2013-02-21T14:36:42.833
> 
> 标签：testing, rubygems, cucumber, capybara, bdd

有人可以解释这两个平台之间的**区别吗？**

都是其中的一部分，`BDD`但为什么我应该使用一个或另一个，或两者一起使用？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-06-02T10:57:14.373

**Capybara**是一种以人类方式与网站交互的工具（例如访问 url、单击链接、在表单中输入文本并提交）。它用于模拟用户通过网站的流程。使用 Capybara，您可以编写如下内容：

```
describe "the signup process", :type => :feature do
  before :each do
    User.make(:email => 'user@example.com', :password => 'caplin')
  end

  it "signs me in" do
    visit '/sessions/new'
    within("#session") do
      fill_in 'Login', :with => 'user@example.com'
      fill_in 'Password', :with => 'password'
    end
    click_link 'Sign in'
    page.should have_content 'Success'
  end
end 
```

**Cucumber**是一种用于编写映射到代码中的人类可读测试的工具。有了它，你可以像这样重写上面的例子：

```
Scenario: Signup process

Given a user exists with email "user@example.com" and password "caplin"
When I try to login with "user@example.com" and "caplin"
Then I should be logged in successfully 
```

几乎纯文本的解释对于传递非开发人员很有用，但也需要一些映射到其中的代码才能实际工作（步骤定义）。

**通常，如果您正在测试一个网站，您将使用 Capybara，如果您需要与非开发人员共享这些测试，您将使用 Cucumber。这两个条件是独立的，因此您可以使用一个而不使用另一个，或者两者都使用，或者一个都不使用。**

**PS：**在代码片段中也有一些 RSpec。这是必需的，因为 Cucumber 或 Capybara 本身无法*测试*某些东西。他们依靠 RSpec、Test::Unit 或 minitest 来完成实际的“通过或失败”工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T18:43:05.600

[cucumber](http://cukes.info/)是一个 BDD 工具，它以业务可读的特定领域语言表达测试场景。

[capybara](https://github.com/jnicklas/capybara)是用于 ROR 应用程序的自动化测试工具（经常使用）。

[在 capybara github 页面上，有一个使用 capybara 和 cucumber](https://github.com/jnicklas/capybara#using-capybara-with-cucumber)的示例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-22T16:16:53.273

Cucumber 是一个通用的 BDD 工具。它对网络应用一无所知。因此 Cucumber 步骤定义调用 Capybara 以测试 Web 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-01T07:39:30.617

```
|-------------------------------|-------------------------------|
|      Cucumber                 |     Capybara                  |
|-------------------------------|-------------------------------|
| Test cases are more readable  | Test cases are not readable;  |
| and written in plain english  | Capybara also wraps RSpec and |
| text as a DSL                 | you follow the same pattern to|
|                               | write test cases              |
|-------------------------------|-------------------------------|
| Easy to iterate data using    | Not easy to iterate data      |
| tables                        |                               |
|-------------------------------|-------------------------------|
| Cucumber has its own runner   | Uses RSpec runner to execute  |
|                               | tests                         |
|-------------------------------|-------------------------------|
| Default HTML reporter         | No default HTML reporter      |
|-------------------------------|-------------------------------|
| Need to learn cucumber regex  | No such concept               |
| pattern to write step-        |                               |
| definition which is the middle|                               |
| man for test case and script. |                               |
| Btw, the regex pattern is not |                               |
| essential for all cases.      |                               |
|-------------------------------|-------------------------------|
| You can use the native        | (Wrapper)/Built on top of     |
| selenium-webdriver methods    | selenium-webdriver ruby       |
| while using Cucumber; Cucumber| library when used with        |
| is just an additional         | selenium; it can also be used |
| framework to your generic     | with two other drivers.       |
| automation framework          |                               |
|-------------------------------|-------------------------------|
| Pure BDD framework (In theory | Traditional functional test   |
| BDD sounds great. In practice,| model for end-to-end testing  |
| product owners and developers |                               |
| rarely continue to use BDD)   |                               |
|-------------------------------|-------------------------------| 
```

# qt - 改变 qwtSlider 的颜色和大小

> ID：15004919
> 
> 赞同：0
> 
> 时间：2013-02-21T14:36:43.980
> 
> 标签：qt, qwt

我想更改 qwtSlider 手柄的颜色。我还想设置滑块本身的大小。我知道我可以使用 setBackgroundStyle()，但我想自己指定所有部分的大小和颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:04:46.897

我认为使用 Qt 样式表是不可能的（尽管我很想被证明是错误的）。

要更改 a 句柄的颜色，`QwtSlider`您可以对其进行子类化并重新实现 void`drawThumb(...)`的代码`qwt_slider.cpp`显示如何/选择哪些颜色。

类似地，您可以通过重新实现其他函数来更改其他外观属性`QwtSlider`。

# iphone - UITextField 的清除按钮设置为“从不出现”，但在添加文本时仍显示

> ID：15004922
> 
> 赞同：3
> 
> 时间：2013-02-21T14:36:51.187
> 
> 标签：iphone, objective-c, ipad, uitextfield

我永远不需要在特定的文本字段上显示清除按钮。在 IB 中，我将清除按钮设置为“从不出现”。但是，一旦用户在文本字段中输入了 1 个字符，就会出现清除按钮。这些文本字段非常短（由于间距），并且清除按钮覆盖了书面文本，这看起来很糟糕。

我需要一起取消清除按钮，但将其设置为“从不出现”仍然会使其出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:37:55.837

```
self.myTextField.clearButtonMode = UITextFieldViewModeNever; 
```

应该努力使它永远不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:34:20.253

您确定您没有错误地将其设置为“编辑时出现”吗？clearButtonMode 属性的默认值为 UITextFieldViewModeNever。

从[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html)中：

> **清除按钮模式**
> 
> 控制标准清除按钮何时出现在文本字段中。
> 
> `@property(nonatomic) UITextFieldViewMode clearButtonMode`
> 
> **讨论**
> 
> 标准清除按钮显示在文本字段的右侧，作为用户快速删除文本的一种方式。此按钮会根据为此属性设置的值自动显示。
> 
> **此属性的默认值为 UITextFieldViewModeNever。**

# c++ - 模板函数返回问题

> ID：15004923
> 
> 赞同：0
> 
> 时间：2013-02-21T14:36:50.683
> 
> 标签：c++, templates, return, gsl

我是C++新手，想做一个模板函数。我遇到了模板返回值的问题。代码是这样的

```
#include <iostream>
#include <cmath>
#include <gsl/gsl_rng.h>
#define pi 3.1415926535

using namespace std;

template <class T>
T cpradius(T a,T b,T p, int n)
{

    const gsl_rng_type *R;
    gsl_rng *r;

    gsl_rng_env_setup();
    R = gsl_rng_default;
    r = gsl_rng_alloc(R);

    T p1[n],p3[n],p2 ;
    T radius[n] ;
    for (int i = 0; i<n; i++)
    {
        p1[i] = gsl_rng_uniform(r);
        p2 += p1[i];
    }

    for (int j = 0; j<n; j++)
    {
        p3[j] = p1[j]/p2;
        radius[j] = sqrt(p3[j]*a*b*p/pi);
        //cout <<  radius[j] << endl; 
    }

    return radius[n];
}

int main(){

    double r[30] = {0};
    r[30] = cpradius(30.0,30.0,0.6,30);
    for (int i = 0;i<30;i++){
        cout << r[i] <<endl;
    }
    return 0;
} 
```

然后，编译它：

```
g++ -Wall -I/usr/local/include/ tst3.cpp -lgsl -lgslcblas 
```

结果是 1 列，30 个零：

```
0
0
0
...
0 
```

似乎初始数组没有更新，有人帮助我吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:40:06.420

这与模板无关。具有 30 个元素的数组在 indizes 0..29 处具有元素。你存储一些`r[30]`不受限制的东西。

此外，您正在创建非常量长度（p1、p3 和半径）的数组，这不是有效的 C++。从您的返回中，我假设您要返回包含 30 个值的整个数组。您正在做的是返回第 31 个（！）值，或者至少您尝试通过访问`result[n]`. 这是未定义的行为，意味着任何事情都可能发生：什么都没有，崩溃，任何您可能期望的事情，在线披萨订单到您的地址......

看来您仍然需要对 C++ 数组以及如何处理它们有一些基本的了解。

**PS：** 作为第一个提示，`std::vector`可能正是您正在寻找的东西，因为它是处理可变长度数组的 C++ 方式。

**PS2：** 不要`#define`用于常量。请改用固定类型的常量变量。它永远不会受到伤害，但有时会为您节省一些痛苦的调试。

# javascript - ajax 谷歌地图 - {"readyState":4,"status":200,"statusText":"success"} with parsererror

> ID：15004927
> 
> 赞同：1
> 
> 时间：2013-02-21T14:36:59.277
> 
> 标签：javascript, ajax, json, jquery, jsonp

这是ajax调用

```
var url_map = "http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false?callback?";
$.ajax({
       type: "GET",
       dataType : "json",
       url: url_map,
       crossDomain:true,
       success: function(data){
          console.log("success");
       },
       error: function(e){
          console.log(JSON.stringify(e);
       }
)}; 
```

我试过了`jsonp`，`json`因为`dataType`。但它仍然回调`parsererror`错误。还尝试修改 url_map 添加`&output=json`或/和删除`?callback?`参数。有没有办法捕捉一个详细的错误而不是一个通用的`parsererror`？

我的代码有什么问题？

编辑

在我看来，它不是提到的链接的副本。我已经有了经纬度。我需要得到那个坐标的国家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:04:07.553

如以下链接和评论中所述，googleapis 不再提供 jsonp ajax 请求。

[这](https://stackoverflow.com/questions/6638422/trouble-with-jquery-ajax-reading-json)解决了我的问题。

# jquery - 选择表单内的所有标签

> ID：15004929
> 
> 赞同：0
> 
> 时间：2013-02-21T14:37:01.347
> 
> 标签：jquery, jquery-ui

我的问题是我想选择表单内的所有标签并删除某个类。

我现在拥有的是这样的：

```
<form id="frmCreateCase" name="frmCreateCase">
    <div id="radioSubjectName" class="radioButtons">
        <input type="radio" value="Information" id="radioSubjectName1" name="radioSubjectName" /><label for="radioSubjectName1">Information</label>
        <input type="radio" value="Sales" id="radioSubjectName2" name="radioSubjectName" /><label for="radioSubjectName2">Sales</label>
    </div>
    <div id="radioProductName" class="radioButtons">
        <input type="radio" value="WP" id="radioProductName1" name="radioProductName" /><label for="radioProductName1">WP</label>
        <input type="radio" value="FST" id="radioProductName2" name="radioProductName" /><label for="radioProductName2">FST</label>
    </div>
    <div id="radioStatusName" class="radioButtons">
        <input type="radio" value="STARTED" id="radioStatusName1" name="radioStatusName" /><label for="radioStatusName1">STARTED</label>
        <input type="radio" value="AWAITING REVIEW" id="radioStatusName2" name="radioStatusName" /><label for="radioStatusName2">AWAITING REVIEW</label>
    </div>
</form> 
```

然后我初始化我的按钮集有像这样漂亮的按钮

```
$( "#radioSubjectName" ).buttonset();
etc..... 
```

单击时，这些标签会收到类“ui-state-active”。

我想创建一个功能来循环所有标签并从每个标签中删除该类。我现在做的是这样的：

```
$("label[for='radioSubjectName1']").removeClass('ui-state-active');
$("label[for='radioSubjectName2']").removeClass('ui-state-active');
etc... 
```

有没有更简单的方法来循环所有这些标签，这些标签是我的表单的子标签并删除类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:38:42.173

怎么样

```
$('form#frmCreateCase label.ui-state-active').removeClass('ui-state-active') 
```

这将从拥有它的类中删除这些类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:41:20.540

尝试`$("#frmCreateCase label").removeClass("ui-state-active");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:46:34.203

最快的可能是：

```
$("#frmCreateCase").find("label.ui-state-active").removeClass("ui-state-active"); 
```

# php - sql注入——从哪里来

> ID：15004933
> 
> 赞同：-3
> 
> 时间：2013-02-21T14:37:12.203
> 
> 标签：php, mysql, sql-injection

我目前正在处理一个网络项目，该项目正在收到垃圾邮件（评论框）。

我知道一些关于 sql 注入的知识，并且我尝试过转义 ( `mysql_real_escape_string`)，即可能“损害”数据库的数据。

但没有成功。

我也尝试隐藏网站上的所有表单，但数据库（评论框）不断收到垃圾邮件。

数据不直接通过 url (get 或 post) 发送。所以我不知道还有哪里可能是问题所在。任何想法？

编辑

未发布表单中的文本区域（您的评论）。该表格目前已被删除，垃圾邮件仍在继续。因此，由于未按下“发送”按钮，因此验证码不是选项。评论仅适用于登录用户

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:49:12.017

mysql_real_escape_string**不**以任何方式防止注入。
没有单词“injection”、“harm”、“protection”或它的名字中的任何东西
这个函数只做字符串格式化。正确格式化的字符串虽然是无懈可击的，但还有其他类型需要自己的格式化，而字符串格式化对他们来说毫无用处。

至于垃圾邮件，做一个愚蠢的蜜罐：
添加一个名为“城市”的字段。并告诉人们**不要填写它**。
一旦它被填满 - 它是一个机器人，*默默地*丢弃消息（不要写像“Gotcha”，“你是机器人”这样的愚蠢横幅）。只是不要保存并保持其余部分相同

要回答已编辑的问题：

> 未发布表单中的文本区域（您的评论）。该表格目前已被删除，垃圾邮件仍在继续。

:)也
禁用**表单处理程序**不需要
表单来发表评论。它是一个表单动作脚本，它实际上完成了所有的工作。您可以保留表单，但要禁用发布，您必须禁用处理程序代码

# scala - 为什么光滑的投影不起作用

> ID：15004936
> 
> 赞同：3
> 
> 时间：2013-02-21T14:37:16.883
> 
> 标签：scala, scalaquery, slick

出于某种原因，就我而言，即使是简单的 Slick 表声明也不起作用。我正在使用 slick 2.10 (1.0.0)，它是 maven 中央存储库中的最新版本。

```
case class DeviceType(id: Option[Int] = None, name: String, version: String)

object DeviceTypes extends Table[DeviceType]("device_types") {

  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def name = column[String]("name", O.NotNull)
  def version = column[String]("version")

  def * = id.? ~ name ~ version <> (DeviceType, DeviceType.unapply _)

  def delete(device_type: DeviceType): Unit = {
database withSession { implicit session : Session =>
  val dt_query = for(dt <- DeviceTypes if dt.id == device_type.id.get) yield dt
    //Query(DeviceTypes).filter(_.id == device_type.id.get)
  dt_query.delete
}
  }
}

[warn] /home/salil/Scala/sd_ventures/app/models/DeviceType.scala:38: scala.slick.lifted.Column[Int] and Int are unrelated: they will most likely never compare equal
[warn]       val dt_query = for(dt <- DeviceTypes if dt.id == device_type.id.get) yield dt
[warn]                            ^

And if I use Query class directly, I get the same warning:
[warn] /home/salil/Scala/sd_ventures/app/models/DeviceType.scala:38: scala.slick.lifted.Column[Int] and Int are unrelated: they will most likely never compare equal
[warn]       val dt = Query(DeviceTypes).filter(_.id == device_type.id.get)
[warn]                                               ^ 
```

有人可以告诉我为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T15:06:36.287

在 Slick 中，您必须使用“===”来测试相等性。

```
val dt_query = for(dt <- DeviceTypes if dt.id === device_type.id.get) yield dt 
```

[参考： http](http://slick.typesafe.com/doc/1.0.0/gettingstarted.html) ://slick.typesafe.com/doc/1.0.0/gettingstarted.html 底部

# c# - 修复 TableLayoutPanel 中每一行的行高

> ID：15004937
> 
> 赞同：10
> 
> 时间：2013-02-21T14:37:17.307
> 
> 标签：c#, winforms, tablelayoutpanel, row-height

我正在使用 Windows c#。

首先，我需要的不能改变的事情如下：

1.  的大小`TableLayoutPanel`是固定的。
2.  总列数是固定的。

现在，我想为所有行设置一个固定高度，但是随着行数的增加，如果我将`RowStyle`属性设置为`Percent`with`100.0F`那么它适用于 3 到 4 个项目，但是在 4-5 个项目之后，一行上的控件会覆盖上的控件另一排。

我已经搜索了很多，但我无法得到正确的答案。我也尝试了`AutoSize`, `Percent`,`Absolute`的属性`RowStyle`，即使它不起作用。

那么该怎么做和怎么做？我怎样才能做到这一点？

`DataGridView`最终，我想做和 Windows C#一样的事情。

提前致谢....

我正在研究 WinForms...示例代码在这里..

```
int cnt = tableLayout.RowCount = myDataTable.Rows.Count;

tableLayout.Size = new System.Drawing.Size(555, 200);

for (int i = 1; i <= cnt; i++)
{

    Label lblSrNo = new Label();
    lblSrNo.Text = i.ToString(); 

    TextBox txt = new TextBox();
    txt.Text = ""; 
    txt.Size = new System.Drawing.Size(69, 20);

    tableLayout.Controls.Add(lblSrNo, 0, i - 1);
    tableLayout.Controls.Add(txt, 1, i - 1);
}

tableLayout.RowStyles.Clear();

foreach (RowStyle rs in tableLayout.RowStyles)                
    tableLayout.RowStyles.Add(new RowStyle(SizeType.AutoSize)); 
```

标签和文本框在 4-5 #of 行中运行良好，但是每当 #of 行（在这种情况下，for 循环中的变量 cnt）增加时，这些行就会相互覆盖，这是一个控件覆盖另一个......我已拖放 TableLayoutPanel 控件并手动创建了一行和两列。

所以请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-20T17:01:46.820

我自己还是 tableLayoutPanels 的新手，但我注意到在代码的底部，你正在清除集合中的所有行样式，然后你试图在你的 foreach 循环中遍历它们。

你这样做了：

```
tableLayout.RowStyles.Clear();   //now you have zero rowstyles

foreach (RowStyle rs in tableLayout.RowStyles)   //this will never execute
    tableLayout.RowStyles.Add(new RowStyle(SizeType.AutoSize)); 
```

试试这个。

```
TableLayoutRowStyleCollection styles =
    tableLayout.RowStyles;
foreach (RowStyle style in styles){
    // Set the row height to 20 pixels.
    style.SizeType = SizeType.Absolute;
    style.Height = 20;
} 
```

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

编辑：我刚刚意识到添加 N 行不会添加您可以迭代的 N 行样式。我认为正在发生的事情是您要添加 N 行，但它们都没有行样式。

我想您可以 Clear() 行样式，然后只需添加 N 个行样式，就像您已经在做的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-22T13:33:19.577

有两种方法可以增加表格布局面板的行高。

1.  查看以下链接： [https ://social.msdn.microsoft.com/Forums/windows/en-US/d80db8e1-d6cc-48b8-957f-0f73263c6d4a/how-to-change-the-row-height-of- a-tablelayoutpanel-at-runtime?forum=winforms](https://social.msdn.microsoft.com/Forums/windows/en-US/d80db8e1-d6cc-48b8-957f-0f73263c6d4a/how-to-change-the-row-height-of-a-tablelayoutpanel-at-runtime?forum=winforms)

    它通过在类后面的代码中设置 YourTableLayoutPanel.RowStyles[index].Height 来指定。

2.  另一种方法是在 UI 的设计器中设置行高。通过 UI，进入面板的行属性，选择行并使用百分比或绝对值设置所需的高度

# asp.net - 为什么我的绑定字段不能在更新窗格的网格视图中工作？

> ID：15004941
> 
> 赞同：0
> 
> 时间：2013-02-21T14:37:22.997
> 
> 标签：asp.net, gridview, updatepanel

我在更新面板中有一个网格视图，其中包含多个绑定字段最后两个绑定字段如图所示，当单击显示另一个没有回发的网格视图但下载不起作用除了我设置脚本管理器的 EnablePartialRendering="false" 但在这种情况下更新面板无法显示绑定字段

![在此处输入图像描述](../Images/bcf60980f9f03ee7852bc0b8bd6c6ef0.png)

```
 <asp:ScriptManager ID="ScriptManager1"  runat="server">  
 </asp:ScriptManager>  
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" >  
<contenttemplate>  

 <div id="DivImages" runat="server" visible="false" class="block rnd">
            <div class="title2">الأحكـــــــــــام</div>
            <div class="content2">

     <asp:gridview ID="GvImages" runat="server"  PagerStyle-CssClass="pages"   AllowPaging="True" 
                        AutoGenerateColumns="False" CellSpacing="-1" Width="100%" DataKeyNames="DocCode,IssuesID" 
       CssClass="dataGrid"   OnPageIndexChanging="GvImages_PageIndexChanging" GridLines="None" 
                        PageSize="20" OnRowCommand="GvImages_RowCommand" 
                        OnSelectedIndexChanging="GvImages_SelectedIndexChanging">
<AlternatingRowStyle BackColor="White" />
<Columns>

<asp:TemplateField HeaderText="رقم السجــل">   
     <ItemTemplate>
             <%# Container.DataItemIndex + 1 %>   
     </ItemTemplate>
 </asp:TemplateField>

 <asp:BoundField DataField="DocCode" HeaderText="رقم الحكم/ القرار"   SortExpression="DocCode" />
    <asp:BoundField DataField="IssuesNum" HeaderText="كود القضيه" 
        SortExpression="IssuesNum" />
                <asp:BoundField DataField="TypeName" HeaderText="نوع القضيه" 
        SortExpression="TypeName" />
         <asp:BoundField DataField="Year" HeaderText="السنه" 
        SortExpression="Year" />

            <asp:BoundField DataField="Area" HeaderText="المنطقه" 
        SortExpression="Area" />

      <asp:BoundField DataField="DocTypeName" HeaderText="تصنيــف المستند" SortExpression="DocTypeName" />

    <asp:BoundField DataField="Name" HeaderText="نوع المستند" 
        SortExpression="Name" />

            <asp:TemplateField  HeaderText="حذف">

                            <ItemTemplate>
                                <asp:LinkButton ID="cmd_DeleteRow"   CommandName="DeleteRow"  CssClass="delete" ToolTip="حذف" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" runat="server" OnClientClick="return confirmDeleteRow()" />
                            </ItemTemplate>
                            <HeaderStyle Width="125px" />
                        </asp:TemplateField>

      <asp:CommandField SelectText="عرض"  HeaderText="عرض" ShowHeader="True" ShowSelectButton="True">  
                    <HeaderStyle HorizontalAlign="Right" />
                    </asp:CommandField>

                        <asp:TemplateField  HeaderText="تحميل">

                            <ItemTemplate>
                                <asp:LinkButton ID="DownLoad" CommandName="DownLoad"   Text="تحميل" ToolTip="تحميل" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" runat="server" />
                            </ItemTemplate>
                            <HeaderStyle Width="125px" />
                        </asp:TemplateField>

</Columns>
  <RowStyle Height="25px" />
                    <HeaderStyle Height="30px" />
                    <PagerStyle CssClass="pages" Wrap="false" />
</asp:gridview>

</div>
</div>

 </contenttemplate>
 <Triggers> 
```

在按钮搜索中我绑定我的网格

就像在这段代码中

```
 protected void ShowDoc(string sCondition)
    {
    //declare connection by pass connection string from web.config
    SqlConnection sqlcon = new SqlConnection
        (ConfigurationManager.ConnectionStrings["SystemConn"].ConnectionString);

    //declare sql statment  as astring variable

    if (Session["Image"] != null)
    {
        Session.Remove("Image");
    }
    try
    {
        SqlStatment = string.Format("select distinct IssuesNum,DocType,DocTypeSub,DocCode,DocTypeName,Name,IssuesID,TypeID,TypeName,Area,IssuesNumSplited,Year   from [View_ImagesSearch] Where {0}  Order By [IssuesNumSplited] ASC", sCondition);

        //create asql command and pass for it the connection string and sql statment
        SqlCommand sqlcom = new SqlCommand(SqlStatment, sqlcon);

        //create data adaptor to bring data from database
        SqlDataAdapter sad = new SqlDataAdapter(sqlcom);

        // declare dataset to store data from data base in it
        DataSet ds = new DataSet();

        //fill data set with data adabter that contain data from database
        sad.Fill(ds);
        lblDocCount2.Text = ds.Tables[0].Rows.Count.ToString();
        Session["Image"] = ds;
        GvImages.DataSource = ds;
        GvImages.DataBind();

    }
    catch (Exception ex)
    {
        par_ErrorMessage.Visible = true;
        par_ErrorMessage.InnerText = ex.Message;
    }
   } 
```

当我单击名为 عرض updatepanel 的命令时，可以显示另一个网格视图，但是当我单击项目模板下载时无法正常工作，直到我设置 EnablePartialRendering="False"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:39.187

确保在调用*DataBind*后调用*Update*：`UpdatePanel`*`GridView`*

 *```
GridView.DataBind();
UpdatePanel.Update(); 
```

有关其他可能的解决方案，请参阅[此内容。](https://stackoverflow.com/questions/5476766/updatepanel-gridview-not-updating)*

# jquery - 如何销毁/清理 jsviews？

> ID：15004943
> 
> 赞同：1
> 
> 时间：2013-02-21T14:37:38.347
> 
> 标签：jquery, jsviews

我希望在可以多次从 DOM 添加/删除的小部件中使用 jsViews。

如果小部件在创建过程中运行这样的代码：

```
if(!$.link.widgetTemplate)
{
   $.templates({ widgetTemplate: "#widgetTemplateSrc" });
}

$.link.widgetTemplate("#myElement", someData); 
```

会`$("#myElement").remove();`导致内存泄漏还是 jsViews 会被正确处理？

如果您不想`#myElement`从 DOM 中删除，如何卸载 jsview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:04:16.357

是的，使用 .remove()、.empty()、.html() 等 jQuery 方法删除元素将触发 JsViews 中的处置，并且不应导致内存泄漏。

# java - 整数的最大值

> ID：15004944
> 
> 赞同：323
> 
> 时间：2013-02-21T14:37:41.330
> 
> 标签：java, c, integer, max, bit

在 C 中，整数（对于 32 位机器）是 32 位，范围从 -32,768 到 +32,767。在 Java 中，整数（长整数）也是 32 位，但范围从 -2,147,483,648 到 +2,147,483,647。

我不明白 Java 中的范围有何不同，即使位数相同。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：428
> 
> 时间：2013-02-21T14:51:00.303

**在*C*中，**语言本身并不决定某些数据类型的表示。它可能因机器而异，在嵌入式系统上`int`可以是 16 位宽，但通常是 32 位。

唯一的要求是`short int`<= `int`<=`long int`按大小。此外，还有一个建议**`int`应该代表处理器的本机容量**。

所有类型均已签名。`unsigned`修饰符允许您使用最高位作为值的一部分（否则它保留给符号位）。

以下是可能数据类型的可能值的简短表格：

```
 width                     minimum                         maximum
signed    8 bit                        -128                            +127
signed   16 bit                     -32 768                         +32 767
signed   32 bit              -2 147 483 648                  +2 147 483 647
signed   64 bit  -9 223 372 036 854 775 808      +9 223 372 036 854 775 807
unsigned  8 bit                           0                            +255
unsigned 16 bit                           0                         +65 535
unsigned 32 bit                           0                  +4 294 967 295
unsigned 64 bit                           0     +18 446 744 073 709 551 615 
```

**在*Java***中**，**[Java 语言规范](https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)决定了数据类型的表示。

顺序为：`byte`8位、`short`16位、`int`32位、`long`64位。所有这些类型都是有*符号*的，没有无符号版本。但是，位操作将数字视为无符号数（即正确处理所有位）。

字符数据类型`char`为 16 位宽，*无符号*，并使用 UTF-16 编码保存字符（但是，可以分配一个`char`表示无效字符代码点的任意无符号 16 位整数）

```
 width                     minimum                         maximum

SIGNED
byte:     8 bit                        -128                            +127
short:   16 bit                     -32 768                         +32 767
int:     32 bit              -2 147 483 648                  +2 147 483 647
long:    64 bit  -9 223 372 036 854 775 808      +9 223 372 036 854 775 807

UNSIGNED
char     16 bit                           0                         +65 535 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-02-21T14:44:50.550

> 在 C 中，整数（对于 32 位机器）是 32 位，范围从 -32768 到 +32767。

错误的。2 的补码表示形式的 32 位有符号整数的范围是 -2 ^(31)到 2 ^(31) -1，它等于 -2,147,483,648 到 2,147,483,647。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-21T14:44:00.317

32 位整数的范围从 -2,147,483,648 到 2,147,483,647。然而，您在 32 位机器上这一事实并不意味着您的`C`编译器使用 32 位整数。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-21T15:06:18.027

C 语言定义指定了各种数据类型的*最小*范围。对于`int`，这个最小范围是 -32767 到 32767，这意味着 an`int`必须*至少为*16 位宽。一种实现可以自由地提供`int`具有相应更广泛范围的更广泛类型。例如，在我工作的 SLES 10 开发服务器上，范围是 -2147483647 到 2137483647。

仍然有一些系统使用 16 位`int`类型（All The World Is *Not* A ~~VAX~~ x86），但有很多使用 32 位`int`类型，可能还有一些使用 64 位。

C 语言被设计为在不同的体系结构上运行。Java 被设计为在隐藏了这些架构差异的虚拟机中运行。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-21T14:41:15.720

java的严格等价物`int`是`long int`C中。

编辑：如果`int32_t`已定义，则在精度方面是等效的。`long int`保证 java 的精度`int`，因为它保证大小至少为 32 位。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-08-19T01:52:13.540

海报混淆了他们的java类型。在 java 中，他的 C in 是一个短：short（16 位）= -32768 到 32767 int（32 位）= -2,147,483,648 到 2,147,483,647

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-21T14:42:40.097

那是因为在 C 中 - 32 位机器上的整数并不意味着使用 32 位来存储它，它也可能是 16 位。它取决于机器（依赖于实现）。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-02-21T14:52:44.447

实际上 , 的位大小`int`取决于`short`编译`long` 器的实现。

例如，在我的 64 位 Ubuntu 上，我有`short`一`32`点点，而在另一个 32 位 Ubuntu 版本上，它是一`16`点点。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-12-13T11:02:45.003

它实际上很容易理解，你甚至可以用谷歌计算器来计算它：一个 int 有 32 位，而计算机是二进制的，因此每个位可以有 2 个值（点）。如果您计算 2^32，您将得到 4,294,967,296。所以如果你把这个数字除以 2，（因为其中一半是负整数，另一半是正整数），那么你得到 2,147,483,648。这个数字是可以用 32 位表示的最大 int，虽然如果你注意你会注意到 2,147,483,648 比 2,147,483,647 大 1，这是因为其中一个数字代表 0，不幸的是 2^ 32 不是奇数，因此中间不只有一个数字，因此正整数的密码少一个，而负整数则得到完整的一半 2,147,483,648。

就是这样。这取决于机器而不是语言。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-21T14:43:16.010

在 C 中，__int32 的范围是 –2147483648 到 2147483647。[完整范围请参见此处。](http://msdn.microsoft.com/en-us/library/s3f49ktz.aspx)

```
unsigned short 0 to 65535
signed short –32768 to 32767
unsigned long 0 to 4294967295
signed long –2147483648 to 2147483647 
```

不能保证“int”是 32 位，如果您想使用特定大小的变量，特别是在编写涉及位操作的代码时，您应该使用“标准整数类型”。

在 Java 中

int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-19T09:34:12.963

在标准 C 中，您可以使用 INT_MAX 作为最大“int”值，此常量必须在“limits.h”中定义。为其他类型定义了类似的常量（[http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.5.html](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.5.html)），如上所述，这些常量依赖于实现，但根据最小位具有最小值对于每种类型，如标准中所述。

# c++ - 外包“网络字节序”处理？

> ID：15004945
> 
> 赞同：0
> 
> 时间：2013-02-21T14:37:48.717
> 
> 标签：c++, networking, endianness

我正在使用许多`[Filter]`“处理数据”的模块，最后将这些数据写入不同的设备。

```
[Filter] -> [Filter] -> [Writer] 
```

配置取决于运行时。问题通常是`[Filter]`并不真正知道它可能是链的末端以及数据写入的位置。

有些`[Filter]`在 Google 协议缓冲区中产生输出，`[Writer]`可能正在写入文件。但在某些情况下，生成结构化数据并应通过网络传输......像这样：

```
#pragma pack(push,1)
struct data_s {
    char a;
    int i;
    int j;
    char str[64];
};
#pragma pack(pop)
data_t d;
//...
d.i = htonl( d.i);
d.j = htonl( d.j);
this->write( d ); 
```

在这种情况下......有没有办法在每个 [Filter] 和 [Writer] 中都这样做......作家只看到一块内存而没有任何结构。有没有办法

```
[Filter] -> [Filter] -> [hton_struct] -> [Writer] 
```

外包结构化网络字节顺序翻译。有没有一种舒适且可重用的方法来传输一块带有翻译描述的内存到网络字节顺序？因此，不必在`[Filter]`仅在上述前提条件适用的情况下才使用的组件中实现它？

# bash - 转义 bash 变量中的点

> ID：15004948
> 
> 赞同：5
> 
> 时间：2013-02-21T14:37:55.277
> 
> 标签：bash, shell

我想从 Unix shell 脚本（bash 或 ksh）中的 IP 地址中转义点，以便我可以匹配 grep 命令中的确切地址。

```
echo $ip_addr | sed "s/\./\\\./g" 
```

有效（输出 1\.2\.3\.4），但是

```
ip_addr_escaped=`echo $ip_addr | sed "s/\./\\\./g"`
echo $ip_addr_escaped 
```

没有（输出 1.2.3.4）

如何正确转义地址？

**编辑：** 看起来像

```
ip_addr_escaped=`echo $ip_addr | sed "s/\./\\\\\\\./g"` 
```

有效，但这显然很糟糕！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T14:53:28.377

`bash`参数扩展支持模式替换，它看起来（稍微）更干净并且不需要调用`sed`：

```
echo ${ip_addr//./\\.} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:50:17.247

是的，反斜杠的处理是反引号的奇怪引用相关行为之一``...``。与其与之抗争，不如只使用`$(...)`，除了它的引用规则更智能、更直观之外，它是相同的。所以：

```
ip_addr_escaped=$(echo $ip_addr | sed "s/\./\\\./g")
echo $ip_addr_escaped 
```

但是如果上面的代码确实是你的确切代码——你有一个名为 的参数`ip_addr`，并且你想替换`.`为`\.`——那么你可以使用 Bash 的内置符号：`${*parameter*/*pattern*/*string*}`

```
ip_addr_escaped=${ip_addr//./\\.} 
```

更确切地说：

```
grep "${ip_addr//./\\.}" [FILE...] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:45:23.300

用单引号替换双引号。

# python - 我们可以在 Beautifulsoup 中将所有 XML 标签转换为小写吗

> ID：15004950
> 
> 赞同：1
> 
> 时间：2013-02-21T14:37:59.337
> 
> 标签：python, xml, python-3.x, beautifulsoup

在使用 Beautifulsoup 和 HTMl 解析器时，标签被转换为小写。但是我们如何在使用 LXML 解析器时实现。在以下情况下，我无法打印输出。但如果我使用 html 解析器进行解析。它工作正常。有人可以帮帮我吗？

```
html_doc = """
<html><HEAD><title>The Dormouse's story</title></HEAD>

<p class="title"><b>The Dormouse's story</b></p>
<p class="story">...</p>
"""

from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc, "xml")

print soup.head 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:41:37.297

不要使用 XML 解析器来解析 HTML。HTML 不区分大小写，但 XML 不区分大小写。

您可以很好地解析 HTML `lxml`，只需使用 HTML 模式：

```
>>> soup = BeautifulSoup(html_doc, "lxml")
>>> soup.head
<head><title>The Dormouse's story</title></head> 
```

如果您坚持使用 XML 解析器，则必须匹配输入元素的大小写：

```
>>> soup = BeautifulSoup(html_doc, "xml")
>>> soup.head
>>> soup.HEAD
<HEAD><title>The Dormouse's story</title></HEAD> 
```

如果您想处理 XML 并且不区分大小写，请坚持使用 提供的 ElementTree API `lxml`，并且根本不要使用 BeautifulSoup。然后，您必须使用[正则表达式 XPath search](http://lxml.de/xpathxslt.html#regular-expressions-in-xpath)：

```
regexpNS = "http://exslt.org/regular-expressions"
tree.xpath('//*[re:test(., '^head$', 'i')]', namespaces={'re':regexpNS}) 
```

这将找到所有具有 name 的元素`head`，不区分大小写。

# javascript - nodeJS：无法获得加密模块来给我正确的 AES 密码结果

> ID：15004951
> 
> 赞同：2
> 
> 时间：2013-02-21T14:37:59.057
> 
> 标签：javascript, node.js, cryptography, aes

我正在尝试使用 nodeJS 加密模块使用 AES 128 的 ECB 模式加密一些十六进制字符串。

为此，我使用以下代码：

```
cryptoAES = function (sInput, sKey, bEncrypt) {
    return crypto('AES-128-ECB', sInput, sKey, bEncrypt);
};

crypto = function (sAlgo, sInput, sKey, bEncrypt) {
    var result = "";
    if (bEncrypt){
        var cipher;
        var bKey = new Buffer(sKey, 'hex');
        var bInput = new Buffer(sInput, 'hex');

        cipher = crypto.createCipher(sAlgo, bKey);

        cipher.setAutoPadding(false);
        result = cipher.update(bInput, null, 'hex');
        result += cipher.final('hex');
    }
    return result;
}; 
```

当调用 cryptoAES 时：

```
sKey = '12345678900987654321123456789001'

sInput = '060123456789ABCDEF00000000000000' 
```

我应该得到

```
result = 'FBECD5D02C5B7CD1055AAF86238D1E2F' 
```

但我得到：

```
result = 'ea1f940da8e269b9e075c936bff6a1f7' 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T08:12:24.090

阅读[https://github.com/joyent/node/issues/1318#issuecomment-1562766](https://github.com/joyent/node/issues/1318#issuecomment-1562766)，您*确实*需要`crypto.createCipheriv()`：

```
cipher = crypto.createCipheriv(sAlgo, bKey, ''); 
```

这会产生所需的结果。

# tomcat - 当“Cookie”标头不正确时，Tomcat 抛出异常

> ID：15004953
> 
> 赞同：2
> 
> 时间：2013-02-21T14:38:01.843
> 
> 标签：tomcat, cookies

如果我发送不正确的 cookie 值，例如 `Cookie: привет-мир!`（非法俄罗斯字符），tomcat 会抛出异常：

```
Feb 21, 2013 6:29:16 AM org.apache.coyote.http11.AbstractHttp11Processor process
SEVERE: Error processing request
java.lang.IllegalArgumentException: Control character in cookie value or attribute.
    at org.apache.tomcat.util.http.CookieSupport.isHttpSeparator(CookieSupport.java:193)
    at org.apache.tomcat.util.http.Cookies.getTokenEndPosition(Cookies.java:488)
    at org.apache.tomcat.util.http.Cookies.processCookieHeader(Cookies.java:291)
    at org.apache.tomcat.util.http.Cookies.processCookies(Cookies.java:168)
    at org.apache.tomcat.util.http.Cookies.getCookieCount(Cookies.java:106)
    at org.apache.catalina.connector.CoyoteAdapter.parseSessionCookiesId(CoyoteAdapter.java:919)
    at org.apache.catalina.connector.CoyoteAdapter.postParseRequest(CoyoteAdapter.java:688)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:402)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1600)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我可以将tomcat配置为在这种情况下跳过cookie解析并处理请求吗？

# java - Java - 设置首选项 backingstore 目录

> ID：15004954
> 
> 赞同：3
> 
> 时间：2013-02-21T14:38:01.890
> 
> 标签：java, linux, jvm, preferences

我需要在我的 Java 应用程序中创建一个持久存储，以便所有用户都可以访问它。因此，我正在研究`java.util.prefs.Preferences`并`systemRoot()`在 Windows 上使用适合我的作品，将数据保存在 Register 上。但我在 Linux (Ubuntu) 上确实面临一些问题。我想使用我们其他应用程序已经使用的目录：/usr/share/。所以，我试图`systemRoot`在运行时将默认目录重定向到 /usr/share。这是我的代码：

```
System.setProperty("java -Djava.util.prefs.systemRoot", "/usr/share/myfolder");
Preferences pref = Preferences.systemRoot().node("/usr/share/myfolder"); 
```

根据这个[站点](http://www.reversexsl.com/j/index.php?option=com_content&task=view&id=44&Itemid=65)，我必须`.systemPrefs`在执行这个命令行之前创建文件夹，并且它的隐含`systemRoot()`将使用它。

当我执行我的程序时，我收到以下警告： `java.util.prefs.FileSystemPreferences syncWorld WARNING Couldn't flush system prefs: java.util.prefs.BackingStoreException: /etc/.java/.systemPrefs/usr create failed.`

所以我假设这`System.setProperty`不起作用。有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-24T21:09:49.697

这是在基于 *nix 的服务器上运行的 Java 的一个非常讨厌的问题。

我能够通过使用以下 vm args 来解决它：

```
-Djava.util.prefs.userRoot=/opt/apache-tomcat-7.0.50/uprefs -Djava.util.prefs.systemRoot=/opt/apache-tomcat-7.0.50/sprefs 
```

尽管`systemRoot`路径上的一个重要注意事项是在其中创建一个名为的子文件夹，`.systemPrefs`否则它将不起作用。

另外，不要忘记将`chown -R`这些目录提供给运行 java 应用程序的用户（在我的情况下是 tomcat）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-23T16:33:16.970

Bimalesh 建议，而不是

`System.setProperty("java -Djava.util.prefs.systemRoot", "/usr/share/myfolder")`, 你说

`System.setProperty("-Djava.util.prefs.systemRoot", "/usr/share/myfolder")`.

但是您要设置的属性的名称是`java.util.prefs.systemRoot`，而不是`-Djava.util.prefs.systemRoot`，所以您应该这样做

`System.setProperty("java.util.prefs.systemRoot", "/usr/share/myfolder");`

如果这不起作用，请尝试将“-D”开关添加到启动程序的命令行中。那是 `java -D...`应该去的地方。该命令将以

`java -Djava.util.prefs.systemRoot=/usr/share/myfolder`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T14:48:47.907

在 Linux 系统中，*系统*根首选项节点将位于`/etc`. 这是由于历史原因，并且是由 Linux 标准库规范的标准。任何非系统偏好都可以放在其他位置，但是将系统偏好放在其他位置是违反操作系统的设计的。

很可能您的定义在 Linux 系统中无效，因为它无法从 /etc 启动。显然，Java 代码中的某些内容取决于操作系统的规范，而不是您决定重新设置偏好根的基础。

通常，此类文件通过不可世界（甚至大多数用户）可写来防止修改。这意味着要让用户访问首选项，他们应该进入

```
 Preferences.userRoot() 
```

这会将它们放置在其主目录之外的隐藏目录中（它们将具有修改权限）。

如果您希望任何用户阅读任何其他用户的首选项（描述听起来像您可能），那么您将需要一个安装程序以足够授权的用户（通常是 root）身份运行，以创建所需的目录`/etc`并将其权限更改为世界可写。

通常 /etc 下的文件不是全局可写的，因为用户可以更改其他用户的设置，并被认为是对用户预期环境的一种安全漏洞。例如，粗心的员工（或心怀不满的员工）可能会一次性清除所有其他用户的偏好。

# cuda - CUDA内核中的主机浮点常量使用

> ID：15004955
> 
> 赞同：3
> 
> 时间：2013-02-21T14:38:04.877
> 
> 标签：cuda, constants, host

我正在使用 CUDA 5.0。我注意到编译器将允许我在内核中使用主机声明的**int常量。**但是，它拒绝编译任何使用主机声明的**浮点**常量的内核。有谁知道这种看似差异的原因？

例如，以下代码可以正常运行，但如果内核中的最后一行未注释，它将无法编译。

```
#include <cstdio>
#include <cuda_runtime.h>

static int   __constant__ DEV_INT_CONSTANT   = 1;
static float __constant__ DEV_FLOAT_CONSTANT = 2.0f;

static int   const        HST_INT_CONSTANT   = 3;
static float const        HST_FLOAT_CONSTANT = 4.0f;

__global__ void uselessKernel(float * val)
{
    *val = 0.0f;

    // Use device int and float constants
    *val += DEV_INT_CONSTANT;
    *val += DEV_FLOAT_CONSTANT;

    // Use host int and float constants
    *val += HST_INT_CONSTANT;
    //*val += HST_FLOAT_CONSTANT; // won't compile if uncommented
}

int main(void)
{
    float * d_val;
    cudaMalloc((void **)&d_val, sizeof(float));

    uselessKernel<<<1, 1>>>(d_val);

    cudaFree(d_val);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:24:41.110

在设备代码中添加一个常量数字是可以的，但在设备代码中添加一个存储在主机内存中的数字是不行的。

当从不引用该变量的 addr 时，编译器/优化器可以将代码中的每个引用`static const int`替换为该值`3`。在这种情况下，它就像`#define HST_INT_CONSTANT 3`，并且没有为此变量分配主机内存。

但是对于`float`var，主机内存总是被分配的，即使它是`static const float`. 由于内核无法直接访问主机内存，因此您的代码`static const float`不会被编译。

对于 C/C++，`int`可以比`float`.

你的代码在注释为 ON 时运行可以看作是 CUDA CI 认为的一个错误。这`static const int`是主机端的东西，设备不应该直接访问。

# delphi - delphi 如何在运行时创建记录

> ID：15004959
> 
> 赞同：0
> 
> 时间：2013-02-21T14:38:14.170
> 
> 标签：delphi, firemonkey

我想创建一个我`TSprite`在运行时调用的记录。

`TSprite`是我正在构建的关卡编辑器中使用的图像和 8 个选择点。

```
type 
  TSprite = record
    Image: TImage;
    Selection: TSelection;
    SelectionPointTL: TSelectionPoint; // top-left
    SelectionPointTM: TSelectionPoint; // top-middle
    SelectionPointTR: TSelectionPoint; // top-right
    SelectionPointML: TSelectionPoint; // middle-left
    SelectionPointMR: TSelectionPoint; // middle-right
    SelectionPointBL: TSelectionPoint; // bottom-left
    SelectionPointBM: TSelectionPoint; // bottom-middle
    SelectionPointBR: TSelectionPoint; // bottom-right
  end; 
```

现在我想将它存储在一个数组中。

```
arrSprites: array[0..1000] of TSprite; 
```

现在创作（我正在努力的部分）

这是我到目前为止所拥有的：

```
arrSprites[i].Image.Position.X := frmMainUI.CurrentMouseX;
arrSprites[i].Image.Position.Y := frmMainUI.CurrentMouseY;
arrSprites[i].Image.Bitmap.LoadFromFile('1.png');
arrSprites[i].Image.Visible := True;
arrSprites[i].Image.WrapMode := TImageWrapMode.iwStretch; 
```

所以这段代码应该做的是在一个滚动框内创建一个带有选择的图像：fsbcanvas。

为了清楚起见，我要求提供创建`TSprite`.

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T15:32:42.017

不需要创建记录。它们是值类型，您应该像考虑其他值类型一样看待它们，例如`Integer`. 声明一个作为值类型的局部变量或类字段，这就是您需要做的所有事情。同样，一个常量大小的数组是一个值类型。

因此，您的问题的答案是`arrSprites`不需要任何特殊分配。需要分配和初始化的是你记录的内容。因此，如果您的记录中的任何字段是类实例，那么它们需要实例化。因此，请考虑以下记录：

```
type
  TMyRecord = record
    i: Integer;
    obj: TObject;
  end; 
```

你可以这样声明：

```
var
  rec: TMyRecord; 
```

并分配记录本身。但是你需要初始化它的成员：

```
rec.i := 42; // or some other initial value
rec.obj := TObject.Create; // instantiate the object 
```

当您完成记录后，您需要销毁该对象。

```
rec.obj.Free; 
```

这很容易出错，因此通常您的记录应该只包含值类型或托管类型（例如字符串、接口、动态数组等）

现在，我无法从问题中看出您的代码是什么，但我怀疑您的记录有一些类实例。这立即使记录成为数据结构的可疑选择。我会将它们保存在一个类中，该类具有管理对象生命周期的构造函数和析构函数。

而且我也会避免使用恒定长度的数组。他们非常不灵活。相反，我建议您将精灵对象保存在通用列表中，`TList<T>`. 或者，也许更好，`TObjectList<T>`这样您就可以让列表照顾其成员的一生。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T15:51:57.057

我正在输入一个答案，因为 David Heffernan 刚刚击败了我。在此期间，我想补充一下；

意识到在您的第一个代码示例中，您正在使用记录 (TSprite) 来保存对象 (TImage)。TImage 实际上是一个可视化组件，但最终它是从 TObject 派生出来的。

**记录**与大多数变量（如整数）一样，不必实例化，可以随意复制。

**然而，对象**是指向实例的指针，必须按照以下步骤创建/销毁

```
rec.Image := TImage.Create(nil);
// do other things..
rec.Image.Free; 
```

因此，如果操作不当，可能会导致内存泄漏或访问冲突错误。（例如，在复制 TSprite 时..）在这个设置中有很多可能出错的地方，所以我说；

### 在记录中使用对象可能会很棘手。考虑将对象保存在对象中：

一个简单的解决方案（如果您确实想在 TSprite 中保留 TImage 的实例或指针引用）是使 TSprite 也成为一个对象。它可以通过使用其构造函数和析构函数来自动跟踪创建/销毁：

```
TSpriteObject = class(TObject)
public
  Image : TImage;

  constructor Create;
  destructor  Destroy; override;
end; 
```

及其实现：

```
constructor TSpriteObject.Create;
begin
  Image := TImage.Create(nil);
  // ^ TImage is a component and expects an Owner component that would also
  //   destroy it, so we use a nil value to disable that behavior.
end;

destructor TSpriteObject.Destroy;
begin
  Image.Free;
end; 
```

然后，您可以让 TObjectList 跟踪许多 TSprite 实例，并且当列表被清除或销毁时，它将销毁任何 TSprite（这会破坏其 TImage）。

（这是我第一次尝试stackoverflow帖子，请耐心等待我在这里发现我做错了什么）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:43:23.243

正如 David Heffernan 所说，对于这种情况，类可能是更好的数据结构。但是，如果您决定改用记录，则可以在记录中声明方法来重构实例化和销毁部分：

```
type
  TSprite = record
    Image: TImage;
    Selection: TSelection;
    SelectionPointTL: TSelectionPoint; // top-left
    SelectionPointTM: TSelectionPoint; // top-middle
    SelectionPointTR: TSelectionPoint; // top-right
    SelectionPointML: TSelectionPoint; // middle-left
    SelectionPointMR: TSelectionPoint; // middle-right
    SelectionPointBL: TSelectionPoint; // bottom-left
    SelectionPointBM: TSelectionPoint; // bottom-middle
    SelectionPointBR: TSelectionPoint; // bottom-right
    procedure Create(aImageOwner: TComponent);
    procedure Destroy;
  end;

{ TSprite }

procedure TSprite.Create(aImageOwner: TComponent);
begin
  Image := TImage.Create(aImageOwner);
end;

procedure TSprite.Destroy;

begin
  Image.Free;
end;

// ...

var
  Rec: TSprite;
begin
  Rec.Create(Form1);

  // ...

  Rec.Destroy;
end; 
```

请注意，它不是真正的类实例化，因此`Rec := TSprite.Create(Form1);`没有意义，除非您想以`TSprite.Create`这种方式定义和实现。

# javascript - Javascript 函数 calculateTotal() 显示 $NaN 直到选择所有字段

> ID：15004961
> 
> 赞同：0
> 
> 时间：2013-02-21T14:38:17.233
> 
> 标签：javascript, function, calculated-field

我正在使用 Javascript 函数`calculateTotal()`，我收到一个`$NaN`直到所有字段都被选中。它应该显示每个选择的总数。谢谢你能给我的任何帮助。这是我的代码：

```
 var test1_prices= new Array();

    test1_prices["None"]=0;
        test1_prices["Intro A"]=22;

        test1_prices["Intro B"]=22;
        test1_prices["Intro C"]=22;
        test1_prices["T/one"]=22;
        test1_prices["T/two"]=22;
        test1_prices["T/three"]=22;
        test1_prices["RT"]=22;
        test1_prices["Frst/one"]=22;
        test1_prices["Frst/two"]=22;
        test1_prices["Frst/three"]=22;
        test1_prices["RTF"]=22;
        test1_prices["Scnd/one"]=22;
        test1_prices["Scnd/two"]=22;
        test1_prices["Scnd/three"]=22;
        test1_prices["RTTwo"]=22;
        test1_prices["Third/one"]=22;
        test1_prices["Third/two"]=22;
        test1_prices["Third/three"]=22;
        test1_prices["Forth/one"]=22;
        test1_prices["Forth/two"]=22;
        test1_prices["Forth/three"]=22;
        test1_prices["Western/Basic1"]=22;
        test1_prices["Western/Basic2"]=22;
        test1_prices["Western/Prim1"]=22;
        test1_prices["Western/Prim2"]=22;
        test1_prices["Western/Prim3"]=22;
        test1_prices["Western/Prim4"]=22;
        test1_prices["Other 15"]=22;

    var test2_prices= new Array();
        test2_prices["None"]=0;

        test2_prices["Intro A"]=22;
        test2_prices["Intro B"]=22;
        test2_prices["Intro C"]=22;
        test2_prices["T/one"]=22;
        test2_prices["T/two"]=22;
        test2_prices["T/three"]=22;
        test2_prices["RT"]=22;
        test2_prices["Frst/one"]=22;
        test2_prices["Frst/two"]=22;
        test2_prices["Frst/three"]=22;
        test2_prices["RTF"]=22;
        test2_prices["Scnd/one"]=22;
        test2_prices["Scnd/two"]=22;
        test2_prices["Scnd/three"]=22;
        test2_prices["RTTwo"]=22;
        test2_prices["Third/one"]=22;
        test2_prices["Third/two"]=22;
        test2_prices["Third/three"]=22;
        test2_prices["Forth/one"]=22;
        test2_prices["Forth/two"]=22;
        test2_prices["Forth/three"]=22;
        test2_prices["Western/Basic1"]=22;
        test2_prices["Western/Basic2"]=22;
        test2_prices["Western/Prim1"]=22;
        test2_prices["Western/Prim2"]=22;
        test2_prices["Western/Prim3"]=22;
        test2_prices["Western/Prim4"]=22;
        test2_prices["Other 15"]=22;

    function gettest1Price()
    {
    var test1Price=0;
    var theForm = document.forms["SchoolingForm"];
    var selectedtest1 = theForm.elements["test1"];
    test1Price = test1_prices[selectedtest1.value];

    return test1Price;
    }

   function gettest2Price()
   {
    var test2Price=0;
    var theForm = document.forms["SchoolingForm"];
    var selectedtest2 = theForm.elements["test2"];
    test2Price = test2_prices[selectedtest2.value];

    return test2Price;
    }

    function calculateTotal()
    {

    var Price = gettest1Price() + gettest2Price();

    var divobj = document.getElementById('totalPrice');
    divobj.style.display='block';
    divobj.innerHTML = "Total Price For the Schooling Show $"+Price;

    }

    function hideTotal()
    {
    var divobj = document.getElementById('totalPrice');
    divobj.style.display='none';
    }

<body onload='hideTotal()'>
    <div id="wrap">
        <form action="" id="SchoolingForm" onsubmit="return false;">
        <div>
            <div class="cont_order">
               <fieldset>
                <legend>Select Your Test</legend>
       <p>         
        <label >Test1</label>

        <select id="test1" name="test1" onchange="calculateTotal()">
          <option value="" title="" selected="selected">None</option>
          <option value="Intro A" title="Intro A $22" >Intro A $22</option>
          <option value="Intro B" title="Intro B $22" >Intro B $22</option>
          <option value="Intro C" title="Intro C $22" >Intro C $22</option>
          <option value="T/one" title="Training 1 $22" >Training 1 $22</option>
          <option value="T/two" title="Training 2 $22" >Training 2 $22</option>
          <option value="T/three" title="Training 3 $22" >Training 3 $22</option>
          <option value="RT" title="Rider Test Training $22" >Rider Test Training $22</option>
          <option value="Frst/one" title="First 1 $22" >First 1 $22</option>
          <option value="Frst/two" title="First 2 $22" >First 2 $22</option>
          <option value="Frst/three" title="First 3  $22" >First 3  $22</option>
          <option value="RTF" title="Rider Test First Level $22" >Rider Test First Level $22</option>
          <option value="Scnd/one" title="Second 1 $22" >Second 1 $22</option>
          <option value="Scnd/two" title="Second 2 $22" >Second 2 $22</option>
          <option value="Scnd/three2" title="Second 3 $22" >Second 3 $22</option>
          <option value="RTTwo" title="Rider Test Second Level $22" >Rider Test Second Level $22</option>
          <option value="Third/one" title="Third 1 $22" >Third 1 $22</option>
          <option value="Third/two" title="Third 2 $22" >Third 2 $22</option>
          <option value="Third/three" title="Third 3 $22" >Third 3 $22</option>
          <option value="Forth/one" title="Forth 1 $22" >Forth 1 $22</option>
          <option value="Forth/two" title="Forth 2 $22" >Forth 2 $22</option>
          <option value="Forth/three" title="Forth 3 $22" >Forth 3 $22</option>
          <option value="Western/Basic1" title="Western Basic 1" >Western Basic 1 $22</option>
          <option value="Western/Basic2" title="Western Basic 2" >Western Basic 2 $22</option>
          <option value="Western/Prim1" title="Western Primary 1" >Western Primary 1 $22</option>
          <option value="Western/Prim2" title="Western Primary 2" >Western Primary 2 $22</option>
          <option value="Western/Prim3" title="Western Primary 3" >Western Primary 3 $22</option>
          <option value="Western/Prim4" title="Western Primary 2" >Western Primary 4 $22</option>
          <option value="Other 15" title="Other $22" >Other $22</option>
               </select>
                <br/>
          </p>      
          <p>
           <label>Test2</label><br/>
        <select id="test2" name="test2" size="1"  onchange="calculateTotal()">
          <option value="" title="" selected="selected">&nbsp;</option>
          <option value="Intro A" title="Intro A $22" >Intro A $22</option>
          <option value="Intro B" title="Intro B $22" >Intro B $22</option>
          <option value="Intro C" title="Intro C $22" >Intro C $22</option>
          <option value="T/one" title="Training 1 $22" >Training 1 $22</option>
          <option value="T/two" title="Training 2 $22" >Training 2 $22</option>
          <option value="T/three" title="Training 3 $22" >Training 3 $22</option>
          <option value="RT" title="Rider Test Training $22" >Rider Test Training $22</option>
          <option value="Frst/one" title="First 1 $22" >First 1 $22</option>
          <option value="Frst/two" title="First 2 $22" >First 2 $22</option>
          <option value="Frst/three" title="First 3  $22" >First 3  $22</option>
          <option value="RTF" title="Rider Test First Level $22" >Rider Test First Level $22</option>
          <option value="Scnd/one" title="Second 1 $22" >Second 1 $22</option>
          <option value="Scnd/two" title="Second 2 $22" >Second 2 $22</option>
          <option value="Scnd/three2" title="Second 3 $22" >Second 3 $22</option>
          <option value="RTTwo" title="Rider Test Second Level $22" >Rider Test Second Level $22</option>
          <option value="Third/one" title="Third 1 $22" >Third 1 $22</option>
          <option value="Third/two" title="Third 2 $22" >Third 2 $22</option>
          <option value="Third/three" title="Third 3 $22" >Third 3 $22</option>
          <option value="Forth/one" title="Forth 1 $22" >Forth 1 $22</option>
          <option value="Forth/two" title="Forth 2 $22" >Forth 2 $22</option>
          <option value="Forth/three" title="Forth 3 $22" >Forth 3 $22</option>
          <option value="Western/Basic1" title="Western Basic 1" >Western Basic 1 $22</option>
          <option value="Western/Basic2" title="Western Basic 2" >Western Basic 2 $22</option>
          <option value="Western/Prim1" title="Western Primary 1" >Western Primary 1 $22</option>
          <option value="Western/Prim2" title="Western Primary 2" >Western Primary 2 $22</option>
          <option value="Western/Prim3" title="Western Primary 3" >Western Primary 3 $22</option>
          <option value="Western/Prim4" title="Western Primary 2" >Western Primary 4 $22</option>
          <option value="Other 15" title="Other $22" >Other $22</option>
        </select>

          </p> 

                <div id="totalPrice"></div>

                </fieldset>
            </div>

            <div class="cont_details">
                <fieldset>
                <legend>Contact Details</legend>
                <label for='name'>Name</label>
                <input type="text" id="name" name='name' />
                <br/>
                <label for='address'>Address</label>
                <input type="text" id="address" name='address' />
                <br/>
                <label for='phonenumber'>Phone Number</label>
                <input type="text"  id="phonenumber" name='phonenumber'/>
                <br/>
                </fieldset>
            </div>
            <input type='submit' id='submit' value='Submit' onclick="calculateTotal()" />
        </div>  
       </form>
    </div><!--End of wrap-->

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:55:06.430

这有效：

```
function calculateTotal()
{
    var price1, price2 = 0;

    if (!isNaN(gettest1Price())) {
        price1 = gettest1Price();
    }

    if (!isNaN(gettest2Price())) {
        price2 = gettest2Price();
    }

    var Price = price1 + price2;

    var divobj = document.getElementById('totalPrice');
    divobj.style.display='block';
    divobj.innerHTML = "Total Price For the Schooling Show $"+Price;

} 
```

还需要更改 HTML，你有`value=""`：

```
<option value="None" title="" selected="selected">None</option> 
```

这是工作小提琴：

[http://jsfiddle.net/8aBBR/1/](http://jsfiddle.net/8aBBR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:44:58.733

问题是你的初始化`test1_prices`和`test2_prices`数组，它们必须是一个对象`{}`才能接收一个字符串作为键

# c#-4.0 - 我的 C# 窗口应用程序无法在 ADO.net 和实体框架中向 sql 数据库插入新记录

> ID：15004962
> 
> 赞同：0
> 
> 时间：2013-02-21T14:38:18.320
> 
> 标签：c#-4.0

美好的一天人们！我的 C# 窗口应用程序有问题。我无法将新记录插入数据库。我在 ADO.net 和实体框架中寻找了许多教程。我一直在实体框架中解决它，因为这是我的偏好。我的实体框架代码将成功运行以插入新记录。当我去后端查看结果时；没有找到。我正在使用 Visual Studio 2010。我通过 Visual Studio 开发了数据库（添加新项目的正常方式）。我有这段代码：

public bool CreateStaff(string txtUserName, string gender, string txtProfession, string txtMobilePhone, string txtAddress) { //使用 (MyHospDataEntities db = new MyHospDataEntities()) //{ try { StaffData addtaff = new StaffData();

```
 addstaff.StaffName = txtUserName;
                addstaff.Sex = gender;
                addstaff.DateCreated = DateTime.Now;
                addstaff.Profession = txtProfession;
                addstaff.PhoneNumber = txtMobilePhone;
                addstaff.Address = txtAddress;
                mms.StaffDatas.AddObject(addstaff);
                mms.SaveChanges();
            }
            catch (Exception exp)
            {
                throw new Exception("ERROR: Unable to Add Staff - " + exp.Message.ToString(), exp);
            }
            //}
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:01:48.403

“mms”这是 DbContext？

你可以试试这个

`mms.StaffDatas.Add(new StaffDatas {});`

`mms.SaveChanges();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T18:18:15.250

确保您的*连接字符串*是正确的。有时像这样的*连接字符串*

> "数据源=.\SQLEXPRESS;AttachDbFilename="+Application.StartupPath +"Database1.mdf;集成安全=True;用户实例=True"

如果您在运行时和文件夹中具有`.exe`并且相同的问题，则会给您同样的问题。`database file``bin/debug`

# mfc - MFC浮动CDialog控件剪辑问题

> ID：15004964
> 
> 赞同：1
> 
> 时间：2013-02-21T14:38:30.127
> 
> 标签：mfc, clipping, cdialog

我正在制作一个使用框架视图为用户提供一组控件（按钮、编辑框等）的 SDI MDF 应用程序。该视图还拥有一组 CDialogs，用于显示可以通过 tabcontrol 和其他方式显示或隐藏的附加控件。直到最近，对话框在创建时被静态放置在屏幕上的正确位置，但我想添加一个对话框，用户可以四处移动但仍然是视图的子级。当我创建一个带有标题和系统菜单的对话框时，用户可以移动我遇到的问题是，当窗口放置在视图拥有的另一个控件上时，（比如说一个按钮）当调用绘制方法时按钮，它会覆盖对话框。对话框仍然在顶部，并且仍然可以与对话框控件进行交互，但按钮会绘制在它们之上，直到重新绘制对话框。我尝试更改对话框的 clipchild 和 clipsiblings 设置，并且能够让对话框正确地相互剪辑，但似乎无法让子对话框正确地剪辑父视图控件。有没有人对什么设置可以解决这个剪辑问题有任何想法。

# java - 新 Java 开发人员的 cURL java 等效项

> ID：15004967
> 
> 赞同：1
> 
> 时间：2013-02-21T14:38:38.380
> 
> 标签：java, jsp, curl

我正在寻找如何解决这个问题的想法。我需要访问网络服务。我已获得通过 PHP cURL 库访问它的代码。但是，我使用 Java/JSP 服务器来访问它。我相信这是可能的（httpsURLConnection？），但我对 Java 开发和我正在开发的基于 Java/jsp 的 CMS 服务器非常陌生。任何想法/解决方案都会非常有帮助。

基本 PHP Curl 脚本 - 这将如何在 JAVA 中完成？

```
$id = "a.name";
$key = base64_encode("key:12345");

$url = "https://secure.server.com/$id";

// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_PORT , 443);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/certs/file.pem");
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Auth: $key"));

// grab URL
$result = curl_exec($ch);

//result then parsed to be used as screen data 
```

# android - 为外部启用的功能计费

> ID：15004977
> 
> 赞同：1
> 
> 时间：2013-02-21T14:39:16.697
> 
> 标签：android

我正处于确定针对特定垂直市场的应用程序范围的早期阶段。它不是以消费者为导向的。开发应用程序的组织拥有现有的基于 Web 的产品和用于注册用户帐户和为这些产品计费的基础设施，并且应用程序应该与这些产品互操作。为此，我有几个问题：

1) 如果应用程序的功能只能从应用程序外部启用（例如，通过单独的网站）并且开发人员为此向用户收费：

Q1。这个应用程序可以使用 Google Play 分发吗？

Q2。由于启用该功能是在应用程序之外进行的，因此开发人员是否必须使用 Google Play 的支付系统为其收费？

2) 如果允许用户在单独的网站上创建内容项的应用程序，以便他们随后可以在该网站上对其进行修改并为此付费（例如，为创建错误而收费的错误跟踪应用程序在网站上记录）：

Q3 这是否算作应用内购买并需要使用 Google Play 的支付系统进行结算？

我在哪里可以找到 Google 关于这些情况的明确声明？我只找到与购买和计费场景相当简单的消费者应用程序相关的材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:26:33.383

我无法对您问题的潜在“您旁边没有任何付款方式”方面有太多了解，但从技术方面来看，我想到了以下方面。

*   Q1：从技术上讲，该应用程序可以在 GP 上免费使用其他付款方式，也可以使用许可验证服务。
*   Q2：部署 Google Play 许可的唯一安全方法是在您自己的安全服务器上执行所有完整性检查。该应用程序可以请求 GP LVL 信息并将其传递到您的服务器。您可以使用 GP LVL 用户 ID（一个模糊的二进制应用程序特定字节字符串）来识别用户并与您的应用程序协商您可能想要实施的任何密码详细信息。当然，在这种情况下，我希望用户觉得他已经支付了，所以服务器端的注册应该可以顺利集成。如果服务器端还需要“启用”/“身份验证”步骤，我不确定是否会使用 GP LVL。
*   Q3：您可以为此使用 GP IAB V3 消耗品应用内购买（或 V2 订阅，但听起来更像是按项目付款）。同样，仅当您在服务器上为购买 Intent 生成按购买的 developerPayload 并在应用查看用户购买时对其进行验证时，这才是安全的。再次验证必须在您的服务器上进行，否则您必须在您的应用程序中包含您的应用程序的公钥，这是您的应用程序被破解的重要一步。
*   一般来说，如果您有自己的用户管理要使用，重要的是要知道 GP 信息是相对匿名的（LVL：混淆，IAB V3：根本没有应用程序方向的信息）。因此，我想说，“您的”帐户和 GP 体验之间的可靠、面向用例的绑定将是关键。

# c# - 绘制事件执行后按钮文本消失

> ID：15004978
> 
> 赞同：0
> 
> 时间：2013-02-21T14:39:17.280
> 
> 标签：c#

这很奇怪。当我在按钮的绘制事件中执行此操作时：

```
using (LinearGradientBrush brush = new LinearGradientBrush(button1.ClientRectangle,
                                                               Color.Orange,
                                                               Color.Red,
                                                               90F))
{
  e.Graphics.FillRectangle(brush, this.ClientRectangle);
} 
```

按钮的文本消失。我怎样才能找回文字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:43:49.217

您基本上是在控件的顶部绘制。您应该尝试对按钮进行子类化并覆盖`OnPaintBackground`以在文本后面绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:44:28.643

为什么不设置按钮的背景画笔？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:45:48.443

1.  打电话`button1.Invalidate()`。这将重绘文本...和整个按钮。
2.  以前的建议可能不会产生您想要的结果。由于您决定自己绘制按钮，因此您还将负责在背景上绘制文本，请参阅`DrawString`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:00:24.790

如果您不想使用背景属性或重写 OnPaintBackground 方法，可以执行以下操作：

//你的背景画代码

```
public void DrawText(Graphics g, Rectangle bounds, string text, Font font, Brush brush)
{
   float x = bounds.Width / 2;
   float y = bounds.Height /2;

   SizeF textSize = g.MeasureString(text, font);

   x = (x - (textSize.Width / 2) + bounds.X);
   y = (x - (textSize.Height / 2) + bounds.Y);

   g.DrawString(text, font, brush, new PointF(x, y));
} 
```

并像这样使用它

```
DrawText(g, button1.ClientRectangle, button1.Text, button1.Font, new SolidBrush(button1.ForeColor)); 
```

None of this is actually tested though sooooo yeaaaa....

EDIT: If you choose to go this route, you will have to keep in mind that when the control is resized, it would require a repaint of the control.

# c# - 从 asp.net 中调用字符串属性 标签

> ID：15004979
> 
> 赞同：-1
> 
> 时间：2013-02-21T14:39:20.380
> 
> 标签：c#, asp.net

这可能是一个简单的问题，但我很困惑。我想从`<div>`in 标记中调用代码隐藏中的特定字符串属性。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:02:46.163

Assuming this is your markup:

```
<div id="div1" runat="server" myattribute="hello world">...</div> 
```

You can read it in code behind using such code:

```
string myAttrValue = div1.Attributes["myattribute"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:06:50.333

尝试如下...它会工作...

**HTML**

```
<div id="divID" runat="server"></div>
<asp:Button ID="btnClick" runat="server" OnClientClick="sam();" Text="Get Div Value" /> 
```

**C＃**

```
public String Test = "Hello World !"; 
```

在`Page Load`SET 这个值到`DIV`

```
divID.InnerHtml = Test; 
```

**Javascript：**

```
<script>
        function sam() {    
        alert(document.getElementById("divID").innerHTML);              
        }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:00:03.297

您可以将代码中的公共变量添加到页面上的属性中，如下所示：

```
<div id="mydiv" data-my-value="<%= MyValue %>"> 
```

然后像这样使用javascript访问它：

```
document.getElementById('mydiv').attributes['data-my-value'].value 
```

# php - 我可以将我的 Intranet 设置为能够使用 PHP 发送电子邮件吗？

> ID：15004980
> 
> 赞同：0
> 
> 时间：2013-02-21T14:39:20.937
> 
> 标签：php, email, iis-7

我对设置服务器很陌生。在我托管的外部服务器上，我可以使用 PHP 中的 mail() 函数发送电子邮件。我有一个带有 IIS7 的 Windows 2008 服务器，我将其用于 Intranet。Mail() 在此服务器上不起作用。根据我的研究，这似乎是因为服务器没有连接到互联网，但这可能是错误信息。有没有办法让电子邮件 php 函数通过这个服务器工作？到目前为止，我一直无法找到解决方案。我需要它来工作，因为我正在使用需要能够发送电子邮件的开源应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:49:13.373

使用 SMTP。基本上每个邮件提供商都使用此协议来发送邮件。只是为了它的简单部分看看这个教程：[http ://www.9lessons.info/2009/10/send-mail-using-smtp-and-php.html](http://www.9lessons.info/2009/10/send-mail-using-smtp-and-php.html)

您需要一台 SMTP 服务器，但无论您拥有自己的邮件服务器还是来自您的 ISP，您的邮件提供商都有一台

# c++ - 在实现程序的配置设置时有什么好的方法？

> ID：15004981
> 
> 赞同：1
> 
> 时间：2013-02-21T14:39:21.630
> 
> 标签：c++, configuration, singleton, global-variables

假设您有一个程序应该从配置文件中读取程序的设置。您是否会使用存储它们的单例类、每个设置具有静态属性的类或命名空间内的全局变量来实现它们？或者可能有更好的东西？

在我的例子中，我在命名空间中使用全局变量来实现它们，尽管我被教导永远不要将全局变量用于任何事情，因为我已经读过单例模式现在被认为比它们更糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:46:57.587

我将在单独的类或模块中实现它们（类似于[boost.program_options](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options/tutorial.html#idp119962144)）并通过依赖注入和参数值将它们传播到代码库的其余部分。

在这些值不变的情况下，您可以将它们放在（或者）一个选项文件中或作为默认参数值而忘记它们。

这将允许在不更改代码库的情况下以不同的默认值运行，并允许您在运行测试时使用不同的默认值/模拟数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:03:44.243

I would use a singleton that returns some sort of container containing all the attributes i need to configure my program. IMO as long as the singleton has not internal states, that influence the call of singelton member, theres no problem in using the pattern. With stateless i mean that the a call to a singleton member should always produce the same result, with a given set of parameters, no matter what. This way one can guarentee that two calls at different locations in the program do not affect the programm in different ways.

# asp.net-mvc - 在 ASP.NET MVC API 中发布对象

> ID：15004982
> 
> 赞同：0
> 
> 时间：2013-02-21T14:39:22.430
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing, asp.net-web-api-routing

我有一个**MVC 应用程序，它在一个简单的****mvc 4 项目**中包含一个 Web 应用程序。此外，我有一个*Windows 应用程序*，它是另一个 Windows 应用程序项目中 Web 应用程序的 Windows 执行。

Windows 应用程序使用**MVC API**并通过 resthelper 类以 TfsApiController 的名称调用 MVC Web 应用程序控制器。

除 post 方法外，所有方法均有效。我想将一个对象发布到 tfsapi 控制器。

rest 助手类的 post 方法：

```
public void Post(T targetObject)
{
    if (targetObject == null)
    {
        throw new System.ArgumentNullException("targetObject");
    }

    //Get formatting details.
    System.Net.Http.Formatting.MediaTypeFormatter myFormatter = new XmlMediaTypeFormatter();

    myUrlSuffix = "api/tfsapi";

    //Make the call.
    var result = this.MainHttpClient.PostAsync(myUrlSuffix, targetObject, myFormatter).Result.Content.ReadAsAsync<T>().Result;
} 
```

我的 TfsApiController 方法：

```
public void PostPreActivity(PreActivity preActivity)
{
} 
```

和路由：

```
RouteTable.Routes.MapHttpRoute(
name: "PostPreActivity",
routeTemplate: "api/tfsapi/Post",
defaults: new { id = RouteParameter.Optional }
).RouteHandler = new SessionRouteHandler(); 
```

我浪费了很多时间，但我不知道是什么问题。

更新：

这是我的所有路由：

```
RouteTable.Routes.MapHttpRoute(
         name: "GetWorkItemsByProject",
         routeTemplate: "api/{controller}/{action}/{projectID}",
         defaults: new { controller = "tfsapi", action = "GetWorkItems", projectID = UrlParameter.Optional }
     ).RouteHandler = new SessionRouteHandler();;

RouteTable.Routes.MapHttpRoute(
         name: "ActionWebApiRoute",
         routeTemplate: "api/{controller}/{action}/{id}",
         defaults: new { id = RouteParameter.Optional }
     ).RouteHandler = new SessionRouteHandler();

RouteTable.Routes.MapHttpRoute(
         name: "DefaultApi",
         routeTemplate: "api/{controller}/{id}",
         defaults: new { id = RouteParameter.Optional }
     ).RouteHandler = new SessionRouteHandler(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:20:50.990

您的路线似乎不正确，将其更改为如下所示，然后重试：

```
config.Routes.MapHttpRoute(
            name: "TfsApiRoute",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

顺便说一句，您使用 SessionRouteHandler 做什么？

[**以上帖子更新后更新**]

您需要更改以下代码以完全包含操作名称： myUrlSuffix = "api/tfsapi/ **PostPreActivity** ";

我相信这是因为根据您更新的路由，当像“api/tfsapi”这样的请求出现时，它会尝试与名为“GetWorkItemsByProject”的第一条路由匹配，并且由于“操作”在这里不是可选的，你可能看到 404 未找到。

# ipc - 进程间通信工厂（设计建议）

> ID：15004983
> 
> 赞同：0
> 
> 时间：2013-02-21T14:39:25.123
> 
> 标签：ipc, remoting, factory, gac

我有一个解决方案，其中包含许多单独的 EXE，这些 EXE 需要能够彼此来回发送消息。现在每个 EXE 都必须预先了解彼此，并且他们使用 IPC 进行通信，但我真的想要一个更优雅的解决方案。

我想要一个工厂，其中每个 EXE 都可以将自己注册为端点，并且任何 EXE 都可以去工厂并检索所有已注册端点的列表，这样他就可以将目标消息发送到他当时需要与之交谈的应用程序，而无需事先了解所有谈话过程的所有细节。

我已经制定了工厂 DLL，但我不知道如何使其成为全局实例，这是解决方案中所有正在运行的 EXE 之间共享的工厂实例。有人告诉我通过 NT 服务、全局程序集缓存使用 WCF，甚至告诉我在 allUsers AppData 中维护一个包含序列化端点的 XML 文件。我还没有研究这些选项，但我计划在接下来的几天内开始研究它们。

我想知道这里是否有人可以推荐一个简单、优雅和常识性的建议来完成我需要做的事情（在许多正在运行的进程中共享一个实例工厂）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:05:19.227

DLL 本身被加载到每个 EXE 的地址空间中。但是，您可以在 DLL 中声明共享内存块，或直接使用 Windows API 使用内存映射文件。通过这种方式，您可以获得一块内存，可以同时从多个 EXE（或从加载到多个 EXE 的同一个 DLL）访问该内存块。您将需要一个互斥锁来防止并发写入内存块。就这样。

忘记 WCF 和其他复杂的任务 - 提供这些建议的人通常不太了解 IPC 和系统 API，只推荐他们知道的东西。

# c++ - 如何使用 C++ 在 Windows 上将包含多个分区的图像写入 USB 闪存驱动器

> ID：15004984
> 
> 赞同：4
> 
> 时间：2013-02-21T14:39:25.627
> 
> 标签：c++, windows, partitioning, usb-flash-drive

在 Windows 上，您只能看到可移动媒体上的第一个分区。我想编写一个 C++ 程序，该程序可以将包含 MBR 和 2 个数据分区的图像写入 USB 闪存驱动器。我不需要在 Windows 中查看第二个分区——我只需要能够将这个原始图像从 Windows/C++ 写入 USB 闪存驱动器，以便稍后在 Linux 上运行时，可以看到这两个分区。

我已经阅读了有关安装过滤器驱动程序的信息，该驱动程序最终会将可移动媒体视为固定的，这很适合阅读，但我只想在对用户 PC 的干扰最小的情况下编写此图像。我可以从第一个扇区开始访问原始 USB 驱动器，然后只写入 MBR，然后写入两个数据分区吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:41:06.483

如果您有足够的权限执行此操作，您可以打开一个句柄，通过使用[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)类似`\\.\PhysicalDrive2`.

您需要找出物理驱动器号。如果您有驱动器号，您可以使用类似文件名打开卷句柄`\\?\D:`，然后用于[`IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365194%28v=vs.85%29.aspx)确定与卷关联的物理驱动器号。

您可能需要先卸载现有卷（如果有）。我不确定最好的方法是什么，但您可以尝试使用[`IOCTL_VOLUME_OFFLINE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb309064%28v=vs.85%29.aspx).

*编辑：*这是我用于磁盘映像的一些代码，尽管我不记得我是否曾经在 USB 磁盘上尝试过它。公共领域，但没有明示或暗示的保证等。（查看代码我注意到我没有明确检查扇区大小以确保缓冲区和读/写操作正确对齐。这应该'在实践中不是问题，因为常用的最大扇区大小是 4K，这也是 Windows 上的内存页面大小。但是，在生产代码中，您应该始终明确确定相关设备的扇区大小并确保正确对齐因此。）

```
#define _WIN32_WINNT 0x0501

#include <windows.h>

#include <stdio.h>

#define dump_buffersize_megs 16
#define dump_buffersize (dump_buffersize_megs * 1024 * 1024)
#define dump_workingsetsize ((dump_buffersize_megs + 1) * 1024 * 1024)

DWORD save(const wchar_t * source_device_name, const wchar_t * filename) {

  DWORD err;

  HANDLE hdevice, houtput;

  DWORD bytes_to_transfer, byte_count;

  GET_LENGTH_INFORMATION source_disklength;

  DISK_GEOMETRY source_diskgeometry;

  LARGE_INTEGER offset;

  OVERLAPPED overlapped;

  BYTE * buffer;

  if (!SetProcessWorkingSetSize(GetCurrentProcess(), dump_workingsetsize, dump_workingsetsize)) 
  {
    err = GetLastError();
    printf("Error %u trying to expand working set.\n", err);
    return err;
  }

  buffer = VirtualAlloc(NULL, dump_buffersize, MEM_COMMIT, PAGE_READWRITE);

  if (buffer == NULL)
  {
    err = GetLastError();
    printf("Error %u trying to allocate buffer.\n", err);
    return err;
  }

  if (!VirtualLock(buffer, dump_buffersize))
  {
    err = GetLastError();
    printf("Error %u trying to lock buffer.\n", err);
    return err;
  }

  hdevice = CreateFile
    (
    source_device_name,
    GENERIC_READ,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_NO_BUFFERING,
    NULL
    );

  if (hdevice == INVALID_HANDLE_VALUE) {
    err = GetLastError();
    fprintf(stderr, "Error %u opening input device.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    hdevice,
    FSCTL_LOCK_VOLUME,
    NULL,
    0,
    NULL,
    0,
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u locking input volume.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    hdevice,
    IOCTL_DISK_GET_DRIVE_GEOMETRY,
    NULL,
    0,
    &source_diskgeometry,
    sizeof(source_diskgeometry),
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u getting device geometry.\n", err);
    return err;
  }

  switch (source_diskgeometry.MediaType)
  {
  case Unknown:
  case RemovableMedia:
  case FixedMedia:

    if (!DeviceIoControl
      (
      hdevice,
      IOCTL_DISK_GET_LENGTH_INFO,
      NULL,
      0,
      &source_disklength,
      sizeof(source_disklength),
      &byte_count,
      NULL
      ))
    {
      err = GetLastError();
      fprintf(stderr, "Error %u getting input device length.\n", err);
      return err;
    }

    fprintf(stderr, "\nInput disk has %I64i bytes.\n\n", source_disklength.Length.QuadPart);
    break;

  default:

    source_disklength.Length.QuadPart = 
      source_diskgeometry.Cylinders.QuadPart *
      source_diskgeometry.TracksPerCylinder *
      source_diskgeometry.SectorsPerTrack *
      source_diskgeometry.BytesPerSector;

    fprintf(stderr, 
      "\n"
      "Input device appears to be a floppy disk.  WARNING: if this is not a\n"
      "floppy disk the calculated size will probably be incorrect, resulting\n"
      "in an incomplete copy.\n"
      "\n"
      "Input disk has %I64i bytes.\n"
      "\n", 
      source_disklength.Length.QuadPart);

    break;
  }

  houtput = CreateFile
    (
    filename,
    GENERIC_WRITE,
    0,
    NULL,
    CREATE_ALWAYS,
    FILE_FLAG_NO_BUFFERING | FILE_FLAG_OVERLAPPED,
    NULL
    );

  if (houtput == INVALID_HANDLE_VALUE)
  {
    err = GetLastError();
    fprintf(stderr, "Error %u creating output file.\n", err);
    return err;
  }

  offset.QuadPart = 0;
  overlapped.hEvent = 0;

  for (;;) 
  {
    overlapped.Offset = offset.LowPart;
    overlapped.OffsetHigh = offset.HighPart;

    if (source_disklength.Length.QuadPart - offset.QuadPart < dump_buffersize) 
    {
      bytes_to_transfer = (DWORD)(source_disklength.Length.QuadPart - offset.QuadPart);
      if (bytes_to_transfer == 0) break;
    }
    else
    {
      bytes_to_transfer = dump_buffersize;
    }

    if (!ReadFile(hdevice, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      printf("Error %u initiating read from input disk.\n", err);
      return err;
    }

    if (!GetOverlappedResult(hdevice, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u reading from input disk.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      err = GetLastError();
      printf("Internal error - partial read.  Last error code %u.\n", err);
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      if (byte_count == 0) return ERROR_INVALID_FUNCTION;
      bytes_to_transfer = byte_count;
    }

    if (!WriteFile(houtput, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      if (err != ERROR_IO_PENDING)
      {
        printf("Error %u initiating write to output file.\n", err);
        return err;
      }
    }

    if (!GetOverlappedResult(houtput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u writing to output file.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      printf("Internal error - partial write.\n");
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      return ERROR_INVALID_FUNCTION;
    }

    offset.QuadPart += bytes_to_transfer;
  }

  overlapped.Offset = offset.LowPart;
  overlapped.OffsetHigh = offset.HighPart;

  if (!ReadFile(hdevice, buffer, source_diskgeometry.BytesPerSector, NULL, &overlapped)) 
  {
    err = GetLastError();
    if (err == ERROR_HANDLE_EOF)
    {
      printf("Save successfully completed.\n");      
      return 0;
    }
    printf("Error %u initiating read from input disk past end of file.\n", err);
    return err;
  }

  if (!GetOverlappedResult(hdevice, &overlapped, &byte_count, TRUE)) 
  {
    err = GetLastError();
    if (err == ERROR_HANDLE_EOF)
    {
      printf("Save successfully completed.\n");      
      return 0;
    }
    printf("Error %u reading from input disk past end of file.\n", err);
    return err;
  }

  if (byte_count == 0)
  {
    printf("Save successfully completed.\n"); 
    return 0;
  }

  printf("WARNING: the expected amount of data was successfully copied,\n"
         "but end of file not detected on input disk.  The copy might\n"
         "not be complete.");

  return ERROR_MORE_DATA;

}

DWORD write(const wchar_t * filename, const wchar_t * target_device_name) {

  DWORD err;

  HANDLE hinput, houtput;

  WIN32_FILE_ATTRIBUTE_DATA fad;

  DWORD bytes_to_transfer, byte_count;

  LARGE_INTEGER filelength;

  GET_LENGTH_INFORMATION target_disklength;

  DISK_GEOMETRY target_diskgeometry;

  LARGE_INTEGER transfer_length;

  LARGE_INTEGER offset;

  OVERLAPPED overlapped;

  BYTE * buffer;

  if (!SetProcessWorkingSetSize(GetCurrentProcess(), dump_workingsetsize, dump_workingsetsize)) 
  {
    err = GetLastError();
    printf("Error %u trying to expand working set.\n", err);
    return err;
  }

  buffer = VirtualAlloc(NULL, dump_buffersize, MEM_COMMIT, PAGE_READWRITE);

  if (buffer == NULL)
  {
    err = GetLastError();
    printf("Error %u trying to allocate buffer.\n", err);
    return err;
  }

  if (!VirtualLock(buffer, dump_buffersize))
  {
    err = GetLastError();
    printf("Error %u trying to lock buffer.\n", err);
    return err;
  }

  if (!GetFileAttributesEx(filename, GetFileExInfoStandard, &fad)) 
  {
    err = GetLastError();
    fprintf(stderr, "Error %u reading input file attributes.\n", err);
    return err;
  }

  filelength.HighPart = fad.nFileSizeHigh;
  filelength.LowPart = fad.nFileSizeLow;

  fprintf(stderr, "\nInput file has %I64i bytes.\n", filelength.QuadPart);

  hinput = CreateFile
    (
    filename,
    GENERIC_READ,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_NO_BUFFERING | FILE_FLAG_OVERLAPPED,
    NULL
    );

  if (hinput == INVALID_HANDLE_VALUE)
  {
    err = GetLastError();
    fprintf(stderr, "Error %u opening input file.\n", err);
    return err;
  }

  houtput = CreateFile
    (
    target_device_name,
    GENERIC_READ | GENERIC_WRITE,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_NO_BUFFERING,
    NULL
    );

  if (houtput == INVALID_HANDLE_VALUE) {
    err = GetLastError();
    fprintf(stderr, "Error %u opening output device.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    houtput,
    FSCTL_LOCK_VOLUME,
    NULL,
    0,
    NULL,
    0,
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u locking volume.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    houtput,
    IOCTL_DISK_GET_DRIVE_GEOMETRY,
    NULL,
    0,
    &target_diskgeometry,
    sizeof(target_diskgeometry),
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u getting output device geometry.\n", err);
    return err;
  }

  switch (target_diskgeometry.MediaType)
  {
  case Unknown:
  case RemovableMedia:
  case FixedMedia:

    if (!DeviceIoControl
      (
      houtput,
      IOCTL_DISK_GET_LENGTH_INFO,
      NULL,
      0,
      &target_disklength,
      sizeof(target_disklength),
      &byte_count,
      NULL
      ))
    {
      err = GetLastError();
      fprintf(stderr, "Error %u getting output device length.\n", err);
      return err;
    }

    fprintf(stderr, "Output disk has %I64i bytes.\n\n", target_disklength.Length.QuadPart);
    break;

  default:

    target_disklength.Length.QuadPart = 
      target_diskgeometry.Cylinders.QuadPart *
      target_diskgeometry.TracksPerCylinder *
      target_diskgeometry.SectorsPerTrack *
      target_diskgeometry.BytesPerSector;

    fprintf(stderr, 
      "\n"
      "Output device appears to be a floppy disk.  WARNING: if this is not a\n"
      "floppy disk the calculated output device size is probably incorrect,\n"
      "which might result in an incomplete copy.\n"
      "\n"
      "Output disk has %I64i bytes.\n"
      "\n", 
      target_disklength.Length.QuadPart);

    break;
  }

  if (filelength.QuadPart == target_disklength.Length.QuadPart)
  {
    transfer_length.QuadPart = filelength.QuadPart;
  }
  else if (filelength.QuadPart < target_disklength.Length.QuadPart)
  {
    fprintf(stderr, "Image is smaller than target.  Part of the target will not be written to.\n\n");
    transfer_length.QuadPart = filelength.QuadPart;
  }
  else
  {
    fprintf(stderr, "Image is larger than target.  Part of the image will not be copied.\n\n");
    transfer_length.QuadPart = target_disklength.Length.QuadPart;
  }

  offset.QuadPart = 0;
  overlapped.hEvent = 0;

  for (;;) 
  {
    overlapped.Offset = offset.LowPart;
    overlapped.OffsetHigh = offset.HighPart;

    if (transfer_length.QuadPart - offset.QuadPart < dump_buffersize) 
    {
      bytes_to_transfer = (DWORD)(transfer_length.QuadPart - offset.QuadPart);
      if (bytes_to_transfer == 0) break;
    }
    else
    {
      bytes_to_transfer = dump_buffersize;
    }

    if (!ReadFile(hinput, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      if (err != ERROR_IO_PENDING)
      {
        printf("Error %u initiating read from input file.\n", err);
        return err;
      }
    }

    if (!GetOverlappedResult(hinput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u reading from input file.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      err = GetLastError();
      printf("Internal error - partial read.  Last error code %u.\n", err);
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      if (byte_count == 0) return ERROR_INVALID_FUNCTION;
      bytes_to_transfer = byte_count;
    }

    if (!WriteFile(houtput, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      if (err != ERROR_IO_PENDING)
      {
        printf("Error %u initiating write to output disk.\n", err);
        return err;
      }
    }

    if (!GetOverlappedResult(houtput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u writing to output disk.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      printf("Internal error - partial write.\n");
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      return ERROR_INVALID_FUNCTION;
    }

    offset.QuadPart += bytes_to_transfer;
  }

  printf("Write successfully completed.\n");
  return 0;
}

DWORD clone(const wchar_t * source_device_name, const wchar_t * target_device_name) {

  DWORD err;

  HANDLE hinput, houtput;

  DWORD bytes_to_transfer, byte_count;

  GET_LENGTH_INFORMATION source_disklength;

  DISK_GEOMETRY source_diskgeometry;

  GET_LENGTH_INFORMATION target_disklength;

  DISK_GEOMETRY target_diskgeometry;

  LARGE_INTEGER transfer_length;

  LARGE_INTEGER offset;

  OVERLAPPED overlapped;

  BYTE * buffer;

  DWORD result;

  if (!SetProcessWorkingSetSize(GetCurrentProcess(), dump_workingsetsize, dump_workingsetsize)) 
  {
    err = GetLastError();
    printf("Error %u trying to expand working set.\n", err);
    return err;
  }

  buffer = VirtualAlloc(NULL, dump_buffersize, MEM_COMMIT, PAGE_READWRITE);

  if (buffer == NULL)
  {
    err = GetLastError();
    printf("Error %u trying to allocate buffer.\n", err);
    return err;
  }

  if (!VirtualLock(buffer, dump_buffersize))
  {
    err = GetLastError();
    printf("Error %u trying to lock buffer.\n", err);
    return err;
  }

  hinput = CreateFile
    (
    source_device_name,
    GENERIC_READ,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_NO_BUFFERING,
    NULL
    );

  if (hinput == INVALID_HANDLE_VALUE) {
    err = GetLastError();
    fprintf(stderr, "Error %u opening input device.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    hinput,
    FSCTL_LOCK_VOLUME,
    NULL,
    0,
    NULL,
    0,
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u locking input volume.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    hinput,
    IOCTL_DISK_GET_DRIVE_GEOMETRY,
    NULL,
    0,
    &source_diskgeometry,
    sizeof(source_diskgeometry),
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u getting device geometry.\n", err);
    return err;
  }

  switch (source_diskgeometry.MediaType)
  {
  case Unknown:
  case RemovableMedia:
  case FixedMedia:

    if (!DeviceIoControl
      (
      hinput,
      IOCTL_DISK_GET_LENGTH_INFO,
      NULL,
      0,
      &source_disklength,
      sizeof(source_disklength),
      &byte_count,
      NULL
      ))
    {
      err = GetLastError();
      fprintf(stderr, "Error %u getting input device length.\n", err);
      return err;
    }

    fprintf(stderr, "\nInput disk has %I64i bytes.\n", source_disklength.Length.QuadPart);
    break;

  default:

    source_disklength.Length.QuadPart = 
      source_diskgeometry.Cylinders.QuadPart *
      source_diskgeometry.TracksPerCylinder *
      source_diskgeometry.SectorsPerTrack *
      source_diskgeometry.BytesPerSector;

    fprintf(stderr, 
      "\n"
      "Input device appears to be a floppy disk.  WARNING: if this is not a\n"
      "floppy disk the calculated disk size is probably incorrect, resulting\n"
      "in an incomplete copy.\n"
      "\n"
      "Input disk has %I64i bytes.\n",
      source_disklength.Length.QuadPart);

    break;
  }

  houtput = CreateFile
    (
    target_device_name,
    GENERIC_READ | GENERIC_WRITE,
    0,
    NULL,
    OPEN_EXISTING,
    FILE_FLAG_NO_BUFFERING,
    NULL
    );

  if (houtput == INVALID_HANDLE_VALUE) {
    err = GetLastError();
    fprintf(stderr, "Error %u opening output device.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    houtput,
    FSCTL_LOCK_VOLUME,
    NULL,
    0,
    NULL,
    0,
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u locking output volume.\n", err);
    return err;
  }

  if (!DeviceIoControl
    (
    houtput,
    IOCTL_DISK_GET_DRIVE_GEOMETRY,
    NULL,
    0,
    &target_diskgeometry,
    sizeof(target_diskgeometry),
    &byte_count,
    NULL
    ))
  {
    err = GetLastError();
    fprintf(stderr, "Error %u getting output device geometry.\n", err);
    return err;
  }

  switch (target_diskgeometry.MediaType)
  {
  case Unknown:
  case RemovableMedia:
  case FixedMedia:

    if (!DeviceIoControl
      (
      houtput,
      IOCTL_DISK_GET_LENGTH_INFO,
      NULL,
      0,
      &target_disklength,
      sizeof(target_disklength),
      &byte_count,
      NULL
      ))
    {
      err = GetLastError();
      fprintf(stderr, "Error %u getting output device length.\n", err);
      return err;
    }

    fprintf(stderr, "Output disk has %I64i bytes.\n\n", target_disklength.Length.QuadPart);
    break;

  default:

    target_disklength.Length.QuadPart = 
      target_diskgeometry.Cylinders.QuadPart *
      target_diskgeometry.TracksPerCylinder *
      target_diskgeometry.SectorsPerTrack *
      target_diskgeometry.BytesPerSector;

    fprintf(stderr, 
      "\n"
      "Output device appears to be a floppy disk.  WARNING: if this is not a\n"
      "floppy disk the calculated output device size is probably incorrect,\n"
      "which might result in an incomplete copy.\n"
      "\n"
      "Output disk has %I64i bytes.\n"
      "\n", 
      target_disklength.Length.QuadPart);

    break;
  }

  if (source_disklength.Length.QuadPart == target_disklength.Length.QuadPart)
  {
    transfer_length.QuadPart = source_disklength.Length.QuadPart;
  }
  else if (source_disklength.Length.QuadPart < target_disklength.Length.QuadPart)
  {
    printf("Input shorter than output.  Part of the output disk will not be written to.\n\n");
    transfer_length.QuadPart = source_disklength.Length.QuadPart;
  }
  else
  {
    printf("Output shorter than input.  Copy will be truncated to output length.\n\n");
    transfer_length.QuadPart = target_disklength.Length.QuadPart;
  }

  offset.QuadPart = 0;
  overlapped.hEvent = 0;

  for (;;) 
  {
    overlapped.Offset = offset.LowPart;
    overlapped.OffsetHigh = offset.HighPart;

    if (transfer_length.QuadPart - offset.QuadPart < dump_buffersize) 
    {
      bytes_to_transfer = (DWORD)(transfer_length.QuadPart - offset.QuadPart);
      if (bytes_to_transfer == 0) break;
    }
    else
    {
      bytes_to_transfer = dump_buffersize;
    }

    if (!ReadFile(hinput, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      printf("Error %u initiating read from input file.\n", err);
      return err;
    }

    if (!GetOverlappedResult(hinput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u reading from input file.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      err = GetLastError();
      printf("Internal error - partial read.  Last error code %u.\n", err);
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      if (byte_count == 0) return ERROR_INVALID_FUNCTION;
      bytes_to_transfer = byte_count;
    }

    if (!WriteFile(houtput, buffer, bytes_to_transfer, NULL, &overlapped)) 
    {
      err = GetLastError();
      if (err != ERROR_IO_PENDING)
      {
        printf("Error %u initiating write to output disk.\n", err);
        return err;
      }
    }

    if (!GetOverlappedResult(houtput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      printf("Error %u writing to output disk.\n", err);
      return err;
    }

    if (byte_count != bytes_to_transfer)
    {
      printf("Internal error - partial write.\n");
      printf("bytes_to_transfer = %u; byte_count = %u.\n", bytes_to_transfer, byte_count);
      return ERROR_INVALID_FUNCTION;
    }

    offset.QuadPart += bytes_to_transfer;
  }

  if (transfer_length.QuadPart == source_disklength.Length.QuadPart)
  {
    overlapped.Offset = offset.LowPart;
    overlapped.OffsetHigh = offset.HighPart;

    if (!ReadFile(hinput, buffer, source_diskgeometry.BytesPerSector, NULL, &overlapped)) 
    {
      err = GetLastError();
      if (err == ERROR_HANDLE_EOF)
      {
        printf("Copy successfully completed.\n");      
        return 0;
      }
      printf("Error %u initiating read from input disk past end of file.\n", err);
      return err;
    }

    if (!GetOverlappedResult(hinput, &overlapped, &byte_count, TRUE)) 
    {
      err = GetLastError();
      if (err == ERROR_HANDLE_EOF)
      {
        printf("Copy successfully completed.\n");
        return 0;
      }
      printf("Error %u reading from input disk past end of file.\n", err);
      return err;
    }

    if (byte_count == 0)
    {
      printf("Copy successfully completed.\n"); 
      return 0;
    }

    printf("WARNING: the expected amount of data was successfully copied,\n"
           "but end of file not detected on input disk.  The copy might\n"
           "not be complete.");

    result = ERROR_MORE_DATA;
    return 0;
  }

  printf("Copy successfully completed.\n");
  return 0;
}

int wmain(int argc, wchar_t ** argv)
{
  if (argc < 4)
  {
    printf("Syntax: \n"
      "To save an image of a physical drive:\n"
      "diskimage /save \\\\.\\PhysicalDrive0 file.img\n"
      "diskimage /save \\\\.\\A: file.img\n"
      "To write from an image file to a physical drive:\n"
      "diskimage /write file.img \\\\.\\PhysicalDrive0\n"
      "diskimage /write file.img \\\\.\\A:\n"
      "To clone input drive 0 to output drive 1:\n"
      "diskimage /clone \\\\.\\PhysicalDrive0 \\\\.\\PhysicalDrive1\n"
      );
    return 1;
  }
  if (_wcsicmp(argv[1], L"/save") == 0)
  {
    return save(argv[2], argv[3]);
  }
  else if (_wcsicmp(argv[1], L"/write") == 0)
  {
    return write(argv[2], argv[3]);
  }
  else if (_wcsicmp(argv[1], L"/clone") == 0)
  {
    return clone(argv[2], argv[3]);
  }
  else
  {
    printf("Invalid argument.  Use /? for syntax help.\n");
    return 1;
  }
} 
```

# java - 如何在eclipse中从maven创建项目

> ID：15004987
> 
> 赞同：0
> 
> 时间：2013-02-21T14:39:31.627
> 
> 标签：java, maven, maven-plugin

我已经在 Eclipse 中安装了 m2e 插件。我正在尝试下载[MG4J](http://mg4j.dsi.unimi.it/)的源代码和依赖项并在我的项目中使用它。在右上角有一个 Maven 链接。但是，我不知道该怎么办！我下载了源代码并打开了一个文件并找到了 SCM 位置。我在“Checkout Maven Projects from SCM”项目类型中输入了它，但是当我点击完成时，什么也没发生。我怎样才能做到这一点？

## 更新：

我是 Java 世界的新手。我想做的是：我想在我的项目中使用 MG4J。我想我可能不得不更改它的代码。首先，我下载了源代码和依赖项存档并解压缩它们，将 .jar 文件添加到构建路径并编译所有内容。但它在某些情况下无法运行。我联系了MG4J的人。他们说我必须使用 Maven 来解决依赖关系。现在，我在这里拥有所有档案，1 天后，我仍然无法运行一个简单的程序。

简而言之，我想这样做：

项目1：MG4J（自动解析依赖等）

项目 2：MyProject（依赖 MG4J）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:48:04.000

MG4J 使用 Ant 和 Ivy（不是 Maven）作为构建工具和依赖管理器。因此，如果您希望能够修改源代码并构建它，您将不得不使用相同的工具。

1.  安装Apache Ant，记下安装目录（ANT_HOME）
2.  下载[Apache Ivy 二进制发行版](http://ant.apache.org/ivy/download.cgi)
3.  将 Apache Ivy 二进制分发包解压到一个文件夹，然后将 ivy-2.xxjar 复制到 ANT_HOME/lib
4.  下载[MG4J 的源代码](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22it.unimi.di%22)。它以 JAR 的形式出现，您需要将其解压缩到文件夹 (MG4J_SRC)。
5.  在 MG4J_SRC 文件夹中执行命令`ant ivy-setupjars jar`。如果构建成功，它将为 MG4J 创建一个二进制分发包，作为一个名为 mg4j-xxjar 的 JAR。

所以，现在你有一个本地构建的库版本，但你仍然不能（轻松地）在 Maven 中使用它。为了让您的 Mavenised 项目可以访问它，您应该将该库安装到本地 Maven 存储库中。

```
mvn install:install-file  -Dfile={MG4J_SRC}/mg4j-x.x.jar
                          -DgroupId=your.groupId
                          -DartifactId=your.artifactId
                          -Dversion=your.version
                          -Dpackaging=jar
                          -DlocalRepositoryPath=path-to-specific-local-repo 
```

*将 your.groupId、your.artifactId、your.version 和 localRepositoryPath 变量替换为对您的环境有意义的值*

然后，您可以将依赖项添加到其他项目的 POM：

```
<dependency>
  <groupId>your.groupId</groupId>
  <artifactId>your-artifactId</artifactId>
  <version>your.version</version>
</dependency> 
```

现在，作为最后一步，您希望在 Eclipse 中使用 MG4J 源代码成为可能（并且容易）。在您的 IDE 中，打开`File->New->Project`并选择“现有 Ant 构建文件中的 Java 项目”（在过滤器中键入 Ant 以缩小列表范围）。

![新蚂蚁项目](../Images/5e30d635c2c5f6103cd0d70d4e5ecab4.png)

单击向导并完成。现在您在 Eclipse 中有一个基于 Ant 的项目，您可以在其中轻松地修改源代码并执行构建。作为最后一步，您可以更改`deploy`MG4J build.xml 文件中的目标以将 MG4J 安装到本地存储库中（而不是将其推送到 Maven Central）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:47:32.870

尝试将源代码下载到您的工作区目录中，然后在 eclipse 中尝试 Import->Maven->"Existing Maven Project" 并指向项目的源代码目录。让我知道这个是否奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:44:00.277

您必须在项目 pom 文件中添加 MG4j 依赖项

```
<dependencies>
  [...]
  <dependency>
    <groupId>it.unimi.di</groupId>
    <artifactId>mg4j</artifactId>
    <version>5.2</version>
  </dependency>
</dependencies> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:50:16.983

`mvn eclipse:eclipse`将创建 eclipse 需要的垫片，然后创建项目，你应该是金色的。

# java - 获取二维数组的边缘值，同时防止越界

> ID：15004992
> 
> 赞同：1
> 
> 时间：2013-02-21T14:39:56.943
> 
> 标签：java, multidimensional-array

我这里有 4x4 字符数组，我需要获取位于数组边缘的字符的共同值...我尝试了与我的问题类似的其他问题的解决方案，但我仍然遇到相同的错误。，

这是我的代码..

```
//arr2[][]
//      arr2[3][0] = 'H';
//      arr2[3][1] = 'E';
//      arr2[3][2] = 'L';
//      arr2[3][3] = 'P';
//arr3[][]
//      arr3[1][3] = 'T';
//      arr3[2][3] = 'O';
//      arr3[3][3] = 'P';
//I specifically need the get the 'P' at [3][3]..
for(o = 0;o<count;o++){
        char letter = out.charAt(o);                        
        for(int m = 0; m < 4; m ++){    
            for(int n = 0; n < 4; n ++){
                if(Arrays.asList(arr3[m][n]).contains(letter)){ 
                    r = m;
                    c = n;
                }
            }
        }
        right  = arr2[r][c+1];
        left  = arr2[r][c-1];
        up  = arr2[r-1][c];
        down  = arr2[r+1][c];
        if(o==0){
                if(c==0){
                    if(r==0||r==3){
                        if(right!=null){
                            l = right;
                        }
                    }else{
                        if(right!=null){
                            l = right;
                        }else if(up!=null){
                            l = up;
                        }
                    }
                }else if(c==3){
                    if(r==0||r==3){
                        if(left!=null){
                            l = left;
                        }
                    }else{
                        if(left!=null){
                            l = left;
                        }else if(up!=null){
                            l = up;
                        }
                    }
                }else{
                    if(r==0||r==3){
                        if(left!=null){
                            l = left;
                        }else if(right!=null){
                            l = right;
                        }
                    }else{
                        if(left!=null){
                            l = left;
                        }else if(right!=null){
                            l = right;
                        }else if(up!=null){
                            l = up;
                        }
                    }
                }
            }
        }else if(o==(count-1)){
            if(vertical == 1){
                if(c==0){
                    if(r==0||r==3){
                        if(right!=null){
                            l = right;
                        }
                    }else{
                        if(right!=null){
                            l = right;
                        }else if(down!=null){
                            l = down;
                        }
                    }
                }else if(c==3){
                    if(r==0||r==3){
                        if(left!=null){
                            l = left;
                        }
                    }else{
                        if(left!=null){
                            l = left;
                        }else if(down!=null){
                            l = down;
                        }
                    }
                }else{
                    if(r==0||r==3){
                        if(left!=null){
                            l = left;
                        }else if(right!=null){
                            l = right;
                        }
                    }else{
                        if(left!=null){
                            l = left;
                        }else if(right!=null){
                            l = right;
                        }else if(down!=null){
                            l = down;
                        }
                    }
                }
            }
        }else{
            if(vertical == 1){
                if(c==0){
                    if(right!=null){
                        l = right;
                    }
                }else if(c==3){                                 
                    if(left!=null){
                        l = left;
                    }
                }else{
                    if(right!=null){
                        l = right;
                    }else if(left!=null){
                        l = left;
                    }
                }
            }
        }
        k = Character.toString(letter);
        letr = Character.toString(l); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:38:26.767

在您的代码中，

```
for(int m = 0; m < 4; m ++){    
    for(int n = 0; n < 4; n ++){
        if(Arrays.asList(arr3[m][n]).contains(letter)){ 
            r = m;
            c = n;
        }
    }
} 
```

在这里，您分配 r 和 c 可能是`0`或`3`在某些情况下，然后是下面的代码，

```
right  = arr2[r][c+1];
left  = arr2[r][c-1];
up  = arr2[r-1][c];
down  = arr2[r+1][c]; 
```

在上面的赋值中，你有`c + 1`, `r + 1`, ，如果前面的循环给 r 和 c 赋值为 0 或 3 `c - 1`，`r - 1`这肯定会越界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:28:02.957

感谢那些帮助我解决这个问题的人。我能够使用模数获得数组边缘的值。我能够防止超出范围... [https://stackoverflow.com/a /12743834/2078012](https://stackoverflow.com/a/12743834/2078012) 这个来自另一个问题的链接回答了我的问题..再次感谢你..:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:24:49.617

你能运行它并让我们知道它是否有帮助吗？

```
char[][] arr2 = ... // your array
char[][] arr3 = ... // your other array
// inspect all common indeces:
for (int i = 0; i < arr2.length && i < arr3.length; i++) {
    for (int j = 0; j < arr2[i].length && j < arr3[i].length; j++) {
        // print value, if value is the same: 
        if (arr2[i][j] == arr3[i][j]) {
            // here you know that two characters on the same index are the same.
            // you have the information about the character and the indeces:
            System.out.println("Found common value at index (i,j)->"
                    + "(" + i + "," + j + "), char '" + arr2[i][j] + "'");
        }
    }
} 
```

使用您评论示例中的数组，这将提供以下输出：

`Found common value at index (i,j)->(3,3), char 'P'`

这似乎是您正在寻找的。假设两个数组具有相同的维度，此解决方案会查看两个数组中的每个索引。如果一个数组大于另一个数组，则只查看公共索引。你提到了一些关于你的数组边缘的事情。我不清楚，如果您的意思是**仅边缘**或**包括边缘**。这个答案包括边缘。如果您只需要查看边缘，请随时在答案下方发表评论。

# javascript - JayData“未捕获 RangeError：超出最大调用堆栈大小”

> ID：15004995
> 
> 赞同：0
> 
> 时间：2013-02-21T14:40:01.807
> 
> 标签：javascript, wcf-data-services, svc, jaydata

有一个模型，我希望能够通过执行以下操作记录连接的设备类型：

```
var connections = DataLayer.context.ConnectionSet.filter(function(item) {
     return item.Id == id;
}, {id: 1});

connections.forEach(function(item) {
     console.log(item.Sender.Device.DeviceType);
}); 
```

`item.Sender.Device.DeviceType`导致此错误： `Uncaught RangeError: Maximum call stack size exceeded`

这是我的模型：

```
 $data.Entity.extend('SubliminalData.Connection', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'Sender': { 'type':'SubliminalData.DevicePort','required':true },
    'Receiver': { 'type':'SubliminalData.DevicePort','required':true }
  });

  $data.Entity.extend('SubliminalData.Device', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'DeviceType': { 'type':'Edm.String','nullable':false,'required':true }
  });

  $data.Entity.extend('SubliminalData.Port', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true }
  });

  $data.Entity.extend('SubliminalData.DevicePort', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'Device': { 'type':'SubliminalData.Device','required':true },
    'Port': { 'type':'SubliminalData.Port','required':true }
  }); 
```

为什么这给了我最大的呼叫异常，我该如何解决？我找不到它。

- 更新 -

我最近一直在努力让它工作，我改变了我的模型，以便我有向后导航属性。现在更有意义了，但现在我遇到了另一个问题。

新模式：

```
$data.Entity.extend('SubliminalData.Connection', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'Sender': { 'type':'SubliminalData.DevicePort','required':true,'inverseProperty':'SendingConnections' },
    'Receiver': { 'type':'SubliminalData.DevicePort','required':true,'inverseProperty':'ReceivingConnections' }
  });

  $data.Entity.extend('SubliminalData.Device', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'DeviceType': { 'type':'Edm.String','nullable':false,'required':true },
    'DevicePorts': { 'type':'Array','elementType':'SubliminalData.DevicePort','inverseProperty':'Device' }
  });

  $data.Entity.extend('SubliminalData.Port', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'PortType': { 'type':'Edm.String','nullable':false,'required':true },
    'DevicePorts': { 'type':'Array','elementType':'SubliminalData.DevicePort','inverseProperty':'Port' }
  });

  $data.Entity.extend('SubliminalData.DevicePort', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'Device': { 'type':'SubliminalData.Device','required':true,'inverseProperty':'DevicePorts' },
    'Port': { 'type':'SubliminalData.Port','required':true,'inverseProperty':'DevicePorts' },
    'SendingConnections': { 'type':'Array','elementType':'SubliminalData.Connection','inverseProperty':'Sender' },
    'ReceivingConnections': { 'type':'Array','elementType':'SubliminalData.Connection','inverseProperty':'Receiver' }
  });

  $data.EntityContext.extend('DataLayer.SubliminalDataContainer', {
    'ConnectionSet': { type: $data.EntitySet, elementType: SubliminalData.Connection },
    'DeviceSet': { type: $data.EntitySet, elementType: SubliminalData.Device },
    'PortSet': { type: $data.EntitySet, elementType: SubliminalData.Port },
    'DevicePortSet': { type: $data.EntitySet, elementType: SubliminalData.DevicePort }
  });

  $data.generatedContexts = $data.generatedContexts || [];
  $data.generatedContexts.push(DataLayer.SubliminalDataContainer);

  /*Context Instance*/
  DataLayer.context = new DataLayer.SubliminalDataContainer( { name:'oData', oDataServiceHost: 'http://localhost:57703/WcfDataService1.svc' }); 
```

我的新问题是这样的：

```
var connections = DataLayer.context.ConnectionSet.filter(function(item) {
        return item.Id == id;
    }, {id: 1});

connections.forEach(function(item) {
    l(item); //works great!
    l(item.Sender); //undefined :[

}); 
```

为什么我的发件人未定义？我以为我了解 JayData，但我相信我不了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:50:04.507

您的代码看起来不错，我们认为您从代码的其他部分收到此错误，很可能来自递归函数调用。你能用你的代码创建一个 jsfiddle 以便我们测试它吗？