# StackOverflow 问答 12804000-12804999

# git - 带有构建步骤的 git 部署

> ID：12804000
> 
> 赞同：2
> 
> 时间：2012-10-09T16:03:32.303
> 
> 标签：git, deployment

我将 git 用于我的源代码，并想从命令行引入一些自动部署。

我的文件夹结构是

```
/app
/build
/tests 
```

我有一个构建步骤，我运行它填充构建文件夹。

理想情况下，我*只想*部署构建文件夹，并希望它位于部署分支上（例如 test/uat/live）。有没有办法可以构建我的存储库来实现这一点，或者我应该使用子模块进行部署跟踪？

即一个工作流程

```
 git clone ...
 do work on master (or branch and merge to master)
 git commit
 make 
 git deploy live 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:10:45.057

首先，您不会对构建进行版本化（您只需在需要时从特定版本的源代码按需重建它）

其次，“ `live`”不必是一个分支，甚至是一个 git repo：它应该引用一个*环境*（另一个目录，或者您要在其上部署应用程序的远程服务器）。
所以' `git deploy`'不应该存在：' `deploy`'（即您的自定义部署脚本）应该能够获取构建中的任何内容并将其部署在正确的环境中。

也就是说，如果你想保持这样的提交已经被构建并部署在（例如）上的事实，那么你可以在你的部署脚本中添加一个 git 命令：在[`git notes`](http://git-scm.com/docs/git-notes)你的提交中添加一个（你正在构建的）。

# php - Symfony 2 表单集合字段没有实体分配

> ID：12804001
> 
> 赞同：0
> 
> 时间：2012-10-09T16:03:37.027
> 
> 标签：php, symfony, doctrine-orm

我有以下模型：一个“条目”有 n 个“标签”

我使用动态 (javascript) 表单来编辑条目中的标签。我按照[Symfony Cookbook](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)来实现这一点。

但是当我删除标签并同时添加新标签时我遇到了问题。例如，标签会被删除而不会被删除。

我知道问题出在哪里：Symfony 将提交的字段按其在表单中的位置分配给实体。由于在表单中每个标签只有其实际值的字段（没有 id），因此提交字段和实体之间没有关系。

那么我该如何处理呢？我的第一个想法是为每个包含它的 id 的标签添加一个隐藏字段。但这是在 Symfony 中执行此操作的正确方法吗？如果是，我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:32:28.230

我的 javascript 中有一个错误，有时会导致新字段出现重复名称。

# android - 类似 Google+ 应用中的 ScrollView

> ID：12804002
> 
> 赞同：2
> 
> 时间：2012-10-09T16:03:37.790
> 
> 标签：android, scrollview

> **可能重复：**
> [Google 如何在其 G+ 应用中实现动画帖子？](https://stackoverflow.com/questions/12410187/how-does-google-achieve-animated-posts-in-their-g-app)

当您打开带有图像的帖子时，我想制作与 Google plus 应用程序中完全相同的 ScrollView。这意味着 ScrollView 从屏幕中间开始，当用户向上拖动它时，它会动画滚动到屏幕顶部，当用户向下拖动它时，它会跳转到屏幕中间的起始位置。

任何想法如何实现这一目标？到目前为止，我已经想出了一个滚动视图，它在顶部有一个透明视图，内容在下面，但我还没有弄清楚如何让它停靠在屏幕顶部或起始位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:36:12.307

在我看来，它是`ScrollView`某种 a 的内部[`SlidingDrawer`](http://developer.android.com/reference/android/widget/SlidingDrawer.html)。

编辑：只是为了改进我自己的答案，我运行`HierarchyViewer`了你要求的活动。这是由 HierarchyViewer 生成的[视图树 PNG 文件](http://lh.rs/A92wShX4Cdkh)和[带有所有拆分图层的 Photoshop 文件。](http://lh.rs/eO6c5u1vPaKX)

快速分析：为了完成他们的工作，他们使用`RelativeLayout`填充整个可用空间的父级 (ID list_parent) 并包含一个自定义`ExpandableScrollView`(ID list_expander)，该自定义 (ID list_expander) 可能会像想要的那样增加其高度和扩展`SlidingDrawer`（加上动画和其他东西）。这又包含一个`StreamOneUpListView`（ID 列表），它本身包含帖子信息`StreamOneUpActivityView`、a`StreamOneUpCommentCountView`和各种评论`StreamOneUpCommentView`。值得注意的是，如果`StreamOneUpListView`不包含注释，或者不足以覆盖整个可用高度，它将有一个空白`StreamOneUpLeftoverView`作为空白并填充它。

所以......是的，实现这种东西可能有点棘手:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:12:28.580

我想这可能会对你有所帮助。它来自 Google Android 开发者倡导者之一 Roman Nurik。

[https://plus.google.com/u/0/113735310430199015092/posts/1Sb549FvpJt](https://plus.google.com/u/0/113735310430199015092/posts/1Sb549FvpJt)

# visual-studio-2010 - 使用 Visual Studio 的模拟器应用程序

> ID：12804016
> 
> 赞同：0
> 
> 时间：2012-10-09T16:04:35.337
> 
> 标签：visual-studio-2010, silverlight-4.0, visual-studio-lightswitch

我正在为货运目的开发应用程序。我想在应用程序中添加一个货物集装箱装载模拟器来优化集装箱装载，因此用户可以像 3D 益智游戏一样手动将纸箱装载到集装箱中。纸箱尺寸和容器尺寸来自数据库表。

用于构建这种模拟器的合适软件或附加组件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:08:23.123

我看到这个问题有一个*visual-studio-lightswitch*标签，所以我会回复那个方面。

您需要创建一个*自定义 Silverlight 控件*，以便按照您的描述以图形方式显示信息。没有 LS 内置控件可以做到这一点。因此，您需要一些 Silverlight 的工作知识（LS 目前将其用作其演示技术 - HTML 5 支持目前由 LS 团队开发）。

至于应用程序的其余部分，“可以在 LS 中完成”的答案是“可能”。LS**非常**适合“表单优于数据”类型的应用程序。但它也可以扩展（使用我前面提到的自定义 Silverlight 控件）。

# c++ - C - 强制转换问题中的指针和继承？

> ID：12804018
> 
> 赞同：0
> 
> 时间：2012-10-09T16:04:47.497
> 
> 标签：c++, inheritance, casting

我正在做一个 opengl 项目，但我的一些课程有问题：

主要有3个类：

* * *

```
class scene{
public:
   scene();
   object** elements;
   unsigned int nb_elements;

   void add_object(object* _element){
       objet** p_elements=elements;

       while(p_elements-elements!=nb_elements)
           p_elements++;

      *p_elements=_element;                    //here is the bug
      nb_elements++;
    }

}
[...]
}; 
```

* * *

```
class object{
public:
    object();
    [...]
}; 
```

* * *

```
class point : public object{
point();
point(double _x, double _y, double _z,double _r);
[...]
} 
```

* * *

我在初始化 Opengl 后初始化场景，在同一个函数中：

```
void GLWidget::initializeGL(){

   [OpenGL initialization]

   _scene=new scene;
   point* s1=new point(0.0,0.0,3.0,1.0);
   _scene->add_object(s1);

} 
```

该错误在 scene::add_object 函数中。我不明白为什么它不起作用，因为 *p_elements 和 _element 都是指针。我猜这是演员阵容问题，但我不知道如何解决。我尝试了动态转换：错误仍然存​​在。

感谢您的帮助，

卡茅斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:07:44.763

`objet** p_elements=elements;`设置`p_elements`为未初始化的内存。所以`p_elements-elements!=nb_elements`，`p_elements++;`并`*p_elements=_element;`调用未定义的行为。我不建议您初始化内存，而只是**使用`std::vector`**智能指针代替。

双指针建议你来自 C 背景，但如果你想做 C++ 开发，你必须学习 C++ 习语。不要坚持用 C++ 编写 C 代码。

# iphone - iOS 应用程序中带有 HTML 解析的 Xpath 语法

> ID：12804019
> 
> 赞同：1
> 
> 时间：2012-10-09T16:04:58.557
> 
> 标签：iphone, ios, xpath, syntax

我在我的 iOS 应用程序中使用 Xpath，我想从 Wikipedia 解析 HTML 页面并获取一些信息。我的 xpathQueryString 有问题，无法使用这种 HTML 代码捕获“(a) (/a)”属性：

```
<td>
    <span style="display:none" class="sortkey">Eglise Saint-Roch !</span>
    <a href="/wiki/%C3%89glise_Saint-Roch_(Paris)" title="Église Saint-Roch (Paris)">Église Saint-Roch</a>
</td> 
```

这是我的 NSString 查询：

```
@"//table[@class]//tr//td[1] | //table[@class]//tr//td[1]/a | //table[@class]//tr//td[1]/span 
```

span 节点正在解析，但不是 a 节点。

"/a" 应该从 "td" 中捕获第一个 (a)(/a) 对吗？根据[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)：

```
//book/title | //book/price Selects all the title AND price elements of all book elements 
```

我需要你的帮助，因为我不明白我做错了什么。

谢谢 ！

# java - ckeditor插入额外的

> ID：12804024
> 
> 赞同：2
> 
> 时间：2012-10-09T16:05:15.883
> 
> 标签：java, ckeditor

我需要帮助。我正在使用 CKEditor 进行富文本编辑器。我在jsp中设置如下配置。

```
cKEditorConfig = new CKEditorConfig();
cKEditorConfig.addConfigValue("autoParagraph", false);
cKEditorConfig.addConfigValue("basicEntities",false); 
```

我收到一个问题，即编辑器在提交页面后在 html 中放置了额外的 <br/>。有如下选项可以做到这一点： // 在

打开标签。breakAfterOpen ：真，

1.  我怎样才能做到这一点是jsp中的配置设置
2.  如何使用此 java 设置配置将 enterMode 从 <p> 更改为 <br>

谢谢你的帮助。

# javascript - 带有音频标签的 Safari 无法正常工作

> ID：12804028
> 
> 赞同：16
> 
> 时间：2012-10-09T16:05:28.090
> 
> 标签：javascript, jquery, safari, html5-audio

我正在使用以下简单代码处理 HTML5 音频标签：

HTML

```
<audio id="audioFrenata">
<source src="sounds/frenata.ogg">
<source src="sounds/frenata.mp3"></audio> 
```

JS

```
$('#audioFrenata').on('ended', function() {
        manageImageObjectsLevel();
    }).get(0).play(); 
```

使用 Chrome 可以按预期工作，使用 Windows 上的 Safari 5.1.7 和 iPad 3 上的 Safari，我收到以下信息：

```
'undefined' is not a function (evaluating '$('#audioFrenata').on('ended', function() {
manageImageObjectsLevel();
}).get(0).play()') 
```

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T16:42:35.657

我遇到了完全相同的问题，我发现这是由于 Safari 中的以下限制：

> 在 iOS 上的 Safari（适用于所有设备，包括 iPad）中，用户***可能***在蜂窝网络上并按数据单位收费，***预加载和自动播放被禁用***。***在用户启动数据之前不会加载数据。***这意味着 JavaScript play() 和 load() 方法在用户开始播放之前也是不活动的，除非用户操作触发了 play() 或 load() 方法。换句话说，用户启动的播放按钮有效，但 onLoad="play()" 事件无效。

参考：http: [//developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)

解决它的一种方法是默认静音，当用户“取消静音”时，您可以创建 HTML5 音频对象的实例并将其存储在“静态”/“全局”变量中，并进一步使用它回放。

- 更新

这是描述该问题以及如何处理它的博客文章：http: [//blog.gopherwoodstudios.com/2012/07/enabling-html5-audio-playback-on-ios.html](http://blog.gopherwoodstudios.com/2012/07/enabling-html5-audio-playback-on-ios.html)

这是一个类似的 stackoverflow 问题，讨论的是同一件事：[Autoplay audio files on an iPad with HTML5](https://stackoverflow.com/questions/3009888/autoplay-audio-files-on-an-ipad-with-html5)

下面是我编写的一个 JavaScript“模块”，用于处理 HTML5 中的音频播放：

```
NS.modules.html5.audio = (function () {

    var _snd = false;

    function playAudio(src) {
        if (!_snd)
            _snd = new Audio();
        else
            $(_snd).empty();

        for (var i = 0; i < src.length; i++) {
            var source = document.createElement('source');
            source.type = src[i].type;
            source.src = src[i].src;
            _snd.appendChild(source);
        }

        _snd.load(); // Needed on safari / idevice
        _snd.play();
    };

    var playAudio = function () {
        var src = [
            { src: "/path/to/audio.wav", type: "audio/vnd.wave" },
            { src: "/path/to/audio.ogg", type: "application/ogg; codecs=vorbis" },
            { src: "/path/to/audio.mp3", type: "audio/mpeg" }
        ];
        playAudio(src);
    };

    return {
        playAudio: playAudio,
        // more play functions here
    };
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-16T15:00:10.717

在我的情况下，问题是由于 HTML 格式引起的，我切换到以下格式并且它有效。希望这可以帮助某人：

```
<audio id="audioFrenata" src="sounds/frenata.ogg"></audio> 
```

请注意上述布局中缺少`<source>`元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-25T06:13:59.417

我有同样的问题，我通过把`type="audio/mpeg"`before解决了`type="audio/ogg"`。

```
<audio controls>
  <source src="your-sound-url" type="audio/mpeg"></source>
  <source src="your-sound-url" type="audio/ogg"></source>
</audio> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:12:59.087

检查您提到的浏览器是否支持您想要的 HTML5 功能。你可以[在这里查看](http://html5test.com/compare/browser/index.html)。希望这会帮助你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-09T16:15:53.610

身份证好像错了。

```
$('#audioLevel').on('ended', function() {
     manageImageObjectsLevel();
}).get(0).play(); 
```

应该是

```
$('#audioFrenata').on('ended', function() {
     manageImageObjectsLevel();
}).get(0).play(); 
```

使用下面的 HTML

```
<audio id="audioFrenata"  controls="controls">
    <source src="sounds/frenata.ogg" type="audio/ogg">
    <source src="sounds/frenata.mp3" type="audio/mpeg">
</audio>​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/F7a4C/)**

# opencv - 在opencv中检测对象的多个实例？

> ID：12804035
> 
> 赞同：1
> 
> 时间：2012-10-09T16:06:01.627
> 
> 标签：opencv, object-detection

有没有人建议在图像的不同位置检测相同的对象？我已经测试了示例/教程 SURF_Homography，它只能检测对象的一次出现。我想在图像的不同位置多次检测相同的对象。

# java - 创建 Java（桌面版）抽认卡程序

> ID：12804038
> 
> 赞同：1
> 
> 时间：2012-10-09T16:06:06.510
> 
> 标签：java

我正在设计我的第一个真正的桌面 Java 程序，它将是一个 FlashCards 程序，稍后将转移到 Android。我的问题是 - 保存用户的抽认卡并将它们保存在文件中的最佳选择是什么，这样当用户再次打开程序时，他的抽认卡将一直存在，直到（被用户）删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:17:05.023

好吧，根据我的观点，您有两种选择。在 Java 中，要么存储在文件系统中，要么使用数据库。在 Android 中，我认为 SQLite 是您存储数据的唯一选择。我知道 android 也可以存储首选项，但我想这不适合你的情况。

SQLite 是一个非常好的选择，因为您可以在 Java（需要一些配置）和 Android（已经存在）中使用它。

# delphi - “不兼容的类型：方法指针和常规过程”

> ID：12804039
> 
> 赞同：4
> 
> 时间：2012-10-09T16:06:09.877
> 
> 标签：delphi, function, pointers, compiler-errors

我有一个大问题，因为我不明白指针在 delphi 中是如何工作的

首先，我从 dll 中获取函数声明。

功能：

```
type
  TMICRCallback   = function: Integer; stdcall; 
```

然后我在我的代码中声明一个函数。

```
function CBMICRRead : Integer;stdcall; 
```

该功能非常简单（这是一个示例）

```
function TCustomizedTenderPlugin.CBMICRRead : Integer; stdcall;
var
  SUCCESS:integer;
begin
   SUCCESS:=1;
   Result:= SUCCESS;
end; 
```

我声明一个这样的变量

```
Respuesta : TMICRCallback; 
```

当我尝试将此变量分配给我的函数时，问题发生了:(

```
Respuesta      := CBMICRRead; 
```

这是我第一次在 delphi 中使用指针，所以这可能是一个愚蠢的问题，但请帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:17:16.287

`TCustomizedTenderPlugin.CBMICRRead`是一个*实例方法*。这意味着为了调用它，您必须有一个实例来调用它。

另一方面，`TMICRCallback`是*函数指针*。它与普通函数而不是实例方法兼容。

它们根本不兼容。为了与您`TCustomizedTenderPlugin.CBMICRRead`兼容，`TMICRCallback`您需要将其定义为：

```
TMICRCallback = function: Integer of object; stdcall; 
```

`of object`表示此类型与实例方法兼容。类型变量`TMICRCallback`（如本答案中所定义）同时包含函数指针和实例指针。它有时被称为双指针函数类型。

在继续之前，我建议您仔细阅读[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Procedural_Types)。

* * *

我注意到您正在`stdcall`为这些函数指针使用调用约定。这通常表明您正在尝试与外部模块进行互操作。这不是实例方法可靠的东西。我的意思是你不能用`of object`Delphi 以外的语言实现实例方法。如果此代码注定要在互操作设置中使用，那么您应该避免使用`of object`.

对于互操作设置，您通常会将实例指针作为单独的参数包含在内。在这种情况下，Delphi 声明将如下所示：

```
type
  TMICRCallback = function(Data: Pointer): Integer; stdcall; 
```

然后，您将实现这样的功能

```
type
  TPlugin = class
    function CBMICRRead: Integer;
  end;

.....

function PluginCBMICRReadCallback(Data: Instance): Integer; stdcall;
begin
  Result := TPlugin(Data).CBMICRRead;
end;

function TPlugin.CBMICRRead: Integer;
begin
  Result := ....
end; 
```

最后，需要传递回调的外部模块中的函数`PluginCBMICRReadCallback`和实例的实例指针`TPlugin`。也许有点像这样：

```
procedure RegisterCallback(Callback: TMICRCallback; Data: Pointer); stdcall; 
```

你会这样称呼它：

```
var
  Plugin: TPlugin;
....
Plugin := ...;//get this instance from somewhere
RegisterCallback(PluginCBMICRReadCallback, Plugin); 
```

* * *

在[相关问题](https://stackoverflow.com/questions/12791258/delphi-working-with-pointer-functions)中查看了 C++ 代码后，界面的 C++ 端似乎如下所示：

```
int WINAPI BiMICRSetReadBackFunction(int    nHandle, 
                                     int    (CALLBACK *pMicrCB)(void),
                                     LPBYTE pReadBuffSize,   
                                     LPBYTE readCharBuff,    
                                     LPBYTE pStatus,         
                                     LPBYTE pDetail); 
```

这个回调甚至不承认数据指针，所以你根本不能使用实例方法。你是如何为多个实例实现回调的，这超出了我的理解！无论如何，你可以像这样在 Delphi 中声明这个函数：

```
type
  TMICRCallback = function: Integer; stdcall;

function BiMICRSetReadBackFunction(
  nHandle: Integer;
  MicrCB: TMICRCallback;
  pReadBuffSize: PByte;
  readCharBuff: PByte;
  pStatus: PByte;
  pDetail: PByte
): Integer; stdcall; external dllname; 
```

要调用它，你需要这个：

```
function MICRCallback: Integer; stdcall;//not the method of a class
begin
  Result := ....
end;
.....
retval := BiMICRSetReadBackFunction(..., MICRCallback, ....); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:13:10.147

显然`CBMICRRead`被定义为对象方法（即 的方法`TCustomizedTenderPlugin`），因此不是“独立”函数。正因为如此，你需要做

```
type
  TMICRCallback   = function: Integer of object; stdcall; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:22:00.607

如果 DLL 中的函数声明不是您编写的对象方法，您可以通过将该函数声明为全局函数而不是对象的方法来解决此问题，或者您可以将其声明为目的。

```
class function CBMICRRead: Integer; static; stdcall; 
```

# cocos2d-iphone - 在 HUDLayer 和 GameLayer 中检测触摸

> ID：12804041
> 
> 赞同：0
> 
> 时间：2012-10-09T16:06:34.937
> 
> 标签：cocos2d-iphone

我还需要在 HUDLayer 和 GameLayer 中进行触摸检测。
因为当 player.position > 480 时，用户无法与 GameLayer 正常交互。
触摸位置与 HUDLayer 相关，这很好，但我需要在两个图层上都进行触摸。我在两层都尝试了启用触摸的 ccTouchesBegan 方法，但 Log 仍然显示相同的触摸位置两次。我怎样才能做到这一点？

游戏层.mm

```
- (void) ccTouchesBegan(NSSet *)touches withEvent:(UIEvent *)event
{
   for(UITouch *touch in touches ) {
      CGPoint location = [touch locationInView: [touch view]];
      location = [CCDirector sharedDirector] convertToGL: location];
      NSLog(@"Touch X: %f Y: %f", location.x, location.y);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:13:33.720

如果我理解正确你想做什么，你只需要将触摸位置转换为节点空间

```
[layer convertToNodeSpace: glTouchLocation]; 
```

# php - desire2learn PHP 中的简单 PUT 更新

> ID：12804043
> 
> 赞同：0
> 
> 时间：2012-10-09T16:06:38.680
> 
> 标签：php, desire2learn

我正在尝试更新 D2L Valence 中的个人资料信息。我已成功使用 GET 请求下载信息。但我不确定如何格式化我的请求以完成简单的更新。

在这种情况下，我下载了配置文件 json 块的副本并更改了昵称字段。不要介意第一行调用的 d2l 类。它获取 json 配置文件块，然后我更改它，如果我打印出来，我得到

```
{"Nickname":"Johnny","Birthday":null,"HomeTown":"","Email":"","HomePage":"","HomePhone":null,"BusinessPhone":null,"MobilePhone":null,"FaxNumber":null,"Address1":null,"Address2":null,"City":null,"Province":null,"PostalCode":null,"Country":null,"Company":null,"JobTitle":"","HighSchool":null,"University":null,"Hobbies":"","FavMusic":"","FavTVShows":"","FavMovies":"","FavBooks":"","FavQuotations":"","FavWebSites":"","FutureGoals":"","FavMemory":"","SocialMediaUrls":[{"Name":"Facebook","Url":""},{"Name":"Twitter","Url":""},{"Name":"Google+","Url":""},{"Name":"LinkedIn","Url":""}]} 
```

这是我的 PHP

```
$output = d2l::get_user_profile($usercontext,"real_profile_id",true);
$output = str_replace("\"Nickname\":\"\"", "\"Nickname\":\"Johnny\"",$output);  
$random_hash = md5(date('r', time()));          

$url = $usercontext->createAuthenticatedUri("/d2l/api/lp/1.1/profile/real_profile_id","PUT");
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url); 
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("HTTP/1.1", "Content-Type: multipart/form-data; boundary=".$random_hash));
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$output);       
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, '/var/www/cacert.pem');
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);

$response = curl_exec($ch);
print_r(curl_getinfo($ch)) 
```

从这段代码中，我得到了这个响应

```
Array
(
[url] => https://myurl.edu:443/d2l/api/lp/1.1/profile/myProfile?x_a=mykey&x_c=mykey&x_d=mykey&x_t=1349798248
[content_type] => text/html; charset=utf-8
[http_code] => 403
[header_size] => 218
[request_size] => 941
[filetime] => -1
[ssl_verify_result] => 20
[redirect_count] => 0
[total_time] => 0.171832
[namelookup_time] => 1.9E-5
[connect_time] => 0.033028
[pretransfer_time] => 0.105724
[size_upload] => 582
[size_download] => 13
[speed_download] => 75
[speed_upload] => 3387
[download_content_length] => 13
[upload_content_length] => 0
[starttransfer_time] => 0.171811
[redirect_time] => 0
[request_header] => POST /d2l/api/lp/1.1/profile/myProfile?x_a=mykey&x_c=mykey&x_d=mykey&x_t=1349798248 HTTP/1.1
Host: myurl.edu
Accept: */*
Content-Type: multipart/form-data; boundary=95b842a110e529794822be6870f2585c
Content-Length: 582

) 
```

我可能错过了一些明显的东西。请建议或指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:03:24.440

您已在后续评论中回答了您自己的问题，但[myProfile 更新路由](http://docs.valence.desire2learn.com/res/user.html#put--d2l-api-lp-%28D2LVERSION-version%29-profile-myProfile)使用的是 HTTP PUT 而不是 POST：大多数 Valence API 通常都是这种情况（创建路由使用 POST，更新路由使用 PUT）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:30:05.353

这是一个用于进行更新的 PHP 代码块，供任何需要它的人使用。

$data 是一个字符串，json 的文本

$opContext 是使用 $authContext->createUserContext() 创建的有效用户上下文。

$url 是您要发送到的 REST 路径

我确实意识到存在问题

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

但我暂时忍受它。

这是代码

```
$putData = fopen('php://temp/maxmemory:256000', 'w');  
if (!$putData) {  
    die('could not open temp memory data');  
}  
fwrite($putData, $data);  
fseek($putData, 0);
$url = $opContext->createAuthenticatedUri($url,"PUT");
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url); 
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("HTTP/1.1", "Content-Type: application/json"));
curl_setopt($ch, CURLOPT_PUT,true);
curl_setopt($ch, CURLOPT_INFILE,$putData);
curl_setopt($ch, CURLOPT_INFILESIZE, strlen($data));        
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
$response = curl_exec($ch);             
fclose($putData);
return $response; 
```

# c# - 有和没有画布的模糊线条。没有办法实现任何方式的像素捕捉？

> ID：12804044
> 
> 赞同：4
> 
> 时间：2012-10-09T16:06:40.267
> 
> 标签：c#, .net, silverlight

跟随问题。我只是尝试用 C# 画一些小东西。我想用画布来做到这一点。但即使没有 Canvas，线条也会模糊。在一个简单的演示项目中已经失败的最简单的事情是以下代码：

```
<UserControl x:Class="Drawing.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <Line Y1="1" Y2="300" StrokeThickness="1" 
              Stroke="Black" Margin="10 0 0 0"/>
    </Grid>
</UserControl> 
```

这条线只是显示模糊。我已经尝试了很多，但我无法弄清楚如何实现清晰和一像素宽的线条。

我尝试了以下事情：

*   `UseLayoutRounding="True"`
*   我尝试了像素鲷鱼类 -[在这里](http://blogs.msdn.com/b/devdave/archive/2008/05/26/pixel-snapping-the-snapper-element.aspx)提供- 这对我也不起作用。这里是[Xavier Poinas](https://stackoverflow.com/users/77004/xavier-poinas) ( [thread](https://stackoverflow.com/questions/6182320/silverlight-path-is-blurry-how-to-snap-to-pixels) ) 的答案，他显然有同样的问题，并且这个自定义像素捕捉器也失败了：*“坐标我似乎理解这个类通过将项目的边界捕捉到圆形像素来工作，但是坐标我使用的已经是整数，在路径的情况下，捕捉边界可能并不意味着内容落在圆形像素上。”* )

如果找到解决方案，那将是很好的，它允许我捕捉由 Canvas 保存的线条。

这样做的原因是：出于技术原因，我们需要一个无边框 OOB 应用程序，它实现了自定义边框（调整大小）以及一个自定义应用程序栏，其中包含最小化、最大化和关闭项。我只是尝试通过线条等手动绘制这些图标：

![条形图标](../Images/103dae7324d8dd6c45fce608be3dec4f.png)

有没有更简单的方法？我只是不想使用图像资源。谢谢！

任何帮助将**不胜**感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:03:05.267

坐标是像素之间的点。

您看到的模糊线是渲染引擎试图在 1px 线将覆盖的两个像素之间平均分布的结果，在这种情况下。

这允许引擎从 0,0 工作到 maxX,maxY 并且仍然使用部分像素渲染。

将 0.5 添加到您的坐标中，它会显得像大头钉一样锋利。

或者翻译成0.5,0.5

# java - C/C++ 和 Java 中的字符 \n 是否被认为是 LF 或平台相关的？

> ID：12804047
> 
> 赞同：1
> 
> 时间：2012-10-09T16:07:11.923
> 
> 标签：java, c++, c, newline

这个问题是关于 C、C++ 和 Java 中的 '\n' 的。对于每种语言，'\n' 字符是依赖于平台的（Unix 上的 LF CRLF 在 Windows 上）还是只是 LF 而与平台无关

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:09:32.780

在 C 和 C++`\n`中**，**换行符是应用程序内部字符串中使用的换行符。当以文本模式（即非二进制模式）打开时，IO 流将转换为特定于平台的换行符序列。

请注意，这对于标准库是正确的，但可能不适用于特定的 API - 例如，我记得某些 Windows 控件需要显式 CRLF 才能正常工作。

至于Java，我可能是错的（我几乎从未使用过Java），但从我从文档中可以看出，流不执行任何翻译；相反，您可以使用[`System.lineSeparator()`](http://download.java.net/jdk8/docs/api/java/lang/System.html#lineSeparator%28%29)来获取当前平台的行分隔符。使用此信息，`BufferedWriter`提供了一种方便的`newLine`方法来将换行符输出到底层流。

# java - “警告此类型名称不匹配”部署到 JBoss 时，尽管在 Tomcat 上部署正常

> ID：12804049
> 
> 赞同：1
> 
> 时间：2012-10-09T16:07:23.403
> 
> 标签：java, spring, jboss, aop

我目前正在更新一个 JAX RS 应用程序（使用 CXF 和 Spring）以在 JBoss 而不是 tomcat 上运行。

它可以在 Tomcat 上部署，但是当我尝试部署到 JBoss 时，我从 aspectj 收到此错误“警告此类型名称不匹配”。它声称不存在的类被用于切入点，在 spring xml 配置中声明。类本身在 WAR 中被编译。

我猜这是一个类加载器问题，但对 JBoss 了解不够，无法弄清楚。

有人可以建议为什么会发生这种情况以及解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:50:24.823

这是一个类加载问题，但不是我的问题。正在编织的类之一是数据源。我在 WAR 的 Jboss 版本中使用了 Jboss 数据源，所以当在 Jboss 上时数据源是 org.jboss.jca.adapters.jdbc.WrapperDataSource 而在 tomcat 上是 org.apache.commons.dbcp.BasicDataSource。

结果，在编织过程中，aspectJ 未能加载 jboss 类。添加

```
<dependencies>
  <module name="org.jboss.ironjacamar.jdbcadapters"/>
</dependencies> 
```

解决了这个问题。Spring论坛上有一篇文章提到了这一点：http: [//forum.springsource.org/showthread.php?113581- Spring-JBoss7-aop-problems-to-get-datasource](http://forum.springsource.org/showthread.php?113581-Spring-JBoss7-aop-problems-to-get-datasource)

# html - 如何将div宽度设置为其中表格的宽度？

> ID：12804051
> 
> 赞同：3
> 
> 时间：2012-10-09T16:07:32.377
> 
> 标签：html, css, width, css-tables

我有一个`div`，其中包含一个`table`. 一切都按我的意愿工作，除了我不知道如何设置`width`of`div`以便它随着`width`内部的`table`增长而增长。我怎样才能做到这一点？谢谢。

这是的CSS代码`div`：

```
#events-table-wrapper {
    margin-left: auto;
    margin-right: auto;
    width: 500px;
    margin-top: 100px;
    border: 1px solid #CCC;
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
} 
```

设置`width`为`auto`没有帮助。顺便说一句，我没有更改 CSS 表中的任何内容。

编辑：这是一个现场版本：http: [//jsfiddle.net/ZDF2U/](http://jsfiddle.net/ZDF2U/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:17:16.973

在您的情况下，您也可以在`div`：

```
display: table; 
```

这是 jsFiddle：http: [//jsfiddle.net/leniel/Et3t5/](http://jsfiddle.net/leniel/Et3t5/)

* * *

这是另一个向您展示类似案例的 jsFiddle：http: [//jsfiddle.net/leniel/T7DTc/](http://jsfiddle.net/leniel/T7DTc/)

如果是 div，`width: auto;`那么它会扩展以容纳`textarea`表格内部。如果您将其设置为`width: 500px;`然后`textarea`在 div 之外增长。

所以解决方案看起来像设置`width: auto;`。当然，您的代码中的某些特殊内容可能会造成干扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:20:23.953

设置`table { width:100% }`解决了它。现在我可以保持`div`足够大，桌子正好适合它。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:21:29.033

使 div 包含 table `inline-block`。即`display: inline-block`。这将强制它在被阻塞时呈现内联。或者`display: table`也可以。

链接到 jsFiddle：http: [//jsfiddle.net/Mr9jQ/](http://jsfiddle.net/Mr9jQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:24:24.883

您还可以将 divs 属性更改为

```
float:left;
width:auto; 
```

# javascript - 如何使用 javascript/jquery 编辑/添加到“a”标签的 onclick 事件中的“url”？

> ID：12804052
> 
> 赞同：0
> 
> 时间：2012-10-09T16:07:34.487
> 
> 标签：javascript, jquery, asp.net

我的网页上有以下元素：

```
<a target="_blank" href="http://www.fxs.dev/quote/quote.aspx" onclick="javascript:window.location='http://www.fxs.dev/quote/quote.aspx?partnumber=526-NTE3031';" return="" false;="">Request Delivery Quote</a> 
```

我想尝试将查询字符串添加到`onclick`元素的“”属性中的“url”。是否有一个 jquery 函数允许我只编辑`onclick`事件的“URL”部分。还是我只需要编写自己的自定义函数来剥离和编辑`onclick`事件代码？

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:16:42.313

严格来说，onclick 属性包含一个被解释为 Javascript 代码的字符串。我知道你只能用这个做两件事；将其作为 Javascript 执行，或者编辑为字符串。后者意味着您必须从中删除 url 并手动编辑它，恐怕。

我不太明白将`window.location=`调用作为锚标记的 onclick 中唯一的原因..这不是 href 属性的用途吗？这也更容易用 jQuery 编辑，使用`.attr('href','http://example.com');`

# svn - Can I `reintegrate` using a specific range of revisions?

> ID：12804064
> 
> 赞同：0
> 
> 时间：2012-10-09T16:07:55.213
> 
> 标签：svn, merge, svn-reintegrate

I'm working on a project with multiple people on the same branch. When we try to reintegrate our branch (using the `--reintegrate` command), we first merge the current trunk into the branch. We would then like to use the reintegrate command with the version number of the commit of the merge from trunk to branch.

Is it possible to reintegrate using this (or any other revision number for that matter) revision number? Or will reintegrate always take the last revision of the branch and use that?

Additionally, if somebody makes a commit after the merge from the trunk to the branch and I would start a reintegrate after that, what are my chances that the reintegrate will fail? (Failing means either bringing up conflicts (which I can solve, I know) or screwing up the merge info, which might not necessarily show until later on.)

As I said, I'm working with multiple people and it is not yet possible to enforce a codefreeze (too big a project to lock it and no administrative privileges to lock other users out). I am interested in your ideas, so that maybe I can plead my case to make this possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:48:05.547

Preface:

You have to slightly clean-up your terminology: verb "reintegrate" have special meaning in SVN-world, related to merges (see `--reintegrate` option in merge)

Face:

You want to do **continuos merges** from branch to trunk (or bidirectional merges - from branch to trunk AND from trunk to branch in parallel?). It's perfectly valid and doable operation, and due to to nature of atomic commits in SVN you огые can don't worry about simultaneous operations (it's Subversion game).

You can merge two URLs more than once, you can do it at any time. For SVN < 1.6 you have to remember merged ranges and define merge-ranges in new merges, for SVN >= 1.6 mergeinfo stored and used automagically (read "Merge Tracking" chapter in `svn help merge`)

HTH

**Edit**

For `merge --reintegate` you can use revision range. By definition, reintegration of branch back to trunk uses all branch-timespan, separates branch-only changes from trunk changesets and applies these changes to trunk, making branch after this useless and actually closed

This is a brief synopsis of help topic

# html - 从字符串中剥离 HTML

> ID：12804067
> 
> 赞同：5
> 
> 时间：2012-10-09T16:08:08.960
> 
> 标签：html, vba, ms-access

我已经尝试了很多事情，但似乎没有任何工作正常。我有一个 Access DB 并且正在用 VBA 编写代码。我有一个 HTML 源代码字符串，我有兴趣从其中剥离所有 HTML 代码和标签，这样我就只有纯文本字符串，没有留下 html 或标签。做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:14:18.523

一种对不良标记尽可能有弹性的方法；

```
with createobject("htmlfile")
    .open
    .write "<p>foo <i>bar</i> <u class='farp'>argle </zzzz> hello </p>"
    .close
    msgbox "text=" & .body.outerText
end with 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T16:10:28.243

```
 Function StripHTML(cell As Range) As String  
 Dim RegEx As Object  
 Set RegEx = CreateObject("vbscript.regexp")  

 Dim sInput As String  
 Dim sOut As String  
 sInput = cell.Text  

 With RegEx  
   .Global = True  
   .IgnoreCase = True  
   .MultiLine = True  
.Pattern = "<[^>]+>" 'Regular Expression for HTML Tags.  
 End With  

 sOut = RegEx.Replace(sInput, "")  
 StripHTML = sOut  
 Set RegEx = Nothing  
End Function 
```

这可能对你有帮助，祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T16:14:40.007

这取决于 html 结构的复杂程度以及您想要从中获取多少数据。

根据复杂性，您可能会使用正则表达式，但对于复杂的标记，尝试使用正则表达式解析来自 html 的数据就像尝试用叉子吃汤一样。

您可以使用 htmFile 对象将平面文件转换为可以与之交互的对象，例如：

```
Function ParseATable(url As String) As Variant 

    Dim htm As Object, table As Object 
    Dim data() As String, x As Long, y As Long 
    Set htm = CreateObject("HTMLfile") 
    With CreateObject("MSXML2.XMLHTTP") 
        .Open "GET", url, False 
        .send 
        htm.body.innerhtml = .responsetext 
    End With 

    With htm 
        Set table = .getelementsbytagname("table")(0) 
        Redim data(1 To table.Rows.Length, 1 To 10) 
        For x = 0 To table.Rows.Length - 1 
            For y = 0 To table.Rows(x).Cells.Length - 1 
                data(x + 1, y + 1) = table.Rows(x).Cells(y).InnerText 
            Next y 
        Next x 

        ParseATable = data 

    End With 
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T08:50:45.047

Using early binding:

```
Public Function GetText(inputHtml As String) As String
With New HTMLDocument
    .Open
    .write "<p>foo <i>bar</i> <u class='farp'>argle </zzzz> hello </p>"
    .Close
   StripHtml = .body.outerText
End With
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T03:03:01.570

对上述之一的改进......它找到引号和换行符并将它们替换为非 HTML 等效项。此外，原始函数在嵌入 UNC 引用时存在问题（即：<\server\share\folder\file.ext>）。由于 < 开头和 > 结尾，它将删除整个 UNC 字符串。此函数修复了该问题，以便 UNC 正确插入到字符串中：

```
Function StripHTML(strString As String) As String
 Dim RegEx As Object
 Set RegEx = CreateObject("vbscript.regexp")

 Dim sInput As String
 Dim sOut As String
 sInput = Replace(strString, "<\\", "\\")

 With RegEx
   .Global = True
   .IgnoreCase = True
   .MultiLine = True
.Pattern = "<[^>]+>" 'Regular Expression for HTML Tags.
 End With

 sOut = RegEx.Replace(sInput, "")
 StripHTML = Replace(Replace(Replace(sOut, "&nbsp;", vbCrLf, 1, -    1), "&quot;", "'", 1, -1), "\\", "<\\", 1, -1)
 Set RegEx = Nothing
End Function 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-06-06T05:37:37.467

我找到了一个非常简单的解决方案。由于系统限制和共享驱动器权限，我目前运行一个访问数据库并使用 excel 表单来更新系统。当我从 Access 调用数据时，我使用：Plaintext( **YourStringHere** ) 这将删除所有 html 部分，只留下文本。

希望这有效。

# console - 是否可以配置 phpstorm 的控制台？

> ID：12804068
> 
> 赞同：2
> 
> 时间：2012-10-09T16:08:11.670
> 
> 标签：console, phpstorm

我正在使用 phpstorm，我发现它很棒。但是我习惯于在控制台上工作，并且遇到了一些问题。

运行命令（例如 ls）时元素的显示是逐行显示的，这不是很舒服，还有很多其他不便之处。

是否可以配置我的控制台（查看我运行命令的实际文件夹，如何显示更多“宽度”命令的输出......）？或者，有没有好的插件来实现这一点？

# ios - Phonegap Twitter 插件冲突

> ID：12804070
> 
> 赞同：0
> 
> 时间：2012-10-09T16:08:17.933
> 
> 标签：ios, cordova, twitter

我在 Phonegap 上安装 twitter 插件时遇到问题。插件的脚本和我当前的脚本之间一定存在某种冲突。我没有收到任何 xcode 或控制台错误。有谁知道 jquery mobile 和 twitter 插件之间会发生什么冲突？在我将 twitter 插件代码引入 jquery 移动框架之前，一切正常。以下是我正在使用的所有资产：

*   IOS6
*   电话间隙 2.1.0
*   jQuery 1.7.1
*   jQuery手机
*   脸书插件
*   推特插件
*   子浏览器
*   照片滑动

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:12:05.347

也许问题是您将javascript放在HTML头部的顺序。在这种情况下，请尝试更改顺序。

# c# - 后台工作人员一直很忙

> ID：12804072
> 
> 赞同：2
> 
> 时间：2012-10-09T16:08:21.640
> 
> 标签：c#, backgroundworker

在我的应用程序中，我有一个图片框和 2 个按钮（“是”和“否”）。Yes 将 1 添加到结果列表中，No 添加 0 并且都转到下一张图片。现在我需要在应用程序中实现一个计时器，如果没有提供答案，它会使图片转到下一个。我想为此使用后台工作人员。

当我不单击按钮时，下面的代码可以很好地切换图片。单击按钮会冻结 UI，因为后台工作人员保持“忙碌”状态。我确实知道 CancelAsync 不会立即停止后台工作程序，但实际上会触发 DoWork 中的返回语句。

所以我的问题是为什么后台工作人员一直很忙，或者我在这里完全走错了路？

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        Counter = 0;

        _backgroundWorker = new BackgroundWorker();
        _backgroundWorker.DoWork += _backgroundWorker_DoWork;
        _backgroundWorker.WorkerSupportsCancellation = true;
        _backgroundWorker.RunWorkerAsync();
    }

    private void _backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker bgw = sender as BackgroundWorker;

        GoToNextItem(); //Show next picture
        while (!bgw.CancellationPending) 
        {
            _getNext = false;
            Stopwatch sw = Stopwatch.StartNew();

            //Wait interval-time
            while (!_getNext)
            {
                 if ((sw.ElapsedMilliseconds > Test.Interval * 1000) && !bgw.CancellationPending)
                {
                    _getNext = true;
                }
                if (bgw.CancellationPending)
                {
                    e.Cancel = true;
                    return; //Breakpoint is hit here
                }
            }
            if (_getNext)
            {
               Result.Add(0);
                GoToNextItem();
            }
        }
        e.Cancel = true;
    }

    private void btnNo_Click(object sender, EventArgs e)
    {
        _backgroundWorker.CancelAsync();
        Result.Add(0);

        while (_backgroundWorker.IsBusy)
        {
        _backgroundWorker.CancelAsync();
            System.Threading.Thread.Sleep(20);
        }
        _backgroundWorker.RunWorkerAsync();
    }

    private void btnYes_Click(object sender, EventArgs e)
    {
        _backgroundWorker.CancelAsync();
        Result.Add(1);

        while (_backgroundWorker.IsBusy) //Stays busy ==> UI freezes here
        {
            _backgroundWorker.CancelAsync();
            System.Threading.Thread.Sleep(20);
        }
        _backgroundWorker.RunWorkerAsync();
    } 
```

**编辑**

按照@Servy 的建议，使用计时器更改了代码。有关 backgroundworker-question 的更多详细信息，请阅读已接受答案的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:13:00.047

你应该只使用 a `System.Windows.Forms.Timer`。

```
private System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
public Form1()
{
    InitializeComponent();

    timer.Interval = 5000;
    timer.Tick += timer_Tick;
    timer.Start();
}

private void timer_Tick(object sender, EventArgs e)
{
    //runs in UI thread; code to go to next picture goes here
}

private void btnYes_Click(object sender, EventArgs e)
{
    timer.Start();
}
private void btnNo_Click(object sender, EventArgs e)
{
    timer.Start();
} 
```

您还需要调用`Start`“是”和“否”按钮，因为它会重置计时器，这样您就可以返回到下一张图片的倒计时开始。

您可以`Stop`随时调用它来停止射击。

至于为什么您当前的代码会冻结 UI，这是因为您的 click 事件处理程序在 UI 线程中运行，并且它们`Sleep`在等待后台工作人员时正在调用。我不建议尝试修复这种方法，您应该使用计时器，但如果您确实想要，您需要将事件处理程序附加到后台工作人员的已完成/已取消事件并执行您当前正在执行的所有操作在那些其他处理程序中“等待 BGW 准备好”，而不是在 UI 线程中等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:21:12.120

当您单击按钮时，您是在告诉后台工作人员取消，但您也*立即*开始线程睡眠，这基本上没有给后台工作人员足够的时间来有效地取消。

我测试了您的方法并添加了`Application.DoEvents()`如下一行：

```
while (_backgroundWorker.IsBusy)
{
    _backgroundWorker.CancelAsync();
    Application.DoEvents();
    System.Threading.Thread.Sleep(20);
} 
```

这允许后台工作人员更快地取消，但我相信`Application.DoEvents()`以这种方式使用是一种代码味道。我建议使用@Servy 建议的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:27:36.363

我觉得你使用后台工作人员的方式是错误的..你应该做一些应该在后台运行而不会让 UI 挂起的事情..

但在你的情况下没有这样的要求..

只需使用计时器控件来执行相同操作，并在 GoToNextItem 方法中禁用“是/否”按钮并在最后重新启用..

# javascript - EventSource 侦听器在 Firefox 中的页面加载时不会触发

> ID：12804074
> 
> 赞同：3
> 
> 时间：2012-10-09T16:08:31.427
> 
> 标签：javascript, firefox, server-sent-events

当它在其他（所有）浏览器中工作时，我对它在 Firefox 中不起作用的原因感到有点困惑。

初始化 EventSource 并注册一个监听器：

```
var output = new EventSource('/subscribe');

output.addEventListener('shell_stream', function(e) {
    $('#shell-output').append(e.data + "<br/>");
}, false); 
```

然后在页面加载时，我正在查看查询字符串，如果有文件和运行操作，我将它们发送到服务器（通过 ajax），服务器将数据发送回上面注册的侦听器。

调试了很多脚本。它确实发送请求并接收有效响应，并且服务器确保向侦听器发送数据。

但是，在 Firefox 上，侦听器不会以任何方式做出反应。

值得注意的是，如果用户单击“运行”按钮，侦听器的工作原理是完美的，如果在查询字符串中找到文件和运行，该按钮调用的函数与页面加载时调用的函数完全相同。

此外，如果我触发`alert()`页面加载并用户单击它，侦听器将起作用！

这是在各种浏览器中尝试的实时链接：

[http://cibox.org/slivu/stackoverflow?file=extract-image.rb&run=true](http://cibox.org/slivu/stackoverflow?file=extract-image.rb&run=true)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:40:02.213

# 最终更新

将此移至单独的帖子：

[https://stackoverflow.com/questions/13159977](https://stackoverflow.com/questions/13159977)

* * *

=== 更新 ===

忘记/错过`onopen`每 N 秒调用一次 :)

所以我的文件永远运行:)

现在使用一个丑陋的黑客：

```
initialized = false;
var output = new EventSource( ... );

output.onopen = function() {
  if(initialized) return true;
  initialized = true;

  ...
  invoke_file_runner( ... );
} 
```

`initialized`确保它只运行一次。

* * *

找到了！

我的代码如下所示：

```
var output = new EventSource( ... );
...
invoke_file_runner( ... ); 
```

有趣的部分是在所有浏览器`invoke_file_runner`上执行时已经建立了连接。

Firefox 除外，它是在之后建立连接的。

不知道如何以及为什么。

修复很简单：

```
var output = new EventSource( ... );
output.onopen = function() {
  ...
  invoke_file_runner( ... );
} 
```

这将确保`invoke_file_runner`仅在建立连接后执行。

# replication - 集群 websphere mq

> ID：12804080
> 
> 赞同：1
> 
> 时间：2012-10-09T16:09:10.750
> 
> 标签：replication, message-queue, ibm-mq

是否可以在 webspehre mq 队列上建立双向复制，这样它就可以像数据库集群一样工作，其中数据被复制到所有成员实例想象以下场景：

队列管理器

```
QM1  
DESTINATION.QUEUE  
RESPONSE.QUEUE  

QM2  
DESTINATION.QUEUE   
RESPONSE.QUEUE 
```

应用

```
application A issues **put** on DESTINATION.QUEUE@QM1 

application B issues **get** on DESTINATION.QUEUE@QM2

application B sends response **put** RESPONSE.QUEUE@QM2

application A gets response **get** RESPONSE.QUEUE@QM1 
```

我问的不是传输队列，而是双向复制，其中所有队列都是本地的，但像我上面提到的数据库集群一样不断更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:30:14.850

WMQ 不提供这种级别的复制。存在复制到辅助站点以进行灾难恢复的实现，但这些实现不是双向的。主站点和辅助站点不能同时处于活动状态。

应用程序可以跨多个 QMgr 发布并订阅任何 QMgr 以接收该发布。回复要么直接发送给请求者，要么发布在请求者订阅的主题上。

# .net - 使用泛型函数创建 Linq 表达式

> ID：12804092
> 
> 赞同：0
> 
> 时间：2012-10-09T16:09:44.620
> 
> 标签：.net, vb.net, linq

我有一个类（实体），如下所示：

```
Public Class Product

    Property ID As Integer
    Property Name As String
    Property IssueDate As Date
    Property ExpireDate As Date
    Property NextCheckDate As Date

End Class 
```

我正在使用 Entity Framework 5，我想在*where*子句中使用一些谓词来查询我的数据库。为了为日期创建谓词，我想使用如下函数：

```
Function GetDateIssuePredicate(fromDate As Date?, toDate As Date?) As Expression(Of Func(Of Product, Boolean))

    Dim predicate As Expressions.Expression(Of Func(Of Product, Boolean))

    If fromDate.hasValue AndAlso toDate.hasValue Then
        predicate = (Function(p) p.IssueDate >= fromDate.Value AndAlso p.IssueDate<= toDate.Value)
    ElseIf fromDate.hasValue Then
        predicate = (Function(p) p.IssueDate >= fromDate.Value)
    ElseIf toDate.hasValue Then
        predicate = (Function(p) p.IssueDate<= toDate.Value)
    End If

    Return predicate

End Function 
```

此函数适用于特定实体字段**IssueDate**。**我想避免为不同的实体字段（即ExpireDate**、**NextCheckDate** ）创建更多执行完全相同的操作的函数。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:42:43.023

您可以使它成为 DateTime 的函数，而不是 Product 的函数。

```
Function GetDateIssuePredicate(fromDate As Date?, toDate As Date?) As Expression(Of Func(Of DateTime, DateTime)) 

    Dim predicate As Expressions.Expression(Of Func(Of DateTime, DateTime)) 

    If fromDate.hasValue AndAlso toDate.hasValue Then 
        predicate = (Function(d) d >= fromDate.Value AndAlso d <= toDate.Value) 
    ElseIf fromDate.hasValue Then 
        predicate = (Function(d) d >= fromDate.Value) 
    ElseIf toDate.hasValue Then 
        predicate = (Function(d) d <= toDate.Value) 
    End If 

    Return predicate 

End Function 
```

# python - 想在开始时添加一次字符串

> ID：12804095
> 
> 赞同：0
> 
> 时间：2012-10-09T16:09:49.693
> 
> 标签：python, recursion

```
def countup(k, n):
     'counts up from k to n'
     if k == n:
         print(k)
     elif n <= 0:
         print("Let's go!")
     else:
         print(k)
         countup(k+1,n) 
```

我想在递归开始之前添加一个“Let's Go”的打印语句，所以它看起来像这样：

计数（3,6）

我们走吧！
3
4
5
6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:18:21.480

你可以写一个这样的包装函数

```
def countup(k,n):
    print "Let's Go"
    _countup(k,n)

def _countup(k, n):
     'counts up from k to n'
     if k == n:
         print(k)
     else:
         print(k)
         _countup(k+1,n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:12:07.050

将递归移动到第二个函数中，让第一个函数输出字符串，然后调用第二个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:12:34.670

在行前打印，您第一次在哪里调用该方法？当然，您不能直接跳入递归..对吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:13:16.473

使用默认参数：

```
def countup(k, n,go=None):
     'counts up from k to n'
     if go:
         print go
     if k == n:
         print(k)
     elif n <= 0:
         print("Let's go!")
     else:
         print(k)
         countup(k+1,n)
countup(3,6,"Lets go") 
```

**输出：**

```
Lets go
3
4
5
6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T16:13:41.280

对于像这样愚蠢的东西，我使用关键字参数：

```
def count_up_or_down(k, n, start=True):
     'counts up from k to n'

     if(start):
         print("Let's go!")
     if k == n:
         print(k)
     else:
         print(k)
         sign = 1 if n>k else -1
         count_up_or_down(k+sign,n,start=False)

count_up_or_down(3,6) 
```

但实际上，函数通常应该做一件事（并且做好一件事）。您要求一个执行 2 件不相关的事情的函数（打印“Lets go！”并计数）。将这两个不相关的动作分解为两个单独的函数/语句肯定会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T16:14:38.687

您可以从调用函数中执行此操作，或者`countup`使用另一个打印“Let's go！”的函数。在调用递归之前。

如果您一心想从递归内部进行操作，请尝试切换它，以便从顶部开始并向下递归（未经测试，但它在我的脑海中有效）：

```
def countupwithletsgo(k, n):
    if k == n:
        print("Let's go!")
        print(n)
    else:
        countupwithletsgo(k, n-1)
        print(n) 
```

请注意笨拙的函数名称 - 通常是一个好兆头，它不仅仅做一件事，而且可能应该被重构。就像首先建议的包装函数形式一样。

# xml - 从 XML 中选择产品的 XPATH 语法

> ID：12804096
> 
> 赞同：0
> 
> 时间：2012-10-09T16:09:49.937
> 
> 标签：xml, xpath

我有以下 XPATH，它似乎正在为该类别选择正确的产品，但是当它们在我的 XPath 中的 qtyInStock 值为 0 时错误地选择产品我声明 qtyInStock > 0。谁能看到这有什么问题，我假设我的语法不正确。

> /products/product[category = 1234 or additionalCategories/catID =1234 and qtyInStock > 0]

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
<product>
<prod_id>2100818</prod_id>
<productURL></productURL>
<productImageURL>jb-m-kirichigai-draw-6.jpg</productImageURL>
<category>448267</category>
<qtyInStock>2</qtyInStock>
<featured>1</featured>
<Hidden>0</Hidden>
<productName>1.5 Sun Kirichigai 6 Step with Draw Japanese Puzzle Box</productName>
<livePrice>39.4</livePrice>
<fullURL>http://www.faze3.co.uk/index.aspx?pageID=527917&amp;prodID=2100818</fullURL>
</product>
<product>
<prod_id>2101600</prod_id>
<productURL></productURL>
<productImageURL>jb-2-kiasa-7.jpg</productImageURL>
<category>448267</category>
<qtyInStock>1</qtyInStock>
<featured>1</featured>
<Hidden>0</Hidden>
<productName>2 Sun Kiasa 7 Step Japanese Puzzle Box</productName>
<livePrice>28.4</livePrice>
<fullURL>http://www.faze3.co.uk/index.aspx?pageID=527917&amp;prodID=2101600</fullURL>
</product>
<product>
<prod_id>2101795</prod_id>
<productURL></productURL>
<productImageURL>jb-2-koyosegi-7.jpg</productImageURL>
<category>448267</category>
<qtyInStock>2</qtyInStock>
<featured>1</featured>
<Hidden>0</Hidden>
<productName>2 Sun Koyosegi 7 Step Japanese Puzzle Box</productName>
<livePrice>25.95</livePrice>
<fullURL>http://www.faze3.co.uk/index.aspx?pageID=527917&amp;prodID=2101795</fullURL>
</product>
<product>
<prod_id>2102219</prod_id>
<productURL></productURL>
<productImageURL>jb-2-kuroasa-10.jpg</productImageURL>
<category>448267</category>
<qtyInStock>0</qtyInStock>
<featured>1</featured>
<Hidden>0</Hidden>
<productName>2 Sun Kuroasa 10 Step Japanese Puzzle Box</productName>
<livePrice>34.8</livePrice>
<fullURL>http://www.faze3.co.uk/index.aspx?pageID=527917&amp;prodID=2102219</fullURL>
</product> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:13:47.283

运算符的`and`优先级高于`or`运算符。有关详细信息，请参见[此处](http://www.mulberrytech.com/papers/XPath-2-0-User-Grp-HTML/slide081.html)。

而是尝试以下（注意用括号分组）

`/products/product[(category = 1234 or additionalCategories/catID =1234) and qtyInStock > 0]`

# excel - 使用记录集修改 Excel 数据透视表并刷新：异常

> ID：12804097
> 
> 赞同：3
> 
> 时间：2012-10-09T16:09:52.717
> 
> 标签：excel, vsto, refresh, pivot-table, recordset

我在这里不知所措，一整天都在试图做一些不应该那么复杂的事情。

我有一个从 Sybase 查询返回的 Recordset。此记录集用于在 Excel 中构建数据透视表。到现在为止还挺好。我想更改数据透视表中的一个值，为此我使用新值来更新记录集中的某些记录。我可以毫无问题地在 RS 中进行更新，并且下次迭代时将值保存在 RS 中。

问题是这些值没有反映在数据透视表中。我试过了：

*   `pivotTable.Refresh();`
    *   COMException：数据透视表类的 RefreshTable 方法失败
*   `pivotTable.PivotCache().Refresh();`
    *   ComException：来自 HRESULT 的异常：0x800A03EC
*   `pivotTable.Update();`
    *   也不例外，但更改不会反映在数据透视表中

我也尝试过克隆记录集并从中创建一个全新的数据透视表，但是虽然其中`Recordset`有数据，但它`PivotCache.RecordCount`是 0

代码：

```
var app = ExcelAppHelper.GetExcelApp();
if (app.ActiveCell == null || app.ActiveCell.PivotTable == null)
    return;

PivotTable pivotTable = app.ActiveCell.PivotTable;
var rs = (Recordset)pivotTable.PivotCache().Recordset;
rs.MoveFirst();

s_lastSelectedPivotTree = new PivotFilterTree();
RecalculateSelectedValues(vmMain);

while (!rs.EOF)
{
    if (s_lastSelectedPivotTree.Contains(rs.Fields))
    {
        foreach (var dataFieldName in s_lastSelectedDataFields)
        {
            // update the values in the RS
            rs.Fields[dataFieldName].Value = newValue;
        }

        // commit the modifications into the RS
        rs.Update(Type.Missing, Type.Missing);
    }
    rs.MoveNext();
}
rs.MoveFirst();

// here is the magic line that will show me the updated pivot table
pivotTable.Update(); 
```

有人知道怎么做吗？修改记录集，然后“刷新”数据透视表以根据记录集重新计算数据透视表。

谢谢肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:47:56.683

嗯，我解决了。似乎一旦 a`Recordset`被 a “消耗”了`PivotTable`，您就可以随意修改它，只是不会在 Excel 中更新。尽管`Recordset`包含数据，但刷新将清空`PivotTable`并导致其丢失数据。

解决方法？在将其提供给之前创建一个深层副本（`Recordset.Clone()`不会起作用），然后每次要修改其中的值时，修改“干净”副本，制作它的新副本并将副本传递给消费它。然后刷新.`Recordset``PivotTable``PivotTable``PivotTable`

```
 var newRS = RecordsetDeepCopy(oldRS);

        newRS.MoveFirst();
        oldRS.MoveFirst();
        while (!newRS.EOF)
        {
            if (s_lastSelectedPivotTree.Contains(newRS.Fields))
            {
                // set the new value in the selected data fields
                foreach (var dataFieldName in s_lastSelectedDataFields)
                {
                    oldRS.Fields[dataFieldName].Value = val;
                    newRS.Fields[dataFieldName].Value = val;
                }

                newRS.Update(Type.Missing, Type.Missing);
                oldRS.Update(Type.Missing, Type.Missing);
            }
            newRS.MoveNext();
            oldRS.MoveNext();
        }

        newRS.MoveFirst();
        oldRS.MoveFirst();

        pivotCache.Recordset = newRS;
        pivotCache.Refresh(); 
```

还有recordset深拷贝的方法（网上C#不好找……）

```
private static Recordset RecordsetDeepCopy(Recordset src)
{
    var clone = new Recordset();
    int count = src.Fields.Count;
    var names = new object[count];
    int i = 0;

    foreach (ADODB.Field field in src.Fields)
    {
        names[i++] = field.Name;
        var attr = (FieldAttributeEnum)field.Attributes;
        clone.Fields._Append(field.Name, field.Type, field.DefinedSize, attr);
    }

    clone.Open(Missing.Value, Missing.Value, CursorTypeEnum.adOpenUnspecified, LockTypeEnum.adLockUnspecified, 0);

    src.MoveFirst();

    while (!src.EOF)
    {
        var values = new object[count];
        i = 0;
        foreach (ADODB.Field field in src.Fields)
        {
            values[i++] = field.Value;
        }

        clone.AddNew(names, values);
        src.MoveNext();
    }

    clone.Update(Missing.Value, Missing.Value);
    return clone;
} 
```

希望这能让其他人感到头疼......

肖恩

# php - Yii 多对多查询

> ID：12804102
> 
> 赞同：1
> 
> 时间：2012-10-09T16:10:02.623
> 
> 标签：php, orm, yii, many-to-many

描述我的问题的最好方法是解释我的情况：

我正在使用 yii，因此任何响应都应面向该框架。

我有一个数据库，其中包含产品和类别的多对多关系，因此有一个产品表、一个类别表和一个用于它们之间关系的 category_product 表。

我也有一个用户表。允许用户购买某些类别的产品，因此 category_user 表描述了另一种多对多关系，其中现有关系表示允许用户购买该类别中的任何产品。

我的问题是：如果我当前有用户和产品，是否有一种简单的方法可以确定用户是否可以购买产品，这意味着用户和产品与同一类别存在关系。我很难找到一种有效或简单的方法来完成此任务，而不仅仅是获取与用户相关的类别 ID 数组和与产品相关的另一个类别 ID 数组，然后在其中搜索匹配项.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:36:30.760

我看到两种方法可以做到：

1.  只需使用 ORM 功能来加载引用：

    `isbelongTo($user, $product){ foreach($user->categories as $category){ foreach($category->products as $pr){ if($pr->id==$product->id) return true; } } return false; }`

2.  但相信我不会这样做，因为它必须加载一堆东西，而不是使用纯 sql，而且它不会使系统变得“智能”。ORM 也用于加载对象而不是记录，在我们的例子中，我们不关心对象，所以可以使用纯 sql：

    `isbelongTo($user, $product){ $connection=Yii::app()->db; $sql = 'select * from category_user cu inner join category_product cp on cu.categoryId = cp.categoryId where cp.productId = :productId cu.userId = :userId'; $command=$connection->createCommand($sql); $command->bindParam(':productId',$product->id,PDO::PARAM_STR); $command->bindParam(':usertId',$user->id,PDO::PARAM_STR); $value=$command->queryScalar(); return $value > 0; //if greater then 0 that means it belong to, so returns true }`

我肯定会选择第二种方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:37:58.163

也许[通过使用关系查询](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)，你可以调用[存在](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/#exists-detail)或类似的东西

# html - 在选择器中添加背景颜色

> ID：12804103
> 
> 赞同：1
> 
> 时间：2012-10-09T16:10:05.030
> 
> 标签：html, css

我想在选择器中放置一个绿色的小矩形。我尝试了很多，但找不到解决方案。

```
<select>
    <option value="all_clicks"  selected="selected" class="greenRect">All clicks</option>
    <option value="search_camp">Search campaigns</option>
    <option value="search_links">Search links</option>
    <option value="none">None</option>
</select> 
```

```
.greenRect{
    height:15px;
    width:15px;
    backround:#7db22b;
    border-radius:2px;
}
​ 
```

[http://jsfiddle.net/DVyQC/](http://jsfiddle.net/DVyQC/)

类似于图中所示！请帮我。

![在此处输入图像描述](../Images/14183dd7d77e277e494849c285610369.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:12:15.843

好吧，您将无法使用普通标签来做到这一点，而是您可以做的（并且您还可以让它看起来很漂亮）是使用普通列表`<ul><li>`并重新创建选择器行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:17:25.730

你不可能用 CSS 做到这一点。选择框是最不“可样式化”的元素之一。

这是一个类似的帖子：[如何在选择列表中添加图像](https://stackoverflow.com/questions/2965971/how-to-add-a-images-in-select-list)

此答案仅描述了 Fx 的 CSS 解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:18:26.700

在选项中，这种方法是可能的，但这可以通过 jquery 或 javascript 来完成

检查[这个](http://apycom.com/)有很多下拉列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T16:19:11.487

您可以使用 msDropdown 并创建不同颜色的矩形图像来放置每个选项。 [http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)

这当然不如使用 CSS 流畅，但它可能会奏效。

# magento - Magento 自定义付款方式标题未显示在结帐中

> ID：12804104
> 
> 赞同：1
> 
> 时间：2012-10-09T16:10:07.193
> 
> 标签：magento, module, payment-gateway

我正在介绍[本](http://www.excellencemagentoblog.com/magento-create-custom-payment-method)教程，但我遇到了第一个小问题。虽然新方法出现在管理列表和结帐页面中，但它没有获得默认标题。

我还查看了“内置”支付方式的核心配置文件，但看不出有什么区别。

有什么想法吗？

（我正在运行 Magento 1.7）

这就是我尝试向 magento 指示结帐的默认标题的方式

```
<default>
        <payment>
            <globalpay>
                <active>1</active>
                <model>globalpay/pay</model>
                <order_status>processing</order_status>
                <title>Pay Method</title>
                <allowspecific>0</allowspecific>
            </globalpay>
         </payment>
    </default> 
```

这就是我在 Magento 的管理部分声明该字段的方式

```
 <title translate="label">
                            <label>Title</label>
                            <comment>Insert a custom title for this payment method</comment>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </title>
                        <active translate="label">
                            <label>Enabled</label>
                            <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </active>
                        <order_status translate="label">
                            <label>New order status</label>
                            <frontend_type>select</frontend_type>                   <source_model>adminhtml/system_config_source_order_status_processing</source_model>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </order_status> 
```

我还尝试删除该字段（第二个片段），认为虽然我不知道如何为其设置默认值（顺便说一句，我该怎么做？ - 可能它应该在设置时存储在 db 中，或者它可以由模型通过 source_model 标签提供服务吗？？）但它不起作用。

谢谢！

# android - Android/Camera：哪些参数/条件会影响 FLASH_MODE_AUTO 闪烁？

> ID：12804105
> 
> 赞同：2
> 
> 时间：2012-10-09T16:10:12.217
> 
> 标签：android

我`AUTO`在我的应用程序中将闪光模式设置为，但在与官方 Android 相机应用程序相同的条件下，闪光不会启动。在我的应用程序中，它仅在光线不足的情况下启动。

还有什么其他参数会影响闪光灯何时启动？

另外，作为一个后续问题：有没有办法读取照明条件（比如说，当相机对焦时），以便我可以自己确定`FLASH_MODE_ON`或以`FLASH_MODE_OFF`编程方式确定？

我正在 Galaxy S III / 最新的 CM10 上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:37:44.733

您是否检查过当前设置的场景模式。我认为相机闪光灯在不同场景模式下的工作方式不同。用于`getSceneMode()`查找您当前的场景模式并使用`setSceneMode()`.

来源：[Android 文档](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#SCENE_MODE_ACTION)

# ruby-on-rails - 无法在 Ubuntu 10.10 上安装 Rails

> ID：12804112
> 
> 赞同：1
> 
> 时间：2012-10-09T16:10:30.297
> 
> 标签：ruby-on-rails, ubuntu, installation

我想尝试使用本指南安装 Rails - [http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

我的最后一条命令是：

```
 gem install rails -v 3.2.3 
```

现在，当我跑步时

```
 rails new project 
```

给我错误：

```
 /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.1.0.0: cannot open shared object file: No such file or directory - /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/digest/sha1.so (LoadError)
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler/definition.rb:1:in `<top (required)>'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler.rb:144:in `definition'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler.rb:112:in `setup'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler/setup.rb:7:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from /home/denys/Desktop/pull/printitgreen/printitgreen/config/boot.rb:6:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from script/rails:5:in `<main>'
denys@denys-N68S3:~/Desktop/pull/printitgreen/printitgreen/script$ rails -v
 /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems
 /custom_require.rb:36:in `require': libcrypto.so.1.0.0: cannot open shared object 
file: No such file or directory - /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1
 /i686-linux/digest/sha1.so (LoadError)
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems
/custom_require.rb:36:in `require'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler
/definition.rb:1:in `<top (required)>'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler.rb:144:in `definition'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler.rb:112:in `setup'
from /home/denys/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.1/lib/bundler/setup.rb:7:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from /home/denys/Desktop/pull/printitgreen/printitgreen/config/boot.rb:6:in `<top (required)>'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/denys/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from script/rails:5:in `<main>'

 --------------------------- 
```

更多信息：

```
 denys@denys-N68S3:~/Desktop$ rvm list

 rvm rubies

 ruby-1.9.2-p320 [ i686 ]
=* ruby-1.9.3-p194 [ i686 ]

# => - current
# =* - current && default
#  * - default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:23:14.947

看起来您的 ruby​​ 没有使用 openssl 支持编译。

安装`openssl-dev`并重新安装/重新编译 ruby

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:16:21.080

虽然不确定问题所在，但这[对](http://www.youtube.com/watch?v=NmWYZVUln4E)我有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:21:45.677

您是否执行教程中列出的 apt-get 命令？

尝试：

sudo apt-get install libssl-dev

# templates - SilverStripe 模板

> ID：12804122
> 
> 赞同：0
> 
> 时间：2012-10-09T16:11:30.127
> 
> 标签：templates, silverstripe

**银条 2.4.7**

你好

我正在尝试组合一个模板来构建我的 JSON。我的班级有如下关系。

一家商店可以有许多优惠和许多新闻文章。优惠和新闻文章可以属于许多商店。

我的模板看起来像这样

```
{
"StoresHolder" : [
<% control Children %>
{
    "ID" : "$ID",
    "Name" : "$Name",
    "Address1" : "$Address1",
    "Address2" : "$Address2",
    "County" : "$County",
        "News"  : [
            <% control News %>
            {
            "ID" : "$ID",
            "Title" : "$Title",
            "DatePublished" : "$DatePublished",
            "ExpiryDate" : "$ExpiryDate",
            "Body" : "$Body",
            "URL" : "$URL",
            "Photo" : "$Photo.Filename"
            }<% if Middle %>,<% end_if %>
            <% end_control %>
        ],
        "Offers" : [
            <% control Offers %>
            {
            "ID" : "$ID",
            "Title" : "$Title",
            "Description" : "$Description",
            "Weight" : "$Weight",
            "Price" : "$Price",
            "Savings" : "$Savings",
            "Expires" : "$Expires",
            "Photo" : "$Photo.Filename"
            }<% if Middle %>,<% end_if %>
            <% end_control %>
        ]
}<% if Last %> <% else %>,<% end_if %>
<% end_control %>
]
} 
```

我让它工作到它只显示一个优惠和新闻文章的地步，但我无法进一步了解。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:41:00.947

这看起来不对 - 从某种意义上说：您是否看过这样的东西：

```
$data = DataObject::get(...); 
$formatter = new JSONDataFormatter(); 
return $formatter->convertDataObjectSet($data); 
```

结合对[DataObjectSets](http://api.silverstripe.org/2.4/sapphire/model/DataObjectSet.html)的正确处理，这应该是一种更好的方法。除非你有非常具体的理由要求不同的东西——那么请说明它们

# android - 将大图像放入与原始图像质量一样好的小图像视图中？

> ID：12804127
> 
> 赞同：6
> 
> 时间：2012-10-09T16:12:02.637
> 
> 标签：android, android-imageview

您好，我正在开发一款出色的 android 应用程序，我需要将大位图调整为小尺寸`imageview`。我正在使用`imageview`尺寸*300dp X 300dp*来显示大图像*1024 X 780*

如何将大图像制作成与原始图像一样质量的小图像？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T16:25:43.810

试试这个 ：

```
public static Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // CREATE A MATRIX FOR THE MANIPULATION
    Matrix matrix = new Matrix();
    // RESIZE THE BIT MAP
    matrix.postScale(scaleWidth, scaleHeight);
    // RECREATE THE NEW BITMAP
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;

} 
```

**便于使用 ：**

```
Bitmap bmResized=getResizedBitmap(yourBitmap,newHeight,newWidth); 
```

你得到你的调整大小的图像

**注意：**如果要调整资源图像的大小，请使用此转换为位图：

```
Bitmap bmOrginal=BitmapFactory.decodeResource(this.getResources(), R.drawble.yourRes);
Bitmap bmResized=getResizedBitmap(bmOrginal,newHeight,newWidth); 
```

然后设置调整后的图像：

```
image.setImageBitmap(bmResized); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:15:39.733

你试过了吗`im.setScaleType(ScaleType.FIT_XY)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T16:17:43.600

@Nikola 评论回答了我的问题。我在答案中写了这个，以便对未来的读者有好处

> 您应该制作大小为 300x300 的缩略图图像，但要保留其纵横比。您可以在画布上绘制更大的图像，画布以某种颜色填充其余空间。

# c# - Response.Redirect 未按预期工作 - 页面自行刷新，不发生重定向

> ID：12804129
> 
> 赞同：1
> 
> 时间：2012-10-09T16:12:06.620
> 
> 标签：c#, asp.net, sharepoint

所以，我试图在 gridview 中有一个字段，它是一个打开详细信息页面的链接，基于单击的行。详细信息页面在我手动访问时有效，但我似乎无法通过调用执行 Response.Redirect(URL) 的函数来访问它 - 相反，当单击链接按钮时，我得到了奇怪的行为，页面进行回发并保持在自身上。

我究竟做错了什么？我应该改用 Server.Transfer() 吗？我宁愿使用重定向，因为在我正在查看的用例中，更新 url 在我看来是一种界面优势。

这是 sharepoint webpart 的一部分，另一个页面位于同一 sharepoint 服务器上，并且是不同的 webpart 集合。

```
<asp:Gridview ID="grdWU" runat="server" [+bunch of settings]>
<Columns>
   <asp:TemplateField HeaderText="Workunit #" HeaderStyle-HorizontalAlign="Left"> 
      <ItemTemplate> 
         <asp:Linkbutton ID="Workunit" runat="server" **OnClientClick="OpenDetails"** Text='<%# Bind("Workunit") %>'></asp:Linkbutton>
      </ItemTemplate> 
   </asp:TemplateField>
</Columns>
</asp:Gridview> 
```

在类后面的代码中：

```
 protected void OpenDetails(object sender, EventArgs e)
    {
        GridViewRow clickedRow = ((LinkButton) sender).NamingContainer as GridViewRow;
        Button btnWorkunit = (Button)clickedRow.FindControl("Workunit");
          //Response.Redirect(workunitdetailsurl + "?Workunit=" + activeworkunit.ID, true);
        Response.Redirect("http://www.google.com");
    } 
```

出于绝望/诊断，我试图重定向到谷歌而不是我精心制作的 URL ......仍然没有。页面只会自行刷新。难道我做错了什么？

回答后编辑：我想我没有正确理解 onclick 和 onclientclick 之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:15:39.797

您是否能够确认您的事件实际上正在触发？尝试使用`OnClick`LinkBut​​ton 的事件而不是`OnClientClick`.

此外，尝试使用第二个重载，`Response.Redirect`它接受一个指示结束当前页面执行的布尔值：

```
Response.Redirect("http://www.google.com", true); //Indicates that the execution of the current page should terminate. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:38:14.193

Response.Redirect 抛出 ThreadAbortException... 尝试处理异常，您也可以尝试输入按钮或超链接等 html 控件，而不是项目模板中的链接按钮。

# java - 在 Maven 多模块项目的 JUnit 测试中找不到资源

> ID：12804132
> 
> 赞同：3
> 
> 时间：2012-10-09T16:12:24.587
> 
> 标签：java, maven, junit, classpath

我正在使用 Maven 3.0.3、JUnit 4.8.1 和 Java 1.6。我在 JUnit 测试文件中有这个......

```
@Before
public void loadTestProps() throws IOException, GeneralSecurityException { 
    final InputStream in = getClass().getClassLoader().getResourceAsStream("test.properties");
    testProps = new Properties();
    testProps.load(in); 
```

“test.properties”没有被拾取（输入流对象为空）。我的项目结构如下：

parent + --- pom.xml
+ --- war 模块
+ ------ pom.xml
+ ------ src/test/java/JUnit 文件
+ ------ src/test/资源/test.properties
+ --- ear 模块
+ ------- pom.xml

我更愿意将我的“src/test/resources”目录保留在我的 WAR 模块中，因为测试只与 WAR 文件有关。有没有办法可以重写上面的 Java 来找到我的“test.properties”或者我必须将文件移出 WAR 模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:07:59.690

而不是 getResourceAsStream("test.properties"); 你应该使用 getResourceAsStream("/test.properties");

# linq - 带有列计数过滤器的 Linq 查询

> ID：12804137
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:12:35.740
> 
> 标签：linq, filter, count, where

我尝试创建一些 linq 查询，如下所示。

我有一张包含资源计划项目的表格。有一列 weekID 和一列 deployPlanning。我想检查每周部署计划的计数是否不超过 40 小时。我需要在下面的 linq 查询中添加一些额外的 where 过滤器，但我不知道如何:( 有人可以告诉我如何在下面的当前 linq 查询中添加这些 where 过滤器吗？

```
var resourcePlanning = new ResourcePlanningManager().Repository.Find(
                rp => rp.EmployeeID == employeeRosterPeriod.EmployeeID &&
                      rp.PlanDate >= employeeRosterPeriod.DateFrom &&
                      rp.PlanDate <= employeeRosterPeriod.DateTo).FirstOrDefault();
            if (resourcePlanning != null)
            {
               // throw excetoption. There are more than 40 hours planned in 1 or more weeks in this range!
            } 
```

例如，在第 40 周，总共有 24 个 DeployedPlanned 小时。这不高于40，所以没关系。

[http://imageshack.us/photo/my-images/513/tableresourceplanning.png/](http://imageshack.us/photo/my-images/513/tableresourceplanning.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:21:40.767

我不确定我是否理解您的要求，但听起来像：

```
var resourcePlanning = new ResourcePlanningManager().Repository.Find(
            rp => rp.EmployeeID == employeeRosterPeriod.EmployeeID &&
                  rp.PlanDate >= employeeRosterPeriod.DateFrom &&
                  rp.PlanDate <= employeeRosterPeriod.DateTo
        )
        .GroupBy(rp => rp.weekID)
        .Where(g => g.Sum(rp => rp.deployedPlanning) > 40)
        .FirstOrDefault(); 
```

# perl - 自杀 Perl 脚本

> ID：12804141
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:12:48.570
> 
> 标签：perl

我需要一种方法来让 perl 脚本找到它自己的 pid 并使用系统命令杀死自己。在代码中：

```
my $pid = &getScriptPID();
system("taskkill $pid"); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T16:14:35.933

当前进程的 pid 可通过`$$`变量获得。

更好的问题是为什么你不能只使用这个`exit()`功能......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T16:14:12.410

[`kill`](http://perldoc.perl.org/functions/kill.html)`KILL =>`[`$$`](http://perldoc.perl.org/perlvar.html#%24%24)`;`

但为什么？为什么不只是[`exit`](http://perldoc.perl.org/functions/exit.html)or [`die`](http://perldoc.perl.org/functions/die.html)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:14:22.370

您可以使用`pid`变量`$PID`或`$$`从脚本中访问 。

看`perldoc perlvar`

# android - AsyncTask 未填充 ArrayList

> ID：12804146
> 
> 赞同：0
> 
> 时间：2012-10-09T16:13:01.800
> 
> 标签：android, arraylist, android-asynctask

我有一个调用 web 服务的应用程序，它返回一个 xml 字符串。以下类处理该字符串并将所需数据放入 ArrayList。ArrayList 是 TwoDimentionalArrayList 类型。我将在下面发布这两个类。他们都工作正常。

```
public class RetrieveExtraDetails {

    private static final String TAG = RetrieveExtraDetails.class.getSimpleName();
    DocumentBuilderFactory builderFactory;
    DocumentBuilder builder;
    Document document;
    TwoDimentionalArrayList<String> arrayList;

    public RetrieveExtraDetails() {
        super();
        arrayList = new TwoDimentionalArrayList<String>();
        builderFactory = DocumentBuilderFactory.newInstance();
        document = null;
        try {
            builder = builderFactory.newDocumentBuilder();
            Log.e(TAG, "built the dom factory");
        } catch (ParserConfigurationException e) {
            e.printStackTrace();  
        }

    }// end of constructor

public  TwoDimentionalArrayList<String> getExtraDetails(String xmlStr){

    ArrayList<String> array = null;

        try {

            document = builder.parse( new InputSource(new StringReader(xmlStr))); 
            Log.e(TAG, "document = " + document);

        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        Element rootElement = document.getDocumentElement();
        NodeList nodes = rootElement.getChildNodes();

        Node rota = nodes.item(0);
        NodeList callList = rota.getChildNodes();

        for(int i = 0; i < callList.getLength(); i++){

            Node call = callList.item(i);
            NodeList callChildrenList = call.getChildNodes();
            array = new ArrayList<String>();

        for(int j = 0; j < callChildrenList.getLength(); j++){

                Node callChild = callChildrenList.item(j);

                if(callChild.getNodeName().equalsIgnoreCase("RecTypeID")){
                      String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "RecTypeID = " + nodeData);
                      array.add(nodeData);

                }else if (callChild.getNodeName().equalsIgnoreCase("RecType")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "RecType = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Name")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Name = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Relationship")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Relationship = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Address")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Address = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Postcode")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Postcode = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("TelNo")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "TelNo = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Keysafe")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Keysafe = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Notes")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Notes = " + nodeData);
                      array.add(nodeData);
                }else if (callChild.getNodeName().equalsIgnoreCase("Meds")){

                    String nodeData =  callChild.getTextContent();
                      Log.e(TAG, "Meds = " + nodeData);
                      array.add(nodeData);
                }

            }// end of j loop
        arrayList.add(i, array);
        }//end of i loop

        return arrayList;

    }//end of getExtraDetails

}//end of class 
```

.

```
public class TwoDimentionalArrayList<T> extends ArrayList<ArrayList<T>> {

    private static final long serialVersionUID = 1L;

    public void addToInnerArray(int index, T element) {
        while (index >= this.size()) {
            this.add(new ArrayList<T>());
        }
        this.get(index).add(element);
    }

    public void addToInnerArray(int index, int index2, T element) {
        while (index >= this.size()) {
            this.add(new ArrayList<T>());
        }

        ArrayList<T> inner = this.get(index);
        while (index2 >= inner.size()) {
            inner.add(null);
        }

        inner.set(index2, element);
    }
} 
```

现在在下面的类中，我有一个设置在类范围内的 ArrayList。以下类应使用 AsyncTask 的结果填充此 arrayList。在 onPostExecute 中，数组的大小为 4，但是当我注销类范围数组的值时，它在由 AsyncTask 设置后为 0。我什至在 Async 上调用 .get() 以确保活动在恢复执行之前等待 Async 的结果。

任何想法为什么这个 ArrayList 没有被填充？我已经问过一个类似的问题，但在这个问题中，我已将代码缩减，以便更容易理解问题。谢谢。

```
ArrayList<ArrayList<String>> array; 
```

.

```
public class GetRotaDetails extends NfcBaseActivity{

    ArrayList<ArrayList<String>> array;

    private static final String TAG = GetRotaDetails.class.getSimpleName();
    NfcScannerApplication nfcscannerapplication;
    String callID;
    ListView listView;
    Intent intent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         //set titlebar to carer's name
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        intent = this.getIntent();
        Cursor cursorCarerName = nfcscannerapplication.loginValidate.queryAllFromCarer();
        cursorCarerName.moveToLast();
        String carerTitleName = cursorCarerName.getString(cursorCarerName
                .getColumnIndex(LoginValidate.C_CARER_NAME));
        setTitle(carerTitleName + " is currently logged in");

        array = new  ArrayList<ArrayList<String>>();

        listView = (ListView) findViewById(R.id.getrotadetailslistview);
        setContentView(R.layout.getrotadetailslayout);

        callID = intent.getStringExtra("callIDExtra");
        String[] params = { callID };

        AsyncGetRotaDetails agrd = new AsyncGetRotaDetails();
        try {
            agrd.execute(params).get();
        }  catch (Exception e) {
            e.printStackTrace();
        }

        Log.e(TAG, "array size = " + array.size());

    }// end of onCreate

    private class AsyncGetRotaDetails extends AsyncTask<String, Void, String> {

        ProgressDialog progressDialog;
        String rotaDetails = null;

        @Override
        protected void onPreExecute() {
            progressDialog = ProgressDialog
                    .show(GetRotaDetails.this, "Connecting to Server",
                            " retrieving rota details...", true);

        };

        @Override
        protected String doInBackground(String... params) { 

            try {
                Log.e(TAG, "inside doInBackground");

                rotaDetails = nfcscannerapplication.loginWebservice.getRotaDetail(params[0]);

            } catch (Exception e) {

                e.printStackTrace();

            }
            return rotaDetails;

        }

        @Override
        protected void onPostExecute(String xmlResult) {
            super.onPostExecute(xmlResult);
            if (progressDialog != null)
                progressDialog.dismiss();

                RetrieveExtraDetails red = new RetrieveExtraDetails();
                array = red.getExtraDetails(xmlResult);
                Log.e(TAG, "array from WS = " + array.size());

        }// end of postExecute

    }//end of Async

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:50:17.633

我的猜测是对的。`AsyncTask.get()`方法可能会在方法完成后返回结果`doInBackground()`，但在`onPostExecute()`方法开始之前。因此，从技术上讲，此时您的数组可能仍然是空的。

此外，启动后台线程并阻止主线程是非常奇怪的。重点是什么？

# mysql - 在 m:n 关系中使用 MYSQL 仅选择具有超过 3 个表的特定关系的记录

> ID：12804147
> 
> 赞同：0
> 
> 时间：2012-10-09T16:13:04.947
> 
> 标签：mysql, select

我有 3 张桌子：

卡片：

```
----------------------------
| card_id | customer_name |  
---------------------------- 
```

t_cardsx标签：

```
-------------------------
| ID | card_id | tag_id |  
------------------------- 
```

t_tags：

```
---------------------
| tag_id | tag_name |  
--------------------- 
```

卡片和标签之间的关系是m:n，所以一张卡片可以有多个标签，一个标签可以属于多张卡片。

现在我的问题如下：
我想从 t_cards 中选择那些具有某些标签（或更多标签）的记录，例如带有 tag_ids 33、44 和 55 的标签。
所以我希望所有这些卡都包含在选择中：

*   具有且仅具有这些标签的卡片
*   带有其他附加标签的标签的卡片

我如何使用mysql做到这一点？
**[编辑]**
更具体地说：我想要那些被选中的，有标签 33,44 和 55 （也许还有一些额外的标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:18:47.613

这是你想要的？

```
SELECT * FROM t_cards c INNER JOIN t_cardsxtags ct ON c.card_id = ct.card_id WHERE ct.tag_id IN (33,44,55); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:22:45.433

你是这个意思？

```
SELECT
  t1.*
FROM
  t_cards t1
  INNER JOIN t_cardsxtags t2 ON t2.card_id=t1.card_id
WHERE t2.tag_id IN (33,44,55)
GROUP BY t1.card_id
HAVING (COUNT(t2.tag_id) == 3) 
```

`3`是标签的数量

# c - 如何动态声明二维数组？

> ID：12804150
> 
> 赞同：1
> 
> 时间：2012-10-09T16:13:12.783
> 
> 标签：c, arrays, 2d, dynamic-allocation

> **可能重复：**
> [如何在 C 中使用动态多维数组？](https://stackoverflow.com/questions/917783/how-do-i-work-with-dynamic-multi-dimensional-arrays-in-c)

他们有什么方法可以像一维数组一样动态分配二维数组。

使用

> malloc

或者

> 卡洛克

# solr - Solr - Tika - 解析内容以启用突出显示

> ID：12804161
> 
> 赞同：0
> 
> 时间：2012-10-09T16:13:45.960
> 
> 标签：solr, highlighting, apache-tika

我的理解是，通过 Solr 索引 PDF、Word、Excel 等文档将允许搜索但不能突出显示。我有这个代码来执行索引：

```
 String urlString = "http://localhost:8983/solr"; 
        SolrServer solr = new HttpSolrServer(urlString);
        ContentStreamUpdateRequest up = new ContentStreamUpdateRequest("/update/extract");

        for (MultipartFile file : files) {
            if (file.getOriginalFilename().equals("")) {
                continue;
            }
            File destFile = new File(destPath, file.getOriginalFilename());
            file.transferTo(destFile);
            up.addFile(destFile);

            up.setParam("literal.id", destFile.getAbsolutePath());
            up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);

            try {
                solr.request(up);

            } catch (SolrServerException sse) {
                sse.printStackTrace();
            }

        }

    }
    } catch (IOException ioe) {
      ioe.printStackTrace();   
    } 
```

我已经读过，为了启用突出显示，我需要“存储/解析内容？” 如何才能做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:40:19.797

您将需要修改 Solr 实例的[Schema](http://wiki.apache.org/solr/SchemaXml)文件并`stored="true"`为该`content`字段设置。我假设您正在使用[ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)的默认字段设置，希望针对该字段返回突出显示结果。

请参考[用例的字段选项](http://wiki.apache.org/solr/FieldOptionsByUseCase)以获得矩阵和注释，说明必须启用哪些字段选项才能使突出显示和其他功能正常工作。

# web-applications - 将 ng-show 绑定到 AngularJS 中的选择选项

> ID：12804163
> 
> 赞同：34
> 
> 时间：2012-10-09T16:13:49.820
> 
> 标签：web-applications, angularjs

这很简单。您可以轻松地为几乎任何元素使用显示/隐藏功能`ng-show="myModelName"`。在官方文档中，他们使用复选框来实现这一点。

**问题：** 您可以在选择选项上使用 ng-show 吗？我想根据所选选项显示/隐藏不同的元素。

例如

```
<select ng-model="myDropDown">
      <option value="one">One</option>
      <option value="two">Two</option>
      <option value="three">Three</option>
</select>

<input ng-show="myDropDown='two'" type="text"> 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-09T16:39:46.603

你很接近你会想在这里使用 == 像这样：

```
<input ng-show="myDropDown=='two'" type="text"> 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/EZbfM/)

# c# - 具有递归的重复算法的排列

> ID：12804164
> 
> 赞同：1
> 
> 时间：2012-10-09T16:13:49.657
> 
> 标签：c#, recursion, permutation

我在使用一个功能而不是使用多个功能时遇到了一些麻烦。

如果我想获得像 2^3 这样的重复排列。 [重复排列](http://www.regentsprep.org/Regents/math/ALGEBRA/APR2/LpermRep.htm)

要得到：

```
000
001
101
011
100
101
110
111 
```

我可以有这个功能：

```
 static void Main(string[] args)
    {
        three_permutations(2);
        Console.ReadLine();
    }

    static void three_permutations(int y)
    {

        for (int aa = 0; aa < y; aa++)
        {
            for (int bb = 0; bb < y; bb++)
            {
                for (int cc = 0; cc < y; cc++)
                {
                    Console.Write((aa));
                    Console.Write((bb));
                    Console.Write((cc));
                    Console.WriteLine();
                }
            }
        }

    } 
```

但是然后做4（比如2 ^ 4），我能想到的唯一方法是：

```
 static void four_permutations(int y)
    {
            for (int aa = 0; aa < y; aa++)
            {
                for (int bb = 0; bb < y; bb++)
                {
                    for (int cc = 0; cc < y; cc++)
                    {
                        for (int dd = 0; dd < y; dd++)
                        {
                            Console.Write((aa));
                            Console.Write((bb));
                            Console.Write((cc));
                            Console.Write((dd));
                            Console.WriteLine();
                        }
                    }
                }
            }
     } 
```

但我确信使用递归有更好的方法我只是不知道该怎么做。我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:29:56.317

```
void permutations(string text, int numberOfDigits, int numberOfChars)
{
    if (numberOfDigits > 0)
        for (int j = 0; j < numberOfChars; j++)
            permutations(text + j.ToString(), numberOfDigits - 1, numberOfChars);
    else textBox1.Text += text + "\r\n";
} 
```

并致电：

```
permutations("", 3, 2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T16:27:35.150

重复排列本质上是在另一个基础上计数。

```
public static void Permutations(int digits, int options)
{
    double maxNumberDouble = Math.Ceiling(Math.Pow(options, digits));
    int maxNumber = (int)maxNumberDouble;
    for (int i = 0; i < maxNumber; i++)
    {
        Console.WriteLine(Convert.ToString(i, options).PadLeft(3, '0'));
    }
} 
```

您打印的示例本质上是以 2 为基数从 0 计数到 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T18:12:22.180

没有递归，并且到一个列表供以后使用，不到 10 行。

```
public IEnumerable<List<int>> YieldCombinationsOfN(int places, int digitMin, int digitMax)
{            
    int n = digitMax - digitMin + 1;
    int numericMax = (int)Math.Pow(n, places);

    for (int i = 0; i < numericMax; i++)
    {
        List<int> li = new List<int>(places);
        for(int digit = 0; digit < places; digit++)
        {
            li.Add(((int)(i / Math.Pow(n, digit)) % n) + digitMin);
        }
        yield return li;
    }
} 
```

# c# - Javascript + SOAP + WCF 适用于 Visual Studio 2010 但不适用于 Visual Studio 2008

> ID：12804166
> 
> 赞同：0
> 
> 时间：2012-10-09T16:13:55.357
> 
> 标签：c#, javascript, wcf, visual-studio, soap

我有以下代码在 Visual Studio 2010 WCF 项目中工作。
但是，当我在 Visual Studio 2008 中重新创建项目时，它没有工作，只给了我以下错误 StatuesText“不支持的媒体类型”。
**编辑：**
我发现问题出在 Web.config 文件中，因为它在 Visual Studio 2010 项目和 2008 项目之间有所不同。因此，我已将所有 Web.config 添加到问题中。

使用soap调用WCF服务的javascript如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <script type="text/javascript" src="jQuery/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="jQuery/jquery.xml2json.js"></script>
    <script type="text/javascript" src="jQuery/json2.js"></script>
    <script type="text/javascript">
        function MyRequest() {
            debugger;
            var methodName = "GetData"
            var responseTagName = methodName + "Response";
            var resultTagName = methodName + "Result";
            var sendData = "";
            sendData += '<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">';
            sendData += ' <s:Body>';
            sendData += ' <' + methodName + ' xmlns="http://tempuri.org/">';
            sendData += ' <name>Shlomy</name>';
            sendData += ' </' + methodName + '>';
            sendData += ' </s:Body>';
            sendData += '</s:Envelope>';
            var response = $.ajax({
                type: "POST",
                contentType: "text/xml; charset=utf-8",
                methodName: methodName,
                url: "http://localhost:16109/Service1.svc",
                data: sendData,
                async: false,
                beforeSend: function (req, methodName) {
                    var soapActionURI = "http://tempuri.org/IService1/GetData";
                    req.setRequestHeader("SOAPAction", soapActionURI);
                },
                success: function (xml, type, xhr) {
                    var result = $(xml).find(resultTagName);
                    var resultjson = $.xml2json(result);
                    successHandler(xml.text);
                },
                error: function (xmlHttpRequest, textStatus, errorThrown) {
                    alert(xmlHttpRequest.responseText);
                }
            });
        }

        function successHandler(soapResult) {
            alert(soapResult);
        }
    </script>
</head>
<body>
    <input type="button" onclick="MyRequest()" value="Call WCF via AJAX" />
</body>
</html> 
```

WCF 服务（HelloWorldWCFService）如下：
Service1.svc：

```
<%@ ServiceHost Language="C#" Debug="true" Service="HelloWorldWCFServiceLibrary.Service1" %>
<%@ Assembly Name="HelloWorldWCFServiceLibrary" %> 
```

WCF 网络配置：

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="debug">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="HelloWorldWCFServiceLibrary.Service1" behaviorConfiguration="debug" >
        <endpoint address="mex" binding="wsHttpBinding" contract="HelloWorldWCFServiceLibrary.IService1" />
      </service>
    </services>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

WCF 库（HelloWorldWCFServiceLibrary）如下：
IService.cs：

```
 // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        // TODO: Add your service operations here
        [OperationContract]
        string GetData(string name);
    } 
```

服务1.cs：

```
public class Service1 : IService1
{
    public string GetData(string name)
    {
        return "WCFSoapTest";
    }
} 
```

我已经尝试了几天来弄清楚 2008 解决方案和 2010 之间的区别以及为什么只有 2010 项目有效。但无济于事。有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:43:12.450

在挖掘了有关它的网络后，我能够让它工作。
原因和我想的一样——Web.config 文件
不同的是，在 Visual Studio 2010 中项目是用 .Net4.0 创建的，而 Visual Studio 2008 是用 .Net3.5 创建项目
的，生成的 Web.config 文件是 . Net4.0 与 .Net3.5 中生成的不同
**我需要向服务添加一个带有“basicHttpBinding”的“端点”，以便 WCF 服务与 SOAP 一起工作。**

```
<services>
   <service name="HelloWorldWCFServiceLibrary.Service1" behaviorConfiguration="debug2">
        <endpoint address="" binding="basicHttpBinding" contract="HelloWorldWCFServiceLibrary.IService1"/>
   </service>
</services> 
```

由于[此链接](http://weblogs.asp.net/ricardoperes/archive/2011/03/29/calling-wcf-web-services-from-javascript.aspx)
，我找到了此信息 我的新 Web.config 文件如下：

```
 <?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="debug2">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <!--<endpointBehaviors>
                <behavior name="HelloWorldWCFService.AjaxAspNetAjaxBehavior"/>
            </endpointBehaviors>-->
    </behaviors>
    <!--<serviceHostingEnvironment aspNetCompatibilityEnabled="false"/>-->
    <services>
      <service name="HelloWorldWCFServiceLibrary.Service1" behaviorConfiguration="debug2">
        <!--<endpoint address="" binding="wsHttpBinding" contract="HelloWorldWCFServiceLibrary.IService1"/>-->
        <endpoint address="" binding="basicHttpBinding" contract="HelloWorldWCFServiceLibrary.IService1"/>
      </service>
    </services>
  </system.serviceModel>
  </configuration> 
```

感谢任何试图提供帮助的人！

# objective-c - iOS - 在 performselector 中传递引用

> ID：12804168
> 
> 赞同：1
> 
> 时间：2012-10-09T16:13:59.210
> 
> 标签：objective-c, pass-by-reference, performselector

我有以下问题，无法解决，也许有人知道一个窍门:)

主要对象必须是动态的，因为它可能不同......

应该调用的函数：

```
+ (NSArray *)parseJSONString:(NSString *)theJSONString error:(NSError **)errorPointer 
```

正如代码已经声明的那样，我想解析 JSON。我有几个对象正在实现这个功能，这就是我使用 performSelector 方法的原因：

```
if ([[self.theObject class] respondsToSelector:@selector(parseJSONString:error:)]) {
     NSError *parsingError = nil;
     self.myObjectsCollection = [[self.theObject class] performSelector:@selector(parseJSONString:)
                                                             withObject:utf8ResponseString
                                                             withObject:parsingError];        
} 
```

utf8ResponseString 包含 JSON ...

我已经尝试了以下方法：

```
... withObject:&parsingError -> compile error
... withObject:[NSValue valueWithPointer:&parsingError] -> works until the value will be redirect to the parsingError -> Bad Exec 
```

我已经搜索了一天，甚至不知道如何解决这个问题-请帮助...

谢谢和问候，马修

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T00:37:13.647

为了增加完整性的其他答案，如果您确实需要使用非对象参数动态调用名称仅在运行时知道的方法（事实证明在这种情况下您不需要，但如果您这样做了），那么正确的解决方案是：

*   使用 NSInvocation，或
*   直接调用其中一个`objc_msgSend...`运行时函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:39:53.940

方法族`performSelector:...`只接受对象参数。您想将指针传递给指针，这与对象不同，因此类型系统不允许这样做。幸运的是，您根本不需要`performSelector:`这里。你可以这样做`[[self.theObject class] parseJSONString:utf8ResponseString error:&parsingError]`。

`performSelector:`只有在运行时才知道要发送的消息时才需要使用。如果您没有将变量作为第一个参数传递，您可能不需要它。

但是，如果您确实需要这样做，您需要做的是编写一个“包装器”方法，该方法接受一个对象（例如，一个 NSValue）并使用非对象类型调用真正的方法，然后您将用你的 . 调用包装器而不是真正的方法`performSelector:withObject:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:40:51.463

为什么不直接调用类上的方法呢？您已经检查过它是否可以响应该方法。所以直接调用方法。

```
[[self.theObject class] parseJSONString: nil error: &error]. 
```

顺便说一句，您可以进行简单的策略模式交换。即使对象响应器是在运行时定义的，消息调用也不是。如果编译器警告您，则转换为 id。因为我不确定您是否可以在类方法上分配协议。（但也许你可以）。

您甚至可以将所有对象解析器嵌入到代理解析器类中，以便在编译时对其进行定义。

可以肯定的是，您可以将指向指针对象 (**erorr) 的指针传递给 performSelector:: (因为运行时不是占卜者)。如果你真的需要，做一个简单的c函数callBack？

# c# - ParseExact 和 CurrentCulture？

> ID：12804169
> 
> 赞同：0
> 
> 时间：2012-10-09T16:14:07.240
> 
> 标签：c#, .net, datetime

*我总是看到这个代码示例，但不知道何时使用 which ：*

假设我有一个要解析的日期：`13 December 2011`

它可以用

```
 var g=DateTime.ParseExact("13 December 2011","d MMMM yyyy",CultureInfo.GetCultureInfo("en-US"),DateTimeStyles.None ); 
```

或通过

```
 Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US"); 
 var g=DateTime.ParseExact("13 December 2011","d MMMM yyyy",null,DateTimeStyles.None ); 
```

两者都提供相同的结果。

我什么时候应该使用 which ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:16:37.177

第一个示例将使用该文化进行特定操作。

第二个示例将更改正在运行的线程的区域性，影响该操作**以及受当前区域性影响的后续操作，** 直到线程区域性发生更改。

因此，请使用适合您情况的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:17:09.453

该解析的结果是相同的，但如果您设置线程的当前区域性，这也会影响您稍后执行的任何其他区域性相关操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:19:49.630

第一行将使用 ParseExact 方法中指定的区域性作为第二个参数。即使线程的文化不同，这也会解析 en-US 文化中的日期。第二个将更改线程的文化，并且对 ParseExact 的调用将使用在上一行中设置的新文化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T16:17:01.280

它应该是第一个。至于第二个，您在当前线程中更改了应用程序的当前文化可能会导致错误，如果您使用不同的文化与`US`.

# c++ - OFDM 频谱整形加窗

> ID：12804173
> 
> 赞同：1
> 
> 时间：2012-10-09T16:14:18.627
> 
> 标签：c++, signal-processing, windowing

我正在 OFDM 中进行频谱整形，因此我在 IFFt 和保护间隔插入之后，在发送器链末端的信号上应用升余弦滤波器，就在数模转换器之前并通过我的链路发送它（在我的情况下是光纤）。

我有我的 C++ 系统，频谱整形之前的输出是一个复杂样本块（每 256 个代表一个 ofdm 符号），我想将它与我的 RC 滤波器相乘，该滤波器是及时函数，

```
w(t) = 0.5 + 0.5*cos(pi +pi*t/(ß*T)) for 0<t>ß*T
w(t)= 0.5 + 0.5*cos((t-T)*pi/(ß*T))   for T<t<(1+ß)T
`w(t)=1; for the middle part 
```

ß 是滚降因子

我如何在离散化的复杂值系列上应用该拟合器，我没有及时将它作为函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:59:35.203

将滤波器函数转换为其频谱并将其应用于您的[OFDM 发射机中的 OFDM 符号](http://blog.ektel.com.np/2012/11/wlan-ieee-802-11a-ofdm-tutorial/)

# sql - 使用来自 sql 查询的 ajax 幻灯片的 DISQUS.reset

> ID：12804175
> 
> 赞同：1
> 
> 时间：2012-10-09T16:14:20.250
> 
> 标签：sql, ajax, disqus

下面列出的代码是来自 DISQUS 注释的重置函数，以允许它在 ajax 网站中工作。我正在尝试将评论与从 sql 中提取的图像幻灯片一起使用。`$my_indentifier`是一个变化的值，它链接到正在显示的图像。当显示下一个图像时，我希望该`onclick`功能重置 DISQUS 评论。因此，每个评论区域都特定于每个图像。任何人都可以帮助或建议另一种系统或方法来做我想做的事。

```
<script type="text/javascript">
    reset = '<?php echo $my_identifier; ?>';
    var reset = function(){

        DISQUS.reset({
          reload: true,
          config: function () {
            this.page.identifier = '<?php echo $my_identifier; ?>';
            this.page.url = 'http://example.com/#!<?php echo $my_identifier; ?>';

          }
        });
    };

    </script>
<button onclick=reset();>Reload Disqus 1</button>    
<div id="disqus_thread"></div>
    <script type="text/javascript">

        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
             // required: replace example with your forum shortname

        var disqus_shortname = 'example';
        var disqus_identifier = 'newidentifier';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> 
```

我尝试了很多变化。当使用 ajax 引入每个图像时，我希望所有这些都在运行中完成，但按钮方法是我最接近成功的方法。

非常感谢

# node.js - 在具有 3rd 方休息服务的节点上使用骨干网

> ID：12804181
> 
> 赞同：1
> 
> 时间：2012-10-09T16:14:35.913
> 
> 标签：node.js, backbone.js

我正在尝试从 twitter 之类的宁静服务中提取数据。我以前在客户端成功地做到了这一点。现在我正在尝试在服务器上执行此操作，我似乎无法让主干正确加载。当我 require("backbone") 并加载文件时，"this" 是模块，但从主干.js 的第 15 行的注释来看，它期望它也是"global" 是否有一种特殊的方法来加载这个文件“this”中的全局​​参考

这是来自主干.js 文件的评论（第 13-15 行）

```
 // Save a reference to the global object (`window` in the browser, `global`
  // on the server).
  var root = this; 
```

但就像我之前说的，它不是“全局的”，它只是一个空的 [Object]。所以，我至少看到了两种可能性。

1.  以将“this”设置为全局的方式加载backbone.js 文件。这可能吗？
2.  将backbone.js 文件更改为“var root = global”

#1 可能吗？我错过了一些可能性吗？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:29:34.360

您是否像这样安装了骨干：

```
npm install backbone 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:54:27.397

我通过使用 setDomLibrary 函数解决了这个问题。

```
Backbone.setDomLibrary(require('jquery')); 
```

# matlab - 在 Matlab 中提取和存储矩阵

> ID：12804186
> 
> 赞同：2
> 
> 时间：2012-10-09T16:15:02.340
> 
> 标签：matlab, matrix, extraction

我有一个包含 380 个矩阵的单元格数组 C，并希望将它们放入 3 维矩阵 M 中，这样 C 的第一个 20 个矩阵将位于 M(:,:,1) 中，第二个 20 个矩阵（从 21 到 40）在 M(:,:,2) 等。

编辑：我想按列连接它们。

我可以在 Matlab 的一个循环中做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T17:01:46.440

你甚至不需要一个循环：

```
%# C: cell array with 380 elements

%# reshape C to 20x1xn
C = reshape(C,20,1,[]);

%# create matrix M
M = cell2mat(C); 
```

# ruby-on-rails - 将 XML 直接输出到 RAILS 中的不同客户端

> ID：12804187
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:15:03.993
> 
> 标签：ruby-on-rails, xml, printing

我有一个启用 xml 的标签打印机，它将响应特定的 xml 流。我已经在 Rails 中创建了适当的视图/路由来生成 XML，但是 XML 总是被发送回我的浏览器，即使我更改了 @_request.env['REMOTE_ADDR']。我需要的是发送到打印机的 XML。

有没有一种简单的方法可以做到这一点，还是我以错误的方式接近它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:50:21.177

我试图实现的目标（相对于我所要求的）的答案在于 Ruby 中的套接字库。我需要简单地打开一个到打印机的 tcp 套接字（到 RAW 端口），然后执行我需要发送的 xml 字符串的 put：

```
data = 'xml stream goes here'
hostip = '10.3.1.40'
port = 9100
labelPrinter = TCPSocket.open(hostip, port)
labelPrinter.puts(data)
labelPrinter.close 
```

其余的按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:48:45.157

使用 ruby​​ 的 STDLIB [http://apidock.com/ruby/Net/HTTP](http://apidock.com/ruby/Net/HTTP)

或可用于 ruby​​ 的众多 http 库之一：http: [//bit.ly/RNCClq](http://bit.ly/RNCClq)

# google-app-engine - 如何通过webapp2中的requests.post（url，data）发送图像的位

> ID：12804189
> 
> 赞同：0
> 
> 时间：2012-10-09T16:15:09.923
> 
> 标签：google-app-engine, webapp2

我的网址太长，它给我带来了错误：

`ConnectionError: HTTPConnectionPool(host='xxxx', port=8086): Max retries exceeded with url: /user/profile?nick=nick&name=xxx&city=xxx&gender=x&profile_image=%FF%D8%FF%E0%00%10JFIF%00%01%01%01%00%60%00%60%00%00%...`

我正在将图像上传到文件 iput 并尝试通过 requests.post 传递它，但它抛出了上面的错误。

我的代码是这样的：

```
profile_image = self.request.get("f_profile_image")
    data = {"id": id_user,
                "nick": nick,
                "name": name,
                "last_name": last_name,
                "gender": gender,
                "profile_image": profile_image}

    d = requests.post("http://myhost:8086/user/profile",params=data)
    self.response.out.write(d.text) 
```

我在这里得到了**profile_image = self.request.get("f_profile_image")**我从表单发送的图片，并尝试将其发送到我的服务器以存储在数据库中。但是**d = requests.post("http://myhost:8086/user/profile",params=data)**犯了我上面提到的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:59:24.123

嗨，伙计们，发生错误是因为它没有在我的模型中引入良好的数据类型，后来他们理解错误消息对我没有多大帮助，我相信错误在其他地方也有，感谢您的反馈。

# iphone - 在字符串中存储单词的优雅算法

> ID：12804191
> 
> 赞同：4
> 
> 时间：2012-10-09T16:15:35.560
> 
> 标签：iphone, ios, algorithm, cocoa-touch

我有一个应用程序，用户在其中将文本输入到自定义文本区域。如果用户点击文本区域，它会将光标移动到他们刚刚点击的点，从而使他们能够在文本区域的任何位置插入/删除文本。限制是文本区域的开头不能有空格，并且文本区域的任何点都不能有连续的空格（也没有返回键来创建新行）。文本区域中的文本存储在一个名为“text”的属性字符串中。

我需要开发的是一种有效的算法，可以跟踪文本区域中最宽的单词。当我说最宽时，我指的不是字符宽度，而是我通过将文本存储在 a 中`CTFrameRef`并获取其大小来计算的实际像素宽度。

我想出了很多蛮力的方法来实现这一点，但我想知道是否有人知道在时间和空间上实现这一目标的最有效方法是什么？我显然需要某种数据结构来跟踪每个单词及其长度，并且我考虑将所有单词存储在一个数组中并在插入或删除文本时更新它们，但想知道是否有人能想到更多最佳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:30:46.347

如果您可以找到（或编写）包含该操作的一个，则可以使用[min-heap](http://en.wikipedia.org/wiki/Heap_(data_structure))来执行此`modify-key`操作。您将需要两者`increase-key`，`decrease-key`但好消息是两者都可以在 O(log N) 中实现。

# c# - 验证码处理程序在会话过期中存储值

> ID：12804200
> 
> 赞同：0
> 
> 时间：2012-10-09T16:16:00.063
> 
> 标签：c#, asp.net, session, captcha, httphandler

我在 asp.net 中尝试使用验证码处理程序时遇到困难，任何帮助将不胜感激。想象一下我们有这样一个处理程序：

```
public void ProcessRequest(HttpContext context)
{
    var text = generateText();
    using (var image = generateImage(text))
    {
        context.Response.Clear();
        context.Response.ContentType = "image/jpeg";
        context.Session.Add("captcha", text);
        image.Save(context.Response.OutputStream, ImageFormat.Jpeg);
    }
} 
```

然后在一些 default.aspx 我们放：

```
<img src="<%=CaptchaImageUrl %>"/>
<p><%=Context.Session["captcha"]%></p> 
```

这意味着我们想显示验证码图像并检查存储在会话中的验证码值。但问题是 default.aspx 中的当前会话值在验证码处理程序方面已过时，并且

```
<p><%=Context.Session["captcha"]%></p> 
```

将始终返回以前的验证码值。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:25:51.563

仅当浏览器请求图像时，您才将验证码存储在会话中。但是您在页面中显示会话值，这发生在从浏览器请求图像之前。

这就是您在页面中看到上一个验证码的原因。

要解决此问题，我建议将 移动`generateText`到页面并让页面将此值存储在会话中。处理程序只会从会话中选择值，构建图像并渲染它。

# r - 是否有用于解析地球物理“Log Ascii 标准”文件（.las 文件）的 R 包？

> ID：12804203
> 
> 赞同：8
> 
> 时间：2012-10-09T16:16:11.057
> 
> 标签：r, file-format, log-ascii-standard

是否有可以读取 .las 文件的 R 包，即 Schlumberger [Log Ascii 标准](http://en.wikipedia.org/wiki/Log_ASCII_Standard)文件？
它应该能够读取 las 2.0 文件。

请注意：

*   我不是在这里谈论 LIDAR .las 文件。
*   我说的是地球物理井眼记录文件（不是计算机应用程序、恶魔等的记录文件）

在互联网上搜索 R 和 Las 以及 Logfiles 给我个人带来了太多的红鲱鱼。

来自评论的更新：

我也在考虑可以使用 R 语言绑定的脚本或 API。

到目前为止，我已经找到了以下脚本：

*   [las2witsml](https://github.com/wellstorm/las2witsml) - 一个红宝石脚本
*   [Text-LAS-Parser-0.01](http://cpansearch.perl.org/src/KYOMAIODP/Text-LAS-Parser-0.01/lib/Text/LAS/Parser.pm) - perl 脚本

但是，到目前为止，所有这些脚本对我来说似乎都不是很成熟。

Schlumberger还有一个免费软件包[“Log Data Toolbox](http://www.slb.com/services/characterization/software/data_utilities/log_data_toolbox.aspx) ”，但它只能在 Windows 下运行，并且可能与非英语版本的 Windows 存在兼容性问题（如果我没记错的话）。

Kansas Geological Survey 提供了一个[复杂的 java 小程序](http://www.kgs.ku.edu/stratigraphic/PROFILE/applet.html)，但是对于大型 .las 输入文件来说它有点迟钝。

有一个[ruby​​ 项目](https://github.com/gpcarmo/cwls-las-reader)和一个[python 项目](http://www.scipy.org/Cookbook/LASReader)。此外，请参阅[此链接](http://pubs.usgs.gov/of/2007/1142/LASfiles/LASfiles.zip)以获取一组不错的示例 las 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-28T15:36:13.327

回答我自己的问题：

现在有一个 python 库，[lasio](http://pythonhosted.org/lasio/)，它工作得很好。它可以[从 R 调用](http://www.r-bloggers.com/integrating-python-and-r-part-ii-executing-r-from-python-and-vice-versa/)，也许是通过[system2()](https://stat.ethz.ch/R-manual/R-devel/library/base/html/system2.html)函数；并且可以将输出提取到 R 数据结构中。另一种可能性是将 lasfile-objects 序列化为 JSON，保存到文件并从 R 重新导入。也许我会用代码示例扩展这个答案，但我现在没有时间。

*   [github](https://github.com/kinverarity1/lasio)上的[lasio](http://pythonhosted.org/lasio/)
*   [lasio 示例](http://pythonhosted.org/lasio/usage.html#example-ipython-notebooks)- 笔记本底部的绘图

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-02T19:13:47.627

2021年答案：

## 拉斯托工具

[lastools](https://github.com/Gitmaxwell/lastools)是 github 上的一个 R 包，用于读取 Log Ascii Standard v2.0 文件。

它还提供基本的绘图，并写出 las 文件格式。

从 r 命令行安装（也可以通过其他方式安装）：

```
devtools::install_github("Gitmaxwell/lastools") 
```

加载 lastools、读取 las 文件并在 R 中显示内容的示例：

```
library(lastools)
las_file <- "your-sample.las"
las <- read_las(las_file)
print(las) 
```

## 激光雷达

[lasr](https://github.com/donald-keighley/lasr) （自 2021 年初开始进行 beta 测试）Lasr 主要设计用于以高速和大批量导入 LAS 文件。

要从 r 命令行安装：

```
if (!require('devtools')) install.packages('devtools')
library(devtools)
install_github('https://github.com/donald-keighley/lasr') 
```

在 R 中加载 lasr、读取和显示 las 文件内容的示例：

```
library(lasr)
las = read.las(system.file("extdata", "las_3_cwls.las", package = "lasr"))

#Display the WELL section
head(las$well, 10) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-13T17:27:56.263

我已经为我的个人（适合我的目的）使用了井日志 las2 文件阅读器。它有 2 个步骤 1\. 创建要读取和附加的 *.las 文件列表 2\. 读取 *.las 文件的数量并附加到单个数据帧中。这两个代码都在 2016 年从标准商业包创建的一组 *.las 文件上进行了测试 - 在 R 3.2.4（64 位）下的 Windows 10 中

## Code-1 读取和创建 *.las 文件的简单文件列表以运行 Code-2

```
# Read the file having list of well-log LAS files
# Create a R-Object [wellname, path, filename] for LAS reader
# Create filelist from DOS prompt dir *.las > filelist.dat
# G Srikanth 29-May-2016
#
library(stringr)
defaultworkdir <- readline("What is the file path? ")
setwd(defaultworkdir)
welllistfile <- readline("What is the well list file? ")
listfilelines <- readLines(con = welllistfile, skipNul = TRUE)
#
#      search for "Directory of " to get the LAS data folder = lasfolder
#      search for "File(s)" to get the number of files = nlasfiles, linenumber
#      the data file names are before the "Files(s)" line = lasfilenames() char vector of length nlasfiles
#
oneline <- listfilelines[grep("Directory of ",listfilelines)]
lasfilepath <- sub(" Directory of ","",oneline)
oneline <- listfilelines[grep(" File",listfilelines)]
# modified from http://stackoverflow.com/questions/2261079/how-to-trim-leading-and-trailing-whitespace-in-r
numberoflasfiles <- as.numeric(word(sub("^\\s+", "", oneline),1))

# file names occur from - to in the DOS list read-in
fromline <- as.numeric(grep(" File",listfilelines)) -numberoflasfiles

# extract the last word from the fromline - numberoflasfiles times and load into suitable data structure
#     tail(strsplit(oneline,split=" ")[[1]],1)   --- taken from 
#     http://stackoverflow.com/questions/17658216/extract-last-word-in-string-in-r

lasfile <- c(1:numberoflasfiles)
for (n in 1 : numberoflasfiles) 
{
  oneline <- listfilelines[fromline]
  lasfile[n] <- tail(strsplit(oneline,split=" ")[[1]],1)
  fromline=fromline+1
}
# print (lasfile)
rm(fromline)
lasfile<- paste(lasfilepath,"\\",lasfile,sep="")
# print(lasfile)
# temp <- readLines(con=lasfile[1], skipNul = TRUE) 
#
save(lasfile,file="lasfiles.Rdat") 
```

* * *

## Code-2 读取许多 *.las 文件并构造单个数据框

```
# Read the list of lasfiles to read
# open each las file and get data

# G Srikanth 29 May 2016

#                                                   install.packages("data.table")
# 1\. set working directory and read the file list
library(stringr)
library(data.table)
defaultworkdir <- readline("What is the file path? ")
setwd(defaultworkdir)
lasfilelist <- readline("What is the well list file? ")
load(lasfilelist)
welllogdata <- data.frame()

#     load("lasfiles.Rdat")    name of saved file
#     determine number of well files
nwells <- length(lasfile)
uwi<-c(1:nwells)
# 2\. Main read loop for each well las file in directory
for (wellno in 1:nwells)
{
  # 2a. Get uwi
  # 2b. Get curve names
  # 2c. Read the curve data

  # LAS files have all the headers within first 100 lines
  # read 100 lines into a vector
  headerlines <- readLines(con = lasfile[wellno], n=100L, ok=TRUE, skipNul = TRUE)
  # extract uwi  NOTE - many las files write only proper well name and not UWI. in such case replace UWI with WELL in next line
    oneline <- headerlines[grep(" UWI",headerlines)]
    # remove multiple spaces with gsub() extract 3rd word with word()
    #     ref: http://rfunction.com/archives/2354
    uwi[wellno]<-word(gsub("\\s+"," ",str_trim(oneline)),3)
  # extract curve information and data location
    #locate ~A  in the headerlines. This has the log names.
    oneline <- headerlines[grep("~A",headerlines)]# line having curves names
    oneline <- gsub("\\s+"," ",str_trim(oneline)) # trim leading trailing and extra blanks
    ncurves <- str_count(oneline, " ")
    # ncurves <- str_count(gsub("\\s+"," ",str_trim(headerlines[grep("~A",headerlines)]))," ")
    # The next record in data file is numeric las data.
    dataline <- as.numeric(grep("~A",headerlines)+1)
    curvenameline <- as.numeric(grep("~A",headerlines)- ncurves) 
    # curve names start at curvenameline and contine for ncurves. The first word in each line is curve name
    logname <- c(1:ncurves)
    for (nc in 1:ncurves)
    {
      logname[nc] <- word(gsub("\\s+"," ",str_trim(headerlines[curvenameline+(nc-1)])),1)
    }
  # read the data matrix from the line - dataline in the well las file
    # null value used in the las file
    lasnull <- word(gsub("\\s+"," ",str_trim(headerlines[grep(" NULL",headerlines)])),3)
    temp<- read.table(lasfile[wellno], header=F, na.strings=lasnull, skip=dataline-1, col.names = logname)
    temp <- merge(temp,uwi[wellno])
    names(temp) <- c(logname,"uwi")
  # concatenate this data into a single data-frame. use the lognames to merge.
    if (wellno == 1) welldata <- temp else welldata <- rbind.fill(welldata, temp)    #rbind doesnt merge with different names, Thanks to stackoverflow!
        # to clean the logname vector between files
    rm(logname)
}
save(welldata,"welldata.Rdat") 
```

* * *

希望有用！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-23T16:48:18.763

*.las 文件示例：

```
…
…
…
#MNEM           .UNIT                  API CODE            :DESCRIPTION
#----            ------          --------------            -----------------------------
DEPT            .ft                                        :                                                        Station Depth
INCL            .deg                                       :                                                        Hole inclination
AZIM            .deg                                       :                                                        Measured Azimuth
#-------------------------------------------------------------
#        DEPT         INCL         AZIM
~ASCII
0.00         0.00         0.00
36.00         0.33       123.98
126.00         0.17       183.28
218.00         0.19       202.04
308.00         0.24       191.24
398.00         0.21       198.60
495.00         0.02       179.55
…
…
… 
```

读取文件时的目标是忽略文件标题并仅复制`(~ASCII)`行后的数据以及每个列标题所以我们复制所有文件，并逐行搜索，直到到达（~ASCII）行，然后我们复制它之前的行（标题）和它之后的所有内容（数据），然后我们删除（~ASCII）行。

请注意，我们`(#)`从标题行中删除了该符号。

最后一步是将数据转换为表格，然后将其写入 csv 文件。

完整代码：

```
#remove all variables (cleanup)
rm(list=ls(all=TRUE))
gc()
MWD_filePath="MWD_file.las";
conn=file(MWD_filePath,open="r")
Ascii_txt=readLines(conn);
mwd_txt = 0;

for (i in 1:length(Ascii_txt)){
    if(Ascii_txt[i] == "~ASCII"){
    mwd_txt <- Ascii_txt[(i-1):length(Ascii_txt)]

    # remove (#) from the header line
    substr(mwd_txt[1], 1, 2) <- " ";

    # remove "~ASCII" line
    mwd_txt <- mwd_txt[-2]

    break;
    }

}
close(conn)
#mwd_txt;
mwd <- read.table(header = TRUE, text=mwd_txt);
#head(mwd)

#write the mwd data to file ... in CSV format
mwd_csv_file <- paste(MWD_filePath, ".csv", sep="");
write.csv(mwd, file = mwd_csv_file); 
```

# jquery - jquery 对话框有效，但在 Firefox 和 IE 中添加按钮时无效，在 Chrome 中有效；固定见评论

> ID：12804204
> 
> 赞同：0
> 
> 时间：2012-10-09T16:16:14.903
> 
> 标签：jquery, modal-dialog

我有一个工作对话框，但是当我尝试添加代码以显示“确定”按钮时，它无法工作。没有 javascript 错误。对话框一开始是用 CSS 隐藏的。

...

中的 javascript`document.ready`

作品...

```
var downtimeDiv = $("#downtimeDialog");

    downtimeDiv.dialog({        
        width: 770,
        height: 250,
        modal: true,
        title: "Downtime Scheduled",
        autoOpen: false,
        resizable: false,
        draggable: false,
        position: ['center', 'top'],
        closeOnEscape: false,
        open: function(event, ui) { $(".ui-dialog-titlebar-close", ui.dialog).hide(); }
    });
downtimeDiv.show();    
downtimeDiv.dialog("open"); 
```

不工作...

```
var downtimeDiv = $("#downtimeDialog");

    downtimeDiv.dialog({        
        width: 770,
        height: 250,
        modal: true,
        title: "Downtime Scheduled",
        autoOpen: false,
        resizable: false,
        draggable: false,
        position: ['center', 'top'],
        closeOnEscape: false,
        open: function(event, ui) { $(".ui-dialog-titlebar-close", ui.dialog).hide(); },
        buttons: {"OK": function() {$(this).dialog("close");}}
    });
downtimeDiv.show();    
downtimeDiv.dialog("open"); 
```

firebug 没有显示任何错误，但对话框无法显示，它的 css 保持显示：无；

谢谢你的帮助。

好的，我发现了问题。我错过了一个 javascript 包含。

添加[http://code.jquery.com/jquery-1.8.2.js](http://code.jquery.com/jquery-1.8.2.js)

修复了 Firefox 和 IE 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:24:35.477

您的代码中有语法错误。

在按钮后添加右括号

```
buttons: {"OK": function() {$(this).dialog("close");}} 
```

使用[推荐的语法](http://docs.jquery.com/UI/API/1.8/Dialog#option-buttons)：

```
buttons: [
    {
        text: "Ok",
        click: function() { $(this).dialog("close"); }
    }
] 
```

请注意`[`和`]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:28:23.937

`}`我认为您错过了按钮元素末尾的关闭。

你的

```
buttons: {"OK": function() {$(this).dialog("close");} 
```

正确的

```
buttons: {"OK": function() {$(this).dialog("close");}} 
```

# asp.net - ASP.NET MVC4 捆绑单个文件

> ID：12804206
> 
> 赞同：9
> 
> 时间：2012-10-09T16:16:20.420
> 
> 标签：asp.net, asp.net-mvc-4, bundling-and-minification

有没有办法使用 MVC4 中的新捆绑功能捆绑单个文件？我知道捆绑单个文件没有多大意义，但我想使用服务器端缩小并让 MVC 将哈希附加到 URL 的末尾以用于缓存目的。

我已经尝试过，`@Scripts.Url("~/Scripts/myscript.js")`但它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T16:19:05.303

好吧，在你的包配置中定义一个只包含这个文件的包：

```
bundles.Add(
    new ScriptBundle("~/bundles/myscript").Include("~/Scripts/myscript.js")
); 
```

然后通过按名称引用它在您的视图中使用它：

```
@Scripts.Render("~/bundles/myscript") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T22:04:46.837

我需要这样的东西，这就是我想出的

在视图上，我可以使用 HTML Helper 添加脚本或样式。这些都将接受 n 个参数。

```
@Html.Style("~/Styles/someFile.css")
@Html.Script("~/Scripts/foo.js", "~/Scripts/bar.js") 
```

所以我创建了一个扩展来为我处理这个问题。这是班级的样子。

```
using System.Linq;
using System.Web.Optimization;

namespace System.Web.Mvc
{
    public static class HtmlHelperExtensions
    {

        public static IHtmlString Script(this HtmlHelper helper, params string[] urls)
    {
        var bundleDirectory = "~/Scripts/bundles/" + MakeBundleName(".js", urls);
        var thisBundle = new ScriptBundle(bundleDirectory).Include(urls);
        BundleTable.Bundles.Add(thisBundle);

        return Scripts.Render(bundleDirectory);
    }

    public static IHtmlString Style(this HtmlHelper helper, params string[] urls)
    {
        var bundleDirectory = "~/Styles/bundles/" + MakeBundleName(".css", urls);
        var thisBundle = new StyleBundle(bundleDirectory).Include(urls);
        BundleTable.Bundles.Add(thisBundle);

        return Styles.Render(bundleDirectory);
    }

    private static string MakeBundleName(string type, params string[] urls)
    {
        var bundleSections = new List<string>();

        foreach (var item in urls)
        {
            bundleSections.Add(item.Replace("~/", "").Replace("/", ".").Replace(type, ""));
        }

        return string.Join("+", bundleSections.ToArray());
    }
    }
} 
```

* * *

# 注意事项

这会在捆绑“虚拟目录”存在的地方进行硬编码。因此，如果您的文件中有任何图像或其他任何内容的相对路径，它们就会中断。对于我们的用例，这对我们来说现在很好。

捆绑包名称是自动生成的。同样，这对我们有用，但可能会更好。我可以看到一个简单的改进，您必须提供一个包路径和名称，其语法如下：`@Html.Script("~/bundles/myBundleName","~/Scripts/foo.js", "~/Scripts/bar.js")`

* * *

我很高兴听到任何人可能对此进行的任何改进。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T19:41:20.670

我不知道，如果我说得对，但是您可以随时添加捆绑包，只需将其添加到捆绑包集合中：

```
BundleTable.Bundles.Add(new ScriptBundle("~/Scripts/myBundleName").Include(
            "~/Scripts/myscript.js"
            )); 
```

我不确定您打算如何在客户端包含捆绑包，但是在注册捆绑包后，您可以使用以下代码获取缩小脚本文件的 url：

```
string url = BundleTable.Bundles.ResolveBundleUrl("~/Scripts/myBundleName"); 
```

就我而言，我只是通过 ajax 请求获取此 url 并在客户端创建一个脚本标记。这样脚本文件将被缩小，并且 url 带有一个哈希码，因此浏览器应该缓存它，并且当包被更改时应该加载更新的版本。

我希望这是你打算做的。

# c# - 优化linq语句

> ID：12804207
> 
> 赞同：0
> 
> 时间：2012-10-09T16:16:22.283
> 
> 标签：c#, linq

我有下面的 linq 语句。没有循环我怎么能解决这个问题。这是一个标签系统，我只想要那些在“myints”中具有带有 ids 的标签的练习

```
int[] myints = {1,2};
  foreach (int tagid_temp in myints)
  {
    ExerciseByTagId = 
        (from exercise in context.ExerciseSet
         where context.ItemsTagsSet
               .Where(a => a.TagsId == tagid_temp)
               .Select(a => a.ExerciseId).Contains(exercise.Id)
      select exercise);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:24:40.537

我在一个非常相似的数据库结构上测试了它，它产生了一个 SQL 语句：

```
var selected = new [] {1,2};

var ex = from ts in context.ItemsTagsSet
         where selected.Contains(ts.TagsId)
         group ts by ts.ExerciseId into g select new
         {
            ExerciseId = g.Key,
            Count      = g.Count()
         } into x
         where x.Count == selected.Length
         join e in context.ExerciseSet on e.ExerciseId equals x.ExerciseId 
         select e; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:24:53.337

根据您的查询猜测一点，但是像这样？

（**编辑**——意识到如果找到多个匹配标签，我的第一个示例将返回重复的练习）

~~int[] myints = {1,2};~~

 ~~```
ExerciseByTagId = 
    context.ExerciseSet
           .Where(e => context.ItemsTags
                              .Any(t=> t.ExerciseId == e.Id 
                                         && myints.Contains(t.TagsId)  
                 ); 
```~~  ~~要获取所有相关项目都在列表中的项目：

```
int[] myints = new int[] {1,2};

var ExerciseByTagId = 
    context.ExerciseSet
    .Where(
        e => context.ItemsTags
                    .Where(t=> t.ExerciseId == e.Id) 
                    .All(t => myints.Contains(t.TagsId))  
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:08:50.517

`Contains()`is pretty close to what you need, so use your own `ContainsAll()` function:

```
public static bool ContainsAll<T>(this IEnumerable<T> sequence, params T[] matches)
{
    return matches.All(value => sequence.Contains(value));
} 
```~~

# iphone - 当活动方案是设备时找不到CoreFoundation.h'文件

> ID：12804208
> 
> 赞同：0
> 
> 时间：2012-10-09T16:16:23.097
> 
> 标签：iphone, ios6, core-foundation

我想为 ios6 和视网膜 5 英寸更新一个旧应用程序！该应用程序在模拟器上运行良好，但是将活动方案设置为我的设备时它失败了。试图在两个小时内解决问题，但没有运气！有小费吗？

![在此处输入图像描述](../Images/a1c963c185f2d89637d0341ece071ba1.png)

![在此处输入图像描述](../Images/4a45058d1c71b2c2605b67563f997d21.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:12:10.570

转到 Projects->Target->Build Phases->Link Binary with Libraries，并确保 CoreFoundation.framework 在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:49:29.543

SET 始终搜索用户路径 = YES 为 med 工作

# java - 以整数形式返回哈希集值

> ID：12804210
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:16:29.447
> 
> 标签：java, int, return, loops, hashset

简单的问题。我正在遍历 Java 哈希集并希望将每个值作为 int 返回。我一直在使用下面的代码来至少打印这些值。该函数是一个类方法，'neighbors' 是类中的一个哈希集。

```
 neighbors = new HashSet<Integer>();

      void get_n(){
        Iterator it = neighbors.iterator();
        while(it.hasNext()){
          print(it.next()); // ideally, I would change this
        }
      } 
```

如何修改代码以便我可以将每个元素作为 int**返回**（而不是打印）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:19:30.687

不确定你想要什么，但这是一个起点：

```
List<Integer> get_n(){
    Iterator it = neighbors.iterator();
    List<Integer> list = new ArrayList<Integer>();
    while(it.hasNext()){
      list.add(((Number)it.next()).intValue());
    }
    return list;
} 
```

你`Iterator it`是无类型的（没有泛型类型），所以我假设你需要向下转换。但是，如果您`neighbors` `HashSet`实际上是`HashSet<Integer>`，那么您的代码可以简化为：

```
new ArrayList<Integer>(neighbors); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:20:03.093

如果您使用泛型化的[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)，那么迭代器的类型将相似，并且 it.next() 将返回正确的类型。

这是一个很长的说法，如果你声明你的`HashSet`as`HashSet<Integer>`那么迭代器将返回一个 (boxable) `Integer`。您将能够返回`Integer`或`int`通过[拳击](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)的魔力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:22:48.317

哈哈

你可能想要'yield'之类的东西

尝试 lombok-pg [https://github.com/peichhorn/lombok-pg/wiki/Yield](https://github.com/peichhorn/lombok-pg/wiki/Yield)

# qt - Qt::QueuedConnection 每次事件循环迭代最多调用一次

> ID：12804214
> 
> 赞同：3
> 
> 时间：2012-10-09T16:16:37.583
> 
> 标签：qt, signals, signals-slots, slot

考虑以下情况：

```
class Foo : public QObject {
  Q_OBJECT
  public:
    void set_A(int a) { emit updated(this); } 
    void set_B(int b) { emit updated(this); }
  signals: 
    void updated(Foo*);
}

Foo f;
connect(&f, SIGNAL(updated(Foo*)), something, SLOT(do_something_heavy(Foo*)), Qt::QueuedConnection)

void bar() { 
  f.set_A(5); f.set_B(6);
} 
```

如何确保只有一个信号到达`do_something_heavy()`呼叫？

我希望能够使用`set_A()`和调用`do_something_heavy()`，但是在调用 set_A 和 set_B 的情况下，我不想`do_something_heavy()`两次。

我可以为那个特定的发送者/接收者对取消所有剩余的未完成信号的队列吗？最好在`emit`，而不是在接收，但这只是为了简洁和封装 - 我希望`updated(Foo*)`表示需要更改本地接收器的状态，如果连接排队，语义是这样的，我不需要更新发生两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-15T17:16:17.367

我发现使用 QTimer 组合信号调用很有用。

```
Foo f;
QTimer timer;
timer.setInterval(0); // this could be set to whatever.
timer.setSingleShot(true);

connect(&f, SIGNAL(updated()),
        &timer, SLOT(start()));
connect(&timer, SIGNAL(timeout()),
        something, SLOT(do_something_heavy())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:34:42.700

对于这种情况，我可以想到三种不同的选择。所有选项都不需要对连接进行排队，因为它们保证信号只发出一次。

**选项 1：定义类似*flush()*方法的东西**

然后，flush 方法会发出更新后的信号，而 setter 方法则不会。客户端代码必须手动调用flush()。

**选项 2：当程序空闲时发出信号**

*如果延迟更新*是可以的，这只是一个解决方案。这意味着，只有当您的应用程序空闲时，才会发出信号。但是由于您使用排队连接，因此情况已经如此。

这是高度动态的，您甚至可以多次更改这两个参数，而昂贵的更新操作只被调用一次。

为了实现这一点，在 setter 方法中，您只需将私有布尔变量设置`changed`为 true，然后将单次计时器（超时为零）启动到类 Foo 中的一个特殊插槽，假设是 slot `emitUpdated()`。请注意，单次计时器将像调用 setter 方法一样频繁地调用您的插槽，因此插槽必须关心这一点。它只是检查是否`changed`为真，发出真实信号并将设置更改为假。所以信号只发出一次。

请注意，这已经排队！单发计时器将被放入事件队列（多次）并调用 emitUpdated 以发出一次实际信号。因此，您可能希望直接连接到此信号以避免排队连接带来的双重惩罚。

**选项 3：假设从每个客户端代码以相同的顺序调用 setter**

这会产生最佳性能。确保你总是调用`setA`then `setB`，并且只在`setB`. 只有发布代码的一个选项（制作一些验证这个“协议”的断言），如果你总是想调用这两种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:20:44.663

您可以做的是，断开 do something_heavy() 中的插槽。

即当您开始执行do something_heavy 时，断开插槽。执行完成后，重新连接插槽。这样，在执行过程中，不会再处理任何信号。虽然会发出信号，但由于没有连接相应的插槽，因此不会再次执行。

# c++ - 如何在 iOS 中将 UTF-8 字符串转换为 wchars？

> ID：12804217
> 
> 赞同：3
> 
> 时间：2012-10-09T16:16:49.013
> 
> 标签：c++, ios, utf-8, utf-16

我有一个需要移植到 iOS 的 Win32 函数：

```
// Loads UTF-8 file and converts to a UTF-16 string

bool LoadUTF8File(char const *filename, wstring &str)
{
    size_t size;
    bool rc = false;
    void *bytes = LoadFile(filename, &size);
    if(bytes != 0)
    {
        int len = MultiByteToWideChar(CP_UTF8, 0, (LPCCH)bytes, size, 0, 0);
        if(len > 0)
        {
            str.resize(len + 1);
            MultiByteToWideChar(CP_UTF8, 0, (LPCCH)bytes, size, &str[0], len);
            str[len] = '\0';
            rc = true;
        }
        delete[] bytes;
    }
    return rc;
}

// LoadFile returns the loaded file as a block of memory
// There is a 3 byte BOM which MultiByteToWideChar seems to ignore
// The text in the file is encoded as UTF-8 
```

我为此使用 C++，而不是 Objective C，并且我一直在尝试使用 mbstowcs 和 _mbstowcs_l。它们的行为方式似乎与 MultiByteToWideChar 不同。例如，单词attaché 末尾的重音字符未正确转换（Win32 版本正确转换它）。标准库中的某个地方是否有“UTF-8 到 UTF-16”功能？

Win32 版本中是否有我没有注意到的错误？

从 MultiByteToWideChar 返回的长度小于从 mbstowcs 返回的长度。

奇怪的是，在这个小测试用例中

```
 char *p = "attaché";

    wstring str;
    size_t size = strlen(p);
    setlocale(LC_ALL, "");
    int len = mbstowcs(null, p, size);
    if(len > 0)
    {
        str.resize(len + 1);
        mbstowcs(&str[0], p, size);
        str[len] = '\0';
    }
    TRACE(L"%s\n", str.c_str());

    len = MultiByteToWideChar(CP_UTF8, 0, p, size, null, 0);
    if(len > 0)
    {
        str.resize(len + 1);
        MultiByteToWideChar(CP_UTF8, 0, p, size, &str[0], len);
        str[len] = '\0';
    }
    TRACE(L"%s\n", str.c_str()); 
```

我从 mbcstowcs 得到正确的输出，MultiByteToWideChar 错误地将最后一个字符转换为 65533（REPLACEMENT_CHARACTER）。现在我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:43:27.960

你是坚持使用 C++ 还是它只是你目前选择的方式，但也可以在 Objective-C 中这样做？

在 Objective-C 中，您可以使用`[yourUTF8String dataUsingEncoding:NSUTF16StringEncoding]`NSData 获取包含字符串的 UTF-16 表示的字节。

* * *

*附加假设：请注意，您的示例中未正确转换的“é”字符也可以通过您的解决方案可能不采用 NFD 形式（或 NFC 形式，任一种形式）这一事实来解释。这意味着如果“é”字符在 NFD 中被编码为“带有尖锐重音的字符 'e'”，则它可能无法正确解释，而 NFC 形式（如“带重音的 e 字符”，即前- 直接组成字符）它会。或相反亦然。*

这只是一个假设，实际上它取决于您得到的结果，而不是您期望的“é”字符，但值得检查。

# c# - 更新 1.4.609 后 Ajax Combobox 无法再找到 TextBox 控件

> ID：12804224
> 
> 赞同：1
> 
> 时间：2012-10-09T16:17:04.773
> 
> 标签：c#, ajax, combobox, controls, ajaxcontroltoolkit

我使用的是旧版本的 Ajax (1.4.5...)，升级到 1.4.609 后.. 我的 ajax 组合框代码抛出空引用错误。我认为现在很难找到组合框的 TextBox 控件部分，但我不确定。有没有其他人有这个问题？更重要的是，有没有人找到解决方案？这是代码：

```
public Unit LocationCellWidth
    {
        get { return ComboBoxCell.Width; }
        set 
        {
            ComboBoxCell.Width = value;

   error------> ((TextBox)LocationComboBox.FindControl("TextBox")).Width = value;             
               //LocationComboBox.Width = value;
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T00:23:49.400

迟到总比不好，我也遇到了同样的问题。

控件名称已更改为：“SelectCategoryCombo_TextBox”

检查调试器中的组合框对象会为您提供上述文本框控件的 ID。

所以：

```
TextBox comboTextBox = LocationComboBox.FindControl("SelectCategoryCombo_TextBox") as TextBox 
```

# mysql - 优化大型数据集的查询 - 使用 JOIN 还是 IN？

> ID：12804225
> 
> 赞同：1
> 
> 时间：2012-10-09T16:17:05.810
> 
> 标签：mysql, sql

鉴于我有被标记的文章，一篇文章可以有 n 个标签。目前大约有 250,000 个标签条目都指向他们所属的文章。

现在我想从符合某些条件的文章中找到所有标签。我想出了两种不同的方法。两者都有缺点并且速度很慢。可能有人可以为我指出如何加快速度甚至提出更好的解决方案的正确方向。

**键 (ind,rindex) 是 varchar(255) 不幸的是这不能改变**

## 查询 #1

采取 7.5 - 子选择在 50 毫秒内返回 60 条记录

```
SELECT count(*) AS tagscount, tags.value FROM tags 
  WHERE tags.`rindex` IN 
  ( 
    SELECT article.ind 
       FROM article 
       INNER JOIN struktur ON (struktur.ind = article.struktur) 
    WHERE article.date = '2011-12-21'
  ) 
  AND tags.`rtable` = 'article'
  GROUP BY tags.value ORDER BY tagscount DESC LIMIT 20 
```

## 查询 #2

耗时 60 毫秒

```
SELECT count(*) AS tagscount, tags.value FROM tags 
  INNER JOIN article ON (article.ind = tags.rindex AND tags.rtable = 'article')
  LEFT JOIN structure ON (article.structure = structure.ind)
WHERE article.date = '2011-12-21'
GROUP BY tags.value ORDER BY tagscount DESC LIMIT 20 
```

## 奇怪的部分 -*重要*

当我更改`article.date = '2011-12-21'`为`article.date >= '2009-12-21'`
**查询 #1**

*   耗时 10.1 秒 - 子选择在 70 毫秒内返回 18k 行

**查询 #2**

*   耗时 14.2s

如果您需要更多信息，我很乐意提供

# 模式

```
mysql> SHOW COLUMNS FROM tags;
+---------+--------------+------+-----+---------+-------+
| Field   | Type         | Null | Key | Default | Extra |
+---------+--------------+------+-----+---------+-------+
| ind     | varchar(255) | NO   | PRI |         |       |
| rtable  | varchar(255) | NO   | MUL |         |       |
| rindex  | varchar(255) | NO   | MUL |         |       |
| value   | varchar(40)  | YES  | MUL | NULL    |       |
+---------+--------------+------+-----+---------+-------+

mysql> SHOW indexes FROM tags
+-------+------------+---------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name            | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+---------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| tags  |          0 | tags_ind            |            1 | ind         | A         |      275834 |     NULL | NULL   |      | BTREE      |         |
| tags  |          1 | tags_tag            |            1 | tag         | A         |       27583 |     NULL | NULL   | YES  | BTREE      |         |
| tags  |          1 | tags_rindex         |            1 | rindex      | A         |       55166 |     NULL | NULL   |      | BTREE      |         |
| tags  |          1 | tags_rindex_tabelle |            1 | tabelle     | A         |           4 |       30 | NULL   |      | BTREE      |         |
| tags  |          1 | tags_rindex_tabelle |            2 | rindex      | A         |       55166 |       50 | NULL   |      | BTREE      |         |
+-------+------------+---------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

mysql> SHOW COLUMNS FROM structure;
+------------------------+--------------+------+-----+---------+-------+
| Field                  | Type         | Null | Key | Default | Extra |
+------------------------+--------------+------+-----+---------+-------+
| ind                    | varchar(255) | NO   | PRI |         |       |
+------------------------+--------------+------+-----+---------+-------+

mysql> SHOW COLUMNS FROM artikel;
+--------------------+--------------+------+-----+------------+-------+
| Field              | Type         | Null | Key | Default    | Extra |
+--------------------+--------------+------+-----+------------+-------+
| ind                | varchar(255) | NO   | PRI |            |       |
| date               | date         | NO   | MUL | 0000-00-00 |       |
+--------------------+--------------+------+-----+------------+-------+ 
```

# 解释

```
mysql> explain #1
+----+--------------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+
| id | select_type        | table    | type   | possible_keys                                                                       | key                 | key_len | ref                 | rows   | Extra                                        |
+----+--------------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+
|  1 | PRIMARY            | tags     | ref    | tags_rindex_tabelle                                                                 | tags_rindex_tabelle | 32      | const               | 177175 | Using where; Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | artikel  | eq_ref | artikel_ind,zeitraum_start_i,freigabe_i,korrektur_i,struktur_i,artikel_start_slot_i | artikel_ind         | 257     | func                |      1 | Using where                                  |
|  2 | DEPENDENT SUBQUERY | struktur | eq_ref | struktur_ind,struktur_host                                                          | struktur_ind        | 257     | ec.artikel.struktur |      1 | Using where                                  |
+----+--------------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+
mysql> explain #2
+----+-------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+
| id | select_type | table    | type   | possible_keys                                                                       | key                 | key_len | ref                 | rows   | Extra                                        |
+----+-------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+
|  1 | SIMPLE      | tags     | ref    | tags_rindex,tags_rindex_tabelle                                                     | tags_rindex_tabelle | 32      | const               | 177175 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | artikel  | eq_ref | artikel_ind,zeitraum_start_i,freigabe_i,korrektur_i,struktur_i,artikel_start_slot_i | artikel_ind         | 257     | ec.tags.rindex      |      1 | Using where                                  |
|  1 | SIMPLE      | struktur | eq_ref | struktur_ind,struktur_host                                                          | struktur_ind        | 257     | ec.artikel.struktur |      1 | Using where                                  |
+----+-------------+----------+--------+-------------------------------------------------------------------------------------+---------------------+---------+---------------------+--------+----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:24:32.413

我假设`artikel.ind`不限于以与`artikel.date`. 如果是这样，显而易见的解决方案是添加`rindex`与日期范围相对应的限制。

事实上，看起来正在使用适当的计划。

在不更改数据类型的情况下，您最好的选择是创建索引的物化视图`(artikel.date, tags.value, artikel.ind)`，然后对其进行查询。

# c# - C# 相当于 PHP 中的 hash_hmac

> ID：12804231
> 
> 赞同：34
> 
> 时间：2012-10-09T16:17:25.637
> 
> 标签：c#, hmac, sha512

使用 .NET 和 C# 我需要使用 HMAC SHA512 向 PHP 服务器提供完整性字符串。在 C# 中使用：

```
Encoding encoding = Encoding.UTF8;
byte[] keyByte = encoding.GetBytes(key);
HMACSHA512 hmacsha512 = new HMACSHA512(keyByte);
byte[] messageBytes = encoding.GetBytes(message);
byte[]  hashmessage = hmacsha512.ComputeHash(messageBytes);
return(ByteToString(hashmessage).toUpper()); 
```

但它与 PHP hash_hmac() PHP 代码不匹配：

```
$hmac = strtoupper(hash_hmac($pbx_hash, $msg, $binKey)); 
```

我尝试更改 C#（utf8、ASCII、Unicode）中的编码但没有成功。

我尝试了很多在网上找到的解决方案，但没有给出相同的字符串:(

我无法更改 PHP 代码，也看不出 C# 有什么问题

**编辑**这是`ByteToString`（从评论中复制）：

```
static string ByteToString(byte[] buff)
{
    string sbinary = "";
    for (int i = 0; i < buff.Length; i++)
    {
        sbinary += buff[i].ToString("X2"); /* hex format */
    }
    return (sbinary);
} 
```

经过多次测试，发现如果 PHP hash_hmac 键是字符串，而不是字节数组，我会得到相同的结果。似乎问题出在 PHP 转换函数 $binKey = pack("H*", $keyTest);

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-09T16:26:39.717

问题必须是密钥/消息数据的实际表示。

请参阅以下测试：

## `PHP`

```
#!/usr/bin/php
<?php
print strtoupper(hash_hmac("sha256", "message", "key"));
?> 
```

[输出（通过http://writecodeonline.com/php/](http://writecodeonline.com/php/)直播）：

```
6E9EF29B75FFFC5B7ABAE527D58FDADB2FE42E7219011976917343065F58ED4A 
```

## `C#`

```
using System;
using System.Text;
using System.Security.Cryptography;

public class Program
{
    private const string key = "key";
    private const string message = "message";
    private static readonly Encoding encoding = Encoding.UTF8; 

    static void Main(string[] args)
    {
        var keyByte = encoding.GetBytes(key);
        using (var hmacsha256 = new HMACSHA256(keyByte))
        {
            hmacsha256.ComputeHash(encoding.GetBytes(message));

            Console.WriteLine("Result: {0}", ByteToString(hmacsha256.Hash));
        }
    }
    static string ByteToString(byte[] buff)
    {
        string sbinary = "";
        for (int i = 0; i < buff.Length; i++)
            sbinary += buff[i].ToString("X2"); /* hex format */
        return sbinary;
    }    
} 
```

[输出（通过http://ideone.com/JdpeL](http://ideone.com/JdpeL)直播）：

```
Result: 6E9EF29B75FFFC5B7ABAE527D58FDADB2FE42E7219011976917343065F58ED4A 
```

因此，请检查 PHP 输入数据的字符集/编码。还要检查实际算法（在 中`$pbx_hash`）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-08-23T00:35:32.967

```
 private static string HashHmac(string message, string secret)
    {
        Encoding encoding = Encoding.UTF8;
        using (HMACSHA512 hmac = new HMACSHA512(encoding.GetBytes(secret)))
        {
            var msg = encoding.GetBytes(message);
            var hash = hmac.ComputeHash(msg);
            return BitConverter.ToString(hash).ToLower().Replace("-", string.Empty);
        }
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T12:00:42.290

如上所说，问题出在 PHP Pack（用于将键转换为字节数组的 H* 函数。C# Getbytes 没有给出相同的结果（utf8、asci、unicode ...）。在这里找到的解决方案：[http：/ /www.nuronconsulting.com/c-pack-h.aspx](http://www.nuronconsulting.com/c-pack-h.aspx)对我来说没问题。现在来自 C# 的 HMAC 与 PHP 匹配！

```
public static byte[] PackH(string hex)
{
       if ((hex.Length % 2) == 1) hex += '0';
       byte[] bytes = new byte[hex.Length / 2];
       for (int i = 0; i < hex.Length; i += 2)
       {
             bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
       }
 return bytes;
} 
```

Manu感谢大家的帮助。

# playframework - 使用 Play 1.2.4 发布 JSON

> ID：12804237
> 
> 赞同：2
> 
> 时间：2012-10-09T16:17:42.597
> 
> 标签：playframework, playframework-1.x

我一直在尝试解决这个问题一段时间，但我似乎无法让它正常工作。我有这个接受 JSON 内容的 POST 服务：

```
public static void addLifestyleToRecipes(String categoryMappingList) {
    Logger.info("In RecipeServices--> addLifestyleToRecipes");
    Logger.info("JSON received: %s", categoryMappingList);      
    Type type = new TypeToken<List<CategoryMapping>>() {
    }.getType();
    List<CategoryMapping> categoryMapping = new Gson().fromJson(categoryMappingList, type);

    for (CategoryMapping cat : categoryMapping) {
            //the rest is irrelevant to the problem

} 
```

当我用功能测试测试我的方法时，一切正常：

```
List<CategoryMapping> list = new ArrayList<CategoryMapping>();
list.add(new CategoryMapping(MULTI_LANG_ID, recipes));
list.add(new CategoryMapping(MULTI_LANG_ID, recipes));

String body = new Gson().toJson(list);

Map<String, String> params = new HashMap<String, String>();
params.put("categoryMappingList", body);

StringBuffer url = TestHelper.generateBaseUrl(apiKey, apiVersion);
url.append("/recipes/add/categories");

Response response = POST(url, params); 
```

当我尝试实际调用服务时出现问题，我的参数“categoryMappingList”始终为空。我还尝试使用 Chrome 的“Advanced Rest Client”来模拟 POST 请求，但我总是得到相同的结果。

我还注意到，如果我将 Content-Type 指定为“application/json; charset=utf-8”以外的任何内容，我会收到 403 错误。

有什么线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:49:37.530

只是一个猜测，但您是否查看过 request().body 以查看您的 JSON 是否存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:28:04.710

在您的功能测试中，您将 json 添加为参数

```
/recipes/add/categories?categoryMappingList=json 
```

如果您的客户调用将其发布在正文中，则不会在*categoryMappingList*参数中获取。从 POST 正文中解析 json

```
categoryMappingList = request.getBody(); 
```

# java - Java EE 解决方案中消息传递的必要性

> ID：12804238
> 
> 赞同：0
> 
> 时间：2012-10-09T16:17:48.207
> 
> 标签：java, jakarta-ee, jms, java-ee-6, messaging

考虑一个在 Web 上搜索特定数据的工作进程。需要另一个过程来索引第一个过程的结果以供以后使用。索引部分涉及以特定方式将原始数据（搜索结果）写入一个巨大的分布式 HBase 存储库。我无法判断这两个过程相互比较的速度。我们可能会遇到这样一种情况，其中一个系统暂时停机，需要在唤醒时执行任务。我正在使用 JavaEE。目前，这是我想到的实现方式。

1.  第一个进程将其搜索结果存储在 MySQL 数据库中，并发送一条消息，其中包含它已放入表中的新行的 ID。
2.  MOM 唤醒第二个进程以使用存储在 MySQL 数据库中的新原始数据。
3.  第二个过程在完成对真实数据库（HBase）中的数据的索引时清除 MySQL 表。

我需要专家对我的设计进行评论，以验证其适当性。例如，如果第二个进程不断轮询表以查看是否有新记录怎么办？我是在使用正确的技术还是矫枉过正？我应该简化我的设计还是遗漏了什么？如果我的解决方案是合适的，在实施过程中我应该记住什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:03:29.607

如果可能的话，我会坚持使用更简单的设计，放弃 MySQL 临时表并坚持使用 JMS。

所以，这样的事情会做到这一点：

1.  [P1] 将搜索结果发送到某个 JMS 队列“INDEX.QUEUE”。
2.  [P2] 简单地异步吃掉队列“INDEX.QUEUE”的消息，并根据消息负载中的搜索结果生成搜索索引。

消息传递可以帮助您完成这些任务，轮询数据库表几乎相同，但更棘手，所以当您拥有专为此任务设计的持久性和事务性 MOM 时，为什么要重新发明轮子。

# python - 如何将 REAL32 值写入 Python 中的文件？

> ID：12804239
> 
> 赞同：2
> 
> 时间：2012-10-09T16:17:50.140
> 
> 标签：python, ctypes

在想要创建[STL 文件](http://en.wikipedia.org/wiki/STL_%28file_format%29)时，我需要将 REAL32 值写入二进制 IEEE 浮点格式的文件。我如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:18:50.983

你要[`struct`](http://docs.python.org/library/struct.html)

```
with open(youroutput,'wb') as fout:
    fout.write(struct.pack('<f',300.0)) 
```

这里，`<`表示小端，`f`表示浮点（32 位，IEEE）。

* * *

如果您想在 1 中写入多个值：

```
values = (300.0, 200.0, 100.0)
fout.write(struct.pack('<3f',*values)) 
```

# c++ - Qt 接口类

> ID：12804243
> 
> 赞同：1
> 
> 时间：2012-10-09T16:18:09.477
> 
> 标签：c++, qt, qobject

我怎样才能创建一个接口类，像这样：

```
template<typename file_system_t>
    class ireciver_intervace : public QObject
    {
        public:
        typedef typename file_system_t::file_system_item file_system_item;
    public Q_SLOTS:
        virtual void dataChangeItem(file_system_item *item)=0;
        virtual void removeItem(file_system_item *item)=0;
        virtual void insertItem(file_system_item *item)=0;
    }; 
```

和派生类

```
class FileItemModel:public QAbstractItemModel ,public ireciver_intervace<file_system>
        {
            Q_OBJECT
        } 
```

当我从这个类继承时，我收到一个错误，提到模棱两可的转换。我知道这是编译器的正确行为，但是我怎样才能为我的未来类获取接口插槽？也许我必须使用`Q_DECLARE_INTERFACE`宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:40:15.097

[***不能对具有信号/槽功能的 QObject 子类进行模板化。***](http://doc.qt.digia.com/qq/qq15-academic.html)

您可以简单地删除接口的 QObject 继承，其余的就可以了。定义一个（纯）虚函数然后（在子类中）通过将它放在`slots`子类的部分中来从中创建一个插槽是没有问题的：

```
template<typename file_system_t>
class ireceiver_interface
{
public:
    typedef typename file_system_t::file_system_item file_system_item;

    // pure virtual functions (NO SLOTS!):
    virtual void dataChangeItem(file_system_item *item)=0;
    virtual void removeItem(file_system_item *item)=0;
    virtual void insertItem(file_system_item *item)=0;
}; 
```

```
class FileItemModel: public QAbstractItemModel,
                     public ireceiver_interface<file_system_t>
{
    Q_OBJECT
    ...
public slots:
    // implementations (slots):
    virtual void dataChangeItem(file_system_item *item);
    virtual void removeItem(file_system_item *item);
    virtual void insertItem(file_system_item *item);
    ...
} 
```

但是，接口的想法是定义具体类必须实现的功能。这里，接口不能强制子类将这些函数定义*为槽*函数，它也可以将它们定义*为非槽函数*。这个小问题是解决不了的。即使接口可以是 QObject，子类也可以决定将这些方法重新实现为非插槽！

[*请注意，您的类名中有两个拼写错误：它是**receiver**，而不是**reciver**，它是**interface**，而不是**intervece**。*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:22:41.093

你不能从多个继承`QObject`。但是，您继承的两个类都是`QObjects`.

您可以考虑的一些可能性如下：

*   让类`ireciver_intervace`继承自`QAbstractItemModel`而不是`QObject`. 这样，`FileItemModel`可以简单地继承自`ireciver_intervace`. （可能无法实现，具体取决于您想要实现的目标）
*   使用委托`QAbstractItemModel`代替继承。

# django - 如何在 TastyPie 中使用外键创建新资源

> ID：12804246
> 
> 赞同：16
> 
> 时间：2012-10-09T16:18:15.607
> 
> 标签：django, django-models, tastypie

我对美味派还很陌生，但它似乎是一个非常整洁的图书馆。不幸的是，我遇到了一些困难。

我有两个模型，以及与这些模型相关的两个资源：

```
class Container(models.Model):
    pass

class ContainerItem(models.Model):
    blog = models.ForeignKey('Container', related_name='items')

# For testing purposes only
class ContainerResource(ModelResource):
    class Meta:
        queryset = Container.objects.all()
        authorization = Authorization()

class ContainerItemResource(ModelResource):
    class Meta:
        queryset = ContainerItem.objects.all()
        authorization = Authorization() 
```

我`Container`通过 jQuery 创建了一个对象：

```
var data = JSON.stringify({});

$.ajax({
    url: 'http://localhost:8000/api/v1/container/',
    type: 'POST',
    contentType: 'application/json',
    data: data,
    dataType: 'json',
    processData: false
}); 
```

但是，当我去创建一个时`ContainerItem`，我得到这个错误：

```
container_id may not be NULL 
```

所以我的问题是：**当存在 ForeignKey 关系时如何创建新资源？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T16:45:52.617

ForeignKey 关系不会在 ModelResource 上自动表示。您必须指定：

```
blog = tastypie.fields.ForeignKey(ContainerResource, 'blog') 
```

上`ContainerItemResource`，然后您可以在发布容器项目时发布容器的资源uri。

```
var containeritemData = {"blog": "/api/v1/container/1/"}
$.ajax({
    url: 'http://localhost:8000/api/v1/containeritem/',
    type: 'POST',
    contentType: 'application/json',
    data: containeritemData,
    dataType: 'json',
    processData: false
}); 
```

有关更多信息，请查看以下链接：

在本节中，有一个如何创建基本资源的示例。在底部，他们提到关系字段不是通过自省自动创建的：

[http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-resources](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-resources)

在这里，他们添加了一个创建关系字段的示例：

[http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-more-resources](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-more-resources)

这是关于添加反向关系的简介：

[http://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships](http://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships)

如果您像阅读小说一样阅读它们，所有[文档](http://django-tastypie.readthedocs.org/en/latest/index.html)都很好，但是很难在其中找到特定的内容。

# java - 将数据存储在集合中

> ID：12804259
> 
> 赞同：0
> 
> 时间：2012-10-09T16:18:40.347
> 
> 标签：java, collections

我有一个要求是我必须将员工数据存储在 java 集合中

```
EmpId  EmpName EmpSalary
101     xxxxx    80000
101     yyyyy    40000
101     ddddd    60000 
101     zzzzz    80000 
```

如上所示，它`EmpId`是`int`类型，`EmpName`是`String`类型，`EmpSalary`又是`int`类型。

我打算将它们存储在一个 Java 集合中，这可能是通用的。我有一个 pojo，我有三个字段及其设置器和获取器。

哪个 java 集合最适合这个要求？

在我的情况下，ID 字段不是唯一的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:20:24.013

我会使用`Map<Integer, EmployeePojo>`,`EmpId`字段为键， POJO 为值。**假设键值是唯一的**。如果是这样，使用地图将为您提供极好的访问时间。

一个更完整的片段，假设你的 POJO 被调用`Employee`：

```
Map<Integer, Employee> employeeLookup = new HashMap<Integer, Employee>();
employeeLookup.put(employee1.getEmpId(), employee1);
employeeLookup.put(employee2.getEmpId(), employee2); 
```

并通过 id 获取员工

```
Employee employee = employeeLookup.get(someId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:35:43.170

由于 EmpId 没有唯一值，因此可以使用 ArrayList。：-

```
class Employee {
    int id;
    String Name;
    double salary;
} 
```

然后有一个`ArrayList<Employee>`并将您的`POJO`实例添加到它..

```
List<Employee> empList = new ArrayList<Employee>();

empList.add(new Employee(1001, "rohit", 542345));
empList.add(new Employee(1001, "abc", 542345));
empList.add(new Employee(1001, "asf", 542345)); 
```

但是，在检索员工时，您需要比较多个值。因此，您可以覆盖 .. 中的一个`equals()`方法，`Employee POJO`然后您可以`Employees`使用`e1.equals(e2)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:22:04.827

这看起来像是 HashMap 的理想情况。使用员工姓名或 ID 作为键，使用 POJO 作为值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:23:07.380

我会创建一个新类，它将有 3 个包含数据的字段变量。然后你可以为你创建的那个新类创建一个 ArrayList。在课堂上，您可以制作 getter 和 setter 来维护数据

# jquery - 如何：动态 jQuery，至少选择一个，使用掩码验证

> ID：12804267
> 
> 赞同：0
> 
> 时间：2012-10-09T16:18:56.517
> 
> 标签：jquery, jquery-selectors, validation, jquery-validate

我有一个动态的文本框列表来捕获一个或多个货币金额。我希望至少一个文本框具有有效的货币金额。

我无法让它完全正常工作。我真的很感激任何想法或建议。

这是我到目前为止...

```
<html>
  <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/cupertino/jquery-ui.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
  <script type="text/ecmascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
  <script type="text/ecmascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.min.js"></script>
  <script type="text/javascript" src="js/jquery.maskedinput-1.3.min.js"></script> 

  <div id="page_wrap"><form action="http://local.host.com/myform/net/send" method="post" accept-charset="utf-8" id="myform">
  <h2>Test</h2>
  <h3>Enter an amount and click send</h3>
  <?php //foreach ($recs as $rec): ?>
  <Fieldset>
    <label for="Amount_1">Amount</label>
    <input name="Amount_1" type="text" id="Amount_1" />
  </Fieldset>
  <Fieldset>
    <label for="Amount_2">Amount</label>
    <input name="Amount_2" type="text" id="Amount_2" />
  </Fieldset>
  <Fieldset>
    <label for="Amount_3">Amount</label>
    <input name="Amount_3" type="text" id="Amount_3" />
  </Fieldset>
  <?php // endforeach; ?>

  <span class="button right"><input type="submit" value="Send" /></span>
  <br class="flt_clear" />
  </form>
    <script>
    $(document).ready(function() {
      $('input[name^="Amount_"]').mask("$?999");    
      $.validator.addMethod("pickAtLeastOne", function(value, element, param) {
        return $('input[name^="Amount_"]').val() == "$";
      });
      $('#myform').validate();
      $('input[name^="Amount_"]').each(function() {
      $(this).rules("add", {
        pickAtLeastOne: true,
        messages: {
          pickAtLeastOne: "Please enter at least one amount"
        }
      });
    });
    });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:26:18.913

您应该检查当前正在测试的元素，而不是整个组选择器，因此请尝试替换以下代码：

```
return $('input[name^="Amount_"]').val() == "$"; 
```

对于这个：

```
return value == "$"; 
```

因为在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:44:07.060

试试这个，而不是我在 txtBox 上使用类数量，你可以修改它你想要的和工作代码[FIDDLE](http://jsfiddle.net/tbgzs/)

```
$.validator.addMethod("pickAtLeastOne", function(value, element, param) {
   var retCode = false;
   var txtBoxLength = $('.amount').length;
   var ctr = 0;
   $('.amount').each(function(value, element) {
     if ($(this).val() == ''){
       ctr++;
     }
  });
 return ctr == txtBoxLength;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:28:35.927

这是我如何让它工作的。除了我的 pickAtLeastOne 方法之外，一切都是正确的。这是工作的：

```
$.validator.addMethod("pickAtLeastOne", function(value, element, param) {
  var retCode = false;
  $('input[name^="Amount_"]').each(function(value, element) {
    if ($(this).val() != '$' && $(this).val() != '') {
      retCode = true;
      return;
    }
  });
  return retCode;
}); 
```

# c++ - 尝试使用全局变量时使用 Xcode C++ 时出错

> ID：12804275
> 
> 赞同：1
> 
> 时间：2012-10-09T16:19:22.777
> 
> 标签：c++, xcode, global-variables

我是使用 Xcode 的 C++ 初学者。尝试使用声明的全局变量时，使用 Xcode C++ 时出现错误。这是示例代码。

```
#include <iostream>
using namespace std;

int count ;

int main()
{
    count=1;     // reference to 'count' is ambiguous

    cout << count;  // reference to 'count' is ambiguous

    return 0;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:22:42.623

有一个名为的 STL 算法[`std::count()`](http://en.cppreference.com/w/cpp/algorithm/count)，并且由于有一个`using namespace std;`指令，编译器现在有两个可用的`count`符号可供选择：删除`using namespace std;`和使用`std::cout`。

有关进一步阅读，请参阅[使用 std 命名空间。](https://stackoverflow.com/questions/1265039/using-std-namespace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:22:23.480

删除`using namespace std;`或限定变量的使用`::count`：

```
int main()
{
    ::count=1;     // reference to 'count' is ambiguous

    cout << ::count;  // reference to 'count' is ambiguous

    return 0;
} 
```

你会因为`std::count`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:23:50.653

删除`using namespace std;`并更改`cout`为`std::cout`。using 声明将所有标准库名称拉入全局命名空间，它们的算法命名`std::count`可能是问题的根源。一般来说，`using namespace std;`是个坏主意。

# opengl - glTranslatef 在 glBegin .. glEnd 中不起作用

> ID：12804277
> 
> 赞同：2
> 
> 时间：2012-10-09T16:19:24.710
> 
> 标签：opengl

我正在尝试并排绘制不同颜色的 2 个正方形，我的问题是我无法让 glTranslatef 将我的第二个正方形向右移动，第二个正方形只是在第一个正方形上绘制。

```
void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);   
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPointSize(10);

    glBegin(GL_QUADS);

        glColor3f(0.0,1.0,0.0);
        drawSquare();

        glTranslatef(10,0,0);

        glColor3f(1.0,0.0,0.0);
        drawSquare();

    glEnd();    

    glFlush();  // Process all OpenGL routines
}

void drawSquare()
{
    glVertex3f(0,0,0);
    glVertex3f(10,0,0);
    glVertex3f(10,10,0);
    glVertex3f(0,10,0);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:23:36.010

你不能在一个`glBegin/glEnd`块内翻译，你已经把它分成两个块。

我建议开始`glGetError()`在你的代码中使用，它会帮助你发现这样的错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T16:25:08.970

在 glBegin 和 glEnd 之间只允许使用特定的 OpenGL 命令子集。因此，当您在这两个调用之间调用 glTranslate 时，它​​会被忽略。

从显示中删除 glBegin 和 glEnd，并放入 drawSquare - 这应该可以工作。

# c# - HtmlAgilityPack 和大型 HTML 文档

> ID：12804281
> 
> 赞同：2
> 
> 时间：2012-10-09T16:20:02.000
> 
> 标签：c#, httpwebrequest, html-agility-pack

我已经构建了一个小爬虫，现在尝试它时，我发现在爬取某些站点时，我的爬虫使用 98-99% 的 CPU。

我曾经`dotTrace`看到问题可能是什么，它指出了我的`httpwebrequest`方法 - 我在stackoverflow上的一些先前问题的帮助下对其进行了一些优化......但问题仍然存在。

然后我去查看导致 CPU 负载的 URL 并发现它实际上是大小非常大的站点 - 去图 :) 所以，现在我 99% 确定它与以下代码有关：

```
HtmlAgilityPack.HtmlDocument documentt = new HtmlAgilityPack.HtmlDocument();
HtmlAgilityPack.HtmlNodeCollection list;
HtmlAgilityPack.HtmlNodeCollection frameList;

documentt.LoadHtml(_html);
list = documentt.DocumentNode.SelectNodes(".//a[@href]"); 
```

我想要做的就是提取页面上的链接，所以对于大型网站.. 无论如何我可以让它不使用这么多 CPU？

我在想也许会限制我获取的东西？我在这里最好的选择是什么？

当然之前一定有人遇到过这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:29:41.277

您是否尝试过删除 XPath 并使用 LINQ 功能？

```
var list = documentt.DocumentNode.Descendants("a").Select(n => n.GetAttributeValue("href", string.Empty); 
```

这会将所有锚标记的 href 属性列表拉为 List<string>。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:38:49.780

如果您没有大量投资于 Html Agility Pack，请尝试改用[CsQuery](https://github.com/jamietre/CsQuery)。它在解析文档时建立索引，并且选择器比 HTML Agility Pack 快得多。看[一个比较。](http://blog.outsharked.com/2012/06/csquery-performance-vs-fizzler.html)

CsQuery 是一个带有完整 CSS 选择器引擎的 .NET jQuery 端口；它允许您使用 CSS 选择器以及 jQuery API 来访问和操作 HTML。它作为 CsQuery 在 nuget 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:27:48.423

".//a[@href]" 是非常慢的 XPath。试图用“//a [@href]”或简单地遍历整个文档并检查所有A节点的代码替换。

为什么这个 XPath 很慢：

1.  “。” 从一个节点开始
2.  "//" 选择所有后代节点
3.  "a" - 只选择 "a" 节点
4.  "@href" 与 href。

第 1+2 部分以“为每个节点选择其所有后代节点”结束，这非常慢。

# php - 在常量中添加变量

> ID：12804286
> 
> 赞同：2
> 
> 时间：2012-10-09T16:20:09.773
> 
> 标签：php, string, variables, constants

我在视图中为我的错误消息使用常量，并且我希望能够在其中使用变量以便于管理。

我的大部分常量看起来像这样：

```
const SUCCESSFULLY_REGISTERED = "<p class='success'>Registration successful!.</p>"; 
```

我想要做的是为 css 类使用一个变量，以便更容易在一个地方更改它们。这是我尝试过的：

```
const SUCCESSFULLY_REGISTERED = "<p class='$this->cssClassSuccess'>Registration successful!.</p><p>Log in with the username and password you registered with.</p>"; 
```

由于某种原因，它不起作用并引发下面的错误消息。为什么会这样以及如何以一种有效的方式来完成？

```
Parse error: syntax error, unexpected '"' in .../View/RegisterView.php on line 15 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T16:24:33.187

如果您定义一个常量，这是不可能的。

> **手册：** “值必须是常量表达式，而不是（例如）变量、属性、数学运算的结果或函数调用。”

[常量手册 php.net](http://www.php.net/manual/en/language.oop5.constants.php)
[常量表达式](http://www.php.net/manual/en/language.constants.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T16:27:27.017

这不起作用，因为常量（顾名思义）需要保持不变，但您可以使用`printf()`.

例子：

```
const SUCCESSFULLY_REGISTERED = '<p class="%s">Registration successful blah blah blah!</p>' 
```

然后在您的视图脚本中：

```
printf(SUCCESSFULLY_REGISTERED, $this->cssClassSuccess); 
```

常量中的`%s`将被替换为`$this->cssClassSuccess`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:29:51.060

**手册：**从 PHP 5.3.0 开始，可以使用变量来引用类。

检查以下类：

```
<?php

class A{

    function __construct($v)
    {
        define("MyConstant",$v);
        echo "MyConstant is ". MyConstant;
    }
}

$a = new A("hello"); //will print MyConstant is hello
?> 
```

在上面的代码中，我们将变量 ($v) 的值分配给常量 MyConstant。它不会给出错误，运行此函数的结果将是`MyConstant is hello`

但是，假设您添加了一个新行，如下所示：

```
$a = new A("hello"); //will print MyConstant is hello
$b = new A("New Value"); //will generate Constant MyConstant already defined notice.. 
```

在这里，该行将`$b = new A("New Value");`发出一条通知，说明：`Notice: Constant MyConstant already defined`. 这是因为在类中定义的常量是伪类常量，就作用域所绑定的上下文而言，类似于静态变量。而且由于常量无法更改，并且它们的范围绑定到类，调用上面的错误行本质上是试图“重新定义”常量，正如您所知，这将导致上述错误。

话虽如此，请记住，如果您使用`define`在类中创建常量，则它不是纯类常量 - 您不能将其称为`A::MyConstant`. 同时，如果您已经完成`const AnotherConstant = "Hey";`，`Class A`您可以将其称为`A::AnotherConstant`. 但是，当`const`用于创建常量时，您不能将其值设置为变量。

我希望这可以更清楚地说明动态变量如何可以和不能分配给常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T05:51:13.843

问题：投射自定义消息并传递变量以便于管理
解决方案：使用装饰器模式

```
interface HtmlElementInterface {
    public function getText();
    public function render();
}

class DivDecorator implements HtmlElementInterface {
    protected $innerHtml;
    protected $class;
    public function __construct($class = null, $innerHtml = null) {
        $this->innerHtml = $innerHtml;
        $this->class = $class;
    }

    public function getText() {
        return $this->text;
    }

    public function render() {
        return "<div class='{$this->class}'>" . $this->innerHtml . "</div>";
    }

}

$message = "Error in the app";
$div = new DivDecorator("myclass", $message);
echo $div->render(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T16:29:59.797

动态生成常量的唯一方法是使用下面的定义函数。但正如另一个答案指出的那样，这不会是类级别的常量。

```
define('SUCCESSFULLY_REGISTERED', "<p class='$this->cssClassSuccess'>Registration successful!.</p><p>Log in with the username and password you registered with.</p>"); 
```

从那时起的常量可以用 SUCCESSFULL_REGISTERED 引用，并且是不可变的。

# c# - 如何异步打开 Telerik Rad 弹出窗口？

> ID：12804289
> 
> 赞同：0
> 
> 时间：2012-10-09T16:20:22.220
> 
> 标签：c#, asp.net, asynchronous, telerik, popup

我正在打开 Telerik RadWindowManager 弹出窗口。有一个很长的数据库操作要执行。在加载期间，即大约 35-40 秒，目前，我继续等待，直到该过程结束。

有什么办法可以先加载设计并显示一个加载器/进度条通知用户等待...实际上当网速很慢时问题会变得更糟...

任何建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:01:38.753

这里我有一个很好的例子。见[这里](http://demos.telerik.com/aspnet-ajax/upload/examples/customprogress/defaultcs.aspx?RadUrid=4b41512c-b7a6-4df5-97fe-cb4b05bb2c6a)演示。

.aspx 文件：

```
<telerik:RadScriptManager id="ScriptManager1" runat="server" />

 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" OnAjaxRequest="RadAjaxManager1_AjaxRequest"/>
 <p>
   Press the submit button in order to start monitoring custom progress
 </p>
 <asp:button ID="buttonSubmit" runat="server" Text="Submit" OnClick="buttonSubmit_Click" CssClass="RadUploadButton" />

 <telerik:RadProgressManager id="Radprogressmanager1" runat="server" />

 <telerik:RadProgressArea id="RadProgressArea1" runat="server" /> 
```

aspx.cs 文件：

```
 protected void Page_Load(object sender, System.EventArgs e)
    {
        if (!IsPostBack)
        {
            //Do not display SelectedFilesCount progress indicator.
            RadProgressArea1.ProgressIndicators &= ~ProgressIndicators.SelectedFilesCount;
        }

        RadProgressArea1.Localization.Uploaded = "Total Progress";
        RadProgressArea1.Localization.UploadedFiles = "Progress";
        RadProgressArea1.Localization.CurrentFileName = "Custom progress in action: ";
    }

    protected void buttonSubmit_Click(object sender, System.EventArgs e)
    {
        UpdateProgressContext();
    }

    private void UpdateProgressContext()
    {
        const int total = 100;

        RadProgressContext progress = RadProgressContext.Current;
        progress.Speed = "N/A";

        for (int i = 0; i < total; i++)
        {
            progress.PrimaryTotal = 1;
            progress.PrimaryValue = 1;
            progress.PrimaryPercent = 100;

            progress.SecondaryTotal = total;
            progress.SecondaryValue = i;
            progress.SecondaryPercent = i;

            progress.CurrentOperationText = "Step " + i.ToString();

            if (!Response.IsClientConnected)
            {
                //Cancel button was clicked or the browser was closed, so stop processing
                break;
            }

            progress.TimeEstimated = (total - i) * 100;
            //Stall the current thread for 0.1 seconds
            System.Threading.Thread.Sleep(100);
        }
    } 
```

现在应该更容易集成您的代码。

编辑：要在 PageLoad 中设置 RadProgressArea 后触发您的数据库操作，您需要在第一页加载后进行一些 ajax 调用（所以我只是添加`RadAjaxManager`到 ascx 文件上部）。使用此代码触发您的数据库调用：

javascript:

```
 function pageLoad(sender, eventArgs) {
     if (!eventArgs.get_isPartialLoad()) {
         $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest("StartDBOperation");
     }
 } 
```

ascx.cs 文件：

```
 protected void RadAjaxManager1_AjaxRequest(object sender, Telerik.Web.UI.AjaxRequestEventArgs e)
    {
        if (e.Argument == "StartDBOperation")
        {
            // Start DB operation here..
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:23:13.343

仍然是下面的替代方案...但不是解决方案

我可以在内容加载时显示如下加载面板

## 标记

```
<div id="loading" style=" width: 100px; height: 50px; display: none; 
                                              text-align: center; margin: auto;">
    loading...
</div>
<asp:Button ID="RadButton1" runat="server" 
                 Text="RadButton1" OnClientClick="openRadWnd(); return false;" />
<telerik:RadWindowManager ID="RadWindowManager1" runat="server">
   <Windows>
      <telerik:RadWindow ID="RadWindow1" runat="server" 
               NavigateUrl="url" ShowContentDuringLoad="false"
               OnClientShow="OnClientShow" OnClientPageLoad="OnClientPageLoad">
      </telerik:RadWindow>
   </Windows>
</telerik:RadWindowManager> 
```

## JavaScript

```
<script type="text/javascript">
    var loadingSign = null;
    var contentCell = null;
    function openRadWnd() {
        $find("<%=RadWindow1.ClientID %>").show();
    }
    function OnClientShow(sender, args) {
        loadingSign = $get("loading");
        contentCell = sender._contentCell;
        if (contentCell && loadingSign) {
            contentCell.appendChild(loadingSign);
            contentCell.style.verticalAlign = "middle";
            loadingSign.style.display = "";
        }
    }
    function OnClientPageLoad(sender, args) {
        if (contentCell && loadingSign) {
            contentCell.removeChild(loadingSign);
            contentCell.style.verticalAlign = "";
            loadingSign.style.display = "none";
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:29:21.817

在客户端用 JavaScript 打开 RadWindow，通过 JavaScript 设置所需的 URL。执行不处理 RadWindow 的部分回发。如果您仅在服务器上获取 URL - 使用相同的逻辑，但最初显示加载符号，当响应完成时调用脚本再次更改 RadWINdow 的 URL。 [http://www.telerik.com/help/aspnet-ajax/window-programming-opening.html](http://www.telerik.com/help/aspnet-ajax/window-programming-opening.html) [http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-javascript-from-server-side .html](http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-javascript-from-server-side.html) [http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html)

# linq - 从复杂的 LINQ 查询中获取 X 记录

> ID：12804296
> 
> 赞同：0
> 
> 时间：2012-10-09T16:20:42.580
> 
> 标签：linq, c#-4.0, linq-to-sql, linq-to-entities

如何从复杂的 LINQ 查询中获取 10 条记录？我试图 put `.Skip(X).Take(10)`，但它不起作用，这取决于我试图在哪里取 10 它返回完整的对象集或什么都不返回。

由于性能缓慢，在查询末尾设置`.Skip(X).Take(10)`并不是我想要的。

这是我的查询：

```
List<ReportReturn> report =  
    from var1 in context.Table1
    join var2 in context.Table2
        on var1.AccountID equals var2.AccountID
    join var3 in context.Table3
        on var1.AccountID equals var3.AccountID into all
    where 
        var1.SubAccountID == intSubAccountID && 
        // ...... and more conditions

    let actual = var1.Total.GetValueOrDefault(0)
    let Unique = var2.CountUnique 
    let Total = var2.Count

    // ........ and more helper values

    orderby var1.Date descending

    from final in all.DefaultIfEmpty()
    select new ReportReturn {
        // ........................some property assigments
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:56:43.650

只是写

```
.Skip(X).Take(10) 
```

会给你类型的输出，`IEnumerable<T>`但你的是`List<T>`类型。

所以你应该使用

```
.Skip(X).Take(10).ToList() 
```

在你的情况下。

# ruby - Ruby：为什么等号在文字正则表达式中导致解析错误？

> ID：12804298
> 
> 赞同：6
> 
> 时间：2012-10-09T16:20:54.197
> 
> 标签：ruby, regex, parsing

这些解析和执行很好：

```
"=".scan(/=/)
"=".scan (/=/) 
```

这会导致“未终止的正则表达式遇到文件结尾”：

```
"=".scan /=/ 
```

`=`如果我在错误消失之前插入一些东西：

```
"=".scan /^=/ 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:12:04.567

我猜你[在解析器中遇到了这个问题](https://github.com/ruby/ruby/blob/ruby_1_9_3/parse.y#L7436)：

```
case '/':
    if (IS_BEG()) {
        lex_strterm = NEW_STRTERM(str_regexp, '/', 0);
        return tREGEXP_BEG;
    }
    if ((c = nextc()) == '=') {
        set_yylval_id('/');
        lex_state = EXPR_BEG;
        return tOP_ASGN;
    } 
```

注意`nextc()`第二个中的检查`if`。供参考，[`tOP_ASGN`是](https://github.com/ruby/ruby/blob/ruby_1_9_3/parse.y#L726)：

```
%token <id> tOP_ASGN    /* +=, -=  etc. */ 
```

因此它用于操作员分配令牌。

这表明`/=/`在

```
'='.scan /=/ 
```

被视为除分配运算符 ( `/=`) 后跟 start-regex-literal ( `/`)。

你会遇到麻烦（略有不同）：

```
' ='.scan / =/ 
```

但不是这个：

```
' ='.scan(/ =/) 
```

当方法调用没有括号时，通常会产生歧义。在这种情况下，我认为运算符优先规则适用，这不是您所期望的。

我倾向于在我所有的方法调用上加上括号，因为我太老了而且脾气暴躁，不想担心解析器的行为方式。

# primefaces - 无法使用 Primefaces 显示简单的静态栏

> ID：12804299
> 
> 赞同：1
> 
> 时间：2012-10-09T16:20:56.297
> 
> 标签：primefaces, progress-bar

我正在尝试使用 primefaces 显示进度条，它是一个简单的静态条。这发生在所有浏览器中。下面是代码：

```
<p:column headerText="Your progress">
<p:progressBar id="prgBar" value="50" labelTemplate="50%" displayOnly="true"/>
</p:column> 
```

感谢您的时间。

# algorithm - 用凹凸像素制作直线的算法

> ID：12804301
> 
> 赞同：3
> 
> 时间：2012-10-09T16:21:10.487
> 
> 标签：algorithm, image-processing, signal-processing

**问题**：

我有一张从谷歌的静态地图 api 下载的图像。我使用这张图片基本上创建了一个用户点击的“魔杖”类型的功能。对于那些感兴趣的人，我正在使用图形切割算法来查找用户单击的形状。然后，我使用轮廓跟踪找到代表此形状边界的所有点（borderPoints）。

**我的目标**：

拉直线条（如果可能）并尽量减少边界点的数量（尽可能）。我目前的用例是房屋的屋顶，所以在大多数情况下，我希望我能找到角落并将它们用作边界点，而不是中间的所有不同点。但是由于像素线凹凸不平，我无法弄清楚如何找到这些角落。

**我的解决方案尝试**：

一种简单的技术是循环检查之前的点、当前点和之后的点。如果之前的点和之后的点具有相同的 x 或相同的 y，则可以删除当前点。这会稍微减少点数，但没有我想要的那么多。

我还尝试查看之前和之后的点，看看如果当前点不在某个斜率范围内，是否可以删除它，但收效甚微，因为偶尔会删除一个关键角点，因为图像有点模糊，而且角落有略微圆润的点。

**我的问题**：

有没有做这种事情的算法？如果是这样，它（他们）叫什么？如果没有，关于如何以编程方式解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:16:40.303

这听起来类似于[Ramer-Douglas-Peucker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)。通过利用所有点都位于网格上的事实，您可能会做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:26:28.533

在我看来，您正在寻找 1 次的多项式近似值。

要快速回答您的问题，您可能需要阅读以下内容：[http](http://en.wikipedia.org/wiki/Simple_regression) ://en.wikipedia.org/wiki/Simple_regression 。数值示例部分具体向您展示了如何计算您的线的方程。

多项式逼近允许您接近函数、曲线、点组，但是您想使用形式为 an.x^n + ... + a1.x^1 + a0 的多项式函数来调用它

在您的情况下，您需要一条线，因此您需要一个函数 a1.x + a0 ，其中将计算 a1 和 a0 以最小化您拥有的点集的误差。

有多种方法可以计算您的错误（称为规范）并将其最小化。例如，您可能有兴趣找到使与您拥有的任何点的距离最小的线（最小化最大值），或最小化与整个点集的距离（最小化绝对差的总和，或差的平方和等）

在算法方面，您可能需要专门查看 Chebyshev 近似和 Remez 算法。所有这些都解决了具有任意次数多项式的函数的逼近，但在您的情况下，您只关心 1 次。

# algorithm - 寻找最频繁的元素

> ID：12804306
> 
> 赞同：-2
> 
> 时间：2012-10-09T16:21:31.580
> 
> 标签：algorithm, comparison

有几种颜色的球。对于一种特定的颜色，有超过一半的球具有这种颜色（>n/2）。我怎样才能找到这种颜色只需要 O(n) 运行时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:45:24.667

您可以使用[Boyer-Moore 多数算法](http://www.cs.utexas.edu/~moore/best-ideas/mjrty/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:27:25.777

找出每个球的颜色并计算出来。如果您只想找到最频繁的，这似乎根本不是排序。只需计算每种颜色的球数。您可以使用哈希表，关键是颜色，然后迭代该点。还要跟踪颜色。

编辑：再次阅读后，我意识到它没有回答问题。

A）您可以通过迭代每种可用颜色（假设您正在制作颜色列表）在最后进行跟踪，因为将有少于 n 次比较，在最坏的情况下它将是 O(n)。

B) 当你计算球数时，记录最大的数。每当它被击败时，将其替换为具有最高计数的当前颜色。您可能希望跟踪颜色以及最高数字。这样，您将在每次运行时进行比较。这又将是 O(n)，但会有更多的比较。

# c# - WCF 客户端中传递的多个参数不起作用（即使包装了 WebMessageBodyStyle）

> ID：12804308
> 
> 赞同：3
> 
> 时间：2012-10-09T16:21:36.647
> 
> 标签：c#, .net, json, wcf, rest

嗨，StackOverflowers 同事，

我有一个 WCF 服务 wrtten C#，我可以成功地从 jquery 之类的东西中使用它。

我希望能够通过在 C# 中添加 Web 服务引用并在代码中进行调用来使用它。一切都很顺利，直到我添加了多个参数。当我尝试调用**任何**Service 方法时，我收到此错误：

> 合约“IPublic”的操作“GetStopNames”指定了多个要序列化的请求主体参数，而无需任何包装器元素。最多一个 body 参数可以在没有包装元素的情况下被序列化。删除额外的正文参数或将 WebGetAttribute/WebInvokeAttribute 上的 BodyStyle 属性设置为 Wrapped。

我用谷歌搜索并搜索了 StackOverflow 多年，但似乎每个人都通过设置 `BodyStyle=WebMessageBodyStyle.Wrapped` WebGet / WebInvoke 属性解决了他们的问题。

接口中我的一种服务方法的示例：

```
 [OperationContract]
    [WebGet( BodyStyle=WebMessageBodyStyle.WrappedRequest
     , UriTemplate = "GetOperators?appKey={apk}"
     , RequestFormat = WebMessageFormat.Json
     , ResponseFormat = WebMessageFormat.Json)]
    ResultList GetOperators(string apk); 
```

这有什么问题吗？

我只是打电话

```
ServiceReference1.PublicClient c = new ServiceReference1.PublicClient();
c.GetOperators("XXX"); 
```

在客户端内部，它在第二行中断。

有任何想法吗？如果您需要更多数据来帮助回答我，请添加评论:)

[编辑：这是我的 Web.config 文件http://pastebin.com/CyQNG6wk](http://pastebin.com/CyQNG6wk)中相关位的摘录

编辑：我在评论中链接的 serviceContract 的快捷方式 [http://pastebin.com/bvGmGtfd](http://pastebin.com/bvGmGtfd)

我最终切换到使用 WebApi，但我一直保持这个问题开放，因为我仍然不确定它为什么会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T00:53:37.143

它是 GetStopNames 中的问题。我假设它是 Http Get (WebGet)。确保它接受的所有参数都在 uri 模板 GetStopNames(string p1, string p2, string p3) 中定义

uri = "GetStopNames/{p1}/{p2}?param1={p3}" 或 GetStopNames?param1={p1}¶m2={p2}¶m1={p3} 或任何组合

您不能通过添加服务引用来生成休息代理。您是否也有具有相同界面的基于肥皂的服务？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:09:00.473

```
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "GetOperators?appKey={apk}",
     BodyStyle =  WebMessageBodyStyle.Wrapped,
     ResponseFormat = WebMessageFormat.Json,RequestFormat=WebMessageFormat.Json)]
     ResultList GetOperators(string apk); 
```

在 .svc 文件中确保 Service="Developer_Portal.Public"

# requiredfieldvalidator - 必填字段验证器不适用于 html 编辑器

> ID：12804314
> 
> 赞同：2
> 
> 时间：2012-10-09T16:21:52.223
> 
> 标签：requiredfieldvalidator, html-editor

我有一个使用 cc1:Editor 的文本框，当我在其上放置必填字段验证器时，它会在页面加载后立即显示。如何隐藏错误并仅在 html 编辑器框为空时才显示？

```
<code><cc1:Editor ID="txtDescription" Width="500px" Height="525px" 
 runat="server" TextMode="SingleLine" /></code>
<code>
<asp:RequiredFieldValidator ID="rfvDescription" runat="server" 
ControlToValidate="txtDescription"  
ErrorMessage="Must include Description" Font-Bold="True"></asp:RequiredFieldValidator>
</code>

<code><asp:Button ID="SubmitBtn" runat="server" 
Text="Submit" OnClick="SubmitBtn_Click" class="form-td" Height="30px" /> 
```

```
<script language="javascript" type="text/javascript">
    document.onkeypress = keyhandler;
    function keyhandler(e) {
      Key = window.event.keyCode; if (Key == 13) {
        var obj = document.getElementById('<%=SubmitBtn.ClientID%>');
        obj.focus();
        obj.click();
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:55:43.613

是的，您可以在回发事件的提交按钮客户端和服务器端验证上执行自定义验证，从而删除必需的字段验证器。检查以下示例：在您的 aspx 页面上

```
<p>

    <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="javascript:return ValidateEditor();" 
        ValidationGroup="myGroup" onclick="Button1_Click" />
    <br />
</p>
<asp:Label ID="lblMessage" runat="server" ForeColor="Red"></asp:Label>
<cc1:Editor ID="Editor1" runat="server" />
<script type="text/javascript">
    function ValidateEditor() {
        var txtEditor = $find('<%=Editor1.ClientID %>');
        if (txtEditor.get_content() == null || txtEditor.get_content() == '') {
            alert('Text cannot be empty');
            document.getElementById('<%=lblMessage.ClientID %>').innerHTML='Text cannot be empty';
            return false;
        }
        else
            return true;
    }
</script> 
```

在服务器端

```
 if (string.IsNullOrEmpty(Editor1.Content.ToString()))
        {
            lblMessage.Text = "Text cannot be empty";
        }
        else
        {
            // Do your work here
        } 
```

# css - Sublime Text 2 css 颜色

> ID：12804334
> 
> 赞同：2
> 
> 时间：2012-10-09T16:23:30.890
> 
> 标签：css, syntax, colors, sublimetext2, css-color

在 Sublime Text 2 中，对于特定主题，我希望属性使用一种颜色，值使用一种颜色。

```
background:#FFF url('some/img.png') 10px 10px; 
```

`background`______（属性名称）应该是一种颜色

`#FFF url('some/img.png') 10px 10px` ____________（值）应该是另一种颜色（整个值的一种颜色）。

我知道我必须修改主题颜色集，但有人知道怎么做吗？

还有一件事，我不希望冒号后有空格（点击标签时）

我想要“浮动：左；” 而不是“浮动：左；”。有谁知道我在哪里可以设置这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:17:41.293

看看这个[http://tmtheme-editor.herokuapp.com/](http://tmtheme-editor.herokuapp.com/) 这对于你的元素样式非常有用..但是如果你喜欢你当前的主题并且你只想在 CSS 中编辑标签、类、id ...等那么你必须编辑你正在使用的主题文件..通常这是在`Sublime Text 2\Packages\Color Scheme - Default\skin-name`

之后，如果它们不存在以下规则，则必须编辑或添加：

```
<dict>
        <key>name</key>
        <string>css tag-name</string>
        <key>scope</key>
        <string>meta.selector.css entity.name.tag</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#9EFFFF</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css#id</string>
        <key>scope</key>
        <string>meta.selector.css entity.other.attribute-name.id</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#FFB454</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css.class</string>
        <key>scope</key>
        <string>meta.selector.css entity.other.attribute-name.class</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#5FE461</string>
            <key>fontStyle</key>
            <string> underline</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css property-name:</string>
        <key>scope</key>
        <string>support.type.property-name.css</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#9DF39F</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css property-value;</string>
        <key>scope</key>
        <string>meta.property-group support.constant.property-value.css, meta.property-value support.constant.property-value.css</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#F6F080</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css @at-rule</string>
        <key>scope</key>
        <string>meta.preprocessor.at-rule keyword.control.at-rule</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#F6AA11</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css additional-constants</string>
        <key>scope</key>
        <string>meta.property-value support.constant.named-color.css, meta.property-value constant</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#EDF080</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>css constructor.argument</string>
        <key>scope</key>
        <string>meta.constructor.argument.css</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#EB939A</string>
        </dict>
    </dict> 
```

当然你可以填写你喜欢什么颜色的值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T21:19:36.207

还不确定颜色属性和值，但对于 css 间距，我可能有一个答案。转到`C:\Users\<username>\AppData\Roaming\Sublime Text 2\Packages\CSS\css_completions.py`第 190 行。更改`l.append((p, p + ": "))`为`l.append((p, p + ":"))`

# ios - 应用更新 ios 后获取以前的应用版本

> ID：12804337
> 
> 赞同：0
> 
> 时间：2012-10-09T16:23:48.883
> 
> 标签：ios

有谁知道在应用更新后获取以前的应用版本的方法？我们实际上错过了将这些信息存储在某个地方，我需要以某种方式获取以前的应用程序版本。我不确定是否有可能，任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:29:10.097

这是不可能的，因为一旦安装了新的应用程序，以前的应用程序二进制文件的任何痕迹都会被新的二进制文件替换。

因此，唯一的方法是将当前版本存储在您的密钥中`NSUserDefaults`：

*   每次启动时检查存储在 中的密钥`NSUserDefaults`是否与当前版本不同
*   如果不同，则应用程序刚刚更新，之前的版本是`NSUserDefaults`键的值。在这种情况下，在检索它之后，将旧版本值替换为当前版本，`NSUserDefaults`以便下次启动。

*（例如，可以使用当前版本的应用程序获得`[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"]`）*

但是，只要您没有`NSUserDefaults`在以前的版本中存储信息，就无法检查是否您自己没有实现这种系统。

# ipad - 应用组织和 UISplitViewController

> ID：12804340
> 
> 赞同：0
> 
> 时间：2012-10-09T16:23:59.020
> 
> 标签：ipad, uisplitviewcontroller

我的应用组织有问题。我想要一个带有四个按钮的主页视图。每个将视图推送到 splitView。

所以在我的主视图中，我不希望在纵向或横向模式下显示任何 masterView。但是在我接下来的四个视图中，我希望 masterView 随时显示，并且我希望能够有一个返回按钮来返回主视图。

我的问题是我如何实现这样的目标？

*   我是否必须将我的主视图创建为应用程序的 rootViewController，然后为每个按钮创建一个 splitView。然后创建一个后退按钮来关闭 splitView。
*   我是否必须创建一个 splitView 并使用主视图显示。我不知道如何在某些视图上以纵向模式隐藏我的大师班并在其他视图上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:28:57.653

UISplitViewController 必须是根视图控制器。

因此，您将使用包含四个按钮的 homeViewController 启动您的应用程序，每个按钮都会告诉您的应用程序委托从根目录中删除主视图控制器并创建一个 splitViewController 并将其设为根。

显然，要返回，您需要 splitViewController 上的按钮告诉应用程序委托删除 splitViewController 并替换为新加载的 homeViewController。

* * *

从情节提要中获取 viewController 并将其附加到窗口的示例

```
window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *homeViewController = [mainStoryboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
[window addSubview:homeViewController.view];
[window makeKeyAndVisible]; 
```

# sql - 比较“IN”子句和结果集中的项目

> ID：12804342
> 
> 赞同：0
> 
> 时间：2012-10-09T16:24:01.813
> 
> 标签：sql, oracle

我想实现以下目标，我有以下查询（就这么简单），

```
SELECT ENT_ID,TP_ID FROM TC_LOGS WHERE ENT_ID IN (1,2,3,4,5). 
```

现在该表`TC_LOGS`可能没有 IN 子句中的所有项目。所以假设表`TC_LOGS`只有1,2。我想比较 IN 子句中的项目，即 1,2,3,4,5 和 1,2（结果集），并得到结果为 FOUND - 1,2 NOT FOUND - 3,4,5。我已经通过在应用程序代码中的结果集上应用 XSL 转换来实现这一点，但我想在查询中实现这一点，我觉得这更像是解决这个问题的一个优雅的解决方案。另外，我尝试了以下查询`NVL`，只是为了将 FOUND 和 NOT FOUND 项目分开，

```
SELECT NVL(ENT_ID,"NOT FOUND") FROM TC_LOGS WHERE ENT_ID IN(1,2,3,4,5) 
```

我期待的结果是 1,2,NOT FOUND,NOT FOUND,NOT FOUND

但是上面的查询没有返回任何结果。如果有人可以在这里指导我正确的道路，我将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:29:11.717

假设您`IN`列表中的项目可以（或可以来自）另一个查询，您可以执行类似的操作

```
WITH src AS (
  SELECT level id
    FROM dual
 CONNECT BY level <= 5)
SELECT nvl(ent_id, 'Not Found' )
  FROM src
       LEFT OUTER JOIN tc_logs ON (src.id = tc_logs.ent_id) 
```

在我的例子中，`src`查询只是生成数字 1 到 5。您可以轻松地从不同的表中获取该数据，将数字加载到您使用`TABLE`运算符查询的集合中，将数字加载到您的临时表中查询等，具体取决于`IN`列表数据的确定方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:32:24.663

NVL 不起作用，因为当与 IN 语句不匹配时，不会返回任何值（包括 NULLS）。

你可以做的是这样的：

```
SELECT NVL(ENT_ID, "NOT FOUND") 
FROM TC_LOGS
RIGHT OUTER JOIN (
   SELECT 1 AS 'TempID' UNION 
   SELECT 2 UNION 
   SELECT 3 UNION
   SELECT 4 UNION 
   SELECT 5) AS Sub ON ENT_ID = TempID 
```

对于没有匹配项的 ENT_ID，外连接将返回 NULLS。请注意，我不是 Oracle 人员，所以我不能保证这种语法是完美的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:08:49.530

如果您有一个表（让我们使用 table src ）包含所有 (1,2,3,4,5) 值，则可以使用完全连接。您也可以使用 (WITH src AS ( SELECT level id FROM dual CONNECT BY level <= 5) 作为 src 表)

```
 SELECT 
           ent_id,tl.tp_id,src.tp_id 
         FROM 
           src
        FULL JOIN
          tc_logs tl
        USING (ent_id)
        ORDER BY
          ent_id 
```

这是oracle完全加入的网站。[http://psoug.org/snippet/Oracle-PL-SQL-ANSI-Joins-FULL-JOIN_738.htm](http://psoug.org/snippet/Oracle-PL-SQL-ANSI-Joins-FULL-JOIN_738.htm)

# php - 如何存储图像？

> ID：12804344
> 
> 赞同：2
> 
> 时间：2012-10-09T16:24:20.490
> 
> 标签：php, symfony

我不明白[Gaufrette](https://github.com/KnpLabs/KnpGaufretteBundle)和 symfony2。

[在我看来，这](https://github.com/KnpLabs/Gaufrette#try-it)似乎只适用于文本文件/文本内容。我可以创建一个文件，但不能从本地源（即路径）复制。

我想做的是这样的：

```
$adapter = new LocalAdapter($realpath);
$filesystem = new Filesystem($adapter);
$filesystem->fromUploadedFile($tempPathOfUploadedFile,$idForGaufrette); 
```

如何存储图像以及如何在用户请求时处理它的输出？

**更新：**

*   如何在 symfony 中访问上传文件的临时文件名”？
*   如何访问`Symfony\Component\HttpFoundation\File\UploadedFile`Symfony2 中对象中存在的现有私有属性 $path？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:35:10.823

该方法`copy(x, y)`未实现，但如果要存储文件，可以使用 [Filesystem Class](https://github.com/KnpLabs/Gaufrette/blob/master/src/Gaufrette/Filesystem.php#L46)`rename($key, $new)` 中定义的方法移动它。

为了在用户请求时处理输出，您只需要一个指向图像路径的链接（可能在数据库中）。所以你不需要文件系统（你可以用`has($key)`方法检查文件是否存在）。

在所有情况下，都使用适配器[Local](https://github.com/KnpLabs/Gaufrette/blob/master/src/Gaufrette/Adapter/Local.php)在本地工作。

如果您需要像“ftp://mydomain/myPicture”这样的流包装器，我最近发送了一个[PR](https://github.com/KnpLabs/KnpGaufretteBundle#stream-wrapper)以在 config.yml 中配置流包装器，并注册您想要的文件系统及其域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:03:07.387

要获取 tmp 文件名：

```
$file->getPathName(); // /tmp/filename 
```

其中 $file 是一个`Symfony\Component\HttpFoundation\File\UploadedFile`对象。

# silverlight - Amcharts SerialChart 多折线图不同类别值成员路径（Silverlight）

> ID：12804349
> 
> 赞同：7
> 
> 时间：2012-10-09T16:24:35.240
> 
> 标签：silverlight, amcharts, linegraph

**编辑**在与托尼的以下对话后，我重写了我的问题以使其更容易理解（谢谢！）。

**目标**在同一个图表中渲染多个折线图（比如说 2）。图表具有不同的 x/y 值对。对于一个 x 值，我不知道两个 y 值。

我正在使用 Silverlight。可用的类是`SerialChart`和`LineGraph`。两个图的数据源相同，都是在`SerialChart`层级设置的。x 轴的属性名称也在此处为两个图形 ( `CategoryValueMemberPath`) 定义。

正如 amCharts 文档所建议的，我们需要创建具有类别轴（x 轴）属性的对象，然后每个图都有一个属性。我们称它们为“Graph1”和“Graph2”。所以数据源看起来像这样：

```
List<MyClass> data = new List<MyClass>()
{
   new MyClass() { Category = 0.1, Graph1 = 0.14, Graph2 = ??? }
  ,new MyClass() { Category = 0.15, Graph1 = ???, Graph2 = 0.05 }
  ,new MyClass() { Category = 0.2, Graph1 = 0.35, Graph2 = ??? }
  ,new MyClass() { Category = 0.18, Graph1 = ???, Graph2 = 0.12 }
  ... and so on ...
} 
```

**问题**我应该如何处理“？？？” 价值观？对于该类别值，我没有该图表的实际值。

如果我没有设置值，则假定默认值为 0.0，它会在 x 轴上绘制一个尖峰。如果我设置了先前已知的 Graph1/Graph2 值，那么它会创建一个不应该存在的水平连接。我基本上是在更改导致错误结果的图表。

那么我该如何解决呢？我感觉 amCharts 不支持这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:09:18.683

您需要添加两个“值”轴，一个在 X 方向，一个在 Y 方向（想象一下，就像一个气泡图）。

```
// AXES
// X
var xAxis = new AmCharts.ValueAxis();
xAxis.position = "bottom";
xAxis.gridAlpha = 0.1;
xAxis.autoGridCount = true;
chart.addValueAxis(xAxis);

// Y
var yAxis = new AmCharts.ValueAxis();
yAxis.position = "left";
yAxis.gridAlpha = 0.1;
yAxis.autoGridCount = true;
chart.addValueAxis(yAxis); 
```

将所有数据点合并到一个具有公共 X 轴字段名称（在我的示例中为“x”）的数组中，对于第 1 行的点，添加一个属性为 'line1' 及其值，对于第 2 行的点，添加一个'line2' 的属性。

例如，您的数据将如下所示：

```
var chartData = [
  {x:0.1,line1:0.25},
  {x:0.246,line1:0.342},

  {x:0.12,line2:0.16},
  {x:0.3,line2:0.485}
]; 
```

然后为图表中的每一行添加一个“图表”，指定从对象数组中获取值的位置。

```
// GRAPHS
var graph = new AmCharts.AmGraph();
graph.xField = "x";
graph.yField = "line1";
graph.lineAlpha = 1;
graph.lineColor = '#FF9E01';
chart.addGraph(graph);

var graph2 = new AmCharts.AmGraph();
graph2.xField = "x";
graph2.yField = "line2";
graph.lineAlpha = 1;
graph2.lineColor = '#9EFF01';
chart.addGraph(graph2); 
```

我已经为你把所有这些都放到了一个小提琴中 - [http://jsfiddle.net/64EWx/](http://jsfiddle.net/64EWx/)

# android - AndEngine：获取 SIGSEGV 和 TouchEventPool 事件

> ID：12804350
> 
> 赞同：2
> 
> 时间：2012-10-09T16:24:41.997
> 
> 标签：android, andengine

我正在使用andengine 与android 开发游戏。基本上，我使用 2`ArrayList`来存储我的 2 种 Sprite。我`Sprite`在运行时添加和删除这两种类型，以响应用户交互。但是，我会随机崩溃，只有以下错误代码：

```
10-09 12:11:13.532: A/libc(8015): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
10-09 12:11:13.572: V/AndEngine(8015): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 2 item not yet recycled. Allocated 1 more.
10-09 12:11:13.572: V/AndEngine(8015): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 2 item not yet recycled. Allocated 1 more.
10-09 12:11:13.602: V/AndEngine(8015): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 3 item not yet recycled. Allocated 1 more.
10-09 12:11:13.602: V/AndEngine(8015): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 3 item not yet recycled. Allocated 1 more.
10-09 12:11:13.622: V/AndEngine(8015): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 4 item not yet recycled. Allocated 1 more.
10-09 12:11:13.622: V/AndEngine(8015): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 4 item not yet recycled. Allocated 1 more.
10-09 12:11:16.195: V/AndEngine(8015): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 5 item not yet recycled. Allocated 1 more.
10-09 12:11:16.195: V/AndEngine(8015): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 5 item not yet recycled. Allocated 1 more.
10-09 12:11:16.275: V/AndEngine(8015): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 6 item not yet recycled. Allocated 1 more.
10-09 12:11:16.275: V/AndEngine(8015): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 6 item not yet recycled. Allocated 1 more. 
```

当我继续在屏幕上移动手指时，`TouchEvent`池警告继续弹出，但游戏本身已挂起。老实说，我不知道是什么原因造成的！我环顾四周，甚至无法确定单个动作的崩溃。

我创建/删除我的精灵的方法如下：

**类型 ASprite**：

*   在里面创建`TimerHandler`
*   删除里面`ContactListener`产卵`runOnUpdateThread()` `Runnable`

**类型 BSprite**：

*   在覆盖内创建`onSceneTouchEvent()`，因为 Activity 扩展了`IOnSceneTouchListener`.
*   删除里面`ContactListener`产卵`runOnUpdateThread()` `Runnable`

每次`Sprite`创建 a 时，它都会添加到其各自的`ArrayList`. 当它需要被移除时，它会`ArrayList`从`ContactListener`.

任何帮助/想法将不胜感激！谢谢！

编辑：通过一些试验和错误，我***很***确定问题出在 TypeBSprite

编辑：我已经像这样实现了我的 TypeBSprite 创建：

```
mEngine.runOnUpdateThread(new Runnable() {
    @Override
    public void run() {
        AnimatedSprite sprite = new AnimatedSprite(sX, sY, mSpriteRegion, getVertexBufferObjectManager());

        sprite.setRotation(sRotation);
        mScene.attachChild(sprite);

        Body body = PhysicsFactory.createBoxBody(mPhysicsWorld, sprite, BodyType.StaticBody, MY_FIXTURE);
        sprite.setUserData("spiteB");
        body.setUserData(sprite);
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(sprite, body, true, true)); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T04:16:50.287

弄清楚了！`runOnUpdateThread` `Runnable`问题在于注册和实际执行之间的时间差距。问题是`ContactListener`对于同一个碰撞被多次调用，因此`runOnUpdateThread`用于删除身体的被调用在同一个对象上被多次调用。

为了解决这个问题，我将 Sprite 的`ContactListener`设置设置`UserData`为“已删除”。当在`ContactListener`同一个对象上再次调用时，比较的 "语句`if (...)`会忽略它，因为它应该已经在删除的路上了。`Sprite``UserData`

希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T05:52:05.883

0x28ac9648 (code=1) 处的错误致命信号 11 (SIGSEGV) 的主要原因是堆栈已满，您需要在运行时清除堆栈或回收

look in log cat you are allocating items but not recycling

its also giving error with 6 item not yet recycled

thus if u keep on recycling older items you wll find game working fine without any error

# android - 安卓数字键盘

> ID：12804352
> 
> 赞同：2
> 
> 时间：2012-10-09T16:24:46.693
> 
> 标签：android, cordova, android-edittext

我的应用程序正常工作，但无法让键盘仅显示数字键（包括小数）。我正在使用phonegap，所以我不知道这是否是导致问题的原因，但我尝试添加：

```
<EditText android:numeric="decimal" /> 
```

进入我的 AndroidManifest.xml 和 activity_main.xml 但没有运气。

我想我需要在 phonegap 中进行一些更改，因为我的 activity_main.xml 只显示 hello world 字符串，而不是我的应用程序的其他组件。

**编辑**

这是“activity_main.xml”

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

  <EditText   
    android:inputType="number">
  </EditText>

</RelativeLayout> 
```

现在这里是 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.yourappname.yourappname"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<EditText android:inputType="phone" android:numeric="decimal"></EditText>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
    android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T05:59:51.747

您好，您还没有为您的editext 指定高度和宽度。因此它不会显示在您的布局文件中。就输入而言，inputType=number 将弹出数字键盘。使用下面的代码进行 EditText。

```
 <EditText 
     android:id="@+id/edittext"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:inputType="number"/> 
```

# .net - 程序集在 64 位应用程序中加载两次

> ID：12804361
> 
> 赞同：8
> 
> 时间：2012-10-09T16:25:11.060
> 
> 标签：.net, clr

在 x64 应用程序中，看起来某些程序集被映射到进程地址空间两次。程序集从相同的位置，在相同的加载上下文中加载。不涉及显式反射 API 或应用程序域。

这不会对具有本机图像 (*.ni.dll) 的本机 DLL 或框架 DLL 进行再现，但对本地构建的程序集以及诸如 System.Threading.Tasks.Dataflow.dll 和 StyleCop.dll 等其他程序集进行再现。

为 x86 编译解决方案时，它不会重现。

我在 Process Explorer 和 VMMap 中看到重复的条目。当我在windbg中中断模块加载时，我在运行x64和x86时看到了不同的行为。

NGENing 组件没有任何区别。

为了演示，我将构建程序集的解决方案和引用该程序集的可执行文件放在一起。我可以提供该代码，但它非常简单：程序集公开一个枚举，EXE 引用该枚举中的一个值并将其打印出来。

当我构建面向 x64 的程序集和 EXE 并运行 EXE 时，我在 VMMap 和 Process Explorer 中看到重复的条目。两者都表明引用的程序集位于同一路径。VMMap 显示两个条目的 .rsrc、.text 和 Header 部分（以及每个条目中的 3 个保留块）。

当我针对 x86 构建完全相同的解决方案并运行 EXE 时，我在 VMMap 和 Process Explorer 中看到程序集的 1 个条目。

我使用“sxe ld TestAssembly”在windbg 下运行了32 位和64 位版本，以观察有问题的程序集的负载。

在下面的堆栈中，您会看到 64 位版本中有 3 个中断，而 32 位版本中只有 2 个。

64 位版本中的前 2 个堆栈看起来与 32 位版本中的 2 个相似，但第 3 个堆栈是 64 位独有的。

有什么想法吗？我知道 64bit 是 2x 32bit，但我没想到程序集会被加载两次！:)

我在这里上传了一个重现问题的解决方案：

[https://skydrive.live.com/redir?resid=3C60C20A37311DB4!969&authkey=!AJWx4Cm3XDWeu2M](https://skydrive.live.com/redir?resid=3C60C20A37311DB4!969&authkey=!AJWx4Cm3XDWeu2M)

该 zip 文件中包含重现步骤，但如果有不清楚的地方，请告诉我！

在 64 位中，以下是在 windbg (sxe ld TestAssembly) 下加载程序集时的堆栈：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 AMD64
 Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: C:\src\DualAssemblyLoadTest\bin\x64\Debug\DualAssemblyLoadTest.exe
 ...
 0:000> sxe ld TestAssembly
 0:000> g
 (15ac.a9c): Unknown exception - code 04242420 (first chance)
 ModLoad: 000007fe`f3cf0000 000007fe`f3cf6000   TestAssembly.dll
 ntdll!ZwMapViewOfSection+0xa:
 00000000`77b0159a c3              ret
 0:000> k
 Child-SP          RetAddr           Call Site
 00000000`00498e38 000007fe`fdfd3c90 ntdll!ZwMapViewOfSection+0xa
 00000000`00498e40 00000000`773f316d KERNELBASE!MapViewOfFileEx+0x90
 00000000`00498ec0 000007fe`f1558f22 KERNEL32!MapViewOfFileExStub+0x1d
 00000000`00498f00 000007fe`f155ac0a clr!CLRMapViewOfFileEx+0x42
 00000000`00498f80 000007fe`f155aa36 clr!MappedImageLayout::MappedImageLayout+0x166
 00000000`00499270 000007fe`f152ada9 clr!PEImageLayout::Map+0x47
 00000000`004992e0 000007fe`f152ad42 clr! ?? ::FNODOBFM::`string'+0x5b6d5
 00000000`00499330 000007fe`f1518273 clr! ?? ::FNODOBFM::`string'+0x5b5ba
 00000000`004993b0 000007fe`f1517c67 clr!RuntimeOpenImageInternal+0xc3
 00000000`00499480 000007fe`f1517b83 clr!GetAssemblyMDInternalImportEx+0xd9
 00000000`00499500 000007fe`f1565007 clr!CreateMetaDataImport+0x1b
 00000000`00499540 000007fe`f1564f69 clr!CAssemblyManifestImport::InitAndLoadMetaData+0x63
 00000000`00499590 000007fe`f1567b7f clr!CreateAssemblyManifestImport+0x99
 00000000`004995e0 000007fe`f156862d clr!CAsmDownloadMgr::CreateAssembly+0x110
 00000000`00499d90 000007fe`f1568243 clr!CAsmDownloadMgr::DoSetupRFS+0xc6
 00000000`0049a1a0 000007fe`f1567e1c clr!CAsmDownloadMgr::DoSetup+0x1d0
 00000000`0049a4b0 000007fe`f156672b clr!CAssemblyDownload::DoSetup+0xb8
 00000000`0049a550 000007fe`f1566615 clr!CAssemblyDownload::DownloadComplete+0xbb
 00000000`0049a5a0 000007fe`f1565094 clr!CAssemblyDownload::KickOffDownload+0x16d
 00000000`0049a880 000007fe`f151c5df clr!CAssemblyName::BindToObject+0x543
 00000000`0049a9d0 000007fe`f151c374 clr!FusionBind::RemoteLoad+0x1cf
 00000000`0049ab00 000007fe`f151c0ba clr!FusionBind::LoadAssembly+0x1d4
 00000000`0049ac20 000007fe`f151b3bd clr!AssemblySpec::FindAssemblyFile+0x116
 00000000`0049b3b0 000007fe`f1527ba4 clr!AppDomain::BindAssemblySpec+0x35e
 00000000`0049c5f0 000007fe`f15279fa clr!PEFile::LoadAssembly+0xe8
 00000000`0049c720 000007fe`f155b8fe clr!Module::LoadAssembly+0x361
 00000000`0049c9c0 000007fe`f14fd17b clr!Assembly::FindModuleByTypeRef+0x18f
 00000000`0049cd10 000007fe`f14f02d9 clr!ClassLoader::LoadTypeDefOrRefThrowing+0x452
 00000000`0049ce50 000007fe`eeb0950e clr!CEEInfo::resolveToken+0xc58
 00000000`0049d520 000007fe`eeabaac7 clrjit!ReaderBase::readBytesForFlowGraphNode_Helper+0x1389
 00000000`0049d940 000007fe`eeabf316 clrjit!ReaderBase::readBytesForFlowGraphNode+0x1a7
 00000000`0049da10 000007fe`eeac0c65 clrjit!ReaderBase::MSILToIR+0x186
 00000000`0049da70 000007fe`eeac0c06 clrjit!ReadProc+0x26
 00000000`0049dc40 000007fe`eeaa5d27 clrjit!THX_dop2_ReadProc+0x36
 00000000`0049dc70 000007fe`eeab732b clrjit!THX_dop2+0x77
 00000000`0049dcf0 000007fe`f15d07ee clrjit!PreJit::compileMethod+0x67
 00000000`0049dd70 000007fe`f15d073f clr!invokeCompileMethodHelper+0x6a
 00000000`0049ddc0 000007fe`f15d062e clr!invokeCompileMethod+0x8f
 00000000`0049de30 000007fe`f15d050c clr!CallCompileMethodWithSEHWrapper+0x46
 00000000`0049dec0 000007fe`f154e88a clr!UnsafeJitFunction+0x23c
 00000000`0049e440 000007fe`f1500971 clr!MethodDesc::MakeJitWorker+0x4ea
 00000000`0049e690 000007fe`f14ffecb clr!MethodDesc::DoPrestub+0xb1c
 00000000`0049eb70 000007fe`f14b24da clr!PreStubWorker+0x3eb
 00000000`0049ee70 000007fe`f14ff713 clr!ThePreStub+0x5a
 00000000`0049ef40 000007fe`f14ff242 clr!CallDescrWorkerInternal+0x83
 00000000`0049ef80 000007fe`f14ff30b clr!CallDescrWorkerWithHandler+0x4a
 00000000`0049efc0 000007fe`f169721c clr!MethodDescCallSite::CallTargetWorker+0x2e6
 00000000`0049f170 000007fe`f1697976 clr!RunMain+0x1e7
 00000000`0049f340 000007fe`f1697870 clr!Assembly::ExecuteMainMethod+0xb6
 00000000`0049f630 000007fe`f16973e6 clr!SystemDomain::ExecuteMainMethod+0x45e
 00000000`0049fbf0 000007fe`f169733e clr!ExecuteEXE+0x3f
 00000000`0049fc60 000007fe`f1693ed4 clr!CorExeMainInternal+0xae
 00000000`0049fcf0 000007fe`f99c74e5 clr!CorExeMain+0x14
 00000000`0049fd30 000007fe`f9c65b21 mscoreei!CorExeMain+0xe0
 00000000`0049fd80 00000000`773e652d MSCOREE!CorExeMain_Exported+0x57
 00000000`0049fdb0 00000000`77adc521 KERNEL32!BaseThreadInitThunk+0xd
 00000000`0049fde0 00000000`00000000 ntdll!RtlUserThreadStart+0x1d
 0:000> g
 ModLoad: 00000000`006b0000 00000000`006b6000   TestAssembly.dll
 ntdll!ZwMapViewOfSection+0xa:
 00000000`77b0159a c3              ret
 0:000> k
 Child-SP          RetAddr           Call Site
 00000000`00498e38 000007fe`fdfd3c90 ntdll!ZwMapViewOfSection+0xa
 00000000`00498e40 00000000`773f316d KERNELBASE!MapViewOfFileEx+0x90
 00000000`00498ec0 000007fe`f1558f22 KERNEL32!MapViewOfFileExStub+0x1d
 00000000`00498f00 000007fe`f155ac6b clr!CLRMapViewOfFileEx+0x42
 00000000`00498f80 000007fe`f155aa36 clr!MappedImageLayout::MappedImageLayout+0x1c7
 00000000`00499270 000007fe`f152ada9 clr!PEImageLayout::Map+0x47
 00000000`004992e0 000007fe`f152ad42 clr! ?? ::FNODOBFM::`string'+0x5b6d5
 00000000`00499330 000007fe`f1518273 clr! ?? ::FNODOBFM::`string'+0x5b5ba
 00000000`004993b0 000007fe`f1517c67 clr!RuntimeOpenImageInternal+0xc3
 00000000`00499480 000007fe`f1517b83 clr!GetAssemblyMDInternalImportEx+0xd9
 00000000`00499500 000007fe`f1565007 clr!CreateMetaDataImport+0x1b
 00000000`00499540 000007fe`f1564f69 clr!CAssemblyManifestImport::InitAndLoadMetaData+0x63
 00000000`00499590 000007fe`f1567b7f clr!CreateAssemblyManifestImport+0x99
 00000000`004995e0 000007fe`f156862d clr!CAsmDownloadMgr::CreateAssembly+0x110
 00000000`00499d90 000007fe`f1568243 clr!CAsmDownloadMgr::DoSetupRFS+0xc6
 00000000`0049a1a0 000007fe`f1567e1c clr!CAsmDownloadMgr::DoSetup+0x1d0
 00000000`0049a4b0 000007fe`f156672b clr!CAssemblyDownload::DoSetup+0xb8
 00000000`0049a550 000007fe`f1566615 clr!CAssemblyDownload::DownloadComplete+0xbb
 00000000`0049a5a0 000007fe`f1565094 clr!CAssemblyDownload::KickOffDownload+0x16d
 00000000`0049a880 000007fe`f151c5df clr!CAssemblyName::BindToObject+0x543
 00000000`0049a9d0 000007fe`f151c374 clr!FusionBind::RemoteLoad+0x1cf
 00000000`0049ab00 000007fe`f151c0ba clr!FusionBind::LoadAssembly+0x1d4
 00000000`0049ac20 000007fe`f151b3bd clr!AssemblySpec::FindAssemblyFile+0x116
 00000000`0049b3b0 000007fe`f1527ba4 clr!AppDomain::BindAssemblySpec+0x35e
 00000000`0049c5f0 000007fe`f15279fa clr!PEFile::LoadAssembly+0xe8
 00000000`0049c720 000007fe`f155b8fe clr!Module::LoadAssembly+0x361
 00000000`0049c9c0 000007fe`f14fd17b clr!Assembly::FindModuleByTypeRef+0x18f
 00000000`0049cd10 000007fe`f14f02d9 clr!ClassLoader::LoadTypeDefOrRefThrowing+0x452
 00000000`0049ce50 000007fe`eeb0950e clr!CEEInfo::resolveToken+0xc58
 00000000`0049d520 000007fe`eeabaac7 clrjit!ReaderBase::readBytesForFlowGraphNode_Helper+0x1389
 00000000`0049d940 000007fe`eeabf316 clrjit!ReaderBase::readBytesForFlowGraphNode+0x1a7
 00000000`0049da10 000007fe`eeac0c65 clrjit!ReaderBase::MSILToIR+0x186
 00000000`0049da70 000007fe`eeac0c06 clrjit!ReadProc+0x26
 00000000`0049dc40 000007fe`eeaa5d27 clrjit!THX_dop2_ReadProc+0x36
 00000000`0049dc70 000007fe`eeab732b clrjit!THX_dop2+0x77
 00000000`0049dcf0 000007fe`f15d07ee clrjit!PreJit::compileMethod+0x67
 00000000`0049dd70 000007fe`f15d073f clr!invokeCompileMethodHelper+0x6a
 00000000`0049ddc0 000007fe`f15d062e clr!invokeCompileMethod+0x8f
 00000000`0049de30 000007fe`f15d050c clr!CallCompileMethodWithSEHWrapper+0x46
 00000000`0049dec0 000007fe`f154e88a clr!UnsafeJitFunction+0x23c
 00000000`0049e440 000007fe`f1500971 clr!MethodDesc::MakeJitWorker+0x4ea
 00000000`0049e690 000007fe`f14ffecb clr!MethodDesc::DoPrestub+0xb1c
 00000000`0049eb70 000007fe`f14b24da clr!PreStubWorker+0x3eb
 00000000`0049ee70 000007fe`f14ff713 clr!ThePreStub+0x5a
 00000000`0049ef40 000007fe`f14ff242 clr!CallDescrWorkerInternal+0x83
 00000000`0049ef80 000007fe`f14ff30b clr!CallDescrWorkerWithHandler+0x4a
 00000000`0049efc0 000007fe`f169721c clr!MethodDescCallSite::CallTargetWorker+0x2e6
 00000000`0049f170 000007fe`f1697976 clr!RunMain+0x1e7
 00000000`0049f340 000007fe`f1697870 clr!Assembly::ExecuteMainMethod+0xb6
 00000000`0049f630 000007fe`f16973e6 clr!SystemDomain::ExecuteMainMethod+0x45e
 00000000`0049fbf0 000007fe`f169733e clr!ExecuteEXE+0x3f
 00000000`0049fc60 000007fe`f1693ed4 clr!CorExeMainInternal+0xae
 00000000`0049fcf0 000007fe`f99c74e5 clr!CorExeMain+0x14
 00000000`0049fd30 000007fe`f9c65b21 mscoreei!CorExeMain+0xe0
 00000000`0049fd80 00000000`773e652d MSCOREE!CorExeMain_Exported+0x57
 00000000`0049fdb0 00000000`77adc521 KERNEL32!BaseThreadInitThunk+0xd
 00000000`0049fde0 00000000`00000000 ntdll!RtlUserThreadStart+0x1d
 0:000> g
 ModLoad: 000007fe`f3cf0000 000007fe`f3cf6000   C:\src\DualAssemblyLoadTest\bin\x64\Debug\TestAssembly.dll
 ntdll!ZwMapViewOfSection+0xa:
 00000000`77b0159a c3              ret
 0:000> k
 Child-SP          RetAddr           Call Site
 00000000`0049b468 00000000`77aeacfc ntdll!ZwMapViewOfSection+0xa
 00000000`0049b470 00000000`77ae1327 ntdll!LdrpMapViewOfSection+0xbc
 00000000`0049b520 00000000`77ad7cc8 ntdll!LdrpFindOrMapDll+0x469
 00000000`0049b6a0 00000000`77ad7b2e ntdll!LdrpLoadDll+0x148
 00000000`0049b8b0 000007fe`fdfcc71f ntdll!LdrLoadDll+0x9a
 00000000`0049b920 000007fe`f150bf54 KERNELBASE!LoadLibraryExW+0x22e
 00000000`0049b990 000007fe`f150bec1 clr!CLRLoadLibraryEx+0xfc
 00000000`0049b9e0 000007fe`f152c30f clr!CLRLoadLibraryEx+0x51
 00000000`0049ba30 000007fe`f152c264 clr!LoadedImageLayout::LoadedImageLayout+0x9e
 00000000`0049bce0 000007fe`f155b133 clr!PEImageLayout::Load+0x3d
 00000000`0049bd20 000007fe`f155af5e clr!PEImage::Load+0x119
 00000000`0049bda0 000007fe`f152372c clr!PEFile::LoadLibrary+0xe2
 00000000`0049bdd0 000007fe`f15236cf clr!DomainFile::LoadLibrary+0x59
 00000000`0049be20 000007fe`f1521078 clr!DomainFile::DoIncrementalLoad+0xf6
 00000000`0049be50 000007fe`f1521463 clr!AppDomain::TryIncrementalLoad+0x145
 00000000`0049c250 000007fe`f1519c38 clr!AppDomain::LoadDomainFile+0x167
 00000000`0049c310 000007fe`f1519a7b clr!AppDomain::LoadDomainAssemblyInternal+0x178
 00000000`0049c400 000007fe`f1527a9c clr!AppDomain::LoadDomainAssembly+0x8c
 00000000`0049c720 000007fe`f155b8fe clr!Module::LoadAssembly+0x403
 00000000`0049c9c0 000007fe`f14fd17b clr!Assembly::FindModuleByTypeRef+0x18f
 00000000`0049cd10 000007fe`f14f02d9 clr!ClassLoader::LoadTypeDefOrRefThrowing+0x452
 00000000`0049ce50 000007fe`eeb0950e clr!CEEInfo::resolveToken+0xc58
 00000000`0049d520 000007fe`eeabaac7 clrjit!ReaderBase::readBytesForFlowGraphNode_Helper+0x1389
 00000000`0049d940 000007fe`eeabf316 clrjit!ReaderBase::readBytesForFlowGraphNode+0x1a7
 00000000`0049da10 000007fe`eeac0c65 clrjit!ReaderBase::MSILToIR+0x186
 00000000`0049da70 000007fe`eeac0c06 clrjit!ReadProc+0x26
 00000000`0049dc40 000007fe`eeaa5d27 clrjit!THX_dop2_ReadProc+0x36
 00000000`0049dc70 000007fe`eeab732b clrjit!THX_dop2+0x77
 00000000`0049dcf0 000007fe`f15d07ee clrjit!PreJit::compileMethod+0x67
 00000000`0049dd70 000007fe`f15d073f clr!invokeCompileMethodHelper+0x6a
 00000000`0049ddc0 000007fe`f15d062e clr!invokeCompileMethod+0x8f
 00000000`0049de30 000007fe`f15d050c clr!CallCompileMethodWithSEHWrapper+0x46
 00000000`0049dec0 000007fe`f154e88a clr!UnsafeJitFunction+0x23c
 00000000`0049e440 000007fe`f1500971 clr!MethodDesc::MakeJitWorker+0x4ea
 00000000`0049e690 000007fe`f14ffecb clr!MethodDesc::DoPrestub+0xb1c
 00000000`0049eb70 000007fe`f14b24da clr!PreStubWorker+0x3eb
 00000000`0049ee70 000007fe`f14ff713 clr!ThePreStub+0x5a
 00000000`0049ef40 000007fe`f14ff242 clr!CallDescrWorkerInternal+0x83
 00000000`0049ef80 000007fe`f14ff30b clr!CallDescrWorkerWithHandler+0x4a
 00000000`0049efc0 000007fe`f169721c clr!MethodDescCallSite::CallTargetWorker+0x2e6
 00000000`0049f170 000007fe`f1697976 clr!RunMain+0x1e7
 00000000`0049f340 000007fe`f1697870 clr!Assembly::ExecuteMainMethod+0xb6
 00000000`0049f630 000007fe`f16973e6 clr!SystemDomain::ExecuteMainMethod+0x45e
 00000000`0049fbf0 000007fe`f169733e clr!ExecuteEXE+0x3f
 00000000`0049fc60 000007fe`f1693ed4 clr!CorExeMainInternal+0xae
 00000000`0049fcf0 000007fe`f99c74e5 clr!CorExeMain+0x14
 00000000`0049fd30 000007fe`f9c65b21 mscoreei!CorExeMain+0xe0
 00000000`0049fd80 00000000`773e652d MSCOREE!CorExeMain_Exported+0x57
 00000000`0049fdb0 00000000`77adc521 KERNEL32!BaseThreadInitThunk+0xd
 00000000`0049fde0 00000000`00000000 ntdll!RtlUserThreadStart+0x1d
 0:000> g 
```

在 32 位中，以下是在 windbg (sxe ld TestAssembly) 下加载程序集时的堆栈：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 X86
 Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: bin\x86\Debug\DualAssemblyLoadTest.exe
 ...
 0:000> sxe ld TestAssembly
 0:000> g
 (14cc.15fc): Unknown exception - code 04242420 (first chance)
 ModLoad: 60350000 60358000   TestAssembly.dll
 eax=00000000 ebx=0084a1fc ecx=00000000 edx=00000000 esi=00000000 edi=00000000
 eip=77cafc42 esp=0042adac ebp=0042ade4 iopl=0         nv up ei pl zr na pe nc
 cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000246
 ntdll!NtMapViewOfSection+0x12:
 77cafc42 83c404          add     esp,4
 0:000> k
 ChildEBP RetAddr  
0042adac 7720e231 ntdll!NtMapViewOfSection+0x12
 0042ade4 6e337b8d KERNELBASE!MapViewOfFileEx+0x81
 0042ae3c 6e337d52 clr!CLRMapViewOfFileEx+0x26
 0042b0ac 6e337e7c clr!MappedImageLayout::MappedImageLayout+0x200
 0042b0f4 6e335ca1 clr!PEImageLayout::Map+0x2c
 0042b12c 6e335d3e clr!PEImage::GetLayoutInternal+0x106
 0042b17c 6e3320e6 clr!PEImage::GetLayout+0xf0
 0042b200 6e33300f clr!RuntimeOpenImageInternal+0x9d
 0042b250 6e35a512 clr!GetAssemblyMDInternalImportEx+0xe6
 0042b288 6e35a5c6 clr!CAssemblyManifestImport::InitAndLoadMetaData+0x59
 0042b2bc 6e35ca67 clr!CreateAssemblyManifestImport+0x50
 0042b97c 6e35d240 clr!CAsmDownloadMgr::CreateAssembly+0x20a
 0042bce4 6e35cf5e clr!CAsmDownloadMgr::DoSetupRFS+0xbf
 0042bf9c 6e35cd0b clr!CAsmDownloadMgr::DoSetup+0x22f
 0042bffc 6e35a6d7 clr!CAssemblyDownload::DoSetup+0xa4
 0042c03c 6e35a894 clr!CAssemblyDownload::DownloadComplete+0x103
 0042c2b0 6e35a920 clr!CAssemblyDownload::KickOffDownload+0x33a
 0042c350 6e32784b clr!CAssemblyName::BindToObject+0x9c1
 0042c3ec 6e327a7d clr!FusionBind::RemoteLoad+0x1fc
 0042c478 6e327c30 clr!FusionBind::LoadAssembly+0x17c
 0042cb54 6e327e6f clr!AssemblySpec::FindAssemblyFile+0x104
 0042d87c 6e325299 clr!AppDomain::BindAssemblySpec+0xffd
 0042d934 6e325103 clr!PEFile::LoadAssembly+0xc0
 0042da08 6e3252e4 clr!Module::LoadAssembly+0x176
 0042dca8 6e2f91ca clr!Assembly::FindModuleByTypeRef+0x1f5
 0042dd14 6e304c27 clr!ClassLoader::LoadTypeDefOrRefThrowing+0x103
 0042ddbc 751d10cf clr!CEEInfo::resolveToken+0x306
 0042ddcc 751fffe8 clrjit!Compiler::impResolveToken+0x3a
 0042e4fc 751d1a60 clrjit!Compiler::impImportBlockCode+0x42f5
 0042e57c 751d1c42 clrjit!Compiler::impImportBlock+0x5d
 0042e594 751d244d clrjit!Compiler::impImport+0x1ea
 0042e5b4 751d401c clrjit!Compiler::compCompile+0x63
 0042e5f0 751d4132 clrjit!Compiler::compCompileHelper+0x2fa
 0042e668 751d4282 clrjit!Compiler::compCompile+0x213
 0042e758 751d4595 clrjit!jitNativeCode+0x1cc
 0042e77c 6e303669 clrjit!CILJit::compileMethod+0x25
 0042e7cc 6e303701 clr!invokeCompileMethodHelper+0x41
 0042e80c 6e303743 clr!invokeCompileMethod+0x31
 0042e870 6e30399c clr!CallCompileMethodWithSEHWrapper+0x2a
 0042ec08 6e303496 clr!UnsafeJitFunction+0x3ca
 0042ecec 6e3040db clr!MethodDesc::MakeJitWorker+0x3a9
 0042ed60 6e2ebcd5 clr!MethodDesc::DoPrestub+0x59d
 0042edc8 6e2d2ae9 clr!PreStubWorker+0xed
 0042edf8 6e2d2652 clr!ThePreStub+0x16
 0042ee04 6e2e264f clr!CallDescrWorkerInternal+0x34
 0042ee58 6e2e2e95 clr!CallDescrWorkerWithHandler+0x6b
 0042eed0 6e3974ec clr!MethodDescCallSite::CallTargetWorker+0x152
 0042effc 6e397610 clr!RunMain+0x1aa
 0042f270 6e421dc4 clr!Assembly::ExecuteMainMethod+0x124
 0042f774 6e421e67 clr!SystemDomain::ExecuteMainMethod+0x614
 0042f7d0 6e421f7a clr!ExecuteEXE+0x4c
 0042f810 6e42416a clr!_CorExeMainInternal+0xdc
 0042f84c 70e2f5a3 clr!_CorExeMain+0x4d
 0042f888 70ea7f16 mscoreei!_CorExeMain+0x10a
 0042f898 70ea4de3 MSCOREE!ShellShim__CorExeMain+0x99
 0042f8a0 7574339a MSCOREE!_CorExeMain_Exported+0x8
 0042f8ac 77cc9ef2 KERNEL32!BaseThreadInitThunk+0xe
 0042f8ec 77cc9ec5 ntdll!__RtlUserThreadStart+0x70
 0042f904 00000000 ntdll!_RtlUserThreadStart+0x1b
 0:000> g
 ModLoad: 001e0000 001e8000   TestAssembly.dll
 eax=00000000 ebx=0084a1fc ecx=00000000 edx=00000000 esi=00000000 edi=00000000
 eip=77cafc42 esp=0042adac ebp=0042ade4 iopl=0         nv up ei pl zr na pe nc
 cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000246
 ntdll!NtMapViewOfSection+0x12:
 77cafc42 83c404          add     esp,4
 0:000> k
 ChildEBP RetAddr  
0042adac 7720e231 ntdll!NtMapViewOfSection+0x12
 0042ade4 6e337b8d KERNELBASE!MapViewOfFileEx+0x81
 0042ae3c 6e337d7d clr!CLRMapViewOfFileEx+0x26
 0042b0ac 6e337e7c clr!MappedImageLayout::MappedImageLayout+0x227
 0042b0f4 6e335ca1 clr!PEImageLayout::Map+0x2c
 0042b12c 6e335d3e clr!PEImage::GetLayoutInternal+0x106
 0042b17c 6e3320e6 clr!PEImage::GetLayout+0xf0
 0042b200 6e33300f clr!RuntimeOpenImageInternal+0x9d
 0042b250 6e35a512 clr!GetAssemblyMDInternalImportEx+0xe6
 0042b288 6e35a5c6 clr!CAssemblyManifestImport::InitAndLoadMetaData+0x59
 0042b2bc 6e35ca67 clr!CreateAssemblyManifestImport+0x50
 0042b97c 6e35d240 clr!CAsmDownloadMgr::CreateAssembly+0x20a
 0042bce4 6e35cf5e clr!CAsmDownloadMgr::DoSetupRFS+0xbf
 0042bf9c 6e35cd0b clr!CAsmDownloadMgr::DoSetup+0x22f
 0042bffc 6e35a6d7 clr!CAssemblyDownload::DoSetup+0xa4
 0042c03c 6e35a894 clr!CAssemblyDownload::DownloadComplete+0x103
 0042c2b0 6e35a920 clr!CAssemblyDownload::KickOffDownload+0x33a
 0042c350 6e32784b clr!CAssemblyName::BindToObject+0x9c1
 0042c3ec 6e327a7d clr!FusionBind::RemoteLoad+0x1fc
 0042c478 6e327c30 clr!FusionBind::LoadAssembly+0x17c
 0042cb54 6e327e6f clr!AssemblySpec::FindAssemblyFile+0x104
 0042d87c 6e325299 clr!AppDomain::BindAssemblySpec+0xffd
 0042d934 6e325103 clr!PEFile::LoadAssembly+0xc0
 0042da08 6e3252e4 clr!Module::LoadAssembly+0x176
 0042dca8 6e2f91ca clr!Assembly::FindModuleByTypeRef+0x1f5
 0042dd14 6e304c27 clr!ClassLoader::LoadTypeDefOrRefThrowing+0x103
 0042ddbc 751d10cf clr!CEEInfo::resolveToken+0x306
 0042ddcc 751fffe8 clrjit!Compiler::impResolveToken+0x3a
 0042e4fc 751d1a60 clrjit!Compiler::impImportBlockCode+0x42f5
 0042e57c 751d1c42 clrjit!Compiler::impImportBlock+0x5d
 0042e594 751d244d clrjit!Compiler::impImport+0x1ea
 0042e5b4 751d401c clrjit!Compiler::compCompile+0x63
 0042e5f0 751d4132 clrjit!Compiler::compCompileHelper+0x2fa
 0042e668 751d4282 clrjit!Compiler::compCompile+0x213
 0042e758 751d4595 clrjit!jitNativeCode+0x1cc
 0042e77c 6e303669 clrjit!CILJit::compileMethod+0x25
 0042e7cc 6e303701 clr!invokeCompileMethodHelper+0x41
 0042e80c 6e303743 clr!invokeCompileMethod+0x31
 0042e870 6e30399c clr!CallCompileMethodWithSEHWrapper+0x2a
 0042ec08 6e303496 clr!UnsafeJitFunction+0x3ca
 0042ecec 6e3040db clr!MethodDesc::MakeJitWorker+0x3a9
 0042ed60 6e2ebcd5 clr!MethodDesc::DoPrestub+0x59d
 0042edc8 6e2d2ae9 clr!PreStubWorker+0xed
 0042edf8 6e2d2652 clr!ThePreStub+0x16
 0042ee04 6e2e264f clr!CallDescrWorkerInternal+0x34
 0042ee58 6e2e2e95 clr!CallDescrWorkerWithHandler+0x6b
 0042eed0 6e3974ec clr!MethodDescCallSite::CallTargetWorker+0x152
 0042effc 6e397610 clr!RunMain+0x1aa
 0042f270 6e421dc4 clr!Assembly::ExecuteMainMethod+0x124
 0042f774 6e421e67 clr!SystemDomain::ExecuteMainMethod+0x614
 0042f7d0 6e421f7a clr!ExecuteEXE+0x4c
 0042f810 6e42416a clr!_CorExeMainInternal+0xdc
 0042f84c 70e2f5a3 clr!_CorExeMain+0x4d
 0042f888 70ea7f16 mscoreei!_CorExeMain+0x10a
 0042f898 70ea4de3 MSCOREE!ShellShim__CorExeMain+0x99
 0042f8a0 7574339a MSCOREE!_CorExeMain_Exported+0x8
 0042f8ac 77cc9ef2 KERNEL32!BaseThreadInitThunk+0xe
 0042f8ec 77cc9ec5 ntdll!__RtlUserThreadStart+0x70
 0042f904 00000000 ntdll!_RtlUserThreadStart+0x1b
 0:000> g 
```

这是来自 VMMap 的信息，显示了一个程序集在该过程中加载了两次，两次加载了相同的部分。

```
Address            Type           Size       Committed  Private   Total WS  Private WS  Shareable WS  Shared WS  Locked WS  Blocks  Protection              Details                                                                                                 
 00000000006B0000   Image (ASLR)   24         12                   8                     8             8                     6       Execute/Read            C:\src\DualAssemblyLoadTest\bin\x64\Debug\TestAssembly.dll
   00000000006B1000 Image (ASLR)   4                                                                                                 Reserved               
   00000000006B3000 Image (ASLR)   4                                                                                                 Reserved               
   00000000006B5000 Image (ASLR)   4                                                                                                 Reserved               
   00000000006B4000 Image (ASLR)   4          4                                                                                      Read                    .rsrc
   00000000006B2000 Image (ASLR)   4          4                    4                     4             4                             Execute/Read            .text
   00000000006B0000 Image (ASLR)   4          4                    4                     4             4                             Read                    Header

000007FEF3CF0000   Image (ASLR)   24         12                   8                     8             8                     6       Execute/Read            C:\src\DualAssemblyLoadTest\bin\x64\Debug\TestAssembly.dll
   000007FEF3CF1000 Image (ASLR)   4                                                                                                 Reserved               
   000007FEF3CF3000 Image (ASLR)   4                                                                                                 Reserved               
   000007FEF3CF5000 Image (ASLR)   4                                                                                                 Reserved               
   000007FEF3CF4000 Image (ASLR)   4          4                                                                                      Read                    .rsrc
   000007FEF3CF2000 Image (ASLR)   4          4                    4                     4             4                             Execute/Read            .text
   000007FEF3CF0000 Image (ASLR)   4          4                    4                     4             4                             Read                    Header 
```

**更新（2014 年 1 月 20 日）：**

CLR 团队回复了我的[Connect 帖子](http://connect.microsoft.com/VisualStudio/feedback/details/780964/assemblies-loaded-twice-in-64bit-application)：

“感谢您报告此问题。我们已在 .NET Framework 的下一个主要版本中修复它。”

# c++ - GMP - 分割精度或印刷问题

> ID：12804362
> 
> 赞同：3
> 
> 时间：2012-10-09T16:25:17.490
> 
> 标签：c++, gmp

我需要显示整数平均计算结果的前 100 个含义数字。整数系列存储在 mpz_t 类型的数组中，然后将其与 mpq_t 相加并除以另一个 mpq_t (count)

代码：

```
mpq_t sum;
mpq_init(sum);
//same for variable count, they are filled from mpz_t

//display for check
gmp_printf("%.Qd\n", sum); <- here everything correct
gmp_printf("%.Qd\n", count); <- here also

mpq_div(sum, sum, count);

//to display with floating point
mpf_t avg;
mpf_init(avg);
mpf_set_q(avg, sum);

gmp_printf("%.100Ff\n", avg); 
```

最后一行的显示，假设 sum = 2，count = 3 是错误的。它在大约 10-15 位数字之后的上限，并用 0 填充。对于（2/3），它是 0.66666666670000...

所以有两件事：

1.  我不想把它放在地板/天花板上，只是在 100 位数字后截断
2.  用有意义的数字填充所有 100 位数字

因此，对于（2/3）所需的输出是：

0.666...666（一百个6，最后也是6）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T18:38:48.057

使用 mpf_init2(avg, prec)，其中 prec 是所需的最小精度（以位为单位）。请注意，在幕后，GMP 在（通常）32 位或 64 位组中工作，因此计算的实际精度至少是您要求的精度。

防止对输出进行四舍五入将更加困难。我建议使用 MPFR 库。它是一个更完整的浮点库，旨在取代 GMP 的 mpf 类型。

评论太长了。。。。。。

计算超过 100 位只需将 mpf_int(x) 更改为 mpf_init2(x, 333)。333 位应至少获得 100 位十进制数字的精度，但您可能需要稍微增加它。

由于 gmp_printf() 可能会将最后一位数字向上取整，因此获得截断的输出会比较棘手。一种“几乎总是”有效的方法是使用 mpf_get_str() 创建一个精度超过 100 位的字符串，然后截断该字符串。

“几乎总是”是因为一长串 9，比如 ...599999999 将四舍五入到 ...600000000 并且截断的字符串可能包括 6。提高 mpf 计算的精度将降低遇到此问题的几率.

MPFR 有 mpfr_printf() 允许您控制格式化输出的舍入。例如， mpfr_printf("%.100RZf, avg) 将以 100 位精度打印 avg 并向零舍入。

# javascript - jquery 选择器“不是函数”，可能是关于包含脚本

> ID：12804363
> 
> 赞同：0
> 
> 时间：2012-10-09T16:25:23.450
> 
> 标签：javascript, jquery, yii

```
$(function() {
    $('#dialog').click(function() {
      alert("hello");
    });    
});

$('select').yaselect(); 
```

我真的对 javascript 脚本包含的工作方式感到困惑。所以对话框的点击处理程序工作正常。但是 yaselect 没有。我得到 $("select").yaselect 不是一个函数

所以 jQuery 似乎工作，但 yaselect 不知何故。它包含在文件的头部部分。

```
<script type="text/javascript" src="<?php echo Yii::app()->request->baseUrl; ?>/js/libs/jquery-1.7.2.min.js?"></script>
<script type="text/javascript" src="<?php echo Yii::app()->request->baseUrl; ?>/js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="<?php echo Yii::app()->request->baseUrl; ?>/js/libs/jquery.yaselect.min.js"></script> 
```

但是，yii 框架稍后在 head 部分中以某种方式再次包含 jquery：

```
<script type="text/javascript" src="/assets/ab20866e/jquery.js"></script>
<script type="text/javascript" src="/assets/ab20866e/jquery.yiiactiveform.js"></script> 
```

我知道这可能是个问题，但是我接管了这段代码，我是 yii 的新手，所以对该怎么做感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:27:28.813

这是由于**具有 yaselect(); 的特定脚本所致。未正确包含实施**。如果您浏览您的 javascript 代码，您可以在代码中断的地方找到它。单击处理程序可能工作正常，因为 jquery 文件已正确导入。

另外不要忘记检查**jQuery 重复**和**冲突**（阅读有关[noConflict()](http://api.jquery.com/jQuery.noConflict/)的更多信息）。这也可能导致问题。因此，请确保删除重复项，在您的情况下，您已经包含了 jquery 以及框架。尝试在整个站点中使用单一版本的 jquery。

```
if (jQuery) {
alert('jQuery is loaded!');
} 
```

通过使用上面的代码，您可以检查页面中是否存在 jquery。如果页面中不存在 jquery，则可以包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:34:38.687

[http://www.yiiframework.com/wiki/311/assetmanager-clearing-browser-s-cache-on-site-update/](http://www.yiiframework.com/wiki/311/assetmanager-clearing-browser-s-cache-on-site-update/)

这似乎可以解决问题。在 Yii 框架中，您可以使用 AssetManager 来处理静态资源。如果它们然后通过 AssetManager 引用而不是直接将它们包含在 html 源文件中，yii 框架会注意资源只包含一次。

好的 ：）

# browser - 为什么浏览器有 3 个字符作为协议分隔符？

> ID：12804370
> 
> 赞同：5
> 
> 时间：2012-10-09T16:25:42.573
> 
> 标签：browser, uri

http:// 与 http:

要么有一些历史原因，要么我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:35:16.990

根据[RFC 1738](https://www.rfc-editor.org/rfc/rfc1738)，

> 虽然 URL 其余部分的语法可能因所选的特定方案而异，但涉及直接使用基于 IP 的协议到 Internet 上的指定主机的 URL 方案对特定于方案的数据使用通用语法：
> 
> //user:password@host:port/url-path
> 
> 部分或全部部分“user:password@”、“:password”、“:port”和“/url-path”可能会被排除。方案特定数据以双斜杠“//”开头，表示它符合常见的 Internet 方案语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:31:31.207

`//` 表示要实现与服务器的联系。（例如，在发送电子邮件时`'mailto:<email address>...'`，可以使用不带斜线的符号）。请注意，这并不意味着浏览器和服务器之间的连接。当浏览器发送请求时，浏览器和服务器之间没有连接。

# android - 我们应该走电晕路吗？

> ID：12804373
> 
> 赞同：5
> 
> 时间：2012-10-09T16:25:46.057
> 
> 标签：android

我们是一家开发以应用程序作为用户界面的应用程序的小公司。后端是 Java 服务器。我们的应用程序有 Android 和 Iphone 版本，我们一直在努力使它们在功能方面保持同步，并在不干扰每个平台上的标准和最佳实践的情况下保持相似的外观和感觉。大多数应用程序开发是由分包商完成的。

现在，我们与使用 Corona 构建应用程序的公司展开了对话，Corona 是一个用于在一个地方构建应用程序并从那里生成 Iphone 和 Android 应用程序的框架。他们告诉我们它是如此之快，如此简单，一切都很棒。Corona Labs 网站告诉我的信息几乎相同。

但我在职业生涯的早期就看到过这类产品，所以我有点怀疑。此外，我看到了销售人员所说的与真相之间的差距。我想我会在这里问这个问题，并希望能从那些对此了解更多的人那里得到一些意见。请分享你所知道的和你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:38:51.947

这是一个非常有争议的话题，意见可能会有所不同。

免责声明：此答案适用于所有通用的“所有平台代码一次”解决方案。我过去曾将 Corona 用于 OpenGL 相关工作，并且效果很好。

假设您不是在制作游戏.....（游戏是另一回事，因为用户体验相似且与平台无关）

就个人而言，如果您正在构建任何复杂的东西，我会说远离这些解决方案。

是的，您只需要维护一个代码库，但维护两个或三个代码库并不一定意味着需要更多时间，特别是如果您将制作多个应用程序并且它们之间有通用代码。

我能想到的不使用它们的前五个理由是：

1.  您经常会遇到您不知道如何解决的问题，并且每个框架都有一个小得多的社区。

2.  您可能不会节省时间，因为您必须在本地编写部分代码，并且无论如何您都必须学习相应的平台。

3.  Android 和 iOS 上的外观和感觉以及导航是不同的。（示例：只需查看 iOS 上的皮革标题）。为 iOS 和 Android 编写了一些应用程序，我个人觉得这两个平台不可能有相同的用户体验。示例：Android 有一个后退按钮。

4.  性能可能会有很大差异。（尤其是那些基于 HTML5 的，看看 Facebook 是如何切换到 Native 的？...请注意，Corona 不是基于 html5 的）

5.  你得付钱。

总之，您不会在短期或长期内节省时间和金钱。:)

然而，这个行业现在发展得非常快，所以在未来几年它们可能会成为更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:34:24.980

如果你想做一个高质量的应用程序，我认为这是一个非常糟糕的主意。不是特别是电晕；但是任何代码一旦在任何地方运行移动应用程序工具。
至少 Corona 不是基于 html5 的；我对 webapps 没有任何偏见，但我根本不知道任何基于 html5 的好的移动应用程序。
我认为与维护两个干净的代码库相比，它很容易导致更多的可维护性问题。

# ruby - Ruby Sunspot：如何重构搜索块之间的通用代码？

> ID：12804375
> 
> 赞同：2
> 
> 时间：2012-10-09T16:25:50.177
> 
> 标签：ruby, metaprogramming, sunspot

如何将 Sunspot`search do`块中的通用代码重构为可以从多个位置调用的方法？我怀疑这可能更像是一个 Ruby 元编程问题，而不是特定于 Sunspot 的问题，但这里有。

我有一个使用太阳黑子的模型，如下所示：

```
class Book
  def self.basic_search(params)    
    search do
      # boilerplate...
      facet :category
      paginate page: params[:p], per_page: APP_CONFIG[:results_per_page]

      # bespoke basic_search search code goes here
    end    
  end

  def self.curated_search(params)    
    search do
      # boilerplate...
      facet :category
      paginate page: params[:p], per_page: APP_CONFIG[:results_per_page]

      # bespoke curated_search code goes here
    end    
  end

end 
```

然后我尝试像这样重构代码：

```
class Book
  def self.basic_search(params)    
    search do
      boilerplate params
      # bespoke basic_search search code goes here
    end    
  end

  def self.curated_search(params)    
    search do
      boilerplate params
      # bespoke curated_search code goes here
    end    
  end

  def self.boilerplate(params)
    facet :category
    paginate page: params[:p], per_page: APP_CONFIG[:results_per_page]
  end

end 
```

由于样板方法被定义为 Book 上的类方法，因此不出所料，这会导致：

```
undefined method 'boilerplate' for #<Sunspot::DSL::Search:0x007f92b4177a98 
```

我怀疑需要一些使用 of `instance_eval`，但是对于 Ruby 来说是新手，我不太确定如何应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:19:36.400

这就是我想出的。

```
def self.basic_search(params)    
  search do
    boilerplate(self, params)  # here, self is a sunspot search instance

    # bespoke basic_search search code goes here
  end    
end

def self.curated_search(params)    
  search do
    boilerplate(self, params)  # here, self is a sunspot search instance

    # bespoke curated_search code goes here
  end    
end

def self.boilerplate(sunspot, params)
  sunspot.instance_eval do 
    facet :category
    paginate page: params[:p], per_page: APP_CONFIG[:results_per_page]
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:12:44.660

要解决特定问题，请尝试将其范围限定为调用`Book.boilerplate`。正如错误消息所暗示的那样，`search`'`do...end`块内的内容是在内部`Sunspot::DSL::Search`而不是内部评估的`Book`。

请参阅以下示例。为可读性而简化`Foo`->`Book`和`Bar`->`Search`

带复制的原始方式

```
class Foo
  def self.bar()
    p 1
  end

  def self.baz()
    p 1
  end
end 
```

去重。请注意，在太阳黑子示例中，最有可能的方法定义挂钩或类似的东西用于定义方法，`Book`而不是在此处使用硬编码传递。关键是`Bar`可以调用`quux`which in `Foo`。

```
class Foo
  # Following two methods inserted via DSL magic. #Simplified for readability.
  def self.bar
    Bar.bar
  end

  def self.baz
    Bar.baz
  end

  def self.quux()
    p 1
  end
end

class Bar
  def self.bar
    Foo.quux
  end

  def self.baz
    Foo.quux
  end
end 
```

但是，在您的特定情况下，这可能仍然没有达到您想要的效果，因为被评估的参数可能应该在`Search`而不是`Book`. 根据`search`参数缓存的方式，您应该考虑尝试这样的事情。

```
def self.boilerplate(params)
  search do
    facet :category
    paginate page: params[:p], per_page: APP_CONFIG[:results_per_page]
  end
end 
```

# ms-access - 无法打开数据库，因为其中包含的 VBA 项目无法读取

> ID：12804378
> 
> 赞同：3
> 
> 时间：2012-10-09T16:26:03.343
> 
> 标签：ms-access, ms-access-2010

今天早上，我收到了这个错误

`Error accessing file. Network connection may be lost`

无论我以任何形式做什么。所以我打开了一个空白数据库并导入了所有内容。发生了一些错误，但它说导入成功。我能够再次打开我的表格。然后我返回旧副本，然后当我尝试打开数据库时出现此错误

```
The database cannot be opened because the VBA project contained in it cannot be read 
```

即使是我在第一个错误之前所做的备份现在也这么说。

我尝试再次导入，但在导入时出现错误。

我现在有点紧张，请告诉我有办法解决这个问题

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T17:46:37.167

当 Access 抱怨它无法读取 VBA 项目代码时，您可以尝试反编译。有关详细说明，请参阅此 SO 问题的两个答案：[如何反编译和重新编译](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)。

如果反编译无法将您的应用程序恢复到良好的工作状态，最快的解决方案可能是恢复到您上次的良好备份副本。

如果您愿意付出额外的努力来恢复自上次备份以来的模块更改，请检查您是否仍然可以访问模块源代码。如果源代码可读，您可以使用未记录的`SaveAsText`方法将代码转储到文本文件：

```
Application.SaveAsText acModule, "Module1", "C:\SomeFolder\Module1.txt" 
```

然后稍后使用该方法将其加载到新的 db 文件中`LoadFromText`。

```
Application.LoadFromText acModule, "Module1", "C:\SomeFolder\Module1.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T22:50:10.027

对于那些仍然有这个问题的人，这里有一个更新。当 .accde 在比受影响计算机更新的 Access 版本上编译时，会出现此问题。事实证明，有些机器正在使用 Windows 更新进行更新，而有些则没有。通过安装 SP2 和 2016 年 2 月的更新将所有 Office 安装都安装到相同的版本号后，可执行文件现在可以在我的所有计算机上运行。

这是 SP2 的链接（确保下载正确的文件。） [https://www.microsoft.com/en-us/download/details.aspx?id=39667](https://www.microsoft.com/en-us/download/details.aspx?id=39667)

这里是 2016 年 2 月的更新： https: [//support.microsoft.com/en-us/kb/3114750](https://support.microsoft.com/en-us/kb/3114750)

HTH，帕特里克

# asp.net - 如何使 GridView 能够垂直滚动并固定网格的标题

> ID：12804379
> 
> 赞同：0
> 
> 时间：2012-10-09T16:26:15.240
> 
> 标签：asp.net, gridview

我尝试了很多代码并浏览了许多网站，但徒劳无功。有人可以帮我解决这个问题。我想`GridView`垂直滚动并固定其标题。希望问题很清楚。

我尝试添加这样的内容：

```
<div style="overflow-y: scroll;overflow-x:visible; height: 100px;"> MY GRID </div> 
```

关于css的任何想法或善意的帮助。任何小的帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:54:31.817

我写的jQuery插件可以固定标题和冻结列，见图：

![演示图片](../Images/ad368103b3abdeefe44c48ac3c93c62e.png)

看网站： http: [//gridviewscroll.aspcity.idv.tw/](http://gridviewscroll.aspcity.idv.tw/)

支持的浏览器

*   Internet Explorer 7、8（IE 9 兼容性）
*   Internet Explorer 9 (9.0.8112)
*   Windows 7 预览版上的 Internet Explorer 10
*   谷歌浏览器(23.0.1271.64 m)
*   火狐 (16.0.2)
*   苹果 Safari (5.1.7)

# erlang - Erlang pid 比较保证

> ID：12804380
> 
> 赞同：2
> 
> 时间：2012-10-09T16:26:17.150
> 
> 标签：erlang

对于一些 erlang 资深人士来说，这可能是一个微不足道的问题，但很高兴知道，因为文档中并不清楚。许多分布式系统算法利用唯一 pid 的可比性来做出决策。Erlang 很友好地提供了 pid 的内置比较，但是，我想知道在引用本地和外部 pid 的多台机器之间的比较是否保持一致。我的猜测是没有比较保证，但我可能错了，是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:00:03.453

Erlang 在其 PID 结构中存储的不仅仅是一个简单的进程 ID；数据包括远程节点的唯一标识符（无论是另一个本地还是远程 VM）。

请参阅[有人可以解释 Erlang 中 Pid 的结构吗？](https://stackoverflow.com/questions/243363/can-someone-explain-the-structure-of-a-pid-in-erlang)详情。

因此，您可以保证不会在错误的 VM 上向错误的 PID 发送消息（或误解接收到的消息的来源），至少不会在代码中的某处出错。

**更新**：我突然想到我可能一直在回答错误的问题。如果您询问比较将如何工作（例如，如果 Pid1 < Pid2，Pid1 是本地还是远程），我可以肯定地说，基于[http://learnyousomeerlang.com ，排序将是恒定的/starting-out-for-real#bool-and-compare](http://learnyousomeerlang.com/starting-out-for-real#bool-and-compare)。

# hadoop - 什么时候在 hadoop mapreduce 作业上以交互方式增加/减少节点数量是个好主意？

> ID：12804382
> 
> 赞同：0
> 
> 时间：2012-10-09T16:26:23.510
> 
> 标签：hadoop, mapreduce, emr

我有一种直觉，即在运行作业时以交互方式增加/减少节点数量可以加快映射繁重的作业，但无助于减少繁重的作业，其中大部分工作都是由 reduce 完成的。

有一个关于这个的常见问题解答，但它并没有很好地解释

[http://aws.amazon.com/elasticmapreduce/faqs/#cluster-18](http://aws.amazon.com/elasticmapreduce/faqs/#cluster-18)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:26:23.510

克里斯托弗史密斯回答了这个问题，他允许我在这里发帖。

* * *

一如既往......“这取决于”。您几乎总是可以依靠的一件事：稍后添加节点对您的帮助不如从一开始就拥有节点。

当您创建 Hadoop 作业时，它会被拆分为多个任务。这些任务实际上是“工作的原子”。Hadoop 允许您在创建作业期间调整 # of mapper 和 # of reducer 任务，但是一旦创建作业，它就是静态的。任务被分配到“槽”。传统上，每个节点都配置为具有一定数量的 map 任务槽和一定数量的 reduce 任务槽，但您可以对其进行调整。一些较新版本的 Hadoop 不要求您将插槽指定为用于 map 或 reduce 任务。无论如何，JobTracker 会定期将任务分配给插槽。因为这是动态完成的，所以上线的新节点可以通过提供更多插槽来执行任务来加速作业的处理。

这为了解添加新节点的现实奠定了基础。显然有一个 Amdahl 定律问题，即拥有比挂起任务更多的插槽几乎没有完成（如果您启用了推测执行，它确实有所帮助，因为 Hadoop 将安排相同的任务在许多不同的节点上运行，因此可以将慢速节点的任务如果有空闲资源，则由更快的节点完成）。因此，如果您没有使用许多 map 或 reduce 任务来定义您的工作，那么添加更多节点不会有太大帮助。当然，每项任务都会带来一些开销，所以你也不想发疯。这就是为什么我建议任务大小的指导方针应该是“需要大约 2-5 分钟才能执行的事情”。

当然，当您动态添加节点时，它们还有另一个缺点：它们没有任何本地数据。显然，如果您处于 EMR 管道的开头，那么所有节点中都没有数据，所以没关系，但是如果您有一个由许多作业组成的 EMR 管道，并且早期的作业将其结果保存到 HDFS，您获得巨大的性能提升，因为 JobTracker 将有利于塑造和分配任务，因此节点具有可爱的数据局部性（这是整个 MapReduce 设计的核心技巧，以最大限度地提高性能）。在 reducer 方面，数据来自其他 map 任务，因此与其他节点相比，动态添加的节点确实没有劣势。

因此，原则上，动态添加新节点实际上不太可能有助于从 HDFS 读取的 IO 绑定映射任务。

除了...

Hadoop 有各种秘籍来优化性能。一次是它在 map 任务完成/reducer 启动*之前开始将 map 输出数据传输到 reducer。*这显然是映射器生成大量数据的作业的关键优化。您可以在 Hadoop 开始启动传输时进行调整。无论如何，这意味着新启动的节点可能处于劣势，因为现有节点可能已经拥有如此巨大的数据优势。显然，映射器传输的输出越多，劣势就越大。

这就是一切的真正运作方式。但在实践中，许多 Hadoop 作业都有映射器以 CPU 密集型方式处理大量数据，但输出到减速器的数据相对较少（或者它们可能会向减速器发送大量数据，但减速器仍然非常简单，所以根本不受 CPU 限制）。通常作业会有很少的（有时甚至是 0 个）reducer 任务，因此即使是额外的节点也可以提供帮助，如果您已经为每个未完成的 reduce 任务提供了一个 reduce 槽，那么新节点也无济于事。出于显而易见的原因，新节点也对 CPU 密集型工作提供了不成比例的帮助，所以因为这*往往*映射任务多于减少任务，这是人们通常看到的胜利。如果您的映射器受 I/O 限制并从网络中提取数据，那么添加新节点显然会增加集群的总带宽，因此它会有所帮助，但如果您的映射任务受 I/O 限制并读取 HDFS，最好的办法是有更多的初始节点，数据已经分布在 HDFS 上。由于作业结构不佳，reducer 会受到 I/O 限制的情况并不少见，在这种情况下，添加更多节点会有很大帮助，因为它会再次分割带宽。

当然也有一个警告：对于一个非常小的集群，reducer 可以从本地节点上运行的映射器读取大量数据，并且添加更多节点会将更多数据转移到速度慢得多的网络上。您还可能遇到这样的情况：reducer 大部分时间只是从所有向它们发送数据的映射器中多路复用数据处理（尽管这也是可调的）。

如果您要问这样的问题，我强烈建议您使用亚马逊提供的 KarmaSphere 之类的东西来分析您的工作。它将让您更好地了解瓶颈在哪里以及提高性能的最佳策略是什么。

# jquery-mobile - 在 iOS6 中禁用轻按时自动选择

> ID：12804387
> 
> 赞同：1
> 
> 时间：2012-10-09T16:26:35.647
> 
> 标签：jquery-mobile, ios6, kendo-ui

我遇到了在 iOS 6 设备上开始出现的 KendoUI 图表问题，我已在 Safari、Chrome 和 Mercury 中复制了该图表。

当用户在一个元素上执行“轻按”操作（触摸屏幕并按住手指大约一秒钟）时，该元素以蓝色突出显示，并弹出“复制/选择/全选”上下文菜单，如如下图所示。

![在此处输入图像描述](../Images/7b921afb6298386abe68a2334dde426a.png)

这似乎发生在任何类型的元素上，因此不一定是 KendoUI 问题，但如果其他人遇到此问题，我想知道是否有可能以某种方式禁用此功能。我尝试使用[jQuery .disableSelection()](http://api.jqueryui.com/disableSelection/)方法，但无济于事。

需要解决此问题的原因是，当在图表上执行时，我的应用程序具有绑定到 jQuery 移动“taphold”事件的一些功能，并且选择图表或其元素之一，以及出现的上下文菜单，可以是让用户分心和困惑。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:01:38.680

试试css规则`-webkit-user-select`：

```
-webkit-user-select: none; 
```

# database - Codeigniter ActiveRecord 不返回特定表的任何结果Un

> ID：12804389
> 
> 赞同：2
> 
> 时间：2012-10-09T16:26:37.390
> 
> 标签：database, codeigniter, activerecord

从数据库中的一个特定表返回结果时遇到问题。

我有两张桌子：

```
a) repository_notes
b) repository_noteupdates (this one is giving the problem) 
```

这是一张使用 Navicat 使用简单的 select * 查询显示两个表中有一些数据的图像。

![在此处输入图像描述](../Images/de4f2a10568c2a179b27b6fc67164cf5.png) [http://imgur.com/GA60 亿](https://imgur.com/GA6bn)

但是，当我在下面查询 repository_notes 时：

```
print_r($this->db->get('repository_notes')->result_array()); 
```

它给了我以下结果集：

```
Array
(
[0] => Array
    (
        [note_id] => 1
        [note_title] => This is my note
        [note_content] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. In laoreet lobortis lacus, ac iaculis risus tristique nec. Curabitur porta gravida est, non tincidunt nunc porta nec. Nunc diam metus, feugiat non lobortis
        [note_userId] => 2302
        [note_pageno] => 12
        [note_deleted] => 0
        [note_bookid] => 12
    )

[1] => Array
    (
        [note_id] => 2
        [note_title] => This is my note
        [note_content] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. In laoreet lobortis lacus, ac iaculis risus tristique nec. Curabitur porta gravida est, non tincidunt nunc porta nec. Nunc diam metus, feugiat non lobortis
        [note_userId] => 2302
        [note_pageno] => 12
        [note_deleted] => 0
        [note_bookid] => 12
    ) 
```

但是，当我运行以下查询时：

print_r($this->db->get('repository_noteupdates')->result_array());

我没有得到任何结果：

```
 Array
    (
    ) 
```

你们有没有人见过这样的事情，并有一个解决方案，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:17:41.123

所以我找到了解决方案。

似乎如果我从表名中删除名称更新，它似乎可以工作。所以我打电话给桌子`repository_noteupdata`而不是`repository_noteupdates` 它现在正在工作。

谢谢大家帮忙。这很奇怪，因为我在 codeigniter 中找不到任何文档说 update 是表名的保留字。

# string - 如何将 StringBuffer 转换为 ASCII 代码回整数

> ID：12804390
> 
> 赞同：1
> 
> 时间：2012-10-09T16:26:36.817
> 
> 标签：string, buffer, ascii, calculator

对于编程课，我的老师要求我制作一个基本的计算器。虽然创建 CalculatorGUI 很简单，但我的老师希望我使用字符串缓冲区和 ASCII 代码来代替“良好的编程习惯”。我的问题在于将我完成的 StringBuffer 数字从计算器输入转换为我可以解决的 ASCII 码。我确信答案很简单，但我在这部分代码中遇到了问题。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:36:50.293

字符串有一个 getBytes 方法，它接受一个字符集并在该字符集中返回一个字节数组。

[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes(java.nio.charset.Charset](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes(java.nio.charset.Charset) )

就像是： `byte[] b = calcString.getBytes(Charsets.US_ASCII);`

# javascript - facebook登录验证jQuery返回真/假

> ID：12804394
> 
> 赞同：0
> 
> 时间：2012-10-09T16:26:56.073
> 
> 标签：javascript, jquery, facebook-graph-api

我有一个简单的`facebook validation`我想实现到我的 jQuery 按钮。
当用户单击按钮时，它应该检查是否已登录，如果为 TRUE，则更改文本。
我发现[这篇文章](https://stackoverflow.com/questions/1347800/javascript-return-false-from-function)谈到了返回真/假状态，但是当我尝试在我的代码中实现它时它没有工作。

任何我出错的建议，谢谢。

```
function fb_loginCheck(){
    FB.getLoginStatus(function(response, e) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            e.returnValue = true;
        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, but has not authenticated your app
            fb_oAuth();
            e.returnValue = false;
        } else {
            // the user isn't logged in to Facebook.
            fb_oAuth();
            e.returnValue = false;
        }
    }, true);
}

$('.myBttn').click(function(){

    var io = return fb_loginCheck();
    if (io){
        $this = $(this).text();
        if($this == 'yes')
            $(this).text('no');
        else
            $(this).text('yes');
    }

    return false;
}); 
```

**让它工作：**
类似于`potench`答案，但删除了`e.returnValue`它

```
function fb_loginCheck(callBack){
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            callBack(true);
        } else if (response.status === 'not_authorized') {
            fb_oAuth();
            callBack(false);
        } else {
            fb_oAuth();
            callBack(false);
        }
    }, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:38:00.577

这样的事情可能会奏效。我已经移动了这些方法，因此当从该`FB.getLoginStatus`方法返回响应时它们会被触发。

我传入了一个方法，该方法在来自的响应返回结果`callBack`时触发。`FB.getLoginStatus`另请注意，我必须重新调整`$(this)`变量的范围。

```
function fb_loginCheck(callBack){
    FB.getLoginStatus(function(response, e) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            e.returnValue = true;
            callBack(true);
        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, but has not authenticated your app
            fb_oAuth();
            e.returnValue = false;
            callBack(false);
        } else {
            // the user isn't logged in to Facebook.
            fb_oAuth();
            e.returnValue = false;
            callBack(false);
        }
    }, true);
}

$('.myBttn').click(function(){
    var targ = $(this);

    fb_loginCheck(function (io) {
        targ.text( (io) ? "yes" : "no" );
    });

    return false;
}); 
```

# c++ - 在不包含在任何其他文件中的文件中使用外部变量是否有任何可能的用途？

> ID：12804397
> 
> 赞同：2
> 
> 时间：2012-10-09T16:27:21.577
> 
> 标签：c++, c, storage-class-specifier

我在网上遇到过很多例子，这些例子都`extern int x`在 main.c 中，main 函数就在其中。

`extern`我知道的唯一用途是在另一个文件中进行声明，并在定义它之后在另一个文件中使用它。

喜欢：啊：`extern int x;`

交流：`int x = 5;`

主.c： `#include "a.h" // and start using x`

第一种情况对我来说似乎是多余的。

那么，是否有可能`extern`在文件中使用不包含在任何其他文件中的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:40:50.667

extern 变量基本上有两个功能，一个是使用另一个文件中的变量，另一个是访问全局变量，如下面的代码所示。

```
int x=10;
int main()
{
     int x=20;
     cout<<x;             //refers to x=20
     if(x==20)
     {
            extern int x;
            cout<<x;      //refers to the global x that is x=10
     }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:29:09.973

`extern`告诉编译器`x`存在于不同的模块中，应该从其他地方链接。将它直接放在 main.c 中只是避免拉入标题（无论如何都会包含在内）

就像在标题中一样，`x`仍然需要存在于另一个未定义的 .c*模块*中`extern`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:28:57.387

当然。在文件中使用`extern`可让您在**该**文件中使用该变量。它不必包含在其他任何地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:23:13.903

使用`extern`使对象具有外部联系；要使用对象（而不是值或类型）实例化模板，对象必须具有外部链接（至少在 C++03 中）。命名空间范围内定义的大多数对象都有全局链接，但 const 对象没有。所以你有类似的东西：

```
template <char const* n>
class Toto { /* ... */ };

char const n1[] = "abc";
Toto<n1> t1;    //  Illegal...

extern char const n2[] = "xyz";
Toto<n2> t2;    //  Legal... 
```

这是一种特殊情况，但它导致我（一次或两次） `extern`在源文件中的未命名命名空间中使用。

# objective-c - 获取数组的值，或者我认为它的字典

> ID：12804398
> 
> 赞同：-6
> 
> 时间：2012-10-09T16:27:23.993
> 
> 标签：objective-c, ios, arrays, json, dictionary

想问一下json和字典还有数组

现在我有这样的json数据

```
{
  data: [
          {

            featured: true,
            price: {
                        currency: "IDR",
                        amount: 5557679,
                        formatted: "Rp5.558.000"
          },
    ]
} 
```

这是我调用它的语法

```
NSArray* deals_global_json = [json objectForKey:@"data"]; //2
          if(deals_global_json!=NULL){

              for (int i=0;i<[deals_global_json count];i++){

                  NSDictionary* jsonData = [deals_global_json objectAtIndex:i];

                  NSString *featured=[jsonData objectForKey:@"featured"];
                  NSArray *price=[jsonData objectForKey:@"price"];
                  NSDictionary *formatted =[price objectAtIndex:0];

              } 
```

它错误，如何解析这样的价格数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:30:39.967

这在您的代码中是错误的：

> NSDictionary *formatted =[price objectAtIndex:0];

因为价格是字典。

您可以使用：

```
NSString *currency = [price objectForKey:@"currency"];
NSString *amount = [price objectForKey:@"amount"];
NSString *formatted = [price objectForKey:@"formatted"]; 
```

{...} 和 [...] 的区别：

*   第一个是 Object（键：值对的无序集合，键和值之间用 ':' 字符分隔，以逗号分隔并用大括号括起来；键必须是字符串，并且应该彼此不同）；

*   第二个是数组（值的有序序列，以逗号分隔并括在方括号中；这些值不需要是相同的类型）。

要了解它的工作原理，您可以阅读有关 JSON 的更多信息：

[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

# java - Hibernate Criteria Query ...添加新条件

> ID：12804401
> 
> 赞同：1
> 
> 时间：2012-10-09T16:27:26.890
> 
> 标签：java, hibernate, jakarta-ee, criteria

我有一个可以正常工作的条件查询。

```
Criteria criteria = getSession().createCriteria(getPersistentClass());
criteria.add(Restrictions.eq("employerId",employerId))
        .setFetchMode("card", FetchMode.JOIN)
        .createCriteria("card")
        .addOrder(Order.desc("cardId"))
        .createCriteria("salary")
        .add(Restrictions.eq("salaryType",SalaryIdentifierType.CONTRACTOR))
        .add(Restrictions.eq("active","YES")); 
```

现在，我需要向此条件添加另一个过滤器（条件）。新过滤器是`joinDate`. 如果该`joinDate`值已从前端传递，我必须将其添加到此查询中，否则`joinDate`不应添加过滤器。

我已经设法使用析取来做到这一点（我知道，它很奇怪......但是AFAIK，只有析取才能在运行时添加过滤器，只有当它存在时）。我是这样做的，但我不想在这里使用析取，我正在寻找其他选择。

```
Criteria criteria = getSession().createCriteria(getPersistentClass());
-------------------------------------------------------------------------
Disjunction disjunctionDate = Restrictions.disjunction(); 
  if(utilDate!=null){
    disjunctionDate = (Disjunction) disjunctionDate.add(Restrictions.ge("startDate",  utilDate));
    } 
-----------------------------------------------------------------------
    criteria.add(Restrictions.eq("employerId",employerId))
            .setFetchMode("card", FetchMode.JOIN)
            .createCriteria("card")
            .addOrder(Order.desc("cardId"))
            .createCriteria("salary")
            .add(Restrictions.eq("salaryType",SalaryIdentifierType.CONTRACTOR))
            .add(Restrictions.eq("active","YES"))
                .add(disjunctionDate); 
```

我试过只使用 if 条件，像这样但不起作用（为了使这个编译，我不得不从上面修改查询格式，使每行都有标准，每行有分号）。

```
Criteria criteria = getSession().createCriteria(getPersistentClass());
    criteria.add(Restrictions.eq("employerId",employerId));
    criteria.setFetchMode("card", FetchMode.JOIN);
    criteria.createCriteria("card");
    criteria.addOrder(Order.desc("cardId"));
    criteria.createCriteria("salary");
    criteria.add(Restrictions.eq("salaryType",SalaryIdentifierType.CONTRACTOR));
    criteria.add(Restrictions.eq("active","YES"));
    if(startDate!=null){
       criteria.add(Restrictions.ge("startDate",startDate));
     } 
```

关于如何使用比使用析取更好的选择来完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:51:29.153

所以你是说这对你不起作用？

```
Criteria criteria = getSession().createCriteria(getPersistentClass())
  .add(Restrictions.eq("employerId",employerId))
  .setFetchMode("card", FetchMode.JOIN)
  .createCriteria("card")
  .addOrder(Order.desc("cardId"))
  .createCriteria("salary", "sl")  // <- alias for salary
  .add(Restrictions.eq("sl.salaryType",SalaryIdentifierType.CONTRACTOR))
  .add(Restrictions.eq("sl.active","YES"));

if(startDate!=null) {
  criteria.add(Restrictions.ge("sl.startDate",startDate));
} 
```

请参阅[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria-associations](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria-associations)

# scala - Scala 中 Random.nextDouble 的范围是多少？

> ID：12804406
> 
> 赞同：9
> 
> 时间：2012-10-09T16:27:36.940
> 
> 标签：scala, random

**随机**的Scaladoc页面（[http://www.scala-lang.org/api/current/scala/util/Random.html](http://www.scala-lang.org/api/current/scala/util/Random.html)）指定**nextDouble** “从这个随机返回0.0到1.0之间的下一个伪随机，均匀分布的双精度值数字生成器的序列。”

很明显，它忽略了“包容性”。例如，值 0.0 和 1.0 可能吗？如果是这样，是哪一个（或两者）？例如，如果我除以这个数字，我真的想确保 0 不是返回值。在其他情况下，我可能不想要 1.0。很明显，这很难通过测试得到，因为在 0.0 和 1.0 之间大约有*10^15 个值。*

它是哪一个？请注意，由于不是每个人都记得“（”和“[”中的哪一个表示“包含”，所以请说“包含 X”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T16:31:42.900

这是因为它`scala.util.Random`是一个非常薄的包装器`java.util.Random`（[参见源代码](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/util/Random.scala#L1)），它有[足够详细](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextDouble())的文档：

> nextDouble 的一般约定是伪随机生成并返回一个从 0.0d（**包括**）到 1.0d（**不**包括）范围内（大约）均匀选择的双精度值。

# android - 我们可以从 APK 以 root 身份运行 .sh 文件吗

> ID：12804411
> 
> 赞同：2
> 
> 时间：2012-10-09T16:27:56.147
> 
> 标签：android

我需要运行一个 .sh 文件，该文件以 APK 的 root 身份在后台启动一个进程，但做不到。即使我使用 su 它也提供 APP 级别的权限。这是我的 .sh 完整内容

```
#!/system/bin/sh
su
/data/local/server port& 
```

我使用以下命令运行 sh 但我无法获得 root 权限。

```
 try
     {
         Runtime rt = Runtime.getRuntime();
         Process proc = rt.exec("su");  

         proc = rt.exec("sh /sdcard/server.sh");             

     }catch(Exception e) {
         e.printStackTrace();
     } 
```

我做了一些研究，但找不到任何有用的信息，我非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:20:51.863

要通过 su 运行命令，您需要执行

```
su -c '/data/local/server port&' 
```

代替

```
su
/data/local/server port& 
```

另一个问题是您将如何处理身份验证，但我想您已经解决了这个问题（您可能需要破解 android OS 映像或其他东西）。

# javascript - 屏蔽电话号码，鼠标悬停时显示完整的电话号码

> ID：12804414
> 
> 赞同：0
> 
> 时间：2012-10-09T16:28:04.893
> 
> 标签：javascript, jquery

我正在构建一个显示一堆电话号码的小应用程序。

javascript 对象看起来像这样：

```
myObject.phoneNumber = model.phoneNumber; 
```

然后我在屏幕上显示 myObject.phoneNumber。但是，我想掩盖它，使其看起来像 XXX-XXX-1234。然后，每当您将鼠标悬停在电话号码上时，您都会看到整个电话号码！

我正在考虑做这样的事情......

```
myObject.phoneNumber = model.phoneNumber;
myObject.maskedNumber = model.phoneNumber.replaceFirst6WithX's //psuedoCode 
```

然后鼠标悬停，

```
 $(".phoneNumber")
        .mouseOver(function (e) {
            $(".phoneNumber").hide();
            $(".maskedNumber").show()
        }); 
```

而在鼠标移出时则相反。

所以我的问题是：我如何屏蔽（或隐藏前 6 个）电话号码来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:32:53.967

试试这个

```
var phone = "1234567890";
phone.replace(phone.substring(0,6), 'XXXXXX'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:37:03.227

```
myObject.maskedNumber = "XXX-XXX" + myObject.phoneNumber.substring(7); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:38:30.903

这是一个简单的例子，但很实用。

[小提琴](http://jsfiddle.net/WacQR/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T16:53:02.070

您可以使用函数将前 6 个数字/字符的字符串返回为“x”：

```
function mark(phone) {
    var str='';
    var count=0;
    for(i=0; i<phone.length; i++) {
        if(phone.charAt(i)!="-" && count<6) {
            str+='x';
            count++;
        }
        else
            str+=phone.charAt(i);
    }
    return str;
} 
```

当鼠标悬停在元素上时，您可以将元素的内容更改为返回的字符串。这说明了数字中的“-”。您还可以更改它以检测任何不是数字的东西。

# python - 如何在python中编写正则表达式？我想为以下示例编写 RE

> ID：12804416
> 
> 赞同：1
> 
> 时间：2012-10-09T16:28:11.950
> 
> 标签：python, regex, string

如果输入字符串是这样的：

```
"that`s not good thing ! you havn`t understand anything ?" 
```

我想将其转换为：

```
" thats not good thing you havnt understand anything " 
```

这是我想要的吗？

我尝试以下 reg.exp。

```
line = "that`s not good thing ! you havn`t understand anything ?"
text=re.sub("[^\w]"," ",line).split() 
```

但它不能用于所需的输出。请提出相同的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:36:34.037

我想你正在寻找这个：

```
text = re.sub("[^\\w\\s]", "", line) 
```

请注意，除了常规字符之外，您似乎还希望保留空格。

然后，如果您真的在该行中的单词之后，则可以执行`text.split()`

演示：

```
In [29]: line = "that`s not good thing ! you havn`t understand anything ?"

In [30]: text=re.sub("[^\\w\\s]","",line)

In [31]: text
Out[31]: 'thats not good thing  you havnt understand anything '

In [32]: text.split()
Out[32]: ['thats', 'not', 'good', 'thing', 'you', 'havnt', 'understand', 'anything'] 
```

# python - 在 Ant 中激活 virtualenv

> ID：12804417
> 
> 赞同：3
> 
> 时间：2012-10-09T16:28:13.233
> 
> 标签：python, ant, virtualenv

有没有办法在 Ant 脚本中激活新创建的 virtualenv，以便对`<exec executable="python">`（`site-packages`查找等）的任何调用都使用 virtualenv 而不是全局共享路径？

我应该指出，解决方案必须适用于 Windows、Linux 和 Mac。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:21:37.367

您可以直接引用中的可执行文件`virtualenv`：

```
<exec executable="<virtual_env_dir>/bin/python">
... 
```

这将自动使用安装在基础安装中的软件包`virtualenv`而不是基础安装中的软件包。

# css - CSS 文字装饰下划线颜色

> ID：12804419
> 
> 赞同：96
> 
> 时间：2012-10-09T16:28:24.087
> 
> 标签：css, text-decorations

> **可能重复：**
> [更改下划线颜色](https://stackoverflow.com/questions/12557707/changing-underline-color)

是否可以仅更改文本下的线条颜色？我想看到下面有一条蓝线的红色字母，但我不知道如何完成这项工作。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-09T16:38:21.293

如果将文本包装成如下跨度，则可以这样做：

```
a {
  color: red;
  text-decoration: underline;
}
span {
  color: blue;
  text-decoration: none;
}
```

```
<a href="#">
  <span>Text</span>
</a>
```

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2012-10-09T16:31:52.683

（对于谷歌同事，从[重复的问题](https://stackoverflow.com/a/28917336/587407)中复制）**这个答案已经过时，因为大多数现代浏览器现在都支持[text-decoration-color 。](https://css-tricks.com/almanac/properties/t/text-decoration-color/ "文字装饰颜色")**

您可以通过以下 CSS 规则作为示例来执行此操作：

`text-decoration-color:green`

* * *

如果旧版浏览器不支持此规则，您可以使用以下解决方案：

使用边框底部设置您的单词：

```
a:link {
  color: red;
  text-decoration: none;
  border-bottom: 1px solid blue;
}
a:hover {
 border-bottom-color: green;
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-09T16:37:25.993

据我所知这是不可能的......但你可以尝试这样的事情：

```
.underline 
{
    color: blue;
    border-bottom: 1px solid red;
}
```

```
<div>
    <span class="underline">hello world</span>
</div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-09T16:41:27.737

你不能改变线条的颜色（你不能为同一个元素指定不同的前景色，文本和它的装饰形成一个单一的元素）。不过也有一些技巧：

```
a:link, a:visited {text-decoration: none; color: red; border-bottom: 1px solid #006699; }
a:hover, a:active {text-decoration: none; color: red; border-bottom: 1px solid #1177FF; } 
```

您也可以通过这种方式制作一些*很酷的*效果：

```
a:link {text-decoration: none; color: red; border-bottom: 1px dashed #006699; } 
```

希望能帮助到你。

# java - 如何使用格式化程序格式化总和二维数组？

> ID：12804420
> 
> 赞同：0
> 
> 时间：2012-10-09T16:28:24.243
> 
> 标签：java, arrays, multidimensional-array, sum

我必须在 2 维数组上添加 2008 年选举的每个州的选票，但是当我运行代码时，它只对第一行求和，然后继续将自身添加到前面的总和 51 次到右侧，如下所示：

*   州 奥巴马 麦凯恩 其他 各州总计
*   阿拉巴马州 813479 1266546 19794 2099819 2426016 72985 等...
*   阿拉斯加 123594 193841 8762 2099819 2426016 72985 等...

但我只需要每行一次添加每个州的总票数。

```
public static void main(String[] args) throws IOException  
{  
  // TODO code application logic here
  File election = new File("voting_2008.txt");  
  Scanner sc = new Scanner(election);  

  String[] states = new String[51];  
  int[][]votes = new int[51][4];  
  int[] Totalbystate = new int[votes.length];  

  for (int s=0; s < 51; s++)  
  {  
    states[s] = sc.nextLine();  
  }  

  for(int c=0; c < 3; c++)  
  {  
    for(int s=0; s < 51; s++)  
    {  
      votes[s][c] = sc.nextInt();  
    }  
  }  

  Formatter fmt = new Formatter();  
  fmt.format("%20s%12s%12s%12s%21s", "State", "Obama", "McCain", "Other", "Total by state");  
  System.out.println(fmt);  
  for (int s=0; s < 51; s++)  
  {  
    fmt = new Formatter();  
    fmt.format("%20s", states[s]);  
    System.out.print(fmt);  
    for(int c=0; c < 3; c++)  
    {  
      fmt = new Formatter();  
      fmt.format("%12d", votes[s][c]);  
      System.out.print(fmt);  
    }  
    int sum =0;  
    for(int row=0; row < votes.length; row++)  
    {  
      for (int col=0; col < votes[row].length; col++)  
      {  
        sum = sum + votes[row][col];  
      }  
      fmt = new Formatter();  
      fmt.format("%21d", sum);  
      System.out.print(fmt);  
    }  

    System.out.println();  
  }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:32:59.687

> 但是当我运行代码时，它只对第一行求和，然后将自身添加到前面的总和 51 次到右侧，如下所示：

看看你的代码：

```
int sum =0;
for(int row=0; row < votes.length; row++)
{   
    for (int col=0; col < votes[row].length; col++)
    {
        sum = sum + votes[row][col];
    }
    fmt = new Formatter();
    fmt.format("%21d", sum);
    System.out.print(fmt);  
} 
```

看看你在哪里设置`sum`为 0。现在想想你*应该*在哪里设置为 0...

# javascript - 禁用移动设备的 javascript 视差效果

> ID：12804421
> 
> 赞同：2
> 
> 时间：2012-10-09T16:28:39.917
> 
> 标签：javascript, mobile, parallax, device

我有一个具有视差效果的网站。我想为移动设备禁用这个 javascript。在另一个帖子中，我看到了该网站的链接：http: [//detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

我将我的视差 javascript 发布在： http: [//pastie.org/5024950](http://pastie.org/5024950)

问题是，它正好相反。在我的台式电脑上，我没有视差，而在移动设备上则是！我必须改变什么才能以相反的方式工作？

已经谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T15:24:58.613

I find the parallax effect doesn't work that good on iOS devices including iPads because of the way scrolling is registered at the end of the scroll and not during. So screen size doesn't really work as a check.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:17:42.943

Viget 的以下文章应涵盖您的要求。

[在响应式网站上管理 JavaScript](http://viget.com/inspire/managing-javascript-on-responsive-websites)

# php - JQgrid：如何构造表，使用 PHP 变量从数据库中检索特定信息

> ID：12804422
> 
> 赞同：1
> 
> 时间：2012-10-09T16:28:39.613
> 
> 标签：php, jquery, jqgrid

我没有那么大的编程技能，我正在努力处理这可能没什么大不了的部分。我需要从选定的客户帐户生成一个包含特定信息的表，从 MS SQL DB 中检索它，并可以选择编辑每一行和单元格。

我正在使用 jqgrid 生成网格，并使用操作按钮添加内联编辑选项。如果我在对数据库的服务器端 php 调用中专门定义查询，一切都会很好，但问题是我需要使用与特定帐户相关的信息填充网格。当我之前进入登录页面和验证页面后进入此屏幕时，我已经有了带有客户号码的 php 变量，我需要将那个变量传递给 jqgrid，这样我才能只检索与那个帐户。

这是有效的，首先是显示我的客户帐户信息的页面：

```
#customerinfo.php
<?php
   $acctnum = $_SESSION['custnum'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    ...
    <script type="text/javascript">
  $(function(){ 
    $("#regphones").jqGrid({
    url:'custregphone.php',
    datatype: 'json',
    mtype: 'POST',
    colNames:['Actions','Autodialer ID','Customer #','Access #','Destination #','Description'],
    colModel :[ 
      {name:'act', index:'act', width:70, sortable:false},
      {name:'autodialer_id', index:'autodialer_id', width:80, align:'center', sortable:true, editable:true, hidden:true},
      {name:'account', index:'account', width:90, align:'center', sortable:true, editable:true, hidden:true}, 
      {name:'dnis', index:'dnis', width:90, align:'center', sortable:true, editable:true}, 
      {name:'destination', index:'destination', width:120, align:'center', sortable:true, editable:true}, 
      {name:'description', index:'description', width:120, align:'center', sortable:true, editable:true}            
    ],
    pager: '#regphonesp',
    rowNum:5,
    rowList:[5,10,15],
    sortname: 'dnis',
    sortorder: 'desc',
    viewrecords: false,
    gridview: true,
    scrollOffset:0,
    gridComplete: function(){
      var ids = jQuery("#regphones").jqGrid('getDataIDs'); 
        for(var i=0;i < ids.length;i++){ 
            var cl = ids[i]; 
            be = "<input style='height:22px;width:20px;' type='button' value='E' onclick=\"jQuery('#regphones').editRow('"+cl+"');\" />"; 
            se = "<input style='height:22px;width:20px;' type='button' value='S' onclick=\"jQuery('#regphones').saveRow('"+cl+"');\" />"; 
            ce = "<input style='height:22px;width:20px;' type='button' value='C' onclick=\"jQuery('#regphones').restoreRow('"+cl+"');\" />"; 
            jQuery("#regphones").jqGrid('setRowData',ids[i],{act:be+se+ce});
        }
      },
    editurl: "custregphone_edit.php",
    caption: 'Registered Phones',
      }); 
      jQuery("#regphones").jqGrid('navGrid',"#regphonesp",{edit:false,add:false,del:false});
  });
  </head>
  <body>
  ...
  Registered Numbers: <?php echo $acctnum; ?>
  <table id="regphones"></table> 
  <div id="regphonesp"></div>
  ...
</body> 
```

然后是 custregphone.php：

```
<?php
include("functions_engtst.php");

$page = $_POST['page'];
$limit = $_POST['rows']; 
$sidx = $_POST['sidx'];
$sord = $_POST['sord']; 
$acctnum = $_POST['acctnum'];

if(!$sidx) $sidx =1; 

$dbh = get_db("live");
$sth = $dbh->prepare("SELECT COUNT(*) AS count FROM REGPHONE WHERE ACCOUNT='3058318318'");
$sth->execute();
$row = $sth->fetch(PDO::FETCH_ASSOC);
$count = $row['count'];
if( $count > 0 && $limit > 0) { 
    $total_pages = ceil($count/$limit); 
} else { 
    $total_pages = 0; 
}
if ($page > $total_pages) $page=$total_pages;
$start = $limit*$page - $limit;

$sth = $dbh->prepare("SELECT autodialer_id,account,dnis,destination,description FROM REGPHONE WHERE ACCOUNT= '3058318318' ORDER BY $sidx $sord");
$sth->execute();

$responce->page = $page;
$responce->total = $total_pages; 
$responce->records = $count;
$i=0;
while($row=$sth->fetch(PDO::FETCH_ASSOC)){ 
    $responce->rows[$i]['autodialer_id']=$row[autodialer_id]; 
    $responce->rows[$i]['cell']=array("",$row[autodialer_id],$row[account],$row[dnis],$row[destination],$row[description]);
    $i++; 
} 
echo json_encode($responce);
?> 
```

此代码有效，但问题是我无法动态获取帐户信息，我必须在查询中指定它。我的问题是如何将变量*$acctnum*传递给 custregphone.php中的两个查询以获得如下信息：

```
 $sth = $dbh->prepare("SELECT COUNT(*) AS count FROM REGPHONE WHERE ACCOUNT= $acctnum");
    $sth->execute();

    $sth = $dbh->prepare("SELECT autodialer_id,account,dnis,destination,description FROM REGPHONE WHERE ACCOUNT= $acctnum ORDER BY $sidx $sord");
    $sth->execute() 
```

# iphone - 关闭特定对象的控制台日志记录

> ID：12804425
> 
> 赞同：12
> 
> 时间：2012-10-09T16:28:56.513
> 
> 标签：iphone, objective-c, xcode, logging, mpmovieplayercontroller

这有点烦人：自从我开始使用 MPMoviePlayerController 以来，控制台中充满了来自 MPAVController 的信息。例如：

```
[MPAVController] Autoplay: _streamLikelyToKeepUp: 1 -> 1
[MPAVController] Autoplay: Disabling autoplay 
```

这有点烦人，因为我总是必须搜索自己的记录信息。有没有办法关闭特定对象或框架的日志记录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T00:16:21.740

我认为这种过滤不可能开箱即用。但是可以将`stderr`（由 使用`NSLog`）重定向到管道中，在后台线程中从该管道中读取，然后将通过过滤器的消息打印到`stdout`（也由调试器捕获）。这段代码完成了这项工作：

```
int main(int argc, char *argv[])
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^(void) {
        size_t const BUFFER_SIZE = 2048;

        // Create a pipe
        int pipe_in_out[2];
        if (pipe(pipe_in_out) == -1)
            return;

        // Connect the 'in' end of the pipe to the stderr
        if (dup2(pipe_in_out[1], STDERR_FILENO) == -1)
            return;

        char *buffer = malloc(BUFFER_SIZE);
        if (buffer == 0)
            return;

        for (;;)
        {
            // Read from the 'out' end of the pipe
            ssize_t bytes_read = read(pipe_in_out[0], buffer, BUFFER_SIZE);
            if (bytes_read <= 0)
                break;

            // Filter and print to stdout
            if (should_show(buffer)) // TODO: Apply filters here
                fwrite(buffer, 1, bytes_read, stdout);
        }

        free(buffer);
        close(pipe_in_out[1]);
    });

    // Rest of main
} 
```

请注意，此代码非常简单，并不能处理所有极端情况。首先，它捕获所有`stderr`输出，而不仅仅是`NSLog`. 也许这可以通过检查内容来过滤掉。`NSLog`输出总是以日期和时间开始。

此代码的第二个问题是它不会尝试拆分/连接从管道中读取的字符串。不能保证`NSLog`每次阅读都会有一个。他们可能会聚在一起，也可能会太长而分裂。要处理这个问题，需要对从管道读取的数据进行额外处理。

无论如何，对于许多实际目的，这应该足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T00:29:46.793

您应该查看[NSLogger](https://github.com/fpillet/NSLogger)。虽然 NSLog 没有给你任何关于你在运行中看到的内容的选择性，但 NSLogger 可以。NSLogger 在 OS X 自己的窗口中显示设备（或模拟器）的输出。

基本上，它将设施和级别的概念添加到输出中。Unix 向导可能会发现这种比较有问题，但我认为它与 syslog 非常相似。NSLogger 查看器允许您显示一个或多个设施（您定义）的输出消息，这些设施也满足所需的最低级别。

宏定义您在输出窗口中看到的内容。这是一段摘录：

```
#ifdef DEBUG
    #define LOG_GENERAL(level, ...)    LogMessageF(__FILE__,__LINE__,__FUNCTION__,@"general",level,__VA_ARGS__)
#else
    #define LOG_GENERAL(...)    do{}while(0)
#endif 
```

当 DEBUG 关闭时，不会出现任何消​​息。启用时，如果您在代码中有 LOG_GENERAL() 语句，并且您的查看器配置为显示设施“一般”并且您的级别足以显示，您会收到一条消息。

它非常灵活，我非常喜欢它。添加到您的项目大约需要五分钟。请查看上面链接的 github 页面以获取完整的详细信息和下载。

（这并不能解决 MPAVController 用消息填充控制台的问题，但它确实将您想要的消息放在一个新窗口中，从而更容易控制、过滤和解释您感兴趣的内容。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:30:49.650

如果可以使用，另一个选择是运行模拟器或运行 iOS < 6.0 的设备。

使用 5.0 设备或 5.1 模拟器时，我不会显示 MPAVController 日志消息。但它们肯定会出现在 6.0 模拟器中。

当然，通常应该使用当前的操作系统，但如果正在处理项目的视频繁重的部分，则在处理特定任务集的同时运行早期的模拟器或设备是缓解这种日志记录头痛的一种方法。

这也提供了一些向后兼容性测试作为奖励。

# javascript - Canavas2Image.js 通过元素单击将 base64 img 保存为 png

> ID：12804428
> 
> 赞同：9
> 
> 时间：2012-10-09T16:29:01.357
> 
> 标签：javascript, html, image, stream, base64

我正在取消 canvas2Image.js 插件：

```
/*
 * Canvas2Image v0.1
 * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk
 * MIT License [http://www.opensource.org/licenses/mit-license.php]
 */

var Canvas2Image = (function() {

    // check if we have canvas support
    var bHasCanvas = false;
    var oCanvas = document.createElement("canvas");
    if (oCanvas.getContext("2d")) {
        bHasCanvas = true;
    }

    // no canvas, bail out.
    if (!bHasCanvas) {
        return {
            saveAsBMP : function(){},
            saveAsPNG : function(){},
            saveAsJPEG : function(){}
        }
    }

    var bHasImageData = !!(oCanvas.getContext("2d").getImageData);
    var bHasDataURL = !!(oCanvas.toDataURL);
    var bHasBase64 = !!(window.btoa);

    var strDownloadMime = "image/octet-stream";

    // ok, we're good
    var readCanvasData = function(oCanvas) {
        var iWidth = parseInt(oCanvas.width);
        var iHeight = parseInt(oCanvas.height);
        return oCanvas.getContext("2d").getImageData(0,0,iWidth,iHeight);
    }

    // base64 encodes either a string or an array of charcodes
    var encodeData = function(data) {
        var strData = "";
        if (typeof data == "string") {
            strData = data;
        } else {
            var aData = data;
            for (var i=0;i<aData.length;i++) {
                strData += String.fromCharCode(aData[i]);
            }
        }
        return btoa(strData);
    }

    // creates a base64 encoded string containing BMP data
    // takes an imagedata object as argument
    /*var createBMP = function(oData) {
        var aHeader = [];

        var iWidth = oData.width;
        var iHeight = oData.height;

        aHeader.push(0x42); // magic 1
        aHeader.push(0x4D); 

        var iFileSize = iWidth*iHeight*3 + 54; // total header size = 54 bytes
        aHeader.push(iFileSize % 256); iFileSize = Math.floor(iFileSize / 256);
        aHeader.push(iFileSize % 256); iFileSize = Math.floor(iFileSize / 256);
        aHeader.push(iFileSize % 256); iFileSize = Math.floor(iFileSize / 256);
        aHeader.push(iFileSize % 256);

        aHeader.push(0); // reserved
        aHeader.push(0);
        aHeader.push(0); // reserved
        aHeader.push(0);

        aHeader.push(54); // dataoffset
        aHeader.push(0);
        aHeader.push(0);
        aHeader.push(0);

        var aInfoHeader = [];
        aInfoHeader.push(40); // info header size
        aInfoHeader.push(0);
        aInfoHeader.push(0);
        aInfoHeader.push(0);

        var iImageWidth = iWidth;
        aInfoHeader.push(iImageWidth % 256); iImageWidth = Math.floor(iImageWidth / 256);
        aInfoHeader.push(iImageWidth % 256); iImageWidth = Math.floor(iImageWidth / 256);
        aInfoHeader.push(iImageWidth % 256); iImageWidth = Math.floor(iImageWidth / 256);
        aInfoHeader.push(iImageWidth % 256);

        var iImageHeight = iHeight;
        aInfoHeader.push(iImageHeight % 256); iImageHeight = Math.floor(iImageHeight / 256);
        aInfoHeader.push(iImageHeight % 256); iImageHeight = Math.floor(iImageHeight / 256);
        aInfoHeader.push(iImageHeight % 256); iImageHeight = Math.floor(iImageHeight / 256);
        aInfoHeader.push(iImageHeight % 256);

        aInfoHeader.push(1); // num of planes
        aInfoHeader.push(0);

        aInfoHeader.push(24); // num of bits per pixel
        aInfoHeader.push(0);

        aInfoHeader.push(0); // compression = none
        aInfoHeader.push(0);
        aInfoHeader.push(0);
        aInfoHeader.push(0);

        var iDataSize = iWidth*iHeight*3; 
        aInfoHeader.push(iDataSize % 256); iDataSize = Math.floor(iDataSize / 256);
        aInfoHeader.push(iDataSize % 256); iDataSize = Math.floor(iDataSize / 256);
        aInfoHeader.push(iDataSize % 256); iDataSize = Math.floor(iDataSize / 256);
        aInfoHeader.push(iDataSize % 256); 

        for (var i=0;i<16;i++) {
            aInfoHeader.push(0);    // these bytes not used
        }

        var iPadding = (4 - ((iWidth * 3) % 4)) % 4;

        var aImgData = oData.data;

        var strPixelData = "";
        var y = iHeight;
        do {
            var iOffsetY = iWidth*(y-1)*4;
            var strPixelRow = "";
            for (var x=0;x<iWidth;x++) {
                var iOffsetX = 4*x;

                strPixelRow += String.fromCharCode(aImgData[iOffsetY+iOffsetX+2]);
                strPixelRow += String.fromCharCode(aImgData[iOffsetY+iOffsetX+1]);
                strPixelRow += String.fromCharCode(aImgData[iOffsetY+iOffsetX]);
            }
            for (var c=0;c<iPadding;c++) {
                strPixelRow += String.fromCharCode(0);
            }
            strPixelData += strPixelRow;
        } while (--y);

        var strEncoded = encodeData(aHeader.concat(aInfoHeader)) + encodeData(strPixelData);

        return strEncoded;
    }
*/

    // sends the generated file to the client
    var saveFile = function(strData) {
        document.location.href = strData;
    }

    var makeDataURI = function(strData, strMime) {
        return "data:" + strMime + ";base64," + strData;
    }

    // generates a <img> object containing the imagedata
    var makeImageObject = function(strSource) {
        var oImgElement = document.createElement("img");
        oImgElement.src = strSource;
        return oImgElement;
    }

    var scaleCanvas = function(oCanvas, iWidth, iHeight) {
        if (iWidth && iHeight) {
            var oSaveCanvas = document.createElement("canvas");
            oSaveCanvas.width = iWidth;
            oSaveCanvas.height = iHeight;
            oSaveCanvas.style.width = iWidth+"px";
            oSaveCanvas.style.height = iHeight+"px";

            var oSaveCtx = oSaveCanvas.getContext("2d");

            oSaveCtx.drawImage(oCanvas, 0, 0, oCanvas.width, oCanvas.height, 0, 0, iWidth, iHeight);
            return oSaveCanvas;
        }
        return oCanvas;
    }

    return {

        saveAsPNG : function(oCanvas, bReturnImg, iWidth, iHeight) {
            if (!bHasDataURL) {
                return false;
            }
            var oScaledCanvas = scaleCanvas(oCanvas, iWidth, iHeight);
            var strData = oScaledCanvas.toDataURL("image/png");
            if (bReturnImg) {
                return makeImageObject(strData);
            } else {
                saveFile(strData.replace("image/png", strDownloadMime));
            }
            return true;
        },

        saveAsJPEG : function(oCanvas, bReturnImg, iWidth, iHeight) {
            if (!bHasDataURL) {
                return false;
            }

            var oScaledCanvas = scaleCanvas(oCanvas, iWidth, iHeight);
            var strMime = "image/jpeg";
            var strData = oScaledCanvas.toDataURL(strMime);

            // check if browser actually supports jpeg by looking for the mime type in the data uri.
            // if not, return false
            if (strData.indexOf(strMime) != 5) {
                return false;
            }

            if (bReturnImg) {
                return makeImageObject(strData);
            } else {
                saveFile(strData.replace(strMime, strDownloadMime));
            }
            return true;
        },

    /*  saveAsBMP : function(oCanvas, bReturnImg, iWidth, iHeight) {
            if (!(bHasImageData && bHasBase64)) {
                return false;
            }

            var oScaledCanvas = scaleCanvas(oCanvas, iWidth, iHeight);

            var oData = readCanvasData(oScaledCanvas);
            var strImgData = createBMP(oData);
            if (bReturnImg) {
                return makeImageObject(makeDataURI(strImgData, "image/bmp"));
            } else {
                saveFile(makeDataURI(strImgData, strDownloadMime));
            }
            return true;
        }*/
    };

})(); 
```

在 html 我做：

```
 <script type="text/javascript">
  $(document).ready(function(){
    var _txt = "hey";
    $('#qrcode').qrcode({
      text  :_txt
    });
    $("#qrcode-canvas").attr("download","file.png");
    var oCanvas = document.getElementById("qrcode-canvas");  
    $("#download-qrcode").on('click',function(){
      Canvas2Image.saveAsPNG(oCanvas);
    })
  });
  </script>

<div id="qrcode" class="" style="" ></div>
 <a class="btn btn-large btn-inverse" id="download-qrcode"><i class="icon icon-download-alt icon-white"></i> download</a> 
```

我遇到了问题，我正在使用 macosx FF、Chrome Opera 和 Safari，然后我通过元素单击调用 saveAsPNG() 方法

该图像返回一个不带扩展名的文档以保存：

```
data:image/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAANXElEQVR4nO2UW44kMQgEff9L715gWrLpBoIkQ+K3Kh+Yc8755/ntVEDUlE13r6LTLkBuiI9Bge5eRaddgNwQH4MC3b2KTrsAuSE+BgW6exWddgFyQ3wMCnT3KjrtAuSG+BgU6O5VdNoFyA3xMSjQ3avotAuQG+JjUKC7V9FpFyA3xMegQHevotMuQG6Ij0GB7l5Fp12A3BAfgwLdvYpOuwC5IT4GBbp7FZ19i/SKQkbZi0T0sBEfgAQUMvIB2IEPQAIKGfkA7MAHIAGFjHwAduADkIBCRj4AO/ABSEAhIx+AHfgAJKCQkQ/ADnwAElDIyAdgBz4ACShk5AOwAx+ABBQy8gHYgQ9AAgoZ+QDswAcgAYWMfAB2gDsA2YtXsazExduYEc2Dwq4eoKDxoVawMSOaB4VdPUBB40OtYGNGNA8Ku3qAgsaHWsHGjGgeFHb1AAWND7WCjRnRPCjs6gEKGh9qBRszonlQ2NUDFDQ+1Ao2ZkTzoLCrByhofKgVbMyI5kFhVw9Q0PhQK9iYEc2Dwq4eoKDxoVawMSOaB4VdPUBB40OtYGNGNA8Ku3qAgsaHWsHGjGgeFHb1AAWND7WCjRnRPCjs6gEKGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBd0ZVncQ8ayQaYEHnKDxoVbQnWF1BxHPCpkWeMAJGh9qBJoHWgcbMyrygBM0PtQINA+0DjZmVOQBJ2h8qBFoHmgdbMyoyANO0PhQI9A80DrYmFGRB5yg8aFGoHmgdbAxoyIPOEHjQ41A80DrYGNGRR5wgsaHGoHmgdbBxoyKPOAEjQ81As0DrYONGRV5wAkaH2oEmgdaBxszKvKAEzQ+1Ag0D7QONmZU5AEnaHyoEWgeaB1szKjIA07Q+FAj0DzQOtiYUZGH/OKmQ8yItngVKHjIxgcgAWJGPgAzPWTjA5AAMSMfgJkesvEBSICYkQ/ATA/Z+AAkQMzIB2Cmh2x8ABIgZuQDMNNDNj4ACRAz8gGY6SEbH4AEiBn5AMz0kI0PQALEjHwAZnrIxgcgAWJGPgAzPWTjA5AAMSMfgJkesvEBSICYkQ/ATA/ZpB8AT87iZf9j+vcj//BcTbsAualY7m3fj/zDczXtAuSmYrm3fT/yD8/VtAuQm4rl3vb9yD88V9MuQG4qlnvb9yP/8FxNuwC5qVjubd+P/MNzNe0C5KZiubd9P/IPz9W0C5CbiuXe9v3IPzxX0y5AbiqWe9v3I//wXE27ALmpWO5t34/8w3M17QLkpmK5t30/8g/P1bQLkJuK5d72/cg/PBcTasL8nIoHlKmHpt/c4SYg0B6QD8AO3AQE2gPyAdiBm4BAe0A+ADtwExBoD8gHYAduAgLtAfkA7MBNQKA9IB+AHbgJCLQH5AOwAzcBgfaAfAB24CYg0B6QD8AO3AQE2gPyAdiBm4BAe0A+ADtwExBoD8gHYAfpTWQvksJjqPC8TU+FJgV8ACAeaMs9XY8PwB0+ABAPtOWerscH4A4fAIgH2nJP1+MDcIcPAMQDbbmn6/EBuMMHAOKBttzT9fgA3OEDAPFAW+7penwA7vABgHigLfd0PT4Ad/gAQDzQlnu6Hh+AO3wAIB5oyz1djw/AHT4AEA+05Z6uxwfgDh8AiAfack/X4wNwx6GVsBVarjQ9ERQ8vBJ4oz4ABGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwig/AUGi50vREUPDwysoDkO2hwjMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/0wrJAiAEL82jMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/0wrJAiAEL82jMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/0wrJAiAEL82jMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/0wrJAiAEL82jMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/0wrJAiAEL82jMx1xe6M5/Qc7feD8MKKQIgxK89E3N9oTvzCT136/1zEnbha2jFEbHnHZ5f8QFYshj2vMPzKz4ASxbDnnd4fsUHYMli2PMOz6/4ACxZDHve4fkVH4Ali2HPOzy/4gOwZDHseYfnV3wAliyGPe/w/IoPwJLFsOcdnl/xAViyGPa8w/MrPgBLFsOed3h+xQdgyWLY8w7PrwTeA++x0YrOzijigfZ94jjTq2GVUFFEth4vK2Oc6dWwSqgoIluPl5UxzvRqWCVUFJGtx8vKGGd6NawSKorI1uNlZYwzvRpWCRVFZOvxsjLGmV4Nq4SKIrL1eFkZ40yvhlVCRRHZerysjHGmV8MqoaKIbD1eVsY406thlVBRRLYeLytjnOnVsEqoKCJbj5eVMc70alglVBSRrcfLyhhnejHPLkwK7Yvw5XJXMN0zUlP6H8wV3Q/eB8AHwDTS/eB9AHwATCPdD94HwAfANNL94H0AfABMI90P3gfAB8A00v3gfQB8AEwj3Q/eB8AHwDTS/eB9AHwATCPdD94HwAfANNL94H0AfABMI90P3gfAB8A00v3gfQCWHoDuRVOcYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot76i1KbYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot76i1KbYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot76i1KbYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot76i1KbYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot76i1KbYBE4TST9FZ5p3y/qrb8otQkWgdNE0l/hmfb9ot5YgogQM+p+XN4Lmb3gmaBBzKj7wXsvZPaCZ4IGMaPuB++9kNkLngkaxIy6H7z3QmYveCZoEDPqfvDeC5m94JmgQcyo+8F7L2T2gmeCBjGj7gfvvZDZC54JGsSMuh+890JmL3gmaBAz6n7w3guZveCZoEHMqPvBey9k9oJnggYxo+4H772Q2QueCRrEjLofvPdCZi9yTXQvZocHIt2Z/yIjWg80PRFNh/Z4iMtHLPqV7sx/kRGtB5qeiKZDezzE5SMW/Up35r/IiNYDTU9E06E9HuLyEYt+pTvzX2RE64GmJ6Lp0B4PcfmIRb/SnfkvMqL1QNMT0XRoj4e4fMSiX+nO/BcZ0Xqg6YloOrTHQ1w+YtGvdGf+i4xoPdD0RDQd2uMhLh+x6Fe6M/9FRrQeaHoimg7t8RCXj1j0K92Z/yIjWg80PRFNh/Z4iMtHLPqV7sx/kRGtB5qeiKZDezzE5SMW/Up35r/IiNYDTU9E06E9HuLyEYt+pTvzX2RE64GmJ6Lp0B4Pcfm83P2ZKngmavIBSPAQgbZ8tEwVPBM1+QAkeIhAWz5apgqeiZp8ABI8RKAtHy1TBc9ETT4ACR4i0JaPlqmCZ6ImH4AEDxFoy0fLVMEzUZMPQIKHCLTlo2Wq4JmoyQcgwUME2vLRMlXwTNTkA5DgIQJt+WiZKngmavIBSPAQgbZ8tEwVPBM1+QAkeIhAWz5apgqeiZp8ABI8RKAtHy1TBc9ETT4ACR4iTPdA7I3oAeh5/mLQPESY7oHYG9ED0PP8xaB5iDDdA7E3ogeg5/mLQfMQYboHYm9ED0DP8xeD5iHCdA/E3ogegJ7nLwbNQ4TpHoi9ET0APc9fDJqHCNM9EHsjegB6nr8YNA8Rpnsg9kb0APQ8fzFoHiJM90DsjegB6Hn+YtA8RJjugdgb0QPQ8/zFoHmIMN0DsTeiB6Dn+YtB8xBhugdib0QPQM/zF4PmIcJ0D8TeiB6AnlmCiBAzoi1e90OZ4KGCgC6eCRrEjGjL2v3YJ3iowAcgAWJGtGXtfuwTPFTgA5AAMSPasnY/9gkeKvABSICYEW1Zux/7BA8V+AAkQMyItqzdj32Chwp8ABIgZkRb1u7HPsFDBT4ACRAzoi1r92Of4KECH4AEiBnRlrX7sU/wUIEPQALEjGjL2v3YJ3iowAcgAWJGtGXtfuwTPFTgA5AAMSPasnY/9gkeKkg/AB5G0dlke67Idfr3Kzjdj0VxFKA9HuIDVdiL0/1YFEcB2uMhPlCFvTjdj0VxFKA9HuIDVdiL0/1YFEcB2uMhPlCFvTjdj0VxFKA9HuIDVdiL0/1YFEcB2uMhPlCFvTjdj0VxFKA9HuIDVdiL0/1YFEcB2uMhPlCFvTjdj0VxFKA9HuIDVdiL0/1YFEcB2uMhPlCFvTjdj0VxFKA9HuIDVdiL/7XaiNOFmnuxAAAAAElFTkSuQmCC 
```

我想将它保存为图像，想要 png ：/

那可能吗？

因为我知道我可以使用 data:image/png;etc.. 但它会在浏览器中打开新窗口。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T21:32:36.560

基于这个问题：[使用“打开方式”对话框命名从 Canvas 保存的 PNG 文件](https://stackoverflow.com/questions/6045603/name-a-png-file-saved-from-canvas-using-an-open-with-dialog)，您可以使用元素的`download`属性`a`来指示`href`应该使用给定名称下载文件。

更好的是，我们可以将 设置`href`为返回值，`toDataURL`以确保图像实际上是作为 PNG 下载的。

```
<a class="btn btn-large btn-inverse" id="download-qrcode" download="my_file.png">
    <i class="icon icon-download-alt icon-white"></i>
    download
</a>

$("#download-qrcode").on('click',function(){
    var dataUrl = oCanvas[0].toDataURL();
    $(this).attr('href', dataUrl);
}); 
```

单击链接时，文件将下载为`my_file.png`. 如该问题所述，该`download`属性并没有得到广泛支持-即使 Firefox 显然支持该属性，上述代码仅在 Chrome 中有效。

我不确定如何解决这个问题，因为您无法`Content-Disposition`在`data:`URL 中设置 a，这意味着您无法像使用服务器端那样强制下载。

你也可以看看这个：[http](http://www.joeltrost.com/blog/2012/01/29/html5-canvas-save-a-jpeg-with-extension/) ://www.joeltrost.com/blog/2012/01/29/html5-canvas-save-a-jpeg-with-extension/ ，它使用后处理同样的问题-回来的方法。这样做的好处是它利用了服务器指定的能力，`Content-Disposition`因此您可以强制下载图像。

**编辑：**

因此，回发方法的想法基本上是将数据 Url 发送回服务器，服务器基本上将其回显。诀窍是这样做时`Content-Disposition`会设置 a ，强制下载图像。

现在该链接显示了一个 PHP 解决方案，因此您可能可以重用该脚本来做同样的事情。

# c++ - 从文件中读取和填充单独的变量

> ID：12804429
> 
> 赞同：0
> 
> 时间：2012-10-09T16:29:03.993
> 
> 标签：c++, file, visual-c++, file-io, file-processing

我正在做一项家庭作业，我们要从文件中读取公司数据，然后对其进行处理以查找错误。

到目前为止，我认为第一行可以使用，但我不确定如何让它读取之后的每一行。每一行都是一个包含 ID、姓名和付款的记录。基本上我想知道在处理完第一行之后如何跳到下一行。我还没有包括错误检查，但我认为它将在读取 1 条记录后的最后一个 do while 循环中。如果读入每个变量的信息是错误的，我可以检查它并将其输出到摘要文件或错误文件。

```
void processFile()
{
  string filename;
  ifstream recordFile;
  ofstream summary("summary.dat");
  ofstream error("error.dat");

 cout << "Please enter a filename\n";

 do
 {
    cin >> filename;
    recordFile.open(filename);
    if (!recordFile.is_open())
    cout << "No file by that name. Please enter another filename\n";  
 }
 while(!recordFile.is_open());

 int ID = 0;
 string firstName;
 string lastName;
 double payment1, payment2, payment3 = (0.00, 0.00, 0.00);
 string numberOfRecords;
 getline(recordFile, numberOfRecords);

 do
 {
     ws(recordFile);
     recordFile >> ID;
     recordFile >> firstName;
     recordFile >> lastName;
     recordFile >> payment1;
     recordFile >> payment2;
     recordFile >> payment3;

 }
 while(!recordFile.eof());
} 
```

*编辑：我发现了我的问题的一部分，我实际上需要跳过第一行并从那一点开始阅读。每个文件的第一行包含无用的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:41:31.120

在对象上使用`getline`函数`ifstream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:00:13.310

两件事情。第一个是如果您要读取多条记录，并且每条记录都是一个新行，最好的解决方案几乎总是逐行读取，使用`std::getline`，然后使用 `std::istringstream`将行（记录）分解为所需的字段。这具有使您的输入保持同步的优点，即使在出现错误的情况下也是如此；您不必担心要提前多少或忽略多少。

第二点是您正在检查`eof()`. 这几乎总是一个错误；有时，它会导致您阅读过多的一行，而在其他情况下，会导致您忽略最后一行或字段。如果输入成功（并且您只能在 尝试输入超出文件*后检查文件结尾），则流将在条件上下文中表现为真；*如果不是，它将表现为假。所以你的循环应该是：

```
std::string line;
while ( std::getline( recordFile, line ) ) {
    std::istringstream record( line );
    record >> ID;
    if ( ! record ) ...
    //  ...
} 
```

最后一条评论：所有`>>`运算符都去掉了前导空格，因此您不需要调用`ws`. 另一方面，使用上述模式，您可能想要执行以下操作：

```
if ( record >> ws && record.get() != EOF ) {
    //  Unexpected garbage at end of line...
} 
```

在循环的最后，验证没有多余的文本。

# android - jquery相当于Android密码框

> ID：12804431
> 
> 赞同：1
> 
> 时间：2012-10-09T16:29:07.987
> 
> 标签：android, jquery, android-ui

> **可能重复：**
> [使用 jquery 在密码字段中进行密码屏蔽](https://stackoverflow.com/questions/11822963/password-masking-in-password-field-using-jquery)

嘿，我一直在试图找到一些模仿 Android 密码框的代码（它在您继续下一个字母之前向您显示一个字母的方式，这反过来又阻止了前一个字母被看到）。

有人知道 Jquery 中的代码吗？或者甚至知道这会叫什么？

谢谢！

![安卓密码](../Images/3d00b2b791f554890b02c07fcfae3571.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:53:41.930

我认为这种行为取决于手机的操作系统，或者至少取决于手机的浏览器。
用 jQuery 代码发现了一个类似的问题，我希望这是您正在寻找的：[Password masking in password field using jquery](https://stackoverflow.com/a/11824481/1095101)

# php - PHP 中的更新查询无法按预期工作

> ID：12804435
> 
> 赞同：0
> 
> 时间：2012-10-09T16:29:10.577
> 
> 标签：php, html

```
<center>
<?php
if(isset($_POST['submit']))
{

 $title = $_POST['title'];
 $content = $_POST['content'];
 $id= $_POST['id'];

 mysql_query("UPDATE post SET title='$title',content='$content' WHERE p_id='$id'");
 echo 'success';
}else{

?>
<form action='update.php' method='post'>
<span style="font-size:26px;"><strong><span style="font-family: verdana, geneva, sans-serif; ">Title:&nbsp;</span></strong></span>
<input type='text' name='title' /><br />
<input type="hidden" value="<?php echo $_REQUEST['id']?>" name="id">
<span style="font-size:26px;"><strong><span style="font-family: verdana, geneva, sans-serif; ">Content:&nbsp;</span></strong></span>
<textarea name='content' ></textarea><br />
<input type='submit' name='submit' value='EDIT'/>
</form>
<?php
}
?>
</center> 
```

这个查询有什么问题？$_REQUEST['id'] 来自我的 php 的另一页，它来自带有值的超链接。顺便说一下，我是 php 的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:31:29.267

首先，您很容易受到[SQL 注入攻击](http://bobby-tables.com)，因此在您了解危险并了解如何避免它之前，请停止使用此代码。

除此之外，您假设您的数据库查询已成功。这不是一件好事。至少你应该有一些类似的东西

```
$result = mysql_query(...) or die(mysql_error());
                          ^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:36:44.383

也许您在输入中使用了 '。您的查询失败，因为您没有转义输入变量

# c# - Windows Store App - 如何在 Search Charm 文本框中获取水印

> ID：12804437
> 
> 赞同：4
> 
> 时间：2012-10-09T16:29:23.133
> 
> 标签：c#, .net, windows-8, windows-runtime

我已经在我的 Windows 8 应用程序中实现了搜索合同。

但是，当用户从应用程序中调出搜索魅力时，搜索框最初是空白的。我注意到其他应用程序在框中有一个默认的“水印”，例如 Bing 地图应用程序：

![在此处输入图像描述](../Images/fe35789367bb7d09676f4989fab6df77.png)

如何重现此行为并添加自己的水印？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:34:36.237

好的，它没有记录在[主快速入门页面](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868180%28v=win.10%29.aspx#test_your_search_contract_integration)或[搜索指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465233.aspx)中，但您可以这样做：

```
 protected override async void OnWindowCreated(WindowCreatedEventArgs args)
    {
        SearchPane sp = SearchPane.GetForCurrentView();
        sp.PlaceholderText = "Enter the name of a town or city";
    } 
```

我建议将其放入 App.xaml.cs 中的 OnWindowCreated(...) 方法中

# python - 将行写入 CSV 文件而不添加引号

> ID：12804438
> 
> 赞同：4
> 
> 时间：2012-10-09T16:29:24.727
> 
> 标签：python

我的第一个问题：

```
writer.writerow(['Name,' 'Street,,' 'Address,,,']) 
```

上面的示例返回“名称，街道，，地址，，，”

我需要它返回不带引号的 Name,Street,,Address,,,。

我应该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T16:50:46.160

Ignacio 的答案是绝对正确的，并且是您要在实践中使用的答案。

但是，如果您想指示 csv 从不使用引号，这似乎是问题的字面意思，您可以将用于引用的方言参数设置为 csv.QUOTE_none。它看起来像：

```
 theWriter = csv.writer(open('thefile.csv', 'wb'), 
delimeter = ',', quoting = csv.QUOTE_NONE) 
```

此外，如果您真的想对文件中的内容进行微观管理，您可以跳过 csv 库，只需将字符串写入文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T16:34:36.520

停止在你的价值观中使用逗号。

```
writer.writerow(['Name', '', 'Street', '', '', 'Address', '', '', '']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:32:53.187

```
import csv
with open("lame.csv","w") as f:
      w = csv.writer(f)
      w.writerow(["frank","tom","mike","paul"]) 
```

不在文件中加上引号....

如果你在 python 中看到一个字符串，他们总是在 repr 中有引号......你可以使用 print 来不显示包装 python 字符串的引号......

# macos - 从外部机器访问 WSO2 ESB、GREG 和 AS

> ID：12804439
> 
> 赞同：0
> 
> 时间：2012-10-09T16:29:28.830
> 
> 标签：macos, wso2, port, wso2esb, wso2greg

在过去的几周里，我使用 wso2 网站上发布的一些教程来研究 wso2 产品。

不幸的是，我只找到了所有产品都在同一台机器上运行的教程。

如果我想在不同的机器上运行产品，我该怎么做。我想要一个配置： - ESB 在机器 1 上运行 - AS 和 GREG 在机器 2 上运行 - 从机器 3 调用 ESB 中的代理服务或 AS 中的 Web 服务

我在一些 Mac 上运行这些示例，我认为主要问题是使用的端口。有人可以帮我配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:35:44.593

你正在尝试的并不是什么新鲜事。在典型的生产部署中，每个服务器都在它们自己的物理/虚拟机中运行。

当您调用服务时，您调用由 IP 地址唯一标识的端点：端口/上下文路径

如果设置在同一台本地计算机上，则 IP 地址将为“localhost”。

首先你必须学习 tcp/ip 基础知识，这个问题与 wso2 服务器恕我直言无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:54:12.657

你能详细说明你的配置问题吗？

使用此配置，您必须确保从一台服务器可以 ping 另一台服务器，并且在每台服务器中，您的端口 9443 和 9763（默认情况下）对网络开放。这是您需要的唯一要求。

# android - 在 ViewPager 中使用 View 或 Fragment

> ID：12804442
> 
> 赞同：7
> 
> 时间：2012-10-09T16:29:49.647
> 
> 标签：android, android-viewpager

我有一个关于是否将 View 或 Fragment 与 ViewPager 一起使用的问题。

背景：我有一个包含 ListView 的活动 A。每个 ListView 项目都会打开 Activity B。Activity B 显示不同的内容，具体取决于在 Activity A 中点击的 ListView 项目。Activity B 的内容显示在 ListView 内。

问题：现在，我不需要在 Activity A 和 B 之间来回切换内容，而是需要在 Activity B 中实现水平视图滑动来切换内容。我找到的一种解决方案（尝试过并且有效）是创建Activity B 的 ListView 的许多实例，并将其与 ViewPager + PagerAdapter 一起使用。在文档上找到的另一个潜在解决方案（尚未尝试过）是将 ListView 放入片段中，创建片段的许多实例并将其与 ViewPager + FragmentPagerAdapter 或 FragmentStatePagerAdapter 一起使用。

我的问题是，使用每种方法有什么好处？我应该经历将 ListView 带入 Fragment 的所有麻烦，还是只是简单地将 ListView 与 ViewPager 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T17:13:35.203

`Fragment`我认为，当您想将一些 UI 业务逻辑绑定到特定`View`（或一组）时， A是一种有用的方法。如您所知，该个人`Fragment`有自己的生命周期回调等等，就像`Activity`会一样。

与其让一个`Activity`主机`ListView`通过一个单一的多个 s `PagerAdapter`，使用这种方法*可能*更简洁，`Fragment`因为`Fragment`它只需要处理驱动一个单一的背后的逻辑`ListView`。

这与我刚刚面临的情况非常相似。我在`ViewPager`. 在我的情况下，我选择了这种`Fragment`方法，因为在我的情况下，`ViewPager`实际上可能需要在某些页面上显示完全不同的视图。例如，在前几页上，可能会显示用户输入表单。但在最后一页上，将显示一个图表。需要一整套单独的逻辑来驱动该图。从一个单一的驱动这些输入表单和一个图表`Activity`会有点混乱，我可能需要在几个委托类或其他东西中包含业务逻辑。所以对我来说，`Fragment`s 是最终的明显选择。我有我的`InputFormFragment`和一个`GraphFragment``View`，并且它们每个都只包含它们提供的 s的适用逻辑。

另一件要考虑的事情是，在不久的将来，您可能也想`View`在您的`ViewPager`. 或者，您可能想要完全拥有另一种 UI 布局，可能不使用`ViewPager`但将它们全部并排显示（例如，在横向模式下用于大型平板电脑的布局）。使用`Fragment`s，事情变得更加模块化，您可以考虑代码以更快地完成此操作。另一方面，如果您通过使用一个`Activity`包含简单`PagerAdapter`和所有 s 内部逻辑的单个来实现您的目标`ListView`，您可能会发现将来需要更多的工作来支持新类型的`View`s 或特殊的平板电脑布局。

我要说的一件事是我自己通过and实现`Fragment`了 s，如果你有任何特殊要求，事情会变得有点尴尬；有时管理s 可能很棘手。例如，对于我的 UI，我需要能够以编程方式添加和删除包含s. 我还需要确保正在使用的适配器一旦显示就不会破坏s，因为我需要在某个时间点同时从所有 s 收集数据。此外，我必须扩展和修改以确保s正确地通过它们并在 s 被删除时从 s中删除。`ViewPager``FragmentPagerAdapter``FragmentStatePagerAdapter``Fragment``ViewPager``Fragment``Fragment``Fragment``FragmentPagerAdatper``Fragment``onDestroy()``FragmentManager``ViewPager`

`Fragment`s 支持为各种屏幕尺寸和方向构建 UI 的非常模块化的方式，并且在它们允许您封装单个 UI 元素的业务逻辑和生命周期方面非常出色。`ListView`但是，如果您的场景真的像 a 中的几个 s一样简单，`ViewPager`并且您知道您永远不需要模块化，那么`Fragment`s 的开销可能是多余的。

# javascript - 避免跨域检查和其他浏览器安全检查

> ID：12804444
> 
> 赞同：1
> 
> 时间：2012-10-09T16:29:52.837
> 
> 标签：javascript, html, ajax, dynamics-crm-2011

我们正在开发一个 Dynamics CRM 2011 产品，该产品在功能区中有一个调用外部 API 的按钮。目前，要使此按钮起作用，需要在浏览器 (IE) 中更改以下设置：                

![在此处输入图像描述](../Images/75252e909b90ea21b0205979c8463ba2.png)

我们希望避免这种情况，因为该产品的许多目标客户都非常注重安全。有没有办法编写代码，使其不需要更改这些权限，但仍然能够与外部 API 通信？在 CRM 中按下按钮时运行的代码是 HTML 和 Javascript。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:09:32.053

您是否在控制 API？如果是这样，请查看 CORS。使用 CORS，您所做的基本上就是在请求响应中添加一些额外的标头。如果您使用 AJAX 库（如 jQuerys $.ajax），您应该能够按原样继续编写代码。如果没有，可以在这里找到一篇关于如何在 Javascript 中实现 cors 的好文章：http: [//eriwen.com/javascript/how-to-cors/](http://eriwen.com/javascript/how-to-cors/)

要启用 cors，请阅读[http://enable-cors.org/](http://enable-cors.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:49:43.633

我对这个 CRM 一无所知，但除了 JSONP 之外，最好的办法是让服务器端脚本充当代理。

因此，您将在与用户界面代码相同的域中创建一个脚本。然后，该脚本将使用服务器端语言（例如 PHP）代表您执行对跨域脚本的请求。服务器端连接对其可以访问的域没有限制，浏览器只知道它正在向调用域内的页面发送请求，这可能是安全的。

你将如何做到这一点取决于选择的确切语言，但通常你只需要发送远程 API URL 以及服务器端脚本所需的任何参数，然后重新构建对该 URL 的请求并传递结果回到客户端。

# java - 如何在给定字符串数组的情况下获取特定的 JTree 节点

> ID：12804445
> 
> 赞同：0
> 
> 时间：2012-10-09T16:29:53.650
> 
> 标签：java, arrays, string, swing, jtree

如果我有一个`String[]`这样的`{ "root", "two", "1" }`我怎么能从`DefaultMutableTreeNode`这个`JTree`“路径”代表的我那里得到？

例如，如果我的 JTree 看起来像这样：

```
root
 one
  1
  2
 two
  1   <-- I want this node
  2 
```

假设所有节点都是`DefaultMutableTreeNode`s。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:40:39.303

首先，您需要使用`getModel()`方法获取树模型。一旦你有了模型，它就有了`getRoot()`获取树根的方法。之后，您可以调用 to`getChild(Object parent, int index)`并检查是否有任何孩子与 String 数组中提供的名称相同。如果你找到这样的，你可以再次调用`getChild(Object parent, int index)`，等等......直到你到达数组中的最后一个字符串。然后你就有了相应的树节点。您需要将树节点实际转换为 DefaultMutableTreeNode，因为 TreeModel 使用 Object 作为树元素（对于 1.7 之前的 Java）。

# c# - Page.LoadControl() 正在清除我的事件

> ID：12804447
> 
> 赞同：0
> 
> 时间：2012-10-09T16:29:57.630
> 
> 标签：c#, asp.net

下面是我添加一个`System.Web.UI.UserControl`动态显示页面帮助提示的方法...

```
public static void AddHelpTip(string helpText, System.Web.UI.ControlCollection collection, System.Web.UI.Page page)
    {
        CWP.controls.HelpTip hTip = (CWP.controls.HelpTip)page.LoadControl("~/_controls/HelpTip.ascx");
        hTip.Text = helpText;
        hTip.StyleVal += " position:fixed;top:9px;left:9px;";
        collection.Add(hTip);
    } 
```

只有在我使用它的任何页面上，我的所有下拉列表都会停止工作，但我的按钮不会。

下拉列表事件附加`OnLoad`在页面生命周期中，并且在我使用我的`AddHelpTip`方法之前一切正常，有人可以提供实际有效的不同解决方案，和/或解释出了什么问题。

更多代码，作为评论请求：

在我的 aspx 页面中：

```
void Locations_Load(object sender, EventArgs e)
    {
        extendedInfo.Mode = CWP.Constants.MODE_LOCATION;

        CWP.Util.AddHelpTip("Store details", this.Controls, this.Page);
        ... 
```

更多在 aspx 页面中：

```
void Locations_Init(object sender, EventArgs e)
    {
        this.Page.RegisterRequiresControlState(this);

        this.CustomMasterPage.ContentHeader = "Stores";

        this.ddlAccountSelect.SelectedIndexChanged += new EventHandler(ddlAccountSelect_SelectedIndexChanged);
        this.ddlLocationSelect.SelectedIndexChanged += new EventHandler(ddlLocationSelect_SelectedIndexChanged);

        this.btnAccounts.Click += new EventHandler(btnAccounts_Click);
        this.btnTerminals.Click += new EventHandler(btnTerminals_Click);
    } 
```

请记住它在我调用我的`AddHelpTip()`方法之前一直有效，也就是说，如果我注释掉代码一切正常，调用该方法意味着我的下拉列表开始失去状态，即使下拉列表中的所有项目都是已删除，因为我正在将项目加载到“ `!this.IsPostBack`”中，如果阻止它执行一次，但`AddHelpTip`不知何故甚至清除了项目并且事件不会触发

和我的构造函数：

```
public Locations()
    {
        this.Init += new EventHandler(Locations_Init);
        this.Load += new EventHandler(Locations_Load);
        this._isSecure = true;
    } 
```

# c - 错误读取字符串

> ID：12804450
> 
> 赞同：0
> 
> 时间：2012-10-09T16:30:01.830
> 
> 标签：c, string, deque

我的代码不起作用。在我接受字符串时出现运行时错误。这段代码有什么问题？

```
//this is what i have in main()
char *ele,*s[max];
int *count,temp=0;
count=&temp;   
printf("Enter string to insert: ");
scanf("%s",ele);
addleft(s,ele,count);

//following is the function definition
void addleft(char *s[max],char *ele,int *count)
{
    int i;
    if((*count)==max)
    {
        printf("Queue full!\n");
        return;
    }
    for(i=*count;i>0;i--)
        strcpy(s[i],s[i-1]);
    strcpy(s[0],ele);
    (*count)++;
    printf("String inserted at left!\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:32:26.230

`ele`是一个未初始化的`char*`并且没有与之关联的内存，并且`scanf()`将尝试写入它导致未定义的行为，可能是分段错误。

您需要动态分配内存`ele`或声明本地数组，并在使用时防止缓冲区溢出`scanf()`：

```
char ele[1024];
if (1 == scanf("%1023s", ele))
{
    /* Process 'ele'. */
} 
```

此外，该函数`addleft()`正在使用`strcpy()`on `s`，它是一个数组，`char*`并且数组中的每一个都`char*`被统一化。这是未定义的行为和可能的分段错误。要更正，您可以`strdup()`在其他情况下使用`malloc()`，并且`strcpy()`：

```
/* Instead of:
       strcpy(s[0],ele);
   use:
 */
s[0] = strdup(ele); 
```

请注意，函数`for`内部的循环`addleft()`是危险的，因为其中`char*`包含`s`的长度不一定相同。这很容易导致超出数组末尾的写入。但是，由于元素是动态分配的地址，`char*`您可以只交换元素而不是复制它们的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:34:24.480

sscanf("%s", ele) 将输入放入 'ele' 指向的内存中。但是'ele'从未被初始化为指向任何东西。就像是：

```
char ele[128]; 
```

或者

```
char* ele = malloc(...) 
```

应该修复它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T16:37:44.597

您正在导致缓冲区溢出，因为指针`ele`未指向任何已分配的内存。您正在写入程序需要运行的内存，因此使其崩溃。我建议您`malloc`像这样在您的程序中实施：

```
char *ele;
if (!(ele = malloc(50))) //allocate 50 bytes of memory 
{
    //allocation failed
    exit(0);
}
scanf("%s", ele); //string can hold 50 bytes now
free(ele);        //free allocated space 
```

您可能想在[此处](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)`malloc`阅读该功能

更简单的方法是创建`ele`一个数组而不是一个指针：

```
char ele[50]; //ele is an array of 50 bytes 
```

# git - 如何从 GitHub 克隆/拉取，但推送到 Kiln？

> ID：12804456
> 
> 赞同：2
> 
> 时间：2012-10-09T16:30:38.813
> 
> 标签：git, mercurial, github, kiln, hg-git

我不一定喜欢 Git 或 Mercurial。我已经安装了它们，并且发现它们同样难以理解。我主要使用 Mercurial，因为我们的存储库位于 Kiln。

我刚刚使用 Hg 和 Hg-Git 从 GitHub 克隆了一个项目。我想将更改从 GitHub 拉取并合并到本地存储库，但我想将更改从本地 hg 存储库推送到 Kiln。

可以这样做，还是在转换为 Hg 后与 GitHub 的连接丢失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:56:02.443

当您在 Mercurial 中克隆项目时，您从中克隆的路径设置为`default`. 如果在命令行上未指定其他路径，则 push 和 pull 都将使用此路径。

如果您希望您的推送和拉取 URL 不同，请将以下内容放入您的`<repo>\.hg\hgrc`:

```
[paths]
default = http://path/to/pull/repo
default-push = http://path/to/push/repo 
```

有了这些套装

*   `hg pull`会自动拉出`default`
*   `hg push`会自动推送到`default-push`

详情请参阅[`hg help urls`](http://www.selenic.com/hg/help/urls)。

# android - 在 XML 中设置显示选项时，操作栏的主页向上箭头不显示

> ID：12804458
> 
> 赞同：2
> 
> 时间：2012-10-09T16:30:52.080
> 
> 标签：android, android-actionbar

我在网上找不到任何关于我的问题的信息，所以我想我会在这里分享。

我的问题：我正在开发一个平板电脑应用程序，它有一个 ActionBar。说 ActionBar 的显示选项之前是通过以下方式在我的活动的 onCreate 中设置的：

```
final ActionBar
    bar = getActionBar();
bar.setDisplayOptions(ActionBar.DISPLAY_HOME_AS_UP|ActionBar.DISPLAY_SHOW_HOME|ActionBar.DISPLAY_USE_LOGO); 
```

那时一切都很好，主页图标上会自动显示一个箭头，向用户显示他可以向上导航。

现在，我想通过一种 XML 样式来设置它——我已经为背景设置了它，但只是关于使用显示选项。这是我的做法：

```
<!-- actionbar's style -->
<style name="Widget.myProject.Light.ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/bg_action_bar</item>
    <item name="android:displayOptions">homeAsUp|useLogo|showHome</item>
</style> 
```

这种新方法的问题在于我的 Android 3.2 平板电脑上没有显示主页图标上的箭头。无论我是否以编程方式设置显示选项，只要我在 XML 中设置它，它就无法显示它。

有没有人遇到过这种情况并以某种方式找到解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:02:01.343

对我来说，只有这段代码有效：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);        
actionBar.setHomeButtonEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-01T20:12:08.727

如果您使用的是*android.support.v7.app.ActionBarActivity*然后这样做：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

更多信息可以在这里找到：http: [//developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T10:28:29.067

如果您使用的是 v7.app.actionBar 和 holo.theme 使用这个：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

代码工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T12:51:48.553

这是一个简单的方法：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

# android - 平板电脑上的 SystemBar 宽度

> ID：12804463
> 
> 赞同：1
> 
> 时间：2012-10-09T16:31:26.497
> 
> 标签：android

在潜伏了很多各种回应之后（感谢这个很棒的网站），我问了我的第一个问题。如果我做错了什么，请原谅我！

我想知道是否有办法在 Android 平板电脑上找到系统栏的宽度。不是带有虚拟按钮（返回、主页、菜单...）的部分，可点击部分会弹出所有通知消息。

并且如果有一种简单的方法可以知道系统栏/状态栏是在顶部还是底部。从对此问题的其他回应来看，getDecorView 似乎在所有情况下都不可靠。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:47:31.460

很少有相关问题可以帮助您[在 android 平板电脑上](https://stackoverflow.com/questions/10165563/system-bar-size-on-android-tablets)[的状态栏高度](https://stackoverflow.com/questions/3355367/height-of-statusbar/3356263#3356263)和 系统栏大小

在许多情况下，您不需要知道系统栏的位置，也不需要正确绘制自定义组件（即不被系统栏覆盖），您需要的只是覆盖`fitSystemWindows`如下所示：

（注意注释：*当 insets.top > 0 时，您可以期望系统栏位于顶部，并且在 insets.bottom > 0 时类似*）

```
@Override
protected boolean fitSystemWindows(Rect insets) {

    ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) this
            .getLayoutParams();

    int top = params.topMargin + insets.top;
    int bottom = params.bottomMargin + insets.bottom;
    int left = params.leftMargin + insets.left;
    int right = params.rightMargin + insets.right;  
    /* Usually when insets.top > 0 means the systembar on the top and simiarly if insets.bottom > 0*/
    params.setMargins(left, top, right, bottom);
    return true;
} 
```

# c# - 为序列化对象数组构建 json

> ID：12804471
> 
> 赞同：0
> 
> 时间：2012-10-09T16:31:57.953
> 
> 标签：c#, json

我正在使用带有自定义 JavascriptConverter 的 JavascriptSerializer 来序列化两个对象并返回这些对象的数组。我正在使用 Stringbuilder 创建数组，有点像这样：

```
JavaScriptSerializer TheSerializer = new JavaScriptSerializer();
TheSerializer.RegisterConverters(new JavaScriptConverter[] { new MyConverter()});

TheStringBuilder.Append("[");
TheStringBuilder.Append(TheSerializer.Serialize(FirstObject));
TheStringBuilder.Append("],[");
TheStringBuilder.Append(TheSerializer.Serialize(SecondObject));
TheStringBuilder.Append("]");

TheJsonToClient = TheStringBuilder.ToString(); 
```

序列化和自定义转换器工作正常，因为在代码的其他部分我正在使用这些，并且在客户端 JSON.parse 对这些对象工作得很好。

问题是当我读取返回字符串并调用`JSON.parse`它时，反序列化在客户端上失败，并`Unexpected Token`在解析过程中出现错误。

我在反序列化数组时可能导致此错误的编码有什么问题？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:34:43.500

这一行：

```
TheStringBuilder.Append("],["); 
```

应该读：

```
TheStringBuilder.Append(","); 
```

有效的 JSON 类似于`[1,2]`- 您的代码正在生成`[1],[2]`，这是无效的 JSON。

另外，您是否考虑过尝试这样做而不是手动构建 JSON 数组？

```
TheSerializer.Serialize(new[] { FirstObject, SecondObject }); 
```

# xcode - IOS6：横向视图的大小

> ID：12804473
> 
> 赞同：1
> 
> 时间：2012-10-09T16:32:21.533
> 
> 标签：xcode, ipad, uiview, uiviewcontroller, ios6

刚刚更新到 IOS SDK 6，现在我很困惑。试图找到解决方案，但我失败了。

1.  在 xcode 中创建了一个新的“Single View iPad APP”（我有一个 iPad 3）
2.  在 TARGETS->Summary 中禁用 Portrait & Upside-Down 界面方向
3.  将模拟指标“方向”设置为“横向”
4.  在视图控制器文件中添加了以下代码行：

    ```
    - (BOOL)shouldAutorotate {
         return YES;
    }

    - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
        return UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight;
    }

    - (NSUInteger)supportedInterfaceOrientations {
        return UIInterfaceOrientationMaskLandscape;
    }

    - (void)viewDidAppear:(BOOL)animated {
        [super viewDidAppear:animated];
        NSLog(@"%@", NSStringFromCGRect(self.view.frame));
    } 
    ```

5.  运行APP

我的输出是：**2012-10-09 18:18:40.149 TestApp[6165:907] {{20, 0}, {748, 1024}}** 有人知道为什么框架不是**... {{0, 20} , {1024, 748}}**如我所料？也许我错过了什么！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:48:21.867

我不认为你错过了任何东西，但如果你用 a 包裹你的视图控制器`UINavigationController`，框架将按预期设置。

注意：使用 iOS 6 SDK，您不能再将任何 UIInterfaceOrientation 常量组合为掩码。所以你需要：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscapeLeft;
} 
```

但是，这并不能解释问题，因为当视图控制器是`UIWindow`.

# c# - 使用嵌套 IF 语句比较六个用户输入值的最简单方法是什么？

> ID：12804477
> 
> 赞同：0
> 
> 时间：2012-10-09T16:32:33.273
> 
> 标签：c#, if-statement

我正在使用 Visual Studio 在 C# 中编写一个小型控制台应用程序。

我想写两个小程序，都将通过控制台输入六个整数，然后 if 语句将比较所有六个值，最终结果将是控制台输出打印输入的六个值以及从最高到最低的顺序值. 我绞尽脑汁想弄清楚如何做到这一点。

完成此操作后，我将编写第二个程序来使用我认为会更整洁的列表来执行此操作。

所以我认为应该有六个整数来保存输入的值，然后是六个整数来保存有序值，中间的 if 语句可以计算出从最高到最低的顺序。

我试图做嵌套的 if，但它变得很乱，我决定放弃它并重新开始。

我将不胜感激。

这是我正在编写的代码：

```
 int one;
        int two;
        int three;
        int four;
        int five;
        int six;

        int firsthighest;
        int secondhighest;
        int thirdhighest;
        int fourthhighest;
        int fifthhighest;
        int sixthhighest;

        Console.WriteLine("Enter a value");
        one = int.Parse(Console.ReadLine());

        Console.WriteLine("Enter a value");
        two = int.Parse(Console.ReadLine());

        Console.WriteLine("Enter a value");
        three = int.Parse(Console.ReadLine());

        Console.WriteLine("Enter a value");
        four = int.Parse(Console.ReadLine());

        Console.WriteLine("Enter a value");
        five = int.Parse(Console.ReadLine());

        Console.WriteLine("Enter a value");
        six = int.Parse(Console.ReadLine());

        if (one > two)
        {
            if (one > three)
            {
                if (one > four)
                {

                    if (one > five)
                    {

                        if (one > six)
                        {
                            firsthighest = one;

                        }

                    }

                }
            }

        }

        else if (two > three)
        {
            if (two > four)
            {

                if (two > five)
                {

                    if (two > six)
                    {
                        firsthighest = two;

                    }

                }

            }

        }

        else if (three > four)
        {

            if (three > five)
            {

                if (three > six)
                {
                    firsthighest = three;

                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:34:34.527

这是作业吗？

我建议跳过 if 并直接进入你的第二个程序 - 将所有 6 个放在一个数组中并对其进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:35:09.723

您可以使用数组，然后对其使用排序算法，例如冒泡排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T16:37:16.197

您可以使用任何[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)。将其存储在六个变量或一个数组中都没有关系。如果您打算使用[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)，那么它在内部只是实现了这种排序算法之一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T17:09:09.370

我不确定您甚至计划如何使用一组嵌套`if`语句来实现排序算法。让我们考虑一下。假设我按以下顺序输入了六个整数：

```
8,3,6,1,9,10 
```

现在，8 肯定大于 3，所以如果我这样写第一组`if`'s：

```
if (one > two) { ... } 
```

这真的告诉我们什么？只有`one`大于`two`，但它肯定没有告诉我们列表中的位置`one`。所以，假设我嵌套了所有可能的场景：

```
if (one > two) {
    if (one > three) {
        if (one > four) {
            if (one > five) {
                if (one > six) { ... }
            }
        }
    }
} 
```

会发生什么？这会告诉我们什么？好吧，它会告诉我们`five`大于`one`……但问题是`six`大于`five`。

这个简短的评估应该告诉你这不是一个好的方法，所以如果你想证明这是一个不好的方法，那就去吧。

现在，让我们继续解决问题，并将这些整数放入一个列表中：

```
var list = new List<int> { one, two, three, four, five, six };
var result = list.OrderByDescending(x => x); 
```

在内部，这是一种真正的排序算法，它通过多次将每个值与所有其他值进行比较来遍历每个值。但是，它也使用实时索引来帮助减少迭代进行了更优化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T18:48:20.413

要检查的一个关键字是[排序网络](http://en.wikipedia.org/wiki/Sorting_network)

对于 6 个输入，至少需要 12 个具有恒定结构的比较和交换操作。1-8 个元素的最佳结构是已知的。4 元素最优排序网络的一个例子是：

```
 void f(int a, int b) { if (arr[a]>arr[b]) swap(arr,a,b); }
 f(1,2); f(3,4); f(1,3); f(2,4); f(2,3); 
```

这些结构不能很好地嵌套......

# web-applications - 如何创建全屏煎茶触摸 2 网络应用程序？

> ID：12804478
> 
> 赞同：3
> 
> 时间：2012-10-09T16:32:39.583
> 
> 标签：web-applications, sencha-touch-2, fullscreen

我用 sencha touch 2 创建了一个网络应用程序。现在我想在打开这个应用程序时让 iOS/android 隐藏浏览器地址栏。我尝试了很多我在互联网上找到的方法，但没有一个奏效。大多数人建议我按照这个问题的答案做：[如何在 WebKit 浏览器上全屏显示 Sencha Touch 2 页面？](https://stackoverflow.com/questions/10316314/how-to-fullscreen-a-sencha-touch-2-page-on-a-webkit-browser)

但这也没有用。我和一些在办公室工作的人比我在煎茶上工作的时间更长。他们说 autoMaximize 配置对他们中的任何人都不起作用，但一位前同事曾经设法以其他方式做到这一点。

所以......有人知道让我的webapp在全屏模式下运行的任何其他方法，或者为什么autoMaximize可能不起作用？

更新：示例代码

```
Ext.application({
name: 'App',

viewport: {
  autoMaximize: true
},

requires : [
    'Ext.Panel'
],

launch: function() {
    Ext.Viewport.add({
        xtype:'panel',
        fullscreen:true,
        html:'hi'
    });
},}); 
```

更新 2：它似乎在 android 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:18:37.967

如果您想在您的移动设备上拥有真正的全屏 Web 应用程序，您必须将其部署为混合应用程序。这意味着针对本机 OS SDK 编译它。您可以使用 PhoneGap 和给定的 OS SDK 简单地完成此操作。

查看更多信息： [http ://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)

在 Android 中，底线是扩展 org.apache.cordova.DroidGap 并覆盖方法 onCreate() ，如下所示：

```
public class App extends DroidGap
{
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.init();

        super.setIntegerProperty("loadUrlTimeoutValue", 60000);
        loadUrl("file:///android_asset/www/index.html");
    }
} 
```

其中“index.html”是您的 ST 网页。

希望能帮助到你。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:56:03.887

根据我的经验，您的问题的答案与您引用的问题相同：

[如何在 WebKit 浏览器上全屏显示 Sencha Touch 2 页面？](https://stackoverflow.com/questions/10316314/how-to-fullscreen-a-sencha-touch-2-page-on-a-webkit-browser)

它一直对我有用。

但是，在处理未编译版本的应用程序时，我有时会遇到此配置错误。以下问题显示了我遇到的错误以及我如何设法解决它。

[viewport autoMaximize 导致 Timeout waiting for window.innerHeight 在 iPhone 上更改](https://stackoverflow.com/questions/10509835/viewport-automaximize-causes-timeout-waiting-for-window-innerheight-to-change-on)

希望这可以帮助

# java - Java中的增量模式（RegEx）匹配？

> ID：12804481
> 
> 赞同：4
> 
> 时间：2012-10-09T16:32:49.390
> 
> 标签：java, regex

有没有一种方法或一个高效的库允许在 Java 中进行增量正则表达式匹配？

我的意思是，我想要一个 OutputStream，我可以一次发送几个字节，并跟踪迄今为止的数据与正则表达式的匹配。如果接收到一个字节会导致这个正则表达式绝对**不**匹配，我希望流告诉我。否则，它应该让我了解当前的最佳匹配，如果有的话。

我意识到这可能是一个非常困难且定义不明确的问题，因为人们可以想象正则表达式可以匹配整个表达式或其任何部分，或者在流关闭之前没有决定。即使像 .* 这样微不足道的东西也可以匹配 H、He、Hel、Hell、Hello 等等。在这种情况下，我希望流说：“是的，如果它现在结束了，这个表达式可以匹配，这是它将返回的组。”

但是，如果 Pattern 在内部逐个字符地遍历它匹配的字符串，它可能不会那么难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:14:16.640

**通过计算与正则表达式对应的**有限状态自动机**，并在处理输入字符时对其执行状态转换，可以很好地实现**增量匹配。**大多数词法分析器都是这样工作的。但是，这种方法不适用于**group**。**

 **所以也许你可以做这两个部分：有一个匹配器来确定是否有任何匹配，或者将来是否有任何匹配的机会。您可以使用它在每个输入字符后给您快速回复。一旦你有一个完整的匹配，你可以执行一个回溯和分组正则表达式引擎来识别你的匹配组。在某些情况下，将分组内容编码到自动机中也可能是可行的，但我想不出一种通用的方法来实现这一点。**

# android - Android 上的 PhoneGap 2.1 使用 jQuery 为本地 AJAX 调用返回 404

> ID：12804483
> 
> 赞同：2
> 
> 时间：2012-10-09T16:32:51.760
> 
> 标签：android, jquery, ajax, cordova

我有 PhoneGap (v2.1) 项目，我使用 jQuery (v1.8.2) 通过 AJAX 加载本地 XML 文件。我使用相对路径 (xml/myXMLfile.xml)，因为 XML 文件包含在 .apk 中

AJAX 调用每次都返回 404。相同的代码使用 PhoneGap v2.0 工作。

# vb.net - 设置 FileStream.Seek 的位置/索引以检索数据 VB.NET 的“块”

> ID：12804488
> 
> 赞同：4
> 
> 时间：2012-10-09T16:33:04.553
> 
> 标签：vb.net, file-io, out-of-memory

我目前正在研究一种接收文本文件并将文件减少到 ~10 MB 的方法。此方法用于截断日志文件并将它们保持在 10 MB 的限制内。

代码背后的逻辑基本上是这样的……如果文件是 250 MB 或更大，则读取字节直到数组达到 250 MB。将其存储到`StringBuilder`, 设置位置以供下次读取并重复，直到`StringBuilder`包含约 10 MB 的数据。然后写出文件，擦除所有数据，只留下最近写入的 10 MB。

为了防止将线切成两半，它会检查最后一条在哪里`CrLf`，然后从该点向前写出所有数据。

我的问题是在第一次阅读后我*无法*正确定位自己。它首先正确读取数据，然后当我使用上一次读取的该位置进行下一次迭代时，它“忽略”该位置并再次从文件的开头读取。

```
If logFile.Length > (1024 * 1024 * 250) Then
    Dim DataToDelete As Integer = logFile.Length - (1024 * 1024 * 250)
    Dim ArrayIndex As Integer = 0
    While DataToDelete > 0
        Using fs As FileStream = New FileStream(logFile.FullName, FileMode.Open, FileAccess.ReadWrite)
            fs.Seek(ArrayIndex, SeekOrigin.Begin)
            If strBuilder.Length < (1024 * 1024 * 250) Then
                Dim bytes() As Byte = New Byte((1024 * 1024 * 250)) {}
                Dim n As Integer = fs.Read(bytes, 0, (1024 * 1024 * 250))
                ArrayIndex = bytes.Length
                Dim enc As Encoding = Encoding.UTF8
                strBuilder.Append(enc.GetString(bytes))
            Else
                If DataToDelete - strBuilder.Length < 0 And strBuilder.Length > (1024 * 1024 * My.Settings.Threshold) Then
                    Dim DataToCut As Integer = strBuilder.Length - (1024 * 1024 * My.Settings.Threshold)
                    While Not (strBuilder.Chars(DataToCut).ToString.Equals(vbCr)) And DataToCut <> 0
                        DataToCut -= 1
                    End While
                    strBuilder.Remove(0, DataToCut)
                    File.WriteAllText(logFile.FullName, strBuilder.ToString)
                Else
                    DataToDelete -= strBuilder.Length
                    strBuilder.Clear()
                End If
            End If
        End Using
    End While
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:15:38.583

对于您正在做的事情，将整个文件加载到内存中是不必要的，而且确实不是一个好主意。最好只读取您打算保留的日志文件部分（最后 10MB）。例如，做这样的事情会更简单、更有效：

```
Private Sub ShrinkLog(ByVal filePath As String, ByVal maxSize As Integer)
    Dim buffer As String
    If New FileInfo(filePath).Length > maxSize Then
        Using reader As New StreamReader(filePath)
            reader.BaseStream.Seek(-maxSize, SeekOrigin.End)
            buffer = reader.ReadToEnd()
        End Using
        File.WriteAllText(filePath, buffer)
    End If
End Sub 
```

还有其他方法可以做到这一点。如果您要保留文件的较大部分，甚至不将所有内容加载到内存中，而是直接从一个流进入另一个流，效率会更高。此外，这个简单的示例并没有展示如何避免在文件中截断一行，但我相信您可以一次又一次地寻找一个字节，直到找到第一个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:55:28.483

这是我的最终结果，就像一个魅力！

```
 Dim Maxsize As Integer = (1024 * 1024 * My.Settings.Threshold)
    For Each logfile In filesToTrim
        Dim sb As New StringBuilder
        Dim buffer As String = String.Empty
        If logfile.Length > Maxsize Then
            Using reader As New StreamReader(logfile.FullName)
                reader.BaseStream.Seek(-Maxsize, SeekOrigin.End)
                buffer = reader.ReadToEnd()
                sb.Append(buffer)
            End Using
            Dim Midpoint As Integer = 0
            While Not (sb.Chars(Midpoint).ToString.Equals(vbCr)) And Midpoint <> sb.Length - 1
                Midpoint += 1
            End While
            sb.Remove(0, Midpoint)
            File.WriteAllText(logfile.FullName, sb.ToString)
        End If
    Next 
```

# jquery - Phonegap、cookies、跨域请求

> ID：12804489
> 
> 赞同：5
> 
> 时间：2012-10-09T16:33:23.107
> 
> 标签：jquery, cordova, cookies, cross-domain

我正在开发一个需要连接到**过时**的远程服务器的**phonegap应用程序。**一些远程请求已经过身份验证，我打算使用记住我的服务。因此，应用程序中有一个登录选项，该选项被转换为使用**jQuery $.ajax**执行的以下请求。请注意，所有请求都是**application/json**

 ******> 发布远程服务器/api/用户/登录

并且服务器响应设置cookie

> 设置 Cookie REMEMBER_ME_COOKIE=amVzdS5hbG9uc29AZ21haWwuY29tOjEzNTEwMDg1NTg1NDY6ODdkOGFhNzEzY2NiZTRhZTIwZjZlNzgyY2E1ZmQyODY；过期=星期二，2012 年 10 月 23 日 16:09:18 GMT；路径=/; HttpOnly

为了使跨域请求正常工作，服务器对 OPTIONS 请求的响应如下：

```
Access-Control-Allow-Headers : Content-Type, *
Access-Control-Allow-Origin : *
Access-Control-Max-Age : 1000 
```

但是，对服务器的下一个请求没有设置 Cookie 标头。

1）是否有可能使cookies工作？

2) 我也尝试在 $.ajax 请求中手动添加 cookie，但它也不起作用。有什么问题吗？

```
$.ajax({
        type : type,
        url : url,
        data : data,
        success : callback,
        dataType : dataType,
        contentType : contentType,
        beforeSend: function(xhr) {
            xhr.setRequestHeader("Cookie", "REMEMBER_ME_COOKIE=amVzdS5hbG9uc29AZ21ha");
          },
        error : function(jqXHR, textStatus, errorThrown) {
            handleError(jqXHR, textStatus, errorThrown);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:42:31.807

您是否尝试过将标头结构化到您的请求中？

```
$.ajax({
        type : type,
        url : url,
        data : data,
        success : callback,
        dataType : dataType,
        contentType : contentType,
        headers:{
             "Cookie" : "amVzdS5hbG9uc29AZ21ha"
        },
        error : function(jqXHR, textStatus, errorThrown) {
            handleError(jqXHR, textStatus, errorThrown);
        }
    }); 
```******

# asp.net - ASP MVC - POST 请求路由字符串中的一堆随机字符

> ID：12804491
> 
> 赞同：2
> 
> 时间：2012-10-09T16:33:23.903
> 
> 标签：asp.net, asp.net-mvc, httpwebrequest

我正在尝试登录我自己的应用程序，但我发现了一些奇怪的东西。当我向登录控制器发送 POST 请求时，它会以某种方式将自身重定向到 GET 登录控制器，并显示登录表单，并将操作设置为`http://localhost:5898/(X(1)S(1tgv3m2psb2cxqaw4koiyhyt))/Account/Login`. 这到底是什么`(X(1)S(1tgv3m2psb2cxqaw4koiyhyt))`东西？它为什么在那里，它有什么作用？最重要的是，我该如何摆脱它？我不希望它在那里...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:39:38.420

看来您已在 web.config（或 IIS）中设置会话提供程序以使用无 Cookie 会话状态。这是您的会话的会话标识符。

[http://msdn.microsoft.com/en-us/library/aa479314.aspx#cookieless_topic2](http://msdn.microsoft.com/en-us/library/aa479314.aspx#cookieless_topic2)

要摆脱它，您需要将`sessionState`web.config 中的元素更改为`cookieless="false"`

[SessionState Web.Config 元素信息](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:44:28.573

当您在浏览器或应用程序设置中禁用 cookie 时，会在 asp.net 中看到这些内容。那是无cookie的asp.net。您可以从那里开始调试您的应用程序。希望能帮助到你

# java - 使用 QueryDSL JPA 在 MySQL 中查找重复行

> ID：12804492
> 
> 赞同：1
> 
> 时间：2012-10-09T16:33:24.933
> 
> 标签：java, mysql, jpa, querydsl

我想在 QueryDSL JPA 中执行这个 SQL 请求

```
SELECT authorizationitem.* 
FROM authorizationitem 
INNER JOIN 
(
    SELECT `authorize` 
    FROM authorizationitem 
    GROUP BY `authorize` 
    HAVING COUNT(*)>1
) a2 
    ON authorizationitem.`authorize` = a2.`authorize`; 
```

为了在表中找到重复的行，我应该执行这个请求。但是使用 QueryDSL，我找不到写这个的方法。

似乎 QueryDSL 不允许在 Inner Join 中使用 subQuery ：s

有什么建议吗？

感谢和问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:45:30.387

你不能用 HQL/JPQL 来表达它，所以你需要用 SQL 来表达它。Querydsl JPA 提供了通过其 API 表达 JPQL 和 SQL 查询的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:42:26.060

您可以尝试在 WHERE 子句中使用子查询，但它可能比 FROM 子句中的子查询效率低。确保authorizationitem.authorize 上有一个索引来优化连接和GROUP BY。

```
SELECT authorizationitem.* 
FROM authorizationitem 
WHERE EXISTS (
    SELECT `authorize` 
    FROM authorizationitem2 
   WHERE authorizationitem2.authorize = authorizationitem.authorize
    GROUP BY `authorize` 
    HAVING COUNT(*)>1
); 
```

或者

```
SELECT authorizationitem.* 
FROM authorizationitem 
WHERE (
    SELECT count(*)
    FROM authorizationitem2 
   WHERE authorizationitem2.authorize = authorizationitem.authorize
    GROUP BY `authorize` 
) > 1; 
```

# asp.net - iPad 上的 Safari 有时无法识别 ASP.NET 回发链接

> ID：12804493
> 
> 赞同：6
> 
> 时间：2012-10-09T16:33:27.017
> 
> 标签：asp.net, ipad, safari

我很难确定在运行 iOS 6.0 的第三代 iPad 上的 Safari 浏览器上运行的 ASP.NET Web 应用程序中间歇性问题的根源。发生的情况是，有时，`<a>`设置为通过 JavaScript 进行回发的超链接的标签会突然停止工作，并且如果您在屏幕上触摸它们似乎不会做任何事情。其中包括设置为注销链接的**asp:LinkBut​​ton**控件，以及设置为允许行排序**的 GridView 的标题行。**它背后似乎没有韵律或原因 - 它们会正常工作一段时间，然后停止，我稍后会注意到它们再次开始工作（主要是在关闭 Safari 并重新打开它之后，尽管这并不总是似乎工作）。

注销控件在 aspx 文件中如下所示：

```
<asp:LinkButton ID="LogoutButton" onclick="LogoutButton_Click" runat="server">[ Logout ]</asp:LinkButton> 
```

并在生成的 HTML 中显示如下：

```
<a id="LogoutButton" href="javascript:__doPostBack(&#39;ctl00$LogoutButton&#39;,&#39;&#39;)">[ Logout ]</a> 
```

**在 iPad 上运行的 Safari 是否有什么特别之处可能会阻止此类链接偶尔中断**，例如页面上或其他打开的浏览器选项卡中加载的数据过多，或者可能是 ViewState 在这种情况下起作用？即使在 iPad 上玩了一段时间的 web 应用程序后，我也找不到任何特定的方法来重现问题，所以我什至无法开始尝试修复它，这真的很令人沮丧，所以我正在寻找那些开发过 ASP.NET 应用程序并且非常了解 iPad 和/或 Safari 环境的人的指导。我从来没有在桌面浏览器上出现过这个问题。

**更新：**使用[此页面](http://osxdaily.com/2012/03/30/view-source-safari-ipad-iphone/)上概述的有关如何在 iPad 上向 Safari 添加伪查看源选项的技巧，我现在已经能够看到回发链接正在工作的页面的生成 HTML 的差异，以及停止的页面。简而言之，ASP.NET 通常嵌入在页面中的**__doPostBack JavaScript 函数......由于某种原因而停止嵌入。**结果，绑定到链接的 JavaScript 只会出错。以下是 ASP.NET 通常添加到页面以使回发链接正常工作的内容：

```
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
```

这似乎与[Apple 支持论坛](https://discussions.apple.com/thread/3817802?start=0&tstart=0)和[SO 上](https://stackoverflow.com/questions/917688/asp-net-not-generating-javascript-for-some-user-agents)描述的问题相同。后者表明 ASP.NET 有时可能无法将 iPad 上的 Safari 识别为支持 JavaScript，因此无法将**__doPostBack**函数正确插入页面。不过，我页面上的其他 JavaScript 仍然可以正常工作，因此它并不能完全解释我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T20:32:21.553

在 Stack Overflow 上找到[这个问题](https://stackoverflow.com/questions/10511145/asp-net-ajax-postback-suddenly-stops-on-iphone-ipad)几乎相同的问题后，我运行了Stephen 建议的[browserCaps 输出页面](http://slingfive.com/pages/code/browserCaps/requestBrowser_info.aspx.txt)，发现 Safari 在从 iPad 主屏幕上的链接以全屏模式运行时，在我们的 ASP.NET 服务器上显示为一个通用的，没有能力的浏览器。我在另一个问题中应用了 Avada Kedavra 建议的修复程序，这需要提出：

```
<browserCaps userAgentCacheKeyLength="256" /> 
```

...进入`<system.web>`我的 web.config 文件的部分，还有这个：

```
protected void Page_PreInit(object sender, EventArgs e)
{
   if (Request.UserAgent != null && Request.UserAgent.IndexOf("AppleWebKit", StringComparison.CurrentCultureIgnoreCase) > -1)
   {
      this.ClientTarget = "uplevel";
   }
} 
```

在正在运行的主网页的代码隐藏文件中。 [Jason Kealey](http://blog.lavablast.com/post/2011/05/29/Gotcha-iPad-versus-ASPNET.aspx)是其他人修复的来源，他还在他发现的评论部分中建议将其添加到 ASP.NET Web 应用程序的 App_Browsers 文件夹中的 .browser 文件中也可能会有所帮助：

```
<browsers>
  <browser refID="Mozilla" >
    <capabilities>
      <capability name="cookies"  value="true" />
      <capability name="type" value="Uplevel" />
    </capabilities>
  </browser>

  <browser refID="Default">
    <capabilities>
      <capability name="cookies" value="true" />
      <capability name="type" value="Uplevel" />
    </capabilities>
  </browser>
</browsers> 
```

**编辑：** 我将此修复应用于我的应用程序，但它破坏了其他区域，具体而言，它将 Chrome 和 Safari 识别为“高级”，这导致它在其他区域中被检测为“IE”。下面的代码使此修复仅适用于未在用户代理中标识为 Safari 的 iDevices：

```
string ua = Request.UserAgent;
if (ua != null
    && (ua.IndexOf("iPhone", StringComparison.CurrentCultureIgnoreCase) >= 0
    || ua.IndexOf("iPad", StringComparison.CurrentCultureIgnoreCase) >= 0
    || ua.IndexOf("iPod", StringComparison.CurrentCultureIgnoreCase) >= 0)
    && ua.IndexOf("Safari", StringComparison.CurrentCultureIgnoreCase) < 0)
{
    this.ClientTarget = "uplevel";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:59:28.460

这篇 SO post 类似，并表示启用页面输出缓存时可能会发生这种情况。

[asp.net：__doPostBack 有时未呈现](https://stackoverflow.com/questions/480946/asp-net-dopostback-not-rendered-sometime)

你在使用输出缓存吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T11:15:09.797

在 iOS7 上以 AppMode（全屏模式）运行 Umbraco 的网站遇到了同样的问题，我尝试了上述所有建议，但均无济于事。但是，我发现添加到默认浏览器的 Regexident 答案的轻微扩展似乎可以解决问题。

```
<capability name="jscriptversion"       value="5.6" />
<capability name="javascript"           value="true" />
<capability name="javascriptversion"    value="1.5" /> 
```

查看[Aristos 的原始帖子](https://stackoverflow.com/questions/14025964/force-asp-net-to-generate-javascript-for-all-user-agents)

我希望这对我有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T17:13:07.210

我将以下定义放入 App_Browsers 文件夹下的浏览器文件中，它运行良好。��

```
<browsers>
  <browser id="safariiphone" parentID="mozilla">
    <identification>
      <userAgent match="AppleWebKit"/>
    </identification>
    <capabilities>
      <capability name="version"                         value="${version}" />
      <capability name="majorversion"                    value="${major}" />
      <capability name="minorversion"                    value="${minor}" />
      <capability name="type"                            value="Safari${major}" />
      <capability name="ecmascriptversion"               value="3.0" />
      <capability name="javascript"                      value="true" />
      <capability name="javascriptversion"               value="1.6" />
      <capability name="w3cdomversion"                   value="1.0" />
      <capability name="tagwriter"                       value="System.Web.UI.HtmlTextWriter" />
      <capability name="cookies"                         value="true" />
      <capability name="frames"                          value="true" />
      <capability name="javaapplets"                     value="true" />
      <capability name="supportsAccesskeyAttribute"      value="true" />
      <capability name="supportsCallback"                value="true" />
      <capability name="supportsDivNoWrap"               value="false" />
      <capability name="supportsFileUpload"              value="true" />
      <capability name="supportsMaintainScrollPositionOnPostback" value="true" />
      <capability name="supportsMultilineTextBoxDisplay" value="true" />
      <capability name="supportsXmlHttp"                 value="true" />
      <capability name="tables"                          value="true" />
    </capabilities>
  </browser>

</browsers> 
```

# mysql - 多个 UNION 查询不起作用

> ID：12804495
> 
> 赞同：2
> 
> 时间：2012-10-09T16:33:32.650
> 
> 标签：mysql

多个 UNION 查询：

```
SELECT [Ordine numero] AS ordine, [data ordine] AS data, comm AS commessa
FROM [archivio globale]
WHERE [ordine numero] IS NOT NULL

UNION

SELECT [numero ordine cliente] AS ordine, [data ordine cliente] AS data, numero AS commessa
FROM [ricambi]
WHERE [numero ordine cliente] IS NOT NULL

UNION

SELECT [numero ordine cliente] AS  ordine, [data ordine cliente] AS data, numero AS commessa
FROM [trasferte]
WHERE [numero ordine cliente] IS NOT NULL

ORDER BY [ordine]; 
```

它不起作用：我收到错误消息：

`[mysql][odbc 5.1 Driver][mysqld-5.5.14]You have an error in your SQL syntax ...`

虽然单个 UNION 查询正常工作（没有第二个 UNION 语句）？该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:52:52.763

这是一个 MyODBC 错误，请参见[此处的官方条目](http://bugs.mysql.com/bug.php?id=7684)。直到今天，它仍然开放...

[编辑] 我找到了一个简单的解决方案：myODBC 只会理解带有 ONE `UNION`（或`UNION ALL`）的查询。`UNION`所以你必须用 with包裹右边的部分`()`。另外，您需要以 结束每个查询`;`，如下所示：

```
SELECT [Ordine numero] AS ordine, [data ordine] AS data, comm AS commessa
FROM [archivio globale]
WHERE [ordine numero] IS NOT NULL;

UNION ALL (

SELECT [numero ordine cliente] AS ordine, [data ordine cliente] AS data, numero AS commessa
FROM [ricambi]
WHERE [numero ordine cliente] IS NOT NULL;

UNION ALL

SELECT [numero ordine cliente] AS  ordine, [data ordine cliente] AS data, numero AS commessa
FROM [trasferte]
WHERE [numero ordine cliente] IS NOT NULL
); 
```

当然，您也必须对这部分应用相同的方法。例如，如果您`UNION ALL`在查询中还需要一个：

```
SELECT [Ordine numero] AS ordine, [data ordine] AS data, comm AS commessa
FROM [archivio globale]
WHERE [ordine numero] IS NOT NULL;

UNION ALL (

SELECT [numero ordine cliente] AS ordine, [data ordine cliente] AS data, numero AS commessa
FROM [ricambi]
WHERE [numero ordine cliente] IS NOT NULL;

UNION ALL (

SELECT [numero ordine cliente] AS  ordine, [data ordine cliente] AS data, numero AS commessa
FROM [trasferte]
WHERE [numero ordine cliente] IS NOT NULL;

UNION ALL

SELECT [numero ordine cliente] AS  ordine, [data ordine cliente] AS data, numero AS commessa
FROM [xxx]
WHERE [numero ordine cliente] IS NOT NULL
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:46:18.800

您已将您的问题标记为 MySQL 并且您正在使用方括号`[]`。据我所知，方括号对 MySQL*无效*，仅对 Microsoft 产品（SQL Server/MS Access）有效。因此，如果您需要包含表/列名称，请使用反引号```。

[从文档中：](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

> 标识符引号字符是反引号（“`”）：

所以我认为你的查询应该是：

```
SELECT `Ordine numero` AS ordine, `data ordine` AS data, comm AS commessa
FROM `archivio globale`
WHERE `ordine numero` IS NOT NULL

UNION ALL

SELECT `numero ordine cliente` AS ordine, `data ordine cliente` AS data, numero AS commessa
FROM `ricambi`
WHERE `numero ordine cliente` IS NOT NULL

UNION ALL

SELECT `numero ordine cliente` AS  ordine, `data ordine cliente` AS data, numero AS commessa
FROM `trasferte`
WHERE `numero ordine cliente` IS NOT NULL

ORDER BY `ordine`; 
```

编辑，如果您使用的是 MS Access，那么您将需要使用方括号：

```
SELECT *
FROM
(
  SELECT [Ordine numero] AS ordine, [data ordine] AS data, comm AS commessa
  FROM [archivio globale]
  WHERE [ordine numero] IS NOT NULL

  UNION ALL

  SELECT [numero ordine cliente] AS ordine, [data ordine cliente] AS data, numero AS commessa
  FROM [ricambi]
  WHERE [numero ordine cliente] IS NOT NULL

  UNION ALL

  SELECT [numero ordine cliente] AS  ordine, [data ordine cliente] AS data, numero AS commessa
  FROM [trasferte]
  WHERE [numero ordine cliente] IS NOT NULL
) x
ORDER BY [ordine]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T19:27:17.743

在我的情况下，MySQL 链接到 MDB 的表给了我同样的错误。经过几个小时的搜索和尝试，我的解决方案是在第一列前面添加 ''&，如下所示： SELECT ''&COUNT(*) AS MYNR,...

通过这种方式，我设法使用了 UNION ALL 4x。

希望它可以帮助某人

[错误的链接](https://bugs.mysql.com/bug.php?id=78912)

# file - 如何跟踪 Web 服务中单个文件的加密密钥？

> ID：12804498
> 
> 赞同：0
> 
> 时间：2012-10-09T16:34:04.570
> 
> 标签：file, encryption, key, tracking

我正在努力通过给每个文件一个“密码”来添加在我的网站上加密上传文件的选项，但我不确定跟踪每个单独文件的加密密钥的最佳方法。例如，在检索文件时，如果用户输入了错误的密码，我很确定它会下载文件，但不会正确解密。最好将每个文件的散列和加盐密码存储在数据库中并首先在那里匹配？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:39:09.167

如果您将加密密钥存储为散列（和加盐）值，则无法检索原始加密密钥。如果您散列某些东西（使用强大的散列算法），则无法取回原始内容。

最佳机制取决于操作环境（操作系统，以及可能安装的其他软件）和要求。

根据具体要求，最好*根本不*存储加密密钥。关键是*用户*想要保护数据并且*用户*知道密钥。如果可以在客户端执行加密，则密钥根本不必遍历网络（例如，在 JavaScript 中加密）。如果必须在服务器上进行加密，请确保通过 https 连接发送密钥，在内存中使用它来加密文件，然后从内存中删除（如果您的语言支持立即从内存中删除某些内容...例如在 C# 中使用安全字符串）。

如果您*必须*保留加密密钥（这是多个级别的安全问题），您将必须说明有关操作环境的更多信息。

# javascript - 使用 Javascript 更改具有所述类的所有元素的 css 类

> ID：12804500
> 
> 赞同：6
> 
> 时间：2012-10-09T16:34:12.000
> 
> 标签：javascript, css, class, styles, dojo

基本上我试图找到具有特定类名的所有元素并将其切换到另一个。我有另一个函数可以将其切换回原始类名。这是我通过 onclick 触发的函数：

```
function showEventsAppliedTo() {
    var myObj = document.getElementsByClassName('notApplied');
    while (myObj.length >= 0) {
        myObj[0].className = 'mblListItem notAppliedOut';
    }
    AppliedToButton.set('style', 'display:none;');
    EventListingButton.set('style', 'display:block;');
} 
```

我收到一条错误消息，说 myObj[0] 未定义。知道为什么会这样吗？

请注意，我们使用的是 Dojo，因此是函数的最后一行。我知道我可以使用 jQuery 轻松做到这一点，但我们没有使用它，加载另一个框架没有意义。

在此先感谢您的帮助。

编辑

感谢 Abhishek Mishra 的帮助，我修改了处理这个循环的方式，并找到了一种使用 JUST dojo 的方法，这是我的首选。这是代码：

```
function listingClassToggle() {
    dojo.query(".notApplied").addClass("notAppliedOut");
    dojo.query(".notApplied").removeClass("notApplied");
} 
```

比我以前的解决方案更简单的代码和更轻量。感谢你的帮助。我希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:37:16.020

应该只是测试`> 0`not `>= 0`。当长度等于 0 时，没有元素为零。

# google-apps-script - \n 在谷歌应用脚 本 Browser.msgBox 中不起作用

> ID：12804502
> 
> 赞同：21
> 
> 时间：2012-10-09T16:34:16.290
> 
> 标签：google-apps-script

我正在尝试以下方法向消息框添加换行符，但它不起作用。

```
function showMsgBox(){
  var msg = 'name: \n \n \n Doc URL';
  Browser.msgBox("Selected Doc template:", msg, Browser.Buttons.OK);
} 
```

我不关心单引号或双引号。

我也试过`Browser.msgBox(msg);`，但都是一样的。

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-10T06:36:34.310

由于历史原因，您需要双重转义“\n”

```
function myFunction() {
  Browser.msgBox("Hello\\nWorld")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:15:46.173

是的，没错。msgBox 不尊重额外的空格或换行符。问题跟踪器中提出了类似[的问题。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1608)您可以为它加注星标并在那里提供您的反馈。

[问题 1608：向 Browser.msgBox() 添加一个选项以尊重空格](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1608)

# iphone - 添加相机作为子视图

> ID：12804505
> 
> 赞同：2
> 
> 时间：2012-10-09T16:34:32.203
> 
> 标签：iphone, ios5, camera, addsubview

我正在将相机`{[UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera]}` 用作子视图添加到`UIView`我的应用程序中具有固定边界的。

一切正常。但是我看到的所有示例都显示将相机作为模态控制器显示为单屏。我的疑问是，如果将相机作为子视图添加到视图中，APPLE 是否会拒绝任何情况？它应该只显示为全屏模式控制器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:50:28.237

没有规则说您不能将相机视图用作子视图。这完全取决于您的要求和应用程序的具体情况。Apple*可能*不会因为使用相机视图而拒绝您的应用程序。

例如，Layar 应用程序使用相机视图作为其叠加层的背景——显然不是模态控制器。

同时，考虑用户的体验。如果您让您的用户能够使用相机拍照，然后在进一步的应用程序逻辑中使用该图片，那么将其用作模态控制器可能是一种更好的方法，因为它为用户提供了跨多个应用程序的一致体验应用程序：用户确实习惯了某些体验，您需要有充分的理由反对这些一致的体验。

同时，如果您确实有正当理由希望将相机视图作为子视图（例如，在其上显示覆盖层或将过滤器应用于预览，或其他任何方式），那么这是一个完美的选择您做出 UI 设计决定的正当理由。

所以，总而言之，没有规则反对它，但要牢记用户的体验。*另请记住，Apple 可能会出于他们选择的任何*原因选择拒绝您的应用程序- 他们不必向您解释。至少，这是您在加入开发者计划时所同意的。

# jquery - jQuery & miniColors - 设置颜色

> ID：12804508
> 
> 赞同：0
> 
> 时间：2012-10-09T16:34:34.743
> 
> 标签：jquery, background-color, color-picker

当您`add new`单击按钮时，jQuery 将`DIVs`带有`miniColor`插件的新可拖动对象插入到`CONTAINER`. 但是在这个 DIV 中，直到您第一次单击 DIV 才能看到 miniColor 元素。

jsfiddle 示例 - [http://jsfiddle.net/ynternet/m7c7e/4/](http://jsfiddle.net/ynternet/m7c7e/4/)

1.  为什么在第一次单击 DIV 后显示 miniColor 元素？
2.  如何更改背景颜色？
3.  如何更改字体颜色？

**HTML**

```
<div id="add" style="background:yellow; width:100px;cursor:pointer"> add new </div>
<div id="container"> </div> 
```

**jQuery**

```
function handler() {
    if ($(this).find("#menu").length) {
        return;
    }
    $('input').miniColors({                         
       opacity: true
    });
    var currentIndex = parseInt($(this).css('z-index'), 10);
    var newIndex = currentIndex + 1;
    $(this).css('z-index', newIndex);
}
$("#add").on({
    click: function(e) {
        var timestamp = Date.now();
        var posx = Math.floor(Math.random() * 400);
        var posy = Math.floor(Math.random() * 400);
        $('#container').append(function() {
            return $('<div class="add_to_this" id="' + timestamp + '" style="left:' + posx + 'px; top:' + posy + 'px; cursor:pointer;">Click me, drag, change z-index & color <input type="hidden" name="color" value="#FFCC00" data-opacity=".5" /> </div>').click(handler).draggable({
                containment: "#container",
                scroll: false,
                cursor: 'lock'
        });
    });
    }
}); 
```

**CSS**

```
#container {
    width:500px;
    height:500px;
    background: palegoldenrod;
    position: relative;
    top:20px;
    left: 100px;
    padding: 0px;
    z-index:2;
}
.add_to_this {
    padding:5px;
    position: absolute;
    display:inline-block;
    background: yellowgreen;
    width:200px;
    height:70px;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    -o-user-select: none;
    z-index:100;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:37:55.610

那是因为您似乎将 minicolor 附加到了 click(handler) 函数中的 Div ..

```
.click(handler); 
```

您正在在单击 div 时触发的句柄函数中设置 minicolor 框。

# python - 为什么Python标准库中没有读/写文件的功能

> ID：12804513
> 
> 赞同：1
> 
> 时间：2012-10-09T16:34:45.510
> 
> 标签：python

我经常使用下面的两个函数将文件的内容读取到字符串并将字符串写入文件。据我所知，Python 标准库中不存在这些函数，我很好奇为什么。具有高级目录和文件操作的标准库模块[shutil](http://docs.python.org/library/shutil.html)没有此功能，我确信这是一个明确的设计选择，不包含它。即我想知道以下内容：

*   没有将其包含在 Python 标准库中的潜在原因是什么
*   以这种方式处理文件是否有任何缺点（假设一个人知道整个文件内容将被加载到内存中）

**职能**

```
def read_file(path):
    with open(path) as f:
        return f.read()

def write_file(path, data):
    with open(path, 'wb') as f:
        return f.write(data) 
```

为了澄清，我发现以下内容更具可读性

```
write_file('/tmp/test', 'test') 
```

然后是以下两种选择：

```
open('/tmp/test', 'wb').write('test')

with open('/tmp/test', 'wb') as f:
    f.write(data) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:44:27.443

它们都是单行的，你真的不需要它们的功能。

```
data = open("filename").read()
open("filename", "w").write(data) 
```

至少在 CPython 中，文件将在您执行这些语句后立即关闭，因为您没有保留对文件对象的引用。确保在发生异常时关闭文件并不是真正的问题，尤其是在简单的脚本中。

在其他 Python 实现中，例如 Jython 和 IronPython，这可能会更成问题。如果是，有`with`（你也可以在一行上写得很清楚）：

```
with open("filename") as f: data = f.read() 
```

如果你发现有像你写的那样的辅助函数更清楚，一定要写它们；他们很清楚。但它们几乎不是必需的，大多数 Python 程序员不会使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T17:17:58.540

除了它们都可以在像@Kindall 回答这样的单行中使用......

您的示例传递了许多选项，为特定任务呈现它们。

```
def read_file(path):
    with open(path) as f:
        return f.read() 
```

Open 需要一些参数。 [http://docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)

> 打开（名称[，模式[，缓冲]]）

您还可以通过多种方式读取文件：

*   `read` [http://docs.python.org/library/stdtypes.html?highlight=readline#file.read](http://docs.python.org/library/stdtypes.html?highlight=readline#file.read)
*   `readline` [http://docs.python.org/library/stdtypes.html?highlight=readline#file.readline](http://docs.python.org/library/stdtypes.html?highlight=readline#file.readline)
*   `readlines` [http://docs.python.org/library/stdtypes.html?highlight=readline#file.readlines](http://docs.python.org/library/stdtypes.html?highlight=readline#file.readlines)
*   `xreadline` [http://docs.python.org/library/stdtypes.html?highlight=readline#file.xreadlines](http://docs.python.org/library/stdtypes.html?highlight=readline#file.xreadlines)（已弃用并替换为`for line in file`）
*   而这仅仅是开始。整个模块为您提供了操作文件的方法。

根据文件的大小、内容类型以及您想要对其进行的处理——您可能想要进行切换。

像你写的那样拥有“read()”和“write()”函数对于处理小文本文件很有用——但在其他情况下可能会很麻烦。

例如，如果您尝试读取 9GB 的日志文件 - 用您的想法将所有内容读入内存会在大多数当前机器（具有 4-8GB 内存）上导致很多问题。如果该日志文件是二进制格式，那么您在处理数据时会遇到问题。

由于您可以通过链接这些命令使用单行轻松读取/写入文件，因此对我来说，使用另一种更有限的方式来处理文件是没有意义的。

# xcode4 - 无法导入 ?

> ID：12804526
> 
> 赞同：0
> 
> 时间：2012-10-09T16:35:45.053
> 
> 标签：xcode4, import, gamekit

我已将`gamekit`框架添加到我的项目中`XCode 4`，但是当我尝试输入

```
#import <gamekit/gamekit.h> 
```

它不认识它。我试图删除并重新添加`gamekit`框架，但它没有帮助。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:28:02.753

请重新启动系统或 MAC，然后检查它并在项目设置“链接框架和库”中添加框架。它会帮助你。我的工作正常

```
#import <GameKit/GameKit.h> 
```

# postgresql - Heroku 上的 Resque Workers 被 Postgres DB SSL 锁定 - 尚无修复

> ID：12804528
> 
> 赞同：3
> 
> 时间：2012-10-09T16:35:50.683
> 
> 标签：postgresql, heroku, redis, actionmailer, resque

我在 heroku 上使用 resque/redis 将电子邮件作为后台作业发送。它适用于我发送的第一封电子邮件，但之后我收到错误：(ActiveRecord::StatementInvalid: PG::Error: SSL error: decryption failed or bad record mac :) ...

我已经看到了其他要添加到初始化程序的问题/答案：

Resque.after_fork = Proc.new { ActiveRecord::Base.establish_connection } 或

Resque.before_fork = Proc.new { ActiveRecord::Base.establish_connection }

但是，我已经这样做了（并尝试了我能想到的任何其他事情），但我仍然遇到同样的错误。我只用 before_fork 和 after_fork 运行代码无济于事。

我还使用 APN_sender 发送苹果推送通知。这些工作人员没有任何问题（但我称默认的 Heroku 工作人员来做这些工作，而不是 Resque 工作人员）。

这是我的相关文件，请帮忙！这也是我的第一个 SO 问题。如果做得不完美，请道歉。

```
#config/resque.rb
after_fork do |server, worker, resque|
   logger.info("Got to after_fork in resque.rb config file")
defined?(ActiveRecord::Base) and
   ActiveRecord::Base.establish_connection
end

--------------------

#config/initializers/resque.rb
require 'resque'
require 'resque/server'

heroku_environments = ["staging", "production"]
rails_root = ENV['RAILS_ROOT'] || File.dirname(__FILE__) + '/../..'
rails_env = ENV['RAILS_ENV'] || 'development'

#confusing wording..  determines whether or not we are in Production, tested and working
unless heroku_environments.include?(rails_env)
   resque_config = YAML.load_file(rails_root + '/config/resque.yml')
   Resque.redis = resque_config[rails_env]
else
   uri = URI.parse(ENV["REDISTOGO_URL"] || "redis://localhost:6379/")
   Resque.redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
end

----------------------

#resque.rake
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*'
  Resque.after_fork = Proc.new { ActiveRecord::Base.establish_connection }
  Resque.before_fork = Proc.new { ActiveRecord::Base.establish_connection }
end

task "apn:setup" => :environment do
  ENV['QUEUE'] = '*'
end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work"

desc "Alias for apn:work (To run workers on Heroku)"
task "jobs:work" => "apn:work"

-----------------------

#Sending the email
@event.guests.each do |g|
    Resque.enqueue(MailerCallback, "Notifier", :time_change, @event.id, g.id)
end 
```

我正在从 Heroku ps:scale 命令运行一名 Heroku 工作人员和一名 Resque 工作人员。正如我所说，第一封电子邮件发送无错误，然后收到上述错误后的任何电子邮件。

提前致谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:10:11.320

好吧，就是想不通……

切换到延迟的工作，它的工作好多了。我不能再用 apn_sender 发送推送通知有点令人沮丧，但 apn_on_rails 工作正常。

奇怪的问题，还是好奇...

# java - 遇到“找不到符号”的问题 - Java

> ID：12804529
> 
> 赞同：0
> 
> 时间：2012-10-09T16:35:51.517
> 
> 标签：java, compiler-errors

我收到以下三个`cannot find symbol`错误，我不知道为什么！

```
GrammerQueue.java:9: cannot find symbol
symbol  : constructor GrammerStructure()
location: class GrammerStructure
public class GrammerQueue extends GrammerStructure implements StringQueue{
           ^
GrammerQueue.java:45: cannot find symbol
symbol  : variable stack
location: class GrammerQueue
           this.stack += tmpAr[i];
                ^
GrammerQueue.java:47: cannot find symbol
symbol  : variable count
location: class GrammerQueue
       this.count--;
            ^
3 errors 
```

我在另一个脚本上遇到了这个错误，并通过调用该类型的新对象而不是直接调用我的类创建的对象来解决它。但是，我什至还没有尝试创建对象！我能做些什么？

这是代码：

```
import java.lang.*;

public class GrammerQueue extends GrammerStructure implements StringQueue {

    private String queue = "";
    private String structName;

    // @override
    public boolean offer(String item) {
        if (item.length() == 0) // We don't accept empty Strings!
            return false;
        else if (this.queue.length() == 0) // If new queue, just add - no null.
            queue = item;
        else
            // Append null and item for seperation.
            queue += "\0" + item;
        return true; // done.
    }

    // @override
    public String[] asArray() {
        // Splits the string at each null character and returns it as an array.
        String[] array = this.queue.split("\0");
        return array;
    }

    // @override
    public void GrammerStructure(String structureName) {
        this.structName = structureName;
    }

    // @override
    public String take() throws EmptyException {
        // If empty, throw errors.
        if (this.queue.length() == 0)
            throw new EmptyException(structName);
        String[] tmpAr = this.asArray();
        // Empties the stac now that we have it in a temp array.
        this.queue = "";
        // FIFO, so exclude first element in reconstruction.
        for (int i = 1; i < tmpAr.length; i++)
            this.stack += tmpAr[i];
        // We made it this far without error, so reduce count.
        this.count--;
        // Return the first item.
        return tmpAr[0];
    }

    // @override
    public String peek() {
        // Empty string check.
        if (this.queue.length() == 0)
            return null;
        String[] tmpAr = this.asArray();
        // Return the first item.
        return tmpAr[0];
    }

    // @override
    public int size() {
        if (this.queue.length() == 0)
            return 0;
        String[] tmpAr = this.asArray();
        return tmpAr.length;
    }

    // @override
    public void clear() throws EmptyException {
        // If empty, throw errors.
        if (this.queue.length() == 0)
            throw new EmptyException(structName);
        else
            this.queue = ""; // Empty now.
    }

    public void main(String args[]) {}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:38:51.740

看起来你没有`stack`and`count`变量。您需要声明和定义它们，并可能创建 getter 和 setter。

您需要为 GrammerStructure 导入一个包，假设 GrammerStructure 位于不同的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:39:54.220

GrammerQueue 扩展了 GrammerStructure，这是一个不存在的类 (AFAIK)。

# salesforce - apex:commandButton 什么都不能返回？

> ID：12804530
> 
> 赞同：0
> 
> 时间：2012-10-09T16:35:52.883
> 
> 标签：salesforce, apex-code, visualforce

我有：

```
<apex:commandButton action="{!whatever}" value="myButton" reRender="sectionX" /> 
```

和

```
public String whatever(){
    return 'ok';
} 
```

它不起作用（返回 401 Unauthorized），但如果我写：

```
public void whatever(){
    // some code
} 
```

工作正常。

问题是：我怎样才能向这个调用返回一些东西（一个 JSON 或一个页面）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:23:33.690

命令按钮用于在服务器上执行一些代码，它们返回一个 PageReference，而不是一个字符串/json 值。

```
<apex:commandButton action="{!whatever}" value="myButton" reRender="sectionX" /> 
```

因此，该方法`whatever`应该完成工作，然后将结果分配给控制器上的公共属性，以便页面可以显示结果。rerender 属性表示重新加载 outputpanel 中的数据`sectionX`。SectionX 需要包含您希望从命令按钮操作中显示的结果。

```
public class myController {
    public string Result {get;set;}

    public PageReference whatever() {
        // do your work here
        Result = DateTime.Now();
        return null;
    }
} 
```

视觉力量

```
<apex:outputpanel id="sectionX">{!Result}</apex:outputpanel> 
```

每次单击`myButton`命令按钮时，输出面板都会显示一个新的日期时间字符串。

事后思考：如果您想将字符串结果/JSON 放入 javascript 方法中，您可以执行以下操作。

```
<script>    
    function processJSON(val) {
    var res = JSON.parse(val);
    // do your work here
    }
</script>

<apex:outputpanel id="sectionX">
<script>
 processJSON("{!Result}");
</script>
</apex:outputpanel> 
```

在您的示例命令按钮代码中，您使用了重新渲染，因此您不需要返回非空 PageReference。另一方面，如果您想在单击命令按钮时转到另一个页面，则无需设置重新渲染属性，并且需要返回非空 PageReference，即

```
public PageReference whatever() {
    return Page.MyVisualforcePage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:05:50.460

Not realy. Look [here](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_commandButton.htm) As for me, I used method which returns PageReference variable.

Better to do like this:

```
public PageReference whatever(){
    PageReference pageRef = null; // null won't refresh page at all if I'm not mistaken
    // some cool logic goes here
    if(toNavigate) {
      pageRef = new PageReference('here is some URL to which user must be navigated');
    } else if(toRefreshCurrent) {
      pageRef = ApexPages.currentPage();
    }

    return pageRef;
} 
```

About returning page - look [here](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#CSHID=pages_compref_commandButton.htm%7CStartTopic=Content/pages_compref_commandButton.htm%7CSkinName=webhelp).

# regex - 使用 sed 搜索和替换 URL，除非在某些情况下

> ID：12804532
> 
> 赞同：2
> 
> 时间：2012-10-09T16:35:58.157
> 
> 标签：regex, sed

我有一个 url 列表，对于大多数人来说，我想做一个简单的搜索和替换，但在某些情况下，我想使用 sed 排除。

鉴于以下列表：

```
http://www.dol.gov 
http://www.science.gov 
http://www.whitehouse.gov 
http://test.sandbox.local 
http://www.travel.state.gov 
http://www.lib.berkeley.edu
http://dev.sandbox.local 
```

我想将 URL 中没有“沙箱”的所有 URL 转换为：

```
href="/fetch?domain=<url>" 
```

到目前为止，我对 sed 的了解如下：

```
sed -r 's|http://(\S*)|href="/fetch\?domain=\1"|g' 
```

它将按预期重新格式化所有 URL。

如何修改我必须排除其中包含“沙盒”的行的内容？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:39:00.123

如果排除，你的意思是“不做替换”，那么：

```
sed -r '/sandbox/!s|http://(\S*)|href="/fetch\?domain=\1"|g' 
```

如果您的意思是“从输出中完全省略”：

```
sed -r -e '/sandbox/d' -e 's|http://(\S*)|href="/fetch\?domain=\1"|g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:39:10.650

```
sed -r 's|http://(\S*)|href="/fetch\?domain=\1"|g' | grep -v sandbox 
```

# sql-server-2008 - 恢复所有 Sql server 事务日志但一个查询？

> ID：12804533
> 
> 赞同：1
> 
> 时间：2012-10-09T16:36:04.133
> 
> 标签：sql-server-2008, database-backups, database-restore, transaction-log

除了一个查询，有没有办法恢复整个事务日志？

例如，您意外执行的删除查询或更新查询？

因为我知道它是可能的，恢复到某个时间，但是如果邪恶的查询只影响一个表，而你不想松动其他表中的更改呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:01:57.813

您当然可以使用**ApexSQL Log**。您可以恢复已删除或更新的行，但您也可以选择要恢复的数据。

工具工作得很好，而且非常灵活。许多过滤器可帮助您缩小对要恢复的数据的搜索范围。

在这里您可以找到一些信息：[如何从意外的 UPDATE 和 DELETE 操作中恢复 SQL Server 数据](http://solutioncenter.apexsql.com/2012/11/how-to-recover-sql-server-data-from.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:43:32.960

这是我建议你尝试的。实际上是一个相当普遍的场景。

1.  将数据库还原到服务器上的“第二个”副本

    *（完整备份或日志备份让您回到丢失点）*

2.  隔离复制数据库中的单个表*或数据*并将其移至实时数据库

有多种方法可以完成第 2 步，例如

*   直接查询（插入/更新）
*   [合并语句](http://msdn.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx)
*   [ssms 导出/导入向导](http://msdn.microsoft.com/en-us/library/ms140052%28v=sql.105%29.aspx)
*   ssis 等等等等等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:45:48.717

仅使用 SQL Server 附带的工具是无法做到这一点的，尽管正如您所说，您可以使用时间点恢复来接近。

我相信[ApexSqlLog](http://www.apexsql.com/sql_tools_log.aspx)可能允许您这样做，但我从未以这种方式测试过使用它。 [Red Gate 的SQL Log Rescue](http://www.red-gate.com/products/dba/sql-log-rescue/)似乎也允许您这样做，虽然我使用过 Red Gate 的许多产品并且总体上对它们非常满意，但我也没有尝试过那个特定的产品。

# jquery - 使用 jQuery replaceWith(); 在特定班级

> ID：12804534
> 
> 赞同：1
> 
> 时间：2012-10-09T16:36:09.310
> 
> 标签：jquery, jquery-ui, dialog, append, replacewith

我有一个通过 PHP/MySQL 填充的联系人表。每个联系人都在自己的行中，其类名是“line”加上行号，例如“line01”或“line02”。

我有一个 jQuery 模式对话框，用于添加新联系人、编辑当前联系人和删除联系人。我`.replaceWith()`用于编辑和`.append();`添加新联系人。我现在的挑战是让编辑功能正常工作，以便它只替换`<div>`正在编辑的行，而不是所有行。

如何选择要替换的特定元素，或确保被替换的行与正在编辑的行具有相同的 ID？应该很简单，但我只是无法让它正常工作。帮助表示赞赏！

这是我到目前为止的代码：

```
$("#contact-dialog").dialog({
    autoOpen: false,
    width: 600,
    modal: true,
    buttons: {
            "Add Contact": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( contact_first_name, "first name", 2, 64 );
                bValid = bValid && checkLength( contact_last_name, "last name", 2, 64 );
                bValid = bValid && checkLength( title, "title", 1, 64 );
                bValid = bValid && checkLength( phone, "phone", 6, 30 );
                bValid = bValid && checkLength( email_address, "email_address", 5, 128 );       

                /* Handle edit function */                  
                if (crow.val().length > 0) {
                    if ( bValid ) {
                        if (contact_count % 2) {
                          //$( "#contacts" ).html(
                         // '<div class="line'+contact_count+'">' +
                         $('.line'+contact_count).replaceWith(
                            '<div class="action gray">' +
                            '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                            '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                            '</div>' +
                            '<div class="contact gray"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' +
                            '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                            '<div class="phone gray"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                            '<div class="email gray"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                            '<div class="primary gray"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                            '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                            '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                            '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                            '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                            '</div>' +
                            '<div class="clear"></div>');
                            $( this ).dialog( "close" );
                          } 
                       else {
                          //$( "#contacts" ).html( 
                           // '<div class="line'+contact_count+'">' +
                          $('.line'+contact_count).replaceWith(
                            '<div class="action">' +
                            '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                            '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                            '</div>' +
                            '<div class="contact"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' + 
                            '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                            '<div class="phone"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                            '<div class="email"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                            '<div class="primary"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                            '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                            '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                            '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                            '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                            '</div><div class="clear"></div>');
                            $( this ).dialog( "close" );
                        }
                        contact_count++;
                     }

                }
                /* Handle new contact rows */
                else if ( bValid ) {
                    if (contact_count % 2) {
                      $( "#contacts" ).append(
                        '<div class="line'+contact_count+'">' +
                        '<div class="action gray">' +
                        '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                        '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                        '</div>' +
                        '<div class="contact gray"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' +
                        '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                        '<div class="phone gray"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                        '<div class="email gray"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                        '<div class="primary gray"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                        '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                        '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                        '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                        '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                        '</div><div class="clear"></div>');
                        $( this ).dialog( "close" );
                      } else {
                      $( "#contacts" ).append( 
                        '<div class="line'+contact_count+'">' +
                        '<div class="action">' +
                        '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                        '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                        '</div>' +
                        '<div class="contact"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' + 
                        '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                        '<div class="phone"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                        '<div class="email"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                        '<div class="primary"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                        '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                        '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                        '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                        '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                        '</div><div class="clear"></div>');
                        $( this ).dialog( "close" );
                      }
                      contact_count++;                      
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    }); 
```

**编辑：**这是代码`edit_contact()`：

```
function edit_contact(contact_line, cid) {
    // $('#contact-dialog-link').val('edit');
    $('#contact-dialog-id').val(cid);
    $('#contact-first-name').val($('.line'+contact_line+' #contact-first-name'+contact_line).val());
    $('#contact-last-name').val($('.line'+contact_line+' #contact-last-name'+contact_line).val());
    $('#title').val($('.line'+contact_line+' #title'+contact_line).val());
    $('#cphone').val($('.line'+contact_line+' #cphone'+contact_line).val());
    $('#email-address').val($('.line'+contact_line+' #email-address'+contact_line).val());
    $('#twitter').val($('.line'+contact_line+' #twitter'+contact_line).val());
    $('#facebook').val($('.line'+contact_line+' #facebook'+contact_line).val());
    $('#linkedin').val($('.line'+contact_line+' #linkedin'+contact_line).val());
    $('#contact-update').val(contact_line);
    $('#contact-dialog-link').trigger('click');
} 
```

**编辑：**这是处理保存功能的 PHP：

```
if ($_POST && $_POST['type'] == 'add-to-contacts') {
$fid = $_SESSION['facility_current'];
if ($_POST['input'] == 'edit') {
//  if ($_POST['contact-update'] == ''){
    $dbQuery = sprintf("UPDATE facility_contacts SET fid=%d, first_name='%s', last_name='%s', title='%s', phone='%s', email_address='%s', twitter='%s', facebook='%s', linkedin='%s' WHERE cid = %d;", $fid,$_POST['first_name'],$_POST['last_name'],$_POST['title'],$_POST['phone'],$_POST['email_address'],$_POST['twitter'],$_POST['facebook'],$_POST['linkedin'],$_POST['cid']);
} else {
    $dbQuery = sprintf("INSERT INTO facility_contacts (fid, first_name, last_name, title, phone, email_address, twitter, facebook, linkedin) VALUES (%d,'%s','%s','%s','%s','%s','%s','%s','%s');", $fid,$_POST['first_name'],$_POST['last_name'],$_POST['title'],$_POST['phone'],$_POST['email_address'],$_POST['twitter'],$_POST['facebook'],$_POST['linkedin']);
}
$dbResult = $dbc->query($dbQuery,__FILE__,__LINE__);
unapprove_proof_status();
echo ($dbResult) ? true : false;
exit; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:55:19.447

I'm not sure if your selectors for `$('#contact-first-name').val()` are specific enough. You may need something like `$('#contact-first-name', '.line'+contact_line).val()` to select the contact `input` item within a specific `<div class="line'+contact_count+'">`. I would try this:

```
$("#contact-dialog").dialog({
    autoOpen: false,
    width: 600,
    modal: true,
    buttons: {
            "Add Contact": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( contact_first_name, "first name", 2, 64 );
                bValid = bValid && checkLength( contact_last_name, "last name", 2, 64 );
                bValid = bValid && checkLength( title, "title", 1, 64 );
                bValid = bValid && checkLength( phone, "phone", 6, 30 );
                bValid = bValid && checkLength( email_address, "email_address", 5, 128 );       

                var alt = contact_count % 2 ? ' gray': '';

                /* Handle edit function */                  
                if (crow.val().length > 0) {
                    if ( bValid ) {
                         $('.line'+contact_count).replaceWith(
                            '<div class="action' + alt + '">' +
                            '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                            '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                            '</div>' +
                            '<div class="contact' + alt + '"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' +
                            '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                            '<div class="phone' + alt + '"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                            '<div class="email' + alt + '"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                            '<div class="primary' + alt + '"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                            '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                            '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                            '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                            '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                            '</div>' +
                            '<div class="clear"></div>');
                            $( this ).dialog( "close" );

                        contact_count++;
                     }

                }
                /* Handle new contact rows */
                else if ( bValid ) {
                      $( "#contacts" ).append(
                        '<div class="line'+contact_count+'">' +
                        '<div class="action' + alt + '">' +
                        '<a href="javascript:edit_contact('+contact_count+');"><img src="images/icons/edit.png" width="15" height="16" border="0" /></a>' +
                        '<a href="javascript:delete_contact('+contact_count+');"><img src="images/icons/trash.png" width="11" height="16" border="0" /></a>' +
                        '</div>' +
                        '<div class="contact' + alt + '"><input type="hidden" id="contact-first-name'+contact_count+'" name="contact_first_name[]" value="'+contact_first_name.val()+'" />' +
                        '<input type="hidden" id="contact-last-name'+contact_count+'" name="contact_last_name[]" value="'+contact_last_name.val()+'" />'+contact_first_name.val()+' '+contact_last_name.val()+'</div>' +
                        '<div class="phone' + alt + '"><input type="hidden" id="cphone'+contact_count+'" name="cphone[]" value="'+phone.val()+'" />'+phone.val()+'</div>' +
                        '<div class="email' + alt + '"><input type="hidden" id="email-address'+contact_count+'" name="email_address[]" value="'+email_address.val()+'" />'+email_address.val()+'</div>' +
                        '<div class="primary' + alt + '"><input type="radio" id="primary'+contact_count+'" name="primary[]" value="1" /></div>' +
                        '<input type="hidden" id="twitter'+contact_count+'" name="twitter[]" value="'+twitter.val()+'" />' +
                        '<input type="hidden" id="facebook'+contact_count+'" name="facebook[]" value="'+facebook.val()+'" />' +
                        '<input type="hidden" id="linkedin'+contact_count+'" name="linkedin[]" value="'+linkedin.val()+'" />' +
                        '<input type="hidden" id="title'+contact_count+'" name="title[]" value="'+title.val()+'" />' +
                        '</div><div class="clear"></div>');
                        $( this ).dialog( "close" );
                      contact_count++;                      
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    });

function edit_contact(contact_line, cid) {
    $('#contact-dialog-id').val(cid);
    $('#contact-first-name', '.line'+contact_line).val($('.line'+contact_line+' #contact-first-name'+contact_line).val());
    $('#contact-last-name', '.line'+contact_line).val($('.line'+contact_line+' #contact-last-name'+contact_line).val());
    $('#title', '.line'+contact_line).val($('.line'+contact_line+' #title'+contact_line).val());
    $('#cphone', '.line'+contact_line).val($('.line'+contact_line+' #cphone'+contact_line).val());
    $('#email-address', '.line'+contact_line).val($('.line'+contact_line+' #email-address'+contact_line).val());
    $('#twitter', '.line'+contact_line).val($('.line'+contact_line+' #twitter'+contact_line).val());
    $('#facebook', '.line'+contact_line).val($('.line'+contact_line+' #facebook'+contact_line).val());
    $('#linkedin', '.line'+contact_line).val($('.line'+contact_line+' #linkedin'+contact_line).val());
    $('#contact-update').val(contact_line);
    $('#contact-dialog-link').trigger('click');
} 
```

By using `$('#itemToUpdate', '#divWhereItLives')`, you can set a context for where to find the item to update - see [http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

**Edit:** should have been `var alt = contact_count % 2 ? ' gray': '';`. Sorry

# php - 我该如何解决这个mysql搜索查询

> ID：12804536
> 
> 赞同：0
> 
> 时间：2012-10-09T16:36:18.283
> 
> 标签：php, jquery, mysql

I'm working on a chained select drop down that pulls data from the database to populate the category combobox while the subcategory combo box populates when an option from the category combobox is selected. 类别下拉框从数据库中提取数据没有任何问题，但是我无法根据类别组合框中选择的选项的“id”从数据库中获取子类别组合框选择数据。任何帮助请？下面是我的 php 代码以及显示数据的 jquery 代码

```
 <?php 
    include ('../storescripts/connection.php');

      function ShowCategory(){
    $sql = "SELECT * FROM category";
   $res = mysql_query($sql) or die(mysql_error());
   $category = '<option value="0">Choose...</option>';
     while($row = mysql_fetch_array($res))
     {
         $category .= '<option value = "'.$row['category_id'].'"> '.$row['category_name']. ' </option>';
         }
         return $category;
   }

   function ShowSubCategory(){
         if (!isset($_POST['id'])) 
        {
        //If not isset -> set with dumy value 
        $_POST['id'] = ""; 

            } 

       $sql1 = "SELECT * FROM subcategory WHERE category_id = '$_POST[id]'";    
       $res1 = mysql_query($sql1) or die(mysql_error());   
       $subcategory = '<option value="0"> Choose...</option>';
       while($row = mysql_fetch_array($res1)){

             $subcategory .= '<option value="'.$row['subcategory_id'].'"> '.$row['subcategory_name'].' </option>';

           }
           return $subcategory;
       }

?> 
```

//jquery代码

```
 <script type="text/javascript">
 $(document).ready(function() {

 $("select#category").change(function(){
var id = $("select#category option:selected").attr('value');
 $.post("select_subcat.php", {id:id}, function(data){
    $("select#subcategory").html(data);
    });
 });

 });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:51:57.407

尝试缩小可能是问题的范围。当您进行选择时，让 PHP 将 SQL 语句打印到页面上。

然后，您可以将确切的语句输入 MySQL（通过命令行或通过 phpmyadmin），看看是否得到了您想要的结果。如果你这样做了，那么问题就在后面。你看到了什么？

我会同意之前的海报 - 如果 $_POST id 没有设置，你用“”填充它吗？那可能不会有任何结果。

最后一点：至少在你接触任何 $_POST 或 $_GET 变量之前使用[mysql_real_escape_string() 。](http://php.net/manual/en/function.mysql-real-escape-string.php)否则，您将打开您的站点以应对许多 SQL 注入攻击。

# c# - 活动大会

> ID：12804538
> 
> 赞同：0
> 
> 时间：2012-10-09T16:36:21.497
> 
> 标签：c#, events, xna, convention

我正在制作 XNA 游戏，我对活动的约定有疑问。我制作了一个带有按钮的菜单，这些按钮有 3 个事件：onClick、onMouseEnter 和 onMouseLeave。

Atm 我的代码如下所示：

```
 public static void PlayonClick(Button sender, EventArgs args)
    {

    }
    public static void PlayonMouseEnter(Button sender, EventArgs args)
    {

    }
    public static void PlayonMouseLeave(Button sender, EventArgs args)
    {

    } 
```

此代码将针对菜单中的每个按钮重复。现在我认为如果有 1 个事件并且 eventargs 将包含发生的事情会更好（onClick，onMouseLeave，onMouseEnter）

*注意：每个按钮的 onMouseEnter 和 onMouseLeave 实际上都是相同的。所以我正在考虑将所有事件订阅到 1 方法*

那么，他们实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:43:12.373

假设您在代码中附加处理程序：

```
button.onClick += PlayonEvent;
button.onMouseEnter += PlayonEvent;
button.onMouseLeave += PlayonEvent; 
```

如果在 XAML 中附加，请执行相同的操作，即所有事件都由同一个处理程序处理。无论哪种方式，定义这样的处理程序，如：

```
public static void PlayonEvent(Button sender, EventArgs args)
{
    // do something based on EventArgs, which can give you an idea of what's going on
} 
```

# java - getWidth() 调用时没有给出正确的面板宽度

> ID：12804541
> 
> 赞同：0
> 
> 时间：2012-10-09T16:36:43.740
> 
> 标签：java, swing, jframe

我正在处理一个 Java`JFrame`对象，每当我调用 and 的值时`getWidth()`，`getHeight()`它总是返回超过我使用该`setPreferredSize()`函数为面板设置的值。

有人能告诉我为什么吗？如果我将面板声明为`this.setPreferredSize(new Dimension(500,400));`

每当我分别调用 和 时，我确实得到了 520 和 462 的`getWidth()`值`getHeight()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:39:08.153

该面板位于`JFrame`具有边框和标题栏的内部。这些片段的大小增加了`JFrame`，它们的大小取决于外观和操作系统。

# hibernate - 使用休眠搜索索引和查询多对多关联

> ID：12804543
> 
> 赞同：1
> 
> 时间：2012-10-09T16:36:52.553
> 
> 标签：hibernate, lucene, hibernate-search

我有用户和联系人，用户和联系人之间有一个毫米，显示哪个用户正在关注哪个联系人

我想索引联系人并按如下方式查询它们

列出用户关注的所有联系人。列出用户关注的所有联系人，这些联系人由另一个用户创建。

```
UserContacts have the following fields
id
User user;
Contact contact;

User
id
name
emailid
Set<UserContacts> userContacts;

Contacts
id
Address address;
User createdBy;
Set<UserContacts> userContacts; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:45:49.187

您将使用 @IndexedEmbedded - [http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-mapping-associated](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-mapping-associated)。详细信息将取决于您的模型和用例。

# iphone - 如何在 iOS 应用程序中以编程方式拨打电话卡号码并输入 PIN？

> ID：12804545
> 
> 赞同：2
> 
> 时间：2012-10-09T16:37:03.633
> 
> 标签：iphone, ios, cocoa-touch

我正在构建一个 iOS 应用程序，它将拨打电话卡访问号码，然后拨打目的地号码（不需要 PIN，因为服务提供商具有来电显示身份验证）。一切正常，但是当我拨打一个号码时，它会在拨号器和最近通话中显示 1231223344,,,,,11112222。

是否可以只显示 1231223344？我不想显示任何暂​​停 (,) 或后续拨打的号码。这是我到目前为止使用的代码：

```
-(IBAction)dialButtonPressed:(UIButton *)numberButton
{
    phoneNumberLabel.text = phoneNumberString;

    NSString *numberToDial = [NSString stringWithFormat:@"tel:1231223344,,,,,%@", phoneNumberString];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:numberToDial]];

    NSLog(@"Dialing Phone Number");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:17:18.917

虽然不能直接拨打一个号码，而是在拨号历史记录中显示另一个号码，但有一些解决方法：

在通讯录中创建一个联系人，电话号码为 1231223344,,,,,11112222，名字为 1231223344。如果通讯录中有与号码匹配的联系人，则通话记录将显示该姓名（在这种情况下没有电话卡的号码）而不是号码。

# security - 我正在使用 MD5 对密码进行哈希处理。我什么时候应该跳到下一件事？SHA-3？

> ID：12804551
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:37:46.737
> 
> 标签：security, encryption, passwords, md5, sha

10 月 2 日，NIST 决定 SHA-3 是新的标准哈希算法。

MD5 用户应该开始迁移到 SHA-3 吗？别的东西（见下文为什么不推荐使用 SHA-3）？加密货币？

[为什么不{MD5、SHA1、SHA256、SHA512、SHA-3 等}？](http://codahale.com/how-to-safely-store-a-password/)

而且，这真的很关键吗？即使您的密码是盐渍的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T18:43:26.563

*不使用 MD5 对密码*进行哈希处理的主要原因并不是MD5 受到严重破坏甚至被认为已损坏。

确实，[MD5 有已知的漏洞](http://en.wikipedia.org/wiki/MD5#Security)。但它们都不会对您使用 MD5 造成严重威胁。因为在您的情况下，唯一的威胁是原像攻击，攻击者会尝试找到已知散列的原像，例如已知（加盐）密码散列的密码。并且可能已知的针对 MD5 的原像攻击只是理论上的，并且将工作量从 2 ^(128)降低到 2 ^(123.4)，这并不是什么大优势。平均为 2 ^(64)的蛮力攻击仍然更有希望。

不，不使用 MD5 的主要原因是因为**MD5 太快了**。使用当今经济实惠的计算机，您可以[每秒生成和测试 7190M MD5 哈希值](http://hashcat.net/oclhashcat-plus/#performance)。无论是否加盐，所有 8 个字符长的字母数字字符组合都可以在大约 8.5 小时内被暴力破解。

与此相反，像这样的哈希函数`bcrypt $2a$`每秒只能生成和测试 4085 个哈希值，因此只有 MD5 哈希值的 0.00005682 %。与`bcrypt $2a$`您进行相同的尝试将需要 1694 年。

# android - 在android上获取空闲进程内存

> ID：12804557
> 
> 赞同：3
> 
> 时间：2012-10-09T16:38:04.740
> 
> 标签：android, memory, memory-management

如何获取android上当前正在运行的进程的空闲内存量？或者如何以编程方式获取分配给当前进程的内存总量？

方法`ActivityManager.getMemoryInfo()`在我的情况下不起作用，因为它返回空闲的系统内存，而不是进程内存。还有`ActivityManager.getProcessInfo()`一种方法，但它返回一个旧的 API 结构，我不知道是否可以使用该数据检索空闲内存量。

关于这些方法的任何解释，或者可能是其他一些获取可用内存量的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:13:01.700

您还可以使用`Runtime.getRuntime().maxMemory();`which 返回进程的最大堆大小（以字节为单位）。

尽管这通常与内存类相同，但我发现内存类返回较高值（即 24MB）而堆大小返回较低值（即 16MB）的情况，而进程真正可用的值是较低的.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:43:07.347

试试下面的代码：

```
 ActivityManager activityManager = = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
      MemoryInfo mi = new MemoryInfo();
      activityManager.getMemoryInfo(mi);
      Log.i("memory free", "" + mi.availMem); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:56:56.640

对我来说不是很满意，但我发现[`ActivityManager.getMemoryClass()`](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)返回分配给应用程序的内存量以兆字节为单位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:40:40.217

尝试以下命令：

启动应用程序并输入以下命令

```
 C:\Program Files\Android\android-sdk\platform-tools\adb shell dumpsys meminfo "your package name" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T20:11:38.460

该类`Debug`提供了许多有关进程内存使用的有用信息。您可以获得有关 Dalvik 堆和本机堆的信息。请参阅[http://developer.android.com/reference/android/os/Debug.html](http://developer.android.com/reference/android/os/Debug.html)

# c# - 尝试运行我的代码和编译器似乎在它执行后就关闭了

> ID：12804564
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:35:17.750
> 
> 标签：c#

我正在尝试运行一个程序，编译器似乎在它执行后立即崩溃......我没有构建错误。

我试过注释掉代码块，但仍然无济于事。我已经将主文件也复制到另一个文件中并运行它并且它有效....所以我真的很难过。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
namespace ConsoleApplication1
{
   public class Student
{

string Fname, Lname, Program ;
int Sid ;

// Inputting information for students
public void InputStudentInfo () 
{
    Console.WriteLine ("Please enter your first name") ;
    Fname = Console.ReadLine() ;
    Console.WriteLine ("Please enter you last name") ;
    Lname = Console.ReadLine() ;
    Console.WriteLine ("Please enter you student ID#") ;
    Sid = int.Parse(Console.ReadLine()) ;
    Console.WriteLine ("Enter the Program that you are completeing") ;
    Program = Console.ReadLine() ;
}

// Printing information for students
public void PrintStudentInfo ()
{
    Console.Write (" Your name is " + Fname) ;
    Console.Write(" " + Lname);
    Console.WriteLine (" Your student identification number is " + Sid) ;
    Console.WriteLine (" The program you are registered for is " + Program) ;
} 

/* public void MenuInterface()
{
    Console.WriteLine (" 1\. Input Student information" ) ;
    Console.WriteLine (" 2\. Input Course information" ) ;
    Console.WriteLine (" 3\. Input Grade information" ) ;
    Console.WriteLine (" 4\. Print Course information" ) ;
    Console.WriteLine (" 5\. Print Student information" ) ;
    Console.WriteLine (" 6\. Print Grade information" ) ;
    Console.WriteLine (" 7\. Print Student information including Course they are registered in and the grade obtained for that course" ) ;
    Console.WriteLine (" 8\. Print grade info of the course in which student has achieved the highest grade" ) ;
    Console.WriteLine (" 0\. Exit") ;
    Console.WriteLine (" Please select a choice from 0-8") ;
    accode = Console.ReadLine();
} */

}

public class Course
{

string course1, course2, course3 ;
int Stuid ;

// Inputting Course Information
public void InputCourseInfo ()
{
    Console.WriteLine (" Please re-enter your identification number") ;
    Stuid = int.Parse(Console.ReadLine()) ;
    Console.WriteLine (" Enter the name of your first course") ;
    course1 = Console.ReadLine() ;
    Console.WriteLine (" Enter the name of your second course") ;
    course2 = Console.ReadLine() ;
    Console.WriteLine (" Enter the name of your third course") ;
    course3 = Console.ReadLine() ;
}

// Printing Course Information
public void PrintCourseInfo ()
{
    Console.WriteLine (" Your ID # is " + Stuid) ;
    Console.Write (" The Courses you selected are " + course1) ;
    Console.Write("," + course2);
    Console.Write(" and " + course3);
}
}
public class Grade : Course
{
    int Studentid ; 
    int [] hwgrade ; 
    int [] cwgrade ;
    int [] midegrade ; 
    int [] finalegrade ; 
    int [] totalgrade ;
    string coursename ;

    public Grade ( string cname , int Studentident , int [] homework , int [] classwork , int [] midexam , int [] finalexam)
    {
        coursename = cname ;
        Studentid = Studentident ;  
        hwgrade = homework ;
        cwgrade = classwork ;
        midegrade = midexam ;
        finalegrade = finalexam ;
    } 

    public string coname
    {
        get
        {
            return coursename ;
        }
        set
        {
            coursename = value ;
        }
    }

    public int Studentidenty
    {
        get
        {
            return Studentid ;
        }
        set
        {
            Studentid = value ;
        }
    }

    public void InputGradeInfo()
    {
        Console.WriteLine (" Please enter your Student ID" ) ;
        grade.Studentidenty = Console.ReadLine() ;
        for ( int i = 0; i < 3; i++)
        {
            Console.Writeline (" Please enter the Course name" ) ;
            grade.coname[i] = Console.Readline() ;
            Console.Writeline (" Please enter your homework grade") ;
            grade.hwgrade[i] = int.parse(Console.Readline()) ;
           // .....
        }
    }

    public void CalcTotalGrade()
    {
        for (int i = 0; i < 3; i++)
        {
            grade.courseper[i] = (grade.hwgrade[i] + grade.cwgrade[i]) / 2;
            grade.finalper[i] = (grade.midexam[i] + grade.finalegrade[i]) / 2;
            grade.totalgrade[i] = (grade.courseper[i] + finalper[i]) / 2;
        }
    }

    public void PrintGradeInfo()
    {
        for ( int i = 0; i < 3; i++)
        {
            Console.Writeline (" Your homework grade is" + grade.hwgrade[i]) ;
           // .....
        }
    }
        static void Main(string[] args)
        {
            int accode ;
            Student student = new Student() ;
            Course course = new Course() ;
            Grade grade = new Grade() ;
            do
            {
                Console.WriteLine(" 1\.  Input Student information");
                Console.WriteLine(" 2\.  Input Course information");
                Console.WriteLine(" 3\.  Input Grade information");
                Console.WriteLine(" 4\.  Print Course information");
                Console.WriteLine(" 5\.  Print Student information");
                Console.WriteLine(" 6\.  Print Grade information");
                Console.WriteLine(" 7\.  Print Student information including Course they are registered in and the grade obtained for that course");
                Console.WriteLine(" 8\.  Print grade info of the course in which student has achieved the highest grade");
                Console.WriteLine(" 0\.  Exit");
                Console.WriteLine(" Please select a choice from 0-8");
                accode = Console.ReadLine();
                switch (accode)
                {
                    case 1:
                        student.InputStudentInfo();
                        break;
                    case 2:
                        course.InputCourseInfo();
                        break;
                    case 3:
                        grade.InputGradeInfo();
                        break;
                    case 4:
                        course.PrintCourseInfo();
                        break;
                    case 5:
                        student.PRintStudentInfo();
                        break;
                    case 6:
                        grade.PrintGradeInfo();
                        break;
                    case 0:
                        Console.WriteLine(" You have chosen to exit the program have a good day. =)");
                        break;
                }
            } while (accode != 0); 
            Console.ReadKey();
        } 
    }
} 
```

当我说我复制了 main 时……我的意思是我拿走了 main 下的所有代码并打开了一个新项目并将代码放回去，程序运行了。我尝试了关于使用 try 和 catch 的建议……但同样的问题仍然存在，当我按下 start 时，没有错误，cmd 在瞬间打开和关闭。当我按 ctrl + f5 时，屏幕出现但只显示“按任意键继续”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:45:23.873

像这样在你的 main 方法中添加一个 try catch 来提示你出了什么问题：

```
static void Main(string[] args)  
            {  
    try
    {
                int accode ;  
                Student student = new Student() ;  
                Course course = new Course() ;  
                Grade grade = new Grade() ;  
                do  
                {  
                    Console.WriteLine(" 1\.  Input Student information");  
...
                    Console.WriteLine(" 0\.  Exit");  
                    Console.WriteLine(" Please select a choice from 0-8");  
                    accode = Console.ReadLine();  
                    switch (accode)  
                    {
    ...  
                    }  
                } while (accode != 0);   
    }
    catch (Exception Ex)
    {
       Console.Writeline("Exception: " + ex.Message);
    }
                Console.ReadKey();  
            } 
```

# android - 有图像的图像视图的快照

> ID：12804565
> 
> 赞同：3
> 
> 时间：2012-10-09T16:38:49.337
> 
> 标签：android, android-imageview

我正在使用 imageview 通过两根手指在 imageview 中旋转和缩放图像。当我缩放图像时，它的缩放我想要缩放后当前在 imageview 上看到的图像的一部分我该怎么做，请帮助我，因为它可以拍摄那个时刻的那个 imageview 的快照。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:47:03.310

也许下面，`v1`你的 ImageView 在哪里，这里的主体将被一些“捕获”按钮调用。

```
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache()); 
```

来源：[这里](https://stackoverflow.com/a/6160077/420001)。

# php - 阻止搜索引擎访问特定的数据库字段

> ID：12804576
> 
> 赞同：2
> 
> 时间：2012-10-09T16:39:15.160
> 
> 标签：php, mysql, database, database-design, phpmyadmin

我想隐藏我的数据库中的一些特定字段（例如：年龄、电话号码、地址）以被搜索引擎屏蔽。有什么办法吗？

工作在 phpMyAdmin..

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:42:36.567

无论如何，搜索引擎都无法访问您的数据库。相反，它们索引您的 Web 服务器提供的内容。页面（以及底层脚本、代码等）被呈现给搜索引擎索引器/爬虫/机器人，类似于普通用户遇到信息的方式。

您可以使用[`robots.txt`](http://www.robotstxt.org/)文件来指示搜索引擎*不要*将给定页面作为一个整体编制索引。没有办法（据我所知）简单地从搜索引擎爬虫隐藏页面上的某些信息。

# javascript - 如何将字符串插入到 javascript 对象中

> ID：12804577
> 
> 赞同：0
> 
> 时间：2012-10-09T16:39:18.667
> 
> 标签：javascript, jquery, logic, business-logic

```
var myeleArr = {
                    advertiser :{},
                    campaign :{},
                    strategy :{},
            }; 
```

我想在 myeleArr.campaign 对象中插入一些字符串，所以我按如下所示进行操作，但控制台显示为*Object # has no method 'push'*

```
myeleArr.campaign.push('<span class="'+myele['status']+'"></span>'+myele['name']+''); 
```

一些身体可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:48:02.003

如果您打算将活动设置为字符串，则设置

```
myeleArr.campaign = "my string"; 
```

如果您打算让活动按顺序保存一堆字符串，其中不按名称引用字符串，则将其设为数组：

```
myeleArr.campaign = [];
myeleArr.campaign.push("My String");
myeleArr.campaign[0]; // "My String" 
```

如果您打算让活动按名称保存一堆字符串，则将您当前的活动对象命名为属性，并将每个命名属性设置为字符串：

```
myeleArr.campaign = {
    title : "My Title",
    type  : "Campaign Type",
    description : "Campaign Description",
    num_managers : 7,
    isActive : true
};

myeleArr.campaign.title; // "My Title" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:40:11.207

该`push`函数用于将项目添加到数组中，但`campain`未定义为数组。

试试这个：

```
 var myeleArr = {
        advertiser :{},
        campaign :[], // this makes an array
        strategy :{},
 }; 
```

或者，如果您只想在 中具有一个值`campaign`，请不要使用`push`，而只是简单地使用

```
myeleArr.campaign = '<spa... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:52:40.167

将广告系列设为`array`而不是`object`。因为 push 是数组而不是对象的方法

```
campaign :[], 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:42:12.283

该`push`方法适用于 javascript 数组。因此，如果您更改活动等键以指向数组文字，而不是对象文字，您将能够推送。IE -

```
var myFoo = { advertiser: [], campaign: [], strategy: [] };
myFoo.campaign.push('my stuff'); 
```

此外，如果您只想为广告系列分配一个字符串，您可以简单地 -

```
var myeleArr = {};
myeleArr.campaign = "<span>..."; 
```

[在 Google Chrome 下的开发人员工具](https://developers.google.com/chrome-developer-tools/docs/overview)中检查 javascript 控制台，或安装 nodejs，当您不确定时，两者都是尝试这些东西的好地方。

# network-programming - tcpdump/wireshark 断开连接

> ID：12804579
> 
> 赞同：0
> 
> 时间：2012-10-09T16:39:26.837
> 
> 标签：network-programming, debian, wireshark, tcpdump

当我使用 tcpdump 甚至是wireshark 在 wlan0 上收听时，我总是在 30 秒到 5 分钟内断开连接。你知道如何解决这个问题吗？我在一个 64 位的 debian 上，我尝试了 wpa_spupplicant 和网络管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:03:58.247

终于在 5 个月后，我找到了解决此问题的方法。我只需要更新我的网卡驱动程序（在我的情况下，iwlwifi）

# jquery - 将字符串（计算）转换为数字

> ID：12804580
> 
> 赞同：0
> 
> 时间：2012-10-09T16:39:37.127
> 
> 标签：jquery, string, parsefloat

我需要将`okString[1]`值转换为数字，前有计算。6.2*2。 [我试过](http://api.jquery.com/Types/?rdfrom=http://docs.jquery.com/mw/index.php?title=Types&redirect=no#Built-in_Methods)JQUERY API Doc`

“或者您使用 javascript 提供的 String 类，它尝试将值解析为字符串：

字符串（1）+字符串（2）；// "12" 字符串(1 + 2); // "3" "

我的代码在这里：[jsfiddle`](http://jsfiddle.net/lostika86/fUgwr/)

```
 <div id="userForm">

<input id="string_input" value="1=2,6;2=4,5;3=5;5=6.1;7=6,2*2">

<!-- end -->
</div>​

$('#string_input').click(function() {
    fnWorkMainString();

});

function fnWorkMainString() {
    fnWorkSubString();

}

function fnWorkSubString() {
    var getString = $('#string_input').val();

   var divString = getString.split(';');
    console.log('divString ' + divString.length);
    var stringAfterDiv = [];
    var okString = "";
    for (i = 0; i < divString.length; i++) {
        console.log(divString[i]);
        stringAfterDiv[i] = divString[i].split('=');
        console.log(stringAfterDiv[i]);

        okString= stringAfterDiv[i][1].replace(',','.');    
          console.log(String(okString));
    }
    console.log(String( 1 + 2 ));

    return stringAfterDiv;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:40:49.850

尝试

```
parseFloat("3",10)

OR

parseInt("3",10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:26:17.193

你可以试试 eval 函数。结果证明这是有效的（返回 22.2）。我只是在计算字符串前面加上一个赋值（在用点替换逗号之后）

```
var str = "2*7.1 + 4/0,5";
str = str.replace(',','.');
eval("var answer = "+str);
alert(answer); 
```

或者在一个漂亮的函数中，完全跳过分配

```
function computeString(str) {
   return eval(str.replace(',','.'));
} 
```

# java - Java拦截命令提示符回复

> ID：12804582
> 
> 赞同：2
> 
> 时间：2012-10-09T16:39:45.177
> 
> 标签：java, command, cmd, prompt, reply

我正在通过 java 执行一些仅在命令提示符下输入的 cmd 命令。我想知道是否有一种方法可以通过 Java 以编程方式获取和回复命令提示符问题？

例如：我在本地将一个远程 GIT 存储库添加到我的 GIT 结构中，所以当我执行时：

```
$ git remote add [url], 
```

系统提示我输入密码。我可以捕获此消息（例如将消息传递给用户）并在同一命令提示符编程对象/cmd 窗口中回复。

（AND 明确在其中，因为执行上述命令、阅读提示回复、关闭命令提示、在新的因此不相关的新提示窗口中通过新的 cmd 命令发送密码是无用的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:14:33.940

如果您正在使用 Runtime.getRuntime().exec 执行命令，则捕获/监视子进程的输入流并写入输出流以向其发送消息。

例如

```
 Process process = Runtime.getRuntime().exec("Command ");        
    OutputStream pout = process.getOutputStream();
    PrintWriter pw = new PrintWriter(pout);
    pw.println("Command response here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:07:55.783

您可以通过使用 a[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)将该命令作为[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html). 在这种情况下，该进程通常不会直接与命令窗口对话，因此如果需要，您必须将其输出打印给用户。

请注意，某些进程特别注意*不要*从标准输入读取密码，而是从控制台窗口读取密码。在这种情况下，上述方法可能不起作用。通常命令确实提供了一些方法来指定密码的不同来源。的情况下`git`，请搜索`GIT_ASKPASS`环境变量以及`core.askpass`配置设置。

# scala - 无国籍阿卡演员

> ID：12804584
> 
> 赞同：3
> 
> 时间：2012-10-09T16:39:45.893
> 
> 标签：scala, akka

我刚刚从 Akka 开始，我试图将一些杂乱的功能拆分成更易于管理的部分，每个部分都将由不同的参与者执行。

我的任务似乎完全适合演员模型。我有一个对象树，它们保存在数据库中。每个节点都有一些属性；让我们只专注于一个，称之为财富。孩子的财富取决于父母的财富。当一个人在一个节点上计算财富时，这应该会触发对孩子的类似计算。我想收集所有更新的节点实例并将它们同时保存在数据库中。

这看起来很简单：一个actor只执行计算，然后为当前节点的每个子节点启动另一个actor。当所有子节点都发回一条带有计算结果的消息时，actor 收集它们，添加当前节点并向其上方的 actor 发送一条消息。

问题是我不知道一种方法来确保一个人已经收到了所有孩子的消息。一个简单的方法是使用计数器并在孩子收到消息时增加它。

但是，如果系统的两个独立部分需要执行这样的计算并且重用同一个参与者，会发生什么？演员将产生两倍的孩子，计数将不再可靠。我需要的是确保不会从外部系统重用同一个actor，但是每次触发计算时都会生成新的actor。

> 这甚至可能吗？如果没有，Akka 中是否有一些自动机制来确保每个孩子都完成了任务？

我只是在不适合这里的情况下使用演员模型吗？本质上，我所做的只是函数可以做的——参与者本身是无状态的，但它们允许我简化和并行化计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:50:52.533

您描述事物的方式，我认为您真正想要的是一个返回 Future[Tree[NodeWealth]] 的递归函数，该函数每次被调用时都会产生一个 Future，并且它会为层次结构中的每个子级调用自身，在函数结束时，它将来自这些调用的 Futures 组合成单个 Future[Result]。当递归函数终止并返回 Future[Tree[NodeWealth]] 时，您可以将其与另一个更新您的数据库的 Future 组合。[在 Futures 上](http://doc.akka.io/docs/akka/2.0.3/scala/futures.html#Composing_Futures)查看 Akka 文档。并特别注意“组成期货”部分。

期货的组成应该允许您避免状态并轻松实施。

另一种选择是使用actors和futures，并对子actors使用ask模式，将生成的futures组合成一个future，然后返回给发送者（父actor）。这本质上是一回事，只是与演员交织在一起。如果您出于其他原因已经将您的节点表示为参与者，我可能只会走这条路。

# android - Android 和 HTTPS Web 服务 (XmlPullParserException)

> ID：12804591
> 
> 赞同：1
> 
> 时间：2012-10-09T16:39:59.347
> 
> 标签：android, web-services

我已经在这里查看了关于使用 KSOAP2 的 Android 中的 XmlPullParserException 的几个不同的问题/答案，但到目前为止，没有什么能帮助我找出问题所在。我开始将我的 iOS 应用程序移植到 Android，现在我被困在让应用程序与 .Net Web 服务通信的这一部分。下面是有问题的代码，其中大部分是从各种不同的问题/博客/站点拼凑而成的，因为我在 Web 服务上也有一个自签名证书。如果有人有任何提示或可以向我指出一些阅读的方向，这将帮助我弄清楚这将是很好的，因为应用程序的其他几个区域使用 Web 服务，我知道我需要知道如何比我现在得到的更好地调试它。

```
String URL = "https://online.ensinet.com/Services/ENSIMobileservice.asmx";
            String SOAP_ACTION = "http://ensinet.com/VerifyRep";
            String NAMESPACE = "http://ensinet.com/";
            String METHOD_NAME = "VerifyRep";
            String SERVER = "online.ensinet.com";

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            //PropertyInfo usernamePI = new PropertyInfo();
            //usernamePI.setName("RepLogin");
            //usernamePI.setValue(username);
            //usernamePI.setType(String.class);
            request.addProperty("RepLogin", username);

            //PropertyInfo passPI = new PropertyInfo();
            //passPI.setName("RepPass");
            //passPI.setValue(passphrase);
            //passPI.setType(String.class);
            request.addProperty("RepPass",passphrase);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            try
            {
                allowAllSSL();
                HttpsTransportSE androidHttpTransport = new HttpsTransportSE(SERVER,443, URL, 1000);
                androidHttpTransport.call(SOAP_ACTION,envelope);  
                SoapObject response=(SoapObject) envelope.getResponse();

            Log.i("Message", "the response contains: " + response.toString());
            }
            catch(Exception e)
            {
                Log.i("Message", "there was an error: " + e);
            } 
```

好的，这里有更多信息。首先，allowAllSSL() 是我在另一个论坛中发现的一种绕过自签名证书的凭据管理器的方法，因为我没有凭据，并且移动设备收集的信息不像 Web 应用程序那样敏感托管所有 Web 服务的地方。以下是设置假凭证管理器的详细方法

```
 private static TrustManager[] trustManagers;

public static class _FakeX509TrustManager implements
        javax.net.ssl.X509TrustManager {
    private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[] {};

    public void checkClientTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    public void checkServerTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    public boolean isClientTrusted(X509Certificate[] chain) {
        return (true);
    }

    public boolean isServerTrusted(X509Certificate[] chain) {
        return (true);
    }

    public X509Certificate[] getAcceptedIssuers() {
        return (_AcceptedIssuers);
    }
}

public static void allowAllSSL() {

    javax.net.ssl.HttpsURLConnection
            .setDefaultHostnameVerifier(new HostnameVerifier() {
                public boolean verify(String hostname, SSLSession session) {
                    return true;
                }
            });

    javax.net.ssl.SSLContext context = null;

    if (trustManagers == null) {
        trustManagers = new javax.net.ssl.TrustManager[] { new _FakeX509TrustManager() };
    }

    try {
        context = javax.net.ssl.SSLContext.getInstance("SSL");
        context.init(null, trustManagers, new SecureRandom());
    } catch (NoSuchAlgorithmException e) {
        Log.e("allowAllSSL", e.toString());
    } catch (KeyManagementException e) {
        Log.e("allowAllSSL", e.toString());
    }
    javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context
            .getSocketFactory());
}
} 
```

另外，我查看了 requestDump 并注意到请求中有一个`<Header />`标签不是实际 Web 服务请求的一部分，所以我认为这是由 KSOAP2 添加的，到目前为止我还没有看到方法删除它，这可能是我得到的 START TAG 错误的一部分。我想我将手动构建 SOAP 请求，我将在今晚晚些时候尝试看看是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:37:36.853

好的，所以我能够找出问题所在。看起来 android 端比 iOS 端更具体一些，因为问题是我使用的 URL。在上面的代码中，我使用的是可用于移动应用程序的操作的完整列表的 URL，就像在 iOS 代码中一样，但我需要使用我正在调用的操作的实际 URL（所以我需要添加 ?op =VerifyRep 到上述 URL 字符串的末尾）。现在我得到了正确的响应，所以它进入下一步并试图弄清楚如何解析出所需的数据。

# java - 使用 Java 写入文本文件会被缩短

> ID：12804595
> 
> 赞同：3
> 
> 时间：2012-10-09T16:40:11.647
> 
> 标签：java, file, text, save

我有一个程序从一个文本文件（目前有 653 行长）中读取，所有文件都用逗号分隔。但是当我将文件保存到新位置时，它只保存了 490 行。新创建的文本文件中的最后一行似乎也被切成了两半。关于可能是什么问题的任何想法？

这是我用来打开和排序列表中的数据的代码：

```
try {
    scanner = new Scanner(file);

    // Put the database into an array and 
    // Make sure each String array is 13 in length
    while (scanner.hasNext()) {
        line = scanner.nextLine();
        word = line.split(",");

        if (word.length < 13) {
            String[] word2 = {"","","","","","","","","","","","",""};
            for (int i = 0; i < word.length; i++) {
                word2[i] = word[i];
            }
            dataBaseArray.add(word2);
        }
        else {
            dataBaseArray.add(word);
        }
    }
}
catch (FileNotFoundException exc) {
    JOptionPane.showMessageDialog(this, "File cannot be found.", "error finding file", JOptionPane.ERROR_MESSAGE);
}

// Splitting the database into vacant numbers/dead lines/vacant cubicles
for (int i = 0; i < dataBaseArray.size(); i++) {
    if (dataBaseArray.get(i)[8].equals("VACANT")) {
        vacantNums.add(dataBaseArray.get(i));
    }
    else if (dataBaseArray.get(i)[4].equals("DEAD")) {
        deadLines.add(dataBaseArray.get(i));
    }
    else if (dataBaseArray.get(i)[6].equals("") && dataBaseArray.get(i)[7].equals("")) {
        vacantCubs.add(dataBaseArray.get(i));
    }
    else if (dataBaseArray.get(i)[7].equals("")) {
        people.add(dataBaseArray.get(i));
    }
    else {
        people.add(dataBaseArray.get(i));
    }
}

// Resetting the DB Array to put the values back in it
dataBaseArray = new ArrayList<>();

// Ordering the arrays I want them to appear in the list
// Orering the people to appear in alphabetical order
Collections.sort(people, new Comparator<String[]>() {

    @Override
    public int compare(String[] strings, String[] otherStrings) {
        return strings[7].compareTo(otherStrings[7]);
    }
});

// Put the people in the DB Array
for (int i = 0; i < people.size(); i++) {
    dataBaseArray.add(people.get(i));
}

// Put the vacant numbers in the AB Array
for (int i = 0; i < vacantNums.size(); i++) {
    dataBaseArray.add(vacantNums.get(i));
}

// Put the vacant cubicles in the AB Array
for (int i = 0; i < vacantCubs.size(); i++) {
    dataBaseArray.add(vacantCubs.get(i));
}

// Put the dead lines in the AB Array
for (int i = 0; i < deadLines.size(); i++) {
    dataBaseArray.add(deadLines.get(i));
}

list = new String[dataBaseArray.size()];

// Add the DB Array to the list
for (int i = 0; i < list.length; i++) {
    if (dataBaseArray.get(i)[8].equals("VACANT")) {
        list[i] = "VACANT";
    }
    else if (dataBaseArray.get(i)[4].equals("DEAD")) {
        list[i] = "DEAD";
    }
    else if (dataBaseArray.get(i)[6].equals("") && dataBaseArray.get(i)[7].equals("")) {
        list[i] = "Vacant Cubicle";
    }
    else if (dataBaseArray.get(i)[7].equals("")) {
        list[i] = dataBaseArray.get(i)[6];
    }
    else {
        list[i] = dataBaseArray.get(i)[7] + ", " + dataBaseArray.get(i)[6];
    }
}

// Populate the list
lstAdvance.setListData(list); 
```

这是我用来保存文件的内容：

```
try {
    saveFile = new FileWriter("Save Location");
    String newLine = System.getProperty("line.separator");

    for (int i = 0; i < dataBaseArray.size(); i++) {
        for (int j = 0; j < dataBaseArray.get(i).length; j++) {
            saveFile.append(dataBaseArray.get(i)[j] + ",");
        }
        saveFile.append(newLine);
    }
}
catch (IOException exc) {
    JOptionPane.showMessageDialog(this,"error", "error", JOptionPane.ERROR_MESSAGE);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:44:19.327

写入文件被缓冲。您必须在写作结束时`close()`或您的作家（saveFile）。`flush()`

更好的是：你应该在街区`close()`里对你的作家做。`finally`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:48:24.450

尝试使用`FileWriter`and `BufferedWriter`....

```
File f = new File("Your_Path");

FileWriter fw = new FileWriter(f);

BufferedWriter bw = new BufferedWriter(fw); 
```

是的..它非常重要`bw.close()` **（关闭缓冲区）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:49:56.557

看到这个问题： [Java FileWriter with append mode](https://stackoverflow.com/questions/1225146/java-filewriter)

问题是您的 FileWriter 对象需要是 "append mode" 。然后，您使用“write”方法而不是“append”方法追加到文件。使用 finally catch 子句调用 "close" 。你不需要冲洗（我不认为）。

# java - 令牌“;”上的语法错误，此令牌后应为“{”

> ID：12804598
> 
> 赞同：3
> 
> 时间：2012-10-09T16:40:32.510
> 
> 标签：java, syntax-error

只是一个简单的类调用一个打印数组的类。我在 Eclipse 中遇到语法错误。我还收到一个错误，我没有名为 Kremalation 的方法。

```
public class AytiMain {

    public static void main(String[] args) {
        AytiMain.Kremalation();
    }
}

public class Kremalation {

    String[] ena = { "PEINAW", "PEINOUSA", "PETHAINW" };
    int i; // <= syntax error on token ";", { expected after this token

    for (i = 0; i <= ena.lenght; i++)
        System.out.println(ena[i]);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:42:29.553

你有一个方法之外的代码（它没有声明一个变量和/或初始化它），它是：

```
for (i=0; i<=ena.lenght; i++)
    System.out.println(ena[i]); 
```

在 Java 中，代码**必须**驻留在方法中。你不能*调用*一个类，你必须调用一个**在**类中声明的方法。

**错误**：

```
class ClassName {
   for (...) 
} 
```

**正确**：

```
class ClassName {
  static void method() {
    for (...)
  }

  public static void main(String[] args) {
    ClassName.method();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:42:03.233

您不能将方法定义为类。它应该是

```
public static void kremalation()
{
String ena[]={"PEINAW","PEINOUSA","PETHAINW"};
int i;
for (i=0; i<=ena.lenght; i++)
    System.out.println(ena[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:43:08.540

```
public class AytiMain {

    public static void main(String[] args) {
        AytiMain.Kremalation();
    }

    public static void Kremalation() {// change here.

        String ena[]={"PEINAW","PEINOUSA","PETHAINW"};
        int i;

        for (i=0; i<=ena.lenght; i++)
            System.out.println(ena[i]);

    }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:04:08.970

**解决这个问题的**两种方法......****

 ****第一个在同一个文件中有 2 个类：**

```
public class AytiMain {

    public static void main(String[] args) {

        new Kremalation().doIt();
    }

}

class Kremalation {

  public void doIt(){        // In Java Codes should be in blocks
                             // Like methods or instance initializer blocks

    String ena[]={"PEINAW","PEINOUSA","PETHAINW"};
    int i;

    for (i=0; i<=ena.lenght; i++)
        System.out.println(ena[i]);

   }

} 
```

**第二次将类更改为方法：**

```
public class AytiMain {

    public static void main(String[] args) {
        AytiMain.Kremalation();
    }

    public static void Kremalation() {     // change here.

        String ena[]={"PEINAW","PEINOUSA","PETHAINW"};
        int i;

        for (i=0; i<=ena.lenght; i++)
            System.out.println(ena[i]);

    }    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T16:42:59.300

两个可能的答案。

1）如果您想将其定义为类，请从第二个中删除 public。

2) 将Kremalation 移到右括号内，用void 替换类，使其成为静态方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T16:43:24.683

您不能直接在类中包含可执行代码。添加一个方法并使用该类的实例来调用该方法。

```
public class Kremalation {

    public void method() {

        String ena[]={"PEINAW","PEINOUSA","PETHAINW"};
        int i;

        for (i=0; i<=ena.lenght; i++)
            System.out.println(ena[i]);
    }

} 
```

现在，在你的主要方法中，写： -

```
public static void main(String[] args) {
    new Kremalation().method();    
} 
```**

# jquery - 如何在 jQuery 切换上设置 cookie 并记住切换位置？

> ID：12804609
> 
> 赞同：0
> 
> 时间：2012-10-09T16:40:52.390
> 
> 标签：jquery, cookies, toggle, slidetoggle

我有一个简单的切换菜单示例，我想使用 JavaScript cookie 使其持久化。

我不确定使用此切换事件时的逻辑应该是什么。

```
$('.show_menu').on('click', function() {
  $('.top_menu_hidden').stop().slideToggle('normal', function(){
    // some code here
  });
});​ 
```

[jsfiddle](http://jsfiddle.net/patrioticcow/zR4AV/)上的一个活生生的例子

我正在使用[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:53:28.797

您是否正在寻找这样的东西：

[http://jsfiddle.net/zR4AV/4/](http://jsfiddle.net/zR4AV/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:54:17.810

使用 javascript 设置 cookie 是一件非常丑陋的事情，但这是 w3schools 的一个很好的例子：

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# jquery - jquery 无法访问标签

> ID：12804612
> 
> 赞同：0
> 
> 时间：2012-10-09T16:41:05.837
> 
> 标签：jquery

鉴于我的 aspx 代码中的以下 html 输出，我似乎无法捕获 a 标签点击。

我已经尝试了所有可能的变化。最新的如下所示，有什么建议吗？

```
<fieldset class="injectsysdisplay">
    <legend>Chemical Injection Systems Information</legend>
        <div class="literaltext">
            <p> We utilize two types of systems for mixing EnerBurn&reg; with your fuel supply to deliver it to your diesel engine,<br /> On-Board systems and Bulk Fueling systems. Click on an item below for more information.</p>
            <ul class="ulGreen">
                <li><b>On-Board systems</b><span style="color:black;"> (See an installation picture<a href="#" data-rel="onBoardVehiclepicdisplay">here</a>)</span> </li>
                <li><b>Bulk Fueling systems</b><span style="color:black;"> (See an installation picture<a href="#" data-rel="onBoardVesselpicdisplay">here</a>)</span> </li>
                <li><b>Terminal Fueling systems</b><span style="color:black;"> (See an installation picture<a href="#" data-rel="onBoardFuelBargepicdisplay">here</a>)</span> </li>
            </ul>
        </div>
    </fieldset> 
```

查询：

```
 $(document).ready(function() {
        //$('.ulGreen').delegate('li span a', 'click', function(e){
        $('.literaltext ul li span a').click(function (){
            alert("Show me you work!");

        });​
    });​ 
```

# windows - 重新部署 Web 应用程序后重新启动 tomcat

> ID：12804614
> 
> 赞同：1
> 
> 时间：2012-10-09T16:41:07.090
> 
> 标签：windows, sql-server-2005, tomcat, waffle, sqljdbc

嗨，我正在使用 tomcat 并使用 Waffle 进行 Windows 身份验证。我也使用微软的驱动程序使用 Windows 凭据连接到 SQL 服务器。我有一个问题，每次我重新加载或重新部署应用程序时，我都必须重新启动 tomcat。经过一番谷歌搜索后，我发现 dll 已经加载，因此无法重新加载。

我真的需要重新部署应用程序，因为我需要更新一些功能，而且每次我更新应用程序时要求管理员重新启动 tomcat 是非常令人沮丧的。

当我对 glassfish 做同样的事情时，我设法以某种方式解决了这个问题，但无法使用 tomcat 进行管理

# ruby-on-rails - 在 Heroku 控制台中显示应用程序名称

> ID：12804615
> 
> 赞同：4
> 
> 时间：2012-10-09T16:41:07.687
> 
> 标签：ruby-on-rails, heroku, irb

如果我在 heroku 上运行控制台，它看起来像这样：

```
heroku run console --app myapp-production
irb(main):001:0> 
```

这似乎比这样的事情危险得多：

```
heroku run console --app myapp-production
myapp-production:001:0> 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:23:44.107

@彼得，

您需要像这样创建一个插件：[https ://github.com/hone/heroku_colorize_console](https://github.com/hone/heroku_colorize_console)

在运行这个之后`heroku plugins:install <your_git_repo>`。

基于上面的例子，这看起来很容易实现。

# android - android - 在 vi ewPager 中使用 PinnedHeaderListView

> ID：12804616
> 
> 赞同：2
> 
> 时间：2012-10-09T16:41:12.780
> 
> 标签：android, tabs, android-listview, android-viewpager, actionbarsherlock

背景：使用`actionBarSherlock`，我有一个viewpager，它的`PinnedHeaderListView`一个页面中有一个。

viewPager 有 3 个选项卡，如选项卡寻呼机片段示例中所示。

问题：由于某种原因，`PinnedHeaderListView`除非我切换到最后一个选项卡并再次返回到第一个选项卡（有 ），否则不会显示上部标题（无论我向下/向上滚动多少`PinnedHeaderListView`）。

这是一个屏幕截图来说明问题：

[http://tinypic.com/r/2w49rnq/6](http://tinypic.com/r/2w49rnq/6)

它应该始终在列表顶部有一个标题，例如：

[http://tinypic.com/r/m756s7/6](http://tinypic.com/r/m756s7/6)

我的问题是：为什么会发生，我该如何解决？

# java - Java swing JComboBox无法参数化

> ID：12804617
> 
> 赞同：0
> 
> 时间：2012-10-09T16:41:17.227
> 
> 标签：java, swing, generics, jcombobox, java-7

Eclipse IDE 在 Jcombobox 上显示错误，表示 JcomboBox 无法参数化，例如：类似于下面显示的行

```
private final JComboBox<LaborHelper> labourname = new JComboBox<LaborHelper>(); 
```

这里我的项目执行环境是javaSE1.6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:45:09.227

`JComboBox`Java 1.7 之前不支持类型规范（参数化）。因此，在 Java 1.6 或更早版本中会出现编译错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-02T07:41:07.317

好的，所以您已经知道为什么会收到此错误。您如何摆脱它？

**注意：这是一个 Netbeans 解决方案**

右键单击`JComboBox`，转到：

`Properties > Code >`

在代码选项卡下，您会找到`Type Paramters`.

单击其右侧的选项菜单：

[![在此处输入图像描述](../Images/6e0887a4c8ca7702a02a1f1d1de81e42.png)](https://i.stack.imgur.com/WJzI0.png)

当下一个视图打开时，只需删除文本：

[![在此处输入图像描述](../Images/635effe99aedaa1d111b736650270e15.png)](https://i.stack.imgur.com/NvBhC.png)

单击确定，就是这样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T16:49:44.583

查看[JComboxBox 的 java 1.6 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)，该类`JComboxBox`不是 Java 1.6 的泛型类。

它接受一个数组或一个**对象**向量作为用户的选择，并通过调用对象的 toString 方法来显示它们（因此，如果要自定义标签，则必须覆盖它）。

要访问用户选择的值，您必须按如下方式转换所选项目： `(LaborHelper)labourname.field.getSelectedItem()`

但是，[这应该适用于 java 1.7+](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)，因为它`JComboxBox`已成为泛型类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-09T16:55:10.737

**-** `JComboxBox`随着**Java 7 的到来支持 with**`Type Parameters`，在此之前它**不**支持类型参数。

 ******请参阅此链接：**

[JComboBox 警告阻止在 Eclipse 中打开设计页面](https://stackoverflow.com/questions/8845139/jcombobox-warning-preventing-opening-the-design-page-in-eclipse)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-09T16:45:54.360

您只能参数化泛型类型。[`JComboBox`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)没有通用版本。

**更新**

Java 7 中提供了通用版本[`JComboBox<E>`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)。您可能需要升级您的 Java 版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-20T16:02:57.823

即使在 Java 7 中，也存在一个未解决的错误：[JDK-7067201 : Generics: BasicComboBoxRenderer](http://bugs.sun.com/view_bug.do?bug_id=7067201)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-09T09:00:24.353

然后在 Eclipse (Kepler) 中似乎有一个错误：我选择了 JRE 1.6、JDK 1.6、编译器合规级别 1.6，但是在使用带有类型参数的 JComboBox 时 Eclipse 没有显示任何错误。很奇怪。****

# asp.net - 检查 Active Directory 密码是否与 cookie 不同

> ID：12804625
> 
> 赞同：0
> 
> 时间：2012-10-09T16:42:18.450
> 
> 标签：asp.net, asp.net-mvc, cookies, active-directory, forms-authentication

我有一个 asp.net 应用程序，它需要使用表单身份验证将用户登录到 Active Directory（Windows 身份验证不是给定要求的选项）。

我正在像这样保存身份验证cookie：

```
if (Membership.ValidateUser(model.UserName, model.Password))
{
    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
} 
```

这很好用，除了 cookie 对用户进行身份验证，即使他们更改了他们的 Active Directory 密码。

有没有办法判断用户的密码是否已更改？

我正在使用带有 .NET 4 的 asp.net MVC3

**我试过的**

如果觉得这段代码应该可以工作，但是 HttpWebResponse 从不包含任何 cookie。不太确定我做错了什么。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Request.Url);
request.CookieContainer = new CookieContainer();

HttpWebResponse response = (HttpWebResponse)request.GetResponse();

Cookie authCookie = response.Cookies["AuthCookie"];
if (authCookie.TimeStamp.CompareTo(Membership.GetUser().LastPasswordChangedDate) < 0)
{
    authCookie.Expired = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:51:18.490

您的代码应阅读

```
if (Membership.ValidateUser(model.UserName, model.Password))
{
  string userData = DateTime.Now.ToString();

  FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
    username,
    DateTime.Now,
    DateTime.Now.AddMinutes(30),
    isPersistent,
    userData,
    FormsAuthentication.FormsCookiePath);

  // Encrypt the ticket.
  string encTicket = FormsAuthentication.Encrypt(ticket);

  // Create the cookie.
  Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket));
} 
```

现在，在对用户进行身份验证时

```
HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.value);
if (DateTime.Parse(ticket.UserData) > Membership.GetUser().LastPasswordChangedDate)
{
    FormsAuthentication.SignOut();
    FormsAuthentication.RedirectToLoginPage();
} 
```

# hibernate - 在 grails 的休眠标准构建器中加入语句

> ID：12804627
> 
> 赞同：0
> 
> 时间：2012-10-09T16:42:27.323
> 
> 标签：hibernate, grails, join

我想在 Grails 中创建以下语句`HibernateCriteriaBuilder`：

```
SELECT * FROM person p 
  JOIN person_authority pa ON p.id=pa.person_id 
  JOIN authority a ON pa.authority_id=a.id 
  WHERE a.authority IN ('ROLE_ADMIN'); 
```

`person_authority`是连接表。

更新：

我的`Person`课是：

```
class Person {

transient springSecurityService

Date dateCreated
Date lastLogin

String username
String password
String email;
boolean enabled
boolean accountExpired
boolean accountLocked
boolean passwordExpired

static constraints = {
    username blank: false, unique: true
    email blank:false, unique: true, email: true
    password blank: false
    lastLogin nullable:true
}

static mapping = {
    hasMany authority:Authority;
    password column: '`password`'
}

//Set<Authority> getAuthorities() {
//  PersonAuthority.findAllByPerson(this).collect { it.authority } as Set
//}

def beforeInsert() {
    encodePassword()
}

def beforeUpdate() {
    if (isDirty('password')) {
        encodePassword()
    }
}

protected void encodePassword() {
    password = springSecurityService.encodePassword(password)
}

public static def query(Map params = [:]){

    def rows = withCriteria(max:params.max,offset:params.offset){
        if(params.authorities){
            authorities{
                'in'('authority', params.authorities)
            }
        }
        order(params.column?:"id",params.order?:"asc")
        if(params.id){
            idEq (params.id as Long);
        }
        if(params.username){
            ilike "username","%"+params.username+"%"
        }
        if(params.email){
            ilike "email","%"+params.email+"%"
        }
        if(params.accountLocked){
            eq "accountLocked",Boolean.valueOf(params.accountLocked)
        }
        if(params.enabled){
            eq "enabled",Boolean.valueOf(params.enabled)
        }
        if(params.passwordExpired){
            eq "passwordExpired",Boolean.valueOf(params.passwordExpired)
        }
    }
    return rows;
}
} 
```

我要建立的标准是在方法查询中。当我尝试执行它时，我得到`groovy.lang.MissingMethodException: No signature of method: grails.orm.HibernateCriteriaBuilder.authorities() is applicable for argument types ...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:04:17.197

这取决于您如何准确定义关联，但看起来像：

```
Person.withCriteria {
    authorities {
        'in'('authority', 'ROLE_ADMIN')
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-13T17:47:25.530

也许，我误读了，但看起来你`authority`没有命名你的协会`authorities`

尝试：

```
def rows = withCriteria(max:params.max,offset:params.offset){
    if(params.authorities){
        authority{
            'in'('authority', params.authorities)
        }
    } 
```

您没有列出您的`Authority`域类，param.authorities 是权威对象列表还是权威的“名称”？如果是Authority对象，不用join试试（这个我没试过，但我认为是正确的）：

```
if(params.authorities) {
  'in'('authority', parmas.authorities)
} 
```

如果它是一个名称列表（并且权威有一个`name`字段）：

```
if(params.authorities){
    authority{
        'in'('name', params.authorities)
    }
} 
```

# node.js - 在 Node.js 中管理时间的最佳方法是什么？

> ID：12804629
> 
> 赞同：2
> 
> 时间：2012-10-09T16:42:30.090
> 
> 标签：node.js, timer

管理时间和实时事件的最佳方式是什么？

我正在使用 Node.js 实现一个小型多人 RPG 游戏。我有很多 NPC，每 3 或 4 秒移动一次，所以我需要更新它们。

解决方案 A：`setTimeout`每个 NPC 使用一个。如果我有数百个 NPC，我将创建为计时器。它更简单，但效率不低吗？

解决方案 B：`setTimeout`对所有 NPC 使用一个。每次，我们通过计算 NPC 移动之前的最小剩余时间来调用下一次超时。所以我们必须使用更复杂的代码，但我们只有一个`setTimeout`.

它有更好/其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:06:59.327

正如相关问题所说，`setTimeout`很便宜。但是，它不是免费的。

您可以以与 memcached 工作类似的方式使用单个`setTimeout`。它有一个大数组。每秒钟，它都会检查这个数组的第一项（或最后一项），看看是否有什么需要做的。如果有，它会这样做。然后，它会删除该项目。冲洗并重复。

这是实现背后的基本思想。通过考虑空桶或类似的东西，您可能会获得更好的性能，但是一个简单的实现应该已经非常高效了。

# xml - 无法创建 Active X 对象

> ID：12804636
> 
> 赞同：0
> 
> 时间：2012-10-09T16:42:41.083
> 
> 标签：xml, vb.net, bulk-load

我遇到了一个错误，我无法弄清楚代码有什么问题。当我尝试创建一个对象时会发生这种情况（objbl = CreateObject("SQLXMLBulkLoad.SQLXMLBulkload.4.0")）。

我错过了什么吗？

```
Try
            objbl = CreateObject("SQLXMLBulkLoad.SQLXMLBulkload.4.0") // error happens on this line.
            objbl.ConnectionString = ReadVariables("ConnectionString")

            Console.WriteLine(objbl.connectionstring.ToString)

            objbl.ErrorLogFile = workingdirectory & "\error.log"
            objbl.TempFilePath = workingdirectory & "" 'workingdirectory
            objbl.CheckConstraints = True
            objbl.KeepIdentity = False
            objbl.Transaction = True

            'objbl()

        Catch ex As System.Exception
            Console.WriteLine("Error initializing SQL Bulk load object." & Chr(13) & Chr(10) & ex.ToString)
            WritetxtToLog("Error initializing SQL Bulk load object." & Chr(13) & Chr(10) & ex.ToString, 1)
            Exit Sub
        End Try 
```

这是异常错误：

System.Exception 被捕获 Message="无法创建 ActiveX 组件。" Source="Microsoft.VisualBasic" StackTrace: 在 Microsoft.VisualBasic.Interaction.CreateObject(String ProgId, String ServerName) 在 XMLshredapp.XMLShredApp.InitBulkLoad() 在 C:\ShredApp\XMLshredapp\XMLShredApp.vb:line 460 InnerException:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:46:39.980

这些错误“ActiveX 无法创建对象”通常意味着您提供给 CreateObject 的 ProgID 是未知的。

换言之，如果 ProgID (SQLXMLBulkLoad.SQLXMLBulkload.4.0) 输入错误或属于未在注册表中注册的 DLL，则会出现此错误。

您能否在运行此应用程序的机器上搜索注册表并查看注册表中是否存在 SQLXMLBulkLoad？如果没有，您需要找到该 DLL 并注册它（使用[regsvr32](http://support.microsoft.com/kb/249873)）

# android - Android平板导航栏不会隐藏

> ID：12804642
> 
> 赞同：2
> 
> 时间：2012-10-09T16:43:06.637
> 
> 标签：android, android-4.0-ice-cream-sandwich, tablet, navigationbar

我正在尝试使用我在互联网上找到的方法隐藏导航栏。

我有一个显示 WebView 的简单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:id="@+id/layout" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

我在应用程序启动时使用的代码是：

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN);
    getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
    getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
    web.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
    layout.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

但这不会隐藏导航栏。

我已经添加...

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

……我的活动也是如此。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-06T18:25:52.967

你可以隐藏导航栏，试试这个

```
public void FullScreencall() {
    if(Build.VERSION.SDK_INT < 19) //19 or above api
        View v = this.getWindow().getDecorView();
        v.setSystemUiVisibility(View.GONE);
    } else {
            //for lower api versions.
        View decorView = getWindow().getDecorView(); 
        int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;
        decorView.setSystemUiVisibility(uiOptions);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T17:40:12.620

您不能永久隐藏平板电脑上的系统栏。

[`SYSTEM_UI_FLAG_HIDE_NAVIGATION`](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)在 Android 4.1 及更高版本上将隐藏系统栏，但只要用户执行任何操作，它就会重新出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T15:05:35.623

您不能在给定的框架内隐藏导航栏。但是，如果您可以选择生根设备，则可以解决此问题：

1.  [根设备](http://forum.xda-developers.com/showthread.php?t=1886460)

2.  [安装并运行 Busybox](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)

3.  [安装隐藏栏](https://github.com/ppareit/HideBar)

在 HideBar 中有一个选项可以在“Kiosk”模式下运行，在这种模式下无法重新显示导航栏。不用说，你真的需要小心这个。

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T13:23:26.343

可能这有帮助：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().setUiOptions(//
    View.SYSTEM_UI_FLAG_FULLSCREEN|//
    View.SYSTEM_UI_FLAG_IMMERSIVE|//
    View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    setContentView(R.layout.main);

    findViewById(R.id.main).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            v.setSystemUiVisibility(//
                View.SYSTEM_UI_FLAG_FULLSCREEN|//
                View.SYSTEM_UI_FLAG_IMMERSIVE|//
                View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
        }
    });
} 
```

# ruby-on-rails - 在设置 Rails 之前测试运行

> ID：12804646
> 
> 赞同：2
> 
> 时间：2012-10-09T16:43:21.900
> 
> 标签：ruby-on-rails, integration-testing, capybara, factory-bot

我正在使用 Capybara 进行一些集成测试，但在运行测试时遇到了问题。似乎我的设置在测试之前没有运行，或者至少在运行的第二次测试之前没有运行。以下是我到目前为止的测试：

```
require 'test_helper'

class UserSignupTest < ActionDispatch::IntegrationTest

    setup do
        FactoryGirl.create(:user_role)
    end

    test "user organic signup" do
        visit new_user_registration_path
        assert page.has_content?('Sign up for Connectedtrips')

        fill_in('Email', :with => "hugo@gmail.com")
        fill_in('First name', :with => "Hugo")
        fill_in('Last name', :with => "KH")
        choose("is_teacher_no")
        choose("owns_center_no")
        fill_in("Password", :with => "password")
        fill_in("Password confirmation", :with => "password")
        click_button("Sign up")

        assert page.has_content?("Your registration is complete - thanks for joining!")
    end

    test "teacher organic signup" do
        visit new_user_registration_path
        assert page.has_content?('Sign up for Connectedtrips')
        fill_in('Email', :with => "another@gmail.com")
        fill_in('First name', :with => "Another")
        fill_in('Last name', :with => "")
        choose("is_teacher_yes")
        choose("owns_center_no")
        fill_in("Password", :with => "password")
        fill_in("Password confirmation", :with => "password")
        click_button("Sign up")

        assert page.has_content?("Your registration is complete - thanks for joining!")
    end
end 
```

这是我的测试助手中的代码。我尽量设置它，我不确定是否需要数据库清理器，因为我使用的是 Datamapper 而不是 Active Record，因为我不知道这是否会有所作为。

ENV["RAILS_ENV"] = "test" 需要 File.expand_path('../../config/environment', **FILE** ) 需要 'rails/test_help' 需要 'capybara/rails' 需要 'database_cleaner'

```
module ActionController
  class IntegrationTest
    include Capybara::DSL
    DataMapper.auto_migrate!

    def teardown
      DatabaseCleaner.clean 
      Capybara.reset_sessions!
      Capybara.use_default_driver
      destroy_all
    end

    def destroy_all
        # destroying all my tables here 
      end

  end
end 
```

这是我收到的错误：

```
UserSignupTest
     PASS test_teacher_organic_signup (0:00:00.929)
    ERROR test_user_organic_signup (0:00:00.998)
          ERROR:  insert or update on table "users" violates foreign key constraint "users_role_fk"
          DETAIL:  Key (role_id)=(1) is not present in table "roles". 
```

我不太确定如何解决这个问题，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:27:16.060

我解决了这个问题，并认为我只是提出了我的解决方案。我所做的是在我销毁所有表的拆解中，我忽略了 Role 表被销毁。我所做的设置：

```
Role.first(:name => "User") || FactoryGirl.create(:user_role) 
```

这可能是矫枉过正。无论如何，我猜问题解决了。

# css - 样式表应用到手机之前的延迟

> ID：12804656
> 
> 赞同：3
> 
> 时间：2012-10-09T16:44:13.410
> 
> 标签：css, mobile, jquery-mobile, loading

我有一个使用 jQuery mobile 的移动网站，并且在移动设备上加载 CSS 时遇到问题。在我的带有 Jellybean 的 Nexus S 上，HTML 加载速度非常快，但 CSS 需要 3-4 秒，在此期间网站如下所示：

![在此处输入图像描述](../Images/540c22db4080f5e757e54b361051312a.png)

移动网站本身可以在[http://axisdev.ekomobi.com找到](http://axialdev.ekomobi.com)

CSS 文件链接在顶部，但它似乎仍然最后加载。包含颜色和可见样式的称为`client-damafro.min.css`.

我做事的方式有什么明显的问题吗？如何解决我的加载问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T04:48:06.430

我知道这听起来很违反直觉，但是您可以将脚本放在 css 之后吗？

这将首先加载所有“东西”，然后是 html。它将避免在应用js之前快速闪烁......

我通过将完整页面保存到我的计算机并对其进行更改来在本地尝试它，并且似乎可以工作......

干杯

罗宾

Ps：我最后忽略了整个加载脚本。我知道...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:09:12.913

首先我会缩小你所有的 CSS

*   [对 CSS 缩小器有什么建议吗？](https://stackoverflow.com/questions/787789/any-recommendations-for-a-css-minifier)

我也会缩小你的 JavaScript

*   [有没有好的 JavaScript 缩小器？](https://stackoverflow.com/questions/3520285/is-there-a-good-javascript-minimizer)

我建议查看 Google Chrome 开发者工具

*   [https://developers.google.com/speed/tools](https://developers.google.com/speed/tools)

最后一件事是我将移动 jQuery 和 jQuery Mobile javascript 文件以在 css 文件之后立即加载。

```
<link rel="stylesheet" href="/css/responsive.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

由于 jQM 控制应用程序的外观和感觉，因此首先加载这些可能会有所帮助，因为您首先加载 HTML 然后应用 CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:52:11.017

对我来说，在将 css 放入等方面似乎你做的事情是正确的。我的建议是你得到 yslow ( [https://chrome.google.com/webstore/detail/yslow/ninejjcohidippngpapiilnmkgllmakh](https://chrome.google.com/webstore/detail/yslow/ninejjcohidippngpapiilnmkgllmakh) ) 并尝试优化根据其建议。或者，您可以将所有 css 合并到一个文件中以进行生产，并使用此工具对其进行压缩[http://www.cleancss.com/](http://www.cleancss.com/)

另外请参阅这篇文章以获取更多指针[强制浏览器在显示页面之前加载 CSS](https://stackoverflow.com/questions/4172281/force-browsers-load-css-before-showing-the-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:49:03.607

我会尝试将您所有的 javascript（请求）放在代码的底部，就在结束`</body>`标记之前，并确保您的脚本在 DOM 准备好（加载）时启动。

另一个想法：尝试在您自己的服务器上托管 jquery-mobile 库。

# c# - .NET 中的 Mongodb 单元测试

> ID：12804662
> 
> 赞同：18
> 
> 时间：2012-10-09T16:44:41.860
> 
> 标签：c#, .net, unit-testing, mongodb, mocking

我正在尝试做 tdd 并使用 mongodb 作为数据库。但我无法解决模拟 mongodb 的问题。是否有能力模拟 mongodb 以在 .NET 中进行单元测试？

* * *

更新

我发现非常好的解决方案阅读博客。你可以在[这里](http://thoai-nguyen.blogspot.com/2012/06/how-i-mock-mongo-collection.html)找到它：

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T16:49:07.557

与其模拟 MongoDB，不如模拟 MongoDB*之上的*一个层。

您可能需要考虑一个接口，该接口公开您的存储库上的操作，这些操作与底层数据存储无关。例如，您可能需要一个抽象出`Student`类型操作的接口，如下所示：

```
public interface IStudentOperations
{
    void Add(Student student);
} 
```

当您创建其他依赖项时，您会注入上述接口的实例，或者您选择的任何更高级别的抽象。

关键是，不要*直接*暴露 MongoDB 。

一旦你这样做了，你可以模拟你创建的所有你想要的接口，有一个用于测试模拟实现的实现，然后一个带有它自己的测试的实际实现来验证当底层实现使用时对实现的操作是正确的MongoDB。

虽然绝对[可以模拟 MongoDB 的大多数类（就像方法一样`virtual`）](https://stackoverflow.com/questions/12804662/mongodb-unit-testing-in-net/12804721#comment17315878_12804721)，但您获得了与持久性无关的好处；如果你想切换到 CouchDB 或 elasticsearch，你不必改变对这些接口的调用，你只需创建一个新的实现。

* * *

因为[您正在尝试测试*存储库的实现，*](https://stackoverflow.com/questions/12804662/mongodb-unit-testing-in-net/12804721#comment17316042_12804721)所以您通常没问题，如前所述，MongoDB 的大部分功能都是`virtual`，这对大多数模拟库都很友好。

也就是说，您必须确保将其传递`MongoDatabase` *到您的存储库中（而不是**在*存储库中创建它），以便在您的单元测试中，您可以创建适当的模拟，然后将其传递到您的存储库实现中进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-11T11:29:51.683

You need a repository/DAL layer to hide implementation details. Something like this:

```
public interface IDataContext<T>
{
   // Query
   IList<T> GetAll<T>();
   IList<T> GetByCriteria<T>(Query query);
   T GetByID<T>(string id);

   // CUD
   void Add(T item);
   void Delete(T item);
   void Save(T item);
} 
```

*   For production code, implement the interface with mongo db operations with the assistance of C# driver
*   For unit test codes, mock the interface with an in-memory collection

It looks straightforward to mock Add/Delete/Save, and the intersting part is query function. Fortunately, since mongo C# driver supports LINQ expressions, we can use LINQ as the query language rather than reinventing the wheels.

For example, the production code may look like:

```
// collection is a MongoCollection<T> object
var items = collection.AsQueryable().Where(...linq expression...); 
```

And unit test code (if you go with Shim, MS test):

```
using (ShimsContext.Create())
{                  
    ShimLinqExtensionMethods.AsQueryableOf1MongoCollectionOfM0(
        (MongoCollection<T> x) => Fake_DB_Collection.AsQueryable());
    // After this, the above "collection.AsQueryable()" will be mocked as 
    // an in-memory collection, which can be any subclass of IEnumerable<T>             
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:55:09.273

看到这个类似的问题：[在 node.js 中模拟数据库？](https://stackoverflow.com/questions/12526160/mocking-database-in-node-js/12660233#12660233)

In short, mocking MongoDB isn't the right approach. Mocking your repository is adequate for testing your own units, but you'll still need to test against MongoDB if you want to make sure that you're using it correctly, or if you are relying on uniqueness constraints etc.

# javafx-2 - 如何在控制器类的 JavaFX 应用程序中交换屏幕？

> ID：12804664
> 
> 赞同：27
> 
> 时间：2012-10-09T16:44:42.657
> 
> 标签：javafx-2, javafx

如果一个JavaFX项目中有3个文件；FXML 文件、FXML 控制器和应用程序类；控制器如何通过更改该单击上的屏幕（通常使用 完成）来响应按钮单击（效果很好`stage.setScreen()`）？我没有提到舞台（它被传递给应用程序类`start(Stage)`）。

应用样本：

```
public class JavaFXApplication4 extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

        Scene scene = new Scene(root);

        stage.setScene(scene);
        stage.show();
    }

    /**
     * The main() method is ignored in correctly deployed JavaFX application.
     * main() serves only as fallback in case the application can not be
     * launched through deployment artifacts, e.g., in IDEs with limited FX
     * support. NetBeans ignores main().
     *
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }
} 
```

FXML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" prefHeight="200.0" prefWidth="320.0"  xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication4.SampleController">
  <children>
  <Button id="button" fx:id="nextScreen" layoutX="126.0" layoutY="90.0" onAction="#handleButtonAction" text="Next Screen" />
  <Label fx:id="label" layoutX="126.0" layoutY="120.0" minHeight="16.0" minWidth="69.0" />
  </children>
</AnchorPane> 
```

控制器示例：

```
public class SampleController implements Initializable {

    @FXML
    private Label label;

    @FXML
    private void handleButtonAction(ActionEvent event) {
        System.out.println("You clicked me!");
        label.setText("Hello World!");

        // Here I want to swap the screen!
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // ...
    }    
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-09T17:20:15.263

```
@FXML
private void handleButtonAction(ActionEvent event) {
    System.out.println("You clicked me!");
    label.setText("Hello World!");
    //Here I want to swap the screen!

    Stage stageTheEventSourceNodeBelongs = (Stage) ((Node)event.getSource()).getScene().getWindow();
    // OR
    Stage stageTheLabelBelongs = (Stage) label.getScene().getWindow();
    // these two of them return the same stage
    // Swap screen
    stage.setScene(new Scene(new Pane()));
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-05-26T00:27:21.597

我在进入 Java 并试图解决同样的问题时发现了这个老问题。因为我希望场景记住切换之间的内容，所以我不能使用接受的答案，因为在场景之间切换时它会再次实例化它们（失去它们以前的状态）。

无论如何，接受的答案和[类似问题的答案给](https://stackoverflow.com/a/17227496/519035)了我一个关于如何在不丢失状态的情况下切换场景的提示。主要思想是将场景的实例注入另一个控制器，这样控制器就不需要一遍又一遍地实例化一个新的场景，而是可以使用已经存在的实例（及其状态）。

所以这里是实例化场景的主类：

```
public class Main extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        // getting loader and a pane for the first scene. 
        // loader will then give a possibility to get related controller
        FXMLLoader firstPaneLoader = new FXMLLoader(getClass().getResource("firstLayout.fxml"));
        Parent firstPane = firstPaneLoader.load();
        Scene firstScene = new Scene(firstPane, 300, 275);

        // getting loader and a pane for the second scene
        FXMLLoader secondPageLoader = new FXMLLoader(getClass().getResource("secondLayout.fxml"));
        Parent secondPane = secondPageLoader.load();
        Scene secondScene = new Scene(secondPane, 300, 275);

        // injecting second scene into the controller of the first scene
        FirstController firstPaneController = (FirstController) firstPaneLoader.getController();
        firstPaneController.setSecondScene(secondScene);

        // injecting first scene into the controller of the second scene
        SecondController secondPaneController = (SecondController) secondPageLoader.getController();
        secondPaneController.setFirstScene(firstScene);

        primaryStage.setTitle("Switching scenes");
        primaryStage.setScene(firstScene);
        primaryStage.show();
    }
} 
```

这是两个控制器：

```
public class FirstController {

    private Scene secondScene;

    public void setSecondScene(Scene scene) {
        secondScene = scene;
    }

    public void openSecondScene(ActionEvent actionEvent) {
        Stage primaryStage = (Stage)((Node)actionEvent.getSource()).getScene().getWindow();
        primaryStage.setScene(secondScene);
    }
} 
```

是的，第二个看起来一样（可能可以共享一些逻辑，但当前状态足以作为概念证明）

```
public class SecondController {

    private Scene firstScene;

    public void setFirstScene(Scene scene) {
        firstScene = scene;
    }

    public void openFirstScene(ActionEvent actionEvent) {    
        Stage primaryStage = (Stage)((Node)actionEvent.getSource()).getScene().getWindow();
        primaryStage.setScene(firstScene);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-16T09:28:42.367

你也可以这样试试。

```
public void onBtnClick(ActionEvent event) {
    try {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("login.fxml"));
        Stage stage = (Stage) btn.getScene().getWindow();
        Scene scene = new Scene(loader.load());
        stage.setScene(scene);
    }catch (IOException io){
        io.printStackTrace();
    }

} 
```

# php - 改进正则表达式模式以验证 ipv6 / punycode / 外国域名

> ID：12804666
> 
> 赞同：0
> 
> 时间：2012-10-09T16:44:49.810
> 
> 标签：php, regex, ipv6, punycode

> **可能重复：**
> [URL 的 PHP 验证/正则表达式](https://stackoverflow.com/questions/206059/php-validation-regex-for-url)
> [如何使用 Regex 和 Php 验证域名？](https://stackoverflow.com/questions/3026957/how-to-validate-a-domain-name-using-regex-php)

我目前使用此正则表达式模式在将域名添加到我的数据库之前对其进行验证：

```
$pattern = '/^https?:\/\/([a-zA-Z0-9_\-]+:[^\s@:]+@)?((([a-zA-Z][a-zA-Z0-9\-]+\.)+[a-zA-Z\-]+)|((2(5[0-5]|[0-4][0-9])|[01][0-9]{2}|[0-9]{1,2})\.(2(5[0-5]|[0-4][0-9])|[01][0-9]{2}|[0-9]{1,2})\.(2(5[0-5]|[0-4][0-9])|[01][0-9]{2}|[0-9]{1,2})\.(2(5[0-5]|[0-4][0-9])|[01][0-9]{2}|[0-9]{1,2})))(:[0-9]{1,5})?(\/[!~*\'\(\)a-zA-Z0-9;\/\\\?:\@&=\+\$,%#\._-]*)*$/'; 
```

此模式允许子域、ipv4 字符串等。由于这是针对目录的，因此它不允许通常有效的字符串，例如`http://localhost`但无论如何，我需要添加的是对 ipv6 IP 字符串和国际域名的支持，例如例如 müller.com

我目前使用：

```
$url = "http://müller.com/"
if(preg_match($pattern,$url)) {
echo "valid";
} else {
echo "invalid";
} 
```

它验证了我想要验证的几乎所有内容，除了 ipv6 地址和外来字符。

我想知道是否有人能够提出这两个补充，因为它真的会让我很开心。请注意，我对 PHP 非常陌生，所以请不要向我扔东西。相反，如果您可以向我展示一个工作示例并解释您添加的内容，那将会更加有用。

也许需要在检查之前将外国内容转换为有效的 punycode URL，然后改为允许 punycode。我愿意接受建议。

非常感谢 - 非常感谢您的帮助

编辑：我怀疑这个问题是重复的，因为我不是在寻找类似的解决方案，而且提到的现有解决方案不起作用。FILTER_VALIDATE_URL 不起作用，因为它将允许我不想允许的字符串，并且其他解决方案也使我的正则表达式模式无用。

我正在寻找的是我所拥有的，但还支持 ipv6 IP 字符串和 punycode 名称/国际名称。

# c# - 创建 MS-Word 插件设置

> ID：12804668
> 
> 赞同：1
> 
> 时间：2012-10-09T16:44:53.340
> 
> 标签：c#, ms-word, vsto, inno-setup, office-2007

如何为 MS-Word 插件创建 Inno 设置？

有一些用于进行 AddIn 注册的代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:43:59.350

VTSO 设置不同于正常设置。你可以在 mdsn 看到步骤。

加载 Click Once 文件时可能会出现一些错误。为此，请参阅相同的问题和解决方案。

在命令提示符下写：

```
cd C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin
Mage.exe -cc 
```

# python - 使用二分搜索确定

> ID：12804670
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:45:00.457
> 
> 标签：python

我已经发布了其他线程，但它没有收到答案，因此我试图提供我的一些工作以更清楚地说明。

我需要使用二分法来确定每月还款额，以便准确地在一年内还清债务。

这是一些代码：

```
originalBalance = 320000
annualInterestRate = 0.2
monthly_interest = annualInterestRate / 12
low = originalBalance/12
high = (originalBalance*(1 + monthly_interest)**12)/12
epsilon = 0.01
min_payment = (high + low)/2.0

while min_payment*12 - originalBalance >= epsilon:
    for month in range(0, 12):
        balance = (originalBalance - min_payment) * (1+monthly_interest)

    if balance < 0:
        low = min_payment
    elif balance > 0:
        high = min_payment
        min_payment = (high + low)/2.0
print "lowest payment: " + str(balance) 
```

但是，我收到的答案很离谱：298222.173851

我的朋友告诉我正确答案是：29157.09

这比我的要低很多......我想问题在于舍入（我还没有这样做）并在每次循环后保留平衡并在余额超过 0 时重置它。我不知道如何尝试这个问题请帮助某人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:43:45.730

这是关键：

```
while abs(x) > epsilon:
    x = balance
    for month in range(0, 12):
        x = (x - ans) * (1+monthly_interest) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:48:05.520

记得四舍五入到小数点后 2 位，否则 MITx 不会接受答案

# android - Android: HTC One V 运行时移除 Sim 卡

> ID：12804676
> 
> 赞同：4
> 
> 时间：2012-10-09T16:45:48.287
> 
> 标签：android

我想在运行时从 android 手机中删除 sim 卡的通知。

我的应用程序在 GingerBread 上运行，而它不在 HTC One V 上运行，而 HTC One V 运行在 ICS 及更高版本上。这是我的代码：

1) 接收类

```
package com.TestIt;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class SimEventReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent systemIntent) {
    // TODO Auto-generated method stub
    Intent intent=new Intent(context, SimService.class);
    context.startService(intent);
}

} 
```

2)服务等级

```
package com.TestIt;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class SimService extends Service {
TelephonyManager tele;
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Log.d("Kanishk", "In Service OnCreate");

    int simState = tele.getSimState();
    switch (simState)
    {
    case TelephonyManager.SIM_STATE_ABSENT:
        Log.d("kanishk", "onCreate1");
        TestItActivity.simState(this);
        break;
    case TelephonyManager.SIM_STATE_READY:
        Log.d("kanishk", "onCreate2");
        Toast.makeText(this, "Now Sim is ok", Toast.LENGTH_LONG).show();
        break;
    case TelephonyManager.SIM_STATE_UNKNOWN:
        Log.d("kanishk", "onCreate3");
        Toast.makeText(this, "not Known", Toast.LENGTH_LONG).show();
        break;
    }
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

3）活动包com.TestIt；

```
import android.R;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;

public class TestItActivity extends Activity {
/** Called when the activity is first created. */
private  static final String tag = "Activity";
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Log.d(tag, "OnCreate");
    setContentView(R.layout.main);
}
public static void simState()
{
    Log.d(tag, "Sim State");
}
} 
```

4)清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.systemEvent"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SystemEventActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name=".BroadCastReceiverS"
        android:enabled="true"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>

    <service android:name=".MyService" >
    </service>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:02:48.760

Starting with Android 3.1, all applications are set to **STOPPED STATE** when installed. The application is taken out of the **STOPPED STATE** when the user runs the application for the first time. An application is also put back in the **STOPPED STATE** when the user uses the application manager to manually stop it.

Since your application contains only a `Service` component and a `BroadcastReceiver` component, it is obviously never explicitly started by the user (there is no `Activity` for the user to start). Therefore, your application is never taken out of the **STOPPED STATE**.

Your `BroadcastReceiver` will never be run because the system does not send broadcast `Intent`s to applications in the **STOPPED STATE**.

Read more about this [here](http://developer.android.com/about/versions/android-3.1.html). Look at the section *"Launch controls on stopped applications"*. Note particularly this quote:

> Note that the system adds FLAG_EXCLUDE_STOPPED_PACKAGES to all broadcast intents. It does this to prevent broadcasts from background services from inadvertently or unnecessarily launching components of stoppped applications. A background service or application can override this behavior by adding the FLAG_INCLUDE_STOPPED_PACKAGES flag to broadcast intents that should be allowed to activate stopped applications.
> 
> Applications are in a stopped state when they are first installed but are not yet launched and when they are manually stopped by the user (in Manage Applications).

# javascript - 为什么这个 JSON 变量未定义？

> ID：12804677
> 
> 赞同：2
> 
> 时间：2012-10-09T16:45:50.673
> 
> 标签：javascript, jquery, json

我有以下代码。

**JavaScript**

```
<script>
function postUser() {
    var user = $('span input').serialize;
    alert(user.username);
}
</script> 
```

**HTML**

```
<span>
  User name : <input type="text" name="username"><br />
  Password: <input type="password" name="password" /><br />
  First name: <input type="text" name="firstName" /><br />
  Last name: <input type="text" name="lastName" /><br />

  <button onclick="postUser()">Submit</button>
</span> 
```

当我在 UI 中填充项目时，警报显示“未定义” - 但我认为通过序列化数组它应该是 JSON 对象？任何想法为什么用户名未定义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T16:47:13.357

你忘记了`()`为了调用这个函数。

```
var user = $('span input').serialize(); 
```

* * *

此外，`.serialize()`给你一个`string`结果，而不是一个对象。

也许你想要这个：

```
var username = $('span input[name=username]').val(); 
```

* * *

如果您想要一个引用所有值的对象，则需要创建它。

```
var vals = {};

$('span input').each(function() {
    vals[this.name] = this.value;
});

var name = vals.username; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:48:47.363

你不需要在这里[序列化](http://api.jquery.com/serialize/)。

您需要的是获取名称为 "username" 的输入的值：

```
alert($('input[name="username"]').val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:52:28.310

.serialize() 用于将一组表单元素编码为提交*的字符串。*它不允许您将表单值作为对象访问。[阅读更多](http://api.jquery.com/serialize/)

HTML

```
<span>
  User name : <input type="text" name="username"><br />
  Password: <input type="password" name="password" /><br />
  First name: <input type="text" name="firstName" /><br />
  Last name: <input type="text" name="lastName" /><br />

  <button id="btn" onclick="postUser()">Submit</button>
</span>​ 
```

jQuery

```
$("#btn").click(function(){
   alert($('input[name="username"]').val());
 }); 
```

[在此处尝试演示](http://jsfiddle.net/ZZ8gj/1/)

# android - 如何将特定的 Textview 项目设置为粗体并设置其颜色

> ID：12804680
> 
> 赞同：0
> 
> 时间：2012-10-09T16:46:13.313
> 
> 标签：android, textview

我是这里的新手。我在问如何制作像 23458 这样的粗体和颜色的 Textview 特殊项目？我想要 4 和 8 位的粗体和红色。

我有一个搜索项说 29861 但它只有两个字符与 32458 即 1 和 8 匹配，所以我想将 Textview 的这两项加粗为粗体和红色，其他字符应该是正常的。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:57:10.260

使用[`Html`](http://developer.android.com/reference/android/text/Html.html)类生成一个[`Spanned`](http://developer.android.com/reference/android/text/Spanned.html)，可以在[`TextView`](http://developer.android.com/reference/android/widget/TextView.html).

```
TextView tv = ...;
Spanned text = Html.fromHtml("23<font color=\"red\"><b>4</b>5<b>8</b></font>");
tv.setText(text); 
```

您可以在 中使用许多基本的 HTML 属性，[这些`.fromHtml() method`](http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String))都在[这篇博](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)文中列出，由[CommonsWare](https://stackoverflow.com/users/115145/commonsware)提供。

# gwt - gwt - 如何更改 GWT 中的入口点？

> ID：12804687
> 
> 赞同：1
> 
> 时间：2012-10-09T16:46:37.510
> 
> 标签：gwt, entry-point

基本上我已经实现了一个编辑器（比如说`Editor_A`）入口点。在 gwt 中一切正常。

`Editor_B`然后我实现了另一个具有不同小部件布局的入口点。现在，我想禁用入口点 Editor_A，并让 Editor_B 起来。

我修改了以下内容：

**在 Editor.html 中**

我`<script language="javascript" src="com.mycompany.Editor_A/com.mycompany.Editor_A.nocache.js"></script>`改为`<script language="javascript" src="com.mycompany.Editor_B/com.mycompany.Editor_B.nocache.js"></script>`

**在 Editor.gwt.xml 中**

我`<entry-point class="com.mycompany.Editor_A"/>`改为`<entry-point class="com.mycompany.Editor_B"/>`

但是，我不认为上述更改是正确的。Editor_A 不见了，但 Editor_B 没有起来，网页中什么也没有。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:56:55.980

如果您只想更改入口点，则不必更改引导脚本 (*.nocache.js) 的路径。更改 Editor.gwt.xml 中的入口点类应该足够了。

除非您在 Editor.gwt.xml 中指定了“rename-to”属性，否则引导脚本路径应该与 GWT 模块的完全限定名称匹配（即 Editor.gwt.xml 的完整路径，但没有结尾的“.gwt”。 xml”）。根据您提供的信息，我认为应该是：

```
<script language="javascript" src="com.mycompany.Editor/com.mycompany.Editor.nocache.js"></script> 
```

# php - 将 NULL 显示为无文本

> ID：12804688
> 
> 赞同：0
> 
> 时间：2012-10-09T16:46:43.243
> 
> 标签：php, javascript, jquery

我正在从服务器获取一些数据并显示在屏幕上。我的 JavaScript 如下所示，PHP 服务器代码如下。我的问题是当数据库返回 null 时（例如，标题）。PHP 将其识别为 NULL，而 JavaScript 反过来将其识别为 null。然后我将它显示在屏幕上，它不是显示为null，而是显示为“null”。我不希望显示文本“null”，但什么也不显示。

作为一种解决方法，我可以替换`data.title`为`((data.title)?data.title:'')`. 这是最好的处理方式吗？

```
$.get('server.php',{id:1855},
    function (data)
    {
        //data={"id":"1855","firstname":"Pat","lastname":"Prentice","title":null}
        $('#my_id').html('<dl><dt>Name:</dt><dd>'+data.firstname+' '+data.lastname+'</dd>'+'<dt>Title:</dt><dd>'+data.title+'</dd>');
    },'json'); 
```

server.php 返回以下内容：

```
<?php
$sql_output=array('id'=> 1855, 'firstname'=>'Pat','lastname'=>Prentice,'title'=>NULL);
echo json_encode($array);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:00:22.777

我建议在您的 PHP 代码中将该值设置为空字符串。JavaScript 中的 if 语句将检查任何错误条件。

```
<?php
$sql_output=array('id'=> 1855, 'firstname'=>'Pat','lastname'=>Prentice,'title'=>NULL);
foreach ($sql_output as &$row){ // pass by reference
    foreach($row as $key=>$value){
        if ($value==null) $row[$key] = "";
    }
}
echo json_encode($sql_output);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:52:06.033

只是为了改变形式，你也可以使用`OR`例如`dd>' + (data.title || '') + '</dd...`

如果`title`是`undefined`或`null`，则将使用空字符串。`(condition)?r1:r2`这看起来比表格更容易阅读。但正如 doublesharp 在评论中指出的那样，两者都不可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:59:33.133

将提供最佳答案作为评论：

> 您还可以从查询中设置默认值“”（或其他任何值），以便它实际上永远不会返回 null

由于数据是从数据库中提取的，只需执行以下操作：

```
SELECT COALESCE(title,'') AS title, bla, bla, bla 
```

# wsdl - 在 WSO2 治理注册表中记录操作

> ID：12804689
> 
> 赞同：0
> 
> 时间：2012-10-09T16:46:47.150
> 
> 标签：wsdl, registry, wso2, wso2carbon

我正在尝试 WSO2 注册表。它提供了记录服务信息和与服务相关的元数据的好方法

但是，我找不到记录每个服务支持的操作的地方（超出 wsdl 中指定的操作）。我错过了什么吗？

有没有办法自定义它？

谢谢，阿普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:54:06.820

您可以单击页面左侧的配置选项卡，单击服务，然后在其中添加字段。以下是您可以在概览表和联系人表之间插入的一些代码：

```
<table name="Operations">
    <subheading>
        <heading>Operations</heading><heading>Service Operations</heading>
    </subheading>
    <field type="option-text" maxoccurs="unbounded">
        <name label="Operations">Operations</name>
        <values>
            <value>SOAP</value><value>REST</value><value>Other</value>
        </values>
    </field>
</table> 
```

# php - 创建 XPath 搜索应用程序

> ID：12804692
> 
> 赞同：2
> 
> 时间：2012-10-09T16:47:00.747
> 
> 标签：php, xml, xpath

上周我问了一个关于创建脚本来搜索事件信息的 XML 提要的问题。

[使用多个 Xpath 查询来搜索 XML](https://stackoverflow.com/questions/12732418/using-multiple-xpath-queries-to-search-xml)

一旦我写了一些代码，我就会回来的建议结束了这个问题。

我现在已经这样做了，所以我想发布我所做的事情，并询问我是否以正确的方式处理了这个问题。

这是我要搜索的参数：

**id** - 带回具有匹配 id 属性的特定事件的信息。

**q** - 一个通用搜索查询，将在事件注释中的任何位置返回匹配项

**关键字、场地、出票、开始**时间 - 在这些特定元素中查找匹配项

**program_list, performer_list** - 在这些元素的任何子元素中查找匹配项（每个事件中有多个表演者）

**dateFrom, dateTo** - 允许进行日期范围搜索。

这是一个示例事件：

```
 <event id="69399">
    <starttimeunixtime>1349791200</starttimeunixtime>
    <endtimeunixtime>1350507600</endtimeunixtime>
    <starttime>2012-10-09 15:00:00</starttime>
    <endtime>2012-10-17 22:00:00</endtime>
    <formatted_startdate>09 October 2012</formatted_startdate>
    <formatted_enddate>17 October 2012</formatted_enddate>
    <formatted_starttime>3:00pm</formatted_starttime>
    <formatted_endtime>10:00pm</formatted_endtime>
    <venue>Royal Albert Hall</venue>
    <title>A concert of Music</title>
    <performer_list>
      <performer_7>
        <performer>A.N. Other</performer>
        <instrument>Viola</instrument>
      </performer_7>
    </performer_list>
    <program_list>
      <program_8>
        <program>Beethoven</program>
        <program_work>Symphony No. 2</program_work>
      </program_8>
    </program_list>
    <description><![CDATA[<p>This is the description&nbsp;This is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the descriptionThis is the description</p>]]></description>
    <shortDescription><![CDATA[<p>This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;This is the short description&nbsp;</p>]]></shortDescription>
    <eventType>Highlights</eventType>
    <keywords>orchestra</keywords>
    <ticketInfo><![CDATA[<p>This is the ticket info&nbsp;</p>]]></ticketInfo>
    <ticketed>YES</ticketed>
  </event> 
```

这是我的脚本：

```
<?
//Load events XML
$events=simplexml_load_file('events.xml');

//If single event find that info
if(isset($_GET['id'])):
    $id=preg_replace("/[^0-9]/","",$_GET['id']);
    $query='@id="'.$id.'"';
    $outputtype="singleevent";

//Allow for a general search that will search all fields
elseif(isset($_GET['q'])):
    $searchterm=strtolower(preg_replace("/[^A-Za-z0-9\s:-]/","",$_GET['q']));
    $query.='contains(translate(.,"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"), "'.$searchterm.'") and ';
    echo $query;
    $query= substr_replace($query, "", -5);

//Otherwise build a query to do the search. 
elseif  (!empty($_GET)):
    foreach($_GET as $key => $value):

        //Remove unwanted characters from userinput
        $searchterm=strtolower(preg_replace("/[^A-Za-z0-9\s:-]/","",$value)); 

        //Do a simple search
        //Xpath doesn't support case insensitive searching, so I'm using the Xpath translate function, which swaps uppercase letters for their lowercase counterpart.
        if($key=='keywords' || $key=='venue' || $key=='ticketed' || $key=='starttime'):         
            $query.='contains(translate('.$key.',"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"), "'.$searchterm.'") and ';
        endif;

        // Do a search of composite fields
        if($key=='program_list' || $key=='performer_list'):         
            $query.='contains(translate('.$key.'/*,"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"), "'.$searchterm.'") and ';
        endif;  

        // Allow for a date range query (we might have dateFrom, dateTo or both!)

        if($key=='dateFrom'):
            $query.='endtimeunixtime > '.strtotime($searchterm. "00:00:00").' and ';
        endif;

        if($key=='dateTo'):
            $query.='starttimeunixtime < '.strtotime($searchterm." 23:59:59").' and ';
        endif;          
    endforeach;

    // Remove final 'and' from query

    $query=substr_replace($query, "", -5);

//End of Query Builder
endif;

// If there is no query, then show all events.  

if($query==""):
    $query='*';
endif;

//Query XML
$events=($events->xpath('event['.$query.']'));

//Use $events to generate pages

?> 
```

它似乎按要求工作，但我只是想知道是否有人对替代方法有任何反馈/建议，因为我将来需要用 XML 做很多事情。谢谢！

# iphone - supportedInterfaceOrientations - 支持 iOS6 和 iOS5

> ID：12804695
> 
> 赞同：3
> 
> 时间：2012-10-09T16:47:05.197
> 
> 标签：iphone, ipad, ios5, rotation, ios6

只是一个快速的问题。假设我已将我的应用程序更新到 iOS6 并更改了 iOS5 的 shouldAutoRotate 方法，如下所示：

```
- (BOOL) shouldAutorotate
{
return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscapeRight;
} 
```

如果我仍然支持 iOS5，如果应用程序正在运行 iOS5 的设备上运行，我是否需要检查 iOS 版本，然后还包括旧的 iOS5 方法（即 shouldAutoRotateToInterfaceOrientation）？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:55:39.367

可以在您的应用程序中同时包含 iOS5 和 iOS6 代码。

在 iOS5 上，supportedInterfaceOrientations 和 shouldAutorotate 不会被调用，而在 iOS6 上，旧方法 shouldRotateToInterfaceOrientation 等不会被调用。

# java - 山狮上的 JOGL 设置

> ID：12804696
> 
> 赞同：2
> 
> 时间：2012-10-09T16:47:05.847
> 
> 标签：java, macos, osx-lion, jogl

我正在尝试在 Mountain Lion 上设置 JOGL。我想在没有 Eclipse 之类的 IDE 的情况下使用它。但我就是无法让它工作。

我做了什么：

*   从这里下载了最新的 JOGL 版本：http: [//jogamp.org/wiki/index.php/Downloading_and_installing_JOGL#Downloading_the_latest_automatic_build](http://jogamp.org/wiki/index.php/Downloading_and_installing_JOGL#Downloading_the_latest_automatic_build)
*   将文件 jogl-all-natives-macosx-universal.jar -gluegen-java-src.zip -jogl-all.jar -gluegen-rt-natives-macosx-universal.jar -jogl-java-src.zip -gluegen -rt.jar（就像上面链接中描述的那样，至少我是这样理解的）在一个目录中：~/jogl
*   下一步：配置类路径。在我的系统上，CLASSPATH 变量目前为空。所以我用他们的全名添加了一次我的罐子，比如 export CLASSPATH=$CLASSPATH:~/jogl/gluegen-rt-natives-macosx-universal.jar:~/jogl/...
*   试图编译测试代码。错误：javax.media.opengl 不存在
*   尝试更改类路径以匹配所有带有通配符“*”的文件 -> 相同的问题
*   试图用 javac -classpath "~/jogl/*" source.java 编译，同样的错误
*   将所有文件分别添加到 javac -classpath，同样的错误

这个问题可能非常简单且很容易解决，但我不会在这里问我是否没有尝试几乎所有方法来让它工作！

这是我使用的测试代码：

```
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.media.opengl.GLCapabilities;
import javax.media.opengl.GLProfile;
import javax.media.opengl.awt.GLCanvas;
import javax.swing.JFrame;

public class test
{
    public static void main(String[] args)
    {
      // setup OpenGL Version 2
      GLProfile profile = GLProfile.get(GLProfile.GL2);
      GLCapabilities capabilities = new GLCapabilities(profile);

      // The canvas is the widget that's drawn in the JFrame
      GLCanvas glcanvas = new GLCanvas(capabilities);
      glcanvas.addGLEventListener(new Renderer());
      glcanvas.setSize( 300, 300 );

        JFrame frame = new JFrame( "Hello World" );
        frame.getContentPane().add( glcanvas);

        // shutdown the program on windows close event
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent ev) {
                System.exit(0);
            }
        });

        frame.setSize( frame.getContentPane().getPreferredSize() );
        frame.setVisible( true );
    }
} 
```

我的系统： - OSX 10.8.2 - javac 1.6.0_35

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:55:15.063

试试这个（在与 test.java 相同的目录中使用 jogl-all.jar）：

```
javac -classpath jogl-all.jar test.java 
```

您的代码引用了一个未提供的名为 Renderer() 的类，因此我无法编译您的示例，但是这个 jar 包括`javax.media.opengl.*`

# comments - 评论代码或不评论代码

> ID：12804697
> 
> 赞同：0
> 
> 时间：2012-10-09T16:47:08.420
> 
> 标签：comments

我在不同的公司工作过，在每个地方，人们对代码中是否应该包含注释都有不同的看法。有人说他们不应该这样做，因为程序员的代码应该足够简单易懂，因此应该是自我注释的。他们进一步争辩说，由于代码经常更改，并且开发人员并不总是足够勤奋地更新注释以及他们的代码，因此注释很快就会过时并因此变得具有误导性。另一组说代码的功能是用技术术语描述系统做什么，但它并不总是描述代码的业务原因是什么，因此注释有助于为系统提供上下文。代码。我倾向于倾向于前一种观点。我想知道社区的观点是什么。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:50:17.813

我同意你的看法。业务原因应该在验收测试中捕获，或者，如果您的类型系统足够强大来表达它们，那么直接在编译器可以机械检查它们的类型系统中。

像业务规则这样重要的东西绝对不*属于*评论，评论既不检查也不执行或测试。

# javascript - 无法赶上我的活动

> ID：12804700
> 
> 赞同：0
> 
> 时间：2012-10-09T16:47:26.247
> 
> 标签：javascript, backbone.js

我有 2 个关于 DOM 事件的问题。

我想在 DOM 上触发一个事件，我写了这段代码：

```
window.homeView = Backbone.View.extend({
    el : $('#home-container'),

    initialize : function() {
       this.template = _.template($('#home-template').html());
       this.render();
    },

    events: {
      "click a.fb_connect": 'fetch_user'
    },

    fetch_user: function(){
        console.log("Fetch requested...");
    },

    render : function() {
        this.delegateEvents();
        var renderedContent = this.template(this.model.toJSON());
        $(this.el).html(renderedContent);
        return this;
    }

}); 
```

当我点击我的链接时`<a class="fb_connect" href="#"><img src="img/fb-connect.png" alt="fb-connect" /></a>`没有发生任何事情......我不知道为什么，有什么想法吗？

另一个问题，我听说过“自定义事件”，我想在这里做的是触发一个关于我的 facebook 登录的事件，所以在我的例子中（这不起作用），我点击链接调用我的事件，但我应该在 facebook 回调中调用事件以确保我得到了数据，问题是，facebook 回调不是 DOM 事件，所以我不知道如何触发它，有没有办法处理这些“自定义事件“做这种事？

谢谢你的帮助 ！

编辑：http: [//jsfiddle.net/ludoblues/japNK/3/](http://jsfiddle.net/ludoblues/japNK/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:14:00.520

问题是您的链接不是视图定义的元素的一部分。

你有这个作为你的模板：

```
<script type="text/template" id="home-template">
            <span><%= id %></span>
            <span><%= username %></span>
            <span><%= facebook_id %></span>
            <span><%= facebook_token %></span>
</script> 
```

这不包含您要附加​​事件的元素。

通过 Backbone 的事件散列附加事件通过使用`on`jQuery 方法的委托能力起作用，但由于它不知道（或想知道）您的模板何时实际附加 DOM（因此可访问），它将它们附加到由 Backbone 创建的周围元素，在您的情况下定义为`el : $('#home-container')`

因此，当 Backbone 附加事件时，它使用：

```
this.$el.on("click", "a.fb_connect", this.fetch_user); 
```

`this.$el`提供的 jQuery 包装在哪里`el`（或由、和`el`的组合生成）。`tagName``className``id`

因为`<a class="fb_connect"...></a>`is not a child of `<div id="home-container>`the click 事件永远不会被触发，因为 jQuery 只侦听`fb_connect`带有`div#home-container`.

如果您将模板更改为：

```
<script type="text/template" id="home-template">
            <span><%= id %></span>
            <span><%= username %></span>
            <span><%= facebook_id %></span>
            <span><%= facebook_token %></span>
            <a href="#" class="fb_connect">OK !</a>​
</script> 
```

有用。（在小提琴中确认）。

Here's the [documentation for `.on`from jQuery](http://api.jquery.com/on/)这将有助于更详细地解释这一点。

和更新的[jsfiddle](http://jsfiddle.net/hwjY9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:58:47.757

对于您的第一个问题，请查看[此答案](https://stackoverflow.com/questions/7807149/backbone-js-simple-view-event-not-firing)；您是否等待 DOM 准备就绪？

对于第二个，当您不能依赖 Backbone 视图中的模型/集合事件时，我建议使用 pub/sub 库：[这个](https://gist.github.com/661855)有我的偏好。

# c# - C# - 如何正确使用接口的实现

> ID：12804701
> 
> 赞同：4
> 
> 时间：2012-10-09T16:47:33.890
> 
> 标签：c#, interface, var

```
public interface IMyInterface
{
   List<string> MyList(string s)
}

public class MyClass : IMyInterface
{
   public List<string> MyList(string s)
} 
```

有什么区别：

```
[Method]
MyClass inst = new MyClass();
... 
```

或者：

```
[Method]
var inst = new MyClass() as IMyInterface;
... 
```

或者：

```
[Method]
IMyInterface inst = new MyClass();
... 
```

使用 IMyInterface 实现的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T16:50:31.543

第二个很可怕。它真的相当于

```
IMyInterface inst = new MyClass(); 
```

但它甚至不检查是否`MyClass`实现了接口。这只是一种使用方式，`var`但在其他地方明确指定类型。伊克。

通常，如果您只依赖接口类型（根据上述或第三个选项）声明变量会更干净 - 它让用户清楚您不需要类声明的任何额外成员. 请参阅[“对接口进行编程意味着什么？”](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface) 了解更多信息。

*请注意，这些都与实现*接口无关。`MyClass`是*实现*接口的类。这仅与*使用*接口的实现有关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T16:50:40.793

`MyClass inst = new MyClass();`

它使用具体类型创建一个对象。多态性是无法实现的。

`var inst = new MyClass() as IMyInterface`

编译器能够根据强制转换和使用 var 推断它是哪种类型。类型是 IMyInterface...

`IMyInterface inst = new MyClass();`

在我看来最好的。通过使用 MyInterface，您可以实现多态性，在运行时更改 inst 指向的内容。

# python - 在 Microsoft Project 中使用 Python 接受弹出窗口

> ID：12804702
> 
> 赞同：1
> 
> 时间：2012-10-09T16:47:35.830
> 
> 标签：python, ms-project

我目前的代码是

```
mppApp = Dispatch("MSProject.Application")
try:
    mppApp.FileOpen(fileName)
    mppDoc = mppApp.ActiveProject
    core_props = mppDoc.BuiltinDocumentProperties

    for prop_name, core_prop_name in _CORE_PROPERTIES.iteritems():
        try:
            metadata[prop_name] = core_props(core_prop_name).Value
        except:
            metadata[prop_name] = ""

    for key in ['created', 'modified', 'printed']:
        if key in metadata and metadata[key]!="":
           metadata[key] = strftime("%m/%d/%Y %I:%M:%S %p", gmtime(int(metadata[key])))

    for prop_name, core_prop_name in _CORE_PROPERTIES.iteritems():
        print core_prop_name, "=", metadata[prop_name]

except:
    print fileName, "could not be opened"
mppApp.Quit(SaveChanges=0)
time.sleep(.1) 
```

当我用这个自动 python 代码打开一个 .mpp 文件时，我有一个弹出窗口说

“现有注释中有多行文本。多行文本只能使用“任务信息”对话框的“注释”选项卡输入。如果更改表格中的注释，则除第一行之外的所有文本行，以及“

如果我在分派应用程序、打开文件并将文档设置为活动项目后退出，则不会出现此弹出窗口。一旦我抓住 BuiltinDocumentProperties 并尝试退出，就会出现弹出窗口。我想知道是否有办法用 python 接受这个弹出窗口。如果我尝试在弹出窗口中退出，我会收到一个 pywintypes.com_error 说呼叫被被呼叫者拒绝。

如果我手动接受弹出窗口，然后再次调用退出行，它将关闭 Microsoft Project 应用程序。

# mongodb - Mongo - 根据查询参数保留排序？

> ID：12804705
> 
> 赞同：0
> 
> 时间：2012-10-09T16:47:57.157
> 
> 标签：mongodb, mongoid

我怎么能在 mongo 中执行以下操作？

```
db.questions.find( { _id: { $in: [ "506b422ff42c95000e000004", "506b422ff42c95000e00007a", "506b422ff42c95000e00008d"] } } ).sort( {_id: { $in: [ "506b422ff42c95000e00007a", "506b422ff42c95000e00008d", "506b422ff42c95000e000004"]}}); 
```

甚至有可能还是我必须在代码端这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:58:34.747

不，不是。你需要自己做。结果不会按照您构建查询的顺序返回。看到这个类似的问题：[对 MongoDB $in 查询的响应顺序？](https://stackoverflow.com/questions/3142260/order-of-responses-to-mongodb-in-query)

您的 ID 看起来确实是按数字顺序排列的，并且它们是基于日期的，因此您可以对 _id 本身进行排序，但是甚至无法确定这些对象是否会以该顺序存储在数据库中。

# c++ - C++：扫描图像的 OpenCV 性能问题

> ID：12804708
> 
> 赞同：2
> 
> 时间：2012-10-09T16:48:04.000
> 
> 标签：c++, performance, image-processing, opencv, computer-vision

我有大约 20 张经过颜色编码的图像。我想扫描每个图像并将像素与与该颜色关联的标签匹配。我已经编写了下面的代码，但是运行这个看似简单的任务大约需要 30 分钟。图像的分辨率为 960 x 720。

我的代码：

```
void go_through_pixels(path &image_dir, string& ground_truth_suffix, string image_format, unordered_map<RGB, string> colors_for_labels){

    if(!exists(image_dir)){
        cerr << image_dir << " does not exist, prematurely returning" << endl;
        exit(-1);
    }

    unordered_map<string, set<path> > label_to_files_map;

    //initialise label_to_files_map
    for(unordered_map<RGB, string>::iterator it = colors_for_labels.begin(); it != colors_for_labels.end(); it++){
        label_to_files_map[it->second] = set<path>();
    }

    directory_iterator end_itr; //default construction provides an end reference

    for(directory_iterator itr(image_dir); itr != end_itr; itr++){

        path file = itr->path();
        string filename = file.filename().string();
        RGB rgb(0,0,0); //default rgb struct, values will be changed in the loop

        if(extension(file) == image_format && filename.find(ground_truth_suffix) != string::npos){
            //ground truth file
            Mat img = imread(file.string(), CV_LOAD_IMAGE_COLOR);

            for(int y = 0; y < img.rows; y++){
                for(int x = 0; x < img.cols; x++){
                    //gives data as bgr instead of rgb
                    Point3_<uchar>* pixel = img.ptr<Point3_<uchar> >(y,x);
                    rgb.red = (int)pixel->z;
                    rgb.green = (int)pixel->y;
                    rgb.blue =(int)pixel->x;
                    string label = colors_for_labels[rgb];
                    label_to_files_map[label].insert(file);
                    cout << label << endl;
                }
            }
        }
    }
} 
```

之后我会用这些数据做更多的事情，但我已经将我的代码简化到这个只是为了尝试找出性能问题。

我发现这`label_to_files_map[label].insert(file)`是导致大部分延迟的原因，因为删除后只需扫描图像大约需要 3 分钟。我仍然认为这太长了，但可能是错的？

此外，由于该集合`insert`需要很长时间（因为它必须在插入之前检查重复项），任何人都可以建议在这里使用更好的数据结构吗？

本质上，一张图片可以有 100 个像素对应于建筑物，100 个像素对应于汽车等等，所以我只想在地图`label_to_files_map`中记录这个文件（正在扫描的当前图像）里面有一个建筑物（在这个case 由特定的 rgb 值表示）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:23:54.253

性能问题是您在每个像素上做了太多的工作。

对于每个文件（就在您的堆叠 for 循环开始之前）制作 color_for_labels 的副本。

```
 Point3_<uchar> oldPixel;
        for(int y = 0; y < img.rows; y++){
            for(int x = 0; x < img.cols; x++){
                //gives data as bgr instead of rgb
                Point3_<uchar>* pixel = img.ptr<Point3_<uchar> >(y,x);
                if(*pixel == oldPixel) 
                    continue; // skip extra work
                oldPixel = *pixel
                rgb.red = (int)pixel->z;
                rgb.green = (int)pixel->y;
                rgb.blue =(int)pixel->x;
                string label = copy_of_colors_for_labels[rgb];
                if(label != null) {
                    label_to_files_map[label].insert(file);
                    copy_of_colors_for_labels[rgb] = null;
                    cout << label << endl;
                }
            }
        } 
```

可能存在语法错误（因为我在浏览器中重新编写了它，并且多年没有用 C++ 编写代码），但以上内容应该消除了很多额外的处理工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:01:05.760

您使用了错误的数据类型和错误的函数。这里有一个关于如何改进的建议。我想它会在几秒钟内运行。

您工作的第 1 步是从 3 通道图像到单通道图像的查找表。你可以使用 cv::LUT。但是，您需要做一个技巧以使其快速。

将其转换为每像素 4 个字节：

```
cv::Mat mat4bytes;
// add 8 bits to each pixel. the fill value is 255
cv::cvtColor(img, mat4bytes, CV_RGB2RGBA); 
// this is a nice hack to interpret 
// the RGBA pixels of the input image as integers 
cv::Mat pseudoInteger(img.size(), CV_32UC1, mat4bytes.data); 
```

现在，您可以应用 LUT。

```
cv::Mat colorCoded;
// you have to convert your colors_for_labels lookup table
// like this: 
lookupTable[i] = 
      ((unsigned int)colors_for_labels.first.x << 24 ) + 
      ((unsigned int)colors_for_labels.first.y << 16 ) +        
      ((unsigned int)colors_for_labels.first.z << 8  ) +        
      255; 
// make sure it is correct!!!
// and lookupTable data MUST be unsigned integer

cv::LUT(pseudoInteger, colorCoded, lookupTable); 
```

**编辑**此时你在lookupTable中有你计算的值`label`

计算的最后一步实际上是直方图。那么为什么不使用 OpenCV 的直方图函数呢？检查文档`calcHist()`，看看它如何最适合您的算法。请注意，`calcHist()`可以一次执行更多图像的直方图，因此您可能希望将`colorCoded`图像保存在矢量中，然后将所有图像的直方图提取到一个中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:30:33.967

除了关于代码优化的其他答案，考虑处理图像直方图。图像中的几个像素将具有完全相同的颜色，因此首先计算直方图，然后对图像中的每种不同颜色进行处理。那应该大大加快速度

# android - Android 4+ html5画布不重绘

> ID：12804710
> 
> 赞同：6
> 
> 时间：2012-10-09T16:48:11.230
> 
> 标签：android, cordova, html5-canvas, kineticjs, easeljs

我目前正在使用phonegap 开发一个android 应用程序。我有一个 html5 画布，我在上面绘制和动画对象。它在 android 2.3 上运行良好，但在 android 4+ 上它不会重绘画布。我尝试将 kinetic.js 和 easel.js/tween.js 用于我的动画，并且这两个库都出现了不清除画布的问题。我在画布上显示和隐藏 div 时取得了一些成功，但它并不总是有效。我只能假设这是一个 android 4+ 特定的错误或某种类型的功能，以增强 html5 画布性能。

有谁知道是否有一些我可以更改的设置或我可以在 android 4 或 javascript 中调用的方法，这将允许我在动画期间强制重绘我的 html5 画布？

还应该注意的是，动画似乎可以在 4.1 google api 模拟器中使用 easel.js/tween.js（画布清除和重绘），但不适用于运行 4.1.1 的手机。

我对正在发生的事情做了一些进一步的研究。从本质上讲，动画一开始的形状似乎留下了一个工件，而 clearRect 并没有清除它。我有一个大圆圈，我正在缩小到一个小圆圈。动画仍然发生，但大圆圈不受在画布上调用 clearRect 的影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:48:51.143

我也没有解决根本问题，但我想出了另一个不完美的解决方法，它不会给你的代码增加延迟。首先在画布上绘制一个虚拟对象。然后绘制您的动画对象（或可拖动对象。因为它也发生在拖动时）。似乎第一个绘制的对象是持久的（即无法正确清除）。使用 KineticJs，我执行以下操作... 1.) 创建舞台，2.) 绘制对象（如舞台大小的矩形作为背景。注意对象不能是透明的），3.)将图层添加到舞台，然后 4.) 运行 layer.draw()。

之后，我可以在画布上绘制任何东西，并且它在 Android 中表现正常。（见下面的例子。没有背景，对象在第一次拖动时被复制。要测试它，只需将背景的不透明度设置为 0）。

一个警告：根据我目前的经验，这发生在任何给定层中的第一个对象上。所以我必须调整舞台中的每一层。根据您的应用程序，它可能会或可能不会比在代码中添加时间延迟更好。

这似乎是从 Android 4.1.x 开始的 Android 错误它在 4.0.x 中不会出现。并且在本周发出的最近升级到 4.1.2 中也没有修复。类似的问题与 CSS 中的 overflow-x 属性的设置有关（参见[http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type% 20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=35474](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=35474) )。

```
<script>
  window.onload = function() {
    var stage = new Kinetic.Stage({
      container: "container",
      width: 578,
      height: 200
    });

    var boxLayer = new Kinetic.Layer();
    stage.add(boxLayer);
        var background = new Kinetic.Rect({
          x: rectX,
          y: rectY,
          width: 578,
          height: 200,
          fill: "white",
          stroke: "white",
          strokeWidth: 4,
          draggable: false
        });
    boxLayer.add(background)
    boxLayer.draw();

    var rectX = stage.getWidth() / 2 - 50;
    var rectY = stage.getHeight() / 2 - 25;

    var box = new Kinetic.Rect({
      x: rectX,
      y: rectY,
      width: 100,
      height: 50,
      fill: "#00D2FF",
      stroke: "black",
      strokeWidth: 4,
      draggable: true,
      opacity: 1.0            
    });

    boxLayer.add(box);
    boxLayer.draw();

  };

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:55:10.267

```
function drawImage(imageObj) {
    var stage = new Kinetic.Stage({
        container: "container",
        width: wW,
        height: wH
    }),
    timer = null,
    dummys = 1,
    layer = new Kinetic.Layer();

    timer = setInterval( function() {
        if( dummys >= 2 ) {
            clearInterval(timer);
            layer.clear();
            var darthVaderImg = new Kinetic.Image({
                image: imageObj,
                x: stage.getWidth() / 2 - 200 / 2,
                y: stage.getHeight() / 2 - 137 / 2,
                draggable: true
            });
            layer.add(darthVaderImg);
            stage.add(layer);   
        }else{
            var background = new Kinetic.Rect({
              x: 0,
              y: 0,
              width: wW,
              height: wH,
              fill: "white",
              draggable: false
            });
            layer.add(background)
            layer.draw();
            dummys++;
        }
    }, 10 );

}

var wH = window.innerHeight,
    wW = window.innerWidth,
    mCanvas = document.getElementById('container'),
    imageObj = new Image();

$(document).ready(function(){
    mCanvas.style.width = wW;
    mCanvas.style.height = wH;
    imageObj.src = 'img/darth-vader.jpg';
    imageObj.onload = function() {
        drawImage(this);
    };
}); 
```

奇迹般有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:55:36.327

我今天在 Android 4.1.1 上遇到了同样的问题，只是我的问题更令人讨厌。我尝试了`setTimeout`其他答案中建议的“绘制虚拟对象”解决方法，但问题仍然存在。经过更多的尝试和错误，我发现如果我为前几帧绘制虚拟对象（前两帧对我来说已经足够了），之后可以成功清除画布。

另一个相关问题是，如果我在画布顶部显示一个弹出框，然后将其关闭，画布清除错误将再次发生。而这次为几帧绘制虚拟对象不再起作用，对我有用的是先调整画布大小，然后再为几帧绘制虚拟对象。

显然，这些都是丑陋的解决方法，但可能对遇到相同问题的其他人有用。

# eclipse - Eclipse ADT + JDT 插件问题

> ID：12804711
> 
> 赞同：2
> 
> 时间：2012-10-09T16:48:17.993
> 
> 标签：eclipse, adt, eclipse-jdt

我正在运行版本：3.7.2 Build id：来自 Ubuntu 12.04 和 eclipse-jdt 包的 I20110613-1736。

安装 ADT 插件后，我看不到窗口 > 首选项 > Android 菜单。

我已经用'-console'加载了eclipse并运行了'diag com.android.ide.eclipse.adt'

osgi> diag 3 参考：file:plugins/com.android.ide.eclipse.adt_20.0.3.v201208082019-427395.jar [3] 未解决的直接约束：缺少必需的捆绑包 org.eclipse.jdt_0.0.0。缺少必需的捆绑包 org.eclipse.jdt.ui_0.0.0。缺少必需的捆绑包 org.eclipse.jdt.launching_0.0.0。缺少必需的捆绑包 org.eclipse.jdt.junit_0.0.0。缺少必需的捆绑包 org.eclipse.jdt.junit.runtime_0.0.0。

这看起来很奇怪，因为例如它们都存在于同一个目录中：

/usr/lib/eclipse/plugins/org.eclipse.jdt.ui_3.7.2.v20120109-1427.jar /usr/lib/eclipse/plugins/org.eclipse.jdt.core_3.7.3.v20120119-1537.jar

并且 *core 已加载：

osgi> ss org.eclipse.jdt.core

框架启动。

id 状态包 315 <> org.eclipse.jdt.core_3.7.3.v20120119-1537

有人看过这个或有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:50:44.187

请从网站下载 Eclipse，而不是使用包管理器来安装 Eclipse。我知道这与所有 Ubuntu 建议相矛盾，但是人们在使用打包版本时遇到了各种麻烦，它试图通过不允许安装*所需的功能*来超越 Eclipse 内部 P2 安装机制。

ADT 需要安装[Eclipse WST](http://www.eclipse.org/webtools/ws/)，因此请确保它在您的安装中可用。

# utf-8 - Linux 上用于 UTF 转换的 MultiByteToWideChar / WideCharToMultiByte 实现

> ID：12804712
> 
> 赞同：1
> 
> 时间：2012-10-09T16:48:22.080
> 
> 标签：utf-8, utf-16, multibyte, widechar

我正在开发使用 MultiByteToWideChar() 和 WideCharToMultiByte() 函数将 UTF-8 转换为 UTF-16 的应用程序，反之亦然。我的工作目的是将该应用程序从 Windows 移植到 Linux。由于这些函数在整个代码中被广泛使用，我想尽量减少之后的代码更改。不幸的是我有一个限制 - 不能使用像 Wine 这样的开源库，所以我基本上是在寻找一个很好的算法，用于将多字节 UTF-8 字符串转换为 UTF-16 宽字符串（反之亦然），该算法适用于 32\ 64 位 Linux 并且仅使用标准 Linux C 库。

有人可以推荐我可以使用的适当算法或标准实现。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-10T16:13:50.413

UTF-8 和 UTF-16 是非常简单的编码，很容易手动实现，如果您只担心这两种编码，您甚至不需要使用任何库。

# asp.net-mvc-3 - jqGrid 水平滚动条/gridwidth 使用 mvc3 razor

> ID：12804719
> 
> 赞同：0
> 
> 时间：2012-10-09T16:49:02.153
> 
> 标签：asp.net-mvc-3, razor, jqgrid, scrollbar

抱歉，如果这已在某处之前发布过，我看不到描述此问题的问题....

我正在将 mvc3/razor 与 jqGrid 一起使用，它似乎没有正确计算宽度 - 它正在切断最后一列。

谁能告诉我为什么？

我正在使用未更改的 ui.jqgrid.css 和 jQueryUI themeroller 主题，如果这有所作为！

我的 Index.cshtml ：

```
@{
    ViewBag.Title = "Index";
}

<h2>@ViewBag.Message</h2>
<div id="content">
    <div id="content-left">
        @Html.Partial("SearchPanel")
    </div>
    <div id="content-main">
        <table id="jpgCustomers" cellpadding="0" cellspacing="0"></table>
        <div id="jpgpCustomers" style="text-align:center;"></div>
        <div id="dlgCustomer"></div>
    </div>
</div>
<div id="CustomerEdit"></div>
@section JavaScript 
{
<script type="text/javascript">

    $(document).ready(function () 
    {
        $('#jpgCustomers').jqGrid({
            //url from wich data should be requested
            url: '@Url.Action("Customers")',
            //type of data
            datatype: 'json',
            //url access method type
            mtype: 'POST',
            //columns model
            //columns names
            colNames: ['No Of Banks','Name', 'FullName', 'Description', 'Enabled', 'Tranbase', 'Group ID', 'Email Address', 'Phone', 'Pager', 'Fax', 'Comments', ' '],
            colModel: [
                        //displayed Columns
                        { name: 'BankLinks', index: 'BankLinks', align: 'center', width:40, editable:false },
                        { name: 'LogonName', index: 'LogonName', align: 'left', width:80, editable:true },
                        { name: 'FullName', index: 'FullName', align: 'left', editable:true, width: 200 },
                        { name: 'Description', index: 'Description', align: 'left', width: 200, editable:true, edittype:'textarea'},
                        { name: 'Enabled', index: 'Enabled', align: 'center', width: 60, editable:true},
                        { name: 'IsTranbase', index: 'IsTranbase', align: 'center', width: 60, editable:true, formatter: YesNoFormatter, unformat:YesNoUnformatter, edittype:'checkbox', editoptions:{value:'1:0'}},

                        //Hidden Columns
                        { width: 60,name: 'GroupID', index: 'GroupID', hidden: true, editable:true, editrules:{required:false, edithidden:true} },
                        { width: 60,name: 'Email', index: 'Email', hidden: true, editable:true, editrules:{required:false, edithidden:true}, editype:'email' },
                        { width: 60,name: 'Phone', index: 'Phone', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},
                        { width: 60,name: 'Pager', index: 'Pager', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},
                        { width: 60,name: 'Fax', index: 'Fax', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},
                        { width: 60,name: 'Comments', index: 'Comments', align: 'left', hidden: true, editable:true, edittype:'textarea'},

                        //Action column
                        { name: 'myac', width:80, fixed:true, sortable:false, resize:false, editable:false, formatter:'actions', formatoptions: { 
                                                                                                                    keys:true, 
                                                                                                                    delOptions: { url : encodeURI('@Url.Action("Delete")') } 
                                                                                                                 }
                        }
                      ],
            //pager for grid
            pager: $('#jpgpCustomers'),
            //number of rows per page
            rowNum: 10,
            //initial sorting column
            sortname: 'FullName',
            //initial sorting direction
            sortorder: 'asc',
            //we want to display total records count
            viewrecords: true,
            //grid height
            height: '100%',
            editurl: encodeURI('@Url.Action("Edit")'),
            //subgrid
            subGrid: true,
            //subrid model
            subGridRowExpanded: function(subgrid_id, row_id) {
                var subgrid_table_id, pager_id;
                subgrid_table_id = subgrid_id+"_t";
                pager_id = "p_"+subgrid_table_id;
                $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>");
                $("#"+subgrid_table_id).jqGrid({
                    url: encodeURI('@Url.Action("BankLinks")' + '?id=' + row_id),
                    datatype: 'json',
                    mtype: 'POST',
                    colNames: ['Bank', 'Folder', 'Enabled'],
                    colModel: 
                    [
                        {name:"Bank",index:"Bank",width:20,key:true},
                        {name:"Folder",index:"Folder",width:20},
                        {name:"Enabled",index:"Enabled",width:10,align:"left"}
                    ],
                    rowNum:20,
                    pager: pager_id,
                    sortname: 'Bank',
                    sortorder: "asc",
                    viewrecords: true,
                    height: '100%'
                });
                $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:false,del:false})
            },
        });
        $("#jpgCustomers").jqGrid('navGrid', '#jpgpCustomers', 
                    { add: true, del: true, edit: true, search: false},
                    { width: 'auto', url: '@Url.Action("Edit")'},
                    { width: 'auto', url: '@Url.Action("Edit")' },
                    { width: 'auto', url: '@Url.Action("Delete")' });

    });

    function YesNoFormatter(cellvalue, options, rowObject) {
        var cellValueInt = parseInt(cellvalue);
        if (cellValueInt == 1)
            return "<img src='@Url.Content("~/Content/images/tick.gif")' title='"+ cellvalue + "' />";
        else 
            return "<img src='@Url.Content("~/Content/images/cross.gif")' title='"+ cellvalue + "' />";
    };

    function YesNoUnformatter (cellvalue, options, cell) {
        return $('img', cell).attr('title');
    };

    </script>
} 
```

我的控制器动作：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Customers(JqGridRequest request)
    {
        ISession session = NHibernateHelper.GetCurrentSession();
        try
        {
            IEnumerable<Customer> customers = session.QueryOver<Customer>().List().Skip<Customer>(0).Take<Customer>(request.RecordsCount);

            int totalRecords = customers.Count();

            //Prepare JqGridData instance
            JqGridResponse response = new JqGridResponse()
            {
                //Total pages count
                TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),
                //Page number
                PageIndex = request.PageIndex,
                //Total records count
                TotalRecordsCount = totalRecords
            };
            //Table with rows data
            foreach (Customer customer in customers)
            {
                response.Records.Add(new JqGridRecord(Convert.ToString(customer.Id), new List<object>()
            {
                customer.Banks.Count(),
                customer.LogonName,
                customer.FullName,
                customer.Description,
                customer.Enabled,
                customer.IsTB,
                customer.GroupID,
                customer.Email,
                customer.Phone,
                customer.Pager,
                customer.Fax,
                customer.Comments
            }));
            }

            //Return data as json
            return new JqGridJsonResult() { Data = response };

        }
        catch (Exception ex)
        {
            return HttpNotFound();
        }

    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult BankLinks(int Id, JqGridRequest request)
    {
        ISession session = NHibernateHelper.GetCurrentSession();

        Customer customer = session.Get<Customer>(Id);

        int totalRecords = customer.Banks.Count();

        //Prepare JqGridData instance
        JqGridResponse response = new JqGridResponse()
        {
            //Total pages count
            TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),
            //Page number
            PageIndex = request.PageIndex,
            //Total records count
            TotalRecordsCount = totalRecords
        };

        foreach (Bank bank in customer.Banks.ToList<Bank>())
        {
            //IEnumerable<CustomerBank> bankLink = session.CreateQuery("from CustomerBank where Bank_ID = :bankId").SetParameter("bankId", bank.Id).List<CustomerBank>();
            CustomerBank bankLink = session.QueryOver<CustomerBank>().Where(x => x.BankId == bank.Id).Where(y => y.CustomerId == customer.Id).List<CustomerBank>().FirstOrDefault();
            //IEnumerable<CustomerBank> bankLink2 = session.QueryOver<CustomerBank>().List<CustomerBank>();

            response.Records.Add(new JqGridRecord(null, new List<object>()
            {
                bank.BankCode,
                bank.Folder,
                bankLink.Enabled 
            }));
        }

        return new JqGridJsonResult() { Data = response };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:08:47.567

在寻找其他东西时找到答案（调整导航栏上的页面编辑框的大小）

请参阅[调整 jqGrid 页面编辑框的大小](https://stackoverflow.com/questions/6283665/resize-the-jqgrid-page-edit-box)

这里有一些样式表调整（针对 MVC），Oleg 添加了这些调整，并解决了水平滚动条问题，还解决了页面编辑框四星问题！- 谢谢奥列格！

# matrix - Python 3 控制类的打印输出

> ID：12804720
> 
> 赞同：1
> 
> 时间：2012-10-09T16:49:02.010
> 
> 标签：matrix, python-3.x, operator-overloading

我有一个类，矩阵，我想在这个类上调用 print 时，而不是打印

< 0x7f41fb17de18 处的**主**.Matrix 实例>

我希望能够控制类似的输出

```
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0 
```

在 C++ 中，我只会重载 << 运算符。我如何在 python 3 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:55:31.307

如果要生成可打印的输出，请实现[`__str__`](http://docs.python.org/py3k/reference/datamodel.html#object.__str__). 您也可以实现[`__repr__`](http://docs.python.org/py3k/reference/datamodel.html#object.__repr__)，但通常用于创建更具技术性的表示，而不仅仅是人类可读的输出。

```
>>> class MyType:
        def __str__ (self):
            return 'foo'
>>> print(MyType())
foo 
```

# c# - 时间测量 CUDA 和 C#

> ID：12804724
> 
> 赞同：1
> 
> 时间：2012-10-09T16:49:36.053
> 
> 标签：c#, c, visual-studio-2010, cuda

我想比较一下我的 cuda 代码在 gpu 上的速度（数据已经复制）和我的代码在 CPU 上的速度。

cuda代码中的测量如下

```
 cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventRecord(start,0);

   //Kernel Execution
    transformKernel7<<<grid,threads>>>(dev_result, width, height, angle, N);

    cudaEventCreate(&stop);
    cudaEventRecord(stop,0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&cuTime, start,stop); 
```

现在我想用 C# 来测量我的代码。我有以下代码

```
var sw = Stopwatch.StartNew();

//making some calculation....

var elapsed = sw.ElapsedMilliseconds; 
```

我的问题是 sw.ElapsedMilliseconds 不够精确。它给我的 0 时间为 0.02490834。

我会使用刻度，但我不确定如何将刻度重新计算为正确的结果。我的 Cuda 代码中的时间可以给出我的值，例如 0.058938483。秒表不够精确。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:09:53.613

`ElapsedMilliseconds`给你已经过去的整数时间。因此，您无法通过该属性获得小数部分。你需要自己计算。

如果您想要更精确的时间，请除以`ElapsedTicks`以`Stopwatch.Frequency`获得您的时间（以秒为单位）。然后转换为您想要的时间单位。

```
var elapsedMilliseconds = (double)(sw.ElapsedTicks * 1000L) / Stopwatch.Frequency; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:54:50.150

根据 MSDN，Ticks 是 long 类型，每毫秒有 10,000 个。所以，你可以手动计算。

sw.ElapsedMilliseconds 属性的部分问题可能是您使用了 var 数据类型。您的输出表明 var 正在编译为 int。自己定义变量的类型，编译器不会给它错误的类型。 [http://msdn.microsoft.com/en-us/library/bb383973.aspx](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

# codeigniter - CodeIgniter Web 应用程序 SSO，使用 OAuth2？萨姆勒？两者都不？

> ID：12804728
> 
> 赞同：1
> 
> 时间：2012-10-09T16:49:53.777
> 
> 标签：codeigniter, google-api, oauth-2.0, single-sign-on, saml

我有一个 CodeIgniter 2.1 内部网络应用程序，它使用简单的共享密码（无用户名）进行身份验证。是时候把它拉出来了，理想情况下使用我们公司的 Google Apps 帐户进行单点登录来验证特定的内部用户，并在未来允许外部用户使用他们的 Google/Twitter/Facebook 帐户进行验证。

所以问题是，我应该从哪里开始实现我在上面寻找的东西？

*   [适用于 Google Apps 的 Google SAML SSO？](https://developers.google.com/google-apps/sso/saml_reference_implementation)
*   [CodeIgniter OAuth 2.0 库？](http://getsparks.org/packages/oauth2/versions/HEAD/show)
*   还有什么？

我认为我仍然需要维护一个用户 ID 和电子邮件数据库，以便允许谁使用网络应用程序，即使谷歌或其他人将验证他们的身份？

我的似乎是一个相当基本的用例，但我已经迷失在这个首字母缩略词的海洋中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:16:09.997

是的，我会使用这个库[http://getsparks.org/packages/oauth2/versions/HEAD/show](http://getsparks.org/packages/oauth2/versions/HEAD/show)

Google 是该库似乎支持的 OAuth2 提供程序。您将从 Google OAuth 令牌中获得用户的电子邮件，如代码所示

```
$user = $provider->get_user_info($token); 
```

一旦准备好，您将需要注册或某种邀请，以便当前用户与这个新系统挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:59:36.940

除非您有充分的理由使用它，否则我会远离 SAML。它是一个非常强大的协议，它不仅提供身份验证，还提供其他类型的安全断言。但所有这些力量都伴随着相应的复杂性。相比之下，OAuth 很简单。

我过去使用过[SimpleSAMLphp](http://simplesamlphp.org/)，效果很好。但它与其说是一个库，不如说是一个完整的 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:45:45.307

我建议看看：[http ://www.jasny.net/articles/simple-single-sign-on-for-php/](http://www.jasny.net/articles/simple-single-sign-on-for-php/)

# java - Java为什么我不断收到集合不可修改的异常？

> ID：12804731
> 
> 赞同：-1
> 
> 时间：2012-10-09T16:50:01.743
> 
> 标签：java, jsf, primefaces

我正在尝试使用单元格编辑器创建一个数据表。我有一个名为“组”的列，其中显示了组列表。单击单元格编辑器图标时，它会显示一个复选框菜单，用户可以在其中检查他们想要的任何组，然后单击提交。

我什至还没有我的 rowEditEvent 处理程序，并且我得到了一个集合不可修改的异常。我无法弄清楚我做错了什么，我得到了这个例外。

任何帮助表示赞赏。

group_admin.xhtml

```
<h:form>
    <p:dataTable value="#{userBacking.users}" var="users" editable="true">

        <p:column headerText="Groups">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{users.groups}" />
                </f:facet>
                <f:facet name="input">
                    <p:selectCheckboxMenu value="#{users.groups}" label="Groups">
                        <f:selectItems value="#{groupBacking.groupsAsSelectItems}" />
                    </p:selectCheckboxMenu>
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Actions">
            <p:rowEditor />
        </p:column>

    </p:dataTable>
</h:form> 
```

获取用户

```
public List<UserBean> getUsers() throws Exception {

        ContentManager cm = null;
        cm = getContentManager();

        if(users == null) {

            users = new ArrayList<UserBean>();

            UserManager um = cm.getUserManager();
            List<? extends Group> cmsGroups = um.getCmsDefinedGroups();
            List<? extends User> allUsers = um.getAllUsers(0, Integer.MAX_VALUE);

            // loop through each user
            for(User u : allUsers) {

                Set<? extends Group> groups = u.getGroups();

                UserBean user = new UserBean();
                user.setUserName(u.getUserName());
                user.setGroups(groups);  // THIS LINE CAUSES THE EXCEPTION
                users.add(user);
            }

        }

        return users;
    } 
```

用户Bean

```
public class UserBean implements User {

        private String userName;
        private String firstName;
        private String lastName;
        private Set<? extends Group> groups = null;

        public UserBean() {}

        public UserBean(String userName, String firstName, String lastName, Set<? extends Group> groups) {
            this.userName = userName;
            this.firstName = firstName;
            this.lastName = lastName;
            this.groups = groups;
        }
        public void setUserName(String userName) {
            this.userName = userName;
        }
        public String getUserName() {
            return userName;
        }
        public String getFirstName() {
            return firstName;
        }
        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }
        public String getLastName() {
            return lastName;
        }
        public void setLastName(String lastName) {
            this.lastName = lastName;
        }
        public Set<? extends Group> getGroups() {
            return groups;
        }
        public void setGroups(Set<? extends Group> groups) {
            this.groups = groups;
        }
        public void removeGroups() {
            groups = null;
        }

        @Override
        public boolean isDisabled() {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public UserProfile getProfile() {
            // TODO Auto-generated method stub
            return null;
        }
    } 
```

堆栈跟踪

```
Oct 9, 2012 1:09:08 PM com.sun.faces.renderkit.html_basic.MenuRenderer createCollection
SEVERE: Unable to create new Collection instance for type java.util.Collections$UnmodifiableSet
java.lang.InstantiationException: java.util.Collections$UnmodifiableSet
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.createCollection(MenuRenderer.java:907)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:367)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValue(MenuRenderer.java:129)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:315)
    at org.primefaces.component.selectcheckboxmenu.SelectCheckboxMenuRenderer.getConvertedValue(SelectCheckboxMenuRenderer.java:34)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1028)
    at javax.faces.component.UIInput.validate(UIInput.java:958)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1209)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1086)
    at javax.faces.component.UIData.iterate(UIData.java:1501)
    at javax.faces.component.UIData.processValidators(UIData.java:1026)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:485)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at javax.faces.component.UIData.visitTree(UIData.java:1233)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1518)
    at javax.faces.component.UIForm.visitTree(UIForm.java:335)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1518)
    at org.primefaces.component.tabview.TabView.visitTree(TabView.java:400)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1518)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1518)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:366)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:246)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1163)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thre 
```

广告.java:662)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T18:36:48.647

堆栈跟踪表明`u.getGroups()`返回了一个`Collections#unmodifiableSet()`. 当 JSF 需要处理来自复选框组的提交值时，它会尝试实例化相同类型的集合，但该类型是不可实例化的。

将其包装在可修改的集合中，例如`HashSet`应该解决特定问题：

```
user.setGroups(new HashSet<Group>(groups)); 
```

* * *

**与具体问题无关**，到目前为止发布的代码中还有更多其他潜在问题，但它们与您遇到的特定异常无关。因此，修复当前问题可能会导致不同的异常，但这与当前问题完全无关。

# actionscript-3 - Actionscript 3 碰撞检测

> ID：12804733
> 
> 赞同：1
> 
> 时间：2012-10-09T16:50:11.033
> 
> 标签：actionscript-3, collision-detection, physics, collision

我知道您可以使用一些方法，例如 hittestPoint 等，但我想看看我的影片剪辑与另一个影片剪辑的碰撞位置。我可以使用其他任何方法吗？

有没有人知道一些关于游戏物理的好介绍？我问是因为我编写了一个小型引擎并且几乎整个代码都是意大利面条代码，这就是为什么我想知道如何正确设置这样的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:19:23.963

首先查看物理库...

你有流行的选择：box2d（[http://box2dflash.sourceforge.net/](http://box2dflash.sourceforge.net/)）或nape（[https://github.com/deltaluca/nape](https://github.com/deltaluca/nape)）

这两个都包括演示，这是一个很好的起点，因为大多数都是为了游戏

如果你在做 3d，那么 jiglib 是个不错的地方（[http://www.jiglibflash.com/](http://www.jiglibflash.com/)）

# objective-c - 如何通过 Objective-C / OS X 10.8 (DHCP) 中的所有接口发送 UDP 广播数据包

> ID：12804734
> 
> 赞同：1
> 
> 时间：2012-10-09T16:50:10.863
> 
> 标签：objective-c, macos, networking, broadcast, bootp

我正在创建一个小型实用程序，它必须在我的 MacBook Pro 上通过 BOOTP 提供 IP 地址和参数。

我使用了来自 GitHub 的 AsyncUdpSocket 库（感谢 RobbieHanson），当我的机器配置为仅连接有线以太网（Airport Off）时，它就可以工作了。但是，一旦我也启用了我的 Wifi，所有的广播回复都会进入 Wifi 界面。这会导致有线客户端无法得到应答。

**初始化/接收代码：**

```
if (![socket bindToAddress:@"0.0.0.0" port:67 error:&err])
    NSLog(@"Error: unable to bind (%@)", [err localizedDescription]);
[socket enableBroadcast:YES error:&err];
[socket receiveWithTimeout:-1 tag:0]; 
```

**发送代码：**

```
[sock sendData:packetData toHost:@"255.255.255.255" port:68 withTimeout:-1 tag:0]; 
```

我确信一定有办法做到这一点，但这是我的第一个 OS X 程序，我正在努力掌握我的谷歌搜索礼仪以适应框架:)

**更新**

今晚我弄乱了我的代码，并检查了我调用它时 AsyncUdpSocket 正在做什么。基本上我有以下情况；如果我打电话`bindToAddress`并提供`10.0.0.1`（分配给我的 ETH NIC 的地址），那么我既不会收到任何数据包，也不能发送它们。但是，如果我传入`nil`该方法，那么我可以发送一条消息并接收广播 - 缺点是发送通过我的 WIFI NIC（默认路由）发出

在后台 -库在提供 nil 值时使用 IFADDR_ANY`AsyncUdpSocket`调用，或者如果提供了 10.0.0.1 的填充 IFADDR 结构。`CFSocketSetAddress`不会引发任何错误，因此应该可以正常工作。

有任何想法吗？我要上墙，只想解决这个问题。我真的很喜欢图书馆的异步性质，所以我不想把它扔掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:29:41.667

我认为你必须

1.  获取您机器上所有网络接口的列表，
2.  对于每个接口，创建一个套接字并将其绑定到接口地址。
3.  在所有套接字上发送/接收，每个接口一个。

第 1 部分可以通过`getifaddrs()`（在终端中键入“man getifaddrs”）完成。不知道CoreFoundation中是否也有比较好用的功能。

# sencha-touch-2 - Ext.device.Camera.capture 不接受宽度和高度和质量

> ID：12804735
> 
> 赞同：2
> 
> 时间：2012-10-09T16:50:17.040
> 
> 标签：sencha-touch-2

所以我一直在使用 Sencha Touch 2 创建一个可以拍照的应用程序。照片制作完成后，用户可以将图片提交到接受 base64 作为字符串的服务器，然后将其转换为实际的 jpg 图像。我面临的问题是：无论我为捕获功能提供什么参数，发送到服务器的照片始终是一张非常小的图片：160x120。

我正在使用的代码：

```
var button = Ext.create('Ext.Button', {
    text: 'Neem Foto',  cls: 'photowapp-button-action', 
    handler: function(){
    Ext.device.Camera.capture({

        source: 'camera',
        config: {
          scope: this,
          destination: 'data',
          encoding: 'jpg',
          width: 1000,
          height: 600
        },
        success: function(data) {

            base64 = data;

            var sendbutton = Ext.create('Ext.Button',{
              text: 'Verstuur', cls : 'photowapp-button-send', 
              handler : function() {
                panel.getParent().setMasked({
                                      xtype: 'loadmask',
                                      message : 'Foto versturen..'

                                  });
                Ext.Ajax.request({
                  url: 'http://fotoupload.mooieventjes.nl/v2/upload/test',
                  method: 'POST',
                  params: {
                    image : base64
                  },
                  callback : function(response) {
                     panel.getParent().unmask();
                  }
                });

              }
            });

        main.add(sendbutton);
        },

    }); 
```

有人知道为什么捕获函数不接受我的参数吗？

# twitter-bootstrap - 引导水平表单“控制标签”不使用响应式样式

> ID：12804741
> 
> 赞同：5
> 
> 时间：2012-10-09T16:50:34.367
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

我在 Bootstrap 2 中使用“form-horizo​​ntal”类，但我的标签似乎没有使用响应式样式。这是它的样子：

![在此处输入图像描述](../Images/6f0f30d81f691f133fe904f21e77393e.png)

当我检查它时，它的标签上特别有“宽度：160px”，这是常规的引导设置，但响应式样式只有“宽度：自动”。

我该部分的 HTML 如下所示：

```
<form id="addproject" class="form-horizontal">
    <div class="control-group">
        <label for="title" class="control-label">Title</label>
        <div class="controls">
            <input type="text" name="title" id="title" />
        </div>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:54:12.560

.control-label 仅在 responsive.css 中为 (max-width: 480px) 指定。你试过缩小宽度吗？当我使用表单时，它们在 480 像素之前看起来像您的示例，此时标签移动到输入字段上方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T15:52:37.547

`bootstrap.css`必须在文件之前加载`bootstrap-responsive.css`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:06:26.973

如果您想在添加课程时进行更改

```
<input type="text" name="title" id="title" class="span3" /> 
```

另一种解决方案是直接指定样式ID宽度：auto

```
#title {
    width_auto;
} 
```

请记住，您的新样式应该在引导 css 之后

# iframe - Selenium-PHPUnit 访问 IFrame 中的元素时出错

> ID：12804744
> 
> 赞同：2
> 
> 时间：2012-10-09T16:50:42.227
> 
> 标签：iframe, selenium, phpunit

我需要一些关于 selenium-phpunit 实现的建议。我正在使用 selenium RC 和 phpunit 与 php-webdriver-bindings 连接 phpunit 和 selenium 以执行一些自动化测试任务。

当我尝试访问 iframe 中存在的元素时，问题就来了。正常的 getElementBy(LocatorStrategy::id,'@requiredelement') 不起作用，因为它在使用 "phpunit filename.php" 运行代码时会给出 "NoSuchElementException" 。

从我在一些问答中看到的内容来看，有一些实现可以在 java、c#、python 中的 iframe 的实现过程中更改窗口。不确定这些实现是否适用于 php。

我在带有 phpunit 3.7 和 include_file "webdriver.php" 的 Ubuntu 12.04 上运行，它是 php-webdriver-bindings (http://code.google.com/p/php-webdriver-bindings/) 的相关函数。未检测到 iframe 中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:53:30.950

尝试使用它：

```
$this->selectFrame("<xpath to get iframe>>"); // for example: //*[@id='iframe']
$this->assertElementPresent("<xpath to get to element in frame>"); 
```

一分钟前已经破解了-它有效=）

# python - 使用 Jython 时访问最新的 robotsframework python 库

> ID：12804749
> 
> 赞同：1
> 
> 时间：2012-10-09T16:51:24.427
> 
> 标签：python, maven, jython, robotframework

我正在使用[robotframework-maven-plugin](http://code.google.com/p/robotframework-maven-plugin/)，它使用 Jython version=2.5.1 来运行我的测试用例。我的问题是，当我尝试使用不同的机器人框架库时，比如[robotsframework-requests](https://github.com/bulkan/robotframework-requests)，我会遇到导入错误，因为**我相信 Jython 版本=2.5.1 没有**所需的最新 Python 库（Python 版本 >= 2.6）。我知道这一点，因为当我使用我安装的 python 版本时会运行测试，但在我使用时不会：

*   Maven 机器人框架：运行命令或
*   jybot 命令。

我也想使用 Curl 但 Jython version=2.5.1 再次没有我需要的 python 库。我已经尝试过处理所需的文件，但这似乎是错误的解决方案并且非常耗时。似乎我被困住了，因为我需要 maven robotframework 并且它使用 Jython 来运行测试，所以 Robotframework Jython 有没有办法拥有最新的 Python 库，或者有更好的方法吗？

# crystal-reports-xi - 从应用程序打印错误图表的水晶报表

> ID：12804751
> 
> 赞同：1
> 
> 时间：2012-10-09T16:51:28.550
> 
> 标签：crystal-reports-xi

我有一个水晶报表，我正在生成一个数值轴折线图。在图表专家的数据选项卡中，我选择了一个带有“对于每条记录”选项的日期时间字段，并在显示值字段中选择了一个 varchar 字段。这意味着在 x 轴上将绘制日期时间字段。在 y 轴上将绘制 varchar 字段。我已将报告中的 varchar 字段设为数字类型。我已将日期时间字段设为日期类型。在 Crystal 报表预览中，报表显示具有正确数据的正确绘图。

现在我已经在我的 java 应用程序中部署了报告。我正在使用 Crystal 报告 Java api 从我的应用程序生成 PDf 格式的报告。在从我的应用程序生成的 PDf 中，情节变得混乱了。y 轴（varchar）很好。但是 x 轴显示了一些随机数据。因此报告图是错误的。

我正在使用 Crystal 报表 11.8.8 版 api 打印报表。我的应用程序是使用 java 5 和 Jboss 应用程序服务器的独立桌面应用程序。

请帮忙。

# embedded - 路由器使用什么协议来确定主机名？

> ID：12804754
> 
> 赞同：4
> 
> 时间：2012-10-09T16:51:54.940
> 
> 标签：embedded, ip, nameservers

我正在编写具有 LAN 的嵌入式设备（at91sam7x，使用 FreeRTOS 和 lwIP）。当它出现在路由器的设备列表中时，它没有名称。我怎样才能提供一个？路由器使用什么协议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:50:57.017

DHCP 可以将请求计算机的名称提供给服务器，然后服务器可以根据它给出的 IP 地址记录该名称。许多（大多数？）独立的路由器/WiFi盒子会这样做，如果没有，DD-WRT或OpenWRT会这样做。

请注意，请求计算机必须在 DHCP 请求中发送其主机名，这是一个可选的操作，才能正常工作。我不知道 FreeRTOS 是否这样做，但即使它不是一个选项，您当然也可以更新它来这样做。

一些 DHCP 系统（如 Linux DHCP 服务器）还能够与支持动态更新的 DNS 服务器（如 Linux “bind”）进行通信，以将 host->ip 映射表推送给它，从而使映射在任何设备上都可用使用该 DNS 服务器进行查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:18:49.870

域名系统 :)

此设备的主机名应在您的 DNS 服务器上注册。这可能是您的路由器，否则我假设您还没有路由器。

在这种情况下，您可以例如在您的网络中设置一个绑定服务器。然后，每个其他设备必须将此服务器用作主 DNS 服务器。更舒适的解决方案是（也）设置一个 DHCP 服务器，然后告诉其客户端 DNS 服务器的 IP。事实上，您的路由器可能集成了 DHCP，并允许您指定自定义 DNS 服务器。

# jquery - 关闭所有其他窗口并保留当前信息框谷歌地图

> ID：12804768
> 
> 赞同：2
> 
> 时间：2012-10-09T16:52:34.020
> 
> 标签：jquery, maps, infobox

对不起，我的英语，我说西班牙语，

我的问题是我怎么能只单击一个信息框并关闭其他信息框，如果您选择不同的信息框，它将打开并关闭其他信息框。

这意味着当您单击一个时，它是唯一打开的

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
<script type="text/javascript">
    function initialize() {
        var secheltLoc = new google.maps.LatLng(49.47216, -123.76307),
             markers,
                myMapOptions = {
                 zoom: 13,
                center: secheltLoc,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            },
            map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

        function initMarkers(map, markerData) {
            var newMarkers = [],
                marker;

            for(var i=0; i<markerData.length; i++) {
                marker = new google.maps.Marker({
                    map: map,
                    draggable: true,
                    position: markerData[i].latLng,
                    visible: true
                }),
                boxText = document.createElement("div"),
                infoboxOptions = {
                     content: boxText,
                    disableAutoPan: false,
                    maxWidth: 0,
                    pixelOffset: new google.maps.Size(-60, -180),
                    zIndex: null,
                    boxStyle: {
                        background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat",
                        opacity: 0.75,
                        width: "280px"
                    },
                    closeBoxMargin: "0",
                    closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
                    infoBoxClearance: new google.maps.Size(1, 1),
                    isHidden: false,
                    pane: "floatPane",
                    enableEventPropagation: false
                };

                newMarkers.push(marker);
                boxText.style.cssText = "";
                boxText.innerHTML = "<div class='mapoverlay'><h5><a href=''>" + markerData[i].address + "</a></h5><p>" + markerData[i].state + "<br /><a href=''>more info</a> <span class='orange'>|</span> <a href=''>get directions</a></p></div>";
                newMarkers[i].infobox = new InfoBox(infoboxOptions);
                newMarkers[i].infobox.open(map, marker);
                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        newMarkers[i].infobox.open(map, this);
                        map.panTo(markerData[i].latLng);
                    }
                })(marker, i));
            }

            return newMarkers;
        }

        markers = initMarkers(map, [
            { latLng: new google.maps.LatLng(42.59538, -114.45641), address: "TWIN FALLS", state: "1921 Blue Lakes Blvd. North <br />208-734-4833" },
            { latLng: new google.maps.LatLng(49.47420, -123.75703), address: "TWIN FALLS", state: "1921 Blue Lakes Blvd. North <br />208-734-4833" },
            { latLng: new google.maps.LatLng(49.47530, -123.78040), address: "TWIN FALLS", state: "1921 Blue Lakes Blvd. North <br />208-734-4833" }
        ]);
    }
</script>
<div id="map_canvas" style="width: 670px;height: 465px;"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:05:19.190

创建标记后，添加以下内容

```
// add a click listener to the marker
google.maps.event.addListener(marker, 'click', function() {
    // reference clicked marker
    var curMarker =  this;
    // loop through all markers
    $.each(markers, function(index, marker) {
        // if marker is not the clicked marker, close the marker
        if(marker !== curMarker) {
            marker.infobox.close();
        }
    });
  }); 
```

我在这里创建了一个小提琴示例[http://jsfiddle.net/pimlinders/rjmg8/4/](http://jsfiddle.net/pimlinders/rjmg8/4/)

# yesod - 无法连接到yesod服务器

> ID：12804772
> 
> 赞同：0
> 
> 时间：2012-10-09T16:52:40.650
> 
> 标签：yesod

我按照[本](http://www.yesodweb.com/book/basics)教程进行操作，并在 Windows 8、Windows 7 的全新安装和 Ubuntu 上进行了尝试（都在同一台计算机和路由器上）。它适用于 Ubuntu，但浏览器无法使用 Windows 7 和 Windows 8 连接到 localhost:3000（或我在代码中指定的任何端口）。但是，在 localhost:3000 上连接到 ruby​​ on rails 确实适用于 Windows 7 和Windows 8。到目前为止，我已经使用了 hosts 文件、以管理员身份运行、使用 ghc、使用 yesod devel、防火墙等等。没有任何效果。考虑到这些限制，我假设它是 yesod 中的一个错误，但也许有一个 hack 围绕它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:25:25.180

我相信几天来 Warp on Hackage 版本存在一个错误，导致它无法在 Windows 上运行。任何更新版本的 Warp 都应该可以正常工作。

# git - Git如何恢复旧的提交

> ID：12804775
> 
> 赞同：1
> 
> 时间：2012-10-09T16:53:06.850
> 
> 标签：git, commit, restore

我需要查看我几周前所做的提交，例如当我做的时候

```
> git log --oneline -10
b45e80d ten
711aa9c nine
166dbfa eight
26abb54 seven
ddd6bb6 siz
54430c3 five
ca2d76f four
81ccc8c three
d362fbc two
7d43aba one 
```

我需要**暂时**恢复我的网站以说明它是在我完成此提交之后`81ccc8c three`

我该怎么做？

* * *

还好我在尝试之前将 repo 推送到了 bitbucket

```
git revert 81ccc8c 
```

并且我的文件没有在项目文件夹中更新，但是当我这样做时它显示了一堆更改，`git status`并且不会让我`revert`回到任何其他提交。

我该怎么办才回去`b45e80d ten`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:56:40.353

您想*签*出该提交：

```
git checkout 81ccc8c 
```

这将更新您的目录以反映该提交的内容。您可能必须先存储更改。之后，您将处于[分离的头部状态](https://stackoverflow.com/questions/9041156/how-to-recover-commit-from-detached-head-state)，并且您应该避免进行任何提交，除非您将某个分支与当前提交相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:56:53.453

您可以使用结帐：

```
git checkout 81ccc8c 
```

这将使您离开当前的分支，并将您置于您用作结帐参数的提交状态。要返回您的分支，只需检查您所在的分支（例如 master）：

```
git checkout master 
```

您不想使用还原。这应用了一个新的提交，该提交*撤消*了您作为参数传递的提交，以恢复这不是您想要的。要撤消意外还原的影响，您应该重置回您的“十”提交：`git reset --hard b45e80d`。

# css - 跨浏览器字体宽度。适用于 IE 和 Chrome，但不适用于我的移动浏览器 (Galaxy S2)

> ID：12804777
> 
> 赞同：1
> 
> 时间：2012-10-09T16:53:13.147
> 
> 标签：css, mobile, fonts, size, width

帮助！此框的大小与 IE 和 Chrome 上 100% 缩放时的文本长度完全相同。但是，当在我的手机上查看时，该框超出了文本的长度。有可能解决这个问题吗？

```
<style type="text/css">
#box{
width:375px;
background:blue;
font-size:16px;
font-family:Courier New, Courier, monospace;
}

#textbox{
background:pink;
font-size:16px;
font-family:Courier New, Courier, monospace;
}
</style>

<html>
<head>
<div id="box">Box</div>
<div id="textbox">|1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ|</div>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:11:23.937

首先，浏览器会以不同的方式解释字体宽度。依靠字体的宽度并不理想。

相反，如果您希望这些框匹配相同的宽度，请`<div>`在它们周围环绕并设置它。

```
<div class="wrapper">
<div id="box">Box</div>
<div id="textbox">|1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ|</div>
</div> 
```

您发布的代码还有其他一些问题。

1.  您必须将嵌入的样式放在 head 标签内。
2.  你绝不能在`<html>`标签前放任何东西，除了`<!doctype>`
3.  永远不要把`<div>`' 放在脑袋里。他们只属于`<body>`

`<head>`用于初始化数据。`<body>`用于显示数据。

# jquery - 如何防止 Eric Hynds Multiselect Widget 取消选中所有/选中所有功能而不进行猴子操作？

> ID：12804778
> 
> 赞同：2
> 
> 时间：2012-10-09T16:53:17.297
> 
> 标签：jquery, widget, multi-select

我正在使用自动完成和 trackpadscroll 小部件来显示一个 MultiSelect 元素，即使我使用单个文本标题选项并在稍后附加链接以检查所有并取消选中所有，它总是选择（取消选中或检查所有节点) 即使它们不可见。有什么办法绕过这个吗？

我尝试了以下方法，但似乎不起作用：

//只是代码的一部分，特别是来自 Eric Hynds 插件的一个 MultiSelect 小部件 ( **http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/** )

```
 var o1= $('select#select1').multiselect('widget');

       header: "Contacts filtered and available for tag assignment<span style='display:inner-block; float:right; margin-top:0.5em;'> Tag label: <b><?=$tag_label?></span>",

            checkAll:function(event, ui){
                    event.preventDefault();

                    o1.find("label").each(function(){  
                    var labelx = $(this).hasClass('x');

                    if( $(this).find(':checkbox').is(":not(':checked')") && $(labelx).is(':visible') )
                        {
                        $(this).click();
                        }

                 }) 
```

* * *

**编辑 11 月 20 日**：我不认为 Uncheck all 会带来任何麻烦，毕竟即使它取消选中所有（因为最初我没有渲染它们..基本上我正在查看一个数据库并检查一个联系人是否被标记为来自使用 Ivan Bozhanov 的 jstree 插件创建的标签树的标签）问题主要出在 check all 钩子上（它标记为已检查所有 li 元素，即使它们在过滤搜索中不可见......这会导致它们错误地更新它们使用后来的 AJAX 处理脚本），因为我已经修改了代码库，但它与该 Web 项目的另一部分共享。在这个阶段，客户决定暂停此功能，但需要在下一个版本中对其进行增强。也就是说，这是一个经过良好测试的界面错误。

最初将在右侧显示一个 Eric Hynds 小部件（经过重新设计，不再是下拉列表，而只是一个列表）。在左侧，应该只显示一个输入文本字段。当用户在那里输入内容时，它会调用一个 jQuery UI 自动完成实现，该实现从数据库中请求通过用户的名字、姓氏、电子邮件、域电子邮件地址以及其中一些通过 AJAX 的组合找到的联系人。

当它返回时，它会在左侧的 Eric Hynds 小部件上显示结果列表。当用户点击“检查全部”时，它应该只标记那些可见的，因为这些是搜索要添加到右手选择的联系人的结果。这是通过在 Eric Hynds 插件上执行一些钩子和绑定来完成的。所以我们有它们的两个实例，因此引用 select1.. 我们从一个转移到另一个选择下拉列表，然后在用户点击时重新初始化

[ **11 月 25 日更新**] 所以这是一个实时标签分配工具，它是我的客户要求的核心功能。请帮忙！我提供了一些我自己的声誉，甚至没有太多，因为我真的很想从其他开发人员的角度来了解什么是可行的，如果有必要我可以提供更多信息；）

稍后，我将这些项目附加到 Eric Hynds 重新设计的小部件中。+（没有下拉菜单，但有另一个部分确实与它们一起使用）到该特定标题，但即使元素不可见，它仍在检查和取消选中元素（我在输入自动完成小部件时确定这一点，它加起来该标签的“x”类，它会正确更新前端和后端摘录中的所有内容，以取消选中全部并选中全部）

有什么方法可以防止它发生而无需修改多选小部件的源代码（好吧可能有点）？

它已在另一个屏幕中重新使用，并且在所有检查和取消检查的情况下都可以正常工作..

# ios - MKMapView 放大后 MKPinAnnotationView 丢失 pinColor

> ID：12804781
> 
> 赞同：1
> 
> 时间：2012-10-09T16:53:28.163
> 
> 标签：ios, mkmapview, mkannotationview

我有一个 MKMapView，其中有很多从解析器 xml 定义的注释引脚；那是我的代码：

```
-(IBAction)LoadAnnotation:(id)sender {

    RXML element ...
    RXML iterate....

    [myMap removeAnnotations:myMap.annotations];
    annotation.title = // NSString from RXML parser
    annotation.subtitle = // NSString from RXML parser
    myValue = // float value from RXML parser
    [mymap addAnnotation:annotation];
} 
```

进而

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation2 {

       MKPinAnnotationView *pinView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation2 reuseIdentifier:@"MyPin"];

        if ( myValue > 0 && myValue < 10) {
            pinView.canShowCallout = YES;
            pinView.pinColor = MKPinAnnotationColorRed;
            pinView.animatesDrop=YES;
            return pinView;
        }

        else if ( myValue > 10 && myValue < 20 ) {
        pinView.canShowCallout = YES;
        pinView.pinColor = MKPinAnnotationColorGreen;
        pinView.animatesDrop=YES;
        return pinView;
    }

        pinView.canShowCallout = YES;
        pinView.pinColor = MKPinAnnotationColorPurple;
        pinView.animatesDrop=YES;
        return pinView;
} 
```

好吧，当我的 MKMapView 被加载时，我可以看到标题注释、副标题注释和所有不同颜色的图钉。

但是，如果我在地图上滚动并放大到某个级别，然后再次缩小，所有的大头针都会变成紫色。那里发生了什么？

我也尝试在这两种方法中使用相同的“注释”（id）（而不是“注释”和“注释2”），但我没有结果。

有没有办法避免这种情况并在地图滚动和缩放后保留 pinColors？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:21:59.003

`viewForAnnotation`委托方法不一定只为每个注释调用一次，也不保证按照添加注释的顺序调用。如果您设置`showsUserLocation`为，也会调用用户位置（蓝点） `YES`。

当您缩放或平移地图时，地图视图将（再次）调用委托方法，因为注释返回到视图中。届时，您`myValue`将与地图请求查看的注释无关。

不要使用类级别的 ivar，而是将其**添加`myValue`为注释类的属性，**并在调用之前将其与`title`and一起设置：`subtitle``addAnnotation`

```
annotation.title = // NSString from RXML parser
annotation.subtitle = // NSString from RXML parser
annotation.myValue = // float value from RXML parser
^^^^^^^^^^^ 
```

然后在 中`viewForAnnotation`，使用参数中的`myValue`属性`annotation`而不是 ivar。这样，委托方法总是使用特定于它请求视图的注解的信息：

```
if ( ! [annotation isKindOfClass:[MyCustomAnnotationClass class]])
{
    return nil;  //return a default view if not your custom class
}

//cast annotation to custom class so we can get the custom property...
MyCustomAnnotationClass *myPin = (MyCustomAnnotationClass *)annotation;

//use the custom property in the annotation instead of ivar...
if (myPin.myValue > 0 && myPin.myValue < 10) {
    .... 
```

不需要将`annotation`参数名称更改为。`annotation2`

不相关，但您应该通过使用实现注释视图重用`dequeueReusableAnnotationViewWithIdentifier`（在 SDK 或 SO 上搜索）。如果有很多注释，它可以帮助提高性能。

* * *

你的`MyAnnotation`班级应该是这样的：

```
@interface MyAnnotation : NSObject <MKAnnotation> {
    float myValue;
}
@property (nonatomic, assign) CLLocationCoordinate2D coordinate; //<-- add
@property (nonatomic, copy) NSString *title;                     //<-- add
@property (nonatomic, copy) NSString *subtitle;                  //<-- add
@property (nonatomic, assign) float myValue;
@end

@implementation MyAnnotation
@synthesize coordinate; //<-- add
@synthesize title;      //<-- add
@synthesize subtitle;   //<-- add
@synthesize myValue;
@end 
```

添加注释的位置应如下所示：

```
MyAnnotation *annotation = [[MyAnnotation alloc] init];
annotation.title = someTitle;       // NSString from RXML parser
annotation.subtitle = someSubTitle; // NSString from RXML parser
annotation.myValue = someValue;     // someValue from RXML parser
[mapView addAnnotation:annotation]; 
```

以上，`someValue`是`myValue`您原来的`ViewController`.

此外，在 中`viewForAnnotation`，更改`annotation2`回`annotation`并且不要忘记放在行`MKPinAnnotationView *pinView =[[MKPinAnnotationView alloc] init...`前`MyAnnotation *myPin = ...`。

# php - 改进全文搜索 MYSQL

> ID：12804785
> 
> 赞同：0
> 
> 时间：2012-10-09T16:53:33.247
> 
> 标签：php, mysql, full-text-search

我有一个基于搜索引擎的网站，目前处于测试模式[http://www.jobportfolio.co.uk](http://www.jobportfolio.co.uk)。该站点有一个工作表，其中包含以下字段（job_company、job_title、job_description、job_location），除了作为文本字段的描述之外，所有字段都是 Var。所有字段都被索引为全文。

我目前的方法是根据标题、位置和公司进行搜索。这似乎工作正常，但是我想通过添加描述字段来改进搜索结果。然而，问题是当我添加描述字段时，搜索似乎需要更长的时间。即使使用仅包含 12000 行的表，它似乎也很慢。

我正在使用以下 MATCH AGAINST 查询来选择结果

```
MATCH(job_posts.job_title, job_company) AGAINST('".$this->mysqli_escape($job_title)."' IN BOOLEAN MODE) 
```

有人对如何提高搜索性能有任何意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:57:59.493

嗯，我的第一个想法是从“外部”来解决这个问题：拥有一个使用多个不同字段的搜索表单是否可以接受？如果您愿意有 4 个搜索字符串，每个搜索字符串都在不同的列中搜索，我怀疑这会自行减少负载。例如：

当有人在“位置”字段中键入时，您将向查询中添加一个子句，该子句仅将搜索到的文本与位置字段相匹配。

当有人在“描述”字段中键入内容时，您将向查询中添加一个子句，将搜索文本与描述字段相匹配。否则，您不会与描述字段匹配任何内容。

如果您不需要将文本输入到一个地方并为其搜索“所有可能的字段”，则此解决方案将防止额外的缓慢，直到有人特别想在描述文本中进行搜索。因此查询速度会根据搜索者的需求而有所不同。

# javascript - Javascript 成员变量未定义

> ID：12804791
> 
> 赞同：3
> 
> 时间：2012-10-09T16:53:53.240
> 
> 标签：javascript, jquery, variables

```
function Class() {
    var self=this;
    self.searchfield=$('#search');
    self.resultbox=$('#searchresults');

    self.onSearchFieldChanged=function() {
        console.log("F: "+self.searchfield);
        console.log("R: "+self.resultbox);
    }
    self.searchfield.live("keyup",self.onSearchFieldChanged);
}
var INSTANCE=null;
Class.init=function() {
   INSTANCE=new Class();
}
$(document).bind("globalsloaded", Class.init); 
```

只要我在#search 输入中输入内容，控制台上的输出如下：

```
F: undefined
R: undefined 
```

那么为什么这两个变量是未定义的呢？它们在范围内并且应该包含相应的 jQuery 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:38:50.397

经过 5 天的工作，我发现了问题：JQueryMobile

会发生什么：

1.  `deviceready`phonegap 事件
2.  `domready`事件
3.  我的初始化被称为
4.  JQM 提取`input#search`元素重新插入，周围有一些样式 div
5.  我在 init 中保存的 div 不再有效，因为指的是“旧”dom 元素

现在我正在`pageinit`为 JQM 进行初始化。没有问题了。

# sql - 在查询中选择文本字段中的条件

> ID：12804792
> 
> 赞同：0
> 
> 时间：2012-10-09T16:53:58.567
> 
> 标签：sql, ms-access

我在 ms-access 中有一个文本字段，其中包含值

54551,54550

现在我写一个查询：

```
SELECT * from [work_log1] w where w.[activity_id] in (forms![bai multiple]!text1); 
```

当文本字段的值为“54551”时效果很好

但当文本字段的值为“54551,54550”时不起作用

可以做的任何事情，以便将值保存在某个地方可以工作。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:58:02.107

我认为发生这种情况是因为“54551,54550”值被视为单个字符串，因此它试图完全匹配它而不是“54551”和“54550”作为两个单独的条目

# python - Django - 如何按字段中的字符数对查询集进行排序

> ID：12804801
> 
> 赞同：20
> 
> 时间：2012-10-09T16:54:57.620
> 
> 标签：python, django, django-queryset

我的模型：

```
name = models.CharField(max_length=255) 
```

我尝试对查询集进行排序。我只是想这个：

```
obj = MyModel.objects.all().sort_by(-len(name)) #??? 
```

任何的想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-10-06T00:19:42.897

新的热点（从 Django 1.8 开始）是[Length()](https://docs.djangoproject.com/en/dev/ref/models/database-functions/#length)

```
from django.db.models.functions import Length
obj = MyModel.objects.all().order_by(Length('name').asc()) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-09T16:59:54.853

您可能必须在 python 中对其进行排序..

`sorted(MyModel.objects.all(),key=lambda o:len(o.name),reverse=True)`

或者我撒了谎（快速谷歌搜索发现以下内容）

```
MyModel.objects.extra(select={'length':'Length(name)'}).order_by('length') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-09T17:00:19.347

您当然可以使用 Python 对结果进行排序`sorted`，但这并不理想。相反，你可以试试这个：

```
MyModel.objects.extra(select={'length':'Length(name)'}).order_by('length') 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-09T17:00:28.190

您需要使用`extra`参数来传递 SQL 函数：

```
obj = MyModel.objects.all().extra(order_by=['LENGTH(`name`)']) 
```

请注意，这是特定于 db 的：MySQL 使用`LENGTH`，其他人可能使用`LEN`.

# udp - 合并UDP数据包？

> ID：12804812
> 
> 赞同：1
> 
> 时间：2012-10-09T16:55:52.117
> 
> 标签：udp, packet-loss

将多个 UDP 数据包组合成一个而不是一个接一个地发送它们有什么好处？我知道如果大包损坏了，那么我会丢失所有这些，但是将它们全部一起发送是否可能有一些好处？例如大的丢失的机会较低？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:20:45.413

> 将多个 UDP 数据包组合成一个而不是一个接一个地发送它们有什么好处？

可以节省每个数据报 8 个字节的 UDP 标头，从而减少通过线路发送的数据量。只要确保您发送的内容不超过 MTU 没有 IP 和 UDP 标头大小，以避免在 IP 层上出现碎片。

此外，标准 POSIX 套接字 API 需要一个`send/sendto/sendmsg()`系统调用来发送或接收一个数据报，因此通过发送更少的数据报，一个系统调用更少，从而降低了整体延迟（每次调用大约几微秒）。从 3.0 开始的 Linux 内核提供了在一个系统调用中发送和接收多个数据报的功能[`sendmsg()`](http://man7.org/linux/man-pages/man2/sendmmsg.2.html)。[`recvmmsg()`](http://man7.org/linux/man-pages/man2/recvmmsg.2.html)

> 我知道如果大数据包损坏了，那么我会丢失所有的

真的。但是，如果协议根本无法处理 UDP 数据报丢失，那可能就没那么重要了——只要一个数据报丢失，它就会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T14:50:25.640

这对于数据包大小很小（小于 100 字节）的情况很重要。IP/UDP 报头至少为 28 个字节。

想象一下，您有到服务器的流式连接，每个数据包包含 50 个字节，您的软件以每秒 1000 个数据包的速率发送数据包。

实际有效负载是`1000 * 50 bytes = 50000 bytes.`Headers 开销`1000 * 28 = 28000 bytes`Total bytes ：`50000 + 28000 = 87000 ==> 87 KBps`

想象一下，您可以将每 3 个 UDP 数据包合并为一个数据包：

标头开销`1000 / 3 * 28 = 9333`总字节数：`50000 + 9333 ===> 60 KBps`

这 - 在某些应用程序中 - 节省了很大一部分带宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:43:09.387

通常，网络通道将受到每秒可发送数据包速率的限制。因此，如果您想每秒发送数百万条消息，您通常希望组合成较少数量的数据包来运行而不会出现重大数据包丢失。

概括地说，Windows 不喜欢 UDP 每秒超过 10,000 个数据包，但您可以用大型 MTU 数据包使千兆网络饱和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:58:42.827

这将由发送应用程序自行决定。

请注意，您的大数据包受底层网络的 MTU 限制。例如，UDP 数据包的理论大小是 64k，但以太网帧只有 ~1500 字节。所以我怀疑这不是一个实用的功能。

# c# - Metro 风格 RichTextBox 控件启用 URL 检测？

> ID：12804817
> 
> 赞同：0
> 
> 时间：2012-10-09T16:56:29.583
> 
> 标签：c#, windows-8, microsoft-metro, richtextbox, lynx

# 问题

在 .NET Framework 中，只需将属性设置为 true 并挂钩到链接单击事件。但是我将如何使用有限的 .NET 框架在 WinRT 中执行此操作。

# 为什么这是必要的？

好吧，我想创建一个基于文本的 Web 浏览器（如 Lynx，但带有 GUI），它是为那些不想使用花哨的 Web 浏览器或只需要可访问性的人设计的。一些功能是显示 URL，例如“http://stackoverflow.com/”到一个 URL，我在其中连接了链接单击事件，然后在程序中重定向并显示文本。

# 结论

请求 HTML 并将其转换为文本很简单，而且我已经完成并且工作正常。所以我唯一需要的是 Stack Overflow 社区。RichTextBox 是否支持超链接？怎么办？不需要代码示例，但指针就可以了。我已经进行了研究，但 Metro Style 应用程序刚刚从烤箱中取出；那里没有很多文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:45:20.233

执行此操作的 Windows-8 App 风格的方法是将按钮放在`InlineUIContainer`文本块内。

有关一些相关讨论，请参见[此处](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1d162d99-84a9-48f0-a8ef-dd770ced90c8)。

# excel - Excel VBA：如何选择所有图表并将其大小更改为不同但统一的大小？

> ID：12804818
> 
> 赞同：0
> 
> 时间：2012-10-09T16:56:28.850
> 
> 标签：excel, vba, charts, formatting

问题：我有一个包含大约 250 个图表的大文件，我一直在用如下代码格式化图表=

```
 With chrt
            .SetSourceData Source:=rChartData.Offset(0, 1).Resize(, 3)

            .SetElement msoElementChartTitleCenteredOverlay
            .ChartTitle.Caption = cl.Value

            .PlotArea.Height = .PlotArea.Height - .ChartTitle.Height
            .PlotArea.Top = .PlotArea.Top + .ChartTitle.Height

            .SeriesCollection(1).Name = "=""Measured"""
            .SeriesCollection(2).Name = "=""Modeled"""

            .SeriesCollection(1).MarkerStyle = -4142
            .SeriesCollection(2).MarkerStyle = -4142

            .Axes(xlCategory).MinimumScale = 14650
            .Axes(xlCategory).MaximumScale = 40000
            .Axes(xlCategory).MajorUnit = 1800
            .Axes(xlCategory).MinorUnitIsAuto = True

            .SetElement (msoElementPrimaryCategoryAxisTitleAdjacentToAxis)
                .Axes(xlCategory).AxisTitle.Text = "Stress Periods"
            .SetElement (msoElementPrimaryValueAxisTitleRotated)
                .Axes(xlValue, xlPrimary).AxisTitle.Text = "Cubic Feet/Sec"

       End With 
```

然后它继续它的快乐循环以完成其他 249 个图表。但我还需要它们都大于 Excel 给我的默认大小。将我的图表扩展到更大尺寸（例如从 A 到 B）的正确代码术语是什么？

![在此处输入图像描述](../Images/9d4c2a737ab8d8005ea4fb1d29666364.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:12:06.693

我找到了要添加到伞形的属性 With 声明：

```
 .ChartArea.Width = [desired width, IN POINTS, of the object] 
```

# c# - 我正在为我的项目寻找报告解决方案

> ID：12804819
> 
> 赞同：0
> 
> 时间：2012-10-09T16:56:30.807
> 
> 标签：c#, .net, report, reporting

我的 sql 数据库只包含如下一对多的关系：

Parent --> Child 1 --> Child 2 --> Child 3 每个父数据可能有 0 个或多个子数据。

我尝试了报表设计器 3.0，但它没有列出上述案例中没有“子 3”数据的数据。我找不到任何资源来解决这个问题。

我不需要任何效果或 smt。我想要的是一个非常简单的报告工具，它能够查询关系 sql 数据库，像这样列出它们：

```
Parent.Name[1]

Child1.Name[1]

Child2.Name[1]

Child3.Name[1]  Child3.valuea[1]  Child3.valueb[1]
Child3.Name[2]  Child3.valuea[2]  Child3.valueb[2]
Child3.Name[3]  Child3.valuea[3]  Child3.valueb[3]

Child2.Name[2]
.
.
.
etc 
```

并导出到excel文件。首选免费应用程序，但试用版的应用程序对我也有好处。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:41:20.177

如果只针对一份报告，那么使用任何报告工具都没有意义。

我不知道该项目是如何实现的，但是请尝试查看以下选项，因为它们是专业的并且可以在企业系统中使用。

1.  带有 JSF 库的核心 java（例如 PrimeFaces）
2.  JSP
3.  I-32 表格解决方案（最简单）

# javascript - 将第一次出现的 char 替换为 *，然后将其余的替换为 ' '

> ID：12804827
> 
> 赞同：1
> 
> 时间：2012-10-09T16:57:05.997
> 
> 标签：javascript, regex

我有一个看起来像这样的句子（这是一个愚蠢的例句）：

```
I_like_to_program__. 
```

我需要一个函数让它看起来像这样：

```
I*like to program. 
```

我写了这个表达式：

```
var myExpression = new RegExp("\\_", "g");
return myString.replace(myExpression, " ").trim(); 
```

那将输出：`"I like to program."`--我很接近。我只需要将第一个空格替换为 * 即可使其看起来像`I*like to program.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:59:17.507

```
mystring.replace("_", "*")
        .replace(/_/g, " "); 
```

或者您可以像这样完全避免使用正则表达式：

```
mystring.replace("_", "*")
        .split("_")
        .join(" "); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T17:00:07.680

如果不添加`g`，javascript 的替换默认为只有一个替换：

```
return myString.replace(/\__/, "").replace(/\_/, "*").replace(/\_/g, " "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:58:57.540

我能想到的最简单的事情是分两步完成——用*替换第一个实例，然后再次迭代并用“”全局替换

```
var myString = "I_LIKE_TO_PROGRAM";
var myExpression = new RegExp("\_");
myString = myString.replace(myExpression, "*").trim();
var newExpression = new RegExp("\_", "g");
alert(myString.replace(newExpression, " ").trim()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T17:08:51.773

```
var myString = "I_like_to_program__.";
var result =  myString.replace(/\_/g, " ").replace("  ", "").replace(" ", '*');
alert(result); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T17:59:06.683

我首先将所有_替换为“”，在我们这样做之后我们将拥有程序。因此，在第二次替换中，我将删除（程序。）这个空间，在第三次替换中，我将 * 放在首位。

**演示**

[http://jsfiddle.net/saorabhkr/QV9qH/](http://jsfiddle.net/saorabhkr/QV9qH/)

# android - android滚动和滑动难度

> ID：12804834
> 
> 赞同：0
> 
> 时间：2012-10-09T16:57:38.180
> 
> 标签：android, jquery-mobile, scroll, swipe

晚上好，我在滚动和滑动方面遇到了 android 4.1 的问题。（我正在使用jquery mobile）

我有一个列表，您只需向右滑动即可删除其中的项目。说到 iOS，一切都非常清晰。但似乎 android 无法处理同一元素上的滚动和滑动。您只能以 90° 角滚动，但将其更改为 ~85° 会使滚动混乱。

当我删除滑动事件时，一切正常。有没有已知的解决方法？

问候多米尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:33:05.480

$.event.special.swipe.scrollSupressionThreshold 就是这个问题的答案。

当项目上有滑动事件时，JqueryMobiel 会抑制滚动。只需根据自己的喜好修改上面的值，就可以了！

```
$.event.special.swipe.scrollSupressionThreshold = "30px"; 
```

30px 不是正确的参数，它是 30（没有 px），但是 30px 解决了我的问题。

# javascript - 使用主复选框时从 Flexigrid 抓取单元格文本会导致问题

> ID：12804838
> 
> 赞同：0
> 
> 时间：2012-10-09T16:58:15.223
> 
> 标签：javascript, jquery, asp.net, flexigrid

我有一个函数可以从选中复选框的 flexigrid 中获取单元格文本值。但我有一个问题。当我单击主复选框（不包含任何文本值，因为它与列标题一起显示）时，它会因为主复选框而出错。

这是我得到的错误：`Uncaught Error: Syntax error, unrecognized expression: #`

这是我从 Flexigrid 中获取事件日期的函数：

```
function getSelectedCopyDates() {
            var arr = new Array();
                //for every row that has a checked checkbox
                $("tr").has(".noteCheckBox:checked").each(function (i) {
                        //push the value of column(FName, LName) into the array 
                        arr.push($("#" + this.id + "> td[abbr='EventDate'] > div").text());
                    }
                });
            return arr;

    } 
```

这是我的 flexigrid 的片段：

```
 $('#viewNotesGrid').flexigrid({
            url: url,
            dataType: 'json',
            method: 'get',
            colModel: [
                { display: '<input type="checkbox" class="noteCheckBox" id="checkAllNotes" />', name: 'checkBox', width: 20, sortable: false, align: 'center', process: showDescription },
                { display: 'File ID', name: 'FileID', width: 70, sortable: true, align: 'center', process: showDescription, hide: true }, 
```

这是它的样子： ![在此处输入图像描述](../Images/458333d62cf1c9aa106526409dbf4ee1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:24:52.130

使用**$("tr:has(:not('th'))")**选择器选择没有主复选框行的 tr

```
 $("tr:has(:not('th'))").has(".noteCheckBox:checked").each(function (i) {
          if ($("tr").has(".checkAllNotes:checked")){
                    arr.push($("#" + this.id + "> td[abbr='EventDate'] > div").text());
                }
            }); 
```

# php - 在 PHP 中将动态表导出到 Excel

> ID：12804839
> 
> 赞同：0
> 
> 时间：2012-10-09T16:58:20.660
> 
> 标签：php, dynamic, export-to-excel

我有一个包含未知数量的列的大表，我希望能够通过下载链接将其导出到 MS Excel。我以前做过这个，没有任何问题。但是，那时我有一个已知的数字或列。我目前能够成功地将数据发送到 Excel 文件。表格标题正确显示在表格顶部。问题出在数据上。它不是将整个页面中的数据放在正确的列中，而是将它们全部放在第一列中。这是我的代码的一部分：

```
while($row = mysql_fetch_row($result))          
{
    // Loops through the results
    for($i=0; $i < $num_cols; $i++)
    {
        // Prints out the data in a table cell
        echo("<Td class='data'>$row[$i]</Td>");
        $FileRecord = Array($row[$i]);
        $exportFile->Export_Record($FileRecord);
    }
} 
```

通常我会这样做`$FileRecord = Array($row[0], $row[1], ..., $row[n])`，并且一切都很好，但是如果我不知道有多少列，我不确定该怎么做。任何帮助都会很棒！

我没有使用任何库。`$exportFile`来自我正在使用的功能。它看起来像这样：

```
class CSV_File {
private $out='';
private $name='';
private $column_names="";
private $count = 0;

//Creates the file name and the header columns
function __Construct($buf, $names) {
    $GLOBALS["name"] = $buf;
    $GLOBALS["column_names"] = ($names."\n");
}

public function Export_Record($array) {
    if (!is_array($array))
        throw new Exception("NOT AN ARRAY");
    for ($i = 0; $i <= count($array); $i++) {
        $GLOBALS["out"] .= $array[$i];

        if ($i < count($array)-1) {
            $GLOBALS["out"] .= ",";
        }
    }
    $GLOBALS["out"] .= "\n";
    $GLOBALS["out"]++;
}

public function ExportButton($align) {
        $output = $GLOBALS["out"];
        $filename = $GLOBALS["name"];
        $columns = $GLOBALS["column_names"];
        if ($align == null)
            $align = "align";
        echo("  <$align><form name=\"export\" action=\"export.php\" method=\"post\">
                <button type=\"submit\" style='border: 0; background: transparent; font-size: 12px;font-weight:bold;'>
                <img src = 'images/icon_csv.png' width = '16' height ='16' alt ='Download Data'> Download</button>
                <input type=\"hidden\" value=\"$columns\" name=\"csv_hdr\">
                <input type=\"hidden\" value=\"$filename\" name=\"fileprefix\">
                <input type=\"hidden\" value=\"$output\" name=\"csv_output\">
                </form></align>");
}
} 
```

然后 export.php 看起来像这样：

```
if (isset($_POST['csv_hdr'])) 
{
$out .= $_POST['csv_hdr'];
$out .= "\n";
} 

if (isset($_POST['csv_output'])) 
{
$out .= $_POST['csv_output'];
}

if (isset($_POST['fileprefix'])) 
{
$fname .= $_POST['fileprefix'];
}

//Now we're ready to create a file. This method generates a filename based on the current date & time.
$filename = $fname."_".date("Y-m-d_H-i",time());

//Generate the CSV file header
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header("Content-disposition: filename=".$filename.".csv");

//Print the contents of out to the generated file.
print $out;

//Exit the script
exit;' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:01:38.450

那不是 Excel 表格。这是一个 html 表格，您恰好将其输入 Excel。

您的问题是您没有为要获取的每条记录开始一个新的表格行，因此所有内容都只是第一行中的一个新单元格。

你需要类似的东西

```
while($row = mysql_fetch_assoc($result)) {
   echo '<tr>';
   foreach($row as $val) {
      echo "<td>$val</td>";
   }
   echo '</tr>';
} 
```

# php - 如何允许apache发送电子邮件？

> ID：12804841
> 
> 赞同：10
> 
> 时间：2012-10-09T16:58:26.267
> 
> 标签：php, linux, apache, centos, sendmail

我有一个运行 Apache 2.2 和 PHP 5.3 的 CentOS 6.2 虚拟机，我试图通过 PHP 的 mail() 函数发送电子邮件。我可以毫无问题地从 CLI 发送电子邮件，但是当 PHP 尝试时它会失败。在 sendmail 日志中如下：

```
Oct  9 11:42:03 localhost sendmail[3080]: NOQUEUE: SYSERR(apache): can not chdir(/var/spool/clientmqueue/): Permission denied 
```

似乎 Apache 没有这样做的权限，但我不知道如何修复它。我发现了很多关于此的讨论，但没有足够具体到我可以使用的我正在做的事情。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-20T10:54:13.267

Selinux 可能会导致问题，验证运行：

```
getsebool -a | grep mail 
```

如果显示如下，则为 selinux：

```
allow_postfix_local_write_mail_spool --> off 
```

你可以禁用它，但如果你想保留它（你应该这样做，因为它提供了额外的安全层）你应该做其他事情：

```
setsebool -P httpd_can_sendmail on 
```

这将允许 httpd 发送电子邮件，就像您使用 php mail() 时一样。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-25T17:28:18.737

讨厌死掉这个，但这里没有一个解决方案对我有用。我对 SELinux 知之甚少，但我最终发现了这个问题（在 CentOS 6 上）：

```
getsebool httpd_can_sendmail 
```

这告诉我它已禁用。固定与

```
setsebool httpd_can_sendmail 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T17:49:27.793

首先，您必须检查权限是否正确。这是我系统中的以下权限

`# ls -l /usr/sbin/sendmail.sendmail` `-r-xr-sr-x root smmsp /usr/sbin/sendmail.sendmail`

`# ls -l /var/spool/clientmqueue` `drwxrwx--- smmsp smmsp /var/spool/clientmqueue`

如果您的权限或所有权错误，请使用 chown 和 chmod 进行更改。

如果上述正确，则禁用 selinux，或者如果您希望启用 selinux，请使用 chcon 设置正确的 selinux 上下文。

[http://docs.fedoraproject.org/en-US/Fedora/13/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Working_with_SELinux-SELinux_Contexts_Labeling_Files.html](http://docs.fedoraproject.org/en-US/Fedora/13/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Working_with_SELinux-SELinux_Contexts_Labeling_Files.html)

用于暂时禁用 selinux`#setenforce 0`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T17:26:30.177

您可能启用了 SELinux。

[http://selinuxproject.org/page/Main_Page](http://selinuxproject.org/page/Main_Page)

您可以通过以下方式检查 SELinux 状态：

状态

您应该会看到如下内容：

```
SELinux status:                 enabled
SELinuxfs mount:                /selinux
Current mode:                   enforcing
Mode from config file:          enforcing
Policy version:                 24
Policy from config file:        targeted 
```

您可以通过以下方式暂时关闭 SELinux：

```
echo 0 >/selinux/enforce 
```

然后重新开始

```
echo 1 >/selinux/enforce 
```

如果你做温度。关闭它，不要安装 RPM 或进行更改。我发现这可能会导致重新启用它时出现问题。

如果您想永久禁用 SELinux，请尝试：

[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Working_with_SELinux-Enabling_and_Disabling_SELinux.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Working_with_SELinux-Enabling_and_Disabling_SELinux.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-15T13:28:02.030

```
getsebool -a | grep mail
allow_postfix_local_write_mail_spool --> off
setsebool -P httpd_can_sendmail on 
```

这个命令对我有用。

# quickfix - NewOrderSingle 市价单上的必填字段缺少 35

> ID：12804843
> 
> 赞同：0
> 
> 时间：2012-10-09T16:58:34.193
> 
> 标签：quickfix, fix-protocol

不知道为什么 FIX 服务器会抛出此错误。使用 Fix.4.4，我有一个客户端生成市场订单。它被服务器接收，但它返回一个错误。

在客户端和服务器端登录成功。然后客户发送市价单：

```
Header [8=FIX.4.4 | 9=130 | 35=D | 34=92 | 49=BROKER_CLIENT | 52=20121009-00:58:44.283 | 56=BROKER_SERVER | ] Body [11=0 | 21=1 | 38=100 | 40=1 | 54=1 | 55=JNJ | 59=0 | 60=20121009-00:58:44 | ] Trailer [10=035 | ] 
```

这是从服务器的“fromApp”方法接收的。然后服务器响应：（消息 92 被拒绝：条件必填字段缺失：35）

Field35 显然在那里，看不到服务器响应错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:30:28.627

这个问题也被发布到邮件列表中。原来弗洛雷斯先生在打电话

```
std::string msgType = message.getField(FIX::FIELD::MsgType); 
```

代替

```
std::string msgType = message.getHeader().getField(FIX::FIELD::MsgType); 
```

在他的`FromApp()`电话中。

# html - 显示远程 URL

> ID：12804851
> 
> 赞同：0
> 
> 时间：2012-10-09T16:59:08.280
> 
> 标签：html

首先我必须解释一下我是网页设计的新手。

我的问题如下：

我想通过不同的 Web 服务器显示一个远程 URL。远程 URL 位于内部防火墙服务器上，我想通过在可以访问防火墙页面的远程 Web 服务器上显示单个页面来提供对单个页面的公共访问权限。我尝试过 iframe，但他们使用客户端 IP，导致页面无法显示。我对服务器（CPanel）的访问权限有限 - 请告知这怎么可能？远程 URL 将需要登录 - 不确定这是否与解决方案相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:03:36.567

您可以做的是创建一个页面，该页面使用 CURL 或 HttpWebRequest 或基于您选择的平台的任何兼容技术向防火墙页面发出请求。然后它可以修剪掉不需要的标题和其他标签，并在 div 中呈现 html，或者它可以在页面的响应中重定向整个代码。

这样，客户端不会建立连接，只有您的服务器将连接到您的防火墙服务器并从那里获取页面，然后将其返回。

这里唯一的问题是，表单 - 图像和链接对象可能无法正常工作，您可能还必须解析它们并替换相应的 url 以指向您的服务器，从而代理它。

这是一个例子

[https://proxify.net/](https://proxify.net/)

# javascript - jqPlot中的tickInterval问题

> ID：12804853
> 
> 赞同：0
> 
> 时间：2012-10-09T16:59:17.690
> 
> 标签：javascript, jquery, jqplot

我是 jqplot 的新手，但正在一个非常重要的项目中使用它。我试图让 x 轴每天都有一个“滴答”——截至目前，有多个。这是一个屏幕截图：

![在此处输入图像描述](../Images/65ebcc7ee71e0b00f48a4b9c2f825954.png)

这是代码（我还添加了一个最小值和最大值，因为[这篇文章提到](https://stackoverflow.com/questions/8467233/jqplot-dateaxis-tickinterval-not-working)了）：

```
 $(document).ready(function(){

                            var ajaxDataRenderer = function(url, plot, options) {
                                var ret = null;
                                $.ajax({
                                    async: false,
                                    url: url,
                                    type: "GET",
                                    dataType:"json",
                                    data: {metricName: ""},
                                    success: function(data) {
                                        ret = data;
                                    },
                                    error:function (xhr, ajaxOptions, thrownError){
                                        alert(xhr.responseText);
                                    }    
                                });
                                return ret;
                            };

                            //var jsonurl = "reports/reportData.json";
                            var jsonurl = "tenant/metrics/get.json";

                            var today = new Date();

                            var plot2 = $.jqplot('chart2', jsonurl,{
                                title: "",
                                dataRenderer: ajaxDataRenderer,
                                dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                axes: {
                                    xaxis: {
                                        'numberTicks' : 7,
                                        min: '2012-10-05',
                                        max: today,
                                        renderer:$.jqplot.DateAxisRenderer,
                                        rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                        tickInterval: '1 day',
                                        tickOptions:{formatString:'%Y-%#m-%#d'

                                        }
                                        //rendererOptions: {sdaTickInterval: [1, 'month']}

                                    },
                                    yaxis: {
                                        label: "MB",
                                        tickOptions:{formatString:'%d '},
                                        // Comment the next line out to allow negative values (and therefore rounded ones)
                                        min: 0
                                    }
                                }   
                            });
                        }); 
```

即使我像这样手动设置点击：

```
 $(document).ready(function(){

                            var ajaxDataRenderer = function(url, plot, options) {
                                var ret = null;
                                $.ajax({
                                    async: false,
                                    url: url,
                                    type: "GET",
                                    dataType:"json",
                                    data: {metricName: ""},
                                    success: function(data) {
                                        ret = data;
                                    },
                                    error:function (xhr, ajaxOptions, thrownError){
                                        alert(xhr.responseText);
                                    }    
                                });
                                return ret;
                            };

                            //var jsonurl = "reports/reportData.json";
                            var jsonurl = "tenant/metrics/get.json";

                            var today = new Date();

                            var plot2 = $.jqplot('chart2', jsonurl,{
                                title: "",
                                dataRenderer: ajaxDataRenderer,
                                dataRendererOptions: {unusedOptionalUrl: jsonurl},
                                axes: {
                                    xaxis: {
                                        'numberTicks' : 7,
                                        min: '2012-10-05',
                                        max: today,
                                        renderer:$.jqplot.DateAxisRenderer,
                                        rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                                        ticks: ['2012-10-05','2012-10-06','2012-10-07','2012-10-08', today],
                                        tickOptions:{formatString:'%Y-%#m-%#d'

                                        }
                                        //rendererOptions: {sdaTickInterval: [1, 'month']}

                                    },
                                    yaxis: {
                                        label: "MB",
                                        tickOptions:{formatString:'%d '},
                                        // Comment the next line out to allow negative values (and therefore rounded ones)
                                        min: 0
                                    }
                                }   
                            });
                        }); 
```

标记与其正确日期不匹配。这是一个屏幕截图： ![在此处输入图像描述](../Images/a2d9d4b4777913e0d142d4484cd3584b.png)

有没有理智的方法可以做到这一点？我希望每个 x 轴刻度只有一个日期，并且数据输入标记位于该刻度的轴上。

这真让我抓狂！请帮忙！

另外，这是我的 json

```
[[["2012-10-05 10:57:16AM", 0],["2012-10-05 11:02:14AM", 2449],["2012-10-08 08:17:47AM", 9639],["2012-10-08 08:17:53AM", 224768],["2012-10-09 07:43:19AM", 9640],["2012-10-09 07:44:01AM", 224769]]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:52:08.960

您的格式字符串不正确，因为它不包含时间戳；尝试将其更改为以下内容：

```
tickOptions:{formatString:'%y-%#m-%#d%n%#I:%#M:%#S%p} 
```

或者，如果您不需要时间戳，请保持格式字符串不变并从 JSON 中删除时间戳。

**编辑**

如果上述格式字符串不起作用，请尝试使用以下值操作值以匹配：

```
// Year
%Y  2008
%y  08

// Month
%m  09
%#m  9
%B  September
%b  Sep

// Day
%d  05
%#d  5
%e  5
%A  Sunday
%a  Sun
%w  0, 0 = Sunday, 6 = Saturday
%o  th, The ordinal suffix string following the day of the month

// Hour
%H  23
%#H  3
%I   11
%#I  3
%p  PM, AM or PM

// Minute
%M  09
%#M  9

// Second
%S  02
%#S  2
%s  1206567625723, Unix timestamp, seconds past 1970-01-01 00:00:00

// Millisecond
%N  008
%#N  8 
```

我希望这有帮助！

# java - 确定 JavaFX WebView 何时完成渲染

> ID：12804861
> 
> 赞同：2
> 
> 时间：2012-10-09T17:00:17.597
> 
> 标签：java, javafx, webview, javafx-2

我想在`WebView`完成渲染后立即使用 JFX 快照功能。我[可以确定何时`WebEngine`完成加载页面](https://stackoverflow.com/a/12540461/3453226)，但工作人员将在完成渲染工作人员加载的页面`State.SUCCEEDED`之前触发。`WebView`

我试过`webView.setVisible(true)`, `webView.layout()`, `webView.requestLayout()`,`webView.autosize()`等。

如何确定像素何时显示在`WebView`? 或者，我可以强制`WebView`渲染和阻塞直到它完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:26:50.240

WebView 使用的 JavaFX WebEngine 允许从 javascript 调用 Java，因此您可以在页面正文的 onload 属性中调用 Java。查看 WebEngine 的文档，尤其是“从 JavaScript 回调 Java”部分。

[http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)

# c# - 如何检测 WebBrowserTask 何时关闭？

> ID：12804863
> 
> 赞同：0
> 
> 时间：2012-10-09T17:00:18.033
> 
> 标签：c#, windows-phone-7, browser, windows-phone

关闭 WebBrowserTask 时是否发生任何事件或变量发生变化？当用户从使用以下方式启动的 WebBrowserTask 回到我的应用程序时，我想做一些事情：

```
 NavigationService.GoBack();
        WebBrowserTask wbt = new WebBrowserTask();
        wbt.Uri = new Uri("http://****.com");
        wbt.Show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:30:47.847

只需像此示例代码一样覆盖 OnNavigatedTo 方法：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    if (e.NavigationMode == System.Windows.Navigation.NavigationMode.Back && _usedWebBrowserTask)
    {
        //Do your stuff here

        _usedWebBrowserTask = false;
    }

    base.OnNavigatedTo(e);
}

private void LaunchWebBrowserButton_Click(object sender, RoutedEventArgs e)
{
    _usedWebBrowserTask = true;

    new WebBrowserTask()
    {
        Uri = new Uri("http://www.microsoft.com")
    }.Show();
} 
```

# .net - 正则表达式在未注释掉的标签之间查找文本

> ID：12804865
> 
> 赞同：3
> 
> 时间：2012-10-09T17:00:22.060
> 
> 标签：.net, regex, expression

我有一个简单的场景，似乎难倒我。我想获取两个未注释掉的标签之间的文本。这是一个例子：

```
// Example of commented text
// :Start
// <I don't want to get this text>
// :End

:Start
<Here is the text i want>
:End 
```

**解决方案：**

感谢大家的帮助。超级快地收到答案，完全符合我的需要。我使用了以下正则表达式，因为它最适合我的情况。特别感谢 Tim Pietzcker：

```
(?sm)(?<=^:Start\s*)(?:(?!^:End).)* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:37:44.603

试试这个：

```
(?sm)(?<=^:Start\s*)(?:(?!^:End).)* 
```

**解释：**

```
(?sm)     # Set options: . matches newline, ^ matches start-of line
(?<=      # Assert that this regex can be matched before the current position:
 ^        #  Start of line
 :Start   #  :Start
 \s*      #  Any whitespace
)         # End of lookahead
(?:       # Try to match...
 (?!      # (unless the following regex could be matched here:)
   ^      #  Start of line
   :End   #  :End
 )        #  End of lookahead
 .        # ... any character
)*        # Repeat any number of times 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:07:58.133

I would go for this, seems to be robust enough. Also catches multiple lines:

```
(?s)(?<=(?<!/+\s*):Start\s+)(?!//).+\s(?=:End) 
```

(?s) at the begging for SingleLine option.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:26:55.763

这种模式应该做到这一点。基本上，标签必须位于行首，以区分真实标签和注释标签。

```
"\n:Start\n([^\n\/]+)\n:End" 
```

这是 Python 中的一个示例。`s`是您的示例文本。

```
r = re.search("\n:Start\n([^\n\/]+)\n:End", s)
r.group(1)
'<Here is the text i want>' 
```

我不完全确定 .NET 中的语法，但看看[这个](http://msdn.microsoft.com/en-us/library/hs600312.aspx)我想它应该看起来像：

```
foreach (Match match in Regex.Matches(s, "\n:Start\n([^\n\/]+)\n:End"))
    Console.WriteLine("'{1}'), match.Groups[1].Value) 
```

# php - PHP：使用贝宝、万事达卡和维萨卡进行交易

> ID：12804868
> 
> 赞同：3
> 
> 时间：2012-10-09T17:00:39.143
> 
> 标签：php

我正在创建一个 PHP 网站。这里的一部分是客户可以从贝宝、签证和万事达卡（借记卡/信用卡）支付给网站所有者。如果交易成功，客户将收到确认通知，网站所有者也会收到确认通知。

我以前没有像网上交易这样的工作！！最好和最安全的方法是什么？

任何帮助或源代码都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:03:53.793

看看[Paypal](http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/) API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:04:02.307

对于贝宝，您需要使用 PayPal 设置企业帐户并阅读他们的 [Express Checkout 集成文档。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECGettingStarted)

[对于签证和万事达卡，请检查此答案](https://stackoverflow.com/questions/5597087/solution-for-credit-card-acquiring-and-paypal-in-the-usa-for-web-sites/5597731#5597731)

# eclipse - Eclipse中列出打开文件的窗口

> ID：12804871
> 
> 赞同：2
> 
> 时间：2012-10-09T17:01:06.630
> 
> 标签：eclipse, mylyn

我正在寻找一种方法来获取一个窗口（如包资源管理器），该窗口仅列出 eclipse 已打开的文件 - 理想情况下，如永久 ctrl-e 或 ctrl-F6。

我在想这可能通过 mylyn 的某种配置来实现。目前，当我在“上下文焦点”模式下使用包资源管理器时，它会列出我感兴趣的实体，但提供了太多细节；我想隐藏方法和类元素。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:56:26.880

这不会给你确切的要求，但它可能对你有用。你可以让 mylyn 只显示文件而不是它们的结构内容。

在包窗口中，从下拉列表中选择过滤器。排除所有你不想要的 java 东西。然后为包窗口打开 mylyn 上下文过滤器。您现在只有在当前上下文中可见的文件，不包括所有通常的扩展结构信息。

# powershell - 通过 Puppet 3.0 设置 Powershell 执行策略

> ID：12804873
> 
> 赞同：1
> 
> 时间：2012-10-09T17:01:09.740
> 
> 标签：powershell, puppet

我正在尝试使用 Puppet 3.0 和以下配方设置 powershell 2.0 的执行策略。

```
exec { 'rolesfeatures1':
command => 'C:\Windows\System32\cmd.exe /c C:\Windows\System32\WindowsPowerShell\v1.0\Powershell.exe Invoke-Command {Set-ExecutionPolicy RemoteSigned}',
provider => windows,
logoutput => true,
} 
```

或者

```
exec { 'rolesfeatures1':
command => 'C:\Windows\System32\WindowsPowerShell\v1.0\Powershell.exe Invoke-Command {Set-ExecutionPolicy RemoteSigned}',
provider => windows,
logoutput => true,
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:21:59.647

我不熟悉木偶，但试试这个：

```
command => 'C:\Windows\System32\WindowsPowerShell\v1.0\Powershell.exe -Command {Set-ExecutionPolicy RemoteSigned}' 
```

或者

```
command => 'C:\Windows\System32\WindowsPowerShell\v1.0\Powershell.exe -Command "& {Set-ExecutionPolicy RemoteSigned}"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:38:30.047

感谢您回复我猜想使用 sysnative 代替 System32 确实解决了这个问题。

```
exec {'executionpolicy':
        path => 'C:\Windows\sysnative\WindowsPowerShell\v1.0', #Puppet redirects to SysWOW64 by default
        command => 'Powershell.exe -Command "& {Set-ExecutionPolicy Unrestricted}"',
        logoutput => true
        } 
```

# haskell - cabal 失败，如何转移到 cabal-dev？

> ID：12804874
> 
> 赞同：3
> 
> 时间：2012-10-09T17:01:11.780
> 
> 标签：haskell, cabal

我似乎对 cabal 中损坏的依赖关系图有很多问题，我终于尝试遵循 SO 建议转移到 cabal-dev，但由于类似的原因，它不会安装。

跳过原始安装尝试的许多页面，这是当前状态：

```
C:\Users\me>cabal --force-reinstalls install cabal-dev
Resolving dependencies...
Warning: Note that reinstalls are always dangerous. Continuing anyway...
Configuring network-2.3.1.0...
configure: WARNING: unrecognized options: --with-compiler, --with-gcc
configure: error: cannot find sources (include/HsNet.h) in /e/plang/Libraries/wx
Widgets2.9 or ..
cabal: Error: some packages failed to install:
HTTP-4000.2.5 depends on network-2.3.1.0 which failed to install.
cabal-dev-0.9.1 depends on network-2.3.1.0 which failed to install.
network-2.3.1.0 failed during the configure step. The exception was:
ExitFailure 1 
```

我只是重新安装了网络（当前版本似乎是 2.4.0.1），但这并没有帮助。

有趣的是，尽管人们发现了各种不使用 cabal 的强声明，但许多 /most/ 教程和书籍都推荐它（默认情况下？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:04:16.823

安装 Platform 附带的不同版本的软件包并不是一个好主意。

在这种情况下，您正在尝试重新安装`network`. 您应该执行以下操作：运行`ghc-pkg list network`. 如果您安装了多个版本`ghc-pkg unregister`，请取消注册除最旧版本之外的所有版本。

然后执行`cabal install cabal-dev network-2.3.0.13`或最新平台附带的任何版本。

# c# - 是否可以将值传递给中继器的 SelectMethod？

> ID：12804875
> 
> 赞同：12
> 
> 时间：2012-10-09T17:01:16.447
> 
> 标签：c#, asp.net, data-binding, repeater, asp.net-4.5

ASP.Net 4.5 引入了通过 SelectMethod 属性将数据绑定到 Repeater 等控件的新方法：

```
<asp:Repeater runat="server" ItemType="MyData.Reference" 
      SelectMethod="GetReferences"> 
```

调用 Codebehind 方法

```
public IEnumerable<Reference> GetReferences() 
```

在嵌套转发器的场景中，是否可以以某种方式将参数传递给此 select 方法，以便它根据外部转发器的 Item 获取不同的数据？

例子：

```
<asp:Repeater runat="server" ItemType="MyData.Reference" 
        SelectMethod="GetReferences(Item.ID)"> 
```

应该打电话

```
public IEnumerable<Reference> GetReferences(int id) 
```

我知道这可以通过 ItemDataBound 事件来实现，但我想使用 SelectMethod 和 ItemType 更简单、更清晰的语法。

SelectMethod 是否允许以某种方式传递参数？

如果没有，是否有另一种干净的方法可以从我的 SelectMethod 中的外部中继器项中获取值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T18:57:22.680

在等待答案的同时，我玩了一下，找到了以下解决方案。

这可能不是最好的方法，但到目前为止我没有发现它有任何问题，而且它非常简单，所以我就把它扔在那里。

```
<asp:Repeater runat="server" ItemType="MyData.Reference" 
     DataSource='<%# GetReferences(Item.ID) %>'> 
```

基本上我在这里所做的就是用替换`SelectMethod`（`DataSource`Intellisense 不会建议它，但它仍然有效）。

这样，我可以将值传递给 GetReferences 方法，然后将返回值用于模型绑定。

到目前为止，这是我遇到的最短的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T13:31:47.057

这是您的操作方法：

在您的外部中继器中，放置一个隐藏字段，并为内部中继器命名一个选择方法：

```
<asp:Repeater SelectMethod="GetTopLevelStuff">
   <ItemTemplate>       
       <asp:HiddenField runat="server" ID="ItemId" Value="<%# Item.ID %>"/>
       <asp:Repeater SelectMethod="GetSubItems">
           <ItemTemplate>Template code for sub-items here</ItemTemplate
       </asp:Repeater>
   </ItemTemplate
</asp:Repeater> 
```

然后，这是不那么有据可查的魔术：

```
 public IQueryable<SubItem> GetSubItems([Control("ItemId")] int itemId)
    {
        return yourDataStore.GetSubItems(itemId);
    } 
```

在这种情况下，valueprovider 也可以采用属性名称，这在使用列表框获取“SelectedValue”时很有用。

我找到了你的问题，按照你的做法做了，然后我尝试了这个解决方案，它同样有效，但看起来更干净，更符合概念的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T18:15:47.833

查看[练习 1：ASP.NET Web 窗体中的模型绑定 -> 任务 3 - 模型绑定中的值提供程序](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic2.aspx)教程。

可以在 SelectMethod 签名中定义某种控制选择参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T18:36:37.677

您可以使用价值提供者

例子：

```
public IQueryable<Category> GetCategories([Control]int? minProductsCount)
{
} 
```

这是 ValueProviders 的列表：

*   [复合值提供者](http://msdn.microsoft.com/en-us/library/system.web.http.valueproviders.providers.compositevalueprovider%28v=vs.108%29.aspx)。表示一个值提供者，其值来自实现`IEnumerable`接口的值提供者列表。

*   [QueryStringValueProvider](http://msdn.microsoft.com/en-us/library/system.web.http.valueproviders.providers.querystringvalueprovider%28v=vs.108%29.aspx)表示`NameValueCollection`对象中包含的查询字符串的值提供程序。

*   [RouteDataValueProvider](http://msdn.microsoft.com/en-us/library/system.web.http.valueproviders.providers.routedatavalueprovider%28v=vs.108%29.aspx)表示包含在实现`IDictionary(Of TKey, TValue)`接口的对象中的路由数据的值提供程序。

*   [ControlValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.controlvalueprovider.aspx)表示控件值的值提供者。

*   [CookieValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.cookievalueprovider.aspx)表示 cookie 值的值提供者。

*   [FormValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.formvalueprovider.aspx)表示表单值的值提供者。

*   [ProfileValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.profilevalueprovider.aspx)表示配置文件值的值提供者。

*   [UserProfileValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.userprofilevalueprovider.aspx)表示用户配置文件的值提供者。

*   [ViewStateValueProvider](http://msdn.microsoft.com/en-us/library/system.web.modelbinding.viewstatevalueprovider.aspx)表示视图状态值的值提供者。

# c - 为什么我打不开文件？

> ID：12804877
> 
> 赞同：-1
> 
> 时间：2012-10-09T17:01:27.530
> 
> 标签：c, file, fopen

为什么它让我无法打开文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:06:43.177

错误在于 fgets() 在读取字符串中包含换行符。

类似以下内容将用于删除换行符：

```
int n;

n = strlen(filesIn);
if (n > 0) filesIn[n-1] = 0;
n = strlen(filesOut);
if (n > 0) filesOut[n-1] = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T17:07:24.570

我猜测这是因为您在此用例中错误地使用了[fgets() 。](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)

`A newline character makes fgets stop reading, but it is considered a valid character by the function and included in the string copied to str`

所以你得到一个带有名称的换行符并试图打开它。

由于这是针对 Linux 的，因此文件名中很可能没有空格，您可以试试这个：

```
scanf("%s", filesIn); 
```

如果您确实希望使用带空格的文件名，那么`fgets()`from`stdin`是可行的方法，但您必须将其`'\n'`去掉。

# c# - 使用字符串作为锁对象可以吗？

> ID：12804879
> 
> 赞同：44
> 
> 时间：2012-10-09T17:01:31.080
> 
> 标签：c#, .net, multithreading, .net-4.0, locking

我需要根据一组有限的字符串在一个区域中创建一个关键部分。我希望为同一个字符串实例共享锁（有点类似于[String.Intern](https://stackoverflow.com/questions/4192969/using-string-as-a-lock-to-do-thread-synchronization)方法）。

我正在考虑以下实现：

```
public class Foo
{
    private readonly string _s;
    private static readonly HashSet<string> _locks = new HashSet<string>();

    public Foo(string s)
    {
        _s = s;
        _locks.Add(s);
    }

    public void LockMethod()
    {
        lock(_locks.Single(l => l == _s))
        {
            ...
        }
    }
} 
```

这种方法有什么问题吗？以这种方式锁定字符串对象是否可以，并且在使用中是否存在任何线程安全问题`HashSet<string>`？

例如，创建一个`Dictionary<string, object>`为每个字符串实例创建一个新的锁对象会更好吗？

* * *

**最终实施**

根据我的建议，我采用了以下实现：

```
public class Foo
{
    private readonly string _s;
    private static readonly ConcurrentDictionary<string, object> _locks = new ConcurrentDictionary<string, object>();

    public Foo(string s)
    {
        _s = s;
    }

    public void LockMethod()
    {
        lock(_locks.GetOrAdd(_s, _ => new object()))
        {
            ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-09T17:03:58.050

不鼓励锁定字符串，主要原因是（由于字符串实习）一些其他代码可能会在您不知道的情况下锁定同一个字符串实例。造成死锁情况的可能性。

现在，在大多数具体情况下，这可能是一个牵强的场景。这更像是图书馆的一般规则。

但另一方面，字符串的感知好处是什么？

所以，点对点：

> 这种方法有什么问题吗？

是的，但主要是理论上的。

> 以这种方式锁定字符串对象是否可以，使用HashSet是否存在线程安全问题？

`HashSet<>`只要线程只并发读取，线程安全就不会涉及。

> 例如，创建一个为每个字符串实例创建一个新锁对象的 Dictionary 是否更好？

是的。只是为了安全起见。在大型系统中，避免死锁的主要目的是使锁定对象尽可能地保持本地和私有。只有有限数量的代码应该能够访问它们。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-09T17:04:09.487

就个人而言，我会说这是一个非常糟糕的主意。那不是字符串的用途。

（我个人不喜欢每个对象首先都有一个监视器的事实，但这是一个稍微不同的问题。）

如果您想要一个表示可以在不同实例之间共享的锁的对象，为什么不为此创建一个特定类型呢？您可以轻松地为锁命名以用于诊断目的，但锁定实际上不是字符串的目的。像这样的东西：

```
public sealed class Lock
{
    private readonly string name;

    public string Name { get { return name; } }

    public Lock(string name)
    {
        if (name == null)
        {
            throw new ArgumentNullException("name");
        }
        this.name = name;
    }
} 
```

考虑到字符串*有时会*被保留，*有时*不会（通过简单的检查有时很难辨别），您可能很容易*意外*地在您不打算使用它们的地方共享锁。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T17:04:04.973

锁定字符串可能会有问题，因为实习字符串本质上是全局的。

内部字符串是每个进程的，因此它们甚至在不同的 AppDomain 之间共享。类型对象也是如此（所以不要锁定 typeof(x)）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-29T22:21:14.227

不久前我遇到了一个类似的问题，我正在寻找一种基于字符串值锁定一段代码的好方法。这就是我们目前所拥有的，它解决了内部字符串的问题并具有我们想要的粒度。

主要思想是使用字符串键维护同步对象的静态[ConcurrentDictionary](https://msdn.microsoft.com/en-us/library/dd287191(v=vs.110).aspx)。当一个线程进入该方法时，它会立即建立一个锁并尝试将同步对象添加到并发字典中。如果我们可以添加到并发字典中，这意味着没有其他线程拥有基于我们的字符串键的锁，我们可以继续我们的工作。否则，我们将使用并发字典中的同步对象来建立第二个锁，它将等待正在运行的线程完成处理。当第二个锁被释放时，我们可以尝试再次将当前线程的同步对象添加到字典中。

需要注意的是：线程没有排队——因此，如果具有相同字符串键的多个线程同时竞争锁，则无法保证它们的处理顺序。

如果您认为我忽略了某些内容，请随时批评。

```
public class Foo
{
    private static ConcurrentDictionary<string, object> _lockDictionary = new ConcurrentDictionary<string, object>();

    public void DoSomethingThreadCriticalByString(string lockString)
    {
        object thisThreadSyncObject = new object();

        lock (thisThreadSyncObject)
        {
            try
            {
                for (; ; )
                {
                   object runningThreadSyncObject = _lockDictionary.GetOrAdd(lockString, thisThreadSyncObject);
                   if (runningThreadSyncObject == thisThreadSyncObject)
                       break;

                    lock (runningThreadSyncObject)
                    {
                        // Wait for the currently processing thread to finish and try inserting into the dictionary again.
                    }
                }

                // Do your work here.

            }
            finally
            {
                // Remove the key from the lock dictionary
                object dummy;
                _lockDictionary.TryRemove(lockString, out dummy);
            }
        }
    }
} 
```

# php - 解析类似电子邮件的标头（类似于 RFC822）

> ID：12804880
> 
> 赞同：3
> 
> 时间：2012-10-09T17:01:35.147
> 
> 标签：php, regex, parsing, rfc822

## 问题/问题

有一个我想解析[的机器人信息数据库。](http://www.robotstxt.org/db/all.txt)据说它[类似于 RFC822 消息](http://www.robotstxt.org/db/schema.txt)。

在我重新发明轮子并编写自己的解析器之前，我想我会看看是否已经有其他东西可用。我偶然发现了[`imap_rfc822_parse_headers()`](http://php.net/manual/en/function.imap-rfc822-parse-headers.php)，这似乎正是我想要的。不幸的是，IMAP 扩展在我的环境中不可用。

我在网上和 Stack Overflow 上看到了很多替代品。不幸的是，它们都是为电子邮件而构建的，并且做的比我需要的要多……经常解析出整个电子邮件并以特殊方式处理标题。我只想简单地将这些标头解析为有用的对象或数组。

是否有可用的直接 PHP 版本`imap_rfc822_parse_headers()`，或类似的东西可以解析这样的数据？如果没有，我会自己写。

## 样本数据

```
robot-id: abcdatos
robot-name: ABCdatos BotLink
robot-from: no
robot-useragent: ABCdatos BotLink/1.0.2 (test links)
robot-language: basic
robot-description: This robot is used to verify availability of the ABCdatos
                   directory entries (http://www.abcdatos.com), checking
                   HTTP HEAD. Robot runs twice a week. Under HTTP 5xx
                   error responses or unable to connect, it repeats
                   verification some hours later, verifiying if that was a
                   temporary situation.
robot-history: This robot was developed by ABCdatos team to help
               working in the directory maintenance.
robot-environment: commercial
modified-date: Thu, 29 May 2003 01:00:00 GMT
modified-by: ABCdatos

robot-id:                       acme-spider
robot-name:                     Acme.Spider
robot-cover-url:                http://www.acme.com/java/software/Acme.Spider.html
robot-exclusion:                yes
robot-exclusion-useragent:      Due to a deficiency in Java it's not currently possible to set the User-Agent.
robot-noindex:                  no
robot-host:                     *
robot-language:                 java
robot-description:              A Java utility class for writing your own robots.
robot-history:                  
robot-environment:              
modified-date:                  Wed, 04 Dec 1996 21:30:11 GMT
modified-by:                    Jef Poskanzer

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:22:34.070

假设`$data`包含您在上面粘贴的示例数据，这里是解析器：

```
<?php

/* 
 * $data = <<<'DATA'
 * <put-sample-data-here>
 * DATA;
 *
 */

$parsed  = array();
$blocks  = preg_split('/\n\n/', $data);
$lines   = array();
$matches = array();
foreach ($blocks as $i => $block) {
    $parsed[$i] = array();
    $lines = preg_split('/\n(([\w.-]+)\: *((.*\n\s+.+)+|(.*(?:\n))|(.*))?)/',
                        $block, -1, PREG_SPLIT_DELIM_CAPTURE);
    foreach ($lines as $line) {
        if(preg_match('/^\n?([\w.-]+)\: *((.*\n\s+.+)+|(.*(?:\n))|(.*))?$/',
                      $line, $matches)) {
            $parsed[$i][$matches[1]] = preg_replace('/\n +/', ' ',
                                                    trim($matches[2]));
        }
    }
}

print_r($parsed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:40:30.023

消息 MIME 类型很常见。解析器存在很多，但通常很难用谷歌搜索。如果格式有点一致，我个人在这里使用正则表达式。

例如，这两个可以解决问题：

```
 // matches a consecutive RFC821 style key:value list
define("RX_RFC821_BLOCK", b"/(?:^\w[\w.-]*\w:.*\R(?:^[ \t].*\R)*)++\R*/m");

  // break up Key: value lines
define("RX_RFC821_SPLIT", b"/^(\w+(?:[-.]?\w+)*)\s*:\s*(.*\n(?:^[ \t].*\n)*)/m"); 
```

第一个打破了 message/* 行的连贯块，第二个可用于拆分每个这样的块。但是，它需要后处理以从连续值线中去除领先的缩进。

# java - Guava 前置条件 checkNull, checkArgument

> ID：12804882
> 
> 赞同：2
> 
> 时间：2012-10-09T17:01:40.467
> 
> 标签：java, guava

我想检查基类的先决条件，以便我知道子类型将始终使用有效的构造函数参数。

让我们以一个构造函数为例：

1.  接受 2 个或更多参数
2.  接受不同类型的参数
3.  对于一个参数，它会执行多项检查（例如，字符串不为空*且不*为空）

在这种情况下，如何最好地使用 Guava 前置条件方法？

在这样的模拟示例中：（这是人为的！）

```
protected AbstractException(String errorMessage, Throwable errorCause) {
  super(errorMessage, errorCause);
  checkNotNull(errorMessage,
      ErrorMessage.MethodArgument.CANNOT_BE_NULL_CHECK, "errorMessage");
  checkArgument(!errorMessage.isEmpty(),
      ErrorMessage.MethodArgument.CANNOT_BE_EMPTY_STRING_CHECK,
      "errorMessage");
  checkNotNull(errorCause, ErrorMessage.MethodArgument.CANNOT_BE_NULL_CHECK,
      "errorCause");
} 
```

我最终`super`在检查参数之前调用，因为调用`super`需要是方法的第一行，虽然我可以这样做`super(checkNoNull(errorMessage))`，但我不能使用相同的包装，`checkArgument`因为它返回`void`。所以困境是：

*   我在哪里检查所有论点？我不想为此创建一个 Builder
*   我如何像虚构的那样“分组”检查`checkStringNotNullAndNotEmpty()`
*   我应该考虑与匹配器框架集成吗？（hamcrest，节日断言......）

我使用看起来很奇怪的 ErrorMessage.MethodArgument.CANNOT_BE_NULL_CHECK 因为默认值`throw`不包含错误消息，所以从测试方面我无法将其识别为参数验证失败而不是“任何”NPE？

我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:05:19.580

这应该是一个评论，但它太长了。

*   *如果超级 ctor 不做它不应该*`super`做的事情，那么在测试之前调用是无害的。
**   它可以通过静态构建器方法来防止，您不需要构建器。但这不值得。*   我怀疑分组测试*通常*有用。如果是的话，那么已经有这样的方法了。但是，如果您需要两次以上这样的具体事物，请自己编写；如果经常出现，请将其作为 RFE 报告给 Guava 团队。*   我很确定，匹配器在这里是一种过度杀伤，因为你只是在创建一个异常，即很少使用的东西（我希望）。由于您的测试只是运行时的，因此它*无法真正帮助*捕获错误。如果您可以静态地确保“正确”构造的异常，那就太好了，但在纯 java 中这是不可能的。*

 *更重要的是：您抛出的异常可能不如您在没有所有检查的情况下得到的异常。想象一下，用户提供了一个原因但没有任何消息。您认为这很糟糕，但是您将其替换为没有任何原因的 NPE。那更糟。

看看番石榴的`Preconditions.format`（包私有）。他们可以首先检查参数的正确数量，但他们没有。您可以提供太少或太多，这是一个错误，但忽略它是处理它的最佳方法。*

# python - 如何使用公共键将列表制作成字典？

> ID：12804884
> 
> 赞同：0
> 
> 时间：2012-10-09T17:01:55.397
> 
> 标签：python, list, dictionary

```
list = ['Roses are red','Sun is shining','cream comes from the bottom']

dict = {'john':'Roses are red', 'john':'Sun is shining','john':'cream comes from the bottom'} 
```

我希望我说得通。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T17:03:11.810

你不......键在字典中必须是唯一的......

你可以做一个听写列表

```
[ {'john':'roses'},{'john':'roses2'},...]
#like this
[ {'john':itm} for itm in my_list ] 
```

或元组/列表列表

```
[ ('john':'roses'),('john':'roses2'),...]
#like this
[ ('john',itm) for itm in my_list ] 
```

或带有附加到 john 的列表的字典

```
{'john':[1,2,3]}
#like this
{'john':my_list } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:05:58.893

即使你可以在病房之后使用字典，你也不能使用它。如果你真的想要这样的东西，你可以使用 touples 列表或这样的列表列表

```
[('john','Roses are red'), ('john','Sun is shining'),('john','cream comes from the bottom')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:06:06.953

from the [docs](http://docs.python.org/tutorial/datastructures.html#dictionaries):'

> It is best to think of a dictionary as an unordered set of key: value pairs, with the requirement that the keys are unique (within one dictionary)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:21:00.067

如前所述，键必须是唯一的......但是，您可以使用列表作为键：

```
>>> list1 = ['Roses are red','Sun is shining','cream comes from the bottom']
>>> dict1 = { x:'john' for x in list1 }
>>> dict1
>>> {'cream comes from the bottom': 'john', 'Sun is shining': 'john', 'Roses are red': 'john'} 
```

# c# - 如何从文本框回车中停止 IsPostBack？

> ID：12804885
> 
> 赞同：0
> 
> 时间：2012-10-09T17:02:02.107
> 
> 标签：c#, asp.net, visual-studio-2010, textbox, autopostback

我想停止在 TextBox 上按下回车键触发的 IsPostBack。文本框不能是多行的。

我正在尝试这个：

```
<asp:TextBox ID="kemetTextBox" runat="server" Width="215px">      
                </asp:TextBox>

                <script type="text/javascript">
                    $(document).ready(function () {
                        $("#kemetTextBox").keyup(function (e) {
                            if (e.keyCode == 13) {
                                Search();
                                return false;
                            }
                        });
                    });
                </script> 
```

但它仍然重新加载页面。

数据：Visual Studio 2010、Asp.net、C# 作为代码隐藏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:03:41.820

只需`AutoPostBack="False"`像这样设置：

```
<asp:TextBox ID="kemetTextBox" runat="server" Width="215px" AutoPostBack="False"> 
```

[TextBox.AutoPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.autopostback.aspx)

> 使用 AutoPostBack 属性指定当 TextBox 控件失去焦点时是否自动回发到服务器。在 TextBox 控件中按 ENTER 或 TAB 键是更改焦点的最常用方法。

* * *

除此之外，您也可以这样做：

```
<asp:TextBox ID="kemetTextBox" runat="server" Width="215px" onkeydown="return (event.keyCode!=13);"> 
```

来源：[禁用 TextBox 中的 Enter 键以避免 ASP.Net 中的回发](http://www.aspsnippets.com/articles/disable-enter-key-in-textbox-to-avoid-postback-in-asp.net.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:05:54.773

代替 KeyUp，使用 keyDown

```
<script type="text/javascript">
                    $(document).ready(function () {
                        $("#kemetTextBox").keydown(function (e) {
                            if (e.keyCode == 13) {
                                Search();
                                e.preventDefault();
                                return false;
                            }
                        });
                    });
                </script> 
```

# knockout.js - 淘汰js - 使用JQuery排序和设置索引

> ID：12804886
> 
> 赞同：0
> 
> 时间：2012-10-09T17:02:09.217
> 
> 标签：knockout.js, jquery-ui-sortable, knockout-2.0

我有一个问题总结在这个简单的例子中：http: [//jsfiddle.net/2wFHX/](http://jsfiddle.net/2wFHX/)

我需要将 'priority' 和 'list' observables 设置为正确的值，具体取决于它被移动到哪个列表中或在其中重新排序。

例如，如果所有任务都按 A、B、C 的顺序在“列表 1”中，则应相应地设置 viewmodel observableArray 中的优先级 (0,1,2)。

请注意，列表是故意使用函数绑定的。我认为这是[淘汰赛可排序扩展](https://github.com/rniemeyer/knockout-sortable)引起问题的地方。理想情况下，我希望将所有任务保存在一个集合中，因为这样以后处理 Web 服务会稍微容易一些，但我认为扩展不支持使用函数作为数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:23:57.547

我已经修改了我的代码以使用 observableArrays 而不是函数，并且还添加了一个订阅者以在有任何更改时更新索引。

对于任何对此感兴趣的人，我的 reindex 函数：

```
self.reIndexList = function (list) {
    for (var i = 0, j = list.length; i < j; i++) {
        var item = list[i];
        if (!item.index) {
            item.index = ko.observable(i);
        } else {
            item.index(i);
        }
    }
}; 
```

# asp.net - 单击网格视图中的链接按钮不会触发代码隐藏

> ID：12804887
> 
> 赞同：1
> 
> 时间：2012-10-09T17:02:15.693
> 
> 标签：asp.net, gridview, updatepanel, modalpopupextender, multiview

我已经在这个网站和其他网站上搜索了一个解决方案，但我无法找到我的确切案例，所以这里......

我有一个面板，通过使用模态弹出扩展器用作模态弹出窗口。此面板内部是一个包含多视图控件的更新面板。多视图的视图包含网格。不同的网格用于不同的视图。网格上最左侧的字段是包含链接按钮的模板字段。这**应该**触发后面的代码以重定向到另一个页面。相反，它似乎重新打开了没有显示数据的弹出窗口。

所以......这是我执行它们时的事件。

我单击网页上的一个按钮，打开包含我的网格的弹出窗口。正确的视图显示包含正确的网格并且我的数据是正确的。我单击应该将我引导至新页面的链接按钮，但我得到了相同的弹出窗口，但网格中没有数据。

我在另一个网页上使用了这个确切的功能，唯一的区别是我不使用多视图。但是，我至少知道更新面板内网格中的链接按钮会触发后面的代码。

我试过一个图像按钮，它的反应是一样的。超链接字段确实有效并且可以使用，但我想看看我是否可以让链接按钮工作，以便我有更多的灵活性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:23:24.043

> 舔我的链接按钮，它应该将我引导到一个新页面，相反我得到了相同的弹出窗口，网格中没有数据。

我假设您单击模态弹出多视图当前视图中的链接以导航到另一个视图。您可以完全跳过此步骤并改用 ASP.NET AJAX 工具包的选项卡控件。您可以将每个 gridview 放在单独的选项卡中并删除链接按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:18:52.490

您可以在 LinkBut​​ton 上添加 Click 事件，当您在 RowCreated 中的 Grid 上迭代时添加此事件。

```
void GridView_RowCreated(Object sender, GridViewRowEventArgs e)
  {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      LinkButton button= (LinkButton)e.Row.FindControl("IdButton");
      button.Click += YourDelegate; //Adjust here your called delegate
    }
  } 
```

注意：您必须确保每次发布数据时都不会重新绑定 Grid

您可以使用

```
if( ! IsPostBack)
{
  //Bind your grid
} 
```

你坚持 ViewState

# java - 如何在 Java 1.7 中将文件路径转换为有效的文件路径

> ID：12804888
> 
> 赞同：5
> 
> 时间：2012-10-09T17:02:15.273
> 
> 标签：java, filesystems, nio, nio2

使用 Java 1.6 用户可以输入文件路径，然后我应用各种正则表达式来删除对平台无效的字符（例如“？”在 Windows 上无效），并检查路径长度以确保我们最终得到有效的文件路径在尝试创建文件路径之前为操作系统。

但是有两个问题：

1.  弄清楚每个平台的有效或无效是一件很痛苦的事情。
2.  我基于平台的默认文件系统做出假设，但当然 OSX 系统可能正在写入非 mac 文件系统，如 FAT32，在这种情况下，这些检查将无效。

所以我希望在 Java 7 中使用 NIO2 会有更好的方法，但还没有找到解决方案，有吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:59:42.893

根据您的预期结果（更正的字符串？无效的字符位置？异常？），这应该让您了解可以做什么：

```
import java.io.File;
import java.nio.file.InvalidPathException;
public class Test {
    public static final void main(final String[] args) {
        final String current = new File(".").toPath().toAbsolutePath().normalize().toFile().toString();
        Test.correctPath(current);
        Test.correctPath(current + "aValidExpression");
        Test.correctPath(current + "aValidExpression?;:-&é");
        Test.correctPath(current + "aValidExpr//ession?;:-&é");
        Test.correctPath(current + "aValidExpre\\ssion?;:-&é");
    }

    public static final String correctPath(final String path) {
        try {
            final String returnValue = new File(path).toPath().toAbsolutePath().normalize().toFile().toString();
            System.out.println(returnValue);
            return returnValue;
        } catch (final InvalidPathException e) {
            System.err.println(e.getMessage());
            final int errorIndex = e.getIndex();
            final String newPath = path.substring(0, errorIndex - 1) + path.substring(errorIndex + 1);
            return Test.correctPath(newPath);
        }
    }
} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:48:08.880

您问题的关键是“删除对平台无效的字符”这句话。各种`String`转换`Path`函数，例如`get()`and `resolve()`，会告诉你字符串作为路径*是否*有效，但不会告诉你*为什么*它是无效的。无效的一种方法是包含无效字符。另一个是有太多的斜线字符在一起。无论如何，图书馆没有提供比这更多的信息。它不提供帮助以任何有助于用户修复输入错误的方式验证用户输入的工具。诚然，这应该是一种标准做法，但它根本不是一种做法。

结果：如果你想拥有一个，你必须自己编写这样一个验证库。好处：你当然不是唯一有这样问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T17:07:17.707

我想你应该看看[Path.getPath](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html)

```
public static Path get(String first,
   String... more)

 getPath("/foo","bar","gus")-->/foo/bar/gus 
```

> 将路径字符串或连接形成路径字符串的字符串序列转换为路径。如果 more 没有指定任何元素，那么第一个参数的值就是要转换的路径字符串。如果 more 指定一个或多个元素，则每个非空字符串（包括第一个）都被视为名称元素序列（请参阅路径），并被连接以形成路径字符串。关于如何连接字符串的详细信息是特定于提供商的，但通常它们将使用名称分隔符作为分隔符进行连接。例如，如果名称分隔符是“/”并且调用了 getPath(“/foo”、“bar”、“gus”)，则路径字符串“/foo/bar/gus”被转换为 Path。如果 first 是空字符串并且 more 不包含任何非空字符串，则返回表示空路径的 Path。

# python - Blender 导入 X3D 层次结构

> ID：12804889
> 
> 赞同：0
> 
> 时间：2012-10-09T17:02:18.513
> 
> 标签：python, blender, x3d

我正在寻找如何将对象层次结构从 X3D 文件导入 Blender 2.63 工作区的方法。我知道在 \Blender\2.63\scripts\addons\io_scene_x3d\import_x3d.py 中有一个 python 导入器模块

我发现如果我将参数更改`PREF_FLAT`为`True`，则创建转换节点的层次结构。但这一切都没有显示。

```
def load(operator, context, filepath="", global_matrix=None):

    load_web3d(filepath,
               PREF_FLAT=False,
               PREF_CIRCLE_DIV=16,
               global_matrix=global_matrix,
               )

    return {'FINISHED'} 
```

有人知道如何正确显示所有节点吗？

X3D 场景示例

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd">
<X3D profile='Immersive' >
<head> 
</head>
<Scene>
<Transform DEF='dad_Arm'
 translation='0 5 0'>
 <Transform DEF='dad_IndexedFaceSet2'
  containerField='children'
  translation='0 -5 0'>
  <Shape DEF='IndexedFaceSet2'
   containerField='children'>
   <Appearance
    containerField='appearance'>
    <Material DEF='Shiny_Blue'
     containerField='material'
     ambientIntensity='0.200'
     shininess='0.100'
     diffuseColor='0 0 1'
     specularColor='0 0 1'/>
   </Appearance>
   <IndexedFaceSet DEF='GeoIndexedFaceSet2'
    containerField='geometry'
    creaseAngle='0.524'
    coordIndex='
      0 16 1 -1
      1 16 2 -1
      2 16 3 -1
      3 16 4 -1
      4 16 5 -1
      5 16 6 -1
      6 16 7 -1
      7 16 8 -1
      8 16 9 -1
      9 16 10 -1
      10 16 11 -1
      11 16 12 -1
      12 16 13 -1
      13 16 14 -1
      14 16 15 -1
      15 16 0 -1
      18 33 17 -1
      19 33 18 -1
      20 33 19 -1
      21 33 20 -1
      22 33 21 -1
      23 33 22 -1
      24 33 23 -1
      25 33 24 -1
      26 33 25 -1
      27 33 26 -1
      28 33 27 -1
      29 33 28 -1
      30 33 29 -1
      31 33 30 -1
      32 33 31 -1
      17 33 32 -1
      0 18 17 -1
      18 0 1 -1
      1 19 18 -1
      19 1 2 -1
      2 20 19 -1
      20 2 3 -1
      3 21 20 -1
      21 3 4 -1
      4 22 21 -1
      22 4 5 -1
      5 23 22 -1
      23 5 6 -1
      6 24 23 -1
      24 6 7 -1
      7 25 24 -1
      25 7 8 -1
      8 26 25 -1
      26 8 9 -1
      9 27 26 -1
      27 9 10 -1
      10 28 27 -1
      28 10 11 -1
      11 29 28 -1
      29 11 12 -1
      12 30 29 -1
      30 12 13 -1
      13 31 30 -1
      31 13 14 -1
      14 32 31 -1
      32 14 15 -1
      15 17 32 -1
      17 15 0 -1'>
    <Coordinate DEF='IndexedFaceSet2_Coord'
     containerField='coord'
     point='
      0 5.1 10
      .03827 5.09239 10
      .07071 5.07071 10
      .09239 5.03827 10
      .1 5 10
      .09239 4.96173 10
      .07071 4.92929 10
      .03827 4.90761 10
      -0 4.9 10
      -.03827 4.90761 10
      -.07071 4.92929 10
      -.09239 4.96173 10
      -.1 5 10
      -.09239 5.03827 10
      -.07071 5.07071 10
      -.03827 5.09239 10
      0 5 10
      0 5.1 0
      .03827 5.09239 0
      .07071 5.07071 0
      .09239 5.03827 0
      .1 5 0
      .09239 4.96173 0
      .07071 4.92929 0
      .03827 4.90761 0
      -0 4.9 0
      -.03827 4.90761 0
      -.07071 4.92929 0
      -.09239 4.96173 0
      -.1 5 0
      -.09239 5.03827 0
      -.07071 5.07071 0
      -.03827 5.09239 0
      0 5 0'/>
   </IndexedFaceSet>
  </Shape>
 </Transform>
</Transform>
<Transform DEF='dad_Base'
 rotation='0 -1 0 1.571'>
 <Transform DEF='dad_IndexedFaceSet3'
  containerField='children'
  rotation='0 1 0 1.571'>
  <Shape DEF='IndexedFaceSet3'
   containerField='children'>
   <Appearance
    containerField='appearance'>
    <Material DEF='Shiny_Green'
     containerField='material'
     ambientIntensity='0.200'
     shininess='0.100'
     diffuseColor='0 1 0'
     specularColor='0 1 0'/>
   </Appearance>
   <IndexedFaceSet DEF='GeoIndexedFaceSet3'
    containerField='geometry'
    creaseAngle='0.524'
    coordIndex='
      1 16 0 -1
      2 16 1 -1
      3 16 2 -1
      4 16 3 -1
      5 16 4 -1
      6 16 5 -1
      7 16 6 -1
      8 16 7 -1
      9 16 8 -1
      10 16 9 -1
      11 16 10 -1
      12 16 11 -1
      13 16 12 -1
      14 16 13 -1
      15 16 14 -1
      0 16 15 -1
      1 0 17 -1
      2 1 17 -1
      3 2 17 -1
      4 3 17 -1
      5 4 17 -1
      6 5 17 -1
      7 6 17 -1
      8 7 17 -1
      9 8 17 -1
      10 9 17 -1
      11 10 17 -1
      12 11 17 -1
      13 12 17 -1
      14 13 17 -1
      15 14 17 -1
      0 15 17 -1'>
    <Coordinate DEF='IndexedFaceSet3_Coord'
     containerField='coord'
     point='
      5 0 0
      4.6194 0 1.91342
      3.53553 0 3.53553
      1.91342 0 4.6194
      0 0 5
      -1.91342 0 4.6194
      -3.53553 0 3.53553
      -4.6194 0 1.91342
      -5 0 -0
      -4.6194 0 -1.91342
      -3.53553 0 -3.53553
      -1.91342 0 -4.6194
      0 0 -5
      1.91342 0 -4.6194
      3.53553 0 -3.53553
      4.6194 0 -1.91342
      0 0 0
      0 5 0'/>
       </IndexedFaceSet>
      </Shape>
     </Transform>
    </Transform>
    </Scene>
    </X3D> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T11:24:42.903

我最近遇到了类似的问题，这是我正在使用的 python 脚本：

**导入_x3d.py：**

```
import sys
import os

sys.path.append(r'/path_to_blender/bin/2.63/scripts/addons/io_scene_x3d/')

import bpy
from bpy_extras.io_utils import axis_conversion
import import_x3d

global_matrix = axis_conversion('-Y','Z','-Z','Y').to_4x4()

import_x3d.load_web3d('/path_to_x3dfile/scene.x3d',
           PREF_FLAT=True,
           PREF_CIRCLE_DIV=16,
           global_matrix = global_matrix
    )

bpy.context.scene.camera = bpy.data.objects['Viewpoint'] 
```

您将需要创建一个空的搅拌机场景，您将在其中导入 x3d 文件。之后只需从命令行执行，如下所示：

```
./blender blank.blend -P import_x3d.py 
```

我不确定这是否真的是你需要的，但我希望它有所帮助。

# python - 如何用python制作IME（输入法编辑器）模拟器？

> ID：12804897
> 
> 赞同：2
> 
> 时间：2012-10-09T17:03:11.687
> 
> 标签：python, ime, automata

```
def IME(self) : #it is total function
    output = ""
    print "Exit by ctrl + D"
    while 1 :
        character = raw_input("")
        if character in self.alphabet :
            result = self.transition(character) # get result [next state, output character] from constructed by automata
            output = output + str(result[1])
            print output
            self.currentState = result[0]
        else :
            output = output + character
            print output

    self.currentState = 0 
```

我用python制作了一个IME（输入法编辑器）模拟器。它就像有限状态机，当输入来并输出在 python 程序上显示结果时。不知道结果如何一一显示，所以想请教一下如何像命令行样式一样显示。

问题是两件事，

1.  如何一一表达每个结果？
2.  如何实现“空格”或“退格”？
3.  输入“del（退格）键”时可以使用此代码吗？

    ```
     elif character == '\033'
            output = output[0:len(output)-1] 
    ```

# excel - 在每个单元格中插入一个复选框并将其分配给该单元格

> ID：12804899
> 
> 赞同：3
> 
> 时间：2012-10-09T17:03:34.520
> 
> 标签：excel, vba

我需要为链接到该单元格的每个单元格添加一个复选框。选中时将返回 true，未选中时将 false 返回到分配给它的单元格。

工作表有数千个单元格，当我手动插入它们时，我意识到必须有更好的解决方案。

我正在处理的工作表如下所示：
[![在此处输入图像描述](../Images/a71ffd954f72a84cf53f3c345879637b.png)](https://i.imgur.com/wbFXK.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T17:32:40.483

给你，克林顿。

```
Sub AddCheckBoxes()

Dim cb As CheckBox
Dim myRange As Range, cel As Range
Dim wks As Worksheet

Set wks = Sheets("mySheet") 'adjust sheet to your needs

Set myRange = wks.Range("A1:A10") ' adjust range to your needs

For Each cel In myRange

    Set cb = wks.CheckBoxes.Add(cel.Left, cel.Top, 30, 6) 'you can adjust left, top, height, width to your needs

    With cb

        .Caption = ""
        .LinkedCell = cel.Address

    End With

Next

End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-27T16:50:24.513

这是我用来向所有选定单元格添加居中复选框的通用 VBA 宏：

```
'ActiveSheet.DrawingObjects.Delete ' optional to delete all shapes when testing
Dim c As Range, cb As CheckBox

For Each c In Selection
    Set cb = c.Worksheet.CheckBoxes.Add(c.Left + c.Width / 2 - 8.25, _
            c.Top + c.Height / 2 - 8.25, 0, 0)  ' 8.25 is cb.Height / 2
    cb.Text = vbNullString                      ' to clear Caption
    cb.LinkedCell = c.Address(0, 0)             ' Example A1 instead of $A$1
    cb.Name = "cb" & cb.LinkedCell              ' optional
Next

Selection.NumberFormat = ";;;" ' optional to hide the cell values
Selection = True ' optional to check all at once (or 'selection = [#N/A]' for all xlMixed) 
```

# c# - 从 C# 中的 excel 中读取数据

> ID：12804902
> 
> 赞同：-1
> 
> 时间：2012-10-09T17:03:43.853
> 
> 标签：c#, .net, excel

我想从excel中读取数据并在gridview中显示。excel中的数据可以是任何格式。例如：如果我在 excel 中有 87.%，我得到它是 0.875。我必须按原样得到它，即 87.5。有什么方法可以在不更改要读取的实际 excel 文件的情况下完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:12:59.963

您需要访问`.Text`单元格的而不是`.Value`属性。示例 VBA 将说明差异：

```
Set c = Worksheets("Sheet1").Range("A1") 
c.Value = 1234.56
c.NumberFormat = "##0.00%" 
MsgBox c.Value 
MsgBox c.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:07:22.297

您如何从 Excel 中获取数据？Excel将数据分为两部分，值和格式。在您的示例中，值为 0.875，格式为 00%。您可以使用您正在使用的工具来获取格式，或返回格式化的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:07:53.833

看看微软论坛上的这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/b6e8a28c-6760-4e86-a1aa-e2ce9ec36380/)

# ruby - 每次引发错误时都会创建 Airbrake 的延迟作业

> ID：12804903
> 
> 赞同：7
> 
> 时间：2012-10-09T17:03:50.857
> 
> 标签：ruby, ruby-on-rails-3, delayed-job

```
def perform
  refund_log = {
    success: refund_retry.success?,
    amount: refund_amount,
    action: "refund"
  }
  if refund_retry.success?
    refund_log[:reference] = refund_retry.transaction.id
    refund_log[:message] = refund_retry.transaction.status
  else
    refund_log[:message] = refund_retry.message
    refund_log[:params] = {}
    refund_retry.errors.each do |error|
      refund_log[:params][error.code] = error.message
    end
    order_transaction.message = refund_log[:params].values.join('|')
    raise "delayed RefundJob has failed"
  end
end 
```

当我在 else 语句中提出“延迟的 RefundJob 失败”时，它会创建一个[Airbrake](https://airbrake.io/pages/home)。如果它在 else 部分结束，我想再次运行该作业。

有没有办法在不引发异常的情况下重新排队工作？并防止产生空气制动？

我正在使用延迟作业版本 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:47:43.937

最干净的方法是重新排队，即创建一个新作业并将其排队，然后正常退出该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T14:22:22.953

To elaborate on @Roman's response, you can create a new job, with a `retry` parameter in it, and enqueue it.

If you maintain the `retry` parameter (increment it each time you re-enqueue a job), you can track how many retries you made, and thus avoid an endless retry loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:55:39.980

根据定义，DelayedJob 期望作业引发错误以重新排队。

从那里您可以：

*   忽略您在 airbrake 方面的执行，请参阅[https://github.com/airbrake/airbrake#filtering](https://github.com/airbrake/airbrake#filtering)所以它仍然会再次排队而不填写您的日志
*   深入了解 DelayedJob 代码，您可以在[https://github.com/tobi/delayed_job/blob/master/lib/delayed/job.rb#L65](https://github.com/tobi/delayed_job/blob/master/lib/delayed/job.rb#L65)上看到名为**reschedule**的方法可用并由**run_with_lock** ( [https:// github.com/tobi/delayed_job/blob/master/lib/delayed/job.rb#L99](https://github.com/tobi/delayed_job/blob/master/lib/delayed/job.rb#L99)）。从那里您可以手动调用重新安排它，而不是引发您的异常。

关于后面的解决方案，我建议添加一些机制，在第三次或以后的尝试中仍然填充空气制动报告，您仍然可以检测到有问题，而无需通过尝试填充日志的麻烦。

# php - 动态表单提交

> ID：12804906
> 
> 赞同：0
> 
> 时间：2012-10-09T17:03:58.597
> 
> 标签：php

我有这样的形式

```
 <form action="sub.php" method="post">
    <input type="text" name="username[]"><br>
    <input type="text" name="hometown[]"><br>
    <input type="text" name="country[]"><br>
    <input type="submit" value="submit">
</form> 
```

子.php

```
$username = $_POST["username"];
foreach($_POST['username'] AS $ID => $Value){

        echo "Checkbox with value ".$sValue." was checked!<br>";
    } 
```

我只能得到一个输入字段，即用户名 我们可以将所有 3 个输入都输入到 sub.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:39:38.007

如果我明白这个问题

```
 <form action="sub.php" method="post">
    <input type="text" name="user[1][name]"><br>
    <input type="text" name="user[1][hometown]"><br>
    <input type="text" name="user[1][country]"><br>

    <input type="text" name="user[2][name]"><br>
    <input type="text" name="user[2][hometown]"><br>
    <input type="text" name="user[2][country]"><br>

    <input type="submit" value="submit">
</form> 
```

PHP

```
$users = $_POST["user"];
foreach($users AS $ID => $info){
    echo "user $ID ({$info['name']}) lives in {$info['hometown']}<br>"; // dollar symbol added
}

echo "all usernames: ";
$all_ids = array_keys($users);
foreach($all_ids as $current_id) {
    echo $users[$current_id]['name']." ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:06:16.780

I'm not sure what your question is but there are a few issues with your html. It should be the following:

```
<form action="sub.php" method="post">
    <input type="text" name="username"><br>
    <input type="text" name="hometown"><br>
    <input type="text" name="country"><br>
    <input type="submit" value="submit>
</form> 
```

I removed the brackets from the fields because brackets normally imply that you want your php code to see it as an array of values but you have single text fields.

If you want to get all of the inputs from the form you should use:

```
foreach($_POST AS $ID => $Value){
    echo "Textbox with value ". $Value ." was used!<br>";
} 
```

I changed it to textbox because your form doesn't have any checkboxes

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:29:26.890

试试这个（不优雅，但应该告诉你哪里出错了..）

```
$username = $_POST["username"];
foreach($_POST['username'] AS $ID => $Value){

        echo "Checkbox with value ".$Value." was checked!<br>";
    }
$hometown = $_POST["hometown"];
foreach($_POST['hometown'] AS $ht_ID => $ht_Value){

        echo "Checkbox with value ".$ht_Value." was checked!<br>";
    }
$username = $_POST["country"];
foreach($_POST['country'] AS $c_ID => $c_Value){

        echo "Checkbox with value ".$c_Value." was checked!<br>";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:36:35.197

如果您**的用户名，家乡，国家和顺序正确**，那么您可以使用以下方式

```
 foreach($_POST['username'] AS $ID => $Value){
        echo "Username ".$Value." was checked!<br>";
        echo "Hometown ".$_POST['hometown'][$ID]." was checked!<br>";
        echo "Country ".$_POST['country'][$ID]." was checked!<br>";
    } 
```

# c - C中的意外函数原型行为

> ID：12804908
> 
> 赞同：3
> 
> 时间：2012-10-09T17:04:03.793
> 
> 标签：c, function, function-prototypes

我正在从 K&R 学习 C 并且在**本书的第 4.4 部分**中提到范围规则时感到困惑。在我继续之前，让我发布我正在处理的源文件。

```
#include <stdio.h>

void first(void);

int main(void) {
    printf("In main.\n");

    first();
    second();

    return 0;
}

void first(void) {
    printf("In first.\n");
}

void second(void) {
    printf("In second.\n");
} 
```

现在，除非我比我想象的更愚蠢，否则这本书给了我这样的想法**：函数原型（在与函数定义相同的文件中）是出于范围界定的原因而存在的**。也就是说，它们的存在是为了允许在编译文件的顶部声明函数，以便提前通知源文件的其余部分是否存在***“对象”（***如果我可以这样称呼它）。

我对上述代码的问题是在我正在使用`GCC version 4.7.1`上述文件的 Arch Linux 虚拟机中无法**编译**并给出以下错误：`conflicting types for second`.

但是，当在我的物理机器上运行**相同**的代码时，运行**Ubuntu 12.04**和**GCC 版本 4.6.3**，它编译得很好。

**我的问题是：*这是编译器功能吗？***`second`因为如果不是，我很惊讶它完全可以编译，因为,没有函数原型`main`（如果我理解正确的话）不应该知道`second`' 的存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T17:06:52.887

发生“冲突类型”错误消息是因为大多数 C 编译器在遇到尚未声明的函数时，将隐式声明该函数的原型并返回 int。所以当在`second()`中遇到时`main()`，GCC 4.7.1 会推断出以下定义：

```
int second(); 
```

然后当编译器到达函数定义时，注意到推断的原型的签名与定义的签名不匹配，并因错误而中止。

至于为什么4.6.3能成功编译这段代码，下面是猜测。GCC 4.6.3 可能有一些错误（或特性，由您决定）允许函数实现与其原型的返回类型不同。由于 C 允许具有非 void 返回类型的函数终止而不返回任何内容（这使得它们的返回值未定义），这可能只是两个次优事物相互抵消的情况。

（4.6.3 中的行为也可能是版本之间默认编译器选项的更改，或者您可能正在使用不同的选项调用编译器。）

# html - 用于语言标志的 HTML img vs CSS 背景图像

> ID：12804911
> 
> 赞同：0
> 
> 时间：2012-10-09T17:04:07.757
> 
> 标签：html, css, background-image, image

我正在建立一个网站，但由于我更像是一名程序员，我不太清楚如何在使用 HTML`<img>`标签或使用 CSS（背景图像）之间做出决定：

用户需要能够切换语言。为此，将带有适当链接的语言标志放入网站的页脚（页脚将始终可见，因为页面太小，并且没有真正的好地方将它们放在顶部的某个地方）。

链接实际上是指服务器上的其他页面，它不是某种会改变的会话变量，因为我正在使用一个简单的 CMS。

我在这里找到[了一个很好的问题](https://stackoverflow.com/q/492809/1313143)，它描述了大多数场景，但我不确定这个问题。

一位更有经验的网页设计师甚至将我的徽标更改为 CSS 图像，因为它包含一个指向主页的锚点以及一个不应该可见但可由屏幕阅读器“找到”的 H1 元素（我无法设置`display:none`，但他使用`text-indent`了一个高价值）。我怀疑他的解决方案，但我想我可能会将其改回我的做法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T17:07:15.850

如果它是可点击的链接，请将其保留为`<img>`带有适当`alt`文本的链接。如果它是某个文本旁边的图标，请将标志设置`background-image`为该链接的标志`no-repeat`和适当的左填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:16:22.807

使用 css 的好处 | 背景图像：/image/path.png；| 方法，就是如果以后你需要改变图片，特别是图片路径。您只需要在 CSS 样式表中进行更改。这可以节省大量时间。

如果您选择使用 HTML | | 方法，稍后需要更改图像（*）或图像路径，您需要对每个页面进行更改。除非您使用的 CMS 或类似平台在任何地方都使用相同的实例。或者，您需要进行全面更改，只要它保持相同的图像路径和图像名称，您就可以用新图像覆盖图像。但是，如果您需要更改路径或图像名称，则需要在任何地方进行更改。

# java - 长时间运行的 HTTP 请求和线程同步

> ID：12804915
> 
> 赞同：0
> 
> 时间：2012-10-09T17:04:50.010
> 
> 标签：java, multithreading, spring, spring-mvc

我需要编写一个通过使用启发式算法来解决复杂问题的 Web 服务。只要 POST 请求中指定的时间已经过去，算法就会运行（即传递 timeAllowance=60 将确保启发式算法在 60 秒后停止并返回找到的最佳解决方案）。

启发式算法必须在多个线程上运行才能利用所有服务器内核。在算法执行过程中，这些方法必须相互“通信”。每个线程将运行启发式算法，并在一定时间后，线程将传达他们找到的解决方案，如果允许的时间尚未到期，则以不同的初始人口运行新的循环。总结：

1.  生成初始种群（几乎是随机的）
2.  启动启发式算法线程，每个线程都将人口作为输入
3.  一定时间后，终止线程并将线程找到的新种群与“控制器实体”通信
4.  做一些逻辑推理并根据第 2 点启动的线程的结果生成新的种群
5.  如果允许的时间尚未到期，请返回第 2 点，使用新的种群。否则退出

我的问题是：您将如何使用 Spring MVC 构建代码？

作为测试，我尝试在服务方法中启动 10 个线程并从控制器调用该方法（自动装配服务）。线程所做的一切都是休眠 60 秒。我期待 HTTP 请求等待所有线程终止（即大约 60 秒），但它实际上立即响应。

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:09:30.043

你不想要线程，你想要一个线程池（[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)）。将一些数量提交`Callable<HeuristicResult>`到您的池中并等待返回[`Future<HeuristicResult>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)。完成所有未来后，执行第 4 点并返回 2。（但重用线程池）。

最后关闭池或将其重用于所有请求（更具可扩展性）。

> 我尝试启动 10 个线程 [...] 我期待 HTTP 请求等待所有线程终止 [...]，但它实际上立即响应。

启动线程是非阻塞的，从那一刻起线程异步工作。您可以调用`join()`创建的线程以等待其终止。但是线程池`Future.get()`更加现代和灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:08:46.237

在没有看到任何代码的情况下，我猜想直接返回的原因是您在后台线程中启动了任务，而不是为请求提供服务的线程。

如果我正在编写此服务，我可能不会等待 60 秒再返回响应。我会在后台启动任务（使用服务）并立即返回状态页面。在此页面上，您可以使用 ajax 轮询服务器以获取任务的状态，并使用 javascript 在浏览器中呈现进度条。

因此，您需要一个控制器方法来启动进程，并需要一个控制器方法来允许浏览器获取状态。因为你只需要时间，因为它开始得出进展我很可能只是把开始时间和总允许时间放在会话中。然后您需要一个控制器方法来计算经过的时间百分比并将其返回给浏览器。

# xml - XSL 分析 XSL 1.0 的字符串替代方案

> ID：12804916
> 
> 赞同：1
> 
> 时间：2012-10-09T17:05:03.693
> 
> 标签：xml, xml-parsing, xslt-1.0, xslt-2.0

有没有办法在 XSL 1.0 中执行分析字符串操作例如在 XSL 2.0 中我们可以：

```
 <xsl:analyze-string select="Description" regex="$param1">
    <xsl:matching-substring>
    <span style="background-color: papayawhip;">
<xsl:value-of select="."/></span>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
    <xsl:value-of select="."/>
    </xsl:non-matching-substring>
    </xsl:analyze-string> 
```

因此，这将在 Description 节点中查找 param1 并将其替换为`<span>`. 用 XSL 1.0 可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:01:24.893

使用类似的东西：

```
<xsl:if test="contains(x, $param)">
  <xsl:value-of select="substring-before(x, $param)"/>
  <span><xsl:value-of select="$param"/></span>
  <xsl:value-of select="substring-after(x, $param)"/>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:48:35.910

如果您只是想在`Description`元素中查找子字符串，那么使用 XSLT 1.0 可以通过编写一个命名的递归模板来实现：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="param1" select="'foo'"/>

<xsl:template name="wrap">
  <xsl:param name="input"/>
  <xsl:param name="search"/>
  <xsl:param name="wrapper-element" select="'span'"/>
  <xsl:param name="wrapper-style" select="'background-color: papayawhip;'"/>
  <xsl:choose>
     <xsl:when test="not(contains($input, $search))">
       <xsl:value-of select="$input"/>
     </xsl:when>
     <xsl:otherwise>
       <xsl:value-of select="substring-before($input, $search)"/>
       <xsl:element name="{$wrapper-element}">
         <xsl:if test="$wrapper-style">
           <xsl:attribute name="style">
             <xsl:value-of select="$wrapper-style"/>
           </xsl:attribute>
         </xsl:if>
         <xsl:value-of select="$search"/>
       </xsl:element>
       <xsl:call-template name="wrap">
         <xsl:with-param name="input" select="substring-after($input, $search)"/>
         <xsl:with-param name="search" select="$search"/>
         <xsl:with-param name="wrapper-element" select="$wrapper-element"/>
         <xsl:with-param name="wrapper-style" select="$wrapper-style"/>
       </xsl:call-template>
     </xsl:otherwise>
   </xsl:choose>
</xsl:template>

<xsl:template match="Description">
  <div>
    <xsl:call-template name="wrap">
      <xsl:with-param name="input" select="."/>
      <xsl:with-param name="search" select="$param1"/>
    </xsl:call-template>
  </div>
</xsl:template>

</xsl:stylesheet> 
```

这样的代码然后转换

```
<Root>
  <Description>foo bar baz foobar test whatever foo</Description>
</Root> 
```

进入

```
 <div><span style="background-color: papayawhip;">foo</span> bar baz <span style="background-color: papayawhip;">foo</span>bar test whatever <span style="background-color: papayawhip;">foo</span></div> 
```

以此为例，您可以以某种方式适应您的需求，它当然不意味着完全替代 XSLT 2.0 的分析字符串。

# php - 如何选择多个下拉列表的所有选项并在 php 和 mysql 中执行查询？更简单的方法？

> ID：12804922
> 
> 赞同：1
> 
> 时间：2012-10-09T17:05:23.073
> 
> 标签：php, sql, select, option

我是 php 和 sql 的新手，所以请多多包涵。我确实尝试过搜索，但没有找到我正在寻找的 wat。希望你能帮助我。就这样吧！

我有一定数量的带有值的下拉菜单。我喜欢包含一个全选选项，它将选择所有选项并对所有值进行 sql 查询。我编写了一个示例代码，使用 if 条件执行查询，但 if cond 的数量根据下拉菜单的数量呈指数增长。2^n 我猜。我想知道是否有更好的方法来做到这一点。请在下面找到代码。

```
$sql = mysql_query("SELECT distinct `Num. of Parts` from `$verb`");
echo "<select name='filter1'>";
echo "<option value='1'> Select all </option>";
while($row = mysql_fetch_assoc($sql))
{
$filter1 = $row['Num. of Parts'];
echo "<option value='$filter1'> $filter1 </option>";
}
echo "</select>";
$sql = mysql_query("SELECT distinct `Type of positioning` from `$verb`");
echo "<select name='filter2'>";
echo "<option value='1'> Select all </option>";
while($row = mysql_fetch_assoc($sql))
{
$filter2 = $row['Type of positioning'];
echo "<option value='$filter2'> $filter2 </option>";
}
echo "</select>";
echo "<input type=\"submit\" name=\"submitC\" value=\"SUBMIT\">"; 
```

submitC 值在这里传递：

```
if($filter1==1 && $filter2!=1)
{$sql = mysql_query("SELECT * from `$verb` where `Num. of Parts` like '%' and `Type of positioning`='$filter2' and `Distance range`='$dist'");
}
elseif($filter1!=1 && $filter2==1)
{$sql = mysql_query("SELECT * from `$verb` where `Num. of Parts`='$filter1' and `Type of positioning` like '%' and `Distance range`='$dist'");
}
elseif($filter1==1 && $filter2==1)
{$sql = mysql_query("SELECT * from `$verb` where `Num. of Parts` like '%' and `Type of positioning` like '%' and `Distance range`='$dist'");
}
else
{
$sql = mysql_query("SELECT * from `$verb` where `Num. of Parts`='$filter1' and `Type of positioning`='$filter2' and `Distance range`='$dist'");
} 
```

提前谢谢各位！ps 排除 $dist

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:23:00.427

您可以选择多个选项`name='filter1[]'`

你可以存储这些`$filter1= serialize($_POST['filter1']) ;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:02:18.250

如果我说对了，您正在搜索这样的内容：

```
<?php

$mapping = array ( 'column1' => 'Num_of_Parts' , 
      'column2' => 'Type_of_positioning'
);  
    $sql = "select * from table ";
    $connector = " AND ";
    if ( isset($_POST['filters']) ) {
        $sql = $sql . "where ";
        foreach ($_POST['filters'] as $key=>$val) {
            $sql .= $mapping[$key] ." like '%"  . $val. "%'" . $connector ; 
        }

    }//end of if
    $sql.= " Distance range = 'value'";
    var_dump($sql);

?>

<html>
<body>

<form action="" method="post">
<select name = "filters[column1]">
  <option value="">Select All</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

<select name = "filters[column2]">
  <option value="">Select All</option>
  <option value="saab">Car</option>
  <option value="mercedes">Bus</option>
  <option value="audi">Cycle</option>
</select>

<input type="submit" value="submit">
</form>

</body>
</html> 
```

## 笔记

1.  始终使用[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php) 或类似的东西来清理用户输入，但不要使用 mysql 系列函数，因为鼓励不要在[php doc](http://php.net/manual/en/function.mysql-real-escape-string.php)中使用它们。
2.  ***出于安全目的，请勿使用列名***作为元素的名称。您可以在代码中看到如何使用一个简单的技巧重新映射列名。

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:32:30.337

试试这样

```
if($filter1==1) {  if(&& $filter2!=1){
$sql = "SELECT * from `$verb` where `Num. of Parts` like '%' and `Type of positioning`='$filter2' and `Distance range`='$dist'"; }
elseif($filter2==1){$sql = "SELECT * from `$verb` where `Num. of Parts` like '%' and `Type of positioning` like '%' and `Distance range`='$dist'";  }  }

elseif($filter1!=1 && $filter2==1) { 
$sql = "SELECT * from `$verb` where `Num. of Parts`='$filter1' and `Type of positioning` like '%' and `Distance range`='$dist'";  }

else{
$sql = "SELECT * from `$verb` where `Num. of Parts`='$filter1' and `Type of positioning`='$filter2' and `Distance range`='$dist'";  }

$result = mysql_query($sql); 
```

# c# - 在不启动完整应用程序的情况下编译和测试 Windows 窗体控件？

> ID：12804923
> 
> 赞同：1
> 
> 时间：2012-10-09T17:05:29.357
> 
> 标签：c#, winforms, visual-c#-express-2010

我正在为大型 Windows 窗体应用程序开发一个控件。该控件当前与将要进入的控件一起存放在类库中。有没有一种简单的方法可以只编译和执行某种测试形式*的控件（当然还有任何相关的依赖项），而不必启动整个应用程序？*

我正在使用 Visual C# 2010 express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:06:28.923

您需要在其自己的项目中构建控件。如果这样做，您可以在专门为该项目开发的表单中执行控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:07:12.727

您可以创建另一个 Win.Form 项目来测试该控件。理想情况下，控件也将位于其自己的项目中，因此您不必为了测试控件而重新构建整个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:38:44.893

也许看看运行所有你不想在非调试模式下运行的东西和你想在调试模式下测试的东西

```
 #if DEBUG
// do debug only stuff 
#else
// Release stuff
#endif 
```

# python - 在 Python 中使用基于记录的协议进行文件 IO

> ID：12804925
> 
> 赞同：1
> 
> 时间：2012-10-09T17:05:41.867
> 
> 标签：python, file-io, binaryfiles

好的 - 第一次尝试发布到 stackOverflow ......但是我到处搜索，找不到答案，我确定我走错了路，并且觉得这是一个具有普遍适用性的问题，所以就这样吧。

我处理了许多具有许多不同文件类型的不同仪器——但它们通常都使用基于记录的协议来存储数据。例如 - 每个文件包含一个记录序列，每个记录都有一个记录类型标头，其中包括一个同步位，它是什么类型的记录，以及记录的大小。我想构建一个通用类来读取基于记录的文件，我可以为我处理的每种文件类型继承和自定义。文件通常非常大（1GB），所以效率是关键——这也意味着我可能不适合我。

这是我的课。我正在使用文件位置标记在文件中四处跳转，并且担心我正在构建一个非常慢的类 - 考虑到数据的大小和数量，这很重要。错误的轨道？

```
class RecordBasedFile(object):
    syncpattern = '\xff\xff\x00\x00'
    maxrecsize = 1024*64
    recordIDfromSync = 28
    recordSizefromSync = 4    
    def __init__(self,fileHandle):
        self.fh = fileHandle
        self.recordList = []
        self.sync()

    def sync(self):
        abpos = self.fh.tell()
        chunk = self.fh.read(self.maxrecsize)
        syncbit = chunk.find(self.syncpattern)
        if syncbit >=0:
            self.fh.seek(syncbit+abpos)
            return True
        else:
            return False

    def checkSync(self):
        result = self.fh.read(len(self.syncpattern)) == self.syncpattern
        self.fh.seek(-len(self.syncpattern),1)
        return result        

    def recordID(self):
        return self.getField('<I',self.recordIDfromSync)

    def recordSize(self):
        size = self.getField('<I',self.recordSizefromSync)
        return size       

    def record(self,yieldRecord = True):
        abpos = self.fh.tell()
        rsize,roffset = self.recordSize()
        if yieldRecord:
            self.fh.seek(abpos+roffset)
            output = self.fh.read(rsize)           
        else:
            self.fh.seek(abpos+roffset+rsize)
            output = False
        self.fh.seek(self.endofRecordtoSync,1)
        return output

    def fmtLength(self,Fmt):
        fmt = Fmt.lower()
        return 1 * fmt.count('b') + \
            2*fmt.count('h') + \
            4*(fmt.count('i') + fmt.count('f')) 

    def getField(self,fmt,offset):
        abpos = self.fh.tell()
        self.fh.seek(abpos+offset)
        output = unpack(fmt,self.fh.read(self.fmtLength(fmt)))
        self.fh.seek(abpos)
        return output[0]

    def __iter__(self):
        return self

    def next(self):
        rid = self.recordID()
        record = self.record(yieldRecord = rid in self.recordList)
        if not self.checkSync():
            self.sync
        return rid, record 
```

# python - 使用python查找图像的垂直和水平梯度

> ID：12804928
> 
> 赞同：1
> 
> 时间：2012-10-09T17:05:50.853
> 
> 标签：python, image, image-processing, numpy, scipy

我刚刚开始使用 Scipy、Numpy、图像库在 python 中进行图像处理。我需要找到图像的梯度场，以便将像素划分为 bin。为此，我计算了低通高斯滤波器以逐个像素地减少噪声。现在，我必须通过对图像上的 2x2 像素水平和垂直蒙版进行卷积来计算水平和垂直梯度。

我找不到完成此任务的确切资源..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:16:10.123

[scipy.signal.convolve2d](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.convolve2d.html#scipy.signal.convolve2d)应该为此工作。

# php - 如何使用来自另一个查询的信息查询数据库？

> ID：12804932
> 
> 赞同：0
> 
> 时间：2012-10-09T17:05:57.887
> 
> 标签：php, arrays, codeigniter, activerecord

我有一个 mysql 表，其中包含有关学生的信息和另一个有关付款的信息。我想显示一个包含学生姓名和付款信息的表格。我的代码正确吗？还是我误解了它的工作原理，因为这会导致一个空数组。我想要它，对于它在 $data['students'] 中找到的每个学生，都可以搜索具有相同学生 ID 的付款信息来自今年，并且班级 ID 与 $id 相同。有没有更简单的方法来做到这一点？

```
 $data['students'] = $this->db->get_where('students', array('class_id' => $id), 40);

    foreach ($data['students']->result_array() as $student){        
        $data['student_info'] = $this->db->get_where('student_payments', array('class_id' => $id, 'student_id' => $student['id'], 'year' => date("Y")), 40);        
    } 
```

提前致谢，

泰国蝎子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:19:37.917

```
$query = "SELECT * FROM students
JOIN student_payments on student_payments.student_id = students.student_id
WHERE students.class_id= $id"
$result = my_sql_query($query);
if($result->num_rows() >0)
{
    return $result->result_array();
}  else  {
    return array();
} 
```

一旦我开始加入表格，我个人就会完全跳过 CI 的内容，有时它只会让事情变得比他们需要的更困难。我在您的代码中唯一没有看到的是您如何传递 class_id。

# ajax - 姜戈。使用 Ajax 显示数据

> ID：12804933
> 
> 赞同：2
> 
> 时间：2012-10-09T17:05:58.670
> 
> 标签：ajax, django

我有我所有帖子的列表：

```
def posts_list(request):
    posts = Post.objects.all()
    return render_to_response('posts.html', {'posts':posts},context_instance=RequestContext(request)) 
```

在模板中：

```
{% for p in posts %}
    {{ p.name }}
{% endfor %} 
```

我想在点击它的名字后发布带有关于这个帖子的所有信息的**框（div）**`Post` （模型`name, content, date, author`：）

如何使用 jquery(ajax) 做到这一点？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:57:10.130

模板.html：

```
{% for p in posts %}
    <div class="container"
        data-name="{{ p.name }}"
        data-content="{{ p.content }}">
        {{ p.name }}
    </div>
{% endfor %} 
```

脚本.js：

```
$(document).ready(function(){
    $('div.container').click(function(event){
        var name = $(event.target).attr('data-name');
        var content = $(event.target).attr('data-content');
        $.ajax({
            url: 'ajax/test/',
            type: 'POST',
            data: {
                'name': name,
                'content':content
            },
            success: function(data) {
                alert('Load was performed.');
            }
        });
    });
}); 
```

如您所见，我将模型字段存储为元素属性（`data-name=""`，...）。可以使用`.attr()`javascript 方法检索它们。

然后我将所有 div 的点击事件绑定到`class="container"`. 单击脚本检索以前存储的数据并发出 ajax 请求。[文档](http://api.jquery.com/jQuery.ajax/)中描述了 Ajax 调用。代码没有经过测试，所以我不能确定它的效率。

**如果我没有正确理解您的目标，请告诉我**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:09:18.727

您需要添加一个额外的视图：

新观点：

```
def post_content(request, post_id):
    post = get_object_or_404(Post, id = post_id)
    return render_to_response('post_info.html', {'post':post},context_instance=RequestContext(request)) 
```

您需要创建一个 post_info.html 来提供有关帖子的更多信息。

在您的帖子模板中：

```
{% for p in posts %}
     <span data-url='{% url post_content post_id=p.id %}' class='post'>{{ p.name }}<span class='more_info'></span></span>
{% endfor %} 
```

那么您将拥有以下 Javascript（在此示例中使用 Jquery）

```
$(document).ready( function () {
$('.post').on('click', function() {
    var span = $(this);
    $.ajax({
     url: span.attr('data-url')
    }).done(function(data) {
         span.find('.more_info').html(data);
     });
});
}); 
```

这将使用来自服务器的数据替换带有类 more_info 的 span 的内容。

**编辑**：你还需要在你的`urls.py`文件中添加一些东西，`name= "post_content"`设置。

# django - Why does Github list Django's total lines of code as over 800K?

> ID：12804935
> 
> 赞同：5
> 
> 时间：2012-10-09T17:06:06.957
> 
> 标签：django, lines-of-code

[https://github.com/django/django/graphs/code-frequency](https://github.com/django/django/graphs/code-frequency)

It can't be that big can it? I've seen it listed elsewhere as only about 80k:

[http://thegarywilson.com/blog/2012/software-metrics-django-case-study/](http://thegarywilson.com/blog/2012/software-metrics-django-case-study/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:20:29.290

我希望这包括翻译：所有模板和 Javascript 代码都有 71 种不同的语言环境，用于各种 contrib 应用程序（管理员、评论等）。

# php - 按键排序数组并反转结果

> ID：12804942
> 
> 赞同：3
> 
> 时间：2012-10-09T17:06:50.493
> 
> 标签：php, arrays, sorting

我有一个这样的数组：

```
$array = array(
   [1]=>'something',
   [0.2]=>'something',
   [0.1]=>'something',
   [0.3]=>'something',
   [0.10]=>'something'
); 
```

现在我喜欢按键排序这个数组，所以我使用这个代码：

```
uksort($array, 'strnatcasecmp'); 
```

上面的代码工作正常，但唯一的问题是我想反转结果。为此，我使用了`krsort`, `array_reverse`, `rsort`after `uksort`，但它们都改变了`uksort`结果。

那么我可以按自然顺序按键对该数组进行排序并反转结果吗？

我想要的应该是：

```
$array = array(
   [1]=>'something',
   [0.10]=>'something',
   [0.3]=>'something',
   [0.2]=>'something',
   [0.1]=>'something'
); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T17:14:54.017

试试这个：

```
uksort($array, create_function('$a,$b', 'return -strnatcasecmp($a,$b);')); 
```

由于您已经使用了 uksort（用户函数定义的排序）的变体，因此此版本只是通过反转比较函数的结果来反转顺序。我认为它应该对你有用。

或者试试这个：

```
uksort($array, 'strnatcasecmp');
$array = array_reverse($array, true); 
```

请注意`true`保留您的密钥的参数。

**现代 PHP 版本的更新**，因为`create_function`已弃用：

```
uksort($array, function ($a, $b) { return -strnatcasecmp($a, $b); }); 
```

**使用新语法更新**PHP 7.4（在撰写本文时尚未发布）：

```
uksort($array, fn($a, $b) => -strnatcasecmp($a, $b)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:15:02.303

我不是 php 程序员，但根据

[http://www.php.net/manual/en/function.uksort.php](http://www.php.net/manual/en/function.uksort.php)

您应该能够编写自己的回调函数进行比较，然后按您想要的方式对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:23:15.837

`asort()`将按键`arsort()`排序，将按键排序并反转顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T19:59:18.487

对于 PHP 4+，您可以使用[krsort](http://php.net/manual/en/function.krsort.php)：

```
krsort($array, SORT_NATURAL | SORT_FLAG_CASE); 
```

对我来说看起来更简单，它的工作原理与`strnatcasecmp()`. 如果您不希望它区分大小写，请去掉该`SORT_FLAG_CASE`标志。

# c# - 将元素从一个列表移动到另一个列表

> ID：12804945
> 
> 赞同：0
> 
> 时间：2012-10-09T17:07:02.557
> 
> 标签：c#

```
List<String> s1;
List<String> s2; 
```

我想将 n 项从 s1 移动到 s2

```
say s1={"a","b","c"}
s2={"d","e","f"} 
```

将 2 个元素从 s1 移动到 s2 将使

```
s1={"c"}
s2={"d","e","f","a","b"} 
```

实现这一目标的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T17:10:35.800

```
var s1 = new List<string>() { "a", "b", "c" };
var s2 = new List<string>() { "d", "e", "f" };
s2.AddRange(s1.Take(2)); 
s1.RemoveRange(0, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:09:42.773

使用要移动的项目的索引（在本例中为 0）：

```
string item = s1[0];
s1.Remove(item);
s2.Add(item); 
```

# ruby-on-rails - 路线在一个地方有效，在其他地方无效

> ID：12804950
> 
> 赞同：0
> 
> 时间：2012-10-09T17:07:17.717
> 
> 标签：ruby-on-rails, routes, custom-routes

这有点难以沟通，但我会尝试不粘贴所有代码。我的会员有一个邮箱，里面有很多收据。在标题布局中，我有一个调用的导航

```
<%= link_to "Message Center", member_mailbox_path(current_user.member_id) %> 
```

它适用于大多数页面，例如 trails/# ，各种模型的资源页面但在其他页面上，似乎是自定义路由页面，我收到此错误

```
No route matches {:action=>"show", :controller=>"mailbox", :member_id=>16} 
```

运行 rake 路线显示了这一点：

```
member_mailbox GET    /members/:member_id/mailbox/:id(.:format)      mailbox#show 
```

路线让我感到困惑，这是我解决此问题的路线（尚未测试显示消息）...

```
resources :members do
 resources :mailbox do
  resources :receipts do
    member do
      get :show_message
    end
  end
 end
end 
```

显示错误的页面的路线与此类似

```
match '/my_plays', :to => "trails#my_plays"
match '/my_creations', :to => "trails#my_creations" 
```

所以不确定我的路线是否正确。我想知道资源 :mailbox 是否正确，因为我没有大量资源，它是 has_one .... THX

----编辑---根据建议更改路线后：

```
member_mailbox POST   /members/:member_id/mailbox(.:format)                            mailboxes#create
new_member_mailbox GET    /members/:member_id/mailbox/new(.:format)                       mailboxes#new
edit_member_mailbox GET    /members/:member_id/mailbox/edit(.:format)                      mailboxes#edit
                    GET    /members/:member_id/mailbox(.:format)                           mailboxes#show
                    PUT    /members/:member_id/mailbox(.:format)                           mailboxes#update
                    DELETE /members/:member_id/mailbox(.:format)                           mailboxes#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:26:45.967

您可能希望将邮箱定义为[路由中的单一资源](http://guides.rubyonrails.org/routing.html#singular-resources)。否则，Rails 将希望您同时传递用户 id 和邮箱 id`member_mailbox_path`以路由到`mailbox#show`. 我相信这就是您遇到路由错误的原因。由于每个用户都有一个邮箱，因此无需将此额外查找作为路由的一部分。因此`resources :mailbox`，您可以这样做`resource :mailbox`：

```
resources :members do
  resource :mailbox do
    resources :receipts do
      member do
        get :show_message
      end
     end
  end
end 
```

我相信这会产生以下路线：

```
 member_mailbox POST   /members/:member_id/mailbox(.:format)                           mailboxes#create
             new_member_mailbox GET    /members/:member_id/mailbox/new(.:format)                       mailboxes#new
            edit_member_mailbox GET    /members/:member_id/mailbox/edit(.:format)                      mailboxes#edit
                                GET    /members/:member_id/mailbox(.:format)                           mailboxes#show
                                PUT    /members/:member_id/mailbox(.:format)                           mailboxes#update
                                DELETE /members/:member_id/mailbox(.:format)                           mailboxes#destroy 
```

请注意，在 GET、PUT 和 DELETE 旁边缺少路径名并不意味着它们不存在；它们只是 POST 路径的重复，但每个都响应不同的 HTTP 方法。

要渲染`mailboxes#show`，您需要添加一个`MailboxesController`带有显示路线的路线，这可能会查找成员：

```
class MailboxesController < ApplicationController

  def show
    @member = Member.find(params[:member_id])
    # other mailbox code...
  end

end 
```

您还将创建一个模板`app/views/mailboxes/show.html.erb`来呈现邮箱显示页面。

另外，我建议不要[深度嵌套您的路线](http://guides.rubyonrails.org/routing.html#nested-resources)，如第三级：收据。

# file-io - 如何在ant中复制目录而不修改子目录上次修改日期

> ID：12804954
> 
> 赞同：1
> 
> 时间：2012-10-09T17:07:36.730
> 
> 标签：file-io, ant, copy, last-modified

**问题：**

我有一个 ant 任务，我想将一个文件夹复制到一个新位置，但保持所有子目录的上次修改日期不变。

**尝试 1：** 查看文档，我在 copy ant 任务中找到了 preservelastmodified 属性。我试过了，它保留了文件的最后修改日期，但没有保留子文件夹。

**尝试 2：** 然后我转向 google 并找到[了这个](http://mail-archives.apache.org/mod_mbox/ant-user/201110.mbox/%3C87wrc8w7kv.fsf@v35516.1blu.de%3E)，它谈到了这个问题，然后在线程中谈到了使用 tar 或 zip 作为解决方案。这也不起作用。

有没有其他人遇到过这个？你是如何解决它的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:52:17.607

据我所知，没有办法做到这一点。我将不得不等到 ant 团队对目录进行 preservelastmodified 工作，就像对文件所做的工作一样。

# asp.net-mvc - ASP.NET 在运行时捆绑和缩小有什么好处？

> ID：12804955
> 
> 赞同：15
> 
> 时间：2012-10-09T17:07:41.353
> 
> 标签：asp.net-mvc, bundling-and-minification

我了解如何使用 asp.net 的新捆绑和缩小功能。它们在开发过程中很有帮助。

不过，在生产部署中使用它们有什么好处吗？如果您只是将捆绑/缩小的文件放在 Web 服务器上，系统性能会更好吗？总体而言，如果它们只是静态文件，那么运行的代码似乎更少。

注意：我理解捆绑和缩小 js/css 的好处。我只是质疑使用活动运行时进程在生产系统中生成这些文件的价值，而不是简单地将它们存储在磁盘上并将它们作为静态文件引用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T17:11:42.227

捆绑和缩小在生产中比在开发中更有用。它可以显着提高您的首页点击下载时间。

*   捆绑通过将多个 CSS 文件和 Javascript 文件组合成单个 CSS 文件和 javascript 文件来减少对服务器的单个 HTTP 请求的数量。

*   缩小通过删除空格、注释和其他不必要的字符来减少 CSS 和 javascript 文件的文件下载大小。

这种微小的优势在生产环境中比在开发环境中更为明显。所以最好在生产中使用捆绑和缩小。

具体到您的问题，在运行时捆绑/缩小没有明显的好处。此功能只是为了使开发人员的工作更轻松。因此，如果您确定自己在做什么，那么在生产中使用手动捆绑/缩小的资产会更好。

**更新：** 根据[MSDN](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5.aspx)，在运行时捆绑/缩小确实有好处

> ASP.NET 4.5 中的捆绑和缩小是在运行时执行的，因此该进程可以识别用户代理（例如 IE、Mozilla 等），从而通过针对用户浏览器来改进压缩（例如，删除东西当请求来自 IE 时，这是 Mozilla 特有的）。
> 
> 动态捆绑的强大之处在于您可以包含静态 JavaScript，以及编译成 JavaScript 的语言中的其他文件。

例如，CoffeeScript 是一种编译成 JavaScript 的编程语言

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-18T13:08:53.317

捆绑和缩小提供了 2 个基本功能，以提高页面加载的性能。

**捆绑**- 将所有提供的脚本/ CSS 捆绑在一个文件中，这样只有浏览器需要加载一个文件而不是多个文件。
**注意->**通常浏览器只能同时请求 6 个从服务器获取资源的请求。其他请求由浏览器排队等待以后处理。因此，如果我们有多个文件，那么它可能必须在请求队列中等待。

**缩小**- 缩小过程通过删除注释、多余的空格和重命名变量名来生成一个缩小的文件。因此，这会减小文件大小并加快下载速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T17:15:01.383

缩小 - 更小的文件，更少的 kb，更快的页面加载。

捆绑 - 浏览器限制每个 http 主机的连接。这意味着用户访问您的页面，并且您（假设）有 24 个脚本和链接（css）标签，您的浏览器一次处理 6 个（大多数浏览器的限制） - 减慢了页面加载速度。捆绑使浏览器将您的所有文件视为单个文件 - 覆盖此限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-15T09:23:52.840

捆绑的另一个好处是它减少了缓存问题。当我们使用键将其加载到页面时，如下所示。

```
<script src="/bundles/jquery?v=FVs3ACwOLIVInrAl5sdzR2jrCDmVOWFbZMY6g6Q0ulE1"></script> 
```

每次我们更改脚本时，它都会生成不同的密钥。因此，如果我们更改某些内容，文件将被缓存。但是当我们不使用它时，因为脚本文件具有相同的名称，有时我们必须清除缓存才能看到更改。

# mercurial - 如何在默认情况下找到最新的变更集以合并到（其他分支）？

> ID：12804957
> 
> 赞同：0
> 
> 时间：2012-10-09T17:07:50.713
> 
> 标签：mercurial, branch, branching-and-merging

最好把它画出来：

```
default -----A-----o-----o---->
              \
Branch_A  -----o-----o----->
                      \
Branch_B    -----o-----o-----o---->
                              \
Master                    -----o----> 
```

修订`A`是这里“有趣”的一个，因为它是最近`default`传播到`Master`. 如何查询 Mercurial 以获得此结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:07:50.713

*（当我输入这个问题时，一位同事整理了答案。无论如何我都会为其他使用谷歌的人发帖。）*

`hg log -r "max(ancestors(master) and branch(default))"`

`default`这将返回分支中可以跟踪到分支的路径的最新节点`master`。

# android - Android - 通过互联网在应用程序之间共享数据

> ID：12804962
> 
> 赞同：3
> 
> 时间：2012-10-09T17:08:11.710
> 
> 标签：android, share

我想构建一个带有共享选项的应用程序。我的意思是用户可以在使用该应用程序的联系人之间传递简单的数据。而且我不想使用我的服务器。

是否可以使用现有平台，例如 Facebook、Google，甚至仅使用 android APi？
如果可以做到，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:10:23.320

您可以尝试使用[gcm - 适用于 Android 的 Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)

尽管如此，为此您将不得不使用某种服务器来发送推送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:17:29.970

我创建了免费的开源 Web 服务[交叉副本](http://cross-copy.net)，通过简单的 RESTful 命令在设备之间进行文件和消息传输：

等待消息出现在“给定的代码字上”（长轮询）：
**GET [http://cross-copy.net/api/any_codeword_you_like](http://cross-copy.net/api/any_codeword_you_like)**

在正文中向所有等待的客户端发送消息：
**PUT [http://cross-copy.net/api/any_codeword_you_like](http://cross-copy.net/api/any_codeword_you_like)**

两个设备必须使用相同的代码字，因此必须达成一致（显示在屏幕上、二维码、预定义、按地理位置计算或适合您的应用程序。更多信息可[在 GitHub 的自述](https://github.com/rodja/cross-copy/blob/master/README.md)文件中获得。

# gsoap - What does the error SOAP_STOP imply?

> ID：12804965
> 
> 赞同：0
> 
> 时间：2012-10-09T17:08:17.967
> 
> 标签：gsoap

I am looking at some code that looks like the following

```
if (soap_begin_serve(pImpl))
{   
    if (pImpl->error >= SOAP_STOP)
    {   
        // TODO.
    }   
    return pImpl->error;
} 
```

and trying to figure out what to do in the TODO section there. Any ideas on what SOAP_STOP means?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:30:36.137

有一些关于 SOAP_STOP 所做的事情的线索分散在各种 gSOAP 支持站点上。最好的线索在[这里](http://sourceforge.net/tracker/index.php?func=detail&aid=2789290&group_id=52781&atid=468021)和[这里](http://gsoap.sourcearchive.com/documentation/2.7.9l/httpform_8c-source.html)。从 1000 开始的任何 gSOAP 错误似乎都是为了告诉 gSOAP 引擎停止进一步处理。

# mysql - MYSQL - 基于组 id 或用户 id 的分片

> ID：12804971
> 
> 赞同：0
> 
> 时间：2012-10-09T17:08:51.343
> 
> 标签：mysql, sharding

我没有遇到这个问题，但我总是想到..当然这只是在复制数据、使用 memcached 和分区之后......

如果我有 photo_tbl 并且结构如下所示

```
user_id
group_id
date_added
.... and many more 
```

在用户个人资料上，我们通过运行以下查询来显示用户照片

```
SELECT ...... FROM photo_tbl WHERE user_id=? order by date_added desc 
```

在群组页面上，我们通过运行以下查询来显示群组照片

```
SELECT ...... FROM photo_tbl WHERE group_id=? order by date_added desc 
```

在这种情况下，如果行是数十亿，并且如果需要在不影响上述两个查询的性能的情况下使用什么键进行分片..？

如果我的分片键是 user_id ，对于组，我必须去多个数据库才能获得所需的结果（通过更改应用程序逻辑）。如果它在 group_id 的用户配置文件上，我必须去多个数据库才能获得所需的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:54:40.447

你基本上有两个“碎片树”。您需要按用户和组进行分片。如果您在单个表中尝试此操作，那么一种方法将始终需要对所有分片进行查询，如果您有一种有效的方法，这还不错。例如，使用 dbShards，您可以跨分片并行运行高效查询（我们将这些称为“Go Fish”查询）。

还有两个其他选项需要考虑：

1.  复制表，一张按用户分片，一张按组分片。所有读取都将针对单个分片，但您必须写入两次。

2.  使用三个表。按照片 ID 分片的照片表。user_photos（user_id、photo_id 和其他字段）由用户分片。group_photos（group_id、photo_id 和其他字段）按组分片。

我们经常看到这些场景，这些是我们的客户通常采用的方法。

# c++ - Getting console details (height, width, etc) of parent process

> ID：12804977
> 
> 赞同：1
> 
> 时间：2012-10-09T17:09:10.223
> 
> 标签：c++, python, console, subprocess

This question relates to console details (width, height, etc..) as interpreted by a sub-process.

I wrote a short C program which simply outputs the width property of the `CONSOLE_SCREEN_BUFFER_INFO` struct. When called on it's own via a standard console window, the width prints out as `80`. When called from python code via a subprocess.open() command (with the python program being called from the same standard console window), the width prints out as `-23251`. So clearly this width is not being taken from the parent process' console window.

Is there any way for a child process to inherit or view the details of the parent process that created it? The child process would be in C/C++, with the parent process being written in Python.

# html - 使用跨度作为列在表中浮动跨度

> ID：12804979
> 
> 赞同：1
> 
> 时间：2012-10-09T17:09:14.690
> 
> 标签：html, css, html-table

由于[jQuery 的 Sortable 存在一些细微差别](https://stackoverflow.com/questions/12772569/use-jquery-sortable-with-hidden-table-rows-in-django-template)，我在 HTML 中显示了一个表格元素，但使用 's 来创建列而不是 's （下面和在[这个小提琴](http://jsfiddle.net/QgpRY/1/)中）：

```
<style>        
  /* Title row for an action/item */
  .item-row {
    display: table-row;
  }

  /* Keep icon columns narrow */
  .icon_column { 
    display: table-cell;
    width: 20px;
  }

  /* Item columns that are not icons */
  .name_column {
    display: table-cell;
  }    

  .extra_column {
    display: table-cell;
    float: right;
  }
</style>
<table class='table table-condensed'>
  <thead>
    <tr class='table_header'>
      <th>
        <div class='item-row'>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='name_column'>Name</span>
          <span class='extra_column'>Date</span>
        </div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <div class='item_row'>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='name_column'>Name 1</span>
          <span class='extra_column'>Date 1</span>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class='item_row'>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='name_column'>Row 2 Name 2</span>
          <span class='extra_column'>Date 2</span>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class='item_row'>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='icon_column'>*</span>
          <span class='name_column'>Name 3</span>
          <span class='extra_column'>Date 3</span>
        </div>
      </td>
    </tr>
  </tbody>
</table> 
```

我希望每个项目行显示为一行，其中 extra_column 一直浮动到右侧。extra_column 似乎在右侧，但整个项目行似乎默认为两行。

如何更正此 CSS？​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:13:10.117

这是你需要的吗？

[http://jsfiddle.net/QgpRY/2/](http://jsfiddle.net/QgpRY/2/)

**CSS 标记：**

```
.extra_column {
    display: table-cell;
    text-align: right; /*use this instead*/
    /*float: right;*/ /*this was the problem*/
  } 
```

正如您在[最后一个示例](http://jsfiddle.net/QgpRY/3/)中看到的那样，它向右对齐。

* * *

**更新**

对于您的要求，这应该是一个很好的解决方案：

[http://jsfiddle.net/QgpRY/12/](http://jsfiddle.net/QgpRY/12/)

```
 /* Keep icon columns narrow */
  .icon_column { 
    display: table-cell;
    width: 20px !important;
  }

  /* Item columns that are not icons */
  .name_column {
    display: table-cell;
    width:81% !important;
  }    

  .extra_column {
    display: table-cell;
    text-align: right;
    width: 50px !important;
  } 
```

如果您可以将 all 更改为`<div>`'s会容易得多

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:42:18.763

这是[你](http://jsfiddle.net/QgpRY/8/)要找的吗？

我基本上将两组跨度包装在另一个跨度中。第一组获得浮动：左，第二组获得浮动：右。

CSS：

```
.left { float:left; }
.right { float:right;} 
```

HTML：

```
<div class='item-row'>
  <span class='left'>
    <span class='icon_column'>*</span>
    <span class='icon_column'>*</span>
    <span class='icon_column'>*</span>
    <span class='name_column'>Name</span>
  </span>
  <span class='right'>
    <span class='extra_column'>Date</span>
  </span>
</div> 
```

我必须补充一点，当 1 行的内容扩展它获得的空间（宽度）时，就会出错。我不确定如何实现 :)

**[更新]**
通过[给 name_column 一个固定的宽度](http://jsfiddle.net/QgpRY/10/)（比如 150px），你可以摆脱上面提到的问题。当最后一列数据太多时，它仍然会出错。这可能也可以通过给定一个固定宽度来解决。如果您希望它跨越“页面”，您可以摆脱 div 包装器（“table_container”）。

# java - 如何以干净的方式检索短信对话

> ID：12804989
> 
> 赞同：2
> 
> 时间：2012-10-09T17:09:46.200
> 
> 标签：java, android, sms

我想知道如何获得所有短信对话，例如；我说（日期/时间）：blabla，联系人说：blabla，我想检索 Uri 我需要的所有对话，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:27:19.533

[内容解析器](http://developer.android.com/reference/android/content/ContentResolver.html)( **`"content://sms/inbox"`**) 可用于阅读收件箱中的短信。

```
Cursor c = getContentResolver().query(Uri.parse("content://sms/inbox"), null, null, null, null);
c.moveToFirst();

do{
   String msgBody = "";
   for(int col=0; col < c.getColumnCount(); col++)
   {
       msgBody += " " + c.getColumnName(col) + ":" + c.getString(col);
   }
}while(c.moveToNext()); 
```

这是一个可能会派上用场的[样本！](http://pastebin.com/iPt7MLyM)

# delphi - 如何在 Firemonkey XE3 中获得屏幕分辨率？

> ID：12804990
> 
> 赞同：5
> 
> 时间：2012-10-09T17:09:47.077
> 
> 标签：delphi, firemonkey, delphi-xe3

如何在 Firemonkey 2 (Delphi XE3) 中获得屏幕分辨率？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T17:14:14.270

这一切都在 XE3 中改变了。平台支持已彻底检修。有关更多信息，请参阅[Pawel Glowacki 的文章](http://blogs.embarcadero.com/pawelglowacki/2012/10/08/39817/)。

```
var
  ScreenSvc: IFMXScreenService;
  Size: TPointF;
begin
  if TPlatformServices.Current.SupportsPlatformService(IFMXScreenService, IInterface(ScreenSvc)) then
  begin
    Size := ScreenSvc.GetScreenSize;
    ....
  end;
end; 
```

尽管进行了大修，但如果您有多个显示器，这仍然没有多大用处。FMX2 中可能有一些 multimon 支持，但在`IFMXScreenService`.

# android - google play - 开发者控制台统计信息多久更新一次

> ID：12804998
> 
> 赞同：75
> 
> 时间：2012-10-09T17:10:44.980
> 
> 标签：android, google-play

由于这里有很多androidians，我想可以分享一些经验。我找不到任何具体信息，google play 开发者控制台上的统计信息多久更新一次（安装次数等）。我的感觉一天不超过一次。有人知道吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-09T17:30:12.940

它们*应该*每 24 小时更新一次。

然而，众所周知，Google Play 的统计数据不可靠，并且时不时地停止更新几天。即使在更新时，它们也往往会给出过时/不正确的数据。

如果您需要良好的统计数据，我建议您将[Google Analytics for Mobile](http://www.google.com/analytics/features/mobile.html)或[Flurry集成到您的应用程序中。](http://flurry.com/)