# StackOverflow 问答 14597000-14597999

# javascript - 如何在 HTML 页面中使用 jquery 或 javascript 发送邮件

> ID：14597000
> 
> 赞同：1
> 
> 时间：2013-01-30T04:59:57.280
> 
> 标签：javascript, jquery, email

如何在 HTML 页面中使用 jquery 或 javascript 发送邮件。我用过

```
<form action="mailto:you@yourdmainhere.com" method="post" enctype="text/plain" >  
FirstName:<input type="text" name="FirstName">  
Email:<input type="text" name="Email">  
<input type="submit" name="submit" value="Submit">  
</form> 
```

但它会在我的系统中打开电子邮件应用程序。我也必须手动发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:01:20.100

您不能通过 JavaScript 发送电子邮件。你需要一些服务器端的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:04:18.517

您必须为此使用 AJAX ....使用 ajax 将电子邮件和名称传递到远程页面并处理该页面上的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T11:36:30.843

Javascript 不知道如何说话`SMTP`，所以你不能在客户端。

# ruby-on-rails - 如果使用 Omniauth，如何启动站点进行 Beta 测试

> ID：14597003
> 
> 赞同：0
> 
> 时间：2013-01-30T05:00:21.140
> 
> 标签：ruby-on-rails, omniauth, beta-testing

我有一个 Rails 站点，我准备启动它进行 beta 测试，我想知道最好的方法是什么。我们目前通过omniauth 使用FB connect 来注册用户，但我想在我们的测试版期间将注册限制为已经注册的人员列表。

我已经审查[了这个线程](https://stackoverflow.com/questions/4515561/launching-site-in-beta-how-to-proceed)，并不是真的在寻找管理我们的 beta 测试的人。我只是希望只有获得批准的 beta 测试人员能够注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:35:22.637

你可以做一些非常简单的事情，并在过滤器之前有一个 HTTP 基本身份验证：

```
class ApplicationController < ActionController::Base
  before_filter :beta_protection

  def beta_protection
    return true unless Rails.env.beta?
    authenticate_or_request_with_http_basic do |username, password|
      username == "username" && password == "password"
    end
  end
end 
```

这看起来不太好，但您可以使用它（并将用户名和密码提供给 beta 用户）添加一个简单、简单的方法来控制对您网站的访问。

# c++ - std::tuple 内存对齐

> ID：14597006
> 
> 赞同：14
> 
> 时间：2013-01-30T05:00:38.217
> 
> 标签：c++, c++11, tuples, language-lawyer, memory-alignment

元组的伪成员的布局和内存对齐是否有任何正式规范？

无论如何修改元组中类型的内存对齐方式？它受#pragma pack() 指令的影响吗？

例如：

```
typedef std::tuple<uint8_t, uint32_t> myTuple; 
```

是否有任何规范表明这将在内存中与以下内容相同：

```
#pragma pack() // Default packing
struct myStruct
{
    uint8_t first;
    uint32_t second;
} 
```

抱歉，如果这是一个愚蠢的问题，但在模板方面我并不完全理解对齐方式。

**编辑：我正在尝试完成的示例**

目前我有一些类似的东西......

```
#pragma pack(push)
#pragma pack(4)
struct cTriangle
{
    uint32 Index[3];
};
#pragma pack(pop)

template <class T>
inline bool Read(cFileStream& fStream, std::vector<T>& vec)
{
    if (!vec.size())
        return true;

    // fStream.Read(void* pBuffer, size_t Size)
    // Just a wrapper around a binary ifstream really
    return fStream.Read(&vec[0], sizeof(T) * vec.size());
}

std::vector<cVector3> vPoint;
vPoint.resize(Verticies);
bool result = Read(FileStream, vPoint); 
```

如果我想将 typedef`cTriangle`用于`std::tuple<uint32, uint32, uint32>`元编程目的，我是否仍然能够读取/写入元组的原始内存（因此是元组的向量），或者该内存是否具有未知的对齐方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T05:09:08.740

不仅没有要求以任何特定方式排列对象，而且许多`tuple`实现实际上将第二个对象放在第一个对象之前。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-30T16:30:51.230

元组通常不是标准布局，因为标准布局类在其继承层次结构中最多可以有一个具有非静态数据成员的类，实现可变参数的典型方法`tuple`是通过递归继承，每一级递归添加一个数据成员。这允许`tuple`实现通过对成员不可用的空基类优化来消除不同的空`struct`成员。

如果您检查`sizeof(myTuple) == sizeof(myStruct)`，您有理由假设元组的内存布局以某种（一致的）顺序包含结构的元素，但实际上依赖于别名可能会导致未定义的行为。

如果你说你只是想`tuple`为元编程使用别名，你最好使用一个元编程库，比如[Boost.Fusion](http://www.boost.org/libs/fusion/)，它允许你用它的成员注释结构类型：

```
#pragma pack(push)
#pragma pack(4)
struct cTriangle {
    uint32 Index[3];
};
#pragma pack(pop)
BOOST_FUSION_ADAPT_STRUCT(
    cTriangle,
    (uint32[3], Index)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:35:24.550

正如大卫指出的那样，没有任何保证符合标准。但是，如果您对二值元组感兴趣，您可能想要使用`std::pair<T1, T2>`，它是标准布局（如果`T1,T2`是标准布局），因此具有可预测的内存布局。

另见[C++0x 元组向后存储元素](https://stackoverflow.com/questions/5206787/c0x-tuples-store-elements-backwards)

[编辑]

抱歉，在回答您的评论之前，我没有看到 ecatmur 的回答。顺便说一句：如果你的结构的所有成员都具有相同的类型，你当然可以使用 std::array，这是标准布局，它允许使用类似于 std::tuple 的 std::get 访问元素。

# umbraco - Umbraco 设置图像错误

> ID：14597007
> 
> 赞同：1
> 
> 时间：2013-01-30T05:00:42.267
> 
> 标签：umbraco, umbraco-blog

在我的 umbraco 设置中，我没有任何图像徽标来上传我保存在我的媒体文件夹中的图像，只有插入 umbraco 页面字段并插入 umbraco 宏徽标。我尝试了许多链接，但它不成功。我使用 umbraco V3。 0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:02:31.900

如果我理解正确，您正在修改模板（您可以访问插入字段和插入宏）并且您想要添加保存在媒体部分中的图像。

你真的在使用 Umbraco 3 - 现在已经有几年了，语法非常不同，你可能需要使用 xslt；例如，在 v3 和 v4 的模板上插入宏看起来会有所不同（v5 已被弃用，v6 尚未上线）。

（[http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)）

Umbraco 版本 3：

```
<?UMBRACO_MACRO macroAlias="RenderProperties" pageValue="[#bodyText]" /> 
```

Umbraco 版本 4：

```
<umbraco:macro alias="RenderProperties" pagevalue="[#bodyText]" runat="server"/> 
```

在旧版本的 umbraco 中，将图像从媒体放置到页面上需要编写一些 xslt 并在宏中引用它 - 这个示例（我已经挖掘出来）将显示为具有别名的页面挑选的图像'图像别名'

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [ <!ENTITY nbsp "&#x00A0;"> ]>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxml="urn:schemas-microsoft-com:xslt"
  xmlns:umbraco.library="urn:umbraco.library" xmlns:Exslt.ExsltCommon="urn:Exslt.ExsltCommon" xmlns:Exslt.ExsltDatesAndTimes="urn:Exslt.ExsltDatesAndTimes" xmlns:Exslt.ExsltMath="urn:Exslt.ExsltMath" xmlns:Exslt.ExsltRegularExpressions="urn:Exslt.ExsltRegularExpressions" xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings" xmlns:Exslt.ExsltSets="urn:Exslt.ExsltSets" xmlns:umbraco.contour="urn:umbraco.contour" xmlns:PS.XSLTsearch="urn:PS.XSLTsearch"
  exclude-result-prefixes="msxml umbraco.library Exslt.ExsltCommon Exslt.ExsltDatesAndTimes Exslt.ExsltMath Exslt.ExsltRegularExpressions Exslt.ExsltStrings Exslt.ExsltSets umbraco.contour PS.XSLTsearch ">

<xsl:output method="xml" omit-xml-declaration="yes"/>

<xsl:param name="currentPage"/>

<xsl:template match="/">
    <xsl:variable name="mediaId" select="number($currentPage/imageAliasName)" />
    <xsl:if test="$mediaId > 0">
      <xsl:variable name="mediaNode" select="umbraco.library:GetMedia($mediaId, 0)" />
      <xsl:if test="$mediaNode/umbracoFile">

        <img>
          <xsl:attribute name="src">
            <xsl:text>/ImageGen.ashx?image=</xsl:text>
            <xsl:value-of select="$mediaNode/umbracoFile"/>
            <xsl:text>&amp;width=200</xsl:text>
            <xsl:text>&amp;height=200</xsl:text>
          </xsl:attribute>
        </img>
      </xsl:if>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:34:04.107

在 V3 中，我将该图像插入到我的一个内容文件中，我可以从那里查看我的图像的 id..使用该 id 图像在我的设置中编写我的代码..当我写我的图像时，徽标被查看成功。

# tsql - 从 join 语句中获取字段名称（扩展 * 星号）

> ID：14597008
> 
> 赞同：3
> 
> 时间：2013-01-30T05:00:45.737
> 
> 标签：tsql, ssms

我最近在临时查询中构建了相当长的连接，我发现一旦我的连接工作，在 select 语句中输入所有字段名称非常乏味。有没有一种快速的方法来列出组合查询中的所有字段名称？是否有一些查询可以针对 select 语句或执行此操作的关键命令运行？

例如，以下联接中可能有大约 30 个字段。如果我可以从“*”星号中快速获取它们的列表，那么我可以拿走我不需要的东西。

```
SELECT *
FROM [DB].[THINGS].[QLINKS] Q
JOIN [DB].[THINGS].[POINTS] RQ
    ON Q.ID = RQ.POINT_ID
JOIN [DB].[THINGS].[REFERENCES] R
    ON RQ.POINT_ID = R.ID
JOIN SA_MEMBERSHIP.DBO.ASPNET_USERS U
    ON U.USERID = R.PERSON_ID
JOIN SA_MEMBERSHIP.DBO.ASPNET_MEMBERSHIP M
    ON M.USERID = U.USERID
WHERE NOT Q.ID IN (
        SELECT RQ.QLINK_ID
        FROM [DB].[DATA].[ENTRIES] E
        JOIN [DB].[THINGS].[REFERENCES] R
            ON E.PERSON_ID = R.PERSON_ID
        JOIN [DB].[THINGS].[POINTS] RQ
            ON R.ID = RQ.POINT_ID
        WHERE (
                ITEMKEY LIKE '102_0%'
                OR ITEMKEY LIKE '104_0%'
                )
            AND E.POINT_ID IS NULL
        GROUP BY E.PERSON_ID, LEFT(ITEMKEY, 5), R.ID, RQ.QLINK_ID
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:11:09.440

类似于以下内容（tsql 版本，想法是使用结果集的元数据），游标 c 是您的查询

```
declare c cursor for select * from sys.databases
go
open c

DECLARE @Report CURSOR;
declare @cn sysname
declare @op int
declare @ccf int
declare @cs int
declare @dts smallint
declare @cp tinyint
declare @colsc tinyint
declare @orp int
declare @od varchar(1)
declare @hc smallint
declare @cid int
declare @oid int
declare @dbid int
declare @dbn sysname

exec sp_describe_cursor_columns @cursor_return = @Report out, @cursor_source = N'global', @cursor_identity = N'c';

declare @res nvarchar(max)
set @res = '';

FETCH NEXT from @Report into @cn, @op, @ccf, @cs, @dts, @cp, @colsc, @orp, @od, @hc, @cid, @oid, @dbid, @dbn;
WHILE (@@FETCH_STATUS <> -1)
BEGIN
    set @res = @res +',' + @cn
   FETCH NEXT from @Report into @cn, @op, @ccf, @cs, @dts, @cp, @colsc, @orp, @od, @hc, @cid, @oid, @dbid, @dbn;
END

print stuff(@res, 1, 1, '')

CLOSE @Report;
DEALLOCATE @Report;
GO

close c
deallocate c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T15:57:37.850

事实证明，有一个插件！ApexSQL 重构插件免费提供此功能。

此处直接链接：http: [//www.apexsql.com/sql_tools_refactor.aspx](http://www.apexsql.com/sql_tools_refactor.aspx)

由可敬的 Pinal Dave 描述：http: [//blog.sqlauthority.com/2014/07/24/sql-server-how-to-format-and-refactor-your-sql-code-directly-in-ssms-和视觉工作室/](http://blog.sqlauthority.com/2014/07/24/sql-server-how-to-format-and-refactor-your-sql-code-directly-in-ssms-and-visual-studio/)

# javascript - HTML/JavaScript 中的按钮不起作用

> ID：14597009
> 
> 赞同：-2
> 
> 时间：2013-01-30T05:00:51.313
> 
> 标签：javascript, html

```
<html>
     <h1>MB calculator</h1>

    <script type="text/javascript">
        var level = "0";
        var brawlpoints = "0";
        var brawlenergy = "0";
        var pointsmake = "0";

        function setlv() {
            level = document.forms["form"]["lv"].value;
            alert("level = " + level);
            var maxen = 95 + (level * 5);
            var exptolv = 110 + (level * 15);
        }

        function setbpbe() {
            brawlpoints = document.forms["form"]["bp"].value;
            brawlenergy = document.forms["form"]["be"].value;
            alert("points per brawl = " + brawlpoints + "; energy per brawl = " + brawlenergy);
        }

        function pointsupdate() {
            pointsmake = document.forms["form"]["p2m"].value;
            alert("you want to make " + pointsmake);
        } 
```

 ****```
 function calculatevalues() {
        var math1 = pointsmake / brawlpoints + 1;
        var math2 = brawlenergy * math1;
        var math3 = maxen * 1.75;
        var math4 = math2 / math3 + 1;
        document.write("To achieve your goal it will take you " + math1 + " brawls, this will take you " + math2 + " energy, or " + math4 + " levels, assuming a 75% refill levels you.");
    } 
```**  **```
</script>

<form name="form">level:
    <input type="text" name="lv" value="0">
    <br>
    <input type="button" value="update level" onclick="setlv()">
    <br>points per brawl done:
    <input type="text" name="bp" value="0">
    <br>energy per brawl done:
    <input type="text" name="be" value="0">
    <br>
    <input type="button" value="update brawl energy and points" onclick="setbpbe()">
    <br>how many points you want to make:
    <input type="text" name="p2m" value="0">
    <br>
    <input type="button" value="set points you want to make" onclick="pointsupdate()">
    <br> 
```

 ****```
 <input type="button" value="calculate" onclick="calculatevalues()"> 
```**  **```
</form>

    <h1>LV calculator</h1>

</html> 
```

把问题用粗体放在哪里，由于某种原因，按钮在按下时什么都不做......

所以，是的，在 html 中测试它，我认识的人谁知道一些 html/javascript 似乎认为表单被破坏或类似的东西......

编辑：让它工作，如果有人读到这个，如何在 javascript 中舍入？编辑：向上，而不是向下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:08:06.313

您需要`maxen`在全局范围内声明变量

```
var level = "0"; var brawlpoints = "0"; var brawlenergy = "0"; 
var pointsmake = "0";
//declare the maxen variable here
var maxen = "0";

function setlv()
{
//left of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:09:27.450

你期待这个

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><h1>MB calculator</h1>

<script type="text/javascript">

var level = "0"; var brawlpoints = "0"; var brawlenergy = "0"; var pointsmake = "0";
var maxen;
function setlv()
{
level = document.forms["form"]["lv"].value;
alert("level = " + level);
maxen = 95+(level*5);
var exptolv = 110+(level*15);
}

function setbpbe()
{
brawlpoints = document.forms["form"]["bp"].value;
brawlenergy = document.forms["form"]["be"].value;
alert("points per brawl = " + brawlpoints + "; energy per brawl = " + brawlenergy);
}

function pointsupdate()
{
pointsmake = document.forms["form"]["p2m"].value;
alert("you want to make " + pointsmake);
}

function calculatevalues()
{
var math1 = pointsmake/brawlpoints + 1;
var math2 = brawlenergy*math1;
var math3 = maxen*1.75;
var math4 = math2/math3 + 1;

document.write("To achieve your goal it will take you " + math1 + " brawls, this will take you " + math2 + " energy, or " + math4 + " levels, assuming a 75% refill levels you.");
}

</script>

<form name="form">

level:
<input type="text" name="lv" value="0">
<br>
<input type="button" value="update level" onclick="setlv()"> 
<br>
points per brawl done:
<input type="text" name="bp" value="0">
<br>
energy per brawl done:
<input type="text" name="be" value="0">
<br>
<input type="button" value="update brawl energy and points" onclick="setbpbe()">
<br>
how many points you want to make:
<input type="text" name="p2m" value="0">
<br>
<input type="button" value="set points you want to make" onclick="pointsupdate()">
<br>
**<input type="button" value="calculate" onclick="calculatevalues()">**
</form>

<h1>LV calculator</h1>

</HTML> 
```

`maxen`被声明为函数中的局部变量，`setlv`并且您试图在另一个函数中访问它。让它全球化********

# ruby-on-rails - 在没有 Internet 可用性的情况下安装 gem

> ID：14597026
> 
> 赞同：1
> 
> 时间：2013-01-30T05:02:23.063
> 
> 标签：ruby-on-rails, ruby, rspec, gem

昨天我尝试`rspec`在未连接到互联网的系统上安装 gem，所以这就是我所做的-

我使用命令下载了 rspec 的 gem，`gem install rspec`并在命令提示符下显示了包内的 5 gem - （带有互联网连接的系统）

diff-lcs-1.1.3、rspec-2.12.0、rspec-core-2.12.2、rspec-expectations-2.12.1、rspec-mocks-2.12.2

我从这个位置复制了 5 个文件夹 -

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems 
```

并粘贴在相同的 path9system 没有互联网连接），

`gem 'rspec'`当我用（没有互联网连接的计算机）更新 gem 文件并重新启动服务器时，它仍然显示错误。

我需要知道在安装过程中是否还有其他我遗漏的更新？

我需要添加哪些其他部分才能使此 rspec 在没有互联网连接的情况下在计算机上工作。

PS-`New to rails :)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:26:40.167

缓存 gem 执行`bundle cache`，它将所有 gem 保存在`vendor/cache`目录中。

当您执行`bundle install`时，它将使用缓存的 gem。

# assembly - 如何从汇编代码中计算 switch case 值？

> ID：14597028
> 
> 赞同：0
> 
> 时间：2013-01-30T05:02:31.367
> 
> 标签：assembly, x86, switch-statement, att

**ATT 语法。**

我试图理解我们在课堂上讨论过的一个练习题。

我们得到了以下 switch 语句的部分汇编代码：

```
movl  8(%ebp), %eax
addl  $2, %eax
cmpl  $6, %eax
ja    .L2
jmp   *.L8(,%eax,4)

//rest of switch statement would go here

.L8
 .long   .L3
 .long   .L2
 .long   .L4
 .long   .L5
 .long   .L6
 .long   .L6
 .long   .L7 
```

我知道第二部分是跳表。我想不通的是如何计算原始的 C 级 switch case 值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:25:33.870

分析代码。

函数的参数 + 2 用作表的索引。因此，常数从 -2 开始，然后到 -1、0 等。

最大常数为 4，请参阅检查参数 + 2 > 6，或者等效地检查参数 > 4。表中的元素数量也反映了这一点。

# liferay - 在工作流定义中获取用户

> ID：14597029
> 
> 赞同：2
> 
> 时间：2013-01-30T05:02:32.347
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6.1.1CE 和 kaleo 工作流程。

通过编辑单级工作流.xml，我创建了一个新的工作流定义。

在我的工作流定义中，我添加了一个新的转换“参考”和一个相同的任务。

在我的参考任务中，我必须从所有用户中选择一个用户来发送参考。

我怎样才能获取用户..？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:58:39.240

我不完全确定您的任务在做什么，但是是的，您绝对可以使用 groovy 脚本访问门户服务类。就像是：

```
<task>
    <name>Some task</name>
    <actions>
        <action>
            <name>task action</name>
            <script><![CDATA[
import com.liferay.portal.kernel.util.GetterUtil;
import java.util.List
import java.util.Map;
import java.util.Set;
import java.util.Iterator;
import com.liferay.portal.kernel.workflow.WorkflowConstants;
import com.liferay.portal.model.User;
import com.liferay.portal.service.UserLocalServiceUtil;

long companyId = GetterUtil.getLong((String)
workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
ServiceContext serviceContext = (ServiceContext)
workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
List<User> users = UserLocalServiceUtil.getUsers(start, end);

]]></script>
            <script-language>groovy</script-language>
            <execution-type>onEntry</execution-type>
        </action>
    </actions>
    <assignments>
        <roles>
            <role>
                <role-type>regular</role-type>
                <name>Administrator</name>
            </role>
        </roles>
    </assignments>
    <transitions>
        <transition>
            <name>next</name>
            <target>Next Task</target>
        </transition>
    </transitions>
</task> 
```

并且您可以使用 WorkflowInstanceManagerUtil 和 WorkflowTaskManagerUtil 在代码中访问您的工作流任务，我希望这会有所帮助，如果您还有其他问题，请告诉我

# php - SQL查询横向展示和连接

> ID：14597030
> 
> 赞同：-2
> 
> 时间：2013-01-30T05:02:51.273
> 
> 标签：php, mysql, sql, pivot, dynamic-sql

> **可能重复：**
> [连接两个表（具有 1-M 关系），其中第二个表需要“展平”为一行](https://stackoverflow.com/questions/5826455/join-two-tables-with-a-1-m-relationship-where-the-second-table-needs-to-be-fl)

尽管我对 sql 课程进行了介绍，但目前我无法弄清楚这一点。

我有两张桌子：

表格1：

```
 user_id date  value
    ids     dates values 
```

表2：

```
 user_id user_names
    ids     names 
```

我想要一个显示以下结果的 MYSQL 查询：

```
 /   name1  name2  name3 etc
  date1 val1-1 val1-2 val1-3 
  date2 val2-1 val2-2 val2-3 
```

我记得有办法做到这一点，对吧？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:50:34.983

以这种方式旋转数据称为*枢轴*。不幸的是，MySQL 没有枢轴函数，因此您必须使用聚合函数和`CASE`表达式来复制它。

**示例数据：**用于此查询

```
CREATE TABLE Table1
    (`user_id` int, `date` datetime, `value` int)
;

INSERT INTO Table1
    (`user_id`, `date`, `value`)
VALUES
    (1, '2013-01-01 00:00:00', 100),
    (2, '2013-01-01 00:00:00', 200),
    (1, '2013-01-02 00:00:00', 500)
;

CREATE TABLE Table2
    (`user_id` int, `user_names` varchar(4))
;

INSERT INTO Table2
    (`user_id`, `user_names`)
VALUES
    (1, 'John'),
    (2, 'Tim')
; 
```

如果您知道要转换为列的所有值（对于您的示例`names`），那么您可以对它们进行硬编码，SQL 将与此类似：

```
select 
  date,
  max(case when rownum = 1 then value end) as John,
  max(case when rownum = 2 then value end) as Tim
from
(
  select date, value, user_names,
    @row:=case when @prev=date then @row else 0 end + 1 as rownum,
    @prev:=date 
  from
  (
    select t1.date, t1.value, t2.user_names
    from table1 t1
    inner join table2 t2
      on t1.user_id = t2.user_id
    order by date, user_names
  ) d, (SELECT @row:=0, @prev:=null) r
  order by date, user_names
) src
group by date 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/d08b9/8)。如您所见，我必须实现用户变量来为日期内的每个名称分配一个行号。这告诉您将有多少不同的名称值变成列。

但是，对于您的情况，每个日期的名称数量未知，因此您需要在[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)中使用动态 SQL 。

在这种情况下，代码将类似于：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when rownum = ',
      rownum,
      ' then value end) AS `',
      user_names, '`'
    )
  ) INTO @sql
from
(
  select date, value, user_names,
    @row:=case when @prev=date then @row else 0 end + 1 as rownum,
    @prev:=date 
  from
  (
    select t1.date, t1.value, t2.user_names
    from table1 t1
    inner join table2 t2
      on t1.user_id = t2.user_id
    order by date, user_names
  ) d, (SELECT @row:=0, @prev:=null) r
  order by date, user_names
) src;

SET @sql = CONCAT('SELECT date, ', @sql, ' 
                  from
                  (
                    select date, value, user_names,
                      @row:=case when @prev=date then @row else 0 end + 1 as rownum,
                      @prev:=date 
                    from
                    (
                      select t1.date, t1.value, t2.user_names
                      from table1 t1
                      inner join table2 t2
                        on t1.user_id = t2.user_id
                      order by date, user_names
                    ) d, (SELECT @row:=0, @prev:=null) r
                    order by date, user_names
                  ) src
                  group by date');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/90e1c/2)。两个版本都会给出结果：

```
|                           DATE | JOHN |    TIM |
--------------------------------------------------
| January, 01 2013 00:00:00+0000 |  100 |    200 |
| January, 02 2013 00:00:00+0000 |  500 | (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:08:31.927

使用内部连接连接两个表并保存为视图，然后将其用作原始数据，PIVOT 结果集，您将获得所需的结果。连接、视图创建和 PIVOT 都应该有大量关于 SO 的代码示例，并且在课程结束后应该很容易解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:15:58.317

是的，有一种方法可以做到这一点............它被称为 PIVOT 表

你可以参考[**这个**](http://www.artfulsoftware.com/infotree/queries.php#78)。

**[MySQL 数据透视表（将行转换为列）](http://buysql.com/mysql/12-how-to-pivot-tables.html)**

# java - 如何在 Android 代码中动态加粗和下划线？

> ID：14597031
> 
> 赞同：5
> 
> 时间：2013-01-30T05:02:56.137
> 
> 标签：java, android, string

如何在 Java 代码中将**Branch Name:**、**Branch No:**、**Branch Phone No:**和**Branch Timings:加粗和斜体？**数据库数据应保持简单格式。这四个只是它们的标题。在这种（当前）情况下，它以简单格式打印/显示整个数据，并且用户在读取此数据时遇到问题。

```
String branchInfoString = "" ;

// fetching all the database data in a list
List<BranchInfo> dbDataList = _dbHandler.getAllInfo() ;

// getting that data into a string that will be displayed in TextView
for(BranchInfo aBranch : dbDataList ){

branchInfoString = branchInfoString + 

          "Branch Name: " + aBranch.getBranchName() + "\n" +
          "Branch No: " + aBranch.getBranchNo() + "\n" + 
          "Branch Phone No: " + aBranch.getBranchPhone() + "\n" + 
          "Branch Timings: " + aBranch.getBranchTiming() + "\n" + 

          "\n --------------------------------------- \n \n" ;  

}

// showing all the branch data in a text_view
setContentView(R.layout.db_branch_list) ;
TextView dbDataView = (TextView)findViewById(R.id.db_branch_list) ;
dbDataView.setText(branchInfoString) ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T05:15:09.943

是的，您可以使用 HTML 标签装饰 TextView 中的文本。这不仅包括斜体和粗体，还包括字体颜色和其他一些东西。像这样的东西：

```
branchInfoHtmlString = branchInfoString + 

      "<b>Branch Name: " + aBranch.getBranchName() + "</b>\n" +
      "<i>Branch No: " + aBranch.getBranchNo() + "</i>\n" + 
      "<font >Branch Phone No: " + aBranch.getBranchPhone() + "</font>\n" + 
      "<font color="#FFDDDDDD">Branch Timings: " + aBranch.getBranchTiming() + "</font>\n" + 

      "\n --------------------------------------- \n \n" ;  

}

// showing all the branch data in a text_view
setContentView(R.layout.db_branch_list) ;
TextView dbDataView = (TextView)findViewById(R.id.db_branch_list) ;
dbDataView.setText(Html.fromHtml(branchInfoHtmlString)) ; 
```

并非所有 HTML 标签都受支持，您可以在[此处](http://daniel-codes.blogspot.com/2011/04/html-in-textviews.html)和[此处](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)找到标签列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T05:08:39.193

使用 HTML 内容来格式化您的文本，例如：

```
branchInfoString = branchInfoString + 

      "<b><i>Branch Name: </i></b>" + aBranch.getBranchName() + "\n" +
      "Branch No: " + aBranch.getBranchNo() + "\n" + 
      "Branch Phone No: " + aBranch.getBranchPhone() + "\n" + 
      "Branch Timings: " + aBranch.getBranchTiming() + "\n" + 

      "\n --------------------------------------- \n \n" ;

dbDataView.setText(Html.fromHtml(branchInfoString )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:31:28.493

您将必须创建一个包含多行的 tableView，这些行将在运行时添加。第一行将包含列标题。

前任。

```
<TableLayout android:id="@+id/class">
    <TableRow android:id="@+id/headers">
        <TextView android:id="@+id/branch_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:typeface="serif">
        <TextView android:id="@+id/branch_no"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:typeface="serif">
        <TextView android:id="@+id/branch_phone_no"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:typeface="serif">
        <TextView android:id="@+id/branch_timings"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:typeface="serif">
    </TableRow>
</TableLayout> 
```

并将数据添加到该表中，在类中，您将添加如下内容：

```
TableLayout layout =     (TableLayout)LayoutInflater.from(canvas.getContext()).inflate(R.layout.class, null);

TableRow headerRow = (TableRow) layout.findViewById(R.id.header);
TextView branchName = (TextView) layout.findViewById(R.id.branch_name);
TextView branchNo = (TextView) layout.findViewById(R.id.branch_no);
TextView branchPhoneNo = (TextView) layout.findViewById(R.id.branch_phone_no);
TextView branchTimings = (TextView) layout.findViewById(R.id.branch_timings);

branchName.setText("Branch Name");
branchName.setTypeFace(null, Typeface.BOLD);

branchNo.setText("Branch No");
branchNo.setTypeFace(null, Typeface.BOLD);

branchPhoneNo.setText("Branch Phone No");
branchPhoneNo.setTypeFace(null, Typeface.BOLD);

branchTimings.setText("Branch Timimgs");
branchTimings.setTypeFace(null, Typeface.BOLD);

for (int i=0; i<noOfRows; i++) {
    TableRow dataset = new TableRow(context);
    TextView branchName = new TextView(context);
    TextView branchNo = new TextView(context);
    TextView branchPhoneNo = new TextView(context);
    TextView branchTimings = new TextView(context);

    branchName.setText("SampleBranchName" + i);
    branchNo.setText("SampleNumber" + i);
    branchPhoneNo.setText("SamplePhoneNumber" + i);
    branchTimings.setText("SampleTimings" + i);

    dataset.addView(branchName);
    dataset.addView(branchNo);
    dataset.addView(branchPhoneNo);
    dataset.addView(branchTimings);

    layout.addView(dataset);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:08:09.540

您可以格式化您的字符串并将其设置在 textview

```
String some_string = Html.fromHtml(YourHTMLFromattedString)
dbDataView.setText(some_string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T05:08:21.320

使用[Html.fromHtml(String source)](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)和 HTML`<b></b>`和`<i></i>`标签以粗体和斜体显示一些文本

```
for(BranchInfo aBranch : dbDataList ){

branchInfoString = branchInfoString + 

          "<b><i>Branch Name: </i></b>" + aBranch.getBranchName() + "\n" +
          "<b><i>Branch No: </i></b>" + aBranch.getBranchNo() + "\n" + 
          "<b><i>Branch Phone No: </i></b>" + aBranch.getBranchPhone() + "\n" + 
          "<b><i>Branch Timings: </i></b> " + aBranch.getBranchTiming() + "\n" + 

          "\n --------------------------------------- \n \n" ;  

}

//your code ...

dbDataView.setText(Html.fromHtml(branchInfoString)) ; 
```

# xml - Magento 目录导出为 CSV / PDF 模板

> ID：14597034
> 
> 赞同：1
> 
> 时间：2013-01-30T05:03:03.277
> 
> 标签：xml, excel, magento

好奇看看它是否已经完成或可能。每周我都必须将我的产品导出到一个 excel csv 或 xls 文件中，其中包含 3 个特定列 - sku、名称、价格。我有一个宏 Excel 文件设置来获取这些数据，根据 sku 将其组织到类别中，并在一个制作精良的模板中使其漂亮。

是否可以导出或自动化脚本以获取当前库存，并将其推送为预制的价目表格式，客户可以以 .xls / .pdf 格式下载？

如果我可以在我的时事通讯模板中实现它并带有指向每个链接的链接，而不是所有这些手动大惊小怪，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:25:30.000

是的，这很有可能。Magento 天生支持​​导出到 csv 和 excel。Magento 高级配置文件允许以您想要的方式执行数据格式，但是您可能已经编写了自定义模块来覆盖当前的导出功能，然后您可能需要连接一个 cron 作业以使用所需的预定义时间间隔导出数据。希望这可以帮助。

# actionscript-3 - actionscript 3.0 函数 mouseevent 事件处理程序

> ID：14597036
> 
> 赞同：0
> 
> 时间：2013-01-30T05:03:22.670
> 
> 标签：actionscript-3, flash, event-handling, mouseevent, addchild

我有一个使用鼠标事件的函数，它可以在舞台上删除和添加东西：

```
beginBut.addEventListener(MouseEvent.CLICK, bgnListener);
function bgnListener (event:MouseEvent) {
    removeEventListener(Event.ENTER_FRAME, setScreen);
    removeChild(beginBut);
    removeChild(myWord);

    healthBar.addEventListener(Event.ENTER_FRAME, healthLose);
    ball.addEventListener(Event.ENTER_FRAME, moveBall);
    myGem.addEventListener(Event.ENTER_FRAME, addGem);
    myScore.addEventListener(Event.ENTER_FRAME, scoreCount);
    healthBar.width+=1000;

} 
```

但是，在发生其他一些事情之后，我需要再次发生此事件。我已经添加了 beginBut 但是当我使用

```
beginBut.addEventListener(MouseEvent.CLICK, bgnListener); 
```

`beginBut`当添加回来的功能发生而不是当我实际点击时，事件会自动添加和删除东西`beginBut`。我也试过

```
bgnListener(); 
```

但它说参数数量错误。我已经到处搜索了，我似乎无法解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:22:18.607

如果你`bgnListener()`像现在这样调用，你会得到一个参数不匹配错误，因为函数期望接收一个`MouseEvent`.

如果您希望能够`bgnListener()`像这样自行调用，您可以为您的参数定义一个默认值`event`，它可以是`null`：

```
function bgnListener(event:MouseEvent = null)
{
    // ...
} 
```

# installation - 如何在 Codeblocks 12.11 上为 windows 安装 freeGlut？

> ID：14597038
> 
> 赞同：0
> 
> 时间：2013-01-30T05:03:34.940
> 
> 标签：installation, codeblocks, freeglut

我以前从未在 Codeblocks 中安装过新库，想知道如何安装，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:17:07.663

[首先从这里](http://freeglut.sourceforge.net/index.php#download)下载 freeglut 。不要下载源代码下载二进制文件。解压缩 zip 文件，然后您将看到包含目录、lib 目录和 greeglut.dll 文件。下载并打开 GLUT bin zip 文件后，您需要： 将 freeglut32.dll 复制到 c:\windows\system，将 freeglut32.lib 复制到 c:\program files\mingw\lib，并将 freeglut.h 复制到 c :\程序文件\mingw\include\GL。所有步骤我无法在这里解释所以有关详细信息，请点击此处的链接[或此处](http://www.sci.brooklyn.cuny.edu/~goetz/codeblocks/glut/)的[链接](http://wiki.codeblocks.org/index.php?title=Using_FreeGlut_with_Code%3a%3aBlocks)

# tomcat - 如何解决 Tomcat 6 400 错误请求错误

> ID：14597041
> 
> 赞同：0
> 
> 时间：2013-01-30T05:03:52.343
> 
> 标签：tomcat, grails, war

最近我发布了关于“如何从 Grails 应用程序的 URL 中删除应用程序名称？”的帖子。解决方案是

首先关闭您的 tomcat [从 bin 目录 ( `sh shutdown.sh`)] 然后您必须删除您的 tomcat webapps 文件夹 ( `rm -fr`*) 的所有内容，然后重命名您的`WAR`文件以`ROOT.war`最终启动您的 tomcat [从 bin 目录 ( `sh startup.sh`)]。

上述解决方案的问题是，每当我使用域名 ( `http://myapp.mydomain.com`) 访问时，tomcat 6 都会给我 400 bad request 错误。如何解决问题。使用IP（`http://1.x.x.x`）它工作正常但是域名它给了我这样的错误。

你可以参考我的旧帖子[在这里](https://stackoverflow.com/questions/5989910/how-to-remove-app-name-and-port-from-url-in-grails)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:52:39.857

您应该配置 Tomcat `Host`：http: [//tomcat.apache.org/tomcat-6.0-doc/config/host.html](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html)

如果您只有一个应用程序，您可以只编辑`name`属性的现有值。

但是，如果您需要创建一个新应用程序，并将现有应用程序保留在现有主机下，那么您还应该设置`appBase`属性，固定到不同的目录（这是您的目录`ROOT.war`）

# c++ - 在 C/C++ 中将 1 位 bmp 文件转换为数组

> ID：14597043
> 
> 赞同：3
> 
> 时间：2013-01-30T05:03:53.300
> 
> 标签：c++, c, bmp

我希望将可变高度/宽度的 1 位 bmp 文件转换为一个简单的二维数组，其值为 0 或 1。我没有在代码和大多数库中编辑图像的经验我发现涉及比我需要的更高的位深度。任何有关这方面的帮助都会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T18:10:13.960

这是读取单色 .bmp 文件的代码

（有关奇数大小的 .bmps 的小修复，请参阅下面 dmb[的答案）](https://stackoverflow.com/a/57477461/1182653)

```
#include <stdio.h>
#include <string.h>
#include <malloc.h>

unsigned char *read_bmp(char *fname,int* _w, int* _h)
{
    unsigned char head[54];
    FILE *f = fopen(fname,"rb");

    // BMP header is 54 bytes
    fread(head, 1, 54, f);

    int w = head[18] + ( ((int)head[19]) << 8) + ( ((int)head[20]) << 16) + ( ((int)head[21]) << 24);
    int h = head[22] + ( ((int)head[23]) << 8) + ( ((int)head[24]) << 16) + ( ((int)head[25]) << 24);

    // lines are aligned on 4-byte boundary
    int lineSize = (w / 8 + (w / 8) % 4);
    int fileSize = lineSize * h;

    unsigned char *img = malloc(w * h), *data = malloc(fileSize);

    // skip the header
    fseek(f,54,SEEK_SET);

    // skip palette - two rgb quads, 8 bytes
    fseek(f, 8, SEEK_CUR);

    // read data
    fread(data,1,fileSize,f);

    // decode bits
    int i, j, k, rev_j;
    for(j = 0, rev_j = h - 1; j < h ; j++, rev_j--) {
        for(i = 0 ; i < w / 8; i++) {
            int fpos = j * lineSize + i, pos = rev_j * w + i * 8;
            for(k = 0 ; k < 8 ; k++)
                img[pos + (7 - k)] = (data[fpos] >> k ) & 1;
        }
    }

    free(data);
    *_w = w; *_h = h;
    return img;
}

int main()
{
    int w, h, i, j;
    unsigned char* img = read_bmp("test1.bmp", &w, &h);

    for(j = 0 ; j < h ; j++)
    {
        for(i = 0 ; i < w ; i++)
            printf("%c ", img[j * w + i] ? '0' : '1' );

        printf("\n");
    }

    return 0;
} 
```

它是纯 C，所以没有指针转换 - 在 C++ 中使用它时要小心。

最大的问题是 .bmp 文件中的行是 4 字节对齐的，这对单比特图像很重要。所以我们将线条大小计算为“宽度/8 +（宽度/8）% 4”。每个字节包含 8 个像素，而不是一个，因此我们使用基于 k 的循环。

我希望其他代码是显而易见的——关于 .bmp 标头和托盘数据（我们跳过的 8 个字节）已经被告知了很多。

![示例图像](../Images/a16f11c62ab5de07dde2d86a1d3b6f63.png)

预期输出：

```
0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 
0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 
0 0 0 0 0 0 1 1 1 1 0 0 1 1 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 1 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 1 0 0 0 
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 1 1 1 1 1 0 0 0 0 1 0 
0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 
0 0 0 1 0 1 1 1 1 1 0 0 0 0 0 0 
0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-13T12:09:54.397

我在 20x20 的测试图像上尝试了 Viktor Lapyov 的解决方案： [![在此处输入图像描述](../Images/d5b5de17fa344fff59c017a875c387f2.png)](https://i.stack.imgur.com/ahz6l.png)

但是使用他的代码，我得到了这个输出（稍微重新格式化，但你可以看到问题）：

[![在此处输入图像描述](../Images/c094a21880f4dfb36f3bbb9f88885e6a.png)](https://i.stack.imgur.com/GvP46.png)

不读取最后 4 个像素。问题就在这里。（一行中的最后一个部分字节被忽略。）

```
// decode bits
int i, j, k, rev_j;
for(j = 0, rev_j = h - 1; j < h ; j++, rev_j--) {
    for(i = 0 ; i < w / 8; i++) {
        int fpos = j * lineSize + i, pos = rev_j * w + i * 8;
        for(k = 0 ; k < 8 ; k++)
            img[pos + (7 - k)] = (data[fpos] >> k ) & 1;
    }
} 
```

我像这样重写了内部循环：

```
// decode bits
int i, byte_ctr, j, rev_j;
for(j = 0, rev_j = h - 1; j < h ; j++, rev_j--) {
    for( i = 0; i < w; i++) {
        byte_ctr = i / 8;
        unsigned char data_byte = data[j * lineSize + byte_ctr];
        int pos = rev_j * w + i;
        unsigned char mask = 0x80 >> i % 8;
        img[pos] = (data_byte & mask ) ? 1 : 0;
    }
} 
```

一切都很好：

[![在此处输入图像描述](../Images/7f1c81893b44faf684a14023a3211cba.png)](https://i.stack.imgur.com/BnESF.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T09:13:40.830

以下 c 代码适用于任何大小的单色位图。我假设您已将位图放在缓冲区中，并从文件中初始化了高度和宽度。所以

```
// allocate mem for global buffer
if (!(img = malloc(h * w)) )
     return(0);

int i = 0, k, j, scanline;

// calc the scanline. Monochrome images are
// padded with 0 at every line end. This
// makes them divisible by 4.
scanline = ( w + (w % 8) ) >> 3;

// account for the paddings
if (scanline % 4)
    scanline += (4 - scanline % 4);

// loop and set the img values
for (i = 0, k = h - 1; i < h; i++)
    for (j = 0; j < w; j++) {
        img[j+i*w] = (buffer[(j>>3)+k*scanline])
           & (0x80 >> (j % 8));
    } 
```

希望这可以帮助。将其转换为 2D 现在是一件微不足道的事情：但是如果你在这里迷失了将 1D 数组转换为 2D 的数学假设 r & c 是行和列，而 w 是宽度，那么：。c + r * w = r, c

如果你有进一步的言论打我，我出去！！！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-09-05T07:02:07.420

让我们想想 a1x7 单色位图，即这是一个 7 像素宽的直线位图。将此图像存储在 Windows 操作系统上；因为 7 不能被 4 整除，所以它会在其中填充额外的 3 个字节。

所以BITMAPINFOHEADER结构的biSizeImage一共会显示4个字节。尽管如此，biHeight 和 biWidth 成员将正确地说明真实的位图尺寸。

上面的代码将失败，因为 7 / 8 = 0（通过与所有 c 编译器一样的四舍五入）。因此循环“i”不会执行，“k”也不会执行。

这意味着向量“img”现在包含与“数据”中包含的像素不对应的垃圾值，即结果不正确。

通过归纳推理，如果它不满足基本情况，那么它很可能对一般情况没有多大好处。

# c - 有没有办法在不执行代码的情况下检查是否为小端或大端架构构建了一个库？

> ID：14597044
> 
> 赞同：3
> 
> 时间：2013-01-30T05:04:07.620
> 
> 标签：c, endianness

有没有办法在不执行代码的情况下检查是否为小端或大端架构构建了一个库？

比方说，我有一个库 X，但是，我不知道它是为小端还是大端构建的，是否有任何命令或者有没有办法通过构建输出找出库是否已经构建小端还是大端？或者是否可以将这些信息放在图书馆中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T05:26:22.563

如果您正在运行 linux/unix，最简单的方法是使用文件命令。

```
$ file /lib64/libc-2.15.so 
/lib64/libc-2.15.so: ELF 64-bit LSB shared object, x86-64, version 1 (GNU/Linux), dynamically linked (uses shared libs), BuildID[sha1]=0x2dc710cc03932ca6fb7f223e2c0f67e21adebb4f, for GNU/Linux 2.6.32, not stripped 
```

所以信息肯定是内置在库头中的。您可以使用 readelf 命令进行检查。

```
$ readelf -h /lib64/libc-2.15.so
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 03 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - GNU
  ABI Version:                       0
  Type:                              DYN (Shared object file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x3fc4c21840
  Start of program headers:          64 (bytes into file)
  Start of section headers:          2062800 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         10
  Size of section headers:           64 (bytes)
  Number of section headers:         43
  Section header string table index: 42 
```

在Windows中，我不知道如何检查，但应该在dll的标题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:29:18.030

很少有现存的机器可以在相同的硬件上运行小端或大端代码，所以这个问题几乎无关紧要。IIRC，有一些机器（MIPS RISC 机器？）可以运行大端或小端，如果需要，可以在运行时切换。

但是，如果您的库是为 x86/64（小端架构）编译的，则它不适用于 SPARC 或 PPC（大端架构），但问题不在于字节序，而是用于不同的芯片是完全不同的，不兼容的。

# php - 无法将确切的数据加载到动态填充的表行中

> ID：14597045
> 
> 赞同：0
> 
> 时间：2013-01-30T05:04:10.063
> 
> 标签：php, codeigniter

我有一个从数据库填充数据的表，在表 td 中，我想使用选择框选项从我的表中填充我选择的数据。

使用以下代码，我只能在每行中填充选择框。但我无法在选择框中显示每一行的确切值。

![在我当前的表中输出，在此图像中显示为 shoing。所有选定的下拉菜单都是通用的。它与 db 表中的不完全一样]][1]

请帮我解决这个问题

在里面`for each loop`我保留了这个

`<div style=width:510px> <?php echo form_dropdown('display_id', $display_select_options,$fdisplay_id, 'class="selectbox" id="my_id"'); ?> </div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:40:08.113

这是关键

**控制器**

```
 for($i=1;$i<=11;$i++)
    {
      $query = $this->Booksmodel->getDisplay();
      // this will pass only one value means overwrite 
      //previous value of display id
      //$data['fdisplay_id']['value'] = $query['display_id'];   

      //use this
      $data['fdisplay_id'][] = $query['display_id'];
   } 
```

**在视图循环**

```
 define $i = 0 and in loop $i++;
    <div style=width:510px> 
          <?php echo form_dropdown('display_id', $display_select_options,$fdisplay_id[$i], 'class="selectbox" id="my_id"'); ?> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:49:37.657

```
 // $fdisplay_id should be an associative array.
        //Here's an example to help you out

    $options = array(
              'small'  => 'Small Shirt',
              'med'    => 'Medium Shirt',
              'large'   => 'Large Shirt',
              'xlarge' => 'Extra Large Shirt',
            );

    $shirts_on_sale = 'xlarge'; 
    //for multiselect $shirts_on_sale = array('xlarge','large');

   echo form_dropdown('shirts', $options, $shirts_on_sale); 
```

# magento-1.7 - Magento 1.7 离线维护扩展

> ID：14597048
> 
> 赞同：1
> 
> 时间：2013-01-30T05:04:26.087
> 
> 标签：magento-1.7

在 Magento 中，如何从管理员端保持商店离线或维护模式。管理员必须能够浏览 magento 商店，但仅限于其他用户。任何插件或脚本或如何从管理员登录中进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T01:06:10.467

看看这个[http://www.magentocommerce.com/magento-connect/all4coding-offline-maintenance-page.html](http://www.magentocommerce.com/magento-connect/all4coding-offline-maintenance-page.html)它提供了你正在寻找的东西。与 magento 1.4 - 1.8 兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:01:30.810

[http://www.magentocommerce.com/magento-connect/store-maintenance.html](http://www.magentocommerce.com/magento-connect/store-maintenance.html) 提供您正在寻找的内容以及更多内容

# android - 避免冗余构建以使 tessaract android 库 && 将 tessaract 库链接到 C++ NDK

> ID：14597055
> 
> 赞同：2
> 
> 时间：2013-01-30T05:05:05.303
> 
> 标签：android, makefile, java-native-interface, tesseract

现在我正在使用 Tessaract 和 Android NDK 在 MacOSx 上制作应用程序。我使用 Eclipse 作为 IDE 来开发程序。

我有两个问题要问：

1）。我使用最著名的示例“tess-two”设置了 tessaract，并进行了一些修改以适应我现有的代码。我将文件夹“com_googlecode_leptonica_android”和“com_googlecode_tessaract_android”复制到 /jni 文件夹。然后编辑 Android.mk 以设置这些库文件夹的路径。一切正常！除了一件事..每次我构建项目时，我都需要一次又一次地构建“leptonica”和“tessaract”库..为了获得 libtess 和 liblept.. 这需要很长时间。我怎样才能编辑android makefile（Android.mk）而不是构建那些库..只编译我的代码......就是这样......这是我的Android.mk

```
LOCAL_PATH := $(call my-dir)
MY_PATH := $(LOCAL_PATH)
TESSERACT_PATH := $(call my-dir)/com_googlecode_tesseract_android
LEPTONICA_PATH := $(call my-dir)/com_googlecode_leptonica_android

include $(call all-subdir-makefiles)
include $(CLEAR_VARS)
include /Applications/eclipse-android/OpenCV-2.4.3-android-sdk/sdk/native/jni/OpenCV.mk

LOCAL_PATH := $(MY_PATH)
LOCAL_MODULE    := my_project
LOCAL_SRC_FILES := cppmain.cpp
LOCAL_LDLIBS +=  -llog -ldl

include $(BUILD_SHARED_LIBRARY)
) 
```

2）。我发现了很多关于在 Android 中使用 tessaract 的例子。然而，他们中的大多数使用 tessaract 和 Java（通过 JNI 调用）并从 Java 代码调用 JNI（Java -> Tessaract C++ JNI -> Tessaract C++）。我找不到任何从 c++ NDK（Java -> my JNI -> my C++ -> Tessract C++）调用 tessaract 的示例。我想直接从 c++ 调用 tessaract 的原因是可移植性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:09:41.970

使用**PREBUILT_STATIC_LIBRARY**，例如

```
LOCAL_PATH = $(MY_PATH)/com_googlecode_tesseract_android/lib
include $(CLEAR_VARS)
LOCAL_MODULE := tesseract
LOCAL_SRC_FILES := libtesseract.a
include $(PREBUILT_STATIC_LIBRARY)

LOCAL_PATH = $(MY_PATH)/com_googlecode_leptonica_android/lib
include $(CLEAR_VARS)
LOCAL_MODULE := leptonica
LOCAL_SRC_FILES := libleptonica.a
include $(PREBUILT_STATIC_LIBRARY)

LOCAL_PATH := $(MY_PATH)
LOCAL_MODULE    := my_project
LOCAL_SRC_FILES := cppmain.cpp
LOCAL_LDLIBS +=  -llog -ldl
LOCAL_LDFLAGS += -ltesseract -lleptonica

include $(BUILD_SHARED_LIBRARY) 
```

tesseract 项目不包含预构建的库，但是如果您按照官方说明进行构建，这些库将被构建。使用 PREBUILT_STATIC_LIBRARY 只会帮助您一直避免不必要地重建这些库。只要您不自己更改这些库，建议对 libjpeg 和 libpng 使用相同的方法。

# php - 覆盖 Theme-Options.php 文件

> ID：14597060
> 
> 赞同：1
> 
> 时间：2013-01-30T05:05:39.837
> 
> 标签：php, wordpress

我很难从父母 theme-options.php 中删除呼叫。我的问题是：我的父主题不是从 header.php 调用徽标，我可以轻松替换它，而是从 theme-options.php 通过放置图像的 url 路径来调用徽标，所以
`require ( get_template_directory() . '/settings/theme-options.php' );`

我想“取消要求”这个调用子主题并添加要调用的函数
`require ( get_stylesheet_directory() . '/theme-options.php' );`

这样我可以修改选项文件并删除对 url 的调用。我之前遇到过类似的问题，并通过使用该`unregister`函数修复了它，但我不确定如何“取消”对文件的此调用。

任何帮助将不胜感激。

在深入搜索之后，有一个函数可以调用默认值，如下所示：

```
function max_magazine_default_options() {
$options = array(
    'logo_url' => get_template_directory_uri().'/images/logo.png',
    'favicon_url' => '',
    'rss_url' => '',
    'show_slider' => 1,
    'slider_category' => 0,
    'show_carousel' => 1,
    'carousel_category'=> 0,
    'show_feat_cats' => 1,
    'feat_cat1'=> 0,
    'feat_cat2'=> 0,
    'feat_cat3'=> 0,
    'feat_cat4'=> 0,
    'show_posts_list' => 1,
    'show_author' => 1,
    'show_page_comments' => 1,
    'show_media_comments' => 1,
    'ad468' => '<a href='.get_site_url().'><img src='.get_template_directory_uri().'/images/ad468.png /></a>',
    'inline_css' => '',
    'meta_desc' => '',
    'stats_tracker' => '',
    'google_verification' => '',
    'bing_verification' => '',
);
return $options; 
```

}

所以我猜我可以删除这个函数并用我自己的替换它并改变值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:14:14.770

在不编辑父级的情况下能够做到这一点的唯一方法是，如果它们`require()`在由钩子调用的函数中调用，例如`init`,`setup_theme`等。然后你可以简单地做：

```
remove_action( 'hook', 'their_function_name' ); 
```

然后你必须将函数复制/粘贴到你的`functions.php`文件中，编辑它，然后使用相同的钩子重新添加它：

```
add_action( 'hook', 'your_function_name' ); 
```

您可能还必须确保函数的优先级（第三个参数）正确，以确保它正确地覆盖它。

# javascript - Angular.js 将控制器组织到 App 命名空间中

> ID：14597062
> 
> 赞同：28
> 
> 时间：2013-01-30T05:05:56.193
> 
> 标签：javascript, angularjs

我开始在一个新项目中使用 Angular.js，从基本教程中，我看到主要是一个包含所有控制器函数的单个 controllers.js 文件，每个控制器函数都绑定到窗口对象。

似乎更好的做法是使用现有的“myApp”命名空间来添加控制器，例如：

```
myApp.controllers = {};
myApp.controllers.userItem = function($scope) {} 
```

所有控制器都将是创建的“myApp.controllers”对象或“window.myApp.controllers”的一部分。

有没有人建议一种更好或更有组织的方式来处理控制器或其他项目、自定义服务、指令等将使用相同的结构。

除此之外，我正在讨论将每个控制器放入自己的文件中，最终将合并用于生产，但根据应用程序的大小，它可能有点矫枉过正，只会导致更多的工作在文件之间跳来跳去.

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-30T05:26:07.680

好问题！

我不喜欢教程和文档对其代码采用“逐层打包”的方法。我认为这样做可能是为了方便教授概念，这很好，但这种方法在现实世界中的适用性有限。

按功能打包是一种更好的方法：

```
|- README
|- src/
   |- app/
      |- app.js
      |- feature1/
      |- feature2/
      |- ...
   |- vendor/
      |- angular/
      |- bootstrap/
      |- ...
   |- assets/
   |- less/
   |- index.html 
```

在内部`src/app`，您可以根据您正在处理的站点部分（例如菜单）和路线（例如产品列表和产品详细信息）打包您的内容。每个都可以这样声明：

```
angular.module( 'products', [
  'productCatalog',
  ...
]) 
```

每个模块都可以有自己的路由：

```
.config( [ '$routeProvider', function( $routeProvider ) {
  $routeProvider.when( '/products', { ... } );
  $routeProvider.when( '/products/:id', { ... } );
}); 
```

和控制器等：

```
.controller( 'ProductListCtrl', [ '$scope', function ( $scope ) { ... } ]); 
```

所以所有的东西都打包在同一个目录中。您可以将所有组件放在单独的文件中，每个文件一个模块（如果您愿意；我通常这样做）。在您的顶级应用程序中，您只需声明您的依赖项：

```
angular.module( 'app', [
  'products',
  ...
]); 
```

您也可以单独捆绑通用指令，以将您的测试和文档放在一起 - 再次，按功能！这些组件中的每一个都可以在未来的项目中拖放重复使用。

一个很好的参考实现是[angular-app](http://github.com/angular-app/angular-app)。看看这个！

**更新：**自从有了这个答案，我开始了一个名为[ngBoilerplate](http://joshdmiller.github.com/ng-boilerplate)的 AngularJS 项目 kickstarter/模板来封装这些概念（以及许多其他最佳实践）和一个复杂的构建系统来支持它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:10:08.957

我通常会

```
(angular
 .module('app.controllers', ['ng', ...])
 .controller('myContrA', [
     /******/ '$scope',
     function ($scope) {
     }
 ])
 .controller('myContrB', [
     /******/ '$scope',
     function ($scope) {
     }
 ])
); 
```

通过这种方式，您可以将其添加`app.controllers`为依赖项，从而使您的所有控制器都可用。

# ios - 如何实现 AFOAuth2Client 以获取刷新令牌？

> ID：14597063
> 
> 赞同：3
> 
> 时间：2013-01-30T05:05:59.197
> 
> 标签：ios, ipad, oauth-2.0, restkit, afnetworking

我正在尝试在我的 iphone 应用程序中实现 Oauth 身份验证。

**设想**

创建 AFOAuth2Client 的子类并覆盖该方法

```
- (void)authenticateWithUsernameAndPassword:(NSString *)username
                                   password:(NSString *)password
                                    success:(void (^)(AFOAuthCredential *credential))success
                                    failure:(void (^)(NSError *error))failure; 
```

进行身份验证并将身份验证令牌设置为客户端中的标头，并使用其 sharedInstance 调用 Web 服务（使用 Restkit）。

**问题** 我不能做的是关于刷新令牌。我有获取刷新令牌的 api。

1.  我的应用程序如何知道令牌已过期？
2.  在哪里检查令牌过期并调用以获取新的刷新令牌
3.  AFOAuth2Client 中有一个选项可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-23T11:01:24.257

```
- (NSURLSessionTask *)authenticateUsingOAuthWithURLString:(NSString *)URLString 
                               refreshToken:(NSString *)refreshToken
                               success:(void (^)(AFOAuthCredential *credential))success
                               failure:(void (^)(NSError *error))failure; 
```

使用此方法，您可以向身份验证服务器提供新的 refreshToken。在此之前，您需要在用户默认值**中将 AFOAuthCredential**保存为 NSData，然后在调用 api 时检索 AFOAuthCredential 并使用此方法检查它是否已过期。

```
func refreshTokenIfUnavailable(completionHandler : @escaping(_ finished:Bool,_ error:Error) -> ()) {
    let credentialData = UserDefaults.standard.object(forKey: CREDENTIAL) as? NSData

    if let credentialData = credentialData {
        let credential = NSKeyedUnarchiver.unarchiveObject(with: credentialData as Data) as? AFOAuthCredential

        if let _ = credential
        {
            if credential!.isExpired {
                let urlString = OAUTH_BASE_URL
                let url = URL(string: urlString)
                let oAuthManager = AFOAuth2Manager(baseURL: url!, clientID: YOUR_AUTH_CLIENT_ID secret: YOUR_AUTH_SECRET_ID)
                oAuthManager.authenticateUsingOAuth(withURLString: "oauth/token", refreshToken: (credential?.refreshToken)!, success: { (credential) in
                    self.saveAccessToken(credential: credential)
                    completionHandler(true,YOUR_ERROR))
                }, failure: { (error) in
                    completionHandler((credential != nil),NSError(domain: "", code: 204, userInfo: [NSLocalizedDescriptionKey: error.localizedDescription]))
                })
            }
            completionHandler((credential != nil),YOUR_ERROR_MESSAGE))
        }
    }
}

func saveAccessToken(credential : AFOAuthCredential) {

    KeychainService.saveAccessToken(service: ACCESS_TOKEN as NSString, data: credential.accessToken as NSString)

    let credentialData = NSKeyedArchiver.archivedData(withRootObject: credential)
    let userDefaults = UserDefaults.standard
    userDefaults.set(credentialData, forKey: "credentials")
} 
```

希望这个能满足你的需要。快乐编码:)

# ember.js - 将静态元素添加到 CollectionView

> ID：14597067
> 
> 赞同：1
> 
> 时间：2013-01-30T05:06:22.427
> 
> 标签：ember.js

是否可以让 CollectionView 呈现一个`<ul>`容器，其项目为's，并在最后`<li>`插入一个静态项目？`<li>`我们正在迭代一个呈现为链接的对象数组，并希望在列表末尾插入一个“新”链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:27:57.923

```
MyApp.TheView = Ember.CollectionView.extend({
  content: [1, 2, 3, 4],
  tagName: 'ul',
  itemViewClass: Ember.View.extend({
    tagName: 'li',
    template: Ember.Handlebars.compile("{{view.content}}")
  }),
  didInsertElement: function() {
    this.pushObject(Ember.View.create({
      tagName: 'li',
      template: Em.Handlebars.compile("<button>NEW</button>")
    }));
  }
}) 
```

这应该有帮助...

# heroku - heroku 的 stackmob 插件

> ID：14597072
> 
> 赞同：1
> 
> 时间：2013-01-30T05:06:37.980
> 
> 标签：heroku, add-on, stackmob

我们正在寻找使用 Stackmob 和 Heroku 作为后端来构建我们的移动应用程序。

有一个 Heroku 插件使开发人员能够使用 Rails 控制应用程序服务器端逻辑。

此插件没有太多可用的文档，也没有示例。

插件有相当多的媒体报道，但没有明确的实现和用例路径。

如果社区中的任何人有一些见解，我们和其他开发人员肯定会从听到更多信息中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:16:38.223

我是 StackMob 的平台布道者。

friism 是正确的，我们最近停止了 StackMob Heroku 插件。（基本上是一种在 Heroku 上使用 StackMob 配置帐户并更快地启动和运行的方法）

此更改不会阻止您在 Heroku 平台上使用 StackMob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:34:10.100

我相信 StackMob Heroku 插件已停产。您仍然可以直接在[StackMob](https://www.stackmob.com/)网站上注册 StackMob 并在您的 Heroku 应用程序中使用。他们有多个入门指南，包括[Ruby](https://www.stackmob.com/devcenter/docs/Getting-Started%3a-Ruby)（如果您使用的话）。

# php - 尝试手动创建递归目录迭代器

> ID：14597074
> 
> 赞同：0
> 
> 时间：2013-01-30T05:06:50.743
> 
> 标签：php, recursion, iterator, directory

我对 PHP 和一般编程比较陌生，我试图浏览一个目录并找到所有子目录，以及这些子目录的所有子目录，等等。我用谷歌搜索了一下，偶然发现了递归的概念，我立即知道这是我需要的，因为从概念上我已经意识到了它，但只是不知道它是否可能。由于我对 PHP 语言结构（以及与此相关的一般编程结构）的了解有限，我在这里遇到了一些障碍。我看到了一些关于语言中内置的迭代器的信息，但我想了解其中的内容并能够自己将它们组合在一起。

我创建了一个函数，据我所知，它应该能够获取一个已经预先填充了根文件夹中目录的数组（使用以前的 glob 函数），然后查看其中的每一个，然后继续深入研究，直到找不到新目录……但这似乎不是这里发生的事情。它吐出一个错误，告诉我字符串不支持“[]”运算符，但据我所知，“$arrayName[$key]”是一个数组对象，而不是字符串。即使解决了这个特定问题，各位专家能否告诉我这是否可行，如果不行，需要做什么？

```
$directory_list[0] = "directory1";
$directory_list[1] = "directory2";
$directory_list[2] = "directory3";

function iterate_unknown_directories($arrayName) {
    foreach ($arrayName as $key => $arrayObject) {
        $directories_check = glob($arrayObject."/*",GLOB_ONLYDIR);
        foreach ($directories_check as $directory) {
            if ($directory !== getcwd()) {
                if ($directory !== $arrayObject) {
                    $arrayName[$key][] = $directory;
                }
            }
        }
        if (is_array($arrayName[$key])) {
            iterate_unknown_directories($arrayName[$key]);
        }
        echo $arrayObject;
    }
}

iterate_unknown_directories($directory_list); 
```

我浏览了我能找到的资源，但似乎没有一个能完全满足我的需要。非常感谢您阅读本文，并希望您能伸出援手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:26:00.363

我相当肯定你把问题复杂化了。试着看看这个：

```
function iterate_unknown_directories($dirs)
{
    foreach ($dirs as $dir)
    {
        $subDirs = glob($dir . "/*", GLOB_ONLYDIR);

        /* print out all the new directories*/
        foreach ($subDirs as $subDir)
            echo $subDir . "<br>";

        // recursively search the new directories
        iterate_unknown_directories($subDirs);
    }
}

$directories = array(
    'test_dir'
);

iterate_unknown_directories($directories); 
```

# java - 如何反转这个位操作数？

> ID：14597076
> 
> 赞同：0
> 
> 时间：2013-01-30T05:06:54.833
> 
> 标签：java, binary, bits

基本上我有一个用按位操作数操作的数字，如您在此处看到的：

```
is[i_6_] = i_9_ - 256 | ~0x7fffffff; 
```

我需要反转/撤消这个位操作数..

```
| ~0x7fffffff 
```

这样我就可以拥有以下价值：

```
i_9_ - 256r help! 
```

如何反转这个位操作数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:17:38.260

首先我假设你写的表达式实际上是`(i_9_ - 256) | ~0x7fffffff`

```
| ~0x7fffffff 
```

实际上与

```
| 0x80000000 
```

这意味着它将使原始数字的最高位（根据您所说的 i_9_ - 256）变为“1”，而不管其原始值如何。所以我不认为你可以扭转这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:23:10.147

正如您可能知道的那样，仅删除该位将是：

```
& 0x7fffffff 
```

但是，由于您需要将其恢复到之前的状态，因此您需要 - 一般而言 - 在 OR'ing 之前保存该最重要位的状态，以确定您是否应该清除该位。那么，获得结果的最直接方法是重新使用 i_9_ 的原始值，但这次没有 OR 操作：

```
= i_9_ - 256 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:12:31.523

使用这个：并且与值的（〜）倒数

```
i_9_ - 256 & 0x7fffffff; 
```

逆的逆~(~)

# c++ - 你怎么能忽略 cin 直到它进入下一行？

> ID：14597079
> 
> 赞同：0
> 
> 时间：2013-01-30T05:07:03.063
> 
> 标签：c++

如果您有一个使用 cin 逐字符读取的文本文件：

```
char text;
cin >> text;
cout << char << endl; 
```

假设您想忽略以“>”开头的任何行，直到新行，您该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:15:52.630

您可以比较`char`使用`'>'`::

```
int strncmp ( const char * str1, const char * str2, size_t num ); 
```

如果找到，则跳过直到`char`读取等于`'\n'`即，跳过直到`strncmp`返回`0``( char, '\n', 1 )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:45:42.857

通常你想使用 std::istream::ignore，比如：

```
static const int max_line = 65536;

if (text == ">")
    std::cin.ignore(max_line, '\n'); 
```

请注意，我已指定要跳过的最大距离为 64K 字节。许多人推荐类似的东西，这基本上意味着在找到分隔符之前`std::numeric_limits<std::streamsize>::max()`跳过*任意数量的文本（在这种情况下为换行符）。*

IMO，指定如此庞大的数字通常是一个糟糕的主意——如果你长时间*没有*看到换行符，那么停下来假设你得到了错误的数据是安全的。一旦你阅读了足够多的内容以*合理*地确定存在问题，最好停止并警告用户，而不是花几分钟时间让程序显然被锁定，读取千兆字节的无用数据（然后可能会给用户一个错误无论如何都要留言）。

另一种可能性（特别是如果你相当确定你会得到很好的输入）是从阅读整行开始（例如，使用 std::getline），然后如果它以 a 开头，则`>`跳过处理该行，然后继续回来阅读下一篇。

# php - 设置 utmgclid 时是否不需要 utmcsr cookie？

> ID：14597081
> 
> 赞同：1
> 
> 时间：2013-01-30T05:07:38.877
> 
> 标签：php, cookies, google-analytics

我正在使用 PHP-GA 库，它提供了 GA 的 PHP 实现：[http ://code.google.com/p/php-ga/](http://code.google.com/p/php-ga/)

当用户通过 Adwords 链接访问我的网站时，未设置 utmcsr（源）cookie，而是设置了 utmgclid（Google 点击 ID）。

如果未设置 utmcsr cookie，PHP-GA 不允许我向 GA 发送活动跟踪数据。所以我想知道当我只发送 utmgclid 而没有 utmcsr 时是否可以？（是的，我需要为此修改 PHP-GA 库）。所有广告系列跟踪数据（尤其是来源/媒体）是否仍然正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T13:15:33.653

一个非常晚的答案，但我想迟到总比没有好。我注意到如果存在 utmgclid 参数，最好设置源“google”和介质“cpc”。否则，电子商务跟踪的数据不一致（例如，比较辅助转化和销售业绩）。

# winforms - 什么是 CssHierarchyControl？

> ID：14597088
> 
> 赞同：0
> 
> 时间：2013-01-30T05:08:10.557
> 
> 标签：winforms, visual-studio, visual-studio-2012, controls

在 SO 上有[0 个结果](https://stackoverflow.com/search?q=CssHierarchyControl)，在 Google 上`CssHierarchyControl`有[3 个不相关的结果](https://www.google.co.uk/search?q=CssHierarchyControl%20C%23)`CssHierarchyControl C#`。

这是什么控制？它与 a有何不同`ComboBox`？

从悬停在每个控件上的工具提示中：`ComboBox`位于 v4.5.0.0，而`CssHierarchyControl`状态为 v11.0.0.0。

![CHC](../Images/f648b64080ac27b39d68656f7b9ce8be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:56:34.657

我的`CssHierachyControl`机器上也有。查看工具箱上的“选择项目”上下文菜单，我看到它被列为程序`Microsoft.TeamFoundation.Client`集中命名空间的一部分`Microsoft.TeamFoundation.Client`。它也是 11.0.0.0 版本，与 Visual Studio 2012 的版本号 11 匹配。

查看 dotPeek 中的类，它确实继承自它，`System.Windows.Forms.ComboBox`因此它是一个组合框。

它没有作为[Microsoft.TeamFoundation.Client](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.client.aspx)命名空间的一部分列出，因此它不适合公共使用，因此您应该将其从工具列表中删除，因为没有理由使用它。

# java - cursor.getCount() 使用 rawQuery 返回错误的计数

> ID：14597090
> 
> 赞同：0
> 
> 时间：2013-01-30T05:08:13.910
> 
> 标签：java, sqlite, cursor

我使用 rawQuery 从数据库表中获取记录。我检查了日志中的查询，它在 SQLite 中完美执行。但是 cursor.getCount 返回错误的行数和包含错误结果集的游标。我使用了以下代码：

```
Cursor productCursor = dataHelper.rawQuery(query_str, null);
int list_count = productCursor.getCount();
Log.d("list_count", ""+list_count);
productCursor.moveToFirst();
while(productCursor.isAfterLast() == false) {
    ......
} 
```

实际上有 4 条记录，但游标只包含 3 条记录。在 SQLite 中测试并得到正确的结果集。如果有人能指出我的错误，那将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T19:24:16.090

尝试这个..

```
productCursor.moveToFirst();

do {
  // your code..

} while (productCursor.moveToNext()); 
```

# html - 为什么徽标链接不去任何地方？

> ID：14597091
> 
> 赞同：0
> 
> 时间：2013-01-30T05:08:14.717
> 
> 标签：html

[http://www.nanaplum.com/collections/frontpage/products/hurricane-sandy-red-cross](http://www.nanaplum.com/collections/frontpage/products/hurricane-sandy-red-cross)

标志是一个链接，它的href是[http://www.nanaplum.com](http://www.nanaplum.com)

但它实际上不起作用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:14:05.297

请删除此 #cart-summary 的填充顶部和高度。此 div 移动到该徽标上，以使链接不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:15:56.623

`position:relative`删除 .css中的 css 属性`div#cart-summary`。

这会使`div#cart-summary`徽标重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:13:23.600

div#cart-summary 在它前面。

[Firebug](http://getfirebug.com/)或 Chrome 的[开发者工具等工具](https://developers.google.com/chrome-developer-tools/docs/elements)非常适合调试此类问题。在 Chrome 中，您可以右键单击 >> 检查元素，然后四处寻找。执行此操作时，您可以操作页面，尝试删除该 div 节点之类的操作，找到可以访问的链接，然后决定如何在标记或 CSS 中修复它。

现在去了解[z-index](https://developer.mozilla.org/en-US/docs/CSS/z-index)。

# c++ - 无法获取 std::mutex 以正确保护线程访问

> ID：14597092
> 
> 赞同：2
> 
> 时间：2013-01-30T05:08:14.717
> 
> 标签：c++, multithreading, class, c++11, mutex

[使用 Visual Studio Professional 2012 的 C++]

大家好，我无法使用 std::mutex 来防止 main() 更改第二个线程正在访问的变量。在以下示例中（这是我实际程序的大量简化表示），函数 update() 从 main() 中的 std::thread t2 运行。update() 检查向量 world.m_grid[i][j].vec 是否为空，如果不是，则修改包含的值。main() 也访问并偶尔清除此向量，因此如果 main() 在 update() 中的空检查之后但在修改 world.m_grid[i][j].vec[0] 之前清除该向量，您会得到向量下标超出范围错误。我正在尝试使用 std::mutex 通过在 update() 空检查之前锁定屏障来防止这种情况发生，并在 world.m_grid[i][j].vec[0] 被 update() 修改后释放它,

```
#include <cstdlib>
#include <thread>
#include <mutex>
#include <vector>
using namespace std;

mutex barrier;

class World
{
public:
    int m_rows;
    int m_columns;
    class Tile
    {
    public:
        vector<int> vec;
        int someVar;
    };

    vector<vector<Tile> > m_grid;
    World (int rows = 100, int columns = 200): m_rows(rows), m_columns(columns), m_grid(rows, vector<Tile>(columns)) {}
};

void update(World& world)
{
    while (true)
    {
        for (int i = 0; i < world.m_rows; ++i)
        {
            for (int j = 0; j < world.m_columns; ++j)
            {
                if (!world.m_grid[i][j].vec.empty())
                {
                    lock_guard<mutex> guard(barrier);
                    world.m_grid[i][j].vec[0] += 5;
                }
            }
        }
    }
}

int main()
{
    World world;
    thread t2(update, ref(world));
    while (true)
    {
        for (int i = 0; i < world.m_rows; ++i)
        {
            for (int j = 0; j < world.m_columns; ++j)
            {
                int random = rand() % 10;
                if (world.m_grid[i][j].vec.empty() && random < 3) world.m_grid[i][j].vec.push_back(1);
                else if (!world.m_grid[i][i].vec.empty() && random < 3) world.m_grid[i][j].vec.clear();
            }
        }  
    } 
t2.join();
return 0;              
} 
```

我必须在这里遗漏一些基本的东西。理想情况下，该解决方案将锁定 world.m_grid[i][j]（让 main() 可以访问 world.m_grid 的其余部分），我认为这将涉及在“Tile”类中包含一个互斥锁，但我遇到了与此处描述的相同问题：[Why does std::mutex create a C2248 when used in a struct with WIndows SOCKET?](https://stackoverflow.com/questions/14263836/why-does-stdmutex-create-a-c2248-when-used-in-a-struct-with-windows-socket) 并且无法使描述的解决方案适应我的项目，所以如果有人也能帮助我，那将是非常有帮助的。

-感谢您的时间。

[编辑] 拼写

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:24:30.363

访问数组时，您还需要在 main 函数中锁定互斥锁：

```
 ...
 for (int j = 0; j < world.m_columns; ++j) {
      lock_guard<mutex> guard(barrier);
      int random = rand() % 10;
      if (world.m_grid[i][j].vec.empty() && random < 3) world.m_grid[i][j].vec.push_back(1);
      else if (!world.m_grid[i][i].vec.empty() && random < 3) world.m_grid[i][j].vec.clear();
}
... 
```

使用互斥锁，您需要保护对数据的所有访问。到目前为止，在您的代码中，线程 2 在访问数据时会生成一个互斥锁。但是，主线程可以更改代码，因为它对互斥锁一无所知。所以主线程可以简单地改变数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:07:24.373

您遇到的问题是您正在使用所谓*的客户端同步*。换句话说：您有多个线程，并且在*每个*线程都写入/读取共享资源之前，您必须使用屏障。由于 tune2fs 已经回复，您必须`lock_guard<mutex> guard(barrier)`在主线程调用之前。

*也就是说，实现服务器端同步*对您来说会好得多。换句话说，每个*块*（如果有超过 1 行——比如在你的主线程中——你需要发送所有这些）必须由服务器同步（`World`）。

目前我可以建议使用一种方法`void modify(Func<void(vector<int>&)> mutator);`，`World`这样您就可以通过这种方法将所有逻辑作为 lambdas（最简单的）发送。在内部`modify`，您将使用`lock_guard`拥有`mutex`的标准`World`。该解决方案更具可扩展性和**安全**性（您真的不想查看调用修改向量的代码的所有位置）。

# c++ - 围绕两个范围的幂循环变量

> ID：14597097
> 
> 赞同：1
> 
> 时间：2013-01-30T05:08:27.960
> 
> 标签：c++, c, idioms

哪种结构更可取，为什么？

A：

```
if(i < 1023)
   ++i;
else
   i = 0; 
```

乙：

```
++i;
if(i == 1024)
  i = 0; 
```

C：

```
i = (i + 1) & 1023; 
```

或其他？

我喜欢替代 C，因为它很小并且没有分支（因此，没有管道中断），但它执行的 AND 操作仅在每 1024 次中的 1 次中有用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:25:00.370

我每次都会选择选项**C。**它可能不太明显，但是对于任何有编码经验的人来说，这个习语都足够清楚，它可以为你节省那个条件分支。在现代（即过去 10 年中任何容易发生的事情）超标量处理器上，瓶颈是内存和/或分支预测；像二进制 AND 这样的算术运算在一个很好的近似值上是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:20:26.547

在 100k for 循环中运行它们会给我以下结果：
A：10.439 秒
B：
9.845 秒 C：9.482 秒
就我个人而言，我会使用 A，因为我习惯了这种表示法并且它保持清晰。如果速度是一个问题，C 似乎是这三个中最好的。

# oracle - PLSQL 日期过滤器错误

> ID：14597101
> 
> 赞同：0
> 
> 时间：2013-01-30T05:08:37.680
> 
> 标签：oracle, plsql, oracle10g, oracle11g

我有一张自 2012 年以来的数据表。我需要`31 days back`从`given date`. 所以我写了下面的查询来获取数据。

```
select ('[' || work_date || '] ' || field_name || ' - ' ||work_desc) d
from DAILY_WORK
where TO_CHAR(work_date,'DD/MM/YYYY') >= TO_CHAR(to_date('30-Jan-13','dd-MON-yyyy') - (31),'DD/MM/YYYY')
order by work_date desc 
```

当我执行此查询时，它仅返回以下日期的数据。

```
31-AUG-12
31-OCT-12
30-DEC-12
31-DEC-12 
```

但实际上我需要获取数据`from 2012-12-30 to 2013-01-30`。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:18:16.630

用这个：

```
select ('[' || to_char(work_date, 'dd-MON-yyyy') || '] ' || field_name || ' - ' ||work_desc) d
from DAILY_WORK
where work_date >= to_date('30-Jan-2013','dd-MON-yyyy') - 31
order by work_date desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:43:38.667

您可以使用以下查询：

```
select * from DAILY_WORK where work_date >= TRUNC(to_date('01-30-2013','MM/DD/YYYY')) - 31 
```

检查您使用的工具的日期格式根据我使用的工具，日期格式是“MM/DD/YYYY”

此查询给出正确的结果。您可以检查。

# scala - Scala Anorm 为什么 scala 抱怨结果没有特征？

> ID：14597107
> 
> 赞同：2
> 
> 时间：2013-01-30T05:08:56.030
> 
> 标签：scala, playframework-2.0, anorm, playframework-2.1

我还没有看到这样做的任何地方，但我有以下内容：

```
abstract class Player { val user_id: Long }
case class AlivePlayer(user_id: Long, target_id: Long) extends Player
case class DeadPlayer(user_id: Long) extends Player

def getPlayers(game: Game):Option[List[Player]] = DB.withConnection { implicit connect =>
  SQL(
    """
      SELECT * FROM game_participants WHERE game_id = {game_id})
    """
  ).on(
    'game_id -> game.id
  ).as(Game.participantParser *)
} 
```

在这种情况下，我收到编译器错误并显示以下消息

```
error: type mismatch;  found   : anorm.ResultSetParser[List[Product with Serializable with models.Player]]  required: anorm.ResultSetParser[Option[List[models.Player]]]
).as(Game.participantParser *) 
```

为什么仅将返回类型指定为 对我来说是不够的`Option[List[Player]]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:50:28.640

鉴于错误消息，听起来它`Game.participantParser`没有返回`Option[List[Player]]`但是`List[Player]`。恕我直言，`getPlayers`应该只返回一个`List[Player]`可能为空的。

如果你想返回一个`Option[]`，你必须`Some(...)`在你的列表前面添加，或者`None`如果列表为空则只返回。

正如评论中所说，如果没有`Game.participantParser`定义，就无法进一步帮助您。

希望这可以帮助。

# ios - 在@synthesize 名称处的 [order setPrice:price] 断点上的程序粉碎

> ID：14597121
> 
> 赞同：1
> 
> 时间：2013-01-30T05:10:31.367
> 
> 标签：ios, objective-c

请帮我解决一个简单的问题。我是objective-c的初学者，我刚刚从java切换到objective-c。我很了解java，但不是很深入。

我正在构建一个 iphone 应用程序。我的应用程序非常简单。我的 iphone 应用程序的目的是在餐厅用我的 iphone 应用程序点菜。

**我的应用程序的进度：** 我的应用程序现在只有几个视图面板和按钮 :) [这](http://speedy.sh/Sd3vj/v1.zip)是我的应用程序源代码，firstview [screenshot](http://s14.postimage.org/kzhwfl4v5/B070_D9_B2_1_EBC_4_BB4_8004_8_D582_A235661.jpg) & secondview [screenshot](http://s7.postimage.org/adsnrnorf/7_CFDA2_E7_1137_4_C87_ADBE_6_EA578694239.jpg)

**问题：** 当我点击 Coffee 按钮时，我的 textField 不会显示咖啡名称和咖啡价格，假设显示为“coffee 1”。并且 xcode 会从 iphone 模拟器将我带到调试器。（我认为它在一行中迷恋，所以调试器将我带到 IBaction 方法并在@synthesize 名称行中断；它编译没有错误。请帮助排除故障原因当我按下咖啡按钮时，xcode 将我带到调试器。

[按下咖啡按钮后屏幕立即显示](http://s7.postimage.org/9kicnwvff/C995356_B_66_BB_4_F9_A_8_DEF_26_CB5_A985_CF8.jpg)

这是咖啡按钮的动作代码

```
- (IBAction)Coffee:(id)sender {
    int price = 1;
    NSString *name = @"coffee";

    Storage *order = [[Storage alloc] init];
    [order setName:name];               // i assume the program crush at here when it look into setName method.
    [order setPrice:price];
    [orders addOrders:order];

    // Sanity check:     // the program not even hit this line yet before crush;
    NSLog(@"There are now %d orders in the array.", [orders.getOrders count]);

    for (Storage *obj in orders.getOrders){
        [check setText:[NSString stringWithFormat:@"%@",[obj description]]];  // check is the TextField instant varible. and the description method is from storage.m to print out the name and price.
    }
} 
```

下面的代码是我的存储类，用于存储我的客户订购的所有物品。它是一个二维数组，My **Storages**类是**Storage**类的包装类。数组格式如下所示：

arrayindex1-> 名称，价格

arrayindex2-> 名称，价格

arrayindex3-> 名称，价格

arrayindex4-> 名称，价格

存储.h

```
#import <Foundation/Foundation.h>

@interface Storage : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, assign) NSInteger price;

@end 
```

存储.m

```
#import "Storage.h"

@implementation Storage

@synthesize name;         // program crush and goes to here.
@synthesize price;

- (NSString *)description {
    // example: "coffee 1"
    return [NSString stringWithFormat:@"%@ %d", self.name, self.price];
}

@end 
```

存储.h

```
#import <Foundation/Foundation.h>
#import "Storage.h"
@interface Storages : NSObject

@property (nonatomic,strong, readwrite) NSMutableArray *orders;

-(void) addOrders:(Storage *)anOrder;
-(NSMutableArray *) getOrders;

@end 
```

存储.m

```
#import "Storages.h"

@implementation Storages
@synthesize orders;

- (id)init {
    self = [super init];
    if (self) {
        orders = [[NSMutableArray alloc] init];
    }
    return self;
}

-(void) addOrders:(Storage *)anOrder{
    [orders addObject: anOrder];
}
-(NSMutableArray *) getOrders{
    return orders;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:23:58.867

这里有几个问题。

1) 不要对 price 属性使用指针。通常，除非您正在做一些不寻常的事情，否则作为对象的属性将是指针，而作为基元（NSInteger、BOOL、float 等）的属性将不是指针。

2）您需要确保订单`NSMutableArray`是用对象初始化的`Storages`，否则订单将保持为零，并且无论何时您尝试向其添加对象，都不会发生任何事情。要初始化`NSMutableArray`，请在您的`init`方法中执行此操作，如下所示。`for (Storage *obj in orders.getOrders) { ... }`您还可以通过在循环中放置一个简单的 NSLog 语句并确保您在循环中至少获得一次迭代来检查对象是否实际上进入了一个有效的可变数组。如果 orders.getOrders 为 nil，for 循环的工作块将永远不会运行。

3）听起来您需要覆盖（并且可能已经覆盖）`-[NSObject description]`存储对象的方法。我的猜测是您在此方法中与`-[NSString stringWithFormat:...]`格式字符串不匹配。例如，您可能在`NSInteger *`. 这样的事情肯定会导致崩溃（这就是我认为您所说的“Xcode 将您带到调试器”的意思）。对于 NSInteger，您需要使用 %d 或 %i。正如我和其他人所提到的，你想要`NSInteger`这里而不是`NSInteger *`你应该改变你的财产声明。

4）根据你在这里的情况，我认为你根本不需要课堂上的`order`财产。`Storages`

5) 确保您没有忽略将 Interface Builder 中的 IBOutlet 连接到`check`textField 的可能性。一个很好的测试，除了确认它在 Interface Builder 中连接之外，将是一个现实检查测试，如`[check setText:@"This is a test."];`

6) 请记住，一旦这工作正常，您的 for 循环将很快执行，您将立即看到orders 数组中最后一个对象的描述。但这似乎不是你的问题。

我建议您进行以下更改：

存储.h

```
#import <Foundation/Foundation.h>

@interface Storage : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, assign) NSInteger price;

@end 
```

存储.m

```
#import "Storage.h"

@implementation Storage

@synthesize name;
@synthesize price;

- (NSString *)description {
    // example: "coffee 1"
    return [NSString stringWithFormat:@"%@ %d", self.name, self.price];
}

@end 
```

您的 IBAction 方法

```
- (IBAction)Coffee:(id)sender {
    int price = 1;
    NSString *name = @"coffee";

    Storage *order = [[Storage alloc] init];
    [order setName:name];
    [order setPrice:price];
    [orders addOrders:order];

    // Sanity check:
    NSLog(@"There are now %d orders in the array.", [orders.getOrders count]);

    for (Storage *obj in orders.getOrders){
        [check setText:[NSString stringWithFormat:@"%@",[obj description]]];  // check is the TextField instant varible. and the description method is from storage.m to print out the name and price.
    }
} 
```

存储.h

```
#import <Foundation/Foundation.h>
#import "Storage.h"
@interface Storages : NSObject

@property (nonatomic,strong, readwrite) NSMutableArray *orders;

-(void) addOrders:(Storage *)anOrder;
-(NSMutableArray *) getOrders;

@end 
```

存储.m

```
#import "Storages.h"

@implementation Storages
@synthesize orders;

- (id)init {
    self = [super init];
    if (self) {
        orders = [[NSMutableArray alloc] init];
    }
    return self;
}

-(void) addOrders:(Storage *)anOrder{
    [orders addObject: anOrder];
}
-(NSMutableArray *) getOrders{
    return orders;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:16:29.680

您有两个错误：
1-您将价格声明为 NSInteger 并将其作为参考传递。正确的做法是按原样将其作为整数传递，并在整个应用程序中将其作为整数处理。
2-您没有在 Storages 类中初始化订单数组，因此它将始终为 nil 并且不会保存任何添加的对象。

***您的代码可能如下所示：***

在按钮的 IBAction 中直接传递价格

```
[order setPrice:price]; 
```

在存储类中

```
- (NSString *)description {
    return [NSString stringWithFormat: @"%@        %d", name, price];
} 
```

将以下内容添加到 Storages 类

```
-(id)init
{
    if (self = [super init])
    {
        orders = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:33:57.607

您在课堂上使用了不正确的`NSInteger`指针。是基本数据类型而不是指针。删除该指针并使用变量。我希望这能解决你的问题。`Storages``NSInteger``NSInteger`

您可以使用以下代码：

```
@interface Storage : NSObject

@property (nonatomic, retain)NSString *name;

@property (nonatomic, assign)NSInteger price; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:14:52.743

下面的描述是做什么的？（我在 Storage 类中看不到任何描述对象）：

```
[check setText:[NSString stringWithFormat:@"%@",[obj description]]]; 
```

我认为如果您想打印名称，请执行以下操作：

```
[check setText:[NSString stringWithFormat:@"%@: %@",obj.name, obj.price]]; 
```

# python - 解析大型 NTriples 文件 Python

> ID：14597122
> 
> 赞同：4
> 
> 时间：2013-01-30T05:10:37.490
> 
> 标签：python, rdf, n-triples, redland

我正在尝试使用[Parse large RDF in Python中的代码解析一个相当大的 NTriples 文件](https://stackoverflow.com/questions/3868888/parse-large-rdf-in-python)

我为 python 安装了 raptor 和 redland-bindings。

```
import RDF
parser=RDF.Parser(name="ntriples") #as name for parser you can use ntriples, turtle, rdfxml, ...
model=RDF.Model()
stream=parser.parse_into_model(model,"file:./mybigfile.nt")
for triple in model:
    print triple.subject, triple.predicate, triple.object 
```

但是程序挂起，我怀疑它正试图将整个文件加载到内存中或其他东西，因为它没有立即启动。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:02:17.797

这很慢，因为您正在读取没有索引的内存存储（RDF.Model() 默认）。所以它变得越来越慢。N-Triples 的解析确实从文件中流出，它永远不会将其全部吸入内存。

有关存储模型的概述，请参阅[Redland 存储模块文档。](http://librdf.org/docs/api/redland-storage-modules.html)在这里，您可能需要存储`type`“哈希”和`hash-type`内存。

```
s = RDF.HashStorage("abc", options="hash-type='memory'")
model = RDF.Model(s) 
```

（未测试）

# javascript - 如何强制 Node 的请求模块不对响应进行编码？

> ID：14597125
> 
> 赞同：0
> 
> 时间：2013-01-30T05:10:57.347
> 
> 标签：javascript, node.js

我正在使用 Node 的`request`模块。
我得到的响应是“gziped”或以其他方式编码的。

**我该如何**
1\. 构建请求以不对响应进行编码？
2\. 解码响应？
数据来自[http://api.stackexchange.com](http://api.stackexchange.com)。

```
var myRequest = require('request');
var zlib = require('zlib');

var stackRequest = require('request'); 
var apikey = '<MyKey>';
var fromdate = '1359417601';
var tagged = 'node.js';
stackRequest(
    { method: 'GET'
        , uri: 'http://api.stackexchange.com/2.1/questions?key=' + apikey + 
          '&site=stackoverflow&fromdate=' + fromdate + '&order=desc&' + 
          'sort=activity&tagged=' + tagged + '&filter=default'
}, function(err, response, body) { 
    console.log(response.body); // How can I decode this?
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:04:58.173

编码与 . 无关`request`。StackOverflow 的 API 始终返回 GZip 编码数据，如[API 文档中所述](https://api.stackexchange.com/docs/compression)。您需要使用 Node 的`zlib`模块来解压缩内容。这是一个简单的例子：

```
var zlib = require('zlib');

// Other code

, function(err, response, body) {
   zlip.gunzip(body, function(err, data){
     console.log(data);
  });
}); 
```

这样做的主要缺点是，这会迫使`request`模块将整个响应内容处理`Buffer`为`body`. 相反，您通常应该使用 Node 的`Stream`系统将请求中的数据直接通过解压缩库发送，这样您就可以使用更少的内存。您仍然需要将这些部分连接在一起以解析 JSON，但它仍然更好。

```
var zlib = require('zlib');
var request = require('request');

var apikey = '<MyKey>';
var fromdate = '1359417601';
var tagged = 'node.js';
var compressedStream = request('http://api.stackexchange.com/2.1/questions?' +
    'key=' + apikey + '&site=stackoverflow&fromdate=' + fromdate +
    '&order=desc&sort=activity&tagged=' + tagged + '&filter=default');

var decompressedStream = compressedStream.pipe(zlib.createGunzip());

var chunks = [];
decompressedStream.on('data', function(chunk){
  chunks.push(chunk);
});
decompressedStream.on('end', function(){
    var body = Buffer.concat(chunks);

    var data = JSON.parse(body);

    // Do your thing
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:15:11.627

第一组接受：身份作为标头。如果堆栈更改不以常规 UTF8 格式发送数据，那么这就是他们的错误。

其次，您要将编码设置为 UTF8，因此响应不是缓冲区。

# android - 如何以编程方式读取 android（2.0.1 及更高版本）中的本机联系人？

> ID：14597126
> 
> 赞同：-1
> 
> 时间：2013-01-30T05:10:59.010
> 
> 标签：android, android-contentprovider, sync, android-contacts

我想阅读本地联系人，即所有手机号码、家庭号码、工作号码、其他号码。如何使用 android 2.0.1 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:16:47.243

应用这个..你会得到它。

```
 public void readContacts()
{

         ContentResolver cr = getContentResolver();

         Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);

         if (cur.getCount() > 0)
 {

            while (cur.moveToNext()) {

                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

                String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) 
{

                    System.out.println("name : " + name + ", ID : " + id);

                    // get the phone number
                    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                           ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                           new String[]{id}, null);
                    while (pCur.moveToNext()) {
                          String phone = pCur.getString(
                                 pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                          System.out.println("phone" + phone);
                    }
                    pCur.close();

                    // get email and type

                   Cursor emailCur = cr.query(
                            ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                            new String[]{id}, null);
                    while (emailCur.moveToNext()) {
                        // This would allow you get several email addresses
                            // if the email addresses were stored in an array
                        String email = emailCur.getString(
                                      emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                        String emailType = emailCur.getString(
                                      emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                      System.out.println("Email " + email + " Email Type : " + emailType);
                    }
                    emailCur.close();

                    // Get note.......
                    String noteWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                    String[] noteWhereParams = new String[]{id,
                    ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE};
                            Cursor noteCur = cr.query(ContactsContract.Data.CONTENT_URI, null, noteWhere, noteWhereParams, null);
                    if (noteCur.moveToFirst()) {
                        String note = noteCur.getString(noteCur.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
                      System.out.println("Note " + note);
                    }
                    noteCur.close();

                    //Get Postal Address....

                    String addrWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                    String[] addrWhereParams = new String[]{id,
                        ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
                    Cursor addrCur = cr.query(ContactsContract.Data.CONTENT_URI,
                                null, null, null, null);
                    while(addrCur.moveToNext()) {
                        String poBox = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX));
                        String street = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                        String city = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                        String state = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                        String postalCode = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE));
                        String country = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                        String type = addrCur.getString(
                                     addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));

                        // Do something with these....

                    }
                    addrCur.close();

                    // Get Instant Messenger.........
                    String imWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                    String[] imWhereParams = new String[]{id,
                        ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE};
                    Cursor imCur = cr.query(ContactsContract.Data.CONTENT_URI,
                            null, imWhere, imWhereParams, null);
                    if (imCur.moveToFirst()) {
                        String imName = imCur.getString(
                                 imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                        String imType;
                        imType = imCur.getString(
                                 imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                    }
                    imCur.close();

                    // Get Organizations.........

                    String orgWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                    String[] orgWhereParams = new String[]{id,
                        ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE};
                    Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                                null, orgWhere, orgWhereParams, null);
                    if (orgCur.moveToFirst()) {
                        String orgName = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA));
                        String title = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));
                    }
                    orgCur.close();
                }
            }
       }
    }

} 
```

# mysql - 在 mac 上执行 mysql 会忽略 --port 参数

> ID：14597128
> 
> 赞同：2
> 
> 时间：2013-01-30T05:11:04.870
> 
> 标签：mysql, port

我已经打开了一个到另一台机器的 SSH 隧道，以便我可以访问它的 mysql 服务器，但是当我执行`mysql`. 它总是显示我的本地服务器，即使我给它一个虚假的端口号：

```
$ mysql -P 52534
mysql > 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:15:31.600

没有指定通常会被忽略的主机。如果您需要连接到`localhost`，它将始终默认为本地 UNIX 套接字而不是 TCP 套接字，因此您需要通过连接到主机来欺骗它`127.0.0.1`。

# c++ - 从文本文件中读取行并在 C++ 中分配不同的变量

> ID：14597132
> 
> 赞同：-1
> 
> 时间：2013-01-30T05:11:29.040
> 
> 标签：c++

我正在开发一个地址簿应用程序，而我真正苦苦挣扎的部分是从 .txt 文件中获取文本并将正确的变量分配给每段文本。每件作品都有一个标签。

我真的在努力解决这个问题。首先，我不确定我的逻辑在我的方法上是否 100% 正确，但无论如何，这就是它在我脑海中出现的方式。

我想做的是运行一个循环，逐行查看文本，每一行都分配给其各自的变量。

我知道我当前的代码不正确，逻辑也没有完全充实，但这就是我所拥有的。

编辑：我忘了提及其他变量及其各自的数据类型。名字、姓氏、出生月/日/年、地址、城市、州、邮政编码、电话号码。它们几乎都是字符串，但出生月份/日期/年份和邮政编码/邮政编码除外，它们是整数。

编辑** 文本文件是这样的

```
Joe     Shmoe     1     1     1980     123Main     Capital     CA     90210     123-456-7890
Jane     Doe     2     5     1960     321Elm     Boise     ID     12345     987-654-3210 
```

等等等等。我需要做的是通读文本文件并为每个属性填充数组元素（第一、最后、月份、日、年、地址、城市、州、邮编、电话）

```
void extPersonType::getInfo()
{
readFile.open("input.txt",ios::in);
if (readFile.is_open())
{
    while (readFile.good())
    {
        for (int i = 0; !readFile.eof(); i++)
        {
            getline(readFile,lines[i]);
        personInfo[i].setFirstName(lines[i]);//change this
        cout << personInfo[i].getFirstName();
        }
    }
    readFile.close();
} 
```

如果你能帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:21:20.140

```
for (int i = 0; !readFile.eof(); i++)
        {
            getline(readFile,lines[i],'\t');
        personInfo[i].setFirstName(lines[i]);
        cout << "First Name: "<<personInfo[i].getFirstName()<< endl;

        getline(readFile, names[i],'\t');
        personInfo[i].setLastName(names[i]);
        cout << "Last Name: "<<personInfo[i].getLastName()<<endl;

        getline(readFile, addresstmp[i],'\t');
        address[i].setAddress(addresstmp[i]);
        cout << "Address: "<< address[i].getAddress() << endl;
        getline(readFile, city[i],'\t');
        address[i].setCity(city[i]);
        cout << "City: "<< address[i].getCity()<<endl;
        getline(readFile,state[i],'\t');
        address[i].setState(state[i]);
        cout << "State: "<<address[i].getState()<<endl;
        getline(readFile,zip[i],'\t');
        address[i].setZip(zip[i]);
        cout << "Zip: "<<address[i].getZip()<<endl;
        getline(readFile,phoneNumber,'\t');
        cout << "Phone: "<<phoneNumber<<endl;
        getline(readFile,contactType);
        cout <<"Contact type: "<<contactType<<endl<<endl;

        }

    }
    readFile.close(); 
```

这就是我要找的。getline(file, string, deliniation) 解决了它。

# android - 你能告诉我如何将图像从 Oracle 数据库检索到我的 android 活动

> ID：14597139
> 
> 赞同：1
> 
> 时间：2013-01-30T05:12:08.123
> 
> 标签：android, oracle, servlets

在我的 Android 应用程序中，我需要从 oracle 数据库中检索图像，并且我编写了 servlet 代码，所以我需要将此图像对象从 servlet 发送到 android 活动，你能告诉我如何将图像对象从 servlet 发送到我的安卓活动..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:52:28.013

*   写一个 servlet，它连接到 DB、检索 BLOB、将 BLOB 读取到输入流并写入 OutputStrem 作为响应。

*   将上面的 servlet 映射到例如 '\image' ，它将图像名称作为参数和基于参数的搜索器 oracle

*   在活动中使用 url`host\image?<imagename>`

# amazon-ec2 - 我不能在 Amazon ec2 负载平衡中使用 base64encoder

> ID：14597141
> 
> 赞同：1
> 
> 时间：2013-01-30T05:12:26.417
> 
> 标签：amazon-ec2, base64, load-balancing

* * *

嗨，我在负载平衡应用程序下的亚马逊 ec2 中运行 2 个服务器，它们都使用相同的脚本。如果我发送带有 base64 加密的 curl 数据，负载平衡将不会进行 base64 加密。但是如果直接将 curl 数据发送到服务器，base64 可以继续。

每次我通过负载平衡发送带有 base64 的 curl 数据时，我总是收到此错误：

> curl：（6）无法解析主机：my.host.server；提供节点名或服务名，或未知

谁能帮我这个？

# django - 有没有办法从用户无权更改的 django admin changelist 上的对象中删除超链接？

> ID：14597145
> 
> 赞同：3
> 
> 时间：2013-01-30T05:12:45.323
> 
> 标签：django, django-admin

我目前正在使用`has_change_permission`自定义 django 管理类中的钩子来实现一种简单的行级权限形式，并确定非超级用户是否可以编辑特定对象，如下所示：

```
def has_change_permission(self, request, obj=None):
        if obj is None or request.user.is_superuser or (obj and not obj.superuser_only): # (my model has a 'superuser_only' flag that gets set via fixtures, but its beyond the scope of this question) 
            return True
        return False 
```

这很好用：所有对象都显示给用户，但如果他们单击他们无权编辑的对象，那么他们将被带到我的 403 页面，大概是因为 PermissionDenied 被引发。但是，在这种情况下，给他们一个指向权限被拒绝页面的超链接似乎并不理想。我想显示这些对象，但不提供指向列表页面上编辑页面的任何超链接（如果他们尝试手动使用对象的 URL，除了提高 PermissionDenied 之外）。是否有一个简单的钩子可以在没有可怕的黑客攻击的情况下删除这些超链接？我是一位经验丰富的 django 开发人员，所以如果你能指出我正确的方向（如果有的话），我将能够实现细节或确定它现在不值得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T02:44:12.077

通过覆盖 ModelAdmin 类（在我的 admin.py 文件中）中的默认 get_list_display_links 函数，我能够以一种相当简单的方式完成此操作：

```
def get_list_display_links(self, request, list_display):
    if request.user.is_superuser:
        if self.list_display_links or not list_display:
            return self.list_display_links
        else:
            # Use only the first item in list_display as link
            return list(list_display)[:1]
    else:
        # Ensures that no hyperlinks appear in the change list for non-superusers
        self.list_display_links = (None, )
        return self.list_display_links 
```

请注意，我的代码维护超级用户的超链接。如果您不想做出这种区分，您可以轻松地使用函数的后半部分。

# php - 如何正确获取 Jquery 数据到 php？

> ID：14597147
> 
> 赞同：0
> 
> 时间：2013-01-30T05:13:02.583
> 
> 标签：php, javascript, jquery, html, sql

您好，我有这样的表格：

```
<tr><td>First Name:</td><td><input data-check="f_n" type="text" name="first_name" /></td>
<td data-msg="f_n"></td></tr>
<tr><td>Last Name:</td><td><input data-check="l_n" type="text" name="last_name" /></td>
<td data-msg="l_n"></td></tr> 
```

现在我做了一个 jquery`$.post`来连接到 php 以在需要时显示错误，到目前为止我有这个：

```
<script type="text/javascript">
 $(document).ready(function(){
    $('[data-check]').click(function(){
        var a = $(this).data('check');
        $.post('website/register/checks.php',, function(data){
            $('[data-msg='+ a +']').html(data);
        });
    });
 });
 </script> 
```

我真的很困惑，如何根据用户输入发送正确的数据..并以正确的方式显示`<td></td>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:17:23.393

您需要将帖子数据设置为的第二个参数`$.post`

```
$(document).ready(function(){
    $('[data-check]').click(function(){
        var a = $(this).data('check'), post_data = {};
        post_data[a] = $(this).val();
        $.post('website/register/checks.php', post_data, function(data){
            $('[data-msg='+ a +']').html(data);
        });
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:21:29.557

我认为这应该是这样的：

```
$(document).ready(function(){
  $('[data-check]').click(function(){
    var a = $(this).data('check');
    $.post('website/register/checks.php',{data:a}, function(data){ //<--typo here ', ,'
        $('[data-msg="'+ a +'"]').html(data);
    });
  });
}); 
```

# r - 使用 ggplot2 可视化聚合数据

> ID：14597149
> 
> 赞同：2
> 
> 时间：2013-01-30T05:13:13.670
> 
> 标签：r, ggplot2, visualization, aggregate

我有一些我想使用 ggplot2 可视化的聚合数据，我现在正在寻找一个智能快捷方式来绘制聚合数据？

我拥有的数据看起来像这样，（我目前只有这样的数据`df2`）

```
df <- data.frame(cyl = mtcars[,2])
(df2 <- t(table(df$cyl)))
      4  6  8
[1,] 11  7 14 
```

我有兴趣创建一个这样的情节，（见下文`code`用于创建这个情节）

![汇总数据上的 geom_bar](../Images/db3994b663f345ec1b42a2f6b686a3b3.png)

```
require(ggplot2)
df <- data.frame(cyl = mtcars[,2])
df$cyl2  <- ifelse(df$cyl > 4, c('Treatment'), c('Control'))
# hline.data <- data.frame(cyl2 = c('Treatment', 'Control'), cyl = c(10, 2))

c <- ggplot(df, aes(factor(cyl)))
c + geom_bar(fill="white", colour="darkgreen", alpha=0.5) + facet_grid(. ~ cyl2, scales = "free", space = "free") + theme(axis.title.x  = element_blank(), axis.title.y  = element_blank(), axis.ticks.x = element_blank(), legend.position = "none") + scale_y_continuous(breaks=c(4, 6, 8), labels=c("Minimal","Mild", "Moderate")) + scale_x_discrete(breaks=c(6,8,4), labels=c("Treat 1", "Treat 2", "Control")) 
```

对于做到这一点的人来说，这是一个额外的问题。是否有可能`breaks=`在`scale_y_continuous`两个方面有所不同？`geom_hline`或者在边距中添加和添加一些文本会是更好的策略吗？似乎添加边距非常棘手，我必须[像这样](https://stackoverflow.com/a/10526535/1305688)或和[这样](https://stackoverflow.com/a/12417481/1305688)覆盖剪辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:24:52.980

您基本上只需要将聚合数据放入数据框中，然后添加组标签：

```
df <- data.frame(cyl = mtcars[,2])
(df2 <- t(table(df$cyl)))
# Assume you know the group labels
df2 <- data.frame(val=df2[1, ], label=c("Control", "Treat1", "Treat2"))
df2$cyl2 <- c("Control", "Treatment", "Treatment")

ggplot(df2, aes(label, val)) +
geom_bar(fill="white", colour="darkgreen", alpha=0.5, stat="identity") +
  facet_grid(. ~ cyl2, scales = "free", space = "free") +
  theme(axis.title.x  = element_blank(), axis.title.y  = element_blank(),
        axis.ticks.x = element_blank(), legend.position = "none") +
  scale_y_continuous(breaks=c(4, 6, 8), labels=c("Minimal","Mild", "Moderate")) +
  scale_x_discrete(breaks=c(6,8,4), labels=c("Treat 1", "Treat 2", "Control")) 
```

# silverlight - 处理 LongListSelector 中的点击事件

> ID：14597153
> 
> 赞同：0
> 
> 时间：2013-01-30T05:13:25.067
> 
> 标签：silverlight, windows-phone-7, xaml

我有以下 XAML：

```
<phone:LongListSelector.ItemTemplate>
<DataTemplate>
    <StackPanel Margin="0,0,0,17" >
        <TextBlock Text="{Binding Path=Name, Mode=TwoWay}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
        <TextBlock Text="{Binding Path=State.Summary, Mode=TwoWay}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
        <toolkit:ToggleSwitch x:Name="stateToggle" x:Uid="{Binding Path=Id, Mode=TwoWay}" IsChecked="{Binding Path=State.Current, Mode=TwoWay}" Click="stateToggle_Click_1" ></toolkit:ToggleSwitch>
    </StackPanel>
</DataTemplate> 
</phone:LongListSelector.ItemTemplate> 
```

我正在尝试实现以下目标： 1）在切换开关单击时采取行动（处理事件） 2）在点击列表中的项目时采取行动，即在切换开关的边界之外。

我已经尝试过`SelectionChanged`ToggleSwitch`Click`但这样我在单击切换开关时仍然调用这两个事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:29:35.773

如果 SelectionChanged 适用于用例 2，那么您基本上就在那里。

您应该在 ToggleSwitch Click 处理程序中将 MouseEventArgs Handled 属性设置为 true。这样选择不应该改变（因为列表项没有被点击），只有你想要的点击事件应该被提出。

# knockout.js - 访问 Javascript Html 模板并使用 Knockout.js 绑定数据

> ID：14597154
> 
> 赞同：2
> 
> 时间：2013-01-30T05:13:35.453
> 
> 标签：knockout.js

如何访问在整个站点中重复使用的 javascript 模板，并在 javascript 中执行此操作并将对象绑定到它。我想以字符串形式访问模板，以便可以将其添加到 Google 地图信息窗口下方的内容属性中。

我知道有这个功能`ko.renderTemplate("myTemplate", accessor, {}, element, 'replaceNode');`，但我怎样才能让它返回字符串以拍摄到信息窗口？

```
<script type="text/html" id="info-window-test">

   <span data-bind="text: Name"></span>

</script>

   var html = TODO: Get Template With Data

  /***************** OLD WAY
    var html = '<div class="info-window">';

        html = html + '<div><b>' + location.City + ', ' + location.StateRegion + '</b></div><hr/>';

        length = location.Events.length;

        $.each(location.Events, function (index, item) {
            html = html + '<div><a target="_blank" href="' + item.Link + '">' + item.Name + '</a></div>';
            html = html + '<div><i>' + item.DateFormatted + '</i></div>';

            if (index < length - 1) {
                html = html + '<hr/>';
            }
        });

        html = html + '</div>';
    **************************/

    var infoWindow = new google.maps.InfoWindow({
       content: html
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:08:02.907

如果我正确理解了您的问题，应该是**“我可以将 KnockoutJS 用作简单的模板引擎吗？”** 简单的答案是**不，你不能**。

但是您可以暂时使用 DOM 来实现您想要的。

检查这个 jsfiddle [http://jsfiddle.net/angelyordanov/zQZT8/](http://jsfiddle.net/angelyordanov/zQZT8/)。

```
<script type="text/html" id="info-window-test">  
  <span data-bind="text: Name"></span>  
</script> 
```

```
var viewModel = { Name: 'John' };

var templatePlaceholder = 
  $('<div style="display: none" data-bind="template: { name: \'info-window-test\' }"></div>')
  .appendTo('body');

ko.applyBindings(viewModel, templatePlaceholder[0]);

var resultHtml = templatePlaceholder.html();

ko.cleanNode(templatePlaceholder[0]);
templatePlaceholder.remove();

alert(resultHtml); 
```

# ios - 如何在 xcode 中为 iOS 应用程序制作背景视频？

> ID：14597155
> 
> 赞同：0
> 
> 时间：2013-01-30T05:13:49.917
> 
> 标签：ios, objective-c, video, background

我正在制作一个 ios 应用程序，我想知道如何使用视频作为背景？！实际上，“Vine”应用程序已经做到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:36:12.387

您可以隐藏movieplayercontroller 的默认控件，并添加任何其他视图。就像将视频设置为背景一样。

# spring - Spring 的 AOP 是静态的还是动态的

> ID：14597162
> 
> 赞同：0
> 
> 时间：2013-01-30T05:14:53.487
> 
> 标签：spring, aop

众所周知，AOP 是由 Spring 中的 CGLIB/JDK Proxy 提供的。编织是在运行时发生的，还是在编译时修改字节码以包含建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:20:49.877

根据[Spring 文档](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)，它是在运行时完成的：

> Spring AOP 默认为 AOP 代理使用标准 J2SE 动态代理。

由于 Java 的动态代理仅适用于接口：

> Spring AOP 也可以使用 CGLIB 代理。这是代理类而不是接口所必需的。

Spring 文档很好地解释[了代理是如何工作的](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html#aop-understanding-aop-proxies)。

将此与 AspectJ 进行比较，其中编织发生在编译时，有趣的是，这可能发生[在不同的点](http://www.eclipse.org/aspectj/doc/next/devguide/ltw.html)：

> 编织过程本身可以发生在三个不同时间之一：编译时、编译后时间和加载时。

在方面J：

*   编译时编织通过使用 ajc 编译器来编译您的源代码。
*   通过使用 ajc 编译器将方面添加到现有的类/jar 中来进行编译后时间编织。
*   加载时编织允许您在不重新编译的情况下[配置方面](http://www.eclipse.org/aspectj/doc/next/devguide/ltw-configuration.html#configuring-load-time-weaving-with-aopxml-files)，但需要类加载器的特殊支持（加载时编织在类加载时执行编织）。它通常[通过 Java 代理工具](http://www.eclipse.org/aspectj/doc/next/devguide/ltw-agents.html)实现，并且性能比其他编织时间差。

# java - 使用三重 int 数组

> ID：14597165
> 
> 赞同：0
> 
> 时间：2013-01-30T05:15:28.647
> 
> 标签：java, arrays, voxel

好的，所以我创建了一个像这样的 int 数组`int position = new int[160][250][160]`来表示 3D 空间中的一个位置（`[x][y][z]`）我想做的是从一个点到另一个点画一条线，但是我对如何从该数组中获取一个数字感到困惑？

如果我想从点画一条线，我`[78][89][30]`将`[34][75][25]`如何从其中一个数组中获取特定数字？还是最好只创建 3 个单独的数组？（记住体素）？

谢谢 - 沙姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:18:29.407

我建议有一个类 3DPoint

```
class Point3D{
    int x;
    int y;
    int z;
}

class Line{
    Point3D pointFrom;
    Point3D pointTo;
} 
```

这就是您在面向对象世界中轻松做事的方式

# java - Android ListView 对象不喜欢新的 onItemClickListener() 作为 setOnitemClickListener() 的参数

> ID：14597168
> 
> 赞同：2
> 
> 时间：2013-01-30T05:15:37.403
> 
> 标签：java, android, eclipse

因此，我正在尝试学习一些基本的 android 编程，但当我尝试为以编程方式生成的 ListView 设置 onItemClick() 方法时遇到了障碍。eclipse 给我的错误指出，“AdapterView 类型中的方法 setOnItemClickListener(AdapterView.OnItemClickListener) 不适用于参数（新的 onItemClickListener(){}）”。我完全糊涂了。我曾多次尝试清理该项目，以防出现问题。我也尝试过在[这个类似问题中找到的建议](https://stackoverflow.com/questions/7577848/android-onitemclicklistener-not-working)没有成功。不幸的是，这是我发现的唯一与我的问题相关的问题，因为大多数与 onItemClickListener 相关的问题都处理它没有被正确调用。我在建议的代码中查看了这些问题，并试图确保我的代码遵循建议的内容。任何帮助，将不胜感激。这是有问题的代码片段：

```
import java.util.ArrayList;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.view.View;
import android.widget.AdapterView;
import android.widget.TextView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity {
public ArrayList<ContactData> data;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_list);
    data = getContacts(); // creates arraylist for contact data
    ArrayList<String> names = new ArrayList<String>();
    for (ContactData item: data) {
        names.add(item.getName());
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.textview, names);
    ListView listView = (ListView) findViewById(R.id.listview1);
    listView.setAdapter(adapter);
    //listView.setClickable(true);
    // set click listener
    listView.setOnItemClickListener(new AdapterView.onItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            TextView textView = (TextView) view;
            String name = textView.getText().toString();
            Toast.makeText(getBaseContext(), name, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

编辑：发现 eclipse 没有运气，我一时兴起尝试了谷歌提供的终端工具，并尝试以这种方式构建我的项目。它起作用了，所以eclipse搞砸了。我不知道如何或什么，但现在一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:24:47.347

这是一个小错字。换行

```
listView.setOnItemClickListener(new AdapterView.onItemClickListener() { 
```

到

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
```

（您错过了 OnItemClickListener 中的大写“O”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:47:35.370

尝试导入 android.widget.AdapterView.OnItemClickListener

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T03:15:41.023

发现 Eclipse 没有运气，我一时兴起尝试了 Google 提供的终端工具，并尝试以这种方式构建我的项目。它起作用了，所以eclipse搞砸了。我不知道如何或什么，但现在一切正常。至于让我的代码编译和工作，它已经回答了。

# javascript - 如何将 Sinon.JS 间谍函数指定为类定义的一部分？

> ID：14597169
> 
> 赞同：2
> 
> 时间：2013-01-30T05:15:39.777
> 
> 标签：javascript, mocha.js, sinon

我正在使用 Require.js 和 Backbone.Marionette 编写一个 Backbone.js 应用程序，并使用带有 Chai、Sinon 和 Sinon-Chai 的 Mocha 对其进行测试。我通常使用[Jarrod Overson 的 Backbone Marionette 和 Require.JS TODO 示例](https://github.com/jsoverson/todomvc/tree/master/labs/dependency-examples/backbone_marionette_require)作为应用程序结构的参考，以及[Jim Newbery 的关于测试 Backbone 应用程序的帖子](http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html)作为单元测试的参考。

我的问题是尝试测试将[Marionette ItemView](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md)添加到[Marionette Application 对象](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.md)。我想测试是否添加了 ItemView 的最佳方法是观察它的`render()`方法是否被调用。由于 Marionette 提供了默认`render()`实现，我认为最好只使用 Sinon spy 进行`onRender()`回调。

我使用[Squire.JS](https://github.com/iammerrick/Squire.js)为我的 ItemView 返回一个存根类，如下所示：

```
define(['Squire', 'backbone.marionette'], function(Squire, Marionette) {
    describe('App', function() {

        var testContext;

        beforeEach(function(done) {
            testContext = {};

            testContext.injector = new Squire();

            testContext.renderSpy = sinon.spy();

            testContext.injector.mock('app/views/Header', function() {
                var stub_template_html = "<div></div>";
                var HeaderStub = Marionette.ItemView.extend({
                    template: function(serialized_model) {
                        return _.template(stub_template_html);
                    }
                });
                return HeaderStub;
            });

            testContext.injector.require(['app/app'], function(app) {
                testContext.app = app;
                done();
            });
        });

        it ('Should add a Header view to the \'header\' region', function() {
            testContext.app.start();
            expect(testContext.renderSpy).to.be.called();
        }); 
```

当我通过 Chrome 运行 Mocha 时，我得到了我期望的错误：“预计 spy 至少被调用过一次，但它从未被调用过。” 但是，如果我指定Sinon spy函数作为`onRender()`回调，如下图

```
var HeaderStub = Marionette.ItemView.extend({
    // ...
    onRender: testContext.renderSpy
}); 
```

我收到一条错误消息，指出该`called()`方法不是函数。

有没有办法将 Sinon 间谍函数指定为类定义中的方法？或者，是否有更好的方法来测试此代码？我对 JavaScript 相当陌生，所以这可能是一个更普遍的问题，而不是特定于 Sinon 的问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:16:18.323

我不确定您使用的是什么断言库，但是要检查您使用 sinon 监视的函数是否被调用，您必须检查`called`spy 的属性。见[http://sinonjs.org/docs/#sies](http://sinonjs.org/docs/#spies)

> **间谍**
> 
> 如果至少调用了一次间谍，则为 true

所以你的断言应该是这样的：

```
expect(testContext.renderSpy).to.be(true); 
```

# android - 动态添加时不显示 TableLayout

> ID：14597172
> 
> 赞同：0
> 
> 时间：2013-01-30T05:15:52.237
> 
> 标签：android

我正在尝试解析 XML 并在表格布局中显示其内容。我正在动态添加行和列，当执行而不是显示表格时，它显示一个空白屏幕。

这是我的 xml 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".CaptureActivity" >

<ScrollView
android:id="@+id/ScrollView_maintable"
android:layout_width="match_parent"
android:layout_height="400dp" >

<TableLayout
    android:id="@+id/main_table"
    android:layout_width="match_parent"
    android:layout_height="400dp"
    android:layout_weight="1" >

 </TableLayout> 
```

这是我的活动课。

```
public class CaptureActivity extends Activity {

private String url = "http://192.168.3.140:8080/EmployeeXmlDemo/EmployeeList.xml";
//private String url = "http://192.168.2.166:8780/capture/clientRequest.do?r=employeeList&cid=0";

FetchEmployeeAsyncTask employeeAsyncTask = new FetchEmployeeAsyncTask(this);

private ArrayList<Employee> employees = null;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    employeeAsyncTask.execute(new String[] {url});

    System.out.println("Status "+employeeAsyncTask.getStatus());

    setContentView(R.layout.activity_capture);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_capture, menu);
    return true;
}

public void showEmployees(ArrayList<Employee> employees) {
    // TODO Auto-generated method stub
    System.out.println("size is "+employees.size());

    TableLayout employeeTable = (TableLayout) findViewById(R.id.main_table);

    TableRow header = new TableRow(this);
    header.setId(100);
    //header.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    TextView empCodeHeader = new TextView(this);
    empCodeHeader.setId(200);
    empCodeHeader.setText("Employee Code");
    empCodeHeader.setTextSize(16);
    empCodeHeader.setPadding(2,2,2,2);
    empCodeHeader.setWidth(200);
    header.addView(empCodeHeader);

    TextView empNameHeader = new TextView(this);
    empNameHeader.setId(201);
    empNameHeader.setText("Employee Name");
    empNameHeader.setTextSize(16);
    empNameHeader.setPadding(2,2,2,2);
    empNameHeader.setWidth(300);
    header.addView(empNameHeader);

    employeeTable.addView(header);//, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    for(int i=0; i<employees.size();i++){

        Employee employee = (Employee) employees.get(i);

        int count = 0;

        TableRow empData = new TableRow(this);
        empData.setId(300+count);
        /*empData.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT ));*/
        //tr.setClickable(true);

        final TextView empCode = new TextView(this);
        empCode.setId(300+count);
        empCode.setText(employee.getCode());
        empCode.setTextSize(16);
        empCode.setPadding(2,2, 2, 2);
        empData.addView(empCode);

        final TextView empName = new TextView(this);
        empName.setId(300+count);
        empName.setText(employee.getName());
        empName.setTextSize(16);
        empName.setPadding(2, 2, 2, 2);
        empData.addView(empName);

        employeeTable.addView(empData); /*, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));*/
       count++;

        System.out.println("Name "+employee.getName());
        System.out.println("Designatio "+employee.getDesignation());

    }
    setContentView(R.layout.activity_capture);

}

/**
 * @return the employees
 */
public ArrayList<Employee> getEmployees() {
    return employees;
}

/**
 * @param employees the employees to set
 */
public void setEmployees(ArrayList<Employee> employees) {
    this.employees = employees;
} 
```

}

这是我的 AsyncTask 类。

```
public class FetchEmployeeAsyncTask extends AsyncTask<String, Void, ArrayList<Employee> >   {

private CaptureActivity activity;

public FetchEmployeeAsyncTask(CaptureActivity nextActivity) {
    this.activity = nextActivity;
}

@Override
protected ArrayList<Employee> doInBackground(String... url) {
    // TODO Auto-generated methoVoidd stub
    ArrayList<Employee> employees = null;
    for(String employeeUrl : url){
        employees = fetch(employeeUrl);
    }
    return employees;
}

private ArrayList<Employee> fetch(String url) {
    // TODO Auto-generated method stub
    ArrayList<Employee> employees = null;
    String response = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        response = EntityUtils.toString(httpEntity);
        employees = EmployeeXMLParser.XMLfromString(response);
        System.out.println("Size in fetch "+employees.size());

        //System.out.println("Employee Name :: " + employees.get(0).getFirstName() + " " + employees.get(0).getLastName());
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } /*catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        System.out.println("Error parsing the response :: " + response);
        e.printStackTrace();
    }*/
    return employees;
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
}

@Override
public void onPostExecute(ArrayList<Employee> employees){
    super.onPostExecute(employees);

    System.out.println("in post execxute "+employees.size());
    activity.showEmployees(employees);
    //activity.setContentView(R.layout.activity_capture);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:21:32.630

```
 setContentView(R.layout.activity_capture) 
```

在 showEmployee() 中删除它

# android - 我可以在 Android 中单击按钮创建一个数据库，以将我的微调器数据发送到

> ID：14597175
> 
> 赞同：2
> 
> 时间：2013-01-30T05:15:57.133
> 
> 标签：android, android-intent

所以我已经设置了我的应用程序的一部分，用户可以从微调器中选择最多五个东西（总共五个微调器），现在我有按钮通过一个意图将选择发送到一个新活动，它们显示在一个新的活动，但我想在单击按钮时将选择存储到内部数据库中，然后用户可以从菜单中检索他们的选择，然后按下按钮显示数据。

```
 public class IwiSelect extends Activity {

Spinner spinner1, spinner2, spinner3, spinner4, spinner5;
Button btnSubmit; 
String text;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_iwiselect);

    addListenerOnButton();
}
// get the selected drop down list value
  public void addListenerOnButton() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner2 = (Spinner) findViewById(R.id.spinner2);
    spinner3 = (Spinner) findViewById(R.id.spinner3);
    spinner4 = (Spinner) findViewById(R.id.spinner4);
    spinner5 = (Spinner) findViewById(R.id.spinner5);

    btnSubmit = (Button) findViewById(R.id.btnSubmit);

    btnSubmit.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {

            String text0 = spinner1.getSelectedItem().toString();
            String text1 = spinner2.getSelectedItem().toString();
            String text2 = spinner3.getSelectedItem().toString();
            String text3 = spinner4.getSelectedItem().toString();
            String text4 = spinner5.getSelectedItem().toString();

            //Starting a new Intent
            Intent intent = new Intent(IwiSelect.this, SecondScreenActivity.class);

            //Sending data to another Activity
            intent.putExtra("IWI0", text0);
            intent.putExtra("IWI1", text1);
            intent.putExtra("IWI2", text2);
            intent.putExtra("IWI3", text3);
            intent.putExtra("IWI4", text4);

        // starting new activity
            startActivity(intent);

}
    });

  }
  } 
```

此类将数据发送到新屏幕。

下面的类是我的助手类

```
 public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "iwi";

    //  table name
    private static final String TABLE_IWI = "iwis";

    //  Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "iwiname";

    public DatabaseHandler(SecondScreenActivity secondScreenActivity) {
        super((Context) secondScreenActivity, DATABASE_NAME, null, DATABASE_VERSION);
    }

     // Creating Tables
        @Override
       public void onCreate(SQLiteDatabase db) {
        String CREATE_IWI_TABLE = "CREATE TABLE " + TABLE_IWI + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + " TEXT" + ")";
        db.execSQL(CREATE_IWI_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_IWI);

        // Create tables again
        onCreate(db);
    }

    // Deleting single contact
    public void deleteIwi(Iwi iwi) {}

    // Adding new contact
    public void addIwi(Iwi iwi) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, iwi.getName());

    // Inserting Row
    db.insert(TABLE_IWI, null, values);
    db.close(); // Closing database connection
    }

    // Getting single contact
    public Iwi getIwi(int id) {
     SQLiteDatabase db = this.getReadableDatabase();

     Cursor cursor = db.query(TABLE_IWI, new String[] { KEY_ID,
         KEY_NAME, }, KEY_ID + "=?",
         new String[] { String.valueOf(id) }, null, null, null, null);
     if (cursor != null)
     cursor.moveToFirst();

     Iwi iwi = new Iwi(Integer.parseInt(cursor.getString(0)),
          cursor.getString(1));
     // return contact
     return iwi;
     }

     // Getting All Contacts
       public List<Iwi> getAllIwi() {
     List<Iwi> iwiList = new ArrayList<Iwi>();
     // Select All Query
     String selectQuery = "SELECT  * FROM " + TABLE_IWI;

     SQLiteDatabase db = this.getReadableDatabase();
     Cursor cursor = db.rawQuery(selectQuery, null);

     // looping through all rows and adding to list
     if (cursor.moveToFirst()) {
      do {
         Iwi iwi = new Iwi();
         iwi.setID(Integer.parseInt(cursor.getString(0)));
         iwi.setName(cursor.getString(1));

         // Adding contact to list
         iwiList.add(iwi);
     } while (cursor.moveToNext());
     }

     // return contact list
     return iwiList;
    }

    //Getting contacts Count
    public int getIwiCount() {
    String countQuery = "SELECT  * FROM " + TABLE_IWI;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
    }

     // Updating single contact
    public int updateIwi(Iwi iwi) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, iwi.getName());

    // updating row
    return db.update(TABLE_IWI, values, KEY_ID + " = ?",
           new String[] { String.valueOf(iwi.getID()) });
   }

    // Deleting single contact
    public void deleteContact(Iwi iwi) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_IWI, KEY_ID + " = ?",
           new String[] { String.valueOf(iwi.getID()) });
    db.close();
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:29:11.923

你的确切问题是什么？是的，可以在单击按钮时创建数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:32:22.967

如果要存储这些值；可以使用 SharedPreferences 代替 database ——

```
 SharedPreferences prefs = getApplicationContext().getSharedPreferences(
              "com.example.app", Context.MODE_PRIVATE);
    // To Edit the shared preferences-
    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();

     editor.putString("IWI0", text0);
     editor.putString("IWI1", text1);
     editor.putString("IWI2", text2);
     editor.putString("IWI3", text3);
     editor.putString("IWI4", text4);
     editor.commit();

     // To retrieve the data--
     SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
     String restoredText = prefs.getString("IWI0", null);
     if (restoredText != null) 
     {
       // Do something
     } 
```

**编辑**：
参考 - [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c++ - 如何使用spidermonkey执行用户定义的javascript代码

> ID：14597178
> 
> 赞同：1
> 
> 时间：2013-01-30T05:16:05.657
> 
> 标签：c++, spidermonkey

我有以下 javascript 代码作为字符串

std::string script = " { function execute() { var x=10; return x; } } ";

我想评估这个脚本并返回值，有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:14:14.650

要评估一个 JS 脚本，你需要

```
JSBool JS_EvaluateScript(JSContext *cx, JSObject *obj, const char *src, uintN length, const char *filename, uintN lineno, jsval *rval); 
```

如此处所述：[https ://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_EvaluateScript](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_EvaluateScript)

然后，如果您想获取返回值，则必须调用执行函数：

```
"function execute(){ var x = 10; return x;} execute();" 
```

然后评估脚本必须是`const char*`类型而不是`std::string`

评估脚本后，您可以使用 rval 获取返回值

```
if(JSVAL_IS_INT(rval))
  printf("The returned value is : %d\n", JSVAL_TO_INT(rval)); 
```

# node.js - 如何将在应用程序服务器（ieJBOSS）上运行的现有 Web 应用程序与 node.js 集成？

> ID：14597182
> 
> 赞同：0
> 
> 时间：2013-01-30T05:16:17.353
> 
> 标签：node.js

我有一个在应用程序服务器上运行的现有 Web 应用程序，它基本上是基于 JSF 2.0 构建的表单设计模块。现在我想实现实时协作，就像在一个客户端上一个用户执行一个操作，应该对连接的客户端可见。我想将在客户端上执行的事件广播给连接的客户端。我想使用 Node.js 将消息推送到客户端，但根据我的要求，如何将现有的 Web 应用程序与 node.js 集成，因为我必须从 node.js 监听事件源，并且还需要现有的连接node.js 在不同的端口上。我是 node.js 的新手，如果可能的话，这是我将在 node.js 上构建的第一个应用程序。请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:20:51.707

您可以使用 node 来运行[socket.io](http://socket.io/)服务器，这将使客户端与服务器进行双向通信。只要每个客户端都连接到同一个 socket.io 服务器，它就会与您现有的应用程序无缝集成。

# cordova - 打字稿：'???'的签名 重复

> ID：14597183
> 
> 赞同：3
> 
> 时间：2013-01-30T05:16:31.850
> 
> 标签：cordova, windows-8, typescript, winjs

1.  创建一个 WinJS windows 8 应用程序
2.  将 windows 8 phonegap javascript 库添加到项目中
3.  [从https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)添加 d.ts phonegap typescript 定义库
4.  将 script.ts 文件添加到项目中
5.  键入以下内容

代码：

```
///<reference path="phonegap.d.ts" />

var x = 1; 
```

现在，如果您在 VS 中“编译”script.ts 文件，我会收到以下错误

```
C:/Program Files (x86)/Microsoft SDKs/TypeScript/lib.d.ts(4551,4): 
Signature for 'clearWatch' is duplicated 
```

在我的 VS 2012 中，我还安装了以下扩展（可能与问题有关，但不确定）

*   打字稿
*   网络要点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:21:02.930

原因是**lib.d.ts**和**phonegap.d.ts**都有一个`clearWatch`在`Geolocation`接口中调用的方法。

我建议你从**phonegap.d.ts中注释掉这个方法**

# objective-c - 如何更改某个属性字符串的文本颜色或使其变为粗体？

> ID：14597190
> 
> 赞同：2
> 
> 时间：2013-01-30T05:17:32.860
> 
> 标签：objective-c, xcode4.5

假设我有 NSString * hello = @"hello world";

现在我想要一个属性字符串，其中 hello world 中的地狱用粗体显示。

网上有一个功能可以做到这一点：

```
- (NSMutableAttributedString*) word:(NSString*)substringToHighlight{

    NSMutableAttributedString * mutableAttributedString = [[ NSMutableAttributedString alloc]initWithString:self];
    NSUInteger count = 0, length = [mutableAttributedString length];
    NSRange range = NSMakeRange(0, length);

    count = 0,
    length = [mutableAttributedString length];
    range = NSMakeRange(0, length);
    while(range.location != NSNotFound)
    {
        range = [[mutableAttributedString string] rangeOfString:substringToHighlight options:0 range:range];
        if(range.location != NSNotFound) {

            //[mutableAttributedString setTextColor:[UIColor blueColor] range:NSMakeRange(range.location, [word length])];
            range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
            count++;
        }
    }
    return mutableAttributedString;
} 
```

但是，该函数不起作用，因为 mutableAttributedString 不支持 setTextColor

我也试过

```
NSDictionary * dict = @{kCTFontAttributeName:boldFontName};
        [mutableAttributedString setAttributes:{kCTFontAttributeName:boldFontName} range:NSMakeRange(range.location, substringToHighlight.length)]; 
```

但收到消息 kCTFontAttributeName 未定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:49:58.703

You can use rangeOfString:options:range: or NSScanner (there are other possibilities like regexps but anyway).

Finds and returns the range of the first occurrence of a given string, within the given range of the receiver, subject to given options.

*   `(NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)aRange`

This is another solution :

Then you need to convert into `NSMutableAttributedString` like this way.

```
NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:@"hello world"];
NSRange selectedRange = NSMakeRange(0, 4); // 4 characters, starting at index 0

[string beginEditing];

[string addAttribute:NSFontAttributeName
           value:[NSFont fontWithName:@"Helvetica-Bold" size:12.0]
           range:selectedRange];

[string endEditing]; 
```

I think this is the best solution.

# c#-4.0 - 在水晶报表中创建动态组标题

> ID：14597194
> 
> 赞同：0
> 
> 时间：2013-01-30T05:18:05.260
> 
> 标签：c#-4.0, crystal-reports

我的cs代码中有一个排序字段，当用户选择任何排序字段值时，必须在此基础上创建组标题，我不知道编写组公式，我可以在这方面获得一些基本帮助至于如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:44:02.260

为了设置动态标题，有时不需要标题公式。就像将数据表中的值传递给数据集中的一个字段一样，该字段可以以适当的格式放置在标题位置，以便在运行报表时我们可以看到报表标题。

# appjs - appjs openDialog 返回值是乱码

> ID：14597196
> 
> 赞同：3
> 
> 时间：2013-01-30T05:18:09.897
> 
> 标签：appjs

使用 appjs-0.0.20-win32-ia32

```
window.frame.openDialog({
            type: 'save', 
            title: 'Save...', 
            multiSelect: false, 
            dirSelect:true           
            }, function( err , files ) {
               for(var i=0;i<files.length;i++) {
                  console.log(files[i]);
               }

           }); 
```

例如：轠ѓ轳ѓ轳ѓlo

此问题仅在 dirSelect 为 true 的 Windows 7 中发生，它在 Ubuntu 12.04 中正常工作。如果我使用 openDialog dirSelect false 模式（即启用文件选择），这也是正确的。我尝试了 64 位和 32 位机器。

# zip - 如何使用 AutoIt 压缩文件夹

> ID：14597200
> 
> 赞同：0
> 
> 时间：2013-01-30T05:18:34.477
> 
> 标签：zip, autoit

我有创建压缩文件夹的代码，下面的代码用于压缩文件

```
$ZipArchive = @ScriptDir & "\test.zip"; Put here the full path and name ame of archive you would like to create
$AddFile = @ScriptDir & "\zip.au3"; Put here the the File you would like to compress in the zip   
$AddFile2 = "c:\config.sys"; Take another File ... 
```

$oShell = ObjCreate("Shell.Application"); 创建 s shell 对象

```
if IsObj($oShell) then                          
    InitZip($ZipArchive); Create an emtpy zip file with header      
    $oDir = $oShell.NameSpace($ZipArchive); Use the zip file as an "Folder"
    $oDir.CopyHere ($AddFile); Copy a file in the "Zip Folder" 
    $oDir.CopyHere ($AddFile2); Copy a second file
    sleep (500); Give the Objekt a litte bit time to work 
else 
    Msgbox (0,"Error","Error creating Object.")
endif 

Func InitZip ($zip_path_name)
    $init_zipString= Chr(80) & Chr(75) & Chr(5) & Chr(6);Create the Header String 
        for $n =1 to 18;the     
            $init_zipString= $init_zipString & Chr(0);Header    
        next 
    $file =FileOpen($zip_path_name,2)                       
    FileWrite($file,$init_zipString);Write the string in a file 
    FileClose($file)
EndFunc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:10:01.967

我建议通过 Run命令使用例如**7z 。**

将一个文件夹压缩成存档的命令如下所示：

```
7z a -r archive.7z directory 
```

在**AutoIt**中，这将是

```
local $command = "7z a -r archive.7z directory"
Run(@ComSpec & " /c " & $command, @ScriptDir) 
```

如果 7z 目录未包含在全局路径变量中，您可能还需要指定 7z 可执行文件的路径。

# mysql - 如何在超过 100 万条记录且不断增长的情况下提高 select 查询的性能

> ID：14597202
> 
> 赞同：0
> 
> 时间：2013-01-30T05:18:48.903
> 
> 标签：mysql, database, select, database-performance

我有一个表格，它每秒接收来自至少 10 个不同来源的数据。

我已将我的表划分为每月基数，每个月我创建一个表并将数据填充到表中。每个表将保存至少 100 万条记录。

我有 6 个字段作为主键并索引了 7 个字段。

我没有更改 MySQL 中的任何其他设置（Ubuntu 附带的默认设置）。

只有两个查询将在表上运行（插入和选择）

我看到数据库使我的应用程序变慢。

有没有办法提高查询的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:30:13.873

您可以尝试[使用解释计划优化查询](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)，包括[索引优化](http://dev.mysql.com/doc/refman/5.0/en/optimization-indexes.html)和[语句优化](http://dev.mysql.com/doc/refman/5.0/en/select-optimization.html)，这可能会对执行速度产生很大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:11:35.840

首先，在处理 MySQL 性能时，我们需要知道您使用的是哪个引擎。

其次，我们需要缩小可能的性能问题。我会说您对 INSERT 访问的问题可能比对 SELECT 的问题更大。因为，事实上，即使 SELECT 查询会更慢，如果查询本身很复杂，INSERT 会经常发生，并可能导致您的系统崩溃（或最终减慢系统速度，这会减慢您的 SELECT作为结果）。

因此，为了加快您的 INSERT，我确实建议您只保留您真正需要的索引（通常是 SELECT WHERE 子句中使用的列），这将被证明是一个重大改进。

至于SELECT本身的优化，不看查询，很难进一步帮助你。

# mobile - 为什么使用Phonegap 和Mobile 构建的应用程序有时会在警报时冻结？

> ID：14597208
> 
> 赞同：2
> 
> 时间：2013-01-30T05:19:39.233
> 
> 标签：mobile, cordova, mootools, phonegap-build

我去[http://moobilejs.com/#download](http://moobilejs.com/#download)，下载 Moobile 0.2.1 Boiler Plate（这是一个基于 MooTools 构建的移动应用程序框架），将 www 文件放入 Dreamweaver CS6，运行 Phonegap Build Service，扫描用我的安卓手机扫描二维码，然后安装应用程序。

我没有对代码进行任何更改。它只是一个应用程序，只有一个按钮，上面写着 Hello，它会打开一个警告框。您可以通过点击确定来关闭警报框。

它在浏览器中运行良好。在我的 android 手机上它似乎工作正常，但是在点击 OK 关闭警报框后，它又回来了，你不能关闭它。第一次点击 Hello 时并不总是发生这种情况，但最终它总是会出现这个问题。更改方向会使其消失，但下次点击 Hello 时会出现同样的问题。

这可能是什么原因造成的？

编辑：这是视图：

```
<div class="hello-world-view">
    <div data-role="button" data-name="hello-world-button">Hello World</div>
</div> 
```

这是 app.js 中的内容

```
if (!window.ViewController) window.ViewController = {};

var HelloWorldViewController = new Class({

    Extends: Moobile.ViewController,

    helloWorldButton: null,

    loadView: function() {
        this.view = Moobile.View.at('templates/views/hello-world-view.html');
    },

    viewDidLoad: function() {
        this.helloWorldButton = this.view.getChildComponent('hello-world-button');
        this.helloWorldButton.addEvent('tap', this.bound('onHelloButtonTap'));
    },

    destroy: function() {
        this.helloWorldButton.removeEvent('tap', this.bound('onHelloButtonTap'));
        this.helloWorldButton = null;
        this.parent();
    },

    onHelloButtonTap: function() {
        var alert = new Moobile.Alert();
        this.view.addChildComponent(alert);
        alert.setTitle('Hello');
        alert.showAnimated();
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:11:36.637

它与 Momobile ScrollView 类和 IScroll 有关。

这是来自 JP 在 Mobile 的修复...

1) 为滚动视图元素添加 data-option-scroller="IScroll" 属性

例子`<div data-view="Moobile.ScrollView" data-option-scroller="IScroll">`

2) 在 app.js 文件的顶部添加以下代码段。

```
Class.refactor(Moobile.ScrollView, { 
options: {
scroller: 'IScroll'
}
}); 
```

# android - 在 facebook 墙上分享从 web 服务获得的数据

> ID：14597209
> 
> 赞同：0
> 
> 时间：2013-01-30T05:19:40.513
> 
> 标签：android, facebook, json

我已经解析了从 web 服务获得的数据，当我单击需要在 facebook 上共享该项目内容的详细活动页面所需的任何列表项时，它会显示在列表视图中。我尝试使用以下代码，但无法在 facebook 墙上共享数据。有人可以帮我解决这个问题吗？答案将被应用

详细活动

```
public class Singlemenuitem  extends Activity {
// Your Facebook APP ID
    private static String APP_ID = "308180782571605"; // Replace with your App ID

    // Instance of Facebook Class
    private Facebook facebook = new Facebook(APP_ID);
    private AsyncFacebookRunner mAsyncRunner;
    String FILENAME = "AndroidSSO_data";
    private SharedPreferences mPrefs;

static  String TAG_URL  = "url";

    public String description,title;

// JSON node keys
static final String TAG_TITLE = "title";
static final String TAG_DATE = "date";
static final String TAG_NAME = "name";
static final String TAG_CONTENT = "content";

LinearLayout line1,line2,line3;
   Button btnShare;
   Button btnInvite;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

 // getting intent data
    Intent in = getIntent();
    final  String url1 = in.getStringExtra(TAG_URL);

    ImageView imgv = (ImageView) findViewById(R.id.imgdesc);
    ImageLoader imageLoader = new  ImageLoader(getApplicationContext());
    imageLoader.DisplayImage(url1, imgv);

   // Get JSON values from previous intent
    final String title = in.getStringExtra(TAG_TITLE);
    String date = in.getStringExtra(TAG_DATE);
    String name = in.getStringExtra(TAG_NAME);
    final String content = in.getStringExtra(TAG_CONTENT);
    System.out.println("bool " +title +" "+date+" "+name +" " +content);
    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
    TextView lblCont = (TextView) findViewById(R.id.content_label);

    lblName.setText(title);
    lblCost.setText(date);
    lblDesc.setText(name);
    lblCont.setText(content);

        //share

    ImageView facebook11=(ImageView) findViewById(R.id.facebook);
    facebook11.setOnClickListener(new View.OnClickListener() {

        //@Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Log.d("Image Button", "button Clicked");
            loginToFacebook();

            if (facebook.isSessionValid()) {
                postToWall();

              }
        }       

    });

}           

public void loginToFacebook() {
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this, new String[] { "feed" }, new DialogListener() {

            public void onCancel() {
                // Function to handle cancel event
            }

            public void onComplete(Bundle values) {
                // Function to handle complete event
                // Edit Preferences and update facebook acess_token
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();

                postToWall();
            }

            public void onError(DialogError error) {
                // Function to handle error

            }

            public void onFacebookError(FacebookError fberror) {
                // Function to handle Facebook errors

            }

        });
    }
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
}
private void postToWall() {
    Bundle parameters = new Bundle();

             parameters.putString("name", "Facebook SDK for Android"); 
    //parameters.putString("title",  lblName.getText().toString());
    //  parameters.putString("title", TAG_TITLE);  
      facebook.dialog(Singlemenuitem.this, "title", parameters, new    DialogListener() {

        public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub

        }

        public void onError(DialogError e) {
            // TODO Auto-generated method stub

        }

        public void onComplete(Bundle values) {
            // TODO Auto-generated method stub
        }

        public void onCancel() {
            // TODO Auto-generated method stub
        }
    });
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:57:25.570

我已经用[Facebook Sdk 3.0](https://developers.facebook.com/android/)
完成了这件事提取该 jar 文件，然后你会找到不同 facebook 功能的**示例代码**，你只需要输入你的**facebook App id**。

我在登录时遇到错误，所以我在**保存 Facebook 令牌方面做了一些更改：**

```
@Override
protected void onSaveInstanceState(Bundle outState) 
{
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState); // Saving Session
} 
```

在您的活动中更改此内容并让我知道。

# html - 如何配置 TinyMCE 以允许锚 (a) 标记内的块级元素？

> ID：14597219
> 
> 赞同：8
> 
> 时间：2013-01-30T05:20:36.637
> 
> 标签：html, tinymce

这是我的场景：

我希望能够创建类似的内容

> <div> <a id="supportTile" class="contentModule" href="/Support"> <h2>支持</h2> </a> </div>

然而 tinyMCE 将其剥离为

> <div> <h2>支持</h2> </div>

我的配置目前是这样的（使用 TinyMCE jQuery）：

> ```
> script_url: _applicationRoot + "Scripts/tiny_mce/tiny_mce.js",
> theme: "advanced",                    
> plugins: "paste,filemanager,imagemanager,advimage,inlinepopups",
> ...
> extended_valid_elements: "img[!src|border:0|alt|title|width|height|style|name|id|class],a[href|target|title|onclick|name|id|class],article[name|id|class],div[name|id|class],section[name|id|class]",
> schema: "html5",               
> ...
> convert_urls: true,
> document_base_url: _applicationRoot 
> ```

我尝试设置 verify_html: false 但没有运气。

我尝试删除 extended_valid_elements 并将其替换为：

> ```
> valid_elements: "*[*]",
> verify_html: false 
> ```

也没有运气。

你能看出我的配置有问题吗？这完全可以实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:07:15.277

是的，这应该是可以实现的。为了能够产生像这样的输出

```
<div> <a id="supportTile" class="contentModule" href="/Support"> <h2>Support</h2> </a> </div> 
```

您将不得不修改tinymce 设置[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)和valid_elements。您需要注意，您可能需要放大一个默认设置。

`valid_elements: "*[*]"`由于希望将在最新版本或下一个版本中删除的错误，因此无法正常工作。

我使用此设置（我不使用 div 或 h2s）

```
valid_elements: "@[id|class|title|style],"
+ "a[name|href|target|title|alt],"
+ "#p,-ol,-ul,-li,br,img[src|unselectable],-sub,-sup,-b,-i,-u,"
+ "-span[data-mce-type],hr",

valid_child_elements : "body[p,ol,ul]"
+ ",p[a|span|b|i|u|sup|sub|img|hr|#text]"
+ ",span[a|b|i|u|sup|sub|img|#text]"
+ ",a[span|b|i|u|sup|sub|img|#text]"
+ ",b[span|a|i|u|sup|sub|img|#text]"
+ ",i[span|a|b|u|sup|sub|img|#text]"
+ ",sup[span|a|i|b|u|sub|img|#text]"
+ ",sub[span|a|i|b|u|sup|img|#text]"
+ ",li[span|a|b|i|u|sup|sub|img|ol|ul|#text]"
+ ",ol[li]"
+ ",ul[li]", 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-11T05:42:31.660

我找到了另一种方法，并想到了分享！有一个名为 [**allow_html_in_named_anchor**](https://github.com/tinymce/tinymce-docs/blob/master/_includes/configuration/allow-html-in-named-anchor.md)的标志，它将任何 HTML 保存在锚点内。

# android - Android - 动态创建的标签只能点击一次

> ID：14597220
> 
> 赞同：3
> 
> 时间：2013-01-30T05:20:38.463
> 
> 标签：android, dynamic, tabs

我可能在做一些愚蠢的事情......我在同一个标​​签主机上有一个静态创建的选项卡和一堆动态创建的选项卡。默认显示静态选项卡。当我单击其中一个动态创建的选项卡时，它会正确加载动态内容。但是，当我在此之后单击任何其他选项卡时，无论它是动态创建的还是静态创建的，它都不会做任何事情。知道为什么吗？

这是我在 MyActivitys onResume 方法中尝试做的事情：

```
final TabHost tabs = (TabHost)findViewById(R.id.tabHost);
tabs.setup();

// Tab with static content
TabHost.TabSpec instructions = tabs.newTabSpec("instructions");
tabs.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
    @Override public void onTabChanged(String tabId) {
        setTabColors(tabs); 
    } 
});
instructions.setContent(R.id.instructions); 
instructions.setIndicator("Instructions");
tabs.addTab(instructions);

// Tabs with dynamic content
for (int i = 0; i < 5; i++) {
    TabHost.TabSpec category = tabs.newTabSpec("cat" + i);
    final boolean m_editable = editable;
    category.setContent(new TabHost.TabContentFactory() {
        public View createTabContent(String tag) {  
            ScrollView scrollView = new ScrollView(MyActivity.this);
            TableLayout dataMatrix = new TableLayout(MyActivity.this);                  
            final LayoutInflater inflater = LayoutInflater.from(MyActivity.this);   
            for(int i=0; i<2; i++) {
                TableRow item = (TableRow) inflater.inflate(R.layout.categorydata_entry, dataMatrix, false);
                ((EditText)(item.getChildAt(0))).setText("row"+i);
            }
            dataMatrix.addView(item,new TableLayout.LayoutParams( TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
        }
        scrollView.addView(dataMatrix);
        return scrollView;
    } 
});
category.setIndicator(i);
tabs.addTab(category);                      
    } 
```

以及 layout.xml 中的相关元素：

```
<TabHost android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:id="@+id/tabHost" > 
    <HorizontalScrollView
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:fillViewport="true" 
        android:scrollbars="none" >
        <TabWidget 
            android:id="@android:id/tabs" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" />
    </HorizontalScrollView>
    <FrameLayout 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:id="@android:id/tabcontent" >
        <LinearLayout 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:id="@+id/instructions" > 
            <TextView android:layout_width="fill_parent" 
                android:text="This is the static content tab" />
        </LinearLayout>
    </FrameLayout>          
</TabHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:14:47.350

终于发现我的错误了。万一其他人遇到同样的困难：无论出于何种原因，tabContent 都不能是 ScrollView。

在滚动视图周围放置一个 LinearLayout 容器使一切都按预期工作。

# c# - WPF DataGrid水平滚动条问题

> ID：14597227
> 
> 赞同：1
> 
> 时间：2013-01-30T05:20:54.130
> 
> 标签：c#, wpf, xaml, datagrid, scrollbar

我有以下数据网格：

```
<DataGrid x:Name="myDataGrid"
          RowHeaderWidth="{Binding RelativeSource={RelativeSource Self},
                           Path=RowHeight}">
  <DataGrid.Columns>
    <DataGridTextColumn Header="Name" Width="*"
                        Binding="{Binding Name}"/>
    <DataGridTextColumn Header="Age" Width="1.2*"
                        Binding="{Binding Age}"/>
  </DataGrid.Columns>
</DataGrid>

<Button Grid.Row="1" Content="Add" Click="Button_Click"
        Width="100"/> 
```

```
private void Button_Click(object sender, RoutedEventArgs e)
{
  var person = new Person()
  {
    Name = "Aaa",
    Age = 27
  };
  myDataGrid.Items.Add(person);
}

public class Person
{
  public string Name { get; set; }
  public int Age { get; set; }
} 
```

问题是添加新行时出现水平滚动条，这是不必要的。删除 RowHeaderWidth 属性将解决问题，但我需要它来显示验证错误。将 RowHeaderWidth 设置为固定值无济于事。有人可以建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:23:19.053

我发现的一种解决方法是设置按钮的宽度，该按钮位于行和列的交叉点（数据网格的左上角）。当第一行添加到数据网格时，此按钮会出现在可视树中。[我在这里](http://www.scottlogic.co.uk/blog/colin/2009/02/styling-hard-to-reach-elements-in-control-templates-with-attached-behaviours/)了解了这个按钮。

```
public MainWindow()
{
  InitializeComponent();
  myDataGrid.ItemContainerGenerator.StatusChanged += onItemContainerGeneratorStatusChanged;
}

private void onItemContainerGeneratorStatusChanged(object sender, EventArgs e)
{
  if (((ItemContainerGenerator)sender).Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
  {
    Button btn = GetVisualChild<Button>(myDataGrid);
    if (btn != null)
    {
      btn.Width = myDataGrid.RowHeaderActualWidth;
    }
  }
}

public T GetVisualChild<T>(Visual parent) where T : Visual
{
  T child = default(T);
  int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
  for (int i = 0; i < numVisuals; i++)
  {
    Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
    child = v as T;
    if (child == null) child = GetVisualChild<T>(v);
    if (child != null) break;
  }
  return child;
} 
```

但是，如果我将 DataGrid.RowDetailsTemplate 和 DataGrid.SelectedItem 设置为新添加的行，它就不起作用了。所以我尝试了以下方法：

```
private void onItemContainerGeneratorStatusChanged(object sender, EventArgs e)
{
  if (((ItemContainerGenerator)sender).Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
  {
    ScrollViewer sv = GetVisualChild<ScrollViewer>(myDataGrid);
    if (sv != null)
    {
      AutomationPeer automationPeer = FrameworkElementAutomationPeer.FromElement(sv);
      if (automationPeer == null)
        automationPeer = FrameworkElementAutomationPeer.CreatePeerForElement(sv);
      IScrollProvider provider = automationPeer.GetPattern(PatternInterface.Scroll) as IScrollProvider;
      try { provider.Scroll(ScrollAmount.SmallIncrement, ScrollAmount.NoAmount); }
      catch { }
      try { provider.Scroll(ScrollAmount.SmallDecrement, ScrollAmount.NoAmount); }
      catch { }
    }
  }
} 
```

这确实解决了最初的问题，但引入了一个新问题：验证错误红色框现在从它们指示的错误的文本框中移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:46:23.820

尝试这个：

```
 <DataGrid x:Name="myDataGrid"
      RowHeaderWidth="{Binding RelativeSource={RelativeSource Self},
                       Path=RowHeight}" ScrollViewer.CanContentScroll="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Width="*" 
                    Binding="{Binding Name}"/>
                <DataGridTextColumn Header="Age" Width="*"
                    Binding="{Binding Age}"/>
            </DataGrid.Columns>
        </DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:43:13.077

另一个更适合我的解决方法是：

```
private void fixScrollBarBug()
{
  ScrollBar scrollBar = GetChildByName<ScrollBar>(myDataGrid, "PART_HorizontalScrollBar");
  if (scrollBar != null)
  {
    if (VisualTreeHelper.GetChildrenCount(scrollBar) > 0)
    {
      Grid grid = (Grid)VisualTreeHelper.GetChild(scrollBar, 0);
      if (VisualTreeHelper.GetChildrenCount(grid) == 3)
      {
        try
        {
          RepeatButton leftButton = (RepeatButton)VisualTreeHelper.GetChild(grid, 0);
          RepeatButton rightButton = (RepeatButton)VisualTreeHelper.GetChild(grid, 2);

          AutomationPeer automationPeer = FrameworkElementAutomationPeer.FromElement(rightButton);
          if (automationPeer == null)
            automationPeer = FrameworkElementAutomationPeer.CreatePeerForElement(rightButton);
          IInvokeProvider provider = automationPeer.GetPattern(PatternInterface.Invoke) as IInvokeProvider;
          provider.Invoke();

          automationPeer = FrameworkElementAutomationPeer.FromElement(leftButton);
          if (automationPeer == null)
            automationPeer = FrameworkElementAutomationPeer.CreatePeerForElement(leftButton);
          provider = automationPeer.GetPattern(PatternInterface.Invoke) as IInvokeProvider;
          provider.Invoke();
        }
        catch { }
      }
    }
  }
} 
```

添加第一行后调用上述方法，解决了问题：

```
myDataGrid.Dispatcher.BeginInvoke(DispatcherPriority.Input, new Action(
delegate
{
  fixScrollBarBug();
})); 
```

# android - 如何在单键哈希图中获取两个字符串值并将此键转换为数组

> ID：14597228
> 
> 赞同：0
> 
> 时间：2013-01-30T05:20:54.083
> 
> 标签：android, arraylist, hashmap

我面临hashmap和arraylist的问题......我的问题是......

我有这样的HashMap..

```
public class QuestionData {
    private String questionID;
    private String question;
    private String answer;
    public String getQuestionID() {
        return questionID;
    }
    public void setQuestionID(String questionID) {
        this.questionID = questionID;
    }
    public String getQuestion() {
        return question;
    }
    public void setQuestion(String question) {
        this.question = question;
    }
    public String getAnswer() {
        return answer;
    }
    public void setAnswer(String answer) {
        this.answer = answer;
    }
}
while (is another question to add) {
  QuestionData questionData = new QuestionData();
  questionData.setQuestionID(questionID);
  questionData.setQuestion(question);
  questionData.setAnswer(answer);
  ArrayList < QuestionData > questionDatas = new ArrayList < QuestionData > ();
  questionDatas.add(questionData);
}
int counter = 0;
Button nextQuestion = (Button) findViewById(R.id.your_button);
nextQuestion.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event) {
     if (counter < questionDatas.size()) {
         QuestionData question = questionDatas.get(counter);
         showNextQuestion(question);
         counter++;
     }
     return false;
  }
 });
  showNextQuestion(QuestionData data) {
  data.getQuestionID();
  data.getQuestion();
  data getAnswer();
} 
```

但是我需要 hashmap 的单个键中的字符串 questionid 和 question，然后我想将这个单个键转换为 arraylist ...

之后，当我单击下一个按钮时，我想增加数组列表...根据 questionid 显示下一个问题...

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:28:41.450

为您的问题创建仅数据类

```
public class QuestionData {

    private String questionID;
    private String question;
    private String answer;
    public String getQuestionID() {
        return questionID;
    }
    public void setQuestionID(String questionID) {
        this.questionID = questionID;
    }
    public String getQuestion() {
        return question;
    }
    public void setQuestion(String question) {
        this.question = question;
    }
    public String getAnswer() {
        return answer;
    }
    public void setAnswer(String answer) {
        this.answer = answer;
    }
} 
```

并将哈希映射与此数据结构一起使用。

```
 QuestionData questionData = new QuestionData();
        questionData.setQuestionID(questionID);
        questionData.setQuestion(question);
        questionData.setAnswer(answer);
//        HashMap<String, QuestionData> map = new HashMap<String, QuestionData>();
        ArrayList<QuestionData> questionDatas = new ArrayList<QuestionData>();
        questionDatas.add(questionData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:29:59.430

我更喜欢@ViVart 的回答。要添加到他，您可以实现您的按钮：

```
ArrayList<QuestionData> questionDatas = new ArrayList<QuestionData> ();
while (is another question to add) {
    if (firstQuestionParsed) {
        TextView questionID_tv = (TextView) findViewById(R.id.your_textview);
        TextView question_tv = (TextView) findViewById(R.id.your_textview);
        TextView answer_tv = (TextView) findViewById(R.id.your_textview);
        questionID_tv.setText(questionID);
        question_tv.setText(question);
        answer_tv.setText(answer);
    }
    QuestionData questionData = new QuestionData();
    questionData.setQuestionID(questionID);
    questionData.setQuestion(question);
    questionData.setAnswer(answer);
    questionDatas.add(questionData);
}
 int counter = 0;
 Button nextQuestion = (Button) findViewById(R.id.your_button);
 nextQuestion.setOnTouchListener(new OnTouchListener() {
     @Override
     public boolean onTouch(View v, MotionEvent event) {
         if (counter < questionDatas.size()) {
             QuestionData question = questionDatas.get(counter);
             showNextQuestion(question);
             counter++;
         }
         return false;
     }
 }); 
```

然后你只需要实现

```
showNextQuestion(QuestionData data) {
    data.getQuestionID();
    data.getQuestion();
    data getAnswer();
} 
```

# android - 如何在 SearchView/Widget 调用的搜索期间传递额外的变量？

> ID：14597229
> 
> 赞同：13
> 
> 时间：2013-01-30T05:21:00.740
> 
> 标签：android, searchview

我已成功使用操作栏中的搜索小部件按照[本指南](http://developer.android.com/guide/topics/search/search-dialog.html)执行搜索。搜索很好，但我想知道如何在搜索中传递其他变量。相同的指南指出我可以覆盖`onSearchRequested()`，但这似乎不适用于搜索小部件。

*   有问题的覆盖：

    ```
    @Override
    public boolean onSearchRequested() {    
        Bundle appData = new Bundle();
        appData.putString("KEY", "VALUE");
        startSearch(null, false, appData, false);
        return true;
    } 
    ```

*   在我的活动课程中获取捆绑包：

    ```
    protected void onCreate(Bundle savedInstanceState) {
        // ...
        Intent intent = getIntent();
        Bundle appData = intent.getBundleExtra(SearchManager.APP_DATA);
        String value = appData.getString("KEY");
        Log.d("VALUE", value);
        // ...
    } 
    ```

我的应用程序在创建搜索类时崩溃，因为`appData`总是`null`.

### 笔记

`onSearchRequested()` **被**调用，但捆绑包没有进入我的`onCreate()`方法。

传递的意图的所有额外内容都是`{user_query=my-query, query=my-query}`.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-03T20:06:55.493

似乎这样做的唯一方法是拦截在启用搜索的活动中创建的新活动。为此，我们重写了该`startActivity()`方法。然后我们可以检查以确保该活动确实是搜索活动，然后在意图中添加额外内容。工作代码如下。

```
@Override
public void startActivity(Intent intent) {      
    // check if search intent
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        intent.putExtra("KEY", "VALUE");
    }

    super.startActivity(intent);
} 
```

然后，您可以像在搜索活动中使用任何其他额外内容一样获取额外内容：

```
mValue = intent.getStringExtra("KEY"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T15:05:15.327

您可以覆盖调用搜索的`onSearchRequested`方法。`Activity`

```
@Override
public boolean onSearchRequested() {
     Bundle appData = new Bundle();
     appData.putBoolean(SearchableActivity.JARGON, true);
     startSearch(null, false, appData, false);
     return true;
 } 
```

然后你可以在里面提取这个数据`SearchableActivity`

```
Bundle appData = getIntent().getBundleExtra(SearchManager.APP_DATA);
if (appData != null) {
    boolean jargon = appData.getBoolean(SearchableActivity.JARGON);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:33:34.300

我想你只想使用

`String value = intent.getStringExtra(SearchManager.APP_DATA);`

因为意图包含您传递的包以开始搜索。

# php - 如果用户手动输入参数，.htaccess/mod_rewrite 不起作用

> ID：14597230
> 
> 赞同：0
> 
> 时间：2013-01-30T05:21:04.587
> 
> 标签：php, .htaccess, mod-rewrite

我的 .htaccess 文件中有一条规则：

```
RewriteRule ^submit index.php?task=submit [L] 
```

它将引用 index.php?task=submit 的站点上的链接重定向到 /submit。

但是，我将信息发布到同一页面，因此最终 URL 看起来像这样：

```
index.php?task=submit&path=xyz&key=xyz.jpg&code=1234 
```

由于发布方法的性质，我必须发布到 index.php?task=submit。

如果用户手动输入扩展路径作为 url，是否有规则会重写 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:23:10.170

听起来您正在寻找[`QSA`flag](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)，它代表 Query String Append。它将重写的查询字符串与传入的查询字符串结合起来：

```
RewriteRule ^submit index.php?task=submit [L,QSA] 
```

这意味着这...

```
/submit?path=xyz&key=xyz.jpg&code=1234 
```

...将被正确改写为：

```
index.php?task=submit&path=xyz&key=xyz.jpg&code=1234 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:01:24.457

> 由于发布方法的性质，我必须发布到 index.php?task=submit。

这不是真的。如果它是 POST 表单，您*可以*`/submit`毫无问题地指向一个表单。如果是 GET 表单，则需要 [QSA] 标志，但仍然没有问题。

但是从您的评论中，我得出结论，您希望用户在地址栏中看到“/提交”，但您的脚本可以访问其他 GET 变量。这*行不通*，看来您误解了重写的概念：

您不是重写`index.php?task=submit` **TO** `/submit`（例如：神奇地向用户展示其他内容），而是重写`/submit` **TO** `index.php?task=submit`（例如：用户请求`/submit`，此请求在内部被重写为另一个请求）。

因此，如果原始请求不包含任何方式的路径、密钥、代码信息，那么重写的请求也不能。但是您可以将它们存储在会话中，然后`/submit`使用 PHP 重定向到。

该脚本的结构如下：

```
session_start();
if (isset($_GET['path'])) {
    $_SESSION['path'] = $_GET['path'];
    header('Location: http://' . $_SERVER['HTTP_HOST'] . '/submit');
    session_write_close();
    exit;
}
if (isset($_SESSION['path'])) {
    $path = $_SESSION['path'];
    unset($_SESSION['path']);
    // do stuff with $path
} 
```

这是否是一个合理的解决方案取决于此“提交”操作的作用。对于诸如检索信息的搜索可能没问题，但对于存储信息的任何内容，**[POST/REDIRECT/GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)**模式是更好的方法。

# c# - ASP.NET Web API 客户端 ProgressMessageHandler 发布任务卡在 WinForm 应用程序中

> ID：14597232
> 
> 赞同：3
> 
> 时间：2013-01-30T05:21:22.107
> 
> 标签：c#, asp.net-web-api, task

我正在使用MS `HttpClient`ASP.NET [Web API Client Libraries](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0)。`ProgressMessageHandler`

我很高兴在控制台应用程序中对此进行了修补，没有问题，但现在在 WinForm 应用程序中，“发布”任务只是简单地*卡*在了`.Wait()`或`.Result`.

下面是我*非常简单*的测试应用程序的完整列表。按钮 1 工作正常，按钮 2 每次调用时都会冻结`postTask.Result`。为什么？

定位 4.0 或 4.5 没有区别。*控制台应用程序*中的相同代码没有问题。

```
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Handlers;
using System.Windows.Forms;

namespace WindowsFormsApplication13
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private ProgressMessageHandler _progressHandler = new ProgressMessageHandler();
        private const string SERVICE_URL = "http://www.google.com.au";

        private HttpClient GetClient(bool includeProgressHandler = false)
        {
            var handlers = new List<DelegatingHandler>();

            if (includeProgressHandler)
            {
                handlers.Add(_progressHandler);
            }

            var client = HttpClientFactory.Create(handlers.ToArray());
            client.BaseAddress = new Uri(SERVICE_URL);
            return client;
        }

        private void PostUsingClient(HttpClient client)
        {
            var postTask = client.PostAsJsonAsync("test", new
            {
                Foo = "Bar"
            });

            var postResult = postTask.Result;

            MessageBox.Show("OK");
        }

        private void button1_Click(object sender, EventArgs e)
        {
            using (var client = GetClient())
            {
                PostUsingClient(client);
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            using (var client = GetClient(true))
            {
                PostUsingClient(client);
            }
        }
    }
} 
```

## 更新

好的，所以看起来[这](https://stackoverflow.com/questions/10343632/httpclient-getasync-never-returns-when-using-await-async)是我的问题。对于 .NET 4.5，显而易见的解决方案是，正如 @StephenCleary 建议的那样，让 async / await 模式从`PostAsJsonAsync`调用一直渗透到按钮单击处理程序中。更像这样的东西：

```
private Task<HttpResponseMessage> PostUsingClient(HttpClient client)
{
    return client.PostAsJsonAsync("test", new
    {
        Foo = "Bar"
    });
}

private async void button2_Click(object sender, EventArgs e)
{
    var client = GetClient(true);
    var response = await PostUsingClient(client);
} 
```

**现在**我的问题是在 .NET 4.0 中获得等效的解决方案（当然，出于遗留原因）。一个接近的近似值是在按钮单击处理程序中使用延续，麻烦是（再次出于遗留原因），我实际上希望按钮单击处理程序阻塞，直到异步返回。我找到了一些使用 4.0 兼容`yield`运算符的创造性解决方案，但它们感觉有点乱。相反，我可以设计的最简单的替代方案是：

```
private void button2_Click(object sender, EventArgs e)
{
    var result = Task.Run(() => { return PostUsingClient(client); }).Result;
} 
```

我无法想象这是最高效的实现，坦率地说它仍然感觉很笨拙。我能做得更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:30:38.213

任何时候你尝试混合同步和异步代码，你最终都会有点混乱。（我有[一篇博客文章](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)解释了为什么这种死锁发生在 Windows 窗体而不是控制台应用程序上）。

最好的解决办法是全力以赴`async`。

> （再次出于遗留原因），我实际上希望按钮单击处理程序阻塞，直到异步返回。

考虑一些替代方案。是否可以在`async`单击处理程序的开头禁用按钮并在最后重新启用它？这是一种相当普遍的方法。

也许如果您描述了为什么要阻止按钮单击处理程序（在另一个问题中），我们可以建议替代解决方案。

> 我可以设计的最简单的替代方法是 [使用 Task.Run。] 我无法想象这是性能最高的实现，但坦率地说，它仍然感觉很笨拙。

它和其他任何解决方案一样好。如果您的所有s 在use的调用层次结构中，*则*可以直接调用。一个问题是它会将任何异常包装在 中，因此您的错误处理也变得更加复杂。`Result``await``PostUsingClient``ConfigureAwait(false)``Result``AggregateException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:08:29.757

我已使用以下函数来解决此问题（*仅用于改造旧版*）。

```
public T ExecuteSync<T>(Func<Task<T>> function) {
            return new TaskFactory(TaskScheduler.Default).StartNew((t) => function().Result, TaskContinuationOptions.None).Result; ;
        }

private void button2_Click(object sender, EventArgs e)
{
    var client = GetClient(true);
    var response = ExecuteSync(() => PostUsingClient(client));
} 
```

这对我有用，因为它保证在尝试同步运行异步内容时，它总是使用 Threadpool TaskScheduler 完成，而不是基于 SyncronizationContext 的 TaskScheduler。您遇到的问题是，因为您在延续上调用 GetAsync，所以它位于 Task 内部，默认情况下所有新任务都继承创建任务的 TaskScheduler。因此，您最终尝试在 UI 线程上运行 GetAsync，但随后阻塞了 UI 线程。当您不在任务中运行时，默认行为是使用默认任务调度程序（即线程池调度程序）执行 GetAsync。（至少这是我目前的理解）

另一方面，您可能不想在每个请求上都创建一个新的 HttpClient 。在应用程序范围内创建一个，或者至少在表单范围内创建一个并重新使用它。每次处理 HttpClient 时，它都会强制尝试关闭底层 TCP 连接，从而有效地消除了 HTTP 1.1 默认保持活动行为的好处。

# opengl - 如何从对象内部的一点旋转对象

> ID：14597236
> 
> 赞同：0
> 
> 时间：2013-01-30T05:21:35.270
> 
> 标签：opengl

假设我们有一个正方形，在它被平移到某个位置后，我想围绕对象内的一个点旋转它。

```
 glPushMatrix();
       glTranslatef(50, 50, 0.0);
       glRotatef(joint, 0.0, 0.0, 1.0);
       glScalef(10,20, 1.0);
       glTranslatef(0.0, -0.5, 0.0);
       glColor3f(1.0, 0.0, 0.0);
       drawSquare(1.0);
     glPopMatrix(); 
```

上面的那个只在缩放后围绕 (0.0) 点旋转。如果我将 glRotatef(joint, 0.0, 0.0, 1.0) 更改为 glRotatef(joint, 0.0, 5.0, 1.0)，则对象开始扭曲。

![在此处输入图像描述](../Images/0fda4b24601e7379db03f3858754cfde.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:41:25.613

OpenGL 中的旋转围绕位于原点 (0, 0, 0) 的轴旋转。为了围绕特定点旋转，您首先需要将该点平移到原点，然后执行旋转。在 OP 中，您将围绕点 (-50,-50, 0) 旋转（因为平移移动坐标系，而不是特定点），然后围绕**Z**轴旋转*关节*度数。

 **从 OP 来看，假设每帧都更新*关节*，我希望该代码具有围绕点 (-50, -50, 0) 运行的正方形。**

# node.js - 使用 mongoose 在 mongodb 中设置集合的到期时间

> ID：14597241
> 
> 赞同：47
> 
> 时间：2013-01-30T05:22:07.590
> 
> 标签：node.js, mongodb, mongoose

以下是可通过 mongo 终端设置集合到期时间（TTL）的命令：

```
db.log.events.ensureIndex( { "status": 1 }, { expireAfterSeconds: 3600 } ) 
```

如何使用 mongoose 从 Node.js 中的代码执行此操作？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-30T05:56:51.487

在 Mongoose 中，您可以通过该字段的架构定义中的属性在该`Date`字段上创建一个 TTL 索引：[`expires`](https://mongoosejs.com/docs/api.html#schema_Schema-index)

```
// expire docs 3600 seconds after createdAt
new Schema({ createdAt: { type: Date, expires: 3600 }}); 
```

注意：

*   MongoDB 的数据过期任务每分钟运行一次，因此过期的文档可能会在过期后持续一分钟。
*   此功能需要 MongoDB 2.2 或更高版本。
*   您可以在创建文档时设置`createdAt`为当前时间，或者按照[此处](https://stackoverflow.com/questions/24008956/time-to-live-in-mongodb-mongoose-dont-work-documents-doesnt-get-deleted)`default`的建议添加一个为您执行此操作。
    *   `{ createdAt: { type: Date, expires: 3600, default: Date.now }}`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-08-14T10:44:17.940

这段代码对我有用。

有帮助吗

```
let currentSchema = mongoose.Schema({
    id: String,
    name: String,
    packageId: Number,
    age: Number
}, {timestamps: true});

currentSchema.index({createdAt: 1},{expireAfterSeconds: 3600}); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-28T22:14:27.897

`expires`如果您不想处理过期时间计算并提高架构的整体可读性，那么提供一个字符串也可以很好地与 Mongoose 配合使用。

例如，这里我们设置`expires`为**2m**（2 分钟），mongoose 会为我们转换为**120 秒**：

```
var TestSchema = new mongoose.Schema({
  name: String,
  createdAt: { type: Date, expires: '2m', default: Date.now }
}); 
```

Mongoose 会在后台创建一个索引，并`expireAfterSeconds`在这种情况下自动设置为`120`秒（*由**2m***指定）。

需要注意的是，TTL 进程[每 60 秒运行一次，](https://docs.mongodb.com/manual/core/index-ttl/#timing-of-the-delete-operation)因此它并不总是完全准时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-16T14:09:40.637

如果您正在使用 Mongodb Atlas Replica Sets - 请尝试：

```
import * as mongoose from 'mongoose'; 

let currentSchema = new mongoose.Schema({
        createdAt: { type: Date, expires: 10000, default: Date.now },
        id: String,
        name: String,
        packageId: Number,
        age: Number
        });

currentSchema.index({"lastModifiedDate": 1 },{ expireAfterSeconds: 10000 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-04T09:05:54.713

有一个 npm 库 - 'mongoose-ttl'。：

```
var schema = new Schema({..});
schema.plugin(ttl, { ttl: 5000 }); 
```

你可以看到这个库的所有选项： [https ://www.npmjs.com/package/mongoose-ttl](https://www.npmjs.com/package/mongoose-ttl)

# iphone - UISearchBar：显示搜索历史

> ID：14597244
> 
> 赞同：0
> 
> 时间：2013-01-30T05:22:30.973
> 
> 标签：iphone, xcode, uisearchbar, bookmarks

我想在点击书签按钮时显示搜索历史记录：包含最后 10 个搜索条目的表格将在搜索栏下方弹出。（如谷歌自动完成）

我有搜索条目的搜索`NSMutableArray`历史`NSString`。

我应该如何动态调用该列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:33:39.757

只需执行

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar 
```

`UISearchBar`在您的文件中委托。在此方法中，添加代码以显示包含`UITableView`历史列表的弹出视图。

确保你已经写`searchBar.delegate = self`在你的`.m`文件中。

# clojure - 映射哈希图中的每个值

> ID：14597245
> 
> 赞同：11
> 
> 时间：2013-01-30T05:22:33.590
> 
> 标签：clojure, hashmap, functor

我有一个哈希图。我想迭代这些值并根据值的类型替换它们中的每一个。如果该值是整数，则将其替换为`true`，如果不是，则将其替换为`false`。我希望它返回一个新的哈希映射，每个值都更新为真或假。

```
(defn my-function [hash-map]
  (loop [hash-map hash-map]
    (for [value (vals hash-map)]
      (if (= Integer (type value))
        (recur (assoc hash-map key true))
        (recur (assoc hash-map key false)))))) 
```

这行不通，因为 Clojure `Can only recur from tail position`，但这是我想要做的一般想法。任何有效的方法来做到这一点的想法？ `if-let`并且`update-in`似乎是潜在的解决方案，但我无法完全掌握它们。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T07:32:00.927

```
(reduce-kv (fn [m k v] (assoc m k (= Integer (type v)))) {} m) 
```

如果您愿意，甚至可以更短：

```
(reduce-kv #(assoc %1 %2 (= Integer (type %3))) {} m) 
```

并保持地图的类型（散列与排序）：

```
(reduce-kv #(assoc %1 %2 (= Integer (type %3))) (empty m) m) 
```

警告：最后一个不适用于记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T11:51:39.437

您概述的操作——独立地转换映射中的每个值——实际上已经在[Functor 模块](http://richhickey.github.com/clojure-contrib/generic.functor-api.html)中实现。

要使用它，您需要做的是实现转换单个值的函数，然后`fmap`将其覆盖在您的地图上：

```
(fmap your-function your-map) 
```

*（不要被 fmap 这个名字误导——这个操作并不特定于映射。因为它是一个通用函数，所以它适用于任何具有 Functor 实例的东西，它还包括列表、集合和向量）。* 这是一个结构保留操作：不会更改任何键，不会添加新键，也不会删除任何键。

如果您不想使用泛型函数，只需查看[实现](https://github.com/richhickey/clojure-contrib/blob/2ede388a9267d175bfaa7781ee9d57532eb4f20f/src/main/clojure/clojure/contrib/generic/functor.clj#L34)：

```
(defmethod fmap clojure.lang.IPersistentMap
  [f m]
  (into (empty m) (for [[k v] m] [k (f v)])))  ;;; <== the important part!! 
```

哪里`f = your-function`和`m = your-map`。

* * *

此库已移动（正在移动？将移动？）到`clojure.algo.generic.functor`. 有关更多信息，请参阅[此内容，以及](http://dev.clojure.org/display/design/Where+Did+Clojure.Contrib+Go)[此](https://github.com/clojure/algo.generic/blob/master/src/main/clojure/clojure/algo/generic/functor.clj)内容的来源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T06:46:24.617

```
(letfn [(map-vals [m f]
          (into {} (for [[k v] m]
                     [k (f v)])))]
  (map-vals m #(= Integer (type %)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:19:33.750

```
(defn f [m]
  (reduce (fn [res [k v]] 
            (assoc res k (= Integer (type v)))) 
          {} m)) 
```

或者如果您需要递归版本

```
(defn f 
  ([m] (f {} m))
  ([res m] (if (empty? m)
             res
             (let [[k v] (first m)]
               (recur (assoc res k (= Integer (type v))) 
                      (rest m)))))) 
```

# javascript - Javascript console.log(object) 与连接字符串

> ID：14597246
> 
> 赞同：39
> 
> 时间：2013-01-30T05:22:33.703
> 
> 标签：javascript, node.js, string-concatenation, pretty-print

我在 node.js 中运行它：

```
> x = { 'foo' : 'bar' }
{ foo: 'bar' }
> console.log(x)
{ foo: 'bar' }
undefined
> console.log("hmm: " + x)
hmm: [object Object]
undefined 
```

我不明白为什么`console.log(x)`“漂亮地打印”对象，而字符串连接“丑陋地打印”它。更重要的是，让它打印的最好方法是什么`hmm: { foo: 'bar' }`？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-30T05:25:19.147

将`+ x`对象强制`x`转换为字符串，即`[object Object]`：

[http://jsfiddle.net/Ze32g/](http://jsfiddle.net/Ze32g/)

漂亮的打印是一个非常好的并且可能非常复杂的底层代码，有人将其作为`console`对象和`log`方法的一部分来实现。

试试这个：

```
console.log("hmm: ", x); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T05:54:47.510

### console.log 函数

'console.log' 是一个重载函数，它接受通过副本（字符串|数字|布尔值）或通过引用（其他所有内容）传递的参数列表。

对于通过复制传递的值，该值通过将其转换为字符串来打印。
在通过引用传递值的情况下，该值会按照浏览器认为合适的方式打印出来。

### + 运算符

加号运算符 (+) 已重载。当运算符两边都是数字时，返回两个运算符之和。

如果运算符的任一侧是字符串，则两侧都将转换为字符串，并将返回这两个字符串的连接。

```
console.log("hmm: " + x); 
```

和写一样

```
console.log(String("hmm: ") + String(x)); 
```

### 解决方案

通过将加号 (+) 与逗号 (,) 交换来防止隐式字符串转换

```
console.log("hmm: ", x); 
```

### 更多信息

有关“console.log”功能的更深入描述，请参阅：
[https ://developer.mozilla.org/en-US/docs/DOM/console.log](https://developer.mozilla.org/en-US/docs/DOM/console.log)

有关加号运算符 (+) 的更深入描述，请参阅：
[http ://www.w3schools.com/js/js_operators.asp](http://www.w3schools.com/js/js_operators.asp)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-30T05:25:26.457

`JSON.stringify`打印附加字符串的对象时使用

```
console.log("Haa"+JSON.stringify(x)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-04T04:30:23.447

你可以`console.log(JSON.stringify(yourObject));`用来打印你的对象。这行得通！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-30T05:25:42.297

您有多种选择：

```
process.stdout.write('hmm: ')
console.dir(x) 
```

其他...

```
var util = require('util')
process.stdout.write('hmm: ')
console.log(util.inspect(x, true, 10, true)) 
```

有关更多信息，请参阅[util.inspect](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)文档。

**编辑：**对不起，我以为我读过 Node.js。这仅对 Node.js 有效。所以，我会把它留给任何谷歌员工。

**Edit2：**我没疯，我只是需要睡觉。你确实写过 Node.js。我要把它添加为标签。

# oracle - SQL 错误：ORA-24005：不适当的实用程序用于在 AQ 表 VPAUTO.QT_REQS 上执行 DDL

> ID：14597250
> 
> 赞同：0
> 
> 时间：2013-01-30T05:22:58.367
> 
> 标签：oracle

在将 Fastbrain 数据库迁移到 VDC 实践期间，我们尝试在截断表之前禁用约束作为步骤之一。我们无法禁用队列表上的约束。传统`alter table disable constraint`命令不适用于`queue tables`.

使用的命令：

```
ALTER TABLE VPAUTO.AQ$_QT_RESPS_F disable constraint SYS_C0019957; 

ALTER TABLE VPAUTO.AQ$_QT_REQS_F disable constraint SYS_C0019955; 

ALTER TABLE VPAUTO.AQ$QT_RESPS disable constraint SYS_C0019956; 

ALTER TABLE VPAUTO.AQ$QT_REQS disable constraint SYS_C0019954; 

ALTER TABLE VPAUTO.QT_RESPS disable constraint SYS_C0019903; 

ALTER TABLE VPAUTO.QT_REQS disable constraint SYS_C0019902; 
```

错误：

> 从命令中的第 6 行开始出错：ALTER TABLE VPAUTO.QT_REQS 禁用约束 SYS_C0019902

错误报告：

> SQL 错误：ORA-24005：不适当的实用程序用于在 AQ 表 VPAUTO.QT_REQS 24005 上执行 DDL。00000 -“必须使用 DBMS_AQADM.DROP_QUEUE_TABLE 删除队列表”
> 
> *原因：尝试对队列表使用 SQL 命令 DROP TABLE，但队列表不支持 DROP TABLE。
> 
> *行动：使用 DBMS_AQADM.DROP_QUEUE_TABLE 过程而不是 DROP TABLE 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T15:13:20.613

Alter 语句不能用于 AQ 对象，只有 dbms_aqadm 包过程可用于 AQ 表上的任何 DDL 操作，如果错误重复，请使用 Force 选项强制删除

# html - 使用 javascript 将自动生成的 HTML 中的字体大小从 px 更改为 em

> ID：14597255
> 
> 赞同：6
> 
> 时间：2013-01-30T05:23:21.503
> 
> 标签：html, css, font-size, em

我有一个`HTML`从我无法控制的 Web 服务生成的。的`HTML`字体大小为`px`和`pt`。我的要求是将所有字体大小更改为`em`.

这是我尝试过的：

我尝试`<font>`使用以下方式访问所有标签：

```
document.getElementByTagName('font').style.fontSize; 
```

但是，`null`即使我在`HTML`.

我阅读的所有相关资料都假设我们可以控制`CSS`或`HTML`因此不适用于我的问题。

简而言之，我想解析`HTML`并找到所有内联样式（字体大小）并从任何其他类型更改为`em`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:50:46.830

尝试`document.getElementsByTagName`.......你忽略了 s :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:53:49.273

如果样式是 HTML，那么它就是内联样式。没有 CSS Wizardry 会覆盖它。您需要做的是直接修改内联样式。

这是您要查找的内容：

```
var elem = document.getElementById("elementID");
elem.setAttribute("style", "font-size: 2em"); 
```

你会在 IE 中遇到问题，`setAttribute`所以如果这是一个问题......你需要编写一个后备来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:17:47.510

您的方法的问题是您试图更改整个节点列表的样式。

当您调用 getElementsByTagName 时，您不会返回单个元素。您需要遍历节点中的元素，然后`elememt.style.fontSize = size;`在每个元素上使用。

这是一个实现[http://jsfiddle.net/Kfd2R/的小提琴](http://jsfiddle.net/Kfd2R/)

# jquery - JQuery UI 选项卡自动关闭

> ID：14597256
> 
> 赞同：2
> 
> 时间：2013-01-30T05:23:23.270
> 
> 标签：jquery, html, jquery-ui, tabs, jquery-ui-tabs

我正在研究 JQuery UI 选项卡。我想在提交表单后关闭动态生成的选项卡。

这是我的代码：

```
function submit_form(){
    alert(JSON.stringify($('form').serializeObject()));
    $('#result').text(JSON.stringify($('form').serializeObject()));
    var tabs = $("#container-1").tabs();
    tabs.tabs('remove', 1);
}

$(document).ready(function(){

    var tabs = $("#container-1").tabs();

    $('#add_tab').click( function(){

            var ul = tabs.find( "ul" );
            $( "<li><a href='#newtab'>New Tab</a></li>" ).appendTo( ul );
            $( "<div id='newtab'><form action='' method='post'>Name :<input type='text' name='name'></input></br>Email :<input type='text' name='email'></input></br>Phone Number :<input type='text' name='phone'></input></br><input type='button' value='Submit' id='form_button' onclick='submit_form()'></input></form></div>" ).appendTo( tabs );
            tabs.tabs( "refresh" );
            tabs.tabs( "option", "active", -1 );
    });
}); 
```

我的 HTML 页面：

```
<body>

<div id="container-1">
    <ul>
        <li><a href="#fragment-1">List</a></li>
    </ul>   
    <div id="fragment-1">
        <table id="contact">
        <tr>
        <th> Name </th>
        <th>E-mail </th>
        <th> Phone </th>
        </tr>
        </table>
    </div>
</div> 
```

添加标签

我要关闭的选项卡是由函数动态创建的`on-click of add_tab`。我想在函数结束时关闭它`submit_form()`。

它应该已与代码一起删除

```
tabs.tabs('remove', 1); 
```

但我收到一个错误

```
Error: no such method 'remove' for tabs widget instance
http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
Line 2 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:45:54.500

The problem is that in the new jquery Ui the remove function has been deprecated use refresh method.

Old API:

```
$( "#tabs" ).tabs( "remove", 2 ); 
```

New API:

```
// Remove the tab
var tab = $( "#tabs" ).find( ".ui-tabs-nav li:eq(2)" ).remove();
// Refresh the tabs widget
$( "tabs" ).tabs( "refresh" ); 
```

Try fixing your issue with this in mind.

# ruby-on-rails - Rails 3 中的高级查询

> ID：14597258
> 
> 赞同：1
> 
> 时间：2013-01-30T05:23:50.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个具有`User`, `Role`,`Group`模型的 Rails 应用程序。

用户模型

```
has_and_belongs_to_many :roles
has_and_belongs_to_many :groups 
```

好榜样

```
has_and_belongs_to_many :users 
```

组模型

```
has_and_belongs_to_many :users 
```

我还创建了一个映射表，例如，

`roles_users`并`groups_users` 用于映射他们的 id

所以这里每个用户可以有多个组和角色，

在我的榜样中只有三个条目，

`admin`有 id`1`有 `trainer`id`2`有 `trainee`id`3`

我想找到角色 id = 3 的特定组下的所有用户，

我已经这样做了，

```
@group = Group.find(2)
@users = @group.users 
```

在这里，我将所有用户都归入组`id =2`，但我想用角色再次过滤它`id = 3`。如何解决这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:33:44.140

尝试：

```
@group = Group.find(2)
@users = @group.users.joins(:roles).where("roles.id = ? && users.age = ?",3,30) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:32:18.187

这应该工作`@group.users.joins(:roles).where(roles: { id: 3 })`

# css - 无法让父 div 与子 div 3 个子跨越

> ID：14597261
> 
> 赞同：0
> 
> 时间：2013-01-30T05:24:20.187
> 
> 标签：css, html

绿色盒子应该在蓝色盒子里。但事实并非如此。有人可以告诉我为什么以及如何解决它吗？” [http://jsfiddle.net/6MN8R](http://jsfiddle.net/6MN8R)

-------- 原始问题 ------------

这方面没有扩展到 .content 子 div ......我已经通过溢出，我正在清除最后一个孩子末尾的 div 有人可以帮助我吗？

Main 是父 div，子 div 是从该 div 生成的。

当我更改 main 中的高度时，它工作正常，但我需要动态工作

```
#main {
    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;
    width: 90%;
    position: relative;
    background-image: url('../images/top.jpg');
    background-repeat: repeat-x;
}

#main .leftside {
    float: left;
    width: 47px;
    height: 100%;
    background-image: url('../images/left.jpg');
    background-repeat: repeat-y;
}

#main .rightside {
    float: right;
    height: 100%;
    background-image: url('../images/right.jpg');
    background-repeat: repeat-y;
}

#main .content {
    margin-right: auto;
    margin-left: auto;
    float: left;
    top: 36px;
    width: 92%;
    position: relative;
    background-color: #FFFFFF;
}

.clear {
    clear: both;
 } 
```

这是HTML代码

```
<div id='main'>
    <div class='leftside'>
        <img src='images/tleft.jpg' alt='' />
    </div>
    <div class='rightside'>
        <img src='images/tright.jpg' alt='' />
    </div>
    <div class='content'>
<div>Test</div>
<div>Test</div>
<div>Test</div>
    </div>
    <div class='clear'></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:46:42.900

你有`position: relative`你的内容 div。只需删除它。我对你的 css 和 html 做了一些其他的小改动 - 替换一些图像并使内容适合左右 div，但我认为这是你的设计意图。

[http://jsfiddle.net/6MN8R/1/](http://jsfiddle.net/6MN8R/1/)

你可能会问自己为什么会这样。您将位置相对和顶部设置为 36px。忘掉所有的花车、侧面的 div 和所有其他的废话。当您将某些内容设置为相对并将其重新定位为顶部、左侧、右侧或底部时，它可以移出其父容器。它仍然会影响父容器的大小，但不会影响其位置。内容 div 导致父容器增长，但位置 top 导致它也向下移动并移出主 div。

# c# - 在弹出窗口中打印 pdf 并得到错误“未找到成员”

> ID：14597262
> 
> 赞同：0
> 
> 时间：2013-01-30T05:24:24.150
> 
> 标签：c#, javascript, asp.net, pdf

我用来在弹出窗口中打印 pdf 并收到错误“未找到成员”。

```
<script > 
var url;
url = 'test.aspx?SID=" + ID + "&Val=" + 2 + "&Loc=" + US + "';
var SaveCaseBrowser; 
SaveCaseBrowser=window.open(url ,'Rpt','width=800,height=600,toolbar=yes,status=yes,scrollbars=yes,resizable=yes,menubar=yes,location=no');
if((SaveCaseBrowser == null)||(typeof(SaveCaseBrowser)== 'undefined'))
{alert('An error occurred trying to launch a new window.');
}
else
{ 
try
{ 
setTimeout(function () { SaveCaseBrowser.focus(); }, 100); } catch(e) { SaveCaseBrowser.Close(); SaveCaseBrowser=window.open(url ,'Rpt','width=800,height=600,toolbar=yes,status=yes,scrollbars=yes,resizable=yes,menubar=yes,location=no'); }}</script>") 
```

c#代码是：

```
string saveCaseScript = string.Empty;
    saveCaseScript = (Above Script are here);
    ClientScript.RegisterStartupScript(this.GetType(), "rpt", saveCaseScript); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:30:57.877

在这里，我在打开新窗口之前关闭弹出窗口。我使用这种情况，直到找到下一个解决方案。希望你可能有同样的问题。

```
var CD; //Open Report. 
    function openNewWin(url) {
      try {
        CD = window.open(url, "Popup", 'width=800,height=600,toolbar=yes,status=yes,scrollbars=yes,resizable=yes,menubar=yes,location=no');
        CD.focus();
      }
      catch (e) {
        CD.close();
        CD = window.open(url, "Popup", 'width=800,height=600,toolbar=yes,status=yes,scrollbars=yes,resizable=yes,menubar=yes,location=no');
        CD.focus();
      }
    } 
```

# postgresql - Postgresql 全文 (pg_trgm) 可以更好地处理完全匹配？

> ID：14597265
> 
> 赞同：5
> 
> 时间：2013-01-30T05:24:42.503
> 
> 标签：postgresql, full-text-search

所以我有一个简单的场景。我有一张场地表（活动场地等）。我的查询看起来像：

```
SELECT * FROM venues WHERE venues.name % 'Philips Arena' ORDER BY similarity(venues.name, 'Philips Arena') DESC 
```

这在技术上是可行的，我得到飞利浦竞技场作为第一个结果，但我也得到了大量不应该建议的其他结果。比如“TGE Arena”和“LG Arena”。我宁愿他们被排除在外。另外，如果我只搜索“竞技场”，我仍然希望得到建议。但是，如果结果中有明显的异常值，例如上面示例中的 Philips Arena，我只想返回它。

任何想法我怎么能做到这一点？我希望 pg_trgm 有这样的设置。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:36:14.187

也许它会帮助你。带有“A”的单词会比其他单词更重要。

```
SELECT title, ts_rank_cd(fts,q)
FROM titles, to_tsquery('something:B|somebody:B|important:A') q
WHERE fts @@ q ORDER BY ts_rank_cd DESC, Length(title) LIMIT 10; 
```

# asp.net-mvc - asp.net mvc3中的图表？

> ID：14597269
> 
> 赞同：1
> 
> 时间：2013-01-30T05:24:58.910
> 
> 标签：asp.net-mvc, charts

我想要一个示例图表`mvc`。我在控制器中尝试了以下代码。它直接将图表返回为`filestreamresult`. 该图表未显示在我的视图中。我想`chart`在我的`view`. 如何在视图中显示它？

```
public ActionResult Chart1()
{
    Chart chart = new Chart();

    chart.ChartAreas.Add(new ChartArea());

    chart.Series.Add(new Series("Data"));

    chart.Legends.Add(new Legend("Stores"));
    chart.Series["Data"].ChartType = SeriesChartType.Pie;
    chart.Series["Data"].Points.AddXY(1.0, 5.0);
    chart.Series["Data"].Points.AddXY(2.0, 9.0);

    var returnStream = new MemoryStream();
    chart.ImageType = ChartImageType.Png;
    chart.SaveImage(returnStream);
    returnStream.Position = 0;
    return new FileStreamResult(returnStream, "image/png");
} 
```

我的观点

```
 @using (Html.BeginForm())
{

@Html.TextBoxFor(m => m.Name)
<img src='/MyChart/Chart1' /> 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:06:40.017

在您查看页面（cshtml 或 aspx）中，将图像 src 添加到您的操作中

```
<image src='controllername/chart1' /> 
```

# python - IOError: [Errno 22] 无效模式 ('r') 或文件名：''

> ID：14597278
> 
> 赞同：0
> 
> 时间：2013-01-30T05:25:14.203
> 
> 标签：python, file-io

谁能指出我的代码有什么问题？为什么我会收到无效模式（'r'）错误？我确保我传递的文件存在于该位置...

我只是在编写一个小程序来在python中构建和遍历树数据结构。感谢您的帮助！

```
 import re, os, sys
_inputFileApp = './sampleCatalog/Apps/Parent00.app'

class Node(object):
    def __init__(self, isRoot=False, isSubGroup=False, execOrder=0,\
                 groupName='', progName='', children=[]):
        self.isRoot = isRoot
        self.isSubGroup = isSubGroup
        self.execOrder = execOrder
        self.groupName = groupName
        self.progName = progName
        self.children = children

    def addChild(self, obj):
        self.children.append(obj)

def main():
    ro=Node()
    readAppFile(_inputFileApp,ro)

#reads and .app File and returns list of .app files to track next
def readAppFile(appFileName,ro):
    if(ro is None):
        ro.isRoot=True
        print ro.isRoot
        print ro.children

    # Define the input & output files
    _finput = open(appFileName, 'r')

    # Search criteria
    keywords =['#PROGRAM?']
    pattern = re.compile('|'.join(keywords),re.IGNORECASE)

    #read line-by-line
    line=_finput.readline()
    while line:
        if pattern.search(line):
            child = Node() # Create an empty node of type Nodes

            #Record line 1,2
            child.execOrder=_finput.readline().strip()
            child.isSubGroup=_finput.readline().strip()
            #Skip 2 lines
            for i in range(1,3):
                _finput.readline()
            #Record line 5,6
            child.groupName=_finput.readline().strip()
            child.programName=_finput.readline().strip()
            #r.addChild(child)
            if(child.isSubGroup):
                readAppFile(child.groupName,child)
        line=_finput.readline()
    _finput.close()
    return ro

if __name__ == "__main__":
    sys.exit(main()) 
```

# java - 玩！Java 2.0 + Spring + MyBatis 示例

> ID：14597283
> 
> 赞同：0
> 
> 时间：2013-01-30T05:25:30.533
> 
> 标签：java, spring, playframework, playframework-2.0, mybatis

我一直在尝试使用

玩！Java 中的 2.0 + Spring + MyBatis 但没有成功。（我已经知道 Scala 示例，但我没有太多经验）

我有使用 Spring + MyBatis 的经验，并希望充分利用我已经知道的知识，同时能够使用 Play!。

有谁知道我在哪里可以找到这样的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:33:53.593

有一个[howto 显示了 mybatis 与](http://inoio.de/blog/2013/02/07/integrating-mybatis-guice-play2/)使用[mybatis guice](http://www.mybatis.org/guice/)的 play 2.1 托管控制器的集成。将[mybatis-spring](http://www.mybatis.org/spring/)与 spring 管理的控制器一起使用应该是直接的替代品。

# wordpress - Sencha Touch 和 WordPress BuddyPress API 之间的 JSON 解析问题

> ID：14597295
> 
> 赞同：0
> 
> 时间：2013-01-30T05:26:14.483
> 
> 标签：wordpress, extjs, touch, jsonp, buddypress

我是 Sencha Touch 的新手，我正在尝试找出对 WordPress 的 JSON 调用。我在服务器端的 WordPress 上使用 JSON-API-for-BuddyPress 插件。

[http://www.erefer.me/api/buddypressread/groups_get_groups/?username=troy](http://www.erefer.me/api/buddypressread/groups_get_groups/?username=troy)

```
{"status":"ok","groups":{"149":{"name":"Barakah Biz Network Referrals","description":"This group is for B.B.N members to send and receive their referrals online.  This way all members have an online record of their referrals and no worries of losing pieces of paper.  You can easily view your referrals and contact them while they are hot.  You can also send referrals to other members that are tracked for prizes.  \r\n\r\nTracking how much business we do with each other is the only way to determine how effective we are at supporting each other in building our communities businesses together.  Members of this group but be member of BBN Network.","status":"public","creator":{"202":{"username":"bbnnetwork","mail":"victoria@bbnnetwork.org","display_name":"bbnnetwork"}},"slug":"barakah-biz-network-referrals","is_forum_enabled":false,"date_created":"2012-12-19 16:15:38","count_member":"4"},"57":{"name":"Troy\\'s Public List of Referral Partners","description":"List of referral partners that I share with the public.","status":"public","creator":{"1":{"username":"troy","mail":"troy@eRefer.Me","display_name":"troy"}},"slug":"troys-public-list-of-referral-partners","is_forum_enabled":false,"date_created":"2012-10-10 00:50:34","count_member":"2"},"40":{"name":"Austin RainMakers","description":"RainMakers of Austin Group ","status":"private"},"1":{"name":"Troy\\'s Private Network","description":"Troy\\'s Private Referral Network","status":"private"}},"count":4} 
```

该模型：

```
Ext.define('eReferMe.model.Group', {
extend: 'Ext.data.Model',
config: {
        grouper: function(record) {
            return record.get('name')[0];
        },
        fields: ['id',
                 'name', 
             'description', 
             'status',
             'creator',
             'slug',
             'is_forum_enabled',
             'date_created',
             'count_member'
            ],
            autoLoad: true,

        proxy: {
            type: 'jsonp',
        url: 'http://www.erefer.me/api/buddypressread/groups_get_groups/?username=troy',
        reader: {
                    type: 'json',
                    successProperty: 'status',
                    rootProperty: 'groups',
                    totalProperty: 'count'

                   }
         }
} 
```

});

商店：

```
Ext.define('eReferMe.store.Groups', {
extend: 'Ext.data.Store',
config: {
    group: true,
    model: 'eReferMe.model.Group',
    sorters: 'name',
grouper : function(record) {
       return record.get('name')[0];
    }        

} 
```

});

我认为这可能与 ID 没有像其他字段那样设置的方式有关，但我不确定。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:25:50.227

JSONP 需要一个围绕响应的“包装器”函数。在这种情况下，它将作为请求的一部分传递，例如`callback=Ext.data.JsonP.callback1`

请参阅：[带有 jsonp 内容类型的 jQuery.ajax 请求后的 parsererror](https://stackoverflow.com/questions/5359224/parsererror-after-jquery-ajax-request-with-jsonp-content-type/5359239#5359239)

# lotus-domino - 日志中的 SAML 错误

> ID：14597298
> 
> 赞同：0
> 
> 时间：2013-01-30T05:26:44.650
> 
> 标签：lotus-domino, lotus

我尝试在我的测试服务器中启用 saml，根据以下链接[http://www-10.lotus.com/ldd/ndsebetaforum.nsf/topicThread.xsp?action=openDocument&documentId=C6F8337CA6DCC1FB85257AD300574EF3](http://www-10.lotus.com/ldd/ndsebetaforum.nsf/topicThread.xsp?action=openDocument&documentId=C6F8337CA6DCC1FB85257AD300574EF3)

完成所有设置后，我没有按照指示重定向到 IDP。

我的日志说

“2013 年 1 月 30 日上午 10:21:24 HTTP 服务器：读取服务器的 IdP 配置时出错：参数无效 2013 年 1 月 30 日上午 10:21:24 HTTP 服务器：SAML 配置错误。为服务器启用了 SAML [] ，但无法加载活动的 IdP 配置。”

所以我尝试重新创建 IDP 配置错误仍然相同，请帮助我可能是什么原因，我应该怎么做才能重新创建 IDP

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T19:07:24.010

该消息是由 509 证书字符串中的换行符引起的。我必须在证书字符串的开头、中间和结尾删除所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:11:38.570

@Panu以前我在几个字段（IDP配置）中使用IP地址而不是使用多米诺服务器的全名现在我已经改变了，在确认多米诺和Windows服务器都能够使用该全名联系之后。

现在我的多米诺登录将我重定向到 IDP ，但尚未完成。

以下 PDF 包含有关 SAML 的完整详细信息

[http://www-10.lotus.com/ldd/ndsebetaforum.nsf/topicThread.xsp?action=openDocument&documentId=2121CA50A3EDE66485257AD30049EAE1](http://www-10.lotus.com/ldd/ndsebetaforum.nsf/topicThread.xsp?action=openDocument&documentId=2121CA50A3EDE66485257AD30049EAE1)

# objective-c - ParseKit - SQLite 解析器进入无限递归

> ID：14597299
> 
> 赞同：2
> 
> 时间：2013-01-30T05:26:45.693
> 
> 标签：objective-c, sql, sqlite, parsekit

对于我的应用程序，我正在尝试构建一个[SQLite](https://sqlite.org/)解析器。由于我的应用程序使用的是 Objective-C，[ParseKit](http://parsekit.com/)似乎是一个不错的选择。我阅读了 SQLite 的[语法图](https://www.sqlite.org/syntaxdiagrams.html)并基于它们构建了一个语法。但是，当我尝试使用此语法解析某些内容时，解析器会进入无限递归。

我需要的唯一语句是 SELECT、INSERT、UPDATE 和 DELETE（我需要 SELECT 主要是因为其他人引用它）。我的@start 旨在处理由分号分隔的多个语句：

```
@start = statement (';' statement)*;

statement = select_stmt | insert_stmt | update_stmt | delete_stmt ; 
```

声明如下：

```
select_stmt = select_core ( compound_operator select_core )* order_expr? limit_expr? ;
select_core = 'select' ( 'distinct' | 'all' )? result_column ( ',' result_column )* from_expr where_expr group_expr ;
result_column = '*' | table_name '.' '*' | expr ( 'as'? column_alias )? ;

insert_stmt = 'insert' or_on_failure? 'into' table_name insert_expr ;
insert_expr = insert_expr_cols? (insert_expr_values | select_stmt) ;
insert_expr_cols = '(' column_name ( ',' column_name )* ')' ;
insert_expr_values = 'values' '(' expr ( ',' expr )* ')' ;
insert_expr_defaults = 'default' 'values' ;

update_stmt = 'update' or_on_failure? qualified_table_name update_expr where_expr? limited_expr? ;
update_expr = 'set' update_expr_col ( ',' update_expr_col )* ;
update_expr_col = column_name '=' expr ;

delete_stmt = 'delete' 'from' qualified_table_name where_expr? limited_expr? ; 
```

以及他们的支持表达：

```
order_expr = 'order' 'by' ordering_term (',' ordering_term)* ;
limit_expr = 'limit' expr ( ( 'offset' | ',' ) expr )? ;
from_expr = 'from' join_source ;
where_expr = 'where' expr ;
group_expr = 'group' 'by' expr ( ',' expr )? ( 'having' expr )? ;

join_source = single_source ( join_operator single_source join_constraint? )* ;
single_source = table_name 'as' table_alias indexed_by? | '(' select_stmt ')' ( 'as'? table_alias )? | '(' join_source ')' ;

or_on_failure = 'or' on_failure ;
on_failure = 'rollback' | 'abort' | 'replace' | 'fail' | 'ignore' ;
limited_expr = order_expr limit_expr ; 
```

名称、别名：

```
database_name = name ;
table_name = (database_name '.')? name ;
column_name = (table_name '.')? name ;

table_alias = name ;
column_alias = name ;

index_name = name ;

type_name = name+ ( '(' number (',' number)? ')' )? ;
function_name = name ;
collation_name = name ;

qualified_table_name = table_name indexed_by? ; 
```

杂项运算符等：

```
indexed_by = 'indexed' 'by' index_name | 'not' 'indexed' ;

unary_operator = symbol ;
binary_operator = symbol ;
compound_operator = 'union' 'all'? | 'intersect' | 'except' ;
join_operator = ',' | 'natural'? ( 'left' 'outer'? | 'inner' | 'cross' ) 'join' ;

join_constraint = 'on' expr | 'using' '(' column_name ( ',' column_name )* ')' ; 
```

基本类型：

```
literal = number
    | string
    | 'null'
    | 'current_time'
    | 'current_data'
    | 'current_timestamp' ;
number = Number ;
string = Word
    | QuotedString ;
name = Word
    | QuotedString ;
symbol = Symbol; 
```

和 EXPR：

```
expr = literal
    | column_name
    | unary_operator expr
    | expr binary_operator expr
    | function_name '(' ( '*' | 'distinct'? expr ( ',' expr )* )? ')'
    | '(' expr ')'
    | 'cast' '(' expr 'as' type_name ')'
    | expr 'collate' collation_name
    | expr 'not'? ( 'like' | 'glob' | 'regexp' | 'match' ) expr ( 'escape' expr )?
    | expr ( 'isnull' | 'notnull' | 'not' 'null' )
    | expr 'is' 'not'? expr
    | expr 'not'? 'between' expr 'and' expr
    | expr 'not'? 'in' ( table_name | '(' ( select_stmt | expr ( ',' expr )* )? ')' )
    | ( 'not'? 'exists' )? '(' select_stmt ')'
    | 'case' expr? ( 'when' expr 'then' expr )+ ( 'else' expr )? 'end' ; 
```

当我单步执行代码时，基本路径是@start -> statement -> select_stmt -> select_core -> result_column -> expr -> expr -> expr...

在 PKParser 的 matchAndAssemble: 和 PKParser/Subclass 的 allMatchesFor: 之间进行了大约 8-9k 次调用后，某些东西会死掉，通常是由于 EXC_BAD_ACCESS 错误（然后 LLDB 也无法执行任何操作）。

PS：如果你要发布一个答案说，'哦，你真的应该这样做/使用*这个*，'A）我喜欢Objective-C。不要告诉我不要使用它。这是我的选择。我的回应很可能是咆哮。B）我尝试挖掘 SQLite 的源代码以使用他们的解析器。我从来没有到过任何地方。如果您认为我应该使用它，请将其解析器的源代码发布为没有其他依赖项的单个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:16:55.020

[ParseKit](http://parsekit.com)的开发者在这里。

首先，请参阅我之前关于[调试 ParseKit 语法](https://stackoverflow.com/questions/13637577/how-to-debug-an-invalid-parsekit-grammar)和[与 ParseKit 语法中的无限递归作斗争的](https://stackoverflow.com/questions/13866165/when-parsekit-tries-to-recognize-my-grammar-it-enters-an-infinite-loop-whats)答案。

* * *

我认为第一行可能存在问题（但我不是 SQL 专家，所以我不确定）。那不应该是：

```
@start = (statement ';')+; 
```

* * *

我强烈建议使用驼峰式大小写而不是下划线，因为下划线会使您的 Objective-C 回调非常尴尬和难看。这就是为什么驼峰大小写是 ParseKit 语法中的约定。

* * *

但是，我看到了主要问题。您的语法包括ParseKit 语法中不允许的**左递归。**特别是在您的`expr`生产中（我还没有仔细查看它是否也在其他地方）。

ParseKit 可以使用 recursion ，但**不能使用 recusion**。对此最好的解释是 [Steven Metsker 的“Building Parsers with Java”](https://rads.stackoverflow.com/amzn/click/com/0201719622 "Amazon.com：使用 Java(TM) 构建解析器：Steven John Metsker：书籍")。或[搜索网络](http://web.cs.wpi.edu/~kal/PLT/PLT4.1.2.html "4.1.2 消除左递归")。

但基本上左递归是当产生式立即引用自身时（在表达式的左侧）：

```
e = e '-' Number; 
```

或者

```
e = Number | e '-' Number; 
```

相反，您必须设计语法以删除左递归，例如：

```
e = Number ('-' Number)*; 
```

# wpf - ApiController 作为 WPF ViewModelBase

> ID：14597300
> 
> 赞同：0
> 
> 时间：2013-01-30T05:26:59.493
> 
> 标签：wpf, asp.net-web-api

我可以`ApiController`在`ViewModelBase`应用`WPF`程序中使用吗？

如果是，我该如何处理绑定验证等...？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:00:20.103

你可以，但这没有任何意义。ApiController 是 Web 技术，WPF 是桌面技术。

为什么不使用 ApiController：

*   它在 System.Web.Http 中 - 为什么桌面应用程序需要此依赖项
*   它继承了 IHttpController——这不是桌面技术——你拖入了许多与桌面应用程序如何处理信息无关的概念
*   对 IPropertyNotifyChange 没有任何想法，MVVM Light 工具包中的 ViewModelBase 必须启用属性通知更改

# jasper-reports - Jasper 报告参数

> ID：14597301
> 
> 赞同：0
> 
> 时间：2013-01-30T05:27:07.453
> 
> 标签：jasper-reports

我是*JasperReports Server*的新手，我正在使用*iReport* 4.0.1 进行 jrxml 设计。只是想问一下我在调用 JasperFillManager.fillReport 时是否在参数映射中添加了一些新值，我是否必须在 ireport 中创建一些关于我在调用 JasperFillManager.fillReport 时在参数映射中设置的键的新参数，或者所有新参数将在“REPORT_PARAMETER_MAP”内？

例如：

```
Map parameters = new HashMap();

parameters.put("value1", value1);

parameters.put("value2",value2);

JasperPrint jasperPrint = JasperFillManager.fillReport(myProgramStream, parameters,  jasperReportDS); 
```

所以在 ireport 中，value1 和 value2 已经在 REPORT_PARAMETER_MAP 中，还是我必须在相关的 jrxml 中创建两个名为“value1”和“value2”的新参数？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:02:45.493

> 所以在 ireport 中，value1 和 value2 已经在 REPORT_PARAMETER_MAP 中，还是我必须在相关的 jrxml 中创建两个名为“value1”和“value2”的新参数？

- 您必须在 jrxml 中创建两个名为 value1 和 value2 的新参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T13:09:36.233

需要在相关的jrxml中新建创建两个名为“value1”和“value2”的参数。否则不起作用。

# c# - Paypal 标准账户和开发者 API

> ID：14597305
> 
> 赞同：1
> 
> 时间：2013-01-30T05:27:37.630
> 
> 标签：c#, asp.net, api, paypal

对于这个网站来说，这可能不是最好的问题，但有人知道您是否可以通过免费的标准帐户使用开发人员 API。我只是不想编写一堆东西而不能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:33:44.407

绝大多数**PayPal 的**API 都可以与免费账户一起使用：

*   **PayPal**支付标准（从技术上讲，有一个 API 可用于生成按钮）
*   快速结账
*   自适应支付、自适应账户、权限服务
*   后台功能（退款、延迟捕获等）
*   发票
*   可能还有更多我没有想到的

由于没有付费帐户，您将错过的主要 API 是***PayPal Payments Pro***（允许您直接在您的网站上处理信用卡）和***PayPal Payments Advanced***（允许您将托管支付页面放在 iframe 中您的网站）。免费帐户应该可以使用几乎所有其他内容。

# java - 通过 maven 将 maven 项目打包成 zip 文件

> ID：14597307
> 
> 赞同：0
> 
> 时间：2013-01-30T05:27:47.397
> 
> 标签：java, maven, packaging

使用 maven，是否可以创建我的 maven 项目的 zip 文件？zip 文件还应包含 pom.xml 文件和所有其他文件。zip 文件是 maven 项目的存档。基本上，我只是希望我的用户在解压缩 zip 文件后轻松将项目导入 Eclipse。

如何使用 Maven 实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:51:45.547

您可以使用 Pradeep 建议的 maven-assembly-plugin 来完成此操作。

并且还使用 maven-antrun-plugin。查看[pom](http://buildbox.svn.sourceforge.net/viewvc/buildbox/trunk/testdata/svn-mvn-testdata/pom.xml?revision=2549&view=markup&pathrev=4000)和 zip 任务。在文件集中包含您想要的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:18:22.907

你可以使用antrun插件

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <configuration>
                <target>
                    <zip destfile="d:/projectname.zip" basedir="${project.basedir}" excludes="target/**" />
                </target>
            </configuration>
        </plugin> 
```

从 Eclipse 运行它`Run As -> Maven build... -> Goals: antrun:run`

# php - 如何为动态加载的页面制作永久链接

> ID：14597309
> 
> 赞同：-4
> 
> 时间：2013-01-30T05:27:52.420
> 
> 标签：php, facebook, lightbox, permalinks, dynamically-generated

*我对 facebook 如何为所有评论、页面、灯箱图像和all.for*分配永久链接有点困惑。例如：您的时间线链接将类似于：www.facebook.com/yourusername ..这表明 facebook 有一个页面只为您保留，为其百万用户保留..但我猜该页面是从数据库动态加载的。即使评论也有一个非常有意义的链接... *facebook.com/yourusername*/commentid/otherparameters/ .当我使用灯箱时...我在图像上放置一个锚标记，例如 lightbox.php?photoid=xxx 以便当我单击它时..它将参数传递到页面 lightbox.php 我在哪里通过 GET 检索它并从数据库中加载它..但在这个过程中，url 保持不变......但是当在 facebook 中打开灯箱时......地址栏中的 url 也会改变......

这是一种非常普遍的做法...我可能在这里遗漏一两件事或愚蠢...请告诉我这里发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:35:42.290

当您访问像 facebook.com/goodfriend 这样的页面时，好朋友不是 facebook 上的目录 facebook 只是从 url 获取好朋友，然后它检查数据库是否有好朋友的信息 facebook 显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:35:07.370

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

以上`.htaccess`内容会将每个请求重定向到您的站点，但这些请求没有到达有效的文件或文件夹名称，以`index.php`

所以现在你可以打电话：`http://yoursite.com/some-non-existent-file-or-folders`

在你的`index.php`

```
<?php

$token = explode( '/', $_SERVER['REQUEST_URI'] );

if ( $token[1] == 'some-non-existent-file-or-folders )
{
    // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:37:51.267

> 但在这个过程中，网址保持不变......但是当一个灯箱在facebook*中打开时......地址栏中的网址也会改变......*

如果这就是您真正要问的 - 您的关键字是**HTML5 History API**。

# mysql - 按序列号分组并选择该记录的最新（最后）创建日期

> ID：14597312
> 
> 赞同：3
> 
> 时间：2013-01-30T05:28:03.127
> 
> 标签：mysql, sql, cakephp-1.3, greatest-n-per-group

我有 1 个表列 id,serail_no,created。

我的显示是这样的

```
id  serail_no    created

1   1142B00072   2012-11-05 11:36:00
2   1142B00072   2012-12-20 14:57:54 
3   1142B00072   2012-12-28 13:20:54

4   1142B11134   2012-11-25 14:57:54  
5   1142B11134   2013-01-16 16:42:34 
```

所以现在我想要这样的输出。

```
3   1142B00072   2012-12-28 13:20:54
5   1142B11134   2013-01-16 16:42:34 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:29:19.163

您可以使用子查询来获取每个`serial_no`. 然后，子查询的结果将重新加入原始表，以便您可以获取其他列。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT serial_no, MAX(created) max_date
            FROM    tableName
            GROUP BY serial_no
        ) b ON a.serial_no = b.serial_no AND
                a.created = b.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b295c/1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T05:44:13.077

另一种解决方案：使用排名函数

```
select * from (with t as 
(select 1 id , '1142B00072'  as serail_no ,to_date('2012-11-05 11:36:00','yyyy-mm-dd hh24:mi:ss') created from dual
union all 
select 2  id , '1142B00072'   as serail_no ,to_date('2012-12-20 14:57:54' ,'yyyy-mm-dd hh24:mi:ss') created from dual
union all
select 3  id , '1142B00072'   as serail_no ,to_date('2012-12-28 13:20:54','yyyy-mm-dd hh24:mi:ss') created from dual
union all
select 4  id , '1142B11134'   as serail_no ,to_date('2012-11-25 14:57:54'  ,'yyyy-mm-dd hh24:mi:ss') created from dual
union all
select 5  id , '1142B11134'  as serail_no ,to_date('2013-01-16 16:42:34','yyyy-mm-dd hh24:mi:ss') created from dual)
select id,serail_no,created,rank() over ( partition by SERAIL_NO order by created desc ) rn from t)
where rn=1` 
```

# razor - 在控制器内调用 View() 不会立即执行 ActionResult 代码

> ID：14597316
> 
> 赞同：1
> 
> 时间：2013-01-30T05:28:20.157
> 
> 标签：razor, asp.net-mvc-4

我有以下控制器操作：

```
public ActionResult MyAction(...)
{
    ActionResult result = View("MyView", new MyModel());

    var fruit = TempData["Fruit"];
    // Do something with the fruit

    return result;
} 
```

而这个 MyView.cshtml

```
@model MyModel
@{ 
    TempData["Fruit"] = "Mango";
} 
```

当我在视图中`TempData["Fruit"]`设置断点时，它不会在`return result`操作中的“”之前调用。`Razor`渲染似乎延迟了。

如何强制在`result = View(..)`调用返回时呈现视图？

注意：不要担心这个简单的例子。我们有一个真实的用例，确实需要解决这个问题，但我不想进一步增加这个问题的负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:59:13.633

直到操作完成后才会呈现视图。您可以调用 result.ExecuteResult(ControllerContext) 来强制 ActionResult 在操作中提前执行，如下所示：

```
 ActionResult result = View("Details", new PageModel(page));
    result.ExecuteResult(ControllerContext); 
```

但是你会遇到一个问题，因为 ActionResult 将在操作返回结果时*再次*执行，所以你将不得不取消第二次执行。

你可以这样做：

```
 protected override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        if (cancelTheResult)
        {
            filterContext.Cancel = true;
        }
        base.OnResultExecuting(filterContext);
    } 
```

这一切看起来确实有点像黑客，但在某些情况下似乎是必要的。例如，如果一个子动作需要告诉顶级动作执行重定向，那么在子动作完成之前我们不会知道重定向是必需的，但子动作直到为时已晚才会完成。这是我能找到的唯一解决方法。

# php - 简单的 Acl 控制的应用程序错误...在 cakephp 中

> ID：14597317
> 
> 赞同：0
> 
> 时间：2013-01-30T05:28:24.673
> 
> 标签：php, cakephp

我已经按照 cakephp 食谱中的 Acl 控制应用程序的步骤进行操作。在按照步骤创建 Acldb 时，我收到了这个错误。每当我尝试从用户登录名登录时都会发生此错误......

错误是

```
AclNode::node() - Couldn&#039;t find Aro node identified by &quot;Array ( [Aro0.model] =&gt; Group [Aro0.foreign_key] =&gt; 2 ) &quot; 
```

我已经搜索了很多，但无法解决这个错误，任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:50:09.290

您的 aros 表中不存在 id=2 的 Aro（组）。

查看[文档](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html#creating-access-request-objects-aros-and-access-control-objects-acos)以了解如何添加 ARO。

# php - PHP/MySQL - 组合选择查询

> ID：14597319
> 
> 赞同：0
> 
> 时间：2013-01-30T05:28:27.293
> 
> 标签：php, mysql

我有 3 个 MySQL 查询，就像这样；

```
$q1 = "SELECT id,date,quantity1,quantity2,total FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' ORDER BY id";
$r1 = mysql_query($q1);

$q2 = "SELECT SUM(total) AS stotal FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' GROUP BY id ORDER BY id";
$r2 = mysql_query($q2);

$q2 = "SELECT AVG(ROUND(total)) AS atotal FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' GROUP BY id ORDER BY id";
$r2 = mysql_query($q2); 
```

我如何结合这 3 个查询？所以我可以在一个while循环中使用它。我已经在while循环中尝试了multiple语句，就像这样；

```
$lastr = '';
while ((list($id, $date, $q1, $q2, $total) = mysql_fetch_row($r1)) && ($row =  mysql_fetch_array($r2)) && ($row =  mysql_fetch_array($r3)))  {
if ($lastr != $id ) {
    if ($lastr != '') {
        // output row
    echo "<tr><th>$lastr</th><th>$stotal</th><th>$atotal</th><td>";
        echo join('</td><td>', $rowdata) . "</td></tr>\n";
    }
    $rowdata = $empty;
    $lastr = $id;
}
$rowdata[$rdate]  = $q1 .= '</td><td>' . $q2 .= '</td><td>' . $total;
} 
```

当我只使用第一个查询时，所有内容都打印在我的表上，但是当我添加 2 个额外的“和”语句时，输出受到限制。顺便说一句，我试图生成一个动态列和行，只有当我在 while 循环中使用第一个查询时才有效。谢谢

* * *

非常感谢：raheel shan

我的问题的答案是：

```
SELECT
  t.id,
  t.date,
  t.quantity1,
  t.quantity2,
  t.total,
  lt.stotal,
  lt.atotal
FROM test as t
  left join (select
           id,
           SUM(total)   AS stotal,
           AVG(ROUND(total)) AS atotal
         from test
         WHERE type = 'pencil'
         AND MONTH(date) = '$month'
         AND YEAR(date) = '$year'
         GROUP BY id) as lt
    on lt.id = t.id
WHERE type = 'pencil'
    AND MONTH(date) = '$month'
    AND YEAR(date) = '$year'
ORDER BY id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:33:05.273

你可以这样组合…………

```
SELECT id,date,quantity1,quantity2,total,(SELECT SUM(total)  FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' GROUP BY id ORDER BY id) as sum_total,(SELECT AVG(ROUND(total))  FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' GROUP BY id ORDER BY id") as avg_total FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' ORDER BY id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:35:42.950

您可以像这样将查询添加在一起

```
$q1 = "SELECT id,date,quantity1,quantity2,total,AVG(ROUND(total)) AS stotal, AVG(ROUND(total)) AS atotal FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' GROUP BY  id,date,quantity1,quantity2,total,stotal,atotal ORDER BY id";
$r1 = mysql_query($q1); 
```

您需要 group by 子句的原因是因为您不能在 group by 语句之外进行非聚合选择，因为选择中存在聚合函数。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:38:40.850

```
$q1 = "SELECT id,date,quantity1,quantity2,total,SUM(total) AS stotal,AVG(ROUND(total)) AS atotal FROM test WHERE type='pencil' AND MONTH(date)='$month' AND YEAR(date)='$year' ORDER BY id";
$r1 = mysql_query($q1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:20:45.113

您可以使用这个单一的派生查询

```
SELECT
  t.id,
  t.date,
  t.quantity1,
  t.quantity2,
  t.total,
  lt.stotal,
  lt.atotal
FROM test as t
  left join (select
           id,
           SUM(total)   AS stotal,
           AVG(ROUND(total)) AS atotal
         from test
         WHERE type = 'pencil'
         AND MONTH(date) = '$month'
         AND YEAR(date) = '$year'
         GROUP BY id) as lt
    on lt.id = t.id
WHERE type = 'pencil'
    AND MONTH(date) = '$month'
    AND YEAR(date) = '$year'
ORDER BY id 
```

或者这更简单

```
SELECT
  t.id,
  t.date,
  t.quantity1,
  t.quantity2,
  t.total,
  SUM(lt.stotal) AS stotal,
  AVG(ROUND(lt.atotal)) AS atotal
FROM test as t
  left join test as lt
    on lt.id = t.id
WHERE type = 'pencil'
    AND MONTH(date) = '$month'
    AND YEAR(date) = '$year'
ORDER BY id 
```

# vb.net - 在另一台机器上运行我的程序时出现异常

> ID：14597321
> 
> 赞同：0
> 
> 时间：2013-01-30T05:28:39.693
> 
> 标签：vb.net

对此错误消息有任何想法吗？当我在另一台机器上运行我的程序时，我遇到了这个错误！

![在此处输入图像描述](../Images/cddc1bdb53b78ce3d68963c616c6b0d5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:31:07.527

您正在使用一些不属于现有 .Net 运行时的组件（即[Visual Basic Power Pack](http://msdn.microsoft.com/en-us/vstudio/bb735936.aspx)），因此需要将这些组件与您的应用程序一起分发。

# c - 使用 make 将多个 .c 文件链接到一个程序中？

> ID：14597322
> 
> 赞同：0
> 
> 时间：2013-01-30T05:28:39.907
> 
> 标签：c, linker, makefile

我有几个 .c 和自定义 .h 文件，我想使用 Makefile 将它们链接在一起，但是我尝试过的所有内容都得到了与我想要的不同的结果。

基本上，我有以下文件：rA.c、rA.h、rB.c、rB.h、rC.c、rC.h、rP.c

我想要使​​用生成文件来结束与以下命令的等效项： gcc -o rv rA.c rB.c rC.c rP.c

并产生一个可执行的“rv”文件。到目前为止，我所做的所有方法（诚然，已经被击中了）已经为每个 .c 文件产生了中间 .o 文件，但没有最终的 rv 可执行文件。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:32:17.717

```
FILES.o = rA.o rB.o rC.o rP.o
PROGRAM = rv

all: ${PROGRAM}

${PROGRAM}: ${FILES.o}
    ${CC} -o $@ ${CFLAGS} ${FILES.o} ${LDFLAGS} ${LDLIBS} 
```

您可以根据需要添加依赖项和其他花里胡哨，但这是最小 makefile 的基本轮廓。

如果您确定使用[GNU`make`](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)，则可以使用简写符号来更多地缩写命令行：

```
${PROGRAM}: ${FILES.o}
    ${CC} -o $@ ${CFLAGS} $^ ${LDFLAGS} ${LDLIBS} 
```

显示的第一个符号适用于[`make`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/make.html)您可能使用的任何版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:31:42.800

你不想要那个结果命令。当您添加更多文件时，它不能很好地扩展。

你想要的是一个看起来像这样的makefile：

```
rv: rA.o rB.o rC.o rP.o
    $(CC) -o $@ $+ 
```

这会将`gcc`每个单独`.c`的文件构建成一个目标文件，然后将所有目标文件链接到您的可执行文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:35:33.087

您可以使用 Makefile 来摆脱困境，如下所示：

```
rv: rA.o rB.o rC.o rP.o
    $(CC) -o $@ $^ $(CFLAGS) 
```

# python - Python - 字典中用户选择列表中的 5 个随机项目

> ID：14597325
> 
> 赞同：0
> 
> 时间：2013-01-30T05:29:00.303
> 
> 标签：python, list, printing, dictionary, user-input

我正在尝试从 5 个不同的用户选择列表中打印一个数字。
这是代码

```
import random

d = {'january':['1', '2', '3', '4', '5', '6', '7']
,'febuary':['1', '2', '3', '4', '5', '6', '7']
,'march':['1', '2', '3', '4', '5', '6', '7']
,'april':['1', '2', '3', '4', '5', '6', '7']
,'may':['1', '2', '3', '4', '5', '6', '7']
,'june':['1', '2', '3', '4', '5', '6', '7']
,'july':['1', '2', '3', '4', '5', '6', '7']
,'august':['1', '2', '3', '4', '5', '6', '7']}

items = raw_input("Pick 5 and separate them by a comma:" + ','.join(d)
item1, item2, item3, item4, item5 = items.split(',')

print 'picked:', random.choice(d[item1])

print 'picked:', random.choice(d[item2])

print 'picked:', random.choice(d[item3])

print 'picked:', random.choice(d[item4])

print 'picked:', random.choice(d[item5])

raw_input () 
```

我不断得到一个

```
SyntaxError on line 13;
    item1, item2, item3, item4, item5 = items.split(',') 
```

我也试过

```
items = raw_input("Pick 5 separated by comma:" + ','.join(d)
splitItems = items.split(',')

#print roles

print 'picked:', random.choice(d[splitItems[0]])
print 'picked:', random.choice(d[splitItems[1]])
print 'picked:', random.choice(d[splitItems[2]])
print 'picked:', random.choice(d[splitItems[3]])
print 'picked:', random.choice(d[splitItems[4]]) 
```

这也有一个

```
SyntaxError on line 13;
    splitItems = items.split(',') 
```

编辑：修正错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:21:59.447

你在结束时缺少一个接近的括号

```
items = raw_input("Pick 5 and separate them by a comma:" + ','.join(d) 
```

# django - 美味派自定义字段

> ID：14597332
> 
> 赞同：1
> 
> 时间：2013-01-30T05:29:32.240
> 
> 标签：django, tastypie

User 和 UserProfile 与“OneToOneField”相关

我有 fields = [] 来抑制 dehydrate 方法中列出的所有其他字段，
但它不起作用。（显示 UserProfile 模型中的所有字段）

```
class UserProfileResource(ModelResource):

    user = fields.OneToOneField(UserResource, 'user')

    class Meta:
        queryset = UserProfile.objects.all()
        fields = [] ## here, this doesn't work as intended

    def dehydrate(self, bundle):
        bundle.data['username'] = bundle.obj.user.username
        bundle.data['id'] = bundle.obj.user.id
        bundle.data['url_profile_image'] = bundle.obj.url_profile_image # this is a property call
        bundle.data['url_profile_image_thumbnail'] = bundle.obj.url_profile_image_thumbnail
        return bundle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:13:33.657

是的，这是 Tastypie 的一种奇怪行为。但`fields = ['']`也可以。

# c - 无法使用 NEON Intrinsics 加载浮点值

> ID：14597334
> 
> 赞同：2
> 
> 时间：2013-01-30T05:29:55.230
> 
> 标签：c, floating-point, arm, neon, intrinsics

无论如何，我都无法将浮点值加载到 NEON 128 位寄存器中！我尝试了所有可能的方法来加载浮点数，但寄存器仍然为零（通过调试找到）。

```
/* neon_example.c - Neon intrinsics example program */
    #include <stdint.h>
    #include <stdio.h>
    #include <arm_neon.h>

    /* fill array with increasing integers beginning with 0 */
    void fill_array(float32_t *array, int size)
    {    int i;
        for (i = 0; i < size; i++)
        {
             array[i] = 2.0f;
             printf("%f",array[i]);
        }
    }

    /* return the sum of all elements in an array. This works by calculating 4 totals (one for each lane) and adding those at the end to get the final total */
    float sum_array(float32_t *array, int size)
    {    
         float32_t a,b,c,d,add;
         float32x4_t acc= vdupq_n_f32(0.0);
         for (; size != 0; size -= 4)
         {
           float32x4_t vec =vdupq_n_f32(0.0f);;
           vec=vld1q_f32(array);
    //The above operation does not load values??????????????????????
           array += 4;
           acc = vaddq_f32(acc,vec);
          }

         vst1q_lane_f32(&a,acc,0);
         vst1q_lane_f32(&a,acc,1);
         vst1q_lane_f32(&a,acc,2);
         vst1q_lane_f32(&a,acc,3);
         add=a+b+c+d;

          //return (int)vget_lane_s64(acc2, 0);
         return add;

    }
    /* main function */
    int main()
    {
          float32_t my_array[100];
          fill_array(my_array, 100);
          printf("Sum was %f\n", sum_array(my_array, 100));
          return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:53:15.877

我刚刚运行了您的代码，它正确地加载到了寄存器中。我在 Xcode 4.6 中使用 LLVM 4.2 构建了代码。

实施 Guy Sirton 的更改修复了该错误并产生了更具可读性的函数：

```
float32_t sum_array(float32_t *array, int size)
{
    float32_t arr[4],add;
    float32x4_t acc= vdupq_n_f32(0.0);
    for (; size != 0; size -= 4)
    {
        float32x4_t vec=vld1q_f32(array);
        array += 4;
        acc = vaddq_f32(acc,vec);
    }

    vst1q_f32(arr, acc);

    add = arr[0] + arr[1] + arr[2] + arr[3];

    return add; 
} 
```

# android - 根据 URL 打开特定应用

> ID：14597335
> 
> 赞同：5
> 
> 时间：2013-01-30T05:29:58.500
> 
> 标签：android, android-intent, android-manifest

我想打开一个应用程序，如果 url

例如，如果该人打开：`http://www.example.com/id=100,`我想解析`example.com`并显示选项以使用我的应用程序打开它。

youtube 使用相同的功能，如果您单击 youtube 链接，它会询问您是否要使用 youtube 打开它或直接播放 youtube 视频

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T05:32:52.670

您可以[`data specification`](http://developer.android.com/guide/topics/manifest/data-element.html)使用 http 架构和要使用您的应用打开的域向您的意图过滤器添加一个。

```
<intent-filter ... >
    <data android:scheme="http" android:host="example.com" />
    ...
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:34:05.423

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

# wiki - KDE 网站使用什么样的 wiki 引擎？

> ID：14597339
> 
> 赞同：0
> 
> 时间：2013-01-30T05:30:28.700
> 
> 标签：wiki

例如，[http://userbase.kde.org](http://userbase.kde.org)或[http://techbase.kde.org](http://techbase.kde.org)，他们使用的 wiki 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:46:22.040

> KDE 使用[Mediawiki](http://www.mediawiki.org/wiki/MediaWiki)作为其在 userbase.kde.org、techbase.kde.org ... 的 wiki。

看看[这里](http://community.kde.org/KDE.org/mediawiki)

# sql - 由于性能不佳，LEFT OUTER JOIN 需要改进

> ID：14597340
> 
> 赞同：0
> 
> 时间：2013-01-30T05:30:46.933
> 
> 标签：sql, left-join, outer-join

我有一个表，它有一个 Name 列以及 3 个标识符，这些标识符引用同一个表中的其他条目。我的查询将这 3 个标识符解析为它们所引用的记录的实际名称。到目前为止，我只管理了以下...

```
SELECT mt.Name, mt2.Name, mt3.Name, mt4.Name 
FROM MyTable AS mt1
LEFT OUTER JOIN MyTable AS mt2 ON mt2.Id = mt1.RefId1
LEFT OUTER JOIN MyTable AS mt3 ON mt3.Id = mt1.RefId2
LEFT OUTER JOIN MyTable AS mt4 ON mt4.Id = mt1.RefId3 
```

...这有效并且确实返回了三个参考记录的名称。请注意，在某些情况下，RefId1/2/3 值可能为空，因此并非始终使用所有 RefId 字段。它可以工作，但不是很快，我相信真正了解 SQL 的人可以显着改善这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:44:54.883

为了改进您的查询，您可以使用 INNER JOIN 而不是 LEFT OUTER JOIN。如果我正确理解您的评论，mt2、mt3 或 mt4 都会返回一个值。

所以，一个有效的查询就可以这样写。这样可以确保一旦找到匹配项，它就会停止向前看。

```
SELECT mt.Name, mt2.Name
FROM MyTable mt, MyTable mt2
WHERE mt2.id = mt.RefId1
OR mt2.id = mt.RefId2
OR mt2.id = mt.RefId3 
```

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:22:38.503

你试过[索引](http://www.w3schools.com/sql/sql_create_index.asp)你的表吗？

# java - 使用带有spring 3的@ResponseBody返回对象不起作用

> ID：14597341
> 
> 赞同：0
> 
> 时间：2013-01-30T05:30:52.177
> 
> 标签：java, spring, spring-mvc

我正在尝试在控制器中使用@responseBody 来返回一个对象，我是否遇到异常。我在应用程序中有杰克逊罐子，它仍然说以下错误 ClassNotFoundException could not intiatiate

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0': Cannot create inner bean '(inner bean)' of type [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter] while setting bean property 'messageConverters' with key [6]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#8': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.codehaus.jackson.map.ObjectMapper 

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#8': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.codehaus.jackson.map.ObjectMapper 
```

这是我的代码---->

```
 import org.springframework.stereotype.Controller;
    import org.springframework.validation.BindingResult;
    import org.springframework.web.bind.annotation.ModelAttribute;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.bind.annotation.ResponseBody;
    import org.springframework.web.bind.annotation.SessionAttributes;
    import org.springframework.web.servlet.ModelAndView;

    import com.lol.laks.sample.beans.*;

    @Controller
    @SessionAttributes
    public class ContactsController {
      @RequestMapping(value = "/addContact", method = RequestMethod.POST,     produces="application/json")
        public @ResponseBody Contacts addContact(@ModelAttribute("contact") Contacts contact,BindingResult result) {

            System.out.println("First Name:" + contact.getFirstname() +
                        "Last Name:" + contact.getLastname());
            return contact;
        }

        @RequestMapping("/")
        public ModelAndView showContacts() {

            return new ModelAndView("contacts", "command", new Contacts());
        }
    } 
```

这是jsp-->

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> (http://www.w3.org/TR/html4/loose.dtd%27%3E)
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<body>
<form:form method="post" action="addContact">

<table>
<tr>
    <td><form:label path="firstname">First Name</form:label></td>
    <td><form:input path="firstname" /></td>
</tr>
<tr>
    <td><form:label path="lastname">Last Name</form:label></td>
    <td><form:input path="lastname" /></td>
</tr>
<tr>
    <td><form:label path="lastname">Email</form:label></td>
    <td><form:input path="email" /></td>
</tr>
<tr>
    <td><form:label path="telephone">Telephone</form:label></td>
    <td><form:input path="telephone" /></td>
</tr>
<tr>
    <td colspan="2">
        <input type="submit" value="Add Contact"/>
    </td>
</tr>
</table> 

</form:form>
</body>
</html> 
```

这是servlet.xml--->

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd"> (http://www.springframework.org/schema/context/spring-context-3.0.xsd%27%3E)

  <context:component-scan base-package="com.tcs.laks.sample" />

 <mvc:annotation-driven />
 <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
  <property name="mediaTypes">
    <map>
      <entry key="html" value="text/html"/>
      <entry key="json" value="application/json"/>
    </map>
  </property>
  <property name="viewResolvers">
    <list>
     <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"> 
     <!--  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
-->        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>
    </list>
  </property>
  <property name="defaultViews">
    <list>
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
        <property name="prefixJson" value="true"/>
      </bean>
    </list>
  </property>
</bean>   
</beans> 
```

这是豆子

```
import org.springframework.stereotype.Component;

@Component
public class Contacts {
        private String firstname;
        private String lastname;
        private String email;
        private String telephone;
        public String getFirstname() {
            return firstname;
        }
        public void setFirstname(String firstname) {
            this.firstname = firstname;
        }
        public String getLastname() {
            return lastname;
        }
        public void setLastname(String lastname) {
            this.lastname = lastname;
        }
        public String getEmail() {
            return email;
        }
        public void setEmail(String email) {
            this.email = email;
        }
        public String getTelephone() {
            return telephone;
        }
        public void setTelephone(String telephone) {
            this.telephone = telephone;
        }
} 
```

请告诉我为什么当 Spring 3 自动将对象转换为 json 时包含正确的 jar，但它无法实例化该类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:13:54.157

在您的 servlet.xml 中包含 mvc:annotation-driven 应该可以工作。

如果您使用@responsebody，您将绕过视图解析器。AnnotationMethodHandlerAdapter 将实例化 MappingJacksonHttpMessageConverter 如果它存在于写入响应体的类路径中。

希望这也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:19:04.893

我自己找到了答案，主要问题是添加了 servlet.xml 文件

```
<bean id="jacksonMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/> 
```

做了这项工作。

# cordova - 黑莓10 PhoneGap 2.3.0 java插件

> ID：14597345
> 
> 赞同：0
> 
> 时间：2013-01-30T05:31:10.803
> 
> 标签：cordova, phonegap-plugins, blackberry-10

**我只想为 mac os x 上的 BlackBerry 10 PhoneGap 2.3.0 应用程序创建一个 Java 插件**

我曾尝试在 mac os x 上为 BlackBerry 10 应用程序创建 PhoneGap 2.3.0 插件（以 Java/jar 方法），但[Phonegap 网站上提到的过程](http://goo.gl/1MfQl)太旧且无法在 Mac 上运行，他们说 SDK 中有一个文件夹路径即；“framework/ext/src/org/apache/cordova/”但“src/org/apache/cordova”不存在。

如果我创建“src/org/apache/cordova”并尝试使用“ant update -D”创建构建，它会失败并出现错误，即；“构建文件：build.xml 不存在！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:38:59.470

There is a tricky part in binding the java code, i have got a solution which i have posted here; [http://gauravstomar.blogspot.in/2013/01/blackberry-10-qnx-phonegap-plugins.html](http://gauravstomar.blogspot.in/2013/01/blackberry-10-qnx-phonegap-plugins.html)

# c# - 调用和调用之间的区别 .调用

> ID：14597346
> 
> 赞同：0
> 
> 时间：2013-01-30T05:31:17.390
> 
> 标签：c#, winforms

Winforms 应用程序。后台线程从 MQ 检索消息并在 UI 线程上进行更改。

我需要调用此方法来更新自定义列表

```
 private void UpdateList()
    {         
        if (ctrlLabel.IsHandleCreated)
        {
            ctrlLabel.Invoke(new Action(() =>
            {
                //Do Something
            }
            ));
        }

        ctrlListView.Data = package;

       //MARK
       ctrlListView.Invoke(new Action(() =>
        {
            ctrlListView.LoadData();
        }
        )); 
       //MARK           
    } 
```

此方法由后台线程调用两次。但是，这适用于新实例化控件后的第一次调用。

在删除项目时，当我尝试刷新时，出现 Null Exception Errors 错误。

有趣的是，我能够通过一些小的修改来运行它。我将 [Control].Invoke 更改为仅 Invoke，它可以正常工作（仅用于第二次调用）

```
 //MARK
       Invoke(new Action(() =>
        {
            ctrlListView.LoadData();
        }
        )); 
       //MARK 
```

那么，Invoke 和 [control].Invoke 在操作上有何不同？

见于 Win7、.Net 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:33:48.277

`[control].Invoke`特定于该特定控件的调用，如果您使用`Invoke`then 它指的`this`是当前表单。

所以：

```
 Invoke(new Action(() => .... 
```

以上等于：

```
this.Invoke(new Action(() => .... 
```

`this`当前表格在哪里。

> 在删除项目时，当我尝试刷新时，出现 Null Exception Errors 错误。

如果您控制是`null`因为，`delete`那么您将获得 NRE。

# sql - SQL Server CE - 如果插入语句中的列与表本身的顺序不同，这有关系吗？

> ID：14597352
> 
> 赞同：1
> 
> 时间：2013-01-30T05:31:46.993
> 
> 标签：sql, sql-server-ce, sql-insert

如果插入语句中的列与表本身的顺序不同，这有关系吗？

**名称表**

```
firstName | lastName | age | 
```

**插入**语句：

```
INSERT INTO NameTable (age, firstName, lastName) VALUES (25, 'jane', 'doe'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T05:32:48.820

只要您在该列上提供正确的值（*数据类型*等），这**并不重要。**

# android - 模拟器因错误断言失败而断开连接

> ID：14597355
> 
> 赞同：1
> 
> 时间：2013-01-30T05:31:57.670
> 
> 标签：android, android-emulator

我正在开发一个包含 20 多个活动的 android 应用程序。昨天，当我运行我的应用程序时，它可以正常运行，没有任何障碍。但是现在当我运行我的应用程序时，模拟器已断开连接，并显示以下 logcat 错误：

```
SDKCtl sensors: Unexpected I/O status 2 in the dispatcherPANIC: ASSERTION FAILURE (external/qemu/android/sdk-controller-socket.c:1680) in _on_sdkctl_io_dispatcher_io
emulator-5554 disconnected! Cancelling 'com.app.main activity launch'! 
```

我在互联网上搜索过这个错误的原因，但我找不到任何明确的解决方案。谁能告诉为什么会发生这个错误？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:55:32.653

它出乎意料地发生了。尝试

```
project->clean 
```

并通过右键单击它来刷新您的项目，然后选择刷新并再次运行。它会工作

# spring - Spring 2.5 中的单例和原型范围有什么区别

> ID：14597356
> 
> 赞同：1
> 
> 时间：2013-01-30T05:32:00.803
> 
> 标签：spring, inversion-of-control, ioc-container

我阅读了关于 spring bean 范围的教程，因为他们提到如果 bean 范围是`prototype`Spring 容器将在每个`context.getBean("id")`语句中创建新对象。如果我们指定范围`singleton`，即使我们写`context.getBean("id")`了两次或更多次语句，它也只会创建一个对象......我做了一个小例子

```
Demo.java

    public class Demo {
     public static void main(String[] args)
        {

          ApplicationContext con=new ClassPathXmlApplicationContext("spconfig.xml");

          Person p=(Person)con.getBean("person");
          Person q=(Person)con.getBean("person");
          System.out.println(" P hashCode :"+p.hashCode());
          System.out.println(" Q hashCode :"+q.hashCode());
              if (p==q)
              {  
                 System.out.println("Same instance!");
              } 
              else {
              System.out.println("Different instance");  
                   }

        }
} 
```

上面的程序打印

```
 P hashCode :18303751
 Q hashCode :18303751
 Same instance! 
```

但是在`Person`bean 范围内，我给出了`scope="prototype"` 为什么它打印相同的 Hashcode ????

解释一下任何人...

提前致谢...

## spconfig.xml

```
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
            "http://www.springframework.org/dtd/spring-beans-2.0.dtd">

<beans>
    <bean id="person" class="demo.Person" scope="prototype">
       <property name="name" value="Hello World" />
    </bean>  
</beans> 
```

## 人.java

```
package demo;

public class Person {
private String name;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
public void printHello() {
    System.out.println("Hello ! " + name);
}

@Override
public int hashCode() {
 return super.hashCode();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:05:07.907

这是因为你`hashCode`在你的`person`模型中被覆盖了。

```
@Override
public int hashCode() {
  return name.hashCode(); 
```

你执行：

```
Person p=(Person)con.getBean("person");
Person q=(Person)con.getBean("person"); 
```

twise 但对于 p 和 q ，`name`属性具有相同的值，即**"Hello World"**。所以它打印相同的hashCode。

因此，如果不覆盖`hashCode`() ，输出会有所不同。您将获得 p 和 q 的不同 hashCode。

**编辑**：试试

```
@Override
public int hashCode() {
  return super.hashCode(); 
```

在您的代码中，您将看到单例和原型之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:10:40.813

正如另一个答案所建议的那样，您已经覆盖了该`hashCode`方法，并且它是根据`name`字符串计算的。

您不应该使用哈希码来验证两个引用是否指向同一个对象实例。直接比较它们：

```
Person p=(Person)con.getBean("person");
Person q=(Person)con.getBean("person");
if (p==q) {
    System.out.println("Same instance!");
} else {
    System.out.println("Different instance");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:56:45.580

问题出在 Jar 文件上……早些时候我使用 Spring 2.5 jar，它会打印相同的内容`hashCode` ，但后来我更改了 jar，我添加了 Spring 3.0 相关的 jar，现在我得到了正确的输出。

# r - 在矩阵中，找到与第 1 列中第 20 到第 30 个百分位值相关的第 4 列值的平均值

> ID：14597358
> 
> 赞同：1
> 
> 时间：2013-01-30T05:32:08.277
> 
> 标签：r, matrix, aggregate, mean

本质上，我想建立一个用于敏感性分析的蜘蛛图。我想将我的数据分成 10 个部分，并找到每个部分的平均结果值（在第 4 列中）。应根据每个变量列中数据的第 10、第 20、第 30、第 40 等百分位数选择批次。我得到了这个工作，但我认为必须有一个更简单的方法来做到这一点。

我的代码：

```
##Make some data and put it into a matrix.

c <- 1000
v1 <- rnorm (c, 100, 15)
v2 <- rnorm (c, 80, 10)
v3 <- rnorm (c, 50, 5)
r1 <- ((v1*v2^2)/v3)
data <- cbind (v1,v2)
data <- cbind (data, v3)
data <- cbind (data, r1)

##Sort matrix by first column.
data <- as.matrix(data[order(data[,1]),])

##Find mean of column 4 values corresponding to the smallest 10% (and 20%, and 30%,     etc.) of column 1 values.
a1 <- mean (data[1:(c/10),4])
a2 <- mean (data[(c/10):(2*c/10),4])
a3 <- mean (data[(2*c/10):(3*c/10),4])
a4 <- mean (data[(3*c/10):(4*c/10),4])
a5 <- mean (data[(4*c/10):(5*c/10),4])
a6 <- mean (data[(5*c/10):(6*c/10),4])
a7 <- mean (data[(6*c/10):(7*c/10),4])
a8 <- mean (data[(7*c/10):(8*c/10),4])
a9 <- mean (data[(8*c/10):(9*c/10),4])
a10 <- mean (data[(9*c/10):c,4])

##Combine into a vector.
a <- as.vector(c(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10))

##Repeat for data sorted by columns 2 and 3 respectively.
data <- as.matrix(data[order(data[,2]),])

a1 <- mean (data[1:(c/10),4])
a2 <- mean (data[(c/10):(2*c/10),4])
a3 <- mean (data[(2*c/10):(3*c/10),4])
a4 <- mean (data[(3*c/10):(4*c/10),4])
a5 <- mean (data[(4*c/10):(5*c/10),4])
a6 <- mean (data[(5*c/10):(6*c/10),4])
a7 <- mean (data[(6*c/10):(7*c/10),4])
a8 <- mean (data[(7*c/10):(8*c/10),4])
a9 <- mean (data[(8*c/10):(9*c/10),4])
a10 <- mean (data[(9*c/10):c,4])

b <- as.vector(c(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10))

data <- as.matrix(data[order(data[,3]),])

a1 <- mean (data[1:(c/10),4])
a2 <- mean (data[(c/10):(2*c/10),4])
a3 <- mean (data[(2*c/10):(3*c/10),4])
a4 <- mean (data[(3*c/10):(4*c/10),4])
a5 <- mean (data[(4*c/10):(5*c/10),4])
a6 <- mean (data[(5*c/10):(6*c/10),4])
a7 <- mean (data[(6*c/10):(7*c/10),4])
a8 <- mean (data[(7*c/10):(8*c/10),4])
a9 <- mean (data[(8*c/10):(9*c/10),4])
a10 <- mean (data[(9*c/10):c,4])

d <- as.vector(c(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10))

##Make a pretty chart
plot (a, type = "o", col = "red") 
lines (b, type = "o", col = "blue") 
lines (d, type = "o", col = "green") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:55:40.467

这是一些做同样事情的代码，但对 R 来说更紧凑和惯用。

```
n <- 1000
# changed from c to n since you use c again later as something else
v1 <- rnorm (n, 100, 15)
v2 <- rnorm (n, 80, 10)
v3 <- rnorm (n, 50, 5)
r1 <- ((v1*v2^2)/v3)

DF <- data.frame(v1, v2, v3, r1)
# A data.frame seems like it would be a better fit for this

library("Hmisc")
# The Hmisc package has a function which splits in to quantiles, so use it
DF <- transform(DF, 
                v1.decile = cut2(v1, g=10),
                v2.decile = cut2(v2, g=10),
                v3.decile = cut2(v3, g=10))
# add three new variables to the data frame which indicate which decile each
# value belongs to, for each of v1, v2, and v3
a <- aggregate(DF$r1, list(DF$v1.decile), mean)$x
# why add the new variables? because aggregate can perform an operation on
# groups of one variable defined by the value of another variable
b <- aggregate(DF$r1, list(DF$v2.decile), mean)$x
c <- aggregate(DF$r1, list(DF$v3.decile), mean)$x 
```

然后你可以像以前一样制作情节。

* * *

编辑：

Ananda Mahto 的回答指出了我忘记的聚合函数的函数版本。`aggregate`你可以更清楚地写出这些线条

```
a <- aggregate(r1 ~ v1.decile, DF, mean)$r1
b <- aggregate(r1 ~ v2.decile, DF, mean)$r1
c <- aggregate(r1 ~ v3.decile, DF, mean)$r1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:41:24.577

这在概念上与 Brian Diggs 的答案非常相似，但不依赖于您的输入是 a`data.frame`也不依赖于加载任何包。它还介绍了`matplot`，它将为您提供绘图，而不必一次绘制每一列。

这是您的数据：

```
set.seed(1) # make it reproducible 
n <- 1000
v1 <- rnorm (c, 100, 15)
v2 <- rnorm (c, 80, 10)
v3 <- rnorm (c, 50, 5)
r1 <- ((v1*v2^2)/v3)
data <- cbind (v1, v2, v3, r1)
rm(v1, v2, v3, r1) # Cleanup

head(data)
#             v1       v2       v3        r1
# [1,]  90.60319 95.11781 54.59489 15014.651
# [2,] 102.75465 83.89843 53.91068 13416.349
# [3,]  87.46557 73.78759 50.37282  9453.824
# [4,] 123.92921 57.85300 40.05324 10355.899
# [5,] 104.94262 91.24931 53.09913 16455.977
# [6,]  87.69297 79.55066 49.71936 11161.612 
```

我们将使用它`sapply`来执行我们的聚合。这将产生一个我们可以轻松绘制的矩阵。

```
myAggVars <- c("v1", "v2", "v3")
temp <- sapply(myAggVars, function(x) {
  aggregate(r1 ~ cut(get(x), quantile(get(x), probs = seq(0, 1, .1)), 
                     include.lowest = TRUE), data, mean)[[2]]
})
temp
#              v1        v2        v3
#  [1,]  9453.824 10355.899 10355.899
#  [2,] 11161.612  9453.824 20834.485
#  [3,] 15014.651 11161.612 17755.902
#  [4,] 13528.961 13896.830 13896.830
#  [5,] 13416.349 13416.349 11161.612
#  [6,] 16455.977 13528.961  9453.824
#  [7,] 13896.830 17755.902 13528.961
#  [8,] 17755.902 20834.485 16455.977
#  [9,] 20834.485 16455.977 13416.349
# [10,] 10355.899 15014.651 15014.651 
```

这是绘图步骤：

```
matplot(temp, type = "o", pch = 1) 
```

结果：

![在此处输入图像描述](../Images/87e567f089f084aba3b4009eaf95b5af.png)

# php - XML：如何在 php 中解析 xml 值

> ID：14597359
> 
> 赞同：0
> 
> 时间：2013-01-30T05:32:14.590
> 
> 标签：php, xml, simplexml

我的 xml 飞行：

```
<item>
<title geoid="1198">District of Columbia</title>
<description cong_dist="Delegate District (at Large) 98">DC - Delegate District (at Large) 98 <br/> No of Incidents: 1436</description>
<latitude>38.8933115</latitude>
<longitude>-77.0146475</longitude>
<georss:polygon>38.934311 -77.1199 38.939834989364 -77.112868886998 38.94641 -77.1045 38.94891 -77.1007 38.95651 -77.0915 38.960871062931 -77.085827416011 38.967245703105 -77.077535703105 38.971616050926 -77.07185104194 38.98511 -77.054299 38.986557824794 -77.052373393024 38.99511 -77.040999 38.99171 -77.036299 38.98423067065 -77.026499658425 38.977828623846 -76.909395 38.895811472659 -76.913155644266 38.904084963804 -76.923528686655 38.904209815545 -76.923685221832 38.910455906543 -76.931516373827 38.913311 -76.935096 38.918592133391 -76.941928356721 38.930758817183 -76.957668751373 38.93511031877 -76.963298416241 38.946183221387 -76.977623754198 38.951906165093 -76.985027693844 38.95742281319 -76.992164742828 38.961159688178 -76.99699924729 38.96541 -77.002498 38.97011 -77.008298 38.97441 -77.013798 38.97591 -77.015598 38.977828623846 -77.018111761535 38.98423067065 -77.026499658425 38.99171 -77.036299 38.99511 -77.040999 38.986557824794 -77.052373393024 38.98511 -77.054299 38.971616050926 -77.07185104194 38.967245703105 -77.077535703105 38.960871062931 -77.085827416011 38.95651 -77.0915 38.94891 -77.1007 38.94641 -77.1045 38.939834989364 -77.112868886998 38.934311 -77.1199</georss:polygon>
</item> 
```

我将此值存储在`dc.xmlfile`

如何获取变量中的所有值。例如标签值存储在 php 中的 $lat 变量中。

如何获得这个值我需要你的帮助......，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:49:53.503

试试这个

```
<?php
$string = <<<XML
<?xml version='1.0'?>
<item>
<title geoid="1198">District of Columbia</title>
<description cong_dist="Delegate District (at Large) 98">DC - Delegate District (at Large) 98 <br/> No of Incidents: 1436</description>
<latitude>38.8933115</latitude>
<longitude>-77.0146475</longitude>
<georss:polygon>38.934311 -77.1199 38.939834989364 -77.112868886998 38.94641 -77.1045 38.94891 -77.1007 38.95651 -77.0915 38.960871062931 -77.085827416011 38.967245703105 -77.077535703105 38.971616050926 -77.07185104194 38.98511 -77.054299 38.986557824794 -77.052373393024 38.99511 -77.040999 38.99171 -77.036299 38.98423067065 -77.026499658425 38.977828623846 -76.909395 38.895811472659 -76.913155644266 38.904084963804 -76.923528686655 38.904209815545 -76.923685221832 38.910455906543 -76.931516373827 38.913311 -76.935096 38.918592133391 -76.941928356721 38.930758817183 -76.957668751373 38.93511031877 -76.963298416241 38.946183221387 -76.977623754198 38.951906165093 -76.985027693844 38.95742281319 -76.992164742828 38.961159688178 -76.99699924729 38.96541 -77.002498 38.97011 -77.008298 38.97441 -77.013798 38.97591 -77.015598 38.977828623846 -77.018111761535 38.98423067065 -77.026499658425 38.99171 -77.036299 38.99511 -77.040999 38.986557824794 -77.052373393024 38.98511 -77.054299 38.971616050926 -77.07185104194 38.967245703105 -77.077535703105 38.960871062931 -77.085827416011 38.95651 -77.0915 38.94891 -77.1007 38.94641 -77.1045 38.939834989364 -77.112868886998 38.934311 -77.1199</georss:polygon>
</item>
XML;

$xml = simplexml_load_string($string);
$title = $xml->title;
print_r($title);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:16:52.213

看到这个屏幕截图，你所说的完全没有错误![在此处输入图像描述](../Images/ac23e3e2c2853e919ea3d323d390b59b.png)

# html - 在 Safari 中将 PDF 缩放到 iframe/对象的宽度

> ID：14597363
> 
> 赞同：8
> 
> 时间：2013-01-30T05:32:21.740
> 
> 标签：html, css, safari

简短的问题是；“我可以 - 在 Safari 中 - 在 iPad 上（仅 - 不需要其他浏览器或设备） - 放大或缩小 PDF 文档以适应固定宽度的 iframe 或对象标签吗？”

还有一个很长的问题；我有以下标记 - 用于在 DIV 中显示可滚动的 PDF。此标记将用于 iPad 的 Cordova/Phonegap 应用程序。Javascript 智能是通过 Backbone；

```
<div class="pdf-container-outer">
    <div class="pdf-container">
        <iframe src="..." />
    </div>
</div> 
```

以及相关的 CSS（为了可读性而删减）；

```
.pdf-container-outer {
    width: 800px; 
    height: 800px; 
    overflow: scroll !important;
    -webkit-overflow-scrolling: touch; 
}

.pdf-container { 
    width: 800px; 
}

iframe { 
    width: 800px; 
} 
```

PDF 文档本身是 A4 大小的——然后 pdf 页面的像素尺寸为 595px X 841px。在 Safari 中 - 文档始终以 '100%' 显示 - 即无论我在 iframe 上设置的宽度（或对象标签 - 结果是相同的），出现的内部 PDF 始终只有 ~595px 宽（+ 大约两边留出 7-8px 的边距）。他们不缩放。

iframe 的宽度需要根据用户是在纵向还是横向模式下查看站点来更改...横向约 800 像素，纵向约 520 像素。

鉴于我知道我正在显示的文档中的页数 - 我确实知道显示所有文档所需的 iframe 的完整尺寸。因此，我玩过的其中一项技术是使用一些内联样式设置 iframe 的大小，然后对其应用变换 - 将其放大，例如；

```
<iframe src="..." style="width: 610px; height: 14000px; -webkit-transform: scale(1.31); -webkit-transform-origin: top left;" /> 
```

即应用的变换将 610px 放大 131% = 800px 宽（在横向模式下）。纵向 - 比例因子约为 0.8。

这实际上在 iOS6 附带的 Safari 中运行良好，但在 iOS5.1 中不是很好 - 存在我似乎无法解决的剪辑问题 - 因此解决方案并不理想。

我确定我想多了 - 并且有一个更简单的解决方案。但是对于我的生活，我无法在 Safari 的 iframe 中获得 PDF 以横向缩放...

一点帮助？

# database - 如何对包含数组的列进行左外连接。

> ID：14597365
> 
> 赞同：0
> 
> 时间：2013-01-30T05:32:27.810
> 
> 标签：database, postgresql, left-join

我有这样的东西。

\d 表1

```
uid |int (primary key)
name|text
cids|int[] 
```

例子：

```
id   | name  | cids 
 1   | joe   |{10,20,30}
 2   | marry |{10,20,30,40}
 3   | john  |{30,40} 
```

\d 表2

```
cid   |int (primary key)
name  |text
type  |int 
```

例子

```
cid  | name  |  type
10   | aname | 0  
20   | bname | 0
30   | cname | 1
40   | dname | 0 
```

现在我想要一个结果，如 id、table1 中的名称和 cid、表 2 中的名称。其中 type !=1

```
Example. 
id | name | cid      |cnames
1  | Joe | {10,20}   |{aname,bname} 
```

请告诉我这样做的有效方法是什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:45:24.957

试试这个对于版本 < 9.0

```
SELECT A.id, A.name, 
array_agg(b.cid) cids,array_agg(B.name) cnames
FROM Table1 A
JOIN 
(
  SELECT * FROM Table2 ORDER BY cid
)
B ON B.cid = ANY(A.cids)
WHERE type <> 1
GROUP BY A.id, A.name; 
```

（以下作品适用于版本 9+）

```
SELECT A.id, A.name, 
array_agg(b.cid order by b.cid) cids,
array_agg(B.name ORDER BY B.name) cnames
FROM Table1 A
JOIN Table2 B ON B.cid = ANY(A.cids)
WHERE type <> 1
GROUP BY A.id, A.name 
```

[SQL 演示在这里](http://sqlfiddle.com/#!1/c3570/14)

# iphone - 在 iphone 中保存视图状态

> ID：14597366
> 
> 赞同：2
> 
> 时间：2013-01-30T05:32:36.903
> 
> 标签：iphone, objective-c, viewstate

当我从纵向模式更改为横向并返回纵向模式时。`PickerView`在纵向模式下，尺寸在背面保留时会发生变化。那么如何保存视图状态以使选择器大小不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:12:15.353

Select the `PickerView` Go to the size inspector -> autoSizing and unchecke the middle arrow [![](../Images/3b8bb5365fd0d1a6893f9104940be6a6.png)](https://i.stack.imgur.com/x6cZ5.png)

# java - 使用 BouncyCastle 使用密码加密私钥

> ID：14597371
> 
> 赞同：4
> 
> 时间：2013-01-30T05:33:31.010
> 
> 标签：java, ssl, ssl-certificate, bouncycastle, private-key

我是 BouncyCastle 的新手。我有一个使用以下代码生成的私钥。

```
 final CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null);
     keypair.generate(1024);
     final PrivateKey privKey = keypair.getPrivateKey(); 
```

我会使用 AES 使用密码或使用 BouncyCastle 的某些支持 openssl 的算法对其进行加密。我试图找到从哪里开始，因为我找不到任何好的教程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-24T19:49:51.833

如果您只想将您的私钥输出到密码短语“12345”受保护的 PEM 格式和文件“privatekey.pem”，您可以使用此 BC 代码：

```
    JceOpenSSLPKCS8EncryptorBuilder encryptorBuilder = new JceOpenSSLPKCS8EncryptorBuilder(PKCS8Generator.PBE_SHA1_3DES);
    encryptorBuilder.setRandom(EntropySource.getSecureRandom());
    encryptorBuilder.setPasssword("12345".toCharArray());
    OutputEncryptor oe = encryptorBuilder.build();
    JcaPKCS8Generator gen = new JcaPKCS8Generator(privKey,oe);
    PemObject obj = gen.generate();

    PEMWriter pemWrt = new PEMWriter(new FileWriter("privatekey.pem"));
    pemWrt.writeObject(obj);
    pemWrt.close();

```

然后之后您可以使用 openssl 获取私钥

```
$ openssl rsa -in privatekey.pem -check
输入 privatekey.pem 的密码：
RSA 密钥正常
编写 RSA 密钥
-----开始 RSA 私钥-----
......
-----结束 RSA 私钥-----

```

PEMWriter 的“标准”使用不会通过密码保护您的私钥:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-13T10:48:12.240

如果您希望使用 AES-256 而不是 PKCS8 支持的旧 DES 变体之一来保护您的私钥，这将起作用：

```
public String toPem(String password) throws IOException {

  StringWriter sw = new StringWriter();

  try (JcaPEMWriter pemWriter = new JcaPEMWriter(sw)) {

    PEMEncryptor encryptor =
        new JcePEMEncryptorBuilder("AES-256-CBC").build(password);

    // privateKey is a java.security.PrivateKey
    JcaMiscPEMGenerator gen = new JcaMiscPEMGenerator(privateKey, encryptor);
    pemWriter.writeObject(gen);
  }

  return sw.toString();
} 
```

您可以使用 openssl 验证输出。在我的情况下，密钥是 EC，因此使用此命令：

```
$ openssl ec -in key.txt -passin pass:password -text 
```

根据 RSA 密钥的需要进行调整。

# java - 运行可执行 jar 时出现问题：ClassNotFoundException 即将到来

> ID：14597374
> 
> 赞同：0
> 
> 时间：2013-01-30T05:33:39.353
> 
> 标签：java, spring, maven, jar, packaging

我使用 Maven install 创建了一个 jar，当我使用命令运行 jar 时，`java -jar MyJar.jar` 它给了我异常。下面是堆栈跟踪。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

我的 pom.xml 中有所有依赖项，并且我成功地将主类作为独立应用程序运行。

然后我提取了 jar 的内容，虽然 Manifest 文件在类路径中包含所有 jar，但我很惊讶地发现其中没有依赖 jar。下面是生成的清单文件：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: Anand Jain
Build-Jdk: 1.6.0_38
Main-Class: com.hcentive.simulator.cms.beq.response.util.Test
Class-Path: spring-jdbc-3.0.6.RELEASE.jar spring-beans-3.0.6.RELEASE.j
 ar spring-core-3.0.6.RELEASE.jar spring-tx-3.0.6.RELEASE.jar spring-c
 ontext-3.0.6.RELEASE.jar spring-expression-3.0.6.RELEASE.jar spring-a
 sm-3.0.6.RELEASE.jar cglib-nodep-2.2.jar hibernate-jpa-2.0-api-1.0.1.
 Final.jar spring-aop-3.0.6.RELEASE.jar aopalliance-1.0.jar spring-bat
 ch-core-2.1.7.RELEASE.jar xstream-1.3.jar xpp3_min-1.1.4c.jar jettiso
 n-1.1.jar spring-batch-infrastructure-2.1.7.RELEASE.jar commons-beanu
 tils-1.8.3.jar commons-logging-1.1.1.jar hibernate-core-3.5.1-Final.j
 ar antlr-2.7.6.jar commons-collections-3.1.jar dom4j-1.6.1.jar xml-ap
 is-1.0.b2.jar jta-1.1.jar slf4j-api-1.5.8.jar commons-dbcp-1.2.2.jar 
 commons-pool-1.3.jar commons-io-1.3.2.jar commons-lang-2.5.jar hsqldb
 -1.8.0.7.jar aspectjrt-1.6.8.jar aspectjweaver-1.6.8.jar log4j-1.2.14
 .jar 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:07:56.003

要使用 maven 构建包含所有依赖项的 jar，您可以添加...

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.example.MyMain</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

您还应该确保为每个依赖项正确设置范围。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T05:47:34.963

java -classpath jar1;jar2;jar3;jar4;xml1;xml2;....; jar ExceutableJar.jar

I believe it might be having a lot of jar file

I recommend you you to copy the entire command in to a notepad file and save it as batch (.bat) or shell script (.sh) in case of Unix

So that , you can run the jar easily with one file, instead of repeating the command

# c# - 如何在容器 ViewModel 和包含的 ViewModel 之间执行通信？

> ID：14597383
> 
> 赞同：0
> 
> 时间：2013-01-30T05:34:23.610
> 
> 标签：c#, wpf, mvvm

请考虑以下代码

```
 class VMContainer:INotifyPropertyChanged
    {
    Type t;
    VMContained contained;

    public Type T
    {
        get
          {
               return this.t;
          }
        set
          {
               this.t = value;
               this.OnPropertyChanged("T");
          }
    }
    ........
    ........
    ........

    } 
```

VMContainer 和 VMContained 是两个 ViewModel 类。现在，每当容器类属性 T 更改时，我需要更改成员实例“包含”的一个属性（例如 P1）。我应该怎么做？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:41:29.927

最简单的方法就是在 setter 中设置值`T`：

```
public Type T
{
    get
      {
           return this.t;
      }
    set
      {
           this.t = value;
           contained.P1 = CalculateContainedValue();
           this.onPropertyChanged("T");
      }
} 
```

**更新**

```
public Type T1
{
    get
      {
           return this.t1;
      }
    set
      {
           this.t1 = value;
           contained.P1 = CalculateContainedValue();
           this.OnPropertyChanged("T1");
      }
}

public Type T2
{
    get
      {
           return this.t2;
      }
    set
      {
           this.t2 = value;
           contained.P1 = CalculateContainedValue();
           this.OnPropertyChanged("T2");
      }
}

private Type CalculateContainedValue()
{
    return /* Some combination of T1, T2, ... */ ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:41:05.933

您可以使用[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)。样品在[这里](http://www.codeproject.com/Articles/355473/Prism-EventAggregator-Sample)。

否则，您必须制作自己的 pub sub 机制。

# java - JAVA - Apache POI 批量修改 Excel 文件

> ID：14597385
> 
> 赞同：1
> 
> 时间：2013-01-30T05:34:41.570
> 
> 标签：java, excel, memory, optimization, apache-poi

我正在运行一个修改大型 excel 文件的 java 应用程序。而且我正在经历需要进行更新的时间..

对于每个单元格，我正在根据更改运行更新作为休耕

```
 public boolean updateCellData(ColumnName, RowNum, Data){
    FileInputStream fis = new FileInputStream(path);
        Workbook    workbook = WorkbookFactory.create(fis);

        row =  getRow(rowNum-1);
            if (row == null){
                row = sheet.createRow(rowNum-1);
            }
            cell = row.getCell(colNum);
            if (cell == null){
                cell = row.createCell(colNum);
            }
            cell.setCellValue(data);
            fileOut = new FileOutputStream(path);
            workbook.write(fileOut);
            fileOut.close();
    } 
```

我可以对我的代码进行任何优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:54:44.200

打开excel一次，完成所有更新操作后关闭excel。

**例子 ：**

```
 FileInputStream fis =null;
     Workbook workbook=null;
    public void openWorkbook(){
         fis = new FileInputStream(path);
         workbook = WorkbookFactory.create(fis);
    }

    public boolean updateCellData(ColumnName, RowNum, Data){

            row =  getRow(rowNum-1);
                if (row == null){
                    row = sheet.createRow(rowNum-1);
                }
                cell = row.getCell(colNum);
                if (cell == null){
                    cell = row.createCell(colNum);
                }
                cell.setCellValue(data);
      }

    public void closeWorkbook(){
        fileOut = new FileOutputStream(path);
        workbook.write(fileOut);
        fileOut.close();
    } 
```

# asp.net-mvc-3 - 如何通过谷歌地图 API 获取世界上所有国家的列表？

> ID：14597389
> 
> 赞同：2
> 
> 时间：2013-01-30T05:35:39.210
> 
> 标签：asp.net-mvc-3, google-maps

我正在做一个项目，在注册页面中，我想通过 google API 在下拉列表中获取所有国家/地区的列表。我使用了cultureInfo，但它只获得了unik 127 个国家的列表。我想使用谷歌地图 API。谁能告诉我我需要在控制器、视图和模型中做什么或需要什么？我有一个注册页面的视图

```
@model Retail_MVC.Models.registration
@{

    Layout = null;
}

<div class="my_wrapper">
         <div class="my_left_box">
            @Html.LabelFor(model => model.username)
         </div>
         <div class="my_right_box">
           <input type="text" id="txtusername" name="UserName"/>         
         </div>

   </div>
  -- here i want to get dropdownlist for all countries-- 
```

# sql-server - 使用值和查询 XML 方法未返回正确结果

> ID：14597392
> 
> 赞同：0
> 
> 时间：2013-01-30T05:35:50.313
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2, xquery-sql

我有一张桌子！

```
CREATE TABLE [dbo].[XmlTable](
    [XmlId] [int] IDENTITY(1,1) NOT NULL,
    [XmlDocument] [xml] NOT NULL,
 CONSTRAINT [PK_XmlTable] PRIMARY KEY CLUSTERED 
(
    [XmlId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

带有模式结构：存储在 xml 列中

```
 <dev:Doc xmlns:dev="http://www.w3.org/2001/XMLSchema" SchemaVersion="0.1" Settings="Testing" Title="Ordering">
  <dev:Base RevisionNumber="0" Baseid="34433" />
  <dev:Rev Time="2013-01-21T15:08:00">
    <dev:Person Name="Me" Systemid="54654" />
  </dev:Rev>
  <dev:Functions Id="A1">
    <dev:A1 Number="1">
      <dev:Codes>D</dev:Codes>
      <dev:Required>true</dev:Required>
      <dev:Informational>false</dev:Informational>
      <dev:Visitors>
        <dev:Visitor Name="Dev01" Location="STLRF">
          <dev:Divisions>
            <dev:Division Number="1" Name="TFR3" Usage="Monitor">
              <dev:Description>Development Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="2" Name="DEF32" Usage="Monitor">
              <dev:Description>Testing Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="3" Name="DEP13" Usage="None">
              <dev:Description>Guided Fundamentals</dev:Description>
            </dev:Division>
          </dev:Divisions>
        </dev:Visitor>
        <dev:Visitor Name="Dev02" Location="STLRF">
          <dev:Divisions>
            <dev:Division Number="1" Name="TFR3" Usage="Monitor">
              <dev:Description>Development Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="2" Name="DEF32" Usage="Monitor">
              <dev:Description>Testing Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="3" Name="DEP13" Usage="None">
              <dev:Description>Guided Fundamentals</dev:Description>
            </dev:Division>
          </dev:Divisions>
        </dev:Visitor>
        <dev:Visitor Name="Dev03" Location="FGRTY">
          <dev:Divisions>
            <dev:Division Number="1" Name="TFR3" Usage="Monitor">
              <dev:Description>Development Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="2" Name="DEF32" Usage="Monitor">
              <dev:Description>Testing Fundamentals</dev:Description>
            </dev:Division>
            <dev:Division Number="3" Name="DEP13" Usage="None">
              <dev:Description>Guided Fundamentals</dev:Description>
            </dev:Division>
          </dev:Divisions>
        </dev:Visitor>
      </dev:Visitors>
      <dev:Senders>
        <dev:Sender Name="FGY(14A)" />
      </dev:Senders>
    </dev:A1>
  </dev:Functions>
  <dev:Functions Id="A2">
    <dev:A2 Number="1">
      <dev:Codes>C</dev:Codes>
      <dev:Required>true</dev:Required>
      <dev:Informational>false</dev:Informational>
      <dev:Remarks>Support</dev:Remarks>
      <dev:Notes>Ready</dev:Notes>
      <dev:Visitors>
        <dev:Visitor Name="GHFF">
          <dev:Divisions>
            <dev:Division Number="0" Name="Trial" Usage="None">
              <dev:FromLocation>LOPO</dev:FromLocation>
              <dev:ToLocation>RDSS</dev:ToLocation>
              <dev:Description>Rich Filter</dev:Description>
            </dev:Division>
          </dev:Divisions>
        </dev:Visitor>
      </dev:Visitors>
      <dev:Senders>
        <dev:Sender Name="W33R" />
      </dev:Senders>
      <dev:IsReady>true</dev:IsReady>
      <dev:IsCall>false</dev:IsCall>
    </dev:A2>
    <dev:A2 Number="2">
      <dev:Codes>A</dev:Codes>
      <dev:Required>true</dev:Required>
      <dev:Informational>false</dev:Informational>
      <dev:Remarks>Loader Ready</dev:Remarks>
      <dev:Notes>Ready</dev:Notes>
      <dev:Visitors>
        <dev:Visitor Name="UDT">
          <dev:Divisions>
            <dev:Division Number="0" Name="Trial" Usage="None">
              <dev:FromLocation>TYUJ</dev:FromLocation>
              <dev:ToLocation>DETF</dev:ToLocation>
              <dev:Description>Web Enhance</dev:Description>
            </dev:Division>
          </dev:Divisions>
        </dev:Visitor>
      </dev:Visitors>
      <dev:Senders>
        <dev:Sender Name="RJ4" />
      </dev:Senders>
      <dev:IsReady>true</dev:IsReady>
      <dev:IsCall>false</dev:IsCall>
    </dev:A2>
  </dev:Functions>
</dev:Doc> 
```

我正在尝试返回修订号、函数 ID、编号、访问者、访问者的位置、发件人姓名、

就像是：

```
RevNumber Function Id  Number  Visitor Location Sender
========= =========== ======== ======= ======== ======
  0          A1          1      Dev01   STLRF   FGY(14A)
  0          A1          1      Dev02   STLRF   FGY(14A)
  0          A1          1      Dev03   FGRTY   FGY(14A)
  0          A2          1      GHFF    NULL    W33R
  0          A2          2      UDT     NULL    RJ4 
```

这是我在表格中的插入

```
INSERT INTO XmlTable(XMLDocument)
SELECT * FROM OPENROWSET(
   BULK 'C:\Users\123\Desktop\Practice.xml',
   SINGLE_BLOB) AS x; 
```

我已经使用查询和值方法来拉回部分列表，但现在我被卡住了。我很感激任何帮助。谢谢！

这是查询

```
;WITH XMLNAMESPACES ( DEFAULT 'http://www.w3.org/2001/XMLSchema' )
SELECT  Visitor.query('.') AS XmlFragment,
        Visitor.value('@Name', 'NVARCHAR(MAX)') AS VisitorName,
        Visitor.value('@Location', 'NVARCHAR(MAX)') AS Location
FROM    XMLTable 
        CROSS APPLY XmlDocument.nodes('/Doc/Functions/A1/Visitors/Visitor') XD ( Visitor ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:53:16.200

您走在正确的轨道上 - 您只需添加一秒钟即可获取XML 节点`CROSS APPLY`内的节点列表：`<Visitor>`

```
;WITH XMLNAMESPACES ( DEFAULT 'http://www.w3.org/2001/XMLSchema' )
SELECT  
    Divisions.value('@Number', 'INT'),
    Divisions.value('@Name', 'VARCHAR(50)'),
    Divisions.value('@Usage', 'VARCHAR(100)'),
    Visitor.value('@Name', 'NVARCHAR(MAX)') AS VisitorName,
    Visitor.value('@Location', 'NVARCHAR(MAX)') AS Location
FROM
    @XmlTable
CROSS APPLY 
    XmlDocument.nodes('/Doc/Functions/A1/Visitors/Visitor') AS XD(Visitor)
CROSS APPLY 
    Visitor.nodes('Divisions/Division') AS XD2(Divisions) 
```

返回如下输出：

![在此处输入图像描述](../Images/29c96dde96e07314fdf735a3256c91f3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:48:34.620

我已经走得更远了，但是 A2 的数字没有显示，并且发件人返回 null。

```
;WITH XMLNAMESPACES ( 'http://www.w3.org/2001/XMLSchema' as dev )
SELECT  
    Document.value('@Title' , 'NVARCHAR(MAX)') Title,
    Functions.value('@Id', 'NVARCHAR(MAX)') Functions,
    A1.value('@Number', 'INT') Number,
    Visitor.value('@Name', 'NVARCHAR(MAX)') AS VisitorName,
    Visitor.value('@Location', 'NVARCHAR(MAX)') AS Location,
    Sender.value('@Name', 'NVARCHAR(MAX)') As Sender
FROM
    XmlTable

CROSS APPLY 
    xmlDocument.nodes('dev:Doc') As XD(Document)
CROSS APPLY 
    Document.nodes('dev:Functions') As XD2(Functions)
Outer APPLY
    Functions.nodes('dev:A1') As XD3(A1)
OUTER APPLY
    A1.nodes('dev:Visitors/dev:Visitor') As XD4(Visitor)
OUTER APPLY
    Visitor.nodes('dev:Senders/dev:Sender') As XD5(Sender) 
```

![在此处输入图像描述](../Images/ecb1404a93aa1e72a8ff9c1c5e46b4c0.png)

# perl - 从另一个控制器的操作中填充存储

> ID：14597396
> 
> 赞同：0
> 
> 时间：2013-01-30T05:36:08.337
> 
> 标签：perl, catalyst

我在一个控制器中有一个动作，需要隐藏一些数据库记录来呈现表格。

我在第二个控制器中有一个动作，它填充了一个非常相似的表，因此它自己的存储中的数据与我需要的第一个相同。

如果不在两个控制器中复制一堆代码，有没有办法使用一个动作来填充另一个动作的存储？

**编辑：** 响应代码请求（有些简化，但应该了解要点）：

在 Contoller::ShoppingCart 中

```
sub data : Chained('base') PathPart('') CaptureArgs(0) {
my ( $self, $c ) = @_;

my $query = DBRESULTS;
    my $count = 20;

$c->stash(
    data         => $items,
    dataRowCount => scalar @$items,
    totalCount   => $count,
    pageSize     => $pageSize,
);
} 
```

在控制器::供应商

```
sub viewform : Chained('row') Args(1) {
    my ( $self, $c, $view ) = @_;

    $c->stash(
        template => 'simpleItem.mas',
        view => $view,
    );
} 
```

simpleItem.mas 模板需要数据、dataRowCount、totalCount、pageSize，因此从 Controller::ShoppingCart::pageData 中获取存储是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:53:31.293

您应该能够简单`$c->forward()`地执行您需要的特定操作。

```
sub viewform : Chained('row') Args(1) {
    my ( $self, $c, $view ) = @_;

    $c->forward('Controller::ShoppingCart', 'data', [ @optional_args ]);

    $c->stash(
        template => 'simpleItem.mas',
        view => $view,
    );
} 
```

[所有血腥细节](https://metacpan.org/module/Catalyst#REQUEST-FLOW-HANDLING)，包括、`forward()`like和的兄弟姐妹。`detach()``go()``visit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:55:06.247

您可以将这两个操作链接到另一个函数，例如 in `Root.pm`，这将获取这些数据库记录并将它们放入存储中。

IE：

```
# in Root.pm
sub get_db_stuff :Path('') :Args(0) {
    my ( $self, $c ) = @_;

    #store stuff in stash
    $c->stash->{db} = #get db records
} 
```

然后，在您的其他控制器中，您需要执行以下两个功能：

```
sub base : Chained('/get_db_stuff') PathPrefix CaptureArgs(0) {}

sub use_db_stuff : Chained('base') PathPart Args(0) {
    my ( $self, $c ) = @_; 

    #db records now accessible through $c->stash->{db}
} 
```

# jquery - 如何在 asp.net 中使用 ajax 调用检索 json 数据

> ID：14597399
> 
> 赞同：0
> 
> 时间：2013-01-30T05:36:19.500
> 
> 标签：jquery, asp.net, ajax, json

我正在使用 JQgrid 来显示数据库记录。现在根据我的需要，我将请求传递给处理程序文件以使用 jquery ajax 调用检索数据。但是除了 jason 数据字段之外，所有其他数据字段都将出现。下面我发布我的 .handler 和.aspx 代码..

.handler 来自服务器代码的文件..

```
json ="";
                        json = json + "{\n";
                        json = json + " \"page\":\""+intpage+"\",\n";
                        json = json + "\"total\":"+total_pages+",\n";
                        json = json + "\"records\":"+total+",\n";
                        json = json + "\"rows\": [";
                        rc =false;

                        while(rs.Read()){

                            if(rc){
                                json = json + ",";
                            }
                            json = json + "\n{";
                            json = json + "\"price\":\"" + Convert.ToInt32(rs["price"]) + "\",";
                            json = json + "\"cell\":[" + Convert.ToInt32(rs["price"]) + "";
                            json = json + ",\"" + Convert.ToString(rs["username"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["ordinal"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["authcode"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["extension"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["trunk"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialnumber"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialdate"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["dialtime"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["duration"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["destination"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["price"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["toc"]) + "\"]";
                            json = json + "}";

                            rc=true;
                        }
                        json = json +"]\n";

                        json = json +"}";

                        HttpContext.Current.Response.Write(json); 
```

这是我的 .aspx 代码..

```
 var jason;
       $(document).ready(function() {
            {
                var URL='getGriddahico.ashx';
                $.ajax({
                   url:URL,
                   type:'GET',
                   //datatype:'jason',
                   success: function (data) {
                       jason = data;
                      // alert(jason);
                   }

                });
            }
        }); 
```

但是在警报框中，我收到了以下数据字段...

```
{
  "page":"-2147483648",
    "total":-2147483648,
       "records":150508,
          "rows":[]
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:57:08.297

你可以这样走

```
 $(document).ready(function() {
 {
            var URL='getGriddahico.ashx';
            $.ajax({
               url:URL,
               type:'GET',
               datatype:'jason',
               success: function (data) {
                  for (var i = 0; i < data.length; i++) 
                  {
                      data[i].price;
                      data[i].cell;
                  }
               }

            });
        }
    }); 
```

你也可以通过这个链接。
[从 SqlDataReader 转换为 JSON](https://stackoverflow.com/questions/5083709/convert-from-sqldatareader-to-json)
[http://www.west-wind.com/weblog/posts/2009/Apr/24/JSON-Serialization-of-a-DataReader](http://www.west-wind.com/weblog/posts/2009/Apr/24/JSON-Serialization-of-a-DataReader)

**我会建议你使用带有 json 的 jtamplate**

[http://blog.jambura.com/2011/12/18/jquery-json-and-jtemplates-for-ajax-driven-web-app/](http://blog.jambura.com/2011/12/18/jquery-json-and-jtemplates-for-ajax-driven-web-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:54:16.907

Vikas，创建一个对象来存储您的数据读取器数据，例如

```
List<cutomobject> result = new List<customobject>();
while(rs.Read()){
       result.add(new customobject{ price= "Convert.ToInt32(rs["price"])", cell = "Convert.ToInt32(rs["cell"])" ,... });
              }
            var jsonData = new
                {
                    total = result.Count() / 15,
                    page = 1,
                    records = result.Count(),
                    rows = result
                };
                 HttpContext.Current.Response.Write(json); 
```

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:44:39.833

有一些错别字，你可以试试这个：

```
 $(document).ready(function() {
       var URL='getGriddahico.ashx';
       $.ajax({
          url:URL,
          type:'GET',
          datatype:'json',
          success: function (data) {
              $.each(data, function(i, jason){
                  console.log(jason.price); // <--should print your price
              });
          }

       });
    }); 
```

# windows - Qt4 从 Win Explorer 中删除（xml）文件被 TableModel 拒绝

> ID：14597400
> 
> 赞同：1
> 
> 时间：2013-01-30T05:36:37.677
> 
> 标签：windows, drag-and-drop, qt4, mime

我有一个项目，需要将 xml 文件从 Windows 资源管理器拖放到 TableModel 中，无论我尝试了什么，该小部件都会拒绝（带有烦人的块图标）该过程并且不调用以下任何函数。
我尝试了以下方法：

> 1.  重新实现 QAbstarctTableView::flags 以支持拖放
> 2.  重新模拟 QAbstractTableView::supportedDropActions。
> 3.  重新模拟 QAbstractTableView::mimeTypes。返回“text/uri-list”、“text/plain”、“application/xml”、“text/xml”。（有人说“text/uri-list”就足够了。）

根据我在互联网上找到的大多数帖子，我现在应该能够将文件拖到 TableView 小部件中。这对我来说不是真的。T_T

这是我的代码。

```
// set the flags to accept drop & drag
Qt::ItemFlags XMLFileModel::flags(const QModelIndex& index) const {
    Qt::ItemFlags defaultFlags = Qt::ItemIsEditable | Qt::ItemIsEnabled | Qt::ItemIsSelectable;

    if (index.isValid())
        return Qt::ItemIsDragEnabled | Qt::ItemIsDropEnabled | defaultFlags;
    else
        return Qt::ItemIsDropEnabled | defaultFlags;
} 
```

.

```
// drop mime data
bool XMLFileModel::dropMimeData(const QMimeData *data,
    Qt::DropAction action, int row, int column, const QModelIndex &parent)
{
    qDebug() << "Drop Mime data" << endl;

    if (action == Qt::IgnoreAction)
        return true;

    if (! data->hasUrls())
        return false;

    QList<QUrl> urls = data->urls();
    foreach(QUrl url , urls) {
        std::shared_ptr<QFile> file(new QFile(url.path()));
        if (! file->open(QIODevice::ReadOnly | QIODevice::Text))
        {
            QMessageBox::warning(NULL, QString("note"), QString("unable to open file!"));
            return false;
        }
        XMLFilePtr xml(new XMLFile(file->fileName(), file));
        addXMLFile(xml);
    }

    return true;
} 
```

.

```
Qt::DropActions XMLFileModel::supportedDropActions() const
{
    qDebug () << "supportedDropActions";
    return Qt::CopyAction | Qt::MoveAction;
} 
```

.

```
// define the acceptable mime type
QStringList XMLFileModel::mimeTypes() const
{
    qDebug () << "mimeTypes";
    QStringList types;
    types << "text/uri-list" << "text/plain" << "application/xml" << "text/xml";
    qDebug() << types;
    return types;
} 
```

. 我试图添加 QMimeData* mimeData(const QModelIndexList &indexes) const; 现在我可以在表格视图中甚至在表格视图之间拖放。调试消息也会打印。

然后我继续做测试。我写了一个测试类：

```
class test : public QTableView
{
    Q_OBJECT
public:
    explicit test(QWidget *parent = 0);
    virtual void dropEvent(QDropEvent *event);
    virtual void dragEnterEvent ( QDragEnterEvent * event );
    void startDrag ( Qt::DropActions supportedActions );    
}; 
```

.

```
void test::dropEvent(QDropEvent *event) {
    qDebug() << "test";
    qDebug() << event->mimeData()->formats();
    event->accept();
}

void test::dragEnterEvent(QDragEnterEvent *event) {
    qDebug() << "drag enter";
    qDebug() << event->mimeData();
    event->accept();
}

void test::startDrag(Qt::DropActions supportedActions) {
    qDebug() << "true";
} 
```

. 并在接受相同模型的 mainWindow 中添加一个新的测试小部件。
令我惊讶的是，在内部或表格视图之间拖放仍然有效。但是当我试图从桌面上删除该项目时，这三个函数都没有被调用。

现在我认为问题可能是我的操作系统和 Qt D&D 框架之间不兼容的 mime 类型。我可能无法返回正确的 mime 类型

任何人遭受并解决了这个问题或任何建议？>_<
= = = = = = = =
嘿，我也遇到了与放置站点示例相同的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:47:39.093

我认为除了dragEnterEvent 和dropEvent 之外，您不需要重新实现这些函数中的任何一个。你调用 QWidget::setAcceptDrops(true) 了吗？这个很重要。

# c# - 当窗体边框样式为无时，WindowState Maximized 覆盖托盘栏

> ID：14597404
> 
> 赞同：0
> 
> 时间：2013-01-30T05:37:02.197
> 
> 标签：c#, maximize, borderless

我正在使用带有borderstyle = none的窗口形式。当我使用以下代码最大化我的窗口时，它会最大化以覆盖托盘栏。

```
 private void pb_max_Click(object sender, EventArgs e)
    {
        if (WindowState == FormWindowState.Maximized)
        {
            WindowState = FormWindowState.Normal;
            pb_max.Image = GomeeSoft.Properties.Resources.buttonmax;
        }
        else
        {
            WindowState = FormWindowState.Maximized;
            pb_max.Image = GomeeSoft.Properties.Resources.buttonreturn;
        }
    } 
```

您如何安全地最大化以使框架仅在工作区中最大化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:44:49.313

也许是这样的：

```
this.MaximumSize = Screen.PrimaryScreen.WorkingArea.Size; 
```

来自 MSDN：

`The working area is the desktop area of the display, excluding taskbars, docked windows, and docked tool bars.`

# heroku - Heroku 上的 Jekyll：bundler：找不到命令：thin

> ID：14597407
> 
> 赞同：0
> 
> 时间：2013-01-30T05:38:15.630
> 
> 标签：heroku, jekyll, thin

[从http://mwmanning.com/2011/11/29/Run-Your-Jekyll-Site-On-Heroku.html](http://mwmanning.com/2011/11/29/Run-Your-Jekyll-Site-On-Heroku.html)上的教程开始工作。当我尝试推送到 heroku 时，我在输出中收到“构建失败”消息。

Heroku 日志显示

```
2013-01-30T05:29:54+00:00 heroku[slugc]: Slug compilation started
2013-01-30T05:31:36+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rack app
2013-01-30T05:31:38+00:00 heroku[web.1]: State changed from crashed to starting
2013-01-30T05:31:51+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 14276 -e $RACK_ENV`
2013-01-30T05:31:53+00:00 app[web.1]: bundler: command not found: thin
2013-01-30T05:31:53+00:00 app[web.1]: Install missing gem executables with `bundle install`
2013-01-30T05:31:54+00:00 heroku[web.1]: Process exited with status 1272013-01-30T05:31:54+00:00 heroku[web.1]: State changed from starting to crashed 
```

Gemfile 和 Gemfile.lock 都显示thin 已安装。

```
source :rubygems

gem 'jekyll'
gem 'rdiscount'
gem 'rack-jekyll'
gem 'thin'
gem 'RedCloth' 
```

命令`bundle exec thin start`在本地工作，并`bundle show thin`显示 Thin 是专门为当前 gemset 安装的。

我不明白为什么heroku仍然说瘦不见了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T07:30:26.983

对我来说，当地人`bundle update`解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:02:30.457

抱歉，不能直接回答。但是这种方法对我有用。

[http://chriscontinanza.com/2011/06/15/Jekyll-to-heroku.html](http://chriscontinanza.com/2011/06/15/Jekyll-to-heroku.html)

# ruby-on-rails - 如何将@resources 和 JSON 结果组合成一个对象数组，这些对象在 Rails 中共享一个公共接口？

> ID：14597408
> 
> 赞同：0
> 
> 时间：2013-01-30T05:38:16.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, interface, jquery-isotope

所以，我正在构建一个教育资源搜索引擎 Rails 应用程序。此应用程序将以块型布局显示结果（例如微积分视频），旨在利用[同位素](http://isotope.metafizzy.co/)（用于酷过滤/排序转换等）。

除了查询我们的数据库以获取适当的资源外，我们还通过他们的自定义搜索引擎 API 查询 Google。最重要的是，最终我们希望将一些广告块放置到网格视图中。

所以我的问题是，如何将查询数据库返回的@resources 与 Google 查询的 JSON 结果以及最终与广告结合起来？我想这样做是为了使结果视图（search.html.erb）尽可能干净。此外，我希望能够对所有结果进行排序/过滤。也就是说，我希望能够将 ActiveRecord 结果与 Google 查询结果合并。这也将允许我执行以下操作：

（Boxx 是我正在考虑的通用类）

```
<% @boxxes.each do |boxx| %>
    <div class=<%= boxx.type %>>
       <h2><%= boxx.title %></h2>
       <h3><%= boxx.description %></h3>
       ...
       ...
       ...
    </div>
<% end %> 
```

我的资源控制器在下面。基本上，我想将@resource 与谷歌查询的结果组合成一个具有通用接口的可枚举，并且我可以根据用户指定的排序类型进行排序。

解决此问题的最佳方法是什么？我是否应该在控制器底部创建一个 Boxx 类并能够使用资源、谷歌 JSON 或广告对其进行初始化？然后我可以保留一个类型变量，然后能够将它们全部排序？

这是我的资源控制器

```
require 'will_paginate/array'

class ResourcesController < ApplicationController
  def index
      @resources = Resource.all
  end

  def create

    # Usability concern here... need to make sure that they are redirected back here once they log in or something
    if current_user == nil
      flash[:alert] = "You must log in to submit a resource!"
      redirect_to resources_path
      return
    else
      params[:resource][:user_id] = current_user.id
    end

    # Check to see if this resource unique
    params[:resource][:link] = Post::URI.clean(params[:resource][:link])
    if unique_link?(params[:resource][:link])
      @resource = Resource.new(params[:resource])
      @resource[:youtubeID] = self.isYoutube(@resource[:link])
      @resource.save
    else
      flash[:alert] = "This resource has already been added!"
    end
    redirect_to resources_path
  end

  def vote
    value = params[:type] == "up" ? 1 : -1
    @resource = Resource.find(params[:id])
    @resource.add_or_update_evaluation(:votes, value, current_user)
    respond_to do |format|  
        format.html { redirect_to :back, notice: "Thank you for voting" }  
        format.json { render :status=>200, :json=>{:success=>true}}  
    end
  end

  def isYoutube(youtube_url)
    regex = %r{http://www.youtube.com}
    if youtube_url[regex]
      youtube_url[/^.*((v\/)|(embed\/)|(watch\?))\??v?=?([^\&\?]*).*/]
      youtube_id = $5
      thumbnail_Link = "http://img.youtube.com/vi/#{youtube_id}/1.jpg"
    else
      thumbnail_Link = nil
    end
    thumbnail_Link
  end

  def unique_link?(url)
    Resource.find_by_link(url) == nil
  end

  def search
     @resource = Resource.full_search(params[:q])
   #  raise params.to_s
     @resource = @resource.reject!{|r| !r.media_type.eql? params[:filter][0][:media_type].downcase } if params[:filter] && !params[:filter][0][:media_type].blank?

     if params[:filter] 
      case params[:filter][0][:sort].downcase 
      when 'newest'
         then @resource = @resource.sort_by{|r| r.created_at}
      when 'votes'
         then @resource = @resource.sort_by!{|r| r.reputation_for(:votes).to_i}.reverse
      else
      end
     end

     @resource = @resource.paginate(:page => (params[:page] || 1), :per_page => 15)   
  end 

  def google(q, filter)
    # Authenticating into Google's API
    client = Google::APIClient.new(:key => 'secret', :authorization => nil)

    # Discover the Custom Search API
    search = client.discovered_api('customsearch')

    # Search Google CSE
    response = client.execute(
      :api_method => search.cse.list,
      :parameters => {
        'q' => "#{q} #{filter}",
        'key' => 'secret',
        'cx' => 'secret'
      }
    )

    # Decode the results
    results = ActiveSupport::JSON.decode(response.body, {:symbolize_names => true})

    # Return an empty array if Google CSE limit has been met.
    results["items"] == nil ? [] : results["items"]

  end

  def make_boxxes(resources, google_results, ads)

  end

end 
```

编辑#1：等等，可以做一个 GoogleResult 类，然后做

```
@items = @resources | google_results 
```

?

因为我可以让 GoogleResult 遵循与 Resources 相同的界面。但是那我该如何对它们进行排序呢？嗯……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:38:16.097

我通过阅读“Designing Helpers in Ruby on Rails”找到了我需要的东西

[http://techspry.com/ruby_and_rails/designing-helpers-in-ruby-on-rails/](http://techspry.com/ruby_and_rails/designing-helpers-in-ruby-on-rails/)

# php - 使用 php 使用图像代码在 img 标签中显示图像

> ID：14597409
> 
> 赞同：2
> 
> 时间：2013-01-30T05:38:22.550
> 
> 标签：php, html, image

我想使用图像代码在我的网页中显示图像。我是这项活动的新手。有人可以指导我吗？我的图像代码如下：

```
"ffd8ffe0 00104a46 49460001 01000001 00010000 ffe10058 45786966 00004d4d 002a0000 00080002 01120003 00000001 00010000 87690004 00000001 00000026 00000000 0003a001 00030000 00010001 0000a002 00040000 00010000 00b7a003 00040000 00010000 01130000 0000ffdb 0043001f 15171b17 131f1b19 1b23211f 252f4e32 2f2b2b2f 5f444838 4e706376 746e636d 6b7c8cb2 977c84a9 866b6d9b d39da9b8 bec8cac8 7895dbea d9c2e9b2 c4c8c0ff db004301 2123232f 292f5b32 325bc080 6d80c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 ffc00011 08011300 b7030122 00021101 031101ff c4001f00 00010501 01010101 01000000 00000000 00010203 04050607 08090a0b ffc400b5 10000201 03030204 03050504 04000001 7d010203 00041105 12213141 06135161 07227114 328191a1 082342b1 c11552d1 f0243362 7282090a 16171819 1a252627 28292a34 35363738 393a4344 45464748 494a5354 55565758 595a6364 65666768 696a7374 75767778 797a8384 85868788 898a9293 94959697 98999aa2 a3a4a5a6 a7a8a9aa b2b3b4b5 b6b7b8b9 bac2c3c4 c5c6c7c8 c9cad2d3 d4d5d6d7 d8d9dae1 e2e3e4e5 e6e7e8e9 eaf1f2f3 f4f5f6f7 f8f9faff c4001f01 00030101 01010101 01010100 00000000 00010203 04050607 08090a0b ffc400b5 11000201 02040403 04070504 04000102 77000102 03110405 21310612 41510761 71132232 81081442 91a1b1c1 09233352 f0156272 d10a1624 34e125f1 1718191a 26272829 2a353637 38393a43 44454647 48494a53 54555657 58595a63 64656667 68696a73 74757677 78797a82 83848586 8788898a 92939495 96979899 9aa2a3a4 a5a6a7a8 a9aab2b3 b4b5b6b7 b8b9bac2 c3c4c5c6 c7c8c9ca d2d3d4d5 d6d7d8d9 dae2e3e4 e5e6e7e8 e9eaf2f3 f4f5f6f7 f8f9faff da000c03 01000211 0311003f 00b19eb4 72693bd2 e715e69d e3581eb4 ca909183 9a8f7814 d1485cd2 37ad0181 a5c03d0d 03114f51 4ea60e09 a750c181 e2941cf7 a3ad3738 a0438e71 d6929339 a5e9400b 9a01a6e6 941a007e 683c814d cd283c52 1587034a 0d3334a0 d2b0587e 68cd3734 668b1361 f9a4cd37 34668b05 87834522 d1482c33 bd213413 8269339a b2ac3189 27148571 413f39a7 70453d8b d8414872 18114a69 2801cfd8 d0a78a5c 82829838 24502241 4845028a 421a2969 31834b4c 6252d068 a005a514 94aa6908 3bd28a3b d28a4214 518a052d 21011494 1349400f 5a2901a2 908818f2 28191cf6 a4ee28dc 73ed5a1a d843c1cd 3c74a691 8fa53802 7a1a0043 49d29d83 8a6edf5a 00543c11 41e0e69c 00148c28 175014b4 d534ea42 03cd140a 28010d14 1a4a6316 94525148 079a01a4 cd20340a c3c52d34 1aad772e d9ed9075 69013446 3ccec437 6572d9a6 d29a4a45 0e5a2901 a290885c 60f1498f ce9ed8a6 f5ab4688 07229ca7 d3a54609 cf14f4ea 6860d0f3 4de69dda 9bda9225 0a2918f1 4134839a 63105283 4838cd28 a062e697 3c52639a 5c5210d2 69334a45 25318b9a 5078a402 940a0426 6968c669 39a0082d e6f32ee7 50785c01 f866a0b8 491f5588 81903047 3d81a7d8 41b1e57d c4e58afd 79eb52a7 3a931fee c607eb5b 68a4edd8 c2cdc55c 75fcbe55 b120f3b8 0fd7ff00 ad56322a 9ea51f99 0280c00d c3fc2ad2 a954504e 480013eb 59b4b951 6afccc70 eb4520eb 456650d6 19cd3706 9f9eb484 815450d0 bcd39570 734020d2 64f6a007 938a4269 393d69b9 228b0580 9eb403c0 34d39c9a 51ca914c ab0a4e68 14514843 bb538532 941a4215 864532a4 a611834d 02014ea6 d3a860c5 a46e067d 28a493fd 5b7fba68 5b8886cf 3f664cf5 6c93f9d3 6dce6f2e 5bdd47e9 4eb5c1b5 888fee8a 65972666 fef486b4 7f688ec3 af8e215f f7d6ad1e f54efcfe e93feba0 ab879a99 7c2817c4 c41d68a0 75a2a0b1 99c9a08a 4e99a0e4 1eb4ca17 818a3238 a6d2d301 770a0e08 a6d0093c 668b0584 6e99a14f 38a18522 f514c7d0 9074a314 8bde9d52 2128a5a3 140828eb 45250014 b4845283 400a2834 8294d211 4d924b46 2f082f0f 564f4fa5 436734cd 16c8a3c9 c925d8f0 2af5c36d b790e7f8 4d4361ff 001e71e3 be7f9d6e a5eedda3 2e5f7ac9 8b1db664 124ce646 1d07402a da93c834 c14f5ac6 4dbdcd2c 96c263e6 a29d8ef4 5485c889 c838a652 b37b5039 15668252 e6942123 ad326262 85dc63e5 19e685ae 826d21a5 f3208d7a fde6f614 bbf32151 d57a9f4a ab14a61b 27b86199 246e0ff9 fc6acda2 05b6539c 96f989f5 26b4946c 8ce33bb1 dcfad006 0d29e28a 8351475a 7d3053aa 5898b40a 2814085a 4a534948 418a08a0 52d031bd 29683473 4c0af7c0 1b39323a 723eb4b6 b188ed90 01d464fd 4d33516f f4461dc9 02ac0015 40ec062a fec5884b df147515 20a881e6 9e1866a1 a2da2414 535ba0c5 1524d880 f24d3929 31c93403 5668c93a 552d565d b6e101e5 cfe82ae0 358faa49 bee76f64 18aba4af 230aaed1 2179d9e0 8e2fe14c fe35b501 06de323a 6d1fcab0 2b5f4e94 3da85279 4e3f0ada ac74d0ca 8cbdeb32 c1a4cd29 39a415ce 760a29c0 d3694526 0c7d0290 1a514891 dda9b4e1 4d348414 b494b40c 4a28a298 152ffe6f 253fbd20 ab2dcd56 b9e6f6d9 7d096ff3 f9559356 f644c7e2 6369d494 f032054b 2d8f4e94 50bc5150 410f7a43 9a53de92 acd00356 1ccfbe67 7fef126b 6663b627 6f4526b0 eba28add 9cb887b2 12ac5a4f e44d93f7 4f06abd1 5b357563 993b3ba3 7f208c83 c5159f63 74001148 78fe127b 7b5680eb 5c928b8b 3d184d4d 5c5a052d 15050a29 d4d155cd d2457322 4a768c0d bc53516f 622524b7 2d8a0d41 f6cb6c67 ce5fd6a4 49125526 360c3da9 38b5ba12 927b31d4 52640ea6 96914145 14500546 f9b535ff 0062327f cfe7564d 568b9d46 63fdd503 f9559357 3e84c3ab 129ebd29 94e4a865 b245eb45 20eb4549 2447ad25 29ef4559 64178716 b21f6c7e b58b5b37 fc5a3fe1 fceb1aba a8ec71e2 3e20a28a 2b539c2b 42cef318 8e53c766 359f4b53 28a92b32 e1371774 7418a2b3 6cefb601 1cc72bd8 fa569020 ae41c83d 08ae4945 c59db09a 9a1b2c82 289a43fc 23f3ac49 64695cbb 9c935a5a 993f65e3 a6e19fd6 b3a011b4 ca262c10 f04af5ad e8a56b9c f5dbbd88 aa48a578 5c3a1c11 51d15b1c fb1b16ed 3dcc8934 80246b92 00ee7a55 ca8ad062 d2218c7c a2a5ae19 bbb3be0a c828a08a 31525952 d399ee5f d5f1fcea cd56d3f2 6066fef3 93564d5c fe2269fc 2253969b 4e5a865b 1e28a406 8a449193 cd148472 68ab2caf a87fc7a3 fe1fceb1 eb66f866 ce4fc3f9 d63574d2 f84e2c47 c4145145 6a601453 954b3055 0493d00a b8b64b1a 6fb87c01 d8526d22 a3072d8a 35620bb9 200429c8 f43d2a39 4a17cc6a 557d09cd 4745935a 8aee2f42 dcb7cf2c 65191307 eb55475a 2b52d6d2 17b552cb 92dce7d2 a5b5045a 52a8ccc7 fbedf5a7 40a1e644 6ce1980e 2a5bcb66 82439e54 9e0fad59 b1b35788 c920fbdf 7483c8a1 c925708c 1b958d25 50a00030 070297bd 26ee9eb4 a01cf35c 4ced0351 cceb1c4c cc71c1eb 505edf2d bfc89f34 9fa0ac87 91a4625d 8927d6b6 8526f566 33aa9688 d3b1b885 2048cbe1 8f6c1f5a b84562d9 297bb8c0 3d0e7f2a da345549 3d0aa326 d6a369cb 4def4e5a c99b31e2 8a051522 233d4d21 14eee692 a8a2bddf 36b20f6f eb58d5b7 723f7127 fba6b12b a68ec71e 23e20a5a 4a9ada3f 36e114f4 cf3f4ad9 e86095dd 8bd6b12d b41e749f 788cfd07 a5519ee1 e76cb1e3 b0ab3a9c 80b2a03c af26a8d6 7057f799 ad495bdc 42514558 86d2594f dd2abea6 adb4b732 49bd8af5 66d2e9e0 61ce533c 8a5bdb71 038dbf74 8fd6aad1 a490f583 3a170b2a 00406523 f3a6c508 8576a93b 3b03dbf1 a8f4f7df 68a3392b c1a65c5f a43f2a0d edfa0ae4 e595dc51 d9cd1b73 32d9c05c 93803b9a a571a905 f9201b9b fbddaa93 49717920 4c96cf45 1d05695a 59adbf27 e693d7d3 e955c918 6b2239dc f48ec52f b05d4ca6 520658e4 863834c9 6c64862f 31caf500 01cd6e0e 473552f9 4b889077 9067e94e 355b7625 d2495c2d ad52d94e 0ee63d49 a9a9cdde 92b16db7 76744524 ac86914e 02928148 a1c33452 8e68a421 87a9a4a5 ef495450 c9c66171 fec9fe55 855bec32 8c3d462b 00d7451d 99c988dd 0956f4d0 0dce4f65 3552ad69 fccac338 ca919ad6 5b18c3e2 4433bf99 33bfa926 a3a5a4aa 25bbb2d5 82a35c80 e33dc7d6 b56b1219 1a2903af 515b1e6a 08c3b305 52323358 554ee755 092b5826 89668ca3 7e07d0d6 52a886e7 6ccb900e 1aaec9a8 c438452d fa551b99 84f26fdb b4e31d69 d3525a32 6b4a0f55 b8095a16 758643b5 b8cfa8a6 22867019 c20ee4d3 6ad595aa 5c87dcc4 15c74ad5 b495cc12 72762f5a c96902e2 39173dc9 ea6a7fb4 c19ff5c9 ff007d55 5fecc87f bcff00a5 4173a734 519911b7 28ec7ad7 35a127b9 d379c56c 69adcc1d e64ffbe8 526a1f68 b758de30 5075debc fe07fcf3 5cfd5cb4 d4ee2d57 cb0c248b bc6e323f fad5a2a4 a2ee8c9d 5bee6a45 2f9f0972 9b1c1c36 3a13ed4e a8e2984d 1aba26c5 3d17d29e 2b09ee75 4360a050 692a4b24 534522d1 52219de8 a3bd1545 0b58128d b2b2fa13 5bd59175 11379281 eedfd6b7 a2f739b1 0ae910c0 9e6cc89e a715a6d1 088ccca3 00a71ec4 0aaf6701 570ec391 b48fa1ab 1a84de5c 2507de7e 3e82aa4d b92489a7 1518b6cc 8a28a2b6 39829c58 9c64938e 29b45001 45153456 d2cbf754 e3d4f028 ba5b8d26 f6220093 81d6b66c adbc88be 61f337de f6a6dad9 2c243b7c cffa0ab7 5cd52a5f 447552a5 cbab1401 e9f9d2fd 69052d73 9b19f3e9 9be5cc4c 154f507b 532dacd1 6ea4493e 70807b73 5a847a55 3b6e6e2e 5bfdbc56 f1a92716 64e9c799 163000c0 1c519a28 c5646e19 a438a28c 500286a2 900a281d 83b9a28e e68a002a 9cd1e6f5 b8fbf11f e5572a29 07fa4c4d fef0fd2a e0eccce6 ae84b5c1 b78ce39d b8fcab3e 7dd737e5 01efb47b 015a36e3 623274da c40fa75a a48047aa e3b127f5 15a45ead 99cd7bb1 45c16f12 c7b0202b efdea336 5013f731 f426acd2 1acd49f7 36e48f63 1ae1424e caabb403 c0a2081e 77c2f4ee 7d29f7ae b25c92a7 20719f5a d1b6458e dd00ee32 4d744a7c b1b9c90a 6a536848 ad618ba2 ee3ea79a 9e929472 2b99b6f7 3b14525a 0e14a29a 29d50028 a514de94 aa726810 f1daa958 730bbff7 a426adbb 011b927a 026abd82 e2ca3f7c 9fd6aa3a 4599fda4 4d494360 52039a46 a2d28008 3494e5e2 93062628 a0f5a280 1a7a9a2a a6268f88 e5dc3d1c 7f5a5fb4 4e3ac00f fbad5a72 76279fba 2d66908c 907d0e6a b7da64ff 009f739f f7850679 cf48957f de6cff00 2a395873 a2c10a85 9c9c0c73 9f6acf83 371a8194 0c2af3fe 1523c4f3 1fdf4a48 feea8c0a 9e32912e d45c0abf 857990d3 9357d89b 35535079 950041f2 1eac2a7f 347a5233 864618ea 08a88e8e e5cd5d59 18b566de f1a11b48 dcbe9e95 098641d5 1bf2a4f2 dffba7f2 aeb766ac ce14e517 746bc132 ce9b973e 98352838 ac9b713c 526515bd c1e86b44 4a48e460 d734e167 a1db4ea7 32d49c52 d42251e9 4e128f4a cec5b64a 0668c106 98251e94 a65048e2 9598ae32 e8edb694 ff00b247 f4a75b8d b6f10ff6 4532eff7 d0322705 b1d6a50e a1400380 3155f66c 47dab8d7 e4914d07 9a4de092 68dc3b52 b1aa1f4e 53cd37b0 3477a404 87ad1499 cd148433 68c9e28d a3d294f5 345318dd 83d28d83 d29d4517 01bb07a5 2141e94f a29dc08f 62fa5284 5f4a0f06 9475a63b 06c5f4a4 283d29c2 834ae2b0 cd8be94b b17d2945 2d1701bb 07a53c22 fa525381 a183008b e94bb578 e294506a 4914aaed 1c523801 09c529fb b4c90fca 0508490d c01da9b8 a70e6931 806a8d07 039e290f 5a13ad29 eb48428a 28145021 6928a290 05145140 c28a28a6 21ac2928 a299438f 6a0d1452 1094a28a 2980a00a 3bd14548 870a5345 14842f6a 8dbef0fa 51453408 41d283d0 d1453281 7a5068a2 80145145 14847fff d9" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:46:58.990

First let's strip spaces from your 'image code':

```
$hex =  preg_replace('/[\s\W]+/','',$image_code); 
```

Convert the HEX string to binary:

```
$bin = pack("H*", $hex); 
```

you can use `$bin = hex2bin($hex)` instead which is available since PHP 5.4.

Save it to disk:

```
 file_put_contents("file.jpg", $bin); 
```

If you want to print image to a visitor in IMG tag you need to set the right header. Here's the full code will fit your request:

```
<?php

$res = "ffd8ffe0 00104a46 49460001 01000001 00010000 ffe10058 45786966 00004d4d 002a0000 00080002 01120003 00000001 00010000 87690004 00000001 00000026 00000000 0003a001 00030000 00010001 0000a002 00040000 00010000 00b7a003 00040000 00010000 01130000 0000ffdb 0043001f 15171b17 131f1b19 1b23211f 252f4e32 2f2b2b2f 5f444838 4e706376 746e636d 6b7c8cb2 977c84a9 866b6d9b d39da9b8 bec8cac8 7895dbea d9c2e9b2 c4c8c0ff db004301 2123232f 292f5b32 325bc080 6d80c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 c0c0c0c0 ffc00011 08011300 b7030122 00021101 031101ff c4001f00 00010501 01010101 01000000 00000000 00010203 04050607 08090a0b ffc400b5 10000201 03030204 03050504 04000001 7d010203 00041105 12213141 06135161 07227114 328191a1 082342b1 c11552d1 f0243362 7282090a 16171819 1a252627 28292a34 35363738 393a4344 45464748 494a5354 55565758 595a6364 65666768 696a7374 75767778 797a8384 85868788 898a9293 94959697 98999aa2 a3a4a5a6 a7a8a9aa b2b3b4b5 b6b7b8b9 bac2c3c4 c5c6c7c8 c9cad2d3 d4d5d6d7 d8d9dae1 e2e3e4e5 e6e7e8e9 eaf1f2f3 f4f5f6f7 f8f9faff c4001f01 00030101 01010101 01010100 00000000 00010203 04050607 08090a0b ffc400b5 11000201 02040403 04070504 04000102 77000102 03110405 21310612 41510761 71132232 81081442 91a1b1c1 09233352 f0156272 d10a1624 34e125f1 1718191a 26272829 2a353637 38393a43 44454647 48494a53 54555657 58595a63 64656667 68696a73 74757677 78797a82 83848586 8788898a 92939495 96979899 9aa2a3a4 a5a6a7a8 a9aab2b3 b4b5b6b7 b8b9bac2 c3c4c5c6 c7c8c9ca d2d3d4d5 d6d7d8d9 dae2e3e4 e5e6e7e8 e9eaf2f3 f4f5f6f7 f8f9faff da000c03 01000211 0311003f 00b19eb4 72693bd2 e715e69d e3581eb4 ca909183 9a8f7814 d1485cd2 37ad0181 a5c03d0d 03114f51 4ea60e09 a750c181 e2941cf7 a3ad3738 a0438e71 d6929339 a5e9400b 9a01a6e6 941a007e 683c814d cd283c52 1587034a 0d3334a0 d2b0587e 68cd3734 668b1361 f9a4cd37 34668b05 87834522 d1482c33 bd213413 8269339a b2ac3189 27148571 413f39a7 70453d8b d8414872 18114a69 2801cfd8 d0a78a5c 82829838 24502241 4845028a 421a2969 31834b4c 6252d068 a005a514 94aa6908 3bd28a3b d28a4214 518a052d 21011494 1349400f 5a2901a2 908818f2 28191cf6 a4ee28dc 73ed5a1a d843c1cd 3c74a691 8fa53802 7a1a0043 49d29d83 8a6edf5a 00543c11 41e0e69c 00148c28 175014b4 d534ea42 03cd140a 28010d14 1a4a6316 94525148 079a01a4 cd20340a c3c52d34 1aad772e d9ed9075 69013446 3ccec437 6572d9a6 d29a4a45 0e5a2901 a290885c 60f1498f ce9ed8a6 f5ab4688 07229ca7 d3a54609 cf14f4ea 6860d0f3 4de69dda 9bda9225 0a2918f1 4134839a 63105283 4838cd28 a062e697 3c52639a 5c5210d2 69334a45 25318b9a 5078a402 940a0426 6968c669 39a0082d e6f32ee7 50785c01 f866a0b8 491f5588 81903047 3d81a7d8 41b1e57d c4e58afd 79eb52a7 3a931fee c607eb5b 68a4edd8 c2cdc55c 75fcbe55 b120f3b8 0fd7ff00 ad56322a 9ea51f99 0280c00d c3fc2ad2 a954504e 480013eb 59b4b951 6afccc70 eb4520eb 456650d6 19cd3706 9f9eb484 815450d0 bcd39570 734020d2 64f6a007 938a4269 393d69b9 228b0580 9eb403c0 34d39c9a 51ca914c ab0a4e68 14514843 bb538532 941a4215 864532a4 a611834d 02014ea6 d3a860c5 a46e067d 28a493fd 5b7fba68 5b8886cf 3f664cf5 6c93f9d3 6dce6f2e 5bdd47e9 4eb5c1b5 888fee8a 65972666 fef486b4 7f688ec3 af8e215f f7d6ad1e f54efcfe e93feba0 ab879a99 7c2817c4 c41d68a0 75a2a0b1 99c9a08a 4e99a0e4 1eb4ca17 818a3238 a6d2d301 770a0e08 a6d0093c 668b0584 6e99a14f 38a18522 f514c7d0 9074a314 8bde9d52 2128a5a3 140828eb 45250014 b4845283 400a2834 8294d211 4d924b46 2f082f0f 564f4fa5 436734cd 16c8a3c9 c925d8f0 2af5c36d b790e7f8 4d4361ff 001e71e3 be7f9d6e a5eedda3 2e5f7ac9 8b1db664 124ce646 1d07402a da93c834 c14f5ac6 4dbdcd2c 96c263e6 a29d8ef4 5485c889 c838a652 b37b5039 15668252 e6942123 ad326262 85dc63e5 19e685ae 826d21a5 f3208d7a fde6f614 bbf32151 d57a9f4a ab14a61b 27b86199 246e0ff9 fc6acda2 05b6539c 96f989f5 26b4946c 8ce33bb1 dcfad006 0d29e28a 8351475a 7d3053aa 5898b40a 2814085a 4a534948 418a08a0 52d031bd 29683473 4c0af7c0 1b39323a 723eb4b6 b188ed90 01d464fd 4d33516f f4461dc9 02ac0015 40ec062a fec5884b df147515 20a881e6 9e1866a1 a2da2414 535ba0c5 1524d880 f24d3929 31c93403 5668c93a 552d565d b6e101e5 cfe82ae0 358faa49 bee76f64 18aba4af 230aaed1 2179d9e0 8e2fe14c fe35b501 06de323a 6d1fcab0 2b5f4e94 3da85279 4e3f0ada ac74d0ca 8cbdeb32 c1a4cd29 39a415ce 760a29c0 d3694526 0c7d0290 1a514891 dda9b4e1 4d348414 b494b40c 4a28a298 152ffe6f 253fbd20 ab2dcd56 b9e6f6d9 7d096ff3 f9559356 f644c7e2 6369d494 f032054b 2d8f4e94 50bc5150 410f7a43 9a53de92 acd00356 1ccfbe67 7fef126b 6663b627 6f4526b0 eba28add 9cb887b2 12ac5a4f e44d93f7 4f06abd1 5b357563 993b3ba3 7f208c83 c5159f63 74001148 78fe127b 7b5680eb 5c928b8b 3d184d4d 5c5a052d 15050a29 d4d155cd d2457322 4a768c0d bc53516f 622524b7 2d8a0d41 f6cb6c67 ce5fd6a4 49125526 360c3da9 38b5ba12 927b31d4 52640ea6 96914145 14500546 f9b535ff 0062327f cfe7564d 568b9d46 63fdd503 f9559357 3e84c3ab 129ebd29 94e4a865 b245eb45 20eb4549 2447ad25 29ef4559 64178716 b21f6c7e b58b5b37 fc5a3fe1 fceb1aba a8ec71e2 3e20a28a 2b539c2b 42cef318 8e53c766 359f4b53 28a92b32 e1371774 7418a2b3 6cefb601 1cc72bd8 fa569020 ae41c83d 08ae4945 c59db09a 9a1b2c82 289a43fc 23f3ac49 64695cbb 9c935a5a 993f65e3 a6e19fd6 b3a011b4 ca262c10 f04af5ad e8a56b9c f5dbbd88 aa48a578 5c3a1c11 51d15b1c fb1b16ed 3dcc8934 80246b92 00ee7a55 ca8ad062 d2218c7c a2a5ae19 bbb3be0a c828a08a 31525952 d399ee5f d5f1fcea cd56d3f2 6066fef3 93564d5c fe2269fc 2253969b 4e5a865b 1e28a406 8a449193 cd148472 68ab2caf a87fc7a3 fe1fceb1 eb66f866 ce4fc3f9 d63574d2 f84e2c47 c4145145 6a601453 954b3055 0493d00a b8b64b1a 6fb87c01 d8526d22 a3072d8a 35620bb9 200429c8 f43d2a39 4a17cc6a 557d09cd 4745935a 8aee2f42 dcb7cf2c 65191307 eb55475a 2b52d6d2 17b552cb 92dce7d2 a5b5045a 52a8ccc7 fbedf5a7 40a1e644 6ce1980e 2a5bcb66 82439e54 9e0fad59 b1b35788 c920fbdf 7483c8a1 c925708c 1b958d25 50a00030 070297bd 26ee9eb4 a01cf35c 4ced0351 cceb1c4c cc71c1eb 505edf2d bfc89f34 9fa0ac87 91a4625d 8927d6b6 8526f566 33aa9688 d3b1b885 2048cbe1 8f6c1f5a b84562d9 297bb8c0 3d0e7f2a da345549 3d0aa326 d6a369cb 4def4e5a c99b31e2 8a051522 233d4d21 14eee692 a8a2bddf 36b20f6f eb58d5b7 723f7127 fba6b12b a68ec71e 23e20a5a 4a9ada3f 36e114f4 cf3f4ad9 e86095dd 8bd6b12d b41e749f 788cfd07 a5519ee1 e76cb1e3 b0ab3a9c 80b2a03c af26a8d6 7057f799 ad495bdc 42514558 86d2594f dd2abea6 adb4b732 49bd8af5 66d2e9e0 61ce533c 8a5bdb71 038dbf74 8fd6aad1 a490f583 3a170b2a 00406523 f3a6c508 8576a93b 3b03dbf1 a8f4f7df 68a3392b c1a65c5f a43f2a0d edfa0ae4 e595dc51 d9cd1b73 32d9c05c 93803b9a a571a905 f9201b9b fbddaa93 49717920 4c96cf45 1d05695a 59adbf27 e693d7d3 e955c918 6b2239dc f48ec52f b05d4ca6 520658e4 863834c9 6c64862f 31caf500 01cd6e0e 473552f9 4b889077 9067e94e 355b7625 d2495c2d ad52d94e 0ee63d49 a9a9cdde 92b16db7 76744524 ac86914e 02928148 a1c33452 8e68a421 87a9a4a5 ef495450 c9c66171 fec9fe55 855bec32 8c3d462b 00d7451d 99c988dd 0956f4d0 0dce4f65 3552ad69 fccac338 ca919ad6 5b18c3e2 4433bf99 33bfa926 a3a5a4aa 25bbb2d5 82a35c80 e33dc7d6 b56b1219 1a2903af 515b1e6a 08c3b305 52323358 554ee755 092b5826 89668ca3 7e07d0d6 52a886e7 6ccb900e 1aaec9a8 c438452d fa551b99 84f26fdb b4e31d69 d3525a32 6b4a0f55 b8095a16 758643b5 b8cfa8a6 22867019 c20ee4d3 6ad595aa 5c87dcc4 15c74ad5 b495cc12 72762f5a c96902e2 39173dc9 ea6a7fb4 c19ff5c9 ff007d55 5fecc87f bcff00a5 4173a734 519911b7 28ec7ad7 35a127b9 d379c56c 69adcc1d e64ffbe8 526a1f68 b758de30 5075debc fe07fcf3 5cfd5cb4 d4ee2d57 cb0c248b bc6e323f fad5a2a4 a2ee8c9d 5bee6a45 2f9f0972 9b1c1c36 3a13ed4e a8e2984d 1aba26c5 3d17d29e 2b09ee75 4360a050 692a4b24 534522d1 52219de8 a3bd1545 0b58128d b2b2fa13 5bd59175 11379281 eedfd6b7 a2f739b1 0ae910c0 9e6cc89e a715a6d1 088ccca3 00a71ec4 0aaf6701 570ec391 b48fa1ab 1a84de5c 2507de7e 3e82aa4d b92489a7 1518b6cc 8a28a2b6 39829c58 9c64938e 29b45001 45153456 d2cbf754 e3d4f028 ba5b8d26 f6220093 81d6b66c adbc88be 61f337de f6a6dad9 2c243b7c cffa0ab7 5cd52a5f 447552a5 cbab1401 e9f9d2fd 69052d73 9b19f3e9 9be5cc4c 154f507b 532dacd1 6ea4493e 70807b73 5a847a55 3b6e6e2e 5bfdbc56 f1a92716 64e9c799 163000c0 1c519a28 c5646e19 a438a28c 500286a2 900a281d 83b9a28e e68a002a 9cd1e6f5 b8fbf11f e5572a29 07fa4c4d fef0fd2a e0eccce6 ae84b5c1 b78ce39d b8fcab3e 7dd737e5 01efb47b 015a36e3 623274da c40fa75a a48047aa e3b127f5 15a45ead 99cd7bb1 45c16f12 c7b0202b efdea336 5013f731 f426acd2 1acd49f7 36e48f63 1ae1424e caabb403 c0a2081e 77c2f4ee 7d29f7ae b25c92a7 20719f5a d1b6458e dd00ee32 4d744a7c b1b9c90a 6a536848 ad618ba2 ee3ea79a 9e929472 2b99b6f7 3b14525a 0e14a29a 29d50028 a514de94 aa726810 f1daa958 730bbff7 a426adbb 011b927a 026abd82 e2ca3f7c 9fd6aa3a 4599fda4 4d494360 52039a46 a2d28008 3494e5e2 93062628 a0f5a280 1a7a9a2a a6268f88 e5dc3d1c 7f5a5fb4 4e3ac00f fbad5a72 76279fba 2d66908c 907d0e6a b7da64ff 009f739f f7850679 cf48957f de6cff00 2a395873 a2c10a85 9c9c0c73 9f6acf83 371a8194 0c2af3fe 1523c4f3 1fdf4a48 feea8c0a 9e32912e d45c0abf 857990d3 9357d89b 35535079 950041f2 1eac2a7f 347a5233 864618ea 08a88e8e e5cd5d59 18b566de f1a11b48 dcbe9e95 098641d5 1bf2a4f2 dffba7f2 aeb766ac ce14e517 746bc132 ce9b973e 98352838 ac9b713c 526515bd c1e86b44 4a48e460 d734e167 a1db4ea7 32d49c52 d42251e9 4e128f4a cec5b64a 0668c106 98251e94 a65048e2 9598ae32 e8edb694 ff00b247 f4a75b8d b6f10ff6 4532eff7 d0322705 b1d6a50e a1400380 3155f66c 47dab8d7 e4914d07 9a4de092 68dc3b52 b1aa1f4e 53cd37b0 3477a404 87ad1499 cd148433 68c9e28d a3d294f5 345318dd 83d28d83 d29d4517 01bb07a5 2141e94f a29dc08f 62fa5284 5f4a0f06 9475a63b 06c5f4a4 283d29c2 834ae2b0 cd8be94b b17d2945 2d1701bb 07a53c22 fa525381 a183008b e94bb578 e294506a 4914aaed 1c523801 09c529fb b4c90fca 0508490d c01da9b8 a70e6931 806a8d07 039e290f 5a13ad29 eb48428a 28145021 6928a290 05145140 c28a28a6 21ac2928 a299438f 6a0d1452 1094a28a 2980a00a 3bd14548 870a5345 14842f6a 8dbef0fa 51453408 41d283d0 d1453281 7a5068a2 80145145 14847fff d9";

$hex =  preg_replace('/[\s\W]+/','',$res);
$binary = pack("H*", $hex);
header( 'Content-Type: image/jpeg' );
print $binary;
?> 
```

# iphone - 减少应用程序大小 cos2d iOS

> ID：14597410
> 
> 赞同：1
> 
> 时间：2013-01-30T05:38:23.177
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我是 cos2d 的新手。我使用 Cocos2d 创建了一个应用程序。该应用程序运行良好，但问题是应用程序大小太大 350MB。这个应用程序中有很多图像。我使用了 png 和可能的 jpeg 图像。有许多大于 1 mb 的 png 图像。

有什么办法可以减少应用程序的大小。我已经尽可能减小了尺寸。有没有其他格式可以用来代替png？动画不多。png 仅用于透明目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:29:29.527

你的图片尺寸太大了。即使你把它们放在服务器上，然后下载它也需要时间来下载。

最好的选择是减小图像大小。可以帮助您做到这一点的几个网站是：-

[缩小图像尺寸](http://www.reduceimages.com/)

[压缩图像大小](http://how-to.wikia.com/wiki/How_to_reduce_the_file_size_of_a_PNG_file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:50:12.430

您可以将图像内容保留在您的服务器上，然后异步下载图像内容（这更多是先下载它）。如果有关卡，则首先下载初始关卡并在后台线程上下载剩余的关卡。您始终可以在启动时显示加载程序并显示一些帮助内容，同时数据被下载和缓存。

您可以使用[SDWebImage](https://github.com/rs/SDWebImage "SDWebImage")和其他库来使您的图像内容异步。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:32:14.497

虽然您的图片相当大，您应该尝试减少数量和大小，但您可以通过将 .png 打包成 pvr.ccz 文件来获得收益。有多种不同的程序可以做到这一点。我喜欢使用这里提供的 Texture Packer：http: [//www.codeandweb.com/texturepacker](http://www.codeandweb.com/texturepacker)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T12:28:48.450

尽管您的图像太大，但使用 png 文件没有问题，您可以使用 tinypng 将它们的大小减小 70 - 80%，并且不会损害您的图形。

*   [https://tinypng.com/](https://tinypng.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T15:46:39.093

你可以在我的帖子中找到一些关于[减少内存使用和包大小](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)的提示。

最重要的是使用 .pvr.ccz 格式的纹理图集，并尽可能将图像颜色深度降低到 16 位。完全避免使用 JPG，因为它们在 cocos2d 中加载速度非常慢。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-19T07:49:10.970

我现在通常编辑图像大小[https://resizeimage.io](https://resizeimage.io)，你试试看！

# javascript - 选择选项的删除方法不适用于所有浏览器（javascript）

> ID：14597413
> 
> 赞同：0
> 
> 时间：2013-01-30T05:38:50.513
> 
> 标签：javascript, dhtmlx

我正在使用 Dhtmlx 和 javascript，我需要删除所有选项，然后在选择框中添加选项。

我做的。但它不适用于所有浏览器，例如（mozila3.4）

```
var opts=orgFrmformsg.getOptions("msges");
var checkedRows = MsgSummary.getCheckedRows(0).split(",");
var v=opts.length;
while(v--){
    opts.remove(v);
} 
```

任何人都可以为此提供替代方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:06:59.307

请使用如下所述，

```
var opts = orgFrmformsg.getOptions("msges");        
        for(x=0;x<opts.length;x++){      
         if(opts[x].selected){       
           opts.remove(x);
         }
        } 
```

# android - 在eclipse模拟器中没有启动

> ID：14597414
> 
> 赞同：0
> 
> 时间：2013-01-30T05:39:09.853
> 
> 标签：android, emulation

我是安卓新手。我已经从 android 的官方网站下载了[适用于 windows 的 ADT Bundle](http://developer.android.com/sdk/index.html)，然后按照他们的指示我遵循了所有步骤，但是当我使用 Eclipse 启动 AVD 时，在启动弹出窗口中我得到了这个日志

```
Starting emulator for AVD 'TestAVD'
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
emulator: warning: opening audio output failed 
```

然后甚至我等了几个小时来启动模拟器，但它没有启动。我没有得到，我在哪里犯错。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:55:07.770

根据

**问题 41032** [模拟器无法创建上下文 0x3005](http://code.google.com/p/android/issues/detail?id=41032)您分配的内存比 512 尝试减少内存，然后运行 ​​AVD 它将起作用

# .net - ExceptionPolicy 与 ExceptionManager

> ID：14597417
> 
> 赞同：2
> 
> 时间：2013-01-30T05:39:19.090
> 
> 标签：.net, exception-handling, enterprise-library, enterprise-library-5, application-blocks

*Microsoft Enterprise Library 的exceptionpolicy*和*exceptionmanager*类有什么区别？我什至不知道*异常*管理器的存在！为什么有两个不同的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:39:18.267

**异常管理器存在**

[看到这个链接](http://msdn.microsoft.com/en-us/library/microsoft.solutions.btarn.shared.exceptionmanager%28v=BTS.10%29.aspx)

我更喜欢 ExceptionManger 来处理我的所有异常，因为我可以比较异常，根据异常策略启动进程，可以知道异常的类型，而 ExceptionPolicy 只给我一个成员函数来处理异常...

您还应该通过这些链接...

[1.ExceptionManager的成员](http://msdn.microsoft.com/en-in/library/microsoft.practices.enterpriselibrary.exceptionhandling.exceptionmanager_members.aspx)

[2\. ExceptionPolicy 的成员](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.exceptionhandling.exceptionpolicy_members.aspx)

[3\. 异常处理应用程序块介绍](http://msdn.microsoft.com/en-us/library/ff649923.aspx#intro_polocoes)

# ruby-on-rails - PostgreSQL 数据库和 Rails 3 应用程序中的列不存在错误

> ID：14597418
> 
> 赞同：1
> 
> 时间：2013-01-30T05:39:39.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, ruby-on-rails-3.2

尝试查询我的 PostgreSQL 数据库时出现以下错误。我可以在 pgAdmin 中查看表和所有列，甚至可以执行 select *，所以我知道表和列存在。对此的任何帮助将不胜感激。

这是我得到的错误：

```
PG::Error: ERROR:  column "fi_ase" does not exist 
```

这是相关表的架构。它是作为 Rails 3.2 应用程序的一部分通过迁移生成的。

```
create_table "certificates", :force => true do |t|
  t.integer  "profile_id"
  t.boolean  "FI_ASE"
  t.boolean  "FI_AME"
  t.boolean  "FI_INSTA"
  t.datetime "created_at",    :null => false
  t.datetime "updated_at",    :null => false
  t.boolean  "C_ASEL"
  t.boolean  "C_AMEL"
  t.boolean  "C_ASES"
  t.boolean  "C_AMES"
  t.boolean  "ATP_ASEL"
  t.boolean  "ATP_AMEL"
  t.boolean  "ATP_ASES"
  t.boolean  "ATP_AMES"
  t.boolean  "GI_Basic"
  t.boolean  "GI_Advanced"
  t.boolean  "GI_Instrument"
end 
```

这是我在 Rails 中的查询/方法：

```
def self.search(city, state, zip, *certs)
  query_obj = joins(:profile => [:addresses, :certificate])
  query_obj = query_obj.where("city like ?", "%#{city}%") unless city.blank?
  query_obj = query_obj.where("state = ?", state) unless state.blank?
  query_obj = query_obj.where("zip like ?", "%#{zip}%") unless zip.blank?
  query_obj = query_obj.where("FI_ASE = ?", true) unless certs[0].blank?

  query_obj
end 
```

直接在我的 pgAmin SQL 编辑器中运行以下 SQL 语句时，我得到了同样的错误：

```
select *
from contacts c
inner join profiles p on c.id = p.contact_id
inner join addresses a on p.id = a.profile_id
inner join certificates ct on p.id = ct.profile_id
where ct.FI_ASE = true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:16:12.087

Rails 在生成列名时会用双引号引起来。例如，当 PostgreSQL 看到它时，您的表的 CREATE TABLE 将如下所示：

```
create table "certificates" (
  -- ...
  "FI_ASE" boolean, 
```

当标识符被双引号引起来时，它是区分大小写的。但是，PostgreSQL 会将不带引号的标识符规范化为小写，所以当你这样说时：

```
query_obj.where("FI_ASE = ?", true) 
```

SQL 将显示为：

```
where FI_ASE = 't' 
```

但是，由于你`FI_ASE`的没有被引用，PostgreSQL 将把它看作：

```
where fi_ase = 't' 
```

但是，您的表没有`fi_ase`列，它有一个`FI_ASE`列。

既然我们知道出了什么问题，我们该如何解决呢？您可以一直手动引用列名：

```
where('"FI_ASE" = ?', true) 
```

或者你可以让 ActiveRecord 来做（但要确保你使用正确的大小写）：

```
where(:FI_ASE => true) 
```

或者最重要的是，使用小写的列名重新创建表，这样您就不必引用内容了。

# hdfs - HDFS 分区数据

> ID：14597419
> 
> 赞同：1
> 
> 时间：2013-01-30T05:39:41.133
> 
> 标签：hdfs, sharding

我在文本文件中有大量 DNS 日志数据 (TB)，其中每条记录的格式为

```
timestamp | resolvername | domainlookedfor | dns_answer 
```

在哪里，

```
timestamp       - time at which the record was logged
resolvername    - the dns resolver that served the end-user
domainlookedfor - domain that was looked for by the end user
dns_answer      - final dns resolution record of 'hostname -> ip address' 
```

截至目前，我已经`individual text files for every five minutes of logs`从各种`dns resolvers`. 因此，如果我想查看过去 10 天内包含主机名 say 的记录`www.google.com`，那么我将不得不扫描过去 10 天的全部数据（比如说 50GB），并且只过滤与域匹配的记录（让比如说 10MB 的数据）。所以很明显有大量的数据是从磁盘中不必要地读取的，并且需要很长时间才能得到结果。

为了改善这种情况，我正在考虑根据 对数据进行分区`domain name`，从而减少我的搜索空间。另外，我想保留基于时间分隔记录的概念（如果不是每 5 分钟，我希望每天都有一个文件）。

我能想到的一种简单方法是，

*   根据域名的哈希（或者可能是前两个字母）[domain_AC, domain_AF, domain_AI ... domain_ZZ] 存储记录，其中目录 domain_AC 将包含所有第一个字符为 A 和第二个字符的域的记录字符是 A 或 B 或 C。

*   在每个存储桶中，每天都会有一个单独的文件 [20130129, 20130130, ... ]

因此，要获取 的记录`www.google.com`，首先识别存储桶，然后根据日期范围，扫描相应的文件并仅过滤与 www.google.com 匹配的记录。

* * *

我的另一个要求是根据`resolvername`要回答的查询对记录进行分组，例如`get all the records by resolver 'x'`.

请让我知道是否有任何我应该考虑的重要细节以及解决此问题的任何其他已知方法。我很感激任何帮助。谢谢！

# html - 如何在 Windows 8 Metro 应用程序中重新排序（拖放）Listview 项目

> ID：14597426
> 
> 赞同：0
> 
> 时间：2013-01-30T05:40:35.887
> 
> 标签：html, jquery-mobile, windows-8

我如何重新排序（拖放以安排项目位置）在 Windows 8 Metro 应用程序（HTML 5/JavaScript）中列出视图项目，我有一个列表视图并且项目是从 SQLite 数据库绑定的，请分享一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:06:09.410

WinJS 中的 ListView 不支持拖放。您不太可能将鞋拔放在顶部。

我建议构建一个替代 UI。如果您的数据足够小（例如，不到几百个项目），您可以只使用标准布局，而不是 listView，并使用来自网络的 HTML 拖放技术。

# symfony - Symfony2 - @Assert\Email() 改变字段高度

> ID：14597431
> 
> 赞同：0
> 
> 时间：2013-01-30T05:41:02.853
> 
> 标签：symfony, constraints, assert, validation

我正在使用@Assert\Email 来验证一个电子邮件字段，但看起来它改变了字段的外观，即使它真的没有......尽管出于某种未知的原因，css 样式仍然存在（对我来说至少）该字段在高度上看起来更小。有没有办法避免这种情况？

例子：

![照片](../Images/9a72146fdbd9a900f191fd88b54eba5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:23:05.853

我最终使用了自定义正则表达式

```
 @Assert\Regex(pattern="/[a-zA-Z0-9\_\-]+[a-zA-Z0-9\.\_\-]*@([a-zA-Z0-9\_\-]+\.)+([a-zA-Z]{2,4}|travel|museum)$/") 
```

# installshield - 如果文件已经存在，则使用 installshield2009 防止覆盖文件

> ID：14597435
> 
> 赞同：0
> 
> 时间：2013-01-30T05:41:06.773
> 
> 标签：installshield, installshield-2009

在安装应用程序时，如果指定位置已经存在，我想防止覆盖我的数据库文件。由于我是使用 installshield 的新手，请指导。尝试将组件的 Never Overwrite 属性设置为 true 但在我的情况下不起作用，它仍在覆盖我的数据库文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T09:55:01.327

有可能将始终覆盖属性设置为在文件级别检查，您可以通过右键单击组件下的 db 文件然后单击属性菜单来检查。如果结果被选中，则将其设置为未选中。

# javascript - tokenInput ：如何使用 queryParam 传递附加参数

> ID：14597436
> 
> 赞同：2
> 
> 时间：2013-01-30T05:41:07.130
> 
> 标签：javascript, jquery, jquery-plugins, jquery-tokeninput

我正在使用 Jquery 令牌输入。我需要知道，如何使用 queryParam 传递附加参数。

**脚本 ：**

```
$("#demo-input").tokenInput("/MaterialService/GetMaterials",
{
    queryParam: 'q',
    tokenLimit: 1,
}); 
```

**控制器：**

```
[HttpGet]
public IQueryable<Property> GetMaterials(string q, String type)
{
    //Code for the function
} 
```

我需要访问服务控制器中的“GetMaterials”功能。在我的脚本中，我有 queryParam（即'q'）和另一个参数'type'

在调用服务控制器时，我需要如何将“类型”参数与 queryParam 一起传递

任何人都可以帮忙吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:04:39.070

你可以试试这个并反馈结果：

```
$("#demo-input").tokenInput("/MaterialService/GetMaterials?queryParam=q" + "&type=qq",
                { tokenLimit: 1, }); 
```

# c# - GridView内的文本框在UpdatePanel内的textchange事件未触发

> ID：14597438
> 
> 赞同：0
> 
> 时间：2013-01-30T05:41:23.090
> 
> 标签：c#, asp.net, updatepanel

我有一个带有 GridView 的 UpdatePanel。此 GridView 有一个模板列，它是一个文本框。问题是文本框不会触发 textchange 事件。

我哪里错了？

这是代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="updatepanelgridview.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:ScriptManager ID="scrManager" runat="server"> 
</asp:ScriptManager> 
<asp:UpdatePanel ID="updPnl" runat="server"> 
<ContentTemplate> 
<asp:GridView ID="grdNumber" runat="server"> 
<Columns> 
<asp:TemplateField> 
<ItemTemplate> 

<asp:TextBox ID="txtNumber" runat="server" OnTextChanged="TextBox1_TextChanged"  AutoPostBack="true"></asp:TextBox>
</ItemTemplate> 
</asp:TemplateField> 
</Columns> 

<Columns> 
<asp:TemplateField> 
<ItemTemplate> 
<asp:DropDownList ID="ddlNumber" runat="server" OnSelectedIndexChanged="ddlNumber_SelectedIndexChanged" AutoPostBack="true" > 

<asp:ListItem>One</asp:ListItem> 
<asp:ListItem>Two</asp:ListItem> 
<asp:ListItem>Three</asp:ListItem> 
<asp:ListItem>For</asp:ListItem> 
</asp:DropDownList> 

</ItemTemplate> 
</asp:TemplateField> 
</Columns> 
</asp:GridView> 
</ContentTemplate> 
</asp:UpdatePanel> 

    </div>
    </form>
</body>
</html> 
```

这是代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
namespace updatepanelgridview
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataTable dt = new DataTable();
                dt.Rows.Add();
                dt.Rows.Add();
                dt.Rows.Add();
                dt.Rows.Add();

                grdNumber.DataSource = dt;
                grdNumber.DataBind();
            }
        }

        protected void ddlNumber_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        protected void TextBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

在这里，我在第二列中使用了下拉列表，它可以正常工作，但是我的文本框 textchange 事件没有得到 fir 请建议我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:04:56.773

将更新面板的更新模式属性设置为始终。

```
<asp:UpdatePanel ID="updPnl" runat="server" UpdateMode="Always"> 
```

* * *

在 TextBox1_TextChanged 事件下的代码隐藏文件中，您可以使用 sender.text 属性获取最新值。

如果将 updateMode 设置为条件，在这种情况下，您需要添加触发器。

---------------------这是我尝试过的代码及其工作------

```
<%@ Page Title="About Us" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="About.aspx.cs" Inherits="About" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div>
        <asp:ScriptManager ID="scrManager" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="updPnl" runat="server" >

            <ContentTemplate>
                <asp:GridView ID="grdNumber" runat="server">
                    <Columns>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:TextBox ID="txtNumber" runat="server" OnTextChanged="TextBox1_TextChanged" AutoPostBack="true"></asp:TextBox>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <Columns>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:DropDownList ID="ddlNumber" runat="server" OnSelectedIndexChanged="ddlNumber_SelectedIndexChanged"
                                    AutoPostBack="true">
                                    <asp:ListItem>One</asp:ListItem>
                                    <asp:ListItem>Two</asp:ListItem>
                                    <asp:ListItem>Three</asp:ListItem>
                                    <asp:ListItem>For</asp:ListItem>
                                </asp:DropDownList>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

* * *

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class About : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataTable dt = new DataTable();
            dt.Rows.Add();
            dt.Rows.Add();
            dt.Rows.Add();
            dt.Rows.Add();

            grdNumber.DataSource = dt;
            grdNumber.DataBind();
        }
    }

    protected void ddlNumber_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void TextBox1_TextChanged(object sender, EventArgs e)
    {
        var value = (sender as TextBox).Text;
    }
} 
```

# php - .htaccess 不要让 php 文件在 jquery 上加载

> ID：14597442
> 
> 赞同：1
> 
> 时间：2013-01-30T05:41:50.113
> 
> 标签：php, javascript, jquery, .htaccess

大家好，我有一个`jquery.post`，我包含了一个 php 文件：

```
$.post('website/register/checks.php' 
```

当我执行函数时，数据会转到文件中，但我的 htaccess 中有一条规则：

```
RewriteRule p/(.*)/ index.php?p=$1 
```

并且因为这个而不是从 php 文件中获取信息，我将我的主页放在数据应该去的地方。有什么办法可以解决这个问题，让 jquery 正确传递数据？我需要制定规则或更改 htaccess 文件中的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:09:42.580

尝试将以下规则添加到您的 .htaccess：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这将导致`RewriteRule`仅处理与现有文件不匹配的 URL。所以`website/register/checks.php`会请求那个实际的文件，而`website/register/checks`会请求`index.php?p=website/register/checks`.

# javascript - javascript获取计算机名

> ID：14597444
> 
> 赞同：1
> 
> 时间：2013-01-30T05:42:01.393
> 
> 标签：javascript, computer-name

我正在尝试在 JavaScript 中获取客户端计算机名称，但我仍然无法找到它。这是我尝试过的 JavaScript 函数。

```
<script language="javascript" type="text/javascript">
        function GetComputerName() {
            try {
                var network = new ActiveXObject('WScript.Network');
                alert(network.computerName);
            }
            catch (e) {
                alert('a');
            }
        }
    </script> 
```

即使在 IE 中，此函数也没有返回计算机名称。

第二个函数也没有返回任何内容。

```
 <script type="application/javascript">
        function getip(json) {
            alert(json.ip); // alerts the ip address
        }
</script>

<script type="application/javascript" src="http://jsonip.appspot.com/?callback=getip"></script> 
```

# sql - 查找序列之间的缺失日期

> ID：14597448
> 
> 赞同：1
> 
> 时间：2013-01-30T05:42:18.087
> 
> 标签：sql, sql-server, tsql

我需要找到 12 月份之间的缺失差距并使用 SQL 查询来填补空白

我有以下查询，它需要 tweeking 因为它仍然不正确，这是我写的

```
CREATE TABLE #BenfitDim(MemberName varchar(30),Memberkey int,MemberEffectiveDate DATETIME,
    MemberTerminationDate DATETIME)

INSERT INTO #BenfitDim VALUES('tom',231,'2012-11-18','2012-11-23')
INSERT INTO #BenfitDim VALUES('tom',231,'2012-11-24','2012-12-12')
INSERT INTO #BenfitDim VALUES('tom',231,'2013-01-01','2999-12-12')
INSERT INTO #BenfitDim VALUES('jack',344,'2011-06-27','2012-12-07') 
INSERT INTO #BenfitDim VALUES('jack',344,'2012-12-01','2015-12-31')
INSERT INTO #BenfitDim VALUES('nick',243,'2012-12-01','2012-12-07')
INSERT INTO #BenfitDim VALUES('joy',234,'2012-12-08','2012-12-14')
INSERT INTO #BenfitDim VALUES('tim',364,'2012-12-25','2012-12-30')
INSERT INTO #BenfitDim VALUES('tim',364,'2013-01-15','2013-01-30')
INSERT INTO #BenfitDim VALUES('jerry',365,'2011-9-15','2012-12-31')
INSERT INTO #BenfitDim VALUES('jerry',365,'2013-01-15','2013-01-30')
INSERT INTO #BenfitDim VALUES('jerry',365,'2011-01-15','2012-01-30')

SELECT MemberKey,
       MemberName,
       DATEADD(DAY,1,T1.MemberTerminationDate)AS MemberEffectiveDate,
       DATEADD(DAY,-1,D.MemberEffectiveDate)AS MemberTerminationDate
FROM
       #BenfitDim AS T1 CROSS APPLY(
                                SELECT MIN(MemberEffectiveDate)AS MemberEffectiveDate
                                  FROM #BenfitDim AS T
                                  WHERE T.MemberEffectiveDate > T1.MemberEffectiveDate 
                                  AND T.MemberKey = T1.MemberKey)D
 WHERE DATEADD(DAY,1,T1.MemberTerminationDate) <>  D.MemberEffectiveDate 
```

执行后，您会发现缺少的序列，但仍然存在小问题。我们如何处理表中“jack”的重叠数据并正确获取缺失的序列。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:03:15.727

我认为下面的查询可以满足您的需求。对于每个成员资格记录，它都会获得下一个成员资格，下一个成员资格不会在第二天开始，并且没有重叠的成员资格。

和只需要获取下一条记录的日期，而不是所有未来的记录`MIN`。`GROUP BY`

```
SELECT      T1.MemberKey,
            T1.MemberName,
            DATEADD(DAY,1,T1.MemberTerminationDate) AS MemberEffectiveDate,
            MIN(DATEADD(DAY,-1,T2.MemberEffectiveDate)) AS MemberTerminationDate

-- current membership
FROM        #BenfitDim AS T1

-- later membership
INNER JOIN  #BenfitDim AS T2                    
ON          T2.MemberKey = T1.MemberKey         
AND         T2.MemberEffectiveDate > T1.MemberTerminationDate

-- no membership following next day or overlapping
WHERE       NOT EXISTS (
            SELECT  T3.MemberEffectiveDate,
                    T3.MemberTerminationDate
            FROM    #BenfitDim AS T3
            WHERE   T3.Memberkey = T1.Memberkey
            AND     (T3.MemberEffectiveDate = DATEADD(DAY,1,T1.MemberTerminationDate)
            OR      T3.MemberEffectiveDate < T1.MemberEffectiveDate
            AND     T3.MemberTerminationDate > T1.MemberEffectiveDate))

GROUP BY    T1.MemberKey,
            T1.MemberName,
            T1.MemberTerminationDate 
```

# iphone - 触摸时错误的精灵移动

> ID：14597451
> 
> 赞同：0
> 
> 时间：2013-01-30T05:42:33.557
> 
> 标签：iphone, objective-c, cocoa-touch, cocos2d-iphone

我的场景中有 20 个精灵，已添加到`NSMutableArray`. 我的问题是，当我将一个精灵拖到另一个上时，另一个也会移动。如何限制未触及的精灵的移动？

请帮我写代码（我是 Cocos2d 的新手）。

```
if( (self=[super init])) {

    collection=[[NSMutableArray alloc]init];

    CCLayer *base=[CCSprite spriteWithFile:@"Base.png"];
    base.position=ccp(512,384);
    [self addChild:base];

    x=0;
    for(int i=1;i<=7;i++)
    {
        CCSprite *hole=[CCSprite spriteWithFile:@"ball.png"];
        hole.position=ccp(140+x,318);
        hole.tag=i;
    [self addChild:hole];
        hole.visible=YES;
        [collection addObject:hole];
        x=x+75;
    }

    self.isTouchEnabled=YES;

}
return self;
 }
 -(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
 {
 NSLog(@"count:%i",[collection count]);
 UITouch *touch=[touches anyObject];
 CGPoint location=[touch locationInView:[touch view]];
 location=[[CCDirector sharedDirector]convertToGL:location];
 location=[self convertToNodeSpace:location];

for(CCSprite *s in collection)
{
   if(CGRectContainsPoint([s boundingBox], location))
    s.position=ccp(location.x,location.y);
    return;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:09:54.447

你可以这样做：

在 interface .h 文件中声明它

```
CCSprite *mSpriteOnHand;
CGPoint mLastPos; 
```

在 init 内部将其赋值为 nil。

```
mSpriteOnHand = nil; 
```

在 touchesBegan 方法中像这样检查

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    for(CCSprite *s in collection)
    {
        if(CGRectContainsPoint([s boundingBox], location))
        {
            mLastPos = s.position;
            s.position=ccp(location.x,location.y);

            mSpriteOnHand = s;
            break;
        }
    }

}

- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch=[touches anyObject];
    CGPoint location=[touch locationInView:[touch view]];
    location=[[CCDirector sharedDirector]convertToGL:location];
    location=[self convertToNodeSpace:location];

    if(mSpriteOnHand)
    {
        mSpriteOnHand.position = location;
    }
}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(mSpriteOnHand)
    {
         mSpriteOnHand.position = mLastPos;
         mSpriteOnHand = nil;
    }
} 
```

# python - python错误的解释器错误

> ID：14597452
> 
> 赞同：0
> 
> 时间：2013-01-30T05:42:34.590
> 
> 标签：python, sublimetext2

我正在尝试在我的 linux 机器上安装 Sublime Text 2，但我不知道如何运行 python 脚本来安装它。我对 linux 还很陌生，以前从未在 python 中编程过。我正在尝试使用 ./PackageSetup.py 运行 python 脚本 PackageSetup.py，但出现错误：

```
bash: ./PackageSetup.py: python: bad interpreter: No such file or directory 
```

不知道我必须做什么。我的机器上有python。我可以看出运行'python'的原因让我进入了控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:51:06.727

[据我所知，如果您在shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)中有拼写错误或错误，可能会发生这种问题。我看到了两种解决这个问题的方法：你可以尝试`PackageSetup.py`通过 python 调用，`python PackageSetup.py`或者你可以打开`PackageSetup.py`并尝试在 shebang 中找到问题，也许它需要是 python 解释器的完整路径，比如`/usr/bin/python`不仅仅是`python`.

顺便说一句，你为什么不尝试通过某种包管理器安装它 - 有一个基于[debian](http://www.webupd8.org/2011/03/sublime-text-2-ubuntu-ppa.html)的发行版的存储库，我很确定必须有其他发行版的存储库。

# java - 这是在java中进行深度复制以对内存进行基准测试的正确方法吗？

> ID：14597454
> 
> 赞同：0
> 
> 时间：2013-01-30T05:42:40.683
> 
> 标签：java, memory, benchmarking, deep-copy

由于 System.arraycopy() 和 clone() 只做浅拷贝，我想知道这种方法是否适用于做深拷贝。

```
ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
ObjectOutputStream oos = new ObjectOutputStream(bos);
long x=System.nanoTime();
oos.writeObject(fromArray);
oos.flush();
ByteArrayInputStream bin = new ByteArrayInputStream(bos.toByteArray());
ObjectInputStream  ois = new ObjectInputStream(bin);
Object o=ois.readObject();          
double timeTaken= (System.nanoTime()-x)/1000000000.0; 
```

1）变量 timeTaken 会给我做深拷贝的实际时间吗？

2）如果我传递数据说一个大小为 1MB 的数组，例如

```
byte[] fromArray = new byte[1024*1024]; 
```

并以 Mb/sec 为单位计算吞吐量，例如，

```
double throughput=1/timeTaken; 
```

将其视为内存基准测试吞吐量是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:58:09.033

> 我想知道这种方法是否适用于进行深层复制。

它会工作¹。但是，这并不是实现深度复制的最有效方式。（手动实现深度复制可能要快一个数量级。）

> 变量 timeTaken 会给我做深拷贝的实际时间吗？

这取决于。如果 JVM 已经适当地预热，那么这应该给出一个准确的度量。但它是对*这种*深度复制方式的衡量……不是一般意义上的深度复制。（见上文......）

> 将其视为内存基准测试吞吐量是否合理？

不。对象序列化和反序列化所涉及的工作远非异构，被认为是内存系统性能的有效代理。

正如评论所建议的那样，最好使用`System.arraycopy`. 更好的是，使用“更接近金属”的语言进行基准测试；例如在 C 或汇编语言中。

* * *

^(1 - 我假设您正在复制的对象图是完全可序列化的。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:59:49.703

简单的答案是：**不，这不是正确的方法。**不知道你想要完成什么，很难知道正确的方法应该是什么，但如果你真的想写一个复制内存的微基准（！）那么你必须首先阅读这个：[我如何写一个Java中的正确微基准？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

# iphone - 使用 Overlay 自定义 MPMovieplayer

> ID：14597458
> 
> 赞同：0
> 
> 时间：2013-01-30T05:43:11.390
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer

我想使用覆盖在其上的自定义按钮自定义我的 MPMoviePlayer。是否有任何 MPMoviePlayer 覆盖的教程/源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:46:07.583

您可以使用 MPMoviePlayerViewController 并隐藏默认控件，然后，您可以将任何自定义视图添加到控制器的视图中。

# ios - Xcode 中找不到社交框架

> ID：14597459
> 
> 赞同：2
> 
> 时间：2013-01-30T05:43:27.883
> 
> 标签：ios, objective-c, xcode, xcode4.5

我正在使用 Xcode 4.5.1，但在 Link binary with libraries 下找不到社交框架，这很奇怪任何想法，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:46:03.890

查看您的 sdk 版本，它可能较旧。

因为`Social.framework`您必须在 XCode 上至少安装 iOS 6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:35:53.177

我已将我的 Xcode 更新到最新的 4.6 解决了这个问题。谢谢大家。

# ios - ImageView 动画重复

> ID：14597461
> 
> 赞同：0
> 
> 时间：2013-01-30T05:43:38.540
> 
> 标签：ios, animation, uiimageview

我正在开发一个需要带有 imageView 动画的应用程序。开始时图像的位置在 CGPoint(735,112)，单击动画按钮时，它必须移动到屏幕的左侧，即指向 CGPoint(20,112)，并且必须从左到右重复动画，即指向 CGPoint( 735,112），必须在此之后停止。我正在使用以下代码。

```
CGRect newRect=cleanStrip.frame;
[UIView beginAnimations:@"animation1" context:nil];
[UIView setAnimationDuration:3.0];
[UIView setAnimationDelegate:self];
[UIView setAnimationRepeatAutoreverses:YES];
newRect.origin.x=20;
cleanStrip.frame=newRect;
[UIView commitAnimations]; 
```

重复动画后，图像视图必须在原始位置 CGPoint(735,112) 处停止。但上面的代码将图像停止在 CGPoint(20,112) 处。

动画后如何将图像停止在其原始位置。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:55:07.560

你可以使用块来开始你的动画

```
__block CGRect newRect=cleanStrip.frame;
__block int originx = newRect.origin.x;
[UIView animateWithDuration:2.0
             animations:^{
                 newRect.origin.x=20;
                 cleanStrip.frame=newRect;
             }
             completion:^(BOOL finished){
                 [UIView animateWithDuration:2.0
                                  animations:^{
                                       newRect.origin.x=originx ;
                                       cleanStrip.frame=newRect;
                                  }];

             }]; 
```

# c++ - 为什么 C++03 要求模板参数有外部链接？

> ID：14597463
> 
> 赞同：14
> 
> 时间：2013-01-30T05:43:40.267
> 
> 标签：c++, templates

## 背景

在 C++03 中，用作模板参数的符号必须具有外部链接；[如上一个问题所述，](https://stackoverflow.com/questions/14595992/why-stdsort-doesnt-accept-compare-classes-declared-within-a-function)[*此*](https://stackoverflow.com/questions/14595992/why-stdsort-doesnt-accept-compare-classes-declared-within-a-function)限制在 C++11 中已删除：

> 在 C++03 中，模板参数不能有内部链接：
> 
> > `[C++03: 14.6.4.2/1]:`对于依赖于模板参数的函数调用，如果函数名称是*unqualified-id*但不是*template-id*，则使用通常的查找规则（3.4.1、3.4.2）找到候选函数，但以下情况除外：
> > 
> > *   **对于使用非限定名称查找**(3.4.1) 的查找部分，**只能找到具有来自模板定义上下文的外部链接的函数声明**。
> > *   对于使用关联命名空间 (3.4.2) 的查找部分，仅找到在模板定义上下文或模板实例化上下文中找到的具有外部链接的函数声明。
> > 
> > *[..]*
> 
> 这在 C++11 中已更改（问题[#561：“依赖名称查找中的内部链接函数” ）：](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#561)
> 
> > `[C++11: C.2.6]:`14.6.4.2
> > **更改**：允许具有内部链接的函数的依赖调用
> > **理由：**过度约束，简化重载决议规则。
> 
> 导致：
> 
> > `[C++11: 14.6.4.2/1]:`对于依赖于模板参数的函数调用，使用通常的查找规则（3.4.1、3.4.2、3.4.3）找到候选函数，除了：
> > 
> > *   **对于使用非限定名称查找**(3.4.1) 或限定名称查找 (3.4.3) 的查找部分，**只能找到来自模板定义上下文的函数声明。**
> > *   对于使用关联命名空间 (3.4.2) 的查找部分，只能找到在模板定义上下文或模板实例化上下文中找到的函数声明。
> > 
> > *[..]*
> 
> （发现缺少的*“与外部联系”*资格。）

[问题 #561（“依赖名称查找中的内部链接函数”）](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#561)，导致在 C++11 中删除限制的提议，要求：

> 此外，真的有必要从查找中排除内部链接功能吗？ODR 是否为实现提供了足够的自由度来处理这种情况，而不会在名称查找上出现另一个问题？

随着后来的答案：

> 该小组的共识是*[..]*内部链接函数应该通过查找找到（尽管如果通过重载决议选择它们可能会导致错误）。

* * *

## 问题

**限制的最初实际理由是什么？**

似乎必须有一个，因为最初的标准措辞已将查找限制为具有外部链接的符号。

仅仅是“[内部链接功能]如果通过重载解决方案选择可能会导致错误”，并且通过 2000 年代的观点转移了这有多重要？还是其他地方发生了变化，也许是其他地方针对不同 C++11 特性的新措辞的间接后果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T06:51:45.177

我怀疑它与`export`C++98 臭名昭著的模板特性有关。想想看。一旦允许模板定义出现在单独的翻译单元中的可能性，但在指定模板参数之前仍然不能真正编译（即，模板被实例化），您就进入了这个暮光区，其中带有模板定义的 TU 和具有实例化的 TU 必须遵守链接器可见性规则（即分离模型），同时在过载解决方面共享它们的上下文。该问题的解决方案是在从属名称查找中只允许具有外部链接的函数。

这是一个例子。导出模板的鲜为人知的“功能”之一是，您可以在模板的 TU 中拥有一些具有内部链接的函数或类（即，标记`static`或在未命名的命名空间中）。如果具有实例化的 TU 也具有内部链接功能，该功能会与模板 TU 中的功能不明确或可能被取代怎么办？这是一个有点超现实的问题，我知道，这是导出模板的奇异世界。避免非常令人惊讶的行为的唯一方法是从查找中排除所有内部链接函数。还要考虑到没有人清楚地知道如何实际实现导出的模板，如果没有这个限制，实现起来可能会更加不可能。

因此，一旦导出的模板出来了，对依赖名称查找的限制似乎显然没有用，并且在没有太多争论的情况下就被取消了。至少，这对我来说很有意义，但是，当然，这是猜测。

这是一个具体的例子：

```
// in exptemp.h
export template <typename T> bool is_valid(T value);

// in exptemp.cpp
namespace {
  bool is_space(char c) {
    return (c == ' ') || (c == '\t');
  };
};

template <typename T>
bool is_valid(T value) {
  return is_space(value);
};

// in test.cpp
#include "exptemp.h"

namespace {
  bool is_space(char c) {
    return (c == ' ') || (c == '\t') || (c == '\n');
  };
};

int main() {
  char c = '\n';
  return is_valid(c);   // will this return 0 or 1 ?!?!?
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T06:24:50.367

据我所知，这纯粹是历史性的——它似乎最初被禁止了，因为 cfront 的名称修改不足以正确处理它。

有一次，Anthony Williams 写[了一篇论文](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1353.html)，提议允许这样做，并告诉如何去做——但是 AFAIK，那篇论文从未被接受，其要求也从未被编辑到标准中。我怀疑这和其他任何事情一样都是时间问题。它是在 2001 年提出的，所以他们当时的工作（C++ 2003）并没有打算添加太多新材料，当他们开始认真研究 C++11 时，似乎主要是忘记了。

# javascript - 读取表格行并在条件下为行添加效果

> ID：14597464
> 
> 赞同：-1
> 
> 时间：2013-01-30T05:43:45.723
> 
> 标签：javascript, jquery, xml, xml-parsing

正在向表中添加动态数据，从 AJAX 调用中，我想读取其中包含“BLOCK”字符串的行，如果它在那里添加红色？

我怎样才能做到这一点.......？以下是我当前的代码

```
 success: function(xml) {
                  var block_count;
                  var xmlDOM = $(xml);
                  block_count = $(xml).find('item').length;
                  xmlDOM.find("item").slice(position,position+page_size).each(function()       {
                            var $this=$(this);
                            var $user=$this.find("user").text();
                            var $tag=$this.find("tag").text();
                            var $action=$this.find("action").text();
                            var $time=$this.find("time").text();
            $("#datatable").append("<tbody><tr class='datarow'><td>"+$time+"</td> <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>");
                    });

         <table id='datatable' width="100%" cellpadding="7" cellspacing="1" style="line-height: .9em;">
                    <thead>
                            <tr id='tableheader'>
                                    <th>Time</th><th>User</th><th>tag</th><th>Action</th>
                            </tr>
                    </thead>
         </table> 
```

编辑 1：如果该行中包含 BLOCK 字符串，我该如何添加红色......？

编辑2：我尝试如下代码

```
$color = /BLOCK/.test($action) ? 'red' : '';
$("#datatable").append("<tbody><tr class='datarow "+$color+"'><td>"+$time+"</td>   <td>"+$user+"</td><td>"+$url+"</td><td>"+$action+"</td></tr><tbody>");

.datarow.red {
background-color: red;
} 
```

该表看起来像这个图像![在此处输入图像描述](../Images/b7ae873040471770d18aa2d82906981e.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:00:27.540

我认为使用`:contains`

```
$("#datatable tr:contains('BLOCK')").addClass('red'); 
```

或者这样：

```
$("#datatable").find("tr:contains(BLOCK)").addClass('red'); 
```

# python - python argparse中的自定义选项卡完成

> ID：14597466
> 
> 赞同：52
> 
> 时间：2013-01-30T05:43:49.203
> 
> 标签：python, bash, command-line-interface, argparse, tab-completion

如何`argparse`在 Python 脚本中使 shell 选项卡完成配合？

```
#!/usr/bin/env python
import argparse

def main(**args):
    pass

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('positional', choices=['spam', 'eggs'])
    parser.add_argument('--optional', choices=['foo1', 'foo2', 'bar'])
    args = parser.parse_args()
    main(**vars(args)) 
```

在 .py 文件上设置可执行标志后，预期结果应类似于：

```
$ ./example.py sp<tab>             
   ->  completes to "./example.py spam"
$ ./example.py --op<tab> 
   ->  completes to "./example.py --optional"
$ ./example.py --optional b<tab>
   ->  completes to "./example.py --optional bar"
$ ./example.py --optional f<tab>   
   ->  completes to "./example.py --optional foo"
       and, additionally, prints  "foo1  foo2"  choices on stdout on a new line 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-08T07:41:05.593

看看Andrey [Kislyuk](https://kislyuk.github.io/argcomplete/)的 argcomplete。

安装它：

```
pip install argcomplete 
```

在调用之前导入模块并在源代码中添加一行`parser.parse_args()`：

```
#!/usr/bin/env python

import argparse as ap
import argcomplete

def main(**args):
  pass

if __name__ == '__main__':
  parser = ap.ArgumentParser()
  parser.add_argument('positional', choices=['spam', 'eggs'])
  parser.add_argument('--optional', choices=['foo1', 'foo2', 'bar'])
  argcomplete.autocomplete(parser)
  args = parser.parse_args()
  main(**vars(args)) 
```

并确保 bash 知道这个脚本，你使用

```
eval "$(register-python-argcomplete your_script)" 
```

您应该将该行放入您的`~/.bashrc`或遵循 argcomplete 的文档并激活“全局”完成。

之后，您按要求完成工作。

它的工作方式是 eval 行创建一个`_python_argcomlete`使用注册的函数`complete`。（运行`register-python-argcomplete your_script`以查看 eval 进入 bash 的内容）。自动完成功能会查找 bash 完成机制设置的环境变量，看它是否需要行动。如果它起作用，它就会退出程序。如果它不动作，这是对程序的正常调用，该函数什么都不做，程序的正常流程继续。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T11:06:38.957

要使自动完成功能起作用，您需要一个 bash 函数来生成可能的选项，然后您需要运行`complete -F <function_name> <program_name>`

最好的方法是让程序根据自己的解析算法生成完成函数，以避免重复。但是，快速浏览一下 argparse，我找不到访问其内部结构的方法，但我建议您寻找它。

这是一个适用于上述程序的 bash 函数：

```
function _example_auto() {
    local cur=${COMP_WORDS[COMP_CWORD]}
    local prev=${COMP_WORDS[COMP_CWORD-1]}

    case "$prev" in
    --optional ) 
        COMPREPLY=( $(compgen -W "foo1 foo2 bar" -- $cur) )
        return 0
        ;;
    *)
        COMPREPLY=( $(compgen -W "--optional spam eggs" -- $cur) )
        return 0
        ;;
    esac
} 
```

# php - 如何诊断这些 PHP-Code-Coverage 分段和 zend_mm_heap 损坏的错误

> ID：14597468
> 
> 赞同：10
> 
> 时间：2013-01-30T05:43:56.440
> 
> 标签：php, segmentation-fault, code-coverage

我一直很高兴在我的 Ubuntu 机器上编码。这是一台具有大量 RAM 的强大机器。我正在研究 4 个新课程，边写边写和运行单元测试。在某些时候，我注意到，虽然单元测试完成得很好，但代码覆盖率却没有。

在消息“正在生成代码覆盖率报告......等等......”之后，我会收到一条消息说 zend_mm_heap 已损坏。我尝试了一些修复，包括：在我的 php.ini 中设置（apache2 和 cli），并从我的代码中`output_buffering = On`删除调用。`unset()`（我阅读了这些可能需要修复的内容）。

现在，无论我做什么，我似乎都在 zend_mm... 错误和分段错误（核心转储）错误之间交替出现。我注释掉测试，直到我缩小我认为导致问题的那个，并在那里进行一些更改，直到我得到一个干净的运行。然后我将取消所有测试的注释，只是为了发现故障仍然存在。

有任何想法吗？我可以使用什么工具或方法来收集更多信息？

我正在使用 PHP_CodeCoverage 1.2.6、PHP 5.3.10-1ubuntu3.5、PHPUnit 3.7.9。

编辑：

顺便说一句，我找不到任何核心转储文件。从我的两个物理磁盘的根目录中搜索，但没有运气。我已经阅读了关于核心的 man 条目，包括核心转储未创建文件的可能原因，但我认为这些都不适用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T01:12:01.753

我最近有同样的问题。这似乎是 PHP 垃圾收集的问题。在 phpunit 运行期间禁用垃圾收集解决了我的问题。

添加：

```
zend.enable_gc=0 
```

到您的`php.ini`文件或从命令行使用：

```
phpunit -d zend.enable_gc=0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-30T16:42:40.563

在运行具有代码覆盖率的 PhpUnit 时，有时很难理解 Segmentation fault 错误。我在 PHP 7.0.5 上遇到了带有 2 个版本的 PhpUnit 的分段错误。

最后，在我的情况下跟踪问题后，这样的事情导致了分段错误

```
$x = doSomething(doSomethingElse()); 
```

并将内部函数提取到变量中，如下所示：

```
$y = doSomethingElse();
$x = doSomething($y); 
```

解决了这个问题。上面的代码当然是简化的代码，但是您应该了解有时代码中没有真正的错误，但是您应该修改它以使具有代码覆盖率的 PhpUnit 为您的代码工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T15:36:46.670

我遇到了同样的问题并尝试使用 zend.enable_gc=0，但随后 phpunit 内存不足。为了解决这个问题，我基本上修改了我的覆盖白名单，使其更加细化。所以，在 phpunit.xml 中，我以前有这个：

```
<filter>
    <whitelist>
        <directory suffix=".php">../application/src</directory>
    </whitelist>
</filter> 
```

我把它改成这样：

```
<filter>
    <whitelist>
        <directory suffix=".php">../application/src/module1</directory>
        <directory suffix=".php">../application/src/module2</directory>
        <directory suffix=".php">../application/src/module3</directory>
        <exclude>
            <directory>../application/src/module1/views</directory>
        </exclude>

    </whitelist>
</filter> 
```

因此，只需尝试将过滤器限制为仅包含实际重要的文件。这仍然是一个错误，但现在我认为限制考虑进行覆盖率计算的文件数量将有助于防止此类问题。

# python - 我应该在我的网址中使用 pk 还是唯一的 slug？

> ID：14597469
> 
> 赞同：2
> 
> 时间：2013-01-30T05:44:07.417
> 
> 标签：python, django, url-routing, django-urls

我想为我在 django 中编写的购物车应用程序编写 URLconf。我想知道构建 URL 的首选方式是什么。

用户可以通过超链接访问 URL（他们不应该在地址栏中键入它）。它将指定的项目添加到他们的购物车。我是不是该

对项目使用 pk：

```
http://example.com/add/253 
```

或使用独特的蛞蝓：

```
http://example.com/add/unique_item_slug 
```

这些方法中的任何一种是否具有安全性或性能优势。有什么理由喜欢一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:14:12.180

使用 slug 的主要原因是 SEO（搜索、引擎优化）。论据是搜索“我的真棒小部件”将返回结果 -

```
http://example.com/products/my_awesome_widget 
```

比......高

```
http://example.com/products/423 
```

Google 喜欢对人类有意义的 URL。理想情况下，您希望 URL 尽可能多地说明页面。[查看googles SEO starter guide](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.co.uk/en/uk/webmasters/docs/search-engine-optimization-starter-guide.pdf)中的“改进 URL 的结构”部分。

由于您将在网上销售商品，因此网络冲浪者可以轻松地在搜索引擎上找到您的产品，这一点很重要。因此，绝对推荐使用蛞蝓。

仅依赖 slug 的一个缺点是您需要将产品名称强制转换为**唯一的**slug。您目前可能没有对产品名称的唯一约束，因此您可能需要做一些工作来创建 slug（通过检查您要创建的 slug 是否已经存在）。一个常见的解决方案是包含 slug 和产品 ID。

```
http://example.com/products/my-awesome-widget/243 
```

这样，您的 slug 不必是唯一的，但您的 url 仍然包含产品名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:57:15.027

在现代 Web 开发中，您可以在 URL 中使用您的 pk，这不是问题。

依靠一个非常宁静的设计，我会推荐你​​：

```
http://example.com/product/253/add 
```

这`http://example.com/product/253`是您的产品详细视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:54:58.890

正如 Ewen 所说，将标题直接放在 URL 中的目的是 SEO。在 URL 中包含关键字对搜索引擎结果有显着影响

在 URL 中使用主键实际上并没有任何重大的安全风险，除了人们猜测/预测其他主键的能力。但你不应该依赖

> 没有人会猜到这个

无论如何，作为一种安全措施。

# ruby-on-rails - Omniauth 推特登录不起作用

> ID：14597472
> 
> 赞同：0
> 
> 时间：2013-01-30T05:44:14.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter, omniauth, twitter-oauth

我正在使用omniauth 在我的网站中使用twiiter/facebook 帐户登录。它适用于 facebook，但不适用于 twitter。在检查日志时，我发现 twitter API 没有发回用户电子邮件 ID 作为响应，并且在我的应用程序数据库中，电子邮件 ID 是必填字段。只是想知道为什么没有发回电子邮件ID作为响应。

是否有任何设置阻止发送电子邮件 ID 作为响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:06:44.677

Twitter 不提供电子邮件。这是因为 Twitter 隐私政策。

您可以在此处找到以下信息：( [https://dev.twitter.com/docs/faq](https://dev.twitter.com/docs/faq) )

“Twitter API 不提供用户的电子邮件地址作为 OAuth 令牌协商过程的一部分，也不提供其他获取它的方法。”

你必须做一个额外的步骤（在你的网站上），在那里你问用户他的电子邮件。

问候

伊万格

# c# - 将字符串数组存储在本地存储中的最佳方法，Windows 8？

> ID：14597478
> 
> 赞同：0
> 
> 时间：2013-01-30T05:44:53.000
> 
> 标签：c#, windows-8

我对 Windows 8 上的本地存储有疑问。

我想存储一个股票代码的字符串数组。在 Windows 8 上执行此类操作的最佳方法是什么？

浏览一下，有些人建议将数组中的每个字符串存储到文本文件中的新行中，从本地存储中保存和检索。

如果是这样，我将如何实现这一目标？有更好的选择吗？我应该走sqlite的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:48:27.273

这是一个示例演示如何将集合保存到本地存储，请查看：[http ://code.msdn.microsoft.com/windowsapps/CSWinStoreAppSaveCollection-bed5d6e6](http://code.msdn.microsoft.com/windowsapps/CSWinStoreAppSaveCollection-bed5d6e6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:53:56.107

我建议使用独立存储来存储应用程序值，可能是序列化的 JSON、对象等。下面是一个代码示例：

-- 设置数据

```
var localStorage = ApplicationData.Current.LocalSettings;
localStorage.Values[key] = value; 
```

-- 获取数据

```
var localStorage = ApplicationData.Current.LocalSettings;
if(localStorage.Values.ContainsKey(key)
 return (T)localStorage.Values[key]; 
```

尽管将上述内容包装在辅助类中通常更实用。

其他选项是将文件写入磁盘，例如 SQLite 或 XML/JSON 文件，但以上对于少量数据应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:38:56.317

要将数组保存到本地存储中，您需要将其转换为字符串。

```
var localSettings = Windows.Storage.ApplicationData.current.localSettings;
var someSetting= new Array();

//Add values you want to store
someSetting.push("someValue");

//Change to string and save to local Storage
//toString will convert the array to a string with values separated by a comma
localSettings.values["someSettingInStorage"] = someSetting.toString();

//To retrieve the stored string value as a usable array
if (localSettings.values["someSetting"] != null)
    someSetting = (localSettings.values["someSetting"]).split(","); 
```

# c - C 字符串快速排序

> ID：14597480
> 
> 赞同：2
> 
> 时间：2013-01-30T05:44:54.677
> 
> 标签：c, quicksort

目前试图弄清楚这种问题是什么。直接从 Wikipedia 的就地 Quicksort 伪代码构建，我将假设它是可靠的。我正在尝试按以空字符结尾的 3 字符“代码”字段对结构数组进行排序。

排序主要是有效的，但总是有一些元素不合适。我只能假设这与枢轴有关，但我花了几个小时盯着它看，却一无所获。谢谢！

```
void quicksort(Cdir *directory, int left, int right) {

    if (left < right) {
        int pivotIdx = left;
        pivotIdx = partition(directory, left, right, pivotIdx);
        quicksort(directory, left, pivotIdx - 1);
        quicksort(directory, pivotIdx + 1, right);
    }
}

int partition(Cdir *directory, int left, int right, int pivot) {

    char *pivotVal = directory[pivot].code;
    int curIdx = left;
    swap(&directory[pivot], &directory[right]);

    int i;
    for (i = left; i < right; i++) {
        if (strncmp(directory[i].code, pivotVal, 3) < 0) {
            swap(&directory[i], &directory[curIdx]);
            curIdx++;
        }
    }
    swap(&directory[curIdx], &directory[right]);
    return curIdx;
} 

void swap(Cdir *s1, Cdir *s2) {

    Cdir temp = *s1; 
    *s1 = *s2;
    *s2 = temp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:02:06.840

我只是想说...请不要将此视为您问题的实际答案，因为事实并非如此。

作为一名程序员，你几乎将所有的时间都花在自己解决问题上。这是一个开始学习如何做到这一点的机会。如果你养成了通过实验找出程序为什么会以某种方式运行的习惯，那么你将成为一个比仅仅询问人们哪里出了问题的程序员更好的程序员。

盯着代码可以让你到达一个点，但你不会总是在没有看到实际使用的数据的情况下超过那个点。这就是调试的全部内容：知道你的程序在哪里，它在做什么，以及它的变量包含什么。

调试代码最简单的技术就是`printf`告诉你发生了什么。

想象一下，如果您的程序输出如下内容：

```
Quicksorting on range 1 to 6
Partitioning on range 1 to 6
  Sub-array before:
    bob
    nelly
    harold
    yasmine
    fred
    roger
  Sub-array after:
    (you get the idea)
Partition returned pivot index of 5
Quicksorting on range 1 to 4
  (etc etc) 
```

嗯，它可以。插入几个调用很容易`printf`，突然间你会从程序中得到大量输出，然后将其写入文件然后查看。如果发生了什么愚蠢的事情，很快就会变得很明显，并且只需要一点时间就可以在代码中添加一些跟踪并重新编译。

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:56:10.310

您在 partition(..) 的这一行中有一个错误：

```
for (i = left; i < right - 1; i++) 
```

维基百科中的代码假定循环中包含 right-1，应该是 <=。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:49:26.127

我终于弄明白了。当我将字符串比较中的“pivotVal”替换为对枢轴值（目录[right]）的直接引用时，排序工作正常。仍在试图确定为什么会这样，但它是固定的！

```
void quicksort(Cdir directory[], int left, int right) {

    if (left < right) {
        int pivotIdx = left;
        pivotIdx = partition(directory, left, right, pivotIdx);
        quicksort(directory, left, pivotIdx - 1);
        quicksort(directory, pivotIdx + 1, right);
    }
}

int partition(Cdir directory[], int left, int right, int pivot) {

    int curIdx = left;
    swap(&directory[pivot], &directory[right]);

    int i;
    for (i = left; i < right; i++) {
        if (strncmp(directory[i].code, directory[right].code, 3) < 0) {
            swap(&directory[i], &directory[curIdx]);
            curIdx++;
        }
    }
    swap(&directory[curIdx], &directory[right]);

    return curIdx;
} 

void swap(Cdir *s1, Cdir *s2) {

    Cdir temp = *s1; 
    *s1 = *s2;
    *s2 = temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:53:26.103

我不认为你应该像 glagolig 建议的那样将 for 循环更改为 i <= right 因为 swap(pivot, right) 和 i < right 的目的是从数组中删除枢轴并处理更小的数组 1 元素。该算法对我来说看起来完全正确，也许问题在于您如何调用该函数。
您应该使用正确的参数调用函数作为数组中的最后一个索引而不是数组的大小，即如果您有 Cdir arr[10]; 你应该调用 quicksort(arr, 0 ,9);
如果您发布错误输出的输入示例，您也可以帮助人们更多地帮助您。
我会将此添加为评论，但我没有足够的代表这样做:-)

# hibernate - Java，Spring 3.0.Apache Tiles 2.2 .2 错误：无法在名称为“HelloHibernate”的 servlet 中解析名称为“addEmployee”的视图类型异常报告

> ID：14597484
> 
> 赞同：0
> 
> 时间：2013-01-30T05:45:13.133
> 
> 标签：hibernate, spring-mvc, apache-tiles

> 我正在尝试为 CRUD 应用程序添加 Apache Tiles。出现以下错误

```
HTTP Status 500 - Could not resolve view with name 'addEmployee' in servlet with name 'HelloHibernate' 
```

类型异常报告

消息无法解析名称为“HelloHibernate”的 servlet 中名称为“addEmployee”的视图

描述 服务器遇到一个内部错误，阻止它完成这个请求。

例外

```
javax.servlet.ServletException: Could not resolve view with name 'addEmployee' in servlet with name 'HelloHibernate'
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1042)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:798)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

**web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <servlet>
    <servlet-name>HelloHibernate</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/HelloHibernate-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloHibernate</servlet-name>
    <url-pattern>*.html</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

**瓷砖.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
  <tiles-definitions> 
  <definition name="base.definition" template="/WEB-INF/views/mainTemplate.jsp">
    <put-attribute name="title" value=""></put-attribute>
    <put-attribute name="header" value="/WEB-INF/views/header.jsp"></put-attribute>
    <put-attribute name="body" value=""></put-attribute>
    <put-attribute name="footer" value="/WEB-INF/views/footer.jsp"></put-attribute>
  </definition>

  <definition name="base.definition" template="addEmployee">
  <put-attribute name="title" value="Employee Data Form"></put-attribute>
  <put-attribute name="body" value="/WEB-INF/views/addEmployee.jsp"></put-attribute>
  </definition>

  <definition name="base.definition" template="employeesList">
  <put-attribute name="title" value="/WEB-INF/views/employeesList.jsp"></put-attribute>
  </definition>
  </tiles-definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:11:04.133

您的 Tiles 声明有点混乱。如果我正确理解你的意图，我会这样做。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
<tiles-definitions> 
    <definition name="base.definition" template="/WEB-INF/views/mainTemplate.jsp">
        <put-attribute name="title" value=""></put-attribute>
        <put-attribute name="header" value="/WEB-INF/views/header.jsp"></put-attribute>
        <put-attribute name="body" value=""></put-attribute>
        <put-attribute name="footer" value="/WEB-INF/views/footer.jsp"></put-attribute>
    </definition>

    <definition name="addEmployee" extends="base.definition">
        <put-attribute name="title" value="Employee Data Form"></put-attribute>
        <put-attribute name="body" value="/WEB-INF/views/addEmployee.jsp"></put-attribute>
    </definition>

    <definition name="employeesList" extends="base.definition">
        <put-attribute name="title" value="/WEB-INF/views/employeesList.jsp"></put-attribute>
    </definition>
</tiles-definitions> 
```

在最后两个定义中，我将`template`属性更改为`name`属性并将现有`name`属性更改为`extends`属性。

# javascript - 单击选择列表中的选项时如何重定向用户？

> ID：14597487
> 
> 赞同：1
> 
> 时间：2013-01-30T05:45:30.300
> 
> 标签：javascript, html

我因为无法做到这一点而自责。但我几乎什么都试过了。我只是想在用户单击我的选项值列表中的选项时将他们重定向到特定页面。这是我当前的代码（应该更好地解释我的问题）：

```
<select name="test_redirect">
<option value="1" onclick="document.location = 'http://localhost/shop?item=1';">Item 1</option>
<option value="2" onclick="document.location = 'http://localhost/shop?item=2';">Item 2</option>
<option value="3" onclick="document.location = 'http://localhost/shop?item=3';">Item 3</option>
</select> 
```

我也尝试过 onChange 。结果相同。有人可以帮我解决这个问题吗？感谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:49:34.187

```
document.querySelectorAll("[name=test_redirect]")[0].addEventListener('change',
   function () {
       window.location = "http://localhost/shop?item=" + this.value;
   }); 
```

This depends on a relatively new browser (with `querySelectorAll` and `addEventListener`), but the principle's the same. `click` doesn't get triggered on options, so you have to go with `change` on the `<select>`. Might as well consolidate the code a bit too.

[http://jsfiddle.net/5n5ZE/](http://jsfiddle.net/5n5ZE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:48:44.847

```
<select id="test_redirect">
<option value="1">Item  1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
</select> 
```

**javascript**

```
var val = document.getElementById("test_redirect").value;
window.location.href = "http://localhost/shop?item=" + val; 
```

**jquery**

```
$("#test_redirect").change(function(){

    var val = $(this).val();
    window.location.href = "http://localhost/shop?item=" + val;

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:50:38.297

试试这个（给出`value`每个选项的页面链接）

```
<select name="test_redirect" onchange="window.location.href=this.form.test_redirect.options[this.form.test_redirect.selectedIndex].value"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:51:17.313

您需要将事件处理程序绑定到`<select>`而不是单个选项：

```
<select name="test_redirect" onchange="location.assign('http://localhost/shop?item=' + this.options[this.selectedIndex].value)">
<option value="1">Item 1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T05:52:07.707

这将为您节省行数：

```
<select onchange="location = this.options[this.selectedIndex].value;">
<option value="1">Item  1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
</select> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T05:53:46.283

尝试这个

```
<select name="test_redirect" onchange="location.href='http://localhost/shop?item='+this.value">
<option value="1">Item 1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
</select> 
```

# python - 打印当前模块名称的函数，当从另一个模块调用时也是如此

> ID：14597499
> 
> 赞同：3
> 
> 时间：2013-01-30T05:46:23.000
> 
> 标签：python, function, module

```
def a():
    print __name__ 
```

我有没有机会拥有这样的功能，但是如果由另一个模块导入并从那里调用，它会打印“正确”的模块名称吗？

“正确”的模块名称应始终是调用它的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:02:04.753

*sys*模块提供了一种特定于 CPython的方式来查找调用者：

```
sys._getframe(1).f_globals.get('__name__', '__main__') 
```

_getframe() 函数*[在此处](http://docs.python.org/2.7/library/sys.html#module-sys)*记录，框架对象在*[此处](http://docs.python.org/2.7/reference/datamodel.html#types)*记录。

# iphone - 如何结合两个 UIDatePickers 的日期和时间？

> ID：14597500
> 
> 赞同：16
> 
> 时间：2013-01-30T05:46:25.643
> 
> 标签：iphone, ios, uidatepicker

我的应用程序中有两个`UIDatePickers`，一种模式用于选择日期，另一种用于时间模式。当到达确切的日期和时间时，我已发出通知。我可以在正确的时间触发提醒，但问题是没有检查日期。有什么办法可以同时查看日期和时间？？

提前谢谢...

编辑

```
NSDate *date1 = [datePicker date];
NSDate *date2 = [timePicker date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

unsigned unitFlagsDate = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
NSDateComponents *dateComponents = [gregorian components:unitFlagsDate fromDate:date1];
unsigned unitFlagsTime = NSHourCalendarUnit | NSMinuteCalendarUnit ;
NSDateComponents *timeComponents = [gregorian components:unitFlagsTime fromDate:date2];

[dateComponents setHour:[timeComponents hour]];
[dateComponents setMinute:[timeComponents minute]];

NSDate *combDate = [gregorian dateFromComponents:dateComponents];   

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil) return;
NSDate *fireTime = combDate;
localNotif.fireDate = fireTime;
localNotif.alertBody = @"Alert!";
localNotif.soundName = UILocalNotificationDefaultSoundName;  
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T07:53:22.693

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *dateComponents = [calendar components:NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit fromDate:self.datePicker.date];
NSDateComponents *timeComponents = [calendar components:NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:self.timePicker.date];

NSDateComponents *newComponents = [[NSDateComponents alloc]init];
newComponents.timeZone = [NSTimeZone systemTimeZone];
[newComponents setDay:[dateComponents day]];
[newComponents setMonth:[dateComponents month]];
[newComponents setYear:[dateComponents year]];
[newComponents setHour:[timeComponents hour]];
[newComponents setMinute:[timeComponents minute]];

NSDate *combDate = [calendar dateFromComponents:newComponents]; 

NSLog(@" \ndate : %@ \ntime : %@\ncomDate : %@",self.datePicker.date,self.timePicker.date,combDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:38:40.483

试试这个：

将日期转换为 NSString，将时间转换为 NSString。

将时间附加到日期字符串中。

现在将最终字符串转换为 NSDate

示例：（从你方添加验证）

```
 NSDate *date1 = [datePicker date];
    NSDate *date2 = [timePicker date];

    NSString *date = [NSString stringWithFormat:@"%@",date1];
    NSString *time = [NSString stringWithFormat:@"%@",date2];

    NSString *dateAndTime = [NSString stringWithFormat:@"%@ %@",date,time];
    NSDate *dateTime = [self dateFromString:dateAndTime];

- (NSDate*) dateFromString:(NSString*)aStr
{

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
    //[dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss a"];
    [dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    NSLog(@"%@", aStr);
    NSDate   *aDate = [dateFormatter dateFromString:aStr];
    [dateFormatter release];
    return aDate;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-23T09:19:24.537

`Swift 5`如果可能有帮助，则为已接受答案的版本。

```
/// Returns `Date` from date and time.
func combine(date: Date, time: Date) -> Date? {
    let calendar = Calendar.current
    let dateComponents = calendar.dateComponents([.day, .month, .year], from: date)
    let timeComponents = calendar.dateComponents([.hour, .minute, .second], from: time)

    var newComponents = DateComponents()
    newComponents.timeZone = .current
    newComponents.day = dateComponents.day
    newComponents.month = dateComponents.month
    newComponents.year = dateComponents.year
    newComponents.hour = timeComponents.hour
    newComponents.minute = timeComponents.minute
    newComponents.second = timeComponents.second

    return calendar.date(from: newComponents)
} 
```

# timeout - Time-Driven Trigger to run every X minutes during a given time period?

> ID：14597505
> 
> 赞同：0
> 
> 时间：2013-01-30T05:46:51.320
> 
> 标签：timeout, google-apps-script

I have a script that I have to run every 10 minutes but only during say 1AM - 2AM Local time.

Long story short; the script updates about 80+ internal Google Spreadsheets but it must only do this during the hours mentioned above so the chance of a user being in a spreadsheet doing work at the time is almost zero.

I've looked at the Time-Driven Triggers and it has both the functions (to run every 10 minutes and also to run between 1am-2am) however I need to fuse these two triggers together.

Is this possible?

# asp.net-mvc-4 - How to set my canvas drawings visible to anther user who opens same page where actions performed using paper.js script

> ID：14597508
> 
> 赞同：0
> 
> 时间：2013-01-30T05:47:02.143
> 
> 标签：asp.net-mvc-4, html5-canvas, paperjs

I am working with paper.js in asp.net mvc4 application ,which helps in drawing on canvas region of HTML. I need your support for my requirement: When I draw on my canvas I want to make visible these drawings on other canvas who opened same page over internet. Paper.js provides a global variable called project.activeLayer to access items on view. I saved cavnas data in JSON format from active Layer , then I send this data through server communication. How can I rebuild the view in the canvas with same data. ? (or) Is there any way to do this without transmission of data.?

Thanks, surbob.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:54:06.343

这不会很简单。您所说的基本上与浏览器中带有caht cliints的聊天室相同。您需要将画布数据发送到服务器，然后让服务器更新连接到它的任何其他客户端。

可能最好的起点是聊天室示例并修改代码以处理画布数据。SignalR实时通信库可能有助于使测试变得更简单，并且它有很好的示例可以帮助您前进[。](https://github.com/SignalR/SignalR)

# java - Is it possible to create weblogic servers instances in java for testing?

> ID：14597510
> 
> 赞同：0
> 
> 时间：2013-01-30T05:47:16.723
> 
> 标签：java, api, weblogic, weblogic-10.x

Is there any way to create weblogic servers and making mock objects or instances of that server in java for testing purposes?

What I mean is:
To create/simulate a server from java, instead of actually hosting a server, so that it could be used for testing purposes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:03:42.577

类似模拟的东西。

如果我没记错的话，你可以使用这个库。

[http://mvnrepository.com/artifact/org.codehaus.fabric3.weblogic/fabric3-weblogic-mock](http://mvnrepository.com/artifact/org.codehaus.fabric3.weblogic/fabric3-weblogic-mock)

# java - Maven/Jenkins automatic download/copy

> ID：14597514
> 
> 赞同：0
> 
> 时间：2013-01-30T05:47:36.167
> 
> 标签：java, maven, jenkins, debian

I'm in a team to develop plugins in java. We got Maven, a repository and Jenkins, And I got myself a debian-server to test my applications. When I push my commits, this happens:

Push in repository, upload and build in Jenkins. Users download these .jar files and upload these to their server

What I want to be happen: There are two ways, First: After building with Jenkins: Download these files, Second: When pressing "maven build", maven builds my applications and copy these to my server

How can I do this?

(Sorry for my bad English: I'm German)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:16:45.747

如果我理解正确，以下情况应该会有所帮助。

创造两个工作

*   第一个工作构建您的工件并将其存档：用户将能够下载它，工作由源修改触发
*   第二个作业仅手动执行（并且需要两个插件，如下所列），从第一个作业复制工件，然后将它们上传到服务器

您需要安装以下插件：

*   [复制工件插件](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)以使詹金斯能够从另一个作业复制工件
*   [通过 ssh 插件发布](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin)以使 jenkins 能够上传二进制文件并在远程服务器上运行命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:25:35.047

当您推送您的 SCM 存储库时，您希望将 Jenkins 构建到您的本地项目中（更新您的 jar），然后将您的最终构建发送到您的服务器。那是你想要的吗？

如果是，我认为该插件会很有趣：

```
http://evgeny-goldin.com/wiki/Jenkins-maven-plugin#Supported_Plugins 
```

您可以从您的管理 jenkins 目标，`pom.xml`但我不确定您是否可以获得 jenkins build。

# java - JPA/Hibernate: Using params as function params?

> ID：14597515
> 
> 赞同：0
> 
> 时间：2013-01-30T05:47:39.550
> 
> 标签：java, hibernate, jpa, parameters, jpql

```
return em.createQuery(
     "SELECT doc FROM TexyDoc doc 
       WHERE doc.origPath LIKE CONCAT('%', :1)")
    .setParameter(1, path) 
```

leads to

```
QuerySyntaxException: expecting IDENT, found '1' near line 1, column 82 
[SELECT doc FROM cz.oz.web.model.TexyDoc doc 
   WHERE doc.origPath LIKE CONCAT('%', :1)] 
```

Why? What should be the syntax like?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:52:07.530

这里的问题是你做 args 的方式。改为这样做：

```
LIKE CONCAT('%', :path)" 
```

接着：

```
.setParameter("path", path); 
```

命名参数更具可读性。

# python - PyPy slow when drawing polygons with PIL/pillow

> ID：14597517
> 
> 赞同：2
> 
> 时间：2013-01-30T05:47:51.627
> 
> 标签：python, python-imaging-library, pypy

I'm using PIL to draw lots of polygons consisting of big number of points (from couple hundred to couple thousands). With Cpython all polygons were processed 3 times faster than PyPy. Just to give an example... One polygon consisting of 352 points:

> PyPy - 0.00620603561401
> Cpython - 0.000882148742676

```
start = time()
draw.polygon(pixels, outline='rgb(255, 255, 255)', fill='rgb(0, 0, 0)')
print time()-start 
```

I'm using Python 2.7.3 and PyPy 1.9 on Ubuntu 12.10 module - Pillow 1.7.8

# linq - EF Error When Use Linq With Stored Procedure

> ID：14597518
> 
> 赞同：1
> 
> 时间：2013-01-30T05:48:12.610
> 
> 标签：linq

Attempts were as follows:

```
var query1 = Db.ProductView.Where(w => w.DisplayFlag == "Y");
var paging = query1.Include(i => i.ProductImages).Select(s =>

                        new Products()
                        {
                            ProductCode = s.ProductCode,
                            DesignCode = s.DesignCode,
                            Code1 = s.Code1,
                            Code2 = s.Code2,
                            ProductImages = s.ProductImages.Where(i => (i.ImageNo == 1 & i.ImageType == "LS") ).Select(i => i), 
                            ProductCoupons = Db.Database.SqlQuery<Coupon>("EXEC [USP_Front_EShop_Coupon_Select_By_ProductCode] @ProductCode", s.ProductCode)

                        }
                ); 
```

However, the following error was returned:

> *LINQ to Entities does not recognize the method 'System.Collections.Generic.IEnumerable `1 [Lesmore1.Models.Coupon SqlQuery [Coupon] (System.String, System.Object [])' method, and this method cannot be translated into a store expression. Help us understand what is going wrong ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:53:12.060

`SqlQuery`return `IEnumerable<T>`，这可能就是您收到该错误的原因。

尝试将`.Single()`or放在`.First()`调用 to 之后`SqlQuery`以获取单个对象，或`.Select()`获取`Where()`一系列对象。

# c++ - Understanding the Next_Permutation Function in C++ for a Vector of Objects

> ID：14597519
> 
> 赞同：-1
> 
> 时间：2013-01-30T05:48:21.443
> 
> 标签：c++, parameters, operator-overloading, permutation

I would like help figuring out how to use the `next_permutation` function on a vector of objects. I've read about people using the `comp` parameter, but I don't understand it. I thought the overloaded operators would fix things, but I'm still getting thrown errors. Please help me with my syntax and/or explain (with examples) the `comp` parameter of the `next_permutation` function! Thanks!

In my main file:

```
vector<Point> source;

//fill vector with Points, say 4 of them (1,2)(2,3)(3,4)(4,5)

next_permutation(source.begin(), source.end()); // at run I get error "Invalid operands to binary expression ('Const Point' and 'Const Point)" 
```

My simple Point class:

```
class Point {
private:
    double xval, yval;
public:
    Point(int x = 0, int y = 0) {
        xval = x;
        yval = y;
    }

    int x() { return xval; }
    int y() { return yval; }

    friend bool operator<(Point& lhs, Point& rhs){
        return lhs.x() < rhs.x() || (lhs.x()==rhs.x() && lhs.y()<rhs.y()) ;
    }

    friend bool operator==(Point& lhs, Point& rhs) {
        return lhs.x()==rhs.x() && lhs.y()==rhs.y();
    }

}; 
```

EDIT: This also throws the same error:

```
int x() const { return xval; }
int y() const { return yval; }

friend bool operator<(const Point& lhs, const Point& rhs){
    return lhs.x() < rhs.x() || (lhs.x()==rhs.x() && lhs.y()<rhs.y()) ;
}

friend bool operator==(const Point& lhs, const Point& rhs) {
    return lhs.x()==rhs.x() && lhs.y()==rhs.y();
} 
```

This also throws the same error:

```
int x() const { return xval; }
int y() const { return yval; }

bool operator<(const Point& lhs){
    return lhs.x() < x() || (lhs.x()==x() && lhs.y()<y()) ;
}

bool operator==(const Point& lhs) {
    return lhs.x()==x() && lhs.y()==y();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:50:38.077

使用 const 引用和 const getter 函数。

```
int x() const { return xval; }
int y() const { return yval; }

friend bool operator<(const Point& lhs, const Point& rhs){
    return lhs.x() < rhs.x() || (lhs.x()==rhs.x() && lhs.y()<rhs.y()) ;
}

friend bool operator==(const Point& lhs, const Point& rhs) {
    return lhs.x()==rhs.x() && lhs.y()==rhs.y();
} 
```

[http://liveworkspace.org/code/4Drerr](http://liveworkspace.org/code/4Drerr) $0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:53:25.297

Getter 函数应该是 const 成员函数，还有什么理由从 double 转换为 int？

尝试：

```
double x() const { return xval; }
double y() const { return yval; } 
```

# c# - how to enable pause and resume in audio recorder in windows phone 8?(Details Insde)

> ID：14597520
> 
> 赞同：4
> 
> 时间：2013-01-30T05:48:27.403
> 
> 标签：c#, xna, windows-phone-8

I'm working on the audio recorder in windows phone 8\. I've done audio recording start and stop functionality but I don't find any pause and resume audio recording feature. Also don't know how to add details to the recorded audio like created DateTime, album art etc.,

I've seen the Microphone Class but I can't find anything.

I've seen Microphone.GetData method and trying to use it, please say me, if somebody knows about this or knows any helpful links. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T04:26:49.377

尝试使用

```
 microphone.State == MicrophoneState.Started 
```

# c# - Implicitly typed arrays: why we can't set array size explicitly?

> ID：14597522
> 
> 赞同：13
> 
> 时间：2013-01-30T05:48:43.420
> 
> 标签：c#

The C# language specification (7.6.10.4) says, that there are tree kinds of array creation expressions:

> new non-array-type [ expression-list ] rank-specifiersopt array-initializeropt
> new array-type array-initializer
> new rank-specifier array-initializer

The third one is intended for implicitly typed arrays:

```
var foo = new[] { 1, 2, 3 }; 
```

The question: is there any weighty reason to forbid to set array size explicitly in case of implicitly typed array?

It looks like asymmetric behavior, comparing with this syntax:

```
var foo = new int[3] { 1, 2, 3 }; 
```

**Update**.

A little clarification. The only advantage for combination of explicitly set array size and array initializer I can see, is the compile-time check for initializer length. If I've declared the array of three `int`s, the initializer must contain three `int`s.

I think, the same advantage is true for the implicitly typed arrays. Of course, to use this advantage or not to use is the personal preference.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:56:43.027

[不需要排名说明符，因为它已经由初始化列表中的元素数量提供。](http://msdn.microsoft.com/en-us/library/0a7fscd0%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:45:46.893

我认为这里的一个区别是，这种语法可以看作是首先创建一个类型化数组，然后填充它：

```
var foo = new int[3] { 1, 2, 3 }; 
```

这类似于我们可以在单个语句中声明和初始化其他数据类型的方式：

```
var list = new List<string>{ "a", "b", "c" };
var dict = new Dictionary<string, string>{ {"a", "b"}, {"c", "d"} }; 
```

第一条语句创建`int[3]`并填充它。第二个和第三个语句创建一个`List<string>`or`Dictionary<string, string>`并填充它们。

但如果你这样做：

```
var foo = new[3] { 1, 2, 3 }; 
```

这不是一回事。没有像 a 这样的数据类型`[3]`，因此与其他 2 个示例不同，这不是首先创建特定对象并填充它的情况。这是一种用于创建隐式类型数组的特殊语法，其中数组及其内容从大括号的内容中推断出来，然后创建。

我不知道为什么这种语法*不应该*存在，但我认为这是对你所看到的不对称的合理解释。

# bash - 奇怪的 Bash I/O 重定向行为

> ID：14597525
> 
> 赞同：1
> 
> 时间：2013-01-30T05:48:50.957
> 
> 标签：bash, shell, sh

我注意到 Bash 中关于重定向的奇怪行为，无法解释。当我输入

```
ls <>一个
```

当前目录的文件打印到标准输出（Bash shell），文件`a`被创建并留空。我预计会出现错误，因为没有指定输入文件。当我输入

```
ls >< 一个
```

我收到一个错误（意外的令牌'<'）。在我看来，如果发生第一件事，这应该尝试使用文件`a`作为 ls 的输入。这感觉不协调。正在做

```
ls <>
```

给我一个错误（意外的令牌'换行'）

```
ls ><
```

给了我一个不同的错误（意外的令牌'<'）

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:52:05.997

`<>`是一个有效的 bash 运算符，而不是连续的`<`and`>`运算符。 `><`不是有效的运算符，因此它*确实*被解释为连续的`>`和`<`运算符。检查[手册页](http://www.cs.sunysb.edu/documentation/bash/bash.html)：

> 重定向运算符
> 
> ```
> [n]<>word 
> ```
> 
> 导致名称为扩展名的文件在文件描述符或文件描述符（如果未指定）`word`上打开以进行读写。如果文件不存在，则创建它。`n``0``n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:02:47.773

>< 不是有效的 Bash 内置函数。<> 是，但是。

```
[fd] <> *word* 
```

它所做的只是导致打开名称是输入扩展的文件，以便在该文件描述符上进行读取和写入。

如果您想了解更多关于它和其他重定向的信息，[http://www.gnu.org/software/bash/manual/bashref.html#Redirections](http://www.gnu.org/software/bash/manual/bashref.html#Redirections)是一个很好的来源。

哦，当你点击“enter”时，你会在终端中创建一个换行符，这就是 shell 认为的单词。

# uiwebview - UIWebView strange behavior

> ID：14597527
> 
> 赞同：0
> 
> 时间：2013-01-30T05:49:24.770
> 
> 标签：uiwebview

I have a strange problem, [http://tmskiosk.oneclick.info/sso/userauth.aspx](http://tmskiosk.oneclick.info/sso/userauth.aspx)

this link I open in browser works fine but when I open it in webview it is not loading it's css file (Probably).

`NSString *urlAddress = [NSString stringWithFormat:@"http://tmskiosk.oneclick.info/sso/userauth.aspx"];`

```
 NSURL *url = [NSURL URLWithString:urlAddress];
    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url] 
```

`[siteWebView loadRequest:requestObj];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T06:09:55.877

```
//Load web view data
    NSString *strWebsiteUlr = [NSString stringWithFormat:@"http://tmskiosk.oneclick.info/sso/userauth.aspx"];

    NSString *escapedUrlString = [strWebsiteUlr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    // Load URL

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:escapedUrlString];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [_webview loadRequest:requestObj]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T05:34:38.550

尝试使用以下方法。

```
WebView loadHTMLString:<#(NSString *)#> baseURL:<#(NSURL *)#> 
```

# stata - Stata中的编码范围

> ID：14597532
> 
> 赞同：1
> 
> 时间：2013-01-30T05:49:55.000
> 
> 标签：stata

我得到了一个非常粗糙的数据集。一个数据集为我提供了每个 X 变量的代码（一个 4 位代码），然后是一个解释每个代码含义的文本文件。奇怪的是，一个代码可能意味着什么，或者一个范围可能意味着同样的事情。例如：

```
X
2321
2322
2341
2520
2572
4000
4001
4002
4100 
```

文本文件是这样的：

```
2300-2372 = New York
2520      = Chicago
2572      = Denver
4000-4099 = Austin
4100-4200 = San Diego 
```

我想要一种简单的方法来对给出的 Stata 文件进行编码，而无需创建 100 行代码。因为我有超过 1000 个分类和大约一百万个观察值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:06:32.110

使用`inrange`：

```
gen austin = 0
replace austin = 1 if inrange(X, 4000,4099) 
```

对于这里有一个代码然后使范围在同一点开始和停止的城市

# perl - 带有 mod_perl 的 Catalyst 中的 HTML::FormHandler 很慢

> ID：14597536
> 
> 赞同：1
> 
> 时间：2013-01-30T05:50:07.310
> 
> 标签：perl, forms, catalyst, mod-perl2, performance

我在我的 mod_perl / Catalyst 应用程序中使用HTML [::](http://perl.apache.org/) FormHandler[为](http://www.catalystframework.org/)[我](https://metacpan.org/module/HTML::FormHandler)的用户生成表单。它工作正常，唯一的问题是它大大减慢了页面加载时间。这是我创建新表单的子程序：

```
sub edit : Chained('base') PathPart Args(0) {
    my ( $self, $c ) = @_; 

    my $form = myapp::Form::Account::Edit->new;

    #validation stuff, etc
    #...
} 
```

只需添加一行“ `my $form = myapp::Form::Account::Edit->new;`”，我的页面加载时间就会从 50 毫秒增加到 500-1000 毫秒。我知道有些人可能会争辩说，一个网站的 500-1000 毫秒页面加载时间仍然不错，但我希望这个网站能够获得高流量，而现在只有一个用户才能加载一个页面需要很长时间。我知道 HTML::FormHandler 很大，因为它使用 Moose，但是在加载一次之后不应该已经加载了吗？有什么办法可以加快这个过程，或者这只是使用 HTML::FormHandler 的代价？如果可以的话，我真的很想继续使用它，因为它让我作为编码员的生活变得更加轻松:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:11:41.907

您还可以在控制器的 Moose 属性中构建表单，使表单持久化。这意味着来自最后一个请求的信息仍将在表单对象中，并将在下一个请求开始时被清除（或者可以在呈现表单后由程序员清除）。您还必须清除已添加到表单的任何其他属性，或确保在每次“处理”调用时都设置了它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:43:17.000

您可以在您的应用程序调用它之前使用 mod_perl 加载一个模块。

[http://www.conceptsolutionsbc.com/perl-articles-mainmenu-41/29-perl-and-apache/55-modperl-part-2-pre-loading-perl-modules](http://www.conceptsolutionsbc.com/perl-articles-mainmenu-41/29-perl-and-apache/55-modperl-part-2-pre-loading-perl-modules)

```
#put his to apache config file:
PerlModule HTML::FormHandler; 
```

编辑：

要在运行时加快速度，您可以使用[memoize](http://perldoc.perl.org/Memoize.html)来加快速度。

创建一个名为 get_form_handler 的新子并记住它的输出。

您甚至可以使用[Cache-FastMmap](http://search.cpan.org/~robm/Cache-FastMmap-1.40/lib/Cache/FastMmap.pm)一次存储此对象（输出）并在进程之间共享。

问候，

# javascript - 如何验证使用 JQuery 检查至少一个复选框？

> ID：14597538
> 
> 赞同：-1
> 
> 时间：2013-01-30T05:50:10.383
> 
> 标签：javascript, jquery

听到是我的代码：

```
<div class="reminderDiv">
    <input type="checkbox" class="require-one" id="lmrText"  name="lmrText"><label>Text Message</label>&nbsp;&nbsp;&nbsp;
    <input type="checkbox" class="require-one" id="lmrPhone" name="lmrPhone"><label>Phone</label>
    <input type="checkbox" class="require-one" id="lmrEmail" name="lmrEmail"><label>Email</label>
</div> 
```

使用 JQuery，我如何确定是否至少选择了一个复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:51:29.907

```
$(".reminderDiv :checked").length > 0 
```

这将是`true`如果至少一个复选框被选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:54:06.910

```
if($('.require-one:checked').length > 0)
{
   // at least one checkbox was checked
}
else
{
  // no checkbox was checked
} 
```

[**JSFIDDLE**](http://jsfiddle.net/Yw6Kq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T11:22:32.033

```
if($('.require-one:checked').size() === 0){
{
    //your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:51:58.963

```
if($('input[type=checkbox]').is(':checked')==true) {
    alert("Your data");
} 
```

# c# - 使用 knockout.js 渲染局部视图

> ID：14597544
> 
> 赞同：2
> 
> 时间：2013-01-30T05:51:01.807
> 
> 标签：c#, asp.net-mvc, knockout.js

我需要根据 Asp.Net MVC4 中的用户选择来加载选项卡。每个选项卡元素都属于一个局部视图。每个局部视图都有自己的 knockout.js 绑定。

单击每个选项卡时，需要在先前选择的选项卡下方呈现部分视图。

这是一个代码片段

```
<div class="row-fluid top-pad-double" id="tabBasedGrowthDiv">
  <ul class="nav nav-pills">
     <li><a href="#tabCustomerInfo" data-toggle="tab" data-bind="click:$root.AddTab">CustomerInfo</a></li>
     <li><a href="#tabPropertyInfo" data-toggle="tab" data-bind="click: $root.AddTab">PropertyInfo</a></li>
     <li><a href="#tabPropertyInfo1" data-toggle="tab" data-bind="click: $root.AddTab">PropertyInfo1</a></li>   
</ul>
<div class="tab-content pills pill-sections">
    <div data-bind="template: { name: 'tabBasedGrowthTemplate', foreach: $root.tabs}"></div>
    </div>
</div> 
```

**Knockout.js Html 模板**

```
<script type="text/html" id="tabBasedGrowthTemplate">
    <div class="tab-pane" >
        <div class="pill-header clearfix">
            <h3>Some title</h3>
                <div class="pull-right">
                    <a href="#" class="btn btn-mini" data-toggle="button" rel="tooltip" data-title="lock this section here" data-placement="top"><i class="icon-lock"></i></a>
                    <a href="#" class="btn btn-mini" rel="tooltip" data-title="close this section" data-placement="left"><i class="icon-remove"></i></a>
                </div>
        </div>
        <div class="pill-content" data-bind="attr:{id: $data.id}">

            @Html.Partial("tab based partial view name")

        </div>
    </div>
</script> 
```

这是视图模型的大致实现。

```
function TabBasedGrowthViewModel() {
        var self = this;

        self.tabs = ko.observableArray([TabViewModel]);
        self.AddTab = function (){}
} 
```

**淘汰赛绑定**

```
<script type="text/javascript">
    $(document).ready(function () {
        ko.applyBindings(new TabBasedGrowthViewModel(), $("#tabBasedGrowthDiv").get(0));
        });
</script> 
```

当我执行上述步骤时，我与渲染部分视图的主视图模型的敲除绑定发生冲突，因为它有自己的敲除绑定。只有当我使用上面小标题`knockout`中所示的模板渲染部分视图时，我才会遇到这种冲突。**`Knockout.js Html Template`**

任何帮助将不胜感激。

提前致谢， Alphacoder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:58:27.423

我通过将 NavigationViewModel 绑定到页面并知道要显示的视图并将其存储在可观察变量中来完成类似的操作。然后在每个选项卡周围，您使用[可见测试](http://knockoutjs.com/documentation/visible-binding.html)来查看是否应根据该变量显示它。

然后，您希望设置页面以允许您将不同的视图模型绑定到不同的局部视图，并使用以下方法进行设置：

```
// This lets us stop the view model from binding to areas of the page,
// allowing us to bind different objects to parts of the page
ko.bindingHandlers.stopBinding = {
    init: function ()
    {
        return { controlsDescendantBindings: true };
    }
};

ko.virtualElements.allowedBindings.stopBinding = true;
ko.applyBindings(navigationViewModel); 
```

然后在您的局部视图中，您使用此代码来阻止导航视图模型与其绑定：

```
 <section data-bind="visible: SelectedView() == 'location'">
        <!-- ko stopBinding: true -->        
        <div id="map"></div>
        <!-- /ko -->
    </section> 
```

并使用以下方法将您的其他模型绑定到此部分：

```
 ko.applyBindings(mapViewModel, $('#map')[0]); 
```

诚然，我没有使用模板完成此操作，但在使用纯 html 和带有敲除的 js 时有效。

# c# - 在另一个表单中选择图像时更改表单中的图像

> ID：14597552
> 
> 赞同：0
> 
> 时间：2013-01-30T05:51:26.517
> 
> 标签：c#, visual-studio-2010

我决定制作一个纸牌游戏来帮助我学习如何使用 Visual Studio 2010 在 C# 中编程。

**我的目标**：我希望能够：

1.  `dealButton`在一张表格 ( `cardTableForm`)上更改卡片组 ( ) 背面的图像
2.  当`blackCheckerDeck`我单击`optionsForm`.

**我的代码**：

```
 //Changes the deck design to blackChecker when the blackChecker design is selected.
 private void blackCheckerDeck_Click(object sender, EventArgs e)
   {
       cardTableForm.dealButton.Image = this.blackCheckerDeck.Image;
   } 
```

**我的问题**：

最后一行显示“ `cardTableForm.dealButton`”的部分有以下错误

```
An object reference is required for the non-static field, method, or property 'WindowsFormsApplication1.cardTableForm.dealButton' 
```

根据该站点的建议，我已经将 ( `dealButton`) 和 ( `blackCheckerDeck`) 的属性更改为

```
Modifiers: Public 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:58:25.257

`cardTableForm`是一类。您需要使用实例（对象）来修改交易按钮图像。

创建 Option 表单时，您需要为其提供`cardTableForm`.

所以假设你有这样的东西`cardTableForm`

```
void OnShowOptions()
{
   var options = new OptionsForm();
   options.CardTable = this;  // tell options which card form to play with
   ...
} 
```

在 OptionsForm 中

```
public CardTableForm CardTable;

void blackCheckerDeck_Click(object sender, EventArgs e)
{
   CardTable.dealButton.Image = this.blackCheckerDeck.Image;
} 
```

# c - 有关 .so 文件的信息

> ID：14597568
> 
> 赞同：3
> 
> 时间：2013-01-30T05:52:42.770
> 
> 标签：c, linux, unix, shared-libraries

我是 C 编程新手。我对 .so 文件一无所知。它有什么需要？我怎样才能创建它？如何绑定我的 C 代码或二进制代码？如果我不制作任何 .so 文件并直接制作 C 代码的可执行二进制文件，它的优点和缺点是什么？需要对其进行详细描述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:54:51.717

`.so`文件是共享对象。通常共享库被制作为`.so`.

通过制作一个库，`.so`您可以提高内存使用效率。即，当使用该库的多个应用程序正在运行时，与静态库的情况相反，该库只加载到内存中一次。

创建动态库：

```
gcc -Wall -fPIC -c *.c
gcc -shared -Wl,-soname,libctest.so.1 -o libctest.so.1.0   *.o 
```

`-fPIC`: 用于输出位置无关代码的编译器指令，这是共享库所需的特性。

`-shared`：生成一个共享对象，然后可以将其与其他对象链接以形成可执行文件。

**[您可以在此处](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)找到更多信息。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:55:06.907

`.so`代表共享对象。在 Windows 世界中，这被称为 DLL。

您可以像使用 DLL 一样使用它——您可以将应用程序动态链接到它。

如果您的库名为 libblah.so，您可以使用 gcc 链接到它，如下所示：

```
gcc myprog.c -lblah -o myprog 
```

共享库有助于将通用功能分解到单独的文件中。

但是，使用共享库会导致称为[DLL Hell](http://en.wikipedia.org/wiki/DLL_Hell)的现象。虽然这个问题起源于 Windows 世界，但它也适用于 Linux 系统，除非您非常关注使用的共享库的确切版本并执行严格的版本控制。例如，如果您使用共享库（甚至是系统共享库，而不是您创建的库）编译应用程序，然后您尝试在另一个 Linux 机器上运行相同的可执行文件（具有显着不同的 Linux 版本或发行版)，它可能无法运行 - 因为使用的共享库不一样。

因此，如果您希望您的可执行文件可移植到最大数量的 Linux 系统而无需重新编译，那么静态编译它可能是有意义的。虽然这会使您的可执行文件更大，但它确实减少了通常归因于 DLL Hell 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:05:57.500

除了其他答案之外，请注意，要构建共享对象（或共享库），您最好以[位置无关代码](http://en.wikipedia.org/wiki/Position-independent_code)模式编译相关源文件，例如

```
 gcc -Wall -O -fPIC src.c -c -o src.pic.o 
```

^(`-Wall`在编译某些源代码时询问所有警告总是有用的。)

然后您可以将所有这些`*.pic.o`文件链接到`.so`using

```
 gcc -shared src1.pic.o src2.pic.o -o shared.so 
```

您甚至可以`libfoo.so`使用将一些共享库链接到该共享对象

```
 gcc -shared src1.pic.o src2.pic.o -lfoo -o shared.so 
```

最后，可以使用[dlopen](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)将共享对象动态加载到进程中；这对于获取[插件](http://en.wikipedia.org/wiki/Plugins)很有用。（然后为它们定义一个约定并使用 获取其中的重要符号`dlsym`）

另请参阅[程序库 howto](http://tldp.org/HOWTO/Program-Library-HOWTO/)和[Executable & Link Format](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format) & [shared library](http://en.wikipedia.org/wiki/Shared_library) wikipages

When make your shared library, better name it `lib`*foo*`.so` where *foo* is some arbitrary name. Then, at link time, use also the `-L` option to `gcc` (actually to the linker) to tell about the directory containing it, and link it using `-l`*foo* option. For example, name your library `libnewbie.so` when making it, and pass `-L.` (if it is in the current directory) before `-lnewbie` when linking it, e.g. `gcc -Wall myprog.c -L. -lnewbie -o myprog`

# ninject - 使用 ServiceStack 和 NinjectContainerAdapter 的一次性请求生命周期

> ID：14597569
> 
> 赞同：3
> 
> 时间：2013-01-30T05:52:43.100
> 
> 标签：ninject, servicestack

将 Ninject 与 ServiceStack 一起使用时，我将如何指定对象的生命周期是按请求进行的，并在必要时调用任何 IDisposable.Dispose 方法？

根据文档，执行此操作的默认方式是：

```
container.RegisterAutoWiredAs<MyType,IMyType>().ReusedWithin(ReuseScope.Request); 
```

但是，我必须将`NinjectContainerAdapter`用于我的项目。通常我会安装`Ninject.Web.Common`并编写：

`kernel.Bind<IMyType>().To<MyType>().InRequestScope()`

我的实例将在请求结束时被处理掉。我将如何在 ServiceStack 中执行此操作，例如在自托管场景中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:01:16.347

您必须`INinjectHttpApplicationPlugin`为 ServiceStack 实现一个。在该方法中`object GetRequestScope(IContext context);`，您必须返回一些具有请求生命周期的对象（相当于`HttpContext.Current`））

可能您可以添加一个对象`HostContext`并将其作为范围返回。最好让该对象实现`INotifyWhenDisposed`并在请求结束时处理它，以便在请求后立即释放对象，而不是等待对象被垃圾收集。

# excel - 独家打开excel文件Workbooks.Open

> ID：14597570
> 
> 赞同：0
> 
> 时间：2013-01-30T05:52:51.327
> 
> 标签：excel, interop

我正在使用 Workbooks.Open 方法打开一个 excel 文件并在其中写入一些数据。我会以隐形模式打开。我保持文件打开，直到应用程序运行。但如果用户在 Windows 资源管理器中打开相同的 excel 文件，它会打开相同的 excel 进程并允许直接向用户编辑文件。“MultiUserEditing”给出 False 值。

如果它已经在我的应用程序中打开，我想实现该用户无法从 Windows 资源管理器或 MS Excel 打开（或以只读模式打开）文件。

谢谢，

# android - 自定义过滤器在 android 的列表视图中导致 IndexOutOfBoundException

> ID：14597574
> 
> 赞同：1
> 
> 时间：2013-01-30T05:53:10.977
> 
> 标签：android, custom-adapter

您好，当代码命中 notifyDataSetChanged(); 时，我试图覆盖自定义适配器类中的 GetFilter 函数；它产生 IndexOutOfBoundException 这是适配器的代码

```
public class SelectUserAdapter extends ArrayAdapter<UserWithCheckbox> implements
    Filterable {
private ArrayList<UserWithCheckbox> UsersLits;
private Context c;
LayoutInflater vi;

public SelectUserAdapter(Context context, int textViewResourceId,
        ArrayList<UserWithCheckbox> countryList) {
    super(context, textViewResourceId, countryList);
    this.UsersLits = new ArrayList<UserWithCheckbox>();
    this.UsersLits.addAll(countryList);
    c = this.getContext();
}

private class ViewHolder {
    TextView code;
    CheckBox name;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;
    Log.v("Users View", String.valueOf(position));

    if (convertView == null) {
        vi = (LayoutInflater) this.getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.users_select_list_item, null);

        holder = new ViewHolder();
        holder.code = (TextView) convertView.findViewById(R.id.Name);
        holder.name = (CheckBox) convertView.findViewById(R.id.IsSelected);
        convertView.setTag(holder);

        holder.name.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                CheckBox cb = (CheckBox) v;
                UserWithCheckbox User = (UserWithCheckbox) cb.getTag();
                Toast.makeText(
                        c,
                        "Clicked on Checkbox: " + cb.getText() + " is "
                                + cb.isChecked(), Toast.LENGTH_LONG).show();
                User.setSelected(cb.isChecked());
            }
        });
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    UserWithCheckbox User = UsersLits.get(position);
    holder.code.setText(User.getCode());
    // holder.name.setText(User.getName());
    holder.name.setChecked(User.isSelected());
    holder.name.setTag(User);

    return convertView;

}

public Filter getFilter() {
    return new Filter() {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {

            FilterResults results = new FilterResults();
            ArrayList<UserWithCheckbox> FilteredResults = new ArrayList<UserWithCheckbox>();
            if (constraint != null && constraint.toString().length() > 0) {
                for (int index = 0; index < UsersLits.size(); index++) {
                    UserWithCheckbox User = UsersLits.get(index);
                    if (User.code.contains(constraint.toString())) {
                        FilteredResults.add(User);
                    }
                }
                results.values = FilteredResults;
                results.count = FilteredResults.size();
            } else {
                synchronized (UsersLits) {
                    results.values = UsersLits;
                    results.count = UsersLits.size();
                }

            }
            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            UsersLits.clear();

            UsersLits = (ArrayList<UserWithCheckbox>) results.values;
            notifyDataSetChanged();

        }

    };
} 
```

}

这是活动代码：

```
public class SelectUsers extends Activity {
public static SelectUserAdapter dataAdapter = null;
float Long, Lat;
String UID, Radius;
String provider;
ListView listView;
Criteria criteria;
LocationManager locationmanager;
File sdcard = Environment.getExternalStorageDirectory();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_select_users);
    displayListView();
    //dataAdapter.checkButtonClick();
    EditText FilterText = (EditText)findViewById(R.id.FilterSelectUsers);
    FilterText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub
            dataAdapter.getFilter().filter(s.toString());

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    });
} 
```

# javascript - 在 extjs 或 getCount() 的商店中动态设置字段在模型中给出 0

> ID：14597577
> 
> 赞同：0
> 
> 时间：2013-01-30T05:53:22.070
> 
> 标签：javascript, model, store, extjs4.1, extjs-mvc

希望你做得很好。

我有 2 个不同班级的大学和学生

关系：大学有很多学生

大学字段：uni_id、uni_name、total_students 学生字段：stud_id、stud_name

我有以下 json 文件：

```
{
    "data": [
        {
            "uni_id": 1,
            "uni_name": "Gujarat University",
            "openingYear": 1980,
            "students": [
                {

                    "stud_id": 1,
                    "stud_name": "Rishabh Shah"
                }, {

                    "stud_id": 2,
                    "stud_name": "Rakesh Prajapati"
                }, {

                    "stud_id": 3,
                    "stud_name": "Vaibhavi Shah"
                }, {

                    "stud_id": 4,
                    "stud_name": "Jitu Mishra"
                }, {

                    "stud_id": 5,
                    "stud_name": "Sonu Nigam"
                }, {

                    "stud_id": 6,
                    "stud_name": "K.K."
                }, {

                    "stud_id": 7,
                    "stud_name": "Amitabh Bachan"
                }
            ]
        }, {
            "uni_id": 2,
            "uni_name": "Saurastra University",
            "openingYear": 1985,
            "students": [
                {

                    "stud_id": 1,
                    "stud_name": "Rakhi Sawant"
                }, {

                    "stud_id": 2,
                    "stud_name": "Smit Patel"
                }, {

                    "stud_id": 3,
                    "stud_name": "Kashyap Thaker"
                }
            ]
        }, {
            "uni_id": 3,
            "uni_name": "North Gujarat University",
            "openingYear": 1989,
            "students": [
                {

                    "stud_id": 1,
                    "stud_name": "Angellina Jollie"
                }, {

                    "stud_id": 2,
                    "stud_name": "Parag Raval"
                }, {

                    "stud_id": 3,
                    "stud_name": "Harshal Patel"
                }, {

                    "stud_id": 4,
                    "stud_name": "Harsha Bhogle"
                }, {

                    "stud_id": 5,
                    "stud_name": "Lata Mangeshkar"
                }
            ]
        }, {
            "uni_id": 4,
            "uni_name": "South Gujarat University",
            "openingYear": 1989,
            "students": [
                {

                    "stud_id": 1,
                    "stud_name": "Khushbu Shah"
                }, {

                    "stud_id": 2,
                    "stud_name": "Piyush"
                }, {

                    "stud_id": 3,
                    "stud_name": "Sakira"
                }, {

                    "stud_id": 4,
                    "stud_name": "Salman Khan"
                }, {

                    "stud_id": 5,
                    "stud_name": "Kishor Kumar"
                }, {

                    "stud_id": 6,
                    "stud_name": "Mohhamad Rafi"
                }, {

                    "stud_id": 7,
                    "stud_name": "V.V.S. Lakshman"
                }, {

                    "stud_id": 8,
                    "stud_name": "Rahul Dravid"
                }, {

                    "stud_id": 9,
                    "stud_name": "Shane Worn"
                }, {

                    "stud_id": 10,
                    "stud_name": "Neel Armstrong"
                }
            ]
        }
    ]
} 
```

我想加载大学模型中提到的**total_stud 。**

total_stud 是没有。大学生的..

我尝试在大学模型中进行以下操作。

```
fields:'total_stud', 
type:integer,
convert:function(value,record)
{
return record.students().getCount();
} 
```

我也设置了 total_stud，但是，我得到了 0 total_stud。当我看到record.students（）时，我得到了那所大学的所有学生......但是，为什么我没有得到getCount（）。

谢谢 ！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:13:45.483

在我看来，字段**total_students**是一个计算值。我认为你不应该在你的模型中包含这个字段，因为当你需要显示它时，你总是可以计算出正确的值。

我为此想到了两种可能的解决方案：

**1.在大学模型中保留total_students字段**

```
 Ext.define("University", {
    extend: 'Ext.data.Model',
    fields: ['uni_id', 'uni_name', 'openingYear','total_students'],
    hasMany: {
      model: 'Student',
      name: 'students'
    },
    });

    Ext.define("Student", {
    extend: 'Ext.data.Model',
    fields: ['stud_id', 'stud_name']
    });

    /* Here we create the store. The data variable is 
       the same json that you posted.  */
    var store = Ext.create('Ext.data.Store', {
    model: "University",
    autoLoad: true,
    data: data,

    proxy: {
      type: 'memory',
      reader: {
          type: 'json'
      }
    },

    listeners: {
    /* This listener activates every time the store is loaded and what it does,
       is iterate through each University record and updates the 
       'total_students' field with the correct value */
      load: function (store, records) {
          store.each(function (record) {
              record.set('total_students', record.students().getCount());
          });
       }
     }
    });

    Ext.create('Ext.grid.Panel', {
    title: 'Universities',
    store: store,
    viewConfig: {
         markDirty: false
    },
    columns: [
         {text: 'ID',dataIndex: 'uni_id'},
         {text: 'Name',dataIndex: 'uni_name',flex: 1},
         {text: 'Opening Year',dataIndex: 'openingYear'},
         {text: 'Total Students',dataIndex: 'total_students'}
    ],
   height: 200,
   width: 500,
   renderTo: Ext.getBody()
   }); 
```

[http://jsfiddle.net/alexrom7/386ab/4/](http://jsfiddle.net/alexrom7/386ab/4/)

此选项将起作用，但似乎不正确。我推荐的选项是下一个。

**2\. 从大学模型中删除 total_students 字段**

此选项与上一个选项的区别在于，我们删除了 total_students 字段，因此无需在 University Store 中创建负载侦听器，但现在如果需要显示大学记录，我们必须计算给定大学记录的 total_students .

```
 Ext.define("University", {
    extend: 'Ext.data.Model',
    fields: ['uni_id', 'uni_name', 'openingYear'],
    hasMany: {
      model: 'Student',
      name: 'students'
    },
    });

    Ext.define("Student", {
    extend: 'Ext.data.Model',
    fields: ['stud_id', 'stud_name']
    });

    /* Here we create the store. The data variable is the same json that
       you posted.  */
    var store = Ext.create('Ext.data.Store', {
    model: "University",
    autoLoad: true,
    data: data,

    proxy: {
      type: 'memory',
      reader: {
          type: 'json'
      }
    }
    });

    Ext.create('Ext.grid.Panel', {
    title: 'Universities',
    store: store,
    columns: [
         {text: 'ID',dataIndex: 'uni_id'},
         {text: 'Name',dataIndex: 'uni_name',flex: 1},
         {text: 'Opening Year',dataIndex: 'openingYear'},
         {
          text: 'Total Students',
           renderer: function (val, meta, record) {
               return record.students().getCount();
           }
         }
    ],
   height: 200,
   width: 500,
   renderTo: Ext.getBody()
   }); 
```

[http://jsfiddle.net/alexrom7/cL9wf/9/](http://jsfiddle.net/alexrom7/cL9wf/9/)

我希望我对您有所帮助。

# java - 排序在显示标签中不起作用

> ID：14597579
> 
> 赞同：0
> 
> 时间：2013-01-30T05:53:29.590
> 
> 标签：java, struts, displaytag

在下面的代码中，我必须使用 sortable=true 对显示标签中的余额列进行排序，但是当我在 bean 中定义此值以进行格式化并放置货币符号（从会话对象获取货币符号）时，它不起作用。

```
<% String strCurrency=(String)session.getAttribute("strCurrency"); %>

    <display:table id="data1" name="invprbmList" requestURI=""  pagesize="10" export="true" style="width:100%;">
    <tr>
     <td><display:setProperty name="paging.banner.item_name">Invoice</display:setProperty>
     <display:setProperty name="paging.banner.items_name">Invoices</display:setProperty>
     <display:setProperty name="paging.banner.some_items_found"><span class="pagebanner"> {0} Invoices found, displaying {2} to {3}. </span></display:setProperty>              
     <bean:define id="invoiceNo"><bean:write name="data1" property="invoiceNo"/></bean:define>
     <bean:define id="invAmt"><bean:write name="data1" property="invAmount" format="#,##,##0.00"/></bean:define>
     <bean:define id="balance"><bean:write name="data1" property="balance" format="#,##,##0.00"/></bean:define>

     <display:column  title="Invoice No." sortable="true" media="html" class="l" headerClass="hl"><a href="GetInvoiceShippingDetails.do?invoiceNo=<%=invoiceNo%>&custno=<%=custno%>"><%=invoiceNo%></a></display:column>
     <display:column  property="invDate" title="Invoice Date" format="{0,date,dd-MMM-yyyy}" sortable="true" class="l" headerClass="hl"/>
     <display:column  media="html" title="Amount" sortable="true" class="r" headerClass="hr"><%=strCurrency%><%=invAmt %></display:column>
     <display:column  property="dueDate"    title="Due Date" format="{0,date,dd-MMM-yyyy}" sortable="true" class="l" headerClass="hl"/>
     <display:column  media="html" title="Balance" sortable="true" class="r" headerClass="hr"><%=strCurrency%><%=balance %></display:column>
     <display:column  title="Balance" sortable="true" property="balance" media="xml csv pdf excel" class="r" headerClass="hr" />
     <display:column  property="followUpDate" title="Follow-up Date" format="{0,date,dd-MMM-yyyy}" sortable="true" class="l" headerClass="hl"/>
     </td>
    </tr>
    </display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:47:33.220

您可以在 bean 中创建另一个属性来格式化 balance（在 get 方法内部），即使用 set 和 get 的 balanceHtml，然后显示为`<display:column property="balanceHtml" sortable="true"/>`.

# javascript - 使用 RequireJS 和 Jasmine 监视由 jQuery 'change' 调用的函数

> ID：14597580
> 
> 赞同：1
> 
> 时间：2013-01-30T05:53:30.210
> 
> 标签：javascript, jquery, requirejs, jasmine, jasmine-jquery

我对 RequireJS 和 Jasmine 都很陌生，所以我在设置一些基本测试时遇到了一些麻烦。我找到了很多关于如何将两者设置在一起并使其正常工作的信息。但是我有一个有趣的问题，我似乎无法解决。

不幸的是，我不确定解决问题的最佳方式，所以这里有一些代码：

主.js：

```
require(['jquery', 'manipulate'], function($, Manipulate) {
  var manipulate = new Manipulate;
  $(document).on('change', 'td input', function() {
    manipulate.pushChange();
  });
}); 
```

操纵.js：

```
define(function() {
  function Manipulate() {
    //
  };

  Manipulate.prototype.pushChange = function() {
    return true;
  };

  return Manipulate;
}); 
```

操纵规范.js：

```
describe('Manipulate', function() {
  var manipulate;

  beforeEach(function() {
    var flag = false;

    // Load fixtures into the HTML
    loadFixtures('ManipulateFixture.html');

    // Require the manipulate.js file
    require(['jquery', 'manipulate', 'main'], function(jQuery, Manipulate) {
      manipulate = new Manipulate;

      // Define any spies
      spyOn(manipulate, 'pushChange');

      flag = true;
    });

    // Wait for manipulate.js to load before running tests
    waitsFor(function() {
      return flag;
    });
  });

  it('should call pushChange after changing a cell', function() {
    $('td input').eq(0).trigger('change');
    expect(manipulate.pushChange).toHaveBeenCalled();
  });
}); 
```

（删除了一些额外的代码）

如果我`console.log`在里面`Manipulate.pushChange`，它正在开火。问题是，`Manipulate`被监视的对象与`main.js`文件中作为参数传递的对象不同。因此，添加`manipulate.pushChange`我的`it()`块使测试通过。

我找到了 Backbone.js 应用程序的答案，它调用[`delegateEvents`](http://backbonejs.org/#View-delegateEvents). 我不确定香草 Javascript、jQuery 等是否有类似的解决方案，但我找不到。

有没有更好的方法来构建我的文件，可能将我的 jQuery 事件处理程序放在操作模块中？或者只是一种在两个对象之间“复制”事件的方法？`createSpy`在这种情况下，我什至不相信 using会对我有多大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:41:11.327

您的代码存在一些问题，使得测试变得非常困难。首先，如果你想模拟依赖项，你不能像你尝试它的方式那样测试 requiereJs 模块。看看这个[SO](https://stackoverflow.com/q/11439540/184883)以获得一些解决方案。

另一个问题是您在 jquery 和 DOM 事件上进行中继。所以大多数时候我不会尝试使用测试装置重建 DOM。相反，我监视事件绑定到的 jquery 对象并自己调用该函数。所以在你的代码中

```
$(document).on('change', 'td input', function() {
  manipulate.pushChange();
}); 
```

`$`你可以像这样监视

```
var documentSpy ={on:jasmine.createSpy()};
spyOn(window, "$").andReturn(event); // in a requireJs module mock it like in the SO I've mention above 
```

现在，当您的代码绑定事件时，它只会调用 spy，您可以检查事件是否正确绑定：

```
var callback = documentSpy.on.mostRecentCall.args[2]
expect(documentSpy.on).toHasBeenCalledWith('change', 'td input', callback);
// fire the callback
callback();
expect(manipulate.pushChange).toHaveBeenCalled(); 
```

# ruby-on-rails - 控制器中http引发错误的rails约定？

> ID：14597581
> 
> 赞同：0
> 
> 时间：2013-01-30T05:53:30.407
> 
> 标签：ruby-on-rails, http, model-view-controller, exception-handling

假设我有一个带有 show 方法的articles_controller

我想确保只有具有有效许可证代码的客户端才能读取此控制器操作的 json 端点

```
def show
  authenticate_license if params[:format] == 'json' 
  # boilerplate
  respond_to do |format|
    format.html
    format.json { render json: @article, status: :ok }
  end
end 
```

我可能想在其他地方使用这个身份验证块，所以我把它放到我的 application_controller

```
# in application_controller
def authenticate_license
  @client = params[:client]
  licenses = License.where(:code => params[:code])
  @license = licenses.first
  if @license
    if @license.client = @client
      # do nothing, we're fine
    else
      respond_to do |format|
        format.json { render json: 'wrong client', status: 400 }
      end
    end
  else
    respond_to do |format|
      format.json { render json: 'bad license', status: :forbidden }
    end  
  end
end 
```

但这会导致双重渲染错误，所以现在我将尝试不同的东西

```
# in application_controller
def authenticate_license
  licenses = License.where(:code => params[:code]
  @license = licenses.first
  if @license
    if @license.client = @client
      # do nothing, we're fine
    else
      raise ActionController::RoutingError.new('wrong client')
    end
  else
    raise ActionController::RoutingError.new('bad license code')
  end
end
rescue_from ActionController::RoutingError do |exception|
  respond_to do |format|
    format.html { redirect_to root_url, :alert => exception.message }
    format.json { render json: exception.message, status: :forbidden }
  end
end 
```

但这样一来，我就无法指定 HTTP 状态，而且我还捕获了我可能不想捕获的路由错误。

做我想做的事情的正确方法是什么？

我所描述的行为就是设计所做的。如果您向具有 authorize_user 的操作发出请求！例如，它会引发错误，并将用户重定向到某个页面。CanCan 也做了类似的事情，如果用户没有被授权做某事，它会引发你应该捕获的自己的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:07:32.213

错误是有效的，你渲染了不止一次，这就是`doublerender`异常的原因。最好只在控制器中进行渲染

试试这个代码

```
def show
  is_client_valid = authenticate_license if params[:format] == 'json' 
  # boilerplate
  respond_to do |format|
    format.html
    if is_client_valid == 'valid' #you can have a switch statement here, so that you can easily set the status tag
      format.json { render json: @article, status: :ok }
    else
       format.json { render json: is_client_valid }
    end
  end
end

# in application_controller
def authenticate_license
  @client = params[:client]
  licenses = License.where(:code => params[:code])
  @license = licenses.first
  if @license
    if @license.client = @client
      return 'valid'
    else
        return 'wrong client' 
    end
  else
      return 'bad licence'
  end
end 
```

# php - ZF2 主机名路由器：获取域和 tld 作为一个参数

> ID：14597583
> 
> 赞同：0
> 
> 时间：2013-01-30T05:53:33.920
> 
> 标签：php, zend-framework2, zend-route

我有一条路线，例如：

```
 array(
            'type'    => 'Hostname',
            'options' => array(
                'route'    => ':subdomain.:domain.:tld',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ) 
```

我想做的是将 domain.tld 作为一个参数，因为我想将域限制为一个列表，例如“application1.com”、“example.org”等。

我试过了

```
 array(
            'type'    => 'Hostname',
            'options' => array(
                'route'    => ':subdomain.:domain',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
            ), 
```

是否可以将域和 tld 作为单个路由器参数处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:23:36.807

我不认为你可以用那个特定的路由器做到这一点，但你可以：

1）扩展/创建一个新的路由器来做你想做的事

2) 将此限制移到代码库之外。

3) 使用事件检查引导/调度上的域并采取适当的措施

我建议在较低级别（可能通过 apache/web 服务器）而不是在您的代码中执行这种限制。如果您想将它放在代码中，这可能不是放置它的最佳位置。

# .net - 就 .NET 而言，离线项目和在线项目有什么区别？

> ID：14597585
> 
> 赞同：1
> 
> 时间：2013-01-30T05:53:46.247
> 
> 标签：.net, windows

就 .NET 环境而言，在线和离线项目有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:07:18.967

我相信在线项目是在你开始之前下载的。另一方面，离线的则在本地持久化。

# c++ - 对屏幕上绘制的元素进行深度排序

> ID：14597588
> 
> 赞同：2
> 
> 时间：2013-01-30T05:53:57.550
> 
> 标签：c++, algorithm, opengl, 2d

我在这里有一个小程序，我在窗口上绘制了一些元素。

```
class CustomPointer{
void draw(); //draw png image on the screen
};

class CustomRectangle{
void draw(){
drawRect(); //draw Rectangle with a certain color
drawbtnImage(); //draw png image to the top right of rectangle (alphaBlending enabled)
}
}; 
```

**主文件**

```
CustomRectangle customRectangle;
CustomPointer customPointer;

void draw(){
drawBackgroundImage();
customRectangle.draw();
customPointer.draw();
} 
```

当我使用上面的代码绘制我的元素时，我希望`customPointer`将 绘制在屏幕上的所有其他元素上，因为指针正在绘制其他所有元素。但是我的指针出现在背景上，但在`customRectangle/btnImage`.

如何让我`customPointer`的实际始终保持在窗口上的所有其他元素之上？
此外，我还希望我`btnImage.draw()`能够绘制在自定义形状上（如控件右上角的圆形按钮）。这`btnImage`是一个png，两侧有一些透明度。但是，它不是出现在矩形上方，而是出现在矩形后面。类似的问题要修复。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:34:47.187

您可以为除指针绘制之外的所有内容启用深度测试以获得该效果：

```
void draw(){
glEnable(GL_DEPTH_TEST);
drawBackgroundImage();
customRectangle.draw();
glDisable(GL_DEPTH_TEST);
customPointer.draw();
} 
```

应该会得到预期的效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:14:52.303

我认为您应该为 2D 空间使用一些 Z-Sorting zalgorithm。每个对象都应该有自己的 Z 值（它可以是整数），并且在全局 Draw 方法中，您使用此 Z 顺序进行排序。

对于最顶部的矩形，您可以将 Z 设置为某个较大的值，以便它始终是 first/last 。

这在使用透明度时也会有所帮助。

```
void drawAll() {
    sort_by_z_order();
    foreach rect in sorted_rect_list {
        draw_rect(rect)
    }
} 
```

# c++ - C++ future.get() 返回类型

> ID：14597592
> 
> 赞同：3
> 
> 时间：2013-01-30T05:54:14.140
> 
> 标签：c++, visual-c++, c++11, lambda

--更新示例--

这是一些代码：

```
int retInt(int a) { return a; }
void randomFunction() 
{
    int a = 3;
    auto future = async([&]{ return retInt(a); });
    const auto ret = future.get();
} 
```

VS2012 intellisense 告诉我'ret'是一个`const < error-type >`并且不会让我编译，给我一个输出消息：

> [无法从 'void' 推断出 'const auto' 的类型]

例如，如果我将 'ret' 从`const auto`to更改`const int`并指定一个实际类型，一切编译都很好，但我想知道为什么自动版本不起作用，以及是否会有某种可能的代码更改来制作一个版本自动编译。

有任何想法吗？

笔记：

改变

> 自动未来 = async([&]{ return retInt(a); });

到

> 自动未来 = async([&] ()->int{ return retInt(a); });

产生相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:59:40.707

你有额外的`[]`内部 lambda 表达式，这使得嵌入式 lambda 表达式。内部 lambda 返回`1`但未指定外部 lamda 返回类型，默认为 void。

改变

```
auto afuture = async([&]{ []{ return 1; }; }); 
```

到：

```
auto afuture = async( []{  return 1; });
const auto ret = afuture.get(); 
```

编辑：

您的新代码在 VS2012 NOV CTP 和 gcc 4.7.2 上运行良好。

注意：您正在通过引用捕获局部变量 a，它对于异步线程是安全的，您可能希望按值捕获它。

```
auto future = async([=]{ return retInt(a); });
                    ^^^ 
```

编译的示例代码：

[http://liveworkspace.org/code/X66xE](http://liveworkspace.org/code/X66xE) $2

# ios - 在 iOS 中查找 facebook 匹配的帖子

> ID：14597594
> 
> 赞同：5
> 
> 时间：2013-01-30T05:54:26.280
> 
> 标签：ios, facebook, facebook-graph-api, ios5, facebook-fql

在我的 iOS 应用程序中，我在用户的 facebook 墙上发布了一些信息，现在我想在同一个应用程序发布的用户朋友的墙上找到类似的帖子，或者将用户墙上的文字与他朋友的墙匹配，然后如果匹配找到在朋友的墙上阅读朋友的信息和整个帖子，目前正在使用 iOS 的 facebook sdk。请建议我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:21:46.277

好吧，这是通过步骤完成的；1-您应该获得用户朋友墙的权限。2-然后你应该抓住他们的帖子（实际上是消耗性的）并将你的用户的帖子与他们关于同一个应用程序的帖子进行比较。3-您有两个选择，a-您在用户的一个朋友墙上获得了相同的帖子，-您抓住了用户并获得了所需的信息。b-您没有找到任何匹配项，-您返回“未找到匹配项”消息或（404-未找到）。

1-`

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_status",@"friends_status",
                        @"friends_about_me",@"friends_activities",
                        nil];
[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES completionHandler: ..... 
```

`

2-`

```
FBRequest *friendRequest = [FBRequest requestForGraphPath:@"me/friends?fields=name,status,picture,birthday,location"];
 [ friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
NSArray *data = [result objectForKey:@"data"];
for (FBGraphObject<FBGraphUser> *friend in data) {
    if ("Your user status" == [friend status]){
       NsLog(@"friend @%,@% .. ",[friend name],[friend birthday], .... 
     }else {
        NSLog(@"No match found");
      }
}}]; 
```

`

# sql-server - 使用 SQL Server 中的数据填充列表框

> ID：14597595
> 
> 赞同：1
> 
> 时间：2013-01-30T05:54:30.617
> 
> 标签：sql-server, vb.net, visual-studio-2010, sql-server-2008, sql-server-2005-express

我不知道我的程序发生了什么，我花了（4）四分钟来加载我的代码结果......有人可以告诉我为什么吗？有人能告诉我如何解决这个加载问题吗？

这是我的代码：

```
Imports System.Data.SqlClient
Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim str As String = "Data Source=######;Initial Catalog=###;Persist Security Info=True;User ID=#####;Password=#####"
        Dim con As New SqlConnection(str)
        Dim cmd As String = "Select ControlNo,EmpNo,CheckOutDate,CheckOutTime,TaxiNo,PlateNo,Model,Make from dbo.ChkInOut"
        Dim adpt As New SqlDataAdapter(com, con)
        Dim myDataSet As New DataSet()
        adpt.Fill(myDataSet, "dbo.ChkInOut")
        Dim myDataTable As DataTable = myDataSet.Tables(0)
        Dim tempRow As DataRow
        For Each tempRow In myDataTable.Rows
            'ListBox1.Items.Add((tempRow("ControlNo") & " (" & tempRow("EmpNo") & ")" & " (" & tempRow("CheckOutDate") & ")" & " (" & tempRow("CheckOutTime") & ")" & " (" & tempRow("TaxiNo") & ")" & " (" & tempRow("PlateNo") & ")" & " (" & tempRow("Model") & ")" & " (" & tempRow("Make") & ")"))
            'ListBox1.Items.Add((tempRow("ControlNo") & " (" & tempRow("EmpNo") & ")"))
            ListBox1.Items.Add(tempRow("ControlNo") & "            " & tempRow("EmpNo") & "            " & tempRow("CheckOutDate") & "            " & tempRow("CheckOutTime") & "            " & tempRow("TaxiNo") & "            " & tempRow("PlateNo") & "            " & tempRow("Model") & "            " & tempRow("Make") & "            ")
        Next
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:11:53.997

首先，我必须同意上面的问题，返回了多少数据。除此之外，我是否可以建议不要循环遍历 DataTable 并填充 ListBox，而是绑定数据：

```
Dim myDataSet As New DataSet()
adpt.Fill(myDataSet, "dbo.ChkInOut")

ListBox1.DataTextField = "yourtext"
ListBox1.DataValueField = "yourvalue"
ListBox1.Datasource = myDataSet
ListBox1.DataBind() 
```

这可能只会提高性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T06:43:58.550

道歉...以为是一个网络应用程序。

试试这个：

```
ListBox1.DataSource = myDataTable 
ListBox1.DisplayMember = "ColumnName" 
```

# android - 使用选项卡和意图打开网页失败？

> ID：14597596
> 
> 赞同：0
> 
> 时间：2013-01-30T05:54:31.720
> 
> 标签：android, android-layout, android-widget

我需要三个选项卡，每个选项卡都打开一个不同的网页。我的代码使用 tabhost 和三个单独的活动。该应用程序第一次运行，但网页无法在第二次试用时打开。我怎样才能解决这个问题？

MyTabActivity.java

```
public class MyTabActivity extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TabHost tabHost = getTabHost();

    tabHost.addTab(tabHost
            .newTabSpec("tab1")
            .setIndicator("Tab1",
                    getResources().getDrawable(R.drawable.home))
            .setContent(new Intent(this, Tab1Activity.class)));

    tabHost.addTab(tabHost
            .newTabSpec("tab2")
            .setIndicator("Tab2",
                    getResources().getDrawable(R.drawable.invoice))
            .setContent(new Intent(this, Tab2Activity.class)));

    tabHost.addTab(tabHost
            .newTabSpec("tab3")
            .setIndicator("Tab3",
                    getResources().getDrawable(R.drawable.products))
            .setContent(new Intent(this, Tab3Activity.class)));
    tabHost.setCurrentTab(0);
    }
 } 
```

Tab1Activity.java

```
 public class Tab1Activity extends Activity {
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Uri uri = Uri.parse( "http://www.yahoo.com" );
    startActivity( new Intent( Intent.ACTION_VIEW, uri ) );
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:55:24.877

由于您拥有所有单独的活动，因此您也可以使用 TabActivity 来实现它。

在 TabHost 中使用启动意图

```
intent= new Intent().setClass(this, yourFirstactivity.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:09:42.203

TabActivity has been deprecated in API Level 13\. A more modern way to achieve what you are trying to do would be using [ActionBar navigation tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs). Use a [WebViewFragment](http://developer.android.com/reference/android/webkit/WebViewFragment.html) for each web page tab.

# android - 图像裁剪背景

> ID：14597597
> 
> 赞同：0
> 
> 时间：2013-01-30T05:54:39.760
> 
> 标签：android, camera, android-camera, crop

我必须在给定的帧中显示相机。每当我展示它时，它就会被拉长。如果我在框架后面的全屏相机上显示相同的内容，它看起来还**不错**，但是当我拍照时，它会给出全尺寸**的图像。我必须只在框架内裁剪图像，**并且需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:41:38.250

您可以将比例设置为适合中心并在相机视图上设置布局参数。就像是 ：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(width, height);

ImageVIew cameraView = (ImageView) LayoutInflater.from(context).inflate(R.layout.camera, null);
cameraView.setLayoutParams(params); 
```

并且在 layout.xml 文件中有类似的内容：

```
android:scaleType="centerCrop"
android:adjustViewBounds="true" 
```

# android - 软键盘出现时 Android HTML5 应用程序闪烁

> ID：14597599
> 
> 赞同：0
> 
> 时间：2013-01-30T05:54:44.157
> 
> 标签：android, html, cordova, jquery-mobile

我正在使用**HTML5**、**Jquery mobile 1.2**和**Phonegap 2.1.0**为 iPhone 和 android 开发应用程序。在登录页面上，当用户点击输入字段时，软键盘出现并且页面以闪烁的效果向上滑动。相同的应用程序在 iPhone 上运行良好。问题仅在Android手机上。

我试过 - **android:windowSoftInputMode="adjustPan"**，它停止闪烁，但软键盘再次覆盖提交按钮，我无法在键盘可见时滚动页面。在本机应用程序中，这是通过将内容包装到 . 但对于 HTML5 应用程序，我无法解决此问题。需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:30:57.323

尝试使用您的 WebView 设置 - setLayerType(View.LAYER_TYPE_SOFTWARE, null)

# excel - Excel DATEVALUE 函数不适用于今天的日期

> ID：14597601
> 
> 赞同：2
> 
> 时间：2013-01-30T05:54:47.177
> 
> 标签：excel, excel-formula

我需要将今天的日期转换为 Excel 单元格公式中的数值。

```
=DATEVALUE(TODAY()) 
```

回报：

> ＃价值！

但如果我使用`=DATEVALUE("03-12-2012")`，返回：

> 41246

谁能告诉我如何获取**今天日期的**日期数字值....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T06:03:40.523

试试这个

```
=DATEVALUE(TEXT(TODAY(),"YYYY-MM-DD")) 
```

该`DATEVALUE`函数要求输入格式正确。该`TODAY`函数以区域设置的格式返回日期。`DATEVALUE`因此，您以函数可以理解的格式格式化日期。

该`TODAY`函数实际上返回当前日期的值，因此将其放入 a`DATEVALUE`只是在循环运行。

您应该只需要使用：

```
=TODAY() 
```

然后将单元格格式化为数字格式而不是日期格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:01:35.947

不太明白你，`DATEVALUE()`将STRING转换为DATETIME。它不会将 DATETIME 转换为数字。在 Excel 中，DATETIME 和数字是可互换的。您只需要更改日期的显示格式，它就可以显示为数字（反之亦然）。你也可以做一个`=TODAY() * 5`，它会工作。excel 中的任何 DATETIME 都存储为 DAY.Hour 格式（0.0 表示 1900 年 1 月 00 日）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:04:42.887

这将起作用：

```
=VALUE(TEXT(TODAY(),"yyyymmdd")) 
```

结果：

```
20130130 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-01T10:55:05.133

试试这个 =DAY(N(TODAY()))。这将返回当前日期的日期值（当前日期在此处自动捕获）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-23T19:34:30.883

```
=N(TODAY())

=N(NOW()) 
```

返回日期和时间

# php - MySQL 数据库性能问题。(MyISAM)

> ID：14597607
> 
> 赞同：0
> 
> 时间：2013-01-30T05:55:07.493
> 
> 标签：php, mysql, myisam

我有在线在线拍卖网站运行近 3 年，并且仍然运行良好。在 3 年内，服务器上已列出并完成了许多拍卖。但是现在服务器上有很多负载，因为数据库服务器上有很多已完成和实时的拍卖。因此网站的性能不是以前的样子。我应该怎么做才能提高性能？所有表都是使用存储引擎“MyISAM”创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:09:32.827

[读这个](http://www.mysqlperformanceblog.com/2006/06/17/using-myisam-in-production/)第一

*   基本和您可以做的第一件事就是索引表格。
*   您必须将[MyISAM 切换到 InnoDB](http://mysql.rjweb.org/doc.php/myisam2innodb)。[阅读更多](https://stackoverflow.com/questions/20148/myisam-versus-innodb)
*   您可以备份现有数据并尽可能从头开始

[阅读更多](http://www.mysqlperformanceblog.com/2009/01/12/should-you-move-from-myisam-to-innodb/)

# linux - 打开屏幕后的 Linux 脚本

> ID：14597612
> 
> 赞同：0
> 
> 时间：2013-01-30T05:55:36.770
> 
> 标签：linux, scripting, gnu-screen

在我的 shell 脚本中，我试图打开一个屏幕并让脚本在屏幕中继续。这可能吗？每次我打开一个屏幕时，脚本都会停止并等待我关闭它以继续。

```
screen -S newScreen; echo "text in screen here" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:00:17.547

我很确定我会像这样开始屏幕。

```
screen -t screen-name 0 command 
```

就我而言，我启动了我的 irc 客户端和其他一些东西，0 是列表中屏幕的编号。所以如果你有更多的增量。

```
screen -t irc 0 irssi 
```

# javascript - 未捕获的 ReferenceError：未定义详细信息

> ID：14597615
> 
> 赞同：1
> 
> 时间：2013-01-30T05:56:01.067
> 
> 标签：javascript

当我在 chrome 中运行下面的代码时，

我收到错误“未捕获的 ReferenceError：未定义详细信息”；

我尝试用名称汉堡包定义对象形状，然后创建汉堡包。

代码有什么问题

非常感谢。

```
function Hamburger(x,y,w,h){
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;

}

var shape = {
    hamburgers: [],
};

function drawshape(x, y, w, h) {

alert(x+' '+y+' '+w+' '+h);

}

shape.details = 
[
    {   
        "detail" : 0,
        "hamburgers" : [{"x" : -290, "y" : -140,"w" : -290, "h" : -140}]

    }   
];

 i = 0;
shape.hamburgers.push(new Hamburger(detail.hamburgers[i].x, detail.hamburgers[i].y,detail.hamburgers[i].w,detail.hamburgers[i].h));

for(var i=0;i<shape.hamburgers.length;i++) {
        var hamburger = shape.hamburgers[i];
        var x = hamburger.x;
        var y = hamburger.y;
        var w = hamburger.w;
        var h = hamburger.h;
        drawshape(x, y, w, h);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:03:35.013

`detail`确实没有定义。试试这个：

```
detail = shape.details[0];

i = 0;
shape.hamburgers.push(new Hamburger(detail.hamburgers[i].x, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:06:40.870

`detail`未定义，因为您实际上是在尝试查找`shape.details[0]`. 定义`detail`为该数组项修复它。

[http://jsfiddle.net/EaPr7/](http://jsfiddle.net/EaPr7/)

# javascript - 变换 CSS 样式对标签没有影响

> ID：14597617
> 
> 赞同：1
> 
> 时间：2013-01-30T05:56:20.467
> 
> 标签：javascript, html, css, webkit, transform

 免责声明：显然没有充分的理由这样做。如果您希望自己`<a>`“可移动”，请将其粘贴在`<div>`.

但我想知道它是否记录在任何地方（以及是否提供了原因）关于这种行为。 

小提琴：http: [//jsfiddle.net/rBYuT/](http://jsfiddle.net/rBYuT/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:58:27.770

`a``display: inline`默认情况下。翻译不能应用于内联元素：

[http://jsfiddle.net/rBYuT/1/](http://jsfiddle.net/rBYuT/1/)

显然这也是一个错误：http: [//jsfiddle.net/Calou/PTkCE/](http://jsfiddle.net/Calou/PTkCE/)

> 根据规范，transform 应该适用于内联元素和块元素。

[http://www.w3.org/TR/css3-2d-transforms/#transform-property](http://www.w3.org/TR/css3-2d-transforms/#transform-property)

# lua - 如何在 Corona 中获得系统声音？

> ID：14597618
> 
> 赞同：0
> 
> 时间：2013-01-30T05:56:33.073
> 
> 标签：lua, coronasdk

我想知道从系统中获取声音的方法。实际上我正在制作一个警报类型的应用程序。我想获取系统声音以进行声音选择。以前我自己添加声音，效果很好。现在我想访问系统声音。我怎样才能做到这一点？

我以前这样做过。

```
local function listButtonRelease2( event )

self2 = event.target
local id = self2.id

if  self2.id==1 then
    alarm = audio.loadSound("sound4.mp3")
    x=display.newText( "Beep", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0
elseif self2.id==2 then
    alarm = audio.loadSound("sound2.mp3")
    x=display.newText( "Buzzer1", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0 
elseif self2.id==3 then
    alarm = audio.loadSound("sound5.mp3")
    x=display.newText( "Buzzer2", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0
elseif self2.id==4 then
    alarm = audio.loadSound("sound3.mp3")
    x=display.newText( "Clock ticking", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0
else 
    x=display.newText( "Emergency", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0
    alarm = audio.loadSound("sound1.mp3")
    x=display.newText( "Sound 5 selected", 20,190, native.systemFontBold, 14 )
    x:setTextColor(0,0,0)
    x.alpha = 0

end 
```

结尾

```
myList2=tableView.newList{
    data=sound,
    default="listItemBg.png",
    over="listItemBg_over.png",
    onRelease=listButtonRelease2,
    top=topBoundary,
    bottom=bottomBoundary,
    callback = function( row )
        local s = display.newGroup()

        local title =  display.newText( row.title, 20, 0, native.systemFontBold, 20 )
        title:setTextColor(0, 0, 0)
        s:insert(title)
        title.y = 30

        local subtitle =  display.newText( row.subtitle, 20, 0, native.systemFont, 14 )
        subtitle:setTextColor(0,0,0)
        s:insert(subtitle)
        subtitle.y = title.y + title.height + 10

    return s   
    end 

sound[1]={}
    sound[1].title="Beep"
    sound[1].subtitle = " "

    sound[2]={}
    sound[2].title="Buzzer1"
    sound[2].subtitle = " "

    sound[3]={}
    sound[3].title="Buzzer2"
    sound[3].subtitle = " "

    sound[4]={}
    sound[4].title="Clock ticking"
    sound[4].subtitle = " "

    sound[5]={}
    sound[5].title="Emergency"
    sound[5].subtitle = " " 
```

好心，指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:47:21.960

Corona 不支持这一点，特别是因为它是多平台的，所以系统声音会随着系统而变化，并且没有明确的方法来确定这一点。

# mysql - Mysql 查询不会在 WHERE 上返回结果，而是在 AND 上

> ID：14597621
> 
> 赞同：3
> 
> 时间：2013-01-30T05:56:51.017
> 
> 标签：mysql

这是我用来连接两个表的查询

```
SELECT `rf_popup`.* 
  FROM `rf_popup` LEFT JOIN 
       `g_metadata` ON (`rf_popup`.`name` = `g_metadata`.`name`) 
 WHERE (`g_metadata`.`g_id` = '2009112305475443' AND 
        `g_metadata`.`value` < rf_popup.cardinality OR 
        `g_metadata`.`g_id` IS NULL) AND 
       `category` IN ('S', 'all') AND 
       `field` IN ('descr', 'all') AND 
       `filler_type` IN ('F2', 'all') 
 ORDER BY `rf_popup`.`priority` DESC LIMIT 5 
```

这是表 rf_popup

```
+--------------+------------------------------------------------------------------------------------+------+-----+---------+----------------+
| Field        | Type                                                                               | Null | Key | Default | Extra          |
+--------------+------------------------------------------------------------------------------------+------+-----+---------+----------------+
| id           | int(11)                                                                            | NO   | PRI | NULL    | auto_increment |
| name         | varchar(200)                                                                       | YES  |     | NULL    |                |
| text         | text                                                                               | YES  |     | NULL    |                |
| cardinality  | int(11)                                                                            | NO   |     | 1       |                |
| field        | varchar(200)                                                                       | YES  |     | NULL    |                |
| category     | enum('A','H','N','R','S','D','all') | YES  |     | NULL    |                |
| time_to_show | enum('START','END')                                                                | YES  |     | START   |                |
| filler_type  | enum('F1','F2','F3','R1','R2','R3','all')   | YES  |     | FILLER1 |                |
| priority     | int(11)                                                                            | NO   |     | 0       |                |
+--------------+------------------------------------------------------------------------ 
```

------------+------+------+---------+-------------- --+

这是表 g_metadata

```
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| g_id  | varchar(50)  | YES  | MUL | NULL    |                |
| name  | varchar(50)  | YES  | MUL | NULL    |                |
| value | varchar(200) | YES  |     | NULL    |                |
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
+-------+--------------+------+-----+---------+----------------+ 
```

但是查询返回空结果。但是如果我`WHERE`在查询中替换为`AND`. 查询返回结果。有什么区别？？应该没有什么区别所以我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:03:52.463

简单来说`WHERE`就是过滤*整个结果集*，`JOIN ... ON`只过滤连接的表。

由于您有一个`LEFT JOIN`here，因此将过滤器放在`ON`子句中会限制为`g_metadata`表返回的结果，但不会影响为`rf_popup`. 也就是说，您将在连接表 ( `g_metadata`) 中获得空列，但`rf_popup`仍会拉出 for 的行。

另一方面，将过滤器放在`WHERE`子句中首先执行连接，然后过滤*生成的（连接的）结果集*。也就是说，`WHERE`根本不返回与整个子句不匹配的行。

* * *

考虑以下简化示例：

```
表A：

ID
-----
1
2
3

表B：

编号 | 是的
-----+------
1 | 是的
2 | 不
3 | 是的

```

1.  一个简单的连接：

    ```
    SELECT * 
    FROM TableA 
    LEFT JOIN TableB ON TableA.id = TableB.id 
    ```

    返回

    ```
    身份证 | B.id | 是的
    -----+------+------
    1 | 1 | 是的
    2 | 2 | 不
    3 | 3 | 是的

    ```

2.  在`ON`子句中过滤：

    ```
    SELECT * 
    FROM TableA 
    LEFT JOIN TableB ON TableA.id = TableB.id
        AND yesNo = 'yes' 
    ```

    返回

    ```
    身份证 | B.id | 是的
    -----+------+------
    1 | 1 | 是的
    2 | 空 | 空值
    3 | 3 | 是的

    ```

3.  在`WHERE`子句中过滤：

    ```
    SELECT * 
    FROM TableA 
    LEFT JOIN TableB ON TableA.id = TableB.id
    WHERE yesNo = 'yes' 
    ```

    返回

    ```
    身份证 | B.id | 是的
    -----+------+------
    1 | 1 | 是的
    3 | 3 | 是的

    ```

# c++ - 无法获取地址 (wcsstr) - 未定义的变量？

> ID：14597623
> 
> 赞同：1
> 
> 时间：2013-01-30T05:56:52.423
> 
> 标签：c++, function

我想知道所有标准功能的所有地址。但只有**wcsstr**很奇怪。我无法将其转换或推送为参数来记录地址值。尽管 ：

```
void *address = printf; //OK
void *address = scanf; //OK
void *address = wcsstr; //Compling error!!!

error C2440: 'initializing' : cannot convert from '' to 'void *' 
```

它的定义很奇怪。**''**定义是什么？也许是“**复杂的函数定义？？？** ”

甚至方法：

```
printf("Address of wcsstr : 0x%X", wcsstr); 
```

我还发现了疯狂的编译错误：

```
error C2664: 'printf' : cannot convert parameter 2 from 
'unsigned short *(unsigned short *,const unsigned short *)' to '...' 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:11:40.177

Apart from the conversion being non-standard, you can use a `static_cast` to select the desired overload of the function.

E.g.

```
void *address = static_cast<wchar_t const* (*) ( const wchar_t*, const wchar_t* )>( wcsstr ); 
```

Or more clear (IMHO),

```
typedef wchar_t const* Foo( const wchar_t*, const wchar_t* );
void *address = static_cast<Foo*>( wcsstr ); 
```

Possibly add a `const` there, it’s nearly always a good idea… ;-)

# actionscript-3 - AS3 - FLVPlayback 组件完成处理程序

> ID：14597626
> 
> 赞同：0
> 
> 时间：2013-01-30T05:57:05.647
> 
> 标签：actionscript-3, event-handling, flvplayback

我有一个 FLVPlayback 组件，名为 flvPlayer 的实例。下面的代码在介绍场景的第 1 帧中，它**在 Flash CS5 中工作得非常好，**但在 CS6 中却不行！显然我希望视频播放器在视频结束时跳转到下一个场景。

```
import fl.video.*;

flvPlayer.source = "videos/1.flv";

flvPlayer.addEventListener(VideoEvent.COMPLETE, completeHandler);

function completeHandler(event:VideoEvent):void
{
    MovieClip(this.root).gotoAndPlay(1, "mainScene");
} 
```

在 CS6 中，它给了我这个编译错误：

![在此处输入图像描述](../Images/46d2de0ef3cfd1b712f09fba7f4da05e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:08:07.677

可能不是 CS5 或 CS6 的问题，而是 flash 的目标运行时版本的问题。

[VideoEvent.COMPLETE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/video/VideoEvent.html)在 flash 10.1 及以下版本中定义。

尝试使用`Event.COMPLETE`代替 `VideoEvent.COMPLETE`（来自[此讨论](http://www.kirupa.com/forum/showthread.php?370085-VideoEvent-COMPLETE-is-not-working-in-cs5-5)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:13:32.720

我怀疑最新的 CS6/Flash 内容存在一个奇怪的命名空间问题。尝试用`VideoEvent`完整的命名空间替换所有引用`fl.video.VideoEvent`：

```
import fl.video.*;

flvPlayer.source = "videos/1.flv";

flvPlayer.addEventListener(fl.video.VideoEvent.COMPLETE, completeHandler);

function completeHandler(evt:fl.video.VideoEvent):void
{
    MovieClip(this.root).gotoAndPlay(1, "mainScene");
} 
```

# xml - 添加授权角色以使用 xsl 访问 XML(WSDL) 文件

> ID：14597628
> 
> 赞同：0
> 
> 时间：2013-01-30T05:57:11.203
> 
> 标签：xml, xslt, xsd, wsdl, mule

我有一个 WSDL，我想在上面添加权限，让所有人都看不到上面的所有方法：

```
 <wsdl:types>
    ...
  </wsdl:types>

  <wsdl:message>
    ...
  </wsdl:message>

  <wsdl:portType name="countrySoap">
     <wsdl:operation name="GetCountryByCountryCode">
         <wsdl:documentation>Get country name by country code</wsdl:documentation>
         <wsdl:input message="tns:GetCountryByCountryCodeSoapIn" />
         <wsdl:output message="tns:GetCountryByCountryCodeSoapOut" />
     </wsdl:operation>
    <wsdl:operation name="GetISD">
        <wsdl:documentation>Get International Dialing Code </wsdl:documentation>
        <wsdl:input message="tns:GetISDSoapIn" />
        <wsdl:output message="tns:GetISDSoapOut" />
    </wsdl:operation>
    ...
  </wsdl:portType> 
```

……

现在我想限制对这部分 WSDL 的访问：

```
<wsdl:operation name="GetISD">
    <wsdl:documentation>Get International Dialing Code </wsdl:documentation>
    <wsdl:input message="tns:GetISDSoapIn" />
    <wsdl:output message="tns:GetISDSoapOut" />
</wsdl:operation> 
```

意思是：我想让 CLient-X 有这个角色来查看这个方法，但是 Client-Y 没有足够的角色来查看这个方法？

如何使用 xsl 语言在 .xslt 文件中使用此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:05:18.797

*   在 Mule 中，用于`mulexml:context-property`将[有关](http://www.mulesoft.org/documentation/display/MULE3USER/XSLT+Transformer#XSLTTransformer-Example)用户权限的信息传递给 XSL，
*   在 XSL 中，使用[条件处理原语](http://www.w3.org/TR/xslt#section-Conditional-Processing)`wsdl:operation`根据用户权限信息控制元素的输出。

当然，根据用户权限以不同方式呈现 WSDL 是问题的一半：您还必须拒绝未经授权的 SOAP 请求。

# c++ - GTKmm Hello World 编译错误

> ID：14597634
> 
> 赞同：0
> 
> 时间：2013-01-30T05:57:53.620
> 
> 标签：c++, compiler-errors, gtkmm

所以我正在用 C++ 制作一个基本的 hello world 应用程序这是代码

查看.h

```
#ifndef VIEW_H
#define VIEW_H

#include <gtkmm/button.h>
#include <gtkmm/window.h>

class View : public Gtk::Window
{
    public:
        View();
        virtual ~View();

protected:
    //signal handlers
    void on_button_clicked();

    //Member Widgets
    Gtk::Button m_button;
}

#endif 
```

查看.cpp

```
#include "helloWorld.h"
#include <iostream>

View::View(): m_buton("Hello World")
{
set_border_width(10);

m_button.signal_clicked().connect(sigc::mem_fun(*this, &View::on_button_clicked));

add (m_button);

m_button.show();

}

View::~View()
{
}

void View::on_button_clicked()
{
        std::cout << "Hello World" << std::endl;
} 
```

主文件

```
#include "View.h"
#include <gtkmm/main.h>

int main (int argc, char *argv[])
{
Gtk::Main kit(argc, argv);

View helloWorld;

Gtk::Main::run(helloWorld);

return 0;
} 
```

最后是我的makefile

```
Out: Main.o View.o
    g++ -o Out Main.o View.o `pkg-config gtkmm-3.0 --cflags --libs`

Main.o: Main.cpp View.h
    g++ -c Main.cpp `pkg-config gtkmm-3.0 --cflags --libs`

View.o: View.cpp View.h
    g++ -c View.cpp `pkg-config gtkmm-3.0 --cflags --libs` 
```

我安装了 Gtkmm 3.0，并四处寻找答案，我的错误是

```
g++ -c Main.cpp `pkg-config gtkmm-3.0 --cflags --libs`
In file included from /usr/include/glibmm-2.4/glibmm/optioncontext.h:27:0,
                 from /usr/include/gtkmm-3.0/gtkmm/main.h:36,
                 from Main.cpp:2:
/usr/include/glibmm-2.4/glibmm/optionentry.h:30:8: error: expected unqualified-id before string constant
make: *** [Main.o] Error 1 
```

我该如何解决？在我看来，我的主要方法中的某个地方触发了 gtkmm 代码的问题？我很困惑我的代码几乎正是我在网上找到的如何做到这一点我只是将 HelloWorld 类的名称更改为 View

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:02:25.870

您忘记了`;`类定义末尾的 。

# iphone - 自定义 UI 滑块，拇指图像大小问题

> ID：14597635
> 
> 赞同：4
> 
> 时间：2013-01-30T05:58:00.323
> 
> 标签：iphone, objective-c, xcode, ios6, uislider

当我正在制作一个自定义滑块时，每件事都运行良好。因为我有一个宽度和高度为 30x70 的拇指图像。但是当我实现图像时，它会自行改变其方向并以 70x30 显示。

我也尝试更改图像，但拇指滑块为 70x30。我想以垂直方式显示图像，但它以水平方式显示在`UISlider`.

任何人都可以帮忙吗？

```
 [self setThumbImage:[UIImage imageNamed:@"slider.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T06:07:49.307

如果要更改 UISlider 外观，请使用以下方法
`[[UISlider appearance] setThumbImage:[UIImage imageNamed:@"slider.png"] forState:UIControlStateNormal];`

# ios - RestKit：Xcode 项目无法识别 RKClient

> ID：14597640
> 
> 赞同：2
> 
> 时间：2013-01-30T05:58:30.787
> 
> 标签：ios, xcode, rest, restkit

我目前正在我的项目中使用/实现**RestKit**，并且我已经按照 github wiki 正确安装了所有内容。一切都在那里并且工作正常。该应用程序构建并运行良好。我现在只是尝试通过首先设置来发出 HTTP GET 请求，但是即使我已将文件导入到文件的标题中`RKClient`，我的项目似乎也无法识别。`RKClient``<RestKit/Restkit.h>`

我开始认为`RKClient`该类已被弃用或其他原因，因为其他所有类似乎都按预期存在。

我已经尝试到处寻找并真正确保我已按照说明正确设置**RestKit**，但我仍然停留在第一行！（初始化`RKClient`）。

另一种可能性是我做错了。我刚刚实现了这个库，所以我只是在玩它。但是，如果我没有以正确的方式发出 HTTP GET 请求，请指导我正确的方向。

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T06:03:16.007

从 RestKit 0.20.x 开始，RKClient 不再是 RestKit 的一部分。您可以像这样使用 HTTP 客户端：

```
 [RKObjectManager myObjManager].HTTPClient 
```

看到这个[链接](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

# file - While writing data to a text file returned by server, some extra garbage values inserted in some lines

> ID：14597645
> 
> 赞同：0
> 
> 时间：2013-01-30T05:58:53.137
> 
> 标签：file, sockets, text-files, openstreetmap, garbage

This is the code where the socket has been created and recieved data is stored in a text file

```
// Initialize Winsock.
    cout << "connecting1\n";
    WSADATA wsadata;
    int iResult = WSAStartup (MAKEWORD(2,2), &wsadata );
    if (iResult !=NO_ERROR )
        printf("\nmyERROR at WSAStartup()\n");
    int sock = socket(AF_INET, SOCK_STREAM, 0);
    if (sock == -1) {
        perror("error opening socket"); return -1;
    }
    struct sockaddr_in sin;
    sin.sin_port = htons(port);
    sin.sin_addr.s_addr = inet_addr(host.c_str());
    sin.sin_family = AF_INET;

    if (connect(sock, (struct sockaddr *)&sin, sizeof(sin)) == -1) {
        perror("error connecting to host"); return -1;
    }
    const int query_len = query.length() + 1; // trailing '\0'
    if (send(sock, query.c_str(), query_len, 0) != query_len) {
        perror("error sending query"); return -1;
    }

    const int buf_size = 1024 * 1024;
    while (true) {
    std::vector<char> buf(buf_size, '\0');
    const int recv_len = recv(sock, &buf[0], buf_size - 1, 0);

    if (recv_len == -1) {
        perror("error receiving response"); return -1;
    } else if (recv_len == 0) {
        std::cout << std::endl; break; 
    } else {
       std::cout << &buf[0];
   fprintf(fp, "%s", &buf[0]);   // this lines writes to file
    }
} 
```

here the data is returned mostly in proper format, but in some cases this happens :

```
{
  "type": "node",
  "id":

1000     // this 1000 is un-wanted

 1812432236,
  "lat": 20.2608987,
  "lon": 85.8379894
}, 
```

so my program fails to parse this node properly. While writing the query in url, the data is displayed in proper format. Also the garbage value gets inserted in the same place every time I run the program. Why could this be happening ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:22:31.650

I got answer from openStreetMap help forum, which was more specific to the above question...

[link to question I posted there](https://help.openstreetmap.org/questions/19424/this-program-to-retrieve-the-nodes-and-ways-returns-some-extra-garbage-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:10:33.757

In the recv function, it calls for a character pointer for the buffer. You have buffer declared to be a vector of chars, which is not the same as char buf[1024*1024]. So I believe the vector is returning a string of the structure of the item when you print it to file. The vector contains 1024*1024 objects of type char, not a 1024*1024 size of contiguous memory to store characters. The 1024*1024 vector contains chars objects stored as separate elements, but not as a continuous allocation in memory.

I would change to **std::vector buf(buf_size, '\0');** to **char buf[1024*1024];** and then do a **memset(buf, 0, 1024*1024)** before you read the data using recv. I believe that will correct the issue (assuming you are not sending over a \0 over the socket as data, which would indicate the end of the string, in which case %s would stopping printing out the data at that point).

# visual-studio-2010 - 这个 sysgen 错误的原因是什么？

> ID：14597647
> 
> 赞同：0
> 
> 时间：2013-01-30T05:58:58.937
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, embedded, windows-ce

(Windows CE 7)

如果我给出“clean sysgen”（blddemo clean -q），我会收到以下错误：

```
SYSGEN: BUILDMSG: Found localized resources for Languages ( 0404 0407 0409 040c 0410 0411 0412 0413 0416 0419 041d 0804 0c0a)
Res2Res: ERROR: Failed CreateFileW("C:\DOCUME~1\KESHAV~1.IWA\LOCALS~1\Temp\R2R1000.tmp", RW, RW, 0, Existing, Normal, 0), GetLastError = 5\. {log="C:\WINCE700\build.log(18570)"}
Res2Res: ERROR: Failed CreateFileW("C:\DOCUME~1\KESHAV~1.IWA\LOCALS~1\Temp\R2R1000.tmp", RW, RW, 0, Existing, Normal, 0), GetLastError = 5\. {log="C:\WINCE700\build.log(18571)"}
NMAKE : fatal error U1077: 'C:\WINCE700\public\common\oak\Bin\i386\res2res.EXE' : return code '0xffffffff' {log="C:\WINCE700\build.log(18572)"}
NMAKE : fatal error U1077: 'C:\WINCE700\sdk\bin\i386\nmake.exe' : return code '0x2' {log="C:\WINCE700\build.log(18574)"}
SYSGEN: ERROR: error(s) in sysgen phase ( ie7 ) {log="C:\WINCE700\build.log(18576)"} 
```

（错误列表：

![错误列表：清理 Sysgen](../Images/a31582b410545e13ef2d36c246390b91.png))

稍后，如果我给“sysgen”（blddemo -q），不会有任何错误并且构建成功。

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:06:43.950

错误代码 5 是[ACCESS_DENIED](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)。您是否在构建机器上以管理权限运行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T11:19:43.073

此错误是因为我的系统上运行了防病毒代理 (Symantec Endpoint Protection)。

它通过禁用 SEP 程序来解决。

# javascript - 在 Javascript 或 jQuery 中制作标签

> ID：14597653
> 
> 赞同：0
> 
> 时间：2013-01-30T05:59:16.830
> 
> 标签：javascript, jquery

> **可能重复：**
> [多个切换几乎就像标签 JavaScript/CSS](https://stackoverflow.com/questions/14289925/multiple-toggles-almost-like-tabs-javascript-css)

我正在寻找用 javascript 或 jquery 制作的选项卡，无论哪个更容易直接实现到 html 文档中，即代码本身。我真的不需要 CSS，我只需要一些关于如何将它实现到我的内容中的标记。

这是这种情况。我有类似缩略图的图像，它们本身充当“标签”，而我的内容在它们之上，所以看起来有点像这样......

> ```
>  Dynamic Content Here 
> ```

```
thumbnail1  thumbnail2  thumbnail3 
```

当然，动态内容会根据单击的缩略图而变化。我只希望一个缩略图的内容一次处于活动状态。这意味着，所有其他内容必须在一个内容处于活动状态时隐藏。

此外，我在这样的循环中生成这些

```
while some condition in php 
```

> > 内容生成
> > 
> > 与生成的内容相关的缩略图

此循环运行几个缩略图，并具有与该特定缩略图相关联的内容。这就是我确定单击缩略图时将显示哪些内容的方式。

第一个缩略图及其内容应自动激活并显示，就像普通选项卡一样。我看到的唯一区别是选项卡（在我的例子中是缩略图）位于底部，而内容位于顶部。

我在使用其他解决方案时遇到的另一个问题是将标记实现到循环中。像这样简单的标记对我来说非常容易实现......

```
<div class="tabs">
while some condition in php 

<div class="content" id="<?php adynamicIDgenerated ?>"> 
```

> > 内容生成

```
</div>

<div class="tab" id="<?php thesameexactID so it can be matched; ?>"> 
```

> > 与生成的内容相关的缩略图

```
</div>

</div> 
```

当然，循环中的 div 语句将为每个选项卡生成。他们会有自己的身份证。基本上，使用缩略图生成的内容可以很容易地与具有相同 ID 的内容相匹配。我能够用它创建一个切换。我在创建具有这些规范的选项卡时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:18:15.207

**编辑更新您可以将其与 Loops 和 Php 一起使用，如下所示**

```
for($i=1 ; $i < num; $i++)
{
  echo("<div id='".$i."'><img src='img-source.jpg' height='50px' widht='50px' id='thumbnail' ></div><br>");
}

<div id="thumb"><img src='Default.jpg' height='200px' widht='200px' ></div>

 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script>

   $("#thumbnail").click(function() {
var imgsrc = $("img#thumbnail").attr("src");
   $("#thumb").html("<img src='"+imgsrc+"' height='200px' widht='200px' >");
     });

 </script> 
```

你可以试试这个**[DEMO](http://bloggerplugnplay.blogspot.in/2013/01/change-image-with-click-on-tabs-or.html)**

**HTML 代码**

```
<div id="one"><img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='50px' widht='50px' ></div><br>
<div id="two"><img src='http://ww2.valdosta.edu/~mecarter/Spongebob%20Reading.png' height='50px' widht='50px' ></div><br>
<div id="three"><img src='http://www.cliffdweller.com/blogPhotos/wrappingpaperbase/Spongebob%20Waving.png' height='50px' widht='50px' ></div><br><br>
<div id="thumb"><img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='200px' widht='200px' ></div> 
```

**jQuery**

```
$("#one").click(function() {
  $("#thumb").html("<img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='200px' widht='200px' >");
});

$("#two").click(function() {
  $("#thumb").html("<img src='http://ww2.valdosta.edu/~mecarter/Spongebob%20Reading.png' height='200px' widht='200px' >");
 });

$("#three").click(function() {
   $("#thumb").html("<img src='http://www.cliffdweller.com/blogPhotos/wrappingpaperbase/Spongebob%20Waving.png' height='200px' widht='200px' >");
}); 
```

# android - 在我的 android 应用程序中禁用屏幕截图

> ID：14597658
> 
> 赞同：7
> 
> 时间：2013-01-30T05:59:47.690
> 
> 标签：android, google-maps, screenshot

我有我当前的 android 应用程序，它**不允许用户截屏**。

**我** `getWindow().setFlags(LayoutParams.FLAG_SECURE, LayoutParams.FLAG_SECURE);` **在我的 onCreate() 方法中**使用并且工作得很好。

现在我的问题出在我的一个屏幕上，我正在用一些路线将用户导航到谷歌地图。我也不希望用户在那个屏幕上截屏。我当前的实现禁止用户从我的应用程序中截屏。但我不希望该用户在离开我的应用程序时也可以截取谷歌地图的屏幕截图。是否有任何解决方案或任何解决方法。任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:08:55.730

考虑使用[MapActivity](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapActivity) ，而不是提示 3rd 方应用程序。

然后你可以在布局中放置一个 MapView 并显示地图。在这种情况下，您将能够通过安全标志控制限制。

只需将相同的代码放在 onCreate() 方法中，就像您在其他活动中所做的那样。

# windows - 在公用电脑上，使用WindowsXP，如何根据登录用户更改IP地址？

> ID：14597660
> 
> 赞同：0
> 
> 时间：2013-01-30T05:59:53.540
> 
> 标签：windows, shell, windows-xp

我有用户名和 IP 地址的映射。我需要一个解决方案，当有人登录时，系统会自动为他更改 IP 地址。我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:19:05.257

我认为通过将下面的代码放在 .bat 文件中是可能的。但首先你需要有一个文本文件，其中用户名和 ip 用逗号分隔，例如：

**地图.txt**：

```
user1,xxx.xxx.xxx.xxx 
user2,xxx.xxx.xxx.xxx 
```

并将下面的代码放在带有 .bat 扩展名的批处理文件中

```
FOR /F "tokens=1,2 delims=," %%G IN (D:\map.txt) DO (
   if %USERNAME%==%%G (
   netsh int ip set address name="Local Area Connection" source=static addr=%%H mask=255.255.255.0
   )
) 
```

然后将批处理文件安排到具有最高权限的 Windows 登录。这样，一旦用户登录，他的 IP 就会更改。

# objective-c - 结合 NSURL 和普通字符串的语法？

> ID：14597662
> 
> 赞同：0
> 
> 时间：2013-01-30T06:00:03.757
> 
> 标签：objective-c

我可以使用什么语法来完成这项工作？ `UIImage`和`NSURL`

`banner.image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.website.com/file.file"+placemark.administrativeArea+@".png"]]];`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:06:47.123

使用这种方式：

```
banner.image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.website.com/file.file%@.png",placemark.administrativeArea]]]]; 
```

不要在一行中使用这么多语句。
IT有几个问题，例如难以理解和难以发现错误。

我建议这样：

```
NSString *imgStr = [NSString stringWithFormat:@"http://www.website.com/file.file%@.png",placemark.administrativeArea];
NSURL *imgURL = [NSURL URLWithString:imgStr];
NSData *imgData = [NSData dataWithContentsOfURL:imgURL];
UIImage *img = [[UIImage alloc] initWithData:imgData];
banner.image = img; 
```

但这取决于你。

再会..

# vba - 使用带有过滤器的 FileSystemObject (VBA)

> ID：14597664
> 
> 赞同：1
> 
> 时间：2013-01-30T06:00:16.613
> 
> 标签：vba, filesystemobject

使用我的代码，我必须编写一个文件名来搜索：“test.txt”。它工作正常，返回与所选路径中存在的 test.txt 一样多。

我希望它能够搜索：“txt”并获取所选路径中的所有 .txt 文件。

我的代码：

```
Option Explicit

Dim fso As New FileSystemObject
Dim fld As Folder

Private Sub Command1_Click()
   Dim nDirs As Long, nFiles As Long, lSize As Currency
   Dim sDir As String, sSrchString As String
   sDir = InputBox("Type the directory that you want to search for", _
                   "FileSystemObjects example", "C:\")
   sSrchString = InputBox("Type the file name that you want to search for", _
                   "FileSystemObjects example", "")
  ' MousePointer = vbHourglass
  ' Label1.Caption = "Searching " & vbCrLf & UCase(sDir) & "..."
   lSize = FindFile(sDir, sSrchString, nDirs, nFiles)
  ' MousePointer = vbDefault
   MsgBox Str(nFiles) & " files found in" & Str(nDirs) & _
          " directories", vbInformation
   MsgBox "Total Size = " & lSize & " bytes"
End Sub

Private Function FindFile(ByVal sFol As String, sFile As String, _
   nDirs As Long, nFiles As Long) As Currency
   Dim tFld As Folder, tFil As File, FileName As String

   On Error GoTo Catch
   Set fld = fso.GetFolder(sFol)
   FileName = Dir(fso.BuildPath(fld.path, sFile), vbNormal Or _
                  vbHidden Or vbSystem Or vbReadOnly)
   While Len(FileName) <> 0
      FindFile = FindFile + FileLen(fso.BuildPath(fld.path, _
      FileName))
      nFiles = nFiles + 1
   '   List1.AddItem fso.BuildPath(fld.Path, FileName)  ' Load ListBox
      FileName = Dir()  ' Get next file
      DoEvents
   Wend
  ' Label1 = "Searching " & vbCrLf & fld.Path & "..."
   nDirs = nDirs + 1
   If fld.SubFolders.Count > 0 Then
      For Each tFld In fld.SubFolders
         DoEvents
         FindFile = FindFile + FindFile(tFld.Path, sFile, nDirs, nFiles)
      Next
   End If
   Exit Function
Catch:  FileName = ""
       Resume Next
End Function 
```

**和一个提示，我发现了类似的东西：**

```
For Each file In files
                    If Right(file, 3) = "pdf" Then
                        myMailItem.Attachments.Add CStr(file)
                        found = True
                    End If 
```

但我无法让它在我的代码中工作。

谢谢！

# oracle - Oracle 创建表来处理valid_from 和valid_to 数据

> ID：14597666
> 
> 赞同：1
> 
> 时间：2013-01-30T06:00:20.143
> 
> 标签：oracle, create-table

我正在设计一个表，其中包括两列 valid_from 和 valid_to 以跟踪历史变化。例如，我的表结构如下：

```
create table currency_data
(
 currency_code varchar(16) not null,
 currency_desc varchar(16) not null,
 valid_from date not null,
 valid_to date,
 d_insert_date date,
 d_last_update date,
 constraint pk_currency_data primary key (currency_code, valid_from)
) 
```

这个想法是将valid_to保留为空白开始，如果currency_desc将来发生变化，我需要将valid_to设置为旧描述不再有效的日期，并创建一个新行有效的_来自。但是我怎样才能确保这两行之间永远不会有重叠。例如，下面的查询应该只产生一行。

```
select currency_desc
  from currency_data
 where currency_code = 'USD'
   and trunc(sysdate) between valid_from and nvl(valid_to, sysdate) 
```

除了确保所有开发人员/最终用户都了解此规则之外，是否有更好的方法来实现这一点。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:16:01.007

有一组已知的实现方法[`slowly changing dimensions (SCD)`](http://en.wikipedia.org/wiki/Slowly_changing_dimension)用于处理这种存储。

您目前正在实施的是 SCD II，但是，还有更多。

关于您可能的间隔重叠问题 - 没有简单的方法来强制执行表级（而不是行级）与标准约束的一致性，所以我想一种强大的方法是将直接 DML 限制到该表并将其包装成一些标准化pl/sql API，它将在插入/更新之前强制执行您的规则，并且每个开发人员都会使用它。

# c++ - 保存应用程序设置 MFC CArchive 方式

> ID：14597671
> 
> 赞同：0
> 
> 时间：2013-01-30T06:00:49.767
> 
> 标签：c++, serialization, mfc, carchive

我在应用程序中有几个设置，我想在更改它时保存。有复选框：

```
void CL2HamsterDlg::OnBnClickedCheckAutoselect()
{
    CFile theFile( pFileName1,CFile::modeWrite );
    CArchive ar(&theFile, CArchive::store);
    if(c_Acheck.GetCheck()==BST_UNCHECKED)
        a = 0;
    else
        a = 1;
    ar << a;
    ar.Close();
    theFile.Close();
} 
```

和带有保存按钮的组合框（当按下保存保存组合内容时）：

```
void CL2HamsterDlg::OnClickedButtonLoad()
{
    Value.GetWindowText(str);
    CFile theFile( pFileName1,CFile::modeWrite );
    CArchive ar(&theFile, CArchive::store);
    ar << Savename;
    ar.Close();
    theFile.Close();
} 
```

在初始化应用程序必须加载这些设置并设置它：

```
BOOL CL2HamsterDlg::OnInitDialog()
{
    CDialogEx::OnInitDialog();
    pFileName1 = "settings.dat";    
    theFile.Open( pFileName1,CFile::modeRead );
    CArchive ar(&theFile, CArchive::load);
    ar >> a;
    ar.Close();
    theFile.Close();
    if(a == 1)
        c_Acheck.SetCheck(BST_CHECKED);
    return TRUE;
} 
```

但是当一个或另一个设置改变程序覆盖文件时。

附言。我不想使用注册表（因为便携）

我的问题是如何以序列化方式编写和读取设置？

有什么可用的替代方法来保存程序设置状态？（请举例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:06:57.007

每次发生更改时，您都需要将所有设置写入存档。因此，当程序启动时，从存档文件中加载所有设置。

# java - Java中的嵌套while循环

> ID：14597675
> 
> 赞同：1
> 
> 时间：2013-01-30T06:01:41.427
> 
> 标签：java, loops, while-loop, nested-loops

我的java程序中有一些嵌套的while循环有一个大问题。根据我调试的代码，我检查了第二个 while 循环语句一次，然后永远退出循环。我不知道为什么会这样，所以我将在这里发布代码：

```
while (current != null) {
        if(id == current.getMovie().getId()) {
           movieExists = true;
           movie = current;
           while (checkCurrent == movie) {
              showingPointer = checkCurrent.getMovie().getLinkHead();
              while (showingPointer != null) {
                 if (cal.compareTo(showingPointer.getShowing().getShowingCalendar()) == 0) {
                    return false;
                 }
                 showingPointer = showingPointer.getNext();
              }
              checkCurrent = checkCurrent.getNext();       
           }        
        }
        current = current.getNext();
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T06:07:31.020

这个说法

```
while (checkCurrent == movie) { 
```

比较对象引用并始终为 false 。这不是比较两个实例的方法

您可能想要更改代码以比较类似的值

```
 while(checkCurrent.getMovie().getId() == movie.getMovie().getId()){ 
```

或者有一个 equals() 实现来比较。

更多关于[等于](http://www.javaranch.com/journal/2002/10/equalhash.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:04:06.290

我猜你在执行代码时会来到 return false 行。如果 return 语句正在执行，它将立即从方法返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:07:09.777

为什么`return false`？这不是打破循环的正确方法。改为使用`break`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:15:28.187

`while (checkCurrent == movie)`您应该在 Node 类中使用`Comparator`接口并覆盖其`compare`方法，然后比较您的对象，而不是这样做。由于`==`比较对象引用，所以它不适用于您的情况。

# c# - 在 asp.net，c# 中创建带有子操作项的下拉列表

> ID：14597679
> 
> 赞同：-1
> 
> 时间：2013-01-30T06:02:03.030
> 
> 标签：c#, asp.net, drop-down-menu

我需要创建一个项目的下拉列表。它应该有一个动作和一个子动作。例如，无序列表的外观。我必须只在我的代码后面做。我得到一个 ListItemCollection 并将其绑定到下拉列表。所以在我将它绑定到下拉列表之前，我必须做一些事情来使下拉列表看起来像我需要的那样。

请帮帮我。

提前感谢桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:46:18.090

解决方案是子类 DropDownList 类并在渲染项目时使用[optgroup属性。](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)

查看此链接：http: [//ignatu.co.uk/articles/Adding_groups_to_the_ASPNET_DropDownList_control/](http://ignatu.co.uk/articles/Adding_groups_to_the_ASPNET_DropDownList_control/)

# c# - 在选择下拉列表项时显示弹出窗口

> ID：14597683
> 
> 赞同：-6
> 
> 时间：2013-01-30T06:02:26.253
> 
> 标签：c#, javascript, asp.net

我有`dropdownlist`4 个`list`项目。如果我选择一个列表项，我想显示一个弹出窗口。同样在弹出窗口中，我必须显示一个应该导航到另一个页面的超链接。请给我建议和指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:09:36.513

Try this. Add this script on your page

```
 <script type="text/javascript">
    function OpenWindow(query, w, h, scroll) 
    {
      var l = (screen.width - w) / 2;
      var t = (screen.height - h) / 2;

      winprops = 'resizable=0, height=' + h + ',width=' + w + ',top=' + t     
                  + ',left=' + l + 'w';
      if (scroll) winprops += ',scrollbars=1';
      var f = window.open(query, "_blank", winprops);
    }

    function OpenOnchange{
      //$(function () {
        //  $('#DropDownID').click(function () {
              OpenWindow('add your page path', 300, 300, true);
          //});
      //});
   }
</script> 
```

call **OpenOnchange** funcation from you dropdownchange event for ex.

```
<asp:DropDownList ID="MydropDown" runat="server" onchange="OpenOnchange();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:23:31.460

试试这个代码：

埃克斯：

```
 <asp:DropDownList ID="ddldropdown" runat="server" OnSelectedIndexChanged="ddldropdown_selected">
       <asp:ListItem Text="sometext" Value="value"/> 
```

代码隐藏：

```
 protected void ddldropdown_selected(object sender, EventArgs e)
{
    if (ddldropdown.SelectedValue == "value")
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function",     "showpopup();", true);
    }
} 
```

脚本：

```
 function showpopup() {
    $("#divid").fadeIn('slow');

  }
  function hidepopup() {
    $('#divid').fadeOut("slow");
  } 
```

在您的 aspx 页面中创建一个 div 并根据您的要求设计弹出窗口并将 id 传递给脚本。

# windows-phone-7 - Windows Phone 7 中的警报功能？

> ID：14597687
> 
> 赞同：0
> 
> 时间：2013-01-30T06:02:44.547
> 
> 标签：windows-phone-7, windows-phone-7.1

我在 sqlite 数据库中节省时间。我的应用程序中有五个屏幕。在第一个屏幕中，我正在添加详细信息，包括 sqlite 数据库中的时间。在第二个屏幕中，我从 sqlite 数据库中获取详细信息，向用户显示详细信息。在该页面中，我写了`alarm.Begintime=sqlitestoreddatetimevalue;`如果用户在同一页面中给出的警报功能，那么只会发出警报。如果用户关闭应用程序，则警报不起作用。如何做到这一点？

在哪里编写警报功能以调用来自 sqlitee 数据库的 application.time 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:20:18.043

您需要将警报添加到*ScheduledActionService*以便向系统注册警报，以便警报响起。

假设*alarmTime*是存储警报应该响起的时间的变量，请执行以下操作：

```
var alarm = new Microsoft.Phone.Scheduler.Alarm(System.Guid.NewGuid().ToString())
            {
                Content = "Alarm Text",
                BeginTime = alarmTime,
                Sound = new Uri("Location of Sound file which the alarm will use when triggered", UriKind.Relative),
                //RecurrenceType = RecurrenceInterval.None
            };
                ScheduledActionService.Add(alarm); 
```

如需更多帮助，请查看此[链接](http://www.kunal-chowdhury.com/2011/06/windows-phone-7-mango-tutorial-16-how.html)。

# java - Java 正则表达式，奇怪的错误

> ID：14597693
> 
> 赞同：2
> 
> 时间：2013-01-30T06:03:26.393
> 
> 标签：java, regex

我会得到一个`false`if 运行以下代码，但如果我从中删除`Pattern.CASE_INSENSITIVE`，`Pattern.compile`结果为 true

```
public static void main(String[] args) {
    Pattern p = Pattern.compile(".*(?<!S)\\.a\\s*\\(\\s*\\)\\s*$", Pattern.CASE_INSENSITIVE);
    String s = "attributes.a()";
    Matcher m = p.matcher(s);
    System.out.println(m.matches());
} 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T06:16:28.257

为什么奇怪？它按预期工作，可能是由于您作为^(第二)个参数传递的标志。

让我们看看你的模式： -

```
".*(?<!S)\\.a\\s*\\(\\s*\\)\\s*$" 
```

您的模式将匹配没有`S`before的字符串`.a`。从您的模式的以下部分可以清楚地看到这一点。

```
(?<!S)\\.a  // Match if `.a` is not preceded by `S`. 
```

现在，当您使用 时`Pattern.CASE_INSENSITIVE`，此条件将同时检查`s`和`S`，之前`.a`和如果其中任何一个存在，它将不匹配。所以你的模式从字面上变成： -

```
(?<![sS])\\.a  // Match if `.a` is not preceded by `S` or `s`. 
```

现在，在你的字符串中： -

```
"attributes.a()" 
```

你有小`s`前`.a`。因此，您的代码中的模式将返回`true`此字符串，并启用*不区分大小写*标志。

* * *

仅供参考，您也可以使用`(?i)`标志而不是传递第二个参数[`Pattern.CASE_INSENSITIVE`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE)来查看相同的效果。所以下面的模式和你的一样：-

```
Pattern p = Pattern.compile("(?i).*(?<!S)\\.a\\s*\\(\\s*\\)\\s*$"); 
```

* * *

using 的好处`(?i)`是，你可以用它来制作你的 pattern 的一部分`CASE_INSENSITIVE`。例如，如果您希望只检查`(?<!S)`，但以下字符串可以是`.a`or `.A`，那么您可以`(?i)`在之前使用`.a`：-

```
Pattern p = Pattern.compile(".*(?<!S)(?i)\\.a\\s*\\(\\s*\\)\\s*$");
                                      ^^^ 
```

现在，标志后的整个模式`(?i)`将以方式匹配`CASE_INSENSITIVE`。

* * *

另外，请注意，正如评论中指出的那样，您实际上并不需要在这里*进行后*视或*不区分大小写的匹配。*如果你的信只应该是.你可以简单地`[^S]`使用. 因为后*视*和*不区分大小写*会带来一些性能差异。因此，您可以简单地将模式更改为： -`[aA]``a`

 **```
Pattern p = Pattern.compile(".*[^S][.][aA][ ]*[(][ ]*[)][ ]*$"); 
```

我还将*反斜杠*替换为`character class`. 我更喜欢使用它，而不是双重转义元字符。但这只是口味问题。你可以使用任何你喜欢的东西。**

# sql - sql中的条件order by子句

> ID：14597695
> 
> 赞同：7
> 
> 时间：2013-01-30T06:03:26.773
> 
> 标签：sql, oracle

我有一个查询应该根据列值以 asc 或 desc 排序结果。

例如

如果类型管理器的员工存在 THEN 按joining_date、bith_date ASC 排序，否则如果员工是开发人员 THEN 按joining_date、birth_date DESC 排序。

我想实现以下目标，但无法实现。

```
ORDER BY CASE WHEN employee_type = 'm'  
              THEN joining_date, birth_date ASC;
              WHEN employee_type = 'd' 
              THEN joining_date, birth_date  DESC; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T07:55:21.823

好吧，经过一番研究，我得到了答案。

我们可以有条件地在 where 子句中添加多个列，如下所示：

```
ORDER BY DECODE(employee_type, 'm', joining_date, birth_date, salary) ASC,
         DECODE(employee_type, 'd', joining_date, birth_date, salary) DESC 
```

这将根据employee_type 对结果进行排序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T08:11:09.507

我怀疑你想要这样的东西：

```
ORDER BY 
    employee_type DESC             -- first all the managers, then the developers
                                   -- and in every one of these two groups
  , joining_date                   -- first order by joining date
  , CASE WHEN employee_type = 'm'  -- and then either by
        THEN birth_date            -- birth date ascending for managers
        ELSE NULL
    END                            -- or
  , birth_date DESC ;              -- birth date descending for the rest (devs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:42:29.303

这个问题有点糟糕。

> 根据列值将结果排序为 asc 或 desc。

一列有许多值（因为有多行）。

现在，`order by`子句使用表达式并在其上排序行。该表达式应该是morphotropic(;))

因此，假设标准 oracle 的员工模式，经理是：

```
select * 
from emp e
where exists (select emp_id from emp where e.id=emp.mgr_id) 
```

解决方法查询可能是：

```
Select e.id, e.name, e.birth_date,
  case 
  when   (select count(*)  
          from emp e 
          where exists (select emp_id from  emp where e.id=emp.mgr_id)
          ) --existence of manager
    > 0 then birth_date - to_date('1-Jan-1000','dd-mon-yyyy')
    else to_date('1-Jan-1000','dd-mon-yyyy') - birth_date
   end as tricky_expression
from emp A
order by 4; 
```

该表达式是`case`; 使用常量（决定有经理的子查询）将值从正数更改为负数，即更改订单方向。

**更新：**评论中的详细信息：

```
select id, name, birth_date emp_type
from (
    Select id, name, birth_date, emp_type,
        case  when   cnt_mgr > 0 then birth_date - to_date('1-Jan-1000','dd-mon-yyyy')
          else to_date('1-Jan-1000','dd-mon-yyyy') - birth_date
        end as tricky_expression
    from(
        Select e.id, e.name, e.birth_date, emp_type,
           count(case when emp_type='M' then 1 else 0 end) over() as mgr_count
        from emp A
        where your_conditions
        )
     order by tricky_expression
)
where rownum=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:20:51.157

如果公司中有经理，则此查询返回最年长的经理，否则 - 最年轻的开发人员。

```
select 
  id, name, birth_date, emp_type
from emp
where 
  id = (select 
           max(id) keep (dense_rank first order by 
             decode(emp_type, 'M', 1, 'D', 2),
             joining_date,
             decode(emp_type, 'M', 1, 'D', -1) * (birth_date - to_date('3000','yyyy')))
        from emp) 
```

# regex - 如果字符串存在，则接受所有字符，但只接受字符的出现

> ID：14597696
> 
> 赞同：0
> 
> 时间：2013-01-30T06:03:28.377
> 
> 标签：regex

我试图想出一个正则表达式来匹配包含某个字符串但最多只出现第一次出现的字符的字符串。

在这种情况下，我希望它匹配一个包含**foo.com**的字符串，但忽略所有内容，包括第一次出现的问号。

例如**[https://www.foo.com/some/folder/page.cgi](https://www.foo.com/some/folder/page.cgi)** ?ignore=params

我知道我可以`?`使用以下正则表达式获得所有字符：

```
(^.*)(?=\?) 
```

我可以使用以下内容将找到的字符串限制为包含**foo.com**的字符串：

```
^.*(foo.com){1}.*$ 
```

但我可以用一种表达方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:07:04.600

尝试这个：

```
^[^?]*foo\.com[^?]* 
```

**解释：**

```
^          # Start of string
[^?]*      # Any number of characters except ?
foo\.com   # foo.com
[^?]*      # Any number of characters except ? 
```

# git - 带有 git 存储库的确定性目录 mtime

> ID：14597701
> 
> 赞同：2
> 
> 时间：2013-01-30T06:03:41.473
> 
> 标签：git, filemtime

使用[git-restoremtime](https://stackoverflow.com/a/13284558/1122270)脚本，可以根据提交消息中的日期修改从 git 存储库中签出的文件的修改时间。

但是，如何使目录的 mtime 显得直观、确定和一致？

我认为将每个目录的 mtime 设置为最新提交的时间是最有意义的，该提交触及此类目录或其任何子目录中的任何类型的文件。这种递归 mtime 传播听起来合理吗？用git很容易做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:46:31.157

因此，事实证明，脚本很容易修改以支持具有确定性 mtime 的目录。

[https://github.com/cnst/git-tools/commit/89d09da9f362651ce9a0ca66362913c09e6b57cb](https://github.com/cnst/git-tools/commit/89d09da9f362651ce9a0ca66362913c09e6b57cb) [https://github.com/cnst/git-tools/commit/b20207dc8fd9b791b8371dab94e98aca0a8412f6](https://github.com/cnst/git-tools/commit/b20207dc8fd9b791b8371dab94e98aca0a8412f6)

与[https://stackoverflow.com/a/13284558/1122270](https://stackoverflow.com/a/13284558/1122270)集成的最短代码段如下：

```
dirlist = dict()
...

        dir = file
        while dir:
            dir = os.path.dirname(dir)
            if dir in dirlist:
                if dirlist[dir] < mtime:
                    dirlist[dir] = mtime
            else:
                if os.path.isdir(dir):
                    dirlist[dir] = mtime
...

for file, mtime in dirlist.iteritems():
    try:
        os.utime(os.path.join(workdir, file), (mtime, mtime))
        touches += 1
    except Exception as e:
        logger.error("ERROR: %s\n", e)
        errors += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:45:38.930

> 用 git 能轻松搞定吗

*这与 Git（或其他分布式*VCS）无关，它根本[不记录任何类型的时间戳](https://stackoverflow.com/questions/2179722/checking-out-old-file-with-original-create-modified-timestamps)

因此，尽管您的策略在您的上下文中有意义，但它只是脚本的结果，应用在您的*本地*存储库中，不能保证在其任何克隆中复制。

# android - Android MediaCodec：解码成功，但编码文件不可播放

> ID：14597702
> 
> 赞同：1
> 
> 时间：2013-01-30T06:03:42.187
> 
> 标签：android, video, compression, android-4.2-jelly-bean

我正在尝试编写一个将在 Jellybean 版本的 Android 上运行的视频压缩应用程序。到目前为止，我可以将给定的输入解码为视频/原始格式，并且可以使用 mplayer 播放。我的问题是，当我将此视频/原始项目编码为宽度 = 320、高度 = 240、bitRate = (480*1024)、frameRate = 20、iFrameInterval = 7 和 colorFormat = YUV420Planar 的视频/avc 格式时，输出文件为不能直接双击播放。任何人都可以建议我使用任何播放器播放它的方法。？或者你能告诉我我在给出比特率、帧率等上述参数时是否犯了任何错误。

提前致谢。！:)

# ios - 使用 UIPageViewController 设置 Page Curl 动画

> ID：14597705
> 
> 赞同：1
> 
> 时间：2013-01-30T06:04:14.667
> 
> 标签：ios, objective-c, uipageviewcontroller

我是 iOS 新手，我正在使用`UIPageViewController`. 这是我的代码：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController 
{
 firstVC *first1 = [[firstVC alloc] initWithNibName:@"firstVC" bundle:nil]; return first1; 
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController { 
secondVC *second1 = [[secondVC alloc] initWithNibName:@"secondVC" bundle:nil]; return second1;
} 

- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed { NSArray *viewControllers = nil; viewControllers = [NSArray arrayWithObjects:first,second, nil]; [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerSpineLocationMid animated:NO completion:NULL]; 
} 

-(UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation { 
NSArray *viewControllers = nil; viewControllers = [NSArray arrayWithObjects:second, first, nil]; [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerSpineLocationMid animated:YES completion:NULL]; return UIPageViewControllerSpineLocationMid; 
}

 - (void)viewDidLoad { [super viewDidLoad]; [self.navigationController setNavigationBarHidden:NO]; self.navigationController.navigationBar.tintColor = [UIColor blackColor]; self.title = @"DEMO"; NSDictionary *options = [NSDictionary dictionaryWithObject: [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin] forKey: UIPageViewControllerOptionSpineLocationKey]; self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerSpineLocationMid options:options]; self.pageViewController.delegate = self; self.pageViewController.dataSource = self; first = [[firstVC alloc] initWithNibName:@"firstVC" bundle:nil]; second = [[secondVC alloc] initWithNibName:@"secondVC" bundle:nil]; NSArray *viewControllers = [NSArray arrayWithObjects:first,second,nil]; [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerSpineLocationMid animated:NO completion:nil]; [self addChildViewController:self.pageViewController]; [self.view addSubview:self.pageViewController.view]; self.modalPresentationStyle=UIModalPresentationCurrentContext; [self.pageViewController didMoveToParentViewController:self]; CGRect pageViewRect = self.view.bounds; pageViewRect = CGRectInset(pageViewRect, 20.0, 20.0); self.pageViewController.view.frame = pageViewRect; self.view.gestureRecognizers = self.pageViewController.gestureRecognizers; self.pageViewController.doubleSided=YES; } 
```

它在两个方向上加载双面页面，但是当我滑动页面并且只显示一个视图时出现问题。我想要一个类似页面的动画。请帮忙。提前感谢您的帮助和支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:05:25.373

你在哪里初始化你的 UIPageViewController？

在初始化时，您必须将转换样式定义为只读属性。

代码应该是这样的；

```
 self.pageViewController = [[UIPageViewController alloc]
                             initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                             navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal 
                             options:nil]; 
```

# dojo - dojo 1.8：在 dojo/on 上创建小部件并启动

> ID：14597706
> 
> 赞同：0
> 
> 时间：2013-01-30T06:04:16.330
> 
> 标签：dojo

您好我正在寻找基于 Dojo 1.8 的教程。我正在寻找的是：- 在 dojo 页面完全加载和解析后，在 dojo/on 按钮后触发，实用地创建和实例化小部件。我不确定 Dojo 网站上的哪个教程供我学习。

请指教。提前致谢。克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:05.493

没有一个教程可以完全回答您的所有问题，但以下内容会有所帮助：

*   [Dojo Events 教程](http://dojotoolkit.org/documentation/tutorials/1.8/events/)和[dojo/on 参考](http://dojotoolkit.org/reference-guide/1.8/dojo/on.html)
*   [道场/现成参考](http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html#dojo-ready)
*   [dojo/解析器参考](http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html)

要捕获页面的完整加载和解析，您需要结合使用[dojo/ready](http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html#dojo-ready)和[dojo/parser](http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html)。（我假设您所指的解析是dojo 小部件解析器，而不是HTML 的标准浏览器解析）。

要在解析后运行代码，您需要将**parseOnLoad: false**添加到您的[dojoConfig](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)并手动运行解析器；否则，完成时无法捕获。

```
<script type="text/javascript" async="true">
    require([
        "dojo/ready",
        "dojo/parser",
        "dojo/on,
        "dojo/query"
    ], function(
        ready, parser, on, $
    ){
        ready(function(){
            // Only run after the page is fully loaded
            parser.parse().then(function(instances){
                // Only run after parser has parsed the page

                var myButton = $("#myButtonid");  // Find your button
                if(myButton.length > 0){ // Check button is found
                    on(myButton[0], "click", function(evt){

                        // ... add your code here to create and
                        //    instantiate widget 

                    });
                }
            });
        });
    }
</script> 
```

不要忘记您需要在[dojoConfig](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)中关闭小部件的自动解析，因此，像这样（在头部）：

```
<script type="text/javascript">
    dojoConfig= {
        "parseOnLoad": false,
        "async": true
        // ...other settings
    };
</script> 
```

# c - 使用 udp 协议的 raw_socket 通信

> ID：14597707
> 
> 赞同：0
> 
> 时间：2013-01-30T06:04:40.703
> 
> 标签：c, unix

我只是这个套接字编程的初学者......我尝试使用 SOCK_RAW 制作一个 UDP client_server 程序。我可以从服务器部分发送消息。但是在客户端部分我得到垃圾值。并且接收消息包的大小也不同。你能帮我用 SOCK_RAW 做这个客户端服务器程序吗？我用 eth0 和 eht1 尝试了这个客户端-服务器，我尝试从 eth0 向 eth1 发送 1 个数据包，发送端显示“OK”消息..但收到的数据是垃圾..在我使用 UDP 协议完成普通客户端服务器程序之前。我从正常的 udp 客户端服务器获得正确的输出。当我尝试使用 SOCK_ROW 时，它在发送部分显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:39:44.207

让您的生活更简单并使用[SOCK_DGRAM](http://www.kernel.org/doc/man-pages/online/pages/man7/udp.7.html) - 内核将处理数据报头，您只需要提供有效的 IP 地址和数据。用户有责任使用 SOCK_RAW 附加（在传输之前）和解析（在接收时）UDP 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:12:49.293

Most likely you are seeing IP and UDP headers and calling them "garbage". That is what SOCK_ROW does. You should parse and skip protocol headers if you want to get to your message content while using SOCK_ROW.

# javascript - 如何从每个jsp页面加载页面时调用javascript函数

> ID：14597710
> 
> 赞同：-1
> 
> 时间：2013-01-30T06:04:45.123
> 
> 标签：javascript, spring-mvc, breadcrumbs

我有一个 javascript 面包屑（）函数

我希望这个函数应该在每个jsp页面的页面加载时调用，所以我的面包屑可以为所有jsp设置。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:12:15.853

您可以使用

```
<%@include file="script.jsp" %> 
```

将脚本直接嵌入到页面代码中。如果脚本很小并且 JSP 甚至可以为每个页面定制它，如果需要的话，这将是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:08:32.033

你可以像这样贴上身体标签

```
<body onload="breadcrumbs()"> 
```

# asp.net - 页面回发时始终关注 Tab Container

> ID：14597711
> 
> 赞同：0
> 
> 时间：2013-01-30T06:04:48.123
> 
> 标签：asp.net, tabcontrol, autopostback

我应该怎么做才能防止我的页面在每次回发时都关注标签容器？

示例：当我的复选框设置为**Autopostback = "true"**时，当我单击该复选框时，它将回发，但它将专注于选项卡容器。

即使我有一个设置为 autopostback="true" 的字段，另一个没有标签容器的页面也没有这种问题......

我认为，当页面回发时，我需要做一些事情来消除对选项卡容器的关注......但我不知道那是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:19:34.717

尝试在事件发生后使用自动回发将注意力集中在页面中的其他控件上，例如`Button1.Focus();`放在方法的最后一行

# html - 如果我的标签低于我的标签，我的 SEO 和脚本会怎样？

> ID：14597713
> 
> 赞同：3
> 
> 时间：2013-01-30T06:04:55.747
> 
> 标签：html, xhtml

想想看，XHTML1.1 规范和扩展的 HTML5（假定）......好吧，标记的设计是这样的，除非另有说明，否则“顺序”并不重要。

Body 标签中的所有内容显然都是按浏览器渲染引擎解释的特定方式排序的，但是 HEAD 和 BODY 标签本身在概念上与渲染顺序无关（尽管它们的名称，除了包含在 HEAD 中；如果包含取决于另一个显然必须首先加载），因此遵循与任何标记语言相同的规则。

将 HEAD 标签块扔到 BODY 标签块下方是可行的（至少在基于 WebKit 的浏览器中），但到目前为止我所能做的就是测试标题标签是否正常工作。这不是一个完全有益的测试，但当我在手机上写下这篇文章时，我没有时间进一步思考我的思考过程。

我想知道这样做会如何影响 SEO，更糟糕的是：加载通常在 HEAD 中处理的脚本和 CSS 文件。我知道最近的一种做法是在标记底部或附近发生脚本文件的外部加载，以在页面准备好时延迟加载，这会有什么不同的反应吗*？*

基本上我在问，拥有一个 HEAD 块位于 BODY 块下方的网站的 **影响 *是什么？*

```
<html>
    <body>
        Test
    </body>
    <head>
        <title>Test</title>
        <script src="test.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="test.css" />
    </head>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:33:58.737

如果有的话，它只会对 SEO 产生负面影响。

首先，您的提案导致 HTML 不正确。HTML4.01 DTD，它严格定义了 HTML 文档的结构，[它](http://www.w3.org/TR/html4/sgml/dtd.html#html.content) `<head>`变成了 before `<body>`：

```
<!ENTITY % html.content "HEAD, BODY"> 
```

（如果顺序无关紧要，那就是`<!ENTITY % html.content "(HEAD|BODY)+">`

其次，我敢打赌大多数蜘蛛会`<head>`尽快寻找一个元素，如果它在元素之前找不到一个`<body>`元素，那么它可能最多会打折你的文档，如果不是完全忽略它的话。我怀疑大多数蜘蛛会忽略`<head>`之后遇到的任何元素`<body>`。

第三，它破坏了用户体验。有时页面可能需要一段时间才能加载，但浏览器会在下载时解析 HTML。一旦它看到`<title>`它就会将其显示给用户，以便用户知道该页面至少已部分加载（即使尚未呈现）。如果没有此功能，您的用户可能会因为加载速度太慢而沮丧地关闭浏览器选项卡/窗口，因为他们会认为该网站完全没有响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:29:21.077

有趣的问题，但我坚信 HTML 结构与人体解剖学（头-身-足）非常相似，如果结构不正确，会发生什么以及它的外观如何？看起来很难看，很难识别特定的人，这里浏览器会根据通用结构（如 head-body-footer）进行操作，因此这些是我们需要遵循的几个预定义结构以获得最佳结果。

关于搜索引擎优化，非现场搜索引擎优化工作在我们如何遵循结构的情况下，当然它会影响谷歌蜘蛛等等。

# android - 如何在android的网格中获取项目ID以及项目位置

> ID：14597717
> 
> 赞同：2
> 
> 时间：2013-01-30T06:05:11.483
> 
> 标签：android, sqlite, gridview

我从 webservice 获取数据并将它们存储在 sqlite 中并在网格中显示它们。数据包含项目 id、项目名称、项目图像现在我想在单击任何项​​目时从 sqlite 中获取项目的 id网格以及项目位置！我怎样才能做到这一点 ？

我的代码是::

```
 gridView.setOnItemClickListener(new OnItemClickListener() 
         {
                public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                {
                    System.err.println("cache_id=="+id);
                    System.err.println("position=="+position);
                    Intent i = new Intent(getApplicationContext(), BookContent.class);
                    i.putExtra("id", position);
                    System.err.println("this is item id::"+v.getId());

                    startActivity(i);

                }
         }); 
```

我的 imageAdapter 类是::

```
private class ItemsAdapter extends BaseAdapter implements ListAdapter
{
    String[] items;
    public ItemsAdapter(Context context,int textViewResourceId,String[] items) 
    {
        this.items = items;
    }
    public View getView( int POSITION, View convertView,ViewGroup parent)
    {
        TextView cap = null ;
        View view = convertView;
        ImageView img = null;
        if (view == null) 
        {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.grid, null);
        }
        img = (ImageView) view.findViewById(R.id.image);
        cap = (TextView) view.findViewById(R.id.caption);
        String bookTitle = mapNames.get(POSITION);
        cap.setText(mapNames.get(POSITION));
        img.setImageBitmap(BitmapFactory.decodeByteArray(map.get(POSITION), 0, map.get(POSITION).length));
        return view;
    }
    public int getCount() 
    {
        return items.length;
    }
    public Object getItem(int position) 
    {
        return position;
    }
    public long getItemId(int position) 
    {
        return position;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:53:49.140

单击网格项目时，您无需再次从 sqlite 数据库中获取 itemid。相反，您可以为方法`view.setTag(String.valueOf(itemid));`中的每个网格视图元素设置类似的内容`getView()`。

在`onItemClick()`中，获取标签。

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                {
                   ......................
                    .........................
                    String itemid = (String) v.getTag();
                  ..............................
                     i.putExtra("itemid", itemid);

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:09:20.387

对不起，我用错了方法。请看下面的回答。只需更改此方法

```
public long getItemId(int position) 
{
   return items.get(position).getId();
} 
```

现在可以在gridView的onItemClick中获取id的值了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:03:44.800

```
String items[] items; //your array...
    gridView.setOnItemClickListener(new OnItemClickListener() 
             {
                    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                    {
                        //System.err.println("cache_id=="+id);
                        //System.err.println("position=="+position);
                       String name =item.get(position).toString();

                        Intent i = new Intent(getApplicationContext(), BookContent.class);
                        i.putExtra("id", position);
                        System.err.println("this is item id::"+v.getId());

                        startActivity(i);

                    }
             }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:06:33.700

你为什么不把ID保存在一个数组中

```
String[] items;
int[] ids;
public ItemsAdapter(Context context,int textViewResourceId,String[] items,int[] ids) 
{
    this.items = items;
    this.ids=ids;
} 
```

然后在你的 oncliklistener

```
gridView.setOnItemClickListener(new OnItemClickListener() 
     {
      public void onItemClick(AdapterView<?> parent, View v, int position, long   id)
            {
                System.err.println("cache_id=="+id);
                System.err.println("position=="+position);
                Intent i = new Intent(getApplicationContext(), BookContent.class);

                 //in this part
                i.putExtra("itemid", itemid);
                i.putExtra("id", this.ids[position]);
                startActivity(i);

            }
     }); 
```

# angularjs - 通过参数直接访问变量 - 创建一个泛型函数

> ID：14597718
> 
> 赞同：0
> 
> 时间：2013-01-30T06:05:25.527
> 
> 标签：angularjs, pug

我正在尝试实现一种通用的剩余功能。我的表单中有一堆字段，例如：**name**和**address**。这些字段有字符大小的限制，我的目标是制作一个通用函数来限制它的大小。所以我做了一个有效的示例函数：

首先在页面上：

```
label(for='name') Name {{remaining()}} of {{totalChars}} 
```

二，处理它的代码：

```
$scope.totalChars = 10;

$scope.remaining = function() {
    var count = 0;

if ($scope.mName) {
    count = $scope.mName.length;

    if (count > $scope.totalChars) {
        $scope.mName = $scope.mName.trim().substr(0, $scope.mName.length - 1);
        count = $scope.mName.length;
    }
}

return count;

    //return calculateChars($scope.mName, $scope.totalChars);
}; 
```

当我在名称字段中输入一些输入值时，当达到 10 个字符时，角度也会停止输入。但是我已经重新制作了该功能以通用方式将其转换并尝试将其用于我想要的任何字段，但没有按预期工作：

```
$scope.totalChars = 10;

$scope.remaining = function() {
    return calculateChars($scope.mName, $scope.totalChars);
}; 
```

...

```
function calculateChars(obj, size) {
    var count = 0;

    if (obj && obj !== 'undefined') {
        count = obj.length;

        if (count > size) {
            $scope.obj = obj.trim().substr(0, obj.length - 1);
            console.log('Result: ' + $scope.obj);
            count = obj.length;
        }
    }

    return count;
} 
```

`calculateChars`工作偏向性很好，问题是因为`$scope.obj = obj.trim().substr(0, obj.length - 1);`angularjs 不知道“obj”是什么，并且在达到 10 个字符时不会停止输入，甚至正确计算数量。

我不知道如何使第一种方法适用于任何情况，而不需要为我想要的任何文本字段重复任何代码。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:38:20.503

听起来您正在寻找指令。这是一个名为的指令示例`remaining`，给定模型和“最大长度”属性，显示剩余的字符数。它还可以防止用户输入超过最大字符数；这可以通过去掉`if (remaining < 0)`链接函数中检查的第一个分支来删除。

```
app.directive('remaining', function() {
  return {
    template: "{{remaining}} of {{maxLen}}",
    scope: {
      maxLen: '@max',
      model: '=ngModel'
    },
    link: function(scope, elem, attrs) {
      scope.$watch('model', function(val) {
        if (val == null || val == undefined) return;
        var maxLen = parseInt(scope.maxLen, 10);
        var remaining = maxLen - val.length;
        if (remaining < 0)
          scope.model = val.substr(0, maxLen);
        else
          scope.remaining = remaining;
      });
    }
  };
}); 
```

这是一个 jsFiddle 来演示：http: [//jsfiddle.net/BinaryMuse/JanZm/](http://jsfiddle.net/BinaryMuse/JanZm/)。注意我正在使用 AngularJS 的 1.1.x 版本来访问该`ngTrim`指令，该指令告诉 Angular 不要去除文本字段中的空白。

# verilog - 如何在 Verilog 中创建闩锁

> ID：14597719
> 
> 赞同：1
> 
> 时间：2013-01-30T06:05:31.373
> 
> 标签：verilog, hdl

我有一个带有代表重置按钮的数字输入的 CPLD。当按下复位按钮时，信号变为高电平。我需要做的是有一个寄存器，它的值告诉按钮*是否*被按下。基本上是一个闩锁。当按钮变为高电平时，锁存寄存器变为高电平并永远保持高电平。

我认为这很简单，但是当我尝试对其进行编码时，我收到了一堆警告。一点谷歌搜索显示“不要在 HDL 中制作闩锁！不好的做法！”，但我在这里并没有真正看到替代方案。

这是我的尝试。clk_10m 是一个快速自由运行的时钟，pwr_off_req 是按钮输入。

```
reg pwr_off_req_latched = 0;

always @ (clk_10m or pwr_off_req) begin

   if (pwr_off_req == 1'b1)
      pwr_off_req_latched <= 1'b1;   
   else
      pwr_off_req_latched <= pwr_off_req_latched;
      // I tried this to make sure it's always set to something          
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:35:56.243

你能假设按钮按下的脉冲长度比你设备的时钟频率长得多吗？如果它是一个物理按钮，我认为这是一个非常安全的假设。在那种情况下，我认为这会很好地工作：

```
always @(clk_10m) 
   pwr_off_req_latched <= power_off_req_latched | power_off_req; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:42:41.110

锁存器在 HDL 中并不坏，它们只是需要一些考虑，由于忘记在组合部分中指定 else 子句而隐含的锁存器是不好的，因为您最终没有得到您期望的硬件，并且可能会产生时序问题。

如果您正在应用重置，您可能需要指定一个“pragma”，以便综合工具正确识别它。

锁存器也应该使用`=`not `<=`，当它们被启用时，它们是组合的（打开的）并且不会破坏反馈循环。

这是使用异步复位创建锁存器的典型方法：

```
//synopsys async_set_reset "rst_an"
always @* begin
  if (~rst_an) begin
    // Reset 
    x = 1'b0;
  end
  else if (latch_open) begin
    //next datavalue
    x = y ;
  end
end 
```

在您的情况下，您可能想要类似的东西：

```
//synopsys async_set_reset "rst_an"
always @* begin
  if (~rst_an) begin
    pwr_off_req_latched = 1'b0;
  end
  else if ( pwr_off_req ) begin
    pwr_off_req_latched = 1'b1 ;
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:30:43.427

锁存器会给时序分析工具带来问题。它们也不直接映射到某些（FPGA）架构，因此对于布局布线工具来说要困难得多。因此发出警告。

但是，您所要求的不是我理解数字逻辑意义的锁存器 - 只是一个永远不会复位的触发器。

因此，它可以简化为一个简单的 d 型触发器，其中 D 输入连接到 1，clk 输入连接到您的`pwr_off_req`信号：

```
reg pwr_off_req_latched = 0;

always @ (posedge pwr_off_req) begin
      pwr_off_req_latched <= 1'b1;   
end 
```

你根本没有噪声抑制 -*任何*正向边缘都会将触发器锁定到`1`.

如果我这样做，我会将输入运行到双触发器同步器中，然后对同步信号的几个时钟脉冲进行计数，以确保在设置锁存信号之前它不是噪声。除非您期望*实际*事件比几个时钟脉冲短，否则就是这样做的。

* * *

在旁边：

数字逻辑世界中的“锁存器”通常意味着

*   一个电路，其输出保持两个输入中的任何一个最后为高电平（[设置/复位或 SR 锁存器](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#Simple_set-reset_latches)）
*   一种电路，其输出在控制信号无效时保持输入值，但在控制信号为低电平时跟随输入 -[透明锁存器](http://en.wikipedia.org/wiki/Flip-lop_%28electronics%29#Gated_latches_and_conditional_transparency)

这与触发器相比，触发器的输出在控制信号（通常）从低变为高时保持与输入相关的某些方面，并且忽略输入，除了该上升沿周围的微小时间窗口。这些是[D 型](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#D_flip-flop)、[T 型](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#T_flip-flop)和[JK 型](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#JK_flip-flop)触发器，具体取决于输出相对于输入的行为方式。

# payment-gateway - Cashu 与 asp.net 的集成

> ID：14597721
> 
> 赞同：1
> 
> 时间：2013-01-30T06:05:38.690
> 
> 标签：payment-gateway

我必须在我的 Web 应用程序中集成 Cashu 支付网关，我使用的是 cashu 实施指南提供的代码。我在 Cashu 上创建了商家帐户，但找不到加密密钥选项。因此，每当发布值时，我都会收到无效的商家令牌值错误。可以，任何人都可以帮助我摆脱这种情况！

```
<form action="https://www.cashu.com/cgi-bin/pcashu.cgi" method="post">
<input type="hidden" name="merchant_id" value="merchanttest">
<input type="hidden" name="token" value="66a31cd699d8d9cb454df1f6cec30c2c">
<input type="hidden" name="display_text" value="Baseball Hat">
<input type="hidden" name="currency" value="CSH">
<input type="hidden" name="amount" value="125">
<input type="hidden" name="language" value="en">
<input type="hidden" name="session_id" value="asdasd-234-asdasd">
<input type="hidden" name="txt1" value="item27">
<input type="hidden" name="test_mode" value="1">
<input type="submit" value="Pay with cashU!">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:51:37.350

我认为您不应该依赖示例加密密钥，因为显然这是错误的，每个商家都有自己的密钥。

查看[http://docs.whmcs.com/CashU](http://docs.whmcs.com/CashU)我发现以下内容：

“您可以在您的 CashU 帐户中找到加密关键字，方法是转到我的帐户 > 付款安全。这里您还需要设置返回 url，必须设置为： [http ://www.yourdomain.com/modules/ gateways/callback/cashu.php](http://www.yourdomain.com/modules/gateways/callback/cashu.php) 通知 URL 应留空。”

希望这可以帮助

# asp.net - 具有跨域 ASP.Net 客户端回调的自托管 SignalR 失败

> ID：14597723
> 
> 赞同：1
> 
> 时间：2013-01-30T06:05:41.657
> 
> 标签：asp.net, signalr

我有一个 WPF 应用程序，它使用 SignalR 来实现发布/订阅模型。当我使用 WPF 客户端连接到上述应用程序时，发布和回调工作成功。

然后我创建了一个 ASP.Net 客户端。我使用 SignalR 的跨域属性连接到上面的 WPF 应用程序。

它可以连接到应用程序并成功调用集线器中提供的方法。但是，当 WPF 应用程序调用 ASP.Net 客户端中的方法时，似乎该调用无法到达客户端浏览器

（在火狐浏览器中，长轮询不返回，即使我在javascript回调函数中设置了断点也无法到达断点，浏览器中什么也显示不出来）。

我在 html 中包含了以下脚本

```
<script src="@Url.Content("~/Scripts/jquery-1.6.4.min.js")" type="text/javascript</script>
<script src="/Scripts/jquery.signalR-1.0.0-rc2.min.js" type="text/javascript"></script>
<script src="http://localhost:9999/signalr/hubs" type="text/javascript"></script> 
```

以下是我使用的javascript。

```
jQuery.support.cors = true;
    myHub = $.connection.subscriberHub;

    myHub.client.addMessage = function (msg, time) {
        $("#message").prepend("<div>" + time + " " + msg + "</div>");
    };

    $.connection.hub.url = 'http://localhost:9999/signalr';
    $.connection.hub.start(); 
```

以下是 WPF 应用程序中的服务器代码：

```
public partial class App : Application
{
    private IDisposable app;

    private void Application_Startup(object sender, StartupEventArgs e)
    {
        string url = "http://localhost:9999";
        app = WebApplication.Start<Startup>(url);
    }

    private void Application_Exit(object sender, ExitEventArgs e)
    {
        if (app != null)
        {
            app.Dispose();
        }
    }
}

class Startup
{
    public void Configuration(IAppBuilder app)
    {
        app.MapHubs();
    }
} 
```

当 WPF 应用程序单击按钮时，我发送消息：

```
private void btn_sendMsg_Click(object sender, RoutedEventArgs e)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<SubscriberHub>();
        DateTime sentTime = DateTime.Now;

            context.Clients.Group("subscriber").addMessage(tb_message.Text, sentTime);

        MessageList.Insert(0,string.Format("{0:yyyy-MM-dd HH:mm:ss} {1}", sentTime, tb_message.Text));
    } 
```

以下是我定义的集线器：

```
public class SubscriberHub : Hub
{
    string group = "subscriber";

    public Task Subscribe()
    {
        return Groups.Add(Context.ConnectionId, group);
    }

    public Task Unsubscribe()
    {
        return Groups.Remove(Context.ConnectionId, group);
    }
} 
```

上面的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:35:45.930

您不需要 JavaScript 客户端调用`Subscribe`吗？

```
$.connection.hub.start().done(function () {
    myHub.server.subscribe();
}); 
```

或者，您可以修改 SubscriberHub：

```
public class SubscriberHub : Hub
{
    string group = "subscriber";

    public override Task OnConnected()
    {
        return Groups.Add(Context.ConnectionId, group);
    }

    // ...
 } 
```

# android - 在 Android 中，如何在按钮点击时使用 Google Analytics 事件跟踪

> ID：14597725
> 
> 赞同：8
> 
> 时间：2013-01-30T06:06:05.453
> 
> 标签：android, google-analytics, google-analytics-api

我的目标是使用 Google Analytics Event Tracking 计算按钮点击次数。

如何计算按钮点击次数以及哪个用户（和设备）点击了此按钮？

我正在使用这段代码：

```
public class TestActivity extends Activity {
GoogleAnalyticsTracker tracker;
Button clickBtn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    tracker = GoogleAnalyticsTracker.getInstance();
    tracker.startNewSession("UA-XXXXXXXX-1", 30, this);
    tracker.setDebug(true);

    clickBtn = (Button) findViewById(R.id.click);
    setContentView(R.layout.main);
    final Button createEventButton = (Button) findViewById(R.id.NewEventButton);

    createEventButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            tracker.trackEvent("Clicks", // Category
                    "Button", // Action
                    "" + clickBtn, // Label
                    77); // Value
            tracker.trackEvent("Clicks", "" + createEventButton, "Easy", 1);
            tracker.trackEvent("Completions", "Game-Deaths",
                    "Hard-Level-One", 15);
            tracker.trackEvent("Die", "Easy", " Two", 15);
            tracker.trackTransactions();
        }
    });

    Button createPageButton = (Button) findViewById(R.id.NewPageButton);
    createPageButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Add a Custom Variable to this pageview, with name of "Medium"
            // and value "MobileApp"
            tracker.setCustomVar(1, "Medium", "Mobile App");
            // Track a page view. This is probably the best way to track
            // which parts of your application
            // are being used.
            // E.g.
            // tracker.trackPageView("/help"); //to track someone looking at
            // the help screen.
            // tracker.trackPageView("/level2"); //to track someone reaching
            // level 2 in a game.
            // tracker.trackPageView("/uploadScreen"); //to track someone
            // using an upload screen.
            tracker.trackPageView("/testApplicationHomeScreen");

        }
    });

    Button quitButton = (Button) findViewById(R.id.QuitButton);
    quitButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            finish();
        }
    });

    Button dispatchButton = (Button) findViewById(R.id.DispatchButton);
    dispatchButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Manually start a dispatch, not needed if the tracker was
            // started with a dispatch
            // interval.
            tracker.dispatch();
        }
    });
}

@Override
protected void onDestroy() {
    super.onDestroy();
    // Stop the tracker when it is no longer needed.
    tracker.stopSession();
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T06:19:56.597

在 GA 控制台中，您可以获得多个数字。（参与 -> 活动）

让我们通过示例来解释，如果您将此行放在按钮单击中：

```
tracker.trackEvent("Completions", "Game-Deaths",
                "Hard-Level-One", 15); 
```

用户点击了这个按钮两次。

您将获得以下统计信息：

1.  总事件 = 2 // 2 次点击
2.  唯一事件 = 1 // 1 个唯一来源
3.  Total Value = 30 // 用户点击了两次，所以 15 + 15 = 30
4.  平均值 = 15 // 总值除以总事件

希望这对你来说很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:26:07.560

我认为您正在使用 Google Analytics 旧库，尝试使用新的 V2 库，它易于使用并有良好的文档支持。以下是使用 v2 版本进行事件跟踪的链接：[https ://developers.google.com/analytics/devguides/collection/android/v2/events](https://developers.google.com/analytics/devguides/collection/android/v2/events)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:18:07.320

请在 lib 文件夹中添加 Google 分析 jar 文件。（将 jar 文件复制到 lib 文件夹中。& 项目属性 -> Java 构建路径 -> 库 -> 添加 jar） libGoogleAnalytics.jar

jar 文件链接：- [https://developers.google.com/analytics/devguides/collection/android/resources](https://developers.google.com/analytics/devguides/collection/android/resources)

我希望解决您添加 jar 文件的问题。

谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T17:19:54.470

要将事件发送到 Google Analytics，请使用`tracker.send(MapBuilder.createEvent(...).build())`此处所示的 - [Google Analytics SDK V3 中的事件跟踪](https://developers.google.com/analytics/devguides/collection/android/v3/events)。

# jquery - 传递对象时使用jquery .trigger

> ID：14597727
> 
> 赞同：0
> 
> 时间：2013-01-30T06:06:37.710
> 
> 标签：jquery

我有 2 个 class 复选框`TheCheckboxClass`，每个复选框旁边都有一个 class 的标签`TheLabelClass`。目前，我有一个用于复选框的事件处理程序，如下所示：

```
$('#SomeContainer').on({
    mouseup: function () { DoSomethingWithCheckBox($(this)); }
}, '.TheCheckboxClass'); 
```

如您所见，复选框处理程序将复选框传递给处理事件的函数。

HTML 如下所示：

```
<div class="SomeDivClass">
   <input class="TheCheckboxClass" type="checkbox" />
   <div class="TheLabelClass">some text</div>
</div> 
```

我如何使用`.trigger`来处理标签上的点击事件并将相应的复选框传递给`DoSomethingWithCheckBox`函数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:13:02.890

```
$(".TheLabelClass").on('click', function () {
    $(this).prev().trigger('mouseup');
}); 
```

`.trigger`也会触发委托事件。

# ajax - 使用ajax调用的jQuery每个循环间歇性失败

> ID：14597730
> 
> 赞同：0
> 
> 时间：2013-01-30T06:06:45.993
> 
> 标签：ajax, jquery

我正在尝试调试导致`ajax`间歇性错误的循环问题。具体来说，我正在循环 20 条记录并将它们插入数据库，但有时只插入 20 条记录中的 17 条，有时插入 20 条中的 18 条，等等。这是代码：

```
function myInsertLoop(){
  $('input[name=r_maybe].r_box').each(function(){
    if( $(this).prop('checked') ){ 
      var rn = $(this).prop('value');   
      $.ajax({
        url: sURL + 'myController/Insert',
        type:"POST",
        dataType: 'text',
        data: {'rn': rn},
        error:          
        function(data) {alert('Error:'+rn+'\n\n'+data);}
      });
    } 
  });   
} 
```

当我使用相同的数据重复该过程时，我得到不同的几行没有插入。我可以提醒 的值`rn`，它告诉我哪些记录引发了错误，但我仍然不知道为什么会发生错误。插入记录的数据和数据类型都是一致的，所以我不相信这是引发错误的原因。我猜这个错误与时间有关，但不确定。

我试图提醒`data`回调，但我看到的唯一内容是`[object Object]`.

![对象对象](../Images/8965a0979208a78ad648a5684bb4161e.png)

关于我应该在这里寻找什么的任何想法？间歇性插入失败的原因可能是什么？谢谢。

# c++ - 如何保存 C++ 可读的 .mat 文件

> ID：14597733
> 
> 赞同：0
> 
> 时间：2013-01-30T06:07:08.000
> 
> 标签：c++, matlab, image-processing, compression

我在 matlab 中运行 DCT 代码，我想将压缩文件 ( `.mat`) 读入 ac 代码。但是，我不确定这是否正确。我还没有完成我的代码，但我想请求解释如何从我的文件创建一个 c++ 可读`.mat`文件。

当涉及到文件的二进制浮点详细信息时，我有点`.mat`困惑`.txt`。有人请给我解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:28:32.887

似乎您有很多选择，具体取决于您的确切需求、时间和技能水平（在 Matlab 和 C++ 中）。显而易见的是：

**ASCII 文件**

您可以使用语法在 Matlab 中生成 ASCII 文件，也可以使用 c 样式命令`save(filename, variablename, '-ascii')`创建更自定义的格式。`fprintf`然后，在 C 或 C++ 程序中，使用`fscanf`.

这通常是最简单的，并且在许多情况下已经足够好了。人类可以使用 notepad++、emacs 等读取文件这一事实是一个很好的健全性检查（尽管这通常被高估了）。

有两个很大的缺点。首先，文件非常大（一个 8 字节的双精度数需要大约 19 个字节来存储在 ASCII 中）。其次，您必须非常小心，以尽量减少不可避免的精度损失。

**磁盘上的字节**

对于一个简单的数字数组（例如，一个 32×32 的双精度数组），您可以简单地使用`fwrite`Matlab 函数将数组写入磁盘。然后在 C/C++ 中使用并行`fread`函数。

这不会损失精度，速度非常快，并且磁盘上的大小相对较小。

这种方法的缺点是不一定能保存复杂的 Matlab 结构。

**Mathworks 提供的 C 库**

由于这是一个非常常见的问题，Mathworks 实际上通过直接 C 实现读取/写入 *.mat 文件所需的函数来解决这个问题。我没有使用过这个特定的库，但通常他们提供的库很容易集成。从这里可以找到一些文档：http: [//www.mathworks.com/help/matlab/read-and-write-matlab-mat-files-in-cc-and-fortran.html](http://www.mathworks.com/help/matlab/read-and-write-matlab-mat-files-in-c-c-and-fortran.html)

这应该是一个非常健壮的解决方案，并且对更改相对不敏感，因为它是主流支持的 Matlab 工具集的一部分。

**基于 HDF5 的 *.mat 文件**

使用最新版本的 Matlab，您可以使用该符号`save(filename, variablename, '-v7.3');`强制 Matlab 以基于 HDF5 的格式保存文件。然后您可以使用 HDF5 组中的工具来处理该文件。请注意一个不错的基于 java 的 GUI 查看器 ( [http://www.hdfgroup.org/hdf-java-html/hdfview/index.html#download_hdfview](http://www.hdfgroup.org/hdf-java-html/hdfview/index.html#download_hdfview) ) 和 C、C++ 和 Fortran 库。

这是一种存储二进制数据的非脆弱方法。让库在您的代码中工作也是一项工作。

一个缺点是 Mathworks 可能会更改它们如何将 Matlab 数据类型映射到 HDF5 文件中的细节。如果您真的想变得健壮，您可能想尝试...

**自定义 HDF5 文件**

不只是采用 Mathworks 决定使用的任何格式，直接创建 HDF5 文件并从 Matlab 将数据推送到其中并不难。这使您可以控制压缩、块大小、数据集层次结构和名称等内容。它还使您免受默认 *.mat 文件格式的任何未来更改的影响。参见`h5write`Matlab 中的命令。

从 C/C++ 端开始运行仍然需要一些努力，所以如果你的项目需要，我只会走这条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:29:49.607

`.mat`是 MATLAB 本身的特殊格式。您可以做的是`.mat`在 MATLAB 工作区中加载您的文件：

```
load file.mat 
```

然后使用`fopen`and`fprintf`将数据写入`file.txt`，然后您可以在 C 中读取该文件的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:03:15.880

除了已经提到的内容之外，您还可以使用 -ascii 从 MATLAB 中保存数据。

```
save x.mat x 
```

变成：

```
save x.txt x -ascii 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:43:40.817

您还可以使用 matlab 的[dlmwrite](http://www.mathworks.com/help/matlab/ref/dlmwrite.html)写入分隔的 asci 文件，该文件在 C 中很容易阅读（并且人类也可读），尽管如果这是问题的核心，它可能不会被压缩

# node.js - Node JS 中的大量消息

> ID：14597734
> 
> 赞同：-1
> 
> 时间：2013-01-30T06:07:09.350
> 
> 标签：node.js

我的要求很简单，我需要从客户端获取消息，将它们存储在服务器中并将收集到的消息发送给所有客户端。为了简单起见，

n 客户端向服务器发送消息。在所有客户端都发送了消息后，服务器将整个消息列表发送回所有客户端。

每条消息本身都很小，（大约 50 字节）。实现这一目标的最简单方法是什么？使用数组会是最优的吗？还是数据库？

客户数量为 4000 左右。

谢谢你。请询问您是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:52:46.580

我自己解决了。我最终使用 NoSQL Redis DB 进行高速处理。

# user-interface - pharo smalltalk，阻止对话框和父窗口

> ID：14597742
> 
> 赞同：4
> 
> 时间：2013-01-30T06:07:41.020
> 
> 标签：user-interface, dialog, window, smalltalk, pharo

我正在Pharo做一个应用程序。我正在用 UIBuilder 设计一些 GUI。

我正在操作窗口，这些窗口会创建其他窗口（或对话框）。

我的问题是当我关闭主窗口时如何做，所有其他辅助窗口也关闭。
以及如何在弹出对话框时阻止程序直到对话框关闭。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:13:56.843

关于你的第二个问题，

> 以及如何在弹出对话框时阻止程序直到对话框关闭，

你知道`#openModal: aSystemWindow`吗？

您可以在工作区中尝试此操作：

```
|window1 window2|
window1 := SystemWindow new openInWorld.
window2 := SystemWindow new.
window1 openModal: window2. 
```

# html - 设置视频标签的宽度

> ID：14597746
> 
> 赞同：0
> 
> 时间：2013-01-30T06:08:02.337
> 
> 标签：html, iframe

我有一个代码

```
<iframe id="vdoiframe" src="http://keralacarpentry.com/immobiler/media_gallery/BMP2_PSP.mp4" height="500" width="950">
</iframe> 
```

我的问题是我们如何使用css为音频标签设置宽度？在这段代码中，我的视频很小。我想增加它的宽度。是否可以为这个音频标签设置宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:15:11.323

Rather than link to the video in an iframe can you link using the <video> tag? That way you can control the size, placement, auto-play, controls etc using the HTML5 capabilities

```
<video height="250" width="320">
    <source="http://keralacarpentry.com/immobiler/media_gallery/BMP2_PSP.mp4" type="video/mp4">
</video> 
```

# php - 使用 call_user_func_array() 导致错误

> ID：14597752
> 
> 赞同：1
> 
> 时间：2013-01-30T06:08:24.913
> 
> 标签：php, html, mysqli

> **可能重复：**
> [mysqli 代码和 call_user_func_array() 中出现的错误](https://stackoverflow.com/questions/14544657/errors-appearing-in-mysqli-code-and-call-user-func-array)

尝试使用 mysqli 创建动态 where 子句时遇到很多错误：

> 警告：mysqli_stmt::bind_param() 的参数 2 应为参考，在第 319 行的 ... 中给出的值
> 
> 警告：mysqli_stmt::execute(): (HY000/2031): 没有为第 328 行的准备好的语句中的参数提供数据

我猜想解决问题需要进行一些更改，但是如果两个下拉菜单中的一个不相等`All`或两者都不相等`All`，则会出现错误。

下面是显示下拉菜单和查询（带有动态 where 子句）的代码，具体取决于所选的 n 个选项：

**PHP/MYSQLI:**

```
 function StudentAnswers()
    {

/*BELOW IS THE QUERY WHERE I AM TRYING TO RETRIEVE DATA DEPENDING ON THE ASSESSMENT CHOSEN AND
THEN DEPENDING ON OPTIONS CHOSEN IN STUDENT AND QUESTION NUMBER DROP DOWN MENU */

    $selectedstudentanswerqry = "
    SELECT
    StudentAlias, StudentForename, StudentSurname, q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
    ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
    FROM Student s
    INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    ";

    // Initially empty
    $where = array('q.SessionId = ?');
    $parameters = array($_POST["session"]);
    $parameterTypes = 'i';

    // Check whether a specific student was selected
    if($_POST["student"] !== 'All') {
        $where[] = 'sa.StudentId = ?';
        $parameters[] = $_POST["student"];
        $parameterTypes .= 'i';
    }

    // Check whether a specific question was selected
    // NB: This is not an else if!
    if($_POST["question"] !== 'All') {
        $where[] = 'q.QuestionId = ?';
        $parameters[] = $_POST["question"];
        $parameterTypes .= 'i';
    }

    // If we added to $where in any of the conditionals, we need a WHERE clause in
    // our query
    if(!empty($where)) {
        $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
        global $mysqli;
        $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
        // You only need to call bind_param once
            call_user_func_array(array($selectedstudentanswerstmt, 'bind_param'),
            array_merge(array($parameterTypes), $parameters)); //LINE 319 ERROR 1
    }

//Add group by and order by clause to query
    $selectedstudentanswerqry .= "
      GROUP BY sa.StudentId, q.QuestionId
      ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute(); //LINE 328 ERROR 2

//bind database fields $selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
    $detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
    $detailsMouseClick,$detailsStudentMark); //LINE 331 ERROR 3

//store results retrieved
    $selectedstudentanswerstmt->store_result(); //LINE 332 ERROR 4

//count number of rows retrieved
    $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows();     

//output query
    echo "$selectedstudentanswerqry";

    }

    ?> 
```

# sql - 根据sql中的输入生成逗号分隔值

> ID：14597753
> 
> 赞同：0
> 
> 时间：2013-01-30T06:08:27.863
> 
> 标签：sql, sql-server, sql-server-2008

我有一个名为`Rule_X_ListType`以下结构的表

```
Rue_ID  ListType_ID  Value
---------------------------
1       2            319
1       2            400
1       5            8150
1       5            1000
1       3            10211
2       2            400
2       6            10211
3       7            10211
3       3            8051
2       2            319 
```

如果我将输入作为`Rule_ID = 1 and ListType_ID = 2`，那么我需要将输出作为带有值的字符串：

```
319,400 
```

任何人请帮忙...提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:18:54.077

我觉得 CTE 或 FOR XML PATH 都没有必要。这可以使用更简单的 COALESCE 方法来完成

```
DECLARE @List varchar(100)

SELECT 
   @List = COALESCE(@List + ', ', '') + CAST(Value AS varchar(10))
FROM 
   Rule_X_ListType
WHERE 
   Rule_ID = 1 and ListType_ID = 2

SELECT @List 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:12:45.600

试试这个

```
;WITH CTE AS
(
  SELECT * FROM Rule_X_ListType WHERE Rue_ID = 1 AND ListType_ID = 2
)
SELECT STUFF
(
   (SELECT ',' + A.Value FROM CTE A ORDER BY A.VALUE FOR XML PATH('')),1,1,''
) AS CSVValues 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:18:56.167

```
SELECT DISTINCT T1.Rule_ID,T1.ListType_ID,STUFF(VAL,1,1,'') AS VALUE
FROM Rule_X_ListType T1
CROSS APPLY (SELECT  ',' + CONVERT(VARCHAR,Value)
             FROM Rule_X_ListType T2
         WHERE T1.Rule_ID =T2.Rule_ID and T1.ListType_ID =T2.ListType_ID
         FOR XML PATH(''))A(VAL)
WHERE T1.Rule_ID = 1 and T1.ListType_ID = 2 
```

[http://sqlbay.blogspot.in/](http://sqlbay.blogspot.in/)中的 SQL 提示和技巧

# java - 如何在 java.awt.Robot 中将焦点设置到窗口

> ID：14597756
> 
> 赞同：0
> 
> 时间：2013-01-30T06:09:00.937
> 
> 标签：java, selenium, webdriver, screenshot, awtrobot

我正在使用 selenium web 驱动程序来自动化我的 web 应用程序。我正在使用`java.awt.robot`类来截取屏幕截图。当我运行我的测试时，它会打开浏览器，它会按照我的需要执行，它会在桌面屏幕上截取前窗口的屏幕截图。

**实际需要：**

我最小化了由 selenium 打开的浏览器窗口的屏幕，并在某些应用程序中执行了一些其他操作。在这种情况下，我的测试用例将完美执行，但屏幕截图不是浏览器窗口，而是我打开的应用程序。

*我的需要是在浏览器窗口最小化时对其进行截图。*

可以使用`Robot`吗？我并不是说我需要单独使用机器人类来截图。请也建议我其他方法。

请考虑我需要不使用`TakesScreenshot`selenium API 类的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:17:57.823

据我所知，如果我们在屏幕上显示其他内容，我们将无法使用 Robot 类来拍摄浏览器窗口的快照。这是为了捕捉当前在您的 PC 屏幕上发生的任何事情。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:30:25.970

**尝试这个：**

 ````
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    try {
        FileUtils.copyFile(scrFile, new      File(System.getProperty("user.dir")+"\\screenshots\\"+fileName+".jpg"));
    } catch (IOException e) {
        e.printStackTrace();
    } 
````

# wmi - Why the Object browser window is doesn't show anything

> ID：14597760
> 
> 赞同：0
> 
> 时间：2013-01-30T06:09:26.913
> 
> 标签：wmi, objectbrowser

i have downloaded wmi tools from microsoft page, when i am opening the wmi object browser, it shows like this

![enter image description here](../Images/fb4d4ac9f1f27ac819c2faff970d6166.png)

So how to view the event details of local system by using wmi.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:36:12.357

[wmi 工具](http://www.microsoft.com/en-us/download/details.aspx?id=24045)使用一个activex 控件，因此您必须使用Internet Explorer 浏览器打开它。

# list - 应用窗口函数来获取递归列表，我该怎么办？

> ID：14597766
> 
> 赞同：2
> 
> 时间：2013-01-30T06:09:41.450
> 
> 标签：list, haskell, recursion, loops

我刚刚遇到一个具有挑战性的问题（来自编程竞赛实践），其中包含以下**递归序列**

给定 3 个数字**mnk**找到元素 a[k] 其中

```
a[0] = m
a[1] = n
a[i] = a[i-1] + a[i-2] ; if floor(i/2) mod 2 = 1
a[i] = a[i-1] - a[i-4] ; if floor(i/2) mod 2 = 0 
```

示例：对于 m=2 n=3 k=6 答案为 9

```
a[0] = 2
a[1] = 3
a[2] = 3 + 2 = 5
a[3] = 5 + 3 = 8
a[4] = 8 - 2 = 6
a[5] = 6 - 3 = 3
a[6] = 3 + 6 = 9
... 
```

这就是我生成序列的方式（这显然会消耗大量堆栈并且即使对于前 100 个元素也非常慢）

```
 1 fbm :: Int → Int → Int → Int
 2 fbm m n 0 = m
 3 fbm m n 1 = n
 4 fbm m n x = let a = fbm m n (x-1)
 5                 b = fbm m n (x-2)
 6                 c = fbm m n (x-4)
 7             in case (x `div` 2) `mod` 2 of
 8                 1 →  a + b
 9                 0 →  a - c
10 
11 fbs m n = map (λx→fbm m n x) [0..] 
```

由于需要在大（〜1000+）索引处查找元素的问题。我尝试通过尝试仅在**具有 4 个输入**的函数上限制计算并在列表上递归地应用具有**4 个元素窗口**的函数但无法成功实现它们中的任何一个（*这*意味着我无法弄清楚如何做）

```
fs1 = map fst $ iterate next (a,b)
  where next (a,b) = something

fs2 = m:n:scanl (gen) 2 fs2 
  where gen [a,b,c,d] = something

fs3 = scanl (genx m n 0 0) (repeat 0)
  where genx a b c d = something 
```

**问题1：**我的任何方法都是解决这个问题的好方法吗？（+请给我一个如何做的例子）

**问题2：**如果我走错了路，你会如何解决这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:53:34.260

我想提出两个解决方案，它们也是基于 dbaupp 在这里介绍的记忆的概念。与现有答案不同，以下解决方案使用索引而不是先前元素的值来计算列表的新元素。

第一个想法如下

```
fbs :: Int -> Int -> [Int]
fbs m n = m : n : map (fbMake m n) [2 ..]

fbMake :: Int -> Int -> Int -> Int
fbMake m n = f
  where f i | (i `div` 2) `mod` 2 == 1 = (xs !! (i - 1)) + (xs !! (i - 2))
            | otherwise                = (xs !! (i - 1)) - (xs !! (i - 4))
        xs = fbs m n 
```

`fbs m n`该解决方案从其记忆的前辈构建列表元素。不幸的是，由于列表索引的`O(n)`性能相当差。

在索引方面有什么比列表更好的呢？数组开始发挥作用。这是第二个解决方案。

```
import Data.Array

fbs :: Int -> Int -> Int -> [Int]
fbs m n k = m : n : map (fbm m n k) [2 .. k]

fbsArr :: Int -> Int -> Int -> Array Int Int
fbsArr m n k = listArray (0, k) (fbs m n k)

fbm :: Int -> Int -> Int -> Int -> Int
fbm m n k i | (i `div` 2) `mod` 2 == 1 = (xs ! (i - 1)) + (xs ! (i - 2))
            | otherwise                = (xs ! (i - 1)) - (xs ! (i - 4))
  where xs = fbsArr m n k 
```

它与第一个几乎相同，但这次结果被存储在一个数组中，并且索引其元素的速度明显更快。根据我的测试，它生成答案的`(m, n, k) = (2, 3, 1000)`速度比基于列表的方法快 10 倍以上。在这种情况下，答案是`fbsArr m n k ! k`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:00:44.563

这个问题类似于“斐波那契数列”，但在我看来，它们之间有很大的不同。
**记忆化**是解决此类问题的常用技术。
例如，我们可以用它来计算斐波那契数列。
下面是一个非常简单的说明。它不如那个`zipWith`解决方案，但它仍然是一个线性操作实现。

```
fib :: Int -> Integer
fib 0 = 1
fib 1 = 1
fib n = fibs !! (n-1) + fibs !! (n-2)

fibs :: [Integer]
fibs = map fib [0..] 
```

如果我们尝试模仿上面的`fib`和`fibs`，也许我们会写下面的代码。

```
fbm :: Int -> Int -> Int -> Int
fbm m n 0 = m
fbm m n 1 = n
fbm m n x = let a = fbs m n !! (x-1)
                b = fbs m n !! (x-2)
                c = fbs m n !! (x-4)
            in case (x `div` 2) `mod` 2 of
                   1 ->  a + b
                   0 ->  a - c

fbs :: Int -> Int -> [Int]
fbs m n = map (fbm m n) [0..] 
```

但是上面`fbs`的也超级慢。用数组替换列表几乎没有什么区别。原因很简单，调用的时候没有memoization `fbs`。`fibs`如果我们比较 和 的类型签名，答案会更清楚`fbs`。

```
fibs :: [Integer]
fbs :: Int -> Int -> [Int] 
```

其中一个是整数列表，另一个是函数。
为了让记忆发生，我们必须以另一种方式实现 fbs。
例如

```
fbs m n = let xs = map fbm [0..]
              fbm 0 = m
              fbm 1 = n
              fbm x = let a = xs !! (x-1)
                          b = xs !! (x-2)
                          c = xs !! (x-4)
                      in case (x `div` 2) `mod` 2 of
                             1 ->  a + b
                             0 ->  a - c
          in xs 
```

**尾递归**是此类问题的另一种常见方法。

```
fbm :: Int -> Int -> Int -> (Int, Int, Int, Int)
-- a[0] = m
-- a[1] = n
-- a[2] = m + n
-- a[3] = m + 2 * n
fbm m n 3 = (m+2*n, m+n, n, m)
fbm m n x = case (x `div` 2) `mod` 2 of
                 1 -> (a+b, a, b, c)
                 0 -> (a-d, a, b, c)
  where (a,b,c,d) = fbm m n (x-1) 
```

最后但同样重要的是，这是一个数学解决方案。

```
a[0] = m
a[1] = n
a[2] = m + n
a[3] = m + 2n
a[4] = 2n
a[5] = n
a[6] = 3n
a[7] = 4n
a[8] = 2n

fbs m n = [m, n, m+n, m+2*n] ++ cycle [2*n, n, 3*n, 4*n] 
```

# sql - How to have null values for datetime parameter in ssrs reports?

> ID：14597770
> 
> 赞同：0
> 
> 时间：2013-01-30T06:10:15.970
> 
> 标签：sql, sql-server, parameters, report

I have three parameters on my report: `StartDate`, `EndDate` and `AccountID`.

I want to make `StartDate` and `EndDate` as optional values. How can I achieve this? I see that there is no option for selecting allow blank values for the parameters

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:18:34.390

嗯，应该有。有一个标志“允许空值”，请参阅第 10 步[的这篇文章](http://arcanecode.com/2010/07/13/adding-query-parameters-to-sql-server-2008-reporting-services-reports/)。

# android - SQLite How can we access Database in other app

> ID：14597771
> 
> 赞同：0
> 
> 时间：2013-01-30T06:10:18.573
> 
> 标签：android, sqlite

I know it is possible to access `DataBase` which in `SDCARD` by many apps in android.

but do not know the process to do that.

1- I created one `test.db` DB in sdcard eclipse .

2- My current `app` is using this DB.

3- I created one `other app`(which ll access this DB)

**Please guide me How can i access test.db in my new app.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:13:30.490

只有在自定义内容提供程序中创建了正在运行的应用程序数据库时，才能使用相同的数据库。

您不能直接从正在运行的应用程序访问数据库。

但是，如果您在自定义内容提供程序中创建正在运行的应用程序数据库，那么您可以在权限的帮助下直接访问该数据库。

在这种情况下，您甚至不需要复制该数据库。

请参阅此[链接](http://ashwinrayaprolu.wordpress.com/2011/03/16/custom-content-provider-in-android/)以获取自定义内容提供程序。

# windows-phone-7 - ContextMenu Tap/Click Event in WP7

> ID：14597772
> 
> 赞同：0
> 
> 时间：2013-01-30T06:10:21.897
> 
> 标签：windows-phone-7, contextmenu, bing-maps, pushpin

If I tap on a pushpin, Contextmenu is opening and displaying the details.. Now I want To Tap/Click on the Contextmenu to do some events.. How to achieve this??? Thanks

```
<Style x:Key="MenuItemStyle" TargetType="toolkit:MenuItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolkit:MenuItem">
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" 
                                   TextWrapping="Wrap" 
                                   Margin="24,0" 
                                   FontSize="26" Foreground="Black"/>
                        <TextBlock Text="{Binding Country}"                                        
                                   Margin="24,0" 
                                   FontSize="22" Foreground="Black"/>
                        <TextBlock Text="{Binding Status}"                                        
                                   Margin="24,0" 
                                   FontSize="22" Foreground="Black"/>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

        private void Pushpin_ManipulationStarted(object sender, ManipulationStartedEventArgs e)
    {
        var _ppmodel = sender as Pushpin;
        ContextMenu contextMenu =
            ContextMenuService.GetContextMenu(_ppmodel);
        contextMenu.DataContext = _viewModel.Pushpins.Where
            (c => (c.Coordinates
                == _ppmodel.Location)).FirstOrDefault();
        if (contextMenu.Parent == null)
        {
            contextMenu.IsOpen = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:14:40.383

要处理 ContextMenuItem 上的点击/单击，您必须添加适当的事件。

例如

```
<Style x:Key="MenuItemStyle" TargetType="toolkit:MenuItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="toolkit:MenuItem">
                <StackPanel Tap="OnMenuItemTapped">
                    ...
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter
</Style> 
```

# java - Can I set compiler preferences to ignore for “A generic array is created for a varargs parameter”?

> ID：14597778
> 
> 赞同：1
> 
> 时间：2013-01-30T06:11:01.130
> 
> 标签：java, eclipse, warnings

I'm having the same problem as the person who asked [this question](https://stackoverflow.com/questions/1445233/is-it-possible-to-solve-the-a-generic-array-of-t-is-created-for-a-varargs-param).

Specifically, the warning is

> Type safety: A generic array of Object&Serializable&Comparable is created for a varargs parameter

on this line of code

```
Collections.addAll(row, name, units, Boolean.FALSE);
// types: List<Object>, String, Integer, Boolean 
```

The solutions posted were lovely, but I was wondering if Eclipse provides another way. Can I change the compiler preferences to ignore that sort of type safety warning? If so, which one would I change?

**EDIT:** So far, I've tried all the ones in generic types and "Inexact type match for varargs" in Potential Programming Problems." Are there warnings Eclipse won't let me ignore or is there a different one I can turn off?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:15:23.843

在 Eclipse 中，您可以禁用任何警告，也可以在*Project->Properties->Java Compiler->Errors / Warnings*下启用一些默认禁用的警告：

![禁用编译警告 Eclipse](../Images/9691c0842ec9bd7db4b46f4b3d356cc6.png)

# django - Django用过滤条件注释计数作为计数

> ID：14597779
> 
> 赞同：5
> 
> 时间：2013-01-30T06:11:07.793
> 
> 标签：django, django-models

我需要在计数大于 2 的模型“Mymodel”中获取字段“title”的重复条目。这样我就可以从 Mymodel 中删除所有重复项。

我正在尝试执行如下查询，但它抛出异常“AttributeError：'bool'对象没有属性'lookup'”

```
movies = Mymodel.objects.values('title')\
            .annotate(title_count=Count('title'), distint=True)\
            .filter(title_count__gt=2) 
```

等效的原始 sql 查询

```
SELECT count(title) as num_title, title from app_mymodel group by title having count(title) > 2; 
```

我在这里发现了类似的问题，[Filtering on the count with the Django ORM](https://stackoverflow.com/questions/3795449/filtering-on-the-count-with-the-django-orm)但它对我不起作用。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T06:47:24.333

在没有 的情况下尝试类似的查询`distinct`，因为我认为您不能将其传递给`annotate`.

```
movies = Mymodel.objects.values('title')\
        .annotate(title_count=Count('title'))\
        .filter(title_count__gt=2) 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-12-11T16:19:39.870

它抛出异常 AttributeError 因为**Count**函数有*distinct*参数，但没有*distint*。

# php - return multiple data in ajax

> ID：14597780
> 
> 赞同：1
> 
> 时间：2013-01-30T06:11:11.747
> 
> 标签：php, jquery, ajax

I am developing a social website like facebook in php. I have a search bar in a page named as `showdetails.php` which should display the name of the users (in the database) in a `dropdown list like div which can be clicked for selection` ,as user types the letters in the search box.I have done this using ajax.When I click a particular user name in the dropdown list, it automatically comes to the search box.My issue is that there is another div which needs to display the details of the selected user clicked by the user.I have searched a lot but couldnt get the correct one.I am unaware of returning two different values from a ajax call since in my knowledge `var response = xmlhttp.responseText;`,the variable response can store only one result.

My `searchvalues.php`which contains the code of searching the username

```
 $hint = "<table>";
       while($row = mysql_fetch_array($result_query_get_following))
     {
         $act_fname = $row['acnt_fname'];
         $act_lname = $row['acnt_lname'];
         $act_name = $act_fname . ' ' . $act_lname;
         $hint.= "<tr onClick='showVal(\"".$act_name."\");'><td >".$act_name."</td></tr>";
         $following_id = $row['flwing_following_user_id'];
         $following_member_class = $row['acnt_member_class'];
         $following_profile_picture = $row['acnt_profile_picture'];
    }
     $hint .= "</table>";
}
  if ($hint == "")
  {
$response="no suggestion";
   }
 else
 {
$response=$hint;
 }

//output the response
echo $response; 
```

My javascript functions in showdetails.php

```
 function showVal(val)
{
    document.getElementById("quicksearch").value=val;
    document.getElementById("search").style.display="none";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T06:35:49.387

//服务器端：

```
$return_data['status'] = '0';

$return_data['msg'] = 'Your message.'; 

echo json_encode($return_data);exit; 
```

// 客户端

```
$.ajax({
    dataType: "json",
    type: "POST",
    url: 'Your url',
    data: ({parm1:value1,...}),
    success: function (data, textStatus){
        $("#div1").html(data.msg);
        $("#input1").val(data.status);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:13:54.300

据我所知，从一个函数返回两个元素是不可能的。您可以做的是创建一个元素数组并返回该特定数组。

EG：*鉴于这是 PHP，因为您没有提供任何代码*

```
function getXYZ()
{
    return array(1,2,3);
}

list($x,$y,$z) = getXYZ(); 
```

# 别的

您可以尝试使用[JSON](http://www.json.org/)返回数据。

[将 .ajax() 与 JSONP 一起使用的基本示例？](https://stackoverflow.com/questions/5943630/basic-example-of-using-ajax-with-jsonp)

[http://www.jquery4u.com/json/ajaxjquery-getjson-simple/](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:07:58.150

```
<div id="user_detail"></div>

    <script>
    $("#clicked_user").click(function(){
        var q =  document.getElementById('clicked_user').value;
        var loadUrl = "getuserinformation.php?query=q";
        $.post
        (
          loadUrl,{language: "php", version: 5},function(responseText){$("#user_detail").html(responseText);},"html"
        );
    })
    </script> 
```

在**getuserinformation.php**中通过 $_get 获取查询参数，在此处查询并回显您希望在 div 中显示的信息

# python - Trying to import requests package but getting pip error?

> ID：14597783
> 
> 赞同：1
> 
> 时间：2013-01-30T06:11:24.587
> 
> 标签：python, python-2.7, pip, python-requests

I installed the requests package by downloading the code from GitHub and installing via command prompt in the usual way. However, attempting to import the module results in IDLE giving me this error

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import requests
  File "requests.py", line 1
    pip install requests 
```

I had installed pip awhile back by simply running the get-pip.py file in IDLE but had never used it so I'm a little surprised to see it pop up now. I tried installing requests using pip but I always get an invalid syntax error. Anyone have a clue as to what's going on here? Thanks for the Help

**EDIT**: Right so what I'm doing is simply opening command line and typing pip install requests which results in me getting a message stating that requests is already installed (becuse I installed it using the setup.py file that was included in the GitHub distrubtion)

**EDIT 2**: Alright, so I just found my requests.py file and it only has one line..

```
pip install requests 
```

# android - 通过使用返回 json 的 Php webservice 将数据从 Mysql 获取到 Spinner

> ID：14597785
> 
> 赞同：-1
> 
> 时间：2013-01-30T06:11:29.117
> 
> 标签：android, json

我想要一个使用 PHP webservice 返回 json 将数据从 Mysql 获取到 Spinner 的基本示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:23:54.953

正如您所说的那样，您需要在 json 中发出请求并从服务器获得响应。首先解析所有字段并将其存储到sqlite数据库的表中。使用该填充内容，您也可以填充微调器。这是从数据库链接填充微调器的 [链接](http://www.androidhive.info/2012/06/android-populating-spinner-data-from-sqlite-database/)

# javascript - 在 jQuery 中访问 ajax 调用之外的 JSONP 数据

> ID：14597786
> 
> 赞同：0
> 
> 时间：2013-01-30T06:11:33.170
> 
> 标签：javascript, json, jquery, jsonp

现在结果前 5 页中的每个 google 链接都是 :visited in my browser, 我需要问...

如何让 JSON 数据正常工作，以便我可以通过其他方法访问/操作它？

```
_otherMethod: function() {

  // END GOAL OF WHERE I WANT THIS TO BE AVAILABLE
  var text = this._requestText();
},

_requestText: function() {
  var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
  $.ajax({
      type: 'GET',
      url: url,
      async: false,
      dataType: 'jsonp',
      success: function(data) {

        // works here
        console.log(data);

        // works here as well & fires local function
        testing(data);

        // doesnt store
        var testvar_1 = data;
      }
  });

  // undefined
  console.log(testvar_1);

  function testing(data) {
    // logs when called from above
    console.log(data);

    // doesnt store
    var testvar_2 = data;
  }

  // undefined
  console.log(testvar_2);

  // havent found this yet...
  return magicVariableThatLetsMeAccessJSON
}, ... 
```

有任何想法吗？我知道关于堆栈溢出还有很多其他类似的问题，但我没有找到任何解决此问题的方法。

谢谢

**更新**

```
var storage;
var yourobj = {
    _otherMethod: function() {
      // END GOAL OF WHERE I WANT THIS TO BE AVAILABLE
      var text = this._requestText();
    },
    _requestText: function() {
      var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
      $.ajax({
          type: 'GET',
          url: url,
          async: false,
          dataType: 'jsonp',
          success: function(data) {
            storage = data;

            // logs correctly
            console.log(storage);
          }
      });
    }
}
//undefined
console.log(storage);
yourobj._requestText();
//undefined
console.log(storage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:30:31.140

首先，如其他地方所述，您需要一个范围内的变量，其次您需要确保在调用回调之前未对其进行评估。

确保这一点的唯一方法是`_otherMethod`在成功回调方法内部进行调用

```
_otherMethod: function(text) {
   //...do what ever you need to do with text
},

_requestText: function() {
  var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
  $.ajax({
      type: 'GET',
      url: url,
      async: false,
      dataType: 'jsonp',
      success: function(data) {
         _otherMethod(data);
      },
      }
  });
} 
```

回调是异步的，这意味着它们在某个时间点被调用，而不是由代码行的顺序决定。如果您知道在成功回调执行之前永远不会调用使用返回数据的代码，并且您需要保留数据，您可以将代码更改为

```
_otherMethod: null, //not strictly needed    
_requestText: function() {
  self = this;
  var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
  $.ajax({
      type: 'GET',
      url: url,
      async: false,
      dataType: 'jsonp',
      success: function(data) {
         self._otherMethod = function(data){
              return function(){
                 //do what you need to with data. Data will be stored
                 //every execution of _otherMethod will use the same data
                 console.log(data);
              }
         }
      },
      }
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:16:20.197

通过`var`在变量名之前添加，您可以在当前范围内创建一个局部变量。

这不起作用：

```
var a = 2;

(function() {
    var a = 3;
})();

console.log(a); // 2 
```

虽然这样做：

```
var a = 2;

(function() {
    a = 3;
})();

console.log(a); // 3 
```

`var`由于您尝试设置的变量位于外部范围内，因此在内部范围内使用它时请摆脱它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T06:19:30.373

非常简单。您需要回调函数上下文之外的存储变量。

```
var storage;

var yourobj = {

    _otherMethod: function() {

      // END GOAL OF WHERE I WANT THIS TO BE AVAILABLE
      var text = this._requestText();
    },

    _requestText: function() {
      var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
      $.ajax({
          type: 'GET',
          url: url,
          async: false,
          dataType: 'jsonp',
          success: function(data) {

            storage = data;

          }
      });

    }

} 
```

或者，存储可以是同一对象的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T06:30:56.653

可能是这样的：

```
 _requestText: function() {
   var url = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json';
   var testvar_1;
   $.ajax({
     type: 'GET',
     url: url,
     async: false,
     dataType: 'jsonp',
     success: function(data) {
       console.log(data);
       testing(data);

       testvar_1 = data;
     }
   });

   // should work here
   console.log(testvar_1); 
```

实际上，您正在`var`那里创建一个新实例。

# android - How to send a parallel request to more than one server in Android?

> ID：14597789
> 
> 赞同：1
> 
> 时间：2013-01-30T06:11:42.193
> 
> 标签：android

My application regarding as showing list of MP3 songs listview from server on click of particular listview song am background download that song into sd card up to that task done successfully but client need when user click on more MP3 songs at the same time from listview then that song also download parallel in background but my code work only last select song is downloading

Please provide code or logic.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:20:25.633

把它抽象出来。编写一个类来排队下载，然后让该类在每个文件完成时启动新的下载。这样您就可以处理诸如重复的 onItemSelected 调用之类的事情。我不确定您为什么添加多维数组标签，但是如果您将代码附加到您的问题中，会更容易理解您的目标是什么。

# xml - Request XML file using vb.net application

> ID：14597790
> 
> 赞同：0
> 
> 时间：2013-01-30T06:11:44.790
> 
> 标签：xml, vb.net

I am trying to request a XML file Using VB.net and load it in my application.

I have been able to use a JavaScript in the past which uses XMLHttpRequest but now I am trying to create a application that will allow me to request a XML file and parse it.

In the past I have used the following JavaScript code to request and show the reply in a textarea:

```
<html>
<body>
<button onclick="send_command()">GET</button>

<textarea id="test1" name="test1" cols="90" rows="30">
XML file will be displayed here
</textarea><br>

<script type="text/javascript">

    function send_command()
    {
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("test1").value=xmlhttp.responseText;
            }
        }

        var url = "http://192.168.0.50/my_xml_file.xml";

        xmlhttp.open("POST",url,false,"admin","admin");
        xmlhttp.send();
    }

</script>

</body>
</html> 
```

But now I am trying to do the same thing but using VB.net (2012) as a windows Application.

After doing a quick Google on this, I have found the following code:

```
' Create a WebRequest to the remote site
Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://192.168.0.50/my_xml_file.xml")

' NB! Use the following line ONLY if the website is protected
request.Credentials = New System.Net.NetworkCredential("admin", "admin")

' Call the remote site, and parse the data in a response object
Dim response As System.Net.HttpWebResponse = request.GetResponse()

' Check if the response is OK (status code 200)
If response.StatusCode = System.Net.HttpStatusCode.OK Then

    ' Parse the contents from the response to a stream object
    Dim stream As System.IO.Stream = response.GetResponseStream()
    ' Create a reader for the stream object
    Dim reader As New System.IO.StreamReader(stream)
    ' Read from the stream object using the reader, put the contents in a string
    Dim contents As String = reader.ReadToEnd()
    ' Create a new, empty XML document
    Dim document As New System.Xml.XmlDocument()

    ' Load the contents into the XML document
    document.LoadXml(contents)

    ' Now you have a XmlDocument object that contains the XML from the remote site, you can
    ' use the objects and methods in the System.Xml namespace to read the document

Else
    ' If the call to the remote site fails, you'll have to handle this. There can be many reasons, ie. the 
    ' remote site does not respond (code 404) or your username and password were incorrect (code 401)
    '
    ' See the codes in the System.Net.HttpStatusCode enumerator 

    Throw New Exception("Could not retrieve document from the URL, response code: " & response.StatusCode)

End If 
```

However when I run the code above in VB.net I get an error:

![enter image description here](../Images/cac39c69479283ea15dbd91c94f5f14a.png)

I can't seem to work out why this error is happening.

Does anyone know what the error above means or better still is the VB.net code above going to do what I am trying to do?

(My XML file requires a username and password to view the XML)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:08:20.937

一种可能的解决方案是将其放入您的 web.config 文件中：

```
<system.net>
<settings>
<httpWebRequest useUnsafeHeaderParsing = "true"/>
</settings>
</system.net> 
```

看看是否可以解决您的错误。

# prolog - 比较查询返回的结果

> ID：14597800
> 
> 赞同：1
> 
> 时间：2013-01-30T06:12:40.287
> 
> 标签：prolog

当我运行查询时，它可以返回零个、一个或多个结果。我如何“保存”这些结果，以便以后进行比较，或者如何即时比较它们？

例如，我有这些事实：

```
father(john, mark).
father(john, michael).
age(michael, 10).
age(mark, 12). 
```

现在，如果我运行这样的查询

```
?- father(john, X). 
```

它会返回`mark`and `michael`，但是我如何比较`mark`and的年龄`michael`？事实上，我怎么知道查询会返回多个结果呢？

这个想法是我想得到一个父亲的长子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:07:29.740

您在这里遇到的事实是，在回溯时，Prolog 会释放它在产生先前结果时找到的变量绑定。这个功能在早期会引起很多恐慌，所以要知道你并不孤单，我们都曾经在那里。

你应该做的第一件事是试着放下告诉 Prolog 如何得到结果的需要，而专注于告诉 Prolog 如何在逻辑上区分你想要的结果。毕竟这是逻辑编程。:) 当你说“我如何比较和的年龄`mark`？`michael`” 您将真正的问题隐藏在假设一旦您知道如何抓住事物之后，您就可以自己找到答案。但是您不想自己找到答案，您希望 Prolog 找到它！

让我们举个例子。假设您想找出谁是最小的孩子。你可以从逻辑上做到这一点：

```
?- father(Father, Child), 
   age(Child, YoungestAge), 
   \+ (father(Father, Child2), 
       age(Child2, Younger), 
       Younger < YoungestAge).
Father = john,
Child = michael,
YoungestAge = 10. 
```

不幸的是，对于大型数据库，这将是低效的，因为 Prolog 必须搜索每个`age/2`事实才能找到特定父级的所有子级。据推测，Prolog 将索引这些谓词，这可能足以拯救我们，具体取决于您如何使用它，但它看起来不像是一种可以普遍应用的策略。但是你不能打败这个查询的逻辑阅读：假设我有一个孩子 Child 的父亲父亲，并且假设孩子的年龄是 YoungestAge，那么同一个父亲的 Child2 没有年龄比 YoungestAge 更年轻。

通常，您确实需要所有解决方案，为此需要三个谓词`setof/3`：`bagof/3`和`findall/3`。它们都具有基本相同的 API，但语义略有不同。例如，如果您想要所有孩子作为父母，您可以使用`setof`来获取他们：

```
?- setof(Child, father(john, Child), Children).
Children = [mark, michael]. 
```

您将需要一个更大的事实数据库来查看两者之间差异的影响，但这是一个不同的问题。简而言之，`setof/3`将为您提供唯一答案的排序列表，而`bagof/3`将为您提供包含所有答案的未排序列表。`findall/3`做同样的事情，只是处理变量的方式不同。以我的经验，`setof/3`并且`findall/3`往往比`bagof/3`.

如果你正在做的工作需要它，或者如果效率需要它，你可以使用这些元谓词来找到所有可能的解决方案，并遍历列表做你需要做的任何处理。

至于“我怎么知道查询将返回多个结果？”的问题？答案基本上是您可以全部生成它们并查看您有多少 ( `findall(..., Answers), length(Answers, Count)`)，或者您可以使用`once/1`它们来确保获得一个单一的解决方案。`once`非常适合使非确定性谓词具有确定性；效果基本上和在子句后面加一个cut是一样的。例如：

```
?- father(john, X).
X = mark ;
X = michael.

?- once(father(john, X)).
X = mark.

?- father(john, X), !.
X = mark. 
```

一般来说`once/1`，如果可能，建议您使用过度显式切割。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:21:26.590

只是丹尼尔回答的一个脚注：

```
eldest(Father, Child) :-
  findall(A/C, (father(Father, C), age(C, T), A is -T), L),
  sort(L, [_/Child|_]). 
```

我使用否定年龄的技巧以相反的顺序获取列表。

这里的“一个班轮”与上述相同：

```
eldest(Father, Child) :-
  setof(A/C, T^(father(Father, C), age(C, T), A is -T), [_/Child|_]). 
```

*编辑*如果你的 Prolog 有库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)），有一种更简洁的方法来获得结果：

```
eldest(Father, Child) :-
   aggregate(max(A, C), (father(Father, C), age(C, A)), max(_, Child)). 
```

# c# - 如何让txt文件的转换更有效率？

> ID：14597802
> 
> 赞同：2
> 
> 时间：2013-01-30T06:12:46.260
> 
> 标签：c#, console

我正在尝试读取 txt 文件（csv 或制表符分隔）并将每一行转换为 Vector3 并将其添加到数组中以进一步处理

到目前为止，我的代码有效，但读取文件需要一段时间。读入的每个文件在 6 mb 到 25 mb 之间

代码运行并完成了我的预期，但它似乎在这个`foreach`语句的某个地方出现了瓶颈？有没有更快的方法，还是必须预料到的？

```
String[] pntsText = File.ReadAllLines(args[0]);
List<Vector3> pnts = new List<Vector3>();
Console.WriteLine("Start Building Points Array ...");
int noOfPnts = pntsText.Length;
int currentPntNo=0;
Console.CursorVisible = false;

foreach (string pntText in pntsText)
{
    currentPntNo++;
    Console.Clear();
    Console.Write(noOfPnts - currentPntNo + " left to process");
    string[] splitXYZ = pntText.Split(new string[] { args[1] }, StringSplitOptions.None);
    Vector3 ve2 = new Vector3(float.Parse(splitXYZ[0]), float.Parse(splitXYZ[1]), float.Parse(splitXYZ[2]));
    pnts.Add(ve2);
}

Console.WriteLine("Points Array Complete"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:29:40.057

我相信问题在于您在控制台上的通知，您可以将它们注释掉并测试您是否获得更好的性能。我建议你使用[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)来计时你的程序执行。

您还可以尝试以下 LINQ 查询来获取`Vector3`.

```
List<Vector3> list

 = pntsText.Select(r => new { Splitted = r.Split(new string[] { "," }, StringSplitOptions.None) })
           .Select(t => new Vector3(float.Parse(t.Splitted[0]), float.Parse(t.Splitted[1]), float.Parse(t.Splitted[2])))
           .ToList(); 
```

但这在内部进行循环，因此我不确定您是否从中获得任何性能提升，并且在处理过程中您不会在控制台上获得输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:45:29.827

您正在使用拆分方法来拆分您的点：

```
string[] splitXYZ = pntText.Split(new string[] 
  { args[1] }, StringSplitOptions.None); 
```

在 for 循环中使用 this 并不是很高效，因为它为返回的数组对象分配内存，并为每个数组元素分配一个 String 对象。考虑将 IndexOf 与 Substring 结合使用，我不确定您必须测试它有多快。

阅读有关此问题的[文档：](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

> **性能注意事项**
> 
> Split 方法为返回的数组对象分配内存，并为每个数组元素分配一个 String 对象。如果您的应用程序需要最佳性能，或者如果管理内存分配在您的应用程序中至关重要，请考虑使用 IndexOf 或 IndexOfAny 方法以及可选的 Compare 方法来定位字符串中的子字符串。
> 
> 如果要在分隔符处拆分字符串，请使用 IndexOf 或 IndexOfAny 方法来定位字符串中的分隔符。如果要在分隔符字符串处拆分字符串，请使用 IndexOf 或 IndexOfAny 方法来定位分隔符字符串的第一个字符。然后使用比较方法来确定第一个字符之后的字符是否等于分隔符字符串的其余字符。

另一点是您正在为每个返回的点数组创建一个对象（向量），包括 3 倍的 Parse 部分，这也需要一些性能：

```
Vector3 ve2 = new Vector3(float.Parse(splitXYZ[0]), 
   float.Parse(splitXYZ[1]), float.Parse(splitXYZ[2])); 
```

如果此时真的不需要这样做（取决于您的需要），您可以将信息以文本甚至结构的形式保存，并在以后需要处理它时创建 Vector 对象。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T20:05:34.060

将整个文件读入一个字符串并调用`str.Split(new[] {',', '\n'})`以获取所有矢量部分的单个数组。然后循环，在 3s 内解析它们。这将防止多次调用`Split`. 还要避免在每次迭代时更新控制台。也许每100个？

# java - How to find the root of an adjective using Wordnet or any other NLP tool?

> ID：14597805
> 
> 赞同：2
> 
> 时间：2013-01-30T06:13:05.497
> 
> 标签：java, nlp, wordnet

I need to stem words to get the root words. I was able to get the stemmed words for nouns and verbs but unable to get the root words of adjectives.

```
 WordnetStemmer stem =  new WordnetStemmer(ws.getDictionary());
    System.out.println("test" + stem.findStems("shooting",POS.VERB) );
    System.out.println("test" + stem.findStems("gunshots",POS.VERB) ); 
```

The following works but when I try it for an adjective it doesn't. Is there any way to stem an adjective or get the root form of it?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:44:54.483

`WordnetStemmer`已被实施为`SimpleStemmer`

所以肯定有一种方法可以阻止形容词。如果词干分析器没有找到这个词，它就不会返回任何词干。

你有几个选择：

1.  调用 findStems 时，您可以将 POS 保留为 Null，在这种情况下，它将返回所有词性的词干。[请参阅此处](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/WordnetStemmer.html#findStems%28java.lang.String,%20edu.mit.jwi.item.POS%29)的文档

2.  试着打电话`SimpleStemmer`。[从分离规则中](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/SimpleStemmer.html)可以看出，很多形容词都被处理了，但仍然会有大量的形容词`stemmer`无法处理。

形容词词干的一些示例：

```
ADJ "er" ""
ADJ "est" ""
ADJ "er" "e"
ADJ "est" "e" 
```

希望能帮助你前进。

# c# - 枚举 - 以一项为异常的组合框绑定

> ID：14597806
> 
> 赞同：1
> 
> 时间：2013-01-30T06:13:10.570
> 
> 标签：c#, wpf, visual-studio-2010

我有一个`Enum`我绑定到的`ComboBox`.
但我不想在组合框项目中显示一个枚举值。
如果我在绑定后尝试删除它会抛出错误。

```
cmbDisplayUnit.Items.Remove(item); 
```

是否可以绑定到枚举并仍然删除或至少隐藏枚举的值之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:57:44.977

如果您查看此[MSDN 论坛文章](http://social.msdn.microsoft.com/forums/en-us/wpf/thread/53674EA3-34AE-4473-A655-24C52F7D0A75)，它会提供有关如何做您想做的事情的示例。请参阅索罗科的回答。

从上面的链接修改：

```
string[] TestNames = Enum.GetNames(typeof(SampleEnumUnits));
var list = from test in TestNames where test != "Enum you wish to remove" select Enum.Parse(typeof(SampleEnumUnits), test);
cmbDisplayUnit.ItemsSource = list; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:29:33.697

我认为你需要这个：

```
cmbDisplayUnit.Items.Remove((int)item); // I assume item is enum variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T12:00:59.917

```
var items = Enum.GetValues(typeof(datMHD.Enums.EquipmentEnums.Request_ItemType));
var List = items.OfType<datMHD.Enums.EquipmentEnums.Request_ItemType>().ToList();
List.RemoveAll(e => e.Equals(datMHD.Enums.EquipmentEnums.Request_ItemType.Spare_Parts)); 
```

您将 Array 值转换为 List 然后使用 RemoveAll 然后将 Item 分配给组合框

# c# - 我可以在 C# 中为 Silverlight windows phone 项目创建/使用静态库吗？

> ID：14597811
> 
> 赞同：1
> 
> 时间：2013-01-30T06:13:35.520
> 
> 标签：c#, silverlight, windows-phone-7, static-libraries

是否可以在 C# silverlight 项目中使用静态 (.lib) 库？我在整个互联网上进行了搜索，但没有找到使用静态库的合适解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:19:56.587

静态库是 C++ 库。您不能直接从 C# 中使用它们，但有一些方法可以进行互操作：

1.  将 C++ 类包装在 C++/CLI 程序集中
2.  如果您可以修改静态库代码，则将 C++ 类设为 COM 类（使用 ATL）并让 CLR 进行包装

# android - android.view.InfalteException。为什么？

> ID：14597813
> 
> 赞同：1
> 
> 时间：2013-01-30T06:13:37.530
> 
> 标签：android, fragment, inflate-exception

我是android编程的初学者。我想在android中学习Fragment，我编写了一个简单的程序，但是当我想运行它时，程序出错了！为什么？

MainActivity.java：

```
public class MainActivity extends Activity {

Button btn;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn=(Button)findViewById(R.id.btn1);
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent1=new     Intent(MainActivity.this,TestFragment.class);
            startActivity(intent1);
        }
    });
}
} 
```

测试片段.java：

```
public class TestFragment extends FragmentActivity{
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_for_btn1);

}
 } 
```

ViewFragment.java：

```
public class ViewFragment extends Fragment{
public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle   savedInstanceState){
    View v=inflater.inflate(R.layout.ui_for_fragment1, container, false);

    Button btnf1;
    btnf1=(Button)v.findViewById(R.id.btnf1);
    btnf1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getActivity(), "This is first fragment!!",  Toast.LENGTH_LONG).show();   
        }
    });
    return v;

}
} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<Button
    android:id="@+id/btn1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="CLICK ME FOR TEST FRAGMENT!"/>
</LinearLayout> 
```

fragment_for_btn1.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<Fragment
    android:id="@+id/fr1"
    android:name="com.example.fragmentexample.ViewFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
</LinearLayout> 
```

ui_for_fragment1.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <Button
    android:id="@+id/btnf1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CLICK:)"></Button>
 </LinearLayout> 
```

LogCat 是：

```
01-30 09:54:39.255: W/dalvikvm(14593): threadid=1: thread exiting with uncaught exception (group=0x4138e300)
01-30 09:54:39.270: E/AndroidRuntime(14593): FATAL EXCEPTION: main
01-30 09:54:39.270: E/AndroidRuntime(14593): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentexample/com.example.fragmentexample.TestFragment}: android.view.InflateException: Binary XML file line #6: Error inflating class Fragment
01-30 09:54:39.270: E/AndroidRuntime(14593):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-30 09:54:39.270: E/AndroidRuntime(14593):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:19:11.550

在您的 XML 文件中`fragment_for_btn1.xml:`

```
<Fragment
    android:id="@+id/fr1"
    android:name="om.example.fragmentexample.ViewFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

它应该是

```
<fragment
    android:id="@+id/fr1"
    class="com.example.fragmentexample.ViewFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

# android - 使用 android 的参考位置（非 gps、非手机信号塔、非 wifi）

> ID：14597815
> 
> 赞同：0
> 
> 时间：2013-01-30T06:13:39.560
> 
> 标签：android, geolocation, location, android-wifi, android-sensors

我的意图是跟踪移动设备相对于另一个移动设备或 wifi。我正在寻找一些指示来继续构建不依赖于 gps 进行位置跟踪的位置跟踪系统。

一组可能的方法可能是。

1.  用户可以单击移动设备上的“开始”按钮，这将是原点，然后开始跟踪原点跟踪方向变化的位置。
2.  一种依靠 Wifi 或其他移动设备来定位自身的跟踪系统

3.  android设备是否可以知道它们之间的距离，如果可以，是否也可以知道方向？

我想在安卓设备上完成这个，这可能吗？在发布之前我已经进行了很多搜索，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:07:37.043

通过传感器融合可以实现 Wifi 定位（仍在研究中以获得更好的准确性）。

网上有很多关于这个主题的论文

[http://www.cs.stanford.edu/people/dstavens/icra11/huang_etal_icra11.pdf](http://www.cs.stanford.edu/people/dstavens/icra11/huang_etal_icra11.pdf)

[http://personal.stevens.edu/~ychen6/mobi248_liu.pdf](http://personal.stevens.edu/~ychen6/mobi248_liu.pdf)

[http://www.ri.cmu.edu/pub_files/2011/8/RobustIndoorLocalizationTech2011.pdf](http://www.ri.cmu.edu/pub_files/2011/8/RobustIndoorLocalizationTech2011.pdf)

# mongodb - MongoDB 将数据存储在两个不同的位置

> ID：14597816
> 
> 赞同：1
> 
> 时间：2013-01-30T06:13:51.363
> 
> 标签：mongodb, mongoid

我是 MongoDB 的新手，在定位/访问我创建或导入的数据时遇到了一些问题，因为它最终位于两个不同的位置。

如果我这样启动外壳

```
 $ mongo 
```

然后显示数据库

```
$ show dbs 
```

这给了我一个我创建的大约 10 个数据库的列表。这些在 /data/db 目录中它不包括名为“pact”的数据库

但是，如果我这样连接

```
$ mongo localhost/pact 
```

然后做

```
 $show dbs 
```

它只列出了一个数据库，即`pact`db，当我通过执行“mongo”以另一种方式连接到 mongo 时未列出该数据库。'Pact' 不在 /data/db 目录中。根据我的笔记，我可能通过这种方式启动 mongod 来制作“pact”数据库，

```
mongod --dbpath data 
```

我认为会将它放在 data/db 目录中，然后像这样导入到 pact 目录中

```
mongoimport --stopOnError --db pact --collection products <  products.json 
```

继续前进，如果我在 irb 中使用 mongo 并像这样开始

```
>> mongo_client = MongoClient.new("localhost", 27017) 
```

然后执行“显示 dbs”

我从 /data/db 目录（不包括协议）中得到一长串 dbs。

为了`pact`通过 irb 找到 db，我尝试将它包含在 localhost 之后，就像我使用 mongo localhost/pact 一样

```
>> mongo_client = MongoClient.new("localhost/pact", 27017) 
```

但我有一个错误。

1 有没有办法找出“pact”数据库所在的目录？

2 如果不是通过 Mongo 驱动程序，我如何在 irb 中访问它

> > mongo_client = MongoClient.new("localhost/pact", 27017)

我认为这会起作用，因为我可以在 shell 中做到这一点`mongo localhost/pact`

3 根据我告诉你的，你能解释一下为什么会这样吗（我假设这不是将数据保存在另一个目录中的正确方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:31:44.727

我的建议是`mongodump`在`mongo localhost/pact`shell 上下文中使用

```
mongodump -d pact -o /out/dir 
```

备份整个数据库。并`mongorestore`在正常的`mongo`shell 上下文中使用

```
mongorestore -d pact /out/dir 
```

恢复数据库。

# ruby-on-rails - 更新 Rails 3 中 current_user 设计的属性

> ID：14597821
> 
> 赞同：0
> 
> 时间：2013-01-30T06:14:26.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用 Rails3 中的设计。我面临一个更新用户属性的问题。这是当前用户，当我尝试更新用户时，它没有更新。当我在@user.errors 中看到时，它说密码不能为空。我已经[为此浏览了设计文档](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password)并使用了 upate_without_password(params[:user]) 但不适用于我。只是为了知道我正在使用 Mongodb。我也经历了 stackoverflow 中发布的相同问题，但对我不起作用。让我分享一下代码：

在用户模型中：有这样的密码验证：

```
validates :password,
    presence: true,
    confirmation: true,
    length: { minimum: 5, maximum: 16 } 
```

在用户控制器中：

```
protect_from_forgery except: :update
  def update
    @user = User.find(params[:id])

    if @user.update_without_password(params[:user])          
      sign_in(current_user, :bypass=>true)
      respond_to do |format|
        format.json {render :json => current_user.to_json(:only =>  [ :status])}
      end
    else         
      respond_to do |format|
        format.json {render :json => @user.errors.to_json}
      end
    end
  end 
```

这是我在请求中发送的参数

```
Parameters: {"user"=>{"status"=>"verified", "_id"=>"user1"}, "id"=>"user1"} 
```

我也在 Rails 控制台中尝试过。它在我 update_attributes 时显示为假，但当我检查用户对象时，它显示我已更新。

```
1.9.3p286 :008 > user.update_attributes({"status"=>"verified"})
 => false 
```

有什么建议我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:30:52.703

检查您的用户模型是否已指定：

```
validates :password,:presence=>true 
```

将上述验证更改为仅在创建这样的用户时完成：

```
validates :password,:presence=>true,:on=>:create 
```

这将在更新时跳过密码验证

# ruby - 当具有另一个 EventMachine 实例的子进程被杀死时，EventMachine 断开连接的客户端

> ID：14597822
> 
> 赞同：1
> 
> 时间：2013-01-30T06:14:37.033
> 
> 标签：ruby, multithreading, fork, eventmachine

父进程在一个单独的线程中启动一个 EventMachine 服务器，并在主线程中监视和重生死掉的工人。

子进程启动另一个 EventMachine 服务器，然后在五秒后退出。

问题是当新的子进程启动时，父进程的所有连接的客户端都断开了。

我应该做些什么来正确地做到这一点？

```
require 'eventmachine'

module EchoServer
  def post_init
    puts "-- someone connected to the echo server!"
  end

  def receive_data data
    send_data ">>>you sent: #{data}"
    close_connection if data =~ /quit/i
  end

  def unbind
    puts "-- someone disconnected from the echo server!"
  end
end

puts "Forking..."

def start_echo_server
  Thread.new {
    puts "Starting Echo server"

    EventMachine.run {
      EventMachine.start_server "127.0.0.1", 8081, EchoServer
    }
  }
end

def spawn_workers
  if @pid = fork
    @started = start_echo_server unless @started
  else
    puts "Child #{$$}: Sleeping for 5 seconds"
    EventMachine.run {
      EventMachine.start_server "127.0.0.1", 8082, EchoServer
      EventMachine.add_timer(5) do
        puts "Child #{$$}: exiting..."
        exit
      end
    }
  end

  @pid
end

spawn_workers

if @pid
  begin
    # check if we have any child process that died
    wpid, status = Process.waitpid2(-1, Process::WNOHANG)
    wpid or (sleep 0.1 && next)
    spawn_workers

  rescue Errno::ECHILD
    break
  end while true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T19:09:52.483

问题：

孩子复制父亲的记忆和fork的代码。（显然）当你的父亲连接到一些客户端然后产生孩子时，孩子会复制父母的 EM 循环以及它的所有连接对象。当孩子开始新的 EM 循环时，从父亲复制的旧 EM 循环停止，因此所有连接对象都调用“close_connection”。您可能有疑问，为什么在孩子中复制的父亲连接对象会关闭父亲与其客户之间的连接？合理的问题。因为复制的对象仍然拥有与父亲相同的套接字。

解决方案：

在子进程中调用 EM.run 之前，在当前新生成的子进程中从父亲派生的所有连接对象上调用“分离”。“分离”会将孩子的连接对象从套接字（父客户端）中分离出来，并防止孩子关闭该套接字。

# mysql - 需要优化mysql查询

> ID：14597837
> 
> 赞同：0
> 
> 时间：2013-01-30T06:16:08.217
> 
> 标签：mysql, optimization

我想做优化这个查询。我已经给出了使用表格的统计数据。

`products`和`products_categories`表有大约 500000 条记录。但对于下面提到的`category`它有 1600 条记录。我为这 1600 条记录创建了插槽。每个`product`可以有最少 1 个插槽和最多 10 个插槽。但是插槽表有大约 300000 条记录。`slot table`也可以有过期的插槽。我想获得即将到期的产品，而其余产品则排在该产品之后。

我已经为`end_time`列创建了索引。但是我使用了条件运算符，所以在这个查询中没有使用索引。我想优化这个查询。请告诉我最好的方法。

```
EXPLAIN
SELECT
  xcart_products.*
FROM xcart_products
  INNER JOIN xcart_products_categories
    ON xcart_products_categories.productid = xcart_products.productid
  LEFT JOIN (SELECT
           t1.*
         FROM bvira_megahour_time_slot t1
           LEFT OUTER JOIN bvira_megahour_time_slot t2
         ON (t1.product_id = t2.product_id
             AND t1.end_time > t2.end_time
             AND t1.end_time > NOW())
         WHERE t2.product_id IS NULL) as bvira_megahour_time_slot
    ON bvira_megahour_time_slot.product_id = xcart_products.productid
WHERE xcart_products_categories.categoryid = '4410'
    AND xcart_products.saleid = 2
GROUP BY xcart_products.productid 
```

下面是解释查询的结果。

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY    xcart_products_categories    ref     PRIMARY,cpm,productid,orderby,pm    cpm     4   const   1523    Using index; Using temporary; Using filesort
1   PRIMARY     xcart_products  eq_ref  PRIMARY,saleid  PRIMARY     4   wwwbvira_xcart.xcart_products_categories.productid  1   Using where
1   PRIMARY     <derived2>  ALL     NULL    NULL    NULL    NULL    77215   
2   DERIVED     t1  ALL     NULL    NULL    NULL    NULL    398907  
2   DERIVED     t2  ref     i_product_id,i_end_time     i_product_id    4   wwwbvira_xcart.t1.product_id    4   Using where; Not exists 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:43:40.747

我已将您的查询改写如下：

```
EXPLAIN
SELECT p.*
FROM xcart_products p
INNER JOIN xcart_products_categories c
    ON c.productid = p.productid
LEFT JOIN (
    SELECT t1.*
    FROM bvira_megahour_time_slot t1
    LEFT JOIN bvira_megahour_time_slot t2
      ON (   t1.product_id = t2.product_id
         AND t1.end_time   > t2.end_time
         AND t1.end_time   > NOW()
      )
    WHERE t2.product_id IS NULL
) AS bvira_megahour_time_slot
  ON bvira_megahour_time_slot.product_id = p.productid
WHERE c.categoryid = '4410'
  AND p.saleid = 2
GROUP BY p.productid 
```

请确保您具有以下复合（多列）索引：

```
bvira_megahour_time_slot:  (product_id, end_time)
xcart_products:            (productid, sale_id)
xcart_products_categories: (productid, category_id)
                        or (category_id, productid) 
```

有了这些索引，它应该工作得更好。

# jquery - 如何使用 JSONP 以及如何制作支持 JSONP 输出的 REST Web 服务？

> ID：14597839
> 
> 赞同：4
> 
> 时间：2013-01-30T06:16:13.360
> 
> 标签：jquery, ajax, rest, service, jsonp

我有一个使用 Jquery Mobile 制作移动 Web 应用程序的项目。我希望我的应用程序将使用来自跨域 REST Web 服务的数据。很多人说用JSONP。但我仍然对如何使用它以及如何构建支持 JSONP 输出的 REST Web 服务感到困惑。任何人都可以帮助我讲述或说明 JSONP 的工作吗？或者有人有这个案例的示例代码吗？之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:31:03.623

JSONP 是客户端请求，而 REST 服务将是服务器端请求（仅当您尝试跨域 api 服务时）。两者在工艺上是不同的。

JSONP：

您可以使用 javascript 或使用 jquery ajax 方法来实现 JSONP。用 jquery 实现是最简单的方法。JSONP 是一种在 html 文档中动态包含 javascript 脚本的类型。所以你可以动态调用js函数。

JSONP 实现有很多可用的资源。我参考下面的一个，

[检查这个以获取 JSONP 实现](http://www.rajamm.info/2011/09/01/cross-domain-communications-with-jsonp-using-javascript-and-jquery/)

下面是一个简单的 jquery ajax 函数，它触发 jsonp 请求到 logitude 和 latitude。

```
$.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: 'http://api.ipinfodb.com/v3/ip-city/?key=b518527dd751af36c974e0adcdc4cb329917df46c006a72bf92858dd7c059488&ip=<?=$client_ip?>&format=json',
        success: function(data) {           
            alert(data.latitude+":"+data.longitude)                             
        },
        error: function(){
            alert('Could not able to find location!');
        }
    }); 
```

查看[这篇文章以了解 REST 实现](http://www.oracle.com/technetwork/articles/javase/index-137171.html)

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-18T17:37:22.867

关于什么构成 RESTful Web 服务并没有全面的协议。定义可能包括以下分类： - 反映对象模型的 API url 路径，例如`user/43/comment/?datetime=01022013` - 反映更改性质的 HTTP 动词，例如`GET`不应写入数据等 - HTTP 响应代码映射到响应状态，例如`200 OK`仅在没有错误时返回。

JSONP 是一种跨域请求的方法，不会在浏览器上遇到 CORS 安全问题。虽然 JS 框架可能会从您身上抽象出现实，但 JSONP 在幕后将`<script>`标签插入到页面的 DOM 中。JSONP url 标准包含一个查询参数`callback=<<nameForCallback>>`. 响应采用 javascript 格式，格式如下：`nameForCallback({ error: false, myData: "banana"});`

JSONP 始终`GET`用作其 HTTP 动词。API 应该总是返回`2XX`状态码，即使在发生错误的情况下，因为浏览器将忽略响应负载（否则它们将无法被您的 javascript 代码访问）。

这些事实排除了许多被视为 RESTful 服务一部分的 API 设计方面。如果您绝对必须使用 JSONP（无法解决 CORS 问题），您仍然可以在 API 设计中加入一些有益的（对于可读性/可维护性）RESTful 品质，例如反映您的数据模型的路径路由等。

# sql - 比较 SQL 查询与 Linq 的性能

> ID：14597840
> 
> 赞同：1
> 
> 时间：2013-01-30T06:16:17.883
> 
> 标签：sql, performance, linq

我关于使用 .NOT 搜索查询的问题。我很困惑哪个加载和处理 SQL 查询更快，我已经实现了 SQL Server 查询，即使我使用 SQL Server 2012 的索引搜索，我的查询也变得更大且获取数据的速度变慢。

那么有什么方法可以让我的查询更快地使用 linq？

这是我的简单查询

```
SELECT
    counting 
FROM  
    xxxxxxx 
WHERE
   (Contains(BOOLEANTEXT, '"FORM"')) 
   AND ((Contains(BOOLEANTEXT, ' "FORM"  and  "WARRANT" ' ))) 
   AND ((Contains(BOOLEANTEXT, ' "RETURN"  or  "RESPECTING"  or  "ELECTION"  or  "EXPENSES" ')))  
   OR ((Contains(BOOLEANTEXT, 'Near((FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES), 1000, TRUE)' ))) 
   AND ((Contains(BOOLEANTEXT, 'FORMSOF(INFLECTIONAL, FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES)' ))) 
   AND ((Contains(BOOLEANTEXT, 'FORMSOF(THESAURUS, FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES)' ))) 
ORDER BY 
   FORMTITLE ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:26:12.910

不，没有办法提高这个查询的性能`LINQ`。

使用时甚至会有一点开销`LINQ`，但在这种情况下肯定可以忽略不计。

`LINQ`最终还将`SQL`在您的数据库上生成并执行它。因此`LINQ`不会提供任何性能优势。

如果你想提高性能，你必须改进这个`SQL`-statement 本身。

查看您的 WHERE 子句，没有括号可以将任何`AND`' 组合到该单个`OR`. 这是故意的吗？您的结果现在将满足所有`AND`条件`OR ((Contains(BOOLEANTEXT, 'Near((FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES), 1000, TRUE)' )))`

这可能会给您带来比您预期更多的结果。

* * *

**' `AND`s 和`OR`.**

您的`WHERE`-clause 现在类似于：

```
(condition1 AND condition2 AND condition3 AND condition5 AND condition6)
OR condition4 
```

我想，你实际上的意思是：

```
condition1 AND condition2
AND (condition3 OR condition4)
AND condition5 AND condition6 
```

我*不是*说你的`WHERE`-clause 是错误的。我只*怀疑*您在某处需要一些额外的括号，以获取`WHERE`您想到的 - 子句。

但在添加括号之前，让我们删除一些以提高可读性。这将与您的相同：

```
WHERE
   Contains(BOOLEANTEXT, '"FORM"')
   AND Contains(BOOLEANTEXT, ' "FORM"  and  "WARRANT" ')
   AND Contains(BOOLEANTEXT, ' "RETURN"  or  "RESPECTING"  or  "ELECTION"  or  "EXPENSES" ')
   OR Contains(BOOLEANTEXT, 'Near((FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES), 1000, TRUE)') 
   AND Contains(BOOLEANTEXT, 'FORMSOF(INFLECTIONAL, FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES)') 
   AND Contains(BOOLEANTEXT, 'FORMSOF(THESAURUS, FORM,WARRANT,RETURN,RESPECTING,ELECTION,EXPENSES)') 
```

# ios6 - AVAudioSessionDelegate beginInterruption 不叫 iOS 6.0.1

> ID：14597841
> 
> 赞同：1
> 
> 时间：2013-01-30T06:16:18.733
> 
> 标签：ios6, avplayer, interruption, avaudiosessiondelegate

我正在创建一个带有音乐播放器的 iPhone 应用程序。我用于`AVPlayer`创建音乐播放器。问题是`beginInterruption`当电话到达时，iOS 6.0.1 中没有调用方法。而是`endInterruptionWithFlags:flags`叫了。在较低版本的 iOS 中，它运行良好。我注意到的另一件事是，如果在应用程序处于后台时有电话来电，则会调用`beginInterruption`方法！但不是在应用程序处于活动状态时。

当我搜索时，我发现其他人也注意到了同样的[问题，他们说这是苹果的错误。](https://stackoverflow.com/questions/11676836/avaudiosessiondelegate-called-at-endinterruption-but-begininterruption-not-call)该问题已在 iOS 6.1 中修复。

所以我该怎么做？我应该尝试手动解决问题还是告诉用户更新操作系统？同时，为什么应用程序在后台运行？任何想法？请帮忙。

提前致谢。

# image-processing - 为什么 FFT 会加速卷积所涉及的计算？

> ID：14597845
> 
> 赞同：4
> 
> 时间：2013-01-30T06:16:29.873
> 
> 标签：image-processing, signal-processing, fft, convolution

我看到很多文献，他们说通过使用 fft 可以达到更快的卷积。我知道需要先得到fft，然后从结果中得到ifft，但我真的不明白为什么使用fft可以使卷积更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T06:49:04.277

对于足够大的滤波器，FFT 会加速卷积，因为卷积需要对每个输出样本进行 N 次乘法（和 N-1）次加法，相反，对于 N 个样本块需要 (2)N^2 次操作。

考虑到，必须通过加零将块大小加倍以进行 FFT 处理，每个块需要 (2)*(2N)*log(2N) 操作来执行 FFT，2N 操作来相乘，然后又需要 4N*log(2N)执行逆 FFT 的操作，有一个收支平衡点，其中 8Nlog2N <= 2N^2。

根本原因是：

1) 离散时域信号可以表示为频率之和。
2) 时域卷积 (O(N^2)) 等于频域中频率的乘积 (O(N)) 3) 变换是可逆的
4) 存在一种将信号从时域转换到频域的方法少于 N^2 次操作（这是“快速傅立叶变换”中的第一个 F）。

直接的 FT 是 O(N^2)，其中每个频域元素 F(i) = Sigma f(i) * exp(i*pi/N)。

然而，FFT 基于 exp(i*pi/N) 具有某些对称性的观察结果，允许将计算拆分为奇数/偶数向量。偶数向量​​可以以 O(N) 为代价计算，而奇数向量需要一半大小的完整 FT。由于这可以重复直到 N=2，所以整体复杂度将（与）Nlog(N) 成正比。

# django - nginx 和 django - gettng 缓存控制工作

> ID：14597849
> 
> 赞同：0
> 
> 时间：2013-01-30T06:16:59.123
> 
> 标签：django, nginx

我正在尝试让缓存控制工作。

在 nginx 中，我有以下内容：

```
 location /static/ {
        alias /home/ubuntu/workspace/mysite;
        expires max;
        add_header Cache-Control public;
    } 
```

在 mysite 目录中，我有静态。在静态中，我有 js、css 和图像的目录。

在网络浏览器中，我收到 404 错误。找不到图片。如果我删除位置 /static/ 这个网站可以工作，但我没有缓存控制。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:57:31.670

如果您使用 url like:`http://your.page.com/static/image.gif`那么根据您的规则，您会得到这样的 uri（包括`alias`指令）：

```
/home/ubuntu/workspace/mysiteimage.gif; 
```

所以结论是`/`从`location`指令中删除最后一个（应该是）或在指令`/static`末尾添加（所以它将是）`alias``/``alias /home/ubuntu/workspace/mysite/;`

其他解决方案可能是：

```
location ~ (static/.*) {
   alias /home/ubuntu/workspace/mysite/$1;
   # ... rest of code here
} 
```

然后您不必在指令中`static`再次添加。`alias`您只需将其用作位置参数 ($1 = static/.*)。

为什么这样？`alias`指令（[别名 doc](http://wiki.nginx.org/HttpCoreModule#alias)）的工作方式如下：它从`location`指令末尾匹配的请求 url 部分修剪，然后将保留的内容附加到它自己的规则路径。在您的 url 示例中，`/static/image.gif/`它将修剪`/static/`并仅附加到您的`alias`路径`image.gif`，因此看起来就像我写的：/home/ubuntu/workspace/mysiteimage.gif/`。

# python - Python 不会正确打印出组合字符串

> ID：14597851
> 
> 赞同：0
> 
> 时间：2013-01-30T06:17:11.890
> 
> 标签：python, string, slice

我有一个程序，其目的是将字符串的前两个字符与字符串的最后两个字母结合起来。例如，如果您输入 Hello There，您将得到 Here。

但是，当我执行此代码时，当我尝试 Hello There 时，只会打印 He。

```
def slice_it(string):
"""this bad boy returns the first two chars of a string and the last two charaters of the string. if the string length is less than 4, return an empty string"""

    length = len(string)
    if length < 4:
    return string
    else:
    return string[0:2] + string[0:2:-1]

def main():
    string = raw_input("Give us a phrase or a word please: ")
    string = slice_it(string)
    print string

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:19:24.933

换行

```
return string[0:2] + string[0:2:-1] 
```

到

```
return string[0:2] + string[-2:] 
```

`string[0:2:-1]`没有得到字符串的最后两个字符（实际上，它什么也没有得到）。

# ruby-on-rails-3 - 如何建立这个关联和模型迁移？

> ID：14597855
> 
> 赞同：1
> 
> 时间：2013-01-30T06:17:29.367
> 
> 标签：ruby-on-rails-3, migration, associations

我有用户、帖子和评论。帖子属于用户。用户有很多帖子。

现在我感到困惑的是，用户应该能够评论其他人的帖子。我如何建立这个协会？

我应该写用户有很多评论，帖子有很多评论，评论属于帖子和用户吗？或者用户通过帖子有很多评论？模型表还应该有哪些列？它需要user_id、post_id、内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:26:43.340

使用[has_many :through 关联](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

**用户型号：**

```
has_many :posts
has_many :comments, :through => :posts 
```

**岗位型号：**

```
belongs_to :user
has_many :comments 
```

**评论型号：**

```
belongs_to :post
belongs_to :user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:25:44.790

你第一次是对的。

用户有很多评论。帖子有很多评论。评论属于用户。评论属于帖子。

评论表应该有 user_id 和 post_id。

`user.comments`用户发表的评论也是如此。`post.comments`将对该帖子发表评论。

这是一个关联，表示“此用户评论了此帖子”。

# php - 动态输入框更新我的sql中的insert和delete

> ID：14597856
> 
> 赞同：1
> 
> 时间：2013-01-30T06:17:34.893
> 
> 标签：php, javascript, jquery, html, ajax

我有一个简单的表单，但我想动态地将表单操作从插入更改为在同一页面中更新，并且我想在同一页面中显示值。我在`href`链接中写了更新。请帮我。

```
<?php
$username="root";
$password="";
$database="test";

  include"db.inc.php";
  $order = "SELECT * FROM tablename1";
  $result = mysql_query($order);
  while ($row=mysql_fetch_assoc($result)){
   echo ("<tr><td>$row[sno]</td>");
   echo ("<td>$row[name]</td>");
   echo "<td ><a href=\"test.php?id=".$row['sno'] . "\" onclick=\"return confirm('Are you sure you want to edit datas?');\">Edit</a></td>";
   echo "<td><a href=\"insert1.php?id=".$row['sno'] . "\" onclick=\"return confirm('Are you sure you want to delete?');\">Delete</a></td></tr>";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:04:57.113

我以为您是在单页中询问动态插入/更新/删除。

如果是这种情况，您应该使用 ajax 调用。从服务器获取响应后，通过 javascript 将您的表单更改为动态插入/更新/删除

如果你想学习 ajax 从这个开始

[http://www.w3schools.com/ajax/default.ASP](http://www.w3schools.com/ajax/default.ASP)

我想它可能对你有帮助......

# php - 如何替换html表onchange的单列

> ID：14597859
> 
> 赞同：1
> 
> 时间：2013-01-30T06:17:57.260
> 
> 标签：php, javascript, xml, ajax, html-table

我无法找到一种有效的方法来更新 html 表中的列而不重新加载整个表。该表是球员统计数据的列表，所有这些数据都存储在我的 MYSQL 数据库中并加载到表中，除了最后一列。表最后一列的数据来自一个 XML 文件。页面上有一个选择下拉菜单，当用户更改它时，我需要页面对 XML 数据进行一些计算并仅重新加载表的最后一列，而无需进行 AJAX 调用并重新加载整个统计数据表. 目前我重新加载整个表，这很慢。这就是我生成表格的方式：

```
echo '<table name="currentTable" id="battersTable">
                <thead>
                    <tr>
                        <th>&nbsp </th>
                        <th>NAME</th>
                        <th>AGE</th>
                        <th>
                            <select class="posSelect" onchange="posSelect(this.value, this.parentNode.parentNode.parentNode.parentNode)">
                                <option value="ALL">POS: ALL</option>
                                <option value="C">POS: C</option>
                                <option value="1B">POS: 1B</option>
                                <option value="2B">POS: 2B</option>
                                <option value="SS">POS: SS</option>
                                <option value="3B">POS: 3B</option>
                                <option value="MI">POS: MI</option>
                                <option value="CI">POS: CI</option>
                                <option value="OF">POS: OF</option>
                            </select>
                        </th>
                        <th>TEAM</th>
                        <th>AB</th>
                        <th>R</th>
                        <th>HR</th>
                        <th>RBI</th>
                        <th>SB</th>
                        <th>AVG</th>';
                        if($draftType == 0){
                            echo '<th>ADP</th>
                        <th id="chance">CHANCE</th>';
                        }else if($draftType == 1){
                            echo '<th>$</th>';
                        }
                    echo'</tr></thead>
            <tbody id="replacebatters">';

while($row = mysqli_fetch_array($resultbat, MYSQLI_ASSOC))
  {     
    if(array_key_exists($row['NAME'], $crossed)){
        echo "<tr class='drafted' id='" . $row['NAME'] . "'>";
    }else if(array_key_exists($row['NAME'], $rostered)){
        echo "<tr class='roster' id='" . $row['NAME'] . "'>";
    }else if($n&1){
        echo "<tr id='" . $row['NAME'] . "'>";
    }else{
        echo "<tr class='alt' id='" . $row['NAME'] . "'>";
    }

  echo '<th>Draft</td>';
  echo '<td>' . $row['NAME'] . "</td>";
  echo "<td>" . $row['AGE'] . "</td>";
  echo "<td>" . $row['POS'] . "</td>";
  echo "<td>" . $row['TM'] . "</td>";
  echo "<td>" . $row['AB'] . "</td>";
  echo "<td class='runs'>" . $row['R'] . "</td>";
  echo "<td class='hr'>" . $row['HR'] . "</td>";
  echo "<td class='rbi'>" . $row['RBI'] . "</td>";
  echo "<td class='sb'>" . $row['SB'] . "</td>";
  echo "<td class='avg'>" . $row['AVG'] . "</td>";
if ($draftType == 0)
{
    $player = $MDCxml->xpath('//player[@name="' . $row['NAME'] . '"]');
    if (is_array($player) && count($player)) {
        $player = $player[0];
    } else {
        continue; // not found
    }

    $attr = $player->attributes(); 

    $adp = (float) $attr['adp'];
    $early = (int) $attr['early'];      

    $stdev = -0.42+0.42*($adp-$early);

    if($stdev<0)
        $stdev = 1;
    $chance =number_format(((1-NORMDIST($pickNumber,$adp,$stdev,TRUE))*100), 0);

    echo "<td class='adp'>".$adp."</td>";
    echo "<td class='odds'>".$chance."%</td>";
}elseif ($draftType == 1){
    echo "<td class='dollar'>$14</td>";
}     
  echo "</tr>";
  $n = ++$n;
  }
echo "</tbody></table>"; 
```

在更改下面的下拉列表时，我需要使用用户选择的当前轮次更新 $pickNumber（选择的轮次 * 存储的选择号）变量，并使用新计算的 $chance 变量更新 CHANCE 列中的值。这是下拉选择：

```
echo "Current Round: ";
    echo "<select id='round' size='1' onchange='***NOT SURE WHAT TO DO HERE***'>";

    for($q = 1; $q <= $rosterSizeRow['roster_size']; $q++)
    {
        if ($q == $_GET['round'])
        {
            echo "<option value=".$q." selected> ".$q." </option>";
        }else{
            echo "<option value=".$q."> ".$q." </option>";
        }
    }
    echo "</select>"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:49:01.570

您可以查看[`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)参考文档。在同一页面上，[另请参阅](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#See_also)部分有几个关于如何使用 XMLHttpRequest 以及如何进行 AJAX 调用的链接。

首先，您可以查看此未经测试的代码

HTML：

```
<div>
    <label for="round">Round:</label>
    <select id="round" name="round" onchange="ajaxUpdateChance(this)">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3" selected>3</option>
        <option value="4">4</option>
    </select>
</div> 
```

jQuery：

```
function updateChance(data)
{
    var table = $('#battersTable');
    $('.odds', table).each(function(index, element) {
                               $(element).text(data[index] + '%');
                           });
}

function ajaxUpdateChance(el) {
    var round = el.value;
    $.ajax({ url: 'http://www.example.com/update_chance.php',
             data: { round: round },
             dataType: 'json',
             success: updateChance });
} 
```

`ajaxUpdateChance`检索`odds`列的数据。`updateChance`遍历列条目并从数组中`odds`设置新文本。`data`该`data`数组应该是一个 JSON 数组。

# java - 每次单击菜单时切换线性布局（imageview）

> ID：14597873
> 
> 赞同：0
> 
> 时间：2013-01-30T06:19:28.360
> 
> 标签：java, android, listview, layout

我有一个菜单 imageview，当点击它时，我的 linearlayout(line2) 出现，但它应该在下次点击菜单 imageview 时再次消失

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
line1=(LinearLayout) findViewById(R.id.ll1);
         line2=(LinearLayout)findViewById(R.id.ll2);

         menu=(ImageView)findViewById(R.id.menu);

         menu.setOnClickListener(new OnClickListener() {

       public void onClick(View v) {
           menu.setVisibility(View.VISIBLE);
         // TODO Auto-generated method stub
       line1.setVisibility(View.VISIBLE);
       line2.setVisibility(View.VISIBLE);
         }
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:35:31.797

你可以试试 -

```
 //line2.setVisibility(View.VISIBLE);
       if(line2.getVisibility() == View.VISIBLE)
       {
           line2.setVisibility(View.GONE);
       }
       else
       {
           line2.setVisibility(View.VISIBLE);
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:32:12.020

每次按下按钮并切换时，您都可以使用 if/else 语句检查当前状态。如果您不打算将其设置为 GONE，则不一定需要检查可见性是否已消失，以便您可以删除该条件。

GONE 和 INVISIBLE 之间的区别在于布局对消失的反应就好像它甚至不存在一样，元素不再导致任何位移。

更改 line2.setVisibility(View.VISIBLE); 到

```
 if (line2.getVisibility() == View.GONE || line2.getVisibility() == View.INVISIBLE ) {
       line2.setVisibility(View.VISIBLE); } 
   else { 
       line2.setVisibility(View.GONE); // Set it to View.INVISIBLE if thats your goal.
   } 
```

# java - 如何将字符串拆分为每个字符的字符串数组，同时将“减号”符号与后面的整数分组？

> ID：14597876
> 
> 赞同：1
> 
> 时间：2013-01-30T06:19:51.447
> 
> 标签：java, split

这是我所做的：

```
 while (sc.hasNext()) {
        String sLine = sc.nextLine();
        sLine.replaceAll("\\s", "");
        String[] scanned = sLine.split(""); 
```

我的输入将是这样的：

```
IF (2 -2 +) (3 2 *) (-1 4 +) (5 3 *) 
```

这意味着什么是无关紧要的，但扫描仪所做的是首先将其“按原样”存储在字符串中。然后我使用 replaceAll 函数删除所有空格。然后我剩下：

```
IF(2-2+)(32*)(-14+)(53*) 
```

然后，我使用 java 解释此代码并在没有发生错误的情况下执行计算。我现在的问题是，当我将字符串拆分为标记时，它将使每个“减号”标记自己的标记，但我想以某种方式将它与它后面的整数相关联，以便标记仍然只是一个整数（现在为负) 并且没有带有减号的标记。有没有简单的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:24:27.010

您可以使用在前面没有的`negative look-behind`拆分：-`empty string``hyphen`

```
str.split("(?<!-)"); 
```

这不会在`-`and之间的空字符串上拆分`2`，从而使它们保持完整。

```
String str = "IF(2-2+)(32*)(-14+)(53*)";
String[] arr = str.split("(?<!-)");
System.out.println(Arrays.toString(arr)); 
```

**输出： -**

```
[, I, F, (, 2, -2, +, ), (, 3, 2, *, ), (, -1, 4, +, ), (, 5, 3, *, )] 
```

现在你有`-2`and`-1`而不是`-`作为单独的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:28:07.057

好吧，您将字符串按“”分开。我相信你想要做的是使用正则表达式来分割你想要的字符串。如果您不熟悉 Java 正则表达式，请[参阅此](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#sum)内容以熟悉它。我建议低头查看特殊构造（非捕获）部分。

暗示

```
String[] scanned = sLine.split("your regex"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:29:27.570

您为这项工作使用了错误的工具。您需要一个扫描仪和一个单独的解析器。一元减号由解析器处理，而不是扫描仪。看看递归下降表达式解析器、Dijkstra 调车场算法等。

# php - 在 Python 中存储唯一字符

> ID：14597880
> 
> 赞同：1
> 
> 时间：2013-01-30T06:20:04.940
> 
> 标签：php, python, mysql, facebook

在我的网站上使用 Facebook 登录时，新用户的所有喜欢都存储在数据库中。但是，在存储唯一字符（来自其他语言的字符和所有字符）时，并没有被存储，我收到这样的错误：

```
Warning at /facebook/connect/

**Incorrect string value: '\xE2\x99\xA5 Lo...' for column 'name' at row 1**

Request Method:     POST
Request URL:    http://pydev.aviesta.com/facebook/connect/?facebook_login=1
Django Version:     1.4.2
Exception Type:     Warning
Exception Value:    

Incorrect string value: '\xE2\x99\xA5 Lo...' for column 'name' at row 1

Exception Location:     /usr/lib64/python2.6/site-packages/MySQLdb/cursors.py in _warning_check, line 89
Python Executable:  /usr/bin/python
Python Version:     2.6.6
Python Path:    

['/mnt/aviesta/pythondev/mezzanine_aviesta',
 '/usr/lib/python2.6',
 '/usr/lib/python2.6/site-packages/satchless-2011.9.pre-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_mptt-0.5.4-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_sorting-0.1-py2.6.egg',
 '/usr/lib/python2.6/site-packages/python_memcached-1.48-py2.6.egg',
 '/usr/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_treebeard-1.61-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_haystack-2.0.0_beta-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_extra_views-0.2.0-py2.6.egg',
 '/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg',
 '/usr/lib/python2.6/site-packages/PIL-1.1.7-py2.6-linux-x86_64.egg',
 '/mnt/software/django-oscar',
 '/usr/lib/python2.6/site-packages/django_extensions-0.9.1-py2.6.egg',
 '/usr/lib/python2.6/site-packages/pip-1.0-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_facebook-4.0.8-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_socialregistration-0.5.8-py2.6.egg',
 '/usr/lib/python2.6/site-packages/mock-1.0.1-py2.6.egg',
 '/usr/lib64/python26.zip',
 '/usr/lib64/python2.6',
 '/usr/lib64/python2.6/plat-linux2',
 '/usr/lib64/python2.6/lib-tk',
 '/usr/lib64/python2.6/lib-old',
 '/usr/lib64/python2.6/lib-dynload',
 '/usr/lib64/python2.6/site-packages',
 '/usr/lib64/python2.6/site-packages/PIL',
 '/usr/lib/python2.6/site-packages',
 '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
 '/mnt/aviesta/pythondev/mezzanine_aviesta/webdev'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:43:30.897

对于非 ascii 字符，最好使用 utf-8 作为默认字符集。因此，您应该确保您的数据库或表使用 utf-8 编码字符串。如果您使用 Django，它已经默认处理 utf-8 内容。您唯一应该关心的是第三方服务响应的输出，它可能不是以 utf-8 编码的。

# mysql - MySQL my.ini 位置

> ID：14597884
> 
> 赞同：108
> 
> 时间：2013-01-30T06:20:49.630
> 
> 标签：mysql, windows, mysql-5.5

我已经看过 [http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html](http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html)

[如何知道 mysql my.cnf 位置](https://stackoverflow.com/questions/2482234/how-to-know-mysql-my-cnf-location)

和

[http://dev.mysql.com/doc/refman/5.1/en/option-files.html](http://dev.mysql.com/doc/refman/5.1/en/option-files.html)

但我仍然坚持古老的问题！“我的 my.ini 在哪里” 我正在使用带有 mysql 5.5.28 的 windows server 2008。我使用 mysqld --install 安装了该服务，并且可以使用 sqlyog 使用 mysql 服务器。但不幸的是，我无法在其中找到 my.ini`installation directory`或在查询中`c:\`都没有找到，也没有返回任何内容。`c:\windows``data_dir``show variables like "mysql_home"`

有什么建议么？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-12-01T10:46:03.707

**my.ini 在 WINDOWS MYSQL 5.6 MSI 上的位置（使用安装向导）**

打开 Windows 命令外壳并键入：`echo %PROGRAMDATA%`。在 Windows Vista 上，这会导致：`C:\ProgramData`.

根据[http://dev.mysql.com/doc/refman/5.6/en/option-files.html，MySQL](http://dev.mysql.com/doc/refman/5.6/en/option-files.html)将查找的第一个位置是 in `%PROGRAMDATA%\MySQL\MySQL Server 5.6\my.ini`。如果你这样做`ls "%PROGRAMDATA%\MySQL\MySQL Server 5.6\my.ini"`，在你的 Windows shell 中，你会看到文件在那里。

**与您在 Stackoverflow 和网络上发现的大多数建议不同，将文件放入`C:\Program Files\MySQL\MySQL Server 5.6\my.ini`将不起作用。也不会`C:\Program Files (x86)\MySQL\MySQL Server 5.1`。**上面发布的 MySQL 链接上引用的原因：

> 在 Windows 上，MySQL 程序以指定的顺序从以下文件中读取启动选项（首先使用顶部项目）。

5.6 MSI 安装程序**确实在****最高**优先级位置创建了一个 my.ini ，这意味着除了安装程序创建的文件之外，不会找到/使用其他文件。

上面接受的解决方案不适用于基于 5.6 MSI 的安装。

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2015-02-23T22:35:26.580

1.  在开始菜单搜索框中输入“services.msc”。
2.  在 Name 列下找到 MySQL 服务，例如 MySQL56。
3.  右键单击 MySQL 服务，然后选择属性菜单。
4.  在 General 选项卡下查找“Path To Executable”，并找到您的 .ini 文件，例如“C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin\mysqld.exe” --defaults-file= "C:\ProgramData\MySQL\MySQL 服务器 5.6\my.ini" MYSQL56

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-07-03T06:13:07.133

我找到了我的

```
\ProgramData\MySQL\MySQL Server 8.0\ 
```

（这是一个隐藏文件夹）

您可以键入`win+R`并写入`%PROGRAMDATA%`以访问该文件夹，或者仅启用显示隐藏文件夹。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-01-30T06:51:48.053

您必须查看我的文件夹`C:\Program Files\MySQL\MySQL Server 5.5`，但有问题。当您执行 MySQL 的 MSI 安装时，不会创建 my.ini。该文件夹中将有示例 .ini 文件。为了使用其中之一，例如`my-medium.ini`，您需要在 MySQL 重新启动之前执行以下操作：

```
cd C:\Program Files\MySQL\MySQL Server 5.5
copy my-medium.ini my.ini
net stop mysql
net start mysql 
```

一旦，你这样做，`my.ini`可以被阅读`C:\Program Files\MySQL\MySQL Server 5.5\bin\mysql.exe`。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2014-09-02T15:29:49.617

启动 MySQL Workbench，然后 Server -> Options File 并查看窗口底部；它会说“配置文件：C:\ProgramData\MySQL\MySQL Server 5.6\my.ini”

（并注意“ProgramData”和“Program Files”之间的细微差别——如果你正在寻找一个快速的答案，很容易掩盖。）

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-07-03T11:27:26.083

仅回答 MySQL Workbench 用户，

[![在此处输入图像描述](../Images/13736f54bad772a65cea58e895e9b9e7.png)](https://i.stack.imgur.com/p1DLV.png)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-08-28T09:12:01.963

您可以在此位置的 windows 中找到 my.ini 文件 - C:\ProgramData\MySQL\MySQL Server 5.6

ProgramData 文件夹是一个隐藏文件夹，因此请进行相应的设置以查看该文件夹。并以管理员身份打开 my.ini 文件进行编辑然后保存。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-02-06T14:38:13.677

就我而言，`ProgramData`默认情况下该文件夹在 Windows 7 上是隐藏的，因此我无法找到`my.ini`文件。

选择显示隐藏文件和文件夹选项后，我能够`my.ini`在以下位置找到文件：`C:\ProgramData\MySQL\MySQL Server 5.6`.

**在 Windows 7 上显示隐藏文件和文件夹：**

1.  右键单击 Windows 徽标按钮并选择打开 Windows 资源管理器。

2.  单击组织并选择文件夹和搜索选项。

3.  单击查看选项卡，选择显示隐藏的文件和文件夹，然后清除隐藏受保护的系统操作文件的复选框。

4.  在警告上单击是，然后单击确定。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-30T06:28:21.187

它位于 C:\Program Files\MySQL\MySQL Server 5.5 中，有各种 .ini 文件，名称分别为小、中和大。通常使用介质或取决于您的要求。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-05T10:06:02.680

`programData`是隐藏文件夹，因此您必须将选项从设置更改为显示隐藏文件夹，然后在其中更改`my.ini`文件。

请务必更新正确的`my.ini`文件，因为如果您不断更新错误的文件，可能会浪费您大量的时间。

您可以查看服务以查看`my.ini`此服务中配置了哪些内容。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-07-31T20:50:34.253

按 Windows 键 > 键入服务 > 按 Enter > 在列表中查找 mysql > 右键单击​​ > 属性 > 可执行文件的路径将在其下方具有默认文件的位置（my.ini）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-02-11T11:35:45.263

打开你的运行控制台类型：services.msc 查找：mysql 右键单击​​属性，其中写着“可执行文件的路径”，单击并将光标向右移动，直到看到my.ini 的目录，它写着“defaults-file- ”。要在您的探索文件夹中手动访问它，您必须启用隐藏元素的可视化（探索文件夹>顶部菜单>可视化>可视化隐藏元素）

正如这个视频所解释的

[https://www.youtube.com/watch?v=SvCAa2XuQhg](https://www.youtube.com/watch?v=SvCAa2XuQhg)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-22T04:58:37.240

我在执行 MySQL 的 MSI 安装时遇到了同样的问题，当我尝试上述步骤时也没有 my-medium.ini 文件。只有安装 MySQL 的 ZIP 文件对我有帮助。因此，我建议您卸载 MSI 安装文件夹并使用 ZIP 文件重新安装。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-14T10:59:35.403

在 Windows 上，如果 MySQL 作为服务安装，您可以更改服务的 binpath。例如

```
sc config MySQL57 binPath= "\"C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqld.exe\" --defaults-file=\"<myini path>" MySQL57" 
```

binpath 之后的空间很重要。您必须转义双引号

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-10T20:33:25.323

对于 MySql Server 8.0，默认位置是 %WINDIR% 或 C:\Windows。

您需要在那里添加一个“my.ini”文件。

这是我放入 ini 文件的示例。

```
[mysqld]

secure_file_priv="" 
```

确保之后重新启动 MySQL 服务。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-10-03T14:56:58.013

### MySQL 和 MariaDB

根据[MySQL](https://dev.mysql.com/doc/refman/8.0/en/option-files.html)和[MariaDB](https://mariadb.com/kb/en/configuring-mariadb-with-option-files/)的文档，您需要运行 mysql`--help --verbose`以了解 my.ini 文件的位置

转到命令或终端

```
cd yourMySQLBinDirectory
mysqld --verbose --help 
```

您将看到大量输出，但**前几**行将显示服务器查找文件的顺序。我得到了以下回复。您的计算机或服务器会有所不同。

```
Default options are read from the following files in the given order:
C:\WINDOWS\my.ini C:\WINDOWS\my.cnf C:\my.ini C:\my.cnf D:\Databases\mariadb-10.3.30-winx64\my.ini D:\Databases\mariadb-10.3.30-winx64\my.cnf D:\Databases\mariadb-10.3.30-winx64\data\my.ini D:\Databases\mariadb-10.3.30-winx64\data\my.cnf 
```

# android - 为什么 notifyDataSetChanged() 没有更新我的列表

> ID：14597889
> 
> 赞同：1
> 
> 时间：2013-01-30T06:21:10.463
> 
> 标签：android, listview, adapter

我曾多次使用自定义列表视图，但我没有遇到过这个问题。我看到很多相同类型的问题并尝试了他们的解决方案，但是当我调用 notifyDatasetChanged() 方法时，我的列表视图没有更新。

这是我的代码`onCreate()`

```
adapter=new AppointmentAdapter(context, R.layout.appointments_layout,list );
appointments.setAdapter(adapter); 
```

这就是我调用 notifyDatasetChanged 的​​地方。

```
JsonDataCallback callbackservice = new JsonDataCallback(Appointments.this, obj) {
                @Override
                public void receiveData(Object object) {
                    try {
                        adapter.clear();
                        list=new ArrayList<AppontmentBean>();
                        String userappointments = (String) object;
                        if(userappointments!=null && userappointments.trim().length()>10)
                        {
                        JSONObject appointmentsjson = new JSONObject(userappointments);

                        JSONArray appoinmentsArray=appointmentsjson.getJSONArray("EMRTable");
                        for(int i=0;i<appoinmentsArray.length();i++)
                        {
                            JSONObject appointment1=appoinmentsArray.getJSONObject(i);
                            String name=appointment1.getString("PersonLastNameFirstName");
                            String time=appointment1.getString("StartTime").split("T")[1];

                            String strDateFormat = "HH:mm a";
                            String strDateFormat1 = "HH:mm:ss";
                             SimpleDateFormat sdf = new SimpleDateFormat(strDateFormat1);
                             SimpleDateFormat sdf1 = new SimpleDateFormat(strDateFormat);
                            Date d=sdf.parse(time);
                            time=sdf1.format(d);

                            String reason=appointment1.getString("ReasonForVisit");
                            list.add(new AppontmentBean(name, time, reason));
                        }
                        }
                        else{
                            Toast.makeText(context, "No Appointments", Toast.LENGTH_SHORT).show();
                        }
                        adapter.notifyDataSetChanged(); 
```

我已将调试值添加到列表中，但列表适配器没有更新。

但是当我这样使用时，我的列表正在更新

```
adapter=new AppointmentAdapter(context, R.layout.appointments_layout,list );
                    appointments.setAdapter(adapter); 
```

使用它是一个好习惯吗？

编辑：适配器类

```
public class AppointmentAdapter extends ArrayAdapter<AppontmentBean> {
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return countryList.size();
    }

Context context;
    private ArrayList<AppontmentBean> countryList;

    public AppointmentAdapter(Context context, int textViewResourceId, ArrayList<AppontmentBean> countryList) {
        super(context, textViewResourceId, countryList);
        this.countryList = new ArrayList<AppontmentBean>();
        this.countryList.addAll(countryList);
        this.context=context;
    }

    private class ViewHolder {
        TextView time;
        TextView name;
        TextView reason;
    }
@Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

/***
 * customizing the view by overriding getview
 */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;

        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.appointments_layout, null);

            holder = new ViewHolder();
            holder.name=(TextView)convertView.findViewById(R.id.patientName);
            holder.time = (TextView) convertView.findViewById(R.id.time);
            holder.reason = (TextView) convertView.findViewById(R.id.visitreason);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        AppontmentBean appintments = countryList.get(position);

        holder.name.setTypeface(null, Typeface.BOLD);
        holder.name.setTag(appintments);
        holder.name.setText(appintments.getName());
        holder.name.setContentDescription(appintments.getId());
        if(appintments.getReason()!=null && appintments.getReason().length()!=0)
        {
            holder.reason.setText(appintments.getReason());
        }
        else
        {
            holder.reason.setVisibility(TextView.GONE);
        }
        holder.time.setText(appintments.getNumber());
        convertView.setContentDescription(appintments.getId());

        return convertView;
    }
}

class AppontmentBean{

    AppontmentBean(String Id,String name,String number,String reason)
    {
        this.Id=Id;
        this.name=name;
        this.reason=reason;
        this.number=number;
    }
    String name,number,reason,Id;

    /**
     * @return the id
     */
    public String getId() {
        return Id;
    }

    /**
     * @param id the id to set
     */
    public void setId(String id) {
        Id = id;
    }

    /**
     * @return the name
     */
    public String getName() {
        return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * @return the number
     */
    public String getNumber() {
        return number;
    }

    /**
     * @param number the number to set
     */
    public void setNumber(String number) {
        this.number = number;
    }

    /**
     * @return the reason
     */
    public String getReason() {
        return reason;
    }

    /**
     * @param reason the reason to set
     */
    public void setReason(String reason) {
        this.reason = reason;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:07:41.810

答案很简单：每次您通过`list=new ArrayList<AppontmentBean>();`适配器“丢失”对新获取数据的引用创建新列表时，因此您需要做的就是在声明时创建列表对象：

```
private ArrayList<AppontmentBean> list=new ArrayList<AppontmentBean>(); 
```

`receiveData()`并在回调中更改此行：

```
list=new ArrayList<AppontmentBean>(); 
```

到

```
list.clear(); 
```

然后适配器将引用单个对象，并且`adapter.notifyDataSetChanged();`可以工作。

**编辑**：适配器中的问题完全相同 - 通过使用`addAll()`您正在失去对主列表的引用，因此您需要更改这两行：

```
 this.countryList = new ArrayList<AppontmentBean>();
 this.countryList.addAll(countryList); 
```

到

```
 this.countryList = countryList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:47:40.997

只需评论这一行

```
adapter.clear(); 
```

然后再试一次....

# android - 从 Visiblity GONE 设置 Visibility Visible 后未获取 RelativeLayout 的 getHeight()

> ID：14597890
> 
> 赞同：2
> 
> 时间：2013-01-30T06:21:22.530
> 
> 标签：android, android-layout, android-custom-view

我想要的是，当我单击仪表板按钮时，它会像 SlidingDrawer 一样打开，然后再次单击它打开后它会关闭。我使用这个自定义抽屉，因为 SlidingDrawer 已被弃用。

现在的问题是，它工作正常，除了我第一次单击按钮时，它会非常快地打开而没有任何动画，但可以正常关闭，之后工作正常。

我发现问题是当我使 RelativeLayout Visible 并尝试计算它的 getHeight() 时，它最初会给出零，然后给出适当的高度。

这是 LogCat：

![在此处输入图像描述](../Images/40c4df2f75304e15959459f9fbed33b4.png) 这是我的 XML 文件。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relLayOne"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="#0000" >

    <Button
        android:id="@+id/btnNEWCLICK"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:background="@drawable/dashboard" />

    <RelativeLayout
        android:id="@+id/relLayTwo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnNEWCLICK"
        android:background="#000"
        android:visibility="gone" >

        <Button
            android:id="@+id/loc"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="My Location"
            android:textColor="#fff"
            android:textSize="20sp" />

        <View
            android:layout_width="0.1dp"
            android:layout_height="108dp"
            android:layout_centerInParent="true"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="15dp"
            android:background="#fff" />

        <Button
            android:id="@+id/phot"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="Photos"
            android:textColor="#fff"
            android:textSize="20sp" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="0.1dp"
            android:layout_below="@+id/phot"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:background="#fff" />

        <Button
            android:id="@+id/free"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/loc"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="Free stuff"
            android:textColor="#fff"
            android:textSize="20sp" />

        <Button
            android:id="@+id/leade"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/phot"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="Leaderboard"
            android:textColor="#fff"
            android:textSize="20sp" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="0.1dp"
            android:layout_below="@+id/leade"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:background="#fff" />

        <Button
            android:id="@+id/live"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/free"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="Live Action"
            android:textColor="#fff"
            android:textSize="20sp" />

        <Button
            android:id="@+id/home"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/leade"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="Home"
            android:textColor="#fff"
            android:textSize="20sp" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="0.1dp"
            android:layout_below="@+id/home"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:background="#fff" />

        <Button
            android:id="@+id/app"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/live"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:background="#000"
            android:gravity="left|center_vertical"
            android:paddingLeft="5dp"
            android:text="App stats"
            android:textColor="#fff"
            android:textSize="20sp" />
    </RelativeLayout>

</RelativeLayout> 
```

这是代码::

```
public class MoveView extends LinearLayout{
     private Button openCloseButton;
     private boolean isVisible = false;
     private RelativeLayout relLayTwo, relLayOne;
     private float animationHeight = 300.0f;

    public MoveView(Context context , AttributeSet attr) {
        super(context, attr);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.in, this);

        relLayTwo = (RelativeLayout) findViewById(R.id.relLayTwo);
        //relLayOne = (RelativeLayout) findViewById(R.id.relLayOne);
        openCloseButton = (Button) findViewById(R.id.btnNEWCLICK);

        openCloseButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                toggle();
            }
        });

        Log.d("test", "before "+relLayTwo.getHeight());
        if (relLayTwo.getHeight() == 0){
            relLayTwo.setVisibility(View.VISIBLE);
            relLayTwo.invalidate();
            relLayTwo.refreshDrawableState();
            //rel.setVisibility(View.INVISIBLE);
            relLayTwo.setVisibility(View.GONE);
            Log.d("test", "after "+relLayTwo.getHeight());
        }

    }

    public void toggle() {
        TranslateAnimation anim = null;
        isVisible = !isVisible;

        if (isVisible) {
            relLayTwo.setVisibility(View.VISIBLE);
            anim = new TranslateAnimation(0.0f, 0.0f, relLayTwo.getHeight(), 0.0f);
            Log.d("test", " rel Height "+relLayTwo.getHeight());
        } else {
            Log.d("test", " rel Height else "+relLayTwo.getHeight() );
            anim = new TranslateAnimation(0.0f, 0.0f, 0.0f, relLayTwo.getHeight());
            anim.setAnimationListener(collapseListener);
        }

        anim.setDuration(600);
        anim.setInterpolator(new AccelerateInterpolator(1.0f));
        startAnimation(anim);
    }

    Animation.AnimationListener collapseListener = new Animation.AnimationListener() {
        public void onAnimationEnd(Animation animation) {
            relLayTwo.setVisibility(View.GONE);
        }

        public void onAnimationRepeat(Animation animation) {
            // not needed
        }

        public void onAnimationStart(Animation animation) {
            // not needed
        }
    };
} 
```

通过使用 onMeasure() 方法。

```
@
Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        Log.d("test", " RelativeLAyout In onMeaseure "+relLayTwo.getHeight() );

    } 
```

![在此处输入图像描述](../Images/a4ea25da265462a527b9ed91a516d6cb.png)

![在此处输入图像描述](../Images/7db73a7237d1f5f025a5d4890debfe06.png)

![在此处输入图像描述](../Images/fcacad51a5e5d13870e77f803661a01c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:15:12.553

首次创建视图时，在调用 onMeasure() 之前，您无法使用它的宽度和高度。因此，当您第一次尝试获取值时，它们还没有被分配。

由于您使用的是自定义视图，因此解决方案非常简单。只需将获取高度和宽度的代码移动到 onMeasure() 中，然后使用它。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    width = getWidth(); // Get View Width
    height = getHeight();// Get View Height
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:14:25.020

这是我如何解决这个问题的方法。

当我们将布局设置为包装内容时，获取布局高度的实际问题是，它不会给出高度，直到它实际绘制在屏幕上。在我的情况下，首先调用自定义布局，然后调用剩余布局，因此布局没有机会绘制。

所以我所做的是通过使用以下代码获得屏幕运行时的实际高度和宽度。

```
DisplayMetrics metrics = new DisplayMetrics();
        ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getMetrics(metrics);
        height  =   metrics.heightPixels;
        width   =   metrics.widthPixels; 
```

在我得到屏幕高度和宽度之后，膨胀视图。之后获得线性布局高度并使用以下代码为其添加新高度。

```
RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) relLayTwo.getLayoutParams();
    Log.d("test", "height "+params.height);
    params.height = height*40/100;
    relLayTwo.setLayoutParams(params);
    relLayTwo.setVisibility(View.GONE); 
```

它的工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T09:41:51.247

只需使用它来获取可见性消失的`height`和`width`..

```
myView.getMeasuredHeight();
myView.getMeasuredWidth(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T15:35:08.600

```
<RelativeLayout
        android:id="@+id/relLayTwo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnNEWCLICK"
        android:background="#000"
        android:visibility="gone" > //don't put gone in xml 
```

在 OnViewCreated 中查找高度，然后使该视图消失

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
         relLayTwo = (RelativeLayout) findViewById(R.id.relLayTwo);
         mHeight = relLayTwo.getHeight();
         relLayTwo.setVisibility(View.GONE);} 
```

通过这种方式，您将获得高度，因为在 onViewCreated 上已经绘制了视图，并且在您拥有所需的内容之后，使视图消失。

# android - 安卓。在第二个选项卡下可见的第一个选项卡

> ID：14597891
> 
> 赞同：0
> 
> 时间：2013-01-30T06:21:29.113
> 
> 标签：android, android-intent

单击第二个选项卡时，内容会显示在第一个选项卡的内容之上。第一个选项卡内容仍然在下面可见。这是一些示例代码：

MainActivity.java

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Home tab
    Intent intentHome = new Intent().setClass(this, home.class);
    TabSpec tabSpecHome = tabHost
        .newTabSpec("Home")
        .setIndicator("Home", ressources.getDrawable(R.layout.icon_home))
        .setContent(intentHome);

    // Tools tab
    Intent intentTools = new Intent().setClass(this, tools.class);
    TabSpec tabSpecTools = tabHost
        .newTabSpec("Tools")
        .setIndicator("Tools", ressources.getDrawable(R.layout.icon_tools))
        .setContent(intentTools); 
```

工具活动.java

```
public class tools extends Activity {
public static tools self;
private ImageButton imageButton1;
private WebView webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tools);
    addListenerOnButton1();

public void addListenerOnButton1() {

    imageButton1=(ImageButton)findViewById(R.id.imageButton1);
    imageButton1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            setContentView(R.layout.activity_web);
            webView = (WebView) findViewById(R.id.webView1);
            webView.getSettings().setJavaScriptEnabled(true);
            webView.setWebViewClient(new WebViewClient());
            webView.loadUrl("file:///android_asset/www/tools/calculators.html");
            webView.setBackgroundColor(Color.parseColor("#111111"));
        }

    });

} 
```

MainActivity.java 使用activity_main.xml，Tools.java 使用activity_tools.xml，两者布局相同，但内容略有不同。

我试着把 Finish(); 在 MainActivity.java 中的每个 TabSpec 的末尾，但这只是像我怀疑的那样关闭了模拟器中的应用程序。

有没有人可以给我任何指导？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:39:39.127

只需删除此行：

webView.setBackgroundColor(Color.parseColor("#111111"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:34:41.907

尝试这个，

在 Manifest.xml 中，对于活动，使用这个，

机器人：noHistory =“真”

# ruby-on-rails - 按参数过滤的结果

> ID：14597893
> 
> 赞同：0
> 
> 时间：2013-01-30T06:21:37.900
> 
> 标签：ruby-on-rails, model, polymorphism, business-logic

我正在学习 Rails 并试图以正确的方式做到这一点，但我一直在努力寻找解决方案。

我的排名模型中有一个很长的体育排名列表，我试图根据过滤器和应用到它的一般业务逻辑（即日期范围、运动等）来操纵这些排名。

排名模型

```
t.string   "rank"
t.integer  "team_id"
t.integer  "sport_id"
t.integer  "source_id" 
```

团队模型

```
t.string   "team"
t.integer  "sport_id" 
```

运动模型

```
t.string   "sport" 
```

例如，我想做的一件事是找到每个团队多年来的平均排名。我知道这样做的一种方法是类似的`Ranking.average(:rank, :group => 'team_id')`，但这似乎不是很干燥。

我的另一个想法是创建一个数组、散列、json，甚至是一个临时表（可能不是一个好主意），以便让我更轻松地应用计算和操作数据。

再说一次，我还是有点绿，所以我可能会错过一个简单的解决方案，但最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:27:50.593

这似乎是开发人员不应该害怕使用原始 SQL 的情况之一。查询界面很好，但有时您需要全力以赴。

```
SELECT team_id, AVG(rank)
FROM rankings
GROUP BY team_id 
```

像这样使用它：

```
team_ranks = ActiveRecord::Base.connection.execute(sql) 
```

（*免责声明：我对 ActiveRecord 不是很精通。我是一个 mongodb 人。也许有一个内置的方法*）

# ember.js - Ember js pre 4 - 路由器未在链接点击时解析 id

> ID：14597894
> 
> 赞同：0
> 
> 时间：2013-01-30T06:21:38.490
> 
> 标签：ember.js

我有一个帐户列表，然后我有一个查看链接来详细查看帐户，这是帐户路径。当我单击视图链接时，（guid）在通过路由器时不会更新，它只会在 URL 中更新，但它似乎没有传递到代码中。

当我刷新浏览器时，（guid）会被传递到路由器......由于某种原因它没有解决。

我没有使用 ember-data，但将来会使用它。

这是带有“查看”链接的“帐户”模板代码：

```
{{#each accountdata in controller}}
<tr>
<td>{{accountdata.accountnumber}}</td>
<td>{{accountdata.accountname}}</td>
<td>{{accountdata.accounttypestatus}}</td>
<td>{{accountdata.accountuser}}</td>
<td>{{#linkTo account accountdata}}View{{/linkTo}}</td>
</tr>
{{/each}} 
```

accountdata 是带有“accountguid”的上下文，这是我的 id。

这是我的路由器：

```
App.Router.map(function() {
    this.resource("accounts", { path: '/accounts' });
    this.resource("account",  { path: "/accounts/:accountguid" });
});

App.AccountsRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        controller.set('searchfilter','ALL');
        controller.search();
    }
});

App.AccountRoute = Ember.Route.extend({
    setupController: function(controller, model) {        
        controller.show(controller);
    },
    model: function(params) {
        this.controllerFor('account').set('accountguid',params.accountguid);        
    },
    serialize: function(model) {
        return {accountguid: Em.get(model, 'accountguid')}
    }
}); 
```

我的 controller.show 是我发送上下文以调用脚本以显示帐户详细信息的位置。

所以我只需要每次查看正确的accountguid，然后调用show(context) 方法。

谢谢

这是我的旧路由器代码，它可以 100% 工作。当我点击一个链接时，它解决了：accountguid，当我刷新浏览器时，它做了同样的事情。我没有问题，一切正常。

```
//         //Accounts
//         accounts: Ember.Route.extend({
//             route: '/accounts',
//             index: Ember.Route.extend({
//                 route: '/',
//                 connectOutlets: function (router) {
//                     router.get('applicationController').connectOutlet('accounts');
//                     router.get('accountsController').set('searchfilter','ALL');
//                     router.get('accountsController').search();
//                 }
//             }),
//             view: Ember.Route.extend({
//                 route: '/:accountguid',

//                 connectOutlets: function (router, account) {
//                     router.get('applicationController').connectOutlet('account', account);
//                     router.get('accountController').show(account);                    

//                     //router.get('accountController').connectOutlet('eventloghistory','eventloghistory');                    
//                 }
//             })
//         }), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:47:04.197

我设法用以下代码解决了我的问题。我现在可以刷新浏览器，并且可以单击链接，它会将当前使用的 :accountguid 传递给 show() 方法。

```
App.AccountRoute = Ember.Route.extend({
    model: function(params) {
        return {accountguid: params.accountguid};
    },
    setupController: function(controller, model) {        
        controller.show(model);
    },
    serialize: function(model) {
        return {accountguid: Em.get(model, 'accountguid')}
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:27:52.443

将您的路由器映射更改为以下内容，它应该可以工作

```
App.Router.map(function() {
  this.resource("accounts", function(){
    this.resource('account',{path:':account_id'});
  }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:50:22.873

请向我们展示您的 AccountsController 和 AccountController 背后的代码。如果您为整个构造提供一个 jsfiddle，那将是最有用的。

一般来说，你可能不知道新事物的流动。以下是两种情况下发生的情况： 1\. 通过设置 URL（例如 /account/5）导航到 AccountRoute。1.1。AccountRoute 的“模型”钩子被称为

```
model: function(params) {
    return your model here...
} 
```

参数 = { accountguid: 5 }。因为你没有使用 ember-data，你应该实现这个钩子并在那里初始化并返回模型。1.2\. setupController 钩子通过 AccountController 和模型钩子返回的模型调用。没有后面的代码

```
controller.show(controller); 
```

目前还不清楚它的目的是什么，但你可能应该做类似的事情

```
setupController: function(controller, model) {
  this._super(controller, model);
  controller.set('content', model);
  controller.show(model);
} 
```

如您所见，通过不实现模型挂钩，您的 URL 保持正确，但路由不知道如何构建所需的模型资源。

2.  您通过链接转换到路线呼叫

    {{#linkTo account accountdata}}查看{{/linkTo}}

在这里，linkTo 期望 accountdata 是路由的完整帐户模型。这意味着它可能不只携带像 id 这样的部分数据（阅读此内容以获得许可：[在最新的 Ember 中，您如何链接到仅包含模型的 id/名称的路线，而不是在链接页面中提供其所有属性?](https://stackoverflow.com/questions/14367517/in-latest-ember-how-do-you-link-to-a-route-with-just-the-id-name-of-a-model-ra) )。2.1。AccountRoute 的模型钩子**没有**被调用。AccountRoute 模型属性设置为传递给 linkTo 的对象（在我们的例子中为“accountdata”）。2.2\. 使用 AccountController 和 accountdata 对象调用 setupController。如果您的 accountdata 对象不完整，最好在此处创建一个完整的实例并将其设置为控制器。

可以想象，如果你的 accountdata 是 { id: 5, accountname: "John", accounttypestatus: "A", ...}，那么点击linkTo后，URL会正确更新为/account/5，但是帐户模板将接收帐户数据，而不是实际帐户。

PP如果以上都没有任何帮助，这可能是你的问题：[https ://github.com/emberjs/ember.js/issues/1709](https://github.com/emberjs/ember.js/issues/1709)

# jsp - 使用碧玉报告在struts2中获取异常

> ID：14597896
> 
> 赞同：1
> 
> 时间：2013-01-30T06:22:00.293
> 
> 标签：jsp, struts2, jasper-reports

我在 struts2 中创建了一个应用程序，并使用 jasper 进行报告。但是我在浏览器中遇到了一些异常，如下所示。

谁能告诉我如何解决这个问题？

我所做的代码如下：

**报告1.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d4884678-fb84-4dba-a9f5-8d90964cd9b6">
    <style name="Title" forecolor="#FFFFFF" fontName="Times New Roman" fontSize="50" isBold="false" pdfFontName="Times-Bold"/>
    <style name="SubTitle" forecolor="#CCCCCC" fontName="Times New Roman" fontSize="18" isBold="false" pdfFontName="Times-Roman"/>
    <style name="Column header" forecolor="#666666" fontName="Times New Roman" fontSize="14" isBold="true" pdfFontName="Times-Roman"/>
    <style name="Detail" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman"/>
    <style name="Row" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman">
        <conditionalStyle>
            <conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
            <style mode="Opaque" backcolor="#F0EFEF"/>
        </conditionalStyle>
    </style>
    <queryString language="SQL">
        <![CDATA[SELECT
     login.`id` AS login_id,
     login.`name` AS login_name,
     login.`pass` AS login_pass
FROM
     `login` login]]>
    </queryString>
    <field name="login_id" class="java.lang.Integer"/>
    <field name="login_name" class="java.lang.String"/>
    <field name="login_pass" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="102" splitType="Stretch">
            <image>
                <reportElement uuid="dcbcd4a5-4dd4-4bd6-b29b-e5ad87b214c7" x="725" y="0" width="77" height="102"/>
                <imageExpression><![CDATA["cherry.jpg"]]></imageExpression>
            </image>
            <frame>
                <reportElement uuid="f92c03b7-8765-4013-9118-9daa8a9d5718" mode="Opaque" x="0" y="0" width="721" height="66" backcolor="#000000"/>
                <staticText>
                    <reportElement uuid="f17f45bb-09e4-4c23-a40a-8c63b01a3866" style="Title" x="0" y="0" width="370" height="66"/>
                    <box topPadding="4" leftPadding="4" bottomPadding="4" rightPadding="4"/>
                    <textElement verticalAlignment="Bottom">
                        <font isBold="false"/>
                    </textElement>
                    <text><![CDATA[Cherry Title]]></text>
                </staticText>
                <staticText>
                    <reportElement uuid="6f8f92fe-182e-42ff-ab37-154a07540218" style="SubTitle" x="370" y="37" width="316" height="29"/>
                    <textElement textAlignment="Right">
                        <font size="22" isBold="false"/>
                    </textElement>
                    <text><![CDATA[Cherry SubTitle]]></text>
                </staticText>
            </frame>
            <frame>
                <reportElement uuid="75ed2a4a-20d4-4a9b-9ec6-84228e21204d" mode="Opaque" x="0" y="70" width="721" height="32" forecolor="#000000" backcolor="#CC0000"/>
                <textField pattern="EEEEE dd MMMMM yyyy">
                    <reportElement uuid="5664ed89-b46d-4ff6-8d8a-c9bcfe819097" x="553" y="12" width="144" height="20" forecolor="#FFFFFF"/>
                    <textElement textAlignment="Right">
                        <font size="12"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="18" splitType="Stretch">
            <staticText>
                <reportElement uuid="62448e30-8579-4e8d-a460-078762b80f02" style="Column header" x="0" y="0" width="265" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="false"/>
                </textElement>
                <text><![CDATA[login_id]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="5b3d753c-0b30-4735-9fb6-65539c1b35cf" style="Column header" x="265" y="0" width="265" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="false"/>
                </textElement>
                <text><![CDATA[login_name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="220c90dc-095d-4e70-ba22-60cf2488e184" style="Column header" x="530" y="0" width="265" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="false"/>
                </textElement>
                <text><![CDATA[login_pass]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="18" splitType="Stretch">
            <frame>
                <reportElement uuid="8c04906d-c548-420f-a050-46507f5da0dc" style="Row" mode="Opaque" x="0" y="0" width="797" height="18"/>
                <textField isStretchWithOverflow="true">
                    <reportElement uuid="4e69e264-6905-4a70-a6e6-da0b5fd8b7ea" style="Detail" positionType="Float" x="0" y="0" width="265" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{login_id}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement uuid="e96a557f-770b-4eeb-b7b0-485c86952fb7" style="Detail" positionType="Float" x="265" y="0" width="265" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{login_name}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement uuid="246e8199-e7ae-43f6-935a-1695418b7ef0" style="Detail" positionType="Float" x="530" y="0" width="265" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{login_pass}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </detail>
    <columnFooter>
        <band height="7" splitType="Stretch">
            <line>
                <reportElement uuid="3497c8b2-88b1-4d5e-898c-634159a172f5" positionType="FixRelativeToBottom" x="0" y="3" width="555" height="1"/>
                <graphicElement>
                    <pen lineWidth="0.5" lineColor="#999999"/>
                </graphicElement>
            </line>
        </band>
    </columnFooter>
    <pageFooter>
        <band height="25" splitType="Stretch">
            <frame>
                <reportElement uuid="9d9f5a83-dbbd-46b4-b053-c8a0e8387705" mode="Opaque" x="0" y="0" width="802" height="25" forecolor="#D0B48E" backcolor="#000000"/>
                <textField evaluationTime="Report">
                    <reportElement uuid="0360093b-11f7-46ff-92da-34c7459baa7c" style="Column header" x="757" y="3" width="40" height="20" forecolor="#FFFFFF"/>
                    <textElement verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement uuid="e6b56da8-90e0-495d-bacc-d04606b3257a" style="Column header" x="677" y="3" width="80" height="20" forecolor="#FFFFFF"/>
                    <textElement textAlignment="Right" verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
                </textField>
                <textField pattern="EEEEE dd MMMMM yyyy">
                    <reportElement uuid="611e2099-8b7e-455d-a8c8-37a4ae4b3e0e" style="Column header" x="2" y="3" width="197" height="20" forecolor="#FFFFFF"/>
                    <textElement verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**JasperAction.java**（struts2动作类）

```
package action;

import com.lowagie.text.Anchor;
import java.util.ArrayList;
import java.util.List;

import model.Person;
import model.Phone;

import com.opensymphony.xwork2.ActionSupport;

public class JasperAction extends ActionSupport {

    private static final long serialVersionUID = 1L;

    public String execute() throws Exception {
        return SUCCESS;  
    }

public static ArrayList<Person> getBeanCollection() {
        ArrayList as=new ArrayList();
                as.add("val");
        return as;
    }

} 
```

**struts.xml**

```
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

 <package name="default" extends="jasperreports-default,struts-default">

    <action name="myJasperTest" class="action.JasperAction">

    <result name="success" type="jasper">
            <param name="location">/jasper/report1.jasper</param>
            <param name="dataSource">beanCollection</param>
            <param name="format">PDF</param>
        </result>

        <result name="error" type="jasper">/Error.jsp</result>

    </action>

</package>

</struts> 
```

**索引.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Struts2Jasper</title>
</head>
<body>
    <h4>Header</h4>     
    <ul>
      <li><a href="<s:url action='myJasperTest'/>">Click</a></li>   
    </ul> 
</body>
</html> 
```

**浏览器中显示的异常**

**类型** `Exception report`

**信息**

**描述** `The server encountered an internal error () that prevented it from fulfilling this request.`

**例外**

```
javax.servlet.ServletException: java.lang.NullPointerException
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:515)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)

root cause

java.lang.NullPointerException
    net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:89)
    net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:601)
    org.apache.struts2.views.jasperreports.JasperReportsResult.doExecute(JasperReportsResult.java:240)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:178)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:348)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.22 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:10:02.503

异常的根本原因说：

```
java.lang.NullPointerException

net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:89) 
```

探索[JRFiller](http://www.jarvana.com/jarvana/view/net/sf/jasperreports/jasperreports/4.0.1/jasperreports-4.0.1-javadoc.jar!/net/sf/jasperreports/engine/fill/JRFiller.html) 4.0.1 API。它需要参数 Map。

在此行中唯一可能导致 a`NullPointerException`的情况是填充符为空的情况。此时不检查参数是否为空。

所以，检查你的数据源 `<param name="dataSource">beanCollection</param>`

附带说明一下，您没有提到您使用的是哪个 JasperReports 版本。总是提到 API 版本。这是一个很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:26:31.680

您的

```
<param name="dataSource">beanCollection</param> 
```

**不可能**是对的。

你应该返回一个`ArrayList`of `Person`s，但是你在声明和实例化它时没有指定`type`and...你正在向`String`它添加一个，而不是一个`Person`!!

```
public static ArrayList<Person> getBeanCollection() {
    ArrayList as=new ArrayList();
            as.add("val"); // <- what ?!
    return as;
} 
```

将其更改为：

```
public static ArrayList<Person> getBeanCollection() {        
    Person person = new Person();
    person.setName("val"); //setName, or set something...

    ArrayList<Person> as=new ArrayList()<Person>;
    as.add(person);
    return as;
} 
```

# java - jep jar 试用版中允许的解析调用数

> ID：14597897
> 
> 赞同：0
> 
> 时间：2013-01-30T06:22:01.647
> 
> 标签：java

我正在使用 jep 来评估表达式，但得到以下异常

```
15:01:00,819 ERROR [stderr] (http--0.0.0.0-8443-3) com.singularsys.jep.ParseException: Trial version limitation: Number of parse calls exceeded

15:01:00,819 ERROR [stderr] (http--0.0.0.0-8443-3)  at com.singularsys.jep.Jep.parse(Unknown Source)

15:01:00,819 ERROR [stderr] (http--0.0.0.0-8443-3)  at com.singularsys.jep.Jep.parse(Unknown Source) 
```

从上面很明显，解析调用的数量超过了允许的限制。现在我有 28 个表达式。有没有人知道jep在试用版中允许的最大解析调用数是多少。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:25:18.043

来自[Jep](http://www.singularsys.com/jep/download-trial.php)的主页：

```
The trial releases parse up to 50 expressions, after which an exception is thrown. 
```

# iphone - Chartboost 隐藏状态栏

> ID：14597898
> 
> 赞同：0
> 
> 时间：2013-01-30T06:22:06.750
> 
> 标签：iphone, ipad, chartboost

我已经集成了 Chartboost 的更多应用程序，但是我在应用程序中设置了状态栏，我不想删除它。所以更多应用程序的标题被状态栏覆盖，有什么方法可以使它正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:40:09.257

您的目标是哪个 iOS 版本？

*   如果您的目标是 iOS 5：

我不知道您的应用程序的架构，但根据您的描述，您的游戏“容器视图”的 autoresizingMask 和/或 autoresizesSubviews 属性可能设置不正确。

*   如果您仅针对 iOS 6：

如果您已经在使用“自动布局”功能，请查看以下[指南](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)。

无论哪种方式，请查看有关自动调整大小等[的 iOS 视图编程指南。](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:20:12.653

确保您使用的是最新版本的 Chartboost SDK。该错误已在 SDK 3.1 版中修复，您可以在此处获取 v3.1.1：[https ://help.chartboost.com/downloads/ios](https://help.chartboost.com/downloads/ios)

如果您需要任何其他帮助，请随时在此处查看完全集成的示例项目：[https ://github.com/ChartBoost/client-examples](https://github.com/ChartBoost/client-examples)

# ios - 调出 UIPickerview 而不是键盘输入 iOS

> ID：14597902
> 
> 赞同：15
> 
> 时间：2013-01-30T06:22:11.973
> 
> 标签：ios, ios5, uipickerview, uikeyboard, uiactionsheet

基本上我想让用户点击文本字段，它会显示一个填充的选择器视图而不是键盘。我假设这也需要一个带有完成按钮的工具栏。我目前将该字段设置为输出和操作，仅此而已。我还有一个代码中的操作表，用于当用户提交某些内容时，如果这对可能为此使用操作表有任何影响。

我尝试研究这个主题，但 99% 的主题是日期选择器而不是选择器视图（或非常旧的代码）。

这是它的外观图像以供参考。 ![](../Images/79f9ccb8bf4ecc4ea162ab3ca2643127.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-30T20:46:29.957

`UITextField`现在有`inputView`房产了。在这里，您可以为其分配您想要的显示，包括 UIPickerView。你必须设置pickerview，并且必须在你的.h中实现`UITextFieldDelegate`和：`UIPickerViewDataSource`

```
@interface ViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> 
```

然后创建选择器视图并将其分配给文本字段。

```
UIPickerView *pickerView = [[UIPickerView alloc] init];
pickerView.dataSource = self;
pickerView.delegate = self;
// ... ...
self.pickerTextField.inputView = pickerView; 
```

因为你实现了 UIPickerView 接口，你现在必须实现这些方法：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component; 
```

然后你应该很高兴。如果您需要更多信息，请查看文档以了解其他一些方法。

# javascript - 为什么我收到此错误？: 属性 'data-role' 不是元素 'li' 的有效属性

> ID：14597903
> 
> 赞同：-1
> 
> 时间：2013-01-30T06:22:20.360
> 
> 标签：javascript, jquery, html, asp.net-3.5

希望你们都做得很好。

我正在 Visual Studio 2008 中开发会议室预订系统。

在这个我试图使用 Metro UI Drop down

我添加了 Css 和 Javascript 文件

但是由于以下错误，我在 JS 中遇到错误

![在此处输入图像描述](../Images/b8ca45e3e5318095da040adce0763092.png)

提前致谢

![在此处输入图像描述](../Images/ef7ba7fcea2859ab78e4c00dc8851b2b.png)

我在 JS 中遇到这个错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:25:16.373

这些`data-*`属性是在 HTML5 中引入的。看起来您正在 XHTML1.0 过渡模式下运行 Visual Studio 2008。VS2008 不提供对 HTML5 的验证支持，看起来 VS2008 比 HTML5 的第一个工作草案早了大约 4 个月。

这不是错误，而是警告；但是它是完全良性的，可以安全地忽略。

VS 的验证文件是可扩展的（它们是 *.xsd 文件），但是他们没有预料到像`data-foo=""`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:23:38.390

JS 错误指出`$ === null`这与 HTML 无关，并且将 null 作为参数传递`function($)`给此错误的最可能原因是在页面中包含 jQuery 之前包含了您显示图片的脚本

# java - IntelliJ Shortcut 强制 Maven 重新导入

> ID：14597905
> 
> 赞同：7
> 
> 时间：2013-01-30T06:22:31.183
> 
> 标签：java, maven, intellij-idea

IntelliJ IDEA 是否有强制 maven 项目重新导入（重新加载依赖项）的捷径。我碰巧正在处理两个相关的项目，并且我在一天中多次执行该操作。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:58:02.447

您可以在 IDE 设置中定义自己的键映射。去做吧 ：

*   菜单*文件*>*设置*
*   在*IDE Settings*下，选择*Keymap*
*   将树展开到*插件*> *Maven 集成*
*   您通常会看到“重新导入所有 Maven 项目”
*   右键单击此项目并选择键或鼠标快捷方式。

（我在 Windows 下使用 IDEA EAP 12 做到了这一点）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T06:45:12.970

我查看了 keymap reference( `Help->Dafault Keymap Reference`) 并没有找到任何与 maven 相关的东西。但是当我在我的`pom.xml`IDEA 中进行一些更改时，会显示对话框，它提供导入所有依赖项。

您可以在`File->Settings->Maven->Import`或使用组合中找到其他 maven 设置，`Shift+CTRL+A`并在输入字段中写入 maven。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-05T21:51:01.750

使用较新版本的 Intellij 和 macos，点击 shift-shift，然后键入“reload maven”以进入“Reload All Maven Projects”操作。这将刷新依赖项 - 无需重新导入。

# oracle-adf - 如何清除或清空 adf 中的输入框

> ID：14597908
> 
> 赞同：0
> 
> 时间：2013-01-30T06:22:42.503
> 
> 标签：oracle-adf, jdeveloper

我想在单击按钮时清除/清空输入框。我正在使用：

```
propInp.setValue(""); 
```

其中 propInp 是输入框的绑定名称。

我的输入框如下：

```
<af:inputText label="UPC :" id="it2"
                                  binding="#{w9manageBean.propInp}"
                                  autoSubmit="true"
                                  showRequired="true"
                                  disabled="true" partialTriggers="::s1:cb1"
                                  required="true"/> 
```

但这不起作用......任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:53:46.443

您需要为该 inputText 定义 value 属性并将该支持 bean 属性设置为空字符串。

`<af:inputText label="UPC :" id="it2"
binding="#{w9manageBean.propInp}"
autoSubmit="true"
showRequired="true"
disabled="true" partialTriggers="::s1:cb1"
required="true"
value="#{w9manageBean.myInput}"/>`

将变量 myInput 添加到托管 bean 并为其添加 setter 和 getter。然后，您可以通过编程方式为该变量设置所需的任何值，它将显示在 UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:53:05.030

我可以谷歌并得到一些不同的答案。也许这篇文章会有所帮助？ [http://biemond.blogspot.com/2009/02/reset-clear-adf-page.html](http://biemond.blogspot.com/2009/02/reset-clear-adf-page.html)

# android - 如何在android中以编程方式更改应用小部件中的图像

> ID：14597911
> 
> 赞同：5
> 
> 时间：2013-01-30T06:23:21.273
> 
> 标签：android, android-widget, remoteview

我设计了一个 android 应用程序小部件，其中两个`ImageView`我想`ImageView`在单击图像时更改图像以及调用方法。现在我`RemoteView` 这样使用

```
RemoteViews views1 = new RemoteViews(context.getPackageName(),
                R.layout.activity_main);
        views1.setOnClickPendingIntent(R.id.smsImageView, pendIntent1);
        appWidgetManager.updateAppWidget(appWidgetIds, views1); 
```

但我不知道如何更改`imageView` 谢谢中的图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T07:11:38.803

**小部件布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/imageview1_image1"/>

    <ImageView
        android:id="@+id/imageview2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dp"
        android:src="@drawable/imageview2_image1" />

</LinearLayout> 
```

**在您的 AppWidgetProvider 中：**

```
public class SwitchWidget extends AppWidgetProvider {
public static String SWITCH_WIDGET_UPDATE = "MainActivity.Switch";
public static String IMAGEVIEW1 = "imageview1";
public static String IMAGEVIEW2 = "imageview2";

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    updateSwitch1(context, appWidgetManager, appWidgetIds[0]);
}

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onReceive(context, intent);
    Log.d("SWitch Widget", "On Receive");

    RemoteViews remoteViews;

    AppWidgetManager appWidgetManager = AppWidgetManager
            .getInstance(context);

    if (SWITCH_WIDGET_UPDATE.equals(intent.getAction())) {
        Log.d("SWitch Widget", "Widget Choose");
        ComponentName thisAppWidget = new ComponentName(
                context.getPackageName(), getClass().getName());

        int ids[] = appWidgetManager.getAppWidgetIds(thisAppWidget);
        for (int appWidgetID : ids) {

                updateSwitch1(context, appWidgetManager, appWidgetID);
            } 

        }

    }
    if (intent.getAction().equals(IMAGEVIEW1)) {

            remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget1);
            if(flag){
            flag = flase           
                remoteViews.setImageViewResource(R.id.imageview1,
                        R.drawable.imageview1_image2);
                 startService(new Intent(this, YOUR_SERVICE_CLASS_NAME.class)); 
            } else {
            flag = true;
                remoteViews.setImageViewResource(R.id.imageview1,
                        R.drawable.imageview1_image1);
                startService(new Intent(this, YOUR_SERVICE_CLASS_NAME.class));
            }
            appWidgetManager.updateAppWidget(new ComponentName(context,
                    SwitchWidget.class), remoteViews);

        }
        else if (intent.getAction().equals(IMAGEVIEW2)) {

            remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget1);
            if(flag){
         flag = flase          
                remoteViews.setImageViewResource(R.id.imageview2,
                        R.drawable.imageview2_image2);
            } else {
        flag = true;
                remoteViews.setImageViewResource(R.id.imageview2,
                        R.drawable.imageview2_image1);
            }
            appWidgetManager.updateAppWidget(new ComponentName(context,
                    SwitchWidget.class), remoteViews);

      }

private void updateSwitch1(Context context,
        AppWidgetManager appWidgetManager, int appWidgetId) {
    // TODO Auto-generated method stub
    Log.d("SWitch Widget", "Switch1");
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.widget1);

    Intent imageview1Intent= new Intent(context, SwitchWidget.class);
    wifiIntent.putExtra("ID", appWidgetId);
    wifiIntent.setAction(IMAGEVIEW1);
    PendingIntent imageview1PendingIntent = PendingIntent.getBroadcast(context,
            0, imageview1Intent,0);
    remoteViews.setOnClickPendingIntent(R.id.imageview1, imageview1PendingIntent);

    Intent imageview2Intent= new Intent(context, SwitchWidget.class);
    wifiIntent.putExtra("ID", appWidgetId);
    wifiIntent.setAction(IMAGEVIEW2);
    PendingIntent imageview2PendingIntent = PendingIntent.getBroadcast(context,
            0, imageview2Intent,0);
    remoteViews.setOnClickPendingIntent(R.id.imageview2, imageview2PendingIntent);

    appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    }

  } 
```

**并且还在您的小部件接收器中添加这两个操作：**

```
 <action android:name="imageview1" />
  <action android:name="imageview2" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:40:08.907

只需调用函数为其设置图像资源。

```
view1.setImageViewResources(R.id.img, IMGS[1]) 
```

然后你明白了

# php - 如何从 Zend 框架工作 2 会话中检索值？

> ID：14597917
> 
> 赞同：0
> 
> 时间：2013-01-30T06:23:58.960
> 
> 标签：php, zend-framework2

我刚刚在 ZF2 的 Session 上得到了转储

```
Zend\Session\Storage\SessionStorage Object
(
[isImmutable:protected] => 
[storage:ArrayObject:private] => Array
    (
        [__ZF] => Array
            (
                [_REQUEST_ACCESS_TIME] => 1359526796.5079
                [FlashMessenger] => Array
                    (
                        [EXPIRE_HOPS] => Array
                            (
                                [hops] => 1
                                [ts] => 1359526775.9345
                            )

                    )

            )

        [FlashMessenger] => ArrayObject Object
            (
                [storage:ArrayObject:private] => Array
                    (
                        [default] => Zend\Stdlib\SplQueue Object
                            (
                                [flags:SplDoublyLinkedList:private] => 4
                                [dllist:SplDoublyLinkedList:private] => Array
                                    (
                                        [0] => Authentication successful.
                                    )

                            )

                    )

            )

        [zf_tutorial] => ArrayObject Object
            (
                [storage:ArrayObject:private] => Array
                    (
                        [storage] => hello
                    )

            )

        [zftutorial] => ArrayObject Object
            (
                [storage:ArrayObject:private] => Array
                    (
                        [role] => user
                    )

            )

    )
) 
```

我只是不知道如何找回

> [角色] => 用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:40:43.390

[从这里](https://stackoverflow.com/questions/8990195/how-to-use-zend-session-in-zf2)提取

zf2 会话使用的一些示例：

会话创建：

```
use Zend\Session\Container;

$session = new Container('zftutorial'); 
```

检查会话中是否存在密钥：

```
$session->offsetExists('role') 
```

按键从会话中获取价值：

```
$role= $session->offsetGet('role'); 
```

会话中的设置值：

```
$session->offsetSet('role', $role); 
```

# html - 嵌入字体文件的冲突

> ID：14597919
> 
> 赞同：0
> 
> 时间：2013-01-30T06:24:08.480
> 
> 标签：html, fonts, font-face, font-size, webfonts

假设我在我网站上的任何系统上也嵌入了 Arial 、 Georgia 和其他常用字体文件的字体文件`@font-face`......这会导致字体文件冲突和随后的 FOUT 问题吗？还是浏览器`@font-face`仅在客户端系统中未收到字体系列时才加载该系列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:25:18.890

如果您使用`@font-face`包含声明的规则`font-family: Arial`，那么您将隐藏`Arial`用户系统中安装的字体。CSS3 字体，[第 4.2](http://www.w3.org/TR/css3-fonts/#font-family-desc)节说：“如果字体系列名称与给定用户环境中可用的字体系列相同，它有效地隐藏了使用样式表的文档的底层字体。这允许网络作者自由选择字体系列名称，而不必担心与给定用户环境中存在的字体系列名称发生冲突。”</p>

这不取决于您嵌入的实际字体，仅取决于您在`@font-face`. （顺便说一句，嵌入真正的 Arial 可能会构成侵犯版权。）

# html - 如何创建自己的 OWN Like 按钮？（与脸书无关）

> ID：14597922
> 
> 赞同：4
> 
> 时间：2013-01-30T06:24:29.103
> 
> 标签：html, button, social-media-like

我看了SO，在这里，还有其他一些地方……毫无头绪。

遍布网站的 Facebook“赞”按钮的结构是什么？

它是一种社交书签、浏览器按钮吗？

是否有一步一步的过程（不使用 FB Api）来制作我自己的按钮。

如何设计和实现一个赞按钮？

我想要我自己的按钮，其功能与 FB 类似，但不相关或在他们的平台上开发！我正在尝试在 iWeb'09 中将其作为 html 小部件输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-30T21:39:52.773

我已经成功地做到了。我是这样做的：

您**在数据库中有一个名为“likes”的表，其中**包含**字段用户名、postid**（如果需要，还有日期、id）

每篇文章/博客/文章都应该有自己的 ID。

当有人喜欢一篇文章/博客/文章时，您获取文章/博客/文章**的 id**和喜欢它**的用户名，****并检查喜欢的数据库以查看它是否已经存在。**如果它已经存在，则删除类似内容。如果它不存在，你添加一个like。

例如，使用 AJAX，我就是这样做的：

我有一篇 id 为 6 的博文。

乔纳森喜欢这篇文章。

这 2 个变量通过 post 表单发送并等待响应，**如果**响应为 1（或 true )，然后我从原来的任何值更新喜欢按钮的 div 编号并添加 1。如果响应为 0（或 false），那么我在喜欢计数器中取原始值并删除 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:52:08.723

要回答您的问题，请考虑按钮会发生什么，然后进入类似按钮。

1.  按下按钮会触发客户端上的事件，该事件可能会或可能不会在某处更新服务器以通知已按下按钮以实现这样或那样的意图。您可以通过此活动发送很多额外信息，例如何时何地谁以及为什么等
2.  喜欢按钮通常有关于谁喜欢它以及他们喜欢什么的额外信息。为了做到这一点，您可能会要求人们登录或提供某种输入来识别他们。

举一个你可以使用任何服务器端技术在 javascript 中实现的类似按钮的真实示例

1.  安装您的脚本的任何人都将能够看到该按钮。您可以使用任何 css 形成它，或者您的 javascript 可以简单地从您的服务器加载 iFrame 或将元素附加到 DOM 以显示此按钮
2.  单击时，它会使用人员信息或至少调用它的页面 url 调用您的服务器。例如，谷歌分析使用与域 url 关联的唯一 ID 来跟踪访问者。
3.  当您收到此电话时，您可以更新您的数据库/存储或任何带有勾选标记的任何内容，该按钮已被按下 abc 网站上的按钮，因此让我们更新他们的喜欢或不喜欢。
4.  如果您希望您的 javascript 也可以在更新服务器之前或之后增加同一页面上的数字。
5.  当其他人访问该站点时，脚本再次加载并向您的服务器发送请求，以便您可以更新页面上的计数，但这次用户没有单击喜欢/不喜欢按钮，因此您不会更新记录。
6.  然后，您可以将其显示为饼图，以显示用户对其网站或页面的总访问量，并区分喜欢它的人和未报告的人（未按下按钮）

如果您仍然想知道如何创建按钮。使用[CSS 按钮生成器获得一个](http://www.cssbuttongenerator.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-30T21:22:01.193

您必须首先拥有一个可以存储各种值的数据库。现在，每当用户单击按钮时，存储在数据库中的按钮的值必须递增。为此，您需要一种将您连接到 SQL 数据库的后端语言。因此，每当按钮单击时，数据库中的点赞值就会发生变化。

# sql - 存储过程导致语法错误

> ID：14597931
> 
> 赞同：0
> 
> 时间：2013-01-30T06:25:02.943
> 
> 标签：sql, sql-server-2005, stored-procedures

我写了这个存储过程：

```
CREATE PROCEDURE [dbo].[spGetCuisines]
    @RestaurantID INT ,
    @CuisineID NVARCHAR(200)
AS 
BEGIN
    SET NOCOUNT ON;
    DECLARE @sql NVARCHAR(MAX)

    SET @sql = 'SELECT  CuisineID, CuisineName
    FROM    dbo.Cuisine1
    WHERE   CuisineID IN (
            SELECT  dbo.Dishes1.CuisineID
            FROM    dbo.Dishes1
            WHERE   DishID IN ( SELECT  DishID
                                FROM    dbo.RestaurantDish
                                WHERE   RestaurantID = '
        + CAST(@RestaurantID AS NVARCHAR(MAX)) + ' ) )'                                    
    IF @CuisineID <> ''
        BEGIN
            SET @sql += 'AND Cuisine1.CuisineID IN('
                + CAST(@CuisineID AS NVARCHAR(MAX)) +')'
        END
    EXECUTE sp_executesql @sql; 
END 
```

我正在使用 3 个表，其列如下：

**菜品1**

```
 DishID
   DishName
   CuisineID
   Price 
```

**美食1**

```
 CuisineID
   CuisineName
   Type
   DateCreated
   DateModified
   DateDeleted 
```

**餐厅Dish**

```
RestaurantDishID
RestaurantID
DishID 
```

但是我的存储过程在这一行给了我语法错误：

```
 SET @sql += 'AND Cuisine1.CuisineID IN('+ CAST(@CuisineID AS NVARCHAR(MAX)) +')' 
```

它说：

> *“+”附近的语法不正确*

有人可以指导我吗？SQL Server 版本是否与此有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:31:38.313

您使用的语法仅在 SQL Server 2008 及更高版本上有效。在 SQL Server 2005 上，您必须更改：

```
SET @sql += ... 
```

到：

```
SET @sql = @sql + ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:32:38.193

这里绝对没有必要使用动态 SQL - 所以不要！另外：比子查询更喜欢**JOIN** - 连接通常更快，而且坦率地说 - 代码**更容易**阅读！

只需使用：

```
CREATE PROCEDURE [dbo].[spGetCuisines]
    @RestaurantID INT ,
    @CuisineID NVARCHAR(200)
AS 
BEGIN
    SET NOCOUNT ON;
    DECLARE @sql NVARCHAR(MAX)

    SELECT  
        c.CuisineID, c.CuisineName
    FROM    
        dbo.Cuisine1 c
    INNER JOIN
        dbo.Dishes1 d ON d.CuisineID = c.CuisineID
    INNER JOIN
        dbo.Restaurant1 r ON r.DishID = d.DishID
    WHERE  
        r.RestaurantID = @RestaurantID
        AND (@CuisineID = '' OR c.CuisineID = @CuisineID)
END 
```

当然，Aaron Bertrand 是绝对正确的——这只有在你传入单个`CuisineID`字符串时才有效。

如果您的`@CuisineID`参数包含多个值，那么您需要这样的东西：

```
 WHERE  
        r.RestaurantID = @RestaurantID
        AND (@CuisineID = '' OR c.CuisineID IN dbo.Split(@CuisineID)) 
```

使用函数`Split`，您可以将逗号分隔的 ID 列表拆分为表变量，并使用`IN`运算符匹配可能值的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:32:40.880

您是否可能传入逗号分隔的字符串？如果是这样，有更好的方法来处理这个问题，请参见此处：

[http://codebetter.com/raymondlewallen/2005/10/26/quick-t-sql-to-parse-a-delimited-string/](http://codebetter.com/raymondlewallen/2005/10/26/quick-t-sql-to-parse-a-delimited-string/)

# php - 从 iPhone 将图像上传到 PHP

> ID：14597936
> 
> 赞同：1
> 
> 时间：2013-01-30T06:25:21.117
> 
> 标签：php, iphone, ios, objective-c

我正在将图像从 iPhone 上传到 PHP，但在 PHP 中图像不可见。图像以字节为单位保存。

```
 -(void)uploadMyImage:(UIImage *)img
    {
        NSData *data = UIImageJPEGRepresentation(img, 90);
        NSMutableString *urlString = [[NSMutableString alloc] init];
        [Base64 initialize];
        [urlString appendFormat:@"image=%@",[Base64 encode:data]];
          NSString *baseurl = @"http://projectleads.info/spirits/images/imageupload1.php"  ;
        NSData *postData = [urlString dataUsingEncoding:NSUTF8StringEncoding];
        NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
        NSURL *url = [NSURL URLWithString:baseurl];
        NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
        [urlRequest setHTTPMethod: @"POST"];
        [urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [urlRequest setValue:@"application/x-www-form-urlencoded"
          forHTTPHeaderField:@"Content-Type"];
        [urlRequest setHTTPBody:postData];
        NSURLConnection *connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self];
        [connection start];
        } 
```

```
 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
    {
        resData=[[NSMutableData alloc]init];
    }
    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
    {
        [resData appendData:data];
    }
    - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        NSString* newStr = [[NSString alloc] initWithData:resData
                                                 encoding:NSUTF8StringEncoding];
    } 
```

我的php代码是

```
<?php
    $base=$_REQUEST['image'];
     if(empty($base))
    {
        echo 'No data';
    }
    else
    {
    echo $base;
    $binary=base64_decode($base);
    header('Content-Type: bitmap; charset=utf-8');
        // print($binary);
    //$theFile = base64_decode($image_data);
    $dbser='localhost';  
    $dbuser='spirit';
    $dbpwd='123456';
    $dbname='spirit';
       $db= mysql_connect($dbser,$dbuser,$dbpwd);
     $dbcon=mysql_select_db($dbname);
     function generate_chars()
    {
        $num_chars = 4; //max length of random chars
        $i = 0;
        $my_keys = "123456789abcdefghijklmnopqrstuvwxyz"; //keys to be chosen from
        $keys_length = strlen($my_keys);
        $url  = "";
        while($i<$num_chars)
        {
            $rand_num = mt_rand(1, $keys_length-1);
            $url .= $my_keys[$rand_num];
            $i++;
        }
        return $url;
    }

     function isUnique($chars)
    {
        //check the uniqueness of the chars
        global $link;
        $q = "SELECT * FROM `url` WHERE `randname`='".$chars."'";
        $r = mysql_query($q, $link);
        //echo mysql_num_rows($r); die();
        if( mysql_num_rows($r)>0 ): 
            return false;
        else: 
            return true;
        endif;
    }

     $chars = generate_chars();
     while( !isUnique($chars) )
     {
            $chars = generate_chars();
     }
    $query=mysql_query("insert into url (randname) values ('".$chars."')");
    $test=$chars.".jpg";
    $file = fopen($test, 'wb');
    fwrite($file, $binary);
    fclose($file);
    echo 'success';
    echo '<img src=test.jpg>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:30:35.210

对于 iPhone：

在此处查看[如何在 PHP 服务器上上传图像](https://stackoverflow.com/questions/14394647/uploading-image-to-server-with-asiformdatarequest/14395038#14395038)

还有这个[上传图片](https://stackoverflow.com/questions/4680503/uploading-images-to-server-using-asihttprequest-in-iphone)

对于使用 Base64 编码将 UIImage 转换为字符串，请使用[Base64 编码方法](http://iphonesdksnippets.com/post/2010/03/14/Convert-image-tofrom-text-%28Base64%29.aspx)

我希望这会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T21:24:32.737

您的 PHP 代码很好，问题出在 base 64 编码中。我已使用您的代码成功上传了一张图片，请执行以下操作以正确编码数据。

将此方法复制并粘贴到您的代码中（取自[Creating a base-64 string from NSData](https://stackoverflow.com/questions/6006823/creating-a-base-64-string-from-nsdata)）

```
- (NSString*)base64forData:(NSData*) theData {
    const uint8_t* input = (const uint8_t*)[theData bytes];
    NSInteger length = [theData length];

    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
    uint8_t* output = (uint8_t*)data.mutableBytes;

    NSInteger i;
    for (i=0; i < length; i += 3) {
        NSInteger value = 0;
        NSInteger j;
        for (j = i; j < (i + 3); j++) {
            value <<= 8;

            if (j < length) {
                value |= (0xFF & input[j]);
            }
        }

        NSInteger theIndex = (i / 3) * 4;
        output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
        output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
        output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
        output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
} 
```

现在要获取编码的字符串

```
NSString *encodedString = [[self base64forData:data] stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]; 
```

附加编码字符串如下

```
[urlString appendFormat:@"image=%@", encodedString]; 
```

# python - 在 django 中向管理员显示多个选项

> ID：14597937
> 
> 赞同：2
> 
> 时间：2013-01-30T06:25:22.567
> 
> 标签：python, django, django-models, django-forms, django-admin

我想向管理员显示多个选项，以便他一次可以从这些选项中选择多个选项。我可以使用复选框字段来做到这一点。我已经尝试过了，但它没有显示复选框，而是显示了下拉选项列表。

这是我的代码。

**模型.py**

```
class segmentation_Rules(models.Model):
        Segmentation_Rules_CHOICES = (
                        (1, 'At least one order'),
                        (2, 'Have reward points'),
                        )
        Rules       =models.CharField(max_length=100, blank=True,verbose_name="Select rules for customer segmentation",choices=Segmentation_Rules_CHOICES) 
```

**表格.py**

```
class Segmentation_Form(ModelForm):
        Rules = forms.MultipleChoiceField( widget=forms.CheckboxSelectMultiple) 
```

**管理员.py**

```
class MyAdmin(admin.ModelAdmin):
    form = Segmentation_Form 
```

所以请告诉我一些方法，以便管理员可以从选项中选择多个字段。

**编辑：**

如果我从模型中删除选择并将它们定义为表单，那么只有一个文本字段显示给管理员，没有选择。

```
Segmentation_Rules_CHOICES = (
            (1, 'At least one order'),
            (2, 'Have reward points'),
            )

class Segmentation_Form(ModelForm):
        Rules = forms.MultipleChoiceField(choices=Segmentation_Rules_CHOICES, widget=forms.CheckboxSelectMultiple())

        class Meta:
            model=segmentation_Rules 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:01:57.243

您需要从**models.py**`choices`中的模型字段定义中删除参数，并将字段添加到**forms.py**中的表单字段。像这样：**`choices``Rules`**

 ******模型.py**

```
class segmentation_Rules(models.Model):
    Segmentation_Rules_CHOICES = (
        (1, 'At least one order'),
        (2, 'Have reward points'),
    )
    Rules = models.CharField(max_length=100, blank=True, verbose_name="Select rules for customer segmentation") 
```

**表格.py**

```
class Segmentation_Form(ModelForm):
    Rules = forms.MultipleChoiceField(widget=forms.CheckboxSelectMultiple(), choices=models.segmentation_Rules.Segmentation_Rules_CHOICES) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:36:41.040

是的，你可以这么做。您需要使用带有[CheckboxSelectMultiple小部件的](http://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.CheckboxSelectMultiple)[MultipleChoiceField](http://docs.djangoproject.com/en/dev/ref/forms/fields/#multiplechoicefield)字段来执行此操作。我认为您做得对，但也许您忘记了小部件？`()`

```
class Segmentation_Form(forms.Form):
    Rules = forms.MultipleChoiceField(choices= Segmentation_Rules_CHOICES, widget=forms.CheckboxSelectMultiple())

    def clean_Rules(self):
        if len(self.cleaned_data['Rules']) > 3:
            raise forms.ValidationError('Select no more than 3.')
        return self.cleaned_data['Rules'] 
```

我已经抛出了一个验证方法。您可以在其中限制所选选项的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:50:22.150

我正在使用它并且它工作正常

```
Rules = forms.MultipleChoiceField(choices=mychoices, widget=forms.CheckboxSelectMultiple) 
```

我认为您不需要`()`发送`CheckboxSelectMultiple`****

# java - 如何从 dhtmlxscheduler 将事件数据保存到 xml 文件中

> ID：14597939
> 
> 赞同：0
> 
> 时间：2013-01-30T06:25:44.557
> 
> 标签：java, javascript, ajax

我需要将事件数据保存到 xml 文件中。我需要使用 java 代码执行此操作。我使用的是 html5。因此，我需要从 javascript 调用此 java 代码并需要将事件文本、日期和其他详细信息保存到 xml 文件中。每当需要数据时，它应该显示在 dhtmlx 调度程序中。我该怎么做？

```
function init() {

    scheduler.config.xml_date="%Y-%m-%d %H:%i";

    scheduler.config.prevent_cache = true;

    scheduler.init('scheduler_here',new Date(2010,0,20),"month");

    scheduler.load("data/data.xml");

}

function show() {

    alert(scheduler.toXML());

}

function save() {

    var form = document.forms[0];

    form.action = "./data/xml_writer.php";

    form.elements.data.value = scheduler.toXML();

    form.submit();

}

function download() {

    var form = document.forms[0];

    form.action = "./data/xml_download.php";

    form.elements.data.value = scheduler.toXML();

    form.submit();

} 
```

**xml_writer.php**

```
 <?php

 file_put_contents("./data.xml",$_POST["data"]);

 header("Location:./dummy.html");

 ?>

<?php

if(empty($_POST['data'])) {

echo "why";

exit; 
```

}

**xml_download**

```
 $filename = "data.xml";

 header("Cache-Control: ");

 header("Content-type: text/plain");

 header('Content-Disposition: attachment; filename="'.$filename.'"');

 echo $_POST['data'];

 ?> 
```

**html代码**

```
<form action="./php/xml_writer.php" method="post" target="hidden_frame" accept-charset="utf-8">

    <input type="hidden" name="data" value="" id="data">

</form>

<iframe src='about:blank' frameborder="0" style="width:0px; height:0px;" id="hidden_frame" name="hidden_frame"></iframe>

<div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100%;'>

    <div class="dhx_cal_navline">

        <div class="dhx_cal_prev_button">&nbsp;</div>

        <div class="dhx_cal_next_button">&nbsp;</div>

        <div class="dhx_cal_today_button"></div>

        <div class="dhx_cal_date"></div>

        <input type="button" name="download" value="Download" onclick="download()" style="right:500px;" />

        <input type="button" name="show" value="Show" onclick="show()" style="right:400px;" />

        <input type="button" name="save" value="Save" onclick="save()" style="right:300px;" />

        <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>

        <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>

        <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>

    </div>

    <div class="dhx_cal_header">

    </div>

    <div class="dhx_cal_data">

    </div> 
```

我有这么多代码。但是用于保存到 xml 文件的代码在 php 中。我需要 java 代码而不是 php。

# ruby-on-rails - 预编译后我还能添加对 CSS 的更改吗？

> ID：14597953
> 
> 赞同：1
> 
> 时间：2013-01-30T06:27:30.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3

一旦我完成了`bundle exec rake assets:precompile RAILS_ENV=production`

似乎它创建了类似`application-e24jrjf834jg93bwuk13uy5gfd1y24f.css` Then 当我访问该页面时，它是从我的应用程序调用的。

在开发模式下，我可以将更改添加到 css 文件并应用它。
在生产模式下，我还可以对 css 做些小改动吗？如果可能，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:37:08.317

如果你在你的**production.rb**`config.assets.initialize_on_precompile`文件中设置了，那么你需要做的就是重启你的服务器。否则，只需通过再次运行和预编译资产来删除预编译资产。`true`**`bundle exec rake assets:clean``bundle exec rake assets:precompile RAILS_ENV=production`**

# android - android中复选框的复选标记图像的间距

> ID：14597966
> 
> 赞同：5
> 
> 时间：2013-01-30T06:28:30.603
> 
> 标签：android, checkbox, padding

嗨，我正在尝试创建一个复选框列表，该列表应如下图所示，在复选标记图像之前和之后都有空间。

![在此处输入图像描述](../Images/199846c2ba8bcf4a797b08c08f60fc68.png)

但是当我尝试创建复选框时，它的显示如下图所示。

![在此处输入图像描述](../Images/9276f648db3c4dc0aa9eee61c326f656.png)

没有空格来检查标记图像，就像我显示第一张图像一样。如果我使用填充来复选框组件，例如**“android：padding = 50dp”**，它会在复选标记图像和文本之间留出空间。但在 Check-Mark 图像之前没有在起始 .ie 中留出空间。下面是我的复选框的 xml 布局

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="15dp">
<CheckBox android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:button="@drawable/btn_check_square"
       android:background="@drawable/filter_item_background"
       android:textColor="@android:color/black"
       android:padding="5dp"
       android:text="check box text"/>
</LinearLayout> 
```

任何解决此问题的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-31T06:54:29.047

这可以通过以下代码解决。

```
<CheckBox
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/filter_item_background"
android:button="@android:color/transparent"                             //Make button null
android:drawableLeft="@drawable/btn_check_square"  //Create button in drawable
android:drawablePadding="20dp"                     //Set space between Text & CB     
android:padding="5dp"
android:text="check box text"
android:textColor="@android:color/black" /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-30T07:20:40.610

试试这个（没有自定义图形）：

```
<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawableLeft="@android:color/transparent"
    android:drawablePadding="8dp"
    android:text="CheckBox" /> 
```

它使用了一个小技巧：由于 Checkbox 是从 Button 派生的，我们可以添加一个可绘制对象，现在可以在标签和可绘制对象之间设置一个填充。由于我们实际上不需要真正的图标，因此我们使用透明颜色代替。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T07:25:02.423

```
<CheckBox
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/filter_item_background"
    android:button="@null"                             //Make button null
    android:drawableLeft="@drawable/btn_check_square"  //Create button in drawable
    android:drawablePadding="20dp"                     //Set space between Text & CB     
    android:padding="5dp"
    android:text="check box text"
    android:textColor="@android:color/black" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T06:37:55.930

使用下面的代码

```
final float scale = this.getResources().getDisplayMetrics().density;
checkbox.setPadding(checkbox.getPaddingLeft()
        + (int) (10.0f * scale + 0.5f),
        checkbox.getPaddingTop(),
        checkbox.getPaddingRight(),
        checkbox.getPaddingBottom()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T06:42:30.390

将此添加到您的复选框：

```
android:layout_marginLeft="5dp"
android:layout_marginRight="5dp" 
```

# ios6 - 使用 cocos2d 拼图 - iOS

> ID：14597967
> 
> 赞同：1
> 
> 时间：2013-01-30T06:28:31.467
> 
> 标签：ios6, cocos2d-iphone, xcode4.5

我是 iOS 游戏开发的新手，我刚刚完成了一个教程，如何通过获取图像并在触摸事件上移动图块来制作拼图。这么好的和清晰易懂的教程:)，干得好。

[这是教程](http://www.iphonegametutorials.com/2010/09/23/cocos2d-game-tutorial-building-a-slide-image-game/)

现在我需要一些帮助、指南、教程或在 iOS 上使用 cocos2d 的 Jigsaw Puzzle 示例代码。请问你们能帮帮我吗？

在此先感谢您的合作将不胜感激:)

# jquery - Jquery窗口加载无法通过ajax工作

> ID：14597971
> 
> 赞同：0
> 
> 时间：2013-01-30T06:28:53.260
> 
> 标签：jquery

我正在通过 ajax 更新结果。

```
$.ajax({
  url:"b.html",
  success:function(data){
   $('#result').html(data);
  }
}); 
```

在我的 b.html

```
<div>
.
.
.
</div>
<script type="text/javavascript">
  $(window).load(alert('a'));
</script> 
```

我没有收到任何警报弹出框。我需要在整个页面加载后运行这个 javascript。请帮我摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:34:13.307

```
<div>

</div>
<script type="text/javavascript">

  $(document).ready(function(){

    $.ajax({
      url:"b.html",
      success:function(data){
       $('#result').html(data);
       alert('a')
      }
    });

    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:45:30.460

尽管您在 load 方法中缺少该功能：

```
$(window).load(function(){
     alert('a')
}); 
```

但这不会触发警报，因为您使用的是 ajax 并且页面没有被加载，只有 div。

因此，您可以像这样尝试成功功能：

```
success:function(data){
   $('#result').html(data, function(){ alert('This alerts') });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T06:34:46.107

在 b.html 试试这个

```
$('document').ready(function () {
   alert('a');
}); 
```

# mysql - MySQL：使用 if else 的 select 语句中的子查询

> ID：14597973
> 
> 赞同：0
> 
> 时间：2013-01-30T06:29:27.487
> 
> 标签：mysql, sql

我想显示成员列表及其状态（uid、uname、uAddress、状态）。我想检查 T1 表中的 uid 存在于 T2 表中的位置，即（T1.uid = T2.uid 和 tl_u_id='3'）如果存在，则状态将为是，否则为否。（tl_u_id 列值应该在查询中硬编码）

```
 Table T1 (Primary key: uid)                  Table T2 (primary_key: Aid)

        --------------------      ---------------------------
        uid   uname  uAddress      uid  Aid  tl_u_id  ename
        --------------------      ---------------------------
         1      aa     ch           2    1    3        TG
         2      bb     LA           4    2    3        IS
         3      cc     NY           2    3    4        DS
         4      dd     DC
        --------------------      --------------------------

Result for tl_u_id=3
-------------------------
uid uname uAddress status
-------------------------
1    aa      ch      No
2    bb      LA      Yes
3    cc      NY      No
4    dd      DC      yes 
```

请给我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:45:12.760

有几种方法可以获取结果集。

如果要返回一小组行，使用相关子查询会很快。

```
SELECT u.uid
     , u.uname
     , u.uAddress
     , IFNULL(
         (SELECT 'Yes'
            FROM T2 s 
           WHERE s.uid = t.uid
             AND s.tl_u_id = '3'
           LIMIT 1
         )
       ),'No') AS status
  FROM T1 u 
```

但这不一定是获取结果集的最佳方式，除了小集合（由于 MySQL 处理该子查询的方式，对于外部查询中的每一行），这对于大集合来说可能是昂贵的。

另一种方式，如果您要返回 T1 中的所有行或大部分行，并且`uid`T2 中没有很多与 T1 中的 uid 值不匹配的值，则效率会更高：

```
SELECT u.uid
     , u.uname
     , u.uAddress
     , IF(s.uid IS NOT NULL,'Yes','No') AS status
  FROM T1 u
  LEFT
  JOIN (SELECT r.uid
          FROM T2 r
         WHERE r.tl_u_id = '3'
         GROUP BY r.uid
       ) s
    ON s.uid = u.uid 
```

如果您有一个唯一的保证`T2(uid,tl_u_id)`，或者至少对于给定的 uid 不会有任何重复`tl_u_id='3'`，那么您可以通过消除内联视图来获得更好的性能。

为了获得最佳性能，您可能需要一个索引 ... `ON T2 (tl_u_id, uid)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:34:54.980

这是一个简单的方法。如果记录来自表 2，则选择第一个表并加入第二个表，显示是，否则状态为否。

```
SELECT
    T1.uid,
    T1.uname,
    T1.uAddress
    IF(T2.uid IS NULL ,'No','Yes') as `Status`
FROM    T1
LEFT JOIN T2 ON T1.uid = T2.uid 
AND T2.tl_u_id='3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T06:41:35.880

```
SELECT  a.*,
        CASE 
            WHEN b.uid  IS NULL 
            THEN 'NO' 
            ELSE 'YES' 
        END Status
FROM    tableT1 a
        LEFT JOIN
        (
            SELECT  DISTINCT uid, tl_u_id  -- <<== filter duplicates
            FROM    tableT2
        ) b ON  a.uid = b.uid AND
                b.tl_u_id = 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/22b74/1)

# c++ - Http post - 发送大数据 vc++ 时连接重置

> ID：14597976
> 
> 赞同：1
> 
> 时间：2013-01-30T06:29:33.870
> 
> 标签：c++, http, visual-c++, mfc, connection

我的代码需要使用 vc++ 将 xml 数据发布到服务器，我使用 CInternetSession 进行发布，使用 tinyxml 进行 xml。

如果我的 xml 数据约为 8 kb，则数据发布得非常好。但如果 xml 文件大小约为 15 kb，那么我会收到“与服务器的连接已重置”。

```
TiXmlDocument doc( "C:\\test.xml" );
bool loadOkay = doc.LoadFile();

if ( loadOkay )
{
    TiXmlPrinter printer;
    printer.SetIndent("\t");
    docs.Accept( &printer );

    docs.Print();
    CString zURLstest = printer.CStr();

    #define MAX_READ_BUFFER 102400

    CInternetSession* p_CInternetSession;
    CHttpFile* p_HttpFile;
    CStdioFile* p_File;
    char z_ResponseBuff [MAX_READ_BUFFER];
    ULONG ul_ReadLen;
    CFile cFResponce;

    p_CInternetSession = new CInternetSession(NULL,1,PRE_CONFIG_INTERNET_ACCESS,NULL,NULL,0);
    p_CInternetSession->SetOption(INTERNET_OPTION_CONNECT_TIMEOUT,10000);
    p_CInternetSession->SetOption(INTERNET_OPTION_CONNECT_RETRIES, 3);

    CString zURL = "http://xxx.xxx.xxx.x/Test/TestServlet?Data=";
    CString zDWURL(zURL + zURLstest);

    p_File =  p_CInternetSession->OpenURL(zDWURL, 1, INTERNET_FLAG_TRANSFER_BINARY|INTERNET_FLAG_DONT_CACHE);           

    AfxMessageBox(zDWURL);

    p_HttpFile = (CHttpFile*)p_File;
    ul_ReadLen = p_HttpFile->Read (z_ResponseBuff, MAX_READ_BUFFER);

    DWORD dwError;
    p_HttpFile->QueryInfoStatusCode(dwError);

    if(dwError==200)
    {
        AfxMessageBox("Data updated successfully");

        remove(c:\\test.xml");
    }
} 
```

解决此问题的任何想法或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:49:16.357

这不是一个 POST，它是一个 GET 请求，所有数据都嵌入到 URL 中。由于各种原因，大多数服务器都会对 URL 长度进行限制。如果您超过此限制，服务器的响应将立即断开您的连接，因为您认为您正在尝试 DDOS 或缓冲区溢出漏洞利用。

查看[CInternetSession::OpenURL](http://msdn.microsoft.com/en-US/library/d25ew7sy%28v=vs.80%29.aspx)和[CHttpFile](http://msdn.microsoft.com/en-US/library/tzhfwc94%28v=vs.80%29.aspx)的文档，很明显您不能`OpenURL`用于此。它无法让您指定（如文档所称）用于您的 HTTP 请求的动词。

您将不得不想办法改用[HttpOpenRequest](http://msdn.microsoft.com/en-us/library/aa384233%28v=vs.85%29.aspx)函数。这看起来要复杂得多，因为您必须自己将 URL 选择到其组成部分中。也许该库有一些不错的 URL 解析功能，您可以使用它来执行此操作。

我必须说这是一个设计非常糟糕的库。

# java - 为 JSP/Servlet 应用程序实现 CRUD 服务 - 读取操作的问题

> ID：14597977
> 
> 赞同：0
> 
> 时间：2013-01-30T06:29:39.080
> 
> 标签：java, jsp, servlets, crud

我目前正在开发一个包含 JSP、servlet 和一些 CRUD 数据库服务的网站。我被困在 CRUD 的**读取**部分，因为我无法获得所需的效果。

我已连接到数据库，并且能够毫无问题地从网站插入数据。我现在要做的是在数据库中的一行上的 JSP 调用中有一个选择/选项框，并在下一页上翻译该行的相应列。但是，我无法从选项框中显示多于一行。代码如下所示。

豆类：

```
public class ReadBean {
    protected String title;
    protected String author;
    protected String text;

    public String getTitle() {
        return title;
    }

    public void setTitle(String newTitle) {
        title = newTitle;
    }

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String newAuthor) {
        author = newAuthor;
    }

    public String getText() {
        return text;
    }

    public void setText(String newText) {
        text = newText;
    }
} 
```

控制器：

```
@WebServlet(urlPatterns = { "/com/defaultValidate/ReadController" })
public class ReadController extends HttpServlet {

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        ReadBean reader = new ReadBean();
        String address;

        if (request.getParameter("ReadConfirm") != null) {
            try {
                Connection connect = ConnectionManager.getConnection();
                String SQL = "SELECT * FROM prayers ORDER BY prayerTitle DESC";
                PreparedStatement ps = connect.prepareStatement(SQL);

                ResultSet rs = ps.executeQuery();
                while (rs.next()) {
                    request.getSession().setAttribute("ref", reader);
                    reader.setTitle(rs.getString("prayerTitle"));
                }
            } catch (Exception e) {
            }
            address = "ReadConfirm.jsp";
        } else if (request.getParameter("ReadView") != null) {
            address = "ReadView.jsp";
        } else {
            address = null;
        }

        RequestDispatcher dispatcher = request.getRequestDispatcher(address);
        dispatcher.forward(request, response);
    }
} 
```

然后是控制器响应的对应jsp页面：

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<%@include file="MenuHeader.jsp"%>
</div>
    <div id="mainBorder"> </div>
        <div id="mainBody">
            <table id="mainTable">
                <tr>
                    <td id="sidebar">
                        <h2>Options</h2>  
                            <ul>

            </ul>
        </td>
        <td id="mainContent">
                        <h2 id="contentHeader">Select a prayer</h2>

                        <form action="ReadController">
                            <table border="1" width="1" cellspacing="5" cellpadding="5">
                                <thead>
                                    <tr>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><select name="prayer_id">

                                                <c:forEach var="ReadController"       items="${ref.title}">
                                                    <option value="">${ref.title}</option>
                                                </c:forEach>

                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="submit" name="ReadView" value="View">  </td>
                                    </tr>
                                </tbody>
                            </table>

                        </form>
    <td id="imageBar">

            </td>   
        </table>
    <%@ include file="../menuHeaderAndFooter/MenuFooter.jsp" %> 
```

我绝对不是专家，但我认为我在从控制器到 JSP 中的 for-each 元素之间的连接之间遗漏了一些东西，我只是坚持。如果好奇，本节的 WEB-XML 部分是可操作的，ConnectionManager 是一个简单的调用来建立与数据库的连接。Glassfish 包是使用的服务器。

如果您对代码的任何其他部分有任何疑问，请告诉我，因为我非常有兴趣尽快完成并高效地完成这个特定项目并运行。我很乐意提供所需的任何其他编码和参考。

在这个特定地点的任何帮助都非常感谢并且非常有帮助。感谢您查看此内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:43:37.660

问题出在这部分代码

```
while(rs.next()){
   request.getSession().setAttribute("ref", reader);
   reader.setTitle(rs.getString("prayerTitle"));
} 
```

每次读取新值然后将该“ref”放入会话中时，您都会覆盖“ref”属性。因此，您在会话中放置了一个值，因此您得到了一行。

因此，请将所有这些值放在一个集合中，例如一个列表，然后将该列表设置在会话中：

```
List<ReadBean> myList = new Arraylist<ReadBean>();
while(rs.next()){
   ReadBean reader = new ReadBean();   
   reader.setTitle(rs.getString("prayerTitle"));
   myList.add(reader);
}
request.getSession().setAttribute("ref", myList); 
```

现在您可以`for each`将 jsp 内部用作：

```
<c:forEach var="myReader" items="${ref}">
       <option value="">${myReader.title}</option>
</c:forEach> 
```

请注意我在`for-each`上面的循环中所做的更改。

首先在`items`属性中你需要一个集合，所以我们`ref`在会话中设置了一个名为的集合，这样我们就可以使用它了。

现在在`var`属性中，我们定义一个局部变量 whihc 类似于

`for(Reader myReader : ref)`//myReader会进去，`var`list `ref`(collection)也会进去`items`

现在您可以使用类似的`myReader`var访问属性或`for-each``${myReader.title}``${myReader['title']}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:34:31.920

修改你的代码

```
List<ReadBean> readerList = new Arraylist<ReadBean>();

while(rs.next()){
// blah blah
reader.setTitle(rs.getString("prayerTitle"));
readerList.add(reader); // add this reader instance to list
}
// after while loop
request.getSession().setAttribute("ref", readerList); 
```

如有必要，相应地修改您的 JSP 以迭代 readerList，我认为它应该在没有 jsp 修改的情况下工作。

# java - 如何在java中忽略文本中的连续空格和制表符。

> ID：14597980
> 
> 赞同：1
> 
> 时间：2013-01-30T06:29:49.527
> 
> 标签：java, regex

在提取到数组中时，我无法从文本文件中删除多个空格和制表符。

这是我所做的：

```
arrayofpara = bufdocument.split("[\\r\\n]+\\s"); 
```

让我知道上面的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:36:34.823

你到底想做什么？

现在您拆分一系列“换行符”字符，后跟一个空白字符。我猜你想删除所有以下（和前面的？）空白字符。然后你需要给空白字符添加一个量词：

尝试

```
 arrayofpara = bufdocument.split("\\s*[\\r\\n]+\\s*"); 
```

这也会在换行符上拆分，这些换行符后面没有空格字符，因为`\\s*`将匹配 0 个或多个空格。

# actionscript-3 - 无法点击 flashplayer 对话框

> ID：14597982
> 
> 赞同：2
> 
> 时间：2013-01-30T06:30:00.500
> 
> 标签：actionscript-3, flash

有时flashplayer 的对话摄像头和麦克风允许拒绝不能按。这是flashplayer 的错误或swf 大小还是其他什么？

操作系统：MAC OSX 10.8.2 firefox：18.0.1 flashplayer：11,5,31,137

这个论坛同样的问题，但flashplayer版本不同。 [https://bugs.adobe.com/jira/browse/FP-4656](https://bugs.adobe.com/jira/browse/FP-4656)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:23:42.720

可能是在闪存安全弹出窗口是 html 容器的情况。使用浏览器开发工具对其进行测试。

# websocket - Python 微框架（Bottle、Flask）和 socket.io

> ID：14597983
> 
> 赞同：0
> 
> 时间：2013-01-30T06:30:12.683
> 
> 标签：websocket, socket.io, flask, bottle

我正在尝试使用类似于我正在使用 python 的功能构建一个应用程序（将使用 gunicorn 部署在 heroku 上）

到目前为止，我的搜索将我带到了 Bottle。替代我当前的微框架 - Flask。Bottle 允许使用 websocket 功能。[http://bottlepy.org/docs/stable/async.html](http://bottlepy.org/docs/stable/async.html)

我的问题是：我可以使用 socket.io 的 javascript 部分（或类似的东西）连接到 Bottle 吗？如果是，如何？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:31:32.587

如果您真的想开始，请查看此处的示例：

*   [https://github.com/abourget/gevent-socketio/tree/master/examples](https://github.com/abourget/gevent-socketio/tree/master/examples)

这里还有一个瓶子的例子：

*   [https://github.com/reinbach/gevent-socketio-example/blob/master/app.py](https://github.com/reinbach/gevent-socketio-example/blob/master/app.py)

您可能希望从以下地址的文档开始：

*   [https://gevent-socketio.readthedocs.org/en/latest/](https://gevent-socketio.readthedocs.org/en/latest/)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T17:42:29.463

您还可以查看[flask-socket.io](https://github.com/miguelgrinberg/Flask-SocketIO)，它可以与您当前的框架 - Flask 一起使用。除了包装较低级别的功能（gevent/SocketIO）之外，它还添加了一些更高级别的功能，例如房间，以便您可以将用户分组在一起。

在以前的项目中为我提供了很好的服务。

# iphone - Appcelerator 上的 iPhone 模拟器

> ID：14597986
> 
> 赞同：0
> 
> 时间：2013-01-30T06:30:36.660
> 
> 标签：iphone, appcelerator, appcelerator-mobile

我正在尝试在 Titanium iPhone Simulator 上部署示例 KitchenSink 应用程序。我安装了 XCODE 4.2。Titanium Appcelerator 3.0 已安装。我收到错误消息 `[ERROR] Invalid --ios-version value '5.0' Accepted values:`

配置`iOS configuration details. iOS SDK is installed correctly!`正确。

**编辑 1**

iOS 版本 4.3。钛 SDK 3.0.1。 `tiapp.xml`包含`<min-ios-ver>4.3</min-ios-ver>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:05:41.897

降级 Appcelerator 已经解决了这个问题。

# extjs - extjs：从 json 创建配置块不会配置例如选项卡标题

> ID：14597991
> 
> 赞同：0
> 
> 时间：2013-01-30T06:30:57.737
> 
> 标签：extjs

摘自 json 文件...

```
{
"items": [
    {
        "xtype": "tabbarcontext",
        "ptype": "tabbarcontext",
        "pstype": "maintab",
        "activeTab": 0,
        //"title": "NotTitleConfig",
        "config": [
            {"title": "TitleConfig"}
        ],
        "items": [
            {
                "xtype": "panel",
                "ptype": "tab",
                "layout": {
                    "type": "border"
                }, 
```

当这个 json 被戳到视口中时......

```
 Ext.apply(me, {
        // we are adding TabBar with 4 tabs to Viewport
        items:  appItems // json retrieved from store 
```

选项卡面板已创建，activeTab = 0，但 config: 尚未设置标题。在 json 文件中注释代码 "title": "NotTitleConfig" 确实设置了选项卡标题。为什么是这样？蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:35:17.463

配置应该是 JavaScript 对象而不是 JSON 字符串。以下应该工作

```
Ext.apply(me, { items: Ext.JSON.decode(appItems) }); 
```

# ruby-on-rails-3 - 如何通过rails中的令牌让未经授权的访问一页上的表单？

> ID：14597994
> 
> 赞同：1
> 
> 时间：2013-01-30T06:31:13.490
> 
> 标签：ruby-on-rails-3, token

我正在 Rails 中构建一个联系人管理应用程序，我需要添加一个类似这样的功能。每个具有电子邮件地址的联系人都可以通过电子邮件发送一个指向在线特殊表格的链接，联系人可以在其中管理自己的详细信息，所以基本上如果我以管理员身份登录，我可以在链接处编辑联系人 ID 12

```
contacts/12/edit 
```

我希望联系人能够点击一个链接——类似于上面的链接，除了可能有一个秘密令牌，即

```
contacts/12/edit?auth_token=some-really-jumbled-hash 
```

因此，联系人可以单击链接并更改详细信息，而无需登录应用程序。是否有这样做的宝石，因为我不确定如何在这里设置令牌部分？

有任何想法吗？