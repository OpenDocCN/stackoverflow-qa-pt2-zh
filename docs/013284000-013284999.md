# StackOverflow 问答 13284000-13284999

# java - 格式化整数以在指定位置插入字符

> ID：13284000
> 
> 赞同：0
> 
> 时间：2012-11-08T06:54:34.123
> 
> 标签：java, string, string-formatting

我想以这样的方式格式化一个整数，如果不是。位数超过 3 位，如果没有，则应在右数第 4 位插入逗号。位数超过 6 位，应在右侧第 4 和第 7 位插入逗号，即

123 应该变成 123
1234 应该变成 1,234
12345 应该变成 12,345
123456 应该变成 123,456
1234567 应该变成 1,234,567

我在 SO 和互联网上发现了类似的问题，但没有一个能帮助我解决这个问题。

我知道这会导致，`String.format(format,arguments)`但我无法指定第一个参数，即`format`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:56:57.220

您可以使用[**DecimalFormat**](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)以这种方式格式化整数：-

```
int num = 1234567;
NumberFormat formatter = new DecimalFormat("#,###");
System.out.println("The value is: " + formatter.format(num)); 
```

**输出**： -

```
The value is: 1,234,567 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T06:58:18.377

用于`DecimalFormat`格式化输入字符串

```
DecimalFormat format = new DecimalFormat("#,###");
        int d = 1234;
        System.out.println(format.format(d)); 
```

# ios - 在 ios 5 中使用 json 解析图像时应用程序变慢

> ID：13284002
> 
> 赞同：0
> 
> 时间：2012-11-08T06:54:36.710
> 
> 标签：ios, json

我是 ios 开发的新手。当我在 ios 5 中使用 json 解析器解析图像时，我的应用程序变慢了。请有人帮忙解决这个问题。

```
-(NSDictionary *)Getdata
{
    NSString  *urlString = [NSString stringWithFormat:@"url link"];
    urlString = [urlString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData* data = [NSData dataWithContentsOfURL:url];
    NSError* error;
    NSDictionary* json;
    if (data) {
        json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        NSLog(@"json...%@",json);
    }

    if (error) {
        NSLog(@"error is %@", [error localizedDescription]);

        // Handle Error and return
        //    return;
    }

    return json;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:33:36.200

这条线可能是罪魁祸首。

```
NSData* data = [NSData dataWithContentsOfURL:url]; 
```

如果您在主线程上调用它（并且因为您根本没有提到线程，我怀疑您是这样），它将阻塞所有内容并等待服务器响应。

这对用户来说是一个非常糟糕的体验:)

您需要在后台线程上完成所有这些操作，并在完成后通知主线程。有几种方法可以做到这一点（NSOperation 等），但最简单的就是这样：

```
// Instead of calling 'GetData', do this instead
[self performSelectorOnBackgroundThread:@selector(GetData) withObject:nil];

// You can't return anything from this because it's going to be run in the background
-(void)GetData {
    ...
    ...

    // Instead of 'return json', you need to pass it back to the main thread
    [self performSelectorOnMainThread:@selector(GotData:) withObject:json waitUntilDone:NO];
}

// This gets run on the main thread with the JSON that's been got and parsed in the background
- (void)GotData:(NSDictionary *)json {
    // I don't know what you were doing with your JSON but you should do it here :)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:25:28.917

您对问题的描述并不完全有帮助。我不清楚您的应用程序中的所有内容是否都很慢，或者只是某些操作；如果您经历了一个缓慢的动作，然后它又变快了，或者它继续缓慢地执行。

不管怎样，一般规则是在单独的线程上执行所有网络通信，包括解析答案，即不在负责管理用户界面的主线程上。这样，应用程序保持响应并且看起来很快。

如果您可以单独下载图像，您已经可以显示结果并在图像将出现的位置放置一个占位符。稍后，当您收到图像时，您删除占位符并将图像放在那里。

# python - 在linux中使用python匹配多行

> ID：13284005
> 
> 赞同：0
> 
> 时间：2012-11-08T06:54:50.050
> 
> 标签：python, regex, linux

我在 Linux 中使用 python 正则表达式时遇到了一个问题。目标字符串具有多行，例如

```
This is a matched string_1.
This is a matched string_22.

Do not match this line. 
```

我想要做的是匹配“\n\n”之前的所有内容。我用了

```
deleteString = re.compile('[\s\S]+\n\n') 
```

但它似乎在 Linux 中不起作用。

如何匹配双 \n 之前的字符串。

感谢你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:35:50.580

在这种情况下，您不需要正则表达式：

```
import re
import sys

text = sys.stdin.read()

# using str.find()
result = text[:text.find('\n\n') + 1]

# using re
result2 = re.match(r'(.*?)$^$', text, flags=re.DOTALL | re.MULTILINE).group(1)

# check that the result is the same
for r in [result, result2]:
     print(repr(r))
assert result == result2 
```

### [输出](http://ideone.com/3mUwGc)

```
'This is a matched string_1.\nThis is a matched string_22.\n'
'This is a matched string_1.\nThis is a matched string_22.\n' 
```

如果您以文本模式从文件中读取输入，那么 Python 会自动将特定于平台的换行符转换为 '\n'。

# plone - 克隆修补程序 20121106

> ID：13284006
> 
> 赞同：1
> 
> 时间：2012-11-08T06:54:55.487
> 
> 标签：plone, hotfix

我是 plone 和 linux 的新手，我正在尝试在 plone 上安装新补丁（Plone Hotfix 20121106）

我使用 buildout 来安装这个，似乎当我检查我的日志时，它根本没有下载/安装补丁。

这是我的 buildout.cfg 的鸡蛋内容：

```
eggs = 
    Products.PloneHotfix20110928
    Products.Zope_Hotfix_20110622
    Products.PloneHotfix20121106 
```

我所做的是先停止克隆服务然后再做

```
sudo ./bin/buildout -Nv 
```

并再次启动我的克隆。

当我检查 instance.log

它只安装了 Products.PloneHotfix20110928 和 Products.Zope_Hotfix_20110622

有人帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:49:45.710

检查你的 egg 目录以确保 egg 已经下载到那里，如果没有重新运行 buildout 并观察/grep 控制台消息以确保它被成功下载。如果由于某种原因它没有出现，您可以手动下载它并将其添加到您的鸡蛋目录中。

那么，如果你在前台启动 Plone，你应该会在控制台消息中看到正在安装的修补程序，例如

```
bin/instance fg 
```

那么您应该在控制台中看到一些输出，例如：

2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 registerConfiglet 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 setHeader 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 allow_module补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 get_request_var_or_attr 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 kssdevel 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix2266AppliedHot widget_traversal 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 gtbn 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 kupu_spellcheck 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix26应用membership_tool 补丁2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用queryCatalog 补丁2012-11-06 23:51:08 INFO Products。PloneHotfix20121106 应用 uid_catalog 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 renameObjectsByPaths 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用 at_download 补丁 20112-11-06 23: .PloneHotfix20121106 应用了 safe_html 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用了 python_scripts 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用了 getNavigationRootObject 补丁 2012-11-06 23: Products.PloneHotfix20121106 应用了 crypto_oracle 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用了 crypto_oracle_protect 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 应用了 ftp 补丁 2012-11-06 235: INFO Products.PloneHotfix20121106 应用在补丁 2012-11-06 23:51:08 INFO Products。PloneHotfix20121106 应用了 random_string 补丁 2012-11-06 23:51:08 INFO Products.PloneHotfix20121106 Hotfix installed

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:59:34.203

1.  将补丁 (PloneHotfix20121106) 放到 Plone 上的 Products 文件夹中，

2.  解压压缩包，

3.  运行实例（bin/instance fg）

4.  启动克隆服务

# ios - 使用 UIimage NSCoding 类别

> ID：13284010
> 
> 赞同：0
> 
> 时间：2012-11-08T06:55:11.280
> 
> 标签：ios, uiimage, nscoding

所以有一个解决方案，可以从这里处理 ios 5.1 的向后兼容性

[UIImage 和 NSCoding iOS 5.1](https://stackoverflow.com/questions/9614171/uiimage-and-nscoding-ios-5-1)

我的问题是......在这一点上它似乎不起作用

```
if (![UIImage conformsToProtocol:@protocol(NSCoding)]) 
{
} 
```

它在我的 4.3 上的 iphone 3gs 上跳过了这个，这表明它符合 protocl NSCoding，然后编译器对我说有一个异常，因为 uiimage 不响应 encodeObject？所以现在我采取的是这个

```
@try 
{
    [encoder encodeObject:_imageToSend forKey:kImageToSend];
}
@catch (NSException *exception) 
{
    NSLog(@"EXCEPTION @ PhotoImage : %@",exception);
}
@finally 
{
    [_imageToSend encodeWithCoderForArchiver:encoder];
} 
```

我怀疑我不应该明确调用 encodeWithCoderForArchiver 但无论哪种方式这个女人放下的类别出现故障，或者我更可能使用错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:07:09.927

改变

```
 ![UIImage conformsToProtocol:@protocol(NSCoding)] 
```

对此

```
![[UIImage class] conformsToProtocol:@protocol(NSCoding)] 
```

它似乎知道自己在做什么。

# eclipse - 如何在我自己的向导中使用 JSP 文件创建页面？

> ID：13284011
> 
> 赞同：1
> 
> 时间：2012-11-08T06:55:17.833
> 
> 标签：eclipse, eclipse-rcp, eclipse-wtp

我有一个问题陈述，我需要在我自己的向导中添加一个页面，该页面的工作是允许创建一个带有一些附加标记库的 JSP 文件，导入。

向导页面应要求用户提供有效的 JSP 文件名。

我发现，eclipse已经提供了JSP文件创建向导/页面。你知道这些 API 是什么吗？它们是可扩展的吗？以及如何在我的向导中使用相同的 API？经过大量的谷歌搜索后，我找到了任何解决方案。

我发现，同样可以通过扩展 eclipse 提供的“org.eclipse.jst.servlet.ui.internal.wizard.AddServletWizardPage”页面 API 来为 Servlet 做同样的事情

我还想知道与 JSP 关联的 IdataModel 是什么？

我是 eclipse 的新手，对 eclipse API 知之甚少。请帮忙。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:20:02.477

我发现很难使用像 jsp 向导这样的现有向导，对其进行剖析、理解然后修改它，因为这些向导中的大多数都不是为扩展而设计的，您将浪费时间试图弄清楚向导。我的建议是遵循此处概述的方法。[创建新文件向导](http://www.eclipse-tips.com/how-to-guides/10-creating-new-file-wizard)

如果您的新 jsp 文件是模板并且不会根据向导更改，您可以按照链接中概述的相同方法在您的包/插件中创建一个文本文件并将其加载/复制到新资源。此向导允许您定义文件扩展名（在您的情况下为 .jsp）的约束，并提供让用户选择文件位置的页面。如果初始的 jsp 页面创建是基于用户输入的动态的，那么您将需要一些额外的代码，但是在 eclipse 中使用一个基本的新文件向导，该向导旨在扩展，然后设置文件扩展名和设置初始文件内容是我建议不要尝试在复杂的向导中剖析和浪费时间。在这种情况下，您需要做的就是自定义向导上的 performFinish() 方法以添加初始文件内容。然后，如果您希望它在文件中显示为向导 -> 您可以使用 org.eclipse.ui.wizards 扩展来为此做出贡献。如果您希望在其自己的文件夹中选择向导，您可以使用相同的扩展点来创建一个具有 id 和标签的类别，然后将向导指定为您创建的类别的 id。

希望有帮助！- 邓肯

# iphone - 是否可以更改 SplitView 的 MasterViewController 宽度？

> ID：13284014
> 
> 赞同：0
> 
> 时间：2012-11-08T06:55:42.150
> 
> 标签：iphone, uisplitviewcontroller

如何更改 iPad 的拆分视图 MasterViewController 宽度？

是否可以在 MAsterViewController 上使用 UIView 而不是 UITableView？

苹果支持这两个？

请解释。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:08:04.157

是的，您可以使用 UIView 并可以为该视图分配任何大小，并且您可以在该 UIView 中放置 UITableView。

快乐编码！！！！！！

# php - 在php中将数据导出到excel表

> ID：13284017
> 
> 赞同：0
> 
> 时间：2012-11-08T06:55:48.373
> 
> 标签：php

对于我的网站，我想给用户一个新的机会，即在 excel 文件中导出所有用户详细信息。可以在 php 中执行，如果可能的话，我可以获得此类工作的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:01:05.017

最简单的方法是使用内置的 fputcsv 函数

[PHP 手册 - fputcsv](http://php.net/manual/en/function.fputcsv.php)

# android - 从 xml Web 服务中删除内容

> ID：13284027
> 
> 赞同：0
> 
> 时间：2012-11-08T06:57:12.477
> 
> 标签：android

如何从 android 中的 xml Web 服务中删除内容！！？我想做 nxt: 1-在将数据从 xml ws 解析到 listView 之后。用户应该选择他想从服务中删除的项目之一！并且活动应该重新加载并显示新列表！我想知道怎么做`remove the Item from the ws`和怎么做`reload the page`！！

```
ListAdapter getCourseAdapter= new SimpleAdapter(this,coursesList,R.layout.taken_list,
                new String[] {"code","creditHours","name"}, new int[] 
                   {R.id.t3,R.id.hrs,R.id.desc});
        coursesLV.setAdapter(getCourseAdapter);

        coursesLV.setOnItemClickListener(new OnItemClickListener(){

            public void onItemClick(AdapterView<?> arg0, View arg1,  final int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                     coursesList.remove(this);

                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:09:56.593

应该有一项用于删除项目的服务。因此，当用户单击一个项目时，该项目首先调用 Web 服务以从服务器中删除/删除该项目。然后再次调用 web 服务重新加载列表视图。

# java - 标签的文本在 Java 中没有改变

> ID：13284029
> 
> 赞同：1
> 
> 时间：2012-11-08T06:57:34.907
> 
> 标签：java, swing, concurrency, jlabel, event-dispatch-thread

我为我的项目创建了一个 UI，其中涉及 JLabel（javax.swing），每次完成该任务时都需要更新（标签的）文本。

我使用 label.setText 更改/更新里面的文本（如下图所示）。但是，大多数时候，标签不会更改文本。我尝试使用 label.UpdateUI() 希望它能解决问题，但它没有。

```
taskLabel.setText(msg); 
```

有任何想法吗？

```
if (gatherSamplesValue)
{
      if (SourceACheckBox)
      {
           try 
           { 
                Thread setLabelText1 = new Thread(){
                    public void run(){
                        taskLabel.setText(msg);

                    taskLabel.validate();
                }
             };
             msg = "Task : Gathering URLs from Phish Tank. DateTime: " + Main.getCurrentDate();
             setLabelText1.start();
             SourceA.sourceAMain();
             msg="Done with the task : " + Main.getCurrentDate();
             Thread setLabelText2 = new Thread(){
                public void run(){
                    taskLabel.setText(msg);
                    taskLabel.validate();
                }
             };
             setLabelText2.start();
      } catch (Exception ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
      }
 }

 if (SourceBCheckBox)
 {
  .
  .
 }

 if (SourceCCheckBox)
 {
  .
  .
 } 
```

}

这是代码，假设我需要在源 A 和 B 中放置相同的命令。里面的线程不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T07:34:28.057

> ..每次完成该任务时都需要更新（标签的）文本。

*   您对[Swing的并发性有疑问](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   Swing GUI 的所有更新都必须在 EDT 上完成，甚至`Whatever.setText()`被声明为线程安全，但默认情况下使用`Thread.sleep(int)`from`Swing Listener`冻结 Swing GUI 并且任何更改都不会在屏幕上更新

*   hack 将被放入 `taskLabel.setText(msg);`，`invokeLater()`然后输出到 Swing GUI 应该在 EDT 上完成

*   查看和使用`SwingWorker`作为一种正确的方法，其中方法`process`，`publish`并`done`通知 EDT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:04:36.100

将文本添加到 JLabel 后，您应该像这样将其添加到面板中。label.setText("某事"); panel.add(标签)

# c++ - 在 CCCallFuncND 中，我们传递指针。传递本地范围的指针是一种好习惯吗

> ID：13284031
> 
> 赞同：0
> 
> 时间：2012-11-08T06:57:36.313
> 
> 标签：c++, ios, pointers, cocos2d-x

在 CCCallFuncND 我们传递指针。从另一个方法传递本地范围的指针（即在成员中声明和分配的指针）是否是一种好习惯。

方法是这样的：-

```
CCCallFuncND * CCCallFuncND::create(CCObject* pSelectorTarget, SEL_CallFuncND selector,    void* d)
{
    CCCallFuncND* pRet = new CCCallFuncND();

    if (pRet && pRet->initWithTarget(pSelectorTarget, selector, d))
    {
        pRet->autorelease();
        return pRet;
    }

    CC_SAFE_DELETE(pRet);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:08:24.677

只要您不返回指向局部变量的指针（一旦您从方法返回，它将超出范围），这是安全的。在堆上分配对象的新内存（注意放置新的），因此从函数中返回它是安全的。工厂模式做同样的事情。 [http://www.oodesign.com/factory-pattern.html](http://www.oodesign.com/factory-pattern.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:54:19.283

这不是一个好习惯。可以通过，但是如果没有立即运行 CCCallFuncND 就不能使用了。如果您将其放入 CCSequence 并稍后运行，则 void* 将指向某个无效地址。

# c - 用赋值而不是 memcpy() 在 C 中复制结构

> ID：13284033
> 
> 赞同：23
> 
> 时间：2012-11-08T06:57:43.683
> 
> 标签：c, pointers, struct, memcpy

直到最近，我只看到使用`memcpy()`. 在课程和在线说明中，将一个结构的内容复制到另一个结构中通常看起来像

```
struct block *b0 = malloc(sizeof(struct block));
struct block *b1 = malloc(sizeof(struct block));
/* populate fields in *b0 */
memcpy(b1, b0, sizeof *b1); /* copy contents of b0 into b1 */
/* free b0, b1 */ 
```

但是，此任务也可以通过替换`memcpy()`.

```
*b1 = *b0; /* dereferenced struct assignment */ 
```

是否有充分的理由为什么它没有被广泛使用（至少在我有限的经验中）？这两种方法——赋值和——`memcpy()`是等价的，还是有一些令人信服的理由可以`memcpy()`普遍使用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-08T07:05:02.667

两种方法是等价的，都是执行*浅拷贝*。这意味着结构本身被复制，但结构引用的任何内容都不会被复制。

至于为什么`memcpy`更受欢迎，我不确定。旧版本的 C 不支持结构分配（[尽管早在 1978 年它就是一个常见的扩展](http://www.velocityreviews.com/forums/t443010-struct-assignment-historical-question.html)），所以也许 memcpy 风格作为一种制作更可移植代码的方式被卡住了？无论如何，结构赋值在 PC 编译器中得到了广泛的支持，而且使用`memcpy`起来更容易出错（如果你弄错了大小，很可能会发生坏事），因此最好尽可能使用结构赋值。

但是，有些情况下仅`memcpy`适用。例如：

*   如果您正在将结构复制到未对齐的缓冲区或从未对齐的缓冲区复制结构 - 例如，保存/加载到磁盘或从网络发送/接收 - 您需要使用`memcpy`，因为结构分配需要正确对齐源和目标。
*   如果您在结构之后打包附加信息，可能[使用零元素数组](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)，您需要使用`memcpy`, 并将这些附加信息分解到大小字段中。
*   如果要复制结构数组，则执行单个而不是单独循环和复制结构*可能更有效。*`memcpy`再说一次，它可能不会。很难说，`memcpy`实现的性能特征不同。
*   一些嵌入式编译器可能不支持结构赋值。当然，有问题的编译器可能也不支持其他更重要的事情。

还要注意，尽管在 C 中`memcpy`和结构赋值通常是等价的，但在 C++ 中`memcpy`和结构赋值*并不*等价。一般来说，C++ 最好避免`memcpy`ing 结构，因为结构分配可以而且经常是重载以执行其他操作，例如深拷贝或引用计数管理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T07:06:04.083

这可能不是您要寻找的确切答案。

我在解释我遇到的场景。

当我们使用 时`memcpy()`，它会逐字节复制到目的地。所以不用担心 ARM 架构中的数据对齐问题。如果你使用`=`运算符，并且任何一个地址没有对齐到 4 字节，那么就会出现对齐错误。

**来自 Arm 网站：**

指向目标位置的指针，比写入的最后一个字节高一个字节。这使得能够继续写入`with perfect alignment of bytes`内存块的字符串连接的过程。

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0175k/Cihbbjge.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0175k/Cihbbjge.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-06T09:13:07.837

我正在复活这个老问题，因为答案并没有解释**为什么** `memcpy`实际上是首选。

`memcpy`是首选，因为它清楚地表明程序员想要复制内容而不仅仅是指针。

在下面的例子中，这两个赋值做了两个非常不同的事情：

```
struct Type *s1,*s2;
*s1=*s2;
s1=s2; 
```

不经意间使用一个代替另一个可能会产生灾难性的影响。编译器不会抱怨。除非程序在使用未初始化的指针时崩溃，否则错误可能会在很长一段时间内被忽视并产生奇怪的副作用。

将其写为以下之一：

```
memcpy(s1,s2,sizeof(*s1));
memcpy(s1,s2,sizeof(*s2));
memcpy(s1,s2,sizeof(struct Type)); 
```

让读者知道其目的是复制内容（以类型安全和边界检查为代价）。

一些编译器（例如 gcc）甚至在遇到以下情况时会发出有关 sizeof 的警告：

```
memcpy(s1,s2,sizeof(s1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T14:18:29.503

有些人更喜欢 memcpy，因为那是他们学到的东西，他们从来没有想过他们可以只做一个作业（在古代是不允许做作业的，但那是很久很久以前的事了）。由于 malloc () 分配的内存始终正确对齐，因此无需担心对齐问题。而且由于编译器可以简单地将这个赋值转换为 memcpy 调用，它永远不会比 memcpy 更慢或更多代码。当然，有些嵌入式系统的编译器已经过时了。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-08T07:07:36.083

在嵌入式平台上工作的人会更喜欢使用 memcopy 而不是直接分配结构。主要是在处理嵌入式平台时，有些编译器不支持直接结构赋值，需要用到memcopy。如果你在电脑上工作，那么这两种情况都没有问题，两者都是有效的。

# php - 通过在 PHP 中对多维数组进行分组来计数

> ID：13284036
> 
> 赞同：1
> 
> 时间：2012-11-08T06:58:02.630
> 
> 标签：php, count, grouping

> **可能重复：**
> [php如何按特定值对多维数组进行分组？](https://stackoverflow.com/questions/2189626/php-how-to-group-a-multidimensional-array-by-a-particular-value)
> [php 使用多维数组按 SUM 分组](https://stackoverflow.com/questions/5269188/php-group-by-sum-using-multi-dimensional-array)

我需要一些帮助来获取数组元素数量的计数，方法是根据 php 中多维数组的日期值部分对其进行分组

这是我的原始数组

```
Array
(
[0] => Array
    (
        [quantity] => 5
        [dd] => 01-Nov-2012
    )

[1] => Array
    (
        [quantity] => 10
        [dd] => 01-Nov-2012
    )

[2] => Array
    (
        [quantity] => 3
        [dd] => 02-Nov-2012
    )

[3] => Array
    (
        [quantity] => 4
        [dd] => 03-Nov-2012
    )

[3] => Array
    (
        [quantity] => 15
        [dd] => 03-Nov-2012
    )
) 
```

这是我期待的输出

```
Array
(
[0] => Array
    (
        [quantity] => 15
        [dd] => 01-Nov-2012
    )

[1] => Array
    (
        [quantity] => 3
        [dd] => 02-Nov-2012
    )

[2] => Array
    (
        [quantity] => 19
        [dd] => 03-Nov-2012
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:07:04.113

只需遍历行，然后将数量添加到由`dd`值索引的不同数组中。

```
$in = array(array()); // your input
$out = array();
foreach ($in as $row) {
    if (!isset($out[$row['dd']])) {
        $out[$row['dd']] = array(
            'dd' => $row['dd'],
            'quantity' => 0,
        );
    }
    $out[$row['dd']]['quantity'] += $row['quantity'];
}
$out = array_values($out); // make the out array numerically indexed
var_dump($out); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:10:08.193

Orrrrr...因为日子是独一无二的：

```
 <?php

  header('Content-type: text/plain');

  $inputArray  = array(
    array('qty' => 5,  'dd'  => '01-Nov-2012'),
    array('qty' => 10, 'dd'  => '01-Nov-2012'),
    array('qty' => 3,  'dd'  => '02-Nov-2012'),
    array('qty' => 4,  'dd'  => '03-Nov-2012'),
    array('qty' => 15, 'dd'  => '03-Nov-2012'));

  $outputArray = array();

  foreach ( $inputArray as $record ) {
    if ( !key_exists($record['dd'], $outputArray) ) {
      $outputArray[$record['dd']] = 0;
    }
    $outputArray[$record['dd']] += $record['qty'];
  }

  print_r($outputArray); 
```

会产生：

```
Array
(
    [01-Nov-2012] => 15
    [02-Nov-2012] => 3
    [03-Nov-2012] => 19
) 
```

# jquery - jquery.validate：多个远程规则

> ID：13284044
> 
> 赞同：3
> 
> 时间：2012-11-08T06:58:34.403
> 
> 标签：jquery, validation

我计划使用两个远程规则验证单个文本字段。更像这样。

```
$('#form').validate({
   rules:{
      remote: 'url1.php',
      remote: 'url2.php'
   },
   messages:{
      remote: 'Error1',
      remote: 'Error2'
   }
}); 
```

这可能吗？我想要两个远程规则的单独错误消息。

希望能得到一些帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:13:53.327

首先，我会说，据我所知，您必须将验证方法嵌套在某个属性下——您不能只将它们放在全局范围内。这将使您的代码如下所示：

```
$('#form').validate({
   rules:{
      attribute1: {
        remote_check_1: true,
        remote_check_2: true
      }
   },
    messages:{
      attribute1:{
        remote_check_1: 'Error1',
        remote_check_2: 'Error2'
      }
    }

}); 
```

我不知道您是否可以将两者都放在规则对象下并为它们提出不同的错误消息。

您可以做的是创建两个自定义验证函数，每个函数都有不同的名称。结果将如下所示：

```
$.validator.addMethod(
    "remote_check_1",
    function(value, element) {
      res = $.ajax({url: 'url1.php', data: { attribute1: value }, dataType: 'json'});
    return res;
    }
 );

$.validator.addMethod(
        "remote_check_2",
        function(value, element) {
          res = $.ajax({url: 'url2.php', data: { attribute1: value }, dataType: 'json'});
        return res;
        }
     ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T11:10:38.157

jquery.validation 不支持单个字段中的多个远程验证。

但是您可以通过合并服务器端的验证处理程序来合并两个远程验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-21T07:24:11.110

> $.validator.addMethod("remote_check_1", function(value, element) { var data; $.ajax({ url: 'url1.php', type: 'post' data: { attribute1: value }, dataType: 'json ', async: false, 成功: function(res) { data = res } }); 返回数据; });

> $.validator.addMethod("remote_check_2", function(value, element) { var data; $.ajax({ url: 'url.php', type: 'post' data: { attribute1: value }, dataType: 'json ', async: false, 成功: function(res) { data = res } }); 返回数据; });

# html - 使用 CSS 和图像设置提交按钮的样式

> ID：13284046
> 
> 赞同：0
> 
> 时间：2012-11-08T06:59:00.903
> 
> 标签：html, css, button, submit, input-button-image

我想制作和样式提交按钮，即

> 输入类型=“提交”样式=“按钮类”>

使用 CSS 和提供的图像，既适用于悬停状态，也适用于正常状态，但是我无法达到所需的输出。我使用完美的锚标签和跨度创建了按钮，但我也希望提交按钮具有相同的外观和感觉。PS：我不能使用 css3 的 moz 和 webtooolkit，因为我的目标浏览器将是 IE7 和 IE 8，而且我必须只使用客户端提供的图像。有什么方法可以让提交按钮`<input type="submit">`达到所需的输出，就像使用锚按钮创建的按钮`<a><span></span></a>`？

![剩下](../Images/89eda2c4a637239c97dfd6f02fa99cf3.png) ![正确的](../Images/f5681863570909bdfdbd26ea3e9315ef.png)

原样的 HTML

```
 <a class="buttonImage" href="javascript:blankCheck('Approve');"><span> <bean:message key="button.common.submit"/> </span></a> 
```

成为 HTML

```
<input type="submit" class="buttonImage"> 
```

CSS AS IS 用于使用锚的按钮

```
.buttonImage span  {
    background:  url('common/images/LeftButton.png') no-repeat 0 0; display: block;                                                                                                     
    line-height: 14px; padding: 7px 0 5px 8px; color: #1b1d60;
            }   
.buttonImage     
{
background:  url('common/images/RightButton.png') no-repeat top right; 
display: block;    float: left; height: 26px; margin-right: 6px; 
  padding-right: 7px; text-decoration: none; font-family: Arial, Helvetica, sans-serif; 
   font-size:12px; font-weight:bold;
}

.buttonImage:hover span {
background-position: 0 -26px; color: #fff;
 }
.buttonImage:hover {
background-position: right -26px;
} 
```

![正确的图像](../Images/3490722eb792bec53182bf206cd81945.png) ![剩下](../Images/f855d82d750e797334bddf2bf082bf53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:12:27.883

***[现场演示](http://tinkerbin.com/B03kt99A)***

您好现在更改为您的**某些属性**`css stylesheet`或`add two div in your anchor tag`

**像这样**

请检查到这个

**CSS**

```
.buttonImage{
display:inline-block;
  vertical-align:top;
  text-decoration:none;
}
.buttonImage .left_img  {
    background:  url('http://i.stack.imgur.com/634e1.png') no-repeat 0 0;
 float:left;    line-height: 15px; padding: 7px 0 5px 8px; color: #1b1d60;
}   
.right_img{
background:  url('http://i.stack.imgur.com/SyeSO.png') no-repeat 0 0;
  float:left;   height: 27px;
  width:7px;
}
.buttonImage:hover .left_img, .buttonImage:hover .right_img{
background-position:0 -26px;
  color:#fff;
} 
```

**HTML**

```
<a class="buttonImage" href="javascript:blankCheck('Approve');">
  <span class="left_img"> <bean:message key="button.common.submit"/>Hello this is coding 
  </span>
  <span class="right_img"></span>
</a> 
```

***[演示](http://tinkerbin.com/B03kt99A)***

# javascript - 用于检查字符串中是否只有数字或小数的 JavaScript 函数

> ID：13284048
> 
> 赞同：1
> 
> 时间：2012-11-08T06:59:07.073
> 
> 标签：javascript

我正在尝试使用 JavaScript 检查我的字符串中是否只有数字或小数。

如果它在字符串中只有数字或小数，那么它应该通过，否则它想显示一个警告说有错误。

我试过使用下面的代码，但它没有提醒任何东西..

难道我做错了什么？

```
var myString = "abc"; 

        if (myString.matches("[0-9].") && myString.length() > 2) 
        {
            alert("Pass");
        }
        else
        {
            alert("Error");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:01:23.113

采用`^\d*[0-9](\.\d*[0-9])?$`

**[演示](http://jsfiddle.net/pintu31/LhthW/2/)**

```
if (myString.match(/^\d*[0-9](\.\d*[0-9])?$/) && myString.length > 2) {
        alert("Pass");
    } else {
        alert("Error");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:03:10.957

让我们简化:-)

```
 if (/^[\d\.]{3,}$/.test(myString)) {
    alert("Pass");
 } else {
    alert("Error");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:00:33.247

尝试：

```
/^\d+$/.test(myString) 
```

返回一个布尔值而不是一个数组或空值，这就是`match`它的作用。共：

```
if (/^\d{2,}$/.test(myString)){ 
...
}else{
...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:03:05.680

你可以像这样把它们放在一起：

```
alert( /^\d{3,}$/.test( myString ) ? 'Pass' : 'Error' ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T07:14:44.510

您的代码错误 myString.length() 是一个函数，实际上不是 myString 的长度

```
var myString = "abc"; 

    if (myString.match(/[0-9]/, "g") && myString.length > 2) 
    {
        alert("Pass");
    }
    else
    {
        alert("Error");
    } 
```

# java - Jtable 内容通过不同的选项卡可见

> ID：13284050
> 
> 赞同：0
> 
> 时间：2012-11-08T06:59:39.200
> 
> 标签：java, swing, jtable, opacity

我有带有 4 个选项卡的 JTabbedPane。JtabbedPane 位于 JLayeredPane 上。第一个和第四个选项卡包含带有自定义模型的 JTable。每个表每 5-10 秒刷新一次。
当第一个选项卡处于活动状态，并且 4 号的 JTable 刚刚完成刷新时，我可以看到 1 号的 4 号的内容。看截图。![在此处输入图像描述](../Images/4d936ec3238a987a4efd24d0eb5554b7.png) 当我单击另一个选项卡或最小化窗口时，这种奇怪的效果就消失了。直到在第 4 个选项卡上再次刷新该表。
使用 Future<> 对象完成刷新。我在 Netbeans 中使用了 Swing GUI 构建器，所以我有大量的代码。会发布任何可能有用的文章。
我试图重新验证jTabbedPane，没有效果。表和 jScrollPanes 都将 opaque 属性设置为 true。所以我尝试使用 SwingUtilities.invokeLater()。它有点帮助 - 现在第一次内容更新进展顺利，但后来 - 同样的问题。

第二个表模型具有更新其内容的方法

```
public void setData(LinkedList<Object[]> __rows) {   
    NewDevsTableModel.__rows = __rows;
    fireTableDataChanged();
} 
```

它在这里使用（*我在这里添加了 SwingUtilities*）

```
static class checkNew implements Callable<Boolean> {

@Override
public Boolean call() {
    ServiceMessage sm = ServiceMessage.getNewList();

    try {
        connect();
        os.write(sm.serialize());
        for (int i=0; i<10; i++) {
            try {
                Thread.sleep(300);
            } catch (InterruptedException e) {}

            if (is.available() > 0) {
                break;
            }

            if (i == 9) {
                disconnect();
                return false;
            }
        }

        byte[] actByte = new byte[is.available()];
        is.read(actByte);
        try {
            sm = ServiceMessage.Deserialize(actByte);   //may be there are no new devices
            if (sm.getType() == ServiceMessageType.NODATA) {
                MainWindow.jTabbedPane1.setEnabledAt(3, false);
                if (MainWindow.jTabbedPane1.getSelectedIndex() == 3) {
                    MainWindow.jTabbedPane1.setSelectedIndex(0);
                }
                return true;
            } else {
                return false;   //wrong answer type
            }
        } catch (ClassCastException | StreamCorruptedException e) {
            //remember selection and scroll
            final int scroll = MainWindow.jScrollPane3.getVerticalScrollBar().getValue();
            final int[] rows = MainWindow.newDevsTable.getSelectedRows();

            int col = MainWindow.devicesTable.getSelectedColumn();

            String[] parts = new String(actByte).split("\n");
            final LinkedList<Object[]> l = new LinkedList();
            for (int i=0; i<parts.length; i++) {
                String[] dev = parts[i].split(";", -1);
                String descr = dev[2];
                boolean iptype = (!dev[3].equals("-"));
                String address = dev[4];
                boolean atmtype = (dev[5].equals("+"));

                if (MainWindow.newDevsTable.getRowCount() >= (i+1)) {
                    if ((MainWindow.newDevsTable.getValueAt(i, 4) != null) && !MainWindow.newDevsTable.getValueAt(i, 4).equals("")) {
                        descr = MainWindow.newDevsTable.getValueAt(i, 4).toString();
                    }
                }
                Object[] o = {dev[0], dev[1], MainWindow.language[180], MainWindow.language[4], descr, iptype, address, atmtype}; 
                l.add(o);
            }

            if (!l.isEmpty()) {
                SwingUtilities.invokeLater( new Runnable() {
                    @Override
                    public void run() {
                        MainWindow.newDevsPanel.setVisible(true);
                        MainWindow.jTabbedPane1.setEnabledAt(3, true);
                        ((NewDevsTableModel)MainWindow.newDevsTable.getModel()).setData(l);   
                        ButtonColumn buttonColumn = new ButtonColumn(MainWindow.newDevsTable, addAction, 2, true);
                        buttonColumn = new ButtonColumn(MainWindow.newDevsTable, rejAction, 3, false);
                        //put selection back
                        for (int i=0; i<rows.length; i++) {
                            MainWindow.newDevsTable.addRowSelectionInterval(rows[i], rows[i]);
                        }
                        MainWindow.jScrollPane3.getVerticalScrollBar().setValue(scroll);
                    }
                });

            } else {
                MainWindow.jTabbedPane1.setEnabledAt(3, false);
                if (MainWindow.jTabbedPane1.getSelectedIndex() == 3) {
                    MainWindow.jTabbedPane1.setSelectedIndex(0);
                }
            }
            return true;
        }
    } catch (IOException e) {
        disconnect();              
        return false;
    } catch (ClassNotFoundException e) {
        return false;
    }
}
} 
```

我以这种方式提交任务

```
public static Future<Boolean> checkNewDevices() {        
    final Future<Boolean> task;        
    task = service.submit(new checkNew());
    return task;
} 
```

要自动刷新，我使用单独的线程

```
public class CheckNewPassThread extends Thread {
int pause = 10000;

@Override
public void run() {
    for (;;) {
        HostConnection.checkNewDevices();
        try {
            Thread.sleep(pause);
        } catch (InterruptedException e) {}
    }
}
} 
```

打开窗口时启动

```
private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  
    HostConnection.getData();        
    HostConnection.getDeviceAddress();
    RefreshData refreshThread = new RefreshData();
    refreshThread.start();
    new CheckNewPassThread().start();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:31:43.627

OMG，问题在于将 jTabbedPane.setEnabledAt(3, true) 调用到已启用的选项卡。摇摆很迷人

# php - Mysql Query-每个日期最多 3 个数据

> ID：13284054
> 
> 赞同：2
> 
> 时间：2012-11-08T06:59:47.563
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/5ea34dd955a352c16e1e1af1a5a8ffbe.png)

这些是我的数据库表数据，{我只维护了一个表}

我需要从每个 start_date 获取最多 3 个数据，

给我任何开发查询的想法，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:17:11.323

```
SELECT a.*
FROM Table1 a
INNER JOIN Table1 b ON a.start_date = b.start_date AND a.event_id <= b.event_id
GROUP BY a.event_id,a.start_date
HAVING COUNT(*) <= 3
ORDER BY a.start_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:28:34.383

我可能会建议你这个查询 -

```
SELECT * FROM (
  SELECT t1.*, COUNT(*) pos FROM table t1
    LEFT JOIN table t2
      ON t2.start_date = t1.start_date AND t2.event_id <= t1.event_id
  GROUP BY
    t1.start_date AND t1.event_id
  ) t
WHERE
  pos <= 3; 
```

它在一个组中选择 3 行，其中 min`event_id`为一`start_date`组。

# iphone - [UIMenuController sharedMenuController].isMenuVisible 在 EGOTextView 中始终为 NO

> ID：13284057
> 
> 赞同：2
> 
> 时间：2012-11-08T07:00:05.153
> 
> 标签：iphone, ios, uimenucontroller

我正在使用[EGOTextView](https://github.com/enormego/EGOTextView)进行 NSAttributedString 编辑。有一个`UIMenuController`我无法克服的错误。正如以下代码中描述的逻辑，在点击 EGOTextView 后，UIMenu 将交替显示和隐藏。但事实是`[UIMenuController sharedMenuController].isMenuVisible` 总是会得到**NO**，代码`[menuController setMenuVisible:NO animated:NO];`永远不会被调用。我错过了什么棘手的事情吗？感谢您的任何建议！

**EGOTextView.m**

```
- (void)tap:(UITapGestureRecognizer*)gesture {

NSLog(@"[UIMenuController sharedMenuController].isMenuVisible :%d",[UIMenuController sharedMenuController].isMenuVisible);
// It always log 0 even if the UIMenu is visible on the screen.

if (_editable && ![self isFirstResponder]) {
    [self becomeFirstResponder];  
    return;
}

[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(showMenu) object:nil];
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(showCorrectionMenu) object:nil];

self.correctionRange = NSMakeRange(NSNotFound, 0);
if (self.selectedRange.length>0) {
    self.selectedRange = NSMakeRange(_selectedRange.location, 0);
}

NSInteger index = [self closestWhiteSpaceIndexToPoint:[gesture locationInView:self]];

if (_delegateRespondsToDidSelectURL && !_editing) {
    if ([self selectedLinkAtIndex:index]) {
        return;
    }
}

UIMenuController *menuController = [UIMenuController sharedMenuController];
NSLog(@"menuController.menuVisible :%d", menuController.menuVisible);

if ([menuController isMenuVisible]) {
// never run into here
    [menuController setMenuVisible:NO animated:NO];

} else {

    if (index==self.selectedRange.location) {
        [self performSelector:@selector(showMenu) withObject:nil afterDelay:0.35f];
    } else {
        if (_editing) {
            [self performSelector:@selector(showCorrectionMenu) withObject:nil afterDelay:0.35f];
        }
    }

}

[self.inputDelegate selectionWillChange:self];

self.markedRange = NSMakeRange(NSNotFound, 0);
self.selectedRange = NSMakeRange(index, 0);

[self.inputDelegate selectionDidChange:self]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:29:49.117

我找到了下面的代码，并且**[menuController setMenuVisible:NO animated:NO];** 应该是设置 UIMenuController 不可见的点。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{

    if ([gestureRecognizer isKindOfClass:NSClassFromString(@"UIScrollViewPanGestureRecognizer")]) {
        UIMenuController *menuController = [UIMenuController sharedMenuController];
        if ([menuController isMenuVisible]) {
            [menuController setMenuVisible:NO animated:NO];
        }
    }

    return NO;

} 
```

函数**- (void)tap:(UITapGestureRecognizer*)gesture** 在 - **(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 之后运行**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:06:23.220

也许您应该尝试搜索“setMenuVisible：NO”。它也必须写在其他地方。

# javascript - 我收到未定义的 xml 对象。为什么？

> ID：13284059
> 
> 赞同：0
> 
> 时间：2012-11-08T07:00:10.433
> 
> 标签：javascript, jquery

我有两个 js 文件。一个是`route.js`，第二个是`xml.js`。在`route.js`文件中，我正在调用一个位于`xml.js`. 该函数的作用是通过 xml 链接解析并返回 xml 对象。当我`console.log($(xml))`在 xml.js 内部执行时，它会显示 xml，但是当我返回此对象并在`console.log(Xml.init(param, param, param))`内部执行时`route.js`，它会返回`undefined`. 为什么？

这是我的代码

路由.js

```
var Route = {
    fromurl : null,
    tourl   : null,
    from    : null,
    to      : null,

    init: function (fromaddress, toaddress) {
        from        = fromaddress;
        to          = toaddress;
        fromurl     = 'http://example.com/url=' + fromurl;
        tourl       = 'http://example.com/url=' + tourl;

        Route.searchRoute();
    },

    searchRoute: function () {
        console.log(Xml.init(from, to, fromurl)); // <---- this returns undefined why
    }

}; 
```

xml.js

```
var Xml = {
    to      : null,
    from    : null,
    url     : null,

    init: function (fromaddress, toaddress, link) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        this.requestXml();
    },

    requestXml: function () {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: this.parseXml
        });
    },

    parseXml: function (xml) {
        console.log($(xml));  //<--- works absolutely fine here
        return $(xml);
    }
}; 
```

**更新**

我也将 Xml 对象更改为跟随。在这里，我正在转换`xml`为`string`然后将字符串转换为`json`使用`[xmltojson][1]`插件，但它仍然返回未定义。请帮助我如何解决这个问题？

```
var Xml = {
to  : null,
from    : null,
url     : null,

requestXml: function (fromaddress, toaddress, link) {
    from    = fromaddress;
    to      = toaddress;
    url     = link;

    $.ajax({
        type: "GET",
        url: url,
        dataType: "xml",
        success: function (xml) {
            var xmltostring     = Xml.xmlToString(xml),
            stringtojson    = Xml.stringxmlToJson(xmltostring);
            return stringtojson;
        }
    });
},

xmlToString: function (xmlData) { 
    var xmlString;
    if (window.ActiveXObject) {
        xmlString = xmlData.xml;
    } else {
        xmlString = (new XMLSerializer()).serializeToString(xmlData);
    }
    return xmlString;
},

stringxmlToJson: function (stringxml) {
    return $.xml2json(stringxml);
}
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:09:14.010

由于 AJAX 调用（其异步），您的代码不会返回 XML。相反，您可以触发自己的事件并收听它们。

这应该有效：

```
 var Route = {
    fromurl : null,
    tourl   : null,
    from    : null,
    to      : null,

    init: function (fromaddress, toaddress) {
        from        = fromaddress;
        to          = toaddress;
        fromurl     = 'http://example.com/url=' + fromurl;
        tourl       = 'http://example.com/url=' + tourl;

        Route.searchRoute();
    },

    searchRoute: function () {
        $(document).unbind('your_event').bind('your_event', function (event, xml) {
           console.log(xml);
        });
        Xml.init(from, to, fromurl);
    }
};

var Xml = {
    to      : null,
    from    : null,
    url     : null,

    init: function (fromaddress, toaddress, link) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        this.requestXml();
    },

    requestXml: function () {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: this.parseXml
        });
    },

    parseXml: function (xml) {
        $(document).trigger('your_event', $(xml));
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:06:02.947

您的 init-function 不返回任何内容。这是使其工作的可能性：

```
var Xml = {
    to      : null,
    from    : null,
    url     : null,
    result  : null,

    init: function (fromaddress, toaddress, link) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        this.requestXml();
        return this;
    },

    requestXml: function () {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: this.parseXml
        });
    },

    parseXml: function (xml) {
            console.log($(xml));
        result = $(xml);
    },

    getResult: function () {
        return result;
    }
}; 
```

然后你可以调用：

```
searchRoute: function () {
    var xml = Xml.init(from, to, fromurl);
    console.log(xml.getResult());
} 
```

**解释**

您的代码尝试从不返回数据的 ini() 方法中获取结果。相反，它调用请求函数，该函数异步调用 parseXML() - parseXml() 返回的结果永远不会在任何地方结束。所以，这就是你的代码。和我的有什么区别？

在我的代码中，init() 确实返回了 Xml-Class 的一个实例。有了这个， parseXml 可以将结果保存在一个变量中（result here）。然后，函数 getResult() 可以将 xml 返还给您。

# jquery - jquery.js 中的空主体函数 - 带有 jQ uery-rails gem 的 Rails 3.2

> ID：13284062
> 
> 赞同：0
> 
> 时间：2012-11-08T07:00:41.017
> 
> 标签：jquery, ruby-on-rails

我已经开发一个 Rails 应用程序一周了。我使用 jquery-rails gem 来使用 jQuery，一切正常。但是今天，当我启动开发服务器时，jQuery 并没有加载。控制台给出了错误`jQuery not defined`等等`$ not defined`。因此，我检查了是否包含 jQuery 文件，它们是否包含在内。但是当我点击`jquery.js`文件的链接时，它只包含以下内容。

```
(function() {

}).call(this); 
```

jQuery 只是不工作..

这就是我需要 js 库的方式：

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap-datepicker/core
//= require_tree . 
```

我曾尝试交换引导程序和 jQuery，甚至尝试删除 jQuery 并仅使用引导程序。似乎没有任何工作。

有趣的是，它直到昨晚都运行良好！！而且我不记得添加或删除任何 js 库。我只是在编写 Javascript 代码。所以我不知道一夜之间出了什么问题。

我唯一没有尝试过的是从 CDN 提供 jQuery。但考虑到我的应用程序将部署在哪里，这不是一个选择。

请帮忙。

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'will_paginate', '~> 3.0.beta'
gem 'will_paginate-bootstrap'

#gem 'sqlite3'
gem 'mysql2'
#gem 'devise'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
    gem 'twitter-bootstrap-rails'
    gem 'less-rails'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'bootstrap-datepicker-rails'
gem 'libv8' 
```

提前致谢。

更新：

好的，我已经弄清楚出了什么问题。我创建了一个控制器`jquery`来简单地测试一些 jquery 插件，因此`jquery.js.coffee`在`/assets/javascripts`. 当我删除此文件并删除控制器时，一切都开始正常工作。

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:15:47.657

引用时

```
//= require jquery 
```

在您的清单文件中，Rails 将`jquery.js`在几个位置查找文件。这些位置在 中定义`Rails.application.config.assets.paths`。

`jquery.js`并且`jquery.js.coffee`在这种情况下都匹配，`jquery.js`因为 Coffeescript 编译成 Javascript。

当您生成了一个名为的控制器`jquery`并随后生成了一个文件时，在 Rails 开始查看包含的 gem 的供应商目录之前，已经满足`jquery.js.coffee`了对引用文件的查找。`jquery.js`因此，包含了错误的文件。

— 这是否回答了您的（第二个）问题？

# ios - 给图层添加阴影

> ID：13284063
> 
> 赞同：1
> 
> 时间：2012-11-08T07:00:52.130
> 
> 标签：ios

我可以使用以下代码向 imageView 层添加阴影。

```
self.imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"test.png"]];
self.imageView.center = self.view.center;
CALayer *containerLayer= [CALayer layer];
containerLayer.shadowColor = [UIColor blackColor].CGColor;
containerLayer.shadowRadius = 10.0f;
containerLayer.shadowOffset = CGSizeMake(10.0f, 5.0f);
containerLayer.shadowOpacity = .8f;
[containerLayer addSublayer:self.imageView.layer];
[self.view.layer addSublayer:containerLayer]; 
```

1\. 问题是不知道为什么要在containerLayer中加入imageView.layer才能得到imageView的阴影效果。但是，如果我将containerLayer添加到imageView.layer，imageView中没有阴影，为什么？

错误代码是：

```
 self.imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"test.png"]];
self.imageView.center = self.view.center;
CALayer *containerLayer= [CALayer layer];
/*same as before*/
[self.imageView.layer addSublayer:containerLayer];
[self.view.layer addSublayer:self.imageView.layer]; 
```

问题2：containerLayer的（用来给imageView提供阴影）frame = {{0, 0}, {0, 0}}，但最终的位置是在屏幕的中心。为什么？

![在此处输入图像描述](../Images/b41f3af890878fd484251a91730a9b4d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:47:34.790

一个层需要在它里面有一些不透明的东西来创建一个阴影（除非你明确地指定了一个 shadowPath）。因此，您的第一个版本的代码可以工作，因为 containerLayer 将 imageView 的层作为子层。但是，正如您在问题 #2 中注意到的那样，containerLayer 的框架表明它实际上位于左上角，大小为 (0,0)。您仍然可以看到图像的原因是 containerLayer 没有掩蔽其边界。将此行添加到您的第一个版本，图像消失：

```
[containerLayer setMasksToBounds: YES];  // kitten (and shadow) is gone 
```

您的代码版本 #2 没有显示阴影，部分原因是 containerLayer 不“包含”任何东西。如果您使用版本 #2，但给 containerLayer 一个新框架和不透明背景颜色，则会出现阴影。（但这显然不是解决方案，因为图像被遮住了......）还要注意当图层的背景为[UIColor clearColor]时没有阴影。

```
[self.imageView.layer addSublayer:containerLayer];
containerLayer.frame = self.imageView.layer.bounds;
containerLayer.backgroundColor = [UIColor yellowColor].CGColor; // yellow box w/shadow
// containerLayer.backgroundColor = [UIColor clearColor].CGColor;  // no shadow here 
```

如果您想要一个带有阴影的容器来容纳 UIImageView，您可以执行以下操作：

```
UIView * shadowView = [[UIView alloc] initWithFrame: self.imageView.frame];
shadowView.layer.shadowColor = [UIColor blackColor].CGColor;
shadowView.layer.shadowRadius = 10.0f;
shadowView.layer.shadowOffset = CGSizeMake(10.0f, 5.0f);
shadowView.layer.shadowOpacity = .8f;
[self.view addSubview: shadowView];
self.imageView.frame = (CGRect) { CGPointZero, self.imageView.frame.size };
[shadowView addSubview: self.imageView]; 
```

可以以类似的方式使用 CALayer 代替 UIView。或者您可以直接将阴影属性应用到 imageView 的图层，确保视图和图层都没有剪切/屏蔽边界。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-08T07:27:58.317

如果要在图像视图上添加阴影，只需更改该图像视图的 alpha 值（0.0 min - 1.0 max）。这将为您提供阴影效果，每当您想要移除阴影时，只需将 alpha 值恢复为 1.0。

例如：

```
 self.imageview.alpha = 0.5 // shadow state
    self.imageview.alpha = 1.0 // original state 
```

# ruby-on-rails - object_id 方法与 Fixnum 对象和 String 对象的工作差异

> ID：13284064
> 
> 赞同：1
> 
> 时间：2012-11-08T07:00:53.533
> 
> 标签：ruby-on-rails, ruby

我对所有 ruby​​ 对象中存在的一种先天方法的工作感到困惑，即 object_id 方法。当我一次又一次地在任何 Fixnum 对象上运行 object_id 方法时，例如在 irb 中，如果我这样做，

> >>100.object_id
> =>201

再做一次，

> >>100.object_id
> =>201

但是，例如，当我使用 String 对象时

> >>“你好”.object_id
> =>162333336

再做一次，

> >>“你好”.object_id
> =>15502236

为什么这样？在 ruby​​ 中，一切都是对象，每个对象都有一个名为 object_id 的固有方法，该方法唯一地标识该对象。但是在这里，ruby 让我感到困惑，因为它将具有相同文本（即“Hello”）的两个字符串视为不同，但具有相同值（即 100）的两个 Fixnum 对象相同，并为它们提供相同的对象 ID。为什么这样？谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T07:22:55.930

Fixnums 是 Ruby 中的不可变对象。只创建了一个实例，您可以“直接”使用该对象。ie 不像其他常规对象那样使用引用。所以他们有一个固定的object_id。这没关系，因为您只有一个对象实例。

但是当你写“hello”时，会创建一个新的字符串对象。在同一个脚本中，如果你再给一个“你好”，即使它们有相同的内容，也会创建一个新对象。因此不同的object_ids。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:30:32.250

这种行为是 Ruby 实现的问题，而不是规范问题。最有可能的是，您正在使用 MRI（从 C 源代码编译），在 JRuby 中您可以获得不同的结果。

出于性能目的，MRI 特别处理`true`、`false`、和。几个链接，您可以在其中找到有关它的更多信息：[http](http://www.oreillynet.com/ruby/blog/2006/02/ruby_values_and_object_ids.html) ://www.oreillynet.com/ruby/blog/2006/02/ruby_values_and_object_ids.html，http : [//rhg.rubyforge.org/chapter02.html](http://rhg.rubyforge.org/chapter02.html)`nil``Fixnum``symbol`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:28:49.627

如果您想获得相同的字符串对象 ID，则必须先将其转换为符号，然后您的 object_id 保持不变

```
'Hello'.to_sym.object_id 
```

# ios - 核心图浮动 y 轴

> ID：13284065
> 
> 赞同：4
> 
> 时间：2012-11-08T07:00:55.590
> 
> 标签：ios, core-plot

在 iOS 核心图上，我的数据是实时的，我希望它在数据输入时向左滚动。我还希望用户能够水平平移，同时始终看到左侧可见的 y 轴。从一些谷歌搜索来看，CPTAxis 上似乎曾经有 isFloatingAxis 属性，但现在已经不存在了。我应该怎么办？我不认为设置约束是我需要的，因为我确实希望自由水平滚动以查看左右两侧的一些数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T08:43:45.150

好的，我确实看到约束正是我所需要的。在`CorePlotGallery`示例目录下有一个`CurvedScatterPlot`示例，它显示了如何做到这一点。我可以让 CPTXYAxis 脱离axisSet并设置axisConstraints：

```
CPTXYAxis *y = axisSet.yAxis;
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

它会起作用。

# php - 使用 mysql、php 和 ajax 创建表（使用 jquery）

> ID：13284073
> 
> 赞同：4
> 
> 时间：2012-11-08T07:01:17.553
> 
> 标签：php, jquery, mysql, ajax

对于我的新项目，我想要一种不需要在每个数据库请求上重新加载页面的现代方法。:) 我希望脚本查询数据库并使用查询信息创建一个表。

我尝试了在互联网上找到的不同脚本。下面的一个最接近我的需要。

**索引.php**

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>Display Page</title>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
</head>

<body>
<button type='button' name='getdata' id='getdata'>Get Data.</button>

<div id='result_table'>

</div>

<script type='text/javascript' language='javascript'>
$('#getdata').click(function(){

$.ajax({
        url: 'getdata.php',
        type:'POST',
        dataType: 'json',
        success: function(output_string){
                $('#result_table').append(output_string);
            } // End of success function of ajax form
        }); // End of ajax call    

});
</script>
</body>
</html> 
```

**获取数据.php**

```
<?php
include('conn.inc.php');
//Query of facebook database
$facebook = mysql_query('SELECT * FROM users')
or die(mysql_error());

//Output results
if(!$facebook)
{
    mysql_close();
    echo json_encode('There was an error running the query: ' . mysql_error());
}
elseif(!mysql_num_rows($facebook))
{
    mysql_close();
    echo json_encode('No results returned');
}
else
{
    $output_string = '';
    $output_string .=  '<table border="1">';
    while($row = mysql_fetch_assoc($facebook))
    {
        $output_string .= '<tr>';
        foreach($row as $value)
        {
            $output_string .= '<td>{$value}</td>';
        }
        $output_string .= '</tr>';
    }
    $output_string .= '</table>';
}

mysql_close();
// This echo for jquery 
echo json_encode($output_string);

?> 
```

但我只得到一张桌子里面有一堆 {$value} 的桌子。我只尝试了 $value 但得到了一堆零。

我尝试了一个简单的脚本

```
$query = "SELECT users_name, users_password FROM users WHERE users_name = 'name'";
$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result);

echo $row['users_name']; 
```

然后我得到了一些结果，但是使用这个脚本我必须在每次搜索时刷新页面。需要明确的是，我希望能够使用 mysql 数据库中的信息创建一个表，并将其显示在屏幕上并重新加载页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:11:36.520

您应该只使用 $value 而不是 {$value}。在 while 循环中不需要另一个 foreach 循环。

```
$output_string = '';
$output_string .=  '<table border="1">';
while($row = mysql_fetch_assoc($facebook))
{
    $output_string .= '<tr>';
    $output_string .= '<td>'.$row['Your table column name here'].'</td>';
    $output_string .= '</tr>';
}
$output_string .= '</table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:07:02.583

代替

```
$output_string .= '<td>{$value}</td>'; 
```

尝试

```
$output_string .= "<td>{$value}</td>"; 
```

即用双引号替换单引号。

[请参阅此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)的文档，其中说：

> **当在双引号**中指定字符串时...变量在其中解析。

和

> 变量......当它们出现在**单引号**字符串中时**不会**被扩展。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:04:22.437

您可以反转逻辑，并在客户端使用自动执行此操作的库，例如[http://phery-php-ajax.net](http://phery-php-ajax.net) 而不是在服务器端创建表，将其作为 JSON 发送到浏览器，这更快，并建立你的表：

```
Phery::instance()->set(array(
'load' => function(){
  /* rest of mysql code */
  $rows = array();
  while($row = mysql_fetch_assoc($facebook)) { $rows[] = $row; }
  return PheryResponse::factory()->json($rows);
})->process(); 
```

然后在客户端里面`$(function(){});`

```
$(function(){
  var $result_table = $('#result_table'); 
  $result_table.phery('make', 'load');
  $result_table.bind('phery:json', function(e, data){
    var $this = $(this);
    for (var i = 0; i < data.length; i++) {
      $this.append($('<tr/>', {
        'html': '<td>' + data[i].row_name + '</td>'
      }));
    }
  });
  $result_table.phery('remote');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-24T10:35:47.463

**100% 工作** 只需删除结束标签。例如，当打开标签并将其存储在 $output_string 中时，切勿包含结束部分......

然后不要在引号中包含 $value... 将其放在引号之外，然后用点分号分隔 $value 和右引号。**

# php - PHP中的条码生成和解码

> ID：13284074
> 
> 赞同：0
> 
> 时间：2012-11-08T07:01:22.093
> 
> 标签：php, barcode, barcode-scanner, php-gd, barcode-printing

我需要开发一个 PHP 应用程序，该应用程序将生成条形码，并且还能够读取这些条形码。

由于我的应用程序将是一个基于 Web 的应用程序，而底层技术是 PHP，它是一种服务器端脚本语言，我觉得条形码生成不会是一个问题，但扫描和读取这些条形码可能是一个挑战。

如果可以在 PHP 应用程序中读取条形码，请指导我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T09:41:58.093

读取条码通常很容易，因为条码阅读器通常与普通键盘相同，因此写入应用程序就像用户键入一样。您只需要在页面上提供输入数据的文本字段。用户当然需要条形码阅读器。

通过向条形码添加 [Enter] 或 [Tab] 字符，您可以控制更改到下一个字段或将表单发​​送到服务器，而无需额外的用户交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T07:06:38.753

这里有一些链接供您参考

[http://www.ashberg.de/php-barcode/](http://www.ashberg.de/php-barcode/)

[http://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html](http://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html)

[http://www.perkiset.org/forum/php/barcode_generator_using_php_and_gd-t2406.0.html](http://www.perkiset.org/forum/php/barcode_generator_using_php_and_gd-t2406.0.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:15:04.820

理解条形码生成的诀窍是认识到条形码只是书写字符的另一种方式。某些类型的条码只能代表有限的字符集（例如，UPC 是 0-9 范围内的固定数量（通常为 13 个）字符）。其他类型的条码（例如 9 码 3）具有更广泛的字符范围（例如，代码 3 of 9 是字母数字）。

因此，生成条形码的最简单方法是使用免费的 Code 3 of 9 字体之一，并使用它来生成您的条形码。您可以将该字体与 GD 库结合使用来生成图像，或者如果您想生成包含条形码的 PDF，只需将用条形码字体写入的字符直接合并到 PDF 中即可。您甚至可以从 TypeKit 或 Google Web Fonts 等网络字体服务中获取条形码字体，然后将条形码直接放入 HTML 页面。

为了读回条形码，普通的网络浏览器中没有任何东西可以读取条形码并只返回字符。您的 Web 应用程序的用户将需要上传包含您可以在服务器上处理的条形码的图像。Miqdad Ali 在他的答案中发布的链接可能会帮助您在服务器端进行操作。

# excel - 在新工作表中双击单元格显示过滤器时创建宏

> ID：13284076
> 
> 赞同：0
> 
> 时间：2012-11-08T07:01:26.307
> 
> 标签：excel, vba

我有一个关于创建宏的问题，而场景如下：

Sheet1 单击 Sheet1 中的任何单元格时，它将自动根据单元格 A 和 B 进行过滤。

Sheet2 根据来自 Sheet1 的双击自动显示过滤条件

例如：当我双击 C1 时，Sheet2 上将自动显示基于 A1 和 B1 的过滤数据，同样的事情如果我在 Sheet2 上双击 C2 将自动显示基于 A1 和 B2 的过滤数据。

真的需要这里专家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:39:53.453

这将是您捕获单击事件所需的代码：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  Debug.Print Target.Address
End Sub 
```

这将是捕获双击事件所需的代码：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
  Debug.Print Target.Address
  'cancel the double click, prohibiting editng of cell per double-click
  Cancel = true
End Sub 
```

我也会帮助您进行过滤，但是由于您没有向其中粘贴任何代码，而且我不知道您希望过滤哪些数据的确切程度，所以我将把它留给您；）

*编辑：*

此代码可用于`Worksheet_SelectionChange`并将根据使用范围内的有效选择设置过滤器。如果过滤器已经到位，它将被停用。

```
 On Error Resume Next
  If Sheet1.AutoFilterMode Then
    'clear existing autofilter
    Sheet1.UsedRange.AutoFilter
  Else
    'setup filter based on selection
    Sheet1.UsedRange.AutoFilter field:=Target.Column, _
                                Operator:=xlFilterValues, _
                                Criteria1:=Target.Value, _
                                VisibleDropDown:=True
  End If 
```

# ruby-on-rails - Rails railties gem 错误“未定义的方法：'less'”

> ID：13284077
> 
> 赞同：12
> 
> 时间：2012-11-08T07:01:45.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我最近刚刚用`gem update`and更新了我的 rails 应用程序的 gems `bundle update`。当我尝试用它进行测试时，`rails s`它给了我这个错误：

`/Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/railtie/configuration.rb:85:in`method_missing'：未定义的方法`less' for #<Rails::Application::Configuration:0x0000010308a300> (NoMethodError)`

错误消息的其余部分如下所示：

```
from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/twitter-bootstrap-rails-2.1.6/lib/twitter/bootstrap/rails/engine.rb:15:in `block in <class:Engine>'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/Richard/Code/Rails/rgsimms/config/environment.rb:5:in `<top (required)>'
    from /Users/Richard/Code/Rails/rgsimms/config.ru:4:in `require'
    from /Users/Richard/Code/Rails/rgsimms/config.ru:4:in `block in <main>'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/Richard/Code/Rails/rgsimms/config.ru:1:in `new'
    from /Users/Richard/Code/Rails/rgsimms/config.ru:1:in `<main>'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /Users/Richard/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是 Twitter Bootstrap gem 的错误吗？我还在学习，所以我该如何解决这个问题？任何帮助都很棒。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-08T07:12:56.617

twitter 引导 gem 依赖于 less gem。从[文档](https://github.com/seyhunak/twitter-bootstrap-rails)：

```
gem "therubyracer"
gem "less-rails" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports LESS
gem "twitter-bootstrap-rails" 
```

我个人发现 twitter bootstrap 将文件从[官方站点](http://twitter.github.com/bootstrap/)转储到 vendor/assets 目录更容易。从 gem 更新比手动更新要容易一些，但是在更新引导程序时，您有点想“手动”进行更新，并“通过眼睛”检查所有内容 - 我更喜欢额外的努力，以确保它不会得到轻而易举地完成。此外，如果没有（据我所知）“未指定”样式，很难从 gem 中删除某些（例如）响应部分。响应式的东西会随着版本的变化而变化，就大小而言，所以你不能仅仅依靠它来工作。我真的看不出使用 gem 有什么好处。

**更新**

现在有一个官方 gem，我建议查看：[https ://github.com/twbs/bootstrap-sass](https://github.com/twbs/bootstrap-sass)

# wordpress - 如何在没有插件的情况下在 Wordpress 中显示客户推荐？

> ID：13284082
> 
> 赞同：0
> 
> 时间：2012-11-08T07:01:47.740
> 
> 标签：wordpress, plugins, client, testimonials

有谁知道如何在不使用插件的情况下在 Wordpress 中显示“客户推荐”？出于安全考虑，我尝试在我的 Wordpress 网站上使用最少的插件（很多插件不安全且不受支持）。

我目前使用“blockquote”功能显示“客户推荐”，但看起来不太好，并且页面上当前的推荐数量使页面速度变慢了太多。所以我需要一些可以分页的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:35:53.187

You are mixing Content Management, which is what @PedroVentura is referring to, with Content Styling, that's how things are displayed in your site.

Lots of themes create a Testimonials [Custom Post Type](http://codex.wordpress.org/Post_Types#Custom_Types) and offer a variety of displaying methods.

I just found out this plugin, [Testimonials by Woo Themes](http://wordpress.org/extend/plugins/testimonials-by-woothemes/), that does exactly that. And their code is top notch as well as the support and documentation.

If you want the "no plugins" way, create your CPT (of the non-hierarchical variety) and use Widgets and theme customizations to display it. So, it can be treated just like blog posts, with pagination, custom categories, individual media galleries, etc.

Sites of interest:

*   [https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)
*   [http://wp.tutsplus.com/tutorials/](http://wp.tutsplus.com/tutorials/)
*   [http://wordpress.org/extend/themes/search.php?q=custom+post+type](http://wordpress.org/extend/themes/search.php?q=custom+post+type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:01:12.713

您可以创建一个页面[http://codex.wordpress.org/Pages](http://codex.wordpress.org/Pages)这是您更好的选择

# windows - IE10 以 IE7 模式呈现。如何强制标准模式？

> ID：13284083
> 
> 赞同：121
> 
> 时间：2012-11-08T07:01:53.357
> 
> 标签：windows, internet-explorer, windows-8, internet-explorer-10

在微软的网站上，他们声称简单的 doctype 声明就足够了。但即使是这么短的文档也会退回到 IE7 模式：

```
<!DOCTYPE html>
<html>
<head>
   <title></title>
</head>
<body>

</body>
</html> 
```

[http://d.pr/i/fvzb+](http://d.pr/i/fvzb+)

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-11-08T10:31:42.770

Internet Explorer 假设大多数网页都是针对早期版本的 IE 编写的，并查看文档类型、元标记和 HTML 以确定最佳兼容性模式（有时不正确）。即使使用 HTML5 文档类型，如果它是 Intranet 站点，IE 仍会将您的网站置于兼容模式。

为确保您的网站始终使用最新的标准模式，您可以确保`Display intranet sites in Compatibly`将其关闭。但是，您必须在 Web 服务器本地的每台计算机上执行此操作（说明如下）。

或者，更好的是，您可以使用`X-UA-Compatible`标头从服务器将其关闭。请务必注意，*使用元标记将不起作用！*

```
<!-- Doesn't always work! -->
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

在整个 MSDN 中，都提到使用主机标头或元标记应该覆盖甚至 Intranet 站点。[了解 Internet Explorer 8 中的兼容性模式一](https://docs.microsoft.com/archive/blogs/askie/understanding-compatibility-modes-in-internet-explorer-8)文说明了以下内容。

> 大量内部企业网站针对 Internet Explorer 7 进行了优化，因此此默认例外保留了该兼容性。...再次，如果使用 Meta 标签或 http 标头为文档设置兼容模式，它将覆盖这些设置。

但是，实际上这不起作用，使用主机标头是唯一有效的选项。文章的评论部分还显示了这个确切问题的许多示例。

使用 Meta 标签还有其他几个问题，例如如果标签不在标签的正下方`<head>`或之前的数据过多 (4k)，则忽略标签。它还可能触发在某些版本的 IE 中重新解析文档，这会减慢渲染速度。[您可以在 MSDN 文章Best Practice: Get your HEAD in order](https://docs.microsoft.com/archive/blogs/ieinternals/best-practice-get-your-head-in-order)中阅读有关这些问题的更多信息。

**添加 X-UA-Compatible 标头**

如果您使用的是 .NET 和 IIS，您可以将其添加到 .NET 中，`web.config`您也可以以编程方式执行此操作：

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="X-UA-Compatible" value="IE=edge" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

如果您不使用 IIS，则可以轻松使用任何语言。例如，下面是如何在 PHP 中执行此操作：

```
header('X-UA-Compatible: IE=edge'); 
```

只要`X-UA-Compatible`标题与 HTML5 文档类型一起存在，站点将始终以最新的标准模式运行。

**关闭兼容性视图 关闭兼容性视图**
可能仍然有用。为此，请`Display all intranet sites in compatibility view`在兼容性视图设置中取消勾选。

![兼容性视图设置](../Images/f29794a296e5984dd401aa904416909c.png)

您可以通过点击`Alt`来获取菜单。

![在此处输入图像描述](../Images/a8d7169dd486bbaf92851262adb192ef.png)

**编辑** 这个答案也适用于 IE9。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-24T09:41:52.923

这对我有用..

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-08T07:05:54.863

尝试将以下标签添加到头部

```
<meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-06T02:08:01.607

元标记对 Intranet 站点没有任何作用，我的问题是 IE10 以 IE10 兼容模式呈现。对我来说解决这个问题的是进一步采用[@Jeow 的答案](https://stackoverflow.com/a/13284134/1081234)`web.config`，并通过在 IIS 下添加以下内容在 http 标头中使用该值：

```
<system.webServer>
  <httpProtocol> 
    <customHeaders> 
      <clear />
      <!-- <add name="X-UA-Compatible" value="IE=edge" /> not good enough -->
      <add name="X-UA-Compatible" value="IE=11,IE=10,IE=9,IE=8" /> 
    </customHeaders> 
  </httpProtocol>
</system.webServer> 
```

对于 IE，Intranet 站点包括未路由到外部的面向公众的站点 - 例如，在办公室工作的 Stackoverflow 员工可能会在兼容模式下看到 stackoverflow.com。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-25T17:17:06.980

当我执行以下操作时，它对我来说非常有效：

在[http://msdn.microsoft.com/en-us/library/gg699338(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg699338(v=vs.85).aspx)

使用了他们在第一个框中提供的确切示例（在底部添加了缺少`</html>`的内容），在 IE10 中打开它并强制标准，我认为您可能需要 html 中的实际内容才能强制标准不确定。

我的建议是用实际内容（简单的东西）替换你的空代码，看看它做了什么。

# html - 用于 div 元素实现的 css3 样式，如本网站中的标签

> ID：13284090
> 
> 赞同：0
> 
> 时间：2012-11-08T07:02:25.043
> 
> 标签：html, css, styling

由于我是 css3 的新手，我需要有关记录显示的帮助。我已经实现了自动完成功能，当我选择记录时，它会存储在下面的 div 中。现在它只向我显示文本。现在我想为记录设置样式，它应该类似于本网站中的标签。例如：在标签部分，如果我们选择 HTML5，它会像按钮一样存储，旁边有删除图像，我需要这样显示我的记录。给我一个造型的想法。下面是代码：

```
<div style="padding-top: 20px;">
<label for="poolName" style=" font-family: serif; font-size:medium;">or start with: </label>
<input id="poolName" name="poolName" type="text" value="" size="60" style="font-family: serif; font-size: small;"  />
</div>

<div  style="margin-top: 2em; font-family: serif; font-size: medium;"> Result: 
<div  id="log"  style="border:1px solid black ; width: 190px; overflow: auto;"></div> 
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T20:54:39.477

Chrome 的开发者工具告诉我*标签*样式是： `background-color: #E0EAF1; border-bottom: 1px solid #b3cee1; border-right: 1px solid #b3cee1; padding: 3px 4px 3px 4px; margin: 2px 2px 2px 0; text-decoration: none; font-size: 90%; line-height: 2.4; white-space: nowrap;`

# wordpress - 图像在所有屏幕分辨率的相同位置

> ID：13284091
> 
> 赞同：0
> 
> 时间：2012-11-08T07:02:30.750
> 
> 标签：wordpress

我正在开发一个 wordpress 博客主题[链接](http://www.marketingwithyou.com/blog/)。左侧有个人资料图片。现在根据我的屏幕分辨率 1152*864 是准确的。

当我用不同的屏幕分辨率测试这个网站时会出现问题。图像和内容之间的空间越来越大。

是否有任何解决方案应该兼容所有屏幕分辨率？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:05:29.507

你想'文本对齐：中心;' 你的'div.contentImg'。然后添加一个'margin-left：-850px;' 到图像。

```
<style>
    .contentImg {
        text-align: center;
    }
    .contentImg img {
        margin-left: -850px;
    }
</style> 
```

祝你好运！

# html - 如何防止列表项在绝对定位的 div 中重叠？

> ID：13284105
> 
> 赞同：-1
> 
> 时间：2012-11-08T07:03:31.293
> 
> 标签：html, css, list

我有一个 div，在那个 div 里面是列表项。每个列表项都需要在另一个下方，因此列表属性的默认值。但是，围绕它的 div**需要**绝对定位，以防止重新调整它所在的 div 的大小，并让设计正常工作。但是，当父 div 绝对定位时，每个列表项都会重叠。将列表项定位为相对并不能解决问题。

HTML：

```
{block:Pagination}
<div class="pagination">
{block:PreviousPage}
    <a href="{PreviousPage}"><img id="pagination"    
src="http://static.tumblr.com/txc9jrr/JlWmd5ncd/previouspage.png"></a>
    {/block:PreviousPage}

{block:JumpPagination length="5"}
<ol class="jumpPage">
            {block:JumpPage}
            <li class="jumpPageNumber">
                <a class="jump_page" href="{URL}">{PageNumber}</a>
            </li>
            {/block:JumpPage}
</ol>
{/block:JumpPagination}

{block:NextPage}
    <a href="{NextPage}"><img id="pagination" 
src="http://static.tumblr.com/txc9jrr/9Wtmd5mxb/nextpage.png"></a>
{/block:NextPage}
</div>
{/block:Pagination} 
```

CSS：

```
.pagination {
display:inline-block;
}

#pagination {
width:28px;
height:28px;
margin:0 0 -6px 0;
}

ol.jumpPage {
position:absolute;
}

.jumpPageNumber {
list-style:none;
}

a.jump_page {
color:#ababab;
background:#FF0000;
} 
```

列表元素是由 Tumblr 的服务器生成的，而不是我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:40:07.600

删除 position:absolute & 像这样写：

**CSS**

```
#navigation > *{
 vertical-align:top;
} 
```

**HTML**

```
<ol class="jumpPage">
 <li class="jumpPageNumber">
  <a href="/page/2" class="jump_page">2</a>
 </li>
 <li class="jumpPageNumber">
  <a href="/page/3" class="jump_page">3</a>
 </li>
 <li class="jumpPageNumber">
  <a href="/page/4" class="jump_page">4</a>
 </li>
 <li class="jumpPageNumber">
  <a href="/page/5" class="jump_page">5</a>
 </li>
</ol> 
```

# .net - 为什么“net use * /delete”不起作用但在我的 PowerShell 脚本中等待确认？

> ID：13284106
> 
> 赞同：49
> 
> 时间：2012-11-08T07:03:34.700
> 
> 标签：.net, powershell, mapped-drive, net-use

我有一个脚本，我想在创建新的 PSDrive 之前断开与映射驱动器的连接。

否则我会收到此错误：

> New-PSDrive : 不允许同一用户使用多个用户名与服务器或共享资源建立多个连接。断开与服务器或共享资源的所有先前连接，然后重试

所以我有这条线：

```
net use * /delete 
```

（不幸的是，到目前为止，我无法找到一种仅通过提供服务器名称来断开与特定映射驱动器的连接的方法：（）

当 PS 来到这条线时

> 你有这些远程连接：
> 
> \\ServerName\SharedFolder Continuing 将取消连接。

然后它停止执行。

**有没有办法在不确认的情况下自动确认从映射驱动器断开连接（它不必是 net use /delete 解决方案）？**

**请注意**：我从 Powershell ISE PS 提示符运行我的脚本

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-11-08T07:28:24.603

试试这个：

```
net use * /delete /y 
```

该`/y`键使其在提示中静默选择是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-24T13:11:16.023

借助 Windows 10 中的 PowerShell 5.1，您可以使用：

```
Get-SmbMapping | Remove-SmbMapping -Confirm:$false 
```

# php - 在下拉列表中显示所有页面

> ID：13284107
> 
> 赞同：0
> 
> 时间：2012-11-08T07:03:43.713
> 
> 标签：php, wordpress, select

我是 wordpress 的新手，我想在选择框中显示所有页面，并显示其 id 的值。我知道 get_pages() 是获取所有页面的函数，但不知道用他们的 id 列出任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:22:37.870

```
<form action="">
<select>

<?php // Query for listing all pages in the select box loop
$my_wp_query = new WP_Query();
$all_wp_pages = $my_wp_query->query( array(
    'post_type' => 'page',
    'posts_per_page' => -1
));

foreach ($all_wp_pages as $value){
    $post = get_page($value);
    $title = $post->post_title;
    $id = $post->ID;

    // For example
    // <option value="pageId32">Page title</option>

    echo '<option value="pageId' . $id. '">' . $title . '</option>';

}; ?>

</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:36:52.783

您可以使用该[`wp_dropdown_pages`](http://codex.wordpress.org/Function_Reference/wp_dropdown_pages)功能

从文档

> 在没有提交按钮的选择（即下拉）框中显示页面列表。

# node.js - 将数据传递给ejs中的部分

> ID：13284115
> 
> 赞同：7
> 
> 时间：2012-11-08T07:04:23.120
> 
> 标签：node.js, express, ejs

我正在使用 ejs-locals 来支持 express/node.js 中的部分内容

问题是当您在部分中包含部分时，库有一个错误。第二个部分包含试图找到与调用第一个部分的祖父母或 page.ejs 相关的文件。

所以这需要我要么展平我的 ./views，所以所有文件都只在 ./views 中（没有子目录）......或者我从进行初始部分调用的目录中符号链接到部分。

也许有另一种/更好的方法来做到这一点？

在我的很多观点中，我有一个面部混搭，它给了我带有人物头像的 html。我不能只使用`<% include faces %>`并收工，因为人们的集合来自许多不同的对象，具体取决于调用它的页面。

这是一个例子：

在一个项目页面上，我调用`<% include stats %>`，它调用 faces partial

```
<- partial('faces', { people: item.users }) %> 
```

或在列表页面上，我调用`<% include stats %>`，它调用 faces partial

```
<- partial('faces' { people: list.users }) %> 
```

部分“faces.ejs”只是循环访问人员并吐出指向他们个人资料的链接。但是因为我不能在部分中包含部分，所以我要么在整个地方进行符号链接，要么尝试不同的东西。

./views/list/index.ejs 调用一个调用 faces.ejs 部分的 stats.ejs 部分...所以我需要将 ./views/list/faces.ejs 符号链接到 ./views/stats/faces.ejs去工作。

您不能将数据传递给简单的包含，因此我不能根据调用它的上下文传递不同的用户集合。

`<% include faces %>`将需要 face.ejs 循环覆盖在 faces.ejs 中硬编码的 item.users 或 list.users

我还能做些什么来处理嵌套的部分/包含？我已经向 ejs-locals 提交了一个错误，其他一些人也提交了错误，但已经一个月没有任何修复。

# python - python文件写入问题

> ID：13284120
> 
> 赞同：-1
> 
> 时间：2012-11-08T07:04:35.460
> 
> 标签：python, file

我正在反复在文件上写入结果。有N个步骤，所以我需要将每个步骤的结果写在同一个文件上。然后，另一个模块将该文件用于该步骤。

这是问题所在。文件大小为0，所以我无法进行下一步。

```
while 1:
    file = open('a.txt','w+')
    run()
    file.write(result)
    file.close() 
```

这个简单的代码是我的代码的总结。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:08:17.700

你忘了分配给`result`？

此外，`w+` [截断文件](http://docs.python.org/2/library/functions.html#open)。你的意思是说`a+`？使用您当前的代码，如果您在除 之后`close()`（和下一次迭代之前`open()`）之外的任何时间终止无限循环，则输出文件可能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:15:41.113

正如@Sang 和@NPE 指出的那样，您很可能忘记设置结果。但我的猜测是，您实际上是在“运行”或其他函数中写入**本地结果变量，而您忘记将其设置为全局。**

在你的运行函数中（你在哪里分配结果）。

```
def run():
    global result
    ...
    result = 42
    ... 
```

当然，还有'a+'的问题。

# jquery - jQuery - 使用 .getHours() 方法将 1-24 小时更改为 1-12 小时？

> ID：13284122
> 
> 赞同：0
> 
> 时间：2012-11-08T07:04:37.350
> 
> 标签：jquery, time, hour

小提琴：http: [//jsfiddle.net/bnsex/1/](http://jsfiddle.net/bnsex/1/)

我想对这段代码使用 12 小时制...

```
$(document).ready(function() {

setInterval( function() {
var hours = new Date().getHours();
$(".hours, .hour").html(( hours < 10 ? "0" : "" ) + hours);
}, 1000);

}); ​ 
```

非常感谢您的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:16:05.290

您可以使用模`%`运算符来实现此目的，该运算符会找到除法运算的余数。

例如，`11 % 12`两者`23 % 12`都等于 11，就像 12 小时制的时钟一样。

```
var hours = new Date().getHours() % 12;
if (hours == 0) {
    hours += 12;
} 
```

[http://jsfiddle.net/ph7Vf/](http://jsfiddle.net/ph7Vf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:13:39.707

试试这个：

```
hours = (hours < 12 ? hours : hours - 12).toString().replace(/^\d{1}$/, '0$&'); 
```

**编辑：**根据 Vulcan 的回答，它可能会更短：

```
hours = (hours % 12).toString().replace(/^\d{1}$/, '0$&'); 
```

# php - 反斜杠 - 这是什么意思

> ID：13284124
> 
> 赞同：1
> 
> 时间：2012-11-08T07:04:56.897
> 
> 标签：php

`\`和有什么区别`\\`？

```
 echo $path_1="C:\wamp\www\practice\"; 
```

输出显示错误：

> 解析错误：语法错误，意外 $end，需要 T_VARIABLE 或 T_DOLLAR_OPEN_CURLY_BRACES 或 T_CURLY_OPEN

```
 echo $path_1="C:\\wamp\\www\\practice\\"; 
```

输出：

> C:\wamp\www\练习\

而不是打印`C:\\wamp\\www\\practice\\`它打印`C:\wamp\www\practice\`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T07:10:21.223

通常在编程中`\`，普通双引号之间使用`"`的字符是特殊字符的转义字符，使其成为特殊字符。所以要显示`\`你必须用另一个逃避它`\`。

我还要提到您收到 Parse Error 的原因是因为`\`您在第一个示例中使用的结尾转义了双引号，因此无法解析行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T07:34:19.473

尝试将字符串放在单引号 ( `'`)中

```
echo $path_1='C:\wamp\www\practice\ '; //notice the space in the end 
```

`"`检查内部字符串是否有转义序列和 php 变量。但是 string in`'`会按原样回显。`\`因此，在使用 inside 时全部转义`"`或将字符串写入`'`.

**重要说明**字符串`'`不能以`\`. 这将逃脱结束报价。

# c++ - 在 C++ 中比较 char 数组表中的项目

> ID：13284126
> 
> 赞同：0
> 
> 时间：2012-11-08T07:05:14.617
> 
> 标签：c++, arrays, character

我在我的代码中包含了给定的代码段：

```
char in[n][3];
for(int i=0;i<noc;i++){
        for(int j=0;j<3;j++){
          cin>>in[i][j];
        }
     }
for(int i=0;i<noc;i++){
   for(int j=0;j<noc;j++){
         if(in[i]!=in[j][1]){
            nod+=1;
         }
   }
     } 
```

现在编译器说“ISO C++ 不允许将指针与整数进行比较”这里的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:21:54.437

in[i] 是指向第 i 行的指针，in[j][1] 是 char。除非您将它们显式转换为 int 或其他内容，否则您无法直接比较它们。

# mongodb - 我正在尝试使用 JMSSerizial Bundle 序列化嵌入式 mongodb 文档

> ID：13284128
> 
> 赞同：7
> 
> 时间：2012-11-08T07:05:29.473
> 
> 标签：mongodb, symfony, jmsserializerbundle

我正在尝试用 Symfony 2.1 中的嵌入式文档序列化 MongoDB 文档。我正在使用 JMSserializer 和 Mongodb-odm 包。

我有以下文档实体。

```
// Blog

namespace App\DocumentBundle\Document;

use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;
use JMS\SerializerBundle\Annotation\Type;

/**
 * @MongoDB\Document(repositoryClass="App\DocumentBundle\Repository\BlogRepository")
 */
class Blog {

    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     * @Assert\NotBlank()
     */
    protected $title;

    /**
     * @MongoDB\string
     * @Assert\NotBlank()
     */
    protected $blog;

    /**
     * @MongoDB\EmbedMany(targetDocument="Tag")
     */
    private $tags;

    /**
     * @MongoDB\Timestamp
     */
    protected $created;

    /**
     * @MongoDB\Timestamp
     */
    protected $updated;
} 
```

和

```
// Tag

namespace App\DocumentBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\EmbeddedDocument
 */
class Tag {

    /**
     * @MongoDB\String
     */
    protected $name;
} 
```

为 tag 属性生成了一个 ArrayCollection 类型，但 JMSSerializer 包不喜欢它。如果我将标签更改为 @MongoDB\String 并重新生成博客文档，则会发生序列化，但不会使用 @MongoDB\EmbedMany(targetDocument="Tag") 集。

我是否需要指定一些 JMSSerializer 注释属性允许嵌入文档也被序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T11:34:44.723

您必须为 JMSSerializer 配置预期类型

注释：

```
/**
 * @MongoDB\EmbedMany(targetDocument="Tag")
 * @Type(ArrayCollection<App\DocumentBundle\Document\Tag>)
 */
private $tags; 
```

亚毫升：

```
tags:
    expose: true
    type: ArrayCollection<App\DocumentBundle\Document\Tag> 
```

# design-patterns - SED：在模式上方插入行并将模式空间附加到它

> ID：13284129
> 
> 赞同：3
> 
> 时间：2012-11-08T07:05:31.073
> 
> 标签：design-patterns, insert, sed

在一个文件中，我找到了我想要匹配的模式。当我找到它时，然后我在上面插入一行，但我似乎无法做的是获取模式空间并将其附加到我试图插入的行中。像这样：

```
/xxx/ i\inserting this line and & 
```

希望“&”能像 s 一样打印模式空间

预先问候并感谢克雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:33:18.307

这可能对您有用（GNU sed）：

```
sed -er '/.*(xxx).*/s//inserting this line and \1\n&/' file 
```

参考评论：

```
sed '/public String getFirstName()/s/.*\("[^"]*"\).*/@XmlElement(name=\1)\n&/' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:43:27.500

我认为 sed 无法解决您`i`或`a`. 您可以通过将结果通过管道传输到第二个 sed 中来做到这一点，或者如果您使用的是 GNU sed，您可以这样做：

```
sed '/xxx/ s//cat file_to_insert | head -c-1; echo " &"/e' infile 
```

假设您要插入的内容在`infile`. 替换的`e`标志使用 执行模式空间中的文本`/bin/sh`，然后结果替换命令。根据您输入的大小和`/bin/sh`链接的内容，这可能效率低下。

这是使用两次 sed 调用的一种方法：

```
<infile sed '/xxx/i\inserting this line and' | sed 'N; /\nxxx/! {P; D}; s/\n/ /' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:57:24.750

我自己也一直在研究解决方案。在这种类似的情况下，我有一条公共课线

```
public class SomeStatusCode extends AbstractEntity implements Serializable { 
```

我想在上面添加一个 @XmlRootElement 注释。在 .sed 文件中，我有以下内容

```
/public class [A-Za-z0-9]* .*/ {
        h
        s/public class \([A-Za-z0-9]*\) .*/\1")/    
        s/^/@Xml RootElement(name = "/
        p
        x
} 
```

结果是：

```
@Entity
@Table(name="SOME_STATUS_CODE")
@Xml RootElement(name = "SomeStatusCode")
public class SomeStatusCode extends AbstractEntity implements Serializable { 
```

所以最后我得到了期望的结果，即在我的行上方插入一行，其中包含该行的内容。（希望这是有道理的？）

# php - Mysql_fetch_assoc() 使用 LIKE 对我的查询发出警告

> ID：13284133
> 
> 赞同：0
> 
> 时间：2012-11-08T07:05:48.080
> 
> 标签：php, mysql

`mysql_fetch_assoc() expects parameter 1 to be resource, boolean given`返回查询时出现此错误

```
$query = mysql_query("SELECT * FROM tempusers
    WHERE 'firstname' LIKE '%$data%' 
    OR 'lastname' LIKE '%$data%'
    OR 'description' LIKE '%$data%'
    OR 'title' LIKE '%$data%'");

if (! $query){
    echo'Database error: ' . mysql_error();
}
while($row=mysql_fetch_assoc($query)){
    $description = $row['description'];
    echo $description;
} 
```

具体来说，while循环。不明白为什么我会得到。我想这是因为我使用了 LIKE，我不确定`wildcard's %%`我的查询是否正确使用。我将不胜感激知道如何摆脱这个错误以及它发生的原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:08:52.927

*   使用`CONCAT()`功能
*   在列名上使用反引号而不是单引号（*但在这种情况下，它不是必需的，因为您的列名不是[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)或者它不包含无效字符*）

询问，

```
SELECT * FROM tempusers
WHERE  `firstname` LIKE CONCAT('%', '$data', '%')
    OR `lastname` LIKE CONCAT('%', '$data', '%')
    OR `description` LIKE CONCAT('%', '$data', '%')
    OR `title` LIKE CONCAT('%', '$data', '%') 
```

还有一件事，您的查询很容易受到攻击`SQL Injection`，请花点时间阅读下面的文章，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:23:36.657

```
why it happened? 
```

For`SELECT, SHOW, DESCRIBE, EXPLAIN`和其他返回结果集的语句，`mysql_query()`成功或`FALSE`错误时返回资源
此外，对于`mysql_fetch_assoc()`，参数必须是适当的资源，而不是像`FALSE`这种情况下的对象。

```
How to rid of this error? 
```

由于错误是由于您的查询执行返回`FALSE`，这可能是解决方案。

```
$query = mysql_query("SELECT * FROM `tempusers`
        WHERE `firstname` LIKE '%" . $data . "%'
        OR `lastname` LIKE '%" . $data . "%'
        OR `description` LIKE '%" . $data . "%'
        OR `title` LIKE '%" . $data . "%'"); 
```

# java - 使用 SQL REGEXP 查找手机号码

> ID：13284138
> 
> 赞同：0
> 
> 时间：2012-11-08T07:06:02.993
> 
> 标签：java, mysql, sql, database

我们的数据库可以包含不同格式的手机号码，例如：“（731）123-4567”或“731-123 45 67”或“731-12-3-[4567]”等。
另外，我得到的输入在 API 中进行搜索可以是任何格式。
因此，当我需要在 db 中查找具有移动设备的用户时，我会清理输入数字，使其看起来像 '7311234567' 然后用 regexp 包装/填充它，`'(\\+|\\-|\\(|\\)|\\[|\\]| )*'`例如，SQL 看起来像这样：

```
select * from contact where mobile REGEXP '(\\+|\\-|\\(|\\)|\\[|\\]| )*
             1(\\+|\\-|\\(|\\)|\\[|\\]| )*7(\\+|\\-|\\(|\\)|\\[|\\]| )*
             3(\\+|\\-|\\(|\\)|\\[|\\]| )*1(\\+|\\-|\\(|\\)|\\[|\\]| )*
             2(\\+|\\-|\\(|\\)|\\[|\\]| )*9(\\+|\\-|\\(|\\)|\\[|\\]| )*
             8(\\+|\\-|\\(|\\)|\\[|\\]| )*0(\\+|\\-|\\(|\\)|\\[|\\]| )*
             7(\\+|\\-|\\(|\\)|\\[|\\]| )*4(\\+|\\-|\\(|\\)|\\[|\\]| )*
             0(\\+|\\-|\\(|\\)|\\[|\\]| )*'; 
```

问题是当我得到像“11234567”这样的输入时，它就像“7311234567”但没有“73”——当查询执行时——它也会找到带有“7311234567”的用户。

问题：如何更好地包装我的正则表达式，使其仅适合正则表达式的完整数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:31:53.333

您可以使用这个[MySQL 包](https://launchpad.net/mysql-udf-regexp)以便随时使用`regexp_replace`。然后你可以在搜索的时候替换所有非数字字符，避免不同格式的测试。

```
String mobileInput = "(731) 123-4567";
String mobile = mobileInput.replaceAll("[^0-9]", "");

String sql = "select * from contact where regexp_replace(mobile, '[^0-9]', '') = ?";
// run your sql query

// or directly on database side without Java
String sql = "select * from contact where regexp_replace(mobile, '[^0-9]', '') = regexp_replace(?, '[^0-9]', '')"; 
```

通过删除非数字字符，, `(731) 123-4567`,`731-123 45 67`和`731-12-3-[4567]`会给你`7311234567`.

用 Oracle 测试，因为我没有安装 MySQL：

```
select regexp_replace('(731) 123-4567', '[^0-9]', '') as "first",
       regexp_replace('731-123 45 67', '[^0-9]', '') as "second",
       regexp_replace('731-12-3-[4567]', '[^0-9]', '') as "third"
  from dual 
```

->

```
 first          second           third
7311234567      7311234567      7311234567 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T07:29:00.607

像这样的东西会起作用吗？它使用`REPLACE`与 相对`REGEX`，但它似乎符合您的要求（是的，这有点令人作呕 - 请参阅 SQLFiddle[此处](http://sqlfiddle.com/#!2/9f5e9/8)以获得更清晰的视图）。您可以根据需要添加更多参数以进一步标记：

```
SET @num = '7311234567';

SELECT *
FROM mobile
WHERE 
  REPLACE(
    REPLACE(
      REPLACE(
        REPLACE(
          REPLACE(
            REPLACE(num, ' ', ''), '-', ''), '(', ''), ')', ''), '[', ''), ']', '')

  = 
  REPLACE(
    REPLACE(
      REPLACE(
        REPLACE(
          REPLACE(
            REPLACE(@num, ' ', ''), '-', ''), '(', ''), ')', ''), '[', ''), ']', '') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T07:44:47.220

如果你不想为此安装额外的包，你只需要在你的正则表达式中添加开始和结束锚点：`^`和`$`.

您还可以将其简化为不那么冗长：

```
^[^0-9]*7[^0-9]*3[^0-9]*1[^0-9]*1[^0-9]*2[^0-9]*3[^0-9]*4[^0-9]*5[^0-9]*6[^0-9]*7[^0-9]*$ 
```

当然，最好的解决方案是规范化输入数据。

# javascript - 将 json 值插入到下拉框中

> ID：13284140
> 
> 赞同：3
> 
> 时间：2012-11-08T07:06:25.457
> 
> 标签：javascript, jquery

```
 var g_Year = [
         { Year: "2011" },
         { Year: "2011" },
         { Year: "2010" },
         { Year: "2012" },
         { Year: "2011" },
         { Year: "2012" }
];
fxnDrop = function () {
        $.each(g_Year , function (index, Ele) {
            var iYear = g_Year [index].Year,
                sHtmlYear = '<option value="' + iYear + '">' + iYear + '</option>';
            $("#DropDown_Year").each(function (index, Ele) {
                $("#DropDown_Year").append(sHtmlYear);
                if (Ele.value != iYear) {
                    $("#DropDown_Year").remove(sHtmlYear);
                }
            });
        });
} 
```

在这里我有多年，我的目标是在下拉框中仅显示一次特定年份。例如：2011 必须在下拉框中仅显示一次。任何人都可以帮我做到这一点。我在 Dropbox 中获得了多个 2011 年的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:22:10.117

试试这个代码

```
var fxnDrop = function() {
    var yearsArray = [];
    $.each(g_Year, function(index) { 
        if($.inArray(+g_Year[index].Year , yearsArray) == -1){
            yearsArray.push(+g_Year[index].Year);
        }
    });
    yearsArray.sort();
    var sHtmlYear = '';
    $.each(yearsArray , function(i){
        sHtmlYear += '<option value="'+ yearsArray[i] +'">' 
                         + yearsArray[i]  + '</option>'; 
    });
     $("#DropDown_Year").append(sHtmlYear);
};

fxnDrop(); ​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/JWsZh/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:51:53.883

```
var g_Year = [
         { Year: "2011" },
         { Year: "2011" },
         { Year: "2010" },
         { Year: "2012" },
         { Year: "2011" },
         { Year: "2012" }
];
g_Year.sort(function(o1, o2){return o1.Year > o2.Year} );

// use reduce function
var uniqueG_Year = g_Year.reduce(function(previousValue, currentValue, index, array){
  if(previousValue.length == 0 || previousValue[previousValue.length-1].Year != currentValue.Year)
    previousValue.push(currentValue);
  return previousValue;
}, []);

// or simply use filter
var uniqueG_YearFiltered = g_Year.filter(function(element, index, array){
  return (index == 0 || array[index-1].Year != element.Year)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:11:01.380

您可以使用[`Jquery.inArray()`](http://api.jquery.com/jQuery.inArray/)功能：对于 exe：-

```
 var categories=[];
         if ($.inArray(value.category, categories)==-1){
        categories.push(value.category);
        } 
```

`categories`将包含您需要的独特类别已
**更新**
[**[SEE LIVE DEMO][2]**](http://jsfiddle.net/3wHfB/34/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:24:48.317

试试这个.. @pranav 提到的使用 Jquery.inArray()

```
var yeararray= [];

fxnDrop = function () {
    $.each(g_Year , function (index, Ele) {
       if ($.inArray(Ele.Year, yeararray)==-1) {
        var iYear = g_Year [index].Year,
        sHtmlYear = '<option value="' + iYear + '">' + iYear + '</option>';
        $("#DropDown_Year").each(function (index, Ele) {
            $("#DropDown_Year").append(sHtmlYear);
            if (Ele.value != iYear) {
                $("#DropDown_Year").remove(sHtmlYear);
            }
        });
          yeararray.push(Ele.Year);
       }
    });
} 
```

# javascript - #each 之外的变量和把手

> ID：13284141
> 
> 赞同：0
> 
> 时间：2012-11-08T07:06:32.553
> 
> 标签：javascript, jquery, handlebars.js

我有资料，

```
data = {
  "items":  [
      {"value": "New", "id": 1},
      {"value": "Open", "id": 2},
      {"value": "Close", "id": 3}
    ],
  "current": 2
} 
```

我是我的模板，我循环遍历项目，但想在循环中访问当前值。

这行不通，

```
{{#each items}}
    {{id}} - {{value}} - {{current}} 
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:36:28.380

来自[精美手册](http://handlebarsjs.com/#paths)：

> 嵌套的车把路径还可以包括`../`段，这些段根据父上下文评估它们的路径。

因此，您要使用`{{../current}}`来访问`current`父上下文中的值。

演示：http: [//jsbin.com/iyofuq/1/edit](http://jsbin.com/iyofuq/1/edit)

# java - 命令按钮操作中的 MethodNotFoundException

> ID：13284143
> 
> 赞同：0
> 
> 时间：2012-11-08T07:06:34.380
> 
> 标签：java, jsf, jpa, ejb, managed-bean

当我开始使用 JSF 和 JPA 时，我在这里遇到了问题。我无法使用命令按钮向我的 EJB 中的方法发出 jsf“请求”。让我展示一下代码：

//.xhtml页面

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h1 align="center">Bem vindo ao site do Restaurante Trabalho Final</h1>
        <h:form>
            Numero da mesa: <h:inputText id="numero" value="#{indexBean.mesa.numero}"></h:inputText>

            <h:commandButton id="insertTable" value="OK" action="#{indexBean.insereMesa(mesa)}"> 

            </h:commandButton>
        </h:form>
    </h:body>
</html> 
```

这是我的 EJB：

```
package negocio;

import java.util.List;
import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import persistence.Mesa;

@Stateless
@LocalBean
public class MapaDeMesas {

    @PersistenceContext
    EntityManager em;

    public MapaDeMesas(){

    }

    public void insereMesa(Mesa m){
        EntityTransaction et = em.getTransaction();
        et.begin();
        em.persist(m);
        et.commit();
    }

    public List<Mesa> listarMesasDisponiveis() {
        EntityTransaction et = em.getTransaction();
        et.begin();
        Query selectAll = em.createQuery("SELECT m FROM Mesa m");
        List<Mesa> rs = selectAll.getResultList();
        et.commit();

        return rs;
    }

} 
```

这是堆栈：

```
javax.faces.el.MethodNotFoundException: javax.el.MethodNotFoundException: /HomePage.xhtml @14,97 action="#{indexBean.insereMesa(mesa)}": Method insereMesa not found
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:92)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:679) 
```

原因：javax.el.MethodNotFoundException：/HomePage.xhtml @14,97 action="#{indexBean.insereMesa(mesa)}"：在 com.sun.faces.facelets.el.TagMethodExpression.invoke( TagMethodExpression.java:109) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 32 更多

我不会粘贴持久性代码，以保持帖子干净，问题不在这一层。

提前致谢！

编辑：

对不起！我没有粘贴 ManagedBean，这里是：

```
package model;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import negocio.MapaDeMesas;
import persistence.Mesa;

@ManagedBean
@RequestScoped
public class IndexBean {

    @EJB
    private MapaDeMesas mp;
    private Mesa mesa;

    public IndexBean() {
        mesa = new Mesa();
    }

    public void insereMesa(){
        mp.insereMesa(mesa);
    }

    public void setMesa(Mesa mesa) {
        this.mesa = mesa;
    }

    public Mesa getMesa() {
        return mesa;
    }

} 
```

但是现在我遇到了另一个问题，新的堆栈跟踪就是这个，我找不到我的“getTransaction（）”想法的问题？

```
 javax.faces.el.EvaluationException: javax.ejb.EJBException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy186.insereMesa(Unknown Source)
    at negocio.__EJB31_Generated__MapaDeMesas__Intf____Bean__.insereMesa(Unknown Source)
    at model.IndexBean.insereMesa(IndexBean.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more
Caused by: java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction()
    at org.hibernate.ejb.AbstractEntityManagerImpl.getTransaction(AbstractEntityManagerImpl.java:324)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.getTransaction(EntityManagerWrapper.java:857)
    at negocio.MapaDeMesas.insereMesa(MapaDeMesas.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214) 
```

对不起，loooong 帖子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:41:05.537

第**一个错误**可以通过更改 facelet 中的方法签名来解决。

改变

```
<h:commandButton id="insertTable" value="OK" 
                 action="#{indexBean.insereMesa(mesa)}"> 
```

至

```
<h:commandButton id="insertTable" value="OK" 
                 action="#{indexBean.insereMesa()}"> 
```

**第二个错误**的原因是 EJB 的方法自动包装在事务中，因此您不需要调用`getTransaction()`,`begin()`和`commit()`.

改变

```
public void insereMesa(Mesa m){
    EntityTransaction et = em.getTransaction();
    et.begin();
    em.persist(m);
    et.commit();
} 
```

至

```
public void insereMesa(Mesa m){
    em.persist(m);
} 
```

这同样适用于您的其他 EJB 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:19:59.817

**编辑**：好的，你刚刚用 bean 更新了你的帖子。关于您的事务错误 - 如果您使用容器管理事务，则不能执行 bean 管理事务。您必须更新您的`persistence.xml`文件以不使用 JTA，或者只是删除您的事务管理代码并让容器为您处理它。

您需要将 EJB 包装在 JSF（或 CDI）托管 bean 中 - 似乎您已经完成了一半，`#{indexBean}`但我假设您还没有定义它？

如果您更新 facelets 页面（删除方法参数）。

```
<h:commandButton id="insertTable" value="OK" action="#{indexBean.insereMesa()}"> 
```

并定义一个请求范围的托管bean（这是一个JSF，不是CDI），它注入您的EJB并定义一个可以从您的facelets页面调用的方法......

```
package negocio;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

import persistence.Mesa;

@ManagedBean
@RequestScoped
public class IndexBean {

    @EJB
    private MapaDeMesas mapaDeMesas;

    private Mesa mesa;

    public Mesa getMesa() {
        return mesa;
    }

    public void setMesa(Mesa mesa) {
        this.mesa = mesa;
    }

    /**
     * Called by the command button.
     * @return outcome
     */
    public String insereMesa(){
        mapaDeMesas.insereMesa(mesa);
        return null; // navigates to same page (change if required)
    }

} 
```

希望这可以帮助。

# qt - 如何将 ITK 集成到 Qt 项目中？

> ID：13284145
> 
> 赞同：1
> 
> 时间：2012-11-08T07:06:38.813
> 
> 标签：qt, vtk, itk

我一直在努力将 ITKinto 集成到 Qt 项目中。我用谷歌搜索过，但没有发现任何有用的东西。我正在尝试将它集成为 Opencv。但我最终失败了，谁能告诉我正确的过程。非常感谢，如果提供任何适当的参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:15:34.007

没有理由在 Qt 的内部实际编译 ITK。您应该分别从您的客户项目中使用这两个项目（ITK 和 Qt）。

# applescript - 如何使用 Applescript 将捕获的屏幕截图放入文件夹中？

> ID：13284151
> 
> 赞同：1
> 
> 时间：2012-11-08T07:07:05.597
> 
> 标签：applescript

我正在尝试使用applescript捕获屏幕截图并转储到桌面上的文件夹中..我成功截取了屏幕截图，但没有转储到桌面上不存在的文件夹中..请建议..

我试过..

```
set loc to "/Users/username/Desktop/New Folder"
property N : 0
set N to N + 1
set picPath to (loc & "Picture_" & N & ".png") as string
do shell script "screencapture -tjpg " & quoted form of picPath 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:50:18.383

在第一行 (set loc...) 之后添加以下行：

```
do shell script "mkdir -p " & quoted form of loc 
```

# c++ - 使用调试符号编译需要额外的库？

> ID：13284152
> 
> 赞同：1
> 
> 时间：2012-11-08T07:07:13.787
> 
> 标签：c++, solaris, debug-symbols, sunstudio

我有一个奇怪的问题：当使用 构建目标文件时`-g`，链接器突然抱怨`libbar`我的工具通过`libfoo`. 没有`-g`.

这些符号似乎来自默认参数，`libfoo`其中的对象来自`libbar`. 但是，我的工具并未使用这些功能。

我想知道调试版本是如何导致这种额外的依赖关系的 - 是否有可能为所有符号生成这些调试符号，不仅是我使用的符号，而且对于这些调试符号，还需要默认参数？

这适用于 Solaris 上的 Sun Studio 5.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:01:30.873

也许您还添加了一些定义，例如 DEBUG 或类似的东西。这些定义可能会使用来自其他库的一些额外符号（例如，不同的日志库）。如果你给出简短的例子，它也可能会有所帮助

# javascript - 具有特定值的 Mongoose 模式属性

> ID：13284157
> 
> 赞同：29
> 
> 时间：2012-11-08T07:07:36.157
> 
> 标签：javascript, node.js, mongodb, express, mongoose

这是我的代码：

```
var userSchema = new mongoose.Schema({
  email: String,
  password: String,
  role: Something
}); 
```

我的目标是将角色属性定义为具有特定值（'admin'、'member'、'guest'等等），有什么更好的方法来实现这一点？提前致谢！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-08T08:21:03.760

你可以做枚举。

```
var userSchema = new mongoose.Schema({
  // ...
  , role: { type: String, enum: ['admin', 'guest'] }
}

var user = new User({
 // ...
 , role: 'admin'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:51:22.947

我真的不知道有一种方法可以为角色设置特定的值，但也许您想根据主对象类型创建多个对象类型，每个对象类型都有自己的角色（以及您想要的任何其他内容）区分）。例如...

```
var userSchema = function userSchema() {};
userSchema.prototype = {
  email: String,
  password: String,
  role: undefined
}
var member = function member() {};
member.prototype = new userSchema();
member.prototype.role = 'member';

var notSupposedToBeUsed = new userSchema();
var billTheMember = new member();
console.log(notSupposedToBeUsed.role); // undefined
console.log(billTheMember.role); // member 
```

另一种可能性是使用带有构造函数的 userSchema，该构造函数允许您轻松选择一个内置值。一个例子...

```
var userSchema = function userSchema(role) {
    this.role = this.role[role];
    // Gets the value in userSchema.role based off of the parameter
};
userSchema.prototype = {
  email: String,
  password: String,
  role: { admin: 'admin', member: 'member', guest: 'guest' }
}
var a = new userSchema('admin');
var b = new userSchema('blah');
console.log(a.role); // 'admin'
console.log(b.role); // undefined 
```

更多： http: [//pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword](http://pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword)

# android - 使用 itext 库加密 pdf

> ID：13284160
> 
> 赞同：1
> 
> 时间：2012-11-08T07:08:11.537
> 
> 标签：android, encryption, pdf-generation, itext

我正在尝试加密 pdf，在我成功生成带有水印的 pdf 之前，但是当我使用水印时，当我加密 pdf 时，它会给出错误：

```
11-08 09:03:13.579: W/System.err(29720): java.lang.IllegalArgumentException: No valid encryption mode
11-08 09:03:13.579: W/System.err(29720):    at com.itextpdf.text.pdf.PdfEncryption.setCryptoMode(PdfEncryption.java:198)
11-08 09:03:13.579: W/System.err(29720):    at com.itextpdf.text.pdf.PdfWriter.setEncryption(PdfWriter.java:2042)
11-08 09:03:13.579: W/System.err(29720):    at com.itextpdf.text.pdf.PdfStamper.setEncryption(PdfStamper.java:293)
11-08 09:03:13.579: W/System.err(29720):    at com.example.demo_pdfgenerate.WaterMarkAndPdfGenerate.WaterMarkEffect(WaterMarkAndPdfGenerate.java:135)
11-08 09:03:13.588: W/System.err(29720):    at com.example.demo_pdfgenerate.WaterMarkAndPdfGenerate.onCreate(WaterMarkAndPdfGenerate.java:81)
11-08 09:03:13.588: W/System.err(29720):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-08 09:03:13.588: W/System.err(29720):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-08 09:03:13.588: W/System.err(29720):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-08 09:03:13.588: W/System.err(29720):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-08 09:03:13.588: W/System.err(29720):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-08 09:03:13.588: W/System.err(29720):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 09:03:13.588: W/System.err(29720):    at android.os.Looper.loop(Looper.java:123)
11-08 09:03:13.588: W/System.err(29720):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-08 09:03:13.588: W/System.err(29720):    at java.lang.reflect.Method.invokeNative(Native Method)
11-08 09:03:13.588: W/System.err(29720):    at java.lang.reflect.Method.invoke(Method.java:521)
11-08 09:03:13.599: W/System.err(29720):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-08 09:03:13.599: W/System.err(29720):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-08 09:03:13.599: W/System.err(29720):    at dalvik.system.NativeStart.main(Native Method) 
```

如果我在加水印之前加密它的工作正常，但在加水印时再次出现错误`first decry-pt your pdf`

那么加密的最佳方法是什么，如果我做得对，那么我缺乏的地方。

**代码@**

*pdf生成#*

```
 try {
        document = new Document();

        PdfWriter.getInstance(document, new FileOutputStream(FILE));
        document.open();
        addImage();
        addTitlePage(document);
        createTable();
        document.close();
       //watermarking...
       WaterMarkEffect(); 
```

*水印#*

内部水印我正在做加密。

```
 public void WaterMarkEffect() {
    try {
        reader = new PdfReader(FILE);
        n = reader.getNumberOfPages();

        // Create a stamper that will copy the document to a new file
        stamp = new PdfStamper(reader, new FileOutputStream(Des));

               //pdf encryption
        stamp.setEncryption(OWNER_PASS.getBytes(),
                USER_PASS.getBytes(), PdfWriter.ENCRYPTION_AES_256| PdfWriter.DO_NOT_ENCRYPT_METADATA, PdfWriter.ALLOW_PRINTING);

        // img = Image.getInstance("watermark.jpg");
        Drawable myImage = getResources().getDrawable(
                R.drawable.back_watermarker_dull_small);
        Bitmap bitmap = ((BitmapDrawable) myImage).getBitmap();
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] bitmapdata = stream.toByteArray();
        img = Image.getInstance(bitmapdata);

        bf = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.WINANSI,
                BaseFont.EMBEDDED);
        img.setAbsolutePosition(150, 0);
        // img.scalePercent(SCALE_PER);

        // while (i < n) {
        // Watermark under the existing page
        under = stamp.getUnderContent(i);
        under.addImage(img);

        // Text over the existing page
        over = stamp.getOverContent(i);
        over.beginText();
        over.setFontAndSize(bf, 18);
        over.showText("page " + i);
        over.endText();

        // i++;
        // }

        stamp.close();
    } catch (DocumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

你的建议是可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:06:14.087

替换您的加密代码@

采用＃

```
 stamp.setEncryption(USER_PASS.getBytes(), OWNER_PASS.getBytes(),
                PdfWriter.ALLOW_PRINTING, PdfWriter.ENCRYPTION_AES_128
                        | PdfWriter.DO_NOT_ENCRYPT_METADATA); 
```

反而＃

```
stamp.setEncryption(OWNER_PASS.getBytes(),
                USER_PASS.getBytes(), PdfWriter.ENCRYPTION_AES_256| PdfWriter.DO_NOT_ENCRYPT_METADATA, PdfWriter.ALLOW_PRINTING); 
```

# django - 嵌套每个循环不能将字典附加到 django 中的列表

> ID：13284166
> 
> 赞同：0
> 
> 时间：2012-11-08T07:08:27.873
> 
> 标签：django

我正在尝试创建一个字典列表来为 django models.Model 建模。该模型被命名为 voteTemp。这会打印出每个字典 voteTempRecordDict，因为每个字典都是在循环的每次迭代中创建的：

```

```
``>>> voteTempRecordsList = []
>>> voteTempRecordDict = {}
>>> for each in VoteTemp.objects.all():
...     for each2 in each.__dict__:
...         if each2 is not '_state':
...             voteTempRecordDict.update({each2:each.__dict__[each2]})
...     print voteTempRecordDict`` 
```

 所以我认为这可以将每个 voteTempRecordDict 附加到 voteTempRecordsList （以制作字典列表），但它只是创建一个包含最后一个字典的列表，重复次数，因为 VoteTemp 中有对象：

谁能帮忙我？

```

```
`>>> voteTempRecordsList = []
>>> voteTempRecordDict = {}
>>> for each in VoteTemp.objects.all():
...     for each2 in each.__dict__:
...         if each2 is not '_state':
...             voteTempRecordDict.update({each2:each.__dict__[each2]})
...     voteTempRecordsList.append(voteTempRecordDict)` 
```

            回答 #1

赞同：0

时间：2012-11-08T07:17:06.290

试试这个.. 未经测试的代码

```
 >>> voteTempRecordsList = []
 >>> for each in VoteTemp.objects.all():
            voteTempRecordDict = {}
    ...     for each2 in each.__dict__:
    ...         if each2 is not '_state':
    ...             voteTempRecordDict.update({each2:each.__dict__[each2]})
    ...     voteTempRecordsList.append(voteTempRecordDict) 
```

``` 
```

# iphone - 在ios中以相同的顺序解析来自服务器的JSON响应

> ID：13284167
> 
> 赞同：2
> 
> 时间：2012-11-08T07:08:29.747
> 
> 标签：iphone, ios

我有一个从服务器获取 JSON 响应的应用程序。来自服务器的 JSON 响应如下所示：

```
{"status":"SUCCESS","message":"XYZ","token":"ABCDEFGHIJ"} 
```

现在我需要将其存储在 NSDictionary 中以供进一步解析。所以我使用以下方法：

```
 urldata1=[NSURLConnection sendSynchronousRequest:theRequest returningResponse:&res   error:nil]; NSDictionary
    *myDictionary=[NSJSONSerialization JSONObjectWithData:urldata1 options:NSJSONReadingMutableContainers error:nil];
 } 
```

但现在我得到的字典如下所示：

```
{
    message = "XYZ";
    status = SUCCESS;
    token = "ABCDEFGHIJ";
} 
```

所以我看到字典是根据键排序的......有没有办法在我的字典中重现来自服务器的完全相同的响应......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:20:30.633

顺序无关紧要，`NSDictionary`因为您使用键从字典中检索对象。因此，如果您想首先访问状态，请使用此代码

```
NSString *status  = [myDictionary objectForKey@"status"];
NSString *message = [myDictionary objectForKey@"message"];
NSString *token = [myDictionary objectForKey@"token"]; 
```

您可以像这样访问字典中的字典

```
NSDictionary *dict= [myDictionary objectForKey@"SomeOtherDictionary"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:53:10.837

对字典进行排序是没有意义的。您需要首先创建一个数组，该数组将根据您的需要进行排序。

您可以参考[从 JSON 为 UITableView 排序 NSDictionary 以](https://stackoverflow.com/questions/10386100/sorting-nsdictionary-from-json-for-uitableview)获得进一步的解释。

# java - 使用正则表达式删除java中分隔符之间的文本

> ID：13284170
> 
> 赞同：2
> 
> 时间：2012-11-08T07:08:44.097
> 
> 标签：java, regex

嗨，我正在尝试删除一串多行`/*`之间的所有代码。`*/`到目前为止我有这个：

```
Scanner scan = new Scanner(inputFile).useDelimiter("\\Z");
String file = scan.next();
String next = file.replaceAll("((/\\*)(\\s|\\S)*(\\*/))", ""); 
```

但是，当我尝试使用具有多种情况的输入文件运行它时`/*`，`*/`它会删除它们之间的所有内容。例如，在这个输入

```
/* first comment */
a = b;
//test
if a = c;
// whatever
if a = d;
/* this
is a

test
*/

/* another */ 
```

它将删除文件末尾第一个`/*`和最后一个之间的所有内容。`*/`基本上用空格替换整个文本。如何将其限制为`/**`and的第一种情况`**/`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:17:14.840

您正在使用`greedy`量词。您`(\\s|\\S)*`将匹配所有内容，直到找到最后一个`*/`，直到可以成功匹配完整模式的结果。

`?`您可以通过添加after使量词不情愿`*`。

```
"((/\\*)(\\s|\\S)*?(\\*/))" 
```

此外，您可以像这样简化您的正则表达式： -

```
String next = file.replaceAll("(?s)/\\*.*?\\*/", ""); 
```

`(?s)`-> 用于`SingleLine`匹配。它是`Pattern.DOTALL`用于`String.replaceAll()`. 因此，您`dot(.)`将包括所有内容，包括换行符。你不需要`(\\s|\\S)`那个。

# javascript - 处理验证和自动高度问题的彩盒

> ID：13284171
> 
> 赞同：0
> 
> 时间：2012-11-08T07:08:49.137
> 
> 标签：javascript, colorbox

我正在使用 colorbox 插件在我的应用程序中显示弹出窗口和模式，它是一个非常好的插件。一个问题是弹出窗口中没有自动调整高度我该如何处理？

我正在使用 jquery validate 插件来验证弹出窗口中显示的表单，但是一旦表单显示验证错误，颜色框就会显示滚动条。我想自动调整它的高度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:58:41.323

如果您查看 ColorBox 的 API，它说明您可以调用`resize()`.

引自[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)：

> `$.colorbox.resize()`
> 
> 这允许 ColorBox 根据它自己的自动计算调整大小，或调整为特定大小。这必须在 ColorBox 的内容加载后手动调用。可选参数对象可以接受`width`or`innerWidth`和`height`or `innerHeight`。如果不指定宽度或高度，ColorBox 将尝试重新计算其当前内容的高度。

因此，当您进行验证时，只需调用`$.colorbox.resize()`告诉 ColorBox 调整自身大小。

这是一个[小提琴](http://jsfiddle.net/flackend/zX6SX/)，所以你可以看到它的作用。

# ruby-on-rails - 在 Ransack 上为 Rails 设置默认搜索参数

> ID：13284172
> 
> 赞同：15
> 
> 时间：2012-11-08T07:08:50.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, ransack

我一直在为此绞尽脑汁，但无法理解。我觉得答案可能很明显。

我想要做的是以下几点：

我有一个索引控制器，其中列出了我可以使用 Ransack 搜索的一系列作业。每个作业都有一个完成日期，其中有一个日期或为空（未完成）。目前，搜索本身效果很好。我想让它加载索引页面只显示未完成的工作，但我也希望它能够工作，以便当有人运行搜索时，返回已完成和未完成工作的结果。

任何帮助将不胜感激。在下面的代码中，`:actual`是带有完成日期的字段的名称。我也在网上四处寻找，并认为可能像`DEFAULT_SEARCH_PARAMETER={}`我在 Job 模型中拥有的东西可能会起作用，但我似乎无法做到。这是代码：

```
class Job < ActiveRecord::Base
  DEFAULT_SEARCH_PARAMETER ={}
  attr_accessible :items_attributes, :actual
end

def index
   @search = Job.search(params[:q] || Job::DEFAULT_SEARCH_PARAMETER)
   @search.build_condition
   @results = @search.result
   @job = @results.paginate(:per_page => 10, :page => params[:page])
end 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-11-18T17:15:43.927

聚会迟到了，但我想我会建议一种替代方法，以防其他人遇到这种情况。

上面的答案有效，但它的缺点是默认选项没有添加到 Ransack 的搜索对象中，所以 - 如果您使用的是搜索表单 - 默认选择不会显示在表单中。

以下方法将默认值添加到搜索对象，因此将出现在您的搜索表单中。

```
def index
  @search = Job.search(params[:q])
  @search.status_cont = 'Open' unless params[:q] #or whatever, must use Ransack's predicates here
  @results = @search.result
  @job = @results.paginate(:per_page => 10, :page => params[:page])
end 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-08T19:14:16.913

我认为您可以在搜索参数不存在时应用自己的过滤器：

```
def index
  @search = Job.search(params[:q])
  @results = @search.result
  @results = @results.where(:your_date => nil) unless params[:q]
  @job = @results.paginate(:per_page => 10, :page => params[:page])
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-25T00:42:20.023

许多年后，我发现自己遇到了这个确切的问题，所以我想我会加入我正在使用的解决方案。在控制器中设置默认搜索参数并将它们反向合并为`params[:q]`：

```
def index
  default_search_params = {
    status_cont: "open"
  }

  @search = Job.search((params[:q] || {}).reverse_merge(default_search_params))
  ...
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:57:00.913

因此，默认情况下，您希望页面加载实际为零的记录。稍后当用户搜索时，您想回到以前的搜索方式。

试试这个。

```
def index
   @search = Job.search(params[:q] || Job::DEFAULT_SEARCH_PARAMETER)
   @search.build_condition
   @results = @search.result
   if @results.nil?
        @results=Job.find(:all, :conditions => ["actual = NULL"] )
   end

   @job = @results.paginate(:per_page => 10, :page => params[:page])
end 
```

# javascript - 用 JS 打开新窗口 - 但里面有 MEDIA_URL - 如何？

> ID：13284174
> 
> 赞同：1
> 
> 时间：2012-11-08T07:09:00.710
> 
> 标签：javascript, python, django, onclick

当用户单击文件下载链接时，我正在尝试打开一个新窗口。但该文件应该来自我的媒体文件夹，该文件夹由用户上传。如何将 django 模板代码嵌入到 js 中？这是我的愿景：

```
<a href="#" onclick="window.open('{{MEDIA_URL}}','mywindow','width=720,height=900')">download here</a> 
```

有可能吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:14:48.013

当然，为什么不呢？当然，请确保有问题的 JavaScript 是通过 Django 的模板系统提供的。

不过，您应该对 JavaScript 字符串中的模板变量使用 escapejs 过滤器。如：

```
"{{ MEDIA_URL|escapejs }}" 
```

# windows - 命名管道性能

> ID：13284176
> 
> 赞同：3
> 
> 时间：2012-11-08T07:09:27.133
> 
> 标签：windows, delphi, ipc, delphi-2009, named-pipes

*   我有一个应用程序，我发送大约。通过命名管道的 125 个数据项。
*   每个数据项由最大数据块 1 组成。最多 300 个字符和数据块 2。600 个字符。
*   这给出了 125 个数据项 * (300 + 600) 个字符 * 每个字符 2 个字节 = 125 * 900 * 2 = 225000 个字节。
*   每个数据项都用大括号括起来，例如`{Message1}{Message2}`.
*   我注意到，如果我发送消息，就会出现发送/接收问题。而不是`{Message1}{Message2}`接收应用程序获取`{Messa{Message2}`.
*   然后我更改了发送代码，以便以 500 毫秒的间隔发送消息。然后，问题就消失了。

如果我做的一切都是正确的（我这边没有错误，命名管道没有错误配置），通过命名管道从 Delphi 2009 中的应用程序发送 225000 字节到同一台机器上的 .NET 应用程序需要多长时间？

发送这种大小的数据的合理时间是多少**？**

# asp.net-mvc - 如何从 HTTPHandler 动态调用控制器操作？

> ID：13284178
> 
> 赞同：3
> 
> 时间：2012-11-08T07:09:35.917
> 
> 标签：asp.net-mvc, httphandler, ashx

在我的 MVC Web 应用程序中，我创建了两个控制器。一种用于处理来自移动设备的请求，另一种用于处理桌面浏览器。

我正在尝试根据谁在调用应用程序来调用适当的控制器操作。此检查将由我准备好的自定义逻辑完成。

实现这种动态重定向到控制器的最佳方法是什么？我的方法是使用一个 HTTPHandler (ashx)，我将在其中检查源代码，然后调用适当的控制器。设备/浏览器将点击指向此 ashx 文件的 URL。

我在我的处理程序的 ProcessRequest() 方法中尝试了这样的事情.....。

```
 <source checking logic>
 ...
 ...
 var webRequest = HttpWebRequest.Create(MyFinalURL);
 var response = webRequest.GetResponse();
 context.Response.Write(response); 
```

这会是最好的方法吗？还是有更好的选择？HTTPModule 也适用于这个目的吗？请建议。

另外，我将如何从 ashx 文件重定向到控制器操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:39:16.707

查看[Scott Hanselman 关于移动视图引擎的博客文章](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)

# javascript - 联系人保存解决方案在 iPhone 5 设备上不起作用

> ID：13284179
> 
> 赞同：1
> 
> 时间：2012-11-08T07:09:40.710
> 
> 标签：javascript, ios6, titanium-mobile, xcode4.5, titanium-modules

我正在使用复制和粘贴解决方案将联系人保存到 iOS 6 上的通讯簿中，但在文档中发布的解决方案在 Titanium（Appcelerator）中保存联系人不起作用，

```
 if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_AUTHORIZED){

        Ti.API.info('Saving contact...');
    Ti.Contacts.createPerson({
      firstName: 'Paul',
      lastName: 'Dowsett',
      address:{
        work:[
          {
            CountryCode: 'gb', // determines how the address is displayed
            Street: '200 Brook Drive\nGreen Park',
            City: 'Reading',
            County: 'Berkshire',
            Country: 'England',
            ZIP: 'RG2 6UB'
          },
          {
            CountryCode: 'gb', // determines how the address is displayed
            Street: '1 St Pauls Road\nClerkenwell',
            City: 'City of London',
            State: 'London',
            Country: 'England',
            ZIP: 'EC1 1AA'
          }
        ],
        home:[
          {
            CountryCode: 'gb', // determines how the address is displayed
            Street: '2 Boleyn Court',
            City: 'London',
            State: 'Greenwich',
            Country: 'England',
            ZIP: 'SE10'
          }
        ]
      },
      birthday: '2012-01-01T12:00:00.000+0000',
      instantMessage:{
        home:[
          {
            service: 'AIM',
            username: 'leisureAIM'
          },
          {
            service: 'MSN',
            username: 'no_paul_here@msn.com'
          }
        ],
        work:[
          {
            service: 'AIM',
            username: 'seriousAIM'
          }
        ]
      },
      organization: 'Appcelerator',
      phone:{
        mobile: ['07900 000001', '07900 000002'],
        work: ['+44 (0)118 925 6128', '+44 (0)118 000 0000']
      },
      url:{
        homepage: ['www.google.com'],
        work: ['www.appcelerator.com', 'www.example.com']
      }
    });
    Ti.API.info('Contact saved');

    Ti.API.info('Saving contact...');
    var workAddress1 = {
      'CountryCode': 'us',
      'Street':  '440 N. Bernardo Avenue',
      'City': 'Mountain View',
      'State': 'California',
      'Country': 'United States',
      'ZIP': '94043'
    };

    Ti.Contacts.createPerson({
      firstName:'Arthur',
      lastName:'Evans',
      address:{
        'work':[workAddress1]
      }
    });
    Ti.API.info('Contact saved');

} else if (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_UNKNOWN){

            alert('Unknown Not allowed');

            Ti.Contacts.requestAuthorization(function(e){

              if (e.success) {
                    performNewAddressBookAddition();
                    //performAddressBookFunction();
                } else {
                    addressBookDisallowed();
                }
            });
        } else {
            addressBookDisallowed();
        } 
```

我也允许 iOS 6 和 iPhone 5 的所有权限，但解决方案适用于带有 iOS 6 的 iPhone 4 和 4s，但不适用于 iPhone 5 物理设备。

```
http://developer.appcelerator.com/question/144463/solution-for-contact-saving-is-not-working-on-iphone-5-device 
```

[从 Appcelerator 文档复制并粘贴相同的代码](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Contacts)

# batch-file - 调用函数批处理文件

> ID：13284180
> 
> 赞同：0
> 
> 时间：2012-11-08T07:09:43.750
> 
> 标签：batch-file

我在批处理文件中调用一个函数。在函数完成流程继续之后，当我转到批处理文件末尾的标签 END 时，它返回到我调用函数 aa 并打印 zi 的空间。

```
 :b  
 call :aa 1
 echo zi
 call :rr
 **goto end**

:aa
if...(
goto b)else(
goto end

:end
echo finish 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:20:24.583

这个问题没有多大意义。首先，我什至很难理解您的意思，但是查看代码有一些显而易见的事情：

1.  标签写为`:label`，而不是`label:`。所以`b:`只需更改驱动器，`aa:`并且`end:`只是无效的语法。

2.  调用子程序将导致所有“批处理文件结束”条件改为“从子程序返回”。这包括文件结尾`goto :eof`和`exit /b`. 通常子程序以结尾，`goto :eof`您还需要在所有子程序中使用类似*的*东西，以避免在常规程序流程之后遇到它们。

3.  `if %1>2`可能只是意味着“语法错误，但将标准输出流重定向到标准错误流”。至少在这里它只是说`1> was unexpected at this time.`。这是预期的。如果您想说“If *foo* then *bar* else *baz* ”，请使用以下命令：

    ```
    if foo (
      bar
    ) else (
      baz
    ) 
    ```

    而且您无法将事物与批处理文件`>`或`<`批处理文件进行比较。您必须使用`GTR`or `LSS`：

    ```
    if %1 GTR 1 goto b else goto end 
    ```

# algorithm - 检查字符串中的重复字符

> ID：13284182
> 
> 赞同：1
> 
> 时间：2012-11-08T07:10:00.007
> 
> 标签：algorithm, bit-manipulation

在一次采访中，我被要求检查天气给定的字符串是否有重复的字符。谷歌搜索这个问题，我了解到一个使用位操作的问题。

```
bool check(char*name)
{
     int i;
     int checker=0;
     for(i=0;name[i]!=0;i++)
     {
        int val=name[i]-'a';
        if((checker&(1<<val))>0)return false;
          checker|=(1<<val);
     }
     return true;
 } 
```

我检查了这段代码，它工作正常。但我不明白这一行背后的逻辑。

```
> if((checker&(1<<val))>0)return false;
>               checker|=(1<<val); 
```

第二个疑问是，如果字符串太长或包含 Unicode（2 字节宽的字符），这会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:16:45.507

该算法使用每个 ascii 字符 1 位来指示集合的存在。所以它至少适用于英文小写字母——其中 26 个和连续的 ascii 代码。a= 000001, b= 000010, c= 000100 等等。不管 a 和 c 出现的次数如何，'aacaaccc' 和 'ac' 和 'ca' 都将编码为 000101。因此字符串长度无关紧要。

您对 2 字节字符是正确的。拉丁字符集也会引起问题，但混合大小写（大写和小写）的问题可以通过屏蔽第 5 位 (32) 以转换为大写（或与 32 进行 oring 以转换为小写）来轻松解决。

ASCII 字符表为所有字符分配一个整数：

```
@ = 64 = 01**0**00000   ...  
A = 65 = 01**0**00001   ...   a =  97 = 01**1**00001
B = 66 = 01**0**00010   ...   b =  98 = 01**1**00010 
.. 
Z = 90 = 01**0**11010   ...   z = 122 = 01**1**11010 
```

大写和小写字符仅在该特定位上有所不同，`'a' - 32 == 'A'`或者反过来：`'B' + 32 == 'b'`or `'B' | 32 == 'b'`，其中`|`是按位或运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:25:52.413

这称为位掩码。这里检查器是位掩码。

第一个表达式`:if((checker&(1<<val))>0)`获取位，第二个表达式`checker|=(1<<val)`设置位。

左移运算符将 2^val 提高。所以你有类似 001000 的东西（对于 'd'）。

只要检查器的第 i 位和新的 val(001000) 均为 1，& 运算符就会返回 true。因此，您知道该字符是否已被覆盖。

该| 运算符只需将第 i 位设置为 1 。因此，如果在某些情况下检查器是 010000，现在它变为 011000。

# java - 套接字：无法连接到服务器或特定端口

> ID：13284184
> 
> 赞同：0
> 
> 时间：2012-11-08T07:10:04.003
> 
> 标签：java, swing, sockets, connect, echo-server

我正在尝试通过端口和主机名连接服务器。
我找到了一个程序，但是当我尝试运行时，它会显示以下异常

```
java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208)
at sample.Echoclient2.main(Echoclient2.java:31)
Couldn't get I/O for the connection to: 127.0.0.1
Java Result: 1 
```

这是我使用的代码。

```
public class Echoclient2 {
public static void main(String[] args) throws IOException {

    String serverHostname = new String ("127.0.0.1");

    if (args.length > 0)
       serverHostname = args[0];
    System.out.println ("Attemping to connect to host " +
            serverHostname + " on port 10008.");

    Socket echoSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;

    try {
        echoSocket = new Socket(serverHostname, 10008);
        System.out.println("server name"+Inet4Address.getByName(serverHostname));
        out = new PrintWriter(echoSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                                    echoSocket.getInputStream()));
         System.out.println("Connection accepted " +
            echoSocket.getInetAddress() + ":" +
            echoSocket.getPort());
    } catch (UnknownHostException e) {
        e.printStackTrace();
        System.err.println("Don't know about host: " + serverHostname);
        System.exit(1);
    } catch (IOException e) {
        e.printStackTrace();
        System.err.println("Couldn't get I/O for "
                           + "the connection to: " + serverHostname);
        System.exit(1);
    }

BufferedReader stdIn = new BufferedReader(
                               new InputStreamReader(System.in));
String userInput;

    System.out.println ("Type Message (\"Bye.\" to quit)");
while ((userInput = stdIn.readLine()) != null) 
       {
    out.println(userInput);

        // end loop
        if (userInput.equals("Bye."))
            break;

    System.out.println("echo: " + in.readLine());
   }

out.close();
in.close();
stdIn.close();
echoSocket.close();
} 
```

}

**我需要什么：**
1\. 我需要向服务器发送一些消息并希望得到服务器的响应。假设我发送“我是 stackoverflow 的用户”，那么服务器应该给出任何响应，如返回相同的字符串或转换为大写或其他内容。

**一些问题：**
1.我写客户端Java文件，但我是否需要写服务器Java文件。
2.我们可以使用ip和port发送请求吗？
3.我们可以使用主机名吗？
4\. 任何回显服务器名称？我需要向该服务器发送消息想知道响应。
5\. 我尝试了 server,java 和 client.java 然后我得到了结果？这个解决方案适合我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:15:30.843

`1\. I write client Java File but whether i need to write server java file.`

是的，您要么需要编写自己的服务器（如果服务器应该满足一些独特的要求），要么连接到现有的服务器。消息“连接被拒绝”表示在您尝试连接的端口上没有服务器正在运行。

`2\. Can we send request by using ip and port.`

是的。

`3\. Can we use host name.`

是的。您需要 IP 或主机名以及端口。

`4\. Any echo server name? i need to send message to this server want to know response.`

您可以在您的机器上设置一个回显服务器，这样您就可以首先专注于对您的客户端进行编码。在端口 7 处定义了一个[标准 Echo 服务器](http://en.wikipedia.org/wiki/Echo_Protocol)。设置取决于您的操作系统环境 - 在 Ubuntu Linux 上，我必须安装`xinetd`软件包并在`/etc/xinetd.d/echo`. 然后，您可以使用该`telnet`程序验证服务器是否正在运行：

```
andreas@ubuntu:~$ telnet localhost 7
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Hello
Hello 
```

使用 telnet 连接到任何端口也是验证服务器是否正在运行和可访问的常用技术。使用您问题中的示例，您可以检查`telnet 127.0.0.1 10008`服务器是否在您指定的端口上运行 -`connetion refused`如果没有可用的服务器，您将获得与 Java 程序相同的结果。

`5\. I try both server,java and client.java then i got result? is this solution for me.`

不确定您指的是哪个服务器和客户端。

* * *

一些额外的参考：

*   [所有关于套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)（还包括“编写客户端/服务器对”）
*   [启用所需的 xinetd 协议](http://homepage.smc.edu/morgan_david/cs75/labs/enable-xinetd-protocols.htm)
*   [Java 教程：Java 中的 Echo 客户端](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/networking/sockets/examples/EchoClient.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:15:18.417

您还必须在本地主机上运行您的服务器程序。由于 10008 端口没有在您的机器上损坏，您会收到此异常。

一些问题：

1.  我编写客户端 Java 文件，但是否需要编写服务器 Java 文件。

    您可以编写服务器程序，也可以连接到远程服务器。在这种情况下，您应该在远程服务器中同时拥有 ip 和运行端口。

2.  我们可以使用 ip 和端口发送请求吗？

    是的，您需要两者都发送消息。

3.  我们可以使用主机名吗？

    如果您的机器可以解析您的主机名，您就可以做到。否则你可以使用ip地址

4.  任何回声服务器名称？我需要向该服务器发送消息想知道响应。

    这个我不知道，需要在网上搜索。

5.  我尝试了 server、java 和 client.java 然后我得到了结果？这个解决方案适合我吗？

是的。

# iphone - 具有 UITextFieldDelegate 问题的模型视图控制器

> ID：13284190
> 
> 赞同：0
> 
> 时间：2012-11-08T07:10:37.430
> 
> 标签：iphone, objective-c, ios, xcode

我正在做一些非常简单的事情，我想我犯了一个小错误，我可能只是在这里没有看到。我在我的 MVC 之间进行了此操作，以简单地将名称从 传输`AddViewController`到，`MasterViewController`并将其添加到`MasterController`. `UITableView`虽然，我已经“NSLogged”了整个过程的每一步，而我基本上从中得到的是输入到“名称”中的文本`UITextField`并没有将自身传递到我的`NSString`方法中，`_aname`.

`MasterViewController`此外，在某一时刻，这是有效的，我在将名称设置为from时遇到了麻烦`AddViewController`。因此，如果有人也可以查看该部分并确保我已正确设置所有内容，我将不胜感激。

简而言之，它看起来像这样。

主视图控制器.h

```
@property (nonatomic, strong) AddViewController *addViewController; 
```

主视图控制器.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.Name setName:name];
    NSLog(@"%@", cell.textLabel.text);

    return cell; 
```

名称.h

```
- (NSString *)setName:(NSString *)name; 
```

名称.m

```
- (NSString *)setName:(NSString *)name
{
    [_nameStack addObject:name];

    NSLog(@"Name set to: %@", name);

    return name;
} 
```

添加视图控制器.m

```
- (void)viewDidLoad
{

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(finalizeAdditionOfName:)];

    NSUserDefaults *nameDefault = [NSUserDefaults standardUserDefaults];
    nameInput.text = [nameDefault objectForKey:@"Name"];
}

- (IBAction)finalizeAdditionOfName:(id)sender
{
    _name = [[Name alloc] init]
    nameInput.text = _name;
    [_name setName:_aname];
    NSLog(@"Name set to (AddViewController): %@", _aname);
    [self dismissViewControllerAnimated:YES completion:NULL];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([indexPath section] == 0) { // Section 1
        if ([indexPath row] == 0) {
            nameInput.delegate = self;
            [nameInput setEnabled: YES];
            [cell addSubview:nameInput];
            [nameInput becomeFirstResponder]
            nameInput.text = _aname;
            NSUserDefaults *nameDefault = [NSUserDefaults standardUserDefaults];
            [nameDefault setObject:_aname forKey:@"Name"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:00:56.937

如果我的评论没有帮助，我制作了一个示例项目，我认为该项目显示了您如何将数据从文本字段获取到表格视图。如果您对此有任何疑问，请告诉我：

[https://github.com/MaxGabriel/TextField-TableView-Example](https://github.com/MaxGabriel/TextField-TableView-Example)

# maven - Maven站点：删除

> ID：13284194
> 
> 赞同：0
> 
> 时间：2012-11-08T07:11:05.433
> 
> 标签：maven, jenkins

我已经部署了该站点（Jenkins 上的站点部署），并且我已经在一个文件夹中生成了一个站点，但是现在我想清理该文件夹（删除该站点）。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:33:14.563

只需进入此服务器并删除您部署站点的文件夹。

# objective-c - UIPasteboard: image saving issue

> ID：13284202
> 
> 赞同：0
> 
> 时间：2012-11-08T07:11:31.343
> 
> 标签：objective-c, ios5, uiimage, ios6, uipasteboard

I'v thought that dealing with `UIPasteboard` is easy but it turned out to be a time-consuming issue...

I want to store an `UIImage` in `UIPasteboard` and then paste this image in `iMessage`, `WhatsApp`, `Gmail`... and others.

That's my method where I use `UIPasteboard`

```
- (void) postClipboard
{
    if ([[modelView currentView] isImage])
    {
        UIImage *image = [self readyImageLandscape:orientationLandscape];
        [[UIPasteboard generalPasteboard] setImage:image];
    }
} 
```

It works on `iPhone 3GS 5.1`. I've tested it on `Gmail` and `WhatsApp`

Then I modified the method to

```
- (void) postClipboard
{
    if ([[modelView currentView] isImage])
    {
        UIImage *image = [self readyImageLandscape:orientationLandscape];
        [[UIPasteboard generalPasteboard] setImage:image];
        [[UIPasteboard generalPasteboard] setPersistent:YES];
    }
} 
```

Still works on `iPhone 3GS 5.1`.

But my employer says that it doesn't work on `iPhone 4S 6.0` neither in `WhatsApp` nor in any other application.

Am I doing all wrong or there should be another approach to make it work on `iPhone 4S 6.0`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:07:44.940

See this answer: [https://stackoverflow.com/a/12613632/830946](https://stackoverflow.com/a/12613632/830946)

Looks like that code will work with a single image, but not with multiple.

# eclipse - Android SDK 未在 Eclipse 中显示

> ID：13284203
> 
> 赞同：1
> 
> 时间：2012-11-08T07:11:34.323
> 
> 标签：eclipse, android-sdk-2.3

我也安装了 ADT 插件，但是在创建新项目时它不显示 android 项目。我也尝试重新安装 ADT 插件，但它说它们已经安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:02:53.500

您是否使用 SDK Manager 下载了您需要/想要的 API？

# c++ - 与包含的类型相比，C++ 中的数组如何对齐？

> ID：13284208
> 
> 赞同：24
> 
> 时间：2012-11-08T07:11:44.543
> 
> 标签：c++, arrays

假设我有某种类型`T`必须是`N`字节对齐的。现在我声明一个类型数组`T`：

```
T array[size]; 
```

数组是否具有与类型相同的对齐要求`T`或是否有任何其他对齐要求？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T07:45:04.357

是的，对齐要求必须相同。显然，一个数组`T`必须至少与单个数组一样严格对齐，`T`否则它的第一个成员将无法正确对齐。一个数组不能比它的元素类型更严格地对齐的事实来自标准的第 8.3.4 节，它说数组是*连续*分配的元素子对象。考虑这个数组数组：

```
T a[2][size]; 
```

无论 的值是`size`多少，两个数组之间都不能有“额外的”填充`a[0]`，`a[1]`否则这违反了*连续分配*的要求。

等效地，我们知道`(char*)&a[1] == (char*)&a[0] + sizeof(a[0])`和`sizeof(a[0]) == sizeof(T[size]) == size * sizeof(T)`。由于这适用于任何`size`情况，因此必须可以`T`在任何地址放置一个数组，该地址为单个`T`对象适当对齐（给定足够的地址空间）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T07:17:43.620

我相信，数组的对齐要求将与数组元素的对齐要求相同。

显然，数组的开头必须至少与其第一个元素要求的一样严格对齐，因此它的对齐要求不能不那么严格。

数组的起始地址加上每个元素的大小必须使第二个元素充分对齐。这限制了元素类型的大小，我相信这意味着可以在结构的末尾引入填充以保持数组对齐，即使您从未在数组中使用该结构。但这并不意味着需要更严格的对齐。

通过归纳，如果前两个元素都可以，则后续元素也可以，因此为数组提供与其元素相同的对齐要求应该没问题。

不过，从规范中引用会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:25:37.547

我相信规则是相同的，但解释可能会令人困惑。

我相信由于数组的每个元素都将具有相同的大小，因此只有对齐第一个元素会自动对齐其余元素，因此元素之间永远不会有任何填充。

这在简单数组的情况下可能是正确的，但对于复杂的场景则不然。

数组的步幅可以大于元素大小，即每个单独的元素之间可能存在焊盘。

下面是一个很好的例子

```
struct ThreeBytesWide {
    char a[3];
};

struct ThreeBytesWide myArray[100]; 
```

[来源 - 跨步维基百科](http://en.wikipedia.org/wiki/Stride_of_an_array)

ThreeBytesWide 数组的每个元素都可以对齐到四字节边界

**编辑：**正如评论中所阐述的，提到在单个元素之间有填充是当元素本身是 3 个字节并与 4 个字节边界对齐时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:34:04.597

对象数组必须是连续的，因此对象之间永远不会有填充，尽管可以将填充添加到对象的末尾（产生几乎相同的效果）。 [C++ 数据成员对齐和数组打包](https://stackoverflow.com/questions/1676385/c-data-member-alignment-and-array-packing)

```
#include <iostream>

__declspec(align(32)) 
struct Str1
{
   int a;
   char c;
}; 

template<typename T>
struct size
{
    T arr[10];
};

int main()
{
    size<Str1> b1;

    std::cout << sizeof(Str1) << std::endl; //  prints 32
    std::cout << sizeof(b1) << std::endl;   //  prints 320

    std::cin.ignore();
    return 0;
} 
```

参考：

1.  [C++ 中的数据对齐、标准和可移植性](https://stackoverflow.com/questions/7054176/data-alignment-in-c-standard-and-portability)
2.  [http://msdn.microsoft.com/en-us/library/83ythb65.aspx](http://msdn.microsoft.com/en-us/library/83ythb65.aspx)

# iphone - 我如何用 AVPlayer 玩 pcm

> ID：13284209
> 
> 赞同：2
> 
> 时间：2012-11-08T07:11:51.437
> 
> 标签：iphone, objective-c, ios, avplayer, pcm

我正在使用 AVPlayer 从服务器播放本地 .mp3 文件和音频流。我也想播放本地 .pcm 文件。

```
NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory
                                                   , NSUserDomainMask 
                                                   , YES); 
NSString * voiceFile = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"OutPut.pcm"]; 
```

但它没有用。我收到未知错误。

似乎 AudioQueue 可以正确播放 .pcm。

但是有没有一种示例方法可以让 AVPlayer 像 .mp3 一样直接播放 .pcm？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:25:44.653

文件扩展名或 PCM 数据均未`.pcm`指定可读格式。播放器无法识别任意数据流。它当然能够读取包含 PCM 数据的文件格式，但是这种 PCM 表示缺少典型的音频文件格式表示的几件事：

*   采样率
*   样本量
*   样本格式
*   通道数

等等。

您应该将 PCM 数据保存为播放器支持的音频文件格式（例如 WAV 文件）。

如果您更喜欢简单地流式传输 PCM 音频信息并且您知道流格式，则可以使用 AudioQueue 解决该问题。

# javascript - 如何将匿名函数内的变量导出到 JavaScript 中的全局范围？

> ID：13284211
> 
> 赞同：4
> 
> 时间：2012-11-08T07:11:56.290
> 
> 标签：javascript, anonymous-function

我有这个代码

```
((function(){
var a=2;
var b=3;
var c=b+a;
alert(c);//alert 5
})());
alert(c); //no alert 
```

我的问题是我可以通过哪些方式将 c 导出到全局范围？如果你能给出所有的方法。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:13:52.747

```
var c = ((function(){
    var a=2;
    var b=3;
    var c=b+a;
    alert(c);//alert 5
    return c;
})());
alert(c); 
```

有很多方法可以做到这一点。您也可以隐式或显式地对全局进行属性分配：

```
window.c = b+a;
this.c = b+a;
c = b+a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:18:47.160

这很简单！JavaScript 中的所有全局变量实际上都是“窗口”对象的子属性，因此在全局范围内声明一个变量会使该变量成为窗口对象的属性。从您的匿名函数中，您只需执行以下操作即可将“c”或其他变量放入全局范围...

```
window.c=b+a;
alert(c); // Same! 
```

享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:17:35.773

```
var c=0;
((function(){
    var a=2;
    var b=3;
    c=b+a;
    alert(c);//alert 5
})());

alert(c); //no alert 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T07:34:06.303

```
(function (window) {
    // this is local
    var c = 'local';

  // export to the global scope
    window.c = c || '';
})(window); // Pass in a reference to the global window object

console.log(c) // => 'local'
```

您还可以传入一些其他对象，并且不仅限于一个。[这](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)是一个很好的解释它是如何工作的

# apache-flex - 在 linux 机器的 flex Web 应用程序中插入特殊字符

> ID：13284214
> 
> 赞同：2
> 
> 时间：2012-11-08T07:12:06.963
> 
> 标签：apache-flex, flex4.5

我们正在 linux 机器上实现 adobe flex 应用程序。我们需要使用击键，例如，ALT+0151 将特殊字符插入到应用程序中，就像在 Windows 中一样。尝试了 CTRL+SHIFT+U+Unicode，它可以工作，但它会干扰我们为应用程序添加的自定义键盘快捷键。还有其他方法可以实现吗？

# android - 安卓过渡

> ID：13284221
> 
> 赞同：3
> 
> 时间：2012-11-08T07:12:43.267
> 
> 标签：android, android-animation, android-image

我正在使用以下代码为我的 SplashScreen 设置 2 个图像之间的动画：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash);

     // Show A Transitions for Splash image here.
    TransitionDrawable transition = (TransitionDrawable) getResources()
            .getDrawable(R.drawable.splash_animation);

    //Set interval for the transition between two image.
    transition.startTransition(5000);

    //Fetch imageView from your layout and apply transition on the same.

    ImageView imageView= (ImageView) findViewById(R.id.splash_image);
    imageView.setImageDrawable(transition);
} 
```

我的 splash.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:scaleType="fitXY"
        android:id="@+id/splash_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/img_1" />
</RelativeLayout> 
```

我的 splash_animation.xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<transition xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/img_1"></item>
  <item android:drawable="@drawable/img_2"></item>
</transition> 
```

过渡工作正常，但我想知道是否也可以为 3 个图像创建它。我尝试在 splash_animation 中添加第三张图像，但仅对第一张图像进行过渡。我怎样才能为我想要的尽可能多的图像实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:26:49.153

把数组放在 `TransitionDrawable`.

```
List<TransitionDrawable>array = new ArrayList<TransitionDrawable>();

TransitionDrawable transition1 = (TransitionDrawable) getResources()
            .getDrawable(R.drawable.splash_animation1); // first,second image

TransitionDrawable transition2 = (TransitionDrawable) getResources()
            .getDrawable(R.drawable.splash_animation2); // third,fourth image

array.add(transition1);
array.add(transition2);
// call array
for(TransitionDrawable transition :array){
transition.start(5000);
}
 ImageView imageView= (ImageView) findViewById(R.id.splash_image);
 imageView.setImageDrawable(transition[0]); // if transition[0] is finished  setImageDrawable(transition[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-07T23:51:55.983

您可以对任意数量的图像执行此操作。

您需要使用数组中的当前项和下一项重新创建 TransitionDrawable 并更新它。

[在https://stackoverflow.com/a/54584103/114549](https://stackoverflow.com/a/54584103/114549)上查看我的答案

# sql - 数据库函数 VS 案例语句

> ID：13284222
> 
> 赞同：10
> 
> 时间：2012-11-08T07:12:44.523
> 
> 标签：sql, sql-server, tsql, sql-function

昨天我们遇到了一个场景，必须获取 a 的类型，`db field`在此基础上我们必须编写该字段的描述。喜欢

```
Select ( Case DB_Type When 'I' Then 'Intermediate'
                      When 'P' Then 'Pending'
                      Else 'Basic'
         End)
From DB_table 
```

我建议编写一个 db 函数而不是这个 case 语句，因为这样更可重用。喜欢

```
Select dbo.GetTypeName(DB_Type) 
from DB_table 
```

有趣的是，我们的一位开发人员说使用数据库功能**效率低下**，因为`database functions`它**比**`Case statement`. 我在互联网上搜索以找到在效率方面更好的答案，但不幸的是我没有找到任何可以被认为是满意的答案。请用您的想法启发我，哪种方法更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T07:25:35.747

```
UDF function is always slower than case statements 
```

请参考文章

[http://blogs.msdn.com/b/sqlserverfaq/archive/2009/10/06/performance-benefits-of-using-expression-over-user-defined-functions.aspx](http://blogs.msdn.com/b/sqlserverfaq/archive/2009/10/06/performance-benefits-of-using-expression-over-user-defined-functions.aspx)

以下文章建议您何时使用 UDF

[http://www.sql-server-performance.com/2005/sql-server-udfs/](http://www.sql-server-performance.com/2005/sql-server-udfs/)

概括 ：

使用用户定义的函数时会付出很大的性能损失。当查询将 UDF 应用于大量行（通常为 1000 或更多）时，这种损失表现为查询执行时间很差。由于 SQL Server 数据库引擎必须创建自己的内部游标类处理，因此会产生惩罚。它必须在每一行上调用每个 UDF。如果在 WHERE 子句中使用 UDF，这可能会作为过滤行的一部分发生。如果在选择列表中使用了 UDF，则在创建查询结果以传递到查询处理的下一个阶段时会发生这种情况。最慢的是 SQL Server 的逐行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:33:08.390

使用标量函数（返回一个值的函数）时，函数的内容将每行执行一次，但 case 语句将在整个集合中执行。

通过对整个集合进行操作，您可以让服务器更有效地优化您的查询。

所以理论认为，相同的查询针对大型数据集双向运行，那么函数应该更慢。但是，在对数据进行操作时，差异可能微不足道，因此您应该尝试两种方法并测试它们，以确定任何性能折衷是否值得增加函数的效用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:19:50.137

你的devolper是对的。函数会减慢您的查询速度。

[https://sqlserverfast.com/?s=user+defined+ugly](https://sqlserverfast.com/?s=user+defined+ugly)

```
Calling functionsis like:
wrap parts into paper
put it into a bag
carry it to the mechanics
let him unwrap, do something, wrapt then result
carry it back
use it 
```

# c - AMD xop 检查支持

> ID：13284225
> 
> 赞同：0
> 
> 时间：2012-11-08T07:12:52.703
> 
> 标签：c, gcc, amd-processor, xop

我有下一个问题：我使用一些说明
进行了一些与 xop 检查相关的测试。 而且我必须只在处理器上运行这个测试。 如何在编译时检查我的处理器是否支持指令？ `Bulldozer (xop)`
`Bulldozer`
`xop`

*语言：* `C`，*操作系统：* `Linux`；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:28:47.950

您可以编写一个检查 CPUID 的程序，并在编译时使用该程序的输出：
`gcc $(cpuid_test) my_prog.c`

cpuid_test 返回`'-march=bdver1'`或`-DXOP_SUPPORT=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:22:25.940

如果使用源编译`-march=bdver1`（其中启用 XOP 支持），则预处理器宏`__XOP__`将定义为 1。

您可以在编译时测试 XOP

```
#ifdef __XOP__
     ...XOP code path here...
#else
     ...non XOP code here...
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:17:14.220

您无法在编译时进行测试，但您可以使用以下命令为 AMD Bulldozer 进行编译：

> $ gcc -march=bdver1 -mtune=bdver1 ...

见： http: [//gcc.gnu.org/gcc-4.6/changes.html](http://gcc.gnu.org/gcc-4.6/changes.html)

如果您的构建机器是您的目标机器，请查看`/proc/cpuinfo`.

# java - 如何将迭代的字符串值传递给接受不同类型参数的函数

> ID：13284227
> 
> 赞同：-4
> 
> 时间：2012-11-08T07:12:56.107
> 
> 标签：java, multithreading, concurrency, iterator

有人可以解释/告诉我这个的解决方案....这里的代码示例：

```
public static void main(String[] args) throws InterruptedException, ExecutionException {
      queue = new Queue<String>();
      set = new SET<String>();
      ExecutorService executor = Executors.newFixedThreadPool(NO_OF_THREADS);                       
      List<Future<List<String>>> list = new ArrayList<Future<List<String>>>();  
      System.out.println("enter the url");
      Scanner sc=new Scanner(System.in);
      String input=sc.next();
      l.add(input);
      queue.enqueue(input);
      Callable<List<String>> worker = new SimpleCrawler(input);       
      Future<List<String>> submit = executor.submit(worker);        
      list.add(submit);
      ArrayList<?> l1=(ArrayList<?>) submit.get();
      Iterator<?> itr=l1.iterator();

      while(itr.hasNext())
         {
             System.out.println(itr.next());        
         } 
```

我怎样才能再次将迭代字符串传递给函数提交（...）。我想将第一个迭代字符串传递给函数，并将下一个迭代值传递给该函数等等......可以解释一下这个......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:45:13.837

从您的问题中并不清楚您想要实现什么，但是为什么不`SimpleCrawler`使用迭代字符串创建一个新字符串并将其传递给同一个执行程序，例如

```
while(itr.hasNext()) {
  Callable<List<String>> nextWorker = new SimpleCrawler(itr.next().toString())
  Future<List<String>> nextSubmit = executor.submit(nextWorker)
  ...
} 
```

# jquery - 是否可以在 phonegap 中使用 jquery 为 windows phone 加载 .load() 函数

> ID：13284228
> 
> 赞同：0
> 
> 时间：2012-11-08T07:12:56.543
> 
> 标签：jquery, html, windows-phone-7, cordova

请给出任何在 phonegap 中使用 jquery for windows phone 加载函数的示例。

我们可以使用

```
("#home").load("new.html");

In windows phone. I tried like this but it is not working. Please suggest me any solution for this.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:37:45.740

检查加载功能是否正常工作

```
$("#home").load("new.html", function(){
    alert("Done!");
}); 
```

# jquery - window.location.href 在我的代码中不起作用，但 window.location.replace 正在工作

> ID：13284234
> 
> 赞同：-1
> 
> 时间：2012-11-08T07:13:39.280
> 
> 标签：jquery, window.location

在我的代码中，当登录正确时，我无法重定向到新页面，而不是“window.location.href”，window.location.replace 正在工作。如何使此代码工作

```
$(document).ready(function(){
    $('#login').click(function(){

        $('.errordisp').empty();

        var spgremail=$('#mailid').val();
        var spgrpwd=$('#pwd').val();
        if(spgremail=='' || spgrpwd==''){

            var txt=$('#errormsg8').text();
            $('.errordisp').append(txt);//removeClass('hidden').addClass('errordisp');

        }
        else
        {
            $.post("in.php",{email: spgremail,pass: spgrpwd},function(data) {

                if(data)
                {

                    window.location.href("http://abcd.com/discover.php");

                }
                else
                {
                     txt=$('#errormsg3').text();
                    $('.errordisp').append(txt);
                }

            });

        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:16:02.497

该`window.location.href`属性不是函数，您必须将 url 分配给它

```
window.location.href = "http://abcd.com/discover.php"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:16:15.950

更改您的代码

这个

```
window.location.href("http://abcd.com/discover.php"); 
```

至

```
window.location.href="http://abcd.com/discover.php"; 
```

window.location.href 不是一种方法，它是一个属性，可以告诉您浏览器的当前 URL 位置

# iphone - 计算字符串结束的 X 位置

> ID：13284237
> 
> 赞同：0
> 
> 时间：2012-11-08T07:13:50.543
> 
> 标签：iphone, core-graphics, cgcontext

我有一个带有一些字体大小的字符串，并使用 drawInRect 方法在 UIView 上添加了该文本。我可以通过计算字符串的高度来计算字符串的大约 Y 位置，但我也想知道 X 位置。

我可以计算我的字符串结束的字符串的 x 位置吗？

字符串长度和字体大小可能会有所不同。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:26:38.163

也许在绘制字符串后调用[`CGContextGetTextPosition`](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/uid/TP30000950-CH1g-F17031)会给你你需要的坐标。

有关更多信息，请阅读[*Quartz 2D 编程指南*](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_text/dq_text.html#//apple_ref/doc/uid/TP30001066-CH213-TPXREF101)[的“文本”章节](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_text/dq_text.html#//apple_ref/doc/uid/TP30001066-CH213-TPXREF101)*。*

# c# - 在 jqgrid 中从 C# 设置下拉选项

> ID：13284247
> 
> 赞同：0
> 
> 时间：2012-11-08T07:14:26.243
> 
> 标签：c#, jquery, jqgrid, jqgrid-asp.net

我正在使用 C# 在服务器端生成列模型并将 jSON 传递给网格。现在我想要一列提供下拉功能。但它没有成功，这是我到目前为止所拥有的：

```
StringBuilder deptDetails = new StringBuilder();
foreach (Department dept in departmentList)
{
    deptDetails.Append(dept.DepartmentID);
    deptDetails.Append(":'");
    deptDetails.Append(":'" + dept.DepartmentName + "',");
    deptDetails.Append(',');
}
deptDetails.Length -= 1;

colModel[i] = new ColumnMod
{
    name = selectedItems[i].ToString(),
    index = selectedItems[i].ToString(),
    width = 100,
    editable = true,
    edittype = "select",
    align = "left",
    editoptions="{value:{" + deptDetails + "}}"
 }; 
```

这是我的列模型类：

```
public class ColumnMod
{
    public string name { get; set; }
    public string index { get; set; }
    //public Boolean key { get; set; }
    public Int32 width { get; set; }
    public Boolean editable { get; set; }
    public string edittype { get; set; }
    //public Boolean sortable { get; set; }
    public string align { get; set; }
    //public Boolean hidden { get; set; }
    public string editoptions { get; set; }
} 
```

编辑：

这是我的 JS 代码：

```
$grid.jqGrid({
    colNames: selectedItems,
    colModel: columnSelected,
    sortname: selectedValues[0],
    sortorder: "asc",
    editurl: 'url',
    cellsubmit: 'clientArray',
    cellEdit: true,
    rowNum: 5000,
    rownumbers: true,
    rownumWidth: 30,
    autowidth: true,
    shrinkToFit: true,
    gridview: true,
    pager: '#gridPager',
    viewrecords: true,
    recordtext: "Total Rows: {2}",
    jsonReader: {
        root: "rows",
        page: "page",
        total: "totalpages",
        records: "totalrecords",
        cell: "cell",
        id: selectedValues[0], //index of the column with the PK in it 
        userdata: "userdata",
        repeatitems: true
    },
    prmNames: {
        rows: "numRows",
        page: "page",
        sort: "sortField",
        order: "sortOrder"
    },
    datatype: function (postdata) {
        if (lastSortField != postdata.sortField || lastSortOrder != postdata.sortOrder)
         {   if (!$('#btnValidate').is(':disabled')) {
                lastSortField = postdata.sortField;
                lastSortOrder = postdata.sortOrder;
            }
        }
    } 
```

这就是我在 columnModel 中获得价值的方式：

```
function getSelectedColumnsJSON(selectedValues) {
try {
    $.ajax({
        type: "POST",
        url: window.location.protocol + '//' + window.location.host + window.location.pathname + "/getSelectedColumnsJSON",
        data: $.toJSON({
            selectedItems: selectedValues
        }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (data, status) {
            if (data.d)
                columnSelected = data.d;
        },
        error: function (error) {
            ShowMessage(error.responseText);
        }
    });
}
catch (ex) {
    ShowMessage(ex.message);
} 
```

}

我在列中得到下拉选择，但它是空的，我试图按照**[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules)**解释的格式..有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:49:08.053

我不确定我是否正确理解了您的问题，因为您没有发布用于填充网格*的 JSON 数据。*您是否在输入数据中发布`DepartmentID`或值？`DepartmentName`可能您还需要使用[formatter:'select'](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#formatter_type_select)来解决您现有的问题？

我不了解您需要实现的完整场景，但通常最好使用`dataUrl`而不是使用[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editoptions)`value`的属性。可能您真正必须使用属性的唯一情况是使用. 仅当从服务器返回的数据包含 ids 而不是字符串数据时，才不能使用该选项。`value``formatter:'select'``dataUrl`

# java - Android：Java中Linearlayout之间的间距

> ID：13284251
> 
> 赞同：0
> 
> 时间：2012-11-08T07:14:47.927
> 
> 标签：java, android, android-layout

我试图以编程方式在线性布局中给出视图之间的间距，我尝试过 `layout.setPadding(0, 5, 0, 5);`但没有任何效果..我还试图在一个编辑文本字段中放置更多空间..试过这个

```
comment.setLayoutParams(newandroid.view.ViewGroup.LayoutParams(450,100));

//comment.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

这是我的代码： http: [//pastebin.com/s46qQUNV](http://pastebin.com/s46qQUNV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:19:35.660

为每个 edittextview 提供填充。

```
 address.setpadding(0,5,0,5) ;
    addressCity.setpadding(0,5,0,5) ;
    addressState.setpadding(0,5,0,5) ; 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:19:16.927

尝试使用 LayoutParams ：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams
                     (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 1f);
params.setMargins(10, 0, 10, 0);
layout.setLayoutParams(params); 
```

# c# - C# 如果字符串包含超过 1 个值

> ID：13284259
> 
> 赞同：5
> 
> 时间：2012-11-08T07:15:40.313
> 
> 标签：c#, string, if-statement, comparison

早上好，

在一个`if`语句中，如果我们要检查一个字符串是否包含一个值，我们有：

```
if (string.Contains("Value1"))    
{    
} 
```

我们如何在不写整个语句的情况下让字符串与 if 语句中的更多值进行比较？例如为了避免下面的语句

```
if ((string.Contains("Value1") && (string.Contains("Value2")) && (string.Contains("Value3")))    
{    
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T07:17:44.667

因此，基本上，您想检查您的*所有*值是否都包含在 string 中。幸运的是（在 LINQ 的帮助下），这几乎可以直接翻译成 C#：

```
var values = new String[] {"Value1", "Value2", "Value3"};

if (values.All(v => myString.Contains(v))) {
    ...
} 
```

同样，如果您想检查字符串中是否包含*任何*值，您可以替换`All`为`Any`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T07:19:57.950

好吧，你可以使用 LINQ：

```
string[] requiredContents = { "Foo", "Bar", "Baz" };

if (requiredContents.All(x => text.Contains(x))
{
    ...
} 
```

请注意，就像短路`&&`运算符[`All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)一样，一旦找到不满足条件的值，它将立即*停止*。（如果你想[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)在其他地方以类似的方式使用，一旦找到满足条件的值就会停止。*）*

不过，我不会只为一个相当小的数字而烦恼。没有多余的括号，它真的没那么糟糕：

```
if (text.Contains("foo") && text.Contains("bar") && text.Contains("Baz"))
{
} 
```

如果确实有很多值（我可能会在大约 5 处画线）*，或者**如果*一组值作为参数传入，或者以其他方式变化，我只会开始使用更通用的形式.

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:23:20.183

这是最好的解决方案吗？可能不是。它是否可读和可扩展？是的。

```
var matches = {"string1", "string2", "string3","string-n"};
var i = 0;
foreach(string s in matches)
{
    if(mystring.Contains(s))
    {
        i++;
    }
}
if(i == matches.Length)
{
    //string contains all matches.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:29:54.063

```
if(stringArray.Any(s => stringToCheck.Contains(s))) 
```

如果要确保它包含所有子字符串，请更改`Any`为`All`：

```
if(stringArray.All(s => stringToCheck.Contains(s))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T07:19:22.837

由于您需要“您的”字符串来包含所有值：

```
var values = new String[] {"Value1", "Value2", "Value3"};
var s = yourString;

if (values.Count(v => s.Contains(v)) == values.Length) {
    ...
} 
```*

# iphone - 在不使用核心绘图库的情况下绘制折线图

> ID：13284266
> 
> 赞同：1
> 
> 时间：2012-11-08T07:15:59.017
> 
> 标签：iphone, objective-c, ios, xcode, charts

是否有任何其他图书馆可以通过任何示例在 iphone 中绘制图表。因为我发现 Core Plot 太复杂了，我也从 Github 下载了一些控件，但是它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:34:13.990

为什么不使用 Core Graphics 和quartz core 创建您自己的API？

除核心图之外的一些图表库是：

1> [http://sebkade.wordpress.com/2010/05/06/basic-graph-class-for-iphone/](http://sebkade.wordpress.com/2010/05/06/basic-graph-class-for-iphone/)

2> [http://www.vvi.com/apps/vvidget](http://www.vvi.com/apps/vvidget)

3> [http://www.rgraph.net/](http://www.rgraph.net/)

4> [http://www.keepedge.com/products/iphone_charting/](http://www.keepedge.com/products/iphone_charting/)

5> [http://www.shinobicontrols.com/](http://www.shinobicontrols.com/)

使用核心动画、核心图形和石英核心来创建自己的图形仍然更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:22:37.213

您可以在这里参考很好的示例和库： http: [//maniacdev.com/2011/08/open-source-plotting-libraries-for-easy-charts-without-the-cost/](http://maniacdev.com/2011/08/open-source-plotting-libraries-for-easy-charts-without-the-cost/)

# apache - 从子域重定向到查询字符串

> ID：13284271
> 
> 赞同：0
> 
> 时间：2012-11-08T07:16:08.300
> 
> 标签：apache, url, mod-rewrite, url-rewriting

我的网站主页中有一个选项列表 - 例如[http://example.com](http://example.com)。当用户单击 option1 时，我想将 URL 显示为[http://option1.example.com](http://option1.example.com)而不是[http://example.com/xyz.php?opt=option1](http://example.com/xyz.php?opt=option1)。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:59:48.890

您需要为每个选项创建一个子域，然后在该子域中提供所需的代码。您的设置方式因托管服务提供商而异。

您真的需要每个选项一个单独的子域吗？

你能用`http://abc.ca/Option1/`还是`http://abc.ca/Options/1/`代替？

如果没有，您将需要联系您的托管服务提供商，了解如何创建子域 option1.abc.ca 等以及将您的 php 页面放在哪里。

如果您使用 apache 托管自己的服务器，我认为可以使用 * dns 条目来接受所有子域，然后您可以使用 $_SERVER 变量来获取所请求的域。

# java - 为什么 FacesServlet 找不到 .xhtml Facelet？

> ID：13284275
> 
> 赞同：1
> 
> 时间：2012-11-08T07:16:25.450
> 
> 标签：java, jsf, jakarta-ee, servlets, myfaces

我已经使用 JBoss Tools 从我的 Eclipse 创建了一个 JSF 项目。现在我有了结构：

```
MyProjectFolder
 ⌊ WebContent
   ⌊ WEB-INF
   |  ⌊ lib
   |  ⌊ faces-config.xml
   |  ⌊ web.xml
   ⌊ META-INF
   ⌊ index.xhtml 
```

我的web.xml 将以下扩展映射到 FacesServlet `/faces/*`：`*.jsf``*.faces`

当我现在尝试访问`/faces/index.xhtml`时，`index.jsf`我`index.faces`收到 404 not found 错误。只有当我直接访问 index.xhtml 时，我才会得到一个页面但没有 jsf-content （这对我来说很清楚）。

所以我现在的问题是 FacesServlet 如何从我的 URL 参数中解析 Faclet 文件名和路径？以及如何确保无法直接访问 index.xhtml？

PS 我知道为 *.xhtml 添加 servlet 映射的解决方案，但我认为应该有替代方案。

问候！

# ruby-on-rails - 停止 rails 控制台在循环结束时打印出对象

> ID：13284277
> 
> 赞同：90
> 
> 时间：2012-11-08T07:16:31.197
> 
> 标签：ruby-on-rails, ruby, console, irb

例如，如果我遍历给定模型的所有实例并从每个实例中输出一些东西，最后，irb 仍将打印整个对象。

如果对象最终占用了数百行，那么在我看到我真正要找的东西之前还有很长的路要走。有没有办法在 Rails 控制台中禁用它？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-08T08:47:36.813

如果您一般不想禁用回显，也可以在一个命令行中调用多个表达式。只会显示最后一个表达式的输出。

```
big_result(input); 0 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-11-08T07:20:43.583

调用`conf.echo = false`它不会打印返回值。这适用于任何 irb 会话，而不仅仅是 Rails 控制台。

如果您想使其永久化，请将其添加到您的 irb 配置中。

```
echo 'IRB.conf[:ECHO] = false' >> $HOME/.irbrc 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-11-27T11:27:56.690

要暂时停止控制台打印返回值，您可以`nil`在循环或函数结束时发出一条语句，但在按下返回之前。

```
record.each do |r|
  puts r.properties
end; nil 
```

或者它也可以是一个数字，如果你想减少打字。但是在我想不到的情况下，它可能会令人困惑。

```
record.each do |r|
  puts r.properties
end; 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-21T14:29:40.757

这让我很沮丧，因为我使用的是`pry-rails`gem，有些解决方案对我不起作用。

所以这分两步起作用：

1.  只需添加`;`到最后一个命令的末尾就足以使打印输出静音。
2.  它可能仍会打印已执行的 sql。所以为了让它沉默，用它包围它

```
ActiveRecord::Base.logger.silence do
  # code here
end 
```

### 例子

如果你想运行这个

```
User.all do |user|
  puts user.first_name
end 
```

那么这将确保没有其他内容打印到屏幕上：

```
ActiveRecord::Base.logger.silence do
  User.all do |user|
    puts user.first_name
  end
end; 
```

（不要忘记`;`最后的）

# asp.net - 以编程方式如何在 asp.net 中使用 C# 读取 CCD 和 CCR xml 内容

> ID：13284282
> 
> 赞同：0
> 
> 时间：2012-11-08T07:16:51.953
> 
> 标签：asp.net, c#-4.0

> 它是在我的 asp.net 项目中使用的 CCD xml。但我有问题，如何使用 C# 代码读取它的 Xml 内容。所以请治疗我。我放了这个 CCD xml。

[http://www.md-it.com/sites/default/files/CCD.xml](http://www.md-it.com/sites/default/files/CCD.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:29:59.873

请使用以下 URL 阅读 CCD 和 CCR XML 内容：

[http://medbi.blogspot.in/2008/02/creating-c-bindings-for-ccr-and-ccd.html](http://medbi.blogspot.in/2008/02/creating-c-bindings-for-ccr-and-ccd.html)

# python - 在python中替换四个字母的单词

> ID：13284291
> 
> 赞同：-2
> 
> 时间：2012-11-08T07:17:15.053
> 
> 标签：python, replace, words

我正在尝试编写一个程序来打开一个文本文档并用*** * 替换所有四个字母的单词。我已经在这个程序上玩了好几个小时了。我似乎无处可去。我希望有人能够帮助我解决这个问题。这是我到目前为止所拥有的。非常感谢您的帮助！

```
def censor():
    filename = input("Enter name of file: ")
    file = open(filename, 'r')
    file1 = open(filename, 'w')
    for element in file:
        words = element.split()
        if len(words) == 4:
            file1 = element.replace(words, "xxxx")
            alist.append(bob)
        print (file)
    file.close() 
```

这是修改后的版本，我不知道这是否更好

```
def censor():
    filename = input("Enter name of file: ")
    file = open(filename, 'r')
    file1 = open(filename, 'w')
    i = 0
    for element in file:
        words = element.split()
        for i in range(len(words)):
            if len(words[i]) == 4:
                file1 = element.replace(i, "xxxx")
                i = i+1
    file.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:22:58.703

```
for element in file:
    words = element.split()
    for word in words:
        if len(word) == 4:
            etc etc 
```

原因如下：

假设文件中的第一行是“你好，我的名字是 john”，那么对于循环的第一次迭代：`element = 'hello, my name is john'` 和`words = ['hello,','my','name','is','john']`

您需要检查每个单词里面的内容`for word in words`

另外值得注意的是，在您当前的方法中，您没有注意标点符号。注意`words`上面的第一个词...

为了摆脱标点符号，不如说：

```
import string

blah blah blah ...
for word in words:
    cleaned_word = word.strip(string.punctuation)
    if len(cleaned_word) == 4:
       etc etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:19:03.117

这里有一个提示：`len(words)`返回当前行的单词数，而不是任何特定单词的长度。您需要添加代码来查看行中的每个单词并决定是否需要替换它。

此外，如果文件比简单的单词列表更复杂（例如，如果它包含需要保留的标点符号），则可能值得使用正则表达式来完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:22:25.603

它可以是这样的：

```
def censor():
    filename = input("Enter name of file: ")
    with open(filename, 'r') as f:
        lines = f.readlines()

    newLines = []
    for line in lines:
        words = line.split()
        for i, word in enumerate(words):
            if len(word) == 4:
                words[i] == '**'
        newLines.append(' '.join(words))

    with open(filename, 'w') as f:
        for line in newLines:
            f.write(line + '\n') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T10:20:11.823

```
def censor(filename):
"""Takes a file and writes it into file censored.txt with every 4-letterword replaced by xxxx"""
infile = open(filename)
content = infile.read()
infile.close()
outfile = open('censored.txt', 'w')
table = content.maketrans('.,;:!?', '      ')
noPunc = content.translate(table) #replace all punctuation marks with blanks, so they won't tie two words together
wordList = noPunc.split(' ')
for word in wordList:
    if '\n' in word:
        count = word.count('\n')
        wordLen = len(word)-count
    else:
        wordLen = len(word)
    if wordLen == 4:
        censoredWord = word.replace(word, 'xxxx ')
        outfile.write(censoredWord)
    else:
        outfile.write(word + ' ')
outfile.close() 
```

# sql - 如何在 SQL Server 2008 中存储数组或记录

> ID：13284293
> 
> 赞同：0
> 
> 时间：2012-11-08T07:17:26.520
> 
> 标签：sql, sql-server-2008

谁能告诉我如何将 nxn 矩阵数据存储到 SQL Server 2008 中？

我想从我的 ASP.NET 页面同时将数千条数据存储到 SQL Server 中，所以如果我传递一个行和列数组，那么我如何同时存储在 SQL Server 中

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:27:25.163

SQL Server是**关系型数据库**，数据[至少应该在3NF](http://en.wikipedia.org/wiki/Database_normalization)。这意味着属性**不能是 multivalueates**。要根据需要存储数据，您有多种选择：

*   规范化数据并将其存储在表中。
*   将数据数组存储为[XML](http://msdn.microsoft.com/en-us/library/ms187339.aspx)字段。
*   移至 NOSQL DBMS 或任何支持[multivalue](http://en.wikipedia.org/wiki/MultiValue)的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:25:24.157

您可以设置存储过程并将 DataTable 作为参数传递给存储过程。然后，在您的过程中，您可以使用 DataTable 中的数据执行 INSERT 语句。您所要做的就是在执行存储过程之前创建并填充您的 DataTable。

这是有关如何执行此操作的链接。它是用 C# 编写的，因为您在谈论 ASP.net，所以我认为这可能适合您。如果您正在使用它，在 VB.net 中翻译该片段也应该很容易。 [http://www.codeproject.com/Tips/214492/Passing-a-datatable-to-a-stored-procedure-in-Sql-S](http://www.codeproject.com/Tips/214492/Passing-a-datatable-to-a-stored-procedure-in-Sql-S)

# eclipse - Eclipse 错误：从插件调用代码时出现问题：“org.eclipse.ui.workbench”

> ID：13284299
> 
> 赞同：1
> 
> 时间：2012-11-08T07:17:44.833
> 
> 标签：eclipse, eclipse-plugin, myeclipse

我正在使用 MyEclipse 8.6 进行开发。我在开发时遇到了这个问题。

```
An error has occurred. See error log for more details.
org/eclipse/ui/internal/SaveableHelper 
```

下面是完整的堆栈 strace ：

```
java.lang.ClassFormatError: org/eclipse/ui/internal/SaveableHelper
    at org.eclipse.ui.internal.SaveAction.updateState(SaveAction.java:95)
    at org.eclipse.ui.internal.BaseSaveAction.partActivated(BaseSaveAction.java:134)
    at org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:72)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:888)
    at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)
    at org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:70)
    at org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:187)
    at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:306)
    at org.eclipse.ui.internal.WWinPartService.updateActivePart(WWinPartService.java:131)
    at org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:122)
    at org.eclipse.ui.internal.WWinPartService$WWinListener.partDeactivated(WWinPartService.java:50)
    at org.eclipse.ui.internal.PartListenerList2$4.run(PartListenerList2.java:115)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:888)
    at org.eclipse.ui.internal.PartListenerList2.fireEvent(PartListenerList2.java:55)
    at org.eclipse.ui.internal.PartListenerList2.firePartDeactivated(PartListenerList2.java:113)
    at org.eclipse.ui.internal.PartService.firePartDeactivated(PartService.java:242)
    at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:300)
    at org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:57)
    at org.eclipse.ui.internal.PartList.setActivePart(PartList.java:136)
    at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3531)
    at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:3071)
    at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:279)
    at org.eclipse.ui.internal.PartPane.handleEvent(PartPane.java:237)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1027)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1008)
    at org.eclipse.swt.widgets.Shell.setActiveControl(Shell.java:1404)
    at org.eclipse.swt.widgets.Shell.WM_MOUSEACTIVATE(Shell.java:2269)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:3989)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:342)
    at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1578)
    at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:2010)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4632)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2406)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4036)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4632)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2406)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4036)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4632)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2406) 
```

我还通过更改工作区的元数据文件夹进行了尝试，但它不起作用。

# jquery - 自定义 Google 搜索

> ID：13284301
> 
> 赞同：0
> 
> 时间：2012-11-08T07:18:05.913
> 
> 标签：jquery, iframe, google-custom-search

我想建立一个自定义的谷歌搜索。

我试过[这个](http://www.google.com/cse/tools/create_onthefly)

**我的代码**

```
<div>
<form id="cse-search-box" action="http://google.com/cse" target='if2'>
  <input type="hidden" name="cx" value="009827885688477640989:igzwimalyta" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" />
  <input type="button" name="sa" value="Search" onclick="doit()" />
</form>
</div>
<div>
<iframe name="if2" id="if2" width="100%" height="600px" marginheight="0" frameborder="0">
</iframe>
</div> 
```

它的工作。然后，当更多数据来自 Google 时，我尝试删除高度滚动条。但它表示错误，例如 **不安全的 JavaScript 尝试从 URL 为 192.168.9.185/KLMS/CustomGoogleSearch.aspx 的框架访问具有 URL google.com/... 的框架。域、协议和端口必须匹配**

那么是否有任何方法可以在不使用 Iframe 的情况下从 Google 获取数据（如 ajax 调用）[编辑]

我试过

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="CSS/Search.css" />
    <script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="JS/CustomSearch.js"></script>
</head>
<body>
<div>
    <form id="cse-search-box" action="http://google.com/cse" target='if2'>
        <input type="hidden" name="cx" value="009827885688477640989:igzwimalyta" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input type="text" name="q" size="31" />
        <input type="button" name="sa" value="Search" onclick="doit()" />
    </form>
</div>
<div>
    <form id="frmSearch" runat="server" autocomplete="off">
        <div id="mainSearchContainer">
            <!-- Container to show Internal search result -->
            <div class="searchResult">
                <!-- Show Item search result (Currently Tip) -->
                <div class="itemResult">
                    <fieldset>
                        <legend>Items</legend>

                        <div class="resultContainer">
                        </div>
                    </fieldset>
                </div>

                <!-- Show People search result (currently PointCat members) -->
                <div class="peopleResult">
                    <fieldset>
                        <legend>People</legend>

                        <div class="resultContainer">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </form>
</div>

<div>
    <iframe name="if2" id="if2" width="100%" height="600px" marginheight="0" frameborder="0"></iframe>
</div>
<script type="text/javascript">
    // get AJAX http request
    var xmlhttp = getXMLHttpRequest();
    function getXMLHttpRequest() {
        var xhr;
        if (window.XMLHttpRequest) {
            //code for IE7+, Firefox, Chrome, Opera, Safari
            xhr = new XMLHttpRequest();
        }
        else {
            //code for IE6, IE5
            xhr = ActiveXObject("Microsoft.XMLHTTP");
        }
        return xhr;
    }
    window.doit = function () {
        xmlhttp.onreadystatechange = function () {
            document.forms["cse-search-box"].submit();
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                //This is used when AJAX returns
                //xmlhttp.responseText contains all markup sent back from google

                //Determine size of iframe
                $("#if2").attr('width', '100%');
                $("#if2").attr('height', textHeight(xmlhttp.responseText) + "px");

                //Used to set the contents of the iframe
                //May have to be adapted to get the response to a specific place in the iframe tag hierarchy
                $("#if2").attr('src', "data:text/html;charset=UTF-8," + escape(xmlhttp.responseText));
            }
        };
        xmlhttp.open("POST", "http://google.com/cse", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("cx=009827885688477640989:igzwimalyta&ie=UTF-8&q=31");

    };
    //Measures the size of the returned text
    function textHeight(text) {
        $("body").append('<span id="tempSpan" style="display:block;">' + text + '</span>');
        var height = $("#tempSpan").height();
        $("#tempSpan").remove();
        return height;
    };
</script>
</body>
</html> 
```

[/编辑]

请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:17:31.483

您可以尝试使用 ajax 调用，并在它返回时设置 iframe 的大小。

```
// get AJAX http request
var xmlhttp = getXMLHttpRequest();
function getXMLHttpRequest() {
var xhr;
if (window.XMLHttpRequest) {
    //code for IE7+, Firefox, Chrome, Opera, Safari
    xhr = new XMLHttpRequest();
}
else {
    //code for IE6, IE5
    xhr = ActiveXObject("Microsoft.XMLHTTP");
}
return xhr;
} 
```

发送 AJAX 请求并监听响应：

```
window.doit = function() {
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //This is used when AJAX returns
            //xmlhttp.responseText contains all markup sent back from google

            //Determine size of iframe
            $("#if2").attr('width', '100%');
            $("#if2").attr('height', textHeight(xmlhttp.responseText) + "px");

            //Used to set the contents of the iframe
            //May have to be adapted to get the response to a specific place in the iframe tag hierarchy
            $("#if2").attr('src', "data:text/html;charset=UTF-8," + escape(xmlhttp.responseText));
        }
    };
    xmlhttp.open("POST", "http://google.com/cse", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send("cx=009827885688477640989:igzwimalyta&ie=UTF-8&q=31");
}; 
```

测量响应的高度（改编自[计算文本宽度](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)）：

```
//Measures the size of the returned text
function textHeight(text){
  $("body").append('<span id="tempSpan" style="display:block;">' + text + '</span>');
  var height = $("#tempSpan").height();
  $("#tempSpan").remove();
  return height;
}; 
```

# foreman - Procfile 在自己的工作目录中启动进程

> ID：13284310
> 
> 赞同：24
> 
> 时间：2012-11-08T07:19:09.480
> 
> 标签：foreman, procfile

我有这个简单的 Procfile

```
web: myapp 
```

myapp 在路径中，但进程主目录应该是 ./directory/。如何在 Procfile 中指定要启动该过程的位置？

[https://github.com/ddollar/foreman/pull/101](https://github.com/ddollar/foreman/pull/101)没有帮助，因为它假定该工作目录对于 Procfile 指定的每个进程都应该相同

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-09T19:07:44.533

壳就是答案。这很简单

```
web: sh -c 'cd ./directory/ && exec appname' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-06-06T12:18:58.490

您可以将一组 shell 命令链接在一起。使用当前版本的 Foreman，您不需要像 @JohnDoe 的回答那样将其包装在 shell 命令中。

```
web: cd server_dir && start web_service
clk: cd clock_tower && start timers 
```

这些将从各自的文件夹启动必要的过程并独立跟踪它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-19T17:50:19.297

“如何在 Procfile 中指定要在哪里启动进程？”的答案。

您可以告诉 Foreman 应用程序根目录的位置，这意味着它不必与 Procfile 位于同一位置。

您可以使用选项启动 Foreman `-d`（可能也需要使用`-f`Procfile）。

```
 $ foreman start -d ./directory 
```

[http://ddollar.github.io/foreman/](http://ddollar.github.io/foreman/)

# c - 如何更改默认 MIB 搜索路径？

> ID：13284316
> 
> 赞同：3
> 
> 时间：2012-11-08T07:19:19.217
> 
> 标签：c, snmp, net-snmp, mib

我有以下代码来解析名为 mibp 的文件夹中的 mib。

```
#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <string.h>
#include<stdlib.h>

int main(int argc, char ** argv)
{

FILE *fp=NULL;
fp=fopen("/root/mib2.txt","w");
if (fp == NULL )
{
printf("error");;
exit(2);
}  

netsnmp_init_mib();

add_mibdir("/home/pradipta/snmp/share/snmp/mibp");
//netsnmp_set_mib_directory( "/home/pradipta/snmp/share/snmp/mibp" );

struct tree *node;
//node=read_all_mibs();
node=read_mib("/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt");
print_subtree(fp,node,0);
} 
```

当我运行它时，我的错误如下

```
 MIB search path: /root/.snmp/mibs:/home/pradipta/snmp/share/snmp/mibs
Cannot find module (SNMPv2-MIB): At line 1 in (none)
Cannot find module (IF-MIB): At line 1 in (none)
Cannot find module (IP-MIB): At line 1 in (none)
Cannot find module (TCP-MIB): At line 1 in (none)
Cannot find module (UDP-MIB): At line 1 in (none)
Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 1 in (none)
Cannot find module (SNMP-COMMUNITY-MIB): At line 1 in (none)
Cannot find module (SNMPv2-SMI): At line 6 in /home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt
Cannot find module (SNMPv2-TC): At line 10 in /home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt
Cannot find module (IF-MIB): At line 12 in /home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt
Did not find 'mib-2' in module #-1 (/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt)
Did not find 'transmission' in module #-1 (/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt)
Did not find 'TruthValue' in module #-1 (/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt)
Did not find 'ifIndex' in module #-1 (/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt)
Did not find 'InterfaceIndex' in module #-1 (/home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt)
Unlinked OID in EtherLike-MIB: etherMIB ::= { mib-2 35 }
Undefined identifier: mib-2 near line 14 of /home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt
Unlinked OID in EtherLike-MIB: dot3 ::= { transmission 7 }
Undefined identifier: transmission near line 118 of /home/pradipta/snmp/share/snmp/mibp/EtherLike-MIB.txt 
```

我已将文件夹名称更改`mibs`为`mibp`并在代码中添加如上以测试 mib 搜索路径的更改是否有效。它给了我这个错误原因。

有什么用`netsnmp_init_mib();`

也告诉我

1.  我将使用哪个函数来更改 MIB 搜索目录。
2.  函数有什么用`netsnmp_set_mib_directory()`。
3.  如果我想添加一个 MIB，那么是否可以仅提供该 MIB 的路径，或者必须将其包含在先前存在所有 MIB 的路径中，因为这样做时我会出错。
4.  还有什么区别 `read_all_mibs() and read_mib()`;

请告诉我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:49:35.250

它试图包含您的 MIB 所依赖的其他 MIB。它可能会找到您的特定 MIB 确定。只需`add_mibdir()`在默认 MIB 所在的位置添加另一个即可。

`add_mibdir("/usr/local/where/my/default/RFC/mibs/are");`

# javascript - 如何在 android/samsung 手机上的 html 文本输入字段中停止自动大写？

> ID：13284323
> 
> 赞同：16
> 
> 时间：2012-11-08T07:19:49.650
> 
> 标签：javascript, android, html, css, input

我正在尝试在三星 android 手机上的 html 文本输入字段中获取所有小写字母。

任何人都可以提出其他建议来尝试阻止文本字段中第一个字母的自动大写吗？

我尝试了以下方法，但没有任何效果。

*   CSS

    ```
    .my_username{text-transform:lowercase;}

    input[type=text] {text-transform:lowercase;} 
    ```

*   JS

    ```
    my_username.setAttribute("autocapitalize","off");

    in submitonenter(my_username.value.toLowerCase();) 
    ```

*   HTML

    ```
    input autocapitalize="off" type="text" class="my_username" name="username" size="19" value="" maxlength="19" onkeypress="submitonenter(event,this)" 
    ```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T07:24:26.570

您需要在标记中说 autocapitalize="off"

例子

```
<input type="text" autocorrect="off" autocapitalize="off"/> 
```

[点击这里](http://www.bennadel.com/blog/2307-Disabling-Auto-Correct-And-Auto-Capitalize-Features-On-iPhone-Inputs.htm)了解更多详情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-08T21:34:49.687

对于安卓手机，你必须使用`autocomplete="off"`

因此，如果您想要通用的东西，请以这种方式完成@kumars 的答案：

```
<input type="text" autocorrect="off" autocapitalize="none" autocomplete="off"/> 
```

自动更正和自动大写属性适用于 iPhone 或 iPad，自动完成适用于任何运行 Android 的设备。

注意：使用`autocapitalize="none"`而不是`autocapitalize="off"`因为自动大写不推荐使用“off”。见[官方文档](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html#//apple_ref/doc/uid/TP40008058-autocapitalize)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-24T13:37:08.350

如果您也在使用 React，请使用`autoCapitalize="none"`.

# java - 通过 Servlet 从运行 Java Thread 获取信息

> ID：13284328
> 
> 赞同：0
> 
> 时间：2012-11-08T07:20:02.680
> 
> 标签：java, servlets

我在以正确的方式解决这个问题时遇到了一点问题。

我有一个 Java 应用程序使用线程连续读取日志文件。当该应用程序仍在读取日志文件时，客户端应该能够通过 java servlet 查询当前状态（即在日志文件中找到某个键​​）。

我当前的问题是使用 servlet 的 doGet-Method 获取该状态时遇到问题。虽然运行线程应该更改单个布尔变量。

我的问题是：

当我在 Tomcat 上部署 Servlet 时，如何让日志读取器线程开始运行。在空闲模式下，日志读取器正在侦听文件夹中的新文件并在它们出现后开始读取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:23:50.330

请检查以下链接，您可以使用 SevletcontexListener

在 SevletcontexListener 你可以开始你的记录器

[关联](http://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/)

```
public void contextInitialized(ServletContextEvent servletContextEvent) 
    {
          System.out.println("ServletContextListener started"); 
         //start thread here
    }
public void contextDestroyed(ServletContextEvent servletContextEvent) {
     //stop thread here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:50:42.437

> 我当前的问题是使用 servlet 的 doGet-Method 获取该状态时遇到问题。虽然运行线程应该更改单个布尔变量。

这可能是因为非线程安全布尔值的并发更新。有关此主题的更多详细信息，您可以阅读以下有关[Java 并发的教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

> 当我在 Tomcat 上部署 Servlet 时，如何让日志读取器线程开始运行。在空闲模式下，日志读取器正在侦听文件夹中的新文件并在它们出现后开始读取它们？

请参考[以下答案](https://stackoverflow.com/questions/11050186/tomcat-6-thread-pool-for-asynchronous-processing/11053152#11053152)，其中描述了如何从`ServletContextListener`using启动线程`Executors`，这是对线程的高级抽象。

希望这可以帮助...

# ios - 在 ios 中创建 BarChart 应用程序

> ID：13284332
> 
> 赞同：0
> 
> 时间：2012-11-08T07:20:48.823
> 
> 标签：ios, bar-chart

嗨，我想在 ios 中创建带有滑块控件的条形图应用程序。一旦我的滑块改变了，我的图表也改变了，它们的数据也改变了。我是这个领域的新手。我不知道如何以及从哪里开始这个应用程序。如果有人知道，请指导我或任何其他链接发送给我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:29:24.140

有多种方法可以实现这一目标。

您可以使用诸如 Core Plot 之类的 API 来实现您的要求。同时可以使用 Core Graphics &quartz Core 来实现。

您还应该查看[iOS 应用程序中的条形图](https://stackoverflow.com/questions/5164523/bar-graphs-in-ios-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T06:03:11.537

我做了一个 hack 根据您的输入值为每个栏制作自定义 uiview。根据输入值设置每个 uiview(bar) 的框架。如果您想要简单的条形图，则不需要 corePlot 文件![使用 uiview 绘制每个条形图](../Images/01ce6e4540ddf0522551f5989ef5b151.png)

![自定义uiview制作的图表](../Images/01ce6e4540ddf0522551f5989ef5b151.png)

# python - Python 没有捕获 try/except 错误

> ID：13284333
> 
> 赞同：2
> 
> 时间：2012-11-08T07:21:09.777
> 
> 标签：python, error-handling

我是 Python 新手。如果我的问题听起来很愚蠢，请原谅我。

下面的代码将引发错误，但 try/except 不会捕获该错误。我已经经历了很多次，但看不出有什么问题。

如果这里有任何大师可以向我展示问题，将不胜感激。

谢谢你的时间。

```
import decimal

try:
    Amount = str(decimal.Decimal('2.675a').quantize(decimal.Decimal('.01'), rounding=decimal.ROUND_HALF_UP))
    print Amount
except ValueError:
    print 'Error' 
```

我得到的错误是：

```
File "C:\Python27\lib\decimal.py", line 548, in __new__
  "Invalid literal for Decimal: %r" % value)
File "C:\Python27\lib\decimal.py", line 3866, in _raise_error
  raise error(explanation)
InvalidOperation: Invalid literal for Decimal: '2.675a' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T07:26:27.443

您的代码片段引发的错误是一个`decimal.InvalidOperation`异常。此异常不是子类，因此与您的子句`ValueError`不匹配。`except`

我建议阅读有关[错误和异常处理](http://docs.python.org/2/tutorial/errors.html)的教程部分，以了解有关如何处理 Python 代码中的错误的更多概述。

# linux - 使用 hexdump 仅输出 ASCII

> ID：13284335
> 
> 赞同：26
> 
> 时间：2012-11-08T07:21:41.187
> 
> 标签：linux, command-line, hexdump

我正在尝试输出与某些二进制数据相对应的 ASCII 值。我已成功应用该`hexdump`实用程序并排输出 hexdump 和 ASCII，如下所示：

```
00000120  20 20 20 20 3d 20 30 78  30 30 30 30 30 30 33 30  |    = 0x00000030|
00000130  0a 01 00 00 00 23 00 00  00 75 75 69 64 30 20 20  |.....#...uuid0  |
00000140  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 3d  |               =|
00000150  20 30 78 39 30 38 32 61  63 35 61 0a 01 00 00 00  | 0x9082ac5a.....|
00000160  23 00 00 00 75 75 69 64  31 20 20 20 20 20 20 20  |#...uuid1       |
00000170  20 20 20 20 20 20 20 20  20 20 3d 20 30 78 37 34  |          = 0x74|
00000180  61 37 34 37 36 66 0a 01  00 00 00 23 00 00 00 75  |a7476f.....#...u|
00000190  75 69 64 32 20 20 20 20  20 20 20 20 20 20 20 20  |uid2            |
000001a0  20 20 20 20 20 3d 20 30  78 61 32 35 35 35 63 30  |     = 0xa2555c0| 
```

但是，我希望只看到 ASCII 作为输出值。我对十六进制值不感兴趣。例如，输出应该如下（大约对应于上述）：

```
= 0x00000030.....#...
uuid0=0x9082ac5a.....
uuid1=0x74a7476f 
```

（我无法为此使用开关`hd`。）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-08T08:28:59.740

如果您只需要查看二进制文件的文本内容，[**字符串**](http://unixhelp.ed.ac.uk/CGI/man-cgi?strings)应该很有用：

> 对于给定的每个文件，GNU`strings`打印至少 4 个字符长（或`-n`选项给出的数字）的可打印字符序列，并且后面跟一个不可打印字符。 `strings`主要用于确定非文本文件的内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-03T00:04:57.403

虽然[raina77ow](https://stackoverflow.com/a/13285188/68204)关于该`strings(1)`命令的答案是获得您真正想要的结果的正确方法，但[`hexdump(1)`](http://www.openbsd.org/cgi-bin/man.cgi?query=hexdump&sektion=1)在某些情况下，利用特定请求仅过滤掉可打印字符可能是有意义的。我将在此具体回应。

hexdump 实用程序支持惊人的通用格式化引擎。这样做可能是为了使各种可选格式的实现更加统一。如果您的 hexdump 副本通过`-e`命令行选项公开了该引擎（正如许多人所做的那样），那么您实际上可以让它按照您的要求进行操作。

关键是`-e`它支持的选项和格式化语言。该语言允许规范使用输入字节并生成文本的格式字符串。一个命令，例如：

```
$ hexdump -e "16 \"%_p\" \"\\n\"" hexdump.exe | head -16 
```

将一次消耗 16 个字节，通过`%_p`格式显示它们，并在每个第 16 个字节后添加一个换行符。输出中的每个不可打印字符都被替换为 a `.`。

其他要考虑的面向字符的格式是`%_c`和`%_u`. 第一个用它们的 ANSI-C 转义序列或三位八进制数替换非打印字符。第二个用 ASCII 控制字符的常规名称或两位十六进制数替换非打印每个字符。

如果您的副本`hexdump`缺少`-e`选项，或者速度很慢，或者您根本没有实现，那么 William Ahern最近[发布](http://25thandclement.com/~william/projects/hexdump.c.html)`hexdump`的自由许可、快速且合理可移植的实现值得一看。它应该为许多开箱即用的类 Unix 系统构建，并且只需稍作调整，它就可以在 Windows 上使用 MingW GCC 构建。此实现的一个关键属性是，单个源文件可以构建为共享库以包含在另一个程序中，作为 Lua 模块供[Lua](http://www.lua.org)使用，以及实现该命令的独立可执行文件。`hexdump``hexdump`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T07:40:12.233

你可以使用[od](http://unixhelp.ed.ac.uk/CGI/man-cgi?od)：

```
od -t c file 
```

或者`awk`像`hexdump`这样：

```
hexdump -C file | awk '{for(i=NF; i>17; --i) print $i}' 
```

注意：如果更改 hexdump 中的列数，则必须更改 awk 命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-12T16:19:43.740

```
hexdump -C file /dev/sda4|cut -c 62-77 
```

希望能帮助到你

# tdd - 如何在 Windows 07 64 位中使用 composer 安装 PHPUnit？

> ID：13284336
> 
> 赞同：0
> 
> 时间：2012-11-08T07:21:49.603
> 
> 标签：tdd, phpunit

我有 windows 07 64 位操作系统，我已经下载了作曲家，并且我正在运行 wampserver wampserver2.2e-php5.3.13-httpd2.2.22-mysql5.5.24-x64.exe 。我曾尝试使用 composer 安装 PHPUnit，但不能。我在 linux/mac os 上找到了安装步骤，但在 windows 中没有。一些站点建议在 php 项目的 composer.json 文件中添加对 phpunit/phpunit 的依赖。但是怎么做？我不知道。请帮助我在 wampserver（windows 07-64 位操作系统）或任何替代方案上使用 composer 安装 PHPUnit。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T15:30:10.910

您做的事情与在 Linux 或 OSX 上做的事情完全相同。

从 docs over at: 开始[**`http://www.phpunit.de/manual/current/en/installation.html#installation.composer`**](http://www.phpunit.de/manual/current/en/installation.html#installation.composer)。

```
{
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    }
} 
```

并运行`php composer.phar install --dev`。

对于系统范围的安装，您可以：

```
{
    "name": "phpunit",
    "description": "PHPUnit",
    "require": {
        "phpunit/phpunit": "3.7.*"
    },
    "config": {
        "bin-dir": "C:/my/dir"
    }
} 
```

并将目录添加到您的 windows `$PATH`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:39:58.820

在这种情况下，我建议使用 Pear。通常你不会只安装几个 php 类，而且你可能需要配置 Windows 以使 phpunit 作为工具运行。

[试试看这里](http://blog.loftdigital.com/running-phpunit-tests-in-eclipse-pdt)

# c++ - 是否可以编写通用的重新绑定模板？

> ID：13284340
> 
> 赞同：5
> 
> 时间：2012-11-08T07:22:04.737
> 
> 标签：c++, c++11

如果不专门针对每个类模板/类，是否可以编写一个通用的“重新绑定”元函数，这样给定

```
 template<class > struct foo;
 struct bar; 
```

以下

```
 is_same<rebind<foo<int>,float>,foo<float>> 
 is_same<rebind<bar>,bar> 
```

有可能

```
is_same< rebind<std::vector<int>,float>,std::vector<float>> 
```

返回一个等价于 true 的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T07:45:10.387

当然。

但请注意，任何采用可变参数模板参数列表的模板模板参数都仅限于接受只有类型参数的模板，而不是非类型参数。换句话说，下面的一般情况不起作用，`std::array`因为它的第二个参数是一个整数。您必须添加一个特殊情况。

主模板已经是一个特例，因为它处理不是模板特化的类。

[http://liveworkspace.org/code/5b6f0cb3aec1eb74701e73d8d21aebab](http://liveworkspace.org/code/5b6f0cb3aec1eb74701e73d8d21aebab)

```
template< typename bound, typename ... new_args >
struct rebind_class {
    static_assert( sizeof ...( new_args ) == 0,
         "can't rebind arguments to non-specialization" );
    typedef bound type;
};

template< template< typename ... > class template_, typename ... new_args,
    typename ... old_args >
struct rebind_class< template_< old_args ... >, new_args ... > {
    typedef template_< new_args ... > type;
};

template< typename ... args >
using rebind = typename rebind_class< args ... >::type; 
```

# c - 通过管道与 execv()'ed 程序通信不起作用

> ID：13284345
> 
> 赞同：2
> 
> 时间：2012-11-08T07:22:18.803
> 
> 标签：c, pipe, stdout, stdin, execv

我尝试编写一个加载程序并将套接字 io 重定向到这些程序的套接字。听起来很像inetd，但据我所知，inetd 在请求其端口时会加载程序。我想让它永久加载。

到目前为止，一切都很好。编写套接字服务器并不是那么棘手，但我没有让其余的工作。我基本上想打开一个管道（），dup2（）它到stdin和stdout和execv（）我的程序。

问题是，我被调用的程序没有得到任何输入。我会尝试用一个测试程序来展示它。有人可以告诉我，怎么了？

```
int create_program_fork(int *ios, char const *program) { 
// create pipes to program 
if (pipe(ios) != 0) { 
    return -1; 
} 

// fork to new process 
int f = fork(); 
if (f < 0) { 
    // fork didn't work 
    close(ios[0]); 
    close(ios[1]); 
    return(-1); 
} 
if (f > 0) { 
    // master hasn't much to do here 
    return f; 
} 
// *** Child Process 
// close std** file descriptors 
printf ("executing program"); 
close(STDIN_FILENO); 
close(STDOUT_FILENO); 
// duplicate pipes as std** 
dup2(ios[0], STDIN_FILENO); 
dup2(ios[1], STDOUT_FILENO); 
// close pipes 
close(ios[0]); 
close(ios[1]); 
// call program 
return execvp(program, NULL ); 
} 

int main(int argc, char *argv[]) { 
int ios[2]; 

// call program 
int pid = create_program_fork(ios, "/bin/bash"); 
if (0 != pid){ 
    exit(EXIT_FAILURE); 
} 

char const exit_order[] = "exit\0"; 
char const order[] = ">/tmp/test.txt\0"; 
// do something 
write(ios[1], order, strlen(order)); 
// bash should stop then.. 
write(ios[1], exit_order, strlen(exit_order));   
return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:05:22.120

我看到两个可能的麻烦来源：

1) 管道的写入部分被重定向到孩子的标准输出，因此新进程的输出被发送回输入。我建议只在子端复制管道的读取部分。如果你想截取孩子的输出，你需要另一个通道（即一个新的管道，或者干脆让父母和孩子共享相同的标准输出）。

2）您发送的字符串似乎包含面向行的命令。子进程可能期望字符串末尾有换行符。这是一个非常常见的问题来源。我建议检查孩子阅读其输入的方式。字符串末尾的“\n”可能会有所帮助（顺便说一下，没有必要在 C 字符串的末尾显式添加“\0”，因为编译器会为你做这件事。无论如何，strlen 不会计算“\0”）。

# iphone - Apple Mach-O 链接器错误 Xcode

> ID：13284347
> 
> 赞同：0
> 
> 时间：2012-11-08T07:22:23.843
> 
> 标签：iphone

尝试在我的设备上运行我的应用程序时，我从 Xcode 收到此错误。

```
Ld "/Users/admin/Library/Developer/Xcode/DerivedData/Store_Locator_In_App-hbygxaouhvxmvwdudbwamekfbima/Build/Intermediates/Store Locator In App.build/Debug-iphoneos/Store Locator In App.build/Objects-normal/armv7s/Store Locator In App" normal armv7s
    cd "/Users/admin/Desktop/peboom 5"
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/admin/Library/Developer/Xcode/DerivedData/Store_Locator_In_App-hbygxaouhvxmvwdudbwamekfbima/Build/Products/Debug-iphoneos "-L/Users/admin/Desktop/peboom 5" -F/Users/admin/Library/Developer/Xcode/DerivedData/Store_Locator_In_App-hbygxaouhvxmvwdudbwamekfbima/Build/Products/Debug-iphoneos -filelist "/Users/admin/Library/Developer/Xcode/DerivedData/Store_Locator_In_App-hbygxaouhvxmvwdudbwamekfbima/Build/Intermediates/Store Locator In App.build/Debug-iphoneos/Store Locator In App.build/Objects-normal/armv7s/Store Locator In App.LinkFileList" -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.1 -lsqlite3.0 -framework MediaPlayer -framework AudioToolbox -framework AVFoundation -framework SystemConfiguration -framework CFNetwork -framework MobileCoreServices -framework MessageUI -framework CoreLocation -framework QuartzCore -framework MapKit -framework UIKit -framework Foundation -framework CoreGraphics -lGoogleAnalytics_NoThumb -lGoogleAnalytics -o "/Users/admin/Library/Developer/Xcode/DerivedData/Store_Locator_In_App-hbygxaouhvxmvwdudbwamekfbima/Build/Intermediates/Store Locator In App.build/Debug-iphoneos/Store Locator In App.build/Objects-normal/armv7s/Store Locator In App"

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/admin/Desktop/peboom 5/libGoogleAnalytics_NoThumb.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:13:41.070

新的 iPhone 5 处理器有一个定制的 ARMv7 内核，它使用了一种名为**armv7s**的新架构。

链接器返回该错误，因为您在项目中引用的 libGoogleAnalytics_NoThumb 库中缺少 armv7s 切片。

只需将 GoogleAnalitics SDK 更新到最新版本 (1.5.1)，您可以在此处下载：[https ://developers.google.com/analytics/devguides/collection/ios/resources](https://developers.google.com/analytics/devguides/collection/ios/resources)

# c++ - 在 C++ 中使用 SVM-struct 多类分类

> ID：13284358
> 
> 赞同：0
> 
> 时间：2012-11-08T07:23:09.557
> 
> 标签：c++, svm

[我刚刚从http://svmlight.joachims.org/svm_struct.html](http://svmlight.joachims.org/svm_struct.html)下载了 SVM-struct 多类源文件，我想通过调用我的 C++ 程序中的一些函数来进行分类。

我找不到有关此的文档。我可以调用一些函数在 C++ 中进行分类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:04:52.707

如果您下载了源文件，您可以将它们包含到您的项目中，然后将它们包含到您想要使用它们的源文件中，然后调用函数。如果提供了 dll，则需要使用它们。如果您正在搜索其他库进行分类，我可以建议您以下内容：

*   支持向量机库
*   boost 库（boost 有一些用于分类的库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:03:04.590

我建议 C++ 使用“鲨鱼机器学习库”。该库支持具有不同内核函数的 SVM、NNet 和一些其他类型的分类器。

[http://image.diku.dk/shark/sphinx_pages/build/html/index.html](http://image.diku.dk/shark/sphinx_pages/build/html/index.html)

你也可以使用 LIBSVM：

[http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/) ‎</p>

这两个库仍在维护中。

# sql - 即使禁用了语句缓存，C3p0 APPARENT DEADLOCK 异常

> ID：13284359
> 
> 赞同：1
> 
> 时间：2012-11-08T07:23:14.293
> 
> 标签：sql, c3p0, database-deadlocks

我正在使用 C3p0 连接池，并且在我的服务器中观察到以下异常。

```
 com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@ed866f -- APPARENT DEADLOCK!!! Complete Status:
    Managed Threads: 1
    Active Threads: 1
    Active Tasks:
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@995ec2 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
    Pending Tasks: 
            com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@11c3ceb
            com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@e392ed
            com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@c33853
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@a6f77d
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@1c25bfc
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@12534a9
            com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask@1a4564c
Pool thread stack traces:
        Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,main]
                oracle.jdbc.driver.OracleStatement.close(OracleStatement.java:1338)
                com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:651)
                com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:539)
                com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:234)
                com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470)
                com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964)
               com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

我的配置是

```
<property name="initialPoolSize" value="1" />
    <property name="minPoolSize" value="1" />
    <property name="maxPoolSize" value="20" />
    <property name="maxIdleTime" value="240" />
    <property name="checkoutTimeout" value="60000" />
    <property name="acquireRetryAttempts" value="0" />
    <property name="acquireRetryDelay" value="1000" />
    <property name="debugUnreturnedConnectionStackTraces" value="true" />
    <property name="unreturnedConnectionTimeout" value="300" />
    <property name="numHelperThreads" value="1" />
    <property name="preferredTestQuery" value="SELECT 1 FROM DUAL" /> 
```

经过一番搜索后，我发现了以下线程。 [https://forum.hibernate.org/viewtopic.php?t=947246](https://forum.hibernate.org/viewtopic.php?t=947246)

建议禁用语句缓存以避免此问题。但在我的配置中，我没有启用语句缓存（maxStatements，maxStatementsPerConnection 默认为 0）。

请提出任何替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:16:53.347

不要将 numHelperThreads 设置为 1。

如果将 numHelperThreads 设置为 1，任何慢速任务都会触发一个明显的死锁。c3p0 依赖于一个内部线程池。一个线程不创建池。让 numHelperThreads 至少具有其默认值 3。

具体来说，您的堆栈跟踪中发生的事情是连接池尝试关闭（）连接需要很长时间，出于某种原因。这里可能存在一个真正的问题，如果这种情况经常发生，但它可能只是偶尔的缓慢操作，一个合理大小的线程池只会处理并耸耸肩。

祝你好运！

# google-reader - 如果我在没有令牌的情况下使用 Google 的功能，Google 会阻止我的访问吗？

> ID：13284360
> 
> 赞同：4
> 
> 时间：2012-11-08T07:23:16.397
> 
> 标签：google-reader

我正在使用此链接[https://www.google.com/reader/api/0/stream/contents/feed/FEEDHERE?output=json&n=20](https://www.google.com/reader/api/0/stream/contents/feed/FEEDHERE?output=json&n=20)

使用 Google 的算法获取提要。如您所见，我没有添加任何其他参数，只是以 JSON 格式获取返回的数据。希望我的应用程序会被大量使用，如果我向此链接发送大量请求，Google 会阻止我的访问吗？

有什么我可以包含的，比如用户名、我的应用程序的 url（所以如果他们有问题可以联系我）或其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:05:43.450

对您的问题最基本的回答是，Google 会随时更改其服务条款，而您在这件事上没有发言权。因此，如果今天允许，明天可能就不允许了，这取决于谷歌的心血来潮。

不过，在这个问题上，你似乎相当安全。从[服务条款](http://www.google.com/intl/en/policies/terms/)（这些是一般文件，因为读者似乎没有具体的）：

> 不要滥用我们的服务。例如，不要干扰我们的服务或尝试使用我们提供的界面和说明以外的方法访问它们。

Google 提供 RSS 和 Atom。他们提供这些提要，所以我认为他们希望它们会被使用。他们并没有说将其他人指向这些提要是一种滥用，所以现在看起来还可以，但他们可以随时添加这样的子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:33:32.320

所有在线服务均受这些服务提供商的条款和条件的约束。所以，正如其他人所说，他们今天可能对你的使用没问题，但他们可以随时改变主意。我怀疑包含 URL 或电子邮件或联系信息会有所帮助，因为当这些服务发生变化时，他们不会通知服务的每个用户，他们只是公开宣布更改，通常他们会提前几个月通知用户有机会调整他们的应用程序，但这不是标准化或强制执行的，因此无法保证。一个例子是最近停用的 Google Finance API（没有宣布替代品）。

最安全的方法是设计你的应用程序，使这个使用谷歌功能的功能尽可能地与你的应用程序的其余部分分离，这样，当服务的可用性发生变化时（即它根本不再可用） ) 您可以调整您的应用程序以使用其他源作为提要，而对应用程序的其余部分影响最小。为改变而设计，为最坏的情况做计划。

# unit-testing - 在哪里测试验证 - 在单元测试或功能测试中？

> ID：13284366
> 
> 赞同：1
> 
> 时间：2012-11-08T07:23:36.273
> 
> 标签：unit-testing, testing, yii, tdd, validation

你建议在哪里测试验证？

这是来自 Yii 演示的功能测试：

```
// test login process, including validation
 $this->clickAndWait('link=Login');
 $this->assertElementPresent('name=LoginForm[username]');
 $this->type('name=LoginForm[username]','demo');
 $this->clickAndWait("//input[@value='Login']");
 $this->assertTextPresent('Password cannot be blank.'); 
```

但是针对每个错误情况（例如“密码太长”或“电子邮件不正确”）的验证测试将花费大量时间。那么，为什么不只在单元测试中测试验证呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:53:59.157

我通常会提供一两个场景来展示用户如何看待验证帮助，但我通常会在更高的层次上对它们进行表述，例如：

```
Given Fred forgets to fill in his phone and email
When he tries to register
Then he should be told what's missing. 
```

这些步骤既可以转换为[简单的代码 DSL](http://code.google.com/p/wipflash/source/browse/Example.PetShop.Scenarios/PetRegistrationAndPurchase.cs)，也可以添加到[Cucumber](http://en.wikipedia.org/wiki/Cucumber_(software))之类的工具中（请参阅[BDD](https://stackoverflow.com/questions/tagged/bdd)）。验证场景（功能性）足以举例说明系统的功能。

按照您的建议，什么是有效的和无效的示例然后进入单元测试。

如果您将功能场景视为展示系统的功能，而将单元测试视为展示类或更细粒度的代码元素的功能，则更容易进行分离。请注意，我在这里避免将“测试”一词用作动词，因为即使在单元级别它仍然只是示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:15:06.867

当然，这是你的项目，你可以测试你想要的，你想要的。

我通常在我的模型单元测试中测试整个验证。之后，我还在我的网络测试期间再次测试它（但不那么广泛）（这是为了测试控制器是否正在解析正确的变量等......）

# jquery - 从 JSON 数据中获取表的标题

> ID：13284368
> 
> 赞同：0
> 
> 时间：2012-11-08T07:23:36.390
> 
> 标签：jquery, arrays, json

我有以下类型的 JSON 数据

```
[
{"Col1": "Server1", "Col2": "57", "Col3": "Create", "Col4": "Details" },
{"Col1": "Server2", "Col2": "27", "Col3": "Create", "Col4": "Details" },
{"Col1": "Server3", "Col2": "89", "Col3": "Create", "Col4": "Details" },
{"Col1": "Server4", "Col2": "75", "Col3": "Create", "Col4": "Details" },
{"Col1": "Server5", "Col2": "77", "Col3": "Create", "Col4": "Details" },
{"Col1": "Server6", "Col2": "55", "Col3": "Create", "Col4": "Details" }
] 
```

现在我需要的是某个数组中的 Col1、Col2、Col3 和 Col4，以便我可以将它们作为标题放入我需要创建的动态表中。关于如何在数组中获取这些值的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:34:19.527

您可以使用`$.each loop`迭代并将值存储到数组中。

```
var col1Array= [];
var col2Array= [];
var col3Array= [];
var col4Array= [];

var headerArray = [];
// Select the first Object in the Array
// and iterate over it
$.each(data[0] , function(key, value){
   headerArray.push(key)
});

console.log(headerArray); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/RUemz/3/)**

# java - java显示范围内的输入

> ID：13284372
> 
> 赞同：1
> 
> 时间：2012-11-08T07:23:56.180
> 
> 标签：java, arrays, algorithm, java-me

嗨，以下程序有什么问题？因为我希望它显示范围内的用户输入整数值`1-10, 11-20,21-30 ... 191-200`？

```
public class Program
{
    /**
     * This is the main entry point for the application
     */
   public static void main(String args[]) 
{
  int a[] = new int[100];
  int i = 0; 
  Scanner in = new Scanner(System.in);
  while(i<100)
  {
  System.out.println("Enter a int");
  a[i] = in.nextInt();
  displayStatistics(a[i]);

  }

}

    public static void displayStatistics(integer[] a[i])
    {
        if(a[i]>=1 && a[i]<=100) 
      {
        i++;
        System.out.println();  ----> need to display in range 1-10, 11-20,21-30 ... 191-200
      } else {
      System.out.println("Integer not in range of 1-200");
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:32:53.453

```
public static void displayStatistics(int k)
    {
        if(k>=1 && k<=200) 
      {
        int low,high;
        if(k%10==0)
        {
            low=k-9;
            high=k;
        }
        else 
        {
            low=k-k%10+1;
            high=k-k%10+10;
        }
        System.out.println("value in range " +low+" -"+high); 

      } else {
      System.out.println("Integer not in range of 1-200");
      }
    } 
```

请记住，您将整数传递给函数，而不是完整的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:38:51.940

您必须从上面的代码中得到编译器错误。改变方法

```
public static void displayStatistics(int a) {
    if (a >= 1 && a <= 100) {
        System.out.println("Input[" + a + "] is within the range 1 to 100");
    } else {
        System.out.println("Integer not in range of 1-200");
    }
} 
```

同样，您可以添加`else if`另一个范围检查。

# python - 长双链表

> ID：13284379
> 
> 赞同：1
> 
> 时间：2012-11-08T07:25:20.427
> 
> 标签：python, class, long-integer, doubly-linked-list

我的代码有问题。代码给出了一个错误，它说节点在 __add__() 运算符中没有“前一个”，但是它在主程序中没有给出错误分配的重点是创建一个长的使用链表

> ```
> class Node():
>     def __init__(self):
>         self.next = None
>         self.prev = None
>         self.data = None
> 
>     def getData(self):
>         return self.data
> 
> class LinkedList():
>     def __init__(self):
>         self.count = 0
>         self.last = Node()
>         self.first = Node()
>         self.first.next = self.last
>         self.last.previous = self.first
> 
>     def append(self, data):
>         self.last.data = data
>         self.last.next = Node()
>         tmp = self.last
>         self.last = self.last.next
>         self.last.previous = tmp
>         self.count += 1
> 
>     def prepend(self, data):
>         self.first.data = data
>         self.first.previous = Node()
>         tmp = self.first
>         self.first = self.first.previous
>         self.first.next = tmp
>         self.count += 1
> 
>     def front(self):
>         if self.count == 0: return None
>         return self.first.next
> 
>     def back(self):
>         if self.count == 0: return None
>         return self.last.previous
> 
>     def size(self):
>         return self.count
> 
>     def __getitem__(self, node):
>         count = self.first
>         while count.data:
>             if count.data == node:
>                 return count
>             count = count.next
>         return None
> 
>     def __iter__(self):
>         count = self.first.next
>         while count.data:
>             print("here")
>             yield count.data
>             count = count.next
> 
> class BigInt:
>     def __init__(self, initValue = "0"):
>         self.data = LinkedList()
>         for count in initValue:
>             self.data.append(count)
>         self.Neg = False
> 
>     def __repr__(self):
>         integer = ""
>         node = self.data.front()
>         while node.next:
>             integer= integer+(node.getData())
>             node = node.next
>         return "".join(integer)
> 
>     def toString(self):
>         return self.__repr__()
> 
>     def isNeg(self):
>         return self.Neg
> 
>     def __add__(self, rhs):
>         node1 = self.data.back()
>         node2 = rhs.data.back()
>         if self.isNeg() and not rhs.isNeg():
>             return rhs - self
>         elif rhs.isNeg() and not self.isNeg():
>             return self - rhs
> 
>         summation = LinkedList()
>         carryOne = 0
>         print(node1.previous.previous.getData())
>         while node1.previous.getData() is not None or node2.previous.getData() is not None:
>             tot = int(node1.getData())+int(node2.getData())+carryOne
>             summation.prepend((tot)%10)
>             carryOne = 0
>             if tot >= 10: carryOne = 1
>             node1 = node1.previous
>             node2 = node2.previous
>         ret = ""
>         for digit in summation:
>             ret = ret + digit
>             print(digit)
>         print (ret)
> 
>     def __sub__():
>         pass
> 
> a = LinkedList()
> a.prepend(4)
> a.prepend(5)
> a.append(23)
> print (type(a.back()))
> print(a.back().previous.previous.getData())
> 
> g = BigInt("2")
> h = BigInt("3")
> (g+h)
> print (g.toString()) 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:28:40.453

`previous`新建的没有成员`Node`，只有`prev`.

的某些实例`Node`稍后会获得一个名为 的成员`previous`。这是由于以下代码：

```
self.last.previous = self.first 
```

（感谢@David Robinson 指出这一点。）

# ios - iOS 5 上的 Facebook sdk 3.1？

> ID：13284384
> 
> 赞同：1
> 
> 时间：2012-11-08T07:25:36.027
> 
> 标签：ios, facebook, sdk

我的应用集成了 facebook sdk 3.1。它在 iOS 6 上运行良好，但在 iOS 5 上崩溃。我在控制台中收到以下错误。

```
2012-11-08 12:57:04.529 FMB[3446:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[FBSession handleDidBecomeActive]: unrecognized selector sent to instance 0x6977300'
*** First throw call stack: (0x1b54052 0x129bd0a 0x1b55ced 0x1abaf00 0x1abace2 0x695f 0x40922c 0x40aa66 0x419743 0x41a1f8 0x40daa9 0x22adfa9 0x1b281c5 0x1a8d022 0x1a8b90a 0x1a8adb4 0x1a8accb 0x40a2a7 0x40ba9b 0x2ed2 0x2e05) terminate called throwing an exception 
```

# bash - bash：读取文本文件，获取 HTTP 标头，保存结果

> ID：13284398
> 
> 赞同：0
> 
> 时间：2012-11-08T07:26:38.617
> 
> 标签：bash, curl

我在 OS X 10.8 中使用终端挑战是读取文本文件（每行是一个 url），获取 HTTP 标头，将结果保存到其他文本文件

试过这个：

```
for line in cat ~/Desktop/a.txt; do curl -I line > ~/Desktop/b.txt;  done 
```

加上多个循环示例，例如

```
(while read l; do echo $l; done) < ~/Desktop/a.txt 
```

或者

```
cat ~/Desktop/a.txt | while read CMD; do
echo $CMD
done 
```

在我看来，我无法创建简单的循环。请指教。最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:38:19.283

你可以尝试这样的事情：

```
for i in $(cat test); do curl -I $i >> test2; done 
```

这会读取文件中的所有内容`test`并将 curl 输出附加到文件`test2`中。

# java - 与 rsa 一起使用的 CipherOutputStream

> ID：13284399
> 
> 赞同：3
> 
> 时间：2012-11-08T07:26:41.737
> 
> 标签：java, cryptography, encryption

我正在破坏 java 中一个非常简单的 RSA 加密。但输出文件似乎是空的。如果我在没有 CipherOutputStream 的情况下尝试它，同样的事情会起作用。我可以看到循环中的每个写入周期都没有效果。任何线索...谢谢。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.Security;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;

public class ExampleRSA {
    private static String VIDEO_SOURCE_FILE = "C:/Users/ggoldman/Desktop/Video/inputVideo.dv";
    private static String EncryptedFile = "C:/Users/ggoldman/Desktop/Video/encVideo.dv";
    private static File decfile = new File("C:/Users/ggoldman/Desktop/Video/decVideo.dv");
    private static File incfile = new File(EncryptedFile);
    private static File sourceMedia = new File(VIDEO_SOURCE_FILE);

    public static void main(String[] args) throws Exception {

        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
        Cipher cipher = Cipher.getInstance("RSA");

        kpg.initialize(1024);
        KeyPair keyPair = kpg.generateKeyPair();
        PrivateKey privKey = keyPair.getPrivate();
        PublicKey pubKey = keyPair.getPublic();

        // Encrypt

        cipher.init(Cipher.ENCRYPT_MODE, pubKey);

        FileInputStream fis = new FileInputStream(sourceMedia);
        FileOutputStream fos = new FileOutputStream(incfile);
        CipherOutputStream cos = new CipherOutputStream(fos, cipher);

        byte[] block = new byte[32];
        int i;
        while ((i = fis.read(block)) != -1) {
            cos.write(block, 0, i);
        }
        cos.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:51:49.393

您不能仅使用 RSA 加密和解密整个文件（至少，如果它们的字符串不止一个小字符串，则不能）。RSA算法只能加密单个块，做整个文件比较慢。

您可以使用 3DES 或 AES 加密文件，然后使用预期收件人的 RSA 公钥加密 AES 密钥。

# iphone - 发送具有大量参数的 url 时在连接类中出错

> ID：13284400
> 
> 赞同：0
> 
> 时间：2012-11-08T07:26:44.683
> 
> 标签：iphone, ios, nsurlconnection, nsxmlparser

你好朋友我在连接类中遇到问题我为我的不同方法使用相同的连接类。每个地方都可以正常工作，但是在建立这个特定连接时我得到错误，即：..连接确实失败并出现错误。

我正在发布我的整个代码，请帮助我。 **发送我的网址并建立连接的代码：-**

```
 NSString *strURl=[NSString stringWithFormat:@"http://xxxyyy.com/API/index.php?action=listIt&login=%@&pwd=%@&name=%@&catID=%d&listID=&addr1=%@&addr2=%@&locName=&city=%@&state=%@&zip=&startDate=%@&startHours=%@&startMin=%@&startMeridiem=%@&endDate=%@&endHours=%@&endMin=%@&endMeridiem=%@&contactName=&contactPhone=&contactEmail=&contactWebsite=&cost=%d&description=%@",appDelegate.strUserName,appDelegate.strPassword,strTitle,self.subCat_ID,[txtAddress1.text urlEncodeUsingEncoding:NSUTF8StringEncoding],[txtAdress2.text urlEncodeUsingEncoding:NSUTF8StringEncoding],lblCity.text,lblState.text,strBeginDate,startHr,startMin,startMeridiem,strEndDate,strEndHr,strEndMin,strEndMeridiem,cost,[txtdDscription.text urlEncodeUsingEncoding:NSUTF8StringEncoding]];

            //strURl=[strURl urlEncodeUsingEncoding:NSUTF8StringEncoding];
           // NSString *strEncode=[strURl stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
           // strEncode=[strEncode stringByReplacingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
            NSLog(@" strListItURl  =%@",strURl);
            ConnectionClass *connection=[[ConnectionClass alloc]init];
            [connection getResponseData:strURl];
            connection.delegate=self;
            [connection release]; 
```

**NSLog(@"strListItURl =%@",strURl); 这是我发送的带有方法和参数的 url。** strListItURl [http://xxxyyy.com/API/index.php?action=listIt&login=sawanth&pwd=sawanth&name=Hello](http://xxxyyy.com/API/index.php?action=listIt&login=sawanth&pwd=sawanth&name=Hello) One&catID=4&listID=&addr1=One%20tow&addr2=next%20one&locName=&city=Anchorage&state=阿拉斯加&zip=&startDate=11/8/ 2012&startHours=11&startMin=33&startMeridiem=上午&endDate=11/10/2012&endHours=11&endMin=33&endMeridiem=上午&contactName=&contactPhone=&contactEmail=&contactWebsite=&cost=3&description=%20Hello

**注意：-当我直接在浏览器上粘贴“strListItURl”时，我得到了成功。**

**现在建立连接后，我进入连接类**

```
-(void)getResponseData:(NSString*)strURL
{

    NSLog(@"strURL =%@",strURL);
 //   NSString *str1 = [NSString stringWithFormat:@"%@",strURL];
    NSURL *url=[NSURL URLWithString:strURL]; 
    NSLog(@"url is =%@",strURL);   

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30.0];
    //Initialize the connection for NSURL Connection
    theConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];
    if(theConnection)
    {
        //Initialize the data and retain the data
        receiveData = [[NSMutableData data] retain];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Warning" message:@"Please check internet connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];

    }

} 
```

**在这里，当我打印 urlRequest 时，我发现** 打印 urlRequest 的描述：NSURLRequest (null)

最后控制转到 -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error

请告诉我我在哪里做错了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:51:32.687

你还没有分配 NSURLRequest。但奇怪的是它打印的是 null 而不是 nil。

尝试：

```
NSURLRequest *urlRequest = [[NSURLRequest alloc] requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T06:05:04.790

**我得到了答案。实际上，当我通过 strURL**

```
NSString *strURl=[NSString stringWithFormat:@"http://xxxyyy.com/API/index.php?action=listIt&login=%@&pwd=%@&name=%@&catID=%d&listID=&addr1=%@&addr2=%@&locName=&city=%@&state=%@&zip=&startDate=%@&startHours=%@&startMin=%@&startMeridiem=%@&endDate=%@&endHours=%@&endMin=%@&endMeridiem=%@&contactName=&contactPhone=&contactEmail=&contactWebsite=&cost=%d&description=%@",appDelegate.strUserName,appDelegate.strPassword,strTitle,self.subCat_ID,[txtAddress1.text urlEncodeUsingEncoding:NSUTF8StringEncoding],[txtAdress2.text urlEncodeUsingEncoding:NSUTF8StringEncoding],lblCity.text,lblState.text,strBeginDate,startHr,startMin,startMeridiem,strEndDate,strEndHr,strEndMin,strEndMeridiem,cost,[txtdDscription.text urlEncodeUsingEncoding:NSUTF8StringEncoding]]; 
```

**它从某个地方占用了空白空间，因此我的连接因错误而失败。所以我修剪了空格**

```
strURl = [strURl stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

它开始工作正常。

# iphone - 如何检查单击的按钮标题是否等于uiimageview中的图像名称

> ID：13284405
> 
> 赞同：0
> 
> 时间：2012-11-08T07:27:00.673
> 
> 标签：iphone, ios, uiimageview, uibutton

这里我的代码显示了一个图像视图的 4 个按钮标题，如果单击的按钮标题等于 UIImageview 图像，我想显示单击的警报。这是我的代码，

```
 imageary=[[NSMutableArray alloc]initWithObjects:@"dear.jpg",@"donkey.jpg",@"elephant.jpg",@"fox.jpg",@"giraffe.jpg",@"goat.jpg",@"buffallo.jpg",@"bull.jpg",@"cow.jpg",@"crocodile.jpg", nil]; // declare array of names not images
 - (NSString *) convertToDisplayName:(NSString *)actual
 {
  return [actual stringByDeletingPathExtension]; //return image name without extension
 } 
```

按钮方法

```
-(IBAction)methodset:(id)sender
{

int i=0;
for(UIView *view in self.view.subviews)
{
  if([view isKindOfClass:[UIButton class]])
  {  
   mybutton = (UIButton *)view;
   if(mybutton.tag == 1||mybutton.tag == 2||mybutton.tag == 3||mybutton.tag == 4)
   {
     i = rand() % [imageary count]; // set random image
     animage.image=[UIImage imageNamed:[imageary objectAtIndex:i]]; 
    name=[self convertToDisplayName:[imageary objectAtIndex:i]];
    [mybutton setTitle:name forState:UIControlStateNormal];
    NSLog(@"current image name :%@",name);
    i++;

   }
  }
 }
} 
```

现在我面临问题

1.  rand()，同时重新洗牌按钮中的一些值正在重复。如何在不重复的情况下调整值并在 UIButton 中显示。
2.  我应该在哪里比较图像名称和单击的按钮标题是否相等。请帮我解决这个问题。请只做那些需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:43:17.117

对 rand 位使用 while 循环

```
while (i != mybutton.tag){
   i = rand() % [imageary count];
} 
```

只需比较 if(mybutton.tag ...etc 等之后的图像名称和 uibutton 标题，因为您希望它在 for 循环中对吗？还缩进您的代码 :P. 使其更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:46:14.097

```
if ([btn.titleLabel.text isEqualToString:@"imageName"]) 
```

根据你的代码

```
if ([btn.titleLabel.text isEqualToString: name]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:10:45.820

您可以通过更改以下功能来简单地做到这一点：

```
-(IBAction)methodset:(id)sender
{
  UIButton *mybutton = (UIButton *)sender;
  if(mybutton.tag == 1||mybutton.tag == 2||mybutton.tag == 3||mybutton.tag == 4)
  {
     for(int loop = 0; loop<4;loop++)
     {
        animage.image=[UIImage imageNamed:[imageary objectAtIndex:i]]; 
        name=[self convertToDisplayName:[imageary objectAtIndex:i]];
        [mybutton setTitle:name forState:UIControlStateNormal];
        NSLog(@"current image name :%@",name);
        if ([mybutton.titleLabel.text isEqualToString:[imageary objectAtIndex:i]])
        {
             //titles equal
        }

        UIView *newView = [self.view viewWithTag:i];
        if([newView isKindOfClass:[UIButton class]])
        {
           UIButton *newButton = (UIButton *)newView;
           [newbutton setTitle:name forState:UIControlStateNormal];
        }
     }
  }
} 
```

# mysql - 在sql中如何编写在where子句中提供两个值的子查询

> ID：13284410
> 
> 赞同：1
> 
> 时间：2012-11-08T07:27:18.897
> 
> 标签：mysql, sql, subquery

我用mysql。这是我的sql

```
select *
from releases
where  id >
(
    select min(id) as x
    from releases 
    where released > "2011-12-01"
) 
limit 0,30 
```

这是对的。但我想找到 id 在范围内（不仅大于）的项目，如下所示：

```
select *
from releases
where  id >
    ((
        select min(id) as x , max(id) as y
        from releases 
        where released > "2011-12-01"
    ) as D ) D.x and id < D.y
limit 0,30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:40:12.547

我会这样做：

```
select 
    *
from 
    releases,
    (select 
        min(id) as x, 
        max(id) as y
     from
        releases
     where released > "2011-12-01"
     ) as D   
where
    id between D.x and D.y
limit 0,30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:47:32.753

试试这个：

```
SELECT r.* 
FROM releases r 
JOIN (SELECT MIN(id) minId, MAX(id) maxId FROM releases WHERE released > '2011-12-01') AS A ON r.id BETWEEN A.minId AND A.maxId 
LIMIT 0,30; 
```

# java - 如果我从其他地方包含 junit.jar，如何忽略 Eclipse 错误？

> ID：13284412
> 
> 赞同：0
> 
> 时间：2012-11-08T07:27:24.293
> 
> 标签：java, eclipse, ant, junit, easymock

基本上，我`build.xml`为 Apache Ant 创建了一个。我使用所有`.jar`文件，例如`easymock.jar`，`junit.jar`我直接从他们的网站下载的文件用于我的库（设置在 中`build.xml`）。

当我使用上述两个文件创建一个新的单元测试文件`.jar`时：

```
import static org.easymock.EasyMock.expect;
import static org.junit.Assert.*; 
```

Eclipse 产生了一堆错误。但是，当我`build.xml`作为 Ant 运行时，这似乎不是问题（没有编译错误）。我猜 Eclipse 在实际编译之前不会识别外部库。如何忽略某些单元测试文件的这些错误？或者更一般地说，让 Eclipse 识别外部库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:30:14.070

进去看看`Project properties->Java Build Path`。这具有将 jars 添加到项目中的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:47:04.343

简单地把jar文件放在项目中并不能保证它包含在项目类路径中。您需要手动设置它。

在 Properties-->Java Build Path 中，添加一个用户库（例如）并在其中包含您的 jar 文件。

# php - MYSQL 和 PHP INSERT NULL 值

> ID：13284414
> 
> 赞同：1
> 
> 时间：2012-11-08T07:28:09.033
> 
> 标签：php, mysql

假设我的表只有这些成员 - id (key) 和 date (默认为**NULL** )。现在，当我想用​​我的 php 插入一行时，我是否需要在查询之前检查 date 是否有值，或者我可以像这样插入 -

```
 $query = "INSERT INTO mytable VALUES(3,{$_GET['date]})" 
```

mysql 会为 date 分配一个 NULL 值吗？

这是否适用于一张桌子，无论多大？

例如：我是否可以将许多来自 php 并且可能为空（或 null）的值插入到表中，mysql 会自动为它们分配 NULL（如果我将它们默认定义为 NULL）还是我需要做所有插入前的检查种类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:32:26.937

[这可能是相关](https://stackoverflow.com/questions/5329542/php-mysql-insert-null-values?rq=1)的，这也将确保您不会受到 sql 注入攻击。

我想说只亲自检查每个变量，然后在将变量放入数据库之前，您可以更好地控制变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:37:20.177

不，它将分配与参数一起传递的值`$_GET['date']`。如果该值为空`''`并且日期是数据类型`varchar`，它将插入一个`''`不同的值，`NULL`然后它将插入一个空。那是因为`NULL`和空字符串不相等。它们是 SQL 中的两个不同的东西。

如果要插入`NULL`值，请在插入列列表中忽略此列，然后将为其分配默认值，即`NULL`. 或者将它明确地写在`INSERT`语句的值中。

**请注意：**您的代码以这种方式容易受到[**SQL 注入**](http://en.wikipedia.org/wiki/SQL_injection)的影响。您应该改用准备好的语句或 PDO。有关更多详细信息，请参见：

*   [**防止SQL注入的最佳方法？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:34:00.260

试试这个

```
 $query = "INSERT INTO mytable VALUES(3,'".$_GET['date']."')"; 
```

但还要考虑表字段的数据类型，如果它设置为日期/日期时间，那么检查它的返回值`$_GET['date']`也必须以日期的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:36:49.730

1.  该片段对[**SQL 注入**](http://php.net/manual/en/security.database.sql-injection.php)是开放的。逃避你的价值观或使用准备好的陈述！
2.  如果变量不包含任何内容，则查询将如下所示`... VALUES (3,)`。这是一个语法错误，所以它不起作用。
3.  如果您将其更改为`VALUES(3, '{$_GET['date']}')"`，那么在空变量的情况下查询将是`... VALUES(3, '')`，空字符串是值。对于有问题的列，这将被转换为某个合理的值，如果是日期列，则转换为无法识别的日期。那不是`NULL`。

`NULL`仅当您从查询中完全*省略*该列或将其显式设置为时才适用`NULL`。在任何其他情况下，该值将不是`NULL`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T07:41:38.113

```
$date = date("d-m-Y",strtotime($_GET['date']));
if(isset($date))
    $query = "INSERT INTO mytable VALUES(3,$date)"; 
```

# iphone - 如何在 iOS 中以编程方式截取屏幕截图？

> ID：13284417
> 
> 赞同：9
> 
> 时间：2012-11-08T07:28:23.513
> 
> 标签：iphone, ios, opengl-es, uikit, screenshot

我有一个`UIView`同时使用`UIKit`control 和`OpenGL`. 我想以编程方式获取该视图的屏幕截图。

如果我使用`UIGraphicsGetImageFromCurrentImageContext()`，则`OpenGL`内容为空白；如果我使用该`glReadPixels(...)`方法，则 UIKit 内容为空白；

我对如何截取完整的屏幕截图感到困惑。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T12:16:02.837

使用以下代码截屏

```
 -(UIImage *) screenshot
     {

          CGRect rect;
          rect=CGRectMake(0, 0, 320, 480);
          UIGraphicsBeginImageContext(rect.size);

          CGContextRef context=UIGraphicsGetCurrentContext();
          [self.view.layer renderInContext:context];

          UIImage *image=UIGraphicsGetImageFromCurrentImageContext();
          UIGraphicsEndImageContext();

          return image;
     } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-12T10:17:46.820

好吧，以编程方式捕获 iPhone 屏幕的方法很少

1.  使用 UIKIT [http://developer.apple.com/library/ios/#qa/qa1703/_index.html](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)

2.  使用 AVFoundation 框架[http://developer.apple.com/library/ios/#qa/qa1702/_index.html](http://developer.apple.com/library/ios/#qa/qa1702/_index.html)

3.  使用 OpenGL ES [http://developer.apple.com/library/ios/#qa/qa1704/_index.html](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)

4.  从 iOS 7 开始，您还可以使用[为什么我以编程方式创建的屏幕截图在 iOS 7 上看起来如此糟糕？](https://stackoverflow.com/questions/18956611/programmatically-screenshot-works-bad-on-ios-7)

5.  使用 UIWindow

    ```
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    UIGraphicsBeginImageContext(screenRect.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);
    [self.window.layer renderInContext:ctx];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
    ```

6.  使用 UIView

    ```
    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viImage=UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
    ```

在这 6 个选项中，我发现第一个选项对于复制粘贴和应用压缩级别非常方便，因为第一种方法可以提供具有真实像素数据的图像。我也喜欢选项 4，因为 API 带有 SDK。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-05T08:27:38.057

```
-(UIImage *) screenshot
{
CGImageRef UIGetScreenImage(void);
CGImageRef screen = UIGetScreenImage();
UIImage* screenImage = [UIImage imageWithCGImage:screen];
CGImageRelease(screen); // you need to call this.
return screenImage;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T07:37:45.120

你得到结果 Uiimage 而不会失去图像质量

```
 - (UIImage *)captureView:(UIView *)view {
     UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
     [view.layer renderInContext:UIGraphicsGetCurrentContext()];
     UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
     return img;
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T07:45:37.827

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData *data = [UIImagePNGRepresentation(image) retain];
UImage *screenShot = [UIImage imageWithData:data]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T14:04:38.513

也许..你能用这里的东西吗

[- https://stackoverflow.com/questions/12413460/cocos2d-2-0-screenshots-on-ios-6](https://stackoverflow.com/questions/12413460/cocos2d-2-0-screenshots-on-ios-6)

和这里...

[为什么在 iOS 6.0 中的这段代码中 glReadPixels() 会失败？](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T07:32:54.800

以下是如何以编程方式截取`UIImage`. 如果你想要它为任何其他对象替换`UIImage`它。

在`.h`文件中添加 `NSData *Data;`，然后在您的`.m`文件中将其添加到您的代码中

```
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *attachimage = [[UIImage alloc]initWithData:Data];
UIImage *viImage=UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
attachimage = viImage;
UIImageWriteToSavedPhotosAlbum(viImage, nil, nil, nil); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T08:05:38.100

您知道 OpenGL 内容在您的视图中的位置。所以应该很容易将结果复制`glReadPixels`到 UIKit 的快照中。

# ios - 通过 UILocal 通知打开特定的 url，而不是打开应用程序

> ID：13284420
> 
> 赞同：2
> 
> 时间：2012-11-08T07:28:32.433
> 
> 标签：ios, cocoa-touch

我想通过本地通知打开一个特定的 url，而不是打开应用程序本身。可能吗？？如果不可能，如何检测特定通知（比如我的 url 打开通知）被触发并在应用程序打开后立即直接到该 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:47:41.727

回答您的第一个问题“是否可以从通知警报中打开 URL？” 绝对是**NO**。但是您可以找到另一种方法来做到这一点，这实际上是您的第二个问题。

每当您的应用程序在单击本地通知警报时启动时，都会调用 UIApplication 的 Delegate 方法。在您的 AppDelegate.m 中使用以下方法打开 URL

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

# c++ - 在类定义中使用自定义结构

> ID：13284421
> 
> 赞同：1
> 
> 时间：2012-11-08T07:28:33.430
> 
> 标签：c++, class, struct

这是一个相对简单的问题，但细节让我感到困惑。

我有一个基本结构如下：

```
struct player {
    string name;
    int rating;
 }; 
```

和一个使用这个结构的类“团队”。考虑到这一点，“玩家”结构的正确放置位置在团队的公共/私有字段中还是在单独的文件中？另外，为了创建它的实例，我需要做些什么不同的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:37:38.243

你必须问自己一个问题。`player`除非与 class 结合使用，否则struct 是否毫无意义`team`？如果是这样，它可能应该在里面定义`team`；否则，应独立定义。

也就是说：如果有人可以想象要使用`player`尚未从 a 中直接检索到的对象，则`team`应该创建`player`一个独立的结构。由于我们不知道您的程序背后的一般结构或想法，我们无法直接回答您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:40:16.647

这取决于您如何使用团队/玩家结构。如果您的播放器被应用程序的其他部分使用，您应该让播放器独立，这是大多数情况下的做法。

```
struct Player {
  int rating;
  std::string name;
};

class Team
{

private:
  std::vector<Player> players_;  // here you have a bunch of players
}; 
```

如果您`Player`完全被内部使用`Team`并且没有人使用它，您可以将它放在`Team`struct/class 中以缩小其名称范围。

```
 class Team
 {
 private:
   struct Player{
      int rating;
      std::string name;
   };

 private:
  std::vector<Player> players_;  // here you have a bunch of players
 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:31:09.857

只需在类之前定义结构。这应该够了吧...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:28:19.013

我认为一个**团队是一个玩家的集合**，所以使用一些容器来管理团队是很方便的。**在STL**
中可以找到很多高效的容器，由您选择最适合您需要的容器。 还要提一下，为了对与同一任务相关的人员进行分组，您可以使用**namespace**。

 ***** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T08:50:54.347

关键是能`Player`不能不用用就用`Team`。如果是这样，它应该是一个单独的类，而不是嵌套的。在精心设计的传统 (OO) 软件中，大多数嵌套类仅在外部类内部使用，并且是私有的。或者它们是代理，用于从外部类的函数返回值，但从未由外部类的客户端声明。

对类成员类提出其他“观点”也可能被认为是可取的；例如将迭代器放入容器中。迭代器应该是成员还是自由类，更多的是风格问题（但你应该保持一致）；它主要影响名称（`ContainerIterator`vs. `Container::Iterator`）。

最后，模板引入了另一个维度：给定一个 type 上的`T`模板，在这个模板中，引用成员（包括成员类型）很容易`T`；不可能找到“不相关”的类型。换句话说，如果您使用 实例化模板`T == Container`，`Container::Iterator`则可以随时使用`typename T:Iterator`，但您无法找到`ContainerIterator`。

鉴于您的类的名称，我强烈怀疑它们应该是独立的，`Team`并且`1-n`与`Player`. （我还怀疑两者都是实体对象，应该使其不可复制和不可分配。但这是另一个问题。）****

# mongodb - 减少Web应用服务器负载的缓存策略

> ID：13284429
> 
> 赞同：3
> 
> 时间：2012-11-08T07:29:21.083
> 
> 标签：mongodb, caching, iis, coldfusion, memcached

**什么是在web 服务器**和**应用程序服务器**之间应用缓存层的好工具。

**基本要求：**

1.  应用程序服务器需要一种方法来从缓存中删除项目并将项目放入缓存中并具有到期日期。
2.  Web 服务器需要一种以非常轻量级、快速的方式从缓存中提取项目的方法，而无需在应用程序服务器上分配线程。
3.  它不一定需要是分布式缓存（可从多台机器访问），但它不会受到伤害。

**我考虑过的策略：**

1.  **静态文件缓存**。请求进来，被散列，如果文件存在我们提供它，如果不存在，我们将请求路由到应用服务器。高 I/O 是并发问题还是文件锁定问题？由于内存中的内核级缓存，文件系统实际上非常快，这是否准确。
2.  **使用像 mongodb 或 redis 这样的键值数据库**。这会将完成的 HTML/JSON 片段存储在 db 中。如果需要，网络服务器将能够从数据库中读取数据并路由到应用服务器。应用服务器将配备从数据库中插入/删除。
3.  **像 memcached 或 Varnish 这样的内存缓存**（对 Varnish 不太了解）。我对 memcached 的唯一担心是，我要在任何给定时间缓存 3 到 10 GB 的数据，这超出了我在内存中安全分配的能力。memcached 是否有溢出到文件系统的方法？

在尝试这种类型的缓存层时，对一些技术和陷阱有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:12:36.143

您还可以在内存数据网格中使用 GigaSpaces XAP 来缓存甚至托管您的 Web 应用程序。您可以只选择缓存选项，也可以将两者结合起来，并通过其他方式对您的环境进行单一管理。

与您建议的键值对方法不同，使用 GigaSpaces XAP 您将能够进行复杂的查询，例如 SQL、基于对象的寺庙等等。在您的缓存方案中，您应该更具体地检查与本地缓存相关的功能。

[本地缓存](http://wiki.gigaspaces.com/wiki/display/XAP91/Local+Cache)

[网络容器](http://wiki.gigaspaces.com/wiki/display/XAP91/Web+Processing+Unit+Container)

免责声明，我是 GigaSpaces 的开发人员。

艾坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T04:09:12.807

Just to answer this from the POV of using Coherence ([http://coherence.oracle.com/](http://coherence.oracle.com/)):

*1\. The application server needs a way to remove items from the cache and put items in the cache with an expiration date.*

```
// remove one item from cache
cache.remove(key);

// remove multiple items from cache
cache.keySet().removeAll(keylist); 
```

*2\. The webserver needs a way to pull items out of the cache in a very light-weight, fast manner without requiring thread allocation on the application server.*

```
// access one item from cache
Object value = cache.get(key);

// access multiple items from cache
Map mapKV = cache.getAll(keylist); 
```

*3\. It does not neccessarily need to be a distributed cache (accessible from multiple machines), but it wouldn't hurt.*

*   Elastic. Just add nodes. Auto-discovery. Auto-load-balancing. No data loss. No interruption. Every time you add a node, you get more data capacity and more throughput.
*   Automatic high availability (HA). Kill a process, no data loss. Kill a server, no data loss.

*A memory cache like memcached or Varnish (don't know much about Varnish). My only concern with memcached is that I'm going to want to cache 3 - 10 gigabytes of data at any given time, which is more than I can safely allocate in memory. Does memcached have a method to spill to the filesystem?*

*   Use both RAM and flash. Transparently. Easily handle 10s or even 100s of gigabytes per Coherence node (e.g. up to a TB or more per physical server).

*For the sake of full disclosure, I work at Oracle. The opinions and views expressed in this post are my own, and do not necessarily reflect the opinions or views of my employer.*

# jquery - 根据类别获取第一个id

> ID：13284434
> 
> 赞同：0
> 
> 时间：2012-11-08T07:29:36.177
> 
> 标签：jquery

如何根据类别获取第一个ID

```
<ul>
    <li id="1" category="A">One</li>
    <li id="2" category="A">Two</li>
    <li id="3" category="B">Three</li>
    <li id="4" category="B">Four</li>
</ul> 
```

从上面的代码我可以得到第一个 id

```
$('ul').find('li:first').attr('id'); 
```

假设我想根据类别获取第一个 id，如何获取？就我而言，我想获得 B 类的第一个 ID。（`ans has to be 3`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:30:19.880

```
$('ul').find('li[category=B]').first().attr('id'); 
```

或者

```
$('ul li[category=B]:first').attr('id') 
```

无论您喜欢哪种风格（取决于您的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:33:30.493

```
$('ul li[category="A"]:eq(0)').attr('id'); 
```

或者

```
$('ul li[category="A"]:first').attr('id'); 
```

或者

```
$('ul li[category="A"]:nth-child(1)').attr('id'); 
```

**注意：** `:eq()`从 0`:nth-child()`开始，从 1 开始

**[看演示](http://jsfiddle.net/UJdps/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:36:18.477

```
 $("#id of ul").children(":first"); 
```

或者

```
 $("ul li:first").attr("id") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:36:47.277

一个类别总是有一个ID吗？如果不：

```
$('ul').find('li[category=B][id]:first').attr('id'); 
```

[JSbin 示例](http://jsbin.com/idinab/1/)

您应该为类别使用 HTML 数据属性以获得更有效的标记

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T07:36:59.037

试试这个

```
$('ul').find('li[category="B"]').first().attr('id'); 
```

另请注意，您的 HTML 将不会被验证，因为您没有使用默认属性。而是尝试使用 将验证您的标记的**数据属性。**

```
<ul>
    <li id="1" data-category="A">One</li>
    <li id="2" data-category="A">Two</li>
    <li id="3" data-category="B">Three</li>
    <li id="4" data-category="B">Four</li>
</ul>​

$('ul').find('li[data-category="B"]').first().attr('id'); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/zwZZx/1/)**

# android - 代码不编译？

> ID：13284435
> 
> 赞同：0
> 
> 时间：2012-11-08T07:29:40.553
> 
> 标签：android, android-edittext

> **可能重复：**
> [如何通过在edittext中写入来获取xml解析中的特定值](https://stackoverflow.com/questions/13283454/how-to-get-specific-value-in-xml-parsing-by-write-in-edittext)

这段代码不编译这段代码有什么问题？不是说应用程序意外停止我做的一切都正确吗？请检查它我想添加一个`EditText`输入并从`XML`文件中检查它的值并显示在屏幕上我按照 [本教程](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

```
 static final String URL = "http://api.androidhive.info/pizza/?format=xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "name";
static final String KEY_COST = "cost";
static final String KEY_DESC = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
       EditText et = (EditText)findViewById(R.id.editText1);

               ArrayList<HashMap<String, String>> menuItems = new 
     ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
           if(parser.getValue(e, KEY_ID).equals(et.getText().toString())){

            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
            }

      }
        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();
                // listening to single listitem click
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) 
       view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) 
    view.findViewById(R.id.cost)).getText().toString();
                String description = ((TextView) 
    view.findViewById(R.id.desciption)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),  
    SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                startActivity(in);

            }
        });
    }
} 
```

main.xml 文件-->>

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">
<!-- Main ListView 
     Always give id value as list(@android:id/list)
-->

  <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="596dp" />

    <EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:23:32.620

试试这个代码，

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
               EditText et = (EditText)findViewById(R.id.editText1);

                       ArrayList<HashMap<String, String>> menuItems = new 
             ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                   if(parser.getValue(e, KEY_ID).equals(et.getText().toString())){
                       String name = parser.getValue(e, KEY_NAME);
                       String cost = "Rs." + parser.getValue(e, KEY_COST);
                       String description = parser.getValue(e, KEY_DESC);
                       Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                       in.putExtra(KEY_NAME, name);
                       in.putExtra(KEY_COST, cost);
                       in.putExtra(KEY_DESC, description);
                       startActivity(in);
                    }

              }
    } 
```

在`SingleMenuItemActivity`类中，使用以下方法获取值，

```
 String name = this.getIntent().getStringExtra("KEY_NAME");
String cost= this.getIntent().getStringExtra("KEY_NAME");
String description= this.getIntent().getStringExtra("KEY_DESC"); 
```

**编辑-**

main.xml 文件-->>

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">

    <EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

</LinearLayout> 
```

从`Activity`课堂上扩展您的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:25:52.833

您的 layout.xml 格式不正确：

```
<EditText
android:id="@+id/editText1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:ems="10" > 
```

您需要像这样正确结束`<EditText>`标签**`/>`**：

```
<EditText
android:id="@+id/editText1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:ems="10" /> 
```

# django - Amazon EC2 上的 Django 模板错误 500.html

> ID：13284443
> 
> 赞同：0
> 
> 时间：2012-11-08T07:30:12.643
> 
> 标签：django, amazon-ec2, django-templates

首先：我确实通过 StackOverflow 寻找答案，找到了一些，但没有工作。所以又来了

我有这个小 Django 项目，将它发送到 EC2，但我得到了 TemplateDoesNotExist: 500.html。

问题是，至少对于 GET 页面，每 2 或 3 次点击（重定向）就会显示一次，当我 F5 页面 2、3 次时，它会再次显示。

文件在那里，似乎 Django/EC2 不会时不时地查看它

我测试了 false 和 true 的调试，还尝试了具有相对、绝对甚至两个路径的 TemplateDirs。

我尝试了几乎所有我能找到的东西，我也接受了每一种解决方案。顺便说一句，我想我的电子邮件在那里，所以，如果你认为最好给我发电子邮件，那就去做吧，我真的很感激

这是一些代码。设置.py

`

```
# Django settings for projetoORD project.

DEBUG = False 
TEMPLATE_DEBUG = DEBUG

ADMINS = (
     ('omar', 'omar.sr88@gmail.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'ord',                   # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'admin',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Sao_Paulo'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'pt-br'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.

    '/home/ec2-user/projetoORD/static', 

)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '*+ikvb#(+q7-+_7x5h12kbqn058ln9q$l72hv9t1r4j-15%q1c'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'projetoORD.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'projetoORD.wsgi.application'

  TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templa$
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
        # os.path.join(SITE_ROOT, 'templates'),
        '/home/ec2-user/projetoORD/templates',
        '/templates',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'expressao',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:32:26.483

在生产模式下（debug == False）django 期望您在模板文件夹的根级别拥有 a`500.html`和 a`404.html`

所以我猜一个错误/异常正在发生，django 试图提升一个 500 页面，但找不到你的 500 模板。

你有这些模板吗？

# c# - 以 base64 格式上传图像时不允许使用关键字符

> ID：13284448
> 
> 赞同：0
> 
> 时间：2012-11-08T07:30:29.927
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8

我正在开发 Windows 手机（8.0）应用程序，我是新手，我正在使用下面的代码`Base64`使用发布客户端以格式将图像发布到服务器

```
Uri uri = new Uri(UPLOAD_IMAGE_PATH);
UploadImageData requestData = new UploadImageData();
requestData.image = base64String;
string jsonString = JsonConvert.SerializeObject(requestData);
PostClient proxy = new PostClient(jsonString);
proxy.DownloadStringCompleted += new PostClient.DownloadStringCompletedHandler(proxy_DownloadStringCompleted);
proxy.DownloadStringAsync(uri); 
```

`base64String`使用以下代码以 Bae64 编码的图像字符串在哪里

```
internal static string ImageToBase64String(Stream choosenPhoto,Image image)
{
   WriteableBitmap bmp = new WriteableBitmap((BitmapSource)image.Source);
   byte[] byteArray;
   using (MemoryStream stream = new MemoryStream())
   {
     bmp.SaveJpeg(stream, bmp.PixelWidth, bmp.PixelHeight, 0, 100);
     byteArray = stream.ToArray();
     return Convert.ToBase64String(byteArray); 
   }           
} 
```

在下面的响应中，它返回“ `disallowed key charaters`” on `result`。

```
void proxy_DownloadStringCompleted(object sender, WindowsPhonePostClient.DownloadStringCompletedEventArgs e)
{
   string result = e.Result;
} 
```

但是当我使用 Mozilla 发布相同的 JSON 字符串时`REST Client`，来自服务器的 JSON 响应是成功的。我对此进行了搜索，我得到了一些链接[链接 1](https://stackoverflow.com/questions/8114512/disallowed-key-character-error-in-codeigniter)、[链接 2](https://stackoverflow.com/questions/5423212/codeigniter-disallowed-key-characters)，我需要在`Input.php`文件中允许服务器端的字符，所以我需要允许什么样的字符。它适用于`REST Client`我是否错过了我的 C# 代码中的某些内容，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:49:18.087

它似乎没有明确提到 Base64 字符串（除非我遗漏了一些东西，从未为 WinPhone 操作系统开发过）。您是否检查过要向其发送 POST 请求的 URL？

# ios - 下拉列表“窗帘”以某种方式测量为仅出现在屏幕顶部

> ID：13284453
> 
> 赞同：1
> 
> 时间：2012-11-08T07:31:04.960
> 
> 标签：ios, xcode

![在此处输入图像描述](../Images/c9235195bf2490fb4e6ec71eabce284a.png)我正在使用此代码：[单击此处](http://www.addimage.net/blog/?tag=/uiDropDownMenu)“模拟”下拉菜单，因为它在 html 代码中工作。

我以编程方式将其添加`UITextField`到我的`navigationItem`使用中：

```
[self.navigationItem setTitleView:myUITextField]; 
```

我的视图是 a `UITableView`，因此我的控制器继承自`UITableViewController`.

我已经用多行数据填充了表格视图。我还设置了下拉列表以对我的“ `myUITextField`”中的单击进行操作，并且单击“”时下拉列表正确显示`textField`。

我的问题是，如果我在屏幕上的行列表中向下滚动，然后再次单击我，`textField`那么我只能看到“下拉列表”的底部 - 所以下拉列表“窗帘”以某种方式被测量为仅出现在屏幕顶部。

我怎样才能解决这个问题 ？我认为我需要在[这里修复源代码](http://www.addimage.net/blog/?tag=/uiDropDownMenu)才能修复它。

# php - 我想在php中点击添加和减去年份

> ID：13284458
> 
> 赞同：0
> 
> 时间：2012-11-08T07:31:18.530
> 
> 标签：php, date

这是我的代码。

```
/*******************************PHP CODE*****************************************/
if(isset($_GET['date'])){ //
    $date = $_GET['date']; 
    $date = date('Y', strtotime($date));
}
else{
    $tomorrow = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
    $date = date("Y", $tomorrow);
}

/*************************************************************************/
<table width="214" height="78" border"0">
    <tr align="center">
    <td colspan="10"><a href="?date=<?= date("Y", strtotime($date .'-1 year')) ?>"  title="Previous Day" >Previous Year</a></td>

    <td width="95" colspan="2"><a href="?date=<?= date("Y", strtotime($date . '+1 year')) ?>" title="Next Day" >Next Year</a></td>

    </tr>
    <tr align="center">
    <td colspan="12" align="center"></td></tr>
</table>

/***********************************************************/ 
```

它正在工作，但如果我按 NEXT year 它将带我到 2013 年，然后我按'PREVIOUS Year' 它将带我到 2011 年而不是 2012 年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:50:10.880

当您使用的只是年份数字时，您对这些日期函数太着迷了。

```
$tomorrow = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$date = date("Y", $tomorrow); 
```

这与简单地相同：

```
$date = date("Y"); 
```

在`$tomorrow`那里没有任何意义，您只是以冗长的方式获取当前日期。这里还有一些令人困惑的东西：

```
<a title="Next Day">Next Year</a> 
```

还有这个：

```
date("Y", strtotime($date . '+1 year')) 
```

简直就是一样`$date + 1`。

此外，如果您使用 strtotime，请确保不要将它们混在一起。`strtotime($date .'-1 year')`出来的东西`strtotime('2012-1 year')`不起作用，如果你必须使用这种方法，请在减号前加一个空格。

如果您只是多年工作，我认为这可能是您所追求的：

```
<?php
if(isset($_GET['date'])) {
    $date = $_GET['date']; 
} else {
    $date = date("Y"); // current year
}
?> 
```

```
<a href="?date=<?= $date - 1 ?>">Previous Year</a></td>
<a href="?date=<?= $date + 1 ?>">Next Year</a></td> 
```

# c# - ASP.NET WebApi 未接收到发布数据

> ID：13284460
> 
> 赞同：3
> 
> 时间：2012-11-08T07:31:34.287
> 
> 标签：c#, .net, asp.net-mvc, rest, asp.net-web-api

我需要使用 WebApi 接收一些字符串和二进制数据。我以这种方式创建了一个控制器：

```
 [HttpPost]
    public void Post(byte[] buffer)
    {
        // Some code goes here
    } 
```

这是路由：

```
 routes.MapHttpRoute(
        name: "CuscarD95B",
        routeTemplate: "D95B/{controller}",
        defaults: new { buffer = RouteParameter.Optional },
        constraints: new { controller = @"Cuscar" } 
```

现在，当我尝试发布一些数据时，缓冲区始终为 byte[0]（零长度数组）。没有数据被传递给控制器​​。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-08T16:03:41.470

如果您曾经为反序列化身体而苦苦挣扎，请尝试手动执行以查看您是否真的正确发送了它。

```
[HttpPost]
public void Post()
{
    string body = Request.Content.ReadAsStringAsync().Result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:28:51.663

我们通过 HttpPost 方法传递 Json 对象，并将其解析为动态对象。它工作正常。这是示例代码：

```
ajaxPost:
...
Content-Type: application/json,
data: {"name": "Jack", "age": "12"}
... 
```

网络接口：

```
[HttpPost]
public string DoJson2(dynamic data)
{
    string name = data.name;
    int age = data.age;

    return name;
} 
```

如果存在复杂对象类型，则需要使用以下方法解析动态类型：

```
JsonConvert.DeserializeObject< YourObjectType >(data.ToString()); 
```

这里有一个复杂的数据内容示例，它包括数组和字典对象：

```
{"AppName":"SamplePrice","AppInstanceID":"100","ProcessGUID":"072af8c3-482a-4b1c‌​-890b-685ce2fcc75d","UserID":"20","UserName":"Jack","NextActivityPerformers":{"39‌​c71004-d822-4c15-9ff2-94ca1068d745":[{"UserID":10,"UserName":"Smith"}]}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:32:35.383

我能够在我的请求正文中发布一个 byte[]，并且该值已成功绑定模型。是否设置了内容类型？请注意，简单字符串在这里被认为是有效的 JSON，因此如果您的请求的内容类型设置为 application/json...

话虽如此，您可以简单地让您的 POST 方法期望正文中的字符串而不是 byte[] 并将内容类型设置为 application/json：

```
[HttpPost]
public void Post([FromBody]string buffer)
{
    // Some code goes here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:41:51.757

我不确定如何发送`byte[]`到 webApi，但您可以做的是将二进制数据传递`Base64 string`给您的控制器，然后将其转换`base64 string`为`byte[]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:09:45.877

我在[这里](http://myadventuresincoding.wordpress.com/2012/06/19/c-supporting-textplain-in-an-mvc-4-rc-web-api-application/)找到了解决方案。看起来我们需要创建自定义 MediaTypeFormatter 来实现原始类型反序列化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T06:19:48.923

您是否尝试在没有 HttpPostedFileBase 的情况下使用`[FromBody]`？

```
public void Post(HttpPostedFileBase buffer) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-16T03:50:04.060

我有类似的情况，我使用的是字符串数组，它总是通过 null 或者我会得到一个格式不正确的请求的异常。我在我的方法参数中添加了注释`[FromUri]`然后它起作用了。为了提供更多上下文，我的控制器方法之前看起来像这样：

```
public async Task<IHttpActionResult> MyControllerName(List<string> id) 
```

后：

```
public async Task<IHttpActionResult> MyControllerName([FromUri] List<string> id) 
```

# c - 错误：此处未声明（不在函数中）

> ID：13284463
> 
> 赞同：3
> 
> 时间：2012-11-08T07:31:40.517
> 
> 标签：c, file-io, struct

我在代码的最后一行收到此错误，因为我正在尝试从 extra.txt 文件中读取数据。从 input.txt 正确读取记录，但不确定为什么它会为额外文件抛出错误。谢谢！

```
typedef struct {
    char* fname;
    char* lname;
    int id;
    int age;
} data;

typedef struct {
    data** array;
    int len;
    int cap;
}vector;

vector* vector_read(FILE* in_file)
{
    int i;
    vector *v = (vector*)malloc(sizeof(vector));
    fscanf(in_file,"%d",&v->len);
    if(in_file=NULL)
     {
       return NULL;
     }
    printf("%d",v->len);
    data** array = (data**)malloc(sizeof(data*)*(v->len));
    v->array = array;
    data *temp;

   for(i=0;i<(v->len);i++)
   {    
     temp = data_read(in_file);        
     v->array[i] = temp;
   }

return v;
}

    vector *v = vector_read(input);
    printf( "initial state of vector v\n");
    vector_print(v);
    vector *v_add = vector_read(extra); 
```

编辑：

extra.txt 以这种方式记录：

```
4

Barak Obama 101 50  
Joe Biden 102 55  
Joe Plumber 10293 45  
Wayne Gretzky 99 56 
```

和 input.txt

```
1

Aaaa
Aooo
1
20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:58:37.887

您的代码需要进入函数内部。

例如像这样：

```
int read_input_and_extra(FILE * input, FILE * extra)
{
  vector *v = vector_read(input);
  if (!v)
    return -1;

  printf( "initial state of vector v\n");
  vector_print(v);

  vector *v_add = vector_read(extra); 
  if (!v_add)
    return -2;

  return 0;
} 
```

# php - Wordpress 博客从谷歌搜索引擎结果重定向到另一个 URL

> ID：13284469
> 
> 赞同：-1
> 
> 时间：2012-11-08T07:32:00.807
> 
> 标签：php, wordpress, .htaccess

我的网站是[www.padmavatiwealth.com](http://www.padmavatiwealth.com)。当我直接访问该网站时，它工作正常，但是当我通过谷歌搜索引擎时，它会将我重定向到另一个奇怪的网站。我用wordpress开发这个网站。我不明白这里发生了什么。

请帮我。下面是谷歌 URL，它将我重定向到另一个 URL，而不是 padmavatiwealth.com。

[http://www.google.co.in/url?sa=t&rct=j&q=padmavatiwealth.com&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http%3A%2F%2Fwww.padmavatiwealth.com%2F&ei=Wl2bUI3YH4yqrAfyjIHwDw&usg=AFQjCNE8ifN9KNmcfMjPYAAZe0KNmvMjPYAAZe0N](http://www.google.co.in/url?sa=t&rct=j&q=padmavatiwealth.com&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http%3A%2F%2Fwww.padmavatiwealth.com%2F&ei=Wl2bUI3YH4yqrAfyjIHwDw&usg=AFQjCNE8ifN9KNmcMjPYwAAoZe0NjsvfgQ)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:07:10.980

今天我自己也有类似的问题。

问题是一个恶意插件。即使删除插件后问题仍然存在。

.htaccess 文件被覆盖以包含重定向。

我删除了重定向并重新上传

您的 .htaccess 应该看起来像这样

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

确保您的 .htaccess 文件只有读取权限 0444

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:17:50.290

最合乎逻辑的解释：您已经安装了一个恶意插件（或仍然安装了它），该插件可以检测到 google bot 并相应地重定向以获得更多对其网站的访问。

进行的最佳方式。设置一个新的 wordpress 环境。将 wp-config.php 从旧的复制到新的。一个一个地复制模板/插件并不断检查。

您还可以使用众多浏览器插件之一，让您伪造您的用户代理，这样您的浏览器将能够看起来像 google bot，因此您可以查看重定向是否返回。

# hyper-v - 是否可以在当前 PC 之外使用 Windows Phone 8 模拟器

> ID：13284480
> 
> 赞同：0
> 
> 时间：2012-11-08T07:32:44.273
> 
> 标签：hyper-v, windows-phone-8

我在 Hyper-V VM 中安装了 Windows 8 作为来宾。尝试启动 WP8 模拟器并失败。

所以我有一个问题：是否可以在主机系统中重用 WP8 模拟器在虚拟机内部进行开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:21:45.950

据我所知 - 这是不可能的，您只能在同一台机器上运行的真实设备或模拟器上进行调试。此外，运行模拟器的机器必须在裸机上运行，​​而不是在虚拟化环境中运行，因为需要一些 CPU 特性，例如 SLAT。

# php - 悬停以在弹出窗口中显示名称锚的内容，而不是单击以转到内容

> ID：13284489
> 
> 赞同：1
> 
> 时间：2012-11-08T07:33:25.707
> 
> 标签：php, javascript, jquery

我有一个很长的 html，内容有其他文本的参考。

例如：

```
What is your <a href="#A8">favorite</a> day?
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<div id="A1">Monday</div>
<div id="A2">Tuesday</div>
<div id="A3">Wednesday</div>
<div id="A4">Thursday</div>
<div id="A5">Friday</div>
<div id="A6">Saturday</div>
<div id="A7">Subday</div>
<div id="A8">It's a good day.</div> 
```

我希望有一个功能可以将鼠标悬停在锚标记上，以在锚名称的弹出窗口或对话框中显示内容，而不是单击以转到内容。没有来回走动。

如果悬停在 上`#A8`，它会显示 的内容`A8`，即“今天是个好日子”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:38:29.147

几个选项。

1.  使用 lightbox/thickbox/jquery`A8`在叠加​​层中显示部分中的内容。

2.  替换`<a href="#A8">favorite</a>`为`<a href="javascript:void(0)" onclick="openPopup('#A8')">favorite</a>`。在函数 openPopup 中，获取该部分的内容`A8`并将其显示在弹出窗口中（使用 window.open）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:45:36.690

我想到的开始的快速：

```
<div class="day" id="A1">Monday<div class="content">your content that will show up on hover for Monday</div></div>
<div class="day" id="A2">Tuesday<div class="content">your content that will show up on hover for Tuesday</div></div>
<div class="day" id="A3">Wednesday<div class="content">your content that will show up on hover for Wedsday</div></div>
<div class="day" id="A4">Thursday<div class="content">your content that will show up on hover for Thursday</div></div>
<div class="day" id="A5">Friday<div class="content">your content that will show up on hover for ...</div></div>
<div class="day" id="A6">Saturday<div class="content">your content that will show up on hover for ...</div></div>
<div class="day" id="A7">Subday<div class="content">your content that will show up on hover for ...</div></div> 
```

在 CSS 中添加：

```
.day .content{
display:none;
}
.day:hover .content{
display:block;
} 
```

稍后您可以尝试 JQuery 提供的一系列效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:52:50.703

```
try like this

What is your <a href="#" onclick=GoodDay();>favorite</a> day?
<div></div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<div id="A1">Monday</div>
<div id="A2">Tuesday</div>
<div id="A3">Wednesday</div>
<div id="A4">Thursday</div>
<div id="A5">Friday</div>
<div id="A6">Saturday</div>
<div id="A7">Subday</div>

<script>
function GoodDay(){  $(this).next('div').text("It's a good day.");}
<script> 
```

# c# - 使用 StaticResource 和 MouseDown 处理程序时事件侦听器上的 Nullpointer 错误

> ID：13284492
> 
> 赞同：0
> 
> 时间：2012-11-08T07:33:31.237
> 
> 标签：c#, wpf, xaml

当我在 Rectangle 上使用 StaticResource 转换器为其背景着色，同时在 DataTemplate 中的另一个组件上使用 MouseDown 处理程序时，我遇到了一个非常奇怪的错误情况。如果我将代码缩小一点，这就是重现错误所需要的：

在顶部我有这些资源，一个指向一个转换器，该转换器从绑定中获取布尔值并将其转换为填充背景颜色）：

```
<Window.Resources>
 <vm:DesktopViewModel x:Key="DesktopVM" />
 <vm:BooleanToColorConverter x:Key="converter" />
</Window.Resources> 
```

稍后在同一个 xaml 文件中，我使用它迭代了一个警报对象列表（我已经用 StackPanel 替换了网格布局并删除了一些其他组件以缩短代码示例，下面的代码片段仍然失败）：

```
<ItemsControl ItemsSource="{Binding Alarms}">
 <ItemsControl.ItemTemplate>
   <DataTemplate>                                                        
    <StackPanel>
     <Rectangle Height="20" Stroke="Black" Width="20" RadiusX="4" RadiusY="4" Fill="{Binding Alarm, Converter={StaticResource converter}}"/>
     <Image Source="/MyNamespace;component/images/chart.png" Stretch="None" MouseDown="Image_MouseDown" Cursor="Hand"/>
    </StackPanel>
  </DataTemplate>
 </ItemsControl.ItemTemplate>
</ItemsControl> 
```

如果我删除图像上的 MouseDown 处理程序，它运行得很好，没有开始时出现空指针错误。如果我删除 Rectangle 中的 Fill 标记，则代码与 MouseDown 处理程序一起工作得很好！！！（并且处理程序也可以正常工作）。似乎 Fill 中的 StaticResource 引用搞砸了一些东西，导致定位鼠标处理函数失败？！？

请注意，它在创建窗口时失败，而不是在运行或单击任何内容时。

编辑：如果我将转换器替换为使用带有触发器的 StaticResource 的样式以执行与转换器相同的操作，我会遇到相同的空指针问题。很明显，属性中的 StaticResource 引用是罪魁祸首，但我不知道为什么它会影响事件侦听器。

组件的顺序也无关紧要。如果我将图像放在矩形之前，则错误完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:48:40.430

我的猜测是问题出在您的转换器代码中，它没有考虑到它可以获得空值。

为什么mouseDown的效果？可能它会导致在更早的时刻呈现图像元素，并在您的 ViewModel 尚未创建的时刻请求 Fill 属性的值。

信息太少，无法确定地说明它，但是根据我的经验，不能正确处理空值的转换器可能是 WPF 开发中的主要痛苦。许多设计时不稳定性的根源在于没有正确处理空值的转换器。

# actionscript-3 - ffmpeg for flash as3

> ID：13284493
> 
> 赞同：1
> 
> 时间：2012-11-08T07:33:43.100
> 
> 标签：actionscript-3, air, video-editing

我需要在 Flash 中开发一个视频编辑器，它可以裁剪视频、添加音频等。我为此目的找到了 ffmpeg 库，但它是在 c/c++ 中的。我不知道如何在 as3 中使用。任何人都可以帮助我解决同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T16:43:43.923

您可以使用 fffmpeg 库和 flash，这个 tut 可以帮助您开始您的项目 :) [http://www.youtube.com/watch?v=6N7eN9wvAGQ&list=LLxsjQrUrxiJM8t2HQfgLX7Q](http://www.youtube.com/watch?v=6N7eN9wvAGQ&list=LLxsjQrUrxiJM8t2HQfgLX7Q)

# c++ - 分治数组算法++

> ID：13284503
> 
> 赞同：2
> 
> 时间：2012-11-08T07:34:43.580
> 
> 标签：c++, algorithm, divide-and-conquer

我正在尝试实现一个函数，该函数将查看数组的每个元素并确定该特定元素是否大于一个 INT 而小于另一个 INT。例如：

```
Return true if Arr[5] is >i && < u 
```

我把它作为一个基本算法，它可以工作，但我想通过使用“分而治之”方法创建一段更有效的代码，但是我在使用递归来使其计数时遇到问题，以及我所拥有的所有示例看到的只是处理一个点的比较，而不是两个。任何人都可以对这种情况有所了解。(http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)

我的原始代码（线性）：

```
int SimpleSort(int length) 
{ 
    int A[] = {25,5,20,10,50}; 
    int i = 25; //Less Than int 
    u = 2; //Greater Than 
    for(int Count = 0; Count < length; Count++) //Counter 
    { 
        if (A[Count] <= i && A[Count] >= u) //Checker 
            return true; 
    } return false;
} 
```

到目前为止我已经收集到的示例代码（经过数小时的各种工作并使用不同的示例代码后没有运气：

```
int A[] = {5,10,25,30,50,100,200,500,1000,2000};
int i = 10; //Less Than
int u = 5;  //Greater Than

int min = 1;
int max = length;
int mid = (min+max)/2;

if (i < A[mid] && u > A[mid])
{
    min = mid + 1;

}
else
{
    max = mid - 1;
}
Until i <= A1[mid] && u >= A1[mid]) 
```

如果这个问题不清楚，对不起，请问您是否需要我详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:02:38.950

假设您的输入向量*始终*是排序的，我认为这样的事情可能对您有用。这是我能想到的最简单的形式，性能为 O(log n)：

```
bool inRange(int lval, int uval, int ar[], size_t n)
{
    if (0 == n)
        return false;

    size_t mid = n/2;
    if (ar[mid] >= std::min(lval,uval))
    {
        if (ar[mid] <= std::max(lval,uval))
            return true;
        return inRange(lval, uval, ar, mid);
    }
    return inRange(lval, uval, ar+mid+1, n-mid-1);
} 
```

这使用隐含的范围差异；即它总是使用两个值中的较低者作为下限，并将两者中的较高者作为上限。如果您的使用要求输入值`lval`并且`uval`将被视为福音，那么*任何*调用 where`lval > uval`都应该返回 false（因为这是不可能的），您可以删除`std::min()`and`std::max()`扩展。在任何一种情况下，您都可以通过制作外部前端加载器并预先检查 和 的顺序来进一步提高性能`lval`( `uval`a) 如果需要绝对排序，则立即返回 false 和`lval > uval`，或者 (b) 适当地预先确定 lval 和 uval如果需要范围差异，请订购。下面探讨了这两种外包装的示例：

```
// search for any ar[i] such that (lval <= ar[i] <= uval)
//  assumes ar[] is sorted, and (lval <= uval).
bool inRange_(int lval, int uval, int ar[], size_t n)
{
    if (0 == n)
        return false;

    size_t mid = n/2;
    if (ar[mid] >= lval)
    {
        if (ar[mid] <= uval)
            return true;
        return inRange_(lval, uval, ar, mid);
    }
    return inRange_(lval, uval, ar+mid+1, n-mid-1);
}

// use lval and uval as an hard range of [lval,uval].
//  i.e. short-circuit the impossible case of lower-bound
//  being greater than upper-bound.
bool inRangeAbs(int lval, int uval, int ar[], size_t n)
{
    if (lval > uval)
        return false;
    return inRange_(lval, uval, ar, n);
}

// use lval and uval as un-ordered limits. i.e always use either
// [lval,uval] or [uval,lval], depending on their values.
bool inRange(int lval, int uval, int ar[], size_t n)
{
    return inRange_(std::min(lval,uval), std::max(lval,uval), ar, n);
} 
```

我留下了我认为你想要的那个`inRange`。为希望覆盖主要和边缘情况而执行的单元测试以及结果输出如下所示。

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <iomanip>
#include <iterator>

int main(int argc, char *argv[])
{
    int A[] = {5,10,25,30,50,100,200,500,1000,2000};
    size_t ALen = sizeof(A)/sizeof(A[0]);
    srand((unsigned int)time(NULL));

    // inner boundary tests (should all answer true)
    cout << inRange(5, 25, A, ALen) << endl;
    cout << inRange(1800, 2000, A, ALen) << endl;

    // limit tests (should all answer true)
    cout << inRange(0, 5, A, ALen) << endl;
    cout << inRange(2000, 3000, A, ALen) << endl;

    // midrange tests. (should all answer true)
    cout << inRange(26, 31, A, ALen) << endl;
    cout << inRange(99, 201, A, ALen) << endl;
    cout << inRange(6, 10, A, ALen) << endl;
    cout << inRange(501, 1500, A, ALen) << endl;

    // identity tests. (should all answer true)
    cout << inRange(5, 5, A, ALen) << endl;
    cout << inRange(25, 25, A, ALen) << endl;
    cout << inRange(100, 100, A, ALen) << endl;
    cout << inRange(1000, 1000, A, ALen) << endl;

    // test single-element top-and-bottom cases
    cout << inRange(0,5,A,1) << endl;
    cout << inRange(5,5,A,1) << endl;

    // oo-range tests (should all answer false)
    cout << inRange(1, 4, A, ALen) << endl;
    cout << inRange(2001, 2500, A, ALen) << endl;
    cout << inRange(1, 1, A, 0) << endl;

    // performance on LARGE arrays.
    const size_t N = 2000000;
    cout << "Building array of " << N << " random values." << endl;
    std::vector<int> bigv;
    generate_n(back_inserter(bigv), N, rand);

    // sort the array
    cout << "Sorting array of " << N << " random values." << endl;
    std::sort(bigv.begin(), bigv.end());

    cout << "Running " << N << " identity searches..." << endl;
    for (int i=1;i<N; i++)
        if (!inRange(bigv[i-1],bigv[i],&bigv[0],N))
        {
            cout << "Error: could not find value in range [" << bigv[i-1] << ',' << bigv[i] << "]" << endl;
            break;
        };
    cout << "Finished" << endl;

    return 0;
} 
```

输出结果：

```
1
1
1
1
1
1
1
1
1
1
1
1
1
1
0
0
0
Sorting array of 2000000 random values.
Running 2000000 identity searches...
Finished 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:04:28.973

如果您假设要对数组进行排序，这实际上非常简单。您可以通过始终查看序列的左侧或右侧来摆脱对数复杂性：

```
#include <iterator>

template <typename Limit, typename Iterator>
bool inRange(Limit lowerBound, Limit upperBound, Iterator begin, Iterator end) {
  if (begin == end) // no values => no valid values
    return false;
  Iterator mid = begin;
  auto const dist = std::distance(begin,end);
  std::advance(mid,dist/2); // mid might be equal to begin, if dist == 1
  if (lowerBound < *mid && *mid < upperBound)
    return true;
  if (dist == 1) // if mid is invalid and there is only mid, there is no value
    return false;
  if (*mid > upperBound)
    return inRange(lowerBound, upperBound, begin, mid);
  std::advance(mid,1); // we already know mid is invalid
  return inRange(lowerBound, upperBound, mid, end);
} 
```

您可以使用以下方法为普通数组调用它：

```
inRange(2,25,std::begin(A),std::end(A)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:52:51.747

据我了解，对您的特定问题使用分而治之不会产生优势。但是，至少在您的示例中，输入是排序的；应该可以通过跳过值来改进一点，直到达到下限。

# ios5 - 如何通过 iOS 模拟器更改设备测试和 Xcode 4.2 上的设备的硬件版本？

> ID：13284505
> 
> 赞同：0
> 
> 时间：2012-11-08T07:34:45.810
> 
> 标签：ios5, xcode4.2

我试图弄清楚如何通过 Xcode 上的模拟器更改硬件版本和设备本身。自从下载新版本的 Xcode 后，我就无法访问 5.0 软件，因此在适应 iOS 6 的同时很难继续以前的工作。有人知道如何找到和下载它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:36:13.720

转到 Xcode -> 首选项-> 下载-> 组件。在那里你可以下载以前的模拟器

# java - 如何启动第二个媒体播放器..？

> ID：13284506
> 
> 赞同：0
> 
> 时间：2012-11-08T07:34:52.053
> 
> 标签：java, android

我正在开发一个应用程序，我想在其中播放两个 mp3 文件，一个是背景音乐，另一个是 20 秒后播放的音频。

```
 mediaPlayer = MediaPlayer.create(this, R.raw.testsong_20_sec); 
    mediaPlayer1 = MediaPlayer.create(this,R.raw.sound3 ); 
    private void buttonClick(){

    if (buttonPlayStop.getText() == getString(R.string.play_str)) {

    buttonPlayStop.setText(getString(R.string.pause_str));

    try
    {
    mediaPlayer.start();
    mediaPlayer1.start();

    startPlayProgressUpdater();
    }
    catch (IllegalStateException e) {
    mediaPlayer.pause();
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:38:07.587

用于`MediaPlayer`播放背景音乐和`SoundPool`其他一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:50:17.557

您可以通过在线程中使用这段代码在 Mediaplayer 中播放两个文件（不要为此使用 UI 线程）：

```
mediaplayer = new MediaPlayer();

mediaplayer.reset();

//For media file 1

mediaplayer.setDataSource(dataSourceOne);

mediaplayer.prepare();

mediaplayer.start();

Thread.sleep(500);//Set the time as per your need.

//For media file 2

mediaplayer.reset();

mediaplayer.setDataSource(dataSourceTwo);

mediaplayer.setLooping(true);

mediaplayer.prepare();

mediaplayer.start(); 
```

根据更好的实现视角，编写一个包含所有常用方法的 util 类，`(play(),pause(),stop())`并根据使用线程的要求从您的类中调用每个方法。

# java - Tridion SP1 支持 VB 脚本，如何将 VBScript 代码转换为 Java？

> ID：13284508
> 
> 赞同：0
> 
> 时间：2012-11-08T07:35:00.360
> 
> 标签：java, vbscript, tridion

我们正在将 VBScript 代码迁移到 Java，因为 Tridion SP1 不支持 VBScript。如何将以下 VBScript 代码转换为 Java？

```
[%
   For Each lObjCP In Page.ComponentPresentations
       WriteOut lObjCP.Content
   Next
%] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:37:36.360

奎林是正确的。所有当前版本的 Tridion 都支持 VBScript。其次 - Java 不是移植模板代码的好选择。

# php - 将行从 CSV 文件导出到 JSON

> ID：13284511
> 
> 赞同：0
> 
> 时间：2012-11-08T07:35:04.450
> 
> 标签：php, json, csv

我想将 CSV 文件中的一行导出到 JSON 文件，需要：CSV 中的 1 行导出 1 个文件 JSON。我成功导出文件，但无法过滤我要导出的行。谁能帮我？

```
 <?php

header('Content-type: application/json');

$feed = 'jsondata_palpad.csv';

$keys = array();
$newArray = array();

function csvToArray($file, $delimiter) { 
  if (($handle = fopen($file, 'r')) !== FALSE) { 
    $i = 0; 
    while (($lineArray = fgetcsv($handle, 4000, $delimiter, '"')) !== FALSE) { 
      for ($j = 0; $j < count($lineArray); $j++) { 
        $arr[$i][$j] = $lineArray[$j]; 
      } 
      $i++; 
    } 
    fclose($handle); 
  } 
  return $arr; 
} 

$data = csvToArray($feed, ',');

$count = count($data) - 1;
$labels = array_shift($data);  

foreach ($labels as $label) {
  $keys[] = $label;
}

$keys[] = 'id';
for ($i = 0; $i < $count; $i++) {
  $data[$i][] = $i;
}

for ($j = 0; $j < $count; $j++) {
 $d = array_combine($keys, $data[$j]);
  $newArray[$j] = $d;
}

//Xuat file JSON
for ($i = 0; $i < 5; $i++) {
    $json = json_encode($newArray[$i]);
    echo $json . "<br />\n";    
    $filename = $data[$i][1] . ".json";
    echo $filename . "<br />\n";
    //echo "title[" . $data[$i][4] . "]";
    $handle = fopen("./" . $filename, "w");
    fwrite($handle, $json);
    fclose($handle);    
}

?> 
```

如果推荐=2，它将导出行id=2。我想将 id、product_id、title、outline 导出到 JSON 文件。这是示例 JSON 文件 ：http: [//img839.imageshack.us/img839/5277/21527799.png](http://img839.imageshack.us/img839/5277/21527799.png) 这是 CSV 文件： [http://img690.imageshack .us/img690/1526/43004273.png](http://img690.imageshack.us/img690/1526/43004273.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:17:21.260

您正在遍历 csv 文件的所有 6 行并将它们保存到 JSON 文件中：

```
for ($i = 0; $i < 5; $i++) {
    ...
} 
```

如果您知道所需的行号，请不要遍历每一行 - 只需调用该行的循环内的代码即可。例如，如果您想要第二行：

```
$row_we_want = 1;
$json = json_encode($newArray[$row_we_want]); 
$filename = $data[$row_we_want][1] . ".json";
$handle = fopen("./" . $filename, "w");
fwrite($handle, $json);
fclose($handle); 
```

如果您不确定它是哪一行并且需要检查每一行，您可以在循环中这样做：

```
for ($i = 0; $i < 5; $i++) {
    if (some_condition) {
         $json = json_encode($newArray[$i]); 
        $filename = $i][1] . ".json";
        $handle = fopen("./" . $filename, "w");
        fwrite($handle, $json);
        fclose($handle); 
    }
} 
```

`count`此外，如果循环中的 5并不总是固定长度，则可能值得使用该函数将其替换为数组的长度。

# android - 在 Android 上绘制和动画图像的最佳方法是什么

> ID：13284513
> 
> 赞同：0
> 
> 时间：2012-11-08T07:35:24.377
> 
> 标签：android

我经历过 iOS 开发，但对 Android 开发很陌生，在这里问一些新手问题......

我必须制作一个有背景图像的应用程序，然后在其上放置一些其他图像，并且在这些图像上我必须放置闪烁的不同“发光”图像（不透明度开/关），我需要很好地控制所有这些图像的定位。现在这里没有什么高性能目标，而且它的对象也不多，它不是真正的游戏。

最好的方法是什么？我可以为此使用 ImageView，还是在线程中使用 Surface 和自定义绘图会更好？

而且，无论您提出什么建议，您能否提供一个关于该方法（ImageView 或自定义绘图）的好教程的链接，我需要在这个疯狂的最后期限内为这个项目提供所有帮助。

谢谢索伦_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:34:51.483

在我的经验中：

*   如果它大部分是静态的，你应该坚持使用 XML 和 ImageViews 等

*   如果它的动画很简单，那么预定义的 android 类就很好，而且有点容易使用

*   如果你想要真正的自定义，那么用画布绘制是要走的路

您可以扩展 View 并覆盖 onDraw 方法，或者创建一个性能更好但不太容易使用的 SurfaceView。

（对不起，我没有任何教程链接）

# wpf - 将组合框设置为窗口宽度 wpf 的控件的宽度

> ID：13284518
> 
> 赞同：1
> 
> 时间：2012-11-08T07:35:53.250
> 
> 标签：wpf, combobox

我有一个控件，它有一个`combobox`，这个控件放在一个窗口中。当我单击组合框的下拉菜单时，项目的宽度超出了窗口的宽度。控件中组合框的宽度设置为`minwidth=600`和`maxwidth = 600`。如果我在这里改变宽度，所有使用这个控件的地方，它的宽度都会受到影响。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:48:29.657

您可以通过定义 ComboBoxItem 样式并将您的 ComboBox ItemContainerStyle 设置为它来指定下拉宽度（和其他属性... MaxWidth）。

```
<Style x:Key="ComboBoxItemStyle" TargetType="{x:Type ComboBoxItem}">
    <Setter Property="Height" Value="25"/>
    <Setter Property="Width" Value="600"/>
</Style>

<ComboBox ItemContainerStyle="{StaticResource ComboBoxItemStyle}" /> 
```

# c# - C# -wcf Web 服务需要将 SOA Web 服务与SOAP 标头传递用户名/密码令牌连接。如何改变肥皂头？

> ID：13284521
> 
> 赞同：1
> 
> 时间：2012-11-08T07:36:03.000
> 
> 标签：c#, wcf, soap, soa

我有一个 WCF 网络服务。我需要利用 SOA Web 服务。我用 WSDL 文件创建了 Reference.cs。一切似乎都很好，但 SOA 服务期望带有 Token 的自定义标头，包括用户名\密码。SOA 团队只给出了用户名\密码来传递标头。现在如何更改 SOAP 标头以在 c# wcf 中传递身份验证令牌？

这是 SOA 期待 SOAP 内容

```
<message>
<properties>
<property  name="tracking.compositeInstanceId"  value="160008"/>
<property  name="tracking.ecid"  value="ef41c1acc87d807b:47c8a7e5:13aba83ab3c:-8000-000000000006d79c"/>
<property  name="transport.http.remoteAddress"  value="10.100.21.228"/>
</properties>
<headers>
<header>
<wsse:Security  soap:mustUnderstand="1">
<wsse:UsernameToken  wsu:Id="UsernameToken-njZlxs5jA9tMZ9zdXhHIaw212">
<wsse:Username>meuser</wsse:Username>
<wsse:Password  Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">welcome123</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</header>
</headers>
<parts>
<part  name="request">
<ns1:DoT_GIS_Inbound_Input>
<ns1:InterfaceID>DOT_CRM_GIS_SBL_003</ns1:InterfaceID>
<ns1:ContactFirstName>Fname</ns1:ContactFirstName>
<ns1:ContactLastName>LName</ns1:ContactLastName>
<ns1:ComplaintType>Parking</ns1:ComplaintType>
<ns1:RequestType>Complaint Request</ns1:RequestType>
<ns1:Phone>5555555</ns1:Phone>
<ns1:ReportedDate>12\12\2012</ns1:ReportedDate>
<ns1:UniqueID>ddffketto7878998</ns1:UniqueID>
<ns1:Email>anji@yahoo.com</ns1:Email>
<ns1:Description>description text</ns1:Description>
</ns1:DoT_GIS_Inbound_Input>
</part>
</parts>
</message> 
```

我的 WCF 服务的方法如下

```
public string CreateComplaintInCRM(string TYPE, string DESCRIPTION, string DATE_REPORTED, string EMAIL, string Phone, string Contact_Name, string UNIQUE_ID, string Contact_SName)
     {

                CRMCreateComplaint.DoT_GIS_Inbound_Input crmCreateObj = new CRMCreateComplaint.DoT_GIS_Inbound_Input();
                CRMCreateComplaint.execute_pttClient exeRec = new CRMCreateComplaint.execute_pttClient();

                crmCreateObj.InterfaceID = "DOT_CRM_GIS_SBL_003"; // CRM setting 
                crmCreateObj.RequestType = "Complaint Request"; //// CRM setting 
                crmCreateObj.ComplaintType = TYPE;//compalint type
                crmCreateObj.ContactFirstName = Contact_Name;
                crmCreateObj.ContactLastName = Contact_SName;
                crmCreateObj.Description = DESCRIPTION;
                crmCreateObj.Email = EMAIL;
                crmCreateObj.UniqueID = UNIQUE_ID;
                crmCreateObj.Phone = Phone;
                crmCreateObj.ReportedDate = DATE_REPORTED;

                //string COMPLAINTREFID = exe.execute(crmCreateObj);

                exeRec.execute(crmCreateObj);
                return "Referece ID:";
            } 
```

我得到 InvalidSecurity : 处理 WS-Security 安全标头时出错。

有任何 C# 中的 SOA 开发人员有同样的问题吗？非常感谢您的帮助和指导。

我浏览了很多文档和文章，但没有任何帮助

# c# - 在 WinRT 中，静态字段根本没有初始化

> ID：13284526
> 
> 赞同：9
> 
> 时间：2012-11-08T07:36:20.273
> 
> 标签：c#, windows-8, windows-runtime

我有这样的代码

```
public class SomeClass
{
    private static int staticField = 10;
} 
```

该代码永远不会被执行，并且 staticField 的默认值为 0。该代码还会导致 MVVMlight 的 SimpleIoc 使用如下代码引发异常：

```
SimpleIoc.Default.Register<SomeClass>(); 
```

上面的代码导致 MVVMLight 抛出异常说

```
 Cannot build instance: Multiple constructors found but none marked with PreferredConstructor. 
```

这非常离奇。我正在为 Windows 8 使用 Win8 RTM x64 + VS2012 Express。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T08:38:01.037

这绝对是 MVVMLight 的 SimpleIoc 中的一个 bug。我已经用 LinqPad 尝试过，问题是当你向类添加一个静态字段时，字段初始化程序会添加一个静态 ctor。

结果是 SomeClass 类有两个用于 SimpleIoc 的 ctor，这会导致您描述的异常。

一种解决方法是向类添加一个默认构造函数并用 装饰它，`PreferredConstructorAttribute`但这将导致对 SimpleIoc 的依赖。

其他解决方案是将静态字段更改为常量值。

```
public class SomeClass
{
    private const int staticField = 10;
} 
```

或者使用 Register 方法的重载来为实例创建提供工厂方法。

```
SimpleIoc.Default.Register<SomeClass>(() => new SomeClass()) 
```

我已经在 CodePlex 上提交了一份关于 MVVM Light 项目的[错误报告](http://mvvmlight.codeplex.com/workitem/7595)

**LinqPad（测试代码）：**

```
 void Main()
{
    var x = GetConstructorInfo(typeof(SomeClass));

    x.Dump();
    x.IsStatic.Dump();
}

public class PreferredConstructorAttribute : Attribute{

}
public class SomeClass{
  private static int staticField = 10;

}

private ConstructorInfo GetConstructorInfo(Type serviceType)
        {
            Type resolveTo = serviceType;

//#if NETFX_CORE
            var constructorInfos = resolveTo.GetTypeInfo().DeclaredConstructors.ToArray();
            constructorInfos.Dump();
//#else
//          var constructorInfos = resolveTo.GetConstructors();
//constructorInfos.Dump();
//#endif

            if (constructorInfos.Length > 1)
            {
                var preferredConstructorInfos
                    = from t in constructorInfos
//#if NETFX_CORE
                       let attribute = t.GetCustomAttribute(typeof (PreferredConstructorAttribute))
//#else
//                     let attribute = Attribute.GetCustomAttribute(t, typeof(PreferredConstructorAttribute))
//#endif
                       where attribute != null
                       select t;

preferredConstructorInfos.Dump();

var preferredConstructorInfo = preferredConstructorInfos.FirstOrDefault ( );
                if (preferredConstructorInfo == null)
                {
                    throw new InvalidOperationException(
                        "Cannot build instance: Multiple constructors found but none marked with PreferredConstructor.");
                }

                return preferredConstructorInfo;
            }

            return constructorInfos[0];
        }
// Define other methods and classes here 
```

问题是线路

```
var constructorInfos = resolveTo.GetTypeInfo().DeclaredConstructors.ToArray(); 
```

它返回一个包含 2 个 ConstructorInfos 的数组，这两个 ConstructorInfos 均未定义导致异常的 PreferredConstructorAttribute。

# javascript - 如何将来自中国的访问者引导到优酷和其他访问者到 Youtube？

> ID：13284530
> 
> 赞同：0
> 
> 时间：2012-11-08T07:36:36.340
> 
> 标签：javascript, youtube, country-codes, regional-settings

是否有将 IP 地址从某个范围路由到某个链接和另一个范围到另一个链接的标准方法？

我有很大比例的访问者来自中国，但我不想让这个理由足以将所有流量路由到优酷。相反，我不想为中国人提供一个破碎的页面元素。

目前有一个屏幕截图按钮可以加载一个 Javascript 弹出窗口。弹出窗口内是要加载的视频。如果有办法检测到这一点，我可以运行一个脚本来检测 IP 地址和服务器相应的链接。

我想知道其他人是否已经解决了这个问题，如果是，他们使用了什么方法。

谢谢！

ps：对于那些不知道的人，Youtube在中国被封锁，优酷是中国同等的视频流媒体网站之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:50:06.667

可能有比这更好的方法，但一种可能是让客户端在 iFrame 中加载 Youtube（或优酷）然后读取它的内容，如果您无法获取页面或者您可以捕获一些错误，那么你应该去优酷。

这也意味着当 Youtube 因维护而停机时，例如您的脚本会中断。

IP 路由可能会更好，但据我所知，它没有完美的脚本。

您可能想检查一下：[您如何检测网站访问者所在的国家/地区](https://stackoverflow.com/questions/2156231/how-do-you-detect-a-website-visitors-country-specifically-us-or-not?rq=1)

# java - 为不同级别回退不同文件

> ID：13284535
> 
> 赞同：6
> 
> 时间：2012-11-08T07:36:51.203
> 
> 标签：java, logging, slf4j, logback

我的 logback.xml 中有这个附加程序

```
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <File>logFile.log</File>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <FileNamePattern>logFile.%d{yyyy-MM-dd}.log</FileNamePattern>
        <maxHistory>5</maxHistory>
    </rollingPolicy>

    <layout class="ch.qos.logback.classic.PatternLayout">
        <Pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{35} - %msg%n</Pattern>
    </layout>
</appender> 

<root>
    <level value="ALL" />
    <appender-ref ref="FILE" />
</root> 
```

所以目前我将所有日志保存到一个文件中。我怎样才能让它像一个文件只保存错误日志而其他文件保存所有其他文件？

我想在我的代码中只使用 1 个记录器实例，如下所示：

```
 private static final Logger log = LoggerFactory.getLogger(Main.class); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T08:11:21.387

开始寻找 logback 类别，找到过滤器。

只需将过滤器描述添加到您的附加程序：

```
 <filter class="ch.qos.logback.classic.filter.LevelFilter">
        <level>ERROR</level>
        <onMatch>ACCEPT</onMatch>
        <onMismatch>DENY</onMismatch>
    </filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:02:35.700

这就是我为 Jboss 所做的，但我想你会得到解决方案。

为 error.log 创建一个专用的 appender，如下所示，

```
<appender name="ErrorFile" class="org.jboss.logging.appender.DailyRollingFileAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="File" value="${jboss.server.log.dir}/error.log"/>
      <param name="Threshold" value="ERROR"/>
      <param name="Append" value="false"/>

      <!-- Rollover at midnight each day -->
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>

      <!-- Rollover at the top of each hour
      <param name="DatePattern" value="'.'yyyy-MM-dd-HH"/>
      -->

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>

         <!-- The full pattern: Date MS Priority [Category] (Thread:NDC) Message\n
         <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
          -->
      </layout>
   </appender> 
```

为其余部分创建一个附加程序

```
 <appender name="File" class="org.jboss.logging.appender.DailyRollingFileAppender">
          <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
          <param name="File" value="${jboss.server.log.dir}/server.log"/>
          <param name="Threshold" value="ALL"/>
          <param name="Append" value="false"/>

          <!-- Rollover at midnight each day -->
          <param name="DatePattern" value="'.'yyyy-MM-dd"/>

          <!-- Rollover at the top of each hour
          <param name="DatePattern" value="'.'yyyy-MM-dd-HH"/>
          -->

          <layout class="org.apache.log4j.PatternLayout">
             <!-- The default pattern: Date Priority [Category] Message\n -->
             <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>

             <!-- The full pattern: Date MS Priority [Category] (Thread:NDC) Message\n
             <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
              -->
          </layout>
       </appender> 
```

然后为上述两个创建特定类别

```
<category name="your_file_name/package_name">
      <priority value="ERROR"/>
      <appender-ref ref="ErrorFILE"/>
 </category>
 <category name="your_file_name/package_name">
      <priority value="ALL"/>
      <appender-ref ref="File"/>
 </category> 
```

# ios - iOS MediaPlayer 框架在直播视频时崩溃

> ID：13284537
> 
> 赞同：3
> 
> 时间：2012-11-08T07:36:54.390
> 
> 标签：ios, live-streaming

我正在开发 iOS 应用程序，它使用 iOS 媒体播放器框架通过 URl 直播视频。该应用程序在直播时随机崩溃。我在下面发布了崩溃报告。如果有人有解决方案请帮助我...

```
 AVFoundation                   0x3701124f -[AVPlayer _attachItem:andPerformOperation:withObject:] + 1363

   AVFoundation                     0x3700d403 -[AVPlayer _insertItem:afterItem:] + 27

   AVFoundation                     0x37021fc5 -[AVQueuePlayer insertItem:afterItem:] + 129 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:03:13.097

我发现此问题的重现性的一个来源是，只要 PUSH 通知到达设备，就会发生此崩溃。

此崩溃是由于在应用程序退出活动并变为活动时对 MediaPlayer 框架的处理不当造成的。

我解决了这个问题......

# mysql - 如何构造一个命令来连接 mySQL 中的 3 个不同的表？

> ID：13284543
> 
> 赞同：2
> 
> 时间：2012-11-08T07:37:22.160
> 
> 标签：mysql, sql, join

我在 MySQL 中有三个不同的表：

![](../Images/e8850ee53355ae5dfc0a871f2d217623.png)

给定一个用户 ID，我如何获取该用户的角色名称列表？例如 user_id = 1 我需要这样的列表 (1, deleteuser, modifyuser, viewuser)

如何构造我的 SQL 命令来获取这样的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:42:08.190

`JOIN`这三个表是这样的：

```
SELECT 
  u.id,
  r.Name
FROM user u
INNER JOIN user_role ur ON u.id = ur.user_id
INNER JOIN roles r ON ur.Role_id = r.id
WHERE u.id = Someid 
```

但是，如果您希望将每个用户的角色列表连接成一个字符串。`GROUP_CONCAT`像这样使用：

```
SELECT 
  u.id,
  GROUP_CONCAT(r.Name) roles
FROM user u
INNER JOIN user_role ur ON u.id = ur.user_id
INNER JOIN role r ON ur.Role_id = r.id
WHERE u.id = 1
GROUP BY u.id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/50c6b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:42:08.540

```
SELECT User_id, Name
FROM User_role
JOIN Role ON User_role.Role_id = Role.Id
WHERE User_id = '1' 
```

这将创建一个这样的列表：

```
User_id | Name
1       | DeleteUser
1       | ModifyUser
1       | ViewUser 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:51:16.230

试试这个：

```
SELECT User_id, GROUP_CONCAT(r.Name)
FROM User_Role ur 
INNER JOIN Role r ON ur.Role_id = r.Role_id 
GROUP BY User_id; 
```

# python - django-cms 页面的绝对网址

> ID：13284544
> 
> 赞同：1
> 
> 时间：2012-11-08T07:37:24.683
> 
> 标签：python, django, django-cms

我想获取我在 Django-CMS 应用程序中发布的所有页面的列表，但我似乎无法让它呈现特定于语言的 url。

在我指定的设置中：

```
LANGUAGES = [
    ('sv', 'Svenska'),
    ('en', 'English'),
] 
```

我进入管理站点，创建一个联系页面（这不是站点主页）并在不同的语言上设置不同的 slug，例如“contact-sv”和“contact-en”。

然后我有一个获取页面的视图

```
from cms.models import Page
page = Page.objects.published()[1]
print 'swe:', page.get_absolute_url(language='sv')
print 'eng:', page.get_absolute_url(language='en') 
```

然后我得到这个输出：

```
swe: /contact-en/
eng: /contact-en/ 
```

当我期望 swe-url 是 /sv/contact-sv/

我不需要路径的语言前缀，我可以将其添加到路径中，但我需要特定于语言的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:23:23.177

我不能为您提供比等待 2.4 版本更好的解决方案，该版本将使用 Django 的内置 i18n_urlpatterns 来处理此问题，这应该可以解决您遇到的问题，目前，您的答案是唯一的出路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:39:08.917

我敢打赌有更好的方法来做到这一点，但现在我循环浏览页面对象上的标题。

```
for title in page.title_set.all():
    print title.language, title.slug 
```

它有效，但我不喜欢它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T14:08:33.847

也许您可以使用站点地图策略。django cms 有它自己的站点地图类来运行这个代码：

```
class CMSSitemap(Sitemap):
    changefreq = "monthly"
    priority = 0.5

    def items(self):
        all_titles = Title.objects.public().filter(
            Q(redirect='') | Q(redirect__isnull=True),
            page__login_required=False,
            page__site=Site.objects.get_current(),
        ).order_by('page__path')
        return all_titles 
```

# php - 如何在 FLOW3 中的现有包中创建新的自定义字段

> ID：13284546
> 
> 赞同：1
> 
> 时间：2012-11-08T07:37:36.530
> 
> 标签：php, doctrine, typo3-flow

目前我创建了一个名为“MyPackage”的包。它在其中动态生成页面名称`CoffeeBean.php`..

```
<?php
namespace MyPackage\Domain\Model;

/*                                                                        *
 * This script belongs to the FLOW3 package "MyPackage".                  *
 *                                                                        *
 *                                                                        */

use TYPO3\FLOW3\Annotations as FLOW3;
use Doctrine\ORM\Mapping as ORM;

    class CoffeeBean
    { 
        protected $name;

        public function getName() {
            return $this->name;
        }

        public function setName($name) {
            $this->name = $name;
        }
    }
?> 
```

我需要在其中再创建一个名为 email 的字段。任何人都可以帮助我，我是 FLOW3 概念的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:19:08.030

通过使用插件EXTENSION BUILDER，我们可以在typo3.in flow3中创建一个新包，我们需要使用终端更改代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:51:14.173

只需在 CoffeeBean 类中添加属性 $email (protected) 和 set/getter，然后转到命令行工具：

```
# flow doctrine:update 
```

Flow 会通过适当的配置自动为您升级数据库模式。

# robots.txt - 如何通过 robots.txt 让 HTTrack Crawlers 远离我的网站？

> ID：13284549
> 
> 赞同：1
> 
> 时间：2012-11-08T07:37:37.693
> 
> 标签：robots.txt, web-crawler

我正在维护网站[http://www.totalworkflow.co.uk](http://www.totalworkflow.co.uk)并且不确定 HTTrack 是否遵循 robots.txt 文件中给出的说明。如果有任何答案可以让我们让 HTTrack 远离网站，请建议我使用它来实现，或者只告诉机器人名称，这样我就可以阻止这个垃圾爬取我的网站。如果 robots.txt 无法做到这一点，请推荐是否有其他方法可以让该机器人远离网站？

* * *

您是对的，垃圾邮件爬虫没有必要遵循 robots.txt 文件中给出的指南。我知道 robots.txt 仅适用于正版搜索引擎。但是，如果开发人员对该应用程序进行硬编码以不跳过 robots.txt 指南（如果提供），则应用程序 HTTrack 可能看起来是真实的。如果提供了此选项，那么该应用程序对于预期目的将非常有用。好的，让我们来看看我的问题，实际上我想找到的解决方案是让 HTTrack 爬虫远离 Web 服务器上的任何硬编码。我尝试首先在网站管理员级别解决这个问题。但是，您的想法非常适合将来考虑。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:53:48.877

它应该遵守 robots.txt，但 robots.txt 是您不必遵守的东西（实际上，找到您不希望其他人看到的垃圾邮件机器人是一件非常好的事情）所以有什么保证（即使它现在服从机器人）在未来的某个时候不会有忽略所有 robots.txt 和元标记的选项？我认为更好的方法是配置您的服务器端应用程序以检测和阻止用户代理。用户代理字符串有可能在爬虫的源代码中某处被硬编码，用户将无法更改它以阻止您阻止该爬虫。您所要做的就是编写一个服务器脚本来吐出用户代理信息（或检查服务器日志），然后根据这些信息创建阻止规则。或者，您可以在 Google 上搜索已知的“列表”

[被用户代理或空引用者阻止](https://stackoverflow.com/questions/7372551/block-by-useragent-or-empty-referer)

# python - 使用 urllib 2 捕获错误 60（超时）

> ID：13284553
> 
> 赞同：1
> 
> 时间：2012-11-08T07:38:02.063
> 
> 标签：python

我正在尝试捕获错误 60 并继续执行我的脚本，这就是我目前正在做的事情：

```
import urllib2
import csv
from bs4 import BeautifulSoup

matcher = csv.reader(open('matcher.csv', "rb" ))

for i in matcher:
    url = i[1]
    if len(list(url)) > 0:
        print url
        try:
            soup = BeautifulSoup(urllib2.urlopen(url,timeout=10))   

        except urllib2.URLError, e:
            print ("There was an error: %r" % e) 
```

它返回这个：

> 回溯（最后一次调用）：文件“debug.py”，第 13 行，在 soup = BeautifulSoup(urllib2.urlopen(url,timeout=10)) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib /python2.7/urllib2.py”，第 126 行，在 urlopen 返回 _opener.open(url, data, timeout) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py "，第 400 行，打开响应 = self._open(req, data) 文件 "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"，第 418 行，在 _open '_open ', req) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 378 行，在 _call_chain 结果 = func(*args) 文件“/Library/Frameworks/Python .framework/Versions/2.7/lib/python2.7/urllib2.py”，第 1207 行，在 http_open 返回 self.do_open(httplib.HTTPConnection, req) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 1180 行，在 do_open r = h.getresponse( buffering=True）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py”，第1030行，在getresponse response.begin（）文件“/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7/httplib.py”，第 407 行，开始版本，状态，原因 = self._read_status() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2 .7/httplib.py”，第 365 行，在 _read_status 行 = self.fp.readline() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py”，第 447 行, 在 readline 数据 = self._sock.recv(self._rbufsize) socket.timeout: 超时

我将如何捕获此错误并“继续”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:43:07.133

您可以导入异常对象并修改您的`except`块：

```
import socket

try:
    soup = BeautifulSoup(urllib2.urlopen(url,timeout=10))   

except urllib2.URLError as e:
    print ("There was an error: %r" % e)
except socket.timeout as e: # <-------- this block here
    print "We timed out" 
```

**更新**：嗯，学到了一些新东西——刚刚找到了一个`.reason`属性的引用：

```
except urllib2.URLError as e:
    if isinstance(e.reason, socket.timeout):
        pass # ignore this one
    else:
        # do stuff re other errors if you can...
        raise # otherwise propagate the error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:54:59.210

您可以尝试`except Exception as e:`捕获所有错误。但是请记住，这会捕获所有错误，如果您只想捕获特定错误，则应避免这样做。

**编辑：** 您可以通过执行以下操作检查异常类型：

```
except Exception as e:
    exc_type, exc_obj, exc_tb = sys.exc_info()
    fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[1]      
    print(exc_type, fname, exc_tb.tb_lineno) 
```

# java - java.lang.NoClassDefFoundError: 无法在 Jboss 5.0 EAP 上初始化类 org.apache.poi.POIXMLDocument

> ID：13284565
> 
> 赞同：5
> 
> 时间：2012-11-08T07:38:53.757
> 
> 标签：java, apache-poi, jboss5.x, jsf-1.2

在 Jboss 5.0 EAP 中出现以下异常，但在 JBoss 5.1 GA 中可以正常工作。

我们正在使用 POI 3.7 并且包含的​​罐子是

*   poi-3.7.jar
*   poi-ooxml-schemas.jar
*   poi-ooxml.jar

堆栈跟踪是

```
ERROR [org.apache.catalina.core.ContainerBase.[jboss.ueb].[localhost].[fesbcon-Fig].[Faces Servlet]]
    3;13;44.4g3pM (http-0.0.0.0-8280-1) Servlet.service() -For servlet Faces Servlet threu exception
    java.lang.NoClassDe-FFoundError: Could not initialize class org.apache.poi.POIXMLDocument
    at org.apache.poi.ss.usermodel.HorkbookFactory.create(HorkbookFactory.java:62)
    at com.-Ferguson.esb.con-Fig.controller.AssociationsExcelUploadController.submit(Unknoun Source)
    at sun.re-Flect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.re-Flect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.re-Flect.DelegatingMethodAccessorImpl.invoke(Delegating?ethodAccessorImpl.java:25)
    at java.lang.re-Flect.Method.invoke(Method.java:597)
    at org.apache.my-Faces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:132)
    at org.apache.my-Faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:61) 
```

请建议如何在 JBoss 5.0 EAP 中解决这个问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T12:13:48.477

看起来您的应用程序正在抛出您所看到的异常，因为在 JBoss 5.0 下运行时不存在 Apache XMLBeans JAR 或类。似乎 Apache POI 正在尝试加载该类`org.apache.xmlbeans.XMLOptions`，但找不到该类。

该消息`Could not initialize class SomeClass`表明 JVM 已两次尝试加载和静态初始化该类，但均失败`SomeClass`。在这种情况下，有问题的类是`org.apache.poi.POIXMLDocument`。

类的静态初始化包括静态初始化其超类、为所有`static`字段分配值和运行所有`static`初始化程序块。POIXMLDocument[类](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.poi/poi-ooxml/3.7-beta1/org/apache/poi/POIXMLDocument.java)有几个`static` `String`常量，不会引起任何问题，但没有静态初始化程序。然而，它是[POIXMLDocumentPart](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.poi/poi-ooxml/3.7-beta1/org/apache/poi/POIXMLDocumentPart.java#POIXMLDocumentPart)的子类，它是的子类`Object`，具有以下静态初始化代码：

```
 private static POILogger logger = POILogFactory.getLogger(POIXMLDocumentPart.class);

    public static final XmlOptions DEFAULT_XML_OPTIONS;
    static {
        DEFAULT_XML_OPTIONS = new XmlOptions();
        DEFAULT_XML_OPTIONS.setSaveOuter();
        DEFAULT_XML_OPTIONS.setUseDefaultNamespace();
        DEFAULT_XML_OPTIONS.setSaveAggressiveNamespaces();
    } 
```

如果 JVM 无法加载所有`POILogger`,`POILogFactory`和`XmlOptions`类，此静态初始化将失败。

`POILogger`和`POILogFactory`类都是从包中导入的，`org.apache.poi.util.POILogFactory`并且这两个类都包含在 poi-3.7.jar 中，所以它们不是这里的问题。因此，通过消除，似乎必须缺少ed from的`XmlOptions`类。`import``org.apache.xmlbeans.XmlOptions`

我发现这个`XMLOptions`类`xbean.jar`包含在可从[此处](http://www.mirrorservice.org/sites/ftp.apache.org/xmlbeans/binaries/)的一个镜像下载的`lib`文件夹中。`xmlbeans-2.6.0.zip`

在我看来，添加这个 JAR 可能会解决 JBoss 5.0 EAP 上的问题。但是，我知道您说您的应用程序在 JBoss 5.1 GA 中运行良好，这对我来说意味着 JBoss 5.1 GA 包含此 JAR 的副本，而 5.0 EAP 没有。因此，我不确定解决此问题的最佳方法是什么。我会犹豫是否将此 XMLBeans JAR 添加到您的应用程序中，因为这样做可能会在您在 JBoss 5.1 下运行它时导致问题。不过，我不知道是否有办法向 JBoss 5.0 添加额外的“库”JAR - 也许这值得一看？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-08T15:29:48.680

我在使用 Apache POI 3.14 的 JBoss 8.2 (WildFly 8.2.0.Final) 上运行时遇到了同样的错误

错误：

原因：java.lang.NoClassDefFoundError：无法初始化类 org.apache.poi.POIXMLTypeLoader

我通过将最新的 xmlbeans-2.6.0 jar（我以前有 2.4.0）包含到我的部署中来解决此问题，该部署包含在 ooxml-lib 文件夹中的 Apache POI 3.14 发行版中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-03T13:14:10.077

将以下罐子放在类路径中就可以了：

*   dom4j-1.6.1.jar

*   poi-3.9-20121203.jar

*   poi-ooxml-3.9-20121203.jar

*   poi-ooxml-schemas-3.9-20121203.jar

*   xmlbeans-2.3.0.jar

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T10:30:51.273

只添加 xbean.jar 是无法解决问题的。它将继续抱怨找不到类。我所做的是不仅导入 xbean.jar 还导入 xmlbeans-2.5.0 的 lib 文件夹下列出的其他 jar 文件

# javascript - 如何在本地机器上离线读写 JSON？

> ID：13284566
> 
> 赞同：1
> 
> 时间：2012-11-08T07:38:57.143
> 
> 标签：javascript, python, json, storage, offlineapps

**问题**

我需要一种在本地（共享）机器上托管的完全离线（！）Web 应用程序中存储和收集 JSON 数据的方法。有几个人会访问该应用程序，但它永远不会真正在线。

我希望该应用程序：

*   以编程方式连续读写 JSON 数据（即不使用文件上传类型模式）
*   最好不需要安装浏览器以外的任何软件，特别是我不想使用本地服务器。（**编辑**：如果有帮助，我可能愿意学习一点 Python）
*   我需要存储的数据量很小，因此使用某种数据库非常过分。

**解决方案？**

我的第一个想法是让 html5 文件 API，只需读取/解析我的 JSON 对象并将其写入本地 txt 文件，但这似乎不可能？！

本地存储在这里不适用，当几个人 - 每个人都有自己的浏览器 - 需要访问 html 时？

有任何想法吗？

**笔记**

我知道这个话题并不完全新颖，但我认为我的情况可能与其他线程略有不同。而且我在过去几个小时的大部分时间里都在谷歌上搜索这个，但我一点也不聪明..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:48:58.510

你考虑过 Python 的 Json 模块吗？[http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

使用它，您可以将 python 对象与 json 字符串相互转换。您可以根据需要存储字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:37:23.323

您不能使用 Localstorage 来启用此类功能，因为每个客户端都会存储自己的数据集。

您是否考虑过使用 java 小程序来处理此类信息？

您可以启动一个 java 小程序，将其用作浏览器客户端之间的桥梁和信息存储。浏览器可以使用 websocket 共享此类信息。

前段时间我用这样的解决方案构建了演示。检查它：[https](https://github.com/KingRial/SBrower) ://github.com/KingRial/SBrower 在这个演示中，我打开一个浏览器/选项卡，它启动一个 java Applet 来创建一个 websocket 服务器。所有浏览器/选项卡只是连接到 websocket 服务器并共享信息的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:49:17.463

由于python是问题标签之一，我给出了一个python解决方案：

```
import json

#reading
file_json = open("json.txt")
print file_json
python_json_object = json.loads(file_json)
print python_json_object
file_json.close()

#writing
file_json = open("json.txt", 'w')
file_json.write(json.dumps(python_json_object)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:49:22.380

我的建议是类似于 WampServer（Windows、Apache、MySQL、PHP）。我看过一些关于将 Python 添加到该组合中的教程。

您将有权读取 JSON 数据并将其写入本地存储或将数据放入本地数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T08:20:10.223

我知道您说您不想选择本地服务器，但`nodejs`可能是解决方案。如果您了解 JavaScript，那么设置一台服务器并让每个人都可以从任何浏览器访问该服务器非常简单。由于它完全是 JavaScript，因此您甚至不会遇到 JSON 格式的转换问题。

为了存储 JSON，您可以使用 nodejs 的 FileSystem 内置库，它允许您从文件读取和写入，因此您甚至不需要数据库。

# c# - 一个 While 循环线程

> ID：13284569
> 
> 赞同：4
> 
> 时间：2012-11-08T07:39:13.553
> 
> 标签：c#, while-loop

因此，我一直在尝试创建一些代码，在 while 循环上发送数据，特别是通过 UdpClient 将活动数据包发送到服务器。

```
 static void doSend(string ip, int port)
    {
        while (isSending)
        {
            _sockMain = new UdpClient(ip, port);
            // Code for datagram here, took it out
            _sockMain.Send(arr_bData, arr_bData.Length);
        }
    } 
```

但是当我调用“停止”方法时，它会陷入一个不断循环并且不会出来。如何将while循环放入线程？所以我可以在停止时中止线程，取消循环？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T08:14:42.827

它挂起是因为您的 doSend 方法适用于 UI 线程。您可以使用类似下面的类使其在单独的线程上运行，或者您可以使用[BackgroundWorkerClass](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

```
public class DataSender
    {
        public DataSender(string ip, int port)
        {
            IP = ip;
            Port = port;
        }

        private string IP;
        private int Port;
        System.Threading.Thread sender;
        private bool issending = false;

        public void StartSending()
        {
            if (issending)
            {
                // it is already started sending. throw an exception or do something.
            }
            issending = true;
            sender = new System.Threading.Thread(SendData);
            sender.IsBackground = true;
            sender.Start();
        }

        public void StopSending()
        {
            issending = false;
            if (sender.Join(200) == false)
            {
                sender.Abort();
            }
            sender = null;
        }

        private void SendData()
        {
            System.Net.Sockets.UdpClient _sockMain = new System.Net.Sockets.UdpClient(IP, Port);
            while (issending)
            {
                // Define and assign arr_bData somewhere in class
                _sockMain.Send(arr_bData, arr_bData.Length);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T07:52:44.183

您可以使用 backgroundworker 线程[http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker) 并在 dowork() 中放置您的 while 循环。您可以使用 CancelAsync() 停止代码并设置`backgroundWorker1.WorkerSupportsCancellation == true`

```
BackgroundWorker bw = new BackgroundWorker();
          if (bw.IsBusy != true)
          {
              bw.RunWorkerAsync();

          }

          private void bw_DoWork(object sender, DoWorkEventArgs e)
          {
              // Run your while loop here and return result.
              result = // your time consuming function (while loop)
          }

          // when you click on some cancel button  
           bw.CancelAsync(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:48:44.563

```
static bool _isSending;

static void doSend(string ip, int port)
{
    _isSending = true;

    while (_isSending)
    {
        _sockMain = new UdpClient(ip, port);
        // ...
        _sockMain.Send(arr_bData, arr_bData.Length);
    }
}

static void Stop()
{
    // set flag for exiting loop here
    _isSending = false;    
} 
```

还要考虑在 PascalCase 中命名您的方法，即`DoSend`（甚至`StartSending`会更好）`StopSending`，.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T07:41:58.870

使用`BREAK`语句怎么样？

# asp.net - 将本地化文本存储在数据库或资源文件中？

> ID：13284570
> 
> 赞同：0
> 
> 时间：2012-11-08T07:39:20.940
> 
> 标签：asp.net

目前在我的 Asp.Net 网站中，我将本地化文本存储在数据库的表中。该表包含三列：

```
TextCode nvarchar(100),
CultureId int,
TextString nvarchar(MAX) 
```

因此，每当我需要获取特定文化的本地化文本时，我只需进行一个简单的查询。

这种方法的主要优点很简单，而且我可以在我的网络应用程序运行时更新文本。

明显的缺点是性能。我在其他桌面应用程序中使用资源文件进行本地化。我选择数据库的原因是我的印象是更新 asp.net 中的资源文件会导致 Web 应用程序重新加载，因此我需要在更新资源文件时使站点脱机。假设是真的吗？在 Asp.Net 中存储本地化文本的“常用”方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:30:41.483

`Common`方法是使用全局和本地资源文件。如果要使用数据库，请考虑使用带有 sql 缓存依赖项的 asp.net 缓存。在应用程序启动时，从 sql server 加载所有资源数据并将其存储在缓存中，并创建一个实用程序类以根据资源键从缓存中返回数据。

# scala - Play 2.0 中的存根控制器

> ID：13284579
> 
> 赞同：0
> 
> 时间：2012-11-08T07:40:16.147
> 
> 标签：scala, testing, mocking, playframework-2.0, stub

我正在尝试遵循[Mock Objects in Play[2.0] 中](https://stackoverflow.com/questions/10053424/mock-objects-in-play2-0)的示例，但不幸的是我没有成功。

我有一个使用 UserModel 的 UsersController。

```
trait UserModel extends ModelCompanion[User, ObjectId] {
 // ...
} 
```

接下来，抽象控制器

```
abstract class UsersController extends Controller {

  val userModel: UserModel

  def sayHello = Action(parse.json) { request =>
    // return a play Action. Doesn't use userModel
  }

  // Other methods

} 
```

在路由文件中，我以这种方式调用方法 say Hello：

> POST /hello controllers.Users.sayHello

在测试目录中，我使用 UserModel 模拟创建了 UsersController 的子类。

```
package controllers

import org.specs2.mock.Mockito

object UserControllersTest extends UsersController with Mockito {
  val userModel = mock[models.UserModel]
} 
```

现在，主要部分。我按照前面提到的页面中的 Jacob Groundwater 示例创建了一个 Spec 测试。在 FakeApplication 的 pluing 参数中，我包含了对 UserControllersTest 的调用。

```
package controllers

import org.specs2.mutable.Specification

import play.api.libs.json.Json
import play.api.test._
import play.api.test.Helpers._

class UsersSayHelloSpec extends Specification {

  running(FakeApplication()) {

    "Users.SayHello" should {

      def sendJson(jsonMap: Map[String, String], shouldBeCorrect: Boolean) = {
        running(new FakeApplication(
          additionalPlugins = Seq("controllers.UserControllersTest"))) {
          // Preapration 
          val jsonRequisition = Json.toJson(jsonMap)
          val Some(result) = routeAndCall(FakeRequest(POST,
              "/hello",
              FakeHeaders(Map("Content-Type" -> Seq("application/json"))),
              jsonRequisition))

            // ...
        }
      }

      "Not process a empty String" in {
        sendJson(Map.empty[String, String], false)
      }

      // Other tests calling sendJson ...
    }

  }

} 
```

但是，当我运行测试时，我收到了以下错误消息：

```
[info] Users.SayHello should
[error] ! Not process a empty String
[error]     PlayException: Cannot load plugin [Plugin [controllers.UserControllersTest] cannot been instantiated.] (Application.scala:171)
...
[error] play.api.Application.<init>(Application.scala:158)
[error] play.api.test.FakeApplication.<init>(Fakes.scala:141)
[error] controllers.UsersSayHelloSpec$$anonfun$1$$anonfun$apply$5.sendJson$1(UsersSayHelloSpec.scala:20)
[error] controllers.UsersSayHelloSpec$$anonfun$1$$anonfun$apply$5$$anonfun$apply$26.apply(UsersSayHelloSpec.scala:46)
[error] controllers.UsersSayHelloSpec$$anonfun$1$$anonfun$apply$5$$anonfun$apply$26.apply(UsersSayHelloSpec.scala:46) 
```

UsersSayHelloSpec.scala:20 指的是我调用运行方法的行。

所以我的问题是：我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:47:50.730

我不确定你到底想做什么，但问题的答案是“我做错了什么？” 是：

参数 'additionalPlugins' 用于附加 Play 插件，而 'controllers.UserControllersTest' 不是 Play 插件。它是一个控制器。

您可以在此处阅读有关 Play 2 插件的信息：[http ://www.objectify.be/wordpress/?p=464](http://www.objectify.be/wordpress/?p=464)

您是否尝试过这些示例：[http](http://www.playframework.org/documentation/2.0.4/ScalaFunctionalTest) ://www.playframework.org/documentation/2.0.4/ScalaFunctionalTest ？

# actionscript-3 - 动作脚本中的静态函数

> ID：13284581
> 
> 赞同：0
> 
> 时间：2012-11-08T07:40:21.793
> 
> 标签：actionscript-3, apache-flex

我有一个应用程序，它被多个用户同时使用。我想使用一个通用函数，例如数字格式

```
 public class CustomFormat
  {
     public static function funt(val:int,prec:int):int
     {
        // return val with formatting along with prec
     }
  } 
```

因为`static`函数附加到类而不是实例。

现在假设两个用户同时调用它的情况，`CustomFormat.funt(2,2);`这`CustomFormat.funt(3,3);`将如何起作用。我想结果中可能有我的问题。尝试仍然我没有实现这个，所以任何建议，如果这有问题，那么我需要为每个请求创建一个对象或我需要做的任何其他事情

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:50:18.650

您对什么是基于 swf 的应用程序有误解。

加载您的应用程序的每个用户都将拥有该应用程序的唯一实例：它是在您用户的**浏览器中运行的****客户端**应用程序。多个用户不可能同时访问您的静态函数，因为它不是那样运行的（即在服务器内部）。

 **并且考虑到您的应用程序是单线程的（您没有使用[AS3 Workers](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)），对静态函数的每个调用都将按顺序执行。

在其他情况下，您应该将静态函数视为共享资源，因此您必须实现并发机制以确保正确访问它。**

# javascript - 在下一个动作之前等待几秒钟 - Javascript

> ID：13284583
> 
> 赞同：4
> 
> 时间：2012-11-08T07:40:28.483
> 
> 标签：javascript

正如代码中所评论的那样，在检查`else if`之后我需要等待`writeFile(lFileData);`。如何做到这一点？

```
for(var i=0;i<mLocalStorageCount;i++)
        {

            if(i <= 1)
            {

                writeFile(lFileData); //This action takes a lot of time with its call backs. I need a wait here. 

            }

            else if(i > 1 && i <=3)
            {
                     someOtherfun()

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T10:44:02.347

```
if(i <= 1){
    writeFile(lFileData); 
    doAdelay();
}; 
```

和：

```
function doAdelay(){
    setTimeout(function(){return true;},30000);
}; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T07:50:15.200

您可以在 elseif 函数中使用设置间隔

```
setTimeout(function,3000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:45:23.650

那么这意味着 writeFile 函数是异步的吗？

我会在 writeFile 函数本身中创建一个回调函数，然后执行 someOtherfun()。

**编辑**：由于您不能真正在回调函数中完成其余的迭代（您刚才说过），您可以执行以下操作：

```
function writeFile () {
    ... here goes your function ...
    if ( finished ) {
        window.finished = true;
    }
}

for (yourForCondition) {
    if () {
        window.finished = false;
        writeFile(); 
        while (!window.finished) {}
    }

    if () {
        someOtherFun();
    }
} 
```

它有点脏，但它应该可以工作。它会循环直到 writeFile() 说他完成了。

**Edit2**：可能不会工作，因为“while (!window.finished) {} 是一个忙等待循环，它将一个核心与 100% 挂钩，并可能使浏览器询问用户是否应该终止脚本。 – Frédéric Hamidi”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:47:40.793

您可能希望重写代码以使您想要运行的部分在其自己的函数中延迟运行。从那里通过调用 performFunctionXAfterDelay() 调用该函数：

```
function performFunctionXAfterDelay() {
  // 1000 ms delay
  window.setTimeout(functionX,1000)

}

function functionX() {
   // YOUR TIME DELAYED CODE
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T07:51:12.173

```
var t = setInterval("javascript expression", milliseconds);

clearInterval(t); 
```

你可以用`setInterval`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T07:53:29.860

嗨，我认为在执行“else if(i > 1 && i <=3)”代码之前不需要等待。因为如果“if(i <= 1)”条件为真并且“writeFile(lFileData);”被执行，“else”部分将不会被控制并且“someOtherfun()”将不会被执行。:)

# flash - AS 2.0 类不能访问自己的高度或宽度？

> ID：13284584
> 
> 赞同：0
> 
> 时间：2012-11-08T07:40:43.470
> 
> 标签：flash, oop, actionscript-2

我正在使用一些 Flash 横幅，并且有一段时间没有接触 ActionScript 类，这可能是我第一次编写 AS 2.0 类。我刚试过这个：

```
class AdPage {

    public function AdPage() {
        trace("AdPage added to stage.");
            trace( this._width );
    }

} 
```

编译器似乎坏了。它在构造函数处停止处理，我再也看不到 MovieClip 宽度的痕迹。我想，“好吧，构造函数太快了。” 并将其取出并在构造函数之外的函数中尝试相同的代码。但它仍然会使编译器崩溃。这是Flash中的东西吗？您不能从其自身内部（从技术上讲，从它自己的类内部）获取 MovieClip 的高度或宽度？您必须从实例外部的东西中获取它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:45:32.623

如果你想让 AdPage 成为一个 MovieClip，你需要基于 MovieClip；

```
class AdPage extends MovieClip { 
```

# c# - 如何在 FFT 中使用窗口

> ID：13284586
> 
> 赞同：1
> 
> 时间：2012-11-08T07:41:00.417
> 
> 标签：c#, .net, aforge

我不明白如何在 FFT 中使用窗口。我将 C# 与 Aforge.Math 一起使用。我用这个：

```
Array[i] = new Complex(buffer, 0);
Array[i].Re *= 0.5 * (1 - Math.Cos((2 * Math.PI * i) / 4097));
//Hanning window 
```

在这之后：

```
FourierTransform.FFT(Array, FourierTransform.Direction.Forward); 
```

如果我理解正确，这个窗口在做什么，那段代码会给我带来不好的结果。请解释一下，我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T03:09:12.763

我能够使用`FourierTransform.Direction.Backward`.

# android - 谷歌分析 - 安卓问题

> ID：13284587
> 
> 赞同：2
> 
> 时间：2012-11-08T07:41:04.150
> 
> 标签：android, google-analytics

我正在使用 Google Analytics 来跟踪我的 android 应用程序。我的 analytics.xml 文件粘贴在下面：

```
<!-- Replace placeholder ID with your tracking ID -->
<string name="ga_trackingId">UA-36116792-1</string>

<!-- Enable Activity tracking -->
<bool name="ga_autoActivityTracking">true</bool>

<!-- Enable automatic exception tracking -->
<bool name="ga_reportUncaughtExceptions">true</bool>

<string name="ga_appName">MyRemoteApp</string>
<string name="ga_appVersion">V3</string>

<bool name="ga_anonymizeIp">true</bool>
<bool name="ga_debug">true</bool>

<string name="philips.myremote.epg.EPGViewforPhone">TV Guide</string> 
```

我期望在 Google Analytics（分析）仪表板中，屏幕视图应该在标题“电视指南”下可见，但我得到的是“philips.myremote.epg.EPGViewforPhone”。我该如何解决这个问题或我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:31:38.537

Google Analytics 使用规范类名称从资源中获取活动名称。

在日志中写入您的活动规范名称：

```
Log.i("TAG", getClass().getCanonicalName()); 
```

并在资源中使用此名称作为键。

# asp.net - global.asax 函数未从 Application_Start 调用

> ID：13284590
> 
> 赞同：0
> 
> 时间：2012-11-08T07:41:22.823
> 
> 标签：asp.net, vb.net, multithreading, iis

我正在 global.asax 文件中编写一个函数，该函数需要从 application_start 中声明的线程调用。它在我的调试模式下工作正常，但在托管时不调用回调函数。

```
Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        writeLog("Application Initialized")
        writeLog("Thread is starting....")
        Dim T As New Threading.Thread(AddressOf UpdateQueue)
        T.Start()
        writeLog("Thread Started....")
    End Sub
    Sub UpdateQueue()
        writeLog("UpdateQueue entry")
        While Q.Count > 0
         ' Some logic
        End While
        writeLog("UpdateQueue going for idle state")
        Threading.Thread.Sleep(5000)
        UpdateQueue()
    End Sub 
```

我看到像 Thread Starting Thread Started 这样的日志文件

但没有在“UpdateQue”功能中打印的其他消息我也尝试了其他方法。1\. 使用定时器：与上述相同的问题 2\. 使用 Thread.Timers：与上述相同的问题 3\. 直接从 application_start 调用 UpdateQueue 函数：进入 UpdateQue 函数并写入日志条目。

我无法弄清楚为什么服务器出现问题。我在我的公共 IP（不是来自托管服务提供商）中使用 IIS 7，因此我可以根据需要进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:58:53.803

ASP.NET 不像桌面应用程序那样工作。你不能启动一个线程并让它自己运行。当用户执行请求并且应用程序池处于睡眠状态时，会调用应用程序启动。当它唤醒时，会调用 Application Start，但是一旦函数完成，您创建的任何线程都将在用户请求/响应的其余部分完成时终止。

我可以说的最简单的方法是，您在 HTTP 请求上启动的任何线程都必须在该用户的请求/响应完成之前终止，否则您将收到“线程已中止”异常错误。

我发现 ASP.NET 中线程的最大用途是使用外部资源（例如 API）。如果您需要在通话中点击多个外部资源，您可以同时让它们全部运行，但您必须在请求/响应完成之前加入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:10:26.910

在托管服务器上上传代码后，您需要重新启动 IIS 服务器

开始菜单 > 运行 > iisreset

# css - 如何设置 webkit-transform-origin 在其边缘滚动 3D 立方体？

> ID：13284593
> 
> 赞同：6
> 
> 时间：2012-11-08T07:41:43.047
> 
> 标签：css, transform

我正在摆弄 CSS3 透视图和转换。从[这个很棒的 3D 立方体示例](http://www.paulrhayes.com/experiments/cube-3d/)开始，我想修改立方体，使其不仅围绕其中心旋转，而且在其边缘滚动。

我通过围绕 z 轴旋转立方体来获得第一个左倾斜工作，使用`-webkit-transform-origin: bottom left`（[见小提琴](http://jsfiddle.net/netzwerg/evYYm/)；为简单起见，示例仅限于左倾斜）。对于随后的左倾斜，我正在努力如何进一步调整原点。从概念上讲，我需要设置相对于父容器的原点（即对于连续的左倾斜，它应该以 200px 的步长逐渐向左游荡）。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:38:46.923

我已经对此进行了尝试，我认为您需要研究可用的 css[矩阵转换](http://www.w3schools.com/cssref/css3_pr_transform.asp)以获得您想要的结果。

不幸的是，它不像旋转那么简单，然后移动变换原点。发生的情况是立方体围绕该边缘旋转，但是如果您移动变换点，它会使用这个新的原点将先前的变换应用于立方体。

更重要的是，您还需要平移立方体的位置。您不能仅使用旋转来移动它。我认为矩阵应该可以解决所有这些问题（恐怕我对它们了解不多）

您可以看到我创建的修改后的 jsfiddle，其中立方体被旋转和平移。平移点虽然是中心，但看起来立方体并没有“滚动”。这是关键的额外代码：

> ```
> ...
> 
> //left
> zAngle -= 90;
> xPos -= 50;
> //rotate and translate the position of the cube
> $('#cube')[0].style["WebkitTransform"]="translateX("+xPos+"px) rotateZ("+zAngle+"deg)";
> 
> ... 
> ```

js 小提琴在这里：http: [//jsfiddle.net/DigitalBiscuits/evYYm/20/](http://jsfiddle.net/DigitalBiscuits/evYYm/20/)

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T02:37:39.603

我认为本教程可能会对您有所帮助。

[http://desandro.github.io/3dtransforms/docs/cube.html](http://desandro.github.io/3dtransforms/docs/cube.html)

如果你想滚动它的边缘，只需旋转 Z 和 translateX。但是你想旋转多快，你可能需要计算它。

[http://desandro.github.io/3dtransforms/examples/cube-02-show-sides.html](http://desandro.github.io/3dtransforms/examples/cube-02-show-sides.html)

# sql - 如何让 sql 查询在 excel 中运行得更快？

> ID：13284597
> 
> 赞同：1
> 
> 时间：2012-11-08T07:42:02.653
> 
> 标签：sql, excel, excel-2007, vba

为了优化报告，我将其中存在的所有数据透视表更改为 sql 查询，因为使用数据透视不是一种有效的编码方式。然而令我惊讶的是，sql 查询比 pivot 花费更多的时间。是否有任何标准方法来优化 sql 查询或连接以使我的工具运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:38:17.097

鉴于您可以选择在生产中合法使用并且可以自由地尝试一些健壮的 DBMS，那么您可以在每个数据库上测试您的数据。

这将允许您评估每种连接类型和 DBMS 的性能。您可能不必重新发明轮子，因为那里的许多开发人员已经在这些 DBMS 上尝试了大多数 DML 语法。在大多数相关领域都提出了问题。

为了使选择过程更快，您可以使用最关键/需求最高的表/数据，并执行查询，该查询会唠叨每个可能的表以输出一些“超级”数据......

对所选 DMBS的**支持**的可用性对于指导您完成非常重要。特别是如果您在当前/未来计划迁移/集成到某些平台/外部 BI 工具中。例如，我们参与了将我们的实时报告引擎从 Excel/Access 迁移到 Oracle 和 Microstrategy。那时很忙，因为没有多少已证明的资源可供我们使用。

这完全取决于您设计数据库的可扩展性、数据的访问频率（无论是实时的/每天/每周只运行一次/两次批处理）

只是为了增加一点**兼容性**，Excel 和 MySQL server 2008 似乎在更友好的情况下工作。也许他们是由同一*所房子支持的*

# android - Android侧导航菜单：如何在滑动视图中包含操作栏？

> ID：13284602
> 
> 赞同：5
> 
> 时间：2012-11-08T07:42:16.013
> 
> 标签：android, android-actionbar, android-menu

我想在我的 android 应用（如 Facebook、Google+、Spotify、Prixing、Evernote 等）中添加一个侧边导航菜单

我已经看过了：[Android Facebook 风格的幻灯片](https://stackoverflow.com/questions/8657894/android-facebook-style-slide/8673805) 和这里：[https ://github.com/Gregadeaux/android-fly-in-app-navigation](https://github.com/Gregadeaux/android-fly-in-app-navigation)

通过遵循最后一个链接，我得到了一个我定制的工作实现。

![](../Images/1241af1950db14d93f56d81bb6092119.png)

如您所见，操作栏不会滑动。这很正常，因为它不是 Gregadeaux 实现中滑动视图的一部分。

我想在滑动视图中包含操作栏。通过对操作栏进行自定义实现可能是可能的，但我想保留原来的。

Google+ 应用似乎没有使用自定义操作栏。

[![](../Images/4e08fe3be2334975466069a69d738daa.png)](https://i.stack.imgur.com/4MJly.png)

知道我该怎么做吗？谢谢 ：）

编辑：经过一番搜索，我最终发现 Google+ 应用正在使用自定义操作栏实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:28:14.000

我找到了更好的解决方案！超级好用，超级灵活。

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

编辑：

请注意，现在应该使用新的导航抽屉以符合 android 设计指南。检查[http://developer.android.com/design/patterns/navigation-drawer.html](http://developer.android.com/design/patterns/navigation-drawer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:04:56.477

它在同一个问题中得到了回答。答案是“这个也将操作栏滑开！”。[回答](https://stackoverflow.com/a/11532163/1068546) [博客文章](http://www.coboltforge.com/2012/07/tech-stuff-a-sliding-menu-for-android-very-much-like-the-google-and-facebook-apps-have-it/)

# shell - 历史记录返回的行数

> ID：13284609
> 
> 赞同：1
> 
> 时间：2012-11-08T07:42:59.510
> 
> 标签：shell, unix, zsh, iterm

在 OSX 系统、ZSH shell 和 iterm2 终端上，我正在运行：

```
$history 
```

结果是最后 10 个命令。

如何增加默认返回行数？

我可以

```
$history -20 
```

并且可能也将其别名为历史，但我想知道是否有一些设置可以本地控制它。另外，请不要与 HISTSIZE 混淆，这是一个单独的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:34:39.917

似乎没有这样的配置可用。

选项很简单：

```
alias history="history -30" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:29:26.977

只需将历史命令包装到一个函数中：

```
h () { history ${1:-\-30} } 
```

默认情况下，您将获得最后 30 个历史条目，并且仍然可以选择将参数更改为另一个值。

# linux - 发送到源地址

> ID：13284615
> 
> 赞同：0
> 
> 时间：2012-11-08T07:43:27.303
> 
> 标签：linux, sockets, client-server

当`sendto()`用于通过udp套接字发送数据时，在`sendto`调用中指定了目标地址，但我们在哪里指定源地址。我使用的目标地址（服务器）是 5001::1，在服务器日志中我看到一条消息说请求来自 5001::2 端口 12345。如果我想将源地址更改为 5001::20。我敢肯定这是一个愚蠢的问题。但请澄清。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:45:50.083

源地址是发送数据包的计算机的地址。这是由操作系统自动填写的，这样当其他计算机回复时，回复数据包就会到达正确的位置。如果要更改源地址，请更改分配给网络接口的地址。

# sql-server - UNIX SAS 与 SQL SERVER 窗口身份验证的连接

> ID：13284616
> 
> 赞同：0
> 
> 时间：2012-11-08T07:43:32.630
> 
> 标签：sql-server, unix, odbc, sas

我在 Windows XP 上有一个 UNIX SAS 和 SQL Server。我正在尝试在 Windows 身份验证模式下建立 UNIX SAS 和 SQL Server 之间的连接。我建立了一个 ODBC 连接，但是当我尝试使用以下命令进行连接时：

```
libname odbclib odbc noprompt="dsn=SQLDataODBC;Trusted_Connection=yes" schema=DBO; 
```

我收到以下错误：

```
"ERROR: The ODBC engine cannot be found." 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:04:25.490

听起来`SAS/Access to ODBC`您的 UNIX 服务器上没有安装该产品。那是单独许可的产品，而不是“基本” SAS 的一部分。

如果您认为您可能想要添加此产品，请联系您的站点管理员。如果您主要处理 . `SQL Server`，请考虑添加`SAS/Access to SQL Server`产品。

# java - Java 服务器上的 OpenID

> ID：13284619
> 
> 赞同：1
> 
> 时间：2012-11-08T07:43:43.167
> 
> 标签：java, openid

我正在开发一个项目，该项目需要来自 Web 服务器和自定义 Java 套接字服务器（在 netty 上运行）的用户身份验证。

如果我可以使用 OpenID 进行用户登录，那就太好了……但是当我正在阅读它时，它似乎仅适用于网络服务器……

我也可以使用来自专有套接字服务器的 OpenID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:58:35.720

你是说你希望你的 web 应用程序和你的 netty-socket-application 都通过 OpenID 进行身份验证？

正如您所发现的，Web 应用程序部分（相当）简单。套接字有点棘手，因为我假设您不是在说 HTTP 并且客户端不是浏览器 - 最后一部分确实是关键，因为您的客户端必须了解来自套接字应用程序的挑战意味着他们应该重定向到WhateverOpenID并获得授权，然后被重定向回来......

您可以考虑单点登录解决方案，其中任何用户都必须首先在 Web 应用程序上获得授权，然后给予安全令牌以用作套接字服务器的身份验证？

干杯，

# matlab - 提取结构数据以将它们分配到具有可变大小的矩阵中

> ID：13284620
> 
> 赞同：0
> 
> 时间：2012-11-08T07:43:57.613
> 
> 标签：matlab, variables, matrix, structure, extract

我在 MATLAB 中有一个图像的轮廓数据结构。如下：

```
s = 
1x59 struct array with fields:
    level
    numel
    xdata
    ydata
 %s(k).level contains the contour level height of the k-th line.
% s(k).numel contains the number of points describing the k-th line.
% sk).isopen is True if the k-th contour is open and False if it is closed.
% s(k).xdata contains the x-axis data for the k-th line as a column vector.
% s(k).ydata contains the y-axis data for the k-th line as a column vector 
```

我必须将 s(k).xdata 和 s(k).ydata 提取到可变大小的矩阵中。这是我制作的程序

```
for k=1:59;    
    if (k==1);
        i(k)=s(k).numel;  
        [i,2]=size(S{k}(:,:));
        x=s(k).xdata;
        y=s(k).ydata;
        S{k}(:,:)=[x y];       
    elseif (k>1 && k<=59)
        i(k)=s(k).numel;  
        l=i(k-1)+i(k)
        [i,2]=size(S{k}(:,:));
        x=s(k).xdata;
        y=s(k).ydata;
        S{k}(:,:)=[x y]; 
        S(:,:)=[S{k-1}(:,:);S{k}(:,:)];  
    end   
end 
```

？？？错误：用于多个 LHS 分配的数组不能包含数值

谁能帮我？非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:25:31.967

以下内容应替换您的所有代码：

```
S = cell2mat(arrayfun(@(x)[x.xdata x.ydata],s','UniformOutput',false)) 
```

这将创建一个包含您的代码调用的元素的元胞数组，`[x y]`并将其组合成一个数组`S`。

请注意，`size`在您的代码中调用不会设置 的大小`S{k}`，它只是尝试设置`i`为大小。

# php - MySQL 三张表，一张表包含另外两张表的链接值

> ID：13284628
> 
> 赞同：0
> 
> 时间：2012-11-08T07:44:51.403
> 
> 标签：php, mysql

我用 mysql 支持编写 php 应用程序。Idea 基于包含特征的表单字段，可以从网站模板中添加和删除。通过表单字段，我插入创建特征的值，并且可以是所有类型：复选框、单选组、选择、文本...等，并且一些选择可以链接。这种解释只是为了获得更广阔的视野。

我的数据库设计包含三个表：

FIRST包含物品内容-产品；

SECOND 包含特征值 - charact_values;

THIRD 每行必须包含第一个和第二个表的 id，它链接这两个表值。

那么我现在的价值观是属于每个产品的。

我不想要重复的值，我只想将它们链接到第三个表中。我现在不知道用户会为产品添加多少特征，并且有了这个 shema 是可能的。

我担心的是当用户放置 5 000 个产品并且每个产品将具有大约 100 个特征时会发生什么，即第三个表中大约有 500 000 行。

第三张桌子太多了吗？也许存在一些我可以用于该功能的其他数据库设计。我想不出另一个不会在某个表中产生大量行的shema。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:51:05.820

在我看来，您的架构是实现您的场景的正确且规范化的方式。即使第三张表可能会有数万条记录，您也不会一次查询它们。

例子。您可能会显示产品列表，然后只有在选择产品时，您才会查询特征。因此，尽管数据库很大，但我认为它不会造成任何问题。

继续使用此架构本身。

# android - 单选按钮 setOnCheckedChangeListener 时无法获取 EditText 值

> ID：13284630
> 
> 赞同：0
> 
> 时间：2012-11-08T07:44:55.490
> 
> 标签：android, radio-button, android-edittext

我想`EditText`在单选按钮时获取字符串中的值`setOnCheckedChangeListener(false)`并这样做

```
String  strmusic = "MyString";
EdiText interst_edt;

rdbtn_music.setOnCheckedChangeListener(new OnCheckedChangeListener() {          
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {            

                if(rdbtn_music.isChecked()){                            
                    interst_edt.setText(strmusic.toString());
                    Log.i("HotSpot", "Interest strmusic values-"+strmusic +""+isChecked);                       
                }else{
                     strmusic = interst_edt.getText().toString();                   
                    Log.i("HotSpot", "Interest strmusic values-"+strmusic +""+isChecked);
                }
            }
        }); 
```

但问题是`strmusic 字符串值未使用Edittext 中的新给定字符串更新，我做错了请向我提问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:55:40.700

我得到了你的问题的解决方案。尝试执行以下代码。

```
 RadioButton radioButton;
    EditText editText;

    String strmusic = "MyString";
    boolean BOOL = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        radioButton = (RadioButton) findViewById(R.id.radioButton1);
        editText = (EditText) findViewById(R.id.editText1);

        radioButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(v.getId()==radioButton.getId() && BOOL){
                    radioButton.setChecked(false);
                }else{
                    BOOL=true;
                }
            }
        });

        radioButton.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                Log.i("HotSpot", "Interest strmusic values- Before" + strmusic
                        + "" + isChecked);
                if (isChecked) {
                /*  Log.i("HotSpot", "Inside true");
                    editText.setText(strmusic.toString());
                    strmusic = editText.getText().toString();
                    buttonView.setChecked(false);
                    Log.i("HotSpot", "Interest strmusic values-" + strmusic
                            + "" + isChecked);*/
                    BOOL=false;
                } else {
                    Log.i("HotSpot", "Inside False");
                    strmusic = editText.getText().toString();
                    Log.i("HotSpot", "After Radio Button False Value of strmusic:" + strmusic
                            + "");
//                  buttonView.setChecked(true);

                }
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:49:19.070

当 onclick 中单选按钮的状态发生变化时，将调用 setOnCheckedChangeListener。检查它是否处于 false 状态。

并确保你初始化了你的edittext

EdiText interst_edt = (EditText) findViewById(R.id.edittext);

# java - 通知 POJO 收集项更改

> ID：13284637
> 
> 赞同：1
> 
> 时间：2012-11-08T07:45:31.430
> 
> 标签：java, spring, hibernate, spring-roo

我有一个简单的场景（类被简化）：

```
@Entity
@RooJavaBean
@RooToString
@RooJpaActiveRecord( finders = {"findEventsByBeginTime"})
class Event{
    @OneToMany
    @OrderBy("beginTime ASC")
    Set<EventStage> stages;

    Date beginTime;
    Date endTime;
} 
```

和

```
@Entity
@RooJavaBean
@RooToString
@RooJpaActiveRecord
class EventStage{
    @ManyToOne
    Event parentEvent;

    Date beginTime;
    Date endTime;
} 
```

每当对 EventStage 进行更改时，我想根据最早和最新的 EventStage 更新父 Event.beginTime 和 Event.endTime。

有没有办法（Roo、Hibernate、Spring）在项目被修改时通知？它必须适用于添加新的 EventStage 和删除现有的 EventStage。当然我可以通过一些蛮力检查来接近它，但我正在寻找更复杂的方法。

# asynchronous - 多线程集成测试的 MSTest 超时

> ID：13284644
> 
> 赞同：1
> 
> 时间：2012-11-08T07:45:56.783
> 
> 标签：asynchronous, timeout, unity-container, mstest

在我们的项目中，我们有几千个单元测试。其中一些是集成测试，需要更大的设置，并且还使用多线程/异步部分，以及设置对象的统一性。

这些集成测试通常运行得非常顺利，但在某些情况下，当执行解决方案中的所有测试（约 2.5k）时，异步组件似乎由于某种原因陷入死锁。（测试因超时而中止）

我已经上下搜索了几个小时的代码，但找不到任何可能发生死锁的原因。

顺便说一句，我们使用轮询来等待重新同步线程：

```
var foo = new SomethingThatIsModifiedByTheAsyncThreads();
this.SetupEverything();
this.AsyncComponentX.StartSomething(foo);

// wait for completion
while (foo.State != fooStates.AllDone)
{
Thread.Sleep(10);
}

// check output
Assert.IsTrue(this.CheckThatAllIsRight(foo)); 
```

这不是最好的方法，但我认为这不是问题（其他想法？）.. 所以，对我来说，异步的东西似乎根本没有完成，它没有设置将 foo.State 设置为 AllDone。但怎么可能呢？为什么只有在我**运行**（而不是调试）大量测试时才会发生这种情况？我怀疑 MSTest 有点搞砸了线程（其中有四个），而不是让它们运行。（顺便说一句，异步的东西作为特殊的异步模块运行，它们作为一个消息队列工作，每个都有一个工作线程/消息消费者线程。但是这些类似乎已经过尝试并且是真的。）

也很难弄清楚那里发生了什么，我正在努力扩展异步部分的日志记录。但是，我仍然不知道问题可能出在哪里，或者如何在不运行所有测试的情况下重现问题..任何指针？:/ 我已经阅读了有关 MSTest 的一些线程问题.. 是否有一些特殊的事情需要考虑？

# javascript - windows 8 应用程序：parentedComplete() 的含义是什么？

> ID：13284646
> 
> 赞同：1
> 
> 时间：2012-11-08T07:46:09.260
> 
> 标签：javascript, microsoft-metro

在开发win8 app的默认VS模板中，有一个函数：parentedComplete()，比如，

```
 args.detail.setPromise(
    WinJS.Promise.timeout().then(function () {
        if (that.pageElement.winControl && that.pageElement.winControl.unload) {
            that.pageElement.winControl.unload();
        }
        return WinJS.UI.Pages.render(args.detail.location, newElement, args.detail.state, parented);
    }).then(function parentElement(control) {
        that._previousPage = newElement.winControl;
        that.element.appendChild(newElement);
        that.element.removeChild(that.pageElement);

        **parentedComplete();** 
```

我找不到任何关于这个内置函数的文档，谁能给我解释一下这个函数。

# sql - 显示一个表中的所有记录和另一个表中的行总和

> ID：13284650
> 
> 赞同：1
> 
> 时间：2012-11-08T07:46:16.237
> 
> 标签：sql, sql-server, sql-server-2008

我有两张表 HouseKeeping，其中包含字段 RoomNo、FloorNo、StockItem、Requirement 和 Stock 表，其中包含字段 Item、Available。我想从 HouseKeeping 表中选择所有行，并从 stock 表中选择需求总和。我使用此查询来获取需求总和从库存表

`SELECT SUM(Requirement) AS Requirement, StockItem FROM HouseKeeping GROUP BY StockItem`

除此之外，我还想要所有记录（从股票中选择 *）。怎么做？请尽快回复。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:04:14.357

如果我理解正确：

`JOIN`这两个表是这样的：

```
SELECT h.stockItem, SUM(h.Requirement)
FROM HouseKeeping h 
INNER JOIN Stock s ON h.stockItem = s.Item
GROUP BY h.stockItem 
```

这将为您提供仅在另一个表`Requirement`中具有 a 的项目的所有值的总和。`Requirement``stock`

如果要包括那些不匹配的项目，即：`stock`表中没有项目。使用 a`LEFT JOIN`而不是`INNER JOIN`with`ISNULL(SUM(h.Requirement)`来设置 0 而不是`NULL`.

# android - Android Sqlite getReadableDatabase

> ID：13284652
> 
> 赞同：0
> 
> 时间：2012-11-08T07:46:22.760
> 
> 标签：android, sqlite

任何机构都可以帮助我吗？我正在做时间表应用程序，所以使用数据库。

我的程序在这里崩溃：

```
DatabaseHandler dbHelper = new DatabaseHandler(this.getApplicationContext());

                SQLiteDatabase db = dbHelper.getReadableDatabase(); //<---------------

                Cursor cur=null;
                 cur = dbHelper.fetchAll(db, "SELECT * FROM timetable");

                db.close(); 
```

我的 DatabaseHandler 类在这里：

```
public DatabaseHandler (Context context) {

    super(context,DATABASE_NAME, null,DATABASE_VERSION);

}

//Creating Table
@Override
public void onCreate(SQLiteDatabase db){

    String CREATE_TABLE = "CREATE TABLE" + TABLE_NAME + "("
            + KEY_ID + "INTEGER PRIMARY KEY," + KEY_SUBJECT_NAME
            + "TEXT," + KEY_SUBJECT_CODE + "TEXT," + KEY_SUBJECT_VENUE
            + "TEXT," + KEY_TIME + "INTEGER," + KEY_DAY + "INTEGER" + ")";

    db.execSQL(CREATE_TABLE);
}

//Upgrading Database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    // Create tables again
    onCreate(db);

}

 /**
 * All CRUD(Create, Read, Update, Delete) Operations
 */

//Insert data
public void insertValues(int day, int time, String name, String code, String venue) {

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();

    values.put(KEY_DAY, day);
    values.put(KEY_TIME, time);
    values.put(KEY_SUBJECT_NAME, name);
    values.put(KEY_SUBJECT_CODE, code);
    values.put(KEY_SUBJECT_VENUE, venue);

    db.insert(TABLE_NAME, null, values);

    //closing the database connection
    db.close();
}

public Cursor fetchAll(SQLiteDatabase db, String query){

    Cursor cursor = db.rawQuery(query, null);
      db.close();
    return cursor;

} 
```

}

如果有人可以帮助我，我会非常高兴，因为这是我的最后一年项目:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:01:18.290

你的很可能`Context`是空的。尝试使用 just`this`而不是`getApplicationContext()`

```
dbHelper = new DatabaseHandler(this); 
```

**注意：**我建议这样做：

```
public Cursor fetchAll(SQLiteDatabase db, String query) {
    Cursor cursor;
    db = this.getReadableDatabase();
    if (db != null) {
       cursor = db.rawQuery(query, null); // also rather use query method, ist more saf
    }
    return cursor;
} 
```

如果您有返回的方法，`Cursor`则不应调用`db.close()`. 如果你调用它，你的`Cursor`in`Activity`将抛出“为空”的错误。

要发布`Cursors`等，我建议使用`onPause()`or`onDestroy()`方法，`Activity`但也取决于`Context`方法。

因此，如果您的方法用于从数据库中添加、更新或删除数据，那么在您的方法中，我建议您使用`try-finally`块，或者`try-catch-finally`现在您应该调用`db.close()`让您的解决方案在没有意大利面条代码的情况下清理干净。

这么小的例子：

```
public boolean addRecord(String name, String pass, String value) {
    SQLiteDatabase db;
    try {
       db = this.getWritableDatabase();
       ContentValues data = new ContentValues();
       data.put(KEY_NAME, name);
       data.put(KEY_PASS, pass);
       data.put(KEY_VALUE, value);
       long result = db.insertOrThrow(TABLE_NAME, <nullColumnHack>, data);
       return result > 0;
    catch (SQLException ex) {
       Log.w("SQLException", ex.fillInStackTrace());
       return false;
    }
    finally {
       if (db != null) {
          db.close();
       }
    }
} 
```

您使用**游标**、**数据库**以及它们返回的方法，例如`String`，`List<T>`或其他数据类型，因此您也应该在这里调用**游标**和**数据库**`close()`上的方法以获得干净的解决方案。

 ****但是我的意思是从**数据库**返回获取的数据的方法，不要在**db**`close()`上调用方法。

 **希望对同事有所帮助。******

# google-fusion-tables - 合并表中缺少边界

> ID：13284653
> 
> 赞同：1
> 
> 时间：2012-11-08T07:46:26.647
> 
> 标签：google-fusion-tables

我试图将这张表与我的表合并，以获得学区边界，但到目前为止没有成功。我可以按学区成功合并数据，但一旦合并数据集就看不到边界。我究竟做错了什么？

[https://www.google.com/fusiontables/DataSource?docid=18zoNXzPRfPCPAK66GAdlwW​​g3c2vLeoGsxuSt91g#rows:id=1](https://www.google.com/fusiontables/DataSource?docid=18zoNXzPRfPCPAK66GAdlwWg3c2vLeoGsxuSt91g#rows:id=1)

# jquery - 单击在 asp.net 中创建的按钮时未触发按钮 onclick（使用 html 字符串更改了 div.innerhtml）

> ID：13284657
> 
> 赞同：0
> 
> 时间：2012-11-08T07:46:54.960
> 
> 标签：jquery, asp.net, html, button

所以，基本上问题就在标题中，

我有一个用于登录的div（loginP in loginDiv）。用户登录后，loginP 的innerHtml 通过Asp.net 更改。我还使用 jquery 让站点的用户上下移动 loginDiv（包含 loginP），也许这很重要。

这是代码的正常 html 部分：

```
<div id="loginDiv" runat="server">
        <div id="loginP" runat="server">
            username:<br />
            <asp:TextBox runat="server" ID="user" Rows="1" class="textboxL" /><br />
            password:<br />
            <asp:TextBox TextMode="Password" runat="server" ID="pass" Rows="1" class="textboxL" /><br />
            <div id="bottomDiv">
                <asp:Button ID="RegiButton" runat="server" UseSubmitBehavior="false" CssClass="buttonC"
                    Text="Register" OnClick="RegisterBtnClick" />
                <asp:Button ID="LogButton" runat="server" UseSubmitBehavior="true" CssClass="buttonC"
                    Text="Login" OnClick="LoginBtnClick" /><br />
                <asp:CheckBox runat="server" ID="rememberME" />
                <p id="rememberMe">
                    <font size="1" face="verdana">remember me</font>
                </p>
                <asp:Label Width="180px" Height="40px" Visible="true" runat="server" Text="" ID="errorLabel" />
            </div>
        </div>
    </div> 
```

这是jQuery部分

```
 var ldiv = $("#loginDiv");
ldiv.offset({ top: 10 });

var drag = { y: 0, state: false };
var delta = { y: 0 };

$("#user").mousedown(function () {
    drag.state = false;
    $("#user").focus()
});
$("#pass").mousedown(function () {
    drag.state = false;
    $("#pass").focus()
});
//$("#LogOutBtn").mousedown(function () {
//    drag.state = false;
//    return false;
//});
$(document).ready(function () {
    $("#LogOutBtn").click(function () {
        $.ajax({
            type: "POST",
            url: "sMaster.Master/LogoutBtnClick",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        });
    });
});

ldiv.mousedown(function (e) {
    if (!drag.state == true) {
        drag.y = e.pageY;
        drag.state = true;
    }
    return false;
});

$(document).mousemove(function (e) {
    if (drag.state == true) {
        delta.y = e.pageY - drag.y;
        var cur_offset = $("#loginDiv").offset();

        if (ldiv.cssNumber("top") + $("#loginP").cssNumber("padding-top") + delta.y > -40 && ldiv.cssNumber("top") + $("#loginP").cssNumber("padding-top") + $("#loginP").cssNumber("height") + delta.y + 60 < $(window).height()) {
            if ($(window).width() >= 1305) {
                $("#loginDiv").offset({ top: (cur_offset.top + delta.y) });
                drag.y = e.pageY;
            }
        }

    }
});

$(document).mouseup(function () {
    drag.state = false;
});

$("#user").mousedown(function () {
    drag.state = false;
    $("#user").focus()
});
$("#pass").mousedown(function () {
    drag.state = false;
    $("#pass").focus()
}); 
```

还有这部分 jQuery 代码在窗口太小时移动 loginDiv ：

```
 $(document).ready(function () {
    var dLeft = $("#greenPart").width();
    dLeft += ($(window).width() - $("#greenPart").width()) / 2;
    dLeft += 10;
    $("#loginDiv").css("marginLeft", dLeft);

    var he = $(window).height() * 2;
    $("#loginDiv").css({ "height": he + "px" });
    he = -($(window).height());
    $("#loginDiv").css({ "top": he + "px" });
    he = $(window).height();
    $("#loginP").css({ "padding-top": he + "px" });

    if ($(window).width() < 1305) {
        $("#loginDiv").offset({ top: 10 });
        $("#loginDiv").css({ "height": 120 + "px" });
        $("#loginP").css({ "padding-top": 0 + "px" });
        var dLeft = $("#greenPart").width();
        dLeft += ($(window).width() - $("#greenPart").width()) / 2;
        dLeft -= (20 + $("#loginP").width());
        $("#loginDiv").css("marginLeft", dLeft - 100);

        $("#lines").height("20px");
        $("#lines").width("100px");
        $("#bottomDiv").css("marginLeft", 165);
        $("#bottomDiv").css("marginTop", -90);
        $("#bottomDiv").css("width", 70);
        $("#hello").css("font-weight", "bold");
        $("#hello").css("color", "White");
    }

    return false;
});

$(window).resize(function () {
    var dLeft = $("#greenPart").width();
    dLeft += ($(window).width() - $("#greenPart").width()) / 2;
    dLeft += 10;
    $("#loginDiv").css("marginLeft", dLeft);

    var he = $(window).height() * 2;
    $("#loginDiv").css({ "height": he + "px" });
    he = -($(window).height());
    $("#loginDiv").css({ "top": he + "px" });
    he = $(window).height();
    $("#loginP").css({ "padding-top": he + "px" });

    $("#bottomDiv").css("marginLeft", 0);
    $("#bottomDiv").css("marginTop", 0);
    $("#bottomDiv").css("width", 170);
    $("#hello").css("font-weight", "normal");
    $("#hello").css("color", "Black");
    $("#loginP").css("padding-left", 0);

    if ($(window).width() < 1305) {
        $("#loginDiv").offset({ top: 10 });
        $("#loginDiv").css({ "height": 120 + "px" });
        $("#loginP").css({ "padding-top": 0 + "px" });
        var dLeft = $("#greenPart").width();
        dLeft += ($(window).width() - $("#greenPart").width()) / 2;
        dLeft -= (20 + $("#loginP").width());
        $("#loginDiv").css("marginLeft", dLeft - 100);

        $("#lines").height("20px");
        $("#lines").width("100px");
        $("#bottomDiv").css("marginLeft", 165);
        $("#bottomDiv").css("marginTop", -90);
        $("#bottomDiv").css("width", 70);
        $("#loginDiv").css("paddingLeft", 0);

        if ($("#hello").length != 0) {
            $("#hello").css("font-weight", "bold");
            $("#hello").css("color", "White");
            $("#loginP").css("padding-left", 120);
        }
    }
    return false;
}); 
```

和 Asp.net 部分，changeLoginDiv() 更改了 div 并产生了问题：

```
 protected void LoginBtnClick(object sender, EventArgs e)
    {
        string username = user.Text;
        string password = pass.Text;

        if (username != "" && username != null)
        {
            if (password != "" && password != null)
            {
                if (db.IsExist("SELECT * FROM users WHERE username='" + username + "'"))
                {
                    if (db.IsExist("SELECT * FROM users WHERE [password]='" + password + "'"))
                    {
                        errorLabel.Text = "Loged in successfully.";

                        if (rememberME.Checked == true)
                        {
                            Response.Cookies["userInfo"]["username"] = username;
                            Response.Cookies["userInfo"]["lastVisit"] = DateTime.Now.ToString();
                            Response.Cookies["userInfo"].Expires = DateTime.Now.AddDays(365);
                        }
                        else
                        {
                            Session["username"] = username;
                        }

                        changeLoginDiv();
                    }
                    else errorLabel.Text = "Wrong password.";
                }
                else errorLabel.Text = "The username doesn't exist. \n\n\nIf you don't have a user, please register.";
            }
            else errorLabel.Text = "Please enter a password";
        }
        else errorLabel.Text = "Please enter a user name";
    }

    protected void LogoutBtnClick(object sender, EventArgs e)
    {
        Session["username"] = "";
        Response.Cookies["userifnfo"]["username"] = "";

        Response.Redirect(Request.RawUrl);
    }
    protected void MyProfileBtnClick(object sender, EventArgs e)
    {

    }

    public void changeLoginDiv()
    {
        string sessionST = (string)Session["username"];
        string cookiesST = (string)Request.Cookies["userifnfo"]["username"];
        if ((sessionST != null && sessionST != ""))
        {
            //loginP changes;

            string newHTML = "<span id='hello' height='22px'> Hello " + sessionST + "<br />";
            newHTML += "<img id='lines' src='images/lines.png' /></span>";
            newHTML += "<span><input type='button' id='ProfileBtn' height='30px' width='40px' runat='server' class='buttonC' value='My Profile' onclick='MyProfileBtnClick' /><br />";
            newHTML += "<input type='button' id='LogOutBtn' height='30px' width='40px' runat='server' Class='buttonC' value='Logout' onclick='LogoutBtnClick' /></span>";
            //newHTML += "<asp:Button ID='LogOutBtn' Height='22px' Width='50px' runat='server' UseSubmitBehavior='false' CssClass='buttonC' Text='Logout' OnClick='LogoutBtnClick' /></span>";

            loginP.InnerHtml = newHTML;
            loginP.Attributes.Add("style", "text-align: center;");
        }
        if ((cookiesST != null && cookiesST != ""))
        {
            //loginP changes;

            string newHTML = "<span height='22px'> Hello " + cookiesST + "<br />";
            newHTML += "<img id='lines' src='images/lines.png' /></span>";
            newHTML += "<span><input type='button' id='ProfileBtn' height='30px' width='40px' runat='server' class='buttonC' value='My Profile' onclick='MyProfileBtnClick' /><br />";
            newHTML += "<input type='button' id='LogOutBtn' height='30px' width='40px' runat='server' Class='buttonC' value='Logout' onclick='LogoutBtnClick' /></span>";

            loginP.InnerHtml = newHTML;
            loginP.Attributes.Add("style", "text-align: center;");
        }
    } 
```

谢谢=]

PS。如您所见，我还尝试使用 ajax 和其他一些功能在 jQuery 中触发 onclick 事件：

```
//$("#LogOutBtn").mousedown(function () {
//    drag.state = false;
//    return false;
//});
$(document).ready(function () {
    $("#LogOutBtn").click(function () {
        $.ajax({
            type: "POST",
            url: "sMaster.Master/LogoutBtnClick",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        });
    });
}); 
```

# delphi - TTreeView：如何更改项目的就地编辑器的文本？

> ID：13284658
> 
> 赞同：2
> 
> 时间：2012-11-08T07:46:56.310
> 
> 标签：delphi, treeview, editor, delphi-xe, treeviewitem

我有一个带有可编辑项目的 TreeView。当我在选择后按 F2 或单击任何项​​目时，会出现就地编辑器。

如何在显示之前更改该编辑器中显示的文本？例如，我的树项目的文本是`Point 1 (300, 450)`，但我希望我的就地编辑器只显示`Point 1`。

我试图捕捉`OnEditing`这样的事件：

```
procedure TForm1.TreeViewEditing(Sender: TObject; Node: TTreeNode; 
  var AllowEdit: Boolean);
begin
  AllowEdit := True;
  Node.Text := 'text to edit';
end; 
```

但是，就地编辑器的文本没有改变，树项的文本只有在取消编辑后才会更新。如何正确执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T08:20:56.853

试试以下是否适合您：

```
uses
  Winapi.CommCtrl;

procedure TForm1.TreeView1Editing(Sender: TObject; Node: TTreeNode; var AllowEdit: Boolean);
var
  EditHandle: THandle;
  S: string;
begin
  AllowEdit := True;
  S := 'text to edit';
  EditHandle := TreeView_GetEditControl((Sender as TTreeView).Handle);
  SendMessage(EditHandle, WM_SETTEXT, 0, LParam(PChar(S)));
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-06T13:51:07.483

来到这里寻找相同问题的解决方案，但使用 C++。Ondrej Kelle 用 C++ 翻译的答案是这样的：

```
TTreeView* tree;
std::string str;
HWND EditHandle = TreeView_GetEditControl(tree->Handle);
::SendMessage(EditHandle, WM_SETTEXT, 0, (LPARAM)(str.c_str())); 
```

# c# - 本地和远程数据库的EF同步节省

> ID：13284661
> 
> 赞同：1
> 
> 时间：2012-11-08T07:47:07.173
> 
> 标签：c#, sql, entity-framework, sync

我有一个使用 EF 访问的本地和远程数据库。数据库在初始状态下是同步的。

现在我想保存本地所做的更改，也保存在远程数据库上。这应该可以在不下载整个远程数据库的情况下实现吗？

我可以只更改上下文的连接字符串，然后在远程调用 SaveChanges() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:50:30.753

我认为这不是实体框架的工作。您可以只使用[SQL 服务器复制](http://msdn.microsoft.com/en-us/library/ms151198.aspx)来同步数据库级别的更改，而无需更改您的应用程序。您最好的选择是使用仅同步更新而不是快照的[过渡复制。](http://technet.microsoft.com/en-us/library/cc917706.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:53:00.713

您可以使用[Microsoft 同步框架](http://en.wikipedia.org/wiki/Microsoft_Sync_Framework)。

# objective-c - 无法使用委托

> ID：13284664
> 
> 赞同：0
> 
> 时间：2012-11-08T07:47:13.150
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我是目标 c 的新手，并试图掌握委托方法和用法。目前我有 Alertview 类，我需要它来创建另一个类来调用它的函数。我已经设法对 appdelegate 类做同样的事情。但不能用我自己的班级来做。

```
 TableViewController *newControll = (TableViewController*)[UIApplication sharedApplication].delegate;
                [newControll openSettings]; 
```

这就是我试图访问我的方法的方式。编译器在 newControll 中看到了这个方法，但调用它会得到无法识别的选择器。

基本上我需要从另一个类调用之前已经创建的函数。如果这是一个简单的解决方案，我很抱歉，但我还不能很好地掌握委托和目标 c。

也许不是每个人都能得到我需要做的事情，所以我会尝试再解释一次。

我有对象`TableViewController`。从内部的这个对象中，我正在调用类`AlertView`来显示一些警报消息。因此，根据警报对话框中的用户交互（密码可以，密码不是），我需要`openSettings`在我的`TableViewController`或不调用中调用方法。那么如何做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:50:31.407

如果你`TableViewController`不是你的 appdelegate 类，你应该使用对象`TableViewController`来使用方法`openSettings`。

它应该是这样的，

```
TableViewController *newControll = [[TableViewController alloc] init]; 
```

假设您要搬到一个新的`alertView`. 在你的`AlertView.h`文件中添加，

```
@property(nonatomic, retain) TableViewController *tableViewController; 
```

在创建新`alertView`对象时，

```
AlertView *alertView = [[AlertView alloc] init];
//some code..
alertView.tableViewController = self; 
```

现在在你的`AlertView`课堂上，称之为，

```
[self.tableViewController openSettings]; 
```

使用 appdelegate 不是这样做的方法。

如果您需要一些有关 iOS 的教程，[请查看 raywenderlich](http://www.raywenderlich.com/tutorials)。

# android - 如何根据附图创建支持多选网格的布局？

> ID：13284665
> 
> 赞同：0
> 
> 时间：2012-11-08T07:47:14.643
> 
> 标签：android, android-layout

我想用来自服务器的数据创建这种 UI。假设我们有来自服务器的美国州缩写列表到一个字符串数组中。

![在此处输入图像描述](../Images/2fe73b6da8f0377be271e2cda93ebff9.png)

我使用 gridView 实现了这一点，并向视图添加了一个适配器以适应美国各州的缩写。现在我需要在 SearchBox 中添加功能。每当我输入 AL 或任何文本时，网格布局应该只显示以 AL 开头的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:02:53.350

无论如何，您都可以动态创建视图。

请参阅[此示例](http://www.warriorpoint.com/blog/2009/07/01/android-creating-tablerow-rows-inside-a-tablelayout-programatically/)。TableLayout 是在哪里以编程方式生成的。基于此，您还可以将前进、前进和下一步等按钮创建到相同的布局中。

# java - 意外的字符串连接行为

> ID：13284671
> 
> 赞同：3
> 
> 时间：2012-11-08T07:47:52.970
> 
> 标签：java, string, solaris, string-concatenation

我遇到了一些简单的 Java 代码：

```
// the env var is set 
public final String METACHEK_pref = System.getenv().get("MCHK_DIR"); 
// the env var should be :
public String tempMP = "/disk3/METACHECK/Metacheck/metachek";

System.out.println("#1:"+METACHEK_pref+File.separator+"metachek"); 
System.out.println("#2:"+tempMP+File.separator+"metachek"); 
```

打印：

```
#1:/metachekTACHECK/Metacheck/metachek
#2:/disk3/METACHECK/Metacheck/metachek/metachek 
```

我已经在不同的操作系统中尝试过该代码，但只有一个 solaris 有这个问题。而且，当然，代码必须在这个特定的服务器上工作。

我不知道在哪里检查是否在隐藏的 conf 文件中设置了一些奇怪的参数。

有人知道发生了什么吗？为什么 concat 已经演变为插入命令？

编辑：

我用这段代码创建了另一个 jar：

```
public class test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        String METACHEK_pref = new String(System.getenv().get("MCHK_DIR").toString());
        String tempMP = "/disk3/METACHECK/Metacheck/metachek";

        System.out.println("#1:"+METACHEK_pref); 
        System.out.println("#2:"+METACHEK_pref+File.separator+"metachek");
        System.out.println("#3:"+tempMP+File.separator+"metachek");

    }

} 
```

这是输出：

> ```
> #1:/disk3/METACHECK/Metacheck/metachek
>  /metachek/METACHECK/Metacheck/metachek
> #3:/disk3/METACHECK/Metacheck/metachek/metachek 
> ```

看看#2 是如何消失的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:30:00.703

我相当确定`MCHK_DIR`环境变量以 CR 字符结尾（回车，更好地称为 the-first-part-of-CRLF）。

这非常准确地解释了您的体验： 的可见部分`MCHK_DIR`已打印，光标位于行首。然后打印您附加的内容（覆盖可见`MCHK_DIR`文本的开头）。

*这对我来说是如何*发生的有点神秘，因为大多数设置环境变量的方法并不容易附加空白字符（例如 CR）。

要检查是否确实如此，请遍历变量的字符并打印它们的值：

```
for (char c : METACHEK_pref.toCharArray()) {
  System.out.println("<" + c + ">: " + (int) c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:58:23.903

我想，@Joachim Sauer 是正确的。如果是这样的话，

```
 String METACHEK_pref = System.getenv("MCHK_DIR").trim(); 
```

应该做的。

# lazy-loading - iBatis 是否支持像 Hibernate 一样的延迟加载？

> ID：13284672
> 
> 赞同：2
> 
> 时间：2012-11-08T07:48:04.377
> 
> 标签：lazy-loading, ibatis

我想知道 iBatis 是否可以像 Hibernate 一样提供对惰性获取的支持？例如我有用户类

```
public class User {
    List<Address> addresses;

    public List<Address> getAddresses(){
        return addresses;
    }
    ...
} 
```

现在我想在调用 user.getAddresses() 时实现延迟获取。是否有可能在 iBatis 中实现这一点？如果是，那怎么办？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:20:26.123

当然。
根据文档，您可以为要延迟加载的`lazyLoad`属性设置`result`a 元素的属性。 例如：`resultMap`

```
<resultMap id="resultMapUser" class="User">
    <result property="addresses" select="someOtherStatementName" lazyLoad="true"/>
</resultMap> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T17:23:23.833

XML 映射：
3.2.7+ -> fetchType 属性（懒惰/渴望）

```
<resultMap id="itemResultMap" type="Item">
    <id property="id" column="id"/>
    <association property="subItem" column="subItemId" javaType="SubItem" 
                 select="selectSubItemByIdQuery" fetchType="lazy"/>
</resultMap> 
```

@注解映射：

```
@Select({"SELECT * FROM item WHERE id = #{id}"})
@Results({
        @Result(property = "id", column = "id"),
        @Result(property = "subItem", column = "subItemId", javaType = SubItem.class,
                one = @One(select = "SubItemMapper.getById", 
                           fetchType = FetchType.LAZY))
})
Item getById(int id); 
```

# iphone - 如何修复“NSObjectInaccessibleException”获取请求在被 NSManagedObjectContext 使用之前无法响应 -entity

> ID：13284673
> 
> 赞同：0
> 
> 时间：2012-11-08T07:48:05.750
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-data

该代码在 iOS5+ 中运行良好：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"FooBar"];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"ident"
                                                                                 ascending:NO
                                                                                  selector:@selector(compare:)]];
request.predicate = [NSPredicate predicateWithFormat:@"xxx = %@", @"yyy"];

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:model.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

但在 iOS 4 中，我收到以下错误：

```
'NSObjectInaccessibleException', reason: 'This fetch request (0x70d4700) 
was created with a string name (FooBar), and cannot respond to -entity 
until used by an NSManagedObjectContext'

2012-11-08 12:12:18.093 hello[1566:11d03] *** Terminating app due to uncaught
exception 'NSObjectInaccessibleException', reason: 'This fetch request 
(0x70d4700) was created with a string name (FooBar), and cannot respond 
to -entity until used by an NSManagedObjectContext'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x012405a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x0104a313 objc_exception_throw + 44
    2   CoreData                            0x000be68f -[NSFetchRequest entity] + 159
    3   CoreData                            0x0019f7fb -[NSFetchedResultsController initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:] + 763
    ... 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T07:59:06.907

`fetchRequestWithEntityName:`仅在 iOS 5 及更高版本中可用。

在 iOS 4 上，您必须创建`NSEntityDescription`第一个：

```
NSEntityDescription *fooBarEntity = [NSEntityDescription entityForName:@"FooBar" inManagedObjectContext:model.managedObjectContext];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:fooBarEntity]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:10:15.217

问题是 NSFetchRequest 没有从中获取对象的上下文......您总是需要一个特定的上下文来获取 entityDescription 。在 ios5 中，entityDescription 的获取被很好地隐藏并延迟到你执行 fetch :) 因为它不是

标题是错误的顺便说一句。它说它对 ios4 有好处：

```
+ (NSFetchRequest*)fetchRequestWithEntityName:(NSString*)entityName NS_AVAILABLE(10_7, 4_0); 
```

Id 提交了一个错误。无论如何@Martin R 是正确的:)

# database - Symfony2：选中表单中的复选框

> ID：13284674
> 
> 赞同：0
> 
> 时间：2012-11-08T07:48:19.323
> 
> 标签：database, symfony, checkbox, entity

我有 3 个实体：Person、Affiliation 和 PersonAffiliation。可以编辑此人，并可以添加或删除从属关系。

在我看来，我应该为每个现有的从属关系设置一个复选框，并且如果该人已经拥有该从属关系，则应选中该复选框。

我知道如何在视图（树枝）中显示所有从属关系，但我不知道如果该人已经拥有此从属关系，如何检查复选框。

下面是这两个表的样子：

```
Person
    id
    firstname
    lastname
    ...
    affiliations

Affiliation
    id
    affiliation

PersonAffiliation
    id
    person_id
    affiliation_id 
```

现在，我的问题是：是否有可能使用控制器和视图（树枝）来执行此操作，或者唯一的可能是使用 Javascript（使用 JQuery）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:22:16.843

不要使用代理类，而是像这样排列您的对象：

```
Person
    id
    ... as before
Affiliation
    id
    .. as before
-- remove PersonAffiliation -- 
```

但将此关系添加到您的 Person 类

```
/**
 * @ManyToMany(targetEntity="Affiliation")
 * @JoinTable(name="person_affiliation",
 *      joinColumns={@JoinColumn(name="person_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="affiliation_id", referencedColumnName="id")}
 *      )
 */ 
```

您可以像这样在表单构建器中完成所有操作：

```
 $builder
        ->add('person')
        ->add(
            'affiliation',
            'entity',
            array(
                'class'         => 'AcmeDemoBundle:Affiliation',
                'query_builder' => function($em) { return $em->createQueryBuilder('p')->orderBy('p.id', 'ASC'); },
                'property'    => 'affiliation',
                'multiple'    => true,
                'expanded'    => true,
                'required'    => false
            )
        ); 
```

然后只需渲染您的表单

```
{{ form_widget(form) }} 
```

# javascript - Javascript 库，用于强调网站 UI 中的新功能或更改功能

> ID：13284676
> 
> 赞同：3
> 
> 时间：2012-11-08T07:48:32.457
> 
> 标签：javascript, user-interface, highlight

我想向新老用户介绍网站界面上的新功能。我想向用户显示一条非侵入性但引人注目的消息，将他指向一个按钮、元素等（可能带有箭头/气球）。

像[Fokus](http://lab.hakim.se/fokus/)或[jQuery 工具的 Expose](http://jquerytools.org/demos/toolbox/expose/index.html)这样的东西会很好，但我实际上可以控制哪个元素被突出显示并添加一些文本和/或导航。Expose 就是这样做的，但似乎没有维护。

是否有简化此过程的下降 JS 库，或者我几乎必须推出自己的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-28T04:55:20.337

我一直在寻找类似的东西，并认为我会回应其他人的搜索。

大多数库解决方案采用网络浏览方法（如[Intro.js](http://usablica.github.io/intro.js/)）。我在那里找到了至少十几个这样的库。[这是](http://webresourcesdepot.com/11-awesome-jquery-site-tour-plugins-for-guiding-users-with-style/)众多列表之一。这个[相关的问题](https://stackoverflow.com/questions/26412809/new-feature-or-page-introduction-on-website-using-fancy-tooltip-and-cookies)建议[Joyride](http://zurb.com/playground/jquery-joyride-feature-tour-plugin)。

有一个工具更像是一种功能突出工具，可能会有所帮助。它被称为[兴趣点](https://codyhouse.co/gem/points-of-interest/)。这个工具更符合我一直在寻找的东西，但我仍在寻找。我不需要参观或培训演练。我需要一些东西来向现有用户突出显示更新或新功能。

# powershell - 将 Diskshadow 与 Powershell 一起使用

> ID：13284686
> 
> 赞同：0
> 
> 时间：2012-11-08T07:49:08.307
> 
> 标签：powershell

对于实用程序**diskpart**，Powershell 允许我通过以下方式将数据传递到控制台

```
'list vol' | diskpart 
```

与此非常相似，我们可以将数据传递给**diskshadow**实用程序吗？

当我尝试时，我收到以下错误：

```
PS C:\Users\administrator> 'list vol' | diskshadow
Microsoft DiskShadow version 1.0
Copyright (C) 2007 Microsoft Corporation
On computer:  myserver,  11/8/2012 1:13:32 PM

**DISKSHADOW> Error reading from console. Win32 error: 0x6
The handle is invalid.** 
```

请建议我是否需要不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:03:40.557

您必须使用您的命令创建一个临时文件并`diskshadow`使用该脚本运行。

```
$script = "./tmp.dsh"
"list shadows all" | Set-Content $script
diskshadow /s $script
Remove-Item $script 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T08:34:24.177

我遵循了上面 Ansgar 提供的解决方案，并试图理解为什么 Diskshadow 忽略了我的脚本内容并只返回这个输出：

```
Microsoft DiskShadow version 1.0
Copyright (C) 2013 Microsoft Corporation
On computer:  AS-C01-EX01,  12/2/2021 4:20:29 PM

-> 
```

原来 Diskshadow 对脚本文件编码很敏感。

为了解决这个问题，我只需要使用 Set-Content（或 Out-File）的 -encoding 参数将编码设置为 ASCII

# python - 处理 blobstore_handlers.BlobstoreUploadHandler

> ID：13284696
> 
> 赞同：1
> 
> 时间：2012-11-08T07:49:45.670
> 
> 标签：python, blobstore

我正在使用 python 作为 iPad 应用程序的服务器端在 GAE 上写作。其中一项功能是将文件保存在服务器上。我浏览了 blobstore 示例，我可以编写类似的有效测试。但是，就我而言，我必须将过程分为两个步骤，一个是调用生成 URL，另一个是通过 blobstore_handlers.BlobstoreUploadHandler 实际接收文件。问题是我从 blobstore.create_upload_url('/upload') 获得的链接似乎已损坏，并且找不到我的上传处理程序。我目前测试的方法是通过一个静态 html 文件，在该文件中我手动将 url 更改为我从 blobstore.create_upload_url('/upload') 获得的那个在职的？

代码：这是返回运行良好的 url 的函数。

```
class GetUploadURL(webapp2.RequestHandler):
# this function will return the upload url to be used in a form
  def get(self):

        params=['session_id']

        has_params, missing_param = has_all_parameters(self,params)     

        if not has_params:
            show_error(self, MISING_PARAMS_ERROR, params)
            return      

        user = validate_session(self)
        if not user:
            show_error(self, UNKNOWN_SESSION_ID)
            return 

        upload_url = blobstore.create_upload_url('/upload')
        ret_dict = { STATUS_CODE :STATUS_OK ,
                        UPLOAD_URL :  upload_url 
                       }`enter code here`
        self.response.out.write(json.dumps(ret_dict)) 
```

这是我在本地使用的 html 并使用长链接更改 upload_url 我得到的表单调用上面的函数

```
<html>
<body>
<form action="upload_url" method="POST" enctype="multipart/form-data">
    <input  type="hidden" id="session_id" name="session_id" value="ahJkZXZ-ZGVzaWduZWRudG9maXRyDQsSB1Nlc3Npb24YDQw" >

    <a>Upload File: </a><input type="file" name="file">
    <br> 
    <input type="submit" name="submit" value="Submit"> 

</form>
</body>
</html> 
```

这是当我单击提交时它甚至没有到达服务器的地方，就像一个断开的链接。

这是应该接收帖子但从未调用过的函数

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
        params=['session_id']

        has_params, missing_param = has_all_parameters(self,params)     

        if not has_params:
            show_error(self, MISING_PARAMS_ERROR, params)
            return      

        user = validate_session(self)
        if not user:
            show_error(self, UNKNOWN_SESSION_ID)
            return 

        upload_files = self.get_uploads('file')  # 'file' is file upload field in the form
        blob_info = upload_files[0]
        file1 = UserFile()
        file1.user = user
        file1.file_name= blob_info.filename
        file1.file_key = blob_info.key()
        file1.put()
        ret_dict = {STATUS_CODE: STATUS_OK,'file_key': str(file1.file_key)}
        self.response.out.write(json.dumps(ret_dict)) 
```

谢谢您的帮助

冉

# ruby-on-rails - Hash to_json and back does not preserve hashes as keys?

> ID：13284697
> 
> 赞同：3
> 
> 时间：2012-11-08T07:49:49.477
> 
> 标签：ruby-on-rails, ruby, json

Anyone else having this issue?

```
hash_as_key = {'one' => 1, 'two' => 2}
outer_hash = {hash_as_key => 3} 

outer_hash.keys[0].class
=> Hash

as_json = outer_hash.to_json
back_to_obj = JSON.parse(as_json)

back_to_obj.keys[0]
=> "{\"one\"=>1, \"two\"=>2}"
back_to_obj.keys[0].class
=> String 
```

If you have a Hash object where a key is a hash itself, converting to JSON and reverting back to a Ruby object seems to turn the key into a String.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:00:40.593

The [keys in JSON objects are strings](http://json.org/) and nothing else:

> An *object* is an unordered set of name/value pairs. An object begins with `{` (left brace) and ends with `}` (right brace). Each name is followed by `:` (colon) and the name/value pairs are separated by `,` (comma).
> 
> ![enter image description here](../Images/0d936b8affaf3dd48ac004c1d20a944f.png)

So your keys will become strings as soon as your data structure is converted to JSON. Then, once your data is in JSON, the original type information for your keys will be lost.

Ruby's Hashes are a fair bit more flexible and general than JSON's objects so not every Ruby Hash can be represented in JSON. If you're targeting JSON for data storage and transfer, then you'll have to limit your data to things that JSON supports or translate your data into a structure that is JSON-compatible.

If you look at the intermediate JSON you'll see what's going on:

```
> puts outer_hash.to_json
{"{\"one\"=>1, \"two\"=>2}":3} 
```

So the key is the string `'{"one"=>1, "two"=>2}'` because that's what `hash_as_key.to_s` gives you. Similarly, a numeric key will be stringified with `to_s` and lose its "numberness":

```
> {1 => 2}.to_json
=> "{\"1\":2}" 
```

# performance - Azure SQL 分片未按预期扩展

> ID：13284698
> 
> 赞同：2
> 
> 时间：2012-11-08T07:49:59.257
> 
> 标签：performance, azure

我有一个使用 Azure SQL 为 Azure 云服务开发的 Web 应用程序。我从一个数据库开始，使用 JMeter，从同一个 Azure 数据中心的专用虚拟机运行负载测试。测试计划设置为仅测试一个页面，并且仅发布到该页面（忽略初始获取请求）。

我的目标是确定应用程序每秒可以处理的最大数据库事务数。使用此测试计划，我的第一系列测试平均达到 300 个请求/秒。

有问题的页面正在访问下表：

```
create table [dbo].[Entries]
(
    [Id]                   int                 not null        identity(1,1)
    /* other columns here, about 10 in total */ 
);

alter table [dbo].[Entries] add constraint [PK_Entries] primary key ([Id]);
alter table [dbo].[Entries] add constraint [DF_Entries_Created] default(getutcdate()) for [Created];

create index [IX_Entries_EmailAddress] on [dbo].[Entries] ([EmailAddress]);
create index [IX_Entries_NACSZ] on [dbo].[Entries] 
(
     [FirstName]
    ,[LastName]
    ,[Address1]
    ,[City]
    ,[State]
    ,[Postal]
); 
```

该页面仅执行两个查询：

```
select 1 where exists 
(
    select 1 from Entries
     where EmailAddress = @EmailAddress
        or (
                    FirstName       = @FirstNAme
                and LastName        = @LastName
                and Address1        = @Address1
                and City            = @City
                and State           = @State
                and Postal          = @Postal
           ) 
); 
```

和

```
insert into Entries
(
    ...
)
values
(
    ...
);

select cast(scope_identity() as int); 
```

在我的机器（四核、8GB 内存、本地 SQL 2012 快速安装）上进行的性能测试产生了高达 800 个请求/秒，所以我很震惊地看到 Azure 服务器上的大约 300 个请求/秒的峰值。我将此归结为数据库服务器上的资源争用，并添加了必要的代码来支持分片。分片机制在其中一个关键字段上使用一致的哈希来确定要使用的连接字符串（目前可能有 3 个）。此处的目标是将数据库负载分散到 3 个 Azure SQL 数据库中，并提高应用程序的并发系数。

我已经验证了分片机制是否有效（每个数据库中的条目数量大致相等）并且已经从页面中剥离了所有非必要代码，因此所发生的只是上面提到的两个查询。我在事务上使用默认的隔离级别（读提交）。最终代码如下所示：

```
using (var db = ConnectToShard(keyToHash))
using (var tx = db.BeginTransaction(IsolationLevel.ReadCommitted))
{
    // execute query 1
    // if result from query 1 is null, 
    //     execute query 2

    tx.Commit();
} 
```

但是，即使有所有这些额外的工作，我似乎也无法将请求/秒推到 ~500 左右。我的理想目标是 1000。我想我在 Azure SQL 性能方面遗漏了一些东西，但我不确定是什么。对改进请求/秒有什么想法或建议吗？

# php - 为所有列表或单个列表 + 共享点生成的 wsdl 文件

> ID：13284701
> 
> 赞同：1
> 
> 时间：2012-11-08T07:50:08.787
> 
> 标签：php, web-services, sharepoint, soap, sharepoint-2007

我使用以下方法生成了 .wsdl 文件：

```
sharepoint.url/subsite/_vti_bin/Lists.asmx?WSDL. 
```

并在我使用 SOAP 客户端运行 Web 服务的地方下载它。如果我在本地服务器上运行 Web 服务并使用生成的 .wsdl 文件来检索在 LAN 可用的 Windows 服务器上运行的共享点列表，是否可以。现在，生成的 .wsdl 文件是针对单个列表还是多个列表？我的问题是，我不断收到以下错误：

```
HTTPFault string: Unauthorized 
```

我也在 Windows 服务器上的 IIS 中启用了基本身份验证，但错误仍然存​​在。任何帮助表示赞赏。谢谢。

# iphone - 如果我在选择器旋转时使用完成按钮关闭 UIPickerview 的操作表，则获取空值

> ID：13284703
> 
> 赞同：1
> 
> 时间：2012-11-08T07:50:10.940
> 
> 标签：iphone, objective-c, ios, uipickerview

我有一个`UIActionSheet`包含 a`picker`和 a `UIToolbar`。在 UIToolBar 上有一个完成按钮。但是，当我旋转`Picker`组件并在它停止旋转之前，如果我点击`Done`按钮，那么我的`UITextfield`. 如果我`Done`在选择器停止旋转动画后点击按钮，那么我将获得所选组件的值

有没有办法在停止动画之前获得项目的价值..？

**解决**

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
     UILabel *lbl = (UILabel *)view;

           // Reuse the label if possible...
           if ((lbl == nil) || ([lbl class] != [UILabel class])) {
               CGRect frame = CGRectMake(0.0, 10.0, 250, 50);
               lbl = [[[UILabel alloc] initWithFrame:frame] autorelease];
           }
    if (component == 0) {

        lbl.textColor = [UIColor blackColor];
        lbl.textAlignment=UITextAlignmentLeft;
        lbl.backgroundColor = [UIColor clearColor];

        lbl.text = [arrCountry objectAtIndex:row];
        lbl.font=[UIFont boldSystemFontOfSize:14];
         NSInteger clm1 = [pickerView2 selectedRowInComponent:component];

        txtCountry.text = [arrCountry objectAtIndex:clm1];
        countryCode=[arrCountryCode objectAtIndex:clm1];
    }

    return lbl;
} 
```

并且

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

  txtCountry.text = [arrCountry objectAtIndex:row];
  countryCode=[arrCountryCode objectAtIndex:row];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:05:48.760

我不认为你可以交配。UIPicker 仅在微调器停止时调用 didselectrow ，否则它会卡在先前选择的行上。在你的情况下的第一个。

最接近使用 uipicker 获得功能的是这个委托方法：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view 
```

您必须查看屏幕上的视图及其与中心的偏移量。除此之外，您可以实现自己的滚动视图并拥有一个 uipicker 覆盖，但这涉及大量工作。

或者！您可以告诉您的用户以正确的方式使用 uipicker，哈哈。

阻止用户按下保存的另一种方法是检测 uipicker 是否正在旋转。我发现[这个可以帮助](https://stackoverflow.com/questions/5526476/how-to-tell-if-uiview-is-in-middle-of-animation)你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:18:07.287

选择器代表

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //selectedRowInPicker is globle NSInteger
    selectedRowInPicker = row;
    yourTextField.text = [NSString stringWithFormat:@"%@",[pickerValueAry objectAtIndex:row]];
} 
```

//完成 BtnPress

```
-(void)doneBtnPressToGetValue
{
    yourTextField.text = [NSString stringWithFormat:@"%@",[pickerValueAry objectAtIndex:selectedRowInPicker]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:56:36.390

不可以。您只会在选择器停止时获得该值。只有在某个时候，您才会调用选择器代表。

# c - 如何在特定范围之间创建一个新的随机整数

> ID：13284704
> 
> 赞同：2
> 
> 时间：2012-11-08T07:50:10.720
> 
> 标签：c, gcc, random

我有一个从 1 到 100 的数字范围，它们是列表的索引，我需要随机选择一个列表。如果在列表中找不到我要查找的内容，我需要在使我进入列表的范围内选择下一个随机整数，它不应该是之前选择的那个，有一种方法可以做到这一点在 C 中有效。我可以通过改组索引数组来做到这一点，但我想知道是否有更好的方法。

总而言之，我需要一个非常好的随机算法，它返回一个我知道是随机的并且以前从未使用过的整数。

我确实知道 rand()、srand() 和 randomize()。我不确定这些是否达到目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:55:25.720

`arc4random_uniform`如果在您的系统上可用，将可以解决问题：

```
uint32_t r = 1U + arc4random_uniform(100); // r = 1...100 
```

如果您需要一个唯一的数字，请从一组值开始并使用[Fisher-Yates（又名 Knuth） shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。

如果数组小于范围，您可以用唯一的随机数强制填充，然后随机播放 - 即如果您只需要十个数字，那么您可以在*大约*20 次随机生成调用中生成它。请注意，只有在填充过程中也订购了随机播放（为了更快的匹配查找），才需要在这种情况下进行随机播放。

另一种方法是填充向量 [1...100] 并从中随机抽取剩余元素，并在使用时删除条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:55:30.713

您可以结合您的知识 `srand`，`rand`并 `time()`与**% 操作**。
% n -**提醒**你在 n 上的除法，当 n 时它显然不能更大。
所以在代码方面：

```
srand(time());
int value = rand() % n; // will give you random values within interval [0,n) 
```

但我需要提到*rand() 有一些缺点*，其中之一是它不提供均匀分布，因为较低值的概率更高（您可以在 stackoverflow 上找到与此主题相关的讨论）

# mongodb - MongoDB 的 getLastError 错误地显示没有更新文档

> ID：13284709
> 
> 赞同：1
> 
> 时间：2012-11-08T07:50:21.533
> 
> 标签：mongodb, mongohq

为什么`getLastError`显示没有更新文档？

```
> db.contacts.find()
{ "_id" : ObjectId("509b60e7c546b6dc73f57877"), "name" : "mike" }
> db.contacts.update({}, {name: 'peter'})
> db.runCommand({getLastError: 1})
{ "n" : 0, "connectionId" : 3188, "err" : null, "ok" : 1 }
> db.contacts.find()
{ "_id" : ObjectId("509b60e7c546b6dc73f57877"), "name" : "peter" } 
```

`getLastError`正在返回`n: 0`，即使文档已明确更新。它也缺少该`updatedExisting`领域。我在一个示例 MongoHQ 数据库上远程运行它。

针对我的本地 MongoDB 实例运行，`getLastError`正确返回：

```
> db.runCommand({getLastError: 1})
{
    "updatedExisting" : true,
    "n" : 1,
    "connectionId" : 1,
    "err" : null,
    "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:15:54.603

这可能是连接重用的问题，也可能是外壳行为。getLastError (GLE) 调用仅返回在执行 GLE 调用的连接上发生的最后一个操作的状态。

但是，当你使用 shell 时，它会在每次写操作后自动调用 GLE，所以你通常会得到一个 null 结果，因为 GLE 已经被调用了。尝试调用`getPrevError()`- 看看它是否返回您的预期。

MongoDB 驱动程序通过确保在将连接返回到池之前调用 GLE 并作为操作的结果（或错误）返回来避免此类问题，从而解决此问题。

# android - 从网页中获取内容并在 TextView 中显示

> ID：13284714
> 
> 赞同：0
> 
> 时间：2012-11-08T07:50:54.913
> 
> 标签：android, html, inputstream

我想用一些关于某事的信息来更新用户。我想我会从网页中获取一些信息并将其显示在`TextView`. 我已经写了一些代码，但它目前正在给出这样的输出`TextView`

```
<html>
<head>
</head>
<body>
This is the test message for our user.
</body>
</html> 
```

但我希望消息应该只包含这一行，没有别的。

`This is the test message for our user.`

我写的代码是：

```
public class MainActivity extends Activity {

private Button btnSkipContinue;
private TextView txtMessage;
private StringBuilder response;
private String text;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    btnSkipContinue = (Button) findViewById(R.id.btnSkipCon);
    txtMessage = (TextView) findViewById(R.id.txtMsgForUsers);
    btnSkipContinue.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            finish();
            Intent intent = new Intent(MainActivity.this, SecondActivity.class);
            startActivity(intent);
        }
    });

    try {
        URLConnection connection = new URL("http://mywebiste.com/msg/MsgForUsers.html").openConnection();
        connection.setRequestProperty("Accept-Charset", "UTF-8");
        InputStream responseStream = connection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(responseStream));
        response = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            response.append(line);
        }
        text = response.toString();
        Log.i("Output", text);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    txtMessage.setText(text);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:53:13.913

使用[`Html.fromHtml()`](http://developer.android.com/reference/android/text/Html.html)..

```
String htmlString = "<html><head></head><body>This is the test message for our user.</body></html>";
textView.setText(Html.fromHtml(htmlString)); 
```

# yii - Yii 框架库管理器扩展

> ID：13284718
> 
> 赞同：0
> 
> 时间：2012-11-08T07:51:13.030
> 
> 标签：yii, image-gallery, yii-extensions

我正在使用galleymanager 扩展来创建图片库。目录结构如下，

```
protected
    ...
    modules
    ...
    imgManager 
```

在 config/main.php 文件中定义模块如下，

```
'imgManager' => array(
    'import'=>array('imgManager.*','imgManager.components.*'),
    'layout'=>'application.views.layouts.column1',
    'upload_directory'=>'gallery_images',
    'max_file_number' => '10',//max number of files for bulk upload.
    'max_file_size' => '1mb',
), 
```

当我尝试访问“localhost/site/imgManager”之类的模块时。我收到以下错误，

```
Error 404 Unable to resolve the request "<controller>/imgManager". 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:35:05.653

ThomasvdBege 是对的，你可以在 Yii 中看到一个模块作为一个迷你应用程序。例如，我将使用我的应用程序访问我的管理模块：

```
admin/sysMessage/index 
```

`<name of module>/<controller>/<action>`

注意：这是启用了 urlmanager，如果您没有启用它，它将是这样的：

```
index.php?r=admin/sysMessage/index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:16:10.360

如果 imgManager 是一个单独的模块，您应该像这样访问它：localhost/imgManager 而不是尝试通过控制器访问它

# php - 捕获一组 8、9 和 10 个字符长的字符串的 php 正则表达式是什么？

> ID：13284723
> 
> 赞同：2
> 
> 时间：2012-11-08T07:51:37.383
> 
> 标签：php, regex

我正在处理一个垃圾邮件机器人，为了防止它发表无意义的帖子，我确定它总是以 [8 个字符 a-zA-Z] [9 个字符 a-zA-Z] [10 个字符 a-zA 的特定方式发布-Z] ...

我想捕捉这个确切的模式，这样我就可以阻止它。

一个示例如下所示：

> EifnBTVK zljhGBZty poozgzbdax JZBnNbbpt rbpdig LfpMXMEDqay LfjrLSDQ saxaUBPlc NjflPITJ gccuOZJph

我在想它就像

```
/^[a-zA-Z]{8}[a-zA-Z]{9}[a-zA-Z]{10}.*/ 
```

这是正确的思路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:54:56.917

您还需要匹配这些“单词”之间的空格：

```
/^[a-zA-Z]{8}\s+[a-zA-Z]{9}\s+[a-zA-Z]{10}\s+.*/ 
```

`\s`是一个[空白字符](http://www.regular-expressions.info/charclass.html#shorthand)

您可以通过使用`i`修饰符进行不区分大小写的匹配来进一步简化表达式

```
/^[a-z]{8}\s+[a-z]{9}\s+[a-z]{10}\s+.*/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:56:37.943

我的理解是你可以简化一点

```
/^[a-zA-Z]{8,10}$/ 
```

（请注意，这会检测每个“单词”，而不是整个文本）

# c - 三元运算符。在条件下自动类型转换

> ID：13284725
> 
> 赞同：1
> 
> 时间：2012-11-08T07:51:51.157
> 
> 标签：c, ternary-operator

如果我`unsigned`在三元运算符条件下只使用类型，这些`unsigned`变量会自动转换为`signed`类型吗？

简单的例子：

```
unsigned int prevTickSeconds = 48;
unsigned int currentTickSeconds = 5; 

unsigned int secondsLeft = (currentTickSeconds - prevTickSeconds ) ?
                            currentTickSeconds - prevTickSeconds :
                            60 - prevTickSeconds + currentTickSeconds; 
```

`(currentTickSeconds > prevTickSeconds)`如本例所示，此构造能否正常工作？三元运算符中的条件是否会自动执行类型转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T07:56:35.350

不，没有这样的转换，因为所有类型都是`unsigned int`，并且会有“下溢”。

笔记：

```
60 - prevTickSeconds + currentTickSeconds 
```

`currentTickSeconds - prevTickSeconds`当且仅当is时才会执行`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:10:27.390

为了让事情按照你想要的方式进行，你需要明确地告诉编译器它应该处理 singns，如下所示：

```
unsigned int prevTickSeconds = 48U;
unsigned int currentTickSeconds = 5U; 

unsigned int secondsLeft = (((int) currentTickSeconds - (int) prevTickSeconds) > 0)
    ? currentTickSeconds - prevTickSeconds 
    : 60 - prevTickSeconds + currentTickSeconds; 
```

或者，为了更高效，您可能想引入一个中间`signed`值：

```
unsigned int prevTickSeconds = 48U;
unsigned int currentTickSeconds = 5U; 
unsigned int secondsLeft = 0U;

{
  signed int deltaSeconds = currentTickSeconds;
  deltaSeconds -= prevTickSeconds;

  secondsLeft = (deltaSeconds > 0)
      ? deltaSeconds  
      : 60 - deltaSeconds;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:29:13.327

C 不关心你的算法，也不知道你的变量是否会下溢，也不知道下溢是有意的还是偶然的。无符号整数的下溢/上溢是明确定义的行为，因此在这种情况下，编译器会很乐意按照您的指示去做：创建下溢。

* * *

一些细节：

```
unsigned int secondsLeft =  (currentTickSeconds - prevTickSeconds ) ?
                            currentTickSeconds - prevTickSeconds :
                            60 - prevTickSeconds + currentTickSeconds; 
```

如果我们用它们对应的类型替换这个表达式中的所有变量，我们得到：

```
unsigned int = (unsigned int - unsigned int) ?
                unsigned int - unsigned int :              
                int - unsigned int + unsigned int; 
```

C 关心的只是它的隐式类型提升规则。此表达式中有两条这样的规则：常规平衡（*通常的算术转换*）和 ?: 运算符的特殊平衡规则。

平衡规则规定，如果两个相同大小的整数是表达式的操作数，其中一个是无符号的，则有符号操作数将转换为无符号操作数。

```
unsigned int = (unsigned int - unsigned int) ?     // no conversion needed
                unsigned int - unsigned int :      // no conversion needed
                (int - unsigned int)               // convert the int to unsigned int
                 + unsigned int;  // we get unsigned + unsigned, no conversion needed 
```

然后将结果存储在一个无符号整数中。

然而，C 中有一个特殊的（奇怪的）规则，与条件运算符 ?: 相关。第二个操作数和第三个操作数是平衡的，就好像它们是同一表达式的运算符一样。因此，如果您有这种情况：

```
1 ? (signed int)x : (unsigned int)y; 
```

那么结果将始终是无符号整数。这是因为 x 和 y 被视为同一操作的一部分，即使 y 从未在代码中使用。这可能会产生微妙的错误，在我看来，完全避免使用 ?: 操作符就足够了。

# mysql - 如何在rails中的几列上执行sum和avg

> ID：13284726
> 
> 赞同：1
> 
> 时间：2012-11-08T07:51:49.973
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

foo, foo_bar 表示为 ActiveModel 类

```
create table foo (id, captured_date)
create table foo_bars (id, foo_id, val1, val2)

insert into foo (1, '2012-11-01')
insert into foo (2, '2012-11-02')

insert into foo_bars (1, 1, 1, 1)
insert into foo_bars (1, 1, 2, 2)
insert into foo_bars (1, 2, 3, 3)
insert into foo_bars (1, 2, 4, 4) 
```

我应该在表格中显示以下内容（日期、总和（val1）、平均（val2））

```
2012-11-01 3 1.5
2012-11-02 7 3.5
_________________
           10 2.5
_________________ 
```

以上是跨日期的 sum(val1), avg(val2)

在您的视图中使用 AR 查询来实现这一目标的最简单方法是什么。我的视图代码应该是什么样子以及我应该使用什么查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:36:52.550

利用

```
select("date, SUM(val1) as sum_val1").group("date").pluck(:date, :sum_val1) 
```

您将仅获得总和数组。您可以根据需要添加字段。另一个人提到的解决方案不是那么好，因为它在 Ruby 中而不是在 SQL 中求和。要显示它真的很简单，它只是一个数组！显示 <%= result.inspect %> 并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:05:17.857

尝试这个

**总和**

```
FooBar.sum(:val1) 
```

或者如果你想通过条件

```
FooBar.where("foo_id = ? ", foo_id).sum(:val1) 
```

或者如果你有一个对象，`view`那么你可以做

*例如*

```
@foobars.sum(:val1) 
```

**平均而言**

```
FooBar.average(:val1) 
```

# mysql - 在 Godaddy 服务器中创建和管理数据库

> ID：13284728
> 
> 赞同：0
> 
> 时间：2012-11-08T07:51:59.863
> 
> 标签：mysql, sql-server, webserver

我想在我的 Godaddy 服务器中创建和管理一个数据库以进行身份​​验证。我该怎么做？..是否需要在服务器中进行任何预配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:33:30.903

这取决于您的服务器操作系统，但有设置 mysql 服务器的指南

[http://dev.mysql.com/doc/refman/5.1/en/installing.html](http://dev.mysql.com/doc/refman/5.1/en/installing.html)

对于预配置，请查看[iptables](http://en.wikipedia.org/wiki/Iptables)并为 mysql 保留端口 3306

# asp.net-mvc-4 - ASP.NET MVC 4 自定义授权属性 - 如何将未经授权的用户重定向到错误页面？

> ID：13284729
> 
> 赞同：23
> 
> 时间：2012-11-08T07:52:04.990
> 
> 标签：asp.net-mvc-4, authorization, custom-attributes

我正在使用自定义授权属性来根据用户的权限级别授权用户的访问。我需要重定向未经授权的用户（例如，用户尝试删除没有删除访问级别的发票）以访问被拒绝的页面。

自定义属性正在工作。但在未经授权的用户访问的情况下，浏览器中不会显示任何内容。

控制器代码。

```
public class InvoiceController : Controller
{
    [AuthorizeUser(AccessLevel = "Create")]
    public ActionResult CreateNewInvoice()
    {
        //...

        return View();
    }

    [AuthorizeUser(AccessLevel = "Delete")]
    public ActionResult DeleteInvoice(...)
    {
        //...

        return View();
    }

    // more codes/ methods etc.
} 
```

自定义属性类代码。

```
public class AuthorizeUserAttribute : AuthorizeAttribute
{
    // Custom property
    public string AccessLevel { get; set; }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var isAuthorized = base.AuthorizeCore(httpContext);
        if (!isAuthorized)
        {                
            return false;
        }

        string privilegeLevels = string.Join("", GetUserRights(httpContext.User.Identity.Name.ToString())); // Call another method to get rights of the user from DB

        if (privilegeLevels.Contains(this.AccessLevel))
        {
            return true;
        }
        else
        {
            return false;
        }            
    }
} 
```

感谢您是否可以分享您的经验。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-08T15:40:50.533

您必须覆盖[此处](http://prideparrot.com/blog/archive/2012/6/customizing_authorize_attribute)`HandleUnauthorizedRequest`指定的。

```
public class CustomAuthorize: AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if(!filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            base.HandleUnauthorizedRequest(filterContext);
        }
        else
        {
            filterContext.Result = new RedirectToRouteResult(new
            RouteValueDictionary(new{ controller = "Error", action = "AccessDenied" }));
        }
    }
} 
```

**注意：更新的条件语句 16 年 1 月

# c# - 按线程顺序同步线程访问固定大小的队列

> ID：13284730
> 
> 赞同：4
> 
> 时间：2012-11-08T07:52:09.077
> 
> 标签：c#, multithreading, queue, synchronize

我在一次采访中被问到以下问题：

有一个**固定大小**的任务队列。线程想要将任务排入队列。如果队列已满，他们应该等待。线程顺序应该保持：如果thread1与task1一起出现，并且在thread2与task2一起出现之后，task1应该在task2之前进入队列。

其他线程想要使任务出列并执行它。如果队列是空的，他们应该等待，并且他们的顺序应该保持：如果 t3 在 t4 之前，t3 应该在 t4 之前入队。

如何实现这一点（在伪代码中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:21:14.793

1.  简单的解决方案在 .NET 4.0 中引入了 namespace [`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)，其中的类工作得很好——我无法从它们那里得到一些错误。
    [ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)和[BlockingQueue](http://msdn.microsoft.com/en-us/library/dd267312.aspx)是您开始研究的地方。但我认为你的问题与标准解决方案无关——这在面试中回答不好，所以：
2.  基于[Jeffrey Richter 书籍](https://rads.stackoverflow.com/amzn/click/com/0735627045)资料的解决方案：
    基础代码（C#）：

    ```
    internal sealed class SynchronizedQueue<T> {
        private readonly Object m_lock = new Object();
        private readonly Queue<T> m_queue = new Queue<T>();

        public void Enqueue(T item) {
            Monitor.Enter(m_lock);
            // After enqueuing an item, wake up any/all waiters
            m_queue.Enqueue(item);
            Monitor.PulseAll(m_lock);
            Monitor.Exit(m_lock);
        }

        public T Dequeue() {
            Monitor.Enter(m_lock);
            // Loop while the queue is empty (the condition)
            while (m_queue.Count == 0)
                Monitor.Wait(m_lock);
            // Dequeue an item from the queue and return it for processing
            T item = m_queue.Dequeue();
            Monitor.Exit(m_lock);
            return item;
        }
    } 
    ```

    这个类是线程安全的，但仍然不检查顺序——这里有很多方法可以实现它。来自同一本书：

    > `ConcurrentQueue`并且`ConcurrentStack`是无锁的；这些都在内部使用 `Interlocked`方法来操作集合。

    因此，您必须删除`Monitor`类使用，并为您的线程提供检查以成为下一个排队项目。这可以通过在私有字段中维护**当前加法器**的数量 和**当前队列长度来完成。**您应该将此字段设置为[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)。
    您应该使用[Interlocked.Exchange](http://msdn.microsoft.com/en-us/library/dk0121zy.aspx)获取您**当前的加法器**并使用[Interlocked.Read](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.read.aspx)获取您**当前的队列长度**。
    之后，您的线程具有唯一编号 -**当前长度 + 当前加法器**。使用[SpinWait](http://msdn.microsoft.com/en-us/library/system.threading.spinwait.aspx)类旋转，而当前长度将不等于您的数字，在该入队项之后，并离开入队方法。

我强烈建议你学习这本书关于多线程和锁的章节——你会在你的生活中为这类问题做好准备。也尝试在这里搜索类似的问题。例如：

[在 .NET 中创建阻塞队列<T>？](https://stackoverflow.com/questions/530211/creating-a-blocking-queuet-in-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:09:14.253

要同步对有限数量资源的访问，您通常使用信号量。谷歌让它得到你自己的想法。

困难的部分是保持阻塞线程的顺序。

`FifoSemaphore`我发现这个项目在 C#中包含一个：http: [//dcutilities.codeplex.com](http://dcutilities.codeplex.com/wikipage?title=Semaphore/FifoSemaphore%20&%20Mutex/FifoMutex%20Tutorial%20and%20Implementation%20Discussion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:17:25.263

如果生产者线程正在等待`numEmptySpaces`信号量以访问队列，那么这种行为可能无论如何都会发生，因为信号量等待队列在 FIFO 以外的任何东西中实现是不合理的，但在大多数信号量实现中并不能保证。

保证这种行为非常尴尬，因为很难定义“线程顺序”的要求：

你如何定义哪个线程先到达？

如果“第一个线程”获得某种阻止其他线程继续执行的锁定，则后续线程“立即”聚集，因此受操作系统提供的任何锁定队列顺序的约束。

我唯一能想到的就是强制每个生产者线程在尝试锁定/排队任何东西之前获取一个无锁时间戳或序列号。这可以通过“正常”原子增量指令来完成。当生产者随后通过获取“numEmptySpaces”单元“进入”并锁定队列时，它可以按序列号顺序将自己排入队列。

我不确定是否`BlockingCollection`可以为此使用标准。您可能可以按序列号对条目进行“排序”，但我不确定此操作是否会锁定队列 - 它应该这样做，但是.. 此外，必须将 sequenceNo 作为私有成员添加到 BlockingCollection后代和原子增量结果维护为每个任务的状态 - 您必须将其添加到`Task`成员中。

我很想通过自己的`BlockingQueue`类构建一个“普通”队列、几个信号量和一个互斥体来实现这一点，一旦获得了 numEmptySpaces 单元和队列互斥体，就将新任务按序列号顺序插入队列中。然后可以将原子增量结果组装到堆栈/自动变量中。

这可能是一个面试问题，但我必须受到解雇的威胁才能在生产代码中实际实现它。很难想到它可能是必要的情况。在我能想到的所有事情中，额外开销和争用的负面影响都超过了可疑的好处。

对于尝试在出队/执行端显式维护任何类型的排序，我有类似的保留意见。尝试确保以序列号顺序到达出队任务中的​​某些“检查点”会很麻烦。它需要来自任务的合作，这需要一个私有同步对象成员在它到达其检查点时发出信号。永远不要尝试:)

# c# - 如何编辑 DateEdit 输入格式

> ID：13284732
> 
> 赞同：0
> 
> 时间：2012-11-08T07:52:16.753
> 
> 标签：c#, winforms, devexpress

如何更改 DateEdit 的输入格式？例如，我想输入没有日期和月份的 2012。

使用显示格式，我可以在输入日期后更改它。所以我认为编辑格式是解决方案。

但是，如果我输入 `editformat.formatstring = "yyyy"` 并尝试在 dateedit 中输入 2012，我只会在输入后得到 0001 作为显示文本。

此外，是否可以只输入月份？例如输入 10，他会显示十月。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:22:16.103

我找到了答案。使用 EditMask 可以更改 dateedit 的显示和编辑样式。

```
 DevExpress.XtraEditors.DateEdit myDateEdit= new DevExpress.XtraEditors.DateEdit();
    ...    
   myDateEdit.Properties.EditMask = "y"; 
```

例如，将显示 2012 年 11 月。

该属性位于 myDateEdit.Properties.EditMask 它属于 Devexpress DateEdit！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:51:05.407

虽然这个问题已经被问过几次了，看看[这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx) 可能你想要的是：

```
string date1 = DateTime.UtcNow.ToString("yyyy"); 
```

# windows-8 - Windows 8：Bing 地图保持事件不适用于 PC 鼠标，但在触摸模式下工作正常

> ID：13284745
> 
> 赞同：1
> 
> 时间：2012-11-08T07:53:04.363
> 
> 标签：windows-8, bing-maps

今天我在 Metro 上遇到了 Bing Map 的一个新问题，按住事件对鼠标不起作用，但是当我将其更改为触摸模式时它工作正常。请帮帮我！！！

```
<Bing:Map x:Name="bingMap" Credentials="{StaticResource BingCredentials}" HorizontalAlignment="Left"
                          Width="700" Height="600" IsHoldingEnabled="True" Holding="Bing_Holding"  />

private async void Bing_Holding(object sender, HoldingRoutedEventArgs e){
        try
        {
            await new MessageDialog("I'm superman!").ShowAsync();
        }
        catch{}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:48:01.557

我刚刚对您的问题进行了一些研究并找到[了这个](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.holding)。

它解释了Holding事件通常不能与鼠标一起使用。还有一些提示可以解释为什么这个事件不起作用以及为什么应该替换它。

我建议您也阅读此[链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465387#using_manipulation_events)。它是触控输入的快速入门指南。

希望它可以帮助你。

# android - 2分钟后Android小部件文本更新

> ID：13284749
> 
> 赞同：0
> 
> 时间：2012-11-08T07:53:14.473
> 
> 标签：android, android-widget, widget, android-appwidget

我为我的应用程序创建了一个小部件以启动。小部件中的数据在`30mins`. 我需要将时间减少到`2mins`. 我听说可以使用它来完成，`AlarmService`但我不知道应该如何实现它。我正在分享我的小部件代码。

```
public class SampleWidget extends AppWidgetProvider {
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);
        RemoteViews view;
        SampleDatabase linksDatabase = new SampleDatabase(context);
        linksDatabase.openDb();
        List<MyMedia> myMedias = linksDatabase.getData();
        String date = null;
        String level = null;
        for (int j = 0; j < myMedias.size(); j++) {
            date = myMedias.get(j).getDateTime();
            level = myMedias.get(j).getLevel();
        }

        linksDatabase.closeDb();
        if (myMedias != null && myMedias.size() > 0) {

            for (int i = 0; i < myMedias.size(); i++) {
                final int n = appWidgetIds.length;
                for (int j = 0; j < n; j++) {
                    int appWidget = appWidgetIds[j];
                    Intent intnt = new Intent(context, MainActivity.class);
                    PendingIntent pi = PendingIntent.getActivity(context, 0,
                            intnt, 0);
                    view = new RemoteViews(context.getPackageName(),
                            R.layout.widget_layout);
                    view.setOnClickPendingIntent(R.id.relLayout, pi);
                    view.setTextViewText(R.id.date, date);
                    //view.setTextViewText(R.id.time, obtainedTime);
                    StringBuffer sb = new StringBuffer(level);
                    sb.append(" ");
                    sb.append("units");
                    view.setTextViewText(R.id.value_1, sb.toString());
                    appWidgetManager.updateAppWidget(appWidget, view);

                }

            }

        }
    }
} 
```

任何人都可以帮助我找到实施方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:58:15.377

我得到了解决方案，那就是你必须写一个`service`你将更新文本的地方，你需要`AlarmManager`每 2 分钟调用一次。在服务类中，您将通过创建数据库对象并获取更新小部件中文本的详细信息来访问数据。

# java - Java：回滚代码

> ID：13284750
> 
> 赞同：5
> 
> 时间：2012-11-08T07:53:15.720
> 
> 标签：java, rollback

有没有可以回滚Java代码的解决方法？

例如，我希望打印出下面的代码`i = 1`但不是`2`：（发生异常时）

```
int i = 1;
try {
    i = 2;
    int j = 10/0;
} catch (Exception ex) {}
System.out.print("i = " + i); 
```

我不认为这种逻辑对程序员来说实际上是无用的。而且我认为这对于编译器来说并不难处理。

例如，它可以临时保存`i = 1`在内存中，并在发生异常后，将其值回滚到`1`而不是`2`. **（例如，如果我们有回滚/捕获**会更好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:50:09.230

本质上，您需要对内存进行版本控制。这已经在一些研究中进行了探索，例如事务内存、对象图版本控制、对象数据库。

问题是正确地做比看起来更难。需要处理的典型问题有：

*   你版本多少？整个可达对象图？感兴趣的子集？
*   版本化和非版本化数据结构化之间的交互如何？
*   那么在“可恢复块”中可能发生的其他操作呢？比如生成线程和读/写 IO。您要撤消该操作吗？你能？

事务性内存正慢慢成为一种主流机制，像 Clojure 这样的语言。然而，它需要一种特殊的设计来处理上述问题。Clojure 实现了很好的平衡，因为它本质上是功能性的，并且版本化的数据是明确标识的。向像 Java 这样的面向对象的命令式语言添加类似的特性并不是免费的。

* * *

您可能对以下链接/出版物感兴趣：

*   [恢复块](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://www.wirfs-brock.com/PDFs/011-013.pdf&ei=p3GbUKvpIIej0QW574HoDw&usg=AFQjCNGYpAm-yCgbJGmSxYmVQ1nTKFc3Dw)，由 Rebecca Wirfs-Brock
*   [过去执行代码：高效的内存对象图版本控制](http://people.cs.kuleuven.be/~roel.wuyts/publications/Pluq09a-Histoory.pdf)（不是关于 Java，而是关于 smalltalk）。
*   [世界：控制副作用的范围](http://www.vpri.org/pdf/tr2011001_final_worlds.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:08:11.163

这个怎么样？

```
 int i = 1;
    int oldValue = 0;
    try {
        oldValue = i;
        i = 2;
        int j = 10 / 0;
    } catch (Exception ex) {
        i = oldValue;
    }
    System.out.print("i = " + i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:55:35.420

当然，你可以在你的`catch`街区里做到这一点。你试过吗？另外，永远不要让你的 catch 块为空。它从来都不是一个好主意。这样，您甚至都不知道是否发生了异常。

`catch`将您的块更改为：-

```
int i = 1;
int old = 0;
try {
    old = i;
    i = 2;
    int j = 10/0;
} 
catch (Exception ex) {
    i = old;
    e.printStackTrace();
}
System.out.print("i = " + i); 
```

此外，捕获更具体的异常是一个好主意，而不是使用单个 catch 块来捕获所有异常。

在您的情况下，您应该 catch`ArithmeticException`而不是`Exception`.

此外，在抛出异常之前跟踪 try 块中的所有更改是不切实际的。如果您有一些固定数量的变量，那么这没什么大不了的。但是考虑一下你不知道你的`try`块将如何操纵你的变量的情况。在这种情况下，您不能简单地，并且将状态回滚到您的 try 块之前的状态并不容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T08:06:54.760

我同意...它是数据库的基本功能，对应于事务。当然这不应该是默认行为，而是标记为事务。然而：

该行为可以使用函数获得......并且让您的代码块使用局部变量进行计算，在发生错误时不返回结果。从函数修改全局变量是糟糕的编程。你想保存的结构，你应该自己保存它们

只有少数情况下这是可行的……想象一下文件写入……或者更糟糕的是，网络传输……这些不可能回滚

更重要的是，您的情况很简单...但是在循环中编辑图像或大型数组的图像...您真的希望编译器“以防万一”复制它吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:30:21.910

我不知道为什么没有人建议它。如果你想回滚，那么只需使用一个函数

```
public int performOperation(int i) throws CustomException {
    try {
        i = 2;
        int j = 10 / 0;
    } catch (Exception ex) {
        // Handle exception here.
        throw new CustomException();
    }
    return i;
}

public void calculate() {
    int i = 1;
    try {
        i = performOperation(i);//I will not be assigned if exception occurs
    } catch (CustomException e) {
        // Handle exception here.
    }
    System.out.println(i);//i will be always 1 here
} 
```

因为 java 是**按值传递的，**所以`i`内部调用方法永远不会改变。**不需要回滚。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T08:20:34.407

回滚的替代方法是在可能引发异常的代码之后才“提交”状态更改：

```
int i = 1;
try {
    // initialize temporary state with current state
    int newState = i;

    // have actual operation using the temporary state
    newState = 2;
    int j = 10 / 0;

    // commit temporary state with code which can not throw exceptions
    i = newState;

} catch (ArithmeticException ex) { // catch only the expected exception!
    /* Add possible error reporting or whatever needs to be done */
}

System.out.print("i = " + i); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T08:07:04.793

不，这是不可能的。如果你有一个用例，你当然可以编写一个自定义类。这是一个简单的例子（不处理许多边缘情况）。

```
public class MemoryInt {
    private int current;
    private int last;

    public MemoryInt(int value) {
        this.current = value;
        this.last = null;
    }

    public int get() {
        return current;
    }

    public int set(int value) {
        this.last = current;
        this.current = value;
    }

    public void rollback() {
        this.current = last;
        this.last = null;
    }
} 
```

# android - Intellij idea 中是否有注释处理器工厂？

> ID：13284753
> 
> 赞同：0
> 
> 时间：2012-11-08T07:53:42.120
> 
> 标签：android, annotations, intellij-idea

Intellij idea中是否有注释处理器工厂？像日食 ![在此处输入图像描述](../Images/07624cb54490d0cab8d4129533b4c16b.png)

该工具![在此处输入图像描述](../Images/c73e31f75b5b206e31c07aad0e3a3bf4.png)在eclipse中生成一个文件夹。我们如何处理idea IDE。或者需要一些插件？

# php - 登录按钮，类似于使用图像的 Dropbox

> ID：13284756
> 
> 赞同：0
> 
> 时间：2012-11-08T07:53:52.230
> 
> 标签：php, javascript, jquery, html, css

我目前正在尝试创建一个类似于 Dropbox 的登录按钮。关于如何执行此操作还有另一个[线程可用，但我希望以不同的方式进行。](https://stackoverflow.com/questions/8372525/how-to-do-dropbox-like-login-button)请注意，我尝试尽可能地遵循该线程中提供的代码，但这是一次失败的尝试。

**我的按钮不是用文本编写的链接，而是指通过图像的链接。此外，当按下按钮时，我希望在它的正下方弹出另一个图像**。

这是我的代码：

html/jquery/php 代码：

```
echo '<div id = popup>';
  echo '<a href="#" id ="logbutton"></a>';
  echo '<div id = "popupimage"> </div>';
echo '</div>';

echo '<script type="text/javascript src="jquery.js">';
echo '$("#popup").click(function(e){ 
$("#popupimage").css("visibility","visible");
e.stopPropagation();
});';
echo '</script>'; 
```

CSS代码：

```
#logbutton{
    top:50px;
    left:850px;
    position: absolute;
    background-image: url(../images/buttons/loginbutton.png);
    width:59px; 
    height:28px;   
}

#popupimage{
    top:63px;
    left:887px;
    position: absolute;
    background-image: url(../images/popupimage.png);
    visibility: hidden;
    width:400px; 
    height:600px;   
} 
```

如果可能的话，我还想知道这是否可以仅使用 html 5 和 css 来完成？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:29:03.317

我设法做到了这一点。这是代码：

```
 echo '<a href="#" id ="loginbutton"></a>';

    echo '<div id = "popup">';
    echo '<div id = "popupimage"> </div>';

//HTML INSIDE POPUP

    echo '</div>';

    echo '<script type="text/javascript" src="jquery.js"></script>';
    echo '<script>';

    echo '$("#loginbutton").click(function(e){';
    echo '$("#popup").css("visibility","visible");';
    echo 'e.stopPropagation();';
    echo '});';

    echo '$("#popup").click(function(e){';
    echo 'e.stopPropagation();';
    echo '});';

    echo '$("body").click(function(e){';
    echo '$("#popup") . css("visibility", "hidden");';
    echo '});'; 
```

# php - json的转换

> ID：13284759
> 
> 赞同：0
> 
> 时间：2012-11-08T07:54:09.043
> 
> 标签：php, json

大家好，我正在努力在我的网站上显示天气更新。为此，我正在发送一些代码，这些代码返回给我一些类似下面的内容

```
stdClass Object
(
    [data] => stdClass Object
        (
            [current_condition] => Array
                (
                    [0] => stdClass Object
                        (
                            [temp_C] => 26
                            [temp_F] => 79
                        )

                )
        )
) 
```

我想获取 [o]=>stdClass 对象下方某处的 temp_C 为此我使用了这样的语句

```
//$returning is variable have all the json in it
$celcius = $returning->data->current_condition->0->temp_c; 
```

请指导我如何获取 temp_C，我目前正在使用 php。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:56:29.040

`current_condition`是一个数组

```
$celcius = $returning->data->current_condition[0]->temp_c; 
```

# git - 可以从（完整）git-svn 克隆重新创建 svn 存储库吗？

> ID：13284762
> 
> 赞同：7
> 
> 时间：2012-11-08T07:54:13.830
> 
> 标签：git, svn, git-svn

作为标题，有没有办法使用 git-svn（包含从 r1 开始的每个提交）从完整克隆中重建 svn 存储库？

编辑：

我可能应该补充一点，我正在寻找一种实用的方法来做到这一点（只要它像原始 svn 存储库一样保持可用，几乎完美的副本就可以了）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T16:56:55.943

是的，可以创建一个非常接近 git-svn 存储库的 SVN 存储库（甚至可以从 Git 合并提交中恢复 svn:mergeinfo 并从 .gitignore 中恢复 svn:ignore）。这样做的步骤：

1.准备分支和标签：

为每个 refs/remotes/* 创建 refs/heads/* （当前的 refs/heads/* 位置将丢失）：

```
$ git branch -a | awk '/remotes\/([^\/])+$/{ref=substr($1, 9); system("git update-ref refs/heads/" ref " refs/remotes/" ref )}' 
```

或者您可以手动为所有有趣的分支设置 refs/heads/*

请注意，refs/heads/master 映射到 SVN 主干，但上面的脚本会将 refs/heads/trunk 设置为 refs/remotes/trunk。所以在运行它之后，应该将 refs/heads/master 设置为 refs/remotes/trunk 并删除 refs/heads/trunk：

```
$ git update-ref refs/heads/master refs/remotes/trunk
$ git branch --delete refs/heads/trunk 
```

标签相同：将 refs/tags/* 设置为 refs/remotes/tags/* 位置：

```
$ git branch -a | awk '/remotes\/tags\/([^\/])+$/{ref=substr($1, 14); system("git update-ref refs/tags/" ref " refs/remotes/tags/" ref )}' 
```

检查所有 refs/remotes/* 和 refs/remotes/tags/* 是否都转换为 refs/heads/* 和 refs/tags/* 因为只有这些引用会被转换。

2.创建一个空的SVN仓库

```
$ svnadmin path/for/svn/repository 
```

3.创建一个包含 refs/heads/* 和 refs/tags/* 的裸 Git 存储库，在步骤 1 中准备好：

```
$ git clone --bare path/to/git-svn/repository path/for/svn/repository/.git 
```

[4\. 使用此链接](http://subgit.com/interim/)下载并安装 SubGit （从 Git 中删除“git-svn-id:”签名的中间版本会在转换时提交消息）。一般来说，SubGit 不是免费的，但对于一次性转换（您的情况），它可以免费使用。使用 SubGit 转换存储库（它希望在 path/for/svn/repository/.git 找到 Git 存储库）

```
$ subgit install path/for/svn/repository 
```

5.SubGit 安装后，Git 和 SVN 存储库将保持同步。可选择中断双向同步（您可以随时启用它），运行

```
$ subgit uninstall path/for/svn/repository 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:00:45.907

理论上，*可以*重新创建一个非常接近原始 Subversion 存储库的存储库。但是，Subversion 存储库数据的某些方面（例如属性和合并信息）不是由`git-svn`. 因此，您不一定能够重新创建原件的*精确*副本。

# c# - 如何在 mvc3 中使用 Intranetwebapplication

> ID：13284768
> 
> 赞同：0
> 
> 时间：2012-11-08T07:54:50.527
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我想使用 asp.net mvc 3 并使用 Intranet 应用程序，但我没有这个选项 :( 我如何获得 Intranet 应用程序

![在此处输入图像描述](../Images/56f8650a8bb35e4247b2cec8bc8588f7.png)

以及我如何获得 mvc4 或它在 vs2010 上不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:28:07.720

据我所知，您只是开发了一个 Web 应用程序，然后通常重要的是要有结构让客户无法访问支持服务器的网络流量

# ubuntu - 在heroku上安装uuid-dev

> ID：13284772
> 
> 赞同：11
> 
> 时间：2012-11-08T07:55:15.227
> 
> 标签：ubuntu, heroku, shared-libraries, uuid

*   uuid-dev 默认不可用
*   sudo apt-get 安装不起作用

如何将 uuid-dev 安装到 heroku 上的适当位置，最好使用 buildpacks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T15:05:41.760

只是猜测

```
echo 'uuid-dev' > Aptfile
heroku buildpacks:add --index 1 heroku-buildpack-apt 
```

参考：

*   [https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app](https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app)
*   [https://github.com/ddollar/heroku-buildpack-apt](https://github.com/ddollar/heroku-buildpack-apt)
*   [https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-apt](https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-apt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-23T04:08:54.990

在应用设置中添加 Buildpacks

```
Go to your app-> setting -> under `Buildpack' you can add mulitple buildpacks 
```

> [https://github.com/ddollar/heroku-buildpack-apt](https://github.com/ddollar/heroku-buildpack-apt)

即使不再维护此 buildpack，但它仍然可以为您工作。

```
Note : You can directly visit  https://dashboard.heroku.com/apps/<app_name>/settings where you can find section with heading  "Buildpacks". 
```

# .net - C:\Windows\assembly\temp 中的文件

> ID：13284776
> 
> 赞同：1
> 
> 时间：2012-11-08T07:55:25.580
> 
> 标签：.net, .net-assembly

我的`C:\Winddows\assembly\temp`目录时不时地填充文件夹和`dll`文件。有时`dll`我在那里的 s 似乎会干扰我在我的`GAC`. 我对此没有确凿的证据，但有时如果我删除临时目录中的文件和文件夹似乎会有所帮助（如果可能 - 有时这些文件被例如 Visual Studio 或其他一些进程锁定）。

有人可以解释临时文件夹与`GAC`. 我做错了什么，或者为什么文件最终会出现在临时文件夹中？

编辑说明：GAC 指的是[全局程序集缓存](http://en.wikipedia.org/wiki/Global_Assembly_Cache)，我*猜*......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:26:45.267

如果您正在使用或开发使用[“Shadow Copying Assembly](http://msdn.microsoft.com/en-us/library/ms404279.aspx) ”活动的 AppDomain 的应用程序，则可能会发生这种情况。这对于 Web 应用程序是正确的，有时对于 NUnit 测试也是如此，但又是 AppDomain 上的一个标志，因此每个应用程序都可能以这种方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-23T03:59:08.050

但根据链接[https://docs.microsoft.com/en-us/dotnet/framework/app-domains/shadow-copy-assemblies?redirectedfrom=MSDN](https://docs.microsoft.com/en-us/dotnet/framework/app-domains/shadow-copy-assemblies?redirectedfrom=MSDN)

存储在全局程序集缓存中的程序集不会被影子复制。

# ios - IOS中的滚动问题

> ID：13284778
> 
> 赞同：2
> 
> 时间：2012-11-08T07:55:32.680
> 
> 标签：ios, uiscrollview, contentsize

*如果我使用动态变量*设置滚动视图，则没有设置内容大小，即

```
scrollView.contentSize=CGSizeMake(320,scrollView.frame.origin.y+120); 
```

调用上述方法后，滚动视图大小保持不变。

但是，如果我使用数字（整数或浮点数）设置它，它会发生变化，但会对滚动产生非常奇怪的影响。附上效果图。

```
scrollView.contentSize=CGSizeMake(320,1000); 
```

这不允许我发布图像无论如何都会出现奇怪的效果。

我怎样才能摆脱它？

请告诉我出了什么问题或我错过了什么？

现在我已经排到了 11 位，这里给出了效果图。

在增加内容大小之前： ![在此处输入图像描述](../Images/6b1a2ebd7b551f23f5ecead506b9e50b.png)

滚动增加内容大小后出现以下效果： ![在此处输入图像描述](../Images/f3092244595fe74f3c3c618ace3ab38d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:59:47.710

最后.......

问题是滚动视图增加了滚动视图指示器的宽度，该指示器在滚动时显示在屏幕上。您有两种选择来摆脱这种情况。

1.  禁用导致问题的垂直或水平指示器，但这可能会导致滚动视图内容大小出现问题，在我的情况下它会导致最后一个单元格未被查看。

2.让它出现，但通过以下代码片段使其脱离屏幕。

```
 [myScrollView setScrollIndicatorInsets:UIEdgeInsetsMake(0.0, 0.0, 0, 320.0)]; 
```

这是完美的工作，但滚动指示器消失了屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:27:39.430

在这一行：

```
scrollView.contentSize=CGSizeMake(320,scrollView.frame.origin.y+120); 
```

您正在将滚动视图的 contentsize 高度设置为`scrollView.frame.origin.y+120`. 意思是，如果您的滚动视图的框架是 x=40，y=40，宽度 = 500，高度 = 500。那么 scrollView.frame.origin.y+120 将等于 40 + 120 = 160。这小于您的滚动视图的高度。所以你的滚动视图不会向上或向下滚动。

在第二行：

```
scrollView.contentSize=CGSizeMake(320,1000); 
```

您将滚动视图的内容大小的高度设置为 1000。这大于滚动视图的高度，因此它会向上和向下滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:15:49.407

选择 Scroll View 并查看其 Size Inspector 窗口。观察它的大小是 320 ， 713 点（在我的例子中）。如果您没有看到与我相同的尺寸，这是调整尺寸以使其与我的相同的好时机。您将需要在代码中使用此值

```
(void)viewDidLoad {
scrollView.frame = CGRectMake(0, 0, 320, 460);
[scrollView setContentSize:CGSizeMake(320, 713)];
 [super viewDidLoad];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:22:27.733

我认为你应该使用 frame.height 来实现你的目标

内容大小必须大于滚动视图的框架大小以进行滚动

并且您正在使用滚动视图的 y 原点，所以这可能就是问题所在。

```
scrollView.contentSize=CGSizeMake(320,scrollView.frame.size.height+120); 
```

# mysql - 如何为具有 FK 关系的表创建插入脚本

> ID：13284779
> 
> 赞同：0
> 
> 时间：2012-11-08T07:55:33.257
> 
> 标签：mysql

```
create table foo(id, val1)
create table foo_bars(id, foo_id, val2) 
```

id 在上述情况下是自动生成的。

我想做以下

```
insert into foo (val1) values (1)
insert into foo_bars (foo_id, val2) values (?, 2) 
```

如果我不知道 foo_id 的值，我该如何获取它。我是否还需要对这些 id 进行硬编码。有没有优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:58:42.530

是的，有一种优雅的方法可以确定最后插入的 id。

检查[这个 MySQL](http://php.net/manual/en/function.mysql-insert-id.php)和[这个 MySQLi](http://www.php.net/manual/en/mysqli.insert-id.php)

从他们的例子中：

```
$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli->query($query);

printf ("New Record has id %d.\n", $mysqli->insert_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:06:20.033

根据mysql网站（[http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)）

试试这个（如果你想使用纯 MySQL）：

```
INSERT INTO foo (val1) 
    VALUES(1);         
INSERT INTO foo_bars (foo_id, val2)
    VALUES(LAST_INSERT_ID(),2);  # use ID in second table 
```

# c# - 如何在 WPF 中进行 jQuery 样式的多选？

> ID：13284780
> 
> 赞同：0
> 
> 时间：2012-11-08T07:55:33.367
> 
> 标签：c#, jquery, .net, wpf, xaml

是否可以在 WPF 中选择与 jQuery 选择器相同类型的项目？

```
 <div class="good">123<div>
    <div class="good">234<div>
    <div class="good">345<div>
    <div>aaa<div> 
```

通过 jQuery，我们可以通过 $('.good') 选择所有“good”类的 div。

**对于 WPF，是否可以通过添加某种类来控制来进行这样的选择？**

ps：我正在做的是试图从后面的代码中改变一些控件的样式。目前，我通过更改已应用于控件的样式来做到这一点。目前，我想了想，想知道 WPF 是否支持这个 jQuery 样式选择。无论如何，在 WPF 中，以 javascript 方式执行似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:01:42.300

您可以本着这种精神做某事（请参阅[此问题](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type)），但我感觉您正在尝试像使用 Javascript 一样执行 WPF，这可能不是最好的方法。

如果是这种情况，我建议查看[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)，尤其是[这篇文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，它的例子是我在该主题上找到的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:17:11.230

在 wpf 中有一个视觉树（顶部容器中视觉元素的表示），您可以使用例如 VisualTreeHelper 类搜索和选择视觉树中的元素，

见参考[http://wpftutorial.net/LogicalAndVisualTree.html](http://wpftutorial.net/LogicalAndVisualTree.html)

但我不建议这样做，这不是改变 wpf 中元素的方式。准确解释你需要做什么，我会尽力指出这个地方。

# c# - 使用asp.net c#查找Ldap中的所有用户

> ID：13284782
> 
> 赞同：0
> 
> 时间：2012-11-08T07:55:43.640
> 
> 标签：c#, active-directory, ldap

下面是我的代码。我想检索网格中名字或姓氏相同的所有用户。但是这里我在网格中对名称本身进行了排序。

我让用户选择输入用户名。一旦他输入名称，我应该能够在 Active Directory 中搜索并返回以用户输入的文本开头的所有用户。

我应该能够显示所有可能性，例如，如果用户输入，`adam`我应该让他选择是否要查看`adam josef`等`adam john`

任何建议都会有所帮助。

这是代码

```
 DirectoryEntry de = new DirectoryEntry("ADConnection");

        DirectorySearcher deSearch = new DirectorySearcher(de);

        //set the search filter    
        deSearch.SearchRoot = de;
        String UserName = txt_To.Text;
        deSearch.Filter = "(&(objectCategory=user)(GivenName=*" + UserName + "*))";
        string[] arrPropertiesToLoad = { "sn" };
        deSearch.PropertiesToLoad.AddRange(arrPropertiesToLoad);

      SearchResultCollection sResultColl = deSearch.FindAll();//Getting undefined error

        Gridview1.DataSource = sResultColl ;
        Gridview1.DataBind(); 
```

这是堆栈跟踪

> [COMException (0x80004005): Unspecified error]
> System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +439513
> System.DirectoryServices.DirectoryEntry.Bind() +36
> System.DirectoryServices.DirectoryEntry.get_AdsObject() +31
> System.DirectoryServices.DirectorySearcher。 FindAll(Boolean findMoreThanOne) +78
> System.DirectoryServices.DirectorySearcher.FindAll() +9
> Certificate.WebForm4.btngo0_Click(Object sender, EventArgs e) 在 C:\Users\273714\documents\visual studio 2010\Projects\Certificate\Certificate\ WebForm4.aspx.cs:202
> System.Web.UI.WebControls.Button.OnClick(EventArgs e)
> +118 System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
> System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
> System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
> System.Web.UI.Page .RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +5563

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:46:50.520

您可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for a UserPrincipal 
// and with the first name (GivenName) of "Bruce" and a last name (Surname) of "Miller"
UserPrincipal qbeUser = new UserPrincipal(ctx);
qbeUser.GivenName = "*" + UserName + "*";

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
} 
```

如果您还没有 - 一定要阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

当然，根据您的需要，您可能希望在您创建的“示例查询”用户主体上指定其他属性：

*   `DisplayName`（通常：名字 + 空格 + 姓氏）
*   `SAM Account Name`- 您的 Windows/AD 帐户名称
*   `User Principal Name`- 您的“username@yourcompany.com”样式名称

您可以在 上指定任何属性`UserPrincipal`并将其用作`PrincipalSearcher`.

**更新：**如果你想找到一堆用户并将它们绑定到 gridview，请使用以下代码：

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for a UserPrincipal 
// and with the first name (GivenName) of "Bruce" and a last name (Surname) of "Miller"
UserPrincipal qbeUser = new UserPrincipal(ctx);
qbeUser.GivenName = "*" + UserName + "*";

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

var results = srch.FindAll();

Gridview1.DataSource = results; 
Gridview1.DataBind(); 
```

不要对返回的所有数据进行两次迭代！（如您的评论）.....

**更新 #2：**使用 S.DS.AM 课程，您**总**能获得完整的课程 - 您对此无能为力。如果您只想选择特定*的*LDAP 属性，则需要使用您原来的方法。

通过这种方法，您需要确保`DirectorySearcher`在**容器**（例如`OU=Users`容器）上创建根目录，而**不是**在像特定用户这样的单个 AD 对象上。

所以尝试使用这段代码：

```
// define a *CONTAINER* as the root of your searcher!
DirectoryEntry de = new DirectoryEntry("LDAP://OU=Users,OU=NJY,OU=NewJersey,OU=USA,OU=NorthAmerica,OU=America,OU=gunt,DC=xxx,DC=com");

DirectorySearcher deSearch = new DirectorySearcher(de);

// set the search filter    
string UserName = txt_To.Text;

deSearch.Filter = string.Format("(&(objectCategory=user)(givenName=*{0}*))", UserName);
deSearch.PropertiesToLoad.Add("sn");

SearchResultCollection sResultColl = deSearch.FindAll();

Gridview1.DataSource = sResultColl;
Gridview1.DataBind(); 
```

那样有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T13:50:45.637

```
deSearch.Filter = "(&(objectCategory=user)(givenName=*" + UserName + "*))"; 
```

工作正常

# jquery - jQueryUI 菜单隐藏

> ID：13284783
> 
> 赞同：2
> 
> 时间：2012-11-08T07:55:47.603
> 
> 标签：jquery, jquery-ui, jquery-ui-menu

我使用 UL 元素创建了一个菜单，我正在使用 jQueryUI 来显示这个菜单。

```
<ul style="display:none" id="action_menu" class="menu">
    <li><a href="javascript:alert(213112);">Edit Translation</a></li>
    <li><a href="javascript:void(0);">Edit Comment</a></li>
    <li><a href="javascript:void(0);">Edit Bind</a></li>
    <li><a href="javascript:void(0);">Edit Reuse</a></li>
    <li><a href="javascript:void(0);">Edit Sync Up</a></li>
    <li><a href="javascript:void(0);">Export</a></li>
    <li><a href="javascript:void(0);">Show History</a></li>
    <li><a href="javascript:void(0);">Upload Screenshot</a></li>
</ul> 
```

单击按钮时， $("#action_menu").menu() 可以显示此菜单。我知道如何显示这个菜单，现在我不知道当鼠标点击其他地方而不是点击菜单时如何隐藏这个菜单。我找了很多例子，他们添加了文档点击监听器，并检查事件目标的父节点是否是这个菜单。像这个链接[隐藏下拉菜单 jQuery](https://stackoverflow.com/questions/8349879/document-click-to-hide-menu)有没有人有更好的主意，我想知道为什么 jQueryUI 不为菜单小部件添加事件或选项。有人帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:19:59.790

这是一个通用的解决方案，我不知道你的插件

```
$(document).click(function (e)
{
    var container = $(".menu");

    if (container.has(e.target).length === 0)
    {
        container.hide();
    }
}); 
```

# javascript - Javascript代码运行顺序

> ID：13284784
> 
> 赞同：0
> 
> 时间：2012-11-08T07:55:50.540
> 
> 标签：javascript, debugging, firebug

我对JS不太熟悉，因为我主要开发桌面应用程序。但我确实知道如何使用 Firebug ;) 我想知道如何找到那些加载了 HTML 的 *.js 文件正在执行的序列以及它从哪里开始？我不知道 javascript 代码是如何工作的。我需要你的提示。

我只想调试一个网站页面，看看它是如何工作的（就像我在 MS Studio 中通过单步执行每次都从同一个入口点开始的代码来做到的）。

javacript 代码从哪里开始？

如果我的问题听起来很愚蠢，我很抱歉..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:02:36.707

Javascript 从文件的顶部开始。一切都是从上到下执行的，您在 (OO) Java 或其他桌面语言等代码中没有看到这样的“启动方法”。

在这种情况下，您可以将其视为一种程序语言。不过，您可以在 Javascript 中执行类似面向对象的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:02:36.153

脚本会按照您将脚本插入标记的顺序进行加载和解释。您可以通过转到“脚本”在 Firebug 中设置断点，您应该会在左侧面板上看到断点（您可能需要重新加载页面）。断点也可以通过键入在您的实际代码中创建，`debugger;`当您在浏览器中运行它时，它将停止该行的执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:03:03.257

JavaScript 代码按照它在页面中出现的顺序启动和执行。

如果您有`script`标签来包含外部 JS 文件，这些文件中的代码将按照它们在文件中出现的顺序依次运行。

例如，假设我们有以下内容：

```
<script type="text/javascript" src="file1.js" />
<script type="text/javascript">
    alert(2);
</script>
<script type="text/javascript" src="file2.js" /> 
```

假设 file1.js 包含`alert(1);`并且 file2.js 包含`alert(3);`.

您将按以下顺序收到 3 个警报：“1”、“2”、“3”。

您可以通过放入`debug;`3 个文件中的任何一个（并在 Firebug 中打开调试）或使用 Firebug 在 3 个文件中的任何一个中放置断点（使用下拉文件选择器）来调试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:06:29.930

Firebug 是一个附加组件。它可以向您显示源代码、响应等。Html、CSS、Javascript、Ajax、Cookie 和许多东西。您也可以在此处调试 javascript。但首先你需要安装这个插件。转到浏览器上的工具选项并安装此“萤火虫”插件。您可以通过搜索找到它。
在这里，您可以像 Visual Studio 一样调试脚本部分。但是您无法调试源代码，因为它已在服务器上运行。
但由于 javascript 是客户端代码。安装后
1\. 右键单击​​鼠标。选择 install with firebug
2\. 选择脚本选项卡。
3.设置调试器如VS。
4\. 调试。

# javascript - jQuery 在表单输入中提交 html 以作为 html 或 doc 文件下载

> ID：13284786
> 
> 赞同：1
> 
> 时间：2012-11-08T07:55:56.033
> 
> 标签：javascript, jquery, html, header, submit

我将 html 存储在页面上的隐藏输入中，我想让用户在 html 文件中下载它（或者如果我将流格式更改为 doc，则 html 可以在该单词 doc 中）。

有没有办法 jQuery 可以编写一些标头然后将 html 放入请求中并让人下载它？

然后我可以避免将它提交给 PHP 函数来下载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:57:47.873

如果不真正使用 flash 是不可能的 - 除非您在链接中使用 base64 限制字符串对其进行编码。

# iphone - 任何用于在我的 iPhone 应用中实现 Facebook 'Like' 功能的 API？

> ID：13284787
> 
> 赞同：0
> 
> 时间：2012-11-08T07:56:04.520
> 
> 标签：iphone

> **可能重复：**
> [iOS 应用程序中的 Like 按钮](https://stackoverflow.com/questions/4087660/like-button-in-ios-application)

我想创建一个 Facebook 喜欢按钮，单击该按钮时我想在我的 iPhone 应用程序中实现“喜欢”Facebook 页面功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:27:43.287

下面给出了获取 facebook like 按钮的最新方法，

NSString *urlString=[NSString stringWithFormat:@"http://www.facebook.com/plugins/like.php?href=%@&send=false&layout=button_count&width=90&show_faces=false&action=like&colorscheme=light&font=arial&height=21",self .href];

//将需要点赞的页面链接存放在href中

```
NSURLRequest *fbLikeURLRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
[_webView loadRequest:fbLikeURLRequest]; 
```

在您需要获得赞按钮的地方使用此 Web 视图！

如果您需要了解更多信息，请注册 developer.facebook.com

问候

迪帕克

# twitter-bootstrap - Twitter Bootstrap 导航栏与 Drupal 管理栏重叠

> ID：13284790
> 
> 赞同：1
> 
> 时间：2012-11-08T07:56:13.980
> 
> 标签：twitter-bootstrap, drupal-7, overlapping

我正在一个使用 Drupal 7 和 Twitter Bootstrap 的网站上工作。我的页面顶部有一个导航栏。当我在 Drupal 中以管理员身份登录时，会出现管理栏。这两个导航栏相互重叠。

![截屏](../Images/7d86c80cd84b457385ad2476861f8a6d.png)

我怎样才能防止这种情况？我希望 Twitter 导航栏始终位于我的页面顶部，但是当我登录 Drupal 时，我希望它位于 Drupal 栏下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:01:18.813

您可能在导航栏中使用了 navbar-fixed-top。如果是这样，您可以尝试将其删除。

```
<div class="navbar navbar-fixed-top"> 
```

或者，您可以放入 navbar-fixed-bottom ，它会将您的引导导航栏粘贴到屏幕底部。

```
<div class="navbar navbar-fixed-bottom"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:45:41.727

你可以试试这个：

```
.navbar-fixed-top { top: 0px; }
body.admin-bar .navbar-fixed-top { top: 28px !important; } 
```

如果这对你有用（它应该！），那么你必须通过将下面的代码粘贴到插件文件夹或你的 functions.php 文件中来将 wp 管理栏移动到底部：

```
function fb_move_admin_bar() {
    echo '
    <style type="text/css">
    body { 
    margin-top: -28px;
    padding-bottom: 28px;
    }
    body.admin-bar #wphead {
       padding-top: 0;
    }
    body.admin-bar #footer {
       padding-bottom: 28px;
    }
    #wpadminbar {
        top: auto !important;
        bottom: 0;
    }
    #wpadminbar .quicklinks .menupop ul {
        bottom: 28px;
    }
    </style>';
}
// on backend area
add_action( 'admin_head', 'fb_move_admin_bar' );
// on frontend area
add_action( 'wp_head', 'fb_move_admin_bar' ); 
```

作为替代方案，您可以使用[此插件](http://wordpress.org/extend/plugins/stick-admin-bar-to-bottom/)

# python - 在 http://www.pagetemplates.org/ 上下载错误：超时 -- 可能找不到某些包

> ID：13284791
> 
> 赞同：2
> 
> 时间：2012-11-08T07:56:24.107
> 
> 标签：python, pyramid

有谁知道发生了什么：

[pagetemplates.org](http://www.pagetemplates.org)

我正在创建一个项目，从该存储库下载失败。好像这几天已经不正常了。我认为它必须与金字塔有关，但我不知道如何将其关闭 - 跳过下载该部分，或者至少如何限制下载尝试，因为它现在一直在循环中运行？

[在http://www.pagetemplates.org/](http://www.pagetemplates.org/)上下载错误：超时 - 可能找不到某些包！

有没有办法跳过这个，你是在一些配置文件中设置的吗？我试图在过去的一个小时内找到它，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:28:55.377

例如，您可以限制`easy_install`搜索镜像的方式`easy_install --allow-hosts 'pypi.python.org' pyramid`。不幸的是 setuptools 并不默认只搜索官方的 pypi 镜像，但我想这是由于在官方镜像出现之前引入了该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:22:35.093

正如 Siddharth Toshniwal 所说，该问题已在[金字塔邮件列表](https://groups.google.com/forum/#!msg/pylons-devel/oWGNF6vtCck/QEbRL__y_zcJ)中进行了讨论。

Python 有两个包安装系统：easy_install 和 pip。easy_install 是调用时使用的一种`python setup.py develop`，它直接从其网站获取包，而 pip 从 python 包索引中获取。

因此，虽然 pagetemplates.org（chameleon 包的站点）已关闭，但无法使用 easy_install 安装 chameleon，但它应该可以与 pip 完美配合。您需要做的就是运行`pip install chameleon`然后恢复您正在做的事情。

# php - 仅在命令行中设置 Xdebug 断点

> ID：13284795
> 
> 赞同：4
> 
> 时间：2012-11-08T07:56:36.467
> 
> 标签：php, command-line, centos, xdebug, centos6

我正在为 PHP 维护脚本而苦苦挣扎，我一直在寻找一种仅在命令行中使用 xdebug 的方法（例如 gdb old-school），但我不知道如何设置断点，一步步执行，跳过并继续。如前所述，Xdebug 已启动并正在运行`phpinfo();`。

我找到了很多关于如何使用 Eclipse 和其他工具执行此操作的文档，但没有关于 CLI 的文档。有人可以帮我吗？我的环境是 Centos 6 和 Bash。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:37:52.237

这实际上是可能的。在 Xdebug 源下载中，您会找到一个名为“debugclient”的目录。在这个目录中，您会发现一个**非常**简单的客户端，它接受原始 DBGP 命令，并以 XML 形式提供输出。要编译，请运行：

*   apt-get install libedit-dev （或等效）
*   ./buildconf
*   ./configure --with-libedit
*   制作

然后，您可以使用`./debugclient`.

然后在不同的 shell 上运行以下命令：

*   导出 XDEBUG_CONFIG="idekey=dr"
*   php -dxdebug.remote_enable=1 yourscript.php

debugclient 看到此连接，然后您可以发出直接 DBGP 命令。对于断点，您可以例如设置：

`breakpoint_set -i 1 -t line -f file:///path/to/yourscript.php -n 42`

需要`-i 1`是一个递增的数字，`-f`是文件和`-n`行号。设置断点后，您可以运行`run -i 2`以前进到该行。对于所有其他命令，我建议您参阅[http://xdebug.org/docs-dbgp.php上的 DBGP 文档](http://xdebug.org/docs-dbgp.php)

# git - 如何在 GIT 中查看 origin 和 master 之间的单个文件的差异？

> ID：13284797
> 
> 赞同：1
> 
> 时间：2012-11-08T07:56:45.373
> 
> 标签：git, version-control

如何在 git 中查看本地文件（在 Master 中）和远程存储库（origin）中的相同文件之间的区别？当我做一个`git fetch origin`然后做一个`git diff master origin/master`。它向我展示了一个巨大的更改列表，这对很多 java 文件并没有真正的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:59:30.930

`git diff master origin/master -- file/to/compare`

这`--`是许多程序使用的约定；它表示它后面的任何参数都不会被视为选项，即使它们以连字符开头。Git 扩展了这个约定，并用于`--`指示以下参数是文件（而不是分支或其他引用，其名称可能与文件名重叠）。

实际上，`--`只要您不使用也作为分支等存在的文件名，我相信它是可选的，但始终使用它更容易。

另请参阅[git diff 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html)。这个问题解释了“--”约定： [Deleting a badly named git branch](https://stackoverflow.com/questions/1192180/deleting-a-badly-named-git-branch)

# perl - perl 文件在循环中覆盖自身

> ID：13284801
> 
> 赞同：-1
> 
> 时间：2012-11-08T07:57:15.507
> 
> 标签：perl, file, for-loop, overwrite

所以我有一个循环，我将值打印到文件中。唯一的问题是，我只能得到循环的最后一次打印。例如，如果这是在我的循环中打印的内容：

```
1 1
2 2 
3 3 
```

我所有的文件都将是`3 3`第一行也是唯一的一行。这是我的代码：

```
open my $f, '>', 'file.txt';

#$node_id set above somewhere...
for my $key (keys %{$todo->{$node_id}->{'urls_hash'}}) { 
    print $f "$node_id $todo->{$node_id}->{'urls_hash'}->{$key}->{'domain_id'}\n";
}

close $f; 
```

我试过用`$| = 1`冲洗，但这似乎没有做任何事情。我希望也许有人以前遇到过这种情况。对于...等的哈希值，我们深表歉意。我知道这很混乱:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:25:37.120

你的问题说`#$node_id set above somewhere...`。根据您的预期输出：

```
1 1
2 2 
3 3 
```

没有设置的代码很难说，`$node_id`但看起来你每次递增时都在重新打开文件`$node_id`。是否需要另一个循环来移动`open`外部？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:02:36.667

这不是你的问题的答案，对不起。

要附加文件，请在打开文件时使用 >>。

```
open my $f, '>>', 'file.txt'; 
```

# ruby-on-rails - 在不触发其余验证模块的情况下更新模型中的部分字段的正确方法是什么？

> ID：13284802
> 
> 赞同：0
> 
> 时间：2012-11-08T07:57:21.197
> 
> 标签：ruby-on-rails, validation

假设我有一个包含许多字段的用户模型，如用户名、密码、电子邮件、国家等。现在，我想创建一个专用的控制器模块，仅用于**更改密码**，但是当我提交密码更改表单时（即使这个表单只有两个密码字段），我的用户模型中的其余验证模块将被触发。

我认为我的想法很普遍，那么处理这个问题的正确方法或rails方法是什么？

# actionscript-3 - Actionscript :: 如何在 Actionscript 中将滚动条添加到 Richeditabletext

> ID：13284806
> 
> 赞同：1
> 
> 时间：2012-11-08T07:57:59.993
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

Scroller 可以添加到 mxml 中的 Richeditabletext 中。

```
<s:BorderContainer>
    <s:Scroller width="335" height="265" >
        <s:RichEditableText backgroundColor="0x900000"  id='_text'  color="0x000000" width="335" height="265"   text="Hellooooo"/>  
    </s:Scroller>
</s:BorderContainer> 
```

但是在 Actionscript 中实现的相同会引发参数错误

```
ArgumentError: This operation is not supported.
at spark.components::Scroller/addElement()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Scroller.as:2277] 
```

引发错误的 Actionscript 代码

```
var bc:BorderContainer = new BorderContainer();
var scroller:Scroller = new Scroller();
var richEditableText:RichEditableText = new RichEditableText();
scroller.addElement(richEditableText);
bc.addElement(richEditableText);
changedTextComponent.addElement(bc); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:04:00.077

嗨下面的代码可以帮助你： -

而不是 scroller.addElement(richEditableText); 替换 scrollRTE.viewport = richEditableText 问题就解决了……

BorderContainerClass.as

```
package
{
    import spark.components.BorderContainer;
    import spark.components.RichEditableText;
    import spark.components.Scroller;

    public class BorderContainerClass extends BorderContainer
    {
        public function BorderContainerClass()
        {
            super();
        }

        private var scrollRTE:Scroller;
        private var richEditableText:RichEditableText;

        override protected function createChildren():void
        {
            if(!scrollRTE)
            {
                scrollRTE = new Scroller();
                scrollRTE.width = 335; 
                scrollRTE.height = 265;
            }
            if(!richEditableText)
            {
                richEditableText = new RichEditableText();
            }
            richEditableText.setStyle('backgroundColor','0x900000');  
            richEditableText.setStyle('color','0x000000');  
            richEditableText.width = 335;
            richEditableText.height= 265;   
            richEditableText.text="Hellooooo";
            scrollRTE.viewport = richEditableText
            this.addElement(scrollRTE);
        }
    }
} 
```

# linux - 在 linux 内核 3.x 模块中，我如何使用 Kprobe 计算系统调用？

> ID：13284821
> 
> 赞同：0
> 
> 时间：2012-11-08T07:59:12.317
> 
> 标签：linux, linux-kernel, system-calls, kernel-module, kernel

我需要帮助来编写一个*内核模块来计算内核 3.xi 上的 linux 系统调用，我想用**kprobe*来实现它，但早期的方法是用 *sys_call* 来实现的。请帮我。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-08T08:41:43.643

在此站点中，您可能会找到有关 Kprobe 的有用详细信息！ [http://doc.opensuse.org/documentation/html/openSUSE/opensuse-tuning/cha.tuning.kprobes.html](http://doc.opensuse.org/documentation/html/openSUSE/opensuse-tuning/cha.tuning.kprobes.html)

# android - 如何将砌体布局实现为 android 自定义列表？

> ID：13284824
> 
> 赞同：0
> 
> 时间：2012-11-08T07:59:41.333
> 
> 标签：android, listview, android-listview

我在添加带有动态视图的 android 自定义列表时遇到问题，`masonry`以及使用它的正确步骤是什么。请给我最好的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:10:41.180

You should be talking about the GridLayout.

Take a look at the Developers Blog post about it [http://android-developers.blogspot.com.es/2011/11/new-layout-widgets-space-and-gridlayout.html](http://android-developers.blogspot.com.es/2011/11/new-layout-widgets-space-and-gridlayout.html)

The API is in [http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

# windows - 在 Windows 平台上从 Node.js 连接 DB2

> ID：13284826
> 
> 赞同：3
> 
> 时间：2012-11-08T07:59:44.533
> 
> 标签：windows, node.js, db2

我目前正在使用一些 jdbc 代码将 DB2 镜像到本地 MySQL-db。我想直接从 Node.js 应用程序连接 DB2，而无需查询镜像。我在 Windows 上运行，无法更改为 Linux。似乎使用 Node.js 在 DB2 上的工作还很微不足道，或者使用了 node-odbc（用于 node 的 unixODBC 绑定）。

我找到了这个项目[https://github.com/herzi/db2.js](https://github.com/herzi/db2.js)，它为 Node 提供了 DB2 绑定，但由于安装失败，我无法安装它。该软件包需要 Node-gyp（已成功安装）和 .NET 框架 SDK。我将 vcbuild.exe 设置到我的 PATH 中。在这些之后，msbuild.exe 抱怨缺少头文件（sqlcli1.h、sqlsystm.h、sqlca.h），我发现它们是 PRO*C 的一部分。

我从这里获取了上面的头文件：http: [//files.edin.dk/php/win32/dev/php_build/include/db2/](http://files.edin.dk/php/win32/dev/php_build/include/db2/)并将它们放入我的节点的 src/ 目录中。现在编译器显示多个错误。

在使用 Windows 从 Node.js 应用程序连接 DB2 时，除了尝试让上述模块工作之外，还有其他选择吗？

任何人都可以在这里帮助我吗？安装上述模块的步骤是什么？

谢谢！

显示的错误：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C2146 : syntax error : missing ';' before identifier 'SQLSTATE' [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C2146: syntax error : missing ';' before identifier 'SQLSTATE' [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Documents and Settings\tpaleniu\.node-gyp\0.8.12\src\sqlcli1.h(1501): error C2371: 'SQLTCHAR' : redefinition; different basic types [C:\IS\node\node_modules\db2\build\db2.vcxproj]

C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\sqlext.h(30) : see declaration of 'SQLTCHAR'

..\src\connection.cc(77): error C3861: 'snprintf': identifier not found 

[C:\IS\node\node_modules\db2\build\db2.vcxproj]..\src\connection.cc(80): error C3861: 'snprintf': identifier not found [C:\IS\node\node_modules\db2\build\db2.vcxproj]

..\src\connection.cc(111): error C3861: 'bzero': identifier not found [C:\IS\node\node_modules\db2\build\db2.vcxproj]

..\src\connection.cc(208): error C3861: 'bzero': identifier not found [C:\IS\node\node_modules\db2\build\db2.vcxproj]

..\src\connection.cc(547): error C2057: expected constant expression [C:\IS\node\node_modules\db2\build\db2.vcxproj]

..\src\connection.cc(547): error C2466: cannot allocate an array of constant size 0 [C:\IS\node\node_modules\db2\build\db2.vcxproj]

..\src\connection.cc(547): error C2133: 'argv' : unknown size [C:\IS\node\node_modules\db2\build\db2.vcxproj] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:27:47.603

确实，node-odbc 当前仅适用于 unixODBC。但 Daniel VerWeire 目前正致力于[在 Windows 上支持 node-odbc](https://github.com/w1nk/node-odbc/issues/31)。我想你需要等一会儿。

Praveen 一有空就会在[这里发帖](https://www.ibm.com/developerworks/mydeveloperworks/blogs/pd/entry/using_ibm_db2_from_node_js34?lang=en_us)

# android - 在 Arduino 上按下按钮时拨打电话

> ID：13284828
> 
> 赞同：0
> 
> 时间：2012-11-08T07:59:57.947
> 
> 标签：android, button, call, arduino

嗨，我正在尝试结合 2 个项目 1\. 告诉我按下 arduino 上的 wen 按钮 2\. 在 android 上拨打电话

我想做的是当按下arduino上的按钮时拨打电话..但没有运气:(

称呼

```
 package net.mitchtech.adb;

    import net.mitchtech.adb.simpledigitalinput.R;
    import android.app.Activity;
    import android.content.ActivityNotFoundException;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.util.Log;

    public class phonecalls extends Activity {

    private void call() {
        try {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:048598077"));
            startActivity(callIntent);
        } catch (ActivityNotFoundException activityException) {
            Log.e("dialing-example", "Call failed", activityException);
        }
    }

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.input);
        }
    } 
```

纽扣

```
package net.mitchtech.adb;

import net.mitchtech.adb.simpledigitalinput.R;
import net.mitchtech.adb.phonecalls;

import org.microbridge.server.AbstractServerListener;
import org.microbridge.server.Server;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.TextView;

public class ButtonView extends FrameLayout {
    private static final String TAG = ButtonView.class.getSimpleName();

    private final View mButtonView;

    private Server mServer;

    private final int BUTTON1 = 2;
    private final int BUTTON2 = 3;

    public ButtonView(Context context, AttributeSet attrs) {
        super(context, attrs);

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        mButtonView = inflater.inflate(R.layout.input, this);
    }

    public void setServer(Server server) {
        mServer = server;

        mServer.addListener(new AbstractServerListener() {

            @Override
            public void onReceive(org.microbridge.server.Client client, byte[] data) {
                if (data.length < 2)
                    return;

                final int pinNumber = data[0];
                final int pinState = data[1];
                Log.i(TAG, "data[0]:" + pinNumber + "  data[1]:" + pinState);

                final TextView positionText = (TextView) findViewById(R.id.activeText);

                class InputAction implements Runnable {

                    public void run() {

                        switch (pinNumber) {
                        case BUTTON1:
                            if (pinState == 1) {
                                call();
                                positionText.setText("Button 1 Active");

                            } else {
                                positionText.setText("");
                            }
                            break;
                        case BUTTON2:
                            if (pinState == 1) {
                                positionText.setText("Button 2 Active");
                            } else {
                                positionText.setText("");
                            }
                            break;

                        default:
                            break;
                        }
                    }
                };

                InputAction action = new InputAction();
                post(action);
            }
        });
    }

    public View getmButtonView() {
        return mButtonView;
    }
} 
```

和另一个活动

```
package net.mitchtech.adb;

import java.io.IOException;

import net.mitchtech.adb.simpledigitalinput.R;

import org.microbridge.server.Server;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SimpleDigitalInputActivity extends Activity {

    private final static String TAG = SimpleDigitalInputActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Server server = null;
        try
        {
            server = new Server(4567);
            server.start();

            ButtonView buttonView = (ButtonView) findViewById(R.id.inputView);
            buttonView.setServer(server);
            } catch (IOException e)
        {
            Log.e(TAG, "Unable to start TCP server", e);
            System.exit(-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:18:49.857

您的`call()`函数在您的活动中声明，但您正试图在您的`ButtonView`类中访问它。尝试将其移入`ButtonView`（复制和粘贴）。

# php - PHPMyAdmin 的 HTML 登录表单

> ID：13284834
> 
> 赞同：0
> 
> 时间：2012-11-08T08:00:21.077
> 
> 标签：php, mysql, phpmyadmin, forms, whmcs

我目前正在为我们的计费软件编写一个 php 模块，这将使我们能够轻松地创建/终止/等。为我们的客户提供数据库作为一项免费服务。模块模板支持创建快速登录按钮，示例代码使用 HTML 表单发布数据。

PHPMyAdmin 可以用这种方式登录吗？尚未从 Google 搜索中找到与此相关的太多内容。

```
function module_AdminLink($params)
{
    $code = '<form action=\"http://'.$params["serverip"].'/controlpanel" method="post" target="_blank">
<input type="hidden" name="user" value="'.$params["serverusername"].'" />
<input type="hidden" name="pass" value="'.$params["serverpassword"].'" />
<input type="submit" value="PHPMyAdmin" />
</form>';
    return $code;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:08:06.120

我还不能发表评论，但是 phpmyadmin 登录表单需要一个会话令牌...您可以[下载该软件](http://www.phpmyadmin.net/home_page/downloads.php)并在 php 代码中搜索如何创建该令牌

# cuda - 使用 CUDA 计算所有可能的单词组合？

> ID：13284835
> 
> 赞同：1
> 
> 时间：2012-11-08T08:00:23.750
> 
> 标签：cuda, permutation, combinations

我想找到可以由给定的 11 个单词组成的所有可能单词的组合。有可能在CUDA上做到这一点吗？如果是，那么如何。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:30:25.693

是的，你可以在 CUDA 中进行排列，事实上，sr。[Wong Shao Voon使用 CUDA 和 OpenCL](http://www.codeproject.com/Articles/380399/Permutations-with-CUDA-and-OpenCL#opencl)实现了Permutations 算法。

他没有按照你的意愿使用字符串，但这不是一个主要问题，你只需要在算法完成后将他使用的符号（字母）转换为你的（单词）的方法。想象他将所有排列保存在一个二维字符数组中，您遍历所有矩阵，而不是打印实际的字符，而是打印您想要的单词（例如`if(matrix[i][j] == 'A') printf("Anaconda");`）。

基准

“我已经针对 CPU 应用程序对 CUDA 进行了基准测试。基准测试中使用的 CPU 和 GPU 分别是 Intel i7 870（8 核）、2.93Ghz 和 NVidia Geforce 460。CPU 应用程序充分利用 8 核来寻找排列. CPU 应用程序使用阶乘分解将第 n 个排列拆分到不同的 CPU 内核中，在每个工作线程中，使用 STL next_permutation 从第一个第 n 个排列中找到每个连续排列。下面列出了 11 个元素的排列计算结果。**找到的 11 个元素的排列总数为 39,916,800**。需要存储结果的数组大小为 39,916,800 x 11 = 439,084,800。这是我的 1GB 内存 GPU 可以存储的最大排列数。”

折叠 | 语言：cpu：550ms

版本 1 纯因子分解（平均时间） CUDA：550ms OpenCL：581ms

版本 2，每个阶乘分解有 1 个 next_permutation（平均时间） CUDA：317 毫秒 OpenCL：373 毫秒

版本 3，每个阶乘分解有 9 个 next_permutation（平均时间） CUDA：681 毫秒 OpenCL：456 毫秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-15T12:26:54.260

看看[https://github.com/kkilictepe/CudaCombination](https://github.com/kkilictepe/CudaCombination) 它是带有 numba 的 python 实现，但有帮助。

# c++ - 尝试在 Eclipse CDT 中提取函数时出现“选择中的声明过多”错误消息

> ID：13284836
> 
> 赞同：1
> 
> 时间：2012-11-08T08:00:29.650
> 
> 标签：c++, eclipse, refactoring, eclipse-cdt

我正在使用最新的 Juno CDT 版本，并且正在尝试探索其中的 CDT 重构工具。通常，当尝试将一段代码提取到单独的函数中时，我会看到错误：“选择中的声明过多。” 我不知道该怎么做。这种情况的特征似乎是在堆栈上创建了许多对象（也许还有动态分配 - 我不确定）。

有谁知道如果有超过 x 个对象声明，为什么重构机制会关心？重构此类代码的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:08:33.507

我猜您在问题中将堆与堆栈混淆了，后者更有意义。

在要提取的代码之前看到的任何堆栈变量都将更改为提取函数的参数。我认为如果它们太多，您会收到此错误消息。如果一个人想要一个超过 5 个参数的函数，这是值得怀疑的。

# java - 如何与远程机器上的对象通信？

> ID：13284840
> 
> 赞同：0
> 
> 时间：2012-11-08T08:00:42.700
> 
> 标签：java, networking

我知道我的 IP 地址，以及我朋友的 IP 地址。如何在两台机器之间传输对象/文件？我是一名高级 Java 程序员，但以前从未使用过网络。

编辑：我现在正在使用一个名为 jnmp2p ( [http://code.google.com/p/jnmp2p/](http://code.google.com/p/jnmp2p/) ) 的 API。当我使用内部 IP 时它工作正常，但当我提供外部 IP 时它会失败。

如何连接到不在我的专用网络上的计算机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:19:30.143

如果您正在寻找两个 java 应用程序之间的通信并且*不想干涉底层网络细节*，那么您可以使用以下两种方法，具体取决于您正在处理的应用程序的类型。

*   如果两个应用程序（在两台机器上）都是 java 独立应用程序，那么**RMI**是最好的选择。[从这些链接 ( 1](http://download.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html) , [2](http://www.onezerozeroone.eu/html/rmi_howto.html) )中查看基础知识
*   如果您的应用程序（接收文件/对象）是 Web 应用程序，那么您可以在服务端编写 Servlet，然后编写客户端应用程序以将文件/对象（二进制）发送到服务器。[Commons FileUpload](http://commons.apache.org/fileupload/)是用于此目的的非常流行的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:33:59.583

jnmp2p 的作者在这里。我不再维护图书馆，因为我已经转移到其他事情上。不过我有一些意见。

与您的专用网络之外的 IP 进行点对点通信是一个难题。这是因为两端的状态 NAT 和防火墙已经变得司空见惯，这会阻止您直接在机器之间建立连接。

例如，Skype 使用会合服务，其中两台机器都启动到第三台机器的出站连接并通过该服务进行通信。除了设置额外的基础设施之外，任何对等解决方案都将仅限于 NAT 内的子网，因此 JNMP2P 或 RMI（经过全面修改）等解决方案将是您的最佳选择。

# utf-8 - UTF-8 字符表现怪异

> ID：13284842
> 
> 赞同：2
> 
> 时间：2012-11-08T08:00:53.517
> 
> 标签：utf-8

好的，我的问题是我的几个特殊符号显示为一个小框，请看这里：http: [//i.imgur.com/9mPL4.png](http://i.imgur.com/9mPL4.png)

符号编号为：\e8a1

它应该看起来的样子，并且在这个网站上没有问题是这样的：http: [//i.imgur.com/rZOUN.png](http://i.imgur.com/rZOUN.png)

我已经通过 .htacces 强制使用 UTF-8，但也没有运气。我已经尝试了一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:30:32.873

我失败了，这整个时间答案就在我面前：P .icon-logo-entypo:before Entypo 是字体:) 下载并且它现在正在工作！

# linq-to-xml - XElement.Value 和空值中的怪异

> ID：13284843
> 
> 赞同：0
> 
> 时间：2012-11-08T08:00:57.223
> 
> 标签：linq-to-xml

这是 LINQ to XML 中的一个奇怪行为。这是一个参考 XML 文档。

```
<Root>
  <First>first</First>
  <Second></Second>
  <Third />
</Root> 
```

正如你所期望的那样`root.Element("First").Value == "first"`是真的。

正如你所期望的那样`root.Element("Second").Value == ""`是真的。

然后我会期望`root.Element("Third").Value`是`null`。但事情是这样的：`root.Element("Third ").Value`返回一个空字符串。

以下是 .NET 框架的源代码：

```
public string Value
{
  get
  {
    if (this.content == null)
    {
        return string.Empty;
    }
    string text = this.content as string;
    if (text != null)
    {
        return text;
    }
    StringBuilder stringBuilder = new StringBuilder();
    this.AppendText(stringBuilder);
    return stringBuilder.ToString();
  } 
```

我的期望完全错误吗？这是一个错误的设计决定吗？我会写 a`return null`而不是 a `return string.Empty`。

请注意，有一个`IsEmpty`属性告诉标签是打开还是自关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T14:25:08.267

我同意，这只是一种设计选择，但我会说这是一个很好的选择！考虑以下查询：

```
var items = from e in doc.Elements("name")
            where e.Value.Length < 10
            select e; 
```

如果`XElement.Value`确实返回`null`空元素，则查询将抛出`NullReferenceException`! 有了`String.Empty`它就不会那样做了。

同样的事情也适用于`Explicit(XElement to String)`转换。如果`null`source`XElement`为`null`，但`String.Empty`为空时返回。如果`null`两者都返回，那将是令人困惑的。

如果您想检查元素是否不存在**或**没有值，请使用`String.IsNullOrEmpty`方法而不是`== null`比较。

# android - 如何在 Android 中解析返回 Map（键值对）的 Soap 响应？

> ID：13284844
> 
> 赞同：0
> 
> 时间：2012-11-08T08:01:06.153
> 
> 标签：android, web-services, parsing, soap

我只是对一项 Web 服务进行 Soap 调用，然后在一个字符串中给出响应，其中包含如下所示的数据：

```
 [Map{
         item=anyType{key=customer_id; value=1; }; 
         item=anyType{key=created_at; value=2007-08-30 23:23:13; }; 
         item=anyType{key=updated_at; value=2008-08-08 12:28:24; }; 
         item=anyType{key=increment_id; value=000000001; }; 
         item=anyType{key=store_id; value=1; }; 
         item=anyType{key=website_id; value=1; }; 
         item=anyType{key=default_billing; value=274; }; 
         item=anyType{key=default_shipping; value=274; }; 
         item=anyType{key=disable_auto_group_change; value=0; }; 
         item=anyType{key=email; value=john.doe@example.com; }; 
         item=anyType{key=firstname; value=John; }; 
         item=anyType{key=group_id; value=1; }; 
         item=anyType{key=lastname; value=Doe; }; 
         item=anyType{key=middlename; value=; }; 
         item=anyType{key=password_hash; value=2049484a4020ed15d0e4238db22977d5:eg; }; 
         item=anyType{key=prefix; value=; }; 
         item=anyType{key=suffix; value=; }; 
         item=anyType{key=taxvat; value=; }; 
```

}]

所以我只是尝试了很多资源来解析这个响应，比如 JSON、Vector、Enumeration、Map、HashMap ......但我无法解析这个响应，

这不是 JSON 响应，但我仍然尝试用 JSON 解析数据，但我不能......

解析这种响应的最佳方法是什么？

有人知道怎么做这个吗 ？

谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-18T09:54:43.837

您可以像这样创建一个新类**SoapMap**：

```
class SoapMap
{
    SoapObject soapObject;
    Map<String, String> pairs = new HashMap<String, String>();

    public SoapMap(SoapObject soapObject)
    {
        this.soapObject = soapObject;
        for(int i=0; i<soapObject.getPropertyCount(); i++)
        {
            String str = soapObject.getProperty(i).toString();
            String key = str.split("key=")[1].split(";")[0];
            String value = str.split("value=")[1].split(";")[0];            
            pairs.put(key, value);
        }
    }

    public String getValue(String key)
    {
        return pairs.get(key);
    }
} 
```

并使用 SoapMap 像：

```
SoapMap soapMap = new SoapMap(yourSoapObjectResponse);
int customer_id = Integer.parseInt( soapMap.getValue("customer_id") );
String firstname = soapMap.getValue("firstname");
String email = soapMap.getValue("email"); 
```

# xml - 将参数值传递给 SSRS 2008 中的数据集参数

> ID：13284845
> 
> 赞同：4
> 
> 时间：2012-11-08T08:01:16.620
> 
> 标签：xml, reporting-services, ssrs-2008, parameter-passing, caml

我有一个带有参数的数据集，该参数传递给查询，如下所示。

![在此处输入图像描述](../Images/f84f05f87792ce8d652f1a6397efa32c.png)

这里的问题是 DataSet 参数`queryOptions`不接受来自 Report Parameter 的值`Date`。

如果我硬编码任何值，例如`<CalendarDate> 08/11/2012 </CalendarDate>`而不是`<CalendarDate> = Parameters!Date.Value </CalendarDate>`报告工作正常。

我在传递参数时做错了什么。

我什至创建了另一个名为`Date`并分配参数值的数据集参数，`[@Date]`即使它不起作用。

**注意**：参数`Date`是类型`DateTime`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:46:27.273

您可以在参数值下尝试动态表达式。类似于以下表达式：

```
 =”&lt;QueryOptions><CalendarDate> = “&amp;Parameters!Date.Value.Tostring(“MM/dd/yyyy”) &”&lt;/CalendarDate></QueryOptions>” 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T08:42:57.537

好的，我得到了这个工作！

1.  我在Parameters文件夹中创建了一个新的Parameters as `Date`and `queryOptions`。所以基本上`queryOptions`是我想用作查询的所有内容。

2.  **然后在Dataset Properties>>Parameters**`queryOption`下创建另一个参数。

***   将 `queryOptions`（步骤 2）的值设置为`[queryOptions]`（步骤 1）。**

# java - Java JTable头没有显示

> ID：13284850
> 
> 赞同：1
> 
> 时间：2012-11-08T08:01:22.667
> 
> 标签：java, swing, jtable, absolutelayout, jtableheader

当我点击一个按钮时，有一个我想在面板中显示的表格。我可以让表格显示，但我无法显示标题。也尝试过使用 JscrollPane，但这里没有任何显示。

代码的主要部分：

公共类 GUI 扩展 JFrame { JButton 按钮；静态 JFrame 框架；JTable表A；JPanel 表面板；

```
public static void main(String[] args) {
    frame = new GUI();

}

public GUI() {
    frame = new JFrame();
    Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();

    JPanel MainPanel = new JPanel();
    MainPanel.setBackground(new Color(0, 0, 0));
    MainPanel.setBorder(new SoftBevelBorder(BevelBorder.LOWERED, null,
            null, null, null));
    MainPanel.setBounds(0, 0, screen.width, screen.height - 60);
    MainPanel.setPreferredSize(screen);
    frame.getContentPane().add(MainPanel);
    MainPanel.setLayout(null);

    button = new JButton("Show Assignments");
    button.setFont(new Font("Tahoma", Font.PLAIN, 10));
    button.setBounds(MainPanel.getWidth() / 2 - 65, 40, 130, 20);
    MainPanel.add(button);

    TablePanel = new JPanel();
    TablePanel.setBackground(new Color(245, 222, 179));
    TablePanel
            .setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));
    TablePanel.setBounds(160, 85, MainPanel.getWidth() - 170,
            MainPanel.getHeight() - 95);
    MainPanel.add(TablePanel);
    TablePanel.setLayout(null);

    button.addActionListener(new MyActionListener());

    frame.setExtendedState(frame.MAXIMIZED_BOTH);
    frame.setVisible(true);

} 
```

单击按钮时会发生什么。

```
 class MyActionListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            String[] columnNames = { "AssignmentID", "Assignmenttype",
                    " AssignmentDesricption", "ClientID", "Status" };
            Object[][] data = {
                    {
                            "028079",
                            "Software Support",
                            "Danzafe is in need software support on their mail program.",
                            "25890", "Waiting" },
                    {
                            "028080",
                            "Software Installing",
                            "Danzafe is in need of installation of new software on thier server.",
                            "25890", "In Progress" },
                    { "028081", "Hardware Setup",
                            "Expert Beslag needs to get a new local server setup.",
                            "25891", "In Progress" },
                    {
                            "028082",
                            "Hardware Support",
                            "Expert Beslag have a computer that is making troubles with the wireless internet card",
                            "25891", "Waiting" },
                    {
                            "028083",
                            "Balacing Question",
                            "Blizzard needs help balacing out the class of World of Warcraft",
                            "00001", "Never Ends" } };

            tableA = new JTable(data, columnNames);
            tableA.setBounds(5, 35, TablePanel.getWidth() - 15,
                    TablePanel.getHeight() - 15);

            TablePanel.add(tableA.getTableHeader());
            tableA.setFillsViewportHeight(true);
            tableA.setVisible(true);
            TablePanel.add(tableA);
            TablePanel.repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:32:14.573

*   必须放入`JTable`，`JScrollPane`然后`JTableHeader`应该可见

*   或将`Layout Manager`for`JPanel`从默认更改`FlowLayout`为`BorderLayout`

*   从该地区`JTableHeader`出发`JTable`和前往该`NORTH`地区

*   正确的方法是`JScrollPane`只使用

*   不要使用`setBounds()`，使用 built_in `BorderLayout`for`JFrame`并放入`JScrollPane`（可能没有理由使用`JPanel`，仅在您打算使用的情况下`CardLayout`）到`CENTER area`

*   其余的`JComponent(s)`放在单独的`JPanel`，这个`JPanel`放在`NOTHR`或`SOUTH`区域的来自`JFrame`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:12:31.723

您必须将表格放入滚动窗格，然后将滚动窗格添加到标签中。它应该以这种方式工作，您可能不需要做更多的事情。

# tomcat7 - APNS 不适用于 jdk 1.7

> ID：13284852
> 
> 赞同：0
> 
> 时间：2012-11-08T08:01:32.143
> 
> 标签：tomcat7, apple-push-notifications, ubuntu-12.04, java-7

为什么 Apple 推送通知服务器（服务器端）不适用于 jdk 1.7？我收到**com.notnoop.exceptions.NetworkIOException: javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown**。我已经用 jdk 1.6 尝试了相同的代码，它工作得非常好。我使用的是 ubuntu 12.04 和 tomcat 7。任何帮助都会得到帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:13:35.813

Java 7 (JDK 1.7) 不知道 Entrust Root CA。将您的 APNS 证书、密钥和 Entrust CA 根证书导入 p12 文件。将代码指向该文件，它将起作用。

# jquery - CSS中的滚动条定位

> ID：13284856
> 
> 赞同：1
> 
> 时间：2012-11-08T08:02:06.823
> 
> 标签：jquery, css, scrollbar

![在此处输入图像描述](../Images/0d53b9d479ee98631f78cff53f03c158.png)是否有任何 javascript/jquery 可用于获取溢出滚动 div 的垂直滚动条的位置以固定位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:11:41.770

尝试使用 jquery 方法 scrollTop()：

```
$("#id1").scrollTop(); 
```

它返回滚动条滚轮的位置。

您还可以获得滚动条的高度：

```
$("#id1").scrollHeight; 
```

# java - 将 javax.swing 转换为命令输入

> ID：13284857
> 
> 赞同：0
> 
> 时间：2012-11-08T08:02:07.963
> 
> 标签：java, swing

如何将其转换`javax.swing.*`为正常的命令行提示符？我试图在[https://compilr.com/](https://compilr.com/)上测试代码，但由于它`javax.swing.*`没有提示对话框。

```
import javax.swing.*;

public class Program
{
  public static void main ( String[] args)
  {
    int numOfGrades = 0, gradeCount = 0, sum = 0;
    char grade;
    String openMsg, getNumOfGrades, getGrades, outMsg1, gradeOut;

    openMsg = "Welcome.\n\n" +
    "Grading Scale: A = 4, B = 3, C = 2, D = 1, F = 0\n\n" +
    "Please tell me how many grades to enter today:";
    getNumOfGrades = JOptionPane.showInputDialog ( openMsg );
    numOfGrades = Integer.parseInt ( getNumOfGrades );

    while ( gradeCount != numOfGrades )
    {
      getGrades =  JOptionPane.showInputDialog("Please enter grade number: "+ (gradeCount+1) + "\n" +
      "Grading Scale: A = 4, B = 3, C = 2, D = 1, F = 0\n\n");
      grade = getGrades.charAt ( 0 );
      JOptionPane.showMessageDialog ( null, grade );

      //int sum = 0;

      switch(grade)
      {
      case 'a': case 'A':
        grade = 4;
        break;
      case 'b': case 'B':
        grade = 3;
        break;
      case 'c': case 'C':
        grade = 2;
        break;
      case 'd': case 'D':
        grade = 1;
        break;
      case 'f': case 'F':
        grade = 0;
        break;
      default:
        String errOut = "Sorry, Invalid entry. Exiting Program!";
        JOptionPane.showMessageDialog ( null, errOut );
        break;
      }

      sum += grade;

      gradeCount++;
    }

    double gpa = sum / gradeCount;

    outMsg1 = "You entered " + numOfGrades + " grades\n" +
    "Your GPA is: " + gpa + "\n" +
    "These were the grades you entered: "; //+ grade;  

    JOptionPane.showMessageDialog ( null, outMsg1 );

    System.exit ( 0 );

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:26:54.737

这一切都取决于你想要做什么。如果您只想要一个可运行的程序，那么最简单的方法是使用命令行参数来传递您的输入，而不是提示输入。

要运行的类名称之后的每个命令行参数都作为您的 main 方法接收的 args 字符串数组传入。所以你可以简单地从这个数组中读取它们。

如果要提示输入，则要使用`System.out.println`. 可以使用从“标准输入”读取输入`System.in`。由于这是一个输入流，它通常包装在 BufferedReader 和输入流阅读器中。例如

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
System.out.println("Type some data");
String theData = reader.readLine() 
```

# python - 如何在烧瓶中共享全局应用对象？

> ID：13284858
> 
> 赞同：56
> 
> 时间：2012-11-08T08:02:10.717
> 
> 标签：python, flask

我正在使用烧瓶并尝试以下操作。

我已经定义了一个 main.py 文件，我想通过它运行我的应用程序，即 python main.py -

```
from flask import Flask
from view import tags

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

我已经定义了一个名为 view 的包，我将在其中声明我的不同视图模块，每个模块都有自己的路由。view.tags.py -

```
from flask import Flask
app = Flask(__name__)

@app.route('/e')
def hello_world2():
    return 'Hello World!' 
```

所以我需要在我的 main.py 中有全局应用程序对象来运行服务器，以及在我的包的视图类中注册路由。那么如何创建全局 app 对象并在所有类之间共享呢？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2015-07-07T21:02:41.703

您可以从烧瓶中导入 current_app。它存储对全局应用程序对象的引用。

```
from flask import current_app as app

def home():
    return render_template('base.html', name=app.name) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-08T09:34:18.927

首先，我建议看一下 Blueprints [http://flask.pocoo.org/docs/blueprints/](http://flask.pocoo.org/docs/blueprints/)这将有助于轻松组织应用程序。

另请查看[http://flask.pocoo.org/docs/api/#flask.current_app](http://flask.pocoo.org/docs/api/#flask.current_app) flask.current_app，如何在其他模块中获取您的应用程序实例。

这个链接也可能有助于如何组织和构建烧瓶应用程序（它肯定不是理想的，但可以给你一些想法）[-Large-app-how-to.md](https://gist.github.com/cuibonobo/8696392)

玩得开心 ：）

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-08T15:13:55.213

一种方法是创建一个整体包并`__init__.py`在声明所有全局变量的位置下添加一个文件。例如，在您的情况下，您可以创建如下内容：

```
myapplication/
    *        __init__.py
    *        myviews/
        *         __init__.py
        *         view.py
        *         tags.py 
```

ETC

现在在文件中添加以下代码`__init__.py`：

```
app = Flask(__name__) 
```

您现在可以在任何地方使用这个 app 变量，只要您导入包 myapplication。

```
import myapplication.myviews.view 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-08T09:12:25.307

只需从您的其他文件中导入它。也许最好的方法是将您的应用程序对象放在一个文件中，并从中导入所有其他内容。

例如，您的 main.py 可能仍然有：

```
from flask import Flask
from view import tags

app = Flask(__name__) 
```

然后在其他文件中，您可以执行以下操作：

```
from .main import app 
```

或者，如果在您的包裹之外，只需使用完整的字符串

```
from mypackagename.main import app 
```

需要注意的一件事是循环导入。*处理此问题的最简单方法是首先创建您的应用程序，然后在创建后*从基本文件中导入您需要的任何其他内容。

例如：

```
from flask import Flask
app = Flask(__name__)

# do some stuff with app
from .views import view1, view2
from .server import run 
```

只要您在创建应用程序*之后*放置导入，就像上面一样，循环导入就不应该有问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-17T19:37:07.830

关于在单独的源文件中的“帮助”python 函数中从烧瓶导入和使用 current_app，只要已经设置了当前应用程序上下文（例如收到 Web 请求），它就可以工作。我有一个案例，在应用程序初始化期间（app.run 尚未调用），app.logger 在辅助函数中被调用。

在我修复它之前（见下文），我得到了一个堆栈跟踪，上面标有“RuntimeError：在应用程序上下文之外工作”。

示例解决方案：
main.py：

```
import helper
...
app = Flask(__name__.split('.')[0],
        template_folder="templates",
        static_folder="static")
... 
# Fix: Create an app context
with app.app_context():
    helper.dbopen(...)
...
app.run(...) 
```

助手.py：

```
from flask import current_app as app
...
def dbopen():
    app.logger.info(...)
    ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-21T15:42:06.710

如果你有一个`AppName.py`定义的文件`app`，然后你有另一个`Foobar.py`需要它的文件，你总是可以说 in `AppName.py`：

```
import Foobar
Foobar.app = app 
```

然后，`Foobar.py`您应该能够在您的功能中使用应用程序。您需要注意的一件事是，`Foobar.py`当文件被调用时，您不能在其中立即运行代码，这取决于`app`导入后传入的变量。

# oracle - 在 oracle 中显示具有解码功能的数据

> ID：13284859
> 
> 赞同：1
> 
> 时间：2012-11-08T08:02:14.530
> 
> 标签：oracle, concatenation, decode

原始数据（图像） ![在此处输入图像描述](../Images/9cf157406ec2b28ab9915d3ab1a3bd8e.png) 我想通过连接几列来显示我的数据。但是看起来不太完美的数据：在连接的末尾有一个逗号，如图所示：

![http://i1207.photobucket.com/albums/bb476/daniwarrior/decode1.jpg](../Images/e11137c7b2320e76d41db956061bfa7d.png)

这是我在 oracle 10g 中创建的查询

```
 select id_pegawai, 
    whitelist_pembayaran||decode(whitelist_pembayaran,null,null,', ')||
    whitelist_pemasang||decode(whitelist_pemasang,null,null,', ')||
    whitelist_jenis_iklan||decode(whitelist_jenis_iklan,null,null) as whitelist,

    blacklist_pembayaran||decode(blacklist_pembayaran,null,null,', ')||
    blacklist_pemasang||decode(blacklist_pemasang,null,null,', ')||
    blacklist_jenis_iklan||decode(blacklist_jenis_iklan,null,null) as blacklist
    from verifikator order by id_verifikator desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:18:57.070

所以你只想删除最后的逗号？`RTRIM`它。

```
select id_pegawai,
       rtrim(whitelist_pembayaran || decode(whitelist_pembayaran, null, null, ', ') ||
              whitelist_pemasang || decode(whitelist_pemasang, null, null, ', ') ||
              whitelist_jenis_iklan, ',') as whitelist,

       rtrim(blacklist_pembayaran || decode(blacklist_pembayaran, null, null, ', ') ||
              blacklist_pemasang || decode(blacklist_pemasang, null, null, ', ') ||
              blacklist_jenis_iklan, ',') as blacklist
  from verifikator
 order by id_verifikator desc 
```

# kaminari - 没有 COUNT 的 Kaminari

> ID：13284860
> 
> 赞同：5
> 
> 时间：2012-11-08T08:02:24.513
> 
> 标签：kaminari

Kaminari 可以在不使用 COUNT(*) 查询访问数据库的情况下工作吗？

我的应用程序的数据库很大，计算项目所需的时间比获取项目本身要长得多，从而导致性能问题。

也欢迎对其他具有大型数据集的分页解决方案提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-06T23:28:29.490

# 分页而不发出 SELECT COUNT 查询

一般分页器需要知道总记录数来显示链接，但有时我们不需要总记录数，只需要“上一页”和“下一页”链接。对于这样的用例，Kaminari 提供`without_count`了创建可分页集合而不计算所有记录数的模式。当您处理非常大的数据集时，这可能会有所帮助，因为在 RDBMS 上对大表进行计数往往会变慢。

只需添加`.without_count`到您的分页对象：

```
User.page(3).without_count 
```

在您的视图文件中，您只能使用如下简单的帮助器，而不是全功能的`paginate`帮助器：

```
<%= link_to_prev_page @users, 'Previous Page' %>
<%= link_to_next_page @users, 'Next Page' %> 
```

来源：[github.com/kaminari](https://github.com/kaminari/kaminari#paginating-without-issuing-select-count-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T05:04:56.793

好吧，Kaminari 或 will_paginate 需要以某种方式计算 total 以确定要呈现的 total_pages。这是不可避免的。我的解决方案是查看数据库查询并尝试对其进行优化。这就是要走的路。

（此答案已过时，请参阅上面的答案）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-19T15:59:36.650

我们有一个案例，我们*确实*想要一个总计数，但不想为它访问数据库——我们的 COUNT 查询在某些情况下需要几秒钟，即使索引很好。

因此，我们在父表中添加了一个计数器缓存，使用触发器使其保持最新，并**覆盖`total_count`**Relation 对象上的**单例：**

```
my_house = House.find(1)
paginated = my_house.cats.page(1)
def paginated.total_count
    my_house.cats_count
end 
```

...以及所有需要计数的东西都可以在不进行查询的情况下工作。

这是一件不寻常的事情。维护计数器缓存有一些成本。如果您对分页数据进行进一步的关系处理，可能会产生奇怪的副作用。覆盖单例方法有时会使调试变成一场噩梦。但是谨慎使用并且记录良好，您可以通过良好的性能获得您想要的行为。

# sas - 当我将 SAS 连接到我的机器上安装的 teradata 时，TDPID 是什么

> ID：13284869
> 
> 赞同：1
> 
> 时间：2012-11-08T08:03:01.533
> 
> 标签：sas, teradata

当我将 SAS 连接到我的机器上安装的 teradata 时，TDPID 是什么我使用以下代码将 SAS 连接到 teradata：在此处输入代码

```
proc sql; 
options symbolgen;
CONNECT TO Teradata as tdm 
( 
schema=127.0.0.1 
user=&tdusr. 
password=&tdpwd. 
defer=yes 
tdpid=127.0.0.1 
mode = teradata 
); 
```

我收到此错误：错误：找不到 TERADATA 引擎。错误：当前不支持与 Teradata DBMS 的连接，或者您的站点上未安装。

并安装了 teradata :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:09:02.230

该错误表明您的 SAS 安装中没有“SAS Access to Teradata”。您还需要获得许可。

# file-upload - 使用spring 3上传文件

> ID：13284876
> 
> 赞同：0
> 
> 时间：2012-11-08T08:03:57.130
> 
> 标签：file-upload, spring-3

```
i'm uploading an image file from this page and i'm getting nullpointer exception for multipartfile creation , i'm unable to understand where i did mistake? and i'm newbie for java

fileupload.jsp 
<form modelAttribute="uploadFile" name="frm" method="post"
    enctype="multipart/form-data" onSubmit="return Validate();">

<form:label for="fileData" path="fileData">File</form:label>
<input path="fileData" id="image" type="file" />
<input type="submit" value="Upload" />
</form>

UploadFile.java 
```

它是一个以 commonsmultiparfile 作为类成员的 bean 页面

```
public class UploadFile {
    private String filename;
    private CommonsMultipartFile fileData;
    /**
     * @return the filename
     */
    public String getFilename() {
        return filename;
    }
    /**
     * @param filename the filename to set
     */
    public void setFilename(String filename) {
        this.filename = filename;
    }
    /**
     * @return the fileData
     */
    public CommonsMultipartFile getFileData() {
        return fileData;
    }
    /**
     * @param fileData the fileData to set
     */
    public void setFileData(CommonsMultipartFile fileData) {
        this.fileData = fileData;
    }
}

FileUploadController
@RequestMapping(value = "/fileUpload", method = RequestMethod.POST)
    public String fileupload(
            serviceOrder,HttpSession session,
            ModelMap model, HttpServletRequest request,UploadFile uploadFile,
            HttpServletResponse response, Object command, BindingResult result) throws Exception {

        if (result.hasErrors()) {
            for (ObjectError error : result.getAllErrors()) {
                logger.info("Error: " + error.getCode() + " - "
                        + error.getDefaultMessage());
            }
            return "//fileUpload";
        }

        try{
        MultipartFile multipartFile = uploadFile.getFileData();
        InputStream inputStream = null;
        OutputStream outputStream = null;
        logger.info("---------------"+uploadFile);
        logger.info("---------------------------"+multipartFile);
        if (multipartFile.getSize() > 0) {
            inputStream = multipartFile.getInputStream();
            // File realUpload = new File("C:/");
            outputStream = new FileOutputStream("D:\\Images\\"
                    + multipartFile.getOriginalFilename());
            logger.info("Original File Name"+multipartFile.getOriginalFilename());
            int readBytes = 0;
            byte[] buffer = new byte[8192];
            while ((readBytes = inputStream.read(buffer, 0, 8192)) != -1) {
                logger.info("writing data into file.....");
                outputStream.write(buffer, 0, readBytes);
            }
            outputStream.close();
            inputStream.close();
            session.setAttribute("uploadFile", "D:\\Images\\"
                    + multipartFile.getOriginalFilename());
        }
    } catch(Exception e) {
        e.printStackTrace();
    } 
```

我正在从这个页面上传一个图像文件，我在创建多部分文件时遇到了空指针异常，我无法理解我在哪里做错了？我是java的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:09:55.143

您是否定义了 multipartresolver bean

例如，您可以在 "<"bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" /">" 中声明 bean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:35:21.077

将您的控制器类方法更改为此并尝试一下

```
 public String fileupload(HttpSession session,@ModelAttribute UploadFile uploadFile,BindingResult result){ 
```

}

我删除了 HttpRequest 和 Response 变量，因为它们没有被使用，并将 BindingResult 对象移动到 ModelAttribute 旁边。在访问元素之前，还要尝试在代码中包含空检查。

# cuda - rootbeer CUDA 示例代码量化吞吐量增益

> ID：13284881
> 
> 赞同：1
> 
> 时间：2012-11-08T08:04:12.373
> 
> 标签：cuda, rootbeer

以下是我在装有 Ubuntu 12.04 (Precise) 和 bumblebee 和 optirun 的笔记本电脑上运行的 Nvidia CUDA 的 rootbeer 示例代码。笔记本电脑采用 Nvidia Optimus，因此是 optirun。GPU 恰好是 Nvidia GeForce GT 540M，Nvidia 网站称它有 96 个内核。我几乎没有获得吞吐量增益。问题是什么？

```
package com.random.test;

import java.util.ArrayList;
import java.util.Formatter;
import java.util.List;

import edu.syr.pcpratts.rootbeer.runtime.Kernel;
import edu.syr.pcpratts.rootbeer.runtime.Rootbeer;

public class ArraySumApp {
    final static int numberOfJobs = 1024; // 1024 in the original example
    final static int sizeOfArray = 512; // 512 in the original example
    final static int theAnswer = 130816;

    public int[] sumArrays(List<int[]> arrays) {

        List<Kernel> jobs = new ArrayList<Kernel>();
        int[] ret = new int[arrays.size()];
        for (int i = 0; i < arrays.size(); ++i) {
            jobs.add(new ArraySum(arrays.get(i), ret, i));
        }

        Rootbeer rootbeer = new Rootbeer();
        rootbeer.runAll(jobs);
        return ret;
    }

    private static long measureOneJob() {

        int[] source = new int[ArraySumApp.sizeOfArray];
        int[] destination = new int[1];
        for (int i = 0; i < ArraySumApp.sizeOfArray; i++)
            source[i] = i;
        Kernel job = new ArraySum(source, destination, 0);

        ElapsedTimer et = new ElapsedTimer();
        job.gpuMethod();
        long timeInMs = et.stopInMilliseconds();
        System.out.println("measureOneJob " + et.stringInMilliseconds());

        assert destination[0] == ArraySumApp.theAnswer : "cosmic rays";
        return timeInMs;
    }

    public static void main(String[] args) {

        Helper.assertAssertionEnabled();

        // measure the time to do one job
        ArraySumApp.measureOneJob();
        long oneJob = ArraySumApp.measureOneJob();

        ArraySumApp app = new ArraySumApp();
        List<int[]> arrays = new ArrayList<int[]>();

        // you want 1000s of threads to run on the GPU all at once for speedups
        for (int i = 0; i < ArraySumApp.numberOfJobs; ++i) {
            int[] array = new int[ArraySumApp.sizeOfArray];
            for (int j = 0; j < array.length; ++j) {
                array[j] = j;
            }
            arrays.add(array);
        }

        ElapsedTimer et = new ElapsedTimer();
        int[] sums = app.sumArrays(arrays);
        long allJobs = et.stopInMilliseconds();
        System.out.println("measureAllJobs " + et.stringInMilliseconds());

        double gainFactor = ((double) ArraySumApp.numberOfJobs) * oneJob
                / allJobs;
        System.out.println(String.format(
                "throughput gain factor %.1f\nthroughput gain %.1f\n",
                gainFactor, gainFactor - 1.0d));

        // check the number of answers is correct
        assert sums.length == ArraySumApp.numberOfJobs : "cosmic rays";

        // check they all have the answer
        for (int i = 0; i < ArraySumApp.numberOfJobs; i++)
            assert sums[i] == ArraySumApp.theAnswer : "cosmic rays";
    }
}

class ArraySum implements Kernel {

    final static int repetitionFactor = 100000;

    private int[] source;
    private int[] ret;
    private int index;

    public ArraySum(int[] src, int[] dst, int i) {
        source = src;
        ret = dst;
        index = i;
    }

    public void gpuMethod() {
        for (int repetition = 0; repetition < ArraySum.repetitionFactor; repetition++) {
            int sum = 0;
            for (int i = 0; i < source.length; ++i) {
                sum += source[i];
            }
            ret[index] = sum;
        }
    }
}

class Helper {
    private Helper() {
    }

    static void assertAssertionEnabled() {
        try {
            assert false;
        } catch (AssertionError e) {
            return;
        }
        Helper.noteCosmicRays();
    }

    static void noteCosmicRays() // programmer design or logic error
    {
        throw new RuntimeException("cosmic rays");
    }
}

class ElapsedTimer {
    private org.joda.time.DateTime t0;
    private long savedStopInMilliseconds;

    public ElapsedTimer() {
        this.t0 = new org.joda.time.DateTime();
    }

    public long stopInMilliseconds() {
        return stop();
    }

    public String stringInMilliseconds() // relies on a saved stop
    {
        Formatter f = new Formatter();
        f.format("%d ms", this.savedStopInMilliseconds);
        String s = f.toString();
        f.close();
        return s;
    }

    public String stopStringInMilliseconds() {
        stop();
        return stringInMilliseconds();
    }

    public String stringInSecondsAndMilliseconds() // relies on a saved stop
    {
        Formatter f = new Formatter();
        f.format("%5.3f s", this.savedStopInMilliseconds / 1000.0d);
        String s = f.toString();
        f.close();
        return s;
    }

    public String stopStringInSecondsAndMilliseconds() {
        stop();
        return stringInSecondsAndMilliseconds();
    }

    public long stopInSeconds() {
        return (stop() + 500L) / 1000L; // rounding
    }

    public String stringInSeconds() // relies on a saved stop
    {
        Formatter f = new Formatter();
        long elapsed = (this.savedStopInMilliseconds + 500L) / 1000L; // rounding
        f.format("%d s", elapsed);
        String s = f.toString();
        f.close();
        return s;
    }

    public String stopStringInSeconds() {
        stop();
        return stringInSeconds();
    }

    /**
     * This is private. Use the stopInMilliseconds method if this is what you
     * need.
     */
    private long stop() {
        org.joda.time.DateTime t1 = new org.joda.time.DateTime();
        savedStopInMilliseconds = t1.getMillis() - this.t0.getMillis();
        return savedStopInMilliseconds;
    }
} 
```

这是输出：

```
measureOneJob 110 ms
measureOneJob 26 ms
CudaRuntime2 ctor: elapsedTimeMillis: 609
measureAllJobs 24341 ms
throughput gain factor 1.1
throughput gain 0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:58:20.467

rootbeer 开发人员表示，采用数组元素总和的示例代码不是最好的示例，另一个示例将显示吞吐量增益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:54:25.870

你可以看到：[https ://github.com/pcpratts/rootbeer1/tree/develop/gtc2013/Matrix](https://github.com/pcpratts/rootbeer1/tree/develop/gtc2013/Matrix)

这是 2013 年 NVIDIA GTC 大会的一个例子。与使用转置的 4 核 Java 矩阵乘法相比，我获得了 20 倍的加速。

该示例是在 GPU 上使用共享内存的平铺矩阵乘法。从 NVIDIA 文献来看，使用共享内存是获得良好加速的最重要方面之一。要使用共享内存，您可以让块中的每个线程将值加载到共享数组中。然后你必须多次重用这些共享值。这节省了从全局内存中获取的时间。

在 Tesla 2.0 架构上，从全局内存中提取大约需要 200-300 个时钟周期，从共享内存中提取大约需要 2-3 个时钟周期。

# jsp - jstl + chrome框架的货币问题

> ID：13284884
> 
> 赞同：1
> 
> 时间：2012-11-08T08:04:18.140
> 
> 标签：jsp, google-chrome, browser, cross-browser, google-chrome-frame

我正在使用 JSTL 在 JSP 页面上显示货币，如下所示：

```
<td>${params.currencyCode} < fmt:formatNumber value="${params.verifiedValue}" type="currency" /></td> 
```

在带有 chrome 框架的 IE8 中，它显示 `¤5,400.12`而不是`$5,400.12`

在其他浏览器中它工作正常（即`$5,400.12`）

有什么输入吗？

# iphone - 最小化时webapp后退按钮不起作用

> ID：13284885
> 
> 赞同：1
> 
> 时间：2012-11-08T08:04:21.540
> 
> 标签：iphone, web-applications, jquery-mobile, mobile-safari, fullscreen

我有使用 jquery 移动框架的 web 应用程序，我使用以下代码添加了后退按钮：

```
<div data-role="header" data-theme="g" data-position="fixed" data-tap-toggle="false">
    <a data-icon="back" data-role="button" data-add-back-btn="true" data-direction="reverse"  data-rel="back" >Back</a> 
</div> 
```

它在正常阶段工作，甚至最小化移动 safari ......但是当最小化我的 webapp 全屏模式然后重新打开我的后退按钮不起作用，例如：我将页面 A 链接到 B 而页面 B 我最小化我的全屏 webapp，然后返回如果我单击返回 burron 再次返回页面 B，如何返回页面 A。？

# mongodb - 如何查询 MongoDB，仅使用内部元素的值及其路径

> ID：13284888
> 
> 赞同：0
> 
> 时间：2012-11-08T08:04:39.207
> 
> 标签：mongodb, mongodb-java, mongodb-query

我是 MongoDB 的新手。现在我有一个谜题：假设我在 mongo 控制台中有一个可用的查询

```
{
    "_id": {
       "$oid": "50a5e1cd703d7e9c65326bf9"
    },
    "people":{
                "name":"arthur",
                "tele": "001-837475"
                "address":{
                             "country":"us",
                             "state" : "CA",
                             "city" : "LA"
                          }
             }
} 
```

我有很多这样的记录。& 我想查询所有来自 CA 的人。下面的查询在 mongo shell 中运行良好

```
 db.test.find({"people.address.state":"CA"}) 
```

但我必须用 Java 进行查询。

PS：我不想使用其他开源包。只是 mongodb-java-driver 会令人愉快。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:08:48.860

应该没有任何问题，您可以以完全相同的方式使用查询：

```
DBObject query = new BasicDBObject("people.address.state", "CA");
test.find(query); 
```

# python - Python/Django：发生异常时自动记录，包括请求信息

> ID：13284890
> 
> 赞同：7
> 
> 时间：2012-11-08T08:04:47.637
> 
> 标签：python, django, exception, logging

我创建了一个函数 log_error(request, traceback)，我在我的异常中调用它。这会将错误信息写入数据库。现在，在我打开每个视图并将其添加到异常处理程序中之前，有没有办法自动将所有异常引发到一个函数，然后调用它？

我看过这个[Python 错误记录](https://stackoverflow.com/questions/4941543/python-error-logging)，它说要编写你自己的 sys.excepthook 版本。出现异常时会自动调用该函数。我尝试了这个，但即使我将解决方案复制粘贴到 views.py 并引发错误，也没有调用 my_excepthook。但是，我并没有太努力，因为无论如何它并没有获得我需要的所有信息。我还需要请求，以便我可以记录与用户、网址等相关的信息。

也许这要求太多了？

（我正在使用 Django，但这似乎不是 Django 特有的东西） 编辑：是的，它是。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:18:34.263

JF Sebastian 的建议奏效了。这是一个 Django 解决方案。

在 settings.py MIDDLEWARE_CLASSES 中：

（我将它添加为最后一个，不确定这是否正确或会导致错误。暂时有效。）

```
'myapp.middleware.ExceptionMiddleware', 
```

在 myapp.middleware.py 中：

```
import traceback
class ExceptionMiddleware(object):
    def process_exception(self, request, exception):
        log_error(traceback, request) 
```

而已。log_error 是我的函数并写入数据库。从文档[https://docs.djangoproject.com/en/dev/howto/error-reporting/](https://docs.djangoproject.com/en/dev/howto/error-reporting/)中也可以看出，我可以获得局部变量以及请求属性。

# php - 使用 phpmailer 通过电子邮件发送正文内容

> ID：13284891
> 
> 赞同：0
> 
> 时间：2012-11-08T08:04:52.147
> 
> 标签：php

我正在尝试在 jobbersbase 的 phpmailer() 中添加文件。

但我不知道如何正确添加它

我是这样使用的，但它只发送 $mailer->Body = ($data['apply_location1']);，我的意思是在 $mailer->AltBody = $msg; 上方的那个 陈述。但我想通过邮件发送所有信息。

```
public function MailApplyOnline($data)
{
    $mailer = $this->getConfiguredMailer();
    $subject = $this->emailTranslator->GetApplyOnlineSubject($data);

    $msg = $data['apply_msg'];

    $msg .= $this->emailTranslator->GetApplyOnlineMsg($_SERVER['HTTP_REFERER']);

    $mailer->SetFrom($data['apply_email'], $data['apply_name']);
    $mailer->AddAddress($data['company_email'], $data['company_name']);
    $mailer->Subject = $subject;
    $mailer->Body = $this->nl2br($msg);
    $mailer->Body = ($data['apply_company']);
    $mailer->Body = ($data['apply_contact']);
    $mailer->Body = ($data['apply_title']);
    $mailer->Body = ($data['apply_location']);
    $mailer->Body = ($data['apply_location1']);
    $mailer->AltBody = $msg;

    if ($data['attachment_filename'] != '')
    {
        $mailer->AddAttachment($data['attachment_path'], $data['attachment_filename']);
    }

    if ($mailer->Send())
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:09:10.393

创建一个局部变量 $body 并继续附加您需要为正文内容添加的任何内容。

```
$body = "";
$body .= $this->nl2br($msg) . "<br/>";
$body .= ($data['apply_company']) . "<br/>";
$body .= ($data['apply_contact']) . "<br/>";
$body .= ($data['apply_title']) . "<br/>";
$body .= ($data['apply_location']) . "<br/>";
$body .= ($data['apply_location1']) . "<br/>";

$mailer->Body = $body; 
```

您的代码失败的原因是因为您不断覆盖 $mailer->Body。

# javascript - 如何在没有 JS 的情况下使用backbone.js 使网站也可以与客户端一起使用

> ID：13284894
> 
> 赞同：2
> 
> 时间：2012-11-08T08:05:19.390
> 
> 标签：javascript, backbone.js, seo

看看[http://www.usatoday.com](http://www.usatoday.com)，该网站是用backbone.js 制作的，但没有它也能完美运行。

我不认为他们使用类似[http://phantomjs.org](http://phantomjs.org)的东西。

有人知道他们是怎么做到的吗？

谢谢

PS我今天也发邮件给美国，如果他们回答并给我许可，我会向她报告他们所说的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:12:39.957

他们使用一种称为[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)的技术。

本质上，这意味着您*无需*JS 即可编写基本站点，并且稍后仅在其之上添加 JavaScript 以改进功能。

它没有什么特别之处——服务器只是发送页面的完整 HTML，可用于呈现站点，而不是使用 Backbone 从模板动态生成标记。

更具体地说，在这种情况下使用的技术，看起来它们主要在服务器上生成内容，即使使用 Ajax 加载它也是如此。

在启用 JS 的情况下更改页面时，它们会从服务器发送完整的页面内容标记。这样做很可能是为了提高网站的 JS 和非 JS 版本之间的代码重用。

发送的 HTML 块似乎包含一些 JSON。这很可能是为他们的客户端实现加载的，因此它知道您当前正在查看的内容。

# java - 将 foreach 中的输入字段值到 foreach 之外的输入字段

> ID：13284895
> 
> 赞同：1
> 
> 时间：2012-11-08T08:05:27.160
> 
> 标签：java, javascript, jsp, input, foreach

我遇到的问题最好用一个代码示例来解释：

我有以下内容`VIEW.jsp`：

```
<c:forEach var="widget" items="${widgets}">
        <div class="drag">
             <p>Id: ${widget.id}</p>
             <input class="editWidget" type="image" src="/tis/img/icons/edit.png" alt="Edit widget">
             <input class="idWidget" type="hidden" value="${widget.id}">
        </div>
</c:forEach>

<div id="editDialog" title="Edit widget">
    <fieldset>
         <input class="editWidgetId" type="hidden" value="??" id="editWidgetId">
    </fieldset>
</div> 
```

`editWidgetId`应该将其“值”属性填充为循环`idWidget`内的值。`foreach`对于循环中的每个元素，此值应该不同（元素由编辑按钮选择）。

问题：

1.  如何将一个输入字段的值传递给另一个输入字段？
2.  当存在 foreach 循环时，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:27:16.373

鉴于您想要动态行为，这项工作必须由 JavaScript 在客户端执行，就像在服务器端一样，**一个editDialog 有****许多**小部件*，* 并且缺少客户端用户事件来做出决定。

 **您要做的是为每个 editWidget 分配一个函数处理程序（或下面我的示例中的语句），以使用适当的值更改 editWidgetId 输入框的值：

```
<input onclick="document.getElementById('editWidgetId').value = '${widget.id}'" class="editWidget" type="image" src="/tis/img/icons/edit.png" alt="Edit widget" > 
```

没有测试过，但我希望你能明白**

# java - 如何用阿拉伯语创建 csv 文件？

> ID：13284901
> 
> 赞同：1
> 
> 时间：2012-11-08T08:06:08.167
> 
> 标签：java, csv

我正在尝试以阿拉伯语创建 CSV 文件列，我正在使用资源包从属性文件中获取值，它能够以阿拉伯语获取值，但在创建文件后，列名显示为**“????? ？？？？？？？？？”** 而不是阿拉伯语。请帮我解决这个问题。

我正在使用以下代码：

```
public static void downloadCSVForReconcilationData(String downloadStr,HttpServletResponse response,String reportName) throws IOException{

    //response.setHeader("Content-Disposition", "inline;filename=\""+"BillingTrxReport.csv"+"\"");
    response.setContentType ("application/x-csv");
    response.setHeader("Content-Disposition","attachment; filename=\""+reportName+".csv"+"\";");
    //response.setHeader("application/vnd.ms-excel;charset=Cp1256","attachment; filename=\""+reportName+".csv"+"\";");// khushwant Patidar
    response.setContentType("application/vnd.ms-excel;charset=Cp1256");// khushwant Patidar
    response.setContentLength((int) downloadStr.length());

try{
    OutputStream out = response.getOutputStream();
    PrintWriter pw = new PrintWriter(out);
    BufferedWriter bufw=new BufferedWriter(pw);
    //BufferedOutputStream outBuf = new BufferedOutputStream(out);

    bufw.write(downloadStr);
    bufw.close();
    pw.close();
    out.flush();
    out.close();

    }catch(IOException ioe){
        ioe.printStackTrace();
        throw ioe;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:30:47.557

[如果您在内容类型中使用 CP1256，则在使用java.io.PrintStream](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#PrintStream%28java.io.File,%20java.lang.String%29)创建文件时必须使用相同的内容。

我建议：

```
OutputStream out = response.getOutputStream();
PrintStream  ps  = new PrintStream( out, true, "CP1256" );
ps.println( downloadStr );
ps.close(); 
```

[没有必要刷新和关闭](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#close%28%29)out 变量。

# android - 从 webview INPUT 字段上传相机照片和文件选择器

> ID：13284903
> 
> 赞同：6
> 
> 时间：2012-11-08T08:06:18.300
> 
> 标签：android, android-camera, webviewclient, filechooser

我的应用程序是基于网络的，我需要上传来自 INPUT 野外营地的图片。我有两种情况，因为我不知道另一种方法来做到这一点，这取决于我选择一个或另一个“boolean boolFileChoser”的页面，具体取决于它的 URL 请愿：

一种。文件选择器

湾。相机照片拍摄。

我已经处理了文件选择器，它完美地上传了文件，~~问题出在相机上。一旦我尝试上传相机图片，它就会崩溃。据我所知，它是因为 URI。~~

a) 文件选择器：content://media/external/images/1234

b) 相机拍摄：file:///mnt/sdcard/Pic.jpg

我发现没有办法改变它。

*查看更新*

~~它现在崩溃，因为尝试上传“content://media/external/images/1234”时出现空指针异常。（仅适用于相机，不适用于文件选择器。）。此外，如果选择器/相机已关闭（后退按钮），我将无法再次调用它。~~

案例a）和b）100％工作，这是工作代码，包括我如何知道是否调用了fileChooser或相机：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (resultCode != RESULT_OK) {
    /** fixed code **/
            //To be able to use the filechooser again in case of error
            mUploadMessage.onReceiveValue(null);
    /** fixed code **/
            return;
    }
    if (mUploadMessage==null) {
        Log.d("androidruntime","no mUploadMessage");
        return;
    }
    if (requestCode == FILECHOOSER_RESULTCODE) {
        Uri selectedImage= intent == null || resultCode != RESULT_OK ? null : intent.getData();
        Log.d("androidruntime","url: "+selectedImage.toString());

    }else if (requestCode == CAMERAREQUEST_RESULTCODE) { 
        if(mCapturedImageURI==null){
            Log.d("androidruntime","no mCapturedImageURI");
            return;
        }
      /** fixed code **/
        getContentResolver().notifyChange(mCapturedImageURI, null);
        ContentResolver cr = getContentResolver();
        Uri uriContent= Uri.parse(MediaStore.Images.Media.insertImage(getContentResolver(), photo.getAbsolutePath(), null, null));
        photo = null;
      /** fixed code **/
    }
    mUploadMessage.onReceiveValue(selectedImage);
    mUploadMessage = null;
}

    private static final int FILECHOOSER_RESULTCODE   = 2888;
    private static final int CAMERAREQUEST_RESULTCODE = 1888;
    private ValueCallback<Uri> mUploadMessage;
    private Uri mCapturedImageURI = null;

    protected class AwesomeWebChromeClient extends WebChromeClient{
        // Per Android 3.0+
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType){  
           /**updated, out of the IF **/
                            mUploadMessage = uploadMsg;
           /**updated, out of the IF **/
            if(boolFileChooser){ //Take picture from filechooser

                Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
                i.addCategory(Intent.CATEGORY_OPENABLE);  
                i.setType("image/*");  
                MainActivity.this.startActivityForResult( Intent.createChooser( i, "Escoger Archivo" ), MainActivity.FILECHOOSER_RESULTCODE );  

            } else { //Take photo and upload picture
                Intent cameraIntent = new Intent("android.media.action.IMAGE_CAPTURE");
                File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                        Uri.fromFile(photo));
                mCapturedImageURI = Uri.fromFile(photo);
                startActivityForResult(cameraIntent, MainActivity.CAMERA_REQUEST);
            }
        }
        // Per Android < 3.0
        public void openFileChooser(ValueCallback<Uri> uploadMsg){
            openFileChooser(uploadMsg, "");
        }
        //Altre
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) {
            openFileChooser(uploadMsg, "");
        }

        /** Added code to clarify chooser. **/

        //The webPage has 2 filechoosers and will send a console message informing what action to perform, taking a photo or updating the file
        public boolean onConsoleMessage(ConsoleMessage cm) {        
            onConsoleMessage(cm.message(), cm.lineNumber(), cm.sourceId());
            return true;
        }
        public void onConsoleMessage(String message, int lineNumber, String sourceID) {
            Log.d("androidruntime", "Per cònsola: " + cm.message());
            if(message.endsWith("foto")){ boolFileChooser= true; }
            else if(message.endsWith("pujada")){ boolFileChooser= false; }
        }
        /** Added code to clarify chooser. **/

    } 
```

* * *

**更新 1**

我可以获得“content://media/external/images/xxx” uri 格式，但应用程序在尝试通过“mUploadMessage.onReceiveValue(selectedImage);”上传 uri 时仍然崩溃。现在我得到一个空指针异常。

* * *

**更新 2**

固定和工作。

我只在文件选择器的情况下在局部变量中有'ValueCallback uploadMsg'，所以当我尝试上传照片文件时它总是抛出一个异常，因为它是空的。一旦我从 if-else 语句中取出，一切正常。以前的更新是处理文件上传的最简单方法。

我已经添加了一个 'mUploadMessage.onReceiveValue(null);' 如果相机/文件选择器意图被取消（您必须在您的网页中处理它），如果没有，您将无法再次启动输入字段（意图）。

* * *

**更新 3**

在 AwesomeChromeClient 中添加了部分代码来区分选项、拍照或选择文件.. 这是我的做法并通过请愿书添加，我相信还有很多其他有效的方法可以做到这一点，

代码现在是 100% 的功能。如果您指明是否需要图片或文件选择器

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-25T10:18:15.057

这就是我从 WebView 输入字段实现相机上传和文件选择器的方式：

下面是这个重要主题的代码。不相关的代码被删除。

```
public class MainActivity extends Activity {

private WebView webView;
private String urlStart = "http://www.example.com/mobile/";

//File choser parameters
private static final int FILECHOOSER_RESULTCODE   = 2888;
private ValueCallback<Uri> mUploadMessage;

//Camera parameters
    private Uri mCapturedImageURI = null;

@SuppressLint("SetJavaScriptEnabled")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    webView = (WebView) findViewById(R.id.webView);

    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadWithOverviewMode(true);

    webView.getSettings().setAllowFileAccess(true);

    webView.loadUrl(urlStart);

    webView.setWebChromeClient(new WebChromeClient() {
        // openFileChooser for Android 3.0+
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) { 

            mUploadMessage = uploadMsg;

            try{
                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File externalDataDir = Environment.getExternalStoragePublicDirectory(
                          Environment.DIRECTORY_DCIM);
                File cameraDataDir = new File(externalDataDir.getAbsolutePath() +
                          File.separator + "browser-photos");
                cameraDataDir.mkdirs();
                String mCameraFilePath = cameraDataDir.getAbsolutePath() + File.separator +
                          System.currentTimeMillis() + ".jpg";
                mCapturedImageURI = Uri.fromFile(new File(mCameraFilePath));

                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);

                Intent i = new Intent(Intent.ACTION_GET_CONTENT); 
                i.addCategory(Intent.CATEGORY_OPENABLE);
                i.setType("image/*");

                Intent chooserIntent = Intent.createChooser(i, "Image Chooser");
                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[] { cameraIntent });

                startActivityForResult(chooserIntent, FILECHOOSER_RESULTCODE);
              }
             catch(Exception e){
                 Toast.makeText(getBaseContext(), "Camera Exception:"+e, Toast.LENGTH_LONG).show();
             }
           }

        // For Android < 3.0
       @SuppressWarnings("unused")
    public void openFileChooser(ValueCallback<Uri> uploadMsg ) {
               openFileChooser(uploadMsg, "");
           }

    // For Android  > 4.1.1
        @SuppressWarnings("unused")
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture){
               openFileChooser(uploadMsg, acceptType);
           }

           public boolean onConsoleMessage(ConsoleMessage cm) {        
               onConsoleMessage(cm.message(), cm.lineNumber(), cm.sourceId());
               return true;
           }
           public void onConsoleMessage(String message, int lineNumber, String sourceID) {
               Log.d("androidruntime", "www.example.com: " + message);
             }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    // TODO Auto-generated method stub
    if(requestCode==FILECHOOSER_RESULTCODE)  
     {  

            if (null == this.mUploadMessage) {
                return;
            }

           Uri result=null;

           try{
                if (resultCode != RESULT_OK) {

                    result = null;

                } else {

                    // retrieve from the private variable if the intent is null
                    result = intent == null ? mCapturedImageURI : intent.getData(); 
                } 
            }
            catch(Exception e)
            {
                Toast.makeText(getApplicationContext(), "activity :"+e, Toast.LENGTH_LONG).show();
            }

            mUploadMessage.onReceiveValue(result);
            mUploadMessage = null;

     }
} 
```

我希望它对某人有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:12:20.410

解决了。在我的问题中，有功能代码以防万一有人需要它。

以下是问题的解决方案：

1.  如果我之前打开并取消，则无法打开相机/文件选择器：

    ```
    //inside onActivityResult
    if (resultCode != RESULT_OK) {
         mUploadMessage.onReceiveValue(null);
         return;
    } 
    ```

2.  获取“content://media/external/images/xxx”uri格式，通过“mUploadMessage.onReceiveValue(selectedImage);”上传uri，避免空指针异常

    ```
    //inside OnActivityResult
    getContentResolver().notifyChange(mCapturedImageURI, null);
    ContentResolver cr = getContentResolver();
    Uri uriContent = Uri.parse(android.provider.MediaStore.Images.Media.insertImage(getContentResolver(), photo.getAbsolutePath(), null, null)); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-21T12:00:17.233

已解决并且工作正常。

看看 WebChromeClient 类的代码就知道了。您会发现参数与之前有所不同。

```
public boolean onShowFileChooser(WebView webView, ValueCallback<Uri[]> filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {
                       throw new RuntimeException("Stub!");
    } 
```

解决方案：

您只需在此 github 链接中关注最新的 ChromeBrowser 代码 Github [上的 Android Chrome 浏览器代码](https://github.com/GoogleChrome/chromium-webview-samples/blob/master/input-file-example/app/src/main/java/inputfilesample/android/chrome/google/com/inputfilesample/MainFragment.java)

为您的项目使用相同的 github 代码。

注意：android 4.4 KitKat 版本仍然存在问题。除了 android 4.4 之外，它适用于其他版本的 Android。

因为这仍然是谷歌的开放缺陷。请查看以下链接。

[在android 4.4 webview上单击时未调用openFileChooser](https://code.google.com/p/android/issues/detail?id=62220)

# model-view-controller - 什么是简单的基于 MVC 的 PHP 博客应用程序？

> ID：13284907
> 
> 赞同：0
> 
> 时间：2012-11-08T08:06:28.813
> 
> 标签：model-view-controller, blogs

我正在寻找像 wordpress 这样的博客工具。但我希望基于 MVC 的工具使用 MVC 结构扩展我的博客。

我的主要要求是

1.  必须基于MVC
2.  简单轻巧
3.  它的博客 url 结构应该是 domain.com/cat_name/post_title ，因为我现在的 wordpress 博客就是这样，我不想失去 Facebook 分享和推文。

我想要一个简单的，因为这只是学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:08:10.550

澄清：如果您使用的 CMS 是否基于 MVC 设计模式与作为用户的您无关，除非您想干预其内部工作（您不这样做 - CMS 被使用并且可能扩展，但在 99% 的用例中，如果它不能满足您的需求，那么更改源代码是个坏主意，因为它很可能会因您可能想要进行的任何更新而中断）

您可能需要一个 MVC 框架，它反过来允许您**编码**自己的 CMS，或者使用一个好的、可扩展的 CMS 应用程序

我使用的是[ProcessWire](http://www.processwire.com)，它是一个 CMS/CMF（F 代表框架）php 应用程序，似乎是您正在寻找的那种东西 - 它为您管理您的内容（默认安装带有一些演示页面），但您定义字段，并使用它们随意显示您的内容。看看 - 用户论坛非常活跃，那里的人真的很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:22:57.853

好吧，有大量基于 MVC 框架的内容管理系统（例如 CodeIgniter）。我个人推荐 Pyro（基于 CodeIgniter），但其他看起来也很有希望。但我知道的不多，因为我没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T06:51:11.597

请注意，这是一个高度相关的问题，会带来大量的意见，而不是真正的答案。考虑到这一点，这是我的答案。

我知道一个工具，您可以使用它来为 ProcessWire 安装 MVC 模板，以及使用 gulp 在其上安装基本项目管理任务。请注意，M 将被视为 ProcessWire。

查看 github.com 并查看 fixate 和 repo generator-fixate-pw 的配置文件。（即：[generator-fixate-pw](http://github.com/fixate/generator-fixate-pw)，如果链接中断，则添加该句子）。

按照存储库上的说明安装它。该工具非常具体，但学习使用该框架有助于提高我的 php 技能分配（仍在学习分配）。

CMS 是否用作博客将取决于您的安装实现。

# c# - 在 iTextSharp 中更改 PDF 字体大小

> ID：13284911
> 
> 赞同：1
> 
> 时间：2012-11-08T08:06:53.817
> 
> 标签：c#, asp.net, pdf, fonts, itextsharp

以下是我正在编写的使用 iTextSharp 创建 PDF 的函数。

让我解释一下这个功能......

我在这里从另一个模板 PDF 文件创建一个 PDF 文件。模板PDF文件被发送到这个函数`bytes[]`，然后我`pdfReader`从这个创建......

从`pdfReader`我创建`pdfStamper`（即新的 PDF 文件）并将响应值写入其字段。它工作正常......唯一的问题是`fint`值的大小很大......

```
public void GeneratePrintPDFTest(ResponseGroup actual, Pages page, byte[] filebyte, out string pdfname, string localstorage)
{
   string rootPath = @"D:/FOP-PDF/";
   var pdfReader = new PdfReader(filebyte);
   var pdfStamper = new PdfStamper(pdfReader,new FileStream(rootPath.ToString(CultureInfo.InvariantCulture) + page.PageId.ToString(CultureInfo.InvariantCulture)
                    + ".pdf",FileMode.Create));
   pdfname = rootPath.ToString(CultureInfo.InvariantCulture) + page.PageId.ToString(CultureInfo.InvariantCulture) + ".pdf";

   AcroFields pdfFormFields = pdfStamper.AcroFields;

   foreach (DictionaryEntry de in pdfReader.AcroFields.Fields)
   {
       var response = actual.Responses.Where(obj => obj.ITPPageFieldKeyId == Convert.ToInt32(de.Key.ToString())).Select(obj => obj).FirstOrDefault();

       if (response != null)
       {
           if (response.ResponseValues != null && !string.IsNullOrEmpty(response.ResponseValues.ToString())
                        && response.ResponseValues.ToString() != "0" && !string.IsNullOrEmpty(response.DataItemID)
                        && response.DataItemID != "0")
           {
              if (response.PrintFormulaResult || response.PageFieldFormulaId == 0)
              {
                 pdfFormFields.SetField(de.Key.ToString(), response.ResponseValues.ToString());
              }
           }
        }
     }

     pdfStamper.FormFlattening = false;
     pdfStamper.Close();
} 
```

我尝试了以下解决方案，但没有用....

```
float fSize = 10;
pdfFormFields.SetFieldProperty(de.Key.ToString(), de.Key.ToString(), fSize, null); 
```

我也怀疑它可能来自模板 PDF 文件，但如果是这样，我怎么能以编程方式更改它。

请帮助我...在此先感谢...

# javascript - jQuery Ajax 问题 - 仅在结果返回时执行的函数

> ID：13284913
> 
> 赞同：0
> 
> 时间：2012-11-08T08:06:59.163
> 
> 标签：javascript, ajax, jquery

下面是我对控制器进行的 jquery ajax 调用

```
jQuery.post('index.php',{
                'option'    : 'com_test',
                'controller': 'product',
                'task'      : 'loadColors',
                'format'    : 'raw',            
                'design_id' : design_id,
                    'collar_id' : collar_id                        
        },function(result){            
        }).success(function(result) { 
                alert(result); 
            }).error(function() { 
                jQuery('div#color_wrapper h1').text('ERROR WHILE LOADING COLORS');
            }).complete(function(result) { 
                alert(result); 
            }); 
```

在我的控制器中有一个功能如下。

```
function loadColors()
    {
        die;
    } 
```

我的问题是即使我`die`在 loadColors() 中使用过，正在执行成功和完整的功能。我想要的是一个函数，如果我们从 loadColors() 返回一些东西就会运行？我怎样才能完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:17:50.393

这样做时`.success()`是不必要的，`$.post`因为`function(results)`只有在帖子返回成功时才会调用。

```
jQuery.post('index.php',{
               'option'    : 'com_test',
               'controller': 'product',
               'task'      : 'loadColors',
              'format'    : 'raw',            
               'design_id' : design_id,
                  'collar_id' : collar_id                        
       },function(result){            

          alert(result);
       }); 
```

是你想玩的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:41:43.667

如果您想`error`在客户端代码中触发处理程序，您应该让您的查询返回一个错误代码（`404 Page not found`、`500 Internal server error`等...）。

在服务器端使用 php，您可以使用以下`header`功能：

```
function loadColors()
{
    header('HTTP/1.1 500 Internal Server Error');
    die;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:18:40.493

我个人只会检查回调是什么，然后决定你想要做什么。

```
.success(function(result) { 
    if (result == "") {
        alert("empty result!");
    } else {
        alert("non empty result! " + result);
    }
}) 
```

例如。

如果你真的不想让成功函数通过 PHP 脚本运行，你应该检查其他头文件，以便在你死之前回馈。我不完全确定这是否有效，因为我以前没有使用过它，但是您可以发送标头来说明页面上有错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T08:19:24.470

函数success和complete被调用是因为你的调用没有出错。你什么都不返回。如果调用它自己的东西出错（即超时或状态码！= 200），则会调用错误函数。

您必须检查成功功能。

```
...
success(function (result) {
    if (!result) {
        alert('Error');
        return;
    }

    // do the right stuff

}) 
```

# java - HazelCast over HTTP（或在 Google AppEngine 上运行）

> ID：13284917
> 
> 赞同：1
> 
> 时间：2012-11-08T08:07:07.690
> 
> 标签：java, google-app-engine, hazelcast

来自维基 HazelCast 的工作方式如下：

```
 After discovery, node communication is only TCP/IP using Java NIO. 
```

`HazelCast`在 HTTP 上工作是否可行？因此它可以与仅提供对 HTTP 资源的访问的 Google AppEngine 之类的 PaaS 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:56:23.660

Hazelcast 提供 REST 接口。您可以访问`map`和`queue`使用 http 协议。

例如;

```
HTTP GET http://10.20.17.1:5701/hazelcast/rest/maps/stocks/key1 
```

方法

```
IMap map = HazelcastInstance.getMap("stocks");
map.get("key1"); 
```

或者

```
HTTP POST http://10.20.17.1:5701/hazelcast/rest/maps/stocks/key1 <CONTENT> 
```

方法

```
IMap map = HazelcastInstance.getMap("stocks");
map.put("key1", <CONTENT>); 
```

有关更多信息，请参阅[Hazelcast 文档](http://hazelcast.com/docs/latest/manual/multi_html/ch15s03.html)。

# nhibernate - 如何在 nhibernate 中保存动态对象

> ID：13284923
> 
> 赞同：0
> 
> 时间：2012-11-08T08:07:20.113
> 
> 标签：nhibernate, dynamic, nhibernate-mapping

我在数据库中有用户表，我创建了 Nhibernate 映射以从该表中获取数据。我创建了动态映射，它返回哈希表列表以响应不是用户类型，因为用户不存在物理类。我获取和保存数据的代码如下：

```
dynamic user = null;
using (ISession session = factory.OpenSession())
{
    user = session.CreateQuery("select u from User as u").List();

    user[0]["LastName"] = "s";
    session.Save(user[0]);
    session.Flush();
}

using (ISession otherSession = factory.OpenSession())
{
    user[0]["LastName"] = "ssss";
    otherSession.Save(user[0]);
    otherSession.Flush();
} 
```

现在，在第一种情况下，当我获取数据并将其保存在同一个会话中时，它可以工作。但是在第二种情况下，当我在一个会话中获取数据然后在另一个会话中保存相同的对象时它不起作用。我收到错误：“没有持久性：System.Collections.Hashtable”。我现在这是一种奇怪的要求，但如果有人知道我可以实现它的任何方法，我将不胜感激。

我对 User 表的休眠映射如下：

```
<hibernate-mapping xmlns='urn:nhibernate-mapping-2.2' >
   <class entity-name='User' table='`User`'>
      <id name='UserId' column='`UserId`' type='string'>
        <generator class='identity'>
        </generator>
      </id>
      <property name='CreatedOn' column='`CreatedOn`'  type='DateTime' />
      <property name='FirstName' column='`FirstName`' type='string' />
      <property name='LastName' column='`LastName`' type='string' />
      <property name='LastUserNewResultAcknowledgedTime' column='`LastUserNewResultAcknowledgedTime`' type='string' />
      <property name='LoginName' column='`LoginName`' type='string' />
      <property name='LoginPassword' column='`LoginPassword`' type='string' />
      <property name='ModifiedBy' column='`ModifiedBy`' type='string'/>
      <property name='ModifiedOn' column='`ModifiedOn`' type='DateTime' />
   </class>
</hibernate-mapping>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:40:35.883

看来你做的一切都是正确的。映射似乎没问题*（这已在第一个场景中得到证明）*。所以你的**动态模型**没问题。在这里查看更多：

[http://nhibernate.info/doc/nh/en/index.html#persistent-classes-dynamicmodels](http://nhibernate.info/doc/nh/en/index.html#persistent-classes-dynamicmodels)

可能缺少*的是（您的代码段中未显示）*显式切换到`dynamic-map`. 它可以在您的工厂配置中完成，也可以在您获得带有显式参数**EntityMode.Map**的会话时完成：

```
using (ISession otherSession = factory.OpenSession(EntityMode.Map))
{
 ...
} 
```

因为如果会话期待 POCO（存在`User`类）并且提供了`Hashtable`（来自上一个会话，所以现在真正分离的对象），它无法找到它的持久性。

# ruby-on-rails - 带有 NOT IN 条件的 Rails 嵌套 SQL

> ID：13284926
> 
> 赞同：3
> 
> 时间：2012-11-08T08:07:45.547
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我目前有这个代码：

```
class Group < ActiveRecord::Base
  has_many :roles

  #can't find better name for this method
  def self.without_role_ids
    find_by_sql('select id from groups where id not in
      (select distinct group_id from roles)').map { |g| g.id }
  end
end

class Role < ActiveRecord::Base
  belongs_to :group
end 
```

`without_role_ids`方法输出没有任何角色的组的 ID。

我想要做的是重写这个方法：

```
def self.without_role_ids
  where("id NOT IN (?)", Role.pluck(:group_id))
end 
```

它产生两个查询。

可以运行

```
where(id: Role.select(:group_id)) 
```

它将只产生一个 SQL 查询，但我需要的`IN`不是它。`NOT IN`

是否可以在`NOT IN`不使用 find_by_sql 的情况下处理一个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:07:45.547

我找到了一个解决方案，用 Squeel 很容易执行这样的查询：

[https://github.com/ernie/squeel](https://github.com/ernie/squeel)

现在方法代码是：

```
where{id.not_in Role.select(:group_id)} 
```

它产生这个查询：

```
SELECT "groups".* FROM "groups" WHERE "groups"."id" NOT IN
  (SELECT "roles"."group_id" FROM "roles" ) 
```

有关于 Squeel 的 Railscast：[http: //railscasts.com/episodes/354-squeel](http://railscasts.com/episodes/354-squeel)

# html - 对齐段落

> ID：13284929
> 
> 赞同：0
> 
> 时间：2012-11-08T08:08:03.580
> 
> 标签：html, css

我正在尝试创建一个问答平台，但我在对齐所有段落时遇到了困难。如果我设置相对定位，文本开始与它左侧的内容重叠。如果我将它设置为绝对，高度不会调整，它开始与下一段重叠。我该如何解决这个问题？

![在此处输入图像描述](../Images/f3345cb8443141f86fd5d307b139da0d.png)

![在此处输入图像描述](../Images/6f3933737d81814218592dfe13b70ad1.png) 这是我的代码：

```
 <div class="question">
                {% if the_question %}
            <ul>
            {% for question in the_question %}
                <li>
                    <div class="votecounter"><div class="numbercount">15</div> Votes</div>
                         <div class="votearrowdiv">
                            <a href="#"><div class="upvotearrow"></div></a>
                            <a href="#"><div class="downvotearrow"></div></a>
                        </div>
                    <a href="/home/{{ movie.id }}/{{ question.id }}/">{{ question.question_text }}</a>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            No questions have been asked.
        {% endif %}
        </div>

    </div>​

.questionvotecontainer{
position:absolute;
border:0px solid purple;
text-align:left;
left:5;
float:left;
display:inline-block;
width:100%;
margin-top:14px;
margin-bottom:4px;
min-width:840;

}
.votecounter{
width:8%;
height:50px;
border:0px solid yellow;
text-align:center;
position:relative;
display:inline-block;
float:left;
font-size:12px;
}
.votearrowdiv{
position:relative;
float:left;
width:4%;
min-height:20px;
border:0px solid gray;
display:inline-block;
min-width:50px;
}
.question{
text-align:left;
width:83%;
height:auto;
display:inline-block;
border:0px solid green;
font-size:18px;
font-weight:bold;
font-family:'Source Sans Pro', sans-serif; font-weight:300;
margin-left:-10px;
padding-bottom:20px;
float:left;
overflow:scroll
min-width:10px;
}
.questionHover{
background-color:#111111;
}
.question ul li{
list-style-type:none;
padding-bottom:10px;
padding-top:2px;
border:1px solid yellow;
width:120%;
min-height:30px;
margin-left:-20px;
overflow:visible;
}
.upvotearrow{
border-bottom:14px solid white;
border-left:14px solid transparent;
border-right:14px solid transparent;
display:inline-block;
margin-top:5px;
position:absolute;
top:0px;
z-index:50;
}
.downvotearrow{
width:0px;
height:0px;
border-top:14px solid #969696;
border-left:14px solid transparent;
border-right:14px solid transparent;
display:inline-block;
position:absolute;
margin-top:26px;
z-index:50;
}
.numbercount{
font-size:24px;
font-weight:bold;
}

.actualQuestion{
    margin-left:40px;
    position:relative;
    }
​ 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:26:44.413

将css添加到标签

```
a{overflow:auto;  float:right; width:84%}​ 
```

**[演示](http://tinkerbin.com/wpb3BX8f)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:29:06.433

我建议您对每个 ListItem 使用类似 2 列的 div 布局：向左您有一个向左浮动的固定宽度的 div，向右您有一个跨越水平空间其余部分的 div。

我已经像这样快速模拟了它，使用 CSS 内联：

```
<li>
<!-- left div, fixed width -->
<div style="width: 100px; float: left; backgound: gray;">
    <div class="votecounter">
        <div class="numbercount">215</div> Votes
    </div>
    <div class="votearrowdiv">
        <a href="#"><div class="upvotearrow"></div></a>
        <a href="#"><div class="downvotearrow"></div></a>
    </div>
</div>                    
<!-- right div, rest of the width us-->                      
<div style="margin-left: 100px; margin-right: 0px;background: orange;">
    <a href="/home/{{ movie.id }}/{{ question.id }}/">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam in est nunc. Etiam pharetra tortor pellentesque tellus accumsan ut rutrum nisi pretium. Donec dignissim sem vel lorem hendrerit elementum. Vestibulum gravida, quam vehicula hendrerit mattis, nulla nisl egestas ipsum, suscipit sagittis urna urna ut risus. Nunc blandit placerat arcu, sed bibendum lectus mattis ut. Sed feugiat dictum molestie. Quisque molestie interdum libero, id convallis tortor congue in. Suspendisse eu turpis mi. </a>
</div> 
```

# php - facebook oAuth登录后如何重定向到home.php？

> ID：13284931
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:08:10.337
> 
> 标签：php, facebook

我试图把 header('Location: home.php') ; 进入使用facebook登录的功能，但在我成功登录后，页面仍然没有重定向到主页。

任何人都可以帮助我吗？谢谢！

```
function login(response, info){
            if (response.authResponse) {

               var accessToken =   response.authResponse.accessToken;

                userInfo.innerHTML = '<img src="https://graph.facebook.com/' + info.id + '/picture">' + info.name
                                                                 + "<br /> Your Access Token: " + accessToken;
                button.innerHTML                               = 'Logout';
                showLoader(false);
                document.getElementById('other').style.display = "block";
                header( 'Location: home.php' ) ;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:11:06.903

您似乎正在混淆您的 PHP 和 JavaScript。[Header](http://php.net/manual/en/function.header.php)是一个 PHP 函数。您不能将它与 JavaScript 一起使用。

您可能想尝试 JavaScript 重定向方法 -

```
var homeUrl = 'home.php';
top.location.href = homeUrl; 
```

# cuda - 为什么我的 CUDA 内核不改变我的阵列？

> ID：13284932
> 
> 赞同：2
> 
> 时间：2012-11-08T08:08:12.067
> 
> 标签：cuda, pycuda

我正在从头开始自学CUDA。我制作了这个简单的内核，它将 1 加到 2D 数组中的每个相关元素。二维数组的元素源自图像的红色通道 (zebra.jpg)。

```
from pycuda.compiler import SourceModule
import matplotlib.image as img
import pycuda.driver as cuda
import pycuda.autoinit
import numpy as np

my_image = img.imread("zebra.jpg")[:,:,0]
block = (32, 32, 1)
grid = (8, 8)

if __name__ == '__main__':
  width, height = np.int32(my_image.shape)
  im = np.array(my_image)
  print 'original sum: ' + str(np.sum(im))

  # Create the CUDA kernel, and run it.
  mod = SourceModule("""
    __global__ void add1ToEverything(float* r, int w, int h) {
      int rowID = blockDim.y * blockDim.y + threadIdx.y;
      int colID = blockDim.x * blockIdx.x + threadIdx.x;

      if (rowID > 0 && rowID < h - 2 && colID > 0 && colID < w - 2)
        r[rowID * w + colID] += 1.0;
    }
  """)
  func = mod.get_function('add1ToEverything')

  for i in range(0, 5):
    func(cuda.InOut(im), width, height, block=block, grid=grid)
  print 'new sum: ' + str(np.sum(im)) 
```

但是，然后我运行这个程序，我得到以下结果。

```
original sum: 1828815
new sum: 1828815 
```

为什么我的原始金额与我的新金额相同？新的总和不应该更大吗？

这是斑马.jpg。

![在此处输入图像描述](../Images/469aba33e272c87b58836ec079575a93.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:39:54.143

你的问题是：
`int rowID = blockDim.y * blockDim.y + threadIdx.y;`
它应该是：
`int rowID = blockDim.y * blockIdx.y + threadIdx.y;`

# c# - 如果序列为空，如何使 LINQ 的 Max 函数返回默认值？

> ID：13284933
> 
> 赞同：40
> 
> 时间：2012-11-08T08:08:15.640
> 
> 标签：c#, linq, .net-4.0

我有这个代码：

```
List<int> myList = new List<int>();
var max = myList.Max();
Console.Write(max); 
```

我希望确保如果列表中没有元素，它应该使用`int`(0) 的默认值。而是`InvalidOperationException`抛出一个，说明“序列不包含任何元素”。

当然我可以使用`Any`或查询语法（如[这里](https://stackoverflow.com/questions/8542325/linq-max-with-default-value)）。但我想使用流利的语法来做到这一点。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-08T08:11:37.013

试试这个：

```
var myList = new List<int>();
var max = myList.DefaultIfEmpty().Max();
Console.Write(max); 
```

LINQ 的`DefaultIfEmpty`- 方法检查序列是否为空。如果是这种情况，它将返回一个单例序列：一个仅包含一个元素的序列。这一元素具有序列类型的默认值。如果序列确实包含元素，则`DefaultIfEmpty`- 方法将简单地返回序列本身。

有关详细信息，请参阅 MSDN

*   关于[`Enumerable.DefaultIfEmpty<TSource>`方法](http://msdn.microsoft.com/en-us/library/bb360179.aspx)和
*   通用代码中的[`default`关键字](https://msdn.microsoft.com/en-us/library/xwth0h0d(v=vs.120).aspx)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-30T16:36:08.057

扩展名呢？

```
public static int MaxOrDefault<T>(this IEnumerable<T> enumeration, Func<T, int> selector)
{
    return enumeration.Any() ? enumeration.Max(selector) : default(int);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-02T18:22:23.010

如果使用`Enumerable.Aggregate`，则不需要对空列表情况进行任何特殊处理。试试这个：

```
List<int> myList = new List<int>();
var max = myList.Aggregate(default(int), (seed, i) => (i > seed ? i : seed));
Console.Write(max); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-03T17:11:41.987

稍微有点切线但可能仍然有用..另一种解决方案是将值转换为可为空的类型；

```
var myInt = new Int[0].Max(i=>(int?)i);//myInt == null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T10:27:34.673

作为一种扩展方法，@AlvaroRivoir 的解决方案可以通过进一步泛化添加另一个类型参数来扩展：

```
public static K MaxOrDefault<T, K>(this IEnumerable<T> enumeration, Func<T, K> selector) {
    return enumeration.Any() ? enumeration.Max(selector) : default;
} 
```

# android - MapView的源代码

> ID：13284934
> 
> 赞同：0
> 
> 时间：2012-11-08T08:08:18.433
> 
> 标签：android, google-maps, android-mapview

我在哪里可以从 Google Maps for Android 包中获取 MapView 类的源代码？我只设法找到了从 MockView 继承的东西，而这不是我想要的。我需要原始的 MapView。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:24:41.457

它很臭，但谷歌似乎还没有发布源代码——可能是因为他们不希望不受欢迎的用户向他们的地图服务发送垃圾邮件。SDK 平台中不提供 Google API；它们必须在 SDK 管理器中单独下载。我在使用语音识别 API 时遇到了类似的问题。我也找到[了这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/com/google/android/maps/MapView.java)源代码，但它似乎是`MockView`你所说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:16:30.863

我想~~我是在 gitorious 上找到的，请看[**这里**](http://gitorious.org/android-maps-api/android-maps-api/blobs/master/src/com/google/android/maps/MapView.java#line47)~~ 。

# sql-server - 如何防止访问锁定数据库

> ID：13284935
> 
> 赞同：1
> 
> 时间：2012-11-08T08:08:21.793
> 
> 标签：sql-server, ms-access

我有一个具有“连续表单”子表单的 Microsoft Access 应用程序。在我的应用程序中访问该表单时，我发现 SQL Server 有“很多”锁（超过 1000 个）。[通过从主数据库视图 sys.dm_trans_locks 中选择 1000 条记录找到]。

表单的数据源是一个名为 qryProspect 摘要的传递查询。反过来，它只有 SQL“EXEC qryProspectSummary”来调用返回所需数据的存储过程。

存储过程“qryProspectSummary”只是一个复杂的选择语句 - 有一些嵌套的选择和联合以及多个表的连接。从 SQL Server Management Studio 运行它会产生正确的结果，并且不会锁定数据库的任何部分。

我已将数据源记录集类型设置为“快照”。

我怎样才能防止 Access 取出所有这些锁 - 它有效地破坏了任何为应该只是数据快照而工作的多用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:42:13.520

您可能希望使用链接视图来返回此快照的结果。我发现在某些情况下，在处理来自 SQL Server 的大型数据集时，Access 使用视图要好得多。有什么方法可以使用**qryProspectSummary**作为视图？这不能保证有效，但这是我会尝试的一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:27:23.097

我昨天找到了问题的答案，但由于某种原因无法访问此站点。我没有创建一个可以访问存储过程的直通查询，而是将以下代码添加到表单的 ON LOAD 事件中。

```
Dim cmd As ADODB.Command, rst As ADODB.Recordset
Set cmd = New ADODB.Command
cmd.ActiveConnection = getStrConn
cmd.CommandText = "qryProspectSummary"
cmd.CommandType = adCmdStoredProc
Set rst = cmd.Execute()
Set Me.Form.Recordset = rst
Set cmd = Nothing 
```

getStrConn 是一个重试数据库连接字符串的函数（我有一个管理功能可以在启动时更改数据库，所以我不能硬编码它）。这解决了问题，当我打开表单时，我发现现在没有什么异常被锁定。

它确实有一个缺点，我使用的是 Form.Requery，但这不会重新运行查询 - 我必须重新执行上面的代码。但这是一个很小的代价

# java - 在 JFrame 中执行 JAR 文件

> ID：13284938
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:08:33.307
> 
> 标签：java, eclipse, swing, jar

好吧，我有一个项目的 .jar 文件，我想在 Java 选项卡式视图的选项卡中使用它。我正在使用 Eclipse IDE。有什么办法吗？还是我必须将项目中的所有Java文件一一导入？导入所有 Java 文件会降低我的应用程序的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:19:33.933

您可以向 . 添加任何`Component`内容[`JTabbedPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)，但该`.jar`文件必须提供一种创建该`Component`. 在 jar 的公共 API 中查找执行此操作的构造函数或工厂方法。如果没有公共 API，您可以尝试[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)，但不能保证它会起作用。

# python - 通过 id 获取结果失败

> ID：13284941
> 
> 赞同：1
> 
> 时间：2012-11-08T08:08:41.780
> 
> 标签：python, celery

我正在尝试在基于 Flask 的网络应用程序中使用 celery 并监视它的状态。我的想法是将任务的 id 存储在会话中，并将其用于状态轮询。

这是我的tasks.py的内容

```
from traceback import format_exc
import settings
from celery import Celery, current_task
from celery.utils.log import get_task_logger
from celery.result import AsyncResult

from nimble_auth import make_nimble_req

logger = get_task_logger(__name__)

celery = Celery('tasks')
celery.config_from_object(settings)

@celery.task
def make_work(param1, param2):
    try:
        # work here
        current_task.update_state(state='PROGRESS', meta={'current': page, 'total': total_pages})
    except StandardError:
        logger.error(format_exc())

def get_asynctask(task_id):
    return AsyncResult(task_id) 
```

除了主应用程序的文件 web.py

```
@app.route('/task_state/<task_id>')
def task_state(task_id):
    return get_asynctask(task_id).state # from task.py

@app.route('/reset_task')
def reset_task():
    del session['celery_task_id']
    return redirect(url_for('index'))

@app.route('/run')
def run_task():
    task = make_work.delay(1, 2)
    session['celery_task_id'] = task.task_id
    flash('Task submitted OK!')

    return redirect(url_for('index')) 
```

设置文件：

```
BROKER_URL = 'mongodb://localhost:27017/dramba'
CELERY_RESULT_BACKEND = "mongodb"
CELERY_RESULT_DBURI = 'mongodb://localhost:27017/dramba' 
```

但是当我试图获取任务的状态时，我得到了 NotImplementedError: No result backend configures。

完整的堆栈跟踪：

```
Traceback (most recent call last):
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/cleg/Projects/GitHub/Dramba/dramba.py", line 13, in task_state
    return get_asynctask(task_id).state
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/celery/result.py", line 284, in state
    return self.backend.get_status(self.id)
  File "/Users/cleg/Projects/Venvs/Dramba/lib/python2.7/site-packages/celery/backends/base.py", line 490, in _is_disabled
    raise NotImplementedError('No result backend configured.  '
NotImplementedError: No result backend configured.  Please see the documentation for more information. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:33:38.477

您是否设置了 CELERY_MONGODB_BACKEND_SETTINGS 字典？此页面向您展示了一个示例：

[http://docs.celeryproject.org/en/latest/configuration.html#mongodb-backend-settings](http://docs.celeryproject.org/en/latest/configuration.html#mongodb-backend-settings)

```
CELERY_RESULT_BACKEND = "mongodb"
CELERY_MONGODB_BACKEND_SETTINGS = {
*    "host": "192.168.1.100",
*    "port": 30000,
*    "database": "mydb",
*    "taskmeta_collection": "my_taskmeta_collection",
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T10:09:37.137

你可以这样做：

```
@app.route('/task_state/<task_id>')
def task_state(task_id):
    return celery.result.AsyncResult(task_id).state # from task.py 
```

您需要使用 Celery Надо использовать уже существующий экземпляр Celery 的当前实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:47:18.940

似乎 Flask 本身无法从您的文件中正确获取配置。尝试明确指定它，看看它是否有帮助：[http ://docs.celeryproject.org/en/latest/userguide/application.html#example-2-using-a-configuration-module](http://docs.celeryproject.org/en/latest/userguide/application.html#example-2-using-a-configuration-module)

另外，为了确定，Flask 进程的标准输出上是否有任何消息？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-26T15:55:05.550

尝试类似...

```
app = Celery('anytaskname',backend="celery.backends.amqp:AMQPBackend") 
```

它在 Windows 上使用 Django 1.8 和 Celery 3.1.25 以及 RabbitMQ 代理 [文档信息](http://docs.celeryproject.org/en/3.1/_modules/celery/backends.html)

# sass - 如何将类似代码转换为 compass sass 函数中的函数？

> ID：13284945
> 
> 赞同：1
> 
> 时间：2012-11-08T08:09:08.770
> 
> 标签：sass

我想在我的 scss 文件中添加一些常见的变量，例如 mgb10 for margin-bottom:10px; pdl20 for padding-left:20px;
我的方法很愚蠢。如何使用 sass 函数改进我的代码。

![在此处输入图像描述](../Images/8c443777ae9f737671eb15203aa608a3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:17:22.167

bookcasey 对 OP 的问题给出了很好的回答，但我不相信提出了正确的问题。`@extend`这是您使用示例代码绘制的场景中的问题，以及为什么它可能不是正确的选择。

让我们从这里的这些小家伙开始，它们看起来像我们可能经常使用的那些：

```
%mgt10 { margin-top: 10px }
%mgb10 { margin-bottom: 10px }
%mgl10 { margin-left: 10px }
%mgr10 { margin-right: 10px } 
```

我们开始编码并最终大量使用它们：

```
.body { @extend %mgt10; @extend %mgb10; @extend %mgr10; @extend %mgl10; font: 12px/1.4 sans-serif }

.error { @extend %mgt10; color: red; padding: 10px; }

.cool-button { @extend %mgt10; border: 1px solid }

hr.awesome { @extend %mgt10; color: blue } 
```

这是我们的短 Sass 文件将生成的内容（316 字节）：

```
.body, .error, .cool-button, hr.awesome {
  margin-top: 10px; }

.body {
  margin-bottom: 10px; }

.body {
  margin-left: 10px; }

.body {
  margin-right: 10px; }

.body {
  font: 12px/1.4 sans-serif; }

.error {
  color: red;
  padding: 10px; }

.cool-button {
  border: 1px solid; }

hr.awesome {
  color: blue; } 
```

你不会真的那样写你的CSS，对吗？ `@extend`在这种情况下对您不利，因为它生成的选择器比您实际需要的要多得多（而且您扩展任何给定类的选择器越多并且所扩展的所述类中的行数越少，它只会变得更糟——想象一下 30 个选择器扩展`%mgt10`，50 怎么样？）。您将 DRY 发挥到了极致，因此，您放弃了 Sass 方面的可读性和 CSS 方面的简洁性。

让我们尝试另一条路线：

```
$default-gutter-size: 5px;

@function gutter($width, $size: $default-gutter-size) {
    @return $width * $size;
}

.body { margin: gutter(2); font: 12px/1.4 sans-serif }

.error { margin-top: gutter(2); color: red; padding: gutter(2); }

.cool-button { margin-top: gutter(2); border: 1px solid }

hr.awesome { margin-top: gutter(2); color: blue } 
```

我们得到了基本相同的 CSS，但没有所有额外的选择器，我们仍然可以使用速记（作为额外的奖励，如果我们真的想要，我们可以在不是边距的东西上使用我们的函数）（228 字节） ：

```
.body {
  margin: 10px;
  font: 12px/1.4 sans-serif; }

.error {
  margin-top: 10px;
  color: red;
  padding: 10px; }

.cool-button {
  margin-top: 10px;
  border: 1px solid; }

hr.awesome {
  margin-top: 10px;
  color: blue; } 
```

不要误会，`@extend`这很好，但它最好用于扩展具有相当数量属性的类，而不仅仅是 1 或 2 个。使用 CSS 预处理器的一部分是知道何时使用哪个特性来获得最佳结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T16:04:49.330

这是一个使用`@for`指令生成所有占位符选择器的 Sass mixin（您可以将其更改为 Scss）：

```
=shorthander($property: margin, $shorthand: mg)
  @for $i from 0 through 4
    $multiple: $i*5
    %#{$shorthand}#{$multiple}
      #{$property}: $multiple*1px

+shorthander()
+shorthander(margin-top, mgt)
+shorthander(margin-right, mgr)
+shorthander(margin-bottom, mgb)
+shorthander(margin-left, mgl)

div
  @extend %mgt20 
```

[演示](http://codepen.io/anon/pen/dpcBl)

# ios - 以日期为谓词的 NSFetchedResultsController

> ID：13284947
> 
> 赞同：0
> 
> 时间：2012-11-08T08:09:16.067
> 
> 标签：ios, core-data, nsfetchedresultscontroller

设想：

我有一个费用跟踪 iOS 应用程序，我将费用从费用详细视图控制器存储到表视图（带有获取的结果控制器）中，该表视图显示费用列表以及类别、金额和日期。我的实体“Money”中确实有一个日期属性，它是支出或收入的父实体。

问题：

我想要的是基本上对给定一周、一个月或一年的费用进行分类，并将其显示为部分标题标题，例如：（2012 年 10 月 1 日至 10 月 7 日），并据此显示费用金额和相关内容特定的一周。该视图中提供了两个按钮，如果我按下右侧按钮，它将一周增加一周（2012 年 10 月 1 日至 10 月 7 日现在显示 2012 年 10 月 8 日至 10 月 15 日），同样，左侧按钮将减少一周一个星期。

我的问题是我将如何实现上述目标。我写了一些伪代码 - 任何帮助将不胜感激。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date == %@)", dateToFilterFor];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Expense" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];
[fetchRequest setPredicate:predicate];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"SomeCacheName"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController; 
```

为了按一周过滤它，谓词应该是什么？另外，我想在获取的结果控制器中有一个部分名称，但它会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:41:45.967

假设用户选择了 10 月 1 日和 10 月 7 日，

```
NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setDateFormat:@"MM/dd/yyyy"];

NSString *str1 = @"10/01/2012";
NSDate *date1 = [formatter dateFromString:str1];

NSString *str2 = @"10/07/2012";
NSDate *date2 = [formatter dateFromString:str2]; 
```

将其用作，

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", date1, date2];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Expense" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];
[fetchRequest setPredicate:predicate];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"SomeCacheName"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController; 
```

为了添加日期，

```
int addDaysCount = 7; //try with negative values for fetching previous week.

NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
[dateComponents setDay:addDaysCount];

NSDate *newDate1 = [[NSCalendar currentCalendar] 
                              dateByAddingComponents:dateComponents 
                                              toDate:date1 options:0];
NSDate *newDate2 = [[NSCalendar currentCalendar] 
                              dateByAddingComponents:dateComponents 
                                              toDate:date2 options:0]; 
```

使用上述谓词`newDate1`和`newDate2`来获取与这些日期相对应的新费用。

如果要获取特定一周的星期日，请使用`NSDateComponents`.

```
NSDateComponents *components = [NSDateComponents new]; 
components.weekday = 1;//represents sunday 
components.year = 2012; 
components.weekOfMonth = 1;
components.month = 10; //etc..

NSDate *date1 = [[NSCalendar currentCalendar] dateFromComponents: components]; 
```

有关[其属性的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)[更多详细信息，请检查`NSDateComponents`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)

# delphi - Delphi 2007 和 Indy 10 使用 https 和 SSL

> ID：13284948
> 
> 赞同：1
> 
> 时间：2012-11-08T08:09:15.753
> 
> 标签：delphi, indy

我已经删除了一个 TIdHTTP 和一个 TIdSSLIOHandlerSocketOpenSSL，将 IdHTTP 的 IOHandler 设置为 SSL 处理程序，将 TIdSSLIOHandlerSocketOpenSSL 的模式设置为 sllmClient。然后在下面添加了按钮单击事件。我第一次从 WhichFailedToLoad 收到此错误。

![在此处输入图像描述](../Images/c73941d9bef9ce360d7b3e65f5c9290c.png)

显示，我第二次按下它的按钮。ssl dll 位于 .exe 目录中。

该服务在浏览器中运行良好，并且正在生产中。为什么第一次就不行？

```
procedure TForm32.Button1Click(Sender: TObject);
var
  output : TMemoryStream;
begin
    output:=TMemoryStream.Create;
//    IdOpenSSLSetLibPath(
  try
    IdHTTP1.get('https://localhost:444/Folder/service.svc',output);
    output.position := 0;
    memo1.lines.LoadFromStream(output);
  except
    on exception do
    ShowMessage(WhichFailedToLoad());
  end;
end; 
```

蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:11:21.457

您必须使用一个非常旧且过时的 Indy 10 版本 - 该消息框中报告的大多数功能都带有`_Indy`后缀。

Indy 9 和更早版本以及早期的 Indy 10 版本需要定制的 OpenSSL DLL，这些 DLL 添加了 Indy 特定的函数来访问尚未在公共 OpenSSL API 中公开的内部 OpenSSL 数据。一旦这些数据在后来的 API 版本中公开，Indy 10 就被更新为不再需要定制构建的 DLL。它现在按原样使用标准化的 OpenSSL DLL。

因此，您要么需要追踪旧的定制 Indy OpenSSL DLL，要么需要升级到最新的 Indy 10 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:59:19.233

您应该更新到[最新版本的 Indy](http://indy.fulgan.com/ZIP/)和[ssl dll](http://blog.digivendo.com/2012/05/openssl-0-9-8x-1-0-0j-1-0-1c/)，这应该完全摆脱异常。

# java - 我如何在while循环中使用java扫描仪

> ID：13284949
> 
> 赞同：2
> 
> 时间：2012-11-08T08:09:49.577
> 
> 标签：java

这是我到目前为止所拥有的：

```
int question = sc.nextInt(); 

while (question!=1){

    System.out.println("Enter The Correct Number ! ");

    int question = sc.nextInt(); // This is wrong.I mean when user enters wrong number the program should ask user one more time again and again until user enters correct number.
    // Its error is : duplicate local variable

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:22:16.237

据我了解，您的要求是一次又一次地提示用户，直到您匹配正确的号码。如果是这种情况，它将如下所示：只要用户输入，循环就会迭代`1`。

```
Scanner sc = new Scanner(System.in);        
System.out.println("Enter The Correct Number!");
int question = sc.nextInt(); 

while (question != 1) {
    System.out.println("please try again!");
    question = sc.nextInt(); 
}
System.out.println("Success"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:11:46.513

您正在尝试*重新声明*循环内的变量。您只想给*现有*变量一个不同的值：

```
while (question != 1) {
    System.out.println("Enter The Correct Number ! ");
    question = sc.nextInt();
} 
```

这只是一个*赋值*而不是一个*声明*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T08:11:57.483

您在循环外声明 int question，然后在循环内再次声明。

删除循环内的 int 声明。

在 Java 中，变量的范围取决于它在哪个子句中声明。如果您在 try 或 while 或许多其他子句中声明变量，则该变量是该子句的本地变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T08:11:46.917

重用`question`变量而不是重新声明它。

```
int question = sc.nextInt(); 
while (question != 1) {
    System.out.println("Enter The Correct Number ! ");
    question = sc.nextInt(); // ask again
} 
```

# sql - 根据连接中的值将连接结果添加为新列

> ID：13284952
> 
> 赞同：1
> 
> 时间：2012-11-08T08:10:14.307
> 
> 标签：sql, sql-server, database, pivot

我从来没有做过这样的事情，我试图在谷歌上找到它但没有结果。

我有 3 个如下所示的表：

**订单：**

```
OdredID (int) PK,
UserID (int) FK,
OdredDate (datetime) 
```

**成分：**

```
ComponentID (int) PK,
Name (nvarchar(50)),
Type (nvarchar(max)) 
```

**订单组件：**

```
OrderComponentID (int) PK,
OrderID (int) FK,
ComponentID (int) FK,
Value (nvarchar(max)) 
```

假设一个订单有 3 个具有名称的组件：`[CPU, Motherboard, Memory]`和值`[1GHz, AsusP5, 2GB Kingston DDR3]`

我需要一个结果有这样的列：

```
OrderID  UserID   Date          CPU    Motherboard   Memory
   1        1     2012-05-21    1GHz   AsusP5        2GB Kingston DDR3 
```

基本上我需要每个连接行作为新列，名称取自`Name`连接表的列，值取自`Value`列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:14:23.767

尝试这个：

```
SELECT
  o.orderid,
  o.userid,
  MAX(CASE WHEN c.Name = 'CPU' THEN oc.Value END) AS 'CPU',
  MAX(CASE WHEN c.Name = 'Motherboard' THEN oc.Value END) AS 'Motherboard',
  MAX(CASE WHEN c.Name = 'Memory' THEN oc.Value END) AS 'Memory'
FROM orders o
INNER JOIN ordercomponents oc ON c.orderid = oc.orderId
INNER JOIN Components c ON oc.componentid = c.componentid
GROUP BY o.orderid, o.userid 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/65cf1/3)

**请注意：**这是执行此操作的标准 SQL 方式。但是您可以使用 SQL Server`PIVOT`表运算符来执行相同的操作，如下所示：

```
SELECT  *
FROM
(
   SELECT o.orderid, o.userid, c.Name 'Name', oc.value 'value'
   FROM orders o
   INNER JOIN ordercomponent oc ON o.orderid = oc.orderId
   INNER JOIN Components c ON oc.componentid = c.componentid
 ) t 
PIVOT
(
  MAX(value)
  FOR Name IN ([CPU], [Motherboard], [Memory])
) p; 
```

但这适用于一组预定义的值，例如`[CPU], [Motherboard], [Memory]`.

对于未知数量的值，您必须像这样动态地执行此操作：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.name) 
                    from Components c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT orderid, userid  ' + @cols + ' from 
             (
                 select o.orderid, o.userid, c.Name Name, oc.value value
                 FROM orders o
                 INNER JOIN ordercomponent oc ON o.orderid = oc.orderId
                 INNER JOIN Components c ON oc.componentid = c.componentid
            ) x
            pivot 
            (
                max(value)
                for name in (' + @cols + ')
            ) p '

execute(@query); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/65cf1/7)

# java - 接缝组件的默认范围

> ID：13284957
> 
> 赞同：3
> 
> 时间：2012-11-08T08:11:06.280
> 
> 标签：java, seam

如果我们没有在 seam 组件中声明作用域类型，那么 this 的作用域类型是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T07:43:22.253

对此没有确切的答案，这是您应该很好理解的基本点。
阅读本文以获取更多信息：[接缝上下文](http://docs.jboss.org/seam/snapshot/en-US/html/concepts.html#d0e3564)

概括：

1.  如果您的组件是**SFSB**（有状态会话 Bean），则默认范围将是“**对话**”sope。但是，如果您没有采取适当的措施传播它，则此默认转换通常仅存在于请求周期内。因此，您可能会将其视为事件范围。（*您应该阅读更多*）

2.  如果组件是**SLSB**，则默认范围将为“**无状态**”。
3.  如果您的组件是**POJO**，则默认范围将是“**事件**”。

# linux - CUDA 5.0：cutil.h 的替代品？

> ID：13284961
> 
> 赞同：2
> 
> 时间：2012-11-08T08:11:26.007
> 
> 标签：linux, cuda

我想用新的 CUDA 5.0 编译一个旧项目（基于 CUDA 2.3）不幸的是，它使用了旧的 cutil.h 头文件，该头文件在 CUDA 5.0 中不再可用。

这个标题有替代品吗？

特别是缺少图像 im- 和 export 函数（PPM、PGM），例如 cutSavePGMf()...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:56:44.087

是的，新的 SDK 示例中有一个替换项。之前的问题中已经介绍过： [CUDA5 示例：有人将一些 cutil 定义翻译成 CUDA5 吗？](https://stackoverflow.com/questions/12474191/cuda5-examples-has-anyone-translated-some-cutil-definitions-to-cuda5)

# objective-c - XCode 和 Objective-C 警告

> ID：13284962
> 
> 赞同：0
> 
> 时间：2012-11-08T08:11:31.007
> 
> 标签：objective-c, warnings

有人可以告诉我这是什么意思：我在应用程序启动时在控制台中得到了这个。

以下列表中的至少一个约束可能是您不想要的。

试试这个：（1）查看每个约束并尝试找出您不期望的；(2) 找到添加了一个或多个不需要的约束的代码并修复它。（注意：如果您看到`NSAutoresizingMaskLayoutConstraints`不明白的地方，请参阅该`UIView`属性的文档`translatesAutoresizingMaskIntoConstraints`）

```
(
    "<NSLayoutConstraint:0x769a0c0 V:[UIImageView:0x769a030(1150)]>",
    "<NSLayoutConstraint:0x769cd40 V:[UIImageView:0x769a030]-(-550)-|   (Names: '|':UIScrollView:0x7699cc0 )>",
    "<NSLayoutConstraint:0x769ccc0 V:|-(0)-[UIImageView:0x769a030]   (Names: '|':UIScrollView:0x7699cc0 )>"
) 
```

# wpf - 表单按钮不起作用

> ID：13284970
> 
> 赞同：2
> 
> 时间：2012-11-08T08:11:47.840
> 
> 标签：wpf, vb.net, events, button, clicking

这是我的第一个问题，所以我会尽力说清楚！

在 WinForms 工作了几年后，我才刚刚开始使用 WPF，而且对于我的一生，我无法触发按钮的事件。我目前在项目中拥有的只是一个无边框窗口，带有一个用于标题栏的自定义矩形。XAML 代码是：

```
 <Window
 x:Class="MainWindow"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:M="clr-namespace:Metro_Test"
 Title="MainWindow"
 Height="720"
 Width="1280"
 IsTabStop="False"
 AllowsTransparency="True"
 Background="Transparent"
 BorderBrush="#FF3F3F3F"
 SnapsToDevicePixels="True"
 TextOptions.TextFormattingMode="Display"
 TextOptions.TextRenderingMode="ClearType"
 WindowStyle="None"
 WindowStartupLocation="CenterScreen" AllowDrop="True" ResizeMode="CanResizeWithGrip" PreviewMouseLeftButtonDown="HandleHeaderPreviewMouseDown">

<Window.Resources>
    <Style x:Key="NoChromeButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                            <Setter Property="Opacity" TargetName="Chrome" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<Border
    x:Name="m_edgeBorder"
    Margin="14"
    Background="White">

    <Border.Effect>
        <DropShadowEffect
        Opacity="0.999"
        BlurRadius="14"
        ShadowDepth="0"/>
    </Border.Effect>

    <Grid x:Name="MainGrid">

        <Rectangle
            Height="28"
            Fill="Blue"
            VerticalAlignment="Top"
            AllowDrop="False"
            MouseLeftButtonDown="HandleHeaderPreviewMouseDown"/>

        <Button x:Name="CloseButton" Style="{DynamicResource NoChromeButton}" Click="HandleCloseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,2,0" VerticalAlignment="Top" Width="24" Height="24">
            <Image Source="Images\Gray\Close.png"></Image>
        </Button>

        <Button x:Name="MaximiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMaximiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,28,0" VerticalAlignment="Top" Width="24" Height="24">
            <Image Source="Images\Gray\Add.png"></Image>
        </Button>

        <Button x:Name="MinimiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMinimiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,54,0" VerticalAlignment="Top" Width="24" Height="24">
            <Image Source="Images\Gray\Minus.png"></Image>
        </Button>

        <Button x:Name="TestBtn" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="500,2,80,0" Width="24" Height="24">
            <Image Source="Images\Gray\Close.png"></Image>
        </Button>
    </Grid>
</Border>
</Window> 
```

“代码隐藏”代码是：

```
Class MainWindow

Public Sub HandleHeaderPreviewMouseDown(sender As Object, e As MouseButtonEventArgs)
    If e.LeftButton = MouseButtonState.Pressed Then
        Me.DragMove()
    End If
End Sub
Private Sub HandleCloseClick(sender As Object, e As MouseEventArgs)
    Me.Close()
End Sub

Private Sub HandleMaximiseClick(sender As Object, e As MouseEventArgs)
    If Me.WindowState = Windows.WindowState.Maximized Then
        Me.WindowState = Windows.WindowState.Normal
    ElseIf Me.WindowState = Windows.WindowState.Normal Then
        Me.WindowState = Windows.WindowState.Maximized
    End If
End Sub

Private Sub HandleMinimiseClick(sender As Object, e As MouseEventArgs)
    Me.WindowState = Windows.WindowState.Minimized
End Sub

Private Sub HandleMouseLeave(sender As Button, e As MouseEventArgs)

End Sub

Private Sub HandleMouseEnter(sender As Button, e As MouseEventArgs)

End Sub
End Class 
```

如您所见，我仍然没有在 MouseLeave 和 MouseEnter 事件中放置任何命令，因为出现了这个问题。

到目前为止，在这个项目中，我还没有一次能够让我的任何按钮工作。我尝试更改窗口、边框和网格的属性。我还尝试从 Rectangle 和 Window 中删除 PreviewMouseLeftButtonDown 事件，但无济于事。

非常感谢您对这个问题的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:41:42.937

好吧，您应该考虑史蒂夫发布的所有内容，如果您不知道确切的签名，请尽量不要手动创建事件处理程序。但这里更大的问题是您`PreviewMouseLeftButtonDown="HandleHeaderPreviewMouseDown"`为整个窗口和您调用的事件处理程序处理鼠标预览事件 () `Me.DragMove()`- 这会将事件标记为已处理，因此不会再为子控件调用鼠标事件处理程序。[首先在这里](http://msdn.microsoft.com/en-us/library/ms742806.aspx)阅读有关路由事件的内容。你应该调用`Me.DragMove()`，只有当鼠标被按下和移动时，你才能在网上找到大量的例子。

# c# - 如何在 Wpf-app 中使用 9-patch 图像

> ID：13284976
> 
> 赞同：3
> 
> 时间：2012-11-08T08:12:14.583
> 
> 标签：c#, android, wpf, nine-patch

我需要在 WPF-app 中创建和使用[9-patch 图像](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)（*.9.png，就像在 android 中一样）！
只有一个问题——如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T03:55:52.740

我知道，WPF 不支持开箱即用的 9 补丁格式，因此您正在查看自定义控件-也就是说，我想这将是组合在一起的更“合理”的控件之一: 真的你会看设置...嗯，简单来说，9 个不同的图像，每个设置 Stretch to extents，都包裹在一个...哦，让我们为它选择一个 DockPanel。控件模板可能类似于：

（警告：在该死的手机上稍微醉酒和随意处理这个，所以可能无法编译......事实上，现在我想到它，网格可能是一个更明智的选择（3x3 行列，每个单元格一张图片），但我会坚持我原来的建议！）

```
<DockPanel>
    <DockPanel DockPanel.Dock="Top">
        <Image DockPanel.Dock="Left" Source="{Binding LeftTopImage}"/>
        <Image DockPanel.Dock="Right" Source="{Binding RightTopImage}"/>
        <Image Source="{Binding CenterTopImage}"/>
    </DockPanel>
    <DockPanel DockPanel.Dock="Left">
        <Image Source="{Binding CenterLeftImage}"/>
    </DockPanel>
    <DockPanel DockPanel.Dock="Right">
        <Image Source="{Binding CenterRightImage}"/>
    </DockPanel>
    <DockPanel DockPanel.Dock="Bottom">
        <Image DockPanel.Dock="Left" Source="{Binding LeftBottomImage}"/>
        <Image DockPanel.Dock="Right" Source="{Binding RightBottomImage}"/>
        <Image Source="{Binding CenterBottomImage}"/>
    </DockPanel>
    <DockPanel>
        <Image Source="{Binding CenterImage}"/>
    </DockPanel>
</DockPanel> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-22T06:46:46.287

这是一个开箱即用的内容控件，使用单个图像制作 9-patch 背景。
好好享受！

```
//Code Auther: Mr. Squirrel.Downy (Flithor)
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace Flithor_ReusableCodes
{
    public class NinePatchPanel : ContentControl
    {
        ImageSource[] patchs;

        [Category("Background")]
        [Description("Set nine patch background image")]
        public ImageSource BackgroundImage
        {
            get { return (ImageSource)GetValue(BackgroundImageProperty); }
            set { SetValue(BackgroundImageProperty, value); }
        }
        public static readonly DependencyProperty BackgroundImageProperty =
            DependencyProperty.Register("BackgroundImage", typeof(ImageSource), typeof(NinePatchPanel), new PropertyMetadata(null, SetImg));

        [Category("Background")]
        [Description("Set the center split area")]
        public Int32Rect CenterArea
        {
            get { return (Int32Rect)GetValue(CenterAreaProperty); }
            set { SetValue(CenterAreaProperty, value); }
        }
        public static readonly DependencyProperty CenterAreaProperty =
            DependencyProperty.Register("CenterArea", typeof(Int32Rect), typeof(NinePatchPanel), new PropertyMetadata(Int32Rect.Empty, SetArea));

        protected override void OnRender(DrawingContext dc)
        {
            if (patchs != null)
            {
                double x1 = patchs[0].Width, x2 = Math.Max(ActualWidth - patchs[2].Width, 0);
                double y1 = patchs[0].Height, y2 = Math.Max(ActualHeight - patchs[6].Height, 0);
                double w1 = patchs[0].Width, w2 = Math.Max(x2 - x1, 0), w3 = patchs[2].Width;
                double h1 = patchs[0].Height, h2 = Math.Max(y2 - y1, 0), h3 = patchs[6].Height;
                var rects = new[]
                {
                new Rect(0, 0, w1, h1),
                new Rect(x1, 0, w2, h1),
                new Rect(x2, 0, w3, h1),
                new Rect(0, y1, w1, h2),
                new Rect(x1, y1, w2, h2),
                new Rect(x2, y1, w3, h2),
                new Rect(0, y2, w1, h3),
                new Rect(x1, y2, w2, h3),
                new Rect(x2, y2, w3, h3)
            };
                for (int i = 0; i < 9; i++)
                {
                    dc.DrawImage(patchs[i], rects[i]);
                }
            }
            base.OnRender(dc);
        }

        private static void SetArea(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var np = d as NinePatchPanel;
            if (np == null) return;
            var bm = np.BackgroundImage as BitmapSource;
            if (bm != null) SetPatchs(np, bm);
        }
        private static void SetImg(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var np = d as NinePatchPanel;
            if (np == null) return;
            var bm = np.BackgroundImage as BitmapSource;
            if (np.CenterArea == Int32Rect.Empty)
            {
                var w1_3 = bm.PixelWidth / 3;
                var h1_3 = bm.PixelHeight / 3;
                np.CenterArea = new Int32Rect(w1_3, h1_3, w1_3, h1_3);
            }
            else
            {
                SetPatchs(np, bm);
            }
        }

        private static void SetPatchs(NinePatchPanel np, BitmapSource bm)
        {
            int x1 = np.CenterArea.X, x2 = np.CenterArea.X + np.CenterArea.Width;
            int y1 = np.CenterArea.Y, y2 = np.CenterArea.Y + np.CenterArea.Height;
            int w1 = np.CenterArea.X, w2 = np.CenterArea.Width, w3 = bm.PixelWidth - np.CenterArea.X - np.CenterArea.Width;
            int h1 = np.CenterArea.Y, h2 = np.CenterArea.Height, h3 = bm.PixelHeight - np.CenterArea.Y - np.CenterArea.Height;
            np.patchs = new[] {
            new CroppedBitmap(bm, new Int32Rect(0, 0, w1, h1)),
            new CroppedBitmap(bm, new Int32Rect(x1, 0, w2, h1)),
            new CroppedBitmap(bm, new Int32Rect(x2, 0, w3, h1)),
            new CroppedBitmap(bm, new Int32Rect(0, y1, w1, h2)),
            new CroppedBitmap(bm, new Int32Rect(x1, y1, w2, h2)),
            new CroppedBitmap(bm, new Int32Rect(x2, y1, w3, h2)),
            new CroppedBitmap(bm, new Int32Rect(0, y2, w1, h3)),
            new CroppedBitmap(bm, new Int32Rect(x1, y2, w2, h3)),
            new CroppedBitmap(bm, new Int32Rect(x2, y2, w3, h3))
        };
        }
    }
} 
```

* * *

### 预览

背景图像： 中心区域：10,10,10,10
[![在此处输入图像描述](../Images/e1c1c5cfb7120ed1225435dce2a4b9cf.png)](https://i.stack.imgur.com/J15q6.png)

结果：
[![在此处输入图像描述](../Images/6e9ae0767e6ed954b11c590b667e5b6a.png)](https://i.stack.imgur.com/7JQJT.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T14:12:11.473

我有类似的要求，最终来到这里和其他网站（特别是[在这里](https://wldevries.wordpress.com/2014/06/08/image-ninegrid-for-wpf/)，因为我的回答受他的[代码](https://gist.github.com/wldevries/14c6b07edf40459579cf)影响很大）

我创建了一个新的 UserControl（在 Visual Studio 上，右键单击项目并选择 [Add new Element ...] -> WPF -> UserControl）

*（注意：将 {YOUR_PROJECT_NAMESPACE} 替换为您的个人项目命名空间）*

这是我的新 UserControl 的 XAML 代码：

```
<UserControl x:Class="{YOUR_PROJECT_NAMESPACE}.NineSliceImage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:Simple_DNS_Changer"
         mc:Ignorable="d" 
         d:DesignHeight="450" d:DesignWidth="800">

<Grid>        
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="{Binding ColRowSize.Left}"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="{Binding ColRowSize.Right}"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="{Binding ColRowSize.Top}"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="{Binding ColRowSize.Bottom}"/>
    </Grid.RowDefinitions>
    <!--
    ­­▓░░
    ░░░
    ░░░
    -->
    <Rectangle SnapsToDevicePixels="True">
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[0]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░▓░
    ░░░
    ░░░        
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Column="1"><!--HorizontalAlignment="Stretch"-->
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[1]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░▓
    ░░░
    ░░░        
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Column="2">
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[2]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ▓░░
    ░░░
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="1"><!--VerticalAlignment="Stretch"-->
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[3]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ░▓░
    ░░░
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="1" Grid.Column="1"><!--HorizontalAlignment="Stretch" VerticalAlignment="Stretch"-->
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[4]}" Stretch="Uniform"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ░░▓
    ░░░
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="1" Grid.Column="2"><!--VerticalAlignment="Stretch"-->
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[5]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ░░░
    ▓░░
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="2">
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[6]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ░░░
    ░▓░
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="2" Grid.Column="1"><!--HorizontalAlignment="Stretch"-->
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[7]}"/>
        </Rectangle.Fill>
    </Rectangle>
    <!--
    ­­░░░
    ░░░
    ░░▓
    -->
    <Rectangle SnapsToDevicePixels="True" Grid.Row="2" Grid.Column="2">
        <Rectangle.Fill>
            <ImageBrush ImageSource="{Binding ImgSource}" Viewbox="{Binding ViewBoxes[8]}"/>
        </Rectangle.Fill>
    </Rectangle>
</Grid></UserControl> 
```

然后后面的代码：

```
namespace {YOUR_PROJECT_NAMESPACE}
{
/// <summary>
/// Logique d'interaction pour NineSliceImage.xaml
/// </summary>
public partial class NineSliceImage : UserControl
{
    [Description("The source of the image to be '9 sliced'")]
    public ImageSource ImgSource
    {
        get { return (ImageSource)GetValue(ImgSourceProperty); }
        set { SetValue(ImgSourceProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Source.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ImgSourceProperty =
        DependencyProperty.Register("ImgSource", typeof(ImageSource), typeof(NineSliceImage), new PropertyMetadata(null));

    [Description("Where to cut the image to get the resulting 9 slices (Defined as pixel from 'Left,Top,Right,Bottom' edge of the image)")]
    public Thickness Slice
    {
        get { return (Thickness)GetValue(SliceProperty); }
        set { SetValue(SliceProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Slice.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SliceProperty =
        DependencyProperty.Register("Slice", typeof(Thickness), typeof(NineSliceImage), new PropertyMetadata(new Thickness()));

    [Description("Define the size of each new sliced area to be displayed as 'Left,Top,Right,Bottom' for {Left} width, {Right} width, {Top} height and {Bottom} height.\n By default this property is equal to Slice if not defined")]
    public Thickness AreasSize
    {
        get { return (Thickness)GetValue(AreasSizeProperty); }
        set { SetValue(AreasSizeProperty, value); }
    }

    // Using a DependencyProperty as the backing store for GridSize.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty AreasSizeProperty =
        DependencyProperty.Register("AreasSize", typeof(Thickness), typeof(NineSliceImage), new PropertyMetadata(new Thickness()));

    private Rect[] _viewBoxes;

    public Rect[] ViewBoxes {
        get
        {
            if (_viewBoxes == null || _viewBoxes.Length < 9 || _viewBoxes.Any(x => x==null))
                _viewBoxes = GetViewBoxes();
            return _viewBoxes;
        }
        set => _viewBoxes = value; }

    private Thickness _colRowSize;

    public Thickness ColRowSize {
        get
        {
            if (_colRowSize == null || _colRowSize == new Thickness())
            {
                double left = AreasSize.Left, right = AreasSize.Right, top = AreasSize.Top, bottom = AreasSize.Bottom;
                double parentWidth = 1, parentHeight = 1;
                var parent = HelperUtils.FindClosestParent<FrameworkElement>(this, x => x is FrameworkElement);

                // if left / right size are relative (proportional)
                if (AreasSize.Left + AreasSize.Right <= 1 && parent != null)                        
                    parentWidth = parent.ActualWidth;

                // if top / bottom size are relative (proportional)
                if (AreasSize.Top + AreasSize.Bottom <= 1 && parent != null)
                    parentHeight = parent.ActualHeight;                    

                _colRowSize = new Thickness(left*parentWidth, top*parentHeight, right*parentWidth, bottom*parentHeight);
            }
            return _colRowSize;
        }
        set => _colRowSize = value; }

    private Rect[] GetViewBoxes()
    {
        var res = new Rect[9];
        var slice = Slice;
        double left = Slice.Left, right = Slice.Right, top = Slice.Top, bottom = Slice.Bottom;

        if (slice.Left + slice.Right > 1)
        {
            left = slice.Left / this.ImgSource.Width;
            if (left > 1) left = 1;
            right = slice.Right / this.ImgSource.Width;
            if (right > 1) right = 1;
        }

        if (slice.Top + slice.Bottom > 1)
        {
            top = slice.Top / this.ImgSource.Height;
            if (top > 1) top = 1;
            bottom = slice.Bottom / this.ImgSource.Height;
            if (bottom > 1) bottom = 1;
        }

        double horizontalMid = 1 - left - right;
        if (horizontalMid < 0) horizontalMid = 0;
        double verticalMid = 1 - bottom - top;
        if (verticalMid < 0) verticalMid = 0;

        res[0] = new Rect(0, 0, left, top);
        res[1] = new Rect(left, 0, horizontalMid, top);
        res[2] = new Rect(1 - right, 0, right, top);

        res[3] = new Rect(0, top, left, verticalMid);
        res[4] = new Rect(left, top, horizontalMid, verticalMid);
        res[5] = new Rect(1 - right, top, right, verticalMid);

        res[6] = new Rect(0, 1 - bottom, left, bottom);
        res[7] = new Rect(left, 1 - bottom, horizontalMid, bottom);
        res[8] = new Rect(1 - right, 1 - bottom, right, bottom);

        return res;
    }   

    public NineSliceImage()
    {
        InitializeComponent();
        this.DataContext = this;
    }
} 
```

}

在你的 MainWindow 代码后面：

```
public {YOUR_PROJECT_WINDOW}()
    {
        InitializeComponent();
        this.DataContext = this;

        //Find all custom UserControl NineSliceImage, and set their AreasSize if needed
        var defaultThickness = new Thickness();
        foreach (var nineSliceImg in HelperUtils.FindAllChildren<NineSliceImage>(this, x => x is NineSliceImage))
        {
            if (nineSliceImg.AreasSize == defaultThickness)
                nineSliceImg.AreasSize = nineSliceImg.Slice;
        }
        [...]
    } 
```

并在您的主窗口 XAML 中使用它：

```
<local:NineSliceImage x:Name="Save9SliceImg" ImgSource="/Assets/SaveBIG.png" Slice="225,225,225,300" AreasSize="25,25,25,0"/> 
```

您可能需要清洁溶液并重新生成溶液。

如您所见，我最终得到了一种丑陋的解决方法，使 AreasSize 依赖属性默认具有相应的切片依赖属性...如果您知道更好的方法？

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-11-08T08:17:32.797

您可以使用 Android SDK 中的 draw9patch 工具创建 9patch 图像。 [http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# android - 如何从我的应用程序访问 Android 设置？

> ID：13284979
> 
> 赞同：1
> 
> 时间：2012-11-08T08:12:18.307
> 
> 标签：android

我想通过单击活动 A 中的按钮从我的应用程序访问 Android 设置，之后当用户单击设置中的后退按钮时，它会将用户带到活动 B ...

我正在运行的下面的代码能够将我从活动 A 带到设置，但是当我在设置页面并单击后退按钮时，它会将我带回到活动 A，有人可以教我如何按顺序执行当我单击设置中的返回按钮时将我带到活动 B？

```
 startActivity(new Intent(android.provider.Settings.ACTION_SECURITY_SETTINGS)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T08:14:50.287

```
int REQUEST_CODE = 5;
startActivityForResult (new Intent(android.provider.Settings.ACTION_SECURITY_SETTINGS),REQUEST_CODE); // call instead startActivity

  @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // return from settings
        finish();
        startActivity(new Intent(this,ActivityB.class));// start Activity B
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

# reporting-services - 仅对正在查看的页面进行交互式排序

> ID：13284981
> 
> 赞同：1
> 
> 时间：2012-11-08T08:12:27.360
> 
> 标签：reporting-services

我在报告中添加了交互式排序。

但是我只想对特定页面的数据进行排序：假设我有 1 到 100 页，并且我在第 1 页。10，然后我只想排序页码。10 的数据，而不是对第 1 页到第 100 页的数据进行排序。

这在SSRS中可能吗？

# android-layout - 在图像视图的图像上设置标记

> ID：13284983
> 
> 赞同：3
> 
> 时间：2012-11-08T08:12:38.243
> 
> 标签：android-layout, android-imageview, android-image

我只是想在图像上的特定 (x,y) 位置上设置 uo 标记！[在此处输入图像描述][1]

我曾尝试使用位图和画布功能，但直到现在我都没有工作

```
 Bitmap viewBitmap = Bitmap.createBitmap(image.getWidth(),image.getHeight(),Bitmap.Config.ALPHA_8);//i is imageview which u want to convert in bitmap
    Canvas canvas = new Canvas(viewBitmap);
    Paint paint = new Paint(2222);
    viewBitmap.extractAlpha();
    viewBitmap.eraseColor(getWallpaperDesiredMinimumHeight());
    viewBitmap = viewBitmap.extractAlpha(paint, null);
    canvas.drawBitmap(viewBitmap, 10, 10,paint);
    canvas.drawCircle(20, 20, 5, paint);
    canvas.clipRect(10,10, 10, 10);
    image.draw(canvas); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T04:41:51.893

你可以用这个

```
@Override
public boolean onTouch(View view, MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();
    int x1=(int)eventX;
    int y1=(int)eventY;
    setLocation(x1, y1);
    return false;
}
public void setLocation(int x, int y) {
    final LinearLayout iv = (LinearLayout) findViewById(R.id.tag_relay);
    final AbsoluteLayout.LayoutParams lp = (AbsoluteLayout.LayoutParams) iv.getLayoutParams();
    lp.x = x;
    lp.y = y;
    iv.setLayoutParams(lp);
    //  iv.setVisibility(View.VISIBLE);

} 
```

# c - 来自 Linux 内核的 CCM-AES

> ID：13284986
> 
> 赞同：5
> 
> 时间：2012-11-08T08:12:45.923
> 
> 标签：c, linux, cryptography, kernel, aes

我需要与 Solaris 加密机 SUN_CKM_AES_CCM 兼容。在 Linux 中，我相信我应该设置一个 AEAD 请求来获取“ccm(aes)”机械。Linux Crypto 的文档看起来确实很差，最好的例子似乎是 tcrypt.c 测试和内核源代码。

在 Solaris 中，我使用 16 字节 hmac 和 12 字节 iv 对 512 字节块进行了测试加密。这需要保持不变，并希望结果是相同的。

但是，我*认为*应该可行的方法却不行；

```
 struct crypto_aead *tfm = NULL;
   struct aead_request *req;
   unsigned char key[16] = {
    0x5c, 0x95, 0x64, 0x42, 0x00, 0x82, 0x1c, 0x9e,
    0xd4, 0xac, 0x01, 0x83, 0xc4, 0x9c, 0x14, 0x97
   };
  unsigned int ivsize;
  int ret;
  struct scatterlist plaintext[1];
  struct scatterlist ciphertext[1];
  struct scatterlist hmactext[1];
  unsigned char *plaindata = NULL;
  unsigned char *cipherdata = NULL;
  unsigned char *hmacdata = NULL;
  unsigned char *ivp = NULL;
  int i;
  unsigned char d;
  struct tcrypt_result result;

  tfm = crypto_alloc_aead("ccm(aes)", 0, 0);
  init_completion(&result.completion);
  req = aead_request_alloc(tfm, GFP_KERNEL);
  aead_request_set_callback(req, CRYPTO_TFM_REQ_MAY_BACKLOG,
                          cipher_work_done, &result);

  crypto_aead_clear_flags(tfm, ~0);

  ret = crypto_aead_setkey(tfm, key, sizeof(key));

  ret = crypto_aead_setauthsize(tfm, 16); // authsize is hmac?

  ivsize = crypto_aead_ivsize(tfm);
  if (ivsize != 12) {
    printk("ivsize is not 12 %d - this needs to be fixed\n", ivsize);
  }

  plaindata  = kmalloc(512, GFP_KERNEL);
  cipherdata = kmalloc(512, GFP_KERNEL);
  hmacdata   = kmalloc(16, GFP_KERNEL);
  ivp        = kmalloc(ivsize, GFP_KERNEL);

  if (!plaindata || !cipherdata || !hmacdata || !ivp) goto out;

  // put 00 01 02 03 ... in the input buffer...
  for (i = 0, d = 0; i < 512; i++, d++)
    plaindata[i] = d;

  memset(cipherdata, 0, 512);
  memset(hmacdata, 0, 16);
  memset(ivp, 0, ivsize);

  // Put a8 a9 aa .... in iv
  for (i = 0,d=0xa8; i < 12; i++, d++)
    ivp[i] = d;

  sg_init_one(&plaintext[0],  plaindata,  512);
  sg_init_one(&ciphertext[0], cipherdata, 512);
  sg_init_one(&hmactext[0],   hmacdata,   16);

  aead_request_set_crypt(req, plaintext, ciphertext, 512, ivp);

  aead_request_set_assoc(req, hmactext, 16);

  ret = crypto_aead_encrypt(req);

  printk("cipher call returns %d \n", ret); 
```

我们得到的是 ivsize 是 16（我看不出有办法将它设置为 12），并且加密失败并显示“-22”或 EINVAL。代码中有很多错误检查，在这里删除，确认所有先前的调用返回成功。

据我所知，我非常接近 tcrypt.c 来源。但是，我想知道强制`ivsize = 16`是否意味着我无论如何都不能使用提供的算法。除此之外，很高兴看到加密调用成功以及密码数据输出中的内容。

代码被放入内核模块，并在 _init() 时间运行。最初我使用 blkcipher “aes”，它有效，但不是 ccm-aes 变体。这让我改用aead，但我无法开始工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T07:12:44.517

好的，这就是我学到的。

1）让我们调用应用程序的 iv `nonce`。让我们称内部加密的 iv `iv`。事实证明，Solaris 代码正在使用`nonce-len=12`，但 CCM-AES 算法仍然使用`iv-len=16`.

来自 Solaris 内核源代码，`iv`由以下各项组成：

```
iv[0] = 1..7, based on ivlen 16 - noncelen 12 = 2.
iv[1] = the nonce data (12 bytes).
iv[14] = 0
iv[15] = 1 
```

因此，在 Linux 上，我想要 ivlen 16 的“ccm(aes)”，并正确准备`iv`from `nonce`。

2) 调用`crypto_aead_encrypt()`时忽略前面的调用`aead_request_set_assoc()`，并将 HMAC 放在密码缓冲区的末尾。就我而言，在密文 [512] 处，16 个字节。所以输入的长度必须是+16。

使用 scatterlist，如果设置正确，“最后”的 HMAC 可能会有所不同。

3）调用`crypto_aead_decrypt()`cryptolen时应该是+16（cipherinputlen + maclen）。MAC 从输入缓冲区的末尾读取，即 16 字节的密文[512]。也可以是使用 scatterlist 的单独缓冲区。

4) `crypto_aead_setauthsize()`检查给定的 len 是否正确，然后什么也不做。不要认为这实际上设置了大小！

5)`aead_request_set_assoc()`必须设置，即使它只是一个零缓冲区。

# jquery - 如何使用 JQuery Mobile 在不可见的 div 页面中设置单选按钮？

> ID：13284989
> 
> 赞同：2
> 
> 时间：2012-11-08T08:13:35.373
> 
> 标签：jquery, jquery-mobile

我有一个带有 div 的 html 文件分成多个页面。在每个页面上，我都有一个单位切换单选按钮，按下时我希望不可见页面上的所有相应单选按钮也可以切换。

我已尝试使用以下代码，该代码适用于可见页面，但在尝试设置不可见单选按钮（a2 和 b2）时会引发以下错误；

错误：无法在初始化之前调用 checkboxradio 上的方法；试图调用方法“刷新”

代码示例；

```
 <fieldset data-role="controlgroup" data-type="horizontal" >
<input type="radio" align="center" name="radio-view1" id="radio-view-a1" checked="checked">
<label for="radio-view-a1">Imperial</label>
<input type="radio" name="radio-view1" id="radio-view-b1">
<label for="radio-view-b1">Metric</label>
    </fieldset>

    <!--script type="text/javascript" language="javascript">

$('#radio-view-a1').click(function(){       
    $('#radio-view-a1').attr('checked',true).checkboxradio("refresh");
    $('#radio-view-b1').attr('checked',false).checkboxradio("refresh");
    $('#radio-view-a2').attr('checked',true).checkboxradio("refresh");
    $('#radio-view-b2').attr('checked',false).checkboxradio("refresh");
    updown_toggle_units2imperial();
    });
$('#radio-view-b1').click(function(){
    $('#radio-view-a1').attr('checked',false).checkboxradio("refresh");
    $('#radio-view-b1').attr('checked',true).checkboxradio("refresh");
    $('#radio-view-a2').attr('checked',false).checkboxradio("refresh");
    $('#radio-view-b2').attr('checked',true).checkboxradio("refresh");
    updown_toggle_units2metric();
            });
   </script--> 
```

编辑：我创建了一个 Fiddle 来演示。如果您转到[链接](http://jsfiddle.net/vinomarky/Be9HU/1/)，然后单击激活 firebug 或类似功能的 Metric 按钮，您会看到错误消息

任何帮助我解决如何实现所需行为的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T16:03:51.697

以下组合有效：

```
$("input[type='radio']").checkboxradio();
$("input[type='radio']").checkboxradio("refresh"); 
```

[在此处查看工作示例](http://jsfiddle.net/8VsHM/)

[这个链接](https://forum.jquery.com/topic/one-more-widget-refresh-problem-checkboxradio#14737000002801892)帮助我找到了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:29:31.003

采用

```
$('#radio-view-b1').live('click',function(){ //your code }); 
```

代替

```
$('#radio-view-a1').click(function(){ //your code }); 
```

# jqgrid - 使用struts2将数组列表从jsp传递到动作类

> ID：13284995
> 
> 赞同：1
> 
> 时间：2012-11-08T08:14:01.867
> 
> 标签：jqgrid, struts2

我有一个带有jqgrid的jsp页面我想将该网格数据传递给动作类。我正在使用cellEdit编辑jqgrid数据，现在我想将这个新数据传递给动作类以更新数据库中的这些数据。我怎样才能传递jqgrid从jsp到动作类的数据？

```
 <sjg:grid id="gridtable" caption="　" dataType="json" 
                href="%{listurl}"
                gridModel="listMS_AUTONUMBER"
                            cellEdit="true"
                    cellurl="%{cellediturl}">

<sjg:gridColumn frozen="false"  name="autonumberCd" index="autonumberCd" title="%{getText('autonumber.autonumbercode')}"
                    sortable="true" search="true" editable="true" key="true" editoptions="{maxlength :2}"
                    editrules="{required:true,custom:true,custom_func:validateCapitalAlphanumeric}" formatter="String"  formoptions="{elmsuffix:'  *'}"/>     

                <sjg:gridColumn name="autonumberNm" index="autonumberNm" title="%{getText('autonumber.autonumbername')}"
                    sortable="true" editable="true" edittype="text" editrules="{required:true}" editoptions="{maxlength :10}" formoptions="{elmsuffix:'  *'}" />        

                <sjg:gridColumn name="nextAutonumber" index="nextAutonumber" title="%{getText('autonumber.nextautonumber')}"
                    sortable="true" editable="true" edittype="text" editrules="{required:true,custom:true,custom_func:validateNumericOnly}" editoptions="{maxlength :10}" align="right" formoptions="{elmsuffix:'  *'}" />                      
            </sjg:grid> 
```

这是我的 jqgrid，其中`listMS_AUTONUMBER`的列表从数据库中检索值并来自另一个动作类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:11:40.990

要将 jqgrid 数据从 jsp 传递到操作类，我使用 json 如下：

```
var data=jQuery("#gridtable").jqGrid('getRowData');      //this method gets all the data from grid
var postData = JSON.stringify(data);          //using json stringify convert the data in string format
alert(postData); 
```

使用警报我以字符串格式显示 jqgrid 的数据。

之后，我通过 AJAX 将这些数据发送到操作类，如下所示：

```
$.ajax({
       type: "Get",
    url: "action_name?AutoList="+postData,
    data : {
           jgGridData: postData,
        },
    dataType:"json",
    contentType: "application/json; charset=utf-8",
}); 
```

在此之后，在动作类中，将此字符串转换为 json 格式，如下所示：

```
JSONArray outerArray = (JSONArray) JSONSerializer.toJSON(AutoList); 
```

# php - 用于替换的正则表达式 和

> ID：13284999
> 
> 赞同：6
> 
> 时间：2012-11-08T08:14:30.723
> 
> 标签：php, regex, replace, paragraph, html-heading

我需要全部替换：

```
<p class="someClass someOtherClass">content</p> 
```

和

```
<h2 class="someClass someOtherClass">content</h2> 
```

在一串内容中。基本上我只想`"p"`用`"h2"`.

这是我到目前为止所拥有的：

```
/<p(.*?)class="(.*?)pageTitle(.*?)">(.*?)<\/p>/ 
```

这与整个`<p>`标签匹配，但我不确定我将如何`<p>`替换`<h2>`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T08:40:23.300

以下应该做你想要的：

```
$str = '<p>test</p><p class="someClass someOtherClass">content</p>';

$newstr = preg_replace('/<p .*?class="(.*?someClass.*?)">(.*?)<\/p>/','<h2 class="$1">$2</h2>',$str);

echo $newstr; 
```

点（`.`）匹配所有。星号匹配 0 或任意数量的匹配。括号内的任何内容都是一个组。该`$2`变量是对匹配组的引用。花括号( `{1}`) 内的数字是一个量词，表示匹配前一个组一次。该量词可能不需要，但无论如何它都在那里并且工作正常。反斜杠转义任何特殊字符。最后，问号使该`.*`位不贪心，因为默认情况下它是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:28:09.440

不要做得更好，但这会有所帮助:)

```
$text = '<p class="someClass someOtherClass">content</p>';
$output = str_replace( array('<p', '/p>'), array('<h2', '/h2>'), $text ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T12:33:12.343

它会工作:)

```
preg_replace('/<p .*?class="(.*?)">(.*?)<\/p>/','<h2 class="$1">$2</h2>',$value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T21:38:36.550

抱歉，晚会有点晚了。我使用了答案中的正则表达式：

```
$str = '<p>test</p><p class="someClass someOtherClass">content</p>';

$newstr = preg_replace('/<p .*?class="(.*?someClass.*?)">(.*?)<\/p>/','<h2 class="$1">$2</h2>',$str);

echo $newstr; 
```

当您有更多 p 标签时，这种方法会出现问题，例如在一段文本中：这是我如何强化正则表达式以涵盖这种情况：

```
$newstr = preg_replace('/<p [^<]*?class="([^<]*?someClass.*?)">(.*?)<\/p>/','<h2 class="$1">$2</h2>',$str); 
```