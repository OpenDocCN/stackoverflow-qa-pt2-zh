# StackOverflow 问答 13827000-13827999

# c# - 在 ASP.NET MVC 4 中使用 id 路由到索引

> ID：13827002
> 
> 赞同：8
> 
> 时间：2012-12-11T19:22:32.297
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-routing

我想使用默认控制器 = Home 和默认操作 = 索引来维护 ASP.NET MVC 4 的现有控制器/动作/id 路由，但也允许控制器/id 路由到控制器的索引方法，只要第二项不是一个已知的动作。

例如，给定一个具有 Index 和 Send 动作的控制器 Home：

```
/Home/Send -> controller's Send method
/Home -> controller's Index method
/Home/Send/xyz -> controller's Send method with id = xyz
/Home/abc -> controller's Index method with id = abc 
```

但是，如果我先定义任一路线，它会隐藏另一条路线。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:26:25.933

在默认通用之前先执行特定的。顺序很重要。

```
routes.MapRoute(name: "single", url: "{controller}/{id}",
    defaults: new { controller = "Home", action = "Index" }, 
    constraints: new { id = @"^[0-9]+$" });

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home",
    action = "Index",
    id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:15:46.323

如果您的操作列表（例如*Send*）是众所周知的，并且它们的（操作）名称不能与某些 ID 值相同，我们可以使用我们的自定义 ConstraintImplementation：

```
public class MyRouteConstraint : IRouteConstraint
{
  public readonly IList<string> KnownActions = new List<string> 
       { "Send", "Find", ... }; // explicit action names

  public bool Match(System.Web.HttpContextBase httpContext, Route route
                  , string parameterName, RouteValueDictionary values
                  , RouteDirection routeDirection)
  {
    // for now skip the Url generation
    if (routeDirection.Equals(RouteDirection.UrlGeneration))
    {
      return false; // leave it on default
    }

    // try to find out our parameters
    string action = values["action"].ToString();
    string id = values["id"].ToString();

    // id and action were provided?
    var bothProvided = !(string.IsNullOrEmpty(action) || string.IsNullOrEmpty(id));
    if (bothProvided)
    {
      return false; // leave it on default
    }

    var isKnownAction = KnownActions.Contains(action
                           , StringComparer.InvariantCultureIgnoreCase);

    // action is known
    if (isKnownAction)
    {
      return false; // leave it on default
    }

    // action is not known, id was found
    values["action"] = "Index"; // change action
    values["id"] = action; // use the id

    return true;
  } 
```

并且路线图（在默认路线图之前 - 必须同时提供）应该如下所示：

```
routes.MapRoute(
  name: "DefaultMap",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = string.Empty, action = "Index", id = string.Empty },
  constraints: new { lang = new MyRouteConstraint() }
); 
```

**摘要**：在这种情况下，我们正在评估“action”参数的值。

*   如果 1) action 和 2) id 都提供了，我们不会在这里处理。
*   也不是已知的动作（在列表中，或反映......）。
*   仅当动作名称未知时，让我们更改路由值：将动作设置为“索引”，将*动作值*设置为 ID。

*注意：`action`名称和`id`值必须是唯一的......然后这将起作用*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-01T11:08:34.753

最简单的方法是在 Controller 中简单地创建两个 Action 方法。一个用于索引，一个用于发送，并将您的字符串 id 参数放在两者上。由于您不能拥有重复或重载的操作方法，因此可以解决该问题。您的 Index 方法现在将处理 id 存在或不存在（null）的索引或空白路径，并以这种方式处理您的视图。您的 Send 方法将与 Index 完全相同。然后，您可以根据 id 是否为空来按您喜欢的方式路由、处理或重定向。这应该在不更改 RouteConfig.cs 的情况下工作：

```
public ActionResult Index(string id) {if (id == null) Do A else Do B}

public ActionResult Send(string id) {if (id == null) Do A else Do B} 
```

我为此挣扎了很长时间，这是最简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T16:48:38.917

这对我有用：

1）在RouteConfig中，我把它放在第一行：

```
routes.MapRoute(name: "single", url: "{controller}/{lastName}",
            defaults: new { controller = "LeaveRequests", action = "Index" }); 
```

2）在我的控制器中：

```
public ViewResult Index(string lastName)
{
    if (lastName == null)
    {
        return //return somthing
    }
    else
    {
        return //return something
    }
 } 
```

3）当你调用控制器时

```
http://localhost:34333/leaveRequests/Simpsons 
```

它会给你所有对辛普森一家的要求。

如果你打电话给`http://localhost:34333/leaveRequests/` 它会给出所有请求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T22:06:02.967

我认为没有满足您要求的解决方案，因为您有两条竞争路线。也许您可以定义一些特定的东西（如果您没有任何其他控制器）。

```
routes.MapRoute(
        name: "Send",
        url: "{controller}/Send/{id}",
        defaults: new { controller = "Home", id = UrlParameter.Optional }
    );
routes.MapRoute(
        name: "Home",
        url: "Home",
        defaults: new { controller = "Home", action = "Index" }

routes.MapRoute(
        name: "Index",
        url: "{controller}/{id}",
        defaults: new { controller = "Home", action= "Index", 
                           id = UrlParameter.Optional }
    );

routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index",
                                               id = UrlParameter.Optional }
    ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-28T15:06:10.363

这对我有用

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
            name: "Default1",
            url: "{id}",
            defaults: new { controller ="Home", action ="Index" }
        );
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller ="Home", action ="Index", id = UrlParameter.Optional }
        ); 
```

# performance - LINQ to Entities -- OrderBy().ToList() 与 ToList().OrderBy()

> ID：13827004
> 
> 赞同：9
> 
> 时间：2012-12-11T19:22:33.260
> 
> 标签：performance, linq, entity-framework, linq-to-entities

我正在寻找这些 LINQ 表达式的确认/澄清：

```
var context = new SomeCustomDbContext()

// LINQ to Entities?
var items  = context.CustomItems.OrderBy(i => i.Property).ToList();

// LINQ to Objects?
var items2 = context.CustomItems.ToList().OrderBy(i => i.Property); 
```

1.  我是否认为第一种方法是`LINQ to Entities`EF 构建更具体的 SQL 语句以传递，将排序工作放在数据库上？

2.  第二种方法`LINQ to Objects`是 LINQ`ToList()`在订购之前将整个集合拖入内存（枚举？），从而将负担留给服务器端（在这种情况下为 Web 服务器）？

    如果是这种情况，我可以很快看到 L2E 有利的情况（例如，在将集合拉入内存之前过滤/修剪集合）。

3.  但是是否还有其他我应该注意的细节/权衡，或者“方法 2”可能优于第一种方法的时间？

**更新：**

假设我们没有使用 EntityFramework，只要底层存储库/数据源实现，这仍然是`IQueryable<T>`正确的？如果这两个语句都不会导致`LINQ to Objects`内存中的操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T19:27:23.793

1.  是的。
2.  是的。
3.  是的。

您是正确的，调用`ToList()`强制 linq-to-entities 评估并将结果作为列表返回。正如您所怀疑的，这可能会对性能产生巨大影响。

在某些情况下，linq-to-entities 无法弄清楚如何解析看起来非常简单的查询（如`Where(x => SomeFunction(x))`）。在这些情况下，您通常别无选择，只能调用`ToList()`和操作内存中的集合。

* * *

回应您的更新：

`ToList()`总是强制它前面的一切立即评估，而不是延迟执行。举个例子：

```
someEnumerable.Take(10).ToList(); 
```

对比

```
someEnumerable.ToList().Take(10); 
```

`someEnumerable`在第二个示例中，必须在获取前 10 个元素之前执行任何延迟工作。如果`someEnumerable`正在做一些劳动密集型的事情（比如使用 从磁盘读取文件`Directory.EnumerateFiles()`），这可能会对性能产生非常实际的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:28:17.677

> 我认为第一种方法是 LINQ to Entities 是否正确，其中 EF 构建了一个更具体的 SQL 语句以传递，将排序工作放在数据库上？

是的

> 第二种方法是 LINQ to Objects，其中 LINQ 将整个集合拖到内存中……在订购之前，从而给服务器端留下负担……？

是的

> 但是是否还有其他我应该注意的细节/权衡，或者“方法 2”可能优于第一种方法的时间？

很多时候方法 1 是不可能的——通常是当你有一个复杂的过滤器或排序顺序不能直接转换为 SQL 时（或者更合适的是，EF 不支持直接 SQL 转换）。此外，由于您无法通过网络传输延迟加载`IQueryable`的 s，因此任何时候您必须序列化结果，您都必须首先使用`ToList()`或类似的东西来实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:02:04.860

要注意的另一件事是，IQueryable 不保证 (a) 底层提供者的语义推理，或 (b) 提供者实现了多少 IQueryable 方法集。

例如： -

1.  EF 不支持 Last()。
2.  它也不支持将日期时间与有效的 T-SQL 进行时间部分比较。
3.  它不支持子查询中的 FirstOrDefault()。

在这种情况下，您需要将数据带回客户端，然后在客户端执行进一步的评估。

您还需要了解它“如何”解析 LINQ 管道以生成（在 EF 的情况下）T-SQL。因此，有时您必须仔细考虑如何构建 LINQ 查询以生成有效的 T-SQL。

说了这么多，IQueryable<> 是 .NET 框架中一个非常强大的工具，非常值得更加熟悉。

# java - 通过Tomcat中的服务器路径获取物理路径

> ID：13827009
> 
> 赞同：1
> 
> 时间：2012-12-11T19:22:51.843
> 
> 标签：java, file, tomcat, path

我有一个文件的服务器路径，我想在服务器端代码中删除该文件，但`fileNotFound`抛出异常，所以我认为我需要文件服务器路径的物理对应路径。

如何通过 http 路径获取文件的物理路径？在 ASP.NET 中`Server.MapPath("../images/myImage.png")`- 会工作，但我在**JAVA**

# ajax - 跨域 $.ajax 和 404 错误

> ID：13827016
> 
> 赞同：1
> 
> 时间：2012-12-11T19:23:15.510
> 
> 标签：ajax, asp.net-mvc

我想`$.ajax`从外部 ASP.NET MVC 站点（在本例中 - 从我的站点）检索一些数据。下面的代码给了我一个`404 Not Found error`（当然`url`是有效的。

但是，如果我将 url 从更改`url: 'http://myurl.com/Home/GetMyCode/?id=mycode'`为`url: 'http://localhost:123/Home/GetMyCode/?id=mycode'`一切都很好。那么，如何解决呢？

```
 $.ajax({
        url: 'http://myurl.com/Home/GetMyCode/?id=mycode',
        type: 'POST',
        contentType: "application/json; charset=utf-8",
        crossDomain: true,
        success: function (res) {
            ...
        },
        error: function (jqXHR, textStatus, errorThrown) {
            ...
        }
    });

    [HttpPost]
    public JsonResult GetMyCode(string id)
    {
        try 
        {
            return Json(new { result = "ok", resultData = "OK") });
        }
        catch (Exception e)
        {
            return Json(new { result = "error", resultData = "An error occured" });
        }            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:26:15.940

***处理跨域 Ajax 调用的两种方法：***

**JSONP：跨域访问的当前标准**

JSONP 是一些网站用来公开其内容的一种约定，这种方式使调用者更容易通过脚本使用数据，甚至是来自外部域的数据。诀窍在于让网站返回一些 JSON 内容，而不是作为纯字符串，而是包装在脚本函数调用中。更多细节..

*   [http://www.west-wind.com/weblog/posts/2007/Jul/04/JSONP-for-crosssite-Callbacks](http://www.west-wind.com/weblog/posts/2007/Jul/04/JSONP-for-crosssite-Callbacks)
*   [http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

**跨域资源共享 (CORS)**

要在尚不支持 cors 但允许跨域 XHR 请求（windows gadget 等）的环境中启用跨域请求，请设置 `$.support.cors = true;` You just tell jQuery that you are in an environment where Cross-Domain XHR requests are possible。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:11:05.287

为了跨域检索数据，您可能需要使用“jsonp”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T22:16:50.147

看起来这可能是一个DNS问题。您可以访问：[http](http://myurl.com) ://myurl.com吗？

您尝试访问的 .com 域是否可公开访问？或者它是到本地主机的环回？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:12:52.517

该教程对我有用，我必须在我的 MVC 项目中实现 JSONP 处理。 [http://www.codeguru.com/csharp/.net/net_asp/using-jsonp-in-asp.net-mvc.htm](http://www.codeguru.com/csharp/.net/net_asp/using-jsonp-in-asp.net-mvc.htm)

# python - PEP8、locals() 和插值

> ID：13827017
> 
> 赞同：2
> 
> 时间：2012-12-11T19:23:17.633
> 
> 标签：python, pep8

这是一些代码：

```
foo = "Bears"
"Lions, Tigers and %(foo)s" % locals() 
```

我的 PEP8 linter (SublimeLinter) 抱怨这一点，因为 foo 是“未引用的”。我的问题是 PEP8 是否应该将这种类型的字符串插值计为“引用”，或者是否有充分的理由考虑这种“不良风格”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:29:13.420

好吧，它*没有被*引用。风格有问题的部分是`locals()`用来访问变量，而不是仅仅通过名称访问它们。请参阅[上一个问题](https://stackoverflow.com/questions/1550479/python-is-using-vars-locals-a-good-practice)，了解为什么这是一个可疑的想法。这不是一件可怕的事情，但对于您想要长期维护的程序来说，这不是一种好的风格。

编辑：确实，当您使用文字格式字符串时，它似乎更明确。但是上一篇文章的部分观点是，在一个更大的程序中，您可能最终*不会*使用文字格式字符串。如果它是一个小程序并且您不在乎，请继续使用它。但是，对以后可能导致可维护性问题的事情发出警告也是样式指南和 linter 的一部分。

此外，`locals`这不是在文字中明确引用的名称的规范表示。它是本地命名空间中*所有*名称的规范表示。如果你愿意，你仍然可以这样做，但它基本上是一个松散/草率的替代方案，而不是显式使用你正在使用的名称，这又是 linter 应该警告你的那种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:13:12.123

即使您拒绝 BrenBarn 的`foo`未引用参数，如果您接受`locals()`应该标记传入字符串格式的参数，则可能不值得将代码写入考虑`foo`引用。

首先，在任何额外代码会有所帮助的情况下，该构造无论如何都是不可接受的，并且无论如何用户都将不得不忽略 lint 警告。是的，当实际上只有一个问题时，给用户*两个*lint 警告以忽略是有一些危害的，特别是如果其中一个警告有点误导。但是，证明编写非常复杂的代码并在 linter 中引入新错误是否足够有害？

您还必须考虑到，要使其真正起作用，linter 不仅要识别`%`格式，还要识别`{}`格式，以及用户可能使用的所有其他类型的字符串格式、HTML 模板等。在实践中，这意味着处理各种非常常见的形式，并为用户提供某种钩子来描述其他任何内容。

而且，最重要的是，即使您认为它不应该与任意生成的格式字符串一起使用，它肯定至少必须与 l10n 一起使用。这将如何运作？如果格式字符串是由 gettext 之类的东西生成的，则 linter 无法知道是否`foo`被引用，除非它可以检查所有翻译并看到其中至少一个引用`foo`- 这意味着它必须理解（或有钩子被教导）每个字符串翻译机制，并可以访问翻译数据库。

所以，我建议，即使你认为这种情况下的警告是虚假的，你还是把它留在那里。最多添加一些符合警告的内容：

> `foo`可能未引用，但在使用的函数中`locals()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:56:47.110

以下内容也不会让 SublimeLinter 高兴，它会查找字符串中引用的每个变量名称，并从命名空间映射中替换相应的值，默认为调用者的`locals`. 因此，它显示了像 SublimeLinter 这样的实用程序在尝试确定 Python 中是否已引用某些内容时的固有限制）。我的建议是忽略 SublimeLinter 或添加代码来伪造它，例如`foo = foo`. 我不得不做类似后者的事情来摆脱 C 编译器关于合法和有意的事情的警告。

```
import re
import sys
SUB_RE = re.compile(r"%\((.*?)\)s")

def local_vars_subst(s, namespace=None):
    if namespace is None:
        namespace = sys._getframe(1).f_locals

    def repl(matchobj):
        var = matchobj.group(1).strip()
        try:
            retval = namespace[var]
        except KeyError:
            retval = "<undefined>"
        return retval

    return SUB_RE.sub(repl, s)

foo = "Bears"
print local_vars_subst("Lions, Tigers and %(foo)s") 
```

# solr - 如果我使用 Document，是否必须在 solr 中创建架构，如何在 solr 中添加同义词和拼写错误功能

> ID：13827036
> 
> 赞同：1
> 
> 时间：2012-12-11T19:24:25.237
> 
> 标签：solr, spring-roo, solrj

使用 roo 我生成了以下 spring bean

```
<bean class="org.apache.solr.client.solrj.impl.CommonsHttpSolrServer" id="solrServer">
    <constructor-arg value="${solr.serverUrl}"/>
</bean> 
```

配置文件有

```
solr.serverUrl=http\://localhost\:8983/solr 
```

使用如下：

```
@Autowired
transient SolrServer Address.solrServer;

@Async
public static void Address.indexAddresses(Collection<Address> addresses) {
    List<SolrInputDocument> documents = new ArrayList<SolrInputDocument>();
    for (Address address : addresses) {
        SolrInputDocument sid = new SolrInputDocument();
        sid.addField("id", "address_" + address.getId());
        sid.addField("address.id_i", address.getId());
        // Add summary field to allow searching documents for objects of this type
        sid.addField("address_solrsummary_t", new StringBuilder().append(address.getId()));
        documents.add(sid);
    }
    try {
        SolrServer solrServer = solrServer();
        solrServer.add(documents);
        solrServer.commit();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我的问题是：

***我是否必须在 solr 中创建模式才能在 solr 中对其进行索引，或者此代码是否足够好？***

除此之外，我的应用程序是一个多层架构，网站只是其中的一小部分。那么我怎么能删除被 Windows 应用程序或 android 应用程序删除的数据。

一种解决方案可能是重新创建索引，但它不会导致 solr 中的统计信息丢失，用于使搜索结果更有效（我不确定）？

我如何在 solr 中添加同义词搜索以及如何初始化拼写错误插件（单词可能是人名或地名，基本上不是来自字典）？

很抱歉合并了多个问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:15:55.287

> 我是否必须在 solr 中创建模式才能在 solr 中对其进行索引，或者此代码是否足够好？

是的，您应该有 schema.xml 文件，并且您应该在那里定义要索引的字段。

> 除此之外，我的应用程序是一个多层架构，网站只是其中的一小部分。那么我怎么能删除被 Windows 应用程序或 android 应用程序删除的数据。

您可以使用以下代码片段删除文档。假设有一个值为 12345 的字段 id。您可以在`<query>`标签之间编写查询。

```
http://localhost:8983/solr/update?stream.body=<delete><query>id:12345</query></delete>&commit=true 
```

> 一种解决方案可能是重新创建索引，但它不会导致 solr 中的统计信息丢失，用于使搜索结果更有效（我不确定）？

AFAIK，默认情况下不保存搜索统计信息，因此重新创建索引可能是一种解决方案。

> 我如何在 solr 中添加同义词搜索以及如何初始化拼写错误插件（单词可能是人名或地名，基本上不是来自字典）？

您可以将 SynonymFilterFactory 添加到 schema.xml 文件中的字段定义。

# sql - 是否可以对 INTERVAL DAY TO SECOND 数据类型使用 SUM 查询？

> ID：13827037
> 
> 赞同：1
> 
> 时间：2012-12-11T19:24:30.227
> 
> 标签：sql, oracle

是否可以使用 SUM 查询来给我将两列相加的结果？这些列使用 INTERVAL DAY TO SECOND 数据类型，我想将两列的时间相加，得到总时间。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:40:02.947

`SUM`用于*聚合*多行，将值相加。要从同一行添加两列，请使用`+`. 例如，给定一个`T`包含此数据的表：

```
 A | B
---+---
 1 | 2
 3 | 4 
```

您可以编写`SELECT SUM(a), SUM(b) FROM t`以获取使用加法聚合以下行的单行`T`：

```
 SUM(A) | SUM(B)
--------+--------
      4 |      6 
```

或`SELECT a + b FROM t`将两列加在一起：

```
 A+B
-----
   3
   7 
```

或其中一个`SELECT SUM(a) + SUM(b) FROM t`或`SELECT SUM(a+b) FROM t`（根据您的喜好）将两种效果结合起来：

```
 SUM(A)+SUM(B)                 SUM(A+B)
---------------               ----------
            10                       10 
```

* * *

对于`INTERVAL DAY TO SECOND`，情况有点棘手，因为[该`SUM`函数](http://docs.oracle.com/cd/B12037_01/server.101/b10759/functions148.htm#sthref1799)仅适用于“任何数字数据类型或任何可以隐式转换为数字数据类型的非数字数据类型”。所以你必须来回做一些转换。鉴于此表：

```
 A                  | B
---------------------+-------------------
 +1 01:01:01.000001 | +2 02:02:02.000002
 +3 03:03:03.000003 | +4 04:04:04.000004 
```

这个查询：

```
SELECT NUMTODSINTERVAL(SUM(EXTRACT(DAY FROM a + b)), 'DAY') +
       NUMTODSINTERVAL(SUM(EXTRACT(HOUR FROM a + b)), 'HOUR') +
       NUMTODSINTERVAL(SUM(EXTRACT(MINUTE FROM a + b)), 'MINUTE') +
       NUMTODSINTERVAL(SUM(EXTRACT(SECOND FROM a + b)), 'SECOND') AS "SUM(A+B)"
  FROM t
; 
```

会给出这个结果：

```
 SUM(A+B)
---------------------
 +10 10:10:10.000010 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:10:55.373

您可以添加间隔，没问题：

```
SQL> select a, b, a+b from t;

A                    B                    A+B
-------------------- -------------------- -----------------------------
+01 00:00:00.000000  +00 00:05:00.000000  +000000001 00:05:00.000000000
+02 00:00:00.000000  +00 00:50:00.000000  +000000002 00:50:00.000000000
+02 00:14:24.000000  +00 00:50:12.000000  +000000002 01:04:36.000000000 
```

# motodev-studio - 我在摩托罗拉网站上找不到 MOTODEVstudio 的下载按钮

> ID：13827038
> 
> 赞同：1
> 
> 时间：2012-12-11T19:24:32.313
> 
> 标签：motodev-studio

许多其他网站都给出了这个[http://www.motorola.com/sites/motodev/us-en/motodev_lp.html](http://www.motorola.com/sites/motodev/us-en/motodev_lp.html)？但我找不到 MOTODEVstudio 的下载按钮在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:37:58.470

[这可能是一个相当古老的答案，但为了让事情变得轻松，这个博客澄清了Motodev](http://www.androidcentral.com/portions-motodev-studio-android-open-sourced-and-moved-android-repository)发生的事情：

> 摩托罗拉已经分离了部分核心构建系统，即 Android 的 MOTODEV Studio，并将其合并到 Android 开源项目中。以前，封闭源代码的摩托罗拉工具是标准 Eclipse IDE 设置的替代品，它允许诸如轻松本地化、拖放共享代码片段以及通过摩托罗拉工具浏览和操作 SQL 数据库等关键功能。
> 
> 随着核心插件与 AOSP 的新合并，开发人员现在可以通过 Eclipse 构建和使用这些工具，Eclipse 是迄今为止最流行的 Android 开发 IDE。摩托罗拉提供了通过 GIT 获取代码、构建代码以及将插件集成到 Eclipse 工作区的完整说明。请参阅下面的源链接。

[但是，您可以从sourceforge.com](http://sourceforge.net/projects/motodev.motorola/files/)下载不同版本的 Motodev 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:45:08.273

在摩托罗拉主页上，单击支持、开发人员。在导航窗格上，单击下载 sdk。sdk 包有两个版本。

# c++ - 创建像OpenGL这样的图形库

> ID：13827041
> 
> 赞同：0
> 
> 时间：2012-12-11T19:24:44.833
> 
> 标签：c++, c, opengl, graphics

我想知道如何编写 OpenGL 和其他图形库，以创建我自己的，不是超级复杂的 3D（目前），而是更基本的窗口创建和像素绘图。我想在 Windows 上执行此操作，但我也想绕过整个 Windows API，因为它很慢，也许是直接与显卡对话？我不需要任何代码，但更多的是一个开始寻找的地方，因为互联网上到处都是这些帖子，人们只是说使用预先构建的图形库，这会破坏整个观点，我想这样做以获得更好的理解这是如何完成的，从 C++ 开始。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:28:35.367

OpenGL 和 DirectX（特别是 Direct3D）都是与您的图形卡交互的方式——除了编写自己的驱动程序之外，创建自己的与这两者等效的驱动程序是不可能的。

但是，很有可能在它们之上构建图形引擎。[有关示例，请参阅Irrlicht](http://irrlicht.sourceforge.net/)和[OGRE](http://www.ogre3d.org/)等一些开源项目。

还，

> 我也想绕过整个 Windows API，因为它很慢

这种误解从何而来？在您的计算机上做任何有用的事情最终都会归结为对您的操作系统进行系统调用。

# perl - 使用 Time::Local 将时间 milis 转换为日期格式

> ID：13827050
> 
> 赞同：0
> 
> 时间：2012-12-11T19:25:31.387
> 
> 标签：perl

是否可以转换 timi milis 自 Perl 使用`Time::Local`或标准 Perl 发行版中包含的另一个包以来的时代，即不必使用包管理器单独添加，例如`ppm`？问题是，我在一个超级受限的网络环境中工作，而我正在编写的脚本不保证通过繁文缛节来获得外部的东西，比如`DateTime`or `Time::HiRes`。

例如，我有 milis `1354996539`，我想将其格式化为`2012-12-11 13:45:34`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:35:36.207

Time::Local`timelocal`与您想要的相反（1354996539 是输出，而不是输入）。以它命名的函数[`localtime`](http://perldoc.perl.org/functions/localtime.html)实际上是您想要的函数。

```
use POSIX qw( strftime );
say strftime('%Y-%m-%d %H:%M:%S', localtime(1354996539)); 
```

输出（对于美国/多伦多的某人）：

```
2012-12-08 14:55:39 
```

你也可以不这样做`strftime`：

```
my @ts = localtime(1354996539);
$ts[4] += 1;
$ts[5] += 1900;
say sprintf('%d-%02d-%02d %02d:%02d:%02d', @ts[5,4,3,2,1,0]); 
```

# ios - 如何将可变高度的固定定位元素始终保持在屏幕下方？

> ID：13827051
> 
> 赞同：1
> 
> 时间：2012-12-11T19:25:37.057
> 
> 标签：ios, css

我正在尝试在 CSS 中模拟 iOS 的操作表。

![行动表](../Images/47818e672ac4b77674fb7edfc0d143fa.png)

我的想法是使操作表成为始终位于网页下方的固定位置元素。当我需要显示操作表时，我会进行翻译转换。

**隐：**

```
____________
|           |
|           |
|  Webpage  |
|           |
|           |
|___________|
 |         |
 | Sheet   |
 |_________| 
```

**打开**

```
____________
|           |
|  Webpage  |
| _________ |
||         ||
||  Sheet  ||
||_________|| 
```

当操作表具有静态高度时，这很容易。我可以硬编码所有的值：

```
#sheet {
    position: fixed;
    left: 0;
    bottom: -12em;
    height: 12em;
    transition: all 0.5s ease-out;
}

#sheet.opened {
    transform: translate(0, -12em);
} 
```

当操作表中有可变数量的按钮时，我不知道该怎么办，这会影响整个工作表的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:57:09.657

见这里：http: [//jsfiddle.net/uSXKe/](http://jsfiddle.net/uSXKe/)

您可以改为在和正常之间切换高度`0`，但这需要一点 javascript：

```
var height = $("#action").height();
$("#action").height(height);
$("#home").click(function(){
    var $act = $("#action");
    $act.toggleClass("active");
    $act.css("height", $act.hasClass("active") ? height : "0");
});​ 
```

相关CSS：

```
#action{
    height:0;
    position:absolute;
    bottom:0;
    width:100%;
    -webkit-transition:height .2s linear;
} 
```

# spring - Spring MVC中的注释与标记接口

> ID：13827052
> 
> 赞同：1
> 
> 时间：2012-12-11T19:25:38.797
> 
> 标签：spring, jakarta-ee, interface, annotations

你喜欢哪个？在 spring mvc 中，它们`@Controller`用于所有`Controller`类。他们可以使用一些标记界面吗？他们为什么选择注释方法？更好的是，它们可以有类似的东西`controller-scan`，`component-scan`因此包中的任何类都可以假定为 Controller 类。同样可以在xml中定义`service-scan`。`repository-scan`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T13:12:34.890

我认为从技术上讲，标记界面可能会产生相同的效果。问题是标记接口仅限于类，不能用于属性或方法。

Spring 使用注解将元数据添加到属性（例如`@Autowired`）或方法（例如`@RequestMapping`或`@Transactional`）。因此使用相同的方法将元数据添加到类是一致的（例如`@Controller`或`@Service`）

请注意，Spring 不会强制您使用提供的注释。`@Controller`并且`@RequestMapping`只是定义处理程序映射的默认方式。理论上，您可以想出自己的方式将传入请求映射到方法调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T10:38:51.723

它们最初都用于相同的目的。标记和发现某事。

注释是为了更直接地标记。标记接口实际上定义了一种类型，但是当您声明该类型的变量时，您将无能为力。注释不会创建类型，而是由处理注释的代码来赋予它含义。

最终，这是一个品味问题。

注释确实具有能够存储额外元数据的优势。就像在@Named("foo") 中一样。标记接口的优点是您可以创建保证所有项目都具有标记接口的集合。例如，没有约束说一个泛型或变量类型应该有一个特定的注解。

对于方法与接口中的方法的注释，存在接口中的方法需要实现（在 Java 8 中不再严格要求实现）的问题，这使得类很快变得笨拙，而注释可以更容易地点菜应用，但编译器可以'不强制执行正确的方法签名。这意味着某些注释需要say void foo(Bar bar) 的方法签名，但必须在文档中查找这一事实（如果有的话）。

# intellij-idea - 在 IntelliJ 中查找未使用的方法（不包括测试）

> ID：13827056
> 
> 赞同：10
> 
> 时间：2012-12-11T19:25:49.693
> 
> 标签：intellij-idea, static-analysis

我今天遇到了一种方法..没有在任何地方使用..但是经过测试。由于它被测试使用，`IntelliJ`因此没有将该方法标记为“未使用”。

是否`IntelliJ`允许以下​​搜索条件“查找除测试外未使用的方法，其中测试定义为带有`@Test`注释的任何内容”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:24:28.010

有一个相关的功能请求：

*   [IDEA-56519](http://youtrack.jetbrains.com/issue/IDEA-56519)对未使用代码的检查需要考虑测试工具运行的方法的选项

**虽然检查设置中的Configure annotations...**选项已经涵盖了第一点，但第二点仍然有效：

> 不将测试方法（如上所述）视为入口点的选项。这样我们就可以消除仅由测试方法使用的“生产”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-07T11:20:24.403

> 此功能仅适用于批量检查并在编辑器中禁用。¹

根据 JetBrains [IntelliJ IDEA 2016.3 EAP 使未使用代码检测更加灵活](https://blog.jetbrains.com/idea/2016/09/intellij-idea-2016-3-eap-makes-unused-code-detection-more-flexible/)的博客，现在可以实现了。

您可以在右侧的设置 > 编辑器 > 检查 > Java > 声明冗余 > 未使用的声明 > 中找到它。

[![排除测试入口点的配置选项](../Images/e444483fd326c40c1f7c4b6ab7c24310.png)](https://i.stack.imgur.com/FpD7f.png)

* * *

¹ Anna Kozlova，在上述博文中发表评论，2017 年 1 月 11 日

# objective-c - 检查条件不起作用并返回无法识别的选择器

> ID：13827061
> 
> 赞同：1
> 
> 时间：2012-12-11T19:26:00.130
> 
> 标签：objective-c, ios, uiview, uiimageview, subview

“if”条件在第一个循环中有效，但在第二个循环中无效我不明白为什么它不想在第二个循环中检查我的条件以及为什么它只在第一个循环中有效

```
for (UIView *view in dro.subviews) {
    for (TOJDropableButtonView *v in view.subviews) {
        if ([v.type isEqualToString:targetView.filterItem.searchFilterItem.type]){
            NSLog(@"%@", targetView.filterItem.searchFilterItem.type);
        }
    }
}

-[UIImageView type]: unrecognized selector sent to instance 0x161bb960
2012-12-11 20:18:00.985 HungryNow[2507:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImageView type]: unrecognized selector sent to instance 0x161bb960'
*** First throw call stack:
(0x1790012 0x149de7e 0x181b4bd 0x177fbbc 0x177f94e 0x1f401 0x2fe45 0x2ec6c 0x14b1705 0x4f2f4c 0x4f2fbc 0x41833f 0x418552 0x3f63aa 0x3e7cf8 0x27f2df9 0x27f2ad0 0x1705bf5 0x1705962 0x1736bb6 0x1735f44 0x1735e1b 0x27f17e3 0x27f1668 0x3e565c 0x24ad 0x23d5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:31:42.037

您正在将所有子视图投射到 TOJDropableButtonView。

但实际上，dro 有一些不属于 TOJDropableButtonView 类的子视图。dro 的子视图之一恰好是一个图像视图，它没有“类型”属性，您试图在 equalToString 行中访问它。

确保您感兴趣的子视图属于 TOJDropableButtonView 类，而不是将所有子视图类型转换为 TOJDropableButtonView。

下面的代码应该可以解决您的问题。

```
for (UIView *view in dro.subviews) {
    for (UIView *v in view.subviews) {
        if([v isKindOfClass:[TOJDropableButtonView class]]){
            if ([v.type isEqualToString:targetView.filterItem.searchFilterItem.type]){
               NSLog(@"%@", targetView.filterItem.searchFilterItem.type);
            }
        }
    }
} 
```

# javascript - 向我的轮播添加分页（jQuery）

> ID：13827062
> 
> 赞同：0
> 
> 时间：2012-12-11T19:26:05.660
> 
> 标签：javascript, jquery, html, css

我正在尝试向我的轮播添加一个简单的指标。目前，指标的数量不必动态生成。我正在尝试复制[BBC](http://www.bbc.com/)主页上的轮播。

BBC 网站上的指标是右上角的那些橙色点。我不在乎让点成为相应幻灯片的链接，我只想让点根据您单击“上一个”或“下一个”循环

例如：（o = 指标）

```
<prev      [IMGS]      next>
           o o o 
```

我的 jsFiddle：http: [//jsfiddle.net/yTKyU/](http://jsfiddle.net/yTKyU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:22:53.950

查看更新的小提琴：http: [//jsfiddle.net/yTKyU/1/](http://jsfiddle.net/yTKyU/1/)

```
$(document).ready(function() {

//rotation speed and timer
var speed = 5000;
var run = setInterval('rotate()', speed);

//calculate width dynamically for responsive design
var starting_width = $('#slides ul li').width($('#slides').outerWidth());

//grab the width and calculate left value
var item_width = $('#slides ul li').outerWidth();
var left_value = item_width * (-1);

//move the last item before first item, just in case user click prev button
$('#slides ul li:first').before($('#slides ul li:last'));

//set the default item to the correct position 
$('#slides ul').css({
    'left': left_value
});

//if user clicked on prev button
$('#prev').click(function() {

    //get the right position            
    var left_indent = parseInt($('#slides ul').css('left')) + item_width;

    //slide the item            
    $('#slides ul:not(:animated)').animate({
        'left': left_indent
    }, 200, function() {

        //move the last item and put it as first item                
        $('#slides ul li:first').before($('#slides ul li:last'));

        //set the default item to correct position
        $('#slides ul').css({
            'left': left_value
        });

    });
    if ($('#pagination li span.current').parent().is(':first-child')) {
        $('#pagination li span.current').removeClass('current');
      $('#pagination li:last-child').children().addClass('current');
    } else {
    $('#pagination li span.current').parent().prev().children().addClass('current').addClass('new');
    $('#pagination li span.current').removeClass('current');
    $('#pagination li span.new').addClass('current').removeClass('new');
}
    //cancel the link behavior            
    return false;

});

//if user clicked on next button
$('#next').click(function() {

    //get the right position
    var left_indent = parseInt($('#slides ul').css('left')) - item_width;

    //slide the item
    $('#slides ul:not(:animated)').animate({
        'left': left_indent
    }, 200, function() {

        //move the first item and put it as last item
        $('#slides ul li:last').after($('#slides ul li:first'));

        //set the default item to correct position
        $('#slides ul').css({
            'left': left_value
        });

    });

    //change the itemlist class
    if ($('#pagination li span.current').parent().is(':last-child')) {
        $('#pagination li span.current').removeClass('current');
      $('#pagination li:first-child').children().addClass('current');
    } else {
        $('#pagination li span.current').parent().next().children().addClass('current').addClass('new');
        $('#pagination li span.current').removeClass('current');
        $('#pagination li span.new').addClass('current').removeClass('new');
    }
    //cancel the link behavior
    return false;

});

//if mouse hover, pause the auto rotation, otherwise rotate it
$('#slides').hover(

function() {
    clearInterval(run);
}, function() {
    run = setInterval('rotate()', speed);
});

});

//function to click next link
//a timer will call this function, and the rotation will begin :)  

function rotate() {
$('#next').click();
}​ 
```

# php - 试图让 PHP 将 html 发送到服务器中间脚本

> ID：13827065
> 
> 赞同：1
> 
> 时间：2012-12-11T19:26:08.853
> 
> 标签：php, javascript, html

我试图让我知道 PHP 脚本在执行过程中的位置的“加载消息”；为了做到这一点，我试图在整个过程中回显 HTML/javascript 标记，但在脚本的其余部分运行之前，没有一个回显正在执行。除了使用 AJAX 之外，还有什么办法可以解决这个问题，还是仅仅是野兽的本性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:33:37.530

Ajax 听起来像是要走的路。使用一个请求启动大操作，并使用另一个请求定期轮询。

不过，值得注意的一件事是，如果您使用会话：PHP 的默认会话处理程序会在 session_start 上阻塞，因此您无法处理同一会话的两个请求。第二个将等到第一个会话关闭。如果您的轮询直到您的大操作完成后才返回响应，您将不得不解决这个问题。

如果操作真的很大，请考虑在后台而不是在请求期间运行它。您可以每隔一秒左右刷新一次进度页面。不是很优雅，但可能更容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:04:57.810

您可以使用`flush`or `ob_flush`（在第一次开始使用 之后`ob_start`） - 但是不同的浏览器将以不同的方式处理发送给它们的早期内容。一条一直是正确的规则（我最近没有检查过）是大多数浏览器在收到一定数量的字节之前不会开始渲染任何东西。

现在，如您所知，有更好的方法可以做到这一点。阿贾克斯可能是最好的。但是，我在许多后端管理脚本中使用了这个系统，效果很好。基本上，首先请执行以下操作：

```
ob_start();
echo strpad('', 1024, ' ');
ob_flush();
echo '<script>updateProgress(0.1);</script>';ob_flush();
/// do something else
echo '<script>updateProgress(0.2);</script>';ob_flush();
/// do something else...
echo '<script>updateProgress(0.3);</script>';ob_flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:01:29.890

我建议用 AJAX 做这两个请求。第一个请求将一直有效，直到工作完成。第二个请求将每隔几秒重复一次，从数据库中提取数据并以 JSON 格式回显进度，然后由 JavaScript 解析并更新进度。你甚至可以在上面做一些进度条！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:30:32.300

您可以让脚本从您的服务器请求另一个文件，并在 GET 中传递信息。但我不会向任何人推荐这个。除了调试之外，它基本上没用。

这甚至无法使用 ajax 完成，因为 php 完全在服务器上执行。Ajax 请求是从用户的浏览器执行的。

完成此操作的另一种方法是在进行时进行 sql 插入。

编辑：如果您想要实时获取此信息。实现起来并不容易。您需要将我在上面发布的内容与 ajax 混合以在另一个页面中请求信息。

# c# - 在具有特定值的字典中获取第一个 KeyValuePair

> ID：13827067
> 
> 赞同：3
> 
> 时间：2012-12-11T19:26:20.967
> 
> 标签：c#, .net, dictionary, iteration, key-value

我正在用 C#/.NET 4.5 编写一个应用程序，并且我有一个这样定义的字典：

```
Dictionary<int, string> d = new Dictionary<int, string>(); 
```

我的整数键是连续且唯一的，除了空字符串，我的值也是唯一的。例如：

```
Key     Value
  0     AAAAAAAAAA
  1     BBBBBB
  2     (empty string)
  3     CCCCCCCCCCCCCCCCCCCCCCCC
  4     DDDDDDDDDDDDDDD
  5     EEEEEEEEEEEEEEEEEEE
  6     (empty string) 
```

当我有一个新字符串要添加到字典中时，我需要将它分配给值为（空字符串）的键之一。理想情况下，我想在这样的密钥的第一个实例中执行此操作。我目前正在像这样循环浏览我的字典：

```
int keyNumber;

foreach (KeyValuePair<int, string> pair in d)
{
    if (pair.Value == string.Empty)
    {
        keyNumber = pair.Key;
        break;
    }
}

d[keyNumber] = "new string goes here!"; 
```

这行得通，但是有没有更好（或更快）的方法来完成同样的事情？如果这实际上是最好的方法，是否可以将其缩短为 LINQ 表达式？

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------------------

我遗漏了可能需要解释的重要内容。加载到我的字典中的值实际上是从包含固定长度字节数组的二进制文件中加载的，这些字节数组包含 ASCII 字符串。该文件将始终由 5000000 字节或 100000 个字符串组成，每个字符串 50 个字节。文件结构由将使用文件的设备上的一些硬件限制决定。因此，我的字典中每个 KeyValuePair 的键实际上用于确定文件的偏移量，当用户完成更改时，我需要在其中写入任何更改。例如，使用 4 的键，然后我乘以 50 到 200 字节的起始偏移量。然后我将修改后的字符串写回到那个位置。很抱歉在我的原始帖子中省略了这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:29:23.680

```
d[d.FirstOrDefault(x => string.IsNullOrEmpty(x.Value)).Key] = "My String"; 
```

但是，字典实际上是用来存储真正的键值对的。列表听起来更适合您的情况，您似乎只需要存储值。即便如此，列表元素仍然可以通过索引访问，并且您可以包含空元素，因此（根据您所说）似乎没有理由坚持使用字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:34:50.663

A`Dictionary`可能不是您尝试做的事情的最佳选择。尝试一个简单`List<>`的或一个数组。

A`Dictionary`是将一个唯一值映射到另一个非唯一值的优化方法。如果您尝试做更多的事情，那么您最好实现自己的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:35:04.793

如果您知道会有一个带有空字符串值的条目，您可以使用：

```
var kvp = d.First(p => p.Value == string.Empty);
d[kvp.Key] = "new string goes here!"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T19:39:49.060

正如评论所说，我不推荐它，您应该使用列表。但这里有两个例子：

```
 Dictionary<int, string> d = new Dictionary<int, string>();
  string valueToBeInserted = "randomstring";
  var keyValuePair = d.FirstOrDefault(c => c.Value == string.Empty);
  d[keyValuePair.Key] = valueToBeInserted; 
```

简化：

```
 Dictionary<int, string> d = new Dictionary<int, string>();
 string valueToBeInserted = "randomstring";
 d[d.FirstOrDefault(c => c.Value == string.Empty).Key] = valueToBeInserted; 
```

# android - 有意播放视频并返回我的应用

> ID：13827076
> 
> 赞同：0
> 
> 时间：2012-12-11T19:27:21.457
> 
> 标签：android, video, image

是否可以打开带有意图的视频，观看它然后返回我的活动，或者更好的方法是在我的应用程序中实现 videoview？我问这个是因为 videoview 只能打开一些扩展，这限制了我对视频格式的选择。我需要一个接一个地显示一个或两个视频，也许还有一张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:36:14.820

你有没有尝试过这样的事情

```
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(Uri.parse("http://www.yourvideo.mp4"), "video/mp4"); 
view.getContext().startActivity(intent); 
```

或者

```
tostart = new Intent(Intent.ACTION_VIEW);
tostart.setDataAndType(Uri.parse(movieurl), "video/*");
startActivity(tostart); 
```

# sql - 通过 ssis 中的 OLE DB 转换进行更新

> ID：13827084
> 
> 赞同：0
> 
> 时间：2012-12-11T19:27:48.680
> 
> 标签：sql, sql-server, sql-server-2008, ssis

如何使用包中的内联 strean 数据更新表？

ole db source---> Conditional Filter---> Products --> ind(database table)

```
 A             1 to 0

                                       B             1 to 0

                                       C             1 to 0 
```

这里过滤条件将输入记录过滤成三个不同的产品（A，B，C）并根据p_id，我必须更新控制表中的ind？

我可以在不碰桌子的情况下做到这一点吗？如何在这里使用 OLE DB 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:11:07.827

我发现您的问题令人困惑，但我会试一试：

将 OLE DB 命令转换添加到您的数据流。编写一个参数化的 SQL 语句，例如

更新控制集 ind = ? p_id = 哪里？

将您的数据流列映射到参数。

# r - 矩形维恩图

> ID：13827086
> 
> 赞同：1
> 
> 时间：2012-12-11T19:27:52.187
> 
> 标签：r, venn-diagram

有没有办法在 R 中将以下维恩图绘制为正方形而不是圆形？

```
venn.plot <- draw.triple.venn(1883,598,2151,218,221,611,95, c("AL", "RL", "R"),scale=TRUE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:44:18.953

`draw.triple.venn`确实返回“...一个 gList 类的对象，其中包含构成图表的网格对象。除非用 ind = FALSE 指定，否则还会在图形设备中显示图表。Grid::grid.draw 可用于绘制 gList 对象在图形设备中。” （来自 VennDiagram 帮助文件），因此通过对该对象的组件进行一些创造性的编辑，您可能能够绘制正方形而不是圆形。

（注意：请删除我不小心写的匿名编辑）这是这样做的方法。不要告诉我的老板我浪费时间挖掘这个黑客。

```
Rgames> hack.plot[[6]]$x<-unit(c(.25,.75,.75,.25),unit='npc')
Rgames> hack.plot[[6]]$y <-unit(c(.25,.25,.75,.75),unit='npc') 
```

为了正确放置正方形，那些坐标应该是`range(as.numeric(hack.plot[[6]]$x))`等等。我相信这三个圆圈位于插槽 6、7 和 8 中。

# c# - Casting Linq Query Results to an Interface

> ID：13827091
> 
> 赞同：4
> 
> 时间：2012-12-11T19:28:15.217
> 
> 标签：c#, linq, interface

I'm trying to write a Linq (to Objects) query that casts the results to an interface, as shown below:

```
 var data = (from row in CicApplication.Vaporizer473Cache
                where row.Coater == coater
                select row).Cast<IVaporizerData>(); 
```

This appears to be the only way to do this, because I cannot create an instance of the interface in the select. I have two questions:

1.  How is the cast actually done? Will it find each property in the source and copy its value to the interface property with the same name?

2.  I have a property in my interface that isn't contained in the source, but I would like to somehow set its value during this operation. Is this possible? Or do I need to do it after the query, in a for each statement?

If it helps, the class definition for the source of the data (Vaporizer473Cache) looks as follows. The interface is very similiar.

```
internal class Vaporizer473
{
    /// <summary>
    /// Gets or sets the Coater property
    /// </summary>
    public string Coater { get; set; }

    /// <summary>
    /// Gets or sets the CoaterTime property
    /// </summary>
    public DateTime? CoaterTime { get; set; }

    /// <summary>
    /// Gets or sets the TemperatureLeftTubeA property
    /// </summary>
    public double? TemperatureLeftTubeA { get; set; }

    /// <summary>
    /// Gets or sets the TemperatureLeftTubeB property
    /// </summary>
    public double? TemperatureLeftTubeB { get; set; }

    /// <summary>
    /// Gets or sets the TemperatureRightTubeA property
    /// </summary>
    public double? TemperatureRightTubeA { get; set; }

    /// <summary>
    /// Gets or sets the TemperatureRightTubeB property
    /// </summary>
    public double? TemperatureRightTubeB { get; set; } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:32:32.117

即使编译器不会抱怨您提供的语法，它也不会运行。您不能将对象强制转换为它未实现的接口。

Cast 方法只是一种方便的方法，它尝试将给定`IEnumerable`中的每个对象转换为您提供的泛型类型。如果 Vaporizer473*确实*实现了`IVaporizerData`，那么您可以很容易地说：

```
var data = from row in CicApplication.Vaporizer473Cache
           where row.Coater == coater
           select (IVaporizerData)row; 
```

第二：

> 我的界面中有一个不包含在源代码中的属性，但我想在此操作期间以某种方式设置它的值。这可能吗？还是我需要在查询之后，在每个语句中执行它？

正如您现在所知道的，您的类将必须在您的接口中实现该属性。（您可以[明确地](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)执行此操作，这样它就不会在您的实际类实现等上挤满智能感知。）*可以*通过使用复杂的`Select`委托来设置值，但这不是 LINQ 的用途，我会高度劝阻它。在这种情况下，`for`循环是合适的做法。

请记住，如果您修改来自缓存的项目，您将修改原始对象而不是它们的克隆。这可能会产生深远的影响。您可能希望创建新对象来表示您正在寻找的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:35:07.213

1.  非常简单。*将*一个对象转换为另一种类型并不意味着创建了另一个对象。对同一对象的不同“视图”很简单。你的类必须实现接口才能做到这一点。所以演员表意味着相同的对象仍然在可枚举中。

2.  由于在转换对象时不会创建新对象，因此无法设置接口的额外属性的值。但这也意味着您已经在对象中拥有该属性，因为您的对象正在实现接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:35:25.343

要回答您的第一个问题，是的，这就是它的完成方式。但是，查看您的代码，`Vaporizer473`该类似乎没有实现`IVaporizorData`. 假设这只是一个疏忽？如果没有，您需要实现该接口才能使`Cast<>()`调用正常工作。

至于你的第二个问题，是的，你可以在之后将它设置在一个 for-each 块中，或者你可以使用 a`Select`来设置属性并进行强制转换，如下所示：

```
CicApplication.Vaporizer473Cache
.Where( r => r.Coater = coater)
.Select((r) => {
   r.SomeProperty = somevalue;
   return r as IVaporizerData
}); 
```

# vim - 在 vim 中逐步选择“内部”和/或“外部”代码块

> ID：13827092
> 
> 赞同：31
> 
> 时间：2012-12-11T19:28:16.523
> 
> 标签：vim, vi

我可以使用 vim 命令，如`v``a``}`或`v``i``]`自动选择括号、方括号等内的所有内容。

一旦我有了这样的选择，有没有办法选择该类型的下一个最外面的选择？（然后从那里，回到下一个“最里面”？）

我 99.9% 确信我曾经知道如何做到这一点——但在任何地方都找不到或弄明白！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-11T20:13:39.737

只需重复对象选择键。对于您的示例，这将是`va}a}`or `vi]i]`。

我认为没有办法将选择减少回内部块。除了用于`Esc`清除选择之外，````还可以跳回您的起始位置，然后重做初始选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-18T18:06:15.243

我知道它有点过时了，但你是在谈论[vim-expand-region](https://github.com/terryma/vim-expand-region)插件吗？

反正我还是比较喜欢qqx的方式，因为已经内置了。

# ruby - 如何在 Ruby 中为外部应用程序编写高效的包装器？

> ID：13827094
> 
> 赞同：0
> 
> 时间：2012-12-11T19:28:32.157
> 
> 标签：ruby, external, wrapper

我有这个用 C 语言编写的外部应用程序，它在命令行上调用，如下所示：

```
 app [options] <metadata file> < <input file> > <output file> 
```

元数据基本上是一个文本字符串，输入和输出数据基本上是表格文本。

我想在 Ruby 的紧密循环中运行这个应用程序。我怎样才能最有效地做到这一点？我想将输入和输出数据保存在内存中，并且我想避免每次循环时将元数据写入磁盘以避免磁盘 IO 开销——这似乎与 popen/popen3 解决方案相冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:04:32.807

如果您可以访问 C 代码，那么很容易重新连接它以从 STDIN 获取其输入并将其传递给 JSON 字符串以使其收集所需的元数据和输入。输出可以保持现在的任何格式，或者如果需要也可以是 JSON。

如果您无权访问代码，您将不得不在该应用程序的限制范围内工作，这意味着从磁盘读取。您可以尝试使用输入和输出文件的管道或 Unix 套接字来欺骗应用程序，但我怀疑它可能仍会在途中作为临时缓冲区或缓存撞到磁盘的某个地方。

我认为您最好的选择是在 superuser.com 上询问如何欺骗应用程序从非磁盘文件中读取其输入和元数据。

* * *

另一个想法是，如果您有 C 应用程序的代码，您可以从 Ruby 和 C 代码读取/写入内存缓存存储，这将为您提供非常快速的 I/O。

# c - 如何编译和运行这个 1989 年编写的 C 程序？

> ID：13827096
> 
> 赞同：8
> 
> 时间：2012-12-11T19:28:42.500
> 
> 标签：c, gcc, compiler-construction, vm-implementation

我发现了 Arthur Whitney 的这部惊人的作品 - [http://www.jsoftware.com/jwiki/Essays/Incunabulum](http://www.jsoftware.com/jwiki/Essays/Incunabulum)

它编译时带有一些警告

```
$ gcc-4.7 incuna.c -o incuna.o
incuna.c: In function 'ma':
incuna.c:8:15: warning: incompatible implicit declaration of built-in function 'malloc' [enabled by default]
incuna.c: In function 'pi':
incuna.c:26:7: warning: incompatible implicit declaration of built-in function 'printf' [enabled by default]
incuna.c: In function 'nl':
incuna.c:26:24: warning: incompatible implicit declaration of built-in function 'printf' [enabled by default]
incuna.c: In function 'pr':
incuna.c:28:10: warning: incompatible implicit declaration of built-in function 'printf' [enabled by default]
incuna.c: In function 'ex':
incuna.c:35:36: warning: assignment makes integer from pointer without a cast [enabled by default]
incuna.c:35:25: warning: return makes pointer from integer without a cast [enabled by default]
incuna.c: In function 'noun':
incuna.c:37:57: warning: return makes integer from pointer without a cast [enabled by default]
incuna.c: In function 'wd':
incuna.c:39:21: warning: incompatible implicit declaration of built-in function 'strlen' [enabled by default] 
```

但它在输入基本输入时出现段错误`1 + 1`。

```
./incuna.o
warning: this program uses gets(), which is unsafe.
1 + 1
[1]    11525 segmentation fault  ./incuna.o 
```

我猜这与自 1989 年以来 C 编译器的差异有关。

我怎么能运行这个？我可以在最近的 Linux/Mac 上使用它吗？还是在 VirtualBox VM 上？还是别的什么？

我的谷歌搜索结果没有任何相关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T19:40:04.553

它将指针转换为`int`和`long`反之亦然。这与它们具有不同大小的 64 位体系结构不同。

为 32 位目标编译它。例如，在 Mac OS X 上使用 clang/LLVM 使用“-arch i386”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:33:07.697

我敢打赌它是因为这个而出现段错误的：

> incuna.c:8:15：警告：内置函数“malloc”的隐式声明不兼容 [默认启用]

如果 malloc 未声明，那么它不会为您分配内存，您最终会取消引用 null，这可能导致段错误。

包括后：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h> 
```

`printf()`、`malloc()`和的警告`strlen()`消失了。如果您输入以下内容，代码将运行并工作：

```
1+1 
```

注意***间距***在这里很重要：

```
1 + 1 
```

会段错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T20:19:08.163

仅通过预处理器运行它：

gcc -E interp.c > interp-pp.c

然后在编辑器中美化它，然后使用调试器来观察它的作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-18T06:55:58.580

在我的系统（AMD64 Win 8）上，似乎指针值通常设置了最高位，因此将指针视为整数（该程序会这样做）会出现异常并崩溃。

更改`qv(a)`函数（“查询动词”）允许程序运行：

```
qv(a){R a<'a';} 
```

应该

```
qv(a){R a<'a'&&a>0;} 
```

或者

```
qv(a)unsigned a;{R a<'a';} 
```

这是一个[最小修改版本](https://github.com/luser-dr00g/inca/commit/3e81b6e4d9b6cb73eefd1dc3b04036a4de7f8cd6)的链接，它应该在没有警告的情况下编译（使用 gcc，默认选项）并执行（使用正确的输入）。

# r - ggplot2 y 值的间距

> ID：13827098
> 
> 赞同：2
> 
> 时间：2012-12-11T19:28:47.337
> 
> 标签：r, ggplot2

我正在尝试在 ggplot2 中创建一个情节。以下是名为 problem_accept_df 的数据：

```
Order Application probscore
1  Integrated 0.8333333
1      Tabbed 0.7777778
2  Integrated 0.8965517
2      Tabbed 0.7777778
3  Integrated 0.7931034
3      Tabbed 0.7777778
4  Integrated       0.7
4      Tabbed 0.6538462
5  Integrated 0.9285714
5      Tabbed 0.8333333
6  Integrated 0.9310345
6      Tabbed 0.8148148
7  Integrated 0.8571429
7      Tabbed 0.8518519
8  Integrated 0.9333333
8      Tabbed 0.6923077
9  Integrated 0.9310345
9      Tabbed 0.8461538
10  Integrated 0.9285714
10      Tabbed       0.8 
```

这是创建情节的代码：

```
ggplot(problem_accept_df, aes(x=Order, y=probscore, color=Application,
group=Application)) + 
xlab('Order') +
ylab('Problem scores') +
geom_line(position=pd, size=2) +
geom_point(position=pd, size=4) +
labs(title='Acceptable proportion of problem scores') 
```

绘图已创建，但 y 值显示在等间距的刻度线上，即使这些值不是等间距的。该图还显示每个单独的 y 值而不是范围。我试图改变它 ( `scale_y_continuous(breaks=seq(0.5, 1, 0.1))`) 但我收到错误消息`Error: Discrete value supplied to continuous scale`，所以问题必须更基本。我将不胜感激有关该做什么的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:41:38.423

如果数据（在您的情况下`probscore`）是一个因素而不是连续变量，通常会发生这种情况。

```
> d <- data.frame(x=c(0,1), y=factor(c(0.5, 1.5)))
> d
  x   y
1 0 0.5
2 1 1.5
> levels(d$x)
NULL
> levels(d$y)
[1] "0.5" "1.5"
> library(ggplot2)
> ggplot(d, aes(x=x, y=y)) + geom_point() + scale_y_continuous()
Error: Discrete value supplied to continuous scale
> ggplot(d, aes(x=x, y=as.numeric(as.character(y)))) + geom_point() + scale_y_continuous() 
```

# iphone - 如何在 iPhone 上进行位置跟踪比一直打开 GPS 更有效？

> ID：13827099
> 
> 赞同：5
> 
> 时间：2012-12-11T19:28:54.387
> 
> 标签：iphone, ios, geolocation, gps

我正在为 iPhone (iOS 6) 开发一个定位应用程序，它不断向网络服务发送准确的位置信息。我进行了设置，以便应用程序每分钟发送一个位置数据包（只要位置发生重大变化）。应用程序的这一部分运行良好（作为后台任务），但正如您可能期望的那样，它会显着影响电池寿命，让 GPS 一直处于开启状态（我得到大约 6 小时，这还不错，因为我习惯于插电在我的手机在车里和在家的时候，这样我就可以度过一天了，但我需要将它延长到至少 16 小时才能实用）。

我想做的是在手机显示一段时间没有明显移动时关闭 GPS。使用 GPS 数据本身很容易做到这一点。但是，在 GPS 关闭的情况下，我可以使用什么作为触发器来重新打开它并重新启动位置发布？我可以在感应到 5 分钟内没有生成新头寸时将其关闭，然后在 X 分钟后检查头寸以查看它是否已更改，并采取相应措施。或者，也许我可以以某种巧妙的方式使用加速度计或其他传感器来触发再次打开 GPS。

鉴于旅行时间通常是一天中的一小部分，在家中或办公室时尽量减少 GPS 活动是有意义的……但如何可靠地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:03:21.433

我可能考虑的模型是使用[标准位置服务](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW7)来获取我的位置，一旦我得到了它，就关闭它并打开耗电量少得多的[显着变化位置服务。](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW8)而且，一旦我收到后续的重大更改通知（您可能想忽略第一个，因为您已经有了准确的位置），您可以再次打开标准位置服务以获得准确的位置（假设您完全需要它...... . 如果您不需要超级准确的位置，您显然只需从一开始就使用重大更改位置服务）。

或者，如果您这样做并且仍然使用过多电量，您可以完全关闭定位服务，然后在一定时间后重新打开，但您可能会在此期间丢失重大的位置更改，如果用户根本不动，在许多情况下它会比上述技术使用更多的功率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:45:04.977

这不是一个完整的答案，但完全使用 GPS 的替代方法是惯性航位（推断）推算。这可以仅使用加速度计和陀螺仪（以及一些聪明的数学）来实现，偶尔使用 GPS 作为检查。我不知道这种方法有多准确，或者它对电池时间的影响是什么......我会在我实施它时告诉你;-)

尽管[Android 加速度计精度（惯性导航）](https://stackoverflow.com/questions/7829097/android-accelerometer-accuracy-inertial-navigation)似乎表明它不值得付出努力，但我认为这仅使用加速度计，而不使用陀螺仪 - 这两种设备提供了不同的运动方面：[陀螺仪与加速度计?](https://stackoverflow.com/questions/3089917/gyroscope-vs-accelerometer) .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:33:55.353

如果您不担心关闭 GPS 几分钟会导致精度下降，那么您可以考虑完全关闭它。手机信号塔定位机制工作正常，尽管它定位到可能有一段距离的信号塔。但是，在几分钟之内，无论如何都很容易走那么远。而且做基站的网络定位器也做wifi网络，精度在20m左右。而且 GPS 无论如何都不能在室内工作。因此，请始终关闭 GPS，并始终打开网络位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T23:36:03.193

我的应用程序（正在开发中）在后台运行 8 小时，每秒将一个修复记录到文件中。够了，不会好转的。您不能同时拥有 GPS 精度和 20 小时电池。
6 小时，这也可能是由服务器通信（或使设备经常启用）引起的。

但是一个有趣的方法可能是运动传感器，但它需要多少电池是一个很好的问题。
你知道任何可以记录精确 GPS 超过 8 小时的 iPhone 应用程序吗？我从未测量过，但尝试 MotionX gps，它们可以记录多长时间。

# jquery - 通过 jQuery 修改的表单 - 无法检索多个字段值

> ID：13827101
> 
> 赞同：1
> 
> 时间：2012-12-11T19:28:58.250
> 
> 标签：jquery, forms, dom, live, each

尝试从 jQuery 表单获取多个字段时遇到一些问题。

我使用表单来创建项目。任务的数量没有预定义，因此可以通过 jQuery 动态创建用于添加新任务的新表单字段：

***HTML 表格***

```
<form action="#" id="createProjectForm" method="post">
<fieldset id="Project">
<label for="title">Title:</label>
<label for="title">Coordinator:</label>
<input type="text" id="coordinator" name="coordinator" placeholder="COORDINATOR" />         
<div id="tasks">
<hr/>
<label for="taskTitle">Task:</label>
<input type="text" id="taskTitle" name="taskTitle" placeholder="TASK TITLE" />
</div>
<label for="createTask"></label>            
<input type="button" id="createTask" value="ADD NEW TASK" />
<label for="submitTask"></label>            
<input type="submit" id="submitTask" value="SAVE AND CREATE PROJECT" />
</form> 
```

***查询***

```
$("#createTask").live("click",function() {                  
$('#tasks').clone().insertAfter("#tasks");
}); 
```

当我克隆 div“任务”时，我可以正确地看到新任务的两个“taskTitle”输入字段，但是在尝试获取值时（使用“每个”）：

***查询***

```
$("#createProjectForm").live("submit",function() {
var taskTitles = "";
$("#taskTitle").each(function(){
taskTitles += $.trim($(this).val()) + ",";
console.log("Task: "+taskTitles);
}); 
```

我只得到第一个字段的值，而不是第二个字段的值，就像它没有正确存储在 DOM 中一样......

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:34:48.630

当您克隆具有 id 的项目时，克隆的项目将获得相同的 id。Jquery 的 id 选择器只选择第一个匹配项。（见这里[http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)）

# ruby - 带有 Ruby、Thin 和 EventMachine 的 SIP TCP/IP 套接字

> ID：13827103
> 
> 赞同：0
> 
> 时间：2012-12-11T19:29:05.553
> 
> 标签：ruby, sockets, tcp, sip, eventmachine

我对套接字和 SIP 非常陌生，但我想创建一个 SIP 应用程序，我确信我有足够的编程经验，但我只需要向前推进即可开始。

问题是我没有从套接字得到响应，我只是不知道如何调试它。我在 12connect 创建了一个帐户，并获得了 SIP 服务器登录信息。现在，当我发送我们需要从 SIP 连接开始的“注册”消息时，它什么也不做。这是我用来发送消息的代码：

```
require 'tilt'

module Speaker

  HOST = "**.***.**.**"
  PORT = 5060

  SIP_HOST = "vpbx.12connect.com"
  SIP_USER = "username"
  SIP_PASS = "*********"

  class SIPServer

    def initialize

      EM.connect SIP_HOST, PORT, Speaker::SIPClient

    end

  end

  class SIPClient < EventMachine::Connection

    def post_init

      output = Tilt::ERBTemplate.new('tcp/register.erb').render(template_attributes)
      puts "\nSending: \n#{output}"
      send_data output

    end

    def receive_data data

      puts "From EM Socket: \n"+ data.to_s

    end

    def template_attributes
      {
        host: Speaker::HOST,
        port: Speaker::PORT,

        sip_host: Speaker::SIP_HOST,
        sip_user: Speaker::SIP_USER,
        sip_pass: Speaker::SIP_PASS
      }
    end

  end
end 
```

这是发送的消息：

```
REGISTER sips:vpbx.12connect.com SIP/2.0
CSeq: 1 REGISTER
Via: SIP/2.0/TCP **.**.**.**:5060
From: <sips:username@vpbx.12connect.com>
To: <sips:username@vpbx.12connect.com>
Contact: <sips:username@**.***.**.**:5060>
Allow: INVITE,ACK,OPTIONS,BYE,CANCEL,SUBSCRIBE,NOTIFY,REFER,MESSAGE,INFO,PING
Expires: 3600
Content-Length: 0
Max-Forwards: 70 
```

我在本地运行应用程序并将 5060 端口转发到运行此应用程序的 Mac。

**编辑：**

我在网络层看到的是从端口 50206 和 5060 到端口的 12 个 TCP 包。这些包从我的计算机本地 IP 到我的家庭 IP。还有 1 个从端口 50205 到 5060 的包，这个包来自我的计算机本地 IP 到 193.67.129.180 (vpbx.12connect.com)。12肯定是我发的测试信息，第二个就是上面说的信息。。

另一个值得注意的事情是 12 个包都经过了两个，一个校验和错误，一个校验和良好，其余两个相同。

谁能告诉我我在这里遗漏了一些东西，我尝试了很多不同的东西，但据我所知，这正是它需要完成的方式..？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:06:01.827

要在两台机器之间建立连接，需要两个地址和两个端口。

从您的代码：

*   服务器：`vpbx.12connect.com:5060`
*   客户：`**.***.**.**:?`

客户端端口通常由操作系统选择，因此可能不是 5060。

要么您以某种方式获得使用的客户端端口，并在 SIP 消息中传达此端口，要么您在您的机器上打开一个服务器，然后您可以将其绑定到特定端口（例如 5060）。

对于 SIP，我建议使用服务器方法，因为您必须在 (INVITES) 之前在不连接到服务器的情况下接收消息。

# excel - Apple 脚本 - 以 unicode 保存韩文文件名

> ID：13827104
> 
> 赞同：3
> 
> 时间：2012-12-11T19:29:07.930
> 
> 标签：excel, macos, applescript

我正在尝试将多个 excel 文件保存到 .csv 文件中。另外，我想将每个excel文件的名称作为一个单元格放在每个文件中。问题是我的文件名是韩文，当我把文件名放在文件中时，字母被破坏了。我想出的一个可能的解决方案是将韩文文件名转换为 unicode，但不知道如何。以下是我使用的代码。谢谢。

```
set theFolder to choose folder with prompt "Choose the folder that contains your Excel files"
tell application "Finder" to set theFiles to (files of theFolder)
set fileCount to count theFiles
repeat with i from 1 to fileCount
set fName to text 1 thru -5 of ((name of item i of theFiles) as text)
if ((name of item i of theFiles) as text) ends with ".xls" then
    set tName to (theFolder as text) & fName & ".csv"
    tell application "Microsoft Excel"
        activate
        open (item i of theFiles) as text
        insert into range column 1 of active sheet
        set lastcell to last cell of used range of active sheet
        set value of range ("A1:A" & first row index of lastcell) of active sheet to fName
        save fName in tName as CSV file format
        close active workbook without saving
    end tell
end if
end repeat 
```

# entity-framework-5 - 实体框架 5.0 从 4.0 升级现在不能像以前一样在视图状态中存储实体 - 序列化值时出错

> ID：13827106
> 
> 赞同：0
> 
> 时间：2012-12-11T19:29:16.103
> 
> 标签：entity-framework-5

我有一个大型的工作 vb.net + .NET 4.0 + EF 4.0 应用程序，在某些网页上会在回发之间的视图状态中存储一个实体。现在升级到 EF 5.0 后，我在程序集 'EntityFrameworkDynamicProxies-MyProj, Version=1.0.0.0, CultureKeyToken=neutral', Public未标记为可序列化”

我需要做什么才能让我的应用程序再次运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:45:32.107

我有同样的问题，我有一个使用 EF 4.3 的 ASP.NET Web 应用程序，我决定升级到 EF 5，现在我不能像以前一样将 EF 对象存储到 viestate，因为它总是会引发错误序列化值。有关更多信息，让我解释一下我为什么这样做。在应用程序中，当您要更新对象时，您从列表中选择它，应用程序加载 EF 对象并填写表单，然后将此对象存储在视图状态中......当您要保存更改时，应用程序会采用先前加载的来自视图状态的对象并修改值然后保存更改...我认为它比加载对象以填写表单然后再次加载对象以保存更改更好...任何建议将不胜感激... PD：对不起我的英语，我尽力而为。

# actionscript-3 - 验证复选框是否被选中

> ID：13827114
> 
> 赞同：1
> 
> 时间：2012-12-11T19:30:04.263
> 
> 标签：actionscript-3, flash, checkbox, selected

我正在用 Flash 开发一个简单的程序……我遇到了复选框问题……我已经在这里搜索过，我发现一个主题说我需要什么，但我不明白该怎么做。

这是问题 [Checkbox as3 功能](https://stackoverflow.com/questions/7955198/checkbox-as3-function)

与此问题类似...我需要验证是否选择了我的 232 个复选框...即使按下按钮或是否选择了按钮。

任何人都可以帮助我吗？

```
var select:Array = new Array();
var perguntas:Array = new Array("Ch1","Ch2","Ch3","Ch4","Ch5","Ch6","Ch7","Ch8","Ch9","Ch10",);
var resposta1:Array = new Array("1","0","1","0","0","0","0","0","1","1"."0");
var resposta2:Array = new Array("1","1","0","1","0","1","0","1","0","1","1");
var resposta3:Array = new Array("1","0","0","0","0","0","0","0","0","0","0");
var resposta4:Array = new Array("0","1","0","0","0","0","1","0","1","1","0");
var i:Number;
var p1:Number;
var p2:Number;
var p3:Number;
var p4:Number;

    //Create all the Checkbox
    for(i = 0; i < perguntas.length; i++) {
        select[i] = new CheckBox();
        select[i].y = (i * 20);
        **select[i].addEventListener(MouseEvent.CLICK, seleciona);**
        select[i].label = perguntas[i];
        select[i].width = 600;
        addChild(select[i]);
    }

    //Verify if the checkbox are selected.
    function seleciona(e:MouseEvent):void {
        for(var count:Number = 0; count < select.length; count++){      
        if (select[count].selected == true ){
            p1 += Number(resposta1[count]);
            p2 += Number(resposta2[count]);
            p3 += Number(resposta3[count]);
            p4 += Number(resposta4[count]);
            trace(p1);
        }else{
            trace(p1);
            trace(p2);
            trace(p3);
            trace(p4);
        }
    }
} 
```

所以我已经找到了使用按钮事件的解决方案......我很难为每个复选框设置一个事件......所以让我们简化一下

```
calcula.addEventListener(MouseEvent.CLICK, selecionaTeste);
function selecionaTeste(e:MouseEvent):void {
    for(var count:Number = 0; count < select.length; count++){      
        if (select[count].selected == true ){
            p1 += Number(resposta1[count]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:38:25.250

如果您只需要检查是否选择了所有这些，您可以执行以下操作：

```
var allSelected:Boolean = true;

for(var i=0; i<select.length;i++)
{
 if (select[i].selected == false)
 {
   allSelected = false;
 }
}

if(allSelected == true)
{
  trace("All Checkboxes are Selected!");
}
else
{
  trace("Some or All Checkboxes are left unchecked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-28T18:23:42.700

如果有人想要检查特定的复选框。我们正在检查的复选框的实例名称为“chk_demo”。在这里，我设置了一个全局变量，以便可以从其他函数/框架中检查它。添加 event.CHANGE 将在变量被选中或取消选中时更新它。我在 CS5.5 中使用 AS3

```
var isDemo = '0'; // set to 0 since it is not selected initially
chk_demo.addEventListener(Event.CHANGE, demo); // Run function when checked or unchecked (dynamically)

function demo(event:Event = null):void {
    if (chk_demo.selected == true) {
        isDemo = '1';
        trace("Box is checked");
    } else {
        isDemo = '0';
        trace("Box is NOT checked");
    }
} 
```

# unit-testing - 是否有内存中的 SQS？

> ID：13827115
> 
> 赞同：6
> 
> 时间：2012-12-11T19:30:10.720
> 
> 标签：unit-testing, amazon-web-services, amazon-sqs

我正在寻找模仿 SQS 的 REST API 并且可用于健壮/非易碎、小型、逻辑/单元测试的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T10:31:49.980

您还可以尝试 ElasticMQ，[https://github.com/adamw/elasticmq](https://github.com/adamw/elasticmq)，它实现了 SQS 接口并具有内存和数据库支持的存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:33:09.680

[JMS](http://docs.oracle.com/javaee/6/tutorial/doc/bncdq.html)和[MSMQ](http://msdn.microsoft.com/en-us/library/ms978430.aspx)都提供类似的排队基础结构。根据您的平台，您可以使用其中任何一种技术。两者都很健壮。除了磁盘支持的事务队列之外，MSMQ 还可以提供内存中（非事务）队列。

[RabbitMQ](http://www.rabbitmq.com/)是另一个流行的选择，它应该提供 SQS 功能的超集。但是，我没有直接的经验。

创建一个模仿 SQS 接口的包装器应该相当简单。

**更新**

ActiveMQ 提供了一个 REST API。但是，API 与 SQS 的不同。

您可以使用它并包装 API 差异，或者您可以创建自己的 REST API，它完全反映 SQS API 并包装您希望的任何 MQ 系统。

[http://activemq.apache.org/restful-queue.html](http://activemq.apache.org/restful-queue.html)

# ruby-on-rails - 列表项包装 Link_to 与 Can 结合

> ID：13827121
> 
> 赞同：0
> 
> 时间：2012-12-11T19:30:43.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, link-to

我正在尝试做一些非常基本的事情，但我被绊倒了。

我正在使用 link_to 创建锚标签，但我希望将这些标签包装在 li 标签中。我按照上一篇文章[Rails 3: Link_to list item?](https://stackoverflow.com/questions/8238248/rails-3-link-to-list-item) 但这将我的 LI 包装在 As 中。我试过这个。

```
<%= link_to "<li>Site Specific Articles</li>".html_safe, site_specific_articles_path if can? :edit, SiteSpecificArticle %> 
```

但它产生

```
<a href="/site_specific_articles"><li>Site Specific Articles</li></a> 
```

当我想要

```
<li><a href="/site_specific_articles">Site Specific Articles</a></li> 
```

任何想法都非常受欢迎。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:34:14.443

您必须将`<li>`and保留在`</li>`之外`link_to`，这意味着条件必须包含所有内容*（它也需要从 the 中取出`link_to`）*

```
<% if can? :edit, SiteSpecificArticle %>
  <li>
    <%= link_to "Site Specific Articles", site_specific_articles_path %>
  </li>
<% end %> 
```

IMO，无论如何，这更具可读性。

# error-correction - 汉明码中的奇偶校验

> ID：13827128
> 
> 赞同：2
> 
> 时间：2012-12-11T19:31:14.907
> 
> 标签：error-correction, error-detection, hamming-code

如果已接收到一条消息，例如两个字节，并且已知已使用汉明码对其进行编码，但用于编码的奇偶校验位（偶数/奇数）未知，那么具有奇数奇偶校验和偶数奇偶校验的汉明码是否会应用？努力识别收到的消息中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:40:23.460

如果您不知道使用的是偶校验还是奇校验，则无法判断**单个消息**是否被错误更改。

示例：对 4 位消息使用奇校验：

```
1101 --[Add parity]-> 11010 --[Introduce error]-> 10010. 
```

收到的消息包含偶数个 1。我们知道它是使用奇校验发送的，所以发生了错误。

在 4 位消息上使用未知奇偶校验：

```
1101 --[Add parity]-> 1101? --[Introduce error]-> 1001?. 
```

我们不知道奇偶校验，因此我们无法确定此消息是否发生错误。

**但还是有希望的**。

如果我们假设，通道是中等可靠的，并且有很多消息发送，我们可以使用概率来确定错误。

示例：收集一定数量的消息。如果其中至少 90% 具有奇校验，我们可以假设偶校验消息是错误的。

如果接收到的奇偶校验消息的数量接近，我们就真的有麻烦了。要么通道完全不可靠，要么发送方同时使用奇校验和偶校验。

# java - 如何让 JAXB 中的解组器忽略 XML 根元素名称？

> ID：13827129
> 
> 赞同：5
> 
> 时间：2012-12-11T19:31:20.557
> 
> 标签：java, xml, jaxb, fxg

我正在阅读一些 XML 数据（如果您熟悉 FXG 文件）。

部分数据具有不同的标签名称：

```
<varying_name1 scaleX="1.0046692" x="177.4" y="74.2"/>
<varying_name2  scaleX="1.0031128" x="171.9" y="118.9"/> 
```

我创建了一个名为 Transforms 的类来表示不同标签名称段中的数据。在我的 JAXB 类中保存我拥有的数据：

```
@XmlAnyElement(lax=true)    
@XmlJavaTypeAdapter(TransformAdapter.class)    
protected List<Transform> transforms; 
```

在我的适配器中，我尝试解组数据：

```
JAXBContext context = JAXBContext.newInstance(Transform.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
Transform result = (Transform) unmarshaller.unmarshal(v); 
```

但是，我的代码在此处引发异常，因为我元素上的根名称不同。它不是一个常数。我得到：

```
unexpected element (uri:"http://ns.adobe.com/fxg/2008", local:"m6_mc"). Expected elements are (none) 
```

我怎样才能让它像根元素具有预期的名称一样解组我的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T20:11:30.707

默认情况下，一个 JAXB (JSR-222) 实现将根据根元素确定要解组的类。这与通过`@XmlRootElement`or`@XmlElementDecl`注释提供的元数据相匹配。

或者，您是采用类参数的解组方法之一。这告诉 JAXB 您希望解组到哪个类。解组的结果将是一个实例`JAXBElement`，此外 Java 对象将包含根元素信息，以备不时之需。

```
JAXBContext context = JAXBContext.newInstance(Transform.class); 
Unmarshaller unmarshaller = context.createUnmarshaller(); 
Transform result = unmarshaller.unmarshal(v, Transform.class).getValue(); 
```

# asp.net - 使用 ADO.net 的每个请求连接，是或否？

> ID：13827130
> 
> 赞同：1
> 
> 时间：2012-12-11T19:31:25.283
> 
> 标签：asp.net, entity-framework, ado.net, database-connection, connection-pooling

是否可以打开`IDbConnection`数据库并在当前请求中的所有调用方法中使用它，然后允许 DI 容器将其处理`Application_EndRequest`，就像与 O/RM （如 Entity Framework）一起使用的“每个请求的上下文”模式一样？

或者我应该在每种方法中打开和关闭连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:40:51.663

更好的是您在请求中创建一个连接并在触发页面卸载事件时处理它。这样，您将处理掉不需要的资源。

你必须遵循这种方式：-

*   Override Page_PreInit：初始化连接，打开它并开始新的事务。

*   Override Page_Load：读取数据库并创建集合。

*   Override Page_Unload：提交/回滚事务，关闭连接。

*   覆盖 Dispose：实现 IDisposable 并释放基础对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T03:05:33.253

我知道**WebDbConnector**库可以提供帮助。它将帮助您的 Web 应用程序使用 Ado.Net(SqlConnection)、Linq To Sql(DataContext) 和 Entity Framework（ObjectContext 和 DbContext）为每个请求创建和维护与数据库的连接。

例如：

```
// The first parameter of SqlWebDbConnector is connection string
// or connection string name(in Web.config)
var context = new WebDbConnectorContext<SqlConnection>(
    new SqlWebDbConnector("Test", true));
var sqlContext = context.GetCurrentContext();
// TODO: write your own code 
```

然后你可以实现关闭和释放继承**WebDbConnectorHttpApplication**的所有资源。

我希望这可以帮助你。

更多信息请访问[https://github.com/congdongdotnet/WebDbConnector](https://github.com/congdongdotnet/WebDbConnector)。

# java - 比较不断重新填充的二维数组

> ID：13827133
> 
> 赞同：0
> 
> 时间：2012-12-11T19:31:25.843
> 
> 标签：java, android, arrays, math, multidimensional-array

我正在为 Android 创建一个运动检测应用程序。虽然我的检测算法有问题：

```
public boolean compareBitmaps()
{

    /*I'm creating 2 x 2D arrays which will continually be repopulated 
    every 2 frames with the pixel data of that frame based on even or odd
    (frames are collected in an ArrayList 'BIT') 
    BIT(0) will be stored in compare1
    BIT(1) will be stored in compare2
    BIT(2) will be stored in compare1 and so on...*/

    int [][] compare1 = new int[width][height];
    int [][] compare2 = new int[width][height];
    int bmpCount = BIT.size();

    boolean noMotion = true;

    //This is where I determine wheter even or odd using the modulus %
    for (int x=0; x<bmpCount; x++)
        if(x%2!=0)
        {

                System.out.println("Odd");
                getPixels1(compare1, x);

        }
        else
        {

                System.out.println("Even");
                getPixels2(compare2, x);

        }

        //Here I'm looking to continually compare the returned pixel colours
        // of the 2D arrays
        if(!Arrays.deepEquals(compare1, compare2))
        {
            System.out.println("No Motion");
            return noMotion = false;

        }
        else
        {
        return noMotion = true;
        }
}

private void getPixels1(int[][] compare1, int x) 
{
    for(int i = 0; i<width; i++)
    {
        for(int j=0; j<height; j++)
        {

            compare1[j][i] = BIT.get(x).getPixel(j, i);

        }
    }
}

private void getPixels2(int[][] compare2, int x) 
{
    for(int i = 0; i<width; i++)
    {
        for(int j=0; j<height; j++)
        {
            compare2[j][i] = BIT.get(x).getPixel(j, i);
        }
    }
} 
```

我`println()`用来帮助我调试， - 目前控制台打印“奇数”（如果我错了，请纠正我）对于元素（0）是错误的？当我下一步越过应用程序时。

谁能看到我做错了什么，任何帮助将不胜感激

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:33:22.363

你的逻辑颠倒了。

如果`x % 2`返回`0`，则表示`x`可被 2 整除，没有余数，即*even*。

```
4 % 2 = 0 // even
5 % 2 = 1 // odd 
```

# java - 将其他项目作为库包含在没有 JAR 管理的 Android 项目中？

> ID：13827137
> 
> 赞同：0
> 
> 时间：2012-12-11T19:31:48.887
> 
> 标签：java, android, eclipse

简单的问题，但我找不到任何关于它的信息。有没有办法让我的 Android 项目在同一个工作区中包含另一个 Java 项目，而无需在每次更改任何内容时为该库重新编译 JAR？或者我可以自动生成 JAR 吗？

我已经尝试将项目添加到构建路径，它使定义在 Android 应用程序中可见，但它们没有链接（运行时 NoClassDefFoundError）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:44:10.967

右键单击要成为库的项目，“属性”，“Android”，滚动到底部，切换“是库”，添加到主项目的构建路径。

# android - Android PopupWindow 与 DialogFragment

> ID：13827138
> 
> 赞同：1
> 
> 时间：2012-12-11T19:31:53.687
> 
> 标签：android, android-fragments, android-dialogfragment

我正在尝试制作一个弹出窗口，该窗口会在我的应用程序中单击按钮时显示一个由适配器填充的列表视图。目前，我正在使用 DialogFragment 并且它工作正常。但我希望能够调整对话框的大小和理想的位置。

在做了一些研究之后，PopupWindow 允许您调整框的大小和位置，但它在其视图中实例化片段时效果不佳。DialogFragment 非常适合使用片段和列表视图，但据我所知，您无法控制它的大小和位置。

有没有人在创建动态弹出窗口方面有类似的情况或经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:27:45.037

要更改 DialogFragment 的大小，我使用 OnCreateView 方法执行了以下操作

**注意：** MonoDroid 的 C# 代码；为原始 Android 轻松翻译成 Java

```
public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    base.OnCreateView(inflater, container, savedInstanceState);

    View thisView = inflater.Inflate(Resource.Layout.NewContactDialog, container, false);

    thisView.Post(() =>
        {
            ViewGroup.LayoutParams lp = thisView.LayoutParameters;

            lp.Width = 500;

            thisView.LayoutParameters = lp;

            thisView.Invalidate();
        }

    );

    return thisView;
} 
```

此代码来自实验。我决定的只是使用居中的 DialogFragment （默认行为）并取消背景。您可以覆盖 DF 的样式，并将其基于现有主题

```
<style name="MyDialogFragment" parent="android:Theme.Holo.Dialog">
  <item name="android:windowIsFloating">true</item>
</style> 
```

或者从头开始完全设计它

```
<style name="MyDialogFragment">
  ... (set all items, check docs)
</style> 
```

对于开始尝试使用上面的 MyDialogFragment 样式并将 windowIsFloating 设置为 false 并查看效果（只需使用 SetStyle 成员将您的主题设置为此）。

一些很好的样式和主题链接，您需要自己设置样式并覆盖默认值：

[http://www.therealjoshua.com/2012/01/styling-android-with-defaults/](http://www.therealjoshua.com/2012/01/styling-android-with-defaults/)

[http://developer.android.com/guide/topics/ui/themes.html/](http://developer.android.com/guide/topics/ui/themes.html/)

[https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml/](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml/)

[https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml/](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml/)

老实说，使用 DialogFragments 和 PopupWindows 很痛苦，但它们是解决一些实际 GUI 问题的专用视图，所以不要放弃。如果您需要更多信息，请在下面的评论中提问（我意识到这不是答案，我只是想提供帮助，b/c 我现在正在研究这些东西）。

# c# - 在 HttpWebResponse 上使用 DOM/SAX 而不是 XmlSerializer

> ID：13827140
> 
> 赞同：0
> 
> 时间：2012-12-11T19:32:05.767
> 
> 标签：c#, dom, httpwebrequest, sax, xmlserializer

我想在下面的代码中使用 SAX/DOM 解析器来读取 HttpWebResponse 中的 xml，而不是使用 XmlSerializer。
请帮我怎么做？

```
 HttpWebRequest request = WebRequest.Create(requestURI) as HttpWebRequest;
  request.Credentials = _cred;
  WebResponse response = request.GetResponse();

  XmlSerializer ser = new XmlSerializer(typeof(MyXMLClass));
  myXMLClassObj = ser.Deserialize(response.GetResponseStream()) as MyXMLClass; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:01:29.670

```
HttpWebRequest request = WebRequest.Create(requestURI) as HttpWebRequest;
  request.Credentials = _cred;
  WebResponse response = request.GetResponse();        
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
    doc.Load(response.GetResponseStream());

    var elements = doc.GetElementById("myelement");

    foreach (var el in elements)
    {
        //Do something
    } 
```

这是一个将响应重定向到 xmldocument 并拉出一些元素的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:00:39.003

```
 /// <summary>
    /// Loads this class properties by REST invocation
    /// </summary>
    /// <returns>
    /// true: Successfully loaded 
    /// false: Failed to load 
    ///  </returns>
    public bool LoadMyClass()
    {
        try
        {
            string strSubscriberURL = "http://SERVERIP/url/";

            HttpWebRequest request = WebRequest.Create(strSubscriberURL) as HttpWebRequest;
            request.Credentials = new NetworkCredential(loginUserName, password);
            WebResponse response = request.GetResponse();

            //Load the XML from the Stream
            System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
            doc.Load(response.GetResponseStream());

            //Use the reflection to get all the properties of this class object and set those
            System.Reflection.PropertyInfo[] arrPropInfo = this.GetType().GetProperties();
            for (int i = 0; i < arrPropInfo.Length; i++)
            {
                string xmlname = arrPropInfo[i].Name;
                System.Reflection.PropertyInfo propInfo = arrPropInfo[i];
                XmlNodeList elemList = doc.GetElementsByTagName(xmlname);
                String xmlValue = "";
                for (int j = 0; j < elemList.Count; j++)
                {
                    xmlValue = elemList[j].InnerText;
                }
                //TYPE Converstion :Default will be String
                Object typeCastedValue = xmlValue;
                if (propInfo.PropertyType.Name.Equals("Boolean"))
                {
                    typeCastedValue = xmlValue.Equals("true") ? true : false;
                }
                else if (propInfo.PropertyType.Name.Equals("Int32"))
                {
                    typeCastedValue = Convert.ToInt32(xmlValue);
                }
                propInfo.SetValue(this, typeCastedValue, null);
            }
        }
        catch (WebException webex)
        {
            var response = webex.Response as HttpWebResponse;
            int errCode = 0;
            if (response != null)
            {
                errCode = (int)response.StatusCode;
                Debug.WriteLine("HTTP Status Code: " + (int)response.StatusCode + " "+ response.StatusCode.ToString());

            } 
            return false;
        }
        return true;                
    }

    public static bool sendRequest(string requestURL, HTTPRequestMethod requestMethod,
        NetworkCredential m_netCred, String xml, ErrorResponse m_objErrorResponse)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(requestURL) as HttpWebRequest;
            request.PreAuthenticate = true;
            request.Credentials = m_netCred;
            request.Method = requestMethod.ToString();
            request.AllowAutoRedirect = false;
            request.ReadWriteTimeout = 100000;
            request.ContentLength = xml.Length;
            request.ContentType = "application/xml; encoding='utf-8'";
            Debug.WriteLine("XML: {0}", xml);
            StreamWriter postStream = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII);
            postStream.Write(xml);
            postStream.Close();
            WebResponse response = request.GetResponse();

            //Get the confschedule ID created
            if (requestMethod == HTTPRequestMethod.POST)
            {
                HttpWebResponse webResp = response as HttpWebResponse;
                string temp = response.Headers["Location"];
                string[] parts = temp.Split('/');
                id = parts[parts.Length - 1];
            }
            response.Close();
        }
        catch (WebException webex)
        {
            var response = webex.Response as HttpWebResponse;
            int errCode = 0;
            if (response != null)
            {
                errCode = (int)response.StatusCode;
                Debug.WriteLine("HTTP Status Code: " + (int)response.StatusCode);
                if ((int)response.StatusCode != 500)
                {
                    m_objErrorResponse.UpdateErrorResponse(errCode.ToString(), response.StatusCode.ToString(), "");
                }
                else
                {
                    m_objErrorResponse.UpdateErrorResponse(errCode.ToString(), response.StatusCode.ToString(),
                        response.Headers.ToString().Split(':')[2]);
                }
                Debug.WriteLine(webex.Status.ToString());
                Debug.WriteLine(webex.Response.ToString());
                Debug.WriteLine(response.Headers.ToString());
                WebHeaderCollection col = response.Headers;
                for (int i = 0; i < col.Count; i++)
                {
                    Debug.WriteLine(col.Get(i));
                    Debug.WriteLine(response.GetResponseHeader(col.Get(i)));
                }
            }
            return false;
        }
        return true;
    } 
```

# mysql - 在mysql中只选择唯一的行/记录

> ID：13827142
> 
> 赞同：6
> 
> 时间：2012-12-11T19:32:07.127
> 
> 标签：mysql, sql

我想看看如何只获得具有独特城市的独特行/记录，而不关心它是否是首都，例如：

```
Akron
akron
aKRON 
```

只会返回一条记录。

我厌倦了这样的事情，但它不起作用

```
"SELECT DISTINCT(city) AS city,state_prefix,lattitude,longitude  FROM zip_code WHERE city LIKE '$queryString%' LIMIT 10" 
```

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T19:36:32.113

您可以使用这个 mysql-only 技巧：

```
SELECT city, state_prefix, lattitude,longitude
FROM zip_code WHERE city LIKE '$queryString%'
GROUP BY city, state_prefix -- Here's the trick
LIMIT 10 
```

这将返回 和的每个唯一值*遇到的第一行*。`city``state_prefix`

其他数据库会抱怨您有未在 group by 或某些此类消息中列出的 non=-aggregated 列。

### 已编辑

以前我声称不使用`upper()`分组列上的函数会返回所有大小写变化，但这是不正确的 - 感谢 SalmanA 指出这一点。我使用 SQLFiddle 进行了验证，您不需要使用`upper()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:34:39.313

它不适用于其他 DBMS，但在 MySql 中您可以使用它：

```
SELECT city, state_prefix,lattitude,longitude
FROM zip_code WHERE city LIKE '$queryString%'
GROUP BY city
LIMIT 10 
```

MySql 在比较字符串时忽略大小写，例如返回 true：

```
select 'hello'='Hello ' 
```

您还可以按单个字段（在本例中为城市）分组并返回所有其他字段。其他字段的值未确定，它们通常是第一行中的值，但您不能对此进行中继。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T19:36:38.973

您可以使用 GROUP BY 中的函数将所有名称转换为大写或小写：

```
 SELECT  city,state_prefix,lattitude,longitude 
        FROM zip_code WHERE city LIKE '$queryString%'
        GROUP BY UPPER(city), UPPER(state_prefix) LIMIT 10 
```

我假设如果一个城市和州匹配，纬度和经度可以安全地卷起。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T19:48:02.327

您的表格或城市列可能具有区分大小写的排序规则设置。

您可以像这样在 SELECT 语句中显式选择排序规则。如果您选择不区分大小写的排序规则，则`DISTINCT`关键字将执行您希望它执行的操作。

```
SELECT DISTINCT
        city COLLATE utf8_general_ci,
        state_prefix COLLATE utf8_general_ci,
        lattitude,longitude  
 FROM zip_code 
WHERE city LIKE '$queryString%' 
LIMIT 10 
```

# javascript - Facebook API 实现

> ID：13827147
> 
> 赞同：2
> 
> 时间：2012-12-11T19:32:41.973
> 
> 标签：javascript, facebook

假设我在 facebook 上按姓名搜索人。我得到了数千个结果。现在，如果我想从结果列表中自动向每个人发送消息。可以使用 Facebook API 还是使用 java 脚本来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:44:27.987

值得庆幸的是，答案是肯定**的**。这根本不可能。我相信你可以想象，Facebook 决定*不允许*应用程序向随机的人发送消息。垃圾邮件漏洞非常真实。

# .net - “泄漏”线程句柄

> ID：13827152
> 
> 赞同：8
> 
> 时间：2012-12-11T19:33:02.693
> 
> 标签：.net, multithreading, wcf, c#-4.0, threadpool

我有一个托管在 IIS 中的 WCF 应用程序（用`C#/.Net 4`. 随着时间的推移，进程的句柄计数以或多或少的线性方式增加（在进程循环之前增加到 30,000）。根据 SysInternals Process Explorer 的说法，该进程拥有的大部分句柄都是`Thread`. 但是，根据性能监视器，线程数或多或少保持不变（大约 40）。

显然，我做错了什么并且正在泄漏`Thread Handles`。但是，我不清楚 a`Thread Handle`在这种情况下到底是什么。我会假设它是一个线程的句柄，但由于线程数保持一致，我看不到句柄数是如何增加的。而且，我想不出任何方法来保持线程的句柄，而线程本身就消失了。此外，我没有明确地创建新线程（我正在使用`ThreadPool`in 地方）。

显然，我错过了一些东西。但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:10:00.333

可以拥有终止线程的句柄。所以线程被创建，终止，但句柄仍然存在。

启动进程监视器 (procmon.exe) 并将其设置为侦听“进程和线程活动”（禁用文件、注册表和网络）。通过双击线程创建事件并查看堆栈来确定谁在创建线程。

那应该回答谁在创建线程的问题。他负责关闭把手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:36:40.200

[根据文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686746.aspx)：

> 当[`CreateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453.aspx)or[`CreateRemoteThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437.aspx)函数创建一个新线程时，将返回该线程的句柄。

所以如果你有这么多的句柄，你的应用程序会不断地产生新的线程。另一方面，性能监视器中几乎恒定数量的线程表明，创建线程来代替回收的线程。

[ThreadPool](http://msdn.microsoft.com/en-us/library/System.Threading.ThreadPool.aspx)类文档：

> 从 .NET Framework 4 开始，线程池**创建和销毁工作线程以优化吞吐量**，吞吐量定义为每单位时间完成的任务数。线程太少可能无法最佳利用可用资源，而线程太多可能会增加资源争用。

所以我认为你的应用程序行为是因为`ThreadPool`.

# windows - 根据 bash 中的操作系统运行不同命令的最佳方法

> ID：13827157
> 
> 赞同：3
> 
> 时间：2012-12-11T19:33:21.507
> 
> 标签：windows, macos, bash, scripting

在 bash 脚本中，有一种“官方”方式可以根据操作系统版本运行不同的命令。我的意思是，您基本上可以将它设置在顶部一次，然后在其他任何地方都以相同的方式调用它。我尝试使用别名，但这似乎是一个废话，在某些系统上并不能真正工作（一个是使用 win-bash 的 Windows 7）。

例如，这是我尝试过的：

```
if [ "$(uname)" = "Darwin" ]; then
    alias p4cli=./bin/p4
else
    alias p4cli=C:\bin\p4.exe
fi

p4cli login 
```

如果我使用它可以在 Mac 上运行，`shopt -s expand_aliases`但 win-bash 没有 shopt。我假设有比别名更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:45:30.637

要确定 bash 中的底层操作系统，最好依赖 env variable `OSTYPE`。bash 手册页说变量 OSTYPE 存储操作系统的名称：

> OSTYPE 自动设置为描述执行 bash 的操作系统的字符串。默认值取决于系统。

```
if [[ "$OSTYPE" == "darwin"* ]]; then
   p4cli="./bin/p4"
else
   p4cli="C:\bin\p4.exe"
fi

"$p4cli" login 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:42:04.063

使用变量，而不是别名。

```
if [ "$(uname)" = "Darwin" ]; then
    p4cli=(./bin/p4)
else
    p4cli=('C:\bin\p4.exe')
fi

"${p4cli[@]}" login 
```

我们制作变量数组，以便以后可以在需要时将参数添加到命令中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:45:14.387

使调用的进程`p4cli`负责将正确的目录添加到其`PATH`变量中。然后你只需要打电话`p4cli login`而不用担心它的确切位置。

据推测，您可以从特定于机器的（或至少特定于操作系统的）执行此操作`.bash_profile`，它可以硬编码正确的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:43:48.907

将命令保存在变量中怎么样？

```
if [ "$(uname)" = "Darwin" ]; then
    p4cli='./bin/p4'
else
    p4cli='C:\bin\p4.exe'
fi

$p4cli login 
```

# bash - 重装后bash找不到ghc？

> ID：13827159
> 
> 赞同：5
> 
> 时间：2012-12-11T19:33:26.500
> 
> 标签：bash, haskell, installation

我刚刚重新安装了 Haskell 平台（[这就是原因](https://stackoverflow.com/questions/13794168/haskell-cant-find-package "这就是为什么")），在重新安装了 Haskell 平台后，我得到：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ ghc
-bash: /usr/local/bin/ghc: No such file or directory 
```

知道为什么吗？我怀疑这与我的路径或类似的事情有关，但我还没有发现任何奇怪的东西。我可以直接使用 ghc：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ /usr/bin/ghc
ghc: no input files
Usage: For basic information, try the `--help' option. 
```

/usr/bin/ 在我的路径中：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ echo $PATH
/Users/drewgross/.rvm/gems/ruby-1.9.3-p327/bin:/Users/drewgross/.rvm/gems/ruby-1.9.3-p327@global/bin:/Users/drewgross/.rvm/rubies/ruby-1.9.3-p327/bin:/Users/drewgross/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin 
```

我还可以做些什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T20:15:46.510

`bash`shell 会缓存您之前使用过的命令的路径。Using`which ghc`不会显示这个（因为它在 shell 外部并且只是查询`PATH`），但是`type`是一个`bash`-internal 命令会揭示这种情况，所以`type ghc`会显示类似

```
ghc is hashed (/usr/local/bin/ghc) 
```

修复很容易。要么启动一个新的 shell（从头开始），要么通过`hash -r`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:37:11.220

您的目录之一`$PATH`有一个指向不再存在的可执行符号链接`/usr/local/bin/ghc`。要找出答案，请输入`which ghc`bash。如果结果确实是一个符号链接，只需将其删除。如果它是自定义脚本，您可能需要重命名它而不是删除它，以防以后碰巧需要它。

# tinymce - TinyMCE - 隐藏文本

> ID：13827160
> 
> 赞同：2
> 
> 时间：2012-12-11T19:33:29.093
> 
> 标签：tinymce

我正在尝试设置一个与 TinyMCE 一起使用的“模板”。我的一个想法是隐藏或锁定某些元素以防止在图形视图中被编辑，并且只允许它们在 HTML 视图中显示和更改。

这个想法是为了让普通用户只需在图形视图中打开它，更改他们的文本，然后就可以使用了。任何白痴都以一种用户不必担心意外更改错误的东西而导致整个页面丢失的方式来证明事情。

我知道有一些实现将 Flash 对象显示为黄色框，无法更改.. 那种想法。有没有内置的方法可以做到这一点，还是必须是某种类型的扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:39:58.000

TinyMCE 本身没有任何方法可以做到这一点，而且它实际上已经在我自己的工作中出现过。

实际上，您最好的解决方案是在 TinyMCE 实例*之外*甚至不显示那些需要只读的部分。例如，您可以有一个静态页眉，后跟一个编辑器框，然后是一个静态页脚。页眉和页脚仅向用户显示，以便他们可以可视化完成的文档，但他们已经知道它们不可编辑。您甚至可以有多个可编辑的部分，并在将其发送到服务器进行保留之前组合它们的内容。然后，您当然希望在加载页面时将信息拆分为多个部分，但我认为这种组合工作比破解 TinyMCE 来完成您所描述的操作要少。

# opengl - ogl纹理崩溃窗口上的lodepng

> ID：13827162
> 
> 赞同：0
> 
> 时间：2012-12-11T19:33:42.497
> 
> 标签：opengl, png, texturing

我正在使用 lodePNG 从 png 文件中加载纹理，但是当我加载纹理时程序崩溃了。

```
char* filename = "texture.png";
unsigned width, height;
std::vector<unsigned char>image;
GLuint texture[1];
//decode
unsigned error = lodepng::decode(image, width, height, filename);
if(error) std::cerr << "decoder error " << error << ": " << lodepng_error_text(error) << std::endl;
glBindTexture(GL_TEXTURE_2D, texture[0]);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0,
GL_RGBA, GL_UNSIGNED_BYTE, &image[0]); 
```

我用VS 2010编译，没有错误，但是调用glTexImage2D的时候就崩溃了。我的系统是 Windows 7，显卡支持 OGL 3.3。

我有另一个系统，它是 Mac OSX 10.6，我一直在移植代码，在 Mac 上完全没有问题。有没有我可以提出的修复建议，以便在 Windows 上正确加载纹理？

这是我获得 lodePNG 文件的网站：http: [//lodev.org/lodepng/](http://lodev.org/lodepng/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:16:36.413

在您的代码中，您声明了 GLuint texture[1]，这是一个由一个纹理句柄组成的数组。然后在这一行绑定到这个未初始化的纹理句柄：

```
glBindTexture(GL_TEXTURE_2D, texture[0]); 
```

这是不正确的。您正在绑定到尚未初始化的纹理句柄。相反，您需要做的是通过调用 glGenTextures 来生成纹理句柄。然后你可以绑定到纹理。所以试试这个：

添加这个：

```
glGenTextures(1,&texture[0]); 
```

在此行之前：

```
glBindTexture(GL_TEXTURE_2D, texture[0]); 
```

调用 glGenTextures 后，您的句柄 (texture[0]) 应该是一个非零值。

# jquery - 当用户向下滚动页面时，元素会出现和消失

> ID：13827165
> 
> 赞同：0
> 
> 时间：2012-12-11T19:33:47.787
> 
> 标签：jquery

我使用这种代码：

```
$(document).ready(
  function DocumentLoad()
  {    
    $(window).scroll(scrollBtn);
    scrollBtn();      
  });

 function scrollBtn(){  
    if ( $(window).scrollTop() > 150 )
         $('.scroll-btn:hidden').fadeIn('slow');
       else
         $('.scroll-btn:visible').fadeOut('slow');         
 } 
```

和`<div class="scroll-btn"> my content to show </div>`

当用户向下滚动页面时显示一个元素。我想以 div scroll-btn 在页面结束之前保持 350px 高度时消失的方式扩展它（我的页脚有 350px 高度，所以我想在 div scroll-btn 到达它之前消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:15:32.137

这应该为您解决问题：

`pxFromBottom`根据您的要求进行调整。

```
$(window).scroll(function() {
    var pxFromBottom = 350;
    if ($(window).scrollTop() + $(window).height() > $(document).height() - pxFromBottom) {
        $('.scroll-btn').fadeOut('slow');
    } else {
        $('.scroll-btn').fadeIn('slow')
    }
}); 
```

[工作演示](http://jsfiddle.net/EP6d8/1/)

# flash - JSFL：如何导出影片剪辑以便它们可以流式传输

> ID：13827167
> 
> 赞同：1
> 
> 时间：2012-12-11T19:33:51.213
> 
> 标签：flash, streaming, jsfl

我有一个场景，其中一个 fla 中有多个电影剪辑。我想将每个影片剪辑导出为自己的 swf，但问题是我想导出它以便它可以流式传输。

在主时间线中导出带有电影内容的普通 .fla 文件时，生成的 swf 能够流式传输——它可以在加载 100% 之前开始播放。

当我使用 JSFL 函数：document.exportSWF([fileURI [, bCurrentSettings]]) 时，生成的 .swf 必须加载 100% 才能开始播放。这是因为它导出为带有影片剪辑实例的时间线。主时间线只有一帧，实际的电影内容嵌套在该帧中。

我想知道如何使用 JSFL（或任何其他不手动复制帧的方式）获取影片剪辑并将其导出到可以流式传输的 swf，以便影片剪辑本身是主时间线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:33:30.330

这是一个非常好的问题。我的第一个想法是，可能会有像 .mov 流这样的元数据，它会中断正确的加载/播放，直到加载 %100。您是否尝试过没有事件侦听器的 Loader Object？

# ruby - 动态添加单例方法

> ID：13827169
> 
> 赞同：1
> 
> 时间：2012-12-11T19:33:54.903
> 
> 标签：ruby

我想定义 Logger 在模块上的方法，并将它们委托给返回 Logger 的方法。

```
module MyLogger
  def self.logger
    # return a Logger, whatever
  end 

  [:debug, :info, :warn, :error, :fatal] do |_method|
    def self._method *args # WRONG. Want to define something named `_method` for the class
      logger.send _method, *args
    end
  end 
end 
```

如何修复错误的行以使其正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:39:11.303

```
module MyLogger
  def self.logger *args
    # return a Logger, whatever
  end 

  [:debug, :info, :warn, :error, :fatal].each do |_method|
    define_singleton_method _method do |*args|
      logger.send _method, *args
    end
  end

end

p MyLogger.singleton_methods
# => [:logger, :debug, :info, :warn, :error, :fatal] 
```

# mysql - 如何使用观察者将新列添加到订单网格？

> ID：13827171
> 
> 赞同：4
> 
> 时间：2012-12-11T19:34:01.640
> 
> 标签：mysql, magento, collections, adminhtml

你可以帮帮我吗？我正在尝试使用观察者将新列添加到管理员的订单网格中。有我的 config.xml

```
 <adminhtml>
        <events>
            <adminhtml_block_html_before>
                <observers>
                    <order_grid>
                        <type>model</type>
                        <class>Order_Grid_Model_Observer</class>
                        <method>addItemsColumn</method>
                    </order_grid>
                </observers>
            </adminhtml_block_html_before>
        </events>
    </adminhtml> 
```

有我的观察者代码：

```
class Order_Grid_Model_Observer
{
    public function addItemsColumn($observer)
    {
        $_block = $observer->getBlock();
        $_type = $_block->getType();
        if ($_type == 'adminhtml/sales_order_grid') {
            $_block->addColumn('total_item_count', array(
                'header'=> Mage::helper('sales')->__('Items'),
                'width' => '80px',
                'type'  => 'text',
                'index' => 'total_item_count',
                'sortable' => false,
                'filter' => false
            ));
            $_block->getColumn('real_order_id')
                ->setData('filter_index', 'main_table.increment_id');

            $collection = $_block->getCollection();
            $collection->clear();
            $collection->getSelect()
                ->joinLeft(array('o' => 'sales_flat_order'), 'o.entity_id = main_table.entity_id', array('total_item_count'));
            $_block->setCollection($collection);
        }
    }
} 
```

我几乎做到了，但是当我尝试按某个字段对网格进行排序时，我收到错误“字段列表中的列'increment_id'不明确”。这很奇怪，因为我已经为“increment_id”字段更新了“filter_index”。任何想法为什么这个块的集合没有更新？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:06:04.537

[“我们”（另一组）在Magento Hackathon](http://magento-hackathon.de "Magento 黑客马拉松")上实现了一个扩展，允许轻松添加新列、重新排列它们并从网格中删除列。此外，您可以将表加入集合以添加列。

[https://github.com/magento-hackathon/GridControl](https://github.com/magento-hackathon/GridControl)

# tfs - 如何更改 Git-TF 签入消息格式

> ID：13827173
> 
> 赞同：5
> 
> 时间：2012-12-11T19:34:03.403
> 
> 标签：tfs, git-tf

有谁知道如何将在 git-tf checkin 命令上创建的自动生成的消息配置到 TFS？

我希望对此有更多控制权，以便在签入期间添加评论。

我公司使用的敏捷流程系统允许在注释前添加任务编号，然后将源代码与敏捷系统中的任务相关联。

有人有想法么？有人有任何定制的 git-tf 源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:57:04.623

As mention in [this thread](http://gittf.codeplex.com/discussions/401969), you can try!

> > I've upgraded to the latest version of `git-tf` and noticed that it generates a different comment for a tfs changeset after doing a checkin than the previous version (I'm using the `--deep` option, no message provided with the command).
> > Is there a way to revert to the 'clean' (without the commit guid, author, commiter) comment from git?
> 
> Yes, You can use the `--no-metadata` flag when checking in and it will revert back to the "clean" comment.

So you don't have much control on the comment, but at least you can reuse git comments.

There is a request for [making that option the default](http://gittf.codeplex.com/workitem/51).

# intellij-idea - IntelliJ IDEA 能否通过插件封装 WebStorm 和 PHPStorm 的所有功能？

> ID：13827214
> 
> 赞同：536
> 
> 时间：2012-12-11T19:36:43.690
> 
> 标签：intellij-idea, phpstorm, webstorm, jetbrains-ide

我在市场上寻找新的 IDE，但对 Jetbrains 的一些产品之间的重叠感到困惑。看起来 IntelliJ IDEA 具有允许您进行 Node.js 和 php 开发的插件。

IntelliJ IDEA 是否可以通过插件完成 WebStorm 和 PHPStorm 所做的所有事情，或者它们是否具有 IDEA 中不可用的特殊功能？我希望为所有开发提供一个单一的多语言 IDE。

* * *

## 回答 #1

> 赞同：504
> 
> 时间：2012-12-11T22:57:06.243

我们轻量级 IDE 的所有功能都可以在 IntelliJ IDEA 中找到（您需要[从存储库安装相应的插件](http://www.jetbrains.com/idea/webhelp/installing-updating-and-uninstalling-repository-plugins.html)）。

它包括对为我们更具体的产品（如 Web/PhpStorm、RubyMine 和 PyCharm）开发的所有技术的支持。

IntelliJ IDEA 缺少的特定功能是用于轻量级产品的简化项目创建（“Open Directory”），因为它不适用于支持如此广泛的语言和技术的 IDE。这也意味着您不能直接从 IDEA 中的远程主机创建项目。

如果您缺少任何其他轻量级产品中可用但 IntelliJ IDEA Ultimate 中不可用的功能，[欢迎您报告它](http://youtrack.jetbrains.net/issues/IDEA)，我们会考虑添加它。

虽然 PHP、Python 和 Ruby IDEA 插件是使用在 PhpStorm、PyCharm 和 RubyMine 中使用的相同源代码构建的，但产品发布周期并不同步。这意味着某些功能可能已经在较轻的产品中可用，但在某些时期在 IDEA 插件中不可用，它们会在插件和 IDEA 更新后添加。

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2013-03-28T15:36:26.620

但这就是问题所在，有时您不能或不想等待。例如，我想使用对 RubyMotion 的新支持，其中包括 RubyMotion 项目结构支持、rake 文件设置、与 iOS 模拟器挂钩的配置设置等。

RubyMine 现在拥有所有这些，IDEA 没有。所以我必须在 IDEA 之外生成一个 RubyMotion 项目，然后设置一个 IDEA 项目并连接到那个源文件夹等，天知道还有什么。

JetBrains 应该做的是有一个许可模式，允许我通过购买 IDEA 来使用任何其他 IDE，而不是仅仅依赖 IDEA 插件。

我愿意为此多付 50 美元来获得灵活性。

有趣的是，我最初是升级到 IDEA 的 RubyMine 客户，因为我确实想要那种多语言设置。现在我正在考虑为 RubyMine 的升级付费，只是因为我现在需要做 RubyMotion。还有其他潜在的领域，这个不同步的问题可能会再次困扰我。例如扭矩箱工作流程/部署支持。

JetBrains 有很好的 IDE，但我想我有点恼火。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-08-19T00:17:08.677

我经常使用 IntelliJ、PHPStorm 和 WebStorm。只想使用 IntelliJ。正如供应商所指出的那样，IntelliJ 中没有的“Open Directory”功能很痛苦。

现在是摩擦部分；我曾尝试使用 IntelliJ 作为我的单一 IDE，发现与重量较轻的版本相比，性能很糟糕。与 WebStorm 相比，Intellisense 在 IntelliJ 中几乎毫无用处。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-01-05T20:01:31.563

**IntelliJ IDEA 与 WebStorm 功能**

IntelliJ IDEA 仍然是 JetBrains 的旗舰产品，IntelliJ IDEA 通过捆绑或可下载的插件提供完整的 JavaScript 支持以及 WebStorm 的*所有*其他功能。唯一缺少的是简化的项目设置。

取自：[https ://confluence.jetbrains.com/display/WI/WebStorm+FAQ#WebStormFAQ-IntelliJIDEAvsWebStormfeatures](https://confluence.jetbrains.com/display/WI/WebStorm+FAQ#WebStormFAQ-IntelliJIDEAvsWebStormfeatures)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-03-04T10:42:33.983

绝对是一个很好的问题。我也注意到这也是IDEa中版本选择的一个子问题，这个链接可能有助于解决......

> [http://www.jetbrains.com/idea/features/editions_comparison_matrix.html](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)

它还可能具有查看您的其他 IDE 选择及其提供的选项的基础工作。

我认为 WebStorm 最适合 JavaScript 和 Git 存储库管理，这意味着 HTML5 CSS Cordova 类型的堆栈，这确实是（我和其他人一起相信）未来的所在，现在应该集中精力......但是这取决于根据您的需要等

无论如何，这也讲述了这个故事...... [http://www.jetbrains.com/products.html](http://www.jetbrains.com/products.html)

# crystal-reports - Crystal Reports - 帮助使用一个公式显示多个报表字段

> ID：13827220
> 
> 赞同：2
> 
> 时间：2012-12-11T19:37:33.513
> 
> 标签：crystal-reports, report, field

我无论如何都不是程序员。我只是一个好奇的低级管理员，试图根据我的需要修改报告。我有一个 Crystal Reports .rpt 文件，显示采购订单和针对这些采购订单的付款。我的问题是付款行没有参考采购订单号。目前，我必须导出报告，然后在 excel 中完成并手动将每个 AP 行与其匹配的采购订单号匹配。我希望 AP 行也显示采购订单编号。

报告中有一个名为“@Voucher_PO_ID”的字段，其中包含以下公式：

```
if {LAGL019Q.RECORD_TYPE} = "3" then
   if {LAGL019Q.SOURCE} = "AP" then
     {LAGL019Q.TRANS_REF_NUM}
   else if {LAGL019Q.SOURCE} = "PO" or {LAGL019Q.SOURCE} = "RQ" then
             {LAGL019Q.PO_ID}
    else " "
else " " 
```

据我了解，此公式表示如果 SOURCE 是 AP（应付账款），则该行显示 TRANS_REF_NUM（付款支票号码），但如果 SOURCE 是 PO（采购订单），则显示 PO_ID（采购订单号）。

同样，我对编程知之甚少，我希望它会像修改 if then 语句一样简单：

```
 if {LAGL019Q.SOURCE} = "AP" then
     {LAGL019Q.TRANS_REF_NUM} and {LAGL019Q.PO_ID} 
```

但这不起作用。我可以通过添加 {LAGL019Q.TRANS_REF_NUM} + "blah" 将一些文本附加到 {LAGL019Q.TRANS_REF_NUM} 的末尾，所以我不确定为什么它不会添加另一个字段。

它只是不允许我更改公式的这一部分：

```
"   if {LAGL019Q.SOURCE} = "AP" then
     {LAGL019Q.TRANS_REF_NUM}" 
```

如果我只是尝试：

```
 if {LAGL019Q.SOURCE} = "AP" then
     {LAGL019Q.PO_ID} 
```

它仍然无法正常工作，我不确定为什么？如果它是应付账款行，我希望它显示相应的 PO_ID。即使我知道 AP 行有相应的采购订单，当我这样做时它也只会显示一个空白字段。

我猜关于实际数据库的设置方式，我不知道有一些更大的事情。也许 AP 行实际上并没有引用 PO_ID，我只是假设他们这样做。

我所做的大多数谷歌搜索都回到了这里，所以我想我会发布我的问题。我搜索了类似的问题，但它们大多不符合我的要求。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:23:46.437

我认为您唯一的问题是您尝试使用逻辑运算符（`AND`关键字）而不是字符串运算符（`+`或`&`字符）。希望它像这样简单：

```
if {LAGL019Q.RECORD_TYPE} = "3" then
   if {LAGL019Q.SOURCE} = "AP" then
     "This is the transaction#: " + {LAGL019Q.TRANS_REF_NUM} + 
     ", and this is the PO ID: " + {LAGL019Q.PO_ID}
   else if {LAGL019Q.SOURCE} = "PO" or {LAGL019Q.SOURCE} = "RQ" then
             {LAGL019Q.PO_ID}
    else " "
else " " 
```

如果 {LAGL019Q.PO_ID}="AP" 那么这*应该*导致：

`This is the transaction#: <TheActualNumber>, and this is the PO ID: <TheActualPOID>`

EDIT1：另一个想法：您有多确定数据库实际上为这些记录保存了有效的 PO#s？如果您尝试使用`if {LAGL019Q.SOURCE} = "AP" then {LAGL019Q.PO_ID}`它并显示为空白，那么这是一个很好的指标，表明 {LAGL019Q.PO_ID} 对于该记录实际上为空。

# php - PHP - URI 字符串中的通配符

> ID：13827222
> 
> 赞同：1
> 
> 时间：2012-12-11T19:37:53.987
> 
> 标签：php, wildcard

我正在尝试创建一个可以读取字符串中的通配符的 API 请求处理程序。理想的情况是这样的。

```
$myClass->httpGet('/account/[account_id]/list-prefs', function ($account_id) {
    // Do something with $account_id
}); 
```

`[account_id]`外卡在哪里。实际的 URI 如下所示：

```
http://api.example.com/account/123456/list-prefs 
```

* * *

实际功能看起来像......

```
function httpGet($resource, $callback) {
    $URI = urldecode(str_replace('/'.$this->API_VERSION, '', $_SERVER['REQUEST_URI']));
    $match = preg_match_all('/\[([a-zA-Z0-9_]+)\]/', $resource, $array);
    if ($resource /*matches with wildcards*/ $URI) {
        // Do something with it.
    }
    ...
} 
```

我的问题是...

1.  我无法弄清楚如何将函数中的字符串与 URI 匹配以调用回调。
2.  如何使用 URI 中提供的值解析字符串（将 [account_id] 替换为 123456）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:56:49.530

我认为您缺少以下内容：

```
tokens = array('[account_id]' => '/\[([a-zA-Z0-9_]+)\]/'); 
```

然后：

```
function replaceTokens($resource) {
    # get uri with tokens replaced for actual regular expressions and return it
}

function httpGet($resource, $callback) {
    $URI = urldecode(str_replace('/'.$this->API_VERSION, '', $_SERVER['REQUEST_URI']));        
    $uriRegex = replaceTokens($resource);
    $match = preg_match_all($uriRegex, $URI, $array);
    if ($match) {
        // Do something with it.
    }
} 
```

# macos - 在 Mac 上嗅探 USB 流量？

> ID：13827224
> 
> 赞同：21
> 
> 时间：2012-12-11T19:37:56.497
> 
> 标签：macos, usb

有没有办法嗅探 Mac 上的 USB 端口？我查看了[libusb](http://www.libusb.org)和[#usblib](http://www.icsharpcode.net/OpenSource/SharpUSBLib/default.aspx)，但找不到任何适用于 Mac 的东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-11-28T11:24:35.670

我找到了一种方法，你需要[Wireshark 的夜间构建](https://www.wireshark.org/download/automated/osx/)（我使用的是 V2.5.0rc0）。安装后，您需要调出 USB“接口”：

```
sudo ifconfig XHC20 up 
```

之后，您可以使用wireshark 嗅探`XHC20`接口中的所有流量。完成后，记得关闭界面：

```
sudo ifconfig XHC20 down 
```

来源：[audio-ios](https://aud-ios.com/2017/10/22/usb-monitoring-with-wireshark/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-14T20:48:38.143

安装 IOUSBFamily 日志时要小心。它已经几年没有更新了。OS X 版本必须匹配，否则包括内置触摸板/键盘在内的所有 USB 设备都无法工作。如果确实发生这种情况，您必须从恢复中手动重新加载正确的 kext：

[https://discussions.apple.com/message/20152486#20152486](https://discussions.apple.com/message/20152486#20152486)

以下是从恢复中重新加载的步骤：

> 在我的机器上从错误的操作系统版本安装 USB Prober 后，我遇到了同样的问题。它安装时没有任何警告，但事实证明这包括 IOSUSBFamily.kext 内核模块，该模块无法在我的机器上运行，并且禁用了所有 USB 设备（包括笔记本电脑自己的键盘和触控板）。
> 
> 这是我修复它的方法，但请**非常小心**不要损坏您的机器：
> 
> 1) 按住 CTRL+R 并打开您的机器，这将启动到“恢复模式”
> 
> 2) 打开终端
> 
> 3) 找出您原来的 IOUSBFamily 内核扩展和 Macintosh HD 上的内核扩展在哪里。我的在这里：
> 
> 原文：/System/Library/Extensions/IOUSBFamily.kext
> 
> 新的（损坏的）：/Volumes/Macintosh\ HD/System/Library/Extensions/IOUSBFamily.kext
> 
> 4) 将损坏的模块移开：

```
$ mkdir /Volumes/Macintosh\ HD/Users/recovery-backup
$ mv /Volumes/Macintosh\ HD/System/Library/Extensions/IOUSBFamily.kext /Volumes/Macintosh\ HD/Users/recovery-backup 
```

> 5）复制原件：

```
$ cp -a /System/Library/Extensions/IOUSBFamily.kext /Volumes/Macintosh\ HD/System/Library/Extensions/IOUSBFamily.kext 
```

> 重新启动，它应该是固定的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T23:18:21.390

您可以使用[IOUSBFamily 日志](https://developer.apple.com/downloads/index.action?q=IOUSB#)。如果您使用的是 OSX 10.8.2，您可能想尝试[2012 年 2 月的 Xcode 硬件 IO 工具中包含的](https://developer.apple.com/downloads/index.action?q=IOUSB#)USB Prober （两个链接都需要 Apple 开发人员帐户），因为 IOUSBFamily 的最新版本适用于 OSX 10.9.4 .

即使是现在（2018 年），也没有比 10.9.4 更新的版本，而且它们在更新的 macOS 版本中也不起作用。

# ruby-on-rails - 如何更改 Rails 呈现的表单？

> ID：13827228
> 
> 赞同：0
> 
> 时间：2012-12-11T19:38:13.960
> 
> 标签：ruby-on-rails

我有两个类，用户和联系人。一个用户有很多联系人，一个联系人属于一个用户。在用户的显示视图中，我有：

```
<%= link_to 'Add Contact', :controller => "contacts", :action => "new", :user => @user.id %> 
```

然后，在联系人的控制器中，在新操作下，我有：

```
@user = User.find(params[:user])
@contact = Contact.new  
@contact.user = @user 
```

当新的联系表单呈现时，它的用户字段中已经有 #<User:0x4c52940>。但是，当我提交表单时，出现错误：预期用户（#39276468），得到字符串（#20116704）。

问题是，当调用 create 时，Ruby 会获取表单中的所有内容并覆盖新联系人中的字段。那么：如何更改表单以删除用户字段，以便用户不会被字符串覆盖？

编辑：我的联系人的 new.html.erb 有这个：

```
 <%= render 'form' %>
 <%= link_to 'Back', contacts_path %> 
```

联系人的控制器：

```
def new
@user = User.find(params[:user])
@contact = Contact.new

@contact.user = @user

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @contact }
end
end 
```

和

```
def create
@contact = Contact.new(params[:contact])

respond_to do |format|
  if @contact.save
    format.html { redirect_to @contact, notice: 'Contact was successfully created.' }
    format.json { render json: @contact, status: :created, location: @contact }
  else
    format.html { render action: "new" }
    format.json { render json: @contact.errors, status: :unprocessable_entity }
  end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:46:35.447

我相信您滥用了控制器的创建操作。本质上它的内容应该是这样的

```
def create
   @user = User.find(params[:user_id])
   contact = @user.contacts.build(params[:contact])
   if contact.save
     flash[:alert] = 'New contact is created'
     redirect_to contacts_path(contact)
   else
     flash.now[:error' = 'Error creating contract'
     render :action => :new
   end
end 
```

所以 +1 上一个答案 - 向您展示控制器和新表单代码

# reporting-services - SSRS 在页面的一部分上每行重复标题？

> ID：13827232
> 
> 赞同：0
> 
> 时间：2012-12-11T19:38:38.987
> 
> 标签：reporting-services

我正在使用 SQL Server 报告服务，想知道是否有一种方法可以在页面的一部分上每行显示一个标题，而在其余部分使用组中的标准标题。

我有需要显示的肯定结果，并且大多数调查是非常同意、同意、中立、不同意、非常不同意。但是前两行涉及时间段，如 7a-10a、10a-1p、1p-4p、4p-7p、星期六和位置，这些需要有标题来显示它们是什么。

我现在使用两个表来执行此操作，其中一个上的时间和位置数据用于拆分每行的标题，另一个上的调查结果按组拆分标题。SQL Server 2008 中的数据确实有一个 Survey_Order 列来分隔这两个集合。

我找不到将所有数据放在一张桌子上的方法，如果有人建议如何使用 SSRS 上的一张桌子显示所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:07:48.553

您可以添加第二个数据行，而不是为您希望每个数据行重复一个的标题行显示真正的“标题”。将其设置为看起来像标题。然后将行可见性设置为仅在问题需要第二个标题行时显示该行。

# java - 为什么我要逼近？

> ID：13827233
> 
> 赞同：-6
> 
> 时间：2012-12-11T19:38:43.563
> 
> 标签：java, android, forceclose, splash-screen

我知道我已经问过这个问题但是在第一个答案之后没有人回答我改变了他告诉我的内容仍然没有结果

主页.java

```
package com.example.decrypter;

import android.os.Bundle;
import android.app.Activity;
import android.app.Application;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.AdapterView.OnItemSelectedListener;

public class Home extends Activity implements OnItemSelectedListener {

Button btn_start,btn_about,btn_exit;
@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

btn_start = (Button) findViewById(R.id.btn_start);
 btn_about = (Button) findViewById(R.id.btn_about);
 btn_exit = (Button) findViewById(R.id.btn_exit);

btn_start.setOnClickListener( new View.OnClickListener() 
{ 

   public void onClick(View v) {
       Intent start = new Intent(Home.this, MainPage.class);
       Home.this.startActivity(start);

}
 });
 btn_about.setOnClickListener( new View.OnClickListener() 
 { 

   public void onClick(View v) {
    // TODO Auto-generated method stub
      Intent about = new Intent(Home.this, about.class);
       Home.this.startActivity(about);

}
  });
 btn_exit.setOnClickListener( new View.OnClickListener() 
 { 

   public void onClick(View v) {
    // TODO Auto-generated method stub
    System.exit(0);

}
 });
 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.layout.home, menu);
    return true;

 }

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

} 
```

主页.java

```
package com.example.decrypter;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;
import android.widget.TextView;

 public class MainPage extends Activity implements OnItemSelectedListener {
double random1,random2,random3,random4,random5;
int check1,check2,check3,check4,check5;

EditText textbox;
int guess;
String s1,s2,s3,s4,s5;
Spinner spinner1,spinner2,spinner3,spinner4,spinner5;
TextView display1,display2,display3,display4,display5;
Integer[] numbers = {1,2,3,4,5,6,7,8,9};

   @Override
   public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    ArrayAdapter <Integer> adapter1 = new ArrayAdapter <Integer>(this,  
      android.R.layout.simple_spinner_item, numbers);

    setContentView(R.layout.activity_main_page);

    spinner1 =(Spinner) findViewById(R.id.spinner01);
    spinner2= (Spinner) findViewById(R.id.spinner02);
    spinner3= (Spinner) findViewById(R.id.spinner03);
    spinner4= (Spinner) findViewById(R.id.spinner04);
    spinner5= (Spinner) findViewById(R.id.spinner05);

     display1 = (TextView) findViewById(R.id.txtdisplay1);
     display2 = (TextView) findViewById(R.id.txtdisplay2);
     display3 = (TextView) findViewById(R.id.txtdisplay3);
     display4 = (TextView) findViewById(R.id.txtdisplay4);
     display5 = (TextView) findViewById(R.id.txtdisplay5);
    Button btnrandom = (Button) findViewById(R.id.btnrandom);
    Button btn1 = (Button) findViewById(R.id.btn1);

    spinner1.setAdapter(adapter1);
    spinner1.setOnItemSelectedListener(this);
    spinner2.setAdapter(adapter1);
    spinner2.setOnItemSelectedListener(this);
    spinner3.setAdapter(adapter1);
    spinner3.setOnItemSelectedListener(this);
    spinner4.setAdapter(adapter1);
    spinner4.setOnItemSelectedListener(this);
    spinner5.setAdapter(adapter1);
    spinner5.setOnItemSelectedListener(this);

    btnrandom.setOnClickListener( new View.OnClickListener() 
   { 

       public void onClick(View v) {
        // TODO Auto-generated method stub
        random1 = Math.floor(Math.random()*10);
        random2 = Math.floor(Math.random()*10);
        random3 = Math.floor(Math.random()*10);
        random4 = Math.floor(Math.random()*10);
        random5 = Math.floor(Math.random()*10);
        //display.setText("random:" + random1);

        /*check1 = Integer.parseInt(spinner1.getSelectedItem().toString()) ;

        */

    }
   });

    btn1.setOnClickListener( new View.OnClickListener() 
   { 

       public void onClick(View v) {
        // TODO Auto-generated method stub

        if(check1==random1){
            display1.setTextColor(Color.GREEN);
            s1= Integer.toString(check1);
            display1.setText(s1);
        }
        else{
            display1.setTextColor(Color.RED);
            s1= Integer.toString(check1);
            display1.setText(s1);
            }

        if(check2==random2){
            display2.setTextColor(Color.GREEN);
            s2= Integer.toString(check2);
            display2.setText(s2);
            }
        else{
            display2.setTextColor(Color.RED);
            s2= Integer.toString(check2);
            display2.setText(s2);
            }

        if(check3==random3){
            display3.setTextColor(Color.GREEN);
            s3= Integer.toString(check3);
            display3.setText(s3);
            }
        else{
            display3.setTextColor(Color.RED);
            s3= Integer.toString(check3);
            display3.setText(s3);
            }

        if(check4==random4){
            display4.setTextColor(Color.GREEN);
            s4= Integer.toString(check4);
            display4.setText(s4);
            }
        else{
            display4.setTextColor(Color.RED);
            s4= Integer.toString(check4);
            display4.setText(s4);
            }

        if(check5==random5){
            display5.setTextColor(Color.GREEN);
            s5= Integer.toString(check5);
            display5.setText(s5);
            }
        else{
            display5.setTextColor(Color.RED);
            s5= Integer.toString(check5);
            display5.setText(s5);
            }

    }
   });

}

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.layout.activity_main_page, menu);
    return true;

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

    check1 = Integer.parseInt(spinner1.getSelectedItem().toString());

    check2 = Integer.parseInt(spinner2.getSelectedItem().toString()) ;

    check3 = Integer.parseInt(spinner3.getSelectedItem().toString()) ;

    check4 = Integer.parseInt(spinner4.getSelectedItem().toString()) ;

    check5 = Integer.parseInt(spinner5.getSelectedItem().toString()) ;

    }

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

} 
```

飞溅.java

```
 package com.example.decrypter;

 import android.app.Activity;
 import android.content.Intent;
 import android.media.MediaPlayer;
 import android.os.Bundle;

      public class Splash extends Activity {
MediaPlayer splashSong;
@Override
protected void onCreate(Bundle splashpage) {
    // TODO Auto-generated method stub
    super.onCreate(splashpage);
    setContentView(R.layout.splash);
    splashSong = MediaPlayer.create(Splash.this, R.raw.splashsound);
    splashSong.start();

    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(5000);
            } catch (InterruptedException e){
                e.printStackTrace();
            } finally {
                Intent openHome = new Intent  
                                                  ("com.example.decrypter.HOME");
                startActivity(openHome);
            }
        }
    };
    timer.start();

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    //splashSong.release();
    finish();
}

  } 
```

安卓清单.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.decrypter"
 android:versionCode="1"
   android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Home"
        android:label="@string/title_activity_home" >
        <intent-filter>
            <action android:name="com.example.decrypter.HOME" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
     <activity
        android:name=".about"
        android:label="about" >
        <intent-filter>
            <action android:name="com.example.decrypter.ABOUT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
     <activity
        android:name=".MainPage"
        android:label="MainPage" >
        <intent-filter>
            <action android:name="com.example.decrypter.MAINPAGE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
     </activity>
 </application>

 </manifest> 
```

LOGCAT 错误

```
12-11 11:36:27.182: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 55K, 53% free 2570K/5379K, external 2131K/2137K, paused 53ms
12-11 11:36:27.271: D/AndroidRuntime(336): Shutting down VM
12-11 11:36:27.271: W/dalvikvm(336): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-11 11:36:27.291: E/AndroidRuntime(336): FATAL EXCEPTION: main
12-11 11:36:27.291: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.decrypter/com.example.decrypter.Home}: java.lang.ClassCastException: android.widget.RelativeLayout
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-11 11:36:27.291: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 11:36:27.291: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
12-11 11:36:27.291: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-11 11:36:27.291: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-11 11:36:27.291: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)
12-11 11:36:27.291: E/AndroidRuntime(336): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout
12-11 11:36:27.291: E/AndroidRuntime(336):  at com.example.decrypter.Home.onCreate(Home.java:23)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-11 11:36:27.291: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-11 11:36:27.291: E/AndroidRuntime(336):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:44:55.760

首先，尝试清理您的项目（例如，Eclipse 主菜单中的 Project > Clean）。如果这没有帮助，显然你有一个错误的`RelativeLayout`值。它使用的 ID 将基于您班级的第 23 行，无论是哪一行。`activity_main_page.xml``android:id``Home.java`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:45:36.780

你不值得，但是：

```
 12-11 11:36:27.291: E/AndroidRuntime(336): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout
   12-11 11:36:27.291: E/AndroidRuntime(336):  at com.example.decrypter.Home.onCreate(Home.java:23) 
```

这意味着......在 com.example.decrypter.Home.OnCreate 上，在第 23 行，您将某些内容投射到 RelativeLayout，它不是相对布局！

学习阅读，你必须，年轻的帕万！

# vba - 基于键在工作表之间移动数据

> ID：13827235
> 
> 赞同：-1
> 
> 时间：2012-12-11T19:38:54.160
> 
> 标签：vba, excel

在两个工作表中，我在 A 列中都有一个键。并非所有键值都在两个工作表中。对于工作表 1 的 A 列中的每个键值，我想在工作表 2 中找到相应的键，并将工作表 2 的 B 列中的数据移动到工作表 1 的 B 列中。

我从来没有编写过宏，所以我完全迷失了编写这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:45:02.580

Philip，这里不需要 VBA。

在 Sheet1 的单元格 B1 中尝试此公式：

```
=IFERROR(vlookup(A1,Sheet2!A:B,2,false),"") 
```

如果您使用的是 XL 2003，请执行以下操作：

```
=IF(ISERROR(vlookup(A1,Sheet2!A:B,2,false)),"",vlookup(A1,Sheet2!A:B,2,false)) 
```

然后将此公式向下拖动以获取 Sheet1 的 A 列中的其余数据。

*注意 - Sheet2 是您的 Worksheet2 的假定名称，您可能需要更改以适应您的需要。*

*NB2 - 您可以`vlookup`在 Excel 帮助（或在线）中查找以更好地了解它的作用*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:45:13.607

您确定需要为此使用宏吗？在我看来，您使用的是 Excel，一个简单的 VLOOKUP 公式就可以满足您的需求。

VLOOKUP 如下所示： =VLOOKUP(A1,Sheet2!$A:$B,2,FALSE)

其中 A1 是您的参考单元格（在这种情况下，您在 A 列中“键入”）。

Sheet2!$A:$B 是查找表（在这种情况下，第二张表中的列 A 和 B）。

2 是您要从中获取数据的列号，从左侧开始计数（在本例中为第二列，B 列）

FALSE 告诉公式只返回完全匹配的值。TRUE 返回查找表中最接近的匹配项。

# windows-phone-7 - Windows Phone 离开背景音乐播放

> ID：13827241
> 
> 赞同：0
> 
> 时间：2012-12-11T19:39:18.720
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我的 Windows Phone 应用程序被拒绝，因为当我在应用程序的浏览器中播放声音时，它会停止播放现有的背景音乐（拒绝问题 6.5.1）。

如何更新我的应用程序以不停止背景音乐？

我的 JavaScript 是这样的：

```
var mySound = new Audio(soundpath);

Sound.play(mySound); 
```

我在 Microsoft.Xna.Framework.Media 中找不到任何处理应用程序如何处理浏览器声音的内容，但也许我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:22:12.213

您正在寻找的是来自 xna 音效

这是我使用的，它对我来说非常适合我的所有音效。（你不能使用带有“音效”对象的音乐，因为它不会通过 Windows 商店的资格。你必须使用 MediaElement 来播放音乐）我不记得你需要哪个，但我有所有这些包括

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Media; 
```

和这个功能

```
private static void LoadSoundEffect(string fileName, SoundEffectInstance mySound)
{
    var stream = TitleContainer.OpenStream("Sounds/" + fileName);
    var effect = SoundEffect.FromStream(stream);
    FrameworkDispatcher.Update();
    mySound = effect.CreateInstance();   
} 
```

如果您使用 SoundEffectInstance，您可以启动、暂停、停止音效等，而不会出现任何问题。

SoundEffect 也可以，但我更喜欢 SoundEffectInstance。

编辑：如果你使用音效，它不会影响正在播放的音乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:45:55.183

我假设您正在构建本机 Windows Phone 应用程序 (.XAP)，然后使用浏览器控件显示您的应用程序内容。如果是这种情况，您需要在首次打开应用程序时执行检查。以下是如何解决该问题的说明。

您需要将这段代码添加到您的应用程序中（我建议您在每次应用程序加载/打开时检查这一点）。添加对`using`声明的引用以及媒体的引用。

```
if (Microsoft.Xna.Framework.Media.MediaPlayer.State == MediaState.Playing)
{               
    MessageBoxResult Choice;               
    Choice = MessageBox.Show("Media is currently playing, do you want to stop it?", "Stop Player", MessageBoxButton.OKCancel);
    if (Choice == MessageBoxResult.OK)
        mediaElement1.Play(); 
} 
```

如果用户允许或不允许播放媒体，您必须为此在 JavaScript 中进行检查。如果用户说“取消”并且您仍然播放音乐，您将再次失败认证。

有更多关于这个话题的信息在[这里](http://msdn.microsoft.com/en-us/magazine/hh975344.aspx)。

# ruby-on-rails - 范围、lambda 和 rails 3

> ID：13827242
> 
> 赞同：0
> 
> 时间：2012-12-11T19:39:23.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, lambda, scope

今晚在 rails 3 玩范围，并试图了解 lambda 的作用？

在此示例中，我要实现的是从与我的食谱模型相关联的国家模型中获取国家名称列表 (:name)。一个食谱属于国家，一个国家有很多食谱。

我想按食谱中出现的次数来订购食谱，从最高的开始..

所以我在我的食谱模型中尝试这个（或者我应该在国家模型中这样做吗？但是那将行不通，因为我的国家模型预先填充了世界上每个国家的 1 个实例）

```
scope :top_countries, lambda { joins(:countries).merge(Country.name).order("name DESC") } 
```

但是我收到此错误消息

```
undefined method `default_scoped?' for "Country":String 
```

我的控制器

```
@toprankingcountry = Recipe.top_countries 
```

显然我的理解不是我的想法，并希望得到一些指示/帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:51:05.820

我相信问题出在**merge(Country.name)**部分。**joins(:countries)**返回**ActiveRecord::Relation**实例。它的合并方法需要一个参数，即 ActievRecord::Relation 的另一个实例，而您合并字符串 Country.name。

一般来说，有效地获取顶级国家列表意味着通过一些附加条件获取国家列表。所以我会把这个逻辑放到一个国家模型中。

```
class Country
  has_many :recipes

  def self.top_countries
    joins(:recipes).
      select('countries.*, count(*) AS recipes_count').
      group('countries.id').
      order('recipes_count DESC')
  end
end 
```

此外，如果您使用的 RDBMS 无法自行确定相关行（如 PostgreSQL < 9.1），则必须手动列出 group by 子句中的所有列。

> 从与我的食谱模型（实例）关联的我的国家模型中获取国家名称列表（：名称）

我相信不可能实现你所描述的，因为一个国家有很多食谱，反之亦然

# web-services - 语义 Web 服务存储库

> ID：13827244
> 
> 赞同：0
> 
> 时间：2012-12-11T19:39:41.957
> 
> 标签：web-services, semantic-web, owl

有没有人知道一个好的、公共的和大型的 Web 服务存储库，其中 Web 服务被语义描述（例如，使用 OWL-S），我可以使用它来测试我的一些工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:15:10.407

我不知道有任何大型 OWL-S 存储库，我认为它没有受到太多关注。我的好资源可能只是在[OWL-S API](http://on.cs.unibas.ch/owls-api/)列表上询问；那里的人可能知道一些您可以使用的服务，或者正在托管他们自己的服务。

# android - 诊断android actionbar（来自图片）

> ID：13827245
> 
> 赞同：0
> 
> 时间：2012-12-11T19:39:45.100
> 
> 标签：android, android-actionbar

我想知道使用哪个 actionbar blackmart alpha 应用程序？

这是点击搜索图标的搜索视图的屏幕截图：http: [//i.stack.imgur.com/PatzU.jpg](http://i.stack.imgur.com/PatzU.jpg)

我想使用这个操作栏，因为 sherlock 操作栏不支持 android 2.3 < 设备中的搜索视图。

如果有人有关于如何使用搜索视图创建此操作栏的教程，它真的可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:40:41.113

你更好的用户[ActionBarSherlock](http://actionbarsherlock.com/)。这是一个很好的库，它提供向下兼容到 Android 2.1 并模仿在你的屏幕截图中看起来像这样的 Holo ActionBar。SO中还有很多关于它的文档和问题和答案。除此之外，它非常可靠且易于使用。许多著名的应用程序都使用它。

# html - 表格格式问题 Chrome vs IE/FireFox

> ID：13827248
> 
> 赞同：2
> 
> 时间：2012-12-11T19:39:49.693
> 
> 标签：html, google-chrome, internet-explorer, firefox, html-table

谁能告诉我为什么这张表在 Chrome 中看起来很完美，但在 IE 或 FireFox 中却不完美？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head></head>
<body>
<table cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td colspan="2" rowspan="2" style="padding-left:6px;"><img src="http://www.purelycustom.com/name_decals/style2/borders/tl_black_blue.png" /></td>
            <td colspan="4" style="height:15px; background-color:#00F"></td>
            <td rowspan="4"><img src="http://www.purelycustom.com/name_decals/style2/borders/right_black_blue.png" /></td>
        </tr>
        <tr>
            <td colspan="4" height="13px" style="background-color:#000"></td>
        </tr>
        <tr>
            <td rowspan="2"><img src="http://www.purelycustom.com/name_decals/style2/borders/l_black.png" /></td>
            <td colspan="2" style="background-color:#000000"><img src="http://www.purelycustom.com/name_decals/style2/flags/flag.png" /></td>
            <td style="background-color:#000000"><span style="color:#FFFFFF">YOUR</span></td>
            <td style="background-color:#000000" width="15px"></td>
            <td style="background-color:#000000"><span style="color:#FFFFFF">NAME</span></td>
        </tr>
        <tr>
            <td style="background-color:#000000" colspan="5"></td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

我包含了 !DOCTYPE 声明，因为我知道这会影响表格的显示方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:49:55.180

设置`td`你`tr`的第一个的宽度......如果你添加`align="right"`到`td`图像将排列..在添加特定宽度时可能会覆盖`tds`

更有效的方法是`div`使用背景图像而不是弄乱表格对齐..

# c++ - 当我知道答案可能是否定的时，我应该使用什么数据类型

> ID：13827255
> 
> 赞同：0
> 
> 时间：2012-12-11T19:40:04.303
> 
> 标签：c++, types

我目前正在开发一个程序，以将混乱的图像恢复到原始状态。为此，我使用平方差总和算法。由于该算法的性质，两个像素之间的差异可能为负，我应该使用哪些数据来正确保持负值？

我目前正在使用双精度数，但我经常发现计算出的结果“分数”是“超出范围的数字”——我的意思是带有字母的数字——我知道错误发生在这个位置。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:25:45.777

能发一下代码吗？此外，埃里克芬恩所说的也是正确的。Double 能够保持负值，所以这应该适合你。

# c++ - 编译一个简单的 Gsoap 服务

> ID：13827259
> 
> 赞同：1
> 
> 时间：2012-12-11T19:40:16.480
> 
> 标签：c++, web-services, compilation, gsoap

我对 gsoap 很陌生，我正在尝试遵循这个例子。

[Gsoap 示例](http://www.genivia.com/products/gsoap/demos/calc.html)

我通过下载二进制文件并使用以下命令成功安装了 Gsoap：

./configure --disable-ssl, make, sudo make install

然后我创建了我的 .h 文件，如示例中所示，并使用 soapcpp2 对其进行了编译。如示例所示，我创建了一个 .cpp 文件并尝试编译。

**编译时，我在自动生成的soapC.cpp 类以及自动生成的soapServer.cpp 类中收到编译错误。有多个错误，它们都大致相同。**

> soapServer.cpp: 未定义的对 'ns_sub(soap*, double, double ,double*)' 的引用

我确定这是一个链接器错误。我正在链接到在制作过程中创建的 gsoap++ 库。有人有什么想法吗？谢谢！

附言。这是eclipse发出的命令：

> g++ -o "GsoapTest" ./src/GsoapTest.o ./src/soapC.0 ./src/soapServer.o ./src/soapServerLib.o -lgsoap++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:13:16.180

您确定`ns__sub`在示例的步骤 1 中正确指定了服务操作吗？生成`soapServer.cpp`的没有找到对`ns_sub`with one的引用，`_`但我猜你已经按照步骤 2 实现了它（`ns__sub`，带有双下划线）。

# objective-c - 推送通知的模态警报请求

> ID：13827260
> 
> 赞同：1
> 
> 时间：2012-12-11T19:40:20.030
> 
> 标签：objective-c, permissions, push-notification, modal-dialog

调试器，

我创建了一个嵌入推送通知的应用程序。由于一个或其他原因，用户在第一次加载时没有被要求获得许可。过去我使用过推送通知，一切似乎都正常，代码几乎是“复制粘贴”。

*   我向证书颁发机构申请了证书（钥匙串）
*   我启用了推送通知并下载了新证书
*   将证书上传到苹果并获得经过验证的开发和分发证书。
*   我下载了一个新的开发 + 生产配置文件。
*   我使用配置文件签署了应用程序。

当我在 textedit 中打开配置文件时，我确实看到了以下键：aps-environment

我使用此配置文件对应用程序进行签名并将其安装到设备上！

我尝试了几种方法，例如将手机上的时间设置为提前几天，重新启动，重新安装。

我使用城市飞艇作为推送服务！

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T15:29:48.593

你有`[UAPush setDefaultPushEnabledValue:NO]`任何机会设置吗？

通过将此值设置为 NO UrbanAirship 延迟提示用户启用推送通知，直到您准备好询问。这使您有机会解释它们的用途，而不是在应用程序启动时立即弹出。

然后稍后您可以通过调用启用它们
`UIRemoteNotificationType notificationTypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];`

# windows-phone - 在 Windows Phone 8 IE10 的“共享页面”表中添加“第三方”链接

> ID：13827272
> 
> 赞同：1
> 
> 时间：2012-12-11T19:41:01.843
> 
> 标签：windows-phone, windows-phone-8

我想知道是否有可能在 Windows Phone 8 的 IE10 的“共享页面”表中添加第三方应用程序链接。

例如，当您想分享您在 Windows Phone 8 上的 IE10 中浏览的 url，并想分享该网站或 url，您点击“...”，然后从那里选择“分享页面”选项，然后点击“点击+发送”、“Hotmail”或“Gmail”，然后点击“社交网络”。但是，我想在这里添加一个第三方链接，就像当您尝试分享照片并在那里看到第三方应用程序链接一样。

所以我的问题是，Windows Phone 8 上的 IE10 是否允许您专门添加“共享扩展”，或者它仅受诺基亚、HTC 或微软开发的本机应用程序的支持？

请参阅此处的“共享页表”（带有共享选项）：

[https://twitter.com/MMudassir/status/278584991091392512/photo/1](https://twitter.com/MMudassir/status/278584991091392512/photo/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:03:33.240

这不是 WP7/WP8 支持的扩展点。

如果您希望在未来看到该功能的支持，请在您的用例中打开一个新的用户[语音](http://wpdev.uservoice.com)建议，以了解消费者何时需要此功能。

# c# - 实体框架/linq查询构造

> ID：13827276
> 
> 赞同：0
> 
> 时间：2012-12-11T19:41:13.037
> 
> 标签：c#, linq, entity-framework

我有以下表格：

**项目：**

```
Id
SettlementId
... 
```

**沉降**

```
Id
Name
AreaId 
```

**区域**

```
Id
Name
... 
```

我需要获取不属于任何项目的所有属于特定区域的定居点（我从选定的下拉列表中获取 areaId）。

到目前为止，这是我的查询：

```
var settlements = (from s in entities.Settlements
                  where s.AreaId == selectedAreaId
                  select s).toList(); 
```

我不完全确定如何过滤掉已经属于现有项目的定居点。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:43:46.390

你试过了吗？

```
where s.Projects.Count() == 0 
```

# jquery - chrome和safari中的数据表固定宽度问题

> ID：13827277
> 
> 赞同：0
> 
> 时间：2012-12-11T19:41:26.573
> 
> 标签：jquery, datatables

我正在尝试在 Datatables 中使用固定宽度，但在 Safari 和 Chrome 中，第一列即复选框列被弄乱了，并与第二列合并。这是一个例子：

[http://bufle.com/dtable/examples/basic_init/zero_config.html](http://bufle.com/dtable/examples/basic_init/zero_config.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:46:10.133

您的 HTML 具有`<th style="width: 2%">`第一列标题和`<td style="width: 2%">`正文行中的第一列。删除那些宽度属性。

# php - phpseclib NET_SFTP_STATUS_NO_SUCH_FILE：文件存在时找不到文件

> ID：13827278
> 
> 赞同：3
> 
> 时间：2012-12-11T19:41:29.817
> 
> 标签：php, sftp, phpseclib

我正在使用 phpseclib 将文件上传到远程服务器。以前，我的脚本运行良好，但几周前它似乎已经停止运行。我得到一个

> [NET_SFTP_STATUS_NO_SUCH_FILE](https://github.com/phpseclib/phpseclib/blob/master/phpseclib/Net/SFTP.php#L303)：从 $sftp->put 中找不到文件。

问题是要上传到服务器的文件确实存在。另外，无论如何，该代码以前都可以使用。

由于该脚本以前可以运行，因此目标服务器的某些设置似乎可能已更改。

有没有人有任何解决此问题的想法或建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T16:29:10.360

我昨天刚遇到这个问题。就我而言，我以错误的顺序传递本地/远程文件名，例如

```
if($sftp->put($filename,$filenameRemote,NET_SFTP_LOCAL_FILE)) 
```

但将其更改为

```
($sftp->put($filenameRemote, $filename, NET_SFTP_LOCAL_FILE)) 
```

它工作得很好。

由于过去这对您有用，因此我肯定会查看它们所在的本地/远程文件或目录的权限。此外，如果您还没有，请启用调试以获取更多详细信息

```
define('NET_SFTP_LOGGING', NET_SFTP_LOG_COMPLEX) 
```

# algorithm - 制作特定尺寸长方体的方法数

> ID：13827279
> 
> 赞同：1
> 
> 时间：2012-12-11T19:41:32.823
> 
> 标签：algorithm

我在一次采访中被问到这个问题。除了采取所有的可能性，我想不出办法——即完全的蛮力。

> 你有 3 种立方体 1×1×1、1×2×1 和 1×1×2。使用上述类型的立方体，你可以用多少种方法制作尺寸为 1×2 ^(n ×k 的立方体？)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T19:57:05.313

为了减少这个问题，我删除了一个常量维度。

> 这个问题很简单：
> 
> 我们有 2 种 1*1,1*2 正方形，
> 
> > 有多少种方法可以使用上述类型的正方形制作尺寸为 2^n X k 的正方形？

这个问题等于：在2^n X k 大小的[格图](http://en.wikipedia.org/wiki/Grid_graph)中有多少[匹配？](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29)

因为对于每个匹配，我们有一个模式来填充我们的正方形，即边缘匹配的集合（1*2 正方形）。对于其他正方形集（1*1 正方形）

我猜[匹配多项式](http://en.wikipedia.org/wiki/Matching_polynomial)和[二分图](http://en.wikipedia.org/wiki/Bipartite_graph)很有用。

在与（n = 1）相同的问题中，您可以使用递归函数来解决它。并且很容易证明结果在[fibonacci_number](http://en.wikipedia.org/wiki/Fibonacci_number)和[Catalan_number之间（有关更多详细信息，请参阅](http://en.wikipedia.org/wiki/Catalan_number)[此链接](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibpuzzles.html)中的 Fibonacci 数字和 Brick Wall Patterns ）

# typescript - 为什么我必须明确地将参数向下转换为方法？

> ID：13827283
> 
> 赞同：-1
> 
> 时间：2012-12-11T19:41:43.110
> 
> 标签：typescript

我有一个基类，组件：

```
module abc {
    export class Component {}
} 
```

我还有各种扩展这个基类的类：

```
module cde {
    export class Position extends abc.Component {}
} 
```

现在，有一个几乎只包含组件的实体类：

```
module abc {
    export class Entity {
        add(component: Component) {}
    }
} 
```

为什么我不能执行以下操作：

```
var entity = new abc.Entity().add(new cde.Position()); 
```

编译器抱怨说，`Argument types do not match parameters`即使我的 Position 类扩展了 Component 类，这是 add 方法所期望的类型......

将其更改为

```
var entity = new abc.Entity().add(<abc.Component>new cde.Position()); 
```

满足编译器错误，但我不明白为什么我需要像那样显式地向下转换..

* * *

在阅读了 Breeze 的回答后，我拿出了我的实际代码，剪掉了不相关的部分，并将其粘贴到操场上……低，看看代码确实有效。也许这是 IntelliJ 的打字稿实现的问题？我会继续调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:34:59.823

我尝试了以下代码：

```
module moduleA {
    export class classA {}
}

module moduleB {
    export class classB extends moduleA.classA {}
}

module moduleA {
    export class classC {    
        add(m: classA) {}
    }
}

var c = new moduleA.classC();
c.add(new moduleB.classB()); 
```

而且编译器不会抱怨...

两个问题，你用的是什么版本的编译器？这是您的确切代码吗？（因为您的 add 方法不返回任何内容，但您将其分配给 'var entity'）

# c++ - char** 使用 new 运算符分配内存

> ID：13827284
> 
> 赞同：1
> 
> 时间：2012-12-11T19:41:45.430
> 
> 标签：c++, memory, pointers, char, allocation

我真的对这个抛出错误感到困惑......

```
 char** results = new char*[numRes];  //this is where it breaks
    for(int i = 0; i < numRes; i++)  
    {  
         results[i] = new char[64];  
    } 
```

它引发了堆错误的损坏。但它肯定应该工作吗？我将 4 char* 分配给字符指针列表，以便我可以将它们传递给函数等。

我环顾四周，但它们似乎都在显示 malloc 和 free ......我在课堂上使用它们，所以我想坚持使用 c++ new 和 delete。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:44:13.537

分配后你在做什么？您只分配了一个字符指针数组，没有为每个元素（指针）分配空间。如果您尝试在元素中存储项目，则会遇到问题。

例如，如果您想在分配后将任何内容存储在 results[0] 中，您也需要分配给它。例如：

```
results[0] = new char[100]; // NEED TO ALLOCATE BEFORE WRITING TO results[0]!
strcpy(results[0], "Test"); 
```

您不能只复制到 results[0] 而不进行分配。这同样适用于任何结果元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:51:35.750

您正在为指针数组分配内存。之后，您必须为数组中的每个指针分配内存。我认为你的代码应该是这样的：

```
 int numRes = 4;
    char** results = new char*[numRes];

    for(int i=0; i<numRes; i++)
    {
         results[i] = new char;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:36:00.383

如果使用 c++ 是否可以使用 STL？特别是代码中的 std::string 和 std::list 或 std::vector 类？与传统的 C 字符串不同，C 字符串对象只是内存数组中的字符序列，C++ 字符串对象属于一个类，它具有许多内置功能，可以以更直观的方式对字符串进行操作，并且具有 C++ 容器常见的一些附加有用功能。

```
#include <string>
#include <list>

std::list<std::string> results; // create a list of strings

// and populate it
results.push_back("blah");
results.push_back("blah1");
results.push_back("blah2");
... 
```

# java - 奇怪的 IndexOutOfBound 错误

> ID：13827285
> 
> 赞同：0
> 
> 时间：2012-12-11T19:41:46.693
> 
> 标签：java, arrays, indexoutofboundsexception

您好，我正在为编程课编写程序，我得到：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 18
    at Life.countNeighbors(Life.java:200)
    at Life.genNextGrid(Life.java:160) 
```

我以前遇到过`ArrayIndexOutOfBoundsException`错误，通常是在我尝试添加或减去数组的索引时引起的。但是这次完全不同，我希望这里有人能指出错误发生的原因。

关于我的程序的信息：该程序就像 John Conway 的人生游戏。使用二维数组，然后将某些元素设置为（真 = 活着）或（假 = 死），程序然后根据它拥有的邻居数量确定细胞在下一代中是生还是死。（3个邻居=新细胞的诞生）（2,3个邻居=他们还活着）他们在下一代死去的任何其他东西。

根据我的编辑器，IndexOutOfBound 错误是由这一行引起的：

```
if(!(grid[1][1]) && !(grid[1][18]) && !(grid[18][1]) && !(grid[18][18])) 
```

我将上面的行创建为约束，它不应该告诉 java 搜索超出原始数组范围的索引，因为它们最终只是布尔（真/假）语句。如果有人可以帮我调试这个错误，那就太好了。

这是我的代码：（不包括主要方法）

```
 public static void clearGrid ( boolean[][] grid )
{
    int col;
    int row = 1;

    while(row < 18){
       for(col = 1; col < 18; col++){
          grid[row][col]= false;//set each row to false
       }
         row++;
    }//set all elements in array to false
}

public static void genNextGrid ( boolean[][] grid )
{
    //new tempprary grid
     boolean[][] TempGrid = new boolean[GRIDSIZE][GRIDSIZE];

     TempGrid= grid; // copy the current grid to a temporary grid

     int row = 1;
     int col = 1;

    countNeighbors(TempGrid, row, col); // passes the TempGrid to countNieghbor method

 for(row = 1; row < 18; row++){

        countNeighbors(TempGrid, row, col);

        for(col = 1; col < 18; col++){

            countNeighbors(TempGrid, row, col);

            if(countNeighbors(grid, row, col) == 3)
            {
                TempGrid[row][col] = true;
            }
            else if(countNeighbors(grid, row, col) == 2 || countNeighbors(grid, row, col) == 3)
    {
                TempGrid[row][col] = true;
            }
            else
            {
                TempGrid[row][col] = false;
            }

        }
    }
}

public static int countNeighbors ( final boolean[][] grid, final int row, final int col )
{
    int n = 0; //int used to store the # of neighbors
    int temprow = row;
    int tempcol = col;
//count # of neighbors for the cell on the edge but not the corner
            for(temprow = row; temprow <= 18; temprow++)
            {
                for(tempcol = row; tempcol <= 18; tempcol++)
                {
                     if(temprow == 1 || temprow == 18 || tempcol == 1 || tempcol ==18)
                     {
                         if(!(grid[1][1]) && !(grid[1][18]) && !(grid[18][1]) && !(grid[18][18]))
                         {
                             if(grid[temprow][tempcol] == true)
                             {
                                 n++;
                             }
                         }
                     }
                }
            }

//count # of neighbors for the corner cells
     for(temprow = row; temprow <= 18; temprow++)
     {
         for(tempcol = row; tempcol <= 18; tempcol++)
         {
            if(grid[1][1] || grid[1][18] || grid[18][1] || grid[18][18])
                    {
                        if(grid[temprow][tempcol] == true)
            {
                n++;
            }
                    }
         }
     }

// count the cells that are not on the edge or corner
    while(temprow >= 2 && tempcol >= 2 && temprow <= 17 && tempcol <= 17)
    {
    for(temprow = row; temprow-1 <= temprow+1; temprow++)
    {
            for(tempcol = col; tempcol-1 <= tempcol+1; tempcol++)
            {
                if(grid[temprow][tempcol] == true)
                {
                    n++;
                }
            }
    }
    }
    return n; // return the number of neighbors
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:44:02.750

如果没有完整的堆栈跟踪和问题所在的指示，这是我最好的猜测：

```
grid[18][1] 
```

该值`18`超出了您可以访问的数组的大小，在 Java 中数组是从零开始的`(0)`。由于我`17`在您的帖子中看到了所有内容，因此这似乎是最合乎逻辑的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T19:44:15.743

在 Java 中，数组索引从`0`到编号`n-1`。通过查看您的代码，它似乎假定它们的编号从`1`到`n`。

# java - 无法让@Singleton 做任何事情

> ID：13827293
> 
> 赞同：3
> 
> 时间：2012-12-11T19:42:21.520
> 
> 标签：java, jakarta-ee, singleton, jboss7.x, cdi

在 JBoss AS7 上运行，我有这个：

```
import javax.inject.Singleton;

@Singleton
public class Connections {
    private final List<AtmosphereResource> connections = new ArrayList<AtmosphereResource>();

    public void add(AtmosphereResource event) {
        connections.add(event);
    }
} 
```

和这个：

```
import javax.inject.Inject;

public class PubSubAtmosphereHandler extends AbstractReflectorAtmosphereHandler {
    @Inject
    private Connections connections;

    @Override
    public void onRequest(AtmosphereResource event) throws IOException {
        [...]
        connections.add(event); // <---
} 
```

NPE 上指定行。在阅读了无数页和示例之后，这是重复数十次但不起作用的方法之一。我有空的 beans.xml，放在我的 WEB-INF 中。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:31:50.210

经过一些研究，事实证明 Atmosphere 为这种功能提供了（目前已损坏的）钩子。这意味着**可以**简单地使用您的普通注释并让它与 Atmosphere 一起使用，尽管有“外部”实例化。

如果你知道你的代码将被部署在哪里，你可以简单地覆盖来自 Atmosphere 的默认 noop InjectorProvider 类，方法是在同一个包中拥有一个同名的类并让它提供正确的 Injector。

我在这个答案的末尾添加了 JBoss AS7 的代码，以及应该在 Google Guice 和 Spring 上工作的代码的链接，我自己没有测试过。

如果您需要您的代码在多个平台上工作，您可能需要弄清楚如何检测您正在运行的内容，然后返回适当的 Injector。由于我对 Guice 和 Spring 不是很熟悉，所以我将把这个练习留给读者。

JBoss AS7 的脏“初稿”代码（请记住，这必须进入声明的包以覆盖默认的 noop 提供程序）：

```
package org.atmosphere.di;

import java.util.NoSuchElementException;
import java.util.ServiceLoader;

import javax.enterprise.context.spi.CreationalContext;
import javax.enterprise.inject.spi.BeanManager;
import javax.enterprise.inject.spi.InjectionTarget;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class InjectorProvider {

    private InjectorProvider() {}

    public static Injector getInjector() {
        return LazyProvider.INJECTOR;
    }

    private static final class LazyProvider {
        private static final Injector   INJECTOR;

        static {
            Injector injector = new Injector() {
                @Override public void inject(final Object o) {
                    try {
                        final BeanManager bm = (BeanManager) new InitialContext().lookup("java:comp/BeanManager");
                        final CreationalContext cc = bm.createCreationalContext(null);
                        final InjectionTarget it = bm.createInjectionTarget(bm.createAnnotatedType(o.getClass()));
                        it.inject(o, cc);
                        cc.release();
                    } catch (final NamingException e) {
                        e.printStackTrace();
                    }
                }
            };
            try {
                injector = ServiceLoader.load(Injector.class).iterator().next();
            } catch (final NoSuchElementException e) {}
            INJECTOR = injector;
        }
    }
} 
```

请注意，包装代码取自 Atmosphere 代码库，这是在 Java 中执行 Singletons 的一种非常糟糕的方式。您可能不想在生产中使用此“原样”。

Guice 注射器，未经测试：[https ://github.com/Atmosphere/atmosphere/blob/atmosphere-1.0.x/extras/guice/src/main/java/org/atmosphere/guice/GuiceInjector.java](https://github.com/Atmosphere/atmosphere/blob/atmosphere-1.0.x/extras/guice/src/main/java/org/atmosphere/guice/GuiceInjector.java)

弹簧注射器，未经测试：[https ://github.com/Atmosphere/atmosphere/blob/atmosphere-1.0.x/extras/spring/src/main/java/org/atmosphere/spring/SpringInjector.java](https://github.com/Atmosphere/atmosphere/blob/atmosphere-1.0.x/extras/spring/src/main/java/org/atmosphere/spring/SpringInjector.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:03:34.897

其他人想说的是 PubSubAtmosphereHandler 的生命周期必须由容器（又名 JBoss）控制。

换句话说，容器负责创建和初始化 PubSubAtmosphereHandler 的实例。

如果您或您的框架创建此对象，则不会发生注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:51:50.047

使用 jndi 获取 BeanManager 是可能的。然后你可以从那里得到豆子。

```
BeanManager bm = initialContext.lookup("java:comp/BeanManager");
Bean<Connections> bean = (Bean<Connections>) bm.getBeans(Connections.class).iterator().next();
CreationalContext<Connections> ctx = bm.createCreationalContext(bean);

Connections connections = (Connections) bm.getReference(bean, Connections.class, ctx);
connections.add(event); 
```

# android - 以编程方式快速截取 Android 手机的屏幕截图

> ID：13827294
> 
> 赞同：1
> 
> 时间：2012-12-11T19:42:23.837
> 
> 标签：android, screenshot

我正在通过此代码从我的应用程序中截取 Android 手机的屏幕截图

```
 java.lang.Process process = Runtime.getRuntime().exec("su");
                DataOutputStream os = new DataOutputStream(process.getOutputStream());
                os.writeBytes("cat /dev/graphics/fb0 > " + raw + "\n");
                os.writeBytes("exit\n");
                os.flush();
                os.close();
                process.waitFor(); 
```

但是当我把它放在服务中并尝试无限运行时，我最多得到 2 个屏幕截图。

**有什么方法可以快速截屏吗？使用任何可能的方式在一秒钟内像 15-20 一样？**

编辑：我稍后尝试将它们转换为视频。有什么方法可以制作视频而不将其完全转储到文件中？

# asp.net - ext：简单的 ComboBox 绑定问题

> ID：13827296
> 
> 赞同：2
> 
> 时间：2012-12-11T19:42:29.210
> 
> 标签：asp.net, extjs, sqldatasource, ext.net

我有以下代码

```
<ext:ResourceManager ID="ResourceManager1" runat="server">
</ext:ResourceManager>

<asp:SqlDataSource ID="SqlDataSource2" runat="server"
    ConnectionString="<%$ ConnectionStrings:AProjeConnectionString %>"
    SelectCommand="SELECT Id,Name FROM PD">
</asp:SqlDataSource>

<ext:ComboBox ID="Departman" runat="server"
    DisplayField="Name"
    ValueField="Id"
    FieldLabel="Departman"
    EmptyText="Departman status" Flex="1">
    <Store>
        <ext:Store ID="Store2" runat="server" DataSourceID="SqlDataSource2" AutoDataBind="true">
            <Model>
                <ext:Model ID="Model2" runat="server">
                    <Fields>
                        <ext:ModelField Name="Id" />
                        <ext:ModelField Name="Name" />
                    </Fields>
                </ext:Model>
            </Model>
            <Reader>
                <ext:ArrayReader />
            </Reader>
        </ext:Store>
    </Store>
</ext:ComboBox> 
```

结果是一个空的组合框。有谁知道为什么这不填充组合框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:07:36.160

请尝试删除：

```
<Reader>
    <ext:ArrayReader />
</Reader> 
```

ArrayReader 需要一个数组数组，即它通过索引访问数据。

默认的 JsonReader 需要一个对象数组，即它可以通过属性名称访问数据。

# ios5 - UISegmented Control - 设置每个段的色调颜色

> ID：13827297
> 
> 赞同：3
> 
> 时间：2012-12-11T19:42:40.427
> 
> 标签：ios5, ios6, uisegmentedcontrol, tintcolor

我一直想对我的 UISegmentedControl 段应用不同的颜色。这里的很多人一直在问如何在您按下某个部分时设置色调颜色。我想要做的是在应用程序的整个生命周期（或当视图出现在屏幕上时）设置每个段的色调颜色。

扫描这里的问题，不同的人指出，显然在 iOS 6 中你不能这样设置每个段的 tintColor：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    buttonNames = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", nil];
    colorControl = [[UISegmentedControl alloc] initWithItems:buttonNames];
    [[[colorControl subviews] objectAtIndex:0] setTintColor:[UIColor redColor]];
    [[[colorControl subviews] objectAtIndex:1] setTintColor:[UIColor greenColor]];
    [[[colorControl subviews] objectAtIndex:2] setTintColor:[UIColor blueColor]];
    colorControl.segmentedControlStyle = UISegmentedControlStyleBar;
    colorControl.momentary = YES;

    [colorControl addTarget:self action:@selector(colorSegmentSelected:) forControlEvents:UIControlEventValueChanged];

    [self.view addSubview:colorControl];

} 
```

我在 XCode 中安装了 iOS 5.0 和 5.1 模拟器，并将我的项目设置为面向 5.0 和 5.1。在这两种情况下，此代码仍然无法正常工作。所有 3 段的 tintColor 均为灰色。

1.  设置每个段的色调颜色的正确方法是什么（如果我在这里做错了，请纠正我。
2.  如果此代码在 iOS 5 中确实有效，那么即使我以 5.0/5.1 为目标并使用适当的模拟器，它仍然无法正常工作怎么办？

感谢有关此主题的反馈/知识。谢谢！

# javascript - 触发单向 ajax 调用

> ID：13827299
> 
> 赞同：11
> 
> 时间：2012-12-11T19:42:43.800
> 
> 标签：javascript, jquery, ajax, wcf

我有一个 WCF 服务，它在第一次被调用时需要很长时间来处理，然后将这些结果缓存在`HttpRuntime.Cache`. 为了初始化这个缓存，我想从 javascript 触发一个即发即弃的 ajax 调用。

现在我在页面中有这个javascript：

```
$.ajax({
    type: 'GET',
    url: getServiceURL() + 'PrimeCacheAjax',
    contentType: 'application/json; charset=utf-8'
}); 
```

该`PrimeCacheAjax`函数只是执行一个虚拟调用来填充缓存。

这种方法的唯一问题是带有这个 ajax 调用的页面是一种登录页面，它执行一些 javascript，打开另一个窗口并自行关闭。当窗口在服务器响应之前自行关闭时，我在提琴手中看到一个取消的请求。我担心这可能会导致ajax调用可能无法到达服务器的情况，这可能吗？

有没有办法指定（使用`$.ajax()`）没有响应，或者它真的不重要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:47:49.610

唯一重要的是对服务器的请求是否未完成。在退出之前，您应该检查以确保调用的 readyState 值为 2 [aka sent]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:48:32.937

我只会执行没有回调的调用，我不相信有允许 F&F 方法的属性。

对于非常短的 ajax 调用，如果需要，您可以尝试以下代码作为替代方案。

```
$.get('URL'); 
```

# c++ - 使用模板实现通用字符串解析器

> ID：13827302
> 
> 赞同：0
> 
> 时间：2012-12-11T19:42:58.887
> 
> 标签：c++, parsing, templates, c++11

我正在尝试提出一个用于解析字符串（具有给定格式）的通用解决方案。例如，我希望能够解析包含数值列表（整数或浮点数）的字符串并返回 std::vector。这是我到目前为止所拥有的：

```
template<typename T, typename U>
T parse_value(const U& u) {
    throw std::runtime_error("no parser available");
}

template<typename T>
std::vector<T> parse_value(const std::string& s) {
    std::vector<std::string> parts;
    boost::split(parts, s, boost::is_any_of(","));
    std::vector<T> res;
    std::transform(parts.begin(), parts.end(), std::back_inserter(res),
            [](const std::string& s) { return boost::lexical_cast<T>(s); });
    return res;
} 
```

此外，我希望能够解析包含其他类型值的字符串。例如：

```
struct Foo { /* ... */ };

template<>
Foo parse_value(const std::string& s) {
    /* parse string and return a Foo object */
} 
```

维护单个`parse_value`函数“层次结构”的原因是，有时我想使用 boost::optional 解析一个可选值（可能存在或不存在）。理想情况下，我希望只有一个`parse_optional_value`函数可以委托相应的`parse_value`函数：

```
template<typename T>
boost::optional<T> parse_optional_value(const boost::optional<std::string>& s) {
    if (!s) return boost::optional<T>();
    return boost::optional<T>(parse_value<T>(*s));
} 
```

到目前为止，我当前的解决方案不起作用（编译器无法推断出要使用的确切函数）。我想问题是我的解决方案依赖于根据`parse_value`函数的返回类型推断模板值。我不确定如何解决这个问题（或者甚至不确定是否可以解决它，因为设计方法可能完全有缺陷）。有谁知道解决我想要做的事情的方法？如果您能指出一种可能的方法来解决我在当前实施中遇到的问题，我将不胜感激。顺便说一句，我也绝对愿意接受完全不同的想法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:20:51.583

您不能基于返回值 [1] 重载函数。这正是标准 IO 库使用该结构的原因：

```
std::cin >> a >> b; 
```

这可能不是你的小菜一碟——很多人不喜欢它，而且它确实不是没有问题——但它在为解析器提供目标类型方面做得很好。与静态`parse<X>(const std::string&)`原型相比，它还具有允许链接和流式传输的优势，如上所述。有时这不是必需的，但在许多解析上下文中它是必不可少的，并且使用`operator>>`实际上是一种非常酷的语法。[2]

标准库并没有做最酷的事情，那就是跳过字符串常量`scanf`样式并允许交错阅读。

```
vector<int> integers;
std::cin >> "[" >> interleave(integers, ",") >> "]"; 
```

但是，这可以定义。（可能最好在字符串文字周围使用显式包装器，但实际上我更喜欢这样；但如果你传递一个变量，你会想使用一个包装器）。

* * *

[1] 有了新的`auto`声明，其原因变得更加清晰。

[2] 另一方面，IO 操纵器是一个残酷的笑话。错误处理是可悲的。但你不可能拥有一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T00:08:16.407

下面是一个 libsass 解析器的例子：

```
const char* interpolant(const char* src) {
  return recursive_scopes< exactly<hash_lbrace>, exactly<rbrace> >(src);
}

// Match a single character literal.
// Regex equivalent: /(?:x)/
template <char chr>
const char* exactly(const char* src) {
  return *src == chr ? src + 1 : 0;
} 
```

其中规则可以传递到 lex 方法中。

# zend-framework2 - Zend Framework 2 .htaccess mamp pro

> ID：13827304
> 
> 赞同：1
> 
> 时间：2012-12-11T19:43:00.523
> 
> 标签：zend-framework2

我想开始使用 Zend Framework 2.0 。我使用 os x lion 和 mamp pro。所以开始我用这个***http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html***都很好，我看到了zend项目索引页面，但是

> 要测试您的 .htaccess 文件是否正常工作，请导航到[http://zf2-tutorial.localhost/1234](http://zf2-tutorial.localhost/1234)，您应该会看到：
> 
> 如果您看到标准的 Apache 404 错误，那么您需要在继续之前修复 .htaccess 的使用。如果您将 IIS 与 URL 重写模块一起使用，请导入以下内容： RewriteCond %{REQUEST_FILENAME} !-f RewriteRule ^.*$ index.php [NC,L]

所以我这样做了，将此行导入公用文件夹中的 .htaccess 文件，但没有任何变化，我有 404 错误，

例如，我尝试在 indexController 中创建名为“edit”的操作，但如果我转到 [http://zf2-tutorial.localhost/index/edit/](http://zf2-tutorial.localhost/index/edit/) ，则会出现 404 错误。

我必须做什么才能让它工作?????????????????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:06:09.380

验证您的 httpd.conf 是否启用了重写模块。通常在 /etc/apache2 中，确保您`LoadModule rewrite_module libexec/apache2/mod_rewrite.so`在模块部分中有该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:01:11.153

如果您有默认的 MAMP 安装，您可以通过单击顶部的 phpinfo 选项卡从 MAMP 开始页面转到 phpinfo。在 phpinfo 页面中，您可以找到 mod_rewrite 是否已加载。只需单击 Cmd + f（在 Mac 上）并键入 mod_rewrite。它应该在“加载的模块”部分。

现在你应该设置你的 VirtualHost。打开`/Applications/MAMP/conf/apache/httpd.conf`并将其添加到此文件的末尾：

```
<VirtualHost *:8888>
    ServerName zf2-tutorial.localhost
    DocumentRoot /absolute/path/to/your/projects/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /absolute/path/to/your/projects/zf2-tutorial/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

现在添加这一行

```
127.0.0.1               zf2-tutorial.localhost localhost 
```

到你的`/private/etc/hosts`文件。

重新启动 MAMP。

转到[http://zf2-tutorial.localhost:8888/](http://zf2-tutorial.localhost:8888/)后，您应该会看到“欢迎使用 Zend Framework 2”开始页面。转到[http://zf2-tutorial.localhost:8888/1234](http://zf2-tutorial.localhost:8888/1234)后，您应该会看到**404 ZF2 页面**，该页面的内容应该是这样的：

![zf2 405](../Images/dea153ea70edb319c37256b40dca4251.png)

如果你看到类似的东西，一切都很正常。这意味着您的 mod_rewrite 正在工作，并且您已被重定向到**404 ZF2 页面**，该页面插入了**默认的 apache“未找到”页面**，例如

![apache默认404页面](../Images/08fdc035cf807633af5197ea8818952a.png)

# android - 用Java解码数据

> ID：13827307
> 
> 赞同：0
> 
> 时间：2012-12-11T19:43:05.227
> 
> 标签：android, renderscript

我想从 ICS 上的渲染脚本中检索数据。

我使用以下脚本发送数据：

```
bool l_res = rsSendToClient(1,  &data, sizeof(data));
rsDebug("rsSendToClient:", (l_res?"Ok":"Error")); 
```

我使用以下方法在 java 中接收数据：

```
RSMessageHandler l_resHandler = new RSMessageHandler()
{
        @Override
        public void run()
        {
            switch (mID)
            {
                case 1:
                {
                    // Handle mData 
                    ??
                }
                break;
                default: super.run();
                    break;
            }
        }

     };
     mRS.setMessageHandler(l_resHandler); 
```

mData 是一个 int 数组。

如何将其转换为所需的类型？例如一个双精度数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:31:42.713

这不是您希望在 Java 和 Renderscript 之间传递数据的方式。您确实应该创建适当类型的分配并使用它（即双倍的 MxN 分配）。消息意味着简短而简单（AOSP 代码库中有一些示例使用消息来表示已填写特定分配 - 请查看 frameworks/base/tests/RenderScriptTests/tests 以获取源代码）。

# java - 64 位 JVM 上的 Java 长性能

> ID：13827311
> 
> 赞同：0
> 
> 时间：2012-12-11T19:43:11.113
> 
> 标签：java

我很感兴趣在 x86-64 服务器上部署的 4 位 JVM 上使用许多 Long 变量时的性能如何？如果我在同一台服务器上使用相同的整数，会有什么大的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:02:55.587

我的环境：

```
$ java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

这是我刚才运行的代码：

```
import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

public class Performance extends SimpleBenchmark {
  static final Random rnd = new Random();
  static long iters = 100_000_000 + rnd.nextInt(10_000_000);

  public long timeLong(int reps) {
    long sum = rnd.nextLong();
    for (int rep = 0; rep < reps; rep++)
      for (long l = 0; l < iters; l++) sum ^= l;
    return sum;
  }
  public int timeInt(int reps) {
    int sum = rnd.nextInt();
    int iters = (int) Performance.iters;
    for (int rep = 0; rep < reps; rep++)
      for (int l = 0; l < iters; l++) sum ^= l;
    return sum;
  }

  public static void main(String... args) {
    Runner.main(Performance.class, args);
  }
} 
```

这些就是结果；

```
 0% Scenario{vm=java, trial=0, benchmark=Long} 105721736.11 ns; σ=1752926.46 ns @ 10 trials
50% Scenario{vm=java, trial=0, benchmark=Int} 71749350.00 ns; σ=188518.06 ns @ 3 trials

benchmark    ms linear runtime
     Long 105.7 ==============================
      Int  71.7 ==================== 
```

如果替换`^=`为`+=`，则差异更大：

```
benchmark    ms linear runtime
     Long 109.1 ==============================
      Int  53.8 ============== 
```

这可能意味着 XOR 本身同样快，但 ADD 慢两倍。

# mysql - MySQL选择与表不同？

> ID：13827313
> 
> 赞同：1
> 
> 时间：2012-12-11T19:43:17.263
> 
> 标签：mysql

我遇到了一个小问题，我需要执行以下操作...

选择`province, count(*)`所有行的`DISTINCT`电子邮件地址和`GROUP BY`省份。所以我最终会得到类似的东西

```
Province | Count(*)
Province | Count(*) 
```

假设 AB 有 1500 个不同的电子邮件地址，SK 有 1200 个不同的电子邮件地址

```
AB | 1500
SK | 1200 
```

将是结果，但如果我对多行执行 DISTINCT 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:47:16.870

```
SELECT province, COUNT(DISTINCT email) FROM table GROUP BY province; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:48:17.140

这很简单：

```
SELECT province, COUNT(DISTINCT email) as `count`
FROM table
GROUP BY province 
```

# java - 为什么不需要在类路径中的 jar 中执行权限

> ID：13827315
> 
> 赞同：3
> 
> 时间：2012-12-11T19:43:25.590
> 
> 标签：java, jvm

我一直认为您需要在 java 程序的类路径中的 jar 中设置执行权限。但我今天发现实际上你所需要的只是读取权限。乍一看我有点惊讶，但我认为这是有道理的，因为 JVM 只需要读取类文件（jvm 字节码）并将其实际解释/编译成 OS 可运行字节码。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:45:38.740

因为罐子没有被执行。

java 可执行文件（或 javaw）是需要执行位的。它只是读取其他文件（.jar 或 .class）。

# c# - 从 ffmpeg 保存帧

> ID：13827316
> 
> 赞同：1
> 
> 时间：2012-12-11T19:43:32.277
> 
> 标签：c#, ffmpeg

我在 C# 中使用 ffmpeg 将电影丢弃到其帧图像并将每个帧保存为 .png 图像。但是，我无法保存帧！代码运行，但我无法将它们保存到文件夹中！我想知道如何将 ffmpeg 的输出保存到文件夹中。

```
public static void GetVideoFrames(string saveTo)
{
    string mpegpath = @"E:\Csharp\ffvideo\";
    string ffmpegPath = Path.Combine(mpegpath, "ffmpeg.exe");
    string inputMovie = @"E:\Csharp\ffvideo\test.mp4";
    string parameters = string.Format("ffmpeg -i {0} -f image2 frame-%1d.png -y {1}",
        inputMovie, saveTo);
    Process proc = new Process();
    proc.StartInfo.FileName = ffmpegPath;
    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.Arguments = parameters;
    proc.Start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:15:43.223

你正在设置`proc.StartInfo.FileName = ffmpegPath;`，但是你的`parameters`字符串是

```
string.Format("ffmpeg -i {0} -f image2 frame-%1d.png -y {1}", inputMovie, saveTo); 
```

尝试`ffmpeg`从这个字符串中取出，让它看起来像：

```
string.Format("-i {0} -f image2 frame-%1d.png -y {1}", inputMovie, saveTo); 
```

我建议这里发生的是实际正在执行的命令是：

```
\path\to\ffmpeg.exe ffmpeg -i E:\Csharp\ffvideo\test.mp4 -f image2 frame-%1d.png -y \output\dir\path\ 
```

EXE 不喜欢那第二个`ffmpeg`。

**编辑：**

我可以使用以下命令将视频分割成单独的图像：

```
ffmpeg.exe -i Test.mp4 -f image2 frame-1%d.png 
```

该`-y`选项实际上表示`ffmpeg`将[在不询问的情况下覆盖文件](http://ffmpeg.org/ffmpeg.html#Main-options)。

从[描述](http://ffmpeg.org/ffmpeg.html#Description)

> 在命令行上找到的任何不能被解释为选项的东西都被认为是输出文件名。

这意味着`ffmpeg`将其`\output\dir\path\`视为输出文件，这在您的情况下不起作用。

我认为你最好的选择可能是尝试设置`proc.StartInfo.WorkingDirectory`你想要写入图像的目录。注意：下面的编辑可能是更好的方法。

**编辑2：**

要让它们进入所选目录，请从以下更改您的格式字符串：

```
frame-%1d.png 
```

对此：

```
\output\path\frame-%1d.png 
```

# c# - C# WebBrowser.ShowPrintDialog() 不显示

> ID：13827317
> 
> 赞同：0
> 
> 时间：2012-12-11T19:43:34.603
> 
> 标签：c#, html, printing

我想打印一个 html 报告时遇到了这个特殊的问题。该文件本身是一个普通的本地 html 文件，位于我的硬盘上。

为此，我尝试了以下方法：

```
 public static void PrintReport(string path)
    {
        WebBrowser wb = new WebBrowser();
        wb.Navigate(path);
        wb.ShowPrintDialog()
    } 
```

我有一个带有点击事件按钮的表单：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string path = @"D:\MyReport.html";
        PrintReport(path);
    } 
```

这绝对没有任何作用。这有点奇怪……但事情变得更奇怪了……

编辑打印功能时执行以下操作：

```
 public static void PrintReport(string path)
    {
        WebBrowser wb = new WebBrowser();
        wb.Navigate(path);
        MessageBox.Show("TEST");
        wb.ShowPrintDialog()
    } 
```

有用。是的，只添加一个 MessageBox。MessageBox 正在显示，然后是打印对话框。我也尝试过使用 Thread.Sleep(1000) 代替，但它不起作用。谁能向我解释这里发生了什么？为什么消息框会有任何不同？

可能是某种许可问题吗？我已经在 Windows 7 和 8 上重现了这个，同样的事情。我只用上面的代码制作了这个小应用程序来隔离问题。我很确定它可以在 Windows XP 上运行，因为我正在处理的应用程序的旧版本在它上面运行。当尝试直接使用 mshtml-dll 执行此操作时，我也会遇到问题。

非常感谢任何输入或澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:02:02.790

问题是浏览器还没有准备好打印。您需要将事件处理程序 WebBrowserDocumentCompletedEventHandler 添加到 WebBrowser 对象。下面的示例代码。

```
public static void PrintReport(string path)
{
    WebBrowser wb = new WebBrowser();
    wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser_DocumentCompleted);
    wb.Navigate(path);
}

public static void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    WebBrowser wb = (WebBrowser)sender;
    if (wb.ReadyState.Equals(WebBrowserReadyState.Complete))
        wb.ShowPrintDialog();
} 
```

# python - 无法解释的python缩进错误

> ID：13827318
> 
> 赞同：0
> 
> 时间：2012-12-11T19:43:35.057
> 
> 标签：python, python-2.7

我正在用python编写家庭作业。我写了几个函数，一切都很好。我试图添加第三个函数，python 给了我“预期有缩进块”的消息。我知道混合制表符和空格存在问题。我尝试了它们，但没有任何区别。尝试更改制表符间距，在另一台 PC 上重写整个代码。我一无所知...可能是什么问题？

```
def xor_bytes(byte1, byte2):
    xor = ""
    for i in range(len(byte1)):
        if byte1[i] == byte2[i]:
            xor = xor + "0"
        else:
            xor = xor + "1"
    return xor

def verify_checksum(datagram):
    checksum = '00000000'
    total = False
    for i in range((len(datagram)/8)-1):
        checksum = xor_bytes(checksum,datagram[8*(i):8*(i+1)])
        if checksum == datagram[len(datagram)-8 : len(datagram)]:
            total = True
    return total
def check_datagram(datagram,src_comp,dst_app): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:48:17.027

您可能仍然混合制表符和空格，不要那样做。

运行`python -tt yourscript.py`以检测缩进变得不一致的*位置。*调整您的编辑器以仅使用空格（将制表符扩展到空格，使用空格进行缩进等）。

请注意，您确实需要为新函数指定一个*主体*，否则您将收到相同的错误：

```
>>> def foo(bar):
... 
  File "<stdin>", line 2

    ^
IndentationError: expected an indented block 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:42:49.873

在你的例子中最后一行之后有什么吗？

```
def check_datagram(datagram,src_comp,dst_app): 
```

如果不是：Python 要求代码块不是“空的”。我会将其更改为：

```
def check_datagram(datagram,src_comp,dst_app):
    pass 
```

# c++ - 消除 C++11 可变参数模板参数中的重复条目

> ID：13827319
> 
> 赞同：11
> 
> 时间：2012-12-11T19:43:41.940
> 
> 标签：c++, c++11, multiple-inheritance, variadic-templates, virtual-inheritance

我在 C++ 中使用具有多个虚拟继承的可变参数模板将类型聚合到单个结构定义中。

这是一组结构示例：

```
struct meas { int i; };
struct meas2 : public virtual meas { int j; };
struct meas3 : public virtual meas { int k; }; 
```

然后我使用多个虚拟继承聚合这些：

```
template <typename... Args>
struct zipper : public virtual Args... {}; 
```

然后我可以这样做：

```
typedef zipper<meas, meas2> meas_type;
meas* m = new meas_type; 
```

然后这些可以级联：

```
typedef zipper<meas3, meas_type> meas_type2; 
```

然而，生成的对象相当笨拙：

```
$46 = (zipper<meas3, zipper<meas, meas2> >) {
  <meas3> = {
    <meas> = {
      i = 0
    }, 
    members of meas3: 
    _vptr.meas3 = 0x400ec8, 
    k = 0
  }, 
  <zipper<meas, meas2>> = {
    <meas2> = {
      members of meas2: 
      _vptr.meas2 = 0x400ee0, 
      j = 6299120
    }, 
    members of zipper<meas, meas2>: 
    _vptr.zipper = 0x400eb0
  }, <No data fields>} 
```

根据gdb。

尝试压缩相同的基本类型时还有一个次要问题：

```
typedef zipper<meas, meas> meas_type2; 
```

以上在 G++ 4.6.3 下会产生编译器错误“duplicate base class 'meas' is invalid”。

因此，问题是双重的：

1.  **有没有办法`zipper<meas3, zipper<meas, meas2>>`变身`zipper<meas3, meas2>`？**
2.  **有没有办法在完成 #1 的同时删除类型列表中的重复条目？**

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T13:16:20.640

我解决这个问题的策略是使用一些间接级别。

*   zipper < Args...> 通过继承将其参数的处理分派给函数 process_zipper_arguments：

例子：

```
template < typename... Args >
struct zipper : zipper < typename process_zipper_arguments < Args... >::type > {}; 
```

*   使用 a`template < typename... Args > struct typelist {}`来跟踪要继承的对象类型。
*   专门`struct zipper < typelist < Args... > >: public virtual Args...`做实际的继承

为了摆脱重复的父类型，使用了两个辅助函数`process_zipper_arguments`：

*   `is_in < CandidateType, typelist< Args... > >::type`是`true_type`或`false_type`并且可以递归定义
*   `add_unique < CandidateType, typelist< Args... > >::type`是一个`typelist <...>`添加或不添加 CandidateType 的。它要求`is_in`确定这一点。

这是至少使用 g++ (GCC) 4.6.3 和 --std=c++0x 编译的完整代码。欢迎批评。

```
// Forward declarations
template < typename... Args >
struct zipper;

// Two types meaning true and false
struct true_type {};
struct false_type {};

// The only purpose of this struct is to be associated with Types...
template < typename... Types >
struct typelist {};

// ===================================================
// is_in < type, typelist<...> >::type
//     is true_type if type is in typelist
//     is false_type if type is not in typelist

// Assume TElement is not in the list unless proven otherwise
template < typename TElement, typename TList >
struct is_in {
  typedef false_type type;
};

// If it matches the first type, it is definitely in the list
template < typename TElement, typename... TTail >
struct is_in < TElement, typelist < TElement, TTail... > >
{
  typedef true_type type;
};

// If it is not the first element, check the remaining list
template < typename TElement, typename THead, typename... TTail >
struct is_in < TElement, typelist < THead, TTail... > >
{
  typedef typename is_in < TElement, typelist < TTail... > >::type type;
};

// ===================================================
// add_unique < TNew, typelist<...> >::type
//     is typelist < TNew, ... > if TNew is not already in the list
//     is typelist <...> otherwise

// Append a type to a type_list unless it already exists
template < typename TNew, typename TList,
  typename Tis_duplicate = typename is_in < TNew, TList >::type
  >
struct add_unique;

// If TNew is in the list, return the list unmodified
template < typename TNew, typename... TList >
struct add_unique < TNew, typelist < TList... >, true_type >
{
  typedef typelist < TList... > type;
};

// If TNew is not in the list, append it
template < typename TNew, typename... TList >
struct add_unique < TNew, typelist < TList... >, false_type >
{
  typedef typelist < TNew, TList... > type;
};

// ===================================================
// process_zipper_arguments < Args... >::type
//     returns a typelist of types to be inherited from.
//
// It performs the following actions:
// a) Unpack zipper<...> and typelist <...> arguments
// b) Ignore values that are already in the list

template < typename... Args >
struct process_zipper_arguments;

// Unpack a zipper in the first argument
template < typename... ZipperArgs, typename... Args >
struct process_zipper_arguments < zipper < ZipperArgs... >, Args... >
{
  typedef typename process_zipper_arguments < ZipperArgs..., Args... >::type type;
};

// Unpack a typelist in the first argument
template < typename... TypeListArgs, typename... Args >
struct process_zipper_arguments < typelist < TypeListArgs... >, Args... >
{
  typedef typename process_zipper_arguments < TypeListArgs..., Args... >::type type;
};

// End the recursion if the list is empty
template < >
struct process_zipper_arguments < >
{
  typedef typelist < > type;
};

// Construct the list of unique types by appending them one by one
template < typename THead, typename... TTail >
struct process_zipper_arguments < THead, TTail... >
{
  typedef typename
    add_unique < THead,
      typename process_zipper_arguments < TTail... >::type
    >::type type;
};

// ===================================================
// The zipper class that you might want

// If the list of types is not yet known, process it.
// The inheritance is ugly, but there is a workaround
template < typename... Args >
struct zipper : zipper < typename process_zipper_arguments < Args... >::type >
{
  // // Instead of inheriting, you can use zipper as a factory.
  // // So this:
  // typedef zipper < meas2, zipper < meas1, meas > > mymeas;
  // // Turns to:
  // typedef typename zipper < meas2, zipper < meas1, meas > >::type mymeas;
  typedef zipper < typename process_zipper_arguments < Args... >::type > type;
};

// If the list of types is known, inherit from each type
template < typename... Args >
struct zipper < typelist < Args... > >
: public virtual Args...
{};

// ===================================================
// Short usage demo, replace with your own code

struct meas {
    int i;
};

struct meas2 {
    int j;
};

struct meas3 {
    int k;
};

typedef zipper < meas, meas, meas3 > meas_type;
typedef zipper < meas2, meas_type, meas2 > meas_type2;

typedef typename zipper < meas_type2 >::type nicer_meas_type2;

int main ( int, char** )
{
    meas * m = new meas_type2;
    meas_type2 n;
    nicer_meas_type2 o;

    return 0;
} 
```

调试它会得到以下结果（`return 0;`行处的断点）：

```
(gdb) print *m
$1 = {i = 0}
(gdb) print n
$2 = {<zipper<typelist<meas, meas3, meas2> >> = {<meas> = {i = 4196320}, <meas3> = {k = 0}, <meas2> = {j = 0}, 
    _vptr.zipper = 0x400928}, <No data fields>}
(gdb) print o
$3 = {<meas> = {i = 4195719}, <meas3> = {k = 0}, <meas2> = {j = 1}, _vptr.zipper = 0x4009a8 <VTT for zipper<typelist<meas, meas3, meas2> >>} 
```

# cocoa - 手动绘制 NSView 的子视图

> ID：13827321
> 
> 赞同：0
> 
> 时间：2012-12-11T19:43:44.587
> 
> 标签：cocoa, drawing, core-animation, core-graphics, nsview

我正在编写一个自定义 NSView，它需要在绘制子视图之前应用 NSAffineTransformation 为其子视图设置动画。

我正在寻找一种方法来绘制视图的子视图，以便我可以以这样的方式覆盖它：

```
-(void)drawSubview:(NSView*)subview {
    [[NSGraphicsContext saveGraphicsState];
    [[self affineTrasformForSubview: subview] concat];
    [subview drawRect: subview.bounds];
    [[NSGraphicsContext restoreGraphicsState];
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T11:01:00.953

旋转：NSView setFrameCenterRotation:angle

用于缩放： NSView scaleUnitSquareToSize:size

除了旋转和缩放之外，您还需要使您的视图成为一个支持图层并弄乱该图层，即使这违反了苹果的建议。但我不会太担心这一点，我认为值得一试。

# android - 如何离线使用 MOBAC 创建的 OSMDroid SQLite 瓦片源文件？

> ID：13827324
> 
> 赞同：6
> 
> 时间：2012-12-11T19:43:49.273
> 
> 标签：android, osmdroid

我一直在努力让我自己的离线 Mobile Atlas Creator OSMDroid SQLite 地图与 OSMDroid 3.0.8 一起工作，但没有运气。这是漫长的3天。我将尝试用我的应用程序中的剪辑进行解释。我一直在扩展 ItemizedIconOverlay 和 OverlayItem 所以我希望它不会变得太混乱。

我创建了自己的 OSMDroid SQLite 地图文件，其中有 3 个不同的缩放级别，比如 10 平方公里。我将生成的“base.sqlite”文件复制到我的项目 /res/raw/ 目录中。请注意，我的应用程序中的 GeoPoints 应该在地图的瓦片范围内。“base.sqlite”文件应该保存到应用程序特定的数据目录中。

接下来，我整理了手机上的 /osmdroid 目录，这样我就可以关闭之前缓存的地图。我以为我自己的离线地图可以工作，直到我打开飞行模式并注意到缓存的地图仍然可用。

现在我得到的只是空白。我不知道该怎么做。我看过几个例子，但经过大量实验后，我没有成功让它们中的任何一个工作。

```
private Hashtable<String, NodeOverlayItem> nodes = new Hashtable<String, NodeOverlayItem>();

private MapView mapView;
private Context context;

private LocationManager locManager;

private MapController mapController;
private MapTileProviderArray mapProvider;
private String mapTileArchivePath = "base.sqlite";

private ResourceProxy resourceProxy;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
        this.mapView = new MapView(this, 256);
        this.mapView.setBuiltInZoomControls(true);
        this.mapView.setMultiTouchControls(true);

        this.context = this.getApplicationContext();
        this.resourceProxy = new DefaultResourceProxyImpl(context);

        XYTileSource TILERENDERER = new XYTileSource("test", 
            ResourceProxy.string.offline_mode, 
            1, 20, 256, ".png", "http://127.0.0.1");
        SimpleRegisterReceiver simpleReceiver = new SimpleRegisterReceiver(this.context);

        IArchiveFile[] archives = { ArchiveFileFactory.getArchiveFile(this.getMapsFile()) };
        MapTileModuleProviderBase moduleProvider = new MapTileFileArchiveProvider(
                simpleReceiver, 
                TILERENDERER, 
                archives);
        this.mapProvider = new MapTileProviderArray(TILERENDERER, null, new MapTileModuleProviderBase[] { moduleProvider });
        this.mapProvider.setUseDataConnection(false);
        this.mapView = new MapView(this, 256, this.resourceProxy, this.mapProvider);
        this.mapView.setUseDataConnection(false);

        mapController = mapView.getController();
        mapController.setZoom(18);
        mapController.setCenter(new GeoPoint((int)(45.349622 * 1E6), (int)(-75.880700 *1E6)));

        this.setContentView(mapView);
    } catch(Exception ex) {
        Log.e("test", ex.getMessage());
    }    
}

public File getMapsFile() throws IOException {
    Log.d("test", "Trying to load map tiles to: " + this.mapTileArchivePath);
    FileOutputStream fos = this.openFileOutput(this.mapTileArchivePath, Context.MODE_PRIVATE);

    InputStream in = getResources().openRawResource(R.raw.osmdroid);
    byte[] buff = new byte[1024];
    int read = 0;
    try {
    while ((read = in.read(buff)) > 0) {
      fos.write(buff, 0, read);
    }
    } finally {
      in.close();
      fos.close();
    }
    return new File(this.getFilesDir(), this.mapTileArchivePath);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T05:38:09.150

好的！我知道我做错了什么，我现在一切正常！（我很兴奋 ：）

首先，我在将原始资源映射文件写入应用程序特定目录（例如 openFileOutput()）时遇到了一些问题 我使用的是没有 SD 插槽的 Galaxy Nexus，因此我无法将映射文件转储到 SD . 确保您打算使用的地图文件与原始副本相比是字节。Eclipse 的 DDMS 透视图可用于查看设备的文件结构。

我还切换到了 OSMdroid Zip 格式。然后，我确保 XYTileSource() 名称与 MOBAC 在 Zip 文件中创建的目录匹配，并确保平铺大小和缩放级别匹配。

```
XYTileSource TILERENDERER = new XYTileSource("OSM CloudMade 1", ResourceProxy.string.offline_mode, 16, 18, 256, ".png", "http://127.0.0.1"); 
```

MOBAC 默认会创建 256 像素的图块。我创建了一个具有 16、17 和 18 个缩放级别的图集文件。PNG 是默认的 MOBAC 平铺图像格式。

此外，如果您的地图文件有任何问题，ArchiveFileFactory.getArchiveFile() 将捕获它们，甚至在 MapTileFileArchiveProvider 之前。

这是我的用法。尽一切努力正确设置您的 IArchive，您应该没问题：

```
 XYTileSource TILERENDERER = new XYTileSource("OSM CloudMade 1", ResourceProxy.string.offline_mode, 16, 18, 256, ".png", "http://127.0.0.1");
        SimpleRegisterReceiver simpleReceiver = new SimpleRegisterReceiver(this.context);
        IArchiveFile[] archives = { ArchiveFileFactory.getArchiveFile(this.getMapsSdCard()) };
        MapTileModuleProviderBase moduleProvider = new MapTileFileArchiveProvider(
                simpleReceiver, 
                TILERENDERER, 
                archives);
        this.mapProvider = new MapTileProviderArray(TILERENDERER, null, new MapTileModuleProviderBase[] { moduleProvider });
        this.mapProvider.setUseDataConnection(false);
        this.mapView = new MapView(this, 256, this.resourceProxy, this.mapProvider);
        this.mapView.setUseDataConnection(false); 
```

也许我是唯一遇到这个问题的人，但是 osmdroid 并没有清楚地记录如何做到这一点，当我打开这个问题时，我无法让他们评论我的使用情况。如果他们说我正确地实现了 MapTileFileArchiveProvider 或包含了一个好的离线地图示例，我会首先关注其他所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:55:54.337

如果你想使用 sqlite db 你只需要改变

`ArchiveFileFactory.getArchiveFile(this.getMapsSdCard())`

到

`MBTilesFileArchive.getDatabaseFileArchive(f)`

`f`指向您的 sqlite 数据库的文件在哪里。

# html - favicon.ico 的正确 MIME 类型？

> ID：13827325
> 
> 赞同：183
> 
> 时间：2012-12-11T19:43:55.537
> 
> 标签：html, browser, mime-types, favicon

根据**Internet 编号分配机构**(IANA)，所有 .ico 文件都属于 MIME 类型`image/vnd.microsoft.icon`。（[来源](http://www.iana.org/assignments/media-types/image/vnd.microsoft.icon)）

例如 `<link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico" />`

然而，精明的互联网大师**Paul Irish**声称这是错误的，而且实际上是`image/x-icon`。（[来源](https://github.com/paulirish/html5-boilerplate/commit/37b5fec090d00f38de64b591bcddcb205aadf8ee)）

例如 `<link rel="icon" type="image/x-icon" href="favicon.ico" />`

我知道你可以不包括 .ico 文件的“类型”，但如果你要包括一个，应该是哪个？将其用作官方 IANA 类型实际上是否存在任何问题？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-12-11T21:37:55.717

当您将 .ico 文件用作网站图标时，这并不重要。所有主流浏览器都能正确识别这两种 mime 类型。所以你可以放：

```
<!-- IE -->
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<!-- other browsers -->
<link rel="icon" type="image/x-icon" href="favicon.ico" /> 
```

或与 相同`image/vnd.microsoft.icon`，它适用于所有浏览器。

注意：对于 MIME-type 没有 IANA 规范`image/x-icon`，所以看起来它确实比`image/vnd.microsoft.icon`.

唯一不同的情况是您尝试在`<img>`标签中使用 .ico 文件（这很不寻常）。根据之前的测试，一些浏览器只会在使用 MIME-type 服务时将 .ico 文件显示为图像`image/x-icon`。最近的测试表明：Chromium、Firefox 和 Edge 对这两种内容类型都很好，而 IE11 则不然。如果可以，请避免将`ico`文件用作图像，使用`png`.

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-02-03T13:25:32.563

我认为这篇维基百科文章很好地解释了这种混淆的根源[。](http://en.wikipedia.org/wiki/ICO_%28file_format%29)

> 虽然 IANA 注册的 ICO 文件 MIME 类型是 image/vnd.microsoft.icon，但它是在 2003 年由第三方提交给 IANA 的，并且不被 Microsoft 软件识别，而是使用 image/x-icon。

如果连 ICO 格式的发明者都不使用官方的 MIME 类型，我也会使用`image/x-icon`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-19T23:01:08.940

我注意到在使用时`type="image/vnd.microsoft.icon"`，当浏览器未连接到互联网时，图标无法出现。但是`type="image/x-icon"`无论浏览器是否可以连接到互联网都有效。开发时，有时我没有连接到互联网。

# c - C中的字符串到十进制数

> ID：13827328
> 
> 赞同：-3
> 
> 时间：2012-12-11T19:44:07.073
> 
> 标签：c, string

> **可能的重复：**
> [将字符串转换为双精度](https://stackoverflow.com/questions/2892998/converting-a-string-into-a-double)

我需要转换`" 5.71"`为`5.71`C。

我正在读取字符串作为标记，但需要将值存储为双精度值。

有没有这样做的功能？我应该使用什么打印语句？

```
char *number = "5.71";
printf("%???", double); 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:46:32.653

您正在寻找[`strtod()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtod.html).

> 我应该使用什么打印语句？

的格式说明符`double`是`%lf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:49:32.103

> 有没有这样做的功能？

是的，[strtod、strtof 和 strtold](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtod.html)分别将字符串转换为`double`、`float`和`long double`。例如：

```
float f = strtof("2.718281829", NULL); 
```

> 我应该使用什么打印语句？

呃，它们被称为**格式说明符。**它们也有所不同，具体取决于确切的类型：

```
float f = 3.14;
double d = 3.14;
long double ld = 3.14;

printf("%f %lf %llf\n", f, d, ld); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:48:12.787

考虑使用

```
sscanf(number, "%f", &doubleVar); 
```

这应该是做到这一点的“标准”方式。

# diff - 差异忽略空白喜欢

> ID：13827329
> 
> 赞同：2
> 
> 时间：2012-12-11T19:44:08.423
> 
> 标签：diff

如何让 GNU diff 忽略以下示例中的空行？

文件一：

```
x
do

done 
```

文件 b：

```
x

do
done 
```

两个文件的任何行都没有尾随空格。

在 Mac OS XI 上使用 GNU diff 3.1 得到：

```
diff -w a b
2d1
< do
3a3
> do 
```

当我添加各种有希望的选项时也是如此：

```
diff --suppress-blank-empty -E -b -w -B -I '^[[:space:]]*$' --strip-trailing-cr -i a b
2d1
< do
3a3
> do 
```

我在这里想念什么？

```
diff --version
diff (GNU diffutils) 3.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T18:05:46.013

我认为这里的问题是 diff 被`do`视为从第一个文件中删除，并添加到第二个文件中，可能是因为更改周围没有足够的上下文。

如果您将文件的顺序颠倒为参数，则 diff 会报告该空间已添加和删除，然后将使用`--ignore-blanks-lines`.

把它看成一个统一的差异，这更清楚一点：

```
$ diff test.txt test2.txt -u
--- test.txt    2015-10-20 10:50:52.585167600 -0700
+++ test2.txt   2015-10-20 10:51:01.042167600 -0700
@@ -1,4 +1,4 @@
 x
-do

+do
 done

prp@QW7PRP09-14 ~/temp
$ diff test2.txt test.txt -u
--- test2.txt   2015-10-20 10:51:01.042167600 -0700
+++ test.txt    2015-10-20 10:50:52.585167600 -0700
@@ -1,4 +1,4 @@
 x
-
 do
+
 done 
```

以及 --ignore-blank-lines 的结果，并且顺序切换：

```
prp@QW7PRP09-14 ~/temp
$ diff test2.txt test.txt -B -u 
```

# html - 如何找到嵌套在 I-frame 中的元素？

> ID：13827336
> 
> 赞同：0
> 
> 时间：2012-12-11T19:44:47.560
> 
> 标签：html, ruby, selenium, cucumber, capybara

我想测试电子邮件的正文。

它使用 FCK 编辑器，深度为 3 个 i 帧。

```
<...name="fancybox-frame"...>
    <iframe>
        <iframe>
             <body>H E R E  I S  W H A T   I   W A N T  T O   A C C E S S</body>
        </iframe>
    </iframe>
</[fancybox-frame]> 
```

除了模棱两可的乐趣之外，我如何多次使用帧内。

如果我用这个...

```
within_frame('fancybox-frame') do
fill_in('frm_subject', :with => eventname + ' email')
within_frame('iframe[id="frm_message___Frame"]') do
  within_frame('iframe') do
    fill_in('body', :with => 'Event email for ' + now.to_s)
  end
end 
```

结尾

我明白这个...

```
 switchFrame execution failed;
   INVALID_EXPRESSION_ERR: DOM XPath Exception 51 (Selenium::WebDriver::Erro
r::WebDriverError)
  ./features/step_definitions/RCST08_steps.rb:96:in `block (2 levels) in <to
p (required)>'
  ./features/step_definitions/RCST08_steps.rb:94:in `/^select a message to s
end\.$/'
  features\RCST08.feature:26:in `And select a message to send.' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:11:31.240

在您“切换”到它之前，Selenium 无法解决框架（<IFRAME> 或 <FRAME>）内的任何内容。在 Ruby 绑定中，就是这样`within_frame(...) do ... end`做的。你似乎是你想成为的地方之外的一帧。你需要更多这样的东西：

```
within_frame('fancybox-frame') do
  fill_in('frm_subject', :with => eventname + ' email')
  within_frame('iframe[id="frm_message___Frame"]') do
    within_frame('...name of outer iframe...') do
      within_frame('...name of inner iframe...') do
        fill_in('body', :with => 'Event email for ' + now.to_s)
      end
    end
  end
end 
```

# c++ - 通过 GNU 扩展 asm 约束加载 64 位整数常量？

> ID：13827337
> 
> 赞同：2
> 
> 时间：2012-12-11T19:44:51.573
> 
> 标签：c++, assembly, clang, low-level

我用 Clang 兼容的“GNU 扩展 asm”编写了这段代码：

```
namespace foreign {
    extern char magic_pointer[];
}

extern "C" __attribute__((naked)) void get_address_of_x(void)
{
    asm volatile("movq %[magic_pointer], %%rax\n\t"
                 "ret"
                 : : [magic_pointer] "p"(&foreign::magic_pointer));
} 
```

我希望它编译成以下程序集：

```
_get_address_of_x:
## InlineAsm Start
    movq    $__ZN7foreign13magic_pointerE, %rax
    ret
## InlineAsm End
    ret  /* useless but I don't think there's any way to get rid of it */ 
```

但相反，我得到了这个“废话”：

```
_get_address_of_x:
movq    __ZN7foreign13magic_pointerE@GOTPCREL(%rip), %rax
movq    %rax, -8(%rbp)
## InlineAsm Start
movq -8(%rbp), %rax
    ret
## InlineAsm End
ret 
```

显然 Clang 正在分配`&foreign::magic_pointer`into的值`%rax`（这对函数来说是致命的`naked`），然后进一步将其“溢出”到一个甚至不*存在*的堆栈帧上，这样它就可以在 inline asm 块中再次将其拉出。

那么，我怎样才能让 Clang 生成我想要的代码，而不需要手动修改名称呢？我的意思是我可以写

```
extern "C" __attribute__((naked)) void get_address_of_x(void)
{
    asm volatile("movq  __ZN7foreign13magic_pointerE@GOTPCREL(%rip), %rax\n\t"
                 "ret");
} 
```

但如果有任何方法可以帮助它，我真的不想这样做。

在开始之前`"p"`，我尝试了`"i"`and`"n"`约束；但它们似乎不适用于 64 位指针操作数。Clang 不断给我错误消息，告诉我无法将操作数分配给`%flags`寄存器，这似乎是一些疯狂的事情出错了。

* * *

对于那些有兴趣在这里解决“XY问题”的人：我真的在尝试编写一个更长的程序集存根，它调用另一个函数`foo(void *p, ...)`，其中参数`p`设置为此魔术指针值，其他参数基于原始设置输入此程序集存根时 CPU 寄存器的值。（因此，`naked`功能。）任意公司政策阻止只是在`.S`文件中写入该死的东西; 此外，我真的*很想*写`foreign::magic_pointer`而不是`__ZN7foreign...etc...`. 无论如何，这应该解释为什么在这种情况下将临时结果溢出到堆栈或寄存器是严格禁止的。

* * *

也许有一些方法可以写

```
asm volatile(".long %[magic_pointer]" : : [magic_pointer] "???"(&foreign::magic_pointer)); 
```

让 Clang 准确插入我想要的重定位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:26:07.547

我认为这就是你想要的：

```
namespace foreign {
    extern char magic_pointer[];
}

extern "C" __attribute__((naked)) void get_address_of_x(void)
{
    asm volatile ("ret" : : "a"(&foreign::magic_pointer));
} 
```

在此上下文中，“a”是指定`%rax`必须使用的约束。然后，Clang 将加载 in 的地址`magic_pointer`以`%rax`准备执行您的内联 asm，这就是您所需要的。

这有点狡猾，因为它定义了 asm 文本中未引用的约束，我不确定这在技术上是否允许/定义明确 - 但它确实适用于最新的 clang。

在 clang 3.0-6ubuntu3 上（因为我很懒惰并使用[gcc.godbolt.org](http://gcc.godbolt.org/#%7B%22version%22:3,%22filterAsm%22%3a%7B%22labels%22%3atrue,%22directives%22%3atrue,%22commentOnly%22%3atrue%7D,%22compilers%22%3a%5B%7B%22source%22%3a%22namespace%20foreign%20%7B%5Cn%20%20%20%20extern%20char%20magic_pointer%5B%5D;%5Cn%7D%5Cn%5Cnextern%20%5C%22C%5C%22%20__attribute__%28%28naked%29%29%20void%20get_address_of_x%28void%29%5Cn%7B%5Cn%20%20%20%20asm%20volatile%20%28%5C%22%5C%22%20%3a%20%3a%20%5C%22a%5C%22%28&foreign%3a%3amagic_pointer%29%29;%5Cn%7D%22,%22compiler%22%3a%22/usr/bin/clang++%22,%22options%22%3a%22-fPIC%22%7D%5D%7D)），使用`-fPIC`，这是你得到的 asm：

```
get_address_of_x:                       # @get_address_of_x
    movq    foreign::magic_pointer@GOTPCREL(%rip), %rax
    ret
    ret 
```

并且没有`-fPIC`：

```
get_address_of_x:                       # @get_address_of_x
    movl    foreign::magic_pointer, %eax
    ret
    ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:43:01.573

在这里。

我最终只是编写了一个帮助`extern "C"`函数来返回魔法值，然后从我的汇编代码中调用该函数。我仍然认为 Clang 应该以某种方式支持我原来的方法，但在我的实际案例中，这种方法的主要问题是它不能扩展到 x86-32。在 x86-64 上，将任意地址加载到`%rdx`可以在带有`%rip`-relative的单个指令中完成`mov`。但是在 x86-32 上，加载任意地址`-fPIC`会变成*大量*代码、`.indirect_symbol`指令、两次内存访问……我只是不想*尝试*手动编写所有这些。所以我最终的汇编代码看起来像

```
asm volatile(
    "...save original register values...;"
    "call  _get_magic_pointer;"
    "movq  %rax, %rdx;"
    "...set up other parameters to foo...;"
    "call  _foo;"
    "...cleanup..."
    ); 
```

更简单更清洁。:)

# geometry - 区号错误

> ID：13827342
> 
> 赞同：0
> 
> 时间：2012-12-11T19:45:04.870
> 
> 标签：geometry, area

设计一个扩展 GeometricObject 的名为 Triangle 的类（代码如下）。Triangle 类包含： • 三个名为side1、side2 和side3 的双精度数据字段，默认值1.0 表示三角形的三个边。• 创建默认三角形的无参数构造函数。• 创建具有指定边1、边2 和边3 的三角形的构造函数。• 所有三个数据字段的访问器方法。• 名为getArea() 的方法返回此三角形的面积。• 名为getPerimeter() 的方法返回此三角形的周长。• 一个名为 toString() 的方法，它返回三角形的字符串描述。

```
public class GeometricObject {
  private String color = "white";
  private boolean filled;
  private java.util.Date dateCreated;

  /** Construct a default geometric object */
  public GeometricObject() {
    dateCreated = new java.util.Date();
  }

  /** Construct a geometric object with the specified color 
    *  and filled value */
  public GeometricObject(String Color, boolean filled) {
    dateCreated = new java.util.Date();
    this.color = color;
    this.filled = filled;
  }

  /** Return color */
  public String getColor() {
    return color;
  }

  /** Set a new color */
  public void setColor(String color) {
    this.color = color;
  }

  /** Return filled. Since filled is boolean, 
     its get method is named isFilled */
  public boolean isFilled() {
    return filled;
  }

  /** Set a new filled */
  public void setFilled(boolean filled) {
    this.filled = filled;
  }

  /** Get dateCreated */
  public java.util.Date getDateCreated() {
    return dateCreated;
  }

  /** Return a string representation of this object */
  public String toString() {
    return "created on " + dateCreated + "\ncolor: " + color + 
      " and filled: " + filled;
  }
} 
```

休息

```
public class Triangle extends GeometricObject {

double side1 = 1.0;
double side2 = 1.0;
double side3 = 1.0;

public Triangle() {
side1=0.0;
side2=0.0;
side3=0.0;
}

public Triangle(double a, double b, double c) {
side1 = a;
side2 = b;
side3 = c;
}

public void show() {
System.out.println(side1+","+side2+","+side3+",");
}

public void calcArea(){
double s = 0.0, Num = 0.0;
s = 0.5*(side1+side2+side3);
Num = s*((s-side1)*(s-side2)*(s-side3));

}
public double getArea(){
return( 1/2*(side1*side2*side3));
}

public double getPerimeter(){
return (side1 + side2 + side3);
}

@Override
public String toString(){
      return "Triangle Information:+  “\nside1 = " + side1 + "\nside2 = " + side2 +
  "\nside3 = " + side3 + "\ncolor = " + getColor() + "\nfilled  =" + isFilled(); 
  }
} 
```

休息

```
public class DemoTriangle {
  public static void main(String[] args) {
    Triangle triangle = new Triangle(1, 1.5, 1);
    System.out.println(triangle);

    triangle.setColor("yellow");
    triangle.setFilled(true);

    System.out.println("The area is " + triangle.getArea());
    System.out.println("The perimeter is " + triangle.getPerimeter());
    System.out.println(triangle);
  }

} 
```

我正在运行代码，但由于某种原因，它总是将区域返回为“0.0”，而不是三角形的实际区域。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:00:25.963

您正在计算面积并在两个不同的函数中“获取”它。我认为您应该只计算并返回 getArea() 方法中的面积（实际上，您的 calcArea 方法什么都不做 - 它计算面积（错误地，我可能会添加），并且什么也不做。）

面积公式是您在 calcArea() 中的变量“Num”中计算的平方根。无需使用单独的函数 getArea() 和 calcArea()，只需将该代码放入 getArea() 并去掉 calcArea() 方法。

您从 getArea() 方法中得到 0 作为面积的原因是您以“1/2”开始公式，在整数除法下计算为 0（请记住整数除法会丢弃余数）。要解决此问题，您应该将其设为“1.0/2.0”，或者仅除以“2.0”。（当然，请记住，您在 getArea() 中使用的公式甚至都不正确！）

# jboss6.x - Hornetq org.jboss.mq.referenceable.ObjectRefAddr 异常

> ID：13827344
> 
> 赞同：0
> 
> 时间：2012-12-11T19:45:08.177
> 
> 标签：jboss6.x, hornetq

我正在尝试迁移 JBoss 4.2.2 应用程序或 6.1.0.FINAL，但在配置 hornetq 时遇到了一些困难。首先，这是我得到的例外：

```
12:32:26,133 ERROR [STDERR] javax.naming.NamingException: Could not dereference object [Root exception is javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is:
12:32:26,133 ERROR [STDERR] java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)]]
12:32:26,134 ERROR [STDERR] at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1356)
12:32:26,134 ERROR [STDERR] at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:819)
12:32:26,134 ERROR [STDERR] at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:688)
12:32:26,134 ERROR [STDERR] at javax.naming.InitialContext.lookup(InitialContext.java:392)
12:32:26,134 ERROR [STDERR] at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
12:32:26,134 ERROR [STDERR] at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
12:32:26,134 ERROR [STDERR] at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
12:32:26,135 ERROR [STDERR] at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
12:32:26,135 ERROR [STDERR] at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
12:32:26,135 ERROR [STDERR] at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
12:32:26,135 ERROR [STDERR] at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
12:32:26,135 ERROR [STDERR] at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
12:32:26,135 ERROR [STDERR] at com.myCompany.util.external.domainObject.patch.JmsTemplateFactory.init(JmsTemplateFactory.java:66)
12:32:26,135 ERROR [STDERR] at com.myCompany.util.external.domainObject.patch.JmsTemplateFactory.<init>(JmsTemplateFactory.java:43)
12:32:26,136 ERROR [STDERR] at com.myCompany.util.external.patch.ObjectMessageReceiver.start(ObjectMessageReceiver.java:53)
12:32:26,136 ERROR [STDERR] at com.myCompany.util.external.patch.ObjectMessageReceiver.run(ObjectMessageReceiver.java:37)
12:32:26,136 ERROR [STDERR] at org.jboss.resource.work.WorkWrapper.run(WorkWrapper.java:172)
12:32:26,136 ERROR [STDERR] at org.jboss.threads.SimpleDirectExecutor.execute(SimpleDirectExecutor.java:33)
12:32:26,136 ERROR [STDERR] at org.jboss.threads.CleanupExecutor.execute(CleanupExecutor.java:38)
12:32:26,136 ERROR [STDERR] at org.jboss.threads.CleanupExecutor.execute(CleanupExecutor.java:38)
12:32:26,137 ERROR [STDERR] at org.jboss.threads.QueuelessExecutor$Worker.run(QueuelessExecutor.java:614)
12:32:26,137 ERROR [STDERR] at java.lang.Thread.run(Thread.java:662)
12:32:26,137 ERROR [STDERR] at org.jboss.threads.JBossThread.run(JBossThread.java:122)
12:32:26,137 ERROR [STDERR] Caused by: javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is:
12:32:26,137 ERROR [STDERR] java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)]
12:32:26,138 ERROR [STDERR] at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:841)
12:32:26,138 ERROR [STDERR] at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:688)
12:32:26,138 ERROR [STDERR] at javax.naming.InitialContext.lookup(InitialContext.java:392)
12:32:26,138 ERROR [STDERR] at org.jnp.interfaces.NamingContext.resolveLink(NamingContext.java:1350)
12:32:26,138 ERROR [STDERR] ... 22 more
12:32:26,139 ERROR [STDERR] Caused by: java.rmi.UnmarshalException: error unmarshalling return; nested exception is:
12:32:26,139 ERROR [STDERR] java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)
12:32:26,139 ERROR [STDERR] at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:178)
12:32:26,139 ERROR [STDERR] at org.jboss.ha.framework.server.HARMIServerImpl_Stub.invoke(Unknown Source)
12:32:26,139 ERROR [STDERR] at org.jboss.ha.framework.interfaces.HARMIClient.invokeRemote(HARMIClient.java:225)
12:32:26,139 ERROR [STDERR] at org.jboss.ha.framework.interfaces.HARMIClient.invoke(HARMIClient.java:327)
12:32:26,140 ERROR [STDERR] at $Proxy210.lookup(Unknown Source)
12:32:26,140 ERROR [STDERR] at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:728)
12:32:26,140 ERROR [STDERR] ... 25 more
12:32:26,140 ERROR [STDERR] Caused by: java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)
12:32:26,141 ERROR [STDERR] at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:373)
12:32:26,141 ERROR [STDERR] at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:163)
12:32:26,141 ERROR [STDERR] at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
12:32:26,141 ERROR [STDERR] at org.jboss.system.JBossRMIClassLoader.loadClass(JBossRMIClassLoader.java:91)
12:32:26,141 ERROR [STDERR] at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:247)
12:32:26,141 ERROR [STDERR] at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:197)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1574)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1666)
12:32:26,142 ERROR [STDERR] at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1322)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
12:32:26,143 ERROR [STDERR] at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
12:32:26,144 ERROR [STDERR] at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
12:32:26,145 ERROR [STDERR] at sun.rmi.server.UnicastRef.unmarshalValue(UnicastRef.java:306)
12:32:26,145 ERROR [STDERR] at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:155)
12:32:26,145 ERROR [STDERR] ... 30 more 
```

我的 hornetq-jms.xml 非常标准：

```
<configuration xmlns="urn:hornetq"  
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">  
        <connection-factory name="NettyConnectionFactory">  
           <connectors>  
                 <connector-ref connector-name="netty"/>  
           </connectors>  
           <entries>  
                 <entry name="/ConnectionFactory"/>  
                 <entry name="/XAConnectionFactory"/>  
           </entries>  
        </connection-factory>  
<!-- JMS destination definitions updated for JBossAS using HornetQ -->  
    <queue name="myQueuet">  
        <entry name="/queue/myQueue"/>  
    </queue>  
</configuration> 
```

以下是我的 jmsTemplateFactory 的相关部分：

```
 public JmsTemplateFactory(String url, String queueName) {  
        this.url = url;  
        this.queueName = queueName;  
        init();  
    }  

    public void init() {  
        logger.info("\nINIT JMS TEMPLATE...url= " + url + ", queueName: " + queueName);  
        // JndiTemplate  
        JndiTemplate jndiTemplate = new JndiTemplate();  
        Properties environment = new Properties();  
        environment.put("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");  
        environment.put("java.naming.factory.url.pkgs", "org.jnp.interfaces:org.jboss.naming");  
        environment.put("java.naming.provider.url", url);  
        jndiTemplate.setEnvironment(environment);  

        // JMS Queue Connection Factory  
        JndiObjectFactoryBean jndiObjectFactoryBean = new JndiObjectFactoryBean();  
        jndiObjectFactoryBean.setJndiTemplate(jndiTemplate);  
        jndiObjectFactoryBean.setJndiName("UIL2ConnectionFactory");  

        // JMS Destination   
        JndiObjectFactoryBean jndiObjectFactoryBean2 = new JndiObjectFactoryBean();  
        jndiObjectFactoryBean2.setJndiTemplate(jndiTemplate);  
        jndiObjectFactoryBean2.setJndiName(queueName);  
        try {  
            jndiObjectFactoryBean.afterPropertiesSet();  
            jndiObjectFactoryBean2.afterPropertiesSet();  
        } catch (IllegalArgumentException e) {  
            e.printStackTrace();  
        } catch (NamingException e) {  
            e.printStackTrace();  
        }  

        logger.info("Queue name is " + queueName);  

        // JMS Queue Template  
        jmsTemplate = new JmsTemplate102();  
        jmsTemplate.setConnectionFactory((ConnectionFactory) jndiObjectFactoryBean.getObject());  
        jmsTemplate.setDefaultDestination((Destination) jndiObjectFactoryBean2.getObject());  
        jmsTemplate.setReceiveTimeout(30000);         
    }  

    public JmsTemplate102 getJmsTemplate(String url, String queueName) {   
        this.url = url;  
        this.queueName = queueName;  
        init();  
        return jmsTemplate;   
    } 
```

任何人都知道为什么会产生这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:35:39.413

您在配置中引用 JBoss MQ 对象。修复您的配置和服务器的安装，您应该会很好。

# html - 生成小时：分钟选择列表

> ID：13827349
> 
> 赞同：3
> 
> 时间：2012-12-11T19:45:22.313
> 
> 标签：html, ruby-on-rails-3, view-helpers

有没有办法生成类似以下标记的内容：

```
<select> 
    <option value="0000">00:00</option>
    <option value="0030">00:30</option>
    <option value="0100">01:00</option>
    <option value="0130">01:30</option>
    <option value="0200">02:00</option>
    <option value="0230">02:30</option>
    <option value="0300">03:00</option>
    <!--rest of options omitted for brevity-->
</select> 
```

... 一直到 23:30 - 所以每 30 分钟重复一次？

我正在使用 rails 3，虽然这有效，但它不包括分钟（在我的情况下，每半小时）

```
select_hour(13, :prompt => 'Choose hour') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:05:58.907

您可以使用简单的 for 循环在 javascript 中生成它（如果您愿意，也可以使用 PHP/Ruby，基本结构是相同的）。

如：

```
var selection = "";
var i = 0;
for(var i = 0; i < 24; i++)
{
    selection += "<option value='"+ zeroFill(i, 2) +"00'>"+ zeroFill(i, 2) + ":00" + "</option>";
        selection += "<option value='"+ zeroFill(i, 2) +"30'>"+ zeroFill(i, 2) + ":30" + "</option>";
}
$("select").html(selection);

function zeroFill( number, width )
{
  width -= number.toString().length;
  if ( width > 0 )
  {
    return new Array( width + (/\./.test( number ) ? 2 : 1) ).join( '0' ) + number;
  }
  return number + ""; // always return a string
} 
```

这是一个例子：http: [//jsfiddle.net/MrXenotype/chafg/](http://jsfiddle.net/MrXenotype/chafg/)

ZeroFill 函数取自这里：[如何用前导零填充值？](https://stackoverflow.com/questions/1267283/how-can-i-create-a-zerofilled-value-using-javascript)

它将前导 0 添加到数字中。

# php - 是否可以在 ipad 上本地运行 magento 安装？

> ID：13827350
> 
> 赞同：0
> 
> 时间：2012-12-11T19:45:25.900
> 
> 标签：php, database, ipad, magento, networking

> **可能重复：**
> [适用于 iPad 的 PHP 或其他解决方案](https://stackoverflow.com/questions/7389741/php-for-ipad-or-other-solutions)

我们即将举办一个贸易展，而互联网服务从来都不是很好。是否可以设置一个 magento 商店在 ipad 上本地运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:56:02.853

不是没有越狱你的设备和大量的黑客攻击。据报道，有些人在 iOS 上运行过 Apache、PHP、MySQL。但是让你的配置正确运行 Magento 可能是一个非常具有挑战性的前景。这是 MacRumors 论坛上有关此主题的一些讨论的链接。

[http://forums.macrumors.com/showthread.php?t=962699](http://forums.macrumors.com/showthread.php?t=962699)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:27:08.897

Ipad 只是一个巨大的 iPhone。你没有组件来做你想做的事（没有应用程序）。现在，如果你有一台 Mac 笔记本电脑，你可以设置一个 MAMP 系统并做你想做的一切。

然后，您可能可以通过无线连接 iPad，并在该设置中展示您想要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:59:22.333

也许您可以将其设置在笔记本电脑上并使用它进行某种临时无线网络。我认为这可能比整个越狱路线更容易。

# postgresql - pgsql sql函数顺序执行

> ID：13827357
> 
> 赞同：0
> 
> 时间：2012-12-11T19:45:41.770
> 
> 标签：postgresql, sql-function

如果我将这两个 Postgres 函数定义保存在两个单独的 .sql 文件中：

```
CREATE OR REPLACE FUNCTION column_exists(tablename text, colname text) RETURNS boolean AS 
        $BODY$
        DECLARE
            q text;
            field_name text;
            onerow record;
        BEGIN
            q = 'SELECT column_name FROM information_schema.columns WHERE table_name='''||tablename||''' AND table_schema =''public''';
            FOR onerow IN EXECUTE q
                LOOP
                   field_name := onerow.column_name;
                   IF ((field_name = colname)) then
                    RETURN true;
                   END IF;                  
                END LOOP;
            RETURN false;
        END;
    $BODY$
LANGUAGE plpgsql
CREATE OR REPLACE FUNCTION correct_col_names() RETURNS VOID AS
    $BODY$
        DECLARE
            q boolean;
        BEGIN                       

             -- rename name column to Name
             select column_exists('National_Parks', 'name') as q;
             IF q = TRUE THEN
            alter table "National_Parks"
            rename column name to "Name";
             END IF;    

             -- remance descriptio column to description
             select column_exists('National_Parks', 'descriptio') as q;
             IF q = TRUE THEN
            alter table "Natioanl_Parks"
            rename column descriptio to "Description";
             END IF;    

        END
    $BODY$
LANGUAGE plpgsql 
```

我需要使用什么语法来顺序调用，比如在另一个脚本中？我试过

```
select correct_col_names() 
```

这将返回以下错误：

```
ERROR:  query has no destination for result data
HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
CONTEXT:  PL/pgSQL function "correct_col_names" line 7 at SQL statement

********** Error **********

ERROR: query has no destination for result data
SQL state: 42601
Hint: If you want to discard the results of a SELECT, use PERFORM instead.
Context: PL/pgSQL function "correct_col_names" line 7 at SQL statement 
```

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:51:17.123

问题是您的 SELECT 语句没有对数据做任何事情。您的

```
select column_exists('National_Parks', 'name') as q; 
```

应该

```
select column_exists('National_Parks', 'name') INTO q; 
```

只是将该`as`查询的结果别名为“q”，它实际上并没有将其放入 q 变量中。

您调用函数 ( `select correct_col_names()`) 的语法对于 SQL 是正确的。一旦您修复了该函数中的两个错误，它应该可以工作。

然而，如果你在另一个 PL/PGSQL 函数中尝试`select correct_col_names()`，你会得到同样的错误，因为 select 语句实际上并没有对结果*做*任何事情。 `perform correct_col_names()`运行不会出错，因为 PERFORM 是 PL/PGSQL 语法，用于在您不想保存结果时调用某些内容。

# asp.net-mvc-4 - asp.net c#从该类中自动映射一个类

> ID：13827361
> 
> 赞同：0
> 
> 时间：2012-12-11T19:45:59.387
> 
> 标签：asp.net-mvc-4, automapper

为了最好地描述我想要发生的事情，我将展示我正在做的事情，对我来说，这很有意义......

```
public class foo()
{
    public foo()
    {
        MyContext db = new MyContext();
        foobar = db.foobar.first();
        this = Mapper.Map<bar, foo>(foobar);
    }
} 
```

基本上，我想在目标类中使用 automapper 从目标类构造函数中的源类进行映射。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:32:06.930

您不能这样做，因为***这***在 C# 中是只读的。您不能在构造函数中***为此***赋值。尝试在其构造函数中更改对象的引用并不酷。您必须手动进行映射并分配每个单独的属性。我还会质疑在默认构造函数中从数据库或服务中分配对象值是否是一种好习惯。对于对象的用户来说，正在发生的事情不是很透明，您可以在构造函数中获得异常。

# scala - 替换 Scala 2.10 中已弃用的 <:< 清单类型见证

> ID：13827365
> 
> 赞同：9
> 
> 时间：2012-12-11T19:46:15.047
> 
> 标签：scala, reflection, scala-2.10

有人可以指出我应该在 scala 2.10 下做什么来代替 Manifest 上这个已弃用的类型见证吗？

```
reflect.ClassManifest.singleType(foo) <:< barManifest 
```

老实说，我的目标只是用不会引起弃用警告的东西替换它。我很高兴使用新的反射 API。

如果这很重要，这是上下文中的相关代码：

[https://github.com/azavea/geotrellis/blob/master/src/main/scala/geotrellis/feature/op/geometry/geometry.scala#L45](https://github.com/azavea/geotrellis/blob/master/src/main/scala/geotrellis/feature/op/geometry/geometry.scala#L45)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T23:02:15.817

如果您想要从清单到类型标签的相当直译，您需要获取适当的镜像，使用它来反映您的实例，然后使用`<:<`on `Type`。例如：

```
import scala.reflect.runtime.currentMirror
import scala.reflect.runtime.universe._

sealed trait X
case class Y(i: Int) extends X
case class Z(j: String) extends X

def filterX[A <: X: TypeTag](xs: List[X]) = xs.filter(
  x => currentMirror.reflect(x).symbol.toType <:< typeOf[A]
) 
```

现在：

```
scala> filterX[Z](List(Y(1), Y(2), Z("test")))
res1: List[X] = List(Z(test))

scala> filterX[Y](List(Y(1), Y(2), Z("test")))
res2: List[X] = List(Y(1), Y(2)) 
```

您可能有一些方法可以在您的应用程序中更充分地利用新的反射 API，但这应该可以工作并且会处理弃用警告。

# perl - 将测试数据提供给 Nagios 插件的标准？

> ID：13827366
> 
> 赞同：0
> 
> 时间：2012-12-11T10:18:41.300
> 
> 标签：perl, testing, nagios

我正在用 Perl 开发一个 Nagios 插件（没有 Nagios::Plugin，只是普通的 Perl）。我正在检查的错误情况通常来自插件内部调用的命令输出。但是，创建错误条件会非常不方便，因此我正在寻找一种将测试输出提供给插件的方法，以查看它是否正常工作。

我目前发现的最简单的方法是使用命令行选项来选择性地从文件中读取输入，而不是调用命令。

```
if($opt_f) {
  open(FILE, $opt_f);
  @output = <FILE>;
  close FILE;
}
else {
  @output = `my_command`;
} 
```

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:42:58.673

或者你可以有一个命令的测试版本，它返回各种状态供你测试（也许通过命令行参数）。

您将 mycommnd 的测试版本放在某个测试目录 (/my/nagois/tests/bin) 中。

然后在运行测试的命令行上操作 PATH 环境变量。

`$ env PATH=/my/nagois/tests/bin:$PATH nagios_pugin.pl`

只要该命令执行，对 $PATH 的更改就会持续。更改本地化到为运行插件而生成的子shell。

用于执行命令的反引号将导致 shell 使用 PATH 来定位命令，这将是命令的测试版本，它位于现在是搜索路径上的第一个目录中。

如果我不清楚，请告诉我。

* * *

新方法的新答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:11:10.697

在您的插件中构建一个命令行开关，如果您在命令行上设置 -t，则在 /path/to/test/command 中使用测试命令，否则在 /path/to/production 中运行“生产”命令/命令

默认操作是生产，仅在存在指示测试模式的开关时对其进行测试。

# python - 如何将输出的 fortran 二进制 NxNxN 矩阵读入 Python

> ID：13827368
> 
> 赞同：7
> 
> 时间：2012-12-11T19:46:30.443
> 
> 标签：python, numpy, matrix, binary, fortran

我在 Fortran 中写了一个矩阵如下：

```
real(kind=kind(0.0d0)), dimension(256,256,256) :: dense

[...CALCULATION...]

inquire(iolength=reclen)dense
open(unit=8,file=fname,&
form='unformatted',access='direct',recl=reclen)
write(unit=8,rec=1)dense(:,:,:) 
close(unit=8) 
```

我想把它读回到 Python 中。我所看到的一切都是针对 2D NxN 阵列而不是 3D 阵列。在 Matlab 中，我可以将其解读为：

```
fid =    fopen(nfilename,'rb');
mesh_raw = fread(fid,ndim*ndim*ndim,'double');
fclose(fid);
mesh_reshape = reshape(mesh_raw,[ndim ndim ndim]); 
```

我只需要 Python 中的等价物——大概有一个类似的加载/重塑工具可用。如果有更友好的紧凑方式将其写出来以供 Python 理解，我愿意接受建议。它大概看起来像[这样](https://stackoverflow.com/questions/13728591/simple-reading-of-fortran-binary-data-not-so-simple-in-python)：。我只是不熟悉我的案例的等效语法。一个好的参考就足够了。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T20:51:54.250

使用 IRO-bot 的链接，我为我的脚本修改/制作了这个（除了 numpy 魔法）：

```
def readslice(inputfilename,ndim):
    shape = (ndim,ndim,ndim)
    fd = open(fname, 'rb')
    data = np.fromfile(file=fd, dtype=np.double).reshape(shape)
    fd.close()
    return data 
```

我在立方体上做了一个平均值、最大值、最小值和总和，它与我的 fortran 代码相匹配。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:40:41.613

除了在这里工作的直接阅读之外，我什么也看不到。Python 不能很好地处理 2-D 数组，更不用说 3-d，但是这段代码应该可以工作。

```
fin=open('filename.dat','rb')
output=[]
for x in range(0,ndim):
    xarr=[]
    for y in range(0,ndim):
        yarr=[]
        for z in range(0,ndim):
            yarr.append(struct.unpack('i', fin.read(4)))
        xarr.append(yarr)
   output.append(xarr) 
```

# excel - Excel 范围样式：通过 VSTO 指定边框不起作用

> ID：13827369
> 
> 赞同：3
> 
> 时间：2012-12-11T19:46:31.783
> 
> 标签：excel, vba, vsto

我没有通过一一设置单个格式属性来设置范围，而是尝试使用 Excel 样式，因为它在格式化大量单元格时似乎更快。我定义了一次样式，然后将其应用于范围，如下所示：

```
var cell = worksheet.Cells[row, column];
cell.Style = "MyCustomStyle"; 
```

它非常适用于内部颜色和字体，但在尝试使用边框时遇到了奇怪的问题。当我尝试定义要在范围上显示哪些边框以及它们应该如何格式化时，我得到了不可预测的结果，并且找不到控制它的方法。

下面的方法创建一个名为 ListRowStyle 的 Style；

```
private static void CreateListRowStyle(Workbook workbook)
{
    var listRowStyle = workbook.Styles.Add(ListRowStyle);

    listRowStyle.Interior.Color = ColorTranslator.ToOle(Color.LightGray);

    listRowStyle.Font.Color = ColorTranslator.ToOle(Color.DarkBlue);
    listRowStyle.Font.Bold = true;

    listRowStyle.IncludeBorder = true;
    listRowStyle.Borders.Color = ColorTranslator.ToOle(Color.Black);
    listRowStyle.Borders.LineStyle = XlLineStyle.xlContinuous;
    listRowStyle.Borders.Weight = XlBorderWeight.xlMedium;
} 
```

这会创建范围内的每一个边框（垂直、水平和对角线） - 到目前为止，非常好。但是，当我尝试使用以下代码仅显示顶部和底部边框时，问题开始发生：

```
private static void CreateEditableListRowStyle(Workbook workbook)
{
    var editableListRowStyle = workbook.Styles.Add(EditableListRowStyle);
    editableListRowStyle.Interior.Color = ColorTranslator.ToOle(Color.Yellow);

    editableListRowStyle.Font.Color = ColorTranslator.ToOle(Color.Red);
    editableListRowStyle.Font.Bold = false;

    editableListRowStyle.IncludeBorder = true;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeLeft].LineStyle = XlLineStyle.xlLineStyleNone;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeRight].LineStyle = XlLineStyle.xlLineStyleNone;

    editableListRowStyle.Borders[XlBordersIndex.xlDiagonalDown].LineStyle = XlLineStyle.xlLineStyleNone;
    editableListRowStyle.Borders[XlBordersIndex.xlDiagonalUp].LineStyle = XlLineStyle.xlLineStyleNone;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeTop].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeTop].Weight = XlBorderWeight.xlMedium;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeBottom].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeBottom].Weight = XlBorderWeight.xlThin;
} 
```

颜色样式发生了，但没有边框出现。当我修改代码以像这样格式化左右边框时，事情变得更加奇怪：

```
private static void CreateEditableListRowStyle(Workbook workbook)
{
    var editableListRowStyle = workbook.Styles.Add(EditableListRowStyle);
    editableListRowStyle.Interior.Color = ColorTranslator.ToOle(Color.Yellow);

    editableListRowStyle.Font.Color = ColorTranslator.ToOle(Color.Red);
    editableListRowStyle.Font.Bold = false;

    editableListRowStyle.IncludeBorder = true;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeLeft].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeLeft].Weight = XlBorderWeight.xlMedium;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeRight].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeRight].Weight = XlBorderWeight.xlMedium;

    editableListRowStyle.Borders[XlBordersIndex.xlDiagonalDown].LineStyle = XlLineStyle.xlLineStyleNone;
    editableListRowStyle.Borders[XlBordersIndex.xlDiagonalUp].LineStyle = XlLineStyle.xlLineStyleNone;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeTop].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeTop].Weight = XlBorderWeight.xlMedium;

    editableListRowStyle.Borders[XlBordersIndex.xlEdgeBottom].LineStyle = XlLineStyle.xlContinuous;
    editableListRowStyle.Borders[XlBordersIndex.xlEdgeBottom].Weight = XlBorderWeight.xlThin;
} 
```

此时，顶部和底部边框仍然不显示；另一方面，我得到一个显示的左边框，但没有右边框。呃？

那么 - 我做错了什么，还是通过 VSTO 在样式上设置边框不起作用？请注意，以下代码是 VBA 中 VSTO/C# 代码的非常接近的翻译，其工作方式与我预期的完全一样。

```
Sub Styling()

    ActiveWorkbook.Styles.Add Name:="VbaStyle"

    With ActiveWorkbook.Styles("VbaStyle")
        .IncludeBorder = True
    End With

    ActiveWorkbook.Styles("VbaStyle").Borders(xlLeft).LineStyle = xlNone
    ActiveWorkbook.Styles("VbaStyle").Borders(xlRight).LineStyle = xlNone
    ActiveWorkbook.Styles("VbaStyle").Borders(xlDiagonalDown).LineStyle = xlNone
    ActiveWorkbook.Styles("VbaStyle").Borders(xlDiagonalUp).LineStyle = xlNone

    With ActiveWorkbook.Styles("VbaStyle").Borders(xlTop)
        .LineStyle = xlContinuous
        .Weight = xlMedium
    End With

    With ActiveWorkbook.Styles("VbaStyle").Borders(xlBottom)
        .LineStyle = xlContinuous
        .Weight = xlThin
    End With

End Sub 
```

这是在 Windows 7、Excel 2007 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-12T19:55:38.467

尝试使用 xlLeft、xlRight、xlTop、xlBottom 代替 xlEdgeLeft、xlEdgeRight、xlEdgeTop、xlEdgeBottom

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T07:34:45.300

I was trying for sometime and came across your question and got some heads-up. Thanks for that. Was able to create the style using the optional parameter of basedOn like below:

```
var activeSheet = workbook.ActiveSheet as Worksheet;
Range first = activeSheet.Range["A1"];
first.Borders.Item[XlBordersIndex.xlEdgeBottom].Color = Color.FromArgb(0, 16, 80);
first.Borders.Item[XlBordersIndex.xlEdgeBottom].Weight = XlBorderWeight.xlThick;
first.Borders.Item[XlBordersIndex.xlEdgeBottom].LineStyle = XlLineStyle.xlContinuous;
Style myStyle = o9Workbook.Styles.Add("MyStyle",first);
//reset the first to normal style
first.Style = "Normal"; 
```

Hope it helps someone!

# c# - 我打印这个窗口表格对吗？

> ID：13827372
> 
> 赞同：-1
> 
> 时间：2012-12-11T19:46:36.433
> 
> 标签：c#, winforms, visual-studio, printing

> **可能重复：**
> [在 C# 中打印 Windows 窗体](https://stackoverflow.com/questions/13821715/print-windows-form-in-c-sharp)

我需要打印打印按钮所在的表单：

```
private void btnPrint_Click(object sender, EventArgs e)
{
    Graphics g1 = this.CreateGraphics();
    Image MyImage = new Bitmap(this.ClientRectangle.Width, this.ClientRectangle.Height, g1);
    Graphics g2 = Graphics.FromImage(MyImage);
    IntPtr dc1 = g1.GetHdc();
    IntPtr dc2 = g2.GetHdc();
    BitBlt(dc2, 0, 0, this.ClientRectangle.Width, this.ClientRectangle.Height, dc1, 0, 0, 13369376);
    g1.ReleaseHdc(dc1);
    g2.ReleaseHdc(dc2);
    MyImage.Save(@"c:\PrintPage.jpg", ImageFormat.Jpeg);
    FileStream fileStream = new FileStream(@"c:\PrintPage.jpg", FileMode.Open, FileAccess.Read);
    StartPrint(fileStream, "Image");
    fileStream.Close();
    if (System.IO.File.Exists(@"c:\PrintPage.jpg"))
    {
        System.IO.File.Delete(@"c:\PrintPage.jpg");
    }
} 
```

但这给了我一个错误：MyImage.Save。

错误是：ExternalException 未处理：GDI+ 中发生一般错误。

有人可以解决这个问题，并解释为什么我会收到这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:01:26.583

异常消息很糟糕，但表明 GDI+ 无法写入文件。

至少有两个问题。首先，如果没有通过 UAC 提示获得的 Vista、Win7 和 Win8 的管理员权限，则不允许程序写入 c:\。或以前 Windows 版本上的任何非管理员帐户。请改用 Path.GetTempFileName()。

第二个是您在处理 MyImage 时马虎。这很可能会使您的程序在您第二次运行此代码时失败，因为该文件仍在使用中，而垃圾收集器还没有完成图像对象的最终确定。Image.Dispose() 需要释放图像文件的锁定。使用*using*语句来确保它被一致地处理。

# ruby-on-rails - 对于 Rails 项目，ActiveMerchant 需要什么凭据？

> ID：13827375
> 
> 赞同：0
> 
> 时间：2012-12-11T19:46:47.837
> 
> 标签：ruby-on-rails, paypal, activemerchant

在我的信用卡处理文件中，我有：

```
 response = PaymentGateway.pay_pal.authorize(
    foreign_currency_amount_in_cents,
    credit_card,
    :email => email_address,
    :order_id => invoice_number,
    :description => item_id,
    :ip => ip_address,
    :currency => foreign_currency.name,
    :custom_code => credit_card.type
  ) 
```

中`payment_gateway.rb`，我有

```
class PaymentGateway
  class << self
    def pay_pal
      @pay_pal ||= ActiveMerchant::Billing::PaypalGateway.new(:login => AppConfig.pay_pal[:login], :password => AppConfig.pay_pal[:password])
    end
end 
```

在我的`environments/production.rb`中，我为 pay_pal 配置分配了更多变量，特别是：

```
signature: "somesignature"
login: "my.name_api1.mysite.com"
password: "SOMEPASSWORD"
business: "my.name@mysite.com"
business_id: "BUSINESSID"
cert_id: "SOMECERTID"
private_key: |
  -----BEGIN RSA PRIVATE KEY-----
  MIICWwIBAA...
  -----END RSA PRIVATE KEY-----

public_key: |
  -----BEGIN CERTIFICATE-----
  MIIDGD...
  -----END CERTIFICATE----- 
```

我正在尝试切换 PayPal 帐户并创建了一个新的 PayPal 帐户。我真的需要在我的环境文件中切换凭据吗？如果是这样，我使用哪些凭据？登录不是电子邮件地址，我用来登录 PayPal 的是电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:04:35.903

在此处观看此视频：

[http://railscasts.com/episodes/144-active-merchant-basics](http://railscasts.com/episodes/144-active-merchant-basics)

它提供了有关如何获取和设置 ActiveMerchant 的 PayPal API 凭据的分步说明。

PayPal 还为您提供信息 MyAccount -> Profile -> API Access -> Request API Credentials

有关更多信息，另请参阅： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/apicertificates](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/apicertificates)

# c# - C# 中的 NeuralNet 单输出转换为多输出 c# dummy

> ID：13827378
> 
> 赞同：3
> 
> 时间：2012-12-11T19:46:53.313
> 
> 标签：c#, neural-network

我目前正在学习神经网络，偶然发现不同的来源和不同的代码都很好，但是我发现了一个有趣的代码，并希望将其用于各种事物，例如 OCR 和那些东西。我对 C sharp 比较陌生，我想要一些帮助来帮助我使用这个代码。基本上这段代码采用一个输出，我希望我可以添加几个输出神经元。我的主要问题是我设法使其适应多个输出，但是后来我发现我无法测试网络，即首先我训练为网络提供输入和预期输出。然后我只是给网络一个输入字符串。问题是类模式只接受 3 个参数。我如何告诉它/工作，以便我可以使用 3 个参数进行训练，然后只测试给出我需要在泛化完成后识别的字符串？这是我用于培训的代码的一部分——这段代码不是我的，很明显我只是用它来测试..

所以测试——这被称为

```
Activate(new Pattern(values, _inputDims))); 
```

而 Pattern 方法就是这个——

```
private double[] _inputs;
private double _output; 

public Pattern(string value, int inputSize)
{
    string[] line = value.Split(',');
    if (line.Length - 1 != inputSize)
        throw new Exception("Input does not match network configuration");
    _inputs = new double[inputSize];
    for (int i = 0; i < inputSize; i++)
    {
        _inputs[i] = double.Parse(line[i]);
    }
    _output = double.Parse(line[inputSize]);
} 
```

所以我希望 Pattern 方法也接受 outputSize 但是当我只传递值和输入尺寸时它必须能够进行测试。老实说，我不知道我能做什么我已经花了很多时间寻找所有可用的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:53:54.173

您可以向模式构造函数添加可选参数。模式（字符串值，int inputSize，int outputSize = 1）

# java - Java -BlockingQueue -- 多个生产者，单个消费者

> ID：13827386
> 
> 赞同：5
> 
> 时间：2012-12-11T19:47:22.967
> 
> 标签：java, multithreading, blockingqueue

请快速澄清

我知道`BlockingQueues`是线程安全的。

这是否意味着我可以将阻塞队列的单个引用传递给所有可以随意丢弃事件以供单个消费者使用的生产者，并且没有任何东西被破坏？

否则，必须生成多达 20 个`BlockingQueues`可能有或可能没有定期更新的内容，并以任何效率阅读它们似乎是一项不可逾越的任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:50:06.640

> 这是否意味着我可以将阻塞队列的单个引用传递给所有可以随意丢弃事件以供单个消费者使用的生产者，并且没有任何东西被破坏？

一句话，是的。这是安全的。引用[文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)：

> `BlockingQueue`实现是线程安全的。所有排队方法都使用内部锁或其他形式的并发控制以原子方式实现其效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:50:59.647

如果它是线程安全的，则意味着您只需要该队列的一个实例，所有线程都可以访问该实例。并发数据结构管理这些访问。**这也意味着您不需要同步。**

# wordpress - 将wordpress地址更改为我不拥有的网站，恢复它

> ID：13827387
> 
> 赞同：2
> 
> 时间：2012-12-11T19:47:26.590
> 
> 标签：wordpress

我正在浏览我的 wordpress 网站的“设置”选项卡，不小心将我的**WordPress 地址 (URL)**和**站点地址 (URL)**更改为我不拥有的网站（我不小心把 .com 而不是 .co.uk）

现在，当我访问它时，`mysite.co.uk/wp-admin`它会将我带到我不拥有的另一个站点（.com），正如您所看到的，这是一个大问题，有没有一种简单的方法可以让我回到 wp 并将其改回来？

是否有我可以下载编辑和再次上传的 wp-config.php 文件之一，或者我需要更新的数据库表的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:54:15.323

将这些行添加到顶部`wp-config.php`：

```
define('WP_HOME','http://mysite.co.uk');
define('WP_SITEURL','http://mysite.co.uk'); 
```

在`functions.php`中，使用这两行：

```
update_option('siteurl','http://mysite.co.uk');
update_option('home','http://mysite.co.uk'); 
```

加载[http://mysite.co.uk/wp-admin](http://mysite.co.uk/wp-admin)，确认您可以进入，然后从文件中删除这些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:49:52.187

当我开发一个站点时，我会在测试服务器上进行，然后推送到实时服务器。为此，我更改了 mySQL 数据库中的两个字段。在 phpmyadmin 中，您可以更改 wordpress 选项。

wp_options 表编辑 siteurl 选项。以及您要确保正确的任何其他实例。

以下查询应该找到它们。

SELECT * FROM `wp_options`WHERE option_value LIKE '%mysite.com%'

然后编辑这些文件，确保在执行此操作之前备份您的数据库。它应该可以工作，但有时像这样更改数据库可能会影响菜单中的内容或站点上的其他内容。它应该解决你的糟糕问题并让你把事情做对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-18T11:07:58.370

go to your phpmyadmin and select the table called wp_otions change site url to your previous site [http://mysite.co.uk](http://mysite.co.uk).

it worked for me .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:51:24.630

Run this query in your MySQL database, with the URL changed to your actual site URL:

```
update wp_options
set option_value = 'http://example.com'
where option_name in ('siteurl', 'home'); 
```

NB: assumes that your WordPress tables are prefixed with 'wp_', adjust as necessary if not.

# algorithm - 将网格划分为矩形

> ID：13827392
> 
> 赞同：0
> 
> 时间：2012-12-11T19:47:58.727
> 
> 标签：algorithm

我有一个 0 和 # 的网格。我想将所有 0 重新组合成矩形。最少需要多少个矩形？

例子 ：

```
#00#00
#00#00
0000#0
000000

#11#34
#11#34
2222#4
222254 
```

在这个例子中，我们使用了 5 个矩形。还有其他解决方案，但 5 个矩形是覆盖所有 0 的最小值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:04:41.193

该问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)问题，被称为经典[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)的 2D 变体，称为**2D-**装箱问题。
因此，**该问题没有已知的多项式解**。

这已被广泛研究，这里有一篇示例[文章](http://web.archive.org/web/20151216022736/http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.98.3502&rep=rep1&type=pdf)，介绍了近似解决此问题的方法。

您还可以尝试 Genthic 算法或其他启发式方法来解决问题。

# ios - iOS：如果屏幕锁定，则访问前置摄像头

> ID：13827393
> 
> 赞同：0
> 
> 时间：2012-12-11T19:47:59.673
> 
> 标签：ios, xcode, camera, screen

有人知道屏幕锁定时是否可以访问前置摄像头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:16:26.447

听起来你想偷拍视频。只需在录制视频时显示一个假锁屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:18:27.793

这是不可能的，因为应用程序状态将被暂停。当应用程序不是活动的最重要的应用程序时，不允许访问相机。

# c# - 在样式表中存储 ASP.NET Web 组件属性

> ID：13827403
> 
> 赞同：1
> 
> 时间：2012-12-11T19:48:17.923
> 
> 标签：c#, asp.net, css, styles

是否可以将 ASP.NET Web 控件的属性存储在 CSS 文件中？具体来说，我想为`GridView`.

例如：而不是指定：

```
<asp:GridView ID="myGrid" runat="server" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView> 
```

我可以将这些颜色放在 CSS 文件中，然后`CssClass`为整个 GridView 指定吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:16:54.667

嗨，您可以像这样定义 CSS 类

```
.AltRowStyle
{
    background-color: White;
    color: #284775;
} 
```

然后像这样使用它：

```
<AlternatingRowStyle CssClass="AltRowStyle"/> 
```

其余的也一样，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:46:20.900

您还可以将 GridView 添加到主题中，这样您就不必为网站上的每个 GridView 设置样式。在你的 theme.skin 上添加带有 css 类的网格代码，然后在你的 aspx 页面上不要添加任何样式。

# c++ - 打印/阅读时的奇怪行为

> ID：13827406
> 
> 赞同：4
> 
> 时间：2012-12-11T19:48:31.330
> 
> 标签：c++, time, c++11, timezone, chrono

我正在尝试保存`std::time_point`并`std::stream`读回它。一个问题是在某处使用标准函数会“损失”一个小时。即，我阅读的时间比我写作的时间晚 1 小时。我怀疑我需要在某个地方设置夏令时。我编写了一个小程序，将时间打印到 a`std::stringstream`并将其读回。

```
#include <iomanip>
#include <iostream>
#include <sstream>

#include <chrono>
#include <ctime>

using std::chrono::system_clock;
namespace chrono = std::chrono;

void test();

int main(int argc, char** argv)
{
    std::stringstream ss;

    auto start = system_clock::now();

    std::time_t ts = system_clock::to_time_t(start);

    std::tm time_out = *std::localtime(&ts);
    ss << std::put_time(&time_out, "%Y-%m-%d %H:%M:%S %Z") << '\n';

    std::cout << ss.str() << std::endl;

    std::tm time_in;
    ss >> std::get_time(&time_in, "%Y-%m-%d %H:%M:%S %Z");

    std::cout << "Are time dsts equal? : " <<
    (time_out.tm_isdst == time_in.tm_isdst) << '\n';

    std::time_t rawTime = std::mktime(&time_in);
    auto end = std::chrono::system_clock::from_time_t(rawTime);

    std::cout << "Are time points equal? : " << (start == end) << '\n';

    // print the trouble makers
    std::time_t start_time = system_clock::to_time_t(start);
    std::time_t end_time = system_clock::to_time_t(end);

    std::cout << "times: \n"
    << '\t' << std::put_time(std::localtime(&start_time), "%c %z") << '\n'
    << '\t' << std::put_time(std::localtime(&end_time), "%c %z") << '\n';

    // this is a source of strange behaviour...
//    std::cout << "Difference: "
//    << chrono::duration_cast<chrono::seconds>(start - end).count()
//    << std::endl;

    return 0;
} 
```

最奇怪的是程序会打印以下内容：

```
Are time dsts equal? : 1
Are time points equal? : 0
times: 
Tue Dec 11 19:26:24 2012 +0000
Tue Dec 11 19:26:24 2012 +0000 
```

当我取消注释程序末尾的 3 行（打印时间点之间的差异）时，结果是：

```
Are time dsts equal? : 0
Are time points equal? : 0
times: 
Tue Dec 11 19:29:40 2012 +0000
Tue Dec 11 18:29:40 2012 +0000
Difference: 3600 
```

请注意，dst（夏令时）突然不相等，时间也不相等。

我在带有 XCode46-DP2 的 Mac OS X 10.8.2 上使用 libc++。我使用的 clang++ 版本是`Apple clang version 4.1`和`clang version 3.2 (trunk 167239)`

我想我的问题是：A）关于 1 小时的差异，这是我的库中的错误还是我没有正确使用标准函数？（后者不会让我感到惊讶......）

B）当我在程序末尾取消注释三行时，代码发生了什么？这对我来说似乎是一个错误。有人愿意在他们的平台上尝试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:11:26.380

我认为我们正在查看说明符的错误`%Z`，*也许*还有说明`%z`符，但还不确定。

我将更多地研究这些错误的原因。但是，我想继续发布并为您提供解决方法。我相信，如果您将 input 初始化为零`tm`，并始终假设它与您当地的时区有关，那么您将消除错误：

```
std::tm time_in{0}; 
```

# android - 从 Android 将图像保存在 SQLite 数据库中

> ID：13827412
> 
> 赞同：1
> 
> 时间：2012-12-11T19:48:43.087
> 
> 标签：android, database, image, sqlite

我有一个关于将图像保存在应用程序中的 SQLite 数据库位置的问题。

我为 iOS 制作了一个应用程序，用户可以在其中拍摄照片或从应用程序中获取现有照片，然后将它们保存在自己的应用程序中的本地银行中，因为 IOS 没有太多磁盘空间问题。

在 Android 上已经有拍摄照片或使用现有照片的代码，现在想知道如何将它们保存在 SQLite 数据库中。（？）

我一直在阅读，有人建议将图像保存在 SD 卡中并仅将图像路径插入数据库，但如果由于某种原因将其从 SD 卡中排除，您的应用程序中将出现错误，因为不再引用的路径存在。

什么是理想的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:47:54.023

您应该只将图片的名称保留在数据库中并将图片存储在内部存储中，而不是存储在 sdcard 上，首先将它们保存为仅对您的应用程序私有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:50:45.900

理想的解决方案是将其存储在 SD 卡中。存储在数据库中不会阻止用户删除它。如果用户清除应用数据，您也会丢失此信息。用户执行此操作时，所有数据库都将被删除。

无论如何，如果您选择 SQLite 解决方案，您可以使用 blob 字段。请记住，某些版本的 SQLite 不支持大型 blob 数据。看一下这个：

[http://effbot.org/zone/sqlite-blob.htm](http://effbot.org/zone/sqlite-blob.htm)

我也建议这样做：

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

# javascript - 在 Javascript 中使用动态文本

> ID：13827417
> 
> 赞同：0
> 
> 时间：2012-12-11T19:49:03.077
> 
> 标签：javascript, asp.net, shell, dom-events

我使用 asp.net 和这段代码用 IE 打开本地文件：

```
<script type="text/javascript" language="javascript">
    function RunFile() {
        WshShell = new ActiveXObject("WScript.Shell");
        WshShell.Run("d:/11.doc", 1, false);
    }
</script>

<input type="button" value="Run File" onclick="RunFile();"/> 
```

结果还可以:-)

但我想将地址本地文件发送到脚本然后运行这个文件：

例子：

```
<script type="text/javascript" language="javascript">
    function RunFile() {
        WshShell = new ActiveXObject("WScript.Shell");
        WshShell.Run(**AddressFile**, 1, false);
    }
</script>

protected void Page_Load(object sender, EventArgs e)
{
**AddressFile** = "d:/11.doc";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:46:54.917

如果要从服务器端动态调用 javascript 函数，只需在 JS 函数中添加一个参数以获取文件名：

```
<script type="text/javascript" language="javascript">
    function RunFile(fileName) {
        WshShell = new ActiveXObject("WScript.Shell");
        WshShell.Run(fileName, 1, false);
    }
</script> 
```

然后在服务器端调用 javascript 函数，如下所示：

```
this.ClientScript.RegisterStartupScript(this.GetType()
,"somekey"
,"RunFile('"+file_parameter_on_server_side+"')",true)"; 
```

更多细节和完整[的例子在这里。](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)

# jquery - 使用 jQuery 将表格单元格的背景更改为不同的颜色

> ID：13827422
> 
> 赞同：1
> 
> 时间：2012-12-11T19:49:35.827
> 
> 标签：jquery, css

我有一张这样的桌子：

![分期付款表](../Images/380dadbb0db18bc85bcc4abc674995a2.png)

当我单击它们时，我想用价格更改单元格的背景颜色（例如`addClass(on)`），如左下角所见，并且也更改其他单元格的背景颜色（例如`addClass(off)`）。

我不希望其他单元格受到影响（带有文本和不同颜色的单元格）。

我还需要获取单击的单元格所属行的 id。

这是一行的结构。

```
<tr class="taksit" id="tek">
    <td><b>Tek Çekim</b></td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
    <td><?=$sontutar?> TL</td>
</tr> 
```

我尝试了一些在这里找到的技巧，但无法做到。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:51:28.710

```
$('table#uniqueID tbody td').on('click',function() {
    $(this).closest('tbody').find('td').removeClass('highlight');
    $(this).addClass('highlight');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:55:30.387

```
$("#table_selector td.clickable").on('click',function(){
  // cache $(this)
  var clickedElement = $(this);

  // remove background color from other clickable items 
  $("td.clickable").css('background','none');

  // change the background color of the clicked <td>    
  clickedElement.css('background','red');

  var rowId = clickedElement.closest('tr').attr('id');
}); 
```

让我稍微解释一下我在这里所做的事情。
首先，您说您不希望每个`<td>`人都受到这些点击和背景变化的影响。所以你应该给所有`<td>`“可点击”的 's 一个类，然后你可以将你的`on('click')`事件限制为你想要的元素。您当然也可以做相反的事情，将“noClick”类添加到您想要忽略的类中......

`<td>`可以通过几种方式更改背景颜色，为了示例，我选择使用 simple `.css('background','red');`，但我相信您的实际代码中有更多逻辑。

通过使用该函数查找`rowId`最近的父元素来提取。然后简单的看属性。`<tr>`[`closest()`](http://api.jquery.com/closest/)`id`

# svn - 如何从 SVN 复制增量文件

> ID：13827424
> 
> 赞同：0
> 
> 时间：2012-12-11T19:49:44.047
> 
> 标签：svn, tortoisesvn

如何复制在 SVN 的两个修订版之间修改/添加的物理文件。假设我在版本 2 和 4 之间修改了 10 个文件，我需要将这 10 个文件单独放在 svn 之外的一些文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:16:33.857

**如果**你的问题可以翻译成这样的：

“如何导出文件，在*某些修订范围内*受到影响，在导出的结果中保存原始树”

然后阅读[我在“如何通过 FTP 将多个多级（不同层次结构）文件从本地版本覆盖到在线版本”主题中的答案](https://stackoverflow.com/a/13063724/960558)（为什么在询问之前至少在这里没有尝试搜索）”

*   用于 CLI 客户端（有时用于服务器端工具） - 从头开始​​ 3 个 URL
*   TortoiseSVN - 最新链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:23:31.260

如果您要问的是如何确保工作副本具有所有文件的最新版本，您需要使用 update 命令。

从工作副本的顶级目录，运行命令：`svn update`

您可能还想查看`svn help update`所有更新选项。

# c++ - c++向量丢失指针引用

> ID：13827426
> 
> 赞同：1
> 
> 时间：2012-12-11T19:49:51.283
> 
> 标签：c++, pointers, runtime, runtime-error

我应该在两行中都得到相同的结果..会发生什么我得到两个不同的值..就像它针对不同的位置一样..我认为错误在里面`d->add(*b)`

输出是

```
 thiago 14333804
  Ph¿├┌ 2816532 
```

为了更好地描述它，我将代码放在下面

我有一个程序

```
int main(int argc, char **argv) {

    CClass* c = new CClass();

    BClass* b = c->getNext();

    printf("%s %d \n", b->getValue(), b->getValue());

    DClass* d = new DClass();
    d->add(*b);

    printf("%s %d \n", d->getNext(), d->getNext());

    cin.get();

    return 0;
} 
```

接口如下

```
class BClass
{
private:
    char* value;
    bool stale;
public:
    BClass(char* value);
    ~BClass(void);
    char* getValue();
    bool isStale();
};

class CClass
{
private:
    vector<BClass*> list;
public:
    CClass(void);
    ~CClass(void);

    BClass* getNext();
};

class DClass
{
private:
    vector<BClass*> list;
    static bool isStale(BClass* b) { return b->isStale();};
public:
    DClass(void);
    ~DClass(void);
    void add(BClass s);
    char* getNext();
}; 
```

并且实现如下

```
//BClass

BClass::BClass(char* value)
{
    this->value = value;
    this->stale = false;
}

BClass::~BClass(void)
{
}

char* BClass::getValue()
{
    return value;
}

bool BClass::isStale()
{
    return stale;
}

//CClass

CClass::CClass(void)
{
    list.push_back(new BClass("thiago"));
    list.push_back(new BClass("bruno"));
    list.push_back(new BClass("carlos"));
}

CClass::~CClass(void)
{
}

BClass* CClass::getNext()
{
    return list.at(0);
}

//DClass

DClass::DClass(void)
{
}

DClass::~DClass(void)
{
}

void DClass::add( BClass s )
{
    list.push_back(&s);
}

char* DClass::getNext()
{
    BClass* b = list.at(0);

    return b->getValue();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:56:44.767

当您将类的实例传递`B`给`D::add()`函数时，您会*创建*对象的深层副本，该副本就是放入堆栈的内容。稍后您使用该*副本的地址将*其推送到列表中。一旦函数完成，这个自动变量就会超出范围，因此你用来放入列表的*指针*不再有效。

要修复更改您的界面以避免深层复制，如下所示：

```
void DClass::add( BClass * s )
{
    list.push_back(s);
} 
```

*逐步了解您的代码在做什么*

1.  `BClass* b = c->getNext();`// 从列表中获取第一个元素的地址（在构造函数中创建）并将其分配给`b`
2.  `d->add(*b);`// *b 将取消引用指向的对象`b`并将其放入堆栈以准备调用`add()`
3.  `void DClass::add( BClass s ){`// 取消引用对象的深层副本被放入此函数的堆栈帧
4.  `list.push_back(&s);`// 原始对象的*临时*副本的地址被用于添加到您的列表中
5.  `}`// 这就是有趣的地方 - 一旦函数完成，它将展开堆栈备份，并且先前由该临时副本占用的内存将被重新用于其他目的。在您的情况下 - 它将用于将参数传递给函数（非静态成员函数`d->getNext()`总是隐藏*this*`printf()`参数），然后再传递给函数。请记住 - 您之前指向该临时副本的指针仍然指向堆栈，但它现在被不同的数据占用，导致您看到损坏

一般经验法则 - 永远不要使用指向临时对象的指针 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:00:34.950

在`DClass::add`函数中，`BClass s`是一个局部变量。

```
void DClass::add( BClass s )
{
    list.push_back(&s);
} 
```

当您调用 时`d->add(*b);`，您传递的`BClass`是值，这意味着您正在创建它的副本，并且该副本的地址与原始地址不同。

`s`一旦函数返回，将超出范围，指向它的指针将无效。因此，存储该指针对您没有好处，因为取消引用它将是未定义的行为。

# python - Python中的地图颜色算法

> ID：13827430
> 
> 赞同：1
> 
> 时间：2012-12-11T19:50:07.727
> 
> 标签：python, recursion

我在 Python（3.2 版）中有一个二维数组，如下所示：

```
...AAA....
...AAABB..
..BBBBBCC.
.....CCCC.
.DDD..CC..
.DDD...... 
```

它代表一种带有不同颜色区域的地图。上面的示例显示了四个不同的区域，A、B、C 和 D。

下面是索引数组的示例：map[1][5] == 'A' 将返回 True。

我正在尝试编写一个函数，该函数接受这样的数组和行/列索引，并返回具有相同“颜色”的相邻空格的数量。因此，使用上面的示例，这里有一些返回值（参数分别是数组、行号和列号：

```
6 <-- countArea(map, 5, 2)
8 <-- countArea(map, 2, 8) 
```

我想将此实现为递归函数，但我无法弄清楚。这是我到目前为止所拥有的：

```
def countArea(map, row, col):

    key = map[row][col]

    if (map[row-1][col] == key):
        return 1 + countArea(map, row-1, col)
    elif (map[row+1][col] == key):
        return 1 + countArea(map, row+1, col)
    elif (map[row][col+1] == key):
        return 1 + countArea(map, row, col+1)
    elif (map[row][col-1] == key):
        return 1 + countArea(map, row, col-1)
    else:
        return 1 
```

我知道我在这里缺少一些基本的东西。我基本上是在说“这是当前角色，现在看每个方向看它是否具有相同的角色。”

**我的问题是，我在这个递归定义中遗漏了什么？**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:56:16.927

> 我的问题是，我在这个递归定义中遗漏了什么？

一旦计算了一个方格，就不能再次计算它（这包括通过递归调用来计算`countArea()`！）

您当前的算法尽可能向北移动，然后继续向南迈出一步，然后向北迈出一步。重复此两步序列，直到您用完堆栈空间。

[如果您愿意，您可以在Wikipedia](http://en.wikipedia.org/wiki/Flood_fill)中阅读此问题的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:57:20.100

在您的代码中，算法将查看给定输入字段左侧的一个字段，并且在递归调用中将再次调用初始字段上的函数。（你显然不想要什么，因为它会导致无限递归）

**方法一**

在仍然使用递归的同时克服这个问题的一种方法是指定递归应该寻找更多相同类型字段的*方向。*例如，调用第一个字段的正北（或*上方*）可能会递归地看起来更远的北方或东方（或*右边*），向东的那个向南（*下方*）和东方等等。

通过智能选择第一步，您可以确保扫描区域中没有重叠。然而，它需要一些调整来指定递归调用应该扫描的方向。**但是：**请注意，如果该区域是悬垂的，则此算法将不起作用，因此如果不能通过向右和向上移动来到达起点东北的每个区域。

存在更多这样的算法也能够解决上述问题。看看[维基百科上的洪水填充](http://en.wikipedia.org/wiki/Flood_fill)。

**方法二**

您还可以通过某种方式保存已经访问过的字段，如果该字段已被访问过，则直接从递归调用中返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:08:21.893

以下实现应该有效：

```
def countArea(map, row, col, key=None, seen=None):
    if key is None:
        key = map[row][col]
    if seen is None:
        seen = set()
    seen.add((row, col))  # mark this location as visited
    n = 1
    for dy, dx in [(0, 1), (1, 0), (-1, 0), (0, -1)]:
         r, c = row + dy, col + dx
         if r < 0 or r >= len(map) or c < 0 or c >= len(map[0]):  # check boundaries
             continue
         # only increment and recurse if key matches and we haven't already visited
         if map[r][c] == key and (r, c) not in seen:
             n += countArea(map, r, c, key, seen)
    return n 
```

例子：

```
>>> print '\n'.join(''.join(row) for row in map)
...AAA....
...AAABB..
..BBBBBCC.
.....CCCC.
.DDD..CC..
.DDD......
>>> countArea(map, 5, 2)
6
>>> countArea(map, 2, 8)
8 
```

请注意，这假定仅在对角线接触的具有相同键的区域应被视为独立的，例如对于以下地图`countArea(map, 0, 0)`并且`countArea(map, 1, 1)`都将返回 1：

```
A.
.A 
```

附带说明一下，您不应将`map`其用作变量名，因为它会掩盖内置`map()`函数。

# c# - Fleck (c#) Server Lib with web-socket-js (flash) Lib

> ID：13827431
> 
> 赞同：0
> 
> 时间：2012-12-11T19:50:15.413
> 
> 标签：c#, html, flash, websocket

我一直在尝试让[Fleck](https://github.com/statianzo/Fleck)（C# websocket 服务器实现）中的 echo 服务器示例与[web-socket-js](https://github.com/gimite/web-socket-js)（用于旧版浏览器的闪存驱动的 websocket）一起工作，并且遇到了问题。

我遇到的第一个问题是从端口 843 上传客户端访问策略。我放弃了，只是在 Fleck 的 WebSocketConnection 读取方法中添加了一些快速而肮脏的代码......

```
 if (body.StartsWith("<policy-file-request/>"))
        {
            FleckLog.Debug("Reveived Flash Policy File Request");

            var policyFile = @"<?xml version=""1.0""?><!DOCTYPE cross-domain-policy SYSTEM ""http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd""><cross-domain-policy><allow-access-from domain=""*"" to-ports=""*""/></cross-domain-policy>";
            byte[] bytes = new System.Text.UTF8Encoding().GetBytes(policyFile);

            Socket.Stream.Write(bytes, 0, bytes.Length);
            Socket.Stream.WriteByte(0);
            Socket.Stream.WriteByte(13);

            FleckLog.Debug("Flash Policy File Sent");

            return;
        } 
```

现在它似乎挂了。这是日志...

web-socket-js 日志：

```
LOG: [FLASH]:[WebSocket] debug enabled 
LOG: [FLASH]:[WebSocket] policy file: xmlsocket://localhost:843 
LOG: [FLASH]:[WebSocket] connected 
LOG: [FLASH]:[WebSocket] request header:
GET / HTTP/1.1
Host: localhost:8181
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: IVcOUW1sZkUxMGFNJ257dA==
Origin: http://localhost:6976
Sec-WebSocket-Version: 13
Cookie: 
```

从 Fleck 回声服务器我得到这个......

```
12/11/2012 2:38:37 PM [Info] Server started at ws://localhost:8181
12/11/2012 2:38:43 PM [Debug] Client Connected
12/11/2012 2:38:43 PM [Debug] Received:
12/11/2012 2:38:43 PM [Debug] 23 bytes read
12/11/2012 2:38:43 PM [Debug] Received: <policy-file-request/>
12/11/2012 2:38:43 PM [Debug] Reveived Flash Policy File Request
12/11/2012 2:38:43 PM [Debug] Flash Policy File Sent
12/11/2012 2:38:43 PM [Debug] Client Connected
12/11/2012 2:38:43 PM [Debug] Received:
12/11/2012 2:38:43 PM [Debug] 194 bytes read
12/11/2012 2:38:43 PM [Debug] Received: GET / HTTP/1.1
Host: localhost:8181
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dgNDXk5mfWYPbVlnImYDEA==
Origin: http://localhost:6976
Sec-WebSocket-Version: 13
Cookie: 
```

有没有人让这两个库相处？我正在使用 IE 9.0、Flash 11.5.502.110 和 .NET 4.0。此示例与带有 IE 9.0、Flash 11.5.502.110 的 web-socket-ruby/samples/echo_server.rb 完美配合，并且 Fleck 示例回显服务器与 Firefox/Chrome/etc 完美配合...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:13:26.233

找到了。用于解析 Web Socket 请求中的标头的 Fleck 正则表达式过于严格，并且需要 Flash 客户端未提供的换行符。

```
const string pattern = @"^(?<method>[^\s]+)\s(?<path>[^\s]+)\sHTTP\/1\.1\r\n" + // request line
                       @"((?<field_name>[^:\r\n]+):\s(?<field_value>[^\r\n]+)\r\n)+" + //headers
                       @"\r\n" + //newline*
                       @"(?<body>.+)?"; 
```

# c# - .NET 兼容的 Web 服务/用于 AMEX 公司卡报表的 API？

> ID：13827433
> 
> 赞同：0
> 
> 时间：2012-12-11T19:50:29.490
> 
> 标签：c#, api, credit-card

有这样的事吗？我会假设是的，但我一直找不到。我正在尝试收集活动行项目以自动化费用报告处理，我认为这将是一种优雅的方式。

我希望我的 google-fu 很弱，实际上有一个可用的 API 可供我使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:36:36.910

Yodlee 在这里可能会有所帮助，请参阅[http://www.yodlee.com/developers-and-alliances/](http://www.yodlee.com/developers-and-alliances/)。“Yodlee 的聚合 API 允许基于权限访问用户的金融账户，包括银行、卡、投资、贷款和账单。”

# java - Spring MVC 3.1 - 请求标头字符编码问题 [UTF-8]

> ID：13827434
> 
> 赞同：0
> 
> 时间：2012-12-11T19:50:31.940
> 
> 标签：java, spring, tomcat, spring-mvc, character-encoding

我正在尝试从请求标头中获取文件名，尽管我**在 web.xml 中定义了 Spring 编码过滤器，**但我遇到了字符编码问题。

```
String fileName = request.getHeader("X-File-Name"); // wrong encoding 
```

web.xml

```
 <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

此外，我已将`URIEncoding="UTF-8"`配置添加到 Tomcat server.xml 文件中。并添加了相同的配置 JAVA_OPTS。

```
-DuriEncoding=UTF-8 -Dfile.encoding=UTF-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:00:01.523

好吧，如果标头始终采用 UTF-8（或 ascii 格式），您可以这样做：

```
public static String reEncode( String input ) {
    Charset w1252 = Charset.forName("Windows-1252"); //Superset of ISO-8859-1
    Charset utf8 = Charset.forName("UTF-8");
    return new String(input.getBytes(w1252), utf8 );
}

...

String fileName = reEncode("MekanizmasÄ±.pdf"); //request.getHeader("X-File-Name")
System.out.println(fileName); //Mekanizması.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:58:10.297

没有为 HTTP 标头定义编码。期望它们最多支持 ISO-8859-1。更好地依赖 US-ASCII。顾名思义，参数是 URI 及其参数。没有其他的。

# javascript - 如何使用 JQuery 留在“实例”中

> ID：13827442
> 
> 赞同：1
> 
> 时间：2012-12-11T19:51:12.927
> 
> 标签：javascript, jquery

我目前正在学习 JavaScript/JQuery，但在工作中遇到了一个问题。

`<a>`我已经为标签分配了一类“问题” ，并为`<div>`. 当用户点击问题时，答案会向下滑动。但是，我遇到的问题是，当他们单击 a 时`<a href="#" class="question">`，会显示所有`<div class="answer">`'s。

我怎样才能让它在点击时只显示一个它的父 .question 的 .answer？

这是我的 HTML：

```
<li class="question"><a href="#">Question 1</a>
<div class="answer"><p>This is answer for question 1</p></div></li>
<li class="question"><a href="#">Question 2</a>
<div class="answer"><p>This is answer for question 2</p></div></li> 
```

这是我的jQuery：

```
<script>
  jQuery(document).ready(function ($) {
    $('div.answer').hide();
    $('li.question').click(function() {
      $('div.answer').slideDown('fast');
      return false;
    });
  });
</script> 
```

该网站是：[http ://topactioninvestments.com/faq/](http://topactioninvestments.com/faq/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:53:32.557

```
$('li.question').click(function(e) {
    $(this).find('div.answer').slideToggle('fast');
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:56:53.653

您通常想要做的是将每个单元放在一个容器元素中。一个例子是一个`div`或其他标签。假设您的 HTML 如下所示：

```
<div class="qa">
  <div class="question">What is 2+2?</div>
  <div class="answer">4</div>
</div> 
```

然后你可以这样做：

```
$('.question').click(function(event) {
  var target = $(event.target);
  target
    .closest('.qa')
    .find('.answer')
      .show();
}); 
```

您对每个问题和答案的标记如下所示：

```
<li>
  <a><strong>Why do you not just sell these option contracts?</strong></a>
  <div class="answer"><p>This is a test</p></div>
</li> 
```

对于这个标记，这个 JavaScript 可以工作：

```
$('li').on('click', function(event) {
  $(this).find('.answer').show();
}); 
```

演示：[jsfiddle](http://jsfiddle.net/bLRkE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:58:14.917

给每个 answer 元素一个唯一的**id**属性，并为引用该唯一**问题**的问题添加一个**data-answer**属性。

 **执行以下操作。

```
$('li.question').click(function(e) {
    $($(this).data("answer")).show();
}); 
```

用相关的html来澄清。

```
<li class="question" data-answer="#answer-42">...</li>
<div class="answer id="answer-42">....</div> 
```**

# css - 将 webgrid 列包装成 CSS

> ID：13827446
> 
> 赞同：1
> 
> 时间：2012-12-11T19:51:29.003
> 
> 标签：css, asp.net-mvc-3, model-view-controller, webgrid

我想将列包装在一组 css 类中.. 如下所示。但是它不起作用。

```
 @grid.GetHtml(
   @
       <div class="prod_box">
        <div class="center_prod_box">

    columns: grid.Columns(grid.Column("Model"),
         grid.Column("DiscountCost", 
       style:"reduce"))
  ,displayHeader:false
        </div>
   </div> ); 
```

# c# - 字符串导致“引用未设置为对象实例”

> ID：13827454
> 
> 赞同：0
> 
> 时间：2012-12-11T19:51:47.737
> 
> 标签：c#, asp.net, ashx

我有这段代码，它从数据库中读取数据，然后将 web.config 文件中的 url 分配给字符串。

```
bool isRequestCI = false;
            if (context.Request.QueryString["RequestCI"] != null)
            {
                isRequestCI = Convert.ToBoolean(context.Request.QueryString["RequestCI"].ToString());
            }
            string GetFileInfo;
            if (isRequestCI)
            {
                GetFileInfo = "select [FileName],FileExtension,MD5Hash from ElementCIBinaryAttachments where CIBinaryFileID = " + binaryFileID;
            }
            else
                GetFileInfo = "select [FileName],FileExtension,MD5Hash from CaseFileBinaryAttachments where BinaryFileID = " + binaryFileID;
            SqlCommand comGetFileInfo = new SqlCommand(GetFileInfo, cnGetFile);
            SqlDataReader drFileInfo;
            cnGetFile.Open();
            drFileInfo = comGetFileInfo.ExecuteReader();
            string fileName = "";
            string fileExtension = "";
            string MD5Hash = "";
            while (drFileInfo.Read())
            {
                fileName = drFileInfo["FileName"].ToString().Trim();
                fileExtension = drFileInfo["FileExtension"].ToString().Trim();
                MD5Hash = drFileInfo["MD5Hash"].ToString().Trim();
            }
            drFileInfo.Close();
            cnGetFile.Close();

            string MD5PathRequestCI = ConfigurationManager.AppSettings["CIUploadedFiles"].ToString() + MD5Hash.Substring(0, 3) + @"\" + MD5Hash.Substring(3, 3) + @"\" + MD5Hash.Substring(6, 3) + @"\" + MD5Hash.Substring(9); 
```

但是，它会导致异常`string MD5PathRequestCI`说“引用未设置为对象的实例，我不知道为什么。我从来没有这样做过，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:56:11.883

`ConfigurationManager.AppSettings["CIUploadedFiles"]`正在返回 null。确保配置文件中存在值“CIUploadedFiles”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:00:50.763

检查 web.config 文件。验证您的配置部分中是否有一个带有键“CIUploadedFiles”的 appSettings 条目。该部分位于根元素内：

```
<configuration>
 <appSettings>
  <add key="CIUploadedFiles" value=""/>
 </appSettings>
</configuration> 
```

# unix - 我如何嵌入〜<！Unix Mailx 消息中的日期？

> ID：13827457
> 
> 赞同：0
> 
> 时间：2012-12-11T19:51:52.450
> 
> 标签：unix, mailx

~！date 将在 mailx 处于输入模式时调用 date 命令。

~<! date 调用 date 命令并将日期包含在 mailx 消息中。

假设我想发送带有日期的消息

mailx -s "测试日期" TestUser123

我会在哪里插入 ~< ！日期命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:13:12.473

```
mailx -s "Test the date `date`" TestUser123 
```

这会将当前日期放在主题中注意 date 命令周围的反引号。

```
date | mailx -s "Test the date" TestUser123 
```

这会将日期放在电子邮件文本的正文中。

# c# - C# 中的 XML - hasAttribute，getAttribute 不存在？为什么？

> ID：13827459
> 
> 赞同：5
> 
> 时间：2012-12-11T19:52:19.300
> 
> 标签：c#, xml, parsing

我正在做一个项目，该项目需要我在单独的数据库中构建游戏的房间、物品和 NPC。我选择了 XML，但有些东西阻止了我在 C# 代码中正确解析 XML。我究竟做错了什么？

我的错误是：

```
System.xml.xmlnode does not contain a definition for HasAttribute 
```

（这`GetAttribute`也适用）并且没有扩展方法接受`'HasAttribute'`接受类型的第一个参数`System.Xml.XmlNode`？

这也适用`GetParentNode`，我的最后一行

```
string isMoveableStr = xmlRoom.GetAttribute("isMoveable"); 
```

不知何故：

```
the name xmlRoom does not exist in the current context 
```

这是方法：

```
public void loadFromFile()
    {
        XmlDocument xmlDoc = new XmlDocument();              // create an xml document object in memory.
        xmlDoc.Load("gamedata.xml");                         // load the XML document from the specified file into the object in memory.

        // Get rooms, NPCs, and items.
        XmlNodeList xmlRooms = xmlDoc.GetElementsByTagName("room");
        XmlNodeList xmlNPCs = xmlDoc.GetElementsByTagName("npc");
        XmlNodeList xmlItems = xmlDoc.GetElementsByTagName("item");

        foreach(XmlNode xmlRoom in xmlRooms) {               // defaults for room:

        string roomID = ""; 
        string roomDescription = "this a standard room, nothing special about it.";                  

        if( !xmlRoom.HasAttribute("ID") )                   //http://msdn.microsoft.com/en-us/library/acwfyhc7.aspx
        {              
        Console.WriteLine("A room was in the xml file without an ID attribute. Correct this to use the room"); 
        continue;                                       //skips remaining code in loop 

            } else {
             roomID = xmlRoom.GetAttribute("id");           //http://msdn.microsoft.com/en-us/library/acwfyhc7.aspx
            }

        if( xmlRoom.hasAttribute("description") )              
        {
            roomDescription = xmlRoom.GetAttribute("description");
        }

        Room myRoom = new Room(roomDescription, roomID); //creates a room
        rooms.Add(myRoom); //adds to list with all rooms in game ;)

            } foreach(XmlNode xmlNPC in xmlNPCs)
            { bool isMoveable = false;

        if( !xmlNPC.hasAttribute("id") )
        {
            Console.WriteLine("A NPC was in the xml file, without an id attribute, correct this to spawn the npc");
            continue; //skips remaining code in loop
        }

        XmlNode inRoom = xmlNPC.getParentNode();
        string roomID = inRoom.GetAttribute("id");

        if( xmlNPC.hasAttribute("isMoveable") )
        {
            string isMoveableStr = xmlRoom.GetAttribute("isMoveable");
            if( isMoveableStr == "true" )
            isMoveable = true;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T20:00:53.710

System.Xml.XmlElement 具有您正在寻找的功能。您正在获取 XMLNode。您需要将节点强制转换为 XmlElement 才能获得该功能。

```
xmlElement = (System.Xml.XmlElement)xmlRoom; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:32:59.793

这与您的问题并没有特别密切的关系，而是对@ChaosPandion 的建议和您在评论中的问题的回应，这是您使用 Linq to XML 的代码示例：

```
var xdoc = XDocument.Load("gamedata.xml");
var xRooms = xdoc.Descendants("room");
List<Room> rooms;

//If an element doesn't have a given attribute, the Attribute method will return null for that attribute
//Here we first check if any rooms are missing the ID attribute
if (xRooms.Any( xRoom => (string)xRoom.Attribute("ID") == null )) {
    Console.WriteLine("A room was in the xml file without an ID attribute...");
} else {
    rooms = (
        from xRoom in xRooms
        select new Room(
            xRoom.Attribute("description") ?? "this a standard room, nothing special about it.",
            (int)xRoom.Attribute("ID")
        )
    ).ToList();
}

var xNPCs = xdoc.Descendants("npc");
if (xNPCs.Any( xNPC => (string)xNPC.Attribute("id") == null )) {
    Console.WriteLine("A NPC was in the xml file, without an id attribute, correct this to spawn the npc");
} else {
    var npcs = (
        from xNPC in xNPCs
        let inRoom = xNPC.Parent
        select new {
            xNPC,
            inRoom,
            isMoveable = (string)xNPC.Attribute("isMoveable") != null &&
                         (string)inRoom.Attribute("isMoveable") == true
        }
    ).ToList();
} 
```

`foreach`然后你可以在`npcs`集合上使用一个简单的：

```
foreach (var npc in npcs) {
    Console.WriteLine(inRoom.Attribute("ID"));
    Console.WriteLine(npc.IsMoveable);
} 
```

OTOH，因为此代码使用该`Descendants`方法，该方法返回`XElement`（对应于 XML 元素的类型）而不是`XNode`（对应于 XML 节点的类型）的集合，所以节点对象没有属性的整个问题被巧妙地回避了.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T19:59:43.060

XmlNode 没有方法 HasAttribute 或 GetAttribute。如果您查看 XmlNode 的 MSDN 条目，您会看到它可用的方法。

[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)

如果您使用 XmlNode.Attributes["ATTRIBUTE_NAME"] 或在您的情况下使用 xmlRoom.Attributes["ID"]，您应该能够找到您正在寻找的属性。也就是说，如果您想继续使用 XmlNodes。

以下链接有一个示例，说明如何从 XmlNode 中按名称检索属性：http: [//msdn.microsoft.com/en-us/library/1b823yx9.aspx](http://msdn.microsoft.com/en-us/library/1b823yx9.aspx)

# performance - 使用子程序化在 fortran 程序之间交换数据

> ID：13827460
> 
> 赞同：2
> 
> 时间：2012-12-11T19:52:22.123
> 
> 标签：performance, fortran, subroutine

我有两个独立的（和大型的）fortran 程序，我需要在它们之间来回交换数据。它们是环境模拟器（我们称它们为 A 和 B），需要在每个时间步长交换几个数组的数据，直到模拟完成。我想出的解决方案是将 B 转换为每个时间步由 A 调用的子程序，并通过参数传递数据。因为 B 太大，所以每个时间步初始化它都很慢。

有没有办法将 B 保存在内存中，这样 A 就不会每次都将所有内容都加载回内存中？还有其他方法可以使子程序调用不那么慢吗？

有没有更有效的方法在独立的 fortran 程序之间以同步的方式交换数据而无需子程序化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:03:51.777

除了 MPI 方法，您还可以设计一个对象（派生类型），其中包含程序 B 需要知道的所有变量，以便在调用之间记住其状态。那么你应该把程序 B 的功能分成三个例程：

*   初始化例程（在 A 中的第一个时间步之前调用）
*   主程序（在 A 中的每个时间步调用）
*   可选：销毁（在 A 中的最后一个时间步之后调用）。

每次从程序 A 调用这些例程中的任何一个时，都会将派生类型与变量一起传递给它们。在第一次调用中，它们被初始化，在随后的调用中它们被使用。

所以程序 A 看起来像：

```
type(bdata) :: myb
...
call initialize_b(myb)
do ii = 1, ntimesteps
  ...
  call main_b(myb, data)
  ...
end do
call destruct_b(myb) 
```

该类型`bdata`必须包含程序 B 需要记住的所有内容，例如：

```
type :: bdata
  integer, allocatable :: whatever(:)
  ...
end type bdata 
```

具有程序 B 功能的模块中的例程如下：

```
!> First initialization of B (slow).
subroutine initialize_b(myb)
  type(bdata), intent(out) :: myb
  ...
end subroutine initialize_b

!> Process data comming from program A.
subroutine main_b(myb, data)
  type(bdata), intent(inout) :: myb
  ...
end subroutine main_b 
```

如果您只需要程序 B 的一个实例，您可以通过将程序 B 转换为一个模块来执行相同的技巧，其中模块变量存储其状态（而不是派生类型的字段）。但无论采用何种解决方案，您都必须以某种方式分离初始化部分，以确保它只执行一次。

# maven - 如何将 maven 命令行 mojo 调用的配置与全局插件配置分开？

> ID：13827463
> 
> 赞同：0
> 
> 时间：2012-12-11T19:52:49.157
> 
> 标签：maven, maven-plugin, cargo

我正在使用 cargo 插件在构建期间将我的应用程序部署到远程服务器。为此，我有一个 cargo 插件的配置元素。由于有两个执行使用这个单一配置，我使用一个全局配置元素，即它不在执行内部。

我还想在这个 pom 上执行 cargo:run mojo 的 CLI 调用。但是，我根本不希望此执行使用配置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:55:02.717

查看 Maven[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)。它能够帮助您处理不同环境中的配置差异。

# java - 使用DES在java中使用私钥而不自动生成密钥

> ID：13827466
> 
> 赞同：4
> 
> 时间：2012-12-11T19:52:58.847
> 
> 标签：java, des, encryption-symmetric

我必须使用带有密钥的 DES 加密/解密 java 中的纯文本。我在 IBM 有一个非常好的教程，可以在[这里](http://www.ibm.com/developerworks/java/tutorials/j-sec1/section4.html#prikeyexample)找到。此示例的问题在于它在程序本身中生成密钥。现在，如果我加密一个字符串（例如密码）并存储在数据库中，那么我将无法解密它，因为我不知道密钥。

以下是 IBM 的示例

```
import java.security.*;
import javax.crypto.*;
//
// encrypt and decrypt using the DES private key algorithm
public class PrivateExample {

  public static void main (String[] args) throws Exception {
  //
  // check args and get plaintext
    if (args.length !=1) {
      System.err.println("Usage: java PrivateExample text");
      System.exit(1);
    }
  byte[] plainText = args[0].getBytes("UTF8");
  //
  // get a DES private key
  System.out.println( "\nStart generating DES key" );
  KeyGenerator keyGen = KeyGenerator.getInstance("DES");
  keyGen.init(56);
  Key key = keyGen.generateKey();
  System.out.println( "Finish generating DES key" );
//
// get a DES cipher object and print the provider
Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
System.out.println( "\n" + cipher.getProvider().getInfo() );
//
// encrypt using the key and the plaintext
System.out.println( "\nStart encryption" );
cipher.init(Cipher.ENCRYPT_MODE, key);
byte[] cipherText = cipher.doFinal(plainText);
System.out.println( "Finish encryption: " );
System.out.println( new String(cipherText, "UTF8") );

//
// decrypt the ciphertext using the same key
System.out.println( "\nStart decryption" );
cipher.init(Cipher.DECRYPT_MODE, key);
byte[] newPlainText = cipher.doFinal(cipherText);
System.out.println( "Finish decryption: " );

System.out.println( new String(newPlainText, "UTF8") );
}
} 
```

谁能建议我如何在此示例中添加自己的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:57:18.847

如果您打算提供密钥，请将密钥作为参数之一，而不是 generateKey。

编辑： generateKey 生成一个随机密钥。保存此密钥以用于解密可能比添加代码来解析密钥 arg 更简单。看看[KeyGenerator](http://docs.oracle.com/javase/6/docs/api/javax/crypto/KeyGenerator.html)和[SecretKey](http://docs.oracle.com/javase/6/docs/api/javax/crypto/SecretKey.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:52:21.940

看看[`SecretKeyFactory`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/SecretKeyFactory.html)和[`DESKeySpec`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/DESKeySpec.html)。这些可用于从密钥材料（字节数组）构造 DES 密钥。

您可以使用 DES 密钥从 DES 密钥中获取密钥材料[`getEncoded()`](http://docs.oracle.com/javase/7/docs/api/java/security/Key.html#getEncoded%28%29)。

# ruby-on-rails - 未定义的方法`symbolize_keys！对于“/reie”：字符串

> ID：13827467
> 
> 赞同：0
> 
> 时间：2012-12-11T19:53:01.253
> 
> 标签：ruby-on-rails, gravatar

我正在制作一个缩略图，它将包含所有朋友的头像，并带有指向每个朋友个人资料的链接。在我添加这部分之前，我让每件事都正常工作。，`other_user_page_path(friend.username)`误差为

```
undefined method `symbolize_keys!' for "/reie":String 
```

这是整个代码

```
<% current_user.friends_of.each do |friend| %>
       <%=  link_to image_tag (friend.gravatar_url(:size => 30)) , other_user_page_path(friend.username)%>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T08:57:51.390

错误在这里

```
 <%=  link_to image_tag (friend.gravatar_url(:size => 30))
 , other_user_page_path(friend.username)%> 
```

删除 image_tag 之后的空格。改成这样。

```
 <%=  link_to image_tag(friend.gravatar_url(:size => 30))
 , other_user_page_path(friend.username)%> 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:02:33.370

尝试

```
<% current_user.friends_of.each do |friend| %>
   <%=  link_to other_user_page_path(friend.username) do %>
     <%= image_tag(friend.gravatar_url(:size => 30)) %>
   <% end %>   
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:56:34.373

```
<% current_user.friends_of.each do |friend| %>
       <%= link_to(image_tag (friend.gravatar_url(:size => 30)) , other_user_page_path(friend.username)) %>
<% end %> 
```

# php - 使用 PHP Prepared PDO 将记录插入 MySQL

> ID：13827469
> 
> 赞同：0
> 
> 时间：2012-12-11T19:53:04.310
> 
> 标签：php, pdo, prepared-statement

希望这不仅仅是一个错字，但我已经束手无策了。这种代码格式和语法适用于我的另一个项目，但我什么也得不到。

注 1：变量均已填充。我用回声检查。

注意 2：我检查以确保所有字段名称都是 MySQL 表中的实际字段名称。所有都是至少 30 的 varchar （我没有过去）。

注意 3：消息是这样的：Error SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以了解在 ''username'、'userpassword'、'personname'、'familyname' 附近使用的正确语法） VALUES ('hwilson':,'hwil' at line 1

任何帮助表示赞赏。

```
try {
    // THIS IS THE SECURE STUFF!
$sql = "INSERT INTO persons (username, userpassword, personname, familyname) VALUES (:username:,:userpassword,:personname,:familyname)";
    $q = $pdo->prepare($sql);
    $q->execute(array(':username'=>$username,
                      ':userpassword'=>$userpassword,
                      ':personname'=>$personname,
                      ':familyname'=>$familyname));
}
    catch(PDOException $e)
    {
        echo "Error " . $e->getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:56:54.960

试试这个`:username:`：`:username`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:57:15.220

用户名参数占位符后似乎有第二个冒号

# android - 在接收短信时更改地图位置

> ID：13827470
> 
> 赞同：1
> 
> 时间：2012-12-11T19:53:15.707
> 
> 标签：android

我是安卓新手。`requestLocationUpdates`使用 GPS 提供商工作正常，但我想在收到新消息时更新位置。我已经为 SMS 接收器创建了类，它工作正常。我现在可以检测特定号码和新位置，只是我想在接收短信时使用位置管理器。

```
manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,  listener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:08:33.087

我的建议是在您收到短信时使用最新的已知位置：

```
LocationManager lm = (LocationManager)act.getSystemService(Context.LOCATION_SERVICE);
Criteria crit = new Criteria();
crit.setAccuracy(Criteria.ACCURACY_FINE);
String provider = lm.getBestProvider(crit, true);
Location loc = lm.getLastKnownLocation(provider); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T22:41:20.480

如果您不停止位置更新，android 将继续位置更新并从您的 GPS_PROVIDER（又名 gps 经度和纬度）设置位置。

您需要的是构造一个位置对象并使用它。这是一个类似于一个位置更新返回的对象...

```
Location smsLocation = new Location(LocationManager.GPS_PROVIDER);
smsLocation.setLatitude(latitude); //latitude=12.3456789
smsLocation.setLongitude(longitude); //longitude=98.7654321 
```

# c# - 如何使用 Authorize.Net CIM 检索付款信息

> ID：13827471
> 
> 赞同：2
> 
> 时间：2012-12-11T19:53:30.573
> 
> 标签：c#, authorize.net, payment-processing

我正在尝试使用 Authorize.Net CIM API 使用 GetCustomerPaymentProfile 检索付款信息。特别是，我需要屏蔽的信用卡号和信用卡类型或屏蔽的支票帐号。我已阅读 API 文档并遵循它，但没有智能感知，因此我的项目无法编译。

```
var data = Service.GetCustomerPaymentProfile(MerchantAuthentication, profileId, customerPaymentProfileId);

var creditCard = data.creditCard... (nothing here) 
```

使用 C#，我将如何做到这一点？

编辑：看起来付款对象是动态的。这是我最终使用的代码。谢谢您的帮助！

```
 if (data.paymentProfile.payment.Item.GetType() == typeof(CreditCardMaskedType))
        {
            var obj = (CreditCardMaskedType) data.paymentProfile.payment.Item;
            retval.CreditCardNumber = obj.cardNumber;
            retval.CreditCardType = obj.cardType;
        }

        if (data.paymentProfile.payment.Item.GetType() == typeof(BankAccountMaskedType))
        {
            var obj = (BankAccountMaskedType)data.paymentProfile.payment.Item;
            retval.BankAccountNumber = obj.accountNumber;
            retval.BankRoutingNumber = obj.routingNumber;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:01:10.717

我不知道 C#，但如果它的语义遵循其他语言，这应该可以工作：

```
var creditCard = data.paymentProfile.payment.creditCard.cardNumber; 
```

这是一个可能对您有帮助的示例 XML 输出：

```
<?xml version="1.0" encoding="utf-8"?>
<getCustomerPaymentProfileResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd">
  <messages>
    <resultCode>Ok</resultCode>
    <message>
      <code>I00001</code>
      <text>Successful.</text>
    </message>
  </messages>
  <paymentProfile>
    <billTo>
      <firstName>John</firstName>
      <lastName>Smith</lastName>
      <address>123 Main Street</address>
      <city>Townsville</city>
      <state>NJ</state>
      <zip>12345</zip>
      <phoneNumber>800-555-1234</phoneNumber>
    </billTo>
    <customerPaymentProfileId>4796541</customerPaymentProfileId>
    <payment>
      <creditCard>
        <cardNumber>XXXX1111</cardNumber>
        <expirationDate>XXXX</expirationDate>
      </creditCard>
    </payment>
  </paymentProfile>
</getCustomerPaymentProfileResponse> 
```

# jquery - Jquery Mobile datepicker出现在弹出窗口后面

> ID：13827474
> 
> 赞同：0
> 
> 时间：2012-12-11T19:53:56.863
> 
> 标签：jquery, mobile, popup, datepicker

我有一个应用程序，用户可以在其中发布/请求拼车。但是，当他们去创建行程时，日期选择器会出现在他们输入数据的弹出窗口后面。

[http://maplemtn.com/~spencer/ridecircle/greg/#allrides](http://maplemtn.com/~spencer/ridecircle/greg/#allrides)

点击“创建骑行”

点击“什么时候？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:00:17.703

将以下规则添加到您的样式表中：

```
.dw { z-index: 2000 !important; } 
```

# java - JSONArray 异常：索引 50 超出范围 [0..50)。JsonArray 是否有任何限制

> ID：13827475
> 
> 赞同：3
> 
> 时间：2012-12-11T19:54:02.073
> 
> 标签：java, android, json

我`JSON`以以下方式在我的android应用程序中使用：

*   向 URL 发送请求并接收 JSON 响应。
*   解析 JSON 响应并获取所需的元素“结果”，它是一个 JSON 数组。
*   循环这个 JSON 数组的每个第 i 个元素并继续执行所需的操作

代码：

```
Integer numberOfItemsInResp = pagination.getInt("items");
    JSONArray results = jsonResponse.getJSONArray("results");
    for (int i = 0; i < numberOfItemsInResp; i++){
        JSONObject perResult = results.getJSONObject(i);
    } 
```

问题是当**i**达到 50 时，`JSONObject perResult = results.getJSONObject(i)`抛出**“org.json.JSONException: Index 50 out of range [0..50)”**异常。

JSONArray 是否有任何限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T19:59:34.190

是什么`numberOfItemsInResp`？建议你这样做：

```
JSONArray results = jsonResponse.getJSONArray("results");
final int numberOfItemsInResp = results.length();
for (int i = 0; i < numberOfItemsInResp; i++){
    JSONObject perResult = results.getJSONObject(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:03:18.993

只需做一个简单的调试，看看你的数组是什么样子的，很可能你在数组中没有足够的项目作为你提供的索引，上面的答案在这方面很清楚。

# c - 第三个函数不会运行 scanf

> ID：13827476
> 
> 赞同：2
> 
> 时间：2012-12-11T19:54:05.440
> 
> 标签：c

我有一个简单的程序，它接收来自 3 个不同函数的输入，2 个返回整数，1 个返回一个字符，但第三个函数由于某种原因不扫描，它完全跳过了该步骤。

```
#include <stdio.h>

int get_height();
int get_length();
char get_symbol();
void draw_rectangle(int h, int l, char s);

int main () {

    int h, l;
    char s;

    h = get_height();
    l = get_length();
    s = get_symbol();

    draw_rectangle(h, l, s);

    return 0;
}

int get_height() {

    int i;

    printf ("Please enter the height of the rectangle: ");
    scanf ("%d", &i);

    return i;
}

int get_length() {

    int i;

    printf ("Please enter the length of the rectangle: ");
    scanf ("%d", &i);

    return i;
}

char get_symbol() {

    char i;

    printf ("Please enter the symbol for the rectangle: ");
    scanf ("%c", &i);

    return i;
}

void draw_rectangle(int h, int l, char s) {
    printf ("%d %d %c", h, l, s);
} 
```

当我运行它时，我可以扫描高度和长度，但它会打印提示以扫描字符，但随后会跳过用户输入并打印 h 和 l 的值，但不打印 s。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:56:21.470

先前的 scanf 在输入缓冲区中留下一个换行符，由以下内容使用：

```
scanf ("%c", &i); 
```

只需将其更改为：

```
scanf (" %c", &i); 
```

注意空间。这将告诉 scanf 忽略所有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T19:55:13.333

`scanf()`您需要使用先前调用留下的换行符。一个简单的方法是：

```
scanf ("%d", &i);
getchar(); 
```

在使用它的每个函数中。或者只需一个电话：

```
scanf(" %c", &i); 
```

空格会告诉它跳过前面的制表符、换行符或空格。

`stdin`被缓冲，当用户输入一个数字时，你也会得到一个换行符。因此，带有该字符的 scanf 会选择剩下的换行符之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:53:07.563

你也可以使用

```
fflush(stdin);
scanf("%c",&i); 
```

它将解决您的问题。由于 fflush 在读取字符之前清除缓冲区

# jquery - TypeError: jQuery(...).dataTable 不是 Grails 中的函数

> ID：13827477
> 
> 赞同：4
> 
> 时间：2012-12-11T19:54:13.893
> 
> 标签：jquery, grails, datatables

我正在尝试在 grails 2.1 上安装 jquery 数据表，直到现在都没有运气。我安装了 JQuery、JQuery-ui 和 jquery-datatable 插件。将以下代码添加到 main.gsp：

```
<g:javascript library="jquery" plugin="jquery" />

        <r:require module="application"/>
        <jqui:resources /> 
```

这段代码在我看来：

```
 <jqDT:resources />
  <g:javascript>
     $(document).ready(function() {

        jQuery('#demo').dataTable({
           sScrollY: '70%',
           bProcessing: true,
           bServerSide: true,
           sAjaxSource: '${request.contextPath + '/person/dataTablesData'}' ,
           sPaginationType: "full_numbers",
           aLengthMenu: [[100, 500, 1000, 5000, -1], [100, 500, 1000, 5000, "All"]],
           iDisplayLength: 500
        });
     });
  </g:javascript> 
```

但是当我试图渲染它时，我得到了以下异常：

```
TypeError: jQuery(...).dataTable is not a function 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T00:03:16.797

只是一个猜测，但可能是您使用的是 jQuery 2，它从以前的版本中删除/替换了一些功能。试试 jQuery 1.10.1 看看有没有改进。

# actionscript-3 - AS3 - Flash 11 和全屏

> ID：13827482
> 
> 赞同：0
> 
> 时间：2012-12-11T19:54:32.587
> 
> 标签：actionscript-3, flash, flash-builder

我在将程序设置为全屏运行时遇到问题。

我在 flash builder 4.5（使用 flash 11.5）中创建了一个 win 投影仪，我尝试使用 fscommands 来完成它，但结果却是黑屏......有没有首选的方法来设置它以完全运行来自 Flash Builder 的屏幕？

```
fscommand("fullscreen","true");
fscommand("allowscale","false"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:31:31.727

在这里尝试这个简单的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
 applicationComplete="init();">
    <mx:Script>
        <![CDATA[

        import flash.display.StageDisplayState;

        private function init():void{

            stage.displayState = StageDisplayState.FULL_SCREEN;

        }

        ]]>
    </mx:Script>

</mx:Application> 
```

同样在放置此 SWF 文件的 HTML 文件中，将以下内容添加到 Flash SWF 对象：

```
<param name="allowFullScreen" value="true" /> 
```

希望有效！

# javascript - 如何检查 jQuery mobile 是否已完成转换？

> ID：13827488
> 
> 赞同：0
> 
> 时间：2012-12-11T19:55:04.937
> 
> 标签：javascript, jquery, jquery-mobile

是否有页面属性或方法可用于检查当前活动页面是否已完成加载或已完成转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:57:44.370

换页事件。

> *在 changePage() 请求完成将页面加载到 DOM 并且所有页面转换动画都完成后触发此事件。*

更多信息：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

```
$('#page').bind( "pagechange", function( e, data ) {
    alert("pagechange");   
}); 
```

# c# - 推荐的从 Web 服务 POST 和接收的方式，全部来自 MVC 控制器

> ID：13827489
> 
> 赞同：0
> 
> 时间：2012-12-11T19:55:07.297
> 
> 标签：c#, xml, asp.net-mvc

我正在尝试使用带有 POST 方法的表单将一些数据发送到 Web 服务，它使用 XML 页面对其进行响应。我的 POST 部分使用简单的表单并在我的视图中提交。但是，我不确定如何处理来自这里的响应，所以我试图将它全部移到控制器中（似乎它应该在那里）。所以理论上是让用户点击一个按钮，将模型数据发送到控制器。在控制器中，我试图组合一个 webrequest，如下所示：

```
 [HttpPost]
    public ActionResult SubmitToCris(NewApplicantViewModel model)
    {
        string serviceURL = "https://www.blahblah.com/XMLServer/XMLServer.cgi";

        string postData = "MaxRecords=0&UserID=skapi&Password=sk12024&Version=2.0&RequestType=searchName&FirstName=Nathan"
                                    + "&LastName=Smith&DOB=1984/2/2";

        WebRequest request = WebRequest.Create(serviceURL);
        request.Method = "POST";

        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        WebResponse response = request.GetResponse();
        dataStream = response.GetResponseStream();

        StreamReader reader = new StreamReader(dataStream);

        return View();

    } 
```

我似乎没有得到回应，所以我挖了一个发现“流不支持搜索操作”。看起来这是由于无法读取字节数组的长度造成的。我将通过循环修复它。

所以我现在正在寻找的是，这甚至是正确的方法吗？我整个早上都在研究这个，并想出了多种方法，我选择了这个，因为它似乎是最直接的方法。

任何人，如果我能得到一个 MVC 或 ASP 特定的示例或教程来说明这一切应该如何工作，那就太好了。谢谢。

- - - -编辑 - - - - - - -

更改了 postData 变量。

这是我在发布数据后从其他公司的网络服务器收到的响应：

```
<?xml version="1.0" encoding="UTF-8"?>
  <HistoryResponse>
  <ResponseType>resultsList</ResponseType>
  <Matches>0</Matches>
  <SessionID>75803234r23df3de</SessionID>
  <RecStart>0</RecStart>
  <ClientCode></ClientCode>
  <Results></Results>
</HistoryResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:01:47.850

我花了几天时间研究和询问如何从 MVC 控制器发布一些数据，然后获取 XML 响应。我很惊讶在网上没有找到答案，我只能假设我的搜索参数有问题，因为这似乎不是一件深奥的事情。任何人，我想我会发布我的工作代码，以防它对某人有用。免责声明 - 我几个月前才开始编码，所以即使这可行，我也不保证这是最好的方法。:-)

```
 [HttpPost]
    public ActionResult SubmitToCris(NewApplicantViewModel model)
    {
        // Setup my variables
        string First = model.PersonModel.FirstName;
        string Last = model.PersonModel.LastName;
        string dob = model.PersonModel.DateofBirth.ToString("yyyy-MM-dd");

        string historyURL = "https://www.nunya.com/XMLServer/XMLServer.cgi";
        //Build my data to be sent in key/value pair string 
        string postData = "MaxRecords=0&UserID=skapi&Password=sk12024&Version=2.0&RequestType=searchName&FirstName="
                                    + First + "&LastName="
                                    + Last + "&DOB="
                                    + dob;

        //Create the web request, populate the header info
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(crisURL);
        request.Method = "POST";
        request.ContentLength = postData.Length;
        request.ContentType = "application/x-www-form-urlencoded";

        // Send it
        using (Stream writeStream = request.GetRequestStream())
        {
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            writeStream.Write(byteArray, 0, byteArray.Length);
            writeStream.Close();
        }

        // Receive the response and do stuff with it.
        string result = string.Empty;

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using( Stream responseStream = response.GetResponseStream() )
            {
                using( StreamReader readStream = new StreamReader(responseStream, Encoding.UTF8))
                {
                    result = readStream.ReadToEnd();
                }

            }
        }

        XDocument resultLoad = XDocument.Parse(result);
        ViewBag.XmlResponse = resultLoad.ToString();

        return View();

    } 
```

在这个时候，我对响应做的不多，它只不过是一个字符串。我个人需要根据返回的数据存储一些信息并格式化几个视图。一旦我把它整理好，我会发布它，但我现在想把它拿出来。

# java - 如何使用java删除谷歌应用程序后端？

> ID：13827493
> 
> 赞同：0
> 
> 时间：2012-12-11T19:55:17.377
> 
> 标签：java, google-app-engine

我阅读了 Google App Engine 后端文档，但我仍然不明白如何从 Java 中停止后端

有人可以给我一个代码示例吗？如何删除后端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:26:34.423

你不能。请参阅此处：[https ://developers.google.com/appengine/docs/java/config/backends#Types_of_Backends](https://developers.google.com/appengine/docs/java/config/backends#Types_of_Backends)

大约 15 分钟不活动后，动态后端会自动停止。

驻留后端只能通过`appcfg`Admin Console 或 Admin Console 停止。

# r - 将 igraph 的社区检测与 neo4j 集成

> ID：13827495
> 
> 赞同：2
> 
> 时间：2012-12-11T19:55:26.757
> 
> 标签：r, graph, nosql, neo4j, igraph

我正在使用 R 中 igraph 包中的 label.propagation.community 算法来集群我的网络。如果我的图形数据库是 neo4j 数据库格式，是否有任何 R 库可以让我将数据库中的数据加载到 R 中？任何展示我们如何从 R 连接到 neo4j 的示例也将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:51:34.763

我不认为这是连接到 neo4j 的特定 R 包。

但是，使用`RCurl`并且`RJSONIO`您可以从 neo4J 加载您的图表。

1.  CurlPerform 执行查询
2.  fromJSON 将结果转换为 data.frame

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-14T14:38:01.927

对于后代，Neo4j 现在有直接的 R 支持：[RNeo4j](http://neo4j.com/developer/r/)

# java - && 和 | 的使用 表达式中的运算符一起

> ID：13827498
> 
> 赞同：2
> 
> 时间：2012-12-11T19:55:36.457
> 
> 标签：java, logical-operators

`cond && cond op cond`

`op`可以是`&&`或`||`

Qn- 对于短路 ( `&&`) 运算符，如果第一个条件为假，则不评估右侧部分（整体）或不评估之后的第二个`&&`条件

另外为什么以下两个表达式的结果不同？

`(2 > 3 && 5 < 2 || 3 > 2)`=>`True`

`(2 > 3 && 5 < 2 | 3 > 2)` =>`False`

我们不能在一个表达式中使用短路运算符和标准运算符吗...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:07:09.027

结果是不同的，因为`|`和`||` [有不同的优先级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)。

具体来说，`|`的优先级高于`&&`，而`||`的优先级低于`&&`。

```
 System.out.println(2 > 3 && 5 < 2 || 3 > 2);    // true
          System.out.println(2 > 3 && 5 < 2 | 3 > 2);     // false
          System.out.println(2 > 3 && (5 < 2 | 3 > 2));   // false
          System.out.println((2 > 3 && 5 < 2) | (3 > 2)); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:59:44.067

您的结果不同，因为您的第二种情况使用 | 而不是||。| 是按位或，与逻辑或不同。

现在您说短路表达式与标准表达式，但在许多语言中，短路表达式是评估逻辑表达式的默认（或唯一方式）。

如果“标准”指的是 & 或 | 之类的按位运算符，那么您可以将它们与逻辑运算符混合并匹配，尽管结果可能不是您所期望的。

# iphone - iOS - Facebook SDK 3.1.1 构建失败 armv7

> ID：13827499
> 
> 赞同：0
> 
> 时间：2012-12-11T19:55:38.007
> 
> 标签：iphone, ios, facebook, armv7

我即将单独集成 Facebook SDK（至少目前是这样），以便在 Facebook 应用程序中显示我的应用程序的移动广告。我下载了最新的 SDK v3.1.1 并将框架添加到项目中。但是它没有构建并给我这个错误：

![在此处输入图像描述](../Images/bee3b5a83cef1f093a43769d314b7d23.png)

我很难相信这个框架不是为 armv7 编译的。FacebookSDK 是否有其他人出现此错误？我使用 iOS6 作为我的基础 SDK。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:24:16.240

事实证明，您必须向项目中添加的不仅仅是框架。一旦我遵循本指南，它就起作用了。

[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

转到第 5 部分 - 配置新的 Xcode 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:27:34.817

在架构中还添加 armv7 和 armv7，然后构建您的项目。希望这对您有所帮助。![在这里我附上图片也像这张图片一样添加](../Images/b17e06ced4d5809152fe46136b502695.png)

# iphone - 用户交互后刷新屏幕

> ID：13827500
> 
> 赞同：0
> 
> 时间：2012-12-11T19:55:39.440
> 
> 标签：iphone, objective-c, ios, xcode, sleep

我正在为 iOs 在 xcode 中编写应用程序。我有这样的代码：

```
- (void)buttonAction:(UIButton*)sender{

    UIView *figure = (UIView *) [figures objectAtIndex:sender.tag];

    [figure.layer setBorderWidth:2.0f];
    [figure.layer setBorderColor: [UIColor greenColor].CGColor];
    sleep(1);
    [self cleanScreen];

}

- (void) cleanScreen {

    //Some code to hide all view objects

} 
```

我希望在 cleanScreen 函数删除项目之前，边框颜色和宽度的更改会在屏幕上反映 1 秒钟。但是碰巧这些更改没有反映，并且花了一秒钟的时间将元素删除。

我想在调用 cleanScreen 之前刷新屏幕。

如何达到我想要的效果？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:00:20.097

代替：

```
sleep(1); 
```

采用：

```
[self performSelector:@selector(cleanScreen) withObject:nil afterDelay:1]; 
```

与`sleep()`您一起冻结整个应用程序

# facebook - facebook 图形 api 的问题

> ID：13827501
> 
> 赞同：2
> 
> 时间：2012-12-11T19:55:41.233
> 
> 标签：facebook, facebook-graph-api

我一直在尝试进行以下 Facebook 图形 api 调用...

[https://graph.facebook.com/me&access_token=mytokenhere](https://graph.facebook.com/me&access_token=mytokenhere)

几个月来我一直在打同样的电话，没有任何问题。我收到以下回复...

```
{
   "error": {
      "message": "(#803) Some of the aliases you requested do not exist: me&access_token=mytokenhere",
      "type": "OAuthException",
      "code": 803
   }
} 
```

显然 mytokenhere 被替换为我的实际令牌，而不是传递文字“mytokenhere”。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:13:26.050

看起来您没有正确调用 qs 参数。

试试这个：

[https://graph.facebook.com/me?access_token=mytokenhere](https://graph.facebook.com/me?access_token=mytokenhere)

# linux - 从busybox microcom 回显字符到标准输出

> ID：13827512
> 
> 赞同：0
> 
> 时间：2012-12-11T19:56:48.363
> 
> 标签：linux, busybox

我正在使用busybox microcom 程序通过websocket 在2 个jsLinux 实例之间进行通信。一切都很好，使用 microcom 我可以在图像之间聊天。

但是，我还希望将我输入的内容回显给我，而不仅仅是其他人输入的内容。我尝试了类似 tail -f | microcom /dev/ttyS1 但是这不起作用。

我用来连接 2 个实例（通过模拟串行端口）的命令是：microcom /dev/ttyS1

这是busybox microcom 文档：

microcom [-d 延迟] [-t 超时] [-s 速度] [-X] TTY

将 stdin 的字节复制到 TTY 并从 TTY 复制到 stdout

选项：

```
 -d      Wait up to DELAY ms for TTY output before sending every
            next byte to it
    -t      Exit if both stdin and TTY are silent for TIMEOUT ms
    -s      Set serial line to SPEED
    -X      Disable special meaning of NUL and Ctrl-X from stdin 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:16:41.317

试试这个：

```
tee /dev/stderr | microcom /dev/ttyS1 
```

这会将所有内容打印到`/dev/stderr`（通常是到的符号链接`/proc/self/fd/2`）并将其通过管道传输到 microcom 的标准输入中（或使用文件而不是 stderr ...）

# c++ - Microsoft Visual Studio 2012 的生产力工具无法正常工作

> ID：13827524
> 
> 赞同：3
> 
> 时间：2012-12-11T19:57:36.017
> 
> 标签：c++, visual-studio-2012, productivity-power-tools

我一直使用 eclipse 来做 c++ 工作，但现在我可以通过我的大学获得最终的 VS 许可证。我一直在尝试，但我无法克服的一件事是它不会自动关闭花括号、括号等。我已经安装了应该添加此功能的 Productivity Power Tools 扩展，但即使虽然它显示在已安装的扩展列表中，并且我在扩展设置中启用了该功能，但它仍然不会自动完成我的大括号。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-01T08:21:09.543

生产力工具似乎不支持本机 C++，仅支持托管语言（C#、C++ 和 vb）。最好使用[Visual Assist](http://www.wholetomato.com/)。

# php - preg_match_all() 和 YouTube 正则表达式

> ID：13827525
> 
> 赞同：0
> 
> 时间：2012-12-11T19:57:38.223
> 
> 标签：php, regex, arrays, youtube, preg-match-all

我有这个正则表达式模式来获取 YouTube 视频 ID

`preg_match_all( '/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i', $string, $res );`

但是，它似乎不适用于下面示例中的字符串：

```
<?php

$string = "yet, another youtube video.

[url=http://www.youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI#]http://www.youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI#[/url]

Fonte:onothersite";

preg_match_all( '/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i', $string, $res );

print_r($res);

?> 
```

上面的代码输出如下：

```
Array (
  [0] =>
    Array (
      [0] => youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI#]http://www.youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI#[/url] Font
    )
  [1] => 
    Array ( 
      [0] => url] Font
    )
) 
```

并且应该输出这个：

```
Array (
  [0] =>
    Array (
      [0] => youtube.com/watch?v=6kVpM5WK5JI
    )
  [1] => 
    Array ( 
      [0] => 6kVpM5WK5JI 
    )
) 
```

知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:13:38.080

小心贪婪的模式，比如`.+`and `.*`！我分别用`[^\/]+`and替换了它`[^#]*`，它似乎有效。

这

```
preg_match_all( '/(?:youtube\.com\/(?:[^\/]+\/[^\/]+\/|(?:v|e(?:mbed)?)\/|[^#]*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i', $string, $res ); 
```

给

```
Array ( 
    [0] => Array ( 
        [0] => youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI 
        [1] => youtube.com/watch?feature=player_embedded&v=6kVpM5WK5JI 
        ) 
    [1] => Array ( 
        [0] => 6kVpM5WK5JI 
        [1] => 6kVpM5WK5JI 
        ) 
    ) 
```

**更新**以删除第二个贪婪模式。

# c++ - 在 while 循环中使用 std::cout 的奇怪行为

> ID：13827526
> 
> 赞同：-3
> 
> 时间：2012-12-11T19:57:39.190
> 
> 标签：c++

我正在尝试将两个数组附加在一起。`{0, 1, 2}`当附加到第二个数组时，第一个数组应该`{3, 4, 5}`yield `{0, 1, 2, 3, 4, 5}`。在继续之前，让我向您展示我拥有的东西：

```
#include <iostream>

int main() {

    int i = 0;

    int arr1[] = {3, 4, 5}, arr2[] = {0, 1, 2};

    while (i < 3) {
        arr2[3 + i] = arr1[i];
        i++;
    }

    std::cout << std::endl;

    for (int i = 0; i < 6; i++) std::cout << arr2[i] << std::endl; // print

} 
```

我认为我实现它的方式是正确的。但我发现，当我打印出新数组 ( `arr2`) 的内容时，我得到的是：

```
0
1
2
-1219315227
-1218166796
134514640 
```

`0, 1, 2`是原始数组，但后来`3, 4, 5`有一些如何变成这些奇怪的数字。`std::cout`然而，这通过我在 while 循环中添加任意语句以某种方式解决：

```
...
while (i < 3) {
    std::cout << 5 << '\n'; // just a random #

    arr2[3 + i] = arr1[i];
    i++;
}
... 
```

我再次打印数组并且它有效！：

```
5

0
1
2
3
4
5 
```

我的问题是为什么当我`std::cout`在 while 循环中使用语句而不是不这样做时它会起作用，在这种情况下它会给我这些数字？

**编辑：**

所以事实证明我在这里是未定义的行为。有了这个，我的问题仍然存在：为什么我的代码可以与`std::cout`while 循环内的调用一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:59:56.587

你正在超越`arr2`这里的界限：

```
while (i < 3) {
    arr2[3 + i] = arr1[i];
    i++;
} 
```

`arr2`大小为 3。您正在做的是未定义的行为。所有观察到的行为都与未定义的行为一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:00:09.733

当您像这样声明第二个数组时：

```
arr2[] = {0, 1, 2}; 
```

您给它的大小为 3。在这些范围之外写入是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:02:06.667

您在这里拥有的是**未定义的行为**：

问题是`arr2`仅分配了 3 个项目，并且您在分配空间后编写：

```
while (i < 3) {
    arr2[3 + i] = arr1[i];
    i++;
} 
```

您需要为数组分配更多空间，或者在堆上分配它，因此您可以使用`realloc`函数来更改其大小 - 或者，甚至更好，更多的 c++-ish - 使用`std::vector<int>`！

# c# - 写入文件 - C#

> ID：13827527
> 
> 赞同：0
> 
> 时间：2012-12-11T19:57:42.133
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2010 和 C#。我有以下代码，它只是编写并创建一个日志文件：

```
StreamWriter file = File.AppendText("YouTube_Logfile.txt"); 
```

我的程序*在*我构建的系统上运行。

但是，一旦我将它拿走并在另一台机器上运行它，它就不会立即写入日志文件。该程序的所有其他功能都按预期工作。

我什至删除了 system.dll 引用并将其重新链接到程序的本地副本，因此 system.dll 也被复制了。

[添加]：我没有收到任何错误，只是没有创建日志文件。

在此先感谢，布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:03:49.663

我怀疑原因是它在意外目录中创建日志文件，因为当它运行时，它就是当前目录。您的应用程序可能应该在路径中包含该目录或根据需要更改当前目录。

除此之外，您还没有提供足够的信息来给出明确的答案。任何时候处理文件时，都应该进行一些异常处理以适当地传播任何错误。然后你就会知道出了什么问题。——</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T20:10:05.583

我对c有一点了解，所以我认为你必须像这样使用append函数

```
AppendText(YouTube_Logfile.txt,"here you write what you want in the file"); 
```

# java - 在java或c#中表示ampl模型代码？

> ID：13827531
> 
> 赞同：1
> 
> 时间：2012-12-11T19:57:49.487
> 
> 标签：java, c#, ampl, code-conversion

我用放大器模型软件解决了一个问题。我需要将代码转换为 java 或 c# 以打印出结果。如何在 java 中表示 ampl 模型代码。有图书馆吗？如何在 java 和 c# 中表示目标函数和最大化函数？请帮助我。

我的 AMPL 代码：

```
param i;    #Supply
param j;    #Demand
param k;    #Time

var x{1..i,1..j,1..k} binary;

maximize z_flow : sum{a in 1..k} (x[1,1,a]+x[1,5,a] +  x[2,1,a]+x[2,3,a] + x[3,2,a]+x[3,3,a] + x[4,1,a]+ x[4,2,a] + x[4,4,a] + x[5,2,a]+x[5,3,a]);

subject to supply1cons{a in 1..k} : (x[1,1,a] + x[1,5,a]) <= 1;
subject to supply2cons{a in 1..k} : (x[2,1,a] + x[2,3,a]) <= 1;
subject to supply3cons{a in 1..k} : (x[3,2,a] + x[3,3,a]) <= 1;
subject to supply4cons{a in 1..k} : (x[4,1,a] + x[4,2,a] + x[4,4,a]) <= 1;
subject to supply5cons{a in 1..k} : (x[5,2,a] + x[5,3,a]) <= 1;

subject to demand1cons{a in 1..k} : (x[1,1,a] + x[2,1,a] + x[4,1,a]) <= 1;
subject to demand2cons{a in 1..k} : (x[3,2,a] + x[4,2,a] + x[5,2,a]) <= 1;
subject to demand3cons{a in 1..k} : (x[2,3,a] + x[3,3,a] + x[5,3,a]) <= 1;
subject to demand4cons{a in 1..k} : (x[4,4,a]) <= 1;
subject to demand5cons{a in 1..k} : (x[1,5,a]) <=1;

subject to cap1 : sum{a in 1..k}(x[1,1,a]) = 2;
subject to cap2 : sum{a in 1..k}(x[1,5,a]) = 8;
subject to cap3 : sum{a in 1..k}(x[2,1,a]) = 3;
subject to cap4 : sum{a in 1..k}(x[2,3,a]) = 4;
subject to cap5 : sum{a in 1..k}(x[3,2,a]) = 1;
subject to cap6 : sum{a in 1..k}(x[3,3,a]) = 7;
subject to cap7 : sum{a in 1..k}(x[4,1,a]) = 5;
subject to cap8 : sum{a in 1..k}(x[4,2,a]) = 2;
subject to cap9 : sum{a in 1..k}(x[4,4,a]) = 6;
subject to cap10 : sum{a in 1..k}(x[5,2,a]) = 4;
subject to cap11 : sum{a in 1..k}(x[5,3,a]) = 3; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:09:21.303

AMPL 是一种**建模语言**，您可以通过合理的努力创建模型。

然后，AMPL 环境调用一个**求解器**（如果您愿意，可以使用后端）来实际解决您的问题。不是 AMPL 可以解决您的问题。

由于您的问题很简单，您可以放弃建模语言部分。尽管如此，您仍然需要一个为您解决问题的求解器。

你的问题是一个**二进制整数规划**问题。任何可以处理整数变量的线性规划求解器都是候选者。求解器通常用 C 或 C++ 编写，因此您需要一个具有 Java 或 C# 接口的求解器。

最后，您将使用求解器附带的 API 编写/构建您的问题。

* * *

候选人：

*   [用于 Java 的 GLPK](http://glpk-java.sourceforge.net/)

*   [GLPK#](http://yoyovicks.blog.free.fr/)

*   [Java ILP](http://javailp.sourceforge.net/)

*   [或工具](http://code.google.com/p/or-tools/)（由[digEMAll](https://stackoverflow.com/users/316644/digemall)建议）

*   [M$ 求解器基金会](http://msdn.microsoft.com/en-us/devlabs/hh145003)

*   [LpSolve 与 M$ Solver Foundation](http://lpsolve.sourceforge.net/5.5/MSF.htm)

*   [M$ 求解器平台 SDK](http://www.solver.com/solver-platform-sdk-source-code-examples)

也可以看看

*   [.Net 中用于线性编程的推荐库？](https://stackoverflow.com/q/2969072/341970)

*   [整数线性规划 Java：提供多种开源和商业工具。使用哪一个？](https://stackoverflow.com/q/1916428/341970)

*   [如何使用 DotNumerics 解决线性规划问题？](https://stackoverflow.com/q/6049405/341970)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:27:57.177

你可以试试

[优化框架](http://www.optimizationzen.com/category/optimization-framework/)

这是一个免费项目，您可以在其中进行建模，也可以将 AMPL Dat 和 Mod 文件读入您​​的模型。可以通过 CPLEX、Gurobi、MOPS 等进行求解。

*优化框架*不使用 AMPL，它使用 GNU Mathprog 来构建模型实例。MathProg 是 AMPL 的子集，因此 80%-90% 的 AMPL 模型将保持不变。

请记住，这是一个学术项目，所以不要指望它稳定或成熟可用于商业用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:51:44.740

您的问题有两个部分：建模和从（C#）程序调用。正如其他人所指出的，AMPL 是一种建模语言。如果您喜欢使用像 AMPL 这样的建模语言，则需要从程序中调用它。目前，AMPL 没有 API，但您可以通过脚本调用 AMPL。AIMMS 和 MPL 都具有允许您从其他程序调用它们的 API，但它们将要求您用它们各自的建模语言重写您的模型。

另一种选择是直接调用求解器 API。包括 CPLEX 和 Gurobi 在内的许多求解器都有 .NET API，允许您直接从 C# 程序构建和求解模型。

（免责声明：我目前在 Gurobi Optimization 工作，之前曾在提供 CPLEX 的 ILOG 工作）。

# iphone - 如何在 Xcode 中检测 iOS 上的日期

> ID：13827532
> 
> 赞同：0
> 
> 时间：2012-12-11T19:58:05.657
> 
> 标签：iphone, objective-c, ios, xcode, ipad

嗨，我正在编写一个有竞争的应用程序。

```
UIAlertView *alert = [[UIAlertView alloc]

                      initWithTitle:@"Icon Contest!"
                      message:@"Design a 1024 x 1024 pixels icon for Example. The best one will be on the app's icon! Send them to: example@example.com."
                      delegate:self
                      cancelButtonTitle:@"More Info"
                      otherButtonTitles:@"Yes",@"No", nil];

[alert show]; 
```

我有一个截止日期，并希望应用程序在 1 月 31 日结束时显示不同的警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:02:18.073

`[NSDate date]`返回当前日期。
使用[NSDateComponent](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSDateComponents_Class/Reference/Reference.html)可以从 NSDate 中获取月份和日期等详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:14:48.737

正如 yinkou 指出的那样，您可以使用它`[NSDate date]`来获取当前日期。但是为此，如果您查看`-timeIntervalSinceNow`上的方法可能会更简单`NSDate`。你可以这样做：

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setDay:31];
[comps setMonth:1];
[comps setYear:2013];
NSDate *date = [[NSCalendar currentCalendar] dateFromComponents:comps];
if ([date timeIntervalSinceNow] < 0.0) {
    //The date has passed
}
else {
    //The date hasn't passed
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:08:02.243

```
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:31];
[components setMonth:1];
[components setYear:2013];

NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];

NSDate *releaseDate = [gregorian dateFromComponents:components];

if ([NSDate date] == releaseDate)
{
[alert show];
} 
```

# list - 将多个复选框绑定到 Grails 中的列表

> ID：13827535
> 
> 赞同：1
> 
> 时间：2012-12-11T19:58:14.213
> 
> 标签：list, grails, binding, checkbox

这看起来很简单，但显然很难。将一系列（有限且已知长度）复选框绑定到 grails 命令对象上的布尔值列表。当然应该可以使用先前选择的值“填充”命令对象以恢复视图。

例如，我有一个 grails webflow。它首先将 4 个复选框绑定到布尔列表中的一个条目。它切换到下一个状态并打印值 - 例如 [true,true]。向后导航，所有复选框都是空的（这非常有意义 - 4 个复选框，只有两个值）。所以它应该是例如 [false, true, false, true]。

无论我做什么，我似乎都无法做到这一点。在春天，这很容易，只需将复选框绑定到 value[0]..[3]... 为什么在 Grails 中这么简单的事情这么难？！

请帮忙，这真的会让我很开心！

示例命令对象：

```
class TestCmdObj {    
    List<Boolean> boolListOne = []
} 
```

控制器中的示例绑定方法（在流程操作中执行的闭包）：

```
private def doBindAndValidateBoolList = {       
    bindData(flow.testCmdObj, params, [include:['boolListOne']])
} 
```

到目前为止，一切都很好。这实际上在显示流中的下一页时有效，testCmdObj.boolListOne 为选中的复选框显示 true ..

GSP 代码很简单，使用：

```
<g:checkBox name="boolListOne"/>
<g:checkBox name="boolListOne"/>
<g:checkBox name="boolListOne"/>
<g:checkBox name="boolListOne"/> 
```

在下一个视图中，我可以打印出 ${testCmdObj.boolListOne} 并打印出尽可能多的“真实”值，就像我检查过的一样……（例如 [true, true]） 如果我向后导航，复选框是空的。 .. 再说一次，我可以理解，因为它们都具有相同的名称...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:13:04.987

好的，所以[以此](https://stackoverflow.com/questions/9709864/grails-data-binding-command-objects-with-lists)为参考：

> Grails 需要一个具有现有列表的命令，该命令将填充来自请求的数据。

所以你需要做的是：

~~类 TestCmdObj {
List boolListOne = ListUtils.lazyList([], FactoryUtils.instantiateFactory(Boolean) ) }~~

此外，您的 gsp 将需要遍历您的命令以显示每个条目，例如：

```
<g:each in="${myCommandInstance.boolListOne}" var="boolInstance" status="i">
<g:checkbox name="boolListOne[${i}]" value="${boolInstance}" />
</g:each> 
```

这样，您的 gsp 中的每个复选框都将对应为列表中的一个条目。

**编辑**：对于原始类型的包装器，似乎不需要使用工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T13:32:04.297

希望在上述建议/评论之间完成所有工作。

1.  如果您声明复选框的迭代并调用它们

```
<g:each in="someIteration" var="a">
  <g:checkBox name="something" value="${a.someCondition}" 
  checked="${a.someCondition}" />
</g:each> 
```

您在 grails 中的控制器会将其拾取为 `String[L]` 有点像的验证对象，`String[] something` 尽管您仍将其声明为`List something=[]`.

只要最终用户选择了超过 1 个复选框，这似乎也有效。并且您的验证对象将在此时拾取 `List something=[]`

上面的问题是，如果进行了 1 次选择，则接收到的参数更多是 a`string`而不是 a`list`

如果您不依赖对象的自动绑定，那么上面没有错，因为您会这样做

`List myList = params.list('something')`

此时 grails 会将 1 或多个转换为列表。但这不会将单个复选框绑定到验证列表元素。

从验证的角度来解决这个问题，将其声明为`List something=[]`

```
<g:each in="someIteration" status="i" var="a">
  <g:checkBox name="something[${i}]" value="${a.someCondition}" 
   checked="${a.someCondition}" />
</g:each> 
```

现在，无论选择 1 个还是多个复选框，都将在`something`列表下选择它。`['null','whatever','null','null']`

就是使用该`status`字段并将名称重命名`something`为`something[${i}]`

# jquery - 没有 jQuery 和 UJS 以及替代方案的 Rails 远程链接

> ID：13827536
> 
> 赞同：4
> 
> 时间：2012-12-11T19:58:17.737
> 
> 标签：jquery, ruby-on-rails, ujs

我正在尝试优化一个应用程序，它是用 Rails 编写的，它在很大程度上依赖于“远程”链接和表单（AJAX 触发器）。问题是，这几乎就是我们需要 jQuery 的全部，所以使用它似乎有点过头了。我在想是否有一种更轻的方法，也许替换/重写 UJS 以使用一些更轻的 javascript 库（或根本没有）并且仍然让它正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:07:50.010

由于 rails 3.0 ActionView 助手不会生成突兀的内联 javascript。为了发出 ajax 请求，您需要知道的所有内容都包含在生成的 DOM 中。因此，请随意为您喜欢的 javascript 库创建一个 ujs-driver。

但是，我个人不会这样做。JQuery 不是那么大的矫枉过正。考虑到您可以将它从某个 CDN 链接到您的页面，并且 jquery 以前缓存在用户浏览器中的可能性非常高，摆脱 JQuery 的好处将被您所花费的时间所淹没花费开发/调试/支持您的自定义驱动程序

# c# - 设置远程调试后不出现源代码

> ID：13827537
> 
> 赞同：1
> 
> 时间：2012-12-11T19:58:21.737
> 
> 标签：c#, asp.net, visual-studio-2010, remote-debugging, pdb-files

我正在尝试将我的 ASP.NET 站点登陆到服务器上。我的代码在本地运行没有任何错误，但是当我尝试从服务器运行它时出现错误。

所以我安装并设置了 Visual Studio 的远程调试器。它作为服务在服务器上运行，没有任何问题。我在本地启动我的网络浏览器，网站从远程服务器加载没有问题（这个错误与 I/O 相关，直到我告诉网站执行 I/O 才会出现。）此时，w3wp.exe是在服务器上运行的进程。

我将 VS 附加到远程进程 w3wp.exe。输出显示所有 .dll 都已成功处理，但没有出现我要调试的服务器 C# 源代码。我已验证我的 PDB 文件存在于两台计算机的 bin 目录中，并且调试器选项中的“仅我的代码”已被禁用。我该怎么做才能显示源代码，以便调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:46:55.307

将 w3wp.exe 附加到调试器后，

1.  单击 Ctrl+D、M 打开模块屏幕（您也可以从菜单 - 调试 -> 窗口 -> 模块中打开相同的窗口）
2.  找到您的程序集，右键单击并选择从 -> 符号路径加载
3.  找到并选择您的符号文件

确保该文件的符号状态更改为“已加载符号”

# javascript - ZeroClipboard - 将剪贴板数据格式化为粗体或具有特定字体大小

> ID：13827538
> 
> 赞同：1
> 
> 时间：2012-12-11T19:58:23.950
> 
> 标签：javascript, jquery, clipboard, zeroclipboard

我正在使用相当标准的 ZeroClipboard 设置。所有 vars 都是先前声明的。`text`是原始的html。

```
zc = new ZeroClipboard.Client();
text = text.replace(/<\/p>/g, "\r");   // Preserve newline
text = $(text).text();                 // Strip html tags from text

zc.glue("export_results", "expage");   // This works fine
zc.setText(text); 
```

如您所见，我正在使用`replace`将换行符从`</p>`（段落结尾）翻译为`\r`. 我想做一些相当于将文本标记为粗体或具有特定字体大小的操作。

SO上有一堆帖子绕过了这个问题（例如，[这个带有死链接](https://stackoverflow.com/questions/5067894/how-to-copy-to-clipboard-in-javascript-and-make-it-html)的帖子），但没有一个给出可靠的答案。可能吗？此信息如何存储在剪贴板数据中？

谢谢。

# vim - 将单行代码转换为块格式

> ID：13827540
> 
> 赞同：0
> 
> 时间：2012-12-11T19:58:26.917
> 
> 标签：vim, sed

我有一个恶意软件，我设法将其分解为一行非常难看的 javascript。我正在寻找一种将整个事情分解成更易于管理的外观的方法。我可以在`vim`/`sed`中执行递归调用，在该调用中，我根据括号将代码分成几组，并根据自己的喜好对其进行格式化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:21:53.597

如果它是一条线，是否`==`正确地重新格式化它？

如果不是（我不太熟悉 Vim 格式的具体细节），根据我对 JavaScript 的了解，您可能可以在 , 和 之后添加换行符，`{`并获得很长的路要走。`;``}`

```
:%s/[{;}]/&\r/g 
```

然后`gg=G`转到文件顶部并将其格式化到底部。

如果您不介意做更多的工作，并且如果事后的自动格式化无法正常工作，您还可以执行类似`/[{;}]`的操作，然后`qaqqaa<Enter><Escape>nq@a`清除“a”寄存器，然后在该寄存器中定义一个按回车键的宏在找到的角色之后，点击转义，然后进入下一场比赛并再次进行。这有点狡猾，但可能足以满足您的需求。（顺便说一下，按回车键和转义键，而不是在上面的字符串中输入尖括号的文本。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:23:28.910

好吧，您可以使用一些基于括号和分号的替换，但是恶意软件作者（以及自以为是的 JS 忍者摇滚明星）喜欢删除它们，因此这种方法可能不适用于您的代码段。

像这样的东西：

```
:%s/{/{\r
:%s/};/\r}; 
```

你试过[jsbeautifier](http://jsbeautifier.org/)吗？

# list - Grails 在删除时调整 _idx 数据

> ID：13827542
> 
> 赞同：4
> 
> 时间：2012-12-11T19:58:37.550
> 
> 标签：list, grails, grails-orm, sequence

我们有一个像这样的域类：

```
class Attribute {
  List attributeParameters = []
  static hasMany = [attributeParameters: AttributeParameter]
} 
```

`AttributeParameter`属于一个`Attribute`。这里定义了其他几个关系，并且有一个实例，我们需要删除多个 Attributes 中的几个 AttributeParameters。所以我们这样做：

```
def parameters = AttributeParameter.findAllBySomeOtherCriteria(foo)
parameters*.delete() 
```

这行得通，但是，attribute_parameter 中有一个列`attribute_parameters_idx`不按顺序调用。此列存在是因为我们已将集合定义为列表。如果我们这样做`attribute.removeFromAttributeParameters(ap)`，Grails 会自动调整此列。但是由于我们没有以这种方式删除数据，因此它们会乱序。

发生这种情况时，我们会在从 Attribute 遍历集合时返回空值。这不是缓存问题或刷新父问题。当我们这样做时会发生什么：

```
attribute.attributeParameters.each { } 
```

内部的一些东西是根据 _idx 值在迭代中添加额外的行。由于缺少这些行中的一个（或多个），Grails 将在集合中添加一个空行。调试时看不到这一点，但可以在迭代发生时观察它。

最后，我的问题是：

*   有没有办法告诉 Grails 更新特定集合的 _idx 值，如果没有
*   有没有办法获得这个 _idx 列并通过 Gorm 手动修改它的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:13:02.400

我认为这归结为 Hibernate 如何处理集合，尤其是像 List 这样的索引集合。不使用`addTo`并且`removeFrom`Hibernate 不知道它需要更新索引。

作为一种解决方法，我可以想到这样的事情：

在您的班级中添加`afterDelete`活动。`AttributeParameter`在其中，您将需要以下内容：

```
def afterDelete() {
    def sql = new Sql(dataSource)
    sql.execute("update attribute_attribute_parameter set attribute_parameter_idx = " +
    "attribute_parameter_idx - 1 where attribute_parameter_idx > " +
    "(select attribute_parameter_idx from attribute_attribute_parameter where " +
    "attribute_parameter_id = $id and attribute_id = $attribute.id) " +
    "and attribute_id = $attribute.id")
} 
```

PS。尽管它是私有的，但我认为您可以使用它[`getIndexColumnName()`](https://github.com/grails/grails-core/blob/master/grails-hibernate/src/main/groovy/org/codehaus/groovy/grails/orm/hibernate/cfg/GrailsDomainBinder.java#L2924)来动态获取索引列名。

# python - 无论如何要获取传递给python函数的参数的名称吗？

> ID：13827543
> 
> 赞同：3
> 
> 时间：2012-12-11T19:58:37.410
> 
> 标签：python

我想知道将局部变量名称传递给函数时是什么。我不确定这是否可能。让我们考虑这个例子：

函数定义：

```
def show(x):
  print(x) 
```

用法：

```
a = 10
show(a) 
```

这会打印 10。但我喜欢打印“a = 10”。这在python中可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T20:03:34.530

不完全是这样。但是，您可以实现类似的目标：

```
def show(**kwargs):
  print(', '.join('%s=%s' % kv for kv in kwargs.items()))

show(a=20) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T20:02:16.153

不，您无法知道用于将值传递给您的函数的局部变量的名称。

在任何情况下，这都是一项不可能完成的任务。以下示例中的变量名称是什么？

```
arguments = ('a', 1, 10)
somefunction(*(arguments[:2] + [10])) 
```

这里我们传入 3 个参数，其中两个取自我们之前定义的元组，一个字面量值，这三个参数都使用变量参数列表语法传入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T20:09:53.303

我喜欢在 Python 编程常见问题解答中找到的[这个问题](http://docs.python.org/2/faq/programming.html#how-can-my-code-discover-the-name-of-an-object)的答案，引用 Fredrik Lundh 的话：

> 就像你得到你在门廊上发现的那只猫的名字一样：猫（物体）本身不能告诉你它的名字，它并不关心——所以找出它叫什么的唯一方法就是问你所有的邻居（命名空间），如果它是他们的猫（对象）......
> 
> ....如果您发现它有很多名字，或者根本没有名字，请不要感到惊讶！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T00:24:44.853

我预感以下解决方案将获得一些批评

```
def show(*x):
    for el in x:
        fl = None
        for gname,gobj in globals().iteritems():
            if el==gobj:
                print '%s == %r' % (gname,el)
                fl = True
        if not fl:
            print 'There is no identifier assigned to %r in the global namespace' % el

un = 1
y = 'a'
a = 12
b = c = 45
arguments = ('a', 1, 10)
lolo = [45,'a',a,'heat']

print '============================================'
show(12)
show(a)
print '============================================'
show(45)
print
show(b)
print '============================================'
show(arguments)
print
show(('a', 1, 10))
print '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'
show(*arguments)
print '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'
show(*(arguments[1:3] + (b,))) 
```

结果

```
============================================
a == 12
a == 12
============================================
c == 45
b == 45

c == 45
b == 45
============================================
arguments == ('a', 1, 10)

arguments == ('a', 1, 10)
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
y == 'a'
un == 1
There is no identifier assigned to 10 in the global namespace
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
un == 1
There is no identifier assigned to 10 in the global namespace
c == 45
b == 45 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T05:35:04.847

这似乎在 Python 中是不可能的，但在 C++ 中实际上是可能的。

```
#define show(x)   std::cout << #x << " = " << x << std::endl 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-20T17:38:42.353

**新解决方案使用`readline`**

如果您在交互式会话中，这是一个非常简单的解决方案，通常可以工作：

```
def show(x):
    from readline import get_current_history_length, get_history_item
    print(get_history_item(get_current_history_length()).strip()[5:-1] + ' = ' + str(x)) 
```

它所做的只是读取交互式会话缓冲区中的最后一行输入，删除任何前导或尾随空格，然后为您提供除前五个字符（希望如此`show(`）和最后一个字符（希望`)`如此）之外的所有内容，从而为您留下传入的任何内容.

例子：

```
>>> a = 10
>>> show(a)
a = 10
>>> b = 10
>>> show(b)
b = 10
>>> show(10)
10 = 10
>>> show([10]*10)
[10]*10 = [10, 10, 10, 10, 10, 10, 10, 10, 10, 10]
>>> show('Hello' + 'World'.rjust(10))
'Hello' + 'World'.rjust(10) = Hello     World 
```

如果您在 OS X 上使用它附带的 Python 版本，则默认情况下您没有`readline`安装，但您可以通过`pip`. 如果你在 Windows 上，`readline`对你来说不存在......你可能可以使用`pyreadline`from`pip`但我从未尝试过，所以我不能说它是否是可接受的替代品。

我将让上面的代码更防弹，作为读者的练习。要考虑的事情是如何让它处理这样的事情：

```
show(show(show(10)))
show(
10
) 
```

如果您希望这种东西显示脚本中的变量名称，您可以查看使用检查并获取调用框架的源代码。但是考虑到我想不出为什么你会想`show()`在脚本中使用，或者为什么你会像我上面那样处理故意搞砸它的人而使函数复杂化，我现在不会浪费我的时间来计算出来。

**原始解决方案使用`inspect`**

这是我的原始解决方案，它更复杂并且有更明显的警告集，但更便携，因为它只使用`inspect`, not `readline`, 所以在所有平台上运行，无论您是在交互式会话中还是在脚本中：

```
def show(x):

    from inspect import currentframe

    # Using inspect, figure out what the calling environment looked like by merging
    #   what was available from builtin, globals, and locals.
    # Do it in this order to emulate shadowing variables
    #   (locals shadow globals shadow builtins).

    callingFrame = currentframe().f_back
    callingEnv = callingFrame.f_builtins.copy()
    callingEnv.update(callingFrame.f_globals)
    callingEnv.update(callingFrame.f_locals)

    # Get the variables in the calling environment equal to what was passed in.
    possibleRoots = [item[0] for item in callingEnv.items() if item[1] == x]

    # If there are none, whatever you were given was more than just an identifier.
    if not possibleRoots:
        root = '<unnamed>'
    else:
        # If there is exactly one identifier equal to it,
        #   that's probably the one you want.
        # This assumption could be wrong - you may have been given
        #   something more than just an identifier.
        if len(possibleRoots) == 1:
            root = str(possibleRoots[0])
        else:
            # More than one possibility? List them all.
            # Again, though, it could actually be unnamed.
            root = '<'
            for possibleRoot in possibleRoots[:-1]:
                root += str(possibleRoot) + ', '
            root += 'or ' + str(possibleRoots[-1]) + '>'

    print(root + ' = ' + str(x)) 
```

这是一个完美运行的案例（来自问题的那个）：

```
>>> a = 10
>>> show(a)
a = 10 
```

这是另一个有趣的案例：

```
>>> show(quit)
quit = Use quit() or Ctrl-Z plus Return to exit 
```

现在您知道该功能是如何在 Python 解释器中实现的 -`quit`是 a 的内置标识符`str`，说明如何正确退出。

这里有一些情况可能比您想要的要少，但是......可以接受吗？

```
>>> b = 10
>>> show(b)
<a, or b> = 10
>>> show(11)
<unnamed> = 11
>>> show([a])
<unnamed> = [10] 
```

这是一个打印出真实陈述的案例，但绝对不是您想要的：

```
>>> show(10)
<a, or b> = 10 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-02-20T03:21:08.710

这是一个只有在使用 f-strings 的 Python 3.6 才成为可能的答案：

```
x = 10
print(f'{x=}')  # Outputs x=10 
```

# log4net - 无法将来自多个实例的数据记录到单独的日志文件中

> ID：13827544
> 
> 赞同：2
> 
> 时间：2012-12-11T19:58:52.107
> 
> 标签：log4net, log4net-appender, log4net-configuration

在我通常的日志记录经验中，我只是`ILog`使用类似的东西在每个类中创建一个实例`mylog = LogManager.GetLogger( name)`，这为每个实例提供了一个唯一的 Logger。一切都记录到同一个文件中并且效果很好。

但是，现在我遇到了一种情况，我想登录到两个单独的文件。我使用以下 logging.xml 完成此操作：

```
<?xml version="1.0" encoding="utf-8"?>
<log4net>
  <appender name="Console" type="log4net.Appender.ConsoleAppender">
    <filter type="log4net.Filter.LevelRangeFilter">
      <param name="LevelMin" value="INFO"/>
      <param name="LevelMax" value="FATAL"/>
    </filter>
    <layout type="log4net.Layout.PatternLayout">
      <!-- Pattern to output the caller's file name and line number -->
      <conversionPattern value="%date{yyyy-MM-dd-HH_mm_ss.fff} [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>

  <appender name="File" type="log4net.Appender.FileAppender">
    <file type="log4net.Util.PatternString" value="%property{LogName}" />
    <appendToFile value="true" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date{yyyy-MM-dd-HH_mm_ss.fff} [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>

  <root>
    <level value="DEBUG" />
    <appender-ref ref="Console" />
    <appender-ref ref="File" />
  </root>
</log4net> 
```

在后面的代码中，我`FileAppender`通过给它一个唯一的名称来设置每个实例的名称：

`log4net.GlobalContext.Properties["LogName"] = unique_path_here;`

如果我实例化一个名为“test1”的对象，则会创建“test1.log”文件。当我实例化另一个名为“test2”的对象时，会创建“test2.log”文件。一切似乎都很好，直到我开始调用每个对象中的方法。当我交替调用时，一个对象的数据首先被写入另一个对象的文件，但随后数据被记录到正确的文件中。例如，这是一个简单的例子：

1.  test1.log() -> 写入 test1.log
2.  test2.log() -> 写入 test2.log
3.  test1.log() -> 写一行到 test2.log，然后剩下的写到 test1.log
4.  test2.log() -> 将 lint 写入 test1.log，然后将其余部分写入 test2.log

如果我并行运行这两种方法，所有行都会写入一个文件或另一个文件。那么真正奇怪的是，另一个最常用的文件*再也没有*被写入！

我不知道下一步该往哪里看。如果我通过 GetLogger 创建了一个 Logger 实例并为其传递了一个唯一名称，并且这是一个私有成员变量，它怎么可能开始写入错误的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:53:26.950

当然，现在“GlobalContext”对于类名是可疑的，这似乎很明显。:) 我将对此进行调查，看看问题是否在于该属性在所有 Logger 实例之间共享，如果是，是否有另一种方法可以为特定日志实例设置日志名称。

编辑——好吧，不是这样。我将 logging.xml 中的属性替换为`<File value="TEMP" />`然后在后面的代码中，我加载`FileAppender`并将其`File`属性设置为正确的路径。行为是相同的。:(

编辑——解决方案是创建`FileAppender`每个实例，而不是`Logger`每个实例。我不确定为什么我花了这么长时间才得出这个结论，但我最终做到了，现在看起来它正在工作。

# ruby-on-rails - 实现“副作用”元编程时加载类的问题

> ID：13827547
> 
> 赞同：0
> 
> 时间：2012-12-11T19:58:57.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, class, metaprogramming

我正在使用 Ruby on Rails 3.2.9 和 Ruby 1.9.3-p125。场景如下：

我实现了一个`acts_as_customizable`插件，并且我有一个`Article`“可定制”的模型类。该插件通过元编程向模型类*添加了一个*名为的方法（*注意*：从那以后，插件具有副作用，因为在对象范围之外操作对象）。`customize``Comment`*`Comment``Article`*

 *鉴于这种情况，当我（重新）启动服务器并运行时`@comment.customize`，我会收到错误消息`NoMethodError - undefined method 'customize' for #<Comment:0x0...>`。但是，当我（重新）启动服务器并运行以下代码时，一切都按预期工作：

```
Article
@comment.customize 
```

如果我理解“邪恶”部分，上面的代码可以工作，因为在运行该方法*之前*`Article`对类的“简单”调用使其触发该方法，该方法又将（通过元编程）该方法添加到类中。*`customize``acts_as_customizable``customize``Comment`*

 *我应该如何避免“邪​​恶”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:14:47.893

这是由延迟/自动加载引起的。为了节省时间，rails 不会在启动时加载所有类。相反，它会在必要时加载它们。如果您从不访问`Article`，则它不会被加载，因此`Comment`不会获得它的动态方法。

> 我应该如何避免“邪​​恶”？

简单的答案：使用`require_dependency`（谢谢，@cryo28）

正确答案：不作恶。使插件行为更可预测/更少混乱。如果它应用于`Article`，它应该作用于`Article`而不是`Comment`。**

# jquery - jQuery 无法在更改事件中访问它

> ID：13827550
> 
> 赞同：1
> 
> 时间：2012-12-11T19:59:04.297
> 
> 标签：jquery

我在尝试在外部组合框更改事件上获取级联组合框时遇到问题。您可以在表中添加和删除行，因此可以有任意数量的行。每行内有 2 个组合框。1 用于客户，1 用于联系人。我在客户组合框上触发了一个更改事件，该组合框会拉出该客户的有效联系人。下面是表格的html

```
<tr class="ClassAttendee">      
<td>
    <select class="Customers valid" id="Attendees_0__Customers"
    name="Attendees[0].Customers">    
        <option value="1517">Woodstock</option>
        <option value="1518">Woolwich</option>
        <option value="1519">Yarmouth</option>
        <option value="1520">York</option>
    </select>
</td>
<td>
     <select class="Contact">
         <option value="">Choose Attendee...</option>
     </select>
</td>
<td>
     <input data-val="true" data-val-required="The Attended field is required."
     id="Attendees_0__Attended" name="Attendees[0].Attended" type="checkbox"
     value="true"><input name="Attendees[0].Attended" type="hidden" value="false">
     <span class="field-validation-valid" data-valmsg-for="nestedObject.Attended" data
     -valmsg-replace="true"></span>
</td>
<td>
     <input class="FeePaid" data-val="true" data-val-required="The Fee Paid field is
     required." id="Attendees_0__FeePaid" name="Attendees[0].FeePaid" type="checkbox"
     value="true"><input name="Attendees[0].FeePaid" type="hidden" value="false">
     <span class="field-validation-valid" data-valmsg-for="nestedObject.FeePaid" data
     -valmsg-replace="true"></span>
</td>
<td>
     <input class="CheckNumber" id="Attendees_0__CheckNumber"
     name="Attendees[0].CheckNumber" type="text" value="">

     <span class="field-validation-valid" data-valmsg-for="nestedObject.CheckNumber"
     data-valmsg-replace="true"></span>
</td>
<td>
    <input class="mark-for-delete" data-val="true" data-val-required="The Delete field
    is required." id="Attendees_0__Delete" name="Attendees[0].Delete" type="hidden"
    value="False">

    <a href="#"
    onclick="javascript:removeNestedForm(this,'tr.ClassAttendee','input.mark-for
    -delete');return false;">Remove</a>
</td>
</tr> 
```

每行看起来像这样，其中前 2 个单元格包含下拉菜单。第一个用于客户，第二个用于联系人。如果我只使用 $("Contact") 选择器，我可以使用正确的选项更新组合框，所以我知道这可行，但我需要指定行，因为当我只使用该选择器时，所有行都会更新。

？下面是我正在尝试使用的 JQuery

```
 $('.Customers').change(function (e) {
        var selectedCustomer = $(this).val();
        if (selectedCustomer != null && selectedCustomer != '') {
            $.getJSON('@Url.Action("GetAllSelectedCustomer", "CustomerEmails")', { id: selectedCustomer }, function (contacts) {
                var contactSelect = $(this).parent().next().children(".Contact");
                contactSelect.empty();
                $.each(contacts, function (index, contact) {
                    contactSelect.append($('<option/>', {
                        value: contact.ID,
                        text: contact.Name
                    }));
                });
            });
        }
    }); 
```

我遇到问题的特定行是

```
var contactSelect = $(this).parent().next().children(".Contact"); 
```

如果我使用选择器首先选择客户下拉框而不是使用它，然后使用该行的其余部分，我可以选择联系人下拉框。我不明白为什么这不起作用，如果我不能使用 this 对象，我也不知道如何在我正在处理的更改事件的行上选择特定的下拉列表。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:03:25.263

这是一个经典问题：`this`指的是函数调用的上下文，它`window`适用于大多数回调。

一个办法 ：

```
 if (selectedCustomer != null && selectedCustomer != '') {
        var that = this;
        $.getJSON('@Url.Action("GetAllSelectedCustomer", "CustomerEmails")', { id: selectedCustomer }, function (contacts) {
            var contactSelect = $(that).parent().next().children(".Contact"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:03:54.060

尝试使用闭包：

```
$('.Customers').change(function (e) {
    var selectedCustomer = $(this).val();
    if (selectedCustomer != null && selectedCustomer != '') {
        (function(el) {
            $.getJSON('@Url.Action("GetAllSelectedCustomer", "CustomerEmails")', { id: selectedCustomer }, function (contacts) {
                var contactSelect = $(el).parent().next().children(".Contact");
                contactSelect.empty();
                $.each(contacts, function (index, contact) {
                    contactSelect.append($('<option/>', {
                        value: contact.ID,
                        text: contact.Name
                    }));
                });
            });
        })(this);
    }
}); 
```

# grid - 错误：Ext.fly(node) 为空 - 仅在分组网格上

> ID：13827551
> 
> 赞同：0
> 
> 时间：2012-12-11T19:59:15.243
> 
> 标签：grid, extjs4, grouping, tabpanel

在 Extjs4.1.1a 中，我有一个以网格为内容的选项卡面板。每个网格都有一个 itemcontextmenu，其中包含网格行内项目的操作。一些网格具有“分组”的内容，当我使用右键单击鼠标 (itemcontextmenu) 菜单打开带有分组网格的选项卡时，我会停止事件并正常打开菜单。菜单操作似乎也可以正常工作，但每次我收到此错误 - *Ext.fly(node) 为空*- 仅在分组网格上，而不是在普通网格上。

好的：这是 cellcontextmenu（右键单击）处理程序 -

```
 beforecellcontextmenu: function(view, cell, columnIndex, rec, tableRow, rowIndex, e){
                    if (top.isAdmin == "Y") {
                        e.stopEvent();
                        e.preventDefault();

                        var thisItemID = rec.get('TARGETITEM_SEQ_ID');
                        var isVoid = rec.get('VOID_ROW');
                        top.selectedItemID = thisItemID;
                        top.isVoid = isVoid;

                        var column = view.getHeaderByCell(cell);
                        var position = view.getPositionByEvent(e);
                        var columnIndex = position.column;

                        var dataIndex = column.dataIndex;
                        //var dataIndex = columnIndex;

                        top.cellIndex = dataIndex;

                        // Define the model for a State
                        Ext.define('State', {
                            extend: 'Ext.data.Model',
                            fields: [
                                {type: 'string', name: 'abbr'},
                                {type: 'string', name: 'name', width: 25}
                            ]
                        });

                        // The data for all states
                        var yesNoPlus = [
                            {"abbr":"Yes","name":"Yes"},
                            {"abbr":"No","name":"No"},
                        ];

                        // The data store holding the states; shared by each of the ComboBox examples below
                        var yesNoPlusStore = Ext.create('Ext.data.Store', {
                            model: 'State',
                            data: yesNoPlus
                        });

                        // Simple ComboBox using the data store
                        var multiComboA8 = Ext.create('Ext.form.field.ComboBox', {
                            hideLabel: true,
                            store: yesNoPlusStore,
                            emptyText: 'Choose...',
                            displayField: 'name',
                            valueField: 'abbr',
                            typeAhead: true,
                            width: 150,
                            style: 'margin: 2px',
                            triggerAction: 'all',
                            queryMode: 'local',
                            selectOnFocus: true,
                            typeAhead: true,
                            //iconCls: 'no-icon'
                        });

                        //console.log('cell.ITEMNAME: ', cell.ITEMNAME + ', position: ', position + ', cell: ', cell + ', cellIndex: ', cellIndex + ', dataIndex: ', dataIndex);
                        if (dataIndex.match(/^TARGETVALUE.*$/)) 
                        { 
                            /*TARGETVALUE Match found */
                            var gridContextMenuA8 = Ext.create('Ext.menu.Menu', {
                                style: {
                                    overflow: 'visible'     // For the Combo popup
                                },
                                items: [
                                    voidActionA8,
                                    hideColumnA8, 
                                    '-', {
                                        text: 'Value Options',
                                        menu: {        // <-- submenu by nested config object
                                            items: [
                                                // stick any markup in a menu
                                                '<b class="menu-title">Set ALL values to...</b>',
                                                multiComboA8
                                            ]
                                        }
                                   }
                                ]
                            });
                            gridContextMenuA8.showAt(e.getXY());

                        } else {

                            /*No TARGETVALUE Match found */
                            var gridContextMenuA8 = Ext.create('Ext.menu.Menu', {
                                style: {
                                    overflow: 'visible'     // For the Combo popup
                                },
                                items: [
                                    voidActionA8,
                                    '-', {
                                        text: 'Value Options',
                                        menu: {        // <-- submenu by nested config object
                                            items: [
                                                // stick any markup in a menu
                                                '<b class="menu-title">Set ALL values to...</b>',
                                                multiComboA8
                                            ]
                                        }
                                   }
                                ]
                            });
                            gridContextMenuA8.showAt(e.getXY());
                        }

                        multiComboA8.on('select', function(combo, records, eOpts) {

                            var grid = Ext.widget('tablea8_targetgrid');
                            var selected = grid.selModel.getSelection();

                            Ext.Array.each(records, function(record) 
                            {        
                                var selectedValue = record.get('abbr');
                                console.log('Record value from combo: ' + selectedValue); 

                                if (selectedValue == 'No') {
                                    Ext.MessageBox.confirm(
                                        'Confirm - set ALL values to "No"',
                                        'Set ALL values for item: ' + top.selectedItemID + ' to "No", are you sure?',
                                        function(btn) {
                                            if (btn == 'yes') {
                                                console.log('Asking to set all values = No');
                                                // make all values = no code goes here

                                                var grid = Ext.widget('tablea8_targetgrid');
                                                console.log(grid);
                                                var theStore = grid.getStore();
                                                console.log(theStore);

                                                var targetName = top.recTargetName;
                                                var tableName = top.adminTableName;
                                                var familyName = top.familyName; 

                                                console.log('call AJAX request to set NO');
                                                Ext.Ajax.request({
                                                    url     : 'data/set_all_no_svc.php',
                                                    params  : { 
                                                        recordId: top.selectedItemID, 
                                                        setValue: 'No', 
                                                        familyName: top.familyName, 
                                                        tableName: top.ACTIVE_TABLE_NAME
                                                    },
                                                    method  : 'POST',
                                                    success : function(response, theRecord2) {
                                                        var res = Ext.JSON.decode(response.responseText);

                                                        if ((res.success) === false){
                                                            Ext.Msg.alert('Error',res.message);
                                                            return;
                                                        } else {    
                                                            // reload store for this tab
                                                            theStore.load({
                                                                params: {
                                                                    tableName: tableName,
                                                                    familyName: familyName,
                                                                    targetName: targetName
                                                                }
                                                            });                             
                                                            // close window
                                                            //voidwin.destroy();
                                                        }
                                                    }
                                                });
                                            }
                                        }
                                    );
                                } else if (selectedValue == 'Yes') {
                                    Ext.MessageBox.confirm(
                                        'Confirm - set ALL values to "Yes"',
                                        'Set ALL values for item: ' + top.selectedItemID + ' to "Yes", are you sure?',
                                        function(btn) {
                                            if (btn == 'yes') {
                                                console.log('Asking to set all values = Yes');
                                                // make all values = yes code goes here

                                                var grid = Ext.widget('tablea8_targetgrid');
                                                console.log(grid);
                                                var theStore = grid.getStore();
                                                console.log(theStore);

                                                var targetName = top.recTargetName;
                                                var tableName = top.adminTableName;
                                                var familyName = top.familyName; 

                                                console.log('call AJAX request to set YES');
                                                Ext.Ajax.request({
                                                    url     : 'data/set_all_yes_svc.php',
                                                    params  : { 
                                                        recordId: top.selectedItemID, 
                                                        setValue: 'Yes', 
                                                        familyName: top.familyName, 
                                                        tableName: top.ACTIVE_TABLE_NAME
                                                    },
                                                    method  : 'POST',
                                                    success : function(response, theRecord2) {
                                                        var res = Ext.JSON.decode(response.responseText);

                                                        if ((res.success) === false){
                                                            Ext.Msg.alert('Error',res.message);
                                                            return;
                                                        } else {    
                                                            // reload store for this tab
                                                            theStore.load({
                                                                params: {
                                                                    tableName: tableName,
                                                                    familyName: familyName,
                                                                    targetName: targetName
                                                                }
                                                            });                             
                                                            // close window
                                                            //voidwin.destroy();
                                                        }
                                                    }
                                                });
                                            }
                                        }
                                    );
                                }   
                            });
                        });
                        return false;
                    }       
                }, 
```

///////

以下是从菜单中调用的“操作”功能：

```
function findColumnByDataIndex(grid, dataIndex) {
    console.log('dataIndex: ', dataIndex);
    var selector = "gridcolumn[dataIndex=" + dataIndex + "]";
    console.log('selector: ', selector);
    return grid.down(selector);
};

var hideColumnA8 = Ext.create('Ext.Action', {
    text: 'Hide column?',
    iconCls: 'icon-hide',

    handler: function(widget, event) {
        var grid = Ext.ComponentQuery.query('#tablea8_targetgrid_id')[0];     
        var gridView = grid.getView();

        var columnToHide = findColumnByDataIndex(grid, top.cellIndex);                                      
        console.log('columnToHide: ', columnToHide);

        columnToHide.hide();
        gridView.refresh();

} 
```

});

////

最后是 voidrow 函数：

```
var voidActionA8 = Ext.create('Ext.Action', {
        iconCls: 'icon-void',
        text: 'Void actions',
        handler: function(widget, event) {
            var grid = Ext.widget('tablea8_targetgrid');
            var selected = grid.selModel.getSelection();

            console.log('void value: ', top.isVoid);

            if ((top.isVoid == 'false') || (top.isVoid == null) || (top.isVoid == "")){ 
                Ext.MessageBox.confirm(
                    'Confirm VOID this row from A8',
                    'Void item: ' + top.selectedItemID + ', are you sure?',
                    function(btn) {
                        if (btn == 'yes') {
                            console.log('Asking to VOID row');
                            // void row action goes here

                            var grid = Ext.widget('tablea8_targetgrid');
                            console.log(grid);
                            var theStore = grid.getStore();
                            console.log(theStore);

                            var targetName = top.recTargetName;
                            var tableName = top.adminTableName;
                            var familyName = top.familyName; 

                            console.log('call AJAX request');
                            Ext.Ajax.request({
                                url     : 'app/store/dbcall/target/GG/set_void_svc.php',
                                params  : { 
                                    recordId: top.selectedItemID, 
                                    voidValue: 'true', 
                                    familyName: top.familyName, 
                                    tableName: top.ACTIVE_TABLE_NAME
                                },
                                method  : 'POST',
                                success : function(response, theRecord2) {
                                    var res = Ext.JSON.decode(response.responseText);

                                    if ((res.success) === false){
                                        Ext.Msg.alert('Error',res.message);
                                        return;
                                    } else {    
                                        // reload store for this tab
                                        theStore.load({
                                            params: {
                                                tableName: tableName,
                                                familyName: familyName,
                                                targetName: targetName
                                            }
                                        });                             
                                        // close window
                                        //voidwin.destroy();
                                    }
                                }
                            });
                        }
                    }
                );
            } else {
                Ext.MessageBox.confirm(
                    'Confirm return ROW to normal state',
                    'UN-Void item: ' + top.selectedItemID + ', are you sure?',
                    function(btn) {
                        if (btn == 'yes') {
                            console.log('Asking to UN-VOID row');
                            // void row action goes here

                            var grid = Ext.widget('tablea8_targetgrid');
                            console.log(grid);
                            var theStore = grid.getStore();
                            console.log(theStore);

                            var targetName = top.recTargetName;
                            var tableName = top.adminTableName;
                            var familyName = top.familyName; 

                            console.log('call AJAX request to UN-VOID row');
                            Ext.Ajax.request({
                                url     : 'app/store/dbcall/target/GG/set_void_svc.php',
                                params  : { 
                                    recordId: top.selectedItemID, 
                                    voidValue: 'false', 
                                    familyName: top.familyName, 
                                    tableName: top.ACTIVE_TABLE_NAME
                                },
                                method  : 'POST',
                                success : function(response, theRecord2) {
                                    var res = Ext.JSON.decode(response.responseText);

                                    if ((res.success) === false){
                                        Ext.Msg.alert('Error',res.message);
                                        return;
                                    } else {    
                                        // reload store for this tab
                                        theStore.load({
                                            params: {
                                                tableName: tableName,
                                                familyName: familyName,
                                                targetName: targetName
                                            }
                                        });                             
                                        // close window
                                        //voidwin.destroy();
                                    }
                                }
                            });
                        }
                    }
                );
            }           
        }
    }); 
```

# c# - 将多个项目绑定到列表视图行

> ID：13827562
> 
> 赞同：1
> 
> 时间：2012-12-11T19:59:52.463
> 
> 标签：c#, wpf

这是我正在尝试做的事情的描述：我需要建立一个产品目录，当用户按下肉类按钮时，目录（ListView）会填满肉类图片，我希望每行包含 3 个产品。 .继承人我到目前为止：

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:ImageConverter x:Key="ImageConverter"/>
        <DataTemplate x:Key="imageListView">
            <StackPanel>
                <Image Source="{Binding .,Converter={StaticResource ImageConverter}}" Height="50" Width="100" />
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <ListView ItemsSource="{Binding ImageCollection}" ItemTemplate="{StaticResource imageListView}"/>    
    </Grid>
</Window> 
```

XAML 的返回代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        MyViewModel VM = new MyViewModel();
        DataContext = VM;
    }
}

class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is Bitmap)
            return ConvertBitmapToBitmapImage((Bitmap)value);
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }

    private BitmapImage ConvertBitmapToBitmapImage(Bitmap bitmap)
    {
        MemoryStream memoryStream = new MemoryStream();
        bitmap.Save(memoryStream, ImageFormat.Png);
        BitmapImage bitmapImage = new BitmapImage();
        bitmapImage.BeginInit();
        bitmapImage.StreamSource = new MemoryStream(memoryStream.ToArray());
        bitmapImage.EndInit();
        return bitmapImage;
    }
} 
```

和 MyViewModel 代码：

```
private List<Bitmap> m_ImageCollection;
public MyViewModel()
{
    LoadImages();  
}
void LoadImages()
{
    m_ImageCollection = new List<Bitmap>();
    ResourceManager rm = Properties.Resources.ResourceManager;
    ResourceSet rs = rm.GetResourceSet(new CultureInfo("en-US"), true, true);
    if (rs != null)
    {
        var images =
          from entry in rs.Cast<DictionaryEntry>()
          where entry.Value is Bitmap
          select entry;

        foreach (DictionaryEntry img in images)
        {
            if (img.Value is Bitmap)
                m_ImageCollection.Add((Bitmap)img.Value);
        }
    }
}
public List<Bitmap> ImageCollection
{
    get { return m_ImageCollection; }    
    set { m_ImageCollection = value; }
} 
```

图片正在加载，但每张图片连续我想要连续三张图片......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:24:53.060

我只是制作一个代表一行的虚拟机：

```
 //immutable - so safe to bind to without INotifyPropertyChange support
    public sealed class BitmapRow
    {
            private readonly Bitmap _bitmap1;
            private readonly Bitmap _bitmap2;
            private readonly Bitmap _bitmap3;

            public BitmapRow(Bitmap bitmap1, Bitmap bitmap2, Bitmap bitmap3)
            {
                _bitmap1 = bitmap1;
                _bitmap2 = bitmap2;
                _bitmap3 = bitmap3;
            }

            public Bitmap Bitmap1{ get{return _bitmap1;}}
            public Bitmap Bitmap2{ get{return _bitmap2;}}
            public Bitmap Bitmap3{ get{return _bitmap3;}}
    } 
```

然后：

```
<StackPanel Orientation="Horizontal">
  <Image Source="{Binding Path=Bitmap1,Converter={StaticResource ImageConverter}}" Height="50" Width="100" />
  <Image Source="{Binding Path=Bitmap2,Converter={StaticResource ImageConverter}}" Height="50" Width="100" />
  <Image Source="{Binding Path=Bitmap3,Converter={StaticResource ImageConverter}}" Height="50" Width="100" />
</StackPanel> 
```

对主 VM 的更改如下所示：（顺便说一下`List<T>`，对于 WPF 来说不是一个好主意，请使用`ObservableCollection<T>`）：

```
 private readonly ObservableCollection<BitmapRow> m_ImageCollection = new ObservableCollection<BitmapRow>();
    public IEnumerable<BitmapRow> ImageCollection
    {
        get { return m_ImageCollection; }
    }

    void LoadImages()
    {            
        ResourceManager rm = Properties.Resources.ResourceManager;
        ResourceSet rs = rm.GetResourceSet(new CultureInfo("en-US"), true, true);
        if (rs != null)
        {
            //var allImages = new List<Bitmap>();
            //var images =
            //  from entry in rs.Cast<DictionaryEntry>()
            //  where entry.Value is Bitmap
            //  select entry;                

            //foreach (DictionaryEntry img in images)
            //{
            //    var bmp = img.Value as Bitmap; //one type cast
            //    if (bmp!=null)
            //    {
            //        allImages.Add(bmp);
            //    }
            //}

            //neat alternative to all of above code:
            var allImages = rs.Cast<DictionaryEntry>().Values.OfType<Bitmap>().ToList();
            //or maybe you need to do this:
            var allImages = rs.Cast<DictionaryEntry>().Select(d=>d.Value).OfType<Bitmap>().ToList();

            //now load the images in allImages in 3s into BitmapRows and add to m_ImageCollection 
            //I'll leave this bit up to you to complete - you need to decide what to do
            //when the list is not an exact multiple of 3
            var max = allImages.Count();
            for(ini row = 0; row < max/3; row+=1)
            {
               Bitmap a = allImages[row*3];
               Bitmap b = allImages[row*3+1]; //TODO: needs index checking
               Bitmap c = allImages[row*3+2]; //TODO: needs index checking
               m_ImageCollection.Add(new BitmapRow(a,b,c));
            }
        }
    } 
```

# iphone - 覆盖它的drawRect时如何显示UIButton的标题

> ID：13827567
> 
> 赞同：1
> 
> 时间：2012-12-11T20:00:23.027
> 
> 标签：iphone, objective-c, ios

子类化时如何绘制标题`UIButton`？`UIButton`由于绘制按钮的自定义`drawRect`方法，我需要对类进行子类化。

我相信我必须在`drawRect`方法内绘制标题，我看对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:37:56.413

如果可以的话，最好不要继承 UIButton（Apple 建议）。大多数自定义外观可以通过将背景图像设置为标准的“自定义”按钮来实现。这样，您仍然可以获得调整大小、标签、图像等的功能，而无需子类化。一个按钮有一个背景图像、一个图像和一个标题标签——这些组件的绘制方式和绘制方式是不公开的。

如果图像是在运行时派生的，您仍然可以使用上述技术，但在新的图形上下文中绘制，提取图像并改用它。

如果你真的必须使用 drawRect 方法，我会继承 UIControl 而不是 UIButton。

# java - LWJGL 中的简单文本渲染导致其他代码无法渲染

> ID：13827570
> 
> 赞同：0
> 
> 时间：2012-12-11T20:00:32.063
> 
> 标签：java, fonts, rendering, lwjgl

我在 Java 中有一个 OpenGL 项目，它在屏幕上绘制了一系列圆圈，并且我希望每当鼠标悬停在其中一个圆圈上时都会出现一个工具提示。如果工具提示只不过是一个矩形，它就可以完美地工作，但是一旦我添加了文本渲染代码，一切都会停止工作。一旦鼠标移到其中一个圆圈上，所有圆圈都会消失，文本后面的矩形也会消失。无论我之后将鼠标移动到哪里，它们都不会再次出现。导致我的问题的代码行是

```
GraphicsUtil.DEFAULT_FONT.drawString(x, y, info); 
```

其中info是String，x和y是坐标，GraphicsUtil.DEFAULT_FONT声明如下：

```
 @SuppressWarnings("unchecked")
  public class GraphicsUtil 
  {
    private GraphicsUtil()
    {

    }

    public static final UnicodeFont DEFAULT_FONT = new UnicodeFont(new Font("",Font.PLAIN,12));

    static
    {
        DEFAULT_FONT.addAsciiGlyphs();
        DEFAULT_FONT.addGlyphs(400, 600);
        DEFAULT_FONT.getEffects().add(new ColorEffect(java.awt.Color.white));
        try
        {
             DEFAULT_FONT.loadGlyphs();
        }
        catch (SlickException e)
        {
             e.printStackTrace();
        }
     }
  } 
```

杂项：

此代码由当前在其渲染函数末尾渲染的圆圈调用。Info 是一个多行字符串。LWJGL 版本 2.8.3。

更新：这似乎是 alpha 的问题。根据我输出的文本，绘图的其余部分显示得很微弱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:20:56.140

我需要`glDisable`在文本渲染后添加。以下代码完美运行：

```
GraphicsUtil.DEFAULT_FONT.drawString(x, y, info);
GL11.glDisable(GL11.GL_TEXTURE_2D); 
```

# wix - WIX 对话框更改属性文本值

> ID：13827572
> 
> 赞同：4
> 
> 时间：2012-12-11T20:00:36.173
> 
> 标签：wix, wix3.5, wix3, wix3.6, wix-extension

我可以更改现有控件上按钮的文本属性吗？

下面的代码不能解决问题

```
<Publish Dialog="FeaturesDlg" Control="Install" Property="Text" Value="Next" />    1</Publish> 
```

如果可能的话，我想避免创建自定义对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:01:25.260

WiX UI 中的字符串都应该使用 loc 标识符。因此，您应该能够使用 .wxl 文件覆盖文本。在 WiX v3.6+ 中，您可以根据以下内容覆盖控件大小：http: [//www.joyofsetup.com/2012/07/14/localizing-more-than-strings-in-wix-v3-6/](http://www.joyofsetup.com/2012/07/14/localizing-more-than-strings-in-wix-v3-6/)

# c# - 自动将 1 个语句的数据输入 12 个文本框

> ID：13827574
> 
> 赞同：1
> 
> 时间：2012-12-11T20:00:46.787
> 
> 标签：c#, visual-studio-2010

我有一个代码块，我希望每个月运行 12 次到不同的文本框中。

它所做的是使用行过滤器来匹配月份（我只能使用上下范围而不是月份名称来工作）并计算有多少条目。

//二月示例：

```
 DataView dvfeb = new DataView();
        dvfeb = DtSet.Tables[0].DefaultView;
        dvfeb.RowFilter = "([Actual Start Date]>= '1/02/2012' and [Actual Start Date] < '28/02/2012')";
        int febval = dvfeb.Count;
        febbox.Text = febval.ToString(); 
```

// 三月示例

```
 DataView dvmar = new DataView();
        dvmar = DtSet.Tables[0].DefaultView;
        dvmar.RowFilter = "([Actual Start Date]>= '1/03/2012' and [Actual Start Date] < '30/03/2012')";
        int marval = dvmar.Count;
        marbox.Text = marval.ToString(); 
```

我如何让它自动更改 feb、mar、apr 数据视图名称和文本框？是否有更易于使用的行过滤器，因此它也可以包含在此循环中？

你能举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:19:49.680

我不确定这一点，但你不能只检查月份数吗？

```
var monthNumber = monthMap[txtbox];
rowfilter = 'actualstartdatemonth = ' + monthNumber;
txtbox.Text = ++currentMonthCountMap[monthNumber]; 
```

其中 your`monthMap`是将文本框映射到月份数`currentMonthCountMap`的字典，并且是存储您的计数的字典；

如果您想要完整的日期，那么根据[这个 SO question](https://stackoverflow.com/questions/2493032/how-to-get-the-last-day-of-a-month)，您可以执行以下操作：

```
DateTime.DaysInMonth(DateTime.Now.Year, monthNumber); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:27:18.637

您可以通过使用 Find 来查找控件来执行此操作。试试下面的代码。假设 12 个文本框是 Janbox、Febbox、Marbox、.... 不区分大小写（月份的前 3 个字母 + 框）。

```
 for (int i = 1; i <= 12; i++)
        {
            DateTime startDate = new DateTime(DateTime.Now.Year, i, 1);
            DateTime endDate;
            if (i < 12)
            {
                endDate = (new DateTime(DateTime.Now.Year, i + 1, 1)).AddDays(-1);
            }
            else
            {
                endDate = (new DateTime(DateTime.Now.Year + 1, 1, 1)).AddDays(-1);
            }
            Debug.WriteLine(startDate.ToString() + " " + endDate.ToString());

            DataView dv = new DataView();
            dv = DtSet.Tables[0].DefaultView;

            string filter = "([Actual Start Date]>= '{0}' and [Actual Start Date] < '{1}')";
            filter = string.Format(filter, startDate.ToString("dd/MM/yyyy"), endDate.ToString("dd/MM/yyyy"));
            dv.RowFilter = filter;

            int val = dv.Count;

            string controlName = startDate.ToString("MMMM");
            controlName = controlName.Substring(0, 3).ToLower() + "box";
            Control[] cs = this.Controls.Find(controlName, true);
            if (cs != null && cs.Length > 0)
            {
                // assume the textbox exist and unique
                TextBox txtbox = (TextBox)(cs[0]);
                txtbox.Text = val.ToString();
            }

        } 
```

# sql-server - TSQL 2008 Unpivot XML 属性

> ID：13827581
> 
> 赞同：2
> 
> 时间：2012-12-11T20:01:15.570
> 
> 标签：sql-server, sql-server-2008, tsql

我正在寻找一种在 TSQL 中取消透视 xml 节点属性的方法，其中节点名称/属性名称是未知的

```
DECLARE @Raw XML = '<contact id=1 firstname="liz" lastname="simple" email="liz@sample.com"/>' 
```

我需要看起来像这样的结果：

```
id           1
firstname    liz
lastname     simple
email        liz@sample.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:38:30.943

询问

```
DECLARE @Raw XML = '<contact id="1"
                     firstname="liz"
                     lastname="simple"
                     email="liz@sample.com"/>'
select n.n.value('local-name(.)', 'nvarchar(max)') name,
       n.n.value('.', 'nvarchar(max)') value
  from @raw.nodes('/*/@*') n(n) 
```

结果

```
name        value
----------- ----------------
id          1
firstname   liz
lastname    simple
email       liz@sample.com 
```

# javascript - Passign the "key" "values" from JSON object to perl script

> ID：13827582
> 
> 赞同：0
> 
> 时间：2012-12-11T20:01:20.577
> 
> 标签：javascript, html, ajax, perl

我正在尝试构建一个购物车应用程序。我在一个名为 Cart 的 javascript 对象中拥有购物车中的所有商品。例如，购物车中的数据格式为 {"sku"=quantity}。

```
 Cart={"5x123"=1,"5x125"=3} 
```

现在我有一个接受送货地址和账单地址的表格。

```
 <form method="post" action="/perl/xxxx/echo.cgi"> 
    <table>
    <tr>
        <td>Name:</td>
        <td><input type="text" name="name" size="30" /></td>
    </tr>

    <tr>
        <td>Shipping Address:</td>
        <td><Input type="text" name="address" id="saddress" size="40" /></td>
    </tr>
    ....
    <tr>
        <td><input type="reset" /></td>
        <td><input type="submit" value="Submit Order"/></td>
    </tr>  
    </table>
   </form> 
```

当我提交此表单时，我需要使用 perl 将 Javascript Object Cart 中的“sku”和“quantity”存储到 DB 中。

有人可以告诉我最简单的方法吗？

我应该在表单中使用 ajax 还是隐藏值？

如果我使用 ajax，那么如何从 perlscript 中的 Cart 中检索值？

如果我以这种方式使用隐藏值

```
 <input type=hidden name=sku value="">
     //How to populate value field
    //I need to have as many hidden fields as the number of items in cart 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:26:49.770

在浏览器中使用 AJAX 将您的 JavaScript 对象提交给服务器。[Jquery](http://api.jquery.com/jQuery.ajax/ "jQuery") javascript 库非常适合在这里为您提供帮助。

然后，使用 cgi 中的[CGI](http://search.cpan.org/~markstos/CGI.pm-3.63/lib/CGI.pm) perl 模块来检索发布的值，并使用[JSON](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm)模块（如前所述）将 JSON 对象转换为 perl 哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:09:19.607

我怀疑ajax是要走的路。要在 Perl 中读取您的 Cart json 对象，请使用[JSON](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm)模块，特别是 decode_json。它会将您的数据转换为对 perl 友好的哈希，然后您可以根据需要引用它。

# mysql - 查询拒绝使用索引

> ID：13827583
> 
> 赞同：0
> 
> 时间：2012-12-11T20:01:21.960
> 
> 标签：mysql, performance, mysql-slow-query-log

使用 MySQL 5.5.28 版，

我有一个这样定义的表：

```
CREATE TABLE IF NOT EXISTS `groups` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(80) NOT NULL,
  `desc` text NOT NULL,
  `permissions` varchar(80) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ; 
```

如您所见，这非常简单。我在 id 字段上有一个主键。现在，我使用如下方式查询它：

```
SELECT permissions FROM groups WHERE id IN ('9', '8', '6','14','11','7','5'); 
```

不幸的是，它拒绝使用密钥，并显示在我的慢查询日志中。

对其执行 EXPLAIN 可提供：

```
mysql> EXPLAIN SELECT permissions FROM groups WHERE id IN ('9', '8', '6','14','11','7','5');
+----+-------------+--------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+--------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | groups | ALL  | PRIMARY       | NULL | NULL    | NULL |   16 | Using where |
+----+-------------+--------+------+---------------+------+---------+------+------+-------------+
1 row in set (0.00 sec) 
```

它在整个表中只有不到 20 行，所以我明白为什么它不太可能使用索引。但是，为什么这会是 MySQL 的“慢查询”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:04:22.407

对于少量行，完全扫描几乎总是访问表的最快方式。此外，选择性很重要——即使 id 是唯一的，查询也会返回大约 30% 的行（假设您有 20 行）。它出现在慢查询日志中不是因为它很慢，而是因为它不使用索引（它应该是控制该行为的一个选项，我只是不记得它从我的头顶上）

**更新**我刚刚仔细检查，选项是[log-queries-not-using-indexes](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_log-queries-not-using-indexes)

# php - 如何在 HTML 表格中显示二维数组中的分组数据？

> ID：13827587
> 
> 赞同：0
> 
> 时间：2012-12-11T20:01:27.493
> 
> 标签：php, html, multidimensional-array, foreach, html-table

以下二维数组存储书籍集合的信息（作者、ID 和标题）：

```
$books = array(array('author'=>"AuthorA", 'ID'=>1, 'title'=>"titleA"),
               array('author'=>"AuthorB", 'ID'=>1, 'title'=>"titleA"),
               array('author'=>"AuthorC", 'ID'=>2, 'title'=>"titleB"),
               array('author'=>"AuthorC", 'ID'=>3, 'title'=>"titleC"),
               array('author'=>"AuthorD", 'ID'=>3, 'title'=>"titleC")); 
```

我目前使用 foreach 循环在 HTML 表中显示此信息：

```
<table>
    <tr>
        <th>Author</th>
        <th>Book ID</th>
        <th>Title</th>
    </tr>
    <?php foreach ($books as $book): ?>               
    <tr>
        <td><?php htmlout($book['author']); ?></td>
        <td><?php htmlout($book['ID']); ?></td>
        <td><?php htmlout($book['title']); ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

此代码生成下表：

```
Author  | Book ID |  Title 
AuthorA      1       titleA
AuthorB      1       titleA
AuthorC      2       titleB
AuthorC      3       titleC
AuthorD      3       titleC 
```

**问题：**我想以以下方式显示数据：

```
Authors            | Book ID |  Title 
AuthorA, Author B       1       titleA
AuthorC                 2       titleB
AuthorC, Author D       3       titleC 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:36:52.553

你应该试试这段代码（我用 echo 而不是 htmlout）：

```
<?php
$books = array(array("AuthorA", 1, "titleA"),
               array("AuthorB", 1, "titleA"),
               array("AuthorC", 2, "titleB"),
               array("AuthorC", 3, "titleC"),
               array("AuthorD", 3, "titleC")); 

function transform($books) {
   $result = array();
   foreach($books as $key => $book) {
      $id = $book[1];
      if (!isset($result[$id])) {
         $result[$id] = array(
            'author' => array(),
            'ID' => $book[1],
            'title' => $book[2]
         );        
      }
      $result[$id]['author'] = array_merge( $result[$id]['author'], array($book[0]));
   }
   foreach($result as $key => $data) {
     $result[$key]['author'] = implode(', ', $result[$key]['author']);
   }
   return $result;
}

$books = transform($books);

?>

<table>
    <tr>
        <th>Author</th>
        <th>Book ID</th>
        <th>Title</th>
    </tr>
    <?php foreach ($books as $book): ?>               
    <tr>
        <td><?php echo($book['author']); ?></td>
        <td><?php echo($book['ID']); ?></td>
        <td><?php echo($book['title']); ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:46:00.297

```
<table border="1">
    <tr>
        <th>Author</th>
        <th>Book ID</th>
        <th>Title</th>
    </tr>
<?php
$books = array(array("AuthorA", 1, "titleA"),
               array("AuthorB", 1, "titleA"),
               array("AuthorC", 2, "titleB"),
               array("AuthorC", 3, "titleC"),
               array("AuthorD", 3, "titleC")); 
$prev_key = 0;
$authorColumn = "";
$titleColumn = "";
$rows = "";
foreach ($books as $book){
    if($prev_key == 0){
        $authorColumn = $book['0'];
        $titleColumn = $book['2'];
        $prev_key = $book['1'];
    }elseif($prev_key == $book['1']){
        $authorColumn .= ",".$book['0'];
        $titleColumn .= ",".$book['2'];
    }else{
        $rows .= "<tr>
        <td>".$authorColumn."</td>
        <td>".$prev_key."</td>
        <td>".$titleColumn."</td>
    </tr>";
        $prev_key = $book['1'];
        $authorColumn = $book['0'];
        $titleColumn = $book['2'];
    }

}
$rows .= "<tr>
        <td>".$authorColumn."</td>
        <td>".$prev_key."</td>
        <td>".$titleColumn."</td>
    </tr>";
echo $rows;

?>
</table> 
```

此代码不干净，但可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:11:07.067

```
$map = array();
foreach ($books as $book) {
    extract($book);
    $map[$ID][$title][] = $author;
}

foreach ($map as $ID => $entry) {
    foreach ($entry as $title => $authors) {
        printf(
            "<tr><td>%s</td><td>%s</td><td>%s</td></tr>\n"
          , join(',', $authors)
          , $ID
          , $title
        );
    }
} 
```

# google-analytics - Google Analytics API - 无注册来源

> ID：13827589
> 
> 赞同：8
> 
> 时间：2012-12-11T20:01:29.847
> 
> 标签：google-analytics, readonly

我需要请求谷歌分析只读 api

但我有一些麻烦：

```
Erro:invalid_client
 no registered origin
Detalhes da solicitação
scope=https://www.googleapis.com/auth/analytics.readonly
response_type=token
access_type=online
redirect_uri=postmessage
proxy=oauth2relay906123469
origin=https://bob.tricae.com.br/
state=450098374
display=page
prompt=none 
```

我的 cliend_id 是正确的我从：

google.com/apis/console/#project

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-10T03:31:02.337

根据我的经验，您必须创建一个 Web 应用程序客户端 ID。例如，如果我创建一个“服务”客户端 ID，则没有任何地方可以放置“授权的 JavaScript 起源”，但是如果我在我的项目下创建一个新的“Web 应用程序”客户端 ID，那么它就有一个地方可以放置它. 一旦我以这种方式创建了客户端 ID，它就会接受它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T18:23:43.070

很确定您需要转到[https://code.google.com/apis/console/](https://code.google.com/apis/console/)并将您的页面（网址为[https://bob.tricae.com.br/](https://bob.tricae.com.br/)）添加到 API 访问上的客户端 ID标签。单击右侧的 Edit Settings...，然后在“Authorized JavaScript Origins”下填写（假设您使用的是 Javascript 客户端库）。

# android - 安卓自动淡入淡出

> ID：13827590
> 
> 赞同：0
> 
> 时间：2012-12-11T20:01:42.887
> 
> 标签：android, screen, fade

我正在为 android 开发一个应用程序，但我遇到了问题。

我的应用程序显示要阅读的页面，但 android 具有淡出屏幕以节省电池的功能，从而干扰阅读。我想知道是否可以在用户使用应用程序时更改淡入淡出时间，这将解决问题。

谢天谢地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:01:54.910

是的，您的应用肯定会获得唤醒锁并保持屏幕开启。

阅读此处了解详情：

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

选项是：

```
SCREEN_DIM_WAKE_LOCK
SCREEN_BRIGHT_WAKE_LOCK
FULL_WAKE_LOCK 
```

如果您不希望屏幕变暗，您应该选择最后两个之一（警告用户应该理解您这样做会消耗更多电池）。

# c - 释放变量后，我们可以使用它吗？

> ID：13827592
> 
> 赞同：-10
> 
> 时间：2012-12-11T20:01:49.600
> 
> 标签：c

`free(variable);`，那么我真的需要再次`variable's`使用价值。它会起作用吗？这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T20:03:24.720

> 它会起作用吗？

身份证。这是未定义的行为，因此它可能有效，也可能无效。

> 这是一个不好的做法吗？

是的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T20:38:52.243

它会工作得很好！

```
int *f = malloc( 128 );
free( f );
printf( "F has the value: %p\n", f ); 
```

现在，如果您想要 中的值，`*f`那是另一个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T20:09:21.807

请参阅免费[手册页](http://linux.die.net/man/3/free)（）：

> free()函数释放ptr指向的内存空间，

这意味着当您调用`malloc()`您拥有它所指向的内存时，一旦您调用，您就会确切地知道那里有什么：

```
free(variable); 
```

它不再属于你。所有的赌注都取消了。一旦内存被释放，就*没有充分的理由访问内存。*如果你真的需要它，你不能释放它。如果您必须释放它，请复制数据（如果这是您需要的）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T20:52:16.667

该*变量*仍然可以使用；*它指向的堆内存*不是。

IOW，这是完全合理的（如果人为的话）：

```
int *variable = malloc(sizeof *variable);
*variable = 1;
printf("%p: %d", (void *) variable, *variable);
free(variable);
variable = malloc(sizeof *variable);
*variable = 2;
printf("%p: %d", (void *) variable, *variable); 
```

调用后`free`，我可以为它分配一个*新*的指针值`variable`并继续使用它。从这个意义上说，我可以继续使用`variable`.

然而，这将*不起作用*（或者至少，它的行为是*undefined*）：

```
int *variable = malloc(sizeof *variable);
*variable = 1;
free(variable);
*variable = 2; 
```

调用后，原来指向`free`的内存可能已经不可`variable` *用了。*尝试写入它可能会导致崩溃或损坏您在其他地方使用的内存，或者它可能*看起来*工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T20:06:30.423

释放后，您不应重复使用该变量。如果您再次需要它，请释放该变量，直到您需要它为止。

释放变量会释放其内存。虽然变量所在的位置可能仍保留旧值，但可能不会。使用已释放的变量是不好的做法，并且通常会导致错误和崩溃。

# java - 带有语音流的网络研讨会应用程序

> ID：13827593
> 
> 赞同：0
> 
> 时间：2012-12-11T20:01:50.270
> 
> 标签：java, jsf-2, applet, jplayer

我正在尝试制作一个网络研讨会应用程序，它将接受老师的语音输入并将其广播给学生。

它处于设计的早期阶段，但我认为向 SO 发出求助电话不会有什么坏处。

技术平台将是 Java/jQuery/JSF，因为站点的其余部分都建立在此之上。我会避开闪光/弯曲，因为我对它们一无所知。

到目前为止，我正在考虑在教师页面上放置一个 Java Applet，记录其麦克风输入。小程序必须签名等，但似乎 Java 音频 API（JMF 等）并没有得到 Oracle 的太多喜爱，并且可能卡在旧版本中。我犯规了非常稀疏的信息谷歌搜索。

在观众方面，也许使用另一个音频播放器小程序，但它可能有点矫枉过正，例如当我可以使用 jPlayer 时。

我想我可以自己编写音频录制小程序，并将数据流式传输回服务器（在 Tomcat 上运行 JSF）——我很快就会在此处发布小程序骨架 :)

**由于必须有一个问题，这里是：**

*   如何让 jPlayer 从 JSF 服务器捕获数据？或者换句话说，JSF 服务器需要做什么才能使小程序捕获的流音频对 jPlayer 可用？

* * *

*我怀疑有人有现成的解决方案，我很抱歉这个广泛的问题。随着我的研究，我将在这里分享它。可能会有更多问题，它们将在评论中链接。*

*非常感谢您花时间阅读本文。*

# c++ - oaidl.h(319)：错误 C2057：预期的常量表达式

> ID：13827599
> 
> 赞同：1
> 
> 时间：2012-12-11T20:02:17.930
> 
> 标签：c++, enums, compiler-errors, visual-studio-2012

我最近从 Visual Studio 2010 切换到 Visual Studio 2012。我正在处理的项目使用 [MiLi的](http://code.google.com/p/mili/)[BitwiseEnums](http://code.google.com/p/mili/wiki/BitwiseEnums)库。[根据此处](http://code.google.com/p/mili/wiki/IncludingSpecificHeaders)的说明，我只包括 BitwiseEnums 库，因此添加到我的项目中的唯一文件是[bitwise_enums.h](http://code.google.com/p/mili/source/browse/mili/bitwise_enums.h)。

在 VS2010 中我没有问题。在 VS2012 中，每当我 #include bitwise_enums.h 并尝试编译时，我都会收到以下错误消息：

```
1>c:\program files (x86)\windows kits\8.0\include\um\oaidl.h(319): 
error C2057: expected constant expression 
```

当我检查我的项目的外部依赖项时，它确实列出了文件 oaidl.h。查看此文件，我发现以下语句在第 319 行结束。

```
typedef /* [v1_enum] */ 
enum tagSF_TYPE
    {
        SF_ERROR    = VT_ERROR,
        SF_I1   = VT_I1,
        SF_I2   = VT_I2,
        SF_I4   = VT_I4,
        SF_I8   = VT_I8,
        SF_BSTR = VT_BSTR,
        SF_UNKNOWN  = VT_UNKNOWN,
        SF_DISPATCH = VT_DISPATCH,
        SF_VARIANT  = VT_VARIANT,
        SF_RECORD   = VT_RECORD,
        SF_HAVEIID  = ( VT_UNKNOWN | VT_RESERVED ) 
    }   SF_TYPE; // Line 319 
```

我的问题是：

1.  什么是 oaidl.h，是什么导致它包含在我的项目中？
2.  错误消息是什么意思，我该如何解决？
3.  仅在 VS2012 中发生此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:35:45.460

我设法将其缩小到 bitwise_enums.h 和 Windows.h 之间的某种命名冲突，我也将其包含在项目中。我注意到，如果我包含整个 MiLi 库，我没有收到错误，因为 mili.h 使用`#define NAMESPACE_BEGIN`and将所有内容放在命名空间中，而按照[此处](http://code.google.com/p/mili/wiki/IncludingSpecificHeaders)`#define NAMESPACE_END`建议的方式定义它们，意味着 bitwise_enums.h 的内容最终会污染全局命名空间。我仍然不完全清楚为什么这会导致问题，因为我似乎无法找到冲突，也不清楚为什么它在 VS2010 中有效。但是，我能够通过更改 #define 指令来解决它，以便它们在 bitwise_enums.h 中创建命名空间：

```
#define NAMESPACE_BEGIN namespace Mili
#define NAMESPACE_END }
#include <bitwise_enums.h>
#undef NAMESPACE_BEGIN
#undef NAMESPACE_END 
```

另一种解决方案是包含 mili.h 并遵循[此链接上的第二个建议](http://code.google.com/p/mili/wiki/IncludingSpecificHeaders)，但由于我只需要一个库，因此我不希望有很多行单独排除我不想要的库。

如果将来有人最终遇到与我一样的晦涩情况，希望这个答案会很有用，使用包含来自 MiLi 的单个库的特定方法，同时在 VS2012 中包含 Windows.h（可能不太可能的组合）！

# asp.net-mvc - 该进程无法访问该文件，因为它正在被另一个进程使用？

> ID：13827600
> 
> 赞同：2
> 
> 时间：2012-12-11T20:02:32.097
> 
> 标签：asp.net-mvc, image, file-upload, process, dispose

```
public ActionResult _Upload(HttpPostedFileBase file, GaleriesViewModel galeriesViewModel)
{
    Images image = new Images();

    if (file.ContentLength > 0)
    {
        try
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/Images/Galeries/Galery_" + galeriesViewModel.sno), fileName);
            var smallImagePath = Path.Combine(Server.MapPath("~/Images/Galeries/Small/Galery_" + galeriesViewModel.sno), fileName);
            var db_file_url = "Images/Galeries/Galery_" + galeriesViewModel.sno + "/" + fileName;
            var db_small_image_url = "Images/Galeries/Small/Galery_" + galeriesViewModel.sno + "/" + fileName;

            //exception thrown in this line
            file.SaveAs(path);
            Image smallImage = Image.FromFile(path);
            Size size = new Size();
            size.Height = 128;
            size.Width = 128;
            smallImage = ImageManager.ResizeImage(smallImage, size);
            smallImage.Save(smallImagePath);
            smallImage.Dispose();

            image.ContentType = file.ContentType;
            image.CreatedOn = DateTime.Now;
            //image.CreateUserId = WebSecurity.CurrentUserId;
            image.GaleryId = galeriesViewModel.sno;
            image.ImageUrl = db_file_url;
            image.Name = fileName;
            image.UploadSize = file.ContentLength;
            image.SmallImageUrl = db_small_image_url;
            entity.Images.Add(image);
            entity.SaveChanges();
        }
        catch (Exception ex) { }
    }

    galeriesViewModel.Galeries = entity.Galeries;
    ViewData["Selected"] = galeriesViewModel.sno;
    return View("ImageOperations", galeriesViewModel);
} 
```

我可以使用此代码上传图片。但是，当我尝试连续添加相同的图像时，我再次收到写为标题的错误。我怎样才能解决这个问题？这是什么原因？

**更新**

图像管理器类

```
public static class ImageManager
{
    public static Image ResizeImage(Image imgToResize, Size size)
    {
        int sourceWidth = imgToResize.Width;
        int sourceHeight = imgToResize.Height;

        float nPercent = 0;
        float nPercentW = 0;
        float nPercentH = 0;

        nPercentW = ((float)size.Width / (float)sourceWidth);
        nPercentH = ((float)size.Height / (float)sourceHeight);

        if (nPercentH < nPercentW)
            nPercent = nPercentH;
        else
            nPercent = nPercentW;

        int destWidth = (int)(sourceWidth * nPercent);
        int destHeight = (int)(sourceHeight * nPercent);

        Bitmap b = new Bitmap(destWidth, destHeight);
        Graphics g = Graphics.FromImage((Image)b);
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;

        g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
        g.Dispose();

        return (Image)b;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:49:00.110

好吧，对我来说，它看起来像：
1.您正在创建图像`Image smallImage = Image.FromFile(path);`
2.您正在用新图像覆盖您的引用`smallImage = ImageManager.ResizeImage(smallImage, size);`
3.传递给方法`ResizeImage`的图像仍在内存中，因此您必须在返回新图像之前将其处理在该方法中`b`

```
imgToResize.Dispose();
return (Image)b; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T05:42:04.490

此外，当您完成`Image`. 关闭它。我发现这是我的问题，因为我在上传后读取图像以进行一些处理。下一次上传我会得到一个锁定的文件。

```
Image smallImage = Image.FromFile(path);
//....
smallImage.Dispose(); 
```

此外，您应该将您的包装`Graphics g`在 using 语句中。它会在完成或出现异常时调用 Dispose。

```
using (Graphics g = Graphics.FromImage((Image)b)
{
    //....
}
//No need to call Dispose() manually. 
```

甚至更好。确保您的图像在出现异常时被处理掉。调用块`Image.Dispose()`。`Finally`

# javascript - Formaction，formmethod，formenctype通过jQuery提交

> ID：13827603
> 
> 赞同：3
> 
> 时间：2012-12-11T20:02:41.393
> 
> 标签：javascript, jquery, forms, html, events

我想知道如何在表单内部设置事件时获取`formmethod`、或。`formaction``formenctype``formtarget``<input type="submit">``submit`

```
<form action="/url" method="POST">
  ...
  <input type="submit" value="Action 1" formaction="/another-url">
  <input type="submit" value="Action 2" formmethod="PUT">
</form> 
```

```
 $(function(){
   $('form').bind('submit', function(){
     // how to get it here?
     // need to know if action1 or action2 was clicked, and if any of them have "form*" attributes
     return false;
   });
 }); 
```

他们在这里解释[http://www.adobe.com/devnet/dreamweaver/articles/html5-forms-pt2.html#articlecontentAdobe_text_31](http://www.adobe.com/devnet/dreamweaver/articles/html5-forms-pt2.html#articlecontentAdobe_text_31)

由于我正在创建一个 jQuery 插件，我不知道它会在哪里使用，所以它必须是一个万能的解决方案。jQuery 似乎还无法处理它以提供安全的跨浏览器解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:26:03.737

我正在解决这个问题：

```
$('form > button[type="submit"]').bind('click', function() {
    this.parentNode.action = this.getAttribute('formaction');
}); 
```

此片段假定`button`是 的直接后代`form`，但可以轻松扩展为更通用。

我认为这是标准中的一个缺陷，*真正的*表单动作应该可以通过 JavaScript 以某种方式访问​​，而无需触摸按钮或其值。据我所知，没有变通办法是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:35:28.213

找到了答案，但我不知道它是否是跨浏览器：

```
$('form').on('submit', function(event){
   var submit_button = event.originalEvent.explicitOriginalTarget;
   if (submit_button.attr('formaction')){
      // form action, enctype, etc
   }
   return false;
}); 
```

编辑：这仅适用于 Gecko，我正在寻找替代品。好像 IE 有`event.srcElement`，但不一样。`event.originalEvent.explicitOriginalTarget`是要走的路，但只能在 Firefox 中使用，Chrome 或 IE 也没有办法做到这一点。

`submit`除非绑定到按钮（`<input type="submit">`和），否则没有跨浏览器的方式来执行此`<button type="submit">`操作，但这不适用于手动设置将通过 Javascript 提交的按钮，而绑定“提交”它将按预期工作

# azure - 在开发 .NET 应用程序以帮助降低成本并优化 Azure 中的性能时，我必须考虑哪些注意事项？

> ID：13827604
> 
> 赞同：3
> 
> 时间：2012-12-11T20:02:47.247
> 
> 标签：azure

我正在考虑将 .NET 应用程序部署到 Windows Azure，但不确定我需要优化什么以降低成本和提高性能。该站点是使用 MVC 4 开发的，大量使用 javascript 框架进行 AJAX 查询，数据保存在 SQL 中。似乎没有关于我应该查看或考虑的事情的详细指南，例如视图状态与服务器端存储，例如 SQL、表存储等。存储类型包括字符串，例如名称、日期等，二进制，例如 jpeg， jpg等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:06:09.783

每个应用程序都不同，因此您可以做的最好的事情是尝试估计自己的使用情况，然后花一些时间使用[Azure 成本计算器](https://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)。部署应用程序后，请务必查看您的月度发票。微软会很高兴地告诉你他们向你收取的费用，然后你就会有硬数据可供使用。

也就是说，根据我运行“典型”Web 应用程序的经验，真正重要的唯一成本是计算实例（Web/工作者角色）。运行一个月的单个小型计算实例相当于在 SQL Server 中存储 15GB，在 Azure 存储中存储 425GB，或者使用 470GB 带宽。与其他 Azure 产品相比，这个小 CPU 相当昂贵，因此请尽量使用最少数量的计算实例，并充分利用您确实使用的计算实例。

您还可以做一些其他简单的事情来省钱，但请记住，削减一两个计算实例可能比所有这些都更重要。

1.  如果您使用的是 Azure 诊断，请为此创建一个存储帐户并关闭异地冗余存储功能。这将为您节省几块钱，几乎不费吹灰之力。它还可以防止记录数据影响您的生产数据上限。
2.  定期清理旧的日志记录数据。
3.  尽量避免在 SQL 中保留大量数据。如果您有大型文档、图像等，请尽可能将它们移动到 Azure 存储（表或 Blob）中。
4.  如果您有一些后台处理要做，您可以将其添加到您的 Web 角色中，而不是创建一个单独的辅助角色。
5.  如果您有资格，请考虑使用预留实例或获得批量许可交易。

# python - 当有> 10个精灵时，如何处理多个精灵碰撞？

> ID：13827607
> 
> 赞同：1
> 
> 时间：2012-12-11T20:03:04.260
> 
> 标签：python, sprite, pygame, collision

我制作了一个小程序来为 astar 算法设置动画。如果你看图像，有很多黄色的汽车在四处移动。它们随时可能发生碰撞，可能只是其中一个或全部可能只是愚蠢地相互碰撞。

如何检测所有这些碰撞？我如何找出哪辆车撞到了另一辆车？

我想处理每次碰撞的方式是让他们撞车，或者让一辆车停下来，让另一辆车计算围绕停止的汽车的路线。

![在此处输入图像描述](../Images/963a4775ea8081377fe651b68a63ec5e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:55:37.777

更便宜的解决方案是使用该`itertools`模块仅碰撞汽车组合：

```
import itertools

for c1 in cars:
    collides_environment(c1)

for c1, c2 in itertools.combinations(cars):
    collides(c1, c2) 
```

如果你使用这种方法，你只会碰撞成对的汽车，并且不会碰撞汽车。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:28:56.783

如果您有汽车类，并且汽车列表中的所有实例：

```
for c1 in cars:
    collides_environment(c1)
    for c2 in cars:
        collides(c1,c2) 
```

您正在使用 pygame，汽车或多或少是一个正方形。对于碰撞检查，您可以使用以下功能`collideRect`： http: [//www.pygame.org/docs/ref/rect.html#Rect.colliderect](http://www.pygame.org/docs/ref/rect.html#Rect.colliderect)

# javascript - 使用 JQuery 将项目从隐藏的 div 拉到另一个 & 无限滚动

> ID：13827619
> 
> 赞同：1
> 
> 时间：2012-12-11T20:03:45.373
> 
> 标签：javascript, jquery, html, scroll, infinite-scroll

我的网站上有一个页面，允许用户将照片上传到我服务器上的目录。

然后从该目录中提取这些照片（100x100 缩略图）并放置在`<DIV ID=Content>`显示该目录中所有照片的 aa 中。

编码器在这里：

```
<script>
$(document).ready(function() {
    $('.fancybox').fancybox();
    $.ajax({
        url: "user-uploads-thumbnails",
        success: function(data){
            var imageNames = [];
            $(data).find("a:contains(.jpg)").each(function(){
                // store each image name into array
                imageNames.push($(this).attr("href"));
               });

            var sortedImageNames = imageNames.sort();

            for(var i = sortedImageNames.length; i-- > 0;) {
                    var linkImage = 'user-uploads/' + sortedImageNames[i];
                    var thumbnailImage = 'user-uploads-thumbnails/' + sortedImageNames[i];
                    var item = '<div class="item"> <li> <a class="fancybox" href="' 
                        + linkImage 
                        + '" data-fancybox-group="gallery"><img class=dropshadow src="' 
                        + thumbnailImage 
                        + '"></a></li></div>';
                    $(item).appendTo('#content');
                }
            $('.fancybox').fancybox();
            }
        });
    });
</script> 
```

但是，照片墙变得太大了，我需要实现一个无限滚动功能，一次拉出 30 张图像。

从我的研究看来，我必须隐藏`<DIV ID=Content>`，然后一次将 30 张图像拉到一个新的`<DIV ID=load30>`. 一旦用户从页面底部到达 200 像素，我希望它再加载 30 个并继续此操作，直到没有更多图像可以从隐藏中提取`<DIV ID=Content>`

这是我想出的尝试从中提取图像的代码`<DIV ID=Content> to <Div ID=Load30>`。我正在使用它，因为 load30 div 没有被填充。

我的错误在哪里？

我似乎无法让它正常工作。

```
<script>

    $(document).ready(function() {
    $(document).endlessScroll( 

    {
        bottomPixels:200,
        callback: function (p) 
            {

            var load30images = $('#content li:lt(30)');
            $('#load30').append(load30images);      
            }   
    }

    );

});
</script> 
```

# java - 通过套接字发送对象导致 SocketException

> ID：13827625
> 
> 赞同：3
> 
> 时间：2012-12-11T20:04:27.103
> 
> 标签：java, sockets, serversocket

如何阻止 SocketException 发生？

我正在尝试将序列化对象从客户端简单传输到本地计算机上的服务器。

我已经能够使用以下代码的细微变化来发送字符串，但是当我尝试发送对象时

```
Customer customerToReceive = (Customer) input.readObject();// EXCEPTION OCCURS RIGHT HERE 
```

我得到一个我不明白如何解释的 SocketException。

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.io.ObjectInputStream$PeekInputStream.read(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.read(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readFully(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at MattServer.runCustomerServer(MattServer.java:44)
at MattServer.<init>(MattServer.java:14)
at MattServerTest.main(MattServerTest.java:10) 
```

这是客户端代码，似乎根本没有抱怨： public class MattClient { Socket client; ObjectOutputStream 输出；ObjectInputStream 输入；字符串消息；

```
public MattClient()
{
    runCustomerClient();
}

public void runCustomerClient()
{
    try
    {
        //Connection:
        System.out.println("Attempting connection...");
        client = new Socket("localhost",12345);
        System.out.println("Connected to server...");

        //Connect Streams:

        //output.flush();
        System.out.println("Got IO Streams...");

        //SEND MESSAGES:
        try
        {
            for(int i = 1;i<=10;i++)
            {
                output = new ObjectOutputStream(client.getOutputStream());
                Customer customerToSend = new Customer("Matt", "1234 fake street", i);
                System.out.println("Created customer:");
                System.out.println(customerToSend.toString());
                output.writeObject(customerToSend);
                output.flush();
            };
            message = "TERMINATE";
            System.out.println(message);
            output.writeObject(message);
            output.reset();
            output.flush();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch(Exception e2)
        {
            e2.printStackTrace();
        }
        finally
        {

        }
    }
    catch (IOException e1)
    {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    catch(Exception e3)
    {
        e3.printStackTrace();
    }
    finally
    {

    }
} 
```

和反抗的服务器：

```
public class MattServer
{
ServerSocket server;
Socket socket;
ObjectInputStream input;
ObjectOutputStream output;
String message;

public MattServer()
{
    runCustomerServer();
}

public void runCustomerServer()
{
    try
    {
        server = new ServerSocket(12345,100000);
        while(true)
        {
            //CONNECTION:
            System.out.println("Waiting for connection");
            socket = server.accept();
            System.out.println("Connection received...");

            //CONNECT STREAMS:
            //output = new ObjectOutputStream(socket.getOutputStream());
            //output.flush();
            input = new ObjectInputStream(socket.getInputStream());
            System.out.println("Got IO Streams...");

            //PROCESS STREAMS:
            System.out.println("Connection successful!");
            do
            {
                System.out.println("Started loop");
                try
                {
                    System.out.println("in try...");
                    System.out.println(socket.getInetAddress().getHostName());
                    Customer customerToReceive = (Customer) input.readObject();// EXCEPTION OCCURS RIGHT HERE
                    Object o = input.readObject();
                    System.out.println("Object of class " + o.getClass().getName() + " is " + o);
                    System.out.println("Got customer object");
                    System.out.println(customerToReceive.toString());
                }
                catch(ClassNotFoundException cnfE)
                {
                    System.out.println("Can't convert input to string");
                }
            } while(!message.equals("TERMINATE"));

            System.out.println("Finished.");

        }
    }
    catch(IOException ioE)
    {
        ioE.printStackTrace();
    }
    finally
    {
        try
        {
            input.close();
            socket.close();
            server.close();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:28:55.077

这个异常是过早关闭连接的结果，即客户端发送它的数据并立即关闭连接。在这种情况下，服务器通常无法读取客户端发送的所有数据，并且连接的终止发生在服务器端所看到的传输中间。

请注意，`flush()`网络`OutputStream`并不*意味着*或保证任何/所有数据都已实际传输。在最好的情况下，这只确保所有数据都传递*到本地机器上的网络堆栈*，这将自行决定何时实际传输数据。

对此的一种解决方案是让*服务器*在准备好时关闭连接。然后客户端应该等待，例如在阻塞操作中，然后当*服务器*发出传输结束的信号`read()`时，将通过指定的异常通知。

 *另一种方法是实现自己的确认，以便客户端等待服务器发回确认消息，之后双方可以安全地关闭连接。

作为参考，在像您这样的情况下，有一些套接字选项会影响连接的行为，即：

[SO_LINGER](http://download.java.net/jdk7/archive/b123/docs/api/java/net/SocketOptions.html#SO_LINGER "SO_LINGER")和 [TCP_NODELAY](http://download.java.net/jdk7/archive/b123/docs/api/java/net/SocketOptions.html#TCP_NODELAY "TCP_NODELAY")

（这些套接字选项*不能解决*您的问题，但在某些情况下可能会改变观察到的行为。）

编辑：

似乎`SO_LINGER`观察到的行为的选项的相关性并不像我认为的参考文档那样明显。因此，我将尝试更清楚地说明这一点：

在 Java 中，基本上有*两种*方法可以通过以下方式终止 TCP 连接`close()`：

1.  *不*启用该`SO_LINGER`选项。在这种情况下，会立即发送 TCP 连接*重置*( `RST`) 并`close()`返回调用。连接的对等端将收到一个异常，指出在收到后尝试使用连接（读取或写入）时“连接已重置” `RST`。

2.  *启用* `SO_LINGER`选项。在这种情况下，会生成一个 TCP`FIN`以有序地关闭连接。然后，*如果*对等方未确认在给定时间范围内发送的数据，则会发生超时，并且发出请求的本地方会`close()`继续，如情况＃1，发送`RST`然后声明连接“死亡”。

因此，通常希望启用`SO_LINGER`以允许对等方处理数据，然后干净地断开连接。如果`SO_LINGER`未启用*并且在对等方处理所有数据* *之前*`close()`调用（即“太早”），则指定的异常重新发生在对等方处*重置连接。*

 **如上所述，该`TCP_NODELAY`选项*可能会*以不确定的方式改变观察到的行为，因为写入的数据更有可能在调用导致连接重置*之前*已经通过网络传输。`close()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T20:23:04.143

不要从客户端调用 output.reset() ；似乎这可能导致服务器认为连接已重置。无关紧要，但您可能也不需要 flush() 。

我也不认为你应该在 for 循环的每个循环中创建一个新的 ObjectOutputStream。在循环外部（上方）初始化它，然后重用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T21:12:33.580

此异常有多种原因，但最常见的原因是您写入的连接已被另一端关闭。换句话说，一个应用程序协议问题：您写入的数据多于读取的数据。

在这种情况下，这是因为您在套接字的生命周期中使用了一个 ObjectInputStream，但对于每条消息都使用了一个新的 ObjectOutputStream，这不可能工作。在连接的整个生命周期中，在两端各使用一个。

您还必须在接收方的 IOException 中收到“无效类型代码 AC”消息。你知道吗？

**编辑：**对于在此线程中其他地方所暗示的“提前关闭”谬误的拥护者：

1.  [RFC 793 #3.5](http://www.ietf.org/rfc/rfc793.txt)声明（a）'CLOSE 是一个操作，意思是“我没有更多数据要发送”'，（b）'TCP 将在连接关闭之前可靠地传送所有已发送的缓冲区'，以及（c）'本地用户启动关闭：在这种情况下，可以构造一个 FIN 段*并将其放置在传出段队列中*'[我的重点]。FIN 不会在任何未决数据之前到达，并且关闭不会中止未决数据的传输。

2.  设置正`SO_LINGER`超时会导致 close() 阻塞，直到发送所有待处理的数据或超时到期。根本没有设置`SO_LINGER`，挂起的数据无论如何都会发送，但异步关闭，除非设置了 +ve linger 超时。第三种可能性是故意丢弃未决数据并发送 RST 而不是 FIN。OP 在这里没有这样做，它不是解决已经涉及 RST 的问题的任何一种解决方案。

3.  几年前，我在 Internet 上做了一个吞吐量实验，其中我改变了所有可能的 TCP 参数，*除了* `SO_LINGER`，我将其保留为默认状态。每个测试都包括几兆字节的定时单向传输，然后是正常关闭，没有任何积极的“逗留”超时或任何等待对等方。在 1700 个连接中，遇到“连接重置”的次数为零。追随者有责任解释这些结果，还要解释为什么绝大多数 TCP 问题不会与 SO_LINGER 混淆。他们也确实有责任制作一个确实表现出所声称行为的测试用例。条件：连接、发送大量数据并关闭的客户端，没有弄乱 SO_LINGER 或任何套接字选项，以及侦听、接受的服务器，*读取到 EOS，*然后关闭。交给你。

在 TCP 中没有“过早”关闭连接这样的事情。***

# sublimetext2 - 如何使用 Sublimetext2 中的 Snippet 将所选块中的每一行包含一个字符？

> ID：13827626
> 
> 赞同：2
> 
> 时间：2012-12-11T20:04:30.857
> 
> 标签：sublimetext2

所以，到目前为止，我所得到的是用星号包装我选择的文本的片段：

```
<snippet>
   <content>
       <![CDATA[*$SELECTION*]]>
   </content>
</snippet>` 
```

如果我选择了第一行然后调用了我的代码段，它将执行此操作：

```
*feature-121203-poulan-pro-en.jpg*
feature-121203-poulan-pro-fr.jpg
outdoor-hero-121203-heattrak-en.jpg
outdoor-hero-121203-heattrak-fr.jpg 
```

但是如何调整我的代码片段，以便如果我选择一个行块，它将独立地包装每一行，而不仅仅是包装整个块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:14:51.707

您可以保持您的片段原样：选择后，您可以使用`Cmd``Shift``L`（或`Ctrl``Shift``L`）将选择分成几行。然后应用您的代码段。

# entity-framework - 删除可选一对多引用中的被引用对象时如何防止实体框架5将外键属性设置为null

> ID：13827628
> 
> 赞同：3
> 
> 时间：2012-12-11T20:04:34.630
> 
> 标签：entity-framework

实体框架（版本 5）在删除引用的对象时将外键属性设置为 null。例如：

```
public class Category 
{
    public int Id {get;set;}
    public virtual Category ParentCategory {get;set;}
    public virtual ICollection<Category> ChildCategories {get;set;}
} 
```

由于文档[http://msdn.microsoft.com/en-us/library/bb738695.aspx](http://msdn.microsoft.com/en-us/library/bb738695.aspx)，删除父类别时，EF 会将所有子类别的 ParentCategory 设置为 null。

我的问题是如何通过在删除父类而不是将子类作为孤儿类时抛出异常来防止这种默认行为？

一种可能的方法是挂钩 DbContext.SaveChanges()，检查 ChildCategories.Any() 是否并抛出异常，但它看起来很难看 :-(

# c++ - Dijkstra's - 队列

> ID：13827636
> 
> 赞同：2
> 
> 时间：2012-12-11T20:05:20.013
> 
> 标签：c++, queue, dijkstra

我对 Dijkstra 的算法使用以下代码：

```
int Graph::ShortestPath(Vertex *start, Vertex *end)
{
    int posStart = IndexOfNode(start);
    int posEnd = IndexOfNode(end);
    int result;

    bool visit[cntNodes];
    int distance[cntNodes];
    // Initialization: set every distance to -1 until we discover a path
    for (int i = 0; i < cntNodes; i++) {
        visit[i] = false;
        distance[i] = -1;
    } // for

    // The distance from the source to the source is defined to be zero
    distance[posStart] = 0;

    Queue *q = new Queue(maxNodes);
    q->Enqueue(posStart);
    while (!q->Empty()) {
        int next, alternative;
        q.Dequeue(next);
        for (int i = 0; i < cntNodes; i++) {
            if (adjmatrix[next][i]) {
                alternative = distance[next] + adjmatrix[next][i];
                if (visit[i]) {
                    if (alternative < distance[i]) {
                        distance[i] = alternative;
                        q.Enqueue(i);
                    } // if
                }// if
                else {
                    distance[i] = alternative;
                    visit[i] = true;
                    q.Enqueue(i);
                } // else
            } // if
        } // for
    }
    delete q;
    result = distance[posEnd];
    delete[] visit;
    delete[] distance;
    return result;
} 
```

现在我使用自己创建的名为 Queue 的类：

```
Queue *q = new Queue(maxNodes) 
```

是否有任何 C++ 标准队列可以用来代替我自己的实现。

我只需要这个功能：

```
Queue *q = new Queue(maxNodes);
q->Enqueue(posStart);
    q.Dequeue(next); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:10:18.980

[priority_queue](http://en.cppreference.com/w/cpp/container/priority_queue)非常适合 Dijkstra 算法，并降低了算法的运行时复杂度（与普通队列相比）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:06:28.527

是的。请检查标准模板库以获取此集合类和许多其他集合类。

这是一个链接： [http ://www.cplusplus.com/reference/queue/queue/](http://www.cplusplus.com/reference/queue/queue/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:11:53.863

至少有三件事浮现在脑海：

1.  [std::deque](http://en.cppreference.com/w/cpp/container/deque) — 双端队列。
2.  [std::queue](http://en.cppreference.com/w/cpp/container/queue) - 一个队列容器适配器。
3.  [std::priority_queue](http://en.cppreference.com/w/cpp/container/priority_queue) — 优先队列。

在 C++ 标准库中还可以找到其他容器和算法。

# javascript - HTML5 音频在 ie7 或 ie8 中不起作用

> ID：13827637
> 
> 赞同：3
> 
> 时间：2012-12-11T20:05:24.890
> 
> 标签：javascript, html, internet-explorer

在 IE7/8 中进行测试时，我的脚本崩溃并出现此错误...

> SCRIPT438：对象不支持属性或方法“播放”

我正在使用 HTML5 音频标签在我的网页上嵌入和播放音频。

```
<div id="auido-container">
        <audio id="music" loop="loop">
            <source src="audio/holiday-for-mr-anderson-60secs.mp3"></source>
            <source src="audio/holiday-for-mr-anderson-60secs.ogg"></source>
            Your browser isn't invited for super fun audio time.
        </audio>
        <audio id="sound">
            <source src="audio/pop.mp3"></source>
            <source src="audio/pop.ogg"></source>
            Your browser isn't invited for super fun audio time.
        </audio>

    </div> 
```

我的 JS 看起来像这样：

```
start.click(function(){
    audio.play();
}); 
```

我已将其包含在我的标题中：

```
<!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 
```

有谁知道任何解决方案或修复？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T20:09:46.423

包括 IE7/8 在内的许多旧浏览器不（完全）支持 HTML 5。

您可以使用[Modernizr](http://modernizr.com/docs)来检测当前浏览器是否支持音频。

有许多功能的[polyfills](http://en.wikipedia.org/wiki/Polyfill)，包括可以添加对缺失功能的支持的音频

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

（向下滚动到音频部分以获取选项）

polyfills 适用于各种受支持的浏览器和浏览器版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-02T17:12:40.220

我有一个类似的问题，这就是我修复它的方法（这现在可以在 IE8 中使用并且也可以播放 wav 文件！）。诀窍是为兼容 HTML5 的浏览器使用音频标签，为较旧的 IE 浏览器使用嵌入标签。

在 HTML 页面中创建两个元素：

```
<audio id="audiotag" src="images/beep-03.wav" preload="auto"></audio>
<embed id="audiotagII" src='images/beep-03.wav' autostart='false' loop='false' width='2' height='0'></embed> 
```

以下是在旧浏览器和新浏览器中播放声音的 JavaScript 部分：

```
//Returns the version of Windows Internet Explorer or a -1\. Available on the Internet!
function getInternetExplorerVersion()
{
    var rv = -1; // Return value assumes failure.
    if (navigator.appName == 'Microsoft Internet Explorer') {
        var ua = navigator.userAgent;
        var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
        if (re.exec(ua) != null)
            rv = parseFloat(RegExp.$1);
    }
    return rv;
}

var browserVer = getInternetExplorerVersion();
if (browserVer > -1 && browserVer < 9) {
    document.getElementById('audiotagII').play();   
} else {
    document.getElementById('audiotag').play();
} 
```

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:08:09.377

如果浏览器不支持 HTML5 音频，除了使用这些浏览器的替代品之外，您无能为力。根据 w3schools：

> Internet Explorer 8 及更早版本，不支持该元素。

来源：[http ://www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)

# jquery - 导航活动链接突出显示

> ID：13827638
> 
> 赞同：0
> 
> 时间：2012-12-11T20:05:27.920
> 
> 标签：jquery

我正在尝试创建一个导航链接，当我单击一个链接时，它会突出显示为不同的颜色，但是当我单击下一个链接时，前一个链接不会突出显示，而最近点击的链接会突出显示

这是小提琴 [http://jsfiddle.net/d0okie0612/JCzvL/22/](http://jsfiddle.net/d0okie0612/JCzvL/22/)

现在它只是突出显示所有链接

html

```
 <span class="tab1"><a class="slider_link" href="#1" rel="welcome">Comics</a></span>
  <span class="tab2"><a class="slider_link" href="#2" rel="hatstory">Media</a></span>
  <span class="tab3"><a class="slider_link" href="#3" rel="annoyed">Bat News</a></span>​ 
```

jQuery

```
$('a.slider_link').click(function(e) {
    e.preventDefault()
    $(this).removeClass('slider_link_style');
    $(this).addClass('slider_link_style');
    return false;
}) 
```

css

```
.slider_link_style{color: white}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:08:52.810

`removeClass`稍微调整一下你的电话：

```
$('a.slider_link').click(function(e) {
    e.preventDefault()
    //
    // Remove class from *all* a.slider_links:
    //
    $('a.slider_link').removeClass('slider_link_style');
    $(this).addClass('slider_link_style');
    return false;
}); 
```

检查它：http: [//jsfiddle.net/a892N/](http://jsfiddle.net/a892N/)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:09:42.803

您快到了，您的代码专门针对单击的元素，因此当您删除该类时，您只是将其从自身中删除，而不是菜单中的其他元素。通过像这个[小提琴](http://jsfiddle.net/z5nVm/)一样改变选择，你可以达到你想要的结果。

```
 $('a.slider_link').click(function(e) {
      e.preventDefault()
      $('a.slider_link').removeClass('slider_link_style');
      $(this).addClass('slider_link_style');
      return false;
  }); 
```

或者，如果您想重用选择器以减少跳入池的次数，这应该会给您带来轻微的性能提升，因为您不会为相同的选择解析 DOM 两次。

```
var menu_items = $('a.slider_link');
menu_items.click(function(e) {
    e.preventDefault()
    menu_items.removeClass('slider_link_style');
    $(this).addClass('slider_link_style');
    return false;
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:08:18.873

您需要从“表亲”链接中删除课程，而不是从`this`：

```
$('a.slider_link').click(function(e) {
    e.preventDefault()
    $(this).closest('span').siblings().find('a').removeClass('slider_link_style');
    $(this).addClass('slider_link_style');
    return false;
})​; ​ 
```

[http://jsfiddle.net/mblase75/JCzvL/24/](http://jsfiddle.net/mblase75/JCzvL/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:09:11.050

在您的点击处理程序中，`this`引用指向被点击的项目。因此，您将删除滑块链接样式 CSS 类并将其重新添加到同一元素。尝试这个：

```
$('a.slider_link').click(function(e) {
    e.preventDefault()
    $('a.slider_link').removeClass('slider_link_style');
    $(this).addClass('slider_link_style');
    return false;
}) 
```

[http://jsfiddle.net/JCzvL/23/](http://jsfiddle.net/JCzvL/23/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T20:26:28.867

设置*事件委托*，这样您就没有多个处理程序监听多个元素。相反，只需监听一个共同祖先上的冒泡点击事件。例如，我设置了一个`#links`父级：

```
<nav id="links">
    <span class="tab1">
        <a class="slider_link" href="#1" rel="welcome">Comics</a>
    </span>
    <span class="tab2">
        <a class="slider_link" href="#2" rel="hatstory">Media</a>
    </span>
    <span class="tab3">
        <a class="slider_link" href="#3" rel="annoyed">Bat News</a>
    </span>
</nav> 
```

现在用于`$.on`绑定委托。当单击其中的任何锚点时`#links`，我们从 delegateTarget 中的任何其他锚点中删除我们的目标类，并将其添加到触发单击事件的链接开始：

```
$("#links").on("click", "a", function (event) {
    $(event.delegateTarget).find("a").removeClass("slider_link_style");
    $(this).addClass("slider_link_style");
    event.preventDefault();
}); 
```

小提琴：http: [//jsfiddle.net/JCzvL/25/](http://jsfiddle.net/JCzvL/25/)

# android - 从本机代码访问 apk 中的压缩文件（从 zip 中读取 zip）

> ID：13827639
> 
> 赞同：0
> 
> 时间：2012-12-11T20:05:37.683
> 
> 标签：android, c++, android-ndk, zip, zlib

**的背景：**

为了使我的应用程序的代码库 (C/C++) 更便携，我想尽量减少使用 android 的原生 AAssetManager 并切换到 libzip 以从 APK 加载资产。我看了一下libzip；将它合并到项目中 - 你瞧 - 我可以使用 libzip 直接从 APK 读取我的文件。

现在，我想混淆我的资产（或者至少让访问它们变得不平凡），所以我想我会将它们打包成一个加密的 zip 存档并将该存档包含在 APK 中（基本上，一个 zip 中的一个 zip ）。

**我的问题：**

*使用本机代码直接从 APK 中访问存档中文件的最简单/最有效的方法是什么？*

我希望有一种与 libzip 类似的方法，我可以简单地指定一个文件名，然后获取一个包含未压缩数据的缓冲区。

我曾尝试使用 libzip 直接从 APK 中打开压缩档案，但我的结果是空的……看来 libzip 只会使用目录打开 zip 文件，而不是从内存中的缓冲区打开（就我有）。

我想 zlib 将是一个明显的选择，但我承认我不知道如何去做。

我还考虑过从 APK 中复制存档，但我想浪费尽可能少的空间（大量资产 == 大存档）。我也想避免以单独下载的形式交付资产。

欢迎有帮助的建议或指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:13:20.820

从您的问题来看，您似乎已经无法访问 APK 中的资产流，所以我会直接跳到这一点：正如您所说，zlib 是一个显而易见的选择。网上有大量的例子来处理内存中的流。例如，[在内存中解压缩： GZIP](http://www.cocoanetics.com/2012/02/decompressing-files-into-memory/)。使用 zlib，您还可以通过 NDK 获得它的好处（例如，您不需要自己构建和链接）。

# objective-c - 将 Objective-C 代码绑定到 C# (Monotouch)。多协议继承

> ID：13827645
> 
> 赞同：0
> 
> 时间：2012-12-11T20:05:52.410
> 
> 标签：objective-c, ios, xamarin.ios

我是 Objective-C 的初学者。所以我使用 C# + Monotouch 编写我的应用程序。现在我需要使用ObjC编写的第三方库TTTAttributedLabel。必须将其代码绑定到 C#。有一些有趣的结构：

```
@protocol TTTAttributedLabel <NSObject>
@property (nonatomic, copy) id text;
@end

@interface TTTAttributedLabel : UILabel <TTTAttributedLabel, UIGestureRecognizerDelegate>
/* some code here */
@end 
```

我很清楚 TTTAttributedLabel 和 UILabel 继承。我是这样做的：

```
[BaseType (typeof (NSObject))]
interface TTTAttributedLabel{
     // code here
}

[BaseType (typeof (UILabel))]
interface UITextField : TTTAttributedLabel{
} 
```

但我不知道如何继承*UIGestureRecognizerDelegate*，因为在 Objective-C 中它是一个协议，但在 Monotouch 中它是一个类。所以我不能从类继承接口。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:39:45.077

在这种情况下，UIGestureRecognizerDelegate 的意思是对象将符合协议，正如您所注意到的，我们将协议映射到阻止它工作的类。

但其核心作用是允许将 TTTAttributedLabel 的实例传递给 UIGestureRecognizer 的 Delegate 属性。

对于这些情况，您可以改用 Wea​​kDelegate，它不会执行 C# 级别的类型检查，并允许您将 TTTAttributedLabel 的实例分配给 UIGestureRecognizer.WeakDelegate 属性。

# css - 现有项目上的 CSS 动画？

> ID：13827648
> 
> 赞同：1
> 
> 时间：2012-12-11T20:06:02.037
> 
> 标签：css, animation

我为我的网站制作了一个主题（未公开），其中涉及 CSS3 动画。下雪了。它真可爱。但是我希望它出现在我现有的项目上。我试过玩 z-index 但这似乎不起作用。该页面临时托管在：[http ://briandempsey.org.uk/mbxt/index.html](http://briandempsey.org.uk/mbxt/index.html)

我不确定这是否可以做到，但我认为（也许错误地可以）

TL;DR：需要雪出现在文本和其他项目上。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:17:33.703

见这里：http: [//jsfiddle.net/YzSS9/](http://jsfiddle.net/YzSS9/)

HTML：（添加一个新元素）

```
<div id="happy-xmas"> 
  <h1>Merry Christmas from everyone at</h1> 
</div>
<div id="flakes"></div> 
```

您的旧`body`定义现在将是薄片，减去背景颜色和相关动画，它们会留在身体上：

```
body{
    background-color: #6b92b9; 
    animation:bg 20s linear infinite;
}

@keyframes bg{
    from,to{background-color:#6b92b9;}
    50% {background-color:#b4cfe0;}
}

#flakes{
    height:100%;
    width:100%;
    top:0;
    position:absolute;
    ...
} 
```

# c# - 如何在不同工作表上的同一个excel文件中导出两个gridviews？

> ID：13827651
> 
> 赞同：1
> 
> 时间：2012-12-11T20:06:16.093
> 
> 标签：c#, .net, excel, gridview

目前我的页面上有两个网格视图。我能够将一个gridview 导出到excel 文件。但是对于第二个 gridview，我希望它在同一个文件的另一个工作表中打开。任何人都可以帮助我开始并告诉我如何去做吗？

这是我的代码的样子：

```
protected void btnExport_Click(object sender, EventArgs e)
{
    GridView gridView = null;
    System.IO.StringWriter stringWrite = null;
    System.Web.UI.HtmlTextWriter htmlWrite = null;
    try
    {
        gridView = new GridView();
        List<string> columns = new List<string>();
        columns.Add("CREATE_AR_YN");
        columns.Add("GL_DEBIT_ACCT");
        columns.Add("ALLOC_METHOD");
        columns.Add("CUST_NAME");
        columns.Add("DEFAULT_PYMT_TERMS");
        columns.Add("AR_BILL_GROUP");

        BoundField bf = null;
        for (int i = 0; i < columns.Count; i++)
        {
            bf = new BoundField();
            bf.DataField = columns[i];
            bf.HeaderText = columns[i];
            bf.HeaderStyle.BackColor = System.Drawing.Color.FromName("#81DAF5");
            gridView.Columns.Add(bf);
            gridView.AutoGenerateColumns = false;
        }

        List<FMAProfile> custList = GetSelectedCustomerProfile();
        gridView.DataSource = custList;
        gridView.DataBind();
        Response.Clear();
        Response.ClearHeaders();
        Response.Cache.SetCacheability(HttpCacheability.Private);
        Response.AddHeader("content-disposition", "attachment;filename=" + "CustomerProfile" + ".xls");
        Response.Charset = "";
        //Response.ContentType = "application/vnd.xls";
        Response.ContentType = "application/vnd.ms-excel";
        //Response.Buffer = false;
        stringWrite = new System.IO.StringWriter();
        htmlWrite = new HtmlTextWriter(stringWrite);
        gridView.RenderControl(htmlWrite);
        Response.Write(stringWrite.ToString());
        Response.End();
    }
    catch (Exception ex)
    {
        if (ex.Message.Trim().IndexOf("Thread was being aborted") == -1)
        {
            Log(ex.ToString());
        }
    }
    finally
    {
        if (gridView != null)
        {
           gridView.Dispose();
           gridView = null;
        }
        if (stringWrite != null)
        {
            stringWrite.Dispose();
        }
        stringWrite = null;
        if (htmlWrite != null)
        {
            htmlWrite.Dispose();
        }
        htmlWrite = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:32:54.740

您不是在导出真正的 XLS，而是基本上是 Excel 可以导入的 HTML……

有关使用示例代码创建 Excel 文件的 HTML 方法的一些深入信息，请参阅[http://www.c-sharpcorner.com/UploadFile/kaushikborah28/79Nick08302007171404PM/79Nick.aspx](http://www.c-sharpcorner.com/UploadFile/kaushikborah28/79Nick08302007171404PM/79Nick.aspx)

[还可以在http://msdn.microsoft.com/en-us/library/Aa155477%28office.10%29.aspx](http://msdn.microsoft.com/en-us/library/Aa155477%28office.10%29.aspx)查看官方文档

我不确定您是否可以在 HTML 中创建多个工作表...

创建真实 Excel 文件的选项：

MS 提供 OpenXML SDK V 2.0（免费） - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)

这可以读写 MS Office 文件（包括 Excel）。

另一种选择见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)

如果您需要更多类似渲染、公式等，那么有不同的免费和商业库，如[ClosedXML](http://closedxml.codeplex.com/)、[EPPlus](http://epplus.codeplex.com/)、[Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)、[SpreadsheetGear](http://www.spreadsheetgear.com/)、[LibXL](http://www.libxl.com/)和[Flexcel](http://www.tmssoftware.com/site/flexcelnet.asp)等。

[注意： ASP.NET 不支持 Office 互操作（这似乎是您的项目内置的内容）。](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)

# java - 如何以相反的顺序获取 char 数组？

> ID：13827654
> 
> 赞同：3
> 
> 时间：2012-12-11T20:06:27.407
> 
> 标签：java, arrays, char

我的作业问题是这样的

> 编写一个程序，使用逆序打印字符数组中的字母
> 
> ```
> void printReverse(char letters[], int size); 
> ```
> 
> 例如，如果数组包含 {'c', 's', 'c', '2', '6', '1'}，则输出应为“162csc”。

试过了，不知道什么意思

```
void printReverse(char letters[], int size); 
```

我这样做了，但是在主方法中调用方法“printReverse”时出现问题

```
import java.util.Arrays;
import java.util.Collections;

public class search {

    public static void main(String[] args) {          

        char[] letters = {'e', 'v', 'o', 'l', '4'};
        printReverse();

    }

    public void printReverse(char[] letters, int size) {

        for (int i = letters.length-1; i >= 0 ; i--) {
        System.out.print(letters[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T20:15:01.023

您可以像这样使用[StringBuilder#reverse()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#reverse%28%29)方法：

```
String reverse = new StringBuilder(new String(letters)).reverse().toString(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T20:20:21.990

我相信你写的是你必须创建的方法的签名。

```
public void printReverse(char[] letters, int size){
   //code here
} 
```

您将不得不迭代数组并向后打印它包含的内容。使用反向“for 循环”遍历“字母”中的每个项目。我会让你自己把这些结合起来，因为这是一项任务。下面是一个 for 循环的例子：

```
for (int i = array.length-1; i >= 0 ; i--){
    System.out.print(array[i]);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-10T05:15:51.457

这大约需要 6 毫秒。它在打印之前“就地”反转 char 数组。

```
public static void reverseString(char[] s) {
    int len = s.length;

    if (len == 0)
        return;

    for (int i=0; i < (len/2); i++)
    {
        char l = s[i];
        s[i] = s[len-i-1];
        s[len-i-1] = l;
    }

    System.out.println(s);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-20T21:28:48.850

`

```
//not only prints the reverse order, but creates new char array with chars in desired order
char[] letters = {'e', 'v', 'o', 'l', '4'};
int i = letters.length - 1, j = 0;
char[] let = new char[letters.length];
while(i >= 0){
     let[j] = letters[i];
     i--;
     j++;
}
for (char c : let){
     System.out.print(c);
} 
```

`

输出：4爱

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T20:09:46.503

`void printReverse(char letters[], int size)`是您必须执行的功能的签名。例如

```
void printReverse(char letters[], int size) {
//your code goes here
} 
```

并使用参数从主窗口调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T21:04:36.317

你的代码是对的，除了主方法和循环中的一些小改动，并且方法必须是静态的。

签名 printReverse(char[] letters, int size) 意味着当你调用它时，你必须传递 char 数组和数组的大小

尝试以下

```
import java.util.Arrays;
import java.util.Collections;

public class search {

    public static void main(String[] args) {          

   char[] letters = {'e', 'v', 'o', 'l', '4'};

   printReverse(letters,5);

}

public static void printReverse(char[] letters, int size){

    for (int i = size-1; i >= 0 ; i--)
    {

     System.out.print(letters[i]);
    }
  }

 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-09T21:20:24.103

```
public void printReverse(char[] word){

reverseWordMaxIndex = word.length -1;

char[] reverseWord = new char(reverseWordMaxIndex + 1)

for ( int i= 0; i < word.length; i++){

reverseWord[reverseWordMaxIndex-i] = word[i];

}

for( int i= 0; i < reverseWord.length; i++){
  System.out.println(reverseWord[i]);
   }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-26T02:16:53.393

这是一个使用递归来尊重字符数组的类。

公共类 ReverseString {

```
 public static void main(String[] args) {
        // TODO Auto-generated method stub

        String str = new String("Hello");
        char[] strcharArray = str.toCharArray();
        printReverse(strcharArray);

    }

    private static void printReverse(char [] str) {
          helper(0, str);
        }
        private static void helper(int index, char [] str) {
          if (str == null || index >= str.length) {
            return;
          }
          helper(index + 1, str);
          System.out.println(str[index]);
        }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-22T16:16:27.637

```
#include<stdio.h>
int main()
  {
int i;
int temp;
int end;
int n=6;
int ar[6]={1, 2,3 , 4, 5, 6};
end=n-1;
printf("%d\n",end );
for(i = 0; i < 6; ++i)
 {
    temp=ar[i];
    ar[i]=ar[end];
    ar[end]=temp;
    end--;
    if(sizeof ar[6]/2==end){
        break;
    }
 } 
 printf("\n");
 for (int i = 0; i < 6; ++i)
 {
    printf("%d",ar[i] );
 }
 return 0;
} 
```

/*可以为任何类型的数组写相同的*/

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-05-22T15:11:29.523

```
import java.util.Scanner;

public class StringReverse {

    static String input;
    void completeReverse(){
        char[] ch = StringReverse.input.toCharArray();
        for(int i =ch.length-1;i>=0;i--){
            System.out.print(ch[i]);
        }
    }
    void partialReverse(){
        String charOfSplit =" ";
        // splitting and creating array on space character.
        String[] split =StringReverse.input.split(charOfSplit);
        //using loop on each index of split characters.
        for(int i=0; i<split.length;i++){
           // System.out.println(split[i]);
            //breaking individual index in char array with different index value.
            char[] indexedValue = split[i].toCharArray();
            for(int j=indexedValue.length-1;j>=0;j--){
                //printing that char array reverse order
                System.out.print(indexedValue[j]);
            }
            // giving spaces for another index value after space given by user.
            System.out.print("  ");
        }
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        StringReverse sr =new StringReverse();
        System.out.print("Enter the String: ");
        //trimming every space before and after the string.
        StringReverse.input = sc.nextLine().trim();
        System.out.print("Complete Reverse: ");
        sr.completeReverse();
        System.out.println();
        System.out.print("Partial Reverse: ");
        sr.partialReverse();
    }
} 
```

# mongodb - Mongodb：每个数组位置的整数数组

> ID：13827656
> 
> 赞同：3
> 
> 时间：2012-12-11T20:06:39.923
> 
> 标签：mongodb

我正在阅读 Mongodb 关于聚合框架和 Mapreduce 的文档，但仍然不知道从哪里开始聚合数组中整数的“列”。Fi 拥有这些文件：

```
[{ "_id" : "A", "agent" : "006", "score" : [ 1, 0, 0 ], "qv" : [ 1, 0, 1, 0, 1 ] },
 { "_id" : "B", "agent" : "006", "score" : [ 0, 1, 0 ], "qv" : [ 1, 0, 1, 0, 1 ] },
 { "_id" : "C", "agent" : "006", "score" : [ 1, 0, 0 ], "qv" : [ 1, 0, 1, 0, 0 ] },
 { "_id" : "D", "agent" : "007", "score" : [ 1, 0, 0 ], "qv" : [ 1, 0, 1, 0, 0 ] }] 
```

预期的结果应该是这样的：

```
[
  {"agent": "006", "score": [2, 1, 0], "qv": [3, 0, 3, 0, 2]},
  {"agent": "007", "score": [1, 0, 0], "qv": [1, 0, 1, 0, 0]}
] 
```

聚合框架是否足以完成这项任务，还是我应该瞄准 Mapreduce？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:04:46.810

我认为您需要为此使用 map reduce，以便编写一个可以访问数组中特定位置的函数。你可以尝试这样的事情：

映射功能：

```
var M = function() { 
    emit( this.agent, { score : this.score, qv : this.qv } )
} 
```

减少功能：

```
var R = function(key, values) {
    var result = { score : [0, 0, 0], qv : [0, 0, 0, 0, 0] };
    values.forEach( function(value) {
        for ( var i = 0; i < value.score.length; i ++ ) {
            result.score[i] += parseInt(value.score[i]);
        }
        for ( var i = 0; i < value.qv.length; i ++ ) {
            result.qv[i] += parseInt(value.qv[i]);
        }
    });
    return result;     
} 
```

然后，您可以在您的集合上运行以下 mapReduce 函数：

```
db.foo.mapReduce( M, R, { out : "resultCollection" } ) 
```

这应该会给您以下期望的结果！

```
{
"_id" : "006",
"value" : {
    "score" : [2, 1, 0],
    "qv" : [ 3, 0, 3, 0, 2 ]
}
}
{
"_id" : "007",
"value" : {
    "score" : [ 1, 0, 0],
    "qv" : [ 1, 0, 1, 0, 0]
} 
```

}

# ruby-on-rails - 如何将救援添加到简单的 uri 解析方法

> ID：13827658
> 
> 赞同：0
> 
> 时间：2012-12-11T20:06:43.383
> 
> 标签：ruby-on-rails, rescue

我有一个从 URL 上传图像的简单方法。

```
def photo_from_url(url)
  if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
    photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
    self.photo = URI.parse(photo_url)
    self.save
  end
end 
```

这在大多数情况下都可以正常工作，但有时会`can't convert URI::Generic into String`在 url 未按预期格式化时返回。在这种情况下，我只想放弃保存照片。我需要在方法中添加什么？

我尝试添加

```
rescue => e                                                      
  error_message = e.message                                      
  response_message = "Unknown error"                             
end 
```

到基于此[帖子](https://stackoverflow.com/questions/11572152/alllow-for-bad-urls-in-in-rails)的方法的末尾，但这会导致 SyntaxError：

```
unexpected keyword_rescue, expecting keyword_end 
```

如何/在哪里正确使用救援方法？目前，该方法经常按原样工作，所以我很高兴它只是跳过任何未格式化的 url，而不是返回错误。感谢您帮助新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:25:40.307

尝试这个：

```
def photo_from_url(url)
  begin
    if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
      photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
      self.photo = URI.parse(photo_url)
      self.save
    end
  rescue => e
    puts "error"
  end
end 
```

# sql - 不同服务器/数据库中表上的 UNPIVOT 失败并出现“与其他列的类型冲突”错误

> ID：13827663
> 
> 赞同：2
> 
> 时间：2012-12-11T20:06:52.887
> 
> 标签：sql, sql-server, tsql, sql-server-2005, sql-server-2008

我正在尝试`UNPIVOT`在不同数据库中的表上运行存储过程中的语句。我可以在`UNPIVOT`本地运行良好，但是当我在不同的数据库/服务器上运行它时，会出现以下错误。

`The type of column "XXX" conflicts with the type of other columns specified in the UNPIVOT list.`

这是我的精简版`UNPIVOT`。

```
CREATE TABLE temp (
  id nvarchar(100),
  F1 nvarchar(100),
  F2 nvarchar(100),
  F3 decimal(5,0)
)

INSERT INTO temp VALUES(N'100', N'111', N'AAA', 123)
INSERT INTO temp VALUES(N'100', N'222', N'BBB', 456)
INSERT INTO temp VALUES(N'100', N'333', N'CCC', 789) 
INSERT INTO temp VALUES(N'100', N'444', N'DDD', 012)
INSERT INTO temp VALUES(N'100', N'555', N'EEE', 345)

SELECT * FROM (   SELECT
    ID,
    CAST(F1 AS NVARCHAR(MAX)) AS F1,--used in order to normalize the data
    CAST(F2 AS NVARCHAR(MAX)) AS F2,--used in order to normalize the data
    CAST(F3 AS NVARCHAR(MAX)) AS F3--used in order to normalize the data
FROM
    TEMP   ) AS T UNPIVOT(FieldValue for FieldName in (   F1, F2, F3   )) AS UNPVT 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/dc712/5)

我确实注意到当我正在使用的表`UNPIVOT`具有`DECIMAL()`字段类型时会发生此错误。

一如既往，任何帮助表示赞赏。

* * *

更新：似乎在远程服务器上创建视图将允许`CAST`正确发生。但为什么？我也尝试过使用`cte`，但没有奏效。我想避免创建视图。希望这不是唯一的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:34:45.480

错误

> “XXX”列的类型与 UNPIVOT 列表中指定的其他列的类型冲突。

非常明显，也是更好的信息之一。它告诉您您的 UNPIVOT 列表包含不同类型的列。这是导致此类错误的示例： [SQL Fiddle](http://www.sqlfiddle.com/#!3/85317/2)

```
SELECT * FROM (
  SELECT
    ID,
    CAST(F1 AS NVARCHAR(MAX)) AS F1,
    CAST(F2 AS NVARCHAR(MAX)) AS F2,
    F3  -- note F3 is a decimal column containing decimal values
  FROM
    TEMP
  ) AS T
UNPIVOT(FieldValue for FieldName in (
  F1, F2, F3  -- F3 type is different from F1/F2
  )) AS UNPVT 
```

在本地查询中，鉴于您在问题 SQL Fiddle***中编写***的查询，它不可能引发此错误，因为您已经将所有列都转换为 NVARCHAR(MAX)。

**但是**，在远程查询中，SQL Server 似乎在编译时使查询失败。它似乎在 CAST 之前预先验证了数据透视列 - 似乎是因为可以在本地和执行流程中的不同点执行 CAST。对此的解决方法似乎是创建一个可以解析远程服务器上的 CAST 的视图。

## 解决方法

您可以使用 FOR XML 强制查询远程解析（在 2005 年测试为最低限度的远程服务器），这样做的好处是`nvarchar(max)`无论如何都将使用提取回来的值以保持一致性。

```
SELECT *
FROM (
    SELECT n.value('ID[1]','nvarchar(max)') ID
          ,n.value('F1[1]','nvarchar(max)') F1
          ,n.value('F2[1]','nvarchar(max)') F2
          ,n.value('F3[1]','nvarchar(max)') F3
    FROM (   
        SELECT (
            SELECT
                ID,
                F1,
                F2,
                F3
            FROM
                [akltrsvrdb\sqllatin].test1.dbo.temp
            FOR XML PATH('a'), type
        ) XmlPacket
    ) x
    cross apply XmlPacket.nodes('/a') n(n)
) T UNPIVOT(FieldValue for FieldName in (   F1, F2, F3   )) AS UNPVT 
```

* * *

[SQLKiwi](https://stackoverflow.com/users/440595/sql-kiwi)发现使用*sql_variant*作为 CAST 目标可以使远程查询工作，如此处的[聊天记录](https://chat.stackexchange.com/transcript/message/7233587#7233587)所示。

```
SELECT
    *
FROM
    (
        SELECT
            [id],
            CONVERT(sql_variant, [F1]) as F1,
            CONVERT(sql_variant, [F2]) as F2,
            CONVERT(sql_variant, [F3]) as F3,
            CONVERT(sql_variant, CAST([D20] as nvarchar(4000))) as F20--in case the source field is text (Make sure that 4000 is enough characters!)
        FROM
            [server].[database].[scheme].[table]
    ) as t
UNPIVOT(FieldValue for FieldName in ([F1],[F2],[F3],[D20])) as unpvt 
```

# html - HTML标签上的背景位置不起作用

> ID：13827664
> 
> 赞同：3
> 
> 时间：2012-12-11T20:07:02.030
> 
> 标签：html, css, xhtml, background, position

我正在关注关于网页设计 tutsplus 的一个教程，最后一页： [http ://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/demo_css_ribbon.html](http://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/demo_css_ribbon.html)

**我已经完成了所有事情，但是html**样式出现了一个问题，你可以看到我已经包含了 height:100% ，但是在原始教程中没有那条线，如果我删除那条线，它就会崩溃，但在原始教程中它是完美，为什么？

而且现在我已经完成了 height:100% 然后你可以在底部滚动并且可以看到底部有一个边距，我希望该图像贴在页面的最底部。

请下载图片，以便您可以尝试此代码，以下是图片链接：

[http://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/bottom_bg.jpg](http://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/bottom_bg.jpg)

[http://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/top_bg.png](http://webdesigntutsplus.s3.amazonaws.com/126_RibbonNavTutorial/code/top_bg.png)

**CodePen** = [http://codepen.io/joe/full/xruKk](http://codepen.io/joe/full/xruKk)

**jsFiddle** = [http://jsfiddle.net/rssatnam/YekQe/embedded/result/](http://jsfiddle.net/rssatnam/YekQe/embedded/result/)

代码 ：

```
<html>
<head>
<style type="text/css">
html{
  background:#77d5fb url('bottom_bg.jpg') bottom center no-repeat;
  height:100%;
}
body{
  background:transparent url('top_bg.png') top center no-repeat;
  height:100%;
  width:100%;
  margin:0 0;
}
#container{
  width:900px;
  margin:0 auto;
}
#navBar{
  height:62px;
  background-color:#e5592e;
  margin:3em 0;
  position:relative;
  -webkit-box-shadow:0px 0px 4px rgba(0,0,0,0.55);
  box-shadow:0px 0px 4px rgba(0,0,0,0.55);
  -moz-box-shadow:0px 0px 4px rgba(0,0,0,0.55);
  -o-box-shadow:0px 0px 4px rgba(0,0,0,0.55);
  border-radius:3px;
  z-index:500;
}
#menu li{
  list-style-type:none;
  display:block;
  float:left;
  margin:1em 0.8em;
}
#menu li a{
  display:block;
  text-decoration:none;
  color:#F0F0F0;
  font-size:1.6em;
  margin:0;
  line-height:28px;
  text-shadow:0 2px 1px rgba(0, 0,0, 0.5);
}
#menu li a:hover{
  /*transition:margin-top 0.3s;
  -webkit-transition:margin-top 0.3s;*/
  margin-top:2px;
}
#lt-corner{
  width:0px;
  height:0px;
  border:50px solid;
  border-color:#d9542b transparent transparent;
  position:relative;
  float:left;
  top:1px;
  left:-50px;
}
#lb-corner{
  border:50px solid;
  border-color:transparent transparent #d9542b;
  width:0px;
  height:0px;
  position:relative;
  float:left;
  top:-40px;
  left:-150px;
}
#rt-corner{
  width:0px;
  height:0px;
  border:50px solid;
  border-color:#d9542b transparent transparent;
  position:relative;
  float:right;
  top:-107px;
  right:-45px;
}
#rb-corner{
  border:50px solid;
  border-color:transparent transparent #d9542b;
  width:0px;
  height:0px;
  position:relative;
  float:right;
  top:-149px;
  right:-145px;
}
</style>
</head>

<body>
    <div id="container">
      <div id="lt-corner"></div>
      <div id="lb-corner"></div>
        <div id="navBar">
            <ul id="menu">
                <li><a href="#">&#10029; Home</a></li>
                <li><a href="#">&#10029; About</a></li>
                <li><a href="#">&#10029; Services</a></li>
                <li><a href="#">&#10029; Contact</a></li>
            </ul>
        </div>
        <div id="rt-corner"></div>
      <div id="rb-corner"></div>
    </div>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:51:18.260

这是一个工作示例：[JSbin](http://jsbin.com/welcome/72867/ "JSbin - 编辑看看它是否符合你的期望")。确保编辑和玩弄它。

添加`margin:0`和`padding:0`到`html`&`body`元素。要删除底部`margin`，只需`height:100%`从`body`元素中删除。所以这是基本的CSS：

```
html,body{ 
  margin:0;
  padding:0;
}

html{
  background:#77d5fb url('http://i.imgur.com/xbMWo.jpg') bottom center no-repeat; 
  height:100%;
  width:100%;
}

body{
  background:transparent url('http://i.imgur.com/2NPJi.png') top center no-repeat; 
  width:100%;
} 
```

旁注：如果它解决了您的问题，请务必标记为答案。

# xcode - 为什么调试和发布的默认编译器不同？

> ID：13827665
> 
> 赞同：0
> 
> 时间：2012-12-11T20:07:03.757
> 
> 标签：xcode, compiler-construction

我正在使用 Xcode 4.5.2。我在构建设置中看到调试编译器显示“默认编译器（Apple LLVM 编译器 4.1）”，而发布它是“LLVM GCC 4.2”。为什么要使用 4.1 进行调试，使用 4.2 进行发布？

我不认为我自己改变了它，但我想我可能在一段时间前改变了它并且不记得了。如果我确实更改了它，有人知道哪个更适合发布吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:10:42.917

LLVM-GCC 4.2 不是 LLVM 4.2。它是带有 LLVM 后端的 GCC 4.2 前端。它是 Clang 开发时使用的中间编译器。而且我不相信这是默认设置；我想你只是在你的项目中设置了那个。Xcode 4.5.2 中的默认值似乎是 LLVM 4.1，Debug 和 Release 之间没有区别。

另请注意，LLVM-GCC 将在不久的将来完全消失（可能是 Xcode 的下一个主要版本）。

# python - 这个（matplotlib）错误信息是什么意思？

> ID：13827670
> 
> 赞同：0
> 
> 时间：2012-12-11T20:07:35.757
> 
> 标签：python, numpy, matplotlib

显示是模块：

```
import matplotlib
matplotlib.use('TkAgg')   #TkAgg is quite slow but should work on all platforms.

import time
import numpy
import matplotlib.pyplot as plt  

def display_2d_array(arr):
    '''Display a square 2D numpy array as a greyscale image.'''
    assert len(arr.shape) == 2 and arr.shape[0] == arr.shape[1]
    plt.ion()
    plt.clf()
    plt.imshow(arr,origin="lower",extent=[0,arr.shape[0],0,arr.shape[0]])
   plt.gray()
   plt.draw()
   raw_input('Hit enter to continue.') 
```

但是当我在模块中调用它时，我得到：

```
File "/Users/tomkimpson/display.py", line 8, in <module>
import matplotlib.pyplot as plt  
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site                  packages/matplotlib/pyplot.py", line 26, in <module>
from matplotlib.figure import Figure, figaspect
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-  packages/matplotlib/figure.py", line 24, in <module>
import matplotlib.artist as martist
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 7, in <module>
from transforms import Bbox, IdentityTransform, TransformedBbox, \
 File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/transforms.py", line 35, in <module>
from matplotlib._path import (affine_transform, count_bboxes_overlapping_bbox,
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-  packages/matplotlib/_path.so, 2): no suitable image found.  Did find:
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-   packages/matplotlib/_path.so: no matching architecture in universal wrapper 
```

有人知道这意味着什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:25:52.313

看起来你是在 OS X 上运行这个。看看这个[这个问题](https://stackoverflow.com/questions/7157330/problem-importing-matplotlib-mlab-and-pyplot-in-python-2-7-on-mac-osx-10-6)，另一个 OS X 用户有同样的错误。您的 matplotlib 安装可能已损坏。有问题的标记答案链接[到此页面](http://telliott99.blogspot.com/2011/07/matplotlib-on-os-x-lion-revised.html)，其中详细说明了如何在 OS X 上安装 matplotlib。

# .net - Inherit SortedDictionary - 这是好的编程习惯吗？

> ID：13827671
> 
> 赞同：4
> 
> 时间：2012-12-11T20:07:38.450
> 
> 标签：.net, vb.net, oop

例如，假设我有大量关于数据库中大量日期的一组餐厅的数据，我需要分析/输出给用户。

因此，在我的代码中，我有一个自定义类，其中包含每个日期的每个餐厅的数据 - 例如：

```
Public Class DateData
    Public Property Var1 As Double = 0
    Public Property Var2 As Double = 0
    Public Property Var3 As Double = 0
    Public Property Var4 As Double = 0

    Public Sub Sub1()
      ....
    End Sub

   ... etc ....
End Class 
```

而且由于我得到了每个日期的这些数据（并且由于日期顺序对我的计算很重要），我也设置了以下类（大部分工作/计算完成的地方）：

```
Public Class RestaurantData
    Inherits SortedDictionary(Of Date, DateData)

   Public Property Name As String
   Public Property RestaurantLevelData1 As Double = 0
   Public Property RestaurantLevelData2 As Double = 0

   Public Sub New(ByVal strName As String, ByVal DatesList As List(Of Date))
       _Name = strName
       For Each daDate As Date In DatesList
           Me.Add(daDate)
       Next
   End Sub

   Public Overloads Sub Add(ByVal daDate As Date)
        MyBase.Add(daDate, New DateData)
   End Sub

   Public Sub Sub1()
       For i As Integer = 0 To Me.Keys.Count - 1
           Dim daDate As Date = Me.Keys(i)
           Me(daDate).Sub1()
           .... etc ....
       Next
   End Sub

   ... etc ....
End Class 
```

最后，由于这是针对大量餐厅的，所以我有一个类在餐厅级别上保存此字典 - 例如：

```
Public Class RestaurantsDict
    Inherits Dictionary(Of String, RestaurantData)

   Public Overloads Sub Add(ByVal strName As String, ByVal Dates As List(Of Date))
       MyBase.Add(strName, New RestaurantData(strName, Dates))
   End Sub
End Class 
```

* * *

好的，既然我已经设置好了，我有两个主要问题：

1.  这是设置它的好方法吗？我的原始代码由几十个组成，`Dictionary(Of String, SortedDictionary(Of Date, Double))` 但我是一个相当新手的程序员，很想知道是否有更有效的架构来实现我想要实现的目标。

2.  我目前设置它的方式很难调试 - 例如，`Count`我的属性`RestaurantData`抛出 type 的异常`System.TypeLoadException`。

总的来说，这个解决方案运行良好，但我想从中学习如何成为一个更好的 .Net 和 OOP 程序员。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:48:35.353

这基本上只是意见，所以它不太适合这个网站，但这是一个很好的问题。

简单的回答是，一点毛病都没有，但肯定没必要，值不值得就看情况了。例如，通常没有理由使用除`Integer`, `String`, 之外的任何东西或`Guid`表示某种 ID。但是，如果担心有人很容易混淆，例如，UserId 和 EmployeeId，那么为每个人创建自己的特定类型可能是值得的，这样您就不会意外传递错误的类型。但通常来说，您不想添加额外的混乱层。

对于泛型集合，我通常会说没有理由这样做，但是当你有列表列表时，我可以看到尝试简化它的愿望，如果没有别的只是为了节省冗长的语法类型名称。

当您考虑到这一点时，如果不存在泛型（例如在 .NET 1.0 中），您将*不得不*像这样定义自己的自定义类型，很明显泛型只是为了方便。因此，如果只使用 a 更方便`Dictionary(Of String, SortedDictionary(Of Date, Double))`，那么就这样做，但如果从中派生自己的类更方便，那就这样做。

# linq - 如何在父子表上设置where条件

> ID：13827672
> 
> 赞同：2
> 
> 时间：2012-12-11T20:07:38.327
> 
> 标签：linq, linq-to-sql, linq-to-entities

在下面的查询中，我想通过其 id 选择人员，并且我只想包括活动地址。我该如何编写该查询？我不确定我写的是否正确

请注意，`GetQuery()`返回`IQueryable`

```
var person = repositoryProvider.Repository.GetQuery<Person>()
    .Where(a => a.PersonID == 1234 && a.Addresses.Any(x=>x.IsActive))
    .Include(a => a.Addresses)
    .Include(a => a.Employer)                   
    .SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:51:54.790

根据我的阅读，您的查询仅在具有至少一个活动地址的情况下才获得人 1234。但是，它将包括与人员 1234 相关的所有地址。例如，如果人员 1234 有一个活动地址和五个非活动地址，您将获得人员 1234 的详细信息，以及它的六个总地址，而不仅仅是活动地址。

出于您的目的，我认为子查询可以。

```
var person = repositoryProvider.Repository.GetQuery<Person>()
             .Where (a => a.PersonID ==1234)
             .Include(a => a.Address)
             .Include(a => a.Employer)
             .Select (p => new Person { Id = p.Id,  // <-- set the person's properties that you need using the person details that you have extracted.
                      FirstName = p.FirstName,
                      Employer = p.Employer.ToList()
                      Addresses = p.Addresses.Where(a => a.IsActive == true) // <-- transform the resulting entity such that it will only return active addresses
                      }).FirstOrDefault(); 
```

另一种可能更容易阅读的方法是将其分为两部分。第一部分将提取人员详细信息：

```
var person = repositoryProvider.Repository.GetQuery<Person>()
             .Where (a => a.PersonID ==1234)
             .Include(a => a.Addresses)
             .Include(a => a.Employer)
             .Select (p => p); 
```

然后第二部分是将人的地址限制为仅活动地址：

```
person.Addresses = person.Addresses.Where (a => a.IsActive == true).ToList(); 
```

# android - 如何将参数传递给 AsyncTask (Ksoap2)

> ID：13827677
> 
> 赞同：0
> 
> 时间：2012-12-11T20:07:50.417
> 
> 标签：android, android-asynctask, android-ksoap2

大家好，我想将变量传递给 AsyncTask

我有这个变量

```
private static String NAMESPACE = "aaa";
private static String METHOD_NAME = "bbb";
private static String SOAP_ACTION =  NAMESPACE + METHOD_NAME ;
private static String URL = "ccc"; 
```

我有这个任务

```
 public class Login extends AsyncTask<Void, Void, String>
    {
    ProgressDialog progress;
String response = "";
    private ProgressDialog pDialog;
public void onPreExecute() 
  {
    super.onPreExecute();
    pDialog = new ProgressDialog(MainActivity.this);
    pDialog.setMessage("Please Wait");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
  }
    @Override
protected String doInBackground(Void... arg0)       {
         final SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
         request.addProperty("username", user_name);
         request.addProperty("userpass", user_pass);
         final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;
         try 
            {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    androidHttpTransport.call(SOAP_ACTION, envelope);                    
                    SoapPrimitive result = (SoapPrimitive) envelope.getResponse();          
                    response = result.toString();
            }
         catch (IOException e) 
            {
             response = "Error In The Operation(1) !!\n Check Internet Connection And TRY AGAIN.";
            }
         catch (Exception e) 
            {
             response = "Error In The Operation(2) !!\n Check Internet Connection And TRY AGAIN.";
            } 
    return response;
    }
@Override
public void onPostExecute(String res)
{
            if(!(res.equalsIgnoreCase("")))
            {
                     if (res.toString().contains(",") == true)
                     {
                   String[] separated = res.split(",");
                   tv.setText(separated[1]);
                   return;
                     }

                 if(res.toString().equals("1"))
                 {
                     res = "Wrong User name OR password ,, TRY AGAIN ..";
                     tv.setText(res);
                     pDialog.dismiss();
                     return;
                 }
                 if(res.toString().equals("2"))
                 {
                     res = "Your Account Is temporarily Blocked ,, Please Call The Admin";
                     tv.setText(res);
                     pDialog.dismiss();
                     return;
                 }
                 if(res.toString().equals("3"))
                 {
                     res = "Error While Retrieve S Information ,, Try Again Later .";
                     tv.setText(res);
                     pDialog.dismiss();
                     return;
                 } 
                tv.setText(res);
                pDialog.dismiss();
            }
}
    } 
```

我需要何时执行此任务

调用它并传递上面的变量

像

```
new Login().execute(); 
```

做了

```
new Login().execute(URL,NAMESPACE,METHOD,USERNAME,USERPASS); 
```

用 Knolledge 这个任务返回一个字符串 :)

并且**doInBackground**必须具有 user_name 和 user_pass 的值需要通过执行调用传递它..

问候 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:25:11.603

为什么不为 Login 类创建一个构造函数，如下所示？在我的例子中，我将一个 Activity 传递给我的 AsyncTask，以便在完成后调用回调函数，但在你的例子中，你也可以传递一个字符串数组。

在下面的这种情况下，args 数组被传递给类构造函数，而 params 数组被传递给 doInBackground 函数。MainActivity 被传递给 AsyncTask 以便在任务完成后可以在 MainActivity 中调用 taskDone 回调。

```
public class Login extends AsyncTask<String, Void, String>
{
    private MainActivity activity;

    //These private strings are only needed if you require them
    //outside of the doInBackground function.... 
    //If not, just use the params argument of doInBackground by itself
    private String METHODNAME,
    private String NAMESPACE;
    private String SOAPACTION;
    private String USER_NAME;
    private String USER_PASS;

    public Login(String[] args, MainActivity activity) {
        this.NAMESPACE= args[0];
        this.METHODNAME = args[1];
        this.SOAPACTION = args[2];
        this.USER_NAME = args[3];
        this.USER_PASS= args[4];

        this.activity = activity;
    }
    @Override
    protected Void doInBackground(String... params) {
        //Again, use either params local to this function
        //or args local to the entire function... 
        //both would be redundant
        String _NAMESPACE = params[0];
        String _METHODNAME = params[1];
        String _SOAPACTION = params[2];
        String _USER_NAME = params[3];
        String _USER_PASS= params[4];

        //Do background stuff
    }

    protected void onPostExecute() {
        //dismiss progress dialog if needed
        //Callback function in MainActivity to indicate task is done
        activity.taskDone("some string");
    }
} 
```

MainActivity.java

```
private String[] args= {"mynamespace", "mymethods", "mysoap", "myuser", "mypass"}; //to pass to constructor
private String[] params= {"mynamespace", "mymethods", "mysoap", "myuser", "mypass"}; //to pass to doInBackground

//Pass your args array and the current activity to the AsyncTask
new Login(args, MainActivity.this).execute(params);

//Callback for AsyncTask to call when its completed
public void taskDone(String returnVal) {
    //Do stuff once data has been loaded
    returnText = returnVal;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:18:37.197

让类 Login 扩展`AsyncTask<String, Void,String>`并更改`doInBackground(Void... params)`为`doInBackground(String... params)`. 现在您可以按照想要的方式执行任务`new Login().execute(URL,NAMESPACE,METHOD,USERNAME,USERPASS);`，并通过 params[] 数组访问给定的参数。这意味着您的示例：params[0] == URL、params[1] == NAMESPACE 等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:19:05.793

首先你需要改变

`public class Login extends AsyncTask<Void, Void, String>`

到

`public class Login extends AsyncTask<String, Void, String>`

和改变

`doInBackground(Void...`

到

`doInBackground(String...`

**[这是一些非常有用的文档](http://developer.android.com/reference/android/os/AsyncTask.html)**。如果您仍然遇到问题，请更具体地说明什么是有效的或无效的。

> 异步任务使用的三种类型如下：
> 
> Params，执行时发送给任务的参数类型。
> 
> 进度，在后台计算期间发布的进度单元的类型。
> 
> Result，后台计算结果的类型。

这些是 中的参数`<String, Void, String>`。第一个 `String`是正在传递的内容，这就是为什么`doInBackground()`你有`String...`那个指示和正在传递的字符串数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T20:44:17.673

您可以在执行中传递任意数量的参数，因为 doInbackground(Params... params) （将其视为 Params[] 参数）只要它们属于同一类型，就可以接受任意数量的参数。

但是如果您的参数是不同类型的（不是您的情况），您需要将它们作为 asynctask 类的属性，并通过 asynctask 构造函数将它们的值传递为`new login(type1 attr1, type2 attr2).execute(params)` ：

# c++ - GetInput() SFML 的替代品？

> ID：13827681
> 
> 赞同：1
> 
> 时间：2012-12-11T20:08:10.877
> 
> 标签：c++, sfml

我打算用

```
GetInput() 
```

对于这段代码，但我必须使用不同的东西。pollEvent 给了我这些错误：

```
error C2664: 'sf::Window::pollEvent' : cannot convert parameter 1 from 'int' to 'sf::Event &'
error C2664: 'sf::Window::pollEvent' : cannot convert parameter 1 from 'int' to 'sf::Event &' 
```

代码是：

```
int x = camera->GetPosition().x + window->pollEvent(sf::Mouse::getPosition().x);
int y = camera->GetPosition().y + window->pollEvent(sf::Mouse::getPosition().y); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:16:07.523

[`sf::Window::pollEvent()`](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Window.php#a338e996585faf82e93069858e3b531b7)接受 type 的参数`Event& event`，但您试图传递`sf::Mouse::getPosition().x`/ `y`。我完全不知道你为什么要打电话`window->pollEvent()`，而且从你想要做的事情来看，你可以删除函数调用并直接添加`sf::Mouse::getPosition().x`/ `y`。

**编辑：**根据您的评论，您似乎想要更像这样的东西：

```
sf::Event event;
while (window->pollEvent(event)) // Be sure to put this in your main event loop
{
    if (event.type == sf::Event::MouseButtonPressed)
    {
        int x = camera->GetPosition().x + event.mouseButton.x;
        // ...
    }
} 
```

# java - 如何在 Spring MVC 展示中使用 JSON 处理 HTTP 请求？一些需要理解的问题

> ID：13827689
> 
> 赞同：1
> 
> 时间：2012-12-11T20:08:39.390
> 
> 标签：java, json, spring, spring-mvc, httprequest

在此期间，我正在研究 Spring MVC 展示示例可下载表单 STS 仪表板。

我对某些类型的 rmaping 有一些疑问（显示在展示的请求映射部分）。

在 home.jsp 视图中，我有这两个链接：

```
<li>
<a id="byProducesAcceptJson" class="writeJsonLink" 
        href="<c:url value="/mapping/produces" />">
        By produces via Accept=application/json</a>
</li>

 <li>
    <a id="byProducesJsonExt" class="writeJsonLink" 
       href="<c:url value="/mapping/produces.json" />">By produces via ".json"</a>
 </li> 
```

第一个链接向 URL 生成 HTTP 请求：**“/mapping/produces”** 第二个链接向URL 生成 HTTP 请求：“/mapping/produces.json **”**

**与writeJsonLink**类相关，我有以下简单的 Jquery 回调函数：

```
$("a.writeJsonLink").click(function() {

    var link = $(this);                     // Variabile che si riferisce all'elemento del DOM che ha scatenato l'evento click (il link clickato) 

    // Esegue la chiamata ajax 
    $.ajax({ 
        url: this.href,                     // Indirizzo verso cui è indirizzata la richiesta           
        beforeSend: function(req) {         // Prima di inviare l'HTTP Request esegui la funzione passandogli il parametro req 
            if (!this.url.match(/\.json$/)) {                               // Se l'url termina con .json 
                req.setRequestHeader("Accept", "application/json");         // Aggiunge alla HTTP Request l'header Accept: application/json 
            }
        },
        success: function(json) {
            MvcUtil.showSuccessResponse(JSON.stringify(json), link);
        },
        error: function(xhr) {
            MvcUtil.showErrorResponse(xhr.responseText, link);
        }});
    return false;
}); 
```

这个函数的作用对我来说很清楚：**只需执行一个 AJAX 调用**，然后在发送调用之前检查 URL 是否以 .json 结尾

好的，在我的控制器类中，我有以下方法可以处理以前的两个 HTTP 请求：

```
@RequestMapping(value="/mapping/produces", method=RequestMethod.GET,
 produces=MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody JavaBean byProducesJson() {
    System.out.println("Dentro byProducesJson()");
    return new JavaBean();
} 
```

这种方法的行为对我来说很清楚：

**此方法处理对 URL“/mapping/produces”的 HTTP GET 请求，并且 * *produces****元素指定该方法将不接受名为 Accept 与指定 MediaType 不兼容的标头的请求，并且该方法生成一个具有 JSON 格式的新对象放在 HTTP 响应的正文字段中**

新的 JavaBean 对象仅包含两个初始化变量和 getter\setter 方法：

```
public class JavaBean {

private String foo = "bar";
private String fruit = "apple";

    // Getter & Setter Method 
```

好的...所以使用这个变量值创建了一个新的 JavaBean 对象，并且这个值存储在一个 JSON 对象中，该对象被放置在对浏览器的 HTTP 响应中。

单击两个链接，在浏览器中出现相同的输出，这个：**{“foo”：“bar”，“fruit”：“apple”}**

现在我对此有些怀疑：

1.  第一个链接生成一个 HTTP 请求：**/mapping/produces**

    第二个链接生成一个 HTTP 请求：**/mapping/produces.json**

    我的方法处理对具有以下形式的 URL 的 HTTP 请求：“/mapping/produces”，为什么此方法还处理以 .json 结尾的第二种类型的 HTTP 请求？

2.  第一个 HTTP 请求不以 .json 扩展名结尾，**因此**，执行之前的 Jquery 代码时，我没有在**if 正文**中输入，因此未设置以下标头：( **"Accept", "application/json")**对于我的 HTTP 请求。

    好的，我的方法的@RequestMapping 注释包含 **produce=MediaType.APPLICATION_JSON_VALUE**元素。据我了解阅读文档，此方法**只有在其标头中有一个包含“Accept”，“application/json”作为值的 Accept 标头时才**必须处理 HTTP 请求。

    这个 HTTP 请求不包含这个头，为什么它是由我的方法处理的？

3.  与 2 种 HTTP 请求有什么区别？以同样的方式处理？为什么？

非常感谢

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T22:58:53.493

我认为您正在看到Spring的*内容协商效果。*HTTP 本身仅提供一种方法来指示响应所需的内容类型：`Accept`标头。Spring 通过内容协商 bean 提供了两种附加方式。它可以将 URI 后缀（`.json`在这种情况下）解释为对特定内容类型的请求。bean 在传递控制器类之前去掉后缀。

# php - 文件过期同页表格

> ID：13827694
> 
> 赞同：0
> 
> 时间：2012-12-11T20:09:05.753
> 
> 标签：php

我有`request.php`一个表格，它也处理到同一页面。如果用户未登录/未注册，则已处理的`request.php`.

请求.php

```
 if(isset($_POST['submit'])) {
    //post variables
    //sign up form if not signed in
    } 

    //form 
```

注册表单在 上处理`register.php`。所以`request.php->request.php(process)->register.php`。如果用户注册不成功`register.php`并按下后退按钮，我会得到`document expired`. 我该如何解决这个问题？它应该只显示带有表单的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:14:58.923

只需输入一个`header('location:request.php');`如果用户注册失败`request.php`

而且，PHP 本身会做带你回来的工作。

也许是这样的..

```
if(isset($_POST['submit'])){

  if(isset($_POST['username']) && !empty($_POST['username'])) {

   // authentication code goes here
   } // if username is empty, then.. `header('location:request.php')` // this means go back.

} else { echo " enter user id, to log in";} 
```

# javascript - 将 json 文件名作为参数传递给外部 js 文件

> ID：13827696
> 
> 赞同：0
> 
> 时间：2012-12-11T20:09:11.293
> 
> 标签：javascript, jquery, json

我有这个函数，我正在调用它来检索一些 JSON 数据并使用它来填充我页面的各个部分。js 是一个单独的 JS 文件。

```
$(document).ready(function(){
$.getJSON('data.json', function(data) {

    var pg_title=data.metadata.title;
    $(document).ready(function (){
        document.title = pg_title;
        document.getElementById("page_title").innerHTML=pg_title;
    });

    for (var i in data.sections) {
        var section_title=data.sections[i].title;
        var section_content=data.sections[i].content;
        var section_id=data.sections[i].title;
            var lastChar = section_id.indexOf(' ');
        section_id = section_id.slice(0,lastChar).toLowerCase();
        document.getElementById("sections").innerHTML+="<h2 id='" + section_id + "'>" + section_title + "</h2>" + "<p>" + section_content + "</p>";
    }

});
}); 
```

我从我的 HTML 中调用它，如下所示：

```
<script src="/design-library/js/getJSON.js" type="text/javascript"></script> 
```

如何编辑设置以便我可以 (a) 使用成对的文件名（例如cabinet.html 和cabinet.json）或(b) 将json 文件名作为HTML 文件中的参数传递给函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:14:09.190

您可以将代码包装在一个函数中，如下所示：

```
function SomeFunctionName(jsonName)
{
    $.getJSON(jsonName, function(data) {

        var pg_title=data.metadata.title;
        $(document).ready(function (){
            document.title = pg_title;
            document.getElementById("page_title").innerHTML=pg_title;
        });

        for (var i in data.sections) {
            var section_title=data.sections[i].title;
            var section_content=data.sections[i].content;
            var section_id=data.sections[i].title;
                var lastChar = section_id.indexOf(' ');
            section_id = section_id.slice(0,lastChar).toLowerCase();
            document.getElementById("sections").innerHTML+="<h2 id='" + section_id + "'>" + section_title + "</h2>" + "<p>" + section_content + "</p>";
        }

    });
} 
```

并从您的 html 中调用它，如下所示：

```
 <script type="text/javascript"> 

 $(document).ready(function(){

    SomeFunctionName('data.json');

    });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:24:33.520

假设您的页面网址是`http://path/cabinet.html`

在您的脚本中，您可以使用正则表达式获取页面名称：

```
var pageName = /\/(.+)\.html/.exec(window.location.href)[1]; 
```

（将返回 pageName="cabinet"）

然后您可以将页面名称传递给您的函数：

```
$.getJSON(pageName+'.json', function(data) {... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:50:08.750

根据 Christophe 的反馈，以这个结束。非常感谢你。现在——我无法摆脱第二个 document.ready (.getJSON)，因为如果我这样做，该函数将不会执行。

```
$(document).ready(function () {
"use strict";
var pageName;
if (!pageName) {
    pageName = "index";
} else {
    pageName = /\/(.+)\.html/.exec(window.location.href);
}

$.getJSON(pageName + '.json', function (data) {
    var pg_title;
    pg_title = data.metadata.title;
    $(document).ready(function() {
        document.title = pg_title;
        document.getElementById("page_title").innerHTML = pg_title;
    });

    for (i in data.sections) {
        var section_title, section_content, section_id, lastChar, i;
        section_title = data.sections[i].title;
        section_content = data.sections[i].content;
        section_id = data.sections[i].title;
        lastChar = section_id.indexOf(' ');
        section_id = section_id.slice(0, lastChar).toLowerCase();
        document.getElementById("sections").innerHTML += "<h2 id='" + section_id + "'>" + section_title + "</h2>" + "<p>" + section_content + "</p>";
    }
});
}); 
```

# sharepoint - 在 Sharepoint 2007 自定义操作中获取 UrlToken 中的 SiteUrl

> ID：13827697
> 
> 赞同：0
> 
> 时间：2012-12-11T20:09:13.533
> 
> 标签：sharepoint

在自定义操作*UrlAction*元素中，我需要获取*SiteUrl*

正如许多资料中所述，我可以通过插入*{SiteUrl}*来实现这一点。所以我看起来像这样：

网站网址是：`http://sharepoint-server/sites/xyz`

```
<UrlAction Url="{SiteUrl}/Lists/MyList/AllItems.aspx?RootFolder={SiteUrl}%2fLists%2fMyList%2fMyFolder&FilterField1=SomeFilterField&FilterValue1=SomeFilterValue"> 
```

不幸的是，由于某种原因，这不起作用。当我手动插入 SiteUrl 时，它按预期工作。所以看起来 SiteUrl 没有被正确替换。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:05:08.397

似乎至少 {SiteUrl} 令牌只被替换了一次。

由于 ~site 也被 web url 取代，我使用了两个标签：

```
<UrlAction Url="~site/Lists/MyList/AllItems.aspx?RootFolder={SiteUrl}%2fLists%2fMyList%2fMyFolder&FilterField1=SomeFilterField&FilterValue1=SomeFilterValue"> 
```

这样它就可以工作了！

# asp.net - 类型或命名空间 '' 不存在于类或命名空间 '' 错误与 Web 参考

> ID：13827699
> 
> 赞同：1
> 
> 时间：2012-12-11T20:09:13.437
> 
> 标签：asp.net, namespaces, visual-studio-2012, web-reference

我有一个项目收到“类或命名空间''中不存在类型或命名空间'”错误。我在这里看到了很多无法解决我的问题的解决方案。

该站点是通过 TFS 下载的，我使用的是 VS 2012。我已将该站点配置为通过 IIS 7.5 在本地运行。项目构建的目标框架为 4.0。

在浏览器中加载站点会导致您的标准 500 - 内部服务器错误。我检查了事件查看器，这是错误以及堆栈跟踪：

> c:\inetpub\wwwroot\Jet_Distrib_US\App_Code\CSCode\WM_WebServiceHelper.cs(40)：错误 CS0234：命名空间“WM_JetService”中不存在类型或命名空间名称“WM_Get_SoldToRequest”（您是否缺少程序集引用？） System.Web.Compilation.AssemblyBuilder.Compile() 在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild() 在 System.Web.Compilation.CodeDirectoryCompiler.GetCodeDirectoryAssembly(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludeSubdirectories, Boolean isDirectoryAllowed) 在System.Web.Compilation.BuildManager.CompileCodeDirectories() 在 System.Web 的 System.Web.Compilation.BuildManager.CompileCodeDirectory(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludeSubdirectories)。Compilation.BuildManager.EnsureTopLevelFilesCompiled()
> 在 System.Web.Compilation.BuildManager.CallAppInitializeMethod() 在 System.Web.Hosting.HostingEnvironment.Initialize（ApplicationManager appManager，IApplicationHost appHost，IConfigMapPathFactory configMapPathFactory，HostingEnvironmentParameters hostingParameters，PolicyLevel policyLevel，异常 appDomainCreationException）

WM_JetService 设置在项目的 Web_References 文件夹中。

作为我在 WM_WebServiceHelper.cs 中看到的错误之一的示例：

使用 (WM_JetService.JetServiceSoapClient WMService = new WM_JetService.JetServiceSoapClient()) { WM_JetService. **WM_Get_SoldToRequest**请求 = 新的 WM_JetService。**WM_Get_SoldToRequest** (); ... }

（我在“WM_Get_SoldToRequest”下方看到红色错误指示器）。

我可以创建一个 WM_JetService 实例，但由于某种原因，我无法引用它的任何方法或属性。

此代码适用于本地开发它的客户端。我无法让它在我的本地机器上运行。此外，当我安装 VS2012 时，它会将我的框架更新到 4.5。不确定这是否与此有关，但我已确保我的 AppPool 设置为 4.0，并且该项目的 targetFramework 为 4.0。

任何帮助将不胜感激。

# objective-c - 在目标c if语句中将字母添加到字符串

> ID：13827704
> 
> 赞同：0
> 
> 时间：2012-12-11T20:09:30.247
> 
> 标签：objective-c, xcode, nsmutablestring

您好，下面是我正在使用的代码

```
currentCardDisplayed = [NSMutableString stringWithFormat:@"%@.png", [[cardsShuffled objectAtIndex:currentCard-1] substringToIndex:[[cardsShuffled objectAtIndex:currentCard-1] length]-1]];

NSString *rule;

if([[currentCardDisplayed stringByAppendingString:@"e"] isEqualToString:currentCardName]){
    rule = @"drink";
}else if([[currentCardDisplayed stringByAppendingString:@"2"]isEqualToString:currentCardName]){
    rule = @"drink2";
}else if([[currentCardDisplayed stringByAppendingString:@"3"]isEqualToString:currentCardName]){
    rule = @"drink3";
}else if([[currentCardDisplayed stringByAppendingString:@"4"]isEqualToString:currentCardName]){
    rule = @"drink4";
}else if([[currentCardDisplayed stringByAppendingString:@"5"]isEqualToString:currentCardName]){
    rule = @"drink5";
}else if([[currentCardDisplayed stringByAppendingString:@"6"]isEqualToString:currentCardName]){
    rule = @"drink6";
}else if([[currentCardDisplayed stringByAppendingString:@"7"]isEqualToString:currentCardName]){
    rule = @"drink7";
}else if([[currentCardDisplayed stringByAppendingString:@"8"]isEqualToString:currentCardName]){
    rule = @"drink8";
}else if([[currentCardDisplayed stringByAppendingString:@"9"]isEqualToString:currentCardName]){
    rule = @"drink9";
}else if([[currentCardDisplayed stringByAppendingString:@"0"]isEqualToString:currentCardName]){
    rule = @"drink10";
}else if([[currentCardDisplayed stringByAppendingString:@"k"]isEqualToString:currentCardName]){
    rule = @"drinkjack";
}else if([[currentCardDisplayed stringByAppendingString:@"n"]isEqualToString:currentCardName]){
    rule = @"drinkqueen";
}else if([[currentCardDisplayed stringByAppendingString:@"g"]isEqualToString:currentCardName]){
    rule = @"drinkking";
}
NSLog(@" %@ ", currentCardDisplayed);
NSLog(@" %@ ", currentCardName);
NSLog(@"%@", rule);
NSLog(@" %@", [cardsShuffled objectAtIndex:currentCard-1]);
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Rules" message:rule delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];

[alert show]; 
```

我试图添加到最后的字母没有到达那里。我首先删除了一个字母，但是在我的 if 语句中我想检查我是否向该变量添加了一个不同的字母，它是否等于另一个字符串。

谁能看到我哪里出错了

下面是 nslogs 的示例输出

```
2012-12-11 20:06:50.853 Kings_1.03[4915:c07]  club.png 
2012-12-11 20:06:50.855 Kings_1.03[4915:c07]  club9.png 
2012-12-11 20:06:50.857 Kings_1.03[4915:c07] (null)
2012-12-11 20:06:50.858 Kings_1.03[4915:c07]  club9 
```

任何帮助表示赞赏

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:18:27.993

进行 if 测试后，您必须添加 .png。使用您的示例，您现在所做的方式是将 9 附加到 club.png，这会给您 club.png9 而不是 club9，因此您的测试永远不会满意。

最简单的方法可能是不在第一行附加那个 .png，然后在你的 if 语句中，附加字母/数字和 .png，所以：

```
}else if([[currentCardDisplayed stringByAppendingString:@"9.png"]isEqualToString:currentCardName]){
    rule = @"drink9"; 
```

# .net - 装箱引用类型（类）？

> ID：13827706
> 
> 赞同：1
> 
> 时间：2012-12-11T20:09:45.507
> 
> 标签：.net, compiler-construction, clr, prism, boxing

我有这个非常简单的属性（这是一个使用 Prism 通知和交互的 WPF 项目）

```
public bool ConfirmNavigation
{
    get { return _confirmNavigation; }
    set { _confirmNavigation = value; base.RaisePropertyChanged<bool>(() => ConfirmNavigation); }
} 
```

生成的 IL 如下所示。令我困惑的是这一行 - **IL_000a: box MyNamespace.MyClass** MyClass is a `class`，*not* a `struct`。是什么赋予了？

```
.property instance bool ConfirmNavigation()

.get instance bool MyNamespace.MyClass::get_ConfirmNavigation()
{
    .locals init (
        [0] bool CS$1$0000
    )

    IL_0000: nop
    IL_0001: ldarg.0
    IL_0002: ldfld bool MyNamespace.MyClass::_confirmNavigation
    IL_0007: stloc.0
    IL_0008: br.s IL_000a

    IL_000a: ldloc.0
    IL_000b: ret
}
.set instance void MyNamespace.MyClass::set_ConfirmNavigation(bool)
{
    IL_0000: nop
    IL_0001: ldarg.0
    IL_0002: ldarg.1
    IL_0003: stfld bool MyNamespace.MyClass::_confirmNavigation
    IL_0008: ldarg.0
    IL_0009: ldarg.0
    ***IL_000a: box MyNamespace.MyClass***
    IL_000f: ldtoken MyNamespace.MyClass
    IL_0014: call class [mscorlib]System.Type [mscorlib]System.Type::GetTypeFromHandle(valuetype [mscorlib]System.RuntimeTypeHandle)
    IL_0019: call class [System.Core]System.Linq.Expressions.ConstantExpression [System.Core]System.Linq.Expressions.Expression::Constant(object,  class [mscorlib]System.Type)
    IL_001e: ldtoken method instance bool MyNamespace.MyClass::get_ConfirmNavigation()
    IL_0023: call class [mscorlib]System.Reflection.MethodBase [mscorlib]System.Reflection.MethodBase::GetMethodFromHandle(valuetype [mscorlib]System.RuntimeMethodHandle)
    IL_0028: castclass [mscorlib]System.Reflection.MethodInfo
    IL_002d: call class [System.Core]System.Linq.Expressions.MemberExpression [System.Core]System.Linq.Expressions.Expression::Property(class [System.Core]System.Linq.Expressions.Expression,  class [mscorlib]System.Reflection.MethodInfo)
    IL_0032: ldc.i4.0
    IL_0033: newarr [System.Core]System.Linq.Expressions.ParameterExpression
    IL_0038: call class [System.Core]System.Linq.Expressions.Expression`1<class [mscorlib]System.Func`1<bool>> [System.Core]System.Linq.Expressions.Expression::Lambda<class [mscorlib]System.Func`1<bool>>(class [System.Core]System.Linq.Expressions.Expression,  class [System.Core]System.Linq.Expressions.ParameterExpression[])
    IL_003d: call instance void [Microsoft.Practices.Prism]Microsoft.Practices.Prism.ViewModel.NotificationObject::RaisePropertyChanged<bool>(class [System.Core]System.Linq.Expressions.Expression`1<class [mscorlib]System.Func`1<bool>>)
    IL_0042: nop
    IL_0043: ret
} 
```

# c# - 在 c# 中使用 Microsoft.Office.Interop.Excel 在 excel 列中设置数字、文本和日期等数据类型

> ID：13827709
> 
> 赞同：16
> 
> 时间：2012-12-11T20:09:49.063
> 
> 标签：c#, excel, format, ms-office, office-interop

我正在尝试将数据类型设置为 C# 中的 excel 列，在本例中为数字、文本和日期。

如何为整个 excel 列设置格式？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-11T22:46:28.937

要将范围设置为文本：

```
xlYourRange.NumberFormat = "@"; 
```

您还可以为放入单元格中的值加上撇号前缀，以将其格式化为文本：

```
xlYourRange.Value = "'0123456"; 
```

将范围设置为数字

```
xlYourRange.NumberFormat = "0"; 
```

显然，如果您想为整个列设置格式，那么您的范围将是列。

```
xlYourRange = xlWorksheet.get_Range("A1").EntireColumn; 
```

**编辑：**

日期有点复杂，也取决于您的区域设置：

```
// Results in a Date field of "23/5/2011"

xlRange.NumberFormat = "DD/MM/YYYY";
xlRange.Value = "23/5/2011";

// Results in a Custom field of "23/5/2011"

xlRange.NumberFormat = "DD-MM-YYYY";
xlRange.Value = "23/5/2011";

// Results in a Custom field of "05/23/2011"

xlRange.NumberFormat = "MM/DD/YYYY";
xlRange.Value = "5/23/2011";

// Results in a Custom field of "05-23-2011"

xlRange.NumberFormat = "MM-DD-YYYY";
xlRange.Value = "5/23/2011";

// Results in a Date field of "23/05/2011"

xlRange.NumberFormat = "DD/MM/YYYY";
xlRange.Value = "5/23/2011";

// Results in a Custom field of "23-05-2011"

xlRange.NumberFormat = "DD-MM-YYYY";
xlRange.Value = "5/23/2011";

// Results in a Custom field of "23/5/2011"

xlRange.NumberFormat = "MM/DD/YYYY";
xlRange.Value = "23/5/2011";

// Results in a Custom field of "23/5/2011"

xlRange.NumberFormat = "MM-DD-YYYY";
xlRange.Value = "23/5/2011"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-31T17:04:47.500

在值的开头连接一个撇号解决我的问题：

```
row["Total Sold/Off"] = "'" + row["Sold"].ToString() + "/" + row["Offered"].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T08:32:59.547

是的，使用日期格式，一切都更加复杂——甚至比**Sid Holland**提到的还要复杂。原因在于一些本地化问题。例如，如果您的 Windows 系统有俄语本地化，您应该在日期格式中使用俄语字母，例如“ДД.MM.ГГГГ”或“ГГГГ-MM-ДД”，因此，您应该能够提取和应用这些信件。在此处查看或多或少完整的描述和解决方案：[https ://stackoverflow.com/a/35418176/2199512](https://stackoverflow.com/a/35418176/2199512)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-13T16:09:01.363

前段时间我问的一个问题有一个答案。

最值得注意的是，这个人在他的回答中使用的数据类型是：

```
private struct ExcelDataTypes
{
    public const string NUMBER = "NUMBER";
    public const string DATETIME = "DATETIME";
    public const string TEXT = "TEXT"; // also works with "STRING".
} 
```

看起来熟悉？

如果你有兴趣，这里是链接：

[通过 OleDb 使用 Microsoft Access 数据库引擎将 DataTable 插入 Excel](https://stackoverflow.com/q/10591600/153923)

# security - 有哪些开源加密库严格依赖于 libc 并且很容易在小型微控制器中实现？

> ID：13827714
> 
> 赞同：0
> 
> 时间：2012-12-11T20:10:13.900
> 
> 标签：security, encryption, assembly, libc

我正在寻找一些可以移植到不同平台的开源加密库。该平台只有 libc 库可用，它需要我用汇编语言重新实现算法。最好避免浮点操作（仅由于 MCU 的限制）并且您认为使用 PIC16F 之类的简单指令集更容易重写

我正在寻找一些基本功能，如散列和公钥加密。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:12:12.317

密码库很少使用浮点数。

[PolarSSL](https://polarssl.org/)非常干净、模块化，用 C 语言编写，没有外部依赖。提取所需的例程很容易。

当然，请记住它是 GPLv2。不过也可以使用商业许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:31:46.850

我已经将[LibTomCrypt](http://libtom.org/?page=features&whatfile=crypt)用于 AVR32。它速度快，体积小而且有效:)

# c# - 如何在 WPF DataGrid / ListView / ListBox 中添加计算的附加列

> ID：13827716
> 
> 赞同：2
> 
> 时间：2012-12-11T20:10:18.830
> 
> 标签：c#, .net, wpf, data-binding

我有一个`DataGrid`和一个视图模型（`MyViewModel1`）。绑定到的`DataGrid`Items 属性`MyViewModel1`。限制是我不能触摸`MyViewModel1`and的代码`MyClass1`。

```
public class MyViewModel1 : INotifyPropertyChanged
{
    ...
    public ObservableCollection<MyClass1> Items { get { ... } }
    public int ViewModelProperty1 { get { ... } }
    public int ViewModelProperty2 { get { ... } }
}

public class MyClass1 : INotifyPropertyChanged
{
    ...
    public int Property1 { get { ... } }
    public int Property2 { get { ... } }
    public int Property3 { get { ... } }
} 
```

我希望不仅显示具有 3 个已知属性的 3 列，而且还显示每行的第 4 列，`DataGrid`这取决于`Property1`、`Property2`、`Property3`和。为了这个例子，假设第 4 列是. 第 4 列必须显示当前值，因此如果增加 1，则第 4 列也必须增加 1。我的问题是：我有什么选择来做到这一点？`ViewModelProperty1``ViewModelProperty2``Property1 + Property2 + Property3 + ViewModelProperty1 + ViewModelProperty2``ViewModelProperty1`

我能想到这些：

1.  使用`IMultiValueConverter`带有所有因变量的 an 作为输入。这适用于示例。这里的问题是，一旦变量的交互变得更加复杂，例如`((Property1 + 2*Property2) * Property3) ^ (ViewModelProperty1 - ViewModelProperty2)`，将 5 个变量放入“MultiBinding”的顺序变得很重要，并且绑定中有很多知识可以导致解决方案变脆。

2.  使用包装器。将 绑定`DataGrid`到一个新类`MyViewModel2`，该类注册到更改`MyViewModel1`，看起来像

    ```
    public class MyViewModel2
    {
        public MyViewModel2(MyViewModel1 m) { ... }
        ...
        public ObservableCollection<MyClass2> Items { get { ... } }
    }
    public class MyClass2 : INotifyPropertyChanged
    {
        public MyClass2(MyClass1 inner)
        {
            InnerClass = inner;
            InnerClass.NotifyPropertyChanged += InnerClassChanged;
        }
        void InnerClassChanged(object o, PropertyChangedEventArgs)
        {
            if (PropertyChanged != null)
                PropertyChanged("Property4");
        }
        public void ViewModelPropertiesChanged
        {
            if (PropertyChanged != null)
                PropertyChanged("Property4");
        }

        public MyClass1 InnerClass { get; private set; }
        public int Property4
        {
            get { return InnerClass.Property1+InnerClass.Property2 ... }
        }
        public event PropertyChanged;
    } 
    ```

问题是除了我上面提到的2（转换器和包装器）之外，还有哪些方法可以解决这个问题。

我的问题不是哪种方法是解决示例的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:01:22.900

对不起，我刚刚看到你已经想到了这个！并不是说我理解你的反对意见。

您可以将[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)与[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)一起使用。请参阅 IMultiValueConverter 文档中的示例。

（从这里：[https](https://stackoverflow.com/a/2002598/360211) ://stackoverflow.com/a/2002598/360211 ）

# php - 从 wp.getCategories 解析 XML-RPC 响应

> ID：13827717
> 
> 赞同：1
> 
> 时间：2012-12-11T20:10:21.537
> 
> 标签：php, wordpress, curl, xml-rpc

**问题** 我正在使用 cURL 和 PHP 通过 XML-RPC（wp.getCategories 或 metaWeblog.getCategories）从 Wordpress 站点检索类别列表，但我无法解析响应，因为它看起来非常复杂。

我的代码应该解析响应并创建一个简单的下拉菜单：

这不应该是实际的工作代码，而是我如何想象它的工作方式：

```
$xml = simplexml_load_string($categories);
$select_string = "<select name=\"cats\">";
foreach ($xml as $category) {
    $select_string .= "<option value=\"" . $category->value . "\">" . $category->name . "</option>";
}
$select_string .= "</select>"; 
```

我试图解析的响应是（这是 simplexml_load_string 输出的）：

```
SimpleXMLElement Object
(
[param] =&gt; SimpleXMLElement Object
    (
        [value] =&gt; SimpleXMLElement Object
            (
                [array] =&gt; SimpleXMLElement Object
                    (
                        [data] =&gt; SimpleXMLElement Object
                            (
                                [value] =&gt; Array
                                    (
                                        [0] =&gt; SimpleXMLElement Object
                                            (
                                                [struct] =&gt; SimpleXMLElement Object
                                                    (
                                                        [member] =&gt; Array
                                                            (
                                                                [0] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 4
                                                                            )

                                                                    )

                                                                [1] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; parentId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 0
                                                                            )

                                                                    )

                                                                [2] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; description
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; News
                                                                            )

                                                                    )

                                                                [3] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryDescription
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; SimpleXMLElement Object
                                                                                    (
                                                                                    )

                                                                            )

                                                                    )

                                                                [4] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryName
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; News
                                                                            )

                                                                    )

                                                                [5] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; htmlUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/news/
                                                                            )

                                                                    )

                                                                [6] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; rssUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/news/feed/
                                                                            )

                                                                    )

                                                            )

                                                    )

                                            )

                                        [1] =&gt; SimpleXMLElement Object
                                            (
                                                [struct] =&gt; SimpleXMLElement Object
                                                    (
                                                        [member] =&gt; Array
                                                            (
                                                                [0] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 5
                                                                            )

                                                                    )

                                                                [1] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; parentId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 4
                                                                            )

                                                                    )

                                                                [2] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; description
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; Testimonials
                                                                            )

                                                                    )

                                                                [3] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryDescription
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; SimpleXMLElement Object
                                                                                    (
                                                                                    )

                                                                            )

                                                                    )

                                                                [4] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryName
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; Testimonials
                                                                            )

                                                                    )

                                                                [5] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; htmlUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/news/testimonials/
                                                                            )

                                                                    )

                                                                [6] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; rssUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/news/testimonials/feed/
                                                                            )

                                                                    )

                                                            )

                                                    )

                                            )

                                        [2] =&gt; SimpleXMLElement Object
                                            (
                                                [struct] =&gt; SimpleXMLElement Object
                                                    (
                                                        [member] =&gt; Array
                                                            (
                                                                [0] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 1
                                                                            )

                                                                    )

                                                                [1] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; parentId
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; 0
                                                                            )

                                                                    )

                                                                [2] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; description
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; Uncategorized
                                                                            )

                                                                    )

                                                                [3] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryDescription
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; SimpleXMLElement Object
                                                                                    (
                                                                                    )

                                                                            )

                                                                    )

                                                                [4] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; categoryName
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; Uncategorized
                                                                            )

                                                                    )

                                                                [5] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; htmlUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/uncategorized/
                                                                            )

                                                                    )

                                                                [6] =&gt; SimpleXMLElement Object
                                                                    (
                                                                        [name] =&gt; rssUrl
                                                                        [value] =&gt; SimpleXMLElement Object
                                                                            (
                                                                                [string] =&gt; http://lubranochiropractic.com/category/uncategorized/feed/
                                                                            )

                                                                    )

                                                            )

                                                    )

                                            )

                                    )

                            )

                    )

            )

    )

) 
```

我试图在 foreach 语句中使用 this 遍历成员数组，但它不起作用：

```
$xml->param->value->array->data->value->struct->member; 
```

有谁知道在这里轻松解析数据的简单方法？

实际 XML：

```
<!--?xml version="1.0"?-->
<methodresponse>
  <params>
    <param>
      <value>
      <array><data>
  <value><struct>
  <member><name>categoryId</name><value><string>4</string></value></member>
  <member><name>parentId</name><value><string>0</string></value></member>
  <member><name>description</name><value><string>News</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>News</string></value></member>
  <member><name>htmlUrl</name><value><string>http://lubranochiropractic.com/category/news/</string></value></member>
  <member><name>rssUrl</name><value><string>http://lubranochiropractic.com/category/news/feed/</string></value></member>
</struct></value>
  <value><struct>
  <member><name>categoryId</name><value><string>5</string></value></member>
  <member><name>parentId</name><value><string>4</string></value></member>
  <member><name>description</name><value><string>Testimonials</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>Testimonials</string></value></member>
  <member><name>htmlUrl</name><value><string>http://lubranochiropractic.com/category/news/testimonials/</string></value></member>
  <member><name>rssUrl</name><value><string>http://lubranochiropractic.com/category/news/testimonials/feed/</string></value></member>
</struct></value>
  <value><struct>
  <member><name>categoryId</name><value><string>1</string></value></member>
  <member><name>parentId</name><value><string>0</string></value></member>
  <member><name>description</name><value><string>Uncategorized</string></value></member>
  <member><name>categoryDescription</name><value><string></string></value></member>
  <member><name>categoryName</name><value><string>Uncategorized</string></value></member>
  <member><name>htmlUrl</name><value><string>http://lubranochiropractic.com/category/uncategorized/</string></value></member>
  <member><name>rssUrl</name><value><string>http://lubranochiropractic.com/category/uncategorized/feed/</string></value></member>
</struct></value>
</data></array>
      </value>

  </params>
</methodresponse> 
```

谢谢。瑞克

**最终解决方案（在 E_p 提供的帮助下）** 这会根据来自 wp.getCategories 或 metaWeblog.getCategories 的 XML-RPC 响应构建类别的下拉菜单。

```
$categories =  wpGetCategories($url, $username, $password);
$select_string = "<select name=\"cats\">";
$xml = simplexml_load_string($categories);
foreach ($xml->params->param->value->array->data->value as $dataSet) {
    foreach ($dataSet->struct->member as $member) {
        if ($member->name == "categoryId") $cat_id = $member->value->string;
        if ($member->name == "description") $cat_name = $member->value->string;
    } 
    $select_string .= "<option value=\"" . $cat_id . "\">" . $cat_name . "</option>";  
}
$select_string .= "</select>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:22:55.230

试过：

```
<?php 

    $str = "<a><tests><test>1</test><test>2</test><test>3</test><test>4</test></tests></a>";
    $xml = simplexml_load_string($str);

    foreach ($xml->tests->test as $test) {
        echo "Test #: " . $test . PHP_EOL;                                                                                                                                                                                                    
    } 
```

返回：

```
Test #: 1
Test #: 2
Test #: 3
Test #: 4 
```

所以在你的情况下`foreach ($xml->param->value->array->data->value->struct->member as $member)`应该工作

你能提供你解析的xml吗？

尝试使用您的 xml（它有语法错误）：

```
$xml = simplexml_load_string('your xml here');
foreach ($xml->params->param->value->array->data->value as $dataSet) {
    foreach ($dataSet->struct->member as $member) {
        echo 'Name: ' . $member->name  . PHP_EOL;
        echo 'Value: ' . $member->value->string  . PHP_EOL;
    }   
    echo PHP_EOL;                                                                                                                                                     
} 
```

输出

```
Name: categoryId
Value: 4
Name: parentId
Value: 0
Name: description
Value: News
Name: categoryDescription
Value: 
Name: categoryName
Value: News
Name: htmlUrl
Value: http://lubranochiropractic.com/category/news/
Name: rssUrl
Value: http://lubranochiropractic.com/category/news/feed/

Name: categoryId
Value: 5
Name: parentId
Value: 4
Name: description
Value: Testimonials
Name: categoryDescription
Value: 
Name: categoryName
Value: Testimonials
Name: htmlUrl
Value: http://lubranochiropractic.com/category/news/testimonials/
Name: rssUrl
Value: http://lubranochiropractic.com/category/news/testimonials/feed/

Name: categoryId
Value: 1
Name: parentId
Value: 0
Name: description
Value: Uncategorized
Name: categoryDescription
Value: 
Name: categoryName
Value: Uncategorized
Name: htmlUrl
Value: http://lubranochiropractic.com/category/uncategorized/
Name: rssUrl
Value: http://lubranochiropractic.com/category/uncategorized/feed/ 
```

虽然它可以工作，但解析应该更复杂，因为它们使用 xml 来指定类型。

# c# - 改进 IIS 应用程序池内存使用的编码

> ID：13827719
> 
> 赞同：2
> 
> 时间：2012-12-11T20:10:31.990
> 
> 标签：c#, asp.net, iis, webforms

我们有两个相同的负载平衡 Web 服务器（ws1 和 ws2）为同一个网站提供服务。目前两者都有一些爬虫，爬取 PDF 和包含大量图像的页面（平均每页可能 25 个）。两台服务器之间大约有 60 个并发用户，但到目前为止，爬虫发出的请求最多。ws1 上的 IIS 应用程序池消耗 ~500mb RAM，ws2 上的应用程序池消耗 ~2gb RAM（每台服务器上可用 4gb）。这些消耗水平已经持续了几个小时。我已将 IIS 配置为进行静态缓存和静态压缩，但我想不到这会影响 RAM 消耗。

问题是 ws2 的 RAM 快用完了，而且该服务器上的网页加载速度比 ws1 慢得多，这对我们的最终用户不利。

我的问题：

*   50% 的可用 RAM（在 ws2 上约为 2gb）对于应用程序池来说似乎很多 - 是吗？
*   我是否应该考虑任何编程/配置考虑来帮助服务器更好地管理其资源，尤其是 RAM，尤其是在涉及更大的请求（如 PDF 和图像）时？

我知道在这一点上这是非常通用的。我不知道包含哪些其他信息会有所帮助，所以请留下反馈，以便我可以用更详细的信息更新这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:17:14.927

最好的起点是确定*什么*正在使用所有这些内存。商业分析器如

[http://www.red-gate.com/products/ants_performance_profiler/index.htm](http://www.red-gate.com/products/ants_performance_profiler/index.htm)

[http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

可以分析您在 IIS 中运行的代码。如果您可以在您的开发环境中重现该问题，Visual Studio 的内存分析器也应该能够诊断内存使用情况（也许有一种方法可以将它独立用于生产 IIS 实例......不确定）。

检查您的应用程序分配了哪些内存，以及分配了哪些内存。

# c - 带有 ^ 运算符的 scanf

> ID：13827720
> 
> 赞同：0
> 
> 时间：2012-12-11T20:10:39.290
> 
> 标签：c, scanf

```
#include <stdio.h>

int main()
{
    int a;
    char msg[10];
    scanf("%d",&a);
    printf("%d\n",a);
    scanf("%[^\n]s",msg);
    printf("%s\n",msg);
    return 0;
} 
```

该程序正在接受整数值并打印它，但第二次`scanf()`调用不接受任何内容。为什么是这样？

^\n 对上下文中的 scanf 语句有什么影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:26:06.470

如果控制台看起来像这样：

```
123
abc 
```

然后`stdin`会有内容：`123\nabc\n`

在使用格式字符串`scanf`调用之后，现在将是：。请注意，尚未消耗。`"%d"``stdin``\nabc\n``\n`

说明符`%[^\n]`（ the`s`不应该在那里，它只会被视为一个额外的字符以在之后立即使用）意味着*读取每个字符直到 a`\n`*`\n` ，所以由于在字符串的开头之前没有字符，因此不会存储任何内容进入缓冲区，`stdin`并将保持为：`\nabc\n`.

要解决此问题，请将第一个`scanf`格式字符串更改为`"%d\n"`，以便在读取数字`\n`后将被消耗。由于`%[^\n]`也不会使用`\n`，您可能还想将该格式字符串更改为`"%[^\n]\n"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:13:39.613

只需将第一个 scanf 更改为：

```
scanf("%d\n",&a); 
```

否则，第二个 scanf 只会看到 \n 并读取 0 个项目（从而使您的 msg 保持不变。

使用您的原始代码和一些附加诊断：

```
#include <stdio.h>
#include <string.h>
int main() {
  int a;
  int itemsScanned;
  char msg[10]; strcpy (msg, "unchanged");
  itemsScanned=scanf("%d",&a);
  printf("itemsScanned=%d a=%d\n",itemsScanned, a);
  itemsScanned=scanf("%[^\n]s",msg);
  printf("itemsScanned=%d msg=%s\n",itemsScanned, msg);
  return 0;
} 
```

输出（输入 3<\nl 时）为：

```
> ./a.out
3
itemsScanned=1 a=3
itemsScanned=0 msg=unchanged 
```

在第一个 scanf 中添加了 \n，然后输入 5\nlHugo\nl：

```
./a.out
5
Hugo
itemsScanned=1 a=5
itemsScanned=1 msg=Hugo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:18:13.947

```
scanf("%[^\n]s", msg); 
```

这可能不是您想要的，您不需要`s`扫描集之后的。这样做你告诉`scanf`寻找一个`s`角色。

# java - 使用循环通过 JDBC 在 SQL 表中插入 1000 行 - 性能

> ID：13827721
> 
> 赞同：1
> 
> 时间：2012-12-11T20:10:40.743
> 
> 标签：java, sql, jdbc

我有一个包含大约 1000 行的文件。我试图实现的功能是获取这个文件，验证它，一旦它被验证，我必须将这些行插入到数据库表中:)

我的问题是：在 for 循环中进行插入是否会造成主要的性能问题？这个 for 循环将在文件的每一行上调用 insert。所以我们谈论的是通过 for 循环完成的 1000 个 INSERT。实现这样的事情的最佳方法是什么？我在做一些明显错误的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:13:23.373

您可以批量处理所有这些插入。当你阅读你的文件时，你构建你的插入，然后像这样执行它们：

```
Statement st = con.createStatement();
st.addBatch("INSERT INTO xx VALUES(...)");
st.addBatch("INSERT INTO xx VALUES(...)")
st.executeBatch(); 
```

使用这种技术，您可以有效地处理大量输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:13:43.433

这通常应该没有问题。开始一个事务，每次插入每一行并关闭事务。这就对了。1000行应该没问题。

另一方面，如果您尝试使用 1,000,000 行来执行此操作，则很可能会遇到麻烦，因此您应该以 1000 个事务的数据包的形式进行，每个事务具有 1000 行。

如果由于某种原因，事务中的 1000 行太多，则以数据包的形式进行，比如说 200、100 或 50。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T20:16:02.103

基本上在循环中执行 1000 次插入没有任何问题。对于 1000 行，它可能不会产生很大的不同，但如果你真的想获得最佳性能，你应该使用 PreparedStatement 批量插入：

```
PreparedStatement  pstmt = con.prepareStatement("insert into the_table (col1, col2) values (?,?)");
for (row=0; row < rowCount; row ++) {
  // obtain the values for each row
  pstmt.setInt(1, some_value);
  pstmt.setString(2, other_value);
  pstmt.addBatch();
}
pstmt.executeBatch();
con.commit(); 
```

如果您期望更多行，您可能希望每 1000 行左右调用一次 executeBatch()，因为所有数据（通过 设置`addBatch()`）都保存在内存中，直到您调用`executeBatch()`

# android - 使用 Facebook 的 Android SDK 时，Binder 已经完成

> ID：13827724
> 
> 赞同：1
> 
> 时间：2012-12-11T20:11:13.230
> 
> 标签：android, facebook, facebook-graph-api, facebook-authentication, facebook-android-sdk

我正在使用 Facebook 的 Android SDK（截至今天的最新版本）。用于身份验证的代码如下：

```
prefs = PreferenceManager.getDefaultSharedPreferences(this);
facebook = new Facebook(FACEBOOK_APP_ID);
String fbAccessToken = prefs.getString("fb_access_token", null);
long fbAccessExpires = prefs.getLong("fb_access_expires", 0);
if (fbAccessToken != null) {
    facebook.setAccessToken(fbAccessToken);
}
if (fbAccessExpires != 0) {
    facebook.setAccessExpires(fbAccessExpires);
}
if (!facebook.isSessionValid()) {
    facebook.authorize(this, new String[] { "friends_birthday" }, new DialogListener() {
        public void onComplete(Bundle values) {
            SharedPreferences.Editor prefEditor = prefs.edit();
            prefEditor.putString("fb_access_token", facebook.getAccessToken());
            prefEditor.putLong("fb_access_expires", facebook.getAccessExpires());
            prefEditor.commit();
            // do some graph requests
        }
        public void onFacebookError(FacebookError error) {
        }
        public void onError(DialogError e) {
        }
        public void onCancel() {
        }
    });
}
else {
    // do some graph requests
} 
```

不幸的是，Facebook 应用程序会根据该请求打开并显示“正在加载...”。几秒钟后，它就消失了，没有任何结果。

在 LogCat 中，我可以读取以下异常：

```
12-11 21:04:34.597: E/System(29584): Uncaught exception thrown by finalizer
12-11 21:04:34.613: E/System(29584): java.lang.IllegalStateException: Binder has been finalized!
12-11 21:04:34.613: E/System(29584):    at android.os.BinderProxy.transact(Native Method)
12-11 21:04:34.613: E/System(29584):    at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
12-11 21:04:34.613: E/System(29584):    at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
12-11 21:04:34.613: E/System(29584):    at android.database.CursorWrapper.close(CursorWrapper.java:49)
12-11 21:04:34.613: E/System(29584):    at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
12-11 21:04:34.613: E/System(29584):    at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
12-11 21:04:34.613: E/System(29584):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
12-11 21:04:34.613: E/System(29584):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
12-11 21:04:34.613: E/System(29584):    at java.lang.Thread.run(Thread.java:856) 
```

这是 Facebook SDK 的常见问题吗？我不这么认为，还没有找到任何关于它的东西。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:19:19.817

您应该确保您使用的是 SDK 3.0 的最终版本（我们刚刚发布），可在[https://developers.facebook.com/android获得](https://developers.facebook.com/android)

还要确保您拥有 Java 1.6 和干净的项目/工作区。

I'd advise you to use the contemporary patterns for Session handling and login, as described in the documentation on that site.

# mysql - MySQL 的一点点谜团

> ID：13827725
> 
> 赞同：1
> 
> 时间：2012-12-11T20:11:19.630
> 
> 标签：mysql

我有一张表格，里面有一堆条目（标准的东西、电子邮件、姓名、城市等），还有一个订阅选项，用于通知他们未来的东西。

我正在尝试找出每个省选择加入的数量（订阅字段为 1）。而且我还试图导出那个巨大的列表不同的电子邮件地址。

所以我有以下两个查询

从表中获取所有值以进行导出。

```
SELECT DISTINCT(email_address), first_name, last_name, street_address, city, province, postal_code, phone FROM entries WHERE subscribe='1' GROUP BY email_address 
```

从表中获取计数（看起来像省 | #）。

```
SELECT province, COUNT(DISTINCT email_address) FROM entries WHERE subscribe='1' GROUP BY province; 
```

现在我的问题是第一个查询返回`1124`结果，第二个查询加起来就是`1136`结果。因此，某处将出现 12 个条目。

我怎样才能弄清楚发生了什么或者我的查询有问题或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:13:24.433

你的问题是你有一些跨省重复的电子邮件地址。

第一个查询消除*了所有*重复的电子邮件地址。*第二个查询只会消除给定省份内的*重复电子邮件地址

 *如果您不关心重复电子邮件被计入哪个省份，您可以像这样消除重复邮件：

```
SELECT province, COUNT(email_address)
FROM (
  SELECT email_address, MAX(province) as province
  FROM entries
  GROUP BY email_address
)
GROUP BY province 
```*

# objective-c - 使用现在在 iOS 6 中已弃用的 presentModalViewController 有什么缺点？

> ID：13827731
> 
> 赞同：4
> 
> 时间：2012-12-11T20:11:41.727
> 
> 标签：objective-c, ios, xcode

我希望我的 iphone 应用程序也可以在旧的 iOS 版本上运行，所以我使用的是 presentModalViewController，但同时我担心它可能带来的灾难，因为我使用了一种已弃用的方法。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T20:26:16.177

H2CO3 是完全正确的：不使用已弃用功能的原因是，Apple 已经向我们发出了公平的警告，即被弃用的 iOS 未来版本可能不支持它，因此您的应用程序可能无法在未来版本的 iOS 上运行。新的[`presentViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)为您提供了已弃用方法的所有功能，并为您提供了`completion`块选项。也许您不需要它（在这种情况下您只需通过`nil`），但这不是使用已弃用功能的理由。

如果您计划在新方法所需的 iOS 版本（在本例中为 iOS 5）之前支持 iOS，则应仅使用已弃用的方法，如果您这样做，则应有条件地仅对那些较旧的版本使用已弃用的方法版本（即正如史蒂夫建议的那样，检查您的对象`respondsToSelector`是否适用于新方法，如果是，则使用该方法，如果不使用旧版本）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T20:41:46.107

如果您想使用不推荐使用的方法来支持旧版本，只需检查对象是否响应新方法。如果没有，您使用的是旧版本，需要使用旧方法。

```
if ([myVC respondsToSelector:@selector(presentViewController:animated:completion:)]) {
   //use the new version
} else {
   //use the old version.
} 
```

# java - 如何正确构建我的 java 代码？

> ID：13827732
> 
> 赞同：0
> 
> 时间：2012-12-11T20:11:41.017
> 
> 标签：java, android

我正在创建一个安卓应用程序。这是我正在创建的第一个“真正的”android 应用程序，而且我也是 Java 新手。我以前从未使用 OOP 创建过任何程序，所以我对事物的结构有点困惑。我有一些 PHP 经验，但我最初学会了使用程序化（内联？）的 Turbo Pascal 编程。

无论如何......这是情况：

1.  Main Activity - 这是用于控制我拥有的实际 Android 应用程序的 Activity。
2.  类 ScoreClock - 这是我有以下方法的地方：

    ```
    public ScoreClock // initialize all the fields(variables) within the ScoreClock class.
    public getMinutes(long ms)  // take ms remaining and calculate minutes left.
    public getSeconds(long ms)  // take ms remaining and calculate seconds left. 
    ```

现在......我正在考虑添加`public void updateBoard()`哪些用于将所有值更新到实际记分牌。我感到困惑的是...... updateBoard() 方法应该进入 MainActivity.java 文件还是 ScoreClock.java 文件？

updateBoard 方法将访问 android 字段/变量并更改 TextViews 等的值，所以我认为它应该放在 MainActivity.java 中。

有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:21:20.280

一个好的起点是图表。

我想您的活动课程相当长且复杂，根据您在问题中提供的信息，我猜您有某种游戏板，这听起来像是一个潜在的重构项目。

试试这本书[http://www.headfirstlabs.com/books/hfdp/](http://www.headfirstlabs.com/books/hfdp/)虽然它不是最好或最权威的设计指南，但它提供了良好的入门级信息和帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:21:29.783

所有更新 UI 元素的代码都在 Activity 或 View 中。您无法从 POJO 访问任何内容。听起来你和很多人一样，正在尝试制作游戏。我建议你先学习Java，然后是Android，然后尝试制作游戏。不要从像游戏这样复杂的事情开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:31:50.383

我猜你开始有点太超前了，通过oop，关注点分离和mvc浏览一点；无论如何，鉴于您的问题 - updateBoard() 方法不应该在您的 ScoreClock 类中，它应该在您的 Activity 类中，在这种情况下播放控制器。

# asp.net - 简单的 ASP.NET 无休止分页

> ID：13827733
> 
> 赞同：4
> 
> 时间：2012-12-11T20:11:44.750
> 
> 标签：asp.net, webforms, pagination, comments, cwac-endless

我希望为评论部分实现一些简单的无休止分页，类似于 Youtube 评论，您在底部单击“显示更多”，它会加载更多评论，但会保持先前评论的状态。

我想我可以在一个带有 Ajax 控件工具包和一些 Jquery 的 ListView 的 UpdatePanel 中做到这一点，但只需要一些指导。我正在考虑显示返回的前 4 个项目并将它们数据绑定到我的 ListView，ListView 将被包装在带有“显示更多”按钮的 UpdatePanel 中，当单击该按钮时，它将向数据源添加 4 个并重新绑定ListView，但这不会顺利地将 4 条评论添加到底部，而是 ListView 部分会刷新以显示新评论。

有没有更顺畅/更好的方法来做到这一点？我正在使用网络表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:25:16.653

老实说，我会为此避免使用整个 Web 表单模型（包括`UpdatePanel`）。在这种情况下，它增加了很多开销和复杂性。

将 AJAX 请求发送回处理程序（无论是什么，为此目的构建的 ASPX 页面、Web 方法、HttpHandler、MVC 控制器等）并返回 JSON。由于注释在结构上相当简单，因此根据需要插入/构建相关标记应该不难。

我使用这种方法在 ASP.Net Web 表单应用程序中构建了一个无尽的评论系统，效果很好。该页面呈现为带有用户控件的普通 ASPX。评论的用户控件只输出一点脚本。

我使用对控制器的请求加载我的初始评论，当用户滚动时，我只需向控制器询问下一个数据块，直到控制器告诉我我已经到达集合的末尾（你也可以添加一个上限，这样用户不会加载太多记录并导致浏览器崩溃）。

## 例子

*   [使用jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)发出请求
*   在您的成功回调中，您可以将传递给它的数据视为 JavaScript 对象
*   循环遍历所有项目并创建/附加 DOM 节点。

* * *

```
var element = $("#comments"); // this is your node with all comments

$.ajax({
    type: "POST",
    url: "ClientApi/Comments/_GetPaged", // this handler builds JSON
    dataType: "json",
    data: { pageIndex: 5 }, // your input values here
    cache: false,
    success: function (data) {
        for (var i = 0; i < data.length; i++) {
            var comment = data[i];
            var itemElement = $("<div/>").appendTo(element);

            // do whatever you want here, just remember that user input 
            // should be sanitized somewhere during the process
            itemElement.html(comment.text);
        }
    }
}); 
```

# c# - NHibernate 映射一个字典问题

> ID：13827734
> 
> 赞同：1
> 
> 时间：2012-12-11T20:11:51.223
> 
> 标签：c#, asp.net-mvc, nhibernate

我有一个 NHibernate 映射问题，我可以使用帮助 - 文档和示例对我来说似乎很不清楚。

我有一个类，其中包含另一个类的字典。我不确定正确的映射，并且我尝试过的所有操作要么无法映射，要么在读取数据时出现 NHibernate 异常。

2类是：

```
public class SnippetConfigParam
{
    public virtual int          SnippetValueKey { get; set; }
    public virtual string       ParamName { get; set; }
    public virtual string       Value{ get; set; }
}

public  class SnippetConfig
{
    public virtual int          SnippetKey { get; set; }

    public virtual ESnippetType Type{ get; set; }
    public virtual string       Name { get; set; }

    public virtual IDictionary<string, SnippetConfigParam> Params { get; set; }

    public virtual string       Description{ get; set; }

    public virtual VendorPage   Page{ get; set; }
} 
```

我最后一次映射尝试是

```
<map name="Params"  table="SnippetConfigValue" lazy="false">
    <key column="SnippetConfigKey" />
    <index column="SnippetValueKey"  type="Int32"/>    
    <composite-element class ="SnippetConfigParam">
        <property name="ParamName"  />
        <property name="Value" />
    </composite-element>      
</map> 
```

结果是：

> System.InvalidCastException：无法将“System.Int32”类型的对象转换为“System.String”类型。

所以我显然不明白一些事情。数据库表是：

```
Create Table SnippetConfig
    SnippetKey  int not null, 
    ...
    PrimaryKey( 'SnippetKey' )

  Create Table SnippetConfigValue
    SnippetValueKey  int  not null,
    ...
    PrimaryKey( 'SnippetValueKey' ),
    Key  'fk' ( 'SnippetConfigKey' ),
    Constraint 'fk' foreign key ('SnippetConfigKey' ) references 'SnippetConfig' ('SnippetKey' )... 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:07:05.643

在 NHibernate 中映射字典可能有点棘手。请参阅此处的详细说明：[Ayende 关于`<map>`](http://ayende.com/blog/4045/nhibernate-mapping-map). 理解它的关键在于`TKey`与`TValue`( `IDictionary<TKey, TValue>`)的映射

*   TKey由`<index>`元素表示
*   TValue 可以是元素、复合元素、一对多

因为你`TKey`是**字符串**：

```
public virtual IDictionary<string, SnippetConfigParam> Params { get; set; } 
```

表示它的映射不能是**int**

```
<index column="SnippetValueKey"  type="Int32"/> 
```

*将Params*属性更改为`IDictionary<int, SnippetConfigParam>`，它应该可以工作。

*注意：如果要填充类 SnippetConfigParam 的属性 SnippetValueKey，请扩展组件*

```
<composite-element class ="SnippetConfigParam">
    <property name="SnippetValueKey" formula="SnippetValueKey " 
              insert="false" update="false" />
    <property name="ParamName"  />
    <property name="Value" />
</composite-element> 
```

# ios - 保存到 iOS 托管对象上下文

> ID：13827739
> 
> 赞同：3
> 
> 时间：2012-12-11T20:12:08.620
> 
> 标签：ios, managedobjectcontext

我有以下代码将实体保存到托管对象上下文中。

```
 NSError *savingError = nil;

    if ([self.managedObjectContext save:&savingError]) {
        NSLog(@"Successfully saved the context.");
    } else {
        NSLog(@"Failed to save the context. Error = %@", savingError);
    } 
```

根据我的文档，我理解以下内容：将新实体插入上下文后，我们必须保存上下文。这会将上下文的所有未保存数据刷新到持久存储。我们可以使用`save:`托管对象上下文的实例方法来做到这一点。如果`BOOL`此方法的返回值为`YES`，我们可以确定保存了 out 上下文。

我不清楚的是之后的语法`save:`，特别是在 local 之前的 & 符号`savingError variable`。这告诉编译器什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:17:22.657

运算符的`&`基本意思是“地址”。它接受一个值并返回一个指向该值的指针。所以在这种情况下，`&savingError`是一个类型的值，`NSError**`它是一个保存`savingError`变量地址的指针。然后调用代码可以`*error`用来“取消引用”该指针并取回您的变量。这意味着它可以说

```
*error = [NSError errorWithDomain:...] 
```

然后在您的代码中，该`savingError`变量现在将填充新错误。

这是 C 中一种相当常见的编程风格，用于模拟具有多个返回值。像这样的参数（指向值的指针，您在其中传递变量的地址并由函数填充它）通常称为“out-parameters”或“out-params”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:18:45.033

看一下：[为什么有些方法参数前面要放`&`（和号）？](https://stackoverflow.com/questions/10059169/why-is-ampersand-put-in-front-of-some-method-parameters)

简而言之：您需要传递一个指向 NSError 指针的指针，因此`save:`可以将偶尔的错误分配给`savingError`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-25T09:37:24.317

& 代表对象的地址。当我们将对象传递给方法时，对象的副本已传递给它。在该方法中对该对象所做的任何更改都不会影响与方法调用一起使用的对象。

当我们使用 & 时，实际上我们传递了对象的地址，因此我们在该方法中对对象所做的任何更改都会影响在方法调用中用作参数的对象。

在`save:`方法中，我们传递了一个 NSError 类的对象。如果在 Save 方法（过程）期间发生了一些错误，可以使用这个 NSError 对象找到。

```
[savingError localizedDescription]; 
```

# happstack - 使用 Happstack 直接输出预生成的 HTML

> ID：13827741
> 
> 赞同：0
> 
> 时间：2012-12-11T20:12:23.787
> 
> 标签：happstack

我正在玩 Haskell 和 Happstack，我正在尝试直接输出基于字符串的 HTML，而不使用正式的 Happstack 函数。具体来说，我正在尝试将 SVG 直接输出到`<svg> ... </svg>`来自另一个模块的页面（带有 ），该模块已经完全生成为字符串。

这只是一个小玩具程序，所以我试图避免重构 SVG 生成器模块。

所以我的问题是，如下：

```
(f "<b> test </b>") 
```

什么是`f`这样的测试会在我的浏览器中以粗体显示？

如果这不可能，那么更有条理的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:52:54.767

简单的方法是使用`toResponseBS`：

```
import Data.ByteString.Char8 as C
import Data.ByteString.Lazy.Char8 as L
svgToResponse svg = toResponseBS (C.pack "image/svg+xml") (L.pack $ "<svg>" ++ svg ++ "</svg>") 
```

另一种选择是创建一个`ToMessage`实例：

```
newtype SVG = SVG String
instance ToMessage SVG where
    toContentType _ = C.pack "image/svg+xml"
    toMessage (SVG svg) = L.pack $ "<svg>" ++ svg ++ "</svg>" 
```

现在你可以做`toResponse (SVG svg)`，甚至可以，`ok $ SVG svg`但后者不能很好地与非 SVG 处理程序通过`msum`...

* * *

*编辑：*以上内容与从处理程序提供 SVG 文件有关，但您实际上要求将 SVG 嵌入我第一次错过的 HTML 中。

答案取决于您如何生成 HTML。

如果您正在使用`blaze-html`您想使用该`preEscapedToHtml`功能：

```
preEscapedToHtml $ "<svg>" ++ svg ++ "</svg>" 
```

如果您使用的是 HSP，您想使用`cdata`or`pcdata`函数（我不记得是哪个，所以尝试两者）：

```
<svg><% cdata svg %></svg> 
```

希望有帮助！

# php - 使用 PHP 连接到 OSI Pi 数据库

> ID：13827743
> 
> 赞同：2
> 
> 时间：2012-12-11T20:12:35.067
> 
> 标签：php, osi

我正在尝试连接到 OSI Pi 数据库并不断收到以下错误。我正确设置了所有权限，因为我可以运行 VB 代码。它确实正确读取了服务器版本。

这是我的PHP：

```
 <?php
 echo "I will connect to PI Server, read pisdk version and read server time";
 echo "<br>";
 $pisdkComObject = new COM("PISDK.PISDK") or die("Unable to instantiate PISDK object");
 echo "PI server version {$pisdkComObject->PISDKVersion}";
 $myServer = $pisdkComObject->Servers->Item("XXXX_SERVERNAME_XXXX");
 $myServer->Open();
 echo "<br>";
 echo "PI server time is {$myServer->ServerTime}";
 ?> 
```

这是我的输出：

PI server 版本 1.3.6 致命错误：未捕获异常 'com_exception' 并带有消息 'Source: pisdk.dll 描述：无法在服务器上打开会话。[-10728] PINET：发送错误。在 E:\XXXX.php:12 堆栈跟踪：#0 E:XXXX.php(12): variant->Open() #1 {main} 在第 12 行的 E:XXXX.php 中抛出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:07:35.750

这是另一种方法：先决条件是安装 PI OLEDB Provider。

然后转到[http://adodb.org/dokuwiki/doku.php](http://adodb.org/dokuwiki/doku.php)并按照指示安装 php 的 ADODB 库。那里也有一些关于图书馆的介绍性信息。

我的下一步是生成一个 UDL（保存一个扩展名为“.udl”的空白文本文件），然后双击它打开“数据链接属性”对话框。在提供程序选项卡下，选择“PI OLE DB 提供程序”。在 Connection 选项卡下，在 Data Source 文本框中输入您的 pi 服务器的名称。您还需要为您的服务器配置唯一的登录信息。对于这个开发连接，我使用“piarchive”作为我的“初始目录使用”。[测试连接]成功后，您可以单击[确定]。

然后右键单击您的 UDL 并使用记事本或任何文本编辑器打开。选择并复制连接字符串（即“Provider=PIOLEDB.1;...等）。

接下来是我用来生成 CDT158 标记的小值表和相应数组的一些代码。在我的开发版本中，我将此代码放置在正文标记之间。

```
<?php
    包括（“adodb/adodb.inc.php”）；
    $connection = new COM("ADODB.Connection") 或 die("无法启动 ADO");

    // PI OLEDB (UDL) 连接字符串。
    $connection->Open("Provider=PIOLEDB.1;初始目录=piarchive;
        数据源=yourPIServerNameHere;Persist Security Info=False");

    $result_set = $connection->执行("
                选择标签、时间、值
                来自 picomp
                WHERE TIME >= '*-90m' AND tag = 'cdt158'
                ");
    $result_count = 0;
    $标签=数组（）；
    而 (!$result_set->EOF)
    { 打印 $result_set->fields[0].' | '.$result_set->fields[1].' | '.$result_set->fields[2].'<br />';
        array_push($labels, "{$result_set->fields[1]}");
        $result_count = $result_count +1;
        $result_set->MoveNext();
    }

    echo "<br />检索到的记录数为：".$result_count."<br /><br />";

    回声“<pre>”；
        print_r($标签); // 这显示生成的数组。
    回声“</pre>”；

    $result_set->关闭（）；// 可选的
    $连接->关闭（）；// 可选的
?>

```

# ruby-on-rails - 具有来自另一个对象的元素的依赖对象中的表单助手选择标记

> ID：13827747
> 
> 赞同：2
> 
> 时间：2012-12-11T20:12:43.053
> 
> 标签：ruby-on-rails, html-select

我是 Ruby on rails 的新手，我正在尝试在对象 a) 中显示带有来自对象 b) 的 id 的选择：

对象 a) 功能

对象 b) 经验

函数_form.html.erb

```
<div class="field">
<%= f.label :experience_id %><br />
<%= f.number_field :experience_id %> 
```

我想创建一个在表体验中显示项目的选择。我想这是一个循环，循环遍历@体验的所有元素，但不是如何循环。我已经阅读了有关表单助手的信息，但我无法启蒙。

非常感谢

关于第二个问题

非常感谢您的帮助。我按照您的建议进行了尝试，但是选择标记的名称不是对象的正确名称，我不知道如何将其与该辅助方法一起使用。所以我尝试了另一个助手，选择，并且成功了：

选项 a) select_tag :habilidad, options_for_select({"1" => 1, "2" => 2})

结果源代码：

```
<div class="field">
    <label for="skill_habilidad">Habilidad</label><br />
    <select id="habilidad" NAME="habilidad"><option value="1">1</option>
<option value="2">2</option></select>
  </div> 
```

选项 b) select(:skill, :habilidad, {"1" =>1, "2" => 2, "3" => 3, "4" => 4, "5" => 5})

结果源代码：

```
<div class="field">
    <label for="skill_habilidad">Habilidad</label><br />
    <select id="skill_habilidad" NAME="skill[habilidad]"><option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option></select> 
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:29:25.683

您可以使用`f.collection_select`示例：

```
<%= f.collection_select :experience_id, Experience.all, :id, :name, :prompt => true %> 
```

参考：[Rails Api 文档 :: Collection Select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:50:52.240

你可以这样`select_tag`使用`options_for_select`：

```
<%= select_tag :skills, options_for_select((1..5).to_a.map { |val| [val,val] }) %> 
```

您可以替换`(1..5).to_a`为变量。

参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:56:16.953

您可以使用`f.select`，例如：

```
<%= f.label :experience_id %><br />
<%= f.select :experience_id, Experience.all.collect {|e| [ e.name, e.id ] }, { :include_blank => true } %> 
```

例如，我曾经`e.name`是选择选项上的文本，您需要更改为所需的属性。

参考： [http ://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T18:44:53.183

这段代码对我有用

```
<%= f.select :id, Model.all.collect {|d| [ d.attributeN, d.attributeN ] }, {include_blank: 'None'}, class: 'form-control'%> 
```

# java - 从轴 Web 服务启动应用程序

> ID：13827748
> 
> 赞同：0
> 
> 时间：2012-12-11T20:12:58.670
> 
> 标签：java, axis

我正在尝试从轴 Web 服务中启动应用程序，但我不明白我做错了什么。我用来生成网络服务的类是这样的：

```
public class Esecutore {

public String esegui(){ 
        try {

            ProcessBuilder builder=new ProcessBuilder("parser.bat");
            builder.redirectErrorStream(true);
            Process pr;
            pr = builder.start();
            InputStream stdout=pr.getInputStream();
            OutputStream stdin=pr.getOutputStream();
            BufferedReader br=new BufferedReader(new InputStreamReader(stdout));
            BufferedWriter bw=new BufferedWriter(new OutputStreamWriter(stdin));
            String line = br.readLine();
            while(line!=null){
                line=br.readLine();
            }
            int termine=pr.waitFor();
            if(termine!=0){
                return "errore nell'inserimento";
            }
            return "finito";
        } catch (IOException e) {
            // TODO Auto-generated catch block
            return "errore: "+e.getMessage();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            return "errore: "+e.getMessage();
        }

}
} 
```

当我从命令行执行批处理文件时，它可以正常工作，它只是启动一个 .jar，不需要任何输入。但是，我可以看到，当我通过此代码执行此操作时，它的退出状态不同于 0，并且由于 .jar 应该写入数据库，我也从 db 日志中知道它根本不会被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:57:34.153

我会首先在轴外测试这个类的功能，看看它是否有效。
由于您有一个“bat”文件，我假设我们正在谈论 Windows 中的批处理文件。在这种情况下，ProcessBuilder 应该在构造函数中具有“cmd /c start parse.bat”。请[在此处查看](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)完整说明。

# macos - 使用自制软件在 OS X（山狮）上安装 node.js：无法自动检测 OpenSSL 支持

> ID：13827749
> 
> 赞同：1
> 
> 时间：2012-12-11T20:13:03.160
> 
> 标签：macos, node.js, openssl, homebrew

我需要在 OS X Mountain Lion 上安装节点 0.6。自制似乎是最简单的路线（从源代码构建无法链接）。使用命令：

```
brew install node 
```

它抱怨以下内容：

```
Checking for library dl                  : yes 
Checking for openssl                     : not found 
Checking for function SSL_library_init   : not found 
Checking for header openssl/crypto.h     : not found 
/private/tmp/node-x1II/node-v0.6.19/wscript:386: error: 

Could not autodetect OpenSSL support. 
Make sure OpenSSL development packages are installed. 
Use configure --without-ssl to disable this message. 
```

但是，似乎已安装 openssl：

```
> openssl version
OpenSSL 0.9.8r 8 Feb 2011 
```

自制软件需要什么神奇的东西才能看到openssl？

# excel - Excel 中的动态数据验证（非 VBA！）

> ID：13827750
> 
> 赞同：2
> 
> 时间：2012-12-11T20:13:09.420
> 
> 标签：excel, dynamic, validation

我得到了`n`包含产品的类别`m`。此列表未排序，例如：

![](../Images/4c3596f564d6d78c382554ac30c263dd.png)

现在这就是我基本上想要对这个列表做的事情：

1.  下拉：动态存储第一列的每个唯一值的列表的数据验证（= 我将无法选择 Category_5，因为它还不存在）。

2.  下拉列表：根据第一个下拉列表中选择的类别提供所有产品的列表。

![](../Images/a6e03e747d967e26e2192506ee4dfc26.png)

是否有任何非 VBA 解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:45:02.130

电子表格布局示例：

*   `A2:A13` - 类别列表，项目不唯一
*   `B2:B13` - 产品列表
*   `Cell D2`down - 下拉列表 1 源，唯一项目，动态
*   `Cell F2`down - 下拉列表 2 项增量编号 1..（公式中的计算较少）
*   `Cell G2`down - 下拉列表 2 源，动态
*   `Cell I2` - 下拉单元格 1
*   `Cell J2` - 下拉单元格 2

单元格`D2`：数组公式（`Ctrl`- `Shift`-`Enter`从公式窗口输入，大括号由 Excel 插入，而不是由用户插入），向下复制：

```
{=INDEX($A$2:$A$13;MATCH(0;COUNTIF($D$1:D1;$A$2:$A$13);0))} 
```

给出一个唯一的类别列表。

单元格`G2`：数组公式，按照上一节中的说明进行操作：

```
{=INDEX($B:$B;SMALL(IF($A$2:$A$13=$I$2;ROW($A$2:$A$13);"");$F2))} 
```

给出在单元格中选择的类别下的产品列表`I2`。

列表未排序：最好按类别和产品对初始列表进行排序。
无错误处理：应使用`IF ISERROR`子句更新公式。

[Dynamic_dropdown_lists.xls](http://www.bumpclub.ee/~jyri_r/Excel/Dynamic_dropdown_lists.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:36:42.550

要使其在 Excel 中没有 VBA 的情况下工作，您需要某种方法来重置第 2 列中数据验证的有效条目范围，并且由于源只能是列表或范围，您必须编写一些代码来更改它关联的第 1 列值更改时的信息。

如果您不想走 VBA 路线，那么这些活动对于像 Access（或者可能是 InfoPath）这样更适合您的需求的数据库来说是生计。

# php - 将 PHP/HTML 下拉菜单转换为单选按钮

> ID：13827753
> 
> 赞同：-1
> 
> 时间：2012-12-11T20:13:17.350
> 
> 标签：php, html, mysql, drop-down-menu, radio

目前我有一个下拉菜单循环（循环取决于我可以定义的每页结果，你可以看到我为什么要使用循环），我想把下拉菜单变成单选按钮。下面是我的代码。你能给我一些关于如何转换它的指示吗？

```
if (isset($_POST['formSubmit'])){
    $rating = $_POST['rating'];
    $accountID = $_POST['accountID']; 

    $query = mysql_query("UPDATE Spreadsheet SET rating='$rating' WHERE accountID='$accountID'");
}

while ($row = mysql_fetch_array($query)){

    ?>

<form name ="rating" method ="POST" action ="" > <?

echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";

?>
    <select name="rating">

        <? 

        $values = array('0 - No rating','1 - Very Bad','2 - Bad','3 - Average','4 - Above Average');

        for ($i =0; $i < count($values); $i++){
            echo "<option value = \"$i\""; 

            if ($row['rating'] == $i) {
                echo "selected=\"selected\"";
            }

            echo ">" . $values[$i] . "</option>";

        }

        ?>

        </select>
        <input type ="Submit" name ="formSubmit" value ="Submit" />
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:23:06.103

```
 $values = array('0 - No rating','1 - Very Bad','2 - Bad','3 - Average','4 - Above Average');   

    <form name ="rating" method ="POST" action ="" >
     <?
    echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";
     for($i =0; $i < count($values); $i++)
    {
    ?>
     <input type="radio" name="rbl" value="<?php echo $row['rating']; ?>" id="rbl_<?php echo $i; ?>" <? if($row['rating'] == $i) echo "checked='checked'"; ?>/>

<label for="rbl_<?php echo $i; ?>"><?php echo $value[$i]; ?></label>

     <? } ?>

            <input type ="Submit" name ="formSubmit" value ="Submit" />
            </form> 
```

# java - 奇怪的错误启动 Java (Eclypse)

> ID：13827754
> 
> 赞同：1
> 
> 时间：2012-12-11T20:13:18.053
> 
> 标签：java, launch

我阅读了有关此问题的讨论，但找不到解决方案！

我写了一个非常简单的程序，但是当我启动它时，出现了这个错误：

```
 << Selection does not contain a main type >> 
```

非常感谢谁会帮助我。我是 Java 新手：/

* * *

```
public class Implementation{

  public static void Main(String args[]){

    Operations_numbers operations;
    operations = new Operations_numbers();

    int subtraction = operations.subtraction(10,2);
    String result_Comparison = new String();
    result_Comparison = operations.comparison(8,3);

    System.out.println(result_Comparison); 
    System.out.println(subtraction); 

  }

}
---------------
public class Operations_numbers{

  public int subtraction (int x, int y){
    int subtraction;
    subtraction=x-y; 
    return subtraction;
  }

  public String comparison (int x, int y){    
    if(x>y){    
      String result="the number" + x + "is bigger than the number" + y;
      return result;
    }    
    else{  
      String result="the number" + y + "is bigger than the numbero" + x;
      return result;
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:17:53.517

`main`应该是小写。正确的签名是

```
public static void main(String args[]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:17:54.600

函数名称区分大小写。正如错误消息所示，它找不到主要功能。但是，您定义了一个 Main 函数。用小写的 main 试试。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:18:29.400

你必须改变

```
public static void Main(String args[]) {/* code */} 
```

至

```
public static void main(String args[]) { /* code */ } 
```

因为 java 是区分大小写的并且期望一个名为 main 的方法，在小写中，作为入口点。

# android - 带有导航选项卡的 ActionBar 随屏幕方向改变高度

> ID：13827762
> 
> 赞同：10
> 
> 时间：2012-12-11T20:13:35.930
> 
> 标签：android, android-actionbar, android-tabs, nexus-7

我的目标是增加`ActionBar`纵向模式的高度。我目前设置

> 安卓:actionBarSize

在我的 Themes.xml 中。

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="DayTheme" parent="android:style/Theme.Holo.Light">
        <item name="android:actionBarSize">@dimen/actionBarHeight</item>
        <item name="android:actionBarTabTextStyle">@style/tab_indicator_text_dark</item>
    </style>
    <style name="NightTheme" parent="android:style/Theme.Holo">
        <item name="android:actionBarSize">@dimen/actionBarHeight</item>
        <item name="android:actionBarTabTextStyle">@style/tab_indicator_text_light</item>
    </style>
</resources> 
```

我在横向模式下获得了想要的效果，我将`ActionBar`高度增加到 80dp。

![在此处输入图像描述](../Images/e6c4fe7c4ba699e4988112592bad09e8.png)

但是，我将屏幕旋转到纵向模式，高度会像这样变化。

![在此处输入图像描述](../Images/b8ea6ebd7011df60146cc06badc0f37c.png)

注意我在代码中进行了以下调用。

```
final ActionBar bar = getActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
bar.setDisplayShowTitleEnabled(false);
bar.setDisplayShowHomeEnabled(false); 
```

我正在使用 android 4.2 的 Nexus 7 上进行开发。

如何在纵向模式下获得与横向模式下相同的 80dp 高度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:41:02.347

你写了：

> 如何在纵向模式下获得与横向模式下相同的 80dp 高度？

通过将*主题*`Application`属性`android:actionBarSize` *和*`ActionBar.TabView`样式属性`android:minHeight`（或）设置为`height`80 dip。

一个基本的例子：

```
<style name="ThemeHoloWithActionBar" parent="android:Theme.Holo.Light">
    <item name="android:actionBarTabStyle">@style/ActionBarTabStyle</item>
    <item name="android:actionBarSize">80dip</item>
</style>

<style name="ActionBarTabStyle" parent="@android:style/Widget.Holo.ActionBar.TabView">
    <item name="android:minHeight">80dip</item>
</style> 
```

在 Manifest 中设置主题：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/ThemeHoloWithActionBar" > 
```

在 Activity 中向 ActionBar 添加一些选项卡：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ActionBar actionbar = getActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionbar.setDisplayShowTitleEnabled(false);
    actionbar.setDisplayShowHomeEnabled(false);
    ActionBar.Tab tabA = actionbar.newTab().setText("Tab A");
    ActionBar.Tab tabB = actionbar.newTab().setText("Tab B");
    ActionBar.Tab tabC = actionbar.newTab().setText("Tab C");

    tabA.setTabListener(new MyTabsListener());
    tabB.setTabListener(new MyTabsListener());
    tabC.setTabListener(new MyTabsListener());

    actionbar.addTab(tabA);
    actionbar.addTab(tabB);
    actionbar.addTab(tabC);
} 
```

这会在纵向模式下生成具有 80 倾角高度的标签：

![在此处输入图像描述](../Images/1eb4b5ec7950bc0ed084d27189a8e754.png)

以及横向模式下倾角高度为 80 的标签：

![在此处输入图像描述](../Images/cdbb7a8f48b37afdd54c6f43c9103152.png)

**编辑：**

对于此示例，Manifest 中的 SDK 版本设置为：

```
android:minSdkVersion="12"
android:targetSdkVersion="15" 
```

根据 OP，该示例适用于这些 SDK 设置。但是，如果`targetSkdVersion`改为设置为 16 或 17，则该示例不起作用。OP 已提交[错误报告：](https://code.google.com/p/android/issues/detail?id=41792)

# php - 比较txt文件中行中的两个字符串

> ID：13827768
> 
> 赞同：-1
> 
> 时间：2012-12-11T20:13:50.283
> 
> 标签：php

我有一个 txt 文件，其中包含一些信息，其中包括名称和密码。从表单提交中，我需要检查密码是否与名称匹配，我真的很讨厌 txt 文件，但这有效：

```
 function checkPassword($password, $username){
        $userinfo = file_get_contents(USER_INFO); 
        $uniqueinfo = explode("-", $userinfo);
        if (in_array($password, $uniqueinfo) && in_array($username, $uniqueinfo)) {
            return true;
        } else {
            return false;
        }
    } 
```

现在，正如您可能已经猜到的那样，只要找到有效的用户名和密码，即使它们不属于同一个帐户，它也会返回 true。因此，如果您从其他帐户输入密码，则可以返回 true。不好。所以，我尝试了：

```
 function checkPassword($password, $username){
        $userinfo = file_get_contents(USER_INFO); 
        foreach($userinfo as $uniqueinfo) {
            $uniqueinfo = explode("-", $uniqueinfo);
            if (in_array($password, $uniqueinfo) && in_array($username, $uniqueinfo)) {
                return true;
            } else {
                return false;
            }
        }
    } 
```

但是即使使用有效的凭据，这也只会返回 false。不知道我在这里哪里出错了，所以任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:21:19.153

问题是，除非密码和用户名与文件中的第一项匹配，否则您的函数将返回 false。尝试类似：

```
function checkPassword($password, $username){
        $userinfo = file_get_contents(USER_INFO);
        if(!$userinfo){
            echo "Failed to open file!";
            return false;
        }
        $bits = explode('-',$userInfo);
        for($x = 0; $x < count($bits);$x+=2){
            $testPass = $bits[$x];
            $testUser = $bits[$x+1];
            if ($username == $testUser && $password == $testPass) {
                return true;
            }
        }
        return false;
    } 
```

如果文件中没有项目匹配，这只会返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:22:58.187

**A.** `file_get_contents`返回字符串而不是数组`file`使用

```
 $userinfo = file_get_contents(USER_INFO); 
                      ^--------------------- string not array 
```

因此`foreach($userinfo as $uniqueinfo) {`也行不通

**B.**为了清楚起见，使用`checkPassword($username,$password)`而不是 checkPassword($password,$username)

**C.**用于`trim`验证前去除空格

修改功能

```
function checkPassword($username,$password) {
    $userinfo = file(USER_INFO);
    foreach ( $userinfo as $uniqueinfo ) {
        list($user, $pass) = array_map("trim",explode("-", $uniqueinfo));
        if ($username == $user && $password == $pass) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:23:56.203

好吧，如果你喜欢你的代码，只需添加一个标志并基于它返回。

```
function checkPassword($password, $username){
    $userinfo = file_get_contents(USER_INFO); 
    $lines = explode("\n", $userinfo);
    foreach($lines as $uniqueinfo) {
        if (strstr($uniqueinfo, $password) && strstr($uniqueinfo, $username)) {
            return true;
        }
    }
    return false;
} 
```

# c - 调用函数使 UThash 失败

> ID：13827769
> 
> 赞同：3
> 
> 时间：2012-12-11T20:13:58.647
> 
> 标签：c, function, pointers

我正在使用哈希表实现 UThash。

我正在使用原语插入元素：

```
 HASH_ADD(hh,hash_table,key,keylen,elem); 
```

并使用原语检索元素：

```
 HASH_FIND(hh,hash_table,key,keylen,elem); 
```

出于某种我不知道的原因，当我调用函数时，哈希查找的行为正在被修改。也就是说，**uthash 没有找到 table 中存在的元素**。

我怀疑记忆在某种程度上受到了损害。

触发这个失败的函数**不需要执行任何代码**使UThash失败：

```
 //Note: ct = custom_type
    int func1(ct1 *ptr1, ct2 *ptr2, ct3 *ptr3,char **buffer,size_t *size)
    {
       HASH_FIND(...) //does not work

       /**
        * code
        */
        return 0;
    }

    int func2(ct1 *ptr1,ct2 *ptr2,ct3 *ptr3)
    {
        char *buffer;
        size_t buf_size;

       /**
        * code
        */

        HASH_FIND(...) // works!
        if(func1(ptr1,ptr2,ptr3,&buffer,&buf_size)){
            //code
        }/*error*/

        return 0;
    }

    int func3(ct1 *ptr1,ct2 *ptr2,ct3 *ptr3)
    {
        char *buffer;
        size_t buf_size;

        HASH_FIND(...) // works!
        if(func1(ptr1,ptr2,ptr3,&buffer,&buf_size)){
            //code
        }/*error*/

        /**
         * code
         */

        return 0;
    } 
```

因此在*func2()*和*func3()*中都会发生相同的行为。*hash_find() 在我调用func1()*后开始失败 。

*所有其余的代码都完美且正确地执行。*

**我明显的问题是什么会导致这种类型的失败？**

感谢您阅读并随时询问任何其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T16:43:15.680

这可能是由于将具有相同键的多个项目添加到哈希中引起的。如果你使用 uthash，你需要确保你的结构中没有重复的键，或者提供一个包装函数来用新的替换旧的项目。否则，结构的行为是不可预测的，并可能导致您描述的故障。

来自[uthash 用户指南](http://uthash.sourceforge.net/userguide.html)：

> 如果您的程序有可能生成重复键，则必须在将键添加到散列之前明确检查唯一性。如果键已经在散列中，您可以简单地修改散列中的现有结构，而不是添加项。将具有相同键的两个项目添加到哈希表是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T15:10:29.667

那是因为您正在散列指针而不是数据。

使用[HASH_ADD_KEYPTR](http://troydhanson.github.io/uthash/userguide.html#_string_keys)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T09:07:14.090

也许不是这样，但是当我使用 some`struct`作为`HASH_FIND`. 用于确定密钥长度时请注意`struct`填充。如果您没有正确初始化密钥，则此填充可能是您查找时找不到`sizeof()`的原因。`uthash`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T09:24:40.627

我有类似的问题，当我的密钥类型为**unsigned char时，用****int** HASH_FIND_INT替换它后开始正常工作。进一步的调查表明，打扰**signed char**和**unsigned char**是不合适的，而**short int**和**unsigned short int**似乎也可以正常工作。

可能 8 位不足以让哈希函数计算算法正常运行。**请注意，带有unsigned char**操作的原始代码是断断续续的，代码在某些版本中有效，在其他版本中无效（与 uthash 无关的更改）。

结论：使用**signed int**类型的密钥正确操作 HASH_FIND_INT，或使用**short int**或**unsigned short**风险自负。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-23T15:10:57.083

`struct`正如@yerden 所提到的，由于填充，我也遇到了这个问题。`struct`在 gcc 上，使用打包属性定义 很容易，但速度很慢，如

```
struct __attribute__((__packed__)) a_struct {
    char a, b;
    unsigned int i;
}; 
```

[uthash](https://troydhanson.github.io/uthash/userguide.html#_structure_keys)结构键手册中提到了这个问题，解决方案是`struct`在将其添加到散列之前将其清零，如此处所示。

另一个解决方案是[了解结构包装](http://www.catb.org/esr/structure-packing/)并重新组织你的`struct`填充不是（或更少）问题。[在另一个有用的堆栈溢出问题](https://stackoverflow.com/questions/4306186/structure-padding-and-packing)中给出了结构打包的快速概述。

# emacs - Emacs/ESS - 通过 iESS 缓冲区非常缓慢

> ID：13827770
> 
> 赞同：3
> 
> 时间：2012-12-11T20:13:59.983
> 
> 标签：emacs, ess

在 iESS[R] 缓冲区内移动非常缓慢——为此我使用 Alt+p/Alt+n 或 Ctrl+p/Ctrl+n。当我尝试遍历 iESS[R] 缓冲区时，确实看到迷你缓冲区中显示了“帮助”。不确定这是否是导致缓慢的原因 - 可以禁用吗？

```
> sessionInfo()

R version 2.14.0 (2011-10-31)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
[1] C

attached base packages:
[1] datasets  grid      utils     stats     graphics  grDevices methods
[8] base

other attached packages:
 [1] bootstrap_1.0-22 lattice_0.19-26  xtable_1.5-6     stringr_0.4
 [5] ggplot2_0.8.9    proto_0.3-9.2    reshape_0.8.4    plyr_1.5.2
 [9] nlme_3.1-101     MASS_7.3-13

loaded via a namespace (and not attached):
[1] RColorBrewer_1.0-2 digest_0.4.2       tools_2.14.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:05:51.883

缓冲区大约有 500K 行，因为它包含几天的工作输出。我已登录到服务器计算机，但不确定 eldoc 正在读取的文件的访问速度。

无论哪种方式，这都为我解决了

```
(setq ess-use-eldoc nil) 
```

手册说以下内容也应该有效，但还没有运气

```
(setq ess-use-eldoc ’script-only) 
```

VitoshKa，感谢您的回复

# dart - web-ui 2路数据绑定

> ID：13827771
> 
> 赞同：2
> 
> 时间：2012-12-11T20:14:00.887
> 
> 标签：dart

我是飞镖新手。

我试图在 Seth Ladd 的博客上构建[web-ui 示例。](http://blog.sethladd.com/2012/11/your-first-model-driven-view-with-dart.html)我创建了一个新应用程序。

我的 html 看起来像这样：

```
<!DOCTYPE html>
<html> 

  <head> 
    <meta charset="utf-8"> 
    <title>Proefje</title> 
    <link rel="stylesheet" href="Proefje.css"> 
  </head> 

  <body> 

    <h1>Hello MDV</h1> 
    <p>MDV is {{superlative}}</p> 
    <button id="change-it" on-click="changeIt()">Change</button> 

    <script type="application/dart" src="Proefje.dart"></script> 
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script> 
  </body> 
</html> 
```

像这样的飞镖代码：

```
import 'dart:math';
import 'dart:html'; 
import 'package:web_ui/web_ui.dart'; // not sure about this line

String superlative; 
List<String> alternatives = const ['wicked cool', 'sweet', 'fantastic']; 
Random random; 

main() { 
  superlative = 'awesome'; 
  random = new Random(); 
  query('#change-it').text = 'Do Change'; 
} 

changeIt() => superlative = alternatives[random.nextInt(alternatives.length)]; 
```

还有我的 pubspec.yaml

```
name:  Proefje
description:  A sample application 

dependencies:   
  web_ui: any 
```

当我运行应用程序时，我看到查询函数更改了按钮中的文本，但`MDV is {{superlative}}`它保持原样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:30:58.460

您需要按照 Seth Ladd 博客的设置部分中的说明编译您的 html。

> 如果您是 Dart Web Components 的新手，您可能想阅读我[的 Your First Web Component](http://blog.sethladd.com/2012/11/your-first-web-component-with-dart.html) with Dart 文章或[Dart Web Components 文章](http://www.dartlang.org/articles/dart-web-components/)。就像 Dart Web Components 一样，要使 MDV 工作，您需要获取包含 dwc 编译器的 web_components 包。编译器将 MVC 和 WC 代码转换为 vanilla Dart 和 HTML。

基本上你可以`build.dart`在你的根目录中添加一个类似的东西：

```
import 'package:web_ui/component_build.dart';
import 'dart:io';

void main() {
  build(new Options().arguments, ['web/App.html']);
} 
```

（请参阅[Web UI 工具](https://www.dartlang.org/articles/dart-web-components/tools.html)）

# sql - 如果 TOWN 不可用，则选择 CITY Oracle

> ID：13827772
> 
> 赞同：1
> 
> 时间：2012-12-11T20:14:02.373
> 
> 标签：sql, oracle

我想`SELECT`基于一个名为 的列来取值，`LOCATION`但`SELECT`如果`LOCATION`没有 'TOWN' 的值，我想评估 'TOWN' 的值。`LOCATION ='TOWN'``SELECT``LOCATION='CITY'`

表中总是有值，`LOCATION='CITY'`但我们想从表中获取值`LOCATION='TOWN'`，如果它没有返回值，则回退到`LOCATION='CITY'`.

这可以在同一个（单个）中完成吗`SELECT`？

我不认为这可以使用简单的解码来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:50:08.333

有许多技术可以使用，最好的方法取决于您是需要查询多个什么（地点？公司？客户？）还是只需要一个，以及城镇位置记录不存在的可能性。

这是一种依赖于“TOWN”排序高于“CITY”的字母数字的方法：

```
select value
from   ...
where  id = whatever and
       location = (
         select max(location)
         from   ...
         where  ? = ? -- correlated on whatever the id is for this thing) 
```

顺便说一句，听起来您已经过度规范化为实体属性值模式，因此请为这种类型的更多痛苦做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:56:38.127

这似乎更适合一个函数，但它是可能的（至少，基于我对你的问题的理解）。

我创建了一个[sql fiddle](http://www.sqlfiddle.com/#!4/a7ab1/1/0)来演示它。

用您的值或 ID 替换 City/Town。该`EXISTS`子句搜索您的第一级搜索（城市，基于您的问题） - 如果失败，它会回退到匹配`else`条件（在这种情况下为城镇）。

```
SELECT id, population
  FROM locations
 WHERE
  CASE WHEN EXISTS
      (
        SELECT id
        FROM locations l2 
        WHERE location = 'City'
      ) THEN 'City'
  ELSE 
      'Town'
  END = location 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T02:21:51.770

在不知道架构的情况下，如果您只需要一个值，请尝试此操作：

```
Select i.*,
  NVL((select return_value from town where i.location = town and rownum<=1),
      (select return_value from city where i.location = city and rownum<=1)) as value
From my_table i 
```

或者如果它更多：

```
Select i.*,
  Nvl(city.c1, town.c1) as value1,
  Nvl(city.c2, town.c2) as value2
From my_table i, city, town
Where i.location=city.city(+)
  And i.location=town.town(+) 
```

# javascript - HTML5 History API 的优雅降级

> ID：13827774
> 
> 赞同：1
> 
> 时间：2012-12-11T20:14:06.757
> 
> 标签：javascript, html

我正在使用本机 HTML5 History API 调用，并且我知道[跨浏览器兼容性问题](https://github.com/balupton/history.js/wiki/The-State-of-the-HTML5-History-API)，但在我的特定用例中，这些并不重要。对于我有限的需求，浏览器的行为始终如一，上面链接中的表格讲述了同样的故事。所以我真的不想在页面上添加另一个 JS 库（History.js），但我绝对希望它在不支持它们的浏览器中优雅地失败。我不希望他们抛出 JS 错误。

例如，IE（我想其他不支持的浏览器也会）抛出这个 JS 错误：`Object doesn't support property or method 'replaceState'`

我试过这样做，但它不起作用：

```
window.history = window.history || {};
if (jQuery.isEmptyObject(window.history)) {
    window.history.prototype.replaceState = function(a,b,c) {};
    window.history.prototype.pushState = function(a,b,c) {};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:16:37.033

检查`pushState`历史对象中是否存在。

```
if( !(window.history && 'pushState' in window.history) ) 
```

# rss - 自定义类型的RSS--Orchard

> ID：13827777
> 
> 赞同：4
> 
> 时间：2012-12-11T20:14:17.427
> 
> 标签：rss, orchardcms

我们正在考虑获取 Orchard 站点上内容的 RSS，然后使用 C# 对其进行解析，以将其粘贴到我们自己的数据库中。为此，我们需要 RSS 来获取我们自定义类型的每个字段。现在，当我获得投影的 RSS 时，我们获得了标题、描述等的默认元素，但没有获得类型的字段。

另一方面，使用 Import/Export 模块，我能够获取自定义类型的所有字段，但该模块不支持查询（这就是我们使用投影的原因）。

有没有办法获得一个类型的所有字段的 RSS 提要，但使用查询/投影？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:46:57.053

没有自动的方法可以做到这一点，但您可以编写自己的模块来执行此操作。

您需要做的是添加一个实现`Orchard.Core.Feeds.IFeedItemBuilder`接口的类。接口本身只有一种你需要实现的方法—— `void Populate(FeedContext context)`.

以下是如何实现此方法的代码片段：

```
public void Populate(FeedContext context) 
{
    context.Response.Contextualize(
      c => {
        foreach (var feedItem in context.Response.Items.OfType<FeedItem<ContentItem>>()) 
        {
          var contentItem = feedItem.Item;
          foreach (var part in contentItem.Parts)
          {
            // extract data you're interested in from parts
            foreach (var field in part.Fields)
            {
              // extract data you're interested in from fields
              feedItem.Element.SetElementValue("description", "Text to output to RSS");
            }
          }
        }
      });
} 
```

`context.Response.Items`保存将输出到 RSS 的所有项目。这里棘手的部分是要知道您想要将哪些数据输出到 RSS，因为有许多不同的部分具有许多不同的字段。它们都有不同的属性名称，您希望输出到 RSS。

因此，我的建议是测试`contentItem`上面的示例中是否属于您的自定义类型。如果是，请将其转换并使用您的自定义字段名称来`description`填充`feedItem`.

# php - 在新的谷歌语音文本上执行 php 脚本

> ID：13827779
> 
> 赞同：0
> 
> 时间：2012-12-11T20:14:29.323
> 
> 标签：php, google-voice

现在，我有一个有效的 PHP 脚本，它将提取我所有的新 Google 语音文本以执行某些操作。目前，我必须通过计算机手动执行 PHP 脚本。通常情况下，我在路上，我需要对我的网站进行即时更改。我想知道如何在每个新文本进入时自动执行脚本。目标是能够向我的谷歌语音帐户发送短信，然后根据我发短信的特定代码更新我的网站。

我曾考虑过元标记设置间隔或 crontab，但我不想设置秒/分钟的间隔，而是想防止对脚本进行不必要的调用。对我的 Google Voice 帐户的重复请求是否会标记 Google 的任何人？

此外，所有文本都可以转发到电子邮件。不确定从电子邮件客户端开始脚本是否更容易。如果有，请指教。

就像我说的那样，PHP 脚本已经编写好并且可以工作了。我只需要帮助确定仅在收到新文本或电子邮件时如何调用脚本。

单元格 -> 谷歌语音 -> PHP -> 网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:37:35.443

您可以使用 curl 或运行控制台命令来执行 php 脚本

php.net/manual/en/function.shell-exec.php

或者

php.net/manual/en/function.exec.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:26:03.140

Gearman [http://gearman.org/](http://gearman.org/)可以解决问题。

它具有多语言 API，因此您可以在 php 中创建一个工作人员，并且每次工作进入 gearman 时都会调用工作人员来完成工作。

# linux - 提高进程（linux）chrt的所有线程的优先级/调度策略？

> ID：13827791
> 
> 赞同：4
> 
> 时间：2012-12-11T20:15:15.840
> 
> 标签：linux, multithreading, process, pthreads, scheduling

我想在特定外部进程的所有线程上设置 SCHED_RR （和优先级）。

什么是最好的方法，从 shell 和另一种情况下做 - 当它作为一个孩子创建它时，从另一个进程以编程方式。谢谢！

我不擅长 shell 脚本，不知道如何为进程的所有线程运行“chrt”，以防万一，线程有不同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-25T17:34:39.917

您也可以使用 -a 参数。

```
chrt -p -r -a ${mainpid} 
```

请注意，这不会更改在您运行 chrt 之后将启动的线程的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T16:10:09.580

试试这个，以提高 udevd 的优先级：

显示进程所有线程的优先级

$ for p in $(pidof udevd); 执行 chrt -p $p; 完毕

样本输出

pid 1249 的当前调度策略：SCHED_OTHER

pid 1249 的当前调度优先级：0

pid 1248 的当前调度策略：SCHED_OTHER

pid 1248 的当前调度优先级：0

pid 788 的当前调度策略：SCHED_OTHER

pid 788 的当前调度优先级：0

提高进程所有线程的优先级

$ for p in $(pidof udevd); 执行 chrt -p 45 $p; 完毕

样本输出：

pid 1249 的当前调度策略：SCHED_OTHER

pid 1249 的当前调度优先级：0

pid 1249 的新调度策略：SCHED_RR

pid 1249 的新调度优先级：45

pid 1248 的当前调度策略：SCHED_OTHER

pid 1248 的当前调度优先级：0

pid 1248 的新调度策略：SCHED_RR

pid 1248 的新调度优先级：45

pid 788 的当前调度策略：SCHED_OTHER

pid 788 的当前调度优先级：0

pid 788 的新调度策略：SCHED_RR

pid 788 的新调度优先级：45

# c++ - 如何解决 GCC 与标准库包含路径的混淆

> ID：13827793
> 
> 赞同：0
> 
> 时间：2012-12-11T20:15:38.520
> 
> 标签：c++, linux, gcc

我编写了一个构建良好的 C++ 库（gcc 4.6.3），直到我尝试与 openssl 链接。我在 Ubuntu 12.04 上。

使用 `sudo apt-get install libssl-dev` openssl 包含安装在`/usr/include/openssl`. 但是使用`-I /usr/include`会导致 C++ 库出现许多错误。他们似乎正在使用`/usr/local/include/`，并且这个新的包含路径正在引起冲突。

我看到 C++ 库的版本都在

```
 /usr/include/
    /usr/local/include/ 
```

使用更新的版本`/usr/include`。

如何指导 gcc`/usr/include/c++`用于标准库？那是解决我的问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:21:41.730

您不需要弄乱`-I`标志。标题可以包含在

```
#include <openssl/[header name here]> 
```

库可以使用`-l<library name>`. 例如，您将链接`libssl`到：

```
g++ <other options> -lssl <files> 
```

# pyqt - 在pyqt中清理小部件的正确方法

> ID：13827798
> 
> 赞同：8
> 
> 时间：2012-12-11T20:15:47.763
> 
> 标签：pyqt, pyqt4

使用 PyQt4 时清理/删除小部件的“正确”或惯用方式是什么？

考虑以下代码：

```
choices = ['a', 'b', 'c']
checkboxes = []
layout = QtGui.QVBoxLayout()

dialog = MyDialog()

for c in choices:
    checkboxes.append(QtGui.QCheckBox(c)
    layout.addWidget(chkbox)

dialog.setLayout(layout)

for c in checkboxes:
    c.setParent(None)
    c.deleteLater()
    c = None 
```

上面的代码使用`setParent()`, `deleteLater()`, 并将对象设置为`None`. 所有这些都是必要的吗？

另一种可能的情况是我有一个带有一堆小部件的对话框，并且想要删除这些小部件并添加新的小部件。我不想“泄露”旧的小部件，但我不确定做这样的事情的正确方法是什么。

在我看来，这`deleteLater()`可能永远不需要。它只是减少引用计数吗？如果是这样，只是将变量设置为 None 不会做同样的事情吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T22:30:26.873

您应该记住的第一件事是为您的小部件使用父/子关系。当您这样做时，它们将归 Qt 所有，并在删除父级时自动清理所有子级。

```
dialog = MyDialog()

for c in choices:
    checkboxes.append(QtGui.QCheckBox(c, parent=dialog))
    layout.addWidget(chkbox) 
```

在这种情况下，当您删除对话框时，所有复选框都将被正确清除。这处理了您问题的一部分。我意识到当您将父级添加到布局时，您隐含地设置了父级。但是您不应该在删除之前清除该父级。是父关系允许子自动被移除**。**不是参考计数。引用方面将是一个 python 端的东西，当没有更多对它的引用时，它将被垃圾收集。

`deleteLater`非常重要，当您希望在控制返回事件循环时发生删除时使用。当您从布局中删除一些小部件并添加新小部件时，这也是删除小部件的安全方法：

```
# clear a layout and delete all widgets
# aLayout is some QLayout for instance
while aLayout.count():
    item = aLayout.takeAt(0)
    item.widget().deleteLater() 
```

一旦此方法完成，这些小部件实际上将被删除。`deleteLater`对于删除当前正在发生插槽或事件的小部件也很有用。比如一个 QPushButton 可以在点击时自行删除。

也没有太多需要设置`c = None`。一旦删除父对象，并触发删除其所有子对象，递归地，您对该对象的 python 引用将无效。因此，您需要做的就是不再使用它们。如果它们在列表中，请清除该列表。访问它们会提高`RuntimeError: wrapped C/C++ object of %S has been deleted`它们被删除的含义。

# c# - 计算文本文件中的行数并将它们与计数器进行比较

> ID：13827799
> 
> 赞同：0
> 
> 时间：2012-12-11T20:15:51.380
> 
> 标签：c#, file-handling, timepicker

嗨，我对 c# 很陌生，所以请原谅我的代码到处都是。

在我的应用程序中，我使用计数器来计算我的 if 语句，我现在想找到一个名为变量（日期）的文本文件，该变量是从我的时间选择器中选择的。我现在希望它计算该文本文件中的行数并将该数字添加到我的计数变量中并告诉我它是否小于 13。

```
 private void button1_Click(object sender, EventArgs e)
    {
           int TotalLines(string date)
    {
        using (StreamReader r = new StreamReader(date))
        {
            int i = 0;
            while (r.ReadLine() != null) { i++; }
            return i;
        }
    }

    if
{
    i + counter = <13
}

    MessageBox.Show ("Seats Available");

    else 

    MessageBox.Show ("please chose another date");
    }
 } 
```

}

我刚刚发布了那段代码，因为按钮中的所有代码都相当长，因为我毫无疑问已经走了很长一段路。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:23:50.567

你的意思是这样的吗？

```
private void button1_Click(object sender, EventArgs e)
{
    int counter = TotalLines(date);

    if (counter <= 13)
    {
        MessageBox.Show("Seats Available");
    }
    else
    {
        MessageBox.Show("please chose another date");
    }
}

public int TotalLines(string date)
{
    using (StreamReader r = new StreamReader(date))
    {
        int i = 0;
        while (r.ReadLine() != null) { i++; }
        return i;
    }     
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:26:22.640

Kyle Uithoven 的代码似乎是正确的。您可以通过将方法替换为以下内容来进一步简化`TotalLines`：

```
int counter = File.ReadLines(date).Count(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:27:23.867

C# If-else 语法：

```
if (condition)
{
    //Condition is true
    //Some commands
}
else
{
    //Condition is else
    //Some commands    
 } 
```

更好地在 button1_click 之外定义 TotalLines 函数。

```
public int TotalLines(string date)
{
    using (StreamReader r = new StreamReader(date))
    {
        int i = 0;
        while (r.ReadLine() != null) { i++; }
        return i;
    }     
} 
```

# jquery-mobile - jquery mobile $mobile.changepage 方法

> ID：13827801
> 
> 赞同：0
> 
> 时间：2012-12-11T20:15:55.333
> 
> 标签：jquery-mobile

我有一个包含几个页面的 html 文件，当用户在特定页面上按下按钮时，我正在加载一个新的 html 文件，其中包含带有结果的页面。页面加载工作得很好，问题是我无法在新 html 中的新页面之间导航。当我在浏览器上手动加载页面时，它工作得很好。

有人知道为什么吗？我想我需要在加载完成后对页面执行一种刷新操作，但我不会这样做，因为页面从远程服务器检索数据，我不知道刷新操作是否会尝试再次从远程服务器检索数据（这将重复用户等待他得到答案的时间）。

这是我使用的代码行： $.mobile.changePage( "menu.php?q="+query, { transition: "slide"} );

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:36:37.280

`... the problem is that i can't manage to navigate between the new pages in the new html.`

这一行让我相信您正在尝试为远程 URL 链接返回多页模板（这意味着您按下的链接不会链接到同一文档上的伪页面，而是链接到另一个文档）。jQuery Mobile 默认情况下不允许这样做（我认为您可以找到该功能的插件）。jQuery Mobile 仅从返回的外部文档中检索第一个`data-role="page`或元素。`data-role="dialog"`

您可以使用单页模板，其中每个伪页面都包含在其自己的文档中，并且您可以通过普通 URL 链接到每个伪页面（例如“/contact-us/index.php”）

**或者**

您可以将所有必要的页面放在一个文档中，并使用基于散列的链接（例如“#home”）在它们之间进行链接。当您这样做时，您仍然可以从数据库中检索数据，但您必须通过 AJAX 创建代码来执行此操作（并且很可能绑定到页面事件）。

**或者**

也许有一个插件。如果没有，其实做起来并不难，你只需要自己抓取外部`data-role="page"`元素，而不是让 jQuery Mobile 来做，将它们全部添加到 DOM，然后像往常一样过渡到第一个。

**更新**

如果你想一次加载多个伪页面，试试这个：

```
//hijack link clicks on links with the `click-hijack` class
$(document).on('click', '.click-hijack', function () {

    //show loader
    $.mobile.loading('show');

    //create AJAX request for pseudo-page(s)
    $.ajax({
        url      : $(this).attr('href'),
        dataType : 'html',
        success  : function (response) {

            //hide loader
            $.mobile.loading('hide');

            //get the pseudo-page(s) from the AJAX response
            var $pages = $(response).find('[data-role="page"], [data-role="dialog"]');

            //append the pseudo-page(s) to the DOM
            //(this may need to change if you are using a framework like ASP.NET as they can add wrapper DOM elements)
            $("body").append($pages);

            //now that the pesueo-page(s) is/are in the DOM, we can transition to them normally
            $.mobile.changePage('#' + $pages.eq(0).attr('id'));
        },
        error    : function () {
            //don't forget to handle errors
        }
    });

    //stop the default behavior of the link, as well as propagation of the click event
    return false;
}); 
```

注意：此代码未经测试，请在使用代码时考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:16:01.403

默认情况下，在 jQuery Mobile 中，当您[通过 ajax](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)链接到外部页面时， jQuery Mobile 只会拉取第一个`data-role="page"`，或者如果找不到，它将获取内容并将其包装在 data-role="page" div 中。

`data-ajax="false"`您可以通过链接到没有 ajax 的页面（添加到您的链接）来链接到外部多页文档。

如果您想通过 ajax 一次加载多个页面，您可以使用 @Jasper 建议的方法自己手动完成，也可以使用专门为此目的制作的[jQuery-Mobile-Subpage-Widget 。](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)

# php - 序列化和反序列化 $_session['cart']

> ID：13827805
> 
> 赞同：0
> 
> 时间：2012-12-11T20:16:12.417
> 
> 标签：php, mysql

我有一个购物车，我想保存 $_SESSION['cart'] ，其中包含用户选择的产品的 $product_id => $quantity。例如：

```
[cart] => Array
    (
        [366] => 2000
        [215] => 456
    ) 
```

首先我序列化 $_SESSION['cart'] 在我的数据库中插入它之前。

```
<?php
if($_SESSION['cart']) 
{
    $pedido= serialize($_SESSION['cart']);
}
?>

$sql1="insert into pedido(orden) values ('$pedido')"; 
```

现在在另一个页面中，我想查看 $_SESSION['cart']。所以我使用：

```
$sql2 = "SELECT orden FROM pedido where id_pedido = '$ID'";
$rs2 = mysql_query($sql2, $conexio) or die("Error al consultar: ".mysql_error()); 
$row2 = mysql_fetch_row($rs2);
$id_usuario=$row2[0];
$_SESSION['cartguardado']= unserialize($id_usuario); 
```

我知道在这最后一步我做错了什么。任何机构都可以帮助我并帮助我找到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:28:23.773

尝试输出 $row2

```
$sql2 = "SELECT orden FROM pedido where id_pedido = '$ID'";
$rs2 = mysql_query($sql2, $conexio) or die("Error al consultar: ".mysql_error()); 
$row2 = mysql_fetch_row($rs2);
print_r($row2);
$id_usuario=$row2[0];
$_SESSION['cartguardado']= unserialize($id_usuario); 
```

如果 $row2[0] 为空，那么您的数据有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T19:17:52.043

我注意到您序列化了会话代码，但没有以您可以用于 Php 程序的方式呈现它，即

```
if($_SESSION['cart']) 
{
    $pedido= serialize($_SESSION['cart']);
} 
```

根据我的小经验，我认为您需要先反序列化代码，以便您可以使用它，即

```
if($_SESSION['cart']) 
{
    $pedido = unserialize(serialize($_SESSION['cart']));
} 
```

# c# - 试图在文本框中屏蔽护照号码 C#

> ID：13827806
> 
> 赞同：1
> 
> 时间：2012-12-11T20:16:21.037
> 
> 标签：c#, asp.net, masking

所以我有一个包含护照值的文本框 # 但我需要用 X 或 * 屏蔽掉 9 个数字中的 6 个。

我不想用蒙面号码保存新护照号码，我只想查看它，但不确定他们如何事先设置代码是否可行。

```
<asp:TextBox ID="txtPassportNumber" 
    runat="server" 
    MaxLength="9" 
    Text="<%# ((TSAPassenger) Container.DataItem).Passport.DocumentNumber %>" 
    Enabled="<%# IsOutsideTenDayCutoff %>" /> 
```

后面的代码（按钮保存事件）：

```
// Passport
TextBox tmpPassportNumber = item.FindControl("txtPassportNumber") as TextBox;
string encodedPassport = "XXXXXX" + tmpPassportNumber.Text.Remove(0, 6);
tmpPax.Passport.DocumentNumber = (tmpPassportNumber != null) ? tmpPassportNumber.Text : string.Empty; 
```

我添加了 encodedPassport 部分，但如果我使用它，它会将其保存到数据库中。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:20:10.723

我会用密码框屏蔽输入。然后您可以进行确认以确保他们输入正确。

# java - 从字节数组中读取两个字节

> ID：13827809
> 
> 赞同：3
> 
> 时间：2012-12-11T20:16:30.800
> 
> 标签：java, byte

我正在用 Java 创建一个简单的应用程序，它允许我读取文本文件。我有一个字节数组，它被包装到 ByteBuffer 中：

```
 FileInputStream inputStream = new FileInputStream(name);
 FileChannel channel = inputStream.getChannel();
 byte[] bArray = new byte[8192];
 ByteBuffer byteBuffer = ByteBuffer.wrap(bArray);
 int read; 
```

然后我使用一个while循环来遍历文本文件：

```
while ( (read=channel.read(byteBuffer)) != -1 )
{
    for ( int i=0; i<read; i++ )
        //my code
    byteBuffer.clear( );
} 
```

我的问题是在这种情况下如何读取 Unicode 字符。Unicode 字符由 2 个字节（16 位）组成，所以我认为 bArray[i] 包含第一个（更高的）8 位，随后的 8 位是该字符的第二部分。因此，例如，如果我需要找出这个字符：“#”当前是否在索引 i 和 i + 1 上，我可以这样做吗？（二进制表示中的“#”：0010 0011）：

```
if (bArray[i] == (byte)10 && bArray[i+1] == (byte) 11) 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T20:21:03.250

简单的答案是您不应将文本数据视为字节流。具体来说，这意味着：**不要使用`ByteBuffer`**.

使用[`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)，它知道如何使用给定的编码来解释字节序列。

# ruby-on-rails - Rails REST 接口与 Kentico

> ID：13827819
> 
> 赞同：0
> 
> 时间：2012-12-11T20:17:25.143
> 
> 标签：ruby-on-rails, ruby, rest, kentico

我正在尝试从 Kentico CMS 访问 REST 接口，但我似乎无法在我的 Rails 应用程序中正确访问它。我可以在浏览器中访问它，然后我会弹出一个用户名/密码验证框，然后在输入正确的凭据后返回 JSON。

在我的 Rails 应用程序中，我正在使用[rest-client](https://github.com/archiloque/rest-client)并尝试通过以下方式访问：

```
username = 'username_here'
password = 'password_here'
page_url = 'page_url_here'

resource = RestClient::Resource.new(page_url, :username => username, :password => password)
response = resource.get 
```

也试过：

```
resource = RestClient::Resource.new(page_url)
resource.head :Authorization => Base64.encode64(username) + ":" + Base64.encode64(password)
response = resource.get 
```

两者都给我一个连接被拒绝的错误。[Kentico 的文档](http://devnet.kentico.com/docs/devguide/index.html?rest_authentication.htm)说，每个请求都需要发送一个授权标头，如下所示：

```
Authorization: Basic <enter Base64-encoded <username>:<password> here> 
```

所以我假设我不能正确发送标头，或者可能是 rest-client gem 不能胜任这项任务。我愿意使用其他宝石或完全不同的方法。任何帮助表示赞赏！

# **编辑：**

通过将第二个示例更改为以下内容，我能够摆脱连接被拒绝错误：

```
resource = RestClient::Resource.new(page_url)
resource.head :Authorization => "Basic " + Base64.encode64("%s:%s" % [username, password]) 
```

但是，我现在收到 405 Method Not Allowed 错误。浏览器发送的标题中是否还有其他内容，而不是rest-client？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:32:54.613

我做了更多的谷歌搜索，发现 RestClient 只是 Net::HTTP 标准库的包装器。

[http://www.ruby-forum.com/topic/1648618](http://www.ruby-forum.com/topic/1648618)

向下滚动[此页面](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)更多，我发现我正在寻找进行基本身份验证的内容：

```
uri = URI('http://example.com/index.html?key=value')

req = Net::HTTP::Get.new(uri.request_uri)
req.basic_auth 'user', 'pass'

res = Net::HTTP.start(uri.hostname, uri.port) {|http|
  http.request(req)
}
puts res.body 
```

对我来说，这比试图弄清楚如何让 RestClient 做你想做的事情要容易得多。希望这可以帮助将来的其他人不要像我一样浪费时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:30:09.360

我相信第一个例子应该是

```
resource = RestClient::Resource.new(page_url, :user => username, :password => password)
response = resource.get 
```

那是*user*而不是*username*。

# visual-studio-2010 - 单个外部文件中的 Web.config 自定义配置部分，Visual Studio 2010

> ID：13827822
> 
> 赞同：0
> 
> 时间：2012-12-11T20:17:48.110
> 
> 标签：visual-studio-2010, configuration, web-config

我在我的项目 web.config 中定义了几个自定义配置部分，当前的 web.config 设置可以毫无问题地引用这些部分。我现在尝试将其中一些自定义配置部分以及 appSettings 条目提取到他们自己的 .config 文件中，因为这些值正在从环境（DEV、QA、UAT、PROD）中改变。

我遇到的问题是，如果我的自定义配置部分指向同一个文件，它们每个都希望根元素是那种类型。以下是尝试的 web.config 设置的片段。

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <section name="custom1" type="Namespace.custom1, myProject"/>
        <section name="custom2" type="Namespace.custom2, myProject"/>
    </configSections>
    <custom1 file="/Dev.config">
    </custom1>
    <custom2 file="/Dev.config">
    </custom2>

    <appSettings file="/Dev.config">
    ... non environment specific entries
    </appSettings>

</configuration> 
```

在我的 Dev.config 文件中，我有以下部分

```
<?xml version="1.0"?>
    <custom1>
        <customVal1 attr1="abc" attr2="xyz"/>
    </custom1>
    <custom2>
        <diffCustomVal1 difAttr1="True" difAttr2="Jim"/>
    </custom2>

    <appSettings>
        ... environment specific entries
    </appSettings> 
```

我在网上查看过，但没有找到任何我喜欢的想法。我想知道其他人是如何解决这个问题的。我还尝试从不同的自定义配置部分创建一个单一的外部配置，将上面显示的配置放在该文件中，但随后程序无法从该配置文件中提取 appSettings 条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:29:11.853

从持续交付的角度来看，为每个环境简单地拥有单独的配置文件会更直接。

它们可以保存在源代码中的单独文件夹中，“DEV”是与项目一起保存的默认文件夹。

作为部署脚本/过程的一部分，您可以控制将哪个配置文件部署到每个环境。

我以前见过你所说的那种“链接”，最终结果通常是迷宫般的配置，每个环境中都有大量冗余条目。

# ruby-on-rails-3.1 - 如何让 best_in_place 的 respond_with_bip 工作？

> ID：13827829
> 
> 赞同：19
> 
> 时间：2012-12-11T20:18:17.853
> 
> 标签：ruby-on-rails-3.1, best-in-place

我无法`best_in_place`完全发挥作用。问题是，一旦我编辑了一个字段，为了能够再次单击并编辑该字段，我需要刷新页面。我可能错了，但我觉得这与`respond_with_bip`抛出`undefined method`错误有关。我认为这与没有将`best_in_place`资产放在正确的位置有关。目前，我有以下内容可以更新“常量”。但是当它命中时再次抛出一个错误`respond_with_bip`：

**节目：**

```
<%= best_in_place constant, :description %> 
```

**控制器的更新动作：**

```
def update
  @constant = Constant.find(params[:id])

  respond_to do |format|
    if @constant.update_attributes(params[:constant])
      format.html { 
        flash[:success] = "Constant Updated"
        redirect_to settings_path
      }
      format.json { 
        respond_with_bip(@constant) 
      }
    else
      format.html { 
        flash[:error] = "Constant Update Failed"
        @title = "Constants"
        @constant = Constant.new
        @partial_path = "settings/constants"
        redirect_to settings_path
      }
      format.json { respond_with_bip(@constant) }
    end
  end
end 
```

就`best_in_place`github 页面中的文件夹而言，我将整个`lib/best_in_place`文件夹放在了我的应用程序的`app/assets`文件夹中。javascript文件在`app/assets/javascripts`（这些文件正在工作，所以不用担心）。我把`lib/assets/best_in_place.rb`文件放在文件`config/initializers`夹里。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T15:57:41.127

这可能会有所帮助，[https://github.com/bernat/best_in_place/issues/220](https://github.com/bernat/best_in_place/issues/220)。从我在那里看到的情况来看，它看起来像是一个空白，这就是你得到的错误。如果您不需要使用它，您可以随时使用：

```
redirect_to @constant 
```

# javascript - 调试 javascript - Safari 将脚本隐藏在加载 gif 的苹果后面

> ID：13827838
> 
> 赞同：1
> 
> 时间：2012-12-11T20:18:36.357
> 
> 标签：javascript, debugging, safari

这让我发疯了。我在 safari (6.0.2) 中调试一个脚本。该脚本在我的断点处中断（我可以从调用堆栈中看出），但它实际上不会显示代码。我在应该显示 js 文件的空白页面前面加载苹果的 gif。我可以单步执行代码 - 我只是看不到它。一旦我单击继续按钮，gif 就会消失并显示我的 js 文件。

我希望我在做一些愚蠢的事情，但这让我发疯......

（我曾经使用萤火虫，但我想要改变，所以我正在尝试学习我的 safari 方式——这太令人气愤了，我很想放弃）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:07:00.797

好的，为了保持我的接受率，我不得不承认我正在通过重新启动 safari / 我的笔记本电脑来处理这个问题。

我应该打电话给 IT 支持 :(

（由于我无法复制问题，所以这不是我可以真正报告的错误）

# php - jquery在php中显示隐藏错误

> ID：13827841
> 
> 赞同：0
> 
> 时间：2012-12-11T20:18:54.623
> 
> 标签：php, jquery

我在左侧有一个带有链接的 div，在右侧有一个包含文本的 div。单击链接应更改文本。下面的代码在它是一个 .html 页面时可以正常工作，但是当我将它重命名为 .php 时它不起作用！！！

index.php 中的代码

```
<ul class="blocks-holder">
            <li class="block-1">
                <ul id="sidebar">
                    <li class="sidemenu">
                        <h2 class="custom"><span>О Аикидоу</span></h2>      
                        <ul>
                            <li class="cat-item"><a href="#" id="aikido" class="oaikidou">Аикидо</a></li>
                            <li class="cat-item"><a href="#" id="cemu" class="oaikidou">Чему служи?</a></li>
                            <li class="cat-item"><a href="#" id="odlike" class="oaikidou">Одлике тренинга</a></li>
                            <li class="cat-item"><a href="#" id="druga" class="oaikidou">Друга страна катане</a></li>
                            <li class="cat-item"><a href="#" id="istorija"  class="oaikidou">Историјат</a></li>
                        </ul>
                    </li>   
                </ul>
            </li>
            <li class="block-2">
                <div id="aikido">
                    <p class="block-title custom">Аикидо</p>
                    <br/>
                    <p class="thumb-text">
                        Употребна вредност једне борилачке вештине не може се измерити у рингу, 
                        па чак ни на улицу у конфликтој ситуацији која ће вам се можда догодити пар пута у животу или
                        вам се ако имате среће неће догододити уопште. Квалитет вештине мери се у свакодневном животу, 
                        кроз пролазне фазе расположења и свакодневне ритуале у периоду од јутра до мрака. 
                        Упpаво по томе се аикидо разликује од осталих борилачких вештина. 
                    </p>
                </div>
                <div id="cemu" style="display:none">
                    <p class="block-title custom">Чему служи?</p>
                    <br/>
                    <p class="thumb-text">
                        Аикидо вас спрема за савакодневни живот имајући у виду да није увек весео и здрав. 
                        Тајна је у традиционалном приступу борењу и идеји да живот постоји и након педесете године 
                        старости и да може бити подједнако забаван. Многи ударачки спортови и вештине своју примењивост 
                        заснивају на снази и физичкој спремности практиканата, што је легитиман приступ уколико је борца 
                        висок два метра и тежак 130 кг мишић, а пре пар дана је изашао из пубертета. Ипак, поставља се 
                        питање да ли је таквом борцу самодбрана уопште и потребна? Специфичност Аикидоа управо лежи у 
                        томе што је подређен аикидисти и његовим могућностима. Одређено бацање или хват више одгаварају 
                        нижим људима, док ће виши и тежи противници радије примењивати фронталне и директније нападе. 
                        Једноставно речено Аикидо је вештина за свакога невезано за године и занимање. 
                    </p>
                </div>
                <div id="odlike" style="display:none">
                    <p class="block-title custom">Одлике тренинга</p>
                    <br/>
                    <p class="thumb-text">
                        Један део тренинга у Аикидо клубу “Кошава” састоји се од низа вежби које ће подићи вашу кондицију на завидан ниво, 
                        док је онај главни остављен за репетицију ситних покрета који формирају једну одбрамбену  технику. 
                        Јер Аикидо је пре свега вештина самоодбране. Дужим практиковањем стећи ћете дијагоналну перспективу на свет 
                        коју вам омогућује новостечена снага коју сте добили тренингом, али ћете захваљујући филозофији Аикидоа бити 
                        свесни одговорности коју таква улога пружа, јер без етике нема ни моћи. Аикидо пре свега служи да вам олакша живот, 
                        да вам седење у канцеларији не представља проблем, да шетање пса не буде мучење и за њега и за вас, да се осечате као 
                        тинејџер који је случајно набасао на мудрост, тражећи нешто сасвим друго. Ова вештина је одличан начин испољите 
                        негативну енергију кроз агресију у идеалном окружењу и на људима који ће вам на томе бити захвални и узвратити истом мером. 
                        Аикидо није такмичење, у њему није идеја да стигнете први на циљ, већ да доласку на циљи не заборавите путовање до њега. 
                        Ипак Аикидо има и другу страну медаље, тупу и оштру страну катане. 
                    </p>
                </div>
                <div id="druga" style="display:none">
                    <p class="block-title custom">Друга страна катане</p>
                    <br/>
                    <p class="thumb-text">
                        Филозофски приступ је добар у сали, али је примена значајнији адут на улици. 
                        Аикидо обувата све аспекте борења, ударце кобинује са хватовима и бацањима, а полуга у корену зауставља сваки злонамерни напад. 
                        У зависности од примене и силе употребљене у техници Аикидо може да повреди, онесвести а чак и да нападачу одузме живот. 
                        Управо због озбиљности ове вештине тренер мора да буде особа од поверења са интегритетом и неопходним искуством у борењу и животу. 

                    </p>
                </div>
                <div id="istorija" style="display:none">
                    <p class="block-title custom">Историја вештине</p>
                    <br/>
                    <p class="thumb-text">
                          Јапанска борилачка вештина, релативно новог порекла, узела је маха у целокупном свету. 
                        Без обзира на своју кратку историју, она своје корене вуче из великог културног и историјског наслеђа, 
                        најстаријих борилачких вештина и старе источне традиције. Своје име Аикидо дугује комбинацији три идеограма : 
                        АИ- овај идеограм означава хармонију, општи склад у универзуму, КИ- буквални превод би био „пра-енергија“, 
                        односи се на унутрашњу енергију која води наше тело кроз стазе живота, „КИ“ има веома велику улогу у животу просечног Јапанца, 
                        јер пре модерне медицине све болести, источни лекари лечили су преко те, необјашњиве силе, 
                        ДО- означава одређени пут, правац у којем се наша животна прича развија, овај пут је усклађен хармонијом и енергијом раније поменутом.  
                        Оснивач ове борилачке дисциплине јесте Морихеј Уешиба (1883-1969). „О сенсеи“ (врховни мајстор, први учитељ) 
                        технике аикидоа узео је из аикиђуцуа који је научио од свог учитеља Сокаку Такеде, као и из : ђиу-ђицуа, кендђуцуа итд. 
                        Склад свих ових борилачких стилова обогаћен је сопственим техникама највећег мајстора, у изванредан, примењив и визуелно елегантан борилачки склоп. 
                    </p>
                </div>
            </li>               
        </ul> 
```

jQuery函数

```
$(".oaikidou").click(function () {
        var divname= this.id;
          $("#"+divname+"").show("slow").siblings().hide("slow");
        }); 
$('.oaikidou').click(function(e){
              e.preventDefault();
              $("#").load($(this).attr('href'));
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:27:58.567

首先，我不知道您为什么要绑定 2 个单击处理程序来处理相同的单击。将其合并到一个处理程序中。

其次，您的第二次点击处理程序中有错字`$("#").load($(this).attr('href'));`您缺少实际的`divname`ID。

我的更正（就我个人而言，我会进一步清理它，但我会把它作为练习留给你）。

```
$(function(){
        $('.oaikidou').click(function(e){
                var divname= this.id;
                $("#"+divname).show("slow").siblings().hide("slow");
                $("#"+divname).load($(this).attr('href'));
                e.preventDefault();
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:29:00.597

我解决了我的特殊问题。这不是因为我从 html->php 重命名了我的页面，同时我删除了一个在下拉框中使用的 jquery 库 twitter.js：

```
<div id="top">
  <div class="box">
  //// so i removed this part (to put in a login form)
  //    <div id="latest-tweet"><img src="img/twitter.png" class="twitter-bird"   
  //  alt="Twitter" /></div>
  </div>
</div> 
```

第一个代码停止工作......
可能在盒子或顶部div上使用了tweater.js，但不知道为什么
这是我的网站（直到明天）：www.aikido-kosava.rs/site
但它会是：www .aikido-kosava.rs
对所有人的 Ty

# php - 使用 PDO 和 ODBC 获取 SQL Server 输出参数的值

> ID：13827847
> 
> 赞同：2
> 
> 时间：2012-12-11T20:19:33.530
> 
> 标签：php, sql, parameters, pdo, output

我一直在通过向我公司的一个网页添加一些功能来学习 PHP，以在将新记录插入数据库之前验证 SSN 的用户输入。那部分工作正常。数据库插入涉及调用具有输出参数的 SQL Server 存储过程，该参数返回新记录的 GUID 以供后续过程使用。数据库插入部分有效，但是当我回显返回参数的值时，它是一个空字符串。

以下是相关细节： SQL Server 2008 在单独的服务器上运行 WAMP Server 2.2 在 Windows 64 PC 上运行 PHP 5.3.1 Apache 2.2.22

这是我的PHP代码：

```
$conn = new PDO( "odbc:Driver={SQL Server};Server=xxx.xxx.xx.xx;Database=xxxxx;charset=UTF-8'", "uid", "pwd");

if(!$conn) {
    die( "<br />Error connecting to SQL Server");
}

$conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

$resource_id = "";

$stmt = $conn->prepare("{CALL xxxx.dbo.app_sp_insert_rq(?, ?, ?, ?, ?, ?, ?, ?)}");

$stmt->bindParam(1, $survey_text, PDO::PARAM_STR);
$stmt->bindParam(2, $event_date, PDO::PARAM_STR);
$stmt->bindParam(3, $type_id, PDO::PARAM_STR);
$stmt->bindParam(4, $description, PDO::PARAM_STR);
$stmt->bindParam(5, $folder_id, PDO::PARAM_STR);
$stmt->bindParam(6, $has_details, PDO::PARAM_STR);
$stmt->bindParam(7, $uid, PDO::PARAM_STR);
$stmt->bindParam(8, $resource_id, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 100); 

$stmt->execute();

echo $resource_id; 
```

这是存储过程的定义：

```
CREATE PROCEDURE [dbo].[app_sp_insert_rq]
    @survey_text nvarchar(max),
    @event_date nvarchar(20),
    @type_id nvarchar(100),
    @description nvarchar(100),
    @folder_id nvarchar(100),
    @has_details nchar(1),
    @uid nvarchar(100),
    @resource_id nvarchar(100) output

AS

select @resource_id = NEWID()

insert into
    xxxxx.dbo.app_events (
        resource_id,
        event_date, 
        [type_id], 
        [description], 
        folder_id, 
        has_details, 
        [uid], 
        survey_text
    )
    values (
        @resource_id,
        @event_date, 
        @type_id, 
        @description, 
        @folder_id, 
        @has_details, 
        @uid, 
        @survey_text
    ) 
```

任何帮助都感激不尽。我只是通过多次搜索才走到这一步，但这是我无法解决的一个障碍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:56:59.167

它应该可以工作 - 根据[PDO 的文档](http://php.net/manual/en/pdostatement.bindparam.php#example-1003)。但是，据说它`PDO::PARAM_INPUT_OUTPUT`代表一个`INOUT`参数，而您正在使用`OUT`.

您可以尝试这种方式 - 因为显式设置`$length`参数（在离开时`PDO::PARAM_INPUT_OUTPUT`）正在触发`OUT`模式；

```
$stmt->bindParam(8, $resource_id, PDO::PARAM_STR, 100); 
```

但我认为它也*应该*起作用`INOUT`（就像你最初编写代码一样）。

也许 C 级别的 PDO 驱动程序（或 ODBC 驱动程序）不支持输出参数绑定（如在 PDO-MySQL 中）。

但是，如果这是`OUT`您的过程中唯一的参数，您可以使用一个函数：

```
SELECT func(?, ?, ..., ?) AS result 
```

+1：也许你[对 php.net 上的这条评论感兴趣](http://php.net/manual/en/ref.pdo-dblib.php#101323)

# c++ - 在 C++ 中嵌入汇编程序可以接受吗？

> ID：13827850
> 
> 赞同：5
> 
> 时间：2012-12-11T20:19:47.723
> 
> 标签：c++, performance, assembly

如果您正在编写一个对延迟非常敏感的应用程序，那么在 C++ 函数中嵌入汇编程序的限制是什么（并正常使用 C++ 函数调用），如下所示：

```
inline __int64 GetCpuClocks()
{

    // Counter
    struct { int32 low, high; } counter;

    // Use RDTSC instruction to get clocks count
    __asm push EAX
    __asm push EDX
    __asm __emit 0fh __asm __emit 031h // RDTSC
    __asm mov counter.low, EAX
    __asm mov counter.high, EDX
    __asm pop EDX
    __asm pop EAX

    // Return result
    return *(__int64 *)(&counter);

} 
```

（上面的函数来自我看到的另一篇 SO 帖子）

你能把汇编内联函数当作一个**黑盒子**吗？您能否轻松地从汇编程序中执行的计算中检索结果？是否存在您不知道寄存器中当前有哪些变量等危险？它导致的问题多于解决的问题，或者对于特定的小任务是否可以接受？

（假设您的架构将是固定的，并且是已知的）

编辑我刚刚发现了这个，这就是我所暗示的：

[http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-CC](http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-C-C)

EDIT2 这更针对 Linux 和 x86 - 它只是一个一般的 C++/汇编程序问题（或者我认为）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:39:16.647

我想回答子问题：

> 它导致的问题多于解决的问题，或者对于特定的小任务是否可以接受？

确实如此！使用内联汇编程序，您可以利用编译器优化代码的能力。它不能进行部分表达式替换或任何其他花哨的优化。生成比编译器使用 -O3 发出的代码更好的代码是非常非常困难的。作为奖励，代码在下一个编译器版本中变得更好（假设下一个编译器版本不会破坏它；））。

编译器通常比人类大脑能够（或应该，以确保理智）掌握更广泛的范围，能够在正确的位置内联正确的函数，进行部分表达式替换，从而使代码更高效。在 ASM 中你永远不会做的事情，因为你的代码变得难以阅读。

作为一个轶事参考，我想看看 Linus Torvalds 的[这篇文章](http://torvalds-family.blogspot.de/2009/08/programming.html)，它与 SHA1 的 git 实现有关，它优于 libcrypt 中手动优化的 SHA1。

事实上，我认为现在内联汇编器的唯一合理用途是调用处理器指令，否则这些指令是不可用的（你引用的指令是可用的，例如在 linux 上`clock_gettime`，至少如果你只在高分辨率时间计数器之后）或者如果您必须做一些需要欺骗编译器的事情（例如在实现外部函数接口期间）。

* * *

关于片段和其他人所说的话。尤其是使用此类功能，您将获得性能损失。在 inline asm 中，您必须非常小心将寄存器保持在编译器假定它们的状态（如上所示）。而如果您正常编写代码，编译器可以小心并准确地保留那些在寄存器中有意义的变量以及那些不适合堆栈的变量。

相信你的编译器。这很聪明。大多数时候。通过不使用内联汇编器来考虑智能、快速的算法和学习相关的编译器开关（例如启用 SSE 优化等），从而节省您的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:20:59.533

如果有问题的 asm 将它使用的任何寄存器推送到顶部，然后将它们弹出到底部，我认为您可以放心，不必担心。

在您的示例中，这些是`__asm push EAX`和`__asm pop EAX`说明。

我想，真正的答案是，您需要对 asm 的功能有足够的了解，以确保您可以将其视为黑匣子。:)

# php - 验证 URL 是来自 Bing Search API 的直接图像 URL？

> ID：13827851
> 
> 赞同：4
> 
> 时间：2012-12-11T20:19:47.170
> 
> 标签：php, javascript, jquery, api, bing

我正在尝试使用必应搜索 API 来允许用户将必应图像与网站上的内联帖子关联起来，一旦他们从那里搜索选择图像，它就会将其保存到服务器以供使用。但有时使用必应搜索结果返回的 MediaUrl' 不一定是图像。

**示例 1) 搜索关键字`Nascar`**
返回两个图像：
1) www.betbigdc.com/wp-content/uploads/2010/02/nascar1.jpg <- 实际上是图像，我可以使用，在`<img src=''>`.
2) [http://images4.fanpop.com/image/photos/23900000/NASCAR-nascar-23962589-425-425.jpg](http://images4.fanpop.com/image/photos/23900000/NASCAR-nascar-23962589-425-425.jpg) .. 该网址实际上加载到 www.fanpop.com/clubs/nascar/images/23962589/标题/nascar-photo?ir=true..

**示例 2) 搜索关键字`Jason Aldean`**
返回两个图像：
1) www.greenobles.com/data_images/jason-aldean/jason-aldean-01.jpg <- 在`<img src=''>`.
2) [http://www.cmtradiolive.com/wp-content/uploads/2009/10/jason-aldean.jpg](http://www.cmtradiolive.com/wp-content/uploads/2009/10/jason-aldean.jpg)实际加载网页的有趣网址。

```
<?php
// Search Bing Api 
$articles = sitesearch('Jason Aldean', $_SERVER['HTTP_HOST'], $accountKey, 4);
$i        = 0;
// Process Results starting with reszing image within aspect ration to display to user
foreach ($articles['d']['results'] as $article) {
    $i++;

    $dimensions    = array(
        $article['Width'],
        $article['Height']
    );
    $dimensionsNew = array(
        125,
        125
    );

    // What scale do we need to go to
    $scaleRequired = min($dimensionsNew[0] / $dimensions[0], $dimensionsNew[1] / $dimensions[1]);

    if ($scaleRequired < 1) {
        $twidth  = $dimensions[0] * $scaleRequired;
        $theight = $dimensions[1] * $scaleRequired;

        // Resize to $finalDimensions

    } else {
        $twidth  = $article['Width'];
        $theight = $article['Height'];
    }
    // Display images resized within ration to =< 125PX
    echo "<img alt='bimage' width='$twidth' height='$theight' src='" . $article['MediaUrl'] . "' style='magin:     10px !important; 
       border: thin solid #666666;' />&nbsp;&nbsp;";

}
?> 
```

## 有什么方法可以验证给定的网址是否是直接图片网址？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:19:20.327

> 有什么方法可以验证给定的网址是否是直接图片网址？！

您还可以分析响应本身。它看起来像这样：

```
/**
 *
 * @return boolean Whether image is "pure"
 */
function is_image_url($url, array $extensions){

    $response = get_headers($url, 1);

    foreach($response as $key => $value){

         foreach($extension as $ext){

              if (stripos($value, $ext) !== FALSE){
                  return TRUE;
              }
         }
   }

   return FALSE;
}

//Usage:

$extensions = array('jpg', 'gif', 'bmp');

if ( is_image_url('http://exampe.com/image.jpg', $extensions) === TRUE ){
   // It is. Do some stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:25:09.440

您可以使用`curl`来确定这一点。

1.  初始化时，设置为`CURLOPT_FOLLOWLOCATION`不跟随重定向。`false``curl_setopt``curl`

2.  `CURLOPT_HEADER`以`true`包含返回标头信息。

3.  判断是否有`Location`header set。

4.  [对于像http://www.cmtradiolive.com/wp-content/uploads/2009/10/jason-aldean.jpg](http://www.cmtradiolive.com/wp-content/uploads/2009/10/jason-aldean.jpg)这样直接引导你到另一个内容而不跳转的 URL ，你可以`Content-type`在返回头中判断是否内容是否是图像。

详情`curl`：[http ://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/function.curl-setopt.php)

# c++ - 在 C++11 lambda 中通过引用捕获静态变量

> ID：13827855
> 
> 赞同：47
> 
> 时间：2012-12-11T20:19:56.467
> 
> 标签：c++, c++11, lambda

# 主要问题

我正在尝试使用 GCC 4.7.2 编译以下代码：

```
#include <iostream>

int foo() {
    static int bar;
    return [&bar] () { return bar++; } (); // lambda capturing by reference
}

int main (int argc, char* argv[]) {
    std::cout << foo() << std::endl;
    return 0;
} 
```

似乎进展不顺利，因为输出是这样的：

```
$p2.cpp: In function ‘int foo()’:
$p2.cpp:6:14: warning: capture of variable ‘bar’ with non-automatic storage duration [enabled by default]
$p2.cpp:4:16: note: ‘int bar’ declared here 
```

所以，我的第一个问题是：

**这是 GCC 的失败，还是代码不是合法的 C++11？这在任何最新版本的 GCC 中是否已修复？**

# 在 shared_ptr 工厂中使用技巧

我考虑根据这个原则构建一个工件，但使用一个非文字的静态变量。该工件旨在成为 shared_ptr< T > 对象的工厂，当您只需要同一实例的重复 shared_ptr 容器时，它可以避免创建新的 T 对象。

这个工件看起来像：

```
std::shared_ptr<Foo> create(std::string name) {
    static std::unordered_map<std::string,std::weak_ptr<Foo>> registry;

    if (auto it = registry.find(name) != registry.end())
        return registry[name].lock();

    auto b = std::shared_ptr<Foo>(
        new Foo(name), 
        [&registry] (Foo* p) {
            registry.erase(p->getName());
            delete p;
        });

    registry.emplace(name,b);
    return b;
} 
```

据我所知，如果之前讨论的 GCC 问题在 C++11 一致性方面不是问题，那么这个工件也不应该是问题。使用此 hack 唯一需要注意的是，不要将生成的 shared_ptr< T > 对象设置为任何可能在静态变量之后被破坏的全局对象。

**我是对的吗？**

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-11T20:24:49.090

你为什么还要抓`bar`？它是静态的。你根本不需要捕捉它。只有自动变量需要捕获。Clang 会在您的代码上引发严重错误，而不仅仅是警告。而且，如果您只是`&bar`从 lambda 捕获中删除 ，则代码可以完美运行。

```
#include <iostream>

int foo() {
    static int bar;
    return [] () { return bar++; } (); // lambda capturing by reference
}

int main (int argc, char* argv[]) {
    std::cout << foo() << std::endl;
    std::cout << foo() << std::endl;
    std::cout << foo() << std::endl;
    return 0;
} 
```

印刷

```
0
1
2 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-11T20:38:26.200

根据标准，您只能捕获具有自动存储持续时间的变量（或`this`，被提及为明确可捕获）。

所以，不，你不能按照标准这样做（或者，回答你的第一个问题，那不是有效的 C++ 11，也不是编译器错误）

> 5.1.1/2 lambda-capture 中的名称应在 lambda 表达式的上下文范围内，并且应为 this 或引用具有自动存储持续时间的局部变量或引用。

编辑：而且，正如凯文所说，你甚至不需要捕捉本地人`static`。

# php - 如何比较能够输入的值和输入的值

> ID：13827856
> 
> 赞同：1
> 
> 时间：2012-12-11T20:19:57.660
> 
> 标签：php, mysql

这是我想要做的简短描述：我希望成员输入传感器 ID，但如果管理员未将这个传感器 ID 保存在数据库中的表名“availblesensors”中，它不会将此用户添加到数据库中。

如果饱和，我会写这个

```
$sid=strip_tags($_POST['sid']);
$sidcheck=mysql_query("SELECT sid FROM availblesensors WHERE sid='$sid'");

        $count3=mysql_num_rows($sidcheck);
        if($count3 = 0){
        die("This sensor is not availble!");
    } 
```

我认为如果 satament 不起作用，因为每次我输入 sid （无论它是否在availblesensors 中可用）它都会添加用户，但它保存为 0 而不是我输入的值。

如果需要，这是我的整个代码！

```
<?php

session_start();?>
<?php
require("noCache.php");
?>
<html>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Admin Page</title>
<meta charset="utf-8">
<link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
<link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
<link rel="stylesheet" href="css/style.css" type="text/css" media="all">
<script type="text/javascript" src="js/jquery-1.4.2.js" ></script>
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-replace.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_400.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_700.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_600.font.js"></script>
</head>

<body>
<div class="main">

    <header>
        <div class="wrapper">
            <h1><a href="index.php" id="logo"> Biz</a></h1>

        </div>
        <nav>
            <ul id="menu">
                <li class="alpha"><a href="index.php"><span><span>Home</span></span></a></li>
                <li><a href="About.html"><span><span>About</span></span> </a></li>
                <li><a href="Projects.html"><span><span>Projects</span></span></a></li>
                <li><a href="Contacts.php"><span><span>Contacts</span></span></a></li>
                <li class="omega"><a href="Services.html"><span><span>Services</span></span></a></li>
            </ul>
        </nav>
        </br></br>

</header>

<head>
<!-- CSS Stylesheet -->
<style type="text/css">
html{

}
body{
    text-align:center;

}

</style>
</head>
<?php
if($_SESSION['username']){
include ("connection.php");
$id=$_SESSION['uid'];

}?>

<?php 

    $submit= $_POST['submit'];
    $name= strip_tags($_POST['name']);  
    $dusername= strtolower(strip_tags($_POST['dusername']));
    $password= strip_tags($_POST['password']);
    $repassword= strip_tags($_POST['repassword']);
    $date=date("y-m-d");
    $sid=strip_tags($_POST['sid']);
    $phone=strip_tags($_POST['phone']);

if($submit){
//open data base
$connet=mysql_connect("localhost","root","hahaha1");
mysql_select_db("senior");

/////////////////////////////////////////////////////////////// 
// my problem is i want to check the entered sensor by id if was availble or not, by checking if the admin added it into the database or not
    $sidcheck=mysql_query("SELECT sid FROM availblesensors WHERE sid='$sid'");

    $count3=mysql_num_rows($sidcheck);
    if($count3 = 0){
    die("This sensor is not availble!");
    }

///////////////////////////////////////////////////////////////////////

    $namecheck=mysql_query("SELECT dusername FROM sensorusers WHERE dusername='$dusername'");
    $count=mysql_num_rows($namecheck);
    if($count!=0){
    die("username already exist!");
    }
    $emailcheck=mysql_query("SELECT sid FROM sensorusers WHERE sid='$sid'");
    $count2=mysql_num_rows($emailcheck);
    if($count2!=0){
    die("This sensor already used!");
    }

if($name && $dusername && $password && $repassword && $phone && $sid ){

if($password==$repassword){
if (strlen($name)>25 || strlen($dusername)>25){
echo"<h3><font color='red'>Length of username or name is Too Long!</font></h3>";
}

elseif  (strlen($password)>12 || strlen($repassword)<6){
echo"<h3><font color='red'>Password must be between 6 and 12 characters!</font></h3>";}

elseif(ctype_alpha($name)=== false)
{
echo"<h3><font color='red'>Name must not contains numbers!</font></h3>";
}

else{
$password=md5($password);
$repassword=md5($repassword);

$queryreg=mysql_query(" 
INSERT INTO sensorusers VALUES('','$name','$dusername','$password','$date','$sid','$phone','$id')
");
//  success 
die("You have been Create new sensor user successfully !! <a href='member.php'>click here to return to Your page</a>");
}

}

else{ echo"<h3><font color='red'>The two passwords not match!</font color='red'></h3>"; }

}
else echo"<h3><font color='red'>Please fill in <b>all</b> feilds!</font></h3>";

}   

?>

<br>
<div align='left'>
<b>

<center> Create new driver: </center> </br></br></br>
<font color='blue'> Please fill all the information to create a new driver that you want to monitor: </font></br></br></br>
 <form name='f' action='createsensoruser.php' method='POST' >

<ul>

<li id="foli9"      class="    ">
    <label class="desc" id="title9" for="name">
        Name

            </label>
    <div>
        <input id="Field9"          name="name"     value=""        type="text"             class=""            value=""            maxlength="255"             tabindex="12"   size="25"                   /> 
    </br>
    </div>
    </li>
<li id="foli9"      class="    ">
    <label class="desc" id="title9" for="dusername">
        Username

            </label>
    <div>
        <input id="Field9"          name="dusername"    value=""        type="text"             class=""            value=""            maxlength="255"             tabindex="12"   size="25"                   /> 
    </div>
    </li>

<li id="foli55"         class="    ">
    <label class="desc" id="title55" for="pass">
        Password

            </label>
    <div>
        <input id="Field55"             name="password"             type="password"             class=""            value=""            maxlength="12"          tabindex="80"       size="25"               /> 
    </div>
    </li>

<li id="foli70"         class="    ">
    <label class="desc" id="title70" for="repass">
        Re-Enter your password

            </label>
    <div>
        <input id="Field70"             name="repassword"           type="password"             class=""            value=""            maxlength="12"          tabindex="81"       size="25"               /> 
    </div>
    </li>
<li id="foli9"      class="    ">
    <label class="desc" id="title9" for="sid">
        Sensor id

            </label>
    <div>
        <input id="Field9"          name="sid"  value=""        type="text"             class=""            value=""            maxlength="255"             tabindex="12"   size="25"                   /> 
    </div>
    </li>

<li id="foli9"      class="    ">
    <label class="desc" id="title9" for="phone">
        Phone number

            </label>
    <div>
        <input id="Field9"          name="phone"    value=""        type="text"             class=""            value=""            maxlength="255"             tabindex="12"   size="25"                   /> 
    </div>
    </li>

    </br>

                        <input  name="submit"  type="submit" value="submit"  />
                            <input type="reset" value="clear" />

</ul>
</form>
 </b>

 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:21:14.727

```
if($count3 = 0){ 
```

应该：

```
if($count3 == 0){ 
```

否则，您将一个值分配给 $count3 的“0”，而不是比较它的值以查看它是否等于“0”。否则，该分配将等于 true。

我用来防止此类事故的一种方法是将常量放在首位，例如：

```
if(0 == $count3){ 
```

这样，如果我错过了另一个 = 符号 PHP 将出错，而不是错误地分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:26:10.310

试试这个方法：

```
/* $sid = (int)$_POST['sid'];  uncomment this only if $sid is integer */

$sidcheck = mysql_query("SELECT sid FROM availblesensors WHERE sid='$sid'");
$result = mysql_query($sidcheck);
$isSIDinTheDataBase     =   mysql_num_rows($resultado);

if($isSIDinTheDataBase==0)
{
 /* ... */
} 
```

将来您可以使用准备好的语句或 pdo 进行我们的 sql 操作

# c++ - 是否可以将 DirectX 中的所有 Alpha 设置为某个值，例如 0.75？

> ID：13827858
> 
> 赞同：0
> 
> 时间：2012-12-11T20:20:04.527
> 
> 标签：c++, directx, transparent, alpha

我有一些透明的物品，但并不是每件物品都像冰块一样，所以我会更激进一些。我想要一种方法来改变 DirectX 中一切的“alpha”，每一张脸......

这可以通过一些临时 cfg 文件或一些第 3 部分软件来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:40:49.440

这取决于您如何绘制对象。

通常，您可以将混合状态设置为使用常数因子。如果您使用 DirectX11，您将设置`SrcBlend`为`D3D11_BLEND_BLEND_FACTOR`and `DestBlend`to `D3D11_BLEND_INV_BLEND_FACTOR`，反之亦然。可以使用[OMSetBlendState()](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476462%28v=vs.85%29.aspx)设置该因子。

在其他版本的 DX 中也有实现此目的的方法。

# playframework-2.0 - 为什么我在 Play 2 项目的路由文件中无法识别此正则表达式？

> ID：13827859
> 
> 赞同：1
> 
> 时间：2012-12-11T20:20:04.467
> 
> 标签：playframework-2.0

我希望所有`.html`文件都被重定向到它们所在的公共文件夹，所以我把它放在我的`routes`文件中：

```
GET     /$file<.html>           controllers.Assets.at(path="/public/html", file) 
```

但它说`Action not found For request 'GET /index.html'`

但我可以在那里看到它（出现错误时）：

`GET/$file<.html> controllers.Assets.at(path:String = "/public/html", file:String)`

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T23:44:07.007

您指定的正则表达式`<.html>`只会匹配看起来像“/ahtml”、“/bhtml”、“/chtml”等的请求，因为“.” 是单字符通配符。

你想要的是这样的，我认为：

```
GET   /$file<.*\.html$>      controllers.Assets.at(path="/public/html", file) 
```

无论文件的第一部分是什么，它`.*`都是一个包罗万象的东西。

这`\.html$`是将其限制为 html 文件的原因。虽然不是绝对必要的，但我转义了点，所以它实际上匹配一个句点而不是任何字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:22:58.600

尝试添加`*`通配符：

```
GET     /$file*.html           controllers.Assets.at(path="/public/html", file) 
```

# iphone - Facebook UI 行为，iOS，向下滑动 imageview

> ID：13827863
> 
> 赞同：0
> 
> 时间：2012-12-11T20:20:23.790
> 
> 标签：iphone, xcode

我需要在 xcode 中提供一个滑动条来提醒用户他输入了错误的数据。我希望它在屏幕顶部出现大约 1 秒钟然后消失，所以有一些带有动画和提交的东西，我已经为它编写了这段代码，它有点做这项工作，除了

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:.3];
CGPoint center = self.slidingView.center;
center.y += self.slidingView.frame.size.height;
self.errorLabel.center = center;
self.slidingView.center = center;
self.slidingView.transform = CGAffineTransformMakeRotation(0);

[UIView commitAnimations];

[self.view bringSubviewToFront:self.slidingView];
[self.view bringSubviewToFront:self.errorLabel]; 
```

现在的问题是，最初滑动视图隐藏在另一个 UIView 后面，但我需要让它向下滑动，现在这以一种粗暴的方式出现（因为调用了 BringSubviewToFront.

有任何想法吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:35:24.673

在调用动画之前为什么不把子视图放在前面呢？

更好的是，隐藏视图然后将子视图置于前面。之后，结合已有的滑动动画制作“淡入淡出”动画。

# ruby - 如何为 espresso 框架中的某些操作禁用布局渲染？

> ID：13827865
> 
> 赞同：2
> 
> 时间：2012-12-11T20:20:30.127
> 
> 标签：ruby, web-frameworks

我正在使用`layout`所有操作来呈现`:main`布局：

```
class Pages < E

  layout :main

  # actions that using layout

  # pager should not use layout
  def pager

  end
end 
```

如何`pager`从使用布局的操作列表中排除？

我知道我可以使用这个：

```
 setup :action_1, :action_2 do
    layout :main
  end 
```

但是当我有很多动作时，它会变得毛茸茸的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:38:18.230

您应该将布局设置`false`为禁用它。

对于您的情况，请使用：

```
setup :pager do
  layout false
end 
```

也许不是很直观，但这样做是为了避免像 , 等多余`exclude`的`except`选项`only`。

您也可以跳过设置并使用`render_partial`：

```
 def pager
    render_partial # or render_p
  end 
```

# html - 如何在悬停时向css菜单添加下拉菜单

> ID：13827868
> 
> 赞同：0
> 
> 时间：2012-12-11T20:21:05.017
> 
> 标签：html, css

> **可能重复：**
> [导航栏中的html css下拉菜单](https://stackoverflow.com/questions/8500631/html-css-drop-down-menu-in-navigation-bar)

我有一个水平显示类别的现有菜单。当您将鼠标悬停在每个类别上时，如何使其下拉链接的垂直列表？就像传统的菜单行为。

这是我到目前为止所拥有的：http: [//jsfiddle.net/chaddly/GrEWS/3/](http://jsfiddle.net/chaddly/GrEWS/3/)

```
<ul id="nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Services</a></li>
    <li><a href="#">Products</a></li>
    <li><a href="#">Sitemap</a></li>
    <li><a href="#">Help</a></li>
    <li><a href="#">Contact Us</a></li>
</ul> 
```

​</p>

```
#nav li a:hover 
{
   background-color:#333333;
   padding-bottom:12px;
   border-bottom:2px;
   border-bottom-color:#f37022;
   border-bottom-style:solid;
   margin:-1px;
}
#nav li a 
{   
   font-family:Arial;
   font-size:12px;
   text-decoration: none;
   float:left;
   padding:10px;
   background-color: #123261;
   color:#ffffff;
   border-bottom:1px;
   border-bottom-color:#000000;
   border-bottom-style:solid;
}
#nav li 
{
    display:inline;
}
#nav
{
    padding:0;
} 
```

这是一个例子

![在此处输入图像描述](../Images/6f15e6e1e8074a67985f9851f6e451c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:34:16.050

尝试引导下拉菜单.. [http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

# sockets - D - 向套接字发送数据

> ID：13827869
> 
> 赞同：1
> 
> 时间：2012-12-11T20:21:05.150
> 
> 标签：sockets, d, send

我在 D 中有以下原始服务器：

```
import std.stdio; 
import std.socket; 

int main() {

const int port = 8080; 

InternetAddress addr = new InternetAddress(InternetAddress.ADDR_ANY, port); 
TcpSocket server = new TcpSocket(AddressFamily.INET); 

server.bind(addr); 
server.listen(10);

for(;;) {

    Socket newclient = server.accept(); 

    newclient.send("HTTP/1.1 200 OK\r\n"); 
    newclient.send("Content-type: text/html\n\n"); 
    newclient.send("Hi from D!");

    newclient.shutdown(SocketShutdown.BOTH); 
    newclient.close(); 
}

    return 0;
} 
```

如果我使用浏览器连接，它不会显示“Hi From D！”，而只是断开连接。

我的假设是 send() 缓冲数据，我必须刷新该缓冲区。但我还没想好你会怎么做。有趣的是，如果使用 writefln("asdf asdf\n"); 将一些数据写入 STDOUT，则代码可以工作。在最后一次调用 send() 之后，因此我的假设。

还是我在叫错树？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:54:25.050

这可能是一个标题问题，尝试类似：

```
// -- cut --

Socket newclient = server.accept(); 

newclient.send("HTTP/1.1 200 OK\r\n"); 
newclient.send("Content-type: text/plain\r\n"); 
newclient.send("Connection: close\r\n\r\n");
newclient.send("Hi from D!\r\n");

newclient.shutdown(SocketShutdown.BOTH); 
newclient.close();

// -- cut -- 
```

**更新：**我重新检查了 win64 下的代码片段*，*我对***内容类型***的猜测似乎是正确的。***如果您将内容声明为text/html*** ，您应该提供有效的html ，即

```
<html><body>Hi from D!</body></html> 
```

或提供正确的 contnet 类型（即***text/plain***）。

请注意，我只在 Windows 上得到这种行为，即在 linux 上，您的代码片段按原样工作（使用 ff、telnet 等）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T20:24:51.120

您的代码实际上对我有用....但是一些更改可能会有所帮助：

1) 在响应中添加 Content-length 标头

2) 使用 \r\n\r\n 结束标题而不是 \n\n。

如果这些都没有帮助，也可能是防火墙或类似阻止您的连接的问题。

# php - 在php中发送带有多个附件的邮件

> ID：13827873
> 
> 赞同：0
> 
> 时间：2012-12-11T20:21:14.987
> 
> 标签：php

我有这个表格可以发送带有 6 个附件的电子邮件。我需要帮助编写 php 处理脚本以发送多个附件。如果我能得到有关如何编写处理脚本以在 php 中发送带有多个附件的电子邮件的提示，我将很高兴。

```
<<html>
<head>
<title>Send an Email</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Send an Email</h1>
<form action="mail.php" method="POST" enctype="multipart/form-data">
<p>&nbsp;</p>
<table width="579" border="0">
<tr>
<td wid th="61">Email From:</td>
<td colspan="3"><input name="emailfrom" type="text" value="" size="90" /></td>
</tr>
<tr>
<td>Emai  To: </td>
<td colspan="3"><label for="emailto"></label>
  <textarea name="emailto" id="emailto" cols="70" rows="3"></textarea></td>
 </tr>
<tr>
<td valign="middle">Subject::</td>
<td colspan="3"><input name="subject" type="text" value="" size="90" /></td>
</tr>
<tr>
<td>&nbsp;</td>
<td colspan="3">&nbsp;</td>
</tr>
<tr>
<td>Message:</td>
<td colspan="3"><textarea cols="70" rows="18" name="message"></textarea></td>
</tr>
<tr>
<td nowrap>Attach file</td>
<td width="224"><input name="file1" type="file" class="send" size="24" /></td>
<td width="61" nowrap>Attach file</td>
<td width="218"><input name="file2" type="file" size="24" /></td>
 </tr>
<tr>
<td nowrap>Attach file</td>
<td><input name="fil3" type="file" class="send" size="24" /></td>
<td nowrap>Attach file</td>
<td><input name="file4" type="file" size="24" /></td>
 </tr>
<tr>
<td nowrap>Attach file</td>
<td><input name="file5" type="file" class="send" size="24" /></td>
<td nowrap>Attach file</td>
<td><input name="file6" type="file" size="24" /></td>
</tr>
<tr>
<td nowrap>&nbsp;</td>
<td>&nbsp;</td>
<td nowrap>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td nowrap>&nbsp;</td>
<td>&nbsp;</td>
<td nowrap>&nbsp;</td>
<td align="right"><input type="submit" class="send" value="Send" /></td>
 </tr>
</table>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:25:52.920

您可以使用`<input type='file' name='file[]' multiple>`上传多个文件。看看[这个](http://davidwalsh.name/multiple-file-upload)教程。它应该有帮助！

我会考虑使用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)。您将要轻松附加文件`$mail->AddAttachment($path);`

# wicket - FTPClient 在 Apache Wicket 中不可序列化

> ID：13827878
> 
> 赞同：0
> 
> 时间：2012-12-11T20:21:33.550
> 
> 标签：wicket, apache-commons, serializable, ftp-client, apache-commons-net

我将 Apache Wicket 与 Apache Commons Net 一起使用。但是当我定义

```
new FTPClient(); //apache commons net library 
```

我得到一个例外

```
org.apache.commons.net.ftp.FTPClient at.erpel.as2connector.testtool.protocols.FTP.client
[class=org.apache.commons.net.ftp.FTPClient] <----- field that is not serializable 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:34:21.177

我不认为`FTPClient`在多个请求中存储一个实例是一个好主意。您应该创建自己的`FTPClient`，使用它，然后立即丢弃它。这意味着您可以将它存储在局部变量中，而不必担心它不能被序列化。（顺便说一句，这是有道理的，因为它具有复杂的状态，包括活动的 TCP 连接。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:54:38.017

谢谢你的建议！

我也用两种可能性解决了它：

1）您可以使字段瞬态：

```
transient FTPClient() client; 
```

2）创建一个将使用 FTPClient 的父类的单例

```
public class AnyClass implements Serializable {

    private static AnyClass instance;

    private AnyClass() {

    }

    public static AnyClass getInstance() {
        if (instance == null) {
            instance = new AnyClass();
        }
        return instance;
    }

    FTPClient client = new FTPClient();
    ...
} 
```

3）根据biziclop的建议：创建一个自己的类，只用于FTP通信。

# android - 从 twitter 获取搜索结果时出现空指针异常

> ID：13827879
> 
> 赞同：0
> 
> 时间：2012-12-11T20:21:34.737
> 
> 标签：android, json, twitter, httprequest, http-get

给定 SearchURL 变量中指定的搜索词，我正在尝试获取随机推文。但是，当我运行该方法时，它不会返回结果。我知道错误发生在这一行：

```
HttpResponse tweetResponse = tweetClient.execute(tweetGet); 
```

但我不知道出了什么问题。在获取信息和解码信息方面，一切都应该正常工作。有人有什么想法吗？认为这是一个挑战。

```
TextView caption;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pitter_home);

    // Create PitterImageFragment
    FragmentManager manager = getFragmentManager();
    FragmentTransaction transaction = manager.beginTransaction();
    transaction.add(R.id.main_image, new PitterImageFragment());
    transaction.commit();

    // Create Twitter Caption Reference
    caption = (TextView) findViewById(R.id.tweet_caption);

    // Create Creation Button
    Button button = (Button) findViewById(R.id.creation_button);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            FragmentManager manager = getFragmentManager();
            Fragment fragment = manager.findFragmentById(R.id.main_image);
            ((PitterImageFragment) fragment).generateImage();
            generateTweet();
        }// end onClick method
    });

}// end OnCreateMethod

public void generateTweet () {

    // Code Taken From: http://mobile.tutsplus.com/tutorials/android/build-a-twitter-search-app-project-setup/
    try {
        // Calculate what to Search for
        String searchURL = "http://search.twitter.com/search.json?q=jedi";
        new GetTweets().execute(searchURL);

    } catch(Exception e) {
        Log.d("CATCH", "Begin Code Error: something went wrong!");
        e.printStackTrace();
    }// end catch
}// end generateTweet method

protected void setCaption(String tweet) {
    caption.setText(tweet);
}// end setCaption method

private class GetTweets extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... twitterURL) {

        // Get Tweets from the Internet
        StringBuilder tweetFeedBuilder = new StringBuilder();

        try {
            Log.d("LINE WATCH", "entering try statement");
            HttpClient tweetClient = new DefaultHttpClient();
            Log.d("LINE WATCH", "line 1 completed");
            HttpGet tweetGet = new HttpGet();
            Log.d("LINE WATCH", "line 2 completed");
            Log.d("LINE WATCH", tweetGet.toString());
            HttpResponse tweetResponse = tweetClient.execute(tweetGet);
            Log.d("LINE WATCH", "line 3 completed");
            StatusLine searchStatus = tweetResponse.getStatusLine();
            Log.d("LINE WATCH", "line 4 completed");

            if (searchStatus.getStatusCode() == 200) {
                HttpEntity tweetEntity = tweetResponse.getEntity();
                InputStream tweetContent = tweetEntity.getContent();
                InputStreamReader tweetInput = new InputStreamReader(tweetContent);
                BufferedReader tweetReader = new BufferedReader(tweetInput);
                String lineIn;
                while ((lineIn = tweetReader.readLine()) != null) {
                    tweetFeedBuilder.append(lineIn);
                }// end while
            } else {
                Log.d("CATCH", "Get Status Code Error: something went wrong!");
            }// end if

        } catch(Exception e) {
            Log.d("CATCH", "Get Online Data Error: something went wrong!");
            e.printStackTrace();
        }// end catch
        return tweetFeedBuilder.toString();
    }// end doInBackground method

    protected void onPostExecute(String result) {
        // Decode the Results from the Search
        ArrayList<String> tweetList = new ArrayList<String>();
        try {
            JSONObject resultObject = new JSONObject(result.toString());
            JSONArray tweetArray = resultObject.getJSONArray("results");
            // Walk Through the Returned Tweets
            for (int t=0; t<tweetArray.length(); t++) {
                JSONObject tweetObject = tweetArray.getJSONObject(t);
                tweetList.add(tweetObject.get("text")+"\n\n");
            }// end for
        } catch (Exception e) {
            Log.d("CATCH", "Decode Results Error: something went wrong!");
            e.printStackTrace();
        }// end catch

        //TODO: TweetList size is always zero!?! WHY?
        // Select a Random Tweet from the Returned Ones
        Log.d("TWEETLIST", "TweetList size = " + tweetList.size());
        if (tweetList.size() > 0 ) {
            Random random = new Random();
            int number = random.nextInt(tweetList.size());
            setCaption(tweetList.get(number));
        } else {
            setCaption("No Tweets Found!");
        }// end if

    }// end onPostExecute method

}// end GetTweets class

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_pitter_home, menu);
    return true;
} 
```

或者，如果有人可以建议一种替代方法，我可以使用它来根据指定的搜索或指定的用户获取随机推文，这同样有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:27:21.293

你打电话

```
HttpGet tweetGet = new HttpGet(); 
```

然后你不会在 tweetGet 中放任何东西。你不调用 setURI 或任何东西。tweetClient 期望 HttpGet 有一个 url，但它是空的。因此出现空指针异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:27:42.593

让我们看看你的要求：

```
HttpClient tweetClient = new DefaultHttpClient();
HttpGet tweetGet = new HttpGet();
HttpResponse tweetResponse = tweetClient.execute(tweetGet); 
```

这完全没有要求，没有指定 URL，nada。您需要指定一个 URL，否则这将不起作用。

# node.js - 使用带有 redis 的节点和套接字将数据从 c# 应用程序推送到 Web 界面

> ID：13827882
> 
> 赞同：0
> 
> 时间：2012-12-11T20:21:43.457
> 
> 标签：node.js, express, redis, socket.io

我正在尝试开发我的第一个节点应用程序。据说我有一个 C# 应用程序，它通过 POST 将用户特定的 json 数据提交到一个 url，让我们调用它`//localhost/data/send`，这些数据将每 1-5 秒发送一次（尚未决定）。

然后我将有一个需要用户登录的网站，然后轮询该用户的数据并显示它。现在，与其每 x 秒刷新一次页面，我想我可以使用某种基于套接字或事件的技术，例如 socket.io 或 redis pub/sub 来将数据推送到连接的客户端。

但这里有一个问题，我该如何确保两件事：

1.  连接的用户只能访问他们的信息
    1.  我目前正在使用快递，但这对任何事情都是开放的..
2.  仅当有用户登录远程 Web 界面时才会发送数据

我的想法是，当用户登录到桌面 c# 应用程序时，它开始轮询以检查用户是否/何时登录到 Web 界面。

一旦用户登录到 Web 界面，桌面应用程序就会根据桌面应用程序和 Web 应用程序之间匹配的用户名识别会话 ID。然后它开始仅推送到该会话 ID。

甚至需要redis吗？或者我可以使用一个简单的 mysql 表和 socket.io 吗？

一旦用户注销，数据就不需要持久化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:13:10.027

如果不需要持久化数据并且这是一个用户很少的内部简单应用程序，那么我将创建一个模块，该模块具有一个队列以及从队列中添加和删除项目的方法。

该模块将为每个登录用户提供一个队列。当用户离开页面（onunload）时，您将他们注销并删除该用户的队列。当您调用 c# 应用程序调用添加事件时，队列将不存在，这意味着用户未登录。当用户登录时，您为该用户创建队列。

请参阅此处了解如何在 express 中进行身份验证。[如何使用 Node.js、Express 和 Mongoose 进行身份验证？](https://stackoverflow.com/questions/8397977/how-to-do-authentication-with-node-js-express-and-mongoose)

像这样的东西：

```
var queue = {};

exports.queueEvent = function(user, event){
  if(queue[user]){
    queue[userid].push(event);
  }
  else{
    return 'user not logged in, come back later';
  }
};

exports.getEvent = function(user){
  if(!queue[user]){
    queue[user] = [];  // this indicates the user is logged in.
    return null; // no events yet.
  }
  return queue[user.shift();
}

exports.logOutUser = function(user){
  if(queue[user]){
    delete queue[user];
  }
} 
```

# wamp - php.ini - 命令行 PHP 和 WAMP 服务器访问不同的文件

> ID：13827884
> 
> 赞同：1
> 
> 时间：2012-12-11T20:22:03.963
> 
> 标签：wamp, php, phpdoc

我不知道这是否是默认行为，但对我来说似乎很奇怪。

我在 Windows 7 机器上使用 PHP 5.4.3 从头开始​​安装 WAMP 服务器 v2.2e。我得到了这些我并不真正关心的小错误（当我激活扩展时，我有时需要退出 WAMP 并重新启动它以查看更改），

但这不是我来这里的原因。

当我点击 WAMP 图标 -> PHP -> php.ini 时，我打开的文件是 apache 目录中的文件（`<WAMP dir>\apache\apache2.4.2\bin\php.ini`）

windows cmd 命令输出的`php -i | find /i "Configuration File"`输出`<WAMP dir>bin\php\php5.4.3\php.ini`

这是期望的行为吗？

我实际上想要做的是安装phpdoc，我打开后得到的输出（使用我的浏览器，而不是命令行PHP）`localhost/phpDocumentor/installer.php`有以下几行：

```
...
...
Problem 2
- Installation request for phpdocumentor/template-checkstyle 1.0.1 -> 
satisfiable by phpdocumentor/template-checkstyle 1.0.1.
- phpdocumentor/template-checkstyle 1.0.1 requires ext-xsl * -> 
the requested PHP extension xsl is missing from your system.
Problem 3
- Installation request for phpdocumentor/template-new-black 1.0.4 -> 
satisfiable by phpdocumentor/template-new-black 1.0.4.
- phpdocumentor/template-new-black 1.0.4 requires ext-xsl * -> 
the requested PHP extension xsl is missing from your system.
Problem 4
...
... 
```

...你明白了。

WAMP 使用的 php.ini 文件具有：

`extension=php_xsl.dll`

命令行 php 使用的 php.ini 有：

`;extension=php_xsl.dll`

我可以取消注释另一个 .ini 文件中的扩展名，但这不能解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:31:11.147

你提到的一切都是预期的行为。Apache 有它自己使用的 php.ini 版本，并且需要重新启动 Apache 才能使任何更改生效。

CLI 也会有它自己的 php.ini。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-20T14:53:59.410

我刚刚通过以下步骤修复了我的问题：

1.  根据我的 php 版本（7.2）下载的扩展
2.  检查了 PHP Extension Build API20170718,TS, VC15（所以选择了名称为 ts 的文件）
3.  在 C:\wamp64\bin\php\php7.2.10\ext 中添加文件
4.  在 C:\wamp64\bin\php\php7.2.10\php.ini 中添加了扩展
5.  在加载的 appache ini 文件中也添加了扩展名：Loaded Configuration File C:\wamp64\bin\apache\apache2.4.35\bin\php.ini
6.  点击保存。
7.  退出 Wampp 并再次运行
8.  在 cmd 中点击 php -m ------------------Boom------------------------

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:28:25.150

通常的做法是为 cli、cgi 提供单独的 php.ini ...

至于不同的环境，您可能希望使用不同的设置，加载不同的模块。

# javascript - Firefox 扩展 (SDK) 中的内容脚本添加事件侦听器

> ID：13827886
> 
> 赞同：2
> 
> 时间：2012-12-11T20:22:22.797
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我的 Firefox 扩展提供了一个 JavaScript 函数，网站可以使用它来访问插件功能。网站调用此函数并提供两个回调。

**网站代码：**

```
function onButtonClick() {
  var callbackSuccess = function() { alert("Yeah!"); };
  var callbackError = function() { alert("Oh no!"); };
  if (window.magicAddon) { // Check if my addon is installed
    magicAddon.doStuff(callbackSuccess, callbackError);
  }
} 
```

**内容脚本：**

```
unsafeWindow.magicAddon = {
  doStuff: function(callbackSuccess, callbackError) {
    // Bind the two callbacks to events. The addon will fire one of them
    self.port.on("doStuffSuccess", callbackSuccess);
    self.port.on("doStuffError", callbackError);

    // Fire the event that lets the addon do stuff
    self.port.emit("doStuff");
  }
}; 
```

这在第一次调用时效果很好，但是下次网站调用 doStuff() 时，新的侦听器会加起来，并且 alert() 会执行两次。下次三个警报，依此类推。

**知道如何优雅地避免听众加起来吗？我可以完全清除事件类型吗？**

到目前为止没有什么效果：

*   改为使用`self.port.once(..)`，因为我有两个回调事件：只有一个被清除的回调事件，另一个保留并与下一个相加。
*   在注册新的监听器之前，用 删除旧的监听器`self.port.removeListener`，因为我没有旧的回调引用。

*问题似乎类似于[如何删除事件侦听器？](https://stackoverflow.com/questions/12284539/how-to-remove-an-event-listener)，只是他使用了一个回调监听器，因此可以使用`self.port.once(..)`.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:38:41.007

您可以使用`self.port.once`然后手动删除其他回调：

```
doStuff: function(callbackSuccess, callbackError) {
  // Bind the two callbacks to events. The addon will fire one of them
  self.port.once("doStuffSuccess", function() {
    callbackSuccess();
    self.port.removeListener(callbackError);
  });
  self.port.once("doStuffError", function() {
    callbackError();
    self.port.removeListener(callbackSuccess);
  });

  // Fire the event that lets the addon do stuff
  self.port.emit("doStuff");
} 
```

您在内容脚本中，因此您无法完全清除事件类型，您只能在主插件代码中执行此操作，并使用低级 API。

但是，我建议避免`unsafeWindow`提供这种功能，因为它是不安全的。如果您保持 API 异步，您可以使用`postMessage`内容脚本和页面之间的管道来做同样的事情；并提供一个单独的 javascript 文件，人们可以将其包含在他们的网站中，您可以在其中公开 postMessages 调用的抽象（例如`magicAddon.doStuff()`）。如果您愿意，您还可以在网站中自动从您的插件中注入该脚本。

处理这种机制肯定有点复杂，但你可以避免使用`unsafeWindow`.

[您可以在此处](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/communicating-with-other-scripts.html)找到有关内容脚本通信的更多信息。

希望能帮助到你！

**更新**：要回答您的评论，您需要一个变量来跟踪`doStuff`呼叫活动：

```
doStuff: function() {
  var executing = false;

  return function(callbackSuccess, callbackError) {
      if (executing)
        return;

      executing = true;

      // Bind the two callbacks to events. The addon will fire one of them
      self.port.once("doStuffSuccess", function() {
        executing = false;
        callbackSuccess();
        self.port.removeListener(callbackError);
      });
      self.port.once("doStuffError", function() {
        executing = false;

        callbackError();
        self.port.removeListener(callbackSuccess);
      });

      // Fire the event that lets the addon do stuff
      self.port.emit("doStuff");
  }
}() 
```

注意`()`最后。基本上这样设置在末尾`doStuff`的函数是我们最初分配的函数的结果。通过这种方式，我们为该方法创建一个闭包`doStuff`，其中有一个`executing`变量，并跟踪是否已经`doStuff`执行，以便丢弃任何其他`doStuff`调用，直到完成。

*注意：即使在这种情况下对于 javascript 来说不是必需的，也可能是一个很好的约定将该函数包装在括号中，以识别该函数是“自执行”的：`doStuff: (function() {...}())*

您也可以将对象的属性`magicAddon`用于此作业，但在这种情况下它将被公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:07:39.313

您必须考虑网站`magicAddon.doStuff()`在收到第一次呼叫的响应之前可能会再次呼叫的可能性。因此，在任何时间点都可能执行多个调用 - 您应该确保调用正确的侦听器。此外，如果任一回调触发，您需要删除两个侦听器 - 否则您将泄漏内存。这是如何工作的：

```
doStuff: function(callbackSuccess, callbackError) {
  // Generate a random call ID
  var callID = Math.random();

  // Bind the two callbacks to events. Make sure to only act on events with the
  // right call ID.
  function onSuccess(id) {
    if (id == callID) {
      callbackSuccess();
      removeListeners();
    }
  }
  function onError(id) {
    if (id == callID) {
      callbackError();
      removeListeners();
    }
  }
  function removeListeners() {
    self.port.removeListener("doStuffSuccess", onSuccess);
    self.port.removeListener("doStuffError", onError);
  };
  self.port.on("doStuffSuccess", onSuccess);
  self.port.on("doStuffError", onError);

  // Fire the event that lets the addon do stuff
  self.port.emit("doStuff", callID);
} 
```

这使用随机调用 ID 来识别调用 - 代码处理`doStuff`事件获取调用 ID 作为参数，并需要在`doStuffSuccess`or`doStuffError`事件中将其发送回以确保调用正确的回调。

# java - 通过 JNI 做的事情有什么坏主意吗？

> ID：13827887
> 
> 赞同：0
> 
> 时间：2012-12-11T20:22:26.057
> 
> 标签：java, linux, io, java-native-interface, blocking

有什么我们不应该从 JNI 调用中做的事情**吗**？这些是什么？
例如，我需要使用一个 C++ 库，它在后台执行阻塞和非阻塞 I/O 调用。
在这些情况下，我应该注意什么？我也知道脚本提供了相同的功能（虽然不确定实际的脚本语言）。那会是更好的选择吗（从 调用脚本`Java`）？如果是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:41:37.993

JNI 不限制您可以通过多种方式执行的操作，除非您使用[`GetPrimitiveArrayCritical`and`GetStringCritical`](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#GetPrimitiveArrayCritical)：

> 调用后`GetPrimitiveArrayCritical`，本机代码在调用之前不应运行很长时间 `ReleasePrimitiveArrayCritical`。我们必须将这对函数中的代码视为在“临界区”中运行。在临界区内，本机代码不得调用其他 JNI 函数，或任何可能导致当前线程阻塞并等待另一个 Java 线程的系统调用。（例如，当前线程不得在另一个 Java 线程正在写入的流上调用 read。）

否则你几乎可以自由地做任何你想做的事情，禁止改变 JVM 和操作系统交互方式的事情（比如[替换 JVM 信号处理程序](http://javajiggle.com/2008/01/06/if-jni-based-application-is-crashing-check-signal-handling/)）。

您还询问是否应该运行脚本而不是直接调用本机函数。如果您不知道 C++ 库究竟会做什么，那么执行外部进程会更安全，但它也不太方便（您需要建立一种通信方式）并且可能比在同一进程中进行调用要慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:22:56.727

从我个人的经验来看，一个坏主意是使用比平常更大的 3rd-party 库作为黑匣子，不知道里面到底发生了什么。线程、I/O、硬件 API 访问、长时间运行的 JNI 调用，以及最糟糕的是自定义内存管理（而不是标准的 lib malloc/free）。可能会出现毛茸茸的问题，包括 JVM 在奇怪的地方报告内存泄漏和异常，和/或莫名其妙的崩溃。有了这样一个库（巨大的 OpenGL 引擎），我们不得不剖析并采用外部流程方法。它通过命名管道进行通信，速度惊人。吸取的教训：总是知道本地库在幕后做什么，这对于 JAR 来说不是那么必要。

# php - 将静态数据附加到 drupal-view

> ID：13827889
> 
> 赞同：0
> 
> 时间：2012-12-11T20:22:27.280
> 
> 标签：php, ajax, drupal, drupal-views

我需要在 drupal 中将块内容附加到请求彻底 ajax 的视图结果中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:12:32.363

我相信对于 Drupal 7，您可以这样做。其中一些可能不是必需的。自从我设置它以来已经有一段时间了，但它对我有用......

在你的 template.php 文件中添加：

```
function _phptemplate_variables($hook, $vars) {
  switch ($hook) {
    case 'page':
      // If the page was requested with the jQuery ajax functionalities, an HTTP header (X-Requested-With: XMLHttpRequest) 
      // will be sent to the server, making it possible to identify if we should serve the content as JSON
      if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 'XmlHttpRequest' == $_SERVER['HTTP_X_REQUESTED_WITH']) {
          // Now that we know that the page was requested via remote scripting (AJAX) we can serve the content as JSON
          // by telling Drupal to use a different template for the page (in this case page-json.tpl.php)
          $vars['template_files'] = is_array($vars['template_files']) ? $vars['template_files'] : array();
          $vars['template_files'][] = 'page-json';
      }
      break;
  }
} 
```

在您的模板文件夹中创建一个模板文件并将其命名为`page-json.tpl.php`：

```
<?php
if($messages) {
  $content = $messages.$content;
}
echo drupal_to_js($content);
?> 
```

然后在您的 script.js 文件中：

```
jQuery(document).ready(function($){
    if(typeof Drupal.settings.views != "undefined")
    {
        var data = {};
        // Add view settings to the data.
        for (var key in Drupal.settings.views.ajaxViews[0]) {
          data[key] = Drupal.settings.views.ajaxViews[0][key];
        }
        // Get the params from the hash.
        if (location.hash) {
          var q = decodeURIComponent(location.hash.substr(1));
          var o = {'f':function(v){return unescape(v).replace(/\+/g,' ');}};
          $.each(q.match(/^\??(.*)$/)[1].split('&'), function(i,p) {
            p = p.split('=');
            p[1] = o.f(p[1]);
            data[p[0]] = data[p[0]]?((data[p[0]] instanceof Array)?(data[p[0]].push(p[1]),data[p[0]]):[data[p[0]],p[1]]):p[1];
          });
        }
        $.ajax({
          url: Drupal.settings.views.ajax_path,
          type: 'GET',
          data: data,
          success: function(response) {
            console.log(response);
                    // look into the log to see what results get back
          },
          error: function(xhr) {

          },
          dataType: 'json'
        });
    }
}); 
```

并查看这篇关于 Drupal.settings.views 的帖子： [Embed a View using AJAX](https://stackoverflow.com/questions/4932523/embed-a-view-using-ajax)

这是我从中获得信息的来源： [http ://drupal.org/node/174008](http://drupal.org/node/174008)

# javascript - JSON数据排序

> ID：13827891
> 
> 赞同：0
> 
> 时间：2012-12-11T20:22:32.417
> 
> 标签：javascript, jquery, json, sorting

快速提问地点总是布伦特伍德、士麦那和斯普林希尔，是否总是按此顺序填充可用时间的列表？现在位置会根据可用时间而变化，这意味着如果士麦那的位置有下一个可用时间，它将首先列出。——</p>

JSON 文件的链接[https://www.inquicker.com/facility/americas-family-doctors.json](https://www.inquicker.com/facility/americas-family-doctors.json)

这是我的小提琴链接： http: [//jsfiddle.net/qUvuB/11/](http://jsfiddle.net/qUvuB/11/)用于下面的代码，这是我的小提琴链接，用于显示位置、医生和时间的代码：jsfiddle.net/mccannf/qUvuB/ 6/

这是我到目前为止的代码：

我很感激这方面的任何帮助。

```
<!DOCTYPE html>
<html>
<head>
<title>AFD TEST MOD</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>
<script>
$(document).ready(function(){
$.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json',
    function(data){

        var earliest = {};
        var doctor = {};
        var links = {};
        $.each(data.schedules, function(i, name) {
            var location = name.name.split(' - ')[0];
            var dr_name = name.name.split(' - ')[1];
            if (name.available_times.length) {
               if (location in earliest) {   // location has already been stored.
                  var newTime = parseAvailableDate(name.available_times[0].when);
                  if (newTime.isBefore(earliest[location])) {
                     earliest[location] = newTime;
                     doctor[location] = dr_name;  
                     links[location] = name.available_times[0].url;
                  }                    
               }
               else {
                  earliest[location] =     parseAvailableDate(name.available_times[0].when); 
                  doctor[location] = dr_name; 
                  links[location] = name.available_times[0].url;                       
               } 
           }                    
        });
        for (i in earliest) {
            $("#names").append("<li><a href='"+links[i]+"'>"+earliest[i].toString("dd/yyyy h:mm tt")+"</a></li>");         
        }
});
});

function parseAvailableDate(dateString) {
var trimmedString = dateString.replace(/^\s\s*/, '');
var avTime=trimmedString.split(' ')[0],
    ampm=trimmedString.split(' ')[1],
    avDay=trimmedString.split(' ')[2];
var avDate = Date.parse("next "+avDay);
avDate.addHours(avTime.split(':')[0]).addMinutes(avTime.split(':')[1]);
if (ampm == "pm" && avTime.split(':')[0] != "12") avDate.addHours(12);

return avDate;
}   
</script>
</head>
<body>
<ul id="names"></ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:43:57.440

将您的位置存储在一个数组中：

```
var locations = []; 
```

然后您将能够轻松地进行排序：

```
locations.sort(); 
```

当然这会改变你代码的其他部分，但这是标准的数组操作，你应该能够自己弄清楚。例如：

```
for (i in earliest) 
```

将变为（以获得正确的顺序）：

```
for (var i=0;i<locations.length;i++) 
```

或者，使用 jQuery

```
$.each(locations, function(i,location){...}) 
```

# iphone - 如何使用 NSKeyedArchiver 归档两个数组

> ID：13827893
> 
> 赞同：2
> 
> 时间：2012-12-11T20:22:34.533
> 
> 标签：iphone, objective-c, nskeyedarchiver

我已经阅读了很多关于使用 NSKeyedArchiver 归档单个数组的内容。但是我将如何保存两个数组？

我需要为 UITabBarController 中的两个视图控制器存储/检索数据。两个视图控制器中的每一个都创建相同自定义类的对象，但将它们存储在每个视图控制器的单独数组中。

我当前的代码使用单独的方法来保存每个数组。问题是在归档第二个数组时，它会覆盖第一个数组。我不能让他们两个都拯救。我想我要么需要将两个数组保存到他们自己的文件中，要么将数据合并到一个文件中。我只是不确定如何为此编写代码。有人可以帮忙吗？？

```
- (void)saveFermentableIngredients
{
    NSMutableData *fermentableData = [[NSMutableData alloc] init];
    NSKeyedArchiver *fermentableArchiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:fermentableData];
    [fermentableArchiver encodeObject:self.fermentableIngredients forKey:@"FermentableIngredients"];
    [fermentableArchiver finishEncoding];
    [fermentableData writeToFile:[self dataFilePath] atomically:YES];
}

- (void)saveHopIngredients
{
    NSMutableData *hopData = [[NSMutableData alloc] init];
    NSKeyedArchiver *hopArchiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:hopData];
    [hopArchiver encodeObject:self.hopIngredients forKey:@"HopIngredients"];
    [hopArchiver finishEncoding];
    [hopData writeToFile:[self dataFilePath] atomically:YES];
} 
```

我应该提到，我已经完成了通常的设置，实现了 initWithCoder 和 encodeWithCoder 方法。我怀疑问题确实出在我上面发布的代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:23:26.027

如果您希望将所有这些数据存储在一起，那么您应该执行以下操作：

```
- (void)encodeWithCoder:(NSCoder *)aCoder {
    [aCode encodeObject:self.fermentableIngredients forKey:@"FermentableIngredients"];
    [aCode encodeObject:self.hopIngredients forKey:@"HopIngredients"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:18:28.187

我最终将每个数组保存到一个单独的文件中。首先，我声明了两个单独的文件路径，如下所示：

```
- (NSString *)fermentableDataFilePath
{
    return [[self documentsDirectory] stringByAppendingPathComponent:@"Fermentables.plist"];
}

- (NSString *)hopDataFilePath
{
    return [[self documentsDirectory] stringByAppendingPathComponent:@"Hops.plist"];
} 
```

然后我在原始问题中的保存方法中引用了每个文件路径。因此，在第一种方法中，我会这样编写 writeToFile 方法：

```
[fermentableData writeToFile:[self fermentableDataFilePath] atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T17:42:43.567

解决此问题的另一种方法是将两个（或更多）数组放入字典中。然后，您可以将字典归档到单个文件中，并使用您分配的键检索数组。您可以以这种方式归档多个项目，而无需使用 NSCoder 或创建多个归档。一个限制，因为它是一个字典，是你存储的值必须都是相同的类型。我已经以这种方式存档了 SCNNode 数组的字典，并且效果很好。

# facebook - 为什么 Facebook 按偏移量索引 message_tags？

> ID：13827902
> 
> 赞同：1
> 
> 时间：2012-12-11T20:23:18.320
> 
> 标签：facebook, facebook-graph-api, tags

当使用 Facebook API 并获取带有标签的故事或帖子时，`message_tags`属性 (或`story_tags`) 是按偏移量索引的标签对象。这是一个例子：

```
{
 . . .
      "message": "Dhiren Patel likes Marmot.",
      "message_tags": {
        "19": [
          {
            "id": 101961456410,
            "name": "Marmot",
            "offset": 19,
            "length": 6
          }
        ],
        "0": [
          {
            "id": 1207059,
            "name": "Dhiren Patel",
            "offset": 0,
            "length": 12
          }
        ]
      }, 
 . . .
} 
```

这显然有效，但让我觉得不必要的冗长，因为每个标签已经在属性中包含了它的偏移量。为什么每个标签都必须通过它的偏移量来索引？`message_tags`像这样简单地制作标签数组而不是对象不是同样有效的格式吗？

```
{
 . . .
      "message": "Dhiren Patel likes Marmot.",
      "message_tags": [
        {
          "id": 101961456410,
          "name": "Marmot",
          "offset": 19,
          "length": 6
        },
        {
          "id": 1207059,
          "name": "Dhiren Patel",
          "offset": 0,
          "length": 12
        }
      ], 
 . . .
} 
```

如果有一些效率提升证明 Facebook 的格式在这方面是合理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T03:20:09.583

为方便起见，我假设。下面的代码是用 Javascript 编写的，但它对于 Python 和其他语言也同样适用。

首先，`message_tags`作为有序数组不是很有用，因为无论如何都可能必须验证该顺序，因此任何代码都可能必须将其视为无序数组。

对象可以很好地替代无序数组，因为每个对象键都可以是每个条目的唯一标识符。在这种情况下，当您已经知道偏移量时，可以轻松获取标签数据。

```
// Validate message_tags order, and create an ordered list of each offset.
var offsets = [];
for each (var tag in message_tags) {
  offsets.push(tag.offset);
}
offsets.sort();

// Process each tag.
for (var i = 0; i < offsets.length; i++) {
   var offset = offsets[i];
   var tag = message_tags[offset]; // Convenient!
   var length = tag.length;
   // ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T08:50:27.710

我做了一些测试，找不到您发现的前缀 message_tags。请确认。如果是这样，您最初的问题现在无效。如果您有另一个触发您观察的场景，请分享，以便我检查您的场景。

```
{
  "id": "5940395639***",
  "from": {
    "name": "Ricky",
    "id": "70585***"
  },
  "message": "Ricky and Jack test",
  "message_tags": [
    {
      "id": "70585***",
      "name": "Ricky",
      "type": "user",
      "offset": 0,
      "length": 5
    },
    {
      "id": "100005***",
      "name": "Jack",
      "type": "user",
      "offset": 10,
      "length": 4
    }
  ],
  "can_remove": true,
  "created_time": "2013-06-14T08:41:24+0000",
  "like_count": 0,
  "user_likes": false
} 
```

# sql - 为什么左连接会限制我的结果集？

> ID：13827904
> 
> 赞同：0
> 
> 时间：2012-12-11T20:23:26.760
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的查询结果集大约是 60k 行：

```
SELECT f.client_id,
       f.SECTION_A,
       Month(f.received_date) Month,
       Count(*)               Count
FROM   MILLENNIUM_DW_DEV..F_ACCESSION_DAILY f
       LEFT JOIN salesdwh..TestPractices t
         ON F.CLIENT_ID = t.ClientID
WHERE  t.ClientID IS NULL
       AND Month(f.received_date) BETWEEN 1 AND 11
       AND Year(f.received_date) = 2012
GROUP  BY f.SECTION_A,
          Month(f.received_date),
          f.client_id 
```

但是，当我添加 2 个左连接时，它会将其限制为 56k 行！

```
SELECT f.client_id,
       f.SECTION_A,
       Month(f.received_date) Month,
       Count(*)               Count,
       s.SALES_REP_NAME,
       s.REGION_NAME
FROM   MILLENNIUM_DW_DEV..F_ACCESSION_DAILY f
       LEFT JOIN salesdwh..TestPractices t
         ON F.CLIENT_ID = t.ClientID
       LEFT JOIN MILLENNIUM_DW_DEV..D_CLIENT d
         ON d.CLIENT_ID = f.CLIENT_ID
       LEFT JOIN MILLENNIUM_DW_DEV..D_SALES_HIERARCHY s
         ON s.SUB_TERRITORY_NBR = d.SUB_TERRITORY_NBR
WHERE  t.ClientID IS NULL
       AND Month(f.received_date) BETWEEN 1 AND 11
       AND Year(f.received_date) = 2012
       AND d.REC_ACTIVE_FLG = 1
       AND s.REC_ACTIVE_FLG = 1
GROUP  BY f.SECTION_A,
          Month(f.received_date),
          f.client_id,
          s.SALES_REP_NAME,
          s.REGION_NAME 
```

**为什么我的左连接会限制我的结果集？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:24:56.750

您不仅添加了左外连接，还添加了过滤条件：

```
and d.REC_ACTIVE_FLG=1
and s.REC_ACTIVE_FLG=1 
```

这有效地将您的外部连接变成了内部连接。它还可能过滤掉一些存在`d`和/或`s`存在但`REC_ACTIVE_FLG`不等于的记录`1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T20:59:42.883

所以解决方法是将条件添加到`on`子句而不是`where`子句中：

```
FROM   MILLENNIUM_DW_DEV..F_ACCESSION_DAILY f
       LEFT JOIN salesdwh..TestPractices t
         ON F.CLIENT_ID = t.ClientID
       LEFT JOIN MILLENNIUM_DW_DEV..D_CLIENT d
         ON d.CLIENT_ID = f.CLIENT_ID and d.REC_ACTIVE_FLAG = 1
       LEFT JOIN MILLENNIUM_DW_DEV..D_SALES_HIERARCHY s
         ON s.SUB_TERRITORY_NBR = d.SUB_TERRITORY_NBR and s.REC_ACTIVE_FLAG = 1 
```

# macos - mac上mongodb数据库的位置

> ID：13827915
> 
> 赞同：103
> 
> 时间：2012-12-11T20:24:07.363
> 
> 标签：macos, mongodb, osx-lion

我对 mac 和 mongodb 都很陌生。

我有一个奇怪的疑问，访问在 mac 上使用 mongodb 创建的数据库？

我知道，在 Windows 中有一个名为 c:\data\db 的文件夹，其中存储了我的数据库文件。

在 mac 中，数据库的存储方式和位置。

我记得做了类似的事情

```
sudo mkdir -p /data/db
sudo chown `id -u` /data/db 
```

在mac上创建这样一个文件夹，但是我在这个文件夹中没有找到任何数据库文件，虽然我创建了一个数据库。

mac上的数据库文件保存在哪里？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2013-09-22T00:02:55.767

如果 MongoDB 通过 Homebrew 安装在 macOS 上，则默认数据目录取决于系统中处理器的类型。

|  | 英特尔处理器 | 苹果 M1 处理器 |
| --- | --- | --- |
| 数据目录 | `/usr/local/var/mongodb` | `/opt/homebrew/var/mongodb` |
| 配置文件 | `/usr/local/etc/mongod.conf` | `/opt/homebrew/etc/mongod.conf` |
| 日志目录 | `/usr/local/var/log/mongodb` | `/opt/homebrew/var/log/mongodb` |

运行`brew --prefix`以查看 Homebrew 安装这些文件的位置。

有关更多详细信息，请参阅[MongoDB“在 macOS 上安装”](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/)文档。

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2015-07-01T15:11:45.750

谢谢@Mark，我一次又一次地忘记了这一点。使用 Homebrew 安装 MongoDB 后：

*   数据库存储在**/usr/local/var/mongodb/**目录中
*   mongod.conf 文件在这里：**/usr/local/etc/mongod.conf**
*   mongo 日志可以在**/usr/local/var/log/mongodb/中找到**
*   mongo 二进制文件在这里：**/usr/local/Cellar/mongodb/[version]/bin**

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2012-12-11T20:36:07.260

MongoDB 的默认数据目录是`/data/db`.

这可以被命令行或配置文件中指定的[`dbpath`选项覆盖。](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo#StartingandStoppingMongo-SpecifyingaDataDirectory)

如果您通过[包管理器](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/#installing-with-package-management)（例如 Homebrew 或 MacPorts）安装 MongoDB，这些安装通常会创建 /data/db 以外的默认数据目录，并在配置文件中设置 dbpath。

`mongod`如果在启动时提供了 dbpath，您可以检查`mongo`shell 中的值：

```
db.serverCmdLineOpts() 
```

您会看到如下值：

```
"parsed" : {
    "dbpath" : "/usr/local/data"
}, 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-02-16T19:27:29.027

我有同样的问题，版本 3.4.2

运行它（如果你用自制软件安装它）运行这样的过程：

```
$ mongod --dbpath /usr/local/var/mongodb 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-12-17T07:04:04.273

我刚刚使用*homebrew安装了***mongodb 3.4**。（brew install mongodb）它默认查找**/data/db**。

 ***[https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/)

[![这是 mongod 执行的输出。](../Images/6f5db85b1f3a1120959d499d99556542.png)](https://i.stack.imgur.com/3Twjf.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-09T09:36:52.390

**环境：macOS Mojave **10.14.4****

 ****安装**：自制

**地点**：`/usr/local/Cellar/mongodb/4.0.3_1`

**注意**：如果更新版本 `brew upgrade mongo`，该文件夹`4.0.4_1`将被删除并替换为新版本文件夹*****

# node.js - 在 VMWare 下，Node.js Azure Web 角色不运行

> ID：13827917
> 
> 赞同：4
> 
> 时间：2012-12-11T20:24:15.260
> 
> 标签：node.js, azure, vmware

在 VMWare Fusion 下，带有 Azure SDK 1.8 和节点添加，[hello-world 指令](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)对我不起作用。有没有人发现修复？

## 复制速度更快

1.  打开非管理员的 Powershell
2.  `New-AzureServiceProject`
3.  `Add-AzureNodeWebRole`
4.  `Azure-StartEmulator -Launch`

Web 浏览器打开 (Chrome)，响应始终为空。我在桥接和共享连接网络下以及主机上都看到了这一点。计算模拟器和 apphome/log.txt 中的日志（我认为它们是日志）没有显示任何内容。`node server.js`同时，直接运行会产生一个工作服务器。

我特别提到了 VMWare Fusion，因为这些步骤在我没有运行虚拟机的办公室中对我有用。

我对 Windows 的所有东西都有些陌生，我开始*仅*将其用于 Azure 工具。它可以帮助我知道在哪里看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:59:09.067

我的印象是 azure 存储模拟器使用 VMWave 正在使用的某些端口，但不太确定这是否是您的情况。

# c++ - AVL 树中的删除

> ID：13827919
> 
> 赞同：5
> 
> 时间：2012-12-11T20:24:17.340
> 
> 标签：c++, data-structures, binary-search-tree, avl-tree

如您所知，删除节点后应如何平衡 avl，我会指出。首先，我正在考虑删除一个没有子节点的节点。

例如一棵树：

```
 10
      /     \
     5      17
   /  \    /  \ 
   2  9   12  20
    \           \
     3          50 
```

*可以说 deletevalue(12);*

然后 Tree 应该在删除之后：

```
 10
      /     \
     5      17
   /  \       \ 
   2  9       20
    \           \
     3          50 
```

现在，我们看到树在节点 17 处是平衡的，因为根据公式，它的平衡因子 = height( left subtree [left tree is null so -1] ) - height (right subtree) = -2

因此，我们通过检查它的左右大小写来平衡树。

```
If BalanceFactor(17's right) = -1
    perform SingleLeftRotation(17);
else if BalanceFactor(17's right) = -1
    perform DoubleRightLeftRotation(17); 
```

如果平衡因子 17 为 2，即保持高位，则其相应的旋转也类似。//对于 bF(17) = 2

```
If BalanceFactor(17's left) = 1
    perform SingleLeftRotation(17);
else if BalanceFactor(17's left) = -1
    perform DoubleLeftRightRotation(17); 
```

平衡后，树应该变成这样：

```
 10
      /     \
     5      20
   /  \    /  \ 
   2  9   17  50
    \           
     3 
```

**这是我设计的删除。**

从主函数，我调用

```
bool deletevalue(WA value)
{
    AvLNode<WA> *temp = search(root, value);    //calling search function to find node which has user-specified data & stored its address in temp pointer
    if(temp!=0) //if temp node is not null then
    {
        if(temp->left==0 && temp->right==0) //if temp node don't have any children
        {   deletewithNochild(root, value); }   //call to respective function
        else if( (temp->left!=0 && temp->right==0) || (temp->left==0 && temp->right!=0) )   //if temp node has any 1 child, left or right
        {   deletewithOneChild(temp);   }   //call to respective function
        else if(temp->left!=0 && temp->right!=0)    //if temp node has 2 children
        {   deletewith2Child(temp);     }   //call to respective function

        return true;    //for prompting respective output message
    }
    else
        return false;   //for prompting respective output message
} 
```

*由于我们所需的节点没有子节点，因此调用了以下函数。*

```
void deletewithNochild(AvLNode<WA> *temp, WA value) //temp is node which is to be deleted
{
    if(value == root->key)  //if temp is root node then
    {
        delete root;    //free memory of root node
        root = 0;   //nullify root
    }
    else    //if temp is some other node 
    {
        if (value < temp->key)
        {
            deletewithNochild(temp->left, value);
        }
        else if (value > temp->key)
        {
            deletewithNochild(temp->right, value);
        }
        else if (value == temp->key)
        {
            AvLNode<WA> *father = findfather(temp, root);   //calling findfather func to find father of temp node & store its address in father node pointer

            if(father->left==temp)  //if temp is left child of its father
            {
                delete temp;    //free memory of temp node
                father->left=0; //nullify father's left
            }
            else if(father->right==temp)    //if temp is right child of its father
            {
                delete temp;    //free memory of temp node
                father->right=0;//nullify father's right
            }
            return;
        }
        cout<<"\nBalancing";
        if ( balancefactor(temp) == 2)  //if temp is left higher, ie. temp's Balance Factor = 2, then
        {
            cout<<"\t2 ";
            if ( balancefactor(temp->left) == 1 ) //if temp's left node has Balance Factor 1 then
            {
                SingleRightRotation(temp);  //send temp node for rotation because temp is unbalance
            }
            else if ( balancefactor(temp->left) == -1 ) //if temp's left node has Balance Factor -1, then
            {
                DoubleLeftRightRotation(temp);  //send temp for double rotation because temp is unbalance
            }
        }
        else if ( balancefactor(temp) == -2 )   //if temp is right higher, ie. temp's Balance Factor = -2, then
        {
            cout<<"\t-2 ";
            if ( balancefactor(temp->right) == -1 ) //if temp's left node has Balance Factor -1 then
            {
                SingleLeftRotation(temp);   //send temp node for rotation because temp is unbalance
            }
            else if ( balancefactor(temp->right) == 1 ) //if temp's right node has Balance Factor 1, then
            {
                DoubleRightLeftRotation(temp);  //send temp for double rotation because temp is unbalance
            }
        }

    }
} 
```

这是节点的高度和节点的平衡因子的两个效用函数

```
int heightofnode(AvLNode<WA> *temp) const
{
    return temp==NULL ? -1 : temp->height;
}

int balancefactor(AvLNode<WA> *temp) const
{
    return ( heightofnode(temp->left) - heightofnode(temp->right) );
} 
```

**我的输出，当我删除 12 时变成** (Breadth First Travers) -->> [10] [9] [17]

**请帮助我**，递归有什么问题吗？我一次又一次地试运行，但无法理解。删除必须通过递归完成，否则平衡树将是一个更大的地狱。 *提前感谢您提供时间。:-)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:14:55.030

为什么 deletewithNochild() 调用任何其他 delete* 方法？如果调用 deletewithNochild，则您位于要删除的节点处。只需将其删除，向上移动到其父级，然后检查父级平衡因子并在需要时进行轮换。对每个节点的父节点重复重新平衡，直到到达根节点。

如果它有帮助，我已经在[J​​ava 中实现了一个 AVL 树](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/AVLTree.java)，如果你想要参考的话。

# c++ - 是否可以将 C++ 接口与 Objective-C 一起使用？

> ID：13827922
> 
> 赞同：2
> 
> 时间：2012-12-11T20:24:24.467
> 
> 标签：c++, objective-c, xcode, interface

Objective-C 类是否有可能具有 C++ 接口类型的实例变量？

我可以在 XCode 中声明一个 C++ 类（它可以编译），如下所示：

```
class MyClass {
    void MyMethod();
} 
```

但是如果我尝试声明这样的接口时：

```
interface class MyClass {
    void MyMethod();
} 
```

在编译过程中出现错误：`Unknown type name 'interface'`

我什至还没有尝试将它放在 ObjC 类中，它根本无法编译。是否可以使用 C++ 接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:28:57.147

是的，这是可能的；它被称为Objective-C++。

只需使用`.mm`文件扩展名命名您的实现文件，您就可以在 C++ 中做几乎所有可以做的事情。

但是，您不能做的一件事是将 C++ 类子类化为 Objective-C++ 类；而是使用封装：

MyObjCppClass.h：

```
#import "MyCppClass.h"

@interface MyObjCppClass : NSObject
{
    MyCppClass *_myCppClass;
}

@end 
```

MyObjCppClass.mm：

```
#import "MyObjCppClass.h"

@implemenation MyObjCppClass

- (id)init
{
    self = [super init];
    if (self != nil)
    {
        _myCppClass = new MyCppClass;
        _myCppClass->doThing();
    }
    return self;
}

- (void)dealloc
{
     delete _myCppClass;
     [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:32:20.947

`interface`关键字是微软对该语言的扩展；它在标准 C++ 中不存在。这就是你遇到的问题。您不能在使用非 Microsoft 编译器编译的任何 C++ 程序中使用它们，因此鉴于 Microsoft 不生产 Objective-C 编译器，不，您不能在 Objective-C 中使用它们。

类或结构可以达到相同的目的。AFAIK，接口只是施加一些额外约束的虚拟类，所以你只需要确保自己遵循这些。

# sql - SQL 时间函数

> ID：13827923
> 
> 赞同：1
> 
> 时间：2012-12-11T20:24:31.077
> 
> 标签：sql, sql-server, datetime, time

嗨，我正在为一份报告编写 SQL 查询，该报告将提供自上午 8 点以来当天进入的潜在客户数量。该报告将在我们的每个人中发布，例如，上午 8 点报告将显示从上午 7 点到 8 点进入的潜在客户，上午 9 点报告将显示从上午 7 点到上午 9 点，上午 10 点从上午 7 点到上午 10 点等等，我想知道如果有人可以为我提供时间函数以放入`where`cluase（类似于：

`T.LeadDate >= DATEADD(d, DATEDIFF(d, 0, GETDATE()), 0) -1)`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:39:04.507

这将在早上 7 点之后为您提供 LeadDate 的所有信息。当天的

```
select * from TABLENAME t where t.LeadDate >= dateadd(hh,7, DATEDIFF(dd, 0, GETDATE())) 
```

您也可以使用以下内容，这对我来说似乎更清楚一些。

```
select * from TABLENAME t where t.LeadDate >= dateadd(hh,7, CONVERT(datetime,CONVERT(date, getdate()))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:45:37.363

```
WHERE T.LeadDate >= DATEADD(hh,7,DATEDIFF(D, 0, GETDATE())) 
```

没有必要将`DATEDIFF(D, 0, GETDATE())`部分回溯到某个时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:52:42.117

为了完整起见，考虑到您的规则，这将使您每天计数：

```
-- Get counts of records per day
-- Anything prior to 8am is considered the prior day.
select cast(dateadd(hh, -8, MyDate) as date) FiscalDate, count(*) as Num
from MyTable
group by cast(dateadd(hh, -8, MyDate) as date)
order by cast(dateadd(hh, -8, MyDate) as date) 
```

# gcc - 如何使用 Android NDK 启用缺少返回语句的编译错误

> ID：13827925
> 
> 赞同：2
> 
> 时间：2012-12-11T20:24:34.190
> 
> 标签：gcc, android-ndk, compiler-errors

使用 Android NDK，我有一个返回 jobject 的本机方法——除了我忘记了 return 语句。不幸的是，编译时没有警告，当我尝试运行它时，只在 0xdeadd00d 处给了我一个段错误。

虽然我最近主要在 Java 中工作，所以我脑海中的错误消息是“缺少返回语句”，但我相信 gcc 错误消息是“控制到达非 void 函数的结尾”。

我想打开那个警告，然后把它变成一个错误。我怎么做？（简单地使用`-Wall -Werror`不是一种选择，因为我正在编译现有的代码库。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T20:24:34.190

经过一段时间的 GCC 手册页和几次重建后，我发现要添加的命令行标志是`-Werror=return-type`. 将其附加到您的 Android.mk 中的 LOCAL_CFLAGS。

此外，要找出给定错误类型的名称，您可以打开 -Wall 并检查编译器输出；警告后，它会显示相关的 -W 标志。

```
error: no return statement in function returning non-void [-Wreturn-type] 
```

要单独打开该警告，请使用与括号中显示的完全一致的标志。要将其作为错误打开，请在 -W 之后立即插入“error=”，如`-Werror=return-type`.

# hadoop - 由于 Pig MR 作业中的权限问题导致 EOFException

> ID：13827927
> 
> 赞同：0
> 
> 时间：2012-12-11T20:24:40.840
> 
> 标签：hadoop, permissions, apache-pig

我在我的 80 个节点的本地 hadoop 集群上运行的 Map reduce 作业中看到以下异常。此堆栈跟踪不指向我的代码，我想它可能与某些权限问题有关。一件有趣的事情是，如果我将它作为系统帐户运行，这项工作就会像这样失败。如果我以自己的身份运行它，则工作运行得很好。

```
java.lang.RuntimeException: java.io.EOFException
    at org.apache.hadoop.io.WritableComparator.compare(WritableComparator.java:103)
    at org.apache.hadoop.mapreduce.ReduceContext.nextKeyValue(ReduceContext.java:120)
    at org.apache.hadoop.mapreduce.ReduceContext.nextKey(ReduceContext.java:92)
    at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:175)
    at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readByte(DataInputStream.java:250)
    at org.apache.pig.impl.io.PigNullableWritable.readFields(PigNullableWritable.java:115)
    at org.apache.hadoop.io.WritableComparator.compare(WritableComparator.java:100)
    ... 10 more 
```

任何帮助在这里表示赞赏。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:25:34.353

这很奇怪，但权限不是这里的问题。这是两个用户选择的 hadoop 配置不同。我解决了这个问题，它现在似乎可以工作了。谢谢

# excel - 在最简单的公式中使用间接范围

> ID：13827931
> 
> 赞同：0
> 
> 时间：2012-12-11T20:24:52.663
> 
> 标签：excel, range, formula

我正在尝试使用具有可变起始坐标的 LINEST 公式：

```
'=LINEST((address(a24,3,4,true,"Copy raw data here")):C36,'Copy raw data here'!A3:A36) 
```

where (address(a24,3,4,true,"Copy raw data here")) 应该生成“Copy raw data here'！C3。Excel不喜欢它。我应该如何更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:47:09.517

你可以像这样包装`ADDRESS`函数`INDIRECT`

`=INDIRECT(address(a24,3,4,true,"Copy raw data here"))`

....但是您随后将引用创建为文本字符串（使用 ADDRESS）并使用 INDIRECT 将其转换回引用，也许更容易使用 INDEX

`=INDEX('Copy raw data here'!C:C,A24)`

所以在更大的公式中

`=LINEST(INDEX('Copy raw data here'!C:C,A24):C36,'Copy raw data here'!A3:A36)`

# android - howto：将日历项目添加到用户的日历 fromout 网站？

> ID：13827933
> 
> 赞同：0
> 
> 时间：2012-12-11T20:24:58.710
> 
> 标签：android, ios, url, calendar

我们有这个网页，它检测用户使用的移动操作系统。用户必须单击“保存到我的日历”链接才能自动将特定项目添加到他的日历中。

我们要为 Android 和 iPhone 配置此链接。

我们必须使用什么网址，所以当他们点击此链接时，该项目将被设置到他们的 Android 或 iOS 日历中？

提前致谢

# arrays - 在数组中搜索术语

> ID：13827937
> 
> 赞同：1
> 
> 时间：2012-12-11T20:25:13.163
> 
> 标签：arrays, perl, parsing, search, grep

我正在解析一个非常简单的文本文件并将其处理成一个数组。在程序的最后一步中，我试图搜索用户给定的术语。我已经尝试了很多东西，但似乎无法让它发挥作用，我搜索了一个我知道的术语，因为事实在数组中它仍然找不到它。我有一种预感，变量可能会在“split”、“chop”和“sort”函数的某个时候被修改，但我不确定。

```
print "\n";
print "Enter a term you would like to search for: \n";

my $element = <STDIN>;

$num = grep(/$element/,@final);

if($num > 0){
print ("Term: " . $element . " found " . $num . " times. \n");
}else{
print "Not found. \n";
} 
```

所以我知道“苹果”这个词在列表中，当我搜索“苹果”这个词时，它会打印出它没有找到。请帮忙！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:29:57.290

你应该试试

```
chomp(my $element = <STDIN>); 
```

因为您的标准输入将有一个尾随换行符，否则会在您的搜索中匹配。例如：

```
$element = "foo\n";   
grep /$element/, "foo bar";  # will not match 
```

您还应该知道元字符将在您的输入中被解释。因此，例如，`foo?`将被视为“fo 后跟可选的 o”。为避免这种情况，您可以使用`quotemeta`or `\Q ... \E`，例如在您的正则表达式中使用：

```
/\Q$element\E/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:35:21.973

尝试这样做：

```
use Data::Dumper;

my @final = <DATA>;
chomp(@final);
print Dumper \@final;

print "Enter a term you would like to search for >>> ";
chomp(my $element = <STDIN>);

$num = grep { /$element/ } @final;

if ($num > 0){
    print("Term: $element found $num times\n");
}
else{
    print("Not found. \n");
}

__DATA__
foo
bar
base 
```

**笔记**

*   如果你不这样做`chomp()`，你正在尝试 grep`element\n`而不是`element`
*   `Data::Dumper`是显示任何数据（结构与否）的绝佳模块。

# python - 读取标签值并存储到变量中

> ID：13827941
> 
> 赞同：0
> 
> 时间：2012-12-11T20:25:47.900
> 
> 标签：python, python-2.7

我正在尝试从网站读取数据并将该数据存储到变量中。例子：

[http://www.example.com/example-info.php](http://www.example.com/example-info.php) ->

姓名：鲍勃

地址：1234街

电话：000-000-0000

电子邮件： Bobs-email@nothing.com

我想做的是从 Bob 的标签“名称”中获取值，并将其存储到变量中，例如“用户名”。或“电话”并将值存储到名为“电话”的变量中。有人可以指出我正确的方向。也许我需要使用机械化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:30:52.773

您是否要[筛选](http://en.wikipedia.org/wiki/Data_scraping)网站？如果是这样，使用[requests](http://docs.python-requests.org/en/latest/)或[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)是不错的选择。

```
import requests
x = requests.get('http://www.google.com')
if x.status_code == 200:
    print x.content 
```

`x.content`在上述场景中，将保存您向其发送请求的页面中的数据/html。然后，您可以使用 BeautifulSoup 或正则表达式来提取您需要的特定信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:31:35.290

您可以`dict`存储您的键和值，以及翻译的映射字典

```
mapping = {"Telephone": "Phone", "Name": "Username"}
details = {}

details[mapping.get(web_key, web_key)] = web_value 
```

所以例如

```
>>> web_dict = {"Name": "Bob", "Address": "1234 Street", "Telephone": "000-000-0000", "Email": "Bobs-email@nothing.com"}
>>>    
>>> for web_key, web_value in web_dict.iteritems():
...     details[mapping.get(web_key, web_key)] = web_value
...
>>> print details
{'Username': 'Bob', 'Phone': '000-000-0000', 'Email': 'Bobs-email@nothing.com', 'Address': '1234 Street'} 
```

当然这只是一半的答案，你需要一些东西来将 html 解析成字典。

# php - 转发电子邮件

> ID：13827954
> 
> 赞同：-1
> 
> 时间：2012-12-11T20:26:33.640
> 
> 标签：php

我有一封由字符串表示的电子邮件，它已经包含所有标题、附件等。我需要做的是将该电子邮件转发到另一个地址，并且我根本不想触摸该字符串，所有内容它必须保持不变。所以，理想情况下它应该是这样的：

```
forward_email('forward_address@example.com', $original_message) 
```

代码示例会很好，因为我不是 PHP 人，今天只需要使用它来编写脚本。

**更新**

我必须澄清一下，因为也许这根本不是我需要的。

我有一个后缀别名，它将所有传入的邮件转发到一个管道命令，这是一个 php 脚本。在该脚本中，我采用所有 STDIN，即电子邮件消息，并向解析电子邮件消息的 Web 服务发出 POST 请求。

如果网络服务调用不成功，我需要将该电子邮件转发到备份邮箱，以便以后能够从我的应用程序中提取它。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:23:41.010

您的问题实际上与转发无关。这是关于在您将电子邮件消息编码并准备好时发送电子邮件。

您的问题应该听起来像“从 PHP 发送原始电子邮件”。这是一个类似的：

[给定一封电子邮件作为原始文本，我如何使用 PHP 发送它？](https://stackoverflow.com/questions/6632399/given-an-email-as-raw-text-how-can-i-send-it-using-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:05:04.423

如果所有电子邮件都应该进入备份收件箱的解决方案：为 2 个地址创建一个别名，其中一个是管道，一个是备份箱。

如果您只需要在失败时存储邮件，将电子邮件存储在您有权访问的邮箱中的一种更简单的方法是[`imap_append`](http://www.php.net/imap_append)，绕过任何可能与标题混淆的实际交付。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T20:31:02.367

所以发送两次？

```
<?php
// Your regular mail logic here, concluded by something like...
mail('someone@example.com', 'Subject', $message, $headers);
// Then do it again, but to another address
mail('forward_address@example.com', 'Subject', $message, $headers);
?> 
```

只要您对消息/标题使用相同的变量，它们就会被重新用于第二个收件人。此外，您可以`FW:`根据需要在主题前面添加。

# javascript - 谷歌浏览器忽略对 print() 的过于频繁的调用

> ID：13827955
> 
> 赞同：1
> 
> 时间：2012-12-11T20:26:33.467
> 
> 标签：javascript, google-chrome, printing

> **可能重复：**
> [JavaScript 打印被 Chrome 阻止，解决方法？](https://stackoverflow.com/questions/10401454/javascript-print-blocked-by-chrome-workaround)

当我`print()`在 Google Chrome 中进行 2 次或更多方法调用时，浏览器会`print()`在最新版本的 Chrome 中阻止该功能。

这是我在控制台中得到的错误：

> 忽略对 print() 的过于频繁的调用。

# java - POST REST 服务不响应我的 ajax jquery 调用（GET 是的，确实如此）

> ID：13827964
> 
> 赞同：0
> 
> 时间：2012-12-11T20:27:18.257
> 
> 标签：java, ajax, rest, jersey

我有一个简单的 jersey (java) 休息服务器，带有使用 jquery 的 Web 界面。我有一个用于 GET 和 POST 模式的 REST 服务。POST 调用不起作用，它在输入数据端有一个 json 对象并返回一个 json 数据。

异常消息：

```
A message body reader for Java class ....RESTTaskDataInput, and Java type class ....RESTTaskDataInput, and MIME media type application/x-www-form-urlencoded; charset=UTF-8 was not found.

The registered message body readers compatible with the MIME media type are:

application/x-www-form-urlencoded; charset=UTF-8 ->
  com.sun.jersey.core.impl.provider.entity.FormProvider... 
```

用于后调用的 Jquery 代码（单击按钮进行调用）：

```
 $("#task-launcher-post").click(function()
        {                
            $("div#result").text(""); 
            $.ajax({ 
                type: "POST",                    
                url: "resources/foo", <= This is OK, the rest interface is under that
                data: {
                    code: "1234",
                    email: "my@email.com"
                },
                dataType: "json",                    
                success: function(result)
                {   
                    $("div#result").append('...');
                },
                error: function(xml,result)
                {
                    $("div#result").append('...');                    
                }
            });                                            
        }); 
```

Java REST 服务代码

```
@Path("/foo")
public class RESTSERVICECrawler 
{
   ...

   @POST    
   @Consumes("application/json")
   @Produces("application/json")
   public RESTLaunchResult launch(RESTTaskDataInput input) 
   {                
      RESTLaunchResult result = new RESTLaunchResult();
      ...
      return result;
   } 
```

}

Java RESTTaskDataInput 代码（输入端使用的数据）

```
@XmlRootElement
public class RESTTaskDataInput 
{ 
   public String code;    
   public String email;        
} 
```

GET 调用适用于 url 参数，但 POST 不适用于输入中的 json。我不知道为什么，我阅读了 ajax 的 jquery 文档，我认为 rest 服务器无法理解 json 输入数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:49:31.223

尝试：

```
public RESTLaunchResult launch(JAXBElement<RESTTaskDataInput> input)  {
    try {
        RESTTaskDataInput data = input.getValue();
    } ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:37:40.140

感谢查理指示的解决方案。需要设置 contentType。

```
 var data = {
                   code: "123",
                   email: "email"
                }

                $.ajax({
                    type: "POST",                    
                    url: "resources/foo",
                    data: JSON.stringify(data),
                    dataType: "json",         
                    contentType: 'application/json',
                    success: function(result)
                    {   
                        $("div#result").append('<h5 id="result" class="text-success">' + result.success + " " + result.message + '</h5></div>');
                    },
                    error: function(xml,result)
                    {
                        $("div#result").append('<h5 id="result" class="text-error">' + result + '</h5>');     
                    }
                }); 
```

# .net - 调试一个在不引发 AppDomain.UnhandledException 的情况下崩溃的 exe

> ID：13827967
> 
> 赞同：1
> 
> 时间：2012-12-11T20:27:28.267
> 
> 标签：.net, windows

我有一个在 Visual Studio 中正常工作的 exe。当我将它部署到 Windows Server 时，它会崩溃——即使我试图捕获它未处理的异常，如下面的代码所示。代码*确实*按照 VS 中的预期捕获未处理的异常（即，它在 msg 框中显示异常对象）。当代码在服务器上崩溃时，它让我有机会在 Visual Studio 中“调试”代码，提供如下所示的读数。

1.  为什么我的异常处理程序不显示消息框？
2.  我如何解释这个崩溃读数？

```
Sub Main(ByVal args() As String)

    AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf errorReporter

    Dim myProcess As AutomatedProcessVB = New AutomatedProcessVB("Laphie")

    myProcess.run()

End Sub

Private Sub errorReporter(sender As Object, e As System.UnhandledExceptionEventArgs)
    MsgBox(e.ExceptionObject.ToString)
    Environment.Exit(3)
End Sub 
```

这是程序崩溃时的输出：

```
'AutoMatcher.exe': Loaded 'D:\Executables\AutoMatcher.exe', No native symbols in symbol file.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ntdll.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\kernel32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\sysfer.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\mscoree.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\advapi32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\rpcrt4.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\shlwapi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\gdi32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\user32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\msvcrt.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\imm32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\msctf.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\lpk.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\usp10.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.6002.18305_none_5cb72f2a088b0ed3\comctl32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\msvcr100_clr0400.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\mscorlib\16126cae96ea2422253ae06eeb672abc\mscorlib.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ole32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Culture.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\nlssorting.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\clrjit.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\rsaenh.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System\811a7bc79f8f0a5be8065292a320819e\System.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Core\752225ca2585aa8f1c46b489e172e920\System.Core.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Data.Linq\df6307904c34b42871857eb60ceb338f\System.Data.Linq.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\Microsoft.VisualBas#\da70ab23582f4ebf61a2d551a390afcf\Microsoft.VisualBasic.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Drawing\9422d0c052186760a4645e10995487f5\System.Drawing.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Windows.Forms\caffbced23ee85b40b919ad4a122b7aa\System.Windows.Forms.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.6002.18305_none_88f3a38569c2c436\comctl32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Configuration\ed886fb71addf400705481dcf8de12da\System.Configuration.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Xml\cb0c00757e89f0b1fe282913ed667212\System.Xml.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\urlmon.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\oleaut32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\iertutil.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ntmarta.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\Wldap32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ws2_32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\nsi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\psapi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\samlib.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\version.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\secur32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\shell32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\shfolder.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Data\90f1acbd79e2a5fabfb8c516d6be36a3\System.Data.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\crypt32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\msasn1.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\userenv.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Transactions\102cfe160aeb1e16a35890004a421ec9\System.Transactions.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\assembly\GAC_32\System.Transactions\v4.0_4.0.0.0__b77a5c561934e089\System.Transactions.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.EnterpriseSe#\6fc86a3e1d07ea824cd49b0c0b19d2f5\System.EnterpriseServices.ni.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.EnterpriseSe#\6fc86a3e1d07ea824cd49b0c0b19d2f5\System.EnterpriseServices.Wrapper.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\assembly\GAC_32\System.EnterpriseServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.Wrapper.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\security.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\credssp.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\schannel.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\netapi32.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\PwdSSP.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\kerberos.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\cryptdll.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\msv1_0.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ntdsapi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\dnsapi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\mswsock.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\WSHTCPIP.DLL', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\wship6.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\nlaapi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\IPHLPAPI.DLL', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\dhcpcsvc.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\winnsi.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\dhcpcsvc6.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\NapiNSP.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\winrnr.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\rasadhlp.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\dssenh.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\ncrypt.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\bcrypt.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\diasymreader.dll', No symbols loaded.
'AutoMatcher.exe': Loaded 'C:\Windows\System32\apphelp.dll', No symbols loaded.
The thread 'Win32 Thread' (0x2d70) has exited with code 0 (0x0).
Unhandled exception at 0x7719fc56 in AutoMatcher.exe: 0xE0434352: 0xe0434352.
The thread 'Win32 Thread' (0x808) has exited with code -2146233082 (0x80131506).
The thread 'Win32 Thread' (0x2a94) has exited with code -2146233082 (0x80131506).
The thread 'Win32 Thread' (0x1d14) has exited with code -2146233082 (0x80131506).
The thread 'Win32 Thread' (0x1ea4) has exited with code -2146233082 (0x80131506).
The thread 'Win32 Thread' (0x221c) has exited with code -2146233082 (0x80131506).
The program '[9572] AutoMatcher.exe: Native' has exited with code -2146233082 (0x80131506). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:26:11.980

> 包围整个程序的 try-catch 块捕获所有错误并将它们写入文件

这是一个令人不安的选择。如果程序在创建文件时有任何问题，那么它肯定也会在创建日志文件以报告错误时遇到问题。所以你也看不到错误。至少也要使用 Console.WriteLine() 。

此类问题的典型原因是您创建文件时未指定文件的完整路径名。因此，您将严重依赖正确设置程序的默认目录。从桌面启动与从命令行提示启动时不同。请注意，如果没有 UAC 提升，您可以写入的地方很少。始终指定文件的完整路径名，使用 Environment.GetFolderPath() 查找可写目录。

# c++ - 如何制作一个 C++ 映射容器，其中键是值的一部分？

> ID：13827973
> 
> 赞同：16
> 
> 时间：2012-12-11T20:27:52.000
> 
> 标签：c++, dictionary, stl, containers

我想存储一堆键值对象，但是值对象本身（以及对它的引用）知道它的键。我还想有效地查找仅给定键的这些对象。

```
class SomeObject
{
private:
    //String or integer. int seem cheap enough to duplicate with std::map, but
    //strings seem pretty expensive when there may be thousands of objects in existence.
    //Reference/Pointer to key is fine
    const SomeOtherObject key;
    ...other stuff...
public:
    ...methods, some of which use the key in some way...
}; 
```

*   标准::地图
    *   似乎要求存储是一个 std::pair，这样值就不能访问密钥。如果值包含键，则需要复制。
    *   实际上并没有强制值内的键不会以某种方式改变
*   标准::设置
    *   看起来是一个非常好的解决方案，使用自定义比较方法通过键提供唯一性，直到您意识到它使您的整个值变为常量，而不仅仅是键字段。
*   std::vector （或其他类似数组/列表的解决方案）
    *   可以使用线性搜索，或者如果项目保持排序，则进行二分搜索。但是我怀疑这在性能方面并不是最优的，并且需要某种额外的层来真正实现所需的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-01-12T23:38:03.940

**C++14`std::set::find`非键搜索**

如[http://en.cppreference.com/w/cpp/container/set/find](http://en.cppreference.com/w/cpp/container/set/find)所述， C++14 添加了两个新`find`API：

主文件

```
template< class K > iterator find( const K& x );
template< class K > const_iterator find( const K& x ) const; 
```

这允许您执行以下操作：

主文件

```
#include <cassert>
#include <set>

class Point {
    public:
        // Note that there is _no_ conversion constructor,
        // everything is done at the template level without
        // intermediate object creation.
        //Point(int x) : x(x) {}
        Point(int x, int y) : x(x), y(y) {}
        int x;
        int y;
};
bool operator<(const Point& c, int x) { return c.x < x; }
bool operator<(int x, const Point& c) { return x < c.x; }
bool operator<(const Point& c, const Point& d) {
    return c.x < d;
}

int main() {
    // std::less<> because of:
    // https://stackoverflow.com/questions/20317413/what-are-transparent-comparators
    std::set<Point, std::less<>> s;
    s.insert(Point(1, -1));
    s.insert(Point(2, -2));
    s.insert(Point(0,  0));
    s.insert(Point(3, -3));
    assert(s.find(0)->y ==  0);
    assert(s.find(1)->y == -1);
    assert(s.find(2)->y == -2);
    assert(s.find(3)->y == -3);
    // Ignore 1234, find 1.
    assert(s.find(Point(1, 1234))->y == -1);
} 
```

在 Ubuntu 16.10、6.2.0 上测试`g++`，其中：

```
g++ -std=c++14 -Wall -Wextra -pedantic -o main.out main.cpp
./main.out 
```

**使用自定义类而不是`less<>`**

这使事情更加明确，并允许您为每个类编写多个比较器：

```
#include <cassert>
#include <set>

class Point {
    public:
        Point(int x, int y) : x(x), y(y) {}
        int x;
        int y;
};

struct PointCmpY {
    // https://stackoverflow.com/questions/20317413/what-are-transparent-comparators
    typedef std::true_type is_transparent;
    bool operator()(const Point& lhs, int rhs) const {
        return lhs.y < rhs;
    }
    bool operator()(int lhs, const Point& rhs) const {
        return lhs < rhs.y;
    }
    bool operator()(const Point& lhs, const Point& rhs) const {
        return lhs.y < rhs.y;
    }
};

int main() {
    std::set<Point, PointCmpY> s;
    s.insert(Point(1, -1));
    s.insert(Point(2, -2));
    s.insert(Point(0,  0));
    s.insert(Point(3, -3));
    assert(s.find(0)->x == 0);
    assert(s.find(-1)->x == 1);
    assert(s.find(-2)->x == 2);
    assert(s.find(-3)->x == 3);
    assert(s.find(Point(1234, -1))->x == 1);
} 
```

**也可以看看**

*   [是否可以使用与 std::set 中包含的不同类型的元素来执行搜索和删除？](https://stackoverflow.com/questions/17375780/is-it-possible-to-use-elements-of-a-different-type-than-contained-in-a-stdset)
*   [对 unique_ptrs 集的原始指针查找](https://stackoverflow.com/questions/18939882/raw-pointer-lookup-for-sets-of-unique-ptrs)
*   通过多个键索引对象：[如何通过多个键索引和查询 STL 映射容器？](https://stackoverflow.com/questions/1858306/how-to-index-and-query-stl-map-containers-by-multiple-keys/48710964#48710964)
*   有效[地实现双映射：双向映射是否有更有效的实现？](https://stackoverflow.com/questions/21760343/is-there-a-more-efficient-implementation-for-a-bidirectional-map/21811422#21811422)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:07:51.753

C++ 提供了`mutable`允许您使用第二种解决方案的关键字—— a `set`. 将您的值声明为`mutable`在您的项目类中将允许修改它，即使项目是`const`. 另请参阅： ['mutable' 关键字除了允许变量由 const 函数修改之外是否还有其他用途？](https://stackoverflow.com/q/105014/946850)

或者，更简单的是，为您的值实现一个访问器，`const_cast`以消除项目的恒定性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T20:48:47.850

我感觉到你的痛苦。让我生气的是，`set`并且`map`总是在底层使用相同的数据结构来实现，这是一个`tree`使用密钥提取器参数化的值。不幸的是，标准中没有这样的东西。

如果 boost 没问题，使用[Boost.MultiIndex](https://www.boost.org/doc/libs/1_69_0/libs/multi_index/doc/tutorial/techniques.html)来实现你所需要的。也看看[Boost.Intrusive](https://www.boost.org/doc/libs/1_69_0/doc/html/intrusive.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:26:29.143

> > ...但是值对象本身（以及对它的引用）知道它的键

**地图：**

对象不能知道“它的”键，因为指向同一对象的指针可能会使用不同的键添加到多个映射中。密钥属于地图；不是一个对象。

**放：**

当这个成员的值发生变化时会发生什么？您将如何强制重新索引？这就是为什么 set 强制执行 constness。

--

您正在尝试根据其成员之一索引给定类的项目，但您不想复制此成员以用于索引目的，并且您不想使对象 const（我假设您确实想要使成员 const)。

我会在 Red-Black 或 AVL 树上构建它。

我对 ybungalobill 建议的 Boost.MultiIndex 不够熟悉。我不确定它的实例化代码是否复制了索引成员，或者它如何处理该成员的值更改。

# c# - 来自 C 背景，在 C# 中实现 const 引用数据表/结构的好方法是什么？

> ID：13827976
> 
> 赞同：10
> 
> 时间：2012-12-11T20:27:57.503
> 
> 标签：c#, c

我将给出一个我熟悉的使用**C**实现的简单示例。我认为的重点是如何使用数据，而不是我在示例中用它做什么:)

```
typedef struct  
{
  const char  *description;
  uint32_t    colour_id;      
  uint32_t    quantity;
} my_data_t;

const my_data_t ref_data[] =
{
  {"Brown Bear", 0x88,   10},
  {"Blue Horse", 0x666,  42},
  {"Purple Cat", 123456, 50},
};

void show_animals( void )
{
  my_data_t *ptr;

  ptr = &ref_data[2];

  console_write("Animal: %s, Colour: 0x%8X, Num: %d", 
      ptr->description,
      ptr->colour_id,
      ptr->quantity);
} 
```

因此，我正在寻找有关如何在 C# 中实现类似数据表或参考数据的建议。我掌握了更高层次的东西，但我还没有处理任何表驱动的数据方法。

例如，我可能在 C# 中尝试做的是有一个组合框，允许从*描述*字段中进行选择，而*颜色 id*和*数量*可能用于更新只读框。

这是一个非常简单的例子，但如果我能确定一种实现它的好方法，我可以将其推断为我实际正在做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:49:19.460

我会使用一个[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)不可变的类。

```
public class MyData
{
    public MyData(string description, int colorId, int quantity)
    {
        Description = description;
        ColorId = colorId;
        Quantity = quantity;
    }
    public string Description {get; private set; }
    public int ColorId {get; private set; }
    public int Quantity {get; private set; }
}

...

public static readonly ReadOnlyCollection<MyData> refData =
    new ReadOnlyCollection<MyData>(
        new [] {
            new MyData("Brown Bear", 0x88,   10),
            new MyData("Blue Horse", 0x666,  42),
            new MyData("Purple Cat", 123456, 50)
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:31:29.913

这

```
const my_data_t ref_data[] =
{
  {"Brown Bear", 0x88,   10},
  {"Blue Horse", 0x666,  42},
  {"Purple Cat", 123456, 50},
}; 
```

可以用`readonly`修饰符 in代替`C#`，例如

```
//INITIALIZED ONES AND NEVER CHANGED, BY CONVENTION
public static readonly ref_data[] my_data_t = new ref_data[] =
{
  new ref_data{Animal = "Brown Bear", Code = 0x88,   Index = 10},
  new ref_data{Animal = "Blue Horse", Code = 0x666,  Index = 42},
  new ref_data{Animal = "Purple Cat", Code = 123456, index = 50},
}; 
```

其中`ref_data`（在这种情况下）类似于

```
public class ref_data
{
   public string Animal {get;set;}
   public int    Code   {get;set;}  //GUESS, PUT APPROPRIATE NAME
   public int    Index  {get;set;}  //GUESS, PUT APPROPRIATE NAME
} 
```

同样适用于常量`const char *description`，使用`readonly`.

我再说一遍，这是一种惯例，因为理论上有一种方法可以更改数据或欺骗对它的访问。

中没有**常量指针**的概念`C#`，因为指针（在托管内存中）不断移动，垃圾收集器不断收缩（碎片整理）内存，以避免内存碎片，这给我们带来了快速分配的好处。

还有另一种选择（不知道这是否适合您的情况），您可以通过*修饰符*使用对代码的无管理访问`unsafe`并将所有`C/C++`指针内容保留在里面。这样，您对 Grabage Collector 说：“等等，我知道我在做什么”，因此*所有*内存管理都必须由您（在**该非托管**代码中）处理，就像您编写普通`C/C++`代码一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:37:08.237

我发布此答案是为了响应您在乔的回答中详细说明我的评论的请求。

第一点：如果您`my_data_t`出于某种原因需要成为结构，C# 确实支持这些。除非您愿意，否则您不必像 Joe 那样将其升级到类。

```
public struct MyData
{
    public string Description;
    public uint ColourID;
    public uint Quantity;
} 
```

这是一个可变结构。给定这个结构的一个实例，如果我愿意，我可以修改它的值。大多数人会说可变结构是邪恶的。作为游戏开发者，我想说可变结构*非常重要*，但也很*危险*。

任何对象的可变字段和属性都可以使用对象初始化器语法进行初始化，这可能最类似于您在 C 中所做的事情：

```
MyData x = { Description = "Brown Bear", ColourID = 0x88, Quantity = 10 }; 
```

我个人认为这有点笨拙，特别是对于大型结构，但如果您想使用它，它是可用的。

`readonly`您可以通过向其字段添加修饰符来将结构更改为不可变：

```
public struct MyData
{
    public MyData(string description, uint colourID, uint quantity)
    {
        this.Description = description;
        this.ColourID = colourID;
        this.Quantity = quantity;
    }
    public readonly string Description;
    public readonly uint ColourID;
    public readonly uint Quantity;
} 
```

请注意，`readonly`这只防止对象引用被更改。如果对象是可变的，它不会阻止对象本身发生变异。

另请注意，我还添加了一个构造函数。这是因为`readonly`字段*只能*在静态初始化程序或对象的构造函数内部设置（除非有一些技巧）。`MyData`在这里，您将在 Joe 的回答中初始化 as 的新实例：

```
MyData x = new MyData("Brown Bear", 0x88, 10); 
```

第二点：恒常性，或缺乏恒常性。C# 不支持 C-style constness，因为 C-style constness is *broken*。[Eric Lippert 曾是 Microsoft C# 语言团队的一名开发人员，他在此处](https://stackoverflow.com/questions/3263001/why-const-parameters-are-not-allowed-in-c-sharp)详细阐述了这一点。

我认为，除非你真的、真的、真的有充分的理由，否则不用担心模拟 C 风格的 constness 会好得多。一致性最终是一种防止您的代码被恶意或无知者篡改的方法。不管你喜欢与否，恶意软件都能够改变你的数据——在 C 和 C# 中——我们有一个更好的工具来保护自己免受他人的无知：封装！

将使用该表的功能包装在一个类中，使该表成为该类的私有成员，然后*不要改变它*。如果在某些时候您*确实*需要将该表暴露给外界，*那么*您可以`ReadOnlyCollection`按照 Joe 的建议使用：

```
public static readonly ReadOnlyCollection<MyData> ReferenceTable = new ReadOnlyCollection<MyData>(new []
{
    new MyData(/* whatever */),
    new MyData(/* whatever */),
    new MyData(/* whatever */),
}); 
```

`ReadOnlyCollection`只是其他一些集合的薄包装，在这种情况下，您的数据表。它可以包装任何实现`IList<T>`接口的对象，包括数组和一些内置集合。

还有一点需要注意：在您的一条评论中，您提到`const`在 C 中声明表的原因之一是因为它会影响对象在内存中的分配位置。这不是这里的情况。在上面的例子中，`RefData`会在托管堆上声明，因为它是一个数组，而数组是引用类型。

# jquery - jQuery 连接

> ID：13827978
> 
> 赞同：0
> 
> 时间：2012-12-11T20:27:58.533
> 
> 标签：jquery

这有效，但前提是表单加载时值存在：

```
$('CSZ').val(
$('City').val() + ', ' +  
$('State').val() + ' ' + 
$('Zip']).val() 
```

我尝试了这样的函数来尝试在填充字段时进行连接，但没有奏效。

```
$('CSZ').blur(function() {
$('City').val() + ', ' +  
$('State').val() + ' ' + 
$('ZipCode').val()}); 
```

但没有得到任何结果。有任何想法吗？

谢谢。

```
OK this works. Is there any simpler way to write this?

function SetMainLine() {var csz = 
$(spec['V08_City']).val() + ', ' +  
$(spec['V09_State']).val() + ' ' + 
$(spec['V10_ZipCode']).val();
$(spec['V01_Mainline']).val(csz);
}

spec['V08_City'].onchange = SetMainLine;
spec['V09_State'].onchange = SetMainLine;
spec['V10_ZipCode'].onchange = SetMainLine;

The spec[''] is just calling a form field from a database. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:32:57.130

该`.blur`函数从未实际分配新值：

```
var val = $('City').val() ...
$(this).val(val); 
```

正如所`meder`指出的，您也可能缺少一些选择器语法。

# uml - 组件图和封装图的区别

> ID：13827979
> 
> 赞同：14
> 
> 时间：2012-12-11T20:28:00.630
> 
> 标签：uml, papyrus

组件图和包图有什么区别？

我使用 Papyrus 进行系统建模

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T06:16:41.000

组件图通常用于说明界面。所以一个组件可能是一个类，也可能是一个类的集合。

包图是一种将相关 UML 项组合在一起的机制，可以将其视为 UML 的（文件系统）目录/文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-13T01:33:49.877

我参考了 Michael Feathers 的作者“有效地使用遗留代码”（Prentice Hall 2005）

> 在 UML 中，组件是部署在一起的类组，包是模型元素的通用分组设备。包可以对任何模型元素进行分组，甚至是用例之类的东西，但实际上它们通常对类进行分组，因此组件和包往往是同义词。

[来自论坛发帖](http://coding.derkeiler.com/Archive/General/comp.object/2005-07/msg00043.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T07:12:26.583

> 组件图显示了一个封装类及其接口、端口和由嵌套组件和连接器组成的内部结构。**它解决了系统的静态设计实现视图。**
> 
> 包图显示了将模型本身分解为组织单元及其依赖关系。

**来自 UML 2 用户指南**

包是对事物进行分组。组件是系统的可更换部件。通常包在分析模型中标识，在设计模型中标识组件。组件图用于基于组件的开发

# r - 如何在 R Studio 中将波形文件转换为数字

> ID：13827980
> 
> 赞同：9
> 
> 时间：2012-12-11T20:27:59.967
> 
> 标签：r, math, audio, complex-numbers

我已将音频文件加载到 R 中，现在想获取复数样本的列表，以便我可以对样本使用 FFT 和小波变换。

如何在 R 中获取要使用的数字列表？我试过*'audio$data'*，但收到一条错误消息，因为 $ 未在 s4 类中定义。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T21:44:31.853

`readWave`从[`tuneR`包](http://mirror.its.dal.ca/cran/web/packages/tuneR/)中读取文件后，您可以使用`audio@left`和`audio@right`访问原始数据。后者仅在您的数据是立体声时可用。`str(audio)`将为您提供有关对象结构的详细信息，并且对于找出它包含哪些数据以及如何访问该数据非常有用。

由于显而易见的原因，波形文件中的数据将是实数（实际上甚至是整数），因此如果您需要复数，则可能必须对其进行转换。但我猜想如果你传递一个整数向量，这样的转换会自动执行。普通`fft`函数（来自 package `stats`）可以毫无问题地处理整数向量。

# jquery - Jquery 可重用代码

> ID：13827982
> 
> 赞同：2
> 
> 时间：2012-12-11T20:28:21.963
> 
> 标签：jquery, jquery-ui

我有一些 jquery 代码用于根据其宽度设置 div 高度。[JSFiddle 示例在这里](http://jsfiddle.net/SGZfE/1/)。

一切都按原样工作，但我想要的是一个可重用的函数，这样我就不会为每个唯一的 id 创建完全相同的函数。该代码目前仅适用于#bigHug div，但我希望能够`$('#biggerHug').setHeight(1.8)`在`.ready`and`.resize`函数中执行类似操作并为提供的 id 设置高度。

我试图通过放置`$(this).width()`而不是函数来尝试解决方案，但一切都“坏了” `$('#bigHug').width()`。`setHeight`div 不会在加载或调整窗口大小时显示。我在想它与`$(this)`引用`$(window).ready`而不是`$('#bigHug').setHeight(1.8)`.

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:34:23.443

试试这个：

```
function setHeight(ratio, elem ) {
    $elem = $(elem);
    var divWidth = $elem.width();
    var divHeight = divWidth / ratio;
    $elem.height(divHeight);
}

$(window).ready(function() {
    setHeight(1.8, '#bigHug');
});

$(window).resize(function() {
    setHeight(1.8, '#bigHug');
});​ 
```

**[演示](http://jsfiddle.net/SGZfE/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:38:09.250

你可以像这样创建一个 jquery“[插件](http://docs.jquery.com/Plugins/Authoring)”。*这是一个简单的例子。*

```
(function($){
    $.fn.setHeight = function(val){
        return this.each(function(){
            // do calculations here and assign height ...
            $(this).height(val);
        });
    }
})(jQuery); 
```

然后您可以这样称呼它：`$('#mydiv').setHeight(1.8)`当然，它适用于任何 jquery 选择器。

# java - java正则表达式将所有内容都放在右括号中

> ID：13827984
> 
> 赞同：-3
> 
> 时间：2012-12-11T20:28:22.727
> 
> 标签：java, regex

我想知道是否有可能有一个 java 正则表达式来获取括号之间的所有内容

和`[any string]`返回`any string`

我在想像`[? . ]?`我猜的原因`[?`搜索一个左括号并且`.`意味着任何字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:35:22.080

试试这个正则表达式：

```
(?<=\\[).*?(?=\\]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:34:13.053

尝试以下正则表达式：

`(?<=\[).*(?=\])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:02:19.993

无需环顾四周。试试这个：

```
\[([^\]]+) 
```

这匹配一个左括号，然后捕获不是右括号的所有内容，直到下一个右括号。您可以使用以下方法获取捕获的反向引用`$1`

# javascript - 跨多个元素排队 jQuery 事件/动作

> ID：13827985
> 
> 赞同：0
> 
> 时间：2012-12-11T20:28:24.137
> 
> 标签：javascript, jquery, queue

我有一个带有以下标记的 HTML 文档：

```
<div id="outside">
<div id="warning">Some warning here</div>
<div id="inside"></div>
</div> 
```

我想做的是这个列表，按照列出的顺序，在前一个完成之前不继续下一个项目：

1.  隐藏#outside 元素。
2.  将#inside 的内容设置为“foo”。
3.  显示#outside 元素。

这样的事情可以用 jQuery 完成：

```
$('#outside').hide(function(){
    $('#inside').html('bar');
    $('#outside').show();
}); 
```

随着更多事件包含回调，此代码变得更加混乱，并且变得不易维护。

相反，我想做这样的事情：

```
$.sequence(
    function(){ $('#outside').hide(); },
    function(){ $('#inside').html('foo'); },
    function(){ $('#outside').show(); }
); 
```

此代码清楚地显示了该过程的每个步骤，并且允许轻松插入/删除任何步骤，因为它不需要嵌套函数回调。

请注意，此处显示的 HTML 与我实际使用的内容相比已大大简化，并且我希望对这些元素应用更长的操作链。

通常，仅通过对同一 jQuery 元素的顺序方法调用就可以做到这一点，但是使用的不同元素不允许队列按顺序执行。我正在寻找一种方法来对调用进行排序，这种调用在读取时看起来很干净并且可以与任何元素一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:37:11.630

在这个特定的例子中，它相对容易。您可以通过以下方式获得所需的结果：

```
$('#outside').hide();
$('#inside').html('foo');
$('#outside').show(); 
```

但是，如果你抛出异步事件，这显然是行不通的。假设您想使用 ajax 获取“foo”。这将是一种相对常见的方式。

```
// request for content immediately
var req = $.get("myfile.php");
// fade out container
$("#outside").fadeOut(function(){

    // now that the container is faded out, we
    // bind to the done callback of the request
    // so that we can use the response and fadeIn the container
    // as soon as possible without causing an abrupt stop of the animation
    // if the request finishes early (it most likely will).
    req.done(function(response){
        $("#inside").html(response);
        $("#outside").fadeIn();
    });
}); 
```

除非您不习惯使用延迟对象，否则没有任何内容难以阅读。它会产生少量代码，通过微妙的动画尽可能快地检索和显示内容。

如果你真的想让它“看起来更好”，你当然可以在函数后面抽象这个方法，但它最终可能会变得不那么可维护（*我在哪里定义了那个函数？*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:36:15.887

这个例子对你有用吗？

```
function performTransition(){
    $('#outside').hide();
    $('#inside').html('foo');
    $('#outside').show();
}

$(function(){
    $(selector).click(performTransition);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:47:31.340

您可以使用`.queue`标准动画队列。它仍然很冗长，但至少没有嵌套。

```
$("#outside").queue(function() {
   $("#outside").hide('slow');
   $(this).dequeue();
});
$("#outside").queue(function() {
   $("#inside").html('bar');
   $(this).dequeue();
});
$("#outside").queue(function() {
   $("#outside").show();
   $(this).dequeue();
}); 
```

# javascript - 使用 javascript 内联更改颜色

> ID：13827992
> 
> 赞同：0
> 
> 时间：2012-12-11T20:28:58.343
> 
> 标签：javascript

有没有办法使用 javascript 和 HTML 来改变 span 的颜色？例如：

```
<span onLoad="document.getElementById('test').style.color = 'red';" id="test">test</span> 
```

但这似乎不起作用。

**快速更新：**这只是我要解决的实际问题的前兆。基本上我在一个只允许就地 HTML 编辑的 CMS 中。这意味着我无法访问头部来添加自定义 javascript 函数等。我要做的是制作一个内联函数，它采用指定的日期（例如跨度），然后根据一些对其进行着色*内联*js逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:31:41.877

Span 没有“onload”事件。如果您想在页面加载时运行它，请`<head>`使用以下代码添加脚本块：

```
window.onload = function() {
    document.getElementById('test').style.color = 'red';
} 
```

考虑到您对无法访问标题的澄清：您可以`<script>`在您定位的元素下方的任何位置添加一个块，并且它可以工作。`</body>`如果可能，在之前（或尽可能向下）添加一个脚本块。另一种可能性是从 CMS 编辑器中添加一个类，并在外部 CSS 文件中定义该类。另一种可能性是内联 CSS 样式，正如 defau1t 的回答所建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:32:28.417

如果您有任何不使用的理由`css`并想使用，`JavaScript`那么您可以使用

```
window.onload=function(){
    document.getElementById('test').style.color = 'red';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:35:31.897

onload 事件是为 body 定义的，而不是 DOM 元素。您可以使用`document.getElementById("test").style.color = "red";`

或简单使用：

```
<span id="test" style="color:red;">test</span> 
```

# text - VHDL - 包中的类型声明

> ID：13827993
> 
> 赞同：3
> 
> 时间：2012-12-11T20:29:00.100
> 
> 标签：text, vhdl, shift, segment

我正在尝试在 7 段显示器上滚动文本。文本将从键盘输入，我使用 BASYS2 作为 FPGA。我的键盘界面完成了，还有我的七段控制器。但是我的移位器模块有问题。当我处理扫描码时，我需要使用一个字节数组。我在一个包中声明了这种类型，即“mypackage2”。但是，据我了解，移位器模块无法使用该类型，即“reg_array”。我需要改变什么，或者我在这里缺少什么？由于我是 VHDL 新手，我可能犯了一些基本错误。此外，我编写的包没有显示在窗口左侧的项目层次结构中。任何帮助表示赞赏。谢谢你。

编辑：我注意到我不应该使用 reg 数组如下：`Data_out : out reg_array(REGSIZE-1 downto 0)`，因为它的宽度已经指定。所以我稍微改变了我的代码并将错误数量减少到 3 个。

这是移位器模块：

```
library IEEE; 
use IEEE.STD_LOGIC_1164.ALL; 
use IEEE.STD_LOGIC_UNSIGNED.ALL; 
use IEEE.STD_LOGIC_ARITH.ALL; 
use work.mypackage2.all; 

entity shifter is 
    generic ( REGSIZE  : integer := 16); -- Text will be composed of 16 characters
    port(clk      : in  std_logic; 
         Scan_Dav : in  std_logic; -- this is '1' when there is a new scancode
         Data_in  : in  std_logic_vector(7 downto 0); --scancode from keyboard
         Data_out : out reg_array ); 
end shifter; 

architecture bhv of shifter is 

        signal shift_reg : reg_array;
begin 
    process (clk, Scan_Dav) begin 
        if rising_edge(clk) then 
            if Scan_Dav = '1' then 
                shift_reg(REGSIZE-1 downto 1) <= shift_reg(REGSIZE-2 downto 0); 
                shift_reg(15) <= shift_reg(0); 
            end if; 
        end if; 
        Data_out <= shift_reg; 
    end process; 
end bhv; 
```

这是包裹：

```
library IEEE; 
use IEEE.STD_LOGIC_1164.all; 

package mypackage2 is 

   subtype reg is std_logic_vector(7 downto 0); -- a byte 
        type reg_array is array (0 to 15) of reg; -- array of bytes 

end mypackage2; 

package body mypackage2 is 

end mypackage2; 
```

这些是最新的错误：

```
ERROR:HDLParsers:807 - "F:/Projeilk/Shifter.vhd" Line 22\. shift_reg can not be used with range downto.
ERROR:HDLParsers:807 - "F:/Projeilk/Shifter.vhd" Line 22\. shift_reg can not be used with range downto. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:48:04.437

您已经定义了两次字节数组的大小。在包文件中，您已定义`reg_array`为 16 的固定数组`reg`。但是在架构中，您试图通过再次`shift_reg`定义大小来指定大小，就好像是一个可变大小的数组一样。`reg_array``(REGSIZE-1 downto 0)``reg_array`

您可以保留固定的声明`reg_array`并将其定义`shift_reg`为：

```
signal shift_reg : reg_array; 
```

或者保留您的定义`shift_reg`并声明`reg_array`为可变宽度数组，例如：

```
type reg_array is array (natural range <>) of reg; -- variable-length array of bytes 
```

看起来您的代码中可能还有更多错误，但其中一些错误可能是此问题的级联错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:22:16.960

我还无法添加评论，所以我必须添加另一个答案。快速查看，我认为您的顶级没有任何严格的错误。我怀疑 RTL 输出是优化的受害者。具体来说，是否`KeyboardController`在综合中优化了输出？`DoRead`输入不是驱动的，这可能是原因，但不看键盘控制器代码，它只是一种预感。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T21:31:16.383

续（新问题）

我将从这里继续，而不是打开一个新话题。如果我这样做错了，请纠正我的错误。

我所有的代码都编译成功，但我认为我写的内容和示意图显示的内容不一致。

这是我的顶级模块：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
use work.mypackage2.all;

entity TopModule is
    generic ( REGSIZE  : integer := 16);
    Port (Clk        : in STD_LOGIC;
            Reset      : in std_logic; -- System Reset
            PS2_Clk    : in std_logic; -- Keyboard Clock Line
            PS2_Data   : in std_logic; -- Keyboard Data Line
            ANODES     : out STD_LOGIC_VECTOR(3 downto 0);
            SEGMENTS   : out STD_LOGIC_VECTOR(6 downto 0));
end TopModule;

architecture Top_arch of TopModule is

    component clkdivide is
        Port (clkin: in std_logic;
                clkout:out std_logic );
    end component;

    component SevenSegmentController is
        Port (  CLK: in std_logic;
                    DEC1, DEC2, DEC3, DEC4: in std_logic_vector(7 downto 0);
                    SEGMENTS: out std_logic_vector(6 downto 0);
                    ANODES: out std_logic_vector(3 downto 0));
    end component;

    component KeyboardController is
        port (Clk : in std_logic; -- System Clock
                Reset : in std_logic; -- System Reset
                PS2_Clk : in std_logic; -- Keyboard Clock Line
                PS2_Data : in std_logic; -- Keyboard Data Line
                DoRead : in std_logic; -- From outside when reading the scan code
                Scan_Err : out std_logic; -- To outside : Parity or Overflow error
                Scan_DAV : out std_logic; -- To outside when a scan code has arrived
                Scan_Out : out std_logic_vector(7 downto 0));
    end component;

    component shifter is
        port (clk      : in  std_logic;
                Scan_Dav : in  std_logic;
                Data_in  : in  std_logic_vector(7 downto 0);
                Data_out : out reg_array );
    end component;

    signal clk2, scandav, scanerr, doread: std_logic;
    signal sarray: reg_array;
    signal datain: std_logic_vector(7 downto 0);

    begin
        L1: SevenSegmentController 
            port map (SEGMENTS=> SEGMENTS, CLK=> clk2, ANODES=> ANODES,
            DEC1=> sarray(15), DEC2=> sarray(14),
            DEC3=> sarray(13),DEC4=> sarray(12));

        L2: clkdivide 
            port map (clkin=>Clk , clkout=>clk2);

        L3: KeyboardController 
            port map (Clk=> clk2, Reset=> Reset, PS2_Clk=> PS2_Clk,
            PS2_Data=> PS2_Data, DoRead=> doread, Scan_Err=> scanerr,
            Scan_DAV=> scandav, Scan_Out=>datain);

        L4: shifter
            port map (clk=>clk2, Scan_Dav=>scandav, Data_in=> datain, 
            Data_out=>sarray);
end Top_arch; 
```

这是 RTL 示意图： ![顶部模块的 RTL](../Images/f15d3aefb30b8f1bdc5ca8d741666718.png)

各部件互不相连，键盘接口的输出要先接到移位器，再到移位器到七段控制器，但移位器都是独立的。这里有什么问题？