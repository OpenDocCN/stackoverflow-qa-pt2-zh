# StackOverflow 问答 13771000-13771999

# android - 是否有一些免费服务来存储地理 POI 和 REST 检索

> ID：13771000
> 
> 赞同：0
> 
> 时间：2012-12-07T21:08:10.127
> 
> 标签：android, web-services, rest, geolocation, gps

我想创建一个在线存储和检索地理 POI 的 Android 应用程序，并且我正在寻找一些易于使用的在线基础设施来提供此服务。

有这样的吗？我首先想到的是 NoSQL 数据库和 CouchDB，但我不确定这是否能满足我的所有要求。

我需要你的建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:37:09.720

如果我正确解释了您的问题，您希望您的应用程序使用可访问 Internet 的网络服务来存储 POI/地理位置数据，而不是使用像 Google DataStore 或 Amazon RDS 这样的通用“云数据库”，您需要特定于地理位置数据。

如果这是正确的，那么您可以使用 Google Maps/Places API 的一项功能，称为 Place Actions。这基本上可以让您将自己的数据存储在其位置数据库中的现有 POI 之上：

[https://developers.google.com/places/documentation/actions](https://developers.google.com/places/documentation/actions)

# javascript - Javascript 返回 NaN

> ID：13771002
> 
> 赞同：0
> 
> 时间：2012-12-07T21:08:18.490
> 
> 标签：javascript

我有一个函数可以对两个数字进行一些数学运算，但我似乎得到了 NaN 作为它的回报......我不知道为什么......这是我的函数：

```
function mouseConvert(mousex,mousey){

 console.log(mousex+ ' '+ mousey);

    var x = (mousex + Data.offset_x) - (settings.width/2) - settings.offset_left;
    var y = (mousey + Data.offset_y) - settings.offset_top;
    var tx = Math.round((x + y * 2) / settings.grid) - 1;
    var ty = Math.round((y * 2 - x) / settings.grid) - 1;

 console.log(tx+ ' '+ ty);

return [tx,ty];
} 
```

该函数的控制台日志输出显示：

![在此处输入图像描述](../Images/1ab1a173e7fc4f0189351f63224754bd.png)

`Data`这是和的值`settings`

![在此处输入图像描述](../Images/e66652f20ac18e5ecfa508f3ab6027ee.png)

为什么它不返回数字而是返回 NaN ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:24:01.937

好吧，如果鼠标位置是类似的字符串`"0"`，请考虑：

```
(mousex + Data.offset_x) 
```

变成

```
"0" + -32 //"0-32" 
```

然后，当您使用 进行减法时，该字符串`"0-32"`将尝试转换为数字`- (settings.width/2)`。并且`Number("0-32")`是`NaN`，之后一切都变成了`NaN`。

您应该在开始时将它们转换为数字。或者更确切地说，永远不要将它们转换为字符串，因为事件对象已经将它们作为数字......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:15:20.530

你必须将 mouseX 和 mouseY 转换为 int 或 float parseInt 或 parseFloat

```
<html>
<head>
</head>
<body>
<script>
var Data = { ipos: NaN, jpos: NaN, level: "1", money: "1000", offset_x: -32, offset_y: -250};
var settings = { grid: 64, height: 500, offset_left: 258, offset_top: 85, width: 1165};

function mouseConvert(mousex,mousey){
 mousex = parseInt(mousex);
 mousey = parseInt(mousey); 
console.log(mousex+ ' '+ mousey);

    var x = (mousex + Data.offset_x) - (settings.width/2) - settings.offset_left;
    var y = (mousey + Data.offset_y) - settings.offset_top;
    var tx = Math.round((x + y * 2) / settings.grid) - 1;
    var ty = Math.round((y * 2 - x) / settings.grid) - 1;

 console.log(tx+ ' '+ ty);

return [tx,ty];
}
mouseConvert('0', 1);
</script> 
</body>
</html> 
```

返回

```
0 1 
-25 2 
```

没有 parseInt 它将返回**Nan**

# asp.net-mvc - 如何从 WebAPIContrib 实现 RazorViewEngine？

> ID：13771003
> 
> 赞同：1
> 
> 时间：2012-12-07T21:08:28.987
> 
> 标签：asp.net-mvc, razor, asp.net-web-api

我们有以下场景： ContactController : ApiController

现在 ContactController 返回 Contact Model。

我们希望控制器通过使用 Web 应用程序中的适当视图将结果作为剃刀视图传递。

我找到了这个[链接](https://github.com/darrelmiller/WebAPIContrib/tree/master/src/WebApiContrib.Formatting.RazorViewEngine)

这就是 Darrel Miller 为 api 控制器提供 ViewEngineFormatter 的地方。但我不知道如何为返回的模型指定使用哪个 .cshtml 视图。我在 ViewEngineFormatter 的 WriteToStreamAsync 方法上有一个断点。它到达那里并抛出一个错误，说它无法将对象转换为视图。

这是它引发错误的地方：

```
 public override Task WriteToStreamAsync(Type type, object value, Stream stream, System.Net.Http.HttpContent content, TransportContext transportContext)
    {
        var view = (View)value;
        view.WriteToStream(stream, _viewEngine);
        var tcs = new TaskCompletionSource<Stream>();
        tcs.SetResult(stream);
        return tcs.Task;
    } 
```

如果客户端请求中指定的数据类型是“html”，我只是想念如何让 apicontroller 返回剃刀视图。

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:07:54.803

您可能想查看此[https://github.com/WebApiContrib/WebApiContrib.Formatting.RazorViewEngine](https://github.com/WebApiContrib/WebApiContrib.Formatting.RazorViewEngine) 以获得更新的版本。从那时起，我提交的原始代码已经更新了很多。

我的原始实现需要将 .cshtml 文件流与模型一起传递到 View 对象中。我认为较新的东西使用命名约定来查找模板。我用这段代码工作了很长一段时间！

# android - 了解 xmlns:android = URL 吗？（基于旧的 SO 帖子）

> ID：13771004
> 
> 赞同：2
> 
> 时间：2012-12-07T21:08:40.873
> 
> 标签：android, xml

我查看了这个老问题以了解 xmlns:android 的东西，这里 [是 A xmlns:android，它实际上是如何工作的？](https://stackoverflow.com/questions/7704759/a-xmlnsandroid-how-does-that-actually-work)

我是 XML 和 Android 的新手，所以我无法理解评论，我需要帮助。这是评论 -

从纯 XML 的角度来看，URI 不需要引用任何存在于任何地方的任何东西。您可以编写 xmlns:rutski="www.rutski.com" ，就 XML 而言，该文件就可以了。命名空间的存在允许您在其中放置节点。例如 android:orientation="vertical" 将方向属性放在 android 命名空间中。当文件由其他软件处理时，这变得相关，例如根据模式进行验证。架构将被定义为期望 XML 文件中的节点驻留在给定的命名空间中，即 schemas.android.com/apk/res/android。

```
1 - What exactly are these nodes and how does life become better by using them ?
    In the above comment, where is the node located ? 
2 - What would the xml look like if we did not use namespace ? 
```

# ruby-on-rails-3 - rails 3回形针水印

> ID：13771010
> 
> 赞同：0
> 
> 时间：2012-12-07T21:09:13.573
> 
> 标签：ruby-on-rails-3, paperclip

我正在寻找一个与文件名一起使用的水印处理器，其中包含空格和非 alfanum 字符。在互联网上，我找到了一堆类，但没有一个能正常工作。

此致

# actionscript-3 - Flex 移动访问 android 库？

> ID：13771012
> 
> 赞同：2
> 
> 时间：2012-12-07T21:09:36.367
> 
> 标签：actionscript-3, apache-flex, flex4.5

*   是否有可能，以及如何（如果有的话）使用来自 Flex 移动应用程序的 Android 库中的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:20:36.233

原生扩展就是答案，归功于 flextras。是的，您将能够使用本机扩展访问 java api 函数。因为 android 中的 native 是 java .. 在 iOS 上你可以使用它来使用 Objective-c，在 Windows 上你可以将它用于 c++ ..

# java - Eclipse Ant 从 1 个项目构建 Jar 并移动到另一个项目的构建路径

> ID：13771013
> 
> 赞同：2
> 
> 时间：2012-12-07T21:09:45.497
> 
> 标签：java, eclipse, ant, jar, eclipse-plugin

在我的 Eclipse 工作区中，我有 3 个项目 - 2 个使用 Tomcat 的动态 Web 项目和一个数据访问层项目。我想要做的是每当我清理（项目 - 清理...）或构建动态 Web 项目时，我希望 Eclipse / Ant 自动从 DAL 项目构建 jar 并将其移动到每个动态 Web 项目的 lib 文件夹中，并且将它们添加到构建路径。到目前为止，我已将 build.xml 添加到 1 个动态项目中，这就是我所拥有的。

```
<?xml version="1.0" ?>
<project name="dal-Main" default="CreateJar">
<target name="CreateJar" description="Create Jar file">
    <jar destfile="dal.jar" basedir="." />
    <move file="dal.jar" todir="./WebContent/WEB-INF/lib" />
</target>
</project> 
```

它有点工作，但出于某种原因，Eclipse 抱怨从那个 jar 中找不到类。但是，当我手动添加它时，它工作正常。它也只在我去 Project - Build Project Argh 时运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T21:09:57.800

两件事情。

首先，您可以使用 ivy 或 maven 等依赖管理工具轻松解决您的问题，无论是否有 nexus。

其次，Eclipse 尽可能多地缓存。如果您更改文件系统中的某些内容，例如使用 ant copy 或使用 BASH cp，Eclipse 无法识别它，您的依赖项目构建将失败。您必须自行刷新项目或使用 Eclipse 复制工件（Jar 文件）。或者您可以尝试使用 ... 功能激活 Eclipse/Workspace/Refresh，请参见以下屏幕截图。这些功能需要额外的 CPU，并且在不同的操作系统上工作方式不同。

![Eclipse 首选项](../Images/44ff4f2b8c8e64086f5360dfe0f539c1.png)

# c# - 数据库查询需要在日期前后加引号

> ID：13771015
> 
> 赞同：0
> 
> 时间：2012-12-07T21:10:02.927
> 
> 标签：c#, linq, sqlite

我正在尝试使用以下内容查询我的数据库：

```
connection.Query(@"SELECT timestamp FROM hdd_local_data_v1_2 WHERE date = " + 
                                    date.ToString("yyyy-MM-dd") +
                                    " AND measured_dist = bit_loc AND rop > 0") 
```

我的问题是它产生了一个看起来像这样的字符串：

```
SELECT timestamp FROM hdd_local_data_v1_2 WHERE date = 2012-08-21 AND measured_dist = bit_loc AND rop > 0 
```

在 SQLite 中运行此查询，我最终得到 0 个结果。但是，如果我运行：

```
// Quotes around the date
SELECT timestamp FROM hdd_local_data_v1_2 WHERE date = "2012-08-21" AND measured_dist = bit_loc AND rop > 0 
```

我得到了我期望的结果。我意识到我可以通过以下方式获得我期望的结果：

```
connection.Query("SELECT timestamp FROM hdd_local_data_v1_2 WHERE date = \"" + 
                                   date.ToString("yyyy-MM-dd") + 
                                   "\" AND measured_dist = bit_loc AND rop > 0") 
```

我的问题是，是否可以在不使用转义的情况下获得预期的查询`\`？在更大程度上，有没有办法在建立连接后使用 LINQ 查询数据库？

# jquery - 是否检查了 jQuery Chechbox 的问题

> ID：13771016
> 
> 赞同：0
> 
> 时间：2012-12-07T21:10:07.700
> 
> 标签：jquery

我正在尝试通过选择和取消选择此脚本后的复选框来更改 div 的 css 显示属性：

```
<td>
 <input type="checkbox" id="c1" name="cc" />
 <label for="c1"> <span> </span>  Display : None  </label>
 <input type="checkbox" id="c2" name="cc" /> 
 <label for="c2"><span> </span> Display : Inline   </label>
</td> 
```

jquery是：

```
 $('input:checkbox').change(function(){
   if($('#c2').attr('checked');){
     $('#hiddendiv').css("display", "block"); 
    }else{
     $('#hiddendiv').css("display", "none"); 
   }
 }); 
```

如您所见，我有两个复选框，我想在第二个复选框被选中或未选中时显示一个隐藏的 div。

你能告诉我为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:18:28.157

语法错误 - 其他一切正常：

[http://jsfiddle.net/jmsessink/uKGkN/](http://jsfiddle.net/jmsessink/uKGkN/)

```
$('input:checkbox').change(function(){
  if($('#c2').attr('checked')){
    $('#hiddendiv').css("display", "block"); 
   }else{
    $('#hiddendiv').css("display", "none"); 
  }
}); ​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:22:18.580

您应该使用 .prop() 而不是 .attr()

工作示例[**FIDDLE**](http://jsfiddle.net/videsignz/shGNe/2/)

```
$('input:checkbox').change(function() {

    $('input:checkbox').not(this).prop('checked', false);

    if ($('#c2').prop('checked')) {
        $('#hiddendiv').css({"display" : "block"});
   } else {
        $('#hiddendiv').css({"display" : "none"});
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:18:44.247

我在这里看到的几个问题

1.  如评论中所述，您有语法错误。
2.  您的逻辑意味着 c1 和 c2 值是互斥的，因此您确实应该`radio`为此使用输入
3.  `attr()`不是检查输入是否被检查的好方法。改为使用`prop()`。有关差异，请参阅 jQuery 文档。

这是一个简化的[示例](http://jsfiddle.net/liho1eye/vYjJX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:19:55.833

您的代码有一些 sintax 问题。`attr()`方法不好获取值并按照您的意愿进行测试。取而代之的是，您可以使用`is()`方法并检查`checked`属性是否为真。尝试做这样的事情：

```
$('input:checkbox').change(function(){
   $('#hiddendiv').css("display", $('#c2').is(':checked') ? "block" : "none"); 
}); 
```

PS：如果想`sender`在 change 事件中获取（复选框已更改），可以通过`$(this)`.

# matlab - 我如何模糊 load_power 向量？

> ID：13771019
> 
> 赞同：2
> 
> 时间：2012-12-07T21:10:37.467
> 
> 标签：matlab, fuzzy-logic

我正在使用来自的潮流算法`http://www.mathworks.com/matlabcentral/fileexchange/34200-radial-power-flow`

我有一个包含实际负载功率的 load_power 向量。负载功率预计增加 6%，最大增加 10%（因此任何负载都可以是实际矢量的 100%、106% 或 110%）。

如何对 load_power 向量进行模糊化，以便程序给出模糊的潮流？

我考虑过使用不同的负载功率值进行循环，随后负载功率发生变化，但这对于大矢量来说是不切实际的。（对于 33 总线系统，将运行 3^33 次）注意：（tic toc 给了我一次运行大约 2.3 秒的运行时间，所以 3^33 应该花费我数百万年...... T_T）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:12:59.893

如果你想给你的向量添加噪音，这里有一种方法。

假设您希望 50% 的机会获得 100%，20% 的机会获得 110%，其余的为 106%

```
V = 100*ones(10,1); % Your load percentage
noiseIntensity = rand(size(V));
idx = noiseIntensity > 0.5 
V(idx) = V(idx) + 6; 
idx = noiseIntensity > 0.8 
V(idx) = V(idx) + 4; 
```

# php - PHP __DIR__ 或 __FILE__ 符号链接

> ID：13771021
> 
> 赞同：17
> 
> 时间：2012-12-07T21:10:49.867
> 
> 标签：php

使用`__DIR__`和`__FILE__`常量在符号链接的情况下不起作用。解决方法是什么？

例如：

我有一个文件：

```
/home/me/modules/myfile.php 
```

它符号链接到：

```
/var/www/project/app/myfile.php 
```

从`/home/me/modules/myfile.php`我需要包含一个位于`/var/www/project`

编辑

对于使用 realpath() 的建议-不幸的是，这不起作用。

```
var_dump(__DIR__);
var_dump(realpath(__DIR__)); 
```

两者都返回完全相同的文件路径

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T22:19:55.963

您是否尝试过以下操作？

`dirname($_SERVER['SCRIPT_FILENAME'])`

在您的情况下，这将返回：`/var/www/project/app`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:13:16.953

您可以使用该[`realpath()`](http://php.net/realpath)函数来扩展符号链接。但是，我的建议是不要使用这样的符号链接。（将`/var/www/project/app`或适当的父目录添加到您的 PHP 包含路径。）

# javascript - 在 jQuery on() 中组合多个操作

> ID：13771022
> 
> 赞同：5
> 
> 时间：2012-12-07T21:10:53.523
> 
> 标签：javascript, jquery, html, css

我想知道是否可以将多个操作组合到同一个`on()`功能？

我的代码：

```
$(document).on('mouseout', '#tip', function() {
    $('#tip .ttip').show();
});

$(document).on('click', '#tip', function() {
    $('#tip .ttip').show();
}); 
```

我尝试了以下方法，但它们都不起作用。

```
$(document).on('mouseout, click', '#tip', function()
$(document).on({'mouseout', 'click} '#tip', function() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:13:46.440

你几乎拥有它..

您需要在事件之间使用空格

```
$(document).on('mouseout click', '#tip', function() {
    $('#tip .ttip').show();
}); 
```

虽然，绑定到`document`是不赞成的。它模仿了由于这个原因（*以及其他一些*原因）已被弃用的[`.live`方法](http://api.jquery.com/live/)。

 *引用

> 为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免在大型文档上过度使用`document`或`document.body`用于委托事件。

* * *

[请参阅http://api.jquery.com/on/](http://api.jquery.com/on/)上的文档

报价

> **on( events [, selector] [, data], handler(eventObject) )**
> **events**一种或多种以空格分隔的事件类型和可选的命名空间，例如“ `click`”或“ `keydown.myPlugin`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:13:29.510

根据 jQuery API，“事件”是空格分隔的

> `.on( events [, selector] [, data], handler(eventObject) )`
> 
> `events`：一种或多种以空格分隔的事件类型和可选的命名空间，例如`click`或`keydown.myPlugin`。
> 
> `selectorA`：选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。
> 
> `data`：要在事件中传递给处理程序的数据。触发事件时的数据。
> 
> `handler(eventObject)`：触发​​事件时执行的函数。值 false 也可以作为简单返回 false 的函数的简写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:13:38.920

我相信你可以像这样把它们分开

```
$(document).on('mouseout click', '#tip', function() {
    $('#tip .ttip').show();
}); 
```*

# javascript - 如何使用 addEventListener

> ID：13771025
> 
> 赞同：9
> 
> 时间：2012-12-07T21:11:27.173
> 
> 标签：javascript, click, addeventlistener

我正在制作一个脚本，每次按下按钮时都会创建 div 元素。最初我有一个名为 inline 的函数`onclick`，但 jslint 不喜欢这样，所以我把它移了出来，而是尝试使用`addEventListener("click",function());`

我以前从未使用`addEventListener()`过，所以我什至不确定我是否正确使用它。

问题是它`div`在页面加载时创建一个，并且在按下按钮时不会做任何事情。

先感谢您。

这是我所拥有的：

```
<body>
<form>
    <textarea id="a"></textarea>    
    <br>
    <input value="button" type="button">
</form>
<div id="content">
</div>
<script>
    /*jslint browser:true */
    function createEntry(text) {
        "use strict";

        var div = document.createElement("div");
        div.setAttribute("class", "test");
        document.getElementById("content").appendChild(div);
    }
    var input = document.getElementsByTagName("input")[0];
    input.addEventListener("click", createEntry(document.getElementById('a').value));
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T21:14:58.447

像这样更改事件侦听器

```
input.addEventListener("click", function(){
    createEntry(document.getElementById('a').value);
}); 
```

就目前而言，您将结果`createEntry`作为事件侦听器传递，而不是函数本身

更多信息在这里：

[https://developer.mozilla.org/en/docs/DOM/element.addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T21:15:17.990

更改此行

```
input.addEventListener("click", createEntry(document.getElementById('a').value)); 
```

进入

```
input.addEventListener("click", function(){
createEntry(document.getElementById('a').value);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T21:18:53.930

尝试使用 jQuery 之类的 JavaScript 库进行事件处理和 DOM 操作，以确保浏览器安全和统一。

您可以使用 jQuery 中的事件处理程序，如下所示：

```
$(<element_selector>).on("click", function (event) {
     // your code here...
}); 
```

# javascript - 悬停时暂停 jQuery 幻灯片

> ID：13771029
> 
> 赞同：1
> 
> 时间：2012-12-07T21:11:39.123
> 
> 标签：javascript, jquery, slideshow

我正在使用[SlideJS jQuery 插件](http://www.slidesjs.com/)来为多个 div 设置动画。这个插件有一个名为 hoverPause 的选项，它在鼠标悬停时暂停幻灯片。这个功能很好用，除了我不适合，因为我用绝对定位的 div 移动了幻灯片顶部的分页链接。

我的问题是单击上一个/下一个箭头或任何分页项目符号链接不会暂停幻灯片，除非您稍微移动鼠标。

单击这些内容时，我尝试手动触发鼠标悬停事件，但没有帮助。我还尝试向 animate() 函数添加第四个参数，以使幻灯片在某些情况下停止，但这也不起作用。

我发现了其他几个幻灯片插件，但似乎它们要么仅用于图像，要么不像 SlideJS 那样提供分页。

任何建议都会很棒。我已经很久没有做过任何前端 Web 开发了。谢谢。

# css - 响应式图像行

> ID：13771030
> 
> 赞同：2
> 
> 时间：2012-12-07T21:11:46.200
> 
> 标签：css, html, row

我一直在寻找，找不到答案。也许我只是用错了我的搜索措辞，但我在使这行图像响应时遇到了麻烦。

[http://jsfiddle.net/nunotmp/4W2Bc/](http://jsfiddle.net/nunotmp/4W2Bc/)

我在下面添加了媒体查询

```
@media only screen and (max-width: 960px) {
#teasercenter {
width:100%;
display:inline-block;
}
#teasercenter ul li img {
min-width:100%;
height:auto;
}

} 
```

调整窗口大小时，它们确实彼此位于下方，但具有较大的白色区域并与左侧对齐。有没有办法让他们跌倒时居中？也许我构建 html 的方式是错误的？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:22:31.307

我不完全知道您想做什么，但可能您正在寻找`display:inline-block;`，那么如果图像位于下方，则图像将位于中心。你只需要使父元素或正文 text-align:center; 它应该工作！会是这样的：http: [//jsfiddle.net/4W2Bc/10/](http://jsfiddle.net/4W2Bc/10/)

# c# - POST 字符串到 ASP.NET Web Api 应用程序 - 返回 null

> ID：13771032
> 
> 赞同：45
> 
> 时间：2012-12-07T21:11:51.097
> 
> 标签：c#, asp.net, asp.net-mvc, post, asp.net-web-api

我试图将字符串从客户端传输到 ASP.NET MVC4 应用程序。

但是我无法接收到字符串，要么为空，要么找不到 post 方法（404 错误）

传输字符串的客户端代码（控制台应用程序）：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:49032/api/test");
request.Credentials = new NetworkCredential("user", "pw");
request.Method = "POST";
string postData = "Short test...";
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = byteArray.Length;

Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();

WebResponse response = request.GetResponse();
Console.WriteLine(((HttpWebResponse)response).StatusDescription);
dataStream = response.GetResponseStream();

StreamReader reader = new StreamReader(dataStream);
string responseFromServer = reader.ReadToEnd();
Console.WriteLine(responseFromServer);
reader.Close();
dataStream.Close();
response.Close();
Console.ReadLine(); 
```

ASP.NET Web API 控制器：

```
public class TestController : ApiController
{
    [Authorize]
    public String Post(byte[] value)
    {
        return value.Length.ToString();
    }
} 
```

在这种情况下，我可以调用“Post”方法，但“value”是`NULL`. 如果我将方法签名更改为（字符串值），它将永远不会被调用。

即使“没有” [Authorize] 设置，它也具有相同的奇怪行为。-> 所以它与用户认证无关。

任何想法我做错了什么？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-07T21:56:12.650

您似乎`[Authorize]`在您的 Web API 控制器操作中使用了某些属性，我看不出这与您的问题有什么关系。

那么，让我们开始实践吧。下面是一个简单的 Web API 控制器的样子：

```
public class TestController : ApiController
{
    public string Post([FromBody] string value)
    {
        return value;
    }
} 
```

和消费者：

```
class Program
{
    static void Main()
    {
        using (var client = new WebClient())
        {
            client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            var data = "=Short test...";
            var result = client.UploadString("http://localhost:52996/api/test", "POST", data);
            Console.WriteLine(result);
        }
    }
} 
```

毫无疑问，您会注意到[`[FromBody]`](http://msdn.microsoft.com/en-us/library/system.web.http.frombodyattribute%28v=vs.108%29.aspx)Web API 控制器属性的修饰以及`=`来自客户端的 POST 数据的前缀。我建议您阅读[*Web API 如何进行参数绑定*](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)以更好地理解这些概念。

就`[Authorize]`属性而言，这可用于保护服务器上的某些操作仅对经过身份验证的用户可访问。实际上，您在这里要达到的目标还不清楚。顺便说一下，您应该在问题中更清楚地说明这一点。您是在尝试了解参数绑定在 ASP.NET Web API 中的工作原理（如果这是您的目标，请阅读我链接到的文章）还是尝试进行一些身份验证和/或授权？如果第二个是你的情况，你可能会发现[`following post`](https://stackoverflow.com/a/11536349/29407)我写的关于这个主题的文章很有趣，可以让你开始。

如果在阅读了我链接到的材料之后，你和我一样对自己说，WTF 人，我需要做的就是将一个字符串发布到服务器端端点，我需要做所有这些吗？没门。然后检查[ServiceStack](http://www.servicestack.net/)。您将有一个与 Web API 进行比较的良好基础。我不知道微软的那些家伙在设计 Web API 时是怎么想的，但是说真的，我们应该为我们的 HTML（想想 Razor）和 REST 的东西有单独的基本控制器吗？这不可能是严重的。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-08T01:29:36.073

如果您接受使用 HTTP 的事实，Web API 会非常好地工作。当您开始尝试假装您正在通过电线发送对象时，它开始变得混乱。

```
 public class TextController : ApiController
    {
        public HttpResponseMessage Post(HttpRequestMessage request) {

            var someText = request.Content.ReadAsStringAsync().Result;
            return new HttpResponseMessage() {Content = new StringContent(someText)};

        }

    } 
```

该控制器将处理 HTTP 请求，从有效负载中读取一个字符串并将该字符串返回。

您可以使用 HttpClient 通过传递 StringContent 的实例来调用它。StringContent 将默认使用 text/plain 作为媒体类型。这正是你想要通过的。

```
 [Fact]
    public void PostAString()
    {

        var client = new HttpClient();

        var content = new StringContent("Some text");
        var response = client.PostAsync("http://oak:9999/api/text", content).Result;

        Assert.Equal("Some text",response.Content.ReadAsStringAsync().Result);

    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-27T22:55:28.637

对于 WebAPI，这里是无需通过特殊的 [FromBody] 绑定即可检索正文文本的代码。

```
public class YourController : ApiController
{
    [HttpPost]
    public HttpResponseMessage Post()
    {
        string bodyText = this.Request.Content.ReadAsStringAsync().Result;
        //more code here...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T19:27:13.853

达雷尔的回应当然是正确的。要添加的一件事是尝试绑定到包含单个标记（如“hello”）的主体的原因。

是它不是完全 URL 形式的编码数据。通过像这样在前面添加“=”：

```
=hello 
```

它变成了单个键值对的 URL 形式编码，其名称和值为“hello”。

但是，更好的解决方案是在上传字符串时使用 application/json：

```
POST /api/sample HTTP/1.1
Content-Type: application/json; charset=utf-8
Host: host:8080
Content-Length: 7

"Hello" 
```

使用 HttpClient 你可以这样做：

```
HttpClient client = new HttpClient();
HttpResponseMessage response = await client.PostAsJsonAsync(_baseAddress + "api/json", "Hello");
string result = await response.Content.ReadAsStringAsync();
Console.WriteLine(result); 
```

亨里克

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-07T21:26:27.087

我使用此代码发布 HttpRequests。

```
/// <summary>
        /// Post this message.
        /// </summary>
        /// <param name="url">URL of the document.</param>
        /// <param name="bytes">The bytes.</param>
        public T Post<T>(string url, byte[] bytes)
    {
        T item;
        var request = WritePost(url, bytes);

        using (var response = request.GetResponse() as HttpWebResponse)
        {
            item = DeserializeResponse<T>(response);
            response.Close();
        }

        return item;
    }

    /// <summary>
    /// Writes the post.
    /// </summary>
    /// <param name="url">The URL.</param>
    /// <param name="bytes">The bytes.</param>
    /// <returns></returns>
    private static HttpWebRequest WritePost(string url, byte[] bytes)
    {
        ServicePointManager.ServerCertificateValidationCallback = (sender, certificate, chain, errors) => true;

        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(url);
        Stream stream = null;
        try
        {
            request.Headers.Clear();
            request.PreAuthenticate = true;
            request.Connection = null;
            request.Expect = null;
            request.KeepAlive = false;
            request.ContentLength = bytes.Length;
            request.Timeout = -1;
            request.Method = "POST";
            stream = request.GetRequestStream();
            stream.Write(bytes, 0, bytes.Length);
        }
        catch (Exception e)
        {
            GetErrorResponse(url, e);
        }
        finally
        {
            if (stream != null)
            {
                stream.Flush();
                stream.Close();
            }
        }
        return request;
    } 
```

关于您的代码，请尝试不使用 content.Type ( `request.ContentType = "application/x-www-form-urlencoded";`)

**更新**

我认为问题在于您如何尝试检索该值。当您执行 POST 并通过 Stream 发送字节时，它们不会作为参数传递到操作中。您需要通过服务器上的流检索字节。

在服务器上，尝试从流中获取字节。以下代码是我使用的。

```
 /// <summary> Gets the body. </summary>
     /// <returns> The body. </returns>
     protected byte[] GetBytes()
     {
       byte[] bytes;
        using (var binaryReader = new BinaryReader(Request.InputStream))
        {
            bytes = binaryReader.ReadBytes(Request.ContentLength);
        }

         return bytes;
     } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-04T10:12:22.113

我遇到了这个问题，并找到了这篇文章。 [http://www.jasonwatmore.com/post/2014/04/18/Post-a-simple-string-value-from-AngularJS-to-NET-Web-API.aspx](http://www.jasonwatmore.com/post/2014/04/18/Post-a-simple-string-value-from-AngularJS-to-NET-Web-API.aspx)

> 我找到的解决方案是在你的 js 帖子中简单地将字符串值用双引号括起来

奇迹般有效！供参考

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-10-16T11:16:38.957

```
([FromBody] IDictionary<string,object> data) 
```

# ruby-on-rails - Rails 是否可以在不重新查询的情况下将最后一条记录插入数据库？

> ID：13771041
> 
> 赞同：0
> 
> 时间：2012-12-07T21:12:42.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的视图中有一个链接，它通过 ajax 调用下面的方法。我基本上是在尝试获取通过 插入的记录的 id `@application.update_attributes(params[:application])`，但是当我调用时`@curr_app = @application.application_field.last`，它返回在我的 ajax 调用之前插入的最后一条记录。

例如，如果我最初点击页面并说 application_fields 表中的最高 id 是 50，那么当我点击我的 ajax 链接时，`@curr_app.id`无论我点击我的 ajax 链接多少次，它始终是 50。

我想`@application.application_field.last`应该得到数据库中的最后一条记录？如何获取最后插入的记录？我必须重新查询吗？

```
 # PUT /applications/1
  # PUT /applications/1.json
  def update
    @application = Application.find(params[:id])

    respond_to do |format|
      if @application.update_attributes(params[:application])

        @curr_app = @application.application_field.last
        puts @curr_app.id

        format.html { redirect_to @application, notice: 'Application was successfully updated.' }
        format.json { head :no_content }
        format.js
      else
        format.html { render action: "edit" }
        format.json { render json: @application.errors, status: :unprocessable_entity }
        format.js
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:16:08.267

我最终不得不重新查询数据库以获取最后一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:03:33.637

你有没有尝试过：

```
@app = Application.find(:last) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:25:21.730

我相信你必须做

```
@application.reload 
```

但是，Rails 在同一请求处理期间缓存查询，因此它可能会从缓存中获取结果，而不是从数据库中获取结果。您只需要尝试查看日志即可查看它的来源。

或者可能

```
@curr_app = ApplicationField.last 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T22:33:42.003

您可以用来获取 id 的相同变量是：@curr_id = @application.id 在您离开此页面之前，它仍然具有带有数据的 json。

```
def update
@application = Application.find(params[:id])

respond_to do |format|
  if @application.update_attributes(params[:application])

    @curr_app = @application.id

    format.html { redirect_to @application, notice: 'Application was successfully updated.' }
    format.json { head :no_content }
    format.js
  else
    format.html { render action: "edit" }
    format.json { render json: @application.errors, status: :unprocessable_entity }
    format.js
  end
end 
```

结尾

# sql - 执行 sp_executesql 错误

> ID：13771043
> 
> 赞同：2
> 
> 时间：2012-12-07T21:12:50.570
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

我有一个公式。公式是一个像 '2+5+8/3' 这样的 nvarhcar

我想创建一个函数，在计算出我的公式后给我一个类似的结果

```
alter FUNCTION Calculate(@Formula NVARCHAR(100))
RETURNS FLOAT
AS
BEGIN
DECLARE @Result2 FLOAT,@Query NVARCHAR(50)
SET @Query=N'select @Result='+@Formula
execute sp_executesql @Query ,N'@Result float output',@Result=@Result2 OUTPUT
RETURN @Result2
END 
```

函数创建成功，但我使用该函数

select dbo.Calculate('2+5+9') 我得到一个错误，“只能从函数内执行函数和扩展存储过程。” 怎样才能做出这样的功能？非常感谢

谢谢你的回答，但我会在选择查询中使用它，我的数据就是这样

```
Name Formula Result
dd    2+3+5
gg    1+4+7
hh    2*8
jj    3*9
Kl    8*9 
```

我必须计算结果列选择

选择 Name,dbo.Calculate(Formula) as Result 是否有另一种方法可以做到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:22:57.593

您可能不想创建 a `FUNCTION`but a`PROCEDURE`因为函数具有它们通常无法使用的限制`EXECUTE`。它们旨在无副作用，`EXEC`可用于规避该保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:07:02.360

你可以像下面这样：

```
Create Proc Proc1

As

Begin

Select 'SQL Server'

End

Go 
```

创建函数

```
Create Function dbo.Function1() Returns @Result Table
(

    Result Varchar(100)

 )

 As

Begin   

Insert @Result

SELECT * from OPENROWSET('SQLNCLI10', 'Server=<SERVERNAME>;UID=<LOGIN>;Pwd=     <PASSWORD>;',

        'Exec dbo.Proc1') AS C 

Return

 end

  Go 
```

执行功能

```
 Select * from dbo.Function1() 
```

希望这可以帮助你....

# maven - 你可以在 Maven 中分享 manifestEntries 吗？

> ID：13771044
> 
> 赞同：2
> 
> 时间：2012-12-07T21:12:53.320
> 
> 标签：maven, manifest, packaging, maven-war-plugin, maven-jar-plugin

在我的主 POM 中，我在`<pluginManagement>`其中定义了`maven-jar-plugin`, `maven-war-plugin`和`maven-ear-plugin`. 其中每一个都有

```
<configuration>
  <archive>
    <manifestEntries>
      <Build-Time>${maven.build.timestamp}</Build-Time>
      <SCM-Revision>${scmRevision}</SCM-Revision>
      <SCM-Branch>${scmBranch}</SCM-Branch>
      <Built-By>${user.name}</Built-By>
    </manifestEntries>
  </archive>
</configuration> 
```

有没有办法共享一组清单条目，这样我就不必将新项目添加到 3 个不同的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:08:16.463

我会做以下事情：

1.  创建具有必要内容和属性占位符的单个清单文件，并将其放入`src/main/resources`.
2.  已`maven-resources-plugin`处理此文件并生成具有实际属性值的清单。
3.  提供带有此文件链接的 jar、war 和 ear 插件。

这是一个示例配置：

```
<configuration>
  <archive>
    <manifestFile>${project.build.outputDirectory}/manifest.file</manifestFile>
  </archive>
</configuration> 
```

# asp.net-mvc-2 - Knockout JS 在多个局部视图中包含模型

> ID：13771050
> 
> 赞同：0
> 
> 时间：2012-12-07T21:13:21.100
> 
> 标签：asp.net-mvc-2, knockout.js, partial-views, knockout-2.0, knockout-mvc

我在一个页面中加载 4 个部分视图。包含单独 div 中的所有局部视图的主页，每个局部视图都有自己的淘汰模型。我遇到的问题是各个剔除模型无法绑定文本字段的值等等。

我想将页面分开，这样主页面就不会那么混乱，并且与部分视图紧密耦合。这本质上是对之前完成的这 4 页的总结。

似乎我无法将淘汰模型拉出，因为它们需要来自控制器的信息来填充局部视图，并且我不想将局部视图拉入此页面。

本质上，我想用自己的淘汰模型加载部分视图并具有所需的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:25:15.367

这听起来像在你的情况下，你会想要使用第二个参数到`ko.applyBindings`.

第二个参数允许您传递要用作绑定的根元素的 DOM 元素。

因此，如果您将部分视图加载到以下元素中：

```
<div id="one">
...
</div>
<div id="two">
....
</div> 
```

您可以将不同的视图模型绑定到每个容器，例如：

```
ko.applyBindings(oneModel, document.getElementById("one"));

ko.applyBindings(twoModel, document.getElementById("two")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T14:12:01.657

在每个局部视图中，在页面的最底部放置一些 JavaScript。

```
<script type="text/javascript">
    ko.applyBindings(viewModelObject, document.getElementById("someDivId")); 
</script> 
```

这将在正确的时间应用绑定。否则，由于视图加载的异步方式，绑定将不起作用。

注意：viewModelObject应该在主视图中定义，以及一般的ko包含文件。

# ios - 如何使用 fmdb 为原生 trigger.IO 插件构建原生 ios 数据库。

> ID：13771051
> 
> 赞同：2
> 
> 时间：2012-12-07T21:13:20.617
> 
> 标签：ios, sqlite, trigger.io, fmdb

我想使用本机插件使用本机数据库进行存储。由于 Apple 的基本 API 是纯 C 语言，我想使用 FBDB 等第三方库。理想情况下，我们的 javascript 将构建“查询”并将其发送到我们的本机插件进行处理，但这不是绝对必要的。

1.  如何导入第 3 方库以供使用？[我要包含FMDB 库](https://github.com/ccgus/fmdb)的哪些部分以及如何添加 libsqlite3.dylib？FMDB 是否也应该针对 ForgeModule 和 ForgeModuleResources？我查看了有关此的[文档](http://docs.trigger.io/en/v1.4/modules/native/external_libraries.html)，但很难将这些说明专门应用于 FMDB。

2.  你能给我一个更详细的想法，一个好的文件结构会是什么样子吗？

3.  您甚至会推荐使用 FMDB，是否有其他选项可以更好地使用触发器？此外，ForgeInspector ARC 是否正确？

基本上，我正在寻找要遵循的大纲以及 sqlite 包装器推荐。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:10:42.240

1.  此处介绍了在您的 iOS 插件中包含第三方代码：http: [//docs.trigger.io/en/v1.4/modules/native/external_libraries.html#ios](http://docs.trigger.io/en/v1.4/modules/native/external_libraries.html#ios)。

    要使用 FMDB，您应该包含[repo](https://github.com/ccgus/fmdb)并将`.h`和`.m`文件复制到您的 ForgeModule 项目中（记住将文件添加到您的 ForgeModule 目标）：

    ![将 FMDB 文件添加到项目中](../Images/08d03d1305389d43854c59a42edf3c00.png)

    接下来，将 libsqlite3.dylib 框架添加到 ForgeModule 目标（在 ForgeModule 项目中）和 ForgeInspector 目标（在 ForgeInspector 项目中）：

    ![添加 libsqlite 框架](../Images/923ffc384743bd1a03d90afecf3c4339.png)

    您还需要禁用 ARC `fmdb.m`（也如上所示）。

    之后，您应该能够导入 FMDB 标头并使用 ForgeInspector 来试用您的插件。

    请注意，在上传插件版本时，您需要添加一个 iOS 构建步骤以包含 SQLite 框架 - 请参阅[http://docs.trigger.io/en/v1.4/modules/native/native_build_steps .html#add-ios-system-framework](http://docs.trigger.io/en/v1.4/modules/native/native_build_steps.html#add-ios-system-framework)。

2.  如果您的插件称为 fmdb（我们建议对其进行更多命名空间以避免冲突），您必须拥有`fmdb_API.h`并且`fmdb_API.m`- 我通常将它们放在他们自己的组中，并放在他们自己的文件夹中。我还将第 3 方代码放在它自己的组和文件夹中，例如：

    ```
    % find fmdb FMDB_lib
    fmdb
    fmdb/fmdb_API.h
    fmdb/fmdb_API.m
    FMDB_lib
    FMDB_lib/FMDatabase.h
    FMDB_lib/FMDatabase.m
    FMDB_lib/FMDatabaseAdditions.h
    FMDB_lib/FMDatabaseAdditions.m
    FMDB_lib/FMDatabasePool.h
    FMDB_lib/FMDatabasePool.m
    FMDB_lib/FMDatabaseQueue.h
    FMDB_lib/FMDatabaseQueue.m
    FMDB_lib/fmdb.m
    FMDB_lib/FMResultSet.h
    FMDB_lib/FMResultSet.m 
    ```

3.  我们内部没有使用过 FMDB，所以没有太多的经验。但是，我确实知道尝试将以 C 为中心的 API 塞进 Objective-C 代码是非常痛苦的（我正在考虑[AddressBook.framework](https://developer.apple.com/library/mac/#documentation/userexperience/Reference/AddressBook/ObjC_classic/_index.html#//apple_ref/doc/uid/20001692)）。FMDB 旨在为 SQLite 解决这个问题，所以这似乎是个好主意。

# java - JTable 行的默认颜色

> ID：13771059
> 
> 赞同：6
> 
> 时间：2012-12-07T21:13:40.043
> 
> 标签：java, swing, background, jtable, tablecellrenderer

我编写了一个程序，其中我根据标准突出显示某些行。我发布了一个关于此的问题：- [JTable CustomRenderer 问题](https://stackoverflow.com/questions/13631535/jtable-customrenderer-issue)

针对这个问题给出的解决方案是我需要在 else 中为不符合标准的行设置颜色。所以我决定在 else 中我将使用默认颜色`JTable`。修改后的代码是

```
else{
           c.setForeground(DefaultLookup.getColor(this, ui, "Table.dropCellForeground")); 
           c.setBackground(DefaultLookup.getColor(this, ui, "Table.dropCellBackground"));
        } 
```

到目前为止一切顺利，我得到了必需的行为，但是当我试图制作 jar 时，警告即将到来：-

> 警告：DefaultLookup 是内部专有 API，可能会在未来的版本中删除

如果有任何其他方法可以将行设置为默认颜色，任何人都可以建议我`JTable`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T22:47:57.537

替换`DefaultLookup.getColor(this, ui, "Table.dropCellForeground")`为 `javax.swing.UIManager.getColor("Table.dropCellForeground")`应该可以解决您的问题。

您还可以使用[UIManager](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html)`put(Object key, Object value)`中的方法（全局）修改外观中存在的默认值

# php - Codeigniter 分页和 URI 路由

> ID：13771063
> 
> 赞同：0
> 
> 时间：2012-12-07T21:13:56.477
> 
> 标签：php, codeigniter, routing, pagination

我的 config/routes 文件中有一条路线，如下所示：

```
$route['thing/(:num)'] = 'site/pages/$1'; 
```

在我的分页配置中`site/pages`，有以下相关选项：

```
$config["base_url"] = base_url() . "thing";
$config["uri_segment"] = 3; 
```

以上正确生成链接，如：thing/20、thing/40（因为我给了每页 20 个配置选项）并且第一页正确显示了 20 个链接。

但是当我点击第二个页面链接时，它返回一个 404。当我继续在浏览器中将 url 编辑为 /site/pages/20 或 site/pages/40 时，它可以工作。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:25:02.863

您实际上想要读取路由的 URI 段（实际上位于 URL 中的段）。由于您的路由配置，它将是第二段：

```
$config["uri_segment"] = 2; 
```

从[文档](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)：

> 分页功能会自动确定 URI 的哪个段包含页码。如果您需要不同的东西，您可以指定它。

分页类`3`通过猜测`controller/method/param`“param”是方法的第一个/唯一参数的位置来假设（默认）。

但是，您的路由在第二段中有页码，因此只需将其设置为`2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:15:06.783

如果您正在寻找如何进行分页的任何参考，同时具有良好的路由到每个页面链接，请查看我为其中一个问题提供的这个[分页参考](https://stackoverflow.com/questions/13519130/show-limited-no-of-page-links-in-codeigniter-pagination/13523440#13523440)答案。我希望它能消除你所有的疑惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:56:42.167

查看 codeigniter 用户指南中给出的优秀示例，[http ://ellislab.com/codeigniter/user-guide/libraries/pagination.html](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:24:19.487

尝试使用

```
$config["base_url"] = base_url("thing/");

$config["uri_segment"] = 2; 
```

请记住，uri 段是指 uri

# javascript - addEventListener 只在页面刷新时工作？

> ID：13771066
> 
> 赞同：3
> 
> 时间：2012-12-07T21:13:58.993
> 
> 标签：javascript, firefox, greasemonkey, addeventlistener

我正在修改两个下拉列表的外观。这里没有问题。一切都很好。唯一的问题是该`addEventListener`方法仅适用于页面刷新。

如何在不点击刷新按钮的情况下使此代码在页面加载时工作？

```
window.addEventListener('load', function () 
{
    var CityCount = this.character.citynum ;
    var PosX = parseInt(CityCount) * (-15);
    var MyHeight = parseInt(CityCount) * 15 - 15;
    var MyStyle='div#citylist {width: 150px !important; margin-top: ' + PosX + 'px !important; position: absolute !important; height: ' + MyHeight + 'px !important; overflow: auto !important; padding-left: 1px !important}';
    addGlobalStyle(MyStyle);
    addGlobalStyle('div#my_city_list {width: 150px !important; margin-top: 50px !important;}');
}, false) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:38:44.670

您没有**列出目标页面**，但它可能使用 AJAX 设置和/或更改该全局变量。

此外，如果脚本失去其[`@grant none`](http://wiki.greasespot.net/@grant)状态，或者如果您尝试在除 Firefox 之外的任何浏览器上使用它，问题代码将会中断。（除非脚本使用*注入*——我们无法从问题中看出这一点。）

要解决 AJAX 问题，请轮询`setInterval()`.
要使代码更健壮，请使用`unsafeWindow`Script *Injection*。有关详细信息，请参阅[“从 Greasemonkey... 访问变量”](https://stackoverflow.com/a/13485650/331508)。

把它们放在一起，这应该工作。 `addEventListener()`不需要：

```
var globScope       = unsafeWindow || window;
var cityCountTimer  = setInterval (styleTheCityList, 333);

function styleTheCityList () {
    this.lastCityCount  = this.lastCityCount || 0; // Static var for this func

    if (
            typeof globScope.character          != "undefined"
        &&  typeof globScope.character.citynum  != "undefined"
    ) {
        var CityCount  = parseInt (globScope.character.citynum, 10);
        if (CityCount !=  this.lastCityCount) {
            var PosX        = CityCount * (-15);
            var MyHeight    = CityCount * 15 - 15;
            var MyStyle     = 'div#citylist {width: 150px !important; margin-top: '
                            + PosX
                            + 'px !important; position: absolute !important; height: '
                            + MyHeight
                            + 'px !important; overflow: auto !important; padding-left: 1px !important}'
                            ;
            addGlobalStyle  (MyStyle);
            addGlobalStyle  ('div#my_city_list {width: 150px !important; margin-top: 50px !important;}');

            this.lastCityCount = CityCount;
        }
    }
} 
```

# .htaccess - .htaccess 重定向 301 不使用参数

> ID：13771068
> 
> 赞同：1
> 
> 时间：2012-12-07T21:14:07.423
> 
> 标签：.htaccess, redirect, arguments

我们最近重建了一个客户的网站。他们发现谷歌列出了一些旧链接。我们正在尝试将这些链接重定向到主页。

[http://www.joiningtech.com/index.html?GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA](http://www.joiningtech.com/index.html?GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA) http://www.joiningtech.com/index.html?GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ

我已经尝试了几种方法来使用 .htaccess 文件让这两个重定向正常工作。

方法#1

```
redirect 301 http://www.joiningtech.com/index.html?GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA http://www.joiningtech.com/
redirect 301 http://www.joiningtech.com/index.html?GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ http://www.joiningtech.com/ 
```

方法#2

```
RewriteCond %{QUERY_STRING} ^([^&]&)*GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA(&|$)
RewriteRule ^/index\.php$ http://www.joiningtech.com/? [L,R=301]
RewriteCond %{QUERY_STRING} ^([^&]&)*GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ(&|$)
RewriteRule ^/index\.php$ http://www.joiningtech.com/? [L,R=301] 
```

我在stackoverflow的其他地方找到了这些方法。我想知道我是否做错了什么，并希望得到任何帮助！

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:58:04.203

使用字典比较，当你不需要它们时，它比正则表达式更清晰。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA [OR]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ
RewriteRule ^index.html$ http://www.joiningtech.com/? [L,R=301] 
```

您的第一个方法（使用`Redirect`）不起作用，因为您将 full 指定为第`URL`一个参数，但它只*需要*`URL`. 以下也将起作用：

```
redirect 301 /index.html?GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA http://www.joiningtech.com/
redirect 301 /index.html?GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ http://www.joiningtech.com/ 
```

第三种使用方法`mod_rewrite`是：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} =/index.html [NC]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA [OR]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ
RewriteRule .* http://www.joiningtech.com/? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:34:23.310

好的，感谢卡米尔的帮助和一些反复试验，我找到了答案。这个网站是一个 WordPress 网站。.htaccess 文件按此顺序具有以下内容：

```
# suExec for PHP
Action application/x-pair-sphp /cgi-bin/php5.cgi
AddType application/x-pair-sphp .php
#Video MIME Types:
AddType video/m4v .m4v
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /directory/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# END WordPress

</IfModule>
redirect 301 /pages/laser.html http://www.joiningtech.com/pages/welding.html
redirect 301 /index_nosound.html http://www.joiningtech.com/
RewriteEngine On
RewriteCond %{REQUEST_URI} =/index.html [NC]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA [OR]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ
RewriteRule .* http://www.joiningtech.com/? [L,R=301] 
```

我猜是 WordPress 重写代码和后来的代码有冲突。因此，我将 WordPress 重写代码重新排序到新重定向的下方。

```
# suExec for PHP
Action application/x-pair-sphp /cgi-bin/php5.cgi
AddType application/x-pair-sphp .php
#Video MIME Types:
AddType video/m4v .m4v
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm

</IfModule>
redirect 301 /pages/laser.html http://www.joiningtech.com/pages/welding.html
redirect 301 /index_nosound.html http://www.joiningtech.com/
RewriteEngine On
RewriteCond %{REQUEST_URI} =/index.html [NC]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CNbT06iehLQCFQWe4AodejAAkA [OR]
RewriteCond %{QUERY_STRING} =GAW+CAM2&gclid=CMncjs-ehLQCFdKd4Aod52AAAQ
RewriteRule .* http://www.joiningtech.com/? [L,R=301]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /directory/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# END WordPress 
```

这现在有效。我仍然需要知道是否可以有两个“RewriteEngine On”实例。

# rotation - 将 PPM 图像旋转 90 度

> ID：13771070
> 
> 赞同：2
> 
> 时间：2012-12-07T21:14:16.123
> 
> 标签：rotation, ppm

我需要帮助在 C 中旋转 PPM 图像。旋转功能应该将 PPM 图像中先前读取的图像向右旋转 90 度。代码将在下面发布。我需要有关 rotate() 函数的帮助。

该函数的签名是：

```
void rotate(pixel_t *image, int x, int y) 
```

X 是图像的宽度，Y 是高度。

下面看看我是如何在这个程序中完成其他一些 PPM 操作的：

```
void grayscale(pixel_t *image, int x, int y)
{
    int i, average = 0;
    for (i = 0; i < x*y; i++)
    {
        average = (image[i].r + image[i].g + image[i].b) / 3;
        printf("%c%c%c", average, average, average);
    }
}

void flipImage(pixel_t *image, int x, int y)
{
    int r, c, i;
    for (c = y-1; c >= 0; c--)
    {
        for (r = 0; r < x; r++)
        {
            i = (c * x) + r;
            printf("%c%c%c", image[i].r, image[i].g, image[i].b);
        }
    }
} 
```

这是我到目前为止所拥有的：

```
void rotate(pixel_t *image, int x, int y)
{
    int r, c;
    for (r = 0; r < x; r++)
    {
         for (c = 0; c < y; r++)
         {
             printf("%c%c%c", image[c].r, image[c].g, image[c].b);
         }
    }
} 
```

# javascript - 如何设置、回发和检索 hiddenField 值？

> ID：13771075
> 
> 赞同：0
> 
> 时间：2012-12-07T21:14:51.377
> 
> 标签：javascript, jquery, asp.net, vb.net-2010

我有一个带有 3 个输入类型“文本”字段的 asp gridview。这些字段由查询填充，并且每一行都可以选择编辑。当我单击gridview中的编辑按钮时，它回发但输入字段的值在回发过程中当然会丢失:(。所以我想将值存储到一个隐藏字段中，然后在服务器端使用它。这些是在 edititemtemplate 标记内。

```
<input type="text" id="editBeginDate" class="DatePicker" runat="server" readonly="readonly" />
<asp:HiddenField ID="ehBeginDate" runat="server" /> 
```

我正在使用这个通过jquery在document.ready设置隐藏字段的值......

```
 $(document).ready(function () {
        $("[id$=ehBeginDate]").val();
    }); 
```

当用户单击编辑时会发生什么，它将行设置为编辑模式，但是这 3 个输入字段中的值设置为空，因为它在回帖中的某个地方“丢失”了。我的计划是检索 hiddenfield 值（并接管世界！jk），然后执行 .findcontrol("inputfield") 并设置其 text = hiddenfield.value ... 想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:44:02.623

我使用该事件，我这样做是为了在网格中找到控件，然后提取值，但问题是......当我点击这个事件时，值已经从之前声明的输入控件中消失了......想法?

```
 Dim txtBeginDate As System.Web.UI.HtmlControls.HtmlInputText = gv.Rows(e.NewEditIndex).FindControl("editBeginDate") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:28:57.817

如果您`OnRowEditing`在创建网格时使用该属性，那么您可以在事件中添加一条线来帮助您。

尝试将其用作行编辑的第一行。然后通过获取值并插入它们来换出文本框的单元格。ASP Gridview 内置了一个默认编辑，但我认为它不会在显示文本框之前挂起您的值。

***添加到编辑事件的行***

`e.Cancel = true;`

# c# - Web 服务消费管理 - 最佳实践

> ID：13771076
> 
> 赞同：0
> 
> 时间：2012-12-07T21:14:54.183
> 
> 标签：c#, web-services, design-patterns, web, infrastructure

我正在为多个网站构建基础架构。我想为管理 Web 服务创建一个通用/抽象的基础架构。

假设我想让用户能够翻译文本。我希望有几个可用的网络服务，从最好到最差排序 - 如果第一个失败，那么第二个就会启动。

我想让它尽可能动态。

您认为哪些最佳做法？为什么？

我正在考虑一些带有所有接口的通用 dll 的服务定位器突变，每个带有 dll 的服务类型的目录，每个服务类型都为同一个 porpose 引入不同的服务（我可以给每个人打分以进行排序）.. 服务定位器类会知道使用反射在 Application_Start 或其他地方找到这些 dll。这是一个好的开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:49:33.407

感谢 HighCore，我研究了托管可扩展性框架 (MEF)，它似乎满足了我的大部分需求。其他的实现起来非常简单。

我在这里找到了一些很棒的简单信息： [http ://randomactsofcoding.blogspot.co.il/2009/11/working-with-managed-extensibility.html?m=1](http://randomactsofcoding.blogspot.co.il/2009/11/working-with-managed-extensibility.html?m=1)

# asp.net - 在 Visual Studio 2010 的 asp.net default.aspx 文件的设计视图中显示“未设置对象引用”

> ID：13771078
> 
> 赞同：5
> 
> 时间：2012-12-07T21:15:12.000
> 
> 标签：asp.net, visual-studio-2010, web-applications, object-reference

我在这里发现了另一个有类似问题的线程： [Visual Studio 2010：无法显示设计视图](https://stackoverflow.com/questions/5448896/visual-studio-2010-cant-show-design-view) ，但在我的情况下，我没有使用自定义控件。

在 Win7 32 位机器上，我使用 Visual Studion 2010 创建一个使用 Visual Basic 代码的 asp.net Web 应用程序。我已将标准 Web 控件添加到 default.aspx 表单。

昨天我保存了项目，在调试模式下运行了一会儿，然后关闭了 Visual Studio（自上次保存以来没有进行任何更改）。

今天，当我打开解决方案并查看 default.aspx 文件的设计视图时，应该显示的所有控件改为显示“创建控件时出错 - 控件名称。对象引用未设置为对象的实例”

我没有对解决方案进行任何更改。

错误列表中不显示错误。Web 应用程序构建没有错误。该应用程序运行没有错误（在调试模式下）并在网页上正确显示控件。

我建议 default.aspx.designer.vb 文件可能已过时。建议是删除该文件，创建一个同名的空文件，打开解决方案，然后重新保存 default.aspx 文件以重新生成设计器文件。我这样做了，它没有任何影响。

我没有在我的系统上安装任何更新。

我用作此应用程序基础的其他 VS 网络应用程序解决方案仍然可以正常运行。他们没有在他们的设计视图中显示这个问题。

所有代码都本地存储在与 Visual Studio 相同的计算机上。未使用版本控制。

这实际上是我第二次在这个项目中遇到这个问题。它发生在两天前。那时我开始了一个新的解决方案文件，从头开始重新创建了 default.aspx（和代码隐藏），然后复制了我的其他代码（类、模块和文本文件）。这就是我现在正在使用的解决方案文件，正如我所提到的，它昨天运行良好。在这两种情况下，当我当天关闭项目时，我碰巧在表单上有相同的控件集。我没有尝试向表单添加另一个控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T05:46:00.960

这与 `OnInit`方法有关。

此问题的一种解决方法是在调用后检查我们是否处于设计模式`base.OnInit()`。

```
protected override void OnInit( EventArgs e)
{
   base.OnInit(e);
   if(!this.DesignMode)
   {
      // place code here for dynamic control creation
         TextBox txtUserName = new TextBox();
         txtUserName.ID= "UserID"  ;
         usersPlaceholder.Controls.Add(txtUserName);
   } 
} 
```

***视觉 Web 开发团队***也意识到了这个问题，他们说：

```
this is a bug in VS 2010 that we’re now calling the OnInit() method at the 
design time; we are considering a fix for this in a future release of 
VisualStudio. 
```

***[在他们的博客上查看](http://blogs.msdn.com/b/webdev/archive/2010/05/06/another-error-creating-control-in-the-design-view-with-object-reference-not-set-in-visual-studio-2010.aspx)***此问题的完整详细信息

# c# - Html Agility Pack 按类获取所有元素

> ID：13771083
> 
> 赞同：76
> 
> 时间：2012-12-07T21:15:47.963
> 
> 标签：c#, html, html-agility-pack

我正在尝试 html 敏捷包，并且无法找到正确的方法来解决这个问题。

例如：

```
var findclasses = _doc.DocumentNode.Descendants("div").Where(d => d.Attributes.Contains("class")); 
```

但是，显然您可以将类添加到更多的 div 中，所以我尝试了这个..

```
var allLinksWithDivAndClass = _doc.DocumentNode.SelectNodes("//*[@class=\"float\"]"); 
```

但这并不能处理添加多个类并且“float”只是其中之一的情况。

```
class="className float anotherclassName" 
```

有没有办法处理这一切？我基本上想选择所有具有类 = 并包含浮点数的节点。

**答案已记录在我的博客上，并在以下位置进行了完整解释：[Html Agility Pack Get All Elements by Class](http://www.adamthings.com/post/2013/10/14/html-agility-pack-get-elements-class/)

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-08T03:42:00.133

（2018 年 3 月 17 日更新）

# 问题：

正如您所发现的，问题在于`String.Contains`它不执行字边界检查，因此`Contains("float")`将返回`true`“foo float bar”（正确）和“unfloating”（不正确）。

解决方案是确保“浮动”（或任何您想要的类名）出现在两端*的单词边界旁边。*单词边界是字符串（或行）的开始（或结束）、空格、某些标点符号等。在大多数正则表达式中，这是`\b`. 所以你想要的正则表达式很简单：`\bfloat\b`.

使用`Regex`实例的一个缺点是，如果您不使用该`.Compiled`选项，它们的运行速度可能会很慢——而且它们的编译速度可能会很慢。所以你应该缓存正则表达式实例。如果您要查找的类名在运行时发生更改，这将更加困难。

或者，您可以通过将正则表达式实现为 C# 字符串处理函数，在不使用正则表达式的情况下按字边界搜索字符串，注意不要导致任何新字符串或其他对象分配（例如，不使用`String.Split`）。

## 方法 1：使用正则表达式：

假设您只想查找具有单个设计时指定类名的元素：

```
class Program {

    private static readonly Regex _classNameRegex = new Regex( @"\bfloat\b", RegexOptions.Compiled );

    private static IEnumerable<HtmlNode> GetFloatElements(HtmlDocument doc) {
        return doc
            .Descendants()
            .Where( n => n.NodeType == NodeType.Element )
            .Where( e => e.Name == "div" && _classNameRegex.IsMatch( e.GetAttributeValue("class", "") ) );
    }
} 
```

如果您需要在运行时选择一个类名，那么您可以构建一个正则表达式：

```
private static IEnumerable<HtmlNode> GetElementsWithClass(HtmlDocument doc, String className) {

    Regex regex = new Regex( "\\b" + Regex.Escape( className ) + "\\b", RegexOptions.Compiled );

    return doc
        .Descendants()
        .Where( n => n.NodeType == NodeType.Element )
        .Where( e => e.Name == "div" && regex.IsMatch( e.GetAttributeValue("class", "") ) );
} 
```

如果您有多个类名并且想要匹配所有这些，您可以创建一个`Regex`对象数组并确保它们都匹配，或者`Regex`使用环视将它们组合成一个单一的，但这会导致非常[复杂的表达式](https://stackoverflow.com/questions/4389644/regex-to-match-string-containing-two-names-in-any-order)- 所以使用a`Regex[]`可能更好：

```
using System.Linq;

private static IEnumerable<HtmlNode> GetElementsWithClass(HtmlDocument doc, String[] classNames) {

    Regex[] exprs = new Regex[ classNames.Length ];
    for( Int32 i = 0; i < exprs.Length; i++ ) {
        exprs[i] = new Regex( "\\b" + Regex.Escape( classNames[i] ) + "\\b", RegexOptions.Compiled );
    }

    return doc
        .Descendants()
        .Where( n => n.NodeType == NodeType.Element )
        .Where( e =>
            e.Name == "div" &&
            exprs.All( r =>
                r.IsMatch( e.GetAttributeValue("class", "") )
            )
        );
} 
```

### 方法 2：使用非正则表达式字符串匹配：

使用自定义 C# 方法进行字符串匹配而不是正则表达式的优点是假设性能更快并减少内存使用（尽管`Regex`在某些情况下可能更快 - 始终首先分析您的代码，孩子们！）

下面的这个方法：`CheapClassListContains`提供了一个快速的字边界检查字符串匹配功能，可以使用相同的方式`regex.IsMatch`：

```
private static IEnumerable<HtmlNode> GetElementsWithClass(HtmlDocument doc, String className) {

    return doc
        .Descendants()
        .Where( n => n.NodeType == NodeType.Element )
        .Where( e =>
            e.Name == "div" &&
            CheapClassListContains(
                e.GetAttributeValue("class", ""),
                className,
                StringComparison.Ordinal
            )
        );
}

/// <summary>Performs optionally-whitespace-padded string search without new string allocations.</summary>
/// <remarks>A regex might also work, but constructing a new regex every time this method is called would be expensive.</remarks>
private static Boolean CheapClassListContains(String haystack, String needle, StringComparison comparison)
{
    if( String.Equals( haystack, needle, comparison ) ) return true;
    Int32 idx = 0;
    while( idx + needle.Length <= haystack.Length )
    {
        idx = haystack.IndexOf( needle, idx, comparison );
        if( idx == -1 ) return false;

        Int32 end = idx + needle.Length;

        // Needle must be enclosed in whitespace or be at the start/end of string
        Boolean validStart = idx == 0               || Char.IsWhiteSpace( haystack[idx - 1] );
        Boolean validEnd   = end == haystack.Length || Char.IsWhiteSpace( haystack[end] );
        if( validStart && validEnd ) return true;

        idx++;
    }
    return false;
} 
```

### 方法 3：使用 CSS 选择器库：

HtmlAgilityPack 有点停滞不支持`.querySelector`和`.querySelectorAll`，但是有第三方库用它扩展了 HtmlAgilityPack ：即[Fizzler](https://www.nuget.org/packages/Fizzler.Systems.HtmlAgilityPack/)和[CssSelectors](https://www.nuget.org/packages/HtmlAgilityPack.CssSelectors/)。Fizzler 和 CssSelectors 都实现了`QuerySelectorAll`，因此您可以像这样使用它：

```
private static IEnumerable<HtmlNode> GetDivElementsWithFloatClass(HtmlDocument doc) {

    return doc.QuerySelectorAll( "div.float" );
} 
```

使用运行时定义的类：

```
private static IEnumerable<HtmlNode> GetDivElementsWithClasses(HtmlDocument doc, IEnumerable<String> classNames) {

    String selector = "div." + String.Join( ".", classNames );

    return doc.QuerySelectorAll( selector  );
} 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-12-30T02:12:37.853

您可以通过在 Xpath 查询中使用“包含”功能来解决您的问题，如下所示：

```
var allElementsWithClassFloat = 
   _doc.DocumentNode.SelectNodes("//*[contains(@class,'float')]") 
```

要在函数中重用它，请执行类似于以下的操作：

```
string classToFind = "float";    
var allElementsWithClassFloat = 
   _doc.DocumentNode.SelectNodes(string.Format("//*[contains(@class,'{0}')]", classToFind)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-05T20:18:58.733

我在我的项目中经常使用这种扩展方法。希望它会帮助你们中的一个人。

```
public static bool HasClass(this HtmlNode node, params string[] classValueArray)
    {
        var classValue = node.GetAttributeValue("class", "");
        var classValues = classValue.Split(' ');
        return classValueArray.All(c => classValues.Contains(c));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-26T21:03:25.817

```
public static List<HtmlNode> GetTagsWithClass(string html,List<string> @class)
    {
        // LoadHtml(html);           
        var result = htmlDocument.DocumentNode.Descendants()
            .Where(x =>x.Attributes.Contains("class") && @class.Contains(x.Attributes["class"].Value)).ToList();          
        return result;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-20T16:55:46.677

如果您在某个标签（如或任何其他）中寻找课程。试试这个

```
 var spans = doc.DocumentNode.SelectNodes("//span"); //or other tag or all nodes

 var span_with_class = spans.Where(_ => _.Attributes["class"].Value.Split(' ').Any(b => b.Equals("someClass"))); 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-08-31T17:57:04.450

您可以使用以下脚本：

```
var findclasses = _doc.DocumentNode.Descendants("div").Where(d => 
    d.Attributes.Contains("class") && d.Attributes["class"].Value.Contains("float")
); 
```

# c++ - 为什么访问一个变量的地址会改变另一个变量的地址？

> ID：13771085
> 
> 赞同：1
> 
> 时间：2012-12-07T21:15:54.780
> 
> 标签：c++, memory, memory-address

**代码 1：**

```
int main(){
   int a=1;
   int b=2;
   cout << "&a: "<<&a << endl;
} 
```

**输出 1：**

```
&a: 0x22ff48 
```

**代码 2：**

```
int main(){
   int a=1;
   int b=2;
   cout << "&a: "<<&a << endl;
   cout << "&b: "<<&b << endl;
} 
```

**输出 2：**

```
&a: 0x22ff4c
&b: 0x22ff48 
```

* * *

所以我的问题是为什么`a`当我打印出变量的地址时变量的地址发生了变化`b`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:17:35.633

当你根本不使用`b`时，编译器可能将它完全删除，因此它不占用任何空间。

当您获取 的地址时`b`，这会强制编译器为其分配空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T21:19:26.270

无论如何，操作系统下次可以自由地在另一个（虚拟）基地址加载可执行映像。

无论如何，您所观察到的都是*未定义的。*关键是，**即使**没有变量被优化掉，并且程序没有被重新编译，它每次都可能产生不同的结果。

如果您将操作系统视为实现的一部分，它*可能是**实现定义的*

# java - Java中的字数

> ID：13771087
> 
> 赞同：0
> 
> 时间：2012-12-07T21:16:00.923
> 
> 标签：java, word-count

我正在为我的 CS 期末练习一些练习，并且被困在这个问题上，我必须读取一个字符串，从用户那里获得最小长度，并返回至少有那么多字母的单词数量。似乎我的代码很好，但它无法打印出答案。谁能帮我吗？

```
public class WordCount {

    public static void main (String [] args) {
        System.out.println("Enter a string: "); 
        String input =  IO.readString();

        System.out.println("Enter minimum word length");
        int wordlength = IO.readInt();
        int count = 0 ;
        do  {

            for (int i = 0 ; i < input.length(); i ++) {

                if (input.indexOf(i) == ' ') {

                    String check = input.substring(0, i);
                    if (check.length() >= wordlength) {

                        count++;
                        input = input.substring(i);
                        break;

                    }
                }

                    }

        } while (input.length() > 0);

    System.out.print("Words longer than " + wordlength + " characters: " + count);

    }

} 
```

似乎while循环无限运行，但我不知道为什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:35:05.267

我将简单地使用 split 如下：

```
 System.out.println("Enter minimum word length");
    int wordlength = IO.readInt();
    int count = 0 ;
    //get all words in string array by splitting the input around space
    String[] words = input.split(" ");//assuming words are separated by space

    //now iterate the words, check the length, if word is of desired length or more
    //increase the word counter
    for (int i = 0 ; i < words.length; i ++) {
       if (words[i].length() >= wordlength) {
         count++;
       }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:35:12.397

目前我将首先指出您的代码存在一些问题：-

```
if (input.indexOf(i) == ' ') 
```

在上面的语句中，您应该使用`String#charAt`方法来获取特定索引处的字符。`String#indexOf`方法用于逆过程，即你有一个字符，你想找到它的索引。

其次，您正在修改您`input`的`loop itself`. 并且您`input`在`loop`. 你不应该做这样的事情。相反，您可以使用另一个变量，它将存储您处理的最后一个单词的索引。并`index`在你的`substring`方法中使用它。

第三，你真的不需要在`do while`这里循环。你`for loop`自己正在迭代你所有的角色。只需`break`从您的中删除`if`，这实际上不是必需的。

因此，您的代码将被修改为：-

```
int oldIndex = 0;  // to maintain the end index of previous word.
int length = input.length();
for (int i = 0 ; i < length; i ++) {

          if (input.charAt(i) == ' ' || i == length - 1) {

                // If the word is at the end, then probably your first 
                // condition in above `if` would fail, that is why I used a 
                // second condition, which checks the end of string

                // Now for the end of the string, we would need to use a single
                // arguement substring method to get the word till the end.
                // hence the below conditional expression.

                String check = (i == length - 1)? input.substring(oldIndex): 
                                                input.substring(oldIndex, i);

                oldIndex = i + 1;  // Set oldIndex to the next index.

                if (check.length() >= wordlength) {

                    count++;
                    //  input = input.substring(i);  Don't do this
                    // break;   // Don't break too.

                }
           }

} 
```

* * *

现在这是对您的代码的修改，以便您可以了解您的错误。

然而，你有一个很简单的方法来得到你想要的。您可以对字符串使用`String#split`方法on ，它将返回一个包含所有单词的数组，您可以对这些单词进行操作。`split``space`

它的工作原理是这样的（如果你可以使用它）： -

```
String[] words = input.split(" ");  // split input string on space

for (int i = 0; i < words.length; i++) {  // iterate over array
    if (words[i].length() >= wordLength) {
        count++;
    }
}

System.out.println(count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:38:09.180

而不是`indexOf(i)`您需要使用`charAt(i)`来检索 position 处的字符`i`，循环和逻辑看起来可以满足所述目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:38:58.440

查看子字符串的 javadoc。它从您给它的索引开始，并且包含在内。所以你的 substring 调用总是会给你一个长度至少为 1 的字符串。

```
public String substring(int beginIndex)
Returns a new string that is a substring of this string. The substring begins with the character at the specified index and extends to the end of this string.

Examples:

     "unhappy".substring(2) returns "happy"
     "Harbison".substring(3) returns "bison"
     "emptiness".substring(9) returns "" (an empty string)

Parameters:
    beginIndex - the beginning index, inclusive. 
Returns:
    the specified substring. 
Throws:
    IndexOutOfBoundsException - if beginIndex is negative or larger than the length of this String object. 
```

尝试这样的事情：

```
String input = "one two three four five six seven eight nine ten";
    int minLength = 4;
    int count = 0;
    String[] strings = input.split(" ");
    for(String s : strings) {
        if(s.length() >= minLength) {
            ++count;
        }
    }

    System.out.println(count); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:36:24.690

The `do-while` loop runs indefinitely because that's what's you've set it up to do. Let's simplify this:

```
string input = "this is an example string";
do
{
     //some logic
     if (input.indexOf(i) == ' ') // this never executes - indexOf(i) returns an int
     {
          //do some stuff with input
     }

}
while (input.length() > 0); 
```

`input.length()` is **always** greater than zero. The block which alters `input` never executes, so `input` stays the same, and the length of the string `input` is always greater than 0.

# python - Python：将值重新分配给变量（使用函数）

> ID：13771088
> 
> 赞同：4
> 
> 时间：2012-12-07T21:16:06.870
> 
> 标签：python, function, variables, python-2.7

> **可能重复：**
> [Python：如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

如何将值重新分配给作为函数参数传递的变量？

例如，我想做的是：

```
foo = True

def convert(foo):
    if foo == True:
        foo = 'on'
    elif foo == False:
        foo = 'off'
    return foo 
```

现在在哪里`foo`是一个字符串。上述方法的问题在于，为了`foo`从布尔类型更改为字符串类型，必须传递以下内容：

```
foo = convert(foo) 
```

而我想做类似的事情：

```
convert(foo) 
```

或者，

```
foo.convert() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:19:26.140

```
foo = convert(foo) 
```

是实现这一目标的最干净和最明确的方法。如果您确定甚至需要将字符串重新分配给`bool`变量，这是大多数人推荐的方式。

```
foo.convert() 
```

是您可以对需要定义的类的实例执行的操作。你可以做到，但这不值得麻烦。只需重新分配变量，就是这样。

```
convert(foo) # actually, just convert() 
```

也可以工作，但你必须在函数中使用`global`关键字。`convert`不建议这样做，尤其是当它很容易避免时。

```
In [1]: foo = True

In [2]: def convert():
   ...:    global foo
   ...:    foo = 'on' if foo else 'off'
   ...:     

In [3]: convert()

In [4]: foo
Out[4]: 'on' 
```

# java - Android片段框架：向上转换不起作用

> ID：13771089
> 
> 赞同：2
> 
> 时间：2012-12-07T21:16:07.963
> 
> 标签：java, android, fragment, upcasting

我正在研究活动中的 Listfragment。我在活动中有一个嵌套类。

```
public static class DummySectionFragment extends ListFragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View contentView=inflater.inflate(R.layout.activity_main_fragment_browse, container);
        return contentView;
    } 
```

但编译器抱怨 DummySectionFragemt 不是片段

```
 @Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the
    // container view.
    Fragment fragment = new DummySectionFragment(); // <-- complain not fragment
    // codes omitted .......
} 
```

编译器抱怨：类型不匹配：无法从 MainActivity.DummySectionFragment 转换为 Fragment

当我让 DummySectionFragment 直接扩展 Fragment 时，它可以工作，但我只是不明白为什么它以前不能工作。显然，DummySectionFragment 扩展了 ListFragment 扩展了 Fragment。这里应该是隐式向上转换，我不明白为什么它不起作用:(

```
//make it directly extends Fragment -->
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View contentView=inflater.inflate(R.layout.activity_main_fragment_browse, container);
        return contentView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-03T07:11:58.150

```
public static class DummySectionFragment extends ListFragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView;
        if(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)).equals("1")){
            rootView = inflater.inflate(R.layout.fragment_tab1,container, false);               
        }
        else if(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)).equals("2")){
            rootView = inflater.inflate(R.layout.fragment_tab2,container, false);               
        }
        else if(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)).equals("3")){
            rootView = inflater.inflate(R.layout.fragment_tab3,container, false);               
        }
        else{
            rootView = inflater.inflate(R.layout.fragment_tab,container, false);
        }
        return rootView;
    }
} 
```

//确保你使用 import android.support.v4.app.ListFragment -->

# php - 使用 PHP 和 AJAX 计算日期选择器的日期

> ID：13771092
> 
> 赞同：0
> 
> 时间：2012-12-07T21:16:14.877
> 
> 标签：php, mysql, ajax, date, datepicker

我有三个输入：

```
<input type='number'>
<input class='datepicker'>
<input class='datepicker' readonly='readonly'> 
```

日期选择器很简单，因为：

```
<script>
  $(function() 
    {
     $('.datepicker').datepicker({ dateFormat: 'yy-mm-dd' });
    }); 
</script> 
```

第一个用于设置周数，例如 2。第二个用于设置开始日期。如何在第三个输入（只读）中输出已设置日期的结果日期加上周数？

就像我设置 2 周然后使用第一个日期选择器设置 2012-12-07 时一样，然后它将输出到第三个（只读）输入 2012-12-21 ？

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:35:51.757

您需要使用`onSelect()`datepicker 的属性来检索所选日期并更新只读字段：[http ://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

然后，您需要使用[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象及其方法来解析所选日期，为其添加特定天数并返回与新日期对应的新文本。

```
<input id="nbweeks" type='number' />
<input class='datepicker' />
<input id="input-ro" class='datepicker' readonly='readonly' />

function addDaysDate(dateText, days) {
    var curDate = new Date(Date.parse(dateText));
    var nextDate = new Date();
    nextDate .setDate(curDate.getDate() + days);

    var curDay = nextDate .getDate();
    var curMonth = nextDate .getMonth() + 1; //Months are zero based
    var curYear = nextDate .getFullYear();
    return curMonth + "-" + curDay + "-" + curYear;​
}

$(function(){
    $('.datepicker').datepicker({
        dateFormat: 'yyyy-mm-dd',
        onSelect(dateText, inst) {
            var days = $("#nbweeks").val() * 7;
            var newDate = addDaysDate(dateText, days)
            $("#input-ro").val(newDate)​;​
        }
    });
}); 
```

代码的实时示例（没有日期选择器）：http: [//jsfiddle.net/PcTHQ/](http://jsfiddle.net/PcTHQ/)

编辑：要小心，要让 Date.parse() 工作，我认为您需要将年份设置为四位数，或者将日期顺序更改为 mm/dd/yy

# android - 如何在小部件中循环文本？

> ID：13771093
> 
> 赞同：1
> 
> 时间：2012-12-07T21:16:19.213
> 
> 标签：android, loops, text, timer, android-widget

我是 android 的菜鸟，我正在尝试创建一个显示标题和片段 30 秒的新闻小部件。然后更改为另一个标题和片段。我希望小部件在连续循环中执行此操作。到目前为止，我只能显示第一个标题和片段。如何更改文本而不每 30 秒调用一次 alarmManager？任何帮助是极大的赞赏。

我的代码

```
public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {

    RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);

    String tickerheadline="testing";
    String tickerstory="testing";
    for (int i = 0; i < RssReader.rssheadline.size(); i++) {
        tickerheadline = RssReader.rssheadline.get(RssReader.rssheadline.size()-(i+1));
        tickerstory = RssReader.rssstory.get(RssReader.rssheadline.size()-(i+1));
        Handler handler = new Handler(); 
        handler.postDelayed(new Runnable() { 
             public void run() {} 
            }, 30000);

    }

    updateViews.setTextViewText(R.id.headline, tickerheadline );
    updateViews.setTextViewText(R.id.story, tickerstory );

    appWidgetManager.updateAppWidget(appWidgetId, updateViews);
} 
```

编辑

```
public static void updateAppWidget(final Context context, final AppWidgetManager appWidgetManager, final int appWidgetId) {
    final RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);

new Thread(new Runnable() {
        public void run() {     
    tickerheadline="testing";
    tickerstory="testing";
    for (int i = 0; i < RssReader.rssheadline.size(); i++) {
        tickerheadline = RssReader.rssheadline.get(RssReader.rssheadline.size()-(i+1));
        tickerstory = RssReader.rssstory.get(RssReader.rssheadline.size()-(i+1));
        context.runOnUiThread(action); //action cannot be resolved as variable
        SystemClock.sleep(30000);

    }
        }
    }).start();

    Runnable action = new Runnable() {
        public void run() {
    updateViews.setTextViewText(R.id.headline, tickerheadline );
    updateViews.setTextViewText(R.id.story, tickerstory );

    appWidgetManager.updateAppWidget(appWidgetId, updateViews);
        }
    };

} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:43:52.743

无论您在方法中传递什么参数，您都可以创建一个类的构造函数并传递它，并将“MainActivity.this”替换为“context”。如果您有任何疑问，请告诉我... :)

```
public void updateAppWidget(){
    new YourNewClass().start();
}
private class YourNewClass extends Thread {
    @Override
    public void run() {
        for(--,--,--){
            MainActivity.this.runOnUiThread(runnable);
            SystemClock.sleep(30000);
        }
    }
}
private Runnable  runnable = new Runnable() {
    public void run() {

    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:34:21.680

不知道这是否是解决您问题的方法。无论如何，`action`无法解决，因为它是在您要访问它之后声明的。尝试像这样声明它：

```
public static void updateAppWidget(final Context context, final AppWidgetManager appWidgetManager, final int appWidgetId) {
    final RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);

    final Runnable action = new Runnable() {
        public void run() {
            updateViews.setTextViewText(R.id.headline, tickerheadline);
            updateViews.setTextViewText(R.id.story, tickerstory);

            appWidgetManager.updateAppWidget(appWidgetId, updateViews);
        }
    };

    new Thread(new Runnable() {
        public void run() {
            tickerheadline = "testing";
            tickerstory = "testing";
            for (int i = 0; i < RssReader.rssheadline.size(); i++) {
                tickerheadline = RssReader.rssheadline.get(RssReader.rssheadline.size() - (i + 1));
                tickerstory = RssReader.rssstory.get(RssReader.rssheadline.size() - (i + 1));
                context.runOnUiThread(action); //action cannot be resolved as variable
                SystemClock.sleep(30000);

            }
        }
    }).start();
} 
```

另外，`runOnUiThread`是类的方法`Activity`，不是`Context`。 [http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:13:44.863

现在你的代码看起来像这样。希望它会帮助你...

```
public static void updateAppWidget(final Activity context, final AppWidgetManager appWidgetManager, final int appWidgetId) {
    final RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);

    new Thread(new Runnable() {
        public void run() {
            String tickerheadline="testing";
            String tickerstory="testing";
            for (int i = 0; i < RssReader.rssheadline.size(); i++) {
                tickerheadline = RssReader.rssheadline.get(RssReader.rssheadline.size()-(i+1));
                tickerstory = RssReader.rssstory.get(RssReader.rssheadline.size()-(i+1));

                context.runOnUiThread(action);
                SystemClock.sleep(30000);

//                  Handler handler = new Handler(); 
//                  handler.postDelayed(new Runnable() { 
//                       public void run() {} 
//                      }, 30000);

            }
        }
    }).start();

    Runnable action = new Runnable() {
        public void run() {
            updateViews.setTextViewText(R.id.headline, tickerheadline );
            updateViews.setTextViewText(R.id.story, tickerstory );
            appWidgetManager.updateAppWidget(appWidgetId, updateViews);
        }
    };

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:08:34.137

fwiw，您提供的代码同时触发所有可运行程序（从 for 循环开始后 30 秒）。

这是我通常使用的模式：

```
private Handler mHandler = new Handler();
private static final int NEWS_UPDATE_DELAY = 30*1000;

private Runnable mNewsUpdateHandler = new Runnable() {
     @Override 
     void run() 
     {
          updateNews();
          mHandler.postDelayed(mNewsUpdateHnadler, NEWS_UPDATE_DELAY);
     }
}

private void startNews() 
{
    stopNews();
    mNewsUpdateHandler.run();
}
private void stopNews()
{
    mHandler.removeCallback(mNewsUpdateHandler);    
}
private updateNews()
{
      // your stuff here.
} 
```

如果还没有，您将需要一个服务来运行该代码。无法从 Activity 进行持续的 appwidget 更新，因为当用户切换到另一个应用程序时，Activity 就会消失。

# visual-studio-2012 - vs2012服务器太忙

> ID：13771097
> 
> 赞同：49
> 
> 时间：2012-12-07T21:16:58.777
> 
> 标签：visual-studio-2012

我已经并排安装了 vs2010 和 vs2012。如果我在 vs2010 中打开我们的 MVC 站点并使用开发 Web 服务器运行它，它工作正常，如果我在 vs2012 中做同样的事情，我每次对站点的第一个请求都会得到“服务器太忙”。第一个请求之后的每个请求都可以正常工作。

更新：我注意到在 vs2012 中它只发生在需要构建的项目中。如果我没有进行任何更改，即不需要构建项目，我按 F5 启动它并打开 IE，它工作正常，我没有在浏览器中收到“服务器太忙”消息。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-06-19T15:19:46.050

我的 ASP.Net 解决方案也遇到了这个问题。在 Stack Overflow 或其他任何地方都没有解决此问题的方法。

**设置**：

Visual Studio 2013（但我认为它也适用于 vs 2010/2012 ASP.Net Web 应用程序 IIS 快速设置）。

我们的生产环境从来没有出现过这个问题，因为它是在 IIS 上运行的。

我已经尝试了很多来修复它，但我找到了一个特定的解决方案。我将其设置[`delayNotificationTimeout`](https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.delaynotificationtimeout.aspx)为 20 秒，而不是默认的 5 秒，这不足以让我们的解决方案想出成功运行所需的一切。

```
<system.web>
    <httpRuntime maxRequestLength="104850" 
                 executionTimeout="600" 
                 enableVersionHeader="false" 
                 ***delayNotificationTimeout="20"*** />
</system.web> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T04:52:07.820

只需**在构建之前****清理**解决方案。此外，在干净构建之前和之后检查解决方案所在文件夹的大小；你一定会发现一些不同。这样做可确保您清理/删除在每次构建后创建的不必要的 dll，这是延迟正常流程的原因。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-12T14:39:36.247

如果您需要增加 IIS Express 的请求限制，请尝试以下操作：

[在 IIS Express 中配置最大请求数](https://stackoverflow.com/questions/8731334/configure-maximum-number-of-requests-in-iis-express)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-27T14:37:07.637

我终于修复了减缓我的 ASP.Net 开发速度的恼人的“**服务器太忙**”消息。

根据[`httpRuntime.appRequestQueueLimit`](https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.apprequestqueuelimit.aspx)楼盘上的备注：

> 当排队的请求数量超过此设置的限制时，传入的请求将被拒绝并显示“ **503 - Server Too Busy** ”错误。

默认值为 5000，我随机增加到 9000，这对我有用：

```
<system.web>
  <httpRuntime appRequestQueueLimit="9000"/>
</system.web> 
```

如果您想在运行时（以及）检查此设置，我根据[此 Stack Overflow 问题](https://stackoverflow.com/questions/2858951/how-do-i-determine-the-following-default-web-config-values)`DelayNotificationTimeout`将以下代码添加到我的事件中：`Default.aspx.cs` `Page_Load`

```
// Uncomment to debug "Server Too Busy" error message
Configuration config = WebConfigurationManager.OpenWebConfiguration("~");
object o = config.GetSection("system.web/httpRuntime");
HttpRuntimeSection section = o as HttpRuntimeSection;
Response.Write("DelayNotificationTimeout: " + section.DelayNotificationTimeout.ToString() + "<br>");
Response.Write("AppRequestQueueLimit: " + section.AppRequestQueueLimit.ToString() + "<br>"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-16T03:17:26.160

** Config.XML 是第一个开始研究新的 Windows Visual Studio 2012 安装的地方。应在每个新的客户端/服务器应用程序上手动检查这些值

当真正不适当的服务器错误完全没有意义时，请考虑在项目根目录中明确设置队列或池大小的测试计算机的配置 XML 文件，如上面的 MS 链接中所述。当只有你在机器上时，服务器会响应“太忙”是非常奇怪的。

能够重用尽可能多的可回收对象总是好的，特别是数据库连接。

至于在同一台开发机器上同时运行 VS 2010 和 2012 应该没问题。只需检查您的引用是否指向应用程序 dll。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T08:34:53.127

您必须提高并发请求限制。阅读以下 ：

修改 ASP.NET 请求队列限制 [http://technet.microsoft.com/en-us/library/dd425294%28office.13%29.aspx](http://technet.microsoft.com/en-us/library/dd425294%28office.13%29.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-17T17:20:19.073

在您的项目中 --> 右键单击​​属性，然后在服务器部分的左侧选择 Web 选项，检查使用本地 IIS Web 服务器

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-25T12:22:05.390

如果您在 Visual Studio 中使用特定端口号运行调试，请尝试更改端口号。[![Visual Studio 项目 Web 属性](../Images/1b1d8d4e41448749f121e2ba14ba181e.png)](https://i.stack.imgur.com/Zjpgj.png)您的 Web服务器上的端口可能有问题。**

# css - 使用 Twitter Bootstrap 在表格单元格中垂直居中按钮

> ID：13771101
> 
> 赞同：92
> 
> 时间：2012-12-07T21:17:20.277
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap，并尝试在表格单元格中将按钮居中。我只需要它垂直居中。

```
<table class="table table-bordered table-condensed">
  <tbody>
    <tr>
      <td><a href="#" class="btn btn-primary"><i class="icon-check icon-white"></i></a></td>
      <td><a href="#">Todo Item One</a><br /><span class="label label-success">One thing</span></td>
    </tr>
  </tbody>
</table> 
```

有关问题，请参阅我的[JSFiddle](http://jsfiddle.net/timotheus/utvUU/)。我已经尝试了几种我知道的表格居中技巧，但似乎没有一个能正常工作。有任何想法吗？提前致谢。

**更新：**是的，我试过`vertical-align:middle;`了，如果它是内联的，那么它是有效的，但如果它在一个类中则不行`td`。更新了 JSFiddle 以反映这一点。

**最后更新：**我是个白痴，并没有检查它是否被 bootstrap.css 覆盖

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-12-07T21:43:02.833

### 对于引导 3.X：

Bootstrap 现在对表格单元格具有以下样式：

```
.table tbody > tr > td{
    vertical-align: top;
} 
```

要走的路是添加你自己的类，为之前的选择器添加更多的特异性：

```
.table tbody > tr > td.vert-aligned {
    vertical-align: middle;
} 
```

然后将该类添加到您`td`的 s 中：

```
<tr>
    <td class="vert-aligned"></td>
    ...
</tr> 
```

### 对于引导 2.X

[Bootstrap无法做到这](https://github.com/twitter/bootstrap/issues/2750)一点。

当在表格单元格中使用时，**vertical-align**做了大多数人所期望的，即模仿（旧的，已弃用的） valign 属性。在符合标准的现代浏览器中，以下三个代码片段执行相同的操作：

```
<td valign="middle"> <!-- but you shouldn't ever use valign --> </td>
<td style="vertical-align:middle"> ... </td>
<div style="display:table-cell; vertical-align:middle"> ... </div> 
```

检查你的[小提琴更新](http://jsfiddle.net/utvUU/1/)

### 更远

*   [垂直对齐：与 Bootstrap 2 居中](https://stackoverflow.com/questions/11592306/vertical-align-with-twitter-bootstrap)
*   [了解垂直对齐](http://phrogz.net/css/vertical-align/index.html)
*   [div中元素的垂直对齐方式](https://stackoverflow.com/questions/79461/vertical-alignment-of-elements-in-a-div)

此外，您不能引用使用的`td`类，`.vert`因为 Bootstrap 已经有这个类：

```
.table td {
   padding: 8px;
   line-height: 20px;
   text-align: left;
   vertical-align: top; // The problem!
   border-top: 1px solid #dddddd;
} 
```

并且正在重载`vertical-align: middle`'.vert' 类，因此您必须将此类定义为`td.vert`.

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-10-30T23:00:45.490

Bootstrap 3 的小更新。

Bootstrap 现在对表格单元格具有以下样式：

```
.table tbody>tr>td
{
    vertical-align: top;
} 
```

要走的路是添加一个你自己的类，使用相同的选择器：

```
.table tbody>tr>td.vert-align
{
    vertical-align: middle;
} 
```

然后将其添加到您的 tds

```
<td class="vert-align"></td> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-18T01:39:11.720

将此添加到您的CSS

```
.table-vcenter td {
   vertical-align: middle!important;
} 
```

然后将类添加到您的表中：

```
 <table class="table table-hover table-striped table-vcenter"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-18T09:46:07.500

为了解决这个问题，我把这门课放在网页上

```
<style>                        
    td.vcenter {
        vertical-align: middle !important;
        text-align: center !important;
    }
</style> 
```

这在我的 TemplateField

```
<asp:TemplateField ItemStyle-CssClass="vcenter"> 
```

因为 CSS 类直接指向 td (tabledata) 元素，并且在每个设置的末尾都有 !important 语句。它将覆盖规则引导程序 CSS 类设置。

希望能帮助到你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T21:35:55.260

添加`vertical-align: middle;`到`td`包含按钮的元素

```
<td style="vertical-align:middle;">  <--add this to center vertically
  <a href="#" class="btn btn-primary">
    <i class="icon-check icon-white"></i>
  </a>
</td> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T13:37:25.220

那么为什么td默认设置为vertical-align:top;？我真的还不知道。我不敢碰它。而是将其添加到您的样式表中。它会更改表格中的按钮。

```
table .btn{
  vertical-align: top;
} 
```

# c++ - 如何从系统功能设置外壳？

> ID：13771103
> 
> 赞同：0
> 
> 时间：2012-12-07T21:17:23.933
> 
> 标签：c++, string, shell

在一个 c++ 程序中，我使用系统函数来执行 ldapsearch 命令来获取文件中的数据。但是当 shell 是 bash 传递给 ldapsearch 的字符串导致错误并且如果用户的默认 shell 是 csh 时它工作正常，就会出现问题。当我调试下面观察到的代码时，字符串作为命令传递

```
ldapsearch -h <hostname> -p <port> -D <binddn> -w <passwd> -b \"cn=admin root\" \"(filter)\" cn 
```

现在我能想到两个解决方案

1.  在调用系统函数之前将 shell 设置为 csh。
2.  或者从上面的字符串中删除“\”，以便任何 shell 都可以理解该命令。

在这方面的任何指针都会很棒。这里需要注意的一点是，我使用 std::string 创建下面的最终输出字符串是相同的片段。

```
std::string ldapSystemCmd;
if(!ldapCosSearchDn.empty()) {
    ldapSystemCmd += ldapInitialString;
    ldapSystemCmd += "-b \"" + ldapCosSearchDn + "\"";
}
ldapSystemCmd += " \"" + ldapCosSearchFilter + "\"";
ldapSystemCmd += " cn >" + ldapSearchFileName;
int systemOutput = system(ldapSystemCmd.c_str()); 
```

或者，如果有任何其他方式我可以达到同样的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:24:18.090

我建议您使用`fork`+ `execlp`（或`spawnl`在 Windows 上）功能或其邻居。这样您就不需要转义您的参数，因为您将直接调用该程序而不使用 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:54:00.613

尝试替换`\"`，`'`看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T09:06:06.980

我怀疑命令字符串包含反斜杠，而是我认为您误解了调试器输出。问题可能出在*port*、*binddn*或*passwd*的字符上；如果它们包含标点符号，请尝试引用它们。

# jquery - 尝试使用 css3 和 jQuery 动画/翻转卡片组

> ID：13771107
> 
> 赞同：0
> 
> 时间：2012-12-07T21:17:35.603
> 
> 标签：jquery, css, css-transitions

我已经使用 javascript/html/css 创建了一副纸牌 - 我正在玩 css 动画来处理纸牌、翻转纸牌等。这里是网站[http://dalydd.com/projects/deckofcards.html](http://dalydd.com/projects/deckofcards.html)（请查看在 chrome 中，因为我只使用 webkit 前缀）

如果您点击交易卡按钮，它会将卡牌分配给两个不同的部分 - 一个用于（计算机播放器），另一个用于单个玩家）当动画交易完成时，我正在尝试为玩家部分翻转卡片以显示实际卡片而不是卡片背面或背面 div 这是我的 html 和 css

```
 <section class="wrapper" style="top: 1px; left: 1px; z-index: 1;"><div class="clubs       eight" data-value="8">eight of clubs<span>8</span></div><div class="back"></div></section> 
```

每个部分代表一张卡片 每个部分中有两个 div 一个用于卡片封面，一个用于实际卡片面

这是CSS

```
 #deck section.wrapper.player.flip {
 -webkit-perspective:500;
 -webkit-transform: rotateY(180deg);
 -webkit-transform-style: preserve-3d;
 -webkit-transition: all 1.0s linear;
  } 
```

我快到了我希望它像你在这里看到的那样工作[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

感谢任何帮助，因为我对 css 动画很陌生，但在使用 js 时看到了很多潜力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:50:39.737

这涉及更改父级的 css -webkit-transition（如果存在） - 如果您预先为包括父级在内的多个属性设置动画，这可能会变得非常棘手。我只看到了关于 css 3 动画的基本示例和教程，但还没有看到真正的世界。我希望将 css 过渡和动画与 Modernizer 一起使用可以创建所有开发人员都可以使用的东西。还没有人解释过这一点，但我不确定 css 3 转换的哪些属性优先于其他属性 - 这将是一个值得探索的全新世界。

如果你再次检查我的网站[http://dalydd.com/projects/deckofcards.html](http://dalydd.com/projects/deckofcards.html)它现在应该可以工作了 - 我正在制作动画的元素是从我在它的包装器上做的以前的动画继承 css 属性所以我将样式添加到parent 和我正在制作动画的那个，我写出了每个 css 属性，而不是使用速记

```
-webkit-backface-visibility: hidden;
-webkit-transition-duration: 1s;
-webkit-transition-timing-function: ease-in-out;
-webkit-transition-delay: 0s;
-webkit-transform: rotateX(1deg); 
```

# php - 用饼干填写表格

> ID：13771109
> 
> 赞同：2
> 
> 时间：2012-12-07T21:17:43.607
> 
> 标签：php, html, forms, cookies

我有一个表格，允许用户在我的网站中输入他们的用户名和密码。如果找到我设置的 cookie，我正在寻找一种自动填写电子邮件部分的方法。

在一页上我有 -

```
<?php
  setcookie("email", $email, time() + 60 * 60 * 24 * 7);
?> 
```

这设置了 cookie

在登录页面上我有这个 -

```
<tr><th><p>Email:</p></th> <td><p><input type="text" name="strEmail" maxlength="40"
value="<?php print($strEmail); ?>"/></p></td></tr> 
```

只有设置了cookie，我如何才能填写电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:20:24.727

```
<input type="text" name="strEmail" maxlength="40" value="<?php if (isset($_COOKIE["email"])) echo $_COOKIE["email"]; ?>"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:21:18.957

在该输入上方添加这一行：

```
$strEmail=isset($_COOKIE['email']) ? $_COOKIE['email'] : ""; 
```

# php - 正则表达式匹配特定的 URL

> ID：13771110
> 
> 赞同：-1
> 
> 时间：2012-12-07T21:17:48.497
> 
> 标签：php, regex, mod-rewrite, url-rewriting, preg-match

有人可以帮助我尝试使用匹配特定 URL 格式的正则表达式来执行重写规则。

我需要一些说明 URL 是否为

```
www.site.ag/whatever 
```

重定向到`/index`页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:45:20.703

我不确定这是否是您需要的，但这会将所有内容重定向到 index.php，但实际现有文件或目录的 URL 除外。

```
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^.*$ ./index.php 
```

# tomcat - 在 RHEL 上作为服务运行时如何以调试模式启动 Tomcat 6

> ID：13771112
> 
> 赞同：4
> 
> 时间：2012-12-07T21:17:54.510
> 
> 标签：tomcat, tomcat6, rhel6

这应该很容易，但是当 Tomcat 6 作为 RHEL 6.1 上的服务运行时，我无法在 Tomcat 6 上进行调试。

我在 /etc/tomcat6/tomcat6.conf 中添加了以下行

```
JAVA_OPTS="${JAVA_OPTS} -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n" 
```

当我重新启动tomcat 6服务时

```
service tomcat6 restart 
```

命令行指示 Tomcat 关闭并启动，但它没有运行，当我查看 catalina.out 日志时，我看到了

```
ERROR: Cannot load this JVM TI agent twice, check your java command line for duplicate jdwp options.
Error occurred during initialization of VM
agent library failed to init: jdwp 
```

尝试重新启动 Tomcat6 服务在关闭和启动时都失败。我必须重新启动 RHEL。

我认为Tomcat6可能默认以调试模式运行，但是当我注释掉tomcat6.conf中的行并使用netstat重新启动时，使用端口8000或Tomcat使用的任何端口都没有显示任何内容。

Tomcat 6 作为服务运行时可以在调试模式下运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T13:46:05.330

只需检查**Catalina.sh**文件中可用的**端口号 8000即可。**并检查是否有任何进程在同一个端口号 8000 中运行。

 **如果任何进程在同一端口上运行，则停止该进程并运行 jpda。

检查**同一**地址中的环境变量。catalina.sh 文件的 shell 脚本清楚地告诉它使用 8000 端口来执行它。

如果您想更改端口地址并在**.bashrc**文件中设置为

**导出 JPDA_ADDRESS=8009**

并执行命令

**$ ./catalina.sh jpda run**（普通方法）

如果您已使用安全管理器运行，那么

**$ ./catalina.sh jpda 运行-安全**

并转到**Eclipse**

转到 ->**调试配置**

将 Eclipse 配置为远程调试

首先，我们必须使用我们要调试的应用程序的源代码打开或导入项目。之后我们必须从 Eclipse 设置调试：

1) 点击工具栏中的“Debug”按钮（带有bug的按钮）的右侧（箭头朝上），然后点击“Debug configurations...”或菜单中的Run > Debug configurations... 然后将打开一个具有不同调试配置的新窗口。

调试配置

2) 在左侧菜单中选择“Remote Java Application”，然后点击“New launch configuration”按钮（左上角带有文件夹图标的按钮）。

新的调试配置

3）用我们的Tomcat实例对应的数据填充配置：

```
Project: The project we want to debug: it has to contain the source code for the application we want to debug.
Connection Type: Standard (Socket Attach).
Host: IP of the server in which is Tomcat installed.
Port: Port indicated to JVM in address parameter. Port 8000 in our example 
```

Eclipse 什么都没有显示。eclipse中没有显示任何变化。

只需在需要的地方**设置断点** ，然后在 tomcat 中运行应用程序。

**！！！！！！成功调试模式将工作!!!!!!!!!**

**恭喜！！！！**

通过**sampath**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:41:47.057

再一次重启似乎已经解决了它。RHEL 现在正在侦听端口 8000，我可以附加一个远程调试器。

诡异的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T07:55:14.817

我有同样的错误，原因是[https://bugzilla.redhat.com/show_bug.cgi?id=899458](https://bugzilla.redhat.com/show_bug.cgi?id=899458)。解决方法是删除以下行`/usr/sbin/tomcat6`：

```
# Get the tomcat config (use this for environment specific settings)
if [ -z "${TOMCAT_CFG}" ]; then
  TOMCAT_CFG="/etc/tomcat6/tomcat6.conf"
fi

if [ -r "$TOMCAT_CFG" ]; then
  . $TOMCAT_CFG
fi 
```

您的问题可能有所不同（否则没有理由重新启动工作），但我要离开这个，以便搜索错误消息的人可以找到它。**

# php - Jquery $.post() 数据返回不正确

> ID：13771122
> 
> 赞同：1
> 
> 时间：2012-12-07T21:18:36.640
> 
> 标签：php, jquery

我`$.post()`第一次运行女巫返回正确的数据 json 数据以运行 if 语句，但下一次`$.post()`使用它返回错误，导致 if 语句无法按预期工作。

我当前的 Jquery 代码：

```
$.post('functions/write_settings.php', { dbname: $('#dbname').val(), dbhost: $('#dbhost').val(), dbpassword: $('#dbpassword').val(), dbusername: $('#dbusername').val(), dbprefix: $('#dbprefix').val() }, function(data){
    alert("here");
    try{var returndata = $.parseJSON(data);}catch(e){/*cont*/}
    alert("here1");
      if($(returndata).size() >= 1){
          for(var i = 0; i < $(returndata).size(); i++){
              $("#" + returndata[i]).css('background', 'url(style/install/database/imgs/textbox_error.png)');
          }
          ResetButton();
          alert("here2");
    }else{
        $.post('functions/check_settings.php', function(data){
            alert(data);
            var postdata = data;
            $.trim(postdata);
            if(postdata == 'error'){
                alert("test2");
                $('#pdbe').show();
                $('#pdbe').effect("pulsate", { times:10 }, 10000);
                ResetButton();
            }else if(data == '0'){
                alert('connected!');
            }
        });
    }
}); 
```

这是 check_settings.php

```
$cwd = getcwd();
$file = $cwd.'/dbconfig.php';
//check dbconfig created
if(file_exists($file)){
    include('./dbconfig.php');
}else{
    echo("error2");
    die();
}

//grab required vars
$host = $config['db']['host'];
$dbname = $config['db']['dbname'];

//test basic connection
try{
   $dbh = new PDO("mysql:host=$host;dbname=$dbname", $config['db']['username'], $config['db']['password']);
   $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}catch(PDOException $e){
   echo("error");
   die();
}
echo("0"); 
```

就像我说的第一次`$.post()`返回正确的数据，而第二次使用它时它会错误地返回并导致 if 语句无法正常工作。

任何解决此问题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:29:04.473

你的问题是多余的空间吗？如果是这样，您可能会在 check_settings.php 中不知不觉地打印空格或换行符。例如，您可能在第一行之前有空格或换行

# c# - 锁定 Dictionary.Count

> ID：13771125
> 
> 赞同：5
> 
> 时间：2012-12-07T21:18:47.020
> 
> 标签：c#, locking

在访问集合的简单属性时，锁定有什么好处或坏处，特别是`.Count`？（这是可取的，不可取的，还是一点也不重要？）（当然我需要在任何写入或读取时锁定它）

```
private Dictionary<string, bool> database = new Dictionary<string, bool>();
private object databaseLock = new object();
public int Count
{
    get
    {
        lock (databaseLock)
        {
            return database.Count;
        }
    }
} 
```

我个人认为这可能是可取的，只是为了打破需要锁定访问字典的约定，而不是出于任何实际原因[*]。此外，在您访问的任何属性中，可能会有比预期更多的操作。

[*] 知道在 C# 中的（大多数）集合中，`Count`它是一个由它维护的整数，因此应该始终是原子操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:30:18.157

是的，在并发写入的情况下需要锁定，因为文档`Dictionary`不保证这是安全的。你不能假设任何关于它的内部结构。

此规则的例外情况需要极端情况。

TL;DR：仅依靠记录在案的行为，否则您最终会发现自己处于受伤的世界中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:43:03.663

这种代码严重属于“伤害”类别。也是非常严重的伤害。锁只是不能保护**任何东西**。在属性 getter 退出锁定后的纳秒内，没有什么可以阻止线程向字典添加或删除项目。这使得 Count 值只返回垃圾。当您获得值时，您不知道字典中有多少项。到目前为止，这个错误最有害的方面是它*通常是*正确的。

此代码将*保证*您创建了线程竞赛，这是迄今为止诊断的最糟糕的错误类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:31:09.360

[编辑：正如 usr 在他的回答](https://stackoverflow.com/a/13771278/18573) 中指出的那样，这`Dictonary.Count`不是线程安全的。[文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)说：

> 通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。

*这*意味着需要同步。请注意，可能正在修改集合的任何其他代码都需要使用相同的锁。这很容易出错，如果 Dictionary 被多个线程使用，请考虑 改用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)

# jquery - 从文本输入框中获取文本的 jQuery 变量不会更新

> ID：13771126
> 
> 赞同：0
> 
> 时间：2012-12-07T21:18:45.660
> 
> 标签：jquery, input

这是我的代码：

```
 <input name="addCollectionInput" type="text" class="xlarge" value=""/> -->
            <input id="addCollectionInput" name="addCollectionInput" class="xlarge" type="text" />
            <input type="hidden" id="fromSideBar" name="fromSideBar" value="1" />
            <!-- <input type="hidden" name="id" value="<c:out value="${category.id}" />" /> -->
            </td>
            <td>
            <button id="addCategoryButton" class="addCategoryButton" type="button">+</button> <!-- class="btn btn-primary" type="submit"  -->
            <script>   
            //Quand je clique sur le bouton "+"
            $(document).ready(function () 
            {
                $('#addCategoryButton').click(function () 
            {
            var
            val = $('#addCollectionInput').val(),
            $select = $('#subjectCategories');

            //Si la catégorie n'existe pas déjà...
            if ($select.find('option[value="' + val + '"]').length === 0 && val!="") 
            {
            //Ajouter la nouvelle catégorie dans la liste
            $('<option>', {
            value: val,
            text: val
            }).appendTo($select);

           //Vider le champ d'ajout de catégories
           $('#addCollectionInput').val("");
          }
          alert(val);
        });
    });
    </script>
</td> 
```

问题是，无论我做什么，val 始终为空，尽管我在名为 addCollectionInput 的文本输入中写了一些东西。为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:21:01.373

好的，这非常愚蠢和难以理解，但我只更改了文本输入的名称，它工作正常！？

# java - ArrayList 和 IndexOutOfBounds 异常

> ID：13771128
> 
> 赞同：0
> 
> 时间：2012-12-07T21:19:01.453
> 
> 标签：java, indexoutofboundsexception

因此，我正在编写的某些代码中出现索引越界异常。我不明白的是，我知道我正在尝试使用的索引元素存在。

这是代码：

我有一个数组列表的构造函数

```
 public StixBoard(int number)
{
    stixGame = new ArrayList<Integer>(number);

    for (int i = 0; i < number; i++)
    {
        stixGame.add(i);
    }

} 
```

此块生成随机变量 1-3

```
public int computeMove()
{

    int numberOfStix = (int) (3.0 * Math.random()) + 1;

    return numberOfStix;
} 
```

真的很简单，现在我有一个方法，它采用提供的参数并尝试从数组列表中删除这些数量的元素。可以看到，参数必须在1到3之间，并且必须小于等于数组列表的大小。否则，将提示用户输入另一个数字

```
public boolean takeStix(int number)
{
    boolean logicVar = false;
    placeHolder = stixGame.size();

    if ((number >= 1 && number <= 3) && number <= placeHolder)
    {
        for (int i = 0; i < number; i++)
        {
            stixGame.remove(i);
            logicVar = true;
        }
    } else if (number > 3 || number > placeHolder)
    {
        do
        {
            System.out
                    .println("Please enter a different number, less than or equal to three.");
            Scanner numberScan = new Scanner(System.in);
            number = numberScan.nextInt();
        } while (number > 3 || number > placeHolder);
    }

    return logicVar;
} 
```

因此，当该程序运行时，computeMove() 方法会生成一个随机 int（假设是计算机玩家的角色）并尝试将该值转换为要从数组列表中删除的索引数。

这最终使我想到了这一点：

```
How many stix on the table? 4
|||||||||| 4 stix on the table
It's the computer's turn!
The computer chose 3

Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 2, Size: 2
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.remove(ArrayList.java:387)
at StixBoard.takeStix(StixBoard.java:38)
at StixGame.main(StixGame.java:55) 
```

如您所见，数组列表的大小为 4，但是当计算机掷出 3（这应该让我留下 1）时，我会遇到这个错误。我的数组列表如何从大小为 4 的索引变为大小为 2？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:23:09.470

您从头到尾遍历您的列表，并在每一步删除一个元素。这使得列表中的所有元素都向左移动。

第一次迭代：i = 0

```
[1, 2, 3] 
```

第二次迭代：i = 1

```
[2, 3] 
```

第三次迭代：i = 2

```
[2] -> IndexOutOfBoudsException. There is no index 2 in this list. 
```

而是从结尾迭代到开头。这将使它正确，并且更快，因为列表不必从右到左复制所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:22:09.027

问题出在这个循环中：

```
 for (int i = 0; i < number; i++)
    {
        stixGame.remove(i);
        logicVar = true;
    } 
```

**删除元素后，列表大小也会减小。**如果您从列表大小 3 开始，那么在第 3 次迭代中，索引变为`2 as initially 0 then 1 then 2`而大小变为`1 as intially 3 then 2 then 1`. 因此`IndexOutOfBoundException`。

试试这个：

```
 for (int i = 0; i < number; i++){
        stixGame.remove(0);//remove 0th index as previous element was removed
        logicVar = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:26:51.753

这样看。

当你开始你的 for 循环时， ArrayList 是 size `x`。

当您调用时，`remove()`您从列表中获取一个元素。所以大小为`x-1`。

但是，如果您不断增加要删除的元素，最终您将删除不再存在的索引。请记住，当您调用`remove()`数组列表的内容时，会发生移位。因此，如果您之前有 0,1,2,3 并删除了 2。列表是 0,1,3。如果您调用`remove(4)`最初有效的方法，您将收到 Out Of Bounds 异常

# ruby-on-rails - Rails 验证附件扩展

> ID：13771129
> 
> 赞同：0
> 
> 时间：2012-12-07T21:19:03.180
> 
> 标签：ruby-on-rails, validation, format

我正在尝试验证附件的扩展名。我尝试过以下方法：

```
 validates_format_of :image_vector, :with => %r{\.(ai|dxf|eps|svg)$}i 
```

但是它似乎不起作用，每当我上传 svg 文件时，它都会说格式无效。我也尝试过使用回形针，但似乎无法完成扩展。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:43:20.830

使用回形针，您可以执行以下操作：

```
before_post_process :is_image?

def is_image?
  ["image/jpeg", "image/pjpeg", "image/png", "image/x-png", "image/gif"].include?(self.plan_content_type) 
end 
```

也许你可以在你的上下文中尝试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:21:22.863

```
validates_format_of :image_vector, :with => %r{\.(ai|dxf|eps|svg)$}i, :message => "whatever" 
```

# c# - 将 PDF 读入字符串或字节 [] 并将该字符串 / 字节 [] 写回磁盘

> ID：13771139
> 
> 赞同：1
> 
> 时间：2012-12-07T21:19:31.153
> 
> 标签：c#, file, pdf

我在我的应用程序中遇到问题，它从磁盘读取 PDF，然后必须稍后将其写回不同的位置。

发出的文件不再是有效的 PDF。

以非常简化的形式，我尝试使用读/写它

```
var bytes = File.ReadAllBytes(@"c:\myfile.pdf");
File.WriteAllBytes(@"c:\output.pdf", bytes); 
```

和

```
var input = new StreamReader(@"c:\myfile.pdf").ReadToEnd();
File.WriteAllText("c:\output.pdf", input); 
```

...以及上述的大约 100 种排列，并指定了各种编码。没有一个输出文件是有效的 PDF。

有人可以帮忙吗？非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:21:58.907

在 C#/.Net 4.0 中：

```
using (var i = new FileStream(@"input.pdf", FileMode.Open, FileAccess.Read))
   using (var o = File.Create(@"output.pdf"))
      i.CopyTo(o); 
```

如果你*坚持要*第`byte[]`一个：

```
using (var i = new FileStream(@"input.pdf", FileMode.Open, FileAccess.Read))
   using (var ms = new MemoryStream())
   {
        i.CopyTo(ms);
        byte[] rawdata = ms.GetBuffer();

        using (var o = File.Create(@"output.pdf"))
           ms.CopyTo(o);
   } 
```

内存流可能需要`ms.Seek(0, SeekOrigin.Origin)`在第二个 CopyTo 之前或类似的东西。查一下，或者试试看

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T21:22:26.050

你`File.WriteAllText`用来写你的文件。

试试[`File.WriteAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)。

# imagemagick - ImageMagick 使用 PHP 变量进行注释

> ID：13771142
> 
> 赞同：0
> 
> 时间：2012-12-07T21:19:58.250
> 
> 标签：imagemagick

我目前运行以下命令来使用变量注释图像`$handle`

在 LAMP 上运行时，一切正常，`$handle`变量被放入图像中。然而，在 WAMP 上运行时，变量周围的两个撇号被包含在变量中。这会在变量的前面和结尾添加一个 '。这是我正在运行的。任何想法为什么？

```
exec("C:\ImageMagick\convert $final -font handle_font.ttf -pointsize $font_size -fill 
black -annotate $pos_black '$handle' -fill white -annotate $pos_white '$handle' 
-flatten $final"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:56:15.967

在 Windows 上，您需要将 ' 换成 " 并在您的情况下用 \ 转义它

```
\"$handle\" 
```

像这样编写您的代码，然后您可以回显 $cmd 并查看它包含的内容：

```
$cmd = " $final -font handle_font.ttf -pointsize $font_size -fill black -annotate $pos_black \"$handle\" -fill white -annotate $pos_white \"$handle\" -flatten ";

echo $cmd.'<br>';

exec("C:\ImageMagick\convert $cmd $final"); 
```

# java - 具有自动滚动功能的 JTable，更新单元格时出现问题

> ID：13771143
> 
> 赞同：1
> 
> 时间：2012-12-07T21:20:07.030
> 
> 标签：java, swing, jtable, jpanel, autoscroll

我有一个值表（JTable），大约每 10 秒实时更新一次（每行更新 4 列中的最后 2 列）。我希望此表连续向上滚动，因此我使用了以下示例：

[http://wiki.byte-welt.net/wiki/MarqueePanelV](http://wiki.byte-welt.net/wiki/MarqueePanelV)

滚动环绕，第一行显示在最后一行之后，并且工作正常，除了一件事：

当我更新 DefaultTableModel（我正在使用 setValueAt() 函数）时，这些值将打印在它们的原始位置（就像表格没有滚动一样）。只有 2 列的部分被刷新，在视图中创建了一些裂缝。视图在下一次滚动（100 毫秒内）时得到纠正，但仍然在屏幕上可见。此外，由于我在鼠标悬停在表格上时停止滚动，因此更新将在表格视图中创建可见的裂缝。

关于如何解决此问题的任何想法？

这是一个显示问题的代码示例：

```
package scrollingtable;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import javax.swing.BoxLayout;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;
import javax.swing.table.DefaultTableModel;

class MarqueePanelV extends JPanel
                       implements ActionListener, AncestorListener, WindowListener {
    private boolean paintChildren;
    private boolean scrollingPaused;
    private int scrollOffset;
    private int wrapOffset;
    private int preferredHeight = -1;
    private int scrollAmount;
    private int scrollFrequency;
    private boolean wrap = false;
    private int wrapAmount = 0;
    private boolean scrollWhenFocused = true;
    private Timer timer = new Timer(100, this);

    /**
     *  Convenience constructor that sets both the scroll frequency and
     *  scroll amount to a value of 5.
     */
    public MarqueePanelV() {
        this(20, 1);
    }

    /**
     *
     * @param scrollFrequency
     * @param scrollAmount
     */
    @SuppressWarnings("LeakingThisInConstructor")
    public MarqueePanelV(int scrollFrequency, int scrollAmount) {
        setScrollFrequency(scrollFrequency);
        setScrollAmount(scrollAmount);
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        addAncestorListener(this);
    }

    /*
     *  Translate the location of the children before they are painted so it
     *  appears they are scrolling bottom to top
     */
    @Override
    public void paintChildren(Graphics g) {
        //  Need this so we don't see a flicker of the text before scrolling

        if (!paintChildren) {
            return;
        }
        int x = super.getPreferredSize().height;

        //  Normal painting as the components scroll bottom to top

        Graphics2D g2d = (Graphics2D) g;
        g2d.translate(0, -scrollOffset);
        super.paintChildren(g);
        g2d.translate(0, scrollOffset);

        //  Repaint the start of the components on the bottom edge of the panel once
        //  all the components are completely visible on the panel.
        //  (Its like the components are in two places at the same time)

        if (isWrap()) {
            //wrapOffset = scrollOffset - super.getPreferredSize().height - wrapAmount;
            wrapOffset = scrollOffset - x - wrapAmount;
            g2d.translate(0, -wrapOffset);
            super.paintChildren(g);
            g2d.translate(0, wrapOffset);
        }
    }

    /*
     *  The default preferred size will be half the size of the components added to
     *  the panel. This will allow room for components to be scrolled on and off
     *  the panel.
     *
     *  The default height can be overriden by using the setPreferredHeight() method.
     */
    @Override
    public Dimension getPreferredSize() {
        Dimension d = super.getPreferredSize();

        d.height = (preferredHeight == -1) ? d.height / 2 : preferredHeight;

        return d;
    }

    @Override
    public Dimension getMinimumSize() {
        return getPreferredSize();
    }

    public int getPreferredHeight() {
        return preferredHeight;
    }

    /**
     *  Specify the preferred height on the panel. A value of -1 will cause the
     *  default preferred with size calculation to be used.
     *
     *  @param preferredHeight  preferred height of the panel in pixels
     */
    public void setPreferredHeight(int preferredHeight) {
        this.preferredHeight = preferredHeight;
        revalidate();
    }

    /**
     *  Get the scroll amount.
     *
     *  @return the scroll amount in pixels
     */
    public int getScrollAmount() {
        return scrollAmount;
    }

    /**
     *  Specify the scroll amount. The number of pixels to scroll every time
     *  scrolling is done.
     *
     *  @param scrollAmount  scroll amount in pixels
     */
    public void setScrollAmount(int scrollAmount) {
        this.scrollAmount = scrollAmount;
    }

    /**
     *  Get the scroll frequency.
     *
     *  @return the scroll frequency
     */
    public int getScrollFrequency() {
        return scrollFrequency;
    }

    /**
     *  Specify the scroll frequency. That is the number of times scrolling
     *  should be performed every second.
     *
     *  @param scrollFrequency  scroll frequency
     */
    public void setScrollFrequency(int scrollFrequency) {
        this.scrollFrequency = scrollFrequency;

        int delay = 1000 / scrollFrequency;
        timer.setInitialDelay(delay);
        timer.setDelay(delay);
    }

    /**
     *  Get the scroll only when visible property.
     *
     *  @return the scroll only when visible value
     */
    public boolean isScrollWhenFocused() {
        return scrollWhenFocused;
    }

    /**
     *  Specify the scrolling property for unfocused windows.
     *
     *  @param scrollWhenVisible  when true scrolling pauses when the window
     *                                loses focus. Scrolling will continue when
     *                                the window regains focus. When false
     *                                scrolling is continuous unless the window
     *                                is iconified.
     */
    public void setScrollWhenFocused(boolean scrollWhenFocused) {
        this.scrollWhenFocused = scrollWhenFocused;
    }

    /**
     *  Get the wrap property.
     *
     *  @return the wrap value
     */
    public boolean isWrap() {
        return wrap;
    }

    /**
     *  Specify the wrapping property. Normal scrolling is such that all the text
     *  will scroll from bottom to top. When the last part of the text scrolls off
     *  the bottom edge scrolling will start again from the bottom edge. Therefore
     *  there is a time when the component is blank as nothing is displayed.
     *  Wrapping implies that as the end of the text scrolls off the top edge
     *  the beginning of the text will scroll in from the bottom edge. So the end
     *  and the start of the text is displayed at the same time.
     *
     *  @param wrap  when true the start of the text will scroll in from the bottom
     *                edge while the end of the text is still scrolling off the top
     *                edge. Otherwise the panel must be clear of text before it
     *                will begin again from the bottom edge.
     */
    public void setWrap(boolean wrap) {
        this.wrap = wrap;
    }

    /**
     *  Get the wrap amount.
     *
     *  @return the wrap amount value
     */
    public int getWrapAmount() {
        return wrapAmount;
    }

    /**
     *  Specify the wrapping amount. This specifies the space between the end of the
     *  text on the top edge and the start of the text from the bottom edge when
     *  wrapping is turned on.
     *
     *  @param wrapAmount  the amount in pixels
     */
    public void setWrapAmount(int wrapAmount) {
        this.wrapAmount = wrapAmount;
    }

    /**
     *  Start scrolling the components on the panel. Components will start
     *  scrolling from the bottom edge towards the top edge.
     */
    public void startScrolling() {
        paintChildren = true;
        scrollOffset = -getSize().height;

        timer.start();
    }

    /**
     *  Stop scrolling the components on the panel. The conponents will be
     *  cleared from the view of the panel
     */
    public void stopScrolling() {
        timer.stop();
        paintChildren = false;
        repaint();
    }

    /**
     *  The components will stop scrolling but will remain visible
     */
    public void pauseScrolling() {
        if (timer.isRunning()) {
            timer.stop();
            scrollingPaused = true;
        }
    }

    /**
     *  The components will resume scrolling from where scrolling was stopped.
     */
    public void resumeScrolling() {
        if (scrollingPaused) {
            timer.restart();
            scrollingPaused = false;
        }
    }

    /**
     *  Adjust the offset of the components on the panel so it appears that
     *  they are scrolling from bottom to top.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        scrollOffset += scrollAmount;
        int height = super.getPreferredSize().height;

        if (scrollOffset > height) {
            scrollOffset = isWrap() ? wrapOffset + scrollAmount : -getSize().height;
        }
        //System.out.println("scroll offset: " + scrollOffset);

        repaint();
    }

    /**
     *  Get notified when the panel is added to a Window so we can use a
     *  WindowListener to automatically start the scrolling of the components.
     */
    @Override
    public void ancestorAdded(AncestorEvent event) {
        SwingUtilities.windowForComponent(this).addWindowListener(this);
    }

    @Override
    public void ancestorRemoved(AncestorEvent event) {
    }

    @Override
    public void ancestorMoved(AncestorEvent event) {
    }

//  Implement WindowListener
    @Override
    public void windowOpened(WindowEvent e) {
        startScrolling();
    }

    @Override
    public void windowClosing(WindowEvent e) {
        stopScrolling();
    }

    @Override
    public void windowClosed(WindowEvent e) {
        stopScrolling();
    }

    @Override
    public void windowIconified(WindowEvent e) {
        pauseScrolling();    }

    @Override
    public void windowDeiconified(WindowEvent e) {
        resumeScrolling();    }

    @Override
    public void windowActivated(WindowEvent e) {
        if (isScrollWhenFocused()) {
            resumeScrolling();
        }
    }

    @Override
    public void windowDeactivated(WindowEvent e) {
        if (isScrollWhenFocused()) {
            pauseScrolling();
        }
    }
}

public class Main extends JDialog implements ActionListener {

    private JTable  table;
    private DefaultTableModel    model;
    MarqueePanelV mpv = new MarqueePanelV();
    private Timer timer2;

    public static void main(String[] args) {
        // TODO code application logic here
        new Main();
    }

    Main() {
        setSize(600, 400);
        this.setLocation(300, 300);
        table = new JTable();
        model = new DefaultTableModel(20, 2);
        table.setModel(model);
        table.getColumnModel().getColumn(0).setPreferredWidth(280);
        table.getColumnModel().getColumn(1).setPreferredWidth(280);
        for(int i = 0; i < 20; i++) {
            model.setValueAt(i, i, 0);
            model.setValueAt(100 + i, i, 1);
        }
        mpv.add(table);
        add(mpv);
        mpv.setWrap(true);
        mpv.setWrapAmount(0);
        mpv.startScrolling();
        table.addMouseListener(new MouseListener() {
        //  Implement MouseListener
            @Override
            public void mouseClicked(MouseEvent e) {}

            @Override
            public void mousePressed(MouseEvent e) {}

            @Override
            public void mouseReleased(MouseEvent e) {}

            @Override
            public void mouseEntered(MouseEvent e) {
                mpv.pauseScrolling();
            }

            @Override
            public void mouseExited(MouseEvent e) {
                mpv.resumeScrolling();
            }
        });
        setVisible(true);
        timer2 = new Timer(2000, this);
        timer2.setInitialDelay(1000);
        timer2.setDelay(2000);
        timer2.start();
    }

    public void actionPerformed(ActionEvent e) {
        for(int i = 0; i < 20; i++) {
            model.setValueAt(100 + i, i, 1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:06:22.817

通过调用 mpv.repaint(); 解决了问题；在 timer2 动作中：

```
package scrollingtable;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import javax.swing.BoxLayout;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;
import javax.swing.table.DefaultTableModel;

class MarqueePanelV extends JPanel
                       implements ActionListener, AncestorListener, WindowListener {
    private boolean paintChildren;
    private boolean scrollingPaused;
    private int scrollOffset;
    private int wrapOffset;
    private int preferredHeight = -1;
    private int scrollAmount;
    private int scrollFrequency;
    private boolean wrap = false;
    private int wrapAmount = 0;
    private boolean scrollWhenFocused = true;
    private Timer timer = new Timer(100, this);

    /**
     *  Convenience constructor that sets both the scroll frequency and
     *  scroll amount to a value of 5.
     */
    public MarqueePanelV() {
        this(20, 1);
    }

    /**
     *
     * @param scrollFrequency
     * @param scrollAmount
     */
    @SuppressWarnings("LeakingThisInConstructor")
    public MarqueePanelV(int scrollFrequency, int scrollAmount) {
        setScrollFrequency(scrollFrequency);
        setScrollAmount(scrollAmount);
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        addAncestorListener(this);
    }

    /*
     *  Translate the location of the children before they are painted so it
     *  appears they are scrolling bottom to top
     */
    @Override
    public void paintChildren(Graphics g) {
        //  Need this so we don't see a flicker of the text before scrolling

        if (!paintChildren) {
            return;
        }
        int x = super.getPreferredSize().height;

        //  Normal painting as the components scroll bottom to top

        Graphics2D g2d = (Graphics2D) g;
        g2d.translate(0, -scrollOffset);
        super.paintChildren(g);
        g2d.translate(0, scrollOffset);

        //  Repaint the start of the components on the bottom edge of the panel once
        //  all the components are completely visible on the panel.
        //  (Its like the components are in two places at the same time)

        if (isWrap()) {
            //wrapOffset = scrollOffset - super.getPreferredSize().height - wrapAmount;
            wrapOffset = scrollOffset - x - wrapAmount;
            g2d.translate(0, -wrapOffset);
            super.paintChildren(g);
            g2d.translate(0, wrapOffset);
        }
    }

    /*
     *  The default preferred size will be half the size of the components added to
     *  the panel. This will allow room for components to be scrolled on and off
     *  the panel.
     *
     *  The default height can be overriden by using the setPreferredHeight() method.
     */
    @Override
    public Dimension getPreferredSize() {
        Dimension d = super.getPreferredSize();

        d.height = (preferredHeight == -1) ? d.height / 2 : preferredHeight;

        return d;
    }

    @Override
    public Dimension getMinimumSize() {
        return getPreferredSize();
    }

    public int getPreferredHeight() {
        return preferredHeight;
    }

    /**
     *  Specify the preferred height on the panel. A value of -1 will cause the
     *  default preferred with size calculation to be used.
     *
     *  @param preferredHeight  preferred height of the panel in pixels
     */
    public void setPreferredHeight(int preferredHeight) {
        this.preferredHeight = preferredHeight;
        revalidate();
    }

    /**
     *  Get the scroll amount.
     *
     *  @return the scroll amount in pixels
     */
    public int getScrollAmount() {
        return scrollAmount;
    }

    /**
     *  Specify the scroll amount. The number of pixels to scroll every time
     *  scrolling is done.
     *
     *  @param scrollAmount  scroll amount in pixels
     */
    public void setScrollAmount(int scrollAmount) {
        this.scrollAmount = scrollAmount;
    }

    /**
     *  Get the scroll frequency.
     *
     *  @return the scroll frequency
     */
    public int getScrollFrequency() {
        return scrollFrequency;
    }

    /**
     *  Specify the scroll frequency. That is the number of times scrolling
     *  should be performed every second.
     *
     *  @param scrollFrequency  scroll frequency
     */
    public void setScrollFrequency(int scrollFrequency) {
        this.scrollFrequency = scrollFrequency;

        int delay = 1000 / scrollFrequency;
        timer.setInitialDelay(delay);
        timer.setDelay(delay);
    }

    /**
     *  Get the scroll only when visible property.
     *
     *  @return the scroll only when visible value
     */
    public boolean isScrollWhenFocused() {
        return scrollWhenFocused;
    }

    /**
     *  Specify the scrolling property for unfocused windows.
     *
     *  @param scrollWhenVisible  when true scrolling pauses when the window
     *                                loses focus. Scrolling will continue when
     *                                the window regains focus. When false
     *                                scrolling is continuous unless the window
     *                                is iconified.
     */
    public void setScrollWhenFocused(boolean scrollWhenFocused) {
        this.scrollWhenFocused = scrollWhenFocused;
    }

    /**
     *  Get the wrap property.
     *
     *  @return the wrap value
     */
    public boolean isWrap() {
        return wrap;
    }

    /**
     *  Specify the wrapping property. Normal scrolling is such that all the text
     *  will scroll from bottom to top. When the last part of the text scrolls off
     *  the bottom edge scrolling will start again from the bottom edge. Therefore
     *  there is a time when the component is blank as nothing is displayed.
     *  Wrapping implies that as the end of the text scrolls off the top edge
     *  the beginning of the text will scroll in from the bottom edge. So the end
     *  and the start of the text is displayed at the same time.
     *
     *  @param wrap  when true the start of the text will scroll in from the bottom
     *                edge while the end of the text is still scrolling off the top
     *                edge. Otherwise the panel must be clear of text before it
     *                will begin again from the bottom edge.
     */
    public void setWrap(boolean wrap) {
        this.wrap = wrap;
    }

    /**
     *  Get the wrap amount.
     *
     *  @return the wrap amount value
     */
    public int getWrapAmount() {
        return wrapAmount;
    }

    /**
     *  Specify the wrapping amount. This specifies the space between the end of the
     *  text on the top edge and the start of the text from the bottom edge when
     *  wrapping is turned on.
     *
     *  @param wrapAmount  the amount in pixels
     */
    public void setWrapAmount(int wrapAmount) {
        this.wrapAmount = wrapAmount;
    }

    /**
     *  Start scrolling the components on the panel. Components will start
     *  scrolling from the bottom edge towards the top edge.
     */
    public void startScrolling() {
        paintChildren = true;
        scrollOffset = -getSize().height;

        timer.start();
    }

    /**
     *  Stop scrolling the components on the panel. The conponents will be
     *  cleared from the view of the panel
     */
    public void stopScrolling() {
        timer.stop();
        paintChildren = false;
        repaint();
    }

    /**
     *  The components will stop scrolling but will remain visible
     */
    public void pauseScrolling() {
        if (timer.isRunning()) {
            timer.stop();
            scrollingPaused = true;
        }
    }

    /**
     *  The components will resume scrolling from where scrolling was stopped.
     */
    public void resumeScrolling() {
        if (scrollingPaused) {
            timer.restart();
            scrollingPaused = false;
        }
    }

    //  Implement ActionListener
    /**
     *  Adjust the offset of the components on the panel so it appears that
     *  they are scrolling from bottom to top.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        scrollOffset += scrollAmount;
        int height = super.getPreferredSize().height;

        if (scrollOffset > height) {
            scrollOffset = isWrap() ? wrapOffset + scrollAmount : -getSize().height;
        }

        repaint();
    }

    //  Implement AncestorListener
    /**
     *  Get notified when the panel is added to a Window so we can use a
     *  WindowListener to automatically start the scrolling of the components.
     */
    @Override
    public void ancestorAdded(AncestorEvent event) {
        SwingUtilities.windowForComponent(this).addWindowListener(this);
    }

    @Override
    public void ancestorRemoved(AncestorEvent event) {
    }

    @Override
    public void ancestorMoved(AncestorEvent event) {
    }

    //  Implement WindowListener
    @Override
    public void windowOpened(WindowEvent e) {
        startScrolling();
    }

    @Override
    public void windowClosing(WindowEvent e) {
        stopScrolling();
    }

    @Override
    public void windowClosed(WindowEvent e) {
        stopScrolling();
    }

    @Override
    public void windowIconified(WindowEvent e) {
        pauseScrolling();    }

    @Override
    public void windowDeiconified(WindowEvent e) {
        resumeScrolling();    }

    @Override
    public void windowActivated(WindowEvent e) {
        if (isScrollWhenFocused()) {
            resumeScrolling();
        }
    }

    @Override
    public void windowDeactivated(WindowEvent e) {
        if (isScrollWhenFocused()) {
            pauseScrolling();
        }
    }

}

public class Main extends JDialog implements ActionListener {

    private JTable  table;
    private DefaultTableModel    model;
    MarqueePanelV mpv = new MarqueePanelV();
    private Timer timer2;

    public static void main(String[] args) {
        // TODO code application logic here
        new Main();
    }

    Main() {
        setSize(600, 400);
        this.setLocation(300, 300);
        table = new JTable();
        model = new DefaultTableModel(20, 2);
        table.setModel(model);
        table.getColumnModel().getColumn(0).setPreferredWidth(280);
        table.getColumnModel().getColumn(1).setPreferredWidth(280);
        for(int i = 0; i < 20; i++) {
            model.setValueAt(i, i, 0);
            model.setValueAt(100 + i, i, 1);
        }
        mpv.add(table);
        add(mpv);
        mpv.setWrap(true);
        mpv.setWrapAmount(0);
        mpv.startScrolling();
        table.addMouseListener(new MouseListener() {
        //  Implement MouseListener
            @Override
            public void mouseClicked(MouseEvent e) {}

            @Override
            public void mousePressed(MouseEvent e) {}

            @Override
            public void mouseReleased(MouseEvent e) {}

            @Override
            public void mouseEntered(MouseEvent e) {
                mpv.pauseScrolling();
            }

            @Override
            public void mouseExited(MouseEvent e) {
                mpv.resumeScrolling();
            }
        });
        setVisible(true);
        timer2 = new Timer(2000, this);
        timer2.setInitialDelay(1000);
        timer2.setDelay(2000);
        timer2.start();
    }

    int k = 0;
    public void actionPerformed(ActionEvent e) {
        for(int i = 0; i < 20; i++) {
            model.setValueAt(100 + i + k, i, 1);
        }
        k++;
        mpv.repaint();
    }
} 
```

# javascript - 带有 jquery 事件的全局数组

> ID：13771144
> 
> 赞同：0
> 
> 时间：2012-12-07T21:20:17.140
> 
> 标签：javascript, arrays, global-variables

代码如下：

```
$('input').click(function(){
    window.array[$(this).attr('id')]=true;
    console.log('Input id: '+$(this).attr('id')+' - Num:'+window.array.length+
        ' - Array value:'+window.array[$(this).attr('id')]);
    alert(window.array.join('\n'));
}); 
```

行为很奇怪：当事件被触发时，在控制台中我可以读取`Input id: example_id - Num:0 - Array value:true`，然后在警报中我得到 undefined （空数组？但控制台告诉我正确的值！）。

当我单击另一个输入时，会发生完全相同的事情，例如尚未触发上一个事件。似乎回调函数每次调用时都会创建一个数组，但我使用的是窗口对象，并且有人告诉我将数组附加到窗口对象与全局变量相同！

你能解释一下这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:36:29.367

数组的`length`属性是它的最大数值属性加一（如果没有数值属性，则为零）。所以在数组上设置非数字属性不会改变它的长度。

`join`也只影响数字属性。尽管如此，结果应该是一个空字符串，而不是未定义的。你确定你使用的是普通数组吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:33:24.200

您的情况要求您使用对象，因为您需要使用字符串作为“id”。

如果您已定义：

```
window.array = [ ] 
```

和写：

```
window.array["id1"] = true; // WRONG! 
```

以上只是意味着您将获得：

```
window.array["id1"] //true but window.array is still [ ] 
```

这是因为window.array，虽然数组在JavaScript中仍然是一个对象，你可以给它添加属性，但是用法是错误的。要添加到数组中，您需要整数（或字符串形式的整数）作为索引。

```
window.array[1] = true; // OR window.array["1"] = true (!! even this works) 
```

# vb.net - DataTable.Select 将字符串值转换为日期格式并对其进行排序

> ID：13771147
> 
> 赞同：1
> 
> 时间：2012-12-07T21:20:49.510
> 
> 标签：vb.net

我有一个由第 3 方组件返回的数据表，因此我无法更改 SQL 字符串以获得我想要的。所以，我得到一个有几列的表，它们都是字符串。其中一列是**BILLDATE**，它是字符串类型，但实际上以**MM/DD/YYYY**格式保存日期。

问题：我需要按降序对记录进行排序并选择日期最大的记录。

代码：

```
Dim dataRows As DataRow()
Dim dt As New DataTable
dt = GetTable()
dataRows = dt.Select("", "BILLDATE DESC") 
```

样本数据：

```
10/23/2010
9/23/2010
8/23/2010
7/23/2010
6/23/2010 
```

从样本数据中，`9/23/2010`记录作为第一条记录返回，而不是`10/23/2010`. 这是我尝试过的：

`dataRows = dt.Select("MAX(CONVERT(DateTime,BILLDATE))", "")`- 运行时错误

`dataRows = dt.Select("", "Convert(BILLDATE,'System.DateTime')")`- 运行时错误

我不希望遍历所有记录以获取最新日期并选择它。有任何想法吗？

编辑 1 - 2012-12-07 4:42pm：添加了 dataRows 的定义。它是类型`DataRow()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:26:44.903

您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/332de853.aspx)多个格式字符串。你需要它们，因为你的“约会”有时有一个地方，有时有两个地方。我会改用 Linq：

```
Dim ordered = From row In dt.AsEnumerable()
              Let billDate = Date.ParseExact(
                              row.Field(Of String)("Billdate"),
                              {"MM/dd/yyyy", "M/dd/yyyy"},
                              Globalization.CultureInfo.InvariantCulture,
                              Globalization.DateTimeStyles.None)
              Order By billDate Descending
              Select row
' if you want to create a new DataTable from the rows: '
Dim tblOrdered = ordered.CopyToDatatable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T07:05:52.877

```
Dim LastDate As Date = dt.AsEnumerable().Max(Function(a) Convert.ToDateTime(a("BILLDATE"))) 
```

# .net - BackgroundWorker 上的 IsBusy 属性何时更改？

> ID：13771150
> 
> 赞同：0
> 
> 时间：2012-12-07T21:21:09.657
> 
> 标签：.net, backgroundworker

该`BackgroundWorker`组件有一个`IsBusy`标志。在执行时`RunWorkerASync`，此标志设置为 True。`RunWorkerASync`完成时或完成时它会更改为 False`RunWorkerCompleted`吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T21:21:09.657

该标志将在结束后`IsBusy`立即设置为 false ，然后再执行。假设您想从另一个函数中检索 ' 操作的结果，如下所示：`RunWorkerASync``RunWorkerCompleted``BackgroundWorker`

```
Dim MyResult = "Not Set"

Sub Foo()

    DoSomeStuff()

    RunWorkerASync()

    'Wait for worker
    While Worker.IsBusy
        Wait()
    End While

    'Use result
    'This won't work because MyResult hasn't been
    'set yet by the RunWorkerCompleted handler
    'Will Print "Not Set", unless, by a timing quirk,
    'RunWorkerCompleted has enough time to execute
    'Before using its result.
    Print MyResult
End Sub

Sub RunWorkerASync()
    e.Result = "Result has been set"
End Sub

Sub RunWorkerCompleted()
    MyResult = e.Result 'Worker's output
End Sub 
```

# javascript - 创建一个没有缓动效果的垂直轮播

> ID：13771152
> 
> 赞同：1
> 
> 时间：2012-12-07T21:21:18.470
> 
> 标签：javascript, jquery, html, jquery-plugins

我尝试了不同的垂直轮播，jquery Cycle 似乎是唯一适用于所有浏览器的解决方案。我想创建一个在每次转换结束时不会暂停的垂直轮播。jquery Cycle 的文档没有那么广泛。我将如何设置轮播以使最后没有过渡。我已经尝试了最可能没有它的工作。

jsfiddle [http://jsfiddle.net/Xxahy/24/](http://jsfiddle.net/Xxahy/24/)

JS代码...

```
$(document).ready(function() {
  $('.cycle-streams').cycle({
    fx: 'scrollVert',
    continuous: 1,
    speed: 3000,
    delay: 0,
    easing: 0
  });
});​ 
```

HTML 代码...

```
<div class="cycle-streams">
   <div class="item">
     <div class="span12">
       stream 1
     </div>
     <div class="span12">
       stream 2
     </div>
     <div class="span12">
       stream 3
     </div>
     <div class="span12">
       stream 4
     </div>
     <div class="span12">
       stream 5
     </div>
   </div>                        
   <div class="item">
     <div class="span12">
       stream 6
     </div>
     <div class="span12">
       stream 7
     </div>
     <div class="span12">
       stream 8
     </div>
     <div class="span12">
       stream 9
     </div>
     <div class="span12">
       stream 10
     </div>
   </div>                    
     <div class="item">
       <div class="span12">
         stream 11
       </div>
       <div class="span12">
         stream 12
       </div>
       <div class="span12">
         stream 13
       </div>
       <div class="span12">
         stream 14
       </div>
       <div class="span12">
         stream 15
       </div>
     </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:24:19.067

```
$(document).ready(function() {
    $('.cycle-streams').cycle({
        fx: 'scrollVert',
        continuous: 1,
        speed: 3000,
        delay: 0,
        easing: 'linear' // this is the correct setting
    });
});​ 
```

# c# - 使用 c# 导出到 Excel 后出现十进制值 0.00 的问题

> ID：13771156
> 
> 赞同：1
> 
> 时间：2012-12-07T21:21:28.080
> 
> 标签：c#, string, export-to-csv

我有一些导出到excel的数据。在下面的代码中，当 rowText = 4.0321 时，它在 excel 中显示相同的 4.0321。但是如果 rowText = 0.00 它在 excel 报告中只显示 0。我需要它是 0.00。任何帮助，将不胜感激..

```
 var rowText = base.GetColumnText(column, columnValue);

                _writer.Write(string.Format("\"{0}\"", rowText.Replace("\"", "\"\"")));

                _writer.Write(i < columns.Count - 1 ? "," : Environment.NewLine);

    protected string GetColumnText(ViewColumn column, object value)
    {
        string text = string.Empty;

        if (value != null && value != DBNull.Value)
        {
            var dataFormatString = column.DataFormatString;                

            if (string.IsNullOrEmpty(dataFormatString))
            {
                switch (column.ColumnType)
                {
                    case ViewColumnType.Date:
                        {
                            dataFormatString = "{0:MM/dd/yyyy}";
                        }
                        break;
                    case ViewColumnType.Numeric:
                        {
                            dataFormatString = "{0:N2}";
                        }
                        break;
                    case ViewColumnType.Account:
                        {
                            string AccountNo = value.ToString().Trim();

                            if (AccountNo.Length == 8)
                                return string.Concat(AccountNo.Substring(0, 4), "-", AccountNo.Substring(4));
                        }
                        break;
                }
            }

            text = !string.IsNullOrEmpty(dataFormatString) ? string.Format(dataFormatString, value) : value.ToString();

        }
        return text;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:49:53.740

如果您右键单击要导出到的单元格并选择“格式化单元格...”它会提供什么数字类型？如果它是“通用”，那么为什么没有小数位是有道理的。如果您选择“数字”，那么您可以定义将显示多少个小数位。这是你要找的吗？

# javascript - Javascript确认弹出框打开太晚

> ID：13771157
> 
> 赞同：0
> 
> 时间：2012-12-07T21:21:33.853
> 
> 标签：javascript, asp.net, vb.net

我有一个确认操作 Javascript 弹出框，当用户单击 gridview 中的操作按钮时，它应该打开。我的问题是，直到整个子代码执行完毕并且需要分配值的变量才获得分配的值，直到为时已晚，弹出框才会打开。如何让弹出窗口打开并允许用户在 sub 结束之前填充 DelUserConfirm 变量？在此先感谢您的帮助！我的代码如下：

Sub Gridview_RowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)

```
 Dim currentcommand As String = e.CommandName
    Dim index As Integer = Convert.ToInt32(e.CommandArgument)
    Dim cell As GridViewRow = grdUsers.Rows(index)
    Dim currUserID As String = grdUsers.Rows(index).Cells(0).Text

    If e.CommandName = "DelUser" Then

        Dim DelUserConfirm As String = Request.Form("confirm_value")

        If (Not ClientScript.IsStartupScriptRegistered("alert")) Then

            Page.ClientScript.RegisterStartupScript(GetType(action), _
                "alert", "Confirm()", True)

        End If

        If DelUserConfirm = "Yes" Then

            cmd.Connection = conn
            conn.Open()
            cmd.CommandText = "DELETE FROM USERS WHERE USER_NAME = '" + currUserID + "'"
            cmd.ExecuteNonQuery()
            conn.Close()
            dtUsers.Rows(index).Delete()
            grdUsers.DataSource = dtUsers
            grdUsers.DataBind()

        End If

        Exit Sub

    End If

    If e.CommandName = "EditUser" Then

        Session("EditUserPerms") = dtUsers(index)
        Session("UserPerms") = dtUserPerms
        Response.Redirect("AddEditUser.aspx")

    End If

End Sub 
```

添加网络表单代码...

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="UserAdmin.aspx.vb" Inherits="_3rd_party_data_reporting_tool.UserAdmin" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title></title>
</head>
<script type = "text/javascript">
function Confirm() {
var confirm_value = document.createElement("INPUT");
confirm_value.type = "hidden";
confirm_value.name = "confirm_value";
if (confirm("Are you sure you want to Delete this user?")) {
confirm_value.value = "Yes";
} else {
confirm_value.value = "No";
}
document.forms[0].appendChild(confirm_value);
}
</script>
<body>
<form id="UserAdmin" runat="server">
<asp:Image ID="imgTRLogo" runat="server" Height="120px" ImageUrl="~/TR_Logo.bmp" Width="120px" style="z-index: 1; left: 5px; top: 5px; position: absolute" />
<asp:Label ID="lblTitle1" runat="server" Text="CA - Global Product Operations" Font-Bold="True" Font-Names="Arial Black" Font-Size="XX-Large" style="z-index: 1; left: 170px; top: 20px; position: absolute"></asp:Label>
<asp:Label ID="lblTitle2" runat="server" Text="Productivity Tools" Font-Bold="True" Font-Names="Arial Black" Font-Size="XX-Large" style="z-index: 1; left: 282px; top: 60px; position: absolute"></asp:Label>
<asp:Label ID="lblTitle3" runat="server" Text="User Administration Panel" Font-Bold="True" Font-Names="Arial Black" Font-Size="Large" style="z-index: 1; left: 312px; top: 135px; position: absolute"></asp:Label>
<asp:GridView ID="grdUsers" runat="server" Font-Names="Arial" autogeneratecolumns="false" style="z-index: 1; left: 28px; top: 184px; position: absolute; height: 144px; width: 731px" OnRowCommand="Gridview_RowCommand" >
<Columns>
<asp:BoundField DataField="USER_NAME" HeaderText="User ID"/>
<asp:BoundField DataField="PW" HeaderText="Password"/>
<asp:BoundField DataField="FIRST_NAME" HeaderText="First Name"/>
<asp:BoundField DataField="LAST_NAME" HeaderText="Last Name"/>
<asp:BoundField DataField="EMAIL" HeaderText="E-mail Address"/>
<asp:BoundField DataField="SAFE_ID" HeaderText="SAFE ID"/>
<asp:BoundField DataField="THIRDPTYRPT" HeaderText="3rd Party Report"/>
<asp:BoundField DataField="EDTK" HeaderText="eDTK Tool"/>
<asp:BoundField DataField="ADMIN" HeaderText="Admin"/>
<asp:buttonfield ButtonType="Button" CommandName="EditUser" HeaderText="Edit User?" Text="Edit" />
<asp:buttonfield ButtonType="Button" CommandName="DelUser" HeaderText="Delete User?" Text="Delete" />
</Columns>
</asp:GridView>
<asp:Button ID="cmdAddNewUser" runat="server" style="z-index: 1; left: 28px; top: 149px; position: absolute; width: 132px" Text="Add New User" />
<asp:Button ID="cmdExit" runat="server" style="position: absolute; top: 22px; left: 729px; height: 45px; width: 54px" Text="Exit" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:01:09.210

请更改`ButtonField`为 `TemplateField`.

[在 GridView 中删除 ButtonField、TemplateField 和 CommandField 的删除确认](http://www.dotnetspeaks.net/post/Delete-Confirmation-for-Delete-ButtonField-TemplateField-and-CommandField-in-a-GridView.aspx)

```
<asp:GridView ID="grdUsers" runat="server" ... >
<Columns>
    ...
   <asp:TemplateField>
     <ItemTemplate>
       <asp:Button ID="Button1" runat="server" 
         CommandName="DelUser" 
         OnClientClick="return confirm('Are you sure you want to delete?');" 
         Text="Delete" />
     </ItemTemplate>
   </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

# php - 使用 php 和 shorty 对表格进行排序

> ID：13771158
> 
> 赞同：1
> 
> 时间：2012-12-07T21:21:49.667
> 
> 标签：php, mysql, smarty, formatting

我正在使用 php 和 smarty 的商业网站上做一些工作。现在我们有一张发票被发送到订单部门，需要一种方法来系统地查找货架上的物品。

我已经设置了所有字段，但我不知道如何使用 php 对 html 表行进行排序。它使用 for each 语句为每个订购的项目创建一行。

有没有办法用 php 和 smarty 的组合来做到这一点？我还是新手，任何帮助将不胜感激。

我找到了查询。

```
$products = func_query("SELECT $sql_tbl[order_details].itemid, $sql_tbl[products].*, $sql_tbl[products_lng_current].*, $sql_tbl[extra_field_values].value, $sql_tbl[order_details].*, IF($sql_tbl[products].productid IS NULL, 'Y', '') as is_deleted, IF($sql_tbl[order_details].product = '', $sql_tbl[products_lng_current].product, $sql_tbl[order_details].product) as product $fields FROM $sql_tbl[order_details] LEFT JOIN $sql_tbl[products] ON $sql_tbl[order_details].productid = $sql_tbl[products].productid LEFT JOIN $sql_tbl[products_lng_current] ON $sql_tbl[products_lng_current].productid=$sql_tbl[products].productid $join WHERE $sql_tbl[order_details].orderid='$orderid' ORDER BY $sql_tbl[extra_field_values].value desc); 
```

我添加了订单，但是，它打破了页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:24:27.480

这取决于您如何检索数据。如果它来自数据库，您应该能够`ORDER BY`在查询中包含该子句，一切都会很好。

如果做不到这一点，你提到你在一个`foreach`循环中输出，所以数据可能已经从外部源存储在一个数组中。在这种情况下，您可以尝试阅读 PHP 函数[`usort()`](http://php.net/manual/en/function.usort.php)

查看 jQuery 插件“DataTables”： [http ://datatables.net/](http://datatables.net/)

最后，如果您绝对没有其他选择，只能使用 DOM 执行此操作，您可能需要查看“DataTables”。它是一个 jQuery 插件，允许`<table>`使用自定义算法对元素进行排序（您可以指定用户可以按哪些字段进行排序等）。将其集成到现有的 Smarty 模板中也不应该太痛苦。

# django - GeoDjango -- syncdb 或南迁移错误

> ID：13771162
> 
> 赞同：0
> 
> 时间：2012-12-07T21:22:06.130
> 
> 标签：django, postgis, django-south, geodjango

有人见过这个错误吗？我的迁移失败:(

```
django.db.utils.DatabaseError: function addgeometrycolumn(unknown, unknown, integer, unknown, integer) is not unique
LINE 1: SELECT AddGeometryColumn('maps_mapfeature', 'geom', 4326, 'M...
               ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts. 
```

这是模型

```
class MapFeature(models.Model):
    source = models.ForeignKey('MapLayer')
    label = models.CharField(max_length=255, blank=True)
    muni = models.CharField(max_length=255, blank=True)
    description = models.TextField(blank=True)
    geom = models.MultiPolygonField(srid=4326)
    objects = models.GeoManager()

    def __unicode__(self):
        return self.label 
```

# azure - 如果 DDOS 攻击攻击 Windows Azure 网站会发生什么？

> ID：13771176
> 
> 赞同：23
> 
> 时间：2012-12-07T21:22:44.973
> 
> 标签：azure, ddos

我只是想将网站从 VPS 移动到 Windows Azure 网站。在进行负载测试后，我不小心关闭了我的测试网站，每天使用大约 30MB 的带宽。

这让我想知道如果我的网站突然受到 DDOS 攻击会发生什么？我很确定一切都会立即超出每日和每小时的限制，更糟糕的是，将所有用户重定向到天蓝色的超限通知。

有什么可以做的吗？我知道在我将所有图像都放在 CDN 上后，将难以达到每日带宽限制，但我担心如果出现峰值或其他情况会发生什么。

很抱歉这样一个没有头尾的答案。我希望你们能理解。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T21:35:24.160

Windows Azure 具有内置的负载平衡器，可以避免大多数（如果不是全部）DOS 类型的攻击。事实是，微软对他们的负载均衡器如何防止恶意攻击的细节非常沉默（他们应该这样做）。

在云中托管应用程序的另一个好处是，您可以在负载过重（恶意或其他方式）时利用自动缩放功能，这样您的网站就不会出现故障。

您可能需要查看[开发 Windows Azure 应用程序的安全最佳实践](http://www.microsoft.com/en-us/download/details.aspx?id=7253)文档以获取更多信息。

# c# - 如何在另一个类中传递不同的类对象并期望它们会得到类似的对待？

> ID：13771179
> 
> 赞同：2
> 
> 时间：2012-12-07T21:23:03.637
> 
> 标签：c#, winforms, class, parameter-passing

首先，很难为我的问题找到一个合适的标题......为此提前抱歉。

我面临**C# .NET**的问题。我将尝试通过一个临时示例来简化它。

我有三个班级：

书电影_dvd游戏_dvd

它们中的每一个都具有相同的基本属性，例如：id 和 name。然而，我们可以假设它们具有其他不同的属性和不同的方法来成为同一个类。他们当然可以成为父类的子类，以使其变得更好。

然后我创建每个类的列表来定义我的书籍、电影和游戏集合。它们的 id 属性当然与 List 的键匹配，并且当我在 List 中插入每个项目时，我给它们一个适当的名称（它们的标题）。

我有一个带有 3 个按钮的主 winForm：“显示图书收藏”、“显示电影收藏”和“显示游戏收藏”。用户可以单击其中一个，然后出现另一个窗口并在 ListBox（或其他任何内容）内显示传递的集合。

现在这是我的问题。

现在我正在创建三个独立（但几乎相同）的 WinForm 来显示每个集合（书籍、电影、游戏）的内容，我认为这太过分了。我真正想做的是创建一个窗口来显示任何这些集合的内容。问题是，如果我在新 winForm 的参数中传递一个书本对象/类，另一方面它期望是一个书本对象。

如何使用单个 Winform 来显示这些不同对象中的每一个的标题，而无需一遍又一遍地复制 WinForm 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:30:35.023

如果您的表单显示 3 个类之间的“常见内容” - ID、标题、评论等 - 那么您有两种选择：

1.  设计一个基类，其中包含其他每个类都可以派生的这些公共属性，每个都可能重载和/或修改基的功能。该表单接受基类的列表。

2.  设计一个定义基本属性的接口并让您的每个类实现它。该表单接受实现该接口的对象列表。

这两种解决方案也有点面向未来——您可以定义第 4 种相应地继承或实现的东西，您的表单也不会更明智！

我更喜欢＃2，因为它非常适合测试 - 您可以模拟任何实现您的接口的类并将其传递给您的表单以进行测试。无需使用已知书籍/dvd/游戏数据进行测试！

我不喜欢铸造解决方案，因为它们易碎且难以扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T21:25:08.313

如果这些对象中的每一个都具有相同的属性（例如`Title`），那么您将创建一个具有这些属性的基类。然后，您可以在派生类中创建更具体的属性。

```
public abstract class MediaBase
{
    public String Title { get; set; }
    public Int32 Id { get; set; }
}

public sealed class Book : MediaBase
{
    public String Author { get; set; }
    public Int32 Pages { get; set; }
}

public sealed class MovieDvd : MediaBase
{
    public String Director { get; set; }
    public Int32 Length { get; set; }
}

public sealed class GameDvd : MediaBase
{
    public Int32 NumberOfPlayers { get; set; }
} 
```

或者您可以将参数作为对象传递，然后将它们转换回它们的实际类型。

```
if (parameter is book)
{
    book theBook = ((book)parameter);
}
else if (parameter is movie_dvd)
{
    movie_dvd movieDvd = ((movie_dvd)parameter);
}
else if (parameter is game_dvd)
{
    game_dvd gameDvd = ((game_dvd)parameter);
} 
```

# cryptography - Android中“AES”密码的含义？

> ID：13771186
> 
> 赞同：8
> 
> 时间：2012-12-07T19:36:54.100
> 
> 标签：cryptography, android, aes

我继承了使用以下密码的 Android 代码：

```
ks = new SecretKeySpec(key, "AES");
ciph = Cipher.getInstance("AES"); 
```

由于只给出了“AES”，我不知道密钥大小、模式和填充是什么。我查看了 Bouncy Castle* 文档，但找不到描述“AES”实例的位置。如果可以的话，我想使用更明确的实例描述（例如“AES/ECB/PCKS5Padding”）。

有谁知道这个实例的键大小、模式和填充是什么？

谢谢！

*我已经读到 Android 使用 Bouncy Castle 作为其默认提供程序，但我还没有发现任何官方的，所以我可能在这里做出无益的假设。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T00:17:52.853

Java 默认为`"AES/ECB/PKCS5Padding"`默认情况下，如 Oracle 文档所指定。

> 如果未指定模式或填充，则使用模式和填充方案的特定于提供程序的默认值。例如，SunJCE 提供程序使用 ECB 作为默认模式，PKCS5Padding 作为 DES、DES-EDE 和 Blowfish 密码的默认填充方案。这意味着对于 SunJCE 提供程序：
> 
> ```
> Cipher c1 = Cipher.getInstance("DES/ECB/PKCS5Padding"); and
> Cipher c1 = Cipher.getInstance("DES"); are equivalent statements. 
> ```

请参阅Oracle 文档中的[创建密码对象](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)。

* * *

我刚刚自己使用调试器进行了检查。至少对于 Android 4.0，Android 似乎默认使用相同的加密和填充模式（如预期的那样）。使用单个 ( -valued) 字节*的默认提供程序*`00`的结果是一个填充的纯文本，其值`000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F`以十六进制表示。这显然是 PKCS#5 填充，或者更准确地说是 PKCS#7 填充，它与16 字节块密码的[PKCS#5 填充相同。](https://crypto.stackexchange.com/q/9043/1172)

* * *

原则上，任何提供者都可以具有与默认“SunJCE”提供者不同的默认值。但是，这会破坏假设使用 Oracle / OpenJDK 默认值的应用程序。

与其让您的同事程序员一头雾水，强烈建议您指定整个字符串，包括模式和填充，并且**不要依赖**加密算法的默认值（`SecureRandom`通常不建议指定算法的地方除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:14:56.120

据我所知，在 java 中它代表`AES`in `ECB`mode `without padding` 。我认为它在android上是一样的。我建议您在 android 上运行一个简单的测试加密某些内容并`AES/ECB/NoPadding`使用 Java 或 android 对其进行解密。另外，如果您在此应用程序中没有看到任何 IV，那就是另一个，请指向这个方向。

# prolog - 任务计划 sicstus prolog

> ID：13771188
> 
> 赞同：3
> 
> 时间：2012-12-07T21:23:33.947
> 
> 标签：prolog, clpfd, sicstus-prolog

我最近开始了 sicstus prolog，并有这个作业要使用 CLP（约束逻辑编程）来解决，请帮助我理解问题，我应该寻找什么以及我做错了什么。所以，

某建筑公司：

*   为了获得原材料，卑诗省必须租用一辆卡车需要 6 天才能运送 25 吨原材料，而且每天的费用为 80 美元。
*   在地面上建造需要 15 吨原材料，需要 10 天，每层成本 150 美元。
*   建造地下需要 20 吨原材料，需要 23 天（由于挖掘），成本 150 美元，至少需要一台挖掘机，每天增加 75 美元，挖掘时间减少 3 天（最多两台机器一次时间）。(1->20天,2->17天)
*   如果租用一台起重机，所有建造时间将减少 25%，费用为每天 120 美元。
*   电力团队只有在建筑物建成 75% 时才能推进，需要 5 天，每层成本 200 美元。当大楼完工后，还需要一周时间才能完成所有楼层的连接。

BC 假装要建造一个地上 150 层和地下 15 层的摩天大楼，该建筑物必须如何组织才能使利润最大化并缩短所需时间？

将问题定义为约束满足问题并使用 CLP 解决它，以便可以使用不同的参数（或多或少的楼层，或调整团队的清醒时间）来解决它。

到目前为止我所拥有的：

```
:- use_module(library(clpfd)).

start(Fdigs,Floors,Vars):-
    length(Vars,5),

    %S -> start, E -> end, D -> duration
    %t -> transport, e -> excavating, f -> floor (build)

    Vars=[St,Et,Se,Ee,Cost],

    Se #>= Et,
    Ee #= Se + 10,
    Et #>=6,
    Cost #>= Ee * 80,  %transport cost since it starts at 0 Ee will be the days needed

    domain(Vars,0,2000),
    construct(0,Fdigs,Floors,Vars),
    labeling([minimize(Cost)],Vars).

construct(Stock,0,Floors,Vars).

construct(Stock,Fdigs,Floors,[St,Et,Se,Ee,Cost]):-
    Tasks=[
    task(St,6,Et,0,1),  %transport task
        task(Se,10,Ee,5,2)  %dig task, 5 because I'm digging all then building (20-15)
                %10 because build is 10 so dig is 10
    ],
    cumulative(Tasks,[limit(Stock)]),
    Nfdigs is Fdigs - 1,
    Nstock is Stock + 25,
    construct(Nstock,Nfdigs,[Et,_Et,Ee,_Ee,Cost]). 
```

它当然不起作用，因为我不能将累积用于需要 5 个资源的任务，并且 0 个资源的限制是我无法解决的许多问题中的第一个......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:59:13.403

到目前为止，这是我想出的，似乎要容易得多，并让我得到预期的结果：

```
:- use_module(library(clpfd)).

start(Floors,Fdigs,Vars):-
    length(Vars,20),
    domain(Vars,0,999999999),   %all vars must be bounded
    Vars=[                      % S-start,D-duration,E-end,C-cost (money)
    St,Dt,Et,Ct,                % transport vars
    Se,De,Ee,Ce,                % excavation vars
    Sb,Db,Eb,Cb,                % building vars
    Sc,Dc,Ec,Cc,                % electricity vars
    Machines,Crane,Cost,Time],
    Machines in 1..2,
    Crane in 0..1,
    St is 0,
    Dt is ceiling(((Floors*15)+(Fdigs*20))/25)*6,
    Et is Dt,
    Ct is 80 * Dt,
    Se is 0,
    De #= (13 - (Machines*3)) * Fdigs,
    Ee #= De,
    Ce #= De * (75*Machines),
    Sb #>=6 #/\ Sb #>= Ee,
    Db #= ((Fdigs * (10-(Crane*3))) + (Floors * (10-(Crane*3)))),
    Eb #= Sb + Db,
    Cb #= (Fdigs + Floors) * 150 + (Crane*Db*120),
    Sc #= (Eb * 75 / 100),
    Dc #>= (Eb * 25 / 100) + 5 #/\ Dc #=((Floors + Fdigs) * 5) + 5,
    Ec #= Sc + Dc #/\ Ec #> Eb,
    Cc is (Fdigs + Floors) * 200,

    %Costs
    Cost #= (Ct + Ce + Cb + Cc),

    %Times (will be end time of final & nonoverlaping task)
    Time #= Ec,

    %labeling([minimize(Cost)],Vars),       % - cost, + time
    labeling([maximize(Cost)],Vars),        % + cost, - time
    writeVars(Vars).

writeVars([St,Dt,Et,Ct,Se,De,Ee,Ce,Sb,Db,Eb,Cb,Sc,Dc,Ec,Cc,Machines,Crane,Cost,Time]):-
    write('1 '),write(St),write(' '),write(Dt),write(' '),write(Et),write(' '),write(Ct),write('\n'),
    write('2 '),write(Se),write(' '),write(De),write(' '),write(Ee),write(' '),write(Ce),write('\n'),
    write('3 '),write(Sb),write(' '),write(Db),write(' '),write(Eb),write(' '),write(Cb),write('\n'),
    write('4 '),write(Sc),write(' '),write(Dc),write(' '),write(Ec),write(' '),write(Cc),write('\n'),
    write('Cost: '),write(Cost),write('\n'),
    write('Time: '),write(Time),write('\n'),
    write('Crane: '),write(Crane),write('\n'),
    write('Machines: '),write(Machines).
    %write('4 ',St,' ', Dt,' ', Et,' ', Ct),
    %write('5 ',St,' ', Dt,' ', Et,' ', Ct). 
```

非常欢迎任何可以改善我的答案的建议和评论。

# scala - IntelliJ IDEA 12 中的 Playframework 插件不起作用

> ID：13771192
> 
> 赞同：7
> 
> 时间：2012-12-07T21:23:56.007
> 
> 标签：scala, playframework, intellij-idea, playframework-2.0

我刚刚在 Ubuntu 下下载并安装了 IntelliJ IDEA 12（终极版），我寄希望于 IJ 与 Scala 和 Play Framework 的紧密集成。

我在四处搜索时安装了功能齐全的 Play `/home/ryan/play-2.0.4`，似乎`play idea`只需在命令行中对 play 项目执行 a 并在 IntelliJ 中打开该项目即可。

但是，如果我这样做：我什至无法验证 Playframework 插件是否处于活动状态/正常运行。Play 配置文件或模板中没有语法高亮显示，下拉菜单中绝对没有 Playframework 选项。如果我右键单击项目，选择“添加框架支持...”并且“播放”甚至不在列表中，我也不能在 IDE 中从头开始创建一个新的“播放”项目（不确定是否甚至支持）。

如果单击`File -> Settings -> Play Configuration`，我将主目录和工作目录设置为：`/home/ryan/play-2.0.4`。我应该注意，我在 Eclipse 下使用 Play 没有任何问题（除了没有与 Eclipse 的任何 Play 集成 --- 因此我在 IJ 中尝试这个的原因）。如果我不知道更好：我会宣布 IJ 12 的 Play 支持是一个悲惨的失败，但考虑到所有帖子都表明 Play 2.0 与 IJ 12 的集成“非常容易”——也许我缺少什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T21:46:14.593

很可能您需要下载和/或安装`Play 2.0 Support`插件 + 依赖项（很可能您需要在`Browse repositories`部分中找到它，它与捆绑的插件不同`Playframework support`！）

我可以向您保证，我只是坐着玩 Idea 12 中的 Play 2.0，并获得了新的支持，而且效果非常好。

转到`Settings`>`Plugins`部分并检查您是否有提到的插件的最新版本，如果没有被某些错误（即缺少依赖项）阻止，请尝试解决所有缺少的依赖项，重新启动 IDE，然后编译（或运行）您的应用程序至少一次。

我还没有测试到最后，但我可以看到支持方面取得了很大进展，尤其是在模板和控制器方面。`routes`文件允许轻松导航到目标操作，但我可以看到 conf 文件中没有语法突出显示。

现在甚至可以从菜单中运行和调试 Play 应用程序。

一般来说，如果您启用 Play 插件，您肯定会看到它:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:31:06.870

您不必安装额外的插件。您只需运行一次应用程序，然后 IntelliJ 会突出显示所有内容等。

看这里：[http ://devnet.jetbrains.net/message/5473435?tstart=0#5473435](http://devnet.jetbrains.net/message/5473435?tstart=0#5473435)

# vb.net - 编写没有头文件的二进制文件

> ID：13771195
> 
> 赞同：0
> 
> 时间：2012-12-07T21:23:59.580
> 
> 标签：vb.net

我经常使用二进制文件来存储可以通过多种编程语言读取的数据。同样在 VB.Net 中。当 VB6 创建二进制文件时，它只包含二进制数据，但是当 VB.NET 创建它时，如下例所示：

```
 Dim fs As New FileStream(setup_file, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite)
    Dim bf As New BinaryFormatter()
    bf.Serialize(fs, myStruct)
    fs.Close() 
```

...在数据之前，系统会创建一些带有数据描述的标题。这可能会在以不同的编程语言和/或不同的操作系统读取此类文件时出现问题，主要是在查找标头长度方面。

我可以以“oldfashion”方式制作相同的文件，并且那些不包含任何“header”，只是纯数据，但 VB.NET 程序员经常说他们强烈推荐新样式。
这是类似于“老式”VB6 的方式：

```
 Dim fnum = FreeFile()
    FileOpen(fnum, setup_file, OpenMode.Binary, OpenAccess.ReadWrite, OpenShare.Shared, Len(myStruct))
    FilePut(fnum, myStruct, 1)
    FileClose(fnum) 
```

问题是：

我可以使用 FileStream、BinaryFormatter 和序列化创建/写入二进制文件，但避免在包含数据的文件中创建标头以及如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:38:59.930

.NET 反序列化程序负责实例化它正在反序列化的对象，因此它需要知道它正在读取的数据的类型，这就是序列化程序将其放在那里的原因。如果你不想这样，你必须编写自己的代码。

VB.NET 程序员经常说他们推荐的是好的输入，但前提是你控制了双方——读者和作者。如果读取您编写的数据的读者有限制（例如，在 Mac 上运行的 Objective C 代码），那么您决定该文件中的内容。

看看[`System.IO.BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)和[`System.IO.BinaryReader`](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)。它们允许您编写除了您决定放在那里的内容之外没有“标题”的二进制文件。字节顺序之类的问题仍然可能存在，但二进制序列化无论如何也无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:46:16.417

序列化对象意味着它在原始数据之外添加了一些额外的信息，以便稍后可以将其反序列化到同一个对象类中。如果您打算在其他平台上读取数据，这不是您想要的。

[BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.write.aspx)将带您到那里，但不是像 FilePut 这样方便的调用。

# javascript - 小写除 AND 以外的所有单词

> ID：13771197
> 
> 赞同：5
> 
> 时间：2012-12-07T21:24:04.070
> 
> 标签：javascript, regex

我正在寻找将短语中不属于 AND 的所有字母小写的最快方法。我想留`AND`在原来的情况下，不管它是否`and`改变`AND`。

例如，`barack AND obama`应该测试等于`Barack AND Obama`但不是`barack and obama`。（注意和的大小写差异）

这是一种方法，但我想知道是否有更短的方法或更确切地说是避免迭代器的方法：

```
var str = 'Barack AND Obama'; // should be barack AND obama after
str = str.split(/\s+/g).map(function (s) {
    return s.toLowerCase() != 'and' ? s.toLowerCase() : s;
}).join(' '); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T21:28:12.417

您可以使用否定的前瞻来小写每个不完全 AND 的单词：

```
str = str.replace(/\b(?!AND).+?\b/g, function(s) {
  return s.toLowerCase();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:44:54.850

我认为 pimvdb 有最优雅的解决方案，但只是为了多样化，这里是另一个。

```
var str = 'Barack AND Obama';
var arr = str.split(' ');
for(var i=0;i<arr.length;i++){
  if (arr[i] != 'AND'){
    arr[i] = arr[i].toLowerCase();
  }
}
var ans = arr.join(" "); 
```

它没有那么优雅，但我发现它更易于阅读，并且如果将来需要，也更容易修改，即添加到不应小写的单词列表中。

# c# - 如何一起使用停靠窗口和非停靠窗口

> ID：13771198
> 
> 赞同：0
> 
> 时间：2012-12-07T21:24:09.800
> 
> 标签：c#, wpf, winforms, window, dock

我需要 UI 的某些部分来表现得像停靠窗口，但不是全部。我想知道这是否可以将两者混合在一起。说，我希望将 3 个数据网格固定在它们的位置，但我希望设置窗口停靠在右侧或主窗口中间，当鼠标悬停在其上时，它将展开并显示所有设置，当鼠标移开时，设置窗口只是折叠。但我不希望其他 3 个数据网格移动或折叠。我希望数据网格正常显示，而不是停靠文档。
谢谢

编辑

我的项目同时使用 WPF 和 WinForms。所以我正在寻找两者的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T06:25:43.503

只需将设置停靠在右侧并监听 MouseEnter 和 MouseLeave 事件。在 MouseLeave 时将设置的宽度更改为零或非常小的值，然后在 MouseEnter 时恢复为全宽。

调整停靠控件的大小表现得非常好。

# jquery - 在jquery中分配唯一ID

> ID：13771200
> 
> 赞同：1
> 
> 时间：2012-12-07T21:24:13.307
> 
> 标签：jquery

嘿，我正在尝试为我的每个表单元素分配一个唯一的 ID 号

[这是我在http://jsfiddle.net/d0okie0612/22cTn/](http://jsfiddle.net/d0okie0612/22cTn/)上工作的小提琴

继承人输出的 HTML

```
<div id="container">
  <div id="top_form">
    <form>
      Street: <input class="street" name="[][street]" id="form_element" type="text">               <br><br>
      City: <input class="city" name="[][city]" id="form_element" type="text">
      <select>
        <option value=" ">State</option>
        <option value="ca">CA</option>
        <option value="az">AZ</option>
        <option value="de">DE</option>
       </select>
       Zip: <input name="[][zipcode]" type="text"><br /><br />
     </form>
    </div>
  </div>

    <br />
       <a href="#" id="awsomeButton">+ Add Loction</a>
    <br />
     <br />
   <button id="submit_btn">Submit</button> 
```

​</p>

这是jquery

```
var tpl = ""
+ "<div id='location_div_<%= id %>'><h1>My Location #<%= id %></h1></div>";

var newId = new Date().getTime();
var template = _.template(tpl);
var compiled = template({id: newId});

var addedForm = "<div id='added_form'>"
+ "<a href='#' class='close_btn'>x</a>"
+ "Street: <input name='[][street]' type='text'>"
+ "<br /><br />"
+ "City: <input name='[][city]' type='text'>"
+ "<select>"
+ "<option value=' '>State</option>"
+ "</select>"
+ "Zip: <input name='[][zipcode]' type='text'>"
+ "</div>"

$('#awsomeButton').on('click', 
function(e){
    $(addedForm).hide().appendTo('form').fadeIn('slow');

});

$('.close_btn').live('click', function(event){
event.preventDefault();
$(this).parents('div#added_form:first').fadeOut('slow', function(){
    $(this).remove();    

});
}); 
```

所以基本上我想要它，所以它说的地方 `name='[][street]'`

当我检查元素时，我希望从 newID 生成的唯一 ID 号显示在 [] 中。

所以例如

第一个位置 `[0]street[0]state`等

第二个位置 `[1]street[1]state`等

我是 jQuery 的新手，所以如果你可以编辑小提琴来实现这一点，或者你可以像六岁的孩子一样向我解释，那就太好了。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:42:06.113

您可以使用 replace(regex,newvalue) 这样做

```
var x = 0
$('#awsomeButton').on('click', function(e) {
    $(addedForm.replace(/[[]]/g, '[' + (x++) + ']')).hide().appendTo('form').fadeIn('slow');
}); 
```

在自动增加数字时它将替换为`[]`的位置。`[x]`

[http://jsfiddle.net/HDUvG/](http://jsfiddle.net/HDUvG/)

如果这对您来说太难理解，您可以进行拆分/加入 - 它会在任何有 a 的地方拆分成数组，`[]`并将其重新加入一个带有括号的字符串`'[' + (x++) + ']'`

```
$(addedForm.split('[]').join('[' + (x++) + ']')).hide().appendTo('form').fadeIn('slow'); 
```

[http://jsfiddle.net/ffDEg/](http://jsfiddle.net/ffDEg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:54:54.593

您可以通过这样的方式为表单元素分配唯一 ID。

```
$(document).ready(function () {
    var elements = $('form input'),
    i;
    for (i = 0; i < elements.length; i++) {
        elements[i].id = "input-" + i;
    }
}); 
```

这给出了“#input-0”、“#input-1”等的值。

您可以通过使用示例进行测试来验证这是否有效，例如：

```
$('#input-1').css('background-color', 'red'); 
```

# logging - 从函数式编程范式中记录

> ID：13771203
> 
> 赞同：26
> 
> 时间：2012-12-07T21:24:30.933
> 
> 标签：logging, functional-programming, purely-functional

我更喜欢尽可能地坚持功能范式，当我的大脑准备好迎接挑战时，我会尽可能接近纯粹的功能范式。我尽可能使用 F#。通常，我会使用 VB.NET 或 C#（或 VBA，当我真的很不走运时）。所以我的语言让我远离了函数式方法。

从历史上看，在我得到结果之前，我一直忽略记录和与用户的沟通——让用户等待。现在我正在尝试实现状态栏的日志记录和/或更新。这很容易，因为我的语言允许我随时写入标准输出。但从纯粹的功能角度来看，如何将有关功能内部发生的信息泄露给外部世界？在计算过程中记录或与用户通信是否与纯粹的功能方法相反？

我确信在 Haskell 中会使用 Monad。使用其他语言时怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T22:19:45.337

让我们看一下 Haskell 的一元解决方案。日志记录背后的想法是，我们的计算有一个额外的方法，可以在某处“输出”写入一条消息。有很多方法可以表示这样的计算，但最通用的方法之一是创建一个 monad：

```
class (Monad m) => MonadWriter w m | m -> w where
    tell   :: w -> m () 
```

类型`w`代表消息，功能`tell`是将消息“发送”到单子（效果完整）计算中。

笔记：

*   Haskell`MonadWriter`实际上更丰富，它包含允许检查和修改的函数`w`，但我们暂时先把它放在一边。
*   该`| m -> w`部分对于解释并不重要，它只是意味着`w`对于给定的`m`.

最常用的实现是`Writer`，它基本上只是一对。其中一个元素是计算的结果，另一个元素是一系列书面消息。（实际上它并不是一个真正的序列，它更通用 - 一个幺半群，它定义了将多个消息组合成一个的操作。）您可以通过查看[Writer 模块](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Writer-Lazy.html)来检查 Haskell 的解决方案。然而，它更普遍地使用`WriterT`monad 转换器编写，所以如果你不是 monad 粉丝，它可能很难阅读。同样的事情也可以在其他函数式语言中完成，[例如在 Scala 中查看这个示例](http://blog.tmorris.net/the-writer-monad-using-scala-example/)。

但是上述类型类还有其他可能的、更多面向副作用的（仍然有效的）实现。我们可以定义`tell`将消息发送到某个外部接收器，例如标准输出、文件等。例如：

```
{-# LANGUAGE FunctionalDependencies, TypeSynonymInstances, FlexibleInstances #-}

instance MonadWriter String IO where
    tell = putStrLn 
```

在这里，我们说它`IO`可以用作将`String`s 写入标准输出的日志记录工具。（这只是一个简化的例子，一个完整的实现可能会有一个 monad 转换器，可以`tell`为任何`IO`基于 - 的 monad 添加功能。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T22:08:59.117

我是函数式编程的新手，但这是 Scala 的尝试：

```
object FunctionalLogging {

  type Result = Int

  class ResultWithLogging(val log: List[String], val result: Result) {}

  def functionWithLogging(log: List[String], arg: String): ResultWithLogging = {
    def function(arg: String): Result = arg.length

    new ResultWithLogging(log :+ ("Calling function(" + arg +")"), function(arg))
  }

  val result = functionWithLogging(List(), "Hello world!")

  // -- Pure functional code ends here --
  println("Result = " + result.result)
  println("Log = " + result.log)
} 
```

它的功能性在于没有副作用，但显然日志是函数参数和返回的一部分，因此它不是很优雅或实用。

在我看来，根据定义，日志记录是一种可取的副作用，所以如果你同意我的定义，问题是如何将非功能性代码与功能性代码隔离开来。在实践中，我可能会从一个 Scala 对象开始（可能太像一个单例 - 一个 trait 可能是更好的 Scala），或者一个演员来积累日志消息并做任何需要用它们做的事情。

这是一个更务实的观点：[Logging in Scala](https://stackoverflow.com/questions/978252/logging-in-scala)

**编辑**

这个问题谈到了 Haskell Monads 和 IO：[除了 Monads 之外，还有哪些其他方式可以用纯函数式语言处理状态？](https://stackoverflow.com/questions/13536761/what-other-ways-can-state-be-handled-in-a-pure-functional-language-besides-with)

# z3 - Solver.model() 返回的不必要的 Var()

> ID：13771206
> 
> 赞同：3
> 
> 时间：2012-12-07T21:25:03.137
> 
> 标签：z3

`Solver.model()`有时会返回一个看似不需要的赋值`Var()`，而我（也许天真地）期望`Solver.model()`总是为每个变量返回一个具体的值。例如：

```
#!/usr/bin/python
import z3

x, y = z3.Ints('x y')
a = z3.Array('a', z3.IntSort(), z3.IntSort())
e = z3.Not(z3.Exists([x], z3.And(x != y, a[x] == a[y])))

solver = z3.Solver()
solver.add(e)
print solver.check()
print solver.model() 
```

生产

```
sat
[k!1 = 0,
 a = [else -> k!5!7(k!6(Var(0)))],
 y = 1,
 k!5 = [else -> k!5!7(k!6(Var(0)))],
 k!5!7 = [1 -> 3, else -> 2],
 k!6 = [1 -> 1, else -> 0]] 
```

这里发生了什么？`Var(0)`in`a`的“else”是指数组的第 0 个参数，是什么`a`意思`a[i] = k!5!7[k!6[i]]`？是否有可能从 Z3 中获得具体令人满意的任务`a`，例如`a = [1 -> 1, else -> 0]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:13:39.943

这是预期的输出。函数和数组的解释应该被视为函数定义。请记住，断言

```
z3.Not(z3.Exists([x], z3.And(x != y, a[x] == a[y]))) 
```

本质上是一个全称量词。对于无量词问题，Z3 确实会生成您帖子中建议的“具体分配”。但是，这种表示方式不够表达。在消息的末尾，我附上了一个无法使用“具体分配”进行编码的示例。以下帖子提供了有关如何在 Z3 中对模型进行编码的其他信息。

*   [了解 z3 模型](https://stackoverflow.com/questions/12899521/understanding-the-z3-model)

[您可以在http://rise4fun.com/Z3/tutorial/guide](http://rise4fun.com/Z3/tutorial/guide)找到有关 Z3 使用的编码的更多详细信息

这是一个生成无法使用“具体”分配编码的模型的示例（可在[http://rise4fun.com/Z3Py/eggh](http://rise4fun.com/Z3Py/eggh)在线获得）：

```
a = Array('a', IntSort(), IntSort())
i, j = Ints('i j')
solver = Solver()
x, y = Ints('x y')
solver.add(ForAll([x, y], Implies(x <= y, a[x] <= a[y])))
solver.add(a[i] != a[j])
print solver.check()
print solver.model() 
```

# javascript - 应用于未触发的数组元素的函数

> ID：13771207
> 
> 赞同：0
> 
> 时间：2012-12-07T21:25:04.777
> 
> 标签：javascript, mobile

我整个下午都被这个问题难住了；我正在尝试将 Google 的快速按钮教程应用于导航上的“后退”按钮：[https](https://developers.google.com/mobile/articles/fast_buttons) ://developers.google.com/mobile/articles/fast_buttons 。每个部分都有一个后退按钮，因为它是这样构建的：

```
<ul class="menu">
    <li class="category">
        <a class="back"></a>
            <li class="product">
    </li>
    <li class="category">
    etc... 
```

菜单的滑入和滑出带有 css3 过渡。这就是让我发疯的原因；我存储所有后退按钮，然后将它们发送到一个数组，并遍历每个调用 FastButton 函数的按钮。

```
var back = document.getElementsByClassName('back');

back = Array.prototype.slice.call(back);

for (var i = 0; i < back.length; i++) {
            new FastButton(back[i], function(){
                $(back[i]).trigger('click');
            });
        }

('li.back').click(function(){
    doStuff();
}); 
```

click fn 永远不会触发；我可以看到已应用和删除的 tap-highlight，如果我输入警报，每个按钮都会触发它。奇怪的部分？调用数组的特定索引可以正常工作：

```
new FastButton(back[0], function(){
            $(back[0]).trigger('click');
        }); 
```

为了可维护性，我宁愿不那样做，这样导航就可以在路上修改而不必担心。任何见解都非常感谢 - 我想我一直盯着错误太久了，错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:52:23.373

您似乎是关闭问题的受害者。当你使用 jQuery 时，也许只是重写你的循环：

```
$.each(back,function(i,item){
    new FastButton(item, function(){
        $(item).trigger('click');
    });
}); 
```

# css - 避免由浮动边距引起的巨大空间

> ID：13771208
> 
> 赞同：1
> 
> 时间：2012-12-07T21:25:06.670
> 
> 标签：css, css-float, margin

考虑下面的例子：

[http://jsfiddle.net/swLyX/](http://jsfiddle.net/swLyX/)

使用闲置的 HTML：

```
<div id="container">
  <p> Some text aligned the same as the below set of images
  <div class="inner"></div>
  <div class="inner"></div>
  <div class="inner"></div>
  <p> And some other text
</div> 
```

和 CSS：

```
#container {
    width: 299px;
    background-color: #c55;
}
.inner {
    float: left;
    margin: 20px 40px 20px 0;
    width: 60px;
    height: 60px;
    background-color: black;
}
p{
    clear: both;
} 
```

手头的问题是第二个 div 右侧的大空白空间，因为第三个 div 的边距将其扔到下一行。

有一个包含一些文本的红色 div 和三个较小的 div 浮动到左侧，顶部、左侧和底部有一个边距，以使其他元素保持一定距离。在真实环境中，假设红色 div 是博客文章的容器，并根据其他内容调整边距，三个黑色 div 是图像。

重要的是文本和第一个黑色 div 都应该水平对齐到左边。有没有办法让第三个 div 的右边距不把它扔到第二行而不改变 div 之间的边距大小或破坏元素的对齐方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:35:45.417

如果目标是让任意数量的项目适应任意数量的父容器宽度，那么仅使用 CSS 就没有简单的方法来确定什么是“最右侧”元素。

我建议这样做：

[http://jsbin.com/uvegef/1/edit](http://jsbin.com/uvegef/1/edit)

html:

```
<div id="outerWrapper">
  <div id="wrapper">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
  </div>
</div> 
```

CSS：

```
#outerWrapper {
  background: pink;
  width: 89px;
  overflow: hidden;
}

#wrapper {
  width: 110%;
}

.item {
  float: left;
  background: blue;
  width: 20px;
  height: 20px;
  margin-right: 10px;
  margin-bottom: 10px;
} 
```

上面的示例有一个 89px 的外部父包装器，它比 3 个项目所需的 90px + 它们的边距少 1px。

这个想法是给包装器一个溢出`hidden`然后添加一个宽度比父级宽的内部包装器*来*接受“额外的右边距”。根据情况进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:35:08.030

您可以使用 :last-of-type 伪元素。将此添加到您的 CSS 中。

```
.inner:last-of-type {
    margin-right: 0;
} 
```

见这里：http: [//jsfiddle.net/swLyX/5/](http://jsfiddle.net/swLyX/5/)

# jquery - 在 jquery 之后插入

> ID：13771214
> 
> 赞同：0
> 
> 时间：2012-12-07T21:25:43.280
> 
> 标签：jquery, insert, datatables

您好我试图在初始化后渲染数据表并为链接添加新行

这是我的代码的一部分，“插入之后”似乎不起作用。

```
 $('#table thead tr').each(function() {
    nCloneTh.insertAfter(this.childNodes[5]);
}); 
```

有谁能够帮助我？我想在我的第 5 列之后插入 nCloneTh(th element)。

谢谢帮助

我的整个代码看起来像这样

```
$(document).ready(function() {

var nCloneTh = document.createElement('th');
var nCloneTd = document.createElement('td');

nCloneTh.innerHTML = '<img src="style/img/icon_trash.png" id="imglink" title="Entfernen" class="center">';

$('#table thead tr').each(function() {
    nCloneTh.insertAfter(this.childNodes[5]);
});

$('#table tbody tr').each(function() {
    nCloneTd.insertAfter(this.childNodes[5]);
});

$('#table tfoot th').each(function() {
    nCloneTh.insertAfter(this.childNodes[5]);
});

dataTable = $('#table').dataTable({
    'bProcessing':true,
    'bServerSide':true,
    'sAjaxSource':'feedback.php',
    "oLanguage": {
        "sUrl": "language/dataTables.german.txt"
    },'aoColumnDefs':[{'bSearchable': false, 'bVisible':false, 'aTargets':[0]},
        {'bSortable': false, 'aTargets':[5]},
        { 'fnRender': function(o,val){return '<a>tss</a>';}, 'aTargets': [ 6]}
    ]
});

dataTable.fnClearTable( 0 );
dataTable.fnDraw(false); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:29:10.330

数组是 0 索引的，因此您尝试在示例中的**第六个之后插入。** `<th>`另外，我注意到这`nCloneTh`是一个 DOM 元素，而不是 jQuery 元素。尝试以下操作：

```
$('#table thead tr').each(function() {  
    $(nCloneTh).insertAfter($(this).children('th')[4]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:39:57.883

nCloneTh 需要包装在一个 jQuery 对象中才能使用 inserAfter，如下所示：

```
var nCloneTh = $('<th></th>'); 
```

这是您可能尝试完成的示例 - [http://jsfiddle.net/jmsessink/d3bLp/](http://jsfiddle.net/jmsessink/d3bLp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:46:12.437

您可以在数据表初始化中使用 aoColumns 来添加额外的列。`null`对每个现有列使用 a ，然后使用 mRender 函数定义附加列。

```
dataTable = $('#table').dataTable({
    'bProcessing':true,
    'bServerSide':true,
    'sAjaxSource':'feedback.php',
    "oLanguage": {
        "sUrl": "language/dataTables.german.txt"
    },
    'aoColumnDefs':[
        {'bSearchable': false, 'bVisible':false, 'aTargets':[0]},
        {'bSortable': false, 'aTargets':[5]},
        { 'fnRender': function(o,val){return '<a>tss</a>';}, 'aTargets': [ 6]}
    ],
    aoColumns: [ null,
                 null,
                 null,
      { "sName": "ID",
        "bSearchable": false,
        "bSortable": false,
        "fnRender": function (oObj) {
           return "<img src='style/img/icon_trash.png' id='imglink' title='Entfernen'" +
                  " class='center'>";
        }
      }
    ]
}); 
```

[http://www.datatables.net/usage/columns](http://www.datatables.net/usage/columns)

# android - 错误：无法注册推送通知（Android 的 Appcelerator pushwoosh 模块）

> ID：13771217
> 
> 赞同：0
> 
> 时间：2012-12-07T21:25:50.920
> 
> 标签：android, titanium, push-notification, appcelerator

使用 pushwoosh android appcelerator 模块时，我不断收到“无法注册推送通知”。（在 iOS 上工作得很好！）

这是我的踪迹

```
[INFO][ActivityManager(   60)] Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.omgmediagroup.attProAm/.ComOmgmediagroupAttproamActivity }
[INFO][ActivityManager(   60)] Start proc com.omgmediagroup.attProAm for activity com.omgmediagroup.attProAm/.ComOmgmediagroupAttproamActivity: pid=255 uid=10041 gids={3003, 1015}
[INFO][TiApplication(  255)] (main) [0,0] checkpoint, app created.
[DEBUG][dalvikvm(  255)] GC_FOR_MALLOC freed 2660 objects / 309088 bytes in 63ms
[INFO][TiApplication(  255)] (main) [494,494] Titanium 2.1.4 (2012/11/09 12:47 51f2c64)
[DEBUG][dalvikvm(  255)] GC_FOR_MALLOC freed 2402 objects / 434296 bytes in 64ms
[INFO][TiApplication(  255)] (main) [368,862] Titanium Javascript runtime: v8
[DEBUG][dalvikvm(  255)] Trying to load lib /data/data/com.omgmediagroup.attProAm/lib/libstlport_shared.so 0x44ede650
[DEBUG][dalvikvm(  255)] Added shared lib /data/data/com.omgmediagroup.attProAm/lib/libstlport_shared.so 0x44ede650
[DEBUG][dalvikvm(  255)] No JNI_OnLoad found in /data/data/com.omgmediagroup.attProAm/lib/libstlport_shared.so 0x44ede650, skipping init
[DEBUG][dalvikvm(  255)] Trying to load lib /data/data/com.omgmediagroup.attProAm/lib/libkroll-v8.so 0x44ede650
[DEBUG][PushnotificationsModule(  255)] (main) [69,931] inside onAppCreate
[INFO][TiRootActivity(  255)] (main) [0,0] checkpoint, on root activity create, savedInstanceState: null
[DEBUG][dalvikvm(  255)] Added shared lib /data/data/com.omgmediagroup.attProAm/lib/libkroll-v8.so 0x44ede650
[ERROR][TiApplication(  255)] (KrollRuntimeThread) [1615,1615] APP PROXY: ti.modules.titanium.app.AppModule@44f06eb8
[WARN][V8Object(  255)] Runtime disposed, cannot set property 'userAgent'
[DEBUG][dalvikvm(  255)] Trying to load lib /data/data/com.omgmediagroup.attProAm/lib/libcom.arellomobie.push.so 0x44ede650
[DEBUG][dalvikvm(  255)] Added shared lib /data/data/com.omgmediagroup.attProAm/lib/libcom.arellomobie.push.so 0x44ede650
[DEBUG][dalvikvm(  255)] No JNI_OnLoad found in /data/data/com.omgmediagroup.attProAm/lib/libcom.arellomobie.push.so 0x44ede650, skipping init
[DEBUG][dalvikvm(  255)] Trying to load lib /data/data/com.omgmediagroup.attProAm/lib/libti.admob.so 0x44ede650
[DEBUG][dalvikvm(  255)] Added shared lib /data/data/com.omgmediagroup.attProAm/lib/libti.admob.so 0x44ede650
[DEBUG][dalvikvm(  255)] No JNI_OnLoad found in /data/data/com.omgmediagroup.attProAm/lib/libti.admob.so 0x44ede650, skipping init
[INFO][ActivityManager(   60)] Starting activity: Intent { cmp=com.omgmediagroup.attProAm/ti.modules.titanium.ui.TiTabActivity (has extras) }
[INFO][TiAPI   (  255)] module is => [object Object]
[DEBUG][dalvikvm(  255)] GC_FOR_MALLOC freed 4127 objects / 477808 bytes in 68ms
[WARN][System.err(  255)] java.lang.IllegalStateException: No receiver for package com.omgmediagroup.attProAm
[WARN][System.err(  255)]   at com.google.android.gcm.GCMRegistrar.checkManifest(GCMRegistrar.java:143)
[WARN][System.err(  255)]   at com.arellomobile.android.push.PushManager.onStartup(PushManager.java:102)
[WARN][System.err(  255)]   at com.arellomobile.android.push.PushManager.onStartup(PushManager.java:87)
[WARN][System.err(  255)]   at com.arellomobile.push.PushnotificationsModule.pushNotificationsRegister(PushnotificationsModule.java:79)
[WARN][System.err(  255)]   at org.appcelerator.kroll.runtime.v8.V8Runtime.nativeRunModule(Native Method)
[WARN][System.err(  255)]   at org.appcelerator.kroll.runtime.v8.V8Runtime.doRunModule(V8Runtime.java:146)
[WARN][System.err(  255)]   at org.appcelerator.kroll.KrollRuntime.handleMessage(KrollRuntime.java:287)
[WARN][System.err(  255)]   at org.appcelerator.kroll.runtime.v8.V8Runtime.handleMessage(V8Runtime.java:172)
[WARN][System.err(  255)]   at android.os.Handler.dispatchMessage(Handler.java:95)
[WARN][System.err(  255)]   at android.os.Looper.loop(Looper.java:123)
[WARN][System.err(  255)]   at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109)
[ERROR][TiAPI   (  255)] Error during registration: Failed to register for push notifications 
```

仍然是新的，所以我不太明白这个日志告诉我什么......显然模块和编译器存在某种冲突（我认为？）

我已经按照教程进行了 T 并且似乎找不到有关该错误的更多信息。有没有人在野外获得 pushwoosh android 模块以供 appcelerator 工作？将不胜感激任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:55:10.243

令人尴尬的是，platforms/android 目录下的 AndroidManifest.xml 文件中出现了用户错误。

然而，说明（http://www.pushwoosh.com/programming-push-notification/appcelerator-titanium-android-push-notification/）有些模糊 - 而不是将摘录放在标签下确保你把它在现有标签内。

前任：

```
<application>
snippet here
</application> 
```

# c++ - 这是什么意思（C++）：“警告：指向算术中使用的函数的指针 [Wpointer-arith]”？

> ID：13771219
> 
> 赞同：1
> 
> 时间：2012-12-07T21:26:00.083
> 
> 标签：c++, arrays, compiler-warnings

我正在制作一个 C++ 程序，但我有一个不断出现的警告（我正在使用 g++）：

```
warning: pointer to a function used in arithmetic [Wpointer-arith] 
```

我想知道：这个警告信息到底是什么意思？我的编译器试图告诉我问题是什么（一般而言），这样我才能更好地理解我做错了什么？

谷歌搜索为人们的代码中的特定问题提供了特定的解决方案，但从来没有告诉我这个警告信息到底想表达什么。

我只是在学习数组，我正在尝试制作一个打印“Hello, world!”的程序 一次一个字符，每个字符单独存储在一个数组中，并在 for 循环中泵入 cout。

这是代码：

```
#include <iostream>
using namespace std;

int ARRAY_ELEMENTS = 14;

void greeting()
{
    char greeting[ARRAY_ELEMENTS];
    greeting[0] = 'H';
    greeting[1] = 'e';
    greeting[2] = 'l';
    greeting[3] = 'l';
    greeting[4] = 'o';
    greeting[5] = ',';
    greeting[6] = ' ';
    greeting[7] = 'w';
    greeting[8] = 'o';
    greeting[9] = 'r';
    greeting[10] = 'l';
    greeting[11] = 'd';
    greeting[12] = '!';
    greeting[13] = '\0';
}
int main(int argc, char* argv[])
{
    greeting();
    for (ARRAY_ELEMENTS = 0; 
        ARRAY_ELEMENTS <= 13;
        ARRAY_ELEMENTS++)
    {
        cout << greeting[ARRAY_ELEMENTS] << endl;
    }
    return 0;
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:30:08.770

在这条线上：

```
cout << greeting[ARRAY_ELEMENTS] << endl; 
```

您指的是您将其视为数组的*函数。*`greeting`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T21:29:34.973

greeting 是一个函数，但是您尝试将其打印出来，就像它是一个 char 数组一样。函数 greeting() 包含一个同名的 char 数组，这无助于代码的清晰度——这可能是您感到困惑的地方。如果您给事物起不同的名称，那么问题出在哪里会更明显。

你需要让你的 greeting() 函数返回一些东西，而不是仅仅填写一个本地数组，它不能从函数外部访问（并且无论如何都会在函数返回时被丢弃）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T21:33:54.573

该声明`greeting[ARRAY_ELEMENTS]`没有做你认为它做的事情。

从内部`main`名称`greeting`是指功能`void greeting()`。您似乎正在尝试打印`char greeting[ARRAY_ELEMENTS]`变量。但是您不能这样做，`main`因为该名称只能从内部看到`void greeting()`。

您应该重命名函数或变量，以确保不会再次发生这种混淆，除此之外，您还有两个选择：要么在函数内部循环，`greeting`要么将指针传递给必须设置问候语的缓冲区功能。这可能比你目前的水平高一点，但你最终必须学会如何去做，所以没有像现在这样的时间。

```
const int ARRAY_ELEMENTS = 14;

void make_greeting(char *greeting)
{
    greeting[0] = 'H';
    greeting[1] = 'e';
    ...
}

int main(int argc, char **argv)
{
    char buffer[ARRAY_ELEMENTS];

    make_greeting(buffer);

    std::cout << "The greeting is \"" << buffer << "\"" << std::endl;

    for(int i = 0; i != ARRAY_ELEMENTS; i++)
        std::cout << "At position " << i << ": '" << buffer[i] << "'" << std::endl;
} 
```

当然，无论如何，您可能应该只使用 std::string 而不是字符缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:30:31.450

我认为这里的问题是这段代码

```
greeting[ARRAY_ELEMENTS] 
```

不做你认为它做的事。这试图索引到`ARRAY_ELEMENTS`function 的位置`greeting`，这不是一个函数。您得到的错误是由编译器认为您试图将`greeting`其视为数组引起的，这不是您想要做的。

没有直接的解决方法，但您可以考虑执行以下操作之一：

1.  更改`greeting`为实际上是一个数组。
2.  `greeting`创建一个接收索引并生成适当数组值的函数。

希望这可以帮助！

# .net - Visual Basic FtpWebRequest 下载文件？

> ID：13771222
> 
> 赞同：1
> 
> 时间：2012-12-07T21:26:06.293
> 
> 标签：.net, vb.net, ftp, ftpwebrequest

我有的：

```
Dim ftploader As System.Net.FtpWebRequest =
    DirectCast(System.Net.WebRequest.Create(
        "ftp://ftp.cabbageee.host-ed.me/nim/Vardelatestmessage.txt"),
        System.Net.FtpWebRequest)

ftploader.Credentials =
    New System.Net.NetworkCredential("Insert Username here", "Insert password here") 
```

我正在尝试将此`.txt`文件下载到我的`c:`驱动器。我已经建立了连接，那么如何保存该`.txt`文件？另外，如何上传文件？我已经尝试过`My.Computer.Network.DownloadFile`，但只能下载/上传一次，因为我不知道如何摆脱这种连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-04T07:57:22.633

使用 VB.NET 从 FTP 服务器下载二进制文件的最简单方法是使用[`WebClient.DownloadFile`](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.downloadfile)：

```
Dim client As WebClient = New WebClient()
client.Credentials = New NetworkCredential("username", "password")
client.DownloadFile(
    "ftp://ftp.example.com/remote/path/file.zip", "C:\local\path\file.zip") 
```

如果您需要更大的控制，`WebClient`但不提供（如[TLS/SSL 加密](https://stackoverflow.com/q/4331665/850848#56888555)、ascii/文本传输模式、[恢复传输](https://stackoverflow.com/q/6331133/850848#66154869)等），请使用[`FtpWebRequest`](https://docs.microsoft.com/en-us/dotnet/api/system.net.ftpwebrequest). 简单的方法是将 FTP 响应流复制到`FileStream`使用[`Stream.CopyTo`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto)：

```
Dim request As FtpWebRequest =
    WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip")
request.Credentials = New NetworkCredential("username", "password")
request.Method = WebRequestMethods.Ftp.DownloadFile

Using ftpStream As Stream = request.GetResponse().GetResponseStream(),
      fileStream As Stream = File.Create("C:\local\path\file.zip")
    ftpStream.CopyTo(fileStream)
End Using 
```

如果您需要监控下载进度，您必须自己按块复制内容：

```
Dim request As FtpWebRequest =
    WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip")
request.Credentials = New NetworkCredential("username", "password")
request.Method = WebRequestMethods.Ftp.DownloadFile

Using ftpStream As Stream = request.GetResponse().GetResponseStream(),
      fileStream As Stream = File.Create("C:\local\path\file.zip")
    Dim buffer As Byte() = New Byte(10240 - 1) {}
    Dim read As Integer
    Do
        read = ftpStream.Read(buffer, 0, buffer.Length)
        If read > 0 Then
            fileStream.Write(buffer, 0, read)
            Console.WriteLine("Downloaded {0} bytes", fileStream.Position)
        End If
    Loop While read > 0
End Using 
```

有关 GUI 进度 (WinForms `ProgressBar`)，请参阅 (C#):
[FtpWebRequest FTP download with ProgressBar](https://stackoverflow.com/q/45269263/850848)

如果要从远程文件夹下载所有文件，请参阅
[如何使用 VB.NET 从 FTP 下载目录](https://stackoverflow.com/q/22626766/850848)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:24:02.853

您需要调用[GetResponse](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.getresponse.aspx)，然后您将有权访问包含您的内容的响应流，然后您可以将该流写入您要保存的文本文件中。

这里似乎有一个[非常充实的示例](http://www.codeproject.com/Articles/17202/Simple-FTP-demo-application-using-C-Net-2-0)（它在 C# 中，但我认为应该很容易翻译成 VB）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T23:27:06.793

试试这个：

```
 Dim myWebClient As New System.Net.WebClient
 Dim webfilename As String = "http://www.whatever.com/example.txt"
 Dim file As New System.IO.StreamReader(myWebClient.OpenRead(webfilename))

 gCurrentDataFileContents = file.ReadToEnd()

 file.Close()
 file.Dispose()
 myWebClient.Dispose() 
```

# c# - 构建后消失的用户控件

> ID：13771225
> 
> 赞同：1
> 
> 时间：2012-12-07T21:26:13.687
> 
> 标签：c#, silverlight, xaml, user-controls, caliburn.micro

**问题：**我有一个新制作的 UserControl，在父 Grid 中有几个 Telerik 控件，以便能够在整个解决方案中使用它。听起来很简单吧？我创建了 UserControl，让我们调用 My.Project.Controls.Tool 类，然后我尝试使用命名空间调用另一个视图，`xmlns:Controls="clr-namespace:My.Project.Controls;assembly=My.Project.GlobalUserControlDump"`然后通过从方便的花花公子 intellisense 轻松选择将其设置在视图中。

正如预期的那样，我的 UserControl 出现在设计器的单独视图中就好了。所以我采取下一个正常步骤并构建它......一旦构建完成（它做得很好，没有按预期报告错误），小虫子消失了！xaml 当然仍然在视图中，但是它从设计器中消失了，并且它没有出现在构建的解决方案中？

困惑我回去，对 UserControl 进行快速更改，它会重新出现在设计器中。好的，我认为这一定是侥幸，所以我再次构建它......它又从设计师和构建的解决方案中消失了？

现在我可以继续可靠地重现这种情况。对 UserControl 稍作改动，它会重新出现在设计器中……然后构建它，它又会消失！

有人可以解释一下这个难题吗？使用 Caliburn Micro 在 SL（浏览器内外，但内置浏览器）中运行。任何对这个谜团的洞察力当然都非常感谢，希望另一双眼睛能抓住我的愚蠢。干杯!

为了澄清，这是用户控件中与[前一个问题直接相关的内容](https://stackoverflow.com/questions/13574512/raddatetimepicker-mask-for-data-entry)。

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
    mc:Ignorable="d"
    x:Class="My.Project.Controls.DatePicker">

    <Grid Width="90">
           <telerik:RadDateTimePicker 
                                      InputMode="DatePicker" 
                                      SelectedDate="{Binding SelectedDate, Mode=TwoWay}"/>
           <telerik:RadMaskedDateTimeInput
                                           IsClearButtonVisible="False"
                                           FormatString="{}{0:M/d/yy}"
                                           SelectionOnFocus="SelectAll"
                                           Value="{Binding SelectedDate, Mode=TwoWay}"/>
    </Grid>
</UserControl> 
```

然后我将直接在视图上调用它（它将位于 GlobalUserControlDump 项目中，如名称空间所示），一旦将名称空间添加到视图中，它就会按预期在智能感知中显示良好；

```
<UserControl 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro" 
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
    x:Class="My.Project.Views.RandomView" 
    xmlns:Controls="clr-namespace:My.Project.Controls;assembly=My.Project.GlobalUserControlDump"
    mc:Ignorable="d">

    <Grid>
            <Controls:DatePicker />
    </Grid>
 </UserControl> 
```

然后我通过暴露我需要的属性；

```
namespace My
{
    public partial class DatePicker : UserControl
    {
        public static readonly DependencyProperty SelectedDateProperty =
            DependencyProperty.Register("SelectedDate", typeof(DateTime), typeof(DatePicker), new PropertyMetadata(null));

        public DatePicker()
        {
            // Required to initialize variables
            DataContext = this;
        }

        public DateTime SelectedDate
        {
            get { return (DateTime)GetValue(SelectedDateProperty); }
            set { SetValue(SelectedDateProperty, value); }
        }
    }
} 
```

感谢您的查看，我目前仍然很难过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:31:06.297

您在 UserControl 的构造函数中缺少对 InitializeComponent() 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:54:11.553

我相信您发布的代码中的名称空间不正确。

通过`new PropertyMetadata(null));`更改属性，未注册回调。没有它，我相信绑定将不起作用。您要做的是绑定到用户控件上的属性，并且当绑定值更改时，您希望设置`RadDateTimePicker`控件中包含的值。

xml:

```
 <Grid Width="90">
      <telerik:RadDateTimePicker x:Name="MyRadDateTimePicker" InputMode="DatePicker" />
    <telerik:RadMaskedDateTimeInput x:Name="MyRadMaskedDateTimeInput"
                                    IsClearButtonVisible="False"
                                    FormatString="{}{0:M/d/yy}"
                                    SelectionOnFocus="SelectAll" />
    </Grid>
</UserControl> 
```

后面的代码：

```
 using System;
using System.Windows;

namespace SO
{
    public partial class MyDatePicker
    {
        public MyDatePicker()
        {
            InitializeComponent();
        }

        public const string SelectedDatePropertyName = "SelectedDate";

        public DateTime SelectedDate
        {
            get { return (DateTime)GetValue(SelectedDateProperty); }
            set { SetValue(SelectedDateProperty, value); }
        }

        public static readonly DependencyProperty SelectedDateProperty = DependencyProperty.Register(
            SelectedDatePropertyName,
            typeof(DateTime),
            typeof(MyDatePicker),
            new PropertyMetadata(DateTime.Now, OnSelectedDatePropertyChanged));

        private static void OnSelectedDatePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ((MyDatePicker)d).MyRadDateTimePicker.SelectedDate = (DateTime) e.NewValue;
            ((MyDatePicker)d).MyRadMaskedDateTimeInput.Value = (DateTime)e.NewValue;
        }
    }
} 
```

# haskell - 在 lhs2TeX 中使用 {-" ... "-} 内联 TeX 注释时出现 Pdftex 错误

> ID：13771228
> 
> 赞同：1
> 
> 时间：2012-12-07T21:26:14.607
> 
> 标签：haskell, literate-programming

我的 .lhs 文件中有以下代码块，它使用内联 TeX 注释：

```
\begin{code} 
main = print 0
{-"$\langle$Link$\rangle$"-}
\end{code} 
```

但是，使用 lhs2TeX 编译后，在编译生成的 .tex 文件时出现以下错误：

```
! Missing $ inserted.
<inserted text>
$
l.269 \end{hscode}
\resethooks
I've inserted a begin-math/end-math symbol since I think
you left one out. Proceed, with fingers crossed.
! LaTeX Error: Bad math environment delimiter.
See the LaTeX manual or LaTeX Companion for explanation.
Type H <return> for immediate help.
...
l.269 \end{hscode}
\resethooks
Your command was ignored.
Type I <command> <return> to replace it with another command,
or <return> to continue without it.
! Missing $ inserted.
<inserted text>
$
l.269 \end{hscode}
\resethooks
I've inserted a begin-math/end-math symbol since I think
you left one out. Proceed, with fingers crossed.
! LaTeX Error: Bad math environment delimiter.
See the LaTeX manual or LaTeX Companion for explanation.
Type H <return> for immediate help.
...
l.269 \end{hscode}
\resethooks
Your command was ignored.
Type I <command> <return> to replace it with another command,
or <return> to continue without it.
! Missing $ inserted.
<inserted text>
$
l.269 \end{hscode}
\resethooks
I've inserted a begin-math/end-math symbol since I think
you left one out. Proceed, with fingers crossed.
! LaTeX Error: Bad math environment delimiter.
See the LaTeX manual or LaTeX Companion for explanation.
Type H <return> for immediate help.
...
l.269 \end{hscode}
\resethooks
Your command was ignored. 
```

当我删除内联注释中的“标记时，错误消失了。有人知道出了什么问题吗？

PS 这是 lhs2TeX 生成的 .tex 文件：

```
\documentclass{article}%% ODER: format ==         = "\mathrel{==}"
%% ODER: format /=         = "\neq "
%
%
\makeatletter
\@ifundefined{lhs2tex.lhs2tex.sty.read}%
  {\@namedef{lhs2tex.lhs2tex.sty.read}{}%
   \newcommand\SkipToFmtEnd{}%
   \newcommand\EndFmtInput{}%
   \long\def\SkipToFmtEnd#1\EndFmtInput{}%
  }\SkipToFmtEnd

\newcommand\ReadOnlyOnce[1]{\@ifundefined{#1}{\@namedef{#1}{}}\SkipToFmtEnd}
\usepackage{amstext}
\usepackage{amssymb}
\usepackage{stmaryrd}
\DeclareFontFamily{OT1}{cmtex}{}
\DeclareFontShape{OT1}{cmtex}{m}{n}
  {<5><6><7><8>cmtex8
   <9>cmtex9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmtex10}{}
\DeclareFontShape{OT1}{cmtex}{m}{it}
  {<-> ssub * cmtt/m/it}{}
\newcommand{\texfamily}{\fontfamily{cmtex}\selectfont}
\DeclareFontShape{OT1}{cmtt}{bx}{n}
  {<5><6><7><8>cmtt8
   <9>cmbtt9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmbtt10}{}
\DeclareFontShape{OT1}{cmtex}{bx}{n}
  {<-> ssub * cmtt/bx/n}{}
\newcommand{\tex}[1]{\text{\texfamily#1}}   % NEU

\newcommand{\Sp}{\hskip.33334em\relax}

\newcommand{\Conid}[1]{\mathit{#1}}
\newcommand{\Varid}[1]{\mathit{#1}}
\newcommand{\anonymous}{\kern0.06em \vbox{\hrule\@width.5em}}
\newcommand{\plus}{\mathbin{+\!\!\!+}}
\newcommand{\bind}{\mathbin{>\!\!\!>\mkern-6.7mu=}}
\newcommand{\rbind}{\mathbin{=\mkern-6.7mu<\!\!\!<}}% suggested by Neil Mitchell
\newcommand{\sequ}{\mathbin{>\!\!\!>}}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}
\usepackage{polytable}

%mathindent has to be defined
\@ifundefined{mathindent}%
  {\newdimen\mathindent\mathindent\leftmargini}%
  {}%

\def\resethooks{%
  \global\let\SaveRestoreHook\empty
  \global\let\ColumnHook\empty}
\newcommand*{\savecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\savecolumns[#1]}}
\newcommand*{\restorecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\restorecolumns[#1]}}
\newcommand*{\aligncolumn}[2]%
  {\g@addto@macro\ColumnHook{\column{#1}{#2}}}

\resethooks

\newcommand{\onelinecommentchars}{\quad-{}- }
\newcommand{\commentbeginchars}{\enskip\{-}
\newcommand{\commentendchars}{-\}\enskip}

\newcommand{\visiblecomments}{%
  \let\onelinecomment=\onelinecommentchars
  \let\commentbegin=\commentbeginchars
  \let\commentend=\commentendchars}

\newcommand{\invisiblecomments}{%
  \let\onelinecomment=\empty
  \let\commentbegin=\empty
  \let\commentend=\empty}

\visiblecomments

\newlength{\blanklineskip}
\setlength{\blanklineskip}{0.66084ex}

\newcommand{\hsindent}[1]{\quad}% default is fixed indentation
\let\hspre\empty
\let\hspost\empty
\newcommand{\NB}{\textbf{NB}}
\newcommand{\Todo}[1]{$\langle$\textbf{To do:}~#1$\rangle$}

\EndFmtInput
\makeatother
%
%
%
%
%
%
% This package provides two environments suitable to take the place
% of hscode, called "plainhscode" and "arrayhscode". 
%
% The plain environment surrounds each code block by vertical space,
% and it uses \abovedisplayskip and \belowdisplayskip to get spacing
% similar to formulas. Note that if these dimensions are changed,
% the spacing around displayed math formulas changes as well.
% All code is indented using \leftskip.
%
% Changed 19.08.2004 to reflect changes in colorcode. Should work with
% CodeGroup.sty.
%
\ReadOnlyOnce{polycode.fmt}%
\makeatletter

\newcommand{\hsnewpar}[1]%
  {{\parskip=0pt\parindent=0pt\par\vskip #1\noindent}}

% can be used, for instance, to redefine the code size, by setting the
% command to \small or something alike
\newcommand{\hscodestyle}{}

% The command \sethscode can be used to switch the code formatting
% behaviour by mapping the hscode environment in the subst directive
% to a new LaTeX environment.

\newcommand{\sethscode}[1]%
  {\expandafter\let\expandafter\hscode\csname #1\endcsname
   \expandafter\let\expandafter\endhscode\csname end#1\endcsname}

% "compatibility" mode restores the non-polycode.fmt layout.

\newenvironment{compathscode}%
  {\par\noindent
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \let\hspre\(\let\hspost\)%
   \pboxed}%
  {\endpboxed\)%
   \par\noindent
   \ignorespacesafterend}

\newcommand{\compaths}{\sethscode{compathscode}}

% "plain" mode is the proposed default.
% It should now work with \centering.
% This required some changes. The old version
% is still available for reference as oldplainhscode.

\newenvironment{plainhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\hspre\(\let\hspost\)%
   \pboxed}%
  {\endpboxed%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

\newenvironment{oldplainhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \(\pboxed}%
  {\endpboxed\)%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

% Here, we make plainhscode the default environment.

\newcommand{\plainhs}{\sethscode{plainhscode}}
\newcommand{\oldplainhs}{\sethscode{oldplainhscode}}
\plainhs

% The arrayhscode is like plain, but makes use of polytable's
% parray environment which disallows page breaks in code blocks.

\newenvironment{arrayhscode}%
  {\hsnewpar\abovedisplayskip
   \advance\leftskip\mathindent
   \hscodestyle
   \let\\=\@normalcr
   \(\parray}%
  {\endparray\)%
   \hsnewpar\belowdisplayskip
   \ignorespacesafterend}

\newcommand{\arrayhs}{\sethscode{arrayhscode}}

% The mathhscode environment also makes use of polytable's parray 
% environment. It is supposed to be used only inside math mode 
% (I used it to typeset the type rules in my thesis).

\newenvironment{mathhscode}%
  {\parray}{\endparray}

\newcommand{\mathhs}{\sethscode{mathhscode}}

% texths is similar to mathhs, but works in text mode.

\newenvironment{texthscode}%
  {\(\parray}{\endparray\)}

\newcommand{\texths}{\sethscode{texthscode}}

% The framed environment places code in a framed box.

\def\codeframewidth{\arrayrulewidth}
\RequirePackage{calc}

\newenvironment{framedhscode}%
  {\parskip=\abovedisplayskip\par\noindent
   \hscodestyle
   \arrayrulewidth=\codeframewidth
   \tabular{@{}|p{\linewidth-2\arraycolsep-2\arrayrulewidth-2pt}|@{}}%
   \hline\framedhslinecorrect\\{-1.5ex}%
   \let\endoflinesave=\\
   \let\\=\@normalcr
   \(\pboxed}%
  {\endpboxed\)%
   \framedhslinecorrect\endoflinesave{.5ex}\hline
   \endtabular
   \parskip=\belowdisplayskip\par\noindent
   \ignorespacesafterend}

\newcommand{\framedhslinecorrect}[2]%
  {#1[#2]}

\newcommand{\framedhs}{\sethscode{framedhscode}}

% The inlinehscode environment is an experimental environment
% that can be used to typeset displayed code inline.

\newenvironment{inlinehscode}%
  {\(\def\column##1##2{}%
   \let\>\undefined\let\<\undefined\let\\\undefined
   \newcommand\>[1][]{}\newcommand\<[1][]{}\newcommand\\[1][]{}%
   \def\fromto##1##2##3{##3}%
   \def\nextline{}}{\) }%

\newcommand{\inlinehs}{\sethscode{inlinehscode}}

% The joincode environment is a separate environment that
% can be used to surround and thereby connect multiple code
% blocks.

\newenvironment{joincode}%
  {\let\orighscode=\hscode
   \let\origendhscode=\endhscode
   \def\endhscode{\def\hscode{\endgroup\def\@currenvir{hscode}\\}\begingroup}
   %\let\SaveRestoreHook=\empty
   %\let\ColumnHook=\empty
   %\let\resethooks=\empty
   \orighscode\def\hscode{\endgroup\def\@currenvir{hscode}}}%
  {\origendhscode
   \global\let\hscode=\orighscode
   \global\let\endhscode=\origendhscode}%

\makeatother
\EndFmtInput
%

\begin{document}\section{}Precis 0
\newline{}\subsubsection*{\texttt{test0.tweave:}}\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[B]{}\Varid{main}\mathrel{=}\Varid{print}\;\mathrm{0}{}\<[E]%
\\
\>[B]{}$\langle$Link$\rangle${}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\section{}Precis 1 
\newline{}\subsubsection*{\texttt{test0.tweave:}}\begin{hscode}\SaveRestoreHook
\column{B}{@{}>{\hspre}l<{\hspost}@{}}%
\column{E}{@{}>{\hspre}l<{\hspost}@{}}%
\>[B]{}\Varid{accum}\;\Varid{i}\mathrel{=}\Varid{id}{}\<[E]%
\ColumnHook
\end{hscode}\resethooks
\end{document} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:23:59.567

该`{-" ... "-}`构造是相当低级的。它会让你进入 TeX 当前所处的环境，这恰好已经是数学模式。因此，您的问题的解决方案很简单。编写要插入的代码，就像您处于数学模式一样。

另一种选择是使用普通注释，但使用 . 使注释字符不可见`\invisiblecomments`。普通注释由 lhs2TeX 排版为文本。

以下完整的 lhs2TeX 文档演示了这两个选项：

```
\documentclass{article}

%include polycode.fmt

\begin{document}

% Assume you are in math mode already:
\begin{code} 
main = print 0
{-"\langle\text{Link}\rangle"-}
\end{code}

% This works, too:
\invisiblecomments
\begin{code}
main = print 0
{- $\langle$Link$\rangle$ -}
\end{code}

\end{document} 
```

# arrays - 如何在流星发布功能中设置嵌套数组值？

> ID：13771234
> 
> 赞同：2
> 
> 时间：2012-12-07T21:26:35.020
> 
> 标签：arrays, mongodb, set, publish, meteor

我有两个集合“内容”和“单元”。在内容集合中有一个字段“unitID”，它指的是单元集合。在流星发布功能中，我想添加所有新创建内容的单位类型名称：

```
Meteor.publish("contents", function () {
  var self = this;

  var handle = Contents.find().observe({
    changed: function(contentdoc, contentid) {
        var UnitName = Units.findOne({_id: contentdoc.unittypeid }, {fields: {type: 1}});

        self.set("contents", contentid, {'content.0.typename': UnitName});
        self.flush();
    }
  });
} 
```

这可行，但它创建了一个新的属性“content.0.UnitName”，而不是在内容数组的第一个元素中插入属性“UnitName”：

```
[
    {
       _id:"50bba3ca8f3d1db27f000021",
       'content.0.UnitName':
       {
           _id:"509ff643f3a6690c9ca5ee59",
           type:"Drawer small"
       },
       content:
       [
           {
               unitID:"509ff643f3a6690c9ca5ee59",
               name: 'Content1'
           }
       ]
    }
] 
```

我想要的是以下内容：

```
[
    {
       _id:"50bba3ca8f3d1db27f000021",          
       content:
       [
           {
               unitID:"509ff643f3a6690c9ca5ee59",
               name: 'Content1',
               UnitName:
               {
                    _id:"509ff643f3a6690c9ca5ee59",
                    type:"Drawer small"
                }
           }
       ]
    }
] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:05:34.517

`this.set`within`Meteor.publish`仅适用于对象的顶级属性，这意味着它不支持 Mongo 样式的点属性。您必须使用数组`set`的整个新值进行调用。`contents`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T00:42:29.213

警告：我要说的将在 Meteor 的未来版本中发生变化。我们目前正在彻底检查自定义发布者 API 以使其更易于使用，但会破坏向后兼容性。

那就是说...

看起来您正在尝试做的是将服务器端连接构建到已发布的集合“内容”中。在这里，作为参考，是发布游标的当前代码（从 0.5.2 开始）（当您的发布者返回游标对象时）：

```
Cursor.prototype._publishCursor = function (sub) {
  var self = this;
  var collection = self._cursorDescription.collectionName;

  var observeHandle = self._observeUnordered({
    added: function (obj) {
      sub.set(collection, obj._id, obj);
      sub.flush();
    },
    changed: function (obj, oldObj) {
      var set = {};
      _.each(obj, function (v, k) {
        if (!_.isEqual(v, oldObj[k]))
          set[k] = v;
      });
      sub.set(collection, obj._id, set);
      var deadKeys = _.difference(_.keys(oldObj), _.keys(obj));
      sub.unset(collection, obj._id, deadKeys);
      sub.flush();
    },
    removed: function (oldObj) {
      sub.unset(collection, oldObj._id, _.keys(oldObj));
      sub.flush();
    }
  });

  // _observeUnordered only returns after the initial added callbacks have run.
  // mark subscription as completed.
  sub.complete();
  sub.flush();

  // register stop callback (expects lambda w/ no args).
  sub.onStop(function () {observeHandle.stop();});
}; 
```

要构建与另一个表连接的自定义发布者，请将添加的回调修改为：

*   检查添加的对象是否具有您要加入的键
*   在其他集合中查找该键
*   在调用flush之前，使用您要发布的新键和值在您的订阅上调用set。

请注意，仅当您知道所需的键将始终在另一个表中并且它永远不会更改时，上述内容才足够。如果它可能会改变，你也必须在第二张桌子上设置一个观察，并在那里用改变的方法重新设置 sub 上的键。

# java - Tomcat：尝试访问 Web 服务时出现空指针异常

> ID：13771236
> 
> 赞同：0
> 
> 时间：2012-12-07T21:26:47.693
> 
> 标签：java, web-services, tomcat, web-applications, jax-rs

我有一个包含 Web 服务的动态 Web 项目。我已将其导出为 WAR 文件并将其放置在 tomcat 的 webapps 目录中。Tomcat 显示 Web 应用程序正在运行。当我尝试调用我的服务的一项操作时，我收到以下异常：

```
java.lang.NullPointerException
    sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1629)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:461)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:680) 
```

知道这意味着什么吗？

这是我定义网络服务的类：

打包网络服务；

```
import java.sql.*;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.HeaderParam;
import javax.ws.rs.core.MediaType;

@Path("/operations")
public class NotifyWebService {

    @Path("/insertNewPatron")
    @GET

    public String insertNewPatron(@QueryParam("cardNumber")String cardNumber,
                                    @QueryParam("pin") String pin,
                                    @QueryParam("nickname") String nickname,
                                    @QueryParam("deviceID")String deviceID) throws Exception {

        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxxxx;";

            Connection c = DriverManager.getConnection(connectionUrl);

            String insertPatronStatement = "INSERT INTO dbo.Patron VALUES ('"+cardNumber+"','"+pin+"','"+nickname+"')";
            String insertDeviceOwner = "INSERT INTO dbo.DeviceOwner VALUES ('"+deviceID+"','"+cardNumber+"')";
            Statement state = null;

            state = c.createStatement();
            state.executeUpdate(insertPatronStatement);
            state.executeUpdate(insertDeviceOwner);

            c.close();

            return "true";
    }

    @Path("/initializeDevice")
    @GET

    public String initializeDevice( @QueryParam("deviceID")String deviceID) throws Exception{

        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String insertDeviceStatement = "INSERT INTO dbo.Devices VALUES ('"+deviceID+"',1,3,1,3)";
        Statement state = c.createStatement();
        state.executeUpdate(insertDeviceStatement);

        return "true";
    }

    @Path("/updateDevicePreferences")
    @GET

    public String updateDevicePreferences(@QueryParam("deviceID") String deviceID, 
                                            @QueryParam("dueDateNotice")String dueDateNotice,
                                            @QueryParam("dueDateNoticeAdvance") String dueDateNoticeAdvance,
                                            @QueryParam("holdsNotice") String holdsNotice, 
                                            @QueryParam("eventNoticeAdvance")String eventNoticeAdvance) throws Exception{
        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String updateDeviceStatement = "UPDATE dbo.Devices SET dueDateNotice="+dueDateNotice+", dueDateNoticeAdvance="+dueDateNoticeAdvance
                                    +", holdsNotice="+holdsNotice+", eventNoticeAdvance="+eventNoticeAdvance+" WHERE deviceID='"+deviceID+"'";
        Statement state = c.createStatement();
        state.executeUpdate(updateDeviceStatement);

        return "true";
    }

    @Path("/removeUser")
    @GET

    public String removeUser(@QueryParam("cardNumber")String cardNumber) throws Exception{
        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String removeStatement = "DELETE FROM dbo.Patron WHERE cardNumber='"+cardNumber+"'";

        Statement state = c.createStatement();
        state.executeUpdate(removeStatement);

        return "true";
    }

    @Path("/addEvent")
    @GET

    public String addEvent(@QueryParam("deviceID")String deviceID, @QueryParam("eventID")String eventID) throws Exception{

        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String eventStatement = "INSERT INTO dbo.Events VALUES ('"+deviceID+"','"+eventID+"')";
        Statement state = c.createStatement();
        state.executeUpdate(eventStatement);

        return "true";
    }

    @Path("/removeEvent")
    @GET

    public String removeEvent(@QueryParam("deviceID")String deviceID, @QueryParam("eventID")String eventID) throws Exception{

        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String eventStatement = "DELETE FROM dbo.Events WHERE deviceID='"+deviceID+"' AND eventID='"+eventID+"'";
        Statement state = c.createStatement();
        state.executeUpdate(eventStatement);

        return "true";
    }

    @Path("/removeAllEvents")
    @GET

    public String removeAllEvents(@QueryParam("deviceID")String deviceID) throws Exception{

        String connectionUrl = "jdbc:sqlserver://mssql.acpl.lib.in.us:1433;" +
                   "databaseName=MobileNotify;user=Mobile_Notification_User;password=xxxx;";

        Connection c = DriverManager.getConnection(connectionUrl);

        String eventStatement = "DELETE FROM dbo.Events WHERE deviceID='"+deviceID+"'";
        Statement state = c.createStatement();
        state.executeUpdate(eventStatement);

        return "true";
    }
} 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>APNS_WebService</display-name>
   <servlet>
        <servlet-name>javax.ws.rs.core.Application</servlet-name>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>javax.ws.rs.core.Application</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

如果需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:43:12.913

我相信你的 NPE 的原因是你的块中缺少一个`<servlet-class>`元素。`<servlet>`但是，决定 servlet 类应该是什么会引发更大的问题......

看起来您还没有选择 JAX-RS 框架。请参阅[JAX-RS 框架](https://stackoverflow.com/questions/80799/jax-rs-frameworks)以了解各种替代方案。

我目前正在使用泽西岛。Jersey 的典型 web.xml 可能包含：

```
 <servlet>
    <servlet-name>WebService</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
       <param-name>com.sun.jersey.config.property.packages</param-name>
       <param-value>webservice</param-value>
    </init-param>
    <init-param>
      <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
      <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>WebService</servlet-name>
    <url-pattern>/api/rest/*</url-pattern>
  </servlet-mapping> 
```

对于许多 JAX-RS 框架，框架的选择将决定您应该输入什么作为`<servlet-class>`

另请注意，由于您的根资源位于 package`webservice`中，因此我将`com.sun.jersey.config.property.packages`参数设置为，`webservice`因此 Jersey 将扫描您的包中的任何 JAX-RS 注释类。

# node.js - 如何使用玉模板接受来自多个来源的信息并使用包含语句显示

> ID：13771241
> 
> 赞同：0
> 
> 时间：2012-12-07T21:27:02.220
> 
> 标签：node.js, mongodb, include, express, pug

我有这个模板：

```
.bar
  .titleBox
    a.title(href=URL) #{title} 
```

我想在另一个页面titles.jade中多次包含它，如下所示：

```
#contentBox
  include bar
  include bar
  include bar 
```

我希望每个人都有不同的 URL 和标题值。

我在节点中有这段代码：

```
read(function(post){ //post is an array of objects retrieved from a mongodb collection
    // I was thinking of using a for loop to iterate through the array
    res.render('titles', {title: post[i].title, url: post[i].URL}); 
```

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:39:27.120

我不确定这些对象代表什么，但我现在假设我们正在谈论书籍。如果您的翡翠模板可以作为本地获取书籍列表 - 例如，如果它被重新定义为：

```
res.render('books_index', {books: [{title: 'dune', url: 'http://www.dunenovels.com'},...]}) 
```

您可以使用[mixin](https://github.com/visionmedia/jade#a14)。像这样的东西：

```
mixin listBooks(books)
  each book in books
    .bar
      .titleBox
        a.title(href=book.url)= book.title 
```

稍后在您的模板中，您可以渲染 mixin：

```
mixin listBooks(books) 
```

# facebook - 本地化 Facebook “scrapes”

> ID：13771243
> 
> 赞同：0
> 
> 时间：2012-12-07T21:27:10.293
> 
> 标签：facebook, localization, facebook-opengraph, facebook-canvas

我们正在运行一个具有完全本地化的 og 标签的画布应用程序。一切都运行良好，除非用户选择手动将 facebook 应用程序 url (apps.facebook.com/mysite) 复制到帖子中。

发生这种情况时，我们希望发布消息中的文本使用用户的语言。相反，它总是使用`og:`元标记中的英文文本。

如果我能检测出用户来自哪种文化，我就可以更改这些元标记。但是，我在请求标头或从抓取工具发送的参数中看不到任何内容，以指示用户来自何处。

我确实看到有一个`og:locale:alternate`标签可以用来指定页面可用的其他语言，但除非我从 Facebook 收到第二个带有区域设置值的请求，否则我看不出这对我有什么好处。

*   如何确保发布的标题/描述使用用户的语言？
*   必须使用 Facebook 应用设置中的本地化部分来完成吗？
    *   如果是这样，有没有办法让它自动化？我们的翻译工作流程非常完善，我不想让翻译人员进入 Facebook 应用程序来完成工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:57:16.480

您很可能需要查询字符串中的一些参数来区分 url。例如

[http://apps.facebook.com/my_app/en/](http://apps.facebook.com/my_app/en/) 或 [http://apps.facebook.com/my_app/it/](http://apps.facebook.com/my_app/it/)

此参数实际上将在您的应用程序上设置活动语言。facebook **scraper**将缓存来自元标记的本地化标题/描述。

# html - 是否可以缩放画布元素

> ID：13771255
> 
> 赞同：0
> 
> 时间：2012-12-07T21:28:46.410
> 
> 标签：html, canvas

...并且其所有内部维度和相互作用是否保持相互关联？

例如，使用 Flash，您可以创建电影并发布 .swf 文件。然后，当您将该 .swf 文件放在页面中时，您可以放大或缩小该电影，并且仍然保持其所有功能，而这并不明智。

Canvas 有类似的东西吗？我被其他人引导到 WHATWG 对 scale 属性的描述，但这没有帮助。scale 属性是否符合我的要求，有没有人举个例子？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:24:54.180

我曾经通过使用使用比例坐标（即 0.3，映射到 0-1，固定比率和与此相关的其他轴）的函数包装 Canvas API 来解决这个问题。

根据您想要做的工作量，您可能想要自己实现类似的东西或使用一些[预先存在的解决方案](http://jster.net/category/canvas-wrappers)。

# jquery - 如何使用 jQuery 获得完整高度

> ID：13771259
> 
> 赞同：1
> 
> 时间：2012-12-07T21:29:00.603
> 
> 标签：jquery, css, height

我目前正在使用这个小提琴来尝试识别正确的属性来检查以保持全高背景图像 - 不使用固定定位：

[http://jsfiddle.net/HvJDb/](http://jsfiddle.net/HvJDb/)

我遇到了一个问题，我不确定如何可靠地解决它。如果将图片标签的大小调整为 100% 高度，如果浏览器的宽度大于图片的宽高比，那么当高度较小时，图片的右侧会出现间隙。

如果将高度设置为 100%，它将调整为可见空间的 100%，但如果向下滚动，图像不会垂直占据整个区域。

```
$(window).resize(function(){
    // window and body are both incorrect for different reasons
    bgImage.css({height:$(this).height()+'px'});
}); 
```

如何让图像始终占据 100% 的可用空间：

a) 如果页面比图片长，使用自动宽度垂直拉伸

b) 如果页面较短，但浏览器视口较大，则拉伸以适应视口，越过内容的底部，但如果将浏览器高度降低到刚好足以显示内容，则不会导致滚动条出现，比调整大小的图像的新高度更小的高度。

我无法将手指放在正确的高度上，以便在降低高度时避免创建滚动条，并在增加浏览器的高度和宽度时避免留下间隙。

注意：PC 版 Safari 在使用 document.ready 时存在问题，我发现使用 window.load 在页面加载时调整图像大小时效果更好。document.ready 在 Firefox 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:43:03.807

[http://api.jquery.com/height/](http://api.jquery.com/height/)

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:36:57.143

您可以使用此 jquery 插件来调整图像大小以适合容器：

[img液体](https://github.com/karacas/imgLiquid)

[jsfidde 中的示例](http://goo.gl/CbguP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T00:11:28.153

好的，是的，固定 imgLiquid 和 css 位置：

在 jsFiddle 中尝试：http: [//goo.gl/CWCg8](http://goo.gl/CWCg8)

# javascript - 计算任意生成线的半边/面

> ID：13771262
> 
> 赞同：0
> 
> 时间：2012-12-07T21:29:12.977
> 
> 标签：javascript, html, canvas

我通过 mrdoob 找到了这个[脚本](http://jsdo.it/mrdoob/xI3u)，它生成了一个行网。我已经弄清楚了一条线的起点和终点。现在我想从这些形状中挤出面，但是我只有线条和顶点。我正在尝试通读一些半边理论，但我认为我不太了解它。

是否要沿着一条线直到它变成一个矩形，检查它是否与一条线相交或细分？我需要一个正确的方向。

```
// Based on Jared Tarbell's Substrate algorithm concept.
// http://www.complexification.net/gallery/machines/substrate/index.php

var Boid = function ( x, y, angle ) {

    this.x = x;
    this.y = y;

    this.angle = Math.pow( Math.random(), 20 ) + angle;
    this.dx = Math.cos( this.angle );
    this.dy = Math.sin( this.angle );

    this.life = Math.random() * 100 + 100;
    this.dead = false;

    this.update = function () {

        context.strokeStyle = '#000000';
        context.beginPath();
        context.moveTo( this.x, this.y );

        this.x += this.dx * 2;
        this.y += this.dy * 2;
        this.life -= 2;

        context.lineTo( this.x, this.y );
        context.stroke();

        var index = ( Math.floor( this.x ) + width * Math.floor( this.y ) ) * 4;

        if ( this.life <= 0 ) this.kill();
        if ( data[ index + 3 ] > 0 ) this.kill();

        if ( this.x < 0 || this.x > width ) this.kill();                        
        if ( this.y < 0 || this.y > height ) this.kill();

    }

    this.kill = function () {

        boids.splice( boids.indexOf( this ), 1 );
        this.dead = true;

    }

}

var width = window.innerWidth;
var height = window.innerHeight;

var canvas = document.getElementById( 'world' );
canvas.width = width;
canvas.height = height;

var context = canvas.getContext( '2d' );
var image, data;

var boids = [];
boids.push( new Boid( width / 2, height / 2, Math.random() * 360 * Math.PI / 180 ) );

setInterval( function () {

    image = context.getImageData( 0, 0, width, height );
    data = image.data;

    for ( var i = 0; i < boids.length; i ++ ) {

        var boid = boids[ i ];
        boid.update();

        if ( !boid.dead && Math.random() > 0.5 && boids.length < 500 ) {

            boids.push( new Boid( boid.x, boid.y, ( Math.random() > 0.5 ? 90 : - 90 ) * Math.PI / 180 + boid.angle ) );

        }

    }

}, 1000 / 60 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:19:41.443

这看起来比我强硬更复杂。我不确定这是否是您要求的答案，但可以帮助您决定下一步：

如果您必须使用此算法：我认为您将需要跟踪构成边缘的每一对点：`Boid`函数开头的第一个点和`Boid`被杀死时的第二个点；两个点（或 x1、x2、y1 和 y2 值）都保存在一个新`edge`对象中，该对象将添加到一个`edges`数组中（每个`edge`点都是死亡的灵魂`Boid`）。

[在应用半边理论](http://fgiesen.wordpress.com/2012/02/21/half-edge-based-mesh-representations-theory/)之前有两个问题：你有一个边数组，但你需要知道哪些其他边连接到给定边的开始或结束。另一个问题是两个 Boid 之间的“碰撞”只影响当前正在更新的 Boid，它在碰撞过程中被杀死。为了使用半边理论，您必须“通知”另一个 Boid/边缘有关此碰撞并在该点拆分它：碰撞点是三​​个边缘的顶点，一个发生碰撞，两个在被碰撞的那个被分裂了。

另请注意，形状（面）不一定由四个边缘组成，我打开了您提供的链接，那里有很多带有树和五个边缘的形状。

如果您可以使用不同的算法来生成网格，那么您可能会更好地表示边缘和顶点，这将帮助您找到构成每个形状的“角”。

# bash - Bash：将标准输入复制到文件

> ID：13771274
> 
> 赞同：2
> 
> 时间：2012-12-07T21:29:48.297
> 
> 标签：bash, stdin

我有两个程序。第一个是客户端，第二个是服务器。他们使用标准输入和标准输出以文本格式交换数据。

我想在它们之间放置代理 bash 脚本并将来自标准输入的所有内容记录到文件中。

我尝试了以下代码，但 /tmp/f-copy.txt 为空

代理.sh：

```
exec 6<&0
exec 6>/tmp/f-copy.txt
server 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T21:32:07.170

看`tee`命令，就是你想要的。从手册页：

tee 实用程序将标准输入复制到标准输出，在零个或多个文件中进行复制。输出是无缓冲的。

# sql - 用不同的值查询不同的ID？

> ID：13771275
> 
> 赞同：0
> 
> 时间：2012-12-07T21:30:05.597
> 
> 标签：sql, relational-division, sql-match-all

我正在尝试为高尔夫数据库编写查询。`statisticID = 1`它需要返回有a`p2sStatistic > 65`和也有`statisticID = 3`的玩家`p2sStatistic > 295`。
一个`statisticID`是行驶距离，另一个是准确性等。我尝试了以下方法，但它不起作用，似乎无法在网上找到答案。如果不进行视图，我将如何处理？

```
SELECT playerFirstName, playerLastName
FROM player2Statistic, player 
WHERE player.playerID=player2Statistic.playerID
AND player2Statistic.statisticID=statistic.statisticID
AND p2sStatistic.3 > 295
AND p2sStatistic.1 > 65; 
```

[http://i.imgur.com/o8epk.png](http://i.imgur.com/o8epk.png) - db 的图片

试图得到它只是输出满足这两个条件的玩家列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:06:58.597

您在查询中缺少该`statistic`表。您需要根据您的`where`条款加入它。

您还需要使用正确的连接语法。

以下版本加入统计表两次，一次用于“1”，一次用于“3”：

```
SELECT distinct playerFirstName, playerLastName
FROM player2Statistic p2s join
     player p
     on p.playerId = p2s.playerId join
     statistic s3
     on s3.StatisticId = p2s.statistcId and
        s3.StatisticId = 3 join
     statistic s1
     on s1.StatisticId = p2s.statisticId and
        s1.StatisticId = 1
WHERE  (s3.statistic > 295 and s1.statistic > 65) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:09:26.967

您将希望加入统计表两次：

```
SELECT playerFirstName, playerLastName
  FROM player p
  JOIN player2Statistic s1
    on p.playerID=s1.playerID and s1.statisticID = 1
  JOIN player2Statistic s3
    on p.playerID=s3.playerID and s1.statisticID = 3
 WHERE s1.p2sStatistic > 65 and s3.p2sStatistic > 295; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:11:07.357

对于*没有重复*的玩家列表，`EXISTS`半连接可能是最好的：

```
SELECT playerFirstName, playerLastName
FROM   player AS p 
WHERE EXISTS (
   SELECT 1
   FROM   player2Statistic AS ps 
   WHERE  ps.playerID = p.playerID
   AND    ps.StatisticID = 1
   AND    ps.p2sStatistic > 65
   )
AND EXISTS (
   SELECT 1
   FROM   player2Statistic AS ps 
   WHERE  ps.playerID = p.playerID
   AND    ps.StatisticID = 3
   AND    ps.p2sStatistic > 295
   ); 
```

列名和上下文来自提供的屏幕截图。问题中的查询并没有完全涵盖它。
注意括号，它们是处理运算符优先级所必需的。

这可能更快（重复可能是不可能的）：

```
SELECT p.playerFirstName, p.playerLastName
FROM   player           AS p 
JOIN   player2Statistic AS ps1 USING (playerID)
JOIN   player2Statistic AS ps3 USING (playerID)
AND    ps1.StatisticID = 1
AND    ps1.p2sStatistic > 65
AND    ps3.StatisticID = 3
AND    ps3.p2sStatistic > 295; 
```

如果您的 RDBMS 绝密品牌不支持 SQL 标准`(USING (playerID)`，请替换：`ON ps1.playerID = p.playerID`达到相同效果。

这是一个**关系分裂**的例子。在这个相关问题下找到*更多*的查询技术来处理它：
[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)

# linq - LINQ：加入列表 and dataset on a comma separated value field? I am using C# and LINQ and trying to combine two sets of data. The first is a List of a specific type, lets call this Status (List) which is just a class with a bunch of pro 问问题 问问题 2012-12-07T21:30:52.073 488 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using C# and LINQ and trying to combine two sets of data. The first is a List of a specific type, lets call this Status (List) which is just a class with a bunch of properties one of which includes a comma separated value list of accounts. This is queried from the application database using a stored procedure so I have some flexability as to what is displayed here For example: class Status { ... public string Accounts {get; set;} (ie. "abcde, qwerty, asdfg") public string Managers {get; set;} ... } The rest of the properties are irrelevant as this is the only field I am joining on. The second "Accounts" data set is from a web service which I am calling to get a list of "Accounts" and the people associated with each account. For example: Account Manager SomeData MoreFields ... ------- ------------------- -------- ---------- --- abcde Bob Marley Data MoreData ... qwerty Fred Flinstone Data MoreData ... So bascially I need to Create a list of Status objects with a CSV list of Manager(s) from the Accounts dataset in the Managers property of Status. Problem is I have no control over what is retruend in this dataset as it is a third party application. So I need to find some way to do this without modifying the "Accounts" data. Unless I do something in memory after getting the dataset from the web service. I hope this makes sense and I thank you in advance! EDIT: As usr points out in his answer Dictonary.Count is not thread-safe. The documentation says: enumerating through a collection is intrinsically not a thread-safe procedure. In the rare case where an enumeration contends with write accesses, the collection must be locked during the entire enumeration. Which means synchronization is required. Note that the same lock needs to be used by any other code that may be modifying the collection. This is highly error prone, if the Dictionary is used by multiple threads consider using ConcurrentDictionary instead linqcsv 4 1 回答 1 This answer is useful 0 你所说的这个“数据集”是什么？我不在乎它来自哪里——我只关心它在 C# 中是什么类型的对象。 我将假设它是一个 ICollection，称为“帐户” 接下来，我将假设 Managers 是一个与 Accounts 非常相似的 CVS 列表。 此外，我将只创建一个状态对象而不是它们的“列表”，因为您永远不会说出将一种状态与另一种状态区分开来的原因。 var status = new Status(); status.Accounts = string.Join( ", ", from k in accounts select k.Account); status.Managers = string.Join( ", ", from k in accounts select k.Manager); 于 2012-12-07T22:55:06.093 回答 Related 1 android - 在android中使用IF-Else循环将字符串与EditText进行比较？ 2 hash - Perl 在最后添加 Hash 到 Hash of Hash 2 c# - System.DirectoryServices.DirectorySearcher.PropertiesToLoad 中可用的不同属性有哪些 4 git - Gitlab git push 使用 Vagrant 管理的 Virtualbox 失败 1 php - TCPDF - 语言文件中的 ÆØÅ 不起作用 3 excel - 奇怪的 Excel VBA 错误“表达式太复杂”-1.#IND 1 mysql - 尝试停止其服务时出现 MySQL-Linux 错误 1 mysql - mysql中的分区是创建表还是仅仅创建虚拟表？ 1 grails - 测试控制器时 spock 和 grails 2.0.1 的问题 2 actionscript-3 - 跟踪 as3 中的网络连接错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13771285
> 
> 赞同：0
> 
> 时间：
> 
> 标签：linq, csv

I am using C# and LINQ and trying to combine two sets of data. The first is a List of a specific type, lets call this Status (List) which is just a class with a bunch of properties one of which includes a comma separated value list of accounts. This is queried from the application database using a stored procedure so I have some flexability as to what is displayed here

For example:

```
class Status
{
   ...
   public string Accounts {get; set;} (ie. "abcde, qwerty, asdfg")
   public string Managers {get; set;}
   ...
} 
```

The rest of the properties are irrelevant as this is the only field I am joining on.

The second "Accounts" data set is from a web service which I am calling to get a list of "Accounts" and the people associated with each account.

For example:

```
Account    Manager                 SomeData   MoreFields     ...
-------    -------------------     --------   ----------     ---
abcde      Bob Marley              Data       MoreData       ...
qwerty     Fred Flinstone          Data       MoreData       ... 
```

So bascially I need to Create a list of Status objects with a CSV list of Manager(s) from the Accounts dataset in the Managers property of Status. Problem is I have no control over what is retruend in this dataset as it is a third party application. So I need to find some way to do this without modifying the "Accounts" data. Unless I do something in memory after getting the dataset from the web service.

I hope this makes sense and I thank you in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:55:06.093

你所说的这个“数据集”是什么？我不在乎它来自哪里——我只关心它在 C# 中是什么类型的对象。

我将假设它是一个 ICollection，称为“帐户”

接下来，我将假设 Managers 是一个与 Accounts 非常相似的 CVS 列表。

此外，我将只创建一个状态对象而不是它们的“列表”，因为您永远不会说出将一种状态与另一种状态区分开来的原因。

```
var status = new Status();
status.Accounts = string.Join( ", ", from k in accounts select k.Account);
status.Managers = string.Join( ", ", from k in accounts select k.Manager); 
```

# php - Wordpress: Category Based Random Shortcode from Array

> ID：13771287
> 
> 赞同：2
> 
> 时间：2012-12-07T21:31:25.433
> 
> 标签：php, wordpress, random, conditional, shortcode

I am trying to generate some extra money for our single income family this holiday season by building an affiliate site to sell. However, after much research and little help from the WordPress forum:

[http://wordpress.org/support/topic/u...3#post-3318897](http://wordpress.org/support/topic/u...3#post-3318897)

I am in desperate need of some PHP code to randomly select a do_shortcode from an array based on the conditional category - similar to the Widget Logic plugin but for shortcodes.

I am currenty using:

```
<?php echo do_shortcode("[asle id=15]"); ?> 
```

in my single.php page at www.AvengersCollectibles.com/wp to display the shortcode for my "Azon Pro Shopping List" that appears at the bottom of my single post pages but need some code to randomly show 1 of 5 such lists from an array based on each of the 9 categories/characters.

Thus far, something like the following was recommended:

```
<?php $ids = array( 43, 15, 8 ); // Default

if (in_category('Captain America')):
   $ids = array( 15, 16, 17, 19, 20 );
elseif (in_category('Spiderman')):
   $ids = array( 35, 36, 37, 39, 50, 5, 70 );
elseif (in_category('Green Hornet')):
   $ids = array( 75, 6, 22, 49 );
endif;
$id = 0;
if ( ! $id ) {
   $key = array_rand( $ids, 1 );
   $id=$ids[$key];
   echo do_shortcode("[asle id=$id]");
}

?> 
```

but I keep receiving the following error message:

Method Not Implemented GET to /wp/wp-admin/theme-editor.php not supported. Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.

Any help would be greatly appreciated and I welcome all comments, concerns, or questions you may have.

PS: I will gladly offer access if necessary and a royalty upon my sale of the site if you are able to successfully solve this problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:55:53.887

如果我把它放在我的`functions.php`：

```
add_shortcode( 'asle', 'so_13771287_random_shortcode' );

function so_13771287_random_shortcode( $atts ) 
{
    return 'Random ID = ' . $atts['id'];
} 
```

你的确切代码在`single.php`：

```
<?php $ids = array( 43, 15, 8 ); // Default

if (in_category('Captain America')):
   $ids = array( 15, 16, 17, 19, 20 );
elseif (in_category('Spiderman')):
   $ids = array( 35, 36, 37, 39, 50, 5, 70 );
elseif (in_category('Green Hornet')):
   $ids = array( 75, 6, 22, 49 );
endif;
$id = 0;
if ( ! $id ) {
   $key = array_rand( $ids, 1 );
   $id=$ids[$key];
   echo do_shortcode("[asle id=$id]");
}
?> 
```

***它对我有用。***
是的，我创建了所有超级英雄类别进行测试。

短代码从每个访问的单个帖子中的对应类别中打印一个随机数。

# mysql - Live Search With Mysql and PHP

> ID：13771288
> 
> 赞同：1
> 
> 时间：2012-12-07T21:31:33.467
> 
> 标签：mysql, xml, domdocument

I am building a Live Search function on my website, I used the W3schools example, which worked perfectly. But I want to use MySQL database instead of the XML file, so I am working on a code to take the MySQL database and turn it into an XML file.

```
 <?php

  header("Content-type: text/xml");

    include 'dbc.php';

      $query = "SELECT * FROM airports";
      $result = mysql_query($query, $link)
      or die('Error querying database.');

  $xml_output = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n";
  $xml_output .= "<entries>\n";

  for($x = 0 ; $x < mysql_num_rows($result) ; $x++){
      $row = mysql_fetch_assoc($result);
      $xml_output .= "\t<entry>\n";
      $xml_output .= "\t\t<ident>" . $row['ident'] . "</ident>\n";
          // Escaping illegal characters
          $row['name'] = str_replace("&", "&", $row['name']);
          $row['name'] = str_replace("<", "<", $row['name']);
          $row['name'] = str_replace(">", "&gt;", $row['name']);
          $row['name'] = str_replace("\"", "&quot;", $row['name']);
      $xml_output .= "\t\t<name>" . $row['name'] . "</name>\n";
      $xml_output .= "\t</entry>\n";
  }

  $xml_output .= "</entries>";

  echo $xml_output;

  ?> 
```

I am getting this error:

```
 Warning: DOMDocument::load() [domdocument.load]: Start tag expected, '<' not found in /public_html/sql2xml.php, line: 11 in /public_html/livesearch.php on line 12
 no suggestion 
```

I have read the explanation at: [Avoid DOMDocument XML warnings in php](https://stackoverflow.com/questions/7082401/avoid-domdocument-xml-warnings-in-php) But I have no idea how to fix that in my code. Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T20:15:06.230

这将从您的 mysql 表中的“名称”列中获取数据并将其放入一个数组中，该数组与您键入时 w3c 学校查找的相同数组

```
$mysqli = new mysqli(HOST,USER,PASSWORD,DATABASE);

/* check connection */
if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

$query = "SELECT * FROM table";
$result = $mysqli->query($query);

while($row = $result->fetch_array()) 
{
    $a[]=$row["Name"];
}

/* free result set */
$result->free();

/* close connection */
$mysqli->close();

// get the q parameter from URL
$q = $_REQUEST["q"];

$hint = "";

// lookup all hints from array if $q is different from ""
if ($q !== "") {
    $q = strtolower($q);
    $len=strlen($q);
    foreach($a as $name) {
        if (stristr($q, substr($name, 0, $len))) {
            if ($hint === "") {
                $hint = $name;
            } else {
                $hint .= ", $name";
            }
        }
    }
}

if (isset($q))
{
    // Output "no suggestion" if no hint was found or output correct values
    echo $hint === "" ? "no suggestion" : $hint;
} 
```

# objective-c - unrecognized selector sent to class CCAnimation

> ID：13771291
> 
> 赞同：1
> 
> 时间：2012-12-07T21:32:12.900
> 
> 标签：objective-c, xcode, cocos2d-iphone

I am trying to get an Animation Helper with a cocos2d project and for some reason keep getting an error message:

```
unrecognized selector sent to class. 
```

I have tried numerous approaches to no avail. I understand that it may have to do with a class-instance conflict, but I do not know how to resolve it. Any thoughts?

This is how I am calling the helper function:

```
CCAnimation* anim = [CCAnimation animationWithFrame:playerAnimName frameCount:1 delay:0.08f]; 
```

And this is the helper function itself:

```
 +(CCAnimation*) animationWithFrame:(NSString*)frame frameCount:(int)frameCount       delay:(float)delay
{
printf("start helper");

// load the players's animation frames as textures and create a sprite frame
NSMutableArray* frames = [NSMutableArray arrayWithCapacity:frameCount];
for (int i = 1; i < frameCount+1; i++)
{
    NSString* file = [NSString stringWithFormat:@"%@%i.png", frame, i];
    CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];

    [frameCache addSpriteFramesWithFile:@"maze-art.plist"];

    CCSpriteFrame* frame = [frameCache spriteFrameByName:file];
    [frames addObject:frame];
}

// return an animation object from all the sprite animation frames
return [CCAnimation animationWithSpriteFrames:frames delay:delay];
} 
```

Any insight is appreciated. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:49:01.910

你的辅助方法在哪里？如果它在您自己的班级内，则必须将其称为

```
[MyClass method]; 
```

不是

```
[CCAnimation method]; 
```

`+`意味着该方法是静态的，因此您必须使用该方法所在的类来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:17:15.840

为了使类别起作用，您必须按以下方式定义新方法。请参考这个[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

```
@interface ClassName ( CategoryName )
// method declarations
@end 
```

例如，您的新方法必须定义为

```
@interface CCAnimation (Helper)
+(CCAnimation*) animationWithFile:(NSString*)name frameCount:(int)frameCount delay:(float)delay
{
       ...
}
@end 
```

# mysql - 我可以在 MySQL 中合并 2 个表并更新一个字段吗？

> ID：13771295
> 
> 赞同：2
> 
> 时间：2012-12-07T21:32:38.860
> 
> 标签：mysql

好的，所以我在这里需要做的是，将第一个表中具有特定名称的所有数据的总和。

```
SELECT sum(DKP_Change) FROM 'Attendance' WHERE Name='harrian' 
```

然后在一个不同的表中，我需要用上一个表的总和更新 Total_DKP

```
SELECT Total_DKP FROM `Characters` WHERE Name='harrian' 
```

我尝试了以下解决方案和其他一些解决方案，但没有得到任何工作结果

```
SELECT Total_DKP FROM `Characters` WHERE Name='harrian'
set Total_DKP = (SELECT sum(DKP_Change) FROM 'Attendance' WHERE Name='harrian') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:36:58.770

要连续更改数据，请使用以下**[`UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/update.html)**语句：

```
UPDATE Characters AS c
SET c.Total_DKP = ( SELECT SUM(a.DKP_Change) 
                    FROM Attendance AS a 
                    WHERE a.Name = 'harrian'
                  )
WHERE c.Name = 'harrian' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:36:14.550

```
UPDATE `Characters` 
SET Total_DKP = (SELECT SUM(DKP_Change) FROM `Attendance` WHERE Name='harrian') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:39:26.293

请尝试以下方法。

```
 update t1 set t1.secondcolumn = 
        (SELECT sum(blah) as blahsum
            FROM t1 b
         where b.name = 'harran'
        )            
    WHERE t1.name = 'harran'
; 
```

# android - 按钮间距

> ID：13771299
> 
> 赞同：0
> 
> 时间：2012-12-07T21:33:21.793
> 
> 标签：android, layout, button, margin

我正在尝试将按钮的边距设置为 0，（因此按钮之间没有间距）。

基本上，我希望我的按钮看起来像这样（具有以下样式和颜色）：

![在此处输入图像描述](../Images/d869741fc8f5feb4541e4e5d01dadcfd.png)

知道如何完成这种任务吗？我不想自己创建一个 9 补丁图像（因为我对此一无所知）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T22:28:49.140

在这种特定情况下，您可以使用 XML 轻松完成此任务。这是您可以通过两个步骤实现它的方法：

## 第1步

在drawable文件夹中创建3个形状：

*   第一个形状用于左按钮：**shape_button_left.xml**。此形状具有径向左角和渐变背景。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >

        <stroke
            android:width="1dp"
            android:color="#BFBFBF" >
        </stroke>

        <corners
            android:bottomLeftRadius="10dp"
            android:topLeftRadius="10dp" >
        </corners>

        <gradient android:startColor="#D2D2D2" android:endColor="#F2F2F2" android:angle="90"/>

    </shape> 
    ```

*   第二个形状用于中心按钮：**shape_button_center.xml**。这个形状没有定义任何角落，也有渐变背景。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >

        <stroke
            android:width="1dp"
            android:color="#BFBFBF" >
        </stroke>

        <gradient android:startColor="#D2D2D2" android:endColor="#F2F2F2" android:angle="90"/>

    </shape> 
    ```

*   第三个形状用于右键：**shape_button_right.xml**。此形状具有径向右角和渐变背景。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >

        <stroke
            android:width="1dp"
            android:color="#BFBFBF" >
        </stroke>

        <corners
            android:bottomRightRadius="10dp"
            android:topRightRadius="10dp" >
        </corners>

        <gradient android:startColor="#D2D2D2" android:endColor="#F2F2F2" android:angle="90"/>

    </shape> 
    ```

## 第2步

现在，我们可以在简单的视图中使用这些形状来获得按钮的效果。在您的布局 XML 中添加以下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >

    <!-- Button Left -->

    <LinearLayout
        android:id="@+id/button_left"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_button_left"
        android:gravity="center"
        android:padding="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Left"
            android:textColor="#333333"
            android:textSize="20sp" />
    </LinearLayout>
    <!-- End Button Left -->

    <!-- Button Center -->

    <LinearLayout
        android:id="@+id/button_center"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_button_center"
        android:gravity="center"
        android:padding="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Center"
            android:textColor="#333333"
            android:textSize="20sp" />
    </LinearLayout>
    <!-- End Button Center -->

    <!-- Button Right -->

    <LinearLayout
        android:id="@+id/button_right"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_button_right"
        android:gravity="center"
        android:padding="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Right"
            android:textColor="#333333"
            android:textSize="20sp" />
    </LinearLayout>
    <!-- End Button Right -->

</LinearLayout> 
```

**就是这样** 现在，您可以在代码中将 onClick 侦听器添加到 LinearLayouts 并像按钮一样使用它。

* * *

在我的手机上测试这段代码会得到下一个结果： ![在此处输入图像描述](../Images/ddebb74dc1a16226c43a4fd52a546441.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:47:04.997

> 知道如何完成这种任务吗？我不想自己创建一个 9 补丁图像（因为我对此一无所知）。

恐怕你可能没有太多选择。每个按钮之间的固有间距是直接内置到框架使用的现有 9-patch 背景中的额外透明像素的结果。要替换此行为，您**必须**将按钮的背景设置为`Drawable`不包含此固有间距的不同背景。

另一个可以在代码中完成的选项是创建 XML 可绘制形状以用于每个背景。您可以创建一个单独的形状，该形状具有圆角半径、填充渐变和笔触，就像您的图像一样。您可以在文档中阅读有关创建[XML Drawable 的](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)更多信息。

# c# - 使用 LINQ to Twitter 进行身份验证后获取用户信息

> ID：13771303
> 
> 赞同：3
> 
> 时间：2012-12-07T21:33:40.330
> 
> 标签：c#, authentication, userinfo, linq-to-twitter

我想在通过 Twitter 进行身份验证后检索用户信息。为此，我使用 LINQ to Twitter 库。可以使用以下代码：

```
 var usersResponse =
            (from user in context.User
             where user.Type == UserType.Lookup &&
                   user.ScreenName == "MRade90"
             select user).ToList();

        var users =
           (from user in usersResponse
            select new User
            {
                Name = user.Identifier.ScreenName,
                StatusText = user.Status.Text,
                PictureUrl = new Uri(user.ProfileImageUrl)
            }).FirstOrDefault(); 
```

但这是硬编码的，ScreenName 设置为 MRade90。是否可以为当前经过身份验证的用户做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:39:28.483

我找到了。可以从 WinRtAuthorizer 类的 Credentials 属性访问当前用户凭据。例如，您可以在此处使用 ScreenName：

```
string screenName = auth.Credentials.ScreenName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T18:11:12.980

我在用

var users =
(from user in twitterCtx1.User where user.Type == UserType.Lookup && //user.UserID == list1 list1.Contains(user.UserID) select user) .ToList();

但是，我无法提取用户 ID 和工作。我可能出错的任何输入。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-08T06:01:10.620

我就是这样做的，

```
var auth = new SingleUserAuthorizer
                        {
                            CredentialStore = new SingleUserInMemoryCredentialStore
                            {
                                ConsumerKey = consumerKey,
                                ConsumerSecret = consumerSecret,
                                AccessToken = twitterToken.Token,
                                AccessTokenSecret = twitterToken.TokenSecret                                
                            }
                        };

var twitterCtx = new TwitterContext(auth);

  var acc = (from user in twitterCtx.Account where user.Type == AccountType.VerifyCredentials select user).FirstOrDefault(); 
```

# mysql - 在一个巨大的表中更改 mysql 字段名称

> ID：13771304
> 
> 赞同：7
> 
> 时间：2012-12-07T21:33:45.760
> 
> 标签：mysql, alter

我有一个有 2100 万行的表。我必须更改其中一个行名。当我尝试查询“alter table company change id new_id int(11)”时；查询永远不会结束。

有没有一种简单的方法来更改大 mysql 表的字段名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:32:46.070

使用 pt-online-schema-change 进行长时间运行的 ALTER TABLE 更改，而不会将自己锁定在表之外。

[http://www.percona.com/doc/percona-toolkit/pt-online-schema-change.html](http://www.percona.com/doc/percona-toolkit/pt-online-schema-change.html)

完成更改通常需要*更长*的时间，但您仍然可以在表执行工作时对其进行读取和写入。

您还可以收听作者的网络研讨会，讨论它的工作原理和一些注意事项：

[http://www.percona.com/webinars/2012-05-02-zero-downtime-schema-changes-in-mysql](http://www.percona.com/webinars/2012-05-02-zero-downtime-schema-changes-in-mysql)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T21:45:28.337

首先，在任何事情之前，备份表：

```
mysqldump -uroot -p db big_table > /tmp/big_table.backup.sql 
```

执行 ALTER 命令时要记住的一件事是**绝对**确保您具有相同的列详细信息，用于您不想更改的更改。

例如：

```
ALTER TABLE big_table MODIFY COLUMN id INT(11) 
```

会跳过任何其他内容，例如`AUTO_INCREMENT`and `NOT NULL`。所以最好将它也包含在alter语句中。

```
ALTER TABLE big_table MODIFY COLUMN id INT(11) NOT NULL AUTO_INCREMENT; 
```

基本上只需复制 ID 列的创建语句区域并替换您想要的内容并将其包含到修改语句中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:23:46.460

在巨大的 Mysql 表中更改字段名称的耗时较少的方法是：

CREATE TABLE new_big_table SELECT id as new_id,field1,field2,field3 FROM big_table。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T22:54:38.517

您可以简单地执行以下操作：

# MyISAM 表

```
CREATE TABLE big_table_new LIKE big_table;
ALTER TABLE big_table_new MODIFY COLUMN id INT(11);
ALTER TABLE big_table_new DISABLE KEYS;
INSERT INTO big_table_new SELECT * FROM big_table;
ALTER TABLE big_table_new ENABLE KEYS;
ALTER TABLE big_table RENAME big_table_bak;
ALTER TABLE big_table_new RENAME big_table; 
```

# InnoDB 表

```
CREATE TABLE big_table_new LIKE big_table;
ALTER TABLE big_table_new MODIFY COLUMN id INT(11);
INSERT INTO big_table_new SELECT * FROM big_table;
ALTER TABLE big_table RENAME big_table_bak;
ALTER TABLE big_table_new RENAME big_table; 
```

当你完成后，`big_table_bak`就是你的备份。

如果您对新的感到满意，`big_table`您可以运行

```
DROP TABLE big_table_bak; 
```

如果你想恢复，你可以运行

```
DROP TABLE big_table;
ALTER TABLE big_table_bak RENAME big_table; 
```

试试看 ！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:38:54.403

你有什么想法：

1.  导出所有数据并截断表
2.  更改表
3.  更改导出文件中的行名
4.  导入文件

这只是一个快速的想法，但不会很快（导出/导入）。

或者只是尝试在夜间几个小时的维护期间进行 ALTER？:)

# java - 在数组列表中使用多态性时调用子方法

> ID：13771308
> 
> 赞同：3
> 
> 时间：2012-12-07T21:34:34.750
> 
> 标签：java, inheritance, polymorphism

我有一个小项目，我正在处理继承和多态性。我有一个 Employee 类型的 ArrayList，其中包含 Hourly 和 Salary 员工对象。我希望能够使用 for 循环来调用`calcPay`Hourly 类中的函数，前提是 Employee 类型的 ArrayList 中的对象是 Hourly 员工。线

```
System.out.println("Wage: " e.calcPay()); 
```

给出错误`The method calcPay() is undefined for type employee`。你如何使对象失望？我查看了很多论坛，但找不到允许我内联或不编写必须包含在 Employee 的所有子类中的抽象方法的选项。任何见解将不胜感激。

```
public class Driver {

     public static void main(String[] args) {

          ArrayList<Employee> list = new ArrayList<Employee>();
          Employee emp1 = new Hourly("Hourly Emp", "123 E Center", "555-555-5555", 00001, "123-45-6789", 12.75);
          Employee emp2 = new Salary("Salary Emp", "123 E Center", "555-555-5555", 00001, "123-45-6789");

          list.add(emp1);
          list.add(emp2);

          for(Employee e : list){
              if(e instanceof Hourly)
              {
                  System.out.println("Wage: " e.calcPay());
              }
           }
    }

    public abstract class Employee {

        private String name, address, phone, ssn;
        private int empNo;

        Employee(String name, String address, String phone, int empNo, String ssn)
        {
            this.name = name;
            this.address = address;
            this.phone = phone;
            this.empNo = empNo;
            this.ssn = ssn;
        }
    }

    public class Hourly extends Employee {

        private double wage;

        Hourly(String name, String address, String phone, int empNo, String ssn, double wage) 
        {
            super(name, address, phone, empNo, ssn);        
                    this.wage = wage;
        }

        public double calcPay(double hours)
        {
                return wage * hours;
        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:35:39.753

即使您确定 e 是 Hourly 类型，您仍然需要转换它并使用`Hourly`type 来调用`calcPay()` ，因为 e 是 Employee 类型，而 Employee 不知道任何`calcPay()`方法，因为您已定义`calcPay()`为唯一的`Hourly`类方法。

```
 if(e instanceof Hourly)
              {
                 Hourly hourly = (Hourly)e;   
                  System.out.println("Wage: " hourly.calcPay());
              } 
```

如果您希望所有 Employee 实例都可以访问 calcPay()，则需要在 Employee 类中将 calcPay() 定义为抽象方法，这样就可以避免强制转换。

**更新：**

```
 if(e instanceof Hourly)
              {
                  System.out.println("Wage: " ((Hourly)e).calcPay());
              } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:37:37.907

如果`calcPay`所有 s 都支持`Employee`，那么它应该是 中的一个抽象方法`Employee`，它可以让你调用它而完全不必向下转换。

# javascript - HTML5 画布中的中心（比例字体）文本

> ID：13771310
> 
> 赞同：25
> 
> 时间：2012-12-07T21:34:56.200
> 
> 标签：javascript, jquery, html, canvas, fonts

我希望能够在我可以计算的矩形区域内将单行文本居中。我期望在画布上的 2D 几何体中做的一件事就是将宽度未知的东西居中。

我听说作为一种解决方法，您可以在 HTML 容器中创建文本，然后调用 jQuery 的`width()`函数，但是我没有正确处理对文档正文的瞬时添加？宽度为 0。

如果我有一行文本，比填充屏幕中的大部分宽度要短得多，我怎么知道它在我知道的字体大小的画布上有多宽？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-08T01:25:38.843

您可以使用[measureText来做到这一点](http://www.w3.org/TR/2011/WD-2dcontext-20110405/#dom-context-2d-measuretext)

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d")

canvas.width = 400;
canvas.height = 200;

ctx.fillStyle = "#003300";
ctx.font = '20px sans-serif';

var textString = "Hello look at me!!!",
    textWidth = ctx.measureText(textString ).width;

ctx.fillText(textString , (canvas.width/2) - (textWidth / 2), 100); 
```

**[现场演示](http://jsfiddle.net/loktar/a9zhc/2/)**

**[更详细的演示](http://jsfiddle.net/loktar/a9zhc/)**

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-02-27T23:27:45.423

如果您不需要文本的宽度，而只想使文本居中，您可以这样做

```
 canvas_context.textBaseline = 'middle';
  canvas_context.textAlign = "center"; 
```

这应该将文本放在垂直和水平居中。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-12T13:40:36.627

[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign)在`textAlign`描述中声明对齐是基于上下文方法*的 x 值。*`fillText()`也就是说，该属性不会将画布中的文本水平居中；它将文本围绕给定的 x 坐标居中。类似的适用于`textBaseLine`.

因此，为了使文本在两个方向上居中，我们需要设置这两个属性并将文本定位在画布的中间。

```
ctx.textBaseline = 'middle'; 
ctx.textAlign = 'center'; 

ctx.fillText('Game over', canvas_width/2, canvas_height/2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-14T15:26:15.703

您可以使用**ctx.textAlign = "center";** 将项目对齐到中心

```
var canva = document.getElementById("canvas");
ctx.textAlign = "center"; // To Align Center
ctx.font = "40px Arial"; // To change font size and type
ctx.fillStyle = '#313439'; // To give font 
ctx.fillText("Text Center", 150 ,80); 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-12-07T21:39:01.113

您所做的是使用负文本缩进将文本渲染到屏幕外，然后获取大小。

```
text-indent: -9999px 
```

请参阅：[使用“文本缩进”隐藏文本](https://stackoverflow.com/questions/2794656/hiding-text-using-text-indent)

# python - 在 Python 虚拟机中创建新语言

> ID：13771312
> 
> 赞同：2
> 
> 时间：2012-12-07T21:35:02.733
> 
> 标签：python, bytecode, dsl, vm-implementation

是否可以为 Python 虚拟机创建一种新语言？我正在阅读[http://late.am/post/2012/03/26/exploring-python-code-objects](http://late.am/post/2012/03/26/exploring-python-code-objects)，博主在其中讨论了 Python 代码对象。在其中，他讨论了将代码对象反汇编为字节码以及其中符号的含义。

这让我觉得可能有其他方法来构造这个字节码。我对在 Python 字节码中创建沙盒语言以便 Python 可以加载它的能力感到好奇。使用 Python 本身进行沙盒处理似乎几乎是不可能的，但这似乎为另一种实现语言开辟了道路。

如果我想从事这项事业，我会从哪里开始？什么可能是更好的方法，我在哪里可以找到更多关于其他方法的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:15:54.190

[为什么幸运的硬汉](http://en.wikipedia.org/wiki/Why_the_lucky_stiff)曾经编写[了](https://github.com/whymirror/unholy)一个将 Ruby 代码编译成 Python 字节码的脚本。我记得它适用于简单的 Ruby 脚本。您可以查看消息来源以了解他是如何做到的。

**编辑**：所以他所做的是让 Ruby VM 生成 Ruby 字节码，而不是将该字节码转换为 Python。看看 Python 字节码是如何组装的仍然很有趣:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:32:50.510

[我认为ply](http://www.dabeaz.com/ply/)是一个很好的起点，这是一个使用 ply 的 Lisp 实现：[http ://www.juanjoconti.com.ar/files/python/mini-lisp/](http://www.juanjoconti.com.ar/files/python/mini-lisp/)

我不确定 ply 是否可以使用 Python 的[ast](http://docs.python.org/2/library/ast.html)模块生成语法树，但应该可以。

# haskell - 与 `seq` 相比，`evaluate` 安全吗？

> ID：13771314
> 
> 赞同：10
> 
> 时间：2012-12-07T21:35:11.177
> 
> 标签：haskell, lazy-evaluation, seq

如[this answer所示，在](https://stackoverflow.com/a/12620418/1333025)等式推理方面`seq`结合使用`undefined`会做非常奇怪的事情，例如它可以使任何单子失败。另一个例子是在[这个问题](https://stackoverflow.com/q/12687392/1333025)中。

最近我偶然发现[`evaluate :: a -> IO a`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html#v:evaluate)它做了类似的事情 - 它评估它对 WHNF 的论点，但仅在`IO`评估动作时。这似乎更安全，因为人们期望“`IO`我们可以做任何事情”。当然，它不能在任何地方使用，但通常需要评估表达式以某种方式与`IO`操作相关（例如在使用 s 时强制生成线程评估计算而不是消费线程`MVar`）。

所以我想问一下，安全性如何`evaluate`？是否有可能创建示例（`IO`当然涉及）它打破了对代码的推理`seq`？或者我可以将其视为`seq`（如果特定程序可能的话）的安全替代品吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T03:58:03.753

不，您仍然会遇到由命令引起的相同问题`seq`，因为在 的第一个参数中使用的任何 monad`evaluate`都会破坏其 monad 规则。根据ertes回答中的规则：

> 在 Kleisli 范畴中，monad 产生的`return`是恒等态射并且`(<=<)`是组合。所以`return`必须是一个身份`(<=<)`：
> 
> ```
> return <=< x = x 
> ```

这意味着您应该能够在不更改程序操作的情况下用任何有效的 monad`return <=< x`替换。`x`

将其与`evaluate`功能一起使用...

```
evaluate (return <=< undefined :: a -> Identity b) >> putStrLn "hello" 
```

输出你好。使用 what 应该是等效的语句替换`return <=< undefined`为`undefined`：

```
evaluate (undefined :: a -> Identity b) >> putStrLn "hello" 
```

而是导致`Prelude.undefined`异常。

这只发生在评估功能上。请注意，`return`它的类型签名与`evaluate`. 如果您在上述命令中替换为 ，则两个命令的结果操作是相同的（它们输出`evaluate`）。`return``hello`

# c++ - 封闭循环变量的生命周期和范围是多少？

> ID：13771318
> 
> 赞同：5
> 
> 时间：2012-12-07T21:35:26.780
> 
> 标签：c++, loops, scope

> **可能重复：**
> [while 和 for 循环的范围是什么？](https://stackoverflow.com/questions/7880658/what-is-the-scope-of-a-while-and-for-loop)

```
for (int32 segNo = 0; segNo < 10; ++segNo)
{
    my_Object cm;
} 
```

每次通过循环时都会调用对象 cm 的构造函数和析构函数吗？

如果是这样，将在循环变量递增之前还是之后调用析构函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T21:37:04.420

是的。并且在增量之前调用析构函数。我知道，简短的回答，但就是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T21:42:32.133

```
#include <iostream>
struct Int {
  int x;
  Int(int value):x(value){}
  bool operator<(int y)const{return x<y;}
  void increment() { std::cout << "incremented to " << ++x << "\n";}
};
struct Log {
  Log() { std::cout << "Log created\n";}
  ~Log() { std::cout << "Log destroyed\n";}
};

int main()
{
    for(Int i=0; i<3; i.increment())
    {
        Log test;
    }
} 
```

结果：

```
Log created
Log destroyed
incremented to 1
Log created
Log destroyed
incremented to 2
Log created
Log destroyed
incremented to 3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T21:39:57.020

对象的生命在那些花括号里面。

默认构造函数在代码的第 3 行被调用。当您到达 } 时，将调用析构函数。然后你的循环增加，然后检查条件。如果它返回 true，则创建另一个对象（并调用构造函数）。

# database - 具有数据库连接和方法的 Web 服务

> ID：13771319
> 
> 赞同：-1
> 
> 时间：2012-12-07T21:35:26.903
> 
> 标签：database, web-services, sql-server-2008, axis2

我已经用 android 客户端创建了 web 服务

Web 服务有 add 方法和 android 客户端发送参数并获取结果。

但是现在，我需要在我的 Web 服务上连接数据库，以便 android 客户端需要在数据库上插入、更新和删除功能。

我在 Web 服务上使用了 java axis2。

在 Web 服务上实现数据库连接的最佳方法是什么？

我可以像使用 jdbc 连接数据库的普通 java 类一样，还是需要与 Hibernate 和 Axis2 集成的 Spring 框架？

是否有教程或示例应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:07:55.807

是的，您可以使用通过 JDBC 连接到数据库的普通 Java 类。不需要 Spring Framework，除非您正在创建大量访问数据库的类，此时 Spring 可能会让您更轻松地管理所有内容。Oracle 为您提供了详尽的[JDBC 基础](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)教程，您应该阅读。

# actionscript-3 - Flash Player 10 上下文菜单项处理程序的来源？

> ID：13771321
> 
> 赞同：0
> 
> 时间：2012-12-07T21:35:34.533
> 
> 标签：actionscript-3, flash

我在哪里可以获得 Flash Player 10 上下文菜单“打印”处理程序的来源？

# django - 如何在 Django 模板中使用变量索引访问列表？

> ID：13771323
> 
> 赞同：13
> 
> 时间：2012-12-07T21:35:37.770
> 
> 标签：django, django-templates

说，我有两个对象列表，`foo`并且`bar`. `foo`在Django模板中，在遍历`bar`. 这里的问题是我认为 Django 模板系统不支持使用变量索引访问列表。真的吗？如果是这样，是否有任何解决该问题的方法（除了使用硬编码索引重复同一段 html/模板代码）？

代码演示：

```
{% for x in foo %}
  <span>{{ x.name }} vs. {{ bar.{{ forloop.counter0 }}.name }}</span>
{% endfor %} 
```

Django 模板不喜欢`{{ bar.{{ forloop.counter0 }}.name }}`

注意：我使用的是 Django 1.4

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T21:40:10.443

您是正确的，Django 模板不直接允许这样做，这是因为 Django 试图强迫您将几乎所有的表示逻辑放在您的视图中。您最好的选择是在您的视图中在您的上下文中创建一个字典列表，以便您可以对其进行迭代并按名称访问成员。或者：

*   `zip`将您的列表放在一起，而不是使它们成为 dict 并使用`{% for fooItem, barItem in zippedList %}`.
*   使用限制较少的模板语言，例如[Jinja2](http://jinja.pocoo.org/)
*   按照 Yuji Tomita 的建议，使用自定义模板过滤器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T21:45:37.227

对，你不能解析变量名。一定要非常努力地把这个逻辑放在视图中。

但是有 5% 的情况下，我确实发现这有时会在视图中需要*过多的*逻辑/模板作者控制之外的更改。我开始接受一些个人定制，允许在视图中分配变量以及简单的变量解析。

不过，使用模板引擎“所有查找合二为一”系统（索引、属性、键）构建模板标签非常简单。

```
from django.template import Variable, VariableDoesNotExist

@register.assignment_tag()
def resolve(lookup, target):
    try:
        return Variable(lookup).resolve(target)
    except VariableDoesNotExist:
        return None

{% resolve some_list some_index as value %}
{% resolve some_dict some_dict_key as value %} 
```

# java - JavaFX 相当于 Swing 的 JSpinner？

> ID：13771325
> 
> 赞同：8
> 
> 时间：2012-12-07T21:35:48.543
> 
> 标签：java, swing, user-interface, spinner, javafx-2

我试图找到一个像[JSpinner](http://docs.oracle.com/javase/6/docs/api/javax/swing/JSpinner.html)这样的微调器组件以在我的 JavaFX 应用程序中使用，但没有这样的组件。

你推荐我用什么 JavaFX 组件来代替微调器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T23:02:46.727

**Java 8 更新**

JavaFX 8 现在有一个内置的[Spinner](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Spinner.html)类作为核心 JavaFX 库的一部分（如[SWdV](https://stackoverflow.com/a/29376454/1155209)对此问题的回答中所述）。

**旧的（Java 8 之前的）答案**

[JFXtras](http://jfxtras.org/)库中有一个微调器控件，您可以使用该实现或可能根据您的需要对其进行调整。

建议在未来的 JavaFX 版本中包含微调器控件。目标版本目前未指定，因此它甚至可能不会随 Java 8 一起发布。[提议的微调器控件](http://javafx-jira.kenai.com/browse/RT-5747)有一个[可用性设计文档](http://openjdk.java.net/projects/openjfx/ux/spinner/index.html)。[open-jfx](http://openjdk.java.net/projects/openjfx/)项目可以接受可用性设计的高质量实现，以包含在核心 JavaFX 平台或[JavaFX UI 控制沙箱](http://fxexperience.com/2012/10/announcing-the-javafx-ui-controls-sandbox/)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T19:03:26.257

JavaFX 8 有一个[Spinner](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Spinner.html)类。（但早期版本没有）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-20T19:01:03.603

您还可以检查并遵循我对微调器实现问题的初始方法，您可以在此处找到： [https ://github.com/bluevoxel/Custom_Spinner_JavaFX8/wiki](https://github.com/bluevoxel/Custom_Spinner_JavaFX8/wiki)

这就是它的样子：

![在此处输入图像描述](../Images/a97c1f7cdb44b4d5a73f648d290fd122.png)

它的功能正在不断扩展，因此我将非常感谢您的反馈。

**2014 年 4 月 11 日更新**

有一个具有扩展功能的新版本，包括`double`s、`ContextMenu`用于选择的附加可定制类、用于将自定义功能上传到按钮的`incrementation value`附加方法。`increase/decrease`检查以下链接以了解更多信息：

[https://gist.github.com/bluevoxel/c730a101ba812728a235](https://gist.github.com/bluevoxel/c730a101ba812728a235)

此外，新的 Outlook 缺少外部图像文件：

![在此处输入图像描述](../Images/c21dbe3f659b66f2f71d3fc5a43187ba.png)

# python - Python 中的 Atom 到 RSS 转换工具

> ID：13771326
> 
> 赞同：1
> 
> 时间：2012-12-07T21:35:50.167
> 
> 标签：python, rss, atom-feed

这篇文章真的要表明我对这两种格式缺乏了解，但是是否存在将 Atom 文档转换为 RSS 文档的工具？

我希望 Python 中有一个预先存在的库可供我使用，但显然如果不是太麻烦，我不介意自己编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:43:58.967

我不知道有什么可以一步完成的（你试过搜索[The Cheese Shop](http://pypi.python.org)，对吗？），但你可以很容易地分两步完成。

我使用[feedparser](http://pypi.python.org/pypi/feedparser/5.1.2)来解析 Atom 和 RSS（1.0 和 2.0），它在处理所有烦人的边缘情况方面做得非常出色，包括常见但不完全标准的使用、损坏的编码等。

然后生成 RSS 应该是容易的部分——可能有很多库可以用于此，但我真的没有推荐的。

同时，这看起来很有趣：[interssection](https://github.com/narfdotpl/interssection)允许您读取多个 Atom 和 RSS 提要，并对它们进行设置操作，并将结果以任何格式导出到单个提要。据推测，如果“多个”提要是 1 的列表，它会正常工作……问题是“目前”（这是 2 年前写的），Atom 1.0 是唯一受支持的输出……</p>

# javascript - jQuery：在所有事件发生变化后只运行一次回调函数

> ID：13771328
> 
> 赞同：2
> 
> 时间：2012-12-07T21:35:51.540
> 
> 标签：javascript, jquery, events

这是我的示例代码：

```
var contents = $('#contents');
contents.bind('DOMSubtreeModified', function () {
  ...
});

...

/* other people's code */
var contents = $('#contents');
contents.append(...);
contents.append(...);
...
... 
```

我绑定到事件“DOMSubtreeModified”，我注意到我的回调函数将被调用超过 10 次，因为许多元素被插入/修改为连续的单独调用。我无法修改其他人的代码，也无法控制他们将如何实现附加新元素。有没有办法让我的回调函数在所有元素附加/更改*后只被调用一次？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:44:54.670

您可以使用`setTimeout()`. 这是一个工作[小提琴](http://jsfiddle.net/liho1eye/qDD8N/)

```
var timer;
$("#content").on("DOMSubtreeModified", function()
{
    if (timer) clearTimeout(timer);
    timer = setTimeout(function() { alert("finished"); }, 100);
});

$("button").on("click", function()
{
    $("#content").append("<span>FUS</span>");
    $("#content").append("<span> RO</span>");
    $("#content").append("<span> DAH</span>");
});​ 
```

# sql - 运行 SQL 查询

> ID：13771332
> 
> 赞同：0
> 
> 时间：2012-12-07T21:36:11.927
> 
> 标签：sql, variables, ms-access-2007

我对使用 Microsoft Access 查询非常陌生，我想在 SQL 中运行如下查询：

```
 SELECT StudentID FROM tbl_Student WHERE FirstName = Joe;

    StudentIDVariable = resultfromQuery 
```

然后在下一个查询中使用的查询：

```
SELECT * FROM tbl_Purchases WHERE StudentID = StudentIDVariable; 
```

感谢您的任何帮助！不知道从哪里开始，有人可以给我一个例子，说明这段代码如何在微软访问中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:51:54.163

您可以在查询中连接这两个表。sql 看起来像这样：

SELECT tbl_Purchases.* FROM tbl_Purchases 内部连接 ​​tbl_Student on tbl_Purchases.StudentID = tbl_Student.StudentID WHERE tbl_Student.FirstName = Joe

Access 中的查询设计器可以很好地处理这种查询。请注意，如果有多个记录与 tbl_Student 中的 FirstName 字段匹配，您将获得所有这些记录的购买记录。

希望这可以帮助。

# wolfram-mathematica - Mathematica 的积分只是吐出输入......不解决积分

> ID：13771335
> 
> 赞同：4
> 
> 时间：2012-12-07T21:36:14.497
> 
> 标签：wolfram-mathematica

只是寻找一些数学帮助。当我尝试计算这个积分时：

```
Integrate[Cos[t]/(1 + b^2 t^2 - (2*b*c*t)/a + c^2/a^2)^(3/2), { t, -Infinity, Infinity}, Assumptions -> {a, b, c} \[Element] Reals] 
```

Mathematica 刚刚吐出：

```
Integrate[Cos[t]/(1 + c^2/a^2 - (2 b c t)/a + b^2 t^2)^(3/2), {t, -\[Infinity], \[Infinity]}, Assumptions -> (a | b | c) \[Element] Reals] 
```

我将如何评估这个积分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:44:37.800

简化。首先，你不需要 3 个独立的参数，只需要两个。那么这个积分等价于（通过变量的变化和参数的重新缩放）

```
Integrate[Cos[(a - b t)]/(1 + t^2)^(3/2), {t, -Infinity, Infinity}, 
          Assumptions -> {a, b} \[Element] Reals] 
```

有答案：

> 2 Abs[b] BesselK[1, Abs[b]] Cos[a]

常数 a、b 与原来的不同，但如果您对变量进行简单的重新缩放和更改，就可以通过它们来表达。这是您在参数空间中的漂亮功能：

```
Plot3D[2 Abs[b] BesselK[1, Abs[b]] Cos[a], {a, -5, 5}, {b, -5, 5}, 
 PlotRange -> All, Mesh -> All, ColorFunction -> "DarkRainbow", 
 MeshStyle -> Opacity[.1], AxesLabel -> {a, b}] 
```

![在此处输入图像描述](../Images/b9f0d2e9e78945a8659b7f5ae712cff4.png)

# sql - 比较oracle中的列字符串值

> ID：13771336
> 
> 赞同：2
> 
> 时间：2012-12-07T21:36:14.747
> 
> 标签：sql, oracle, oracle10g

我有一个表，我需要在其中比较两列的值。

```
Col1      Col2        Col3
------------------------------------
1         sssXYZ2121  XYZ 
```

现在匹配可能不是一个完美的词对词匹配。

例如比赛

```
Col2    Col3
-----   --------------------
XYZ     XYZ                  (word to word match)
XYZ     xyz                  (can be case insensitive)
XYZ     gxyzf                (need to search within a string )
XYZ     xyzjjjjjjjjj         (need to search within a string )
XYZ     gggggXYZ             (need to search within a string )
XYZ     Xavier Yellow Zebra  (Match the full form of the abbreviation) 
```

现在我需要找到其中的值`Col3`不匹配的所有行`Col2`。我正在使用 Oracle 10g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:44:37.123

XYZ、XYZ（字对字匹配）

```
col2 = col3 
```

XYZ、xyz（可以不区分大小写）

```
upper(col2) = upper(col3) 
```

XYZ、gxyzf（需要在字符串中搜索）

```
upper(col2) like '%'||upper(col3)||'%' 
```

XYZ, xyzjjjjjjjjj（需要在一个字符串中搜索）

```
upper(col2) like upper(col3)||'%' 
```

XYZ, gggggXYZ (需要在一个字符串中搜索)

```
upper(col2) like '%'||upper(col3) 
```

XYZ，Xavier Yellow Zebra（匹配缩写的完整形式）

在另一张桌子上查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:46:52.823

也许这样的事情会为你工作。where 子句有两个条件，只需要满足其中一个。当在 Col2 中找到 Col3 值时满足第一个条件，忽略大小写。当 Col2 是 Col3 的扩展版本时，满足第二个条件。

```
SELECT Col1, Col2, Col3 FROM Tbl1
LEFT JOIN Abbr ON Col3 = Abbr.Key
WHERE INSTR(UPPER(Col2), UPPER(Col3)) > 0 OR Col2 = Abbr.ExpandedName 
```

如果您愿意，您可以更改第二个条件以允许 Col2 包含扩展名称，而不是完全按照第一个条件的工作方式作为扩展名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T00:23:19.287

[SQL小提琴](http://sqlfiddle.com/#!4/5a1f5/2)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE ABBREVIATIONS(
  Short VARCHAR2(10)   CONSTRAINT ABBR__S__PK PRIMARY KEY
                       CONSTRAINT ARRB__S__CHK CHECK( Short = UPPER( Short ) ),
  Value  VARCHAR2(100) CONSTRAINT ABBR__V__U UNIQUE
                       CONSTRAINT ABBR__V__CHK CHECK( Value IS NOT NULL AND Value = UPPER( Value ) )
);

INSERT INTO Abbreviations VALUES ( 'XYZ', 'XAVIER YELLOW ZEBRA' );

CREATE TABLE Tests ( Col1, Col2, Col3 ) AS
          SELECT 1, 'XYZ', 'XYZ' FROM DUAL
UNION ALL SELECT 2, 'xyz', 'XYZ' FROM DUAL
UNION ALL SELECT 3, 'XYZ', 'xyz' FROM DUAL
UNION ALL SELECT 4, 'xyz', 'xyz' FROM DUAL
UNION ALL SELECT 5, 'xyz', 'abcdXYZ' FROM DUAL
UNION ALL SELECT 6, 'xyz', 'XYZefg' FROM DUAL
UNION ALL SELECT 7, 'xyz', 'ghiXYZjkl' FROM DUAL
UNION ALL SELECT 8, 'xyz', 'XaViEr YelloW ZeBrAXXYYZZ' FROM DUAL
UNION ALL SELECT 9, 'Xavier Yellow Zebra', 'XXYZZ' FROM DUAL
UNION ALL SELECT 10, 'xyz', 'xy -- Not a match -- z' FROM DUAL; 
```

**查询 1**：

```
SELECT *
FROM   Tests t
WHERE  UPPER( Col3 ) LIKE '%' || UPPER( Col2 ) || '%'
OR     EXISTS (
  SELECT 'X'
  FROM   ABBREVIATIONS a
  WHERE  (   UPPER( t.col2 ) = a.Short
          OR UPPER( t.Col2 ) = a.Value )
  AND    REPLACE( UPPER( Col3 ), a.Short, a.Value ) LIKE '%' || a.Value || '%'
) 
```

**[结果](http://sqlfiddle.com/#!4/5a1f5/2/0)**：

```
| COL1 |                COL2 |                      COL3 |
|------|---------------------|---------------------------|
|    1 |                 XYZ |                       XYZ |
|    2 |                 xyz |                       XYZ |
|    3 |                 XYZ |                       xyz |
|    4 |                 xyz |                       xyz |
|    5 |                 xyz |                   abcdXYZ |
|    6 |                 xyz |                    XYZefg |
|    7 |                 xyz |                 ghiXYZjkl |
|    8 |                 xyz | XaViEr YelloW ZeBrAXXYYZZ |
|    9 | Xavier Yellow Zebra |                     XXYZZ | 
```

# groovy - 当抛出异常时，如何使用 GPars 知道所有线程都已完成？

> ID：13771337
> 
> 赞同：1
> 
> 时间：2012-12-07T21:36:16.360
> 
> 标签：groovy, gpars

在线程抛出异常的情况下，我如何才能等到所有**未抛出异常的**线程都完成（因此用户在一切停止之前不会再次启动）？

我以几种不同的方式使用 GPar，因此我需要为每种方式制定策略（并行集合、异步闭包和 fork/join）。异常不会被掩埋，它们可以通过承诺、getChildrenResults 等得到很好的处理，所以**这不是问题**（感谢 Vaclav Pech 的回答）。我只需要确保**主线程一直等到仍在运行的任何内容**完成或以其他方式停止。

例如，当使用并行集合时，一些线程会继续运行，而一些线程在异常发生后永远不会启动。所以很难说有多少人在外面等待，或者有可能抓住他们。

我的猜测是可能有一种方法可以使用线程池（在这种情况下为 GParsPool）。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:04:07.463

我相信我有解决该问题的方法，经过全面测试后，我在应用程序中实现了它并且它有效。

withPool 闭包传入创建的池（jsr166y.ForkJoinPool）作为第一个参数。我可以抓住它并将其存储在一个变量（**currentPool**）中，供主线程稍后使用，如下所示：

```
 GParsPool.withPool { pool ->
        currentPool = pool 
```

当抛出异常并返回主线程进行处理时，我可以让它等到一切都完成，如下所示：

```
 } catch (Exception exc) {
        if (currentPool) {
            while (!currentPool.isQuiescent()) {
                Thread.sleep(100)
                println 'waiting for threads to finish'
            }
        }

        println 'all done'
    } 
```

isQuiescent() 似乎是确保没有更多工作要做的安全方法。

请注意，在测试过程中，我还发现异常似乎并没有像我最初想象的那样终止循环的执行。如果我有一个 500 个列表并执行了 eachParallel，那么无论第一个是否有错误，它们都会运行。所以我不得不在并行循环的异常处理程序中使用 currentPool.shutdownNow() 来终止循环。另请参阅：[GPars - 提前终止并行收集的正确方法](https://stackoverflow.com/questions/13850284/gpars-proper-way-to-terminate-a-parallel-collection-early)

这是实际解决方案的完整简化表示：

```
void example() {
    jsr166y.ForkJoinPool currentPool

    AtomicInteger threadCounter = new AtomicInteger(0)
    AtomicInteger threadCounterEnd = new AtomicInteger(0)

    AtomicReference<Exception> realException = new AtomicReference<Exception>()

    try {
        GParsPool.withPool { pool ->
            currentPool = pool

            (1..500).eachParallel {
                try {
                    if (threadCounter.incrementAndGet() == 1) {
                        throw new RuntimeException('planet blew up!')
                    }

                    if (realException.get() != null) {
                        // We had an exception already in this eachParallel - quit early
                        return
                    }

                    // Do some long work
                    Integer counter=0
                    (1..1000000).each() {counter++}

                    // Flag if we went all the way through
                    threadCounterEnd.incrementAndGet()
                } catch (Exception exc) {
                    realException.compareAndSet(null, exc)

                    pool.shutdownNow()
                    throw realException
                }
            }
        }
    } catch (Exception exc) {
        // If we used pool.shutdownNow(), we need to look at the real exception.
        // This is needed because pool.shutdownNow() sometimes generates a CancellationException
        // which can cover up the real exception that caused us to do a shutdownNow().
        if (realException.get()) {
            exc = realException.get()
        }

        if (currentPool) {
            while (!currentPool.isQuiescent()) {
                Thread.sleep(100)
                println 'waiting for threads to finish'
            }
        }

        // Do further exception handling here...
        exc.printStackTrace()
    }
} 
```

回到我之前的例子，如果我在 4 核机器上第一次抛出异常，大约有 5 个线程排队。shutdownNow() 将在大约 20 个左右的线程通过后切断事物，因此在顶部附近进行“提前退出”检查有助于这 20 个左右的线程尽快退出。

只是把它贴在这里以防它帮助别人，以换取我在这里得到的所有帮助。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:46:56.047

我相信您将需要捕获异常，然后返回预期结果以外的其他内容（例如，如果您期望一个数字，则返回 String 或 null），即；

```
@Grab('org.codehaus.gpars:gpars:0.12')
import static groovyx.gpars.GParsPool.*

def results = withPool {
  [1,2,3].collectParallel {
    try {
      if( it % 2 == 0 ) {
        throw new RuntimeException( '2 fails' )
      }
      else {
        Thread.sleep( 2000 )
        it
      }
    }
    catch( e ) { e.class.name }
  }
} 
```

# html - css 属性定义

> ID：13771338
> 
> 赞同：2
> 
> 时间：2012-12-07T21:36:23.030
> 
> 标签：html, css

我有一个用于表定义的 css 类，如下所示

```
.tabborder
{
    border:           1px solid black;
    border-collapse:  collapse;
} 
```

然后我希望嵌套在具有 class="tabborder" 的元素中的所有`th`和元素执行以下操作`td`

```
.tabborder th, td
{
    border:           1px solid black;
    border-spacing:   0;
} 
```

在`th, td` 只是`th`或`td`按我想要的方式工作时不会工作。

有没有解决方法。我知道像下面这样编写单独的定义是可行的但是有没有一种有效的方法来做到这一点

```
 .tabborder th
{
    border:           1px solid black;
    border-spacing:   0;
}

 .tabborder td
{
    border:           1px solid black;
    border-spacing:   0;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:37:54.060

逗号用于对[单独的选择器进行分组](http://www.w3.org/TR/selectors/#grouping)。

> 一个以逗号分隔的选择器列表表示由列表中的每个单独选择器选择的所有元素的并集。（逗号是 U+002C。）例如，在 CSS 中，当多个选择器共享相同的声明时，它们可能会被分组到一个逗号分隔的列表中。空格可能出现在逗号之前和/或之后。

尽管`.tabborder`在第一个选择器中指定，但在任何后续选择器中都*没有隐含。*

```
.tabborder th,
.tabborder td /* you must specify .tabborder for each selector */
{
    border:           1px solid black;
    border-spacing:   0;
} 
```

[**编辑**] 或者，由于 a`tr`可以直接只包含`td`和`th`元素（[source](http://www.w3.org/TR/html-markup/tr.html#tr-content-model)），您可以结合[子`>`](http://www.w3.org/TR/CSS2/selector.html#child-selectors)选择器和[通用`*`](http://www.w3.org/TR/CSS2/selector.html#universal-selector)选择器（[fiddle](http://jsfiddle.net/jDz9u/)）：

```
.tabborder tr > *
{
    border: 1px solid #000000;   
    padding: 3px 6px;
}​ 
```

# android - How to stop sideloading a tablet only app on a handset in Android

> ID：13771343
> 
> 赞同：0
> 
> 时间：2012-12-07T21:36:38.990
> 
> 标签：android, screen-size

How can I stop the user from sideloading a tablet only application on a phone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:41:14.827

There are no mechanisms in the core Android OS to disable the ability to install an application based on the manifest filtration data for features like screen size, these values are only used by Google Play to determine which apps to show on which device. If a user somehow gets ahold of your APK through back channels, you cannot stop them from installing it.

However, after the application is installed, you can make use of technologies like the [License Verification Library (LVL)](http://developer.android.com/google/play/licensing/index.html) to keep applications that have been improperly installed (i.e. not through Google Play) from being used.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:42:19.273

You want to declare the following in the manifest: ([source](http://developer.android.com/guide/topics/manifest/supports-screens-element.html))

```
<supports-screens android:smallScreens="false"
                  android:normalScreens="false"
                  android:largeScreens="false"
                  android:xlargeScreens="true"/> 
```

Beyond that, just make sure the app is [licensed](http://developer.android.com/google/play/licensing/index.html).

# java - 将 Java 游戏转换为 Applet；不会加载图片

> ID：13771352
> 
> 赞同：0
> 
> 时间：2012-12-07T21:37:07.133
> 
> 标签：java, image, applet

所以我用Java做了一个非常大的游戏，我打算把它放在我的网站上，所以我把它弄乱了，把它变成了一个小程序。它启动并运行得很好，唯一的问题是它不会加载任何图片。这是我目前的做法：（请记住，这是一个 JPanel 扩展类，我在我的小程序类中创建了一个对象并添加到小程序中）

在 Screen(JPanel) 类中：

```
 for (int i = 0; i < tileset_ground.length; i++) {
        tileset_ground[i] = frame.loadImage("res/tileset_ground.png");
        tileset_ground[i] = createImage(new FilteredImageSource(tileset_ground[i].getSource(), new CropImageFilter(0, 26 * i, 26, 26)));
    } 
```

在框架（小程序）类中：

```
public Image loadImage(String url){
    return getImage(getCodeBase(), url);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:22:47.157

我发现当我尝试从 jar 文件或使用小程序加载图像时，我需要更多信息，而不仅仅是 /folder/file.name。我现在通常使用这种方法：

这是用于设置标签或其他东西的图​​标。

```
jLabel.setIcon(ImageIcon(getClass().getResource("/Folder/File.name"))); 
```

如果我想返回图像，我会使用这个：

```
Image image = ImageIcon(getClass().getResource("/Folder/File.name")).getImage(); 
```

有更好的方法可以做到这一点，但我发现这很容易而且足够好。

# ios - 创建 iOS 通用应用程序，如何检测所有 5 种分辨率？

> ID：13771353
> 
> 赞同：5
> 
> 时间：2012-12-07T21:37:11.080
> 
> 标签：ios, cocos2d-iphone

标题说得很好。我正在创建一个 iOS 应用程序，并且正在添加艺术资产。我有 iPhone 低分辨率（iPhone 3GS 或更低版本）、iPhone 视网膜（iPhone 4 或更高版本）、iPhone 5、iPad 低分辨率和 iPad 高分辨率的 5 个背景。

根据设备处理加载哪个背景的最佳方法是什么？

另外，有没有办法测试模拟器中所有 5 个的样子？当然，现在你只能测试 iPhone 和 iPad。

另外，这是一个游戏，如果这会有所作为，我正在使用 cocos2d。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T06:40:59.097

对于 cocos2D-iPhone，默认后缀如下：

*   **非视网膜 iPhone** : image.png
*   **视网膜 iPhone** : image-hd.png
*   **非视网膜 iPad** : image-ipad.png
*   **视网膜 iPad** : image-ipadhd.png

[维基](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3ahow_to_develop_retinadisplay_games_in_cocos2d)页面的注释：

> **警告**：**不**建议使用“@2x”后缀。Apple 以一种特殊的方式处理这些图像，这可能会导致您的 cocos2d 应用程序出现错误。

Cocos2D 将自动检测您的硬件并加载相应的图像。您可以更改 AppDelegate.m 中的默认后缀。

AFAIK，iPhone 5 图像没有后缀，因此您可以通过检测设备高度来手动检测和加载自定义精灵：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for iPhone 5
} else {
    // code for all other iOS devices
} 
```

正如其他人所说，您可以通过模拟器测试所有设备（硬件->设备）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T02:52:56.060

正如@Srikanth 提到的，包括 image.png 和 image@2x.png，系统会自动为高分辨率屏幕选择高分辨率的屏幕，为低分辨率屏幕选择较低的分辨率。这适用于 iPhone 和 iPad。

对于 iPhone 5，屏幕仍然是 Retina。系统会自动选择你的 -@2x 图像。您可以在 Interface Builder 或代码中定义自动布局（或弹簧和支柱）。

如果出于某种原因您绝对需要特定于 iPhone 5 屏幕的图像，我相信您可以添加 image-568h@2x.png，系统会自动为 4 英寸屏幕选择该图像。

我能想到您会在捆绑包中包含 -568h@2x 图像的唯一原因是用于启动图像：您需要一个特定于 4 英寸屏幕的图像。

此外，关于模拟器：您可以测试所有 5 种分辨率。在模拟器菜单栏中（屏幕顶部）选择硬件>设备。在这里，您可以选择所有 5 种分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:45:26.543

每个图像可以有两个版本

图像.png，图像@2x.png

如果它是 Retina 设备，系统将自动选择 image@2x.png

同样在模拟器中，您可以转到硬件-> 设备，然后选择是否要查看视网膜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T21:54:50.380

如果您使用的是 cocos2d，那么您需要在您的视网膜分辨率图像上使用 -hd 后缀。查看他们的[wiki 页面](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3ahow_to_develop_retinadisplay_games_in_cocos2d)以获取更多信息。

我自己不使用 cocos2d，但从它的声音来看，iPhone 5 的屏幕分辨率的处理方式与 iPad 的屏幕分辨率处理方式相同，方法是相应地调整布局。在 stackoverflow 中搜索应该会为 cocos2d 和 iPhone 5 产生一些好的结果。

# hadoop - 在 CDH3 上运行级联代码时出错 - 在缓存中找不到令牌

> ID：13771354
> 
> 赞同：0
> 
> 时间：2012-12-07T21:37:12.787
> 
> 标签：hadoop, cascading

运行级联代码时，有人可以帮我解决以下错误吗？当`CoGroup()`使用 a 连接两个数据流时会发生错误。如果将这两个数据流分别输出到接收器中，则它们很好。

我正在使用级联 2.0 和 Hadoop 0.20.2-CDH3u5。

```
12/12/07 13:52:46 INFO flow.Flow: [my_tst]  parallel execution is enabled: true
12/12/07 13:52:46 INFO flow.Flow: [my_tst]  starting jobs: 2
12/12/07 13:52:46 INFO flow.Flow: [my_tst]  allocating threads: 2
12/12/07 13:52:46 INFO flow.FlowStep: [my_tst] at least one sink does not exist
12/12/07 13:52:46 INFO flow.FlowStep: [my_tst] source modification date at: Thu Dec 06 10:15:32 EST 2012
12/12/07 13:52:46 INFO flow.FlowStep: [my_tst] starting step: (2/2)
12/12/07 13:52:47 INFO hdfs.DFSClient: Created HDFS_DELEGATION_TOKEN token 24769 for wagnerj
12/12/07 13:52:47 INFO security.TokenCache: Got dt for hdfs://nyxxx002.lab.dev:8020/user/wagnerj/.staging/job_201212070841_0008;…..
12/12/07 13:52:47 WARN snappy.LoadSnappy: Snappy native library is available
12/12/07 13:52:47 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/12/07 13:52:47 INFO snappy.LoadSnappy: Snappy native library loaded
12/12/07 13:52:47 INFO mapred.FileInputFormat: Total input paths to process : 1
12/12/07 13:52:47 INFO flow.FlowStep: [my_tst] submitted hadoop job: job_201212070841_0008
12/12/07 13:53:17 INFO flow.FlowStep: [my_tst] starting step: (1/2) cascd2
12/12/07 13:53:17 INFO mapred.FileInputFormat: Total input paths to process : 1
12/12/07 13:53:17 INFO mapred.FileInputFormat: Total input paths to process : 36
12/12/07 13:53:17 INFO mapred.JobClient: Cleaning up the staging area hdfs://nyxxx002.lab.dev:8020/user/wagnerj/.staging/job_201212070841_0009
12/12/07 13:53:17 ERROR security.UserGroupInformation: PriviledgedActionException as:wagnerj@LAB.DEV (auth:KERBEROS) cause:org.apache.hadoop.ipc.RemoteException: java.io.IOException: org.apache.hadoop.ipc.RemoteException: token (owner=wagnerj@LAB.DEV, renewer=mapred, realUser=, issueDate=1354906367141, maxDate=1355511167141, sequenceNumber=24769, masterKeyId=356) can't be found in cache
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3469)
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3437)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:57:17.607

没有看到源代码就无法判断。

# mysql - 查找在一周内创建“日期”的行

> ID：13771358
> 
> 赞同：2
> 
> 时间：2012-12-07T21:37:20.253
> 
> 标签：mysql, timestamp

所以基本上我正在尝试制作一个功能来在我的网站上显示热门文章。

我正在徘徊如何在 mysql 中找到他们一周前或不到一周前制作的行？当日期字段数据来自诸如“1283124091”之类的 unix 时间戳时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:43:57.900

```
 where lastActivity > UNIX_TIMESTAMP(NOW() - INTERVAL 7 day) 
```

请注意，这是 7 天的秒数。

如果您想要最近 7 个日历日的活动

```
 where lastActivity > UNIX_TIMESTAMP(CURDATE() - INTERVAL 7 day) 
```

# c - 将动态数组传递给c中的函数

> ID：13771360
> 
> 赞同：-2
> 
> 时间：2012-12-07T21:37:22.157
> 
> 标签：c, function

在我创建这个动态数组之后：

```
int *A = (int *) calloc(n,sizeof(int));
int *B = (int *) calloc(n,sizeof(int));
int *C = (int *) calloc(n,sizeof(int)); 
```

我需要将它们传递给这个函数`function2(A,B,C,n);`，但我得到函数'function2'的隐式声明。请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T21:41:00.867

您需要在调用它之前声明或定义该函数。所以像：

```
void function2(int *a, int *b, int *c, int n)
{
    ...
}

int main(int, char **)
{
    int *A, *B, *C, n = 123;

    ...

    A = (int *) calloc(n,sizeof(int));
    B = (int *) calloc(n,sizeof(int));
    C = (int *) calloc(n,sizeof(int));

    function2(A, B, C, n);

    ...

    return 0;
} 
```

或者

```
void function2(int *a, int *b, int *c, int n);

int main(int, char **)
{
    int *A, *B, *C, n = 123;

    ...

    A = (int *) calloc(n,sizeof(int));
    B = (int *) calloc(n,sizeof(int));
    C = (int *) calloc(n,sizeof(int));

    function2(A, B, C, n);

    ...

    return 0;
}

void function2(int *a, int *b, int *c, int n)
{
    ...
} 
```

# .net - 创建具有可在设计模式下访问的属性的用户控件

> ID：13771361
> 
> 赞同：1
> 
> 时间：2012-12-07T21:37:28.163
> 
> 标签：.net, winforms, visual-studio-2010, user-controls, designmode

如何从设计视图访问用户控件属性？

例如，我有一个使用属性调用的自定义用户`NoteBox`控件`Title`。

我希望能够设置`Title`属性彻底设计视图并将其显示在我的表单上，就像您使用`Text`标签、按钮或组框的属性一样。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:39:14.480

您可以这样做，并且在大多数情况下，当您将 UserControl 拖到设计器上时，它应该会自动工作。有许多属性，例如`CategoryAttribute`和类似的，可以帮助`PropertyGrid`确定如何显示您的控件属性。

有关详细信息，我建议阅读[充分利用 .NET Framework PropertyGrid 控件](http://msdn.microsoft.com/en-us/library/aa302326.aspx)。那篇文章详细介绍了所有适当的属性，以及演示如何根据需要为您的属性制作自定义编辑器等。

# selenium-webdriver - 在 Selenium Webdriver 中查找属性值

> ID：13771363
> 
> 赞同：0
> 
> 时间：2012-12-07T21:37:30.040
> 
> 标签：selenium-webdriver

我是 Selenium 2.0 和 WebDriver 的新手，欢迎任何关于如何解决我的问题的帮助和建议。

我正在查看的 html 代码是：

```
<html>
<head>
<body class="index">
    <div class="container">
    <div class="masthead">
    <div class="status-bar">
    <div class="app-vpn-selector-container">
    <div id="page_tabs" class="tabs">
    <div class="tab-group monitoring">
    <div class="tab-group-name"> Monitoring </div>
    <div class="tab active"> Status </div>
    <div class="tab"> Events </div>
    <div class="tab"> Reports </div>
    <div class="tab"> Statistics </div>
    </div>
    <div class="tab-group configuration">
    </div>
    <div id="page_content" class="tab_content">
    </div>
 </body>
</html> 
```

我的任务是存储选项卡的所有名称：*Status*、*Events*、*Reports*、*Statistics*并断言这些值存在。

```
List<WebElement> allTabs = webdriver1.findElements(By.xpath("//div[@id='page_tabs']/div/div")); 
```

会让我找到元素，但我无法读取属性值。有人可以让我知道如何解决它。我花了很多时间在网上阅读信息，但找不到解决方案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:30:20.433

findElements 返回一个列表。它会根据您的 xpath 为您提供所有二级 div。获得列表后，您需要做的是遍历元素并调用 getText 方法并验证您获得的文本..效果

```
 List<WebElement> lstElements = driver.findElementsByXPath("//div[@id='page_tabs']/div/div");

   for (WebElement e : lstElements){
        //Verify e.getText() matches the expected value
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:25:59.250

嘿，如果您在阅读文本（选项卡名称）时遇到问题...那么***getText()***是您正在寻找的方法...

```
String K= Driver.findElements(By.xpath("Main tab Exp")).FindElement(By.xpath("Tab Exp")).getText(); 
```

我希望这能解决问题。一切顺利 ：-）

# xmlspy - 我的 XMLSpy 模式视图图中的这个符号是什么？

> ID：13771364
> 
> 赞同：1
> 
> 时间：2012-12-07T21:37:32.467
> 
> 标签：xmlspy

![WTFisthis](../Images/d873d366e9af3038b57e39c7ed50b457.png)

有人可以告诉我规范节点之间的蓝色突出显示图标代表什么吗？我将此模式转换为 c# 类，但无法访问 SpecItem、SpecGroup 或 SpecMisc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:42:58.263

请看一下这个网站：

[http://www.diversitycampus.net/projects/tdwg-sdd/minutes/SchemaDocu/SchemaDesignElements.html](http://www.diversitycampus.net/projects/tdwg-sdd/minutes/SchemaDocu/SchemaDesignElements.html)

**编辑**

旧链接不再有效，但是，我将其保留以供参考。新链接如下：

[http://manual.altova.com/xmlspy/spyenterprise/index.html?xseditingviews_schv_cmview_objects.htm](http://manual.altova.com/xmlspy/spyenterprise/index.html?xseditingviews_schv_cmview_objects.htm)

大约向下的 1/2 处，您将看到以下描述：

> 元素的选择。选择中的元素中只有一个元素可能出现在该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T21:37:05.633

当您捕获屏幕或保存图表时选择了该元素，仅此而已。作为一种做法，我总是选择最左边的对象以避免在我的文档中出现这个问题。

# raphael - 拉斐尔只显示图像的选定部分

> ID：13771371
> 
> 赞同：0
> 
> 时间：2012-12-07T21:38:11.163
> 
> 标签：raphael

我有一个图像作为拉斐尔的背景。

我想在任何给定时间只显示此图像的一部分。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:34:30.447

您可以使用 clip-rect 属性仅显示图像的选定区域，如下所示

```
var paper = Raphael(0, 0, 964, 641);
var background = paper.image("image.jpg",0,0,964,641);
background.attr({"clip-rect":"0,0,200,200"}); 
```

这是[**小提琴**](http://jsfiddle.net/NCncK/)

​</p>

# ruby-on-rails - 为什么 simple_form 会引发“NilClass:Class 的未定义方法 `model_name'”？

> ID：13771372
> 
> 赞同：2
> 
> 时间：2012-12-07T21:38:22.240
> 
> 标签：ruby-on-rails, simple-form

我正在研究如何在我的用户文件夹中的 index.html.erb 中使用 simple_form gem。我没有成功。奇怪的是它在 _form.html.erb 上工作。为什么？

```
users_controller.rb

def index
   @users = User.find_by_sql(["SELECT id, name, login, password
                               FROM users"])
end

users/index.html.erb
<%= simple_form_for @users do |f| %>
  <p>
    <%= f.input :name %>
  </p>
  .
  .
  .
  <p>
    <%= f.button :submit %>
  </p>
<% end % 
```

它引发了这个异常：NilClass:Class 的未定义方法 `model_name'

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:03:54.927

您正在尝试为一组用户创建一个表单，但`simple_form_for`需要一条记录，而不是一个数组。如果您想要的是一个表单列表，每个用户一个，那么这样做：

用户/index.html.erb

```
<% @users.each do |user| %>
  <%= simple_form_for user do |f| %>
    <p>
      <%= f.input :name %>
    </p>
    <p>
      <%= f.button :submit %>
    </p>
  <% end %>
<% end %> 
```

但这似乎是一件奇怪的事情，这个表格不应该在你的`new`页面上，而不是在索引页面上吗？

或者，如果您希望在索引页面上的用户列表*旁边*有一个用户表单，则需要在您的`index`操作中创建该用户：

```
def index
  @users = User.find_by_sql(["SELECT id, name, login, password
                           FROM users"])
  @user = User.new
end 
```

然后您可以`simple_form_for @user do |f| ...`在视图中创建表单，还可以使用 访问用户列表`@users`。

# regex - 努力学习向前看和向后看

> ID：13771373
> 
> 赞同：2
> 
> 时间：2012-12-07T21:38:24.867
> 
> 标签：regex, perl

我设置了一个简单的测试来测试 URL 中 / 之后的单词“Home”。我让它在没有前瞻/后视的情况下工作，但想用它们来做同样的事情。

```
my $page = "/Home"; #should 'match'
#or
$page = "/New Homes"; #should 'no match'

#A
if ($page =~ /Home | Home/) {
    print "no match A";
} else {
    print "match A";
}
print "\n\n";

#B
if ($page =~ /(?<= )Home(?= )/) {
    print "no match B";
} else {
    print "match B";
} 
```

回报：

```
no match A
match B #incorrect 
```

那么我没有得到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:43:19.107

在您的示例中：

```
(?<= )Home(?= ) 
```

您在这里所做的是在 home 之前和之后搜索空白空间（或空白）。您想将搜索字符串放在括号内。要搜索`/`之前`home`使用这个：

```
(?<=\/)Home 
```

另外，就像一个注释一样，使用前瞻和后瞻，它们不会作为匹配返回，它们只是用于查找匹配。因此，在上面的示例中，`Home`将作为匹配项返回，而不是`/Home`.

注意：正如评论中指出的那样，perl 需要`/`转义。我编辑了代码以包含一个转义的`/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T02:14:49.937

我不知道你为什么认为这两种模式是等价的。

```
/(?<= )Home(?= )/ 
```

匹配相同的字符串

```
/ Home / 
```

不包括匹配中的空格，并且

```
/Home(?= )|(?<= )Home/ 
```

匹配相同的字符串

```
/Home | Home/ 
```

不包括匹配中的空格。

* * *

你可能想要：

```
m{(?<![^/])Home(?![^/])} 
```

它类似于

```
m{(?<=/)Home(?=/)} 
```

except`(?<![^/])`也匹配字符串的开头，`(?![^/])`也匹配字符串的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T23:31:29.317

你的代码让我很困惑，可能你也是。

这个

```
my $page = "\/Home"; #should 'match'
#or
$page = "\/New Homes"; #should 'no match' 
```

相当于

```
my $page = '/New Homes'; 
```

因为不需要在文字字符串中转义斜杠，也不需要使用双引号，除非您需要插值变量。

还有这个

```
if ($page =~ /Home | Home/) {
    print "no match A";
} else {
    print "match A";
} 
```

匹配时正在打印`no match A`，反之亦然，因此您的输出*与*.`no match A``' Home'` *`$page`*

 *您担心的情况

```
if ($page =~ /(?<= )Home(?= )/) {
    print "no match B";
} else {
    print "match B";
} 
```

有同样的问题，它`no match B`在匹配时打印。它正在寻找`Home`, 前面和后面的空格。`$page`包含前面`'/New Homes'`有`'Home'`空格，但后面没有空格。所以它说`match B`因为没有匹配。

试试你的程序的这个变体，纠正 and 的感觉`match`并`no match`添加`use strict`and `use warnings`。

```
use strict;
use warnings;

my $page = '/New Homes';

if ($page =~ /Home | Home/) {
  print 'match A';
}
else {
  print 'no match A';
}

print "\n\n";

if ($page =~ /(?<= )Home(?= )/) {
  print 'match B';
}
else {
  print 'no match B';
} 
```

**输出**

```
match A

no match B 
```*

# android - 类似于 Android 的 Cocoa Pods 和 Bundler（用于依赖项）？

> ID：13771375
> 
> 赞同：41
> 
> 时间：2012-12-07T21:38:27.177
> 
> 标签：android, facebook-android-sdk

有没有类似于 bundler (ruby) 和 cocoa pods (ios) 的东西来管理 Android 中的依赖项？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-02T00:24:49.177

Gradle + Maven Central 似乎是 Android 的等价物。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T16:39:58.863

[maven-android 插件](http://code.google.com/p/maven-android-plugin/)提供了类似的依赖管理。如果所有依赖项都在 Maven Central 中，那么通常一个简单的`mvn clean install`将构建您的 Android 项目。

# batch-file - Windows批处理setlocal enabledelayedexpansion调用返回值

> ID：13771376
> 
> 赞同：0
> 
> 时间：2012-12-07T21:38:27.493
> 
> 标签：batch-file, environment-variables

有两 (2) 个 Windows 批处理脚本。第一个将呼叫第二个。但是，必须在调用第二个批处理脚本时使用 SETLOCAL，因为在 FOR 循环中需要 ENABLEDELAYEDEXPANSION。

=== batch1.bat

```
@echo off
echo in %0
set BAT1_VAR=5
SETLOCAL
    call  batch2.bat
    set|find "BAT"
    echo === before endlocal
ENDLOCAL
set|find "BAT"
echo === after endlocal
echo === begin exiting %0
set|find "BAT"
echo === end exiting %0
exit /B 0 
```

=== batch2.bat

```
@echo off
echo in %0
SET BAT2_VAR=7
echo === begin exiting %0
SET|FIND "BAT"
echo === end exiting %0
EXIT /B 0 
```

=== 问题是batch2.bat设置的变量在返回batch1.bat后还需要存在。这可以通过使用来解决：

```
ENDLOCAL & set BAT2_VAR=%BAT2_VAR% 
```

但是，我不希望batch1.bat 需要知道batch2.bat 创建的变量的名称。可能有很多，列表可能会改变。

有什么想法可以克服这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T22:27:56.013

如果您处于循环或任何带括号的代码块中，则无法使用该`ENDLOCAL & set BAT2_VAR=%BAT2_VAR%`方法。

这样的事情会失败

```
REM delayed expansion is disabled to start
for ... %%A in (....) do (
   REM must SET before enabling delayed expansion to preserve ! in %%A value
   set var=%%A
   REM the remainder of the loop needs delayed expansion
   setlocal enableDelayedExpansion
   REM do something with !var!
   call batch2 !var!
   REM maybe the batch2 modifies var some more
   REM Must endlocal and preserve the value. The attempt below fails because %var% will
   REM be the value that existed before the loop was entered
   endlocal & set "var=%var%"
) 
```

一个简单的解决方法是通过 FOR 变量传输值

```
REM delayed expansion is disabled to start
for ... %%A in (....) do (
   REM must SET before enabling delayed expansion to preserve ! in %%A value
   set var=%%A
   REM the remainder of the loop needs delayed expansion
   setlocal enableDelayedExpansion
   REM do something with !var!
   call batch2 !var!
   REM maybe the batch2 modifies var some more
   REM the code below successfully transports the value across the endlocal barrier
   for /f "delims=" %%B in ("!var!") do endlocal & set "var=%%B"
) 
```

您说您的批次可能会设置许多您需要保留的值。通常，您将返回变量的名称传递给您的 CALLed 例程，然后您的例程可以执行以下操作：

```
set "%~2=return value1"
set "%~3=return value2"
... etc. 
```

您会知道所有变量的名称，但这可能需要大量代码才能将所有值传输到 endlocal 屏障。

您可以使用公共前缀为所有变量添加前缀，然后使用 FOR /F 循环来保留这些值。FOR /F ('command') 的整个结果集在任何迭代开始之前被缓存。

您的 CALLed 批处理可以设置变量`prefix.var1`, `prefix.var2`, ... `prefix.varN`，并且以下代码将起作用

```
REM delayed expansion is disabled to start
for ... %%A in (....) do (
   REM must SET before enabling delayed expansion to preserve ! in %%A value
   set var=%%A
   REM the remainder of the loop needs delayed expansion
   setlocal enableDelayedExpansion
   REM do something with !var!
   call batch2 !var! prefix.
   REM the batch2 set variables prefixed by prefix.
   REM Must endlocal and preserve all values.
   for /f "delims=" %%B in ('set prefix.') do (
     if "!"=="" endlocal
     set "%%B"
   )
) 
```

该`if "!"=="" endlocal`行是仅在第一次内循环迭代时才使用 endlocal 的绝妙技巧。它依赖于延迟扩展在外循环之前被禁用的事实，并在每次外循环迭代的顶部附近启用。

# junit - 在 IntelliJ 中运行所有测试，howto

> ID：13771377
> 
> 赞同：2
> 
> 时间：2012-12-07T21:38:28.663
> 
> 标签：junit, intellij-idea, testng

在我的情况下，我似乎可以运行所有`jUnit`测试或所有测试`TestNG`

是否可以创建一个同时涵盖`jUnit`和的测试`testNG`？

![在此处输入图像描述](../Images/0b2170062e31a85b0e5b7f1163812aa3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:18:06.320

从 IDEA 来看，这是不可能的。我建议您使用 Maven 或类似工具运行测试并同时执行它们。我认为您还可以使用 Emma 查看测试覆盖率，甚至是混合的。

# python - 使用实例变量作为命名格式替换

> ID：13771378
> 
> 赞同：0
> 
> 时间：2012-12-07T21:38:34.453
> 
> 标签：python

我正在编写一个生成 C++ 程序的 Python 程序。有一大堆这样的代码实例：

```
class TestBlock(object):
    def __init__(self, mod, name, casetype, generator):
        self.mod = mod
        self.name = name
        self.casetype = casetype
        self.generator = generator

    def fullname(self):
        return "{mod}.{name}".format(**self.__dict__)

    def write_cases(self, outf):
        outf.write("const {casetype} {mod}_{name}[] = {{\n"
                   .format(**self.__dict__))
        for case in self.generator():
            outf.write("  { " + case + " },\n")
        outf.write("};\n\n") 
```

`"text {subst}".format(**self.__dict__)`构造是我发现使实例变量可用作命名替换的唯一方法，`self`它很丑陋，我不喜欢它。我希望能够写作`"text {subst}".format(self)`；这可能吗？如果可以，怎么做？我知道这`"text {0.subst}".format(self)`将是开箱即用的，并且`"text {subst}".format(**self)`可以使用一些特殊的方法，但是这两种方法仍然有额外的粘性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:53:08.153

您可以将功能包装在一个函数中：

```
def fmt(msg, obj):
    return msg.format(**obj.__dict__) 
```

然后：

```
def fullname(self):
    return fmt("{mod}.{name}", self) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:27:44.947

不，没有一种通用的方法可以做你想做的事。您可以编写您的类，使其具有`__getitem__`将项目访问委托给属性访问的方法（即，`obj['foo']`与 相同`obj.foo`）。但是，您不能将项目访问权限用于其他任何事情。对于没有以这种方式定义项目访问的第三方类，您不能这样做。

你也可以创建一个实用函数来创建一个映射对象来包装你的对象，所以你会这样做`"text {subst}".format(wrapper(self))`，但是如果 `{0.subst}' 对你来说已经是“太多的垃圾”，那可能也不会让你满意。

该`format`方法不是将任何命名空间中的名称映射到格式字符串的通用方法。它映射映射中的键，而不是对象上的属性。如果要在对象上映射属性，则必须以某种方式将它们放入映射中。“{0.subst}”并没有那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:34:02.243

如果由于某种原因你没有使用 string.format （例如，你只是使用字符串，不需要格式迷你语言），这样的事情可能会有用：

```
import re

SUB_RE = re.compile(r"{(.*?)}")

class Formattable(object):
   def format(self, s):
      def repl(matchobj):
         var = matchobj.group(1).strip()
         try:
            retval = getattr(self, var)
         except AttributeError:
            retval = "ERROR"
         return retval

      return SUB_RE.sub(repl, s)

class Test(Formattable):
   def __init__(self, foo, bar, baz):
      self.foo = foo
      self.bar = bar
      self.baz = baz

t = Test('myFoo', 'bbbbbar', 'BAZZZZ')
print t.format("foo = {foo}")
print t.format("bar = {bar} but baz is {baz}") 
```

印刷

```
foo = myFoo
bar = bbbbbar but baz is BAZZZZ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T02:14:17.513

使用这样的东西怎么样`string.Template`：

```
from string import Template

class TestBlock(object):
    def __init__(self, mod, name, casetype, generator):
        self.mod = mod
        self.name = name
        self.casetype = casetype
        self.generator = generator

    def subst(self, format):  # added method
        return Template(format).substitute(self.__dict__)

    def fullname(self):
        return self.subst("$mod.$name")

    def write_cases(self, outf):
        outf.write(self.subst("const $casetype ${mod}_$name[] = {{\n"))
        for case in self.generator():
            outf.write("  { " + case + " },\n")
        outf.write("};\n\n")

import sys

def generator():
    for v in ['normal', 'extraordinary']: yield v

tb = TestBlock('somemod', 'somename', 'somecasetype', generator)

sys.stdout.write('fullname: '+tb.fullname()+'\n')
tb.write_cases(sys.stdout) 
```

输出：

```
fullname: somemod.somename
const somecasetype somemod_somename[] = {{
  { normal },
  { extraordinary },
}; 
```

请注意，替换可以通过两种不同的方式触发，使用`$name`或`${name}`。两者都在上面使用。

# javascript - 将EventHandler 添加到类中的每个元素

> ID：13771379
> 
> 赞同：7
> 
> 时间：2012-12-07T21:38:43.000
> 
> 标签：javascript

我正在尝试将事件侦听器添加到具有节类的所有元素，但是它仅将其应用于节点列表中的最后一个对象。

```
var section = document.querySelectorAll('.section');
for(var i=0;i<section.length;i++){
var elem = section[i];
elem.addEventListener('click', function () {move (elem)}, false); 
} 
```

有没有一种方法可以为每个事件添加事件侦听器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:48:17.180

问题是 JavaScript 中没有块作用域。所以`elem`每次迭代都会被覆盖，而不是每次都被声明为新变量。在每次迭代中声明新变量的唯一方法是通过函数：

```
for(var i = 0; i < section.length; i++){
  (function(elem) {
    elem.addEventListener('click', function() { move(elem); }, false);
  })(elem);
} 
```

但是`addEventListener`设置`this`为元素，因此在您的情况下，您可以巧妙地执行以下操作：

```
for(var i = 0; i < section.length; i++){
  elem.addEventListener('click', function () { move(this); }, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:41:48.873

那是因为您正在引用`elem`和`i`内部功能。我可以建议尝试

```
var section = document.querySelectorAll('.section');
for(var i=0;i<section.length;i++){
    var handler = (function(ind){ 
        return function () {
             move (section[ind]);
        }
    })(i) 

    elem.addEventListener('click', handler, false); 
} 
```

# r - 是否有类似 rollapply 的函数用于 data.frame

> ID：13771385
> 
> 赞同：8
> 
> 时间：2012-12-07T21:39:01.513
> 
> 标签：r

> **可能重复：**
> [`ddply`（或类似的）可以做一个滑动窗口吗？](https://stackoverflow.com/questions/7225992/can-ddply-or-similar-do-a-sliding-window)

是否有类似 rollapply 的函数（标准 R 或 CRAN 包中）在 data.frame 上运行，但不会将其转换为矩阵。rollapply 可以与 data.frame 一起使用，但如果 data.frame 具有混合类型，则每个数据窗口都将转换为字符（矩阵）。

我更喜欢支持 width、na.pad、align 等的函数，就像 rollapply

**例子**

采用混合类型的任何 data.frame

`test = data.frame( Name = c( "bob" , "jane" , "joe" ) , Points = c( 4 , 9 , 1 ) )`

假设您想滚动窗口大小为 2。 FUN 的第一次迭代使用仅包含测试的第 1 行和第 2 行的 data.frame 调用。

所以`RollapplyThatRespectsDataFrame( ... , FUN = function( x ) { ... } )`在第一次迭代时会设置`x = data.frame( Name = c( "bob" , "jane" ) , Points = c( 4 , 9 ) )`

第二次迭代是一个 data.frame 的第 2 行和第 3 行`test`。

基本上，这个新函数与 rollapply 做同样的事情，除了它可以与 data.frames 一起正常工作。它不会转换为矩阵。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T22:49:31.583

尝试这个：

```
> library(zoo)
> DF <- data.frame(a = 1:10, b = 21:30, c = letters[1:10])
> replace(DF, 1:2, rollapply(DF[1:2], 3, sum, fill = NA))
    a  b c
1  NA NA a
2   6 66 b
3   9 69 c
4  12 72 d
5  15 75 e
6  18 78 f
7  21 81 g
8  24 84 h
9  27 87 i
10 NA NA j 
```

关于经过一些讨论后添加到问题中的示例，可以通过将此类功能`rollapply`应用于行索引来将其分层：

```
> lapply(as.data.frame(t(rollapply(1:nrow(test), 2, c))), function(ix)test[ix, ])
$V1
  Name Points
1  bob      4
2 jane      9

$V2
  Name Points
2 jane      9
3  joe      1 
```

在这里它被包裹得更好一点：

```
rollapply.data.frame <- function(data, ..., fill = NULL, FUN, 
        simplify = function(x) do.call(rbind, x)) {
    fill0 <- if (!is.null(fill)) NA
    result <- lapply(
       as.data.frame(t(rollapply(1:nrow(data), ..., fill = fill0, FUN = c))), 
       function(ix) {if (all(is.na(ix))) fill else FUN(data[ix, ])}
    )
    simplify(result)
}

> rollapply(test, 2, FUN = identity, simplify = identity)
$V1
  Name Points
a  bob      4
b jane      9

$V2
  Name Points
b jane      9
c  joe      1

> rollapply(test, 2, FUN = identity, fill = NA, simplify = identity)
$V1
  Name Points
a  bob      4
b jane      9

$V2
  Name Points
b jane      9
c  joe      1

$V3
[1] NA 
```

# java - 从 JAXRS WebClient 查看原始 XML

> ID：13771390
> 
> 赞同：0
> 
> 时间：2012-12-07T21:39:23.573
> 
> 标签：java, xml, cxf, jax-rs, webclient

我很难找到解决方案，也许是因为我的术语是错误的。

我想做的是能够记录我调用 JAXRS WebClient 时返回的`.get()`RAW **xml**。

当我执行此操作时，我拥有的当前设置可以毫无问题地进行解组：

```
MyObject result = (MyObject) client.get(MyObject.class); 
```

但是，我想在调试时查看服务器以 XML 的形式实际返回到 System.out 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:19:13.120

我能够通过以下方式返回原始 XML：

`String rawXml = client.get(String.class)`

然后，我能够检查原始 XML，并在需要时将其传递给类中的记录器。

# javascript - JQuery：当元素隐藏时防止div折叠（）

> ID：13771395
> 
> 赞同：3
> 
> 时间：2012-12-07T21:39:42.653
> 
> 标签：javascript, jquery, html, css

当我的表单被提交时，表单“滑出”并使用`$.get()`，我加载另一个页面并将其滑入。在隐藏表单和显示下一页之间，div 折叠并且我所有的页脚内容短暂结束表格在哪里。

然后，当“下一页”完成加载时，页脚回到底部（在新页面内容下）。因为表单的大小可以变化很大，我试图避免为 DIV 指定高度。

有什么办法可以防止 div 改变？

**代码：**

```
$("#MyForm").hide("slide", { direction: "left" }, 250, function () {
    $.get("../NewPage.html", function (data) {
        $("#NewPagePlaceholder").html(data);
        $("#NewPagePlaceholder").show("slide", { direction: "right" }, 250);
    });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T21:41:12.493

你在使用 CSS 吗？我会做一个假设（我知道不好，但我看不到任何代码）你`display:none;`用来隐藏 div，而不是你应该尝试使用`visibility:hidden`. 如果您使用的是 JQuery，也许您可​​以向选择器添加一个 css() 方法，并以这种方式将可见性设置为隐藏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T21:46:26.650

@user1394965 说了什么。这是一个简单的例子：

这`.hide()`将使对象的 css 属性成为`display: none`将删除它在页面上占用的空间。该`visibility: hidden`属性将使其隐藏，但仍保留其在页面上的空间。

所以，而不是这样做：

```
$('#elementId').hide(); 
```

请执行下列操作：

```
$('#elementId').css('visibility', 'hidden'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T21:54:33.587

上面的其他选项可能更好，您确实可以选择基于子 div 设置高度，但是如果不查看任何代码，很难知道这是否是一个好主意。

例如（未经测试）：

```
var height = $('#childdiv').height();
$('#childdiv').parent().css('height', height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:41:48.360

仅在动画期间指定 div 的高度。也就是说，在滑出旧表单之前，将 div 更改为相同的高度。新表单滑入后，删除此设置高度。

# python - Boto - 从 S3 获取最新信息

> ID：13771399
> 
> 赞同：2
> 
> 时间：2012-12-07T21:40:04.640
> 
> 标签：python, amazon-s3, amazon-web-services, boto

我的深度有点过了。我想将备份存储在 S3 上，然后在下载 S3 存储桶的特定“文件夹”中最新修改的文​​件时尝试下载脚本。

我做到了这一点：

```
import boto
s3conn = boto.connect_s3()
bucket = s3conn.lookup('my_bucket_name')
for key in bucket:
  print k.name, k.last_modified

key.getfile() 
```

到目前为止，这旨在获取存储桶中每个文件的名称和最后修改时间。这是我真正卡住的地方，因为我需要获取最新的然后下载它，这就是我卡住的地方。

有人能伸出援助之手吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:08:06.857

您需要按 last_modifed 对键列表进行排序，然后列表的最后一项将是您想要的文件。像这样的东西：

```
key_list = bucket.list()
key_list.sort(cmp = lambda x, y:
    cmp(x.last_modified, y.last_modified))
key_list[-1].get_file(destination_fp) 
```

这是您可以尝试的另一种排序方法：

```
key_list.sort(key=lambda x: x.last_modified) 
```

# ruby-on-rails - 配置变量被选为方法

> ID：13771401
> 
> 赞同：0
> 
> 时间：2012-12-07T21:40:12.020
> 
> 标签：ruby-on-rails

在 config/application.rb 中设置配置变量`config.items_per_page = 15`并尝试将其输出到控制器时，在 rails 中出现错误：

```
undefined method `items_per_page' 
```

这是我的应用程序/控制器/posts_controller.rb：

```
@posts = Post.where(:is_deleted => 0, :is_hidden => 0).limit(Rails.configuration.items_per_page).order('created_at DESC') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T19:42:29.227

根据@ZachKemp 的建议，重新启动 rails 服务器解决了这个问题。

# java - 使用 Java 库的随机访问结构化归档文件格式

> ID：13771402
> 
> 赞同：0
> 
> 时间：2012-12-07T21:40:13.340
> 
> 标签：java, zip, archive, file-format

我和我的团队被要求使用 Java 库支持的文件格式，该格式包含有关某些较大文件的各种元数据。事实上，当权者希望我们将大文件（可能 100MB）和其他相关文件（元数据、非破坏性编辑等）打包到一个捆绑的存档文件中。

对于一次性创作来说，这是一件轻而易举的事：只需将所有内容都放入一个 Zip 文件中。但我们希望能够不断更新元数据、非破坏性编辑等。我们不希望将整个 >100MB 的内容转储到一个临时目录，然后将所有内容压缩回来，只是为了在其中一个目录中添加一行元数据文件。

有一些项目（例如[TrueVFS](http://truevfs.java.net/)）通过声称将 zip 文件或其他存档文件格式抽象为文件系统，表面上听起来很理想。但仔细观察，我们获得的唯一就地更新功能似乎是简单地[附加新文件](http://truezip.schlichtherle.de/2011/07/26/appending-to-zip-files/)，而不是实际更改或附加到单个文件。

我们需要一些介于 Zip 文件和关系数据库之间的文件格式。具有层次结构的东西会很棒。它必须有效地支持相当大的文件（超过 100MB），并允许随机访问以添加、删除和更改存档中的单个文件。我很惊讶找不到任何东西。有什么建议么？

PS 几年前我有过糟糕的经历，[微软的复合文件格式](http://en.wikipedia.org/wiki/Compound_File_Binary_Format)被破坏了。我不知道像[Apache POIFS](http://poi.apache.org/poifs/)这样的东西对于大文件是否可靠且高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:45:22.207

我不相信您所要求的内容很容易实现，原因很简单：文件系统通常不支持在文件中间插入数据 - 除非截断和重写其余部分。这意味着当该文件存储在档案中时，对普通文件的简单追加会变成截断重写操作。

为了允许这样的操作，您必须找到一些基本上可以复制实际文件系统的大部分功能的基于块的格式。

我会考虑重构整个系统以在该大数据文件上强制执行某些结构。这将允许您将其变成可以存储在数据库中的东西。例如，基于行的文本可以存储在具有两列的表中 - 行号作为主键和行文本。任何基于行的操作很容易变成基于数据库的操作。

[然后，您可以只使用SQLite](http://www.sqlite.org/)等嵌入式数据库将所有内容保存在同一个文件中，而无需依赖外部服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:57:11.757

根据您希望在什么平台上运行您的应用程序，您可以使用我们的[实体文件系统](http://www.eldos.com/solfs/)- 这是一个由可自动调整大小的容器文件支持的虚拟文件系统。它是用 Ansi C 编写的，并具有适用于 Android 的 Java JNI 包装器（并且可以根据要求将该包装器带到其他平台——我们之前只是没有这样的目标）。

还有代码库文件系统，据我了解，它还为 Java 提供了 JNI。

# java - 采取|| （或）声明作为输入？

> ID：13771403
> 
> 赞同：2
> 
> 时间：2012-12-07T21:40:15.777
> 
> 标签：java

我有这个类，它有一个 foo 方法和一个 main 方法，其中我有一些变量和一个打印语句。

```
public static boolean foo(int x, boolean b) {
    if (x < 0) {
          return true;
    }
    return !b; 
} 
```

假设我打印以下内容：

```
foo (-3, c || !c) 
```

我无法理解 || 应该做的。我在 main 中声明了 boolean c = false，但我看不出它如何选择输入 c (false) 或 !c (true)。另外，附带问题：布尔变量前面的感叹号只会给出相反的结果吗？即，如果输入为假，而 foo 返回 !b，它会返回真吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:41:17.167

可以这么说，这是一个重言式，总是正确的。

`c || !c` 意思是：“c **OR** not c”。其中之一总是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:45:21.777

“||” 表示 OR，所以任何 x || !x 将始终返回 true，无论您将 x 声明为 false 还是 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:41:34.600

> 我看不出它如何选择输入 c (false) 或 !c (true)

这不是“选择输入”两种不同的可能性。它传递的是**评估结果的值****，**一个布尔值。 **`c || !c`**

 **注意：对于 的任何布尔值，`x || !x`将始终评估为。`true``x`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T21:41:51.770

`c || !c`将永远是`true`-您不妨将代码替换为

```
foo (-3, true) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T21:42:34.800

If you declared `c` as:

```
 boolean c = false;// or true 
```

then `c || !c` will always result into `true`.

so you method call `foo (-3, c || !c)` **is nothing but equivalent to `foo (-3, true)`****

# transactions - 消费者选择的 JMS 单一消息确认

> ID：13771406
> 
> 赞同：3
> 
> 时间：2012-12-07T21:40:25.467
> 
> 标签：transactions, jms

考虑以下使用 JMS 队列的场景：我们有一个 JMS 代理 B，其中包含队列 Q 和使用会话 S1 创建的 MessageConsumer C1。C1 通过 onMessage() 方法调用（异步）接收消息 M1、M2、M3 并启动线程 T1、T2、T3 以并行处理 M1、M2、M3（分别）。我们不知道完成 T1、T2、T3 中的任何一个需要多少时间。在某个时间点，T2 是第一个完成执行的线程：是否可以仅向代理 B 确认（或提交）M2，如果会话 S1 很快关闭，则 M1 和 M3 将由B 并重新交付给另一个会话 S2 和另一个消费者 C2？

Session.CLIENT_ACK 不是我们需要的，一些JMS 实现的SINGLE_ACK 可能是我要找的，但它不是JMS 标准。也许 JMS 事务可以解决问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T00:07:20.450

The `Message` interface defines `acknowledge` which allows for acknowledging single messages. So you could just call `message.acknowledge` in T2.

As a side note: your onMessage() callback might already be called from multiple Threads, depending on your JMS provider's implementation.

# c++ - 同一个模板类的友谊

> ID：13771407
> 
> 赞同：9
> 
> 时间：2012-12-07T21:40:26.827
> 
> 标签：c++, templates, c++11

考虑以下：

```
template<int N>
class A
{
public:
    A() : i(N) {}

    template<int K>
    void foo(A<K> other)
    {
        i = other.i; // <-- other.i is private
    }

private:
    int i;
};

int main()
{
    A<1> a1;
    A<2> a2;
    a1.foo(a2);

    return 0;
} 
```

*有没有办法在不*将成员*i*和*foo*移动到一个公共基类或做一些疯狂的事情作为添加*朋友类 A<1>*的情况下使 'other.i' 可见？

也就是有没有办法让同一个模板类的模板做朋友呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T21:45:13.767

C++03 没有为此提供机制，但 C++11 提供了。

```
template<int N2> friend class A; 
```

应该成为 A 的*所有*实例的朋友。

# unix - 用“：”对陌生感进行排序

> ID：13771408
> 
> 赞同：0
> 
> 时间：2012-12-07T21:40:27.463
> 
> 标签：unix, sorting

我尝试使用以下文件对以下文件进行排序，`LC_ALL=C ; sort test.txt`并得到以下结果。

```
：
0
1
1:02
10:2
1:2
1:20
1:2:0
2
2:1
2:2
2:2

```

注意`:`是排在前面的`0`。但是，是在?????????`1:2`之后排序的`10:2`

到底是怎么回事？

请随意尝试自己并体验陌生感。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:44:11.073

删除命令中的分号：

```
LC_ALL=C ; sort test.txt 
```

然后您将看到您期望的输出。

# android - 强制语言环境和刷新应用程序以使用新语言

> ID：13771413
> 
> 赞同：0
> 
> 时间：2012-12-07T21:40:54.327
> 
> 标签：android, localization, resources

我在选项更改后强制使用语言环境：

```
public void forceLocale(Context ctx) {
    Locale.setDefault(getCurrentLocale());
    Configuration config = new Configuration();
    config.locale = getCurrentLocale();
    ctx.getResources().updateConfiguration(config, ctx.getResources().getDisplayMetrics());   
} 
```

我希望在新的语言环境中显示当前活动，但它没有发生。其他活动也一样。

我尝试在我的所有活动的 onResume() 上无效：

```
protected void onResume() {
    //if no custom locale, restore default
    if (StaticClass.locale.getCurrentLocale() == null)
        StaticClass.locale.restoreDefaultLocale();

    //force curretnt locale
    StaticClass.locale.forceLocale(this);

    //reload the view
    ViewGroup vg = (ViewGroup) findViewById(android.R.id.content);
    vg.invalidate();

    super.onResume();
} 
```

没有效果。该应用程序在从内存中清除并重新启动后被翻译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:56:58.427

您是否在清单中设置了语言环境属性`android:configChanges="locale"`？我还在`onCreate()`每个活动中添加了这个

`if (Globals.langConfig != null) this.onConfigurationChanged(Globals.langConfig);`

`onConfigurationChanged()`然后我在每个活动中覆盖

```
 @Override
        public void onConfigurationChanged(Configuration newConfig) {
         newConfig = Globals.getUserLanguage(this);

super.onConfigurationChanged(newConfig); 
```

这可能不是最好的方法，但现在对我有用。如果您还没有，我认为覆盖该`onConfigurationChanged()`方法可能是您最大的问题

# c - 无法从单个链表的最后一个剩余节点中删除数据

> ID：13771415
> 
> 赞同：0
> 
> 时间：2012-12-07T21:40:59.740
> 
> 标签：c, linked-list, free

我正在尝试使用以下代码删除 C 中单链表的所有节点。

```
void free_all(struct cd *head){                                                 
    struct cd *tmp;                                                                                                                                            
    tmp = head->next;                                                           
    while(tmp != NULL){                                                         
        head->next = tmp->next;                                                 
        free(tmp);                                                              
        tmp = head->next;                                                       
    }                                                                           
    free(head->next);                                                           
    free(head);                                                                 
    head=NULL;                                                                  
} 
```

但是，如果我在此之后打印链表的所有元素以检查列表是否为空，则始终打印“头”元素。所以看起来 head 元素没有被正确删除。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T21:51:51.200

'head' 是一个函数参数，具有本地范围。因此，尽管您在函数末尾将其设置为 NULL ，但这不会产生任何影响，因为函数会立即返回，将该变量移出范围。

无论传入什么变量，仍将指向列表的头部（尽管此内存已被释放，但它可能仍包含合理的数据）。

头*已*被释放。它不一定看起来那样，因为您保留了一个指向它曾经存在的内存的指针。

要修复它，只需在调用此函数以释放列表*后将*指针清空即可。

```
free_all(actual_head);
actual_head = NULL; 
```

您可以传入一个指向指针的指针，以便将函数中的指针设为 NULL，但这对于这种情况似乎过于复杂。

# python - 这应该有效：python中的open（）

> ID：13771416
> 
> 赞同：1
> 
> 时间：2012-12-07T21:41:02.153
> 
> 标签：python, file-io

我试图在我拥有的一些 for 循环结束时打开并写入文件。但是，我得到一个“输出”未定义的提示。（见下面的代码）

我不是在以写入模式打开文件“output.txt”的同时声明什么输出吗？

```
for X in Y
    ....
    output = open(output.txt, 'w')
    output.writelines(lines)
    output.close() 
```

这应该可以正常工作吗？我的语法错了吗？或者我必须在 for 循环之外声明 output = open 吗？

注释：Python 2.7.3

回答：谢谢大家，我试图打开 output.txt 而不是'output.txt'，因此 python 无法理解我的声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:42:49.040

The filename `output.txt` is a string, but you have not quoted it. So the undefined `output` Python complains about is not the variable result of the `open()` call, but rather the improperly quoted string inside the `open()` call.

It gets misinterpreted as some object called `open` on which you are accessing a property `txt`.

```
output = open('output.txt', 'w') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:46:19.830

`output.txt`没有被引用；所以它不被视为字符串文字，而是被python视为变量。

它应该是：

```
output = open("output.txt", 'w') 
```

* * *

**此外**，如果您正在使用，最好使用该`with`结构`python >= 2.5`：

```
with open("output.txt", 'w') as output:
    output.writelines(lines) 
```

因为无论发生什么，它都会自动为您处理文件关闭以避免泄漏资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:43:11.050

`output = open(output.txt, 'w')`

我认为错误是因为 output.txt 不是字符串。尝试

`output = open('output.txt', 'w')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:43:13.350

您忘记将“output.txt”放在引号中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:44:37.547

撇开错误不谈，它可能不会完全按照您的意图进行。以写入模式打开文件并写入将完全替换该文件。如果您希望在循环中将某些内容附加到该文件，则需要以附加模式打开它：

```
output = open("output.txt", "a")
for x in y:
    output.writelines(x) #or whatever you're writing
output.close() 
```

# less - Using only part of a less stylesheet

> ID：13771419
> 
> 赞同：2
> 
> 时间：2012-12-07T21:41:14.640
> 
> 标签：less

Let's say I have a less stylesheet with a lot of styles in it, and I want to copy a few other to a new sheet, like so:

**huge-stylesheet.less**:

```
/*

blah blah blah for dozens of styles

*/
.loopy {
    color: greenyellow
} 
```

**tiny-stylesheet.less**:

```
.froopy {
    .loopy
} 
```

Is it possible for me to set it up so that when compiled, tiny-stylesheet.css *just* has the .froopy style defined and not everything else that's in huge-stylesheet.less?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:58:52.663

## Updated Answer for LESS 1.5

You can now import a file as a reference in LESS 1.5\. So

```
@import (reference) "huge-stylesheet"; 
```

Which gives you access to *use any and all* the LESS in **huge-stylesheet.less** without *outputting* any of it into **tiny-stylesheet.less**.

You should then just be able to do as you originally intended:

```
.froopy {
    .loopy;
} 
```

## Original Answer

Yes, it is possible "that when compiled, tiny-stylesheet.css just has the .froopy style defined and not everything else" by using namespaces. You may need to set up the namespace in separate file (say *master.less*) like this:

```
#yourNameSpace() {
    your huge code that was in huge-stylesheet 
} 
```

And then use another file to produce **huge-stylesheet.less** like this:

```
@import "master"; 
#yourNameSpace; //call the code to produce the huge sheet 
```

And use it in **tiny** like this:

```
@import "master";
.froopy {
    #yourNameSpace > .loopy;
} 
```

Or you might try leaving the code as is in the **huge** sheet and do this in the **tiny-stylesheet.less** (I have not played with importing to know if it can be nested in a block):

```
#yourNameSpace() {
    @import "huge-stylesheet"; 
}

.froopy {
    #yourNameSpace > .loopy;
} 
```

Either way, it will only extract the code `.loopy` from the namespace. No other final CSS code is generated from the namespace code by the **tiny** LESS file.

# php - PHP md5散列不起作用

> ID：13771423
> 
> 赞同：-1
> 
> 时间：2012-12-07T21:41:43.847
> 
> 标签：php, md5

我有以下用于注册网站的 PHP 代码。我正在尝试对密码进行哈希处理以确保安全，但是每当我提交虚拟注册时，密码都不会在 phpMyAdmin 中进行哈希处理。它们看起来很正常。这是我的代码：

```
<?php

//get the values from the form
$Name = $_POST['name'];
$Username = $_POST['username'];
$Password = $_POST['password'];
$RepeatPassword = $_POST['repeatpassword'];

//encrypt the passwords
md5($Password);
md5($RepeatPassword);

//query the database
$query = "INSERT INTO users VALUES ('', '$Name', '$Username', '$Password')";

if (!mysql_query($query)) {

die('Error ' . mysql_error() . ' in query ' . $query);
} 

//check passwords match
if ($Password !== $RepeatPassword) {
echo "Your passwords do not match. <a href='login.php'>Return to login page</a>";

}

//check to see if fields are blank
if ($Name=="") {
echo "Name is a required field. <a href='login.php'>Return to login page</a>";
}

else if ($Username=="") {
echo "Username is a required field. <a href='login.php'>Return to login page</a>"; 
}

else if ($Password=="") {
echo "Password is a required field. <a href='login.php'>Return to login page</a>";
}

else if ($RepeatPassword=="") {
    echo "Repeat Password is a required field. <a href='login.php'>Return to login page</a>";
}

else {
    $_SESSION["message"] = "You have successfully registered! Please login using your username and password.";
    header("Location: login.php");
}
?> 
```

我在网上阅读的教程都说要按照上面的方法来做。我尝试将两行 md5 代码放在很多地方，但无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T21:43:05.610

```
md5($Password);
md5($RepeatPassword); 
```

这段代码基本上什么都不做。你要：

```
$Password = md5($Password);
$RepeatPassword = md5($RepeatPassword); 
```

但归根结底，MD5 对安全性的作用并不大。考虑[bcrypt](http://codahale.com/how-to-safely-store-a-password/)，停止使用这些`mysql_*`函数，并开始学习 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:42:48.930

You're not doing anything with the return value of the functions. It should be:

`$Password = md5($Password);`

`$RepeatPassword = md5($RepeatPassword);`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-29T01:35:29.993

它不起作用，因为您没有将 md5 分配给变量。做这样的事情：

`$Password = md5($Password);`

`$RepeatPassword= md5($RepeatPassword);`

# javascript - Ajax 响应 ReadyState 跳到 4

> ID：13771429
> 
> 赞同：0
> 
> 时间：2012-12-07T21:41:55.407
> 
> 标签：javascript, html, ajax, google-chrome-extension

我正在构建一个 chrome 扩展，我的 Ajax 请求的响应以“就绪”（状态 200 和就绪状态 4）的形式出现 4 次而不是一次，并且它没有经过阶段 1-3。而是 4 次 4 。这对我来说很糟糕，因为我向用户发出了 4 次而不是一次的警告。

我的代码是简单的 javascript

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    console.log(xmlhttp.readyState + xmlhttp.status);
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        if (xmlhttp.response) checkForAlertTab(xmlhttp.response);
        else console.log('false');
    }
}
xmlhttp.open("POST", "http://myserver.php", true);
xmlhttp.setRequestHeader("Content-Type", "application/json");
xmlhttp.send(sendToServer); 
```

我在服务器中的代码只是一个 php，它从数据库中提取一些数据并将其回显，响应很好而且很漂亮（信息就在那里）但是为什么 ajax 就绪状态不能正常通过他的阶段 - 什么可以是这个原因吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T21:57:46.450

为什么不在你的 chrome 扩展中使用 jQuery 并使用 $.ajax！它很轻巧，可让您轻松完成工作。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

无论如何，上述问题的可能原因 - 因为您的 xmlhttp 对象是全局的，所以每次调用 ajax post 而不是替换它时，chrome 可能会分配一个新的 onreadystatechange 。这实际上取决于通话次数。

# c - 转换旧代码。间接需要指针操作数

> ID：13771434
> 
> 赞同：2
> 
> 时间：2012-12-07T21:42:11.943
> 
> 标签：c

拥有我需要使用现代 C 编译器编译的旧程序的源代码。它在这部分变得狂暴：

```
/*
* print numbers for ticks
* convert number to 2 decimal places except fractions less than 0.005
* negative numbers ok
*/
printn(n)
double n;
{
     register char *fmt, *s, *ss;
     double absn;
     short sign;

     sign = n<0\. ? -1 : 1;
     absn = n<0\. ? -n : n;
     if (absn < 0.0000001) absn = 0.;

     /* if less than 0.005 then dynamically change the format */
     PPA[Phh*6)'sn < 0.005 && absn != 0.0) {
             short dec = 2;
             double nn = absn;
             while (nn < 0.005) {
                     nn =* 10.;
                     dec++;
             }
             fmt = "%-0.2f";
             fmt[4] = '0' + dec;
             s = printb(fmt, sign*absn);
             } else
             s = printb("%-0.2f", sign*absn);

     /* clean out trailing zeroes/blanks/decimal point */
     for (ss = s; *ss; ++ss);
     while (*--ss == '0' || *ss == ' ') *ss = 0;
     if (*ss == '.') *ss = 0;

     return(s);
} 
```

现在我相信

```
PPA[Phh*6)'sn < 0.005 && absn != 0.0) { 
```

也许由于一些文本转换错误应该是：

```
if (n < 0.005 && absn != 0.0) { 
```

但我也得到一个“间接需要指针操作数（'双'无效）”：

```
 nn =* 10.; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:45:47.597

`nn *= 10.`将`nn`乘以`10`

`nn = *10.`将尝试取消引用`10.`，这是无效的（作为双重），就像错误所说的那样。

关于间接，第一个搜索引擎[命中](http://msdn.microsoft.com/en-us/library/fw63e3c3%28v=vs.80%29.aspx)说：

一元间接运算符 (*) 取消引用指针；也就是说，它将指针值转换为左值。间接运算符的操作数必须是指向类型的指针。间接表达式的结果是派生指针类型的类型

在您的情况下，中的操作数`10.`是双精度数。

# android - SharedPreferences 因强制退出而丢失？

> ID：13771437
> 
> 赞同：0
> 
> 时间：2012-12-07T21:42:19.213
> 
> 标签：android, eclipse, sharedpreferences

我已将 SharedPreferences 功能添加到我的应用程序中，以便在应用程序启动后启动特定活动。

我使用以下代码保存字符串：

```
final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
            SharedPreferences.Editor editor = pref1.edit();
            editor.putString("Stringval", "view1");
            editor.commit(); 
```

然后下面来加载上次使用的活动，这段代码在下面`OnCreate`

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
        String str1= pref1.getString("Stringval", null);

        if(str1 == "view0")
        {
        setContentView(R.layout.activity_view0);
        }

        else if(str1 == "view1")
        {
        setContentView(R.layout.activity_view1);
        }
        else
        {
        setContentView(R.layout.activity_no_setup);
        }

    } 
```

如果用户刚刚退出应用程序，然后重新启动它（到目前为止仅在模拟器中测试过），代码就可以工作，但是每当我使用任务管理器强制退出应用程序时： ![强制退出](../Images/ca02c527d1d8a658052cb48fdf51e2ad.png) 应用程序只是重新启动而不使用`SharedPreferences`. 应用程序无法加载的原因是什么，`SharedPreferences`或者这只是一个模拟器错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:47:51.540

你可以写

```
if(str1 != null && str1.equals("view0"))
        {
        setContentView(R.layout.activity_view0);
        }

        else if(str1 != null && str1.equals("view1"))
        {
        setContentView(R.layout.activity_view1);
        }
        else
        {
        setContentView(R.layout.activity_no_setup);
        } 
```

试试这个，可能对你有帮助......

# angularjs - angularjs 的 Yeoman 生成器

> ID：13771438
> 
> 赞同：2
> 
> 时间：2012-12-07T21:42:19.850
> 
> 标签：angularjs, yeoman

我开始学习 angularJS 并发现 yeoman 非常有用。但是一些由 yeoman 生成的控制器/服务/模型不适合以后缩小。因为我通过生成的[模板](https://github.com/yeoman/generator-angular/blob/master/templates/javascript/service/service.js)（在这种情况下为服务）看到了什么，我们必须隐式地注入服务。

但是如果我们以后想缩小，建议使用 $inject 显式注入。

所以我的问题是：我所理解的是否正确？如果不是，那么从 yeoman 注入生成的模板的正确方法是什么。

否则，如果我们想稍后进行缩小，我们现在不应该使用 yeoman 生成的模板，对吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T23:37:41.717

所以 yeoman 在生成服务时会给你这样的东西

```
testApp.factory('Thing', function(dep1, dep2) {
  return {/*...*/};
}); 
```

当代码被缩小时这是有问题的，因为缩小的过程会缩短函数参数，而 Angular 使用它们来推断要注入哪些依赖项。

要注入依赖项，我建议使用如下所示的内联注释

```
testApp.factory('Thing', ['dep1', 'dep2', function(dep1, dep2) {
  return {/*...*/};
}]); 
```

请注意，第二个参数是一个数组，其中列出了正确的依赖项名称，并且它的最后一项是将注入此类依赖项的函数。

* * *

编辑：Yeoman 的 Angular 生成器现在支持 JavaScript 和 CoffeeScript 代码`--minsafe`的缩小，带有 @Ramiro 所示的标志

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T00:09:30.540

您可以将 Yeoman Angular 生成器与 --minsafe 一起使用，例如：

```
yo angular:controller user --minsafe 
```

在此处查看其他选项： [https ://npmjs.org/package/generator-angular](https://npmjs.org/package/generator-angular)

编辑：对此进行跟进。现在不需要使用 --minsafe 标志，因为 yeoman 带有 ngmin 应用程序，它会自动将所有适用的代码转换为可*缩小*的，然后将其缩小:)

# python - 如何访问具有不同名称的变量？

> ID：13771439
> 
> 赞同：-3
> 
> 时间：2012-12-07T21:42:25.250
> 
> 标签：python, variables

如何使用 for 循环在 python 3.2 中用数字增加变量名？
p 是玩家，可以是 1 或 2。p1 和 p2 是每个玩家的不同符号。

```
 p = 1
    p1 = x
    p2 = i
    for c in range(1,3):
        input('Player {} ({}), ...? '.format(p,(locals()['p'+str(p)]))) 
```

这个 locals() 函数正在制作一个字典，但我希望它是变量名。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:50:37.813

Data is stored in data structures, not variable names. Use a dict, list or any other data structure.

```
players = []

for c in range(1,3):
        pl = input('Player P{} ...? '.format(c)
        players.append(pl)

print players[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:53:58.160

您可以使用一个简单的类来容纳玩家。这是一个示例，可让您按字面意思请求玩家，或传递可变数字。

```
class Players:
    def __init__(self, players):
        self.__dict__ = {"p{}".format(i+1):p for i,p in enumerate(players)}
    def __getitem__(self, item):
        return self.__dict__["p{}".format(item)]

p = Players(["player 1 obj", "player 2 obj"])

# equivalent 
print p.p2
print p[2] 
```

# java - Java 的行为就像我有指针一样。为什么？

> ID：13771443
> 
> 赞同：0
> 
> 时间：2012-12-07T21:42:48.420
> 
> 标签：java, pointers, reference

我正在使用 java.swing 构建一个应用程序。我有一个主面板、一个网格面板（显示方块）和一个细节面板（显示每个方块的细节并让您编辑它们）。正方形也是对象。

我有主面板监听鼠标点击，如果你点击网格面板，网格面板将通过它的正方形 ArrayList 并找到你点击的正方形，然后返回它。这个正方形由主面板传递到显示面板，然后将其局部变量 currentSquare 设置为等于传入的正方形。

我感到困惑的地方是我可以编辑 currentSquare，并且正在编辑 ArrayList 中的相应方块！我可以更改 currentSquare 的公共变量或使用 setter 来更改它们，但无论如何效果都是一样的。虽然这是我想要发生的效果，但我的印象是我必须有某种 getter/setter 来将编辑的 currentSquare 带回 ArrayList 并替换旧的正方形。

我目前关于为什么会发生这种情况的理论是它与 Java 的引用有关，因为正方形是一个自定义对象，但我不确定情况是否如此或导致这种情况的原因。最终，我想知道我做了什么导致这种情况，以及将其保持原样或在此基础上构建是否是好的/好的编程实践（如果我确实以这样的方式构建它，它会破坏的可能性有多大）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:44:47.103

在 Java 中，当您使用对象调用方法时，您发送的不是对象的副本，而是对它的引用。调用者和被调用者都将引用同一个对象，并且一旦对它的所有引用都消失，该对象将有资格进行垃圾回收。

Java 被称为“按值传递”，因为引用本身就是值，就像原语是值一样。当您使用对象调用方法时，您将对象的地址作为参数发送，而不是对象的副本。您无权访问地址的值，只能访问它所引用的对象。例子：

```
import java.util.*;

class Test { 
    private static void test(Map<String, String> a, int b) {
        a.put("test", "def");
        b = 10; 
    }

    public static void main(String[] args) {
        Map<String, String> a = new HashMap<String, String>();
        a.put("test", "abc");

        int b = 5;

        test(a, b); 

        System.out.println(a);
        System.out.println(b);
    }   
} 
```

```
{test=def}
5 
```

上面编译成类似：

```
test(0x123456, 5); 
```

# php - MySQL 语句中的变量不起作用

> ID：13771446
> 
> 赞同：0
> 
> 时间：2012-12-07T21:42:49.913
> 
> 标签：php, mysql, arrays, multidimensional-array

我有一个数组，列出了设定日期（2 周支付期）的 14 个日期：

```
$punchCard = array();    
Array(
        [1] => Array(
                [showDate] => 2012-12-04
                [codeDate] => 20121204)
        [2] => Array(
                [showDate] => 2012-12-05
                [codeDate] => 20121205)
    .........................................
        [12] => Array(
                [showDate] => 2012-12-15
                [codeDate] => 20121215)
        [13] => Array(
                [showDate] => 2012-12-16
                [codeDate] => 20121216)
        [14] => Array(
                [showDate] => 2012-12-17
                [codeDate] => 20121217)
    ) 
```

我想遍历它并从数据库中返回一些数据：

```
 foreach($punchCard as $date){
        $sql = "
              SELECT date, time 
              FROM `timeclock` 
              WHERE `employee`=" . $_SESSION['id'] . " 
              AND `date`=" . (int)$date['codeDate'] . " 
              ORDER BY `time` ASC ";
        $result = mysql_query($sql);
        $timecard = array();
        while($row = mysql_fetch_assoc($result)){
            $timecard[] = $row;
        }   
    } 
```

那是行不通的，但是：

```
$sql = "
     SELECT date, time 
     FROM `timeclock` 
     WHERE `employee`=" . $_SESSION['id'] . " 
     AND `date`=20121204 
     ORDER BY `time` ASC "; 
```

不知何故`(int)$date['codeDate']`不起作用，但我无法理解它，这可能很简单......

泰勒耶斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:50:05.227

您的 SQL 有错误。`date`和`time`after`SELECT`应该像这样引用，因为它们是函数名：

```
$sql = "
 SELECT `date`, `time` 
 FROM `timeclock` 
 WHERE `employee`=" . $_SESSION['id'] . " 
 AND `date`=20121204 
 ORDER BY `time` ASC "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:08:44.517

SQL 语句是正确的。数组不是：

```
while($row = mysql_fetch_assoc($result)){//show last punch
        $timecard[]['time'] = $row['time'];
    } 
```

固定的

# jquery-ui - jQueryUI 自动完成不会在选择时关闭

> ID：13771449
> 
> 赞同：0
> 
> 时间：2012-12-07T21:43:02.907
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我对 jQuery 和 UI 很陌生，自动完成有两个问题，我怀疑它们是相关的。当我在列表中选择一个项目时，输入中显示的是值，而不是标签。其次，自动完成不会关闭。当我单步执行我的代码时，将调用 select 函数，并且我看到我的标签，而不是值，显示在输入中，正如我所希望的那样。不幸的是，关闭函数被调用（两次），并且 ui.item.value 替换了输入中的标签并且自动完成不会关闭。

下面是我的自动完成代码以及输入的 HTML。如果重要，自动完成功能会嵌套在 jQueryUI 对话框中。

HTML：

```
<input id="id_projectid" type="text" class="projEntryControl ui-autocomplete-input ui-corner-all" name="projectid" autocomplete="off"></input> 
```

自动完成：

```
 $('#id_projectid').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "/chargeback/projList/" + $('#id_departmentid').val(),
                dataType:"json",
                data: {
                    project_startsWith: request.term
                },
                success: function(data) {
                    response( $.map( data.results, function( item ) {
                        return {
                            label: item.projectName,
                            value: item.id
                        }
                    }));
                }
            });
        },
        minLength: 3,
        select: function(event, ui) {
            $('#id_projectid').val(ui.item.label);
        },
        open: function() {
            $( '#id_projectid' ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    }); 
```

编辑：根据要求添加更多代码。

这是设置对话框并连接按钮以打开对话框的 javascript

```
function setupProjectEntryDialog() {
$( "#addPEForm" ).dialog({
    autoOpen: false,
    height: 490,
    width: 376,
    modal: true,
    buttons: {
        "Save": function() {
            var bValid = true;
            allFields.removeClass( "ui-state-error" );

            bValid = bValid && checkRegexp( hrsWorked, /^(?!\d{3})(?![2-9]\d)(?!1[1-9])(10|[1-9]{1})(.\d{0,2})?$/, "Please enter a valid number of hours worked." );

            if ( bValid ) {
                //save the changes to the database
                var dataArray = $("#peUpdateForm").serializeArray();
                var ed = new Object();
                ed.name = "entryDateId";
                ed.value = $("#entryDateId").text();
                dataArray.push(ed);
                if ($("#projEntryId").val() != "") {
                    var pe = new Object();
                    pe.name = "projEntryId";
                    pe.value = $("#projEntryId").val();
                    dataArray.push(pe);
                }
                $.post('/chargeback/savepe/', dataArray, function(data){
                    alert(data.msg);

                    //reload the project entries and total hours worked
                    showProjectEntries($('.entryDate.selected'));
                    getTotalHoursForEntryDate($('.entryDate.selected'));
                }, "json");

                //close the window
                $( this ).dialog( "close" );
                $('#id_projectid').autocomplete("destroy");
            }
        },
        Cancel: function() {
            $( this ).dialog( "close" );
            $('#id_projectid').autocomplete("destroy");
        }
    },
    close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
    }
});

//connect the add new button
$("#addNewPEButton").click(function() {
    $( "#addPEForm" ).dialog( "open" );
});

//hook up the add new project entry form submittal
$("#addNewPE").submit(function() {
    addProjectEntry($(this));
    return false;
});

//connect the delete Project Entry button
$('#deletePEButton').click(function() {
    deleteProjectEntry($('.peRow.selected'));
    return false;
});

//connect the row click method to the function
$('.peRow').click(function() {
    peRowWasClicked($(this));
});

$('.peRow').dblclick(function() {
    peRowWasDoubleClicked($(this));
})
} 
```

这是使用 Django 表单和模板加载 Dialog 以生成 HTML 的 javascript。

```
function addProjectEntry(anED) {
//ensure all peRows are not selected and disable the delete project entry button
$('.peRow').removeClass('selected');
$('#deletePEButton').attr('disabled', true);

//disable newFavoriteFromPEButton
$('#newFavoriteFromPEButton').attr('disabled', true);

//get the id of the selected entry date and strip the ed_ from it
$selectedED = $(".entryDate.selected");
var edId = $selectedED[0].id.split("_");    
$("#addPEForm").load("/chargeback/cb_timeentry/newPE/" + edId[1], function() {
    //connect the variables to the newly loaded html
    connectDialogVariables();

    //connect the project filtering to the department change
    /*$("#id_departmentid").change(function() {
        getProjectsForDepartment();
    });*/

    //connect the project and program number autocompletes to the controls
    $('#id_projectid').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "/chargeback/projList/" + $('#id_departmentid').val(),
                dataType:"json",
                data: {
                    project_startsWith: request.term
                },
                success: function(data) {
                    response( $.map( data.results, function( item ) {
                        return {
                            label: item.projectName,
                            value: item.id
                        }
                    }));
                }
            });
        },
        minLength: 3,
        select: function(event, ui) {
            $('#id_projectid').val(ui.item.label);
            $(this).close();
            return false;
        },
        open: function() {
            $( '#id_projectid' ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    });
});
} 
```

这是ajax调用完成后的HTML，上面的javascript就完成了。自动完成在输入正确的文本输入时开始搜索，并且位置正确，但不是表单的一部分。

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable ui-dialog-buttons" style="outline: 0px none; z-index: 1002; position: absolute; height: auto; width: 376px; top: 66px; left: 297.5px; display: block;" tabindex="-1" role="dialog" aria-labelledby="ui-id-9">
<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
<span id="ui-id-9" class="ui-dialog-title">Project Entry Update</span>
<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">
    <span class="ui-icon ui-icon-closethick">close</span>
</a>
</div>
    <div id="addPEForm" class="ui-dialog-content ui-widget-content" style="width: auto; min-height: 0px; height: 367px;" scrolltop="0" scrollleft="0"><form action="" id="peUpdateForm" method="post">
<div style="display:none"><input type="hidden" value="BTrLZBVfA2ltExq3OUU5015BVxPKO9lL" name="csrfmiddlewaretoken"></div>
<p><label for="id_departmentid">Department:</label> 
<select name="departmentid" class="projEntryControl" id="id_departmentid">
    <option selected="selected" value="">Choose a Department</option>
    <option value="1">ABND</option>
    <option value="2">ATT</option>
    <option value="3">AVI</option>
    <option value="4">CCS</option>
    <option value="5">PBW</option>
</select></p>
<p>
    <label for="id_projectid">Project:</label> 
    <input type="text" name="projectid" class="projEntryControl ui-autocomplete-input" id="id_projectid" autocomplete="off">
    <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
</p>
<p>
    <label for="id_progNumId">Program Number:</label> 
    <input type="text" name="progNumId" class="projEntryControl" id="id_progNumId">
</p>
<p>
    <label for="id_hoursWorked">Hours Worked:</label>
    <input type="text" id="id_hoursWorked" maxlength="5" class="projEntryControl" value="0.0" name="hoursWorked">
</p>
<p>
    <label for="id_notes">Notes:</label>
    <textarea name="notes" cols="40" rows="10" id="id_notes"></textarea
</p>
<p style="display:none;" id="entryDateId">1</p>
<p style="display:none;" id="projEntryId"></p>
</form>
</div>
<div class="ui-resizable-handle ui-resizable-n" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-s" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-w" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1000;">
</div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1000;"></div>
<div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1000;"></div>
<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
<div class="ui-dialog-buttonset">
    <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">
        <span class="ui-button-text">Save</span>
    </button>
    <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">
        <span class="ui-button-text">Cancel</span>
    </button>
</div>
</div>
</div>
<div class="ui-widget-overlay" style="width: 979px; height: 567px; z-index: 1001;"></div>
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-11" tabindex="0" style="z-index: 1003; display: none;">
</ul> 
```

# java - 如何将变量传递给内部类

> ID：13771452
> 
> 赞同：1
> 
> 时间：2012-12-07T21:43:05.403
> 
> 标签：java, parameter-passing, inner-classes

我想在`canvas`里面使用`mousePressed`。我怎样才能做到这一点？

```
public DragManager(Canvas canvas)
{
    canvas.addMouseListener(new MouseAdapter() {
        @Override public void mousePressed(MouseEvent e)
        {
            canvas.something(); // does not work.
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:51:40.940

正如这里的许多人已经说过的那样，您必须将函数参数设为最终值。

```
public DragManager(final Canvas canvas)
{
    canvas.addMouseListener(new MouseAdapter() {
        @Override public void mousePressed(MouseEvent e)
        {
            canvas.something();
        }
    });
} 
```

这意味着这个变量不能指向任何其他对象。例如，您不能在函数内部执行此操作：

```
canvas = SomeOtherCanvas 
```

如果您使用本地类定义创建对象，则在从堆栈中丢弃局部变量后（在`DragManager`构造函数完成后），该对象可以继续“存活”。它必须具有本地值的副本。如果您将此参数设置为最终参数（因此可以保证构造函数内的引用不会指向其他地方），那么拥有一个副本真的很容易：只需复制一个引用。如果没有这样的规则，您（嗯，不是您个人，而是 Java 语言）将需要不断地同步这些值，这将是一个更加复杂和缓慢的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:44:11.707

使参数最终：

```
public DragManager(final Canvas canvas) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:45:22.690

您不能在定义的内部类中引用非最终变量。将您的画布标记为最终版。

```
public void DragManager(final Canvas canvas)
    {

        canvas.addMouseListener(new MouseAdapter() {
            @Override public void mousePressed(MouseEvent e)
            {
                System.out.println(canvas);;// does not work.
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:44:09.403

```
public DragManager(final Canvas canvas)
{
    canvas.addMouseListener(new MouseAdapter() {
        @Override public void mousePressed(MouseEvent e)
        {
            canvas.something(); // does work.
        }
    });
} 
```

由于您可以修改画布变量，因此您应该将其定义为最终（常量引用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-24T17:49:11.703

不使用**final**关键字。您可以添加返回**this的****Init**方法并添加私有变量。通过 Call Init 方法传递画布。

 **```
public DragManager(Canvas canvas)
{
    canvas.addMouseListener(new MouseAdapter() {
        Canvas _canvas;
        @Override public void mousePressed(MouseEvent e)
        {
            _canvas.something(); // does not work.
        }
        public MouseAdapter Init(Canvas canvas){
            _canvas = canvas;
            return this;
        }
    }.Init(canvas));
} 
```**

# hadoop - 高内存机器上的Hadoop单节点配置

> ID：13771458
> 
> 赞同：1
> 
> 时间：2012-12-07T21:43:33.723
> 
> 标签：hadoop, mapreduce, hdfs

我在具有大量 RAM 和非常有限的可用磁盘空间大小的机器上有一个Apache Hadoop 1.1.1 的单节点实例，其默认参数值（参见例如[[1]](http://hadoop.apache.org/docs/r1.1.1/core-default.html)和[[2] ）。](http://hadoop.apache.org/docs/r1.1.1/mapred-default.html)然后，我注意到这个 Hadoop 实例在映射任务期间浪费了大量磁盘空间。为了利用高 RAM 容量并减少磁盘空间使用，我应该注意哪些配置参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:50:20.953

您可以使用几个 mapred.* 参数来压缩映射输出，这将大大减少存储映射器输出所需的磁盘空间量。请参阅[this question](https://stackoverflow.com/questions/5571156/hadoop-how-to-compress-mapper-output-but-not-the-reducer-output)以获得一些好的指示。

请注意，不同的压缩编解码器会有不同的问题（即 GZip 需要比 LZO 更多的 CPU，但您必须自己安装 LZO）。[这个页面](http://cloudtimes.org/2011/05/24/hadoop-compression-the-elephant-thats-not-in-the-room/)对 Hadoop 中的压缩问题进行了很好的讨论，尽管它有点过时了。

您需要的 RAM 量取决于您在 map-reduce 作业中所做的事情，尽管您可以在以下方面增加堆大小：

```
conf/mapred-site.xml mapred.map.child.java.opts 
```

有关这方面的更多详细信息，请参阅[集群设置](http://hadoop.apache.org/docs/stable/cluster_setup.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:54:31.247

您可以`dfs.datanode.du.reserved`在 hdfs-site.xml 中使用来指定不使用的磁盘空间量。我不知道 hadoop 是否能够补偿更高的内存使用量。

但是，如果您运行磁盘 i/o 密集型的 mapreduce 作业，您将遇到问题。我认为任何数量的配置都不会帮助你。

# vba - TextBox 突出显示的文本 Visual Basic

> ID：13771459
> 
> 赞同：-1
> 
> 时间：2012-12-07T21:43:33.613
> 
> 标签：vba, textbox

我的文本框有问题。我正在尝试制作一个像备忘录这样的小程序。当您在文本框中写入内容时，它会保存它以供下次再次打开它。但问题是当您再次打开程序时，旧文本会突出显示。那么我如何删除它呢？

```
 Public Class Form1 
     Private Sub 
       Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing
       My.Settings.memo = TextBox1.Text My.Settings.Save() 
     End Sub 
     Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load 
       TextBox1.Text = My.Settings.memo + Environment.NewLine 
     End Sub 
   End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:48:42.933

See the TextBox.SelectionStart property

# javascript - 在图的多个实例上绘图

> ID：13771464
> 
> 赞同：0
> 
> 时间：2012-12-07T21:43:56.593
> 
> 标签：javascript, jquery, d3.js, data-visualization

我正在使用 d3 库绘制一个条形图，其中包含通过 websockets 从服务器接收的 JSON 对象。但发生的情况是，每次绘制图表时，它都会绘制一个新的图表实例。所以我最终得到了多个图表。

但我希望将 JSON 数据全部绘制到同一张图上。

这是我的代码：

```
 ws = new WebSocket("ws://localhost:8888/dh");

      var useData = []
      //var chart;

      var chart = d3.select("body")
         .append("svg:svg")
         .attr("class", "chart")
         .attr("width", 420)
         .attr("height", 200);

      ws.onmessage = function(evt)
      {  
        var distances = JSON.parse(evt.data);
        data  = distances.miles;
        console.log(data);

        if(useData.length <= 10){
          useData.push(data)
        }
        else
        {

           var draw = function(data){        
           // Set the width relative to max data value
           var x = d3.scale.linear()
            .domain([0, d3.max(useData)])
            .range([0, 420]);

           var y = d3.scale.ordinal()
            .domain(useData)
            .rangeBands([0, 120]);

           var rect = chart.selectAll("rect")
            .data(useData)

            // enter rect
            rect.enter().append("svg:rect")
                .attr("y", y)
                .attr("width", x)
                .attr("height", y.rangeBand());

            // update rect            
            rect
                .attr("y", y)
                .attr("width", x)
                .attr("height", y.rangeBand());

           var text = chart.selectAll("text")
                .data(useData)

           // enter text
           text.enter().append("svg:text")
                .attr("x", x)
                .attr("y", function (d) { return y(d) + y.rangeBand() / 2; })
                .attr("dx", -3) // padding-right
                .attr("dy", ".35em") // vertical-align: middle
                .attr("text-anchor", "end") // text-align: right
                .text(String);

            // update text
            text
                .data(useData)
                .attr("x", x)
                .text(String);
        }
    useData.length = 0;
       }          
    } 
```

如何将所有点绘制到不断更新的图表上？

遗憾的是 d3 无法实时处理数据并相应地更新图表，或者如果可以的话，没有明确的教程/说明如何操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:15:36.993

我的猜测是因为你每次都在创建一个图表：

```
var chart = d3.select("body")
.append("svg:svg")
.attr("class", "chart")
.attr("width", 420)
.attr("height", 20 * useData.length); 
```

相反，您需要检查图表是否存在，如果存在，请不要调用该行。

```
// outside of .onmessage
var chart;

// inside of .onmessage
if (!chart) {
    chart = d3.select("body")
    .append("svg:svg")
    .attr("class", "chart")
    .attr("width", 420)
    .attr("height", 20 * useData.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:28:54.827

`svg`就像布赖恩说的，你在每次消息事件中都不断地创造一个新元素。但是，在 D3 中，您不需要使用`if`语句来检查元素是否存在；进行数据连接后，`enter()`选择将仅包含尚不存在的元素：

```
// data join
var chart = d3.select("body").selectAll(".chart")
    .data([useData]); // if you wanted multiple charts: .data([useData1, useDate2, useData3])

// enter
chart.enter().append("svg") // this will only execute if the .chart did not exist yet
    .attr("class", "chart")
    .attr("width", 420);

// update (both new and existing charts)
chart
    .attr("height", function(d) { return 20 * d.length; }); 
```

数据连接、enter()、update() 和 exit() 选择的概念在[Thing with Joins](http://bost.ocks.org/mike/join/)一文中进行了解释。另请参阅 3篇[通用更新模式](http://bl.ocks.org/3808218)文章。

当您在图表中更新或添加新的矩形元素时，您必须使用类似的方法。假设 useData 包含所有累积的数据（尽管 useData.length = 0 可能意味着情况并非如此）：

```
// data join
var rects = chart.selectAll("rect")
    .data(function(d) { return d; }); // use the data bound to each chart

// enter
rects.enter().append("rect");

// update
rects
    .attr("y", function(d) { return y(d.yValue); }) // not sure what your data structure looks like
    .attr("width", function(d) { return x(d.xValue); })
    .attr("height", y.rangeBand());

// exit
rects.exit().remove(); 
```

[路径转换](http://bost.ocks.org/mike/path/)中给出了一些如何使用实时数据更新路径的建议。

# java - 任何增加理性clearcase远程客户端内存设置的方法

> ID：13771467
> 
> 赞同：1
> 
> 时间：2012-12-07T21:44:01.307
> 
> 标签：java, clearcase, jvm-arguments, clearcase-remote-client

我正在使用理性的 clearcase 远程客户端版本 7.1.1.3。因为这是一个基于 Eclipse 的工具；我试图找出是否可以通过添加以下参数来增加此工具的最小和最大内存的内存设置，就像我们在 eclipse 中所做的那样：

```
-XX:MaxPermSize=512m
-Xms1024m
-Xmx2048m 
```

在 eclipse.ini 文件中。

我在我的 Rationa ClearCase Remote 客户端安装位置下找不到 eclipse.ini 文件；但我确实在这样的位置看到了几个 config.ini 文件：

```
C:\Program Files (x86)\IBM\RationalSDLC_1\clearcase\RemoteClient\integration
C:\Program Files (x86)\IBM\RationalSDLC_1\clearcase\RemoteClient\configuration
C:\Program Files (x86)\IBM\RationalSDLC_1\clearcase\RemoteClient 
```

我不确定要更改哪个更改。

知道如何实现吗？

我想更改设置的原因是，我的远程客户端非常慢，而且由于我必须使用大量的清除操作来处理巨大的视图，我认为这是因为内存使用。

我的系统信息：Windows 7 企业版 64 位 IBM 安装管理器 1.4.4 IBM 理性 ClearCase Client 7.1.1.03

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:03:00.637

例如，这将是**`ccrc.ini`**文件（如果使用 ClearCase Remote Client 独立应用程序）`<ClearCase Installed Directory>\clearcase\RemoteClient\ccrc.ini`

请参阅技术说明“[提高 ClearCase 远程客户端 (CCRC) 性能](http://www-01.ibm.com/support/docview.wss?uid=swg21499919)”。

`eclipse.ini`仅当您将 CCRC 作为插件安装到现有 Eclipse 时才涉及。

这样`ccrc.ini`您就可以：

*   [启用调试跟踪](http://www-01.ibm.com/support/docview.wss?uid=swg21423940)
*   [修复模块路径](http://www-01.ibm.com/support/docview.wss?uid=swg21394810)
*   等等...

类 Windows 路径： `C:\Program Files\IBM\RationalSDLC\ClearCase\RemoteClient\ccrc.ini`
类 Unix 路径：`/opt/ibm/RationalSDLC/clearcase/RemoteClient/ccrc.ini`

# jquery - 引导弹出窗口闪烁

> ID：13771472
> 
> 赞同：3
> 
> 时间：2012-12-07T21:44:13.053
> 
> 标签：jquery, twitter-bootstrap

我在具有工具提示的 div 中有一个引导弹出框。当您将光标放在某些区域的弹出框上时，它会闪烁。

我尝试通过在弹出弹出窗口被触发时关闭提示来修复闪烁，但这不起作用。

```
$('.item').tooltip();
$('.status-pop').mouseover(function() {
  $('.item').tooltip('hide')
}); 
```

我无法弄清楚是什么原因造成的。任何帮助表示赞赏。

小提琴：http: [//jsfiddle.net/infatti/h3pUM/](http://jsfiddle.net/infatti/h3pUM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:53:18.987

看看这个链接：http: [//vkubushyn.wordpress.com/2012/04/05/multiple-tooltipspopovers-on-the-same-element-in-twitter-bootstrap/](http://vkubushyn.wordpress.com/2012/04/05/multiple-tooltipspopovers-on-the-same-element-in-twitter-bootstrap/)。它允许您拥有多个工具提示、弹出框等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:17:24.253

我对此进行了一些粗略的测试，似乎只有当弹出框设置为正确时才会发生。
如果您更改 Fiddle 以将弹出框放在右侧，那么它可以正常工作。
bootstrap popover/twipsy javascript 中可能存在错误。

# joomla - 桥接 Ajaxplorer 与 Joomla 3.0

> ID：13771474
> 
> 赞同：1
> 
> 时间：2012-12-07T21:44:32.533
> 
> 标签：joomla, joomla3.0, bridge, pydio

我已经下载了 Joomla (3.0.2) 和 Ajaxplorer (4.2.3) 的最新版本。我正在尝试将两者连接起来以进行身份​​验证，但遇到了障碍。当前的身份验证桥适用于 Joomla 1.6 ......所以我继续前进并认为我会试一试。除了两件事之外，实现桥接的正常方法很好。

1.  /joomla/plugins/user/ajaxplorer/ajaxplorer.php 第 14 行中的“DS”需要 ' 围绕它...仍然不知道为什么，但它消除了错误，所以我希望我可以安全地假设它不再会引起问题。
    最初它看起来像这样：

> require_once (JPATH_ROOT .DS.'libraries'.DS.'joomla'.DS.'html'.DS.'parameter.php');

但是在收到错误后，我将其更改为：

> require_once ( JPATH_ROOT .'DS'.'libraries'.'DS'.'joomla'.'DS'.'html'.'DS'.'parameter.php' );

我所做的只是在 DS 周围添加 '。摆脱了错误。

1.  上面的同一个文件正在调用一个不存在的名为 parameter.php 的文件。我手动查找了该文件，但没有在该目录或任何其他目录中找到它。这是我在尝试登录或执行任何身份验证时遇到的实际错误。

致命错误：require_once()：在 C:\xampp\htdocs\joomla\plugins\第 14 行的用户\ajaxplorer\ajaxplorer.php

不用担心，这只是一个测试服务器，文件路径与发布的路径不同。

所以问题是：有谁知道 parameter.php 中的内容或知道 joomla 使用了什么而不是 parameter.php，我可以将 ajaxplorer.php 指向？我会很感激帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:14:31.537

你实际上有问题：

**首先**，据我所知，您在 Joomla 中使用过 DS！3.0

DS 已在 2.5 中弃用并[在 3.0 中删除](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#General_changes)。无论是 *unix 还是 Windows 上的服务器，您都可以使用`/`.

所以它应该看起来像这样（无论如何都不起作用）：

`require_once JPATH_ROOT . '/libraries/joomla/html/parameter.php';`

**其次**，JParameter（在 parameter.php 中）[已被删除。](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#Removed_classes)建议的替换是 JForm 或 JRegistry。

我不能告诉你如何解决这个问题，因为我还没有使用 ajaxplorer。很明显，您需要在插件内部进行一些挖掘才能使其工作。

还要注意**Joomla! 3.0**是一个短期支持版本。很快它将是 3.1 等。直到 3.5 将成为 LTS。

**我建议你看看 Joomla！2.5**已经被 ajaxplorer 支持。

# java - Java - 通过 ObjectOutputStream 发送文档

> ID：13771481
> 
> 赞同：1
> 
> 时间：2012-12-07T21:44:51.410
> 
> 标签：java, document, objectoutputstream

好的，我正在尝试创建一个连接到服务器的浏览器，当用户输入一个 url 时，浏览器将该 url 发送到服务器。然后，服务器在 JEditorPane 中打开 url，然后使用 getDocument() 方法尝试通过 ObjectOutputStream 将该文档发送回客户端。不幸的是，我无法弄清楚这一点，是无法通过 objectoutputstream 发送文档还是我做错了什么？

这是我正在使用的代码：

设置页面并获取文档的方法：

```
url = (String) input.readObject();

window.setPage(url);
doc = window.getDocument();

sendDoc(doc); 
```

通过 objectoutputstream 发送 Document 的方法：

```
try {

    output.writeObject(doc); // no compiling errors...
    output.flush();

} catch (Exception e) { } 
```

我得到的错误：

```
java.io.WriteAbortedException: writing aborted;
java.io.NotSerializableException:
javax.swing.text.html.CSS$Value is not serializable as a value in an AttributeSet 
```

`...`

```
at DawgsCodeBrowser.whileConnected(DawgsCodeBrowser.java:101)
at DawgsCodeBrowser.Run(DawgsCodeBrowser.java:71)
at StartBrowser.main(StartBrowser.java:8)
Caused by: java.io.NotSerializableException:
javax.swing.text.html.CSS$Value is not serializable as a value in an AttributeSet 
```

`...`

```
at DawgsCodeServer.sendDoc(DawgsCodeServer.java:154)
at DawgsCodeServer.whileConnected(DawgsCodeServer.java:100)
at DawgsCodeServer.Run(DawgsCodeServer.java:59)
at StartServer.main(StartServer.java:11) 
```

抱歉，错误信息很长，我取出了一些，所以它不会那么长...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:55:30.800

在这里这么说：

```
Caused by: java.io.NotSerializableException: javax.swing.text.html.CSS$Value is not serializable as a value in an AttributeSet 
```

这个内部的 CSS$Value 类正在杀死你，你可能对此无能为力。

相反，您需要质疑为什么在这种情况下发送 Document 比发送实际的原始 HTML 更好。

# angularjs - 使用 angularJS 动态加载接口：2 向绑定中断

> ID：13771483
> 
> 赞同：0
> 
> 时间：2012-12-07T21:44:52.697
> 
> 标签：angularjs, 2-way-object-databinding

我正在尝试使用 angularJS 构建动态加载界面的 Web 应用程序。

我发现在 Angular（HTML 模板 + 控制器）的初始引导之后引导我的代码的某些部分是可能的。我的问题是，这样做，2 路数据绑定不起作用。你自己看：

[http://plnkr.co/edit/MtAWP6](http://plnkr.co/edit/MtAWP6)

任何的想法？我是否正在寻求以错误的方式做事？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:45:02.673

您的问题不是引导问题（尽管您确实不应该使用引导程序来实例化控制器，而是 $compile, imo - 请参阅[此答案](https://stackoverflow.com/questions/13699972/angular-directives-not-binding-properly/13700611#13700611)）。这是一个范围问题。您在控制器中定义一个“mymodel”模型，然后在您的表单中再次定义它，angular 会自动为其创建自己的范围。虽然表单的范围继承自父范围，因此似乎“绑定”了模型，但不会发生相反的情况。

您需要在两个范围之间建立绑定（或 $watch 表单的变量，或在周围的控制器中定义 for ），或者直接将您想要的控制器分配给表单。

[在这里](http://plnkr.co/edit/OOxJQB?p=preview)看到你的问题（看到你的 $timeout 改变了两个模型，手动设置模型只改变一个）

看到它[在这里](http://plnkr.co/edit/wLn4yR?p=preview)解决（通过基本上将您的控制器分配给生成的表单，而不是所述表单的封闭 div）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:03:27.420

我想也许你应该再看看路由/深度链接。您应该能够同时指定模板 url 和控制器。

看看这个[视频](http://www.youtube.com/watch?v=5uhZCc0j9RY&list=PL1w1q3fL4pmgqpzb-XhG7Clgi67d_OHXz&index=2)

和 api[文档](http://docs.angularjs.org/api/ng.%24routeProvider)

# r - 从ggplot中删除黑色边框

> ID：13771488
> 
> 赞同：2
> 
> 时间：2012-12-07T21:45:01.597
> 
> 标签：r, ggplot2

我的df：

```
Time       CPU
1:00:00    10
1:10:00    40
1:24:03    50 
```

等等

我正在用这个构建一个ggplot：

```
p <- ggplot(df, aes(Time, CPU)) + geom_line() 
```

当我将以下代码添加到现有的 ggplot 代码时，它会在图表上放置一个黑色边框。有什么办法可以去除情节周围的黑色边界线？

```
p + opts(plot.background=theme_rec(fill="lightblue"),panel.background=theme_rect(fill='#D6E7EF')) + ylim(0,100) + opts(panel.grid.major = theme_line(size = 0.7, colour = 'white'), panel.grid.minor = theme_blank(), axis.ticks=theme_blank()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T02:04:09.737

您应该执行以下操作：

1.  将您的 R 更新到当前的 2.15.2 版本。
2.  在新的 R 会话中安装新版本的 ggplot2、plyr、scales 和 gtable，除了标准自动加载之外没有加载其他包。

这应该或多或少地复制使用新系统的 0.9.0 中的内容。我最终得到的情节没有黑色边框，所以看看这是否适合你：

```
p <- ggplot(DF, aes(x, y)) + geom_line()
p + theme(plot.background = element_rect(fill="lightblue"),
         panel.background = element_rect(fill='#D6E7EF'),
         panel.grid.major = element_line(size = 0.7, colour = 'white'), 
         panel.grid.minor = element_blank(), 
         axis.ticks = element_blank()) +
    ylim(0, 5) 
```

主要变化是 opts() 现在是 theme()，并且 theme_* 现在是 element_*。此外，为了支持新系统中元素的继承结构，还添加了一些新的主题元素。例如，考虑axis.text.y；这个主题元素继承自axis.text，而axis.text又继承自axis。还有许多其他更改，但除非您正在编写主题函数，否则这些是在实践中会出现的主要更改。

# powershell - 在Powershell中组合具有相同键但不同值的哈希表

> ID：13771489
> 
> 赞同：3
> 
> 时间：2012-12-07T21:45:05.500
> 
> 标签：powershell, key

好的，我有一些需要使用 PowerShell 组合的哈希表。以下是格式示例：

```
$table1 = @{"A" = "1,2";
            "B" = "3,4";
            "C" = "5,6"}

$table2 = @{"A" = "3";
            "B" = "5";
            "C" = "7"} 
```

我需要合并这些表以创建下表：

```
$newTable = @{"A" = "1,2,3";
              "B" = "3,4,5";
              "C" = "5,6,7"} 
```

基本上，需要比较键和值。如果值不同，则需要将它们相加。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:02:25.153

这是一种略有不同的方法：

```
$table1 = @{"A" = "1,2";
            "B" = "3,4";
            "C" = "5,6"}

$table2 = @{"A" = "3";
            "B" = "5";
            "C" = "7"}

$ht = $table1.Clone()
$table2.GetEnumerator() | % {$ht[$_.Key] += ",$($_.Value)"}
$ht

Name                           Value
----                           -----
C                              5,6,7
A                              1,2,3
B                              3,4,5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:27:05.473

怎么样：

```
$table1 = @{"A" = "1,2";
            "B" = "3,4";
            "C" = "5,6"}

$table2 = @{"A" = "2";
            "B" = "5";
            "C" = "7"}

    $newTable = @{}

    function AddToTable($table)
    {
        $table.GetEnumerator() | 
        % {
          if(!$newTable.ContainsKey($_.Key)) {$newTable.Add($_.Key, $_.Value)}
          else {$newTable[$_.Key] += ",$($_.Value)"}
          $newTable[$_.Key] = @($newTable[$_.Key].Split(",") | Get-Unique | Sort-Object) -Join "," 
        }
    }

    AddToTable($table1)
    AddToTable($table2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:51:49.187

您可以使用该`GetEnumerator()`方法循环遍历如下值。

`$table1`如果您的密钥分布不均匀（有些仅存在于 中，而另一些仅存在于 中），这将变得更加复杂，`$table2`但它适用于您的示例场景。

```
$table1 = @{"A" = "1,2";
            "B" = "3,4";
            "C" = "5,6"}

$table2 = @{"A" = "3";
            "B" = "5";
            "C" = "7"}

$NewTable = @{}

$table1.GetEnumerator() | 
%   {
    $NewTable.Add($_.Key, ("$($_.Value),$($table2[$_.Key])"))
    } 
```

# android - 使用 Android AccountManager Twitter 凭据创建 Twitter4J AccessToken

> ID：13771490
> 
> 赞同：5
> 
> 时间：2012-12-07T21:45:05.090
> 
> 标签：android, twitter, twitter-oauth, twitter4j, accountmanager

我使用以下代码从 Android AccountManager 获取 Twitter 凭据：

```
AccountManager am = AccountManager.get(this);
Account account = am.getAccountsByType("com.twitter.android.auth.login")[0];
am.invalidateAuthToken("com.twitter.android.auth.login", null);
am.getAuthToken(account, "com.twitter.android.oauth.token", null, this, createCallback(TOKEN), null);
am.getAuthToken(account, "com.twitter.android.oauth.token.secret", null, this, createCallback(TOKEN_SECRET), null); 
```

我正在使用从回调返回的值来设置 Twitter4J Twitter 对象：

```
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
twitter.setOAuthAccessToken(new AccessToken(token, tokenSecret));
User user = twitter.verifyCredentials(); 
```

但是在调用 verifyCredentials() 时会产生以下异常：

```
Exception connecting to twitter
    Received authentication challenge is null
    Relevant discussions can be found on the Internet at:
    http://www.google.co.jp/search?q=6f0f59ca or
    http://www.google.co.jp/search?q=200bae40
    TwitterException{exceptionCode=[6f0f59ca-200bae40 1de2170b-e16a1586], statusCode=-1, message=null, code=-1, retryAfter=-1, rateLimitStatus=null, version=3.0.2}
    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:192)
    at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:61)
    at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:89)
    at twitter4j.TwitterBaseImpl.fillInIDAndScreenName(TwitterBaseImpl.java:126)
    at twitter4j.TwitterImpl.verifyCredentials(TwitterImpl.java:578) 
```

在请求令牌之前，我曾尝试在 AccountManager 上调用 invalidateAuthToken ，但这没有任何区别。

将 token 和 tokenSecret 值设置为 Twitter 为我的应用程序提供的值时，我可以成功调用 verifyCredentials，但我需要能够使用当前设备用户的 Twitter 凭据。

使用从 AccountManager 返回的令牌和令牌秘密值设置 AccessToken 是否需要任何其他步骤？

这是在运行 Android 2.3.5 的 HTC Evo 上测试的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T10:22:47.057

> 我需要能够使用当前设备用户的 twitter 凭据

抱歉，这是[不可能的](https://stackoverflow.com/a/19832978/188926)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:58:13.780

检查手机上的时钟/时间是否正确。

问题是 twitter 服务器时间与您的手机时间不匹配。

# ruby-on-rails - WEBrick rails 服务器详细程度

> ID：13771494
> 
> 赞同：3
> 
> 时间：2012-12-07T21:45:15.230
> 
> 标签：ruby-on-rails, webrick, verbose

有没有办法不冗长地启动 WEBrick 服务器。我觉得它记录了太多信息。例如：

```
rails s --verbose=false 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:51:12.727

您可以在 Rails 配置中更改日志级别。

```
config.log_level = :warn # In any environment initializer, or
Rails.logger.level = 0 # at any time 
```

[http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)

# json - VS2012 WCF REST 服务 - 错误：无法获取元数据

> ID：13771501
> 
> 赞同：0
> 
> 时间：2012-12-07T21:45:30.943
> 
> 标签：json, wcf, .net-4.0, visual-studio-2012

我已经构建了一个 WCF REST Web 服务（WCF 服务应用程序），当我使用 Visual Studio 2012 进行调试时，它将启动 WCF 测试客户端应用程序并尝试添加我的 Web 服务。我收到以下错误：

```
Error: Cannot obtain Metadata from http://localhost:50925/Service1.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://localhost:50925/Service1.svc    Metadata contains a reference that cannot be resolved: 'http://localhost:50925/Service1.svc'.    Content Type application/soap+xml; charset=utf-8 was not supported by service 
```

我已经访问了上面链接的 MSDN 文档，并且我相信我已经正确设置了我的 web.config。

网络配置：

```
<?xml version="1.0"?>
<configuration>
<system.web>
 <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>  
<system.serviceModel>   
<services>
  <service name="Service1" behaviorConfiguration="Service1Behavior">       
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex">     </endpoint>
  </service>
</services>  
<behaviors>
  <serviceBehaviors>
    <behavior name="Service1Behavior">
      <serviceMetadata httpGetEnabled="true"/>     
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/>   
</system.webServer>
</configuration> 
```

我仍然继续收到相同的错误消息。我是 WCF / VS 2012 和 .Net 4.0 的新手，但我精通 VS2008 .Net 2.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:07:05.397

WCF REST 服务不公开元数据，这就是您收到该消息的原因（请参阅[此博客文章](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)中的更多详细信息）。如果您使用的是 WCF 测试客户端，它会与 SOAP 服务（端点）对话，而不是 REST 服务。

如果要启用 RESTful 端点，可以在配置中定义服务元素并在其中定义一个使用 的`webHttpBinding`端点，并且端点还需要一个`behaviorConfiguration`指向具有该行为的端点`<webHttp/>`行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:44:35.357

事实证明，我创建了一个新的 WCF 项目并查看了这里发生的情况。VS2012/.Net 4.0 不喜欢定义了端点的服务配置。这是我的新 web.config 工作正常。我需要研究为什么会这样，但至少它回答了我的问题。

```
<?xml version="1.0"?>
<configuration>
<system.web>
 <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
 <behaviors>
   <serviceBehaviors>
     <behavior>
       <serviceMetadata httpGetEnabled="true"/>
     </behavior>
   </serviceBehaviors>
 </behaviors>
 <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

# python - 如何通过xpath解析lxml中的子元素

> ID：13771502
> 
> 赞同：0
> 
> 时间：2012-12-07T21:45:33.207
> 
> 标签：python, xpath, lxml

```
page = urlopen(req)
doc = parse(page).getroot()
table = doc.xpath('/html/body/div/div/div/table')
table
<Element table ...>
doc.xpath('/html/body/div/div/div/table/tr')
<Element tr ...>...
table.xpath('/tr')
[] 
```

为什么不`table.xpath('/tr')`产生相同的元素列表`doc.xpath('/html/body/div/div/div/table/tr')`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T22:12:06.310

这是因为以 开头的 xpath`/`总是从文档根开始匹配。

为避免这种情况，要么去掉斜线，要么显式地使用它`.`来匹配当前元素。
这些中的任何一个都应该起作用：

```
table.xpath('tr')
# or
table.xpath('./tr') 
```

# android - 在使用 nostra13 universalimageloader 时，某些图像没有加载到 GridView 中？

> ID：13771507
> 
> 赞同：2
> 
> 时间：2012-12-07T21:45:51.300
> 
> 标签：android

在使用 nostra13 universalimageloader 时，某些图像未在 GridView 中加载？并且url变形如下logcat所示（在一些url后面加上%20%20）：

```
http://www.XXXXXXXXXXXXXXXXXX.com/waller/WALLPAPER/URL_THUMB/0.jpg%20%20
java.io.FileNotFoundException: http://www.XXXXXXXXXXXXXXXXXX.com/waller/WALLPAPER/URL_THUMB/0.jpg%20%20

at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream
com.nostra13.universalimageloader.core.download.URLConnectionImageDownloader.getStreamFromNetwork
at com.nostra13.universalimageloader.core.download.ImageDownloader.getStream
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:204)
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run
at java.util.concurrent.Executors$RunnableAdapter.call
java.util.concurrent.FutureTask$Sync.innerRun
at java.util.concurrent.FutureTask.run
at java.util.concurrent.ThreadPoolExecutor.runWorker
at java.util.concurrent.ThreadPoolExecutor$Worker.run
at java.lang.Thread.run
http://www.messina-test.com/waller/WALLPAPER/URL_THUMB/0.jpg%20%20
java.io.FileNotFoundException: http://www.messina-test.com/waller/WALLPAPER/URL_THUMB/0.jpg%20%20
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream
at com.nostra13.universalimageloader.core.download.URLConnectionImageDownloader.getStreamFromNetwork
at com.nostra13.universalimageloader.core.download.ImageDownloader.getStream
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap
at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run
at java.util.concurrent.Executors$RunnableAdapter.call
at java.util.concurrent.FutureTask$Sync.innerRun
at java.util.concurrent.FutureTask.run 
```

# php - CodeIgniter（预控制器）钩子和缓存

> ID：13771508
> 
> 赞同：5
> 
> 时间：2012-12-07T21:45:57.167
> 
> 标签：php, ajax, codeigniter, caching

**概括：**

缓存期间是否执行预控制器挂钩？是否有任何会执行的挂钩点？（*预系统？*）

我可能应该强调钩子不会影响发送到浏览器的内容这一事实。那不是问题。

* * *

**详细版本：**

我计划在我使用 PHP 和 CodeIgniter 构建的项目中实现一些统计类型的功能。

有问题的项目是定制的 CMS - 由于更新之间的间隔延长，**我使用缓存来帮助加快加载时间；这不是必需的，但它是优先的**。对于大部分静态站点来说，这似乎是一个很好的解决方案；特别是在动态内容主要在客户端提供服务的情况下 - 即 AJAX 请求。

提议的功能主要涉及一个**预控制器挂钩**，该挂钩通过诸如用户代理库之类的库访问方法，然后将它们转储到数据库中。从这里它可以被轮询，通过 JSON 输出并在被 jQuery flot 插件之类的东西显示之前进行操作。

我已经阅读了有关[Web Page Caching](http://ellislab.com/codeigniter/user-guide/general/caching.html)的文档以及[有关 hooks](http://ellislab.com/codeigniter/user-guide/general/hooks.html)的文档。不幸的是，目前尚不清楚使用缓存是否会完全绕过钩子。

我知道`cache_override`这意味着实现你自己的缓存机制；不是我想做的！

另一种方法是在客户端收集统计信息并通过 AJAX 将其提交给服务器；但这也不理想，因为我试图明确分离逻辑 - 出于维护和测试的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T23:10:57.133

简而言之：

*   缓存期间是否执行预控制器挂钩？**没有**。
*   是否有任何会执行的挂钩点？ **是** `pre_system`的确实执行。

* * *

如果缓存在[system/core/CodeIgniter.php:189](https://github.com/EllisLab/CodeIgniter/blob/2.2-stable/system/core/CodeIgniter.php#L193)开始，唯一有机会运行的钩子是[`pre_system`(system/core/CodeIgniter:124)](https://github.com/EllisLab/CodeIgniter/blob/2.2-stable/system/core/CodeIgniter.php#L131)。

不幸的是，此时您并没有获得太多 codeigniter 的功能，没有`get_instance()`也没有加载大多数核心库。如果你愿意，你可以看看里面定义了哪些函数，[`system/core/Common.php`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Common.php)这几乎就是你所拥有的。

如果您真的想使用内置类来完成这项工作，您可以通过自己的方式获得数据库对象和其他类似这样的核心内容：

1.  您将不得不手动获取`BASEPATH.'database/DB.php'`包含在其中的文件。幸运的是，在加载器类中，它加载了它，[`require_once`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L335)因此它不会在缓存未命中时破坏页面。
2.  一旦你`Database`加载了库，就`$this->db`调用调用来实例化通常的对象[`DB()`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/DB.php#L40)。如果没有参数，它将照常从配置文件中加载默认数据库。
3.  此时，您可以从`pre_system`钩子中编写查询，并且由于钩子可以是对象，因此您可以将每个日志记录代码移动到钩子的对象中。如果您需要其他库，您可以使用该函数获取它们的实例（如果您没有加载内置类，[`load_class()`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Common.php#L132)请不要忘记将第三个*前缀参数设置为空字符串）。*

最后你应该像这样结束（虚构代码）：

```
class MyLoggingHook {
    // called from the hook config
    public function run($params = array()) {
        require_once(BASEPATH.'database/DB.php');
        $db = DB(); // getting hold of a DAO instance

        // routing information is always useful to have for pageview logs
        $RTR = load_class('Router', 'core');
        $RTR->_set_routing();
        // Router also load Uri and Config classes inside so the following two instances could be interesting too:
        // $RTR->uri 
        // $RTR->config

        // load some useful library not related to CodeIgniter
        $user_agent_detector = load_class('UserAgentDetector', 'libraries', '');

        // do some logging
        $db->insert('page_view_log', array('class' => $RTR->fetch_class(), 'method' => $RTR->fetch_method(), /*...*/);
    } 
} 
```

我可能应该提一下，我从来没有在生产中使用过这样的东西，并且存在可能会因版本而异的功能传递的风险。如果你可以在不接触钩子内的 Codeigniter 类的情况下做到这一点。

使用[PDO](http://php.net/manual/en/book.pdo.php)进行数据库访问，使用 加载数据库配置[`get_config()`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Common.php#L226)，您无需接触任何与 codeigniter 相关的类即可。

# asp.net-mvc - 使用剃刀视图引擎从 asp.net mvc 4 中的 kendo ui datepicker 事件调用操作

> ID：13771510
> 
> 赞同：0
> 
> 时间：2012-12-07T21:46:01.660
> 
> 标签：asp.net-mvc, razor, kendo-ui

-嗨，我的索引视图中有一个剑道 UI 日期选择器，当我选择某个日期时，我想再次调用索引操作，将此日期作为参数发送给索引操作，但我不知道如何开始，不知道我是否需要声明要从 java 脚本调用的 web 方法，感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:44:43.467

```
$("#datepicker").kendoDatePicker({
                        change: function(){
                            var selectedDate = this.value();
                            var url ='@Url.Action("yourAction","yourController")';
                            url += "?date=" + selectedDate;
                            document.location.href = url;
                        }                           
                    }); 
```

这会将选定的日期发送给您的控制器操作。希望这会有所帮助。

# prolog - 如何在两个列表中找到相等的元素

> ID：13771516
> 
> 赞同：3
> 
> 时间：2012-12-07T21:46:18.883
> 
> 标签：prolog

我有以下一组事实：

```
lc('Dr. Smith', 'Algorithms').
lc('Dr. Jones', 'Models & Analysis').
lc('Dr. Smith', 'Operating Systems').
lc('Dr. Jones', 'Artificial Intelligence').
lc('Dr. Smith', 'Models of Computation').
lc('Dr. Smith', 'Discrete Math').
lc('Dr. Jones', 'Information Retrieval').
lc('Dr. Jones', 'Computer Vision').

ctl('Algorithms', 'MWF, 9:00 - 11:00 a.m.', 'McB 209').
ctl('Models & Analysis', 'MWF, 9:00 - 11:00 a.m.', 'McB 211').
ctl('Operating Systems', 'TTH, 9:00 - 11:00 a.m.', 'McB 306').
ctl('Artificial Intelligence', 'TTH, 3:00 - 5:00 p.m.', 'McB 311').
ctl('Models of Computation', 'TTH, 11:00 - 1:00 p.m.', 'McB 204').
ctl('Discrete Math', 'TTH, 3:00 - 5:00 p.m.', 'McB 204').
ctl('Information Retrieval', 'MWF, 3:00 - 5:00 p.m.', 'McB 205').
ctl('Computer Vision', 'MWF, 1:00 - 3:00 p.m.', 'NEB 2182'). 
```

我已经能够写出以下内容，这给了我一个讲师的时间表：

```
schedule(Lecturer, X, Y, Z) :- ctl(X, Y, Z), lc(Lecturer, X). 
```

但现在我正试图写一条规则来找出琼斯博士和史密斯博士何时同时教学。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:00:01.467

您可以使用自己的函数来扩展此实用程序，方法是：

```
same_time(X, Y, R) :-
    schedule(X, _, B, _),
    schedule(Y, _, B, _),
    X \= Y,
    R = B. 
```

正如列表中返回的那样，这只是告诉您同时教什么老师`X`和`Y`教什么。`B``R`

并且，如果您只希望在教学计划中同时出现多个教师的时间，您可以简单地删除初始 vars`X`和`Y`，甚至替换`R`为最终结果本身，如下所示：

```
same_time(B) :-
    schedule(X, _, B, _),
    schedule(Y, _, B, _),
    X \= Y. 
```

回报仍将是`B`不止一位老师上课的时代。

对于冲突，您可以保留语句中有效的部分，并将其简单地扩展为：

```
same_teachertime(X) :-
    schedule(X, V1, B, _),
    schedule(X, V2, B, _),
    V1 \= V2.

schedulingconflict(X, Y, X):- ctl(X, A, B), ctl(Y, A, B), X \= Y.
schedulingconflict(_, _, X):- same_teachertime(X). 
```

这认为作为同一位老师，在同一时间教授不同的科目是一种冲突，因为房间冲突正在用你写的陈述来解决。

问候！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T21:55:57.840

_类似的东西：

```
samehours(Prof1,Prof2,H) :-
   Prof1 \= Prof2,
   lc(Prof1, Sub1), lc(Prof2,Sub2),
   ctl(Sub1,H,_), ctl(Sub2, H, _). 
```

结果：

```
H = 'MWF, 9:00 - 11:00 a.m.' ;
H = 'TTH, 3:00 - 5:00 p.m.' ; 
```

# xcode - 无法在终端 OSX 中执行文件

> ID：13771519
> 
> 赞同：2
> 
> 时间：2012-12-07T21:46:28.803
> 
> 标签：xcode, macos, terminal, executable

我可以在 OSX 终端中使用`g++ -Wall -c pa1.cpp -o pa1`. 哪个创建`pa1`，所以我知道我的编译在终端中工作，但我遇到了执行问题。我试过`./pa1`,`./a.out`和`pa1`其他几个。我相信问题出在 Xcode 上，但我的代码将在终端中编译并创建可执行文件这一事实让我不确定。想，在重新安装 Xcode 之前，我会在这里征求建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:11:55.640

使用`g++ pa1.cpp -o pa1`，然后您就可以将新的可执行文件作为`./pa1`. 这要求你的整个程序都在`pa1.cpp`. 如果它分布在多个文件中，则必须在命令行上列出所有文件。

正如评论中所说，该`-c`选项意味着编译，即。创建一个可以传递给链接器以构建可执行文件的目标文件。如果不使用此选项，`g++`将首先编译任何源文件，然后在所有目标文件上调用链接器以创建`a.out`默认命名的可执行文件（名称来自历史原因）。

你可以看到你的命令的输出不是一个可执行的二进制文件，而是一个中间目标文件，通过使用`file`util.

# wpf - wpf 绑定：调用线程无法访问此对象，因为不同的线程拥有它

> ID：13771521
> 
> 赞同：1
> 
> 时间：2012-12-07T21:46:34.040
> 
> 标签：wpf, multithreading

从视图模型属性引发 NotifyPropertyChange 事件后，我收到此错误。

我在 setter 上添加了（作为测试）一个 UI Dispatcher.Invoke 调用，它似乎暂时解决了这个问题。

```
 public FeedTrackingSummary SelectedFeedTracking {
        get { return _selectedFeedTracking; }
        set { 
            Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)(() => {
                _selectedFeedTracking = value; Notify("SelectedFeedTracking");
            }));
        }
    } 
```

下面的 SelectedFeedTracking 是通过选择绑定到此属性的下拉值来设置的：

```
<ComboBox... SelectedItem="{Binding SelectedFeedTracking}"  /> 
```

选择下拉值后发生错误。没有其他代码设置此属性。我猜我的视图模型在发生这种情况时在后台线程中使用？

*更新*

我尝试删除对 INotifyPropertyChanged 的​​调用，并设置一个完全不同的属性，但错误仍然存​​在。所以我想这与整个视图模型的可访问性有关？

```
 set { 
            SelectedCalc = -1;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:05:52.433

一些 MVVM 框架（例如 Caliburn.Micro，例如）有一个基`NotifyPropertyChanged`类，它自动将属性更改通知（通过引发`PropertyChanged`事件）编组到所谓的“UI 线程”。

因此，不必`Application.Current.Dispatcher.Invoke`在每个属性设置器上都 (...) ，而是将该代码放入您的`Notify()`方法中。因此，请确保每次通知 ViewModel 中的属性更改时，您都会在 UI 线程中这样做。

# web-services - 通过 Web 服务与 Dynamics NAV 进行实时接口

> ID：13771524
> 
> 赞同：3
> 
> 时间：2012-12-07T21:46:59.787
> 
> 标签：web-services, navision, dynamics-nav, dynamics-nav-2013, dynamics-nav-2009

我想编写一个与 Dynamics NAV 2009 和 2013 实时交互的 .NET 应用程序。该应用程序必须读取和更新客户和库存项目等实体。

使用提供的 Web 服务似乎是作为集成点的最佳选择，我已经尝试了一些基本测试，使用基于 Pages 和 .net 客户端的 Web 服务阅读、更新和创建项目。

不幸的是，我对 Dynamics 很陌生，我有一些问题可能反映了缺乏经验。

首先 - web 服务可以公开页面或代码单元。Page 是否是用于接口的正确选项 - 创建客户？

其次 - 我的理解是 Dynamics NAV 很少在没有定制的情况下部署。NAV 中的典型定制（例如添加字段）是否会涉及更改标准页面，然后此更改会反映在 Web 服务定义中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:28:20.110

你是对的——考虑到你的要求，网络服务可能是与 NAV 交互的最佳选择。

关于您的第一个问题：页面 Web 服务知道如何处理并发，并且由于 Visual Studio 封装它们的方式，公开了可以从 .NET 代码与之交互的丰富类型。所有基本的 CRUD 操作都可以使用公开的方法执行。更详细的 codeunit web services 和 page web services 对比请参考[http://msdn.microsoft.com/en-us/library/dd355398.aspx](http://msdn.microsoft.com/en-us/library/dd355398.aspx)。

我认为大多数开发人员选择不发布普通页面（针对 NAV Windows 客户端的页面；以前称为角色定制客户端），而是创建单独的、经过调整的页面以作为 Web 服务发布。但是，如果您愿意，我想您可以将自定义字段添加到标准页面并将其作为 Web 服务发布。

希望这可以帮助！祝你好运！:)

# php - 无法更新行mysql数据库

> ID：13771526
> 
> 赞同：-5
> 
> 时间：2012-12-07T21:47:08.517
> 
> 标签：php, mysql

好的，所以我正在尝试创建一个可用列以在输入相同的字段后递增，但它似乎不起作用，我已经尝试了很长时间。我知道代码一团糟，但请有人帮忙吗？

```
 $make = strtolower($_POST['make']);
  $fuel = $_POST['fuel'];
  $transmission = $_POST['transmission'];
  $size = $_POST['size'];
  $doors = $_POST['doors'];
  /*$date = time();*/

  date_default_timezone_set('Europe/London');
  $date = date('y-m-d');

  $connect = mysql_connect ("localhost", "root", "**********");
  mysql_select_db ("car");

  $query = "SELECT * FROM type WHERE make = '$make'";
  $result = mysql_query($query);
  $row = mysql_num_rows($result);
  $amount = $row+1;
  $id = $make."[".$amount."]";

  if (isset($_POST['submit'])){

      if ($make&&$fuel&&$transmission&&$size&&$doors)
      {
          /*if ($fuel!== $fueltype['0','1','2','3'])*/
          if ($fuel=='text')
          {
                $msg = ("Please enter a valid fuel type: Petrol, Diesel, LPG or Electric");
          }
          else
          if ($transmission=='text')
          {
              $msg = ('Please enter a valid transmission type: Manual, Auto or Semi-auto');

          }
          else
          if(strpos($size,".") == false){
             $msg = ('Please enter the valid engine size: 1.0, 1.4, 1.6 etc');
          }
          else
          if(!preg_match("/^[0-9]+$/",$doors)){
            $msg = ('Please enter the number of doors. 3, 5 etc');
          }
          else{
          //Creates the id
            $query = mysql_query("SELECT * FROM type");
      $numrows = mysql_num_rows($query);

      if ($numrows!=0){

          while ($row = mysql_fetch_assoc($query)){
            $dbid = $row["id"];
            $dbmake = $row["make"];
            $dbfuel = $row["fuel"];
            $dbtransmission = $row["transmission"];
            $dbsize = $row["size"];
            $dbdoors = $row["doors"];
          }

          if  ($make==$dbmake&&$fuel==$dbfuel&&$transmission==$dbtransmission&&$size==$dbsize&&$doors==$dbdoors){

            print_r($dbid);
            print_r($dbmake);
            print_r($dbfuel);
            print_r($dbtransmission);
            print_r($dbsize);
            print_r($dbdoors);
                    mysql_query("UPDATE type SET available=available+1 ON DUPLICATE KEY id = id ");
          }
          else{

            //increments the available column '$make'+'[#]'
          $query = "SELECT * FROM type WHERE id = '$id'";
          $result = mysql_query($query);
          $numrows = mysql_num_rows($result);
          $inc = $numrows+1;
          $available = $inc;

          $query = mysql_query ("INSERT INTO type VALUES ('$id', '$make', '$fuel', '$transmission', '$size', '$doors', '$date', '$available')");
          $msg = ("Car has been added to database. <a href='database.php'>View database?</a>");
          }
          }
          }
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:51:57.477

这并没有解决您的问题，因为您的代码中有太多内容无法确定您的问题所在。

但是，您的代码容易受到 SQL 注入的攻击。如果您计划将其上传到人们可能使用的某种网站，请使用 PHP PDO 参数化或以其他方式清理您的所有输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:04:19.543

如何将 SQL 语句更改为：

```
"UPDATE type SET available=available+1 where id='$dbid'" 
```

我不确定查询中使用的 ON Duplicate 是否有效，您使用的是 id=id

# jquery - 在除某些子 div 之外的 div 中查找图像

> ID：13771536
> 
> 赞同：1
> 
> 时间：2012-12-07T21:48:25.307
> 
> 标签：jquery

这是小提琴：http: [//jsfiddle.net/Xhqz9/](http://jsfiddle.net/Xhqz9/)

我试图找到里面的所有图像，`<div id="primary" />`除了位于 any 里面的图像`<div class="nohover" />`，它总是一个子元素，并对这些图像做悬停效果。

```
<div id="primary">
    <img src="http://placehold.it/75x75">
    <div class="nohover">
        <img src="http://placehold.it/75x75">
    </div>
    <img src="http://placehold.it/75x75">
    <div class="nohover">
        <img src="http://placehold.it/75x75">
    </div>
</div>​ 
```

jQuery：

```
var postImgsRed = $('#primary').find('img');
postImgsRed.each(function() {
    $(this).css('border', '1px solid red');
});

var postImgsHover = $("#primary > :not(.nohover)").find("img");
postImgsHover.each(function() {
    $(this).hover(function() {
        $(this).fadeOut(100);
        $(this).fadeIn(500);
    })
});​ 
```

我的悬停功能未正确执行。它不会像我想做的那样对第一张或第三张图像产生影响。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:54:53.097

```
var postImgsRed = $('#primary').find('img');
postImgsRed.each(function() {
    $(this).css('border', '1px solid red');
});

var postImgsHover = $("#primary > img");
postImgsHover.each(function() {
    $(this).hover(function() {
        $(this).fadeOut(100);
        $(this).fadeIn(500);
    })
});​ 
```

小提琴：http: [//jsfiddle.net/Xhqz9/1/](http://jsfiddle.net/Xhqz9/1/)

注意：这适用于您的示例。如果您可以拥有不是`#primary`与条件匹配的直接后代的图像，则需要对其进行更改`$("#primary img").not(".nohover img")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:55:32.097

使用[.not](http://api.jquery.com/not/)选择器并过滤掉 .nohover 下的选择器

```
$('#primary img').not('.nohover img') 
```

[http://jsfiddle.net/HDuRq/](http://jsfiddle.net/HDuRq/)

[摆弄你的悬停效果](http://jsfiddle.net/rnTb8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:51:02.480

您可以找到以下的直接`img`后代`#primary`：

```
$('#primary > img').each(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:51:26.940

使用选择器：

```
$('#primary > img') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:53:09.423

使用`children()`代替，`find()`因为它只会选择节点的直接后代而不是任何后代：[http ://api.jquery.com/children/](http://api.jquery.com/children/)

```
$('#primary').children('img'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-07T22:03:02.287

使用 .not() 排除具有 .nohover 类的元素：

```
$('#primary div').not('div.nohover').find('img')... 
```

# cuda - 分析我的 CUDA 内核的内存访问合并

> ID：13771538
> 
> 赞同：6
> 
> 时间：2012-12-07T21:48:39.337
> 
> 标签：cuda, shared

我想通过 BS_x*BS_Y 线程将内容移动到共享内存来读取 (BS_X+1)*(BS_Y+1) 全局内存位置，并且我开发了以下代码。

```
int i       = threadIdx.x;
int j       = threadIdx.y;
int idx     = blockIdx.x*BLOCK_SIZE_X + threadIdx.x;
int idy     = blockIdx.y*BLOCK_SIZE_Y + threadIdx.y;

int index1  = j*BLOCK_SIZE_Y+i;

int i1      = (index1)%(BLOCK_SIZE_X+1);
int j1      = (index1)/(BLOCK_SIZE_Y+1);

int i2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)%(BLOCK_SIZE_X+1);
int j2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)/(BLOCK_SIZE_Y+1);

__shared__ double Ezx_h_shared_ext[BLOCK_SIZE_X+1][BLOCK_SIZE_Y+1];     

Ezx_h_shared_ext[i1][j1]=Ezx_h[(blockIdx.y*BLOCK_SIZE_Y+j1)*xdim+(blockIdx.x*BLOCK_SIZE_X+i1)];

if ((i2<(BLOCK_SIZE_X+1))&&(j2<(BLOCK_SIZE_Y+1))) 
Ezx_h_shared_ext[i2][j2]=Ezx_h[(blockIdx.y*BLOCK_SIZE_Y+j2)*xdim+(blockIdx.x*BLOCK_SIZE_X+i2)]; 
```

在我的理解中，合并是顺序处理的连续内存读取的并行等价物。我现在如何检测全局内存访问是否已合并？我注意到有一个从 (i1,j1) 到 (i2,j2) 的索引跳转。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T23:08:06.893

我已经使用手写的合并分析器评估了您的代码的内存访问。评估显示代码较少利用合并。这是您可能会发现有用的合并分析器：

```
#include <stdio.h>
#include <malloc.h>

typedef struct dim3_t{
    int x;
    int y;
} dim3;

// KERNEL LAUNCH PARAMETERS
#define GRIDDIMX 4
#define GRIDDIMY 4
#define BLOCKDIMX 16
#define BLOCKDIMY 16

// ARCHITECTURE DEPENDENT
// number of threads aggregated for coalescing
#define COALESCINGWIDTH 32
// number of bytes in one coalesced transaction
#define CACHEBLOCKSIZE 128
#define CACHE_BLOCK_ADDR(addr,size)  (addr*size)&(~(CACHEBLOCKSIZE-1))

int main(){
    // fixed dim3 variables
    // grid and block size
    dim3 blockDim,gridDim;
    blockDim.x=BLOCKDIMX;
    blockDim.y=BLOCKDIMY;
    gridDim.x=GRIDDIMX;
    gridDim.y=GRIDDIMY;

    // counters
    int unq_accesses=0;
    int *unq_addr=(int*)malloc(sizeof(int)*COALESCINGWIDTH);
    int total_unq_accesses=0;

    // iter over total number of threads
    // and count the number of memory requests (the coalesced requests)
    int I, II, III;
    for(I=0; I<GRIDDIMX*GRIDDIMY; I++){
        dim3 blockIdx;
        blockIdx.x = I%GRIDDIMX;
        blockIdx.y = I/GRIDDIMX;
        for(II=0; II<BLOCKDIMX*BLOCKDIMY; II++){
            if(II%COALESCINGWIDTH==0){
                // new coalescing bunch
                total_unq_accesses+=unq_accesses;
                unq_accesses=0;
            }
            dim3 threadIdx;
            threadIdx.x=II%BLOCKDIMX;
            threadIdx.y=II/BLOCKDIMX;

            ////////////////////////////////////////////////////////
            // Change this section to evaluate different accesses //
            ////////////////////////////////////////////////////////
            // do your indexing here
            #define BLOCK_SIZE_X BLOCKDIMX
            #define BLOCK_SIZE_Y BLOCKDIMY
            #define xdim 32
            int i       = threadIdx.x;
            int j       = threadIdx.y;
            int idx     = blockIdx.x*BLOCK_SIZE_X + threadIdx.x;
            int idy     = blockIdx.y*BLOCK_SIZE_Y + threadIdx.y;

            int index1  = j*BLOCK_SIZE_Y+i;

            int i1      = (index1)%(BLOCK_SIZE_X+1);
            int j1      = (index1)/(BLOCK_SIZE_Y+1);

            int i2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)%(BLOCK_SIZE_X+1);
            int j2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)/(BLOCK_SIZE_Y+1);
            // calculate the accessed location and offset here
            // change the line "Ezx_h[(blockIdx.y*BLOCK_SIZE_Y+j1)*xdim+(blockIdx.x*BLOCK_SIZE_X+i1)];" to
            int addr = (blockIdx.y*BLOCK_SIZE_Y+j1)*xdim+(blockIdx.x*BLOCK_SIZE_X+i1);
            int size = sizeof(double);
            //////////////////////////
            // End of modifications //
            //////////////////////////

            printf("tid (%d,%d) from blockid (%d,%d) accessing to block %d\n",threadIdx.x,threadIdx.y,blockIdx.x,blockIdx.y,CACHE_BLOCK_ADDR(addr,size));
            // check whether it can be merged with existing requests or not
            short merged=0;
            for(III=0; III<unq_accesses; III++){
                if(CACHE_BLOCK_ADDR(addr,size)==CACHE_BLOCK_ADDR(unq_addr[III],size)){
                    merged=1;
                    break;
                }
            }
            if(!merged){
                // new cache block accessed over this coalescing width
                unq_addr[unq_accesses]=CACHE_BLOCK_ADDR(addr,size);
                unq_accesses++;
            }
        }
    }
    printf("%d threads make %d memory transactions\n",GRIDDIMX*GRIDDIMY*BLOCKDIMX*BLOCKDIMY, total_unq_accesses);
} 
```

该代码将为网格的每个线程运行并计算合并请求的数量，内存访问合并的度量。

要使用分析器，请将代码的索引计算部分粘贴到指定区域，并将内存访问（数组）分解为“地址”和“大小”。我已经为您的代码完成了此操作，其中索引为：

```
int i       = threadIdx.x;
int j       = threadIdx.y;
int idx     = blockIdx.x*BLOCK_SIZE_X + threadIdx.x;
int idy     = blockIdx.y*BLOCK_SIZE_Y + threadIdx.y;

int index1  = j*BLOCK_SIZE_Y+i;

int i1      = (index1)%(BLOCK_SIZE_X+1);
int j1      = (index1)/(BLOCK_SIZE_Y+1);

int i2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)%(BLOCK_SIZE_X+1);
int j2      = (BLOCK_SIZE_X*BLOCK_SIZE_Y+index1)/(BLOCK_SIZE_Y+1); 
```

并且内存访问是：

```
Ezx_h_shared_ext[i1][j1]=Ezx_h[(blockIdx.y*BLOCK_SIZE_Y+j1)*xdim+(blockIdx.x*BLOCK_SIZE_X+i1)]; 
```

分析器报告 4096 个线程访问 4064 个缓存块。为您的实际网格和块大小运行代码并分析合并行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:49:09.463

随着 GPU 的发展，获得合并访问的要求变得不那么严格。对于早期的 GPU 架构，您对合并访问的描述比较新的架构更准确。特别是，费米（计算能力 2.0）显着放宽了要求。在 Fermi 和更高版本上，连续访问内存位置并不重要。相反，重点已经转移到使用尽可能少的内存事务访问内存。在 Fermi 上，全局内存事务为 128 字节宽。因此，当一个 warp 中的 32 个线程遇到执行加载或存储的指令时，将安排 128 字节事务来为 warp 中的所有线程提供服务。然后，性能取决于需要多少事务。如果所有线程都访问与 128 字节对齐的 128 字节区域内的值，单笔交易是必要的。如果所有线程访问不同 128 字节区域中的值，则需要 32 个事务。这将是服务于扭曲中单个指令的请求的最坏情况。

您使用 CUDA 分析器之一来确定服务请求所需事务的平均值。该数字应尽可能接近 1。较高的数字意味着您应该查看是否有机会优化内核中的内存访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:46:16.073

[视觉分析器](http://docs.nvidia.com/cuda/profiler-users-guide/index.html)是检查工作的绝佳工具。在您拥有一段功能正确的代码后，然后从可视化分析器中运行它。例如，在 linux 上，假设您有一个 X 会话，只需从终端窗口运行 nvvp。然后，您将获得一个向导，该向导将提示您对应用程序进行概要分析以及任何命令行参数。

然后，分析器将对您的应用程序进行基本运行以收集统计信息。您还可以选择更高级的统计信息收集（需要额外运行），其中之一是内存利用率统计信息。它将以峰值百分比的形式报告内存利用率，并且还会针对它认为值得您注意的低利用率标记警告。

如果您的使用率高于 50%，那么您的应用程序可能正在按照您期望的方式运行。如果您的数字较低，您可能错过了一些合并细节。它将分别报告内存读取和内存写入的统计信息。要获得 100% 或接近它，您还需要确保来自 warp 的合并读取和写入在 128 字节边界上对齐。

在这些情况下的一个常见错误是使用基于 threadIdx.y 的变量作为变化最快的索引。在我看来，您并没有犯这个错误。例如，这是一个常见的错误，`shared[threadIdx.x][threadIdx.y]`因为这通常是我们在 C 中思考它的方式。但是线程首先在 x 轴上分组在一起，所以我们想要使用`shared[threadIdx.y][threadIdx.x]`或类似的东西。如果你确实犯了这个错误，你的代码在功能上仍然是正确的，但是你会在分析器中得到低百分比的利用率数字，比如大约 12% 甚至 3%。

如前所述，要达到 50% 以上并接近 100%，您需要确保不仅所有线程请求都是相邻的，而且它们在 128B 边界上对齐。由于 L1/L2 缓存，这些不是硬性规则，而是指南。缓存可以在一定程度上减轻一些错误。

# java - Android中有哪些不同的键盘类型？

> ID：13771541
> 
> 赞同：2
> 
> 时间：2012-12-07T21:48:51.853
> 
> 标签：java, android

我见过这些：

```
InputType.TYPE_CLASS_PHONE
InputType.TYPE_CLASS_TEXT 
```

还有更多吗？它们是什么以及它们与其他的显示有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T21:54:02.080

[在Android InputType](http://developer.android.com/reference/android/text/InputType.html)文档页面上有一个完整的列表和描述。

*PS - 这是你谷歌“android inputtype”时的第一个搜索结果。*

# php - 创建一个带有标签的 HTML/CSS/PHP 框架，带有单独的标签图像

> ID：13771558
> 
> 赞同：1
> 
> 时间：2012-12-07T21:50:52.093
> 
> 标签：php, javascript, html, css

我有一个页面，中间有一个大块，我计划在其中显示与从选项卡中选择的类别相关的数据。我希望这些数据能够根据相关数据实例的数量自动填充和分页。

我还想设置它，以便当您选择一个选项卡时，背景图像混合到大块中，而未选择的选项卡具有明显不是同一块的一部分的图形。

我已经创建了所有艺术品，我的 html 模板准备好了，我恰好在大约 4-6 年的时间内脱离了循环编程。所以我对如何：

A) 创建相关数据流，并对其进行格式化。

B) 让选项卡反映选择的类别。

我在代码中的选项卡部分有这个：

```
<tr>
    <td background="images/LeftSideSpacer3.png" width="20" height="32"></td>
    <td background="images/LeftSideButtonSpacer.png" width="14" height="32"></td>
    <td background="images/LeftSideButtonSpacer2.png" width="2" height="32"></td>
    <td background="<?php tabStatus(); ?>" width="65" height="32">
        <a href="<?php $href=$CategoryTitle; ?>?<?php echo $href; ?>" name="<?php $SectionName='Hunter'; ?>Hunter" onClick="<?php $CategoryTitle='Hunter'; ?>">Hunter</a>
    </td>
    <td background="images/ButtonSpacer.png" width="3" height="32"></td>
    <td background="images/TabOff.png" width="65" height="32"></td> 
```

在`tabStatus()`我的标题中调用预定义函数的位置：

```
function tabStatus() {
    if ($SectionName == $CategoryTitle) {
        return "images/TabOn.png";
    }
    else {
        return "images/TabOff.png";
    }
} 
```

这些都不起作用，这让我重新迷失了方向。4 小时的谷歌搜索和搜索对我没有多大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:06:30.523

我假设您从 sql 数据库或类似数据库中获取数据。在这种情况下，您只需遍历包含数据的对象并在 HTML 上下文中打印它，例如：

```
foreach($data as $value)
{
    // This is supposed to be the resulting HTML string for every data value
    echo "<td>" . $value . "</td>"; 
} 
```

这将产生一个包含您的数据的静态 HTML 页面。对于每个客户端请求，将根据请求构建一个新页面。

如果您想要一种更动态的方法，然后将数据加载到您的站点中，请查看此处 [http://verido.dk/index.php/ressourcer/artikler/loading-and-saving-data-dynamically-using-php- jquery-and-mysql/](http://verido.dk/index.php/ressourcer/artikler/loading-and-saving-data-dynamically-using-php-jquery-and-mysql/)

如果您还有其他问题，请在您的问题中具体说明。这将导致更好的答案。如果您在编程方面需要一般帮助，最好在论坛（而不是 StackExchange）上询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:55:15.187

您正在构建用户界面，并且需要将其分解为更易于管理的块。事实上，这个问题很难回答，因为没有一个“真正”的问题，也没有一个真正的答案。

查看提供的代码，我建议阅读 HTML 和 CSS。[HTML Dog](http://htmldog.com)是开始创建语义标记的好方法。从那里，您可以使用新发现的技能将其应用于您的场景。剖析其他精心构建的网页也是提高 HTML 和 CSS 知识的好方法。

# java - 在 Java 中使用自定义数据类型

> ID：13771563
> 
> 赞同：0
> 
> 时间：2012-12-07T21:51:12.837
> 
> 标签：java

我是编程新手，我有一个任务是编写一个名为 Names 的类。在我的 main 方法中，我想读入整个名称并将其传递给我的 Names 构造函数。但是，在传递方法数据时，我不断收到类型不匹配错误。我究竟做错了什么？？

```
import java.util.Scanner;
public class Names {
String first, middle, last;
    /**
     * @param args
     */
    public Names(){

    }
    public Names(String first, String middle, String last){
        first = this.first;
        middle = this.middle;
        last = this.last;
    }

    //returns the first name
    public String getFirst(){
        return first;
    }

    //returns the middle name
    public String getMiddle(){
        return middle;
    }
    //returns the last name
    public String getLast(){
        return last;
    }
    // Returns a string containing the person's full name in order,
    public String firstMiddleLast(){
        String ret = first + " " + middle + " " + last;
        return ret;
    }
    public String lastFirstMiddle(){
        String ret = last + ", " + first + " " + middle;
        return ret;
    }
    public boolean equals(Names otherName){
        if (first.equalsIgnoreCase(otherName.first) || middle.equalsIgnoreCase(otherName.middle) 
                || last.equalsIgnoreCase(otherName.last))
            return true;
        else
            return false;
    }
    public String initials(){
        String retVal = first.substring(0) + "." + middle.substring(0) + "." + last.substring(0) + ".";
        return retVal.toUpperCase();
    }
    public int length(){
        String wholeName = (first+middle+last);
        int retVal = wholeName.length();
        return retVal;
    }
    public static void main(String[] args) {
        Names person1 = new Names();
        Names person2 = new Names();
        Scanner scan = new Scanner(System.in);

        System.out.println("Enter First Name: ");
        person1.first = scan.next();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:55:35.017

一方面，您的构造函数是倒退的。做这个：

```
public Names(String first, String middle, String last){
    this.first = first;
    this.middle = middle;
    this.last = last;
} 
```

`this`保留字总是指您正在使用的类/对象。因此，当您`this.first`在`Names`类中引用时，您指的是 Names 的第一个变量，而不是您首先命名的函数参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T22:00:48.543

> 第 60 行，当我尝试首先将字符串传递给构造函数 Names(String first, String middle, String last)

我在您发布的代码中没有看到任何编译时错误，但您的代码应该是这样的：

```
 System.out.println("Enter First Name: ");
    String firstname = scan.next();
     System.out.println("Enter Middle Name: ");
    String middlename = scan.next();
    System.out.println("Enter Last Name: ");
    String lastname = scan.next();

    Names person1 =new Names(firstname, middlename, lastname); 
```

正如其他人所指出的，您的构造函数声明无效。

```
 public Names(String first, String middle, String last){
        this.first = first;
        this.middle = middle;
        this.last = last;
    } 
```

# flash - Cocos2d: is this design pattern valid?

> ID：13771565
> 
> 赞同：0
> 
> 时间：2012-12-07T21:51:37.643
> 
> 标签：flash, design-patterns, cocos2d-iphone

I have a CCScene and several CCSprites added as nodes to it. I then have a subclass (also added to the SAME CCScene class instance), which we call here Whatever, of CCSprite that has some clever beheaviour. I'd like to allow this class to reference the CCSprite nodes added to the main scene and modify some properties of them (e.g. visibility). My current solution is to add a pointer to a NSMutableArray as member variable of Whatever class.

I use the CCScene class to trigger those action via the Whatever class. For instance I call the "TriggerAction" method in the Whatever node at specific times. This action modifies the CCSprites belonging to the same parent CCScene.

I am a newbie but it sounds like something potentially dangerous to me and I am wondering if this is a known design pattern or, worse, a known mistake.

Any experience in using a pattern like this? I have added "Flash" as tag as Cocos2D inherits some concepts from Flash.

EDIT:

Whatever is a special sprite (e.g. planet) that when touched is supposed to show LevelIcon sprites. My problem is that I want to position the levelIcons in respect to the planet position on the screen and the easiest way to do so was by adding them to the scene that contained the planets. I will now explore the solution where they are added only to the planet as Whatever sublcasses.. the problem is in this way I couple them a lot and I cannot recycle the Whatever class in other scenes where I don't require the LevelIcons.

![Is this pattern valid](../Images/f4996869062516e2f9dccb51c10f18b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:55:00.113

这是一个不错的模式，但由于兄弟姐妹保留了其他兄弟姐妹，因此存在泄漏内存的可能性。

更好的解决方案是使精灵成为控制节点的子节点。这样您就不会冒保留循环的风险，并且您不必有一个单独的数组来保留对精灵的引用，因为它们已经在子数组中。您可以使用标签来识别单个精灵。

如果“Whatever”实际上（不需要）显示任何内容，您应该使用 CCNode 作为超类而不是 CCSprite。

# c# - 从文件读取时行重复

> ID：13771567
> 
> 赞同：-3
> 
> 时间：2012-12-07T21:51:39.933
> 
> 标签：c#, file, file-io, multidimensional-array

> **可能重复：**
> [通过for循环在c#中打印二维数组](https://stackoverflow.com/questions/13769448/printing-2d-array-in-c-sharp-through-for-loop)

这就是我在 txt 文件中的数据：

```
1--2--3--    
3-4-4-5--    
-7-3-4---
7--5--3-6    
--7---4--    
3-2--4-5-    
------3--    
2-6---7---    
4---4---3-
```

之间没有任何空行！上面有这个格式问题！

是我的 c# 代码也可以通过显示器进行文件读取：

```
public void populate_grid_by_file()
        {
            int counter = 0;
            string line;

            // Read the file and display it line by line.
            System.IO.StreamReader file =
               new System.IO.StreamReader("data.txt");
            for (int i = 0; i < Sodoku_Gri.GetLength(0); i++)
            {
                while ((line = file.ReadLine()) != null)
                {
                    for (int j = 0; j < Sodoku_Gri.GetLength(1); j++)
                    {
                        Sodoku_Gri[i,j] = line[j];
                        Console.Write(line[j].ToString());

                    }
                    Console.WriteLine(line);
                    counter++;
                }
            }
            file.Close();
            // Suspend the screen.
            Console.ReadLine();
        } 
```

但是当我用上面的文件显示我的数组时，它就像：

```
1--2--3--1--2--3--    
3-4-4-5--3-4-4-5--    
-7-3-4----7-3-4---    
7--5--3-67--5--3-6    
--7---4----7---4--    
3-2--4-5-3-2--4-5-    
------3--------3--    
2-6--7---2-6--7---    
4---4---3-4---4---3-
```

cnt明白为什么重复！帮助！

调试的时候发现线路有问题：

```
Console.Write(line[j].ToString()); 
```

这意味着这里的元素不会自动加载到数组中：

```
Sodoku_Gri[i,j] = line[j]; 
```

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:55:13.967

您在此处逐个字符地显示该行一次：

```
 Console.Write(line[j].ToString()); 
```

然后在这里一次完成整行：

```
 Console.WriteLine(line); 
```

# c - 另一个快速三角函数

> ID：13771573
> 
> 赞同：2
> 
> 时间：2012-12-07T21:51:57.350
> 
> 标签：c, floating-point, precision, trigonometry, numerical-methods

```
float sinx(float x)
{
    static const float a[] = {-.1666666664,.0083333315,-.0001984090,.0000027526,-.0000000239};
    float xsq = x*x;
    float temp = x*(1 + a[0]*xsq + a[1]*xsq*xsq + a[2]* xsq*xsq*xsq+a[3]*xsq*xsq*xsq*xsq+ a[4]*xsq*xsq*xsq*xsq*xsq);
    return temp;
} 
```

这些常数是如何计算的？如何计算`cos`和`tan`使用这种方法？我可以扩展它以获得更高的精度吗？我想我需要添加更多常量？

* * *

[![的误差图](../Images/07ff004a288a8a932a4cf47f159505fc.png)](https://i.stack.imgur.com/aIvKP.png) *上面描述的“快速”正弦误差与等次泰勒多项式的关系图。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T22:34:30.183

在撰写本文时，几乎所有答案都涉及函数 sin 的泰勒展开，但如果函数的作者是认真的，他不会使用泰勒系数。泰勒系数往往会产生一个多项式近似，它在接近零时比必要的要好，并且在远离零时越来越差。目标通常是在 -π/2…π/2 等范围内获得一致良好的近似值。对于多项式近似，这可以通过应用[Remez 算法](http://en.wikipedia.org/wiki/Remez_algorithm)来获得。一个脚踏实地的解释是[这篇](http://lol.zoy.org/blog/2011/12/21/better-function-approximations)文章。

通过该方法获得的多项式系数接近泰勒系数，因为两个多项式都试图逼近相同的函数，但是对于相同数量的操作，多项式可能更精确，或者对于相同（均匀）质量涉及更少的操作的近似值。

我不能仅通过查看它们来判断您问题中的系数是完全泰勒系数还是由 Remez 算法获得的略有不同的系数，但即使不是，它也可能是应该使用的。

最后，无论是谁写的都`(1 + a[0]*xsq + a[1]*xsq*xsq + a[2]* xsq*xsq*xsq+a[3]*xsq*xsq*xsq*xsq+ a[4]*xsq*xsq*xsq*xsq*xsq)`需要阅读更好的多项式评估方案，例如[霍纳的](http://en.wikipedia.org/wiki/Horner%27s_method)：

`1 + xsq*(a[0]+ xsq*(a[1] + xsq*(a[2] + xsq*(a[3] + xsq*a[4]))))`使用 N 次乘法而不是 N ² /2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:00:30.900

它们是`-1/6`, `1/120`, `-1/5040`.. 等等。

或者更确切地说：`-1/3`!, `1/5!`, `-1/7!`, `1/9!`... 等

[在这里](http://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions)查看 sin x 的泰勒级数：

![在此处输入图像描述](../Images/395b30ab68c49b4d5767d9a693687e3a.png)

它的正下方有 cos x：

![在此处输入图像描述](../Images/2190ac39ca294c97e93c86af246a554e.png)

对于 cos x，如上图所示，常数为`-1/2!, 1/4!, -1/6!, 1/8!`...

tan x 略有不同：

![在此处输入图像描述](../Images/1dd6ef931b3ffb8db13b9817d3aff741.png)

所以要为 cosx 调整它：

```
float cosx(float x)
{
    static const float a[] = {-.5, .0416666667,-.0013888889,.0000248016,-.0000002756};
    float xsq = x*x;
    float temp = (1 + a[0]*xsq + a[1]*xsq*xsq + a[2]* xsq*xsq*xsq+a[3]*xsq*xsq*xsq*xsq+ a[4]*xsq*xsq*xsq*xsq*xsq);
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T22:59:20.917

*这些系数与《数学函数手册》*编辑中给出的系数相同。Abramowitz 和 Stegan (1964)，第 76 页，归功于 Carlson 和 Goldstein，Rational approximations of functions，洛斯阿拉莫斯科学实验室 (1955)。

第一个可以在[http://www.jonsson.eu/resources/hmf/pdfwrite_600dpi/hmf_600dpi_page_76.pdf](http://www.jonsson.eu/resources/hmf/pdfwrite_600dpi/hmf_600dpi_page_76.pdf)中找到。

第二个在[http://www.osti.gov/bridge/servlets/purl/4374577-0deJO9/4374577.pdf](http://www.osti.gov/bridge/servlets/purl/4374577-0deJO9/4374577.pdf)。第 37 页给出：

![在此处输入图像描述](../Images/bcfa1c67732021854a5281202b4cf249.png)

关于您的第三个问题，“我可以扩展它以获得更高的精度吗？”，[http](http://lol.zoy.org/wiki/doc/maths/remez) ://lol.zoy.org/wiki/doc/maths/remez 有一个 Remez 算法的可下载 C++ 实现；它提供（未经我检查）的 6 阶多项式的系数`sin`：

```
 error: 3.9e-14
 9.99999999999624e-1
-1.66666666660981e-1
 8.33333330841468e-3
-1.98412650240363e-4
 2.75568408741356e-6
-2.50266363478673e-8
 1.53659375573646e-10 
```

或者，当然，您需要从 float 更改为 double 才能实现任何改进。这也可以回答您关于`cos`and的第二个问题`tan`。

另外，我在评论中看到最后需要一个定点答案。大约 26 年前，我在 8031 汇编器中实现了 32 位定点版本；我会尝试挖掘它，看看它是否有任何有用的东西。

**更新**：如果您坚持使用 32 位双精度，那么我能看到的将精度提高“一两位”的唯一方法是忘记浮点并使用定点。令人惊讶的是，谷歌似乎没有发现任何东西。以下代码提供了概念验证，在标准 Linux 机器上运行：

```
#include <stdio.h>
#include <math.h>
#include <stdint.h>

// multiply two 32-bit fixed-point fractions (no rounding)
#define MUL32(a, b) ((uint64_t)(a) * (b) >> 32)

// sin32:  Fixed-point sin calculation for first octant, coefficients from
//         Handbook for Computing Elementary Functions, by Lyusternik et al, p. 89.
// input:  0 to 0xFFFFFFFF, giving fraction of octant 0 to PI/8, relative to 2**32
// output: 0 to 0.7071, relative to 2**32

static uint32_t sin32(uint32_t x) { // x in 1st octant, = radians/PI*8*2**32
   uint32_t y, x2 = MUL32(x, x);    // x2 = x * x
   y = 0x000259EB;                  // a7 = 0.000 035 877 1
   y = 0x00A32D1E  - MUL32(x2, y);  // a5 = 0.002 489 871 8
   y = 0x14ABBA77  - MUL32(x2, y);  // a3 = 0.080 745 367 2
   y = 0xC90FDA73u - MUL32(x2, y);  // a1 = 0.785 398 152 4
   return MUL32(x, y);
}

int main(void) {
   int i;
   for (i = 0; i < 45; i += 2) { // 0 to 44 degrees
      const double two32 = 1LL << 32;
      const double radians = i * M_PI / 180;
      const uint32_t octant = i / 45\. * two32; // fraction of 1st octant
      printf("%2d  %+.10f  %+.10f  %+.10f    %+.0f\n", i,  
         sin(radians) - sin32(octant) / two32,
         sin(radians) - sinf(radians),
         sin(radians) - (float)sin(radians),
         sin(radians) * two32 - sin32(octant));
   }
   return 0;
} 
```

这些系数来自于Lyusternik*等人**的《计算初等函数手册*》 ，第 1 页。89，[这里](http://www.pe.tamu.edu/blasingame/data/P620_12C/P620_12C_zReference/PDF_Txt_Comp_Elem_Fcns.pdf)：

 *![在此处输入图像描述](../Images/476cdd8a47904d4d68788bb6863680c3.png)

我选择这个特定函数的唯一原因是它比你的原始系列少一个术语。

结果是：

```
 0  +0.0000000000  +0.0000000000  +0.0000000000    +0
 2  +0.0000000007  +0.0000000003  +0.0000000012    +3
 4  +0.0000000010  +0.0000000005  +0.0000000031    +4
 6  +0.0000000012  -0.0000000029  -0.0000000011    +5
 8  +0.0000000014  +0.0000000011  -0.0000000044    +6
10  +0.0000000014  +0.0000000050  -0.0000000009    +6
12  +0.0000000011  -0.0000000057  +0.0000000057    +5
14  +0.0000000006  -0.0000000018  -0.0000000061    +3
16  -0.0000000000  +0.0000000021  -0.0000000026    -0
18  -0.0000000005  -0.0000000083  -0.0000000082    -2
20  -0.0000000009  +0.0000000095  -0.0000000107    -4
22  -0.0000000010  -0.0000000007  +0.0000000139    -4
24  -0.0000000009  -0.0000000106  +0.0000000010    -4
26  -0.0000000005  +0.0000000065  -0.0000000049    -2
28  -0.0000000001  -0.0000000032  -0.0000000110    -0
30  +0.0000000005  -0.0000000126  -0.0000000000    +2
32  +0.0000000010  +0.0000000037  -0.0000000025    +4
34  +0.0000000015  +0.0000000193  +0.0000000076    +7
36  +0.0000000013  -0.0000000141  +0.0000000083    +6
38  +0.0000000007  +0.0000000011  -0.0000000266    +3
40  -0.0000000005  +0.0000000156  -0.0000000256    -2
42  -0.0000000009  -0.0000000152  -0.0000000170    -4
44  -0.0000000005  -0.0000000011  -0.0000000282    -2 
```

因此我们看到这个定点计算比or精确***十倍***，并且对 29 位是正确的。使用舍入而不是截断只取得了边际改进。`sinf()``(float)sin()``MUL32()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T22:04:49.820

该函数正在计算`sin`使用其泰勒展开式的值：

![sin(x) 泰勒展开](../Images/a9d2c7e5a1c9cff839d1e5b4e5c48b60.png)

这些常数是各种-1/3！，1/5！依此类推（参见例如[这里](http://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions)的泰勒级数的其他函数）。

现在，如果您指定了系列的每个项，则 sin(x) 的泰勒展开对于每个*x**都是*精确的，但是 AFAIK 有更快、更精确的方法来确定软件中的三角函数。

 *此外，许多处理器提供直接在处理器中实现的此类功能（例如，在 x86 上，它们有现成的操作码），因此通常无需为这些东西烦恼。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:55:07.540

```
cos(x) = sqrt(1 - sin^2(x))
tan(x) = sin(x)/cos(x)

Sin(x) = x -x^3/3! + x^5/5! + (-1)^k*x^(2k+1)/(2k+1)! , k = 1, 2, ... 
```

这是无限函数**

# java - Java 3 颜色渐变

> ID：13771575
> 
> 赞同：8
> 
> 时间：2012-12-07T21:52:13.903
> 
> 标签：java, image, swing, gradient

我有一个`JPanel`，我想在里面画一个渐变。我有下面的代码，但只绘制了 2 色渐变。我想添加第三个，但不知道如何。我想要的是让面板的左上角为白色，右上角为红色，两个底角为黑色。我必须做些什么来实现这一点，看起来像这样：

![示例渐变](../Images/3e13f32c1ed7fcdf35e3d665466827e6.png)

```
package pocketshop.util;

import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JPanel;

public class ColorPicker extends JPanel{

    public ColorPicker(){
        repaint();
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g;
        int w = getWidth();
        int h = getHeight();

        GradientPaint gp = new GradientPaint(
                0, 0, Color.white,
                0, h, Color.black);

        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
    }
} 
```

**编辑：可能的解决方案**

我能够想出使用 2 个渐变，一个是水平的，一个是垂直的，如下所示：

```
 public void paintComponent(Graphics g){
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g;
        int w = getWidth();
        int h = getHeight();

        // Vertical
        GradientPaint gp = new GradientPaint(
                0, 0, new Color(0,0,0,0),
                0, h, Color.black);

        // Horizontal
        GradientPaint gp2 = new GradientPaint(
                0, 0, Color.white,
                w, 0, Color.red, true);

        g2d.setPaint(gp2);
        g2d.fillRect(0, 0, w, h);
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T01:47:58.620

像这样的东西？

![三向颜色渐变](../Images/397e4ec871a076eb8986de7262ac6862.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;
import javax.swing.*;

public class ThreeWayGradient {

    public static void main(String[] args) {
        final BufferedImage image = new BufferedImage(
                200, 200, BufferedImage.TYPE_INT_RGB);
        Runnable r = new Runnable() {
            @Override
            public void run() {
                Graphics2D g = image.createGraphics();
                GradientPaint primary = new GradientPaint(
                        0f, 0f, Color.WHITE, 200f, 0f, Color.ORANGE);
                GradientPaint shade = new GradientPaint(
                        0f, 0f, new Color(0, 0, 0, 0),
                        0f, 200f, new Color(0, 0, 0, 255));
                g.setPaint(primary);
                g.fillRect(0, 0, 200, 200);
                g.setPaint(shade);
                g.fillRect(0, 0, 200, 200);

                JLabel l = new JLabel(new ImageIcon(image));
                JOptionPane.showMessageDialog(null, l);
                File f = new File(System.getProperty("user.home"),
                        "ThreeWayGradient.png");
                try {
                    ImageIO.write(image, "png", f);
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

## 使其成为工厂方法

..因为它更漂亮。

![ThreeWayGradient 作为工厂方法](../Images/35cb9bb6f63ee963244cd1af2e35d216.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class ThreeWayGradient {

    public static BufferedImage getThreeWayGradient(
            int size,
            Color primaryLeft,
            Color primaryRight,
            Color shadeColor) {
        BufferedImage image = new BufferedImage(
                size, size, BufferedImage.TYPE_INT_RGB);

        Graphics2D g = image.createGraphics();
        GradientPaint primary = new GradientPaint(
                0f, 0f, primaryLeft, size, 0f, primaryRight);
        int rC = shadeColor.getRed();
        int gC = shadeColor.getGreen();
        int bC = shadeColor.getBlue();
        GradientPaint shade = new GradientPaint(
                0f, 0f, new Color(rC, gC, bC, 0),
                0f, size, shadeColor);
        g.setPaint(primary);
        g.fillRect(0, 0, size, size);
        g.setPaint(shade);
        g.fillRect(0, 0, size, size);

        g.dispose();
        return image;
    }

    /**
     * Presumed to have a layout that shows multiple components.
     */
    public static void addGradient(
            JPanel p, int s, Color pL, Color pR, Color sh) {

        JLabel l = new JLabel(new ImageIcon(getThreeWayGradient(s, pL, pR, sh)));
        p.add(l);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(2,4,1,1));
                addGradient(gui,100,Color.YELLOW,Color.RED,Color.GREEN);
                addGradient(gui,100,Color.GREEN,Color.YELLOW,Color.RED);
                addGradient(gui,100,Color.RED,Color.GREEN,Color.YELLOW);
                addGradient(gui,100,Color.BLUE,Color.MAGENTA,Color.PINK);
                addGradient(gui,100,Color.WHITE,Color.RED,Color.BLACK);
                addGradient(gui,100,Color.RED,Color.GREEN,Color.BLACK);
                addGradient(gui,100,Color.BLUE,Color.PINK,Color.BLACK);
                addGradient(gui,100,Color.BLUE,Color.CYAN,Color.BLACK);
                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T22:11:11.460

看一下[`LinearGradientPaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/LinearGradientPaint.html)，它允许您指定*n*种颜色及其权重。

### 更新 1

随着需求的“小”变化，如果任何一个`LinearGradientPaint`过度`GradientPant`都会对性能产生任何重大影响，这是值得商榷的。

我强烈建议您查看[Harmonic Code](http://harmoniccode.blogspot.com.au/search/label/swing)。这家伙做了一些非常有趣的帖子，还有一些关于渐变的帖子。;)

### 更新 2

知道我在[双线性颜色插值](http://harmoniccode.blogspot.com.au/2011/04/bilinear-color-interpolation.html)之前看到过类似的东西。

# java - 我在 Netbeans 中有一个使用 JOptionPane.showOptionDialog 的游戏，但我不知道如何执行 if 语句

> ID：13771582
> 
> 赞同：1
> 
> 时间：2012-12-07T21:53:08.923
> 
> 标签：java, if-statement, joptionpane

下面是我的代码 Stud is player 但 if (Stud.equals("North")) 说它无法比较是否有另一种方法来比较它们？

```
String[] options = new String[] {"North", "South", "East", "West"}; 

JOptionPane.showOptionDialog(null, p + " " + Stud.distance(Comp) + " away" +  
    " Which way do you want to move?", "" + p + " is at " + Stud.getX() + ", " + Stud.getY() ,  
    JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE,
    null, options, options[0]);

if (options.equals("North")){ 
    Stud.moveNorth();   
}
else if (options.equals("South")){
    Stud.moveSouth();
}
else if (options.equals("West")){
    Stud.moveWest();
}
else if (options.equals("East")){
    Stud.moveSouth();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:04:33.800

你需要`int compareTo(String anotherString)`

JOptionPane 还返回您需要存储的值。

像这样

```
int optionChosen = JOptionPane.showOptionDialog(null, p + " " + Stud.distance(Comp) + " away" +  
    " Which way do you want to move?", "" + p + " is at " + Stud.getX() + ", " + Stud.getY() ,  
    JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE,
    null, options, options[0]);

if (options[optionChosen].compareTo("North") == 0){ 
    Stud.moveNorth();   
} 
```

或者，您可以使这更简单，并使用`int`JOptionPane 返回的值来选择方向。

像这样：

```
if (optionChosen == 0){ 
    Stud.moveNorth();   
}
else if(optionChosen == 1){
    Stud.moveSouth();
}
...and so on. 
```

# indexeddb - 在 indexeddb 中存储 maps.LatLng

> ID：13771583
> 
> 赞同：1
> 
> 时间：2012-12-07T21:53:15.667
> 
> 标签：indexeddb

也许是一个愚蠢的问题，但是当我将 maps.LatLng 对象放入 indexeddb 对象库时，我随后从地图库中获取了该对象。然后LatLng对象变成了一个普通的Object。

控制台向我展示了这个

lat: R (非检索 LatLng) $a: 52.470233 ab: 6.028643999999986 **proto** : R

值：对象（检索到的 LanLng）$a：52.524495 ab：6.059285999999929 id：1 **proto**：对象

有人可以告诉我要做什么还是保存纬度和经度的最佳做法，并在获取数据后将其转换为客户端 LatLng 对象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:26:08.007

IndexedDB 存储数据的[结构化克隆](http://www.w3.org/TR/html5/common-dom-interfaces.html#safe-passing-of-structured-data)。

我不知道你的 LatLng 对象。方法是您只存储数据，以便您可以恢复它。例如，假设您要存储`latLng`对象，

```
record = {id: latLng.id, lat: latLng.lat, lng: latLng.lng}
db.put('LatLng', record)

db.get('LatLng', id).done(function(obj) {
  var lat_from_store = new LatLng(obj.id, obj.lat, obj.lng);
}); 
```

# c++ - 这个递归代码有什么问题？

> ID：13771587
> 
> 赞同：1
> 
> 时间：2012-12-07T21:53:25.947
> 
> 标签：c++, recursion, stack-overflow

我正在使用 CodeLab for C++ 进行在线工作，但不确定我的代码有什么问题。这是问题：

编写一个递归的 int 值函数 len，它接受一个字符串并返回字符串中的字符数。字符串的长度为：如果字符串是空字符串 ("")，则为 0。1 比第一个字符以外的其余字符串的长度多。

这是我的代码：

```
int len(string s)
{
  if (s.length()==0)
    return 0;
 else
 {
    return 1+(len(s)-1);
 }
} 
```

它说我有一个运行时错误。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T21:55:25.887

那么这里：

```
 return 1+(len(s)-1); 
```

字符串的长度永远不会减少。所以你最终会有一个stackoverflow，因为你从来没有达到你的基本情况`(s.length() == 0).`你需要得到一个s的长度减少1的子字符串：

```
 return 1+(len(s.erase(0,1))); // erases 1 char from beginning then recurses 
```

希望这纯粹是学术性的，因为`std::string`有一种`length`可以在恒定时间内运行的方法。（更不用说从字符串前面擦除可能非常低效 - 请参阅其他适用的答案`char *`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T21:59:13.830

len(s) 永远不会减少并导致堆栈溢出。我会做类似的事情：

```
int len(const char * s) {
    if(*s == '\0')
        return 0;
    else
        return 1 + len(s+1); 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T22:04:12.517

你永远不会修改`s`你的代码，所以如果`s`不是空的，你会继续调用相同的函数，并再次使用相同的参数；你永远不会停止。您的计算机堆栈空间不足，程序崩溃。

其他人给了你一些想法/选择。这是我的建议：

```
int len(const std::string &s, int start)
{
    /* If we are starting at the end, there's no more length */
    if(start == s.length())
        return 0;

    /* one plus whatever else... */
    return 1 + len(s, start + 1);
} 
```

假设`str`是您想要获取长度的字符串，您可以将其称为：`len(str, 0)`

如果您需要使用某个`const char *`版本，请尝试以下操作：

```
int len(const char *s)
{
    if((s == NULL) || (*s == 0))
        return 0; /* we ran out of string! */

    return 1 + len(s + 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:18:17.950

另一种解决方案：

```
int len(string s)
  {
  if (s.length()==0)
      return 0;
  else
     {
     s = s.substr(0, s.size()-1);
     return 1+(len(s));
     }
  } 
```

# wpf - 获取 System.Windows.Data 时出现数据绑定问题错误：49（XmlDataProvider 中的 XmlNamespace）

> ID：13771589
> 
> 赞同：0
> 
> 时间：2012-12-07T21:53:34.083
> 
> 标签：wpf, data-binding, xmldataprovider

我使用 XMLDataProvider 在 ListBoxes 中显示一些简单的数据。我用“”（空字符串）的值定义了 xmlns 属性。

例如：

```
<XmlDataProvider x:Key="KlischeeTexte" XPath="Items">
    <x:XData>
        <Items xmlns="">
            <Item Wert="0" Beschreibung="&lt;selection&gt;" />
            <Item Wert="1" Beschreibung="Text 1" />
            <Item Wert="2" Beschreibung="Text 2"/>
            <Item Wert="3" Beschreibung="Text 3" />
        </Items>
    </x:XData>
</XmlDataProvider> 
```

我仍然收到错误“System.Windows.Data 错误：49：XmlDataProvider 具有未明确设置其 XmlNamespace (xmlns="") 的内联 XML。” 在输出窗口中，但可以运行我的应用程序，我可以在列表框中看到数据。

但是我的应用程序中还有另一个问题。在此错误之后（似乎）发生的某些绑定不起作用。当我关闭视图（我使用棱镜）并再次加载视图时，我能够让那些受影响的绑定工作。现在我仍然得到错误 49，但我的绑定工作。

有什么我做错了吗？或者有没有 XmlDataProvider 的替代品？我只需要一种方法来以简单的方式定义一些简单的数据用于显示和选择目的！

# sql-server - 将日期时间转换为字符串并在 SQL Server 中显示为“yyyy_MM”

> ID：13771590
> 
> 赞同：2
> 
> 时间：2012-12-07T21:53:42.123
> 
> 标签：sql-server, tsql

大家好，我正在使用

```
CONVERT(VARCHAR, i.createdDate, 120) 
```

转换为`varchar`.

我应该怎么做才能`yyyy_MM`像这样显示日期？：

```
'2012-12-16 14:50:00' to '2012_12' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T21:55:43.843

这应该有效：

```
SELECT REPLACE(CONVERT(VARCHAR(7), GETDATE(), 120), '-', '_') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:56:50.757

这是 SQL Server 2012 吗？您可以使用 FORMAT 函数。

[http://technet.microsoft.com/en-us/library/hh213505%28SQL.110%29.aspx](http://technet.microsoft.com/en-us/library/hh213505%28SQL.110%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:30:39.500

这是另一种选择

```
SELECT
    CONVERT(VARCHAR(4), YEAR(GETDATE())) + '_' + CONVERT(VARCHAR(2), DATEPART(m, GETDATE())) 
```

# mysql - 使用 2 个表格计算并报告给第 3 个

> ID：13771601
> 
> 赞同：0
> 
> 时间：2012-12-07T21:54:32.110
> 
> 标签：mysql

所以我有 3 个表，我需要从前 2 个表中计算一个值，然后用该值更新第三个表中的一个字段，我遇到了一个错误。

```
UPDATE Characters AS c
SET c.Total_DKP = (
(SELECT c.Initial_DKP
FROM c
WHERE c.Name='harrian')-
(SELECT SUM(a.DKP_Change)
FROM Attendance AS a 
WHERE a.Name = 'harrian')
              )
WHERE c.Name = 'harrian' ; 
```

它给出了错误

```
Table 'harrian.c' doesn't exist 
```

但是当我跑步时

```
UPDATE Characters AS c
SET c.Total_DKP = ( SELECT SUM(a.DKP_Change) 
                    FROM Attendance AS a 
                    WHERE a.Name = 'harrian'
                  )
WHERE c.Name = 'harrian' 
```

我没有问题，谁能告诉我第一个块有什么问题？

这是完整的查询-

```
UPDATE Characters AS c
SET c.Total_DKP = (
(SELECT c.Inital_DKP FROM Characters AS c WHERE c.Name = 'harrian')
+(SELECT SUM(a.DKP_Change) FROM Attendance AS a WHERE a.Name = 'harrian')
+(SELECT SUM(b.Cost) FROM Raid_Drops AS b WHERE b.Player_Name = 'harrian')
)
WHERE c.Name = 'harrian' ; 
```

我现在收到此错误

```
You can't specify target table 'c' for update in FROM clause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:58:23.133

您的第一个子查询是：

```
SELECT c.Initial_DKP FROM c WHERE c.Name='harrian' 
```

而不是`FROM c`我认为你的意思是`FROM Characters`：

```
SELECT Initial_DKP FROM Characters WHERE Name='harrian' 
```

但如果是这样的话，整个 UPDATE 最好写成

```
UPDATE Characters AS c
SET c.Total_DKP = c.Initial_DKP - (
  SELECT SUM(a.DKP_Change)
  FROM Attendance AS a 
  WHERE a.Name = 'harrian'
)
WHERE c.Name = 'harrian'; 
```

因为更新语句不能使用它在子查询中更新的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:57:24.583

`Name = 'harrian'`如果表中的行不能超过一行`Characters`（例如 if `Name`is `UNIQUE`），您可以使用：

```
UPDATE Characters AS c
SET c.Total_DKP = (
  c.Inital_DKP
  + (SELECT SUM(a.DKP_Change) FROM Attendance AS a WHERE a.Name = 'harrian')
  + (SELECT SUM(b.Cost) FROM Raid_Drops AS b WHERE b.Player_Name = 'harrian')
  )
WHERE c.Name = 'harrian' ; 
```

不需要上面的一些括号。此外，为了避免空表产生的行`Attendance`或`Raid_Drops`没有行`Name = 'harrian'`的情况，您需要将 Null 转换为零：`NULL``SUM()`

```
UPDATE Characters AS c
SET c.Total_DKP = 
  c.Inital_DKP
  + COALESCE( (SELECT SUM(a.DKP_Change) FROM Attendance AS a 
               WHERE a.Name = 'harrian')
            ), 0)
  + COALESCE( (SELECT SUM(b.Cost) FROM Raid_Drops AS b 
               WHERE b.Player_Name = 'harrian')
            ), 0)
WHERE c.Name = 'harrian' ; 
```

# python - Django项目文件结构

> ID：13771618
> 
> 赞同：3
> 
> 时间：2012-12-07T21:55:26.013
> 
> 标签：python, django

我是 Django 新手，需要了解文件结构。下面是我的 Django 项目的一个示例（缺少一些文件）

我的困惑与真实服务器上的生产以及我的文件结构之间的关系有关。

我有以下关于这个问题的问题，我认为如果回答这些问题将有助于我理解。

1.  网络根在哪里？
2.  如何阻止用户下载 settings.py？
3.  这个结构好吗？

    ```
    project
      manage.py 
      templates [folder]
      myapp1 [folder]
       models.py
       views.py
      projectname [folder]
       urls.py
       settings.py 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:59:00.793

没有网络根。Django 项目文件可以放置在任何地方，以便 Web 服务器在给定的 URL 上运行和提供服务。URL 与文件结构不对应。

Django*永远不*应该暴露在公众面前。您可以通过不向公众公开来阻止用户下载它。只能从网络访问静态媒体。

是的，你的结构没问题。这是推荐的新标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:57:59.483

使用 mod_wsgi 您不需要声明 a `Document Root`，您只需提供 wsgi 文件的路径

[来自文档](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)的示例 apache mod_wsgi 配置：

```
WSGIScriptAlias / /path/to/mysite.com/mysite/wsgi.py
WSGIPythonPath /path/to/mysite.com

<Directory /path/to/mysite.com/mysite>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

用户无法访问 settings.py apache 不提供它。确保`debug=False`它可以公开您的设置

您的结构是 1.4+ 的默认 django 结构

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:08:19.647

只是为了添加另一个视角，包含在 中的[URLconf](https://docs.djangoproject.com/en/1.4/topics/http/urls/)`urls.py`定义了您的 Web 根目录的虚拟文件系统（如果您愿意的话）。由您的 URLconf 方案将整个 URL 类路由到您的视图，从而生成动态页面。所以从某种意义上说，通过少量的 URL 条目、视图和模板，您可以让它看起来好像您有一个包含无数“文件”的 Web 根目录，这些都不是您的实际 Python 源代码。

# objective-c - iOS6 和 ACAccount：Twitter 类型消失？

> ID：13771621
> 
> 赞同：0
> 
> 时间：2012-12-07T21:55:33.347
> 
> 标签：objective-c, ios, garbage-collection, grand-central-dispatch

我尝试使用以下代码通过 Twitter 验证我的应用程序：[pastebin](http://pastebin.com/5Kc2v2Wd)

但是，如果我删除（无用的？）循环线 23ff

```
for (ACAccount *acc in arrayOfAccounts) {
    [acc accountType].identifier;
    //Otherwise the identifier get lost - god knows why -__-
} 
```

acc.type 在 `AccountHandler checkAccountOf:acc`. 如果我保留循环，则类型设置正确。我很确定这与我在一个街区然后进入主队列的事实有关，但我想知道我是否做错了什么？这个循环看起来不像我应该做的事情。

[这里](https://stackoverflow.com/questions/13349187/strange-behaviour-when-trying-to-use-twitter-acaccount)发生了类似的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T00:07:32.787

`ACAccount`s 不是线程安全的。您应该只在它们产生的线程上使用它们。为此，您可以将“线程”读作“队列”。

虽然我还没有看到正式的文档，但如果你`NSLog`是一个帐户，你会发现它是一个 Core Data 对象，并且 Core Data 对象缺乏线程安全性是有据可查的。

具体行为是 Core Data 对象可能是错误的。这意味着您持有的是对对象的引用，而不是实际对象。当您尝试访问属性时，该对象将被加载到内存中。

Core Data 在底层所做的是将事物缓存在内存中并返回错误，直到它知道确实需要一个对象。该缓存的有效协调是限制将对象协调到单个线程的核心数据对象的各个实例。

如果您在错误的线程上执行了应该将对象带入内存的操作（这是您`identifier`在此处访问时发生的情况），那么该行为是未定义的。你可能会得到一个`nil`结果，或者你可能会崩溃你的应用程序。

（除此之外：Core Data 像这样工作的原因是它存储了一个对象图，因此可能有 1000 个相互关联的对象，并且您可以像任何其他对象组一样遍历它。但是您通常不想支付成本与将它们中的每一个加载到内存中只是为了访问您将要使用的任何通常很小的信息子集相关联，因此它需要一种在延迟加载时提供普通 Objective-C 接口的方法）

通过确保对象在缓存中，因此在队列跳跃之前，您链接到的代码绕过了该问题。因此，“从商店获取”步骤发生在正确的队列上。然而，代码仍然**是完全不安全**的，因为根据 Core Data 关心应用的任何逻辑，对象可能会从内存中转换回故障。

作者显然认为他们在 Apple 方面发现了一些错误。他们没有，他们只是决定假设某些东西不是线程安全的，然后找到了一种依赖于在他们的测试中发生的未定义行为的方法。

故事的寓意：将帐户本身保持在一个线程上。如果您想对帐户的属性进行一些处理，则将相关属性本身收集为基础 Foundation 对象并将其发布。

# asp.net - 使复选框看起来像按钮

> ID：13771627
> 
> 赞同：3
> 
> 时间：2012-12-07T21:55:51.300
> 
> 标签：asp.net, css

在我的网络应用程序 (c#/MVC3) 中，我的表格中有大量复选框。而不是一个复选框表，我希望它看起来像一堵切换按钮的墙。对于用户来说，我希望它看起来像一堵按钮墙，当他们点击一个按钮时，它会被“选中”并且按钮会改变颜色。

我不确定是否有 CSS 可以使复选框执行此操作（看起来像一个按钮并在检查时更改颜色而不是显示复选标记），或者我是否必须使用按钮和 javascript/jquery 的某种组合和隐藏的复选框或什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:57:52.830

jQuery UI Button 小部件可以处理：

[http://jqueryui.com/button/#checkbox](http://jqueryui.com/button/#checkbox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:31:38.537

是的，使用纯 CSS 绝对可以做你想做的事。

我认为您应该查看[此](https://stackoverflow.com/questions/7642277/css-styled-a-checkbox-to-look-like-a-button-is-there-a-hover)问题中提到的 jsFiddle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:58:17.067

单选按钮由操作系统生成，无法轻松设置样式。

如果你想要一些不同的东西，你需要使用 CSS/images 和 JavaScript 来生成它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T00:01:10.130

首先，出于可用性考虑，我实际上会避免这样做，但如果您仍然想继续阅读。

这实际上很难实现，但这是可能的。我的解决方案避免了为您的复选框分配单个 ID 的需要。

本质上，您将需要一个用于“on”和“off”状态的图像精灵，您将使用切换类使用 CSS background-position 属性定位它们。然后，下面的 jQuery 将允许您不仅交换图像状态，还可以确认相应的复选框为选中或未选中以使用表单。请注意，“实际”复选框从视图中隐藏，但功能仍然存在。

```
<form>
    <input type="checkbox" class="custom" />
</form>

<style type="text/css">
.checkbox {
    clear:left;
    float:left;
    background:url('your_image');
    background-position:top;
    width:20px;
    height:20px;
    display:block;
}
.toggled {
    background-position:bottom !important;
}
</style>

$(document).ready(function () {
    var checkboxes = $('form .custom'),
        custom = $('<span></span>').addClass('checkbox');
    checkboxes.before(custom);
    checkboxes.css('visibility', 'hidden');
    $('.checkbox').click(function () {
        $(this).toggleClass('toggled');
        var isChecked = $(this).next(':checkbox');
        var value = isChecked.prop('checked') ? 'true' : 'false';
        if (value == 'false') {
            isChecked.prop('checked', true);
        } else {
            isChecked.prop('checked', false);
        }
    });
}); 
```

当然，您必须编辑 CSS 以满足您的确切需求。我希望这会有所帮助，因为这项任务看似不平凡。

# c# - 如何使用 Web 服务在没有赛车条件的情况下写入数据库？

> ID：13771630
> 
> 赞同：3
> 
> 时间：2012-12-07T21:56:07.747
> 
> 标签：c#, mysql, web-services, web

我在 C# 中编写了一个简单的 Web 服务（asmx）

客户端使用 post 和 title 参数访问 web 服务，并期望服务返回一个对象，其中包含有关该标题键的更多详细信息。

我面临的问题是，在我的网络服务执行开始时，我检查提供给我的标题是否存在于我的数据库中。如果不是，我构建正确的对象，我将它保存到我的数据库中以备将来搜索以避免重建它（因为我使用第三方 Web 服务进行构建），然后我以 json 格式发回客户询问的对象为了。

然而，这会导致竞争情况，因为 2 个客户端可能会请求相同的标题，并最终将同一对象插入数据库两次，因为其中一个客户端速度不够快，无法在另一个客户端请求之前写入该对象。

我使用 Mysql 数据库，我想弄清楚如何避免这种赛车情况？

密钥是存储过程吗？

我该如何解决这个问题？

注意：我的数据库中的关键是标题列和年份列。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:00:40.593

您可以在列上添加 SQL Server UNIQUE 约束以强制唯一性。如果出现竞争条件，您可以通过捕获它并简单地再次查询标题来处理服务代码中的错误（来自约束）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:01:58.013

在数据库中的标题上放置一个唯一键（或者标题的哈希可能更快）。即使第一次尝试选择该行时该行不存在，第二次调用也会得到一个 DUPLICATE KEY 异常。

# php - 将错误数组传递给经常调用的函数

> ID：13771633
> 
> 赞同：0
> 
> 时间：2012-12-07T21:56:24.337
> 
> 标签：php, arrays

我有一个关于将数组传递给函数的正确方法的问题

验证表单后，我得到一个与每个表单字段对应的错误数组。IE

```
$errors = array(
    "First_Name" => "Missing first name",
    "Email" => "Invalid email address",
    ...
) 
```

为了显示这个错误，我创建了一个函数

```
function print_error_message($field, $errors) {
    if($errors[$field])
        echo '<span class="error-msg">' . $errors[$field] . '</span>';
} 
```

我在每个 html 字段之后调用这个函数来检查这个字段是否有错误：

```
<input name="First_Name" value="<?php echo $First_Name ?>" />
<?php print_error_message("First_Name", $errors) ?>
... 
```

因此，由于我有很多表单字段和很多错误，每次调用函数时传递“$errors”数组是否是一个好习惯。或者我应该使用`global`或通过引用传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:58:52.083

可以按照您的方式进行操作。当然不要使用全局变量，也不需要通过引用传递。

而不是`if($errors[$field])`，您可以使用`if (array_key_exists($field, $errors))`.

# sql - 使用 SQL Server 2008 R2 删除重复的 id 和 Value ROW

> ID：13771644
> 
> 赞同：1
> 
> 时间：2012-12-07T21:57:15.810
> 
> 标签：sql, sql-server-2008-r2, duplicate-removal

在 SQL Server 2008 R2 中，我在表中添加了两个重复的 ID 和记录。当我尝试删除最后两条记录之一时，我收到以下错误。

> *更新或删除的行值要么不使行唯一，要么改变多行。*

数据是：

```
7   ABC         6
7   ABC         6
7   ABC         6
8   XYZ         1
8   XYZ         1
8   XYZ         4
7   ABC         6
7   ABC         6 
```

我需要删除最后两条记录：

```
7   ABC         6
7   ABC         6 
```

我一直在尝试使用“编辑前 200 行”功能删除最后 2 条记录以删除此重复 ID，但出现上述错误。

任何帮助表示赞赏。提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:05:44.260

由于您不知道表中还有其他列，因此假设您的数据在 3 列 A、B、C 中，您可以使用以下方法删除 2 行：

```
;with t as (
    select top(2) *
      from tbl
     where A = 7 and B = 'ABC' and C = 6
)
DELETE t; 
```

这将根据条件任意匹配两行，并删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:21:35.917

这是我用来删除可能有很多副本的表中的副本的代码大纲。

```
/* I always put the rollback and commit up here in comments until I am sure I have 
   done what I wanted. */
BEGIN tran Jim1 -- rollback tran Jim1 -- Commit tran Jim1; DROP table PnLTest.dbo.What_Jim_Deleted

/* This creates a table to put the deleted rows in just in case I'm really screwed up */
SELECT top 1 *, NULL dupflag 
  INTO jt1.dbo.What_Jim_Deleted --DROP TABLE jt1.dbo.What_Jim_Deleted
  FROM jt1.dbo.tab1;
/* This removes the row without removing the table */
TRUNCATE TABLE jt1.dbo.What_Jim_Deleted;

/* the cte assigns a row number to each unique security for each day, dups will have a
   rownumber > 1\.  The fields in the partition by are from the composite key for the 
   table (if one exists.  These are the queries that I ran to show them as dups

SELECT compkey1, compkey2, compkey3, compkey4, COUNT(*) 
  FROM jt1.dbo.tab1
  GROUP BY compkey1, compkey2, compkey3, compkey4
  HAVING COUNT(*) > 1
  ORDER BY 1 DESC

*/
with getthedups as
  (SELECT *,
       ROW_NUMBER() OVER 
         (partition by compkey1,compkey2, compkey3, compkey4 
                          ORDER BY Timestamp desc) dupflag /*This can be anything that gives some order to the rows (even if order doesn't matter) */
     FROM jt1.dbo.tab1)
/* This delete is deleting from the cte which cascades to the underlying table 
   The Where is part of the Delete (even though it comes after the OUTPUT.  The
   OUTPUT takes all of the DELETED row and inserts them into the "oh shit" table,
   just in case.*/
DELETE 
  FROM getthedups 
  OUTPUT DELETED.* INTO jti.dbo.What_Jim_Deleted
  WHERE dupflag > 1

--Check the resulting tables here to ensure that you did what you think you did

/* If all has gone well then commit the tran and drop the "oh shit" table, or let it 
   hang around for a while. */ 
```

# sql - 在单个列中组合相似的值

> ID：13771653
> 
> 赞同：1
> 
> 时间：2012-12-07T21:58:09.297
> 
> 标签：sql

我有一列用于在我整理的表格中列出竞争对手的姓名。现在对这些输入的产生方式没有太多控制，这会引起一些严重的头痛。我们的数据中存在随机空格和拼写错误，但我们需要按竞争对手列出数据。

作为示例（不是我使用的实际 SQL），竞争对手列表：

```
Price Cutter
PriceCutter
PriceCuter
Price Cuter 
```

如果我运行查询：

```
SELECT Competitor_Name, SUM(Their_Sales),
FROM Cmdata.Competitors
Where Their_Sales
Between 10000 AND 100000000
Group by Competitor_Name 
```

我会为每个版本的 Price Cutter 获得不同的条目，这显然是我想要避免的。

我认为这个问题会出现很多，但我做了一个谷歌搜索并提出了干货。我承认，这个问题很难用几句话来表达，也许这就是我没有带任何东西的原因。无论是那个还是这个都是如此基本我应该已经知道......

（PS- 是的，我们正在转向下拉菜单，但这需要一些时间。同时，有解决方案吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:01:04.310

您需要添加一个`Competitor`表，该表具有每个竞争对手的标准名称。

然后，在其他表中使用外键引用。

您面临的问题是数据清理和数据建模问题。这不是特别难解决，但确实需要相当多的工作。您可以从获取所有当前拼写的列表开始并对其进行标准化——可能在 Excel 电子表格中。

如果这样做，您可以创建一个查找表并通过查找来更改值。

但是，从中期来看，您应该以`Competitor`应用程序需要的方式创建表并为数据建模。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:01:21.857

总的来说，这是一个非常困难的问题。如果您的数据库支持它，您可以尝试分组`SOUNDEX(Competitor_Name)`而不是`Competitor_Name`.

实际上，无论如何，该`Competitor_Name`列都应该是`Competitors`表中的外键，而不是纯文本字段。

无论你做什么来修复，你也应该更新表，这样你以后就不必做这种跳楼了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:03:37.670

（我对语法有点模糊，但这很接近）

```
alter table Competitors add column cleanedName (varchar(100));

update Competitors set cleanedName = Replace(Upper(Competitor_Name), ' ', '') 
```

然后按 cleanName 而不是 Competitor_Name 分组

# mysql - 请帮助我在这个 MySQL 代码中找到我的错误

> ID：13771663
> 
> 赞同：1
> 
> 时间：2012-12-07T21:59:20.700
> 
> 标签：mysql, mysql-workbench

我不确定我在这里做错了什么，但我收到一个错误：

```
 Error Code: 1005\. Can't create table 'erm.section' (emo:150) 
```

这是代码。“课程”表已成功创建。我尝试在“section”表中修改 course_number attritube 的名称，但这没有用。

```
 USE erm;

    CREATE TABLE course
    (
        course_name         VARCHAR(30)     NOT NULL,
        course_number       VARCHAR(20)     NOT NULL,
        credit_hours        INT             NOT NULL,
        department          VARCHAR(10),
        CONSTRAINT course_pk PRIMARY KEY (course_name)
    );

    CREATE TABLE section
    (
        section_identifier      INT                 NOT NULL,
        course_number           VARCHAR(20),
        semester                VARCHAR(10)         NOT NULL,
        school_year             VARCHAR(4)          NOT NULL,
        instructor              VARCHAR(25),
        CONSTRAINT section_pk PRIMARY KEY (section_identifier),
        CONSTRAINT section_fk FOREIGN KEY (course_number)
            REFERENCES course (course_number)
            ON DELETE       SET NULL 
            ON UPDATE       CASCADE
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:00:51.423

course_number 不是 course 表中的主键。

表部分中的外键必须引用另一个表的主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:09:40.523

您必须在外键引用的列上创建索引：

```
alter table course add index (course_number); 
```

（它不必是主键索引。）来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

> InnoDB 允许外键引用任何索引列或列组。但是，在引用的表中，必须有一个索引，其中引用的列按相同顺序列为第一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:19:40.873

```
 A FOREIGN KEY in one table points to a PRIMARY KEY in another table. 
```

AFAIK，删除`CONSTRAINT`，然后重命名，然后添加`CONSTRAINT`后面是唯一的方法。先备份！

放弃它使用这个

```
 ALTER TABLE section
   DROP FOREIGN KEY course_number 
```

并再次添加它使用这个

```
 ALTER TABLE section
 ADD FOREIGN KEY (course_number)
 REFERENCES course (course_number) 
```

# ios - iOS 应用程序中的 AlertView 可以超时吗？

> ID：13771668
> 
> 赞同：1
> 
> 时间：2012-12-07T21:59:42.963
> 
> 标签：ios, uialertview, nstimer

我想知道如果 AlertView 已经在屏幕上可见一段时间而没有收到用户的任何确认，它是否有可能超时，如果是这样，怎么办？有没有办法让 AlertView 对象与 NSTimer 对象链接？

我的基本 AlertView 代码如下：

```
- (IBAction)showMessage:(id)sender {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!"
                                                      message:@"This is your first UIAlertview message."
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:41:26.320

这就是我在我的一个应用程序中实现的方式

在 @interface 中声明您的对象，以便您可以跟踪它们并在需要时添加

```
@property (nonatomic, strong) UIAlertView *myAlert;
@property (nonatomic, weak) NSTimer *myTimer; 
```

在您需要启动警报的代码中添加以下内容

```
self.myAlert = [[UIAlertView alloc]initWithTitle:@"TEST" message:@"TEST" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
self.myTimer = [NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(cancelAlert) userInfo:nil repeats:NO];
[self.myAlert show]; 
```

在您的代码中的某处添加下一个函数以解除警报并使 NSTimer 无效

```
- (void)cancelAlert {
[self.myAlert dismissWithClickedButtonIndex:-1 animated:YES];
} 
```

如果触摸按钮，请记住使计时器无效。

```
- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex {
[self.myTimer invalidate];
// Process pressed button
} 
```

它可能需要根据您的要求进行一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:03:13.007

是的。采用[`dismissWithClickedButtonIndex:animated:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instm/UIAlertView/dismissWithClickedButtonIndex%3aanimated%3a)

例如，使用 dispatch_after 块，如下所示：

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [message dismissWithClickedButtonIndex:message.cancelButtonIndex animated:YES];
}); 
```

* * *

如果您想使用 NSTimer，只需将其保存`UIAlertView`在实例变量中，以便您可以从 timer 方法中访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T16:35:05.470

您可以为它创建一个类别`UIAlertView`并添加一个监听器，如果它被触发，则会自行删除：

```
@implementation UIAlertView (Cancellable)

+ (instancetype)cancellableAlertViewWithTitle:(NSString *)title
                                      message:(NSString *)message
                                     delegate:(id)delegate
                            cancelButtonTitle:(NSString *)cancelButtonTitle
                            otherButtonTitles:(NSString *)otherButtonTitles, ...
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title
                                                        message:message
                                                       delegate:delegate
                                              cancelButtonTitle:cancelButtonTitle
                                              otherButtonTitles:nil];
    if (otherButtonTitles != nil)
    {
        va_list args;
        va_start(args, otherButtonTitles);
        for (NSString *buttonTitle = otherButtonTitles; buttonTitle != nil; buttonTitle = va_arg(args, NSString*))
        {
            [alertView addButtonWithTitle:buttonTitle];
        }
        va_end(args);
    }

    [[NSNotificationCenter defaultCenter] addObserver:alertView selector:@selector(removeAlertView:) name:@"AlertsShouldBeCancelledNotification" object:nil];

    return alertView;
}

- (void)removeAlertView:(NSNotification *)notification
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [self dismissWithClickedButtonIndex:-1 animated:YES];
}

@end 
```

然后你可以`NSTimer`在你的主类中创建一个并让它在调用选择器时触发通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:09:16.963

`dismissWithClickedButtonIndex:animated:`如果用户及时单击，请使用 NSTimer 调用并使其无效。如果用户已经解除了消息，则使用 dispatch_after 可能会将消息发送到已发布的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T20:00:03.127

看看这个答案：[dismissing a UIAlertView programmatically](https://stackoverflow.com/questions/12416825/dismissing-a-uialertview-programmatically)。在我看来，使用`performSelector:withObject:afterDelay:`比构建和拆除计时器要优雅得多。

# text - 网格中的 Pandoc Markdown 垂直线

> ID：13771673
> 
> 赞同：4
> 
> 时间：2012-12-07T22:00:05.430
> 
> 标签：text, markdown, pandoc

我使用 Pandoc (http://johnmacfarlane.net/pandoc/README.html) 及其 Markdown 处理器。当我使用 Pandoc 将下面的网格转换为 PDF（直接通过 LaTeX）时，PDF 中没有垂直线。如何获得它们？

```
+---------------+---------------+--------------------+
| Fruit         | Price         | Advantages         |
+===============+===============+====================+
| Bananas       | $1.34         | - built-in wrapper |
|               |               | - bright color     |
+---------------+---------------+--------------------+
| Oranges       | $2.10         | - cures scurvy     |
|               |               | - tasty            |
+---------------+---------------+--------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-03T07:37:22.180

根据这个bug [https://github.com/jgm/pandoc/issues/922#issuecomment-38586467 ，除了后处理pandoc的latex输出之外，目前没有办法添加垂直线](https://github.com/jgm/pandoc/issues/922#issuecomment-38586467)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T01:19:41.637

我不知道有什么方法可以直接做到这一点。我知道的唯一解决方案是使用 pandoc 转换为 LaTeX，然后在 LaTeX 中编辑表格格式。

# python - 如何为未排序列表编写 pop(item) 方法

> ID：13771674
> 
> 赞同：1
> 
> 时间：2012-12-07T22:00:08.753
> 
> 标签：python, data-structures

我正在实施一些基本的数据结构以准备考试，并且遇到了以下问题。我想实现一个未排序的链表，并且已经实现了一个`pop()`方法，但是我不知道，无论是语法上还是概念上，如何使函数有时带参数，有时不带参数。我希望这是有道理的。

```
def pop(self):
    current = self.head
    found = False
    endOfList = None

    while current != None and not found:
        if current.getNext() == None:
            found = True
            endOfList = current.getData()
            self.remove(endOfList)
            self.count = self.count - 1
        else:
            current = current.getNext()

    return endOfList 
```

我想知道如何使语句`unsortedList.pop(3)`有效，3 只是一个示例，而 unsortedList 是该类的一个新实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:02:30.807

使用具有默认值的参数的基本语法（和常见用例）如下所示：

```
def pop(self, index=None):
    if index is not None:
        #Do whatever your default behaviour should be 
```

然后，您只需要根据论点确定您希望您的行为如何改变。我只是猜测参数应该指定应该从列表中弹出的元素的索引。

如果是这种情况，您可以直接使用有效的默认值，而不是`None`例如`0`

```
def pop(self, index=0): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:06:26.030

首先，在函数中添加一个具有默认值的参数：

```
def pop(self, item=None): 
```

现在，在代码中`if item is None:`，你可以做“无参数”的事情；否则，使用`item`. 无论您是想在逻辑的顶部还是向下切换，都取决于您的逻辑。在这种情况下，`item is None`可能意味着“匹配第一项”，因此您可能需要一个检查`item is None or current.data == item:`.

有时你会想要为一个合法的参数做这个`None`，在这种情况下你需要选择一个不同的哨兵。这里有一些关于不同选择的利弊的问题（以及其他地方的博客文章）。但这是一种方法：

```
class LinkedList(object):
    _sentinel = object()
    def pop(self, item=_sentinel): 
```

除非有人将`_sentinel`LinkedList 的私有类成员用作列表项是有效的，否则这是有效的。（如果这*是*有效的——例如，因为你正在用这些东西构建一个调试器——你必须变得更加棘手。）

这方面的术语有点棘手。引用文档：

> 当一个或多个顶级参数具有 形式`parameter = expression`时，该函数被称为具有“默认参数值”。</p>

要理解这一点：“参数”（或“形式参数”）是函数定义要采用的东西；“参数”是在调用表达式中传递给函数的东西；“参数值”（或“实际参数”，但这只会让事情变得更加混乱）是函数体接收的值。因此，引用“默认参数”或“带有默认参数的参数”在技术上是不正确的，但两者都很常见，因为即使是专家也觉得这些东西令人困惑。（如果您感到好奇，或者只是还没有感到困惑，请参阅参考文档中的[函数定义](http://docs.python.org/reference/compound_stmts.html#function-definitions)和[调用以获取完整的详细信息。）](http://docs.python.org/reference/expressions.html#calls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:07:26.013

您的考试是否专门使用 Python？如果没有，您可能需要研究[函数重载。](http://en.wikipedia.org/wiki/Function_overloading)Python 不支持此功能，但许多其他语言支持，并且是解决此类问题的一种非常常用的方法。

在 Python 中，您可以从使用具有默认值的参数中获得很多好处（正如 Michael Mauderer 的示例所指出的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:50:53.643

```
def pop(self, index=None):
    prev = None
    current = self.head
    if current is None:
       raise IndexError("can't pop from empty list")
    if index is None:
       index = 0 # the first item by default (counting from head)

    if index < 0:
       index += self.count
    if not (0 <= index < self.count):
       raise IndexError("index out of range")

    i = 0
    while i != index:
        i += 1
        prev = current
        current = current.getNext()
        assert current is not None # never happens if list is self-consistent

    assert i == index
    value = current.getData()
    self.remove(current, prev)
    ##self.count -= 1 # this should be in self.remove()
    return value 
```

# jquery - 来自列表的 Jquery 选择器

> ID：13771681
> 
> 赞同：0
> 
> 时间：2012-12-07T22:00:42.310
> 
> 标签：jquery, html

如果我的页面有一堆如下所示的 div。如何使用 JQuery 定位单个标题。我想根据它的 pos 更改每个标题的颜色

```
<div id="box_list">
     <div class="container">
        <div class="title">Red</div>
        </div>
        <div class="container">
        <div class="title">Blue</div>
        </div>
        <div class="container">
        <div class="title">Orange</div>
        </div>
</div>

$(document).ready(function () {

    $("#box_list:nth-child(1)")
        .css("color", "red")

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:02:50.097

```
$(document).ready(function () {
    $("#box_list .title").each(function(i){
         var color = 'brown';
         if(i === 0){
             color ="red";
         }
         else if(i === 2){
             color ="orange";
         }
         $(this).css("color", color)
    });
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/HMNgq/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:05:53.173

您可以使用 eq() 函数，如下所示：

```
$("#box_list div").eq(0).css("color", "red"); 
```

请记住，您从 0 开始计数 - 这意味着您将使用 .eq(2) 来定位第三个 div。

在此处查看实际操作：http: [//jsfiddle.net/qUYPK/](http://jsfiddle.net/qUYPK/)

# php - 链接中的 PHP 变量

> ID：13771685
> 
> 赞同：-1
> 
> 时间：2012-12-07T22:00:47.553
> 
> 标签：php

这是我需要帮助的脚本部分，PHP 变量有效，但不适用于链接。

```
$source_file = 'http://domain.tld/subfolder/<?php echo $_GET["m"]; ?>".png'; 
```

它不起作用。当脚本运行时，它运行它，而不是为 m 值键入的内容，但是当我没有在链接中时，它工作得很好。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:01:57.657

因为您使用的是单引号，所以 PHP 采用文字值。你可以使用这个：

```
$source_file = 'http://domain.tld/subfolder/' . $_GET["m"] . '.png'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:02:09.273

只需使用这个：

```
$source_file = 'http://domain.tld/subfolder/' . $_GET["m"] . '.png'; 
```

您已经在使用 PHP 代码，因此您不能重新打开`<?php`标签，而是连接字符串的每个部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:02:02.610

`"`之后你有一个错误`?>`。

除此之外，只需将 var 直接扔进去：

```
$source_file = "http://domain.tld/subfolder/$_GET[m].png"; 
```

我更喜欢使用`.`和做不必要的连接。

干杯

# c# - 如何在实体代码优先中使用多对多关系为数据库播种

> ID：13771689
> 
> 赞同：1
> 
> 时间：2012-12-07T22:01:06.160
> 
> 标签：c#, asp.net-mvc-4, ef-code-first

我的代码中有一个多对多的关系，我正在尝试为数据库播种。这是我的种子方法：

```
var loc = new List<Location> {
      new Location { LocationName = "Paradise Lane" },
      new Location { LocationName = "81st Street" }
};
loc.ForEach(l => context.Locations.Add(l));

var soft = new List<Software> {
     new Software { Title = "Adobe Creative Suite", ... Locations = loc.Single(s => s.LocationName = "Paradise Lane")}
};
soft.ForEach(s => context.Software.Add(s)); 
```

这是我的位置类：

```
public class Location
    {
        public int Id { get; set; }
        [Required]
        [StringLength(20)]
        public string LocationName { get; set; }
        public virtual ICollection<Software> Software { get; set; }
    } 
```

这是我的软件类：

```
public class Software
    {
        public int Id { get; set; }
        [Required]
        [StringLength(128)]
        public string Title { get; set; }
        [Required]
        [StringLength(10)]
        public string Version { get; set; }
        [Required]
        [StringLength(128)]
        public string SerialNumber { get; set; }
        [Required]
        [StringLength(3)]
        public string Platform { get; set; }
        [StringLength(1000)]
        public string Notes { get; set; }
        [Required]
        [StringLength(15)]
        public string PurchaseDate { get; set; }
        public bool Suite { get; set; }
        public string SubscriptionEndDate { get; set; }
        //[Required]
        //[StringLength(3)]
        public int SeatCount { get; set; }
        public virtual ICollection<Location> Locations { get; set; }
        public virtual ICollection<SoftwarePublisher> Publishers { get; set; }
        public virtual ICollection<SoftwareType> Types { get; set; }

    } 
```

我收到两个错误。一，它告诉我我不能将字符串隐式转换为布尔值。我什至不知道我正在尝试这样做。第二，不能将 lambda express 转换为委托，因为块中的返回类型的 soem 不能隐式转换为委托返回类型。这是对 iCollection 的引用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:08:04.673

你错过了一个等号。双等于比较。

```
loc.Single(s => s.LocationName = "Paradise Lane") 
```

对比

```
loc.Single(s => s.LocationName == "Paradise Lane") 
```

此外，您不能`.Single()`进入位置，因为它是一个`ICollection`. `Single`返回 1 个对象，而不是集合。您应该改用 .Where 。或者您可以在其中隐式声明一个数组并在其中使用您的 .Single() 代码。

编辑：显然 .Where() 也不能很好地转换为 ICollection。添加一个 ToArray，你会得到一个可以接受的数组。

# python - 编辑表时关闭 PyQt 事件循环

> ID：13771694
> 
> 赞同：9
> 
> 时间：2012-12-07T22:01:46.583
> 
> 标签：python, pyqt, pyqt4, qtablewidget

我正在用 PyQt 开发一个 GUI。GUI 有一个 qListWidget、一个 qTableWidget 和一个用 Mayavi 实现的绘图。该列表指的是绘制的形状（例如圆柱体和圆锥体）。在列表中选择形状时，我希望将形状的属性加载到表中（从字典变量）并在图中突出显示形状。我的 Mayavi 绘图工作正常。此外，如果表格被编辑，我需要重新绘制形状，以反映新的属性值（如圆柱体，如果半径改变）。

So, when a list item is selected -> update the table with the item's properties (from a dictionary variable), highlight the item on the plot

编辑表格时 -> 更新字典变量并重新绘制项目

问题：当我选择一个列表项并将数据加载到表中时，每次更新单元格时都会触发 qTableWidget ItemChanged 信号，这会触发多次使用不完整数据重新绘制形状。

在以编程方式更新表时，是否有禁用 GUI 事件循环的典型方法？（我有使用 Excel VBA 的经验，在该上下文中设置 Application.EnableEvents=False 将防止在每次以编程方式更新单元格时触发 WorksheetChange 事件。）我是否应该有一个“正在进行的表更新”变量来防止在表正在更新？有没有办法一次更新表格小部件而不是逐项更新？（我承认我暂时有意避免使用 Model-View 框架，因此使用 qListWIdget 和 qTableWidget）。

有什么建议么？

我是第一次发帖，但是 StackOverflow 的长期用户，所以我只想提前感谢您成为如此棒的社区！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T20:22:16.773

`blockSignals(bool)`旨在抑制`QObjects`及其子类发出信号，从而防止任何其他对象在插槽中接收它们。但这是一种`QObject`方法。如果您特别试图阻止一个对象发出信号以响应您所做的更改，这可能会触发插槽中的**计算**或其他一些昂贵的处理，那么这就是您想要的。

但是，如果您的情况是进行重复更改会导致反复进行昂贵的绘制操作（或在小部件上生成其他昂贵的事件），那么您可以使用[`updatesEnabled(bool)`](http://qt-project.org/doc/qt-4.8/qwidget.html#updatesEnabled-prop). 这种方法的一个好处是它递归地禁用目标小部件的子部件，从而阻止它们被更新。因此，在您再次启用之前，层次结构中的任何内容都不会收到更新。

```
mainWidget.setUpdatesEnabled(False)
# do a bunch of operations that would trigger expensive events
# like repaints
mainWidget.setUpdatesEnabled(True) 
```

最终，这取决于问题的根源是来自触发信号还是触发小部件事件。阻塞信号仍将允许小部件处理其事件，但不会通知任何其他侦听器。`updatesEnabled`是包装许多列表/表/树更新的常用方法。之后再次启用时，将执行单个帖子更新。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-07T22:59:43.240

对于继承的任何对象，可以暂时[阻止](https://qt-project.org/doc/qt-4.8/qobject.html#blockSignals)`QObject`信号：

```
self.tableWidget.blockSignals(True)
# perform updates, etc
self.tableWidget.blockSignals(False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:25:32.780

如果您禁用整个事件循环，应用程序将变得无响应。而且，即使用户没有注意到，操作系统也可能会发出某种“挂起”通知（就像 OS X 的色彩鲜艳的旋转沙滩球，用户永远不会错过）。

您可能希望在不完全禁用事件循环的情况下禁用*重绘。*但即使这样也可能太激烈了。

您真正要做的就是确保表格停止重绘本身（不改变您实现表格视图的方式，您承认这并不理想，但您有理由这样做）。

因此，只需禁用 ItemChanged 更新。几乎在所有情况下，最简单的方法是调用`blockSignals(True)`小部件。

在极少数情况下这不起作用（或者当您正在处理旨在用于基于 Qt4 和早期项目的古老代码时），您仍然可以获得信号的处理程序，将它们存储起来离开，删除它们，然后做你的工作，然后恢复以前的处理程序。

您可以改为创建处理程序可以访问的标志，并更改它们，以便在设置标志时它们不执行任何操作。这是传统的 C 做事方式，但通常不是您想要在 Python 中做的事情。

# c# - F# 类型提供程序可以合并到 C# 中吗

> ID：13771700
> 
> 赞同：38
> 
> 时间：2012-12-07T22:02:08.023
> 
> 标签：c#, .net, f#, type-providers

很酷的新 F# 3.0 功能类型提供程序可用于弥合 F# 数据类型或类与 XML 或 WSDL 等数据源结构之间的不匹配。然而，这种不匹配在其他 .NET 语言（如 C#）中也是一个挑战。

我想在 C# 代码中使用 F# 3.0 提供程序。如果有的话，我该怎么做？此外，如果我们不能，C# 实现需要什么才能使用它们？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-07T23:44:18.797

我认为@kvb 很好地概述了一些技术难题。我同意*类型推断*是有问题的——你基本上只能在本地使用提供者生成的类型，类似于*匿名类型*。我认为 C# 可能会在 Roslyn 中提供类似的东西，但我怀疑它是否会像在 F# 中一样优雅流畅地集成（其中类型提供程序实际上是*语言功能*，而不仅仅是*工具*）。

要回答您的两个具体问题：

> [如何] 在 C# 代码中使用 F# 3.0 提供程序？

F# 类型提供程序实际上只有 F# 编译器才能理解，因此您需要在 F# 中使用它们。对于*生成*类型提供程序（SQL、实体、WSDL、配置文件），您可以从 F# 引用提供程序并使用从 C# 项目中生成的类型。

对于*擦除*类型提供程序，您将无法执行此操作，因为类型并不真正存在，只有 F# 可以看到它们。因此，最好的选择是用 F# 编写处理代码，并将结果作为记录集合或其他易于从 C# 使用的类型返回。

> C# 实现需要什么才能使用它们？

当然，我可以只说“C# 必须支持类型提供程序！”，但这里还有一些想法。类型提供程序只是 .NET 程序集，它们不使用任何特定于 F# 的类型。该[`ITypeProvider`接口](http://msdn.microsoft.com/en-us/library/hh323952.aspx)可以被包括 C# 在内的任何 .NET 语言使用，因此如果 C# 设计人员需要，他们可以重用所有已经为 F# 构建的优秀提供程序。

因此，将此建议提交给[C# 用户的声音](https://visualstudio.uservoice.com/forums/121579-visual-studio/category/30931-languages-c-)或在其他地方提倡（或说服 Mono 团队实施此建议！），也许它会被添加到 C# ( `vNext + 1 + ...`) 中。目前，您只能获得 F# 中的所有好处。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-07T22:37:07.840

类型提供程序工作方式的某些方面特别适合 F# 程序员的需求，但在考虑其他语言的强类型数据访问解决方案时可能不太引人注目。例如，很多 F# 编程都是在 F# Interactive 中完成的，与代码生成器（需要语言外部机制来生成源代码文件）相比，类型提供程序可以非常好地启用此工作流程。由于 C# 程序员习惯于减慢编辑-编译-运行周期，因此这在 C# 设置中可能不太重要。

从技术角度来看，我怀疑与 C# 等语言相比，F# 更普遍的类型推断可能是最大的优势。例如，如果我想将来自类型提供程序的一些数据访问逻辑包装在另一种类型中，我可以执行以下操作：

```
let moviesStartingWith prefix =
    query {
        for movie in MyDataSource.Movies do
        where (movie.Title.StartsWith(prefix) }
    |> Seq.toList 
```

在 C# 中，我需要指定返回类型（例如`List<DataSource.ServiceTypes.Movie>`），这最终会成为一件苦差事，这意味着即使使用 IntelliSense，我也会在提供的类型集上打点以生成签名。一组提供的值以生成查询。

当然，这也适用于类型提供者以外的领域，但我认为对于一些提供者自然生成的一些嵌套类型层次结构，这在实践中会特别痛苦，因为类型名称变得非常长。

# javascript - IE 测试 Javascript “浏览器模式” “文档模式” 让我发疯！是浏览器兼容性问题还是发生了什么

> ID：13771703
> 
> 赞同：0
> 
> 时间：2012-12-07T22:02:16.027
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9, ie-developer-tools

需要在这里进行干预，因为我对这个 0_o 几乎失去了理智

我正在使用 IE 9 并且正在使用 IE 的 F12 开发人员工具，试图测试 IE8。我正在使用 JavaScript 执行一项非常简单的任务。

我正在抓取一些内部 html - 出于任何原因将其用作刺痛。

像这样：

```
<div id="Some_Container_div">

    <div class="Some_Inner_Div_Class">sometext</div>
    <div class="Some_Inner_Div_Class">sometext</div>
    <div class="Some_Inner_Div_Class">sometext</div>

</div>

<script>

var Div_Contaiers_Inner_Html_As_String = document.getElementById('Some_Container_div').innerHTML;

alert(Div_Contaiers_Inner_Html_As_String);

Array_Of_Divs = Div_Contaiers_Inner_Html_As_String.split("</div>");

alert(Array_Of_Divs);

</script> 
```

* * *

上面的代码正确警告：首先：

```
<div class="Some_Inner_Div_Class">sometext</div><div class="Some_Inner_Div_Class">sometext</div><div class="Some_Inner_Div_Class">sometext</div> 
```

然后第二个警告正确的数组：

```
<div class="Some_Inner_Div_Class">sometext,<div class="Some_Inner_Div_Class">sometext,<div class="Some_Inner_Div_Class">sometext, 
```

* * *

* * *

如果我现在使用开发人员工具 (f12) 并切换到“浏览器模式”IE8 并将“文档模式”也切换到 IE8，浏览器现在会发出警报：

第一的：

```
<DIV class=Some_Inner_Div_Class>sometext</DIV><DIV class=Some_Inner_Div_Class>sometext</DIV><DIV class=Some_Inner_Div_Class>sometext</DIV> 
```

*   **现在注意到缺少的引号了吗？**
*   **现在注意到“DIV”这个词的大写了吗？**

接下来它会提醒同样的事情：

```
<DIV class=Some_Inner_Div_Class>sometext</DIV><DIV class=Some_Inner_Div_Class>sometext</DIV><DIV class=Some_Inner_Div_Class>sometext</DIV> 
```

所以看起来它现在甚至没有将字符串拆分成一个数组 - 不知道为什么，就像它不再是一个字符串一样。

如果我现在使用开发人员工具 (f12) 并保持“浏览器模式”IE8 并将“文档模式”也切换到 IE9 - 它再次正常工作......

所以非常感谢比尔盖茨再次让我感到困惑0_O

无论如何 - 所以我在这里寻求帮助 - 我看到有人说你应该在使用开发人员工具进行测试时将“浏览器模式”切换到 IE8 和“文档模式”也切换到 IE8 - 但我没有看到我理解的解释为什么。如果你只切换一个或两个有什么区别。

同时：

*   谁能告诉我这是否会在 IE8 中正常工作？
*   为什么要去掉引号？
*   为什么不在开发人员工具测试模式下创建数组？

谢谢大家 ： ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:26:12.930

### 简短的回答：

这是一个兼容性问题。JScript 5 引擎 (IE7/IE8) 存在严重缺陷，这是它所做的事情之一（从属性中去除s 并在生成字符串`"`时更改大小写）。`innerHTML`同样，因为`innerHTML`大写的螺丝，它试图将你`.split("</div>");`的字符串与包含`</DIV>`和失败的字符串相匹配。

尝试`.split(/<\/div>/i);`改用。这不会解决`"`s 从您的属性中丢失的问题，但它是部分修复。[如果需要引号，请参阅此答案](https://stackoverflow.com/a/1232661/1755252)以获取似乎可以修复缺少的引号和大写的功能。

* * *

### 在如何针对旧版本的 IE 进行测试的更大问题中：

*本质上，浏览器模式对 Internet Explorer 如何呈现*页面¹没有任何作用。浏览器模式影响 IE*获取*页面的方式，改变发送到服务器的 UserAgent。

文档模式更改[Trident 渲染引擎的版本](http://blogs.msdn.com/b/ie/archive/2010/06/16/ie-s-compatibility-features-for-site-developers.aspx)，以及是使用[IE9 Chakra Javascript 引擎还是使用 JScript 引擎的 IE8/IE7 变体](http://blogs.msdn.com/b/ie/archive/2011/03/24/ie9-s-document-modes-and-javascript.aspx)。

TL;DR，出于测试目的，您应该将浏览器模式更改为 IE8，然后观察文档模式是否默认为 IE8 标准或 Quirks。如果代码不起作用，请在两者之间切换。如果代码随后可以工作，请确保您为任何工作模式设置了适当的 DOCTYPE（[Quirks 模式为 Transitional，Standards 模式为 Strict](http://www.w3.org/QA/2002/04/valid-dtd-list.html)）。

[[1] 浏览器模式还影响浏览器如何解释条件注释，以及*默认*的文档模式（使其与浏览器模式相匹配），因此仅更改它是确定 IE8 将如何解释页面的好方法......但是这个如果您有 X-UA-Compatible Meta 标签，行为会很快中断，所以如果您使用这些标签，只需将 Document Mode 设置为匹配。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:22:57.490

很遗憾，但“IE8 浏览器模式”和 IE8 确实是不同的东西：/

我认为这段代码在 IE8 中可以正常工作。

顺便说一句，您可以使用免费[的 IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)工具，这比“浏览器模式”要好得多。

# jquery - 调用日期选择器的对话框功能时添加文本字段

> ID：13771707
> 
> 赞同：1
> 
> 时间：2012-12-07T22:02:29.583
> 
> 标签：jquery, jquery-ui, datepicker

我试图让 jQuery UI Datepicker 在我的页面上工作，并且它运行良好，除了一件小事：它在调用对话框方法时自动添加一个输入字段。

这是我的代码

```
$('.select_date').each(function(i) {
   var input_name = $(this).attr('data-input');
   $('#'+input_name).datepicker();

   $(this).click(function() {
      var position = $(this).offset();

      $('#'+input_name).datepicker('dialog', "10/12/2012", function(date, inst) { 
           $('#'+input_name).val(date); 
         }, 
         {}, 
         [position.left + $(this).width() + 5, position.top]
      );
   });
}); 
```

我正在尝试做的是使用 .select_date 类遍历按钮元素，并且对于每个元素（相关页面上的一个），它应该将 datepicker 绑定到具有数据输入属性 id 的隐藏字段当前按钮。

然后我确定，当我单击按钮时，对话框打开，当我在日历中选择一个日期时，该值被转移到隐藏字段。

所有这一切实际上都非常有效，但由于某种原因，当第一次单击按钮时，会将此字段添加到 DOM 中：

```
<input type="text" style="position: absolute; top: 265px; width: 0px; left: 674.5px;" id="dp1354917526755"> 
```

有趣的是，输入字段的位置与日期选择器的位置完全相同，只是在左侧位置增加了 10px。

# file - 无法获取别名？

> ID：13771712
> 
> 赞同：0
> 
> 时间：2012-12-07T22:02:42.800
> 
> 标签：file, applescript, alias

我不明白为什么这段代码不起作用。`aItems`是一个包含别名路径的数组。

```
repeat with j in aItems
    set Aliasname to name of alias file j
    display dialog Aliasname as string
end repeat 
```

我只想获取数组中每个别名的名称，但它失败了：

> 错误号 -1700 从启动磁盘的别名文件 ... 到整数

当我硬编码到别名的路径（字面上与 中的路径相同`j`）时，它工作得很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:43:07.787

2个建议。首先，我假设您在 Finder tell 代码块中获得了 aItems。您还需要从 Finder 中获取名称，因此首先确保代码的名称行位于 Finder 告诉块内。其次，您的 aItems 列表是文件引用列表，因此当您询问名称时，您不需要“别名文件”。只问j的名字。

我希望这会有所帮助。祝你好运。

# actionscript-3 - 在鼠标单击位置 AS3 上使用缩放拖动平移

> ID：13771720
> 
> 赞同：1
> 
> 时间：2012-12-07T22:03:04.193
> 
> 标签：actionscript-3, flash

所以，这里的另一篇文章在[此链接之前确实帮助了我！](https://stackoverflow.com/questions/13241030/as3-zooming-in-and-out-where-mouse-clicked-not-at-registration) 它让我可以整齐地放大，但我在平移中真正想要的是鼠标拖动（我将使用触摸屏，所以拖动移动很重要）不需要使用 Touch 类，我已经完成了以前用鼠标类拖动事件，发现它对我来说更容易。

我的问题是我的整洁缩放与此 MOUSE_MOVE 平移相关联，我想知道一种干净的方法来将平移更改为拖动事件，并且仍然没有让我的平移超出我的图像约束。

bg_mc- 是我移动和缩放的背景图像。

我的代码：

```
 import com.greensock.*; 
    bg_mc.doubleClickEnabled = true;

    //Variables
    var percX:Number;
    var percY:Number;
    var destX:Number;
    var destY:Number;

    //Image panned and masked
    this.mask = mask_mc;
    stage.addEventListener(MouseEvent.MOUSE_MOVE,mousemove);
    function mousemove(e:MouseEvent) {
        if (mask_mc.hitTestPoint(stage.mouseX,stage.mouseY,false)) {
            if (bg_mc.width>mask_mc.width) {//Avoids Scrolling if image is under mask area width
                percX = mask_mc.mouseX/mask_mc.width;
            }
            if (bg_mc.height>mask_mc.height) {
    //Avoids Scrolling if image is under mask area height
                percY = mask_mc.mouseY/mask_mc.height;
            }
            destX = -(bg_mc.width-mask_mc.width)*percX;
            destY = -(bg_mc.height-mask_mc.height)*percY;
            TweenMax.to(bg_mc,.5,{x:destX,y:destY});
        }
    }
    //Add listeners for the imgLoader movie clip.
    bg_mc.doubleClickEnabled = true;  
    bg_mc.addEventListener(MouseEvent.DOUBLE_CLICK, increaseSize);
    bg_mc.addEventListener(MouseEvent.CLICK, decreaseSize);

    function scaleAroundMouse(objectToScale:DisplayObject, scaleAmount:Number,          
    bounds:Rectangle = null, onComplete:Function = null):TweenLite {
        // scaling will be done relatively
        var relScaleX:Number = scaleAmount / objectToScale.scaleX;
        var relScaleY:Number = scaleAmount / objectToScale.scaleY;
        // map vector to centre point within parent scope

        var scalePoint:Point = objectToScale.localToGlobal( new         
        Point(objectToScale.mouseX, objectToScale.mouseY));
        scalePoint = objectToScale.parent.globalToLocal( scalePoint );
        // current registered postion AB
        var AB:Point = new Point( objectToScale.x, objectToScale.y );
        // CB = AB - scalePoint, objectToScale vector that will scale as it runs from the centre
        var CB:Point = AB.subtract( scalePoint );
        CB.x *= relScaleX;
        CB.y *= relScaleY;
        // recaulate AB, objectToScale will be the adjusted position for the clip
        AB = scalePoint.add( CB );
        // set actual properties

        if(bounds){
         var limits:Rectangle = new Rectangle(
            bounds.x + (bounds.width - (objectToScale.width * relScaleX)),
            bounds.y + (bounds.height - (objectToScale.height * relScaleY)),
            (objectToScale.width * relScaleX) - bounds.width,
            (objectToScale.height * relScaleY) - bounds.height
         );

         if(AB.x < limits.x) AB.x = limits.x;
         if(AB.x > limits.x + limits.width) AB.x = limits.x + limits.width;
         if(AB.y < limits.y) AB.y = limits.y;
         if(AB.y > limits.y + limits.height) AB.y = limits.y + limits.height;       
        }

        return TweenLite.to(objectToScale,1,{onComplete: onComplete, 
    scaleX: scaleAmount, scaleY: scaleAmount, x: AB.x, y: AB.y});
    }

    function increaseSize(event:MouseEvent):void{
        stopMouseMove();
        scaleAroundMouse(bg_mc, 4, null, resumeMouseMove);
    }

    function decreaseSize(event:MouseEvent):void{
        stopMouseMove();
        scaleAroundMouse(bg_mc, 1, null, resumeMouseMove);
    }

    function stopMouseMove():void {
       stage.removeEventListener(MouseEvent.MOUSE_MOVE,mousemove);
    }

    function resumeMouseMove():void {
       stage.addEventListener(MouseEvent.MOUSE_MOVE,mousemove);
    } 
```

我能得到的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:37:58.993

在 mousedown 或您想要开始拖动的任何侦听器上，使用 MovieClip.StartDrag() 函数允许拖动，并使用 StopDrag() 停止拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:18:25.500

虽然您可以使用内置`startDrag`（或 startTouchDrag）和 stopDrag 方法，但它不会很好地配合您的放大/缩小功能。

```
 bg_mc.addEventListener(MouseEvent.MOUSE_DOWN,mouseDown); //add the listener to the bg directly
    function mouseDown(e:MouseEvent) {
       // if (mask_mc.hitTestPoint(stage.mouseX,stage.mouseY,false)) {  //this isn't needed if you add the listener directly to bg_mc
       stage.addEventListener(MouseEvent.MOUSE_UP,mouseUp);
       bg_mc.startDrag(false, getBoundsRect());  //see the code below for the getBoundsRect() function
    }

    function mouseUp(e:MouseEvent):void {
        bg_mc.stopDrag();
        stage.removeEventListener(MouseEvent.MOUSE_UP,mouseUp);
    } 
```

最好使用自定义拖动功能，如下所示：

```
import com.greensock.*; 
import flash.events.MouseEvent;
import flash.geom.Rectangle;
import flash.events.Event;
import flash.geom.Point;

    bg_mc.doubleClickEnabled = true;

    //Variables
    var percX:Number;
    var percY:Number;
    var destX:Number;
    var destY:Number;

    //Image panned and masked
    bg_mc.mask = mask_mc;

    //this function generates a bounds rectangle that would keep bg_mc edges from going outside of mask_mc area
    function getBoundsRect():Rectangle {
        return new Rectangle((mask_mc.x + mask_mc.width) - bg_mc.width, (mask_mc.y + mask_mc.height) - bg_mc.height, bg_mc.width - mask_mc.width, bg_mc.height - mask_mc.height);
    }

    var isZoomed:Boolean = false;  //a var to keep track of whether your zoomed in or out

    var isDragging:Boolean = false; //a var to keep track of whether the bg is being dragged
    var tmpMousePoint:Point = new Point(); //this stores the mouse coordinates on the mouse down, to compare later on the mouse up to see if the mouse moved
    var decay:Number = .27; //make this lower for slower drag, make it 1 to turn off a smooth drag all together
    var tmpMouseMoved:Boolean = false; //to keep track on mouse up whether the action was a drag or a click
    var mouseMoveSensitivity:Number = 15; //how far does mouse need to move before you cancel the click event
    var offset:Point = new Point(); //the offset of the initial mouse click relative to bg_mc's  0,0

    bg_mc.addEventListener(MouseEvent.MOUSE_DOWN,mouseDown);
    bg_mc.addEventListener(MouseEvent.CLICK,mouseClick, false, 99999); //listen with a higher priority than any other click listeners on bg_mc - this way if it's a drag, you can cancel the click event

    function mouseDown(e:Event):void {
            //reset these to default
        isDragging = true;
        tmpMouseMoved = false;

        tmpMousePoint.x = mouseX; //capture the current mouse to check later if it moved (so you know the user intended to drag not click)
        tmpMousePoint.y = mouseY;
        offset.x = bg_mc.mouseX;
        offset.y = bg_mc.mouseY;

        bg_mc.addEventListener(Event.ENTER_FRAME,bgEnterFrame); //listen every frame until the mouse is released
        stage.addEventListener(MouseEvent.MOUSE_UP, mouseUp);
    }

    function bgEnterFrame(e:Event):void {
        bg_mc.x += decay * (mouseX - offset.x - bg_mc.x);
        bg_mc.y += decay * (mouseY - offset.y - bg_mc.y);

        var bounds:Rectangle = getBoundsRect();

        switch(true){
            case (bg_mc.x < bounds.x):
                bg_mc.x = bounds.x;
                break;

            case (bg_mc.x > bounds.x + bounds.width):
                bg_mc.x = bounds.x + bounds.width;
        }

        switch(true){
            case (bg_mc.y < bounds.y):
                bg_mc.y = bounds.y;
                break;

            case (bg_mc.y > bounds.y + bounds.height):
                bg_mc.y = bounds.y + bounds.height;
        }

        if(Math.abs(tmpMousePoint.x - mouseX) > mouseMoveSensitivity || Math.abs(tmpMousePoint.y - mouseY) > mouseMoveSensitivity){
            tmpMouseMoved = true;
        }
    }

    function mouseUp(e:Event):void {
        isDragging = false;
        //remove listeners
        bg_mc.removeEventListener(Event.ENTER_FRAME,bgEnterFrame);
        stage.removeEventListener(MouseEvent.MOUSE_UP, mouseUp);
    }

    function mouseClick(e:MouseEvent):void {
        trace("CLICK cap");
        if(tmpMouseMoved){
            trace("Kill");
            e.stopImmediatePropagation(); //cancel the mouse event
        }
    }

    //Add listeners for the imgLoader movie clip.

    bg_mc.doubleClickEnabled = true;  
    bg_mc.addEventListener(MouseEvent.DOUBLE_CLICK, increaseSize);
    bg_mc.addEventListener(MouseEvent.CLICK, decreaseSize,false,0,true);

    function scaleAroundMouse(objectToScale:DisplayObject, scaleAmount:Number,          
    bounds:Rectangle = null, onComplete:Function = null):TweenLite {
        // scaling will be done relatively
        var relScaleX:Number = scaleAmount / objectToScale.scaleX;
        var relScaleY:Number = scaleAmount / objectToScale.scaleY;
        // map vector to centre point within parent scope

        var scalePoint:Point = objectToScale.localToGlobal( new         
        Point(objectToScale.mouseX, objectToScale.mouseY));
        scalePoint = objectToScale.parent.globalToLocal( scalePoint );
        // current registered postion AB
        var AB:Point = new Point( objectToScale.x, objectToScale.y );
        // CB = AB - scalePoint, objectToScale vector that will scale as it runs from the centre
        var CB:Point = AB.subtract( scalePoint );
        CB.x *= relScaleX;
        CB.y *= relScaleY;
        // recaulate AB, objectToScale will be the adjusted position for the clip
        AB = scalePoint.add( CB );
        // set actual properties

        if(bounds){
         var limits:Rectangle = new Rectangle(
            bounds.x + (bounds.width - (objectToScale.width * relScaleX)),
            bounds.y + (bounds.height - (objectToScale.height * relScaleY)),
            (objectToScale.width * relScaleX) - bounds.width,
            (objectToScale.height * relScaleY) - bounds.height
         );

         if(AB.x < limits.x) AB.x = limits.x;
         if(AB.x > limits.x + limits.width) AB.x = limits.x + limits.width;
         if(AB.y < limits.y) AB.y = limits.y;
         if(AB.y > limits.y + limits.height) AB.y = limits.y + limits.height;       
        }

        TweenLite.killTweensOf(objectToScale); //need to add this so the click/double click don't compete with each other
        return TweenLite.to(objectToScale,1,{onComplete: onComplete, 
    scaleX: scaleAmount, scaleY: scaleAmount, x: AB.x, y: AB.y});
    }

    function increaseSize(event:MouseEvent):void{
        if(isZoomed){
            scaleAroundMouse(bg_mc, 4, getBoundsRect());
            isZoomed = false;
        }
    }

    function decreaseSize(event:MouseEvent):void{
       if(!isZoomed){
            scaleAroundMouse(bg_mc, 1, getBoundsRect());  
            isZoomed = true;
       } 
    } 
```

# jquery - 如果可能的话，如何使用 jquery 和/或引导程序为多个选择制作可切换的 div？

> ID：13771722
> 
> 赞同：1
> 
> 时间：2012-12-07T22:03:15.160
> 
> 标签：jquery, html, twitter-bootstrap, widget, multiple-choice

我想做一个漂亮的多选 HTML 页面。我想要 3 或 4`<div>`秒，包括图像和/或文本，用户应该能够`<div>`通过简单地单击任意位置来切换每个“打开”或“关闭” `<div>`（如果可能的话，应该有一个突出显示的效果动画） . 当表单被提交时，应该向服务器发送 each 的状态`<div>`，就好像它是一个复选框。

我到处搜索，但找不到类似的东西。它看起来很基本，以至于我可能忽略了一些微不足道的事情。有任何想法吗？我已经在使用 jQuery 和 bootstrap，所以如果有一个仅基于这些框架的简单解决方案，我会非常高兴。

谢谢。

**编辑：**我不希望`<div>`s 移动或消失。我只想要一个“突出显示”的效果，例如在选中时将背景颜色更改为蓝色，在`<div>`未选中时更改为白色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:46:07.350

I would recommend starting with a good HTML base. I would probably use a hidden radio button inside each `div` and check or uncheck it when the `div` was clicked. The radio button would be a valid item on the form which would submit the selected value.

HTML:

```
<div class="choice">
    <input id="choice_1" type="radio" name="choice" value="choice_1" />
    <label for="choice_1">Chicago</label>
</div>

<div class="choice">
    <input id="choice_2" type="radio" name="choice" value="choice_2" />
    <label for="choice_2">Los Angeles</label>
</div>

<div class="choice">    
    <input id="choice_3" type="radio" name="choice" value="choice_3" />
    <label for="choice_3">San Francisco</label>
</div> 
```

​JavaScript:

```
$(document).ready(function() {
    var choices = $('.choice');

    choices.on('click', function(event) {
        var choice = $(event.target);
        choice
            .find('[name="choice"]')
            .prop('checked', true)
            .trigger('change');
    });

    var inputs = $('.choice input');
    inputs.on('change', function(event) {
        var input = $(event.target);
        var choice = $(this).closest('.choice');

        $('.choice.active').removeClass('active');
        choice.addClass('active');
    });
});​ 
```

Demo: [jsfiddle](http://jsfiddle.net/cYhTX/)

# Alternative: if you want multiple selected at once

So with radio buttons only one within the radio button group is active at a time. If that is not the behavior you want, you could use a hidden checkbox and toggle it on and off.

HTML:

```
<div class="choice">
    <input id="choice_1" type="checkbox" name="choice_1" value="choice_1" />
    <label for="choice_1">Chicago</label>
</div>

<div class="choice">
    <input id="choice_2" type="checkbox" name="choice_2" value="choice_2" />
    <label for="choice_2">Los Angeles</label>
</div>

<div class="choice">    
    <input id="choice_3" type="checkbox" name="choice_3" value="choice_3" />
    <label for="choice_3">San Francisco</label>
</div> 
```

​JavaScript:

```
$(document).ready(function() {
    var choices = $('.choice');

    choices.on('click', function(event) {
        var choice = $(event.target);
        var input = choice.find('[type="checkbox"]');
        input
            .prop('checked', !input.is(':checked'))
            .trigger('change');
    });

    var inputs = $('.choice input');
    inputs.on('change', function(event) {
        var input = $(event.target);
        var choice = $(this).closest('.choice');

        if (input.is(':checked')) {
            choice.addClass('active');
        }
        else {
            choice.removeClass('active');
        }
    });
});​ 
```

Demo: [jsfiddle](http://jsfiddle.net/DstkX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:33:26.083

您可以使用 jQuery click 函数通过几种方式执行此操作：

```
// Toggle a class for the div
// - For this you would setup your styles in the CSS for your site 
$('div').click(function(){
    $(this).toggleClass('highlight');
});

// Animate the background-color for the div
// - For this you would need to include the jquery.color plugin
// - https://github.com/jquery/jquery-color
$('div').toggle(function(){
    $(this).animate({backgroundColor: "#aa0000"}, 500);
}, function(){
    $(this).animate({backgroundColor: "#ffffff"}, 500);
}); 
```

这是一个示例 jsFiddle：http: [//jsfiddle.net/PC5ry/](http://jsfiddle.net/PC5ry/)

# javascript - 在 extjs4.1 中更改 xtype 文本的颜色

> ID：13771723
> 
> 赞同：0
> 
> 时间：2012-12-07T22:03:17.343
> 
> 标签：javascript, extjs, extjs4.1, xtype

我需要更改下面文本的颜色。样式字段中的所有其他内容都有效，除了文本颜色。有人可以告诉我我在这里做错了什么吗？

```
{
                            xtype: 'text',

                            text: "Logged in as:",
                            textAlign:'left',
                            style : "color:#3E546B;font-style:italic;font-family: tahoma, arial, verdana, sans-serif;font-size: 11px;",
                            width: 140,
                            handler: function() {
                                document.location.href="";
                            }
                        }, 
```

编辑。我没有使用表单面板，而是在容器内使用 xtype:text。

[http://jsfiddle.net/nCkZN/4/](http://jsfiddle.net/nCkZN/4/) （这仍然使用表单面板。但这是为了显示文本颜色没有改变）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:17:47.110

使用[fieldStyle](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-fieldStyle)而不是`style`

[演示](http://jsfiddle.net/molecule/nCkZN/)

* * *

**更新**

我混淆了“文本”和“文本字段”。

现在我明白了。更改字体样式的唯一方法`Ext.draw.Text`是使用[styleSelector](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.draw.Text-cfg-styleSelector)（必须引用有效的 css 规则）对其进行配置，就像在[此演示](http://jsfiddle.net/molecule/nCkZN/5/)中所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T09:41:38.723

使用样式中的填充 如下使用类型作为文本（Sprite）而不是使用 Xtype 作为文本

```
Ext.create('Ext.draw.Component', {
    renderTo: Ext.getBody(),
    width: 200,
    height: 200,
    items: [{
        type: "text",
        text: "Hello, Sprite!",
        fill: "green",
        font: "18px monospace"
    }]
}); 
```

# spring-security - spring-security.xml 文件的解析错误

> ID：13771727
> 
> 赞同：1
> 
> 时间：2012-12-07T22:03:36.643
> 
> 标签：spring-security, xsd

我对 xml 知之甚少或一无所知，我必须编写一个 spring-security.xml 文件。我猜这个问题与我的xml没有遵循xsd有关。这是xml。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:s="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <s:http auto-config="true">
                <s:intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" />
                <s:intercept-url pattern="/index.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <s:intercept-url pattern="/**" access="ROLE_USER" />
                <s:intercept-url pattern="/" access="ROLE_USER" />       
        <s:form-login login-page="/login" default-target-url="/getemp"/>
        <s:logout logout-success-url="/logout" />
    </s:http>

    <s:authentication-manager>
        <s:authentication-provider>

                        <s:ldap-authentication-provider user-dn-pattern="uid={0},ou=people"/>
        </s:authentication-provider>
    </s:authentication-manager>

        <s:ldap-server id="ldapServer" url="ldap://test.com:389" />

</beans> 
```

当我尝试运行 Web 应用程序时出现错误。

*原因：org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“s:ldap-authentication-provider”开头的无效内容。'{"http://www.springframework.org/schema/security":any-user-service, "http://www.springframework.org/schema/security":password-encoder}' 之一是预期的。*

这里是xsd

[弹簧安全xsd](http://www.springframework.org/schema/security/spring-security-3.1.xsd)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:15:54.023

[xsd](http://www.springframework.org/schema/security/spring-security-3.1.xsd)说`<s:authentication-manager>`接受一个`authentication-provider`OR an作为孩子`ldap-authentication-provider`。因此，删除`<s:authentication-provider>`包裹你的`<s:ldap-authentication-provider>`那个应该会让你解决这个问题。您的最终代码应如下所示：

```
<s:authentication-manager>
    <s:ldap-authentication-provider user-dn-pattern="uid={0},ou=people"/>
</s:authentication-manager> 
```

# tfs - 修改 TFS 错误中的“原始估计”字段

> ID：13771729
> 
> 赞同：0
> 
> 时间：2012-12-07T22:03:40.807
> 
> 标签：tfs, field

我们一直在讨论对 TFS 工作项模板的可能更改——我们的许多开发人员目前在评估错误时使用具有“粗略”时间估计的心理模型：“这将花费大量时间”、“这是一个简单的解决方案”或“这是中等努力”。他们以此作为一种方式，让 PM 开始安排时间，并在研究后进行更坚定的努力。

我认为，我们有两个选择：

1.  在错误 WIT 中添加一个新字段，用于“粗略估计”，它只是文本并允许人们输入自由文本。
2.  将现有的“原始估算”修改为字符串，并要求开发人员将其估算确定为小时。

我们正在考虑#2，因为我们希望尽可能“开箱即用”。如果我们选择选项 #2，我们是否会以任何方式危及开箱即用的报告？如果我们更改字段的基础数据类型，是否会对报告产生严重影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:56:31.797

在“需求”工作项类型（Scrum：产品待办事项项、敏捷：用户故事、CMMI：需求）上，有一个字段可以存储粗略估计。在敏捷中，它被称为故事点，在 Scrum Effort 中。你可以放任何数字，我将它与斐波那契数列一起使用。搜索“计划扑克”，你就会明白我在说什么。

# php - 无法从数据库写入/读取

> ID：13771731
> 
> 赞同：0
> 
> 时间：2012-12-07T22:03:52.143
> 
> 标签：php, mysql, database

我正在尝试通过学习来创建一个 1 对 1 聊天网站，但我遇到了麻烦。

我无法写入数据库。

我在下面链接了四个 php 文件。

*   [指数](http://hastebin.com/garajabuya.xml)
*   **在里面：**

    ```
    session_start();

    define('LOGGED_IN', true);

    require 'classes/Core.php';
    require 'classes/Chat.php';

    ?> 
    ```

*   [聊天](http://hastebin.com/bofajerugo.coffee)

*   **核：**

    ```
    class Core {
    protected $db, $result;
    private $rows;

    public function __construct() {
        $this->db = new mysqli("localhost","root","");
    }

    public function query($sql) {
        $this->result = $this->db->query($sql);
    }

    public function rows() {
        for($x = 1; $x <= $this->db->affected_rows; $x++) {
            $this->rows[] = $this->result->fetch_assoc();
        }
        return $this->rows;
    }
     }

    ?> 
    ```

我有一个使用 WAMP 设置的 MySql 数据库。

PS 是的，我打开了“< ? php”，但这里没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:20:44.513

从我所见，您没有选择默认数据库。您必须在

```
$this->db = new mysqli("localhost","root","", "mydatabase"); 
```

或稍后选择一个

```
$this->db->select_db("mydatabase"); 
```

您也不会检查 mysql 调用的返回值。例如，添加

```
public function query($sql) {
    $this->result = $this->db->query($sql);
    if ($this->result === false) {
        echo $this->db->error;
    }
} 
```

在您的 mysql 语句之后，以查看语句是成功还是失败。

出于调试目的，您可以显示 sql 和相应的结果

```
public function query($sql) {
    var_dump($sql);
    $this->result = $this->db->query($sql);
    var_dump($this->result);
    echo $this->db->error;
} 
```

# iphone - 现代目标 C 指南

> ID：13771732
> 
> 赞同：0
> 
> 时间：2012-12-07T22:03:54.333
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我们在哪里可以找到现代 Objective-C 的所有指南，以及用现代 Objective-C 代码替换旧版本代码的优势是什么。除了易于使用之外，处理时间是否有所减少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:08:37.093

有关更多信息，请参阅：

*   WWDC 2012[现代 Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)
*   WWDC 2012[迁移到现代 Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=413)
*   [Clang 语言扩展](http://clang.llvm.org/docs/LanguageExtensions.html)

对我来说，对象字面量、下标等的演变很大程度上是代码易读性的问题（语法糖，正如 Grady 所说）。其中一些新功能，如强类型枚举，也有助于改进代码完成。我不知道 Xcode 4.5 引入的功能比我们所拥有的功能（例如 Xcode 4.3）提供了任何实质性的性能改进。

简而言之，虽然我是新功能的拥护者，但我认为没有必要急于重构您的旧代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:19:21.370

处理时间可能有优势，快速枚举之类的东西应该要快得多......即

```
NSArray * array = [array withObjects:@"a",@"b",@"c",nil];

for (int i = 0 ; i<[array count]; i++)
{
     NSLog(@"%@",[array objectAtIndex:i]);
}

should be slower than:

NSArray * array = @[@"a",@"b",@"c"];

for (id object in array)
{
    NSLog(@"%@",object);
} 
```

根据您所说的回溯多远，`@property`'s 的引入使内存管理更易于管理。

积木太棒了！

异常处理现在`@try{}`比现在更好`NS_DURING`，等等。

文字语法只是语法糖......但如果它可用，那就太好了。

# dependency-injection - 如何在 Orchard 中注册自定义构建 Autofac.Module？

> ID：13771734
> 
> 赞同：1
> 
> 时间：2012-12-07T22:03:55.987
> 
> 标签：dependency-injection, orchardcms, autofac

我有一段代码封装了并非特定于 Orchard 的功能。但是我需要通过依赖注入使其在 Orchard 中可用。因此，我建立了一个注册所有组件（类型）的 Autofac 模块，但我找不到通知 Orchard 的 Autofac Container 的方法。

根据我的说法，有两种方法可以将模块添加到容器中：

通过向 ContainerBuilder 提供模块（通常在启动时），或者通过在运行时使用 ContainerBuilder 更新已经构建的 Container

我可以用第一种方式解决问题，但如果有的话，我宁愿做第二种方式的变体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:08:27.740

只需将派生自的类添加`Autofac.Module`到您的 Orchard 模块即可。它会在容器构建过程中被 Orchard 自动拾取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T11:15:43.653

[Piotr Szmyd 的回答](https://stackoverflow.com/a/13771797/1662268)基本上是正确的，但这里有一些更详细的信息：

您的 Orchard 模块是您添加到 Orchard.sln 的新 .csproj 添加 Autofac 作为对该 csproj 的引用（确保您使用 Orchard 附带的版本 - 而不是 nuget。[有关该问题的更多详细信息，请参见此处](https://stackoverflow.com/questions/28700524/including-autofac-module-in-custom-module-breaks-orchard)）然后添加一个派生自 Autofac.Module 并实现 Load(ContainerBuilder) 的类。例如

```
using System;
using Autofac;

namespace MyCustom.Module.Namespace
{
  public class LoaderModule : Autofac.Module
  {
    protected override void Load(ContainerBuilder builder)
    {
      builder.RegisterType<MyClass>().As<IMyInterface>();
    }
  }
} 
```

作为附加说明：Autofac 注册代码仅在应用程序启动时被调用。如果您在 IIS 中本地运行站点并在 VS 中运行代码，那么 Orcahrd 的动态编译特性意味着当您重新编译代码时，应用程序不会停止。

因此，为了使这个 Autofac 注册代码被命中（以及任何更改生效），您必须 iisreset 以终止应用程序，以便它重新加载 Autofac 注册。

# asp.net - 无法在 Web 服务器上开始调试。仅适用于 ASP NET 调试器

> ID：13771735
> 
> 赞同：1
> 
> 时间：2012-12-07T22:04:11.160
> 
> 标签：asp.net, visual-studio, visual-studio-2012, visual-studio-debugging

我正在使用 vs2012 .net 4.5

无法在 Web 服务器上开始调试。Web 服务器配置不正确。

我已经尝试解决这个问题好几个星期了，但我找不到解决方案

这是我试过的：

1.  检查项目属性上的哪个配置导致了问题：我发现当我设置 ASP .NET 调试器进行调试时会发生这种情况。
2.  重新安装 .NET 框架
3.  在 IIS 上启用所有身份验证类型：匿名、表单、Windows 身份验证和 ASP NET 拟人化

发生这种情况是因为我将应用程序更改为在 IIS 下运行。我正在使用 VS Development Web 服务器..

你能给我一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T01:57:01.580

我在 Windows 8.1 上的 Visual Studio 2012 和 2013 中遇到了同样的问题。对我来说，解决方法是使用“打开或关闭 Windows 功能”将 Windows 身份验证添加到 IIS

![打开或关闭 Windows 功能截图](../Images/77bce07c2aac3f58fdd0aba89c28ef1d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T15:00:12.273

我在 VS2013 的 WebApi 中遇到了同样的错误，请按照以下步骤解决问题：

1.  右键单击 Web 项目。
2.  选择“网络”选项卡。
3.  单击“创建虚拟目录”按钮。

在这种情况下，WebApi 需要在 IIS 上配置一个虚拟目录才能正常工作并能够进行调试。

# playframework - 如果数据库关闭，所有控制器都失败并显示 500（播放 1.2.5） - 我可以覆盖该行为吗？

> ID：13771737
> 
> 赞同：2
> 
> 时间：2012-12-07T22:04:14.553
> 
> 标签：playframework

这似乎是 1.2.x 中的行为：如果应用程序至少有一个模型/实体，因此依赖于 JPA，并且数据库连接（mysql）失败（超时或数据库关闭），那么控制器方法会失败即使方法不使用数据库，在到达方法代码之前也会出现 500 错误。

例如，这可以防止编写数据库健康检查控制器方法，或者对数据库错误有一定弹性的方法。

我已经用一个简单的项目验证了这一点。重现：

1.  创建一个新的应用程序
2.  创建至少一个模型/实体并定义一个 mysql 数据库连接。
3.  创建一个简单的控制器方法，它只呈现文本（不使用数据库）和相关的路由（比如 /playdbtest）

测试 - 启动应用程序并：

1.  当数据库可用时调用 playdbtest（应该可以）
2.  关闭mysql并在数据库关闭时调用playdbtest（将失败）
3.  禁用/删除实体类并重新开始播放/#2 将起作用

问题：有没有办法规避这种行为或捕获错误？一个应用程序不应该因为它的数据库连接失败而完全失败——尽管它服务请求的能力会受到损害。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:35:19.183

除了 samuel 的回答，您还可以在控制器上捕获错误。

```
public class Admin extends Application {

@Catch(IllegalStateException.class)
public static void logIllegalState(Throwable throwable) {
    Logger.error("Illegal state %s…", throwable);
}

public static void index() {
    List<User> users = User.findAll();
    if (users.size() == 0) {
        throw new IllegalStateException("Invalid database - 0 users");
    }
    render(users);
}
} 
```

[玩！例子](http://www.playframework.org/documentation/1.2/controllers "播放示例")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:23:19.070

查看源代码，我发现您可以`@NoTransaction`在不需要数据库连接的控制器方法上使用注释。

您可以自定义错误页面`views/errors/500.html`。

# wordpress - WP 插件需要如何重新编码才能在 Modx 上工作？

> ID：13771738
> 
> 赞同：0
> 
> 时间：2012-12-07T22:04:15.503
> 
> 标签：wordpress, modx, modx-revolution, modx-evolution

可以说，我想要一个为 WP 购买的附属插件，用于在 Modx 上工作。要遵循哪些程序？是的，您可以假设我购买的所有插件都使用 php、javascript 和 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:52:35.633

您需要将插件重构为 modx 片段和块 - [http://www.cmslesstraveled.com/index/tutorials/refactoring-a-simple-php-application-for-modx.html](http://www.cmslesstraveled.com/index/tutorials/refactoring-a-simple-php-application-for-modx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:00:47.313

> 您可以通过包含此文件来使用内部 Wordpress 函数 include_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php' );
> 
> 您可以尝试将文件包含在您的 modx 模板之一中，然后查看它是否可以让您访问您的附属插件功能。
> 
> 反之亦然，您可以通过添加此代码将 modx 包含到您的 wordpress 主题文件中。
> 
> 定义（'MODX_CORE_PATH'，'完整/路径/到/你的/modx/核心/'）；定义（'MODX_CONFIG_KEY'，'配置'）；需要一次 MODX_CORE_PATH 。'模型/modx/modx.class.php'; $modx=新的 modX(); $modx->initialize('mgr');
> 
> 这将使您能够访问 $modx 对象和所有它的奇迹。

来源：[http ://www.quora.com/MODX-CMS/How-would-WordPress-plugins-need-to-be-recoded-in-order-to-work-in-MODX](http://www.quora.com/MODX-CMS/How-would-WordPress-plugins-need-to-be-recoded-in-order-to-work-in-MODX)

# javascript - 如何设置份数 getPrintParams()

> ID：13771741
> 
> 赞同：1
> 
> 时间：2012-12-07T22:04:22.117
> 
> 标签：javascript, pdf

我正在尝试在我的 pdf 创建过程中添加一些 JS 以节省一些时间。我的目标是基本上单击一个按钮生成 PDF 并打印。

现在我有：
`var pp = this.getPrintParams(); pp.interactive = pp.constants.interactionLevel.full; this.print(pp);`

唯一的问题是我不知道如何设置要打印的份数。我想传递一个变量并打印那么多副本。问题是我真的找不到任何文档讨论此类中的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-02T10:08:27.910

我知道，这个问题很老了。但我也在寻找解决方案。我在[这里](https://answers.acrobatusers.com/Print-button-select-page-print-copies-print-javascript-q126346.aspx)发现，它应该与以下内容一起使用：

```
//no of copies
var n = 3;

var pp = this.getPrintParams();

//here is the magic
pp.NumCopies=eval(n);

this.print(pp);
```

对我来说，这适用于 tcpdf 和 A​​dob​​e Reader。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T09:20:56.043

试试这个

```
var n = 3;
var pp = this.getPrintParams();
pp.NumCopies=eval(n);
this.print({bUI: false,bSilent: true,bShrinkToFit: true,printParams:pp}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T22:08:20.583

不可能，这是好事；因为否则一些网站会指定一个很高的数字，而那些不希望这样做的人会不小心打印很多页面而不是一个页面。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-27T14:01:56.150

您应该调用 print 方法两次或更多次，如下所示：

```
this.print({bUI: false,bSilent: true,bShrinkToFit: true});
this.print({bUI: false,bSilent: true,bShrinkToFit: true}); 
```

我认为无法设置份数。

**也可以看看：**

*   [Adobe 的印刷制作文档](http://livedocs.adobe.com/acrobat_sdk/9.1/Acrobat9_1_HTMLHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Acrobat9_HTMLHelp&file=JS_Dev_PrintProduction.75.1.html#1516092)

# c - C 类型转换：如何

> ID：13771749
> 
> 赞同：0
> 
> 时间：2012-12-07T22:05:01.327
> 
> 标签：c, casting, overflow

```
#include<stdio.h>
int main(void)
{
    unsigned short a,e,f ;    // 2 bytes data type
    unsigned int temp1,temp2,temp4; // 4 bytes data type
    unsigned long temp3; // 8 bytes data type
    a=0xFFFF;
    e=((a*a)+(a*a))/(2*a); // Line 8
    //e=(((unsigned long)(a*a)+(unsigned long)(a*a)))/(unsigned int)(2*a);    

    temp1=a*a;
    temp2=a*a;
    temp3=(unsigned long)temp1+(unsigned long)temp2; // Line 14
    temp4=2*a;

    f=temp3/temp4;

    printf("%u,%u,%lu,%u,%u,%u,%u\n",temp1,temp2,temp3,temp4,e,f,a);
    return(1);
} 
```

如何修复算术（在第 8 行通过适当的中间结果类型转换）以便处理溢出？目前它打印 65534 而不是预期的 65535。

为什么第 14 行需要类型转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:01:44.043

您必须在执行溢出操作*之前*提升类型。在第 8 行中，这将是乘法，所以

```
e = ((unsigned) a * a + (unsigned) a * a) / (2 * (unsigned) a); 
```

请注意，仅提升此类对称操作的一个操作数`*`就足够了。您可以根据需要使用`(unsigned) a * (unsigned) a`，但`(unsigned) a * a`也可以使用。

这将处理乘法，不再溢出。但是，现在添加将溢出。虽然 32 位`unsigned`足以`a * a`满足`a * a + a * a`. 为此，您将需要`unsigned long`（假设它更大）。您可以正式提升 to 的第一个操作`+`数`unsigned long`

```
e = ((unsigned long) ((unsigned) a * a) + (unsigned) a * a) / (2 * (unsigned) a); 
```

（同样，只提升 的第一个操作数`+`就足够了，这意味着第二个乘法可以留在 中`unsigned`）。

上面看起来有点太复杂了，为了让它看起来更干净，你可以`unsigned long`从一开始就在第一个乘法中使用

```
e = ((unsigned long) a * a + (unsigned) a * a) / (2 * (unsigned) a); 
```

或者你可以在`unsigned long`任何地方使用，让它看起来更干净

```
e = ((unsigned long) a * a + (unsigned long) a * a) / (2 * (unsigned long) a); 
```

同样的问题出现在您的`temp1 = a * a;`行中。出于同样的原因，它们会溢出。你所要做的

```
temp1 = (unsigned) a * a;
temp2 = (unsigned) a * a; 
```

避免溢出，即在乘法`a` *之前提升。*

这正是您在第 14 行正确执行的操作，即提升`+` *之前*加法的操作数，尽管仅提升一个操作数就足够了

```
temp3 = (unsigned long) temp1 + temp2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T23:08:04.017

> 如何修复算术（在第 8 行通过适当的中间结果类型转换）以便处理溢出？

您需要将分子中两个乘法的一个伙伴转换为足够大的类型。由于`(2^16-1)² = 2^32 - 2^17 + 1`，分子会溢出 32 位无符号整数，因此您需要更大的值（通常是 64 位类型）。如果`(unsigned) long`满足尺寸要求，

```
e = (((unsigned long)a*a)+((unsigned long)a*a))/(2*a); 
```

将是定义明确且安全的（也可以使用强制转换为`long`，这里只需要 33 位）。

但是using`unsigned long`是不可移植的，因为它可能是 32 位类型。使用`(unsigned) long long`或`(u)int_least64_t`便携且安全。

> 目前它打印 65534 而不是预期的 65535。

那是因为计算的结果是`-2`if`int`是（很可能是）一个二进制补码 32 位整数类型，在溢出时具有环绕行为 [不过，有符号整数的溢出是未定义的行为，因此编译器优化可能会改变它；如果编译器分析计算并看到它`2*a*a/(2*a)`可以将其简化为，因为这将是任何不发生溢出`a`的非零的结果；`a`除以 0 也是 UB，因此涵盖了所有情况]。

```
(2^16-1)² = 2^32 - 2^17 + 1 ≡ -2^17 + 1 = -131071 (mod 2^32)
(-131071) + (-131071) = -262142
(-262142)/131070 = -2 
```

通常的算术转换应用于 , 和 的操作数`*`，`+`因此`/`操作`unsigned short`数被转换为`int`（因为这里所有`unsigned short`值都可以表示为`int`s），并且算术在 type 处执行`int`。

然后通过将结果添加到它来`-2`转换为，结果是之后的值。`unsigned short``USHRT_MAX +1``USHRT_MAX - 1``e`

> 为什么第 14 行需要类型转换？

因为加上`temp1`and`temp2`会产生一个超出 32 位`unsigned`范围的值，所以该结果的约简模数`2^32`会改变整体结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:09:36.537

您使用“更大”类型开始（即，不要声明`a`为`unsigned short`，只需将其声明为`unsigned int`）。如果您需要施放，那么，只需施放操作的一侧。促销活动将为您进行。

# c# - 如何使用 TDD 方法创建一个宁静的 Web 服务？

> ID：13771750
> 
> 赞同：3
> 
> 时间：2012-12-07T22:05:03.130
> 
> 标签：c#, web-services, unit-testing, tdd

我的任务是使用 WCF 创建一个带有 JSON 格式的宁静 Web 服务，并使用以下方法使用 TDD 方法，该方法应将产品作为文本文件存储在磁盘上：

```
CreateProduct(Product product)
GetAProduct(int productId) 

URI Templates:
POST to /MyService/Product
GET to /MyService/Product/{productId} 
```

创建服务及其 Web 方法很容易，但

您将如何使用 TDD 完成这项任务？您应该在创建 SUT 代码之前创建一个测试。

单元测试的规则说它们也应该是独立的和可重复的。

我有一些困惑和问题如下：

1）我应该通过添加对实际服务实现的引用还是针对服务的 url 编写单元测试（在这种情况下，我必须托管和运行服务）？或两者？

2) 我在想一种方法可能只是创建一个测试方法，在其中创建产品，调用 CreateProduct() 方法，然后调用 GetAProduct() 方法并断言发送的产品是我收到的产品. 在 TearDown() 事件中，我只是删除了创建的产品。

但我对上述问题的看法是

*   它测试了多个功能，因此它不是真正的单元测试。
*   它不检查数据是否正确存储在文件中
*   是TDD吗？

如果我为每个 web 方法创建一个单独的单元测试，例如调用 GetAProduct() web 方法，我必须将一些测试数据物理存储在服务器上，因为它不能依赖 CreateProduct() 单元测试。他们应该能够独立运行。

请指教。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:12:18.077

我建议不要担心 Web 服务端点，而是关注系统的行为。为了便于讨论，我将抛开所有技术术语，谈谈我认为您要解决的核心业务问题：创建产品目录。

为了做到这一点，首先要考虑产品目录的作用，而不是关于如何做的技术细节。将其用作测试的起点。

```
public class ProductCatalogTest
{
    [Test]
    public void allowsNewProductsToBeAdded() {}

    [Test]
    public void allowsUpdatesToExistingProducts() {}

    [Test]
    public void allowsFindingSpecificProductsUsingSku () {}
} 
```

我不会在这里详细介绍如何实现测试和生产代码，但这是一个起点。一旦完成了`ProductCatalog`生产类，您就可以将注意力转向技术细节，例如制作 Web 服务和编组 JSON。

我不是 .NET 人，所以这主要是伪代码，但它可能最终看起来像这样。

```
public class ProductCatalogServiceTest
{
   [Test]
   public void acceptsSkuAsParameterOnGetRequest()
   {
       var mockCatalog = new MockProductCatalog(); // Hand rolled mock here.
       var catalogService = new ProductCatalogService(mockCatalog);

       catalogService.find("some-sku-from-url")

       mockCatalog.assertFindWasCalledWith("some-sku-from-url");
   }

   [Test]
   public void returnsJsonFromGetRequest()
   {
       var mockCatalog = new MockProductCatalog(); // Hand rolled mock here.
       mockCatalog.findShouldReturn(new Product("some-sku-from-url"));
       var mockResponse = new MockHttpResponse(); // Hand rolled mock here.

       var catalogService = new ProductCatalogService(mockCatalog, mockResponse);

       catalogService.find("some-sku-from-url")

       mockCatalog.assertWriteWasCalledWith("{ 'sku': 'some-sku-from-url' }");
   }
} 
```

您现在已经进行了端到端的测试，并测试了整个过程。我个人会测试驱动包含在其中的业务逻辑，`ProductCatalog`并且可能会跳过测试编组，因为无论如何它都可能由框架完成，并且只需很少的代码即可将控制器绑定到产品目录中。你的旅费可能会改变。

最后，在测试驱动目录时，我希望代码被拆分为多个类并在那里进行模拟，因此它们将进行单元测试，而不是大型集成测试。同样，这是另一天的话题。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:32:46.883

为了回答你的问题，我要做的是编写调用其余服务的测试并使用 Rhino Mocks 之类的东西来安排（即设置调用的期望），行动（实际运行调用要测试的单元的代码和断言你得到你期望的结果。你可以模拟出rest调用的预期结果。从前到后对rest服务的实际测试将是集成测试而不是单元测试。

因此，为了更清楚，您需要编写的单元测试是围绕业务逻辑中实际调用其余 Web 服务的测试......

就像这是您提出的实现（让我们假设这甚至还没有被编写）

```
public class SomeClass
    {
        private IWebServiceProxy proxy;
        public SomeClass(IWebServiceProxy proxy)
        {
            this.proxy = proxy;
        }

        public void PostTheProduct()
        {
            proxy.Post("/MyService/Product");
        }

        public void REstGetCall()
        {
            proxy.Get("/MyService/Product/{productId}");
        }
    } 
```

这是您可能考虑编写的测试之一。

```
[TestFixture]
    public class TestingOurCalls()
    {
        [Test]
        public Void TestTheProductCall()  
        {    
        var webServiceProxy = MockRepository.GenerateMock<IWebServiceProxy>();
        SomeClass someClass = new SomeClass(webServiceProxy);

        webServiceProxy.Expect(p=>p.Post("/MyService/Product"));

        someClass.PostTheProduct(Arg<string>.Is.Anything());

        webServiceProxy.VerifyAllExpectations();

       } 
```

}

# three.js - 无法加载纹理

> ID：13771752
> 
> 赞同：0
> 
> 时间：2012-12-07T22:05:08.593
> 
> 标签：three.js, textures, loading

我正在努力解决纹理加载问题。我看到的只是一个黑色的球体。:(

任何帮助都是极好的！我做错了什么吗？浏览器下载图像，控制台上没有问题。

以相同的结果检查每个浏览器。操作系统：Mac 10.8.2

这是我的代码：

```
<html>
<head>
    <script src="js/jquery-1.8.3.min.js"></script>  
    <script src="js/three.min.js"></script>
</head>

<body>

    <div id="container">

    </div>

    <script>
        function addSpaceSphere( ){
            // set up the sphere vars
            var radius = 125,
            segments = 16,
            rings = 16;

            var material = new THREE.MeshPhongMaterial({
                color:0xFFFFFF,
                map: THREE.ImageUtils.loadTexture( 'textures/SPACE014S.png' )  ,
            });

            var sphere = new THREE.Mesh(
                new THREE.SphereGeometry(
                    radius,
                    segments,
                    rings
                ),
                material
            );

            // add the sphere to the scene
            scene.add(sphere);
        }

        function addLights(){
            // create a point light
            var ambient = new THREE.AmbientLight( 0xFFFFFF );
            scene.add( ambient );

            // create a point light
            var pointLight = new THREE.PointLight(0xFFFFFF);

            // set its position
            pointLight.position.x = 10;
            pointLight.position.y = 50;
            pointLight.position.z = 130;

            // add to the scene
            scene.add(pointLight);
        }

        function createScene(){
            // add the camera to the scene
            scene.add(camera);

            // the camera starts at 0,0,0
            // so pull it back
            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 300;

            // start the renderer
            renderer.setSize(WIDTH, HEIGHT);

            $container.append(renderer.domElement);

            addSpaceSphere( );

            addLights();

            renderer.render(scene, camera); 
        }

        function onWindowResize( event ) {
            var newEarthContainerWidth = earthContainer.offsetWidth;
            var newWindowHeight = window.innerHeight;
            var newScale = newEarthContainerWidth / earthContainerWidth;

            sphere.geometry.__dirtyVertices = true;

            sphere.scale.x = sphere.scale.y = sphere.scale.z = newScale;

            renderer.setSize( newEarthContainerWidth, newWindowHeight );

            camera.aspect = newEarthContainerWidth / newWindowHeight;
            camera.updateProjectionMatrix();
            camera.radius = ( newEarthContainerWidth + newWindowHeight ) / 4;
        }

        var WIDTH = window.innerWidth;
        var HEIGHT = window.innerHeight;

        var VIEW_ANGLE = 45,
            ASPECT = WIDTH / HEIGHT,
            NEAR = 0.1,
            FAR = 10000;

        var $container = $('#container');

        // create a WebGL renderer, camera
        // and a scene
        //var renderer = new THREE.CanvasRenderer();
        var renderer = new THREE.WebGLRenderer();
        var camera = new THREE.PerspectiveCamera(
            VIEW_ANGLE, ASPECT, NEAR, FAR
        );

        var scene = new THREE.Scene();

        createScene();      

        window.addEventListener( 'resize', onWindowResize, false );
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:16:57.313

你在打电话

```
renderer.render( scene, camera ); 
```

只有一次，可能在纹理完成加载之前。

添加动画循环。

```
function animate() {

    requestAnimationFrame( animate );

    renderer.render( scene, camera );

}

animate(); 
```

# php - 用php自动发布到facebook公司页面

> ID：13771753
> 
> 赞同：-1
> 
> 时间：2012-12-07T22:05:09.450
> 
> 标签：php, facebook

好的，我知道我在问一个以前被问过数千次的问题，但是我没有找到一个例子或回答我的确切问题。非常感谢任何信息或帮助。

所以，这是我的需要：

我有一个网站的公司页面。我创建了一个 facebook“应用程序”，以便我可以获取应用程序 ID 和密钥，因为我希望公司网站能够自动发布到公司页面。例如，如果网站管理员给某人一个徽章，它会自动在该应用程序所在的公司页面上发布一个帖子，并说：“这个坏人被授予了这个人。”

问题是，我不希望网站管理员必须登录 facebook 来执行此操作。我希望网站代码能做所有事情。有没有办法让公司页面拥有 Facebook 应用程序，以便它始终可以自动向公司页面发布帖子？还是没有办法绕过公司页面所有者通过网站登录 facebook？

任何信息链接和示例在这里也确实会有所帮助。同样，目标是让网站在没有任何人登录的情况下在公司页面上发帖。再次感谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:16:23.987

您将需要首先获取用户访问令牌，然后将其交换为具有权限的长期访问令牌`manage_pages`。然后，您可以使用令牌发布到页面。

更多信息：

[如何仅由单个用户发布 Facebook 用户墙/页面状态 不为其他用户安装应用程序](http://facebook.stackoverflow.com/questions/13113528/how-to-post-facebook-user-wall-page-status-by-a-single-user-only-no-app-install/13114174#13114174)

您必须每 60 天刷新一次长期令牌。

# jquery - jQuery - not() 不适用于元素上新添加的类

> ID：13771763
> 
> 赞同：1
> 
> 时间：2012-12-07T22:05:46.090
> 
> 标签：jquery

如果我单击数字 div，我应该会收到警报。如果我单击点击器，则会在数字 div 中添加一个 less 类，并且在此之后对数字 div 的任何单击都不应显示警报，因为它现在具有 less 类。相反，我仍然收到警报，好像 less 类不存在一样。我究竟做错了什么？

```
<div id="clicker">Clicker</div>
<div class="numbers">123456789</div>

$('.numbers').not('.less').on('click',function(){
    alert('should not alert if has class less after clicker');
});

$('#clicker').on('click',function(){
    $('.numbers').addClass('less');
}); 
```

[这是一个小提琴](http://jsfiddle.net/MTCjc/1/)

感谢各位大侠的帮助，我最终得到了这个：

```
$('body').on('click', '.numbers:not(".less")', function(){
   alert('should not alert if has class less after clicker');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:08:18.183

您正在绑定，然后添加类。您需要在事件之后绑定或将事件委托给一致的父级。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T22:10:51.867

尝试**委派活动**

```
$('body').on('click','.numbers' ,function(e){
    if( $(e.target).hasClass('less'){
       // Do nothing
    }
    else{
       alert('should not alert if has class less after clicker');
    }
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/BxB74/)**

该事件被添加到**元素**而不是**类**中，因此当您添加条件以不根据类条件触发事件时，它将不起作用..

您需要为此类情况委派事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:09:49.960

$("numbers") 通过了一次测试，并绑定了点击事件。完成——绑定已修复。

# batch-file - bat文件查找文件夹

> ID：13771776
> 
> 赞同：1
> 
> 时间：2012-12-07T22:07:12.877
> 
> 标签：batch-file

因此，我多次尝试寻找解决方案已经导致一百万种方法来查找正在执行的 bat 文件的文件夹，但是我想要做的是找到传递给 bat 文件的文件名的文件夹。

例子：

```
C:\Temp\runthis.bat "C:\Blah\Ah Argh\rage.txt" 
```

我想在那个 bat 文件中得到一个简单的字符串“C:\Blah\Ah Argh\”，或者我也可以得到一个字符串“rage.txt”

编辑解释原因：查看另一个 txt 文件中的文件名，该文件是 ftp 服务器的目录列表，以验证文件是否成功上传到它。然后，如果成功，我需要将文件移动到原始文件夹 \uploaded\ 的子文件夹，但我们设置了许多这些文件夹，因此我无法对其进行硬编码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:50:26.833

```
@echo off
The file path is %~dp1
The file name is %~nx1 
```

参数修饰符与 FOR 变量相同。

在命令提示符下键入“HELP CALL”以获取参数修饰符的完整列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T23:52:20.000

```
@echo off
if %1X==X echo Syntax: %0 "path"

rem  The for loop doesn't actually loop. You can split strings with it, but in 
rem  this case we don't. So there is only one iteration in which %%X will 
rem  contain the full path.

rem  Pass it %1, which is the first parameter. Note the quotes, which are 
rem  required if you don't add quotes around the parameter and optional (but 
rem  still valid) when you do.

for /F "delims=|" %%X in ("%1") do (

  rem  FOR LOOP variables can be used with certain modifiers, preceeded by a 
  rem  tilde. In this case I'm using d and p, which stand for drive and path,
  rem  effectively trimming the file name from the path.

  echo %%~dpX

  rem The ~n modifier selects the file name only. ~x is for extension

  echo %%~nxX
) 
```

# php - javascript 对象的 XMLHttpRequest setRequestHeader 方法不起作用

> ID：13771777
> 
> 赞同：9
> 
> 时间：2012-12-07T22:07:22.233
> 
> 标签：php, javascript, drag-and-drop

我在上传文件时遇到问题。我正在使用这篇文章中描述的那种[方法](http://www.sitepoint.com/html5-ajax-file-upload/)。[我从这里](http://blogs.sitepointstatic.com/examples/tech/filedrag/3/filedrag3.zip)下载了作者发布的整个脚本。
该应用程序旨在通过 HTML5 拖放加载文件，然后通过 javascript 通过 ajax 请求将它们发送到服务器端。
一切正常，但是当我想从 AJAX 请求标头中读取参数时会出现问题。这是PHP“文件阅读器”的代码：

```
$fn = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : false);

if ($fn) {
//above there is the upload of the file with file_put_contents function
//which actually works fine when I replace $fn with my own value and ommit the "if" condition 
```

早些时候，启动了 XMLHttpRequest.setRequestHeader 方法来设置“X_FILENAME”标头。这是javascript：

```
var xhr = new XMLHttpRequest();

// start upload
xhr.open("POST", $id("upload").action, true);
xhr.setRequestHeader("X_FILENAME", file.name);
xhr.send(file); 
```

这是证据（来自我的 Chrome 的“萤火虫”）：

![](../Images/3ff8b7a8182c9e79438bea4cdecc569d.png)

当我在 PHP 中对**$fn**变量进行*var_dump时，它返回布尔值 FALSE。*怎么了？

 **PS 我在 Win7 x64 上使用[XAMPP v1.8.1](http://www.apachefriends.org/en/xampp-windows.html)和 Apache 2.4.3 和 PHP 5.4.7。我在最新的 Chrome 上运行该网站。正如您可以猜到的那样，该站​​点正在本地主机上运行。我没有更改 php.ini 文件中的任何内容 - 一切都设置为默认值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T22:13:58.627

下划线似乎不是标题名称的有效字符。使用连字符，它会很好地工作。

```
xhr.setRequestHeader("X-FILENAME", file.name); 
```

并且您的 PHP 不需要任何更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-03T20:06:34.147

新版本的 Apache 和 PHP 5.3

```
 $UploadDir=dirname(__FILE__).'/'.;
   $Datos_cabecera=getallheaders();
    $fn = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : false);
    if (!$fn) {$fn=$Datos_cabecera['X_FILENAME'];} //New versions of Apache and PHP 5.3
    if ($fn) {
    file_put_contents($UploadDir.$fn,file_get_contents('php://input'));
    } 
```**

# html - 左对齐 在 Wrapper 中居中

> ID：13771779
> 
> 赞同：1
> 
> 时间：2012-12-07T22:07:32.547
> 
> 标签：html, css, html-lists, text-align

以下 ul 是左对齐的，我试图将其置于 #category_list div 的中心，但我似乎无法正确处理。

我认为问题在于 ul 没有环绕其内容，而是扩展到全宽。

我在这里想念什么？

谢谢你的帮助。

```
<html>
<head>
    <style>

    #category_list {
        padding: 1em 0 2em;
        text-align:center;
        border: 1px solid red;
    }

    #category_list ul{
        padding: 0;
        display:inline-block;
        text-align: left;
        border: 1px solid red;
        margin: 0 auto;
    }

    #category_list li{
        display:inline-block;
        width: 13.75em;
        padding: 1em 0;
        margin: 0 .5em 1em;
        border-bottom: 1px solid #aaaaaa;
    }

    #category_list h2{
        text-align: left;
        margin: 0;
        font: 1em "Georgia", Serif;
        font-style: italic;
    }
    </style>
</head>

<body>
    <div id="category_list">
        <ul>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        <li><h2>Title</h2><img src="_images/categories/img.jpg"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p></li>
        </ul>
    </div>
</body>
</html> 
```

![http://s17.postimage.org/xa0am2crj/centreleftlist.jpg](../Images/ef48d4fc4af515ab1085efab8c0029f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:13:16.287

试试[这个](http://jsfiddle.net/WegTf/)（jsFiddle）编辑：（最接近的版本：[这里](http://jsfiddle.net/WegTf/2)）：

```
#category_list ul{
    padding: 0;
    display:inline-block;
    border: 1px solid red;
    margin: 0 auto;
}

#category_list li{
    display:inline-block;
    width: 13.75em;
    text-align: left;
    padding: 1em 0;
    margin: 0 .5em 1em;
    border-bottom: 1px solid #aaaaaa;
} 
```

基本上`text-align: left`是从 ul -> li 移动的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:03:56.883

除非您指定宽度，否则 ul 将扩展到其容器的宽度：

```
#category_list ul {
  width: 80%;
  margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T03:32:28.653

好的，所以实现我所追求的效果的最佳方法是使用百分比和媒体查询修改 li 宽度，而不是试图让 ul 宽度正常工作。

所以是这样的：

```
#category_list {
    padding: 1em 0 2em;
    text-align:center;
}

#category_list ul{
    padding: 0;
    text-align: left;
    margin: 0 auto;
    width: 100%;
    list-style: none;
    overflow: hidden;
}

#category_list li{
    float: left;
    width: 23%;
    padding: 1em 0;
    margin: 0 1% 1em;
    border-bottom: 1px solid #aaaaaa;
}
@media screen and (max-width: 48em) {
    #category_list li{width:33%;}
}
@media screen and (max-width: 36em) {
    #category_list li{width:48%;}
} 
```

# couchdb - 类型属性是在 CouchDB 中存储不同数据实体的正确方法吗？

> ID：13771780
> 
> 赞同：4
> 
> 时间：2012-12-07T22:07:35.013
> 
> 标签：couchdb, data-modeling

我想把头绕过去`CouchDB`。我正在尝试关闭`MongoDB`to，`CouchDB`因为我认为 of 的概念对`views`我更有吸引力。`CouchDB`看起来所有记录都存储在一个数据库中。没有集合或任何东西的概念，例如在`MongoDB`. 那么，当存储不同的数据实体（如用户、博客文章、评论等）时，您如何在 map reduce 函数中区分它们？我正在考虑只使用某种`type`属性，并且对于每个项目，我只需要确保`type`始终指定 , 。当我阅读食谱网站时，这种想法得到了加强`CouchDB`，其中一个例子做了同样的事情。

这是最可靠的方法，还是有更好的方法？我正在考虑替代方案，我认为唯一的其他替代方法基本上是尽可能多地嵌入到逻辑文档中。就像，数据库中的直接记录都将是`User`记录，并且每个记录`User`都有一个数组`Posts`，您只需将所有的添加`Posts`到其中。这里的缺点是嵌入式文档不会获得自己的`id`属性，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T23:49:48.993

创作`type`时使用方便快捷`views`。或者，您可以考虑使用 JSON 文档的一部分。即，而不是定义：

```
{
    type: "user",
    firstname: "John",
    lastname: "Smith"
} 
```

你将会拥有：

```
{
    user: {
        firstname: "John",
        lastname: "Smith"
    }
} 
```

然后在视图中用于发出包含`user`信息的文档，而不是使用：

```
function (doc) {
    if (doc.type === "user") emit(null, doc);
} 
```

你会写：

```
function (doc) {
    if (doc.user) emit(null, doc);
} 
```

如您所见，没有太大区别。正如您已经意识到第一种方法是最广泛使用的，但第二种（afaik）被广泛接受。

关于将所有内容存储在`Posts`一个`User`文档中的问题。取决于您计划如何更新文档。请记住，每次更新时都需要编写整个文档（除非您使用`attachments`）。这意味着每次用户编写新`Post`内容时，您都需要检索包含`array`of的文档`Posts`，添加/修改一个元素并更新文档。可能太多（重）。

# r - 在 data.frame 上使用 by() 在 R 中进行二项式检验

> ID：13771781
> 
> 赞同：2
> 
> 时间：2012-12-07T22:07:36.870
> 
> 标签：r, function, apply

我对选项中`binom.test`使用时的行为感到困惑。`by`

它似乎不适用于某些数据帧，但适用于我放在一起的一些虚拟数据。

调用`mean()`工作应该虽然......

我的示例代码如下。

* * *

```
#####  this does not work...

bug <- InsectSprays   
bug$outcome <- ifelse(bug$count > 4, 1, 2 )
bug$spray.n <- ifelse(bug$spray == "A", 1,
               ifelse(bug$spray == "B", 2,
               ifelse(bug$spray == "C", 3,
               ifelse(bug$spray == "D", 4,
               ifelse(bug$spray == "E", 5, 6)))))

binom.test(table(bug$outcome), alternative="greater")               
by(bug, bug$spray.n, FUN = function(X) binom.test(table(X$outcome),
  alternative="greater" ))
by(bug, bug$spray.n, FUN = function(X) mean(X$count)                             

#####  this works...

#####  generating example data
#####  this has three groups, each with a binomial indicator
#####  success is coded as 1, failure as a 0

set.seed(271828)
center <- gl(3,10)
outcome <- rbinom(length(center), 1, .6777)
id <- seq(1,length(center),1)
dat <- as.data.frame(cbind(center,id,outcome))

#####  have to recode success and failure to use table()  
#####  !!!!! would like to avoid having to do this...

dat$primary <- ifelse(dat$outcome == 1 , 1 , 2)
dat$cent <- as.factor(dat$center)

##### carrying out one sided binomial test for positive outcome

binom.test(table(dat$primary), alternative = "greater" )

#####  would like to carry out the same test by center...

by(dat, dat$center, FUN = function(X) binom.test(table(X$primary), 
  alternative = "greater"))
by(dat, dat$center, FUN = function(X) mean(X$outcome)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:41:11.520

一些`binom.test`调用不起作用的原因是因为一些组全部成功（或失败）。因此，您需要在每组中至少有两个级别才能进行测试（这完全有意义......）。

* * *

为了完整性：

```
 #####  this does work...

           air <- airquality
           air

           air$outcome <- ifelse(air$Wind > 10, 1, 2 )

           binom.test(table(air$outcome), alternative="greater")

           by(air, air$Month, FUN = function(X) mean(X$Wind))

           by(air, air$Month, FUN = function(X) table(X$outcome))

           by(air, air$Month, FUN = function(X) binom.test(table(X$outcome), alternative="greater")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T02:29:57.157

如果您尝试，您可以看到问题：

`by(bug, bug$spray.n, FUN = function(X) table(X$outcome))`

# tomcat - 尝试在 Tomcat7 上使用 Wicket 实现 1.6 EventBus

> ID：13771782
> 
> 赞同：0
> 
> 时间：2012-12-07T22:07:39.163
> 
> 标签：tomcat, websocket, wicket

想在 Wicket 6 中试用新的 EventBus，但我无法让 Tomcat7 正确部署它......

任何类型的实现都会导致某种错误。最新的尝试是使用 wicket 1.6、Tomcat7 和 Wicket-atmosphere 0.3，我想我现在差不多了！

无论如何，当尝试部署模块时，我会从 Tomcat 获得“NoClassDefFound ...

```
dec 07, 2012 10:50:54 EM org.apache.catalina.loader.WebappClassLoader loadClass
Info: Illegal access: this web application instance has been stopped already.  Could not load org.apache.catalina.websocket.WsOutbound.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to at
tempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1597)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at org.atmosphere.container.version.TomcatWebSocket.close(TomcatWebSocket.java:129)
        at org.atmosphere.cpr.AtmosphereResponse$1.close(AtmosphereResponse.java:545)
        at org.atmosphere.cpr.AsynchronousProcessor.cancelled(AsynchronousProcessor.java:568)
        at org.atmosphere.container.BlockingIOCometSupport.cancelled(BlockingIOCometSupport.java:165)
        at org.atmosphere.cpr.AsynchronousProcessor$AsynchronousProcessorHook.closed(AsynchronousProcessor.java:634)
        at org.atmosphere.websocket.DefaultWebSocketProcessor.close(DefaultWebSocketProcessor.java:262)
        at org.atmosphere.container.TomcatWebSocketHandler.onClose(TomcatWebSocketHandler.java:71)
        at org.apache.catalina.websocket.StreamInbound.doOnClose(StreamInbound.java:215)
        at org.apache.catalina.websocket.StreamInbound.closeOutboundConnection(StreamInbound.java:197)
        at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:161)
        at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:583)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

dec 07, 2012 10:50:54 EM org.apache.coyote.AbstractProtocol$AbstractConnectionHandler process
Allvarlig: null
java.lang.NoClassDefFoundError: org/apache/catalina/websocket/WsOutbound
        at org.atmosphere.container.version.TomcatWebSocket.close(TomcatWebSocket.java:129)
        at org.atmosphere.cpr.AtmosphereResponse.close(AtmosphereResponse.java:785)
        at org.atmosphere.cpr.AtmosphereResourceImpl.cancel(AtmosphereResourceImpl.java:830)
        at org.atmosphere.websocket.DefaultWebSocketProcessor.close(DefaultWebSocketProcessor.java:272)
        at org.atmosphere.container.TomcatWebSocketHandler.onClose(TomcatWebSocketHandler.java:71)
        at org.apache.catalina.websocket.StreamInbound.doOnClose(StreamInbound.java:215)
        at org.apache.catalina.websocket.StreamInbound.closeOutboundConnection(StreamInbound.java:197)
        at org.apache.catalina.websocket.StreamInbound.onData(StreamInbound.java:161)
        at org.apache.coyote.http11.upgrade.UpgradeProcessor.upgradeDispatch(UpgradeProcessor.java:83)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:583)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

有点想在这里问两个问题...

1：是什么导致这个错误？谷歌 rly 这次没有多大帮助：S

2：是否有关于如何让 Wicket-atmosphere 工作的完整指南/教程？

不要对我的问题含糊其辞，但我真的不知道还有哪些其他信息可以在这里相关。

[我的配置与Wicket 气氛初始化异常](https://stackoverflow.com/questions/13100508/wicket-atmosphere-initialization-exception)的帖子（和链接）中给出的配置几乎相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:32:07.893

正如我最近了解到的，NoClassDefFoundException 是一个令人讨厌的异常。就我而言，eclipse 吃掉了我的工作空间。将相同的代码签出到新代码中会有所帮助，而一遍又一遍地刷新旧代码则没有帮助。我能够找到该类，但 Java 找不到。由于您的错误来自 Tomcat 而不是 Eclipse，因此只需下载一个新的（并重新部署应用程序）可能会有所帮助。我知道，这很可怕，我根本不喜欢这样的东西，但这是让事情再次运行的唯一方法。

# apache-tomee - 如何在 TomEE 中定义 MySQL 数据源？

> ID：13771783
> 
> 赞同：2
> 
> 时间：2012-12-07T22:07:49.353
> 
> 标签：apache-tomee

平台：TomEE Web 配置文件 1.5.0。

我正在尝试做一件非常基本的事情，为 MySQL 设置数据源。我已阅读官方指南（http://openejb.apache.org/configuring-datasources.html）。它要求我们在 openejb.xml 中输入一个 Resource 元素。我在 tomee-webprofile-1.5.0 的任何地方都找不到该文件。我在其他地方读到过，我可以将 tomee.xml 用于相同目的。所以，我将它添加到我的 conf/tomee.xml 中。

```
<Resource id="TestDS" type="DataSource">
    JdbcDriver  com.mysql.jdbc.Driver 
    JdbcUrl jdbc:mysql://localhost/test 
    UserName    root 
    Password    some_pass 
</Resource> 
```

我将 MySQL 驱动程序 JAR 复制到 tomee/lib 文件夹。

我写了这段代码。在此处显示片段：

```
@Resource(name="TestDS") 
DataSource ds; 

Connection con = ds.getConnection(); 
PreparedStatement ps = con.prepareStatement("select * from UserProfile"); 
```

prepareStatement() 调用抛出此异常：

```
java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: USERPROFILE 
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source) 
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source) 
```

为什么系统使用hsqldb驱动？事实上，无论@Resource 的名称是什么，我都会遇到同样的异常。

我究竟做错了什么？我从 Eclipse 开始 TomEE，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:57:52.593

我已经找到了根本原因。仅当我从 Eclipse 启动 TomEE 时才会出现此问题。如果我从命令行启动它，我的数据源定义就可以正常工作。

看来，当我从命令行运行 TomEE 时，它使用来自 /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf 的配置文件。为了改变这一点，我必须在 Eclipse 中采取这些步骤：

1.  从服务器中删除所有已部署的项目。
2.  打开服务器设置并从“服务器位置”中选择“使用 Tomcat 安装”。如果您至少有一个项目仍部署到服务器，则此部分显示为灰色。因此，请确保您已完成第 1 步。
3.  重新启动服务器并重新部署应用程序。现在，我的应用程序正在查找数据源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T10:08:50.597

通常安装在这里解释[http://tomee.apache.org/tomee-and-eclipse.html](http://tomee.apache.org/tomee-and-eclipse.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T08:14:02.533

[我会对 RajV 的回答发表评论，但没有足够的声誉这样做。]

平台：Tomee 1.6.0 Webprofile、eclipse-jee-kepler-SR2-linux-gtk-x86_64 和 OpenJDK 1.7.0_51

在执行[http://tomee.apache.org/tomee-and-eclipse.html](http://tomee.apache.org/tomee-and-eclipse.html)中的步骤（包括“工作区元数据安装”）后，我得到了同样的错误“用户缺少权限或找不到对象”。我的反应是：

`$ ln -s [workspace_path]/Servers/tomee.xml \ [workspace_path]/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf/`

作为此解决方案的一个优势，Eclipse 中的 TomEE 始终使用当前版本的 Workspace/Servers/tomee.xml，无需任何进一步的手动操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-04T19:17:49.610

对我来说，更好的解决方案是将 tomee.xml 文件放在您的 wpt 服务器目录（/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf）中并在那里定义您的数据源。

# python - 将代码行粘贴到 Python 命令行

> ID：13771788
> 
> 赞同：1
> 
> 时间：2012-12-07T22:07:54.893
> 
> 标签：python, aptana

我正在那里的内置终端中的 Aptana Studio 和 Python shell 中工作。我在 shell 命令行上运行了一些相当长的代码片段。我一直被拼写错误绊倒，所以有没有办法编写所有代码并将其复制并粘贴到命令行上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:10:15.923

是的，您可以将代码复制并粘贴到终端中，*只要完整的定义中没有空行即可*。

您可以粘贴：

```
def foo(bar):
    print(bar)
    return bar 
```

但不是

```
def foo(bar):
    print(bar)

    return bar 
```

因为解释器将空行解释为`foo`.

这同样适用于类定义和套件（`if`, `try`, `except`, `while`, `finally`, 等）；属性和函数定义中的任何地方都不允许有空行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T22:14:35.597

如果尚未以这种方式配置，您可能希望将 IDE 配置为使用[IPython](http://ipython.org/)作为解释器。有了它，您可以使用魔术功能`%cpaste`来粘贴完整的代码块。只需用只包含`--`告诉 IPython 你完成的行结束你的块。

# sql - 如何通过 shell 脚本只显示 db2 查询结果而不显示查询？

> ID：13771795
> 
> 赞同：0
> 
> 时间：2012-12-07T22:08:19.520
> 
> 标签：sql, shell, db2

这里可能有一个非常简单的解决方案，但我可能没有使用正确的搜索词。我有一个在 shell 脚本中运行的 sql 查询。我得到了我正在寻找的结果，但是，我也得到了 sql 查询作为结果的一部分。我怎样才能抑制这一点并只显示结果？

我的脚本：

```
#!/usr/bin/sh

db2 connect to MYDB >/dev/null 2>&1;
db2 -x -v "select A, B, C from MYTABLE";
db2 connect reset >/dev/null 2>&1; 
```

我的输出如下所示：

```
select A, B, C from MYTABLE
AAA   BBB   CCC
AAA   BBB   CCC 
```

我想摆脱第一行，只显示结果。我错过了什么？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:38:45.403

如果您只想跳过输出中的第一行，您可以：

```
yourscript.sh | tail -n +2 
```

用 seq 测试：

```
kent$  seq 5|tail -n +2  
2
3
4
5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T15:20:55.577

DB2 命令行处理器的`-v`选项导致当前正在执行的语句被打印在输出中。

从您的命令中删除`-v`，您将只获得查询的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T11:39:13.437

试试这个

db2 -o 查询

了解更多信息。[http://www.ibm.com/developerworks/data/library/techarticle/adamache/0109adamache.html](http://www.ibm.com/developerworks/data/library/techarticle/adamache/0109adamache.html)

# iphone - dismissModalViewControllerAnimated 在 XIB 上不起作用

> ID：13771802
> 
> 赞同：0
> 
> 时间：2012-12-07T22:08:43.503
> 
> 标签：iphone, objective-c, ios, xcode, uiview

我有一个作为模态视图呈现的 XIB。我有一个按钮，调用以下 -

```
(IBAction)dismissVC:(id)sender {
    [self.parentViewController dismissModalViewControllerAnimated: YES];
} 
```

当我按下它时，应用程序崩溃并显示此通知 -

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController dismissVC:]: unrecognized selector sent to instance 0x8379350' 
```

我注意到的是我有一个 ViewController.xib 文件，并且我有这个 MapView.xib，它是我想要关闭的模态 VC。它从 ViewController.xib 呈现

可能的问题是什么？我已经连接了所有的动作和 File Onwer 的东西。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:10:21.427

试试这个：

[无法识别的选择器发送到实例](https://stackoverflow.com/questions/5843217/unrecognized-selector-sent-to-instance)

这可能是你的解决方案。

# java - Android Sqlite - 获取正确的数据库行ID

> ID：13771809
> 
> 赞同：1
> 
> 时间：2012-12-07T22:09:19.040
> 
> 标签：java, android, sqlite, android-listview

我正在开发一个允许用户在排练戏剧时创建笔记的应用程序。用户可以在列表视图中查看他们创建的笔记，并根据需要编辑和删除它们。

以用户创建 3 个笔记为例。在数据库中，row_id 将是 1、2 和 3。所以当用户在列表视图中查看注释时，它们也将按照 1、2、3 的顺序（在我增加值之前最初是 0、1、2） . 因此用户可以从数据库中查看和删除正确的行。

当用户决定删除笔记时，问题就出现了。假设用户删除了位置 2 的便笺。因此我们的数据库将具有 row_id 的 1 和 3。但在列表视图中，它们将位于位置 1 和 2。因此，如果用户单击列表视图中位置 2 的便笺它应该返回数据库中 row_id 为 3 的行。但是它会尝试查找不存在的 row_id 2 ，因此会崩溃。

鉴于用户在列表视图中的选择，我需要知道如何获取相应的 row_id。下面是执行此操作的代码：

```
// When the user selects "Delete" in context menu
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    switch (item.getItemId()) {
    case DELETE_ID:
        deleteNote(info.id + 1);
        return true;
    }
    return super.onContextItemSelected(item);
}

// This method actually deletes the selected note
private void deleteNote(long id) {
    Log.d(TAG, "Deleting row: " + id);
    mNDbAdapter.deleteNote(id);
    mCursor = mNDbAdapter.fetchAllNotes();
    startManagingCursor(mCursor);
    fillData();
    // TODO: Update play database if there are no notes left for a line.
}

// When the user clicks on an item, display the selected note
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    viewNote(id, "", "", true);

}

// This is where we display the note in a custom alert dialog. I've ommited
// the rest of the code in this method because the problem lies in this line:
// "mCursor = mNDbAdapter.fetchNote(newId);"
// I need to replace "newId" with the row_id in the database.
private void viewNote(long id, String defaultTitle, String defaultNote,
        boolean fresh) {

    final int lineNumber;
    String title;
    String note;

    id++;

    final long newId = id;

    Log.d(TAG, "Returning row: " + newId);

    mCursor = mNDbAdapter.fetchNote(newId);

    lineNumber = (mCursor.getInt(mCursor.getColumnIndex("number")));
    title = (mCursor.getString(mCursor.getColumnIndex("title")));
    note = (mCursor.getString(mCursor.getColumnIndex("note")));

            .
            .
            .
} 
```

如果您希望我再显示代码，请告诉我。这似乎很简单，但我找不到解决方案。

谢谢！

编辑

我解决了这个问题。我回答了下面的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:01:54.533

好的，我解决了这个问题（至少暂时）。

问题是我使用的是我自己创建的适配器类。它没有跟踪列表中的哪个项目与数据库中的项目相对应。我现在使用 SimpleCursorAdapter 重写了“fillData()”方法。

这是 OLD 实现，带有我自己的自定义适配器：

```
private void fillData() {
    String note;
    notes = new ArrayList<String>();

    // Populate arraylist with database data
    if (mCursor.moveToFirst()) {
        do {
            // Get current row's character and line
            note = mCursor.getString(mCursor.getColumnIndex("title"));
            Log.d(TAG, "Adding note: " + note);
            notes.add(note);
        } while (mCursor.moveToNext());
    }

    // Fill list with our custom adapter
    NoteAdapter adapter = new NoteAdapter(this, R.layout.note_row_layout,
            notes);
    setListAdapter(adapter);
} 
```

这是用 SimpleCursorAdapter 重写的同一个类：

```
private void fillData() {
    mFrom = new String[] { NoteDbAdapter.KEY_TITLE };
    mTo = new int[] { R.id.textNote };

    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.note_row_layout, mCursor, mFrom, mTo);

    setListAdapter(adapter);
} 
```

我创建自己的适配器类的原因是因为我在列表的每一行中都有一个复选框（用于多次删除）。

我现在的问题是，当用户决定在使用 SimpleCursorAdapter 时进行多次删除时，我是否能够获取每个复选框的状态（无论是否选中）？

谢谢。

# dynamics-crm-2011 - CRM 2011 插件注册工具上的过滤属性有什么作用？

> ID：13771813
> 
> 赞同：8
> 
> 时间：2012-12-07T22:09:30.147
> 
> 标签：dynamics-crm-2011

我假设对于更新插件，它指定了一个属性列表，如果更改，会导致插件触发。

因此，如果我针对 注册了一个插件`Foo`，并且只针对 指定了一个过滤属性`Bar`，那么每次`Foo`更新实体时，CRM 都会检查是否`Bar`已更新，如果有，它会运行我的插件。因此，使用下面的代码，我希望我的插件执行一次。

```
Foo foo = new Foo();
foo.Bar = 0;
foo.Id = service.Create(foo);
foo.Bar = 1;
service.Update(foo.Bar); // My plugin would execute
service.Update(foo.Bar); // Bar hasn't changed, I would assume the plugin will not  execute 
```

我的这个假设是对的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T08:21:48.113

虽然您的初始分析大致正确（即过滤属性仅在一个或多个过滤属性发生更改时才会触发插件），但这并不完全准确。

当实体发生变化时，例如联系人的电子邮件地址，平台（以及您的插件）仅接收增量。在我的示例中，`Target`InputParameter 中将有一个实体，它只包含一个属性 ( `email`)。即使联系人记录包含更多数据也是如此 - 只有更改的数据才会发送到平台。（顺便说一句，这是 Pre 和 Post 实体图像的用武之地，因为它们允许您访问未更改的实体上的值，而无需发出 Retrieve）。

因此，考虑到这一点，正确地说过滤属性意味着插件仅**在请求中存在一个或多个过滤属性**时才会触发。CRM ui 通常不会发送值，除非它已更改（强制提交会覆盖此行为）。在您的示例 Daryl 中，插件将触发两次，因为两个请求中都存在过滤属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T07:22:50.333

这是为了缩小插件的执行范围。仅当一个或多个注册属性发生更改时，插件才会触发。

# ios - 使用手势将图像从 UIWebView 保存到相机胶卷

> ID：13771814
> 
> 赞同：3
> 
> 时间：2012-12-07T22:09:33.050
> 
> 标签：ios, image, uiwebview, save

嗨，我在保存图像时有点卡住，我已经构建了一个手势并按照教程进行操作，但在实际保存图像的最后部分有点卡住了。任何帮助将不胜感激这是教程源

[http://bees4honey.com/blog/tutorial/how-to-save-an-image-from-uiwebview/](http://bees4honey.com/blog/tutorial/how-to-save-an-image-from-uiwebview/)

提前致谢

```
 UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doubleTap:)];
doubleTap.numberOfTouchesRequired = 2;
[self.myWebView addGestureRecognizer:doubleTap];

}

-(void) doubleTap :(UITapGestureRecognizer*) sender {
int scrollPositionY = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.pageYOffset"] intValue];
int scrollPositionX = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.pageXOffset"] intValue];

int displayWidth = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.outerWidth"] intValue];
CGFloat scale = myWebView.frame.size.width / displayWidth;

CGPoint pt = [sender locationInView:self.myWebView];
pt.x *= scale;
pt.y *= scale;
pt.x += scrollPositionX;
pt.y += scrollPositionY;

NSString *js = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).tagName", pt.x, pt.y];
NSString * tagName = [self.myWebView stringByEvaluatingJavaScriptFromString:js];

NSString *imgURL = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).src", startPoint.x, startPoint.y];
NSString *urlToSave = [self.myWebView stringByEvaluatingJavaScriptFromString:imgURL];

/// Stuck at this point to actually get the file 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:18:47.033

```
NSURL *url = [NSURL URLWithString:urlToSave];

UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];

UIImageWriteToSavedPhotosAlbum(image, <#id completionTarget#>, <#SEL completionSelector#>, <#void *contextInfo#>) 
```

您可以将 nil 传递给所有三个参数。所以你可以打电话

```
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

# java - Midlet 不是抽象的，不会覆盖抽象方法

> ID：13771818
> 
> 赞同：0
> 
> 时间：2012-12-07T22:09:41.797
> 
> 标签：java, midlet

每当我尝试实施时，我都会收到以下消息`CommandListener`。请让我知道我需要做什么？

> Midlet 不是抽象的，不会覆盖 CommandListener 中的抽象方法 commandAction(Command,Displayable)

```
package displaytest;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Form;
import javax.microedition.midlet.MIDlet;
import javax.microedition.lcdui.*;

public class Midlet extends MIDlet  implements CommandListener {

  private Display display = null;
  private Form form;

  public void startApp() {
    form = new Form("Hello World");
    String msg = "Hello World!  DisplayTest 12";
    form.addCommand(screen);
    form.addCommand(ok);
    form.append(msg);
    display = Display.getDisplay(this);
    display.setCurrent(form);
  }

  private Command screen, ok;

  public Midlet(){
    form = new Form("Command Form");
    screen = new Command("SCREEN", Command.SCREEN, 1);
    ok = new Command("OK", Command.OK, 4);
  }

  public void pauseApp() {

  }

  public void destroyApp(boolean unconditional) {
    notifyDestroyed();
  }

  public void okCom(){
    Alert ok = new Alert("OK Command", "OK Command Executed!", null, AlertType.INFO);
    ok.setTimeout(5000);
    display.setCurrent(ok, form);  
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:10:39.470

需要实现接口声明的方法，勾选[`CommandListener`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/CommandListener.html)需要实现接口声明的方法如下

```
void commandAction(Command c, Displayable d){
 // your logic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:13:53.163

您需要使类抽象，或覆盖抽象方法`commandAction(Command,Displayable)`。

# android - android：Timer.scheduleAtFixedRate()，速率不固定？

> ID：13771819
> 
> 赞同：1
> 
> 时间：2012-12-07T22:09:42.193
> 
> 标签：android, android-emulator, timer, timertask

我想让我的`View`班级每 1 秒绘制一次，因此我使用了`Timertask`and `Timer`，这是我的代码：

```
private TimerTask timerTask;
private Timer t = new Timer();
public void dataEmitter(){
    timerTask = new TimerTask(){
        @Override
        public void run() {
            postInvalidate();
        }
    };
    t.scheduleAtFixedRate(timerTask, 2000, 1000);
} 
```

但是后来我发现，这个方法虽然被反复调用，但是并不是固定的速率。有时它非常快，但有时它很慢。所以我想知道这是否只发生在模拟器上？如果没有，我如何在 Android 中以完全固定的速率调用方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:10:03.783

尝试这样称呼它：

```
t.scheduleAtFixedRate(timerTask, 0, 1000); 
```

您还必须确保 postInvalidate(); 方法的执行时间不会超过 1 秒。

# c++ - C++ 中向量的重新分配

> ID：13771823
> 
> 赞同：2
> 
> 时间：2012-12-07T22:10:05.890
> 
> 标签：c++, stl, vector

> **可能重复：**
> [在 C++ STL 中删除包含向量的动态分配对象](https://stackoverflow.com/questions/2670558/deleting-dynamically-allocated-object-that-contains-vector-in-c-stl)

我有这样的结构

```
struct foo {
  vector<int> myvector;
}; 
```

现在，我创建一个指向 foo 的指针，调整大小并将一些元素插入到向量中。

```
foo *myfoo = new foo;
myfoo->myvector.resize(100);
myfoo->myvector.push_back(0);
myfoo->myvector.push_back(1);
... // and so on 
```

现在，在 myfoo 超出范围之前，我必须释放分配给它的内存

```
delete myfoo; 
```

我的问题是这是否也会释放 myvector？我有这个特定的查询，因为现在 myvector 已调整大小，STL 库可能会在堆中分配容器。因此，当我释放 myfoo 时，我不希望分配给 myvector 的内存泄漏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T22:11:36.067

是的，删除`myfoo`也会破坏它的所有成员，包括`std::vector`. 重要的是要注意，如果你在里面有指针`foo`，只有指针会被销毁，而不是它们指向的对象（当然，除非你定义了一个为你完成这项工作的析构函数——你应该这样做！）。

标准规定，在执行析构函数后，任何非静态数据成员也将被销毁（第 12.4/8 节）：

> 在执行析构函数的主体并销毁主体内分配的任何自动对象后，类`X`的析构函数调用`X`的直接非变体非静态数据成员的析构函数、`X`直接基类的析构函数，如果`X`是最派生类 (12.6.2) 的类型，它的析构函数调用`X`的虚拟基类的析构函数。

该类`foo`有一个默认的析构函数，因为没有定义用户声明的析构函数（§12.4/4）：

> 如果一个类没有用户声明的析构函数，则析构函数被隐式声明为默认（8.4）。

的析构函数`myfoo`在它为`delete`d 时被调用（§5.3.5/6）：

> 如果*delete-expression*的操作数的值不是空指针值，则*delete-expression*将为要删除的对象或数组的元素调用析构函数（如果有）。

*删除表达式*是以下形式的表达式：

> `::`[选择] `delete` *强制转换表达式*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T22:13:06.487

调用`delete foo`将在 的所有成员上释放和调用析构函数（如果适用）`foo`，所以是的。如果它不以这种方式工作，该语言将难以使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T22:13:25.457

struct foo 只是保存向量的容器。无论如何，向量的项目都是单独分配的（通常在堆上）。

向量的析构函数删除堆上的实际向量，当对象被删除时，向量被销毁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T22:50:25.450

这是回答您的问题的代码示例。

```
#include <iostream>

struct bar {
    ~bar() {std::cout << "deleted bar" << std::endl;}
};

struct foo {
  bar b[10];  
};

int main() {
    foo* f = new foo();
    delete f;
} 
```

程序将打印“deleted bar” 10 次。

# android - 主页按钮之前的方法

> ID：13771827
> 
> 赞同：1
> 
> 时间：2012-12-07T22:10:34.970
> 
> 标签：android, home-button

我的android应用程序是一个客户端，当有人点击home键时，我想向服务器发送消息，而当用户变回应用程序时，我也想向服务器发送消息。如果我可以覆盖 HOME 按钮 keyEvent 或**仅**在应用程序进入后台时调用的任何方法，我可以发送消息并在单例中设置一个静态变量，每个 onStart() 都会检查它，所以基本上我只需要以某种方式“覆盖” HOME 按钮。我尝试了以下方法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HOME) {
        //...
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

它根本不起作用。我在里面放了一个断点，但是 HOME 按钮根本不会触发这个方法。（三星 Galaxy Ace，安卓 2.2.1）。

我也试图覆盖`onUserLeaveHint()`这样的：

```
@Override
protected void onUserLeaveHint() {
    //...
    super.onUserLeaveHint();
} 
```

但问题是，这个方法**不仅**会在我按下 HOME 按钮或应用程序中断时被调用，而且当我只是导航到另一个活动（并完成当前活动）时。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:15:19.587

可能想看看这个[Android Docs](http://developer.android.com/reference/android/app/Activity.html)

您正在寻找 onPause / onResume，基于该行

> 或仅当应用程序进入后台时才会调用的任何方法

该文档应该解释堆栈是如何工作的，这将允许您完成这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:15:26.463

这个问题没有一天的解决方案，因为android不允许你覆盖主页按钮。解决此问题的最简单方法是将代码放入 中`onPause`，但当然可以在不按下主页按钮的情况下调用它。

[这里](https://stackoverflow.com/questions/6693896/home-key-press-event-listener)的第二个（不接受）答案有一个有趣的解决方案，但我没有尝试过，所以我不确定它是否有效

# java - java.nio.MappedByteBuffer 的最大大小

> ID：13771833
> 
> 赞同：1
> 
> 时间：2012-12-07T22:11:04.690
> 
> 标签：java, nio, bytebuffer

我只想确保 MappedByteBuffer 的最大大小是 Integer.MAX_VALUE 并且无法创建大小为 0x80000000 的缓冲区。虽然这个范围内的索引可以用“int”类型的值来表示，但是这个大小是“java.nio”的规范不允许的，对吧？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:48:37.853

FileChannel.map() 的文档明确指出映射区域的大小不能大于 Integer.MAX_VALUE。该方法（可能）采用长参数以与其他文件 API 调用保持一致或用于未来扩展，但实际上 ByteBuffer 索引通常被定义为整数。

但是，您应该能够映射超出该值的区域*，*因此原则上您可以通过具有多个映射部分来映射更大的文件。

# mongodb - Mac 安装 MongoDB

> ID：13771839
> 
> 赞同：0
> 
> 时间：2012-12-07T22:11:39.620
> 
> 标签：mongodb

我使用 brew 安装了 mongoDB。创建数据库和权限。

```
Suns-MacBook-Pro:~ Dawn$ mongod
all output going to: /usr/local/var/log/mongodb/mongo.log
Suns-MacBook-Pro:~ Dawn$ mongo
MongoDB shell version: 2.2.2
connecting to: test 
```

5分钟后继续连接。任何建议这里有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:00:28.407

我会使用 --dbpath 来设置数据目录。示例：应首先创建 mongod --dbpath /var/mongodata /var/mongodata。

# javascript - jQuery：如果插入了额外的内容，则防止插件在令人兴奋的元素上重复使用代码

> ID：13771846
> 
> 赞同：0
> 
> 时间：2012-12-07T22:12:42.757
> 
> 标签：javascript, jquery, ajax, plugins

我希望标题清楚。

所以我有一个复杂的大插件，它将 div 转换为可排序的小部件，但我遇到了一些问题，如果有人向 DOM 广告一个新的 div，插件必须再次运行才能将新添加的 div 转换为一个小部件，但这意味着它将在所有已经转换的 div 上运行它。那么如何防止这种情况发生。可以检查被包装的元素，所以这没什么大不了的，但是效果和其他东西会运行几次（取决于向 DOM 添加了多少 div）。

我对如何使用插件有了一个简单的想法。（抱歉不能在这里发布完整的插件）

**不寻找包含检查添加类的解决方案，因为这个问题是动画等（如点击事件）**

// div（小部件）

```
<div class="widget">
    <div></div>
</div>

<div class="widget">
    <div></div>
</div>

...
...
... 
```

// 插件（基本思想）

```
;(function($, window, document, undefined){

    $.fn.plugin = function(options) { 

        options = $.extend({}, $.fn.plugin.options, options); 

            return this.each(function() {  

                var obj = $(this);

                // for this example we wrap the div
                obj.find(options.widgets).wrap('<div class="wrapped-widget"></div>');

                // add a link to the widget
                options.widgets.prepend('<a href="#" class="link">link</a>')

                // run the animation just once
                options.widgets.on('click', '.link', function(){
                    $(this).next().animate({height: 'toggle'});
                });

            });     
        };

        $.fn.plugin.options = {
            widgets: '.widget',
            // etc          
        };

})(jQuery, window, document); 
```

// 插件调用

```
$('body').plugin({widgets: '.widget'}); 
```

// 添加新的 div 到 DOM

```
$('#add').click(function(){
    $('body').append('<div class="widget"><a href="#" class="link">link</a><div></div></div>');
    $('body').plugin({widgets: '.widget'});
}); 
```

# c# - BinaryFormatter Deserialize 在反序列化 NetworkStream 时随机挂起

> ID：13771847
> 
> 赞同：0
> 
> 时间：2012-12-07T22:12:52.457
> 
> 标签：c#, .net, tcp, networkstream, binaryformatter

我试图在不掩盖真正问题区域的情况下尽可能多地省略代码。如果有人需要查看完整代码，请告诉我。

因此，我们构建了一个非常简单的 TCP 应用程序，可以减轻数据库连接，并处理来自单个节点的所有入站数据库请求。此代码处理大约 200,000 个连接（请求和响应），然后在接收请求时随机地挂在 BinaryFormatter.Deserialize 方法上。有没有人知道为什么会这样？

没有产生异常，它只是无限期地挂起。

**服务器代码：**

```
public class TCPServer
{
    /// <summary>
    /// The listener which listens for inbou nd requests.
    /// </summary>
    private TcpListener _tcpListener;

    /// <summary>
    /// The thread the inbound listener operates on.
    /// </summary>
    private Thread _listenerThread;

    private static object       _lockObject = new object();

    public TCPServer()
    {
        _tcpListener = new TcpListener( IPAddress.Any, 19926 );
        _listenerThread = new Thread( new ThreadStart( ListenForClients ) );
        _listenerThread.Start();
        //Get the server's ip so that the server can connect to its own database.
        DAL.ServerIP = GetLocalIP();
    }

    /// <summary>
    /// Waits for new clients to communicate.  When a new client request is heard,
    /// the connection is given its own processing thread.
    /// </summary>
    private void ListenForClients()
    {
        _tcpListener.Start();

        while( true )
        {
            TcpClient client = _tcpListener.AcceptTcpClient();
            Thread clientThread = new Thread( delegate()
            {
                //Pass in the Current Thread Number so that it can be locked in
                HandleClientComm( client );
            } );
            clientThread.Start();
        }
    }

    /// <summary>
    /// Handles all of the connections for requests.  After a request is recieved, the
    /// TcpClient is passed to this method in its own thread for processing.  This is
    /// where all of the magic happens.  Here we deserialize the NetworkStream and 
    /// use the resulting object to determine which request the client is making, and
    /// respond appropriately.
    /// </summary>
    /// <param name="client"></param>
    private void HandleClientComm( object client )
    {
        lock( _lockObject )
        {
            Response response = new Response();
            TcpClient tcpClient = (TcpClient) client;
            try
            {   
                NetworkStream clientStream = tcpClient.GetStream();

                IFormatter formatter = new BinaryFormatter();
                object result = formatter.Deserialize( clientStream );

                //Determine which type of request this is
                Response response = new Response();

                //Code Omitted, Determine which type of request, and use that to formulate the response.

                RespondToClient( tcpClient, response );
            }
            catch( Exception e )
            {
                response = new Response();
                response.ErrorMessage = e.ToString();
                RespondToClient( tcpClient, response );
            } 
        }
    }

    private void RespondToClient( TcpClient client, Response response )
    {
        try
        {
            IFormatter formatter = new BinaryFormatter();
            NetworkStream stream = client.GetStream();
            formatter.Serialize( stream, response );

            stream.Close();
            client.Close();
        }
        catch( Exception e )
        {
            throw e;
        }
    }
} 
```

**客户代码：**

```
public class TCPClient
{
    public static string ServerIP = "192.168.2.200";

    private static Response RequestTCP<T>(T request)
    {
        try
        {
            TcpClient client = new TcpClient();
            IPEndPoint serverEndPoint = new IPEndPoint( IPAddress.Parse( ServerIP ), 19926 );

            client.Connect( serverEndPoint );
            NetworkStream stream = client.GetStream();
            IFormatter formatter = new BinaryFormatter();

            formatter.Serialize( stream, request );
            Response response = ( Response ) formatter.Deserialize( stream );
            return response;
        }
        catch( Exception e )
        {
            return new Response( "Error with the Response: " + e.ToString() );
        }
    }
} 
```

# node.js - 使用 node.js (with express) 作为静态网络服务器

> ID：13771849
> 
> 赞同：1
> 
> 时间：2012-12-07T22:13:02.073
> 
> 标签：node.js, webserver, express

我希望将 node.js 与 express 一起使用来创建一个提供静态文件的 Web 服务器（而不是使用 Apache 之类的东西）。这是我到目前为止所拥有的：

```
var express = require('express');
var app = express();
var http = require('http');
var path = require('path');

app.configure(function() {
    app.use(express.static(path.join(__dirname, '/public')));
    app.use(app.router);
});

var server = http.createServer(app);

server.listen(4001); 
```

这可以通过浏览器访问公共文件夹中的任何内容。我有两个问题。

1.  当用户尝试访问不存在的文件时，如何使 node.js 提供 404 错误？
2.  然后我将如何选择我的主页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:26:31.670

看看现有的实现，比如[ecstatic](https://github.com/jesusabdullah/node-ecstatic)和[http-server](https://github.com/nodeapps/http-server)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:34:08.930

您可以使用`/public/index.html`文件创建主页 您可以通过添加之后创建 404 页面`app.router`

```
app.use(function (req, res) {
  res.send(404, 'File not found.')
}) 
```

或者你可以使用`res.render`或任何你想要的。

# php - 如果我将详细信息行合并到标题表中的单个列中会更快吗？

> ID：13771861
> 
> 赞同：1
> 
> 时间：2012-12-07T22:13:46.247
> 
> 标签：php, mysql, optimization, explode

所以我有一个以相册组织的图片库网站，所以存储相册图像的数据库表基本上有这个方案：

```
album_id | images_link
112      | 1.jpg
112      | 2.jpg
112      | 3.jpg
112      | 4.jpg
112      | 5.jpg
112      | 6.jpg
112      | 7.jpg
112      | 8.jpg
112      | 9.jpg 
```

* * *

因此，为了避免超长的数据库表，我想可能将专辑的所有图像存储到一个单元格中，如下所示：

```
album_id | images_link
112      | 1.jpg, 2.jpg, 3.jpg, 4.jpg, 5.jpg, 6.jpg, 7.jpg, 8.jpg, 9.jpg 
```

我的意思是数据库大小当然会保持不变，但要读取的行数会大大减少。我将使用explode 函数来拆分并提供每个图像文件链接。这是一个明智的选择吗？我不确定explode 函数是否像获取大型数据库一样占用内存。我想听听你的意见。

看到问题是图像名称不是那么短，images_link 行设置为 27 个字符，因此我设置的每个相册限制为 30 张图片，因此单个单元格预计稍后会达到 810 个字符。我从来没有使用 varchar 来存储这么多字节，在这种情况下使用 VARCHAR 还是 TEXT 更好？我知道 VARCHAR 更快。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:20:07.237

你的第一个方案比第二个更好。

更适合维护：

*   仅添加一行以放置新图像
*   仅删除一行以退出图像
*   如果要编辑图像的路径，只需更新该行...

稍后，如果您想列出带有第一张图片的画廊，您只需要做一个 JOIN ...

使用您的第二个架构，在类别表中有一个名为“list_of_images”的字段没有区别......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T22:19:53.853

不，不要那样做。拥有“超长数据库表”没有问题。将子项聚合到单个列中存在许多潜在问题。

您说“要读取的行数将大大减少”。您是否想象如果您不使用明细表，并且将所有内容都塞入标题表中，将会有某种速度提升？不会的。

你现在拥有它的方式就是它应该完成的方式。保持这种状态并继续学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:20:44.337

您应该保留原始表结构，因为维护 images_link 列将成为一场噩梦。当您想要删除album_id=112 和images_link=3.jpg 的行时会发生什么？

如果您想将读取简化为单行，请尝试使用 group_concat 进行查询

```
SELECT GROUP_CONCAT(images_link) FROM tbl_album_images WHERE album_id='112' 
```

应该返回

```
1.jpg,2.jpg,3.jpg,4.jpg,5.jpg,6.jpg,7.jpg,8.jpg,9.jpg 
```

编辑：我确信这很明显，但也要确保你在专辑 ID 上有一个索引

# c# - XElement 查询给出错误：“序列不包含元素”

> ID：13771864
> 
> 赞同：3
> 
> 时间：2012-12-07T22:13:59.170
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

我正在尝试查询此 xml：

```
<pageMap>
  <pageMapNode id="8039CE09-E7DA-47E1-BCEC-DF96B5E411F4">
    <pageMapNode id="79DC0E8A-82F1-47DF-836E-099665A7D2E3"></pageMapNode>
    <pageMapNode id="3B79FAAC-EB2D-41AC-A91E-12541D0EB377">
      <pageMapNode id="170A9FC3-C03E-4088-AC5E-93AA038E0114"></pageMapNode>
    </pageMapNode>
  </pageMapNode>
  <pageMapNode id="A34CADA7-317D-405C-8E8F-DB113F40407F"></pageMapNode>
</pageMap> 
```

这是我的功能：

```
protected string GetParent(Guid nodeId)
{
    XDocument doc = XDocument.Parse(GetXml());  // parses xml displayed above

    // returns the 5 page map nodes displayed above
    IEnumerable<XElement> nodes = doc.Descendants("pageMapNode");

    // error: "Sequence contains no elements"
    XElement node = doc.Descendants("pageMapNode")
        .Where(n => n.Attribute("id").ToString().ToLower() == 
            nodeId.ToString().ToLower()).Single();

    ...
} 
```

我传入的 nodeId 参数是正确的 - 我应该得到一个匹配，所以我不知道它为什么返回错误。

有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:29:27.553

`n.Attribute("id")`返回 XAttribute，而不是字符串。你需要`.Value`而不是`.ToString()`

```
XElement node = doc.Descendants("pageMapNode")
    .Where(n => n.Attribute("id").Value.ToLower() == 
        nodeId.ToString().ToLower()).Single(); 
```

你可以把它缩短为

```
XElement node = doc.Descendants("pageMapNode")
    .Single(n => n.Attribute("id").Value.ToLower() == 
        nodeId.ToString().ToLower()); 
```

# java - 有没有办法获得一个只有数字（没有小数、空格）和 Java 代码的 Android 软键盘？

> ID：13771865
> 
> 赞同：3
> 
> 时间：2012-12-07T22:13:58.793
> 
> 标签：java, android, ios, eclipse, android-softkeyboard

我有一个使用不同键盘布局的 iPhone 应用程序。有些是定制的，有些是内置的：

仅限数字：

![仅限数字](../Images/ee897e694204643166c3bad7dbbddd76.png)

小数点：

![小数点](../Images/7a1078ca455c77b709a0c10dabccdb9f.png)

ISBN 编号的自定义 X 按钮：

![ISBN 编号的自定义 X 按钮](../Images/484a120a05ccf0b0c242b51b50645e04.png)

我想在 Android 上做同样的事情，但即使是正常的`InputType.TYPE_CLASS_NUMBER`仍然包括小数、空格、逗号等。

![安卓](../Images/42170e5dc037d20b62f95cd6c1908bc6.png)

如何在 Android 中自定义键盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:29:19.817

我认为这个问题已经在 StackOverflow 上得到了回答。看这个：

[仅在 Android 软键盘上显示数字按钮？](https://stackoverflow.com/questions/3357302/only-show-number-buttons-on-soft-keyboard-in-android?rq=1)

@twaddington 是正确的，内置键盘无法满足您的要求。为了防止输入非数字，您可以做的一件事是在 XML 中为您的`EditText`.

```
android:inputType="phone"
android:digits="1234567890" 
```

如果您想在代码中而不是在 XML 中这样做，我认为这应该可行：

```
numericField.setInputType(Configuration.KEYBOARD_12KEY);
numericField.setKeyListener(new DigitsKeyListener()); 
```

要开发自己的数字软键盘，本[教程](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-creating-a-numeric-keypad-with-gridlayout/)可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:17:08.370

使用内置键盘是不可能的。你必须开发一个自定义软键盘，或者编写一个像键盘替代品一样工作的内联视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:26:28.317

请使用 inputType = "number"，然后您将只获得数字键盘。

```
<EditText android:inputType="number"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/> 
```

我希望它会帮助你。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T16:38:13.960

有一种方法。采用

```
numericField.setInputType(InputType.TYPE_NUMBER_VARIATION_NORMAL|InputType.TYPE_CLASS_NUMBER); 
```

它预计仅在 Holo 上使用数字键盘，并在较低版本上向后兼容数字键盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T15:41:53.867

似乎 Android 已经添加了我们正在寻找的功能。这是我用于简单 EditText 数字输入的 xml：

```
 android:inputType="numberPassword"
    android:digits="0123456789"
    android:singleLine="true"
    android:ems="4"
    android:textColor="@android:color/black"
    android:gravity="center" 
```

# c# - Windows 服务立即超时

> ID：13771871
> 
> 赞同：0
> 
> 时间：2012-12-07T22:14:40.837
> 
> 标签：c#, windows-services

我用 C# 编写了一个 Windows 服务。我可以在我的 64 位 Windows 7 机器上本地安装和运行它。

当我将它安装在我的远程虚拟专用服务器（Windows Server 2008 R2 Standard，64 位）上时，我得到以下信息：

“错误 1053：MyService 服务未及时响应启动或控制请求”

奇怪的是，此消息立即显示。显示此类消息需要 30 秒。

我检查了 Windows 事件日志，它没有显示更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:54:36.490

感谢您的所有回答！

事实证明，我没有安装 .net framework 4.5，这就是我的目标。

尽管如此，这是一个非常奇怪的错误，我对它的安装感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:28:53.043

您可能需要设置服务以登录服务器......这就是我必须做的

![在此处输入图像描述](../Images/fa04c91c41c59ae3bdc782b6b65060e4.png)

右键单击服务..转到属性并单击登录选项卡.....

然后单击“此帐户”单选按钮并输入服务器的凭据

# php - 如何从 mySQL 数据库中取出 ABCD 并将其制成饼图？

> ID：13771872
> 
> 赞同：0
> 
> 时间：2012-12-07T22:14:40.583
> 
> 标签：php, mysql, pie-chart

我有一个 MySQL 数据库，可以将响应回答为 A、B、C 或 D。我现在想从 MySQL 数据库中取出这些答案并将它们放入饼图中。这怎么可能，很容易？

我可以了解一下如何将它作为一个数组获取并解析该数组吗？但是如何访问这个数组？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:20:06.363

尝试这样的事情：

```
SELECT A, COUNT(A), B, COUNT(B) FROM answer GROUP BY answ; 
```

# sql - 相关子查询、聚合和分组

> ID：13771873
> 
> 赞同：0
> 
> 时间：2012-12-07T22:14:52.347
> 
> 标签：sql, postgresql

我在查询时遇到问题，我使用的是 postgresql 9.2。

我创建了一个返回键值、时间戳和间隔的视图，如下所示：

```
select * from foo.a;  -- My view and the results

 k  |         ts1            |  tm
 1  | 2011-12-08 06:46:00+00 | 01:00:00
 1  | 2011-12-08 09:14:00+00 | 01:00:00
 2  | 2011-12-08 02:00:00+00 | 02:00:00
 2  | 2011-12-08 05:00:00+00 | 02:00:00
 4  | 2011-12-08 10:06:00+00 | 02:00:00
 4  | 2011-12-08 13:31:00+00 | 02:00:00
 1  | 2011-12-11 03:00:00+00 | 01:00:00
 1  | 2011-12-11 04:49:00+00 | 02:00:00
 4  | 2011-12-11 10:06:00+00 | 02:00:00
 4  | 2011-12-11 13:31:00+00 | 02:00:00 
```

我的结果中有大约 8,000 行。现在，我想按键对区间和组求和，所以我这样做：

```
select k,
       sum(tm) as tm
  from foo.a
group by k; 
```

正如预期的那样，我的结果是：

```
k   |  tm
1   | 5:00
2   | 4:00
4   | 8:00 
```

我想更进一步并做到这一点（错误 - 错误：子查询使用外部查询中的未分组列'ts1'）。

```
select k,
       sum(tm) as tm,
       (select sum(tm) where ts1 > '2011-12-09')
        -- (select sum(tm) where ts1 > '2012-01-01')
        -- I need to the above on 5 different dates. 
  from foo.a
  group by k, 
```

期望的结果是：

```
k    |   tm   |  tm1
1    |  5:00  |  3:00
2    |  4:00  |  
4    |  8:00  |  4:00 
```

如果我将 ts1 添加到我的 group 子句中，它自然不会返回所需的结果 - 因为我不想按 ts1 分组，只有 k。我可以在聚合函数中使用 ts1 并且查询将运行并产生不良结果。

这有效：

```
select foo.a.k,
       bar.tm1,
       sum(tm)
  from foo.a
  left join
      (select k,
              sum(tm) as tm1
         from foo.a
        where foo.a.ts1 > '2011-12-09'
        group by k) as bar
  on foo.a.k = bar.k
  group by foo.a.k,
           bar.tm1; 
```

但是为相同的信息查询相同的视图似乎是错误的和不必要的。特别是，因为我必须这样做 5 次。

我的问题：是否有解决方法来对未分组的列执行相关查询？如果不是，有什么更好的方法来实现我想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:19:22.680

这是你想要的吗？

```
select k,
       sum(tm) as tm,
       sum(case when ts1 > '2012-01-01' then tm else 0 end) as tm_20120101
from foo.a
group by k 
```

# ssl - 在子域上使用 SSL 的 Azure 云服务

> ID：13771876
> 
> 赞同：2
> 
> 时间：2012-12-07T22:15:20.067
> 
> 标签：ssl, azure

我有一个 Azure 云服务设置如下：

```
<Sites>
  <Site name="Web" physicalDirectory="../SampleWebsite/">
    <Bindings>
      <Binding name="HttpIn" endpointName="HttpIn" />
    </Bindings>
  </Site>
  <Site name="Admin" physicalDirectory="../SampleWebsite/Admin">
    <VirtualApplication name="Admin" physicalDirectory="../SampleWebsite/Admin">
    <Bindings>
      <Binding name="HttpsIn" endpointName="HttpsIn"/>
    </Bindings>
  </Site>
</Sites>
<Endpoints>
  <InputEndpoint name="HttpIn" protocol="http" port="80" />
  <InputEndpoint name="HttpsIn" protocol="https" port="443" certificate="www.domain.com" />
</Endpoints>
<Certificates>
  <Certificate name="www.domain.com" storeLocation="LocalMachine" storeName="My" />
</Certificates> 
```

我正在尝试为[https://www.domain.com/Admin](https://www.domain.com/Admin)目录要求 SSL。但是，此配置允许在没有 SSL 的情况下连接到此 URL。有没有办法在 Azure 的子目录上要求 SSL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:57:37.243

如果您正在使用 MVC 并为您想要通过 SSL 强制执行的任何控制器和/或操作实现 [RequiresSSL] 属性，请使用 breischi 的答案。否则，您也可以使用 Url Rewrite 来完成任务（将规则添加到 web.config）：

```
<rule name="Force HTTPS" enabled="true">
    <match url="^.*/Admin/(.*)$" ignoreCase="false" />
    <conditions>
        <add input="{HTTPS}" pattern="off" />
    </conditions>
    <action type="Redirect" url="https://{HTTP_HOST}/Admin/{R:1}" appendQueryString="true" redirectType="Permanent" />
</rule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T23:41:38.477

如果 /SampleWebsite/ 包含 /Admin/ 子目录的所有代码，我认为没有办法阻止用户使用 HTTP 连接到它。我认为您在这里有几个选择：

1.  在应用程序级别强制实施 HTTPS。有很多方法可以做到这一点，具体取决于您的应用程序的组织方式。例如，如果您使用的是 ASP.NET [MVC，这里有一个选项](http://weblogs.asp.net/dwahlin/archive/2009/08/25/requiring-ssl-for-asp-net-mvc-controllers.aspx). 您还可以使用 Global.asax 处理程序中的代码或使用 HttpModule 或任何其他方式推出自己的解决方案。
2.  将 /Admin/ 子目录拆分到它自己的单独站点中。确保在 HTTP 上提供服务的站点没有 /Admin/ 站点的任何代码 - 那么它就无法提供该内容。在 .csdef 中设置一个单独的站点（您已经完成了很多工作）来为 /Admin/ 站点提供服务。

# php - 带有linkedin api和php的OAuthException

> ID：13771877
> 
> 赞同：1
> 
> 时间：2012-12-07T22:15:23.940
> 
> 标签：php, linkedin

我使用linkedin api 来检索关于我有他们ID 的人的信息。对于一个请求，它已成功完成，但如果它们是一个循环甚至 2 个请求，则错误在我的代码中：

```
function searchID($id,$oauth)
{
    $url = "http://api.linkedin.com/v1/people/id=$id";
    $oauth->fetch($url, array("format" => "json" ),OAUTH_HTTP_METHOD_GET);
    echo $oauth->getLastResponse();
}
foreach ($IDs as $value)
{
  echo $value . "<br />";
  searchID($value,$oauth);
  echo "<br />";
} 
```

致命错误：在 oauth->fetch 行中未捕获的异常 'OAuthException' 带有消息“无效的身份验证/错误请求（得到 404，预期的 HTTP/1.1 20X 或重定向）”。

并且： OAuthException: Invalid auth/bad request (got a 404, expected HTTP/1.1 20X or a redirect) in the same line 。

请问我该怎么办？

# plsql - PL/SQL 过程调用在匿名过程中工作，但不是存储过程

> ID：13771881
> 
> 赞同：0
> 
> 时间：2012-12-07T22:15:27.070
> 
> 标签：plsql

我以“dbdesign”以外的用户身份登录。当我登录时，以下代码在我的程序中运行（匿名过程）：

```
BEGIN
  dbdesign.pkg_developer_utils.create_schema_synonyms('MYSCHEMA');
END; 
```

以下代码不起作用：

```
CREATE OR REPLACE PROCEDURE regenerate_synonyms AS
BEGIN
  dbdesign.pkg_developer_utils.create_schema_synonyms('MYSCHEMA');
END; 
```

它给了我以下错误：

> PLS-00201：必须声明标识符“DBDESIGN.PKG_DEVELOPER_UTILS”

为什么这段代码在匿名过程中工作，但在存储过程中给出这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:30:04.177

这似乎是您的代码中的错字。消息说：

```
DBDESIGN_PKG_DEVELOPER_UTILS 
```

并不是

```
DBDESIGN.PKG_DEVELOPER_UTILS 
```

# ios - 想知道为什么这会不断崩溃？

> ID：13771882
> 
> 赞同：-2
> 
> 时间：2012-12-07T22:15:33.923
> 
> 标签：ios, logging, crash-reports

嗨，我刚刚将 Simpsons Tapped Out 更新到 4.0 版

Anywho每5分钟崩溃一次。这是我的崩溃日志。有谁知道它的确切含义或导致崩溃的原因。我之所以问，是因为我很好奇我是否可以做些什么来作为用户修复它。谢谢！！！

```
 Incident Identifier: 26C0FFA9-AB7E-4201-B120-E33790FF28AE
CrashReporter Key:   cd183bfeae20b2f5138f389b9804f3261bbd0408
Hardware Model:      iPhone5,2
Process:         Tapped Out [3267]
Path:            /var/mobile/Applications/5905994C-633C-419E-9359-666310E55EFE/Tapped Out.app/Tapped Out
Identifier:      Tapped Out
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-12-07 14:10:33.420 -0800
OS Version:      iOS 6.0.1 (10A525)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   Tapped Out                      0x00524cfc 0x43000 + 5119228
1   Tapped Out                      0x005495fa 0x43000 + 5268986
2   Tapped Out                      0x0054a5ca 0x43000 + 5273034
3   Tapped Out                      0x00520cf4 0x43000 + 5102836
4   Tapped Out                      0x00533ab6 0x43000 + 5180086
5   Tapped Out                      0x0052ec22 0x43000 + 5159970
6   Tapped Out                      0x0052ec22 0x43000 + 5159970
7   Tapped Out                      0x0052ec22 0x43000 + 5159970
8   Tapped Out                      0x0013cc40 0x43000 + 1023040
9   Tapped Out                      0x000900cc 0x43000 + 315596
10  Tapped Out                      0x0008fe7c 0x43000 + 315004
11  Tapped Out                      0x0051c598 0x43000 + 5084568
12  Tapped Out                      0x0056afa4 0x43000 + 5406628
13  Tapped Out                      0x0056c534 0x43000 + 5412148
14  QuartzCore                      0x39a8677c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 156
15  QuartzCore                      0x39a866d4 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 60
16  IOMobileFramebuffer             0x32dcdfd4 IOMobileFramebufferVsyncNotifyFunc + 152
17  IOKit                           0x3255d5aa IODispatchCalloutFromCFMessage + 190
18  CoreFoundation                  0x3a148888 __CFMachPortPerform + 116
19  CoreFoundation                  0x3a1533e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
20  CoreFoundation                  0x3a153386 __CFRunLoopDoSource1 + 134
21  CoreFoundation                  0x3a15220a __CFRunLoopRun + 1378
22  CoreFoundation                  0x3a0c5238 CFRunLoopRunSpecific + 352
23  CoreFoundation                  0x3a0c50c4 CFRunLoopRunInMode + 100
24  GraphicsServices                0x3a221336 GSEventRunModal + 70
25  UIKit                           0x339e228c UIApplicationMain + 1116
26  Tapped Out                      0x002d1b04 0x43000 + 2681604
27  Tapped Out                      0x00045844 0x43000 + 10308

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x39ed85d0 kevent64 + 24
1   libdispatch.dylib               0x32f6bd22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x32f67374 _dispatch_mgr_thread + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x39ed7e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39ed7fd0 mach_msg + 48
2   CoreFoundation                  0x3a1532b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3a15202c __CFRunLoopRun + 900
4   CoreFoundation                  0x3a0c5238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3a0c50c4 CFRunLoopRunInMode + 100
6   WebCore                         0x34f65a58 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x334630de _pthread_start + 306
8   libsystem_c.dylib               0x33462fa4 thread_start + 4

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x39ed7e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39ed7fd0 mach_msg + 48
2   CoreFoundation                  0x3a1532b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3a15202c __CFRunLoopRun + 900
4   CoreFoundation                  0x3a0c5238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3a0c50c4 CFRunLoopRunInMode + 100
6   Foundation                      0x32ac5098 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x32b48a3c __NSThread__main__ + 968
8   libsystem_c.dylib               0x334630de _pthread_start + 306
9   libsystem_c.dylib               0x33462fa4 thread_start + 4

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x39ee8594 __select + 20
1   CoreFoundation                  0x3a157474 __CFSocketManager + 676
2   libsystem_c.dylib               0x334630de _pthread_start + 306
3   libsystem_c.dylib               0x33462fa4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x39ee8d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33458ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x334587f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x33458680 start_wqthread + 4

Thread 6 name:  AURemoteIO::IOThread
Thread 6:
0   libsystem_kernel.dylib          0x39ed7e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39ed7fd0 mach_msg + 48
2   AudioToolbox                    0x3902c3a8 AURemoteIO::IOThread::Run() + 104
3   AudioToolbox                    0x3902e734 AURemoteIO::IOThread::Entry(void*) + 4
4   AudioToolbox                    0x38f6c442 CAPThread::Entry(CAPThread*) + 294
5   libsystem_c.dylib               0x334630de _pthread_start + 306
6   libsystem_c.dylib               0x33462fa4 thread_start + 4

Thread 7: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:16:50.060

这个崩溃报告是象征性的。如果没有随附的 dsym 文件（只有开发人员拥有），任何人都无法理解它。

# eclipse - 如何启动具有不同工作区的多个 Eclipse IDE？

> ID：13771888
> 
> 赞同：3
> 
> 时间：2012-12-07T22:16:07.383
> 
> 标签：eclipse, macos, launcher

我需要使用不同的工作区运行多个 Eclipse。对于 Mac，我可以使用`open -a Eclipse.app --args -data WORKSPACE`. 当我执行时`open -a Eclipse.app --args -data DIFFERENT_WORKSPACE`，我只是重定向到现有的 Eclipse。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T22:22:22.263

尝试：

```
open -n -a [PathToEclipse]/Eclipse.app --args -data DIFFERENT_WORKSPACE 
```

`-n`将打开应用程序的一个新实例，即使一个已经在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T09:59:12.803

您可以通过在其文件夹中为 Eclipse 应用程序创建一个假名并使用它来运行新的 Eclipse 实例来运行多个 Eclipse 实例

# javascript - 具有自执行功能的 setInterval

> ID：13771889
> 
> 赞同：2
> 
> 时间：2012-12-07T22:16:35.970
> 
> 标签：javascript, setinterval

我想在第一时间立即运行我的函数（没有超时）所以我这样做：

```
setInterval(function(){
    alert("Boo");
}(), 1000); 
```

该函数第一次执行，但在接下来的时间间隔内，什么也没发生。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T22:18:17.627

更好的问题是，您实际上想要实现什么？

`return`自调用函数没有任何内容，因此它将`undefined`隐式返回值，该值被传递给`setTimeout`. 在最初的电话之后，这条线看起来像

```
setInterval(undefined, 1000); 
```

显然，这没有任何意义，也不会继续调用任何东西。

您要么需要从自调用函数到`return`另一个函数，要么只是不使用自调用函数而只是传递函数引用。

* * *

更新：

你更新了你的问题。如果你想在 init 上运行一个函数“一次”，然后在间隔内使用它，你可以做类似的事情

```
setInterval((function() {
    function loop() {
        alert('Boo');
    };

    loop();
    return loop;
}()), 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:18:45.800

设置间隔需要函数引用，而不是函数返回的未定义。只需删除匿名函数末尾的“（）”即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T22:24:48.190

这是因为它是被调用的，而不是被传递的。如果您想要立即调用，只需给它一个名称，然后返回它。

```
setInterval(function foo() { 
    alert("boo"); 
    return foo; 
}(), 1000); 
```

这称为命名函数表达式。您应该知道，在大多数浏览器中，`foo`标识符仅在内部可用`foo`，但较旧的 IE 存在导致标识符泄漏到外部范围的问题。

这通常不是问题，但您在选择函数名称时应该注意这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T22:20:16.583

因为`setInterval`“看到”的是您的自动执行功能的**返回**`undefined`- .

试试这个：

```
 setInterval(function()
        {
             alert("Boo");
             return arguments.callee;

        }(), 1000); 
```

注意：
正如我讨厌懒惰指出的那样，[严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)`arguments.callee`是不允许的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T22:33:15.210

这是我过去所做的方法：

```
(function loop () {
   // do stuff
   window.setTimeout(loop, 1000);
})(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T22:21:01.623

您自己执行的函数不会返回用作 的参数的函数`setInterval`，因此它在调用之前显示警报，`setInterval`而不是`setInterval`本质上是无操作的。

`setInterval`如果你愿意，你可以看到 Firefox 抱怨空调用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-07T22:24:42.277

你可以这样写：

```
setInterval((function() {
    function boo() {
        alert("boo");
    };
    boo();
    return boo;
})(), 1000);​ 
```

但我建议您在区间之外声明该函数。

# html - 3 列布局，中间列内有 1 列 + RWD

> ID：13771891
> 
> 赞同：1
> 
> 时间：2012-12-07T22:16:45.640
> 
> 标签：html, css, responsive-design

我在试图弄清楚如何在 CSS 中完成此布局时遇到问题。我可以在下面的示例的左侧使用浮动右侧很好，但是我正在尝试解决它，因此在较小的屏幕尺寸下使用响应式网页设计我会在右侧得到结果。

![http://imgur.com/YYrWO](../Images/684490834da41fabc1166fbd6bf2458f.png)

也许这是漫长的一天，但我似乎不知道如何实现这一点。我的主要难题是让紫色框从全屏右上到更小的屏幕尺寸下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:21:59.253

你有任何我们可以查看的代码吗？您可以阅读有关`@media`css 属性的信息： [https ://mislav.net/2010/04/targeted-css/](https://mislav.net/2010/04/targeted-css/)

通过这种方式，您可以根据屏幕尺寸自定义响应式设计。

该解决方案应该可以解决您的问题，

[https://jsfiddle.net/7nshG/1/](https://jsfiddle.net/7nshG/1/)

你应该给`position:relative`容器，并且

```
position:absolute; 
bottom:0; 
```

到子 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T04:30:29.317

有很多方法。假设您不是首先从移动设备进行设计（并且您使用浮动来实现布局），然后对布局进行完全编码以满足您的桌面规格。

在移动断点处，将每个元素设置为 100% 宽度。浅蓝色容器中的内容会将紫色框推到页面下方。如果您使用浮点数对桌面布局进行编码，您可能需要求助于清除，但我对此表示怀疑。这是一个小提琴：

[http://jsfiddle.net/bresson/7nshG/13/](http://jsfiddle.net/bresson/7nshG/13/)

```
.container {
    max-width:300px
}
#blue {
    border-color: blue;
    border-style: solid;
    border-width: 1px;
    width:100%;
}
#blue p {
    margin-bottom: 20px;
}
#lightBlue {
    width:100%;
    height: 50px;
    border-color: lightBlue;
    border-style: solid;
    border-width: 1px;
}
#purple {
    border-color: purple;
    border-style: solid;
    border-width: 1px;
    height:100px;
    width:100%;
} 
```

# sql - SQL查询以搜索数据库中以某个2个字母开头的任何数据

> ID：13771900
> 
> 赞同：-1
> 
> 时间：2012-12-07T22:17:28.060
> 
> 标签：sql

有人知道如何创建查询来搜索表中以“ab”开头的任何条目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:19:25.387

你应该使用like语句

```
select * from table where columnName like 'ab%' 
```

编辑：在您的情况下，这应该可以解决您的问题

```
select * from GardenType where GardenType.GardenType like 'ab%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:20:41.183

有什么理由这行不通吗？

SELECT * from TABLE WHERE col1 like 'ab%' or col2 like 'ab%' or....

# foreign-keys - 参照完整性被破坏

> ID：13771901
> 
> 赞同：0
> 
> 时间：2012-12-07T22:17:30.793
> 
> 标签：foreign-keys, h2, corrupt, referential-integrity

我有一个数据库以某种方式以下列方式损坏：
表 A 中的一条记录在指向表 B 的外键列中有一个值，但 B 中不存在这样
的记录。数据库是在 h2 版本 1.3.152 中创建的，并且我用 1.3.170 恢复了它（在这篇文章的那一刻最新）。
恢复工具没有抱怨这一点也很奇怪（但问题没有解决）
关于为什么/如何发生的任何想法？
关于如何恢复的任何想法？

实际示例：

select * from punto where punto_id = 3309; --> 不返回任何东西

从tramo中选择* caseta_punto_id = 3309；--> 返回 1 条记录

punto.punto_id 引用 tramo.caseta_punto_id

[您可以在此处](http://dl.dropbox.com/u/23779791/corrupt.h2.db.gz)下载数据库的副本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:28:20.090

该数据库实际上是使用 2010 年的 H2 版本 1.2.140 创建的。（数据库文件中的“CREATE_BUILD”设置为 140，即使用版本 1.2.140。）

很难说参照完整性是如何受到侵犯的。该问题可能在数据库损坏时发生，或者可能[在禁用引用完整性时](http://h2database.com/html/grammar.html#set_referential_integrity)发生（如果曾经被禁用）。

[恢复工具](http://h2database.com/javadoc/org/h2/tools/Recover.html)旨在尽可能多地恢复数据库文件中的数据。它不能解决参照完整性问题。

有多种方法可以解决参照完整性问题。一种解决方案是删除多余的记录，另一种是添加缺失的记录。但是，我目前没有自动修复它们的方法。

# javascript - 如何从javascript中的字符串值中获取href =值的一部分？

> ID：13771906
> 
> 赞同：2
> 
> 时间：2012-12-07T22:17:46.923
> 
> 标签：javascript

我有一个包含超链接的字符串值。我只想要 url 之后的值，即：[http://start.somesite.net/media/videos/flash/12345.flv](http://start.somesite.net/media/videos/flash/12345.flv)。url= 之后的值是动态的，所以我如何获取该动态值并将其作为变量？

这是输入字符串值：

```
 <h4>
        <a href="http://www.somesite.com/season/?url=http://start.somesite.net/media/videos/flash/12345.flv"
    target="_blank">Download Episode 3</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:23:04.227

尝试：

```
var url = href.match(/url=(.+)/)[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:32:46.873

如果您使用的是 jquery，请尝试以下操作：

```
 var link=$('#id_of_the_tag_a').attr('href');
   var linkSplitted=link.split('?url=');
   var final=linkSplitted[1]; 
```

如果你愿意，你可以去[这里](http://jsfiddle.net/corvallo/ZGxMe/4/)看看结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:30:09.683

将字符串变成实际的锚点使处理 url 字符串变得轻而易举

```
var div = ​docu​ment.createElement('div');
div.innerHTML = '<a href="http://www.somesite.com/season/?url=http://start.somesite.net/media/videos/flash/12345.flv" target="_blank">Download Episode 3</a>'​​​​​​​​​​​

var a = div.querySelectorAll('a');
alert(a[0].search.split('=')[1]); 
```

​ 我喜欢这种方法，因为它可以让您在需要时获取各种信息：

```
a[0].protocol
a[0].hostname
a[0].hash
a[0].port
a[0].innerText 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:22:28.600

`var url = input_str.match(/url=([^"]+)"/)[1];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T22:23:03.010

```
document.getElementsByTagName("a")[0].href 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T22:26:50.313

一步一步：给你的标签一个ID。

```
var yourTag = document.getElementsById("your_tag_id"); //Get ref to your tag
var str = yourTag.getAttribute("href"); //Get the entire url
var arr = str.split("="); //Break in two parts.
str = arr[1]; //Take the second part. 
```

# php - 将字符串附加到最后一个 foreach 项目

> ID：13771907
> 
> 赞同：0
> 
> 时间：2012-12-07T22:17:56.177
> 
> 标签：php, arrays, foreach, jwplayer

我正在尝试创建一个 foreach，它将循环浏览给定的 YouTube 视频列表，以填充 JW Player 播放列表。JW Player 的语法结构允许包含多个视频来构建播放列表，但是当它到达最后一项时我需要进入 foreach 以关闭播放列表配置。

当不是动态生成时，JW Player 语法如下所示：

```
<div id='player_1465'></div>
                <script type='text/javascript'>
                  jwplayer("player_1465").setup({
                    height: 360,
                    listbar: {
                        position: 'right',
                        size: 320
                    },
                    width: 960,
                    playlist: [{
                        sources: [
                            { file: "http://www.youtube.com/watch?v=DeumyOzKqgI" }
                        ],
                        title: "Skyfall Lyric Video"
                    },{
                        sources: [
                            { file: "http://www.youtube.com/watch?v=diP-o_JxysA" }
                        ],
                        title: "Star Trek Into Darkness Announcement Trailer"
                    }]
                });
                </script> 
```

如您所见，播放列表中的每个“源”都以“},{”结尾，最后一个以“}]”结尾。我需要 foreach 知道它何时从给定数组加载了最终视频，并使用“}]”关闭播放列表部分。

到目前为止，我已经使用了动态生成的代码：

```
$clips = $tmdb->getMovieTrailers($tmdb_id);

<div id='player_1465'></div>
                <script type='text/javascript'>
                  jwplayer("player_1465").setup({
                    height: 360,
                    listbar: {
                        position: 'right',
                        size: 320
                    },
                    width: 960,
                    playlist: [{
                        <?php
                            foreach($clips['youtube'] as $yt){
                                echo 'sources: [
                                            { file: "http://www.youtube.com/watch?v=' . $yt['source'] . '" }
                                        ],
                                        title: "' . $yt['name'] . '"
                                        }]'
                            }
                        ?>
                    }]
                });
                </script> 
```

给予的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:28:55.830

您应该考虑为此使用 json_encode。

```
<?php
$clips = $tmdb->getMovieTrailers($tmdb_id);
$playlist = array();
foreach($clips['youtube'] as $yt) {
    $playlist[] = array(
                        'sources' => array(array('file' => 'http://www.youtube.com/watch?v=' . $yt['source'])),
                        'title' => $yt['name']
                  );
}
?>

<div id='player_1465'></div>
<script type='text/javascript'>
    jwplayer("player_1465").setup({
        height: 360,
        listbar: {
            position: 'right',
            size: 320
        },
         width: 960,
         playlist: <?=json_encode($playlist)?>
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:21:53.230

使用 count() 获取数组中的元素个数；现在您可以检查每个 foreach 循环是否是最后一个循环，并且可以添加您的括号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:26:17.413

尝试：

```
<?php
    $c = 0;
    foreach($clips['youtube'] as $yt){
        echo 'sources: [
        { file: "http://www.youtube.com/watch?v=' . $yt['source'] . '" }
        ],
        title: "' . $yt['name'] . '"';
        if($c = count($clips['youtube'])){
            echo '}]';
        } else {
            echo '},{';
        }
        $c++;
    }
?> 
```

# c# - 高效的字符串拆分

> ID：13771918
> 
> 赞同：-3
> 
> 时间：2012-12-07T22:18:52.790
> 
> 标签：c#

我对 c# 不是很熟练。我正在寻找一种以有效方式拆分字符串的方法。我有一个从客户端请求到服务器的 byte[64] 数组。我使用命令将其转换为刺痛

```
string d=Encoding.ASCII.GetString(buffer) 
```

在这个转换之后 d 是一个 64 长的字符串。在该字符串中，我有一部分专门用于客户端向服务器请求的命令类型和如下用户名：“！command username”。我想在 !command 之后拆分部分，但不是简单地使用 Split，因为使用 Split 会产生一个 56 长的字符串（用户名+很多 \0 字符）。我只想获得没有所有这些 \0 字符的用户名。有没有办法做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:23:04.853

尝试`d.Split(' ')[1].Trim((char)0);`

# .net - 云上的桌面 WPF 应用程序部署

> ID：13771928
> 
> 赞同：6
> 
> 时间：2012-12-07T22:19:34.420
> 
> 标签：.net, wpf, hosting, cloud

我花了很长时间使用 .NET 构建桌面 WPF 应用程序，而不是将其打包在 CD 中，我希望将其部署在云上，以便多个用户可以使用它，这样我更容易修补它只在一个地方。这可能吗？我真的不想更改整个代码，以便它适用于网络浏览器。有什么我可以使用的技巧。我知道 Windows Azure 有远程桌面选项。我能用那个吗。还有其他选择吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T11:56:39.493

我肯定会推荐查看[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d.aspx)，[这里](http://msdn.microsoft.com/en-us/library/31kztyey.aspx)是关于如何通过 Visual Studio 中的向导发布的指南。

如果您希望托管在 Azure 等云服务中，您也可以使用 ClickOnce 通过在 Azure 存储中托管捆绑包来实现，请在[此处](http://blogs.msdn.com/b/avkashchauhan/archive/2011/05/09/how-to-deploy-clickonce-application-using-windows-azure-storage-in-very-simple-steps.aspx)查看说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:09:37.993

你可以试试 [XBaps](http://msdn.microsoft.com/en-us/library/aa970060.aspx) 或[Roozz 插件](http://www.roozz.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:54:28.913

如果您希望将其部署在云上，那么我会推荐亚马逊云服务（AWS）。它有一个免费层，可使用一年。它还为您提供适用于 .NET 的 SDK 和适用于 Visual Studio 的工具包，以便轻松迁移到云。有关详细信息，请尝试这些链接

[http://aws.amazon.com/net/](http://aws.amazon.com/net/)

[http://aws.amazon.com/free/](http://aws.amazon.com/free/)

# php - 回显“选定”查询和问题

> ID：13771930
> 
> 赞同：-1
> 
> 时间：2012-12-07T22:19:40.717
> 
> 标签：php, html, mysql

我正在关注有关如何使用 option=selected 的 PHP 和 HTML 教程，但我很困惑。

这是我的代码：

```
<form name ="rating" method ="POST" action ="" /> 
<? echo "<input type = \"hidden\" name = accountID value = " . $row['accountID'] . ">";?>
<select name="rating">
    <? $values = array('','Very Bad','Bad','Average','Above Average');

    for ($i =0; $i < count($values); $i = $i + 1){
        echo "<option value = \"$i\"" . if ($rating == $i + 1) {echo "selected";} . "> $values[$i] </option>"; 
    }    
    ?>  
</select>
<input type ="Submit" name ="formSubmit" value ="Submit">
</form>    
<? 
```

我想要实现的是默认选择存储在数据库中的任何选项。我在代码中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:27:04.860

您在这行代码中至少缺少一个空格，并且您无法`if`按照您尝试的方式在字符串中添加语句。尝试这样的事情：

```
echo "<option value = \"$i\"" . (($rating == $i + 1) ? " selected" : "") . "> $values[$i] </option>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:30:26.367

确保以下比较是正确的：

```
if ($rating == $i + 1) 
```

我们无法从您提供的代码中判断 $rating 变量是什么。我希望，因为您为选项提供了价值：

```
value='$i' 
```

比较应该是：

```
if ($rating == $i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:44:10.410

试试这个，这将是你想要的

```
 <form name ="rating" method ="POST" action ="" > <?php

echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";

?>
    <select name="rating">

        <? $values = array('','Very Bad','Bad','Average','Above Average');

        for ($i =0; $i < count($values); $i = $i + 1){ ?>
            <option value = "$i"  <?php if ($rating == $i + 1) {echo " selected='selected'" ;} ?> > $values[$i] </option>
          <?php 
        }

        ?>

        </select>
        <input type ="Submit" name ="formSubmit" value ="Submit" />
        </form>

    <? 
```

编辑：

是的，这个变量`$rating`没有定义。所以试着这样定义它

```
 if (isset $POST['rating']) {$rating = $POST['rating'];}else {$rating = 0 ;} 
```

把它`form`放在php标签内的某个地方之前

# python - Python中的recv()

> ID：13771937
> 
> 赞同：7
> 
> 时间：2012-12-07T22:20:19.937
> 
> 标签：python, sockets

```
open_sockets = []

listening_socket = socket.socket( socket.AF_INET, socket.SOCK_STREAM )

listening_socket.bind( ("", 1234) )

listening_socket.listen(5)

while True:
    rlist, wlist, xlist = select.select( [listening_socket] + open_sockets, [], [] )
    for i in rlist:
        if i is listening_socket:
            new_socket, addr = listening_socket.accept()
            open_sockets.append(new_socket)
        else:
            data = i.recv(1024)
            if data == "":
                i.close()
                open_sockets.remove(i)
                print "Connection closed"
            else:
                i.send(data)
                print repr(data) 
```

现在我知道这是可以处理几个客户端的简单服务器代码 - 我唯一不明白的是这两行：

```
 data = i.recv(1024)
        if data == "": 
```

我知道当客户端已经接受时，它将转到另一个选项，即检查缓冲区中是否有东西的选项。我不明白为什么，当缓冲区中没有任何内容时，它会继续运行并且不检查该行：

```
if data == "": 
```

但是当客户端只是按下回车相当于`""`它断开连接

为什么当什么都没有被按下时它不一样`""`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T22:45:51.523

它从[`select`](http://docs.python.org/dev/library/select.html)通话开始。此函数监视设置套接字并等待值得注意的事情发生。对于第一个列表中的套接字，“值得注意”意味着该套接字有数据可供读取。

```
rlist, wlist, xlist = select.select( [listening_socket] + open_sockets, [], [] ) 
```

代码现在遍历具有可供读取的数据的套接字列表，并根据正在处理的套接字类型进行操作。

```
 for i in rlist:
        if i is listening_socket: 
```

面向连接（“侦听”）的套接字用于接受新连接。由于它在 中`rlist`，我们知道它有一些东西供我们“阅读”。在侦听套接字的上下文中，这意味着已接收到新连接。所以我们接受连接，并将新的套接字保存在`open_sockets`.

```
 new_socket, addr = listening_socket.accept()
            open_sockets.append(new_socket) 
```

如果套接字不是`listening_socket`，那么它是一个连接（或曾经）连接到远程客户端的套接字。再次，因为它在 中`rlist`，我们知道它有一些东西供我们“阅读”。在连接套接字的上下文中，这意味着数据实际上可以读取，或者套接字已关闭。

所以我们打电话`recv`来获取任何可用的数据，

```
 else:
            data = i.recv(1024) 
```

看看我们是否真的读过任何东西。如果没有数据可用，那么连接肯定已经关闭，所以我们关闭套接字对象并将其从`open_sockets`.

```
 if data == "":
                i.close()
                open_sockets.remove(i)
                print "Connection closed" 
```

如果我们确实收到了数据，我们只需将其写回客户端并将其打印在屏幕上。

```
 else:
                i.send(data)
                print repr(data) 
```

第一次调用`select`将等到收到连接。您可以通过将代码更新为自己来查看

```
print "About to call select"
rlist, wlist, xlist = select.select( [listening_socket] + open_sockets, [], [] )
print "Returned from select" 
```

第一次调用后，`rlist`将包括`listening_socket`. 我们知道这是因为`open_sockets`它是空的，并且 as called`select`不会返回，直到某些内容被读取为“读取”。所以我们接受新的连接并将其添加到`open_sockets`.

当`select`再次调用时，有三个可能的事件。首先，`listening_socket`可能已经收到另一个连接。在这种情况下，它像以前一样处理：我们接受连接并将其添加到`open_sockets`.

其次，新连接可能已经接收到数据。由于`select`包含在 中`rlist`，我们知道有数据准备好从套接字“读取”（意味着数据已准备好读取，或者套接字已关闭）。`i.recv`将返回新数据。

第三，新的连接可能已经关闭。由于`select`包含在 中`rlist`，我们知道有数据准备好从套接字读取（与上面的含义相同）。但`i.recv`将返回 "" 因为套接字没有任何新数据。所以我们知道套接字已经关闭，并进行相应的清理。

如果客户端没有发送数据（并且连接仍然打开），则不`select`会将其包含在`rlist`. 所以循环不会处理它，`i.recv`也不会在那个特定的套接字上被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T22:43:32.580

当套接字发送`""`响应时，这通常意味着套接字已关闭（或关闭？）。如果我在这里错了，请有人纠正我。如果没有该语句，如果远程服务器突然停止响应，它可能会陷入无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T01:06:17.137

`i`（顺便说一句，一个不幸的套接字名称）不会出现在 中，`rlist`除非有一些东西要读取，即`i.recv(1024)`返回*一些东西*或连接完成，即`i.recv(1024)`返回`b""`。

一旦`.recv()`返回`b""`，您将不会从这个套接字收到任何东西。

“客户端（人类）只需按下回车键”的解释取决于客户端（软件）。它与服务器无关，例如，客户端可以缓冲输入字符串，直到遇到换行符或发生超时，或者它可以在从用户接收到每个字节后立即发送，等等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-28T09:58:56.507

```
[root@pa ]# grep "banner_timeout = " /opt/panel-migrator/thirdparties/python/lib/python2.7/site-packages/paramiko/transport.py

self.banner_timeout = 60        # how long (seconds) to wait for the SSH banner 
```

# entity-framework - 具有 Web 窗体的实体框架在后面的代码中缺少属性

> ID：13771941
> 
> 赞同：1
> 
> 时间：2012-12-07T22:20:31.997
> 
> 标签：entity-framework, frameworks, entity, webforms

我正在尝试获取新插入记录的自动生成的 ID。使用后面的 C# 代码，我能够使用我的 SQL 数据库创建一个快速示例项目，并使用以下代码成功检索到值。但是在我的工作项目中，Intellisense 不会提供我需要的属性，实际上数据库中存在的任何属性都不会显示，即在 EDS_OnInserted 中，找不到“ContactID”：

```
 protected void EDS_OnInserted(object sender, EntityDataSourceChangedEventArgs e)
    {
        Contact myContact = e.Entity as Contact;
        Label1.Text = "ID = " + myContact.ContactID;
    }

<asp:EntityDataSource ID="EntityDataSource1" runat="server" 
    ConnectionString="name=CEntities" DefaultContainerName="CEntities" OnInserted="EDS_OnInserted" 
    EnableFlattening="False" EnableInsert="True" EntitySetName="Contacts">
</asp:EntityDataSource>
<br />
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="300px" 
    AutoGenerateRows="False" DataKeyNames="ContactID" 
    DataSourceID="EntityDataSource1">
    <Fields>
        <asp:BoundField DataField="ContactID" HeaderText="ContactID" ReadOnly="True" 
            SortExpression="ContactID" />
        <asp:BoundField DataField="LastName" HeaderText="LastName" 
            SortExpression="LastName" />
        <asp:CommandField ShowInsertButton="True" />
    </Fields>
</asp:DetailsView>
<br /><br />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

我不知道我的工作项目有什么不同。

# java - 用字符串替换字符串中的特定字符？

> ID：13771946
> 
> 赞同：1
> 
> 时间：2012-12-07T22:20:51.247
> 
> 标签：java, string, character

我有一个字符串，它是一个句子，我想`'t'`用字符串`"foo"`和.`'h'`替换该字符的所有实例`"bar"`。

```
String sentence = "The tea is hot."; 
```

我试图达到的最终结果：

```
"The fooea is fooobar." 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:24:40.260

由于这听起来像家庭作业，我不会给出完整的解决方案。

但这里有一个非常非常强烈的提示：[replaceAll()](http://www.roseindia.net/java/string-examples/string-replaceall.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:29:36.030

使用`replace`：

```
sentence = sentence.replace("t", "foo").replace("h", "bar"); 
```

`replaceAll`此处不需要时采用正则表达式（因此效率不如`replace`）。

* * *

**相关文件**

*   [`replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

# php - PHP：检查，哪些数组值大于 1（重复等）

> ID：13771947
> 
> 赞同：-3
> 
> 时间：2012-12-07T22:20:52.527
> 
> 标签：php, arrays, string

有一个数组：

```
Array
(
    [Apple] => 1
    [Banana] => 2
    [Orange] => 1
    [Pie] => 3
) 
```

我想检查一下，哪些数组值大于 1（重复等）并返回它们。

```
'Banana was found 2 times in the array, Pie even 3 times. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:24:03.977

您可以使用 array_filter 根据键/值过滤数组。它返回一个数组，其中仅包含与回调函数中的条件匹配的数组。

```
$greaterThanOne = array_filter($array, function($val){ return ($val > 1); });

foreach($greaterThanOne as $fruit=>$count){
    echo "$fruit was found $count times in the array.<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:24:42.763

你只需要迭代数组......

```
foreach ($array_with_fruits as $fruit=>$times){
    if ($times>1) { echo $fruit." was found ".$times." times"; }
} 
```

# sql - alter 命令与检查约束冲突（但没有行违反约束）

> ID：13771949
> 
> 赞同：1
> 
> 时间：2012-12-07T22:21:04.183
> 
> 标签：sql, sql-server, sql-server-2008, tsql, check-constraints

我正在尝试在 sql server 2008 上添加检查约束。运行此代码时出现以下错误：

```
alter table db.dbo.myTable add constraint
noWWWifProgramIsKnown check
(dbo.checkcountuniversalservice(A, B,
C)=0 and  program='WWW' ) 
```

引发错误：

> ALTER TABLE 语句与 CHECK 约束“noWWWifProgramIsKnown”冲突。冲突发生在数据库“db”、表“dbo.tableuniversalservice”中。

Marc_s 对 SO 的回答说这可能是 b/c 某些行违反了约束： [ALTER TABLE 语句冲突](https://stackoverflow.com/questions/8192857/the-alter-table-statement-conflicted)

但是，没有行违反约束，因为这将返回 0：

```
select COUNT(*) from db.dbo.tableuniversalservice 
where
(dbo.checkcountuniversalservice(A, B, C)=0
and 
program='WWW'
) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T23:00:06.487

我认为你的检查是倒退的......为了让约束通过，它应该评估为`TRUE`or to `UNKNOWN`。您的`SELECT`语句告诉您*没有行符合*约束，而不是告诉您*没有行违反*约束。

[来自 MSDN](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)：

> CHECK 约束拒绝评估为 FALSE 的值。

# css - 随内容增长的 CSS 选项卡

> ID：13771955
> 
> 赞同：1
> 
> 时间：2012-12-07T22:21:37.490
> 
> 标签：css, html, tabs, size

我的 CSS 选项卡有点问题。问题是，内容区域不会根据其中的内容而增长。这是css代码：

```
.tabs {
  position: relative;   
  min-height: 400px; 
  clear: both;
  margin: 25px 0;
}

.tab1 {
  float: left;
}
.tab2 {
  float: left;
}
.tab3 {
  float: left;
}

.tab1 label {
  background: white; 
  padding: 10px; 
  border: 1px solid #ccc; 
  margin-right:2px;
  position: relative;
  left: 1px; 
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  -moz-border-radius-topright: 15px;
  -moz-border-radius-topleft: 15px;

}

.tab2 label {
  background: white; 
  padding: 10px; 
  border: 1px solid #ccc; 
  margin-right:2px;
  position: relative;
  left: 1px; 
   border-top-right-radius: 15px;
   border-top-left-radius: 15px;
  -moz-border-radius-topright: 15px;
  -moz-border-radius-topleft: 15px;
}

.tab3 label {
  background: white; 
  padding: 10px; 
  border: 1px solid #ccc;  
  margin-right:2px;
  position: relative;
  left: 1px; 
   border-top-right-radius: 15px;
   border-top-left-radius: 15px;
  -moz-border-radius-topright: 15px;
  -moz-border-radius-topleft: 15px;
}

.tab1 [type=radio] {
  display: none;  
}
.tab2 [type=radio] {
  display: none;   
}
.tab3 [type=radio] {
  display: none;   
}

  .content1 {
  position: absolute;
  top: 28px;
  left: 0;
  background: #936;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 
}

  .content2 {
  position: absolute;
  top: 28px;
  left: 0;
  background: #09C;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 
}

  .content3 {
  position: absolute;
  top: 28px;
  left: 0;
  background: #990;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 
}

   .tab1 [type=radio] ~ label:hover
{
background: #936;
text-shadow:1px 1px 1px #000;
}
   .tab2 [type=radio] ~ label:hover
{
background: #09C;
text-shadow:1px 1px 1px #000;
}
   .tab3 [type=radio] ~ label:hover
{
background: #990;
text-shadow:1px 1px 1px #000;
}

.tab1 [type=radio]:checked ~ label
{
    background: #936;
  border-bottom: 1px solid white;
  z-index: 2;
}

.tab2 [type=radio]:checked ~ label
{
    background: #09C;
  border-bottom: 1px solid white;
  z-index: 2;
}

.tab3 [type=radio]:checked ~ label
{
    background: #990;
  border-bottom: 1px solid white;
  z-index: 2;
}

[type=radio]:checked ~ label ~ .content1 {
  z-index: 1;

}
 [type=radio]:checked ~ label ~ .content2 {
  z-index: 1;

}
 [type=radio]:checked ~ label ~ .content3 {
  z-index: 1;

} 
```

（对不起，它太长了）然后是 HTML：

```
<div id="page-wrap">
<div class="tabs">
  <div class="tab1">
    <input type="radio" id="tab-1" name="tab-group-1" checked="checked" />
    <label for="tab-1">One</label>

    <div class="content1">
      <p>Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here.</p>
    </div>
  </div>

  <div class="tab2">
    <input type="radio" id="tab-2" name="tab-group-1" /> <label for="tab-2">Two</label>

    <div class="content2">
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here. Some content here.
      Some content here. Some content here. Some content here.<br />
    </div>
  </div>

  <div class="tab3">
    <input type="radio" id="tab-3" name="tab-group-1" /> <label for="tab-3">Three</label>

    <div class="content3">
      <p>Stuff for Tab Three</p>
    </div>
  </div>
</div> 
```

`overflow: both;`我在里面试过，`.content`但它给了我滚动条，我希望内容区域本身增长。我什至试着打电话`.clear {clear: both;}`，但这似乎也不太好用。

我很感激任何帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:50:29.883

```
 .content1 {
    position:absolute;
  top: 28px;
  left: 0;
  background: #936;
  padding: 20px;
  border: 1px solid #ccc; 
    clear:both;
}

  .content2 {
   position:absolute;
  top: 28px;
  left: 0;
  background: #09C;
  padding: 20px;
  border: 1px solid #ccc; 
    clear:both;
}
  .content3 {
  position:absolute;
  top: 28px;
  left: 0;
  background: #990;
  padding: 20px;
  border: 1px solid #ccc; 
    clear:both;
} 
```

[http://jsfiddle.net/UDDkU/1/](http://jsfiddle.net/UDDkU/1/)

它仍然需要一些工作来显示和隐藏正确的选项卡，但您的溢出问题已得到修复。如果您希望所有选项卡具有相同的宽度，则需要添加一个。

**更新**

这是一个包含压缩 css 和完整选项卡的更新版本。

[http://jsfiddle.net/UDDkU/20/](http://jsfiddle.net/UDDkU/20/)

# graph - D3强制布局可以可视化多图吗？

> ID：13771956
> 
> 赞同：4
> 
> 时间：2012-12-07T22:21:48.737
> 
> 标签：graph, d3.js, visualization, social-networking, force-layout

似乎如果 D3 强制布局中的两个节点之间存在多个链接，则 D3 只会选择一个而忽略其他节点。是否可以可视化多图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-13T01:12:51.600

因此，事实证明 d3**确实**在节点之间渲染了多个链接，只是它将它们绘制在彼此之上。我解决这个问题的方法是将链接绘制为路径（而不是线），并为每条路径添加不同的曲线。这意味着每个链接对象都需要一些东西来将其与具有相同源节点和目标节点的其他对象区分开来。我的链接如下所示：

```
links: [
  {"source": 0,"target": 1,"count": 1}, 
  {"source": 1,"target": 2,"count": 1},
  {"source": 1,"target": 3,"count": 1}, 
  {"source": 1,"target": 4,"count": 1},

  // same source and target with greater count
  {"source": 1,"target": 4,"count": 2}, 
  {"source": 1,"target": 4,"count": 3}, 
  {"source": 1,"target": 4,"count": 4}
] 
```

然后路径渲染代码看起来像

```
function tick() {
  link.attr("d", function(d) {
    var x1 = d.source.x,
        y1 = d.source.y,
        x2 = d.target.x,
        y2 = d.target.y,
        dx = x2 - x1,
        dy = y2 - y1,
        // Set dr to 0 for straight edges.
        // Set dr to Math.sqrt(dx * dx + dy * dy) for a simple curve.
        // Assuming a simple curve, decrease dr to space curves.
        // There's probably a better decay function that spaces things nice and evenly. 
        dr = Math.sqrt(dx * dx + dy * dy) - Math.sqrt(300*(d.count-1)); 

   return "M" + x1 + "," + y1 + "A" + dr + "," + dr + " 0 0,1 " + x2 + "," + y2;
  });

  node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
} 
```

这是一个演示该方法的[jsfiddle 。](http://jsfiddle.net/bus3S/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T01:46:39.980

您可以通过创建一组链接将您的多重图简单地编码为一个图，其中每个链接都是以下形式的捆绑：

```
{"links": [/* one or more links*/], "source": …, "target": …} 
```

然后，您可以像往常一样运行强制导向布局来定位节点。然后，您需要适当地表示每个捆绑包，例如通过绘制平行线。

相关：Mike Bostock 使用了一个简单的技巧来表示[节点之间的两个平行链接](http://bl.ocks.org/3037015)，尽管这并不容易扩展到更多链接。

# javascript - 在 Backbone 中批量更新手动模型集

> ID：13771957
> 
> 赞同：1
> 
> 时间：2012-12-07T22:21:50.203
> 
> 标签：javascript, backbone.js

我有一个包含以下模型的集合：

```
rows: [
 id: 1
 category: 'Meetings & Banquets'
 progress: 0.8
,
 id: 2
 category: 'Guest Services'
  progress: '50%'
,
 id: 3
 category: 'Concessionaires'
 progress: '20%'    
,
 id: 4
 category: 'Telecommunications'
 progress: 100
,
 id: 5
 category: 'Restaurant'
 progress: '70%'                                                    
] 
```

我想像这样批量更新其中两个，并让绑定到视图的模型自行更新：

```
rows: [
 id: 1
 category: 'Meetings & Banquets'
 progress: 0.9
,
 id: 2
 category: 'Guest Services'
  progress: '10%'
,
] 
```

当我对集合执行 .add 或 .reset 时，它会阻止我添加/更新具有相同 ID 的模型。我有哪些选项可以批量更新这些模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:58:59.550

**编辑：**使用主干 0.9.9，您现在可以使用`add`带有选项的方法`{merge: true}`：

> [**添加** `collection.add(models, [options])`](http://backbonejs.org/#Collection-add)
> 
> 如果您将模型添加到集合中已经在集合中的模型，它们将被忽略，除非您传递 {merge: true}，在这种情况下，它们的属性将被合并到相应的模型中，触发任何适当的“更改”事件。

* * *

我不相信现在在骨干集合中有一个功能可以为你做这件事。也许您可以创建自己的？

```
MyCollection = Backbone.Collection.extend({
  model: MyItem,

  update: function(updatedArray) {
    var that = this;
    _.each(updateArray, function(element) {
      if(that.get(element.id)) {
        that.get(element.id).set(element);
      }
    });
  }
}); 
```

然后：

```
var collection = new MyCollection(rows); //creates your collection
collection.update(rows2);  //updates specific models. 
```

# c# - 替换/删除代码或 sql 中的文本

> ID：13771960
> 
> 赞同：2
> 
> 时间：2012-12-07T22:22:20.207
> 
> 标签：c#, .net, sql, text

作为数据导入过程的一部分，我们需要“按摩”文本以使其符合某些标准。该过程涉及从远程服务器下载 XML 文件，将数据插入“工作”表进行处理，然后将数据从“工作”表移动到活动表。

举个例子，我们想用直引号字符**(')替换斜引号字符****(')**的实例。

 **我们也想让这个相当容易扩展。如果我们需要添加新的替换/删除，则不需要重建导入过程项目。

我们团队有两种思想流派：

1.  **在代码中执行按摩。**在项目中有一个 XML 文件，其中包含我们要替换/删除的各种字符。每当我们需要添加新的替换/删除时，我们都可以更新文件。

2.  **在 SQL 中执行按摩。**当我们将数据从“工作”表传输到“活动”表时，通过一个 SQL 函数运行每个字段，该函数执行我们可以随时编辑的替换/删除。

一种方法比另一种方法“更好”吗？SQL方法会更快吗？在 SQL 中很难/不可能的代码中，我们是否可以更轻松地或完全可以做某些事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:44:43.703

如果有很多数据，我会考虑使用 SQL，因为一旦您了解了输入数据和更常见的替换或清理功能，这种方法可以被优化以更有效地扩展。如果您在代码中执行按摩，那么您几乎肯定需要对替换采取迭代方法，其中运行时间将随着数据量的增加而增加。

如果要处理的数据量足够小以至于性能不是问题，那么在代码中进行清理可能会给您更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:40:24.977

这是一个经典的 ETL 要求，我建议您查看 SSIS（如果您使用的是 MS SQL）。您可以使用 SQL 中的函数/存储过程来实现大多数事情，并且您仍然可以为一些您做不到的事情调用 CLR 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:32:18.633

我将在 SQL 中执行按摩，因为这可以通过存储过程来完成。如果您需要进行任何更改，存储过程更新将只需要执行一个脚本。

如果您在代码中处理数据，则需要执行构建和部署才能进行任何更改 - 比仅运行脚本成本高得多！

就更容易或更高效而言 - 这一切都取决于数据和代码质量。

要考虑的另一种选择是使用 XSLT，它是代码和文件转换文件的组合。**

# javascript - 为游戏建模 oop 层次结构

> ID：13771962
> 
> 赞同：1
> 
> 时间：2012-12-07T22:22:24.413
> 
> 标签：javascript, oop

我想开始一个html5游戏开发项目。
我从建模开始我的游戏项目。我想出了这样的事情。

```
Game

   Array of Entities
   Timer
   score
   some methods for initializing
   master draw
   master update

Entity

   Update
   Draw 
```

发生的情况是主方法（更新或绘制）在每个实体上调用更新/绘制方法。

该模型对我来说似乎足够干净，我开始编写代码，但后来我意识到不同实体之间无法进行通信。

一个实体的更新方法需要考虑其他实体的状态。

我已经使用相同的参数集对每个更新函数原型进行了编码，以便我可以遍历实体并轻松调用它们。

请有人提出解决问题的方法。应该对模型进行哪些更改？
另外，您如何更好地建模软件架构并对其进行扩展。你如何决定要抽象多少部分代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:42:53.843

好的......这是一个相当广泛的问题，你可能不会在这里得到明确的答案。但一般来说，您需要根据模型-视图-[其他] 来考虑您的游戏。这里 [Something else] 可以是["Controller"](http://en.wikipedia.org/wiki/Model_View_Controller)或["ViewModel"](http://en.wikipedia.org/wiki/Model_View_ViewModel)，或者介于两者之间的东西。

模型，正如 Model-View 模式所指的（不是你上面提到的），知道并维护游戏逻辑，而不是它的视觉表示。游戏逻辑包括分数、关卡、玩家等。游戏中的每个视图（视图可以是分数框或玩家角色）都有对模型的引用，并从模型中提取它需要渲染自己的信息。这就是你在视图之间共享信息的方式——通过一个集中的模型（有时模型有子模型，在复杂的游戏中，但从简单的开始，只有一个模型类）。

当你发现你的视图需要一些不是基于模型的逻辑协调时，那就是你引入控制器或 viewModel 逻辑的时候。

我敢肯定，如果你用谷歌搜索“游戏设计模式”（有或没有“javascript”），你会发现各种有趣的教程。

** 编辑： **

在您的情况下，您可能应该将**Game**视为您的控制器。在初始化时，它会实例化一个**Model**，这是你放置分数和计时器逻辑的地方（所以，不在**Game**里面。然后它会实例化**Entities**数组，给每个实体一个**Model**的实例。在更新方法中，**Game**会调用适当的方法来更新**Model**，然后调用`update()`每个**Entity ，这将从****Model**中读取状态并相应地重绘。

有一个变体，其中**Game**不调用`update()`实体，而是更改每个**Entity**订阅的**模型**触发事件。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T15:55:47.957

我以前也遇到过这个问题。我所做的是给一个实体一个对另一个玩家的引用（在只有两个实体的游戏中），和/或给实体一个对整个游戏模型的引用。通过为实体提供整个游戏模型，它可以看到其周围环境和周围的其他实体并采取相应的行动。**

# html - 一行三表

> ID：13771965
> 
> 赞同：1
> 
> 时间：2012-12-07T22:22:35.057
> 
> 标签：html, css-float, scrollbar, css-tables

在 HTML 中，我在一行中创建了三个表，但是当浏览器分辨率为 1024X768 时，一个表位于两个表的底部，并且页面不会创建滚动条。

其中一张表是向右浮动的，一张是向左浮动的，另一张是没有浮动的。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:30:28.270

我经常遇到类似的问题。你可以：

1.  开始使用绝对或相对定位
2.  在不同大小的表中创建表（我回家了，所以您使用的是 DIV 而不是 TABLE）
3.  别的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:35:52.533

这未经测试，但适用于 div。

将所有 3 个浮动到左侧并`<div style="clear:both;"></div>`在最后一个之后抛出一个。当然，您应该使用 css 类而不是内联样式，但您会明白我在说什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T20:53:36.177

您可以使用该`white-space`属性来防止换行：[小提琴](http://jsfiddle.net/rdiaz/PSYKf/1/)

# java - 用于测试的最小 postgres 实例

> ID：13771968
> 
> 赞同：9
> 
> 时间：2012-12-07T22:22:44.650
> 
> 标签：java, postgresql, testing, jdbc

我有一些通过 JDBC 与 postgres 数据库交互的代码。但是，出于测试目的，我只想快速创建一个新数据库并连接到它，而无需修改我的全局 postgres 安装、管理用户等。人们通常如何进行这种测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T23:40:22.780

我会找到`initdb`可执行文件并使用它来创建一个可由当前用户写入的新数据库实例临时存储。因为它是一个测试实例，所以使用类似`initdb --auth=trust --username=postgres -D /path/to/temp/datadir`这样的东西，新数据库被设置为接受连接而不需要密码。

用于`pg_ctl`启动服务器，指定一个端口以覆盖生成的默认设置`postgresql.conf`并避免冲突。

连接到新的数据库集群并执行所需的任何工作。在将控制权交给测试代码之前，您需要先以用户身份连接`postgres`并运行任何必需`CREATE USER`的命令。`CREATE DATABASE`

最后，使用`pg_ctl`停止它，最后删除数据目录。

您所需要的只是`initdb`和`pg_ctl`，`PATH`以及一个管理服务器的辅助类。

看：

*   [`initdb`](http://www.postgresql.org/docs/current/static/app-initdb.html)
*   [`pg_ctl`](http://www.postgresql.org/docs/current/static/app-pg-ctl.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-07T20:24:48.297

有几个库可以轻松创建 Postgres 的临时实例以进行测试：

*   [http://github.com/tk0miya/testing.postgresql](http://github.com/tk0miya/testing.postgresql)
*   [http://github.com/TJC/Test-postgresql](http://github.com/TJC/Test-postgresql)
*   [http://eradman.com/ephemeralpg](http://eradman.com/ephemeralpg)

所有这些都被设计为自动关闭和删除临时数据库。这是您可以用来`pg_tmp(1)`从 Java 创建最小 Postgres 实例的方法：

```
import java.io.*;
import java.sql.*;

public class test_pg
{
    public static void main(String args[])
    {
        try {
            Process p = Runtime.getRuntime().exec("pg_tmp -t");
            BufferedReader input = new BufferedReader
                    (new InputStreamReader(p.getInputStream()));
            String pg_uri = "jdbc:" + input.readLine();
            input.close();
            System.out.println("Using " + pg_uri);
            Connection conn = DriverManager.getConnection(pg_uri);
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery("select now()");
            while(rs.next()) {
                System.out.print(rs.getString(1));
            }
        } catch(IOException | SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:29:05.450

您可以在您的主目录中安装 Postgres 实例，在不同的端口和您的用户下运行。例如，请参见此处：

[http://www.bacula.org/manuals/en/catalog/catalog/Installi_Configur_PostgreS.html](http://www.bacula.org/manuals/en/catalog/catalog/Installi_Configur_PostgreS.html)

你也可以在 Heroku 上测试你的代码，这取决于它是什么。他们免费为您提供一个小型虚拟 Postgres 数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T20:29:52.800

# 虚拟机

您可以提前配置安装了[Postgres的](https://en.wikipedia.org/wiki/PostgreSQL)[操作系统](https://en.wikipedia.org/wiki/Operating_system)（例如[BSD](https://en.wikipedia.org/wiki/Berkeley_Software_Distribution)、[Linux](https://en.wikipedia.org/wiki/Linux)等）。将此模板用作要作为虚拟机启动的映像。

您可以使用[*Parallels*](https://en.wikipedia.org/wiki/Parallels_Desktop_for_Mac)、[*Fusion*](https://en.wikipedia.org/wiki/VMware_Fusion)或[*VirtualBox*](https://en.wikipedia.org/wiki/VirtualBox)等桌面虚拟化在本地执行此操作。

或者您可以在[DigitalOcean.com](https://en.wikipedia.org/wiki/Digital_Ocean)等 VM 服务中执行此操作。

# 数据库迁移工具

VM 启动并运行后（可能需要一分钟），然后使用[数据库迁移](https://en.wikipedia.org/wiki/Data_migration#Database_migration)工具（例如[*Flyway*](https://en.wikipedia.org/wiki/Flyway_(software))或[*Liquibase*](https://en.wikipedia.org/wiki/Liquibase)）安装架构、表、列和数据。

这些工具可以[清除您](https://flywaydb.org/documentation/command/clean)的内容数据库以供重复使用。有一个设置可确保此功能不能在生产中使用（！）。

请注意，这些工具可以自动创建数据库中的所有内容*，*但不能执行[`CREATE DATABASE`](https://www.postgresql.org/docs/current/sql-createdatabase.html). 为此，您需要编写一些其他脚本，或者已经创建了一个空的测试数据库。而且，正如我所说，您可以清除数据库以供重用。

# objective-c - NSFileManager moveItemAtPath:toPath:error: 更改文件名

> ID：13771969
> 
> 赞同：0
> 
> 时间：2012-12-07T22:22:53.937
> 
> 标签：objective-c, ios, macos, nsfilemanager

我有一个 importFile 存储在 NSString* importFile （用 NSLog %@ 打印）：

```
/var/mobile/Applications/5CE1D252-E56A-4AAC-B88E-5B0CEFFF55B3/Library/Caches/tmp/temp_695D39E3-3359-415F-9C0D-243E2E117B8B-456-0000001384C17BBA.tmpfile 
```

然后我收到一个destinationFile NSString *destinationFile 的值（用NSLog %@ 打印）

```
/var/mobile/Applications/5CE1D252-E56A-4AAC-B88E-5B0CEFFF55B3/Documents/Str%208829%20-%20Test.500887280 
```

然后我使用 NSFileManager 移动文件：

```
NSFileManager* fileManager = [NSFileManager defaultManager];
assert(fileManager != nil);
NSError* error = nil;
[fileManager moveItemAtPath:importFile toPath:destinationFile error:&error]; 
```

问题是移动后的实际文件名与请求的destinationFile不同：

```
Str%25208829%2520-%2520Test.500887280 
```

这里发生了什么 ？那些额外的三个 25 似乎有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:34:41.750

看起来`%`文件名中的 被编码为`%25`（百分比的百分比代码）

你可以看看这个： [URL-encoding and HTML-encoding NSStrings](https://stackoverflow.com/questions/1667206/cocoa-iphone-programming-encoding-decoding-nsstring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T08:28:39.860

您必须定义文件类型和扩展名。然后您只需将文件从一个目录移动到另一个目录...您也可以重命名文件

```
NSFileManager *manage = [NSFileManager defaultManager];

NSString *path = [NSHomeDirectory() stringByAppendingFormat:@"/Documents/%@",Text.txt];
NSString *newPath = [NSHomeDirectory() stringByAppendingFormat:@"/Documents/%@",newText.txt];

[manage moveItemAtPath:path toPath:newPath error:&error]; 
```

# testing - 不带引号的重定向链接代码

> ID：13771975
> 
> 赞同：-4
> 
> 时间：2012-12-07T22:23:08.817
> 
> 标签：testing

不带引号的重定向链接代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:43:57.710

您需要对链接进行编码。例如，如果这是您的链接：

```
http://example.com/test.php?val="quotations"&var=test 
```

`"quotations"`是`test`参数`GET`。通常你会在这里看到数字，但人们也经常输入单词。在这种情况下，每个值都有一个键，`val`并且`var`.

这些参数不能包含特殊字符（例如空格、问号或 & 号），但有时人们还是需要将它们放在那里。为了解决这个问题，编码器`urlencode`将其所有的 GET 参数。您可以使用该`urlencode()`函数在 PHP 中执行此操作。

```
echo 'http://example.com/test.php?val=' . urlencode('"quotations"') . '&var='. urlencode('test');
//  http://example.com/test.php?val=%22quotations%22&var=test 
```

如果你只需要这样做一次，你可以在这里编码：

[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T22:25:57.543

使用 PHP，您可以使用`str_replace`：

```
$url = 'http://www.domain.com/"/';
$url = str_replace('"', '', $url); 
```

# c# - google gcm 没有使用 PushSharp 作为我的服务器发送消息

> ID：13771976
> 
> 赞同：1
> 
> 时间：2012-12-07T22:23:11.893
> 
> 标签：c#, push-notification, google-cloud-messaging

我已经完成了所有设置并在 android 设备上工作。它检索一个我认为是有效的令牌，然后将其传递给我的服务器，并将其存储在数据库中。

然后我使用 PushSharp 库将我的消息推送到我的设备。我知道 PushSharp 已成功连接到 google，因为如果我输入无效的服务器密钥，我会得到一个未经授权的异常。OnNotificationSent 事件正在触发，我正在使用 NLog 记录该结果，它说它正在成功发送我的通知。但是，我没有收到我的 Evo 4g 手机的通知。我已经尝试了两个 Evo 4g，结果相同。我在两部手机上都登录了我的谷歌帐户，当我在一部手机上运行 android 应用程序时，设备令牌会更新为该设备令牌，然后我在另一部手机上运行它，它会发生变化，因此一切似乎都井井有条.

当我在报告部分查看 google api 仪表板时，它说我总共有 0 个请求。老实说，我什至不确定它应该在那里报告什么，但我只能假设它报告了通过该服务的任何消息。

我是否错过了谷歌 api 上某处的设置来“打开它”或其他什么？

在一天的大部分时间里，我一直在与 android 方面作斗争，终于在大约 2 小时前开始了它。我让 PushSharp 用于苹果通知以及所有意图和目的，它看起来应该与 google gcm 一起使用，但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:47:23.770

我把这个整理好了。我没有正确处理 onMessage 中的通知。

# c# - 通过 IHUAPI 检索 Proficy Historian 标记名称

> ID：13771980
> 
> 赞同：1
> 
> 时间：2012-12-07T22:23:43.600
> 
> 标签：c#, historian, proficy

使用 Proficy Historian 的 c# User API 包装器，我如何检索所有（或过滤列表）标签名称？

我找到了方法 ihuFetchTagCache，它填充缓存返回标签计数，但我找不到访问此缓存的方法。

到目前为止我的代码：

```
string servername = "testServer";
int handle;
ihuErrorCode result;
result = IHUAPI.ihuConnect(servername, "", "", out handle);
if (result != ihuErrorCode.OK)
{//...}

int count;
result = IHUAPI.ihuFetchTagCache(handle, txtFilter.Text, out count);
if (result != ihuErrorCode.OK)
{//...} 
```

如何读取标签名称缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T01:28:50.820

使用 4.5 及更高版本提供的新标签缓存方法实际上更好。这是我使用的 DLL 导入定义。¹

```
[DllImport("ihuapi.dll", EntryPoint = "ihuCreateTagCacheContext@0")]
public static extern IntPtr CreateTagCacheContext();

[DllImport("ihuapi.dll", EntryPoint = "ihuCloseTagCacheEX2@4")]
public static extern ErrorCode CloseTagCacheEx2(IntPtr TagCacheContext);

[DllImport("ihuapi.dll", EntryPoint = "ihuFetchTagCacheEx2@16")]
public static extern ErrorCode FetchTagCacheEx2(IntPtr TagCacheContext, int ServerHandle, string TagMask, ref int NumTagsFound);

[DllImport("ihuapi.dll", EntryPoint = "ihuGetTagnameCacheIndexEx2@12")]
public static extern ErrorCode GetTagnameCacheIndexEx2(IntPtr TagCacheContext, string Tagname, ref int CacheIndex);

[DllImport("ihuapi.dll", EntryPoint = "ihuGetNumericTagPropertyByIndexEx2@16")]
public static extern ErrorCode GetNumericTagPropertyByIndexEx2(IntPtr TagCacheContext, int Index, TagProperty TagProperty, ref double Value);

[DllImport("ihuapi.dll", EntryPoint = "ihuGetStringTagPropertyByIndexEx2@20")]
public static extern ErrorCode GetStringTagPropertyByIndexEx2(IntPtr TagCacheContext, int Index, TagProperty TagProperty, StringBuilder Value, int ValueLength); 
```

然后你可以使用下面的代码。

```
IntPtr context = IntPtr.Zero;
try
{
    context = IHUAPI.CreateTagCacheContext();
    if (context != IntPtr.Zero)
    {
        int number = 0;
        ihuErrorCode result = IHUAPI.FetchTagCacheEx2(context, Connection.Handle, mask, ref number);
        if (result == ihuErrorCode.OK)
        {
            for (int i = 0; i < number; i++)
            {
                StringBuilder text = new StringBuilder();
                IHUAPI.GetStringTagPropertyByIndexEx2(context, i, ihuTagProperties.Tagname, text, 128);
                Console.WriteLine("Tagname=" + text.ToString());
            }
        }
    }
}
finally
{
    if (context != IntPtr.Zero)
    {
        IHUAPI.CloseTagCacheEx2(context);
    }
} 
```

* * *

¹*请注意，我没有使用 GE 提供的 DLL 导入定义，因此我的代码看起来可能略有不同，但差异应该是微不足道的。*

# spring - 将 RESTEasy 2.0.1.GA 升级到 2.3.0.GA org.jboss.resteasy.plugins.spring.SpringContextLoaderListener 异常

> ID：13771983
> 
> 赞同：1
> 
> 时间：2012-12-07T22:23:54.807
> 
> 标签：spring, resteasy

我试图将使用 REASTEasy 2.0.1.GA 的 Web 应用程序更新到 2.3.0.GA 或更高版本。我遇到了加载问题`org.jboss.resteasy.plugins.spring.SpringContextLoaderListener`

我猜失败不会加载我的spring bean，因此我遇到了找不到org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter 的类的问题。该类位于类路径中（来自 spring-orm-3.0.6.RELEASE.jar），所以我认为还有其他事情发生。有任何想法吗？下面是我的 web.xml 和堆栈跟踪。

**Tomcat 7 启动：**

```
 INFO: Initializing Spring root WebApplicationContext
    Dec 7, 2012 2:12:57 PM org.apache.catalina.core.StandardContext listenerStart
    SEVERE: Exception sending context initialized event to listener instance of class org.jboss.resteasy.plugins.spring.SpringContextLoaderListener
    org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [${jpa.vendor.adapter}] for bean with name 'jpaVendorAdapter' defined in class path resource [spring/gen2-context-api.xml]; nested exception is java.lang.ClassNotFoundException: ${jpa.vendor.adapter}
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1261)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1330)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:396)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:390)
        at org.jboss.resteasy.plugins.spring.SpringBeanProcessor.findResteasyRegistrations(SpringBeanProcessor.java:283)
        at org.jboss.resteasy.plugins.spring.SpringBeanProcessor.postProcessBeanFactory(SpringBeanProcessor.java:220)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:603)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.jboss.resteasy.plugins.spring.SpringContextLoaderListener.contextInitialized(SpringContextLoaderListener.java:44)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:559)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1399)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:849)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:351)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.ClassNotFoundException: ${jpa.vendor.adapter}
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1282)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1253)
        ... 47 more
    Dec 7, 2012 2:13:06 PM org.apache.catalina.core.ApplicationContext log
    INFO: Closing Spring root WebApplicationContext
    Dec 7, 2012 2:13:06 PM org.apache.catalina.core.ApplicationContext log
    INFO: Shutting down log4j 
```

**网页.xml：**

```
//Listeners and servlets only
 <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>   
    <listener>
        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
    </listener>
    <listener>
        <listener-class>org.jboss.resteasy.plugins.spring.SpringContextLoaderListener</listener-class>
    </listener>
    <!-- newly added -->
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
 <servlet>
        <servlet-name>Resteasy</servlet-name>
        <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
    </servlet>    
 <servlet-mapping>
        <servlet-name>Resteasy</servlet-name>
        <url-pattern>/consumer/rest-api/*</url-pattern>
    </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T00:13:30.233

RestEasy 有问题`SpringContextListener`。它不处理属性占位符 -`${...}`请参阅[RESTEASY-787](https://issues.jboss.org/browse/RESTEASY-787)。

```
Caused by: java.lang.ClassNotFoundException: ${jpa.vendor.adapter} 
```

有`${jpa.vendor.adapter}`应该用一些类定义替换。

您必须将 RestEasy 替换`SpringContextListener`为默认值`org.springframework.web.context.ContextLoaderListener`，并在您的 spring XML 配置中声明 bean，如下所示：

```
<bean class="org.jboss.resteasy.plugins.spring.SpringBeanProcessorServletAware"/> 
```

然后它应该工作。

# java - 在 Java 中，如何将字符串转换为 JSON 对象？

> ID：13771989
> 
> 赞同：1
> 
> 时间：2012-12-07T22:24:20.143
> 
> 标签：java, android

字符串是这样的：

```
[{"Id":287,"Name":"aaaaaaaa","ProjectType":"GP"}, ... snip ...] 
```

这个 STRING 还不是 JSON，因为它是一个字符串，即使它是作为 JSON 提供的。

我正在尝试将其转换为可以在我的 Java 应用程序中使用的结构。

有人可以帮我吗？到目前为止我发现的例子对我来说并不适用。基本上，我希望能够遍历列表中的字典。

我最近尝试将字符串转换为 json，是这样的：

```
JSONObject data = new JSONObject(json_string); 
```

然而，这又回来了`null`。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:31:54.060

看看使用 Gson Lib - 它非常擅长处理这类事情。如果您使用泛型实现它，您可以创建一组序列化程序，让您可以非常好地从移动 API 导入数据。如果您想了解有关示例实现的更多信息，请告诉我

来源： [http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

文档： [https ://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T23:52:08.750

```
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;

JsonElement json = new JsonParser().parse("[{\"Id\":287,\"Name\":\"aaaaaaaa\",\"ProjectType\":\"GP\"}]");
        if(json.isJsonArray()) {        
            for(JsonElement elem : json.getAsJsonArray()) {
                //elem.getAsJsonObject().get("Id")
            }
        } else if (json.isJsonObject()) {
            //json.getAsJsonObject()
        } //other else cases for JsonNull, ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:47:44.877

为了配合 Gson 的答案，我建议[jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)。以我的经验，它更快且易于使用。

```
ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
Map<String, Object> myMap = mapper.readValue(myJSONString, Map.class); 
```

在您的情况下，JSON 是一个列表（我不确定这是否作为“根”元素合法）您需要做`List<Map<String, Object>> myList = mapper.readValue(myJSONString, List.class);`

# python - Python多线程队列突然停止做任何事情

> ID：13771990
> 
> 赞同：0
> 
> 时间：2012-12-07T22:24:24.837
> 
> 标签：python, multithreading, queue

我有一个文件，其中包含我要处理的 600K+ 行内容。
所以我使用多线程来加速这个过程。
但问题是，例如我使用 50 作为线程数，在处理 50 行之后，脚本什么也不做。它不会终止，也不会显示任何其他内容。

这是我的参考代码：

```
#!/usr/bin/env python

from __future__ import print_function
import re
import sys
from Queue import *
from threading import Thread, Lock

#struct parameters
if len(sys.argv) != 3:  # the program name and the two arguments
    # stop the program and print an error message
    sys.exit("Usage: python " + sys.argv[0] + " filename maxthreads")

accountlist = sys.argv[1]
maxthreads = int(sys.argv[2])

def dojob(email, password):
    #here is some job to process all my users data
    #end dojob

#this function will process the items in the queue, in serial
def processor():
    if queue.empty() == True:
        print ("the Queue is empty!")
        sys.exit(1)
    try:
        job = queue.get()
        job = job.strip('\r\n')

        newdata = job.split(':')

        email = newdata[0]
        password = newdata[1]

        #pass to dojob and process
        print("Processing:", email)

        dojob(email, password)

        queue.task_done()

    except:
        print ("Failed to operate on job")

#set variables
queue = Queue()
threads = maxthreads

#a list of job items. you would want this to be more advanced,like reading from a file or database
jobs = open(accountlist)

#iterate over jobs and put each into the queue in sequence
for job in jobs:
    print ("inserting job into the queue:", job)
    queue.put(job)

#start some threads, each one will process one job from the queue
for i in range(threads):
    th = Thread(target=processor)
    th.setDaemon(True)
    th.start()

#wait until all jobs are processed before quitting
queue.join() 
```

任何想法都是为什么它只是停止这个过程。

样本输出：

```
 #for example thread is 2
 inserting job into queue: user@domain.com
 inserting job into queue: user2@domain.com
 inserting job into queue: another@domain.com
 (...until the end of the file...)
 #once everything was added to the queue, is starts processing.
 processing: user@domain.com
 processing: user2@domain.com
 #then here the problem occurs, it doesnt do anything else.
 #it doesnt continue to the next queued job. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:28:25.957

听起来你需要一个循环`processor()`：

```
def processor():
    while not queue.empty():
        try:
            job = queue.get()
            ... 
```

否则，每个线程处理一个作业并停止。

> 我使用多线程来加快进程。

根据处理的性质，您可能会或可能不会从使用多个线程中获得任何加速。这与[全局解释器锁（GIL）](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)有关。如果您发现由于 GIL 而没有获得任何加速，您可能需要考虑使用该[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)模块。

# c# - 如何通过 WebRequest 调用 MVC 操作并通过 Active Directory 验证请求？

> ID：13771992
> 
> 赞同：1
> 
> 时间：2012-12-07T22:24:33.317
> 
> 标签：c#, asp.net-mvc-3, web-services, authentication, active-directory

我知道标题是拗口的。我已经把大部分东西都准备好了。我只需要确认我是否可以做我正在尝试的事情。

我正在使用 ASP.NET MVC 3。我有一个具有控制器的应用程序，我像 Web 服务一样使用它。控制器上有一个方法，它返回一个字符串，即 json。此方法根据活动目录对用户进行身份验证。

对上述执行WebRequest的应用程序也是MVC应用程序。此应用程序（为了在没有特定用户名和密码的情况下查询 AD）在 web.config 中使用模拟。应用冒充一个有权限查询AD的账号；但是，页面上用户的信息（例如他们所在的组）是我验证的依据。

简而言之（我并不完全理解这部分），模拟是严格的，因此 ASP.NET 可以查询 Active Directory。当我查询活动目录以获取他们的信息时，加载页面的用户仍然被视为他们自己。

AD 代码如下所示（此代码有效）：

```
 public static ADUserInfo GetUserInfo(IPrincipal User)
    {
        StringBuilder userAdInfo = new StringBuilder();
        ADUserInfo userInfo = new ADUserInfo();
        String domain = ConfigurationManager.AppSettings["ADdomain"];

        try
        {
            using (var context = new PrincipalContext(ContextType.Domain, domain))
            {
                if (User == null)
                    userAdInfo.AppendLine("User is null.");
                else if (User.Identity == null)
                    userAdInfo.AppendLine(" User is not null. User.Identitiy is.");
                else
                    userAdInfo.AppendLine(" Neither User nor User.Identity is null. " +
                        User.Identity.Name);

                using (var user = UserPrincipal.FindByIdentity(context, User.Identity.Name))
                {
                    userInfo.FullName = user.Name;
                    userInfo.Email = user.EmailAddress;
                    userInfo.AssociateId = user.EmployeeId;
                    userInfo.DomainName = User.Identity.Name;
                    userInfo.SamAccountName = user.SamAccountName;
                    userInfo.DistinguishedUserName = user.DistinguishedName;
               }
            }
        }
        catch (Exception e)
        {
            LogUtil.WriteException(e);
        }
        return userInfo;
    } 
```

此应用程序的 IIS 站点不允许匿名访问。

使用 AD 信息的服务方法工作正常。问题似乎是通过 WebRequest 传递凭据以调用此方法并返回 JSON。

我调用该操作的 WebRequest 代码如下所示：

```
 public class WebRequestUtil
    {
        public static StreamReader GetWebRequestStream(
             string url,
             string contentType,
             bool useDefaultCredentials)
        {
            var request = WebRequest.Create(url);
            request.ContentType = contentType;
            request.ImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
            //request.UseDefaultCredentials = useDefaultCredentials;
            //ICredentials ic = new NetworkCredential();

            //request.Credentials = 
            var response = (HttpWebResponse)request.GetResponse();
            return new StreamReader(response.GetResponseStream());
        }
    } 
```

我正在玩ImpersonationLevel...还没有工作....

通过 WebRequest 调用的 MVC 3 操作类似于：

```
public class ProxyServiceController : Controller
    {

        public ProxyServiceController()
        {

        }

       public string CheckForProxy(string applicationName, string associateId)
        {
            RequestResultDetails requestDetails = new RequestResultDetails();
            string json = string.Empty;

            //This correctly gets the Active directory information for the user
            //and fills out a custom ADUserInfo object.
            **ADUserInfo adUserInfo = ADService.GetUserInfo(this.User);**

            try
            {

                if (!ADService.DoesUrlDataMatchAD(
                                adUserInfo,
                                associateId)
                    )
                {
                    throw new Exception(StaticText.UserDataMismatch);
                }

                resultList = //query db for data given the associateId

                if (resultList.ListIsNotNullOrEmpty())
                {
                    requestDetails.RelationshipExists = true;
                }
                else
                {
                    requestDetails.RelationshipExists = false;
                }

                requestDetails.Details = resultList;

            }
            catch (Exception e)
            {
                LogUtil.WriteException(e);
                requestDetails.ErrorProcessingRequest = true;
                requestDetails.ErrorDetails = ErrorProcessing.GetFullExceptionDetails(e);
            }

            json = JsonConvert.SerializeObject(requestDetails);

            LogUtil.Write("json: " + json);

            return json;

        }
} 
```

那么会发生什么，如果我通过如下网址直接在浏览器中访问 MVC 3 Controller/Action：

http://:90/MyApp/Service.aspx/CheckForProxy/Reporting/555

我可以在页面上看到正确的 JSON。但是，如果我从同一服务器上的另一个应用程序对同一 URL 进行 WebRequest 调用，则似乎无法轮询 Active Directory。这绝对是某种权限问题，但我不确定如何解决它，以便服务看到用户的 Active Directory 信息。

这里的问题是传递给服务的凭据是调用应用程序正在模拟的帐户的凭据。为了让服务 mvc 应用程序看到执行 WebRequest 的用户（以及应用程序发出调用，但用户加载应用程序）而不是应用程序模拟的帐户，我应该做些什么更改？

我对处理这种沟通的其他想法或方法持开放态度。

**每个 jmrnet 评论的解决方案**

哇，这个评论很到位。我不知道正在使用哪种网络魔法，但我将网络请求方法修改为：

```
 public static StreamReader GetWebRequestStream(
         string url,
         string contentType,
         bool useDefaultCredentials,
         IPrincipal user)
    {

        var impersonationContext = ((WindowsIdentity)user.Identity).Impersonate();            
        var request = WebRequest.Create(url);

        try
        {
            request.ContentType = contentType;
            request.AuthenticationLevel = System.Net.Security.AuthenticationLevel.MutualAuthRequested;
            request.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
            var response = (HttpWebResponse)request.GetResponse();
            return new StreamReader(response.GetResponseStream());
        }
        catch (Exception e)
        {
            impersonationContext.Undo();
            throw e;
        }

    } 
```

这准确地传递了主要用户的身份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:47:44.510

两个想法：

1）您可以在进行 WebRequest 调用之前尝试强制模拟。像这样：

```
var impersonationContext = ((WindowsIdentity)User.Identity).Impersonate();
//Make your WebRequest call here...
impersonationContext.Undo(); 
```

2）您可以在 WebRequest 调用中传递用户，在服务端从 AD 获取用户身份，然后使用上述代码的变体来模拟他们。

这是一个链接，更多地讨论了上面使用的模拟代码：http: [//msdn.microsoft.com/en-us/library/w070t6ka.aspx](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)

# python - 在 Python 中初始化大量布尔值

> ID：13771993
> 
> 赞同：10
> 
> 时间：2012-12-07T22:24:35.947
> 
> 标签：python, list, boolean

> **可能重复：**
> [使用相同的布尔值初始化列表](https://stackoverflow.com/questions/13382774/initialize-list-with-same-bool-value)

我正在尝试在 python 2.7 中创建一个素数生成器，并计划使用一个布尔数组（或列表）来指示给定数字是否为素数。

假设我想初始化一个包含 5000 个布尔值的列表，我将如何做到这一点而无需手动输入`[True, True, ...]`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-07T22:25:44.573

你可以试试这个：

```
[True] * 5000 
```

列表可以在 Python 中相乘（字符串也可以）：

```
>>> [True] * 3
[True, True, True]
>>> "abc" * 3
'abcabcabc' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:35:40.473

> 我正在尝试在 python 2.7 中创建一个素数生成器，并计划使用一个布尔数组（或列表）来指示给定数字是否为素数。

这听起来真的很浪费。更好的方法是`set()`只包含您需要的数字：

```
>>> primes = {2, 3, 5, 7}
>>> 4 in primes
False
>>> 5 in primes
True 
```

# javascript - 如何防止淘汰嵌套可排序允许放入子列表？

> ID：13771997
> 
> 赞同：5
> 
> 时间：2012-12-07T22:24:42.973
> 
> 标签：javascript, knockout.js, knockout-sortable

我有一个淘汰排序列表，里面有淘汰排序列表。本质上它是基本的“可用学生”示例（[http://jsfiddle.net/rniemeyer/UdXr4/](http://jsfiddle.net/rniemeyer/UdXr4/)），只是我希望表格也可以排序。

我大部分时间都在工作，但是我无法将表格拖到其他表格中。

我能够在表格列表上添加一个 allowDrop 函数，以防止学生被丢弃到表格列表中，

```
 this.isTable = function(arg) {
            return arg.sourceParent != undefined;
        }; 
```

所以我希望在学生名单上有类似的东西，不允许桌子进入，但对于我的生活，我无法弄清楚。我试过查看 id，甚至查看性别属性是否可用（因为它应该只适用于学生）无济于事......

我编辑了一个 jsfiddle 以使其更类似于我的情况；你会看到如果你拖动一个表，你可以把它放到另一个表中。 [http://jsfiddle.net/nYSLq/1/](http://jsfiddle.net/nYSLq/1/)

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:52:33.977

对于这种类型的事情，一个不错的选择是使用`connectClass`选项。这将有助于对可以放入物品的容器类型进行分类。

所以，你可以这样做：

```
<div id="main" data-bind="sortable: { data: tables, connectClass: 'tables' }">
    <div class="table">
        <div data-bind="text: students.id"></div>
        <div class="seats" data-bind="sortable: { data: students, allowDrop: $root.isTableFull, connectClass: 'students'  }">
            <div class="student" data-bind="text: name"></div>
        </div>
    </div>
</div> 
```

请注意，该插件确实将该类分配给您的适当元素。

现在，学生只会与学生一起排序，而表格只会一起排序。

这是一个更新的小提琴，去掉了一些不必要的额外内容：http: [//jsfiddle.net/rniemeyer/7yA2s/](http://jsfiddle.net/rniemeyer/7yA2s/)