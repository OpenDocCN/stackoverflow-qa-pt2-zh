# StackOverflow 问答 12689000-12689999

# vba - 在使用模板创建的文档中运行 VBA 宏

> ID：12689001
> 
> 赞同：1
> 
> 时间：2012-10-02T10:56:56.873
> 
> 标签：vba, templates, docx

我有启用宏的模板（.dotm），其中有许多宏，通常与使用存储在模板中的自定义构建块添加和删除文档部分有关。

当我在实际模板文件中执行宏时，一切都很顺利。

但是，当我尝试在使用此模板创建的文档中执行它们时，宏在运行一次特定功能（附加到复选框）后停止工作。

此外，在某些情况下，将文档保存为 .docx 文件时，复选框会变成图片。

这份文件可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:26:15.270

通过重新创建问题复选框解决了该问题。

# iphone - 如何在 iphone 上访问我的 iphone 日志文件

> ID：12689004
> 
> 赞同：1
> 
> 时间：2012-10-02T10:57:08.850
> 
> 标签：iphone, ios, debugging, shell, logging

所以我的应用程序不断崩溃并丢失控制台中输出的所有日志。我决定越狱手机，并使用[此](https://stackoverflow.com/a/3231061/766570)代码写入文件：

```
+(void)Log:(NSString *)content
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                         NSUserDomainMask, YES); 
    NSString* docDir = [paths objectAtIndex:0];
    NSString * logFile = [docDir stringByAppendingString:@"/log.txt"];                             

    NSData *dataToWrite = [content dataUsingEncoding: NSUTF8StringEncoding];
    NSFileHandle* outputFile = [NSFileHandle fileHandleForWritingAtPath:logFile];
    [outputFile seekToEndOfFile];
    [outputFile writeData:dataToWrite];    
    [outputFile closeFile];
} 
```

如果我设置一个断点，则*outputFile*的值如下所示：/var/mobile/Applications/B8AB0D75-7FBE-4C5B-8D48-2ABCE9C7564D/Documents/log.txt

我通过cydia在我的手机上安装了vim，在那个目录下没有log.txt！（我已经使用[iphone 隧道](http://code.google.com/p/iphonetunnel-mac/)作为 root SSH 将 SSH 连接到我的 iPhone。在另一次尝试中，我使用 vim 手动创建了 log.txt 并再次运行代码..仍然没有附加到文件中..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:09:59.053

结果是对文件的写入权限..所以我只是对其进行了修改，它工作正常.. D'OH！

# php - 使用 PHP 将图像下载到客户端

> ID：12689012
> 
> 赞同：-2
> 
> 时间：2012-10-02T10:57:28.867
> 
> 标签：php, download, imagedownload

我说谷歌搜索中有五张图片的 5 个 URL。现在我希望在客户端下载它们。有什么方法可以使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:00:02.747

不，PHP 不会下载到客户端。客户端（即浏览器）可以从服务器下载，服务器可以使用 PHP 发送数据。

[编辑]

1.  要发送单个图像，您必须设置正确的标题，以指定图像的内容类型。见 [http://www.ehow.com/how_7280601_send-php-image-file.html](http://www.ehow.com/how_7280601_send-php-image-file.html)

2.  要发送多个图像，您可以发送多部分响应。不幸的是，对这种类型的响应的支持很差。不要使用它。

3.  或者您可以发送一个带有`<img>`标签的 html 页面。图片的 url 可以是直接的文件位置，也可以是发送单个图片的 PHP 脚本，如 1。

# python - 不同 Django 版本的两个 Django 项目

> ID：12689016
> 
> 赞同：0
> 
> 时间：2012-10-02T10:57:58.663
> 
> 标签：python, django, session

我在 Django 1.2 上开发了 Django 项目，但无法将其更新到较新版本。我需要在这里添加一个基于 Django 1.4 开发的应用程序。

如何将其作为不同版本的不同项目启动并在其中共享用户会话？

如何设置正确的 url 设置（例如第一个必须是`/`，第二个 - `/app`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:18:14.867

查看这篇关于如何在两个不同项目之间共享用户和会话的[博客文章。](http://dustinfarris.com/2012/2/sharing-django-users-and-sessions-across-projects/)您不需要*匹配会话 cookie 域*，因为您的两个项目已经在同一个域中。

**注意**：还请阅读评论，那里有一些重要的建议，以防您需要帮助进行故障排除。

回复：URL 设置 - 显然你不能将两个项目安装在同一个根目录上。如果项目 1 安装在 上`/`，那么您可以将第二个项目安装在 上`/app`。然后，您可以配置项目#2 的 URL 以将其根目录`/`（实际上是 domain.com/app）直接用于新应用的 URL。如果您使用`/somethingelse`该应用程序，您的完整 URL 将变为`/app/somethingelse`.

# javascript - Javascript onclick 事件不会触发

> ID：12689017
> 
> 赞同：-2
> 
> 时间：2012-10-02T10:58:01.953
> 
> 标签：javascript, html, function, events, onclick

我这里有一些代码：

```
<html>
<script type="text/javascript">
    document.getElementById('myElement').onclick = function () 
    {
        var searchterm = document.getElementById('bereich').value;
        document.href("http://www.google.com/serach?q=" + searchterm);
    }
</script>
<body>
<center>
    <img src="https://www.google.de/images/srpr/logo3w.png"><br>
    <input type="text" name="q"> &nbsp; <input type="button" value="Search" onclick="startSearch()">
</center> 
```

这是行不通的。我知道这根本就是一个菜鸟，但我不知道 javascript。任何人都可以帮助我吗？

添加：

我也试过：

```
<html>
<body>
<center>
<img src="https://www.google.de/images/srpr/logo3w.png"><br>
<input type="text" name="q"> &nbsp; <input type="button" value="Search" onclick="startSearch()">
</center>
<script type="text/javascript">
     window.onload = function(){
document.getElementById('myElement').onclick = function () 
{
    var searchterm = document.getElementById('bereich').value;
    document.href = "http://www.google.com/serach?q=" + searchterm;
}
     }; 
```

和：

```
<html>
<body>
<center>
<img src="https://www.google.de/images/srpr/logo3w.png"><br>
<input type="text" name="q"> &nbsp; <input type="button" value="Search" name="searchButton" onclick="startSearch()">
</center>
<script type="text/javascript">
function triggerGoogleSearch() 
{
var searchterm = document.getElementById('bereich').value;
document.href("http://www.google.com/serach?q=" + searchterm);
}   

document.getElementById('searchButton').onclick = triggerGoogleSearch();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:04:24.660

改变这个：

```
document.getElementById('myElement').onclick = function () 
```

对此：

```
function startSearch () 
```

并改变这个：

```
document.href("http://www.google.com/serach?q=" + searchterm); 
```

对此：

```
window.location.href = "http://www.google.com/serach?q=" + searchterm; 
```

并添加`id="bereich"`到您的`<input type="text" name="q">`喜欢中：

```
<input type="text" name="q" id="bereich"> 
```

如果你想通过 getElementById 找到它。

另外，将网址更改为：

```
http://www.google.com/serach 
```

对此：

```
http://www.google.com/search 
```

# 更新：

实际上，不要介意所有这些更正，**忘记 JavaScript！**

只需制作一个简单的 HTML 表单：

```
<img src="https://www.google.de/images/srpr/logo3w.png"><br>
<form action="http://www.google.com/search" method="get">
<input type="text" name="q">
<input type="submit" value="Search">
</form> 
```

请参阅[**此演示**](http://jsfiddle.net/JDuhn/)。

我认为我们都在尝试修复您的代码并且完全错过了一个更简单的解决方案。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:58:45.417

这段代码有*很多*错误。我列出了其中的一些，但我可能错过了一些。

1）将您的脚本放在正文的末尾，它将起作用。现在它在元素存在之前执行。所以根本没有添加事件处理程序。

2）没有`document.href`功能。采用`document.href =`

3) 你没有任何 id 为 myElement 或 bereich 的元素

4）您需要对搜索词进行编码

5）它可能是“搜索”，而不是“搜索”

6）你的按钮什么都不做，它调用了一个不存在的函数

7) 最好将它包含在 onload 回调中：

```
<html>
<body>
<center>
    <img src="https://www.google.de/images/srpr/logo3w.png"><br>
    <input type="text" name="q" id=bereich> &nbsp; <input type="button" value="Search" id=myElement">
</center>
<script type="text/javascript">
         window.onload = function(){
    document.getElementById('myElement').onclick = function () 
    {
        var searchterm = document.getElementById('bereich').value;
        document.href = "http://www.google.com/search?q=" + encodeURIComponent(searchterm);
    }
         };
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:00:33.303

```
function triggerGoogleSearch() 
{
    var searchterm = document.getElementById('bereich').value;
    document.href("http://www.google.com/serach?q=" + searchterm);
}   

document.getElementById('myElement').onclick = triggerGoogleSearch(); 
```

你能试试这个吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T11:02:53.537

```
<html>
<body>
<center>
    <img src="https://www.google.de/images/srpr/logo3w.png"><br>
    <input type="text" name="q"> &nbsp; <input type="button" value="Search" onclick="startSearch()" id="myElement">
</center>
<script type="text/javascript">
         window.onload = function(){
    document.getElementById('myElement').onclick = function () 
    {
        var searchterm = document.getElementById('bereich').value;
        document.href("http://www.google.com/serach?q=" + searchterm);
    }
         };
</script>
</body>
</html> 
```

# bash - 在带有文件名的文件中查找文本

> ID：12689022
> 
> 赞同：1
> 
> 时间：2012-10-02T10:58:19.177
> 
> 标签：bash, find

我有许多客户在他们的 public_html 目录中运行一个软件。该软件包含一个名为的文件，该文件`version.txt`包含其软件的版本号（该版本号，仅此而已）。

我想编写一个`bash`脚本，它将`version.txt`在每个用户的文件中查找直接命名`/home/xxx/public_html/`的文件，并输出文件的路径和文件的内容，即：

```
/home/matt/public_html/version.txt: 3.4.07
/home/john/public_html/version.txt: 3.4.01
/home/sam/public_html/version.txt: 3.4.03 
```

到目前为止，我所尝试的只是：

```
#!/bin/bash

for file in 'locate "public_html/version.txt"'
do
        echo "$file"
        cat $file
done 
```

但这根本行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:06:34.087

```
find /home -type f -path '*public_html/version.txt' -exec echo {} " " `cat {}` \; 
```

可能对你有用，但你可以不用`echo`和`cat`（“欺骗”grep）：

```
find /home -type f -path '*public_html/version.txt' -exec grep -H "." {} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:06:41.137

或者使用 find：

```
find /home -name "*/public_html/version.txt" -exec grep -H ""  {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:00:05.820

```
for i in /home/*/public_html/version.txt; do
   echo $i
   cat $i
done 
```

将查找所有相关文件（使用 shell 通配符），`echo`将文件名取出并`cat`取出文件。

如果您想要更简洁的输出，您应该调查[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)并用适当的正则表达式替换 echo/cat，例如

```
grep "[0-9]\.[0-9]" $i 
```

# css - zoom:1 在样式表中有什么用？

> ID：12689025
> 
> 赞同：2
> 
> 时间：2012-10-02T10:58:30.423
> 
> 标签：css

> **可能重复：**
> [缩放有什么错误：1；在 CSS 中修复？](https://stackoverflow.com/questions/6287023/what-bug-does-zoom1-fix-in-css)

如果我没记错的话，CSS 属性的默认`zoom`值为`1`. 在最近 6 或 7 个关于 CSS 的在线代码文件中，我在代码的某处看到了这段神秘的代码：

```
zoom: 1; 
```

这段标记有语义吗？他们包含它有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:00:35.057

使用此规则是激活HTML 元素的[hasLayout属性的最快（通常也是最干净的）方法。](http://msdn.microsoft.com/en-us/library/bb250481%28v=vs.85%29.aspx)反过来，这会影响（通常以积极的方式）它在旧版本的 Internet Explorer 中的呈现：

> 在 Internet Explorer 中，元素要么负责调整其自身内容的大小和排列，要么依赖父元素来调整其内容的大小和排列。
> 
> 为了适应这两个不同的概念，渲染引擎使用了一个名为的属性，该属性`hasLayout`可以具有相关元素的值`true`或`false`。`hasLayout`当属性值为 true时，我们说元素获得布局或具有布局。1
> 
> 当一个元素具有布局时，它负责调整和定位自身以及可能的任何后代元素。简单来说，这意味着元素更关心自身及其内容，而不是依赖祖先元素来完成所有工作。因此，默认情况下，某些元素将具有布局，尽管大多数元素没有。

我也推荐阅读[这篇文章](http://reference.sitepoint.com/css/haslayout)（引用实际上来自那里）。

# c++ - 如何在新线程中运行静态函数？

> ID：12689038
> 
> 赞同：2
> 
> 时间：2012-10-02T10:59:33.963
> 
> 标签：c++, multithreading

在论坛中搜索后，我遇到了一些答案，但我无法得到关于如何在 C++ 中的新线程中运行静态方法的明确答案。我主要关心的是启动线程的最佳方式是什么？（它是否也在另一个线程内部工作？）哪个标头更好用？线程.h，pthread.h？

我想创建一个新线程（当调用给定方法时）并在该线程内调用另一个函数...任何提示我如何解决这个问题？

非常感谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:11:06.923

在线程中运行静态成员函数是没有问题的。只需使用`std::thread`与免费功能相同的方式：

```
#include <thread>

class Threaded
{
public:

   static void thread_func() {}

};

int main()
{
    std::thread t(Threaded::thread_func);
    t.join();
    return 0;
} 
```

当然，启动线程也可以从任何其他线程工作。使用符合 C++11 标准的编译器，您应该使用`#include <thread>`. 否则看看[`boost::thread`](http://www.boost.org/libs/thread/)。它的用法类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:11:53.770

例如，假设您的静态函数有两个参数：

```
#include <boost/thread/thread.hpp>

void launchThread()
{
    boost::thread t( &MyClass::MyStaticFunction, arg1, arg2 );
} 
```

这将需要链接到[Boost.Thread](http://www.boost.org/doc/libs/1_51_0/doc/html/thread.html)库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:11:26.530

执行此操作的最佳 OOP 方法是：定义一个**入口点**( `entryPoint()`)，该入口点将调用**成员函数**( `myThreadproc()`)。入口点将启动线程并调用`myThreadproc`. 然后你可以访问所有的成员变量和方法。

我的ClassA.h

```
class A
{
   static void *entryPoint(void *arg);
   void myThreadproc();
   void myfoo1();
   void myfoo2();
} 
```

我的ClassA.cpp

```
void *A::entryPoint(void *arg)
{
   A *thisClass = (A *)arg;
   thisClass-> myThreadproc();
}

void A::myThreadproc()
{
       //Now this function is running in the thread..
       myfoo1();
       myfoo2();
} 
```

现在您可以像这样创建线程：

```
int main()
{
   pthread_t thread_id; 
   pthread_create(&thread_id,NULL,(A::entryPoint),new A());
   //Wait for the thread
   return 0;
} 
```

# .net - ASP.NET 成员资格提供程序与 MVC3 站点和 WCF 服务一起使用

> ID：12689039
> 
> 赞同：1
> 
> 时间：2012-10-02T10:59:40.347
> 
> 标签：.net, wcf, authentication, asp.net-membership

我们有以下项目/代码结构：

*   ProjectA 是一个 MVC3 项目，它使用带有 ASP.NET 成员资格提供程序的表单身份验证来对用户进行身份验证。它目前仅使用成员资格和角色配置，而不是配置文件。它有相关的 web.config 部分来配置它
*   ProjectB 是一个 WCF 服务，它使用相同的身份验证机制，并通过以下方式做到这一点
    *   与 ProjectA 相同的 loginUrl 属性
    *   在两个项目中，forms 标记的 name 属性都设置为“.ASPXFORMSAUTH”
    *   system.web 下的 machineKey 元素在两个项目中设置为相同的值
    *   注意：ProjectB 的 web.config 不包含 ASP.NET 成员资格配置元素。

当 ProjectA 中的代码调用 ProjectB 中的 WCF 时，它会在调用的标头上传递 cookie 详细信息，以便可以正确验证 WCF 服务。（正如我最初编码时在我之前的问题中详细描述的那样 - [MVC3 应用程序使用表单身份验证在其他解决方案中使用 WCF](https://stackoverflow.com/questions/11468356/mvc3-application-using-forms-authentication-consuming-wcf-in-other-solutions)）。

如上所述，这种方法在内部开发和测试服务器上运行良好。

但是，在客户端安装上（在相同的服务器设置上 - 带有 IIS 7.5 的 Server 2008）它只适用于我们必须将 ASP.NET 成员身份配置元素添加到 ProjectB（WCF 服务）的 web.config 中。如果我们不这样做，那么 ProjectB 将从 machine.config 中获取默认（示例）ASP.NET 成员资格配置元素，然后抱怨不存在的连接字符串（因为它们只是其中的示例） ）。machine.configs 在我们内部的开发和测试服务器上具有相同的条目，但未发现相同的问题。

有没有人见过这个并且知道我们如何阻止 ProjectB 在 machine.config 中寻找条目？

谢谢

# python - python 正则表达式中的多个否定后向断言？

> ID：12689046
> 
> 赞同：17
> 
> 时间：2012-10-02T11:00:18.203
> 
> 标签：python, regex

我是编程新手，对不起，如果这看起来微不足道：我有一个文本，我试图使用正则表达式将其拆分为单个句子。使用该`.split`方法，我搜索一个点，后跟一个大写字母，例如

```
"\. A-Z" 
```

但是，我需要通过以下方式细化此规则：`.`(dot) 前面不能有`Abs`or `S`。并且如果它后跟一个大写字母 ( `A-Z`)，如果它是一个月份名称，它应该仍然不匹配，例如`January | February | March`.

我尝试实施前半部分，但即使这样也没有用。我的代码是：

```
"( (?<!Abs)\. A-Z) | (?<!S)\. A-Z) ) " 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T11:16:14.470

首先，我认为您可能希望将空格替换为`\s+`，或者`\s`如果它确实是一个空格（您经常会在英文文本中找到双空格）。

其次，要匹配您必须使用的大写字母`[A-Z]`，但`A-Z`不会起作用（但请记住，除了`A-Z`...之外，可能还有其他大写字母）。

此外，我想我知道为什么这不起作用。`\. [A-Z]`如果前面没有`Abs`or ，正则表达式引擎将尝试匹配`S`。问题是，如果它前面有`S`，它前面*没有*`Abs`，所以第一个模式匹配。如果前面有`Abs`，则前面*没有*`S`，所以第二个模式版本匹配。无论哪种方式，这些模式中的一个都将匹配，因为`Abs`并且`S`是互斥的。

您问题第一部分的模式可能是

```
(?<!Abs)(?<!S)(\. [A-Z]) 
```

或者

```
(?<!Abs)(?<!S)(\.\s+[A-Z]) 
```

（根据我的建议）

那是因为你必须避免`|`，如果没有它，现在的表达方式是*不以 Abs 为*先，*也不以 S 为*先。如果两者都为真，则模式匹配器将继续扫描字符串并找到您的匹配项。

为了排除月份名称，我想出了这个正则表达式：

```
(?<!Abs)(?<!S)(\.\s+)(?!January|February|March)[A-Z] 
```

同样的论点也适用于消极的前瞻性模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-12T08:13:12.610

我正在为标题中的问题添加一个简短的答案，因为它位于 Google 搜索结果的顶部：

拥有多个不同长度的负面lookbehinds的方法是将它们链接在一起，如下所示：

`"(?<!1)(?<!12)(?<!123)example"`

这将匹配`example` `2example`and`3example`但不匹配`1example` `12example`or `123example`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:13:47.813

使用[nltk punkt 分词器](http://nltk.googlecode.com/svn/trunk/doc/howto/tokenize.html)。它~~可能~~比使用正则表达式更健壮。

```
>>> import nltk.data
>>> text = """
... Punkt knows that the periods in Mr. Smith and Johann S. Bach
... do not mark sentence boundaries.  And sometimes sentences
... can start with non-capitalized words.  i is a good variable
... name.
... """
>>> sent_detector = nltk.data.load('tokenizers/punkt/english.pickle')
>>> print '\n-----\n'.join(sent_detector.tokenize(text.strip()))
Punkt knows that the periods in Mr. Smith and Johann S. Bach
do not mark sentence boundaries.
-----
And sometimes sentences
can start with non-capitalized words.
-----
i is a good variable
name. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T11:41:00.163

使用 @root 建议的 nltk 或类似工具。

要回答您的正则表达式问题：

```
import re
import sys

print re.split(r"(?<!Abs)(?<!S)\.\s+(?!January|February|March)(?=[A-Z])",
               sys.stdin.read()) 
```

### 输入

```
First. Second. January. Third. Abs. Forth. S. Fifth.
S. Sixth. ABs. Eighth 
```

### [输出](http://ideone.com/tBoVj)

```
['First', 'Second. January', 'Third', 'Abs. Forth', 'S. Fifth',
 'S. Sixth', 'ABs', 'Eighth'] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-06-11T08:43:48.530

您可以使用设置 []。

'(?<![1,2,3]例子)'

This would not match 1example, 2example, 3example.

# c# - 平板电脑的布局资源

> ID：12689047
> 
> 赞同：0
> 
> 时间：2012-10-02T11:00:24.877
> 
> 标签：c#, android, visual-studio-2010, xamarin

我正忙着使用 Xamarin 和 Visual Studio 开发一个 android 应用程序。我创建了以下文件夹结构：

```
res/layout/main_activity.xml           # For phones
res/layout-sw600dp/main_activity.xml   # For 7” tablets
res/layout-sw720dp/main_activity.xml   # For 10” tablets 
```

对于各种布局，但这似乎不起作用。它一直显示位于**res/layout/**文件夹中的 xml 文件？

任何帮助，将不胜感激！提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:19:25.837

## 低密度小屏幕 QVGA 240x320

布局-小-ldpi 布局-小-土地-ldpi

## 低密度普通屏幕 WVGA400 240x400 (x432)

布局-ldpi 布局-土地-ldpi

## 中等密度 普通屏幕 HVGA 320x480

布局-mdpi 布局-土地-mdpi

## 中密度大屏幕 HVGA 320x480

布局-大-mdpi 布局-大-土地-mdpi

## 高密度普通屏幕 WVGA800 480x800 (x854)

布局-hdpi 布局-土地-hdpi

## Xoom（中等密度，大但 1280x800 分辨率）

布局-xlarge 布局-xlarge-land

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:11:15.473

> **注意：**您使用这些限定符指定的尺寸不是实际的屏幕尺寸。相反，尺寸是针对活动窗口可用的宽度或高度（以 dp 为单位）。Android 系统可能会将部分屏幕用于系统 UI（例如屏幕底部的系统栏或顶部的状态栏），因此部分屏幕可能无法用于您的布局。因此，您声明的尺寸应该专门针对您的活动所需的尺寸——系统在声明它为您的布局提供多少空间时会考虑系统 UI 使用的任何空间。还要注意，尽管您的布局没有声明它，但操作栏被视为应用程序窗口空间的一部分，因此它减少了可用于布局的空间，您必须在设计中考虑到它。

[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

# php - 在 PHP 中将 utf-8 字符串转换为 UTF16 实体

> ID：12689053
> 
> 赞同：3
> 
> 时间：2012-10-02T11:00:46.610
> 
> 标签：php

我有这个代码

```
<?php

$message = "ΓΙΑ ΝΑ ΔΟΥΜΕ ΤΙ ΘΑ ΔΟΥΜΕ.";
$tmp = mb_convert_encoding($message, 'UTF-16BE', 'utf-8');
echo $tmp;
?> 
```

$message 值包含一些希腊词。我想要这样的“0393 0399 0391 0020 039D 0391 0020 0394 039F 03A5 039C 0395 0020 03A4 0399 0020 0398 0391 0020 0394 039F 03A5 039C 035”，但在浏览器中会出现一些带有问号的黑色菱形。

我试图按照这些说明（[堆栈溢出问题](https://stackoverflow.com/questions/155514/how-to-convert-a-utf-8-string-to-a-utf-16-string-in-php)）但没有运气。我还尝试将文件的编码从 UTF-8 更改为没有 BOM 的 UTF-8，但还是没有运气。

在搜索时，我发现了这个惊人的网页[Unicode 代码转换器](http://rishida.net/tools/conversion/)，这样我就可以测试我是否得到了正确的实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:09:09.040

您可以使用`json_encode()`提取十六进制代码：

```
echo strtoupper(str_replace(array('"', '\u'), array('',' '), json_encode('ΓΙΑ ΝΑ ΔΟΥΜΕ ΤΙ ΘΑ ΔΟΥΜΕ.')));
//  0393 0399 0391  039D 0391  0394 039F 03A5 039C 0395  03A4 0399  0398 0391  0394 039F 03A5 039C 0395. 
```

这适用于任何语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:02:57.280

mbstring 支持 UTF-16，您可以使用 `mb_convert_encoding`.

```
$str = mb_convert_encoding($str, "utf-8", "UTF-16BE"); 
```

# javascript - 如何使用非键属性上的条件迭代 IndexedDB objectStore？

> ID：12689066
> 
> 赞同：7
> 
> 时间：2012-10-02T11:01:35.820
> 
> 标签：javascript, html, indexeddb

我有一个选择框，我想用来自 objectStore 的值自动填充，为此我需要像这样迭代它：“从 TABLE 中选择 COL1，其中 COL2 = 'myvalue'”，这是我的代码：

```
var db;
var req = indexedDB.open("DB");
req.onsuccess = function (e) {
    db = req.result;
    var tran = db.transaction("store");         
    var singleKeyRange = IDBKeyRange.only("myvalue"); //the value I want to reach from COL2         
    tran.objectStore("store").openCursor(singleKeyRange).onsuccess = function(e) { 
        var cursor = e.target.result;
        if (cursor) { 
            var opt = document.getElementById("selectbox");
            var option = document.createElement("option");
            var optionText=document.createTextNode(cursor.value.COL1); //the matching values in COL1
            option.appendChild(optionText);
            opt.appendChild(option);
            cursor.continue();
        }
    }
}; 
```

我在 objectStore 中正确索引了所有值，只是现在不知道如何通过其他值来获取值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:36:34.723

这是一个在非索引列上搜索项目的示例，您需要遍历所有项目并比较值并将它们添加到列表中，然后您可以返回结果集。

```
function SearchItems( keyPath, value, requestNo, callback){
    var initOpenReq = indexedDB.open(baseName);
    initOpenReq.onsuccess = function() {
    var db = initOpenReq.result;
        var transaction = db.transaction(objectStoreName, 'readonly');
        var objectStore = transaction.objectStore(objectStoreName);
        var cursorRequest = objectStore.openCursor();
        var agregate = [];
        cursorRequest.onsuccess = function (event){
            if (event.target.result){
                if(event.target.result.value[keyPath] && event.target.result.value[keyPath] == value){ //compare values
                    agregate.push(event.target.result.value);
                }
                event.target.result['continue']();
            }
        };

        transaction.oncomplete = function (event) {
                callback(agregate); // return items
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T05:15:21.800

这是一个带有索引的示例。

```
var db; 
var req = indexedDB.open("DB", 2);
// Creating the index
req.onupgradeneeded = function (e){
   var trans = e.target.transaction;
   var obj = trans.objectStore("store");
   obj.createIndex("indexname", "keypath") // keypath is the propertyname you want the index on. for Ex. {Name: "x", Age:5 }; If you want to filter on Name, keypath = Name
} 
req.onsuccess = function (e) {
    db = req.result;
   var tran = db.transaction("store");
   var singleKeyRange = IDBKeyRange.only("myvalue"); //the value I want to reach from COL2              
   var objectStore = tran.objectStore("store");
   var opt = document.getElementById("selectbox");

   objectStore.index("indexname").openCursor(singleKeyRange).onsuccess = 
   function(e){          
         var cursor = e.target.result;
         if (cursor) {
             var option = document.createElement("option");
             var optionText=document.createTextNode(cursor.value.COL1); //the matching values in COL1             
             option.appendChild(optionText);
             opt.appendChild(option);
             cursor.continue(); 
         }
     } 
}; 
```

# ios - iOS：DISTRIBUTION 配置文件有什么用途？

> ID：12689073
> 
> 赞同：14
> 
> 时间：2012-10-02T11:02:02.183
> 
> 标签：ios, app-store, distribution, provisioning, provisioning-profile

这可能已被问过很多次，但我仍然找不到关于为什么需要它们的信息。我使用 DEVELOPER prov 配置文件来测试我设备上的应用程序，这是有道理的。

Provisioning Portal 解释了这样的 prov 配置文件：

```
A Provisioning Profile is a collection of digital assets that uniquely ties
 developers and devices to an authorized iOS Development Team and enables
 a device to be used for testing. 
```

按照这种逻辑，它们只需要用于测试，例如不需要用于分发。我们需要一个人在 AppStore 上部署应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:14:40.500

绝对没错。分发配置文件用于提交到 App Store。它没有开发配置文件所具有的 100 台设备限制。

从 [工具工作流程指南](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW2)：

```
When you’re ready to share your app for user testing or for general distribution through the 
App Store, you need to create an archive of the app using a distribution provisioning 
profile and send it to app testers or submit it to iTunes Connect. This chapter shows 
how to perform these tasks. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-28T03:14:35.443

分发配置文件可防止攻击者将您的应用的修改版本提交到商店 - 只有持有分发证书私钥的您才能提交和更新您的应用。

提交您的应用程序后，`embedded.mobileprovision`将检查并比较您和您的二进制文件，以确保您是合法作者。`embedded.mobileprovision`然后文件被丢弃，Apple 使用他们自己的证书（默认情况下所有 iDevices 都接受）再次签署应用程序，以便所有 iDevices 都可以运行它。

当 iDevice 下载应用程序时，可执行二进制文件会使用与该设备关联的加密密钥进行加密。在运行时，只有该设备可以解密可执行二进制文件并运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:23:56.623

有两种类型的分发配置文件，第一种是将您的应用程序提交到应用商店，另一种（Ad-Hoc）是必要的，如果您无法将设备连接到您的 mac（开发人员配置文件）。然后，您可以将您的应用程序与 Ad-Hoc 配置文件共享给其他人，例如通过邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-24T10:44:29.333

**分发配置文件**

`Distribution Provisioning Profile`Apple 使用它来将应用程序发布到 App Store。当 Apple 批准该应用程序时，它由 Apple 签署并公开。

`Distribution Provisioning Profile`包含：

*   应用程序 ID - 将要运行的应用程序
*   分发证书 - 谁可以调试应用程序

[[开发配置文件]](https://stackoverflow.com/a/59292735/4770877)

# java - 如何在小程序中创建内部框架（子框架）

> ID：12689078
> 
> 赞同：0
> 
> 时间：2012-10-02T11:02:20.290
> 
> 标签：java, swing, applet, jpanel, jinternalframe

我正在尝试创建一个存在于我的小程序中的子框架，它应该绑定到一个 JPanel。我在互联网上找到了这个和那个，但没有任何效果。我认为在这个过程中出了点问题，该死的东西被隐藏了。有人可以在这个问题上给我一些帮助吗？

我的源代码如下...

```
public class EnableFrame {

  public void init() {

    EnableFrame theframe = new EnableFrame();
    theframe.setSize(550, 300);
    theframe.setVisible(true);
  }

  public EnableFrame()  {

    JPanel containall = new JPanel();

    JInternalFrame iframe = new JInternalFrame("New Frame",true,true);
    iframe.setBounds(10,10,150,150);
    iframe.getContentPane().add(containall);
    iframe.show(true);
  }
} 
```

提前致谢

-罗兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:07:59.523

A`JInternal`通常与 a 相关联`JDesktopPane`。

为了使内部框架出现在屏幕上，您必须已将框架添加到适当的容器中，例如`JDesktopPane`

您可能会发现[如何使用](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)某些用途的内部框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:12:25.470

我只看评论

*   甚至有可能导致重量级和轻量级之间的一些副作用`mouse`和事件使这个想法复杂化，重量级可以跳跃`focus``(J)Applet``JInternalFrames``(J)Applet``toFront()`

*   你不会这样做并使用`JDesktopPane`from`JFrame`而不是 for`(J)Applet`

# objective-c - CLLocation 如何将数据解析到我的应用程序标签中

> ID：12689080
> 
> 赞同：0
> 
> 时间：2012-10-02T11:02:23.427
> 
> 标签：objective-c, ios, cllocationmanager

我正在制作一个应用程序来使用 CLLocation 管理器获取 GPS 位置。由于我正在使用的 ios 6 更改：

```
-(void)locationManager *) didUpdateLocations:(NSArray *)locations 
```

然后我声明了一个委托，这样我就可以在我的视图控制器中接收位置更新，然后将它们传递给我的显示标签，我在 didUpdateLocations 中使用了这个命令：

```
[self.delegate locationsUpdate:[locations lastObject]; 
```

考虑到位置最后一个对象==我曾经在

```
-(void)locationManager:(CLLocationManager *)manager 
 didUpdateToLocation:(CLLocation*)newLocation
        fromLocation:(CLLocation *)oldLocation 
```

但是当我像这样在我的视图控制器中调用我的 updatelocation 时：

```
-(void)locationUpdate:(CLLocation *)location
{
    locationLabel.text = [locations lastobject];
} 
```

我得到一个错误。在以前的版本中，locationUpdate 中的命令应该是：

```
 locationLabel.text = [location description]; 
```

任何人都知道如何声明命令以获取我的数组的最后一个对象并显示它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:01:32.773

刚试过

```
locationLabel.text = [location description]; 
```

像魅力一样工作。不知道为什么我没有先使用它。感谢圣殿骑士指出。

# java - 如何在 Java 中使用谷歌地理编码？

> ID：12689084
> 
> 赞同：3
> 
> 时间：2012-10-02T11:02:57.597
> 
> 标签：java, google-maps, google-maps-api-3, geolocation, geocoding

我正在为我的项目开发一个功能，当用户输入“邮政编码”时，应显示相应“邮政编码”的坐标（纬度、经度）。实施平台是'JAVA'。

我用谷歌搜索了 java api，但没有找到任何特定的资源。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-28T00:25:01.943

您也可以（现在）查看用于地理编码、方向、距离矩阵、海拔和时区的开源 Java 客户端库：[https ://github.com/googlemaps/google-maps-services-java](https://github.com/googlemaps/google-maps-services-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T11:47:10.260

这很简单。例如，看看[这个类](https://github.com/wicketstuff/core/blob/ec08ce52854d7e4d568b3fc5c44f1310e82d3640/jdk-1.6-parent/gmap3-parent/gmap3/src/main/java/org/wicketstuff/gmap/geocoder/Geocoder.java)的 geocode 方法。将您的邮政编码（以及国家/地区）传递给该方法，您应该没问题。（可以在[此处](https://github.com/wicketstuff/core/blob/ec08ce52854d7e4d568b3fc5c44f1310e82d3640/jdk-1.6-parent/gmap3-parent/gmap3/src/main/java/org/wicketstuff/gmap/api/GLatLng.java)找到 GLatLng 类，但应根据需要由您替换。）

[编辑] 我刚刚看到这个示例仍在使用[Google Maps v2 ，但将其转换为](https://developers.google.com/maps/documentation/geocoding/v2/index)[v3](https://developers.google.com/maps/documentation/geocoding/index)应该是轻而易举的事。在链接的文件中，您还可以找到有关使用此服务的限制（“使用限制”段）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:27:41.170

您可以尝试为[Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/) RESTful Web 服务编写一个 REST 客户端（使用例如[Apache HttpClient](http://hc.apache.org/httpclient-3.x/)） 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-12T20:37:08.150

这是一种方法（包括源）： [http ://halexv.blogspot.mx/2015/07/java-geocoding-using-google-maps-api.html](http://halexv.blogspot.mx/2015/07/java-geocoding-using-google-maps-api.html)

该博客解释了如何在没有 API_KEY 的情况下执行此操作，以及一种将位置过滤为最可能的位置的方法。

试试看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-10T03:35:23.700

这方面的文档对新用户不友好。对我来说，Java 文档效果最好，尽管它们非常严格：[https ://www.javadoc.io/doc/com.google.maps/google-maps-services/latest/com/google/maps/GeocodingApiRequest.html](https://www.javadoc.io/doc/com.google.maps/google-maps-services/latest/com/google/maps/GeocodingApiRequest.html)

以下是使用最新的 Google Geocoding API 的方法：

```
//use your google api key to create a GeoApiContext instance
GeoApiContext context = new GeoApiContext.Builder().apiKey("xxxxxx").build();

//this will get geolocation details via zip 
GeocodingResult[]results = GeocodingApi.newRequest(context).components(ComponentFiler.postalCode("75002")).await(); 
System.out.println(results[0]);

//this will get geolocation details via address 
GeocodingResult[] results2 = GeocodingApi.geocode(context, "One Apple Park Way Cupertino, CA 95014").await();
System.out.println(results2[0]);

//another way to get geolocation details via address 
GeocodingResult[] results3 = GeocodingApi.newRequest(context).address("One Apple Park Way Cupertino, CA 95014").await();
System.out.println(results3[0]);

//geolocation details via lat lng 
GeocodingResult[] results4 = GeocodingApi.newRequest(context).latlng(latLng).await(); 
System.out.println(results4[0]); 
```

从那里您将在结果数组中的返回位置上获得一堆数据，您可以根据需要对其进行解析，以提取您选择的数据。继承人是什么数据看起来像前....

```
[GeocodingResult placeId=ChIJyTSQVXm0j4ARmdUQoA1BpwQ [Geometry: 37.31317000,-122.07238160 (APPROXIMATE) bounds=[37.34159500,-121.99557710, 37.24799500,-122.14382300], viewport=[37.34159500,-121.99557710, 37.24799500,-122.14382300]], formattedAddress=MONTE VISTA, CA 95014, USA, types=[postal_code], addressComponents=[[AddressComponent: "95014" ("95014") (postal_code)], [AddressComponent: "MONTE VISTA" ("MONTE VISTA") (locality, political)], [AddressComponent: "Santa Clara County" ("Santa Clara County") (administrative_area_level_2, political)], [AddressComponent: "California" ("CA") (administrative_area_level_1, political)], [AddressComponent: "United States" ("US") (country, political)]], postcodeLocalities=[Cupertino, MONTE VISTA, Permanente]] 
```

# c# - 在 C# 中将 GZIP 添加到 WCF REST 服务

> ID：12689086
> 
> 赞同：7
> 
> 时间：2012-10-02T11:03:02.880
> 
> 标签：c#, .net, wcf, web-services, gzip

我在 C#.NET WCF Web 服务上启用 GZIP 压缩时遇到问题，希望有人知道我在 App.conf 配置文件中缺少什么，或者在调用启动 Web 服务时需要什么额外的编码。

我已经按照链接[Applying GZIP Compression to WCF Services](http://blogs.msdn.com/b/dmetzgar/archive/2011/03/10/compressing-messages-in-wcf-part-one-fixing-the-gzipmessageencoder-bug.aspx)指向下载添加 GZIP 的 Microsoft 示例，但该示例与我设置 Web 服务的方式无关。

所以我的 App.conf 看起来像

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="MyService.Service1">
        <endpoint address="http://localhost:8080/webservice" binding="webHttpBinding" contract="MyServiceContract.IService"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <extensions>
      <bindingElementExtensions>
        <add name="gzipMessageEncoding" type="MyServiceHost.GZipMessageEncodingElement, MyServiceHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </bindingElementExtensions>
    </extensions>
    <protocolMapping>
      <add scheme="http" binding="customBinding" />
    </protocolMapping>
    <bindings>
      <customBinding>
        <binding>
          <gzipMessageEncoding innerMessageEncoding="textMessageEncoding"/>
          <httpTransport hostNameComparisonMode="StrongWildcard" manualAddressing="False" maxReceivedMessageSize="65536" authenticationScheme="Anonymous" bypassProxyOnLocal="False" realm="" useDefaultWebProxy="True"/>
        </binding>
      </customBinding>
    </bindings>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

我只是将 MS 示例中的配置和 GZIP 类复制到我的项目中，并添加了我的相关 Web 服务配置。我用来启动 Windows 服务的代码是：

```
WebServiceHost webserviceHost = new WebServiceHost(typeof(MyService.Service1));
webserviceHost.Open(); 
```

Web 服务运行良好，但 Fiddler 在从 Web 浏览器进行调用时未检测到任何通过 GZIP 压缩返回的响应。我还尝试以编程方式使用 GZIP 设置和运行 Web 服务，但失败了。作为绿色我不确定我还需要配置什么，任何建议都很有用

我对此进行了更深入的研究并发现，由于我将 Web 服务作为 WebServiceHost 对象运行，因此它必须使用 WebServiceHost 默认使用的 WebHTTPBinding 对象覆盖 app.conf 文件中的自定义 GZIP 绑定，这意味着即将发生的任何事情出 web 服务将不会被编码。为了解决这个问题，我想我会以编程方式将自定义 GZIP 绑定写入代码

```
var serviceType = typeof(Service1);
var serviceUri = new Uri("http://localhost:8080/webservice");
var webserviceHost = new WebServiceHost(serviceType, serviceUri);
CustomBinding binding = new CustomBinding(new GZipMessageEncodingBindingElement(), new HttpTransportBindingElement());
var serviceEndPoint = webserviceHost.AddServiceEndpoint(typeof(IService), binding, "endpoint");
webserviceHost.Description.Endpoints[0].Behaviors.Add(new WebHttpBehavior { HelpEnabled = true });
webserviceHost.Open(); 
```

问题是它不允许与 WebHttpBehavior 进行自定义绑定。但是，如果我删除该行为，那么我的 REST Web 服务就会变得丑陋，并期望 Stream 对象作为我的合同中的输入。我不确定如何配置行为，所以任何帮助都非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:18:01.880

所以这是我花了几天时间提出的程序化解决方案。请注意，我不知道如何在 app.config 文件中配置解决方案，只能通过代码配置。首先按照此[链接](http://blogs.msdn.com/b/dmetzgar/archive/2011/03/10/compressing-messages-in-wcf-part-one-fixing-the-gzipmessageencoder-bug.aspx) 获取并修复微软编码示例中的 GZIP 类。然后使用下面的示例代码作为配置您自己的 Web 服务的基础。

```
//Some class class to start up the REST web service
public class someClass(){
    public static void runRESTWebservice(){
        webserviceHost = new WebServiceHost(typeof(Service1), new Uri("http://localhost:8080));
        webserviceHost.AddServiceEndpoint(typeof(IService), getBinding(), "webservice").Behaviors.Add(new WebHttpBehavior());
        webserviceHost.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
    }

    //produces a custom web service binding mapped to the obtained gzip classes
    private static Binding getBinding(){
        CustomBinding customBinding = new CustomBinding(new WebHttpBinding());
        for (int i = 0; i < customBinding.Elements.Count; i++)
        {
            if (customBinding.Elements[i] is WebMessageEncodingBindingElement)
            {
                WebMessageEncodingBindingElement webBE = (WebMessageEncodingBindingElement)customBinding.Elements[i];
                webBE.ContentTypeMapper = new MyMapper();
                customBinding.Elements[i] = new GZipMessageEncodingBindingElement(webBE);
            }
            else if (customBinding.Elements[i] is TransportBindingElement)
            {
                ((TransportBindingElement)customBinding.Elements[i]).MaxReceivedMessageSize = int.MaxValue;
            }
        }
        return customBinding;
    }
}

//mapper class to match json responses
public class MyMapper : WebContentTypeMapper{
    public override WebContentFormat GetMessageFormatForContentType(string contentType){
        return WebContentFormat.Json;
    }
}

//Define a service contract interface plus methods that returns JSON responses
[ServiceContract]
public interface IService{
    [WebGet(UriTemplate = "somedata", ResponseFormat = WebMessageFormat.Json)]
    string getSomeData();
}

//In your class that implements the contract explicitly set the encoding of the response in the methods you implement
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class Service1 : IService
{
    public string getSomeData()
    {
        WebOperationContext.Current.OutgoingResponse.Headers[HttpResponseHeader.ContentEncoding] = "gzip";
        return "some data";
    }
} 
```

我通过这个[链接](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8c3eafae-b6a1-441f-85ef-90721d941a1a)解决了这个问题。

注意：微软没有将 GZIP 原生地构建到 WCF 中，这让我有些困惑，因为 WCF 是任何返回大量数据的 REST Web 服务的重要组成部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T22:18:49.620

为了回应您对 WCF 不支持 GZIP 的评论，它已添加到 .Net 4.5 中。见[这里](http://msdn.microsoft.com/en-us/library/dd456789%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:01:59.270

如果您使用的是 RestService 和 IIS (>=7.0)，则不必自己执行此操作！

IIS 7 支持动态压缩，允许自动压缩在您自己的应用程序（ASP.NET、MVC、WCF 或其他！）中创建的内容。该方案基于内容类型嗅探，因此它适用于任何类型的 Web 应用程序框架。

[请在此处](http://www.hanselman.com/blog/EnablingDynamicCompressionGzipDeflateForWCFDataFeedsODataAndOtherCustomServicesInIIS7.aspx)找到完整的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T04:33:15.570

由于某种原因，我无法让上述实现适用于使用 Json + 压缩的自托管 WCF REST，仅适用于 XML。

沮丧地环顾了一段时间后，终于从下面最近的一篇博客中找到了解决方案。希望这对仍在寻找相同事物的人有所帮助。

[https://blogs.msdn.microsoft.com/carlosfigueira/2016/02/23/using-automatic-format-selection-with-a-compression-encoder-in-self-hosted-scenarios/](https://blogs.msdn.microsoft.com/carlosfigueira/2016/02/23/using-automatic-format-selection-with-a-compression-encoder-in-self-hosted-scenarios/)

# javascript - 删除父 div 的父级

> ID：12689087
> 
> 赞同：0
> 
> 时间：2012-10-02T11:03:07.300
> 
> 标签：javascript, jquery

```
<div class="row-fluid">
    <div class="span12 clearfix">
        <div class="span1">{1}</div>
        <div class="span3">{2}</div>
        <div class="span7"><input type="text" name="image_url[]" class="text required img_url" value="{0}" /></div>
        <div class="span1"><a href="#" class="remove_img">remove</a></div>
    </div>
</div>
<div class="row-fluid">
    <div class="span12 clearfix">
        <div class="span1">{1}</div>
        <div class="span3">{2}</div>
        <div class="span7"><input type="text" name="image_url[]" class="text required img_url" value="{0}" /></div>
        <div class="span1"><a href="#" class="remove_img">remove</a></div>
    </div>
</div> 
```

当我单击删除链接时，我想删除它的主容器 div(row-fluid)。

我试过了，但它不起作用。

```
$(this).closest('div').closest('div').closest('div').remove(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:04:10.607

你有没有尝试过

```
$(this).parents('div.row-fluid').remove(); 
```

[演示](http://jsfiddle.net/gionaf/jKsaL/)

* * *

你的函数不起作用，因为[`closest`从**当前**元素](http://api.jquery.com/closest/)开始，所以寻找`div`从 a 开始的`div`总是会返回......它自己！

# python - Python 2.5 和函数参数中的列表

> ID：12689090
> 
> 赞同：0
> 
> 时间：2012-10-02T11:03:09.467
> 
> 标签：python, python-2.5

我正在尝试在 Python2.5 中完成一些事情

所以我有我的功能

```
def f(a,b,c,d,e):
    pass 
```

现在我想调用该函数：（在python2.7中我会这样做）

```
my_tuple = (1,2,3)
f(0, *my_tuple, e=4) 
```

但是在python2.5中没有办法做到这一点。我在考虑 apply()

```
apply(f, something magical here)

#this doesn't work - multiple value for 'a'. But it's the only thing I came up with
apply(f, my_tuple, {"a":0, "e":4}) 
```

你会怎么做？我想内联，而不是先把东西放在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:45:26.340

如果你愿意交换参数的顺序，那么你可以使用这样的东西：

```
>>> def f(a,b,c,d,e):
...  print a,b,c,d,e
...
>>> my_tuple = (1,2,3)
>>> def apply(f, mid, *args, **kwargs):
...  return f(*args+mid, **kwargs)
...
>>> apply(f, my_tuple, 0, e=4)
0 1 2 3 4
>>>
>>> apply(f, ('a', 'b'), '_', d='c', e='d')
_ a b c d
>>> 
```

# android - Android：在相机预览上绘制图像

> ID：12689095
> 
> 赞同：2
> 
> 时间：2012-10-02T11:03:26.240
> 
> 标签：android, camera, android-camera-intent

我想创建一个在相机预览上绘制图像的相机应用程序。当相机运行时，我想在相机预览中添加一个图像文件（例如：image.png）。这是我必须运行相机的代码，但我不知道添加/绘制 image.png 的代码

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
"IMG_" + String.valueOf(System.currentTimeMillis()) + ".jpg"));
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

try {
    intent.putExtra("return-data", true);
    startActivityForResult(intent, PICK_FROM_CAMERA);
} catch (ActivityNotFoundException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:11:03.420

您不能在相机上叠加项目，除非相机预览在您的应用程序本身中。使用意图将不允许您这样做。

我书中的一个示例应用程序 Pro Android Augmented Reality 向您展示了如何做到这一点。[您可以在此处](https://github.com/RaghavSood/ProAndroidAugmentedReality/tree/master/Pro%20Android%20AR%203%20Widget%20Overlay)找到该应用程序的开源代码。

本质上，您必须使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)来显示相机数据，然后使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)或[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)在其上绘制东西。

# hibernate - 休眠批量更新

> ID：12689097
> 
> 赞同：0
> 
> 时间：2012-10-02T11:03:30.013
> 
> 标签：hibernate, jakarta-ee, jta, hibernate-entitymanager, batch-updates

我正在尝试更新 Java 实体的集合，但 Hibernate 执行批量更新的顺序会导致约束冲突异常。我将使用下面的例子来解释这种情况。

实体 Student Int id String Name String deskID

规则：2名学生不能有同一张桌子

第一次交易：插入 2 名学生如下 Student 1 Id:1 Name:ABC DeskId:D1

学生 2 ID：2 姓名：DEF DeskId：D2

现在，在此之后，我决定更新两个学生实体以交换他们的课桌，并将一组更新的学生实体发送到休眠更新学生 1 ID：1 名称：ABC DeskId：D2

学生 2 ID：2 姓名：DEF DeskId：D1

但这会导致违反约束异常，因为我认为更新一次只发生一条记录。

我正在使用 JTA 实体管理器来管理事务。我要更新的代码看起来像这样

```
updateMultiple(Collection<Student> updatedStudents)
        for (final Student student: updatedStudents)
        {
            final Student st= this.entityManager.getReference(Student.class, Student.getId());
            student.merge(st);
        }
        this.entityManager.flush();
        return breakClauseDtos; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:08:01.233

您的问题的根源很明确：数据库在执行 SQL 语句而不是在提交时检查约束。执行第一条 SQL 语句时，违反了约束。

您可以先从学生 1 那里移开课桌，然后将其分配给学生 2，然后再将其描述给学生 1，这样您就可以解决这个问题。这意味着三个 SQL 语句（超过必要的一个），然后您可能必须在每次更新后刷新会话（Hibernate 重新排序 SQL 语句，这可能会干扰您的手动排序）。

但更好的解决方案是纠正数据模型中的问题。

如果每张课桌只能由一个学生拥有，则课桌与学生之间存在：1 关系。Desk 需要学生的 id 作为外键。不需要定义额外的约束。现在换课桌就是换课桌记录里的学生证。这可以通过两个更新语句来完成。

# jquery - 获取嵌套在多个div中的图像

> ID：12689098
> 
> 赞同：1
> 
> 时间：2012-10-02T11:03:30.510
> 
> 标签：jquery, html, jquery-selectors, google-docs

我注意到，当您嵌入 google docs iframe（例如，您自己的网站）时，它会将其页面呈现为图像。我想做的是使用jquery ..在下面的html 中访问其中一个图像/页面，谁能告诉我如何获得最后一个img？（具有非常长的源属性值的那个）。谢谢

```
<div id="content-pane" class="gview-scrollbar jfk-scrollbar" style="top: 37px; left: 0px; :    800px; height: 663px;">
     <div id="page-pane" class="">
         <div id=":0.page.0" class="page-element goog-inline-block" style="width: 739px;">
              <div>
                 <div class="highlight-pane"></div>
                 <div class="highlight-pane">
                 <div class="highlight-pane"></div>
                 <div class="highlight-pane"></div>
                 <img class="page-image" style="width: 800px; height: 1038px;display:     none;">
                 <img class="page-image" style="width: 719px;" src="?url=http%3A%2F%2Finfolab.stanford.edu%2Fpub%2Fpapers%2Fgoogle.pdf&docid=cbdffdac40189f88c8f7d1922dd915f5&a=bi&pagenumber=1&w=719">
                 <p id=":0.a11y.0" class="accessibility-text" tabindex="-1"></p>
            </div>
         </div> 
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:09:31.197

试试这个……已经测试过了，

```
$("#content-pane").find("img:last").attr('src') 
```

# sql-server - 如何提高 SQL 查询性能

> ID：12689100
> 
> 赞同：0
> 
> 时间：2012-10-02T11:03:44.877
> 
> 标签：sql-server, sql-server-2008, tsql

我有以下数据库结构（简化）：

```
Payments
----------------------
Id        | int
InvoiceId | int
Active    | bit
Processed | bit

Invoices
----------------------
Id              | int
CustomerOrderId | int

CustomerOrders
------------------------------------
Id                       | int
ApprovalDate             | DateTime
ExternalStoreOrderNumber | nvarchar 
```

每个客户订单都有一个发票，每个发票可以有多个付款。这`ExternalStoreOrderNumber`是对我们从中导入订单的外部合作伙伴商店的订单的引用以及该`ApprovalDate`导入发生时的时间戳。

现在我们有一个问题，我们有一个错误的导入，需要根据以下逻辑将一些付款更改为其他发票（几个 hundert，所以手工做太多）：
搜索具有相同外部编号的订单发票作为当前数字，但以 0 而不是当前数字开头。

为此，我创建了以下查询：

```
UPDATE DB.dbo.Payments 
    SET InvoiceId=
        (SELECT TOP 1 I.Id FROM DB.dbo.Invoices AS I
            WHERE I.CustomerOrderId=
                (SELECT TOP 1 O.Id FROM DB.dbo.CustomerOrders AS O 
                    WHERE O.ExternalOrderNumber='0'+SUBSTRING(
                      (SELECT TOP 1 OO.ExternalOrderNumber FROM DB.dbo.CustomerOrders AS OO
                        WHERE OO.Id=I.CustomerOrderId), 1, 10000)))
    WHERE Id IN (
        SELECT P.Id
          FROM DB.dbo.Payments AS P
            JOIN DB.dbo.Invoices AS I ON I.Id=P.InvoiceId
            JOIN DB.dbo.CustomerOrders AS O ON O.Id=I.CustomerOrderId
         WHERE P.Active=0 AND P.Processed=0 AND O.ApprovalDate='2012-07-19 00:00:00' 
```

**现在，我使用实时数据（每个表中约 250.000 行）在测试系统上启动了该查询，它现在从 16 小时开始运行 - 我在查询中做错了什么还是有办法加快它的速度？**
它不需要非常快，因为它是一次性任务，但对我来说几个小时似乎很长，因为我想学习（希望不会发生）下次我想要一些反馈如何改进......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:48:01.050

您不妨终止查询。您的更新子查询与正在更新的表完全不相关。从外观上看，当它完成时，每条 dbo.payments 记录都将具有相同的值。

要分解您的查询，您可能会发现子查询本身运行良好。

```
SELECT TOP 1 I.Id FROM DB.dbo.Invoices AS I
            WHERE I.CustomerOrderId=
                (SELECT TOP 1 O.Id FROM DB.dbo.CustomerOrders AS O 
                    WHERE O.ExternalOrderNumber='0'+SUBSTRING(
                      (SELECT TOP 1 OO.ExternalOrderNumber FROM DB.dbo.CustomerOrders AS OO
                        WHERE OO.Id=I.CustomerOrderId), 1, 10000)) 
```

这总是一个大问题。

接下来是它为表中的每条记录逐行运行。

您还可以通过选择从哪里... id 来自涉及自身的连接来双重支付。您可以使用以下模式在 JOIN 子句中引用表进行更新：

```
UPDATE P
....
  FROM DB.dbo.Payments AS P
    JOIN DB.dbo.Invoices AS I ON I.Id=P.InvoiceId
    JOIN DB.dbo.CustomerOrders AS O ON O.Id=I.CustomerOrderId
 WHERE P.Active=0 AND P.Processed=0 AND O.ApprovalDate='2012-07-19 00:00:00' 
```

继续前进，另一个错误是在没有 ORDER BY 的情况下使用 TOP。那是要求随机结果。如果您知道只有一个结果，那么您甚至不需要 TOP。在这种情况下，也许你可以从许多可能的匹配中随机选择一个。由于您有三个没有 ORDER BY 的 TOP(1) 级别，您不妨将它们全部混合（加入）并在所有它们中取一个 TOP(1)。这会让它看起来像这样

```
SET InvoiceId=
    (SELECT TOP 1 I.Id
     FROM DB.dbo.Invoices AS I
     JOIN DB.dbo.CustomerOrders AS O
        ON I.CustomerOrderId=O.Id
     JOIN DB.dbo.CustomerOrders AS OO
        ON O.ExternalOrderNumber='0'+SUBSTRING(OO.ExternalOrderNumber,1,100)
           AND OO.Id=I.CustomerOrderId) 
```

然而，正如我很早就提到的，这根本与主要的 FROM 子句无关。我们将整个搜索移到主查询中，以便我们可以使用基于 JOIN 的集合操作，而不是逐行的子查询。

在我展示最终查询（完全评论）之前，我认为您的 SUBSTRING 应该解决这个逻辑`but starts with 0 instead of the current digit`。但是，如果这意味着我的阅读方式，则意味着对于订单号“5678”，您正在寻找“0678”，这也意味着应该使用 SUBSTRING`2,10000`而不是`1,10000`.

```
UPDATE P
SET InvoiceId=II.Id
FROM DB.dbo.Payments AS P
-- invoices for payments
JOIN DB.dbo.Invoices AS I ON I.Id=P.InvoiceId
-- orders for invoices
JOIN DB.dbo.CustomerOrders AS O ON O.Id=I.CustomerOrderId
-- another order with '0' as leading digit
JOIN DB.dbo.CustomerOrders AS OO
  ON OO.ExternalOrderNumber='0'+substring(O.ExternalOrderNumber,2,1000)
-- invoices for this other order
JOIN DB.dbo.Invoices AS II ON OO.Id=II.CustomerOrderId

-- conditions for the Payments records
WHERE P.Active=0 AND P.Processed=0 AND O.ApprovalDate='2012-07-19 00:00:00' 
```

值得注意的是，SQL Server 允许`UPDATE ..FROM ..JOIN`其他 DBMS 较少支持，例如 Oracle。这是因为对于 Payments 中的单行（更新目标），我希望您可以看到很明显它可以从所有笛卡尔连接中选择许多 II.Id 选项。 **你会得到一个随机的可能的 II.Id。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:38:35.507

如果我正确理解您的查询，我认为这样的事情会更有效。由于我是手动编写的并且没有运行它，它可能有一些语法错误。

```
UPDATE DB.dbo.Payments 
set InvoiceId=(SELECT TOP 1 I.Id FROM DB.dbo.Invoices AS I
         inner join DB.dbo.CustomerOrders AS O ON I.CustomerOrderId=O.Id 
         inner join DB.dbo.CustomerOrders AS OO On OO.Id=I.CustomerOrderId 
         and O.ExternalOrderNumber='0'+SUBSTRING(OO.ExternalOrderNumber, 1, 10000)))
FROM DB.dbo.Payments 
            JOIN DB.dbo.Invoices AS I ON I.Id=Payments.InvoiceId and 
             Payments.Active=0 
             AND Payments.Processed=0 
             AND O.ApprovalDate='2012-07-19 00:00:00'
            JOIN DB.dbo.CustomerOrders AS O ON O.Id=I.CustomerOrderId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:43:07.077

尝试使用 JOIN 重写。这将突出一些问题。下面的函数会做同样的事情吗？（查询有些不同，但我想这大致就是你想要做的）

```
UPDATE Payments 
   SET InvoiceId= I.Id
FROM DB.dbo.Payments
CROSS JOIN DB.dbo.Invoices AS I
INNER JOIN DB.dbo.CustomerOrders AS O
  ON I.CustomerOrderId = O.Id
INNER JOIN DB.dbo.CustomerOrders AS OO
  ON O.ExternalOrderNumer = '0' + SUBSTRING(OO.ExternalOrderNumber, 1, 10000)
  AND OO.Id = I.CustomerOrderId
WHERE P.Active=0 AND P.Processed=0 AND O.ApprovalDate='2012-07-19 00:00:00') 
```

如您所见，有两个问题很突出：

1.  Payments 和 Invoices 之间的无条件连接（当然，您已经通过`TOP 1`语句抓住了这一点，但设置方面它仍然是无条件的） - 我不确定这是否真的是您的查询中的问题。不过会在我的:)。
2.  `SUBSTRING`包含在条件中的 10000 个字符的列 ( ) 上的连接。这是非常低效的。

**如果您需要一次性加速，只需对每个表进行查询，尝试将中间结果存储在临时表中，在这些临时表上创建索引并使用临时表执行更新。**

# c# - GridViewColumn 表头内容不占全部空间

> ID：12689101
> 
> 赞同：2
> 
> 时间：2012-10-02T11:03:53.503
> 
> 标签：c#, wpf, gridview, header

我有一个 GridViewColumn，其内容是一个 TextBlock：

```
GridViewColumn column = new GridViewColumn();
column.Header = new TextBlock { Text = header };
MyGridView.Columns.Add(column); 
```

我在运行时更改了第二列的 TextBlock 背景（黑色），结果如下：

![在此处输入图像描述](../Images/cf11b17350f1e8325b20a09014d24aca.png)

TextBlock 不会占用所有可用空间。
为什么？我怎样才能解决这个问题？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:09:26.543

默认情况下，TextBlock 仅与其内容一样大。尝试这个：

```
column.Header = new TextBlock { Text = header, HorizontalAlignment = HorizontalAlignment.Stretch }; 
```

[此处的文档： System.Windows.Horizo](http://msdn.microsoft.com/en-us/library/system.windows.horizontalalignment.aspx) ​​ntalAlignment 。

## 编辑：

您的问题是因为您在 ListView 内做事，在对齐/调整大小时需要稍微不同地处理。检查这个先前的 SO 问题以获取有关如何在 XAML 中执行此操作的答案：[在 WPF 中拉伸控件以填充 ListView 列](https://stackoverflow.com/questions/493345/in-wpf-stretch-a-control-to-fill-a-listview-column)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T19:32:29.587

我有点困惑为什么另一个响应被标记为答案。问题是标头容器没有被拉伸（如果您扫描 WPF 可视化树，您可以看到`ContentPresenter`不是`Stretch`，`Center`而是相反）。

如果要拉伸标题，使标题中显示的内容占据所有标题空间，则需要覆盖`GridViewColumnHeader`样式。

```
<ListView HorizontalContentAlignment="Stretch" ...>
    <ListView.Resources>
        <Style x:Key="StretchedHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
    </ListView.Resources>
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridView.Columns>
                <GridViewColumn Width="200" HeaderContainerStyle="{StaticResource StretchedHeaderStyle}" DisplayMemberBinding="{Binding Path=SomeValue, Mode=OneWay"/>
            </GridView.Columns>
        </GridView>
    </ListView.View>
</ListView> 
```

上面的代码示例将生成一个延伸到其容器中的列表视图。它具有静态资源标题拉伸样式（在这种情况下必须应用于您要拉伸的每一列，删除`x:Key`和`HeaderContainerStyle=`以使所有标题都拉伸）。它还全局地将拉伸样式应用于所有列单元格（如果需要，可以将其应用于单个列，类似于标题样式的显示方式）。

如果您需要在后面的代码中执行此操作，您只需创建样式并在列 ( `HeaderContainerStyle`) 上设置适当的样式属性。

**更新**

我刚刚意识到有一种更好的方法来全局应用标题样式。与其将类型应用样式声明为`ListView`资源，不如将样式直接应用于`GridView`.

```
<ListView HorizontalContentAlignment="Stretch" ...>
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridView.ColumnHeaderContainerStyle>
                <Style TargetType="{x:Type GridViewColumnHeader}">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </GridView.ColumnHeaderContainerStyle>
            <GridView.Columns>
                <GridViewColumn Width="200" DisplayMemberBinding="{Binding Path=SomeValue, Mode=OneWay"/>
            </GridView.Columns>
        </GridView>
    </ListView.View>
</ListView> 
```

两种方法都实现了相同的结果，但是上面的这个方法是一种更简洁的方法，因为您正在分配直接负责标题容器样式的样式属性。但是，如果您只需要拉伸特定的列，那么第一种方法是您最好的选择。

# php - 在zend框架中创建一个表单

> ID：12689102
> 
> 赞同：0
> 
> 时间：2012-10-02T11:04:02.463
> 
> 标签：php, zend-framework

我想在 Zend Framework 中创建这样的表单：

```
<form action="some action" method="post">
    <div class="login_form">
        <h3>Admin Login</h3>
        <ul>
            <li class="login_user">
                <input type="text" name="username" value="" />
            </li>
            <li class="login_pass">
                <input type="password" name="password" value="" />
            </li>  
        </ul>
    </div>
    <input type="submit" class="login_btn blue_lgel" name="submit" value="Login" />
</form> 
```

我怎样才能使用 zend_form 类使它成为可能？我只是 zend 框架的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:34:48.797

请看一下文档：

[http://framework.zend.com/manual/1.12/en/zend.form.quickstart.html](http://framework.zend.com/manual/1.12/en/zend.form.quickstart.html)

这就是它的用途：它是为了回答像你这样的问题而写的。

您的代码将类似于：

```
class MyForm extends Zend_Form
{
    public function init()
    {
        $this->setAction('/myUrl')
             ->setMethod('post');

        $this->addElement('text', 'username', array('required' => true));
        $this->addElement('password', 'passw', array('required' => true));
    }
} 
```

然后在您的控制器的操作中：

```
public function myAction()
{
    $this->view->myForm = new MyForm();
} 
```

在您看来：

```
<?php echo $this->myForm; ?> 
```

# php - 为什么我的带有命名参数的查询返回空白结果？

> ID：12689103
> 
> 赞同：1
> 
> 时间：2012-10-02T11:04:04.273
> 
> 标签：php, pdo, sql-injection

我正在将我的 MySQL 代码转换为 PDO 以利用准备好的语句。我最初遇到了[这个问题](https://stackoverflow.com/questions/12663656/why-is-my-prepared-statement-giving-me-a-fatal-error/)中描述的致命错误。我已经解决了这个问题，但是在尝试添加参数时会带来更多问题。

我试图开始工作的代码是：

```
include ("foo/bar.php");

try {
     $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
    }  
catch(PDOException $e) {  
    echo $e->getMessage();  
    }

    $mydate=date("Y-m-d",strtotime("-3 months"));

    $foo_query=$DBH->prepare("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = :postdate AND postdate > '$mydate' ORDER BY postdate DESC");
    $foo_query->execute( array('postdate' => $_REQUEST['postdate']) );

    $DBH=null; 
```

在英语中，这意味着阅读“*取当前日期并将其设置为 3 个月，称为 $mydate，然后从我的表中选择所有这些字段（也取正文的前 20 个单词并将其称为'preview_text'）其中 postdate 等于参数 postdate 并且 postdate 大于 $mydate* "。

然后我在下面显示结果（注意现在已经删节了）：

```
$foo_query->setFetchMode(PDO::FETCH_ASSOC);
    while($r=$foo_query->fetch()) {
    echo $r["id"];
    echo $r["title"];
    echo date("d-M-Y",strtotime($r["postdate"]));
    echo nl2br ($r["preview_text"]); } 
```

现在，虽然 SELECT 查询写成：

```
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate > '$mydate' ORDER BY postdate DESC") 
```

...它准确地显示了我需要的内容，但是当然，在准备好的时候，它不包含任何参数，因此只能实现 50% 的目标。

我的印象是，按照我已经获得的教程和建议，准备我最初概述的声明的方式会很好。

我试图打印我的错误，它没有带来任何错误。我手动发送查询如下，但没有得到任何回报。注意我已经尝试了各种排列方式的日期字符串：

```
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = 20121001 AND postdate > 20120701 ORDER BY postdate DESC") 
```

**编辑：以上内容被指出不正确，但我将其保留在这里以供参考，因为本节在下面的评论中进行了解释。**

**编辑：手动发送查询现在在键入时正确显示：**

```
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = '2012-09-30 08:38:23' ORDER BY postdate DESC") 
```

键入以下任何内容时，查询根本不显示：

```
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = :postdate ORDER BY postdate DESC")
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = :postdate AND postdate > '$mydate' ORDER BY postdate DESC")
("SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body FROM BarTable WHERE postdate = '2012-09-30 08:38:23' AND postdate > '2012-07-01 00:01' ORDER BY postdate DESC") 
```

我在想我应该以某种方式绑定参数，但我读过的教程并没有明确说我应该总是绑定它们——我不确定如何继续。

**编辑：我希望将语句绑定如下，但没有成功。该查询似乎忽略了绑定，因此查询的状态充当上述所有没有绑定的排列：**

```
$foo_query->bindParam (
   ":postdate", strtotime ( $_REQUEST['postdate']), PDO::PARAM_INT);
$foo_query->execute(); 
```

我做错了什么，当我不添加参数时不会发生这种情况？我应该在 SELECT 查询之外的其他地方声明 :postdate 参数吗？

为了防止 SQL 注入，我想使用命名参数以及准备语句，但如果我无法弄清楚，那么我将不得不不使用命名参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:40:02.917

通过数组使用参数时，您将绑定默认参数类型`PDO::PARAM_STR`

取决于数据类型：

*   MySQL 时间戳数据类型：相同，您将其作为字符串传递
*   PHP Unix 时间戳，它是一个整数：您将向它传递一个 int。

我建议您像这样更改代码：

```
$foo_query=$DBH->prepare(
   "SELECT id, postdate, title, SUBSTRING_INDEX(body,' ',20) as preview_text, body 
    FROM BarTable WHERE postdate = :postdate 
    ORDER BY postdate DESC");
$foo_query->bindParam (
   ":postdate", strtotime ( $_REQUEST['postdate']), PDO::PARAM_INT); 
//                                                  ^^^ bind as integer
$foo_query->execute(); 
```

# jquery - Jeditable：访问配置中的标签数据参数

> ID：12689105
> 
> 赞同：0
> 
> 时间：2012-10-02T11:04:12.293
> 
> 标签：jquery, ruby, ruby-on-rails-3.2, jeditable

希望有人可以帮助我，因为我一直在寻找几个小时。

我计划使用 jeditable 进行现场编辑，使用 ruby​​ on rails。我可以很好地处理普通文本，但我在选择选项时遇到了一些问题。我想通过使用数据属性嵌入在字段中的集合将数据传递给可编辑字段。由于我的页面上有大约 40 或 50 个字段，我不能只为每个可编辑字段创建一个调用。

这是一些代码：

```
$(".editable[data-type='select']").editable("/post/here", {
    id: '_action',
    height: '1.8em',
    type: "select",
    data: $(this).data("collection")
    submit: "Ok",
    submitdata : function () {
        return {
            "id": this.getAttribute("data-query"),
            "index": this.getAttribute("data-index")                
        };
    }
}); 
```

该集合可以在我通过辅助方法生成的链接上找到：

```
content_tag(:div, opt_value, class: "editable", id: options[:_action], "data-query" => query.id, "data-index" => options[:index], "data-type" => "select", "data-collection" => Hash[double_array].to_json, style: "display:inline") 
```

产生这样的东西：

```
<div class="editable" data-collection="{'0':'Option 0','1':'Option 1'}" data-query="33" data-type="select" id="some_action" style="display:inline">Option 1</div> 
```

显然这不起作用：

```
data: $(this).data("collection") 
```

通过尽量保持不显眼，有没有办法访问调用可编辑字段中的嵌入属性？

谢谢，屋大维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:26:09.130

显然这有点难以执行。

我最终编辑了 src，如果标签具有数据收集属性，它将尝试使用该数据，否则它将像以前一样执行。

这是一些代码：原始

```
...truncated...

content : function(data, settings, original) {
  /* If it is string assume it is json. */
  if (String == data.constructor) {
    eval ('var json = ' + data);
  } else {
    /* Otherwise assume it is a hash already. */
    var json = data;
  }

...truncated... 
```

编辑代码：

```
...truncated...

content : function(data, settings, original) {
  /* If it is string assume it is json. */
  if (collection = $(original).data("collection")) {
    var json = collection;
  } else if (String == data.constructor) {
    eval ('var json = ' + data);
  } else {
    /* Otherwise assume it is a hash already. */
    var json = data;
  }

...truncated... 
```

# jquery - jPlayer 和正在播放来自 SHOUTcast 的数据

> ID：12689114
> 
> 赞同：1
> 
> 时间：2012-10-02T11:04:37.547
> 
> 标签：jquery, jplayer, shoutcast, playing

我正在尝试实现 jPlayer 以从 SHOUTcast 流式传输一些频道。一切都很好，直到“现在播放”部分。

测试区见这里：[http ://www.powermixfmradio.com/2013/index.php](http://www.powermixfmradio.com/2013/index.php)

这个想法是，每次有人点击一个频道时，“现在在 xxxxxx 频道上直播：”应该根据所选频道而改变，但我不知道该怎么做。我用 PHP 制作了一个简单的脚本，它读取每个频道上的当前歌曲并将它们分配给 $trance、$house 等。例如，它`<?php echo "$trance"; ?>`用于显示数据，但是每次频道更改（更改`<?php echo "$trance"; ?>`为`<?php echo "$house"; ?>`等等）时如何进行更改？

jPlayer 的开发者很好地以某种方式指导我并给了我一个开始：

```
select: function(index) {
        index = (index < 0) ? this.original.length + index : index; // Negative index relates to end of array.
        if(0 <= index && index < this.playlist.length) {
            this.current = index;
            this._highlight(index);
            $(this.cssSelector.jPlayer).jPlayer("setMedia", this.playlist[this.current]);
            // Add stuff here.
        } else {
            this.current = 0;
        }
    }, 
```

但由于我的 jq 知识非常有限，我不知道在那里添加或编辑什么。你能帮我吗？

# javascript - 带有参数的 Javascript 结构函数

> ID：12689115
> 
> 赞同：1
> 
> 时间：2012-10-02T11:04:45.050
> 
> 标签：javascript, jquery

Javascript Noob 要求值班！

我想编写以下代码：

```
var p1 = new LatLon(userLat, userLon);                                                    
var p2 = new LatLon(destLat, destLon);  
var dist = p1.distanceTo(p2); 
```

这意味着我需要创建一个 Javascript 结构，该结构将创建一个位置，然后还能够将第二个位置作为参数。我***不需要代码来计算距离***。我只需要弄清楚如何创建对象并允许它接受参数。这是我的伪代码/失败的尝试：

```
function LatLon(userLat, userLon) {
    var pos = {
      'lat': userLat, 'lon': userLon, 'distanceTo': distanceBetweenTwoPos(pos, pos2);
    }
    return pos;
}

function distanceBetweenTwoPos(pos, pos2){
    // here I will do my own calculations. 
} 
```

对获得与上述类似但功能有用的东西有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:09:21.823

使用典型的原型继承方法，它可能看起来像这样。

```
function LatLon(userLat, userLon) {
    this.lat = userLat;
    this.lon = userLon;
}

LatLon.prototype.distanceTo = function(pos2){
    console.log(this.lat, pos2.lat);
    console.log(this.lon, pos2.lon);
    // return the result
} 
```

在`LatLon`构造函数内部，因为您使用 , 调用它`new`，`this`所以是对正在构造的对象的引用，`return`因此需要声明；它将返回新对象。

内部`distanceTo`,`this`将是对调用该方法的对象的引用，因此在您的代码中，它将是对该`p1`对象的引用。

当然`p2`会作为参数传递。

```
var p1 = new LatLon(userLat, userLon);
var p2 = new LatLon(destLat, destLon);  
var dist = p1.distanceTo(p2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:19:10.273

```
function LatLon(userLat, userLon) {
    this.pos = {
      'lat': userLat,
      'lon': userLon
    }
}

LatLon.prototype.distanceTo = function(pos2){
    return this.pos.lat + pos2.pos.lat;
}

var p1 = new LatLon(1, 2);                                                    
var p2 = new LatLon(3, 4);  
var dist = p1.distanceTo(p2); 

alert(dist); 
```

演示：http: [//jsfiddle.net/6NGhY/](http://jsfiddle.net/6NGhY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:09:07.907

尝试：

```
function LatLon(userLat, userLon) {
    this.lat=userLat;
    this.lon=userLon;
    this.distanceTo=function(to){ return distanceBetweenTwoPos(this, to);}   

} 
```

# android - 未找到 Android-SDK 错误设备

> ID：12689116
> 
> 赞同：0
> 
> 时间：2012-10-02T11:04:52.367
> 
> 标签：android, adb

我在 Android 中做过一些事情，它需要我在 adb 中推送一些文件。起初我在 adb 中推送了一个工作正常的文件，但之后当我尝试在 adb 中推送其他文件时，它开始给我一个未找到设备的错误。我尝试从 cmd 和任务管理器中杀死该进程，但是在杀死服务器并再次启动它之后，守护进程已成功加载到端口 5037，但它没有任何帮助。虽然到目前为止我的项目工作正常并且 sdcard 是按我的预期阅读，但我被绞死了，因为没有其他文件可以上传到 sdcard 中。：/

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T03:41:21.393

我的 Nexus 4 发生了这种情况。

我在关注

[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)

我注意到

```
C:\trythisworkspace>adb install bin\MyApp-debug.apk
error: device not found
error: device not found
error: device not found
- waiting for device -
^C
C:\trythisworkspace> 
```

和

```
C:\trythisworkspace>adb devices
List of devices attached

C:\trythisworkspace> 
```

所以这些是你的一些症状

去设备管理器看看你是不是和我一样有黄色感叹号

在这里下载google驱动并解压

[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

然后转到带有黄色感叹号和属性的设备并更新驱动程序并...浏览..并将其指向 google_usb_driver\usb_driver 。

然后它检测到它，我的设备管理器显示“Android 复合 ADB 接口”。

顺便说一句，Android SDK 管理器可以选择安装谷歌 USB 驱动程序。如果您发现您有该目录，则可能会将它们放入`%userprofile%\AppData\Local\Android\android-sdk\extras\google\usb_driver`
您可以尝试将设备管理器指向该目录。

# sql - 无论列的数量/类型如何，获取存储过程结果中的行数

> ID：12689117
> 
> 赞同：2
> 
> 时间：2012-10-02T11:04:56.547
> 
> 标签：sql, sql-server, tsql, stored-procedures, dynamic-sql

我开发了以下代码：

```
 CREATE PROCEDURE [dbo].[Test01]
  AS
  BEGIN
    SELECT * FROM TestTable
  END

  CREATE PROCEDURE [dbo].[Test02]
  AS
  BEGIN
    DECLARE @tmp TABLE
    (
      TestID int,
      Test   nvarchar(100),
    )
    INSERT INTO @tmp
    EXEC Test01
    SELECT COUNT(*) FROM @tmp
  END 
```

但是，如果我添加或删除一列，`TestTable`我必须修改，`@tmp`否则结果是：

> *列名或提供的值的数量与表定义不匹配*

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:21:15.813

尝试手动指定列：

```
SELECT a, b FROM TestTable 
```

和

```
INSERT INTO @tmp (a, b) 
```

这应该可以解决您提到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:14:33.073

我的第一条评论`SELECT *`是不赞成，除非你真的知道你在做什么。在您的特定用例中，我强烈建议您不要使用它，正是因为它会使您陷入您已经确定的麻烦。

在您的特定情况下，对于编写的特定 SP，您没有使用 SET NOCOUNT ON，因此您可以使用检索计数

```
SELECT @@ROWCOUNT 
```

但是正如马丁所评论的那样，这只是您拼凑的一些示例代码。否则，为什么还要使用 2 个 SP。

# java - 如何根据@RequestParam 重定向到新页面

> ID：12689119
> 
> 赞同：0
> 
> 时间：2012-10-02T11:05:17.613
> 
> 标签：java, spring

我正在显示视图`newMessage.jsp`。`/messages/new`成功发送新消息后，我想将用户重定向到他来自的页面。这可能是很多页面，因为我的很多视图（收件箱、投诉页面等）中都嵌入了我的新消息链接。

**实验#1**

我试过`return "redirect:" + request.getHeader("Referer")`了，但它不起作用。原因是，每次用户单击提交时，我都会将他发送到相同的 url ( `/messages/new`)，因此在他单击“提交”后，`Referer`标题会设置为`/messages/new`

**实验#2**

然后我尝试设置 a `@RequestParam`（这似乎是正确的做法）。因此，我会`/messages/new?referer=/inbox`在收件箱视图、`/messages/new?referer=/complaints`投诉视图等中调用。但是同样，当用户单击“提交”时，`action="new"`会触发并且我丢失了`referer`我传递的参数。

**实验#3**

最后，我决定`action="new"`将`action="new?referer=${referer}"`. 这工作得很好，除了当`referer`它为空时，url 将是`/messages/new?referer=`，这看起来不太漂亮。

**实验#4**

即使我使用（3），当我最终（成功发送消息后）`return "redirect:" + my_domain_name + referer ;`在控制器中执行时，请求正在以旧值传递，`referer`并且生成的 URL`my_domain_name/referer?referer=value_from_previous_call`应该只是`my_domain_name/referer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:11:50.700

`${referer}`指的是名为的请求属性`referer`，而您将其作为请求参数传递。

除非您手动将该参数存储为属性，否则您需要改用以下内容：`${param.referer}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:21:57.010

这可能不漂亮。但是，我们可以假设要么`referer`有一些价值，要么没有：

1：`referer`实际有值，然后做第三个实验。

2：有点复杂，然后你必须检查一个值`referer`，如果没有设置，然后设置一个，你应该有一个默认页面，当`referer`为空时，可能是`/messages/inbox`，最后需要刷新页面，通过临时重定向 (301) 或元标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:30:11.280

好吧，唯一明显的解决方案是：

从控制器执行`return "redirect:" + referer ;`，它会将页面重定向到`/messages/new`调用的位置。

# android - 删除自定义选项卡上的额外格式

> ID：12689121
> 
> 赞同：1
> 
> 时间：2012-10-02T11:05:21.980
> 
> 标签：android

我只是想问一下如何删除标签上出现的多余行。好吧，第一个选项卡没有一行，但是当我导航到下一个选项卡时，该行会出现，但只出现在左侧，这让我很困扰。这也只发生在`ICS`我记得的范围内。此外，起初我对此使用了渐变，但这并没有出现，但在我使用黑色背景后，问题就会出现。为了更好地理解这里是一个截图。

这是它最初的样子：

![这就是它最初的样子](../Images/77336259936e928f0bf8d91000aa4559.png)

当我在选项卡上导航时，会出现以下行：

![当我在标签上导航时，会出现该行](../Images/fd9e40d4d38c67fbdb46a6a5546e64a7.png)

那么你可以看到左边的线。我怎样才能删除它？

哦，顺便说一句，你可以看到有分隔线（用于框标签的粗线）仅作为背景图像手动添加，我认为这不是这里的问题。无论如何，这是我的代码以供进一步审查。

```
private TabHost tabHost;
    Intent intent;

    public static String fname = "";
    public static String lname = "";
    public static String fid = "";
    public static String eadd = "";
    public static String gender = "";

    private void setupTabHost() {
        tabHost = (TabHost) findViewById(android.R.id.tabhost);
        TabWidget tabW = (TabWidget) findViewById(android.R.id.tabs);

        //tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);
        tabW.setStripEnabled(false);

        setupTab(new TextView(this), "tab1", getResources().getDrawable(R.drawable.tab1tabicon), new Intent().setClass(this, tab1Activity.class).putExtra("fb_id", fid).putExtra("first_name", fname).putExtra("last_name", lname).putExtra("gender", gender));
        setupTab(new TextView(this), "tab2", getResources().getDrawable(R.drawable.tab2tabicon), new Intent().setClass(this, tab2Activity.class).putExtra("fb_id", fid).putExtra("first_name", fname).putExtra("last_name", lname).putExtra("gender", gender));
        setupTab(new TextView(this), "tab3", getResources().getDrawable(R.drawable.tab3tabicon), new Intent().setClass(this, tab3Activity.class).putExtra("fb_id", fid).putExtra("first_name", fname).putExtra("last_name", lname).putExtra("gender", gender));
        setupTab(new TextView(this), "tab4", getResources().getDrawable(R.drawable.tab4tabicon), new Intent().setClass(this, tab4Activity.class));
        //setupTab(new ImageView(this), getResources().getDrawable(R.drawable.icon));
        tabHost.setCurrentTab(0);

        tabHost.setup();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        fname = getIntent().getStringExtra("fname");
        lname = getIntent().getStringExtra("lname");
        eadd = getIntent().getStringExtra("eadd");
        fid = getIntent().getStringExtra("fbid");
        gender = getIntent().getStringExtra("gender");

        setupTabHost();

    }

    private void setupTab(final View view, final String tag, Drawable drawable, final Intent i) {
        View tabview = createTabView(tabHost.getContext(), tag, drawable);
        TabSpec setContent = tabHost.newTabSpec(tag).setIndicator(tabview).setContent(i);
        tabHost.addTab(setContent);
    }

    private static View createTabView(final Context context, final String text, final Drawable icon) {
        final View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);

        ImageView bg_icon = (ImageView) view.findViewById(R.id.tab_bg);
        bg_icon.setImageDrawable(icon);
        return view;
    } 
```

我非常需要将其删除，因为它会刺激我的眼睛，而且我浪费了一天的时间来寻找答案，最终还是在这里问它。哈哈！提前感谢那些可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:41:45.353

确保您的 rsvptabicon 与您正在使用的其他选项卡图标没有什么不同。我很确定这条线与您的可绘制对象有关。

# javascript - “/”是否等于“window.location.protocol + '//' + window.location.host”

> ID：12689126
> 
> 赞同：3
> 
> 时间：2012-10-02T11:05:52.850
> 
> 标签：javascript, ajax

在 JavaScript 中进行 AJAX 请求时，是否有必要编写

```
window.location.protocol + '//' + window.location.host 
```

而不是简单地

```
/ 
```

毕竟，图像、脚本和 css 等文件始终是相对指定的，因此在发出 ajax 请求时应该是相同的。

我问这个的原因是因为我找不到任何关于如何做的官方建议（例如来自 w3c）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:13:15.960

它们并不完全相同，因为`window.location.protocol + '//' + window.location.host`缺少用于指示根目录的斜杠。但出于所有意图和目的，它们可以互换使用。

在实际使用中，假设您不使用`<base>`，以下所有内容都将指向同一个地方：

```
window.location.protocol + '//' + window.location.host + '/'
window.location.href
'//' + window.location.host + '/'  //useful if you don't know the scheme and don't want to check
'/' 
```

`window.location.host`如果端口号不是 80，则包含端口号，因此您不必担心包含该端口号。写起来更简单，更清晰`'/'`，因为它总是意味着“这个页面来自哪个服务器的根目录”。如果 URI 包含类似的内容，事情可能会变得棘手`username:password@`——我不知道使用 JS 获取该数据的方法。如果将代码迁移到这样的不寻常环境，尝试从各个组件重新组装 URI 可能会导致问题。

所有这一切的正式定义都在[RFC3986](http://www.ietf.org/rfc/rfc3986.txt)中，这并不完全是简单的阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:18:33.693

我只能提出一个区别：如果您`<base />`的 HTML 文档中有标签，AJAX（至少 jQuery 会）似乎会考虑这个标签并更改您的 URL。

在任何其他情况下，两者的行为应该相同。`<base>`无论如何你都应该避免。

```
<head>
    <title>untitled</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <base href="http://example.com/foo/" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>$.get("/bar");</script>
</head>

<body>
    <a href="#">Base test</a>
</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:38:29.140

我很确定它们的意思完全相同，但老实说，我建议只使用`/`. 仅仅是因为它是一个原始字符串，而不是`Object->Object->string + string + Object->Object->script`如果这有意义。

# django - 模型选择字段。ID而不是名字

> ID：12689129
> 
> 赞同：5
> 
> 时间：2012-10-02T11:06:18.860
> 
> 标签：django

在`send_option`（视图中）我有的变量`name`中`Send`。我想`ID`拥有`Send`

怎么做？谢谢

形式：

```
class SendOrderForm(forms.Form):
   send_option = forms.ModelChoiceField(queryset=Send.objects.all()) 
```

模型：

```
class Send(models.Model):
    name = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=5, decimal_places=2)
    time = models.CharField(max_length=150) 
```

意见：

```
if request.method == 'POST':
        form = SendOrderForm(request.POST)
        if form.is_valid():
            send_option = form.cleaned_data['send_option'] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T11:11:02.943

你能做的是，

```
if request.method == 'POST':
    form = SendOrderForm(request.POST)
    if form.is_valid():
        send_option = form.cleaned_data['send_option'].id 
```

`form.cleaned_data['send_option']`会得到对象，你可以`id` 通过做一个`.pk`或得到它`.id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:17:09.773

您的`Send`模型是否具有返回实例的方法`__unicode__`或方法？`__str__``name`

如果是这样，您需要返回`id`实例而不是`name`.

# c# - Jquery通过ID选择li之外的元素

> ID：12689130
> 
> 赞同：0
> 
> 时间：2012-10-02T11:06:23.083
> 
> 标签：c#, jquery, asp.net, toggle

我希望通过 id 选择跟随元素`toggleThisDiv`。标记看起来像：

```
 <li id="liCategory" runat="server">
       <asp:HyperLink ID="lnkCategory" runat="server">
       <span><asp:Literal ID="litCategory" runat="server" Visible="true" /></span>
       <asp:Image ID="imgMan" runat="server" Visible="false" /></asp:HyperLink>
       <asp:Button ID="btnToggleDiv" runat="server" Text="+" Visible="false" />
 </li>

 <div id="toggleThisDiv" runat="server" style="display:none;margin-top:-16px;"> 
```

和 jQuery：

```
$(document).ready(function () {
        $('[id*="btnToggleDiv"]').click(function () {
            $(this).next().slideToggle(100);
            return false;
        });
    }); 
```

这在按钮位于列表项之外时有效，但这都在中继器内，如果我这样离开，所有创建的按钮将彼此相邻，而不是在其关联的列表项中。

我正在 jQuery 中寻找可以让我选择下一个 div (toggleThisDiv) 的东西，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:19:09.890

如果生成将使用相同标识符的元素，请使用唯一 ID 或类。

要定位单击元素的当前父元素之外的元素，您可以找到与选择器匹配的最近的父元素，然后是下一个元素等。

```
$(document).ready(function () {
   $('[class*="btnToggleDiv"]').on('click', function () {
       $(this).closest('li').next('div').slideToggle(100);
       return false;
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:17:27.467

使用类似这样的东西来选择 toggleThisDiv

```
$('#<%= toggleThisDiv.ClientID %>') 
```

当网站从您的 asp 代码生成时，您的 ID 将与您提供的不同。这是因为它们在服务器上运行。每当您使用 runat 服务器时，请使用上述格式查找生成的 ID。

不过，您应该在内部使用一个类来转发器。

# c# - 阅读器关闭时尝试阅读无效

> ID：12689132
> 
> 赞同：4
> 
> 时间：2012-10-02T11:06:38.403
> 
> 标签：c#, mysql, database, datareader

我的应用程序有一个通用数据库类，在那个类中我有一个函数

```
public MySqlDataReader getRecord(string query)
        {
            MySqlDataReader reader;
            using (var connection = new MySqlConnection(connectionString))
            {
                connection.Open();
                using (var cmd = new MySqlCommand(query, connection))
                {

                    reader = cmd.ExecuteReader();
                    return reader;

                }
            }

            return null;
        } 
```

在我使用的页面后面的代码中

```
String sql = "SELECT * FROM `table`";
MySqlDataReader dr = objDB.getRecord(sql);
if (dr.Read())
{
   // some code goes hear
} 
```

当阅读器关闭时，我遇到错误，因为**尝试读取无效。**

我知道在关闭数据库连接后访问阅读器是不可能的机器人我**正在寻找一种****不需要更改代码隐藏的解决方法**

**编辑：我会喜欢将阅读器分配给其他对象（类似于阅读器）然后返回该对象的解决方案，**因此我不需要在所有应用程序页面中进行更改

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T12:00:44.870

您可以将查询结果加载到内存中，然后关闭连接并仍然返回`IDataReader`按预期工作的。请注意，这会消耗内存。

```
public IDataReader getRecord(string query)
    {
        MySqlDataReader reader;
        using (var connection = new MySqlConnection(connectionString))
        {
            connection.Open();
            using (var cmd = new MySqlCommand(query, connection))
            {

                reader = cmd.ExecuteReader();
                var dt = new DataTable();
                dt.Load( reader );
                return dt.CreateDataReader();
            }
        }

        return null;
    } 
```

在来电者中：

```
String sql = "SELECT * FROM `table`";
var dr = objDB.getRecord(sql); // or DataTableReader dr = ...
if (dr.Read())
{
    // some code goes here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T11:10:58.983

当您的呼叫范围`using (var connection = new MySqlConnection(connectionString))` 结束时，连接将被关闭。

但是，您仍在返回基于该连接的阅读器。一旦您尝试在调用方方法中使用它，您将收到错误，因为无法使用关闭的连接。

此外，您的方法被调用`GetRecord`，但它返回一个阅读器。

一种选择是这样做：

```
public void processQuery(string query, Action<MySqlDataReader> fn)
{
    using (var connection = new MySqlConnection(connectionString))
    {
        connection.Open();
        using (var cmd = new MySqlCommand(query, connection))
        {
            using (var reader = cmd.ExecuteReader())
            {
               fn(reader);
            }
        }
    }
}

// caller
String sql = "SELECT * FROM `table`";
objDB.procesQuery(sql, dr => {
    if (dr.Read())
    {
       // some code goes here
    } 
}); 
```

您创建一个“类似于阅读器”的对象的想法，因此您不必更改调用者，这是行不通的：返回的对象需要同时包含阅读器和打开的连接，以便您可以使用阅读器。这意味着您必须关闭调用方中的连接。在最好的情况下，调用者需要进行如下修改：

```
String sql = "SELECT * FROM `table`";
using (MyWrapper wr = objDB.getRecord(sql))
{
   if (wr.Reader.Read())
   {
      // some code goes here
   } 
} 
```

您不会节省那么多工作，但是`using`调用者中缺少一条语句将导致您的应用程序在一段时间后由于连接泄漏而无法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:58:28.183

您想要的都是可能的，但这不是一个好的解决方案，因为您必须包装`MySqlDataReader`类的所有功能并将其转发给真正的`MySqlDataReader`. 查看`ConnectedMySqlDataReader`类（提示：它没有实现 MySqlDataReader 的所有功能，如果你真的想使用它，你必须自己做）以及它如何适合你的解决方案：

```
public ConnectedMySqlDataReader GetRecord(string query)
{
    return new ConnectedMySqlDataReader(connectionString, query);
}

// ...

var sql = "SELECT * FROM `table`";
using(var dr = objDB.GetRecord(sql))
{
    if (dr.Read())
    {
        // some code goes hear
    } 
 } 
```

我没有测试过这个类，它只是为了演示！

```
using System;
using System.Collections;
using System.Data;
using System.Data.Common;
using MySql.Data.MySqlClient;

namespace MySqlTest
{
    public class ConnectedMySqlDataReader : DbDataReader
    {
        private readonly MySqlConnection _connection;
        private readonly Lazy<MySqlDataReader> _reader;
        private MySqlCommand _command;

        public ConnectedMySqlDataReader(MySqlConnection connection, string query)
        {
            if(connection == null)
                throw new ArgumentNullException("connection");
            _connection = connection;
            _reader = new Lazy<MySqlDataReader>(() =>
            {                
                _connection.Open();
                _command = new MySqlCommand(query, _connection);
                return _command.ExecuteReader();
            });
        }

        public ConnectedMySqlDataReader(string connectionString, string query)
            : this(new MySqlConnection(connectionString), query) { }

        private MySqlDataReader Reader
        {
            get { return _reader.Value; }
        }

        public override void Close()
        {
            if (_reader.IsValueCreated)            
                _reader.Value.Close();
            if(_command != null)
                _command.Dispose();
            _connection.Dispose();
        }

        public override DataTable GetSchemaTable()
        {
            return this.Reader.GetSchemaTable();
        }

        public override bool NextResult()
        {
            return this.Reader.NextResult();
        }

        public override bool Read()
        {
            return this.Reader.Read();
        }

        public override int Depth
        {
            get { return this.Reader.Depth; }
        }

        public override bool IsClosed
        {
            get { return this.Reader.IsClosed; }
        }

        public override int RecordsAffected
        {
            get { return this.Reader.RecordsAffected; }
        }

        public override bool GetBoolean(int ordinal)
        {
            return this.Reader.GetBoolean(ordinal);
        }

        public override byte GetByte(int ordinal)
        {
            return this.Reader.GetByte(ordinal);
        }

        public override long GetBytes(int ordinal, long dataOffset, byte[] buffer, int bufferOffset, int length)
        {
            return this.Reader.GetBytes(ordinal, dataOffset, buffer, bufferOffset, length);
        }

        public override char GetChar(int ordinal)
        {
            return this.Reader.GetChar(ordinal);
        }

        public override long GetChars(int ordinal, long dataOffset, char[] buffer, int bufferOffset, int length)
        {
            return this.Reader.GetChars(ordinal, dataOffset, buffer, bufferOffset, length);
        }

        public override Guid GetGuid(int ordinal)
        {
            return this.Reader.GetGuid(ordinal);
        }

        public override short GetInt16(int ordinal)
        {
            return this.Reader.GetInt16(ordinal);
        }

        public override int GetInt32(int ordinal)
        {
            return this.Reader.GetInt32(ordinal);
        }

        public override long GetInt64(int ordinal)
        {
            return this.Reader.GetInt64(ordinal);
        }

        public override DateTime GetDateTime(int ordinal)
        {
            return this.Reader.GetDateTime(ordinal);
        }

        public override string GetString(int ordinal)
        {
            return this.Reader.GetString(ordinal);
        }

        public override object GetValue(int ordinal)
        {
            return this.Reader.GetValue(ordinal);
        }

        public override int GetValues(object[] values)
        {
            return this.Reader.GetValues(values);
        }

        public override bool IsDBNull(int ordinal)
        {
            return this.Reader.IsDBNull(ordinal);
        }

        public override int FieldCount
        {
            get { return this.Reader.FieldCount; }
        }

        public override object this[int ordinal]
        {
            get { return this.Reader[ordinal]; }
        }

        public override object this[string name]
        {
            get { return this.Reader[name]; }
        }

        public override bool HasRows
        {
            get { return this.Reader.HasRows; }
        }

        public override decimal GetDecimal(int ordinal)
        {
            return this.Reader.GetDecimal(ordinal);
        }

        public override double GetDouble(int ordinal)
        {
            return this.Reader.GetDouble(ordinal);
        }

        public override float GetFloat(int ordinal)
        {
            return this.Reader.GetFloat(ordinal);
        }

        public override string GetName(int ordinal)
        {
            return this.Reader.GetName(ordinal);
        }

        public override int GetOrdinal(string name)
        {
            return this.Reader.GetOrdinal(name);
        }

        public override string GetDataTypeName(int ordinal)
        {
            return this.Reader.GetDataTypeName(ordinal);
        }

        public override Type GetFieldType(int ordinal)
        {
            return this.Reader.GetFieldType(ordinal);
        }

        public override IEnumerator GetEnumerator()
        {
            return this.Reader.GetEnumerator();
        }
    }
} 
```

PS：这就是[在 c# 上下文中密封的](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)意思，是的，`MySqlDataReader`是`sealed`.

# gitolite - Gitolite：为除一个回购之外的所有回购调用 VREF

> ID：12689134
> 
> 赞同：1
> 
> 时间：2012-10-02T11:06:42.303
> 
> 标签：gitolite

我有以下设置。我想检查提交是否具有特定的提交消息格式（行限制等）。我想要所有的回购，但一两个。
我怎么能告诉这个 gitolite 而不必定义一个`@check_msg`包含大多数 repos 的组。这会很麻烦...在我`BADCOMMIT VREF`的 中，如果使用 NOCHECK 调用消息，我已经包含了一些不检查消息的行。

有任何想法吗？？

```
repo    testing
  RW+                           = @all
  ?     VREF/BADCOMMIT/NOCHECK  = @all

repo    @all
  -     VREF/BADCOMMIT          = @all

repo    gitolite-admin
  RW... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:21:46.863

我建议您不要使用 git notes，而是这样做：

```
repo    testing
  RW+                           = @all
  option badcommit.nocheck      = 1

repo    @all
  -     VREF/BADCOMMIT          = @all 
```

然后，在 VREF 开始时，你说

```
gitolite git-config -q $GL_REPO gitolite-options.badcommit.nocheck && exit 0 
```

更干净，异常的知识保留在 gitolite.conf 中。

（当然假设是 v3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:23:55.950

考虑：

*   [**VREF**](http://sitaramc.github.com/gitolite/vref.html)不知道调用它的 git repo 名称或路径，并添加：
*   fallthrough 意味着成功（这意味着，正如 matt 评论的那样，它将检查*所有*VREFS）

VREF 脚本“”的唯一解决方案似乎是在*不*`BADCOMMIT`应该测试的 git repo 中以某种方式检测到它。 如果按照惯例，所说的 git repo 包含一个 ** git [notes](http://alblue.bandlem.com/2011/11/git-tip-of-week-git-notes.html)（**您可以随时添加，无需更改 git 历史记录，请参见用它的检查。 *[`man git notes`](http://git-scm.com/docs/git-notes)*

 *由于很少有 git repos 不应该使用 进行测试，因此您可以在该 repo[的第一次提交](https://stackoverflow.com/a/3270712/6309)`BADCOMMIT`中添加注释。

这样，您不需要 a `NOCHECK`，并且您不需要在某个规则之后停止。*

# javascript - 如何使用 jQuery 在事件处理程序上获取文档，但文档中的一个类除外？

> ID：12689135
> 
> 赞同：1
> 
> 时间：2012-10-02T11:06:54.177
> 
> 标签：javascript, jquery, mouseevent

我需要在 mousemove 事件中获取整个文档，但使用 jQuery 的文档中的一个类除外

我的课是`no-mousemove-node`。

```
$(document).mousemove(
        function(e){  
        ....
});. 
```

我尝试如下，但没有工作

```
$(document).not('.no-mousemove-node').mousemove(
        function(e){  
        ....
});. 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:09:05.190

在事件处理程序中使用[`e.target`](http://api.jquery.com/event.target/)以查看源元素是否符合您的条件，如果不符合则中止执行：

```
$(document).mousemove(
    function(e){  
        if ($(e.target).is(".no-mousemove-node")) return;
        // now do what you need
    }
}); 
```

**更新：**如果您还需要过滤掉`.no-mousemove-node`use的后代`.closest`以确定您是否是，或者有一个父母，即 a `.no-mousemove-node`：

```
function(e){  
    if ($(e.target).closest(".no-mousemove-node").length) return;
} 
```

# symfony - 带推进的 symfony2 表单的实体字段类型等效项是什么？

> ID：12689136
> 
> 赞同：2
> 
> 时间：2012-10-02T11:06:56.827
> 
> 标签：symfony, symfony-forms, symfony-2.1

带有 Doctrine 的 symfony 2 中的实体字段类型似乎是一个非常好的特性。但是我正在使用带有 symfony 2 的推进器，并且一直在努力寻找一个等价物。

在实体字段类型的情况下，如何使用带有推进的 symfony 2 表单来实现等效？难道，只有教义才能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:35:11.330

你`model`在 symfony 中输入了[propel bridge](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Propel1/Form/Type/ModelType.php)它相当于`entity`from 学说。

[您可以在推进文档](http://www.propelorm.org/cookbook/symfony2/mastering-symfony2-forms-with-propel.html#the_modeltype)中检查如何使用它， 例如：

```
$builder->add('author', 'model', array(
   'class' => 'Acme\LibraryBundle\Model\Author',
)); 
```

# windows - 如何在 Windows 上更改 Jenkins 默认文件夹？

> ID：12689139
> 
> 赞同：43
> 
> 时间：2012-10-02T11:07:30.620
> 
> 标签：windows, continuous-integration, jenkins, hudson

如何在 Jenkins 作为 Windows 服务运行的 Windows 上更改 Jenkins 默认文件夹。由于分区空间不足，我想更改`C:\Users\Coola\.jenkins`文件夹（每个构建需要约 10MB 的可用空间）。我不想重新安装为 Windows 服务。我只想更改现有实例的文件夹。如果缺乏全局解决方案，我只能专注于重新定位文件夹。`d:\Jenkins``C:``Jenkins``Jenkins``jobs`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-03T10:04:23.423

*   停止 Jenkins 服务
*   将`C:\Users\Coola\.jenkins`文件夹移动到`d:\Jenkins`
*   使用注册表，更改`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Jenkins\ImagePath`为`"d:\Jenkins\jenkins.exe"`
*   启动服务

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-17T22:44:53.330

显然，克的答案有效，但不是首选。在 Windows 中，软件和数据/配置文件应该位于不同的位置。这对于 Unix 人来说应该是众所周知的，它基本上就像拥有一个主目录。但是，无论如何，关于 JENKINS_HOME 的措辞都被破坏了，因为尽管帮助文本中说了些什么，但设置环境变量并没有帮助。

我使用了这里描述的过程：http: [//tech.nitoyon.com/en/blog/2014/02/25/jenkins-home-win/](http://tech.nitoyon.com/en/blog/2014/02/25/jenkins-home-win/)

基本上：

1.  停止 Jenkins 服务
2.  编辑Jenkins 安装目录中的`<env name="JENKINS_HOME" value="%BASE%"/>`条目。`jenkins.xml`这将类似于`C:\Program Files (x86)\Jenkins`. 在你的情况下`value`必须设置为`d:\Jenkins`
3.  将文件从安装目录移动到新的目的地，`d:\Jenkins`除了（其中一些可能在全新安装中不存在）

    *   jre 文件夹
    *   詹金斯错误日志
    *   詹金斯程序
    *   詹金斯.exe.config
    *   jenkins.out.log
    *   詹金斯战争
    *   詹金斯战争变种bak
    *   詹金斯战争变种tmp
    *   jenkins.wrapper.log
    *   詹金斯.xml

        4.  再次重新启动服务。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-28T22:54:45.490

这是对我有用的答案：[詹金斯：如何在 Windows 上更改 JENKINS_HOME](http://tech.nitoyon.com/en/blog/2014/02/25/jenkins-home-win/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-18T12:38:34.193

当您阅读[管理 Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Administering+Jenkins)时，您可以阅读如何修改 JENKINS_HOME 环境变量的所有选项。

在[这个网站上](https://wiki.jenkins-ci.org/display/JENKINS/Tomcat)，您可以阅读如何配置 Tomcat 容器以覆盖 JENKINS_HOME 环境变量，他们建议创建文件 $CATALINA_BASE/conf/localhost/jenkins.xml，其内容如下：

```
<Context docBase="../jenkins.war">
    <Environment name="JENKINS_HOME" type="java.lang.String" value="/data/jenkins" override="true"/>
</Context> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T12:00:14.403

除了克答案之外，最重要的部分是创建一个名为 JENKINS_HOME 的环境变量，其值为“D:\Jenkins”。没有它，在启动 Jenkins 时，它将再次在您的用户主文件夹中创建 .jenkins 文件夹。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-20T11:42:43.800

我能够在此[http://tech.nitoyon.com/en/blog/2014/02/25/jenkins-home-win/之后更改 JENKINS_HOME 变量](http://tech.nitoyon.com/en/blog/2014/02/25/jenkins-home-win/)

将 JUST %JENKINS_HOME% 设置为 Windows 系统范围的环境变量没有任何效果！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-29T09:11:47.110

我们通过将 .war 放到 Tomcat 中进行安装，并且可以通过**设置**环境变量`JENKINS_HOME`（重启服务）来设置主页。

# javascript - 通过 Jquery 从 php 页面读取 xml

> ID：12689141
> 
> 赞同：0
> 
> 时间：2012-10-02T11:07:35.177
> 
> 标签：javascript, xml, jquery

我的 XML 文件：

```
<?xml version="1.0"?>
 <xml>
  <weather>
   <location>Wonderland</location>
   <temp>20</temp>
  </weather>
 </xml> 
```

我的JavaScript：

```
<script type="text/javascript">
// <![CDATA[
$(document).ready(function(){

 $.ajax({

  type: "GET",

  url: "https://..../Weather.php",

  dataType: "xml",

   success: function(xml) {

    $(xml).find('weather').each(function(){

     var location = $(this).find("location").text();

     var temp = $(this).find("temp").text();

     $("#footer").append(temp+location);

      });

     }

     });

   });

  // ]]>

 </script> 
```

有人可以告诉我我哪里错了吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:40:39.077

你可以看看[Origin http://localhost is not allowed by Access-Control-Allow-Origin.?](https://stackoverflow.com/questions/12683530/origin-http-localhost-is-not-allowed-by-access-control-allow-origin/12683591#comment17119419_12683591) - 您可能会遇到跨域问题。

# c - Win32 API 命令行参数解析

> ID：12689142
> 
> 赞同：17
> 
> 时间：2012-10-02T11:07:37.137
> 
> 标签：c, windows, winapi, command-line, command-line-arguments

我正在编写 Win32 控制台应用程序，它可以使用如下可选参数启动：

```
app.exe /argName1:"argValue" /argName2:"argValue" 
```

我是否必须从 argc/argv 变量中手动解析它（以便能够确定存在哪些参数），或者 Win32 API 是否包含一些参数解析器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T11:21:03.520

Win32 不支持**解析**命令行参数。

请参阅 MSDN 上的相关文章：
[解析 C++ 命令行参数](http://msdn.microsoft.com/en-us/library/17w5ykft.aspx)
[参数定义](http://msdn.microsoft.com/en-us/library/88w63h9k%28v=vs.85%29.aspx)
[自定义 C++ 命令行处理](http://msdn.microsoft.com/en-us/library/zay8tzh6%28v=vs.85%29.aspx)

也看看类似的问题：
[C++ 有哪些参数解析器库？](https://stackoverflow.com/q/253556/1168156)
[将参数解析](https://stackoverflow.com/q/9943566/1168156)
[为 C/C++ 的 main() 选项解析器？](https://stackoverflow.com/questions/637371/option-parsers-for-c-c)
[在 C++ 中解析命令行参数的有效方法是什么？](https://stackoverflow.com/q/3826897/1168156)
...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T12:45:31.387

Win32 为命令行参数提供的唯一支持是函数`GetCommandLine`和`CommandLineToArgvW`. `argv`这与控制台应用程序的参数完全相同。

您必须自己进行解析。正则表达式将是一个不错的选择。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T11:33:04.447

你可能会弄乱各种库和东西......但有时你需要的只是简单、实用和快速的东西：

```
int i;
char *key, *value;

for( i = 1; i <= argc; i++ ) {
    if( *argv[i] == '/' ) {
        key = argv[i] + 1;
        value = strchr(key, ':');
        if( value != NULL ) *value++ = 0;
        process_option( key, value );
    } else {
        process_value( argv[i] );
    }
} 
```

你明白了……

这是假设您暗示的普通 Win32 控制台应用程序（具有传统`main`功能）。对于 Win32 应用程序，您可以使用`WinMain`，正如另一个人已经评论过的那样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-25T00:29:57.603

仅作记录，如果您使用[MinGW 的 GCC](http://mingw.org)，而不是 Microsoft 的 MSVC，您将获得标准运行时库中包含的 GNU getopt（还包括 getopt_long 和 getopt_long_only 变体）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-30T18:26:11.243

您可以通过`GetCommandLine, PathRemoveArgs, PathGetArgs`在循环中使用

[https://msdn.microsoft.com/en-us/library/windows/desktop/bb773742(v=vs.85).aspx来解析参数](https://msdn.microsoft.com/en-us/library/windows/desktop/bb773742(v=vs.85).aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-16T13:58:21.853

我一直在开发和使用用纯 C 编写的[libparamset](https://github.com/guardtime/libparamset)。它非常强大，并且在 Windows 上运行良好。它提供：

*   是跨平台的。
*   Windows 上文件输入的通配符支持！
*   强大的功能。请参阅[libparamset](https://github.com/guardtime/libparamset)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-27T11:20:56.017

如果您的需求很简单，您可能想看看[*Argh！*](https://github.com/adishavit/argh).
它是单个标头并且超级易于使用：

```
int main(int, char* argv[])
{
    argh::parser cmdl(argv);          // declare

    if (cmdl[{ "-v", "--verbose" }])  // use immediately
        std::cout << "Verbose, I am.\n";

    return EXIT_SUCCESS;
} 
```

通过不打扰，它不会接管你的`main()`功能。

从自述文件：

> ### 哲学
> 
> 与许多替代方案相反，`argh`它采用极简主义*的自由放任*方法，非常适合具有以下规则的简单原型设计：
> 
> API 是：
> 
> *   简约但富有表现力：
>     *   没有吸气剂或粘合剂
>     *   只是`[]`and`()`运算符。
>     *   简单的迭代（范围`for`也是）。
> *   你不用为不用的东西付费；
> *   在解析阶段*之后*`std::istream >>`，在用户端（通过）转换为类型化变量；
> **   没有因失败而引发的异常。*   自由 BSD 许可证；*   单个头文件；*   没有非`std`依赖性。*
> 
>  *`argh`不关心：
> 
> *   `-`您的选项之前有多少个“ ”；
> *   您支持哪些标志和选项 - 这是您的责任；
> *   语法验证：*任何命令行都是位置**参数*、*标志*和 *选项*的有效（*不一定是唯一的*）组合；
> ****   自动生成使用消息。****

 **** * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-02T11:17:35.097

我不相信有可用的 Win32 API。[您可以查找getopt](http://en.wikipedia.org/wiki/Getopt)或其他库的 Windows 实现。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-02T11:18:12.537

不确定是否存在这样的 win32 api 函数，但[Boost.Program_Options](http://www.boost.org/doc/libs/1_51_0/doc/html/program_options.html)库可以帮助您。***

# c#-4.0 - 使用 JsonConvert.DeserializeObject (v 4.0.8.14612) 将 json 字符串反序列化为 C#.net 类

> ID：12689143
> 
> 赞同：2
> 
> 时间：2012-10-02T11:07:38.140
> 
> 标签：c#-4.0, teamcity, deserialization, json.net

在我的 Web 应用程序中，我编写了一些测试来测试我的反序列化逻辑，该逻辑将 json 字符串解析到我的 C# 类中。这些测试在我的计算机上运行良好，但在我们的 CI 环境中失败并显示以下错误消息：

```
Test(s) failed. System.TypeInitializationException : The type initializer for 'Newtonsoft.Json.JsonConvert' threw an exception. ----> System.Security.VerificationException : Operation could destabilize the runtime. 
```

一个 json 字符串示例是这样的（来自测试类）：

```
private const string MatrikkelJson = "{'Gaardsnummer':'9','Bruksnummer':'9','Festenummer':'8','Seksjonsnummer':'8','BlankAllowed':'False','AttrType':'Matrikkel'}"; 
```

此字符串应反序列化为此类：

```
public class MatrikkelDTO : AttributeBaseDTO
    {
        public string Gaardsnummer { get; set; }
        public string Bruksnummer { get; set; }
        public string Festenummer { get; set; }
        public string Seksjonsnummer { get; set; }
    }

public class AttributeBaseDTO
    {        
        public bool BlankAllowed { get; set; }     
        public string AttrType { get; set; }
    } 
```

反序列化 json 字符串的方法是这样工作的：我首先反序列化 baseobject 以获取 AttrType 属性。使用该信息，我将 json 字符串反序列化为特定类型（我有几个继承自 AttributBaseDTO 的类。

```
public AttributeValidationHandlerResponse ValidateAttribute(string serializedObject)
        {
            var response = new AttributeValidationHandlerResponse();
            response.Result = false;
            //hack... this handler gets called when opening newdocument.aspx. don't know why.
            if (serializedObject.Contains("function"))
            {                
                response.Message = "";
                return response;
            }

            if (String.IsNullOrEmpty(serializedObject))
            {                
                response.Message = "attributeobject";
                return response;
            }

            var message = "";
            var attributeBase = JsonConvert.DeserializeObject<AttributeBaseDTO>(serializedObject);

if (attributeBase.AttrType == "Matrikkel")
            {
                var attribute = ConvertJsonStringToAttribute<MatrikkelDTO>(serializedObject);
                response = ValidateMatrikkel(attribute);
            }
            return response;
        }

        internal T ConvertJsonStringToAttribute<T>(string serializedObject)
        {            
            return JsonConvert.DeserializeObject<T>(serializedObject);
        } 
```

但我无法弄清楚为什么它在我的机器上而不是在构建服务器上工作。我正在使用 VS 2010、asp.net 4.0、net framework 4.0。测试框架是 nunit 2.5.5

任何线索任何人？

# javascript - D3.js - 条形图的 xAxis 宽度太短

> ID：12689147
> 
> 赞同：2
> 
> 时间：2012-10-02T11:07:57.103
> 
> 标签：javascript, visualization, d3.js

我使用 D3.js创建了一个条形图（[小提琴）。](http://jsfiddle.net/KDrQs/1/)

我有一个（可能非常简单）的问题，我很乐意得到一些支持：

为什么x轴太短？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:20:21.497

较旧的问题，以及我在 Stack 上的第一次回答尝试，但希望仍然有用：

据我所知，您的 X 域仅到达 XMax，这将是图表最后一个条形的左下角 - 它并没有出现“短”，它只是不知道 XMax 之后条形有多宽.

（它不考虑您添加 20 像素的 barWidth，并且您的文本位置确实考虑了额外的宽度，这似乎是您只看到 Axis 问题的原因。）

为了将轴一直延伸到最后，您必须考虑域中的额外 barWidth，或者以另一种方式附加额外的 barWidth。这可以通过在 xMax 上再增加半天左右，或者将每个条移到其 X 位置 (-barWidth) 的左侧而不是 +barWidth 来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:06:56.300

x 轴不是太短（它对于您的最大值来说正好足够高），但您可能希望它是[nice](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_nice)。

```
var y = d3.scale.linear()
    .domain([0, yMax])
    .range([h - margin.top - margin.bottom, 0])
    .nice(); 
```

# javascript - java脚本中的本地文件访问

> ID：12689151
> 
> 赞同：0
> 
> 时间：2012-10-02T11:08:11.057
> 
> 标签：javascript, three.js

我正在使用 Pannellum，这是一个使用 HTML5 并使用 JavaScript 开发的免费全景查看器。

[http://www.mpetroff.net/archives/2012/05/28/introducing-pannellum/](http://www.mpetroff.net/archives/2012/05/28/introducing-pannellum/)

该应用程序运行良好，如果图像在网络上，但如果它是本地的（假设我在本地有一个 html 文件并且我想在本地打开一个全景文件）。它不起作用。

有什么方法可以让我在本地处理文件并让这个应用程序工作？似乎它正在使用 three.js 并使用 image() 控件加载图像。

在本地浏览器中打开本地文件时，我需要能够使用此应用程序下载本地文件。我知道来自网站的 JavaScript 无法打开本地文件，在这种情况下，所有文件都是本地文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:24:10.290

看看这个维基： [https ://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)

# javascript - Adobe Acrobat Reader 选项卡保存和自动加载

> ID：12689154
> 
> 赞同：25
> 
> 时间：2012-10-02T11:08:24.067
> 
> 标签：javascript, linux, macos, acrobat

我为 Acrobat Reader 创建了 Javascript，它允许您保存当前打开的选项卡。它添加了菜单项：“保存选项卡”、“加载选项卡”和“切换自动加载”。它保存选项卡和页码，并恢复它们。

这对于没有很多 pdf 阅读器可用的 Linux 尤其有用。但是，我无法弄清楚如何捕获打开或关闭文档事件，或者设置一些计时器事件来自动存储当前选项卡列表。

[这是 Adob​​e Acrobat 的原始 API 参考](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/js_api_reference.pdf)。

```
/*
   Here is the script, put it in $HOME/.adobe/Acrobat/9.0/JavaScripts (or in 
   the equivalent program files folder under Windows,) and it will automatically
   be loaded. 

   When you need to save current state, choose menu "view -> Save Tabs", to restore 
   recently saved tabs choose "view -> Load Tabs". 
*/

var delim = '|';
var parentMenu = "View";

/*
 Loading Saved Tabs
*/
function LoadTabs() {

  if (global.tabs_opened == null) {
    return;
  }

  var flat = global.tabs_opened.split(delim);
  for (i = 0; i < flat.length; i += 2) {
    try {
      app.openDoc(flat[i]);
      app.execMenuItem("FirstPage");
      for (ii = 0; ii < flat[i + 1]; ++ii) {
        app.execMenuItem("NextPage");
      }
    } catch (ee) {
      app.alert("Error while opening the requested document.\n" + flat[i], 3);
    }
  }
}

/*
 Function with trusted section returning opened documents
*/
trustedActiveDocs = app.trustedFunction(function () {
  app.beginPriv();
  var d = app.activeDocs;
  app.endPriv();
  return d;
})

/*
 Saving Tabs that are opened
*/
function SaveTabs() {
  var d = trustedActiveDocs();
  var tabs = '';

  for (var i = 0; i < d.length; i++) {
    if (i > 0)
      tabs += delim;
    //    app.alert(d[i].path+"------"+d[i].pageNum,3);
    tabs += d[i].path;
    tabs += delim;
    tabs += d[i].pageNum;
  }
  global.tabs_opened = tabs;
  global.setPersistent("tabs_opened", true);
  app.alert("Tabs Saved", 3);

}
/*
 Toggle auto load tabs
 automatically loading tabs when reader starts
*/
function ToggleAuto() {
  if (global.tabs_auto == 0 || global.tabs_auto == null) {
    global.tabs_auto = 1;
    global.setPersistent("tabs_auto", true);
    app.alert("Tabs auto loading enabled", 3);
  } else {
    global.tabs_auto = 0;
    global.setPersistent("tabs_auto", true);
    app.alert("Tabs auto loading disabled", 3);
  }
}

app.addMenuItem({
  cName: "-",
  cParent: parentMenu,
  cExec: "void(0);"
});

app.addMenuItem({
  cName: "&Save Tabs",
  cParent: parentMenu,
  cExec: "SaveTabs();"
});

app.addMenuItem({
  cName: "&Load Tabs",
  cParent: parentMenu,
  cExec: "LoadTabs();"
});

app.addMenuItem({
  cName: "Toggle auto load",
  cParent: parentMenu,
  cExec: "ToggleAuto();"
});

if (global.tabs_auto == 1) {
  LoadTabs();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-24T17:53:00.517

感谢您从一个成熟的产品中实现这一[明显的功能遗漏的美妙开始。](https://acrobat.uservoice.com/forums/590923-acrobat-for-windows-and-mac/suggestions/19256677-reopen-pdfs-launched-in-previous-sessions-on-openi)Autohotkey 脚本将完成您正在寻找的内容。我在下面创建了一个，它会在您关闭 Acrobat 时自动保存选项卡布局。

此脚本适用于最新版本的 Acrobat Pro DC。在这个版本中，脚本菜单选项出现在“视图”菜单的底部。如果您的版本不同，则必须修改此脚本；如果您的 Acrobat 版本将自定义 Javascript 菜单选项放在其他位置，请在评论中报告。

```
if WinActive("ahk_class #32770") & WinActive("Adobe Acrobat", "Do you want to close all tabs or the current tab") {
    Send, !c
    WinWaitActive, ahk_class AcrobatSDIWindow
    Send, !v{Up 3}{Enter}
    WinWaitActive, Warning: JavaScript, Tabs Saved
    Send, {Space}
    WinMenuSelectItem, ahk_class AcrobatSDIWindow, , View, Save Tabs
    Send, ^q
} 
```

# php - PHP数组比较并查找匹配和不匹配的项目

> ID：12689155
> 
> 赞同：2
> 
> 时间：2012-10-02T11:08:29.087
> 
> 标签：php

我一直在使用这个脚本来查找匹配和不匹配的数组项。

我的代码是。

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

for($i=0; $i< count($parts1); $i++)
{

    for($j=0; $j< count($parts2); $j++)
    {

        if($parts1[$i] == $parts2[$j])
        {
            $match[] = $parts1[$i];
        } else {
            $nomatch[] = $parts1[$i];
        }
    }
}

print_r($match);
echo "<br>";
print_r($nomatch); 
```

通过使用此代码，我只得到匹配的项目而不是不匹配的项目。任何人都可以帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:11:51.007

您可以尝试使用`array_intersect`和`array_diff`

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

$match = array_intersect($parts1, $parts2);
$nomatch = array_diff($parts1, $parts2);

var_dump($match,$nomatch); 
```

输出

```
array
  0 => string 'red' (length=3)
  1 => string 'green' (length=5)
  2 => string 'blue' (length=4)
array
  3 => string 'yellow' (length=6) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T11:11:37.913

这可以通过 [array_intersect](http://www.php.net/manual/en/function.array-intersect.php)和[array_diff来完成](http://php.net/manual/en/function.array-diff.php)

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

$result = array_intersect($parts1 , $parts2 );
print_r($result); 
```

[**现场示例**](http://codepad.org/DXNBHuZY)

> ![在此处输入图像描述](../Images/4362b3644bdd04a64e242e87082136fb.png)

和

```
$result = array_diff($parts1 , $parts2 );

print_r($result); 
```

[**现场示例**](http://codepad.org/DFsPMcCj)

> ![在此处输入图像描述](../Images/844510ae9c6448eef889864b3c40da1b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:17:57.233

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";    
$parts2 = explode(',', $filter2);   

$match = array();
$nomatch = array();

foreach($parts1 as $v){     
    if(in_array($v,$parts2))
        $match[]=$v;
    else
        $nomatch[]=$v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T11:18:47.747

尝试这个

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

foreach($parts1 as $first)
{
    if(in_array($first, $parts2))
    {
        $match[] = $first;
    }
    else 
    {
        $nomatch[] = $first;
    }
}

print_r($match);
echo "<br>";
print_r($nomatch); 
```

或者您可以使用 array_diff 获取不匹配的项目

```
print_r(array_diff($parts1,$parts2)); 
```

和匹配的项目使用

```
print_r(array_intersect($parts1,$parts2)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T11:13:34.630

因为你的嵌套循环没有在黄色时间运行试试这个

```
$filter1 = "red,green,blue,yellow";    
$filter2 = "red,green,blue,gray"; 
```

或者

```
for($j=0; $j<= count($parts2); $j++) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T11:24:59.957

试试下面的代码

```
$filter1 = "red,green,blue,yellow";
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue,purple";
$parts2 = explode(',', $filter2);

$matching = array_intersect($parts1, $parts2);
$non_matching = array_diff(array_merge($parts1, $parts2), $matching); 
```

更改您的代码，它应该具有与不匹配类似的结果`array_diff($parts1, $parts2);`

```
for($i=0; $i< count($parts1); $i++)
{
  $is_matching = false;
  for($j=0; $j< count($parts2); $j++)
  {
    if($parts1[$i] == $parts2[$j])
    {
      $is_matching = true;
      break;
    }
  }
  if ($is_matching) {
    $match[] = $parts1[$i];
  } else {
    $nomatch[] = $parts1[$i];
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-02T15:52:01.493

您可以使用[array_intersect找到匹配值，使用](http://php.net/manual/en/function.array-intersect.php)[array_diff](http://php.net/manual/en/function.array-diff.php)找到不匹配值。

在这里你可以看到[LIVE DEMO](http://sandbox.onlinephpfunctions.com/code/a383295f0798ae4afd8b01507fd0932c48780b0d)

```
/**
 * @param $arr
 */
function pr($arr)
{
    echo '<pre>';
    print_r($arr);
    echo '</pre>';
}

$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

$match = array_intersect($parts1, $parts2);
$nomatch = array_diff($parts1, $parts2);
pr($match);
pr($nomatch); 
```

**输出画面：**

```
Array
(
    [0] => red
    [1] => green
    [2] => blue
)
Array
(
    [3] => yellow
) 
```

# java - 线程：最大优先级线程并不总是首先完成

> ID：12689158
> 
> 赞同：1
> 
> 时间：2012-10-02T11:08:42.913
> 
> 标签：java, multithreading, scheduler, thread-priority

```
class A extends Thread {
    public void run() {
        for (int i = 1; i < 5; i++) {
            System.out.println("Thread A Loop NO " + i);

        }
        System.out.println("Exit from A");
    }
}

class B extends Thread {
    public void run() {
        for (int j = 1; j < 5; j++) {
            System.out.println("Thread B Loop no. " + j);
        }
        System.out.println("Exit from B");
    }
}

class C extends Thread {
    public void run() {
        for (int k = 1; k < 5; k++) {
            System.out.println("Thread C Loop no " + k);
        }
        System.out.println("Exit Form c");
    }
}

class Demo1 {
    public static void main(String args[]) {
        A a1 = new A();
        B b1 = new B();
        C c1 = new C();

        c1.setPriority(Thread.MAX_PRIORITY);
        a1.start();
        b1.start();
        c1.start();
    }
} 
```

我多次运行这个程序。有时具有最大优先级的线程“C”最后完成最大优先级是否不能确保它首先终止？我的意思是在任何其他线程退出循环之前？如果不是，调度程序策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:12:13.990

> 最大优先级是否不能确保它首先终止？？？？我的意思是在任何其他线程退出循环之前？？？

不，它不能确保任何事情。

> 如果不是，调度程序策略是什么？？？

它是对操作系统的提示，如果您不是特权用户，可以随意忽略 esp。

即使它确实按照您的建议行事，但过分依赖自己的行为也是一个坏主意。即，我将始终确保您的程序在没有它的情况下正常运行。

如果您希望线程 C 首先完成，您应该首先运行它，例如`c1.run();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:21:26.167

将`Thread's`优先级设置为`Max`并不能确保它会在最后结束。它只是用作指示，应该选择该线程而不是其他线程，如果有时需要，假设 CPU 何时空闲，并且某些线程正在等待得到它。所以，在这种情况下，如果你考虑`Priority based Scheduling`，你的具有最高优先级的线程肯定会得到 CPU 。

但是，如果你想确保你的线程 C 最后结束，你可以在这个线程上调用一个[Thread.join()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)方法来强制其他线程，`end`在线程 C 之后。（但是，一个线程只能`join`在那个线程上线程有`spawned`，因为它不需要`reference`从其他线程产生的其他线程。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:35:36.803

除了提出的其他要点之外，您的线程几乎什么都不做，除了在输出流上获取和释放锁。即使您只有一个 CPU，因此只有最高优先级的就绪线程可以运行，我怀疑您是否可以确定哪个线程将首先完成。更改优先级是一种优化，以改善过载盒子的某些方面的性能。它绝对不是任何一种同步机制，也不能用于将完全不工作的应用程序变成可以工作的应用程序。最好的说法是，它很可能使应用程序通过需求规范中的某个性能阈值。

# javascript - IE 全局 var arrayName.className 为 null

> ID：12689160
> 
> 赞同：1
> 
> 时间：2012-10-02T11:09:05.130
> 
> 标签：javascript, jquery, internet-explorer

我有一个填充数组的 jQuery ajax 调用；这个数组应该可以在另一个函数中访问。它实际上在 FireFox 和 Safari 中，但不在 IE 中。IE 说： SCRIPT5007 无法获取属性“名称”的值：对象为空或未定义

看起来“globalDataArray[i].name”和“globalDataArray[i].objectid”都有问题。两者都被 FF 和 IE 完美评估和使用，所以没有真正的空白。有人对为什么会发生这种情况有任何想法吗？我用谷歌搜索了很多；最后使用逗号或其他东西的常见问题不是解决方案。

这里设置了 var：

```
var globalDataArray = [];
function retrieveContentData(content){

    $.ajax({
        url: 'http://services.arcgis.com/nSZVuSZjHpEZZbRo/ArcGIS/rest/services/NLCito/FeatureServer/0/query',
        data: {
            where: content,
            geometryType: 'esriGeometryEnvelope',
            spatialRel: 'esriSpatialRelIntersects',
            outFields: '*',
            returnGeometry: false,
            returnIdsOnly: false,
            returnCountOnly: false,
            f: 'pjson'
        },
        success: function(data){
            data = $.parseJSON(data);//Always parse JSON data
            var features = data.features;
            for (var i=0; i<features.length; i++) {
                //globalDataArray.push(features[i].attributes.NAME);
                //globalDataArray[features[i].attributes.OBJECTID] = features[i].attributes.NAME;
                globalDataArray[i] = {  "objectid": features[i].attributes.OBJECTID,
                                        "name": features[i].attributes.NAME,
                                        "type": features[i].attributes.Type
                                        };
            }
            shuffle(globalDataArray);//Shuffle the array items

            //Count total and set progress report
            $('#totalTasks').text(features.length);

            //Initialize the progress bar and create the first task
            updateProgressBar(0);
            createNewTask();

        }//End success
    });//End Ajax call

}//End function 
```

这是我想再次使用它的地方：

```
function validateAnswer(){
    //Prevent validating if task div not shown
    if($('#task').is(":visible")){

        var passedTask = false;

        var typedAnswer = $('#taskAnswerInput').val();

        var desiredAnswer       = globalDataArray[i].name;
        var desiredAnswerShort  = desiredAnswer.replace(/\(.*?\)/, "");//Remove eveything within and with bracklets
        desiredAnswerShort      = jQuery.trim(desiredAnswerShort);//Remove any whitespace on beginning and end of the string

        if(typedAnswer === desiredAnswer || typedAnswer === desiredAnswerShort){
            alert('Exact, helemaal goed!');
            $('#tasksRight').text(parseInt($('#tasksRight').text()) +1);
            passedTask = true;
            updateProgressBar(i);
        }else{
            alert('Jammer, dat is niet het goede antwoord');
        }

        if(passedTask == true){
            nextTask();
        }
    }//end if visible
} 
```

End 这是调用 createNewTask() 函数的地方：

```
var i = 0;
function createNewTask(){
    //Since a new tasks is started, let's update the progress
    $('#tasksDone').text(i);

    //Highlight a single place
    executeQuery(globalDataArray[i].objectid);

    //Change tasks text
    var type = globalDataArray[i].type;
    if(type === 'Plaats'){ type = 'Welke plaats';}
    if(type === 'Gebied'){ type = 'Welk gebied';}
    if(type === 'Water'){ type = 'Welk water';}
    if(type === 'Provincie'){ type = 'Welke provincie';}
    $('#taskPointType').html(type);

    $('#taskAnswerInput').val('');//Clear the input field
}

function giveupTask(){
    var correctAnswer = globalDataArray[i].name;
    alert(correctAnswer);
    $('#tasksWrong').text(parseInt($('#tasksWrong').text()) +1);//Update currentWrong
    nextTask();
}

//Aparte functie, om validateAnswer() flexibeler te houden
function nextTask(){
    //fire new task
    i++;
    if(i < globalDataArray.length){
        //Update progressbar
        updateProgressBar(i+1);//+1 since i starts with 0
        createNewTask();
    }else{
        //All tasks done
        alert('Einde, alle plaatsen gehad');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:59:16.503

解决了。对于任何有兴趣的人：

看起来 IE 并不总是返回正确的错误、jquery ajax 成功、完整和错误函数，我们有助于修复它。最后发现问题出在跨域ajax调用上；IE 正在阻止它们，除非您使用的是 dataType: jsonp。仅仅普通的 json 是不够的。

感谢您分享您的想法！

# qt - 带有模板访问器的 Qt Q_PROPERTY

> ID：12689162
> 
> 赞同：3
> 
> 时间：2012-10-02T11:09:08.200
> 
> 标签：qt, templates, properties, moc

我的目标是更多的代码重用，同时保持冗长。

考虑以下示例代码：

```
// qdot@defixio /tmp/test4 $ cat test.h
#include <QObject>

class Foo : public QObject {
  Q_OBJECT
  // Q_PROPERTY(int bar1 READ bar<1>)
  // Q_PROPERTY(int bar2 READ bar<2>)

  public:
  template <int i> int bar() const;
};

// qdot@defixio /tmp/test4 $ cat test.cpp 
#include "test.h"
#include <QDebug>

template <int i> 
int Foo::bar() const { qDebug() << "Template parameter" <<  i; } 

int main() {
  Foo foo;
  foo.bar<1>();
  foo.bar<2>();
  return 0;
} 
```

这个编译并按预期运行。

如果您想知道为什么我会这样 - 想象一组属性，DESIGNABLE 等，但属于同一个“类” - 在这种情况下，我希望使用枚举模板类型的访问器拥有单独的属性。

取消注释属性定义，会导致以下 moc 错误：

```
/usr/bin/moc -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. test.h -o moc_test.cpp
test.h:5: Parse error at "bar" 
```

关于如何正确混合模板和 moc 的任何想法？

* * *

回答 cmannet85 的评论，并添加更多见解 - 是的，该`moc`调用`moc_test.cpp`从`moc.h`.

为了进一步测试和演示它，我添加了另一个属性

```
Q_PROPERTY(int baz1 READ baz1) 
```

moc_test.cpp 前后的区别是这样的：

```
--- moc_test.cpp        2012-10-02 13:23:39.442333849 +0200
+++ moc_test_baz1.cpp   2012-10-02 13:23:29.822328462 +0200
@@ -1,7 +1,7 @@
 /****************************************************************************
 ** Meta object code from reading C++ file 'test.h'
 **
-** Created: Tue Oct 2 13:23:39 2012
+** Created: Tue Oct 2 13:22:27 2012
 **      by: The Qt Meta Object Compiler version 63 (Qt 4.8.3)
 **
 ** WARNING! All changes made in this file will be lost!
@@ -24,17 +24,20 @@
        0,       // classname
        0,    0, // classinfo
        0,    0, // methods
-       0,    0, // properties
+       1,   14, // properties
        0,    0, // enums/sets
        0,    0, // constructors
        0,       // flags
        0,       // signalCount

+ // properties: name, type, flags
+       8,    4, 0x02095001,
+
        0        // eod
 };

 static const char qt_meta_stringdata_Foo[] = {
-    "Foo\0"
+    "Foo\0int\0baz1\0"
 };

 void Foo::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)
@@ -76,6 +79,30 @@
     _id = QObject::qt_metacall(_c, _id, _a);
     if (_id < 0)
         return _id;
+    
+#ifndef QT_NO_PROPERTIES
+     if (_c == QMetaObject::ReadProperty) {
+        void *_v = _a[0];
+        switch (_id) {
+        case 0: *reinterpret_cast< int*>(_v) = baz1(); break;
+        }
+        _id -= 1;
+    } else if (_c == QMetaObject::WriteProperty) {
+        _id -= 1;
+    } else if (_c == QMetaObject::ResetProperty) {
+        _id -= 1;
+    } else if (_c == QMetaObject::QueryPropertyDesignable) {
+        _id -= 1;
+    } else if (_c == QMetaObject::QueryPropertyScriptable) {
+        _id -= 1;
+    } else if (_c == QMetaObject::QueryPropertyStored) {
+        _id -= 1;
+    } else if (_c == QMetaObject::QueryPropertyEditable) {
+        _id -= 1;
+    } else if (_c == QMetaObject::QueryPropertyUser) {
+        _id -= 1;
+    }
+#endif // QT_NO_PROPERTIES
     return _id;
 }
 QT_END_MOC_NAMESPACE 
```

绝对没有什么可以阻止 moc 将整个 bar<1> 语句复制到`QMetaObject::ReadProperty`switch 语句中 - 但它以某种方式在 <> 模板标签上出现了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:46:21.790

`moc`不喜欢`Q_PROPERTY`声明中的模板大括号。您可以执行以下操作：

```
class Foo : public QObject {
  Q_OBJECT
  Q_PROPERTY(int bar1 READ bar_1)
  Q_PROPERTY(int bar2 READ bar_2)

  private:
  inline int bar_1() const { return bar<1>(); }
  inline int bar_2() const { return bar<2>(); }

  public:
  template <int i> int bar() const;
}; 
```

生成的代码`moc`应该能够访问您的类的私有方法，并且这种间接方式不应导致任何运行时成本，因为编译器可以内联对`bar_N`.

您可能想隐藏`bar_N`宏中的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:10:35.137

好的。我想我几乎想通了这一点。`moc_test.cpp`这只是 evil.due 命名空间污染 -在包含我的头文件之前似乎没有 DEFINE 。

仅仅定义

```
#define ___BAR1 bar<1> 
Q_PROPERTY(int bar1 READ ___BAR1) 
```

完成了这项工作 - 但是，如果仅在 MOC 运行（简单）和编译`___BAR1`期间定义，我会更喜欢。`moc_test.cpp`

包围

```
#ifdef Q_MOC_RUN
#define ___BAR1 bar<1> 
#endif Q_MOC_RUN 
```

隐藏除了 moc 之外的任何东西的定义，但它是不相关的 - 当它编译 moc_test.cpp 时它也对 gcc 隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T08:55:00.993

只需将 () 放在 reader 函数周围：

```
Q_PROPERTY(int bar1 READ (bar<1>)) 
```

# android - 适用于移动和台式 PC 的 Web 应用程序

> ID：12689178
> 
> 赞同：0
> 
> 时间：2012-10-02T11:09:53.850
> 
> 标签：android, asp.net, ios, mobile, cordova

我想为移动和桌面（PC）开发网络应用程序。经过仔细观察，我发现除了 Phonegap 之外没有其他框架，但 phonegap 只编译移动应用程序，我想使用**asp.net**将功能扩展到桌面（PC） 。这样我就可以创建一个可以在移动设备和桌面上运行的通用应用程序。我的目标是创建一个离线应用程序（不介意使用网络浏览器作为在桌面上运行应用程序的平台）。任何建议将不胜感激 ![在此处输入图像描述](../Images/32f7153fb6b9b30ebd11eb333fcc0e57.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:15:55.910

这取决于您要提供的功能。我工作的公司开始使用原生 Android 和 iOS 应用程序，然后我们开始使用可跨所有平台运行的 HTML5/Javascript 网络应用程序。

HTML5 允许使用 appcache 的离线功能以及使用 websql 和 indexedDB 的浏览器存储。然而，值得考虑的是，如果不使用 phonegap/cordova 之类的框架，就无法访​​问电话簿或相机之类的东西

如果您想要一种适合所有方法的方法，我建议您查看[JQuery Mobile 。](http://jquerymobile.com/)或者像[Twitter Bootstrap这样的响应式框架](http://twitter.github.com/bootstrap/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:20:20.227

如果您说您不介意只使用 Web 浏览器，那您为什么不在 Web 中创建整个系统，并编写几个单独的应用程序，这些应用程序实际上是一个大小不一的 Web 浏览器，可以自动将您定向到您的服务网站？

对于桌面，您可以使用任何语言来制作一个窗口网络浏览器，或者只需编写一个自动打开默认浏览器并转到该 URL 的别名。

对于移动设备：android 和 iphone 都支持： - 为 Web 链接创建别名 - 或者轻松地创建一个只是 Web 浏览器的应用程序，或者在顶部添加一些附加功能（比如 Web 视图之前的菜单视图），虽然不是确定如果您刚刚为您的应用程序获得了一个纯 web 视图，验证过程是否会很容易

# php - 带有重定向的PHP Curl登录不起作用

> ID：12689182
> 
> 赞同：0
> 
> 时间：2012-10-02T11:10:05.807
> 
> 标签：php, cookies, curl

我有以下 PHP 脚本，它应该获取页面的内容，它位于登录表单的后面。

它在我的本地主机服务器上运行良好，但在主机 (GoFreeServe) 上运行不正常。我得到一个空洞的回应。（$postResult 为空）。

脚本：

```
 $login_url = 'http://senioren.voetbal.nl/clubs_comp/mijn-teams/competitie/173299/OWIOS-9-zaterdag?destination=clubs_comp%2Fmijn-teams%2Fcompetitie%2F173299%2FOWIOS-9-zaterdag';
$data = file_get_contents("http://voetbal.nl/login/menu/data");
        $parts = explode('name=\"form_build_id\" id=\"',$data,2);
$post_data = 'name=****&pass=****&op=Inloggen&form_build_id='.substr($parts[1],0,37).'&form_id=login_block_login_form';
$ch = curl_init();
$agent = $_SERVER["HTTP_USER_AGENT"];
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_REFERER, $login_url);
curl_setopt($ch, CURLOPT_URL, $login_url );
curl_setopt($ch, CURLOPT_POST, 1 );
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');

$postResult = curl_exec($ch); 
```

curl_getinfo 本地主机

```
[url] => http://senioren.voetbal.nl/clubs_comp/mijn-teams/competitie/173299/OWIOS-9-zaterdag
    [content_type] => text/html; charset=utf-8
    [http_code] => 200
    [header_size] => 557
    [request_size] => 503
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 2.668
    [namelookup_time] => 0
    [connect_time] => 0.016
    [pretransfer_time] => 0.016
    [size_upload] => 57
    [size_download] => 173015
    [speed_download] => 64848
    [speed_upload] => 21
    [download_content_length] => 173015
    [upload_content_length] => 57
    [starttransfer_time] => 1.014
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

    [redirect_url] => 
```

curl_getinfo 主机

```
Array
(
    [url] => http://senioren.voetbal.nl/clubs_comp/mijn-teams/competitie/173299/OWIOS-9-zaterdag
    [content_type] => text/html; charset=utf-8
    [http_code] => 302
    [header_size] => 1125
    [request_size] => 361
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 1.001361
    [namelookup_time] => 0.000638
    [connect_time] => 0.094666
    [pretransfer_time] => 0.094712
    [size_upload] => 0
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 0
    [download_content_length] => 0
    [upload_content_length] => 0
    [starttransfer_time] => 1.001199
    [redirect_time] => 0
) 
```

主机未处于安全模式并安装了 CURL。cookie.txt 也被修改为 777。主机的 PHPInfo 可以在这里找到：http: [//phpinfo.byethost11.com/index.php](http://phpinfo.byethost11.com/index.php)

你知道为什么我的本地主机上的 http_code 为 200，而主机上的 http_code 为 302？

谢谢！

编辑：打开错误报告 (!@!#!$) 后，页面返回以下错误：

```
Warning: curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in /test2.php on line 39 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:54:08.163

我通过首先检查是否设置了 open_basedir 来解决它。如果是这种情况：脚本首先执行 curl_exec() 以设置 cookie，然后再次执行以获取隐藏页面。根本不使用 op 和 form_build_id 之类的参数：P

代码：

```
if (ini_get('open_basedir') == '') {
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);

    $postResult = curl_exec($ch);
    curl_close($ch);
} else {
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
    curl_exec($ch);
    $postResult = curl_exec($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:14:06.907

尝试添加 FOLLOWLOCATION 选项，使其遵循获得的重定向：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:24:25.610

`form_build_id` 并且`CURLOPT_REFERER`丢失了您应该发送类似的东西

```
 name=user&pass=pass&op=Inloggen&form_build_id=form-fc3c69bda9d4a9a4a53e70f836ece383&form_id=login_block_login_form 
```

# php - 如何使用 php 获取 URL 主机

> ID：12689183
> 
> 赞同：1
> 
> 时间：2012-10-02T11:10:08.233
> 
> 标签：php, regex, url

我想获取任何 url 的主机名，例如，如果我有以下 url

```
$url = "http://www.google.com"; 
```

然后我只想获取`google`点之后`.`和扩展点之前的内容`.`，以便它可以应用于所有类型的网址。

所以结果应该是`google`！我认为这可能需要正则表达式或任何想法如何做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:38:14.640

你可以试试

```
echo __extractName("http://google.com"); 
echo __extractName("http://office1.dept1.google.com");
echo __extractName("http://google.co.uk");

function __extractName($url)
{
  $domain = parse_url($url , PHP_URL_HOST);
  if (preg_match('/(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i', $domain, $list)) {
    return substr($list['domain'], 0,strpos($list['domain'], "."));
  }
  return false;
} 
```

输出

```
google
google 
google 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:22:49.723

您应该看一下 PHP 的[parse_url()](http://php.net/manual/en/function.parse-url.php)函数，它返回构成 URL 的各种组件的关联数组。

```
$url = "http://www.google.com";
print_r(parse_url($url)); 
```

将回显以下数组。

```
Array ( [scheme] => http [host] => www.google.com ) 
```

上面的函数只是给你一个开始。查看以下 Stackoverflow 档案，了解如何从此处获取它。

[PHP从子域获取域名](https://stackoverflow.com/questions/1201194/php-getting-domain-name-from-subdomain)

[在php中获取域名（不是子域）](https://stackoverflow.com/questions/2679618/get-domain-name-not-subdomain-in-php)

[PHP函数获取URL的子域](https://stackoverflow.com/questions/5292937/php-function-to-get-the-subdomain-of-a-url)

**编辑**（更多档案 - 我不确定你用谷歌搜索/尝试了什么）

[如何从 URL 中获取域名](https://stackoverflow.com/questions/569137/how-to-get-domain-name-from-url/569219)

[从 HTTP_REFERER 中提取方案和主机](https://stackoverflow.com/questions/1144856/how-do-i-split-serverhttp-referer-to-get-the-base-url)

# vb.net - 在下拉列表中获取所有映射的网络驱动器

> ID：12689185
> 
> 赞同：9
> 
> 时间：2012-10-02T11:10:13.553
> 
> 标签：vb.net, drop-down-menu, mapping

使用 VB.Net 是否可以在下拉列表中列出所有映射的网络目录/驱动器？

我已经护目镜，但找不到任何有用的东西..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:29:48.957

要将其添加到 DropDownList：

```
 Private Sub TestCase1()
        Dim drive As System.IO.DriveInfo

    For Each drive In System.IO.DriveInfo.GetDrives()
        If drive.DriveType = IO.DriveType.Network Then
            DropDownList1.Items.Add(drive.Name)
        End If
    Next
End Sub 
```

这就是我在 C# 中的做法：

```
private void TestCase1()
    {

        //Recurse through the drives on this system and add them to the new DropDownList DropDownList1 if they are a network drive.
        foreach(System.IO.DriveInfo drive in System.IO.DriveInfo.GetDrives())
        {
            //This check ensures that drive is a network drive.
            if (drive.DriveType == System.IO.DriveType.Network)
            {
                //If the drive is a network drive we add it here to a combobox.
                DropDownList1.Items.Add(drive);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T18:01:44.173

迈克有一个很好的答案，我会添加一些东西来防止它在每次点击打开时增长。说得好.... VB 中的组合框。

```
 Dim drive As System.IO.DriveInfo

If DropDownList1.Count < 1

     For Each drive In System.IO.DriveInfo.GetDrives()

         If drive.DriveType = IO.DriveType.Network Then

             DropDownList1.Items.Add(drive.Name)

         End If
     Next
End If 
```

# c# - 字典并获取一种值

> ID：12689186
> 
> 赞同：3
> 
> 时间：2012-10-02T11:10:18.670
> 
> 标签：c#, dictionary

我有一个包含类似内容的类，`Dictionary<int, Queue<string>> dict`然后我使用`TryGetValue`：

```
Queue<string> value;
if (!dict.TryGetValue(3, out value))
    throw new MyException("..."); 
```

是否有不显式定义值类型的选项，基本上是为了避免重复输入？在 C++ STL 容器中，有一个值 typedef`value_type`可以在这种情况下使用，但我似乎在 C# 中找不到类似的功能。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:23:55.387

如果您为自己定义了一个不错的辅助方法，您可以将类型规范包装起来：

```
public static class Utility
{
    public static TValue GetValueOrDefault<TKey,TValue>(
        this Dictionary<TKey, TValue> dictionary, 
        TKey key, 
        TValue @default = default(TValue))
    {
        TValue value;
        return dictionary.TryGetValue(key, out value)
                   ? value
                   : @default;
    }
} 
```

请注意，我们仍然必须显式键入将由 填充的值`TryGetValue`，但是从您的*调用者*那里您可以说：

```
var value = dict.GetValueOrDefault(3);    // implicitly typed
if (value == null)
    throw new MyException("..."); 
```

请注意，如果`null`在这种情况下是一个有效值，您将需要其他东西，但可以应用相同的原则 - 使用编译器可以推断泛型方法的类型这一事实来构建一个辅助方法来隐藏显式类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:15:06.313

您可以将片段重写为

```
if (!dict.ContainsKey(3))
    throw new MyException("...");
var value = dict[3]; 
```

或者，无耻地窃取并改编自 AakashM 的答案，您可以编写自己的扩展方法来交换`TryGetValue`参数：

```
public static V ValueGetTry<K, V>(this Dictionary<K, V> d, K k, out bool found)
{
    V v;
    found = d.TryGetValue(k, out v);
    return v;
} 
```

称为

```
bool found;
var val = dict.ValueGetTry(3, out found);
if (!found)
    throw new MyException("..."); 
```

这应该适用于*任何*类型的参数，并且只查询一次字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:15:30.777

`ContainsKey`不，如果您这样做并索引到字典中，您可以使用隐式类型变量，如下所示：

```
var key = 3;
if (!dict.ContainsKey(key)) {
    throw new ...;
}

var value = dict[key]; 
```

当然，这会稍微降低效率。但是没有选项可以使用`var`with `TryGetValue`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-29T12:20:08.483

现在可以使用 C# 7.0 使用内联`out`变量

```
if (!dict.TryGetValue(3, out var value))
    throw new MyException("..."); 
```

请参阅[https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#out-variables](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#out-variables)

# spring - 机器特定的 webapp 配置

> ID：12689188
> 
> 赞同：0
> 
> 时间：2012-10-02T11:10:25.807
> 
> 标签：spring, tomcat, properties, configuration-files, environment

我有几个 webapp 项目（Java/Spring/Tomcat）。每个项目将作为一个`.war`文件部署在多台机器上。我需要`.properties`为每台机器上的每个项目都有单独的文件。如何实施？

先谢过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:44:59.147

假设所有这些配置文件中的键都是相同的并且它们仅在值上有所不同，我会将配置文件命名为`<hostname>.<function>.properties`并在其中维护特定于机器的配置。

在启动运行这些`war`文件的 Web 服务器时，我将有一个 JVM 参数来保存正在运行它的机器的值。读取这些属性文件的位置将读取此 JVM 参数并形成实际文件的名称并从该文件加载属性。通常，这是在一个`ConfigurationRepository`类中完成的`Singleton`，当从代码中的任何地方第一次访问该对象时，该类会被初始化。HTH。

# php - 在多台服务器上运行脚本 PHP

> ID：12689191
> 
> 赞同：2
> 
> 时间：2012-10-02T11:10:51.760
> 
> 标签：php, linux

在工作中，我们被分配了一台额外的服务器，因为我们当前服务器的负载很大。

我现在要做的是让我在一台服务器（服务器 1）上的所有 PHP 脚本从另一台服务器（服务器 2）运行，以减少对（服务器 1）的压力。此外，我希望能够在服务器 1 的同一域上拥有服务器 2 的子域。

如果有人能指出我应该做什么的正确方向，我将不胜感激。

感谢您的任何帮助。

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:34:54.237

如果您在服务器 1 上运行的不仅仅是您的网站，我建议您拆分服务器的职责，以便它们两者获得大致相等的负载，否则似乎负载均衡器将是要走的路。

我真的看不出将文件从服务器 1 包含到服务器 2 的目的，因为在将文件从 1 传输到 2 时，这会在服务器 1 上产生更多负载。

但我同意评论说你应该去服务器故障，他们/应该更了解这类问题。

# android - 如何通过 ndk 访问 Java 静态字段

> ID：12689201
> 
> 赞同：2
> 
> 时间：2012-10-02T11:11:27.110
> 
> 标签：android, c, android-ndk

我想通过 NDK C 函数修改 java SDK 中声明的全局变量，例如：

```
public class NDKTest extends Activity
{
    static int myglobal = 0;

    static { System.loadLibrary("MyCLib"); }
    static public native void incrementmyglobal();
.... 
```

在 MyCLib 中：

```
#include "NDKTest.h"

JNIEXPORT void JNICALL Java_NDKTest_incrementmyglobal

(JNIEnv * env, jobject jObj)
{
  /*
     this next line is obviously wrong, but illustrates how it would have
     been done had it been a purely C program
  */
  M.myglobal = M.myglobal + 1;
  return;
} 
```

所以我的问题是：

a/ 违规行的正确语法是什么？

b/ C头文件应该怎么看？

c/ Android.mk 文件应该是什么样子？

我可以编译和运行各种 'helloworld' NDK 示例，但我发现没有一个可以说明如何修改在 java 中声明的全局。一个超级简单的例子将不胜感激！

我正在使用 Linux 命令行（ant debug）和简单的文本编辑器（emacs）进行编程。我没有使用 Eclipse；多年来一直在编程 C，并且是 Java 菜鸟。目标平台是 Android。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:08:18.433

该方法是静态的，因此它的第二个参数是`jclass`当前类的指针，而不是当前对象的指针。另请注意，本机方法的名称必须包含包名称：

```
JNIEXPORT void JNICALL Java_com_mypackage_NDKTest_incrementmyglobal 
(JNIEnv * env, jobject jcl) 
{ 
  jfieldID fid = GetStaticFieldID(env, jcl, "myglobal", "I");
  int i = GetStaticIntField(env, jcl, fid);
  SetStaticIntField(env, jcl, fid, i+1);
  return; 
} 
```

不需要 C 标头。Android.mk 应该看起来像任何 helloworld 示例，更改 LOCAL_SRC_FILES 以反映您的。

# excel - EXCEL：返回数字出现多次的最大值

> ID：12689202
> 
> 赞同：0
> 
> 时间：2012-10-02T11:11:35.457
> 
> 标签：excel, function, max

我希望从该值多次出现的大量数据中返回一个 MAX 值。有超过 1500 行，我正在尝试计算每行的 MAX 值（横向工作）。但是，我正在努力解决如何做到这一点......搜索论坛，我可以看到 DMAX 的提及，但我不确定这是否可行。

我附上了数据的截图来说明我的意思......

谢谢，詹姆斯

![最大值截图](../Images/96b6e08943fdafd21c8e1ca9ef85a5be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:54:04.833

在第 6 行试试这个“数组公式”

`=MAX(IF(COUNTIF(E6:EX6,E6:EX6)>1,E6:EX6))`

需要确认，`CTRL+SHIFT+ENTER`以便像 { 和 } 这样的花括号出现在公式栏中的公式周围

现在将公式复制到列中。如果一行中没有重复值，则结果将为零

# erlang - Reltool 尝试启动库

> ID：12689203
> 
> 赞同：0
> 
> 时间：2012-10-02T11:11:36.017
> 
> 标签：erlang, reltool

我正在使用 Reltool 构建一个版本。当我尝试使用引导文件启动它时，出现错误：

```
 14:40:49.466 [error] CRASH REPORT Process  with 0 neighbours crashed with reason: {bad_return,{{z_validate,start,[normal,[]]},{'EXIT',{undef,[{z_validate,start,[normal,[]],[]},{application_master,start_it_old,4,[{file,"application_master.erl"},{line,274}]}]}}}}
14:40:49.472 [info] Application z_validate exited with reason: {bad_return,{{z_validate,start,[normal,[]]},{'EXIT',{undef,[{z_validate,start,[normal,[]],[]},{application_master,start_it_old,4,[{file,"application_master.erl"},{line,274}]}]}}}} 
```

但是 z_validate 是一个库，我不想启动它。如何从引导脚本中排除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:12:49.957

您的`z_validate.app`文件可能包含这样的一行：

```
{mod, {z_validate, []}} 
```

删除它，应用程序将被视为纯库应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:45:10.663

在`reltool.config`定义这样的版本（注意`load`应用程序类型）：

```
{rel, "cmd", "0.1",
 [{kernel, load},
  {stdlib, load},
  {your_app, load}
 ]}, 
```

然后在启动该版本时（例如使用`./bin/erl`），它将加载所有应用程序，但不会尝试启动它们。

# dynatree - 动态树 + 延迟加载 = 慢

> ID：12689205
> 
> 赞同：0
> 
> 时间：2012-10-02T11:11:38.013
> 
> 标签：dynatree, jquery-dynatree

我开始在我的项目中使用 Dynatree，但我遇到了一个问题——当我尝试懒惰阅读时，它的运行速度非常慢。我发现每次调用 addChild 时都会重新渲染整个树，我认为它效率不高。

有谁知道我能用它做什么？

两年前，mar10 写道：“enableUpdate(true) 调用 tree.redraw()，因此整个树都被更新了。这将随着 1.0 版本而改变，但即便如此，结合 addChild 调用会更快。” （http://stackoverflow.com/questions/3097791/dynatree-addchild-question-for-the-components-author）

我现在使用 1.0 版，但找不到任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:37:10.623

也许你可以试试**1.2.2 版本**，最新的版本，带有最新的 jquery 和 UI 包？

[https://code.google.com/p/dynatree/](https://code.google.com/p/dynatree/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T11:52:28.083

您可以使用 ajax 调用来初始化和更新 Dynatree，而不是 addChild。使用 dynatree`initAjax`和 node 的`appendAjax`方法。

作为参数的`data`参数，我传递父节点的 id（如果是根节点，则为 0）。

```
initAjax: {
      type: 'POST',
      url: 'inc/treeNodes.php',
      dataType: 'json',
      data: {key: 0}
    } 
```

和

```
 onLazyRead: function (node) {
      node.appendAjax({
      type: 'POST',
      url: "inc/treeNodes.php",
      dataType: 'json',
      data: {key: node.data.key}
      })
  } 
```

使用此方法，速度不再是问题，因为在执行 Ajax 调用以加载子节点时不会重新加载整个树。

# python - 如何将四个 3*3 阶矩阵合并为一个 6*6 阶矩阵

> ID：12689207
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:11:49.387
> 
> 标签：python

我在 Python 中使用 Numpy 创建了两个矩阵：

```
mat=np.matrix([[1,0,0],[0,0,1],[0,0,2]])
mat1= np.matrix([[1,0,0],[0,1,0],[0,0,1]]) 
```

我想合并这两个矩阵。我怎样才能做到这一点？输出应该是`[mat,mat1]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:20:51.503

如果你想要一个`(3,6)`矩阵，你可以使用这个[`np.hstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)函数：

```
>>> np.hstack((mat, mat1))
matrix([[1, 0, 0, 1, 0, 0],
        [0, 0, 1, 0, 1, 0],
        [0, 0, 2, 0, 0, 1]]) 
```

如果你想要一个`(6,3)`矩阵，请[`np.vstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)改用。`np.hstack`并且`np.vstack`是更通用功能的两个特例[`np.concatenate`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)。查看文档以获取更多详细信息。

最后，如果你想要一个`(2,3,3)`数组，只需使用

```
>>> np.array([mat,mat1]) 
```

但是，由于它是一个 3D 数组，您将无法将其视为矩阵。

# f# - 为什么我们使用递归类型来实现堆栈而不是列表？

> ID：12689214
> 
> 赞同：1
> 
> 时间：2012-10-02T11:12:09.263
> 
> 标签：f#, stack

我想`list`的正是持久化的执行`stack`。但是，当我遇到有关实际功能实现的文章时，它们总是使用递归类型/可区分联合。他们为什么不简单地适应/使用`'a list`

```
type 'a Stack = 
    | Nil
    | Cons of 'a * 'a Stack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:32:12.600

*为了结束这个问题，我发布了我的评论作为答案。*

你是对的。要将列表用作不可变堆栈，您可以声明类型缩写

```
type 'a Stack = 'a list 
```

正如@Tomas 所说，自己实现堆栈是学习函数式编程的一个很好的练习。我从F# wikibook的[*Stack*部分](http://en.wikibooks.org/wiki/F_Sharp_Programming/Advanced_Data_Structures#Stacks)引用了几句话。

> F# 的内置列表数据结构本质上是一个不可变堆栈。虽然它肯定有用，但为了编写探索性代码，我们将从头开始实现一个堆栈。我们可以使用简单的联合来表示堆栈中的每个节点。

# c# - 如何将标志枚举映射到多个组合框？

> ID：12689216
> 
> 赞同：0
> 
> 时间：2012-10-02T11:12:18.777
> 
> 标签：c#, wpf, combobox, enums, enum-flags

我必须将标志枚举映射到多个组合框。

例如，前 2 位需要对应一个组合框，用于屏幕对比度设置：

```
Bit 0 - 1: Contrast (0=Low / 1 = Medium / 2=high) 
```

位 2 & 3 需要对应语音音量

```
Bit 2 - 3: Speech volume (0=Low / 1 = Medium / 2 = High) 
```

第 4 位和第 5 位对应于蜂鸣器音量。

```
Bit 4 – 5: Buzzer volume (0=Low / 1 = Medium / 2 = High) 
```

第 6 位对应于入口或出口（即，如果它在它的入口，如果它关闭它的出口）

```
Bit 6: Entry/exit indication 
```

我的标志枚举定义为：

```
[Flags]
public enum RKP
{
    Contrast0 = 1,              // bit 0
    Contrast1 = 2,              // bit 1
    SpeechVolume2 = 4,          // bit 2
    SpeechVolume3 = 8,          // bit 3
    BuzzerVolume4 = 16,         // bit 4
    BuzzerVolume5 = 32,         // bit 5
    EntryExitIndication = 64,   // bit 6
} 
```

将这些映射到适当的组合框，然后将每个组合框的值转换为正确的枚举值以保存它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:56:11.213

使用您的解决方案，可以创建相互冲突的值，例如合并`MediumSpeechVolume`，`HighSpeechVolume`正如 Dan Puzey 指出的那样。

您的解决方案是否必须被标记`enum`？这可以使用一个简单的类来解决，其中包含 4 个必需的枚举作为属性。如果您需要当前标志枚举生成的确切位模式，请使用自定义创建另一个要公开的属性，并将`get`4`set`个主要属性的当前值转换为所需的位模式并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:57:22.517

```
[Flags]
public enum RKP
{
    LowContrast = 0,
    MediumContrast = 1,         // bit 0
    HighContrast = 2,           // bit 1

    LowSpeechVolume = 0,
    MediumSpeechVolume = 4,     // bit 2
    HighSpeechVolume = 8,       // bit 3

    LowBuzzerVolume = 0,
    MediumBuzzerVolume = 16,    // bit 4
    HighBuzzerVolume = 32,      // bit 5

    ExitIndication = 0,
    EntryIndication = 64,       // bit 6
}

contrastComboBox.ItemsSource = new[] { RKP.LowContrast, RKP.MediumContrast, RKP.HighContrast };
contrastComboBox.SelectedItem = currentValue & (RKP.MediumContrast | RKP.HighContrast);
//and so on for each combo box...

//and when you want the result:
RKP combinedFlag = (RKP)contrastComboBox.SelectedItem | //other combo box items 
```

您可能想要对将显示的字符串做一些事情，但这是基本思想。

# javascript - 在 ext.data.model 中表示 JSON

> ID：12689217
> 
> 赞同：0
> 
> 时间：2012-10-02T11:12:19.730
> 
> 标签：javascript, json, extjs, extjs4, extjs4.1

我有一个控制器函数，它返回这样的 json 字符串：

```
 [
    { "id": 5, "label": "label1", "type": 1, "arr": [0,1,1,2,3,1,2,0]},
    { "id": 6, "label": "label2", "type": 2, "arr": [1,1,2,2,3,1,2,3]}
 ] 
```

我想为这个 json 创建一个适当的 ext.data.model 以便当我的商店读取 json 时它可以正常工作。

模型会是什么样子？我不知道

到目前为止我有这个模型

```
 Ext.define('MyModel', {
        extend: 'Ext.data.Model',
        fields: [
            {name: 'id', type: 'int'},
            {name: 'label', type: 'string'},
            {name: 'type', type: 'int'},
            {name: 'arr', type: 'auto'}
        ]
    }); 
```

还有这家店

```
 // The data store containing the list of states
    var myStore = Ext.create('Ext.data.Store', {
        model: 'MyModel',

        proxy: {
            type: 'ajax',
            url: '/url/to/jsonpage',
            reader: {
                type: 'json',
                root: 'MyModel'
            }
        }
        //autoLoad: true,
        //autoSync:true
    }); 
```

# git - 如何创建包含许多项目的 bzr 存储库

> ID：12689224
> 
> 赞同：1
> 
> 时间：2012-10-02T11:12:38.857
> 
> 标签：git, version-control, project-management, bazaar, rcs

我有一个大项目，其中包含许多较小的项目、文件、包、iso 等，我可能希望将这些文件保存在某个控制系统中`Bazaar`。

问题是一些项目已经在 git 或 bazaar 下。我不需要更改项目/文件的结构。

任何想法，帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:49:30.187

将每个现有的小项目/包保存在 bazaar/git 中。将其他非版本化导入 bazaar/git。选择最适合您的结构：每个都在自己的存储库中，或者在一个共享存储库中包含所有内容。

然后，**在 bazaar/git 下创建一个新项目，其中包含指向每个项目的链接。** 此链接功能称为外部。

BAZAAR 外部
[http://doc.bazaar.canonical.com/plugins/en/externals-plugin.html](http://doc.bazaar.canonical.com/plugins/en/externals-plugin.html)

GIT 外部（与 SVN 相比）
[SVN：GIT 中的外部等效项？](https://stackoverflow.com/questions/571232/svn-external-in-git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:12:34.070

有几个选项可以组合来自不同版本控制系统和工具的存储库，可以帮助解决这个问题：

*   [mr](http://joeyh.name/code/mr/)对一组存储库执行常见操作，就好像它们是一个存储库一样
*   当使用 bzr 作为顶级存储库时，您可以使用[bzr externals](https://launchpad.net/bzr-externals)（但请注意该插件不是很成熟且未维护）通过[bzr-git组合 bzr 和 git 存储库](https://launchpad.net/bzr-git)
*   当使用 git 作为顶级存储库时，您可以使用[子模块](http://book.git-scm.com/5_submodules.htm)或[子树](https://github.com/apenwarr/git-subtree)通过[bzr 远程帮助程序组合 git 和 bzr 存储库](https://felipec.wordpress.com/2012/11/13/git-remote-hg-bzr-2/)

# c# - 将通过 XAML 定义的网格转换为其 C# 等效项

> ID：12689227
> 
> 赞同：1
> 
> 时间：2012-10-02T11:12:55.330
> 
> 标签：c#, wpf, xaml, grid

我想将以下 XAML 示例代码转换为其 C# 等效代码：

```
<Grid>
<Grid.ColumnDefinitions>
    <ColumnDefinition/>
    <ColumnDefinition Width="Auto"/>
    <ColumnDefinition/>
</Grid.ColumnDefinitions>

<!-- Sub-grid on left -->
<Grid Grid.Column="0">
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <Label Content="Left, Row 0" Background="Azure" Grid.Row="0"/>
    <Label Content="Left, Row 2" Background="Lavender" Grid.Row="2"/>
    <GridSplitter Grid.Row="1" Height="8" Background="DarkSlateBlue"
        HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
</Grid>

<!-- Sub-grid on right -->
<Grid Grid.Column="2">
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <Label Content="Right, Row 0" Background="Moccasin" Grid.Row="0"/>
    <Label Content="Right, Row 2" Background="Honeydew" Grid.Row="2"/>
    <GridSplitter Grid.Row="1" Height="8" Background="DarkSlateBlue"
        HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
</Grid>

<!-- Splitter between left/right sub-grids -->
<GridSplitter Grid.Column ="1" Width="8" Background="DarkSlateBlue"
    VerticalAlignment="Stretch" HorizontalAlignment="Center"/> 
```

到目前为止，这是我的代码：

```
 Grid DynamicGrid = new Grid();
ColumnDefinition gridColDef0 = new ColumnDefinition();
ColumnDefinition gridColDef1 = new ColumnDefinition();
gridColDef1.Width = new GridLength(1, GridUnitType.Auto);
ColumnDefinition gridColDef2 = new ColumnDefinition();
DynamicGrid.ColumnDefinitions.Add(gridColDef0);
DynamicGrid.ColumnDefinitions.Add(gridColDef1);
DynamicGrid.ColumnDefinitions.Add(gridColDef2);
RowDefinition gridRowDef0 = new RowDefinition();
RowDefinition gridRowDef1 = new RowDefinition();
gridRowDef1.Height = new GridLength(1, GridUnitType.Auto);
RowDefinition gridRowDef2 = new RowDefinition(); 
```

但我不知道如何将网格行定义添加到第 0 列。我预计会有一些类似于 DynamicGrid.Columns[0].RowDefinitions.Add 的内容，但我还没有找到这样的东西。你能帮助我吗？谢谢！

编辑：为了将来参考，这里是等效的 C# 代码。请注意，它可以优化！

```
private void CreateDynamicWPFGrid()
    {
        // Create the Grid
        Grid dynamicGrid = new Grid();

        ColumnDefinition gridColDef0 = new ColumnDefinition();
        ColumnDefinition gridColDef1 = new ColumnDefinition();
        gridColDef1.Width = new GridLength(1, GridUnitType.Auto);
        ColumnDefinition gridColDef2 = new ColumnDefinition();

        dynamicGrid.ColumnDefinitions.Add(gridColDef0);
        dynamicGrid.ColumnDefinitions.Add(gridColDef1);
        dynamicGrid.ColumnDefinitions.Add(gridColDef2);

        // Sub-grid on left.
        {
            Grid leftSubGrid = new Grid();

            RowDefinition gridRowDef0 = new RowDefinition();
            RowDefinition gridRowDef1 = new RowDefinition();
            gridRowDef1.Height = new GridLength(1, GridUnitType.Auto);
            RowDefinition gridRowDef2 = new RowDefinition();

            leftSubGrid.RowDefinitions.Add(gridRowDef0);
            leftSubGrid.RowDefinitions.Add(gridRowDef1);
            leftSubGrid.RowDefinitions.Add(gridRowDef2);

            Label label;
            label = new Label();
            label.Content = "Left, Row 0";
            label.Background = new SolidColorBrush(Colors.Azure);
            Grid.SetRow(label, 0);
            leftSubGrid.Children.Add(label);

            label = new Label();
            label.Content = "Left, Row 2";
            label.Background = new SolidColorBrush(Colors.Lavender);
            Grid.SetRow(label, 2);
            leftSubGrid.Children.Add(label);

            GridSplitter gridSplitter = new GridSplitter();
            gridSplitter.Height = 8;
            gridSplitter.Background = new SolidColorBrush(Colors.DarkSlateBlue);
            gridSplitter.HorizontalAlignment = HorizontalAlignment.Stretch;
            gridSplitter.VerticalAlignment = VerticalAlignment.Center;
            Grid.SetRow(gridSplitter, 1);
            leftSubGrid.Children.Add(gridSplitter);

            Grid.SetColumn(leftSubGrid, 0);
            dynamicGrid.Children.Add(leftSubGrid);
        }

        // Sub-grid on right.
        {
            Grid rightSubGrid = new Grid();

            RowDefinition gridRowDef0 = new RowDefinition();
            RowDefinition gridRowDef1 = new RowDefinition();
            gridRowDef1.Height = new GridLength(1, GridUnitType.Auto);
            RowDefinition gridRowDef2 = new RowDefinition();

            rightSubGrid.RowDefinitions.Add(gridRowDef0);
            rightSubGrid.RowDefinitions.Add(gridRowDef1);
            rightSubGrid.RowDefinitions.Add(gridRowDef2);

            Label label;
            label = new Label();
            label.Content = "Left, Row 0";
            label.Background = new SolidColorBrush(Colors.Moccasin);
            Grid.SetRow(label, 0);
            rightSubGrid.Children.Add(label);

            label = new Label();
            label.Content = "Left, Row 2";
            label.Background = new SolidColorBrush(Colors.Honeydew);
            Grid.SetRow(label, 2);
            rightSubGrid.Children.Add(label);

            GridSplitter gridSplitter = new GridSplitter();
            gridSplitter.Height = 8;
            gridSplitter.Background = new SolidColorBrush(Colors.DarkSlateBlue);
            gridSplitter.HorizontalAlignment = HorizontalAlignment.Stretch;
            gridSplitter.VerticalAlignment = VerticalAlignment.Center;
            Grid.SetRow(gridSplitter, 1);
            rightSubGrid.Children.Add(gridSplitter);

            Grid.SetColumn(rightSubGrid, 2);
            dynamicGrid.Children.Add(rightSubGrid);
        }

        {
            GridSplitter gridSplitter = new GridSplitter();
            gridSplitter.Width = 8;
            gridSplitter.Background = new SolidColorBrush(Colors.DarkSlateBlue);
            gridSplitter.HorizontalAlignment = HorizontalAlignment.Center;
            gridSplitter.VerticalAlignment = VerticalAlignment.Stretch;
            Grid.SetColumn(gridSplitter, 1);
            dynamicGrid.Children.Add(gridSplitter);
        }

        // Display grid into a Window
        Content = dynamicGrid;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:18:36.700

您的 XAML 代表一个网格网格 - 即外部网格有一行三列。每个“单元格”包含一个网格，每个网格包含三行和一列。

您的代码版本只有一个网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:18:23.317

在您的网格中有一组 RowDefinitions（作为 ColumnsDefinitions）。对于每个控件，您应该设置列/行以便放入网格中。

试试这个：

```
 Grid DynamicGrid = new Grid();
    ColumnDefinition gridColDef0 = new ColumnDefinition();
    ColumnDefinition gridColDef1 = new ColumnDefinition();
    gridColDef1.Width = new GridLength(1, GridUnitType.Auto);
    ColumnDefinition gridColDef2 = new ColumnDefinition();
    DynamicGrid.ColumnDefinitions.Add(gridColDef0);
    DynamicGrid.ColumnDefinitions.Add(gridColDef1);
    DynamicGrid.ColumnDefinitions.Add(gridColDef2);
    RowDefinition gridRowDef0 = new RowDefinition();
    RowDefinition gridRowDef1 = new RowDefinition();
    gridRowDef1.Height = new GridLength(1, GridUnitType.Auto);
    RowDefinition gridRowDef2 = new RowDefinition();
    DynamicGrid.RowDefinitions.Add(gridRowDef0);
    DynamicGrid.RowDefinitions.Add(gridRowDef1);
    DynamicGrid.RowDefinitions.Add(gridRowDef2);

    Label label= new Label ();
    Grid.SetColumn(label, 0);
    Grid.SetRow(label, 0); 
```

只需将此概念应用于您的代码。

# java - Java 字符串到日期转换问题

> ID：12689228
> 
> 赞同：0
> 
> 时间：2012-10-02T11:13:03.653
> 
> 标签：java, datetime

我搜索了这个问题，但发现只从字符串更改为日期，然后将日期显示为字符串。我有一个要求，我收到字符串格式的日期，然后我必须在日期对象中解析它并输入数据库。但是每当我将字符串转换为日期时，它都会给我错误的输出。请建议。提前致谢。

```
String subscribedDate="2012-09-28 11:00:00";
String oldFormat = "yyyy-mm-dd hh:mm:ss";
SimpleDateFormat sdf1 = new SimpleDateFormat(oldFormat);
Date dates=sdf1.parse(subscribedDate);
System.out.println(dates);
//code for entering dates in database. 
```

输出：2012 年 1 月 28 日星期六 00:09:00 GMT（这是不正确的！！）。我想要 2012-09-28 11:00:00

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:16:42.773

您的格式字符串错误。 `yyyy-mm-dd hh:mm:ss`基本上是在说“年-分钟-天小时：分钟：秒”，我很确定您不想要。

你要

```
String oldFormat = "yyyy-MM-dd hh:mm:ss"; 
```

查看[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)文档以获取更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T11:17:01.760

首先，月份字段使用`MM`而不是`mm`分钟来表示。

其次，格式化程序可用于以所需格式打印日期。

```
String subscribedDate="2012-09-28 11:00:00";
String oldFormat = "yyyy-MM-dd hh:mm:ss";
SimpleDateFormat sdf1 = new SimpleDateFormat(oldFormat);
Date dates=sdf1.parse(subscribedDate);
System.out.println(sdf1.format(dates));
// code for entering dates in database. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:16:00.913

尝试将 oldFormat 更改为

```
String oldFormat = "yyyy-MM-dd hh:mm:ss"; 
```

其中 MM 是大写字母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T11:20:04.827

我想第二行中的 oldFormat 变量应该是

```
oldFormat = "yyyy-MM-dd HH:mm:ss"; // hours counted 0~23 
```

或者

```
oldFormat = "yyyy-MM-dd hh:mm:ss"; // hours counted 0~11 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T11:16:30.367

试试这个：

```
 String oldFormat = "yyyy-MM-dd hh:mm:ss"; 
```

请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)以了解原因。

# maven - Maven 资源插件不过滤 Grails 项目上的资源

> ID：12689229
> 
> 赞同：2
> 
> 时间：2012-10-02T11:13:10.560
> 
> 标签：maven, grails, resources

我有一个使用 Maven 构建的 Grails 项目。在这个项目中有一个资源文件`smth.properties`，最后一行看起来像：

```
build.number=${build.number} 
```

我试图用`maven-resources-plugin`它来过滤它并在执行时填充`mvn -Dbuild.number=1.0 install`，但似乎插件不起作用，因为`grails-maven-plugin`它起作用了。相同的代码但没有 Grails 可以完美运行。

如何使用 Grails 过滤资源以`${name}`使用`-Dname=value`on填充所有字段`mvn install`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:17:50.233

`maven-resources-plugin`您可以直接在`<build/>`标签内添加资源过滤，而不是配置：

```
<project>
    ...
    <properties>
        <name>my default value</name>
    </properties>
    ...
    <build>
        ...
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        ...
    </build>
    ...
</project> 
```

然后使用您的命令行运行：

```
mvn -Dname=myNewValue install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:40:01.730

Maven 资源处理基本上是您的资源的副本，从一个目录到另一个目录，替换占位符。

它绑定到流程资源生命周期阶段。

如果你想用另一个插件重新处理资源，一个简单的方法是将它们配置为 1）第一个插件，从文件夹 A 中获取资源并复制到文件夹 B（经过一些处理） 2）第二个插件，从文件夹 B 中获取资源，然后复制到文件夹C

并绑定到 2 个不同的阶段，以确保正确的执行顺序。

> resources:resources 将主源代码的资源复制到主输出目录。
> 
> 这个目标通常会自动执行，因为它默认绑定到流程资源生命周期阶段。它总是使用 project.build.resources 元素来指定资源，并且默认使用 project.build.outputDirectory 来指定复制目标。

# php - 计数行数只给我“1”。PHP

> ID：12689232
> 
> 赞同：0
> 
> 时间：2012-10-02T11:13:21.000
> 
> 标签：php, file, count, lines

好的，所以无论我尝试什么代码，无论有多少行，我似乎都只能得到行数：“1”。

我努力了

```
file="$utsokning";
$linecount = 0;
$handle = fopen($file, "r");
while(!feof($handle)){
  $line = fgets($handle, 4096);
  $linecount = $linecount + substr_count($line, PHP_EOL);
}

fclose($handle);

echo $linecount; 
```

和

```
$filen=file($utsokning);
$count=count($filen);
echo $count; 
```

但它仍然无法正常工作。

它是否与我的文件是一个 php 脚本并从数据库中获取它的信息有关？而且数据库在某种程度上很奇怪？

我确实得到了一份完整的清单，根据我的脚本的结果，计数应该在 10-200 左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:41:13.173

```
$file="$utsokning";
$linecount = 0;
$handle = fopen($file, "r");
while($line = fgets($handle)){

  $linecount++;
}

fclose($handle);

echo $linecount; 
```

尝试这个

# iphone - 在 UIWebView 中显示之前从 app Bundle 中预加载 HTML 文件

> ID：12689234
> 
> 赞同：0
> 
> 时间：2012-10-02T11:13:33.180
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我目前正在为支持 iOS 5.0 及更高版本的 iPhone 开发一个应用程序。该应用程序本质上是一个基于信息的应用程序，它使用类似于 Path 和 Facebook 的滑动视图控制器。将新视图推入堆栈的表视图。我选择在 UIWebView 中显示一些内容，该 UIWebView 从捆绑包本地加载许多 HTML 文件，主要是因为信息是静态的，并且它允许我非常容易地设置样式。

我是怎么做的没有什么特别的。发送视图控制器根据在表视图中选择的 indexPath.row 传递必要的 HTML 文件的名称。Webview 填充在 viewDidLoad 方法中，如下所示：

```
[_detailsWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource: _htmlFile ofType:@"html"] isDirectory:NO]]]; 
```

该应用程序支持 iOS 5 及更高版本，这意味着我正在寻找 iPod touch 第 3 代和第 4 代、iPhone 3GS、iPhone 4 和 4S 以及 iPhone 5 和新的 iPod touch。在 iPhone 5 上，UIWebView 加载本地 HTML 文件，正如您所期望的那样快速，但在旧设备上填充它时会有延迟。

有没有办法在显示 ViewController 的 viewDidLoad 方法之前预加载 HTML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:31:49.570

制作一个您想要预加载 HTML 文件的方法，即 ViewController

```
-(void)loadHTMLFiles:(NSString*)htmlFile
{
    //I assume u have set IBOutlet of detailsWebView 
   [_detailsWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:htmlFile ofType:@"html"] isDirectory:NO]]];
} 
```

现在在推送你的 newView 即 ViewController 之后：

```
 [ViewController *objViewController = [ViewController alloc]init];
 //here newView is pushed in navigation or add SubView
[objViewController loadHTMLFiles:yourHTMLFileName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:32:18.073

我怀疑如果您只是将文件读入 NSData 对象，然后释放该对象，那将有很大帮助。这个想法是将文件加载到文件系统缓存中，因此当 Web 视图想要读取它们时它们已经存在。首先尝试它，因为它是最容易做的事情。

# git - 是否有修复 git-diff --check 警告的脚本？

> ID：12689237
> 
> 赞同：2
> 
> 时间：2012-10-02T11:13:44.753
> 
> 标签：git, removing-whitespace, git-diff

git-diff 有一个很酷的功能，记录为：

> --check 如果更改引入尾随空格或在制表符前使用空格的缩进，则发出警告。如果发现问题，则以非零状态退出。与 --exit-code 不兼容。

我通常在提交之前使用 --check 运行 git-diff 并修复所有警告以保持代码整洁。是否有任何脚本或工具可以解析 git-diff --check 的输出并自动修复所有警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:21:35.513

本身并没有真正的脚本，但您可以很容易地使用它`git apply --whitespace=fix`来清理补丁。在我的脑海中，类似于以下内容：

```
git commit -m 'this has diff --check errors'
git format-patch --stdout HEAD | git apply --index --whitespace=fix -
git commit --amend -C HEAD 
```

如果您希望自动执行此操作，您可以尝试将其转换为提交后挂钩，但要更加小心。

# google-chrome-extension - 为什么 chrome.devtools.network “未定义”？

> ID：12689239
> 
> 赞同：14
> 
> 时间：2012-10-02T11:13:52.693
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试创建一个记录所有网络事件的扩展。这是代码：

清单.json：

```
{
  "name": "My extension",
  "version" : "1.0",
  "background": {
    "scripts": ["background.js"],
    "persistent": true
  },
 "devtools_page": "devtools.html",
 "browser_action": {
    "default_title": "Get it",
    "default_icon" : "icon.png"
  },
  "manifest_version": 2
} 
```

背景.js：

```
chrome.devtools.network.onRequestFinished.addListener(function(request) {}); 
```

有什么问题？我尝试了很多东西，似乎我在 devtools.html 中链接的任何脚本都没有被拾取。没有日志，什么都没有。只有 background.js 在做某事，它似乎不支持 chrome.devtools ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T11:23:33.223

`chrome.devtools.network`仅在 devtools 页面中可用。从[API的](http://developer.chrome.com/extensions/devtools.html#using)[文档`devtools`](http://developer.chrome.com/extensions/devtools.html#using)（第三个列表项）：

> `chrome.devtools.*`API 模块仅适用于在开发人员工具窗口中加载的页面。**内容脚本和其他扩展页面没有这些 API。**因此，API 仅在开发者工具窗口的生命周期内可用。

如果您需要后台页面中的信息，请查看此答案（包括完整代码）以设置通信渠道：[Chrome Devpanel Extension Communicating with Background Page](https://stackoverflow.com/questions/11661613/chrome-devpanel-extension-communicating-with-background-page/11677744#11677744)。

# objective-c - 在目标 c 中扩展协议实现

> ID：12689240
> 
> 赞同：0
> 
> 时间：2012-10-02T11:13:53.660
> 
> 标签：objective-c, ios

我有一个类`Foo`继承自`UIViewController`并实现了一个`UIWebViewDelegate`. 我可以`Foo`从新类继承并扩展旧`webViewDidFinishLoad`方法吗？我需要执行一些代码，然后`webViewDidFinishLoad`从超类调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:28:58.453

答案是肯定的——我自己在几个地方这样做。所以 Foo 实现了一个协议，这在接口文件中有说明。然后你可以有一个新的类，Goo，它是 Foo 的一个子类。既然 Foo 已经公开声明它实现了一个协议，那么 Goo 也将被声明为实现它。

如果该协议具有强制方法，则编译器将假定 Foo 实现了它们，因此您可以覆盖 Goo 中的任何或所有方法。如果你愿意，你也可以（像我一样）调用 '[super someMethod]' 让 Foo 也采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:21:40.493

webViewDidFinishLoad 是一个委托，您可以通过以下方式扩展另一个类：

```
Foo : anotherClass 
```

但委托是在

```
<UIWebViewDelegate> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:30:27.093

您可以在实现协议后覆盖该方法并更改或扩展行为，如下所示：

Foo.h

```
 Foo : UIViewController {}
- (void)customWebViewDidFinishLoad:(UIWebView *)webView; 
```

Foo.m

```
 - (void)webViewDidFinishLoad:(UIWebView *)theWebView {
    [self customWebViewDidFinishLoad:self.webView];
}

// Override this method in Bar.m
- (void)customWebViewDidFinishLoad:(UIWebView *)webView {
    // Default behaviour
} 
```

酒吧.h

```
 Bar : Foo 
```

巴.m

```
 - (void)customWebViewDidFinishLoad:(UIWebView *)webView {
  [super customWebViewDidFinishLoad:webView];
  //Extend the behaviour here
} 
```

# java - 无法在 Mac OS 上运行 rxtx

> ID：12689241
> 
> 赞同：1
> 
> 时间：2012-10-02T11:13:58.620
> 
> 标签：java, rxtx

我正在尝试在 Mac（OSX 10.8）上为 Java 使用 rxtx JAR 文件。我已经安装`RXTXcomm.jar`了 ,`librxtxSerial.jnilib`和随附的`.so`文件`/Library/Java/Extensions`。我正在尝试在以下位置执行示例代码： [http ://arduino.cc/playground/Interfacing/Java](http://arduino.cc/playground/Interfacing/Java)

但是当我收到一堆`cannot find symbol`错误消息时，我显然遗漏了一些东西。

这里有一对：

```
SerialTest.java:3: cannot find symbol
symbol  : class CommPortIdentifier
location: package gnu.io
import gnu.io.CommPortIdentifier;
             ^
SerialTest.java:4: cannot find symbol
symbol  : class SerialPort
location: package gnu.io
import gnu.io.SerialPort; 
```

在我的机器上安装的 Java 中是否缺少一些更基本的东西？我刚刚安装了 Xcode 4.5，所以我认为一切都可以运行这个简单的代码。

人们要求我将库放在同一目录中。随附的是一个`ls`和`javac`我正在运行的命令：

```
$javac -classpath RXTXcomm.jar:. SerialTest.java 

SerialTest.java:3: cannot find symbol
symbol  : class CommPortIdentifier
location: package gnu.io
import gnu.io.CommPortIdentifier;
             ^
SerialTest.java:4: cannot find symbol
symbol  : class SerialPort
location: package gnu.io
import gnu.io.SerialPort;
             ^
SerialTest.java:5: cannot find symbol
symbol  : class SerialPortEvent
location: package gnu.io
import gnu.io.SerialPortEvent; 
             ^
SerialTest.java:6: cannot find symbol
symbol  : class SerialPortEventListener
location: package gnu.io
import gnu.io.SerialPortEventListener; 
             ^
SerialTest.java:9: cannot find symbol
symbol: class SerialPortEventListener
public class SerialTest implements SerialPortEventListener {
                                   ^
SerialTest.java:10: cannot find symbol
symbol  : class SerialPort
location: class SerialTest
    SerialPort serialPort;
    ^
SerialTest.java:83: cannot find symbol
symbol  : class SerialPortEvent
location: class SerialTest
    public synchronized void serialEvent(SerialPortEvent oEvent) {
                                         ^
SerialTest.java:27: cannot find symbol
symbol  : class CommPortIdentifier
location: class SerialTest
        CommPortIdentifier portId = null;
        ^
SerialTest.java:28: cannot find symbol
symbol  : variable CommPortIdentifier
location: class SerialTest
        Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();
                               ^
SerialTest.java:32: cannot find symbol
symbol  : class CommPortIdentifier
location: class SerialTest
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
            ^
SerialTest.java:32: cannot find symbol
symbol  : class CommPortIdentifier
location: class SerialTest
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
                                             ^
SerialTest.java:48: cannot find symbol
symbol  : class SerialPort
location: class SerialTest
            serialPort = (SerialPort) portId.open(this.getClass().getName(),
                          ^
SerialTest.java:53: cannot find symbol
symbol  : variable SerialPort
location: class SerialTest
                    SerialPort.DATABITS_8,
                    ^
SerialTest.java:54: cannot find symbol
symbol  : variable SerialPort
location: class SerialTest
                    SerialPort.STOPBITS_1,
                    ^
SerialTest.java:55: cannot find symbol
symbol  : variable SerialPort
location: class SerialTest
                    SerialPort.PARITY_NONE);
                    ^
SerialTest.java:84: cannot find symbol
symbol  : variable SerialPortEvent
location: class SerialTest
        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
                                     ^
16 errors
MacBook-Pro:src user$ ls
RXTXcomm.jar        comm.jar        librxtxSerial.jnilib
SerialTest.java     librxtxParallel.so  librxtxSerial.so
MacBook-Pro:src user$ 
```

是我错过了另一个 JAR 来完成这项工作吗？我在`RXTXcomm.jar`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:35:16.473

RXTX 库由两部分组成：首先是 Java/Jar 部分，其次是本机库。

如果 Java 可执行文件找不到本机`rxtx`库，则会发生错误。因此，您应该检查此本机库的位置。JNI 库应具有文件扩展名`.jnilib`或`.dylib`. 那么你有两种可能：

*   **第一种可能性**是将本机库复制到启动 Java 的目录中（使用 Eclipse 时，这是项目目录）。

*   **第二种可能**是启动Java并指定原生库所在的库路径：

```
java -Djava.library.path=".:/Users/bill/rxtx/jni" MyClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:12:26.887

如果在上面的这些提示之后它仍然不起作用，则可能你有 32 位 RXTX 库。在可以运行 32 位应用程序的 Mac 上，您可以强制客户端 Java VM 在 32 位模式下工作（与某些 Java 专家所说的相反）。`UnsatisfiedLinkError`我通过简单地使用选项调用java来管理这种方式来摆脱`-d32`它（注意小写，因为它不是Java系统属性）。

我与用于 Atmel 处理器的旧 RS-232 程序员进行通信的旧程序启动得很好，并且在 64 位环境中运行良好。但是，请记住，对于较新的 Mac 和 64 位独占环境，该选项可能不可用 - 这是我仍然在 Core 2 Duo 上保留“双”Mac OS X Snow Leopard 的主要原因（从 Core Duo 升级戴尔笔记本移植处理器）Mac Mini。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:46:24.650

打开项目属性面板，转到库，选择按钮选项编译并单击添加 Jar/Folder，将 RXTXComm.jar 添加到列表中。那对我有用。编译器会看到该库，因为您放置在正确的位置，然后正如 Netbeans 在项目属性面板中所说的“编译时库传播到所有库类别”，我们期望在运行时具有相同的可见性，但不会发生。

# entity-framework - EF5 将 IQueryable 映射到具有列属性的自定义类

> ID：12689243
> 
> 赞同：1
> 
> 时间：2012-10-02T11:13:59.277
> 
> 标签：entity-framework, mapping, iqueryable, entity-framework-5

好的，这就是问题所在，我在数据库中有一个视图，其中包含大量信息，100 列，vwComponantA

我的 .net 应用程序中有一个名为 ComponantA 的实体，它包含使用 [Column()] 属性的所有映射，这很好，可以工作，但是速度很慢，因为它在数据库上执行了一个 select * 来填充对象，这又可以了.

为了解决上述性能问题，我引入了 DynamicLinq。这允许我减少我带回的列的数量，并且仍然允许我使用类型安全来使用普通的 Linq 进行查询，这很棒。然后处理我带回的缩减字段，我有单独的 POCO 组件，每个组件都有自己的一组 [Column] 属性，在运行时使用映射类进行映射。

问题是在处理大型数据集时，它们之间的映射可能会非常慢，10000 条记录映射 10000 次等。EF 所做的是创建一个 DynamicProxyClass，然后您在组件之间进行映射。

我的问题是，我怎样才能避免映射并让 EF 为我做映射？（我处理`IQueryable`不是`IQueryable<T>`因为动态 linq）

必须有一种方法来利用 [Column] 属性，同时保持查询动态。

这是所有代码优先和实体框架 5。

谢谢你的帮助。缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:03:56.200

老实说，我不明白你的问题，但你想要做的不需要动态 linq。你只需要预测：

```
var data = from c in context.vwComponentA
           select new POCOWithIdAndName {
               Id = c.Id,
               Name = c.Name
           }; 
```

投影在数据库中执行，因此它只会带回`Id`和`Name`。

# java - .txt 地图在游戏 Java 中不起作用

> ID：12689256
> 
> 赞同：-2
> 
> 时间：2012-10-02T11:14:49.603
> 
> 标签：java, swing, multidimensional-array, filereader

我的小程序应该从名为 map1.txt 的 .txt 文件中读取，并将其中的字符存储在 Char[][] 数组中。根据我的 map1.txt 中的字符，如果 char 为“x”，则我的 Tile 类绘制红色，否则绘制绿色。（相反，程序显示面板后面的内容，而不是红色和绿色的框。编辑）。

![请注意，这是我的程序...](../Images/e312c3fe071e860d841e7bfab189588f.png)

```
public class MainClass extends JPanel {
    static Tile[][] tile = new Tile[SomeInts.amount][SomeInts.amount];
    static Map map = new Map();
    public MainClass () {
        this.setBackground(Color.white);
    }
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        for (int x = 0; x < SomeInts.amount; x++){
            for (int y = 0; y < SomeInts.amount; y++){
                tile[x][y].colorBody(g, x, y);
            }
        }
    }
    //Most important
    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setSize(500, 500);
        f.setLocation(100,100);
        f.setTitle("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MainClass p = new MainClass ();
        f.add(p);
        f.setVisible(true);
            //load map
        map.loadMap();
        for (int x = 0; x < SomeInts.amount; x++){
            for (int y = 0; y < SomeInts.amount; y++){
                tile[x][y] = new Tile();
            }
        }
        for (int x = 0; x < SomeInts.amount; x++){
            for (int y = 0; y < SomeInts.amount; y++){
                tile[x][y].setType(map.charmap[x][y]);
            }
        }
    }
}

public class Tile {
    char type = 'a';
    public void setType(char c){
        type = c;
    }
    public void colorBody(Graphics g, int x, int y){
        if (type == 'x'){
            g.setColor(new Color(255, 0, 0));
            g.fillRect(x * 10, y * 10, 10, 10);
        }
        else{
            g.setColor(new Color(0, 255, 0));
            g.fillRect(x * 10, y * 10, 10, 10);
        }
    }   
}

public class Map {
    public char[][] charmap = new char[SomeInts.amount][SomeInts.amount];
    public void loadMap(){
        BufferedReader in = null;
        try {
            in = new BufferedReader(new FileReader("map1.txt"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        String line = null;
        try {
            line = in.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }
        while (line != null){
            int y = 0;
            for (int x = 0; x < line.length(); x++){
                charmap[x][y] = line.charAt(x);
            }
            y++;
        }
    }

    //Not used but does work
    public void createMap() {
          for (int x = 0; x < SomeInts.amount; x++){
              for (int y = 0; y < SomeInts.amount; y++){
                  charmap[x][y] = 'x';
              }
          }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:23:19.647

您显示的代码有一个无限循环，您的想法有点偏离。您读取的逻辑读取一行，然后只要该行不为空，它就会循环。该行从一开始就为空，或者不是，它不会自行改变。处理完当前行后，您需要读取新行。

您还需要将 y 的重置移出循环。现在将 y 设置为 0，将其增加 1，然后再次将其设置回 0。

```
String line = null;
int y = 0;
try {
    while ((line = in.readLine())!= null) {
        for (int x = 0; x < line.length(); x++){
            charmap[x][y] = line.charAt(x);
        }
        y++;
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

# ruby-on-rails - 未知属性：plan_id 与用户使用 has_many 关联时

> ID：12689261
> 
> 赞同：0
> 
> 时间：2012-10-02T11:15:07.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

***已解决 哎呀！我忘记将 plan_id 迁移到 users 表...

在 Michael Hartl 的教程之后，我一直在窃听自己的应用程序。现在，有两个表——计划和用户。计划 has_many users 和 users belongs_to Plans，现在我要做的是完成注册过程，所以当有人通过 plan_id=? 进入注册表单时，它会将其提交到隐藏的表单字段，并且注册用户。

但是，当我尝试访问我的 signup_path 时，我收到此错误：

```
ActiveRecord::UnknownAttributeError in UsersController#new

unknown attribute: plan_id 
```

我不太确定该怎么做。会喜欢你的想法！

用户控制器

```
class UsersController < ApplicationController

  before_filter :signed_in_user, only: [:show]
  before_filter :correct_user,   only: [:show]

    def show
    @user = User.find(params[:id])
    end

    def new
  plan = Plan.find(params[:plan_id])
    @user = plan.users.build
    end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def index

    if current_user
      redirect_to(user_path(current_user))
    else
    redirect_to(root_path)
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to login_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

查看/用户/new.html.erb

```
<% provide(:title, 'Sign up') %>
<div class="contentstripe">
<div class="container">
  <div class="row">
   <h1>Sign Up </h1>
  </div>
</div>
</div>

<div class="container">
 <div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>

      <%= f.hidden_field :plan_id %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div>
</div> 
```

计划模型

```
# == Schema Information
#
# Table name: plans
#
#  id                :integer          not null, primary key
#  name              :string(255)
#  max_phone_numbers :integer
#  max_minutes       :integer
#  created_at        :datetime         not null
#  updated_at        :datetime         not null
#  price             :decimal(, )
#

class Plan < ActiveRecord::Base
  has_many :users
end 
```

用户模型

```
# Twilio authentication credentials
TWILIO_PARENT_ACCOUNT_SID = '##redacted' ##Development
TWILIO_PARENT_ACCOUNT_TOKEN = '##redacted'

# == Schema Information
#
# Table name: users
#
#  id                 :integer          not null, primary key
#  name               :string(255)
#  email              :string(255)
#  created_at         :datetime         not null
#  updated_at         :datetime         not null
#  password_digest    :string(255)
#  remember_token     :string(255)
#  twilio_account_sid :string(255)
#  twilio_auth_token  :string(255)
#

class User < ActiveRecord::Base
  belongs_to :plan
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token
  before_save :create_twilio_subaccount

  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true

  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
  validates_presence_of :plan_id

  private

      def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
      end

    def create_twilio_subaccount     
      @client = Twilio::REST::Client.new(TWILIO_PARENT_ACCOUNT_SID, TWILIO_PARENT_ACCOUNT_TOKEN)
      @subaccount = @client.accounts.create({:FriendlyName => self[:email]})
      self.twilio_account_sid = @subaccount.sid
      self.twilio_auth_token  = @subaccount.auth_token
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:23:56.367

您的方法的 url`UsersController#new`必须包含一个`plan_id`部分，后跟一个`id`应该由`params[:plan_id]`. 你的网址是这样的吗？你可以添加你的输出的相关部分`rake routes`。

# php - 时差 4 月 - 3 月 错误值

> ID：12689262
> 
> 赞同：1
> 
> 时间：2012-10-02T11:15:07.953
> 
> 标签：php, date, datetime, timestamp

我正在尝试使用以下函数获取一个月的范围：

```
static public function getMonthRange($month, $year)
{
    $date = DateTime::createFromFormat('d-m-Y','01-'.$month.'-'.$year);
    $start = $date->getTimestamp();

    return array(
        'start' => $start,
        'end' => $date->modify('first day of next month')->getTimestamp()
    );
} 
```

现在这工作正常，除了三月。当我通过计算每月的天数来检查这些值时，`((end - start) / 60 / 60 / 24)`我发现三月是 30.958333333333 天，而其他月份给出了正确的天数。

我决定自己在这样的计算中输入日期：

```
$march = ((strtotime('2012-04-01') - strtotime('2012-03-01')) / 60 / 60 / 24); //30.95833..
$april = ((strtotime('2012-05-01') - strtotime('2012-04-01')) / 60 / 60 / 24); //30
$may =   ((strtotime('2012-06-01') - strtotime('2012-05-01')) / 60 / 60 / 24); //31 
```

它仍然给了我错误的三月天数。我的方法有问题吗？更重要的是；我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:20:15.590

三个字：夏令时。

三月少了一个小时。

此外，您的函数存在于 PHP 中：http: [//php.net/manual/en/function.cal-days-in-month.php](http://php.net/manual/en/function.cal-days-in-month.php)

# internet-explorer - watir-webdriver - 使用特殊字符设置 text_field 时，chrome 和 IE 更改输入

> ID：12689263
> 
> 赞同：2
> 
> 时间：2012-10-02T11:15:14.267
> 
> 标签：internet-explorer, special-characters, watir-webdriver, selenium-chromedriver

我正在尝试将文本插入文本字段。它有一些特殊字符。原来是 Chrome 和 IE 的问题。

```
browser = Watir::Browser.new :chrome #or :ie
# here are some steps
field = browser.text_field
field.set "O'Reily" #this is just an example of problematic text
# after this field.value equals "O''Reily" when using chrome 
```

Chrome 在我的引号前插入单引号。这不是唯一的情况。当我用这个原始文本设置字段时：

> ~ ！^ & ` ´ ¨ ' "

Chrome 实际上用这个值设置字段

> `~！^ & ``'''¨ '''"

在 IE 中它会删除一些空格

> ~！^& `´¨ ' "

只有 Firefox 使用我的原始文本设置字段。

有人可以帮我在 Chrome 和 IE 中设置确切的文本吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:55:22.930

您是否在文件顶部尝试过此操作？来自[Watir-General](https://groups.google.com/forum/#!msg/watir-general/xb8d0a48uFI/5EOSewVCce4J)

```
# coding: UTF-8 
```

# silverlight - Silverlight 错误：System.Reflection.TargetInvocationException 异常已由调用目标引发

> ID：12689264
> 
> 赞同：0
> 
> 时间：2012-10-02T11:15:14.820
> 
> 标签：silverlight, silverlight-4.0

我已经安装了 VS-2012 Express Edition。现在，我正在尝试创建 Silverlight 应用程序。

一开始，我以以下错误结束：

**在创建 Silverlight 项目之前，您需要安装最新的 Silverlight Developer 运行时。在以下位置下载 x86 运行时：go.microsoft.com/fwlink/?LinkId=229323**

因此，我从上面给定的 URL 下载了 Silverlight Developer 运行时，并尝试再次创建 Silverlight 应用程序。

当我单击“**新项目”对话框上的“****确定**”按钮时，我收到以下错误。

 **可能是什么原因？有人可以建议解决方案吗？

![在此处输入图像描述](../Images/de0efb7b695f69609d868622257561b1.png)

错误摘要如下：

> System.Reflection.TargetInvocationException 调用的目标已引发异常。在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion（NestedCallContext nestedCallContext，BlockingCall 调用，WaitHandle timeoutSignal）在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous（操作动作，Int32 targetApartmentId，WaitHandle 中止，WaitHandle timeoutSignal ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle `1 targetObject, Action action, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 个目标对象，函数`2 func, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CreateDesignerImpl(IHostSourceItem item, IHostTextEditor editor, RemoteCancellationToken remoteCancelToken) at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__11(RemoteCancellationToken remoteToken) at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CallWithCancellation[TResult](CancellationToken cancelToken, Func`2 功能）在 Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner（IHostSourceItem 项，IHostTextEditor 编辑器，CancellationToken cancelToken）在 Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo（CancellationToken cancelToken )
> 
> System.Reflection.TargetInvocationException 调用的目标已引发异常。
> 
> 服务器堆栈跟踪：位于 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId) 处的 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal) Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func) 在 Microsoft.Expression 的 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action) .DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner（IRemoteHostSourceItem remoteItem，IRemoteHostTextEditor remoteEditor，IRemoteCancellationToken remoteToken) 在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 Microsoft.Expression 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService 中的 DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken cancelToken)。<>c__DisplayClass8.b__6(IRemoteDesignerService d) 在 Microsoft.Expression.DesignHost.Isolation。 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker() 上的 Remoting.ThreadMarshaler.<>c__DisplayClass4`2.b__3()
> 
> System.Reflection.TargetInvocationException 调用的目标已引发异常。在 System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfoculture) 在 System.RuntimeType.CreateInstanceImpl System.Activator.CreateInstance（类型类型，BindingFlags bindingAttr，Binder binder，Object[] args，CultureInfo 文化，Object[]在 Microsoft.Expression.DesignSurface.PlatformLoader 的 System.Activator.CreateInstance(Type type, Object[] args) 中的 activationAttributes)。`2 func) at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__e() at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.b__15() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()
> 
> System.NotSupportedException 找不到 Microsoft Silverlight SDK 5.0。请确保已安装正确版本的 Microsoft Silverlight SDK。在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion（NestedCallContext nestedCallContext，BlockingCall 调用，WaitHandle timeoutSignal）在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous（操作动作，Int32 targetApartmentId，WaitHandle 中止，WaitHandle timeoutSignal ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func `1 func, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteWrapper`1.Invoke[T](Func`2 action) 在 Microsoft.Expression.Expression.DesignHost.Isolation.Remoting.RemoteHostPlatformService.Microsoft.Expression.DesignHost.IHostPlatformService.GetProperty(String frameworkSpec, String propertyName) 在 Microsoft.Expression。 Microsoft.Expression.Platform.PlatformService.GetProperty(String frameworkSpec, String propertyName) 的 DesignSurface.PlatformContext.GetProperty(String frameworkSpec, String propertyName) Microsoft.Expression.SilverlightPlatform.SilverlightPlatformCreator..ctor(IPlatformService platformService)
> 
> System.NotSupportedException 找不到 Microsoft Silverlight SDK 5.0。请确保已安装正确版本的 Microsoft Silverlight SDK。
> 
> 服务器堆栈跟踪：位于 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId) 处的 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal) Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func) at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteWrapper`1.Invoke[T](Func`2 action) at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteHostPlatformService.Microsoft.Expression.DesignHost.IHostPlatformService.GetProperty(String frameworkSpec, String propertyName) at System.Runtime.Remoting.Messaging。 StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs) at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 Microsoft.Expression 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteHostPlatformService 处的 DesignHost.IHostPlatformService.GetProperty(String frameworkSpec, String propertyName)。<>c__DisplayClass1.b__0(IHostPlatformService s) 处 Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteWrapper `1.<>c__DisplayClass4`1.b__3( ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass7`2.b__6() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()
> 
> System.NotSupportedException 找不到 Microsoft Silverlight SDK 5.0。请确保已安装正确版本的 Microsoft Silverlight SDK。在 Microsoft.Expression.HostUtility.Platform.SilverlightDomainFactory.get_ReferenceAssembliesPath() 在 Microsoft.Expression.HostUtility.Platform.HostPlatformService.GetProperty(String frameworkSpec, String propertyName) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteHostPlatformService.<>c__DisplayClass1。 b__0(IHostPlatformService s) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteWrapper `1.<>c__DisplayClass4`1.b__3() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.b__15() 在 Microsoft.Expression.DesignHost .Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:24:47.180

格式化您的错误消息后，我发现您的问题是您还需要安装 Silverlight 5 工具，您可以在此页面上找到该工具：[Silverlight.net 下载页面](http://www.silverlight.net/downloads)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T23:56:27.300

我受到了 slugster 的启发，我也开始扫描完整的错误消息。我发现需要安装 Microsoft® Silverlight® 5 SDK。我从[这里](http://www.microsoft.com/en-in/download/details.aspx?id=28359)安装了相同的，我的问题得到了解决。**

# php - 任务和做有什么区别

> ID：12689274
> 
> 赞同：13
> 
> 时间：2012-10-02T11:16:05.270
> 
> 标签：php, gearman

在查看 php gearman 文档时，我看到有任务和执行，它们都有背景和非背景，它们也都有高低和正常。

谁能澄清这些？我只是对差异感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T09:11:14.763

有两个区别：运行顺序和目的。

**运行顺序**- 当您通过 do 和 runTasks 运行某些任务时，do 的优先级高于任务。所以运行顺序将是：

1.  都具有高优先级（GearmanClient::doHigh() 或
    GearmanClient::doHighBackground()）
2.  所有具有高优先级的任务（GearmanClient::addTaskHigh() 或 GearmanClient::addTaskHighBackground()）
3.  都以正常的优先级
4.  所有具有正常优先级的任务
5.  都是低优先级的
6.  所有低优先级任务

**目的：**

***任务***- 当您不关心它何时完成或进度如何时，将其用于短期任务

***做***- 将它用于复杂的工作或当您需要检查进度时。为此目的有[GearmanJob::sendStatus() ：](http://docs.php.net/manual/en/gearmanjob.sendstatus.php)

**工人.php**

```
$worker = new GearmanWorker();
$worker->addServer();
$worker->addFunction("sleep13", array('MyWorker', 'sleep13'));
while ($worker->work());

class MyWorker {
    public function sleep13($job) {
        $data = unserialize($job->workload());
        echo 'start ' . $data['id']  . PHP_EOL;

        for($i = 0; $i < 13; $i++) {
            sleep(1);
            $job->sendStatus($i, 13);
        }
        echo 'done ' . $data['id']  . PHP_EOL;
    }
} 
```

**客户端.php**

```
$client = new GearmanClient();
$client->addServer();

// Run task
$job_handle = $client->doBackground("sleep13", serialize(array('id' => 'normal-1')));

// Check progress
$done = false;
do {
   usleep(300);
   $stat = $client->jobStatus($job_handle);
   if (!$stat[0]) // the job is known so it is not done
      $done = true;
   echo "Running: " . ($stat[1] ? "true" : "false") . ", numerator: " . $stat[2] . ", denomintor: " . $stat[3] . "\n";
} while(!$done);

echo "done!\n"; 
```

$job_handle 是字符串，因此您可以将其存储在某个地方，然后随时检查。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T15:25:52.460

好吧，我已经为您做了一些研究，因为我也考虑过这一点。

如果您运行它，它会立即运行（发送到作业服务器） [http://www.php.net/manual/en/gearmanclient.donormal.php](http://www.php.net/manual/en/gearmanclient.donormal.php)

> ## 做
> 
> 运行单个任务并返回结果的字符串表示形式。由 GearmanClient 和 GearmanWorker 决定结果的格式。

如果任务是您可以构建它们的列表，然后在 GearmanClient::Run() 时并行运行它们。

[http://www.php.net/manual/en/gearmanclient.addtask.php](http://www.php.net/manual/en/gearmanclient.addtask.php)

> ## 任务
> 
> 添加要与其他任务并行运行的任务。调用此方法让所有任务并行运行，然后调用 GearmanClient::runTasks() 来执行工作。请注意，需要有足够的工作人员可供任务全部并行运行。

# c++ - boost::bind 成员函数 - 部分应用程序链接

> ID：12689277
> 
> 赞同：3
> 
> 时间：2012-10-02T11:16:19.900
> 
> 标签：c++, boost, bind, partial-application

我正在尝试使用 boost::bind 将 curried 函数链接在一起，并得到我无法解决的编译器错误。我可以制作的最简单的示例无法编译：

```
#include <iostream>
#include <boost/bind.hpp>

class A
{
public:
    template <typename F>
    void g(F fn, char c)
    {
        fn(c);
    }

    void h(char c)
    {
        std::cout << c << std::endl;
    }

    template <typename F>
    void f(F fn, char c)
    {
        boost::bind(&A::g<F>, this, fn, ::_1)(c);
    }
};

int main(int argc, char** argv)
{
    char c = 'a';
    A a;
    a.f(boost::bind(&A::h, &a, ::_1), c);
} 
```

失败并出现此错误：

```
In file included from /usr/include/boost/bind.hpp:22,
                 from test8.cpp:2:
/usr/include/boost/bind/bind.hpp: In member function ‘void boost::_bi::list3<A1, A2, A3>::operator()(boost::_bi::type<void>, F&, A&, int) [with F = boost::_mfi::mf2<void, A, boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, char>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >, char>, A = boost::_bi::list1<char&>, A1 = boost::_bi::value<A*>, A2 = boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, char>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >, A3 = boost::arg<1>]’:
/usr/include/boost/bind/bind_template.hpp:32:   instantiated from ‘typename boost::_bi::result_traits<R, F>::type boost::_bi::bind_t<R, F, L>::operator()(A1&) [with A1 = char, R = void, F = boost::_mfi::mf2<void, A, boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, char>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >, char>, L = boost::_bi::list3<boost::_bi::value<A*>, boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, char>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >, boost::arg<1> >]’
test8.cpp:21:   instantiated from ‘void A::f(F, char) [with F = boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, char>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >]’
test8.cpp:29:   instantiated from here
/usr/include/boost/bind/bind.hpp:385: error: invalid use of void expression 
```

这是使用

```
$ g++ --version
g++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:22:36.343

您需要`boost::protect()`在这种情况下使用，当您将绑定表达式传递给另一个绑定调用但不希望在评估外部绑定函数的参数期间调用嵌套表达式，而是希望传递嵌套的绑定表达式原样作为外部边界函数的参数。这将是：

```
boost::bind(&A::g<F>, this, boost::protect(fn), ::_1)(c); 
```

# ruby-on-rails - 自动打开 Rails 工作流的所有 Vim 选项卡

> ID：12689278
> 
> 赞同：0
> 
> 时间：2012-10-02T11:16:21.900
> 
> 标签：ruby-on-rails, bash, vim

我现在正在处理 PHP、Python 和 Rails 项目，并且希望每次切换项目时都能更快地开始工作。

我找到了一些 Guake 或 ABC 终端自动化脚本来使用某些命令（、、、等）加载我的`rails server --debugger`不同`vim ~/railsapp`终端`cd ~/railsapp`。

**Q.**使这些终端之一在预先确定的目录或文件中打开带有多个选项卡的 Vim 的启动命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:38:16.497

另外，如果您还没有，请将[NerdTree](http://www.vim.org/scripts/script.php?script_id=1658)插件添加到您的 vim 配置中。这将使您能够以更好的方式管理任何 Rails 项目。`vim ~/rails_app`将为您提供项目的目录结构，然后您可以管理选项卡。正如 romainl 已经提到的，mksession 可以帮助您设置工作区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:33:28.363

见`:help mksession`。

基本上你手动设置一个工作区：这个缓冲区在那个拆分中，这些拆分在那个选项卡中……然后做`:mksession /path/to/mysession.vim`。之后，您可以启动 Vim`$ vim -S /path/to/mysession.vim`并查看 Vim 重建您的工作区。

# lucene - lucidworks 企业爬网不索引我的数据

> ID：12689282
> 
> 赞同：3
> 
> 时间：2012-10-02T11:16:41.870
> 
> 标签：lucene, solrnet

我将 lucidworks 企业配置为使用我的 sql server 数据库中的数据。当我开始清醒地抓取我的数据时，不幸的是没有创建索引！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T07:20:31.947

查看[文档](http://docs.lucidworks.com/display/home/LucidWorks+Documentation+Center)。[此处](http://lucidworks.lucidimagination.com/display/bigdata/Loading+Data)提供有关加载数据的详细信息

# c# - 带有 StreamReader 的内存泄漏（？）

> ID：12689284
> 
> 赞同：5
> 
> 时间：2012-10-02T11:16:48.173
> 
> 标签：c#, streamreader

我有几个非常大的文件，每个文件都`500MB++`包含整数值（实际上它有点复杂），我正在循环读取这些文件并计算所有文件的最大值。由于某种原因，内存在处理过程中不断增长，看起来 GC 从未释放内存，由`lines`.

我无法流式传输数据并且必须`GetFileLines`为每个文件使用。`lines`假设存储一个文件所需的实际内存量是`500MB`，为什么在处理 10 个文件后我就用完了`5GB`？`RAM`最终它在 15 个文件后因内存不足异常而崩溃。

计算：

```
 int max = int.MinValue;

   for (int i = 0; i < 10; i++)
   {
      IEnumerable<string> lines = Db.GetFileLines(i);

      max = Math.Max(max, lines.Max(t=>int.Parse(t)));
   } 
```

GetFileLines 代码：

```
 public static List<string> GetFileLines(int i)
   {
      string path = GetPath(i);

      //
      List<string> lines = new List<string>();
      string line;

      using (StreamReader reader = File.OpenText(path))
      {
         while ((line = reader.ReadLine()) != null)
         {
            lines.Add(line);
         }

         reader.Close();
         reader.Dispose(); // should I bother?
      }

      return lines;
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:23:46.927

对于非常大的文件，方法`ReadLines`将是最合适的，因为它是*延迟执行*，它不会将所有行加载到内存中并且使用简单：

```
 Math.Max(max, File.ReadLines(path).Max(line => int.Parse(line))); 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/dd383503.aspx](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

**编辑：**

这是`ReadLines`在幕后实现的方式：

```
 public static IEnumerable<string> ReadLines(string fileName)
    {
        string line;
        using (var reader = File.OpenText(fileName))
        {
            while ((line = reader.ReadLine()) != null)
                yield return line;
        }
    } 
```

此外，当您有多个文件时，建议使用并行处理来提高性能

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T11:21:03.667

您可能会崩溃，因为您在处理完解析结果后会将对解析结果的引用保存在内存中（您显示的代码不会这样做，但是您运行的代码是否相同？）。极不可能有这样的错误`StreamReader`。

您确定必须一次读取内存中的所有文件吗？很有可能使用可枚举的行序列`IEnumerable<string>`而不是预先加载`List<string>`。至少在这段代码中没有什么禁止这样做的。

最后，`Close`and`Dispose`调用是多余的；`using`自动处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:22:53.150

为什么不按如下方式实现：

```
int max = Int32.MinValue;
using(var reader = File.OpenText(path)) 
{
    while ((line = reader.ReadLine()) != null)
    {
         int current;
         if (Int32.TryParse(line, out current))
             max = Math.Max(max, current);
     }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T11:21:23.410

您正在将整个文件读入内存（列表行）

我想你可以一次读一行并保持最高的数字吗？

它会为你节省很多内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T11:24:44.877

您似乎总是在内存中加载整个文件。同时，您也在为文件的每一行创建托管对象（列表）。

您的内存使用量没有理由增加。

还请发布其余代码，我怀疑您是否在某个地方引用了正在使用的此列表，因此它没有被处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T11:26:54.467

好吧，如果您想要一个可以一次读取整个文件的解决方案，因为您**确定**需要提高性能，那么让我们这样做，这样您就不会遇到内存问题。

```
public static int GetMaxForFile(int i) 
{ 
    string path = GetPath(i); 

    var lines = new List<string>(File.ReadAllLines(path));

    // you MUST perform all of your processing here ... you have to let go
    // of the List<string> variable ...
    int max = Math.Max(max, lines.Max(t=>int.Parse(t)));

    // this may be redundant, but it will cause GC to clean up immediately
    lines.Clear();
    lines = null;

    return max;
} 
```

# php - 分页，每页的项目取决于结果的数量（PHP）

> ID：12689285
> 
> 赞同：3
> 
> 时间：2012-10-02T11:16:51.837
> 
> 标签：php, pagination

长期潜伏者第一次提问。

我正在尝试拼凑一个分页功能，该功能将考虑项目总数并增加每页的结果以确保每个页面都被完全填充。

例如，如果我有 35 个结果并且我希望每页至少有 10 个结果，那么理想情况下每页返回 12、12 和 11 个结果。

显然我的逻辑能力很弱，因为我这辈子似乎无法理解这个看似简单的任务。令人尴尬（我问起来很痛苦），因为我已经在这里待了一个星期，我知道对此有一个简单的答案。

我不一定要寻求解决方案（尽管这将不胜感激），因为正确方向的提示可能就是我所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:19:32.923

假设您至少有 10 个项目（测试它）：

```
nbPages = floor(nbItems/10)

nbItemsPerPageMax = 10 + ceil((nbItems - 10*nbPages)/nbPages) 
```

您不需要调整最后一页，因为`limit`在这种情况下，子句不需要确切的数字或项目（只需使用`limit numPage*nbItemsPerPageMax, nbItemsPerPageMax`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:20:55.913

你必须编写这样的查询并`LIMIT`用于限制你在所有结果中显示结果的数量。

```
select * from table where condition LIMIT 0,12 
```

# visual-c++ - 是否可以在 Window Store App 中加载 c 库？

> ID：12689288
> 
> 赞同：0
> 
> 时间：2012-10-02T11:17:07.887
> 
> 标签：visual-c++, dllimport, windows-store-apps

是否可以在 Window Store App 中加载 c 库？如果是，请告诉我如何加载。我的代码如下。

我在 PDFconverter 类中声明如下。

```
[DllImport("gsdll32.dll", EntryPoint = "gsapi_new_instance")]
private static extern int gsapi_new_instance(out IntPtr pinstance, IntPtr caller_handle); 
```

访问类如下：

```
PDFConvert converter = new PDFConvert();
converter.Convert(inputpath, outputpath); 
```

# python - 事件序列、循环神经网络、PyBrain

> ID：12689293
> 
> 赞同：7
> 
> 时间：2012-10-02T11:17:25.143
> 
> 标签：python, machine-learning, neural-network

我正在尝试使用循环神经网络预测销售需求。这里

[https://stackoverflow.com/a/2525149/423805](https://stackoverflow.com/a/2525149/423805)

有人提到 PyBrain 通过示例代码支持序列。尽管数据不完全是类别，但我在此示例中对它们进行了建模。数据在这里

```
6 6 6 6 2 6 2 6 2 2 6 2 6 6 2 6 2 4 4 4 5 6 6 1 2 2 6 6 6 2 6 2 6 6 2 6 2 2 6 2 1 2 2 6 6 6 2 1 2 6 2 6 6 2 2 6 2 2 2 6 2 6 2 2 2 2 2 6 2 2 6 6 6 6 1 2 2 6 2 2 2 2 6 2 2 2 2 3 3 2 3 2 6 6 6 6 2 6 2 6 6 2 6 2 6 6 2 6 6 2 2 3 4 3 3 1 3 1 2 1 6 1 6 6 1 6 6 2 6 2 6 2 2 2 6 6 1 6 2 6 1 2 1 6 2 6 2 2 2 2 6 6 1 6 6 2 2 6 2 2 2 3 4 4 4 6 4 6 1 6 6 1 6 6 6 6 1 6 2 2 2 6 6 6 6 2 6 6 2 2 6 2 6 2 2 2 6 2 2 2 6 6 6 6 3 2 2 6 2 2 2 2 2 2 6 2 6 2 2 2 6 2 2 6 6 2 6 6 6 2 2 2 3 3 3 4 1 6 6 1 6 6 1 6 1 6 6 6 6 1 6 6 6 2 1 2 2 2 2 2 2 3 6 6 6 6 6 2 6
1 6 6 1 6 1 1 1 1 1 1 6 6 6 1 2 1 6 6 1 1 1 6 6 2 1 6 6 1 1 1 6 1 2 1 6 2 2 2 2 2 6 1 6 6 1 2 1 6 6 6 1 1 1 6 6 1 1 1 1 6 1 1 2 1 6 1 6 1 1 6 2 6 2 6 6 6 3 6 6 1 6 6 2 2 2 3 2 2 6 6 6 1 1 6 2 6 6 2 6 2 6 6 1 3 6 6 1 1 1 2 2 3 2 2 6 2 2 2 1 6 1 6 1 1 6 2 1 1 1 2 2 1 6 1 1 1 1 2 6 1 1 1 1 6 1 6 1 2 1 6 1 6 6 1 6 1 2 2 2 2 3 3 2 2 2 6 6 6 6 2 1 1 6 1 1 1 6 1 6 1 6 1 6 1 1 6 6 2 1 1 6 6 1 1 2 6 2 6 6 6 1 2 6 1 6 1 1 1 1 6 1 6 1 1 6 6 1 6 6 1 6 1 6 6 1 1 6 6 2 2 2 2 2 2 2 2 2 6 6 6 6 1 6 6 6 1 6 6 1 6 6 1 1 6 1 3 3 3 5 1 6 6 6 6 6 6 6 6
6 6 6 6 6 6 6 2 6 6 6 6 6 6 6 2 6 6 6 6 2 6 6 6 2 2 6 6 6 6 6 6 6 1 6 2 6 6 6 6 6 6 6 6 2 6 6 1 2 6 1 6 6 1 6 2 6 6 6 6 6 6 6 2 6 6 6 2 6 6 1 6 6 6 6 6 6 6 3 3 6 3 2 1 2 2 1 6 6 1 6 1 6 6 6 6 6 6 1 6 6 6 1 6 6 6 6 6 6 6 6 6 6 6 2 6 6 6 6 6 6 6 6 2 2 6 6 2 6 1 2 6 6 6 2 6 6 2 6 6 2 6 1 6 2 6 2 1 2 6 6 2 2 6 2 6 2 2 6 2 6 6 6 2 2 2 6 6 2 6 6 2 2 6 1 2 1 2 6 6 2 2 6 6 1 2 2 1 6 2 6 2 2 1 1 5 6 3 6 1 6 6 1 2 2 6 1 6 2 6 6 1 6 2 6 2 6 6 6 1 6 1 6 6 2 2 2 1 2 3 6 1 6 1 6 1 6 1 6 6 6 1 1 6 6 6 6 6 1 6 6 6 1 6 1 1 6 6 6 6 6 6 6 6 1 6 6 1 6
6 2 2 2 2 3 3 4 4 4 5 4 3 3 6 2 6 6 6 3 4 4 3 3 3 3 3 2 6 6 3 4 4 4 4 3 4 2 6 2 2 6 2 2 6 6 3 4 5 4 4 6 3 6 6 6 2 6 2 6 6 2 2 6 4 4 5 4 3 4 3 4 4 6 2 6 6 2 2 6 2 6 6 2 6 6 2 6 6 2 6 2 6 3 5 5 5 4 4 4 3 6 2 6 6 2 6 2 6 2 2 6 2 6 6 2 6 4 4 4 4 4 4 6 3 6 6 2 6 2 6 2 6 2 6 6 2 2 2 2 2 2 2 2 2 3 3 3 5 5 4 5 3 3 3 6 2 6 6 2 2 6 2 2 2 2 6 2 3 2 2 3 6 3 2 2 3 4 4 4 4 5 5 4 4 6 6 2 6 2 6 2 2 2 2 2 2 2 5 5 4 4 5 5 2 6 2 6 6 2 6 2 6 2 2 3 3 4 4 5 4 4 4 3 4 3 6 2 6 2 2 2 2 2 2 2 2 2 2 2 3 4 4 4 4 5 4 4 4 3 2 2 2 6 2 2 2 6 2 6 2 6 2 2 2 2 2 3 2
6 2 2 2 2 3 3 4 4 4 5 4 3 3 6 2 6 6 2 3 4 4 3 4 4 3 3 2 2 6 3 4 4 4 4 3 4 2 3 2 2 6 3 3 6 6 3 4 5 4 5 3 3 2 6 6 2 6 2 6 6 2 2 6 4 4 4 4 4 4 5 4 4 6 2 6 6 2 2 6 2 6 6 2 6 6 2 6 6 2 6 2 6 3 4 4 4 4 4 4 4 6 2 6 6 2 6 2 6 6 6 6 2 6 2 2 6 4 4 4 4 4 4 6 3 3 6 2 2 2 6 2 6 2 2 2 2 2 2 2 2 2 2 2 2 3 6 4 5 5 5 5 2 4 6 6 2 6 6 2 2 6 2 2 2 2 6 2 3 2 2 3 6 3 2 2 3 4 4 4 4 5 5 4 3 3 6 2 6 2 2 2 6 3 2 2 2 2 5 5 4 4 4 4 3 6 2 6 6 2 6 2 6 2 2 3 3 4 4 5 4 4 4 4 4 3 6 2 6 2 2 2 6 2 2 2 2 2 2 2 3 4 4 4 4 5 4 4 4 3 2 2 2 6 6 6 2 6 2 6 2 6 2 2 2 2 2 2 2 
```

每行是一个单独的产品，列是对这些产品的及时需求。我用了这段代码

```
from pybrain.tools.shortcuts import buildNetwork
from pybrain.supervised.trainers import BackpropTrainer
from pybrain.datasets import SequentialDataSet
from pybrain.structure import SigmoidLayer
from pybrain.structure import LSTMLayer

import itertools
import numpy as np

data = np.loadtxt("sales").T
print data

datain = data[:-1,:] 
dataout = data[1:,:] 

INPUTS = 5
OUTPUTS = 5
HIDDEN = 40

net = buildNetwork(INPUTS, HIDDEN, OUTPUTS, hiddenclass=LSTMLayer, outclass=SigmoidLayer, recurrent=True) 

ds = SequentialDataSet(INPUTS, OUTPUTS)

for x,y in itertools.izip(datain,dataout):
    ds.newSequence()
    ds.appendLinked(tuple(x), tuple(y))

net.randomize()

trainer = BackpropTrainer(net, ds)

for _ in range(1000):
    print trainer.train() 
```

错误徘徊在 245.xx 附近，小数点后的数字有所改善，但错误的整数部分并没有降低。看起来该方法有效吗？我只是想咨询 PyBrain / NN 专家，看看我没有做错什么。

**更正**：显然在从 PDF 文件复制时，数据已损坏。上面分享了正确的数据。我再说一遍，数据很糟糕。有了正确的数据，NN 代码（也共享）将从错误率 5.9807501187 开始，逐渐下降。对于我可能造成的混乱，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:05:25.993

尝试在每次迭代中绘制训练误差。如果方法有效，那么它应该在每个步骤中进行。您是否也尝试过添加偏见？

```
buildNetwork(INPUTS, HIDDEN, OUTPUTS, hiddenclass=LSTMLayer, outclass=SigmoidLayer, recurrent=True, bias=True) 
```

你从哪里得到错误？是教练报的吗？那么这是训练集上的错误，并且您会遭受高偏差。可以帮助的事情：

1.  运行更多的迭代。
2.  添加更多内部层或节点。
3.  将正则化设置为较低的值，但我找不到在 pybrain 中指定正则化的方法。

# java - "(?i)" 不适用于重音符号

> ID：12689295
> 
> 赞同：12
> 
> 时间：2012-10-02T11:17:32.363
> 
> 标签：java, regex, non-ascii-characters, ignore-case

我有一个 Java 方法，它在忽略单词的大小写敏感性的情况下在短语中查找单词，如果找到该单词，则将其从短语中删除。单词和短语可以是任何东西。它们是变体。这是我的代码：

```
private String removeWord( String phrase, String word ) {
    phrase = phrase.replaceAll( "(?i)" + word , "" );
    return phrase;
} 
```

一切都很完美，除非这个词有口音。例如，如果单词是“ **álvarez** ”，而短语是“ **Álvarez phrase** ”，那么它不会起作用，因为“(?i)”在这种情况下不起作用。

**有没有办法让“（？i）”与重音字符一起工作？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-02T11:24:41.893

只需将 (?i) 替换为 (?iu) - 它会打开 unicode 不区分大小写的匹配

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T11:21:34.750

默认情况下`(?i)`仅适用于 ASCII 字符 - 有关详细信息，请参阅[Pattern.CASE_INSENSITIVE](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE)。您可以将该标志与 UNICODE_CASE 组合在一起，如下所示：

```
phrase = Pattern.compile(word, UNICODE_CASE | CASE_INSENSITIVE).matcher(phrase).replaceAll(""); 
```

# actionscript-3 - 在 ActionScript 3 中获取服务器安全时间戳

> ID：12689298
> 
> 赞同：2
> 
> 时间：2012-10-02T11:17:36.233
> 
> 标签：actionscript-3, date, timestamp

我想在 actionscript 3 中获取当前的日期/时间，并且我想避免 Date 类，因为用户可以轻松地操纵系统时间。

我可以访问服务器并获取时间戳吗？

有没有比这种方法更好的替代方法（简单的 URL 请求）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:43:50.583

您可以在 ActionScript 中执行的任何操作都可以由用户操作，因为它运行在自己的计算机上，而您对此无能为力。

也就是说，您可以从您拥有的服务器获取当前时间戳（出于跨域原因）。只需在 PHP 中输​​出一个 time()（例如）并通过 URLLoader 获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:44:59.213

您可以这样做：

闪光面：

```
var loader:URLLoader = new URLLoader()
loader.load(new URLRequest("yourserverpage.php"))
loader.addEventListener(Event.COMPLETE, onLoaded)
function onLoaded(evt:Event){
    var date:Date;
    try{
        date = new Date(Number(loader.data));
    }catch(e:Error){
    }

    if(!date){
        //flash couldn't convert the date properly, there was an error
    }
} 
```

而php方面：

```
<?php 
    header("Content-Type: text/plain");
    print time() * 1000;
?> 
```

# jquery - 如何从出生日期获取年月日

> ID：12689299
> 
> 赞同：0
> 
> 时间：2012-10-02T11:17:37.513
> 
> 标签：jquery, jquery-ui, jquery-selectors, timepicker

我正在使用日期选择器来选择出生日期。我有三个输入框。输入`31/08/1991` 生日后自动计算年份月份和日期`21 year` `1 months` `2 Days`。

```
$(function() {
        $("#dob").datepicker({
            changeMonth : true,
            changeYear : true,
            defaultDate: '-30yr',
            yearRange: 'c-25:c+35',

            onSelect: function(selectedDate) {
                var a = $("#dob").datepicker( "getDate" );

            var today = new Date();
                var age = Math.floor((today-a) / ( 24 * 60 * 60 * 1000 ));
                var year = Math.round(age/365);
                var month = Math.round(age/30);

                $('#ages').val(year); 

            } 
        });
        $("#dob").datepicker("option", "dateFormat", 'dd-mm-yy');

        $("input:submit, a, button", ".registerSubmit").button();

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:25:04.230

您可以使用 onselect 事件来获取日期。

在您的情况下， $(#date2) 代表下一个生日

```
$('#date1').datepicker({
   onSelect: function(dateText, inst) { 
       var d1=new Date(dateText);
       // get date from other text field
       var d2=new Date($('#date2').val());
       // d2 -d1 gives result in milliseconds
       // calculate number of days by Math.abs((d2-d1)/86400000, as 24*3600*1000 = 86400000
       // and populate it to some text field #textfield
       $('#textfield').val((Math.abs((d2-d1)/86400000)));
   }
}); 
```

相关主题（来自 Joakim Johansson 的想法）：[jQuery UI Datepicker 的天数差异](https://stackoverflow.com/questions/5142693/jquery-ui-datepicker-difference-in-days)

# python - 使用 PyYAML 选择性地转储对象属性

> ID：12689300
> 
> 赞同：2
> 
> 时间：2012-10-02T11:17:40.960
> 
> 标签：python, serialization, yaml, pyyaml

我可以使用 YAML 转储 python 对象的层次结构，所以：

```
import yaml

class C():
    def __init__(self, x, y):
        self.x = x
        self.y = y

class D():
    def __init__(self, c, d):
        self.c = c
        self.d = d

d = D(c=C(x=1, y='hi'),
      d='bye')

print yaml.dump(d) 
```

产生输出：

```
!!python/object:__main__.D
c: !!python/object:__main__.C {x: 1, y: hi}
d: bye 
```

但我想有选择地隐藏一些属性。所以假设我有一个函数`attribs_to_dump(obj)`，它为任何对象返回我想要转储的属性名称列表，例如：

```
def attribs_to_dump(obj):
    if obj.__class__ == C: return ['x']
    if obj.__class__ == D: return ['c'] 
```

`attribs_to_dump`我的问题是，我如何连接`yaml.dump`才能获得以下输出？

```
!!python/object:__main__.D
c: !!python/object:__main__.C {x: 1} 
```

有一个复杂的因素：我想通过挂钩到 Yaml 来实现效果，因为它在对象层次结构上爬行，而不是自己预处理对象层次结构。`setattr/getattr/__dict__`原因是由于我正在使用的某些库中存在的魔法，并非层次结构中的所有对象都易于自省:-(...

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:55:44.320

这是一个有趣的问题，我喜欢解决它，谢谢 :)

```
from copy import deepcopy

class C(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

class D(object):
    def __init__(self, c, d):
        self.c = c
        self.d = d

d = D(
    c=C(x=1, y='hi'),
    d='bye'
)

FILTER_PARAMS = (
    #(class_reference, process_recursively, ['attributes', 'on', 'whitelist'])
    (D, True, ['c']),
    (C, False, ['x']),
)

def attr_filter(obj, filter_params):
    for attr in dir(obj):
        if attr.startswith('__'):
            # ignore builtins
            continue

        attr_val = obj.__getattribute__(attr)
        # loop through filter params
        for (cls, do_recursive, whitelist) in filter_params:
            if isinstance(obj, cls) and attr in whitelist:
                # filter class matches the current obj's class and
                # current attribute is on the whitelist
                if do_recursive:
                    # must process this attribute the same way as the parent
                    setattr(obj, attr, attr_filter(attr_val, filter_params))                
                # break will avoid the execution of the else clause meaning
                # the attribute was on the white list so don't delete it
                break
        else:
            # delete the current attribute of the instance as it was
            # not on the whitelist
            delattr(obj, attr)

    return obj

# do a deepcopy of the object you pass in, so the original will be preserved
filtered_instance = attr_filter(deepcopy(d), FILTER_PARAMS)
print dir(filtered_instance)
print dir(filtered_instance.c)

# now pass filtered_instance to yaml's dump function 
```

# python - ctypes 错误：libdc1394 错误：无法初始化 libdc1394

> ID：12689304
> 
> 赞同：69
> 
> 时间：2012-10-02T11:17:59.967
> 
> 标签：python, c++, shared-libraries, ctypes, libdc1394

我正在尝试将我的程序编译为一个共享库，我可以使用 ctypes 在 Python 代码中使用该共享库。

该库使用以下命令编译得很好：

```
g++ -shared -Wl,-soname,mylib -O3 -o mylib.so -fPIC [files] `pkg-config --libs --cflags opencv` 
```

但是，当我尝试使用 ctypes 导入它时

```
from ctypes import *
mylib = CDLL("/path/to/mylib.so")
print mylib.test() // Expected output: Hello World 
```

我收到以下错误：

```
libdc1394 error: Failed to initialize libdc1394 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2014-09-25T00:24:59.503

非常令人沮丧的是，没有人真正提出具体的解决方案。安装 OpenCV 后我遇到了这个问题。对我来说，删除此警告的最简单解决方案实际上是禁用此驱动程序：

```
sudo ln /dev/null /dev/raw1394 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-02T11:23:53.900

`libdc1394`是一个用于控制相机硬件的库。我想它来自你链接的opencv。也许内核驱动程序没有加载？我想它失败的原因有很多。

也许一些 OpenCV 专家可以更好地回答。但我敢打赌，问题出在 OpenCV lib 方面。

对相同错误消息的一些初始搜索产生了具有相同原因的结果 [ [1](http://www.linuxforums.org/forum/ubuntu-linux/171972-libdc1394-error.html) , [2](http://www.ngohaibac.com/how-to-fix-libdc1394-error-failed-to-initialize-libdc1394/) ]。因此，如果您在文件系统上找不到`/dev/raw1394`，请尝试这些。

### 更新：

**这似乎只是一个警告。**模块 raw1394 似乎已被弃用，一些 libdc1394 版本可能正在寻找它，而它随着更新而消失。搜索它会给出许多结果和错误报告。但似乎该软件应该运行良好。所以如果你真的不需要它，你可以忽略它。[ [3、4](http://tech.dir.groups.yahoo.com/group/OpenCV/message/69115) ] _ [_](http://spottedsun.com/libdc1394-error-failed-to-initialize-libdc1394/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-02T06:47:17.563

好的。我花了一整天的时间。

基本上，和之间的联系`/dev/raw1394`不是`/dev/null`永久的。你可以 bash 进入你的虚拟机， call `ln /dev/null /dev/raw1394`，但它只会持续到你重新启动你的容器。

我必须做的，这似乎是最简单但不是完美的方法，就是在容器启动期间放置链接。

我认为将其作为服务运行，但对于一项简单的工作来说似乎太多了。

我最终开始工作的方式（它不漂亮，但有效）是通过更改`CMD`Dockerfile 的：

`CMD sh -c 'ln -s /dev/null /dev/raw1394'; <your-script-here>`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-17T20:38:31.533

我在 VirtualBox 下运行 Ubuntu 时遇到了类似的问题。首先，我按照以下说明安装了 OpenCV：[https](https://help.ubuntu.com/community/OpenCV) : //help.ubuntu.com/community/OpenCV 这解决了我尝试其他方法的几个问题，但 libdc1394 的问题仍然存在。

```
libdc1394 error: Failed to initialize libdc1394 
```

我终于看到[goran](https://stackoverflow.com/users/2072641/goran)对上[一个答案的评论](https://stackoverflow.com/a/12689392)

所以我在virtualbox中启用了USB控制器......等等！一切正常！

谢谢戈兰！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-17T01:19:21.657

对于自己编译 opencv 并遇到此错误，并且不需要火线视频捕获支持的人，您可以随时使用 `-D WITH_1394=OFF`选项重新编译，如下所示：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE -D WITH_1394=OFF ./ 
```

如果您关闭此选项，您甚至可以失去 libdc1394-22-dev 依赖项 (ubuntu)。虽然我没有亲自测试过。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-14T06:50:16.470

使用 docker 映像的另一个解决方法是挂载卷

`docker run -v /dev/null:/dev/raw1394`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-05T13:34:04.417

我有同样的问题。通过先运行tsu然后运行debian来解决。

问题：

```
./start-debian.sh
root@localhost:~# python3 -c "import cv2; print(cv2.__version__)"
libdc1394 error: Failed to create juju: opendir: Permission denied
libdc1394 error: Failed to initialize libdc1394
3.2.0
root@localhost:~#

tsu
./start-debian.sh
root@localhost:~# python3 -c "import cv2; print(cv2.__version__)"
3.2.0
root@localhost:~# 
```

# django - 在移动设备中使用 Tastypie 的安全性最佳实践

> ID：12689311
> 
> 赞同：0
> 
> 时间：2012-10-02T11:18:31.350
> 
> 标签：django, security, api, tastypie

哪个是使用 Django / Python Tastypie 为移动设备构建和 API 的最佳方式？

我想做的是：

*   人们连接到一些 api.domain.com/dosomething/
*   我希望人们可以在没有 cookie 的情况下识别自己。
*   我想要或多或少安全的东西（恐怕人们可以查看代码以找到一些 API_SECRET ）

美味派是个不错的选择吗？任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:47:51.773

Tastypie 内置了[api 密钥认证](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#apikeyauthentication)，您可以在用户登录时将用户名和密码对交换为密钥并保存在设备上。如果他们愿意，您甚至可以允许用户撤销密钥。

# python - Python：两个对象相同

> ID：12689312
> 
> 赞同：2
> 
> 时间：2012-10-02T11:18:35.750
> 
> 标签：python, list

> **可能重复：**
> [对象和基本类型的分配](https://stackoverflow.com/questions/8463907/assignment-of-objects-and-fundamental-types)

```
a = [1,2,3]
b = a
print b is a 
```

此代码打印 True。为什么？"is" 仅在两个变量指向同一个对象时才返回 True，在这种情况下，它们是具有相同值的不同对象。"==" 将返回 True，但 "is" 不应该。

然而，由于

```
b.reverse()
print a,b 
```

prints [3, 2, 1] [3, 2, 1]，似乎就解释器而言，它们是同一个对象，对b的操作将自动在a上执行。再说一遍，为什么？我以前从未见过这样的事情发生。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T11:24:14.867

```
a = [81, 82, 83]
b = a
print(a is b) #prints True 
```

这就是这里实际发生的事情：

![在此处输入图像描述](../Images/b276fa8094d10dbd16c63c370341b18d.png)

对于类似的东西：

```
a = [81,82,83]
b = [81,82,83]

print(a is b) # False

print(a == b)  #True, as == only checks value equality 
```

![在此处输入图像描述](../Images/01c9714c6ee222b313d143fa471935da.png)

```
In [24]: import sys

In [25]: a=[1,2,3]

In [26]: sys.getrefcount(a) #number of references to [1,2,3] are 2
Out[26]: 2

In [27]: b=a       #now b also points to [1,2,3]

In [28]: sys.getrefcount(a)   # reference to [1,2,3] got increased by 1,
                              # as b now also points to [1,2,3]
Out[28]: 3

In [29]: id(a)
Out[29]: 158656524      #both have the same id(), that's why "b is a" is True

In [30]: id(b)
Out[30]: 158656524 
```

何时使用该[`copy`](http://docs.python.org/library/copy.html)模块：

```
In [1]: a=[1,2,3]

In [2]: b=a

In [3]: id(a),id(b)        
Out[3]: (143186380, 143186380)   #both point to the same object

In [4]: b=a[:]                #now use slicing, it is equivalent to b=copy.copy(a)
                              # or b= list(a)    

In [5]: id(a),id(b)
Out[5]: (143186380, 143185260)     #as expected both now point to different objects
                                   # so now changing one will not affect other

In [6]: a=[[1,2],[3,4]]          #list of lists

In [7]: b=a[:]                   #use slicing

In [8]: id(a),id(b)            #now both point to different object as expected
                               # But what about the internal lists?
Out[8]: (143184492, 143186380)

In [11]: [(id(x),id(y)) for (x,y) in zip(a,b)]   #so internal list are still same objects
                                                 #so doing a[0][3]=5, will changes b[0] too
Out[11]: [(143185036, 143185036), (143167244, 143167244)]

In [12]: from copy import deepcopy            #to fix that use deepcopy

In [13]: b=deepcopy(a)

In [14]: [(id(x),id(y)) for (x,y) in zip(a,b)]    #now internal lists are different too
Out[14]: [(143185036, 143167052), (143167244, 143166924)] 
```

更多细节：

```
In [32]: def func():
   ....:     a=[1,2,3]
   ....:     b=a
   ....:     
   ....:     

In [34]: import dis

In [35]: dis.dis(func)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 BUILD_LIST               3
             12 STORE_FAST               0 (a)   #now 'a' poits to [1,2,3]

  3          15 LOAD_FAST                0 (a)    #load the object referenced by a
             18 STORE_FAST               1 (b)    #store the object returned by a to b 
             21 LOAD_CONST               0 (None)
             24 RETURN_VALUE        

In [36]: def func1():
   ....:     a=[1,2,3]
   ....:     b=[1,2,3]
   ....:     
   ....:     

In [37]: dis.dis(func1)      #here both a and b are loaded separately
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 BUILD_LIST               3
             12 STORE_FAST               0 (a)

  3          15 LOAD_CONST               1 (1)
             18 LOAD_CONST               2 (2)
             21 LOAD_CONST               3 (3)
             24 BUILD_LIST               3
             27 STORE_FAST               1 (b)
             30 LOAD_CONST               0 (None)
             33 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T11:34:52.220

当您这样做时，`a = [1, 2, 3]`您将名称绑定`a`到列表对象。当您这样做时`b = a`，您将名称绑定`b`到任何`a`内容 - 在本例中为列表对象。因此，它们是相同的...一个对象可以有多个名称。值得一读[Python 数据模型](http://docs.python.org/reference/datamodel.html)。

如果您想制作 listobj 的副本，那么您可以考虑`b = a[:]`使用 slice 来创建浅拷贝，或者`copy.copy`用于浅拷贝（应该适用于任意对象），或者`copy.deepcopy`奇怪的是 - 深拷贝。

您还会注意到 CPython 中有一些令人惊讶的东西，它缓存了短字符串/小整数......

```
>>> a = 4534534
>>> b = a
>>> a is b
True
>>> b = 4534534
>>> a is b
False
>>> a = 1
>>> b = a
>>> a is b
True
>>> b = 1
>>> a is b
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:21:55.487

它们实际上引用的是同一个对象。

试试这个：

```
a = [1,2,3]
b = a
print b is a
b[0] = 0
print b is a 
```

您将看到 a 和 b 都已更改并且彼此仍然相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T11:30:03.903

我不确定列表是否同样有效，但可以从关于浅拷贝和深拷贝的 numpy.array() 教程中查看：[http ://www.scipy.org/Tentative_NumPy_Tutorial#head-1529ae93dd5d431ffe3a1001a4ab1a394e70a5f2](http://www.scipy.org/Tentative_NumPy_Tutorial#head-1529ae93dd5d431ffe3a1001a4ab1a394e70a5f2)

`a = b`只需创建对同一对象的新引用。要获得真正的副本，您可能会发现列表对象具有类似于链接中的深层复制示例的内容`b = a.copy()`。然后你可以说有 2 个对具有相同值的两个单独对象的引用。

此外，我认为大多数 OO 语言都是这样工作的，因为它`=`只是创建一个新的引用而不是一个新的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T12:17:34.843

> 此代码打印 True。为什么？

因为`b is a`.

> "is" 仅在两个变量指向同一个对象时才返回 True

如果他们命名相同的对象。“指向”是一种粗俗的术语，暗示了一种低得多的编程模型。

> 在这种情况下，它们是具有相同值的不同对象。

不，他们不是。

在 Python 中，`b = a`意味着“`b`将不再是它当前名称的名称，如果有的话，并成为`a`当前名称的名称”。同一个对象。不是副本。

事情不会在 Python 中被隐式复制。

> 打印 [3, 2, 1] [3, 2, 1]，似乎就解释器而言，它们是同一个对象

因为他们是。

> b 上的操作会自动在 a 上执行。

因为它们是同一个对象。

> 再说一遍，为什么？

再次，因为他们是。

...就好像你想到了每一个明显的测试来确认行为，但是一旦每一个测试都与你的核心假设相矛盾，就拒绝拒绝你的核心假设，即使文献中没有任何东西支持你的核心假设（因为事实上它是错误的） .

> 我以前从未见过这样的事情发生。

那么你一定从来没有在 Python 中测试过这样的东西，因为它在 Python 中一直都是这样工作的。在编程语言中甚至没有那么奇怪。Java 对所有非原始类型的东西都做同样的事情，而 C# 对类（引用类型）做同样的事情，同时对结构（值类型）做你显然期望的事情。它被称为“引用语义”，这绝不是一个新想法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T11:22:19.600

```
a = [1,2,3]
b = a
print b is a 
```

您正在比较相同的引用`list`。如果您执行以下操作：

```
a = [1,2,3]
b = [1,2,3]
print b is a 
```

你应该得到一个错误。

# python - 用python和附魔进行拼写检查

> ID：12689322
> 
> 赞同：0
> 
> 时间：2012-10-02T11:19:39.430
> 
> 标签：python, python-2.7, pyenchant

我想在我的`PyQt4`项目中有一个拼写检查功能，而且看起来[pyenchant](http://packages.python.org/pyenchant/)是一个不错的选择。这是工作级长。但我想制作自己的单词词典并用它们来提供模块。有可能吗？

在那之后，我怎样才能轻松地在其他想要使用我的原始程序的计算机上使用这个新字典？我不想让用户安装一些奇怪的程序和字典来使用我的简单程序。

PS：我在Linux系统上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:04:08.087

您可以使用[个人单词列表](http://packages.python.org/pyenchant/tutorial.html#personal-word-lists)功能。`pwl`通过对象添加单词：

```
>>> pwl = enchant.request_pwl_dict("mywords.txt") 
```

使用单词列表：

```
>>> d2 = enchant.DictWithPWL("en_US", "mywords.txt")
>>> d2.check("Hello")
True 
```

要安装“mywords.txt”，请使用`package_data`. 请参阅[使用 setup.py 包含非 Python 文件](https://stackoverflow.com/q/1612733/4279)

# regex - Reg Ex 以匹配主机名 - 不同的长度

> ID：12689323
> 
> 赞同：0
> 
> 时间：2012-10-02T11:19:42.427
> 
> 标签：regex

我正在寻找一个正则表达式来给出`hostname`from a `FQDN`。

例如，我只想要`host`来自“”的“ `host.company.com`”。

到目前为止，我已经想出了这个：

```
^(.{4}).* 
```

但是，由于存储在 CMDB 中的某些设备没有完整的 FQDN，因此它也可以捕获没有点的设备。

我现在正在努力解决的问题是主机名的长度不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:23:19.770

因此，由于我们试图在第一阶段之前获得所有内容：

```
^(.*?)\. 
```

问号表示尽可能少地匹配，我们将 . 让它代表一个实际的点。

与 host.company.com 匹配时返回“主机”。

为了说明可能没有句点，我们使用`|`修饰符。

```
^(.*?)(\.|$) 
```

其中 $ 将匹配行尾。

但是，如果您不确定是否需要句点，我会说不要使用正则表达式，而是在字符串上使用查找函数或算法，这将更加实用和健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:24:27.947

```
^([^.]+)(\.|$| ) 
```

应该捕获它（我正在以这种方式使用它，因为它提供了大多数实现支持的非贪婪正则表达式）。

# backup - 备份还原后，Cassandra db 看不到新的列族

> ID：12689324
> 
> 赞同：0
> 
> 时间：2012-10-02T11:19:50.430
> 
> 标签：backup, cassandra, restore

我需要将数据从一个 KS 复制到另一个 KS。键空间有不同的名称。我已经制作了一个键空间的快照，并按照 datastax 中的说明执行所有操作：http://www.datastax.com/docs/1.1/operations/backup_restore 启动 cassandra 后，请查看旧列族，但看不到新列族另一个KS。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:28:48.150

听起来您从未在新键空间中创建列族。

# android - android inapp 以当地货币购买产品价格

> ID：12689329
> 
> 赞同：5
> 
> 时间：2012-10-02T11:20:11.287
> 
> 标签：android, in-app-purchase, google-play

是否可以从应用程序本身获取本地货币的产品价格。例如，如果我通过 Google Play In App billing 以 1 美元的价格销售 Product1。来自英国的客户单击按钮购买产品，Google Play 上的价格以英镑显示。我可以从 Google Play 获取应用程序中的本地化价格，以便以自己的货币显示给客户吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:20:42.010

应用内计费 v3 声称能够做到这一点：

> 该 API 还引入了一项期待已久的功能：直接从 Google Play 查询应用内产品信息的能力。开发人员现在可以通过编程方式获取商品的标题、描述和价格。无需货币转换或格式化：价格以用户的货币报告并根据其区域设置格式化

来源：[http ://android-developers.blogspot.com/2012/12/in-app-billing-version-3.html](http://android-developers.blogspot.com/2012/12/in-app-billing-version-3.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T11:44:48.450

既然你问这个，我建议就这样离开。

这更多是关于经济而不是编程，问题是两种货币之间的比率每次都在不断变化，由于市场原因无法计算，实际评估仅由股票市场针对特定点给出及时。

对此有两种思考方式：

*   商家对两种货币之间的平均比率进行评估，他将这个价值量化为真实货币并将其添加到最终价格中，这样他就可以避免金钱损失或至少有很大一部分损失
*   商家建立了一种价格机制，根据来自股票市场的实时信息（可能你必须为此付费），实时或每次用户想要结账时计算真实商品的价格。

如果这对您来说是新事物，请不要对此一言不发，每个证券交易所市场每天都会有大量资金在燃烧并神奇地出现，如果您向您的客户提出不好的建议，他可能会非常失望并输掉很多钱。

此外，不同的货币通常由信用卡服务直接处理，没有理由自己处理，你只能冒险超过它的价值。

如果您的用户想知道他们的货币价格，请教他们使用 Google 或一些可靠的在线货币转换器。

# .net - 性能 DbContext Linq 查询与 ObjectContext Linq 查询

> ID：12689334
> 
> 赞同：0
> 
> 时间：2012-10-02T11:20:21.477
> 
> 标签：.net, entity-framework

我刚刚查看了 Entity Framework 5 的性能注意事项：http: [//msdn.microsoft.com/en-us/data/hh949853.aspx](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

在 6.7 中，图表显示 ObjectContext Linq Query 的性能优于 DbContext Linq Query。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:48:34.053

我的理解是 DBContext 在内部使用 ObjectContext （即 dbcontext 是一个包装器），因此不会更快。

您可能会发现 DBContext 将开箱即用地处理 ObjectContext 比您每天使用它时要多一点。例如，EF5 对已编译的查询进行了一些额外的工作，以实现更好的性能。这意味着您未优化的应用程序可以使用 DBContext 更快地执行（但这显然高度依赖于您在做什么）。DBContext 还为您的应用程序增加了很多简单性，因为它的接口远没有 OC 复杂。

# magento - 管理和前端中的 Magento 通知消息问题

> ID：12689335
> 
> 赞同：0
> 
> 时间：2012-10-02T11:20:37.607
> 
> 标签：magento

我在下面的路径中为 meagento 通知消息定制了新样式`/app/code/core/Mage/Core/Block/Messages.php`

下面的代码是我定制的

```
public function getGroupedHtml()
    { 

        $types = array(
            Mage_Core_Model_Message::ERROR,
            Mage_Core_Model_Message::WARNING,
            Mage_Core_Model_Message::NOTICE,
            Mage_Core_Model_Message::SUCCESS
        );
       $html = '';
        foreach ($types as $type) {
            if ( $messages = $this->getMessages($type) ) 
            {               

                foreach ( $messages as $message ) 
                {
                    $html.= '<div class="ml-alert-2-'.$type.'">';
                    $html.= '<div class="style-2-icon '.$type.'"></div>';
                    $html.= ($this->_escapeMessageFlag) ? $this->htmlEscape($message->getText()) : $message->getText();
                    $html.= '<div class="style-2-close '.$type.'" onclick="this.parentNode.parentNode.removeChild(this.parentNode);"></div>';
                    $html.= '</div>';
                }

            }
        }

        return $html;
    } 
```

我已经替换了上述功能中的默认 Magento 主题，通知主题在前端工作正常，但未应用管理面板通知主题..

那么如何在上面的函数中找到像（管理员消息，前端消息）这样的消息类型？

请建议我？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:03:58.427

前端和后端消息由不同的块类处理。您正在编辑的代码仅用于 Magento 的前端。如果您希望自定义后端消息，您将需要编辑/重载不同的类，即`Mage_Adminhtml_Block_Messages`（位于 中`/app/code/core/Mage/Adminhtml/Block/Messages.php`）。

# javascript - 如何在 javascript 中获得 1.450 = 1.5？（四舍五入到小数点后一位）

> ID：12689338
> 
> 赞同：2
> 
> 时间：2012-10-02T11:20:44.343
> 
> 标签：javascript

> **可能重复：**
> [如何在 Javascript 中舍入到小数点后 1 位？](https://stackoverflow.com/questions/7342957/how-do-you-round-to-1-decimal-place-in-javascript)

我的值是 1.450，我必须将其四舍五入到小数点后 1 位。

我想要 Javascript 中的 1.450 = 1.5 任何人都可以解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T11:22:52.017

你需要这个：

```
var mynum = 1.450,
  rounded = Math.round(mynum * 10) / 10; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T11:24:28.787

假设你有

```
var original=28.453; 
```

然后

```
var result=Math.round(original*10)/10  //returns 28.5 
```

来自[http://www.javascriptkit.com/javatutors/round.shtml](http://www.javascriptkit.com/javatutors/round.shtml)

您还可以查看[如何在 Javascript 中四舍五入到小数点后 1 位？](https://stackoverflow.com/questions/7342957/how-do-you-round-to-1-decimal-place-in-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T11:27:21.017

鉴于您的[fiddle](http://jsfiddle.net/AEtAC/12/)，最简单的更改是：

```
result = sub.toFixed(1) + "M"; 
```

到：

```
result = Math.ceil(sub.toFixed(1)) + "M"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T11:57:53.410

如果你使用，`Math.round`那么你会得到`1`for `1.01`，而不是`1.0`。

如果你使用`toFixed`你会遇到[四舍五入的](https://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci) [问题](https://stackoverflow.com/questions/10015027/javascript-tofixed-not-rounding)。

如果您想要两全其美，请将两者结合起来：

```
(Math.round(1.01 * 10) / 10).toFixed(1) 
```

您可能想为此创建一个函数：

```
function roundedToFixed(_float, _digits){
  var rounder = Math.pow(10, _digits);
  return (Math.round(_float * rounder) / rounder).toFixed(_digits);
} 
```

# xml - 将 XML 文档中的数据解析为 Excel 工作表

> ID：12689352
> 
> 赞同：1
> 
> 时间：2012-10-02T11:21:43.473
> 
> 标签：xml, vba, excel

```
<?xml version="1.0" encoding="UTF-8"?>
<xa:MeContext id="ABCe0552553">
  <xa:Data id="ABCe05525531" />
  <xa:Data id="1" />
  <CustID>Cust1234</CustID>
  <Name>Smith</Name>
  <City>New York</City>
  <Orders>
    <order Orderid="101">
      <Product>MP3 Player</Product>
    </order>
    <order Orderid="102">
      <Product>Radio</Product>
    </order>
  </Orders>
</xa:MeContext> 
```

这个格式良好的 XML 文档使用 MS VBA 代码提供给 Excel 2007。我成功地使用`DOMDocument`并`IXMLDOMElement`导入了名称、城市和产品。
但是，`xa:MeContext id`、`vsData1 id`、`VsData2 id`、`CustID`和`order Orderid`数字不会导出到 Excel 工作表。

每个 Excel 行都有以下标题，其中包含从 XML 文档填充的数据：

```
MeContextID--vsData1--VsData2--CustID--Name--City--OrderID--Product--OrderID--Product 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:28:29.440

以下是输出所需字段的两种方法。请注意，您发布的 XML 不包含命名空间“xa:”的标头定义，因此不是完全形成的 XML。我在示例中删除了它们，因此 MSXML2.DOMDocument 不会引发解析错误。

```
Option Explicit
Sub XMLMethod()
Dim XMLString As String
Dim XMLDoc As Object
Dim boolValue As Boolean
Dim xmlDocEl As Object
Dim xMeContext As Object
Dim xChild As Object
Dim xorder As Object

    XMLString = Sheet1.Range("A1").Value

    'Remove xa: in this example
    'reason : "Reference to undeclared namespace prefix: 'xa'."
    'Shouldn't need to do this if full XML is well formed containing correct namespace
    XMLString = Replace(XMLString, "xa:", vbNullString)

    Set XMLDoc = CreateObject("MSXML2.DOMDocument")
    'XMLDoc.setProperty "SelectionNamespaces", "xa:"

        'XMLDoc.Load = "C:\Users\ooo\Desktop\test.xml" 'load from file
    boolValue = XMLDoc.LoadXML(XMLString)  'load from string

    Set xmlDocEl = XMLDoc.DocumentElement
    Set xMeContext = xmlDocEl.SelectSingleNode("//MeContext")
        Debug.Print Split(xMeContext.XML, """")(1)
    For Each xChild In xmlDocEl.ChildNodes

        If xChild.NodeName = "Orders" Then
            For Each xorder In xChild.ChildNodes
                Debug.Print Split(xorder.XML, """")(1)
                Debug.Print xorder.Text
            Next xorder

        ElseIf xChild.Text = "" Then
            Debug.Print Split(xChild.XML, """")(1)
        Else
            Debug.Print xChild.Text
        End If

    Next xChild

    'Output:
    'ABCe0552553
    'ABCe05525531
    '1
    'Cust1234
    'Smith
    'New York
    '101
    'MP3 Player
    '102
    'Radio

End Sub 
```

以下使用正则表达式，这仅在每次将 XML 都固定为您的示例时才真正有用。除非您希望速度超过可靠性，否则通常不建议将它用于解析 XML。

```
Option Explicit

Sub RegexMethod()
Dim XMLString As String
Dim oRegex As Object
Dim regexArr As Object
Dim rItem As Object

    'Assumes Sheet1.Range("A1").Value holds example XMLString
    XMLString = Sheet1.Range("A1").Value

    Set oRegex = CreateObject("vbscript.regexp")
    With oRegex
        .Global = True
        .Pattern = "(id=""|>)(.+?)(""|</)"
        Set regexArr = .Execute(XMLString)

        'No lookbehind so replace unwanted chars
        .Pattern = "(id=""|>|""|</)"
        For Each rItem In regexArr
            'Change Debug.Print to fill an array to write to Excel
            Debug.Print .Replace(rItem, vbNullString)
        Next rItem
    End With

    'Output:
    'ABCe0552553
    'ABCe05525531
    '1
    'Cust1234
    'Smith
    'New York
    '101
    'MP3 Player
    '102
    'Radio

End Sub 
```

编辑：稍微更新输出到数组以写入范围

```
Option Explicit

Sub RegexMethod()
Dim XMLString As String
Dim oRegex As Object
Dim regexArr As Object
Dim rItem As Object
Dim writeArray(1 To 1, 1 To 10) As Variant
Dim col As Long

    'Assumes Sheet1.Range("A1").Value holds example XMLString
    XMLString = Sheet1.Range("A1").Value

    Set oRegex = CreateObject("vbscript.regexp")
    With oRegex
        .Global = True
        .Pattern = "(id=""|>)(.+?)(""|</)"
        Set regexArr = .Execute(XMLString)

        'No lookbehind so replace unwanted chars
        .Pattern = "(id=""|>|""|</)"
        For Each rItem In regexArr
            'Change Debug.Print to fill an array to write to Excel
            Debug.Print .Replace(rItem, vbNullString)

            col = col + 1
            writeArray(1, col) = .Replace(rItem, vbNullString)
        Next rItem
    End With

    Sheet1.Range("A5:J5").Value = writeArray

End Sub

Sub XMLMethod()
Dim XMLString As String
Dim XMLDoc As Object
Dim boolValue As Boolean
Dim xmlDocEl As Object
Dim xMeContext As Object
Dim xChild As Object
Dim xorder As Object
Dim writeArray(1 To 1, 1 To 10) As Variant
Dim col As Long

    XMLString = Sheet1.Range("A1").Value

    'Remove xa: in this example
    'reason : "Reference to undeclared namespace prefix: 'xa'."
    'Shouldn't need to do this if full XML is well formed
    XMLString = Replace(XMLString, "xa:", vbNullString)

    Set XMLDoc = CreateObject("MSXML2.DOMDocument")
    'XMLDoc.setProperty "SelectionNamespaces", "xa:"

        'XMLDoc.Load = "C:\Users\ooo\Desktop\test.xml" 'load from file
    boolValue = XMLDoc.LoadXML(XMLString)  'load from string

    Set xmlDocEl = XMLDoc.DocumentElement
    Set xMeContext = xmlDocEl.SelectSingleNode("//MeContext")
        'Debug.Print Split(xMeContext.XML, """")(1)
        col = col + 1
        writeArray(1, col) = Split(xMeContext.XML, """")(1)
    For Each xChild In xmlDocEl.ChildNodes

        If xChild.NodeName = "Orders" Then
            For Each xorder In xChild.ChildNodes
                col = col + 1
                'Debug.Print Split(xorder.XML, """")(1)
                writeArray(1, col) = Split(xorder.XML, """")(1)
                col = col + 1
                'Debug.Print xorder.Text
                writeArray(1, col) = xorder.Text
            Next xorder
        ElseIf xChild.Text = "" Then
            col = col + 1
            'Debug.Print Split(xChild.XML, """")(1)
            writeArray(1, col) = Split(xChild.XML, """")(1)
        Else
            col = col + 1
            'debug.Print xChild.Text
            writeArray(1, col) = xChild.Text
        End If

    Next xChild

    Sheet1.Range("A5:J5").Value = writeArray

End Sub 
```

# .net - 添加内容时启动控件的动画 - 仅限 xaml

> ID：12689354
> 
> 赞同：0
> 
> 时间：2012-10-02T11:21:46.177
> 
> 标签：.net, wpf, xaml, animation, prism

我的应用程序中有一个内容控件，它被标记为 Prism 区域。当一个模块为此区域注册一个视图时，Prism 将该视图设置为控件的内容。

这很好用，但现在我想要一个动画，其中内容从控件顶部移动到其中，就像 Internet Explorer 中的警报一样。动画是纯 Xaml 且没有代码背后很重要，因为 Prism 在后台完成所有工作，我不想碰它。

现在有我的问题：我尝试遵循[Microsoft](http://msdn.microsoft.com/en-us/library/ms752312.aspx)的教程，但它在我的情况下不起作用，因为我需要能够在元素的内容属性**不为**空时触发动画，而值触发通常只能如果属性具有特定值而不是没有它，则触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:38:31.827

您可以使用[ContentControl的](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)[HasContent](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.hascontent.aspx)属性- 查看它是否有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:18:06.160

您还可以使用 DataTrigger 和转换器来实现您想要的：

```
 <DataTrigger Binding="{Binding Path=Prop, Converter={StaticResource ResourceKey=ConverterKey}}" Value="Value">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="Width" To="100" Duration="0:0:2"></DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger> 
```

# javascript - 基于 Web 的 Java Swing UI 的替代框架

> ID：12689361
> 
> 赞同：0
> 
> 时间：2012-10-02T11:22:14.280
> 
> 标签：javascript, html, jsf, gwt, vaadin

我正在重新设计一个十年前的 Java Web 应用程序（基本上是一个用户群非常小的产品）。在 Swing 中开发的 UI 使用 Java Applets 在桌面 Web 浏览器中呈现。

我已将类似的 2 种事件驱动技术入围 1) GWT/Vaadin 2) JSF2/AJAX/Primafaces 在进一步分析后，我们决定采用 1)

甚至在我们开始工作之前，客户的进一步要求迫使我们研究完全不同的 Spring MVC + JS 框架的 Web 框架，如 JQuery 或 ExtJS。原因是更好地支持使用相同服务器端架构的移动 Web 应用程序开发。

现在，我有点困惑。因此，邀请其他人的观点和经验：

1.  如果事件驱动框架不太适合支持 HTML5 移动设备客户端
2.  如果 JavaScript 框架不太适合像 UI 一样复制 Swing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:31:33.523

> 1) 如果事件驱动框架不太适合支持 HTML5 移动设备客户端

我不确定事件驱动框架是什么意思。例如， [jQuery Mobile](http://jquerymobile.com/)是一个事件驱动的框架，完美地支持 HTML5 移动客户端。有关其他示例，另请参阅[Sencha Touch](http://www.sencha.com/products/touch)和[jqTouch](http://www.jqtouch.com/)。

> 2) 如果 JavaScript 框架不太适合像 UI 那样复制 Swing

如果您正在考虑移动开发，那么据我所知，只有 Android 支持原生应用程序的 Java，但它不支持 Java 小程序。因此，目前唯一的选择是 JavaScript 用于在移动浏览器上运行的客户端脚本。Java 小程序是不可能的。Flash也是如此。Silverlight 和除了 JavaScript 之外的几乎所有东西也是如此。

有关优秀的 JavaScript 框架，请参阅[jQuery Mobile](http://jquerymobile.com/)、[Sencha Touch](http://www.sencha.com/products/touch)和[jqTouch](http://www.jqtouch.com/)。

接触移动设备的唯一其他选择是使用多种语言（如 Java、Objective-C 等）为每个平台编写本机应用程序，**或者**全部用 JavaScript 编写。要将移动 Web 应用程序转换为移动平台的本机应用程序，请参阅：[PhoneGap](http://phonegap.com/)、[Apache Cordova](http://incubator.apache.org/cordova/)和[Appcelerator Titanium](http://www.appcelerator.com/)。

# bash - 即使第一个命令的子进程仍在后台运行，也要关闭管道

> ID：12689369
> 
> 赞同：4
> 
> 时间：2012-10-02T11:22:50.837
> 
> 标签：bash, pipe, sh, background-process

假设我有`test.sh`如下。目的是通过这个脚本运行一些后台任务，不断更新一些文件。如果后台任务由于某种原因被终止，它应该重新启动。

```
#!/bin/sh

if [ -f pidfile ] && kill -0 $(cat pidfile); then
    cat somewhere
    exit
fi

while true; do
    echo "something" >> somewhere
    sleep 1
done &
echo $! > pidfile 
```

并想这样称呼它`./test.sh | otherprogram`，例如`./test.sh | cat`。

管道没有关闭，因为后台进程仍然存在并且可能会产生一些输出。我怎样才能告诉管道在结束时关闭`test.sh`？`pidfile`有没有比在调用管道命令之前检查是否存在更好的方法？

作为一种变体，我尝试在 结尾处使用`#!/bin/bash`and ，但它仍在等待管道关闭。`disown``test.sh`

* * *

我实际尝试实现的目标：我有一个“状态”脚本，它收集各种脚本（`uptime`、`free`、`date`、`get-xy-from-dbus`等）的输出，与`test.sh`此处类似。脚本的输出被传递给我的窗口管理器，它会显示它。它也用于我的 GNU 屏幕底线。

由于使用的某些脚本可能需要一些时间来创建输出，我想将它们从输出集合中分离出来。所以我把它们放在一个`while true; do script; sleep 1; done`循环中，如果它还没有运行，它就会启动。

现在的问题是我不知道如何告诉调用脚本“真正”分离守护进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:12:36.177

看看这是否符合您的目的：（我假设您对 while 循环中的任何 stderr 命令不感兴趣。如果您愿意，您可以调整代码。:-)）

```
#!/bin/bash

if [ -f pidfile ] && kill -0 $(cat pidfile); then
    cat somewhere
    exit
fi

while true; do
    echo "something" >> somewhere
    sleep 1
done >/dev/null 2>&1 &
echo $! > pidfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:32:33.910

如果您想显式关闭文件描述符，例如标准输出 1，您可以这样做：

```
exec 1<&- 
```

这对 POSIX shell 有效，请参阅：[here](http://pubs.opengroup.org/onlinepubs/007904975/utilities/exec.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:34:54.650

当您将 while 循环放在显式子外壳中并在后台运行子外壳时，它将提供所需的行为。

```
(while true; do
    echo "something" >> somewhere
    sleep 1
done)& 
```

# php - 如何在 Magento 中添加购物车摘要以联系我们页面？

> ID：12689371
> 
> 赞同：1
> 
> 时间：2012-10-02T11:22:51.317
> 
> 标签：php, magento, layout

我制作了一个自定义模板，并希望将购物车摘要添加到某些页面的左侧栏中，例如联系我们页面。

有没有人可以指出我应该在contacts.xml中添加什么的正确方向？！

最好的，伊斯梅尔

**更新**

```
<reference name="left">
        <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml">
            <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
        </block>
</reference> 
```

这是尝试其他一些东西后的解决方案。不知道这是否是最佳实践，所以请提供反馈！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:04:32.160

```
<reference name="left">
    <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml">
        <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
        <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
    </block>
</reference> 
```

# php - PHP：如何使用“2012 年 10 月 2 日 12:28”转换为时间戳？

> ID：12689373
> 
> 赞同：0
> 
> 时间：2012-10-02T11:22:53.797
> 
> 标签：php, date, time

如何将“2012 年 10 月 2 日 12:28”转换为可比较的时间戳？

目标是获得一个时间戳值，我可以在该值上使用类似的运算符，如 <、>、= 和 !=。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:26:59.103

您可以尝试使用`DateTime::createFromFormat`

```
$dateTime  = DateTime::createFromFormat("d F, Y g:i", "2 October, 2012 12:28");
var_dump($dateTime->getTimestamp()); 
```

输出

```
int 1349173680 
```

您还可以添加时区

```
$dateTime = DateTime::createFromFormat("d F, Y g:i", "2 October, 2012 12:28", new DateTimeZone('UTC'));
var_dump($dateTime->getTimestamp()); 
```

输出

```
int 1349180880 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:28:05.387

您可以通过两次调用来使其工作`strtotime`：

```
$date = strtotime("2 October, 2012");

// Now use the current date to get the time:
$timestamp = strtotime("12:28", $date); 
```

您可以用 分隔日期段`explode`。

# c++ - 如何将方法传递给qsort？

> ID：12689376
> 
> 赞同：6
> 
> 时间：2012-10-02T11:23:08.387
> 
> 标签：c++

有一个类包含一些数据，它会在某个时间点对它们进行排序。我使用`qsort()`并且我想将比较函数作为一种方法保留在类中。问题是如何传递一个方法以`qsort()`使编译器（g++）不抛出任何警告？

尝试1：

```
int Data::compare_records(void * rec_1, void * rec_2){
  // [...]
}

void Data::sort(){
  qsort(records, count, sizeof(*records), &Data::compare_records);
} 
```

这种方式会产生错误：

```
error: cannot convert ‘int (Data::*)(const void*, const void*)’ to ‘int (*)(const void*, const void*)’ for argument ‘4’ to ‘void qsort(void*, size_t, size_t, int (*)(const void*, const void*))’ 
```

尝试 2：

```
void Data::sort(){
  qsort(
    records, count, sizeof(*records),
    (int (*)(const void*, const void*)) &Data::compare_records
  );
} 
```

这种方式会产生警告：

```
warning: converting from ‘int (Data::*)(const void*, const void*)’ to ‘int (*)(const void*, const void*)’ 
```

那么如何以正确的方式做到这一点呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:25:11.840

如果您必须使用`qsort`而不是`std::sort`（**推荐**），则声明成员方法`static`就足够了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T11:24:26.613

不要`qsort`在 C++ 中使用。使用`std::sort`和`boost/std::bind`。成员函数指针不能转换为函数指针。你的方法应该是`static`，或者应该是`free function`。

请参阅[“指向成员函数”的类型与“指向函数”的类型不同吗？](https://isocpp.org/wiki/faq/pointers-to-members#fnptr-vs-memfnptr-types)解释一下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T11:27:35.573

您将函数传递为`&Data::compare_records`，但您应该将其传递为`Data::compare_records`并使其成为`static`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-18T16:30:31.773

尽管我使用 Qt 的 qSort()

函子可以很酷。

```
struct randomWSort
{
    SatoshiGame* This;
    randomWSort(SatoshiGame* g){This=g;}
    bool operator()(QString& a, QString& b)
    {
        return This->randomWSort(a,b);
    }
};

bool SatoshiGame::randomWSort(QString& a, QString& b)
{
    return rand->rnd() %2;
}

QString SatoshiGame::getRandomString(QStringList words)
{
    qSort(words.begin(), words.end(), ::randomWSort(this) );
    return words.at(0);
} 
```

# c# - C# Windows 服务 - 内存不足错误

> ID：12689391
> 
> 赞同：0
> 
> 时间：2012-10-02T11:23:49.963
> 
> 标签：c#, c#-4.0, memory

我编写了一个处理 tif 文件的服务。该过程的一部分是将多页 tif 拆分为单页。

我在以下行出现内存不足错误：

```
System.Drawing.Image tiffImage = System.Drawing.Image.FromFile(path); 
```

该服务在未充分利用且有大量可用内存的服务器上运行。

我做了一些研究，人们说如果 tif 不正确（与像素格式有关）可能会发生错误。但是，我使用相同的 tif 文件在我的桌面（调试）上运行代码，并且拆分没有问题。

当我使用以下代码查找内存使用情况时：

```
Process proc = Process.GetCurrentProcess(); 
```

> 消息：-“内存使用情况”+ proc.PrivateMemorySize64

```
I get the following results :  
12mb - server  
27mb - desktop 
```

这是否意味着服务器上的服务分配了更少的内存？或者这是否意味着服务器上的服务正在使用更少的内存？

任何帮助都会很棒谢谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:59:33.190

尽量不要在成像上使用任何微软的东西。如果您的服务只是拆分 tiff 文件，我建议您将 libtiff 与互操作调用或命令行一起使用。

MS 和许多其他图形工具包尝试加载图像。使用 libtiff，您不必加载它，并且可以在拆分前检查标头。

缺点是很难用。

顺便说一句：2003 年，为了对我们的 ICR 引擎进行性能测试，我们使用英特尔 C++ 编译器编译了 libtiff。加载 A3、400 dpi 24 位彩色 tiff 文件，并使用简单的阈值算法将其转换为黑白。在具有 1 GB 内存的 1300 Mhz Intel Xeon CPU 中，这一切花费了 200~ ms。这可能会给你一些数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:28:41.453

System.Drawing 由 gdiplus.dll 实现。可能是它的不同版本在两台机器上运行。

尝试在 System.Windows.Media.Imaging 中切换到 WPF 成像 API。

# ios6 - Cordova 1.9 可以在 iOS 6 上运行吗？

> ID：12689399
> 
> 赞同：2
> 
> 时间：2012-10-02T11:24:13.043
> 
> 标签：ios6, xcode4.5

Cordova 1.9 可以在 iOS 6 上运行吗？

我将在 Xcode 4.5 上处理它。

我已经安装了 Cordova 2.0，这是个麻烦的问题。

**科尔多瓦库**

**主视图控制器.m**

**AppDelegate.m**

我应该降级到 Phonegap / Cordova 到 1.9 还是升级到 Cordova 2.1？请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:14:46.257

在我的情况下，我在 IOS6 上使用 Cordova 1.9 构建应用程序时遇到了很多错误。

虽然我们可以在 IOS6 上运行 Cordova 1.9，但是插件问题或其他奇怪的问题会让你感到疲倦。

所以请升级它并面对真相。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:53:50.053

我刚刚设法使用带有 Cordova 1.9 的 iOS6 SDK 编译我的应用程序。

确保从应用程序的“构建设置”中的“有效架构”中删除 armv7s。但是，这意味着您将无法定位 iPhone 5。

（感谢 Apple，iPhone5 在我的国家还不能购买！！，所以我还有时间升级 Cordova :) ）

我仍在等待 Cordova 2.2 版本。您可以查看[Cordova 的错误报告](https://issues.apache.org/jira/browse/CB/fixforversion/12322549#selectedTab=com.atlassian.jira.plugin.system.project%3aversion-issues-panel)并根据自己的情况做出决定。

# xml - 是否可以通过附加 XSD 为元素定义 XML 属性？

> ID：12689402
> 
> 赞同：0
> 
> 时间：2012-10-02T11:24:24.097
> 
> 标签：xml, xsd, xsi

假设我有一个类似这样的 XML：

```
<root xmlns="default" xmlns:add="additional">
    <element foo="fromDefault" />
    <add:element foo="fromDefault" add:bar="fromAdditional" />
</root> 
```

我想做的是合并这两个`element`定义以避免重复，如下所示：

```
<root xmlns="default" xmlns:add="additional">
    <element foo="fromDefault" add:bar="fromAdditional" />
</root> 
```

但我什至不确定这是否可能。

我觉得这可能是可行的，因为我们对根元素使用了一些类似的符号，例如：

```
<root xmlns:xsi="..."
         xsi:schemaLocation="..."> 
```

不幸的是，我无法找到任何有关此问题的文档/参考/教程/任何内容，有人可以帮我澄清我想做的事情是否可行（或不可行）并与我分享一些链接吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:22:25.337

我认为您正在寻找这样的东西：

**附加的.xsd**

```
<xs:schema 
  targetNamespace="additional"
  elementFormDefault="qualified"
  xmlns="additional"
  xmlns:mstns="http://tempuri.org/XMLSchema.xsd"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:attribute name="bar" type="xs:string"/>

</xs:schema> 
```

**默认.xsd**

```
<xs:schema 
  targetNamespace="default"
  elementFormDefault="qualified"
  xmlns="default"
  xmlns:mstns="http://tempuri.org/XMLSchema.xsd"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:add="additional">

  <xs:import namespace="additional" schemaLocation="additional.xsd"/>

  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="element" minOccurs="1" maxOccurs="1">
          <xs:complexType>
            <xs:attribute name="foo" type="xs:string"/>
            <xs:attribute ref="add:bar"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

第一个模式仅定义“附加”内容（在示例中只是一个属性），第二个模式导入它并定义其他所有内容，在需要时引用其他内容。

# jquery - Jquery window.location.hash 如何替换？

> ID：12689408
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:24:39.223
> 
> 标签：jquery, url, hash, tabs, replace

我如何将 [http://www.example.com/#home](http://www.example.com/#home)更改为[http://www.example.com/home](http://www.example.com/home)

我正在使用 jquery 选项卡

是否可以 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:26:15.730

`pushState`会这样做，虽然支持不是那么好。

在这里阅读：[http ://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate?16328a60](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate?16328a60)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:26:27.177

您可以尝试[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)功能：

```
str = str.replace('#', ''); 
```

# xml - Grails - 在服务中调用 Shiro 登录操作

> ID：12689412
> 
> 赞同：0
> 
> 时间：2012-10-02T11:24:52.907
> 
> 标签：xml, grails, service, action, shiro

我有一个不寻常的问题——我需要让移动设备登录到 Grails 上的数据库系统。移动设备正在发送 XML 文件，它们用作设备和数据库应用程序之间的数据传输。我必须做的第一件事是根据发送的 XML 文件对数据库进行身份验证。当我将 Shiro 用作安全框架时，现在我必须从 XML 读取服务进行登录。有人可以帮我吗？

这是我尝试使其工作的方法。导入 shiro.ShiroRole 导入 shiro.ShiroUser

```
class LoginService {

 def shiroSecurityService

 def AuthController

 def params

 def confirmation() {

    def path = System.properties['base.dir']    

 def file = new File (path+"/web-app/xml/ConfirmationRequest.xml") 

 def records = new XmlSlurper().parse(file)

   if(records.user.username=='klemens'&&records.user.password=='kot12345')
    {
        params.username='klemens'
        params.password='kot12345'
        AuthController.signIn(params)
    }

  }
} 
```

当然，它没有，它挂在这个错误上：

```
ERROR context.GrailsContextLoader  - Error executing bootstraps: Cannot get property 'params' on null object
Message: Cannot get property 'params' on null object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:07:36.697

好的，我认为您应该依赖 Shiro SecurityUtils 类并拒绝在您的服务上使用 AuthController，如下所示：

```
 def confirmation() {

    def path = System.properties['base.dir']    

    def file = new File (path+"/web-app/xml/ConfirmationRequest.xml") 

    def records = new XmlSlurper().parse(file)
    Subject currentUser = SecurityUtils.getSubject()
    UsernamePasswordToken token = new UsernamePasswordToken(records.user.username, records.user.password);
    currentUser.login(token);
    currentUser.isAuthenticated()
  }

  } 
```

不要忘记阅读[手册](http://shiro.apache.org/subject.html)

# database - Wordpress：在发布时插入帖子 ID

> ID：12689416
> 
> 赞同：0
> 
> 时间：2012-10-02T11:25:13.993
> 
> 标签：database, wordpress, insert

我正在尝试在发布时插入帖子 ID 到自定义表，但它没有添加正确的 ID，但这里 0 是我的函数

```
//get post id on publish
function get_publishing_id($post_id) {
  $post= get_post($post_id);
  if ($post->post_type == 'post'
      && $post->post_status == 'publish') {

        // insert data on publish
        global $wpdb;
        $wpdb->insert( 
            $wpdb->prefix.'banner_views', 
            array( 
                'postid' => $post,
                'view_count' => 12,
            )
        );

  } // end if
} // end function
add_action('save_post','get_publishing_id'); 
```

请帮助解决这个问题。非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:33:16.820

解决了。

错误是没有像 $post->ID 那样使用 $post 传递 ID

```
//get post id on publish
function get_publishing_id($post_id) {
  $post= get_post($post_id);
  if ($post->post_type == 'post'
      && $post->post_status == 'publish') {

        // insert data on publish
        global $wpdb;
        $wpdb->insert( 
            $wpdb->prefix.'banner_views', 
            array( 
                'postid' => $post->ID,// here was the mistake
                'view_count' => 12,
            )
        );

  } // end if
} // end function
add_action('save_post','get_publishing_id'); 
```

所以上面的代码对我有用。

非常感谢

# php - 移出目录到 .htaccess 文件是否会增加 CPU 加载时间和 CPU 周期

> ID：12689417
> 
> 赞同：3
> 
> 时间：2012-10-02T11:25:16.570
> 
> 标签：php, .htaccess, optimization, load

我有很多这样的超链接：这个链接放在交互文件夹中，并链接到主文件夹。

```
<a href='../user/" . $id . "/".$name."' target='_self'>" . $name. "</a> 
```

回到网站的主目录，在主目录中有一个`.htaccess`包含此代码的文件

```
RewriteRule ^user/([0-9]*) interact/profile1.php?id=$1 [L,QSA] 
```

我这样做是为了使 URL 看起来像：

```
http://www.domain.com/user/ 
```

而不是这个：

```
http://www.domain.com/interact/user 
```

这使得请求返回到它来自的同一目录，即 /interact 目录。我有很多超链接可以做这样的事情。有很多这样的超链接会增加 CPU 加载时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:54:11.403

是的，使用重写会占用更多 CPU。但这并不取决于链接的数量，而是取决于完成的请求数量。

此外，使用 .htaccess 文件也会影响性能。比重写要多得多。

在 .htaccess 中重写会产生双重影响，因为评估 .htaccess 文件的过程相对较晚，而那里的重写基本上会重新启动整个过程。

另一方面，影响是可衡量的，但在普通服务器上很少注意到。您是否处于交通繁忙的情况？然后我建议完全摆脱 .htaccess 文件，在 Apache 配置中禁用它们，并将重写规则放入 vhost 配置中。

驻留在那里，它们只需要在服务器启动时进行解析，并且您可以避免服务器不断地在请求可能触及的任何目录中查找 .htaccess 文件。

# iphone - 通过 HTML 打开的全屏播放器即使按下完成也不会停止下载

> ID：12689421
> 
> 赞同：3
> 
> 时间：2012-10-02T11:25:26.537
> 
> 标签：iphone, ios, html, uiwebview

我使用 tableview 在同一单元格中添加了一些视频。每个单元格都有自己的 webview。使用以下代码在 webview 中播放视频

```
NSString *embedHTML = @"<html><head>\<style type=\"text/css\">\body {\background-color:transparent;\color: white;\}\</style>\<script>\function load({document.getElementById(\"yt\").play();}\</script>\</head><body onload=\"load()\"style=\"margin:0\">\<video id=\"yt\" src=\"%@\" \width=\"%0.0f\" height=\"%0.0f\" autoplay controls></video>\</body></html>";
NSString *html = [NSString stringWithFormat:embedHTML, urlString, videoView.frame.size.width, videoView.frame.size.height,thumbnailImageLink];
[videoView loadHTMLString:html baseURL:nil]; 
```

它工作得很好。它显示带有播放按钮的缩略图视频。点击播放按钮以全屏模式打开视频播放器，其中包含所有控件。

现在的主要问题是当我按下完成按钮时，全屏模式消失了**嗯，正如预期的那样**

但视频的下载仍在继续。**一点都不好**

所以说，我打开了 Video1 然后我按了完成按钮，然后我打开了 video2 但是因为 video1 仍在下载，所以 video2 的互联网速度越来越慢。

所以问题是，当全屏上的完成按钮被按下时，是否有办法强制停止下载？

注意：有一个视频列表，即**n 个视频 = n 个网络视图**，因此无法检测到哪个网络视图正在播放视频。如果我能够访问 webview，那么我会重新加载它，这样下载就可以停止，它会获得新的内容，直到我点击缩略图才会开始。

更具体地说，我可以在播放视频和按下完成按钮时访问

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayStarted:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayFinished:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil]; 
```

并且可以通过

```
BOOL isVideoInFullScreenMode;
-(void)videoPlayStarted:(NSNotification *)notification{
//Your stuff here
   isVideoInFullScreenMode = YES;
}

-(void)videoPlayFinished:(NSNotification *)notification{
    //Your stuffs here
    isVideoInFullScreenMode = NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:50:22.337

您无法控制 webview 中发生的事情。我认为这是一个设计问题。Webviews 并不是所有人的灵丹妙药。如果你想控制它，你需要自己编写代码。我也希望你已经用苹果 (http://bugreporter.apple.com) 解决了这个问题。

# multidimensional-array - lua表中具有一个值的两个索引

> ID：12689424
> 
> 赞同：0
> 
> 时间：2012-10-02T11:25:56.007
> 
> 标签：multidimensional-array, lua, indexing, lua-table

我对 lua 很陌生，我的计划是创建一个表。这个表（我称之为测试）有 200 个条目 - 每个条目都有相同的子条目（在这个例子中子条目金钱和年龄）：

这是一种伪代码：

```
table test = {
    Entry 1: money=5 age=32
    Entry 2: money=-5 age=14
    ...
    Entry 200: money=999 age=72
} 
```

我怎么能用 lua 写这个？有没有可能？另一种方法是，我将每个子条目写为一个表：

```
table money = { }
table age = { } 
```

但对我来说，这不是一个好方法，所以也许你可以帮助我。

编辑：

这个问题[Table inside a table](https://stackoverflow.com/questions/6807969/table-inside-table-in-lua?rq=1)是相关的，但我不能写这个 200x。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:39:19.123

试试这个语法：

```
test = {
  { money = 5, age = 32 },
  { money = -5, age = 14 },
  ...
  { money = 999, age = 72 }
} 
```

使用示例：

```
-- money of the second entry:
print(test[2].money) -- prints "-5"

-- age of the last entry:
print(test[200].age) -- prints "72" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:43:10.157

您也可以将问题放在一边，并在`test`:中有两个序列，`money`并且`age`每个条目在两个数组中都有相同的索引。

```
test = {
   money ={1000,100,0,50},
   age={40,30,20,25}
} 
```

这将具有更好的性能，因为您只有`3`表而不是`n+1`表的开销，其中`n`是条目数。

无论如何，您必须以一种或另一种方式输入数据。您通常会使用一些易于解析的格式，如 CSV、XML 等，然后将其转换为表格。像这样：

```
s=[[
1000 40
 100 30
   0 20
  50 25]]
test ={ money={},age={}}
n=1
for balance,age in s:gmatch('([%d.]+)%s+([%d.]+)') do
   test.money[n],test.age[n]=balance,age
   n=n+1
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:42:45.887

你的意思是你不想把“钱”和“年龄”写成200倍？

有几种解决方案，但您可以编写如下内容：

```
local test0 = {
  5, 32,
  -5, 14,
  ...
}

local test = {}

for i=1,#test0/2 do
  test[i] = {money = test0[2*i-1], age = test0[2*i]}
end 
```

否则，您总是可以使用元表并创建一个行为与您想要的完全一样的类。

# ios - MonoTouch.Dialog 与 UISplitViewController

> ID：12689430
> 
> 赞同：1
> 
> 时间：2012-10-02T11:26:23.450
> 
> 标签：ios, xamarin.ios, uisplitviewcontroller, monotouch.dialog

我正在使用 MonoTouch 创建通用应用程序。在 iPad 上运行时，我使用`UISplitViewController`MonoTouch.Dialog 在主视图（左侧）中构建多级菜单。

问题是，当我触摸第一个根元素时，它会打开覆盖整个屏幕的新视图，而不是位于主拆分视图内。

问题是，我怎样才能使下一个根元素在与其父级相同的视图中打开？

我能找到的所有示例通常在主视图上都有一级菜单，因此当您触摸它时，它会在详细视图上显示一些内容。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:54:58.073

假设你有一个`UISplitViewController`和你的`CustomViewController`.

```
UISplitViewController split = ...;
CustomViewController controller = ...; 
```

如果要将新控制器**推**到当前（主）控制器之上，请使用：

```
var root = new RootElement ();
var dvc = new DialogViewController (UITableViewStyle.Plain, root, true);
dvc.ActivateController (controller); 
```

如果您想在详细信息（右）部分显示新控制器，请使用以下内容：

```
UISplitViewController split = ...;
var about = new StringElement ("About");
about.Tapped += delegate {
    split.ViewControllers = new UIViewController [] {
        split.ViewControllers [0],
        controller
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:15:36.253

所以你希望你的，我猜是表，在主控中填充触摸事件的新主视图？

我对 .dialog 不熟悉，但我举了一个我知道的例子：

带上你的`rootviewcontroller.parentviewcontroller.splitviewcontroller`然后填充`viewcontrollers[0]`

```
var split =(uisplitviewcontroller)rootviewcontroller.parentviewcontroller.splitviewcontroller;
var nav = (uinavigationcontroller)split.viewcontrollers[0];
nav.pushviewcontroller(_yourView_); 
```

# textures - 立方体纹理在一段时间后消失

> ID：12689431
> 
> 赞同：1
> 
> 时间：2012-10-02T11:26:24.430
> 
> 标签：textures, webgl, three.js

我制作了一个带有纹理和文字的立方体。当我旋转立方体时，一段时间后，纹理消失了，出现了一个非常漂亮的彩色立方体。

我做了一个[jsfiddle](http://jsfiddle.net/slaver113/QfdyJ/2/)来查看问题：

我正在使用最新版本的 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:33:30.163

您的颜色指定不正确。改为这样做：

```
cubeTextures.push( new THREE.MeshBasicMaterial( { map: texture, transparent: true, color:0xffffff } ) ); 
```

你有一个超出范围的数组。做这个：

```
context.fillText(cubeText[indexTexture], 20, 20, cubeWidth - cubeTextMarginLeft - cubeTextMarginRight); 
```

我无法用我的浏览器重现您的问题，但看看这是否能解决问题。

编辑：您的相机的视野是 400 度。哎呀！试试40。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T07:47:10.187

似乎这是一个鲍泽问题，它现在在 Firefox 24 中消失了

# php - PHP Pear 库向我抛出“未选择数据库”的错误

> ID：12689432
> 
> 赞同：1
> 
> 时间：2012-10-02T11:26:25.763
> 
> 标签：php, database, pear

我的代码中有以下代码片段：

```
 $dsn = DB_TYPE . '://' . DB_USER . ':' . DB_PASS . '@' . DB_HOST . '/' . DB_NAME;
//error_reporting(E_ALL);

    $db = DB::connect( $dsn, 'true' );
    $db->setFetchMode( DB_FETCHMODE_ASSOC );
    function errhndl ( $err ) {
        echo '<pre>' . $err->message;
        print_r( $err );
        die();
    }

    PEAR::setErrorHandling( PEAR_ERROR_CALLBACK, 'errhndl' ); 
```

我的所有数据库凭据都是正确的，并且还包括了数据库的 PEAR 库，但这仍然会引发以下错误：

```
DB Error: no database selected 
```

和一个 DB 错误对象数组

有人可以指导我这有什么问题吗？

# parallel-processing - 并行化 CouchDB 视图组索引器

> ID：12689434
> 
> 赞同：2
> 
> 时间：2012-10-02T11:26:50.233
> 
> 标签：parallel-processing, couchdb

我想知道是否有可能在多台机器的帮助下真正并行化 CouchDB 的视图组索引？

我猜想不同的索引器可能会更新不同的视图，但是否也有可能许多机器在单个索引上工作？

如何做到这一点？我在复制指南或手册中没有找到任何声明..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:35:41.753

这听起来像是[Cloudant](https://cloudant.com/)的[BigCouch](http://bigcouch.cloudant.com/)的任务。

取自 BigCouch 的描述。

> 虽然它在最终用户看来是一个[Apache CouchDB](http://couchdb.apache.org/)实例，但实际上它是弹性集群中的一个或多个 BigCouch 节点，它们协同工作以存储和检索文档、索引和服务视图以及服务 CouchApps。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:40:50.977

过去对此进行了调查。问题在于，最终，必须以串行方式构建 B~树，从而使跨索引视图的范围查询有效。这是大量的额外磁盘活动，最终按顺序（在单个节点上）处理文档是最有效的方法，而不是最后将大文件复制并合并到单个 B~tree 中。

当您第一次意识到高度并行化的 map-reduce 算法正在按顺序运行时，这看起来确实很古怪，哇！

正如 Octavian 指出的那样，BigCouch 通过跨节点分片来做到这一点，此代码将在今年合并到 CouchDB 中，这样您就可以两全其美。

# c# - 传递给方法的 Memorystream 对象不包含值

> ID：12689441
> 
> 赞同：1
> 
> 时间：2012-10-02T11:27:07.383
> 
> 标签：c#, asp.net, memorystream, streamwriter

我正在使用 memorystream 对象将值从 streamwriter 对象写入内存。我有几种方法用于记录错误和值，因此我在它们之间传递我的 memorystream 对象作为参数。

我的问题是内存流不包含值。请参见下面的代码：

```
 #region csvlogging
    public static void initiateCsvLogging(SortedList<int, string> logList, SortedList<int, string> errorList) // Handles csv upload logging
    {
        logMsgError(errorList, logList);
    }

    public static void logMsgError(SortedList<int, string> errorList, SortedList<int, string> logList)
    {
        using (MemoryStream ms = new MemoryStream())
        {
           StreamWriter sw = new StreamWriter(ms);
            try
            {
                sw.WriteLine("Errors:");
                foreach (KeyValuePair<int, string> k in errorList)
                {

                    if (k.Value == null)
                    {
                        sw.WriteLine("No errors reported.");
                    }
                    else
                    {
                        sw.WriteLine(k.Key + "," + k.Value);
                    }
                }
            }
            catch (Exception ex)
            {

            }
            finally
            {
                sw.WriteLine("");
            }

            logMsg(logList, ms);

        }
    } // Handles data upload error logging for csv

    public static MemoryStream logMsg(SortedList<int, string> logList, MemoryStream ms)
    {
        string DateNow = System.DateTime.Now.Date.ToString("yyyy-MM-dd");
        string FileName = "log " + DateNow + ".csv";
        char[] delimiterChars = { ',' };

        try
        {
            // Write values to textfile and save to Log folder
            using (StreamWriter sw = new StreamWriter(ms))
            {
                if (logList.Keys.Count == 0)
                {
                    sw.WriteLine("No new users added to Active Directory.");
                }
                else  // If keys > 0 then new users have been added to AD
                {
                    sw.WriteLine("Username" + "," + "Password" + "," + "Company" + "," + "Email");
                    foreach (KeyValuePair<int, string> k in logList)
                    {
                        string[] values = k.Value.Split(delimiterChars);
                        sw.WriteLine(values[0] + "," + values[1] + "," + values[2] + "," + values[3]);
                    }
                }

                try
                {
                    sw.Flush();
                    sendLogByEmail(new MemoryStream(ms.ToArray()), FileName);
                }
                catch (Exception ex)
                {

                }
            }
        }

        catch (ThreadAbortException ex)
        {

        }

        finally
        {

        }
        return ms;
    } // Handles logging for csv

    public static void sendLogByEmail(MemoryStream ms, string error, int count)
    {
        //Send mail by attachment code
        SmtpClient smtpclient = new SmtpClient();
        //smtpclient.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
        //smtpclient.UseDefaultCredentials = true;
        smtpclient.Host = "ldnmail";

        MailMessage message = new MailMessage("nick.gowdy@orcinternational.co.uk", "nick.gowdy@orcinternational.co.uk");
        System.Net.Mime.ContentType ct = new System.Net.Mime.ContentType(System.Net.Mime.MediaTypeNames.Text.Plain);
        System.Net.Mail.Attachment attach = new System.Net.Mail.Attachment(ms, ct);
        attach.ContentDisposition.FileName = error;

        message.Attachments.Add(attach);
        smtpclient.Send(message);

    }
    #endregion 
```

因为我没有使用 USING 关键字，所以我必须为 memorystream 对象编写更多代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:29:52.560

您必须刷新（关闭）StreamWriter。

```
 finally
        {
            sw.WriteLine("");
        }

        sw.Flush();             

        logMsg(logList, ms); 
```

但最终您使用所有数据通过邮件发送：

```
 System.Net.Mime.ContentType ct = new
         System.Net.Mime.ContentType(System.Net.Mime.MediaTypeNames.Text.Plain);
   System.Net.Mail.Attachment attach = new System.Net.Mail.Attachment(ms, ct); 
```

通过附加的 StringWriter 在 StringBuilder 中收集信息似乎要容易得多。

StreamWriter 关闭其 Stream 存在问题，这可能是您的问题的一部分。

# vba - 如何引用创建的浏览器实例

> ID：12689442
> 
> 赞同：0
> 
> 时间：2012-10-02T11:27:07.010
> 
> 标签：vba, vbscript

我像这样创建了一个浏览器，然后手动导航到我需要的网页。我打算通过单独的宏进入需要打开的页面后自动提取某些元素

```
Sub Test()

Set CAS = New SHDocVw.InternetExplorer                     ' create a browser
CAS.Visible = True ' make it visible

CAS.navigate "http://intraneturl"

Do Until CAS.readyState = 4
DoEvents
Loop 
```

这工作正常，然后我做

```
Public Sub Gather

Set HTMLDoc2 = CAS.document.frames("top").document

Call Timer1

With HTMLDoc2
.getElementById("tab4").FirstChild.Click
End With

Call Timer2

Dim fir, las, add1, add2, cit, stat, zi As String

Dim First As Variant
Dim Last As Variant
Dim addr1 As Variant
Dim addr2 As Variant
Dim city As Variant
Dim Thisstate As Variant
Dim Zip As Variant

Call Timer2

Set HTMLDoc = CAS.document.frames("MainFrame").document

Call Timer2

With HTMLDoc

First = .getElementsByName("IndFirst")
Last = .getElementsByName("IndLast")
addr1 = .getElementsByName("txtAdd_Line1")
addr2 = .getElementsByName("txtAdd_Line2")
city = .getElementsByName("txtAdd_City")
Thisstate = .getElementsByName("cmb_Add_State")
Zip = .getElementsByName("txtAdd_Zip")

End With

fir = First.Value
las = Last.Value
add1 = addr1.Value
add2 = addr2.Value
cit = city.Value
stat = Thisstate.Value
zi = Zip.Value

'navigate back to start page

 With HTMLDoc2
.getElementById("tab3").FirstChild.Click
End With
End Sub 
```

这第一次有效，但在第一次之后，当尝试在包含类似信息的不同网页上再次运行gather（）子时，我得到“对象变量或未设置块变量”。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:44:37.880

“错误”对象变量或未设置块变量“发生在：设置 HTMLDoc2 = CAS.document.frames(“top”).document 我第二次尝试运行 Gather()。”

这可能是以下三件事之一：

1.  CAS 不再是对象 要检查这一点，请在行上设置断点，在 VBA 编辑器中按 ctr+G 并`?CAS Is Nothing`在即时窗口中键入；结果应该是假的；如果是 True CAS 不再是对象

2.  就像 Daniel Dusek 建议的那样，确保 CAS.document.frames("top") 是页面上的实际元素。要检查这一点，请打开您尝试编写脚本的网页，在 Internet Explorer 中按 F12，单击工具栏中的箭头并单击网页中的“顶部”框架元素，切换回开发人员工具并查看该行突出显示。确保框架元素被命名为“top”。

3.  当您尝试引用框架元素时，HTML 尚未完全加载。设置更长的延迟或循环。

即（未经测试）：

```
 Do Until HtmlDoc2 Is Nothing = false
      Set HTMLDoc2 = CAS.document.frames("top").document 
    Loop 
```

也许更重要的问题是为什么要手动导航到另一个页面？难道你不能自动化你的过程的那部分吗？

# spring-insight - 无法让 Spring Insight 监控我的应用程序

> ID：12689446
> 
> 赞同：3
> 
> 时间：2012-10-02T11:27:19.007
> 
> 标签：spring-insight

我已经安装了 Spring Tool Suite 和 tc Server，但无法让 Spring Insight 显示我的应用程序。我已经通过服务器选项卡成功添加了我的 Web 应用程序，并毫无例外地启动了它。我还对应用程序进行了一些操作，以便 Spring Insight 可以捕获这些活动。在服务器属性的 Insight 选项卡中选择了“启用指标收集”，我也可以在模块选项卡下看到我的应用程序。

我可以通过 mysite:8080/myProject 页面和 Insight 通过 mysite:8080/insight 访问我的项目，但 Spring Insight 页面没有显示我的应用程序。

我正在使用与 tc Server v2.7 捆绑的 Spring Tools Suite 3.0.0.RELEASE。

任何帮助表示赞赏。

这是我的简化启动日志：

```
 Eki 02, 2012 9:41:05 AM com.springsource.insight.tcserver.WeavingHelper findRepositoriesForClassPath
INFO: file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/insight/collection-plugins/insight-collection-1.8.3.RELEASE.jar: aspects will be woven into the main Tomcat classloader
Eki 02, 2012 9:41:05 AM com.springsource.insight.tcserver.WeavingHelper findRepositoriesForClassPath
INFO: file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/insight/collection-plugins/insight-plugin-jdbc-1.8.3.RELEASE.jar: aspects will be woven into the main Tomcat classloader
Eki 02, 2012 9:41:05 AM com.springsource.insight.tcserver.WeavingHelper findRepositoriesForClassPath
INFO: file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/insight/collection-plugins/insight-plugin-tomcat-1.8.3.RELEASE.jar: aspects will be woven into the main Tomcat classloader
ASPECTJ: aspectj.overweaving=true: overweaving switched ON
Eki 02, 2012 9:41:07 AM com.springsource.tcserver.security.PropertyDecoder <init>
INFO: tc Runtime property decoder using memory-based key
Eki 02, 2012 9:41:07 AM com.springsource.tcserver.security.PropertyDecoder <init>
INFO: tcServer Runtime property decoder has been initialized in 774 ms
Eki 02, 2012 9:41:10 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Eki 02, 2012 9:41:11 AM com.springsource.tcserver.serviceability.rmi.JmxSocketListener init
INFO: Started up JMX registry on 127.0.0.1:6969 in 796 ms
Eki 02, 2012 9:41:11 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 4213 ms
Eki 02, 2012 9:41:11 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Eki 02, 2012 9:41:11 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: VMware vFabric tc Runtime 2.7.1.RELEASE/7.0.29.A.RELEASE
Eki 02, 2012 9:41:11 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\conf\Catalina\localhost\Claimer.UI.xml
Eki 02, 2012 9:41:11 AM org.apache.catalina.startup.SetContextPropertiesRule begin
WARNING: [SetContextPropertiesRule]{Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Claimer.UI' did not find a matching property.
Eki 02, 2012 9:41:12 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\wtpwebapps\Claimer.UI\WEB-INF\lib\el-api-2.2.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/el/Expression.class
Eki 02, 2012 9:41:41 AM org.apache.catalina.core.StandardContext addApplicationListener
INFO: The listener "com.sun.faces.config.ConfigureListener" is already configured for this context. The duplicate definition has been ignored.
Eki 02, 2012 9:41:42 AM com.springsource.insight.collection.strategies.CollectionStrategyRunner enable
INFO: Enabled Strategy com.springsource.insight.collection.strategies.EndPointOnlyCollectionStrategy@ee68cd7c
Eki 02, 2012 9:41:42 AM com.springsource.insight.collection.strategies.CollectionStrategyRunner enable
INFO: Enabled Strategy com.springsource.insight.collection.strategies.PrefixExcludeCollectionStrategy@d813cb8b
09:41:42,445 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
09:41:42,447 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
09:41:42,448 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/classes/logback.xml]
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/classes/logback.xml]
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/lib/Alias-1.2.2-SNAPSHOT.jar!/logback.xml]
09:41:42,769 |-INFO in ch.qos.logback.classic.turbo.ReconfigureOnChangeFilter@15ff6c16 - Will scan for changes in file [C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\wtpwebapps\Claimer.UI\WEB-INF\classes\logback.xml] every 60 seconds. 
09:41:42,769 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Adding ReconfigureOnChangeFilter as a turbo filter
09:41:42,780 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
09:41:42,811 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
09:41:42,900 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
09:41:43,518 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
09:41:43,518 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUTWARN]
09:41:43,543 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
09:41:43,545 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - ROOT level set to OFF
09:41:43,545 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.springframework] to INFO
09:41:43,545 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.springframework]
09:41:43,551 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.compugroup] to INFO
09:41:43,551 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[com.compugroup]
09:41:43,551 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.apache.cxf] to INFO
09:41:43,551 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.apache.cxf]
09:41:43,552 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.apache.cxf.interceptor] to INFO
09:41:43,552 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.apache.cxf.interceptor]
09:41:43,552 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.

Eki 02, 2012 9:41:43 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
09:41:42,445 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
09:41:42,447 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
09:41:42,448 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/classes/logback.xml]
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/classes/logback.xml]
09:41:42,452 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/lib/Alias-1.2.2-SNAPSHOT.jar!/logback.xml]
09:41:42,769 |-INFO in ch.qos.logback.classic.turbo.ReconfigureOnChangeFilter@15ff6c16 - Will scan for changes in file [C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\wtpwebapps\Claimer.UI\WEB-INF\classes\logback.xml] every 60 seconds. 
09:41:42,769 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Adding ReconfigureOnChangeFilter as a turbo filter
09:41:42,780 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
09:41:42,811 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
09:41:42,900 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
09:41:43,518 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
09:41:43,518 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUTWARN]
09:41:43,543 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
09:41:43,545 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - ROOT level set to OFF
09:41:43,545 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.springframework] to INFO
09:41:43,545 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.springframework]
09:41:43,551 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.compugroup] to INFO
09:41:43,551 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[com.compugroup]
09:41:43,551 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.apache.cxf] to INFO
09:41:43,551 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.apache.cxf]
09:41:43,552 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.apache.cxf.interceptor] to INFO
09:41:43,552 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[org.apache.cxf.interceptor]
09:41:43,552 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.

09:41:43.596 INFO  [localhost-startStop-1] org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
09:41:43.875 INFO  [localhost-startStop-1] org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Tue Oct 02 09:41:43 EEST 2012]; root of context hierarchy
09:41:44.294 INFO  [localhost-startStop-1] org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from URL [file:/C:/Users/osahin/Downloads/springsource/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/wtpwebapps/Claimer.UI/WEB-INF/classes/web-appl-context.xml]
09:41:44.538 INFO  [localhost-startStop-1] org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [META-INF/cxf/cxf.xml]
09:41:44.649 INFO  [localhost-startStop-1] org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [ws-anadolu-context.xml]
09:41:49.164 INFO  [localhost-startStop-1] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@63d63048: defining beans [cxf,org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor,org.apache.cxf.bus.spring.Jsr250BeanPostProcessor,org.apache.cxf.bus.spring.BusExtensionPostProcessor,serviceClient,*.http-conduit,user.proxyFactory,user,saglikKurumu.proxyFactory,saglikKurumu,odemeKurumu.proxyFactory,odemeKurumu,webinterface.proxyFactory,webinterface,infrastructure.proxyFactory,infrastructure,rawObject.proxyFactory,rawObject,propertyConfigurer]; root of factory hierarchy
09:41:51.742 INFO  [localhost-startStop-1] org.apache.cxf.service.factory.ReflectionServiceFactoryBean - Creating Service {http://wsdl.hastane.claimer.compugroup.com}ClaimerHastaneWsdlService from class com.compugroup.claimer.hastane.wsdl.ClaimerHastaneWsdl
09:41:56.478 INFO  [localhost-startStop-1] org.apache.cxf.service.factory.ReflectionServiceFactoryBean - Creating Service {http://sigortaserver.claimer.compugroup.com}ClaimerSigortaServerWsdlService from class com.compugroup.claimer.sigortaserver.ClaimerSigortaServerWsdl
09:41:59.023 INFO  [localhost-startStop-1] org.apache.cxf.service.factory.ReflectionServiceFactoryBean - Creating Service {http://webinterface.claimer.compugroup.com}WebInterfaceWsdlService from class com.compugroup.claimer.webinterface.WebInterfaceWsdl
09:42:00.939 INFO  [localhost-startStop-1] org.apache.cxf.service.factory.ReflectionServiceFactoryBean - Creating Service {http://infrastructure.claimer.compugroup.com}UserServiceService from class com.compugroup.claimer.infrastructure.service.UserService
09:42:02.732 INFO  [localhost-startStop-1] org.apache.cxf.service.factory.ReflectionServiceFactoryBean - Creating Service {http://infrastructure.claimer.compugroup.com}ClaimerInfrastructureServiceService from class com.compugroup.claimer.infrastructure.wsdl.ClaimerInfrastructureService
09:42:05.754 INFO  [localhost-startStop-1] org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 22144 ms
Eki 02, 2012 9:42:06 AM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.0.6 (FCS FCS) for context '/Claimer.UI'
Eki 02, 2012 9:42:09 AM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.NotNull, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class org.hibernate.validator.constraints.NotEmpty, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.Size, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.Pattern, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.Min, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.Max, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.AssertTrue, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class javax.validation.constraints.AssertFalse, but that class is not presented
Eki 02, 2012 9:42:14 AM org.richfaces.cache.CacheManager getCacheFactory
INFO: Selected fallback cache factory
Eki 02, 2012 9:42:14 AM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance using parameters: {com.sun.faces.numberOfLogicalViews=1, com.sun.faces.expressionFactory=com.sun.el.ExpressionFactoryImpl, sigorta=anadolu, com.sun.faces.autoCompleteOffOnViewState=true, org.ajax4jsf.VIEW_HANDLERS=com.sun.facelets.FaceletViewHandler, ws.internal.rootPublishedUrl=http://localhost:9000, com.sun.faces.externalizeJavaScript=false, javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE=true, javax.faces.PROJECT_STAGE=Development, com.sun.faces.preferXHTML=false, javax.faces.FACELETS_SKIP_COMMENTS=false, javax.servlet.jsp.jstl.fmt.localizationContext=resources.application, contextConfigLocation=classpath*:web-appl-context.xml, javax.faces.STATE_SAVING_METHOD=server, com.sun.faces.enableRestoreView11Compatibility=true, com.sun.faces.numberOfViewsInSession=1}
Eki 02, 2012 9:42:14 AM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance of 512 items capacity
Eki 02, 2012 9:42:14 AM org.richfaces.application.InitializationListener onStart
INFO: RichFaces Core Implementation by JBoss, a division of Red Hat, Inc., version v.4.0.0.Final SVN r.22269
Eki 02, 2012 9:42:14 AM com.sun.faces.config.ConfigureListener$WebConfigResourceMonitor$Monitor <init>
INFO: Monitoring jndi:/localhost/Claimer.UI/WEB-INF/faces-config.xml for modifications
Eki 02, 2012 9:42:14 AM com.sun.faces.lifecycle.ELResolverInitPhaseListener populateFacesELResolverForJsp
INFO: JSF1027: [null] The ELResolvers for JSF were not registered with the JSP container.
09:42:15.764 INFO  [localhost-startStop-1] org.apache.cxf.interceptor.LoggingOutInterceptor - Outbound Message

Eki 02, 2012 9:42:18 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\conf\Catalina\localhost\insight.xml
Eki 02, 2012 9:42:18 AM com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader start
INFO: Context [localhost|insight] will not be woven
Eki 02, 2012 9:42:19 AM com.springsource.insight.InsightAgentPluginsHelper defaultInsightLogs
INFO: Using default insight.logs=C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\insight\logs
Eki 02, 2012 9:42:20 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Eki 02, 2012 9:42:50 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'Spring MVC Dispatcher Servlet'
Eki 02, 2012 9:42:57 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\webapps\manager
Eki 02, 2012 9:42:57 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\osahin\Downloads\springsource\vfabric-tc-server-developer-2.7.1.RELEASE\spring-insight-instance\webapps\ROOT
Eki 02, 2012 9:42:57 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Eki 02, 2012 9:42:57 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 106463 ms 
```

# objective-c - Obietive-C，在运行时找到全局变量？

> ID：12689449
> 
> 赞同：0
> 
> 时间：2012-10-02T11:27:31.983
> 
> 标签：objective-c

我很想知道是否有任何方法可以在运行时找到全局变量，就像 NSClassFromString 一样。变量 BOOL 是在静态库中定义的，我通过使用“nm”找到了名称，该名称给出了以下输出：“0001924d b _gStartSessionCalled”。在 XCode 中调试时，我可以添加一个表达式“gStartSessionCalled”，并在应用程序运行时查看值的变化。

我想要做的是找到 gStartSessionCalled 的值并更改该值。我知道这样做有点奇怪，但请忽略原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:40:46.720

全局变量不是 Objective-C 特定的构造。它是纯 C 语言，您可以在知道其名称时通过声明它来访问每个全局变量

```
extern <type> <name>; 
```

例如在你的情况下

```
extern BOOL gStartSessionCalled;
…
gStartSessionCalled = YES; 
```

**更新：**

如果您在编译时不知道变量的名称，您仍然可以在运行时使用类似`dlsym`. 我不知道它在 MacOS 上是否与在 Linux 上相同，但会有类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:11:16.700

nm 输出中的小写字母“b”

```
0001924d b _gStartSessionCalled 
```

表示这`gStartSessionCalled`是一个本地（非外部）符号。例如，它可以定义为

```
static BOOL gStartSessionCalled; 
```

在你的图书馆。据我所知，您无法从定义它们的目标文件外部访问本地符号。

调试器可以使用符号表来查找地址并显示变量，但链接器拒绝链接来自不同目标文件的本地符号。

# tsql - T SQL：如何从时间类型中获取所有分钟

> ID：12689456
> 
> 赞同：9
> 
> 时间：2012-10-02T11:27:45.663
> 
> 标签：tsql

我有以下代码，我想从时间类型中获取所有分钟。

```
declare @time time
set @time = '01:30'

declare @minutes int

--select @minutes = convert time to minutes here

select @minutes -- @minutes == 90 
```

请帮忙。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T11:29:09.003

`@time`和午夜的区别;

```
set @minutes = datediff(minute, '00:00:00', @time) 
```

# c# - C#在离开表单时保存确认消息

> ID：12689457
> 
> 赞同：0
> 
> 时间：2012-10-02T11:27:49.520
> 
> 标签：c#, winforms

在离开（不关闭 - 将焦点设置到另一个表单）非模态表单时显示保存确认消息的最佳方式是什么？

用户可以选择

*   是（保存更改并将焦点设置到 targetform）
*   否（回滚并将焦点设置到目标表单）
*   取消（保持活动形式 - 取消将焦点设置为目标形式）

我找不到阻止将焦点设置到另一个表单的解决方案。类似于关闭事件，我可以在其中使用 FormClosingEventArgs.Cancel 属性。

在我的情况下，使用模态形式是不可接受的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:52:18.043

最好的方法是覆盖 OnLostFocus 事件。这是代码：

```
protected override void OnLostFocus(EventArgs e) { 
    base.OnLostFocus(e); 
    this.Focus(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:37:40.563

首先，您可以使用该`Deactivated`事件来检测表单何时失去焦点。然后，如果用户想留在失去焦点的表单中，您可以调用该`BringToFront`方法再次将表单设置为活动状态。

您不能阻止用户激活另一个表单，但您可以尝试（使用上述方法）将激活更改回当前表单。

# mysql - 如何在mysql中索引innodb文本？

> ID：12689460
> 
> 赞同：0
> 
> 时间：2012-10-02T11:28:08.273
> 
> 标签：mysql, hash, indexing, innodb

我正在尝试索引 mysql innodb-table 中的文本字段，似乎哈希索引是这样的方式：

```
CREATE INDEX teksti_index USING HASH ON maili_teksti(teksti(100)); 
```

那么，这是否意味着 mysql 获取字段的前 100 个字符并计算散列（然后索引散列）。如果我将数字 100 更改为 200，索引的大小是否相同？

而且......如果我想优化这种命令，这是一个正确的方法：

```
SELECT count(*) from teksti where teksti='random text'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:26:36.607

在处理`CHAR`、`VARCHAR`和`TEXT`列时（正如您正在处理的那样`TEXT`），您在创建索引时分配的前缀长度将使用*前 X 个字符*创建一个散列- 正是您的想法（[来源](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)）。

在处理标准索引时，更改索引数据的大小也应该改变索引的大小（即 - 添加字符应该增加索引；删除应该减少）。在处理 HASH 索引时，这是一个猜测，因为我找不到有关它的特定文档，我会假设由于散列算法的性质，它*不会*增加（至少，不会增加太多）。

HASH-indexes 仅适用于`=`and`<=>`运算符，因此您的示例用法`teksti='random text'`非常适合这种类型的索引（[source](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)）。如果您需要使用其他运算符，例如`LIKE`, `<`or`>`运算符，您可能不得不考虑改用`B-TREE`索引。

作为一个完整的替代选项，您可以查看[`FULLTEXT`](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)index.html。这提供了大量的匹配功能，尽管它相当健壮并且可能*太多*。页面上的文档[`Full-Text Search Functions`](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)指出`FULLTEXT`只能与 MyISAM 一起使用，*但是*，`Section 14.2.4.12.3`在[`InnoDB Table and Index`](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html)文档页面上涵盖`FULLTEXT`了 InnoDB 的索引 - 因此，这可能可用也可能不可用 =P。

# c# - 在 C# MVC 中循环遍历 XML 的问题

> ID：12689461
> 
> 赞同：0
> 
> 时间：2012-10-02T11:28:09.410
> 
> 标签：c#, xml, linq, linq-to-xml

您好我正在尝试将 XML 文件解析为联系人列表，但遇到问题：

```
 public List<ContactModel> GetContacts()
    {

        var doc = XDocument.Load(HttpContext.Current
                                            .Server
                                            .MapPath(@"..\App_Data\Contacts.xml"));

        var result = from items in doc.Descendants("Directory")
                     select new ContactModel()
                                {
                                    Id = items.Attribute("ID").Value,
                                    FirstName = items.Attribute("FirstName").Value,
                                    LastName = items.Attribute("LastName").Value,
                                    Telephone = items.Attribute("Telephone").Value,
                                    Email = items.Attribute("Email").Value,
                                    Room = items.Attribute("Room").Value,
                                    Building = items.Attribute("Building").Value,
                                    Location = items.Attribute("Location").Value
                                };

        List<ContactModel> contactList = new List<ContactModel>();
        foreach (var item in result)
        {
            contactList.Add(item);
        }

        return contactList;
    } 
```

尝试循环时出现空异常，我做错了什么？

这是我的 XML

```
<?xml version="1.0" standalone="yes"?>
<ContactDirectory>
  <Directory>
    <ID>1</ID>
    <FirstName>Peter</FirstName>
    <LastName>Sutt</LastName>
    <Telephone>777888</Telephone>
    <Email>pett@gmail.com</Email>
    <Room>3.44</Room>
    <Building>Westside</Building>
    <Location>Leeds</Location>
  </Directory>
  <Directory>
    <ID>2</ID>
    <FirstName>Fred</FirstName>
    <LastName>West</LastName>
    <Telephone>1234</Telephone>
    <Email>fred@west.com</Email>
    <Room>1.23</Room>
    <Building>Cromwell St</Building>
    <Location>Gloster</Location>
  </Directory>
  <Directory>
</ContactDirectory> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:46:35.063

比布尔，他们`Element`不是`Attribute`

```
var contactList = (from items in doc.Descendants("Directory")
                select new ContactModel()
                {
                    Id = items.Element("ID").Value,
                    FirstName = items.Element("FirstName").Value,
                    LastName = items.Element("LastName").Value,
                    Telephone = items.Element("Telephone").Value,
                    Email = items.Element("Email").Value,
                    Room = items.Element("Room").Value,
                    Building = items.Element("Building").Value,
                    Location = items.Element("Location").Value
                })
                .ToList(); 
```

PS：您无需遍历您`result`的列表即可。您可以使用`ToList()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:32:03.480

您的一项或多项属性似乎缺失。`items.Attribute(...)`返回`null`，并调用`Value`它会导致 NPE ^*。

由于执行被*延迟*，调用不会发生，直到您开始循环遍历`result`.

要找到导致问题的属性，请删除对`Attribute(...)`except 的所有调用`ID`，验证崩溃没有发生，然后开始一一添加属性，直到崩溃再次出现。

* * *

^*在看到您添加到问题中的 XML 后，似乎*所有*属性都丢失了！这是讨论差异[的简短文章的链接。](http://www.ibm.com/developerworks/xml/library/x-eleatt/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:49:03.903

Linq to XML API 具有**隐式转换**，以帮助处理从 .Value 返回的可能的空引用。尝试类似的东西`(string) items.Attribute("Room")`。

# asp.net - 启用并强制实施 SSL，但允许独立的 ASPX 页面使用 SSL

> ID：12689462
> 
> 赞同：3
> 
> 时间：2012-10-02T11:28:17.240
> 
> 标签：asp.net, ssl, dotnetnuke

我有一个设置了启用 SSL 和强制 SSL 的 DotNetNuke 网站，以允许我们同时拥有不安全的页面和安全的页面，例如购物车。

但是，我有一个独立的 ASPX 页面（一个 PayPal IPN 侦听器），我希望能够通过它访问`https://`

目前，当通过 SSL 向 IPN 侦听器发出请求时，会提供一个包含 javascript 重定向代码的 HTML 页面以重定向到`http://`. 由于 PayPal 的请求不响应 javascript 重定向，因此永远不会请求正确的页面。

是否可以为此文件启用 SSL？

**编辑：添加了有关 javascript 重定向的信息。另外，我尝试创建一个虚拟目录，但这不允许我在我的 aspx 文件中使用 DNN 应用程序代码。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:58:22.583

什么版本的 DNN？从技术上讲，我认为重定向不应该影响实际的物理 .aspx 页面。

但是，无论您是否可以将该文件放在单独的文件夹中，然后将其设为虚拟目录，这都会阻止 DNN 处理请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:35:53.147

你可以做两件简单的事情来克服这个问题：

*   确保您的页面继承自`DotNetNuke.Framework.PageBase`
*   在 aspx 页面中，实现一个 PreRender 方法，该方法将检查请求协议并将响应代码设置为 301

如果您需要更多帮助，请告诉我

-- 更新 -- 在 root 中找到 siteUrls.config 并尝试在之前添加以下内容`</Rules></RewriterConfig>`：

```
<重写器规则>
            <查找>.*PageName.aspx(.*)
            <发送至>~/PageName.aspx$1
        </RewriterRule>

```

# python - ImportError：无法导入名称 urandom Eclipse/PyDev

> ID：12689463
> 
> 赞同：1
> 
> 时间：2012-10-02T11:28:17.550
> 
> 标签：python, eclipse, pydev

我知道这个问题已经被问过很多次了，但我无法自己解决。所以请多多包涵。

```
Traceback (most recent call last):
      File "/Users/someone/Desktop/eclipse/plugins/org.python.pydev_2.6.0.2012062818/pysrc/pydevd.py", line 3, in <module>
        import pydev_imports
      File "/Users/someone/Desktop/eclipse/plugins/org.python.pydev_2.6.0.2012062818/pysrc/pydev_imports.py", line 14, in <module>
        from _pydev_SimpleXMLRPCServer import SimpleXMLRPCServer
      File "/Users/someone/Desktop/eclipse/plugins/org.python.pydev_2.6.0.2012062818/pysrc/_pydev_SimpleXMLRPCServer.py", line 116, in <module>
        import BaseHTTPServer
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/BaseHTTPServer.py", line 81, in <module>
        import mimetools
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/mimetools.py", line 6, in <module>
        import tempfile
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tempfile.py", line 34, in <module>
        from random import Random as _Random
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 47, in <module>
        from os import urandom as _urandom
    ImportError: cannot import name urandom 
```

echo $PATH 给了我这个。`/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin`

我的目标是设置一个 IDE，它可以为我提供代码完成和断点调试（如 java，以便我可以逐行调试它）。我在这里阅读了很多帖子，但仍然没有找到解决方案。谁能指出正确的方向？提前致谢。

编辑：我将 python 升级到 2.7.3，因为我无法在 eclipse 首选项中选择解释器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:22:18.713

看看这个[链接](http://pydev.org/manual_101_interpreter.html)。您需要做的就是正确配置您的解释器。
如果它没有帮助，你应该看看[另一个](https://bugs.launchpad.net/ubuntu/+source/python-defaults/+bug/989856)（第二个是关于`urandom`模块的，而第一个是关于`pydev`配置的）。

# postgresql - 在 Postgres SQL Server 8.4 中，如何获取每个表的请求次数？

> ID：12689466
> 
> 赞同：1
> 
> 时间：2012-10-02T11:28:34.943
> 
> 标签：postgresql

在 Postgres SQL Server 8.4 中如何获取每个表的请求时间？

例如，我想要的是这样的

```
 Table_Name      request_time
   person          50
   department      20 
```

请给我一些指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:21:18.377

您想将[pg_stat_statements](http://www.postgresql.org/docs/current/static/pgstatstatements.html)和/或[csv 格式的日志记录](http://www.postgresql.org/docs/current/static/runtime-config-logging.html#RUNTIME-CONFIG-LOGGING-CSVLOG)与`log_statement = all`或一起使用`log_min_duration_statement = 0`。

无法追溯地以可查询的形式获取语句统计信息。[pgFouine](http://pgfouine.projects.postgresql.org/)可以帮助分析日志，但前提是您已将 PostgreSQL 配置为生成详细日志。

您可能还想了解[统计信息收集器](http://www.postgresql.org/docs/current/static/monitoring-stats.html)和[相关视图](http://www.postgresql.org/docs/current/static/monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE)，这将有助于提供诸如表和索引利用率数据之类的内容。

# mysql - 无法在 Ubuntu 12.04 上安装 Node.js 插件

> ID：12689467
> 
> 赞同：1
> 
> 时间：2012-10-02T11:28:36.970
> 
> 标签：mysql, node.js

我已经为 Node.js 安装了[这个](http://nodejsdb.org/db-mysql/)名为“db-mysql”的数据库插件，并且我已经完成了网站上提到的所有步骤而没有出现错误，这一定意味着插件已安装。但是当我在 Apache 服务器中运行我的 .js 文件（如下所示）时，我得到了这个错误。

```
Error: Cannot find module 'db-mysql'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/var/www/server.js:4:13)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10) 
```

这是我正在运行的示例代码。

```
var http = require("http");
var mysql = require("db-mysql");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");

//Database Connectivity//
  new mysql.Database({
    hostname: 'localhost',
    user: 'root',
    password: '',
    database: 'test'
}).on('error', function(error) {
    console.log('ERROR: ' + error);
}).on('ready', function(server) {
    console.log('Connected to ' + server.hostname + ' (' + server.version + ')');
}).connect();
///////////////////////

  response.end();
}).listen(8889); 
```

我在安装过程中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:45:11.287

如果您像示例中一样安装模块

```
npm install db-mysql 
```

节点会在这里搜索

```
./project_root/node_modules/db-mysql 
```

因此，请确保此路径在您的情况下是正确的。其他选项是使用 -g 标志全局安装它

```
npm install db-mysql -g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:08:35.770

只需创建一个符号链接，指向您的模块的物理安装位置 将此链接命名为 node_modules 并将其放在项目的文件夹中

# security - Cakephp 2.2 和 SWFUploader 黑洞

> ID：12689470
> 
> 赞同：0
> 
> 时间：2012-10-02T11:28:56.450
> 
> 标签：security, cakephp, cakephp-2.0, uploadify, swfupload

我在我的应用程序中有一个典型的文件上传方法（在插件内），我正在使用这个使用 SFWUpload 的 Uploadify。我将它用于一个用 CakePHP 1.3 编写的应用程序（它工作正常）。现在我将应用程序更新到 CakePHP 2.2.2。问题是，当我尝试上传文件时，我遇到了安全黑洞错误（400 错误）。

*   我在 beforeFilter() 回调中禁用了上传操作的安全性，但没有成功。

> ```
> if($this->request->action == 'add_profile_picture'){
> 
>    $this->Security->enabled = false;
> 
> } 
> ```

*   我还禁用了该功能的身份验证，因此我在上传有关会话和 Flash 的传递时没有任何问题...

> ```
> ...
>     $this->Auth->allow('add_profile_picture');
> ... 
> ```

如果有人有类似的问题并解决它，请给我一两个提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:06:18.237

据我所知，“启用”实际上并不是安全组件的属性。您可以改为使用 validatePost 属性来实现相同的目的。

```
public function beforeFilter() {
        if($this->request->action == 'your_action_name'){
           $this->Security->validatePost = false;
        }
        parent::beforeFilter();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:05:24.523

这个 Flash 上传器是否使用不是由 CakePHP FormHelper 生成的隐藏字段？如果是，您需要在安全组件中将这些字段列入白名单以使其通过。

# c# - 在不同的域中异步执行

> ID：12689472
> 
> 赞同：1
> 
> 时间：2012-10-02T11:29:05.360
> 
> 标签：c#, .net, asynchronous, appdomain

如何在不同的域中异步执行代码？

例如，我有一个方法：

```
public void DoSomething()
    {
        // do something
    } 
```

我想在 10 个不同的域中执行它，如下所示：

```
for (int i = 0; i < 10; i++)
        {
            AppDomain domain = AppDomain.CreateDomain("NewDomain - " + i);
            domain.ExecuteAsync(DoSomething);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:19:41.627

我使用这种方法解决了我的任务：

```
for (int i = 0; i < options.NumberOfThreads; i++)
            {
                tasks[i] = Task.Factory.StartNew(() =>
                    {
                        using (Isolated<TesterInvoker> isolated = new Isolated<TesterInvoker>())
                        {
                            isolated.Value.Invoke();
                        }
                    });                 
            }

private class TesterInvoker : MarshalByRefObject
    {
        public void Invoke()
        {
            // do something
        }
    }

    private class Isolated<T> : IDisposable 
        where T : MarshalByRefObject
    {
        private AppDomain _domain;
        private T _value;

        public Isolated()
        {
            Type type = typeof(T);

            _domain = AppDomain.CreateDomain("Isolated:" + GetHashCode(),
               null, AppDomain.CurrentDomain.SetupInformation);

            _value = (T)_domain.CreateInstanceAndUnwrap(type.Assembly.FullName, type.FullName);
        }

        public T Value
        {
            get
            {
                return _value;
            }
        }

        public void Dispose()
        {
            if (_domain != null)
            {
                AppDomain.Unload(_domain);

                _domain = null;
            }
        }
    } 
```

# android - Android：如何在 GLSurfaceView 上显示 admob 广告

> ID：12689484
> 
> 赞同：3
> 
> 时间：2012-10-02T11:30:22.560
> 
> 标签：android, admob, glsurfaceview

我目前能够获得 admob 广告`ui view`（在单独的测试项目中），但我想在`GLSurfaceView`. 我试图在`onCreate( )`活动方法中加载广告，并且在我的屏幕的当前方法中（所有渲染都完成）我调用了

MyGameActivity.mAdView.bringToFront(); //认为它会将广告带到所有游戏对象的前面。

现在在运行项目时，我可以在 logcat 窗口中看到该消息，`Recieved ad url "big url"` 但在屏幕上看不到广告。在我的游戏中，只有一项活动和许多游戏画面。请帮我弄清楚如何在我的游戏屏幕上显示广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:11:16.983

你应该修改你的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >       
    <RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout1"
        android:tag="trueLayout"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        >       
    </RelativeLayout>
</LinearLayout> 
```

这是我的代码，不言自明。：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        

    setContentView(R.layout.main);

    LinearLayout layoutMain = (LinearLayout) findViewById(R.id.layoutMain);

    // Create the adView
    // Please replace MY_BANNER_UNIT_ID with your AdMob Publisher ID
    adView = new AdView(this, AdSize.BANNER, "YourPersonalID#"); 

    layoutMain.addView(adView);

    // Initiate a generic request to load it with an ad
    AdRequest request = new AdRequest();
    request.setTesting(true);

    adView.loadAd(request);     

    RelativeLayout layout1 = (RelativeLayout) findViewById(R.id.layout1);
    layout1.setOnTouchListener(this);

    mTestHarness = new GLSurfaceView(this);
    mTestHarness.setEGLConfigChooser(false);
    mTestHarness.setRenderer(this);
        mTestHarness.setRenderMode(GLSurfaceView.RENDERMODE_CONTINUOUSLY);    

    layout1.addView(mTestHarness);
} 
```

正确完成此操作后，您将从 google play 教程中获得与 BannerEssentials 教程应用程序等效的应用程序，但使用 GLSurfaceView 代替。

# java - 在我的 sql 中为单个数据库设置密码

> ID：12689486
> 
> 赞同：-3
> 
> 时间：2012-10-02T11:30:32.897
> 
> 标签：java, php, mysql

我想为一个数据库（假设为“DB1”）设置密码“1234”，为另一个数据库（“DB2”）设置密码“4567”。这在 mysql 或 xaamp 中是否可行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:32:31.317

您可以在 phpmyadmin 或 mysql 控制台中创建具有自己权限并且可以访问某些数据库的用户。

```
CREATE USER user_specification
    [, user_specification] ...

user_specification:
    user [IDENTIFIED BY [PASSWORD] 'password'] 
```

另请参阅[mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

还有大命令：

```
CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'mypass';
GRANT ALL ON db1.* TO 'jeffrey'@'localhost';
GRANT SELECT ON db2.invoice TO 'jeffrey'@'localhost'; 
```

[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:33:54.803

您可以在 php myadmin 中执行此操作

![在此处输入图像描述](../Images/4e5c7bc608d921c63b24cec644e94c9a.png)

点击检查权限

![在此处输入图像描述](../Images/82c4f3474f86bdb98de0c0ca67f0168d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:35:14.357

是的，这是可能的。在`PHPMyAdmin`你有这样的选择; 对于每个数据库，您可以提供自己的密码。

# .net - 当调用堆栈中存在某个方法时命中断点

> ID：12689489
> 
> 赞同：0
> 
> 时间：2012-10-02T11:31:03.183
> 
> 标签：.net, debugging, breakpoints, visual-studio-debugging

当调用堆栈中有某个方法时，我想要一个断点。我可以用 Visual Studio 调试器以某种方式做到这一点吗？

我想确保当从某些方法调用代码时会命中我的断点，而不是其他方法。

例如我们有两个调用栈：

```
DBReadRecord()
GetRecord()
ActivityMonitor() 
```

和

```
DBReadRecord()
GetRecord()
UserButtonDown() 
```

我希望仅在从方法调用断点而不是从方法`DBReadRecord`调用时才命中断点。`UserButtonDown()``ActivityMonitor()`

我正在使用 Visual Studio 10 和 .Net 3.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:57:09.023

您还可以进行一些基于反射的黑客攻击（例如，Express 版本似乎没有高级断点功能）：

```
 void Foo()
    {
        Foo2();
    }
    void Foo2()
    {
        var trace = new StackTrace();
        if (trace.GetFrames().Reverse().FirstOrDefault(f => f.GetMethod().Name == "Foo") != null)
            Debugger.Break(); // it lives under System.Diagnostics namespace
    }
    void Test()
    {
        Foo2(); // doesn't break here
        Foo(); // break here
    } 
```

并使用您的特定方法：

```
Foo DBReadRecord()
{
     var trace = new StackTrace();
     if (trace.GetFrames().Reverse().FirstOrDefault(f => f.GetMethod().Name == "UserButtonDown") != null)
         Debugger.Break();
} 
```

请注意，它会极大地影响性能，因此它只是奇怪调试情况的临时解决方案。

另外，请记住，它在`Debug`配置中效果最好，我不知道在不在 StackTrace 中的方法中可能会发生什么优化，但是当优化打开时可能会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:46:22.583

**使用 Visual Studio**

转到 VS 中的断点窗口，然后单击左上角的“新建”按钮。

选择“Break at Function...”，然后在“Function”字段中输入要在其中中断的方法的全名（减去括号）。

例如，要中断 .NET 的`Application.Run`方法，请输入`System.Windows.Forms.Application.Run`.

可能有警告显示 Intellisense 找不到指定位置。这意味着当断点被命中时您可能无法看到源代码，但这对于您的目的可能仍然足够有用。

**使用调试器命令**

如果您有权访问并可以编译源代码，您还可以[`System.Diagnostics.Debugger.Launch()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)在代码运行时使用该命令以编程方式附加到调试器，或者[`Debugger.Break()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)如果您已经附加。

# javascript-events - 在我的元素上附加了 document.addEventListener

> ID：12689491
> 
> 赞同：1
> 
> 时间：2012-10-02T11:31:28.533
> 
> 标签：javascript-events

我想在我的 div 标签上附加事件侦听器，这样我就知道用户是否点击了元素。我如何在有或没有 jquery 的情况下实现这一点。

```
<div class="chart" id="circle_chart">test</div>

<script>
    document.addEventListener('touchstart', function(event) {
        alert(event.touches.length);
    }, false);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:41:21.317

```
$("#circle_chart").bind('touchstart', function(event) {...}); 
```

应该**与**jQuery 一起使用，请参阅[如何绑定“touchstart”和“点击”事件但不响应两者？](https://stackoverflow.com/questions/7018919/how-to-bind-touchstart-and-click-events-but-not-respond-to-both)有关此问题和相关问题的更多信息。

# xaml - Bing 映射可调整大小的多边形

> ID：12689492
> 
> 赞同：2
> 
> 时间：2012-10-02T11:31:37.037
> 
> 标签：xaml, windows-8, bing-maps

我正在尝试实现用户在 Bing Map 控件上绘制和细化多边形的能力。

我添加了一个形状图层，并覆盖了点击事件以绘制一个简单的多边形，这一切都完美无缺。我想进一步完善控件，以便用户可以拖放绘制多边形的任何 Location 对象以改变其形状，但我没有任何运气。

我试图添加一个 MapItemControl，绑定到我的多边形的 Locations 属性，但没有成功 - 我没有看到图钉出现在地图上，即使我的多边形渲染正确。大概 Locations 集合没有通知 UI 集合的任何更改，因此我可能必须为这些图钉维护一个单独的集合。

然而，一旦我开始这样做，我仍然需要能够拖放引脚来修改多边形。有没有人在 Windows 8 上实现了这个，可以分享一些想法，拜托？

**编辑**

现在，我的图钉在地图上显示了 Locations 集合。理想情况下，我希望将这些与多边形的 Locations 集合联系起来，但乞丐不能成为选择者。我现在只需要能够拖动别针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:34:23.583

我向多边形添加了一个拖动手柄模块，以便编辑多边形中的每个点。这是我使用的演练。

[拖动手柄模块](http://www.garzilla.net/vemaps/Bing-Maps-7-Modules-Drag-Handles.aspx)

这是针对 7.0 版的。不确定您使用的是哪个版本，但它很容易适应。

**编辑**我在 javascript/html 中做了这个。刚刚注意到您将其标记为 windows 8。好奇，您是否正在为 windows 8 手机制作银光控件？

**WPF C# 解决方案**

这是我想出的，它很容易实现，你需要做的就是把我的事件挂到你的`MapPolygon`对象上。代码背后的想法是，一旦您单击多边形，我们就会在多边形的每个顶点放置一个图钉（我们创建事件以便我们可以拖动它）。当我们拖放每个图钉时，我们会根据需要调整多边形。位置。

```
polygon.MouseDown += new MouseButtonEventHandler(polygon_MouseDownResize); 
```

还有一种退出调整大小事件的方法，我选择只按下键并使用“esc”停止编辑，但您可以通过右键单击或您选择的任何其他事件来执行此操作。您所做的只是清除`pushPinVertices`列表和重置事件变量。

```
// === Editable polygon Events ===

private bool _shapeEdit;
public MapPolygon selectedPoly { get; set; }
public List<Pushpin> pushPinVertices { get; set; }

void polygon_MouseDownResize(object sender, MouseButtonEventArgs e)
{

    if (!_shapeEdit && selectedPoly == null)
    {
        _shapeEdit = true;
        selectedPoly = sender as MapPolygon;
        pushPinVertices = new List<Pushpin>();
        int i = 0;
        foreach (Microsoft.Maps.MapControl.WPF.Location vertice in selectedPoly.Locations)
        {
            Pushpin verticeBlock = new Pushpin();
            // I use a template to place a 'vertice marker' instead of a pushpin, il provide resource below
            verticeBlock.Template = (ControlTemplate)Application.Current.Resources["PushPinTemplate"];
            verticeBlock.Content = "vertice";
            verticeBlock.Location = vertice;
            verticeBlock.MouseDown += new MouseButtonEventHandler(pin_MouseDown);
            verticeBlock.MouseUp += new MouseButtonEventHandler(pin_MouseUp);
            myMap.Children.Add(verticeBlock);
            pushPinVertices.Add(verticeBlock);
            i++;

        }
    }

}

private void myMap_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == System.Windows.Input.Key.Escape)
    {
        if (_shapeEdit && selectedPoly != null)
        {

            foreach (Pushpin p in pushPinVertices)
            {
                myMap.Children.Remove(p);
            }

            _shapeEdit = false;
            selectedPoly = null;

        }

    }
}
// Note: I needed my window to pass bing maps the keydown event
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    myMap_KeyDown(sender, e);
}

// === Editable polygon Events ===

// ==== Draggable pushpin events =====
Vector _mouseToMarker;
private bool _IsPinDragging;
public Pushpin SelectedPushpin { get; set; }

void pin_MouseUp(object sender, MouseButtonEventArgs e)
{
    LocationCollection locCol = new LocationCollection();
    foreach (Pushpin p in pushPinVertices)
    {
        locCol.Add(p.Location);

    }

    selectedPoly.Locations = locCol;
    bingMapRefresh();

    _IsPinDragging = false;
    SelectedPushpin = null;
}

void pin_MouseDown(object sender, MouseButtonEventArgs e)
{
    e.Handled = true;
    SelectedPushpin = (Pushpin)sender;
    _IsPinDragging = true;
    _mouseToMarker = Point.Subtract(
        myMap.LocationToViewportPoint(SelectedPushpin.Location),
        e.GetPosition(myMap));

}

private void myMap_MouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
    {
        if (_IsPinDragging && SelectedPushpin != null)
        {
            SelectedPushpin.Location = myMap.ViewportPointToLocation(Point.Add(e.GetPosition(myMap), _mouseToMarker));
            e.Handled = true;
        }
    }
}
// ==== Draggable pushpin events =====
// Nice little maprefresh I found online since the bingmap WPF doesnt always seem to update elements after certain event orders
private void bingMapRefresh()
{
    //myMap.UpdateLayout();
    var mapCenter = myMap.Center;
    mapCenter.Latitude += 0.00001;
    myMap.SetView(mapCenter, myMap.ZoomLevel);
} 
```

至于覆盖图钉图标的资源，我只是使用了`ImageBrush`一个制作了一个白色的小方块。请注意，您可能需要`Margin`根据标记的长度/宽度来调整属性。这是因为通常默认情况下图钉锚定在该位置上方。

```
<Application.Resources>
    <ControlTemplate x:Key="PushPinTemplate">
        <Grid>
            <Rectangle Width="10" Height="10" Margin="0 35 0 0">
                <Rectangle.Fill>
                    <ImageBrush ImageSource="pack://application:,,,/Images/DragIcon.gif"/>
                </Rectangle.Fill>
            </Rectangle>
        </Grid>
    </ControlTemplate>
</Application.Resources> 
```

# android - 如何判断activity是否已经被通知区域覆盖？

> ID：12689497
> 
> 赞同：15
> 
> 时间：2012-10-02T11:32:14.680
> 
> 标签：android, android-notification-bar, android-statusbar

通常，当它开始被遮盖或隐藏时，Android 会调用`onPause`您，然后是当它不再显示时。在我的游戏中，我在 中暂停游戏，这样用户在寻找其他地方时不会输掉游戏。`Activity``onStop``onPause`

但是，当用户向下拖动通知栏时，它会覆盖 my `Activity`，但既不调用`onPause`也不`onStop`调用。文档中似乎没有提到这一点。游戏在后台滴答作响，没有人看它。发生这种情况时，是否有其他方法可以告诉我 `Activity`已被遮挡，以便我可以在用户输掉之前暂停游戏？我在 Android 开发者网站上找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-05T10:32:22.750

的应该服务于所需的目的`onWindowFocusChanged(boolean hasFocus)`。`Activity`它`false`在通知区域被向下拖动时调用，当区域被向上拖动时调用`true`。相应的[Android 文档](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged(boolean))指出，此方法*“是该活动是否对用户可见的最佳指标”*。它还明确指出，当显示*“状态栏通知面板”*时会触发回调。

需要注意的是，在其他情况下也会调用此方法。一个很好的例子是`AlertDialog`. `onWindowFocusChanged`甚至在活动本身显示`AlertDialog`. 这可能需要考虑，具体取决于您的游戏是否使用 AlertDialogs 或其他导致焦点更改的东西。

在与此问题中描述的场景类似的场景中，我们`onWindowFocusChanged`成功地使用了该方法，例如在装有 Android 4.4 的 Nexus 5 或装有 Android 4.1 的 Sony Xperia Tablet 上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T11:41:45.917

由于[StatusBarManager](http://www.androidjavadoc.com/1.0_r1_src/android/app/StatusBarManager.html)不是官方 API 的一部分，我发现不太可能有检测它的方法。即使使用反射，状态栏类似乎都没有监听器的钩子。

如果可行，您可以[停用 statusbar](https://stackoverflow.com/questions/5431365/how-to-hide-status-bar-in-android)。否则，我认为你不走运:(

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-07T17:38:15.390

与状态栏交互有两种情况：

*   **案例1：**如果你的activity已经隐藏了状态栏，并且用户在没有显示通知的情况下拉下状态栏区域：这可以通过注册`OnSystemUiVisibilityChangeListener`监听器来获得系统UI可见性变化的通知来处理

```
 boolean mStatusBarShown;
    View decorView = getWindow().getDecorView();
    decorView.setOnSystemUiVisibilityChangeListener
            (new View.OnSystemUiVisibilityChangeListener() {
                @Override
                public void onSystemUiVisibilityChange(int visibility) {
                    // Note that system bars will only be "visible" if none of the
                    // LOW_PROFILE, HIDE_NAVIGATION, or FULLSCREEN flags are set.
                    if ((visibility & View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {
                        // TODO: The system bars are visible. Make any desired
                        // adjustments to your UI, such as showing the action bar or
                        // other navigational controls.
                        mStatusBarShown = true;

                    } else {
                        // TODO: The system bars are NOT visible. Make any desired
                        // adjustments to your UI, such as hiding the action bar or
                        // other navigational controls.
                        mStatusBarShown = false;

                    }
                }
            }); 
```

*   **情况2：**如果状态栏已经显示给用户，用户拉下显示通知区域；要检测到这一点，您需要`onWindowFocusChanged(boolean hasFocus)`在活动中进行覆盖，其中`hasFocus`参数值将是“假”，以防用户拉下状态栏，以及当用户再次向上推状态栏时；然后`onWindowFocusChanged`将再次调用，但这次`hasFocus`将是`true`

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        // handle when the user pull down the notification bar where
        // (hasFocus will ='false') & if the user pushed the
        // notification bar back to the top, then (hasFocus will ='true')
        if (!hasFocus) {
            Log.i("Tag", "Notification bar is pulled down");
        } else {
            Log.i("Tag", "Notification bar is pushed up");
        }
        super.onWindowFocusChanged(hasFocus);

    } 
```

检查[此](https://stackoverflow.com/questions/11520465/android-listener-on-the-status-bar-notification/50662025#50662025)链接以获取更多信息。

# flyway - Flyway-1.7：处理分支的解决方法？（Flyway 问题 138）

> ID：12689499
> 
> 赞同：0
> 
> 时间：2012-10-02T11:32:18.970
> 
> 标签：flyway

[Flyway](http://code.google.com/p/flyway/)是一个非常好的自动化数据库更新（也称为迁移）的工具。但是，从 1.7 版开始，它依赖于完全线性的迁移序列。如果您有一个生产系统，当您已经在开发新东西时，您必须为其提供修复程序，那么这个假设将立即无效。常见问题解答[正确地](http://code.google.com/p/flyway/wiki/FAQ#What_is_the_best_strategy_for_dealing_with_hot_fixes?)认为这对生产系统本身来说不是问题，但是如果您已经在开发分支上拥有开发和/或 QA 系统，则需要从带外生产版本的修复程序中运行迁移.

允许此问题的解决方案正在等待[Issue 138](http://code.google.com/p/flyway/issues/detail?id=138)，但尚未完成。因为这几乎是一个致命的问题：如果我现在想使用它，有什么聪明的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:23:47.090

我推荐的方法（在持续交付/部署中变得几乎必不可少）环境是使用功能切换和从 HEAD 发布，而不是使用功能或发布分支。然后将其与向后兼容的迁移相结合，以完全缓解此问题。

如果由于某种原因这不是您的选择，您不必等待很长时间。Flyway 1.8（将包括对 138 的修复）即将推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:27:37.940

自 Flyway 2.0 版以来，该问题已过时：如果您设置[outOfOrder](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html#setOutOfOrder%28boolean%29)标志，则 flyway 还将执行尚未应用的早期版本号的迁移。但是，您需要确保可以按任何顺序将此类带外迁移应用于以后的迁移，否则您将遇到严重的麻烦。

使用 Flyway-1.7，您可以进行以下解决方法。如果您有开发和生产分支，您可以拥有单独的 flyway 实例，包括用于生产和开发分支的单独元数据表（例如 SCHEMA_HISTORY 和 SCHEMA_HISTORY_DEV）。在生产服务器上只有 SCHEMA_HISTORY 并且您照常工作；对于您拥有两者的开发服务器，每次运行 flyway 时，您首先使用 SCHEMA_HISTORY 在生产分支 sqls 上运行它，然后在使用 SCHEMA_HISTORY_DEV 的开发分支 sqls 上运行它。

当您切换分支时，您必须将 SCHEMA_HISTORY_DEV 合并到 SCHEMA_HISTORY。（您需要排除初始修订并重置 SCHEMA_HISTORY 上的 CURRENT_VERSION。）当 flyway-1.8 出现时，您执行此合并并将 SCHEMA_HISTORY_DEV 丢弃。

# android - Actionbarsherlock+android-support-v4-r6-googlemaps+滑动菜单

> ID：12689504
> 
> 赞同：1
> 
> 时间：2012-10-02T11:33:02.277
> 
> 标签：android, menu, actionbarsherlock, dalvik, sliding

我正在尝试将 Jeremy Feinstein 的滑动菜单库与 actionbarshelock 结合起来。问题是 - 为了在片段中显示地图，我使用了 android-support-v4-r6-googlemaps 这给我带来了很多问题。滑动库依赖于 actionbarshelock 库，其中 android-support-v4.jar 被替换为 android-support-v4-r6-googlemaps 以便在片段中显示地图（如此处所述：[http://blog. xavirigau.com/?p=39](http://blog.xavirigau.com/?p=39)）。

将滑动库添加到我的项目会引发此错误：Conversion to Dalvik format failed with error 1，我发现它与类似的 jar 文件有关。我想它必须对我修改的 jar 和 v13 做一些事情，如下图所示：http: [//i.imgur.com/NSAhN.png](http://i.imgur.com/NSAhN.png) 我似乎无法找到如何删除多余的 jar。帮助任何人？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:49:29.823

ActionBarSherlock 附带了支持包的 jar，这个其他库也可以正常工作。您可以尝试组合这些库以使它们一起工作。你有两者的来源，所以它不应该太难。

# xcode - 自带有 Xcode 4.5 的 iOS 5.0 以来，崩溃跟踪上不再有堆栈

> ID：12689506
> 
> 赞同：1
> 
> 时间：2012-10-02T11:33:06.870
> 
> 标签：xcode, debugging, crash

几个月以来我就遇到了这个问题。

当我使用 iOS 4.3 模拟器在 cocos2D 上测试我的游戏时，我得到了崩溃时的堆栈跟踪。一切正常。

但是在 5.0、5.1、6.0 模拟器/设备上没有更多的堆栈跟踪......只是 main.m 文件中的一个错误。很烦人。

只需测试这种类型的错误

```
NSMutableArray *arr = [NSMutableArray array];
id obj = [arr objectAtIndex:0]; 
```

我已经添加了一个异常断点，但没有任何改变。

你能帮我吗？

谢谢。

编辑：

崩溃详细信息仅显示在调试导航器上。

iOS 5 上的崩溃截图 [http://imageshack.us/f/202/capturdcran20121002140.png/](http://imageshack.us/f/202/capturedcran20121002140.png/)

iOS 4.3 上的崩溃截图 [http://imageshack.us/f/706/capturdcran20121002141.png/](http://imageshack.us/f/706/capturedcran20121002141.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:07:24.980

我刚刚发现： [http ://www.oramined.com/index.php/articles/182-ios-5-xcode-backtrace](http://www.oramind.com/index.php/articles/182-ios-5-xcode-backtrace)

它对我有用。

# javascript - 如何在删除标签jQuery之前提交表单

> ID：12689508
> 
> 赞同：0
> 
> 时间：2012-10-02T11:33:10.393
> 
> 标签：javascript, jquery

我有这个功能：

```
 function Nextthing (){

    $('.iframe').remove();

    $('.table').eq(1).find('tbody tr').eq(0).remove();

    $('.table').eq(1).find('tbody tr').eq(0).after('<tr class="iframe"><td colspan=10><iframe  src="/msg.html?msgId='+$('.table').eq(1).find('tbody tr').eq(0).find('td a').eq(0).text()+'&constant=1"></iframe></td></tr>');

} 
```

如您所见，第一个删除是一个 iframe，在该 iframe 内部是一个带有提交按钮的表单。当我按下它时，它会删除 iframe 但不提交。如何在删除前提交？

谢谢！

iframe 的 html 看起来像：

```
<body>
<table>
<div>
<form>
<div>
<table>
<div>
<form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:35:50.890

试试这个片段，只需修复 Selector 表单是表单有一个类或 id。

```
function Nextthing (){
    $('.iframe').contents().find("form").submit(); //Find Form inside the iFrame and submit it.

    $('.iframe').remove();

    $('.table').eq(1).find('tbody tr').eq(0).remove();

    $('.table').eq(1).find('tbody tr').eq(0).after('<tr class="iframe"><td colspan=10><iframe  src="/msg.html?msgId='+$('.table').eq(1).find('tbody tr').eq(0).find('td a').eq(0).text()+'&constant=1"></iframe></td></tr>');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:35:54.610

把它放在你的删除之前：

```
$(".iframe").contents().find(yourform).submit(); 
```

**编辑**
也许试试这个而不是删除代码：

```
$(".iframe").contents().find("form").submit(function(){
    $('.iframe').remove();
}); 
```

# javascript - PhoneGap 中 iPhone 5 的相机功能，图像被压扁

> ID：12689514
> 
> 赞同：2
> 
> 时间：2012-10-02T11:33:53.497
> 
> 标签：javascript, cordova, ios6, iphone-5

所以我有一个 ios 应用程序，在 ios6/iPhone5 之前。它运作良好。我目前正在尝试为 iPhone5 和 ios6 修复它。进展顺利，我已经解决了 99% 的 ios6 错误，并且似乎可以正常工作。然而，iPhone 5 是喜怒无常的。

我正在使用 PhoneGap 1.8.1。有一次，我用相机拍摄了一张照片，使用了这个功能：

```
function capturePhoto() {

        networkState = navigator.network.connection.type; 

            if (networkState == Connection.NONE)
                {
                  alert('You must be connected to the internet to use this feature!');

                }else{

                var options = {
                    quality: 100,
                    correctOrientation: false,
                    destinationType : navigator.camera.DestinationType.FILE_URI,
                    sourceType: navigator.camera.PictureSourceType.CAMERA,
                    encodingType: navigator.camera.EncodingType.JPEG,
              }
          navigator.camera.getPicture(onPhotoDataSuccess, onFail, options);

    }
} 
```

然后，我将图像显示为 HTML 画布上的背景。使用 kineticJS 但出于这个问题的目的，我认为您需要知道的只是：

```
var canvaswidth = window.innerWidth;
var canvasheight = window.innerHeight;

var darthVaderImg = new Kinetic.Image({
                                          x: 0,
                                          y: 0,
                                          image: images.darthVader,
                                          width: canvaswidth,
                                          height: canvasheight,
                                          name: "image"
                                          }); 
```

这在 iphone 4s ios 6 上运行正常，在 android 上运行正常……但在 iPhone 5 上却不行。图片是正确的方向，但它在顶部被压扁，我尝试将其硬编码为 iPhone 5 的屏幕尺寸......我相信是 640x1136？

仍然没有运气，例如，如果我夸大并将图像高度设置为 2000，它确实会覆盖屏幕，但会放大。我对正在发生的事情有点迷失......任何人都有类似的问题，或任何想法?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:19:13.013

好的，所以我想我已经弄清楚了：

首先要意识到的是，iPhone 5 拍摄的照片尺寸与 iPhone 4S 完全相同。我刚刚测试并确认了这一点。所以额外的屏幕尺寸是无关紧要的。

一旦我意识到这一点，就使用 Simon MacDonald 写的一篇文章。可在此处获得：

[http://simonmacdonald.blogspot.co.uk/2012/07/change-to-camera-code-in-phonegap-190.html](http://simonmacdonald.blogspot.co.uk/2012/07/change-to-camera-code-in-phonegap-190.html)

然后我将这两行添加到我的 capturePhoto 函数中：

```
targetWidth: 320,
targetHeight: 480, 
```

这确保了拍摄的图像尺寸正确，另外的好处是它在 4 和 5 上是正确的。

然后我确保它以正确的尺寸显示在画布上，我的画布显示尺寸变为：

```
var canvaswidth = 320;
var canvasheight = 480;

var darthVaderImg = new Kinetic.Image({
                                          x: 0,
                                          y: 0,
                                          image: images.darthVader,
                                          width: canvaswidth,
                                          height: canvasheight,
                                          name: "image"
                                          }); 
```

这使图像保持成比例，我的完美主义者说它只有 99% 正确，但它覆盖了画布并且没有不成比例。

这确实让我在 iPhone 5 上留有多余的“空间”，但我只是通过检测窗口高度来使用 IF 语句来解决这个问题：

```
window.innerHeight 
```

使用它作为变量，我可以在 iphone5 和 iphone4/4s 之间进行区分，然后我可以为两者设置不同的规则，就显示操作而言。

希望这可以帮助遇到同样问题的任何人。

# java - 默认类加载器标识是否可序列化

> ID：12689521
> 
> 赞同：3
> 
> 时间：2012-10-02T11:34:51.110
> 
> 标签：java, serialization, classloader

当一个类被一个自定义的 ClassLoader 加载时，当然，调用结果对象的“getClassLoader()”方法将默认返回自定义的 ClassLoader。

我的查询是如果同一个对象被序列化，通过网络发送然后反序列化会发生什么；在 Deserialised 类上调用“getClassLoader()”是否仍会返回自定义 ClassLoader？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:36:43.620

> 我的查询是如果同一个对象被序列化，通过网络发送然后反序列化会发生什么；在 Deserialised 类上调用“getClassLoader()”是否仍会返回自定义 ClassLoader？

类加载器未序列化。getClassLoader() 将为您提供 ObjectInputStream 正在使用的类加载器。

* * *

来自[ObjectInputStream.resolveClass](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#resolveClass%28java.io.ObjectStreamClass%29)

ObjectInputStream中该方法的默认实现返回调用的结果

```
 Class.forName(desc.getName(), false, loader) 
```

其中 loader 确定如下：如果当前线程的堆栈上有一个方法，其声明类是由用户定义的类加载器定义的（并且不是为实现反射调用而生成的），则 loader 是对应于最近的类加载器这种方法对当前执行的帧；否则，加载程序为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:36:18.680

**没有**。您将类的实例与实际的类本身混淆了。必须在反序列化序列化对象之前加载该类。

# iphone - 有时在 NSDate 中会相差一个小时

> ID：12689524
> 
> 赞同：0
> 
> 时间：2012-10-02T11:35:05.103
> 
> 标签：iphone, ios, timezone, nsdate, ios6

我正在使用 IOS 6 和 IOS 5。我得到一个小时的时间差异。虽然我将日期格式用作`@"MMM d, yyyy HH:mm aaa"`. 我也试过了`@"MMM d, yyyy h:mm aaa"`。

实际上，我正在为当前本地设置固定的通知时间。不同日期的时间固定为上午 10:00。它在控制台中正确显示日期，但时间与显示的澳大利亚时区不同`"2012-10-02 14:00:00 +0000 or 2012-10-02 13:00:00 +0000"`。

当我更改`@"MMM d, yyyy h:mm aaa"`显示的日期格式时`"2012-10-02 00:00:00 +0000 or 2012-10-02 23:00:00 +0000"`。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:01:22.237

使用日期格式化程序时，您应该指定日历和时区以正确格式返回日期。

我发现添加以下两行在过去帮助缓解了这个问题。（你看到我在那里做了什么吗？）

```
[formatter setCalendar:[NSCalendar currentCalendar]];
[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]]; 
```

# sql-server-2008 - 批处理sql server中的错误

> ID：12689525
> 
> 赞同：1
> 
> 时间：2012-10-02T11:35:07.383
> 
> 标签：sql-server-2008

对于 list1，即使选择 1/0 生成错误，也会运行选择“确定”。对于列表 2，选择“确定”将不会运行，因为更新失败。两个列表都会产生 16 级的错误，但为什么会有这样的差异？

```
--1
select 1/0  
select 'ok'

--2
create table #t (a int)
insert into #t values(1)

update #t set b = 99
select 'ok' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:38:24.723

`update #t set b = 99`是编译时错误。

批处理已编译，并且由于`#t`不存在该语句，因此需要进行延迟编译。甚至不可能为该语句生成更新不存在的列的计划，因此该语句存在编译错误。

运行时编译错误中止范围。

运行时错误会产生什么影响（中止语句、范围、批处理或连接）并不总是直观的。请参阅[发生错误时会发生什么？](http://www.sommarskog.se/error-handling-I.html#whathappens)举一些例子。

# java - 是否可以在运行时禁用 install4j 的 Java 应用程序的启动画面？

> ID：12689526
> 
> 赞同：0
> 
> 时间：2012-10-02T11:35:08.213
> 
> 标签：java, splash-screen, install4j, headless

我有一个用 install4j 安装的 Java 应用程序。在某些测试环境中，让它在无头环境中启动很有用。但是，目前这会引发：

```
java.awt.HeadlessException: 
No X11 DISPLAY variable was set, but this program performed an operation which requires it.
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
    at java.awt.Window.<init>(Window.java:431)
    at java.awt.Frame.<init>(Frame.java:403)
    at java.awt.Frame.<init>(Frame.java:368)
    at com.install4j.runtime.splashscreen.JavaSplashScreen.<init>(Unknown Source)
    at com.install4j.runtime.splashscreen.JavaSplashController.show(Unknown Source)
    at com.install4j.runtime.launcher.SplashEngine.showSplashScreen(Unknown Source)
    at com.install4j.runtime.launcher.Launcher.main(Unknown Source) 
```

由于启动画面是程序中唯一需要显示的部分，因此如果可以使用命令行开关或至少程序本身中的一些代码禁用它会很棒（这似乎是一个不太可能的选项，因为这在我的代码运行之前抛出异常）。有这样的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:38:58.367

install4j 中没有这样的运行时选项，您必须配置一个单独的命令行启动器而没有启动屏幕。

# iphone - 如何在越狱的 iPhone 上安装 Unix 命令（即 tail）

> ID：12689528
> 
> 赞同：3
> 
> 时间：2012-10-02T11:35:15.073
> 
> 标签：iphone, unix, logging, jailbreak

我正在对我的越狱 iPhone 进行广泛的日志分析。不幸的是，一些关键的 Unix 命令丢失了，比如 tail 等。我怎样才能将它安装在我越狱的 iPhone 上？

# deployment - 在 glassfish 服务器中使用单个修改文件重新部署 war 文件

> ID：12689532
> 
> 赞同：0
> 
> 时间：2012-10-02T11:35:49.660
> 
> 标签：deployment, glassfish

我在 glassfish Web 服务器 V2 中部署了一个应用程序。但是每次在项目中进行修改时，即使是在单个文件中，我都必须停止服务器并重新部署整个 war 文件。现在我想知道应用服务器中是否有一个功能可以使用实时更改来修改已部署的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:57:48.840

只需重新*部署*.`force=true`

# matlab - 为什么这个对 Screen 的调用失败了，我能做些什么来解决它？

> ID：12689537
> 
> 赞同：0
> 
> 时间：2012-10-02T11:35:57.793
> 
> 标签：matlab, psychtoolbox

我已经通过 neurodebian 存储库（包名：）成功安装了最新版本的 psychtoolbox3 `octave-psychtoolbox-3`。

调用 AssertOpenGL 似乎工作正常：

```
>> AssertOpenGL
PTB-INFO: Display ':0' : X-Screen 0 : Output 0 [default]: Primary output : Connected : CRTC 0 [XID 642]
PTB-INFO: Display ':0' : X-Screen 0 : Assigning primary output as 0 with RandR-CRTC 0 and GPU-CRTC 0. 
```

但是当我调用 Screen 时，我得到了一个相当神秘的错误。

```
>> Screen('Resolution', iscreen, 1024, 768, refreshrate);
INTERNAL PSYCHTOOLBOX ERROR
    error:                PsychError_internal
    general description:  Unspecified error, probably a Psychtoolbox bug
    specific description: Attempt to set invalid video settings
    module name:          Screen
    subfunction call:     Resolution
    file name:            Linux/Screen/PsychScreenGlue.c
    function name:        PsychSetScreenSettings
    line number:          1776
INTERNAL PSYCHTOOLBOX ERROR
    error:                PsychError_internal
    general description:  Unspecified error, probably a Psychtoolbox bug
    specific description: Attempt to restore now invalid video settings
    module name:          Screen
    subfunction call:     Resolution
    file name:            Linux/Screen/PsychScreenGlue.c
    function name:        PsychRestoreScreenSettings
    line number:          1846
PTB-ERROR: Error during error handling! ScreenCloseAllWindows() called recursively! Trying to break out of this vicious cycle...
PTB-ERROR: Maybe it is a good idea to exit and restart Matlab/Octave.
Error using Screen
See error message printed above. 
```

`iscreen`调用中的变量`Screen`由该行设置`iscreen = max(Screen('Screens'));`并且等于`0`。

知道这里可能出了什么问题吗？我知道这个脚本在 MacOSX 下工作，但由于某种原因它在这台机器上崩溃（Ubuntu 12.04 / Matlab R2012a）。

提前致谢！

编辑：有人建议这可能是我的显示器不支持我传递给`Screen`呼叫的刷新率的问题。不幸的是，当我`refreshrate`用显示器的当前刷新率替换变量时，我仍然得到同样的错误。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:59:46.107

您请求的刷新率不受支持。

试试 Screen('分辨率', iscreen, 1024, 768, 60); 你会明白我的意思。

ResolutionTest.m 将报告支持的分辨率。不知道你会从哪里得到利率。

# iphone - Re-request access to device contacts

> ID：12689545
> 
> 赞同：3
> 
> 时间：2012-10-02T11:37:30.023
> 
> 标签：iphone, objective-c, ios

I'm writing an app that relies heavily on access to the iPhone address book. In iOS 6.0 users are now asked when the app first requests address book info whether they'd like to grant the app access to their contacts. It occurs to me that a user could select No without thinking the request through and thus render the app redundant.

I'd like to know if there's a way I can firstly tell that the app has been blocked and secondly (and in that case) re-request access to the device contacts.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:15:06.523

literally right at the top under address book:

[https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

TL;DR:

> The user is prompted only the first time access is requested; any subsequent calls to ABAddressBookCreateWithOptions will use the existing permissions.
> 
> An app can use the authorization status API to check if it can access contacts, calendars, reminders, or the photo library.
> 
> For Address Book, call the ABAddressBookGetAuthorizationStatus function

So no you can't re-request. The user has to navigate to settings and then privacy and toggle on for your app. You can tell if they denied you, though, so you can present a clear set of instructions within your app on how to turn it back on.

# c# - EF/LINQ 存在双向关系时如何包含子实体

> ID：12689548
> 
> 赞同：7
> 
> 时间：2012-10-02T11:37:52.020
> 
> 标签：c#, entity-framework, linq-to-entities

**环境**

我在框架 4.0 上使用实体框架 5。（这意味着我实际上使用的是 EF 4.4）。作为实体，我使用 STE（自我跟踪实体），因为我在 N 层应用程序中工作。我们使用数据库驱动的方法，因为 EF 是在游戏后期引入的。

**语境**

我有 2 个实体，它们都具有彼此的导航属性。（EntityA 具有到 EntityB 的导航属性，而 EntityB 具有到 EntityA 的导航属性）。关系是“EntityA > 一对多 > EntityB”。当我想通过 LINQ 表达式加载子实体时，我需要使用 INCLUDE (STE => Eager Loading)，因为我将通过几层传递所有数据。

**编码**

这是我调用 EntityA 及其 EntityB 子级的代码。

```
using (var ctx = new MyEntities())
{
     var result = (from s in ctx.EntityA.Include("EntityB")
                   where s.Id = 11111
                   orderby s.TimeUpdated descending 
                   select s)
               .Take(10)
               .ToList();
     return result;
} 
```

**错误**

> System.StackOverflowException {无法评估表达式，因为当前线程处于堆栈溢出状态。}

删除“包含”时没有错误。我想原因很简单。我想用子记录EntityB加载EntityA，EntityB记录每次都想加载它的父EntityA，而EntityA……我想每个人都明白这里的无限循环。

**我的解决方案或替代方案**

*   我转到我的 EDMX 文件并删除 EntityB 中 EntityA 的导航属性。如果我现在想加载有关 EntityA 的数据，而我有一个 EntityB 可供使用。我需要做一个单独的数据库请求，并且我有 2 个不同的对象必须通过我的层传递。
*   避免使用包含，单独加载 EntityA 并将其推送到我的 EntityB 的 Navigation 属性中，该属性引用我的 EntityA。

**问题**

在我的情况下是否有更好的选择或方法来解决这个问题？我是否应该继续我提出的替代方案之一？因为我希望有一个更好、更清洁的解决方案。

谢谢你的时间

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:51:26.047

我试图在 EF 5 (Visual Studio 2012) 中重现您的问题，但没有收到任何错误。还有什么可能导致您的问题吗？它是否适用于简单的 POCO 设置？

我还想指出，STE 会让你很头疼。我以前曾与 STE 合作过，现在我真的很想避免他们。您确定要使用 STE 吗？

您可以使用普通的旧 DTO 而不是使用 STE。您将在服务器上保留您的富域模型，并且只将必要的数据发送给客户端。通过这种方式，您可以为每个用例创建具有最少数据量的定制 DTO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:52:35.203

我来这里是为了对你说“你可以使用`Include`”，但显然它在这种情况下对你没有帮助。

正如我通常在互联网上阅读的那样，当我们怀疑（或有）无限循环案例时，有一些解决方法：

1.  我们可以通过手动使用和加载子项来使用[加载操作。](http://msdn.microsoft.com/en-us/library/bb896249.aspx)`foreach`
2.  我们可以创建一个本身[是递归查询的数据库视图](http://web.archive.org/web/20090331190541/http://www.webinade.com/web-development/creating-recursive-sql-calls-for-tables-with-parent-child-relationships)（并使用它的实体）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T16:04:04.553

[看到这个](http://connect.microsoft.com/VisualStudio/feedback/details/783004)

但是我安装了更新 4，但仍然无法调试

# c# - 图像的 ListView 分页

> ID：12689556
> 
> 赞同：0
> 
> 时间：2012-10-02T11:38:53.717
> 
> 标签：c#, .net, listview

我使用 asp.net 制作了一个 Picasa 类型的应用程序，该应用程序使用`ListView`控件在浏览器中显示图像。

所有图像看起来都很好。它直接从服务器文件夹中获取图像并立即以缩略图形式显示。当单击任何图像时，它使用 jQuery 以大尺寸显示该特定图像。然后就可以关闭了。

但是，有一个问题。如果单个服务器文件夹中有超过 100 张图像，它会跳过一些图像并在那里显示空白 x。所以我决定每页分页 40 张图片。我怎样才能做到这一点`ListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:05:04.920

您将不得不[`DataPager`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datapager%28v=vs.100%29.aspx)在.[`LayoutTemplate`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.layouttemplate%28v=vs.100%29.aspx)`ListView`

您可以像这样添加它：

```
<asp:DataPager runat="server" ID="DataPager" PageSize="40">
    <Fields>
      <asp:NumericPagerField ButtonCount="10"
           PreviousPageText="<--"
           NextPageText="-->" />
    </Fields>
</asp:DataPager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:49:13.967

这是一篇使用 DataPager 控件的文章（带有可下载的演示/源代码） - [http://www.4guysfromrolla.com/articles/021308-1.aspx#postadlink](http://www.4guysfromrolla.com/articles/021308-1.aspx#postadlink)

# .net - 如何从 .Net 中的 COM 类获取自定义结构 (UDT) 数组？

> ID：12689557
> 
> 赞同：0
> 
> 时间：2012-10-02T11:39:02.593
> 
> 标签：.net, com, interop, com-interop, vb.net-2010

我有一个 COM 类（用 C++ 开发，以防万一），它有一个方法“GetStructList”，它应该返回一些自定义类型的列表，我正在开发一个应该获取该列表的 .NET 应用程序。

我控制 COM 类代码以及应用程序，但无法获取数据。

COM 类代码：

1- IDL：

```
HRESULT GetList([in,out] SAFEARRAY(struct MyStruct)* myStructs);
// I have also tried with [out] instead of [in, out]

[uuid(628913FC-CC26-1654-472F-0B70CC39DEE0)]
struct MyStruct
{
    int myInt;
    DOUBLE myDouble;

}; 
```

2- CPP：

```
STDMETHODIMP MyClass::GetList(SAFEARRAY** myStructs)
{
    SAFEARRAY* psa = *myStructs;
    SAFEARRAYBOUND sab = {someSize, 0};
    MyStruct *pData;
    IRecordInfo *pRI;
    HRESULT hr;

    hr = GetRecordInfoFromGuids(LIBID_MyCOMLib, 1, 0, 0x409, __uuidof(MyStruct), &pRI);
    psa = SafeArrayCreateEx(VT_RECORD, 1, &sab, pRI);
    pRI->Release();
    pRI = NULL;
    hr = SafeArrayAccessData(psa, (void**)&pData);
    for (size_t i = 0; i < someSize; i++) 
    {
        pData[i].myInt = someInt;
        pData[i].myDouble = somedouble;
    }
    hr = SafeArrayUnaccessData(psa);

    return S_OK;
} 
```

.Net 代码（VB）：

```
Option Strict
...
<MarshalAs(UnmanagedType.SafeArray, safearraysubtype:=VarEnum.VT_RECORD)>
Private m_List As MyStruct()

Private Sub btnGetList_Click(sender As System.Object, e As System.EventArgs) 
    Dim m_List() As MyStruct
    m_ComObject.GetList(m_List) 

    ' I have tried several other things, getting different errors with each of them'
    'm_ComObject.GetList(CType(m_List, Array))'

    'Dim structs() As MyStruct'
    'Dim arr as System.Array = structs '
    'm_ComObject.GetList(arr)'

    For Each o In cortes
        Dim s As MyStruct = CType(o, MyStruct)
        MsgBox(s.myInt)
        Exit For
    Next
End Sub 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:12:29.623

生成的互操作签名是什么？

你得到什么确切的错误？

COM 接口中的`myStruct`参数应该是`[out]`，而不是`[in, out]`

是部分：

```
Dim m_List() As SceneCutInfo
m_ComObject.GetList(m_List) 
```

原意是要：

```
Dim m_List() As MyStruct
m_ComObject.GetList(m_List) 
```

但是，除非您有充分的理由使用 SAFEARRAY（例如符合自动化的接口），否则我建议您使用普通数组，因为没有必要与 VT_RECORD 的东西抗争。

# php - php regex 从数组和方括号中替换

> ID：12689561
> 
> 赞同：0
> 
> 时间：2012-10-02T11:39:21.620
> 
> 标签：php, regex, arrays, key

我只想查找和替换数组键中的单词。我尝试使用正则表达式来做到这一点，但只有部分成功。

例如：

```
$str = '[something][userName][userEmail][something]';

$user =  array(
    'id' => (string) '2',
    'userName' => (string) 'super user',
    'userEmail' => (string) 'superuser@some.domain',
);

// get the keys.
$keys = array_keys($user);

// get the values.
$values = array_values($user);

// surround each key in word boundary and regex delimiter
// also escape any regex metachar in the key
foreach($keys as &$key) {
    $key = '/\b'.preg_quote($key).'\b/';
}

// do the replacement using preg_replace                
echo preg_replace($keys,$values,$str); 
```

此代码产生：

[某事][超级用户][superuser@some.domain][某事]

我想要做的是摆脱'超级用户'和'superuser@some.domain'周围的方括号，而不是[something]周围的方括号（在字符串的开头和结尾）

请帮忙。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:45:43.343

为什么不添加方括号来替换模式？

```
 $str = '[something][userName][userEmail][something]';

    /* ... */
foreach($keys as &$key) {
       $keyWithSquareBrackets = '[' . $key . ']';
       $key = '/\b'.preg_quote($keyWithSquareBrackets).'\b/';
}

// do the replacement using preg_replace                
echo preg_replace($keys,$values,$str); 
```

# java - Chrome 使用直接 HTTP 套接字/不是 TCP 套接字

> ID：12689562
> 
> 赞同：0
> 
> 时间：2012-10-02T11:39:35.100
> 
> 标签：java, sockets, google-chrome, applet

我正在使用小程序（玩游戏）编写（某种）分布式应用程序。它深入实施，因此设计或多或少是固定的。

但是，当我使用 Java 套接字（至少在 Chrome 中）连接到对等方时，它正在尝试连接到 http://。为什么会这样？

它实际上是成功的连接，但是，写入数据似乎也很好。读取失败（主要是因为它需要 HTTP 有效负载）。为什么会这样？有没有办法改变它？（该应用程序尚未在其他浏览器中运行）。

代码片段：

```
private IoSession(InetSocketAddress peerAddr, 
                  IoHandlerAdapter handler, 
                  boolean synch, 
                  int connectTimeOut) 
throws IOException { 
    this.handler = handler; 
    try { 
        mySocket = new Socket(peerAddr.getAddress(), peerAddr.getPort());     
        System.out.println("Socket is done to " + peerAddr.getPort()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:17:13.050

好的，我想它已经解决了。我知道没有 HTTP 套接字。问题在别处，我可以解决。它与 HTTP 无关。至少在 Chrome 中，Java 控制台中的消息是错误的。

# iphone - 无法在 Xcode 4.3 中安装 iOS 4.3 模拟器

> ID：12689564
> 
> 赞同：0
> 
> 时间：2012-10-02T11:39:45.880
> 
> 标签：iphone, ios-simulator, xcode4.3, ios4

我是 iPhone 新手，我安装了 Xcode 4.3，现在我正在尝试从下载安装 iOS 4.3 模拟器，它显示安装进度，然后给我以下消息：

> 您无法保存文件“Developer”，因为卷“Xcode”空间不足。

考虑到我安装的是旧版本的 Xcode。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:02:32.883

您似乎还没有安装 Xcode，而是从 dmg 文件运行它。

您需要从运行 Xcode 的位置找到 dmg - Spotlight 将对此有所帮助，但它很可能在您的下载中 - 并将其从那里拖到您的 Applications 文件夹中。

# regex - URL 重写 - 满足其自身规则的 URL

> ID：12689566
> 
> 赞同：1
> 
> 时间：2012-10-02T11:39:48.400
> 
> 标签：regex, url-rewriting, umbraco

我正在尝试使用 Umbraco 中的 UrlRewriting.config 文件设置 url 重写。

我认为 URL 重写使用 Perl 兼容的正则表达式是否正确？

我需要从 to 重定向`/events.aspx$`，`about-us/events.aspx$`但显然这会导致无限循环，从而导致 URL 看起来像`about-us/about-us/about-us/about-us/events.aspx`等。

有没有办法可以阻止这里发生的无限循环？抱歉，如果这已经在其他地方得到回答 - 这是一个很难解释的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:48:20.673

您应该`^/events.aspx$`在重写条件中使用（即以/events.aspx开头），然后将URL重写为，`about-us/events.aspx`以便下次请求到达URL重写器时，不会满足重写条件。`mod-rewrite`我们曾经在 apache中做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:48:57.443

你不能在开始时也锚定吗？

`^/events\.aspx$`->`about-us/events.aspx`

# eclipse - 为什么eclipse不能启用JDT Weaving？

> ID：12689571
> 
> 赞同：1
> 
> 时间：2012-10-02T11:40:09.647
> 
> 标签：eclipse, maven, aspectj, spring-roo, compile-time-weaving

我在 Eclipse Indigo 中创建了一个简单的 Spring Roo 项目，其中 jpa 实体是使用`dbre`命令生成的。当我想向某个类添加方法时，我无法使用通过 Spring Roo 生成的方面编织到实体中的方法。

当我在 Eclipse 中清理和构建项目时，进度视图显示这些方面已编织到类中。构建在 Maven 3.0.4 的命令行上运行良好。当使用这些方面的方法时，Maven 还将编译在 Eclipse 中标记为编译错误的代码。

我尝试通过首选项启用 JDT Weaving，并按照[eclipse wiki 中的手动激活说明进行操作](http://wiki.eclipse.org/JDT_weaving_features#Turning_on_JDT_Weaving_manually)

我面临的问题与禁用的 JDT Weaving 功能有关吗？如果是，如何启用 JDT Weaving 或查找无法启用的原因？

感谢帮助

**编辑：**
我创建了一个新工作区并将 Spring Roo 项目作为 Maven 项目导入。我看到对话框出现，它想要转换旧的 STS 项目。当我确认时，似乎什么都没有发生。但现在至少我可以在 Spring Roo 生成的实体中看到 Advice Markers。但是我仍然无法使用课堂上编织的任何方法。

**编辑：**
运行 JUnit 测试也没有问题，即使有编译错误。我正在使用 Eclipse 靛蓝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:01:04.680

我重新安装了一个干净的 Eclipse Indigo 并安装了 m2e、AJDT 和 m2eclipse 的 AJDT 配置器。

设置新工作区并导入项目后一切正常。

请注意，我还没有安装 Spring STS。

这可能是不同eclipse插件之间的问题。

**编辑：**
Spring STS 确实是问题的原因。安装后，问题又出现了。

# javascript - 如何避免在使用 Ruby On Rails 在 mozilla firefox 中预加载图像之前加载实际图像

> ID：12689573
> 
> 赞同：1
> 
> 时间：2012-10-02T11:40:34.070
> 
> 标签：javascript, ruby-on-rails, image, firefox, preloader

我正在使用预加载器在加载实际图像之前显示加载 gif 图像。这在除 mozilla firefox 之外的所有浏览器中都能正常工作。在 Mozilla Firefox 中，实际图像首先加载并停留一秒钟，然后显示预加载器图像，然后再次显示实际图像。我只有在将它集成到 Ruby On Rails 时才会遇到这个问题。任何帮助或指导将不胜感激。请帮我。

下面是我用于预加载器的 jquery 代码：

```
$.fn.preloader = function(options){
var defaults = {
                 delay:20,
                 preload_parent:"a",
                 check_timer:300,
                 ondone:function(){ },
                 oneachload:function(image){  },
                 fadein:500 
                };

// variables declaration and precaching images and parent container
 var options = $.extend(defaults, options),
 root = $(this) , images = root.find("img").css({"visibility":"hidden",opacity:0}) ,  timer ,  counter = 0, i=0 , checkFlag = [] , delaySum = options.delay ,

 init = function(){

    timer = setInterval(function(){

        if(counter>=checkFlag.length)
        {
        clearInterval(timer);
        options.ondone();
        return;
        }

        for(i=0;i<images.length;i++)
        {
            if(images[i].complete==true)
            {
                if(checkFlag[i]==false)
                {
                    checkFlag[i] = true;
                    options.oneachload(images[i]);
                    counter++;

                    delaySum = delaySum + options.delay;
                }

                $(images[i]).css("visibility","visible").delay(delaySum).animate({opacity:1},options.fadein,
                function(){ $(this).parent().removeClass("preloader");   });

            }
        }

        },options.check_timer) 

     } ;

images.each(function(){

    if($(this).parent(options.preload_parent).length==0)
    $(this).wrap("<a class='preloader' />");
    else
    $(this).parent().addClass("preloader");

    checkFlag[i++] = false;

    }); 
images = $.makeArray(images); 

var icon = jQuery("<img />",{

    id : 'loadingicon' ,
    src : 'css/i/89.gif'

    }).hide().appendTo("body");

timer = setInterval(function(){

    if(icon[0].complete==true)
    {
        clearInterval(timer);
        init();
         icon.remove();
        return;
    }

    },100);

} 
```

在我看来，这就是我调用预加载器的方式，

```
$(function(){
$("#gallery").preloader();
    }); 
```

# ruby-on-rails - Rails 3：根据参数值动态路由

> ID：12689574
> 
> 赞同：0
> 
> 时间：2012-10-02T11:40:37.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图根据 url 参数将相同的 url 匹配到两个不同的控制器。这是我正在寻找的结果：

```
/feed?foo1=bar1&foo2=bar2 
```

如果 foo2 == bar2 则匹配 /genres

```
/feed 
```

比赛/电影

两条路由都应默认为 rss。

尝试了以下配置，但是路由始终匹配第一条规则，并且不会达到第二条流派规则。

> 匹配 '/feed(:foo2)' => 'movies#index', :as => :movies, :defaults => { :format => 'rss' }, :constraints => [ :foo2 => "/bar2 /"]
> 
> 匹配 '/feed' => 'genres#index', :as => :genres, :defaults => { :format => 'rss' }

关于如何做这样的事情的任何想法？

# java - 列表数组列表转换

> ID：12689580
> 
> 赞同：1
> 
> 时间：2012-10-02T11:41:10.243
> 
> 标签：java, list, arraylist, polymorphism

> **可能重复：**
> [Java 泛型：无法将 List<SubClass> 转换为 List<SuperClass>？](https://stackoverflow.com/questions/3246137/java-generics-cannot-cast-listsubclass-to-listsuperclass)

我只是想知道为什么以下java代码无法编译：

```
List<Object> c1 = new ArrayList<String>(); 
```

错误是： `cannot convert from ArrayList <String> to List<Object>`

字符串扩展了对象，所以我会认为使用多态性，因为字符串“是一个”对象，字符串可以替换为对象。

我刚开始学习java，所以希望这个问题有意义。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:47:22.710

你可以这样做

```
List<? extends Object> list=new List<String>(); 
```

对象具有继承性，但泛型有点不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:45:09.387

Thsi dosnt 像这样工作，这里的共同父级是 List 而不是存储在该 List 中的元素类型。因此这两种类型并不真正相关。看看[这个](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:46:40.423

这通常是这种情况，但不适用于泛型。泛型用于准确指定集合中包含的对象。[你可以在这里](http://docs.oracle.com/javase/tutorial/java/generics/index.html)阅读更多关于它们的信息。

# php - 使用 CASE WHEN THEN 更新 2 mysql 行

> ID：12689584
> 
> 赞同：2
> 
> 时间：2012-10-02T11:41:38.217
> 
> 标签：php, mysql, sql, sql-update, case

我发现了用一个查询更新 2 个 mysql 行的这种语法。它看起来像很好的逻辑，但是我无法让它按照我想要的方式工作。

如果有人能告诉我这种语法是否错误，我将不胜感激。我是否正确理解这一点？

```
$id_active = 1;
$id_swap = 2;

UPDATE article_test
// the column to update is 'sort_id' and since it is also the column I need to test,  then I use the same value for CASE right?
SET sort_id = CASE sort_id
WHEN $id_active THEN $id_swap  // sort_id 1 to become sort_id 2
WHEN $id_swap THEN $id_active // sort_id 2 to become sort_id 1
WHERE sort_id IN ($id_swap,$id_active) // test only rows with sort_id 1 & sort_id 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:44:43.940

试试这个：

```
UPDATE article_test
SET sort_id =
  CASE 
    WHEN sort_id = $id_active THEN $id_swap  
    WHEN sort_id = $id_swap THEN $id_active 
    ELSE sort_id
  END
WHERE sort_id IN ($id_swap, $id_active) 
```

**注意：**

*   您必须指定`END`子句。
*   如果您没有指定`ELSE`子句，则默认为`NULL`.

**Update2：**为了澄清这一点，`CASE`有两种语法。第一个是简化的，如下所示：

```
CASE sort_id
  WHEN $id_active THEN $id_swap  
  WHEN $id_swap   THEN $id_active 
  ELSE sort_id
END 
```

你看，在关键字`sort_id`之后只指定了一次。`CASE`但是如果你想添加一个条件，比如`sort_id IN (1, 2, 3)`or `otherfield LIKE ''`。您不能在这个简化的语法中添加这些条件。您必须以其他方式编写它，而不像这样在关键字`sort_id`后面列出：`CASE`

```
CASE 
  WHEN sort_id = $id_active THEN $id_swap  
  WHEN sort_id = $id_swap   THEN $id_active 
  WHEN sort_id LIKE '' THEN blah
  ELSE sort_id
END 
```

使用`CASE`表达式时，使用这两种语法中的任何一种，`UPDATE`都必须在表达式末尾写下`WHERE`子句`CASE`。你不能把它混在`CASE`表达式里面，把它写在`UPDATE`子句的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:43:15.233

您需要以这样的方式结束您的案例陈述`ELSE...END`：

```
UPDATE article_test
SET sort_id = CASE sort_id
WHEN $id_active THEN $id_swap  
WHEN $id_swap THEN $id_active 
else sort_id end
.... 
```

# c# - 如何设置资源锁定的到期时间？

> ID：12689585
> 
> 赞同：0
> 
> 时间：2012-10-02T11:41:41.807
> 
> 标签：c#, concurrency, locking, shared-resource

我的程序将使用共享资源，因此需要锁定该资源。

当启动此资源上的处理任务时，它将获得对该资源的锁定。当它完成时，它将释放锁。

为了应对处理任务期间的崩溃和电源故障，这将使锁永远保持打开状态，锁应该有一个到期时间。

如果执行涉及资源的处理任务所花费的时间通常在 0 到 5 秒之间，我认为到期时间应该在 10 分钟甚至 1 小时左右。

那么我应该如何满足处理任务实际上比到期时间更长的异常情况呢？

任务本身的到期时间是否应该小于锁的到期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:57:45.613

我猜你正在处理远程资源。锁处理应在其一侧完成。调用者在获取它时应该指定锁超时，并且您应该支持锁所有者在需要时请求更长的超时的方法。

# java - 当一个 android 活动启动另一个活动时会发生什么

> ID：12689592
> 
> 赞同：12
> 
> 时间：2012-10-02T11:42:37.343
> 
> 标签：java, android, android-activity

不太确定要在 google 中查询什么词，所以我只想问这个问题。

当我开始另一项活动时，一项活动会发生什么？

假设我目前在活动 A 上，然后从 a，我调用了一个函数来 startService 一个打开活动 B 的新意图。A 的生命周期会发生什么？它被摧毁了吗？停了？

子问题。如果活动暂停，我如何从新开始的活动中调用/打开它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T11:46:43.393

活动 A 暂停，然后停止 - 两个`onPause()`&`onStop()`方法都被调用，但`onDestroy()`没有被调用。Activity 仍然保留在后台堆栈中。

*引用 Android 文档：*

> ### 活动生命周期
> 
> *系统中的活动作为活动堆栈进行管理。当一个新的 Activity 启动时，它被放置在栈顶并成为正在运行的 Activity——之前的 Activity 始终保持在它的下方，直到新的 Activity 退出后才会再次来到前台。*

# c# - 如何在c#中将结构转换为字节数组

> ID：12689593
> 
> 赞同：4
> 
> 时间：2012-10-02T11:42:46.017
> 
> 标签：c#

我在 c# 中有一个结构，有两个成员：

```
public int commandID;  
public string MsgData; 
```

我需要将这两个转换为一个单字节数组，然后将其发送到将解包字节的 C++ 程序，它将获取第一个 `sizeof(int) 字节以获取 commandID，然后将使用 MsgData 的其余部分.

在 c# 中执行此操作的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:08:40.140

下面将只返回一个常规的字节数组，前四个代表命令 ID，其余代表消息数据，ASCII 编码和零终止。

```
static byte[] GetCommandBytes(Command c)
{
    var command = BitConverter.GetBytes(c.commandID);
    var data = Encoding.UTF8.GetBytes(c.MsgData);
    var both = command.Concat(data).Concat(new byte[1]).ToArray();
    return both;
} 
```

`Encoding.UTF8`例如，如果您愿意，您可以切换出去`Encoding.ASCII`——只要您的 C++ 使用者可以解释另一端的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:58:01.040

这直接进入一个字节数组。

```
public byte[] ToByteArray(int commandID, string MsgData)
{
    byte[] result = new byte[4 + MsgData.Length];

    result[0] = (byte)(commandID & 0xFF);
    result[1] = (byte)(commandID >> 8 & 0xFF);
    result[2] = (byte)(commandID >> 16 & 0xFF);
    result[3] = (byte)(commandID >> 24 & 0xFF);
    Encoding.ASCII.GetBytes(MsgData.ToArray(), 0, MsgData.Length, result, 4);

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:58:40.410

这会给你`byte[]`你想要的。这里要注意的一件事是我没有使用序列化程序，因为你想要一个非常原始的字符串，并且没有序列化程序（我知道）可以像你想要的 OOB 一样序列化它。然而，这是一个如此简单的序列化，这更有意义。

```
var bytes = Encoding.UTF8.GetBytes(string.Format("commandID={0};MsgData={1}", o.commandID, o.MsgData)); 
```

最后，如果您有更多我不知道的属性，您可以使用反射。

# javascript - 无需调试命令的 JavaScript OnPageLoad 调试

> ID：12689597
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:43:22.173
> 
> 标签：javascript, debugging, browser, onload, breakpoints

当页面加载并且 Javascript 启动时，我需要开始调试 JavaScript。（OnLoad 事件调用），但我没有访问网站的源代码，也无法修改它（如调试；命令）。请帮助它最好的问候弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:52:46.137

为什么不使用一些网络浏览器工具？就像 Mozilla 上的 Firebug 或 Chrome 中的开发者工具（只需在 Chrome 浏览器中单击 F12，选择 Sources 选项卡，然后选择所需的 .js 文件。）

我猜 onload 事件会被类似的东西触发

```
<body onload="load()"> 
```

所以在 load() 方法上设置一个断点。

# python - 将字典列表（Python）中的值替换为“id”的对象

> ID：12689601
> 
> 赞同：0
> 
> 时间：2012-10-02T11:43:57.243
> 
> 标签：python, dictionary, tornado

我需要向 WSHandler 连接列表（Tornado、Python）添加更多值。我正在将连接添加到这样的列表中 `self.connections.append(self)`，但我需要添加更多信息，例如`self.connections.append({'id': self, 'keyword' : ''})`（稍后找到当前`self`id 并替换关键字。）

当我尝试基于`self`对象（如`self.connections[self].filter = 'keyword'`）添加到列表时，我得到`TypeError: list indices must be integers, not WSHandler.`

那么我该怎么做呢？

编辑：设法找到正确的对象，如下所示：

```
def on_message(self, message):
    print message
    for x in self.connections:
        if x['id'] == self:
            print 'found something'
            x['keyword'] = message
            print x['keyword']
            print x 
```

现在，如何从 dict 中删除整个 dict `connections`？ `self.connections.remove(self)`不再工作，当然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:52:19.617

对于此用例，您不需要连接列表。将它存储在对象本身中可能更容易。只需使用`self.filter = 'keyword'`.

除此以外：

```
for dict in self.connections:
    if dict['id'] == self:
        dict['keyword'] = 'updated' 
```

或者，如果您喜欢简洁而不是清晰：

```
for dict in [dict for dict in self.connections if dict['id'] == self]:
    dict['keyword'] == 'updated' 
```

要删除，请使用：

```
for dict in self.connections:
    if dict['id'] == self:
        self.connections.remove(dict) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:54:28.200

由于`self.connections`是一个列表，因此您只能使用整数对其进行索引（如错误所述）。 `self`这是一个 WSHandler 对象，*而不是*整数。

我不是 Tornado 方面的专家，所以你应该试试 Hans 所说的。

如果您仍然需要按照您提到的方式进行操作，请尝试：`self.connections[self.connections.index(self)]`在列表中定位 self 对象。

# eclipse - 在 Eclipse 插件中加载 Clojure 代码

> ID：12689605
> 
> 赞同：2
> 
> 时间：2012-10-02T11:44:27.453
> 
> 标签：eclipse, clojure

我有这种问题。我在 *.clj 文件中的 Eclipse 插件（表示为 A）中包含 Clojure 代码。我不想要 AOT 编译。但是，我需要从另一个 Clojure 插件 B 加载 clojure 代码。当 B 依赖于 A 时，这是可能的。Clojure 可以轻松访问类路径并且一切正常。但是我希望将插件 A 作为 B 的扩展插入。但是有一个问题，因为我找不到如何从 B 中包含的 *.clj 文件加载 A 中包含的 Clojure 文件的方法。我想使用可以从类路径加载 *.clj 文件的 Clojure 'load' 函数，但是当我像这样明确启动插件时，这个函数只是看不到插件 A 事件的内容

```
 (org.eclipse.core.runtime.Platform/getBundle "A") 
```

**对洛朗回答的反应**

劳伦特，非常感谢你！这很有趣。但是，我认为这可能比我原来的问题解决了一个更难的问题。您描述了如何从 java 插件中调用 clojure 代码，这非常棒。我需要从 clojure 插件调用 clojure 代码，我认为这可能更容易。我想我会创建扩展点并提供这样的 clojure 函数

```
<extension point="transforms">
  <function namespace="my.nemaspace" fn="my-transform"/>
</extension> 
```

所以我不需要任何关于 IExecutableExtensionFactory 的魔法。我可以从 clojure 代码中读取扩展注册表。我不能做的是加载扩展中指定的功能。这是可行的还是我只是误解了什么？我注意到您正在使用 clojure.osgi。这看起来很酷，该项目是否有任何文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:54:50.760

您在类加载器方面遇到的问题是可以预料的：如果您的 Eclipse 插件/OSGi 捆绑包的依赖项是 A -> B，并且 Clojure jar 从 B 引导，则无法从 B 中看到 A 的资源是正常的。

Eclipse 插件的依赖关系之间不能有循环，因此类加载器层次结构之间不能有循环。

如果您要使用常规 Eclipse 机器从 A 向 B 编写扩展，这与您将面临的问题相同：插件 B 将声明一个接口和一个扩展点。然后插件 A 可以实现接口，并声明扩展点的扩展。最后一部分允许 Eclipse 框架对包做一些技巧：它看到 A 声明了对 B 的扩展，因此从 A 中实例化了一个类，实现了在 B 中声明的接口（这有效，因为 A 依赖于 B），并给 B来自 A 的实现实例也可以，因为它实现了 B 中的接口！

（不确定这是否清楚）。

**无论如何，回到用 Clojure 编写的插件。**
使用 Clojure，您没有开箱即用的类加载器提供的这种单独的环境，因为所有内容都聚合在一个“Clojure 环境”中，该环境位于嵌入 clojure jar 的插件的类加载器领域中。因此，一种可能性是，当插件 A 启动时，从 A 加载相关的命名空间。然后它们将在正确的时间加载，并可供任何其他 Clojure 代码使用。另一种可能性是使用扩展点/扩展机器。Eclipse 提供了一种使用“工厂”创建扩展点实例的方法。在逆时针方向，我们利用了这个特性，并有一个通用工厂类（用 java 编写，所以没有 AOT）负责从正确的包中加载正确的命名空间。

这里有更多关于如何扩展扩展点的细节。

**逆时针的一个例子：**
Eclipse 框架中有一个现有的扩展点，用于为控制台内容提供超链接检测器。逆时针扩展此扩展点以添加 nrepl 超链接。
在 Java 世界中，您必须在您的扩展中直接声明您的某个实现接口 IPatternMatchListenerDelegate 的类。
但是对于CCW，可能出于与您相同的原因，我会不惜一切代价避免AOT，所以我不能在扩展中给出java类名，或者我不得不用java编写并编译它，或者`gen-class`在 Clojure 中编写一个并 AOT 编译它。

相反，CCW 充分利用了 plugin.xml 的可能性：几乎在每个地方，当您必须提供类名时，您可以提供一个[IExecutableExtensionFactory](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIExecutableExtensionFactory.html)的实例， `create()`Eclipse 框架将调用它的方法来创建想要的班级。

[这使我可以编写一个通用类来调用 Clojure 世界：我只是使用类名ccw.util.GenericExecutableExtension](https://github.com/laurentpetit/ccw/blob/master/ccw.util/src/java/ccw/util/GenericExecutableExtension.java)代替我应该编写的类名

[从plugin.xml](https://github.com/laurentpetit/ccw/blob/master/ccw.core/plugin.xml#L25)中提取：

```
<extension point="org.eclipse.ui.console.consolePatternMatchListeners">
<consolePatternMatchListener
   id="ccw.editors.clojure.nREPLHyperlink"
   regex="nrepl://[^':',' ']+:\d+">
    <class class="ccw.util.GenericExecutableExtension">
       <parameter
             name="factory"
             value="ccw.editors.clojure.nrepl-hyperlink/factory">
       </parameter>
    </class>
</consolePatternMatchListener> 
```

注意`class`属性，以及如何通过`parameter`元素为工厂提供参数（工厂必须实现接口[IExecutableExtension](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIExecutableExtension.html)才能使用参数进行初始化）。

最后，您可以看到在 namespace`ccw.editors.clojure.nrepl-hyperlink`中，函数[工厂](https://github.com/laurentpetit/ccw/blob/master/ccw.core/src/clj/ccw/editors/clojure/nrepl_hyperlink.clj#L27)非常简单，只需调用[make](https://github.com/laurentpetit/ccw/blob/master/ccw.core/src/clj/ccw/editors/clojure/nrepl_hyperlink.clj#L20)函数：

```
(defn make []
  (let [state (atom nil)]
    (reify org.eclipse.ui.console.IPatternMatchListenerDelegate
      (connect [this console]  (dosync (reset! state console)))
      (disconnect [this]       (reset! state nil))
      (matchFound [this event] (match-found event @state)))))

(defn factory "plugin.xml hook" [ _ ] (make)) 
```

请注意，我将其作为示例进行展示，并且逆时针方向的相关代码尚未准备好作为独立库“可供使用”发布。
但是您仍然应该能够推出自己的解决方案（一旦您将所有部分都放在脑海中就很容易了）。

希望有帮助，

——洛朗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:36:36.113

我想到了另一个解决方案：在 Eclipse 中，尽管我在之前的回答中说过，有可能在类加载器之间创建循环依赖关系！

Eclipse 人员需要引入这一点，以便某些类型的库（log4j 等）可以在 OSGi 环境中工作（这是 Eclipse 所基于的）。

这需要利用`Eclipse-BuddyPolicy`机制（[第三方库和类加载](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fbuddy_loading.html&cp=2_1_3_8)）。

这很简单：如果你想让插件 B 看到插件 A 的所有类和资源，只需将其添加到插件 B 的`META-INF/MANIFEST.MF`文件中：

```
Eclipse-BuddyPolicy: dependent 
```

上面的行表明插件 B 的类加载器将能够访问其依赖类加载器可以访问的内容。

我创建了一组名为 A 和 B 的插件示例，其中 B 有 2 个命令（在顶部菜单中可见）：第一个通过调用 B 中的 clojure 代码对“hello”硬编码字符串应用文本转换。第二个动态加载来自插件 A 的新文本转换，因此当您再次调用第一个命令时，您会看到应用来自 B 的转换和来自 A 的转换的结果。

毕竟，在您的情况下，甚至可能根本不需要使用 Eclipse 扩展点/扩展机制。这完全取决于您如何打算让插件 B “发现”插件 A 的相关信息。

github 存储库显示了这一点：[https ://github.com/laurentpetit/stackoverflow-12689605](https://github.com/laurentpetit/stackoverflow-12689605)

高温下，

——洛朗

# javascript - 使用 jquery 和验证插件验证 textarea

> ID：12689607
> 
> 赞同：0
> 
> 时间：2012-10-02T11:44:30.507
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我用这个插件作为我的文本编辑器[elrte](http://elrte.org/)

当我尝试验证 jquery 验证插件中的文本区域时，它不起作用

```
var ArticleFormValidation = {};
                ArticleFormValidation.init =
                {
                    setArticleFormValidation: function()
                    {
                        //form validation rules
                        $("#ArticleForm").validate({
                            rules: {
                                ArticleTitle: "required",
                                slug: "required",
                                editor: "required"

                            },
                            messages: {
                                ArticleTitle: "Please enter article title",
                                slug: "Please enter article slug",
                                editor: "Please enter article body"
                            }

                        }); 
                    }
                } 
```

它曾经只验证前 2 个字段 ArticleTitle,Slug 并且没有验证文本区域，当我删除文本编辑器代码并将该字段恢复为正常文本区域时，它可以工作

这是调用文本区域的代码

```
 var opts = {
                cssClass : 'el-rte',
                // lang     : 'ru',
                height   : 450,
                toolbar  : 'complete',
                cssfiles : ['../libs/elrte/css/elrte-inner.css']
            }
    $('#editor').elrte(opts); 
```

我需要做的是在文本区域成为编辑器时对其进行验证，因为将其用作普通文本区域是无用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:18:41.817

可以单独验证吗？

```
if($('textareaid').val().Trim().Length == 0 ){

// alert

} 
```

或者，作为一种hackaround，您可以将隐藏输入作为文本区域，并模仿在该字段中键入主文本区域并验证这一点。隐藏的输入可以是文本框或文本区域。看到这个[jsfiddle](http://jsfiddle.net/AuBn8/)

# parsing - HighCharts：意外的值 NaN 解析 y 属性

> ID：12689613
> 
> 赞同：1
> 
> 时间：2012-10-02T11:44:56.353
> 
> 标签：parsing, extjs, highcharts, extjs-mvc

我有这样的 ExtJs + Highcharts 代码：

```
Ext.define('Cabinet.view.workspace.indexCharts.Line', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.IndexLineChart',
    show: function (chartDiv, valuesList) {
        valuesList = '[' + valuesList + ']';
        console.log(valuesList);
        charts[chartDiv] = new Highcharts.Chart({
            chart: {
                renderTo: chartDiv,
                type: 'line'
            },
            title: {
                text: 'Some Title'
            },
            yAxis: {
                categories: [2005, 2006, 2007]
            },

            series: [{ data: valuesList}],

            legend: {
                layout: 'horizontal',
                align: 'center'
            }
        });
    }
}); 
```

但是在我调用这个小部件之后，我得到了一些错误：

> 解析 y 属性的意外值 NaN。
> 
> `return e}function oa(a){return Fa(a)?a:[a]}function p(){var a=arguments,b,c,d=a`

显示的控制台日志：[825557000000,1089384000000,1404492600000]

问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:53:09.040

看起来 valuesList 是一个字符串，它需要是一个数组。

您需要在将其传递给 highchart 之前将其转换为数组，您可以通过各种方式进行操作，例如

```
valuesList = '[' + valuesList + ']';
valuesList = JSON.parse(valuesList);
//OR
valuesList = jQuery.parse(valuesList);
//OR
valuesList = eval(valuesList); 
```

选择一个适合您的检查将[字符串解析为数组@jsFiddle](http://jsfiddle.net/jugal/3spMx/)了解更多关于发生的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:24:56.850

这是因为该`series.data`对象需要一个数据点数组的值，但您为其提供了一个包含数组的 JSON 表示形式的字符串。 `valueList`需要是数字数组而不是字符串。

如果`valueList`是一个数字数组，那么这一行将其转换为字符串：

```
valuesList = '[' + valuesList + ']'; 
```

不要那样做。

# java - Spring任务在特定时间范围内的固定延迟

> ID：12689616
> 
> 赞同：1
> 
> 时间：2012-10-02T11:44:58.947
> 
> 标签：java, spring, scheduled-tasks

我想要配置弹簧的任务，它将在特定时间范围内运行，`fixed-delay`但只能在特定时间范围内运行，比如说早上 6 点到下午 6 点。

我知道我可以有固定的延迟，例如：

```
<task:scheduled ref="myBean" method="myMethod" fixed-delay="60000" /> 
```

或者在一个时间范围内每隔一个小时运行一次：

```
<task:scheduled ref="myBean" method="myMethod" cron="0 * 6-18 * * MON-FRI" /> 
```

我怎样才能结合这些？当然，我可以从我的 bean 中检查时间范围，但我正在寻找一些纯粹的 Spring 方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:36:16.850

您将必须制作自己的自定义[Trigger](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/Trigger.html)。查看[此页面](http://vladjuylov.com/custom-trigger-for-spring-scheduling#.UGrfhVG13U8)以获取有关如何创建自己的触发器的更多信息

# http - 是否有任何 Web 浏览器支持带有替代摘要算法（例如 SHA-2）的 HTTP 摘要

> ID：12689617
> 
> 赞同：1
> 
> 时间：2012-10-02T11:44:59.293
> 
> 标签：http, authentication, md5, sha, digest

我希望看到当前是否有任何 Web 浏览器使用 SHA-2 等替代摘要算法支持 HTTP Digest？

我知道对 RFC-2617 的提议更新仍处于草案状态，所以只想知道是否有任何浏览器已经抢先支持替代摘要算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T18:04:06.853

在摘要认证的上下文中，MD5 的弱点不是问题。更重要的是 nonce 机制的健壮实现（最好是完整性检查，尽管只有少数浏览器支持它），因为它避免了重放和选择明文攻击。将 SHA 添加到混合中并没有任何帮助。

# php - 我运行下面的代码并出现以下错误：未定义的变量：表达式

> ID：12689618
> 
> 赞同：-9
> 
> 时间：2012-10-02T11:45:00.567
> 
> 标签：php, tags

Example #1 使用条件的高级转义 [http://www.php.net/manual/ro/language.basic-syntax.phpmode.php](http://www.php.net/manual/ro/language.basic-syntax.phpmode.php)

这是代码：这将显示表达式是否为真。否则会显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:48:02.660

> 我不明白为什么在站点 php 的 php 手册中说这有效。

如果您首先分配了一个值，它就会起作用`$expression`（并且通常可以合理地假设您在测试它之前会这样做）。

> `@$expression`

不要压制错误。避免他们

> `isset($expression)`

是的。如果`$expression`不保证设置，请在对其执行其他测试之前测试它是否已设置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-02T11:48:01.023

他们说如果 $expression 设置为 true，则执行 if 语句，如果 $expression 未设置为 true，则执行 else 语句......

因此，您的代码必须如下所示：

```
<?php $expression = true; // true for if statement, false for else statement ?>
<?php if ($expression == true): ?>
  This will show if the expression is true.
<?php else: ?>
  Otherwise this will show.
<?php endif; ?> 
```

# asp.net-mvc-4 - ASP.Net MVC4 Web Api Url 参数绑定的自定义输入验证

> ID：12689619
> 
> 赞同：2
> 
> 时间：2012-10-02T11:45:05.687
> 
> 标签：asp.net-mvc-4

有谁知道是否可以（或明智）在不创建模型类的情况下进行这种属性注释验证，所以只需像这样绑定 url 参数？

```
[HttpGet]
public Portfolio Name([MyCustomValidator, FromUri]string path) {} 
```

如果是这样，最好的方法是什么？理想情况下，我只想用验证属性标记它们，并让现有的模型绑定器和值提供者做他们通常做的事情，但会抛出验证错误。

我想用 MyCustomeValidator 做的事情是检查现有输入验证器未拾取的特定字符或字符串序列并将它们丢弃。例如;

```
path = "/foor/bar" /* is valid */
path = "$.^\n/bar" /* is illegal */ 
```

更具体地说，（如果有人将我指向 XssEncoder 或 UrlRewrite），我希望确保路径中的字符是 Base64 字符集的一部分。

# java - 如何让 PagerAdapter 加载所有页面

> ID：12689625
> 
> 赞同：19
> 
> 时间：2012-10-02T11:45:18.367
> 
> 标签：java, android, android-viewpager, fragmentpageradapter

我知道默认情况下`PagerAdapter`只加载当前、下一页和上一页。有没有办法改变它，所以它会加载每一页？谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-03T10:04:52.667

如果您有`N`页面，则可以使用[`setOffscreenPageLimit(N-1)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)，以便它将所有页面保留在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:42:26.127

> 我不确定这是一个答案，但是适配器的整个概念（也适用于列表/网格等）是您不会一直将所有视图加载到内存中，但它只会膨胀可见的内容. 考虑一个包含 10000 个项目的 ListView，如果它尝试将它们全部加载，应用程序将会崩溃。

文档在某处指出，如果您知道要显示多少页面和内容，“setOffscreenPageLimit”会很有用且速度更快。如果您知道要显示的信息并且重量不重，“setOffscreenPageLimit”实际上会提高您的性能，因为视图只会膨胀一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:48:53.687

我不确定这是一个答案，但适配器的整个概念（也适用于列表/网格等）是您不会一直将所有视图加载到内存中，但它只会膨胀可见的内容.

考虑一个包含 10000 个项目的 ListView，如果它尝试将它们全部加载，应用程序将会崩溃。

使用 Horizo​​ntalScrollView，您会将所有视图加载到内存中。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-10-02T11:49:53.797

我认为不可能一次加载所有页面。您应该重新设计代码。

# couchdb - 在 Iris Couch 上启用 CORS

> ID：12689629
> 
> 赞同：4
> 
> 时间：2012-10-02T11:45:39.807
> 
> 标签：couchdb, cors

按照[说明](https://issues.apache.org/jira/browse/COUCHDB-431?focusedCommentId=13033669&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-13033669)为我的[iriscouch](http://www.iriscouch.com/)启用 CORS ：

1.  `/_config/httpd/cors`调成`true`
2.  添加部分：`/_config/cors/my.iriscouch.com:6984`设置为`"http://localhost http://myapp.com"`

然后测试它：

```
$ curl -I https://my.iriscouch.com:6984/
HTTP/1.1 200 OK
Server: CouchDB/1.2.0 (Erlang OTP/R15B)
Date: Tue, 02 Oct 2012 10:49:18 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 40
Cache-Control: must-revalidate 
```

但**响应中****没有`Access-Control-Allow-Origin`**标题...

还尝试重新启动服务器：

```
$ curl -XPOST -HContent-Type:application/json https://me:XXXX@my.iriscouch.com:6984/_restart
{"ok":true} 
```

但没有更多的运气...

--

有没有人成功为他的 iriscouch 启用 CORS？

**注意：我的帐户应该已经应用了 CORS 补丁。**

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T07:14:29.017

我使用以下配置使其工作：

```
section | option      | value
-------------------------------
cors    | credentials | true
cors    | origins     | *
httpd   | enable_cors | true 
```

此外，如果您从 web 应用程序执行任何 ajax 请求，请确保将 **withCredentials**参数设置为**true**。

AngularJS 的示例：

```
$http({withCredentials: true, ...}).post(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T20:01:53.627

如果您打开“配置”工具，您会在“ **httpd** ”下找到“ **enable_cors** ”。您想将该值更改为“ **true** ”。

 ****接下来，如果您向下滚动到页面底部，您会发现一个“**添加新部分**”链接。您想单击它并在“ **cors** ”部分添加一个值为“ *** ”的“** **origins ”选项。**您可以将“ **origins** ”值设置为实际 URL，但这将为每个人启用 CORS。

 ******这就是我让它为我工作的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T06:36:45.863

看来这现在是可能的。虽然我还没有测试过，但我已经启用了 CORS。我刚开始玩 CouchDB。

检查配置。CORS 应显示已禁用。http://YOURDOMAIN.iriscouch.com/_utils/config.html

请参阅此处的说明以安装 add-cors-to-couchdb [http://pouchdb.com/getting-started.html](http://pouchdb.com/getting-started.html)

执行：add-cors-to-couchdb [https://YOURDOMAIN.iriscouch.com:6984](https://YOURDOMAIN.iriscouch.com:6984) -u USERNAME -p PASSWORD

结果：成功

再次检查配置。应该显示 CORS 已启用。http://YOURDOMAIN.iriscouch.com/_utils/config.html**********

# java - java - requestparam 被旧调用中的旧值淹没

> ID：12689631
> 
> 赞同：0
> 
> 时间：2012-10-02T11:45:43.600
> 
> 标签：java, spring

我`@Requestparam` `/register?name=newname`从一个页面传递过来。但是下次我调用页面`/register/confirm`时，它会在 url 中显示参数，例如`/register/confirm?name=newname`。如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:54:40.413

我最近有同样的问题。这可能会发生，因为`name`它与`@ModelAttribute`. 你有`ModelAttribute`同样的看法吗？

我不知道你的观点是如何工作的，但最好你参考`@RequestParam`as`${param.name}`而不是`name`（如果你还没有）

# java - 在 java 中连接到 https 服务——主机名中有“_”？

> ID：12689632
> 
> 赞同：1
> 
> 时间：2012-10-02T11:45:45.923
> 
> 标签：java, android, wcf, azure

我想使用 https（具有传输安全性的 webHttpBinding）连接到托管在 windows azure 上的 wcf json 服务。地址是 some_subdomain.somesite.com，当然会重定向到 someapp.cloudapp.net 我不能使用“some_subdomain.somesite.com”，因为主机名中有“_”。

原始代码

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(serviceUrl + "/" + serviceMethod);
post.setHeader("Accept", "application/json");
post.setHeader("Content-type", "application/json");
String jsonParameters = gson.toJson(parameters);
post.setEntity(new StringEntity(jsonParameters));
HttpResponse response = client.execute(post);
HttpEntity entity = response.getEntity(); // throws here
return convertStreamToString(entity); 
```

抛出 java.lang.IllegalArgumentException：主机名不能为空；

这个类似的代码：

```
 InputStream inputStream;            
        URL url = new URL(serviceUrl + "/" + serviceMethod);
        HttpURLConnection httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setRequestMethod("GET");
        httpConn.connect(); // throws exception here
        if(httpConn.getResponseCode() == HttpURLConnection.HTTP_OK)
        {
            inputStream = httpConn.getInputStream();
            ...
        } 
```

抛出 NullPointerException。

如果我只是输入IP，那么我得到

javax.net.ssl.SSLException：证书中的主机名不匹配：IP_ADDRESS！= some_subdomain.somesite.com

我正在使用生产证书，因此更改域并获取另一个证书可能不是一种选择。请注意，在 iOS 和 WinRT 版本上一切正常，只有 java 似乎有主机名问题。

那么我该如何：a）在主机名中使用带有“_”的 URL 或 b）配置服务器的预期身份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:58:02.547

您不能在主机名中添加下划线，请参见[此处](https://www.rfc-editor.org/rfc/rfc1123)和[此处](https://www.rfc-editor.org/rfc/rfc952)。

# c++ - 如何在 __declspec(uuid(" ComObjectGUID") ) 中传递动态值

> ID：12689633
> 
> 赞同：1
> 
> 时间：2012-10-02T11:45:47.683
> 
> 标签：c++, uuid, declspec

在我的代码中，这绝对可以正常工作：

```
class __declspec(uuid("842E12D3-1F2C-435D-8426-BE42150AF4DB")) guid; 
```

但是我不想传递一个 staitc 值，而是想传递这样的东西，但它给出了编译错误：

```
string result("64ca9bdb-08d2-45f7-c526-8fcaa8d5abd1");
class __declspec(uuid(result)) guid; 

//"result" will have dynamic value and that's why want to pass it a variable rather than hard coding the value 
```

有人可以建议我如何实现这一目标。

谢谢，萨南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:49:16.513

这看起来像是在编译时使用的东西。所以没有办法传递动态值。

# wordpress - wordpress costum 搜索查询通过 posta 元值搜索 costum 帖子类型

> ID：12689635
> 
> 赞同：0
> 
> 时间：2012-10-02T11:46:03.330
> 
> 标签：wordpress, wordpress-theming

我正在创建一个旅行主题，其中我创建了一些自定义帖子，例如城市、位置、目的地和酒店，并为这些自定义帖子添加更多信息我创建了一些带有一些元键的元框，例如地址、租金、酒店房间和如何到达城市、目的地和位置现在我在索引页面上有一个搜索表单，用于根据酒店自定义帖子的自定义元键搜索酒店，我必须在 function.php 中为其创建自己的自定义搜索功能并通过查看 wordpress 教程来创建[自定义搜索表单](http://codex.wordpress.org/Function_Reference/get_search_form)我只能有一个 GET 变量“？s =”，只有当它包含一些字符串时才会在 search.php 中显示结果，所以是否可以自定义搜索表单，以便我们可以传递多个搜索变量并且仍然可以在 search.php 模板上显示结果。我搜索了每个软件并尝试了不同的插件，但其中大多数提供的唯一功能是扩展搜索查询的搜索区域，默认情况下仅搜索帖子内容和帖子标题并将其更改为搜索标签，类别和自定义帖子类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:24:33.143

我认为您需要在这里解释：[Enhancing WordPress Custom Fields with Search Filtering](http://sixrevisions.com/wordpress/custom-fields-search/)

# sql - 连接表中多条记录的总和？

> ID：12689640
> 
> 赞同：0
> 
> 时间：2012-10-02T11:46:22.783
> 
> 标签：sql

我有一个这样的查询：

```
select a,b,c
from
table 
```

现在我有另一个表，其中有 hoursWorked。基本上我想要 anotherTable.hoursWorked 的总和，其中 anotherTable.a = a 和 anotherTable.b = b 和 anotherTable.c = c。

我需要什么样的查询才能做到这一点？

谢谢

像这样的东西：

```
SELECT DATE, CUSTOMER, SUM(FKEY.HOURSWORKED)
FROM TABLE1
INNER JOIN TABLE2 FKEY ON FKEY.CUSTOMER = CUSTOMER, FKEY.DATE = DATE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:51:27.427

你会写这样的东西：

```
SELECT SUM(at.hoursWorked)
FROM
    anotherTable at
    JOIN (SELECT a, b, c FROM thisTable) t
    ON at.a = t.a AND at.b = t.b AND at.c = t.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:02:11.343

修改您的示例 SQL 以使其正常工作：

```
SELECT TABLE1.DATE, TABLE1.CUSTOMER, SUM(FKEY.HOURSWORKED) AS HOURSWORKED
FROM TABLE1
INNER JOIN TABLE2 FKEY
ON FKEY.CUSTOMER = TABLE1.CUSTOMER AND FKEY.DATE = TABLE1.DATE
GROUP BY TABLE1.DATE, TABLE1.CUSTOMER 
```

最重要的变化是我添加了一个`GROUP BY`子句。

# php - 选择框不保留价值

> ID：12689642
> 
> 赞同：0
> 
> 时间：2012-10-02T11:46:37.167
> 
> 标签：php, javascript, mysql

我有以下代码来保留选择框的值，该选择框在更改时提交表单。

```
<form id="form2" name="form2" method="post" action="index.php" >
    <table width="98%" border="0">
      <tr>
        <td>SPAK Ref</td>
        <td><select name="SPKSelect" id="SPKSelect" onchange="document.forms[0].submit();document.forms['form2'].submit(); ">

                    <option value="">-- Select Ref --</option>
            <?php    

                $selectedSPK = $_POST['SPKSelect'];
                $assigned = $_POST['Sales_Exec'];
                $date = $_POST['DateSelect'];

                if ($selectedSPK);
                {
                    $SPKquery = "SELECT DISTINCT SPKCustNo FROM Data WHERE Assigned = '$assigned' AND RenewalDate = '$date' ORDER by RenewalDate";

                    $SPKresult = mysql_query($SPKquery);

                    while($row = mysql_fetch_array($SPKresult))
                    {
                        echo "<option value=\"".$row['SPKCustNo']."\">".$row['SPKCustNo']."</option>\n  ";
                    }

                }
            ?>
            <script type="text/javascript">
                document.getElementById('SPKSelect').value = <?php echo json_encode(trim($selectedSPK));?>;
            </script>
        </select> 
```

这不起作用，它只是默认回到原来的 --Select Ref--- 选项。

我有这个确切的代码适用于其他选择框，`'form1'`但是这是“form2”中的第一个，它位于表单 1 旁边。据我所知，它没有保留 的`POST`值`SPKSelect`。这与我的事实有关吗？ m 使用 2 个表单？POST 是否仅适用于每页 1 个表单？如果可以，我该如何解决？

完整页面如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>TIL / 006 Renewal Support Tool</title>
<link href="RenewalToolStyles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="scripts/functions.js"></script>

</head>

<?php

//Connect to Server / Database
$conn = mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("TILRenewals");

function GenerateTable($Query)
{
    $host = "localhost";
$user = "root";
$pass = "";
$db = "TILRenewals";
    $link = mysql_connect($host, $user, $pass) or die('Could not connect: ' . mysql_error());      //build MySQL Link
    mysql_select_db($db) or die('Could not select database');        //select database
    $Table = "";  //initialize table variable

    $Table.= "<table border='1' style=\"border-collapse: collapse; text-align: center; font-size: small; cellspacing: 10px; \">"; //Open HTML Table

    $Result = mysql_query($Query); //Execute the query
    if(mysql_error())
    {
        $Table.= "<tr><td>MySQL ERROR: " . mysql_error() . "</td></tr>";
    }
    else
    {
        //Header Row with Field Names
        $NumFields = mysql_num_fields($Result);
        $Table.= "<tr style=\"background-color: #000; text-align: center; color: #FFFFFF; font-size: medium;\">";
        for ($i=0; $i < $NumFields; $i++)
        {     
            $Table.= "<th>" . mysql_field_name($Result, $i) . "</th>"; 
        }
        $Table.= "</tr>";

        //Loop thru results
        $RowCt = 0; //Row Counter
        while($Row = mysql_fetch_assoc($Result))
        {
            //Alternate colors for rows
            if($RowCt++ % 2 == 0) $Style = "background-color: #3D6522; color: #FFFFFF;";
            else $Style = "background-color: #FFFFFF; color:#3D6522;";

            $Table.= "<tr style=\"$Style\">";
            //Loop thru each field
            foreach($Row as $field => $value)
            {
                $Table.= "<td>$value</td>";
            }
            $Table.= "</tr>";
        }
       // $Table.= "<tr style=\"background-color: #000066; color: #FFFFFF;\"><td colspan='$NumFields'>Query Returned " . mysql_num_rows($Result) . " records</td></tr>";
    }
    $Table.= "</table>";

    return $Table;

}

?>

<body>

<div class="container">
  <div class="header"><img src="Images/Banner.png" width="728" height="90" /><!-- end .header --></div>
  <div class="content">
  <div id ="leftcolumn">
    <h2>View Assigned Cases</h2>
    <form id="form1" name="form1" method="post" action="index.php">

        <p>Sales Exec
          <select name="Sales_Exec" id="Sales_Exec" onchange="document.forms[0].submit();">

            <option value="">-- Select SE --</option>
            <?php    

$salesexec=$_POST['Sales_Exec'];

if ($salesexec);

{
    $Execquery = "SELECT DISTINCT Assigned FROM Data";

$Execresult = mysql_query($Execquery);

while($row = mysql_fetch_array($Execresult))
{
    echo "<option value=\"".$row['Assigned']."\">".$row['Assigned']."</option>\n  ";
}

}
?>
<script type="text/javascript">
document.getElementById('Sales_Exec').value = <?php echo json_encode(trim($_POST['Sales_Exec']));?>;
        </script>
          </select>
          Date
          <select name="DateSelect" id="DateSelect" onchange="document.forms[0].submit();">
            <option value="">-- Select Date --</option>
            <?php    

$selecteddate=$_POST['DateSelect'];

if ($selecteddate);

{
    $Datequery = "SELECT DISTINCT RenewalDate FROM Data ORDER by RenewalDate";

$Dateresult = mysql_query($Datequery);

while($row = mysql_fetch_array($Dateresult))
{
    echo "<option value=\"".$row['RenewalDate']."\">".$row['RenewalDate']."</option>\n  ";
}

}
?>
<script type="text/javascript">
document.getElementById('DateSelect').value = <?php echo json_encode(trim($_POST['DateSelect']));?>;
        </script>
          </select>
        </p>
        <p>
          <?php

    $assigned = $_POST['Sales_Exec'];
    $date = $_POST['DateSelect'];
    echo GenerateTable("SELECT SPKCustNo, RenewalDate, Product, ForeName, Surname FROM Data WHERE Assigned = '$assigned' AND RenewalDate = '$date' ");

?>
        </p>
    </form>

    <p>&nbsp;</p>
  </div>
  <div id ="rightcolumn">
  <h2>View Individual Case</h2>
  <form id="form2" name="form2" method="post" action="index.php" >
    <table width="98%" border="0">
      <tr>
        <td>SPAK Ref</td>
        <td><select name="SPKSelect" id="SPKSelect" onchange="submit_form('form1'); submit_form('form2'); ">

                    <option value="">-- Select Ref --</option>
            <?php    

$selectedSPK = $_POST['SPKSelect'];
$assigned = $_POST['Sales_Exec'];
$date = $_POST['DateSelect'];

    $SPKquery = "SELECT DISTINCT SPKCustNo FROM Data WHERE Assigned = '$assigned' AND RenewalDate = '$date' ORDER by RenewalDate";

$SPKresult = mysql_query($SPKquery);

while($row = mysql_fetch_array($SPKresult)) {

    if($row["SPKCustNo"] == $selectedSPK){

         $select_true = "selected='selected'";

    }

         print "<option " . $select_true . " value='" .$row["SPKCustNo"] . "'>" . $row["SPKCustNo"] . "</option>";

    }

?>

    <script type="text/javascript">
document.getElementById('SPKselect').value = <?php echo json_encode(trim($_POST['SPKSelect']));?>;
        </script>    

        </select>
     </td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td width="33%">ForeName</td>
        <td><select name="FName" id="FName">

          <option value="">--Customer ForeName---</option>
          <?php
                $assigned = $_POST['Sales_Exec'];
                $date = $_POST['DateSelect'];
                $selectedSPK = $_POST['SPKSelect'];

                if ($selectedSPK) {

                $FNamequery = "SELECT ForeName FROM Data WHERE  SPKCustNo = '$selectedCust'";

                $FNameresult = mysql_query($FNamequery);

                while($row = mysql_fetch_array($FNameresult))
                {
                    echo "<option value=\"".$row['ForeName']."\">".$row['ForeName']."</option>\n  ";
                }

                }

            ?>
          <script type="text/javascript">
document.getElementById('FName').value = <?php echo json_encode(trim($_POST['FName']));?>;
            </script>

        </select></td>
      </tr>
      <tr>
        <td></td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
  </table>
    <p>&nbsp;</p>
  </form>
  <p>&nbsp;</p>
  </div>

  <!-- end .content --></div>

   <div class="footer">
    <p>Footer<img src="Images/TILLogo.png" width="150" height="79" /></p>
    <!-- end .footer --></div>
  <!-- end .container --></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:53:14.123

**重要编辑：**

我忽略了一件大事！

当您提交表单时，仅当前表单中的字段通过请求发送。

有一个解决方法，您可以在当前表单中拥有与第一个表单的输入相对应的隐藏字段，并在提交之前使用 javascript 将值从第一个表单复制到当前隐藏元素。然后提交当前表格。

onchange 中可能出现的错误：

```
onchange="document.forms[0].submit();document.forms['form2'].submit(); " 
```

将其更改为：

```
onchange="document.forms['form2'].submit();" 
```

当您执行 mysql_fetch 时，请执行此操作，以便您知道当前数据是什么，以便您可以选择它，如下所示：

```
 while($row = mysql_fetch_array($SPKresult)) {

    if($row["SPKCustNo"] == $selectedSPK){

         $select_true = "selected='selected'";

    }

         print "<option " . $select_true . " value='" .$row["SPKCustNo"] . "'>" . $row["SPKCustNo"] . "</option>";

    } 
```

就像 Laurent 说的，你需要从这一行中删除分号：

```
if ($selectedSPK);
{ 
```

它应该是这样的：

```
if ($selectedSPK) { 
```

**编辑 JAVASCRIPT 提示：**

创建外部 .js 文件，例如“workers.js”，将其放入 js 目录中，并将其包含在 HTML 头部，如下所示：

```
<script type="text/javascript" src="js/workers.js"></script> 
```

然后在该文件中编写您的 javascript 函数，第一个函数是用于提交表单：

```
function submit_form(formid) {

    document.getElementById(formid).submit();

} 
```

然后像这样从 HTML onchange 调用它：

```
onchange="submit_form('form_id');" 
```

这是一种更简洁的方法，并且从长远来看，它将为您提供可读的代码。

也可以试试：[http](http://www.smarty.net) ://www.smarty.net （用于 php 模板）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:03:05.700

为什么你有以下内容：

```
$date = $_POST['DateSelect'];

if ($selectedSPK); // The semi colon should not be there
{ 
```

# ruby-on-rails - 如何使用 bootstrap-sass gem 在我的其他 css 之前加载引导 css？（导轨）

> ID：12689645
> 
> 赞同：1
> 
> 时间：2012-10-02T11:46:50.070
> 
> 标签：ruby-on-rails, twitter-bootstrap

我有这样的问题：我包括使用引导程序

```
 @import "bootstrap"; 
```

在我的 footer.css.scss 中，我的 css 被引导程序覆盖。如何在所有文件之前预加载引导程序？

我试图删除这一行，但它继续覆盖我的 css。

如何在我的文件之前加载引导 css？

# java - 支持删除的不相交集数据结构

> ID：12689651
> 
> 赞同：9
> 
> 时间：2012-10-02T11:47:27.603
> 
> 标签：java, c++, algorithm, data-structures

假设我们有一组 n 个不相交的节点 {node [1] ,node [1] ,...,node [n] }

以下3种操作最快的数据结构和算法是什么：

1.  [union(x,y)：在节点x]和节点[y]之间添加一条无向边，两个节点之间最多可以有一条边。

2.  IsConnected(x,y)：如果节点[x]和节点[y]直接或间接连接，即节点[x]和节点[y]在同一个连通分量中，则返回 true。

3.  Un-union(x,y)：如果存在，则删除节点[x]和节点[y之间的边。]

不相交集对于前两个操作是一个完美的数据结构，但它不能直接支持第三个操作。什么是替代方案？

如果我们模拟这个过程，第一个和第三个操作可以在 O(1) 中实现，但第二个操作是 O(n)，所以我想看看是否有可能让所有三个操作都在 O(logn) 时间内运行或更少。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T12:02:02.500

[链接/切割树](http://en.wikipedia.org/wiki/Link/cut_tree)可以在 O(log N) 时间内执行这 3 个操作。

您可以在本书中阅读有关链接/切割树和相关数据结构的信息：[“数据结构和应用程序手册”](https://rads.stackoverflow.com/amzn/click/com/1584884355)（第 35 章）。

链接/切割树不允许在已经（间接）连接的节点之间添加边。如果您需要“Union(x,y)”操作来支持这一点，问题会变得更加复杂，您可以将其解决为无向图中的动态连通性问题。（参见同一本书或[此 pdf](http://www.diku.dk/PATH05/CRC-book1.pdf)中的第 36.4 章）。在这种情况下，插入/删除复杂度增加到 O(log ² N)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T12:26:03.050

[Kaplan、Shafrir 和 Tarjan](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.13.4443)提出了一种通用技术，通过增量重建向联合查找数据结构添加删除，并显示删除需要 O(t_f(n) + t_i(n))，它们分别是查找和插入节点的成本。总体思路是保持每个集合中已删除项目的数量，并在该数量达到某个阈值时重建集合。

[Alstrup、Gørtz、Rauhe、Thorup 和 Zwick](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.88.6803)展示了如何通过注意树中的哪些元素被*占用*以及哪些元素是*空*的并在删除操作后“整理”树来在恒定时间内实现删除。

# java - 如何使用 JPA 以并发安全的方式获取非重叠日期范围的间隙？

> ID：12689652
> 
> 赞同：4
> 
> 时间：2012-10-02T11:47:29.977
> 
> 标签：java, jpa, jpa-2.0

## 问题

假设我有以下实体：

```
@Entity
public class TimeSlot {

    @Id
    private DateTime start;
    private DateTime end;

    // other properties and accessors
} 
```

我有几个这样的对象存储在 SQL 数据库中，我可以保证它们不会重叠，但这些范围之间可能存在间隙。现在，我想实现一个函数，在给定开始日期和结束日期的情况下，将`TimeSlot`在给定间隔的每个间隙中创建并保持一个新的：

```
public List<TimeSlot> aquireGaps(DateTime start, DateTime end); 
```

## 例子

为了更具体，假设我们只使用整数而不是日期。我的桌子现在看起来像这样：

```
+-------+-----+
| start | end |
+-------+-----+
|     1 |   5 |
|     8 |  12 |
|    20 |  24 |
+-------+-----+ 
```

调用该函数后，`aquireGaps(3, 22)`我希望表格如下所示：

```
+-------+-----+
| start | end |
+-------+-----+
|     1 |   5 |
|     6 |   7 | <-- new interval fills gap
|     8 |  12 |
|    13 |  19 | <-- new interval fills gap
|    20 |  24 |
+-------+-----+ 
```

## 问题

问题是，如何将其实现为事务。具体来说，我想防止任何其他线程/进程`TimeSlot`在我正在操作的时间间隔内的任何间隙中创建一个新线程/进程。性能不是问题，因为并发用户的数量非常少。我正在寻找最容易实现的解决方案。

在普通的 JDBC 中，我会使用 transaction-isolation-level `SERIALIZABLE`，但是在 JPA 中没有设置隔离级别的标准方法。我正在寻找一种不依赖于供应商特定功能的解决方案。

或者，如果提交失败，我可以只使用乐观锁定并重试，但这需要额外的错误处理逻辑。

是否有任何可行的替代方案，或者是乐观锁定/重试失败的方式进入 JPA？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:58:10.923

我不清楚您要做什么，也许可以更好地解释。您要防止发生什么特定 SQL？

您似乎试图避免并发插入，这是锁定或可序列化事务隔离对您没有帮助的东西，行锁定只能防止对同一行的并发更新/删除。

主键或唯一约束应该足以防止两个事务插入具有相同 startDate 的 TimeSlot。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Locking](http://en.wikibooks.org/wiki/Java_Persistence/Locking)

# wcf - 如何在 dotnetnuke 中运行 WCF 服务

> ID：12689660
> 
> 赞同：0
> 
> 时间：2012-10-02T11:48:16.843
> 
> 标签：wcf, dotnetnuke, wcf-data-services, wcf-client

我正在尝试在 DNN 下运行 WCF 服务。
我创建了一个新的 WCF 服务网站项目并将输出设置为`C:\inetpub\...\dotnetnuke\bin`
我还从该项目中删除了 web.config。
然后我在控制台项目上创建并尝试添加服务引用，但出现以下错误：

```
An error occured while attempting to find services at 'http://localhost:5847/MyService/Service.svc 
```

我将旧 Web 配置中的代码删除到 dnnweb 配置`<system.serviceModel>`，但仍然无法正常工作。我想要做的是能够使用 url 访问 web 服务

```
localhost/dotnetnuke/portal/mywebservice... 
```

而不是默认的

```
localhost:XXXX/... 
```

这是来自我的 dotnetnuke web.config

```
<system.serviceModel>
    <services>
      <service name="Service" behaviorConfiguration="ServiceBehavior">        
        <endpoint address="localhost/dotnetnuke/service.svc" binding="wsHttpBinding" contract="IService">         
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">          
          <serviceMetadata httpGetEnabled="true"/>          
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

如果我在浏览器中输入完整地址

```
http://localhost/dotnetnuke/desktopmodules/com.demo.service/service.svc 
```

我收到以下错误页面：

> 找不到类型“服务”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:44:01.957

即使你确实让它工作了，你也只会遇到调用任何 DNN API 的麻烦，因为你的请求不会有完整的 DNN 上下文。

一个更简单的解决方案是使用服务框架。它最初是在 6.2 中发布的，带有基于 MVC2 的实现，并且很快将在 7.0 中使用基于 WebAPI 的实现进行更新。

[您可以在此处](http://www.dotnetnuke.com/Resources/Blogs/BlogID/245.aspx)找到有关使用服务框架的几篇文章。

# java - 从多语言内容的 JAVA 导出 Excel

> ID：12689663
> 
> 赞同：0
> 
> 时间：2012-10-02T11:48:41.443
> 
> 标签：java, excel, multilingual

我正在尝试从涉及一些多语言（日语）内容的 JAVA 导出和 MS Excel 表。我已经尝试了几件事，但多语言（日语）内容在导出的 Excel 工作表中没有正确显示。

我正在从数据库中获取内容（我已经检查了数据库，多语言日语内容已正确保存）

```
String fileName = "output"+".xls";
ExcelExport excelExporter = new ExcelExport();
excelExporter.ExportExcel(fileName, ....);  // Writing Database Fields to Excel
File file = new File(fileName);
int length = 0;
response.setContentType("application/vnd.ms-excel");
response.setContentLength((int) file.length());
response.setHeader("Content-Disposition", "attachment; filename=\""+ file.getName() + "\"");
ServletOutputStream outputStream = response.getOutputStream();
byte[] bbuf = new byte[1024];
DataInputStream in = new DataInputStream(new FileInputStream(file));
while ((in != null) && ((length = in.read(bbuf)) != -1)) 
{
    outputStream.write(bbuf, 0, length);
}

in.close();
outputStream.flush();
outputStream.close();
file.delete(); 
```

它向我展示了对**iso-8859-1**的编码（通过使用 **response.getCharacterEncoding();**函数），这可能是问题吗？因为英语在 Excel 文件中运行良好，所以只有多语言（日语）出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:03:14.573

不要关闭`outputStream`响应。此外，使用 BufferedInputStream 而不是更适合对象的 DataInputStream。

`in != null`不需要测试。bbuf 维度可能更大，例如 4096。

# javascript - 通过 getElementById 定位另一个元素中的元素

> ID：12689668
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:48:55.810
> 
> 标签：javascript

我有两个这样的元素：

```
<div id="first">
    <div id="test"></div>
</div>

<div id="second">
    <div id="test"></div>
</div> 
```

然后我想getElementbyId（'test'），但是我需要第一个div中的'test'。同时这是一个示例，我的 div 没有预定义的顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:49:44.470

具有相同 ID 的多个元素是无效的，因此您不能。

你应该`class="test"`改用。

```
<div id="first">
    <div class="test"></div>
</div>

<div id="second">
    <div class="test"></div>
</div> 
```

然后这样做：

```
var t = document.getElementById("second").querySelector(".test"); 
```

或者只是这样：

```
var t = document.querySelector("#second .test"); 
```

这将支持所有现代浏览器，包括 Internet Explorer 8。如果您需要对 IE 7 及更低版本的支持，则需要一个帮助方法来按类获取元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:06:57.240

user1689607的评论re multiple ID's承受，假设你上面显示的html是逐字的（也就是说，你可以用你所拥有的类或id来识别容器div）

这工作正常，在 chrome 中测试。

```
function mClick()
{
    var mfirst, msecond;

    mfirst = document.getElementById('first');
    msecond = document.getElementById('second');

    alert(mfirst.querySelector('#test').innerHTML);
    alert(msecond.querySelector('#test').innerHTML);
}

<div id="first">
    <div id="test">test1</div>
</div>

<div id="second">
    <div id="test">test2</div>
</div>

<input onclick='mClick();' value='click' type='button'/> 
```

# css - ie9 hack @root 更少

> ID：12689669
> 
> 赞同：1
> 
> 时间：2012-10-02T11:48:57.137
> 
> 标签：css, internet-explorer-9, less

在普通的 CSS 中，下面的代码是有效的

```
:root #element { color:pink \0/IE9; } 
```

但是我怎样才能在 LESS 中编写它，目标类在下面几层？

```
Level 1{
   Level2{
      Level3{
      /*IE 9 hack here*/
      }
   }
 } 
```

如果我在 Level 上添加@root，@root 将出现在每个 Level3 和 Level 2 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:16:57.800

使用 & 引用父级

例如

```
Level3 {
    :root & {
    }
} 
```

# c# - 一页垂直其他页面水平

> ID：12689672
> 
> 赞同：1
> 
> 时间：2012-10-02T11:49:09.350
> 
> 标签：c#, asp.net, reporting-services

我有一份 SSRS 报告 (PDF)，其中显示了属于我们部门的一些库存。这就是我的报告的样子。MyTablix1 显示部门信息 MyTablix2 显示库存。

```
---------------------
|                   |
|    MyTablix1      |
|    ---------      |
|    |       |      |
|    ---------      |
|                   |
|    MyTablix2      |
|    ---------      |
|    |       |      |
|    ---------      |
|                   |
--------------------- 
```

但我想做的是我的第一页应该是垂直的，并且只显示 MyTablix1 这是部门信息。第二页应该是水平的，MyTablix2 应该使用页面的左侧和右侧，如下所示。

```
---------------------
|                   |
|    MyTablix1      |
|    ---------      |
|    |       |      |
|    ---------      |
|                   |
|                   |
|                   |
|                   |
|                   |
|                   |
---------------------

---------------------------------
|                               |
|    MyTablix2      MyTablix2   |
|    ---------      ---------   |
|    |       |      |       |   |
|    ---------      ---------   |
|                               |
|                               |
--------------------------------- 
```

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:54:00.063

我有坏消息要告诉你。Afaik这在 SSRS 中**是不可能的。**页面尺寸是报表本身的属性，您不能在内容中途更改它们。

我能看到的“最简单”的解决方法是首先渲染（例如到 PDF）报告 1 中的肖像位，然后以横向渲染第二个报告，并进行自定义后处理以将两个文档连接在一起。

# java - SPDY “Hello server” 与 Jetty

> ID：12689676
> 
> 赞同：7
> 
> 时间：2012-10-02T11:49:31.927
> 
> 标签：java, jetty, spdy

我正在尝试使用[Jetty](http://www.eclipse.org/jetty/)设置一个最小的 HTTP over SPDY 服务器，用于测试目的。我正在处理这段代码：

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.server.Connector;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.spdy.http.HTTPSPDYServerConnector;
import org.eclipse.jetty.util.ssl.SslContextFactory;

import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;

public class MySPDYHelloServer {
    public static void main(String[] args) throws Exception {
        Server server = new Server();

        SslContextFactory sslFactory = new SslContextFactory();
        sslFactory.setKeyStorePath("dummy_keystore.jks");
        sslFactory.setKeyStorePassword("password");
        sslFactory.setProtocol("TLSv1");

        Connector connector = new HTTPSPDYServerConnector(sslFactory);
        connector.setPort(8443);
        server.addConnector(connector);

        server.setHandler( new AbstractHandler(){
            public void handle(String target, Request baseRequest,
                    HttpServletRequest request, HttpServletResponse response)
                    throws IOException, ServletException {
                response.setContentType("text/html;charset=utf-8");
                response.setStatus(HttpServletResponse.SC_OK);
                baseRequest.setHandled(true);
                response.getWriter().println("<h1>Hello World</h1>");
            }
        } );

        server.start();
        server.join();
    }
} 
```

我已经生成了密钥库：

```
keytool -genkey -keystore dummy_keystore.jks 
```

当我指向 Google Chrome（启用 SPDY）时，`https://localhost:8443`它会警告我有关不受信任的证书，然后*永远*加载。

纯 SPDY 客户端-服务器示例（来自[此处](http://www.smartjava.org/content/how-use-spdy-jetty)）可以工作，一个简单的 HTTPS 服务器也可以工作；该问题似乎与[HTTPSPDYServerConnector](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/spdy/http/HTTPSPDYServerConnector.html)类有关。

这是我正在使用的 JAR 列表：

```
jetty-all-7.6.7.v20120910.jar
npn-boot-7.6.2.v20120308.jar
servlet-api-2.5.jar
spdy-core-7.6.7.v20120910.jar
spdy-jetty-7.6.7.v20120910.jar
spdy-jetty-http-7.6.7.v20120910.jar 
```

对于我的 Java 环境而言：

```
$ cat /opt/jdk1.7.0_07/release 
JAVA_VERSION="1.7.0"
OS_NAME="Linux"
OS_VERSION="2.6"
OS_ARCH="i586" 
```

# 解决方案附录

[jesse mcconnell](https://stackoverflow.com/users/1185262/jesse-mcconnell)提供了[答案](https://stackoverflow.com/a/12689770/477168)，无论如何使用 Eclipse 的人可能会发现以下内容很有用。

JAR`npn-boot-7.6.2.v20120308.jar`必须（也）放置在：

```
Run Configurations... -> Classpath -> Bootstrap Entries -> Add External JARs 
```

请注意，由于**顺序很重要**，因此该条目必须出现**在**`JRE System Library`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:56:23.907

启动时是否使用 npn-boot 作为引导类路径 jar？

Stock jvm 将不支持 npn（下一个协议协商）并且 spdy 将不起作用，因此您必须确保 npn-boot jar 与 -Xbootclasspath 选项一起使用。这听起来有点像你的问题，因为你处理证书加载然后它的停滞......你也将 npn-boot 称为依赖项，因为它更多的是替换 jvm 类而不是典型的依赖项。

# python - 自定义 Django 评论应用

> ID：12689680
> 
> 赞同：2
> 
> 时间：2012-10-02T11:49:49.650
> 
> 标签：python, django, django-comments

我在自定义 django 评论框架时遇到问题。我需要添加一个“公司”字段。我已经按照文档进行操作，但并没有真正到达任何地方。它离工作不远，因为当我将 COMMENTS_APP = 'comments_app' 添加到我的 settings.py 时，'comments' 应用程序会从管理界面消失。当我尝试写评论时，它会出现公司字段，它会在其中询问您的电子邮件、网址等。

我希望能够查看管理面板中的所有评论以及我添加的公司字段。

我需要创建一个 admin.py 还是我只是缺少一些东西？

这是我的自定义评论应用程序的代码：

//楷模

```
 from django.db import models
    from django.contrib.comments.models import Comment

    class CommentWithAddedFields(Comment):
        company = models.CharField(max_length=300) 
```

//FORMS.py

```
from django import forms
from django.contrib.comments.forms import CommentForm
from comments_app.models import CommentWithAddedFields

class CommentFormWithAddedFields(CommentForm):
    company = forms.CharField(max_length=300)

    def get_comment_model(self):

        return CommentWithAddedFields

    def get_comment_create_data(self):

        data = super(CommentFormWithAddedFields, self).get_comment_create_data()
        data['company'] = self.cleaned_data['company']
        return data 
```

//__init.py

```
from comments_app.models import CommentWithAddedFields
from comments_app.forms import CommentFormWithAddedFields

def get_model():
    return CommentWithAddedFields

def get_form():
    return CommentFormWithAddedFields 
```

我已经在我的 settings.py 文件中添加了应用程序，并添加了 COMMENTS_APP = 'comments_app' ，如上所述。

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:59:41.580

`admin.py`是的，如果您希望您的模型出现在 django 管理员中，您需要为您的自定义评论应用程序创建一个。您应该能够继承`CommentsAdmin`, 并根据需要进行自定义。

```
from django.contrib import admin
from django.utils.translation import ugettext_lazy as _, ungettext
from django.contrib.comments.admin import CommentsAdmin
from django.contrib.comments import get_model

from comments_app.models import CommentWithAddedFields

class MyCommentsAdmin(CommentsAdmin):
    # Same fieldsets as parent admin, but include 'company'
    fieldsets = (
        (None,
           {'fields': ('content_type', 'object_pk', 'site')}
        ),
        (_('Content'),
           {'fields': ('user', 'user_name', 'user_email', 'user_url', 'company', 'comment')}
        ),
        (_('Metadata'),
           {'fields': ('submit_date', 'ip_address', 'is_public', 'is_removed')}
        ),
     )

# Only register the admin if the comments model is CommentWithAddedFields
# The equivalent section in django.contrib.comments.admin is what prevents 
# the admin from being registered when you set COMMENTS_APP = 'comments_app' 
# in your settings file
if get_model() is CommentWithAddedFields:
    admin.site.register(CommentWithAddedFields, MyCommentsAdmin) 
```

# iframe - 错误 501：iframe 中的 https 页面

> ID：12689686
> 
> 赞同：1
> 
> 时间：2012-10-02T11:50:03.113
> 
> 标签：iframe, ssl

我的页面中有一个 iframe，我想在 iframe 中使用 SSL 证书打开 https 页面（在其他域上）。但是当我尝试时，我在 iframe 中看到了错误 501，我可以做任何事情。如果我在页面不在 iframe 中时打开该页面，我会得到标准的红色页面，说明该网站不安全（在 Chrome 中）。如果我单击“继续”，页面将正常加载。然后我可以返回带有 iframe 的页面，一切正常，但我想防止这个错误。我希望我的访问者在不这样做的情况下查看该页面，而不会出现错误消息。我该怎么做？

# jquery - Jquery 和 Regex 数字检查

> ID：12689691
> 
> 赞同：2
> 
> 时间：2012-10-02T11:50:28.040
> 
> 标签：jquery, regex

大家好，在检查日期是否正常工作时，正则表达式和 Jquery 有一点问题。

目前它不接受数字 01 但接受 02+ 但在 31 以上的范围内按预期工作。

这是 js 小提琴页面。[http://jsfiddle.net/b3aHt/](http://jsfiddle.net/b3aHt/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:52:23.143

`01`失败是因为`dob < 2`.

我不认为正则表达式在这里提供了一个非常简洁的解决方案。我宁愿测试

```
if(dob.length != 2 || isNaN(dob) || dob < 0 || dob > 31) {
   // not between 01 and 31
} 
```

# c# - 是否有任何真实世界的 MonoMac 应用程序获得了 Mac AppStore 的批准？

> ID：12689702
> 
> 赞同：5
> 
> 时间：2012-10-02T11:51:31.393
> 
> 标签：c#, .net, cocoa, xamarin.ios, monomac

*（我确实希望我的问题仍然适合[这里允许提出的问题](https://stackoverflow.com/faq#questions)）*

[在使用MonoTouch](http://xamarin.com/monotouch)成功开发和部署 iPhone 应用程序后，我也在寻找在 OS X 上实现它的方法。

我发现的是[MonoMac](http://www.mono-project.com/MonoMac)（[也在 Github 上](https://github.com/mono/monomac)），它看起来很有希望。

由于大多数东西似乎来自 2010/2011，我不确定这是否仍然是最新的。

**因此，我的问题是：**

*   有没有最近成功提交到 Mac OS X AppStore 的真实应用程序？
*   你会推荐现在将它用于商业项目吗？
*   有没有可行的替代方案？（除了学习目标 C，我目前正在做）

# javascript - 然后在 Deferred 中的多个 doneCallbacks

> ID：12689704
> 
> 赞同：0
> 
> 时间：2012-10-02T11:51:36.647
> 
> 标签：javascript, jquery, jquery-deferred

[deferred.then()](http://api.jquery.com/deferred.then/)的文档指出 doneCallbacks 是`A function, or array of functions, called when the Deferred is resolved.`

当我写任何一个 `.then(new Array(getData2, showDiv))`或 `.then([getData2, showDiv])` 没有一个被调用时。

**什么是正确的语法？**

## 更新

数组的语法应该是括号`.then(new Array(getData2(), showDiv()))`还是 `.then([getData2(), showDiv()])`括号？

见[http://jsfiddle.net/JSw5y/894/](http://jsfiddle.net/JSw5y/894/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-02T12:07:29.500

这~~似乎是~~jQuery 中的一个错误。

一个简单的解决方法；

```
var CallbackHandler = (function () {
    var callbacks = [];

    return {
        'add': function (fn) {
            callbacks.push(fn);
            return this;
        },
        'executor': function () {
            var calledBy = this;
            $.each(callbacks, function () {
                this.call(calledBy);
            });
        }
    };

})();

CallbackHandler
    .add(function () {
        // first callback
    })
    .add(function () {
        // second callback
    });

// Called as:
$.when({a: 1})
 .then(CallbackHandler.executor); 
```

# c# - NHibernate 事务中的读取操作

> ID：12689706
> 
> 赞同：0
> 
> 时间：2012-10-02T11:51:50.037
> 
> 标签：c#, nhibernate, transactions

根据[this question和相应的答案](https://stackoverflow.com/questions/1657465/nhibernate-transactions-on-reads)，强烈建议NHibernate即使是读取操作也使用事务。我不确定何时获取数据。想象一下，我们有一个简单的 MSQL Server 数据库读取操作：

```
var topics = _topicRepository.Read(0, 10); 
```

其中主题存储库的读取方法只返回值的枚举：

```
public IEnumerable<Topic> Read(int beginIndex, int amount)
{
    return _session.Query<Topic>().Skip(beginIndex).Take(amount);
} 
```

据我了解，NHibernate 不会从数据库中提取值（根据延迟初始化），直到我们调用 ToList() 或对数据进行任何其他操作。但是，当我们将此*Read*调用包装到事务中并通过调用 ToList() 获取数据直到事务提交时会发生什么？

```
transaction.Begin();
var topics = _topicRepository.Read(0, 10).ToList();
transaction.Commit(); 
```

调用 ToList() 将立即发出数据库请求（这意味着 NHibernate 应该运行事务，其中将包含单个读取操作），而不是提交什么？它不会像交易中的新交易吗？提前感谢您的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:55:25.043

读取操作将立即进行。如果你想推迟它们，你应该考虑使用该`.ToFuture()`方法。

另外，请确保您在使用 nhibernate 时阅读[了 nhibernate 的这个（以及它的其他部分）陷阱。](http://weblogs.asp.net/ricardoperes/archive/2012/07/18/nhibernate-pitfalls-eager-loading-multiple-collections.aspx)

# django - 使用 Admin 管理模型字段

> ID：12689707
> 
> 赞同：0
> 
> 时间：2012-10-02T11:51:51.083
> 
> 标签：django, entity-attribute-value

我想使用 django-eav 在我的 Django 项目中实现实体属性值。

我应该怎么做，让管理员使用管理站点添加或修改模型？有这个应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:20:23.577

我发现 django-dynamo 应用程序是我正在寻找的东西。

[https://bitbucket.org/shacki/django-dynamo/](https://bitbucket.org/schacki/django-dynamo/)

# wiki - 在 Dokuwiki 中自动命名页面

> ID：12689708
> 
> 赞同：2
> 
> 时间：2012-10-02T11:51:52.240
> 
> 标签：wiki, dokuwiki

是否可以在 Dokuwiki 中自动命名页面中的链接（使用页面名称）？

即，如果我在全局命名空间中创建一个页面 [[projects]]，并在其中放置任何进一步的链接

```
e.g.  [[project1]], [[project2]] 
```

这些页面应该自动位于“项目”命名空间下。

这可能吗（本机或通过插件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:15:27.093

我找到了一种解决方法，可以实现我想要实现的目标。

页面中的任何链接，如果属于该页面的主题，我链接如下

```
[[.subject:]] 
```

这会自动使其成为一个链接

```
current_namespace:subject:start 
```

将命名空间的登录页面从“开始”更改为“索引”后，我得到的行为与我最初寻找的内容很接近，即链接

```
[[.topic1:]] 
```

在一个页面中

```
[[project1:index]], 
```

将指向

```
[[project1:topic1:index]] 
```

# java - Java / Android - 四舍五入的方程式

> ID：12689712
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:52:11.060
> 
> 标签：java, android, math

我正在构建一个安卓应用程序。在我的应用程序中，我需要能够舍入一个双精度数（例如 42.42），并且还需要得到我在原始数字上加了多少才能将其舍入。我当前的代码不起作用，它输出 0.. 无论如何要解决这个问题？

我当前的代码：

```
 float rounded = FloatMath.ceil(val);
                double getDecimal = (val - FloatMath.floor(val))*100;
                int noDecimal = (int) ((int) 100-getDecimal);
                float toadd = (noDecimal/100); 
```

在我的代码中，“rounded”变量是简单的舍入，“toadd”应该是我添加了多少。出于某种原因，toadd 总是返回为 0。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:55:17.433

你`noDecimal`除以`100`。两者都是整数，结果将始终是整数。在这种情况下，它是一个介于 0 和 1 之间的 int，它将始终被截断为 0。

仅获取数字模 1 ( `%1`)，然后获取原始数字的上限有什么问题？

为了完整起见，您可以简单地更改最后一行以保留其余逻辑：

```
float toadd = noDecimal/100.0; 
```

这会将除数更改为浮点数，并且`int`除以 a会`float`产生浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:55:00.677

```
float toadd = (noDecimal/100); 
```

这将为您提供 0，因为您将较小的整数除以较大的整数..

尝试这样做： -

```
float toadd = (Float.valueOf(noDecimal)/100); 
```

此外，您不需要在以下代码中进行**两次类型转换：-**

```
int noDecimal = (int) ((int) 100-getDecimal); 
```

只是，**外部演员**就足够了：-

```
int noDecimal = (int) (100-getDecimal); 
```

**编辑：-**另外，您可能希望使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)来解决此类问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:00:50.457

也许我遗漏了一些东西或者没有让你的意图正确，但如果你只是想知道你添加了什么，为什么不直接使用差异呢？

```
float rounded = FloatMath.ceil(val);

float toadd = rounded-val; 
```

**编辑：**正如评论中提到的，这可能并不总是给出绝对准确的结果。但它是可以与 一起使用的一般概念`BigDecimal`，它提供了更高的精度。

# knockout.js - 带有 KnockoutJS 的 TypeScript

> ID：12689716
> 
> 赞同：137
> 
> 时间：2012-10-02T11:52:20.560
> 
> 标签：knockout.js, typescript

有没有将 TypeScript 与 KnockoutJS 一起使用的示例？我只是好奇他们将如何合作？

## 编辑

这是我所拥有的，似乎有效

```
declare var ko: any;
declare var $: any;
class ViewModel {
    x = ko.observable(10);
    y = ko.observable(10);

}

$(() => {
    ko.applyBindings(new ViewModel());
}); 
```

这会生成以下 Javascript：

```
var ViewModel = (function () {
    function ViewModel() {
        this.x = ko.observable(10);
        this.y = ko.observable(10);
    }
    return ViewModel;
})();
$(function () {
    ko.applyBindings(new ViewModel());
}); 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-10-26T10:46:49.487

看看[肯定类型](https://github.com/borisyankov/DefinitelyTyped)。

“流行 JavaScript 库的 TypeScript 类型定义存储库”

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-10-02T14:23:05.593

我制作了这个小接口来获取 Knockout 的静态类型：

```
interface ObservableNumber {
        (newValue: number): void;               
        (): number;                             
        subscribe: (callback: (newValue: number) => void) => void;
}
interface ObservableString {
        (newValue: string): void;               
        (): string;                             
        subscribe: (callback: (newValue: string) => void) => void;
}
interface ObservableBool {
    (newValue: bool): void;             
    (): bool;                               
    subscribe: (callback: (newValue: bool) => void) => void;
}

interface ObservableAny {
    (newValue: any): void;              
    (): any;                                
    subscribe: (callback: (newValue: any) => void) => void;
}

interface ObservableStringArray {
    (newValue: string[]): void;
    (): string[];
    remove: (value: String) => void;
    removeAll: () => void;
    push: (value: string) => void;
    indexOf: (value: string) => number;
}

interface ObservableAnyArray {
    (newValue: any[]): void;
    (): any[];
    remove: (value: any) => void;
    removeAll: () => void;
    push: (value: any) => void;
}

interface Computed {
    (): any;
}

interface Knockout {
    observable: {
        (value: number): ObservableNumber;
        (value: string): ObservableString;
        (value: bool): ObservableBool;
        (value: any): ObservableAny;
    };
    observableArray: {
        (value: string[]): ObservableStringArray;
        (value: any[]): ObservableAnyArray;
    };
    computed: {
        (func: () => any): Computed;
    };
} 
```

将其放入“Knockout.d.ts”中，然后从您自己的文件中引用它。如您所见，它将极大地受益于泛型（根据规范提供）。

我只为 ko.observable() 做了几个接口，但是 ko.computed() 和 ko.observableArray() 可以很容易地添加到相同的模式中。**更新：**我修复了 subscribe() 的签名并添加了 computed() 和 observableArray() 的示例。

要从您自己的文件中使用，请在顶部添加：

```
/// <reference path="./Knockout.d.ts" />
declare var ko: Knockout; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-05T05:47:16.050

试试我对 TypeScript 接口声明的实现（用简单的例子）
[https://github.com/sv01a/TypeScript-Knockoutjs](https://github.com/sv01a/TypeScript-Knockoutjs)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-02T14:02:45.937

在标记中声明淘汰绑定的方式不会发生任何变化，但是一旦为淘汰库编写接口，我们就会获得智能感知优势。在这方面，它就像[jquery Sample](http://www.typescriptlang.org/Samples/#JQuery)一样工作，它有一个[typescript 文件，其中包含大多数 jQuery api 的接口](http://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db#samples/jquery/jquery.d.ts)。

我认为如果您摆脱 ko 和 $ 的两个变量声明，您的代码将起作用。这些隐藏了在敲除和 jquery 脚本加载时创建的实际 ko 和 $ 变量。

我必须这样做才能将 Visual Studio 模板项目移植到淘汰赛：

**应用程序.ts：**

```
class GreeterViewModel {
    timerToken: number;
    utcTime: any;

    constructor (ko: any) { 
        this.utcTime = ko.observable(new Date().toUTCString());
        this.start();
    }

    start() {
        this.timerToken = setInterval(() => this.utcTime(new Date().toUTCString()), 500);
    }
}

window.onload = () => {
    // get a ref to the ko global
    var w: any;
    w = window;
    var myKO: any;
    myKO = w.ko;

    var el = document.getElementById('content');
    myKO.applyBindings(new GreeterViewModel(myKO), el);
}; 
```

**默认.htm:**

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>TypeScript HTML App</title>
    <link rel="stylesheet" href="app.css" type="text/css" />
    <script src="Scripts/knockout-2.1.0.debug.js" type="text/javascript"></script>
    <script src="app.js"></script>
</head>
<body>
    <h1>TypeScript HTML App</h1>

    <div id="content" data-bind="text: utcTime" />
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-04T22:35:50.957

好的，只需使用以下命令导入淘汰赛类型或 tds。

```
npm install @types/knockout 
```

这将在您的项目 node_modules 目录中创建一个 @types 目录，并且索引敲除类型定义文件将位于名为 knockout 的目录中。接下来，通过对类型文件的三斜杠引用。这将提供出色的 IDE 和 TypeScript 功能。

```
/// <reference path="../node_modules/@types/knockout/index.d.ts" /> 
```

最后，只需使用声明语句将 ko 变量带入作用域。这是强类型的，所以你好智能感知。

```
declare var ko: KnockoutStatic; 
```

所以现在你可以像在你的 javascript 文件中一样使用 KO。

[![在此处输入图像描述](../Images/78ac104b22bc4896b0a80b967e3f8cc8.png)](https://i.stack.imgur.com/8kJzj.png)

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-17T11:34:19.830

我正在使用[https://www.nuget.org/packages/knockout.editables.TypeScript.DefinitelyTyped/](https://www.nuget.org/packages/knockout.editables.TypeScript.DefinitelyTyped/) 并且它具有 Knockout 的所有接口。

# django - 通过模型自定义的 django m2m_changed 信号

> ID：12689721
> 
> 赞同：4
> 
> 时间：2012-10-02T11:52:40.150
> 
> 标签：django, django-models, django-signals

我正在尝试使用该[`m2m_changed`信号](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)来触发我的应用程序中的一些操作。但是，打印输出`signaltest()`表明我只收到了信号`pre_clear`和`post_clear`操作。我的`models.py`样子是这样的：

```
class Entry(models.Model):
    objects = managers.MyEntryManager()
    ...
    fields = models.ManyToManyField('Field', through='EntryField')

class Field(models.Model):
    name = models.CharField(max_length=64, unique=True)
    description = models.CharField(max_length=256, blank=True)

class EntryField(models.Model):
    entry = models.ForeignKey('Entry')
    field = models.ForeignKey('Field')
    value = models.CharField(max_length=256)

def signaltest(**kwargs):
    print kwargs['action']
signals.m2m_changed.connect(signaltest, sender=Entry.fields.through, weak=False, dispatch_uid='signaltest') 
```

使用以下`EntryField`代码在代码中的其他位置创建对象：

```
some_entry.fields.clear()
models.EntryField.objects.get_or_create(
    entry=some_entry,
    field=some_field,
    defaults = { 'value': field_value }
) 
```

第一个电话负责我收到的`pre_clear`和事件。`post_clear`但是，第二次调用不会产生任何信号。

在我看来，[django bug #13757](https://code.djangoproject.com/ticket/13757)与这种（错误）行为有关，但我可能遗漏了一些东西。

有没有办法“重新连接”信号（可能使用除 之外的其他信号`m2m_changed`）以在创建`post_save`a 时生成信号`EntryField`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:09:10.200

你能试试这个吗？

```
def signaltest(**kwargs):
   print kwargs['instance']
   print kwargs['created']

signals.post_save.connect(signaltest, sender=EntryField, weak=False, dispatch_uid='signaltest') 
```

# jquery - 即使滚动条可见，也使绝对 div 高度为 100%

> ID：12689726
> 
> 赞同：2
> 
> 时间：2012-10-02T11:52:56.527
> 
> 标签：jquery, html, css

HTML

```
<div class="modalPage"style="display:none;"></div> 
```

CSS：

```
.modalPage{
    position:absolute;
    width:100%;
    height:100%;
    background-color:#000000;
    filter:alpha(opacity=60);
    opacity:0.6;
    -moz-opacity:0.6;
    z-index:100;
    top:0px;
} 
```

JS：

```
$(".modalPage").toggle(); 
```

影响：

![在此处输入图像描述](../Images/32de453fa3c24bd580b0d4271cad032f.png)

现在在一切之上都有一层。因此用户无法再与网站交互。

问题：

![在此处输入图像描述](../Images/90587f437dc9a5182634aa0754ed4716.png)

当滚动条因为内容过多而出现时，图层实际上并没有像您在图像中看到的那样在高度上拉伸。

如何使绝对 div 自动拉伸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:57:24.793

...................................

嗨现在**不**使用`width`或`height`现在用于定位`fixed`

像这样

```
.modalPage{
    position:fixed;
    background-color:#000000;
    filter:alpha(opacity=60);
    opacity:0.6;
    -moz-opacity:0.6;
    z-index:100;
    top: 0;
    left:0;
right:0;
bottom:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:55:44.127

```
.modalPage{
    position:fixed;
    width:100%;
    height:100%;
    background-color:#000000;
    filter:alpha(opacity=60);
    opacity:0.6;
    -moz-opacity:0.6;
    z-index:100;
    top: 0;
    left:0;
} 
```

# wpf - How to use different UserControls(are declared in ResourceDictionary) in HeaderedItemsControl?

> ID：12689733
> 
> 赞同：0
> 
> 时间：2012-10-02T11:53:17.843
> 
> 标签：wpf, resourcedictionary, headereditemscontrol

I have user `HeaderedItemsControl` to display different `UserControl` in my application. Now I declared these `UserControl` with `DataTemplate` as follows in my `MainWindow`.

```
<HeaderedItemsControl.Resources>
       <DataTemplate DataType="{x:Type vm:SearchViewModel}">
             <vw:SearchStudentView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:SearchViewModel2}">
             <vw:SearchStudentView2/>
        </DataTemplate>
</HeaderedItemsControl.Resources> 
```

But I have almost 20 view and I want to place all `DataTemplate` in `ResourceDictionary`. Can any one help me how can I use these `DataTemplate`'s from `ResourceDictionary` in `HeaderedItemsControl`'s resources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:13:28.853

It's very simple.

1) You must create and add `DataTemplate` to `ResourceDictionary`.

2) In App.xaml file you must add created `ResoueceDictionary` (*TemplateResourceDictionary.xaml* is my test `ResourceDictionary`).

```
<Application x:Class="ResourceDictionaryExample.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="TemplateResourceDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

That's all. :)

# java - 退出前卸载 dll rxtx 以避免 jvm 崩溃或隐藏 hs_err_pid.log 文件

> ID：12689736
> 
> 赞同：0
> 
> 时间：2012-10-02T11:53:33.407
> 
> 标签：java, dll, native, rxtx, jvm-crash

好吧，我在一个使用 rxtxSerial.dll 的项目中（顺便说一句，问题很大）。

无论如何，我对 GUI 进行了修改以使其更加用户友好，最初程序显示主窗口，并且可以打开其他一些框架，用户可以在其中监视我工作的公司设计的某些设备。所以当用户想要关闭hole程序和openend的任何窗口时，它会出现一个对话框，要求用户自己关闭打开的窗口，然后关闭程序，这真的很难看，所以我想：让我们让它变得更好；这就是我所做的：

当`JDialog`打开使用串行通信的 s 时，如果用户提示关闭程序而不是退出之前，我只是保存它的引用以供将来使用，程序执行以下代码以确保调用各个侦听器，就像停止从串行读取一样港口：

```
 for (Window w : openedWindows)
    {
        w.getToolkit().getSystemEventQueue().postEvent(
            new WindowEvent(w, WindowEvent.WINDOW_CLOSING));
    } 
```

当用户关闭对话框时程序不会崩溃，因此`WindowListener`负责关闭通信的 s 上没有问题，有时在打开在线窗口时提示关闭时它会崩溃（在串行通信方面） ，实际上用户看不到崩溃本身（只要他查看程序文件夹中的 hs_err_pid.log 文件）并且发生大约 20% 的关闭与在线窗口。hs_err 中的崩溃就像：`siginfo: ExceptionCode=0xc0000005, writing address 0x17adfa88`所以我想它正在发生的是 dll 在它已经关闭之后尝试写入 java 的内存，因此 jvm 崩溃（如果我错了，请纠正我）。

我想要的是一种不生成那些错误日志文件的方法，它可以解决问题或者只是一种隐藏这些文件的方法，如果可能的话，我认为答案不是。

我认为可能的修复方法之一是在关闭 jvm 本身之前强制卸载 dll 或“要求”卸载 dll 并等到它被卸载。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:00:51.753

解决了我从 rxtx 迁移到 jSSC 的问题：[http ://code.google.com/p/java-simple-serial-connector/](http://code.google.com/p/java-simple-serial-connector/)

现在一切都很顺利！将 dll 集成到适用于 Windows、linux、mac 和 solaris 的 .jar 中，并具有系统自动检测功能。

节省了我很多工作！

这些崩溃仍然没有明确的原因。

# c# - ASP.NET MVC - 显示大量图像

> ID：12689738
> 
> 赞同：0
> 
> 时间：2012-10-02T11:53:36.747
> 
> 标签：c#, asp.net-mvc

目前我们有一个页面，人们可以在其中修改（裁剪、调整大小等）他们上传到系统中的图像。一切正常，但我们必须提高性能，尤其是页面加载，所以我正在寻找一些建议。

问题是在我们的页面上，我们必须显示大约 70-80 张图像。所有图像的来源 () 都设置为指向 Controller 方法，因为我们有一些特殊的规则来构建图像的完整路径。（那里没有进行数据库调用）

显然，这会导致许多调用来检索图像，这在一定程度上是可以的，但过了一段时间，它就会变得越来越慢。

所以问题是：处理这种情况的最佳方法是什么？

如果我们使用 HttpHandler 来返回图像，而不是 Controller 方法，这会有什么不同吗？

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:57:45.683

您可以为 jquery 使用图像延迟加载插件。

示例： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:56:08.117

您可以在服务器上将图像拼接在一起，将它们作为单个 ImageMap 传输，然后在页面上使用 CSS sprites (http://css-tricks.com/css-sprites/) 来显示它们吗？

# android - 当前推荐的在所有 android 设备上播放 youtube 视频的方法

> ID：12689739
> 
> 赞同：4
> 
> 时间：2012-10-02T11:53:47.510
> 
> 标签：android, flash, html, youtube

您好，我有一个视频应用程序，所有视频都存在于`Youtube`. 现在`Google`在他们的 IO 中说`Youtube API`for`android`将很快推出。那是 2.5 个月前。无论如何，我有一个`Html5`播放器使用`javascript`plus 一个 flash 播放器`YouTube`，但`HTML5`不能在所有设备上运行，并且`flash`播放器无法在`Android`4.0 及更高版本上运行。有没有办法在应用程序内播放视频并支持所有设备！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:56:33.600

我在为浏览器编程时尝试了以下操作：使用此示例创建 HTML5 视频： [Video For Everyone](http://camendesign.com/code/video_for_everybody)

如果你看一下，最后你会看到当所有源都不支持时，它将需要一个 flash 文件。如果这也不起作用，即使在该示例中的 flash 之后，您也可以尝试使用库作为后备选项。我不确定（android 编程经验很少），但如果源、flash 和 javascript/其他库不起作用......我不知道。对不起 ：）

可能您可以使用纯 javascript 解决方案？

我希望您可以进一步了解我的回答，尽管您可能已经很清楚了。

小心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:02:23.233

你可以启动一个 Intent 来启动内置的 Youtube 应用：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:"+ YOUR_VIDEO_ID));
startActivity(intent); 
```

# android - 如何处理 GPU 的内存限制以在 GPU 上进行高分辨率图像处理？

> ID：12689742
> 
> 赞同：12
> 
> 时间：2012-10-02T11:53:51.773
> 
> 标签：android, image-processing, opengl-es-2.0, gpu

我正在制作一个相机应用程序，这个应用程序将为用户提供一些过滤器。目前我的代码在 NDK 上，它工作正常，但是我想让它更快一点。看来 GPU 和 opengl Es 2.0 是要走的路。我对 GPU 的唯一担心是它们的内存限制。由于现代相机拍摄 5-10 mp 图像，而 GPU 内存限制远低于此。我想知道是否有办法解决这个限制。在我看来，唯一合乎逻辑的选择是将图像分割成更小的部分，然后在 GPU 上处理它们，最后将它们组合成最终图像。我的问题是，如果这种方法仍然对性能有好处，并且还有其他选项可以在移动 GPU 上处理高分辨率图像。

编辑：我需要澄清我想使用 GPU 进行图像处理，所以我的目标不是将结果呈现到屏幕上。我会将它渲染到另一个纹理并将其保存到磁盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:44:49.107

自从任天堂娱乐系统（Ricoh 2A03 频率为 1.79 MHz）以来，您的平铺想法就一直在使用，因此这是一个好方法。谷歌使用平铺来管理地图显示，甚至像孤岛危机这样的游戏也倾向于将大部分纹理的纹理大小限制为 1024x1024（1 兆像素）。是的，10 兆像素需要 30 兆的 RAM，因此某些设备可能会出现问题，特别是因为如果您使用源和目标纹理，这意味着需要 60 兆的 RAM。

请记住，纹理大小倾向于使用 2 的幂（2、4、8、16、32、64 等）。至少如果你把它切碎并平铺图像，你有时会得到更好的质量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:04:30.067

您不需要将实时过滤器应用到 10 mp 图像中......因为没有这样的显示器（或者也许有但在我们中间不流行）。:)

所以你只需要对正在显示的像素应用过滤器（1900x1280？）。您提到的平铺技术仍然适用于某些场景。延迟渲染就是这样一个例子。X-Box 360 每天都使用这两种技术（延迟平铺）。没有平铺就不可能，因为延迟技术的内存要求很高。

# windows - 在 Windows 上自动化 Visual Studio 构建的最佳方式

> ID：12689743
> 
> 赞同：0
> 
> 时间：2012-10-02T11:53:53.563
> 
> 标签：windows, visual-studio, scripting, vbscript

我需要每 24 小时在 Windows 上的 Visual Studio 中构建一个 c++ 程序（我相信这被称为 kron 作业？），然后在失败时发送电子邮件。我无法在这台机器上下载任何软件，所以我想我将不得不使用 Windows XP 和 Visual Studio 提供的软件。

我在网上找到了一个可以发送电子邮件的 VBScript，效果很好。现在我需要自动化构建。

我想在 vbs 上写东西并将其设置为每天运行一次的计划任务。我对VB没有任何经验。

这是解决这个问题的好方法吗？有更好的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:36:13.153

您可以使用它`devenv.exe`来构建解决方案或项目。
`devenv.exe`有几个命令行开关可用于开始构建。

例如，要构建`Release`名为您的解决方案文件的配置，`myworkspace.sln`您将执行以下操作 - `devenv.exe myworkspace.sln /build Release`.

以下是`devenv.exe`-
[http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.80).aspx支持的命令行参数列表](http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.80).aspx)

对于每 24 小时运行一次的重复任务，请使用`Windows Task Scheduler`来创建运行上述`devenv.exe`命令行的重复任务。

`Task scheduler`可以在`Administrative Tools`菜单中找到，也可以运行命令`taskschd.msc`。

# linux - 将驱动程序转换为 linux

> ID：12689745
> 
> 赞同：5
> 
> 时间：2012-10-02T11:54:07.557
> 
> 标签：linux, usb, driver, libusb

我正在尝试将 linux 驱动程序写入具有 Windows 驱动程序的设备（类似于[此处](http://ubuntuforums.org/showthread.php?t=708195)描述的情况，但设备不同）

我使用 Libusb 在 linux 端进行通信，并将 SourceUSB 作为我的 USB 嗅探器（在 Windows 机器上）。现在我想我已经正确地复制了控件和批量，但我不能真正针对 Windows 测试 linux 日志。我在虚拟机上运行 Ubuntu 12.04。

所以我的问题是：

1.  有多平台记录器吗？这可以真正简化日志比较过程。
2.  当我将 USB 设备连接到 VM 时 - 我在 Windows 中获得了 VM 驱动程序。嗅探这个设备可以让我准确地看到设备看到的内容，对吧？我的意思是——这是我想闻的地方吗？

编辑：我已经在 Windows 上编译了我的应用程序（libusb 是跨平台的——非常感谢 libusb 开发人员做得很好）并且我的应用程序运行正常。

在 linux 上运行我的应用程序时嗅探 VM 驱动程序时，我看到对 USB 的请求是 VENDOR_DEVICE 而不是 CONTROL_TRANSFER 和 BULK_OR_INTERRUPT。如果我理解正确，这似乎是问题所在，因为这是设备“看到”的。

所以我想我现在的问题是为什么 Linux 将我的请求作为供应商发送。

另一个编辑：问题已解决：

1.  收听 VM 驱动程序给了我错误的请求（我正在收听 VM 驱动程序的流量，而不是我想要的 USB linux 驱动程序的流量
2.  Libusb 是完美的多平台。我花了几分钟让我的代码在 Windows 下编译，从那里调试和比较日志非常容易

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:14:58.303

您可以使用 Wireshark 来捕获 USB 流量。本页解释了如何在 Linux 和 Windows 上执行此操作：[CaptureSetup/USB](http://wiki.wireshark.org/CaptureSetup/USB)

# maven - 如何部署目标 izpack:izpack 的结果

> ID：12689748
> 
> 赞同：0
> 
> 时间：2012-10-02T11:54:33.007
> 
> 标签：maven, deployment, izpack

由于 izpack 打包的结果，我正在尝试部署 maven。

我有两个项目。收集插件配置的父级：

*   org.codehaus.izpack:izpack-maven-plugin:1.0-alpha-5

    安装程序文件 = ${basedir}/target/${project.build.finalName}

    izpackBasedir = ${basedir}/target/izpack

*   org.apache.maven.plugins:maven-deploy-plugin

    文件 = ${basedir}/target/${project.build.finalName}

我有一个项目另一个项目，它使用上面的项目作为父项目。这个项目的 pom 在打包阶段使 izpack:izpack 目标“单一”。

部署插件失败，因为未找到 ${basedir}/target/${project.build.finalName}。

当我查看目标目录时，${project.build.finalName}.jar 文件就在那里。当我查看我的本地存储库时，进入 [groupId dir]/[artefactId dir]/[version dir]，izpack 打包的 jar 文件 id 在那里并且工作正常。所以我认为安装阶段工作正常。

唯一的问题是在部署阶段。

任何想法 ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:07:41.790

```
file = ${basedir}/target/${project.build.finalName} 
```

应该可能指向一个文件，但它没有。追加`.jar`，它将找到该文件。

```
file = ${basedir}/target/${project.build.finalName}.jar 
```

# excel - 格式条件和内部颜色

> ID：12689750
> 
> 赞同：2
> 
> 时间：2012-10-02T11:54:37.280
> 
> 标签：excel, excel-2010, excel-2003, vba

我有一个旧宏在 Excel 2003 上运行良好，但在 Excel 2010 上产生了问题。导致问题的部分是：

```
If Not IsNull(someRange.FormatConditions(parActiveCondition).Interior.Color) Then
    locVisibleColor = someRange.FormatConditions(parActiveCondition).Interior.Color
End if 
```

上`parActiveCondition`的活动条件格式编号在哪里`someRange`。

当背景选择为“无颜色”时，`someRange.FormatConditions(parActiveCondition).Interior.Color`返回

*   `Null`在 Excel 2003 中
*   Excel 2010 中的 0

问题是黑色背景也返回 0。因此在 Excel 2010 中，似乎不再可能区分黑色背景和无背景颜色。

有人知道解决方法吗？

ps：我显然可以选择白色背景而不是“无颜色”，但我宁愿不更改所有电子表格和条件格式规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:30:34.560

您可以使用布尔辅助检查，例如

```
IsNull(someRange.FormatConditions(parActiveCondition).Interior.ColorIndex) 'or
IsNull(someRange.FormatConditions(parActiveCondition).Interior.TintAndShade) 
```

什么时候

```
.FormatConditions(parActiveCondition).Interior.Color = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:18:03.833

```
Option Explicit

Sub test()

Dim Color
Dim R As Integer
Dim G As Integer
Dim B As Integer

Color = ThisWorkbook.Sheets(1).Range("A1").Interior.Color

R = Color Mod 256
G = (Color \ 256) Mod 256
B = (Color \ 256 \ 256) Mod 256

ThisWorkbook.Sheets(1).Range("B1").Interior.Color = RGB(R, G, B)

End Sub 
```

黑色返回 (0,0,0)
然而，“无颜色”返回 (255,255,255) (=white)

# php - CodeIgniter & MVC，图片上传逻辑应该在哪里？

> ID：12689753
> 
> 赞同：1
> 
> 时间：2012-10-02T11:54:44.000
> 
> 标签：php, model-view-controller, codeigniter, crud

我正在使用 CodeIgniter 开发一个带有 CRUD 管理面板的简单应用程序。我的一个模型有 5 个可选图像，所以当我创建一个新寄存器时，应用程序应该检查用户输入的图像数量，正确上传和存储它们。

目前，处理上传和存储的代码在我的控制器中。但是，我已经阅读了很多关于 MVC 的内容，有人说控制器应该尽可能*瘦*，所以我想知道将代码移到模型中是否是个好主意。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:09:00.910

好吧，是的，在 CI 示例（用户指南）中，文件上传逻辑放置在控制器中，但我更喜欢将此类代码放置在模型中。根据 MVC，控制器可以被认为是应用程序的“中间人”。它与用户一起工作，获取数据，然后与模型一起工作以获取适当的数据或计算，然后与视图一起工作以向用户显示响应。

模型负责保存与它所代表的任何内容相关的函数和变量，例如上传用户图像、获取用户信息、图像等的函数。所以我更喜欢在模型中添加文件上传代码而不是控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:10:05.187

你是在自问自答。它应该在模型中。也就是说，模型不应使用任何全局或超全局变量。由控制器将 $_FILES[..] 更改为模型可以使用的文件名。

# regex - 301重定向的htaccess 404错误条件代码

> ID：12689757
> 
> 赞同：0
> 
> 时间：2012-10-02T11:55:02.207
> 
> 标签：regex, wordpress, apache, .htaccess

我有看起来像的分页 URL`http://www.domain.com/tag/apple/page/1/`

如果诸如 URL`http://www.domain.com/tag/apple/page/*2/`不存在或`page/2`不存在，我需要代码将其重定向到诸如`http://www.domain.com/tag/apple/`主标记页面之类的页面。

我目前有以下代码：

```
RewriteCond %{HTTP_HOST} !^http://www.domain.com/tag/([0-9a-zA-Z]*)/page/([0-9]*)/$
RewriteRule (.*) http://www.domain.com/tag/$1/ [R=301,L] 
```

在此代码中，如果 URL 不存在，它会重定向到主标记页面，但它不起作用。

有没有人有关于如何解决这个问题的提示或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:58:40.540

如果我明白你在说什么，那么你是说你有一个重写的 URL 列表（使用`mod_rewrite`）；其中一些存在，一些不存在。对于那些*不*存在的，您希望它们被重定向到新的页面位置吗？

简短的回答是，你不能在`htaccess`. 当您使用 时`mod_rewrite`，您重写的页面名称将传递给控制器​​文件，该文件将重写的 URL 转换为它应该显示的页面/内容。

我只是假设您使用的是 PHP，如果是这样，大多数 PHP 框架（CakePHP、Drupal、LithiumPHP 等）可以为您解决这个问题并处理不存在文件的自定义重定向。如果您有自定义编写的应用程序，则需要在 PHP 网站内而不是在`.htaccess`文件中处理重定向。

一个*非常*简单的例子是：

```
<?php
function getTag($url) {
    if (preg_match('|/tag/([0-9a-zA-Z]*)/|', $url, $match)) {
        return $match[1];
    }
    return '';
}

function validateUrl($url) {
    if (preg_match('|/tag/([0-9a-zA-Z]*)/page/([0-9]*)/|', $url, $match)) {
        $tag = $match[1];
        $page = $match[2];
        $isValid = // your code that checks if it's a URL/page that exists
        return $isValid;
    }
    return false;
}

if (!validateUrl($_SERVER['REQUEST_URI'])) {
    $tag = getTag($_SERVER['REQUEST_URI']);
    header ('HTTP/1.1 301 Moved Permanently');
    header('Location /tag/' . $tag . '/');
    die();
}

?> 
```

# dojo - dojo.connect 不再使用表单？

> ID：12689758
> 
> 赞同：1
> 
> 时间：2012-10-02T11:55:11.947
> 
> 标签：dojo, dijit.form

我在 Dojo 1.8 之前使用过类似的东西，但现在我收到“找不到节点”错误：

```
<form dojoType="dijit.form.Form">
  Search :  
  <input type="text" dojoType="dijit.form.TextBox" name="searcht" id="searcht">
  <script type="dojo/connect" event="onSubmit" args="evt">
    my_function();
    dojo.stopEvent(evt);
  </script>
</form> 
```

我注意到，如果我删除搜索文本框，代码就可以工作。我如何重写上面的内容以使用 1.8，并且请您指出正确的方向来阅读此内容并了解为什么会发生这种情况。我还应该注意，我对内容窗格使用了相同类型的代码，并且代码在那里运行良好。

谢谢，诺鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:53:01.057

在**道场 1.8** `dojo.connect`中是`dojo/on`. 首先，您必须加载要使用的模块并解析文件以转换*dijit*元素。

```
<script>
require([
    "dojo/parser",
    "dijit/form/Form",
    "dijit/form/TextBox",
    "dijit/form/Button"
], function(parser) {
    parser.parse();
});
</script> 
```

其次，在*html*标签中声明*dijit*属性和功能：

 *```
<div data-dojo-type="dijit/form/Form" id="search_form">
    <script type="dojo/on" data-dojo-event="submit" data-dojo-args="evt">
        evt.stopPropagation();
        alert( "my_function()" );            
    </script>     
    <label for="my_textbox">Search:</label>
    <input type="text" data-dojo-type="dijit/form/TextBox" id="my_textbox"/>
    <button data-dojo-type="dijit/form/Button" id="my_button" type="submit">   
        Submit     
    </button>
</div> 
```

*我使用了一个在html*代码中插入*dijit*选项的声明性示例。还有其他方法只使用*javascript*。看看官方文档：[http ://dojotoolkit.org/reference-guide/1.8/dijit/index.html](http://dojotoolkit.org/reference-guide/1.8/dijit/index.html)*

# android - 是否可以获取操作栏中显示的菜单项的数量？

> ID：12689759
> 
> 赞同：3
> 
> 时间：2012-10-02T11:55:13.563
> 
> 标签：android, menu, android-actionbar, actionbarsherlock

我正在开发一个使用 ActionBarSherlock 的应用程序。

如您所知，使用`android:showAsAction`属性，您可以在操作栏上显示操作菜单。并且，在操作栏上显示的菜单项的数量根据用户的环境（分辨率、纵向/横向等）而有所不同。

那么，是否可以通过代码获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:16:35.897

不，你不能。

它会根据几个因素而变化，如果您只是假设它会变化并且可以是 2 到 5 个（包括潜在的溢出菜单项），那将是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-01T04:28:54.943

你试过 menu.size() 吗？我不确定你到底需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:46:19.543

我在想这不是诀窍吗？：`getSupportActionBar().getNavigationItemCount();`

# javascript - How can I extend the document object?

> ID：12689768
> 
> 赞同：6
> 
> 时间：2012-10-02T11:56:15.123
> 
> 标签：javascript, prototype

I'm currently trying to get a better understanding of JavaScript and prototyping.

I wanted to add a function to the `document` but `prototype` is undefined on `document`.

This code:

```
document.prototype.writeLine = function(text){
    this.write(text);
    this.write("<br />");  
}; 
```

Generates this error:

```
// In FireFox
TypeError: document.prototype is undefined

// In Chrome
Uncaught TypeError: Cannot set property 'writeLine' of undefined 
```

How can I extend the `document` object to be able to call something similar to `document.WriteLine('MyText')` ?

Here is the [**Fiddle**](http://jsfiddle.net/qpZ6K/) I'm working with.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T11:58:01.830

I updated your [fiddle](http://jsfiddle.net/qpZ6K/4/). The problem you were having is that `document` object is an instance of the `HTMLDocument` object type. The *instance* itself doesn't have a prototype, however the `HTMLDocument` does.

**Update**: Here is a snippet which works in IE9 because under IE9 `HTMLDocument` is `undefined`.

```
if (typeof HTMLDocument !== 'undefined') {
    HTMLDocument.prototype.writeLine = function(text){
        this.write(text);
        this.write("<br />");  
    };
} else {
    Document.prototype.writeLine = function(text){
        this.write(text);
        this.write("<br />");  
    };
}

document.writeLine("Line 1");
document.writeLine("Line 2");
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:10:10.630

The problem is that `document` is of type `object` and not `function`. In JavaScript you use functions as constructors like this:

```
function MyClass() {
    this.myProperty = "something";
} 
```

You may create an instance of `MyClass` as follows:

```
var myInstance = new MyClass;
alert(myInstance.myProperty); 
```

Every function also has a property called `prototype` which is an object. All the properties of the prototype are inherited my instances of the constructor function:

```
MyClass.prototype.displayProperty = function () {
    alert(this.myProperty);
};

myInstance.displayProperty(); 
```

In your case since `document` is the instance of a constructor and not the constructor itself, there's no property called `prototype` on it.

For more information about inheritance in JavaScript read this [answer](https://stackoverflow.com/a/8096017/783743 "JavaScript inheritance and the constructor property - Stack Overflow").

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-29T10:08:37.640

is very easy, document and Document are both different, document is the document of the window and Document is the interface of the document (thats comone from DOM), if your like add a new prototype for you use in your document you need add this but into Document like this:
**window.Document.prototype.Sayhi = "Hello World"** or ***Document.prototype.Sayhi = "Hello World"*** and now you can call this from you document like ***document.sayhi*** thats happen because you need Set the prototype on Interfaces if you like for example add a new prototype in your Object window your need Set it at Window interface like: Window.prototype.Saybye = "Bye Bro See You Later" and you can call the prototype in you window.Saybye remember, Window is an interface that contain window like Document and document****

# jquery - 智能应用横幅

> ID：12689771
> 
> 赞同：2
> 
> 时间：2012-10-02T11:56:28.680
> 
> 标签：jquery, html, meta-tags

我正在尝试在我的公司网站上实施智能应用横幅，但它们似乎不可定制。首先，横幅始终显示在页面顶部。然后，我无法设置页面加载后它会显示多少时间。而真正困扰我的是职位。是否可以在网站底部使用它？

在这里得到我的信息：

[http://david-smith.org/blog/2012/09/20/implementing-smart-app-banners/](http://david-smith.org/blog/2012/09/20/implementing-smart-app-banners/)

为了实现，我只是在：

```
<meta name="apple-itunes-app" content="app-id=311507490"/> 
```

有没有办法自定义这些元标记？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:13:52.940

根据[this](http://functionsource.com/post/smart-app-banners) , [this](http://developer.apple.com/library/ios/#Documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html) , [this](http://www.snackoclock.net/2012/09/implementing-smart-app-banners-in-ios6/)和[this](http://chooseplugin.com/plugin-info/smart-app-banner/) 你不能改变智能应用横幅的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:39:35.590

这是一个 jquery 插件，它不仅为旧 ios 版本而且为 android 提供此功能：http: [//jasny.github.com/jquery.smartbanner/#](http://jasny.github.com/jquery.smartbanner/#)

您需要对其进行自定义以永远不会让本机功能接管，但是您可以控制它的出现位置和方式。

# wcf - WCF wsdl 生成缺少 WsTrust (RequestSecurityToken)

> ID：12689776
> 
> 赞同：0
> 
> 时间：2012-10-02T11:57:07.837
> 
> 标签：wcf, web, wsdl, firewall

我们在将 wcf 服务集成到 Web 服务防火墙时遇到了问题。因为服务的 wsdl 不包含 ws-trust 的操作（requestsecuritytoken, ..）。

如何强制 WCF 在其 wsdl 中包含所有详细信息？还是我必须自己构建 wsdl？

细节：

*   绑定：WSFederationHttpBinding
*   消息版本：Soap12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:40:53.777

可能是因为 WCF 默认生成多个文件，而 WCF 客户端以外的东西并不总是支持。

试试这篇关于让 WCF 生成单个 wsdl[的博客文章。](http://weblogs.asp.net/pglavich/archive/2010/03/16/making-wcf-output-a-single-wsdl-file-for-interop-purposes.aspx)也许会有所帮助。

# android - 在加载到内存之前检查 Android 图像大小

> ID：12689778
> 
> 赞同：1
> 
> 时间：2012-10-02T11:57:09.660
> 
> 标签：android

我创建了一个小应用程序，可以处理来自画廊或相机的图像。

一切正常，但是。在具有小屏幕和小内存大小的设备（HTC Desire）上，我从其他手机下载了一些完整尺寸的图像，它们要大得多（该手机上的 8MP 摄像头）。

如果我尝试加载它，对于我的小型相机巨大的图像，它会立即崩溃。

那么，如何实施某种检查并缩小该图像的大小，但仍能正确加载它？

我确实在加载图像后缩小图像，但这是应该在崩溃出现之前完成的事情。

肿瘤坏死因子。

```
 InputStream in = null;
            try {
                in = getContentResolver().openInputStream(data.getData());
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            // get picture size.
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(in, null, options);
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            // resize the picture for memory.
            int screenH = getResources().getDisplayMetrics().heightPixels; //800
            int screenW = getResources().getDisplayMetrics().widthPixels; //480
            int width = options.outWidth / screenW;
            int height = options.outHeight / screenH;

            Log.w("Screen Width", Integer.toString(width));
            Log.w("Screen Height", Integer.toString(height));

            int sampleSize = Math.max(width, height);
            options.inSampleSize = sampleSize;
            options.inJustDecodeBounds = false;
            try {
                in = getContentResolver().openInputStream(data.getData());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // convert to bitmap with declared size.
            Globals.INSTANCE.imageBmp = BitmapFactory.decodeStream(in, null, options);
            try {
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:04:07.847

你可以避免在内存中加载位图只是设置

```
inJustDecodeBounds = true 
```

[inJustDecodeBounds](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)将允许您只解码图像的边界而不解码它。给定您的位图`height`，`width`您可以使用它对其进行下采样。

[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

正如医生留下的：

> 如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。

```
int tmpWidth = bitmapWidth;
int tmpHeight = bitmapHeigth;
int requiredSize = ...
while (true) {
 if (tmpWidth / 2 < requiredSize
    || tmpHeight / 2 < requiredSize)
        break;
    tmpWidth /= 2;
    tmpHeight /= 2;
    ratio *= 2;
 } 
```

编辑：对于 32 位`Bitmap`，所需的内存是 `width * height * 4`

# mysql - 如何计算行但基于另一列？

> ID：12689782
> 
> 赞同：1
> 
> 时间：2012-10-02T11:57:31.400
> 
> 标签：mysql, sql

我有这张桌子：

```
+--------------+-----------------------------+----------------+
| Username     | Message                     | Status         |
+--------------+-----------------------------+----------------+
| jamesbond    | I need some help            | SendingOK      |
| jamesbond    | I need some help            | SendingOK      |
| jamesbond    | I need some help            | SendingFailed  |
| jamesbond    | Mission accomplished        | SendingOK      |
+--------------+-----------------------------+----------------+ 
```

由这种 SQL 语法产生：

```
SELECT A.Username, A.Message, B.Status
FROM db1.SmsBroadcast as A
INNER JOIN db2.sentitems as B 
ON A.MessageSMS1 = B.TextDecoded
WHERE A.Username = 'jamesbond'
GROUP BY Message, Status 
```

现在如何有这个输出？

```
+--------------+-----------------------------+-----------+---------------+
| Username     | Message                     | SendingOK | SendingFailed |
+--------------+-----------------------------+-----------+---------------+
| jamesbond    | I need some help            | 2         | 1             |
| jamesbond    | Mission accomplished        | 1         | 0             |
+--------------+-----------------------------+-----------+---------------+ 
```

`SendingOK`和`SendingFailed`列实际上可以使用计算`COUNT(*)`，但我不知道如何基于相同的消息进行计数，而这些消息以相同的 SQL 语法执行。知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:59:16.480

试试这个：

```
SELECT A.Username, A.Message,
   SUM(CASE WHEN B.Status = 'SendingOK' THEN 1 ELSE 0 END) AS SendingOK ,
   SUM(CASE WHEN B.Status = 'SendingFailed' THEN 1 ELSE 0 END) AS SendingFailed,
FROM db1.SmsBroadcast as A
INNER JOIN db2.sentitems as B ON A.MessageSMS1 = B.TextDecoded
WHERE A.Username = 'jamesbond'
GROUP BY A.Username, A.Message 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:04:01.517

如果您有已知数量的值要变成列，那么您可以像其他答案一样对它们进行硬编码。但是如果你有一个未知的数字，那么你可以使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(case when Status = ''',
      Status,
      ''' then 1 else 0 end) AS ',
      Status
    )
  ) INTO @sql
FROM db2.sentitems;

SET @sql = CONCAT('SELECT A.Username, A.Message, ', @sql, ' 
                  FROM db1.SmsBroadcast A
                  INNER JOIN db2.sentitems B 
                    ON A.MessageSMS1 = B.TextDecoded
                  WHERE A.Username = ''jamesbond''
                  GROUP BY A.Username, A.Message');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

与此的主要区别在于它根据您的值生成 SQL 字符串，`db2.sentitems`因此如果值发生更改，那么它将自动调整而无需更改您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:59:28.573

您可以简单地`CASE`在您的`SELECT`语句中使用并通过`username`和对它们进行分组`message`。

```
SELECT `UserName`, 
        `Message`,
        SUM(CASE WHEN `status` = 'SendingOK' THEN 1 ELSE 0 END) OkStat,
        SUM(CASE WHEN `status` = 'SendingFailed' THEN 1 ELSE 0 END) FailedStat
FROM    db1.SmsBroadcast as A
        JOIN db2.sentitems as B 
            ON A.MessageSMS1 = B.TextDecoded
WHERE   A.Username = 'jamesbond'
GROUP BY A.Username, A.Message 
```

# html - 如何使用 CSS3 调整表格行的大小

> ID：12689792
> 
> 赞同：3
> 
> 时间：2012-10-02T11:58:22.220
> 
> 标签：html, css, css-transitions

我有这个隐藏表格行的[**jsfiddle 。**](http://jsfiddle.net/GCJrd/10/)

我试图让它扩展行`height=200`而不是隐藏它。

随意建议一种更简单的方法（html5等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:09:35.863

您可以使用`toggle()`带有两个函数作为参数的 jQuery。[文档](http://api.jquery.com/toggle-event/)。它允许您定义两个**或多个**函数以在每次鼠标单击时循环。

```
$(document).ready(function()
{
//slide up and down when click over id #one
$("#one").toggle(
    function()
        {
        $(".togglebox").height(200);
        },
    function()
        {
        $(".togglebox").height(100);
        });
}); 
```

工作演示：http: [//jsfiddle.net/RNvP4/](http://jsfiddle.net/RNvP4/)

# android - 如果网络不可用，我的应用程序会显示 toast 消息

> ID：12689795
> 
> 赞同：0
> 
> 时间：2012-10-02T11:58:36.993
> 
> 标签：android

当网络不可用或禁用时，我的应用程序没有显示 toast 消息？我在下面插入了我的代码，它似乎没有检查连接是否可用。请帮助我，当网络可用时它工作正常，但是当我禁用我的网络时，它没有显示错误消息，没有其他网络可用。

```
if (position == 2)

{

    final ConnectivityManager connMgr = (ConnectivityManager)  
            getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connMgr  
            .getActiveNetworkInfo();
    android.net.NetworkInfo mobile1 =  
            connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (activeNetworkInfo == null) {
        Toast.makeText(LoginScreen.this, "No   
                Active Network",Toast.LENGTH_LONG).show();
    } else {

        if (activeNetworkInfo.isConnected()) {

            btnLogin.setOnClickListener(new OnClickListener() {

                public  void onClick(View view) {
                    String pinemptycheck = pin.getText().toString();
                    String mobileemptycheck = mobile.getText().toString();
                    if  (pinemptycheck.trim().equals("")||  
                            (mobileemptycheck.trim().equals("")))
                    {

                        Toast.makeText(getApplicationContext(), "Please Enter Correct Information",  
                                Toast.LENGTH_LONG).show();

                    } 

                    else
                    {

                        showProgress();
                        postLoginData();
                    }

                }
            });
        } else if  
        (activeNetworkInfo.isConnectedOrConnecting()) {

            Toast.makeText(LoginScreen.this,    "network is Connecting", Toast.LENGTH_LONG)  
            .show();
        } else if (mobile1.isAvailable()) {

            btnLogin.setOnClickListener(new  
                    OnClickListener() {

                public  void onClick(View view) {

                    showProgress();

                    postLoginData();                                    

                }
            });
        } else if (!mobile1.isAvailable()) {

            Toast.makeText(LoginScreen.this,"No other Connection Found  
                    ",Toast.LENGTH_LONG).show();
                    btnLogin.setOnClickListener(new OnClickListener() {
                        public void onClick(View v)

                        {

                            Toast.makeText(LoginScreen.this," No other Connection Found", Toast.LENGTH_LONG).show();
                        }

                    });
        }}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:02:37.463

问题是您应该在 onClickListener 内部而不是在 onClickListener 上方检查连接可用性。

背后的原因是这个假设在 onCreate 调用时网络存在，所以它一直为真。所以当你点击按钮时检查连接是否可用。

# sql - 发布日期大于今天且小于到期日期的记录

> ID：12689796
> 
> 赞同：0
> 
> 时间：2012-10-02T11:58:37.670
> 
> 标签：sql, sql-server

我想要在允许日期内的所有记录。

```
SELECT
  page_id, page_published_date, page_expired 
FROM 
  pages
WHERE
  ([page_published_date] &lt;= getdate() OR [page_published_date] is null)
  AND
  ([csp_expired] &lt;= getdate() OR [page_expired] is null) 
```

请注意，日期可以包含空值。

示例表：

```
page_id, page_published_date, page_expired
1        2012-10-05           null
2        null                 2012-10-01
3        2012-08-01           2012-11-30 
```

在这种情况下，正确的记录是 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:08:58.383

```
SELECT
  page_id, page_published_date, page_expired 
FROM pages
WHERE
(
    [page_published_date] >= getdate()
    OR [page_published_date] is null
)
AND (
    [page_expired] <= getdate()
    OR [page_expired] is null
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:24:57.993

编辑后的答案，基于选择 #3 作为唯一结果

```
SELECT
  page_id, page_published_date, page_expired 
FROM 
  pages
WHERE
  -- Publication date BEFORE today (current time)
  ([page_published_date] <= getdate() OR [page_published_date] is null)
  AND
  -- and page has not expired
  (datediff(d,0,getdate()) < [page_expired] OR [page_expired] is null) 
```

* * *

从主题行直接翻译

```
SELECT
  page_id, page_published_date, page_expired 
FROM 
  pages
WHERE
  -- Publication date greater than today
  ([page_published_date] > DateDiff(D,0,getdate()) OR [page_published_date] is null)
  AND
  -- and [Publication date?] less than the expiration date
  ([page_published_date] < [page_expired] OR [page_expired] is null) 
```

笔记：

1.  `DateDiff(D,0,getdate())`给你“今天”，即没有时间部分
2.  我有一种感觉，您不想将 [page_expired] 与今天进行比较，因为在第一个条件下，今天早于 [page_published_date]
3.  如果我的解释有误，请使用我的翻译模式根据需要插入任何更改

# php - php准备好的语句的日期格式

> ID：12689798
> 
> 赞同：0
> 
> 时间：2012-10-02T11:58:40.987
> 
> 标签：php, mysql

我在我的 html 中将 dob 设置为“日期”类型，在我的 stu 表中，我将其作为字符串，所以我将其设置为 varchar，但 null 被存储为默认值

检查代码...

```
 /* Prepared statement, stage 1: prepare */
if (!($stmt = $mysqli->prepare("INSERT INTO `stu` (`name`, `gender` , `dob`) VALUES (
?, ?, ? ) "))) {
echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
}

/* Prepared statement, stage 2: bind and execute */

if (!$stmt->bind_param('sss', $name , $gender , $dob )) {
echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:32:02.070

您发布的代码是可以的（尽管我们看不到您是否真的`execute()`在查询）。问题是我们看不到的代码，在哪里定义`$dob`.

当您传递`$dob`给它时，`bind_param()`它应该是一个字符串，而不是一个对象或您可能拥有的任何其他东西。格式化`$dob`为字符串，这样就可以将其插入表中。

我还建议将您的字段更改为 a`DATE`而不是 a `VARCHAR`。您的 varchar 字段将接受任何字符串日期格式，但`DATE`需要一个字段`YYYY-MM-DD`。

# cuda - CUDA Thrust：是否可以让两个 device_vectors 指向重叠的内存？

> ID：12689801
> 
> 赞同：2
> 
> 时间：2012-10-02T11:59:01.533
> 
> 标签：cuda, thrust

`x`如果我使用初始化`thrust::device_vector<double> x(10)`，是否可以创建一个`device_vector` `y`跨越？`x[2]``x[5]`

注意：我不想复制内存，当我使用类似`thrust::device_vector<double> y(x.begin(), x.end())`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:23:33.547

推力 device_vector 只有分配或复制构造函数，因此没有直接的方法通过构造另一个 device_vector 来为现有向量或设备指针设置别名。但正如评论中指出的那样，它也确实不需要。推力算法总是在迭代器上工作，并且可以使用迭代器算法来实现相同的结果。例如，通过复制构造创建一个新向量：

```
thrust::device_vector<double> x(10);
thrust::device_vector<double> y(x.begin()+2, x.begin()+5);

double val = thrust::reduce(y.begin(), y.end()); 
```

而没有它，这将返回相同的答案：

```
thrust::device_vector<double> x(10);

double val = thrust::reduce(x.begin()+2, x.begin()+5); 
```

两种情况下的结果是相同的，第二种等效于为输入向量的子集创建别名。

# language-agnostic - 如何在纸上高效地编写代码

> ID：12689802
> 
> 赞同：10
> 
> 时间：2012-10-02T11:59:00.760
> 
> 标签：language-agnostic, handwriting

在我的大学考试中，我经常不得不用笔和纸编写程序和算法。例如，对于我的下一个测试，我将不得不在纸上用方案和 Java 编写大量代码。

我写了很多代码，但从不在笔和纸上。在纸上写代码时，我通常会抱着和在电脑上写代码一样的态度。这通常会导致大量的删除线和添加，这通常会导致完全无法理解的混乱，因为我已经习惯了可以随意添加和删除块。

问题是程序或算法足够复杂，以至于在编写代码之前不可能在脑海中完全考虑它们。

有没有什么方法可以有效且高效地用笔和纸编写代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:04:03.267

在系统上编写代码时，您在纸上编写代码是正确的。但是，要编写高效的代码，您需要学习一些东西

1.  始终在每一行代码处使用缩进以使其易于呈现
2.  不要忘记在不同的点添加评论，这样你正在写和试图传达的内容让考官清楚
3.  如果您想在任何地方删除代码的某些部分，或者遇到删除线，最好删除整行并重写它。它提高了代码的可见性并使其具有吸引力。
4.  请记住在两行代码之间留出足够的空间，可能是一两行空行。这种间距使您的代码看起来很漂亮。

欢迎提出更多建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T12:23:13.160

呃……纸上编程！！=(

当我被逼到一个角落并被迫这样做时，我喜欢在手边放一叠废纸。我在草稿纸上确定了程序的形状。这意味着我画了一堆矩形，粗略地表示我可能需要在一个块中编写多少代码。当我意识到我需要其他东西时，我会画更多的矩形并画出明显的箭头。

一个矩形可能会草率地说几句关于它正在实现的东西，比如`load stuff from thing`. 或者`x < y ?`任何可以帮助我了解我认为我要写的东西的东西，而不会浪费太多时间。我可能还会记下我打算进一步使用的变量名称，并在可能的位置画一个箭头……或者甚至写一行我不能忘记的代码！

这意味着在我开始编写代码之前，我已经对我正在做的事情有了一个概览。它让我有时间坐下来，确保我已经考虑透彻了。然后我可以专注于一次实施小块，并使我的思维更加线性。这很有用，因为如果我在写作的同时提前思考，我会犯更多的错误。

对我有用...可能对您有用，或者听起来像垃圾。

# android - 应用程序和服务的 Android 生命周期

> ID：12689803
> 
> 赞同：0
> 
> 时间：2012-10-02T11:59:13.147
> 
> 标签：android

> **可能重复：**
> [Android 应用程序对象生命周期](https://stackoverflow.com/questions/5900176/android-application-object-life-cycle)

我很困惑，如果我让应用程序对象成为服务和活动，那么每个人都起来并且活动结束。Application 对象是否存在？还是只有服务？在这种情况下谁最强？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:09:23.167

据我所知，应用程序对象是最后一个被销毁的。只要存在任何服务或活动，应用程序对象就不会被破坏。- 服务和活动是独立的（但屏幕上的活动优先级高于正在运行的服务，而停止但未销毁的活动优先级较低）。启动的服务会根据需要运行，而绑定的服务会一直运行，直到最后一个绑定的活动与它解除绑定。因此，服务可以在活动中幸存下来，反之亦然，但它们都不会在应用程序对象中幸存下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:08:56.443

如 AndroidManifest 所示，您的所有服务都位于 node.js 中`<application>`。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service android:name="ServiceTest"></service>        
</application> 
```

应用程序对象不会在设备上调用 onTerminate 方法并保持您的服务运行。

# java - 使用元注释触发注释处理器

> ID：12689807
> 
> 赞同：4
> 
> 时间：2012-10-02T11:59:39.863
> 
> 标签：java, annotations, annotation-processing

我已经构建了一个由注释触发的注释处理器`com.foo.FooEntity`。需要能够创建更多可以触发该注释处理器的构造型。

例如，控制器也应该触发这个注释处理器。我想知道是否有办法在`@FooEntity`上面放置注释。就像是：

```
@FooEntity
@Target(TYPE)
@Retention(RUNTIME)
public @interface Controller {} 
```

并使用它使此类触发注释处理

```
@Controller
public class MyController { ... } 
```

当然，这里的想法是我想添加新的原型，而不必触及注释处理器本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:20:24.200

我不认为有一种方法可以配置处理器来处理`@FooEntity`以及使用(在这种情况下) 进行**元注释的注释。**您可以做的是拥有一个支持任何注释 ( ) 的处理器，然后在处理器本身内实现一些进一步的逻辑，以便决定您确实想要处理哪些注释。这是基于我对问题的理解的这样一个实现：`@FooEntity``@Controller``@SupportedAnnotationTypes("*")`

```
package acme.annotation.processing;

import java.util.HashSet;
import java.util.Set;

import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.lang.model.element.TypeElement;

import acme.annotation.FooEntity;

@SupportedAnnotationTypes("*")
public class FooEntityExtendedProcessor extends AbstractProcessor {

    private void log(String msg) {
        System.out.println(msg);
    }

    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {
        log("Initially I was asked to process:" + annotations.toString());

        Set<TypeElement> fooAnnotations = new HashSet<>();
        for (TypeElement elem : annotations) {
            if (isFoo(elem)) fooAnnotations.add(elem);
        }

        if (fooAnnotations.size() > 0) {
            log("... but I am now going to process:" + fooAnnotations.toString());
            processInternal(fooAnnotations, roundEnv);
        } else {
            log("... but none of those was my business!");
        }

        // always return false so that other processors get a chance to process the annotations not consumed here
        return false;
    }

    private void processInternal(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {
        // TODO: do your foo processing here
    }

    private boolean isFoo(TypeElement elem) {
        if (elem.getQualifiedName().toString().equals("acme.annotation.FooEntity")
                || elem.getAnnotation(FooEntity.class) != null) {
            return true;            
        } else {
            return false;
        }
    }

} 
```

示例运行将为您提供：

```
Initially I was asked to process:[acme.annotation.FooEntity, skriptor.annotation.ScriptArg, java.lang.Override, skriptor.annotation.ScriptCodeRT, skriptor.annotation.ScriptCode, skriptor.annotation.ScriptObject, javax.ws.rs.Path, javax.ws.rs.GET, acme.annotation.Controller, com.sun.jersey.spi.resource.Singleton, skriptor.annotation.ScriptImport, javax.ws.rs.ext.Provider, javax.ws.rs.Produces, javax.annotation.PostConstruct]
... but I am now going to process:[acme.annotation.Controller, acme.annotation.FooEntity] 
```

# gmail - 如何在 Gmail 中制作电子邮件堆栈？

> ID：12689809
> 
> 赞同：4
> 
> 时间：2012-10-02T11:59:52.843
> 
> 标签：gmail, email, email-client, incoming-mail

所以我正在开发一个应用程序，当人们发布和回复组时发送电子邮件通知。示例交互可能是：

*   我发个帖子。我组中的每个人都会收到通知。
*   巴里回复我的帖子。每个人都会收到另一个通知。
*   史蒂夫也回复了我的帖子。每个人都会收到另一个通知。

发送通知电子邮件就好像它是由发布/回复的人发送的一样（这很重要，不能更改）。所以发件人的名字是我/巴里/史蒂夫，发件人的电子邮件是那个人的电子邮件。每封电子邮件的主题行是初始帖子的主题，对于给定帖子的每个通知也是如此。

我希望将这些通知堆叠在 Gmail 和其他客户端中。但是，Gmail（可能还有其他客户端）并不能很好地处理堆叠它们。它将来自同一个人的所有具有相同主题的电子邮件堆叠在一起，但不是整个对话。所以我最终得到了一个包含 Barry 对帖子所做的所有回复的线程，以及另一个包含史蒂夫对帖子所做的所有回复的线程。我显然希望这些明智地编织在一起。

我认为回复邮件标题是关键，但我不确定如何。非常感谢！

# ios - NSString 分离-iOS

> ID：12689810
> 
> 赞同：-1
> 
> 时间：2012-10-02T11:59:56.743
> 
> 标签：ios, nsstring

我有以下字符串。但我需要用这个“jsonp1343930692”将它们分开并`NSString`再次分配它们。我怎么能这样？我可以将它们分开，`NSArray`但我不知道如何分开`NSString`。

```
jsonp1343930692("snapshot":[{"timestamp":1349143800,"data":[{"label_id":10,"lat":29.7161,"lng":-95.3906,"attr":{"ozone_level":37,"exp":"IN","gridpoint":"29.72:-95.39"}},{"label_id":10,"lat":30.168456,"lng":-95.50448}]}]})
jsonp1343930692("snapshot":[{"timestamp":1349144700,"data":[{"label_id":10,"lat":29.7161,"lng":-95.3906,"attr":{"ozone_level":37,"exp":"IN","gridpoint":"29.72:-95.39"}},{"label_id":10,"lat":30.168456,"lng":-95.50448,"attr":{"ozone_level":57,"exp":"IN","gridpoint":"30.17:-95.5"}},{"label_id":10,"lat":29.036944,"lng":-95.438333}]}]}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:04:08.343

查看[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类，将其转换为您可以处理的 Cocoa 集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:10:58.157

你的字符串中的`jsonp1343930692`前缀很奇怪：我不知道你的字符串来自哪里，但它确实似乎是一些带有这个奇怪前缀的 JSON 字符串，没有理由存在。这里最好的方法可能是检查有这个前缀是否正常，例如，如果你从 WebService 获取这个字符串，返回这个奇怪的前缀可能是 WebService 错误。

无论如何，如果您想删除`jsonp1343930692`字符串的前缀，您有多种选择：

*   检查前缀是否存在，如果存在，则从原始字符串中删除正确数量的字符：

    ```
    NSString* str = ... // your string with the "jsonp1343930692" prefix
    static NSString* kStringToRemove = @"jsonp1343930692";
    if ([str hasPrefix:kStringToRemove])
    {
      // rebuilt a string by only using the substring after the prefix
      str = [str substringFromIndex:kStringToRemove.length];
    } 
    ```

*   `jsonp1343930692`使用字符串作为分隔符将字符串拆分为多个部分

    ```
    NSString* str = ... // your string with the "jsonp1343930692" prefix
    static NSString* kStringToRemove = @"jsonp1343930692";
    NSArray* parts = [str componentsSeparatedByString:kStringToRemove];
    str = [parts componentsJoinedByString:@""]; 
    ```

*   `jsonp1343930692`用空字符串替换每次出现的。

    ```
    NSString* str = ... // your string with the "jsonp1343930692" prefix
    static NSString* kStringToRemove = @"jsonp1343930692";
    str = [str stringByReplacingOccurrencesOfString:kStringToRemove withString:@""]; 
    ```

所以简而言之，你有很多可能性，具体取决于你想要做什么:)

当然，一旦你删除了奇怪的前缀，你就可以反序列化你的 JSON 字符串以获得一个 JSON 对象（使用`jsonp1343930692`一些第三方库，如iOS5 及更高版本等）`SBJSON``NSJSONSerializer`

# node.js - 无法在 Mac OS X Mountain Lion 上运行 yuidoc

> ID：12689812
> 
> 赞同：0
> 
> 时间：2012-10-02T11:59:59.427
> 
> 标签：node.js, yui

在安装 yuidoc 时，我收到以下警告。

```
npm WARN package.json connect@1.9.2 No README.md file found! 
```

稍后尝试启动 yuidoc --server 时，它向我显示：

```
info: (yuidoc): Scanning for yuidoc.json file.
error: (yuidoc): Scanned 5001 directories looking for a yuidoc.json file, something is probably wrong here.. 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:41:09.503

该警告无需担心。

错误是您没有提供 yuidoc.json 文件：

[http://yui.github.com/yuidoc/args/index.html#json](http://yui.github.com/yuidoc/args/index.html#json)

# actionscript-2 - on(release) {...} 或 myButton.onRelease = function() {...} - 动作脚本 2 问题

> ID：12689817
> 
> 赞同：2
> 
> 时间：2012-10-02T12:00:04.330
> 
> 标签：actionscript-2

我对我正在创建的一些 Flash 横幅和将按钮制作成可打开网页的可点击对象感到非常困惑。

我在下面使用此代码已有一段时间了，它有效...

```
on(release){
    getURL("http://www.the-dude.co.uk", "_blank");
} 
```

我将此代码放在操作面板中的实际按钮上

但是我被告知上面的代码很旧，我应该使用下面的动作脚本......

```
buttonInstance.onRelease = function() {
    getURL("http://www.the-dude.co.uk", "_blank");
} 
```

所以我试图让下面的这个方法工作，但是当我点击按钮时没有任何反应，我得到一个错误，这个......

![Scene=Scene 1, layer=button, frame=1, Line 1 语句必须出现在处理程序中](../Images/66ba74e3a1d88efab62bfe3dd258eb01.png)

所以简而言之，我无法让这个更新的代码工作！啊啊

谁能帮我理解我哪里出错了？

我尝试将新代码放在我的动作场景 1 中。不劳而获。。

而且我还尝试将代码放在下面，实际上是在操作面板中的按钮上......

```
this.onRelease = function() {
    getURL("http://www.the-dude.co.uk", "_blank");
} 
```

还是行不通。

我的场景设置总是这样...

![在此处输入图像描述](../Images/70be7fbe25c146dfe3bfd76bf26306d5.png)

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:50:59.557

您需要将下面的代码放在与按钮实例相同的时间线上（正如您所尝试的那样）。并且按钮的实例名称必须是“buttonInstance”。

选择按钮时，您可以在属性面板中设置实例名称。

```
buttonInstance.onRelease = function() {
    getURL("http://www.the-dude.co.uk", "_blank");
} 
```

# php - PHP JSON - 访问 JSON 文件，在显示之前对值进行洗牌

> ID：12689822
> 
> 赞同：1
> 
> 时间：2012-10-02T12:00:37.607
> 
> 标签：php, json

我正在研究一个关于 Bing 及其搜索结果的研究项目，由于我对 PHP 还是很陌生，所以我正在寻找一些帮助。昨天我已经在这里得到了一些帮助，结果非常好，我再次尝试:)

我有以下代码：

```
<?php
$r = '{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web\u0027&Market=\u0027en-US\u0027&Query=\u0027php\u0027&Adult=\u0027off\u0027&$skip=0&$top=1","type":"ExpandableSearchResult"},"ID":"1c509d25-5ca4-4db5-bfc5-cafd6917e2c2","WebTotal":"10600000","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"4cf2a8d6-21b7-433d-81e9-84e74091a44a","Title":"PHP: Hypertext Preprocessor","Description":"What is PHP? PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","DisplayUrl":"www.php.net","Url":"http://www.php.net/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=48&$top=1","type":"WebResult"},"ID":"2d8f8107-895e-4052-9edc-b656e74c3f2e","Title":"CakePHP: the rapid development php framework. Pages","Description":"Official website. Offers a manual for beginners and links towards the last version.","DisplayUrl":"cakephp.org","Url":"http://cakephp.org/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=49&$top=1","type":"WebResult"},"ID":"816d781c-ff8b-4a60-b5b7-28d807bba28a","Title":"PHP Presents","Description":"Welcome to the PHP Presentation System. Here we list all of the available presentation categories stored within this system.","DisplayUrl":"talks.php.net","Url":"http://talks.php.net/"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}}';
$r = json_decode($r);
foreach($r->d->results as $value) {
  foreach($value->Web as $result) {
    echo $result->Title, "\r\n";
    echo $result->Description, "\r\n";
    echo $result->Url, "\r\n";
  }
}
?> 
```

这基本上显示了来自 Bing 的 json 结果的三个站点的标题、描述和 URL（注意：并不总是只有 3 个结果，通常是 10，但可以是任意数字）

现在这是我的主要任务：对于我的研究项目，我需要随机打乱结果，这意味着我希望看到它，例如：

第一次加载页面： CakePHP：快速开发的php框架。Pages PHP 介绍 PHP：超文本预处理器

第二次加载页面： PHP Presents PHP: Hypertext Preprocessor CakePHP: 快速开发的php框架。页面

第三次加载页​​面： PHP：超文本预处理器 CakePHP：快速开发的php框架。PHP 呈现的页面

同样，上面的顺序只是一个例子——我真的很想要它随机的，没有特定的顺序。

我要感谢我以前的助手，我期待着你的回答。

感谢您花时间阅读本文：）

更新：如果有人这么好心，也给我看一个只对除前三个结果之外的结果进行洗牌的例子——那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:06:38.123

您可以使用临时数组来存储线条和`shuffle`随机化它的方法。

```
<?php
$r = '{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web\u0027&Market=\u0027en-US\u0027&Query=\u0027php\u0027&Adult=\u0027off\u0027&$skip=0&$top=1","type":"ExpandableSearchResult"},"ID":"1c509d25-5ca4-4db5-bfc5-cafd6917e2c2","WebTotal":"10600000","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"4cf2a8d6-21b7-433d-81e9-84e74091a44a","Title":"PHP: Hypertext Preprocessor","Description":"What is PHP? PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","DisplayUrl":"www.php.net","Url":"http://www.php.net/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=48&$top=1","type":"WebResult"},"ID":"2d8f8107-895e-4052-9edc-b656e74c3f2e","Title":"CakePHP: the rapid development php framework. Pages","Description":"Official website. Offers a manual for beginners and links towards the last version.","DisplayUrl":"cakephp.org","Url":"http://cakephp.org/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=49&$top=1","type":"WebResult"},"ID":"816d781c-ff8b-4a60-b5b7-28d807bba28a","Title":"PHP Presents","Description":"Welcome to the PHP Presentation System. Here we list all of the available presentation categories stored within this system.","DisplayUrl":"talks.php.net","Url":"http://talks.php.net/"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}}';
$r = json_decode($r);
$tmpArray = array();
foreach($r->d->results as $value) {
  foreach($value->Web as $result) {
    $string = $result->Title."\r\n";
    $string.= $result->Description."\r\n";
    $string.= $result->Url."\r\n";
    $tmpArray[] = $string;
  }
}
shuffle($tmpArray);
foreach($tmpArray as $string){
    echo $string;
}
?> 
```

这也可能有效：

```
$r = json_decode($r);
$r->d->results = shuffle($r->d->results); 
```

编辑：要随机播放除前三个键之外的每个键：

```
<?php
$r = '{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web\u0027&Market=\u0027en-US\u0027&Query=\u0027php\u0027&Adult=\u0027off\u0027&$skip=0&$top=1","type":"ExpandableSearchResult"},"ID":"1c509d25-5ca4-4db5-bfc5-cafd6917e2c2","WebTotal":"10600000","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"4cf2a8d6-21b7-433d-81e9-84e74091a44a","Title":"PHP: Hypertext Preprocessor","Description":"What is PHP? PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","DisplayUrl":"www.php.net","Url":"http://www.php.net/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=48&$top=1","type":"WebResult"},"ID":"2d8f8107-895e-4052-9edc-b656e74c3f2e","Title":"CakePHP: the rapid development php framework. Pages","Description":"Official website. Offers a manual for beginners and links towards the last version.","DisplayUrl":"cakephp.org","Url":"http://cakephp.org/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=49&$top=1","type":"WebResult"},"ID":"816d781c-ff8b-4a60-b5b7-28d807bba28a","Title":"PHP Presents","Description":"Welcome to the PHP Presentation System. Here we list all of the available presentation categories stored within this system.","DisplayUrl":"talks.php.net","Url":"http://talks.php.net/"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}}';
$r = json_decode($r);
$tmpArray = array();
foreach($r->d->results as $value) {
  foreach($value->Web as $result) {
    $string = $result->Title."\r\n";
    $string.= $result->Description."\r\n";
    $string.= $result->Url."\r\n";
    $tmpArray[] = $string;
  }
}
$limit = min(3,count($tmpArray)) -1;
for($i=0;$i<$limit;$i++){
    echo array_shift($tmpArray); // echo and remove first item
}
shuffle($tmpArray);
foreach($tmpArray as $string){
    echo $string;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:08:19.063

```
<?php
$r = '{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web\u0027&Market=\u0027en-US\u0027&Query=\u0027php\u0027&Adult=\u0027off\u0027&$skip=0&$top=1","type":"ExpandableSearchResult"},"ID":"1c509d25-5ca4-4db5-bfc5-cafd6917e2c2","WebTotal":"10600000","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"4cf2a8d6-21b7-433d-81e9-84e74091a44a","Title":"PHP: Hypertext Preprocessor","Description":"What is PHP? PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","DisplayUrl":"www.php.net","Url":"http://www.php.net/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=48&$top=1","type":"WebResult"},"ID":"2d8f8107-895e-4052-9edc-b656e74c3f2e","Title":"CakePHP: the rapid development php framework. Pages","Description":"Official website. Offers a manual for beginners and links towards the last version.","DisplayUrl":"cakephp.org","Url":"http://cakephp.org/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=49&$top=1","type":"WebResult"},"ID":"816d781c-ff8b-4a60-b5b7-28d807bba28a","Title":"PHP Presents","Description":"Welcome to the PHP Presentation System. Here we list all of the available presentation categories stored within this system.","DisplayUrl":"talks.php.net","Url":"http://talks.php.net/"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}}';
$r = shuffle(json_decode($r));
foreach($r->d->results as $value) {
  foreach($value->Web as $result) {
    echo $result->Title, "\r\n";
    echo $result->Description, "\r\n";
    echo $result->Url, "\r\n";
  }
}
?> 
```

# mysql - 日期格式 .NET 到 mysql

> ID：12689827
> 
> 赞同：0
> 
> 时间：2012-10-02T12:01:04.387
> 
> 标签：mysql, vb.net, date, datetime

我正在从 mysql 中提取日期值并以本地使用的格式显示它们。见下文：

我有这个日期时间值`2012-11-01 08:00:00`... yyyy-MM-dd HH:mm:ss

我需要它显示为`01-11-2012 08:00:00`... dd-MM-yyyy HH:mm:ss

我可以简单地做到这一点，如下所示：

```
Dim dr As MySqlDataReader = cmd.ExecuteReader(sql)

If dr.Read()
    Dim mydate As DateTime = dr("date_column")

    txtDate.Text = mydate.ToString("dd-MM-yyyy") & " " & mydate.ToString("HH:mm:ss")
End If 
```

这工作得很好，但我的问题是，如果我想从这个文本框中更新记录，我不能使用这种格式的日期，因为 mysql 抱怨错误（对象超出范围或其他东西）。

所以我现在需要做的就是把它转换回 yyyy-MM-dd。这里的困难是.NET 会自动假设我的`dd`值应该是`MM`值，反之亦然。

这导致`01-11-2012`写入数据库的值为`11-01-2012`。

如何重新格式化插入/更新到数据库的日期，同时保持此处使用的日期的完整性？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:04:14.757

用于`DateTime.Parse`将新字符串转换回 Date 对象，然后您可以使用`ToString("yyyy-MM-dd hh:mm:ss")`

您还可以使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)创建日期对象，并准确指定日期对象在字符串中的格式，如下所示：

```
Imports System.Globalization

Dim myNewDate As DateTime
myNewDate = DateTime.ParseExact("23-05-2012 15:45:35", "dd-MM-yyyy HH:mm:ss", CultureInfo.InvariantCulture)

//InsertIntoMySQL is whetever method you use to insert into MySQL
InsertIntoMySQL("yyyy-MM-dd HH:mm:ss") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:11:13.757

使用[参数化](http://software-security.sans.org/developer-how-to/fix-sql-injection-microsoft-.net-with-parameterized-queries) [查询](http://msdn.microsoft.com/en-us/library/ff648339.aspx)进行更新：

```
query = "UPDATE SomeTable SET date_column = @newDate WHERE record_id = @record_id"
conn = new SqlConnection("my connection string")

cmd = new SqlCommand(query, conn)
cmd.Parameters.Add("newDate", SqlDbType.DateTime).Value = new Date(txtDate.Text)
cmd.Parameters.Add("record_id", SqlDbType.Int).Value = record_id

'Rest of code to execute cmd 
```

如果这不能正确解析 TextBox 中的日期，请预先解析它：

```
Date.ParseExact(txtDate.Text, "dd-MM-yyyy HH:mm:ss", CultureInfo.InvariantCulture) 
```

此外，该行：

```
txtDate.Text = mydate.ToString("dd-MM-yyyy") & " " & mydate.ToString("HH:mm:ss") 
```

也可以写成：

```
txtDate.Text = mydate.ToString("dd-MM-yyyy HH:mm:ss") 
```

这可能更容易阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T12:32:05.493

尝试将文本框中的文本转换为 DateTime 类型，然后将其格式化为 MySql 标准。然后在您的插入和更新语句中使用该字符串。

```
Convert.ToDateTime(textBox.Text).ToString("yyyy-MM-dd") 
```

# scala - 链表的用例

> ID：12689834
> 
> 赞同：13
> 
> 时间：2012-10-02T12:01:55.903
> 
> 标签：scala, linked-list, scala-collections

这篇文章只讨论`scala.collection.mutable.LinkedList`。其他实现不是这个线程的主题。

我的问题是：这个类的用例是什么？我发现它具有可变和不可变结构类型的问题，同时没有产生任何好处。我这么说是因为：

*   API 在我看来就像是一个不可变的 API（`filter`, `map`,`drop`等都`take`返回一个新`LinkedList`的而不是进行就地修改）
*   不可变链表的所有好处至少我猜是不存在的，即结构之间的最大共享，因为它们仍然是可变的（通过`var elem`和`var next`.

所以基本上我们有一个线性访问时间、线性附加时间、线性空间等，并且在空间复杂性或推理代码的能力方面没有任何表现（除了 O(1) 前置，但它仍然是不可变列表的情况） .

我看不到这种结构的重要好处吗？我正在寻找适用于此类的客观度量和/或用例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:44:34.020

我想说原因是复杂性 - 链表类允许您保存对列表中间节点的引用，并在该节点处使用`insert`or `update`，而不是通过列表的头部。

```
[] --> [] --> ... --> [] --> ... --> [] --|
^                     ^
head                  myReference 
```

在我确切知道某个序列的更改将发生在哪里的应用程序中（`myReference`如上），修改该位置的成本要比将所有内容复制到该位置的成本要低得多`immutable.List`（即我只是在之后插入一个新节点`myReference`） .

```
 myNewNode
                             v
[] --> [] --> ... --> [] --> [] ---> ... --> [] --|
^                     ^
head                  myReference 
```

这种应用程序的一个示例 - 一个[L 系统](http://en.wikipedia.org/wiki/L-system)，您可以在其中扩展字符串的一部分。就地插入新节点比每次需要扩展时复制整个字符串要便宜得多。

另一个原因是完整性——因为`DoubleLinkedList`和`LinkedListLike`共享许多通用基础设施，提供额外的`LinkedList`类对标准库的大小来说是低成本的。

# java - 在 java:comp/env 中设置属性？

> ID：12689843
> 
> 赞同：4
> 
> 时间：2012-10-02T12:02:28.177
> 
> 标签：java, eclipse, properties, components, environment

我用 Eclipse 编写 Java 项目，我想知道是否有办法通过 java 本身在 java:comp/env 中设置新属性？每一个帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:06:25.963

`java:comp/env`在运行时是只读的，所以**没有**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:40:27.613

引用[http://v1.dione.zcu.cz/java/docs/jndi-1.2/tutorial/beyond/misc/policy.html](http://v1.dione.zcu.cz/java/docs/jndi-1.2/tutorial/beyond/misc/policy.html)

> JNDI 本身不定义任何命名策略。但是，为使用 JNDI 定义了一组有限的命名策略的一个重要平台是 Java 2 Platform, Enterprise Edition (J2EETM)。它定义了一个逻辑名称空间，应用程序组件（例如 Enterprise JavaBeans、servlet 和 JavaServer Pages (JSP)）可以使用它来命名资源、组件和其他数据。命名空间由组件的容器（执行组件的实体）提供给组件。通常，组件具有部署描述符，其中包含有关逻辑名称和类型的信息以及组件需要或引用的资源和组件的其他数据。

只看最后两句，我会说不可能以编程方式设置这些属性

# formatting - 我可以在 specflow 中更改 Gherkin 格式样式吗？

> ID：12689852
> 
> 赞同：14
> 
> 时间：2012-10-02T12:03:03.810
> 
> 标签：formatting, specflow, gherkin

我可以在 specflow 中更改 Gherkin 格式样式吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-02-04T14:39:38.927

给定（哈！）这是谷歌的最高结果，这里的设置是：

`Tools`> `Options`> `Environment`> `Fonts and Colours`> `Text Editor`>`Gherkin *`

![在此处输入图像描述](../Images/acc6c9e8032b933bb497b35baa753c78.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:29:45.833

正如 Roman 所指出的，不太确定您在这里问什么，但 Visual Studio 中有一个设置对话框，您可以在其中调整格式和颜色。

有关更多信息，请参阅[此](https://github.com/techtalk/SpecFlow/wiki/Visual-Studio-2010-Integration)

# java - IP 视频输入流的运动检测 - Android/Java

> ID：12689854
> 
> 赞同：3
> 
> 时间：2012-10-02T12:03:10.473
> 
> 标签：java, android, video-streaming, motion-detection

如帖子标题中所述，我正在寻找一种方法来检测来自闭路电视摄像机（IP/WiFi）的输入流上的运动/运动。任何人都知道如何连接到 IP 视频流并监控运动的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-20T21:21:25.563

这是python中的opencv代码，java是类似的，你需要使用opencv进行图像操作

```
import cv2, time, pandas
from datetime import datetime

first_frame = None
status_list = [None,None]
times = []
df=pandas.DataFrame(columns=["Start","End"])

video = cv2.VideoCapture('rtsp://admin:Paxton10@10.199.27.128:554')

while True:
    check, frame = video.read()
    status = 0
    gray = cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)
    gray = cv2.GaussianBlur(gray,(21,21),0)

    if first_frame is None:
        first_frame=gray
        continue

    delta_frame=cv2.absdiff(first_frame,gray)
    thresh_frame=cv2.threshold(delta_frame, 30, 255, cv2.THRESH_BINARY)[1]
    thresh_frame=cv2.dilate(thresh_frame, None, iterations=2)

    (cnts,_)=cv2.findContours(thresh_frame.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

    for contour in cnts:
        if cv2.contourArea(contour) < 200000:
            continue
        status=1

        (x, y, w, h)=cv2.boundingRect(contour)
        cv2.rectangle(frame, (x, y), (x+w, y+h), (0,255,0), 3)
    status_list.append(status)

    status_list=status_list[-2:]

    if status_list[-1]==1 and status_list[-2]==0:
        times.append(datetime.now())
    if status_list[-1]==0 and status_list[-2]==1:
        times.append(datetime.now())

    #cv2.imshow("Gray Frame",gray)
    #cv2.imshow("Delta Frame",delta_frame)
    imS = cv2.resize(thresh_frame, (640, 480))
    cv2.imshow("Threshold Frame",imS)

    imS = cv2.resize(frame, (640, 480))
    cv2.imshow("Color Frame",imS)
    #cv2.imshow("Color Frame",frame)

    key=cv2.waitKey(1)

    if key == ord('q'):
        if status == 1:
            times.append(datetime.now())
        break

print(status_list)
print(times)

for i in range(0, len(times), 2):
    df = df.append({"Start": times[i],"End": times[i+1]}, ignore_index=True)

df.to_csv("Times.csv")

video.release()
cv2.destroyAllWindows 
```

# sql - 尝试生成 Spring Roo 按需数据时出现 SQL 保留关键字问题

> ID：12689856
> 
> 赞同：0
> 
> 时间：2012-10-02T12:03:31.467
> 
> 标签：sql, escaping, spring-roo, reserved-words

我正在尝试为我的一个**类**名为`Member`. 但是**，这似乎`Member`是一个保留的 SQL 关键字**。

因此，当我在 Roo shell 中运行以下命令时：

```
dod --entity ~.domain.Member 
```

Roo 抱怨说 Member 是保留关键字，并带有以下消息：

> 保留的 SQL 关键字“成员”不允许作为简单类型名称

Roo 是否允许**逃避我的实体名称**？如果有怎么办？

如果不是，我该如何规避这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:39.620

Springsource 团队的某个人就这个问题回复了我。这是回复：

> dod 命令还允许使用 --permitReservedWords 选项来解决您的问题。

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T12:39:58.333

你用的是什么数据库？我对 Roo 了解不多，但似乎它将类映射到命名空间数据库表。尽管这看起来很粗略，但我的建议是为您的实体名称添加一个前缀，例如 SystemMember。

# android - 新发布的“使用 Google Play 服务进行身份验证”，通过 GoogleAuthUtil.getToken 获取令牌时出现问题

> ID：12689858
> 
> 赞同：9
> 
> 时间：2012-10-02T12:03:54.160
> 
> 标签：android, api, token

更新：

刚才我使用我也用于 Google App Engine 的 Google 帐户注册了 Google API，现在错误已更改为`com.google.android.gms.auth.GoogleAuthException: Unknown`

* * *

Google 刚刚发布了[一种通过 Google 帐户注册应用程序的新方法，并且在他们的](https://developers.google.com/android/google-play-services/authentication)[博文](http://android-developers.blogspot.com.au/2012/09/google-play-services-and-oauth-identity.html)中也给出了一些解释。

我正在编写一个您必须注册才能创建用户帐户的 Android 应用程序，并且我正在使用 Google App Engine 作为后端。使用播放服务，我想让用户的电子邮件与他们的 Android 设备和令牌相关联。我已经可以收到电子邮件，但是，获取令牌只会引发错误，并且由于文档非常稀疏，我不知道如何解决这些问题。这就是我收到电子邮件的方式：

```
private String[] getAccountNames() {
    mAccountManager = AccountManager.get(this);
    Account[] accounts = mAccountManager.getAccountsByType(GoogleAuthUtil.GOOGLE_ACCOUNT_TYPE);
    names = new String[accounts.length];
    for (int i = 0; i < names.length; i++) {
        names[i] = accounts[i].name;
    }

    return names;
} 
```

但是，当我打电话时`token = GoogleAuthUtil.getToken(context, email, "scope"`，它给了我这些错误： `GooglePlayServices not available due to error 1`和`com.google.android.gms.auth.GooglePlayServicesAvailabilityException: GooglePlayServicesNotAvailable`。

现在我的问题是，我是否必须设置任何权限或包含任何库来解决这个问题？什么是范围参数？他们的博客文章中给出了如何获取令牌以及为范围添加内容的示例，以将范围变量设置为，`"https://www.googleapis.com/auth/userinfo.profile"`但不幸的是我仍然遇到相同的错误。

我还为 Google API 控制台注册了我的应用程序并启用了 G+ API，我还需要在那里配置其他东西吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T02:22:43.380

我在使用 Google Drive 的 Google Client Library 时遇到了同样的问题。解决方案非常简单。只需将“oauth2:”添加到您的 scopeUrl。

错误的：

```
GoogleAuthUtil.getToken(this, account.name, DriveScopes.DRIVE); 
```

正确的：

```
GoogleAuthUtil.getToken(this, account.name, "oauth2:" + DriveScopes.DRIVE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T16:47:39.613

您首先需要传递格式正确的范围，如下所示：

```
 private final static String G_PLUS_SCOPE = 
      "oauth2:https://www.googleapis.com/auth/plus.me";
  private final static String USERINFO_SCOPE =   
      "https://www.googleapis.com/auth/userinfo.profile";
  private final static String SCOPES = G_PLUS_SCOPE + " " + USERINFO_SCOPE; 
```

您还需要从此处[https://play.google.com/store/apps/details?id=com.google.android.gms](https://play.google.com/store/apps/details?id=com.google.android.gms)安装 Google Play 服务。Google Play 服务已开始向所有安装了 Google Play (Froyo+) 的设备推出。

这里提供了更多信息：[http ://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html](http://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T02:36:56.950

您只能获取支持 OAuth2 的 Google 服务的令牌。如果您正在编写自己的 Web 服务，则应使用其本机身份验证机制（用户名和密码？）对其进行身份验证。“范围”显然是一个无效的范围，但似乎您没有安装 Google Play 服务，这就是您的错误的原因。您可以从 Play 商店安装它，但它并不适合您，因为您没有使用 Google 服务。

# php - 如何从复杂数组中提取电子邮件

> ID：12689860
> 
> 赞同：-4
> 
> 时间：2012-10-02T12:03:56.613
> 
> 标签：php, arrays

我怎么能在一个简单的数组中只收到电子邮件？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:06:04.927

您已经在第一个元素中将它们放在一个简单的数组中。因此，如果上述构造称为 $myArr，您将它们放在 $myArr[0] 中，存储为电子邮件数组。

如果您希望它们在另一个变量中，请执行以下操作：

```
$myEmails = $myArr[0]; 
```

# c++ - 做 decltype(c) e; 和 decltype((c)) f; 声明不同的类型？

> ID：12689870
> 
> 赞同：2
> 
> 时间：2012-10-02T12:04:14.383
> 
> 标签：c++, c++11, decltype

> **可能重复：**
> [decltype 和括号](https://stackoverflow.com/questions/3097779/decltype-and-parenthesis)

我在维基百科上找到了这个：

```
 auto c = 0;           // c has type int
    auto d = c;           // d has type int
    decltype(c) e;        // e has type int, the type of the entity named by c
    decltype((c)) f = c;  // f has type int&, because (c) is an lvalue 
```

并且使用 ideone 编译器（他们使用的 C++0x idk）和 typeinfo 我无法看到 e 和 f 之间的差异。显然，我可能失败了，所以我想知道这是否是最终的 C++11 标准行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:09:27.493

是的，这是标准行为。它写在 §7.1.6.2[dcl.type.simple]/4 中，其中：

> 表示的类型`decltype(e)`定义如下：
> 
> *   if`e`是不**带括号的*id 表达式***或不带括号的类成员访问，`decltype(e)` 是由 e 命名的实体的类型。
> *   ...
> *   否则，如果`e`是左值，`decltype(e)`是`T&`，其中`T`的类型是`e`；
> *   ...

由于`c`没有括号并且是一个*id 表达式*（这里是一个标识符，参见 §5.1.1[expr.prim.general]/7），`decltype(c)`因此将是 的类型`c`，即`int`.

由于`(c)`do 有括号并且是一个左值（例如`(c)=1`是一个有效的表达式），`decltype((c))`将是 的类型的左值引用类型`(c)`，即`int&`.

# jquery - 如何在 JQuery 中处理鼠标滚轮停止以实现平滑滚动

> ID：12689873
> 
> 赞同：0
> 
> 时间：2012-10-02T12:04:16.410
> 
> 标签：jquery, css, jquery-animate, mousewheel, smooth-scrolling

我有问题。我用动画制作网站。我使用鼠标滚轮步骤数据来移动 div 和 css。在Firefox中一切正常。

但是 Chrome 工作得不好。在 chrome 上，最小步长是 100 像素，动作非常零散。我想从滚动系列中获得总和，以使用动画移动块。

例如，用户制作 3 个不间断滚动（一步为 100 像素），jquery 获取变量 = 300 像素，我可以应用动画功能。我如何处理滚动系列之间的停止事件？

不同的方式 - 例如从 100px 变量开始执行 10 个步骤，并且在每一步之后我都可以更改 css 变量。但我对此没有任何想法。谢谢！

# jquery - 使用 DropKick jQuery 插件创建多个更改回调

> ID：12689875
> 
> 赞同：0
> 
> 时间：2012-10-02T12:04:18.850
> 
> 标签：jquery, jquery-plugins, google-custom-search, jquery-dropkick

我正在使用出色的[DropKick jQuery 插件](http://jamielottering.github.com/DropKick/)作为网站搜索工具的一部分。DropKick 设计了一个选择框，用户使用它来选择要搜索的网站。正在使用 Google 自定义搜索，我已经成功地告诉 DropKick 更改隐藏的“#cx”字段的值 - #cx 字段告诉 Google 要使用哪个搜索帐户。

这是HTML：

```
<form action="http://example1.com/search/" method="get" id="cse-search-box">
    <fieldset>
        <input type="hidden" name="cx" id="cx" value="custom_search_account_1" />
        <input type="hidden" name="cof" value="FORID:11" />
        <input type="hidden" name="ie" value="UTF-8" />            
        <div class="keywords">
            <label for="keywords">Search</label>
            <input type="text" name="q" id="keywords" class="search text" />
        </div>
        <select name="dk" class="dk">
            <option value="custom_search_account_1">Search website 1</option>
            <option value="custom_search_account_2">Search website 2</option>
            <option value="custom_search_account_3">Search website 3</option>
        </select>
        <input type="image" class="button" src="imgurl" alt="Search" name="sa" />
    </fieldset>
</form> 
```

这是工作 jQuery 代码，它根据用户选择的搜索引擎更改隐藏的“#cx”字段的值：

```
$('.dk').dropkick({
    change: function (value, label) {
        var x = $(this).val();                
        $('#cx').val(x);
    }
}); 
```

这一切都很棒。但是，表单操作也需要根据用户的选择进行更改。这可以使用这个插件吗？如果是这样，我需要对 jQuery 代码进行哪些更改？我已经用这个突破了我的知识极限！

提前感谢您的任何帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:16:37.050

更改操作方法与更改任何其他属性一样简单。因此，在您的 .change 方法中，只需进行检查并更改符合该值的操作。

[这是一个小提琴](http://jsfiddle.net/AEQks/1/)

```
$('.dk').dropkick({
    change: function (value, label) {
        var x = $(this).val();                
        var action;
        $('#cx').val(x);

        if (x == 'custom_search_account_1') { action = 'action1'; }
        else if (x == 'custom_search_account_2') { action = 'action2'; }
        else if (x == 'custom_search_account_2') { action = 'action2'; }

        $('#cse-search-box').attr('action', action);

     }
}); 
```

# c# - ASCII 编码和低位控制字符

> ID：12689877
> 
> 赞同：1
> 
> 时间：2012-10-02T12:04:44.867
> 
> 标签：c#, character-encoding

我期望我的测试代码：

```
string Test = ASCIIEncoding.ASCII.GetString(new byte[] { 0x01, 0x02, 0x03, 0x04 }); 
```

返回一个包含“？？？？？？”的字符串 然而事实并非如此。如何获得一组字节的 ASCII 编码，其中所有控制字符和最高位集字符都转换为“？”？

谢谢，安迪

更新：

我想我的问题应该是：如何让 StreamWriter 只输出可打印的 ASCII 字符？我需要生成与古老程序一起工作的文本文件，这些程序会因文件中的控制字符而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:11:11.323

没有自动转换为 ? 本身。通常 ？是主机程序强加的不可读字符的表示。

但是，如果您的意图是转换这些以便用户看到 ? 相反，请尝试以下代码：

```
string newStr = "";
foreach (char c in MyString) {
    if ((int.Parse(c) < 32)) {
        c = "?";
    }
    newStr = (newStr + c.ToString);
} 
```

# algorithm - 二进制序列的求和

> ID：12689881
> 
> 赞同：1
> 
> 时间：2012-10-02T12:05:04.680
> 
> 标签：algorithm, parallel-processing

考虑一个二进制序列：

11000111

我必须找到这个系列的总和（实际上是并行的）

总和 =1+1+0+0+0+1+1+1= 5

这是对资源的浪费，为什么要花时间添加 0？

有没有什么聪明的方法来总结这个序列，这样我就可以避免不必要的添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:24:53.360

在字节级别而不是位级别进行操作。[使用一个小的 LUT 将一个字节转换为一个人口计数](https://stackoverflow.com/a/12630743/253056)。这样，您只需进行一次查找和每 8 位添加一次。除非您的数据可能*非常*稀疏，否则这应该非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:51:31.040

我不知道为什么人们在回答，甚至没有查看从第一条评论到问题的链接。您可以轻松地将其制作在`O(size_of_bitset)`. 至少在涉及常数因子时。

您可以使用此方法（在JF Sebastian的[链接中找到）：](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive)

```
inline int count_bits(int num){
int sum = 0;
for (; bitset; sum++) bitset &= bitset-1;
return sum;
}

int main (void){
  int array[N];
  int total_sum = 0;
  #pragma omp parallel for reduction(+:total_sum)
  for (size_t i = 0; i < N, i++){
     total_sum += count_bits(array[i]);
  }
} 
```

`array`这将并行计算内存范围内的位数。内联对于避免不必要的复制很重要，编译器也应该更好地优化它。

如果你找到任何东西，你可以`count_bits`用任何更好的东西来计算整数中的位，以便更快。这个版本的复杂度为`O(bits_set)`（不是位集的大小！）。

与需要相当大的单个求和来补偿的单个求和相比，调用并行构造将引入相当多的开销。

并行性是通过 OpenMP 完成的。每个线程的部分总和在并行循环结束时求和并存储在`total_sum`. 请注意，由于减少子句`total_sum`，每个线程的循环内部都是私有的。[`reduction`](https://computing.llnl.gov/tutorials/openMP/#REDUCTION)

您可以更改代码以使其对设置在任意内存区域中的位进行计数，但是当您在如此低的级别上执行操作时，保持内存对齐非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:15:53.043

好吧，这取决于您如何存储位集。如果它是一个数组，那么你只能做一个普通的 for。如果您想并行执行此操作，只需将数组拆分为块并同时处理它们。

如果我们谈论的是位集（将位存储在本机（32/64 位）整数类型中），那么对位进行计数的最简单方法是这个：

```
int bitset;
int s = 0;
for (; bitset; s++)
    bitset &= bitset-1; 
```

这会在每一步中删除 1 的最后一位，因此您有 O(s)。

当然，如果你需要超过 32/64 位，你可以将这两种方法结合起来

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T12:20:51.347

据我所知，尝试专门处理零是浪费的。正如@bdares 所说，添加真的很便宜。至少，您需要执行 N 条指令来总结一个 N 位序列，如果您无条件地求和任何位。如果您添加一个测试以查看该位是 0 还是 1，则这是需要为每个位执行的另一条指令。即使没有分支惩罚，您也要为每个位执行至少 1 条指令（条件测试），然后您还要为任何等于 1 的位执行原始指令（加法）。所以即使没有分支惩罚，这需要更多的时间来执行。

@bdares 提到编译器会优化分支，但前提是每个位的值在编译时是已知的，并且如果您在编译时知道位的值，您应该提前自己添加它们。

玩弄一些小玩意可能会做一些可爱的事情。例如，如果您一次取两个位，您将添加 0、1、2 或 3 的值，并且只需要做一半的加法。*然后您*可以对结果进行一些操作，将其转换为您想要的值，但我实际上并没有考虑过如何做到这一点。

# java - 在 Swing 中 jTable 的第一行转移焦点

> ID：12689885
> 
> 赞同：0
> 
> 时间：2012-10-02T12:05:17.673
> 
> 标签：java, swing, jtable

我想将焦点传递给 JTable 的第一行。我不能使用 editCellAt(row,column) 方法，因为我不想让用户更改表格的内容。changeSelection(row,column,false, false) 方法也无法正常工作。

请建议我一些将焦点转移到第一行的方法。

* * *

我有文本字段和表格。最初我的控制是在文本字段。如果我按 ENTER，控制应该在表格的第一行。我提供了下面的代码。请帮帮我。

```
private void txtRawMaterial(java.awt.event.KeyEvent evt) //txtRawMaterial is textfield
{      
    if (evt.getKeyCode()==KeyEvent.VK_ENTER) 
    {
         if(table.getRowCount()>0)    //table is jTable
         {
                table.requestFocus();
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:30:31.243

焦点（作为组件的 JTable）和选择（行/列）这两个概念不一定相关，如果你想要两者都必须调用单独的方法来达到两者：

```
table.requestFocus();
table.changeSelection(0, 0, false, false); 
```

另请注意，*焦点单元格*不是通常意义上的 focusOwner。相反，它是 column- 和 rowSelection 模型的主导，通常具有视觉线索，例如比其他的更厚/不同的边框。

# magento - Magento：如何在侧边栏购物车中获得优惠券代码折扣金额？

> ID：12689892
> 
> 赞同：0
> 
> 时间：2012-10-02T12:05:49.797
> 
> 标签：magento, sidebar, coupon

我正在使用 Magento 1.5.1，并尝试在侧边栏购物车中显示购物车的总数，例如结帐/购物车页面。

如果仅应用了优惠券，我想显示优惠券代码百分比金额。现在，我显示购物车价格和运费，但我需要此优惠券代码金额才能获得最终购物车价格。

我刚刚设法显示优惠券代码名称：

```
$couponCode = Mage::getSingleton('checkout/session')->getQuote()->getCouponCode(); 
```

但不是它的价值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:47:55.097

我使用以下代码找到折扣、小计、运费、税金和总计：

```
// Totals : discount, subtotal, shipping, tax, grand_total
$totals = Mage::getSingleton('checkout/cart')->getQuote()->getTotals();
    foreach($this->getTotals() as $total)
    {
        if ($total->getCode() == 'discount')
        {
            $discount = $total->getValue();
            break;
        }
    } 
?> 
```

# jquery - 使用 Turnjs.com 使用 HTML5 翻书

> ID：12689894
> 
> 赞同：0
> 
> 时间：2012-10-02T12:06:00.503
> 
> 标签：jquery, html, turnjs

我的客户想在他的网站中集成一个翻书插件 - [http://www.turnjs.com/ 。](http://www.turnjs.com/)在他们的官方文档中，他们说它支持所有浏览器和 IOS、Android 设备。

我在浏览器和移动设备中检查了示例 URL - [http://www.turnjs.com/samples/magazine/ 。](http://www.turnjs.com/samples/magazine/)我确信它在所有浏览器中都可以正常工作，但在移动设备中不能正常工作（大多数情况下它不能在 Android 中工作）。

问题
1 - 转角转到下一页未正确加载。
2 - 在一个屏幕中加载 4 页，共 2 页（双页）。
3 - 放大后，在放大的图像上触摸或碎片会放大。

作为一个许可插件，它在官方示例站点中不起作用。

请让我知道任何想法，以尝试解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:22:57.543

在我的三星 Galaxy S2 上，它就像一个魅力。您是否注意到上面写着“Chrome for Android”？

# javascript - 我如何知道这个网站使用的是什么 JS/HTML5 库？

> ID：12689898
> 
> 赞同：0
> 
> 时间：2012-10-02T12:06:19.177
> 
> 标签：javascript, html

我发现了一个史诗般的老游戏的这个很棒的克隆，叫做 gunbound。它是用 HTML5/javascript 开发的。

我想知道我是否能以某种方式找到他们用于该项目的 js/html5 库？

[网站](http://dragonbound.net)

我正在尝试查找它，因为它确实启发了我（我很惊讶这是在 html5 中完成的），并且我决心学习 html5 和 javascript。我想按照他们的步骤 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:16:53.177

它可能使用`node.js`服务器。用于`CloudFlare`安全。对于 html 部分，我认为它基于 html5 样板。

*   `jQuery`
*   `QTransform`用于`CSS`转换
*   `socket.io`用于服务器/客户端通信
*   `soundmanager2`用于音频

现在真正的答案。

浏览器的开发人员工具会告诉您站点使用的脚本和 css 文件。从该列表中，我提供了上面的列表。由于它使用`socket.io`，它很可能`node.js`用于服务器。如果您查看网络选项卡，您将看到`Server:cloudflare-nginx`标题。这是你的提示`CloudFlare`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:20:05.563

江户馆是对的。您需要使用开发工具包（我推荐使用 chrome）来查找所有使用的库。

您还可以从控制台执行一些简单的 javascript (jquery) 代码，看看它做了什么。

如果您正在寻找主 js 文件，我建议您查看这个：

[http://dragonbound.net/static/js/DragonBound.compiled.js](http://dragonbound.net/static/js/DragonBound.compiled.js)

我能看到的是主 js 文件和它的定义...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:42:07.963

查看 oage 的来源可以很容易地看出它使用以下内容：

```
<script type="text/javascript" src="/static/js/socket.io.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.tinyscrollbar3.js"></script>
<script type="text/javascript" src="/static/js/QTransform.js"></script>
<script type="text/javascript" src="/static/js/bgpos.js"></script>
<script type="text/javascript" src="/static/js/soundmanager2-nodebug-jsmin.js"></script>
<script type="text/javascript" src="/static/js/DragonBound.compiled.js?42"></script> 
```

您可以在 html5、QTtransform、nodejs 和 jQuery 中搜索套接字以了解有关这些概念的更多信息。

构建它的模板是 HTML5 样板。

# java - 如何在 Selenium 2 中实现关键字“取消选择帧”？

> ID：12689906
> 
> 赞同：4
> 
> 时间：2012-10-02T12:07:03.073
> 
> 标签：java, selenium-webdriver

我正在尝试使用 selenium-webdriver 实现关键字“取消选择帧”，但不知道如何使其对所有帧通用。

以下示例不起作用：

```
/**
 *  Sets the top frame as the current frame.
 * 
 */
public void unselectFrame(){

    try {
        WebElement element = getElement("//body");
        driver.switchTo().frame(element);
    } catch (Exception e) {
         //exception
    }
} 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T13:24:11.823

你的意思是切换出框架？在这种情况下，这应该有效：

```
driver.switchTo().defaultContent(); 
```

# keyboard-shortcuts - vs2012移动代码行的快捷键

> ID：12689907
> 
> 赞同：1
> 
> 时间：2012-10-02T12:07:20.607
> 
> 标签：keyboard-shortcuts, visual-studio-2012

vs2012中的shotcut键是什么，复制一行代码然后向下或向上移动，并剪切一行代码然后向下或向上移动？

副本版本：

```
printf("hello world");// press a shotcut key ,then ..
printf("hello world");// this line of code automaticly appear here. 
```

剪辑版：

```
printf("hello you");//press a shotcut key ,then this line **will be cut**,and then ..
printf("hello you");//this line of code automaticly appear here. 
```

有没有像他们一样的shotcut key？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:15:04.010

Shift-Alt-T 将带有光标的行向下移动一行，我仍在试图弄清楚如何向上移动它。

因此，经过一番谷歌搜索后，VS 似乎没有向上移动一行的键盘快捷键，这非常令人困惑，因为确实有上面提到的向下移动一行的快捷键。无论如何，您绝对不是唯一需要此功能的人，对此有一些建议。

安装此扩展程序（免费）： [MoveLine 扩展程序](http://visualstudiogallery.msdn.microsoft.com/b3ee08dc-a28f-4aec-9efa-69215ab5ee52)

或者您可以安装 ReSharper，在我看来这非常非常好： [ReSharper](http://www.jetbrains.com/resharper/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T23:53:53.880

Visual Studio [Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)扩展增加了对此的支持。这是“上移/下移命令”功能。

启用此功能`Alt`+`↑`和`Alt`+`↓`向上或向下移动当前行（或多行选择）。

通常我在设置 Visual Studio 时做的第一件事就是安装这个扩展，然后关闭它添加的所有其他垃圾（奇怪的文档选项卡、滚动条等）只是为了上下移动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:13:21.160

您应该尝试以下解释： [http ://www.herrodius.com/blog/52](http://www.herrodius.com/blog/52)

# jakarta-ee - Web 服务器、Web 容器和应用程序服务器之间的区别

> ID：12689910
> 
> 赞同：106
> 
> 时间：2012-10-02T12:07:27.003
> 
> 标签：jakarta-ee, webserver, application-server, web-container

请告诉我 Web 服务器、Web 容器和应用程序服务器之间的区别。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-02T12:13:14.710

您的问题类似于以下内容：

[应用服务器和Web服务器有什么区别？](https://stackoverflow.com/questions/936197/what-is-the-difference-between-application-server-and-web-server)

在 Java 中：Web Container 或 Servlet Container 或 Servlet Engine：用于管理 Servlet、JSP 等组件。它是 Web 服务器的一部分。

Web 服务器或 HTTP 服务器：能够处理由客户端发送并以 HTTP 响应返回的 HTTP 请求的服务器。

应用服务器或应用服务器：可以处理用户和组织的后端业务应用程序或数据库之间的所有应用程序操作。它经常被视为三层应用程序的一部分：表示层、逻辑层、数据层

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-28T13:26:42.653

Web 服务器：它提供 HTTP 请求和 HTTP 响应。它仅通过 HTTP 协议处理来自客户端的请求。它包含 Web 容器。Web 应用程序主要部署在 Web 服务器上。例如：Servlet JSP

Web Container：维护Servlet Object的生命周期。调用该 servlet 对象的服务方法。传递 HttpServletRequest 和 HttpServletResponse 对象

应用服务器：它拥有具有大业务逻辑的大型企业应用程序。它是重量级或拥有重量级应用程序。例如：EJB

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-31T05:23:11.767

> Web 应用程序在 Web 服务器的 Web 容器中运行。Web 容器通过提供命名上下文和生命周期管理的组件来提供运行时环境。一些 Web 服务器还可能提供额外的服务，例如安全性和并发控制。Web 服务器可以与 EJB 服务器一起工作以提供其中一些服务。但是，Web 服务器不需要与 EJB 服务器位于同一台机器上。
> 
> Web 应用程序由 Web 组件和其他数据（例如 HTML 页面）组成。Web 组件可以是 servlet、使用 JavaServer Pages™ 技术创建的 JSP 页面、Web 过滤器和 Web 事件侦听器。这些组件通常在 Web 服务器中执行，并可能响应来自 Web 客户端的 HTTP 请求。Servlet、JSP 页面和过滤器可用于生成作为应用程序用户界面的 HTML 页面。它们还可用于生成 XML 或其他应用程序组件使用的其他格式数据。

来源：[http ://www.service-architecture.com/articles/application-servers/j2ee_web_server_or_container.html](http://www.service-architecture.com/articles/application-servers/j2ee_web_server_or_container.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-31T00:11:44.287

Web 容器也称为 Servlet 容器，是与 Java servlet 交互的 Web 服务器的组件。Web 容器负责管理 servlet 的生命周期，将 URL 映射到特定的 servlet 并确保 URL 请求者具有正确的访问权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-16T21:10:17.250

Web 容器和应用程序服务器之间的主要区别在于，大多数 Web 容器（例如 Apache Tomcat）只实现了基本的 JSR，例如 Servlet、JSP、JSTL，而应用程序服务器实现了整个 Java EE 规范。每个应用程序服务器都包含 Web 容器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-08T15:26:59.290

Web 容器 + HTTP 请求处理 = WebServer

Web 服务器 + EJB +（消息传递 + 事务 + 等）= ApplicaitonServer

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-04-17T10:06:42.513

Web 容器负责为 Web 应用程序提供运行时环境。它包含提供命名上下文和管理 Web 应用程序生命周期的组件。Web 容器是 Web 服务器的一部分，它们通常处理用户请求并发送静态响应。

Servlet 容器是 JSP 创建的组件所在的容器。他们基本上负责根据用户请求提供动态内容。基本上，Web 容器根据用户请求回复静态内容，但 Servlet 可以创建动态页面。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-23T05:09:24.430

**Servlet 容器**的基本思想是使用 Java 在服务器端使用 Servlet 和 JSP 动态生成网页。因此**servlet 容器**本质上是与 servlet 交互的 Web 服务器的一部分。

# c# - 上传数据并没有真正上传，并且在 C# 中没有错误

> ID：12689915
> 
> 赞同：0
> 
> 时间：2012-10-02T12:07:45.183
> 
> 标签：c#, sharepoint, office365

我有这个代码，但我得到标题中描述的错误：“远程服务器返回错误：（405）方法不允许。”

** 我现在用 POST 替换了 PUT **

如果我用“POST”替换“PUT”，它似乎可以工作，因为我没有收到错误，但它不会上传任何文件。我正在尝试将文件上传到 sharepoint (office 365) 中的文档库

```
public static void UploadTest()
        {
            WebClient w = new WebClient();

            w.Credentials = new NetworkCredential("username", "password");
            var ua = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
            w.Headers["Accept"] = "/";
            w.Headers.Add(HttpRequestHeader.UserAgent, ua);
            byte[] bFile = System.IO.File.ReadAllBytes(@"C:\t.txt");
            string ulr = @"http://www.website.com/uploadfolder/";
            System.Uri oUri = new System.Uri(ulr);

            try
            {
                w.UploadData(oUri, "POST", bFile);
                w.UploadDataCompleted += new UploadDataCompletedEventHandler(oWebClient_UploadDataCompleted);
                Console.WriteLine("Uri:" + oUri);
            }

            catch (Exception ex)
            {
                throw ex; 
                          }

            finally
            {
                Console.ReadLine();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:28:47.207

使用凭据访问和登录时出现问题。尝试连接时似乎出了点问题，因为当我删除 w.Credentials = new NetworkCredential(user,pass); 时可以下载损坏的文件；

我现在正在尝试一种全新的方式，感谢您的回复。

# javascript - (function(symbolName) { - 这是什么意思

> ID：12689922
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:08:33.643
> 
> 标签：javascript, jquery, adobe-edge

> **可能重复：**
> [JavaScript 对象/函数/类声明周围的括号是什么意思？](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)
> [什么是 (function($) {})(jQuery); 意思是？](https://stackoverflow.com/questions/2937227/what-does-function-jquery-mean)

我正在尝试了解 Edge 的工作原理，以便我可以使用自己的代码，

我以前没有遇到过，但这意味着什么：

```
 (function(symbolName) {

      //CODE

   })("stage"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:10:13.523

它是一个匿名函数，它被定义然后用参数“stage”调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:14:02.913

这类似于做：

```
var myfunc = (function (symbolName) {
        //CODE
    });

myfunc("stage"); 
```

或者

```
function myfunc(symbolName) {
    //CODE
}

myfunc("stage"); 
```

除了当函数以这两种方式中的任何一种定义时，它将被“提升”到块作用域的顶部——但那是另一个话题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:17:12.650

在 Javascript 中，您只需键入以下内容即可定义匿名函数：

```
(function(){alert("Hello")});  /* ok, this do nothing, but it is correct */ 
```

也可以直接调用函数：

```
(function(){alert("Hello")})(); /* alert is displayed */ 
```

如果函数有参数，则必须指定参数：

```
(function(args){alert(args)})("Hello"); /* alert is displayed with the passed arguments */ 
```

我建议你这个[教程](http://www.youtube.com/watch?v=YcylSiDoOio)。

# sql-server - SQL Server - 休眠选择 SQL 语句

> ID：12689924
> 
> 赞同：0
> 
> 时间：2012-10-02T12:08:37.883
> 
> 标签：sql-server, hibernate

我正在尝试将 Hibernate 与 SQL Server 一起使用。

我想从 SQL Server 中选择行并将它们转换为 Places 对象。

我将编写我尝试过的代码和我得到的异常。

```
List places = session.createQuery("FROM PLACES").list();
for (Iterator iterator = places.iterator(); iterator.hasNext();){
   Place place = (Place) iterator.next(); 
} 
```

例外：

```
SEVERE: Incorrect syntax near the keyword 'from'. 
```

此代码生成

```
select  from 
```

并且由于 SQL Server 需要 select 和 from 此查询之间的某些内容，因此该查询失败

所以我尝试将代码更改为

```
List places = session.createSQLQuery("SELECT ID,NAME FROM [PLACES].[dbo].[PLACES]").list();
   for (Iterator iterator = places.iterator(); iterator.hasNext();){
      Place place = (Place) iterator.next(); 
   } 
```

例外：

```
Exception in thread "main" java.lang.ClassCastException 
```

由于这个查询返回一个 Object[] 我不能转换它。

如何获取行并将它们转换为 Places 对象

映射

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.places.general.Place" table="PLACES" schema="dbo">
        <id name="id" type="int">
            <column name="ID"/>
            <generator class="identity"/>
        </id>
        <property name="name" type="string">
            <column length="100" name="NAME" not-null="true"/>
        </property>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:55:04.703

在 HQL 语句中，您必须使用 Java 类名，而不是表名：

```
List places = session.createQuery("FROM Place").list(); 
```

或者

```
List places = session.createQuery("FROM com.places.general.Place").list(); 
```

第二次尝试返回一个 Object 数组列表，每个数组的第一个元素是 id，第二个是名称，它们必须分别转换为 Integer 和 String。

# xslt - 我可以在 XSLT 中检查模板匹配中的条件吗？

> ID：12689941
> 
> 赞同：1
> 
> 时间：2012-10-02T12:09:52.490
> 
> 标签：xslt

我想检查模板匹配中的变量，可以吗？

像：

```
 <xsl:template match="*:Item and $MODE='PURCHASE'"> 
```

所以模板也应该检查`$MODE='PURCHASE'`变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:21:40.827

不在 XSLT 1.0 中。

在 XSLT 2.0 中，可以有变量引用——在模板匹配模式的谓词中。

**例如**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:param name="MODE" select="'PURCHASE'"/>

 <xsl:template match="*:Item[$MODE='PURCHASE']">
     <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于此 XML 文档时：**

```
<t xmlns:x="some:x">
  <x:Item>someText</x:Item>
</t> 
```

**产生了想要的正确结果：**

```
 someText 
```

# php - 针对 TextArea 行数限制的 PHP 验证

> ID：12689946
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:10:13.803
> 
> 标签：php, jquery

[我从这里](https://stackoverflow.com/questions/556767/limiting-number-of-lines-in-textarea?rq=1)得到了这段精彩的代码

但是，如果有人通过 firebug 编辑表单或禁用 js，那么这将不起作用，我想对此功能进行服务器端验证，谁能指导我正确的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:17:05.613

以下 php 代码将为您提供文本数据中的新行数：

```
echo substr_count(nl2br($textdata), '<br />') + 1; 
```

的用途`nl2br()`是支持不同的新行格式（\r\n、\n\r、\ny \r）

测试：

```
$textdata = 'First line
second line
third line
fourth line';

$lines = substr_count(nl2br($textdata), '<br />') + 1;
echo $lines; //will output 4 
```

# c - core.c 中的函数声明

> ID：12689947
> 
> 赞同：1
> 
> 时间：2012-10-02T12:10:20.357
> 
> 标签：c, function

我在其中找到了这个声明，`kernel/sched/core.c`但我不明白它具体说明了什么。

`static void __sched __schedule(void)`

任何帮助表示赞赏。

[编辑] 内核版本 3.5.4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T12:14:12.170

`__sched`实际上是定义为`__attribute__((__section__(".sched.text")))`中的宏`include/linux/sched.h`。该属性由[GCC 编译器](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)获取：

> 通常，编译器将它生成的对象放在数据和 bss 等部分中。但是，有时您需要额外的部分，或者您需要某些特定变量出现在特殊部分中，例如映射到特殊硬件。section 属性指定变量（或函数）位于特定的部分中。

# c# - C＃ ？？空合并运算符 LINQ

> ID：12689955
> 
> 赞同：7
> 
> 时间：2012-10-02T12:10:53.400
> 
> 标签：c#, xml, linq, null-coalescing-operator

当我使用 LINQ 将 XML 文件解析为自定义对象时，我试图防止出现 NULL 值。

我在[Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2007/09/20/the-new-c-null-coalescing-operator-and-using-it-with-linq.aspx)上找到了一个很好的解决方案，但由于某种原因，它不适用于我的整数。我想我使用了相同的语法，但似乎我遗漏了一些东西。哦，由于某种原因，它在节点不为空时起作用。

下面是我的代码的摘录。

```
List<GrantAgresso> lsResult = (from g in xml.Element("root").Elements("Elementname")
        select new GrantAgresso()
        {
             Year = (int?)g.Element("yearnode") ?? 0,
             Subdomain = (string)g.Element("domainnode") ?? ""
        }).ToList(); 
```

错误消息是：

> 输入字符串的格式不正确。

如果有人知道我做错了什么，请帮忙:)

编辑：一段 XML（奇怪的名字，但不是自愿选择的）

```
<Agresso>
  <AgressoQE>
    <r3dim_value>2012</r3dim_value>
    <r0r0r0dim_value>L5</r0r0r0dim_value>
    <r7_x0023_province_x0023_69_x0023_V005>0</r7_x0023_province_x0023_69_x0023_V005>
    <r7_x0023_postal_code_x0023_68_x0023_V004 />
    <r7_x0023_country_x0023_67_x0023_V003>1004</r7_x0023_country_x0023_67_x0023_V003>
    <r7_x0023_communitydistrict_x0023_70_x0023_V006>0</r7_x0023_communitydistrict_x0023_70_x0023_V006>
  </AgressoQE>
</Agresso> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:45:41.887

抛出的正是这个表达式：

```
(int?)g.Element("yearnode") 
```

这是因为如果元素的文本节点的实际值为`String.Empty`而不是`null`，因为空字符串不是 的有效格式`Int32.Parse`，尝试的转换失败。

如果您的 XML 中完全缺少该元素，这将按您的预期工作，但如果有一个空标签`<yearnode/>`or `<yearnode></yearnode>`，您将得到异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:17:46.220

你可以加`Where operator`

```
.....
.Where(a => ! string.IsNullOrEmpty(a)).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:45:03.367

如果 year 为 null 或**空**字符串，您将收到“输入字符串格式不正确”异常。您可以编写一个扩展方法来读取值。我没有测试下面的代码，但它可能会给你一些提示。

```
public static ReadAs<T>(this XElement el, T defaultValue) {
  var v = (string)el; // cast string to see if it is empty

  if (string.IsNullOrEmpty(v)) // test
    return defaultValue;

  return (T)el; // recast to our type.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T12:47:06.770

该消息`Input string was not in a correct format`看起来像抛出的消息，`int.parse ()`因此可能是您有一个`yearnode`带有值（非空）但无法成功解析为整数值的消息。

*这样的事情*可能会解决它：

```
List<GrantAgresso> lsResult = (from g in xml.Element("root").Elements("Elementname")
    let yearNode = g.Element("yearnode")
    select new GrantAgresso
    {
         Year = string.IsNullOrWhiteSpace(yearNode.Value) ? 0 : int.Parse(yearNode.Value),
         Subdomain = g.Element("domainnode").Value
    }).ToList(); 
```

有几点需要注意：

`select new GrantAgresso`- 对于带有对象初始值设定项的默认构造函数，您不需要括号。

`string.IsNullOrWhiteSpace`- 在 .net 4.0 中引入，`string.IsNullOrEmpty`如果您使用的是 3.5 或更早版本，请使用

`g.Element("domainnode").Value`- 将始终返回一个字符串

如果您想要 Year 的 null 而不是 0，请使用`(int?)null`而不是`0`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T23:41:43.877

如果元素不存在、元素为空或包含无法解析为整数的字符串，则以下扩展方法将返回 0：

```
 public static int ToInt(this XElement x, string name)
    {
        int value;
        XElement e = x.Element(name);
        if (e == null)
            return 0;
        else if (int.TryParse(e.Value, out value))
            return value;
        else return 0;
    } 
```

你可以像这样使用它：

```
...
Year = g.ToInt("r3dim_value"),
... 
```

或者，如果您准备好考虑反射成本并接受任何值类型的默认值，则可以使用此扩展方法：

```
public static T Cast<T>(this XElement x, string name) where T : struct
{
    XElement e = x.Element(name);
    if (e == null)
        return default(T);
    else
    {
        Type t = typeof(T);
        MethodInfo mi = t.GetMethod("TryParse",
                                    BindingFlags.Public | BindingFlags.Static,
                                    Type.DefaultBinder,
                                    new Type[] { typeof(string), 
                                                 t.MakeByRefType() },
                                    null);
        var paramList = new object[] { e.Value, null };
        mi.Invoke(null, paramList);
        return (T)paramList[1]; //returns default(T), if couldn't parse
    }
} 
```

并使用它：

```
...
Year = g.Cast<int>("r3dim_value"),
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T13:04:45.943

你的问题是从 XElement 到 int 的转换？对 XElement 的字符串值使用 int.Parse 方法，在您的情况下是 String.Empty。以下导致相同的错误：

```
XElement x = new XElement("yearnode", String.Empty);
int? a = (int?)x; // throws FormatException 
```

您可以通过首先将 XElement 强制转换为字符串并检查它是否为空或空并且仅在不强制转换为 int? 的情况下避免这种情况。为此，请更换

```
Year = (int?)g.Element("yearnode") ?? 0, 
```

和

```
Year = !string.IsNullOrEmpty((string)g.Element("yearnode")) ? (int?)g.Element("yearnode") : 0, 
```

它不漂亮，如果字符串不合法，它仍然会抛出，但如果你可以假设元素总是一个整数或空/空，它就可以工作。

# asp.net - 为 asp.net 更新现有的 Web 应用程序建议

> ID：12689958
> 
> 赞同：0
> 
> 时间：2012-10-02T12:11:10.043
> 
> 标签：asp.net

我有一个由多个不同客户端使用的 Web 应用程序。目前，使用任何更改更新其结尾的过程是这样的：

*   发布/编译应用程序
*   将相关文件放入 zip 中（而不是将 web.config 作为每个客户端的不同数据库路径并且不想覆盖）
*   在 SQL Server 上为所有存储过程生成脚本
*   添加到邮编
*   上传 zip 到网络
*   我创建的从客户端服务器运行的 WPF 应用程序下载 zip，将文件提取到 Web 应用程序文件夹并执行 sql server 存储过程的脚本

现在这确实有效，但它需要客户端的 IT 人员运行 WPF 应用程序来更新，并且可能需要几天时间才能让他们中的一些人开始使用它。所以我想做的是提供从网络应用程序内部更新网络应用程序的能力。我知道我可以创建一个 DLL 来执行 FTP、提取等，但我怎样才能让它在页面上显示进度？

或者，如果有人可以在不需要某人访问服务器的情况下更新 Web 应用程序，那就太好了，因为这种方法很难让客户知道何时有可用的更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:31:17.213

你可以使用即

```
[assembly: PreApplicationStartMethod(typeof(Your.Type), "MethodNameToCall")] 
```

它在项目的 AssemblyInfo.cs 文件中指定，以便在部署应用程序时执行一些设置代码。这会在部署时自动运行，并允许您进行复制/设置。您可能可以通过此代码运行 WPF 应用程序

```
System.Diagnostics.Process 
```

更新：

重新阅读这篇文章后，我似乎很清楚这是关于从 WPF 应用程序迁移到基于 Web 的应用程序。此外，张贴者似乎只是想要一种方法来从更新客户端文件系统的代码中发出信号，所以......

根据所需输入的复杂程度，您可能需要一个或多个页面和一个导航系统来前进和后退。

然而，一旦所有输入都被采纳并开始更新，您有几个选项 - 一个“hacky”另一个不是。

1 - Hacky) 使用 window.location javascript 和 setTimeout 以及会话跟踪刷新页面以更新 EWWWWW 后面的线程编码的进度...

2）使用 setInterval 创建一个 ajax 函数来轮询服务器（可能使用带有 [WebMethod] 属性的可调用方法。此方法可以将任意数据发送回 ajax 调用，然后用于更新 UI（可能使用某些东西）像 jqueryUI 进度条

注意：如果您要替换 bin 中的任何内容，请触摸 web.config 或实际上任何 .aspx 页面。然后您将自动重新启动服务器......如果是这种情况，那么您将不得不编写一个单独的应用程序，该应用程序将从外部更新另一个应用程序+您应该向任何连接的用户发出信号，告知将很快关闭并开始阻塞新用户，直到升级完成。

# android - 在android中的画布上旋转位图

> ID：12689969
> 
> 赞同：0
> 
> 时间：2012-10-02T12:12:14.310
> 
> 标签：android

我在画布上旋转位图时遇到问题，我正在使用 canvas.drawline 在画布上绘制位图并使用以下代码旋转图像

它旋转但现在显示两个图像？如何从画布中删除以前的图像？该怎么办？

```
bitmap = Bitmap.createBitmap((int) /*getWindowManager()
                        .getDefaultDisplay().getWidth()*/600, (int) /*getWindowManager()
                        .getDefaultDisplay().getHeight()*/600, Bitmap.Config.ARGB_8888 );
             Canvas canvas = new Canvas(bitmap);
             drawingImageView.setVisibility(View.VISIBLE);

               drawingImageView.setImageBitmap(bitmap);

              // canvas.rotate(90);
                   for(int i=0;i<SettingsStaticData.arrX1_crossPoint.size();i++)
                   {

                       canvas.drawLine(new Float(SettingsStaticData.arrX1_crossPoint.get(i)),new Float(SettingsStaticData.arrY1_crossPoint.get(i)),new Float(SettingsStaticData.arrX2_crossPoint.get(i)) ,new Float(SettingsStaticData.arrY2_crossPoint.get(i)), paint);

                   }

                    paint.setStrokeWidth((float) 0.9);
                   paint.setStyle(Paint.Style.FILL);
                 //  paint.setColor(Color.RED);

                   paint.setColor(Color.parseColor("#800080"));
               for(int i=0;i<arrXX.size()-1;i++)
                {

                  if(i==arrXX.size()-2)
                  {
                      canvas.drawLine(new Float(arrXX.get(0)),new Float(arrYY.get(0)),new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);
                      canvas.drawLine(new Float(arrXX.get(i)),new Float(arrYY.get(i)),new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);

                  }
                  else
                  {
                      canvas.drawLine(new Float(arrXX.get(i)),new Float(arrYY.get(i)),new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);

                  }
                }

        //     canvas.drawColor(0, Mode.CLEAR);
               Matrix matrix = new Matrix();

                  matrix.reset();
               matrix.postTranslate(-bitmap.getWidth() / 2-500, -bitmap.getHeight() / 2-500); // Centers image
               matrix.postRotate(180);
              //matrix.postTranslate(px, py);

               canvas.drawBitmap(bitmap, matrix, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:17:13.897

问题是最后一行：`canvas.drawBitmap(bitmap, matrix, null);`

`canvas`用 初始化，`bitmap`因此您可以在自身上绘制位图（进行一些更改）。

只需创建另一个`Canvas canvas2`并将最后一行更改为`canvas2.drawBitmap(bitmap, matrix, null);` 并显示最后一行`drawingImageView.setImageBitmap(bitmap2);`，其中 bitmap2 是用于创建 canvas2 的位图。

所以，明确地：

```
bitmap = Bitmap.createBitmap((int) /*getWindowManager()
            .getDefaultDisplay().getWidth()*/600, (int) /*getWindowManager()
            .getDefaultDisplay().getHeight()*/600, Bitmap.Config.ARGB_8888 );
bitmapFinal = Bitmap.createBitmap((int) /*getWindowManager()
            .getDefaultDisplay().getWidth()*/600, (int) /*getWindowManager()
            .getDefaultDisplay().getHeight()*/600, Bitmap.Config.ARGB_8888 );

    Canvas canvas = new Canvas(bitmap);
    // canvas.rotate(90);
    for(int i=0;i<SettingsStaticData.arrX1_crossPoint.size();i++){
        canvas.drawLine(new Float(SettingsStaticData.arrX1_crossPoint.get(i)),
                new Float(SettingsStaticData.arrY1_crossPoint.get(i)),
                new Float(SettingsStaticData.arrX2_crossPoint.get(i)) ,
                new Float(SettingsStaticData.arrY2_crossPoint.get(i)), paint);
    }

    paint.setStrokeWidth((float) 0.9);
    paint.setStyle(Paint.Style.FILL);
    //  paint.setColor(Color.RED);

    paint.setColor(Color.parseColor("#800080"));
    for(int i=0;i<arrXX.size()-1;i++){

        if(i==arrXX.size()-2){
            canvas.drawLine(new Float(arrXX.get(0)),new Float(arrYY.get(0)),
                    new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);
            canvas.drawLine(new Float(arrXX.get(i)),new Float(arrYY.get(i)),
                    new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);

        }else{
            canvas.drawLine(new Float(arrXX.get(i)),new Float(arrYY.get(i)),new Float(arrXX.get(i+1)) ,new Float(arrYY.get(i+1)), paint);
        }
    }
    //     canvas.drawColor(0, Mode.CLEAR);
    Matrix matrix = new Matrix();
    matrix.reset();
    matrix.postTranslate(-bitmap.getWidth() / 2-500, -bitmap.getHeight() / 2-500); // Centers image
    matrix.postRotate(180);
    //matrix.postTranslate(px, py);

    Canvas canvas2 = new Canvas(bitmapFinal);
    canvas2.drawBitmap(bitmap, matrix, null);
    drawingImageView.setVisibility(View.VISIBLE);
    drawingImageView.setImageBitmap(bitmapFinal); 
```

另外，我的建议是寻找一个更好的位置来创建位图——你真的不需要每次都创建一个新的位图——你应该创建一次并重复使用（不断创建位图的成本很高）。我会`onCreate()`为此目的建议功能。

# oracle - Oracle Forms 的文本编辑器

> ID：12689970
> 
> 赞同：0
> 
> 时间：2012-10-02T12:12:18.443
> 
> 标签：oracle, tinymce, javabeans

谁能帮助我。我需要在我的 oracle 表单中集成一个免费的文本编辑器。我知道有 TinyMCE，但我不知道如何将它与 JavaBeans 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:23:12.810

Forms 社区是[一个庞大的可插入 Java 组件库](http://forms.pjc.bean.over-blog.com/)，它们是免费的。

至少有一个富文本编辑器组件，Frite：[在这里找到它](http://www.degenio.com/frite/)。没有任何暗示或意图的保证。

# php - 如何在 opencart 中添加产品特定的元数据

> ID：12689974
> 
> 赞同：0
> 
> 时间：2012-10-02T12:12:39.193
> 
> 标签：php, facebook-opengraph, meta-tags, opencart

我正在尝试添加特定于产品的元标记。例如 og:image、产品价格等。

谷歌和推特不会抛出任何错误或警告，但如果我在`<body>`标签内添加元而不是`<head>`标签，Facebook 会抛出警告。

我尝试使用以下代码，但没有显示任何内容。

```
<?php if ($page == 'product/product') { ?>
<meta property="og:image" content="<?php echo $thumb; ?>"/>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:13:16.723

> `<body>`但如果我在标签内添加元而不是标签，Facebook 会发出警告`<head>`。

该`meta`元素只允许在`head`元素中，而不是在`body`.

这是在 HTML 规范中定义的——所以去修复这个*错误*。

# python - 如何从命令行使用 JSBeautify？

> ID：12689976
> 
> 赞同：2
> 
> 时间：2012-10-02T12:12:46.397
> 
> 标签：python, shell, command-line, js-beautify

我喜欢[jsbeautifier.org](http://jsbeautifier.org/)，我看到他们的代码有一个[github](https://github.com/einars/js-beautify)存储库。

自述文件有两个示例说明如何通过命令行使用此工具：

```
import jsbeautifier
res = jsbeautifier.beautify('your javascript string')
res = jsbeautifier.beautify_file('some_file.js') 
```

和：

```
opts = jsbeautifier.default_options()
opts.indent_size = 2
res = jsbeautifier.beautify('some javascript', opts) 
```

如何将其合并到脚本 ( `myjsbeautify.py`) 中，以便它可以接受其中一个`stdin`或参数（文件名）并输出到`stdout`？我也想使用该选项`keep array indentation`。

**所需的语法**

```
cat ugly.js | myjsbeautify.py 
```

或者

```
myjsbeautify.py ugly.js 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:58:27.860

查看[这篇](http://tobyho.com/2012/03/08/jsbeautifier/)关于将 JSBeautify 与 Textmate 结合使用的帖子。它有一些关于如何在您的系统上安装它的很好的说明。在 Mac OS X 上，我使用：

```
cd /tmp
git clone https://github.com/einars/js-beautify.git
cd js-beautify/python
python setup.py install 
```

然后你可以简单地使用`js-beautify /path/to/filename.js`它来运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:24:54.387

您的示例是用作库而不是命令行。如果您尝试自己创建一个可以接受参数并将其传递给 JSBeautifier 的脚本，您应该查看[argparse](http://docs.python.org/library/argparse.html#module-argparse)模块。它有一些很好的例子可以帮助你前进。来自文档的示例：

```
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('infile', nargs='?', type=argparse.FileType('r'),
...                     default=sys.stdin)
>>> parser.add_argument('outfile', nargs='?', type=argparse.FileType('w'),
...                     default=sys.stdout)
>>> parser.parse_args(['input.txt', 'output.txt'])
Namespace(infile=<_io.TextIOWrapper name='input.txt' encoding='UTF-8'>,
          outfile=<_io.TextIOWrapper name='output.txt' encoding='UTF-8'>)
>>> parser.parse_args([])
Namespace(infile=<_io.TextIOWrapper name='<stdin>' encoding='UTF-8'>,
          outfile=<_io.TextIOWrapper name='<stdout>' encoding='UTF-8'>) 
```

编辑：您也可以使用自己使用的[getopt](http://docs.python.org/library/getopt.html)`jsbeautifier.py`。如果您只想`jsbeautifier.py`用作命令行工具，请`usage`从源代码中读取函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:04:49.730

通常，您可以使用该`fileinput`模块，它允许您从标准输入或位置参数中命名的文件中读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-23T20:14:07.110

我刚刚做了`pip install jsbeautify`，它添加`js-beautify`到我的路径（`/usr/local/bin/js-beautify`）。

您可以按预期使用它：

```
js-beautify --keep-array-indentation file.json > file.pretty.json 
```

并使用帮助来检查更多参数：

```
js-beautify --help 
```

# wpf - WPF中的global.asax之类的东西

> ID：12689978
> 
> 赞同：2
> 
> 时间：2012-10-02T12:12:59.287
> 
> 标签：wpf, global-asax

我有很多窗口的应用程序，我只是好奇（在 WPF 中）有没有像 ASP.NET 中的 global.asax 这样的东西？例如，我只想在有人使用 alt-f4 关闭应用程序后清理一些数据。

感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:17:35.413

WPF 中的大致等价物`Global.asax`是`app.xaml`/ `app.xaml.cs`。您可以覆盖那里的方法来处理启动和关闭。

例如，在您的 中`app.xaml.cs`，您可以添加以下内容：

```
 protected override void OnExit(ExitEventArgs e)
    {
        base.OnExit(e);

        // custom exit code here
    } 
```

# wordpress - 将请求重定向到所有 url，但一个带有 .htaccess 的

> ID：12689979
> 
> 赞同：1
> 
> 时间：2012-10-02T12:12:59.390
> 
> 标签：wordpress, .htaccess, redirect

我有一个网站，其中只有一个 wordpress（我们称之为博客）应用程序。我现在需要将另一个 Web 应用程序（我们称之为投资组合）添加到同一个域，并将博客移动到 site.com/blog。用户将能够选择在启动页面上访问哪一个。所以基本上我会有以下结构：

```
site.com -> splash page
site.com/blog
site.com/portfolio 
```

问题是，我不想破坏网络上现有的博客文章链接，并希望 301 将所有不针对 /portfolio 的请求重定向到博客应用程序，例如：

```
site.com/about_me redirects to site.com/wordpress/about_me but
site.com/portfolio/index doesn't get redirected. 
```

我猜它是在 .htaccess 文件中完成的，但经过大量阅读后无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:30:30.083

使用 a`RewriteCond`匹配`portfolio`并处理不匹配的请求：

```
RewriteEngine On
# if it isn't a real existing file (like img or css)
# Remove these two lines if your images and CSS break on the wordpress site.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrite (redirect 301) requests not already to portfolio or wordpress to /wordpress
RewriteCond %{REQUEST_URI} !^/(portfolio|wordpress)
RewriteRule ^(.*) wordpress/$1 [L,R=301] 
```

# mpmovieplayercontroller - MPMoviePlayerController currentPlaybackTime 在设置 setCurrentPlaybackTime 时跳转

> ID：12689980
> 
> 赞同：-2
> 
> 时间：2012-10-02T12:13:00.513
> 
> 标签：mpmovieplayercontroller, ios6

我使用 MPMoviePlayerController 作为我的媒体播放器。我正在尝试使用我的方法来寻找（movieController 是 MPMoviePlayerController 的一个实例）

```
-(void)seekToTime:(NSTimeInterval)time
{
    [movieController setCurrentPlaybackTime:time];
    [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(printCurrentPlaybacktime) userInfo:nil repeats:YES];
} 
```

如您所见 - 搜索后我快速打印出当前播放时间。问题是——在开始时，当前播放时间是我设置的实际新时间。一段时间后，当前播放时间是更改播放时间前的旧时间，一段时间后又回到新的实际时间。用户的结果是搜索滑块正在跳跃。

这是日志

> 907] 打印 [movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.518 Comigo [1067:907] 打印 [movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.521 Comigo [1067:907] 打印 [ movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.525 Comigo[1067:907] 打印 [movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.529 Comigo[1067:907] 打印 [movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.531 Comigo[1067:907] 打印 [movieController currentPlaybackTime] = 3660.000000 2012-10-02 11:58:27.535 Comigo[1067:907] 打印 [movieController currentPlaybackTime] = 36620.000021 -02 11:58:27.538 Comigo[1067:907] print [movieController currentPlaybackTime] = 3660.000000} 我删除了一些行（因为它们很多）。所以不要 注意日志日期。多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:02:39.453

你为什么不直接使用

```
[movieController pause] 
```

反而？

# c++ - C样式字符串键上的multimap无法插入条目

> ID：12689981
> 
> 赞同：2
> 
> 时间：2012-10-02T12:13:00.793
> 
> 标签：c++, stl, multimap

我正在尝试创建一个以 C 样式字符串为索引的多图，如以下代码段所示：

```
 #include <cstring>
    #include <map>
    #include <iostream>

    using namespace std;

    int main(void)
    {
        int i, j;
        int (*fn_pt)(const char *, const char *) = strcmp;
        multimap<char *, char *, int (*)(const char *, const char *)>a(fn_pt);

        for (i = 0; i < 2; i++)
        {
            char key[2];
            sprintf(key, "%d", i);
            for (j = 0; j< 5; j++)
            {
                char value[2];
                sprintf(value, "%d", j);
                a.insert(pair<char *, char *>(key, value));
            }
        }

        for (i = 0; i < 2; i++)
        {
            char key[2];
            sprintf(key, "%d", i);
            multimap<char *, char *>::iterator it = a.find(key);
            while (it != a.end())
            {
                cout << it->first << "\t" << it->second <<endl;
                it++;
            }
        }
    } 
```

只需将上述程序中的键更改为整数即可得到预期的结果。但是，在字符串上索引多重映射给了我一些意想不到的东西（只有 1 和 4 的行由空格分隔），而不是向我显示使用的每个键值的每个值。

我在哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:17:26.680

`strcmp`是在 中使用的错误谓词`multimap`。谓词应满足以下条件：

> 表达式 comp(a,b)，其中 comp 是此比较类的对象，a 和 b 是键值，如果在严格的弱排序操作中将 a 放置在比 b 更早的位置，则应返回 true。

`strcmp`违反了这一点，因为如果字符串不相等（a < b 或 a > b），它会返回一个非零值。

您应该定义自己的谓词，`true` **当且仅当**第一个字符串小于第二个字符串时才返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:17:42.660

```
 multimap<char *, char *, int (*)(const char *, const char *)>a(fn_pt);

    for (i = 0; i < 2; i++)
    {
        char key[2];
        sprintf(key, "%d", i);
        for (j = 0; j< 5; j++)
        {
            char value[2];
            sprintf(value, "%d", j);
            a.insert(pair<char *, char *>(key, value));
        }
    } 
```

您将两个指针存储在一个容器中，然后当它们超出范围时销毁这些指针所指向的对象 (`key`和)。`value`这使得容器中的信息现在变得毫无意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:19:05.830

您正在使用它们的内存`key`并且`value`在它们超出范围之后很久。事实上，你所有的`char*`指针都指向同一块堆栈内存，而当你真正看到它时，那块内存已经准备好被重用了。

要做你想做的事，你需要用它`strdup()`来创建数据的永久副本`char *`。当然，那么您需要担心以后释放它。

# algorithm - 通过素数分解检查整除性

> ID：12689982
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:13:02.713
> 
> 标签：algorithm, math

为了检查一个整数（比如 A）被另一个整数（比如 B）整除，我尝试了一种方法，即分解 B 并检查 A 是否可以被 B 的所有素因子整除。但是我不确定它是否正确？你能建议可以做什么吗？例如，如果我们有一个非常大的整数，比如 10^100，并且我们想检查它是否可以被另一个整数整除，比如 200，那么我正在尝试 10^100 是否可以被 2 和 5 整除（通过注意最后一位数字）。如果 A 足够小，我们可以直接检查 A%B==0 但我正在尝试更大的数字。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:27:06.930

您必须计算素数在 的因式分解中出现的次数`B`，并确保它在 的因式分解中至少出现同样多次`A`。

所以，200 = 2 ³ * 5 ²。Then`A`能被 200 整除当且仅当它可以被 2 ³和 5 ²整除。

除非您已经以某种方式知道因式分解，否则因式分解`A`远比仅除以`B`. 原因是需要许多试除法（或等效工作）才能完全分解`A`，而只需要一个试除法来检查它是否可被 整除`B`。毕竟，考虑`B`素数的情况：您已经找到的*所有*素因数`A`，而您所需要的只是测试是否`B`是其中之一。这不可能是更少的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:37:26.240

这是整数分解最好的想法，写在这里是为了让更多的人知道和参与。

一种新的整数因式分解方法 1+2+3+4+……+k=Ny,(k

真金怕火，你可以试一试`1+2+3+...+k=Ny(k<N/2)`。

我怎么知道“k”和“y”？

“P”是“N”的因数，`GCD(k,N)=P`.

这个想法可能是比费马分解更简单的方法`method(x^2-N=y^2)`！

真金怕火，你可以试一试`1+2+3+...+k=Ny(k<N/2)`。

在我的 G+ 和 BLOG 中详细了解该过程。

# python - 使用 Python pdb 检查未处理异常原因的最简单方法是什么？

> ID：12689985
> 
> 赞同：6
> 
> 时间：2012-10-02T12:13:06.893
> 
> 标签：python, pdb

我刚刚将所有单元测试数据从 JSON 转换为 YAML，现在在我的代码中某处引发了异常。更具体地说，这是打印的回溯：

```
回溯（最近一次通话最后）：
  文件“tests/test_addrtools.py”，第 95 行，在 test_validate_correctable_addresses
    self.assertTrue(self.validator(addr), msg)
  文件“/Users/tomas/Dropbox/Broadnet/broadpy/lib/broadpy/addrtools.py”，第 608 行，在 __call__
    自我验证（地址）
  文件“/Users/tomas/Dropbox/Broadnet/broadpy/lib/broadpy/addrtools.py”，第 692 行，验证中
    if self._correction_citytypo(addr): 返回
  _correction_citytypo 中的文件“/Users/tomas/Dropbox/Broadnet/broadpy/lib/broadpy/addrtools.py”，第 943 行
    ratio = lev_ratio(old_city, city)
TypeError: ratio 期望两个字符串或两个 Unicode
```

现在，第 943 行的文件“addrtools.py”包含了我的问题的答案。我想查看引发异常的范围`old_city`和范围内的类型和值。`city`我一直都有这种问题，并且使用一种快速而轻松的方法`pdb`来检查引发异常的范围内的本地人将在未来为我节省大量时间。

* * *

我确实尝试了[这个问题](https://stackoverflow.com/q/906649/388916)的答案中发布的解决方案，但是事后分析函数将我置于*python2.7/unittest/main.py(231)runTests()*中，这对我没有多大帮助。我想这是因为从单元测试代码中捕获并重新引发了异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:16:36.220

用它包装它：

```
def debug_on(*exceptions):
    if not exceptions:
        exceptions = (AssertionError, )
    def decorator(f):
        @functools.wraps(f)
        def wrapper(*args, **kwargs):
            try:
                return f(*args, **kwargs)
            except exceptions:
                pdb.post_mortem(sys.exc_info()[2])
        return wrapper
    return decorator 
```

例子：

```
@debug_on(TypeError)
def buggy_function()
    ....
    raise TypeError 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:45:07.623

unittest superset [**nose**](https://nose.readthedocs.org/en/latest/)有一个选项，`pdb`当测试失败时，如果你可以使用nose 作为测试运行器，你可以选择：

```
--pdb                 Drop into debugger on errors
--pdb-failures        Drop into debugger on failures 
```

# mysql - 从 Windows 8 应用程序访问远程 MySQL 数据库

> ID：12689987
> 
> 赞同：2
> 
> 时间：2012-10-02T12:13:10.640
> 
> 标签：mysql, windows-8

我需要访问位于远程服务器中的 MySQL 数据库。我需要获取数据并将其显示在 Windows 8 App (HTML/Javascript) 中。是否有任何可用的 API 或 JS 框架可以访问远程数据库。

我不想将数据库存储在 Windows 8 应用程序中，我只需要从远程检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:53:55.860

创建 Web 服务并在您的应用程序中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T22:44:55.660

you can use WCF Service this best way.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T14:36:38.917

好吧，我最近对 ​​Windows 商店应用程序和 Php 做了一些调整，这就是我想出的，虽然不多，但它可以让你开始。

您可以将 MySQL 与 Php 一起使用，然后回显数据。这是 JavaScript / HTML windows store 可以使用 JQuery 获取数据的地方。

```
$.ajax({
    type: "GET" //POST GET your choice
    url: " " //paste the php script that retrieves the data from the database
    success: function (output){
         $('#myDiv').append(data);
    }
}); 
```

请记住，这只是通过 PHP 从 MySQL 访问数据的一种未经授权的方式。

HTML 可以是 default.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>test</title>
    <script src="/Scripts/jquery-2.0.3.js"></script> 
    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.2.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.2.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.2.0/js/ui.js"></script>

    <!-- test references -->
    <link href="/css/default.css" rel="stylesheet" />

    <script src="/js/default.js"></script>
    <script src="/Scripts/myScript.js"></script>

</head>
<body>
   <div id="myDiv">

   </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:55:11.010

不知道为什么上一篇文章被否决了，但这里有一个更深入的解释：

根据 Microsoft 在其示例中提出的设计模型以及对高响应应用程序的需求，将数据导入 Windows 8 应用程序的首选方法是通过 Web 服务。这允许您执行诸如使用 async/await 关键字之类的操作，以便您的应用程序可以在获取数据时保持响应。几乎没有理由在 Web 服务上使用数据库。

您应该在此处查看 HTML/Javascript 应用程序的数据使用示例：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-26T20:50:07.077

我用 MySQL 连接器看这个例子：

[https://blogs.oracle.com/MySqlOnWindows/entry/how_to_using_connector_net](https://blogs.oracle.com/MySqlOnWindows/entry/how_to_using_connector_net)

到目前为止，我还没有在远程数据库上测试过，但是可以在 localhost 上工作

# android - Android 中使用 DownloadManager 和睡眠线程下载时的 ProgressBar

> ID：12689992
> 
> 赞同：0
> 
> 时间：2012-10-02T12:13:26.783
> 
> 标签：android, asynchronous, download, progress-bar, download-manager

我使用 DownloadManager 从 URL 下载 xml 文件。然后我使用线程等待 2 秒以完成将文件保存到 sd 卡。

我想要一个活动圈，如图[所示](http://developer.android.com/design/building-blocks/progress.html)。实现这一点的最简单方法是什么？我需要实施一个`AsyncTask`吗？

我要下载并等待的代码：

```
 //Download XML file from URL 
                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(URL));
                request.setTitle("Download von "+Name+".xml");

                // in order for this if to run, you must use the android 3.2 to compile your app
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                    request.allowScanningByMediaScanner();
                    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                }

                request.setDestinationInExternalPublicDir(FileSeperator+"XML"+FileSeperator, Name + FileExtension);

                // get download service and enqueue file
                DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
                manager.enqueue(request);  

                File file = new File(Environment.getExternalStorageDirectory()+ FileSeperator 
                        +"XML"+FileSeperator+ Name + FileExtension);

                System.out.println("File existiert "+file.exists());

                //insert delay after download to finish save progress before starting to parse the xml
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } 
```

**更新** 这是我实现的 AsyncTask

```
private class DownloadFile extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... sUrl) {
        try {
            //Download XML file from URL 
        DownloadManager.Request request = new DownloadManager.Request(Uri.parse(URL));
        request.setTitle("Download von "+Name+".xml");

        // in order for this if to run, you must use the android 3.2 to compile your app
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            request.allowScanningByMediaScanner();
            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
        }

        request.setDestinationInExternalPublicDir(FileSeperator+"XML"+FileSeperator, Name + FileExtension);

        // get download service and enqueue file
        DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
        manager.enqueue(request);  

        File file = new File(Environment.getExternalStorageDirectory()+ FileSeperator 
                +"XML"+FileSeperator+ Name + FileExtension);

        System.out.println("File existiert "+file.exists());

        //insert delay after download to finish save progress before starting to parse the xml
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        } catch (Exception e) {
        }
        return null;
    }
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog.show();
    }
    protected void onPostExecute() {
        super.onPreExecute();
        pDialog.dismiss();
    }
    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
    }
} 
```

我这样称呼它：

```
 // instantiate it within the onCreate method
        pDialog = new ProgressDialog(CreateProject.this);
        pDialog.setMessage("Lädt...");
        pDialog.setIndeterminate(true);

        // execute this when the downloader must be fired
        DownloadFile downloadFile = new DownloadFile();
        downloadFile.execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:38:45.170

我认为是的，你应该用`AsynsTask`类来实现它，它清晰、快速、简单。[你可以在这里](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)阅读一个简短的教程`AsyncTask`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:31:23.920

您可以使用 asynctask onPreExecute() 很好地满足您的要求，显示您的进度对话框在 doInBackground() 中执行您的过程，然后 onPostExecture 关闭对话框并显示您的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:36:40.477

只需在子类 onPostExecute 中调用 super.onPostExecute() 而不是 super.onPreExecute() ，否则将无法正常工作

# javascript - 获取按下的键的键值

> ID：12689995
> 
> 赞同：9
> 
> 时间：2012-10-02T12:13:38.143
> 
> 标签：javascript, jquery, keypress

我不知道如何获取按下的键的值。我目前有

```
$('#info_price').bind('keydown',function(evt){
    alert(evt.keyCode); 
```

但是当我按下 1 而不是返回“1”时，它会返回“49”。

编辑：我知道密钥'1'的Ascii代码。

最终目标是让人们只在输入中写入数字。所以我想检测非数字而不显示它们。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T12:18:21.173

正如评论中所说，它是`ASCII`代码。要将其作为角色，您可以执行以下操作：

```
alert(String.fromCharCode(evt.keyCode)); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-06-16T06:43:44.227

对于那些现在谷歌它的人，就像我一样

```
$('input').on('keydown', function(e) {
  console.log(e.key);
});​ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T12:17:36.733

这是一个完整的代码供您使用（不是我的，但我使用了它）：

> [http://www.selfcontained.us/2009/09/16/getting-keycode-values-in-javascript/](http://www.selfcontained.us/2009/09/16/getting-keycode-values-in-javascript/)

```
keycode = {

    getKeyCode : function(e) {
        var keycode = null;
        if(window.event) {
            keycode = window.event.keyCode;
        }else if(e) {
            keycode = e.which;
        }
        return keycode;
    },

    getKeyCodeValue : function(keyCode, shiftKey) {
        shiftKey = shiftKey || false;
        var value = null;
        if(shiftKey === true) {
            value = this.modifiedByShift[keyCode];
        }else {
            value = this.keyCodeMap[keyCode];
        }
        return value;
    },

    getValueByEvent : function(e) {
        return this.getKeyCodeValue(this.getKeyCode(e), e.shiftKey);
    },

    keyCodeMap : {
        8:"backspace", 9:"tab", 13:"return", 16:"shift", 17:"ctrl", 18:"alt", 19:"pausebreak", 20:"capslock", 27:"escape", 32:" ", 33:"pageup",
        34:"pagedown", 35:"end", 36:"home", 37:"left", 38:"up", 39:"right", 40:"down", 43:"+", 44:"printscreen", 45:"insert", 46:"delete",
        48:"0", 49:"1", 50:"2", 51:"3", 52:"4", 53:"5", 54:"6", 55:"7", 56:"8", 57:"9", 59:";",
        61:"=", 65:"a", 66:"b", 67:"c", 68:"d", 69:"e", 70:"f", 71:"g", 72:"h", 73:"i", 74:"j", 75:"k", 76:"l",
        77:"m", 78:"n", 79:"o", 80:"p", 81:"q", 82:"r", 83:"s", 84:"t", 85:"u", 86:"v", 87:"w", 88:"x", 89:"y", 90:"z",
        96:"0", 97:"1", 98:"2", 99:"3", 100:"4", 101:"5", 102:"6", 103:"7", 104:"8", 105:"9",
        106: "*", 107:"+", 109:"-", 110:".", 111: "/",
        112:"f1", 113:"f2", 114:"f3", 115:"f4", 116:"f5", 117:"f6", 118:"f7", 119:"f8", 120:"f9", 121:"f10", 122:"f11", 123:"f12",
        144:"numlock", 145:"scrolllock", 186:";", 187:"=", 188:",", 189:"-", 190:".", 191:"/", 192:"`", 219:"[", 220:"\\", 221:"]", 222:"'"
    },

    modifiedByShift : {
        192:"~", 48:")", 49:"!", 50:"@", 51:"#", 52:"$", 53:"%", 54:"^", 55:"&", 56:"*", 57:"(", 109:"_", 61:"+",
        219:"{", 221:"}", 220:"|", 59:":", 222:"\"", 188:"<", 189:">", 191:"?",
        96:"insert", 97:"end", 98:"down", 99:"pagedown", 100:"left", 102:"right", 103:"home", 104:"up", 105:"pageup"
    }

}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T12:16:36.377

在 javascript 中，每个键都与一个 ASCII 码相关联，如下所示

```
 1-49
                          2-50 
```

像这样 [http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

所以你需要根据 keypress 事件来映射这个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T12:26:20.677

您可以像这样检测所有键值：

[这是工作 jsFiddle 示例。](http://jsfiddle.net/xVCFQ/4/)

```
$('textarea').keydown(function(e) {
    var order = e.which;
    console.log(order);
});​ 
```

[资源。](http://www.catswhocode.com/blog/using-keyboard-shortcuts-in-javascript)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T12:20:16.387

要获得 的字符`ASCII`：

```
String.fromCharCode(); 
```

变成`ASCII`一个字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T12:19:41.123

键码不直接映射到字符值。相反，您需要查看`keypress`为您提供`charCode`属性的事件。然后，您可以使用`String.fromCharCode`将其转换为字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-28T22:05:49.423

`data`今天的 Chrome 和 Opera在事件对象中具有只读属性。

在 MDN 上写到，目前这个功能是“工作草案”。

[https://developer.mozilla.org/en-US/docs/Web/API/InputEvent/data](https://developer.mozilla.org/en-US/docs/Web/API/InputEvent/data)

# c# - SQL 搜索问题

> ID：12689996
> 
> 赞同：0
> 
> 时间：2012-10-02T12:13:43.307
> 
> 标签：c#, asp.net, sql-server, database

所以这是我的问题：我有一个网站，我必须在上面搜索内容。这是我的sql语句：

```
public DataTable Search(string Keyword)
{
    return db.GetData("SELECT * FROM tblBehandlinger WHERE fldYdelse LIKE @1", 
                  "%" + Keyword + "%");
} 
```

但正如您所见，它只会搜索表名“fldYdelse”。我工作得很好，但我的问题是它不会搜索两件事。这就是我想要的样子：

```
public DataTable Search(string Keyword)
{
    return db.GetData("SELECT * FROM tblBehandlinger WHERE fldYdelse LIKE 
                       @1 OR fldPris @2", "%" + Keyword + "%");
} 
```

这是我的`search.aspx`网站后端：

```
string keyword = Request.QueryString["search"].ToString();

foreach (DataRow item in s.Search(keyword).Rows)
{
    //BLAH BLAH BLAH
} 
```

但我不能一一列举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:16:50.343

`LIKE`您还必须使用第二个参数编写谓词`fldPris`。您的 sql 语句应如下所示：

```
SELECT * 
FROM tblBehandlinger 
WHERE fldYdelse LIKE @1 
   OR fldPris   LIKE @2 
```

代替：

```
SELECT * 
FROM tblBehandlinger 
WHERE fldYdelse LIKE @1 
   OR fldPris @2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:17:14.773

在 C# 中重复一个参数（字符串）很便宜……你想使用一个参数两次吗？

```
return db.GetData("SELECT * FROM tblBehandlinger " +
                  "WHERE fldYdelse LIKE @1 OR fldPris LIKE @2",
                  "%" + Keyword + "%", "%" + Keyword + "%"); 
```

或者你真的错过了第二个LIKE？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:18:13.193

我想你的意思是

```
return db.GetData("SELECT * FROM tblBehandlinger WHERE fldYdelse LIKE 
                   @1 OR fldPris LIKE @1", "%" + Keyword + "%"); 
```

是同一个关键词

# android - SQLite插入抛出语法异常

> ID：12689998
> 
> 赞同：3
> 
> 时间：2012-10-02T12:13:48.983
> 
> 标签：android, sqlite

**我从 SQLite 收到此错误，**

`near ",": syntax error (code 1):`，编译时：

```
UPDATE OutfitItem 
SET outfit_img_relative_pos_x=?,clothing_item_ID=?,outfit_img_relative_pos_y=?,
outfit_img_relative_size_width=?,outfit_ID=?,outfit_img_relative_size_height=? 
WHERE (outfit_ID,clothing_item_ID) = (60,5) 
```

**有人可以帮我找出错误吗？**

**以下是编译后的代码...**

```
// ---updates a outfitItem---
        public boolean update(long outfitID, long clothingItemID, double imgRelativePos_X, double imgRelativePos_Y,
                double imgRelativeSize_width, double imgRelativeSize_height)
        {
            ContentValues args = new ContentValues();
            args.put(KEY_OUTFIT_ID, outfitID);
            args.put(KEY_CLOTHING_ITEM_ID, clothingItemID);
            args.put(KEY_OUTFIT_IMAGE_RELATIVE_POS_X, imgRelativePos_X);
            args.put(KEY_OUTFIT_IMAGE_RELATIVE_POS_Y, imgRelativePos_Y);
            args.put(KEY_OUTFIT_IMAGE_RELATIVE_SIZE_WIDTH, imgRelativeSize_width);
            args.put(KEY_OUTFIT_IMAGE_RELATIVE_SIZE_HEIGHT, imgRelativeSize_height);
            return db.update(TABLE_NAME, args, "(" + KEY_OUTFIT_ID + "," + KEY_CLOTHING_ITEM_ID + ") = (" + outfitID
                    + "," + clothingItemID + ")", null) > 0;
        } 
```

**以下是创建表的代码，请注意外键设置为...**

```
public static final String TABLE_NAME = "OutfitItem";

        public static final String TABLE_CREATE = "create table " + TABLE_NAME + "(" + KEY_OUTFIT_ID
                + " int not null REFERENCES " + Table_Outfit.TABLE_NAME + "(" + KEY_OUTFIT_ID + ") ON DELETE CASCADE,"
                + KEY_CLOTHING_ITEM_ID + " int not null REFERENCES " + Table_ClothingItem.TABLE_NAME + "("
                + KEY_CLOTHING_ITEM_ID + ") ON DELETE CASCADE, " + KEY_OUTFIT_IMAGE_RELATIVE_POS_X + " real not null, "
                + KEY_OUTFIT_IMAGE_RELATIVE_POS_Y + " real not null, " + KEY_OUTFIT_IMAGE_RELATIVE_SIZE_WIDTH
                + " real not null, " + KEY_OUTFIT_IMAGE_RELATIVE_SIZE_HEIGHT + " real not null, " + "primary key ("
                + KEY_OUTFIT_ID + "," + KEY_CLOTHING_ITEM_ID + "));"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:16:49.860

您的问题出在您的`WHERE`条款中：

```
WHERE (outfit_ID,clothing_item_ID) = (60,5) 
```

这不是有效的 SQL 语法。`AND`您需要在连词中使用单独的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:37:21.410

正如*@Neil*正确指出的那样，使用以下代码，它将开始工作：

```
UPDATE OutfitItem 
SET outfit_img_relative_pos_x=?,clothing_item_ID=?,outfit_img_relative_pos_y=?,
outfit_img_relative_size_width=?,outfit_ID=?,outfit_img_relative_size_height=? 
```

**`WHERE outfit_ID = 60 AND clothing_item_ID = 5;`**