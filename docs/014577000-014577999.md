# StackOverflow 问答 14577000-14577999

# php - 如何使用php在googlemap上显示gps信息

> ID：14577002
> 
> 赞同：1
> 
> 时间：2013-01-29T06:35:10.120
> 
> 标签：php, google-maps

我正在android上编写一个应用程序，应用程序将从手机获取信息gps并将它们发送到服务器。服务器将信息存储到数据库中。然后当用户访问网站上的信息时，它会占据这个位置并显示在googlemap上。现在，我拿了gps并将信息存储在数据库中。但这里的问题是我不知道如何在谷歌地图上显示它们。

```
<?php
$hostname_localhost ="mysql12.000webhost.com";
$database_localhost ="a4602996_longvan";
$username_localhost ="a4602996_lv";
$password_localhost ="longvan2012";
$localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
or
trigger_error(mysql_error(),E_USER_ERROR);

mysql_select_db($database_localhost, $localhost);
$sqlInsert= "select Kinhdo,Vido from gps where number = (SELECT  MAX(number) FROM    gps)";
$sql=mysql_query($sqlInsert);
if(mysql_num_rows($sql))
{
  echo "<pre />";
  while($row=mysql_fetch_assoc($sql))
  {
    $json[] = $row;
  }
  echo "</pre>";
}
print 'My longitude: '.$json[0]['Kinhdo']; 
print 'My latitude: '.$json[0]['Vido']; 
mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:50:57.617

即时通讯？

这是谷歌地图 API： [https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

这里有一个只有地图的基本示例： [https](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-language) ://google-developers.appspot.com/maps/documentation/javascript/examples/map-language （阅读源代码，用您的经度和纬度替换默认值）

这里有一个带有 picto（标记）的示例： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/icon-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-simple)

祝你好运！

# magento - 在 Magento 中更改购物车总数的顺序

> ID：14577006
> 
> 赞同：5
> 
> 时间：2013-01-29T06:35:15.533
> 
> 标签：magento, shopping-cart

我有一个要求，我必须更改 Magento 购物车中总计的顺序。我的要求是运费应在税前显示。目前它显示为小计-税-运费-总计，我需要小计-运费-税-总计。任何人都可以从我可以编辑的地方帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T06:55:36.577

您可以在 Magento 后端本身中配置它。转到**系统->配置->销售->结帐总排序顺序**。根据需要设置排序顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T12:35:48.493

无需更改任何代码。

只需从管理面板配置它：转到系统->配置->销售->结帐总排序顺序。根据需要设置排序顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-02T12:26:25.283

您可以在管理站点 **Admin -> Stores -> Settings -> Configuration -> Sales -> Sales -> Checkout Totals Sort Order中更改订单**

但不能更改**订单总额，不包括。税收**和 **订单总额包括。** 如果您不将其更改为**Order Total Incl ，请****征税。****税收**和 **订单总额不包括。税**请覆盖**Magento_Tax**模块**web/template/checkout/summary/grand-total.html** 与

```
<tr class="grand totals excl">
    <th class="mark" scope="row">
        <strong data-bind="i18n: exclTaxLabel"></strong>
    </th>
    <td data-bind="attr: {'data-th': exclTaxLabel}" class="amount">
        <strong><span class="price" data-bind="text: getGrandTotalExclTax()"></span></strong>
    </td>
</tr>
<tr class="grand totals incl">
    <th class="mark" scope="row">
        <strong data-bind="i18n: inclTaxLabel"></strong>
    </th>
    <td data-bind="attr: {'data-th': inclTaxLabel}" class="amount">
        <strong><span class="price" data-bind="text: getValue()"></span></strong>
    </td>
</tr> 
```

# python - 灰度图像到 NumPy 数组的傅里叶变换

> ID：14577007
> 
> 赞同：7
> 
> 时间：2013-01-29T06:35:16.463
> 
> 标签：python, image-processing, numpy, python-imaging-library, fft

目前我正在使用 PIL 和 NumPy。我有一张彩色`png`图像，我想：

1.  以灰度读入
2.  转换为 NumPy 数组
3.  对阵列执行 FFT
4.  显示图像

这就是我正在尝试的（在带有`--pylab`标志的 IPython 中）：

```
In [1]: import Image

In [2]: img = Image.open('ping.png').convert('LA')

In [3]: img_as_np = np.asarray(img)

In [4]: img_as_np
Out[4]: array(<Image.Image image mode=LA size=1000x1000 at 0x105802950>, dtype=object)

In [5]: img_fft = fft.fft2(img_as_np) // IndexError: index out of range for array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T06:45:17.370

看起来您使用的是 1.1.6 之前的 PIL 版本，[他们在其中引入了这些方法，以便 numpy 知道如何处理`Image`](http://effbot.org/zone/pil-changes-116.htm). 所以你只是得到`img_as_np`一个包含一个`Image`对象的单元素数组（这是`Out[4]`向你展示的）。

相反，您需要执行类似的操作`np.asarray(img.getdata())`，这将为您提供一个`num_pixels x num_channels`介于 0 和 255 之间的整数数组（至少对于我尝试过的 png）。你可能想做

```
img_as_np = np.asarray(img.getdata()).reshape(img.size[1], img.size[0], -1) 
```

像图像一样布局（转置）。您可能还希望除以 255 以获得 0 和 1 之间的浮点值，如果这是您期望的格式（例如 matplotlib's 也是如此`imshow`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T06:58:49.513

您想使用模式 'L' 而不是 'LA' 作为 convert() 方法的参数。'LA' 留下一个 alpha 通道，然后 numpy.asarray 无法按预期工作。如果您需要 alpha 通道，那么您将需要一种不同的方法来转换为 numpy 数组。否则，使用模式“L”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:05:47.747

将[其](http://optipng.sourceforge.net/pngtech/img/lena.png)用于图像：

```
>>> from PIL import Image
>>> import numpy as np
>>> import matplotlib.pyplot as plt
>>> Image.__version__
'1.1.7'
>>> img = Image.open('lena.png').convert('L')
>>> data = np.asarray(img.getdata()).reshape(img.size)
>>> fft = np.fft.fft2(data)
>>> fft[0, 0] = 0 # remove DC component for visualization
>>> plt.imshow(np.abs(np.fft.fftshift(fft)), interpolation='nearest')
<matplotlib.image.AxesImage object at 0x046012F0>
>>> plt.show()
>>> plt.imshow(np.abs(np.fft.fftshift(fft))[224:288, 224:288], interpolation='nearest')
<matplotlib.image.AxesImage object at 0x0476ED70>
>>> plt.show() 
```

![在此处输入图像描述](../Images/8138c9dd438bde9f0488993a20b4f067.png)

# android - 操作栏选项卡和应用程序标题在同一行

> ID：14577008
> 
> 赞同：2
> 
> 时间：2013-01-29T06:35:21.523
> 
> 标签：android, android-actionbar, android-tabs

我创建了一个包含操作栏和两个选项卡的应用程序。应用程序的选项卡和标题与屏幕截图中的相同。我希望标签位于标题下方的行中并且具有相同的权重。请查看下面的代码并帮助我。谢谢。

```
package com.example.myproj;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.ActionBar;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.app.ActionBar.Tab;
import android.content.Context;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity1 extends Activity {
    public static Context appContext;
    static ArrayList<String> myarray = new ArrayList();
    static ArrayList<String> myarray1;
    static ArrayList<String> myarray2 = new ArrayList();
    static ArrayList<String> myarray21;
    static int check1 = 0;
    static int check2 = 0;
    static int stcount = 0;
    static int csicount = 0;
    static ActionBar.Tab PlayerTab;
    static ActionBar.Tab StationsTab;

    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        appContext = getApplicationContext();

        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        PlayerTab = actionbar.newTab().setText("ST");
        StationsTab = actionbar.newTab().setText("CSI");
        // settab1("Testing");
        Fragment PlayerFragment = new AFragment();
        Fragment StationsFragment = new BFragment();

        PlayerTab.setTabListener(new MyTabsListener(PlayerFragment));
        StationsTab.setTabListener(new MyTabsListener(StationsFragment));

        actionbar.addTab(PlayerTab);
        actionbar.addTab(StationsTab);

    }

    public static void settab1(String text) {
        PlayerTab.setText(text);
    }

    public static void settab2(String text) {
        StationsTab.setText(text);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(MainActivity1.appContext, "Reselected!",
                Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

![在此处输入图像描述](../Images/4af132e44e5ef31a83467b22b402baae.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:18:35.293

我很幸运使用了以下反射“hack”：

```
private void forceStackedTabs() {
    ActionBar ab = getSupportActionBar();
    if ( ab instanceof ActionBarImpl ) {
        // Pre-ICS
        disableEmbeddedTabs( ab );
    } else if ( ab instanceof ActionBarWrapper ) {
        // ICS
        try {
            Field abField = ab.getClass().getDeclaredField( "mActionBar" );
            abField.setAccessible( true );
            disableEmbeddedTabs( abField.get( ab ) );
        } catch (NoSuchFieldException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        } catch (IllegalArgumentException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        } catch (IllegalAccessException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        }
    }
}
private void disableEmbeddedTabs(Object ab) {
    try {
        Method setHasEmbeddedTabsMethod = ab.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(ab, false);
    } catch (Exception e) {
        Log.e( TAG, "Error disabling actionbar embedded", e );
    }
} 
```

请注意，我自己没有想到这一点，只是简单地重写了这个答案中给出的代码：[replicate ActionBar Tab(s) with custom view](https://stackoverflow.com/a/12906792 "使用自定义视图复制 ActionBar Tab(s)")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:44:33.080

这是本机操作栏的行为。

单独的操作栏决定是否将标签放在第二行，我们无法影响它。（通常在平板电脑中的标签是内联的，在手机中是下面）

如果您想确保您的选项卡始终是选项卡，并且始终位于操作栏下方，请从操作栏中删除选项卡并切换到使用 ViewPager 作为您的内容，使用 PagerTabStrip（来自 Android 支持包，ViewPager 来自from) 或来自 ViewPagerIndicator 项目的选项卡指示器，用于选项卡本身。作为一个附带的好处，您的内容现在可以水平滑动以在选项卡之间移动，这是一种流行的方法。

只是一个注释。这不是正确的模式。 [http://developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T14:19:52.860

这是一个可能对您有所帮助的演示！我在操作栏中使用了一个自定义视图，其中包含一个 TabHost，它可以像上图一样运行良好，但我没有在不同的屏幕尺寸下测试它。

[https://github.com/shellshy/actionbar](https://github.com/shellshy/actionbar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T16:48:20.763

在 ActionBarImpl.java 的`setHasEmbeddedTabs(boolean hasEmbeddedTabs)`方法中，更改值：

```
mHasEmbeddedTabs = hasEmbeddedTabs; 
```

到：

```
mHasEmbeddedTabs = false; 
```

# bash - 使用`command`与（$（command））在bash中获取输出到数组的差异b / w

> ID：14577012
> 
> 赞同：1
> 
> 时间：2013-01-29T06:35:51.500
> 
> 标签：bash, unix

这两个命令和输出变量有什么区别：

```
output=($(command)) 
```

和

```
output=`command` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T06:48:19.020

在第一种情况下，结果变量是一个数组，元素的数量取决于命令的输出。在第二种情况下，它是一个包含完整结果值的标量。这种差异仅是由于第一种情况下的额外外括号。

例如，尝试使用`ls`命令来查看差异。

此外，该`$(command)`表格已取代`'command'`命令替换表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:45:26.090

唯一的区别是`$()`调用可以嵌套，AFAIR（好吧，反引号也可以嵌套，但是您必须转义所有嵌套的反引号，因此`$()`提供更好的语法）。

# jquery-select2 - Select2 下拉列表但允许用户输入新值？

> ID：14577014
> 
> 赞同：132
> 
> 时间：2013-01-29T06:35:53.647
> 
> 标签：jquery-select2

我想要一个包含一组值的下拉列表，但也允许用户“选择”一个未在此处列出的新值。

如果您在模式下使用它，我看到[select2](http://ivaynberg.github.com/select2/#documentation%20select2)`tags`支持这一点，但是有没有办法在不使用标签的情况下做到这一点？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2015-05-04T00:40:39.083

[@fmpwizard](https://stackoverflow.com/users/309896/fmpwizard)提供的[出色答案](https://stackoverflow.com/a/14945143/359284)适用于 Select2 3.5.2 及以下版本，**但不适用于 4.0.0**。

 **从很早开始（但可能不早于这个问题），Select2 就支持“标记”：如果您允许，用户可以在其中添加自己的价值。这可以通过`tags`选项启用，您可以[在文档中使用示例](https://select2.github.io/examples.html#tags)。

```
$("select").select2({
  tags: true
}); 
```

默认情况下，这将创建一个与他们输入的搜索词具有相同文本的选项。如果您希望以特殊方式对其进行标记，则可以修改使用的对象，或者在选择对象后远程创建该对象。

```
$("select").select2({
  tags: true,
  createTag: function (params) {
    return {
      id: params.term,
      text: params.term,
      newOption: true
    }
  }
}); 
```

除了作为通过`select2:select`事件传入的对象上易于发现的标志之外，额外的属性还允许您在结果中呈现稍有不同的选项。*因此，如果您想通过在其旁边放置“ （新）* ”来直观地表明它是一个新选项，您可以执行类似的操作。

```
$("select").select2({
  tags: true,
  createTag: function (params) {
    return {
      id: params.term,
      text: params.term,
      newOption: true
    }
  },
  templateResult: function (data) {
    var $result = $("<span></span>");

    $result.text(data.text);

    if (data.newOption) {
      $result.append(" <em>(new)</em>");
    }

    return $result;
  }
}); 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2013-02-18T20:57:33.440

**对于版本 4+，请查看[Kevin Brown](https://stackoverflow.com/users/359284/kevin-brown)下面的[答案](https://stackoverflow.com/questions/14577014/select2-dropdown-but-allow-new-values-by-user/30021059#30021059)**

在 Select2 3.5.2 及以下版本中，您可以使用以下内容：

```
$(selector).select2({
  minimumInputLength:1,
  "ajax": {
    data:function (term, page) {
      return { term:term, page:page };
    },
    dataType:"json",
    quietMillis:100,
    results: function (data, page) {
      return {results: data.results};
    },
    "url": url
  },
  id: function(object) {
    return object.text;
  },
  //Allow manually entered text in drop down.
  createSearchChoice:function(term, data) {
    if ( $(data).filter( function() {
      return this.text.localeCompare(term)===0;
    }).length===0) {
      return {id:term, text:term};
    }
  },
}); 
```

（取自 select2 邮件列表上的答案，但现在找不到链接）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-14T14:40:28.297

只是为了让代码保持活力，我从[他的评论中发布](https://stackoverflow.com/questions/14577014/select2-dropdown-but-allow-new-values-by-user#comment33146144_14945143)[了@rrauenza Fiddle 的代码](http://jsfiddle.net/pHSdP/2/)。

**HTML**

```
<input type='hidden' id='tags' style='width:300px'/> 
```

**jQuery**

```
$("#tags").select2({
    createSearchChoice:function(term, data) { 
        if ($(data).filter(function() { 
            return this.text.localeCompare(term)===0; 
        }).length===0) 
        {return {id:term, text:term};} 
    },
    multiple: false,
    data: [{id: 0, text: 'story'},{id: 1, text: 'bug'},{id: 2, text: 'task'}]
}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-27T05:50:22.903

由于其中许多答案在 4.0+ 中不起作用，因此如果您使用 ajax，您可以让服务器添加新值作为选项。所以它会像这样工作：

1.  用户搜索值（向服务器发出 ajax 请求）
2.  如果发现值很好，则返回该选项。如果不只是让服务器像这样附加该选项：`[{"text":" my NEW option)","id":"0"}]`
3.  提交表单后，只需检查该选项是否在数据库中，如果没有，则在保存之前创建它。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-05-10T09:38:45.767

我认为现在有一个更好的解决方案

只需在选择选项上将标记设置为 true 吗？

```
tags: true 
```

来自[https://select2.org/tagging](https://select2.org/tagging)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-10T12:36:24.460

@fmpwizard 答案的改进：

```
//Allow manually entered text in drop down.
createSearchChoice:function(term, data) {
  if ( $(data).filter( function() {
    return term.localeCompare(this.text)===0; //even if the this.text is undefined it works
  }).length===0) {
    return {id:term, text:term};
  }
},

//solution to this error: Uncaught TypeError: Cannot read property 'localeCompare' of undefined 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-26T08:29:31.033

感谢大家的帮助，我在 Codeigniter II 中使用了以下代码，使用的是 select2 的 3.5.2 版本。

```
var results = [];
var location_url = <?php echo json_encode(site_url('job/location')); ?>;
$('.location_select').select2({
    ajax: {
        url: location_url,
        dataType: 'json',
        quietMillis: 100,
        data: function (term) {
            return {
                term: term
            };
        },
        results: function (data) {
            results = [];
            $.each(data, function(index, item){
                results.push({
                    id: item.location_id,
                    text: item.location_name
                });
            });
            return {
                results: results
            };
        }
    },
    //Allow manually entered text in drop down.
    createSearchChoice:function(term, results) {
        if ($(results).filter( function() {
            return term.localeCompare(this.text)===0; 
        }).length===0) {
            return {id:term, text:term + ' [New]'};
        }
    },
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-20T17:01:23.763

我刚刚从凯文布朗那里偶然发现了这个。 [https://stackoverflow.com/a/30019966/112680](https://stackoverflow.com/a/30019966/112680)

您所要做的`v4.0.6`就是使用`tags: true`参数。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-10T09:53:34.270

```
var text = 'New York Mills';
var term = 'new york mills';
return text.localeCompare(term)===0; 
```

在大多数情况下，我们需要将值与不敏感的寄存器进行比较。而且这段代码会返回false，这会导致在数据库中创建重复记录。此外，浏览器 Safary 不支持 String.prototype.localeCompare ()，此代码在此浏览器中不起作用；

```
return this.text.localeCompare(term)===0; 
```

将更好地替换为

```
return this.text.toLowerCase() === term.toLowerCase(); 
```**

# java - 正则表达式来获取键值，包括空格

> ID：14577016
> 
> 赞同：-1
> 
> 时间：2013-01-29T06:36:01.087
> 
> 标签：java, php, regex, perl, expression

我有一个问题是从我的正则表达式中获取空间。谁能帮助我使用键值机制提供正确的正则表达式。请注意，键值位置可能会改变而不是固定的。

正则表达式

```
\s*([\w\d_]*)=(.*?)\s+ 
```

输入

```
spt=38271 deviceExternalId=SUKUK node 1 dst=99.111.185.141 app=HTTPS rt=Jan 23 2013 15:30:45 deviceFacility=Packet filter msg=Connection was reset by server destinationTranslatedPort=443 
```

## 我的结果

```
Match 1: spt=38271 
    Subgroups:
    1: spt
    2: 38271
Match 2: deviceExternalId=SUKUK 
    Subgroups:
    1: deviceExternalId
    2: SUKUK
Match 3:  dst=99.111.185.141 
    Subgroups:
    1: dst
    2: 99.111.185.141
Match 4: app=HTTPS 
    Subgroups:
    1: app
    2: HTTPS
Match 5: rt=Jan 
    Subgroups:
    1: rt
    2: Jan          **==>Should grab [Jan 23 2013 15:30:45]**
Match 6:  deviceFacility=Packet 
    Subgroups:
    1: deviceFacility
    2: Packet       **==>Should grab [Packet filter]**
Match 7:  msg=Connection 
    Subgroups:
    1: msg
    2: Connection   **==>Should grab [Connection was reset by server]**
Match 8:  destinationTranslatedPort=443 
    Subgroups:
    1: destinationTranslatedPort
    2: 443 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:40:39.493

试试这个：

```
([\w\d_]+)=(.*?)(?=\s+[\w\d_]+=|$)

print "$1\n$2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:55:08.373

更简单：`\s*([\w\d_]*)=([^=]+)\s+`

# c# - C# 代表的好处

> ID：14577018
> 
> 赞同：1
> 
> 时间：2013-01-29T06:36:04.270
> 
> 标签：c#, delegates

> **可能的重复：**
> [有人可以提炼出适当的英语代表是什么吗？](https://stackoverflow.com/questions/2541683/can-someone-distill-into-proper-english-what-a-delegate-is)

我一直在尝试找出使用代表的好处，但是我仍然没有在互联网上找到任何可以正确解释它的东西。

为什么下面的代码（使用委托）比下面的代码更好？

```
delegate int DiscountDelegate();

class Program
{
  static void Main(string[] args)
  {
    Calculator calc = new Calculator();
    DiscountDelegate discount = null;
    if (DateTime.Now.Hour < 12)
    {
      discount = new DiscountDelegate(calc.Morning);
    }
    else if (DateTime.Now.Hour < 20)
    {
      discount = new DiscountDelegate(calc.Afternoon);
    }
    else
    {
      discount = new DiscountDelegate(calc.Night);
    }
    new ShoppingCart().Process(discount);
  }
}

class Calculator
{
  public int Morning()
  {
    return 5;
  }
  public int Afternoon()
  {
    return 10;
  }
  public int Night()
  {
    return 15;
  }
}

class ShoppingCart
{
  public void Process(DiscountDelegate discount)
  {
    int magicDiscount = discount();
    // ...
  }
} 
```

相比：

```
class Program
{
  static void Main(string[] args)
  {
    Calculator calc = new Calculator();
    int discount;
    if (DateTime.Now.Hour < 12)
    {
      discount = calc.Morning();
    }
    else if (DateTime.Now.Hour < 20)
    {
      discount = calc.Afternoon();
    }
    else
    {
      discount = calc.Night();
    }
    new ShoppingCart().Process(discount);
  }
}

class Calculator
{
  public int Morning()
  {
    return 5;
  }
  public int Afternoon()
  {
    return 10;
  }
  public int Night()
  {
    return 15;
  }
}

class ShoppingCart
{
  public void Process(int discount)
  {
    int magicDiscount = discount;
    // ...
  }
} 
```

# javascript - 如何根据选择的下拉选项显示文档

> ID：14577020
> 
> 赞同：-2
> 
> 时间：2013-01-29T06:36:33.427
> 
> 标签：javascript, jquery, html

我想根据客户从我提供给他们的下拉菜单中的选择向他们提供示例 PDF。

我创建了一个[jsfiddle](http://jsfiddle.net/9hqKN/1/)来尝试向您展示我想要实现的目标。

我的 HTML：

```
<p>Please select from the options below to view a sample Investment Cost Analysis:</p>
<p>&nbsp;</p>
<p>
  <label for="type">* Combined Income:</label>
  <select name="income" id="income">
    <option selected="selected">- Please Select -</option>
    <option value="$30,000 - $80,000">$30,000 - $80,000</option>
    <option value="$80,000 - $180,000">$80,000 - $180,000</option>
    <option value="$180,000+">$180,000+</option>
  </select>
</p>
<p>
<label for="type">* Property Type:</label>
<select name="type" id="type">
  <option selected="selected">- Please Select -</option>
  <option value="house">House</option>
  <option value="unit">Apartment / Unit</option>
</select>
</p>
<p>
<label for="price">* Property Price:</label>
<select name="price" id="price">
  <option selected="selected">- Please Select -</option>
  <option value="$350,000">$350,000</option>
  <option value="$400,000">$400,000</option>
  <option value="$450,000">$450,000</option>
  <option value="$500,000">$500,000</option>
</select>
</p>
<p>
  <input type="submit" name="show" id="show" value="Show Sample" />
</p> 
```

如何使它根据选择的选项显示正确的文件？我还想确保在 Show Sample 按钮起作用之前选择了**所有 3 个选项。**

我知道这需要一些 JavaScript，但这就是我卡住的地方。我不知道从哪里开始使用 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:45:00.967

更改下拉功能时更改链接的href

```
$("#mydropdown").change(function(e) {

var dropdown value = $("#mydropdown").value();

//switch condition 
if(){
$("mylink").attr("href", "your file path"); 
//TODO 
}else if (){

}

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:56:38.560

试试这个：http: [//jsfiddle.net/9hqKN/2/](http://jsfiddle.net/9hqKN/2/)

```
$('#show').hide();

$('select').change(function () {
  var income = $('#income').val();
  var type = $('#type').val();
  var price = $('#price').val();

  if (income == 0 || type == 0 || price == 0) {
    $('#show').hide();
  } else {
    $('#show').show();
  }
}); 
```

有一个编辑我在每个中都赋予`0`了价值`all first option``<select>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:45:57.993

这是一个非常简单的例子。

**更新：** 显然，如果用户的浏览器没有 PDF 查看器，这将强制打开下载窗口。

**HTML**：

```
<select id="pdfs">
    <option value="http://example.com/docs1.pdf">PDF 1</option>
    <option value="http://example.com/docs2.pdf">PDF 2</option>
    <option value="http://example.com/docs3.pdf">PDF 3</option>
</select> 
```

**JS**：

```
var selectElem = document.getElementById('pdfs');

selectElem.onchange = function() {
  window.location = selectElem[selectElem.selectedIndex].value;
}; 
```

# android - 如何解决在 android 的 datepicker 对话框中遇到的这个问题？

> ID：14577022
> 
> 赞同：1
> 
> 时间：2013-01-29T06:36:37.407
> 
> 标签：android, date, datepicker, date-difference

> **可能重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

请帮帮我。我发现两个日期之间的差异，如果开始日期和结束日期在同一个月内，一切都很好。但如果我选择今天的日期作为开始日期，选择 2 月 1 日作为结束日期。它显示差异为 1（一）。

我只是在询问作为 android 新手的我自己的代码出了什么问题。所以我不明白为什么这个问题被关闭了。

```
public void showStartDate(View v) {
        DialogFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "startDate");

    }

    public void showEndDate(View v){
        DialogFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "endDate");
    }
    public class DatePickerFragment extends DialogFragment
    implements DatePickerDialog.OnDateSetListener /*,OnDateChangedListener*/{

        @Override 
   public Dialog onCreateDialog(Bundle savedInstanceState) {
  // Use the current date as the default date in the picker
     final Calendar c = Calendar.getInstance();
     int year = c.get(Calendar.YEAR);
     int month = c.get(Calendar.MONTH);
     int day = c.get(Calendar.DAY_OF_MONTH);

     //Toast.makeText(getApplicationContext(),""+ day+"-"+month+1+"-"+year,5).show(); 
    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
   }

    public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
        int mon=month+1;
        Date strtdate,enddate;
        DatePickerDialog d = new DatePickerDialog(getActivity(), this, year, mon, day);

        if(getTag() == "startDate")
        {
            String dd_s = null,mm_s = null;
            Date old_d;
            start_date_dp_btn = (Button)findViewById(R.id.btn_dp_strt_date);
            if(day<10)
            {
                dd_s = "0"+day;
            }
            else
            {
                dd_s = day+"";
            }
            if(mon<10)
            {
                mm_s = "0"+mon;
            }
            else
            {
                mm_s = mon+"";
            }
            start_date_dp_btn.setText(dd_s+"-"+mm_s+"-"+year);
            Toast.makeText(getApplicationContext(),""+ day+"-"+mon+"-"+year,5).show();

            c1 = Calendar.getInstance();

            c1.set(year, mon, day, hr1, min1);
            ms1 = c1.getTimeInMillis(); 

            long date2 = ms1/(1000*60*60*24);
            Log.i("Start date", ""+date2);

        }
        if(getTag() == "endDate")
        {
            String dd_e = null,mm_e = null;
            end_date_dp_btn = (Button)findViewById(R.id.btn_dp_end_date);
            if(day<10)
            {
                dd_e = "0"+day;
            }
            else
            {
                dd_e = day+"";
            }
            if(mon<10)
            {
                mm_e = "0"+mon;
            }
            else
            {
                mm_e = mon+"";
            }
            end_date_dp_btn.setText(dd_e+"-"+mm_e+"-"+year);

            c2 = Calendar.getInstance();
            c2.set(year, mon, day, hr2, min2);
            ms2 = c2.getTimeInMillis();

            long date2 = ms2/(1000*60*60*24);
            Log.i("End date", ""+date2);
            long date1 = ms1/(1000*60*60*24);
            diff = (ms2-ms1)/(1000*60*60*24);

            long difference = date2 - date1;//(strtdate.getTime() - enddate.getTime())/1000*60*60*24;
            Log.i("difference", ""+difference);
            if(difference>0)//(ms2/1000*60*60)>(ms1/1000*60*60))//diff>0)
            {  
               long num = difference+1;//((ms2/1000*60*60)-(ms1/1000*60*60))+1;//((ms2-ms1)/1000*60*60*24)+1;
               event_days_ed = (EditText)findViewById(R.id.ed_days_event);
               event_days_ed.setText((num)+"");
               save_btn.setEnabled(true);
            }
            else if(difference==0)
            {
                event_days_ed = (EditText)findViewById(R.id.ed_days_event);
                event_days_ed.setText((difference+1)+"");
                save_btn.setEnabled(true);
            }
            else if(difference<0 )//||(ms2<ms1))//difference<0)
            {   
                event_days_ed = (EditText)findViewById(R.id.ed_days_event);
                event_days_ed.setText("Check your end date");
                save_btn.setEnabled(false);
            }

        }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:12:07.130

看到[这个](https://stackoverflow.com/a/3491723/1450401)&[这个](https://stackoverflow.com/a/3797137/1450401)

还有一个图书馆[**Joda**](http://joda-time.sourceforge.net/)来处理日期和时间。有关详细信息，请参阅[此](https://stackoverflow.com/a/1555307/1450401)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:49:23.543

试试这个，

```
 private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int myear, int monthOfYear,
            int dayOfMonth) {
        try {
            selectedDate = new SimpleDateFormat("yyyy/MM/dd").parse(myear
                    + "/" + monthOfYear + "/" + dayOfMonth);
            String.valueOf(year + monthOfYear + dayOfMonth);
            calender();
            currDate = new Date();

            month = monthOfYear;
            day = dayOfMonth;
            year = myear;
            currentdate = currDate.getDay();
            currentmonth = currDate.getMonth();
            currentyear = currDate.getYear();
            String.valueOf(currentyear + currentmonth + currentdate);

            selectedDate.after(currDate);
            selectedDate.before(currDate);

            if ((month >= mMonth && day >= mDay && year >= mYear)
                    || (month == mMonth && day == mDay && year == mYear)) {
                if ((day > mDay) || (day == mDay)) {
                    a = selectedDate.toString();

                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();

                } else if (day < mDay) {

                    Toast.makeText(getApplicationContext(),
                            "Kindly enter valid date", Toast.LENGTH_SHORT)
                            .show();
                    mDateDisplay.setText(currDate.getDate());

                }
            } else if (year < mYear) {
                if (month > mMonth && month == mMonth && month < mMonth) {
                    Toast.makeText(getApplicationContext(),
                            "Kindly enter valid date", Toast.LENGTH_SHORT)
                            .show();
                    mDateDisplay.setText(currDate.getDate());
                }

            } else if (month < mMonth) {
                if (day <= mDay || day >= mDay) {
                    Toast.makeText(getApplicationContext(),
                            "Kindly enter valid date", 100).show();
                    mDateDisplay.setText(currDate.getDate());
                }
            } else if (month > mMonth) {
                if (day <= mDay || day >= mDay) {
                    a = selectedDate.toString();

                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();

                    calender();
                }
            }

            else if (month <= mMonth && day <= mDay && year <= mYear) {
                if (month <= mMonth)
                    Toast.makeText(getApplicationContext(),
                            "Kindly enter valid date", 100).show();
                mDateDisplay.setText(currDate.getDate());

            }

        } catch (Exception e) {
            e.getMessage();

        }
    }
};

protected void calender() {
    // TODO Auto-generated method stub
    c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);
    mhour = c.get(Calendar.HOUR);
    mmin = c.get(Calendar.MINUTE);

} 
```

# iphone - 如何捕获waxsim stdout&stderr

> ID：14577028
> 
> 赞同：0
> 
> 时间：2013-01-29T06:36:56.377
> 
> 标签：iphone, macos, bash, ios-simulator, pipe

这是关于 MacOS 问题的 iPhone 开发，我正在使用“waxsim”在模拟器上启动我的 iphone 应用程序。像这样：

```
/usr/local/bin/waxsim /Users/me/Desktop/app/build/Release-iphonesimulator/app.app 
```

在我的应用程序中，我使用了 printf()，并且我看到了控制台中打印的 printf 消息。

但我无法将它们放入文件或使用 grep 过滤！我尝试了所有通常有效的方法：

```
cmd | grep "x" 
```

打印所有消息，但不通过 grep

```
cmd > myfile 
```

所有消息仍然进入控制台，文件没有

```
cmd &> myfile 
```

此命令不会向控制台打印任何内容！但 myfile 仅包含以下内容：

```
Launching '/Users/me/Desktop/app/build/Release-iphonesimulator/app.app' on'Simulator - iOS 6.0' 
```

但不是用 printf 打印的实际消息

```
cmd 2>&1 > myfile 
```

有了这个，一切都进入控制台，文件没有。

我认为waxsim对管道有一些技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:10:40.753

`cmd &> myfile`应该工作（或等效地，`cmd > myfile 2>&1`顺序很重要）。

不过，问题可能是您的消息被缓冲了。当 stdout 不是终端时，这是标准行为。如果您在查看文件之前完全关闭模拟器，那里有消息吗？

如果是这样，请尝试`script -q /dev/null yourcommand`（不确定 . 的 OS X 语法`script`。在 Linux 上会是`script -c "your command" /dev/null`）。

# windows - 无法在具有 Windows Server 2008 R2 作为操作系统的 64 核机器上注册可执行文件

> ID：14577032
> 
> 赞同：0
> 
> 时间：2013-01-29T06:37:25.040
> 
> 标签：windows, windows-server-2008

我们的设置中有 32 位 Dlls/Exe 和 64 位 Dll's/Exe 的组合。当我们尝试在具有 Windows Server 2008 R2 作为操作系统的 64 核机器上注册这些 Dll/EXE 时......我们不成功。当同一台机器重新配置为使用4核时，注册成功。可能是什么原因 ？

# file - 重命名文件和文件夹递归删除下划线后的所有内容

> ID：14577033
> 
> 赞同：0
> 
> 时间：2013-01-29T06:37:27.097
> 
> 标签：file, rename

我试图构建一个脚本来自动重命名文件并且失败了，所以如果有人可以帮助......

在同一个文件夹中，我的文件名如下：

```
exemple_012345-0abc1def.txt
exemple_012345-0abc1def.config.txt 
```

我想删除第一个下划线（包括）和第一个点之间的所有内容，以便我得到如下文件名：

```
exemple.txt
exemple.config.txt 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T08:19:34.677

这可以在 python 中轻松完成。我不确定这是否可以与 windows 中的 python 完美配合。

```
import os
for root, dirs, files in os.walk('.'):
    for fname in files:
        x = fname.index('_')
        y = fname.index('.')
        substr = fname[:x] + fname[y:]
        os.rename(fname, substr) 
```

# java - 合并 JSP 代码和 Maven 代码

> ID：14577043
> 
> 赞同：0
> 
> 时间：2013-01-29T06:38:30.023
> 
> 标签：java, jsp, jira

我有一个 Apache Maven 项目`JIRA REST API`。现在我正在创建一个`JSP`项目以将一些数据发送到我的 Maven 项目中的 java 文件。我想知道如何将它们合并到单个项目中。Maven 项目有一个`pom.xml`文件，Maven 的 java 文件位于其中，`src/main/java`而 JSP 位于不同的文件夹中。( `Java Resources/src`)

谁能告诉我应该复制和合并哪个文件夹？

编辑：找到答案。右键单击 Maven 项目并转到`Project Facets`并检查`Dynamic Web Module`选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:49:43.413

您可以使用以下原型创建 Maven Webapp

```
-DarchetypeArtifactId=maven-archetype-webapp 
```

这将自动创建所需的文件夹结构

在你的情况下，它除了`src\main\java`

```
src\main\resources
src\main\webapp
src\main\webapp\WEB-INF --THIS IS WHERE JSP's will go 
```

[标准 Maven 目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

[Maven 网络应用程序](http://www.tutorialspoint.com/maven/maven_web_application.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:06:28.737

找到了答案。右键单击 Maven 项目并转到 Project Facets 并选中 Dynamic Web Module 选项。

# javascript - 使用 javascript 验证控件

> ID：14577049
> 
> 赞同：-1
> 
> 时间：2013-01-29T06:39:03.287
> 
> 标签：javascript, asp.net

我有 asp.net Web 应用程序，其中控件在网页上动态加载。假设我在我的 aspx 页面中有一个组合框，并且在我正在回发的 ComboBox 的值更改事件中。ComboBox 有与之关联的验证器。网页中还有其他带有验证器的控件。

我想在回发之前验证组合框控件。我正在使用以下 javascript 来执行此操作

```
 function(s, e)
{ 
    if (typeof (Page_ClientValidate) == 'function') 
    { 
        Page_ClientValidate(); 
        if (!Page_IsValid) { return; } 
        Callback.PerformCallback();LoadingPanel.SetText(settingCtlPropText); LoadingPanel.Show(); 
    }
    else
    {
        Callback.PerformCallback();LoadingPanel.SetText(settingCtlPropText); LoadingPanel.Show(); 
    }
} 
```

但是这个 java 脚本正在验证组合框以及页面中的其他控件。在我进行回发之前，当在 comboBox 中更改任何值时，我只想验证 comboBox 而不是其他控件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:02:45.220

你可以使用类似下面的东西

功能检查状态（发件人，参数）{

```
 var questionID = '<%= this.ddlStatus.ClientID %>';
        var currentQuestion = $("#" + questionID).val();
        if (currentQuestion == 0) {

            args.IsValid = false;
            return;

        }
        else {

            args.IsValid = true;
            return;
        }
    } 
```

# java - Injecting CSS dynamically in Vaadin

> ID：14577050
> 
> 赞同：3
> 
> 时间：2013-01-29T06:39:07.320
> 
> 标签：java, vaadin

I am developing an application in Java Vaadin framework in which I am using its Calendar Add-on. That calendar has some component called "Basic Event" on it. Now I want to color that component on run time by creating a CSS class dynamically on run time. How can I achieve that functionality? Any Help! Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:09:54.500

I have tried and succeeded with the following code.

```
 package com.example.cssinject;

   import org.vaadin.cssinject.CSSInject;

   import com.vaadin.Application;
   import com.vaadin.ui.*;

    public class CssinjectApplication extends Application {
    @Override
    public void init() {

    final Window mainWindow = new Window("Cssinject Application");
    final Label label = new Label("Hello Vaadin user");
    mainWindow.addComponent(label);

    CSSInject css = new CSSInject();
    css.setValue(".custom-style { color: rgb(100, 200, 0); }");
    mainWindow.addComponent(css);

    label.setStyleName("custom-style");

    setMainWindow(mainWindow);  
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-12T23:49:36.067

I have used an addon which was mentioned by Sumit Singh, and the current "native"-way is [https://vaadin.com/wiki/-/wiki/Main/Dynamically%20injecting%20CSS](https://vaadin.com/wiki/-/wiki/Main/Dynamically%20injecting%20CSS)

in brief:

```
 Styles styles = Page.getCurrent().getStyles();
          // inject the new background color
          styles.add(".v-app .v-textarea.text-label { background-color:white; }"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:44:06.340

Not much idea about this topic, But you can take a look of following.

1.  [CSSInject add-on](https://vaadin.com/forum/-/message_boards/view_message/1376327)

# javascript - 子元素位置相对工作错误

> ID：14577053
> 
> 赞同：1
> 
> 时间：2013-01-29T06:39:22.007
> 
> 标签：javascript, html, css, position

我有一个 CSS 宽度和高度为 800x600 的 div 元素。我正在使用 javascript 在 div 中生成三个对象元素，它们应该在对角线上，相互接触。我正在使用 position:relative 以及 left 和 top css 属性来定位对象元素。但是，当我这样做时，正方形之间存在不应存在的水平间隙。当我使用 positon:fixed 时，它们按照我想要的方式排列，但不在 div 元素内。

我的 div 元素的 HTML

```
<div id="Stage" style="background:black;width:800px;height:600px;margin-left:auto;margin-right:auto;overflow:hidden;"> 
```

和我的 javascript

```
w="w";
level_data =
[
[w,0,0],
[0,w,0],
[0,0,w],
];

function generate(level_data){
    for(row=0;row<level_data.length;row++){
        for(col=0;col<level_data[row].length;col++){
            posx = col*50; posy=row*50;
            if(level_data[row][col]=="w"){
                entity = document.createElement('object');
                entity.style.position = "relative";
                entity.style.left = String(posx)+"px"; entity.style.top = String(posy)+"px";
                entity.data = "Objects/Sprites/Wall.jpg";
                document.getElementById("Stage").appendChild(entity);

            }
        }
    }
}
generate(level_data); 
```

这就是我得到的：[Link1](http://www.newgrounds.com/dump/draw/67b485d58d6513626af9a41bc53535bb)

这就是我想要的：[Link2](http://www.newgrounds.com/dump/draw/4a6a4ccd565d188f838b3dc46597c0b6)但大黑色方块内的红色方块代替。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:01:05.577

`position: fixed`相对于视口定位元素。`position: relative`给出这个结果是因为`object`element 可能有一些默认值`widht`和`height`。你需要这样的东西：

```
entity.style.position = "absolute";
entity.style.left = String(posx)+"px";
entity.style.top = String(posy)+"px";
entity.style.width = "50px";
entity.style.height = "50px"; 
```

使用 时`position: absolute`，即使没有`entity`. 请注意，使用`position: relative`时不应将位置值与 相乘`col`，它们应为`50px`.

# macos - 用于在 Mac 上处理的工作采集卡

> ID：14577057
> 
> 赞同：0
> 
> 时间：2013-01-29T06:39:47.410
> 
> 标签：macos, processing, video-capture

我最近为我的 Mac 买了一张 USB 采集卡（EzCap：[http](https://rads.stackoverflow.com/amzn/click/com/B0044XIQIW) ://www.amazon.com/Easycap-Version-Capturer-Camcorder-Compatible/dp/B0044XIQIW ），我发现它并没有那么震惊不适用于处理。（我已经尝试过 Capture 库和 GSVideo）。

我的应用程序需要从外部源（即不仅仅是内置的 iSight 摄像头 - 这非常简单）获取视频进行处理。

我想知道是否有人有有效的视频捕获实现？可以让我知道哪些捕获设备对他们有用吗？

在我开始浪费大量时间和金钱购买更昂贵的设备之前，我想我会问，这些设备也可能无法正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:47:56.763

您可以首先检查您的 USB 摄像头是否正在处理中。以 GSVideo 为例：

```
import codeanticode.gsvideo.*;
GSCapture cam;
void setup() {
size(640,480);
String[] cameras = GSCapture.list(); 
  if (cameras.length == 0)
  {
    println("There are no cameras available for capture.");
    exit();
  } else {
    println("Available cameras:");
    for (int i = 0; i < cameras.length; i++) {
      println(cameras[i]);
    } }
cam = new GSCapture(this, 640, 480, cameras[0]);  
cam.start(); } 
```

如果它确实看到了摄像头，您可以添加 draw() 函数：

```
 void draw(){
    if (cam.available() == true) {
    cam.read();
    cam.loadPixels();  
    image(cam,0,0);
}} 
```

这对我行得通。

# wcf - 如何在 Windows 启动时自动运行 WCFservice

> ID：14577078
> 
> 赞同：1
> 
> 时间：2013-01-29T06:41:42.210
> 
> 标签：wcf, startup

我开发了一个使用 WCFservices 的移动应用程序。

**我的应用程序和 WCF 服务的详细**信息：我的应用程序有一个层次化的工作流程..它有不同级别的用户..请求和查询是从用户提出的，这些用户在层次结构中向上移动以获得批准..这里我的 WCFService 用于获取，填充和保存来自数据库服务器的请求和查询。

**现在这是我的实际需要：**

WCFService 必须在系统启动时自动启动，这样如果有任何新的请求或查询需要批准，我的应用程序就会开始收到通知。

那么如何让我的服务在系统启动时自动运行？？？你能指导我完成这些步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:45:16.660

您应该使用 Windows 服务托管它。这是一个可以帮助您的[链接示例。](http://www.codeproject.com/Articles/38160/WCF-Service-Library-with-Windows-Service-Hosting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:14:33.657

IIS 上发布的任何服务都将自动启动，因为在 Windows 启动时 IIs 会自动加载

# php - 如何在 PHP 中调用另一个类函数

> ID：14577079
> 
> 赞同：1
> 
> 时间：2013-01-29T06:41:59.007
> 
> 标签：php, class, function

我的问题类似于[Call function in function from another class PHP](https://stackoverflow.com/questions/8420431/call-function-in-function-from-another-class-php)，但它的答案对我不起作用。

基本上这就是我想要做的。

在'a.php'中，我定义了A类。

```
class A{
  function ab(){}
  function cd(){}
  function ef(){}
  ...
} 
```

在'b.php'中，我想定义可以调用A类中的函数的B类。这是我放的，但它似乎不起作用。

```
class B{
  function xy(){
    require 'a.php';
    $a = new A();
    $this->x = $a->ab();
    $this->y = $a->cd();
    return $a->ef();
  }
} 
```

谁能指出我正确的方向？谢谢

========

更新：为了让我的问题更清楚，我举了另一个例子。

```
class Person{
  function firstName(){return $this->firstName;}
  function lastName() {return $this->lastName;}
  function address()  {return $this->address;}
  ...
}

class Car{
  function ownerInfo(){
     $owner = array();
     require 'person.php';
     $p = new Person($this->ownerID);
     $owner['firstname'] = $p->firstName();
     $owner['lastname']  = $p->lastName();
     $owner['address']   = $p->address();
     //I am sure the data is there, but it returns nothing here
     return $owner;  
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:46:13.647

像这样试试

```
class B extends A{
  function xy(){
    require 'a.php';
    $a = new A();
    $this->x = $a->ab();
    $this->y = $a->cd();
    return $a->ef();
  }
} 
```

# android - 如果没有 Sim 存在，设备会显示信号强度

> ID：14577080
> 
> 赞同：7
> 
> 时间：2013-01-29T06:41:59.523
> 
> 标签：android, signal-strength

我使用以下代码来获取信号强度，

```
 SignalStrengthListener signalStrengthListener;
    signalStrengthListener = new SignalStrengthListener();
    ((TelephonyManager) getSystemService(TELEPHONY_SERVICE)).listen(
            signalStrengthListener,
            SignalStrengthListener.LISTEN_SIGNAL_STRENGTHS); 
```

然后它正在监听信号强度，

```
private class SignalStrengthListener extends PhoneStateListener {
    @Override
    public void onSignalStrengthsChanged(
            android.telephony.SignalStrength signalStrength) {

        // get the signal strength (a value between 0 and 31)
        int strengthAmplitude = signalStrength.getGsmSignalStrength();

        // do something with it (in this case we update a text view)
        // signalStrengthText.setText(String.valueOf(strengthAmplitude));
        if (strengthAmplitude > 30) {
            signalStrengthText.setText("Good");
            // signalStrengthText.setTextColor(getResources().getColor(R.color.good));
        } else if (strengthAmplitude > 20 && strengthAmplitude < 30) {
            signalStrengthText.setText("Average");
            // signalStrengthText.setTextColor(getResources().getColor(R.color.average));
        } else if (strengthAmplitude < 20) {
            signalStrengthText.setText("Weak");
            // signalStrengthText.setTextColor(getResources().getColor(R.color.weak));
        }

        super.onSignalStrengthsChanged(signalStrength);
    }
} 
```

如果设备中存在 sim 卡，则效果很好。但是当我从设备中取出 sim 然后检查信号强度时，它仍然为信号强度提供了一些值。

我能想到的一种可能的解决方案是首先检查设备中是否存在 SIM 卡，然后显示信号强度。但我想知道对这种奇怪行为的解释以及可能的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-16T11:57:08.490

小区服务不需要[USIM](http://processors.wiki.ti.com/index.php/USIM_Users_Guide) - 仅用于身份验证。否则紧急呼叫将失败。

这一点都不奇怪......这是常识，因为您没有移除收音机也没有禁用它。

一个简单的测试：移除 USIM，拨打紧急服务电话，假装你是袖珍拨号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T12:10:31.210

在检查信号强度之前，您可以检查设备是否有 SIM 卡（如果您担心 WIFI 网络，则需要单独处理）然后检查信号强度。你可以尝试类似的东西

```
public boolean isSimAvailable() {
boolean isAvailable = false;
TelephonyManager telMgr = (TelephonyManager) mContext.getSystemService(Context.TELEPHONY_SERVICE);
int simState = telMgr.getSimState();
switch (simState) {
case TelephonyManager.SIM_STATE_ABSENT: //SimState = “No Sim Found!”;
break;
case TelephonyManager.SIM_STATE_NETWORK_LOCKED: //SimState = “Network Locked!”;
break;
case TelephonyManager.SIM_STATE_PIN_REQUIRED: //SimState = “PIN Required to access SIM!”;
break;
case TelephonyManager.SIM_STATE_PUK_REQUIRED: //SimState = “PUK Required to access SIM!”; // Personal Unblocking Code
break;
case TelephonyManager.SIM_STATE_READY:
isAvailable = true;
break;
case TelephonyManager.SIM_STATE_UNKNOWN: //SimState = “Unknown SIM State!”;
break;
}
return isAvailable;
} 
```

///当你得到信号强度，检查喜欢

```
SignalStrengthListener signalStrengthListener;
    if(isSimAvailable()){
         signalStrengthListener = new SignalStrengthListener();
         ((TelephonyManager) getSystemService(TELEPHONY_SERVICE)).listen(
            signalStrengthListener,
            SignalStrengthListener.LISTEN_SIGNAL_STRENGTHS);
    } else {
         //alert the user or do other stuff.
    } 
```

# python - 如何在 AsynCommandGenerator 中进行多个 GETNEXT 查询？

> ID：14577081
> 
> 赞同：0
> 
> 时间：2013-01-29T06:42:05.903
> 
> 标签：python, pysnmp

```
#!/usr/bin/env python
#-*- coding: utf-8 -*-
from pysnmp.entity.rfc3413.oneliner import cmdgen
def cbFun(sendRequestHandle, errorIndication, errorStatus, errorIndex, varBinds, cbCtx):
    print varBinds

def main():
    ip = '127.0.0.1'
    cmdGen = cmdgen.CommandGenerator()
    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.nextCmd(
        cmdgen.CommunityData('mymypub')
        cmdgen.UdpTransportTarget((ip, 161)),
        '1.3.6.1.2.1.17.7.1.2.2.1.2')
    #varBinds have about 200 elements
    print varBinds

    cmdGen = cmdgen.AsynCommandGenerator()
    cmdGen.asyncNextCmd(
        cmdgen.CommunityData('mymypub'),
        cmdgen.UdpTransportTarget((ip, 161)),
        ((1,3,6,1,2,1,17,7,1,2,2,1,2),),
        (cbFun, ip))
    cmdGen.snmpEngine.transportDispatcher.runDispatcher()
    #varBinds have 1 element
if __name__ == '__main__':
    main() 
```

我得到了 CommandGenerator 中的所有元素。但是我在 AsynCommandGenerator 中只有一个元素。我怎样才能得到所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:17:27.047

要执行另一个 GETNEXT，cbFun() 应该通过返回 True 来请求它。否则 AsynCommandGenerator 不会执行下一个 GETNEXT。

查看[相关示例](http://pysnmp.sourceforge.net/examples/current/v3arch/oneliner/manager/cmdgen/getnext-async-multiple-transports-and-protocols.html)

# iphone - 给出 UItabbar 项目的图像，使用情节提要

> ID：14577083
> 
> 赞同：-1
> 
> 时间：2013-01-29T06:42:11.730
> 
> 标签：iphone, ios, objective-c

我无法使用情节提要提供 UItabbar 项目的彩色图像。请帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:21:35.920

只需添加`CustomTabbarController`您的项目并设置您的 TabBarController 类`CustomTabbarController`，这将为您工作。

```
#import "CustomTabbarController.h"
#import "FirstViewController.h"
#import "SecondViewController.h"
#import "ThirdViewController.h"

@implementation CustomTabbarController

- (void)viewDidLoad
{
    [super viewDidLoad]; 

    FirstViewController *first = [[FirstViewController alloc]init];
    SecondViewController *second = [[SecondViewController alloc]init];
    ThirdViewController *third = [[ThirdViewController alloc]init];

    [self setViewControllers:[NSArray arrayWithObjects:first, second, third, nil]];  

    UIImage *selectedImage0 = [UIImage imageNamed:@"home-active.png"];
    UIImage *unselectedImage0 = [UIImage imageNamed:@"home.png"];

    UIImage *selectedImage1 = [UIImage imageNamed:@"star-active.png"];
    UIImage *unselectedImage1 = [UIImage imageNamed:@"star.png"];

    UIImage *selectedImage2 = [UIImage imageNamed:@"search-active.png"];
    UIImage *unselectedImage2 = [UIImage imageNamed:@"search.png"]; 

    UITabBar *tabBar = self.tabBar;
    UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:2]; 

    [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
    [item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:44:33.310

您需要为此创建自定义标签栏。

希望对您有所帮助。

干杯!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T06:49:48.183

是的，你不能在情节提要中做到这一点。

现在情节提要仅支持图标类型的色调图像。

但是您可以通过代码设置您想要设置的任何图像。

如果您对代码没有想法并且需要一些帮助而不是评论，我可能会提供帮助。

# url - 更改grails中分页的url

> ID：14577084
> 
> 赞同：0
> 
> 时间：2013-01-29T06:42:14.160
> 
> 标签：url, grails

谁能帮助我如何更改grails地址栏中显示的url。

这里我有一个数据表。一旦我点击底部显示的分页列表，让我们说 2，然后 url 更改为

```
 http://localhost:8080/test/account/list?searchText=%25&paginationNumber=10&advancedSearchText=&searchCriteria=&searchOperator=&offset=10&max=10 
```

从

```
http://localhost:8080/test/account/list 
```

现在我需要相同的网址

```
http://localhost:8080/test/account/list 
```

即使我导航到不同的页面。

是否可以覆盖 grails 中的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:52:51.640

看起来您的原始页面是表单 POST 的结果，这些附加参数作为表单上的字段。当您使用`<g:paginate>`它时，它会为每个按钮生成一个普通`<a>`链接，这意味着一个 GET 请求，因此参数进入 URL。

您可能可以使用一点 JavaScript 让它做您想做的事情，在分页按钮周围包裹一个 POST 表单，并为附加数据添加隐藏字段，并将事件处理程序附加到分页链接以触发表单的提交.

或者，将服务器端的额外参数存储在会话中，而不是来回传递它们，并在 URL 中接受`offset`and 。`max`

# c# - 如何在 nodemouseclick 事件中取消节点选择

> ID：14577087
> 
> 赞同：1
> 
> 时间：2013-01-29T06:42:18.000
> 
> 标签：c#, winforms, events, treeview

有没有办法取消在`NodeMouseClick`事件中选择新节点？（通过“取消”，我的意思是让选择恢复到先前选择的节点。）

`e.handled`通过处理布尔变量，这在 WPF 中很容易。在 Winforms 中没有这样的东西，所以我真的不知道我应该如何处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:39:18.450

进去怎么样[`BeforeSelect Event`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.beforeselect.aspx)？

```
 private void treeView1_BeforeSelect(object sender, TreeViewCancelEventArgs e)
        {
            e.Cancel = true;
        } 
```

# php - PHP：WHERE 子句中的 strval

> ID：14577091
> 
> 赞同：0
> 
> 时间：2013-01-29T06:42:34.343
> 
> 标签：php

目前我有一段代码可以正常运行。但我真正想做的是把这个部分作为一个子句**`<?php if strval ..?>`**放入部分中。我不确定这是否可能或如何去做。任何想法都会受到重视。希望这是有道理的。**`"SELECT * FROM projects"`****`WHERE`**

```
<?php 

//  ** User ID
$userid = $row_listelements ['id'];

// ** Projects
mysql_select_db($database_db, $db);
$query_activeusers = "SELECT * FROM projects ";
$activeusers = mysql_query($query_activeusers, $db) or die(mysql_error());
$row_activeusers = mysql_fetch_assoc($activeusers);
$totalRows_activeusers = mysql_num_rows($activeusers);

?>

<? do {?>

<?php if (!(strpos($row_activeusers['assignedto'], strval(",".$userid.",")) === false)) { ?>
<div><?=$row_activeusers['jobnumberdisplay'];?></div>
<?php } ?>

<? } while ($row_activeusers = mysql_fetch_assoc($activeusers)); ?>    

<strong><?php echo $totalRows_activeusers; ?></strong> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:02:06.027

如果您的用户 ID 是唯一编号，并且我正确理解您的问题，您可以通过以下方式达到此目的：

使用[IN](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html) - 可以处理字符串和数字（​​它们必须是唯一的才能使这项工作）：

```
$query_activeusers = "SELECT * FROM projects WHERE ".$userid." IN (assignedto)"; 
```

或使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set) - 可以处理字符串和数字区分大小写：

```
$query_activeusers = "SELECT * FROM projects WHERE FIND_IN_SET('".$userid."', assignedto)" 
```

但我认为你应该看看你的数据库设计。像这样在分隔列表中包含外键的问题在于，外键的全部意义在于使您能够使用索引快速定位另一个表中的信息。通过实现听起来像你所拥有的数据库，你有各种各样的问题需要解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:49:42.070

我不确定，但也许这会对你有所帮助。

```
if(strval ...)
{
   $where = "where field = $value";
} 
```

现在您可以`$where`在选择查询中使用此变量。只有当您`if condition`满意时才会执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T06:51:22.493

如果我正确理解您的代码，您应该使用 SQL `LIKE`，例如：

```
$query_activeusers = "SELECT * FROM projects WHERE assignedto LIKE '%," . 
   ((int) $userid) . ",%'"; 
```

此处转换为 (int) 是为了确保您没有特殊的 SQL 字符`$userid`- 一种用于整数值的廉价 SQL 引用。您实际上并不需要使用`strval`as 连接到字符串中，将该数字转换为字符串。

# ios - 越界调用 cellForItemAtIndexPath

> ID：14577093
> 
> 赞同：4
> 
> 时间：2013-01-29T06:42:43.767
> 
> 标签：ios, objective-c, uicollectionview

我有一个`UICollectionView`使用自定义`UICollectionViewCell`类的。基本思想是集合视图将遍历目录并显示目录中包含的照片（通过 API 调用的结果）。初始视图控制器显示一个`UICollectionView`，然后点击单元格会生成一个带有新`UICollectionView`. 目录内容存储在`NSMutableDictionary`以目录 ID 为键的 中。

当使用相当短的照片列表创建新视图/集合视图时会出现问题 - 通常少于 30。当我旋转设备时，集合视图尝试重新渲染，并且应用程序崩溃并显示“索引 X 超出bounds [0 .. Y]"，其中 X 是一个大于 Y（数组的最后一个元素）的数字。

我注意到只有当新显示的集合视图的项目少于“根”集合视图时，才会发生这种情况。

以下是相关（其中一些，无论如何）代码的示例：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {
    return [[photos objectForKey:api.directoryID] count];
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView {
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    PhotoCell *photoCell = [cv dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    photoCell.photo = [[photos objectForKey:api.directoryID] objectAtIndex:indexPath.row];
    return photoCell;
} 
```

至少，我想对`cellForItemAtIndexPath`. 也许在一个习惯`UICollectionView`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T08:42:54.263

问题在这里：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {
    return [[photos objectForKey:api.directoryID] count];
} 
```

我假设，您为所有实例使用一个**委托**和**数据源**对象。`UICollectionView`如果是这样，请以这种方式重写您的代码：

```
- (NSInteger)collectionView:(UICollectionView *)view
         numberOfItemsInSection:(NSInteger)section
{
    if ( view == _firstCollectionView )
    {
        return [[photos objectForKey:api.directoryID] count];
    }
    else if ( view == _secondCollectionView )
    {
        return ...;
    }
} 
```

你也应该`collectionView:cellForItemAtIndexPath:`以这种方式重写方法。

# c# - 在公开 Begin/End 方法的类中实现 IDisposable

> ID：14577095
> 
> 赞同：8
> 
> 时间：2013-01-29T06:42:47.870
> 
> 标签：c#, .net, dispose

假设我有一个使用标准 Begin/End 模式公开`BeginLongOperation()`和方法的类，并实现.`EndLongOperation()``IDisposable`

我的班级有责任处理对和的调用`Dispose()`之间的调用吗？`BeginLongOperation()``EndLongOperation()`

如果是这样，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T06:45:50.583

> 在对 BeginLongOperation() 和 EndLongOperation() 的调用之间处理对 Dispose() 的调用是我的班级的责任吗？

不，你的班级的调用者有责任妥善处理它。这可以在`EndLongOperation`方法中完成。您不能将实例包装在`using`语句中，因为该`BeginLongOperation`方法将立即返回。

示例`WebClient`：

```
var client = new WebClient();
client.DownloadStringCompleted += (sender, e) =>
{
    try
    {
        if (e.Error == null)
        {
            Console.WriteLine(e.Result);
        }
    }
    finally
    {
        ((WebClient)sender).Dispose();
    }
};
client.DownloadStringAsync(new Uri("http://www.google.com")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:08:05.750

我假设 Begin/End 方法是异步的。或者，您的对象可以从另一个线程进行操作。

首先，您需要确定是否真的需要处置您的类的实例。如果是这样，您需要设计 Dispose() 方法（您的类应该实现[IDisposable](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)接口），使其不会干扰正在执行的长时间操作。好吧，这取决于您要实施什么策略：您是要等待长操作完成，还是调用 Dispose() 方法应该中断长操作？

通常你永远不会从你的类内部代码中调用 Dispose() 方法，但实际上你需要保护 Dispose() 调用不被不当使用。

**所以我认为这是你的责任来保护你的代码免受任何可能的情况，即使是在开始和结束之间的（不希望的）调用。**

后期编辑：当然，正如这里的其他人告诉你的那样，你班级用户的责任是正确使用它，但我不会依赖这个。如您所知，当您的对象的最后一个引用消失时，您的对象就会被垃圾回收。即使在非异步/单线程设计中，这种糟糕的使用模式确实可以确定在 Start/End 之间对 Dispose() 的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:47:31.183

您不应在 using 块中声明此类的对象，而应尝试手动处理它。

您可以在使用此对象的类的 EndLongOperation 处理程序中调用此类类的处置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:13:55.743

IDisposable 背后的想法如下，我认为这也回答了您的问题。

> 该接口的主要用途是释放非托管资源。当不再使用该对象时，垃圾收集器会自动释放分配给托管对象的内存。但是，无法预测垃圾收集何时发生。此外，垃圾收集器不了解非托管资源，例如窗口句柄或打开的文件和流。
> 
> 使用此接口的 Dispose 方法与垃圾收集器一起显式释放非托管资源。**当不再需要对象时，对象的使用者可以调用此方法。**

因此，使用您的类调用 Dispose() 的开发人员有责任。

# java - 如何获取对实现 CometProcessor 接口的 servlet 的请求以通过过滤器

> ID：14577096
> 
> 赞同：3
> 
> 时间：2013-01-29T06:42:48.200
> 
> 标签：java, comet, servlet-filters, url-pattern

我有一个实现[CometProcessor](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/CometProcessor.html)的 servlet ，我试图让进入这个 servlet 的请求通过过滤器。在 web.xml 下指定 servlet 不会使对 servlet 的请求通过过滤器。我还尝试实现 CometFilter 并在 web.xml 下指定实现 CometProcessor 的 servlet。我收到以下错误 -

```
Jan 29, 2013 12:10:04 PM org.apache.catalina.connector.CoyoteAdapter service - SEVERE: An exception or error occurred in the container during the request processing
java.lang.NullPointerException
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:430)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:36:40.650

感谢您的输入，我发现我哪里出错了。我在实现 CometFilter 时犯了一个错误。我阅读了 CometFilter 类本身中的文档，发现我需要实现 doFilterEvent 方法而不是 doFilter 方法。现在它工作正常，对实现 CometProcessor 的 servlet 的请求正在传递给这个过滤器。

# logging - Klogd 如何与 syslogd 通信？

> ID：14577097
> 
> 赞同：2
> 
> 时间：2013-01-29T06:42:55.003
> 
> 标签：logging, linux-kernel, embedded-linux, syslog, busybox

在我的系统上，我有 syslogd 将 userpsace 日志消息写入闪存上的持久文件。我想对我的 klogd 消息做同样的事情。从手册页看来，Klogd 默认将消息发送到控制台和 syslogd。但我无法在同一个文件中获取任何内核模块消息。

Dmesg 给我完整的模块消息转储。所以我知道生成内核转储的模块工作正常。我不确定为什么我没有收到 klogd 消息。默认情况下，我们没有 /var/log/messages。为了测试，我创建了一个，但我从 klogd 部分转储到 /var/log/messages 文件中，但只有在我重新启动 klogd 时才会这样做。

似乎我错过了一些东西。syslog.config 是否控制它从 klogd 接收的消息，或者它将接收所有消息？

我正在使用 Busybox 的 syslogd 和 Klogs 实现，而不是标准实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T02:22:07.293

klogd -f 指定要用于内核日志记录的日志文件，您尝试过吗

# wpf - 使用 Mef 解析 ViewModel

> ID：14577101
> 
> 赞同：0
> 
> 时间：2013-01-29T06:43:11.873
> 
> 标签：wpf, mvvm, prism, mef

我正在尝试测试以 MVM 模式开发的 wpf 应用程序。所以它包括IregionManager，事件聚合器等。我创建了一个新项目，在这里我想创建一个ViewModel对象，它的构造函数采用Iregionmanager。我的问题是如何在我的测试类中实例化 IRegionManager 并创建一个 ViewModel 对象以便我可以访问它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:56:30.897

为什么您的 ViewModel 需要 IRegionManager 作为构造函数参数？您是否了解 Prism 的一般概念，例如引导程序、将行为附加到区域，以及在更特殊的情况下，区域适配器？

但是，要回答您的问题，如何实例化 ViewModel：使用 MEF 的 Prism 中的一般实例化模式：

**Bootstrapper**在程序启动时运行，它在其他任务中创建**行为**并将它们附加到 shell 窗口中的区域。称为 的行为`AutoPopulateExportedViewsBehavior`导入具有特定属性的所有视图，即*ViewExport*属性。**View**在其构造函数中导入**ViewModel**实例，而**ViewModel**导入**Model**。

我发现 Prism 架构入门非常具有挑战性。但是，如果您想使用它，则无法真正理解这些概念。

# linux - 如何生成 dhcp 客户端 ID

> ID：14577103
> 
> 赞同：0
> 
> 时间：2013-01-29T06:43:25.407
> 
> 标签：linux, templates, unix, networking, dhcp

在ddns 模式下使用[isc dhcpd](https://www.isc.org/software/dhcp) 时，它会为每个请求 IP 地址的客户端生成一个 hashid。然后 dhcpd 将此 hashid 放置在 DNS 服务器中客户端的 A 记录附近。

哈希 id：它是客户端 id 的 md5。
在阅读[草稿](https://datatracker.ietf.org/doc/html/draft-ietf-dnsext-dhcid-rr-13#page-6) 时，我试图了解如何自己生成这个哈希值，但我做不到。我需要一些示例，因为在生成所有 id 类型时，我不知道哪种类型的数据使用 dhcpd 服务器。
有人可以用你喜欢的任何语言举一些例子吗？

提前致谢！

# android - 如何仅在我的应用更新时运行代码

> ID：14577106
> 
> 赞同：4
> 
> 时间：2013-01-29T06:43:32.567
> 
> 标签：android

> **可能重复：**
> [如何知道我的 Android 应用程序已升级以重置警报？](https://stackoverflow.com/questions/2133986/how-to-know-my-android-application-has-been-upgraded-in-order-to-reset-an-alarm)

当我的 android 应用程序仅更新时，我需要运行某个代码（我特别想重新安排警报）。

对 SO 进行了广泛的搜索，我发现人们建议使用 SharedPreferences。我不认为这是正确的，因为 sharedPreferences 可以在重新启动或简单地清除缓存时被删除。这意味着当我的应用程序更新时，共享首选项可能不存在，我可能不知道它是更新还是只是全新安装（或更糟糕的是重新启动）。

那么，还有其他方法吗？也许是某种意图或某种执行的方法（有点像 sqlite 的 onUpgrade ）。

请指教 。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:48:42.763

SharedPreferences 是最好的方法。除了您所描述的之外，如果用户卸载并再次安装，它将被清除。如果这对您来说还不够好，您需要将最后安装的版本保存在服务器上，但这意味着您无法在离线时运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:56:51.430

sqlite 的 onUpgrade 只需检查数据库是否存在，然后它的版本是什么。如果当前数据库的版本低于 APK 中的版本，它将清除数据库并用新数据库更新数据库。同样，如果您清除应用程序缓存。包括数据库在内的所有文件都将被清除

同样，您可以在您的应用程序中实现：

就像有一个静态的公共 int 版本 = 1000; 在您的应用程序中。在创建应用程序时检查 SharedPreferences 是否包含版本（即使 SP 不存在），它将返回已保存或默认方法。

如果 SP 版本的值小于代码中的当前版本。使用您打算使用的更新功能。

如果用户卸载并重新安装了该应用程序，那么您可能也想再次注册您的通话。

# c# - 使用命令字段中的删除按钮从网格视图中检索信息

> ID：14577112
> 
> 赞同：0
> 
> 时间：2013-01-29T06:43:44.660
> 
> 标签：c#, gridview, commandfield

我有一个 gridview 正在运行。我有一个命令字段，可以从我的 SQL Server 中删除记录。在我的文件系统上，我拥有所有这些图像文件。

我找不到（或者我不知道如何专门搜索它）有关如何将文件名从记录本身存储到我后面代码中的字符串中的任何信息。

我想使用命令字段删除按钮，然后将“文件名”同时存储在一个字符串中。所以我可以运行一个存储过程，然后从我的文件系统中删除该文件。

关于如何将此信息存储在字符串中的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:08:25.563

你可以这样做：

```
public String [] readFile(String filePath){
        String [] lines=new String[1000];//Enough lines.
        int counter=0;
        try{
            File file = new File(filePath);//The path of the File
            FileReader fileReader1 = new FileReader(file);
            BufferedReader buffer = new BufferedReader(fileReader1);
            boolean flag=true;
            while(true){
                try{
                    lines[counter]=buffer.readLine();//Store a line in the array.
                    if(lines[counter]==null){//If there isn't any more lines.
                        buffer.close();
                        fileReader1.close();
                        break;//Stop reading and close the readers.
                    }
                    counter++;
                }catch(Exception ex){
                    break;
                }
            }
        }catch(FileNotFoundException ex){
            System.out.println("File not found.");
        }catch(IOException ex){
            System.out.println("Exception ocurred.");
        }
        return lines;
    } 
```

或者只是另一个例子；

```
List<string> s = new List<string>();
s.Add("c:\\documents and settings\\sound1.mp3");
s.Add("c:\\documents and settings\\sound2.mp3");

var mp3paths = s.Where(x => String.Compare(".mp3", Path.GetExtension(x), true) == 0);
var exepaths = s.Where(x => String.Compare(".exe", Path.GetExtension(x), true) == 0); 
```

希望这可以帮助。

# api - Google Places API（获取我周围的所有邮政编码）

> ID：14577113
> 
> 赞同：1
> 
> 时间：2013-01-29T06:43:48.810
> 
> 标签：api

我正在使用吹风脚本来让所有商店都在 20 英里的位置附近并且运行良好，但是当尝试使用它来获取 postal_code 时，我无法使用特定距离代码获取中心周围的所有邮政编码：

```
<script type="text/javascript" language="javascript">
    var lat = "";
    var lng = "";
    function latClick(glocation) {
        var a = new google.maps.Geocoder();
        a.geocode({ 'address': glocation }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK)
                var c = results;
            else
                c = "We couldn't find that location. Please try again."

            lat = c[0].geometry.location.lat();
            lng = c[0].geometry.location.lng();

            var pyrmont = new google.maps.LatLng(lat, lng);

            //sll=30.04443,31.234217&sspn=0.036703,0.084543&geocode=FU1wygEdO5jcAQ%3BFQRxygEdgJ7cASnrviELpj9YFDG6O0LolrLfeQ&mra=mift&

            map = new google.maps.Map(document.getElementById('map'), {
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: pyrmont,
                zoom: 15
            });

            var request = {
                location: pyrmont,
                radius: 200,
                types: ['store']
            };
            infowindow = new google.maps.InfoWindow();
            var service = new google.maps.places.PlacesService(map);
            service.nearbySearch(request, callback);
        });
    }
  var map;
  var infowindow;

  function initialize() {
      latClick("Jersey City, NJ 07306, United States");
  }

  function callback(results, status) {          
      var x = "";
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
          createMarker(results[i]);
          x = x + results[i].name + ", ";
      }
      alert(x);
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

# oauth - jersey.oauth.signature.UnsupportedSignatureMethodException：HMAC-SHA1

> ID：14577116
> 
> 赞同：1
> 
> 时间：2013-01-29T06:44:04.090
> 
> 标签：oauth, glassfish, jersey, oauth-provider

我正在基于 GlassFish 3.1.2 容器中的 jersey-oauth 1.16 contrib 开发 OAuth 服务器实现，并且在尝试通过 Scribe 客户端 API 连接到它时遇到此异常：

```
AuthFilter.filter: 
com.sun.jersey.oauth.signature.UnsupportedSignatureMethodException: HMAC-SHA1 
for com.sun.jersey.oauth.server.OAuthServerRequest@13a50796 
```

[https://wikis.oracle.com/display/Jersey/OAuth](https://wikis.oracle.com/display/Jersey/OAuth)声明“它支持 OAuth Core 1.0 规范中概述的签名方法：HMAC-SHA1、RSA-SHA1 和 PLAINTEXT”，所以我很困惑。我有一些配置错误的问题吗？欢迎任何建议/指针/想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:15:39.393

如果这发生在其他人身上，我想我会分享我是如何解决这个问题的。

GlassFish 3.1.2 似乎仍停留在旧版本的 Jersey 1.11 上。我猜 Jersey 1.11 和 oauth contrib 1.16 之间存在某种不兼容。

[http://jersey.java.net/nonav/documentation/latest/glassfish.html](http://jersey.java.net/nonav/documentation/latest/glassfish.html)描述了如何在 GlassFish 容器中更新 Jersey。这有点棘手，但我现在拥有 Jersey 1.17，它的工作就像一个魅力。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T19:32:09.167

不幸的是，我还不能添加评论，但我只想指出可以在这个[位置](http://repo1.maven.org/maven2/com/sun/jersey/glassfish/v3/jersey-gfv3-core/ "地点")找到最新的 GlassFish Jersey 库。我能够按照说明使 OAuth+Jersey 与 Glassfish v3 一起使用。谢谢，建筑师！

# ruby-on-rails - 使用 HTTP AUTH 保护 API 并设计

> ID：14577119
> 
> 赞同：1
> 
> 时间：2013-01-29T06:44:07.373
> 
> 标签：ruby-on-rails, devise

到目前为止，我有：

```
authenticate_or_request_with_http_digest do |username,password|

end 
```

但我不知道如何传递这些值来设计返回/登录用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:00:06.783

以下对我有用。

希望它可以帮助别人::::

```
before_filter :check_auth

  def check_auth
    authenticate_or_request_with_http_basic do |username,password|
      resource = User.find_by_email(username)
      if resource.valid_password?(password)
        sign_in :user, resource
      end
    end
  end 
```

# java - 使用 Java 加密私钥

> ID：14577120
> 
> 赞同：0
> 
> 时间：2013-01-29T06:44:09.057
> 
> 标签：java, ssl, x509certificate, public-key-encryption, private-key

我使用 CertAndKeyGen 类生成了一个私钥。现在我想用密码加密私钥，并在启动 PostgreSQL 服务器时将其用作密钥。有人可以帮我用java代码加密私钥，谷歌搜索可以帮助我。下面是我用来生成私钥的代码。

```
 CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null);
    PrivateKey privKey = keypair.getPrivateKey(); 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:51:00.087

```
public class KeyEncryptExample {

    public static void main(String[] args) {
        try {
            String key = "mariahussain"; // needs to be at least 8 characters for DES

            FileInputStream fis = new FileInputStream("C:/Users/hussain.a/Desktop/original.txt");
            FileOutputStream fos = new FileOutputStream("C:/Users/hussain.a/Desktop/encrypted.txt");
            encrypt(key, fis, fos);

            FileInputStream fis2 = new FileInputStream("C:/Users/hussain.a/Desktop/encrypted.txt");
            FileOutputStream fos2 = new FileOutputStream("C:/Users/hussain.a/Desktop/decrypted.txt");
            decrypt(key, fis2, fos2);
        } catch (Throwable e) {
            e.printStackTrace();
        }
    }

    public static void encrypt(String key, InputStream is, OutputStream os) throws Throwable {
        encryptOrDecrypt(key, Cipher.ENCRYPT_MODE, is, os);
    }

    public static void decrypt(String key, InputStream is, OutputStream os) throws Throwable {
        encryptOrDecrypt(key, Cipher.DECRYPT_MODE, is, os);
    }

    public static void encryptOrDecrypt(String key, int mode, InputStream is, OutputStream os) throws Throwable {

        DESKeySpec dks = new DESKeySpec(key.getBytes());
        SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
        SecretKey desKey = skf.generateSecret(dks);
        Cipher cipher = Cipher.getInstance("DES"); // DES/ECB/PKCS5Padding for SunJCE

        if (mode == Cipher.ENCRYPT_MODE) {
            cipher.init(Cipher.ENCRYPT_MODE, desKey);
            CipherInputStream cis = new CipherInputStream(is, cipher);
            doCopy(cis, os);
        } else if (mode == Cipher.DECRYPT_MODE) {
            cipher.init(Cipher.DECRYPT_MODE, desKey);
            CipherOutputStream cos = new CipherOutputStream(os, cipher);
            doCopy(is, cos);
        }
    }

    public static void doCopy(InputStream is, OutputStream os) throws IOException {
        byte[] bytes = new byte[64];
        int numBytes;
        while ((numBytes = is.read(bytes)) != -1) {
            os.write(bytes, 0, numBytes);
        }
        os.flush();
        os.close();
        is.close();
    }

} 
```

# python - Python for 循环等效于 C

> ID：14577127
> 
> 赞同：1
> 
> 时间：2013-01-29T06:44:49.493
> 
> 标签：python

我是 python 新手，我不知道如何在 python 中编写反向 for 循环。

例如`python`相当于`C`lang 循环

```
for (i = 10; i >= 0; --i) {
    printf ("%d\n", i);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T06:46:32.643

```
for i in range(10, -1, -1):
    print i 
```

不过，您很少需要 Python 中的索引循环。

通常你会迭代一些序列：

```
for element in sequence:
   do_stuff(element) 
```

要反向执行此操作：

```
for element in reversed(sequence):
   do_stuff(element) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:48:14.963

您可以使用python[范围](http://docs.python.org/2/library/functions.html#range)方法。

`python`等效于的 for 循环`C`将是：

```
for i in range(10, -1, -1):
    print i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:46:53.953

试试这个 `for i in range(10,-1,-1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T07:26:42.847

正如 Pavel 提到的，您很少需要索引循环。但是，对于您所做的那些场合，有`enumerate`：

```
for i, element in enumerate(sequence):
    print '%s is in index %d' % (element, i) 
```

# c# - 如何获取在 Windows 资源管理器中选择的列表文件和文件夹

> ID：14577128
> 
> 赞同：-2
> 
> 时间：2013-01-29T06:44:56.717
> 
> 标签：c#, .net, directory

我需要在 Windows 资源管理器中获取当前选择的文件或文件夹的路径来放置`ListView`. 我不知道怎么办希望你能帮忙。谢谢

更新源

```
public void GetListFileAndFolderOfWindowsExploer()
{
    try
    {
        string fileName;

        ArrayList selected = new ArrayList();
        Shell32.Shell shell = new Shell32.Shell();

        foreach (SHDocVw.InternetExplorer windows in new SHDocVw.ShellWindows())
        {
            fileName = Path.GetFileNameWithoutExtension(windows.FullName).ToLower();

            if (fileName.ToLowerInvariant() == "explorer")
            {
                Shell32.FolderItems items = ((Shell32.IShellFolderViewDual2)windows.Document).SelectedItems();

                foreach (Shell32.FolderItem item in items)
                {
                    lift = new string[] { item.Name, item.Path };

                    ListViewItem list = new ListViewItem();
                    list.Text = item.Name;
                    list.SubItems.Add(item.Path);
                    list.UseItemStyleForSubItems = true;
                    listView1.Items.Add(list);
                }
            }
        }
    }
    catch (Exception ex)
    {
        writelog(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:57:37.747

您可以使用`OpenFileDialog`（[Home 并学习 OpenFileDialog](http://www.homeandlearn.co.uk/csharp/csharp_s4p9.html)）。

希望这个链接有帮助。

```
OpenFileDialog fdlg = new OpenFileDialog();
fdlg.Title = "C# Help";
fdlg.InitialDirectory = @"c:\";
fdlg.Filter = "All files (*.*)|*.*|All files (*.*)|*.*";
fdlg.FilterIndex = 2;
fdlg.RestoreDirectory = true;
if (fdlg.ShowDialog() == DialogResult.OK)
{
     string dirName =
     System.IO.Path.GetDirectoryName(fdlg.FileName);
     string drive =
     dirName.Split(System.IO.Path.VolumeSeparatorChar)[0];
     MessageBox.Show(dirName);
     MessageBox.Show(drive);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:55:10.303

您的问题似乎不清楚，希望您`OpenFileDialog`用于选择文件，

如果您正在寻找文件路径：

```
string path = OpenFileDialog1.FileName; //output = c:\folder\file.txt 
```

如果您正在寻找目录路径：

```
string path = Path.GetDirectoryName(OpenFileDialog1.FileName); //output = c:\folder 
```

通常，`System.IO.Path`该类具有许多用于检索和操作路径信息的有用功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T07:29:09.753

为了获得选定的项目，您必须使用以下接口：

```
IServiceProvider
IShellBrowser
IFolderView
IShellFolder2
IPersistFolder2 
```

或直接

```
(IEnumIDList and LPITEMIDLIST) foreach all selected items 
```

这在 Windows 10 中运行良好。

# matlab - 如何用拉普拉斯+对角矩阵有效求解线性系统？

> ID：14577135
> 
> 赞同：4
> 
> 时间：2013-01-29T06:45:16.033
> 
> 标签：matlab, system, sparse-matrix, factorization

在我的图像处理算法的实现中，我必须求解形式为 的大型线性系统`A*x=b`，其中：

*   矩阵`A=L+D`是拉普拉斯矩阵 L 和对角矩阵 D 的和
*   拉普拉斯矩阵 L 是稀疏的，每行大约有 25 个非零
*   系统很大，未知数与输入图像中的像素一样多（通常 > 100 万）。

拉普拉斯矩阵 L 在算法的连续运行之间不会改变；我可以在预处理中构造这个矩阵，并可能计算它的分解。每次运行算法时，对角矩阵 D 和右侧向量 b 都会发生变化。

我正在尝试找出在运行时解决系统问题的最快方法；我不介意花时间进行预处理（例如，计算 L 的分解）。

我最初的想法是预先计算 L 的 Cholesky 分解，然后在运行时使用 D 中的值更新分解（使用 cholupdate 进行 rank-1 更新），并通过反向替换快速解决问题。不幸的是，Cholesky 分解不像原始 L 矩阵那样稀疏，仅从磁盘加载它就需要 5.48 秒；作为对比，直接求解带反斜杠的系统需要8.30s。

鉴于我的矩阵的形状，是否有任何其他方法可以建议您在运行时加快求解速度，无论预处理时间需要多长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:57:00.060

假设您正在处理网格（因为您提到了图像 - 尽管不能保证这一点），您对速度更感兴趣而不是精度（因为 5s 对于 100 万个未知数来说似乎已经太慢了），我看到了几个选项。

首先，忘记确切的方法，例如 Cholesky (+reordering)。即使他们允许存储分解并将其重用于多个 rhs，您也可能需要存储在您的情况下似乎难以处理的巨大矩阵（我希望您使用反向 Cuthill McKee 或任何东西重新排序行/列否则 - 这会使分解变得很稀疏）。

根据您的边界条件，我将首先尝试`poisolv`使用 FFT 解决泊松问题的 Matlab，如果您想要 Dirichlet 边界条件而不是周期性边界条件，则可能进行重投影。它非常快，但可能不适合您的问题（您提到拉普拉斯矩阵+恒等式有 25 nnz：为什么？它是高阶拉普拉斯矩阵，在这种情况下，您可能对精度比我假设的更感兴趣？或者它实际上是一个与你描述的不同的问题？）。

然后，您可以尝试对图像和平滑问题非常快速的多重网格求解器。您可以对多重网格的每个迭代和每个级别使用简单的松弛方法，或者使用更高级的方法（例如，预条件共轭梯度 par 级别）。或者，您可以在没有多重网格的情况下进行更简单的预条件共轭梯度（甚至 SSOR），如果您只对近似解感兴趣，则可以在完全收敛之前停止迭代。

我对迭代求解器的论点是：

*   如果你想要一个近似问题，你可以在收敛之前停止
*   您仍然可以重新使用其他结果来初始化您的解决方案（例如，如果您的不同运行对应于视频的不同帧，那么使用前一帧的解决方案作为下一帧的初始化会有意义）。

当然，您可以预先计算、存储和保持分解的直接求解器也是有意义的（尽管如果您的矩阵是常数，我不理解您关于 rank-1 更新的论点），因为只有反向替换仍然需要完成运行。但鉴于这忽略了问题的结构（规则网格，可能对有限精度结果感兴趣等），我会选择为这些情况设计的方法，例如类似傅里叶的方法或多重网格。这两种方法都可以在 GPU 上实现以获得更快的结果（回想一下，GPU 是为处理图像/纹理而量身定制的！）。

最后，您可以从更针对数值分析的[scicomp.stackexchange](https://scicomp.stackexchange.com/)获得有趣的答案。

# gradle - Gradle：使用不同名称覆盖依赖项

> ID：14577138
> 
> 赞同：3
> 
> 时间：2013-01-29T06:45:24.063
> 
> 标签：gradle, dependency-management

我正在尝试导入[`org.scalatra:scalatra-atmosphere:2.2.0-RC3`](http://mvnrepository.com/artifact/org.scalatra/scalatra-atmosphere/2.2.0-RC3)Scala 2.10 项目。问题是这个包依赖于两个非 Scala 版本的包`com.typesafe.akka:akka-actor:2.0.4`和`com.typesafe.akka:akka-testkit:2.0.4`（`org.scala-lang:scala-library:2.9.2`并且`org.scalatra:scalatra-json:2.2.0-RC3`应该可以正常工作，因为它们会更新到最新版本）。据我所知，Akka 依赖项在 Maven Central 上不存在，所以我们有损坏的包。

我想`org.scalatra:scalatra-atmosphere:2.2.0-RC3`通过用实际存在的 Scala 版本包替换非 Scala 版本包来手动覆盖 的依赖项：

```
configurations.all {
    resolutionStrategy {
        eachDependency { details ->
            if (details.requested.group == 'com.typesafe.akka') {
                details.requested.name += "_$scalaVersion"
                details.useVersion '2.1.0'
            }
        }
    }
} 
```

不幸的是，从 Gradle 1.4 开始，这种技术似乎被明确禁止：

```
 What went wrong:
Could not resolve all dependencies for configuration ':compile'.
> new ModuleRevisionId MUST have the same ModuleId as original one. original = com.typesafe.akka#akka-actor new = com.typesafe.akka#akka-actor_2.10 
```

是否有解决此问题的合法方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:17:24.610

1.4 仅支持版本更改，1.5 将包含对更改依赖项的其他属性的支持。

我认为您的选择是排除特定依赖项并将其手动添加回来的变体。示例可以在[文档中找到](http://www.gradle.org/docs/current/userguide/userguide_single.html#exclude-dependencies)

```
dependencies {
    compile("org.scalatra:scalatra-atmosphere:2.2.0-RC3) {
        exclude group: 'com.typesafe.akka', module: 'akka-actor'
        exclude group: 'com.typesafe.akka', module: 'akka-testkit'
    }
    // assuming you have this available in a repository your build is configured to resolve against
    compile 'com.typesafe.akka:akka-actor:2.0.4-MY.LOCAL.VERSION' 
} 
```

# unit-testing - NSubstitute 以对象作为 Received 调用中的参数

> ID：14577139
> 
> 赞同：10
> 
> 时间：2013-01-29T06:45:25.053
> 
> 标签：unit-testing, nsubstitute

我正在使用 NSubstitute 进行单元测试。我需要检查一个对象是否被发送到我正在测试的方法中的一个 void 方法。我只需要检查发送的对象是否具有特定值的属性之一。

例如。

```
///The object in question
public class Person
{
   public string Name { get; set; }
   public string Surname{get;set;}
} 
```

两种简单的方法

```
public void NameStartsWithA(Person person)
{
  //do something to person when name starts with A
}

public void NameStartsWithB(Person person)
{
  //do something to person when name starts with B
} 
```

我正在编写测试的方法。

```
public void MethodBeingTested()
{
  var person = new Person() {Name = "Adrian",Surname="SomeSurname"};

  if(person.Name.StartsWith("A"))
    NameStartsWithA(person);
  else
    NameStartsWithB(person);
} 
```

如果人名以 A 开头，我需要使用 NSubstitute 检查是否使用以 A 开头的名称调用了“NameStartsWithA”。

到目前为止，我的单元测试看起来像这样

```
_someService.Received().NameStartsWithA(new Person(){Name="Adrian",Surname=Arg.Any<string>()}); 
```

但是 Nsubstitute 说该函数从未被调用，但是当我使用“RecievedArgumentsAny()”进行相同的测试时，它通过了。

希望这个例子能帮助你理解我想要完成的事情。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T11:42:40.357

让它工作。发布代码。

```
_someService.Received().NameStartsWith(Arg.Is<Person>(p => p.Name.Startswith== "A")); 
```

希望这对将来的某人有所帮助。

# java - 从文本区域生成可点击事件

> ID：14577145
> 
> 赞同：0
> 
> 时间：2013-01-29T06:46:02.723
> 
> 标签：java, swing, user-interface, click, jtextarea

我想从包含人名列表的文本区域生成一个可点击事件。当我们单击某个名称时，它必须调用一个方法（该方法会从 XML 文件中显示该人的详细信息）。

这可能与文本区域？我听说过`JTextPane`，但我需要其他选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T06:58:11.837

是的，这是可能的。使用`viewToModel()`方法获取点击点的偏移量。然后使用`Utilities`to`getWordStart/getWordEnd`方法获取点击的名称。然后只需将名称传递给所需的函数。

# windows-phone-7.1 - 有什么简单的方法可以将 wp OS 8 应用程序降级到 OS 7.1？

> ID：14577146
> 
> 赞同：2
> 
> 时间：2013-01-29T06:46:12.533
> 
> 标签：windows-phone-7.1, windows-phone-8, downgrade

我已经为 Windows phone OS 8 创建了一个应用程序，但我也想支持 OS 7.1，有什么简单的方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:35:30.630

为 windows phone 7.1 创建一个新项目，然后将应用程序的所有文件导入该项目。确保不导入*WMAppManifest.xml*文件。该文件需要是 7.1 项目中的实际文件。

现在编译项目。如果您使用任何不在 7.1 中的 SDK 调用，那么您需要解决它们！我想这应该不难。大多数都有解决方法。您可以在此处发布这些错误以获得更多帮助。

# java - 像htmlparser这样的java包放在哪里？

> ID：14577148
> 
> 赞同：1
> 
> 时间：2013-01-29T06:46:14.423
> 
> 标签：java, html-parser

我开始使用HTMLParser之类的java包，我已经下载了它，发现里面有很多文件和目录。

我徘徊，将它们放在我的linux系统中的什么位置？有约定或标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:21:04.043

快速而肮脏的答案是“类路径上的任何位置”，其中类路径设置为客户端计算机上的系统属性（不推荐），作为用于启动 JVM 的 CLI 会话的临时系统属性（可从启动脚本），或作为 JVM 的命令行参数（通常是首选）。
首先和第二个设置 CLASSPATH 环境变量，请参阅 JDK 或 JRE 文档以了解确切的语法以及您的操作系统和/或 shell 脚本文档。第三次使用 Java 运行时和编译器的 -cp 命令行变量，请参阅他们的文档以了解确切的语法。
将文件放在文件系统的什么位置？出于开发目的，我通常在我的计算机上使用一个包含所有此类库的中央文件夹，并从我的 IDE 或其他开发环境链接到该库。对于最终用户的部署/打包，传统的做法是在包含所有可分发内容的产品文件夹中拥有一个“lib”子文件夹，并将 jar 文件放入其中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T07:09:34.377

Java 包有两种形式。**源代码**- 您提到的所有文件和目录 - 并打包为**jars**。Java 项目中的一个常见约定是项目有一个 lib 目录，其中包含项目所依赖的所有 jar。这些项目通常使用一个 shell 脚本，在执行项目代码之前将所有 jars 添加到 Java 类路径中。

然而，许多项目正在从这种处理依赖关系的方法切换到使用像[Apache Maven](http://maven.apache.org/)这样自动处理依赖关系管理的构建工具。其他选择包括[Ivy](http://ant.apache.org/ivy/)或[Gradle](http://gradle.org/why/robust-dependency-management/)。有关介绍，请参阅 Maven 的[5 分钟介绍](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)或[Maven 3 教程](http://blogs.sourceallies.com/2011/06/maven-3-tutorial-project-setup/)。

在这里，您编写一个 pom.xml（项目对象模型文件），它指定您的项目使用哪些库（jar）。然后，Maven 将您不同项目的所有 jar 存储在本地目录中的 .m2 目录中，跟踪获取它们的位置以及它们的版本信息。

这使得开发更加容易，因为您不需要创建 lib 目录或手动管理依赖项。您还避免了设置类路径的许多复杂性，因为 Maven 在常见的生命周期阶段（例如编译和测试）会自动为您执行此操作。最新版本的 Eclipse 可以读取 Maven pom 并从中自动配置您的类路径。

构建项目后，Maven 还可以通过程序集插件或 Shade 插件帮助创建包含项目所依赖的所有 jar 的“ **fat jars ”。**当您构建您希望某人使用[的可执行文件时，这使得分发代码更容易。](http://devdanke.wordpress.com/2009/02/18/creating-an-executable-jar-with-maven-2/)如果你正在分发一个 jar，那么你的 pom.xml 描述了你的项目的依赖关系，避免了分发它所依赖的 jar 的需要。

对于 Linux 系统上的一般文件布局，请参阅[Linux 文件系统层次结构标准](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)。

# iphone - 用户从 ABPeoplePickerNavigationController 中选择联系人后立即呈现 MFMessageComposeViewController

> ID：14577149
> 
> 赞同：2
> 
> 时间：2013-01-29T06:46:17.893
> 
> 标签：iphone, objective-c, cocoa-touch, ios6

我正在开发一个应用程序，该应用程序允许用户从手机的通讯录中选择一个联系人并在 UITableView 中显示该联系人。我使用以下代码来接听联系人；

```
-(IBAction)pickPhoneContacts:(id)sender //opens phone's address book
{
   ABPeoplePickerNavigationController *picker =

   [[ABPeoplePickerNavigationController alloc] init];

   picker.peoplePickerDelegate = self;

   [self presentViewController:picker animated:YES completion:nil]; 
```

}

```
 //called when user presses the cancel button in the Address book view controller
  - (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController*)peoplePicker

 {
    [self dismissViewControllerAnimated:YES completion:nil];
 }

   //called when user pics up a contact from the phone's address book

   - (BOOL)peoplePickerNavigationController:

  (ABPeoplePickerNavigationController *)peoplePicker

  shouldContinueAfterSelectingPerson:(ABRecordRef)person {

  [self displayPerson:person]; //calls displayPerson:(ABRecordRef)person to show contact's information in the app

  [self dismissViewControllerAnimated:YES completion:NULL];

   return NO;
}

//called when the user selects the property of the contact. This method will not be called in the  app but included to complete the implementation of the protocol

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)

peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person

 property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
 {
   return NO;
 }

   //Displays the contact name and the contact's primary number in the app's text fields (add contact view controller)
 - (void)displayPerson:(ABRecordRef)person
 {
    NSString* name = (__bridge_transferNSString*)ABRecordCopyValue(person,kABPersonFirstNameProperty); //Extracts the contact's first name from address book & assigns it to a string value

  self.contactNameTextFiled.text = name;

  NSString* phone = nil;

  //Extracts the first phone number among multiple contact numbers from address book & assigns it to a string value
ABMultiValueRef phoneNumbers = ABRecordCopyValue(person,kABPersonPhoneProperty);

if (ABMultiValueGetCount(phoneNumbers) > 0)
{
    phone = (__bridge_transfer NSString*)

    ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

}
else
{
    phone = @"[None]";
}

self.primaryNumberTextField.text = phone;

CFRelease(phoneNumbers);

} 
```

现在的任务是，一旦用户从通讯录中找到联系人，ABPeoplePickerNavigator 应该关闭并立即 MFMessageComposeViewController 应该显示默认消息和选择的联系人号码。这样应用程序的用户应该向选择的联系人号码发送消息。我已将以下代码用于消息撰写视图控制器；

```
-(void)sendSMS
{
   MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
   if([MFMessageComposeViewController canSendText])
   {
      controller.body = @"Test Message";
      controller.recipients = [NSArray arrayWithObjects:@"111222333", nil];
      controller.messageComposeDelegate = self;
       [self presentViewController:controller animated:YES completion:nil];

   }

} 
```

现在请帮助我应该在哪里调用此方法，以便 MFMessageComposeViewController 应该在 ABPeoplePickerNavigationController 关闭后立即出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:56:19.947

使用新功能dismissViewControllerAnimated：completion：所以在完成调用后发送短信，因为我已经编辑了你的代码。

```
- (BOOL)peoplePickerNavigationController:

  (ABPeoplePickerNavigationController *)peoplePicker

  shouldContinueAfterSelectingPerson:(ABRecordRef)person {

  [self displayPerson:person]; //calls displayPerson:(ABRecordRef)person to show contact's information in the app

//  [self dismissViewControllerAnimated:YES completion:NULL];
    [self dismissViewControllerAnimated:YES completion:^{
        [self sendSMS];
    }];

   return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:53:55.423

关闭时将地址控制器的动画设置为否

```
 [self dismissViewControllerAnimated:NO completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T12:34:19.990

在 .h 文件中

MFMessageComposeViewController *控制器；

ABPeoplePickerNavigationController *picker;

在 .m 中这样做

in `-(void)sendSMS` { //其他代码

```
 [picker presentViewController:controller animated:YES completion:nil]; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T07:01:04.870

试穿

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person; 
```

称呼

```
-(void)sendSMS 
```

在dismissViewControllerAnimated:completion: 完成处理程序中。

```
[self dismissViewControllerAnimated:YES completion:{[self sendSMS]}]; 
```

希望这会有所帮助。

# mysql - 从多个表中选择计数并按一个字段分组

> ID：14577150
> 
> 赞同：2
> 
> 时间：2013-01-29T06:46:22.773
> 
> 标签：mysql, join, count, group-by

我有“用户”表，其中包含字段
user_name、user_id

我有像这样的数据表

```
data_table_2012_10
data_table_2012_11
data_table_2012_12
data_table_2013_01
data_table_2013_02 
```

每个表包含以下字段

```
user_id, type ('ALARM', 'EMERGENCY', 'ALIVE', 'DEAD'), date_time 
```

每个表中将有数百万条记录。

我必须在用户给定的时间范围内从 data_tables 中选择类型的计数，并且必须在 user_id 的帮助下获取用户的相应名称。

有人可以帮助我找到最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:14:35.733

试试这个查询，其中 DATE1 和 DATE2 是您的日期范围。您应该合并内部查询中的所有表。您还可以尝试动态进行查询，以仅在内部查询中包含您使用的日期范围内的那些表：

```
select t.user_id,t.type, MAX(users.user_name), SUM(t.cnt)
from
(
select user_id,type,count(*) cnt
from data_table_2012_10 where date_time between DATE1 and DATE2
group by user_id,type

union all

select user_id,type,count(*) cnt
from data_table_2012_11 where date_time between DATE1 and DATE2
group by user_id,type

union all
.........................................

union all
select user_id,type,count(*) cnt
from data_table_2013_02 where date_time between DATE1 and DATE2
group by user_id,type
) t
left join users on (t.user_id=users.user_id)
group by t.user_id,t.type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T03:47:45.920

记住不要使用 UNION，但 UNION ALL 因为 UNION 只会返回将相似的行合并为一个，这可能会导致问题

# php - 从每个字段具有多个值的列返回唯一值

> ID：14577152
> 
> 赞同：0
> 
> 时间：2013-01-29T06:46:30.697
> 
> 标签：php, mysql, explode, array-unique

我有一个数据库表，其中有一列在每个字段中存储多个字符串，用 ; 分隔。

我需要获取该列中所有唯一值的列表。我知道必须有一种更简单的方法来做到这一点，但我无法在任何地方找到我的答案。这是我到目前为止正在做的事情：

```
$result = mysql_query("SELECT DISTINCT column FROM modx_scripture_table WHERE column!=''", $con);

$filter_all = array();

while($row = mysql_fetch_array($result))
{
    $filter_all[] = $row;
}

 function array_flatten($array) { 
  if (!is_array($array)) { 
    return FALSE; 
  } 
  $result = array(); 
  foreach ($array as $key => $value) { 
    if (is_array($value)) { 
      $result = array_merge($result, array_flatten($value)); 
    } 
    else { 
      $result[$key] = $value; 
    } 
  } 
  return $result; 
} 
$filter_flat = array_flatten($filter_all);

function array_explode($array) {
  $result = array();
  foreach ($array  as  $key => $value) {
  $result[$key] = explode(';',$value); 
  }
  return $result;
}

$filter_sploded = array_explode($filter_flat);

$filter_full = array_flatten($filter_sploded);

$filter_final = array_unique($filter_full);

print_r($filter_final); 
```

除了array_unique，一切似乎都在工作。我仍然在 $filter_final 中得到重复的字符串。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:57:25.430

分解字符串后`array_unique()`用于查找数组中的唯一值。

例子：

```
$arr=array('1','2','3','4','5','3','1');
print_r(array_unique($arr)); 
```

输出：

```
Array
(
[0] => 1
[1] => 2
[2] => 3
[3] => 4
[4] => 5
) 
```

# android - 如何将视频文件列表（相同格式）加入到 android 中的单个视频文件中

> ID：14577156
> 
> 赞同：2
> 
> 时间：2013-01-29T06:46:57.490
> 
> 标签：android, video, android-mediarecorder

在android中录制视频时，我们似乎没有暂停选项。所以对我来说可能的方法是将当前录制的文件附加到前一个文件中，朋友们，谁能告诉我如何在android中加入或合并或连接视频文件。

在此先感谢...解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T10:39:36.747

您可以尝试 mp4parser 库[https://code.google.com/p/mp4parser/](https://code.google.com/p/mp4parser/) 这是一个[示例](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/AppendExample.java)

# tcp - 适用于 TCP 环境但打算在 UDP 世界中运行的应用程序？

> ID：14577160
> 
> 赞同：-3
> 
> 时间：2013-01-29T06:47:15.360
> 
> 标签：tcp, udp

如今，一切都必须在 TCP 友好的环境中运行。即使在使用 UDP 的领域和应用程序中，我们仍然可以看到一些 TCP 趋势。

是否有人知道任何非常适合 TCP 环境但旨在在 UDP 世界中运行的小程序或应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:13:13.783

对 TCP 或 UDP 的需求取决于小程序或应用程序的要求。

如果我们研究 TCP 的好处

1.  高可靠性（面向连接）
2.  低级错误处理和数据包重发
3.  有序（字节的顺序传输）

而UDP则完全相反。

对于您的问题，点对点文件共享应用程序（例如（Bear Share、Lime 等）），由于上述原因，理想情况下，传输文件应该在 TCP 上运行。但是由于以下原因，它们在 UDP 中运行。

1.  文件不会从一个对等点下载，而是从多个对等点逐块下载（来自多个种子）
2.  无法创建和维护连接，因为 Peers 可能会在不知情的情况下关闭（关闭或 Internet 断开连接）。

所以这取决于应用程序的要求

# go - 如何找出哪些类型实现了哪个接口

> ID：14577162
> 
> 赞同：19
> 
> 时间：2013-01-29T06:47:23.407
> 
> 标签：go

例子：

在包`io`中，类型[`ByteReader`](http://golang.org/pkg/io/#ByteReader)定义了一个包装方法的接口`ReadByte() (c byte, err error)`。

**找出标准库中** **哪些类型**（即[在 golang.org/pkg 中列出](http://golang.org/pkg/)）**满足此接口**的最简单方法是什么？

这只是经验问题还是有其他帮助？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T07:10:51.010

主要靠经验。无论如何，例如：

```
jnml@fsc-r630:~/go/src/pkg$ egrep -nr '^func (.*) ReadByte\(' *
bufio/bufio.go:165:func (b *Reader) ReadByte() (c byte, err error) {
bytes/reader.go:59:func (r *Reader) ReadByte() (b byte, err error) {
bytes/buffer.go:289:func (b *Buffer) ReadByte() (c byte, err error) {
encoding/xml/xml_test.go:234:func (d *downCaser) ReadByte() (c byte, err error) {
strings/reader.go:58:func (r *Reader) ReadByte() (b byte, err error) {
jnml@fsc-r630:~/go/src/pkg$ 
```

golang.org 网站也有[区分大小写的搜索功能](http://golang.org/search?q=ReadByte)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-12T17:10:13.443

现在有比简单搜索更好的方法来做到这一点。

Go Oracle 有一个[实现查询](https://docs.google.com/document/d/1SLk36YRjjMgKqe490mSRzOPYEDe0Y_WQNRv-EiFYUyw/view#heading=h.15us5y9rxrbh)，它将显示哪些类型实现了特定接口，以及特定类型实现了哪些接口。

此外，这是一个声称提供相同功能的工具：[https](https://github.com/dominikh/implements) ://github.com/dominikh/implements 。

**2020 年更新**：官方 Go 语言服务器[gopls](https://github.com/golang/tools/blob/master/gopls/README.md)也支持此查询：

```
 ➜ gopls implementation -h
    display selected identifier's implementation

    Usage: implementation [flags] <position>

    Example:

      $ # 1-indexed location (:line:column or :#offset) of the target identifier
      $ gopls implementation helper/helper.go:8:6
      $ gopls implementation helper/helper.go:#53 
```

# php - 检查用户是否经过验证 mysql

> ID：14577169
> 
> 赞同：-4
> 
> 时间：2013-01-29T06:47:42.243
> 
> 标签：php, mysql

我正在寻找用户在尝试登录时是否经过验证，但我做错了什么

```
$validationsql = mysql_query("SELECT Validation FROM users WHERE Username = '".$username."' AND Password = '".$password."'");
$validationresult = mysql_query($validationsql) or die('error');
if ($validationresult == "'FALSE'")
{
         echo "<h1>Validation Error</h1>";
         die;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:51:13.643

你做错了很多事情。对于身份验证，您必须查看您的数据库中是否有客户提交的用户。为此，您必须使用以下内容：

```
$validationsql = mysql_query("SELECT Validation FROM users WHERE Username = '".$username."' AND Password = '".$password."'"); //Retrives data from database
$usersfound = mysql_num_rows($validationsql) or die('error'); //counts how many records have been retrieved
/*
 *If number of data is not 1 (assuming you have unique users) validation fails
*/
if ($usersfound !== 1)
{
         echo "<h1>Validation Error</h1>";
         die;
} 
```

**但是**，如果您不使用准备好的语句，则出于安全目的（[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)），您必须转义数据。为此，您可以使用[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php). 在此之后，您的代码将变为：

```
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

$validationsql = mysql_query("SELECT Validation FROM users WHERE Username = '".$username."' AND Password = '".$password."'"); //Retrives data from database
$usersfound = mysql_num_rows($validationsql) or die('error'); //counts how many records have been retrieved
/*
 *If number of data is not 1 (assuming you have unique users) validation fails
*/
if ($usersfound !== 1)
{
         echo "<h1>Validation Error</h1>";
         die;
} 
```

但这并不意味着你做的一切都是正确的。[`mysql_*`](http://php.net/manual/en/intro.mysql.php)功能已弃用。您应该使用其中一个[`PDO`](http://php.net/manual/en/book.pdo.php)或[`mysqli_*`](http://php.net/manual/en/book.mysqli.php)功能。此外，您必须积极使用[*准备好的语句。*](http://en.wikipedia.org/wiki/Prepared_statement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:50:23.780

第一件事就是不要那样存储密码。使用类似`MD5`或其他散列方法。

试试下面的代码

```
if (!$validationresult)
{
         echo "<h1>Validation Error</h1>";
         die;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:53:01.650

假设您的数据库表中有一个名为“验证”的字段，如果它不存在，请将其更改为`SELECT * FROM ...`

```
$validationsql = "SELECT Validation FROM users WHERE Username = '".$username."' AND Password = '".$password."'";
$validationresult = mysql_query($validationsql) or die('error');
if (mysql_num_rows($validationresult) == 0)
{
         echo "<h1>Validation Error</h1>";
         die;
} 
```

最好使用安全的 mysqli OR PDO。你的代码有很多漏洞

# java - linux中用于运行jar的lib文件夹的位置

> ID：14577171
> 
> 赞同：0
> 
> 时间：2013-01-29T06:47:45.970
> 
> 标签：java, linux, jar, executable-jar

我在 linux 上运行 jar 文件，然后它没有采用与项目中使用的 jar 文件正确的路径。

使用 Windows 我将 jar 文件放在与 jar 文件夹平行的 lib 文件夹中，但对于 linux 我不知道将 jar 文件放在哪里而不是 lib 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:57:37.500

*   检查**类路径：**在您的 .jar *META-INF*文件中，将 .jar 文件放在适当的目录中

*   使用命令行参数`-classpath /your/local/folder/lib/file.jar`

# java - 2个链表集之间的联合和交集，java

> ID：14577174
> 
> 赞同：2
> 
> 时间：2013-01-29T06:48:01.397
> 
> 标签：java, linked-list, union

我试图编写可以描述为“联合”的方法：如果 A、B、C 是集合，则具有 C = A.union(B) 的形式。Union 返回一个集合，其中包含集合 A 和 B 中的所有元素，但只列出一次重复项。

我对这个方法的想法是遍历集合A并将其所有元素添加到联合集合中，然后遍历集合B，如果集合B的元素已经存在于联合集合中，则不要将其插入结果，否则插入全部归并集。

这对于像我这样的初学者来说很复杂，因为我想将所有 3 个列表都包含在方法中（我得到了一堆错误）。我已经在我的 SLinkedList 类中编写了一些方法来检查和添加元素，但是参数从节点获取一个对象

```
/** Singly linked list .*/
public class SLinkedList {

  protected Node head;   // head node of the list
  protected int size;    // number of nodes in the list

  /** Default constructor that creates an empty list */
  public SLinkedList() {
    head = new Node(null, null); // create a dummy head
    size = 0; 

 // add last
  public void addLast(Object data) {
      Node cur = head;
      // find last node
      while (cur.getNext() != null) {
          cur = cur.getNext();
      }
      // cur refers to the last node
      cur.setNext(new Node(data, null));
      size++;
  } 

 // contain method to check existing elements
  public boolean contain (Object target) {
      boolean status = false;
      Node cursor;
      for (cursor = head; cursor != null; cursor = cursor.getNext()) {
          if (target.equals(cursor.getElement())) {
              status = true;
          }       
      }   
      return status;
  }

  public SLinkedList union (SLinkedList secondSet) {
      SLinkedList unionSet = new SLinkedList();
      secondSet = new SLinkedList();
      Node cursor;
      for(cursor = head.getNext(); cursor != null; cursor = cursor.getNext()) {
          unionSet.addLast(cursor.getElement());
          // traverse secondSet, if an element is existed in either set A or union
              // set, skip, else add to union set
          }
      }
    return unionSet;
  }

  } 
```

节点类

```
/** Node of a singly linked list of strings. */
public class Node {

  private Object element;   // we assume elements are character strings
  private Node next;

  /** Creates a node with the given element and next node. */
  public Node(Object o, Node n) {
    element = o;
    next = n;
  }

  /** Returns the element of this node. */
  public Object getElement() { return element; }

  /** Returns the next node of this node. */
  public Node getNext() { return next; }

  // Modifier methods:
  /** Sets the element of this node. */
  public void setElement(Object newElem) { element = newElem; }

  /** Sets the next node of this node. */
  public void setNext(Node newNext) { next = newNext; } 
```

}

****更新**** 问题是如果涉及第二个列表`public SLinkedList union (SLinkedList secondSet)`，我应该使用什么语法来遍历集合B并检查集合B的元素是否已经存在于结果中，然后不要将其插入结果，否则插入。我需要为集合 B 创建一个节点并遍历它吗？可能有一种比较方法来比较联合方法之外的 2 个集合？

请帮忙。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:51:34.223

```
SLinkedList unionSet = null; // need a new SLinkedList() here
Node cursor;
for(cursor = head.getNext(); cursor != null; cursor = cursor.getNext()) {
    unionSet.addLast(cursor.getElement()); // NPE because unionSet is null
} 
```

# ios - 在 KIF 测试步骤之间传递数据

> ID：14577178
> 
> 赞同：1
> 
> 时间：2013-01-29T06:48:12.163
> 
> 标签：ios, testing, kif-framework

我正在尝试编写一个 KIF 测试来检查我的应用程序中两个不同帐户的登录。

现在的问题是我需要从用户第一次登录后看到的 DetailView 中获取数据，并将其与第二次登录后看到的数据进行比较，并确认数据不同。

据我了解，KIF 首先将所有步骤添加到数组中，然后逐个执行这些步骤。如何从一步中获取数据并将该数据传递到第二步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:51:50.357

我已经设置了一个仅在我的 KIF 目标中的单例对象，并且 KIF 运行的第一个场景会对其进行初始化并加载一堆测试数据（创建新用户等）。

它基本上是一个花哨的版本`NSDictionary`，您可以在其中任意添加和删除键的对象。但是数据停留在步骤和场景之间，而不仅仅是步骤。所以在这方面，如果你想重用密钥，你需要记住删除数据。

# android - 对于 android，网络状态始终为 true。如何？

> ID：14577181
> 
> 赞同：0
> 
> 时间：2013-01-29T06:48:22.310
> 
> 标签：android, networking, android-emulator

我正在尝试检查我的 android 应用程序中的网络状态。

我有这样的代码：

```
public boolean isNetworkAvailable()
{
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

    if(networkInfo != null && networkInfo.isConnected())
        return true;

    return false;
} 
```

`true`当网络按预期可用时，此代码将返回，但`true`即使在网络不可用的情况下也会返回。

简单地说，这两种情况都归还`true`！

我在哪里犯了代码中的错误？

请注意，我在模拟器中运行该应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:56:04.113

试试下面的方法，它对我来说很棒。我希望它也能帮助你。

> ```
>  public static boolean IsNetConnected()
> {
>     boolean NetConnected = false;
>     try
>     {
>         ConnectivityManager connectivity =
>         (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
>         if (connectivity == null)
>         {
>             NetConnected = false;
>         }
>         else
>         {
>             NetworkInfo[] info = connectivity.getAllNetworkInfo();
>             if (info != null)
>             {
>                 for (int i = 0; i < info.length; i++)
>                 {
>                     if (info[i].getState() == NetworkInfo.State.CONNECTED)
>                     {
>                         NetConnected = true;
>                     }
>                 }
>             }
>         }
>     }
>     catch (Exception e)
>     {
>         NetConnected = false;
>     }
>     return NetConnected;
> } 
> ```

# php - 如何使用代码在不同的选项卡中打开谷歌搜索结果？

> ID：14577187
> 
> 赞同：-3
> 
> 时间：2013-01-29T06:48:34.660
> 
> 标签：php, javascript, json, jquery

我想使用 Google 的 API 之一获得顶级的 Google 搜索结果。然后我想获取结果或结果 url 并按照我的意愿处理它们......说在新选项卡中打开每个结果或添加一些代码，以便我可以从每个站点检索信息（也许下载各种页面出现在我的搜索结果中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:56:40.890

您可以创建一个新的 XMLHttpRequest 或类似的东西。从例如获取数据

谷歌搜索API。*`'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q='+q+'&callback=?'`*

*它正在被谷歌自定义搜索所取代，但应该可以通过一些谷歌搜索和谷歌关于入门的[文章](https://developers.google.com/custom-search/v1/getting_started)来弄清楚如何使用它而不是搜索 api*

然后，您可以使用结果访问*Array*属性中`responseData`的结果`result`

 *这些具有各种属性，例如`title`或`content`描述。

```
$.getJSON('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=stackoverflow&callback=?', function(e) {
  var links = e.responseData.results;
  /* Do something with the Data */
}); 
```

你会得到一个带有搜索结果的数组。
获取您需要的数据并随意使用/操作或在新的 Windows/Tabs 中打开它们。无论你想要什么。

[这是JSBin](http://jsbin.com/ozemip/1/edit)上的一个示例，它搜索 Stackoverflow 并为您提供指向第一个结果的链接*

# iphone - OpenCV CvCamera 预览

> ID：14577188
> 
> 赞同：1
> 
> 时间：2013-01-29T06:48:37.170
> 
> 标签：iphone, ios, objective-c, opencv, avfoundation

我是 OpenCV 和 AVFoundation 框架的新手，我试图显示从相机捕获的视频预览而不将其写入文件。但是当按下**开始**按钮时，我需要将视频写入 Document Folder 。这是我试图执行的一段代码，但是当它运行时它不显示任何视频预览。请帮我。

```
 self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront;
    self.videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;
    self.videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPresetMedium;
    self.videoCamera.defaultFPS = 15;
    self.videoCamera.grayscaleMode = NO;
    self.videoCamera.recordVideo = YES;
    [self.videoCamera start];
    [self.videoCamera.captureSession stopRunning]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:45:03.623

您需要从 AVCaptureSession 获取视频预览并将其添加到应用程序中的视图（层）。

这里的“会话”是相机连接到的 AVCaptureSession，“self.videoPreviewView”是我的应用程序中用于显示视频预览的 UIView。

```
// Get the preview for the session
AVCaptureVideoPreviewLayer *videoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

// Set the frame and add the previewLayer as a sublayer in the UI
CALayer *viewLayer = self.videoPreviewView.layer;
videoPreviewLayer.frame = self.videoPreviewView.bounds;
[self.videoPreviewView.layer addSublayer:videoPreviewLayer]; 
```

# selenium - java通过webdriver执行selenese脚本

> ID：14577192
> 
> 赞同：2
> 
> 时间：2013-01-29T06:49:09.600
> 
> 标签：selenium, selenium-webdriver

我正在尝试实现一个 java 程序，该程序将使用本地 webdriver 执行简单的 selenese 命令。

是否有一个 API 可以获取诸如“clickAndWait”之类的字符串并执行它？WebDriverCommandProcessor 类似乎不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:52:29.490

WebDriver Java API 主要是`WebDriver`和的方法`WebElement`。没有任何方法可以接受命令字符串并执行它。但是 Java API 是另一个协议的包装器，它**是**基于字符串的。查看 WebDriver [WebDriver Wire Protocol](http://code.google.com/p/selenium/wiki/JsonWireProtocol)，这是 WebDriver 语言绑定（客户端）用于与 WebDriver 浏览器驱动程序（服务器）通信的内容。这些命令不直接映射到“selenese”（Selenium IDE 的客户端语言），但您可以构建操作来实现它们。

# ios - 移动一个精灵时所有精灵不可见

> ID：14577193
> 
> 赞同：-1
> 
> 时间：2013-01-29T06:49:19.260
> 
> 标签：ios, xcode, cocoa-touch, cocos2d-iphone

我的场景中有 7 个精灵。所有精灵都添加到 mutablearray。当我触摸一个精灵移动时，其他精灵在我触摸移动方法后不可见

这是我的代码

```
if( (self=[super init])) {

sprites=[[NSMutableArray alloc]init];

CCLayer *base=[CCSprite spriteWithFile:@"Base.png"];
base.position=ccp(512,384);
[self addChild:base];

 x=0;
 for(int i=1;i<=7;i++)
 {
    CCSprite *hole=[CCSprite spriteWithFile:@"ball.png"];
    hole.position=ccp(140+x,318);
    hole.tag=i;
 [self addChild:hole];
    hole.visible=YES;
    [sprites addObject:hole];
    x=x+75;
 }

self.isTouchEnabled=YES;

}
return self;
}

My touchesmove method:

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
NSLog(@"count:%i",[sprites count]);
UITouch *touch=[touches anyObject];
CGPoint location=[touch locationInView:[touch view]];
location=[[CCDirector sharedDirector]convertToGL:location];
location=[self convertToNodeSpace:location];

for(CCSprite *s in sprites)
{
s.position=ccp(location.x,location.y);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:13:11.557

您在 ccTouchesMoved 中的代码将所有精灵移动到一个触摸位置，因此您只会看到一个精灵，而其余精灵实际上堆叠在下方。

如果你想要实现的是简单地在触摸时拖动精灵，你需要在 ccTouchBegan 中测试触摸位置和每个精灵的边界框之间的交集。一旦你循环并找到一个在你的触摸下的精灵，你保存一个对它的引用，然后在 ccTouchMoved 中，你翻译那个精灵的位置以及自上次调用 ccTouchMoved 以来移动的量。

查看 Ray Wenderlich 的教程：[http ://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d](http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:14:21.160

在您的`ccTouchesMoved`方法中，您正在~~将~~所有`(1)`精灵***一起***替换为以下行：

```
for(CCSprite *s in sprites)
{
    s.position=ccp(location.x,location.y);
} 
```

另外，我认为你的精灵都是相同的大小，所以你无法区分它是一个精灵还是更多。

* * *

在您的`init`方法中，您应该为每个精灵提供一个标签，然后在方法中通过其[标签](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_node.html#a865a57d2fe81b5afa91a984f8cd3e986)`ccTouchesMoved`对其进行修改。

在这种方法中，您应该知道正在触摸哪个精灵，然后采取相应的行动。尝试在 周围定义一个矩形`location`。像[这样](http://www.cocos2d-iphone.org/forum/topic/3204#post-19804)的东西。

当多个精灵被触摸时，您可能需要做一些事情。最常见的做法是对顶部的 sprite 执行操作 ( `z`) 或由 sprite 决定`tag`。

* * *

`(1)`要将精灵移动到某个位置，您应该使用一些[CCAction](http://www.cocos2d-iphone.org/api-ref/0.99.0-rc/interface_c_c_action.html)，很可能是[CCMoveTo](http://www.cocos2d-iphone.org/api-ref/0.9.0-beta/interface_c_c_move_to.html)，在某些情况下[是 CCMoveBy](http://www.cocos2d-iphone.org/api-ref/0.99.2/interface_c_c_move_by.html)。

# ckeditor - 如何在 CKEditor 中为搜索/查找弹出窗口设置 z-index

> ID：14577212
> 
> 赞同：2
> 
> 时间：2013-01-29T06:50:30.563
> 
> 标签：ckeditor

如何在 CKEditor 中为查找/替换弹出窗口设置 z-index？实际上，我在一个与查找/替换弹出窗口重叠的弹出窗口上有一个 ckeditor 实例。即查找/替换弹出窗口在我有ckeditor实例的我自己的弹出窗口后面

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-04T14:16:00.830

将此添加到您的 ckEditor config.js 文件中`config.baseFloatZIndex = 100001`

# java - Web服务生命周期

> ID：14577214
> 
> 赞同：0
> 
> 时间：2013-01-29T06:50:57.820
> 
> 标签：java, web-services

我正在用java创建一个Web服务，它提供了提供有关实体信息的工具，为此我计划构建一个缓存来保存所有信息，并为客户端提供他/她需要的缓存中的任何信息。所以我只需要在 web 服务启动时而不是在每个客户端请求上构建一次缓存。

我的问题是我应该在哪里构建缓存？

无论我读到什么，对于每个客户端调用都会调用构造函数，所以我应该在哪里添加缓存构建功能或其他替代方法。

我找到的答案之一是使用@stateless 来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:12:04.010

TechExchange为我的问题提供了一个很好的解决方案，但是由于我需要一个可以与我创建的现有基于soap的Web服务一起使用的解决方案，所以我创建了一个构建缓存并在Web服务开始时使用spring注入注入它的bean所以这个 bean 将构建缓存，客户端可以在所有请求上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:52:58.927

根据网络服务器，缓存应放在网络服务器上方，称为反向代理

话说回来，

*   如果您正在构建一个 RESTful Web 服务，您可以利用大多数针对您的资源的 Http 相关缓存控件

*   如果您的服务是基于 Jax-WS 的，您可以构建一个缓存并通过您的数据访问通道填充它。这样任何数据检索/更新都会通过它并且（如果没有找到命中数据库，如果找到返回类型）有效地减少数据库命中。

# c# - 带有 FEATURE_BLOCK_INPUT_PROMPTS 的 CoInternetSetFeatureEnabled 不起作用

> ID：14577221
> 
> 赞同：2
> 
> 时间：2013-01-29T06:51:50.497
> 
> 标签：c#, .net, browser, webbrowser-control

我正在尝试使用 CoInternetSetFeatureEnabled API 来阻止[提示对话框](http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt)，如下所示，它在托管 WebBrowser 控件的应用程序中显示，但它不起作用。[按照MSDN - Internet Feature Controls (I..L)](http://msdn.microsoft.com/en-us/library/ee330732%28v=vs.85%29.aspx)更新注册表也不起作用。我在 Win7 64 位上使用 IE9。

> FEATURE_BLOCK_INPUT_PROMPTS Internet Explorer 7\. 启用或禁用弹出窗口阻止程序以显示输入提示对话框。使用弹出窗口阻止程序来降低欺骗的风险。

```
private const int FEATURE_BLOCK_INPUT_PROMPTS = 27;

[DllImport("urlmon.dll")]
[PreserveSig]
[return: MarshalAs(UnmanagedType.Error)]
public static extern int CoInternetSetFeatureEnabled(
    int FeatureEntry,
    [MarshalAs(UnmanagedType.U4)] int dwFlags,
    bool fEnable);

public static int disableInputPrompts(bool state)
{
    return CoInternetSetFeatureEnabled(
       FEATURE_BLOCK_INPUT_PROMPTS, SET_FEATURE_ON_PROCESS, state);
} 
```

**更新**刚刚在 WinXP 中用 IE8 尝试过，这个功能正在工作。它取决于其他东西吗？

**更新**根据 msdn，此功能在 IE9 中默认启用，但它不起作用。单击[w3schools 示例](http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt)中的“试用”按钮会启动提示对话框，这是一个安全漏洞吗？

> 默认情况下，此功能对 Internet Explorer 启用，对托管 WebBrowser 控件的应用程序禁用。

关于如何在 WebBrowser 控件中阻止提示对话框的任何可行替代方法？

这可以通过实现自定义安全管理器 IInternetSecurityManager 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:22:52.247

我现在唯一的选择是使用 SetWindowsHookEx，它基于[Suppressing Hosted WebBrowser Control Dialogs](http://www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs)示例。

```
internal static class WindowsInterop
{
    private const Int32 WM_COMMAND = 0x0111;
    private const Int32 WM_INITDIALOG = 0x0110;

    private const Int32 WM_SYSCOMMAND = 0x0112;
    private const Int32 SC_CLOSE = 0xF060;

    private static IntPtr _pWH_CALLWNDPROCRET = IntPtr.Zero;

    private static HookProcedureDelegate _WH_CALLWNDPROCRET_PROC =
        new HookProcedureDelegate(WindowsInterop.WH_CALLWNDPROCRET_PROC);

    [DllImport("user32.dll")]
    private static extern IntPtr SetWindowsHookEx(Int32 hooktype, 
        HookProcedureDelegate callback, IntPtr hMod, UInt32 dwThreadId);

    [DllImport("user32.dll")]
    private static extern IntPtr UnhookWindowsHookEx(IntPtr hhk);

    [DllImport("user32.dll")]
    private static extern Int32 CallNextHookEx(IntPtr hhk, Int32 nCode, 
        IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll")]
    private static extern Int32 GetWindowTextLength(IntPtr hWnd);

    [DllImport("user32.dll")]
    private static extern Int32 GetWindowText(IntPtr hWnd, 
        StringBuilder text, Int32 maxLength);

    [DllImport("user32.dll", SetLastError = false)]
    private static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, 
        IntPtr wParam, IntPtr lParam);

    // Hook Types
    private const Int32 WH_CALLWNDPROCRET = 12;

    [StructLayout(LayoutKind.Sequential)]
    private struct CWPRETSTRUCT
    {
        public IntPtr lResult;
        public IntPtr lParam;
        public IntPtr wParam;
        public UInt32 message;
        public IntPtr hwnd;
    };

    // Delegate for a WH_ hook procedure
    private delegate Int32 HookProcedureDelegate(Int32 iCode, 
        IntPtr pWParam, IntPtr pLParam);

    // Delegate for the EnumChildWindows method
    private delegate Boolean EnumerateWindowDelegate(IntPtr pHwnd, IntPtr pParam);

    // Add a Hook into the CALLWNDPROCRET notification chain
    internal static void Hook()
    {
        if (WindowsInterop._pWH_CALLWNDPROCRET == IntPtr.Zero)
        {
            WindowsInterop._pWH_CALLWNDPROCRET = SetWindowsHookEx(
                WH_CALLWNDPROCRET,
                    WindowsInterop._WH_CALLWNDPROCRET_PROC,
                        IntPtr.Zero,
                            (uint)AppDomain.GetCurrentThreadId());
        }
    }

    // Remove the Hook into the CALLWNDPROCRET notification chain
    internal static void Unhook()
    {
        if (WindowsInterop._pWH_CALLWNDPROCRET != IntPtr.Zero)
        {
            UnhookWindowsHookEx(WindowsInterop._pWH_CALLWNDPROCRET);
        }
    }

    // Hook proceedure called by the OS when a message has been processed by the target Window
    private static Int32 WH_CALLWNDPROCRET_PROC(Int32 iCode, 
        IntPtr pWParam, IntPtr pLParam)
    {
        if (iCode < 0)
            return CallNextHookEx(WindowsInterop._pWH_CALLWNDPROCRET, 
                iCode, pWParam, pLParam);

        CWPRETSTRUCT cwp = (CWPRETSTRUCT)
            Marshal.PtrToStructure(pLParam, typeof(CWPRETSTRUCT));

        Console.WriteLine(cwp.message);

        if (cwp.message == WM_INITDIALOG)
        {
            // A dialog was initialised, find out what sort it was via it's Caption text
            Int32 iLength = GetWindowTextLength(cwp.hwnd);
            StringBuilder sb = new StringBuilder(iLength + 1);

            GetWindowText(cwp.hwnd, sb, sb.Capacity);
            var title = sb.ToString();
            if (String.IsNullOrEmpty(title) == false && 
                title.IndexOf("prompt", StringComparison.OrdinalIgnoreCase) >= 0)
            {
                // just close it
                SendMessage(cwp.hwnd, WM_SYSCOMMAND, new IntPtr(SC_CLOSE), IntPtr.Zero);
                return 1;
            }
        }

        // Call the next hook in the chain
        return CallNextHookEx(WindowsInterop._pWH_CALLWNDPROCRET, iCode, pWParam, pLParam);
    }
} 
```

# jquery - jquery fancybox 焦点问题

> ID：14577222
> 
> 赞同：0
> 
> 时间：2013-01-29T06:51:57.937
> 
> 标签：jquery, fancybox, focus

我有一个在 jQuery Fancybox 窗口中打开的表单。当页面加载时，fancybox 窗口会自动打开。当它加载时，我希望它在 Fancybox 窗口中的表单中的用户名字段上设置焦点。我发现这必须在调用 fancybox 时完成，因此我尝试了给定的不起作用的代码：代码片段：

```
jQuery(document).ready(function() {
$("#hidden_link").trigger('click');
document.getElementById('username').focus(); 
}); 
```

表单名称为“login_form”，字段 ID 为“用户名”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:04:59.843

我不太确定你使用的是什么版本。

我假设您使用版本 1，所以在调用 fancybox 时尝试添加此选项

*   onStart 将在尝试加载内容之前被调用
*   onCancel 加载取消后会调用
*   onComplete 一旦显示内容就会被调用
*   onCleanup 将在关闭之前调用
*   onClosed 一旦 FancyBox 关闭就会被调用

这来自fancybox api文档[http://fancybox.net/api](http://fancybox.net/api)

并添加您要使用的功能。

在这种情况下

```
$('#somediv').fancybox({
    oncomplete: function() {
        document.getElementById('username').focus();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:07:19.563

您试图在幻想框出现之前调用 focus() 。与其将调用放在 ready() 中，不如将其放在 onComplete() 中。

```
onComplete: function() { 
          $('#username').focus(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T13:52:49.437

我必须使用 setTimeout 来解决这个问题。

> onComplete: function() { setTimeout(function() { $('.sms_code')["1"].focus(); }, 1000); }

# java - 使用 Object 作为通用容器

> ID：14577227
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:33.337
> 
> 标签：java, gson

我需要制作一个容器对象，其中一个字段充当占位符。

```
public static class Person {
        String name;
        Object data;        //Placeholder for custom type
} 
```

此容器类型（Person）用于发送 json 数据，该数据被反序列化，如下面的代码所示。

```
import com.google.gson.Gson;

public class Main {

    public static class Address {
        String city;
        public Address(String city) {
            this.city = city;
        }
    }

    public static class Person {
        String name;
        Object data;        //Placeholder for custom type

        public Person(String name, Object data) {
            this.name = name;
            this.data = data;
        }
    }

    public static void main(String[] args) {
        Address addr = new Address("BBB") ;
        Person person = new Person("AAA", addr);

        Gson gson = new Gson();
        String json = gson.toJson(person);
        System.out.println("json = " + json);

        Person person2 = gson.fromJson(json, Person.class);
        System.out.println("person2  name = " + person2.name);
        System.out.println("person2  address = " + person2.data);
        Address addr2 = (Address)  person2.data;
        System.out.println("address  city = " + addr2.city);
    }
} 
```

2个问题：

1.  以这种方式使用 Object 是一个好习惯。类型之间没有关系进入字段（数据），因此不确定接口是否可行。

2.  它在最后抛出错误。可能是因为，Gson 无法弄清楚底层类型。

    ```
    json = {"name":"AAA","data":{"city":"BBB"}}  
    person2  name = AAA  
    person2  address = {city=BBB}  
    Exception in thread "main" java.lang.ClassCastException: 
    ```

    java.util.LinkedHashMap 不能在 Main.main(Main.java:33) 处转换​​为 Main$Address

## 编辑：

根据下面的答案，使用类名误导了我的问题背后的意图。而不是`Person`，假设我想建模一个 webresponse 并调用它`Response`。该对象可以是任何类型。

```
say if you call the API /api/person/1 , you get below response
Response {
  String message
  Object value //type is Person
}

if you call an API /api/student/2
Response {
 String message
 Object value //type is Student
} 
```

在我不使用反射的情况下，以任何方式对 Response 对象进行建模，以便它接受任何对象作为值并正确编组到基础类型。匿名类型（没有类型爆炸的一次性类）可能是一个选项，我读到 java 没有。正如一个答案所暗示的那样，不确定如何在这种情况下使用泛型。

基于这个答案，类型擦除可能使其不适合使用泛型。 [在 GSON 中使用泛型](https://stackoverflow.com/questions/4226738/using-generics-with-gson)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:04:58.757

为什么不`Map`这样使用：

```
public static class Person {
    String name;
    Map data;        //Placeholder for custom type
} 
```

`Map`可以与json兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:55:06.827

> 以这种方式使用 Object 是一个好习惯。类型之间没有关系进入字段（数据），因此不确定接口是否可行。

不，使用泛型。

> 它在最后抛出错误。可能是因为，Gson 无法弄清楚底层类型。

此外，使用泛型来避免 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:56:58.070

我将其保留为 JsonElement（来自 Gson），然后将其解组为正确的类型。

# ios - 如何将手势添加到地图叠加层

> ID：14577229
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:36.297
> 
> 标签：ios, objective-c, xcode

我的应用程序存储了来自 CLLocationManager 的数千个纬度、经度详细信息，以在地图上绘制叠加层。现在我想在那个覆盖层上添加手势，并在你触摸覆盖层而不是其他任何地方时显示一些消息。谁能为此想出简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:24:34.837

Assuming your overlay is implemented as a view (or is part of a view), you can override the function

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; 
```

to test where the user touched the screen.

If the overlay has a bounding rectangle, you can simply compare the user's touch position with the rectangle. This will tell you whether the touch was inside the overlay or not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:31:43.250

这对我有用。

```
UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] 
                               initWithTarget:self action:@selector(handleGesture:)];  
tgr.numberOfTapsRequired = 2;
[mapView addGestureRecognizer:tgr];
[tgr release]; 
```

# ios - 监控移动站点的资源加载时间

> ID：14577231
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:41.773
> 
> 标签：ios, jquery-mobile, mobile-website, resource-monitor

我正在开发一个移动网站。现在加载需要很长时间。任何人都可以建议一个好的工具来确定页面加载在哪里被卡住。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:49:02.713

如果您使用的是 jQuery Mobile 移动网站（并且只有一个 jQM 站点），您可以使用专门为 jQuery Mobile 站点设计的简单基准脚本。

看看我的另一篇文章：[https](https://stackoverflow.com/a/14469041/1848600) ://stackoverflow.com/a/14469041/1848600 ，底部有一章是关于页面基准测试的。

# php - 使用 Zend_Service_PayPal 组件实现定期 paypal 支付

> ID：14577232
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:45.597
> 
> 标签：php, zend-framework, paypal

我已经使用 Zend_Service_PayPal 组件实现了贝宝支付，它让用户在支付期间留在我的网站上。付款代码运行良好。以下是我实现的代码：

首先，我做了：

```
$Card = new Zend_Service_PayPal_Data_CreditCard( // Credit card info
                array(
                        $cardtype, // Card type
                        $cardno, // Card number
                        $firstName, // Buyer's first name
                        $lastName, // Buyer's last name
                        $expmonth, // Expiry month
                        $expyear, // Expiry year
                        $cvv)); // CVV2 
```

其次，我创建了：

```
$pname = new Zend_Service_PayPal_Data_PayerName();
$pname->firstName = $firstName;
$pname->lastName = $lastName; 
```

第三，

```
$billingAddress = new Zend_Service_PayPal_Data_Address( // Billing address
                $address, // Streed address
                $town, // City
                $country, // County Code
                $postcode); 
```

第四，

```
$authInfo = new Zend_Service_PayPal_Data_AuthInfo($ppusername,
$pppassword,$ppsignature); 
```

进而，

```
$paypal = new Zend_Service_PayPal_Nvp($authInfo); 
```

最后我使用了doDirect函数，

```
$result = $paypal->doDirectPayment($total, $Card, $billingAddress, $pname); 
```

结果我得到了贝宝的回复。

但现在我的要求是修改此代码，以便它也可以处理定期付款。请建议。我以前从未实施过定期贝宝付款。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-10T21:12:22.810

嗨，我为 ZF 或其他框架编写了代码：

> ```
> public function processPaymentAction()
> {
>     $methodName = 'CreateRecurringPaymentsProfile'; 
> ```

```
 // from nvpHeader function
    $API_Endpoint = 'https://api-3t.sandbox.paypal.com/nvp';
    $version = '65.2';

    // But you can use here your own Sandbox API credentials of Business account
    // and you can get through Payapl Sandbox API Credentials Link on Left.

    $API_UserName = 'platfo_1255077030_biz_api1.gmail.com';
    $API_Password = '1255077037';
    $API_Signature = 'Abg0gYcQyxQvnf2HDJkKtA-p6pqhA1k-KTYE0Gcy1diujFio4io5Vqjf';
    $subject = '';
    global $nvp_Header, $AUTH_token, $AUTH_signature, $AUTH_timestamp;
    $nvpHeaderStr = "";

    //pr($this->data);die;
    //$this->data['User']['paymentType']
    $paymentType = urlencode('Sale');
    $firstName = urlencode("Jaskaran");
    $lastName = urlencode("Singh");
    $creditCardType = urlencode("Visa");
    $creditCardNumber = urlencode("4798720058660243");
    $expDateMonth =urlencode(11);

    // Month must be padded with leading zero
    $padDateMonth = str_pad($expDateMonth, 2, '0', STR_PAD_LEFT);

    $expDateYear = urlencode(2015);
    $cvv2Number = urlencode(962);
    $address1 = urlencode("1 Main St");
    $address2 = urlencode("");
    $city = urlencode("San Jose");
    $state = urlencode("CA");
    $zip = urlencode(95131);
    $amount = urlencode(1.00);

//  $init_amount = urlencode($this->data['User']['pack_price']);

    $currencyCode="USD";

    $profileDesc = urlencode("Welcome to the world of shopping where you get everything");
    $billingPeriod = urlencode("Week");
    $billingFrequency = urlencode(4);
    $totalBillingCycles = urlencode(0);

    ################# Commented as we need to define through Admin ##############

    $profileStartDateDay = 10;
    // Day must be padded with leading zero
    $padprofileStartDateDay = str_pad($profileStartDateDay, 2, '0', STR_PAD_LEFT);

    $profileStartDateMonth = 02;
    // Month must be padded with leading zero
    $padprofileStartDateMonth = str_pad($profileStartDateMonth, 2, '0', STR_PAD_LEFT);

    $profileStartDateYear = 2015;

    $profileStartDate = urlencode($profileStartDateYear . '-' . $padprofileStartDateMonth . '-' . $padprofileStartDateDay . 'T00:00:00Z');

    //string from nvpHeader
    $nvpHeaderStr = "&PWD=".urlencode($API_Password)."&USER=".urlencode($API_UserName)."&SIGNATURE=".urlencode($API_Signature);

    $nvpstr="&AMT=$amount&CREDITCARDTYPE=$creditCardType&ACCT=$creditCardNumber&EXPDATE=". $padDateMonth.$expDateYear."&CVV2=$cvv2Number&FIRSTNAME=$firstName&LASTNAME=$lastName&STREET=$address1&CITY=$city&STATE=$state".
    "&ZIP=$zip&COUNTRYCODE=US&CURRENCYCODE=$currencyCode&PROFILESTARTDATE=$profileStartDate&DESC=$profileDesc&BILLINGPERIOD=$billingPeriod&BILLINGFREQUENCY=$billingFrequency&TOTALBILLINGCYCLES=$totalBillingCycles";

    $nvpstr = $nvpHeaderStr.$nvpstr;
    //check if version is included in $nvpStr else include the version.
    if(strlen(str_replace('VERSION=','', strtoupper($nvpstr))) == strlen($nvpstr)) 
    {
        $nvpstr = "&VERSION=" . urlencode($version) . $nvpstr;
    }
    $nvpreq="METHOD=".urlencode($methodName).$nvpstr;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POST, 1);

    //$nvpreq=”METHOD=”.urlencode($methodName).$nvpStr;

    //setting the nvpreq as POST FIELD to curl
    curl_setopt($ch,CURLOPT_POSTFIELDS,$nvpreq);

    //getting response from server
    $response = curl_exec($ch);

    //convrting NVPResponse to an Associative Array
    $nvpResArray=$this->deformatNVP($response);
    $nvpReqArray=$this->deformatNVP($nvpreq);

    if (curl_errno($ch)) 
    {
        echo "cURL Error";
        die;
        // moving to display page to display curl errors
        $_SESSION['curl_error_no']=curl_errno($ch) ;
        $_SESSION['curl_error_msg']=curl_error($ch);
        //$location = "APIError.php";
        //header("Location: $location");
    } 
    else 
    {
        //closing the curl
        curl_close($ch);
    }

    #### Checking error ###
    if(!empty($nvpResArray))
    {
        if($nvpResArray['ACK'] == 'Failure')
        {
            echo "ERROR : ". $errmsg = $nvpResArray["L_LONGMESSAGE0"];
            echo "<pre>";
            print_r($nvpResArray);
            die;
        }
    }

    // Print this array you will get some necessary info
    ################ Starting data insert##################

    if($nvpResArray['ACK'] == 'Success')
    {
        echo 'Success';
        print_r($nvpResArray);
        die;
        // save data into tables for Recurring Profile
    }

}

############### Function deformatNVP #########
/** This function will take NVPString and convert it to an Associative Array and it will decode the response.
 * It is usefull to search for a particular key and displaying arrays.
 * @nvpstr is NVPString.
 * @nvpArray is Associative Array.
 */
function deformatNVP ($nvpstr)
{
    $intial = 0;
    $nvpArray = array();
    while (strlen($nvpstr)) {
        //postion of Key
        $keypos = strpos($nvpstr, '=');
        //position of value
        $valuepos = strpos($nvpstr, '&') ? strpos($nvpstr, '&') : strlen(
        $nvpstr);
        /*getting the Key and Value values and storing in a Associative Array*/
        $keyval = substr($nvpstr, $intial, $keypos);
        $valval = substr($nvpstr, $keypos + 1, $valuepos - $keypos - 1);
        //decoding the respose
        $nvpArray[urldecode($keyval)] = urldecode($valval);
        $nvpstr = substr($nvpstr, $valuepos + 1, strlen($nvpstr));
    }
    return $nvpArray;
}
function formAutorization ($auth_token, $auth_signature, $auth_timestamp)
{
    $authString = "token=" . $auth_token . ",signature=" . $auth_signature .
     ",timestamp=" . $auth_timestamp;
    return $authString;
} 
```

# ios - 我是否需要为 iOS 横向模式提供单独的导航栏 png 文件，如何让它显示？

> ID：14577233
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:47.373
> 
> 标签：ios, storyboard, uinavigationbar, xcode4.5, landscape

我正在使用 Xcode 故事板来演示应用程序设计（非功能性，我是设计师，需要出于设计目的进行展示）。到目前为止，我已经为顶部的导航栏和纵向模式的标签栏创建了必要的 png。我的导航栏是 640px × 88px 的视网膜。所以我想我需要创建另一个 1136px x 88px 的 png 对吗？和标签栏一样吗？

如何在情节提要中显示此内容，以便在旋转模拟器时它将使用用于风景的较大图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:03:06.227

自定义通用内容（例如导航栏，可能会在多个屏幕上可见）的最佳方式是使用`[UINavigationBar appearance]`. 您可以将其分配给纵向模式所需的背景，如下所示：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"name_of_portrait_png"] forBarMetrics:UIBarMetricsDefault]; 
```

对于景观：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"name_of_landscape_png"] forBarMetrics:UIBarMetricsLandscapePhone]; 
```

另外，我很确定这些是您无法在情节提要中执行/看到的自定义。

# javascript - 在Javascript中添加选项时如何设置下拉列表的值？

> ID：14577234
> 
> 赞同：0
> 
> 时间：2013-01-29T06:52:50.223
> 
> 标签：javascript, jquery

我使用下面的代码添加下拉选项

```
 //HTML CODE
            select(name='folist',  id='folist').
            //JS Code
             for(var i=0;i<data.foNameArray.length;i++){
            var combo = document.getElementById("folist");

            option = document.createElement("option");
            option.text = data.foNameArray[i];
            option.value =data.foIdArray[i];
             try {
                combo.add(option, null); //Standard 
            }catch(error) {
                combo.add(option); // IE only
            }
            } 
```

它完美地工作。现在我的疑问是如何在添加时选择值，如 selected="selected"。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:55:12.287

您可以像这样设置选项的[选定属性](http://www.w3schools.com/jsref/prop_option_selected.asp)，

```
option.selected = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T06:55:35.680

你可以用[`setAttribute`](http://www.w3schools.com/dom/met_element_setattribute.asp)它来做

```
option = document.createElement("option");
option.setAttribute("selected","selected"); 
```

# php - Extjs 第一个组合框选择将数据加载到第二个组合框 extjs4

> ID：14577243
> 
> 赞同：2
> 
> 时间：2013-01-29T06:53:20.123
> 
> 标签：php, zend-framework, extjs, extjs4, extjs4.1

```
listeners:{select:{fn:function(combo, value) {
                           var attribute = Ext.getCmp('attributes');
                           var feature = Ext.getCmp('features');
                           var store = Ext.getStore('product.CategoryAttributeComboBox');

                           attribute.setValue('');
                           attribute.setDisabled(false);
                           attribute.store.load({
                           params: {id: 5}
                         });
}}} 
```

以上是我将数据加载到第二个组合框的代码。但是当我点击第一个组合时，它不会将数据填充到第二个组合，如果我再次选择第一个组合，它会将数据加载到第二个组合。不知道发生了什么使用代码。本地或远程的“模式”功能是否发生了问题。我已将模式设置为本地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:13:50.590

很久以前，我是一个类似的问题，并为组合框编写了简单的插件。可能会对你有所帮助。[请参阅 github 上的示例](http://htmlpreview.github.com/?https://github.com/werdender/ext4examples/blob/master/detailset.html)。

注意：“change”、“keyup”事件未处理，如果需要，请编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:57:34.523

这是两个组合框交互的另一个完整示例：http: [//extjs.wima.co.uk/example/1](http://extjs.wima.co.uk/example/1)

# weka - 功能组合

> ID：14577246
> 
> 赞同：3
> 
> 时间：2013-01-29T06:53:38.340
> 
> 标签：weka

我有一个特征集列表（40 个特征），我的想法首先是评估我能得到的所有组合的分类器。然而，经过我的计算，我发现组合将达到数百万！因此，它将永远存在！！！！

我读到了使用随机搜索方法选择随机特征的能力。但是，每次我运行随机搜索时，我都会得到相同的功能集。我需要更改种子编号或任何选项吗？

另外，使用随机搜索是否有效并且可以替代选择所有组合的方法？？？

我将感谢您的帮助专家。

提前谢谢了，

艾哈迈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:28:23.847

当你想在 WEKA 中进行属性选择时，你应该考虑到 2 种算法，搜索器和属性评估器（我稍后会谈到）。

正如你所说，也许你不能尝试一个，`Exhaustive search`因为它需要很长时间，有一些贪婪的替代方案可以获得好的结果（取决于问题），比如`Best first`（基于`hill climbing`）。您评论的选项 ( `Random search`) 是另一种制作选择子集的方法，它会进行随机迭代以选择将被评估的子集。

为什么你得到相同的选定属性子集？因为`Random search`总是选择相同的子集，并且评估者确定最好的子集（最终输出）。但是，如果我更改`seed`参数，它应该会更改。也许或者……也许不是。为什么？因为如果算法执行足够次数的迭代（尽管它从不同的种子开始），它将获得与前一个相同的子集（收敛），并且评估者将选择与前一次执行相同的子集。

如果您不想在选择器输出中获得收敛，只需更改`seed`，但选择较小`search percent`的以限制探索并获得不同的结果。

但是，在我看来，如果你总是得到相同的结果是因为评估者（我不知道你使用的是什么算法）已经确定这个子集是给定数据集的“最好的”。我还建议您尝试使用其他选择器，例如`Best first`或 a`Genetic search`作为您的搜索方法。

# java - 我想将 SQLite 数据库中的多个值放在 listview 行中

> ID：14577247
> 
> 赞同：0
> 
> 时间：2013-01-29T06:53:40.717
> 
> 标签：java, android, listview, row

Android 初学者在这里，我无法在列表视图中填充项目。我总是可以让数据库条目值之一出现，但我希望每个列表行有两个项目。这是我填充列表视图的类。我想将 KEY_TITLE 和 KEY_BODY 的值带入列表视图。理想情况下，我希望 KEY_BODY 成为列表视图的子项，但我认为这可能需要一个我不知道如何实现的两项列表视图，即使在阅读 API 之后也是如此。

```
@SuppressWarnings("deprecation")
private void fillData() {
Cursor moviesCursor = mDbHelper.fetchAllMovies();
startManagingCursor(moviesCursor);

String[] from = new String[]{
    MyMoviesDBAdapter.KEY_ROWID,
    MyMoviesDBAdapter.KEY_BODY,
    MyMoviesDBAdapter.KEY_TITLE
};

int[] to = new int[] {
    R.id.text3,
    R.id.text2,
    R.id.text1
};

ListAdapter movies = new SimpleCursorAdapter(this, R.layout.listtextview,
                        moviesCursor, from , to);
moviesCursor.moveToNext();
setListAdapter(movies);
} 
```

这是我的 XML 布局

```
<LinearLayout >
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text3"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="15dip"
android:textColor="#a4a4a4"
android:textSize="10sp"
 />
<TextView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="15dip"
android:textColor="#ffffff"
android:textSize="24sp"
 />
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text2"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="15dip"
android:textColor="#a4a4a4"
android:textSize="15sp"
 />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:06:13.150

你错过了`BaseColumns._ID`

```
String[] from = new String[]{
    MyMoviesDBAdapter.KEY_ROWID,
    MyMoviesDBAdapter.KEY_BODY,
    MyMoviesDBAdapter.KEY_TITLE,BaseColumns._ID
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:16:09.437

问题出在我的 XML 布局中。我忽略了在导致我的运行时异常的父“线性布局”中指定细节。希望这可以帮助某人

# php - 如何访问wordpress中的每个菜单项？

> ID：14577248
> 
> 赞同：0
> 
> 时间：2013-01-29T06:53:48.397
> 
> 标签：php, html, wordpress

我在“主菜单”位置的菜单中有一些菜单项。通过使用`wp_nav_menu( array( 'theme_location' => 'main-menu' ) );`，我得到了一个 div 中的所有项目。

现在我只需要在当前 div 中显示 10 个菜单项，并在其他 div 中显示剩余的菜单项（比如 id="new"）就在它旁边。同样，如果 id 为“new”的 div 中包含 10 个菜单项，则会再次创建一个新的 div 并在其中显示剩余的项目。

那么有没有办法访问包含这些菜单项的数组？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:06:43.727

菜单是项目列表，[wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)仅显示菜单。如果您想了解如何创建菜单或在可以修改和显示的数组上获取其项目，请检查：

[http://codex.wordpress.org/WordPress_Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide)

[http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:41:30.047

你可以阅读并知道

*   [http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu) [http://codex.wordpress.org/WordPress_Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide) [http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)

您可以在页面加载时通过 Jquery 实现这一点。

# android - 如何在 Android 中使用选项卡时跨活动存储信息

> ID：14577249
> 
> 赞同：2
> 
> 时间：2013-01-29T06:53:49.010
> 
> 标签：android, android-intent, android-emulator

我制作了一个应用程序，我在其中使用了*两个选项卡*，

**第一个选项卡**，显示产品列表 [*菜单选项卡*]

**第二个标签**，显示您添加的产品 [*购物车标签*]

在这里，我允许用户*将产品添加到购物车*，*更新产品数量*并显示所有项目的*总金额*。

在我的代码中，我面临着非常小的问题，但在过去的两天里我没有办法解决这个问题。

**问题：**

*每当我单击购物车选项卡查看产品时，我选择购买的产品然后再次返回菜单选项卡以选择更多要购买的产品，然后再次单击购物车选项卡以查看我选择的所有产品，这里我能够查看选定的产品，但无法查看更新的数量并且总金额没有任何变化[仅获取所有以前添加的项目的总数，不适用于我第二次添加的项目...]*

请告诉我我错过了哪里，获取更新的数量并更改总价，我需要添加什么代码以及我需要在**ViewCartActivity**类中添加的位置

*ViewCartActivity.Java：*

```
 public class ViewCartActivity extends Activity {

    TextView mTxtViewGrandTotal;
    String mGrandTotal ;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewcartactivity);

        ListView mLstView1 = (ListView) findViewById(R.id.listView1);
        mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);

        ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(ViewCartActivity.this);
        mLstView1.setAdapter(mViewCartAdpt);

        if (Constants.mItem_Detail.size() > 0) 
        {
            Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(SingleProductActivity.KEY_TOTAL));
            for (int i = 1; i < Constants.mItem_Detail.size(); i++) {   
                mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(SingleProductActivity.KEY_TOTAL));
            }

            mGrandTotal = String.valueOf(mGTotal);
            mTxtViewGrandTotal.setText(mGrandTotal);

            ImageButton mImgViewCart = (ImageButton) findViewById(R.id.back_btn);
            mImgViewCart.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                        Intent mViewCartIntent = new Intent(ViewCartActivity.this, com.version.bajrang.january.menu.ArrowsActivity.class);
                        startActivity(mViewCartIntent);

                }
            });     
        }
    }   

    @Override
    protected void onResume() {
    // TODO Auto-generated method stub
    System.out.println("onResume list current size "+Constants.mItem_Detail.size());
    super.onResume();
    }
} 
```

在 Logcat 中，我得到：

```
onResume list current size 3 [Number of Records] 
```

*TabActivity.Java：*

```
 private void setTabs()
{
    addTab("Order", R.drawable.tab_order, CategoryActivity.class);
    addTab("Cart", R.drawable.tab_cart, ViewCartActivity.class);
}

@Override
    public void onBackPressed() {
    // Code to update product Quantity
    super.onBackPressed();
    Constants.mItem_Detail.clear();
} 
```

*ViewCartAdapter.Java：*

```
 public class ViewCartAdapter extends BaseAdapter {

Activity activity;
LayoutInflater inflater;

public ViewCartAdapter(Activity a) {
    // TODO Auto-generated constructor stub
    activity = a;
    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}
public int getCount() {
    // TODO Auto-generated method stub
    return Constants.mItem_Detail.size();
}
public Object getItem(int position) {
    //return position;
    return Constants.mItem_Detail.get(position);
}
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;

}
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.viewcartlist, null);
    TextView title = (TextView) vi.findViewById(R.id.title);
    TextView qty = (TextView) vi.findViewById(R.id.qty);
    TextView cost = (TextView) vi.findViewById(R.id.cost);

    HashMap<String, String> item = new HashMap<String, String>();
    item = Constants.mItem_Detail.get(position);
    // Setting all values in listview
    title.setText(item.get(SingleProductActivity.TAG_NAME));
    qty.setText(item.get(SingleProductActivity.KEY_QTY));
    cost.setText(item.get(SingleProductActivity.TAG_DURATION));
    return vi;
}   
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:08:36.263

Rakesh 您已经编写了程序中需要的所有内容，只需要从 ViewCartActivity 中的 onCreate() 移动到 onResume() 方法

像这样：

```
 public class ViewCartActivity extends Activity 
 {

TextView mTxtViewGrandTotal;
String mGrandTotal ;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewcartactivity);

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);

    ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(ViewCartActivity.this);
    mLstView1.setAdapter(mViewCartAdpt);

        ImageButton mImgViewCart = (ImageButton) findViewById(R.id.back_btn);
        mImgViewCart.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent mViewCartIntent = new Intent(ViewCartActivity.this, com.version.bajrang.january.menu.ArrowsActivity.class);
                    startActivity(mViewCartIntent);

            }
        });     
    }

@Override
protected void onResume() 
{
    super.onResume();
    System.out.println("onResume list current size " + Constants.mItem_Detail.size());

    if (Constants.mItem_Detail.size() == 0) 
    {
    return;
    }

    Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(SingleProductActivity.KEY_TOTAL));
    for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
    {   
        mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(SingleProductActivity.KEY_TOTAL));
    }
    mGrandTotal = String.valueOf(mGTotal);
    mTxtViewGrandTotal.setText(mGrandTotal);
     }
   } 
```

# c# - 在网站所有页面的body标签中附加功能

> ID：14577257
> 
> 赞同：0
> 
> 时间：2013-01-29T06:54:23.827
> 
> 标签：c#, html, .net

我们有一个 Web 项目，它有大约 100 个前端页面。我需要创建一个新功能，在浏览器/选项卡关闭时调用某些方法（使用 onbeforeunload）。

**问题是：** 现在，我需要在每个前端页面上添加这两个新方法（onmousedown=f1(); 和 onbforeunload=f2();）。我想利用所有页面都继承的 PageBase 。但是，我无法在 PageBase 类中获取 BODY 标记。我试过了：

```
 private void Page_LoadComplete(object sender, EventArgs e)
    {
        HtmlGenericControl body = (HtmlGenericControl)Page.FindControl("bodyId");
        body.Attributes.Add("onmousedown", "Mouseclick()");
        //body.Attributes.Add("onunload", "Function2()");
    } 
```

但是 body 在这里始终为空。请帮助我。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:09:41.443

可以定义PageBase，重写Render方法，如下：</p>

```
 this.ClientScript.RegisterClientScriptInclude("key", "scripturl");
    base.Render(writer); 
```

在 scripturl 中定义你的方法 onmousedown，onbforeunload，祝你好运

# php - 在 Wordpress 自定义帖子类型查询中限制带有附件的帖子

> ID：14577259
> 
> 赞同：0
> 
> 时间：2013-01-29T06:54:27.093
> 
> 标签：php, wordpress, attachment, custom-post-type

我正在尝试从自定义帖子类型（称为`parceiros-e-links`）的最后一个帖子中获取帖子缩略图和另一个附加图像。

我得到的是获取所有带有图像的帖子并显示它们......但我只需要显示最后一个帖子并用两个图像（`the_post_thumbnail`和`wp_get_attachment_image`）显示它

这是我当前的代码：

```
<?php           
$query = new WP_Query( array( 'post_type' => 'parceiros-e-links', 'posts_per_page' => -1, 'orderby' => 'date', 'order' => 'DESC' ) ); //the first loop where I filter the posts from custom post type and by date
if( $query->have_posts() ){
    while($query->have_posts()){
    $query->the_post();

        $image_query = new WP_Query( array( 'post_type' => 'attachment', 'post_status' => 'inherit', 'post_mime_type' => 'image', 'posts_per_page' => 2, 'post_parent' => get_the_ID() ) );  //the second loop where I filter the posts with attachments and limit to two
        while( $image_query->have_posts() ) { $image_query->the_post();
                    //code below prints the two attachments: thumbnail and another one.
                if(has_post_thumbnail()){
                    the_post_thumbnail('home-parceiros');
                }
                echo wp_get_attachment_image( get_the_ID(), 'home-parceiros-foto' );
        }
    }
}
?> 
```

我已经花了很多时间搜索类似的情况并尝试过滤此代码，但我没有想法...因为如果我将查询的第一个限制`posts_per_page`为 1，如果最近的帖子没有附件，则不会打印任何图像！

关于如何限制自定义帖子类型中带有附件的帖子数量的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:01:54.263

您的错误是 at`the_post_thumbnail('home-parceiros');`和 echo`wp_get_attachment_image( get_the_ID(), 'home-parceiros-foto' );`在此处阅读有关为这两个函数提供的正确属性的信息：

*   [http://codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)
*   [http://codex.wordpress.org/Function_Reference/wp_get_attachment_image](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image)

这是我的建议：

```
$query = new WP_Query(
    array(
        'post_type'         => 'parceiros-e-links',
        'posts_per_page'    => 1,
        'orderby'           => 'date',
        'order'             => 'DESC'
    )
);
if($query->have_posts()) :
    while($query->have_posts()) : $query->the_post();
        if(has_post_thumbnail()) : the_post_thumbnail(); endif;
        $args = array(
            'post_type'     => 'attachment',
            'numberposts'   => 1,
            'post_status'   => null,
            'post_parent'   => $post->ID
        );
        $attachments = get_posts( $args );
        if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
                echo wp_get_attachment_image( $attachment->ID, 'full' );
            }
        }
    endwhile;
endif; 
```

请告诉我 ：）

示例 #2 更新：

```
$query = new WP_Query( array( 'post_type' => 'parceiros-e-links', 'posts_per_page' => 1, 'orderby' => 'date', 'order' => 'DESC' ) ); //the first loop where I filter the posts from custom post type and by date
if( $query->have_posts() ){
    while($query->have_posts()){
    $query->the_post();

        $image_query = new WP_Query( array( 'post_type' => 'attachment', 'post_status' => 'inherit', 'post_mime_type' => 'image', 'posts_per_page' => 2, 'post_parent' => get_the_ID() ) );  //the second loop where I filter the posts with attachments and limit to two
        while( $image_query->have_posts() ) { $image_query->the_post();
                    //code below prints the two attachments: thumbnail and another one.
                if(has_post_thumbnail()){
                    the_post_thumbnail('home-parceiros');
                }
                echo wp_get_attachment_image( get_the_ID(), 'home-parceiros-foto' );
        }
    }
} 
```

# android - 使用 Adob e AIR 3.6 在 Android 上使用纵向模式的视频聊天应用程序

> ID：14577260
> 
> 赞同：0
> 
> 时间：2013-01-29T06:54:48.553
> 
> 标签：android, air, adobe, android-camera

我使用前置摄像头在 Android 上使用 Adob​​e AIR 3.6 beta 开发了一个视频聊天应用程序。正如 Adob​​e 所解释的，他们希望您以横向模式捕获视频。我真的需要在纵向模式下执行此操作，现在视频在我的视频应用程序的另一侧是错误方向的 90 度和错误方向的 180 度我使用相机类，我完全理解相机类是设计为仅在横向模式下使用。目前我使用的是 Camera 和 Video 类，最终将使用 StageVideo！我尝试使用 rotateX 或矩阵旋转视频剪辑，这可行，但即使在我将移动设备锁定为纵向后，它仍然以横向模式横向发送视频。这只能解决我一半的问题。我需要旋转物理相机，以便用户可以在纵向模式下使用该应用程序，并且视频以纵向模式发送。他们有什么方法可以做到这一点而不必求助于 ActionScript 扩展？

在 Java 中如何做到这一点！

```
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
Camera.Parameters parameters = camera.getParameters();
parameters.set("orientation", "portrait");
parameters.setRotation(90);
camera.setParameters(parameters); 
```

如何在 AIR 和 AS3.0 中在屏幕和流视频都处于纵向模式的情况下执行此操作？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T19:13:13.560

我很遗憾地寻找相同的解决方案。我想出的唯一办法就是向流的接收端发送通知，让他们知道您的设备已旋转，以便他们可以效仿......我知道很痛苦

# mysql - 如何在 Hibernate、MySQL 应用程序中使用 import.sql 文件将默认数据插入表中

> ID：14577262
> 
> 赞同：6
> 
> 时间：2013-01-29T06:54:52.960
> 
> 标签：mysql, hibernate, maven, spring-mvc, import

我正在使用 Spring MVC（3.1 版）、Hibernate（3.5 版）和 MySQL 开发一个应用程序。在这个应用程序中，每次应用程序运行时我都会创建一个数据库模式。我想使用 import.sql 脚本文件将一些默认数据插入到几个表中。为此，我在根目录中创建了 import.sql 脚本，并在休眠中使用以下语句。cfg。xml 文件。

```
<property name="hibernate.hbm2ddl.auto">create</property> 
<property name="hibernate.hbm2ddl.import_files">import.sql</property>
<property name="connection.autocommit">true</property> 
```

但是我没有成功将默认数据插入表中。

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:11:03.263

Spring 必须知道在哪里可以找到您的文件。

如果您使用的是 maven，有几种方法可以这样做。

您可以使用 classpath:/import.sql 并将您的文件放在 src/test/resources 或 src/main/resources 中，这取决于您是否需要仅用于测试。

# jquery - jQuery not selector 不工作，怎么了？

> ID：14577264
> 
> 赞同：0
> 
> 时间：2013-01-29T06:55:01.347
> 
> 标签：jquery, jquery-selectors, except

当用户单击文档中除具有 class ='reset_btn' 的 div 之外的任何位置时，我想提醒一些东西。我已经尝试过 not() 和 :not(selector) 但它们不起作用。

这是我的代码。

```
$('document').not('.reset_btn').click(function(){
   alert('Something');
}); 
```

我在[JSFiddle](http://jsfiddle.net/Kr8SA/)创建了一个演示。在演示中，他们不会发出任何警报。当我点击 div 外的任何区域时它应该会发出警报，当我点击 div 区域时它不应该发出警报。

有什么建议吗？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:55:31.447

`$('document')`不是有效的选择器，因为没有`document`标签名称。您可以改为使用`$(document)`，这将使用`document` *element*，但这里不需要。直接使用`:not()`即可：

```
$(':not(.reset_btn)').click(function(){
   alert('Something');
}); 
```

* * *

为了进一步优化这一点，您应该使用[事件委托](http://api.jquery.com/on/)：

```
$(document).on('click', ':not(.reset_btn)', function(){
   alert('Something');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T06:56:41.583

您可以使用[**on**](http://api.jquery.com/on/)将事件委托给文档。

```
$(document).on("click", ':not(.reset_btn)').click(function(){
   alert('Something');
}); 
```

# c# - 如何在 Windows8 中使应用适应多种分辨率

> ID：14577267
> 
> 赞同：2
> 
> 时间：2013-01-29T06:55:06.907
> 
> 标签：c#, xaml, windows-8, grid, viewbox

我在 xaml 中有下面的布局代码

```
<Grid>
   <StackPanel x:Name="TestStackPanel" Grid.Row="2" Orientation="Horizontal">
      <ScrollViewer x:Name="TestScrollViewer" Height="300" VerticalScrollBarVisibility="Auto">
         <GridView x:Name="TestGridView"
            Width="940"
            Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
            ItemTemplate="{StaticResource TestTemplate}"
            ItemsPanel="{StaticResource TestItemPanelTemplate}" 
            ItemContainerStyle="{StaticResource TestItemStyle}" 
            SelectionMode="None"                                  
            HorizontalAlignment="Left"/>
       </ScrollViewer>
       <Button x:Name="TestButton" Content="ClickMe" VerticalAlignment="Bottom" Margin="10,5,0,0" Click="TestButton_Click"/>
 </StackPanel>
</Grid> 
```

这在 1366*768 分辨率下显示很好，但是如果我将分辨率更改为 2560*1400，它就无法按预期显示，我知道这是肯定的，但是如何将布局调整为不同的分辨率？我尝试添加一个 ViewBox 来封装 Grid，它在 FullScreenLandScape 视图中运行良好，但是当我将应用程序更改为 Snap 视图时，Grid 显示在一个小空间中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:40:08.260

`LayoutUpdated`在 UI 元素处注册事件。
并根据 重新计算布局`Window.Current.Bounds.Width`。

# linux - 使用Linux在tomcat中部署war文件

> ID：14577279
> 
> 赞同：3
> 
> 时间：2013-01-29T06:55:45.330
> 
> 标签：linux, gwt, tomcat6

我在端口 8080 上使用**Red Hat Enterprise Linux Server 5.1 (Tikanga)**和**apache-tomcat-6.0.35** .tomcat 安装，而不是在 80(default) 中更改。成功使用 tomcat 部署战争文件（abc.war），但我想以（`www.abc.com`）身份访问此应用程序。请建议如何替换索引文件（ROOT）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:13:14.693

两件事情：

1.  您需要为域名付费并将其指向您的 IP 地址。
2.  将应用程序的 .xml 文件创建（或符号链接）到 webapps 目录中的 ROOT.xml。这意味着您可以使用“/”和“/abc”访问应用程序。

# asp.net - 使用 Asp.net SSRS 2008 (RDLC) 命名工作表以导出到 Excel

> ID：14577284
> 
> 赞同：0
> 
> 时间：2013-01-29T06:55:57.517
> 
> 标签：asp.net, visual-studio-2008, reporting-services, export-to-excel, rdlc

我正在开发一个 VS 2008 asp.net webforms 应用程序，其中包含一个现有的 RDLC（客户端文件，而**不是 RDL 服务器端文件**）。

问题是在导出到 excel 时，所有工作表都没有正确命名，即 Sheet1、Sheet2 等。我在 RDL 的 SQL Server 2008 R2 功能上找到了很多导出数据的示例，但是我需要**RDLC**解决方案？

有谁知道如何“修复”此问题或进行某种后处理以重命名选项卡，以便客户最终不会看到 Sheet1、Sheet2、Sheet3 等？

1.  应用程序正在选择 RDLC 文件的路径
2.  添加数据源
3.  选择 xls
4.  是否所有响应

我看到这个 Stackoverflow 链接 [How to get named excel sheet while exporting from SSRS](https://stackoverflow.com/questions/736918/how-to-get-named-excel-sheets-while-exporting-from-ssrs)，但是：

1.  不能做宏
2.  无法导出为 SSML
3.  我**没有使用 RDL / SQL Server 2008 R2 SSRS**，因此其他答案对使用 RDLC 的人具有误导性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:06:22.730

RDLC 报告版本不支持工作表重命名。我猜你不能升级。所以这里有一个解决方法：将报告正常保存到文件中。然后使用 Microsoft.Office.Interop.Excel 或任何其他 Excel 库再次打开它以重命名工作表。一旦你这样做保存，你就完成了。

```
using Excel = Microsoft.Office.Interop.Excel; 

Excel.ApplicationClass xl=new Excel.ApplicationClass();
    Excel.Workbook xlBook;
    Excel.Worksheet xlSheet;
    string filePath = Server.MapPath(@"\report.xls");
    xlBook = (Workbook)xl.Workbooks.Open(filePath,Type.Missing,
      Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing
     ,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing);
    xlSheet = (Worksheet)xlBook.Worksheets.get_Item(1);
    xlSheet.Name = "New Sheet Name";
    xlBook.Save();
    xl.Application.Workbooks.Close(); 
```

如果此库不适合您，您可以使用的不同库列表： 免费库 1\. 关闭 XML 库 - [http://closedxml.codeplex.com/documentation](http://closedxml.codeplex.com/documentation) 2\. 打开 XML SDK - [http://msdn.microsoft .com/en-us/library/bb448854.aspx](http://msdn.microsoft.com/en-us/library/bb448854.aspx) 3\. NOPI - [http://npoi.codeplex.com/](http://npoi.codeplex.com/) 4\. CarlosAG - [http://www.carlosag.net/Tools/ExcelXmlWriter/](http://www.carlosag.net/Tools/ExcelXmlWriter/)

付费图书馆 5\. 电子表格工具 6\. Smart XLS 7\. Office Writer 8\. Spire

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:43:10.107

我将升级到 RDL 2010 架构 - 它支持 Excel 命名表（以及其他有用的增强功能）：

[http://msdn.microsoft.com/en-us/library/ee960138.aspx](http://msdn.microsoft.com/en-us/library/ee960138.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T10:21:20.303

你将无法做到。

[http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/54caf25b-b17b-474c-aa47-fc884f90af03](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/54caf25b-b17b-474c-aa47-fc884f90af03)

[http://go4answers.webhost4life.com/Example/reportviewer-eport-excel-naming-sheets-157612.aspx](http://go4answers.webhost4life.com/Example/reportviewer-eport-excel-naming-sheets-157612.aspx)

[http://forums.asp.net/post/4140154.aspx](http://forums.asp.net/post/4140154.aspx)

**这可能有助于使用 excels xml 方言进行后期处理：**

[http://spacefold.com/lisa/post/Changing-the-Sheet-names-in-SQL-Server-RS-Excel-QnD-XSLT.aspx](http://spacefold.com/lisa/post/Changing-the-Sheet-names-in-SQL-Server-RS-Excel-QnD-XSLT.aspx)

# ios - MapKit 在 iOS 6 中与 Apple 地图的滚动性能不佳

> ID：14577288
> 
> 赞同：47
> 
> 时间：2013-01-29T06:56:08.827
> 
> 标签：ios, objective-c, performance, ios6, mapkit

我正在编写一个应用程序，它在大部分屏幕上显示一个简单的 Apple 地图。但是，当我比较滚动速度时，与 iOS 6 附带的原生 Apple Maps 相比，速度明显下降。

在我调查原因时，我注意到 Facebook 应用程序（也使用 Apple 地图）存在相同的性能损失。

这在装有 iOS 6 的 iPhone 4 上最为明显。

有谁知道我需要采取的与视图相关的特殊性能增强步骤或一组步骤来提高性能？我希望我的地图能够像 Apple Maps 应用程序一样流畅地移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:00:45.497

我遇到了同样的问题，看起来可能是由于在设备上启用了开发。

在[Apple 开发论坛](http://developer.apple.com/devforums/)上，我发帖询问我的问题（[我的帖子](https://devforums.apple.com/thread/185603?tstart=0)），有人正确地提醒我，很多开发人员一直在抱怨开发设备缓慢。

所以我去了 Organizer 并从那里忽略了我的设备，将其删除为启用开发。我重新启动了设备，果然我`MKMapView`的速度更快了。它有时仍然缓慢，但性能显着提高。

在您的设备上试一试，看看您是否发现了不同之处。

![在此处输入图像描述](../Images/5372f84f4db31b99c0f0637995df725f.png)

# animation - 通过单击移动更改精灵表的 Y 轴

> ID：14577289
> 
> 赞同：1
> 
> 时间：2013-01-29T06:56:10.663
> 
> 标签：animation, xna, mouse, sprite-sheet

我是新来的编程新手。我一直在寻找一段时间，但我找不到任何可以帮助解决这个问题的东西。

我试图让我的 spritesheet 在我的 spritesheet 的不同行走框架中循环，我用 IsKeyDown 轻松完成了它，但是当谈到使用鼠标走到某个地方时，我花了一段时间才找到一个“坏”的解决方案：

```
if (destination.X > position.X)                
                currentFrame.Y = 6;
            if (destination.X > position.X && destination.Y >= position.Y + 35)
                currentFrame.Y = 7;
            if (destination.X > position.X && destination.Y <= position.Y - 35)
                currentFrame.Y = 5; 
```

它有点工作，但想知道是否有更好的解决方法。我想要的是能够点击游戏屏幕并选择适当的精灵行，相对于精灵的当前位置和目的地，使其以正确的方式进行动画处理。

抱歉，如果之前有人问过这个问题，但我在发布之前搜索了几个小时，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:41:42.693

我有点不清楚你在做什么。您是否只有 2 个精灵，一个用于左侧，一个用于右侧？这就是我在您当前的代码中看到的全部内容，但您指的是动画。我将假设您有一套完整的精灵来动画行走，在这种情况下，我认为本教程将涵盖您需要的内容：

[http://coderplex.blogspot.ca/2010/04/2d-animation-part-1-basics.html](http://coderplex.blogspot.ca/2010/04/2d-animation-part-1-basics.html)

（更具体地说，本教程的第 4 部分：http: [//coderplex.blogspot.ca/2010/04/2d-animation-part-4-sprite-animation.html](http://coderplex.blogspot.ca/2010/04/2d-animation-part-4-sprite-animation.html)）

基本上，您将需要设置计时器来控制精灵动画，因为对于这种类型的鼠标移动，在您单击鼠标和对象到达目的地之间没有更多的输入（与移动相关）。因此，您需要使用计时器来确定何时应该调用行走动画中的下一个精灵。

或者，您可以进一步详细说明您的 if 语句（如果 currentFrame = 1 则 currentFrame = 2，如果 currentFrame = 2 则 currentFrame = 3 等），但如果您对图形进行更改，将会变得混乱且难以维护或精灵从精灵表中拉出的方式。它也很可能动画太快，无论如何您都必须使用计时器来减慢它的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:57:42.800

想通了，我想。这是我的代码（希望它的格式正确。对不起，如果我不打算回答我自己的问题，认为这可能对其他人有帮助）：

```
public Vector2 position = new Vector2(200, 200);
    Point frameSize = new Point(48, 92);
    Point currentFrame = new Point(0, 0);
    Point sheetSize = new Point(9, 8);
    float speed = 10;
    Vector2 direction;
    Vector2 destination;
    bool mousePressed = false;
    float difference;

    KeyboardState currentState;
    KeyboardState theKeyboardState;
    KeyboardState oldKeyboardState;

    enum State
    {
        Walking
    }

    State mcurrentState = State.Walking;

    TimeSpan nextFrameInterval =
        TimeSpan.FromSeconds((float)1 / 16);
    TimeSpan nextFrame;
    MouseState mouseState;
    MouseState oldState;

    public void Move()
    {
        direction = destination - position;
        direction.Normalize();
        position += direction * speed;

        float Xdistance = destination.X - position.X;
        float Ydistance = destination.Y - position.Y;

        difference = (float)Math.Atan2(Ydistance, Xdistance);

        float differ;
        differ = MathHelper.ToDegrees(difference);

        if (destination.X >= position.X || destination.X <= position.X)
        {                
            currentFrame.X++;
            if (currentFrame.X >= 9)
                currentFrame.X = 0;

            //down = 90dg
            if (differ >= 67.6 && differ <= 112.5)
                currentFrame.Y = 0;
            if (differ >= 112.6 && differ <= 157.5)
                currentFrame.Y = 1;
            if (differ >= 157.6 && differ <= 180 || differ >= -180 && differ <= -157.5)
                currentFrame.Y = 2;
            if (differ >= -157.4 && differ <= -112.5)
                currentFrame.Y = 3;
            if (differ >= -112.4 && differ <= -67.5)
                currentFrame.Y = 4;
            if (differ >= -67.4 && differ <= -22.5)
                currentFrame.Y = 5;
            if (differ >= -22.4 && differ <= 22.5)
                currentFrame.Y = 6;
            if (differ >= 22.6 && differ <= 67.5)
                currentFrame.Y = 7;
        }
    }

    public void Update()
    {
        mouseState = Mouse.GetState();
        currentState = Keyboard.GetState();
        theKeyboardState = Keyboard.GetState();

        if (mousePressed == true)
        {
            if (Vector2.DistanceSquared(destination, position) >= speed * speed)
            {
                Move();
            }
        }

        if (mouseState.LeftButton == ButtonState.Pressed && oldState.LeftButton == ButtonState.Released)
        {
            int mouseY = mouseState.Y;
            int mouseX = mouseState.X;

            destination = new Vector2(mouseX, mouseY);
            mousePressed = true;
        }

        oldState = mouseState;           

        if (mcurrentState == State.Walking)
        {
            #region KB animation

            if (currentState.IsKeyDown(Keys.Down))
            {
                mousePressed = false;
                currentFrame.X++;
                currentFrame.Y = 0;
                if (currentFrame.X >= 9)
                    currentFrame.X = 0;
                position.Y += speed;
            }

            if (currentState.IsKeyDown(Keys.Up))
            {
                mousePressed = false;
                currentFrame.X++;
                currentFrame.Y = 4;
                if (currentFrame.X >= 9)
                    currentFrame.X = 0;
                position.Y -= speed;
            }

            if (currentState.IsKeyDown(Keys.Right))
            {
                mousePressed = false;
                currentFrame.X++;
                currentFrame.Y = 6;
                if (currentState.IsKeyDown(Keys.Down))
                    currentFrame.Y = 7;
                if (currentState.IsKeyDown(Keys.Up))
                    currentFrame.Y = 5;
                if (currentFrame.X >= 9)
                    currentFrame.X = 0;
                position.X += speed;
            }

            if (currentState.IsKeyDown(Keys.Left))
            {
                mousePressed = false;
                currentFrame.X++;
                currentFrame.Y = 2;
                if (currentState.IsKeyDown(Keys.Down))
                    currentFrame.Y = 1;
                if (currentState.IsKeyDown(Keys.Up))
                    currentFrame.Y = 3;
                if (currentFrame.X >= 9)
                    currentFrame.X = 0;
                position.X -= speed;
            }
        }
        oldKeyboardState = theKeyboardState;
            #endregion

    }

    public void Draw(SpriteBatch spriteBatch, Texture2D character)
    {
        spriteBatch.Begin();

        spriteBatch.Draw(character, position, new Rectangle(frameSize.X * currentFrame.X,
            frameSize.Y * currentFrame.Y, frameSize.X, frameSize.Y), Color.White, 0, new Vector2(frameSize.X / 2, frameSize.Y / 2), 1, SpriteEffects.None, 0);

        spriteBatch.End();
    } 
```

# javascript - setInterval 不会跳出循环

> ID：14577292
> 
> 赞同：0
> 
> 时间：2013-01-29T06:56:20.533
> 
> 标签：javascript, jquery

以下 javascript 代码从数组中随机选择值并将其输入到输入框中。我用过jquery。我想结束 setInterval "zaman2"，所以在它结束后我可以在输入框中重新输入下一个随机字符串。但是循环并没有结束并且卡住了。我该如何解决这个问题？链接到 jsFiddle：http: [//jsfiddle.net/AQbq4/4/](http://jsfiddle.net/AQbq4/4/)

```
var dersler = [...very long list...];
var zaman = setTimeout(function() {
    var yeniDers = dersler[Math.floor(Math.random()*dersler.length)];
    sayac = 0;
    var zaman2 = setInterval(function() {
            var harf = yeniDers.slice(0,(sayac+1));
            sayac++;
            $('#main-search').attr('placeholder', harf).typeahead({source: dersler});
        if (sayac == yeniDers.length) {
            clearInterval(zaman2);
        }
    },450);
},2000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:14:27.517

你不是说

[演示](http://jsfiddle.net/mplungjan/rUd3Y/)

```
var tId, tId2;
function show() {
    var ran = arr[Math.floor(Math.random()*arr.length)];
    cnt = 0;
    tId = setInterval(function() {
            var char = ran.slice(0,(cnt+1));
            cnt++;
            $( '#main-search' ).attr('placeholder', char);
        if (cnt == ran.length) {
            clearInterval(tId);
            tId2=setTimeout(show,2000);
        }
    },450);
}
show(); 
```

# javascript - 附加到 AngularJS 范围的单元测试承诺

> ID：14577294
> 
> 赞同：3
> 
> 时间：2013-01-29T06:56:27.110
> 
> 标签：javascript, angularjs

AngularJS 为您提供的众多魔法之一是自动承诺解析，以便您可以编写如下代码：

```
function SomeCtrl($scope, Resource) {
    $scope.items = Resource.query();
} 
```

但是，我通过 JSON-RPC 和 ngResource 使用函数的服务似乎不能很好地使用它。我不得不模拟后端以进行适当的响应，但由于某种原因，我似乎无法弄清楚如何在控制器级别测试响应。

```
"use strict";

describe('controllers', function() {

    describe('LibraryCtrl', function() {
        var scope, ctrl;

        beforeEach(inject(function($rootScope, $controller) {

            JsonRpc.respondWith({ some : data });

            scope = $rootScope.$new();
            ctrl = $controller(LibraryCtrl, { $scope : scope }); 
            // controller does `$scope.items = RPCService.get()`
        }));

        it("should create a `items` model with data fetched via JSON-RPC", function() {
            // here's where I'm very confused
            // JsonRpc does $httpBackend.flush()
            JsonRpc.respond();

            // now I want to inspect the property on the controller
            expect(scope.items).toEqualData( { some : data } );
        }); 
    }); 

}); 
```

问题是，`scope.items`是一个承诺。该特定属性将仍然是一个承诺，因为显然`$digest()`没有解决承诺并将返回值重新附加为模型值。我不能做一个简单的平等断言。

我的解决方法是使用承诺捕获模拟：

```
var result = {
    capture : function(v) { result.value = v; },
    value   : null,
}; 
```

然后试试这个：

```
scope.items.then(result.capture);
expect(result.value).toEqualData(...); 
```

这确实有效（但感觉有点不对）。作为旁注（对于布朗尼点，这不是实际问题），交换`result.capture`链`JsonRpc.respond()`会导致测试失败（`result.value`为空）。

以下是问题：测试设置为范围模型的 Promise 的正确方法是什么？这个 result.capture 我做的事情还好吗，还是有更好的方法来解决它？另外，我真的很想知道为什么用响应刷新来反转承诺附件会导致响应无法解析和捕获......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:49:19.620

好问题。我的第一反应似乎是您的控制器单元测试实际上是在这里测试 ngResource。在我的控制器测试中，我模拟了资源：

```
mockResource = {query: jasmine.createSpy('query').andReturn([{id: 1, name: foo}])

module(function ($provide) {
   $provide.value('Resource', mockResource);

...

expect(mockResource.find).toHaveBeenCalled()
expect(scope.items).... 
```

这允许您单独测试控制器。

# batch-file - 批量回显路径

> ID：14577296
> 
> 赞同：0
> 
> 时间：2013-01-29T06:56:35.273
> 
> 标签：batch-file

所以，我在将其中一行回显到文件时遇到问题。代码如下：

```
IF NOT EXIST "%rutaSteamIdle%\tf2idle.ini" (
(
ECHO [Settings]
ECHO steam_location = C:\Program Files (x86)\Steam
ECHO secondary_steamapps_location = 
ECHO sandboxie_location = C:\Program Files\Sandboxie
ECHO api_key = 02FE9AB5998EA5F8A3E0DA7C4C47F3C7
ECHO backpack_viewer = Backpack.tf
ECHO launch_options = +exec idle.cfg -textmode -nosound -low -novid -nopreload -nojoy -sw +sv_lan 1 -width 640 -height 480 +map itemtest
ECHO launch_delay_time = 120
ECHO log_file_formatting = {date}, {time}, {itemtype}, {item}, {id}, {account}{nline}
ECHO easy_sandbox_mode = no
ECHO sys_tray_notifications = hats,tools
ECHO close_to_tray = False
ECHO log_web_view = On
ECHO log_web_view_port = 5000
ECHO ui_no_of_columns = 2
ECHO ui_window_size = (1024, 768)
ECHO ui_account_box_font_size = 12
ECHO ui_account_box_icon_size = 40
ECHO ui_account_box_icon = 
ECHO ui_log_entry_toggles = system,hats,weapons,tools,crates
ECHO log_poll_time = 1
ECHO ui_log_background_colour = 000000
ECHO ui_log_font_colour = FFFFFF
ECHO ui_log_font_size = 12
ECHO ui_log_font_family = TF2 Build
ECHO ui_log_font_style = 0
ECHO ui_log_font_weight = 50
ECHO ui_log_font_strikeout = False
ECHO ui_log_font_underline = False
)>>"%rutaSteamIdle%\tf2idle.ini"
) 
```

运行此程序时，我得到“闪烁”（cmd窗口在关闭之前保持打开一秒钟）以下错误：

```
\Steam was unexpected at this time. 
```

我在这里错过了什么吗？如果我这样写：

```
ECHO steam_location = "C:\Program Files (x86)\Steam" 
```

它回声正确，但遗憾的是这是我做不到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:24:49.350

这是因为 Steam 路径包含右括号。你需要像这样逃避它：

```
ECHO steam_location = C:\Program Files (x86^)\Steam 
```

`cmd`的解析器对这些东西不是很好。这是在带括号的块内，因此第一个未转义（或未引用，但引用在这里不起作用，因为`echo`也会输出引号）右括号将结束该块。同一行中之后的部分将被解释为下一个命令，在这种情况下`\Steam`会导致您收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:30:11.250

你也可以试试这个...

```
SET "steam_location=C:\Program Files (x86)\Steam"
ECHO %steam_location% 
```

它会给你输出

> C:>ECHO C:\Program Files (x86)\Steam
> 
> C:\Program 文件 (x86)\Steam

我希望这有效:)

# .net - WPF装饰元素闪烁

> ID：14577298
> 
> 赞同：2
> 
> 时间：2013-01-29T06:56:38.167
> 
> 标签：.net, wpf

我已经构建了一个自定义计时器控件，它基本上是一个用户控件，该控件具有 TextBox 控件，这些控件具有在工作时倒计时的值。

此控件作为子控件添加到 Canvas，当开始拖动控件时，它会放置在 AdornerLayer 中。

拖动此控件时，工作中的文本框会闪烁，如果您停止移动（但不要鼠标向上！！），文本框会消失！

我已经寻找解决方案，其中一个说将装饰元素和 AdornerLayer IsHitTestVisible 设置为 false，但它没有成功

任何帮助，将不胜感激

# c# - 如何从哈希表对象中获取字段

> ID：14577299
> 
> 赞同：-3
> 
> 时间：2013-01-29T06:56:38.400
> 
> 标签：c#, hashtable, unity3d

我在这里从 hastable 对象获取字段时遇到问题。这是我所拥有的：

我有一个统一的 c# 函数

```
void completionHandler( string error, object result )
{
    debug.log(result.GetType); // the type of result is System.Collections.Hastable 
} 
```

无论如何要从结果中获取字段；我试过的：

1.  没有显示任何东西

    ```
    FieldInfo[] fields = result.GetType().GetFields();
    foreach (FieldInfo fieldInfo in fields)
    {
      Debug.Log("Obj, Field: " + fieldInfo.Name);
    } 
    ```

2.  也没有显示任何东西：

    ```
    Hashtable resultHash = result.toHashtable();
    foreach (string keys in resultHash.Keys)
    {
      Debug.Log("Obj, keys: " + keys);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:08:58.143

如果你想将对象转换为 a`Hashtable`然后解析它，你可以试试这个：

```
void completionHandler(string error, object result)
{
    var hashTable = result as Hashtable;
    if (hashTable != null)
    {
        foreach (object key in hashTable.Keys)
        {
            Debug.Write(
                String.Format("key:{0} value:{1}", 
                    key.ToString(), 
                    hashTable[key]));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:27:56.293

很难理解要问什么。这是一段代码，解释了您提供的代码片段：

```
using System;
using System.Collections;
using System.Reflection;

namespace SO14577299
{
    class Program
    {
        static void Main()
        {
            object result = new Hashtable();
            //Trying to get public fields via reflection:
            //there are no public fields on this class
            FieldInfo[] fields = result.GetType().GetFields();
            foreach (FieldInfo fieldInfo in fields)
            {
                Console.WriteLine("Obj, Field: " + fieldInfo.Name);
            }
            Console.WriteLine("->1");

            Hashtable resultHash = result as Hashtable;
            //Trying to list all the keys
            //this is an empty collection, nothing there
            foreach (string keys in resultHash.Keys)
            {
                Console.WriteLine("Obj, keys: " + keys);
            }
            Console.WriteLine("->2");

            resultHash = new Hashtable();
            resultHash["a"] = "1";
            resultHash["b"] = "2";
            //Trying to list all the keys
            //Now there are two: a and b
            foreach (string keys in resultHash.Keys)
            {
                Console.WriteLine("Obj, keys: " + keys);
            }
            Console.WriteLine("->3");
        }
    }
} 
```

这是此代码的输出：

```
->1
->2
Obj, keys: a
Obj, keys: b
->3 
```

第一个输出是空的，因为您正在尝试枚举 Hashtable 类的公共字段：没有。

第二个输出是空的，仅仅是因为哈希表是空的。如果输出不为空，则第三个输出演示正在打印的内容。

您可以尝试通过输出计数来调试代码：

```
foreach (string keys in resultHash.Keys)
{
  Debug.Log("Count: " + resultHash.Count.ToString());
} 
```

这样你就可以证明/反驳你的哈希表是空的。

也请检查`toHashtable`方法。这不是标准方法，您的示例无法说明它可能会做什么。它可以做一些与人们期望的完全不同的事情。如果您知道该对象是哈希表类型，`Hashtable resultHash = result as Hashtable`是一个更安全的选择

# linux - Linux脚本试图删除文件中的“返回”

> ID：14577303
> 
> 赞同：0
> 
> 时间：2013-01-29T06:56:51.913
> 
> 标签：linux, shell

我正在尝试在 Linux shell 中编写一个非常基本的脚本，但我仍在学习。基本上，除了一部分之外，一切都很好。我将两个输出定向到同一个文件中，例如：

```
echo `losetup -a` > partitionfile
echo "p1" >> partition final 
```

基本上，我需要将字母/数字“p1”添加到文件中写入的任何内容的末尾。

问题是，它最终被读取（cat partitionfile）为：

```
/dev/loop0
p1 
```

我需要它在同一行上，它的内容如下：

```
/dev/loop0p1 
```

必须有办法解决这个问题，我只是不知道。任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:59:16.077

我会去：

```
echo "$(losetup -a)p1" > partitionfile 
```

例如，请参阅以下记录：

```
pax> echo "$(echo xyzzy_)p1"
xyzzy_p1 
```

这`xyzzy_`是内部`echo`命令的输出（在您的情况下是`losetup`），外部`echo`命令 append `p1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:28:09.097

嗨实际上 echo 的正确选项是“\ c”

> \c 使光标保持在同一行。

但是，除非您已启用它，否则您不能使用 \c

> -e

因此你的代码应该是这样的......

```
echo -e "`losetup -a` \c" > partitionfile
echo "p1" >> partition final 
```

这将在 partitionfile 中写入

> < losttup -a 的输出 > p1

一切都在同一条线上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:04:45.437

您可以将`-n`标志传递给第一个 echo 语句，以不打印尾随的新行。

参考： http: [//linux.die.net/man/1/echo](http://linux.die.net/man/1/echo)

# testng - Junit中是否有类似于ErrorCollector的TestNG方法

> ID：14577306
> 
> 赞同：4
> 
> 时间：2013-01-29T06:57:20.733
> 
> 标签：testng

是否有类似于`ErrorCollector`Junit 中的 TestNG 方法，我们可以通过它显示错误/异常`tesng`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:10:19.210

这看起来有点像`SoftAsserts`。`TestNG`最近在 6.8 中引入了软断言。

```
import org.testng.asserts.SoftAssert; 
```

阅读更多@ [http://beust.com/weblog/2012/07/29/reinventing-assertions/](http://beust.com/weblog/2012/07/29/reinventing-assertions/)

# android - 通知通知类的android给出错误的通知

> ID：14577308
> 
> 赞同：1
> 
> 时间：2013-01-29T06:57:25.553
> 
> 标签：android, eclipse, notifications, stackmob

我正在为 android 创建一个用于通知的小应用程序。

但它给出了通知类错误中的错误（支持 11 或 16 的 API 级别）。然后我尝试使用 NotificationCompat 类，但它显示资源无法解析为一种类型，而我`import package import android.support.v4.app.NotificationCompat.Builder;`

换句话说，如果我使用 Notification 类，那么它会给出 API 级别错误，如果我使用 NotificationCompat，那么它会给出资源错误。如何解决这两个错误？

```
 public void createNotification(View view) {
    // Prepare intent which is triggered if the
    // notification is selected
    Intent intent = new Intent(this, NotificationReceiverActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
    // Context context=new Context();
    // Build notification
    // Actions are just fake
     NotificationCompat.Builder noti = new NotificationCompat.Builder(this)
    .setContentTitle("New mail from " + "star.ankit90@gmail.com")
    .setContentText("Subject").setSmallIcon(R.drawable.ic_launcher)
    .setContentIntent(pIntent)
    .addAction(R.drawable.ic_launcher, "Call", pIntent)
    .addAction(R.drawable.ic_launcher, "More", pIntent)
    .addAction(R.drawable.ic_launcher, "And more", pIntent).build();
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    // Hide the notification after its selected
    noti.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, noti);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:20:54.517

我在使用您的代码时遇到了编译错误。

此固定代码编译成功：

```
// Prepare intent which is triggered if the
    // notification is selected
    Intent intent = new Intent(this, NotificationReceiverActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

    // Build notification
    // Actions are just fake
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

    builder.setContentTitle("New mail from " + "star.ankit90@gmail.com")
    .setContentText("Subject").setSmallIcon(R.drawable.ic_launcher)
    .setContentIntent(pIntent)
    .addAction(R.drawable.ic_launcher, "Call", pIntent)
    .addAction(R.drawable.ic_launcher, "More", pIntent)
    .addAction(R.drawable.ic_launcher, "And more", pIntent).build();
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    // Hide the notification after its selected
    Notification notification = builder.build();

    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, notification); 
```

也许它会为你工作。如果不是堆栈跟踪可以提供帮助。

# python - Python数学模块对数函数

> ID：14577310
> 
> 赞同：5
> 
> 时间：2013-01-29T06:57:27.880
> 
> 标签：python, math, ieee-754

> **可能重复：**
> [Python 中不准确的对数](https://stackoverflow.com/questions/931995/inaccurate-logarithm-in-python)

为什么`math.log10(x)`和`math.log(x,10)`结果不同？

```
In [1]: from math import *

In [2]: log10(1000)
Out[2]: 3.0

In [3]: log(1000,10)
Out[3]: 2.9999999999999996 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:03:09.570

这是一个已知的错误：[http ://bugs.python.org/issue3724](http://bugs.python.org/issue3724)

似乎 logX(y) 总是比等效的 log(Y, X) 更精确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T07:05:01.990

`math.log10`并且`math.log(x, 10)`使用不同的算法，前者通常更准确。实际上，这是一个已知问题（Issue6765）：[math.log, log10 inconsistency](http://bugs.python.org/issue6765)。

有人可能会这样想：`log10(x)`有一个固定的底，因此可以直接通过一些数学逼近公式（例如泰勒级数）来计算，而`log(x, 10)`来自一个更一般的有两个变量的公式，可以通过`log(x) / log(10)`（至少log(10) 的精度会影响商的精度）。所以很自然，前一种方法更快更准确，考虑到它利用了预先知道的对数基数（即 10），这是合理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T07:56:53.710

正如其他人指出的那样，`log(1000, 10)`在内部计算为`log(1000) / log(10)`。这可以通过经验来验证：

```
In [3]: math.log(1000, 10) == math.log(1000) / math.log(10)
Out[3]: True

In [4]: math.log10(1000) == math.log(1000) / math.log(10)
Out[4]: False 
```

两者的结果都`log(1000)`不能`log(10)`表示为`float`，所以最终的结果也是不精确的。

# php - PHP：是否可以通过 API 进行 Google +1？

> ID：14577317
> 
> 赞同：-2
> 
> 时间：2013-01-29T06:57:55.130
> 
> 标签：php, google-plus, google-plus-one

有没有可用的谷歌API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:57:28.590

为了更简洁地回答这个问题：

*   PHP 客户端库没有 +1 API 调用会 +1 一个 URL，很可能是由于潜在的滥用
*   您只能使用必须使用 JavaScript 呈现[的 +1 按钮触发 +1 操作](https://developers.google.com/+/plugins/+1button/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:47:26.357

[可能这](http://code.google.com/p/google-api-php-client/)只是输入谷歌“google php api”。

或者检查[这个](https://stackoverflow.com/questions/9248204/linking-to-google-plusone-without-embedding-the-button-for-privacy-reasons)

# java - facebook sdk 3.0 照片标签值和键

> ID：14577325
> 
> 赞同：0
> 
> 时间：2013-01-29T06:58:30.613
> 
> 标签：java, android, facebook, facebook-graph-api

```
Bundle params = new Bundle();
String tags = "";
StringBuilder sb = new StringBuilder();
for (int i = 0; i < ischecked.length; i++) {
if (i == 0) {
    sb.append("[");
}
if (ischecked[i]) {
    sb.append("{\"tag_uid\":" + FBFriendlist.get(i).getFBFriendid() + "},");
}
if (i == ischecked.length - 1) {
    sb.replace(sb.length() - 1, sb.length(), "]");
    tags = sb.toString();
}
}
params.putString("tags", tags);

Request requestphoto = new Request(Session.getActiveSession(),"me/photos", params,
                            HttpMethod.POST, new Request.Callback() {

 @Override
 public void onCompleted(Response response) {
     Log.e("id", response.getGraphObject().getProperty("id").toString());
     Intent intent = new Intent(PaintQuitGameScene.this, UserProfileScene.class);
     startActivity(intent);
 finish();
 }
 });

 requestphoto.executeAsync(); 
```

执行时返回`nullpointerexception`。

标签的格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:36:02.657

请参阅此处的照片 API 参考：[https ://developers.facebook.com/docs/reference/api/photo/#tags](https://developers.facebook.com/docs/reference/api/photo/#tags)

# foursquare - Foursquare Realtime API - UserId vs Authentication 关系

> ID：14577326
> 
> 赞同：1
> 
> 时间：2013-01-29T06:58:37.020
> 
> 标签：foursquare

在连接的应用程序集成期间，用户被重定向到应用程序开发人员提供的回调 url。在身份验证的最后一步，写着“将此用户的访问令牌保存在您的数据库中”。. 但问题是您在此身份验证过程中没有获取 userId。

[https://developer.foursquare.com/overview/auth#access](https://developer.foursquare.com/overview/auth#access)

我获得了身份验证码，但无法访问 userId。如何获取身份验证用户的 userId...

问候..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:51:42.003

获得访问令牌后，您可以向[users/self](https://developer.foursquare.com/docs/users/users)端点发出请求，以获取有关与该令牌关联的用户的任何信息，包括用户的`id`.

# jakarta-ee - 为什么在 Java EE 中注解优先于部署描述符？

> ID：14577327
> 
> 赞同：3
> 
> 时间：2013-01-29T06:58:43.263
> 
> 标签：jakarta-ee

使用部署描述符，我可以在部署期间轻松配置 bean 和其他 servlet 信息，而无需打开代码并再次编译。

那么为什么注解取代了部署描述符，注解在spring、JSF 2.0 和hibernate 中也是如此。

谁能告诉我注解相对于部署描述符和其他配置文件（如 beans.xml、spring-config.xml、struts.xml）的主要优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:13:00.223

首先，有一种趋势是用一种（Java）代替一种*双语言编程*（Java + XML）。

有时确实如此——当一切（数据、方法和元数据/注释）都在一个地方时，分析和原型化应用程序很容易。

但也有隐藏的真相。XML 有它的用途，在 Spring 中有一种 XML DSL - 专用的 XML 标记/属性来配置应用程序的特定方面（安全性、MVC、事务配置、AOP）。使用它可以**更**容易地编写和（更重要的是）读取和维护这样的配置。

还有一个，有时被遗忘的方面。使用 XML，您可以对同一类的两个对象进行不同的配置。使用注释，您将它们**放在**类上，因此此类的每个对象通常都是相同的。

# cluster-analysis - 为什么 k-means 不给出全局最小值？

> ID：14577329
> 
> 赞同：5
> 
> 时间：2013-01-29T06:58:47.213
> 
> 标签：cluster-analysis, gradient, data-mining, k-means, convergence

我读到 k-means 算法只收敛到局部最小值而不是全局最小值。为什么是这样？我可以从逻辑上想到初始化如何影响最终的聚类，并且存在次优聚类的可能性，但我没有找到任何可以在数学上证明这一点的东西。

另外，为什么 k-means 是一个迭代过程？我们不能只是将目标函数部分区分为质心，将其等同于零以找到最小化该函数的质心吗？为什么我们必须使用梯度下降来逐步达到最小值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T07:13:24.527

考虑：

```
.   c   .

.   c   . 
```

其中 c 是簇质心。该算法将停止，但更好的解决方案是：

```
.       .
c       c
.       . 
```

关于证明 - 您不需要数学证明来证明某些事情并不总是正确的，您只需要一个反例，如上所述。您可能可以将上述内容转换为数学证明，但这是不必要的，通常需要大量工作；即使在学术界，也可以接受仅仅给出一个反例来反驳某事。

根据定义，k-means 算法是一个迭代过程，它就是它的工作方式。[聚类的问题是 NP-hard](http://en.wikipedia.org/wiki/K-means_clustering)，因此使用精确的算法来计算质心将花费大量时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T08:26:15.487

不要将问题和算法混为一谈。

k 均值问题是找到质心的最小二乘分配。

有多种算法可以找到解决方案。

有一种明显的方法可以找到全局最优值：**枚举所有`k^n`可能的分配**——这*将*产生一个全局最小值，但在指数运行时。

人们更加关注在*更快*的时间内找到近似解决方案。

Lloyd/Forgy 算法是一种 EM 风格的迭代模型细化方法，它保证收敛到*局部*最小值，因为状态数量有限，并且目标函数必须在每一步中减小。该算法通常在`O(n*k*i)`哪里运行`i << n`，但它可能只找到局部最小值。

MacQueens 方法在技术上不是迭代的。这是一种单程、一次一个元素的算法，甚至无法找到 Lloyd 意义上的局部最小值。（但是，您可以在数据集上多次运行它，直到收敛，以获得局部最小值！）如果您执行单次遍历，它的 in `O(n*k)`，对于多次遍历 add `i`。它可能需要也可能不会比 Lloyd 需要更多的通行证。

然后是Hartigan和Wong。我不记得细节了，IIRC 它是 Lloyd/Forgy 的一个聪明、更懒惰的变体，所以也可能在 中`O(n*k*i)`（尽管可能不会`n*k`为以后的迭代重新计算所有距离？）

你也可以做一个随机算法来测试`l`随机分配。它可能根本找不到最小值，而是以“线性”时间运行`O(n*l)`。

哦，您可以尝试不同的随机初始化，以提高找到全局最小值的机会。添加`t`试验次数的因素...

# javascript - Casper - 使用函数回调理解评估

> ID：14577331
> 
> 赞同：3
> 
> 时间：2013-01-29T06:58:50.570
> 
> 标签：javascript, phantomjs

这是一个有点棘手的问题。

我对 javascript 非常熟悉，但是我在一个使用 PhantomJS 和 CasperJS 自动抓取网站的项目中。这些对我来说是全新的主题。

我能够弄清楚如何使用 Casper 和导航、登录页面等，但是它很笨拙，因为一般流程似乎是：

```
casper.start('http://google.fr/');

casper.then(function() {
    this.echo("I'm in your google.");
});

casper.then(function() {
    this.echo('Now, let me write something');
});

casper.then(function() {
    this.echo('Oh well.');
});

casper.run(); 
```

我的问题是我想对网站做各种各样的事情，这取决于从中获得的数据。我不能预先布局导航序列，也不能让它改变。我希望这是有道理的。

为了解决这个问题，我创建了一个带有内置函数的 Javascript Navigator 对象。我的一般概念是：

```
navigator.logIn(function() 
{
  navigator.actionA(parameters, function() 
  {
    if (navigator.data.a == navigator.data.b) {
      navigator.actionB();
    } else {
      navigator.actionC();
    }
  });
}); 
```

并且嵌入在这些函数中的每一个函数中都将是 casper 函数。

这是我的实际代码的缩短版本，并且事情开始变得时髦：

```
var casper = require('casper').create({
    clientScripts:  [ 'jquery.min.js' ],
    onError: function(self, m) {  
        console.log('FATAL:' + m);
        self.exit();              
    },
});

var navigator = new _Navigator();

function _Navigator() { }

_Navigator.prototype.logIn = function(aCallback)
{
  var self = this;

  casper.start('https://website/login.asp', function() 
  {
    if (1 == 1) {
      this.evaluate(function() {
        $("input[name=blah]").val('blahblah');
      });

      // ... A LOT MORE CODE
      aCallback();
    }
  });  
}

_Navigator.prototype.search = function(aDataSet, aCallback)
{
  var self = this;

  console.log('this works');
  casper.then(function(){
    console.log('this works');
  });

  var firstName = 'foobar';

  casper.then(function(){
    console.log('this works');
    this.evaluate(function()
    {
      console.log('this no longer works!!');
      $('input[id=blah]').val(firstName);
      aCallback();
    });
  });
}

navigator.logIn(function() {
  // LOG IN RUNS, AND CALLS BACK SUCCESSFULLY...
  navigator.search({'dataset'}, function() 
  {
    console.log('This never runs');
  });
});

casper.run(); 
```

你会注意到在 navigator.login 函数中，我调用了 casper.start(); 在这种情况下，评估函数可以正常工作，但是我在该 casper.start(); 中执行了一个回调函数；在我的回调中，我调用了下一个函数 navigator.search，我想它在技术上仍在 casper.start 中执行？

当我尝试在第一个回调函数调用的这个新函数中运行 casper.evaluate 时，除了 casper.evaluate 不再起作用之外，一切似乎都表现良好！它似乎吃掉了这个功能，而不是打印任何控制台日志或任何东西。

我已经尝试了一切。我不确定如何正确执行此操作。有人对我做错了什么有任何建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T23:04:04.217

我知道这已经很老了，但是：这里发生的事情是两个问题的结合：

*   `casper.evaluate()`似乎吃掉了当前堆栈中的所有错误 -`onError`不会从`.evaluate()`回调内部运行。

*   `.evaluate`中使用的函数*不是*标准闭包——它们是沙盒的，并且无法访问其范围之外的变量，除非作为显式参数传递给`casper.evaluate`. 因此，在您调用的评估函数中，范围内`aCallback()`没有`aCallback`，并且该函数将失败（静默）并带有`ReferenceError`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T05:10:35.027

casper.evaluate() 是无头浏览器会话的窗口。传递给评估的函数中发生的任何事情都不会出现在本地控制台上。但是，您可以通过设置侦听器记录从评估返回的任何值或打印所有输出：

```
 casper.on('remote.message', function(message) {
    console.log(message);
  }); 
```

# c - setjmp.h 在内核空间中？

> ID：14577332
> 
> 赞同：2
> 
> 时间：2013-01-29T06:58:54.920
> 
> 标签：c, linux-kernel, kernel-module

在内核空间中`setjmp`是否可用？`longjmp`我想在函数之间跳转。

是否可以从内核模块运行 gclib 头文件？如果是，那么如何在内核模块中使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:25:53.103

关于 glibc，答案是否定的。然而，当在内核空间标准 c 库中编程不可用时，内核本身实现了 libc 的一些功能。你可以在 linux/include 下找到相关的头文件。

关于setjmp，我不记得了，不过你可以用lxr(linux cross reference)搜索一下

# php - 为什么我的 PHP 联系表没有发送消息

> ID：14577333
> 
> 赞同：0
> 
> 时间：2013-01-29T06:58:54.637
> 
> 标签：php, email

好的，所以我在我的网站上得到了这个表格，当我测试它并尝试发送一封电子邮件时，它说消息已经发送，但我把它拿到我的电子邮件...

以下是代码：

联系方式.php：

```
<?php
function ValidateEmail($email)
{
    $regex = '/([a-z0-9_.-]+)'. # name
    '@'. # at
    '([a-z0-9.-]+){1,255}'. # domain & possibly subdomains
    '.'. # period
    "([a-z]+){2,10}/i"; # domain extension 
    if($email == '') {
        return false;
    }
    else {
        $eregi = preg_replace($regex, '', $email);
    }
    return empty($eregi) ? true : false;
}

include 'config.php';

error_reporting (E_ALL ^ E_NOTICE);

$post = (!empty($_POST)) ? true : false;

if($post)
{
    $name = stripslashes($_POST['name']);
    $email = $_POST['email'];
    $subject = stripslashes($_POST['subject']);
    $message = stripslashes($_POST['message']);
    $error = '';
    if(!$name)
    {
        $error .= '<p>Please enter your name.</p>';
    }
    if(!$email)
    {
        $error .= '<p>Please enter an e-mail address.</p>';
    }
    if($email && !ValidateEmail($email))
    {
        $error .= '<p>Please enter a valid e-mail address.</p>';
    }
    if(!$subject || strlen($subject) < 2)
    {
        $error .= "<p>Please enter the subject.</p>";
    }
    if(!$message || strlen($message) < 2)
    {
        $error .= "<p>Please enter your message.</p>";
    }
    if(!$error)
    {
        $mail = mail(WEBMASTER_EMAIL, $subject, $message,
             "From: ".$name." <".$email.">\r\n"
            ."Reply-To: ".$email."\r\n"
            ."X-Mailer: PHP/" . phpversion());
        if($mail)
        {
            echo 'OK';
        }
    }
    else
    {
        echo '<div id="notification">'.$error.'</div>';
    }
} 
```

?>

配置.php：

```
<?php
// Change this to your email account
define("WEBMASTER_EMAIL", 'my mail address'); 
```

?>

表单.js：

```
$(document).ready(function(){
$("#contactForm").submit(function(){
    var str = $(this).serialize();
    $.ajax({
        type: "POST",
        url: "contact.php",
        data: str,
        success: function(msg){
            $("#note").ajaxComplete(function(event, request, settings){
                if(msg == 'OK')
                {
                    result = '<div id="notification"><p>Your message has been sent. Thank you!</p></div>';
                    $('#contactForm').each (function(){
                        this.reset();
                    });
                }
                else
                {
                    result = msg;
                }
                $(this).html(result);
            });
        }
    });
    return false;
}); 
```

});

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:42:10.597

更改 var str = $(this).serialize(); 数据：$("#contactForm").serialize(),

# php - 使用 PHP 以 JSON 格式解析 Twitter 搜索结果

> ID：14577339
> 
> 赞同：2
> 
> 时间：2013-01-29T06:59:09.163
> 
> 标签：php, json, api

我可以从 user_timeline 中提取信息：

```
$recentTweets = $connection->get('https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=username&count=1');
for ($i=0; $i<count($recentTweets); $i++){
    echo $recentTweets[$i]->text;
}; 
```

但它似乎不适用于 Twitter 的搜索结果。我认为这与格式不同的事实有关吗？当我使用 print_r 时，我看到了“stdClass Object”，而我在 user_timeline 的结果中没有看到。

```
$cowTweets = $connection->get('https://api.twitter.com/1.1/statuses/search.json?q=cow&count=1');
for ($i=0; $i<count($cowTweets); $i++){
    echo $cowTweets[$i]->text;
}; 
```

如果有帮助，我正在使用 Abraham 的 TwitterOauth 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:48:56.680

```
$cowTweets = $connection->get('https://api.twitter.com/1.1/statuses/search.json?q=cow&count=1'); 
```

试试这个，因为它是一个 JSON 响应：
案例你的`count=1`使用：

```
echo $cowTweets->statuses[0]->text; 
```

案例`count > 1`使用

```
for ( $i = 0; $i < count( $cowTweets->statuses ); $i++ ) {
    echo $cowTweets->statuses[ $i ]->text;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:15:34.643

只需使用这样的东西并遍历您从中获得的 assoc 数组：

```
$array = json_decode(file_get_contents('https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=username&count=1'),true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T10:16:12.997

你可以在这里找到你的答案：[PHP Twitter Hashtag Search 显示解析中没有结果，但数组中存在数据](https://stackoverflow.com/questions/18038526/php-twitter-hashtag-search-showing-no-results-in-parse-but-data-present-in-array)

希望有帮助！

# asp.net - GridView：在单列中绑定来自数据库的多个值

> ID：14577342
> 
> 赞同：0
> 
> 时间：2013-01-29T06:59:15.950
> 
> 标签：asp.net, sql-server

我想要这样的gridview数据：

```
CategoryName    Subcategory Name
--------------------------------
Abc             Abc1,abc2,abc3
Bcs             Bcs1,bcs2
def             Null / No Record 
```

我怎样才能做到这一点？

好的，我想要使用单个表从数据库中获取数据。我有一个表类别，其中有categryid、parentid、name 等字段。当 parentid 为 0 时，它由类别知道，否则所有其他都是子类别。

我在 c# 中使用 asp.net，我想在 gridview 中使用 boundfield 执行此操作。对于我已经完成的类别，但对于子类别我不知道该怎么做。

子类别由其 parentid 标识。在子类别中 parentid =categryid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:07:04.920

假设您的表中的数据是这样的

类别 ID| 家长ID| 姓名 | 1 | 0 | 一个 |, 2 | 1 | B |, 3 | 0 | C |, 4 | 3 | D |

你可以做类似的事情

```
Create Table #ReportTable(Id identity int,CategoryId int,Category varchar(10),SubCategory Varchar(10))

Declare @CountOfRecords int = Select count(categoryid) from categories

Declare @TableIterator int = 1

While  @TableIterator <= @CountOfRecords
Begin

       Declare @ParentId int = (Select ParentId From Categories Where CategoryId=@TableIterator)   

       If @ParentId = 0
       Begin
             Insert Into #ReportTable(CategoryId,Category)
             Select CategoryId,Category  
             From Categories
             Where  CategoryId = @TableIterator
       End  
       Else
       Begin
             Update #ReportTable
             Set    SubCategory = 
             (Select SubCategory From Categories Where  CategoryId = @TableIterator)
             And Id = @ParentId   
       End

        Set @TableIterator = @TableIterator + 1
End 
```

# delphi - Delphi REST Server, Android Client 使用压缩

> ID：14577344
> 
> 赞同：2
> 
> 时间：2013-01-29T06:59:29.110
> 
> 标签：delphi, rest, datasnap, http-compression, delphi-xe3

我们正在构建一个 Delphi REST 服务器，它为原生 Android 应用程序提供相当大的数据块（每个请求 1.5MB，其中有很多）。一切正常，除了这种情况下的数据大小会出现问题，导致我们环境中的传输时间过长（移动数据速率有限）。我尝试在 上添加`ZLibCompression`过滤器`DSHTTPWebDispatcher`，但响应仅以未压缩的文本/html 的形式再次返回。

有什么方法可以强制服务器在调度之前使用作为事件添加的过滤器？

该服务器是使用 Delphi XE3 构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:06:27.193

我已经设法找出在 DataSnap 项目中添加压缩和相关标头更改的位置。

这里的关键是 TWebModule 类。如果使用向导创建新项目，则会构建 TWebModule 类的默认实现，其中包含 BeforeDispatch、AfterDispatch 等事件属性。这里的命名是指将传入请求分派到将处理它的位置的操作。因此，BeforeDispatch 在请求到达时发生，一些处理发生在服务器上，AfterDispatch 在响应发送回调用者之前触发。

因此，如果要在事后修改构造的响应，则 AfterDispatch 是正确的事件。这可以包括对内容和标题的更改。

在 AfterDispatch 事件中：

```
procedure TWebModule1.WebModuleAfterDispatch(
  Sender: TObject;
  Request: TWebRequest; 
  Response: TWebResponse;
  var Handled: Boolean);
var

srcbuf, destbuf : TBytes;
str : string;

begin
  str := Response.Content;

  //prepare byte array
  srcbuf := BytesOf(str);

  //compress to buff (System.ZLib)
  ZCompress(srcbuf, destbuf, zcMax);

  //prepare responsestream and set content encoding and type
  Response.Content := '';
  Response.ContentStream := TMemoryStream.Create;
  Response.ContentEncoding := 'deflate';
  Response.ContentType := 'application/json';

  //current browser implementations incorrectly handles the first 2 bytes 
  //of a ZLib compressed stream, remove them
  Response.ContentStream.Write(@(destbuf[2]),length(destbuf)-2);
  Response.ContentLength := (length(destbuf))-2;
end; 
```

不是很花哨，可以根据发回的内容启用/禁用压缩，但对于我们的实现，我们保持简单。

这适用于 Fiddler 和可以处理 deflate 的浏览器 100%。

# c# - 长时间运行的进程暂停

> ID：14577345
> 
> 赞同：11
> 
> 时间：2013-01-29T06:59:33.177
> 
> 标签：c#, .net, windows, multithreading, garbage-collection

我在 Visual Studio 2010 IDE 的 Windows Server GoDaddy VPS 上以调试模式 (F5) 运行了一个 .NET 2.0 控制台应用程序。

应用程序会定期冻结（好像垃圾收集器已暂时暂停执行），但在极少数情况下它永远不会恢复执行！

几个月来我一直在诊断这个问题，而且我的想法已经不多了。

*   应用程序尽可能快地运行（它使用 100% 的 CPU 使用率），但以正常优先级运行。它也是多线程的。
*   当应用程序冻结时，我可以使用 VS2010 IDE 通过暂停/取消暂停进程来解冻它（因为它正在调试器中运行）。
*   当我暂停冻结进程时，上次执行的位置似乎无关紧要。
*   冻结时，CPU 使用率仍为 100%。
*   解冻后，它运行良好，直到下一次冻结。
*   服务器可能会在两次冻结之间运行 70 天，也可能只运行 24 小时。
*   内存使用保持相对恒定；没有任何形式的内存泄漏的证据。

任何人都有任何提示来诊断到底发生了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T13:47:03.940

> 它也是多线程的

这是问题的关键部分。您正在描述一种非常典型的多线程程序可能行为不端的方式。它遭受死锁，这是线程的典型问题之一。

它可以从信息进一步缩小，显然你的进程没有完全冻结，因为它仍然消耗 100% cpu。您的代码中可能有一个热等待循环，一个在另一个线程上旋转的循环发出一个事件信号。这可能会导致一种特别讨厌的死锁，即[**活锁**](http://en.wikipedia.org/wiki/Live-lock#Livelock)。活锁对时间非常敏感，代码运行顺序的微小变化可能会将其撞到活锁。并再次退出。

活锁非常难以调试，因为尝试这样做会使条件消失。就像附加调试器或破坏代码一样，足以改变线程时序并将其排除在条件之外。或者在代码中添加日志语句，这是调试线程问题的常用策略。由于日志记录开销而改变了时间，这反过来又可以使活锁完全消失。

讨厌的东西，不可能从像 SO 这样的网站获得解决此类问题的帮助，因为它非常依赖于代码。通常需要对代码进行彻底的审查才能找到原因。并且经常进行剧烈的重写。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:45:17.617

应用程序是否有“死锁恢复/预防”代码？也就是说，用超时锁定，然后再试一次，也许是在睡觉后？

应用程序是否检查错误代码（返回值或异常）并在任何地方出现错误时反复重试？

请注意，这种循环也可以通过事件循环发生，您的代码仅在某些事件处理程序中。它不必是您自己的代码中的实际循环。尽管情况可能并非如此，但如果应用程序被冻结，则表明事件循环被阻塞。

如果您有上述情况，您可以尝试通过将超时和睡眠设为随机间隔来*缓解*问题，以及在错误可能产生死锁/活锁的情况下添加短随机持续时间的睡眠。如果这样的循环对性能敏感，请添加一个计数器并仅开始随机睡眠，可能会在一些失败的重试次数后增加间隔。并确保您添加的任何睡眠都不会在某些东西被锁定时进入睡眠状态。

如果这种情况会更频繁地发生，您还可以使用它来平分您的代码并查明哪些循环（因为 100% 的 CPU 使用意味着，一些非常繁忙的循环正在旋转）负责。但是从问题的罕见性来看，如果问题在实践中消失，我认为你会很高兴；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:12:21.690

好吧，这里有三件事......

首先，开始使用.NET的服务器GC：http: [//msdn.microsoft.com/en-us/library/ms229357.aspx](http://msdn.microsoft.com/en-us/library/ms229357.aspx)。这可能会使您的应用程序不被阻塞。

其次，如果你可以在你的虚拟机上做到这一点：检查更新。这似乎总是很明显，但我见过很多情况下简单的 Windows 更新可以解决奇怪的问题。

第三，我想说明一个对象的生命周期，这可能是这里的问题之一。这是一个很长的故事，所以请耐心等待。

对象的生命周期基本上是构造-垃圾收集-终结。所有三个进程都在一个单独的线程中运行。GC 将数据传递给具有调用“析构函数”的队列的终结线程。

那么，如果你的终结器做了一些奇怪的事情，你可以说：

```
public class FinalizerObject
{
    public FinalizerObject(int n)
    {
        Console.WriteLine("Constructed {0}", n);
        this.n = n;
    }

    private int n;

    ~FinalizerObject()
    {
        while (true) { Console.WriteLine("Finalizing {0}...", n); System.Threading.Thread.Sleep(1000); }
    }
} 
```

因为终结器在处理队列的单独线程中运行，所以只有一个终结器做一些愚蠢的事情对您的应用程序来说是一个严重的问题。您可以通过使用上述类 2 次来看到这一点：

```
 static void Main(string[] args)
    {
        SomeMethod();
        GC.Collect(GC.MaxGeneration);
        GC.WaitForFullGCComplete();
        Console.WriteLine("All done.");
        Console.ReadLine();
    }

    static void SomeMethod()
    {
        var obj2 = new FinalizerObject(1);
        var obj3 = new FinalizerObject(2);
    } 
```

请注意，您最终是如何导致少量内存泄漏的，并且如果您删除 Thread.Sleep 并同时使用 100% CPU 进程 - 即使您的主线程仍在响应。因为它们是不同的线程，所以从这里开始很容易阻塞整个进程——例如通过使用锁：

```
 static void Main(string[] args)
    {
        SomeMethod();
        GC.Collect(GC.MaxGeneration);
        GC.WaitForFullGCComplete();
        Thread.Sleep(1000);
        lock (lockObject)
        {
            Console.WriteLine("All done.");
        }
        Console.ReadLine();
    }

    static object lockObject = new Program();

    static void SomeMethod()
    {
        var obj2 = new FinalizerObject(1, lockObject);
        var obj3 = new FinalizerObject(2, lockObject);
    }

    [...]

    ~FinalizerObject()
    {
        lock (lockObject) { while (true) { Console.WriteLine("Finalizing {0}...", n); System.Threading.Thread.Sleep(1000); } }
    } 
```

所以我可以看到你在想“你是认真的吗？”；事实是，您可能正在做这样的事情，甚至没有意识到这一点。这就是“产量”出现的地方：

'yield' 中的 IEnumerable 实际上是 IDisposable，因此实现了 IDisposable 模式。将你的“yield”实现与锁结合起来，忘记通过用“MoveNext”等枚举它来调用 IDisposable，你会得到一些反映上述情况的非常讨厌的行为。特别是因为终结器是由一个单独的线程（！）从终结队列中调用的。将它与无限循环或线程不安全代码结合起来，你会得到一些非常讨厌的意外行为，这些行为会在特殊情况下触发（当内存耗尽时，或者当 GC 事情它应该做的事情时）。

换句话说：我会检查你的一次性用品和终结器，并对它们非常挑剔。检查 'yield' 是否有隐式终结器，并确保从同一个线程调用 IDisposable。您要警惕的一些事情的例子：

```
 try
    {
        for (int i = 0; i < 10; ++i)
        {
            yield return "foo";
        }
    }
    finally
    {
        // Called by IDisposable
    } 
```

和

```
 lock (myLock) // 'lock' and 'using' also trigger IDisposable
    {
        yield return "foo";
    } 
```

# c# - 使用 Async 和 Await 转换普通的 Http Post Web 请求

> ID：14577346
> 
> 赞同：23
> 
> 时间：2013-01-29T06:59:38.453
> 
> 标签：c#, windows-phone-8, async-await, c#-5.0

如何使用 Async / Await 模式转换我的传统 HttpWebRequest“POST”调用，在这里我附上我当前的代码，任何人请帮助我使用 Windows phone 8 的 Async / Await 模式转换此代码。

```
public void GetEnvironmentVariables(Action<Credentials> getResultCallback, Action<Exception> getErrorCallback)
{
    CredentialsCallback = getResultCallback;
    ErrorCallback = getErrorCallback;
    var uri = new Uri(BaseUri);
    var request = (HttpWebRequest)WebRequest.Create(uri);
    request.Method = "POST";
    request.ContentType = "application/json";
    var jsonObject = new JObject
    {
        new JProperty("apiKey",_api),
        new JProperty("affiliateId",_affid),
    };
    var serializedResult = JsonConvert.SerializeObject(jsonObject);
    byte[] requestBody = Encoding.UTF8.GetBytes(serializedResult);

    request.BeginGetRequestStream(GetRequestStreamCallback, new object[] { request, requestBody });

}

private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    var request = (HttpWebRequest)((object[])asynchronousResult.AsyncState)[0];
    using (var postStream = request.EndGetRequestStream(asynchronousResult))
    {
        var byteArray = (byte[])((object[])asynchronousResult.AsyncState)[1];

        // Write to the request stream.
        postStream.Write(byteArray, 0, byteArray.Length);

    }
    request.BeginGetResponse(GetResponseCallback, request);
}

private void GetResponseCallback(IAsyncResult asynchronousResult)
{
    var request = (HttpWebRequest)asynchronousResult.AsyncState;
    try
    {
        var response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        if (response != null)
        {
            var reader = new StreamReader(response.GetResponseStream());
            string responseString = reader.ReadToEnd();
            Credentails = JsonConvert.DeserializeObject<Credentials>(responseString);
            if (Credentails != null && string.IsNullOrEmpty(Credentails.Err))
                CredentialsCallback(Credentails);
            else
            {
                if (Credentails != null)
                    ErrorCallback(new Exception(string.Format("Error Code : {0}", StorageCredentails.Err)));
            }
        }
    }
    catch (WebException we)
    {
            var reader = new StreamReader(we.Response.GetResponseStream());
            string responseString = reader.ReadToEnd();
            Debug.WriteLine(responseString);
            ErrorCallback(we);

    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T15:45:48.077

由于 Windows Phone 8 似乎没有提供您需要的 TAP 方法，`GetRequestStreamAsync`因此首先要做的是编写一个小包装器来为自己提供它们：

```
public static class WebRequestAsyncExtensions
{
    public static Task<Stream> GetRequestStreamAsync(this WebRequest request)
    {
        return Task.Factory.FromAsync<Stream>(
            request.BeginGetRequestStream, request.EndGetRequestStream, null);
    }

    public static Task<WebResponse> GetResponseAsync(this WebRequest request)
    {
        return Task.Factory.FromAsync<WebResponse>(
            request.BeginGetResponse, request.EndGetResponse, null);
    }
} 
```

请注意使用`Task.Factory.FromAsync`- 这是在`await`基于 APM 的异步 API（例如`WebRequest`. 这比按照其他人的建议使用要有效得多`Task.Factory.StartNew`，因为这会启动一个新线程，而这不需要。

有了这个，您现在可以像在这些 TAP 样式方法可用的平台（例如 Windows 8 商店应用程序、桌面应用程序等）上一样编写代码：

```
public async Task GetEnvironmentVariablesAsync(Action<Credentials> getResultCallback, Action<Exception> getErrorCallback)
{
    CredentialsCallback = getResultCallback;
    ErrorCallback = getErrorCallback;
    var uri = new Uri(BaseUri);
    var request = (HttpWebRequest) WebRequest.Create(uri);
    request.Method = "POST";
    request.ContentType = "application/json";
    var jsonObject = new JObject
    {
        new JProperty("apiKey",_api),
        new JProperty("affiliateId",_affid),
    };
    var serializedResult = JsonConvert.SerializeObject(jsonObject);
    byte[] requestBody = Encoding.UTF8.GetBytes(serializedResult);

    // ASYNC: using awaitable wrapper to get request stream
    using (var postStream = await request.GetRequestStreamAsync())
    {
        // Write to the request stream.
        // ASYNC: writing to the POST stream can be slow
        await postStream.WriteAsync(requestBody, 0, requestBody.Length);
    }

    try
    {
        // ASYNC: using awaitable wrapper to get response
        var response = (HttpWebResponse) await request.GetResponseAsync();
        if (response != null)
        {
            var reader = new StreamReader(response.GetResponseStream());
            // ASYNC: using StreamReader's async method to read to end, in case
            // the stream i slarge.
            string responseString = await reader.ReadToEndAsync();
            Credentails = JsonConvert.DeserializeObject<Credentials>(responseString);
            if (Credentails != null && string.IsNullOrEmpty(Credentails.Err))
                CredentialsCallback(Credentails);
            else
            {
                if (Credentails != null)
                    ErrorCallback(new Exception(string.Format("Error Code : {0}", StorageCredentails.Err)));
            }
        }
    }
    catch (WebException we)
    {
        var reader = new StreamReader(we.Response.GetResponseStream());
        string responseString = reader.ReadToEnd();
        Debug.WriteLine(responseString);
        ErrorCallback(we);

    }
} 
```

请注意带有注释的四行`// ASYNC:`- 这些显示了我所做的更改。我已将您的方法折叠为一个，因为这是 a) 一旦您使用`async`并且`await`b) 比尝试使用状态参数将事物从一种方法传递到下一个方法容易得多。

请注意，其中的第二个和第四个实际上使您以前同步执行的一些事情异步：将数据写入请求流，并从响应流中读取数据。对于一个小请求，这可能无关紧要，但如果正在传输大量数据，同步调用`Write`或`ReadToEnd`可能会阻塞。幸运的是，尽管 Windows Phone 8 似乎缺少 on 的 TAP 方法`WebRequest`，但它确实提供了这些方法`Stream`，`StreamReader`因此无需编写任何扩展方法即可工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:17:35.460

我是社区的新手，所以这是我的第一篇文章。在这种情况下，您可以使用通用任务返回任何类型。这在过去对我来说效果很好。

**服务器端**

```
public class MyController : ApiController
{
    public Task<string> PostAsync()
    {
        return Task.Factory.StartNew(() =>
        {
            return "populate me with any type and data, but change the type in the response signature.";
        });
    }
} 
```

**客户端**

```
public class HomeController : Controller
{
    public Task<ViewResult> Index()
    {
        return Task.Factory.StartNew(() =>
        {
            var model = "use a provider, get some data, or something";
            return View(model);
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:50:07.310

这应该做的工作：

```
 public async void GetEnvironmentVariables(Action<Credentials> getResultCallback, Action<Exception> getErrorCallback) {
        CredentialsCallback = getResultCallback;
        ErrorCallback = getErrorCallback;
        var uri = new Uri(BaseUri);
        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";
        request.ContentType = "application/json";

        var jsonObject = new JObject {
            new JProperty("apiKey", _api),
            new JProperty("affiliateId", _affid),
        };

        var serializedResult = JsonConvert.SerializeObject(jsonObject);
        var requestBody = Encoding.UTF8.GetBytes(serializedResult);

        var requestStream = request.GetRequestStream();
        requestStream.Write(requestBody, 0, requestBody.Length);

        await GetResponse(request);
    }

    private async Task GetResponse(WebRequest request) {
        Stream resStream = null;

        try {
            var response = await request.GetResponseAsync();

            if (response == null) {
                return;
            }

            resStream = response.GetResponseStream();
            if (resStream == null) {
                return;
            }

            var reader = new StreamReader(resStream);
            var responseString = await reader.ReadToEndAsync();
            Credentails = JsonConvert.DeserializeObject<Credentials>(responseString);
            if (Credentails != null && string.IsNullOrEmpty(Credentails.Err)) {
                CredentialsCallback(Credentails);
            }
            else {
                if (Credentails != null) {
                    ErrorCallback(new Exception(string.Format("Error Code : {0}", StorageCredentails.Err)));
                }
            }
        }
        catch (WebException we) {
            if (resStream != null) {
                var reader = new StreamReader(resStream);
                var responseString = reader.ReadToEnd();
                Debug.WriteLine(responseString);
            }
            ErrorCallback(we);
        }
    } 
```

# ios - iOS 服务器驱动的 UI 示例/教程

> ID：14577355
> 
> 赞同：2
> 
> 时间：2013-01-29T07:00:37.513
> 
> 标签：ios, core-data, dynamic, user-interface

我已经看过`Apples's` `WWDC 2010`视频了`Building a Server-driven User Experience`。

这确实是一个很棒的概念，但我需要一个简单的示例或教程才能开始。

我已经搜索了几个小时以从或基于`Google`iOS 动态 UI 生成，但到目前为止没有发现任何有用的东西。`XML``JSON``web services`

更多信息：我正在开发一个 iPhone 应用程序，我在其中向用户呈现一个输入表单，例如带有不同类型问题的问卷调查，并使用不同的 UI 控件来回答，例如文本字段、开关、图像、音频、视频等。

现在我对不同的用户有不同的问卷，我想动态生成它们并将完成的表格存储在`Core Data`.

任何解决此问题的帮助或指导将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:05:00.580

你看过 heroku 的 Core Data Buildpack 视频吗？

[http://mobile.heroku.com/](http://mobile.heroku.com/)

# java - 如何检查列表是否 一片空白？

> ID：14577357
> 
> 赞同：4
> 
> 时间：2013-01-29T07:00:46.700
> 
> 标签：java, list

我有一个从我的服务器获取列表的列表。该列表将保存服务器在数据库 ex 中找到的任何内容。

```
List<OBJ> lstObj = new Arraylist<OBJ>;

Service.getOBJ(new AsyncCallback<List<OBJ>>(){
    @Override
    public void onFailure(Throwable caught) {
        caught.printStackTrace();
    }

    @Override
    public void onSuccess(List<OBJ> result) {
        //line to check if result is null
    }
}); 
```

我努力了

```
if(result==null){
} 
```

也试过

```
if(result.isempty(){
} 
```

但它没有用。如果服务器未从数据库中找到任何记录，则该列表将为空。我需要做的就是检查列表是否为空。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-29T07:02:13.103

检查列表是否为*空*和检查是否`result`为空是非常不同的事情。

```
if (result == null) 
```

将查看的值`result`是否为空引用，即它不引用*任何*列表。

```
if (result.isEmpty()) 
```

将查看的值`result`是否是对空列表的引用...该*列表*存在，只是没有任何元素。

当然，如果您不知道是否`result`可以为 null*或*为空，请使用：

```
if (result == null || result.isEmpty()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T07:03:23.410

检查结果列表中的元素数量：

```
if (0==result.size()) {

    // Your code
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T07:02:58.200

你会这样做：

```
if (test != null && !test.isEmpty()) { } 
```

这将检查 null 和空，这意味着如果它不为空且不为空，则进行处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T07:16:20.790

如果你还没有验证你的服务器，那么你显然是这个编程的新手，所以我试图猜测你的服务器可能会发生什么。根据您的“”对象是什么，您可以拥有以不同方式表示无意义数据的有效对象。例如，您可能拥有带有各种空格的 String 对象。

这在使用 PHP 和 JSP 提供答案的服务器上经常发生，其中页面是使用各种包含机制组装的，并且它们之间存在空白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:53:19.060

下面应该为您的代码做。如果你想要一个否定逻辑，只需相应地修改。正如其他人所建议的那样，CollectionUtils 仅提供删除此类空检查 LOC 的实用程序方法。

```
result == null || result.isEmpty() 
```

希望这可以帮助！

# android - API lvl 10 和 ScrollView 的 GC 问题

> ID：14577365
> 
> 赞同：0
> 
> 时间：2013-01-29T07:01:30.240
> 
> 标签：android, performance, garbage-collection, android-animation

我遇到了奇怪的 GC 问题，有 2 个布局堆叠，都包含`ScrollView`并且它们的可见性是动画的，有时只有一个可见。运行动画后先隐藏后显示，再隐藏后显示。然后滚动第一个`ScrollView`GC 会发疯：

GC_EXTERNAL_ALLOC 释放 1K，56% 释放 3340K/7559K，外部 13894K/14442K，暂停 19ms

这种情况一直在发生，因此滚动变得如此滞后。

仅在 API 级别 10 模拟器和 2.3.5 设备中可见。有人见过这种行为吗？

谢谢。

![在此处输入图像描述](../Images/a978b9693343f5c465d70f63557d0df9.png)

上图是为了演示我的设置。5 个`Fragment`堆叠，4 个在开始时可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:55:13.973

为我的视图设置禁用动画缓存`Fragment`解决了这个问题，不知道为什么，但很可能是平台 2.3.x 错误。

# c# - 如何在asp.net中传递查询字符串参数？

> ID：14577366
> 
> 赞同：1
> 
> 时间：2013-01-29T07:01:32.287
> 
> 标签：c#, azure, acs

我正在使用访问控制服务 (ACS)。我使用以下代码获取了我为我的应用程序设置的所有身份提供者 (ip)：

```
 public ActionResult IdentityProviders(string serviceNamespace, string appId)
    {
        string idpsJsonEndpoint = string.Format(Global.IdentityProviderJsonEndpoint, serviceNamespace, appId);
        var client = new WebClient();
        var data = client.DownloadData(idpsJsonEndpoint);

        return Content(Encoding.UTF8.GetString(data), "application/json");
    } 
```

当用户点击登录链接时，上面的代码使用 ajax 调用并获取 ips 并将它们显示在 jquery-ui 对话框中。当用户单击任何一个 ips 登录时，浏览器将重定向到选定的 ip 登录页面。成功登录后，控件返回到我设置为 returnUrl 的控件。到目前为止，一切都很好。

现在我要做的是将一些值传递给身份提供者（ip）登录页面，并希望在我的 returnUrl 控制器中取回这些值。为此，我搜索并知道有一个查询字符串参数`wctx`，我们可以设置并获取返回 url 的值。但我不知道该怎么做。谁能指导我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:24:39.670

这相对（相当）容易。

您列出 IdP 的 URL 如下所示：

`https://[your_namespace].accesscontrol.windows.net:443/v2/metadata/IdentityProviders.js?protocol=wsfederation&realm=[your_realm]&reply_to=[configured_return_url_for_your_rp]&context=&request_id=&version=1.0&callback=`

这是对身份提供者列表的最完整请求。您可能会遗漏一些变量（例如`context`、 或`reply_to`），但我展示的是完整的请求。

所以现在你有两个选择：

*   包括你自己的`reply_to`参数。它必须与配置的领域一致。因此，如果您的领域是`https://www.mygreatapp.com/`，您的默认返回 URL 可能类似于`https://www.mygreatapp.com/returnUrl/`（如果您处理 ACS 响应的控制器是`returnUrlController`。现在，您可以安全地将其更改`reply_to`为`https://www.mygreatapp.com/returnUrl/?foo=bar`，只需确保您对查询字符串进行 URL 编码。

*   使用`context`参数。它使用起来更安全，我建议使用它。现在，您用于获取 IdP 列表的 URL 将类似于：

    `https://[your_namespace].accesscontrol.windows.net:443/v2/metadata/IdentityProviders.js?protocol=wsfederation&realm=[your_realm]&reply_to=[configured_return_url_for_your_rp]&context=[your_custom_string_value_which_you_may_even_encrypt]&request_id=&version=1.0&callback=`

请注意，现在`context`IdP 列表请求中存在值 ([your_custom_string_value_which_you_may_even_encrypt])。在您的 returnUrl 处理程序控制器中，您可以使用类似于（或等于）以下代码来检查它：

```
if (ControllerContext.HttpContext.Request.Form["wresult"] != null)
            {
                // This is a response from the ACS - you can further inspect the message if you will
                SignInResponseMessage message =
                    WSFederationMessage.CreateFromNameValueCollection(
                    WSFederationMessage.GetBaseUrl(ControllerContext.HttpContext.Request.Url),
                    ControllerContext.HttpContext.Request.Form)
                    as SignInResponseMessage;

                if (!string.IsNullOrWhiteSpace(message.Context))
                {
                    // do whatever you want with the context value
                }
            } 
```

`SignInResponse`在处理来自 ACS的信息时，您可能希望执行任何/更多附加检查。

# java - 呈现特定代码时出现 Java 虚拟机启动器错误

> ID：14577371
> 
> 赞同：-3
> 
> 时间：2013-01-29T07:01:52.037
> 
> 标签：java, jar, intellij-idea

我有一个从 XML 文件中读取参数的代码。在调试器中一切正常，但是在我构建 JAR 文件并运行它之后 - 我得到以下窗口

## Java 虚拟机启动器

## 发生了 Java 异常。

但如果我评论这段代码：

```
else if (settingName.equals("log_level")) {
    String value = element.getAttribute("value");
    if (value.equals("full")) {
        modelLogLevel = EnLogDetails.LOG_FULL;
    } else if (value.equals("apdu")) {
        modelLogLevel = EnLogDetails.LOG_APDU;
    } else if (value.equals("none")) {
        modelLogLevel = EnLogDetails.LOG_NONE;
    } else {
        throw new InvalidArgumentException(new String[]{"log_level"});
    }
} 
```

并再次重建 JAR - 它工作正常。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:07:49.663

您完全没有提供任何相关信息，例如实际异常或您正在使用的命令行，但显然您提供的 log_level 参数与任何这些测试都不匹配，因此您抛出 IllegalArgumentException 这是终止 main() 并因此终止启动器。如果是这样，那对我来说完全是个谜，为什么你需要来 StackOverflow 来向你解释你自己的代码。

否则对 EnLogDetails 的引用会以某种方式失败，这会在您未提供的异常中显示。

# android - android微调器中的问题

> ID：14577372
> 
> 赞同：0
> 
> 时间：2013-01-29T07:01:53.957
> 
> 标签：android, spinner, android-spinner

我想根据从微调器中选择的值来显示消息。所以我使用了以下代码。

```
sp=(Spinner)findViewById(R.id.spinner1);
        String ar[]={"hello","abc"};
        ArrayAdapter<String> adapt=new ArrayAdapter<String>(SpinnerEampleActivity.this, android.R.layout.simple_spinner_dropdown_item,ar);
        sp.setAdapter(adapt);
        sp.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) 
        {
            if(arg2==0)
            {
            AlertDialog.Builder alert=new AlertDialog.Builder(SpinnerEampleActivity.this);
            alert.setMessage("hello");
            alert.show();
            }
            else
            {
                AlertDialog.Builder alert=new AlertDialog.Builder(SpinnerEampleActivity.this);
                alert.setMessage("abc");
                alert.show();
            }

        } 
```

但是如果我从微调器中选择已经选择的值，我不会收到任何消息。有什么可以帮助我解决问题的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:48:43.080

当您再次单击当前选定的项目时，它不会触发任何事件。所以你无法捕捉`setOnItemSelectedListener`到微调器的响应。

您需要创建自定义微调器适配器来处理已选择项目的点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:14:45.777

我尝试了以下方法来获取自定义微调器

```
ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item, selects)
                    {
                       @Override
                       public View getDropDownView(int position, View convertView, ViewGroup parent)
                       {
                        View v = convertView;
                         if (v == null) 
                           {
                             Context mContext = this.getContext();
                             LayoutInflater vi = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                              v = vi.inflate(R.layout.spinner_item, null);
                           } 
                         final TextView tv=(TextView) v.findViewById(R.id.custopspin);
                         int pos=position;
                         if(pos==0)
                         {
                             tv.setText("hello");
//                           sy
                         }
                         else if(pos==1)
                         {
                             tv.setText("abc");
                         }
                         else
                         {
                             tv.setText("hi");
                         }
                         tv.setTextColor(Color.RED);
                         tv.setClickable(true);
                         tv.setOnClickListener(new OnClickListener() 
                         {

                        @Override
                        public void onClick(View arg0) 
                        {
                            if(tv.getText().toString().equals("hello"))
                            {
                                                                    }
                            else if(tv.getText().toString().equals("hi"))
                            {

                            }
                            else
                            {
                            }
                        }
                     });    
                     return v;  
                    }              
                 };     
        timeslot.setAdapter(spinnerAdapter); 
```

正如上面评论中所说，选择该选项后没有隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T07:16:33.830

```
 sp=(Spinner)findViewById(R.id.spinner1);
    String ar[]={"hello","abc"};
    ArrayAdapter<String> adapt=new ArrayAdapter<String>(SpinnerEampleActivity.this, android.R.layout.simple_spinner_dropdown_item,ar);
    sp.setAdapter(adapt);
    sp.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int position, long arg3) 
    {
 AlertDialog.Builder alert=new AlertDialog.Builder(SpinnerEampleActivity.this);
        alert.setMessage(ar[position]);
        alert.show();

    }
       @Override
        public void onNothingSelected(AdapterView<?> adapterView) {
        }
    }); 
```

就这样.........

# php - 使用 PHP 和 html5 上传的最大文件大小？

> ID：14577383
> 
> 赞同：0
> 
> 时间：2013-01-29T07:02:51.273
> 
> 标签：php, html, upload

关于使用 php 和 html5 上传一个文件的文件大小有多大的想法？

和

有没有关于好的组件或示例的建议来做到这一点？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:08:55.623

**PHP 在上传大文件时非常糟糕，特别是因为您必须使用高于文件大小的内存限制。同样，32 位系统上的 Apache 本身往往有 2gig 文件限制，因此即使 PHP 可以处理上传，Apache 也会阻塞。**

您需要在 php.ini 中设置 upload_max_filesize 和 post_max_size 的值：

; 上传文件的最大允许大小。upload_max_filesize = 40M

; 必须大于等于upload_max_filesize post_max_size = 40M

如果你不能改变你的 php.ini，那你就不走运了。您不能在运行时更改这些值；当执行到达您对 ini_set 的调用时，上传大于 php.ini 中指定值的文件将失败。

请参阅[核心 php.ini 指令的说明](http://php.net/manual/en/ini.core.php)。

上传文件的最大大小为整数。使用整数时，值以字节为单位

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T07:28:27.307

在服务器端，最大上传大小受 php [post_max_size](http://php.net/manual/en/ini.core.php#ini.post-max-size)和[upload_max_filezize](http://php.net/manual/en/ini.core.php#ini.upload-max-filesize)限制。

此外，您的网络服务器可以限制您的帖子正文的最大大小。例如，默认为Apache [limitrequestbody](http://httpd.apache.org/docs/2.0/mod/core.html#limitrequestbody)或默认为`0 = unlimited`nginx [client_max_body_size](http://wiki.nginx.org/HttpCoreModule#client_max_body_size)`2MB`

如果您打算使用 html5 上传大文件，您可能需要查看所有现代浏览器都支持的[file.slice](http://www.w3.org/TR/FileAPI/#)

> 文件 API 中对 .slice 的支持 Firefox 支持 Blob API 和随附的 .slice API。这可以帮助那些想要从 JavaScript 处理大型 File 对象的一部分而不必将整个文件加载到内存中的人。可靠上传大文件的人可以使用一些服务器和 JS 代码将大文件拆分为多个部分并上传块，包括重试失败的部分，甚至并行上传多个部分。

使用它，您可以分块上传巨型文件并再次在服务器端合并它们。

**编辑**

发现这篇很棒的文章解释了通过 xhr 流式传输的 html5 上传

[http://www.webiny.com/blog/2012/05/07/webiny-file-upload-with-html5-and-ajax-using-php-streams/](http://www.webiny.com/blog/2012/05/07/webiny-file-upload-with-html5-and-ajax-using-php-streams/)

此过程的内存占用非常低，您可能仍会遇到网络服务器和 php 上传限制，因为这是通过单个请求完成的。该代码应该让您了解整个技术是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:14:38.620

最大文件大小值在 phi.ini 文件中定义。

在 php.ini 中搜索

上传文件的最大允许大小。

上传最大文件大小 = 32M

# android - Android：Bitmap.extractAlpha() 的对立面是什么

> ID：14577384
> 
> 赞同：2
> 
> 时间：2013-01-29T07:02:52.317
> 
> 标签：android, bitmap

我需要做一些与 Bitmap.extractAlpha 完全相反的事情：将 alpha 贴图（从文件加载）应用到 RGB 位图（也从文件加载）。

是的！就像 iOS 中的“CGImageCreateWithMask”一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:55:56.877

Square 博客上周有一个关于此的教程：http: [//corner.squareup.com/2013/01/transparent-jpegs.html](http://corner.squareup.com/2013/01/transparent-jpegs.html) :)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:01:57.433

我不知道究竟是做什么`CGImageCreateWithMask`的，但是如果您想要另一张图片作为您的 Alpha 通道，您可以按照[此问题](https://stackoverflow.com/questions/4560265/android-edit-bitmap-channels)`Bitmap`中的描述创建一个，它结合了四个图像。我现在还没有尝试过，但我认为对于两种颜色，它看起来像这样：

```
Paint colorPaint = new Paint();
redPaint.setShader(new BitmapShader(redChanImg, TileMode.CLAMP, TileMode.CLAMP));

Paint alphaPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
alphaPaint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));

c.setBitmap(resultImage);
c.drawRect(0, 0, width, height, colorPaint);
c.drawBitmap(alphaImg, 0, 0, alphaPaint);

// save result somewhere 
```

您也可以始终只使用位图的原始像素数据`Bitmap.getPixels`

# c# - Ajaxtoolkit ConfirmButtonExtender 无法触发

> ID：14577387
> 
> 赞同：1
> 
> 时间：2013-01-29T07:03:02.193
> 
> 标签：c#, asp.net, .net

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <ContentTemplate>
            <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
            Text="Button" PostBackUrl="~/testing2.aspx" />

            <asp:ConfirmButtonExtender ID="ConfirmButtonExtender1" runat="server"
            targetControlID="Button1" 
                ConfirmText="Are you sure you want to click this button" 
                ConfirmOnFormSubmit="True" /> 

            <asp:TextBox ID="TextBox1" runat="server" Height="25px"></asp:TextBox>
            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
        </ContentTemplate> 
```

我的 ConfirmButtonExtender 只是不工作。该网站不会为我弹出一个框。我想念什么吗？我的代码在上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:32:17.190

**我认为您缺少 OnClientCancel 属性。**查看下面的工作示例。

* * *

**确保您的页面使用正确的母版页。这是一个工作代码。**

```
asp:Content ContentPlaceHolderID="SampleContent" Runat="Server">
<script type='text/javascript'>
    function cancelClick() {
        var label = $get('ctl00_SampleContent_Label1');
        label.innerHTML = 'You hit cancel in the Confirm dialog on ' + (new Date()).localeFormat("T") + '.';
    }
</script>
    <ajaxToolkit:ToolkitScriptManager runat="Server" EnablePartialRendering="true" ID="ScriptManager1" />
    <div class="demoarea">
        <div class="demoheading">ConfirmButton Demonstration</div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

                    <asp:LinkButton ID="LinkButton" runat="server" OnClick="Button_Click">Click Me</asp:LinkButton>
                    <ajaxToolkit:ConfirmButtonExtender ID="ConfirmButtonExtender1" runat="server" 
                        TargetControlID="LinkButton"
                        ConfirmText="Are you sure you want to click the LinkButton?" 
                        OnClientCancel="cancelClick" />
                    <br />
                    <br />
                    <asp:Button ID="Button" runat="server" Text="Click Me" OnClick="Button_Click" /><br />
                    <ajaxToolkit:ConfirmButtonExtender ID="ConfirmButtonExtender2" runat="server" 
                        TargetControlID="Button"
                        OnClientCancel="cancelClick"
                        DisplayModalPopupID="ModalPopupExtender1" />
                    <br />
                    <ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="Button" PopupControlID="PNL" OkControlID="ButtonOk" CancelControlID="ButtonCancel" BackgroundCssClass="modalBackground" />
                    <asp:Panel ID="PNL" runat="server" style="display:none; width:200px; background-color:White; border-width:2px; border-color:Black; border-style:solid; padding:20px;">
                        Are you sure you want to click the Button?
                        <br /><br />
                        <div style="text-align:right;">
                            <asp:Button ID="ButtonOk" runat="server" Text="OK" />
                            <asp:Button ID="ButtonCancel" runat="server" Text="Cancel" />
                        </div>
                    </asp:Panel>

                <asp:Label ID="Label1" runat="server" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>

</asp:Content> 
```

# jquery - 如果我不知道所有的类名，如何使用 jQuery 删除一个类？

> ID：14577390
> 
> 赞同：0
> 
> 时间：2013-01-29T07:03:17.013
> 
> 标签：jquery

> **可能重复：**
> [jQuery - 删除所有具有相似名称的类](https://stackoverflow.com/questions/3692142/jquery-remove-all-classes-with-similar-names)

我有这样的代码：

```
$targetSpan
    .removeClass('sprite-blank'); 
```

我怎样才能删除任何以 'sprite-icon' 开头的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:11:20.163

没有具体的方法可以做到这一点。您必须查看`className`字符串并遍历每个类。您可以通过提供回调来做到这一点，`.removeClass`尽管还有其他方法：

```
$targetSpan
    .removeClass(function (_, classes) {
        var classes = classes.split(' ');
        var finalClasses = '';
        for (var x = 0; x < classes.length; x++) {
            if (classes[x].indexOf('sprite-blank') >= 0) {
                finalClasses += classes[x] + ' ';
            }
        }
        return finalClasses;
    }); 
```

[http://jsfiddle.net/67BAu/1/](http://jsfiddle.net/67BAu/1/)

根据假定的重复答案，一种不那么冗长的方法：http: [//jsfiddle.net/67BAu/3/](http://jsfiddle.net/67BAu/3/)

# ios6 - 将报亭应用程序显示为独立应用程序

> ID：14577393
> 
> 赞同：0
> 
> 时间：2013-01-29T07:03:30.457
> 
> 标签：ios6, newsstand-kit

有什么方法可以显示不在 ios 设备上的报亭文件夹中的报亭应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:50:58.453

官方 iOS SDK 无法从 Newsstand 文件夹中删除 Newsstand 应用程序。虽然你可以在越狱 iOS 中实现它。

您在应用程序的 plist 文件中将 Newsstand 应用程序的 UINewsstandapp 设置为 true，它们会自动出现在 Newsstand 文件夹中。我认为如果您删除此关键应用程序，则不应显示在 Newsstand 文件夹中（不确定（），但是您不能将其称为 Newsstand 应用程序。

如果 UINewsstandapp 在您的 plist 文件中为 false，我认为您不应该将 UIBackgroundModes 设置为“newsstand-content”。简而言之，如果在您的应用程序中将 UINewsstandapp 设置为 true，您将无法使用后台下载功能。

# android - 如何在android中的按钮Click上清空列表视图？

> ID：14577394
> 
> 赞同：0
> 
> 时间：2013-01-29T07:03:35.157
> 
> 标签：android, android-listview

我有一个列表视图，其中包含来自服务器的数据...当我单击下一个按钮时，应该显示来自服务器的其他内容，但是插入该列表视图会将新数据附加到以前的数据中...那该怎么办？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:12:51.160

我认为您`ArrayList`保存了从服务器先前和新下载的数据...我建议您`ArrayList`在添加来自服务器的新数据之前清除。要清除 ArrayList，您需要调用`arr.clear();`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T07:13:38.137

与 ListView 关联的空数据适配器。

```
public class MainActivity extends Activity {

        List<App> apps;
    ListView listView;
    AppsListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.apps_show_layout);      
        listView = (ListView) findViewById(R.id.lvApps);

        Button b = (Button) findViewById(R.id.btnClear);

                b.setOnClickListener(new OnClickListener() {

                    //Cleaning data source for list adapter
                    apps = new ArrayList<App>();
                    //Filling list with new data
                    apps = yourerverResponse(); 
                    adapter = new MyListAdapter(MainActivity.this, R.layout.app_row, apps);
                listView.setAdapter(adapter);

                } 
        }
} 
```

# security - 在考虑中间人攻击时，密码恢复链接是否比纯文本密码传输更安全？

> ID：14577396
> 
> 赞同：1
> 
> 时间：2013-01-29T07:03:43.277
> 
> 标签：security, password-recovery

考虑到[这篇论文](http://www.fishnetsecurity.com/6labs/resource-library/white-paper/best-practices-secure-forgot-password-feature)和简单的常识：为什么后者比前者更脆弱？

我的意思是，如果我们有窃听的情况，那么两种情况之间的区别是什么：

*   明文：黑客请求恢复密码，获取密码，获得对帐户的访问权限
*   恢复链接：黑客请求恢复密码，捕获链接，使用它，获得对帐户的访问权限

我知道我们根本不能将密码存储为纯文本，但让我们假设我们无法控制这部分——在这种情况下有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:36:24.357

存在以下好处：

1.  当用户没有收到明文密码时（即使它们保存在服务器上），他们会感到更安全
2.  一次性链接可确保用户更改密码（并且可能愿意将其放在某个地方或使用一些可以记住的密码）
3.  最后但也许是最重要的 - 使用链接方法，黑客必须更改密码，用户可以通过看到他无法再登录来检测他的帐户已被破坏。

# html - 如何将我自己的插件添加到 IE，这样如果我访问网页，IE 应该要求安装该插件

> ID：14577398
> 
> 赞同：0
> 
> 时间：2013-01-29T07:03:52.027
> 
> 标签：html, internet-explorer, plugins, activex

当我走这条路时，我将安装一个插件。

```
http://www.axis.com/files/developer/camera/AXISMediaControlSDK_6_06.zip 
```

但是使用这个，我必须在每台使用这个控件的计算机上安装插件。但是我希望使用我网页的人在访问网页时应该被 IE 自动安装。我使用了以下代码

```
<object id="Player" width="250" border="1" style="margin-top:10px"
        classid="CLSID:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B">
<param name="pluginspage" value="http://www.axis.com/files/developer/camera/AXISMediaControlSDK_6_06.zip" />
</object> 
```

但是使用上面的代码，它不会要求安装软件。任何人都可以帮助我使用 html 或 java 脚本或 php 解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:30:51.203

您是否尝试过对象元素的代码库属性？例如

```
<object id="Player" width="250" border="1" style="margin-top:10px"
classid="CLSID:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" 
codebase="http://www.axis.com/files/developer/camera/AXISMediaControlSDK_6_06.zip">...</object> 
```

一些 Edimax IP 摄像机在他们的网络界面中使用它并且它正在工作。

# php - activatables.js tabing js 在 URL 上发送值

> ID：14577402
> 
> 赞同：0
> 
> 时间：2013-01-29T07:04:16.870
> 
> 标签：php, javascript

```
<script src=" /js/activatables.js" type="text/javascript"></script>
<script type="text/javascript">
  activatables('tab', ['page-1', 'page-2', 'page-3', 'page-4', 'page-5', 'page-6']);
</script> 
```

我正在使用这个 js 作为表格中的选项卡。但我无法`#tab`从我的 URL 中删除。有没有办法让这个选项卡值`#page=page-1`不会在 URL 中传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:29:49.493

是的你可以：

使用此代码

```
activatables('page', ['page-1', 'page-2', 'page-3', 'page-4', 'page-5', 'page-6']);
               ^ 
```

顺便说一句，这与 PHP 无关。不是吗？

# maven-2 - 请检查参数“sonar.host.url”

> ID：14577404
> 
> 赞同：4
> 
> 时间：2013-01-29T07:04:26.340
> 
> 标签：maven-2, hudson, sonarqube

我想启用 hudson+sonar 所以我做了以下步骤：

1.安装声纳3.4.1并启动声纳服务器。现在我可以`http://localhost:9000`在浏览器上访问。

2.在 hudson 的配置中，我提供了声纳安装详细信息，但那里只提供了数据库详细信息，例如数据库登录名、密码、url 等。

2.在哈德逊创建了新工作，使用了我当前项目所在的git存储库，在构建后的操作中我选择了声纳。

但是我将构建它正确地从 git repositoty 获取内容的工作，但是我遇到了以下异常：

```
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project Engile: Sonar server can not be reached at http://localhost:9000\. Please check the parameter 'sonar.host.url'. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project Engile: Sonar server can not be reached at http://localhost:9000\. Please check the parameter 'sonar.host.url'.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Sonar server can not be reached at http://localhost:9000\. Please check the parameter 'sonar.host.url'. 
```

我没有在 settings.xml 文件中添加任何内容。我不知道这个问题，任何人都可以给我一些解决方案...

**1.哈德森配置：**

![在此处输入图像描述](../Images/b83a3b3935bafddd70e9a41dc3ba9746.png)

**2.Hudson作业配置：**

![在此处输入图像描述](../Images/1dd3d32db0882a451f186e421708573d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:27:23.227

你可以配置 Hudson/Jenkins 插件来为你的 Sonar 服务器设置一个特定的 URL。请查看文档的这一部分：http: [//docs.codehaus.org/display/SONAR/Configuring+Sonar+Jenkins+Plugin#ConfiguringSonarJenkinsPlugin-AddingSonarServer](http://docs.codehaus.org/display/SONAR/Configuring+Sonar+Jenkins+Plugin#ConfiguringSonarJenkinsPlugin-AddingSonarServer)

您可以看到有一个必须填写的“服务器 URL”字段。

# sql - SQL SERVER 选择行

> ID：14577406
> 
> 赞同：2
> 
> 时间：2013-01-29T07:04:51.350
> 
> 标签：sql, sql-server

如果我有下面这张表

```
 id         time
   start      08.00 AM 
   stop       09.00 AM
   stop       09.30 AM
   start      09.30 AM
   start      11.00 AM
   start      11.30 AM
   stop       11.40 AM
   stop       12.00 PM 
```

我想要的输出只需要每次**第一次启动**和**停止后的每次启动**和**最后一次停止**

有什么解决办法吗？

这就是我想要的输出：

```
 id         time
   start      08.00 AM 
   stop       09.00 AM
   start      09.30 AM
   stop       11.40 AM
   stop       12.00 PM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:13:40.383

Whitout 对每一行都有任何主键或一些不同的 id ......我想到的唯一解决方案是：

```
select rn, id , time
from
(select ROW_NUMBER() over (order by time) as rn, id, time from test 
where id = 'start'
union
select ROW_NUMBER() over (order by time) as rn, id, time from test 
where id = 'stop'
) d
order by rn 
```

基本上我在开始行和停止行之间建立了一个联合，如下所示：

```
 (select ROW_NUMBER() over (order by time) as rn, id, time from test 
    where id = 'start'
    union
    select ROW_NUMBER() over (order by time) as rn, id, time from test 
    where id = 'stop'
    ) d 
```

返回：

```
 1   start   08.00
    2   start   11.00
    3   start   12.00
    4   start   13.00
    1   stop    09.00
    2   stop    10.00
    3   stop    14.00
    4   stop    15.00 
```

从原始输入：

```
id          time
start   08.00
stop    09.00
stop    10.00
start   11.00
start   12.00
start   13.00
stop    14.00
stop    15.00 
```

现在您只需按他们自己的行号对它们进行排序......就是那个 rn。

最后，您将拥有：

```
1   start   08.00
1   stop    09.00
2   start   11.00
2   stop    10.00
3   start   12.00
3   stop    14.00
4   start   13.00
4   stop    15.00 
```

@注意：我的示例值与您的值接近...但是虚构的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:55:58.287

我有一些替代方案，它将以不同的格式给出结果。但它确实返回了请求的信息。

```
SELECT
  MIN([main].[Start]) AS [Start],
  [main].[End] AS [Stop],
  DATEDIFF(minute, MIN([main].[Start]), [main].[End]) AS [Minutes]
FROM
(
  SELECT
    [sub].[Start],
    MIN([sub].[End]) AS [End]
  FROM
  (
    SELECT
      [start].[time] AS [Start],
      [start].[id] AS [StartingStatus],
      [end].[time] AS [End],
      [end].[id] AS [EndingStatus]
    FROM [Log] [start],  [Log] [end]
    WHERE [start].[id] = 'start' 
      AND [start].[time] < [end].[time]
      AND [start].[id] <> [end].[id]
  ) AS [sub]
  GROUP BY
    [sub].[Start],
    [sub].[StartingStatus]
) AS [main]
GROUP BY
  [main].[End] 
```

基本上，它首先选择所有记录`where [id] = 'start'`。然后它会查找所有具有较晚时间和 的记录`where [id] <> 'start'`。

在这些记录中，它按每个“开始”分组并确定第一个“停止”时间。然后将这些记录再次分组，以找到每个“停止”时间的第一个“开始”时间。

结果如下所示：

```
+--------------------------------+--------------------------------+---------+
| START                          | STOP                           | MINUTES |
+================================+================================+=========+
| January, 29 2013 08:00:00+0000 | January, 29 2013 09:00:00+0000 | 60      |
+--------------------------------+--------------------------------+---------+
| January, 29 2013 09:30:00+0000 | January, 29 2013 11:30:00+0000 | 120     |
+--------------------------------+--------------------------------+---------+
| January, 29 2013 11:30:00+0000 | January, 29 2013 12:00:00+0000 | 30      |
+--------------------------------+--------------------------------+---------+ 
```

小提琴是在[这里](http://sqlfiddle.com/#!3/0079a/7)找到的。

*PS：这个答案是基于我[在这里](https://stackoverflow.com/a/14512010/410699)的回答。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T08:58:41.897

```
 ;WITH cte AS
 (
  SELECT id AS pr, [time], ROW_NUMBER() OVER(ORDER BY [time]) AS Id,
         COUNT(*) OVER() AS cnt        
  FROM dbo.test21 t1
  ), cte2 AS
 (
  SELECT Id, pr, [time], pr AS prStart, [time] AS StopTime, pr AS prStop, [time] AS StartTime
  FROM cte
  WHERE Id = 1
  UNION ALL
  SELECT c1.Id, 
         CASE WHEN c1.pr != c2.pr OR c1.Id = c1.cnt THEN c1.pr ELSE c2.pr END,
         CASE WHEN c1.pr != c2.pr OR c1.Id = c1.cnt THEN c1.[time] ELSE c2.[time] END,
         c1.pr, c1.[time], c2.pr, c2.[time]
  FROM cte c1 JOIN cte2 c2 ON c1.Id = c2.Id + 1
  )
  SELECT pr, [time], MIN(StartTime) AS StartTime,
         MAX(DATEDIFF(minute, StartTime, [time])) AS Interval
  FROM cte2
  GROUP BY pr, [time] 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/f951f/2/0)上的演示[](http://sqlfiddle.com/#!3/f951f/2/0)

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T09:07:35.910

在评论中做出澄清后，这变成了一个经典的[gaps-n-islands](/questions/tagged/gaps-n-islands "显示标记为“gap-n-islands”的问题")问题。

假设这是 SQL Server 2005+，您可以使用以下方法：

```
WITH partitioned AS (
  SELECT
    *,
    grp = ROW_NUMBER() OVER (ORDER BY time, CASE id WHEN 'stop' THEN 0 ELSE 1 END)
        - ROW_NUMBER() OVER (PARTITION BY id ORDER BY time)
  FROM atable
)
SELECT
  id,
  time = MIN(time)
FROM partitioned
GROUP BY
  id,
  grp
ORDER BY
  time
; 
```**

# c - C程序：如何设置自定义整数范围，将接受的输入数字严格限制在该范围内？

> ID：14577407
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:04:56.060
> 
> 标签：c, int, range, limit

让我们考虑这样一种情况，一个程序必须将一个数字作为用户的输入，并且只能在 1 到 10,00,000,000 之间的任何严格范围内？在C中可能吗？如果是的话，如果有人可以通过修改以下示例程序来解释这一点，那就太好了。

```
#include<stdio.h>
int main()
{
    unsigned long int n, e1,e2,e3;
    int counter;

    for(counter=0; counter<10; counter++)
    {

        scanf("%ld",&n); // how to restrict this between 1 to 10,000,000,000?

        e1=n/2;
        e2=n/3;
        e3=n/4;

        if(e1+e2+e3<n)
        {
            printf("%ld\n",n);
        }

        else

            printf("%ld\n",e1+e2+e3);

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:08:01.817

您可以更换：

```
scanf ("%ld",&n); 
```

有类似的东西：

```
scanf ("%lu", &n);
while ((n < 1) || (n > 10 * 1000 * 1000 * 1000)) {
    printf ("No! That won't do, try again!\n");
    scanf ("%lu", &n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:08:16.523

你的上限，一千万（一百亿），是一个很大的数字。它不适合 32 位无符号整数，你需要更大的东西。

因此，由于您知道需要支持的实际数字，因此最好使用明确的 64 位数字（而不是希望您的系统`unsigned long long`足够大）。

这将需要 C99：

```
#include <stdint.h>

uint64_t n;

if(scanf("%" PRIu64, &n) == 1)
{
  if(n >= 1 && n <= UINT64_C(10000000000))
   printf("Great, number accepted\n");
  else
   printf("Please enter a number in range 1..10000000000\n");
}
else
  printf("Please enter a number.\n"); 
```

以上显然不是一个完整的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:06:56.083

你不能。`"%lu"`无论如何都不是直接的，除了一个例外：通过使用无符号值和有符号的格式来允许有符号或无符号值`"%ld"`。

要检查输入是否在限制范围内，您必须阅读输入，根据您的限制检查它，如果超出限制，则再次询问用户。

# string - 如何将变量（对象）名称转换为字符串

> ID：14577412
> 
> 赞同：143
> 
> 时间：2013-01-29T07:05:01.660
> 
> 标签：string, r, object

我有以下带有变量名的数据框`"foo"`；

```
 > foo <-c(3,4); 
```

我想要做的是转换`"foo"`成一个字符串。所以在一个函数中我不必重新创建另一个额外的变量：

```
 output <- myfunc(foo)
   myfunc <- function(v1) {
     # do something with v1
     # so that it prints "FOO" when 
     # this function is called 
     #
     # instead of the values (3,4)
     return ()
   } 
```

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-01-29T07:37:36.977

您可以使用`deparse`and`substitute`来获取函数参数的名称：

```
myfunc <- function(v1) {
  deparse(substitute(v1))
}

myfunc(foo)
[1] "foo" 
```

# sql - 在更新或插入父表后立即触发 SQL Server DB 以插入/更新表

> ID：14577414
> 
> 赞同：0
> 
> 时间：2013-01-29T07:05:14.170
> 
> 标签：sql, database, sql-server-2008

我是触发写作的新手。一旦代码/母表中的记录受到影响，我就编写了一个触发器来插入/更新表，即如果我第一次插入记录，它应该将该记录与其他相关新表中的信息。同样适用于更新..下面是我尝试过的代码片段，但它不起作用意味着即使它编译成功..它无法将记录插入目标表..这里 TQA_USER_ASSESSMENT 是核心表，TQA_USER_ASSESSMENT 应该得到根据 TQA_USER_ASSESSMENT 中的数据填充/更新。

```
 CREATE TRIGGER [dbo].[TRG_RAM_DETAILS_GMAS] ON [dbo].[TQA_USER_ASSESSMENT]           FOR                 INSERT,UPDATE
               AS
              SET XACT_ABORT, NOCOUNT ON

           --Ignore zero row updates, inserts
              IF NOT EXISTS (SELECT * FROM INSERTED) RETURN;

INSERT INTO TQA_RAM_DETAILS_GMAS
SELECT
        tu.name AS User_Name,
        tat.assessmentType AS Assessment_Type,
        tb.name AS Business_Class_Name,
        tr.name AS Region_Name,
        tc.name AS Country_Name,
        tf.facilityName AS Terminal_Name, 
        I.ovr_terminal_rating AS Terminal_Rating,
        CONVERT(VARCHAR(10), I.dateOfInspection, 103) AS Date_of_Inspection, 
        CONVERT(VARCHAR(10), I.dateNextInspectionDue, 103) AS Expiry_date_of_rating,
        CONVERT(VARCHAR(10), I.summ_lastUpdated, 103) AS lastUpdated

FROM
   INSERTED I INNER JOIN
        dbo.TQA_USERS tu ON I.userID=tu.userID INNER JOIN
        dbo.TQA_ASSESSMENT_TYPE AS tat ON tat.assessmentTypeID = I.assessmentTypeID INNER JOIN
        dbo.TQA_FACILITIES AS tf ON tf.facilityID = I.facilityID INNER JOIN
        dbo.TQA_ACCESS ta ON ta.facilityID=tf.facilityID INNER JOIN
        dbo.TQA_BUSINESS_CLASSES tb ON tb.businessClassID= ta.businessClassID INNER JOIN
        dbo.TQA_REGIONS tr ON tr.regionID= ta.regionID INNER JOIN
        dbo.TQA_COUNTRIES tc ON tc.countryID= ta.countryID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:29:05.513

**

> 在 sql 中执行此查询并对您的触发器进行故障排除

**

```
SELECT
        tu.name AS User_Name,
        tat.assessmentType AS Assessment_Type,
        tb.name AS Business_Class_Name,
        tr.name AS Region_Name,
        tc.name AS Country_Name,
        tf.facilityName AS Terminal_Name, 
        myparentTable.ovr_terminal_rating AS Terminal_Rating,
        CONVERT(VARCHAR(10), myparentTable.dateOfInspection, 103) AS Date_of_Inspection, 
        CONVERT(VARCHAR(10), myparentTable.dateNextInspectionDue, 103) AS Expiry_date_of_rating,
        CONVERT(VARCHAR(10), myparentTable.summ_lastUpdated, 103) AS lastUpdated

     from  TQA_USER_ASSESSMENT myParentTable   INNER JOIN
            dbo.TQA_USERS tu ON myParentTable.userID=tu.userID INNER JOIN
            dbo.TQA_ASSESSMENT_TYPE AS tat ON tat.assessmentTypeID = myParentTable.assessmentTypeID INNER JOIN
            dbo.TQA_FACILITIES AS tf ON tf.facilityID = myParentTable.facilityID INNER JOIN
            dbo.TQA_ACCESS ta ON ta.facilityID=tf.facilityID INNER JOIN
            dbo.TQA_BUSINESS_CLASSES tb ON tb.businessClassID= ta.businessClassID INNER JOIN
            dbo.TQA_REGIONS tr ON tr.regionID= ta.regionID INNER JOIN
            dbo.TQA_COUNTRIES tc ON tc.countryID= ta.countryID
        where 
        myParentTable.assessmentTypeID = 'whatever u added'
    and myParentTable.userID='whatever u added'
    and myParentTable.facilityID = 'whatever u added' 
```

# iphone - 使用 AVPlayer 前进、后退音频

> ID：14577416
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:05:33.703
> 
> 标签：iphone, ios6, streaming, avplayer

我正在使用 AVPlayer 播放流式音频文件。我想为音频播放器实现快进、快退选项。如何使用 AVPlayer 实现这些功能。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T07:10:05.453

那里似乎有很多讨论和指南，您可以从中获取针对此特定请求的材料。

这是有关 StackOverflow 本身的一些问题，它们处理 AVPlayer 的相同功能。检查它们，以及它们导致的任何链接信息。

*   [AVAudioPlayer 中的快退和快进](https://stackoverflow.com/questions/10478472/fast-rewind-fast-forward-in-avaudioplayer)
*   [iPhone播放声音时如何进行操作？](https://stackoverflow.com/questions/10558288/how-to-perform-operations-when-playing-sound-in-iphone)
*   [无法在 AVAudioplayer 中实现前向操作](https://stackoverflow.com/questions/2006757/unable-to-implement-forward-action-in-avaudioplayer)

# r - 用于在 R 中对数据进行排序的循环

> ID：14577418
> 
> 赞同：0
> 
> 时间：2013-01-29T07:05:43.283
> 
> 标签：r, sorting, loops

> **可能重复：**
> [将数据帧拆分为 r 中的多个输出文件](https://stackoverflow.com/questions/10002021/split-dataframe-into-multiple-output-files-in-r)

我需要帮助在 R 中创建一个循环，这将帮助我将我的主数据文件子集为单独的 csv 文件。我的主文件如下所示：

主数据集

```
colA= c("A", "A", "A", "B", "B", "B",  "C", "C", "C")
colB= c(1.1,2.1,3.1,4.1,5.1,6.1,7.1,8.1,9.1)
colC= c(-1.2,-2.1,-3.1,-4.1,-5.1,-6.1,-7.1,-8.1,-9.1)
df= data.frame (spp=colA, latitude=colB, longitude=colC)
df 
```

我需要输出在单独的 csv 文件中只有每个物种的数据，所以它们看起来像这样：

对于物种“A”…

```
colA= c("A", "A", "A")
colB= c(1.1,2.1,3.1)  
colC= c(-1.2,-2.1,-3.1,)
df2= data.frame (spp=colA, latitude=colB, longitude=colC)
write.csv (df2, file= “spA.csv”) 
```

相同的格式，但在物种“B”和“C”的单独文件中

对一两个物种执行此操作很容易，但我的主矩阵中有 400 多个物种。谁能建议如何编写一个循环来帮助根据物种对我的数据进行子集化？谢谢

以色列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:16:48.033

就像是

```
for(species in unique(masterData$colA)) {
    this_file <- paste0(species, ".csv")   
    write.csv(x = masterData[masterData$colA == species, ], file = this_file)
} 
```

# java - 使用 Clip java 时出现 OutOfMemoryError

> ID：14577419
> 
> 赞同：1
> 
> 时间：2013-01-29T07:05:43.517
> 
> 标签：java, out-of-memory, javax.sound.sampled

已解决：我解决了！！我必须在 netbeans ide 中增加我的项目属性的堆大小，而不是在 netbeans ide 配置本身

我有一个非常简单的游戏应用程序，我使用 javax.sound.sampled 包中的 Clip 对象播放背景音乐（几乎 9m 长和 8mb 大小的 mp3 格式文件）我将其转换为 wav 文件并它变成了 87mb >_<。我有用于按钮的小 wav 文件。问题是每次我终止程序时都会收到 OutOfMemoryError 。我制作了一个应用程序，该应用程序仅在您先单击长波文件后多次单击短剪辑，然后单击终止按钮结束它，然后我收到该错误时，才会模拟相同的问题。但是我不知道如何为其他人提供相同的 wav 文件来尝试测试这个样本

```
import javax.swing.*;
import javax.sound.sampled.*;
import java.awt.*;
import java.awt.event.*;
import java.io.File;
public class ClipClass extends JPanel implements ActionListener{
private JButton longClip, shortClip1,shortClip2,quit;
public ClipClass(){
    setLayout(new GridLayout(2,2,0,0));
    longClip = new JButton("Play long wav");
    shortClip1 = new JButton("Play short wav1");
    shortClip2 = new JButton("Play short wav2");
    quit = new JButton("Terminate");
    add(longClip);
    add(shortClip1);
    add(shortClip2);
    add(quit);
    longClip.addActionListener(this);
    shortClip1.addActionListener(this);
    shortClip2.addActionListener(this);
    quit.addActionListener(this);
}
public synchronized void playSound(final String url) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                Clip clip = AudioSystem.getClip();
                AudioInputStream inputStream = AudioSystem.getAudioInputStream(new File(url));
                clip.open(inputStream);
                clip.start();
                clip.addLineListener(new LineListener() {
                    @Override
                    public void update(LineEvent evt) {
                        if (evt.getType() == LineEvent.Type.STOP) {
                            evt.getLine().close();
                        }
                    }
                });
            } catch (Exception e) {
            }
        }
    });
}
public static void main(String[] args){
    JFrame frame = new JFrame("SampleSoundOOME");
    ClipClass pane = new ClipClass();
    frame.setContentPane(pane);
    frame.setVisible(true);
    frame.pack();
}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==longClip){
        playSound("C:/Users/Sony/Documents/NetBeansProjects/Sphere Break/Trance.wav");
    }if(e.getSource()==shortClip1){
        playSound("C:/Users/Sony/Documents/NetBeansProjects/Sphere Break/KDE_Window_Sticky.wav");
    }if(e.getSource()==shortClip2){
        playSound("C:/Users/Sony/Documents/NetBeansProjects/Sphere Break/KDE_Window_Iconify.wav");
    }if(e.getSource()==quit){
        System.exit(0);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:11:36.657

这背后的原因是您的程序使用了过多的内存，超出了您分配的堆大小（或默认大小）。内存泄漏也可能对此负责。您可以通过取消所有引用来帮助 Java 垃圾收集器。否则，您可以通过`-Xmx256m`where `m`=设置堆大小`Megabyte`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:13:43.640

请根据您的 .wav 文件大小检查 JVM 堆大小，分配给 JVM 堆的内存可能不够。

使用：java -Xmx* 增加 jvm 堆** - 你可以分配的内存在哪里*

 *此外，在例外情况下：

```
catch (Exception e) {
           //close `inputStream` 
           // close `clip`
} 
```*

# php - 用于 gettext 的 Zend 验证错误提取

> ID：14577420
> 
> 赞同：2
> 
> 时间：2013-01-29T07:05:46.357
> 
> 标签：php, validation, zend-framework, translate

我正在使用 ZF 1.12 构建应用程序。应用程序将提供两种语言 - 波兰语和英语。对于翻译，我正在使用 gettext 适配器，它工作得很好。但！我已经翻译了整个界面和消息，唯一不知道如何翻译的是验证错误。问题是在表单验证期间，传递给 translate() 的所有错误都是变量而不是纯字符串，因此我无法从代码中提取它们。当然，我可以将所有错误作为字符串创建单独的文件，或者使用带有 -a 选项的 xgettext 来翻译 Zend_Validate 包中的所有字符串，但我正在寻找更智能的解决方案......有人有这样的解决方案吗？我会很感激的，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:41:46.003

我认为您可以尝试使用数组。如果您说所有错误都传递给`translate()`函数，那么您可以使用这样的数组：

```
array(
    'type_of_error_1' => array(
        0 => array('language' => 'en', 'message' => 'In English for type_error_1'),
        1 => array('language' => 'po', 'message' => 'In Polish for type_error_1'),
    ),
    'type_of_error_2' => array(
        0 => array('language' => 'en', 'message' => 'In English for type_error_2'),
        1 => array('language' => 'po', 'message' => 'In Polish for type_error_2'),
    ),
    ...
); 
```

并以正确的语言显示任何类型的错误消息。

# jquery - 在 Javascript 中捕获反斜杠

> ID：14577422
> 
> 赞同：0
> 
> 时间：2013-01-29T07:05:55.920
> 
> 标签：jquery, regex

我正在使用 Jquery 验证器创建一个规则来禁止字段中的 spl 字符。

```
jQuery.validator.addMethod("noSpecialChar", function(value,element) {
    if(value.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/)){
      return false;
    }else{
      return true;
    }
  }, "No Special Charaters are allowed."); 
```

正在使用的正则表达式未捕获“\”反斜杠。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:07:48.127

您需要在字符类中包含反斜杠：

```
if(value.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/\\]/)) 
```

但是其他“特殊字符”`§`呢？该列表几乎是无穷无尽的 - 也许您希望排除除以下之外的*所有*字符`A-Za-z0-9_`：

```
if (value.match(/\W/)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:37:36.727

反斜杠`\`是转义字符，因此要在正则表达式（或字符串）中包含文字反斜杠，您必须转义反斜杠字符本身，即`\\`.

在您的角色类中，单曲`\`被用来转义，`]`以防止它被解释为关闭角色类的元字符。

`\`角色类中的另一个是不必要的，因为它`]`是唯一需要在其中转义的元字符。
`]`, `\`,`^`和`-`是唯一可能需要在字符类中转义的字符。

如前所述，您最好通过查找不在指定组内的字符来指定不允许使用的字符，例如

```
/[^a-z\d\s]/i 
```

它不允许任何字符 not `a-z`, `A-Z`,`0-9`或空格（ the`\d`的缩写，`0-9`表示`i`不区分大小写）。

此外，代替`if-else`语句 and `match`，您可以简单地使用

```
return !value.test( /[^a-z\d\s]/i ) 
```

尽管您可能会发现它的可读性较差（`!`反转调用的布尔结果`test`）。

# c - 使用 glibc regex.h 在 C 中进行电子邮件验证

> ID：14577426
> 
> 赞同：0
> 
> 时间：2013-01-29T07:06:12.753
> 
> 标签：c, regex, email-validation

**好的......让它与这个正则表达式一起工作：**

```
const char * reg_exp = "^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*@([a-z0-9])"
                       "(([a-z0-9-])*([a-z0-9]))+(.([a-z0-9])([-a-z0-9_-])?"; 
```

我还不知道这个表达有多有效，但我很高兴在这个问题上取得一些进展。

* * *

C 模式匹配（正则表达式）的新手。我相信我试图找到我的问题的答案。

我正在尝试让一个简单的电子邮件模式匹配在我的注册模块中工作。由于我现在对其进行了编码，因此每次传递时它都无法匹配格式正确的电子邮件源。我在想，基于我非常有限的知识和理解，如果满足所有其他依赖项，以下代码应该可以工作。但是，这又是行不通的。任何帮助都感激不尽。

更新的示例代码：

```
#include <regex.h>

regex_t regex;
... //other proc vars
int r, e;
unsigned char buf[RESBUF];
char *source = "johnnydoe@cloudnine.com";

const char *reg_exp1 = "/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@"
                       "([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|"
                       "edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])"
                       "|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i";
const char *reg_exp2 = "\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b";

char proc[] = "create_user";

r = regcomp(&regex,reg_exp2,REG_EXTENDED);
if(r) {
     sprintf(emessage,"REGEX COMPILE:Fail:%s:%s",proc,cgiRemoteAddr);
     log_proc(ebs->r,emessage,TXLOG);
     e = 1;
}
else {
     e = 0;
}
r = regexec(&regex,source,0,NULL,0); // source email
if(!r) {
     e = 0;
}
else
if(r == 1) {
     sprintf(emessage,"REGEX MATCH:Fail:%s",proc);
     log_proc(ebs->r,emessage,TXLOG);
     e = 1;
}
else {
     regerror(r,&regex,buf,100);
     sprintf(emessage,"REGEX MATCH:Fail:%s:%s",proc,buf);
     log_proc(ebs->r,emessage,TXLOG);
     e = 1;
}
regfree(&regex);
// Now evaluate e to determine success
if (!e) { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:23:18.267

这个正则表达式会做到这一点：`\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}\b`没有你正在使用的域检查。在这里阅读它的描述：[http ://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

添加域检查结束看起来像你所拥有的：

`\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.(ca|com|info|edu|...)\b`

**编辑**

为简单起见，请尝试将模式直接传递给 regcomp 函数。从 POSIX 示例中窃取此代码：

```
reti = regcomp(&regex, "[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}", 0);
    if( reti ){ fprintf(stderr, "Could not compile regex\n"); exit(1); }

/* Execute regular expression */
    reti = regexec(&regex, "johnnydoe@cloudnine.com", 0, NULL, 0);
    if( !reti ){
            puts("Match");
    }
    else if( reti == REG_NOMATCH ){
            puts("No match");
    }
    else{
            regerror(reti, &regex, msgbuf, sizeof(msgbuf));
            fprintf(stderr, "Regex match failed: %s\n", msgbuf);
            exit(1);
    } 
```

链接：[http ://www.peope.net/old/regex.html](http://www.peope.net/old/regex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:45:03.633

第一步是使错误处理可接受。`"REGEX MATCH:Fail:%s"`您需要描述问题所在的错误消息（`didn't start with a letter`、`missing '@' sign`、`multiple '@' characters`、`unrecognised top level domain`等） ，而不是几乎无用的错误消息。这对于调试很重要（例如，当您忽略某些内容时），如果涉及用户输入（以及对错误用户输入的反馈），则可能更重要。

一旦错误处理是可以接受的，您将拥有许多更容易理解、维护和验证的小/琐碎的正则表达式。这将是更多的代码，但它将是好的代码而不是乱码。

下一步是通过用根本不使用正则表达式的更简单/更快的检查替换那些小/琐碎的正则表达式来进一步改进代码。一旦所有的正则表达式都消失了，你就知道你正确地使用了正则表达式。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:39:55.320

在 C 源代码中，如果您希望正则表达式引擎看到反斜杠，则您的字符串文字中需要两个反斜杠。取两者中较简单的一个：

```
const char *reg_exp2 = "\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b"; 
```

当然，如果从文件中读取正则表达式，则文件中只需要一个反斜杠即可；关键是反斜杠在发送到正则表达式引擎的字符串中。

提示：

1.  调试时，打印正则表达式输入字符串。
2.  注意编译器警告。GCC 4.7.1 说你的第二个字符串：

    ```
    x.c:1:24: warning: unknown escape sequence: '\.' [enabled by default] 
    ```

# c - 计算使用 fork 生成的进程

> ID：14577427
> 
> 赞同：1
> 
> 时间：2013-01-29T07:06:27.157
> 
> 标签：c, fork

如何计算我使用 fork 完成了多少进程？其中一些是在子进程中创建的，所以我不能只在退出时数数。除了退出状态之外，有没有办法传递某些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:27:32.527

手册页[`shm_open`](http://pubs.opengroup.org/onlinepubs/009695399/functions/shm_open.html)有一个关于如何使用共享内存的例子。在每个进程中打开共享内存对象并对其进行内存映射，将其用作`int`指针并在所有进程中增加它。

为了帮助解决竞争条件，您可以使用[POSIX 信号量](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/semaphore.h.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:57:45.193

您可以自己使用全局变量，只需在每个带有条件的分叉后添加 1

`if((pid = fork()) >= 0)`

具有保护变量之类的机制`mutex`。

# iphone - 如何从 nsmutabledictionary 中删除键当该键的值在 ios 中为空或 null 时？

> ID：14577428
> 
> 赞同：8
> 
> 时间：2013-01-29T07:06:28.310
> 
> 标签：iphone, ios, nsmutabledictionary

我创建了 NSMutableDictionary 并且键的值形成为 nsarray。我已经删除了钥匙的对象。我对这个案子毫无疑问。但是我想在该键的值为空或为空时删除键，如下所示。

```
{
    Africa =     (
        "Kenya",
        "South Africa"
    );
    America =     (
    );
    Asia =     (
        "India"
    );
} 
```

上面的字典有三个键，其中一个键没有对象是 America。我想删除此密钥。是否可以？我们可以从 nsmutabledictionary 中删除密钥吗？

请帮我.....

**编辑：**简单的错误。我明白我弄错了什么。key(America) 有值，它是空数组，这意味着数组中的元素数为零。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-29T07:09:03.593

> 上面的字典有三个键，其中一个键没有对象是 America。

错误的。它拥有一个空的`NSArray`. 这是您删除它的方式：

```
[dictionary removeObjectForKey:@"America"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:14:20.307

> `How to remove key from nsmutabledictionary When value of that key is empty or null in ios?`

这是不可能的，字典必须有 Key 和 Value 非零值。

在您的情况下，它是数组。不包含任何价值。

编辑：

每当你看到{}，即字典，&() 是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T11:20:44.537

在 Swift 3.0 中

```
dictionary.removeObject(forKey: "America") 
```

# javascript - Jquery函数在Keyup之后延迟某个时间

> ID：14577429
> 
> 赞同：0
> 
> 时间：2013-01-29T07:06:30.187
> 
> 标签：javascript, jquery

我正在使用 Jquery AJAX 调用来获取一些绑定内容。我需要延迟一段时间以允许 ajax 调用执行操作。我已经看到在 Javascript 中使用**setTimeout的示例。**但我不知道如何使用它。我试过但它不起作用。请修复我的代码以使其正常工作。

**代码**

```
 $('#ISBN').keyup(function () {
    window.setTimeout(function () {
        var value = $(this).val();
        var Cat = $(this).attr("Id");
        if (value == "" || value == '') {
            $('.Table').remove();
        }
        else {
            $.post('@Url.Action("AutoBibs", "PoDetails")', { Val: value, Category: Cat }, function (data) {

                if (Cat == "ISBN") {
                    $('.Table').remove();
                    $('#' + Cat).after('<div id="ISB" class="find" style="width: 10px !important; margin-left: 0px;"><span id="tablepartial"></span>');
                    $('#ISB').html(data);
                    $('#' + Cat).removeClass("wait");
                }                
          });
        }
    }, 2000);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:08:41.767

`this`在`setTimeout`引用`window`对象而不是`#ISBN`元素的上下文中，您应该`value`在上下文之外声明变量`setTimeout`或缓存`$(this)`对象。

```
var t = '';
$('#ISBN').keyup(function () {
    clearTimeout(t);
    var value = $(this).val(); // this.value
    // or cache the object
    // var $this = $(this); 
    t = setTimeout(function () {
    // var value = $this.val(); 
    // ...     
    }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:19:22.583

```
var searchTimeout = null;
$('#ISBN').keyup(function () {
    clearTimeout(searchTimeout);

    searchTimeout = setTimeout(function () {
        // Here you have the search method
    }, 500);
}); 
```

# asp.net - LinkBut ton 没有第二次在网格视图中初始化控件

> ID：14577433
> 
> 赞同：0
> 
> 时间：2013-01-29T07:06:35.577
> 
> 标签：asp.net, c#-4.0, asp.net-ajax

我有一个`gridview`与“编辑”`TemplateField` 相关的一个。当用户单击它时，它会打开一个 ModalPop Up 以编辑网格的当前行记录。第一次它工作正常并且当 modalPopUp 关闭并且用户再次单击同一个 LinkBut​​ton 时，它不起作用得到异常。调试后我发现第二次它们是 当前选定行中的标签未初始化。请建议我如何解决这个问题，因为它非常紧急。`LinkButton``ItemTemplate``CommandName``LinkButton``object reference not set to an instance of an object``lblUserID`

请在下面找到代码：-

```
<cc1:GridView ID="gvUser" runat="server" AutoGenerateColumns="False" AllowSorting="True"
        CssClass="grid" OnDataBound="gvUser_DataBound" DataSourceID="odsUserDetails"
        AllowPaging="True" ShowFooter="false" OnRowCancelingEdit="gvUser_RowCancelingEdit"
        OnRowCommand="gvUser_RowCommand" OnRowDeleting="gvUser_RowDeleting" 
        OnSelectedIndexChanged="gvUser_SelectedIndexChanged"
        OnRowDataBound="gvUser_RowDataBound" Height="385px" Width="900px" EnableViewState="false">
    <AlternatingRowStyle CssClass="altrowstyle" />
    <HeaderStyle CssClass="headerstyle" />
    <RowStyle CssClass="rowstyle" Wrap="false" />
    <EmptyDataRowStyle BackColor="#edf5ff" Height="300px" VerticalAlign="Middle" HorizontalAlign="Center" />                                            
    <Columns>
        <asp:TemplateField HeaderText="UserID" SortExpression="userID" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" Visible="false">
            <ItemTemplate>
                <asp:Label ID="lblUserID" runat="server" Text='<%#Eval("userID") %>' CssClass="GridContent" />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="lblEditUserID" runat="server" Text='<%#Eval("userID") %>' Style="width: 50px;"
                    CssClass="GridContent" />
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="E Code" SortExpression="userecode" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" ItemStyle-Width="100px">
            <ItemTemplate>
                <asp:Label ID="lblUserECode" runat="server" Text='<%#Eval("UserECode") %>' CssClass="GridContent" />
            </ItemTemplate>                                                    
            <FooterTemplate>
                <asp:TextBox ID="txtAddECode" runat="server" Style="width: 50px;" CssClass="GridContent" />
                <asp:RegularExpressionValidator ID="REVAddECode" runat="server" ControlToValidate="txtAddECode"
                    ErrorMessage="*" Style="color: Red;" ValidationExpression="^\d+$" ToolTip="E Code must be numeric value only.">
                </asp:RegularExpressionValidator>
                <asp:RequiredFieldValidator ID="RFVAddECode" runat="server" ErrorMessage="*" ControlToValidate="txtAddECode"
                    Style="color: Red;" ToolTip="E CodeCan't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="User Name" SortExpression="username" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" ItemStyle-Width="150px">
            <ItemTemplate>
                <asp:Label ID="lblUserName" runat="server" Text='<%#Eval("UserName") %>' CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddUserName" runat="server" Style="width: 150px;" CssClass="GridContent" />
                <asp:RequiredFieldValidator ID="RFVAddUserName" runat="server" ErrorMessage="*" ControlToValidate="txtAddUserName"
                    Style="color: Red;" ToolTip="User Name can't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Enable/Disable" SortExpression="IsFlagEnabled" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
            <ItemTemplate>
                <asp:Label ID="lblIsFlagEnabled" runat="server" Text='<%# (bool)Eval("IsFlagenabled") == true ? "Disable" : "Enable" %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:DropDownList ID="ddlAddIsFlagEnabled" runat="server" AutoPostBack="true" Style="width: auto;"
                        CssClass="GridContent">
                    <asp:ListItem Text="Enable" Value="0" />
                    <asp:ListItem Text="Disable" Value="1" />
                </asp:DropDownList>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Email Address" SortExpression="EmailAddress" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" Visible="false">
            <ItemTemplate>
                <asp:Label ID="lblEmailAddress" runat="server" Text='<%#Eval("EmailAddress") %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddEmailAddress" runat="server" Style="width: 150px;" CssClass="GridContent" />
                <asp:RegularExpressionValidator ID="REVAddEmailAddress" runat="server" ControlToValidate="txtAddEmailAddress"
                    ErrorMessage="*" Style="color: Red;" ValidationExpression="^[a-z0-9_\+-]+(\.[a-z0-9_\+-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$"
                    ToolTip="Not a valid Email Address">
                </asp:RegularExpressionValidator>
                <asp:RequiredFieldValidator ID="RFVAddEmailAddress" runat="server" ErrorMessage="*"
                    ControlToValidate="txtAddEmailAddress" Style="color: Red;" ToolTip="Email Can't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Designation" SortExpression="Designation" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" ItemStyle-Width="100px">
            <ItemTemplate>
                <asp:Label ID="lblDesignation" runat="server" Text='<%#Eval("Designation") %>' CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddDesignation" runat="server" Style="width: 150px;" CssClass="GridContent" />
                <asp:RequiredFieldValidator ID="RFVAddDesignation" runat="server" ErrorMessage="*"
                    ControlToValidate="txtAddDesignation" Style="color: Red;" ToolTip="Designation Can't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Role ID" SortExpression="RoleID" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
            <ItemTemplate>
                <asp:Label ID="lblRoleID" runat="server" Text='<%#Eval("RoleID") %>' CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:DropDownList ID="ddlAddRole" runat="server" AutoPostBack="true" Style="width: auto;"
                        CssClass="GridContent">
                    <asp:ListItem Text="Standard" Value="1" />
                    <asp:ListItem Text="TL/TC" Value="2" />
                    <asp:ListItem Text="AM" Value="3" />
                    <asp:ListItem Text="OM" Value="4" />
                    <asp:ListItem Text="Sr OM" Value="5" />
                    <asp:ListItem Text="Admin" Value="6" />
                </asp:DropDownList>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Shift Start Time" SortExpression="ShiftStartTime"
                HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White"
                Visible="true">
            <ItemTemplate>
                <asp:Label ID="lblShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>'
                    Style="width: 65px;" CssClass="GridContent" />
                <asp:RegularExpressionValidator ID="RegularExpValidatorddlAddShiftStartTime" runat="server"
                    ControlToValidate="txtAddShiftStartTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"
                    ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />
                <asp:RequiredFieldValidator ID="RFVAddShiftStartEdit" runat="server" ControlToValidate="txtAddShiftStartTime"
                    ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Shift Start Time can't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Shift End Time" SortExpression="ShiftEndTime" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" Visible="true">
            <ItemTemplate>
                <asp:Label ID="lblShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>'
                    Style="width: 65px;" CssClass="GridContent" />
                <asp:RegularExpressionValidator ID="RegularExpValidatorddlAddShiftEndTime" runat="server"
                    ControlToValidate="txtAddShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"
                    ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />
                <asp:RequiredFieldValidator ID="RFVAddShiftEndTimeEdit" runat="server" ControlToValidate="txtAddShiftEndTime"
                    ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Shift End Time can't be left empty.">
                </asp:RequiredFieldValidator>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Saturday Shift Start Time" SortExpression="WeekendShiftStartTime"
                HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White"
                Visible="true">
            <ItemTemplate>
                <asp:Label ID="lblWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>'
                    Style="width: 65px;" CssClass="GridContent" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Saturday Shift End Time" SortExpression="weekendshiftendtime"
                HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White"
                Visible="true">
            <ItemTemplate>
                <asp:Label ID="lblWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>'
                    CssClass="GridContent" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtAddWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>'
                    Style="width: 65px;" CssClass="GridContent" />
                <asp:RegularExpressionValidator ID="RegularExpValidatorAddddlWeekendShiftEndTime"
                    runat="server" ControlToValidate="txtAddWeekendShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"
                    ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Immediate Supervisor" SortExpression="BossName" HeaderStyle-Font-Bold="true"
                HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White" ControlStyle-Width="120px">
            <ItemTemplate>
                <asp:Label ID="lblSupervisorName" runat="server" CssClass="GridContent" Text='<%#Eval("BossName") %>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:DropDownList ID="ddlAddImmediateSupervisor" runat="server" AutoPostBack="true"
                    Style="width: auto;" CssClass="GridContent" DataSourceID="" DataTextField="UserName"
                    DataValueField="UserECode" AppendDataBoundItems="True">
                </asp:DropDownList>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Select" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre"
                HeaderStyle-ForeColor="White">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit"
                    Text="Edit" ForeColor="White" OnClick='LinkButton1_Click'>
                </asp:LinkButton>
            </ItemTemplate>
            <FooterTemplate>
            </FooterTemplate>
        </asp:TemplateField>
    </Columns>
    <PagerTemplate>
        <table width="100%">
            <tr>
                <td style="text-align: left">
                    Page Size:
                    <asp:DropDownList ID="ddPageSize" runat="server" EnableViewState="true" OnSelectedIndexChanged="ddPageSize_SelectedIndexChanged"
                            AutoPostBack="true" Style="width: 50px;">
                        <asp:ListItem Text="10"></asp:ListItem>
                        <asp:ListItem Text="25"></asp:ListItem>
                        <asp:ListItem Text="50"></asp:ListItem>
                        <asp:ListItem Text="75"></asp:ListItem>
                        <asp:ListItem Text="100"></asp:ListItem>
                    </asp:DropDownList>
                </td>
                <td style="text-align: right">
                    <asp:Label ID="lblPageCount" runat="server"></asp:Label>
                </td>
            </tr>
        </table>
    </PagerTemplate>
</cc1:GridView> 
```

C#代码：-

```
protected void gvUser_RowCommand(object sender, GridViewCommandEventArgs e)
{
    try
    {
        if (e.CommandName.Equals("Edit"))
        {
            Control ctrl = e.CommandSource as Control;
            if (ctrl != null)
            {
                GridViewRow _currenrtrow = ctrl.Parent.NamingContainer as GridViewRow;
                Label lblUserID = (Label)_currenrtrow.FindControl("lblUserID");
                string userID = lblUserID.Text.ToString();
                ScriptManager.RegisterStartupScript(this.Page, Page.GetType(), "OpenModalDialog", "<script type='text/javascript'>window.showModalDialog('Userinfo.aspx?code=" + userID.ToString() + "', null, 'unadorned:yes ;resizable:0 ;dialogWidth:800px ;dialogHeight:550px ;status:no ;scroll:no ;status=no;');</script>", false);

            }
        }
        if (e.CommandName.Equals("Select"))
        {

        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:05:40.850

```
protected void gvUser_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        try
        {
            if (e.CommandName.Equals("Edit"))
            {
                Control ctrl = e.CommandSource as Control;
                string userId;
                if (ctrl != null)
                {
                    GridViewRow _currenrtrow = ctrl.Parent.NamingContainer as GridViewRow;
                    Label lblUserID = (Label)_currenrtrow.FindControl("lblUserID");
                    if (lblUserID == null)
                    {
                        userId = StaticGlobalValue.RequestedUser.ToString();
                    }
                    else
                    {
                        userId = lblUserID.Text.ToString();
                        StaticGlobalValue.RequestedUser = userId;
                    }

                    ScriptManager.RegisterStartupScript(this.Page, Page.GetType(), "OpenModalDialog", "<script type='text/javascript'>window.showModalDialog('Userinfo.aspx?code=" + userId.ToString() + "', null, 'unadorned:yes ;resizable:0 ;dialogWidth:800px ;dialogHeight:550px ;status:no ;scroll:no ;status=no;');</script>", false);
                    gvUser.DataBind();
                }
            }

            if (e.CommandName.Equals("Select"))
            {

            }
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

创建了一个静态实体`RequestedUser`，它解决了我的问题。

# c# - LINQ 中的条件求和

> ID：14577435
> 
> 赞同：2
> 
> 时间：2013-01-29T07:06:48.253
> 
> 标签：c#, linq

此 sql 查询的 linq 查询是什么

```
SELECT 
      sum(IIF(jenis = 'primer',1,0)) as sum_primer, 
      sum(IIF(jenis = 'sekunder',1,0)) as sum_sekunder
FROM cooperations 
```

尝试从 101 个 Linq 样本中搜索相同的示例，但没有任何线索

**更新** 所以，我在我的 C# 中使用这个查询

```
var query = (from c in db_cooperations.cooperations
              group c by c.jenis into g
              select
              (new
              {
                sum_primer = g.Count(c => c.jenis == "primer"),
                sum_sekunder = g.Count(c => c.jenis == "sekunder")
              })).ToArray(); 
```

输出是

```
 sum_primer   sum_sekunder
    0             0 
    0             52
   250            0
    0             0
    0             0 
```

那么，我怎样才能删除零值，只返回一行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:10:12.260

```
var sum_primer = cooperations.Count(c => c.jenis == "primer");
var sum_secunder = cooperations.Count(c => c.jenis == "sekunder"); 
```

或在对数据库的单个查询中

```
var query = (from c in cooperations
             where c.jenis == "primer" || c.jenis == "sekunder"
             group c by c.jenis
             select new { Jenis = g.Key, Count = g.Count() }
            ).ToDictionary(x => x.Jenis, x => x.Count);

var result = new {
   sum_primer = query.ContainsKey("primer") ? query["primer"] : 0,
   sum_sekunder = query.ContainsKey("sekunder") ? query["sekunder"] : 0
}; 
```

将生成此 SQL（并且只返回两行）：

```
SELECT COUNT(*) AS [Count], [t0].[jenis] AS [Jenis]
FROM [cooperations] AS [t0]
WHERE ([t0].[jenis] = 'sekunder') OR ([t0].[jenis] = 'primer')
GROUP BY [t0].[jenis] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T07:11:12.670

您可以像这样实现它，以下是根据条件为您提供项目的计数

```
var data = db.CoOperations.
           GroupBy(x=>x.jenis )
           .select (new {
                sum_primer = g.Count(c => c.jenis == "primer"),
                sum_sekunder = g.Count(c => c.jenis == "sekunder"),
            }); 
```

# html - 将图像存储在数据库或物理路径中？

> ID：14577438
> 
> 赞同：0
> 
> 时间：2013-01-29T07:07:09.150
> 
> 标签：html, database, image

> **可能重复：**
> [做​​或不做：将图像存储在数据库中](https://stackoverflow.com/questions/815626/to-do-or-not-to-do-store-images-in-a-database)

我想知道在什么情况下我们应该将图像文件（不是路径，是存储二进制格式）存储在数据库中，在什么情况下应该存储在物理路径中？哪种方法对网络来说更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:26:16.253

来自 Microsoft 研究实验室：数据库或文件系统中的大型对象存储

> 小于 256K 的对象最好存储在数据库中，而大于 1M 的对象最好存储在文件系统中。在 256K 和 1M 之间，读写比和对象覆盖或替换率是重要因素。

参考：[http ://research.microsoft.com/apps/pubs/default.aspx?id=64525](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:17:17.793

1：以字节格式存储图像比以物理路径存储图像更安全、更快捷。

2：有一个场景当你有n没有。要存储的图像数量，或者您可以说如果您正在处理大量图像，那么您应该将图像存储在物理路径上，因为图像尺寸很大，并且会在数据库上产生不必要的开销，从而导致数据库性能不佳。

但是，如果您正在处理有限的编号。图像然后简单地将图像以字节格式（或您可以说是二进制）存储在您的关注数据库中。

# wordpress - 将 wp 图库短代码插入自定义字段 textarea

> ID：14577440
> 
> 赞同：1
> 
> 时间：2013-01-29T07:07:16.017
> 
> 标签：wordpress, shortcode, media-library

有没有办法将 wp 图库短代码插入自定义元框文本区域？我想要这样的东西：

带有文本区域的帖子/页面中的新元框，在文本区域下方有一个按钮可以打开 wp 浏览媒体库灯箱。然后当我们选择几张图片作为图库时，单击“插入图库”按钮会将短代码插入到 textarea 自定义字段中。

我能够显示媒体库，现在我不知道如何在单击按钮“插入图库”时将短代码插入自定义文本区域

到目前为止，这是我的代码：

HTML

```
<div class="uploader">
 <textarea name="settings[_cs_shortcode_gallery]" id="_cs_shortcode_gallery"></textarea>
 <input class="button tf-browse-btn" name="_cs_shortcode_gallery_button" id="_cs_shortcode_gallery_button" value="Browse Gallery"/>
</div> 
```

JS

```
var _custom_media = true,
      _orig_send_attachment = wp.media.editor.send.attachment;
  $('.tf-browse-btn').live('click', function(e) {
    var send_attachment_bkp = wp.media.editor.send.attachment;
    var button = $(this);
    var id = button.attr('id').replace('_button', '');
    _custom_media = true;
    wp.media.editor.send.attachment = function(props, attachment){
      if ( _custom_media ) {
        $("#"+id).val(attachment.url);
      } else {
        return _orig_send_attachment.apply( this, [props, attachment] );
      };
    }
    wp.media.editor.open(button);
    return false;
  });
  $('.add_media').on('click', function(){
    _custom_media = false;
  }); 
```

我现在想要实现的是：

*   打开模式时如何将创建图库选项卡设置为默认选项卡
*   将图库短代码插入自定义文本区域

详情请看下面的截图

[http://i.stack.imgur.com/m1l2e.png](http://i.stack.imgur.com/m1l2e.png)

[http://i.stack.imgur.com/y9Fi5.png](http://i.stack.imgur.com/y9Fi5.png)

# java - 如何在固定大小的画布上显示整个图像？

> ID：14577441
> 
> 赞同：1
> 
> 时间：2013-01-29T07:07:17.077
> 
> 标签：java, swing, applet

我正在使用 Jtree 作为图像列表并显示所选图像，但问题是如果图像尺寸大于画布尺寸（即 300 X 300），它仅显示图像的左上角，如何以固定方式显示整个图像尺寸画布？

我正在使用以下代码：

```
private void displayImage(File file) {

    try 
    {
        BufferedImage image = ImageIO.read(file);
        ta.Picture = image;
    }
    catch (Exception e) 
    {}

    Graphics g = ta.imageCanvas.getGraphics();
    g.clearRect(0, 0, 300, 300);
    g.drawImage(ta.Picture, 00, 00, this);

} // displayImage

public void valueChanged(TreeSelectionEvent e) 
{
    // TODO Auto-generated method stub
    FileTreeNode node = (FileTreeNode) tree.getLastSelectedPathComponent();

    if (node.isLeaf()) 
    {

        currentFile = node.file;

        File ff = new File("F:/images_blue/" + currentFile.getName());
        displayImage(ff);

    } else
        currentFile = null;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:37:46.427

我只想指出...

```
Graphics g = ta.imageCanvas.getGraphics();
g.clearRect(0, 0, 300, 300);
g.drawImage(ta.Picture, 00, 00, this); 
```

真是个坏主意。

`getGraphics`可能会返回`null`，并且充其量只是上一个重绘周期的快照，并且可能在下一个重绘周期被无效或取消引用。

您应该从类似的东西扩展`JPanel`并覆盖该`paintComponent`方法。这将允许您提供 getter 和 setter 作为图像管理的一部分，并允许您以自包含和可重用的方式生成缩放图像

您可以查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以获取信息

而且，根据我的评论，您可能想查看这些先前的问题以获取示例

*   [自动缩放 ImageIcon 到标签大小](https://stackoverflow.com/questions/14548808/scale-the-imageicon-automatically-to-label-size/14553003#14553003)
*   [Jpanel在重绘时调整大小](https://stackoverflow.com/questions/12797933/jpanel-resize-on-repaint/12798480#12798480)
*   [调整大小后的图像质量非常低——Java](https://stackoverflow.com/questions/14115950/quality-of-image-after-resize-very-low-java/14116752#14116752)
*   [Java：保持JPanel背景图像的纵横比](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:14:19.697

你可以像这样缩放 BufferedImage ..

```
BufferedImage before = getBufferedImage(encoded);
int w = before.getWidth();
int h = before.getHeight();
BufferedImage after = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
AffineTransform at = new AffineTransform();
at.scale(2.0, 2.0);
AffineTransformOp scaleOp = 
   new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);
after = scaleOp.filter(before, after); 
```

[我在这里找到了片段](https://stackoverflow.com/questions/4216123/how-to-scale-a-bufferedimage)

# jms - Hibernate 搜索，将 byte[] 转换为 List

> ID：14577445
> 
> 赞同：0
> 
> 时间：2013-01-29T07:07:24.947
> 
> 标签：jms, lucene, hibernate-search

从 Hibernate Search 3.1.1 开始，当想要将索引实体发送到 JMS 队列以进行进一步处理时，在处理`onMessage()`方法中 MDB 足以应用强制转换来获取 LuceneWork 列表，例如

```
List<LuceneWork> queue = (List<LuceneWork>) objectMessage.getObject(); 
```

但在 4.2.0 版本中，这不再是一个选项，因为它`objectMessage.getObject()`返回一个`byte[]`.

我怎么能把它反序列`byte[]`化成`List<LuceneWork>`?

我检查了这条消息，发现我有`JMSBackendQueueTask.INDEX_NAME_JMS_PROPERTY`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:58:37.267

您可以扩展[AbstractJMSHibernateSearchController](https://github.com/hibernate/hibernate-search/blob/master/hibernate-search-orm/src/main/java/org/hibernate/search/backend/impl/jms/AbstractJMSHibernateSearchController.java)并让它处理这些细节，或者查看它的源代码，其中包含：

```
indexName = objectMessage.getStringProperty(JmsBackendQueueTask.INDEX_NAME_JMS_PROPERTY);
indexManager = factory.getAllIndexesManager().getIndexManager(indexName);
if (indexManager == null) {
    log.messageReceivedForUndefinedIndex(indexName);
    return;
}
queue = indexManager.getSerializer().toLuceneWorks((byte[]) objectMessage.getObject());
indexManager.performOperations(queue, null); 
```

与旧版本 3.x 相比，需要牢记两个主要设计差异：

*   Serializer 服务是可插入的，因此需要查找
*   每个索引（由名称标识）可以有一个独立的后端

现在（默认情况下）使用 Apache Avro 执行序列化，因为较新的 Lucene 类不可序列化。

# sql - 获取 BLOB 数据并插入到表中

> ID：14577449
> 
> 赞同：1
> 
> 时间：2013-01-29T07:07:47.367
> 
> 标签：sql, oracle, plsql

我有一个 BLOB 内容存储在 MIME_TYPE = 'text/plain' 的表 (x_files) 中，我想解析此 BLOB 数据并将数据插入到具有 VARCHAR2 列的表 (TEMP_UPLOAD_DATA) 中。

你能帮我提供一个示例代码吗？如果你有？我已经编写了如下所述的代码 - 如果我执行 DBMS_OUTPUT 一切正常，但是当我尝试将数据插入表中时，一切都无法正常工作

是不是我需要先将 BLOB 转换为 CLOB，然后解析并将数据插入到表中？请求您的意见

我的数据库中的表：

```
Table_name: X_files
ID  BLOB_CONTENT    MIME_TYPE   FILE_NAME   LAST_UPDATED    CHARECTER_SET
7   BLOB    text/plain  testing_blob.txt    01/28/2013  - 

Table name: TEMP_UPLOAD_DATA 
Column Name Data Type   Nullable    Default Primary Key
UPLOAD_COLUMN   VARCHAR2(1000)  Yes - 

- 
```

我编写的代码：- 当我执行 DBMS_OUTPUT 时这工作正常，但当我尝试将数据插入表中时工作不正常。

```
DECLARE
l_num NUMBER(8);
i NUMBER(4);
lob_loc  BLOB;
update_details VARCHAR2(10000);
BEGIN
SELECT BLOB_CONTENT INTO lob_loc FROM x_files WHERE  id = 7; 
update_details := UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(lob_loc, 10000, 1));
l_num := (LENGTH(update_details)-LENGTH(REPLACE(update_details,'@@')))/LENGTH('@@');
for i in 1..l_num 
LOOP
DBMS_OUTPUT.PUT_LINE('STRING IS---' || SUBSTR(update_details,instr(update_details,'@@',1,i),(instr(update_details,'##',1,i)-instr(update_details,'@@',1,i)+1)));
--INSERT INTO TEMP_UPLOAD_DATA VALUES(SUBSTR(update_details,instr(update_details,'@@',1,i),(instr(update_details,'##',1,i)-instr(update_details,'@@',1,i)+1)));
END LOOP;
END; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T16:55:22.393

此示例显示将 blob 数据的子字符串插入 varchar2 列是多么简单。原始问题有无数不完整的设置脚本，代码混合了比问题要求更多的命令。

```
create table blob_table ( id number primary key, blob_content blob );
create table char_table ( id number, char_content varchar2(10) );

insert into blob_table 
     values (1, utl_raw.cast_to_raw('ABCDEFGHIJKLMNOPQRSTUVWXYZ'));

insert into char_table (id, char_content) 
     select bt.id, utl_raw.cast_to_varchar2(dbms_lob.substr(bt.blob_content, 10, 1)) 
       from blob_table bt 
      where bt.id = 1;

select * from char_table;

        ID CHAR_CONTENT
---------- ------------
         1 ABCDEFGHIJ 
```

# iphone - 如何更改 UIWebView Tap 事件

> ID：14577454
> 
> 赞同：2
> 
> 时间：2013-01-29T07:08:06.973
> 
> 标签：iphone, ios, uiwebview, uiactionsheet

当我在某个链接上时，如何更改`UIWebView` `tap`操作 Controls.like ..它会打开一个带有三个选项的...我需要更改此控件，例如 ..我需要再添加一个按钮...如何做那...如何禁用它并根据我的选择添加新的...`tap and hold``UIWebView``UIActionSheet``open` `copy` `add to reading list``UIActionsheet``UIActionSheet`

![在此处输入图像描述](../Images/e631718c4bdf4a0b00d181deae41dc9e.png)

**代码**

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSURL *requestURL = [ request URL];

if (navigationType == UIWebViewNavigationTypeLinkClicked)
{
    // Call your custom actionsheet and use the requestURL to do what you want :)

    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Contextual Menu"
                                                       delegate:self cancelButtonTitle:@"Cancel"
                                         destructiveButtonTitle:nil otherButtonTitles:nil];

    [sheet addButtonWithTitle:@"Save Page as Bookmark"];
    [sheet addButtonWithTitle:@"Open Page in Safari"];

    [sheet showInView:webView];
    return NO;
}

return YES;
}

- (void)viewDidLoad
{
[super viewDidLoad];

[webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];

webview.delegate=self;

}

- (void)actionSheet:(UIActionSheet *)actionSheet
clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == actionSheet.cancelButtonIndex) { return; }
switch (buttonIndex) {
    case 0:
    {
        NSLog(@"Item A Selected");
   NSLog(@"reg%@", request);

          NSURL *requestURL = [request URL];
        [webview loadRequest:[NSURLRequest requestWithURL:requestURL]];

        break;
    }
    case 1:
    {
        NSLog(@"Item B Selected");

        break;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:15:57.453

你可以这样做，点击链接然后使用你的操作表

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
{
    NSURL *requestURL = [ request URL];

    if (navigationType == UIWebViewNavigationTypeLinkClicked)
    {
        // Call your custom actionsheet and use the requestURL to do what you want :)
        return NO;
    }

    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

     webview.delegate=self;
     [webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];

} 
```

# android - android网格视图刷新

> ID：14577456
> 
> 赞同：0
> 
> 时间：2013-01-29T07:08:15.113
> 
> 标签：android, gridview

我有一个 GridView，我有一个自定义适配器，可以用自定义数据填充单元格，一些单元格有数据，而其他单元格有列表。列表是动态创建的，并使用自定义列表适配器填充。

单击列表项后，我想更新或刷新 GridView 内的所有内容，因此换句话说，更新/刷新需要在 GridView 的适配器内进行。

我该怎么做？

## 编辑#1

在我单击 GridView 内的列表之一中的项目后，我在适配器内使用此代码：

```
notifyDataSetChanged(); 
```

单击列表项后，应用程序崩溃，我在错误日志中得到以下信息：

```
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime  FATAL EXCEPTION: main
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime  java.lang.ClassCastException: android.widget.ListView
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at hnlapp.hairdresser.Adapter_Labels_GridView_Calendar_dayview.getView(Adapter_Labels_GridView_Calendar_dayview.java:428)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.AbsListView.obtainView(AbsListView.java:1409)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.GridView.makeAndAddView(GridView.java:1222)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.GridView.makeRow(GridView.java:268)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.GridView.fillSpecific(GridView.java:466)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.GridView.layoutChildren(GridView.java:1125)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.AbsListView.onLayout(AbsListView.java:1260)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.view.View.layout(View.java:7175)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1243)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.LinearLayout.onLayout(LinearLayout.java:1049)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:123)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:3683)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:507)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09:37:58.675    916 hnlapp.hairdresser  ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
09:38:05.195    60  system_process  ERROR   InputDispatcher channel '406e82a8 hnlapp.hairdresser/hnlapp.hairdresser.Page_Login (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
09:38:05.195    60  system_process  ERROR   InputDispatcher channel '406e82a8 hnlapp.hairdresser/hnlapp.hairdresser.Page_Login (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

该错误消息指的是我的 getView 方法中的这行代码：

```
 Label = (TextView) convertView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:31:53.477

尝试访问 textview 如下：

> ```
> Label = (TextView) convertView.findViewByID(R.id.textview); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:19:17.900

只需调用`notifyDataSetChanged`适配器的方法。

# c# - C# 日期时间格式更改

> ID：14577470
> 
> 赞同：0
> 
> 时间：2013-01-29T07:09:10.820
> 
> 标签：c#, asp.net

我想将 datetime.now 格式（**“dd/mm/yyyy hh:mm:ss AM/PM”）**转换为美国时间格式，即**“mm-dd-yyyy hh:mm:ss AM/PM”**。此外，我希望转换后的格式为日期时间而不是字符串，因为它存储在数据库中，并且数据库中的字段是日期时间格式，所以它不会采用字符串。请建议....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T07:10:59.997

值`DateTime`没有*格式*。`DateTime.Now`没有格式，如果您进行任何类型的转换，如果您有 a `DateTime`，则没有格式。格式的概念仅在您转换为字符串或从字符串转换时适用 - 并且`DateTime.Now`是 a `DateTime`，而不是 a `string`。

`DateTime.Now`只需使用(或)将值插入数据库`DateTime.UtcNow`，您将保留重要部分的*数据。*

您应该只在实际*需要*时执行字符串转换——此时您可以使用自定义日期[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-GB/library/system.datetime.tryparseexact.aspx)/[时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。（用于用户输入；对于真正*应该*有效的机器输入，使用.）[`DateTime.ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)`TryParseExact`*[`DateTime.ParseExact`](http://msdn.microsoft.com/en-GB/library/system.datetime.parseexact.aspx)*

 *请注意，使用具有不变文化的自定义日期/时间模式，或具有“真实”文化（例如用户文化）的[标准日期/时间模式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)*通常是*一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:27:31.910

```
DateTime usDateTimeFormat = DateTime.Parse(DateTime.Now , 
System.Globalization.CultureInfo.GetCultureInfo("en-us")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:18:39.230

尝试这个。[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#GeneralDateShortTime)

```
DateTime.Now.ToString("g",CultureInfo.CreateSpecificCulture("en-us")) 
```*

# architecture - 这些有用的计算机科学课程吗？

> ID：14577472
> 
> 赞同：-2
> 
> 时间：2013-01-29T07:09:39.137
> 
> 标签：architecture, theory

除了设计/分析和软件工程课程，我还必须参加“计算机体系结构”课程。我应该避免服用其中任何一种吗？它们有什么用还是没用？

**计算机体系结构：** 布尔代数、数据表示、组合电路和最小化、时序电路。计算机系统的组织和系统元素的设计，包括 ALU、存储器和接口。一些汇编语言编程。高性能计算机架构，包括大规模并行 SIMD 和 MIMD 机器以及分布式架构。

**以及计算机理论课程，其中包括：** 递归、正则集、正则表达式、有限自动机、上下文无关语法、下推自动机。运行机器，邮政机器，邮政定理，明斯基定理。决定论和非决定论。不确定性，停机问题。递归函数理论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:29:33.240

如果您要进行任何严肃的编程，您很可能会在某些时候使用递归、正则表达式、有限/下推自动机。虽然这门课可能是理论上的，但您将了解关于什么可以计算什么不能计算的基本思想。我们今天使用的每台计算机（量子计算机除外）本质上都是一台图灵机。

计算机体系结构有助于了解计算机的构建方式，但如果您要进行高级编程，则无需确切了解这些细节。如果您计划有一天在 Linux 内核上工作，编写驱动程序或自动化组件，那么您需要了解这些内容。

# ios - 升级到 xcode 4.6 和 iOS 6.1 后出错“用作前一个参数的名称，而不是作为选择器的一部分”

> ID：14577478
> 
> 赞同：12
> 
> 时间：2013-01-29T07:10:24.833
> 
> 标签：ios, objective-c, xcode, xcode4.6, ios6.1

更新到 xcode 4.6 和 ios6.1 后，我收到这个新错误**“'objectType' used as the name of the previous parameter 而不是作为选择器的一部分**”。我多次得到这个。有任何想法吗？

PS：它显示的方法是反向地理编码的自定义方法。

```
-(void) getAddress: (NSString *) objectType: (CLLocationCoordinate2D) objectCoordinate 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T07:20:24.203

它说这`objectType`是`NSString`您的方法中对象的名称，而不是方法名称的一部分，不应将其用作`objectType: (CLLocationCoordinate2D) objectCoordinate`通常表示方法名称的一部分。

理想情况下你应该改变，

```
-(void) getAddress: (NSString *) objectType: (CLLocationCoordinate2D) objectCoordinate 
```

更易读，

```
-(void) getAddress:(NSString *)objectType coordinate:(CLLocationCoordinate2D) objectCoordinate; 
```

上述错误也可以通过`objectType`在方法定义中和下一个参数之间放置一个空格来修复（例如：-）`-(void)getAddress:(NSString *)objectType : (CLLocationCoordinate2D)objectCoordinate`。注意后面的空格`objectType`。

***更新：***

要回答评论中的问题，您可以使用以下行来抑制这些警告：

```
#pragma clang diagnostic ignored "-Wmissing-selector-name" 
```

将此添加到您的 pch 文件中。我不确定这是否适用于您来自图书馆的情况，但您可以尝试一下。查看[此 clang-trunk](https://github.com/eerolanguage/clang-trunk/blob/master/test/SemaObjC/warning-missing-selector-name.m)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T00:14:17.360

亲爱的，这都是关于**间距**的......正如@Martin R所说的那样：这个，[有争议的更好的问题](https://stackoverflow.com/questions/14660091/xcode-4-6-used-as-the-name-of-the-previous-parameter-rather-than-as-part-of-the)......

> “在第二个参数之前插入一个空格就足够了。”

足够的意思，在这里，Xcode 关闭了地狱..

本着那种奇怪的语法琐事的精神......这是我最喜欢的 Cocoa 头文件，EVER。是的，这些都是有效的方法名称，呵呵。

```
@interface NSString (JASillyString)
-:a;
-:a :b;
-:a :b :c;
-:a :b :c :d;
-:a :b :c :d :e;
-:a :b :c :d :e :f;
-:a :b :c :d :e :f :g;
-:a :b :c :d :e :f :g :h;
-:a :b :c :d :e :f :g :h :i;
-:a :b :c :d :e :f :g :h :i :j;
-:a :b :c :d :e :f :g :h :i :j :k;
-:a :b :c :d :e :f :g :h :i :j :k :l;
-:a :b :c :d :e :f :g :h :i :j :k :l :m;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u :v;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u :v :w;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u :v :w :x;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u :v :w :x :y;
-:a :b :c :d :e :f :g :h :i :j :k :l :m :n :o :p :q :r :s :t :u :v :w :x :y :z;
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:19:13.477

您的方法是用空格声明选择器，

```
-(NSString *)testMethod:(double)price :(BOOL)flag; 
```

注意提到 .h 和 .m 都是相同且相等的空格

当检索方法时，那个时候要小心方法及其参数。像 [self testMethod:4.5(space):TRUE];

# java - 当使用意图启动其他活动时，单选按钮如何保持选中状态？

> ID：14577482
> 
> 赞同：0
> 
> 时间：2013-01-29T07:10:49.963
> 
> 标签：java, android, android-intent, radio-button

我的主要活动有一组单选按钮。当它们中的每一个被单击时，它会启动一个不同的活动。所有活动都具有相同的 XML，但输入和功能不同。我的意思是广播组对所有活动都是通用的。例如：当第一个单选按钮被点击时，它会启动一个不同的活动并且单选框选择消失。我需要单击的单选按钮选择保持打开状态，直到单击组中的不同单选按钮，尽管它处于不同的活动中。我如何让这个工作？任何帮助将不胜感激！

```
public void onRadioButtonClicked(View view){
     boolean checked = ((RadioButton) view).isChecked();

    // Check which radio button was clicked
    switch(view.getId()) {
        case R.id.radio_199os:
            if (checked){

                Intent intent = new Intent(MainActivity.this, second.class);
                startActivity(intent);

            }

            break;
        case R.id.radio_399os:
            if (checked){
                Intent intent = new Intent(MainActivity.this, Third.class);
                startActivity(intent);
            }                 

            break;
        case R.id.radio_2000os:
            if (checked){
                Intent intent = new Intent(MainActivity.this, Fourth.class);
                startActivity(intent);
            }
                //
            break;
    }         

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:19:03.000

您需要添加以下内容以进行选中检查

```
radio_2000os.setChecked(true); 
```

取消选中其他人

```
radio_199os.setChecked(false); 
```

你的代码是这样的

```
 public void onRadioButtonClicked(View view){
     boolean checked = ((RadioButton) view).isChecked();

    // Check which radio button was clicked
    switch(view.getId()) {
        case R.id.radio_199os:
            if (checked){

                Intent intent = new Intent(MainActivity.this, second.class);
                startActivity(intent);
                 radio_2000os.setChecked(false);
                 radio_399os.setChecked(false);
                 radio_199os.setChecked(true);

            }

            break;
        case R.id.radio_399os:
            if (checked){
                Intent intent = new Intent(MainActivity.this, Third.class);
                startActivity(intent);
                 radio_2000os.setChecked(false);
                 radio_399os.setChecked(true);
                 radio_199os.setChecked(false);
            }                 

            break;
        case R.id.radio_2000os:
            if (checked){
                Intent intent = new Intent(MainActivity.this, Fourth.class);
                startActivity(intent);
                 radio_2000os.setChecked(true);
                 radio_399os.setChecked(false);
                 radio_199os.setChecked(false);
            }
                //
            break;
    }         

} 
```

# javascript - 我想使用 div 作为 twitter 引导模式链接

> ID：14577486
> 
> 赞同：1
> 
> 时间：2013-01-29T07:11:02.943
> 
> 标签：javascript, twitter, modal-dialog

可以帮我？我想使用 div 作为 twitter 引导模式链接。当我点击一个 div 时，它会调用一个模态。是否可以？如果可能的话，请告诉我一个方法。我认为这是可能的，但我不知道该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:21:05.057

`$modal.modal('show');`在您的`onclick`事件处理程序中使用。

**HTML：**

```
<div class="my-div"></div>

<div class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div> 
```

**JavaScript：**

```
var $modal = $('.modal').modal({
    show: false
});
$('.my-div').on('click', function() {
    $modal.modal('show');
}); 
```

**[演示](http://jsfiddle.net/f0t0n/RSJAv/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T07:22:12.033

这是[一个演示链接](http://jsfiddle.net/jeF7F/)。

您的 HTML：

```
<div data-toggle="modal" href="#example">Launch modal</div>

<div id="example" class="modal hide fade in" style="display: none;">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>This is a Modal Heading</h3>
    </div>
    <div class="modal-body">
        <h4>Text in a modal</h4>
        <p>You can add some text here.</p>              
    </div>
    <div class="modal-footer">
        <a href="#" class="btn btn-success">Call to action</a>
        <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
</div> 
```

你的 JS（假设你已经包含了所需的引导文件，包括 JS 和 CSS）：

```
$(function () { 
   $("#example").modal({show:false});  
}); 
```

# asp.net-mvc - 如何为我的 MVC 4 应用程序创建自定义授权属性？

> ID：14577488
> 
> 赞同：1
> 
> 时间：2013-01-29T07:11:07.133
> 
> 标签：asp.net-mvc, authentication, custom-attributes, asp.net-roles, custom-authentication

这个问题可能有很多重复项。但我忽略了 MVC 的默认成员身份，并使用我的自定义登录和 cookie。这就是为什么不能像示例中那样创建自定义授权属性。我有这样的用户模型：

```
public class MyUserModel
{
 public string Id{ get; set; }
 public string UserName { get; set; }
 public string Password { get; set; }
 public bool RememberMe { get; set; }
 public bool RoleId { get; set; }
} 
```

这是我的登录操作：

```
[HttpPost]
public ActionResult LogIn(MyUserModel model)
{
    if ((Request.Browser.Cookies))
       {
        if ((Request.Cookies["UserInfo"] == null))
         {
          if (model.RememberMe)
           {                           
            Response.Cookies["UserInfo"].Expires = DateTime.Now.AddDays(30);
           }
           else
           {
            Response.Cookies["UserInfo"].Expires = DateTime.Now.AddMinutes(Session.Timeout);
            }
              Response.Cookies["UserInfo"]["UserName"] = model.UserName;
              Response.Cookies["UserInfo"]["Password"] = model.Password;
              Response.Cookies["UserInfo"]["Id"] = model.Id.ToString();
            }                    
            else
            {
              Response.Cookies["UserInfo"]["UserName"] = model.UserName;
              Response.Cookies["UserInfo"]["Password"] = model.Password;
              Response.Cookies["UserInfo"]["Id"] = model.Id.ToString();
            }
         }
 return RedirectToAction("Index", "Home");
} 
```

我需要通过**RoleId**创建自定义授权属性。顺便说一句，我已经 `bool UserInRole(roleId), bool IsUserAuthenticated()`准备好了方法。

抱歉英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:25:00.597

本教程很棒。您可以在此视频中清楚地了解自定义授权。 [http://www.youtube.com/watch?feature=player_embedded&v=BsxUsyMSGeA](http://www.youtube.com/watch?feature=player_embedded&v=BsxUsyMSGeA)

# java - 将所有 + 替换为 -

> ID：14577491
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:11:17.900
> 
> 标签：java

我正在尝试将一个`+`字符替换为`hyphen`我的字符串中的一个字符。

```
String str = "word+word";
str.replaceAll('+ ', '-'); 
```

我尝试使用替换，但它抛出了一个`exception`。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:14:13.620

只需使用`replace`：

```
str = str.replace('+', '-'); 
```

这个不适用于正则表达式，但可以按原样使用字符。
此外，正如您所见，您必须再次重新评估`str`变量的值，因为`String`在 Java 中是不可变的。在这种情况下，方法`replace`不会更改当前`String`( `str`)，而是创建一个替换`+`为“-”的新方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T07:12:41.830

利用

```
str = str.replaceAll("\\+", "-"); 
```

您的代码中有一些错误：

*   [replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)接受字符串，而不是字符
*   `+`char 必须转义，因为第一个参数是正则表达式（并且它`\`本身必须在 java 字符串文字中转义）
*   您必须返回函数：由于 String 是不可变的，因此函数不会更改它，而是返回另一个字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:13:32.410

该`replaceAll`函数将*正则表达式*作为其第一个参数。碰巧这`+`是正则表达式语言中的一个特殊字符。尝试替换`+`为`\\+`. 这将转义加号，从而使代码将其视为普通字符。

此外，该`replaceAll`方法会产生一个字符串，因此这不起作用。尝试做：

```
String str = "word+word";
str = str.replaceAll("\\+ ", "-"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T07:14:22.623

`replaceAll´ 用于正则表达式，字符串是不可变的。利用：

```
str = str.replace("+", "-"); 
```

反而...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T07:13:54.467

在 replaceAll 中使用 "" 而不是 ''。

String java.lang.String.replaceAll（字符串正则表达式，字符串替换）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T07:21:44.447

如果您不确定需要使用的转义序列，

你可以简单地做到这一点。

```
str = str.replaceAll(Pattern.quote("+"), "-"); 
```

这将自动转义正则表达式预定义的标记以以文字方式匹配

# oracle - 将日期字符串转换为日期时出错

> ID：14577496
> 
> 赞同：0
> 
> 时间：2013-01-29T07:11:43.127
> 
> 标签：oracle, date-arithmetic, ora-01858

在我的项目中 my_table 中任何事件的时间都以数字格式存储。现在我必须将其转换为 oracle 日期时间格式。

下面是一个解释：

**示例 1：**
•Sched_Arr_Tm = 0450，将等于凌晨 04:30（前 2 个是 HH（24 小时制。由于 04 < 12，因此只需将该数字用作小时）），接下来的 2 个是小时的小数（0.50 * 60 分钟 = 30 分钟）

•Sched_Arr_Tm = 2100，将等于晚上 9:00（因为 21> 12，然后取 21-12=9）

•Sched_Arr_Tm = 1475，将等于 02:45 Pm（前 2 个是 HH（24 小时制。因为 14 > 12。然后取 14-12=2），然后使用该数字作为小时））和下一个 2是一小时的小数（0.75 * 60 分钟 = 45 分钟）

•Sched_Arr_Tm = 0075，将等于上午 12:45（因为小时 = 00，那么小时 = 12），接下来的 2 是小时的小数（0.75 * 60 分钟 = 45 分钟）

我可以根据上述登录提取数据，但在将其转换为日期时出错。

```
select sched_arr_tm,
    LPAD(substr(tn.sched_arr_tm, 1,length(tn.sched_arr_tm) - 2),2,'0') as HH,
    RPAD(TRUNC(TO_NUMBER(substr(tn.sched_arr_tm,3,length(tn.sched_arr_tm) - 2)) * .60,0),2,'0') as MM,
    '00' AS SS,
    LPAD(substr(tn.sched_arr_tm,1,length(tn.sched_arr_tm) - 2),2,'0')
    ||':' ||
    RPAD(TRUNC(TO_NUMBER(substr(tn.sched_arr_tm,3,length(tn.sched_arr_tm) - 2)) * .60,0),2,'0') 
    ||':'||
    LPAD(0,2,0) AS DTTM,
    TO_DATE(LPAD(substr(tn.sched_arr_tm,1,length(tn.sched_arr_tm) - 2),2,'0')
          ||':' ||
           RPAD(TRUNC(TO_NUMBER(substr(tn.sched_arr_tm,3,length(tn.sched_arr_tm) - 2)) * .60,0),2,'0') 
          ||':'|| 
           LPAD(00,2,0),'HH24:MI:SS') AS DTTM,
   tn.sched_slip_arr_tm 
```

来自 MY_TABLE；

我收到此错误：

> ORA-01858: 在需要数字的地方发现了一个非数字字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:42:42.180

你可以这样做：

```
SQL> with data as (select 450 Sched_Arr_Tm from dual
  2                union all
  3                select 1475 from dual
  4                union all
  5                select 2100 from dual)
  6  select Sched_Arr_Tm, to_date(hours||':'||(60*(mins/100)), 'hh24:mi')
  7    from (select Sched_Arr_Tm, substr(Sched_Arr_Tm, -2) mins,
  8                substr(Sched_Arr_Tm, 1, length(Sched_Arr_Tm)-2) hours
  9            from data)
 10  /

SCHED_ARR_TM TO_DATE(HOURS||':
------------ -----------------
         450 01-jan-2013 04:30
        1475 01-jan-2013 14:45
        2100 01-jan-2013 21:00

SQL> 
```

# c++ - 如何使用向量和对象构造函数初始化对象向量？

> ID：14577497
> 
> 赞同：4
> 
> 时间：2013-01-29T07:12:02.250
> 
> 标签：c++, vector, c++11, initialization

如何 `std::vector<std::ifstream>`从现有`std::vector<std::string>`的要打开的文件的名称进行初始化？

没有初始化`vector`，我可以使用

```
std::vector<std::string> input_file_names;
// Populate the vector with names of files that needs to open.
// ...
std::vector<std::ifstream> input_files_;
for (auto const & input_file_name : input_file_names) {
  input_files_.emplace_back(input_file_name);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T07:23:49.637

在 c++11 中，`std::ifstream`构造函数将 a`std::string`作为参数。`std::vector`将其与复制构造函数一起字符串，这应该可以工作：

```
std::vector<std::string> filenames;
std::vector<std::ifstream> files(filenames.begin(), filenames.end()); 
```

# c# - 需要将xml解析转换为json解析

> ID：14577498
> 
> 赞同：1
> 
> 时间：2013-01-29T07:12:04.233
> 
> 标签：c#, json, windows-phone-7, json.net

嗨，我有一个调用 api v1 的 twiiter 应用程序，它是一个 xml 输出。

使用 twiter api v1.1 输出为 json 格式。

xml解析代码是

```
 var xmlElement = XElement.Parse(response.Content);
        var statusList = (from item in xmlElement.Elements("status")
                          select new ItemViewModel
                          {
                              UserName = GetChildElementValue(item, "user", "screen_name"),
                              DisplayUserName = GetChildElementValue(item, "user", "name"),
                              TweetText = (string)item.Element("text"),
                              CreatedDate = GetCreatedDate((string)item.Element("created_at")),
                              Image = GetChildElementValue(item, "user", "profile_image_url"),
                              Id = (long)item.Element("id"),
                              NewTweet = true,
                              Source = (string)item.Element("source"),
                          }).ToList(); 
```

现在我需要更改此代码以解析 json 输出。

请任何人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:51:41.107

最简单的更改是将您的 LINQ to XML 代码移植到[Json.NET中使用 LINQ to JSON](http://james.newtonking.com/projects/json-net.aspx)

文档：[使用 LINQ 查询 JSON](http://james.newtonking.com/projects/json/help/?topic=html/QueryingLINQtoJSON.htm)

# java - Jsoup 在 Google Maps API 上返回错误 400

> ID：14577501
> 
> 赞同：3
> 
> 时间：2013-01-29T07:12:07.293
> 
> 标签：java, api, http, google-maps, jsoup

我正在做一个项目，需要我在谷歌地图上找到一些商店的坐标。我已经有了每家商店的地址。

我玩过一些[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/#StatusCodes)，我认为它们是我需要的：我的代码需要做的就是连接到 DBMS，检索 item_id 和地址，为地理编码 API 生成一个有效的 URL 并处理它的 JSON 数据会得到。

我不明白为什么，但我生成的 URL 在我的浏览器（Chrome 23 和最新的 Safari、OS X）中有效，但在 Jsoup 中无效。我在 Chrome 中查看了页面的源代码，看起来它是完全有效的 HTML。那么 Jsoup 做错了什么？

代码片段（可运行，会给你我得到的相同异常）：

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

public class RandomClass {
     public static void main(String args[]) {
     Document doc = null;
     try {
        String url = "http://maps.googleapis.com/maps/api/geocode/json?address=0+164+W+75th+St,+New%20York,+NY+10024&sensor=false";

        String ua = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17";
        doc = Jsoup.connect(url).timeout(60 * 1000).userAgent(ua).get();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

投掷

```
org.jsoup.UnsupportedMimeTypeException: Unhandled content type. Must be text/*, application/xml, or application/xhtml+xml. Mimetype=application/json; charset=UTF-8, URL=http://maps.googleapis.com/maps/api/geocode/json?address=164+W+75th+St,+New%20York,+NY+10024&sensor=false
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:436)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)
at asdru.RandomClass.main(RandomClass.java:16) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:17:28.033

试试这个

```
Jsoup.connect(url).ignoreContentType(true).execute().body(); 
```

或者

```
Jsoup.connect(url).ignoreContentType(true).timeout(60 * 1000).userAgent(ua).get(); 
```

# c++ - 在 ATL 应用程序中获取 ERROR_RESOURCE_TYPE_NOT_FOUND

> ID：14577505
> 
> 赞同：2
> 
> 时间：2013-01-29T07:12:24.507
> 
> 标签：c++, atl

当我尝试从资源中加载图标时，我收到 ERROR_RESOURCE_TYPE_NOT_FOUND 错误。

```
CComModule module;
...
module.Init(nullptr, instance); //in WinMain
...
HICON appIco = LoadIcon(module.GetResourceInstance(), MAKEINTRESOURCE(IDI_APPLICATION)); 
```

ERROR_RESOURCE_TYPE_NOT_FOUND 来自 LoadIcon

# ios - xcode：我需要将在 secondView 控制器中捕获的 imageView 传递给第一个控制器

> ID：14577510
> 
> 赞同：0
> 
> 时间：2013-01-29T07:12:47.617
> 
> 标签：ios, xcode

```
 (IBAction)captureButton:(id)sender {

    captureButton.hidden = YES;
    cancelButton.hidden = YES;

    currImage = [signatureViewController imageWithView:self.view];
    NSLog (@"image %@",currImage);
    imgView = [[UIImageView alloc]initWithFrame:CGRectMake(150,100,300,350)];
    imgView.backgroundColor = [UIColor blackColor];
    imgView.image = currImage;
    [self.view addSubview:imgView];
} 
```

捕获 imageView 现在需要将其传递给第一个 Controller 中的 signView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:12:50.470

我已经使用 NSUser 默认值做到了这一点。在 secondViewController 中：

```
-(IBAction)doneAction:(id)sender
{
    imgView.image = currImage;
    NSData *imageData = UIImagePNGRepresentation(currImage);
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:imageData forKey:@"imageDataKey"];
    NSLog (@"Data Saved");
} 
```

我已将此保存的图像分配给 -(void)viewWillAppear: 方法中的 firstController 中的图像视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:48:52.897

您可以通过多种方式将图像从一个视图控制器传递到另一个视图控制器，其中一些在下面列出

1.  在应用程序委托中创建一个 imageview 对象。声明属性并合成它以在其他类中访问它。现在创建应用代理共享实例并在第二个视图控制器的 captureButton 方法中设置应用代理的图像视图对象。要再次访问同一图像，请在第一个视图控制器中创建应用程序委托文件的共享实例，并使用应用程序代理图像视图属性来获取图像。

2.  第二种方法是使用委托方法

    ```
     //Declare delegate in second view controller
        @protocol SecondViewControllerDelegate

        -(void)setTheImage:(UIImage *)img

        @end

        //Declare property of delegate protocol
        @property (assign)id<SecondViewControllerDelegate> delegate;

        //synthesize the variable 
        @synthesize delegate;

        //Extend SecondViewControllerDelegate in first view controller by importing secondviewController in first view controller
        #import secondviewController.h

            @interface firstviewController : UIViewController<SecondViewControllerDelegate> 
    ```

    // 现在无论你在哪里创建 SecondViewController 的对象，如下设置委托让我们说 objSecondViewController 是你的视图控制器的对象

    ```
    objSecondViewController.delegate=(id)self;

    //Now define delegate method of  SecondViewControllerDelegate

    -(void)setTheImage:(UIImage *)img
    {
    //here set the image img to your image view present in first view controller
    }
    //Now lastly in second view controller in captureButton function call the function

    [delegate captureButton:currImage]; 
    ```

3.  第三种方法是使用第一个视图控制器的全局声明并通过声明第一个视图控制器的图像视图的属性和合成在 captureButton 中设置图像视图

# php - jQuery Ajax TinyMCE

> ID：14577518
> 
> 赞同：1
> 
> 时间：2013-01-29T07:13:21.197
> 
> 标签：php, ajax, tinymce

我有一个从 MySQL 表为 TinyMCE动态生成的[链接列表。](http://www.tinymce.com/wiki.php/Configuration%3aexternal_link_list_url)这可以正常显示表中的所有链接。现在我试图通过 ajax 将一个值传递给生成链接列表的 php 文件，以根据子学科缩小查询范围：

```
<script type="text/javascript">
$(document).ready(function() {

$("#sub_discipline").change(function(){
    $.ajax({
      url: "../scripts/tiny_mce/lists/link_list.js.php",
      type: "post",
      data: {
sub_discipline : $('#sub_discipline').val()
},
      success: function(data){

      }
    });

});
}
);
</script> 
```

问题是链接列表现在没有显示在 TinyMCE 中，可能是因为该值没有被传递。我可以通过传递 URL 字符串中的值的 link_list.js.php 获得结果，因此发生了其他事情。要么是上面的 ajax 调用错误，要么是 TinyMCE 在编辑器加载时加载链接列表，之后无法更新列表。

仅供参考，如果这可以帮助其他人，link_list.js.php 可以很好地为 TinyMCE 创建链接列表：

```
<?php Header("content-type: application/x-javascript"); ?>

<?php
require_once('../../../connection/connect.php');
mysql_select_db($database, $connection);

$sub_discipline = $_POST['sub_discipline'];

$query = "SELECT link_title, url FROM link WHERE sub_discipline_fk = '$sub_discipline'";
$result = mysql_query($query, $connection) or die(mysql_error());

$links = array();

while($row = mysql_fetch_assoc( $result)){
     $links[$row['link_title']] = $row['url'];

}

$o = null;
$count = count($links);

$i = 1;
foreach($links as $text => $url){
    $o .= sprintf(('["%1$s", "%2$s"]'),

    $text,
    $url

    );

    if($i < $count)
    $o .= ',';
    $i++;
}

?>

var tinyMCELinkList = new Array(

<?php echo $o; ?>

); 
```

链接列表作为选项添加到 tinyMCE.init 中：

```
<script type="text/javascript">
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "print,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,formatselect,fontsizeselect,|,forecolor,backcolor",
        theme_advanced_buttons2 : "cut,copy,paste,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,|,insertdate,inserttime,preview,|,fullscreen",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,|,sub,sup,|,charmap,emotions,iespell,media,|,ltr,rtl",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Skin options
        skin : "o2k7",
        skin_variant : "silver",

        // Drop lists for link/image/media/template dialogs
        external_link_list_url : "../scripts/tiny_mce/lists/link_list.js.php",
        external_image_list_url : "js/image_list.js",
        media_external_list_url : "js/media_list.js",

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:16:52.870

如果我正确理解了您的要求，那么当 tinyMCE 在 textarea 模式下运行时，您在 POST 上没有收到任何数据...

尝试添加 tinyMCE.triggerSave();

```
 $("#sub_discipline").change(function(){
      tinyMCE.triggerSave();
$.ajax({ 
```

# windows-phone-7 - 如何在 wp7 中使用 listpicker selectionChanged 事件

> ID：14577520
> 
> 赞同：2
> 
> 时间：2013-01-29T07:13:26.883
> 
> 标签：windows-phone-7, windows-phone-7.1, listpicker

我是 Wp7 的新手，使用事件开发应用程序`ListPicker`并使用`SelectionChanged`事件来获取选定的数据表单 listPicker，但是`SelectionChanged`当我使用它并获取时遇到事件问题，`NullReferenceException`但是当我使用相同的代码时，`button_Click`它可以完美运行并获取选定的文本

我的 C# 代码是：

```
 private void listPicker1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ListPickerItem lpi = (ListPickerItem)listPicker1.SelectedItem;//this code is working in click event
        MessageBox.Show(lpi.Content.ToString());
    } 
```

我的 Xaml 代码是

```
<toolkit:ListPicker x:Name="listPicker1" Grid.Row="0" ExpansionMode="ExpansionAllowed" SelectionChanged="listPickerCountryLogin_SelectionChanged" HorizontalAlignment="Left" Margin="14,43,0,0" VerticalAlignment="Top" Width="436" FullModeHeader="Select Country" Background="White" BorderBrush="White">
            <toolkit:ListPicker.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Country}" Width="250" />
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Country}" Width="300" Margin="0,0,0,20" FontSize="44"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
        </toolkit:ListPicker> 
```

但我想获取文本表单`SelectionChanged`事件？

如何实现这一点:)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T07:08:29.690

我也遇到了同样的问题我也遇到了`NullReferenceException`

试试这个对我来说很好

1）如果您使用静态`ListPickerItems`方式而不`DataBinding`使用此

```
private void listPicker1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ListPickerItem lpi = (sender as ListPicker).SelectedItem as ListPickerItem;
    MessageBox.Show("selected item is : " + lpi.Content);
} 
```

2) 如果您正在使用`DataBinding`显示`listPickerItems`

```
 private void listPicker1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
     Countries item = (sender as ListPicker).SelectedItem as Countries;
     MessageBox.Show("Selected Item is : " + item.Country);
} 
```

这里假设您准备了一个`Countries`具有`country`属性的类，您需要将所选项目类型转换为国家类然后只有您得到结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T00:47:03.523

在我的列表选择器中使用 SelectionChanged 事件时，我遇到了同样的问题，这就是我所拥有的：

```
// My listpicker is LpBluetoothPaired

 private void LpBluetoothPaired_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

         rcvData.Text = LpBluetoothPaired.SelectedItem.ToString();

    } 
```

但是打开应用程序时出现异常，所以我修复了它：

```
 private void LpBluetoothPaired_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

       if (LpBluetoothPaired.SelectedItem != null) {
            rcvData.Text = LpBluetoothPaired.SelectedItem.ToString();
        }
    } 
```

看起来在应用程序打开时调用了该事件，但当时仍然没有 selectedItem，因此为了避免异常并仅满足 rcvData 文本框，我检查它是否不为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:14:23.987

从后面的代码设置 ItemsSource 时，有时会触发 SelectionChanged 事件。因此，在这种情况下 selectedItem 可能为空。

因此，在您的 SelectionChanged 代码中添加这一行并尝试。

```
private void listPicker1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if(listPicker1.SelectedIndex == -1) //otherwise (listPicker1.SelectedItem == null) also works
    return;
    ListPickerItem lpi = (ListPickerItem)listPicker1.SelectedItem;//this code is working in click event
    MessageBox.Show(lpi.Content.ToString());
} 
```

如果问题仍然存在，请在 SelectionChanged 处理程序中放置一个断点，并观察值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-20T09:15:35.820

当数据加载到 listpicker 时，它会触发 selectionchanged 事件。因此，为此将您的代码放入 Try-catch 中，对于 selectionchanged，请写下：

```
private void listPicker1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
     try
     {
        Countries SelectedCountries =e.AddedItems[0] as Countries;
        String SelectedCountry = SelectedCountries.Country;
     }
     catch
     {
     }
} 
```

# java - 如何将服务传递给 EmptyInterceptor 类？

> ID：14577521
> 
> 赞同：1
> 
> 时间：2013-01-29T07:13:27.590
> 
> 标签：java, spring, hibernate-mapping

```
public class Auditing extends EmptyInterceptor {

    @Resource
    private ApplicationService applicationService;

    public boolean onFlushDirty(Object entity, Serializable id,Object[] currentState,   Object[] previousState, String[] propertyNames, Type[] types) {   
        if(applicationService == null){
            System.out.println("applicationService is null");
        }

        return(true);
    }

} 
```

我观察到每个休眠操作都会创建一个新的 Auditing 对象，并且在 onFlushDirty() 中它总是打印“ applicationService is null ”

谁能告诉我如何使 ApplicationService 在 EmptyInterceptor 中可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:59:24.013

I found a work around for this by having a Class with static applicationService property. Now by creating a static reference for it i can use applicationService.

Its working for now.. Please post any better or efficient suggestions if you have :)

Regards,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T07:10:28.017

您可以通过实现 ApplicationContextAware 接口来创建具有应用程序上下文对象的类。

```
public class ApplicationContextProvider implements ApplicationContextAware {
    private static ApplicationContext context;

    public static ApplicationContext getApplicationContext() {
        return context;
    }

    @Override
    public void setApplicationContext(ApplicationContext ctx) {
        context = ctx;
    }
} 
```

现在您可以使用以下代码获取您的 bean。

```
applicationService = (ApplicationService ) ApplicationContextProvider.getApplicationContext().getBean("applicationService") 
```

上面的代码将来可以用于获取任何其他 bean，并且不需要您继续添加静态 bean。

# iphone - 如何在iphone的标签上显示两种颜色的百分比变化

> ID：14577527
> 
> 赞同：2
> 
> 时间：2013-01-29T07:14:10.253
> 
> 标签：iphone, ios, objective-c

我正在尝试制作一个功能来显示喜欢和不喜欢的颜色，就像我们喜欢/不喜欢 YouTube 上的视频一样。所以，绿色代表喜欢，黑色代表不喜欢，他们的百分比会在点击两个按钮时改变，我不知道怎么做..有点像这张照片，但没有显示百分比

![在此处输入图像描述](../Images/1876b2e7438a0440f08be8b60c8e5ba9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:25:39.387

先做简单的数学。计算喜欢/总点击率，然后将图像用于进度条，中心区域透明，您可以在其中填充颜色。在这张图片上贴一个标签，然后给它涂上绿色。然后使用我们计算的这个比率调整绿色标签的宽度。:)

在xib文件中创建一个ImageView并设置透明中心区域的进度条图像创建一个与imageView相同大小的标签并将其放在这个imageView后面用黑色创建再创建一个绿色标签并将它放在这个黑色标签之间和图像视图。

现在是编写代码的时候了：）

1.  在代码中计算比率 = Likes/TotalHits

现在将绿色标签的框架设置为：

```
CGRectMake(x,y,ratio*totalWidthOfProgressBar,height) 
```

其中 x 和 y 应该与进度条 imageView 相同，高度也应该相同，您只需要在用户点击喜欢或不喜欢按钮时一次又一次地设置框架。

并显示百分比值在进度条上创建一个标签并在该标签中显示 value = ratio*100

# ios - iOS UITableViewCellAccessoryCheckmark 每次滚动可见

> ID：14577536
> 
> 赞同：0
> 
> 时间：2013-01-29T07:14:28.883
> 
> 标签：ios, objective-c, uitableview

我有一个列表，我将其用作复选框。我已启用或禁用选中行上的复选标记。但是当我滚动列表时，每 10 行之后它的 make mark 行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:indexPath];
    if (oldCell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        oldCell.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        oldCell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:19:40.207

这是因为`UITableView`重用了单元格。因此，在方法`cellForRowAtIndexPath`中，您必须检查（特定部分和行的）特定单元格，如果需要检查，请提供附件类型。

如果该单元不需要，请将附件类型提供为无。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:21:48.337

`UItableView`在每个滚动中重复使用单元格，因此根据附件类型使用条件不是一个好习惯。您可以使用选定的项目创建一个`NSMutableArray`并根据以下条件进行检查。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    if ([selected containsIndex:indexPath.row]) {
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
    } else {
        [cell setAccessoryType:UITableViewCellAccessoryNone];
    }
    // Do the rest of your code
    return cell;
} 
```

在`didSelectrowAtindexpath`方法中，您可以添加和删除所选项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:26:10.717

您需要将逻辑设置为单元格 in 的附件类型 `cellForRowAtIndexPath`，并使用复选标记标识要标记的单元格，您可以在列表中标记对象`didSelectRowAtIndexPath:`或在此处管理列表的选定/未选定对象数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T07:33:56.017

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {

        [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];

        [NSMutableArray addObject:[AnotherMutableArray objectAtIndex:indexPath.row]];

    } else {

        [selectedCell setAccessoryType:UITableViewCellAccessoryNone];

       [NSMutableArray removeObject:[AnotherMutableArray objectAtIndex:indexPath.row]];

    }
    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

同样在您的 viewDidLoad 中，实例化两个可变数组-

```
yourmutableArray1 = [[NSMutableArray alloc]init];
yourmutableArray2 = [[NSMutableArray alloc]init];

```

# c# - 在新窗口中打开页面时“无法获取属性‘appendChild’的值：对象为空或未定义”

> ID：14577537
> 
> 赞同：0
> 
> 时间：2013-01-29T07:14:30.200
> 
> 标签：c#, javascript, asp.net

在新窗口中打开网页时出现以下 javascript 异常

> 无法获取属性“appendChild”的值：对象为空或未定义。

我使用 window.open 函数在新窗口中打开我的页面，虽然这个异常只出现在 IE 浏览器中。

以下是我的网页

```
<%@ Page Title="" Language="C#" AutoEventWireup="true" 
MasterPageFile="~/Page.Master" 
CodeBehind="DocumentForm.aspx.cs" Inherits="Docunet.WebViewer.DocumentForm" %>

<%@ Register Assembly="Atalasoft.dotImage.WebControls" Namespace="Atalasoft.Imaging.WebControls"
    TagPrefix="cc1" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:Content ID="head" ContentPlaceHolderID="headContentPlaceHolder" runat="server">

    <link href='<%# "Styles/DocumentFormStyles" + this.GetGlobalResourceObject("Layout", "Culture").ToString() + ".css"  %>' rel="stylesheet" type="text/css" />

</asp:Content>

<asp:Content ID="content" ContentPlaceHolderID="contentContentPlaceHolder" runat="server">

    <div id="mainTitleBox" class="MainTitleBox">
        <asp:Label ID="mainTitleLabel" runat="server" 
            class="MainTitle"  
            meta:resourceKey="mainTitleLabel" Text=""></asp:Label>
    </div>
    <asp:UpdatePanel ID="updatePanel" runat="server">
        <ContentTemplate>
            <div id="viewBox" class="ViewBox">
                <div class="instanceDataBox">
                    <asp:TabContainer ID="tabContainer" runat="server" ActiveTabIndex="0" >
                        <asp:TabPanel ID="generalTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="generalTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <div class="Text">
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="numberTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="numberTitleLabel" Text="<%# this.NumberFieldName %>" ></asp:Label>
                                        <asp:Label ID="numberLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="yearTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="yearTitleLabel" Text="<%# this.YearFieldName %>" ></asp:Label>
                                        <asp:Label ID="yearLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="codeTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="codeTitleLabel" Text="<%# this.CodeFieldName %>" ></asp:Label>
                                        <asp:Label ID="codeLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="categoryTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="categoryTitleLabel" Text="<%# this.CategoryFieldName %>" ></asp:Label>
                                        <asp:Label ID="categoryLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="dateTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="dateTitleLabel" Text="<%# this.DateFieldName %>" ></asp:Label>
                                        <asp:Label ID="dateLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="archiveDocumentTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="archiveDocumentTitleLabel" Text="<%# this.ArchiveDocumentFieldName %>" ></asp:Label>
                                        <asp:Label ID="archiveDocumentLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>' style="height:70px;" >
                                        <asp:Label ID="subjectTitleLabel" runat="server" 
                                            CssClass="titleControl"
                                            meta:resourceKey="subjectTitleLabel" Text="<%# this.SubjectFieldName %>" ></asp:Label>
                                        <asp:Label ID="subjectLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>' style="height:70px;" >
                                        <asp:Label ID="notesTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="notesTitleLabel" Text="<%# this.NotesFieldName %>" ></asp:Label>
                                        <asp:Label ID="notesLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="mainDocumentNumberTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="mainDocumentNumberTitleLabel" Text="<%# this.MainDocumentNumberFieldName %>" ></asp:Label>
                                        <asp:Label ID="mainDocumentNumberLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                    <p class='<%# this.ReadRecordMode ? "DataParagraph" : "EditModeDataParagraph" %>'>
                                        <asp:Label ID="mainDocumentDateTitleLabel" runat="server" 
                                            CssClass="titleControl" 
                                            meta:resourceKey="mainDocumentDateTitleLabel" Text="<%# this.MainDocumentDateFieldName %>" ></asp:Label>
                                        <asp:Label ID="mainDocumentDateLabel" runat="server" 
                                            CssClass="valueControl" 
                                            Visible="<%# this.ReadRecordMode %>"></asp:Label>
                                        <br />
                                    </p>
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel ID="relatedDocumentsTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="relatedDocumentsTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <div class="Text">
                                    <asp:GridView ID="relatedDocumentsGridView" runat="server" 
                                        BorderWidth="0px" GridLines="Horizontal"
                                        AutoGenerateColumns="False" ShowHeaderWhenEmpty="true"
                                        DataKeyNames="ID"
                                        onrowdatabound="relatedDocumentsGridView_RowDataBound" 
                                        onselectedindexchanged="gridView_SelectedIndexChanged" >
                                        <Columns>
                                            <asp:BoundField DataField="ID" Visible="false" />
                                            <asp:TemplateField meta:resourceKey="relatedDocumentsGridViewColorField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle RelatedDocumentColorGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle RelatedDocumentColorGridViewItem" />
                                                <ItemTemplate>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:BoundField DataField="SerialNumber" meta:resourceKey="relatedDocumentsGridViewSerialNumberField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle RelatedDocumentSerialNumberGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle RelatedDocumentSerialNumberGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="Code" meta:resourceKey="relatedDocumentsGridViewCodeField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle RelatedDocumentCodeGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle RelatedDocumentCodeGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="Subject" meta:resourceKey="relatedDocumentsGridViewSubjectField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle RelatedDocumentSubjectGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle RelatedDocumentSubjectGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="DateAsString" meta:resourceKey="relatedDocumentsGridViewCreationDateField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle RelatedDocumentCreationDateGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle RelatedDocumentCreationDateGridViewItem" />
                                            </asp:BoundField>
                                        </Columns>
                                        <EmptyDataTemplate>
                                            <div>
                                                <a> <%# this.GetGlobalResourceObject("Messages", "EmptyList") %> </a>
                                            </div>
                                        </EmptyDataTemplate>
                                        <PagerSettings Visible="False" />
                                        <RowStyle CssClass="gridViewRow" />
                                        <SelectedRowStyle CssClass="selectedGridViewRow" />
                                    </asp:GridView>
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel ID="attachmentsTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="attachmentsTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <div class="Text">
                                    <asp:DataList ID="documentAttachmentsDataList" runat="server" Height="78px" 
                                        RepeatDirection="Horizontal" Width="62px" RepeatColumns="5">
                                        <ItemTemplate>
                                            <div align="center">
                                                <asp:Image ID="imgAttach"  ImageUrl='<%# isAvail(Eval("ATTTYPE", "~/Images/{0}.jpg"))%>'  Width="100px" Height="100px" runat="server" />
                                            </div>
                                            <div align="center">
                                                <asp:LinkButton ID="lbAttach" runat="server" Text="<%# Bind('NAME') %>" onclick="lbAttach_Click" Font-Size="16"></asp:LinkButton>
                                                <asp:Label ID="lblID" style='display:none'  runat="server" Text="<%# Bind('ID') %>"></asp:Label>
                                            </div>
                                        </ItemTemplate>
                                    </asp:DataList>                                    
                                    <asp:GridView ID="attachmentsGridView" runat="server" 
                                        BorderWidth="0px" GridLines="Horizontal"
                                        AutoGenerateColumns="False" ShowHeaderWhenEmpty="true"
                                        DataKeyNames="ID"
                                        onrowdatabound="gridView_RowDataBound" 
                                        onselectedindexchanged="gridView_SelectedIndexChanged" >
                                        <Columns>
                                            <asp:BoundField DataField="ID" Visible="false" />
                                            <asp:BoundField DataField="NAME" meta:resourceKey="attachmentsGridViewNameField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle AttachmentNameGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle AttachmentNameGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="CREATEDATE" meta:resourceKey="attachmentsGridViewCreationDateField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle AttachmentCreationDateGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle AttachmentCreationDateGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="FILENAME" meta:resourceKey="attachmentsGridViewFileField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle AttachmentFileGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle AttachmentFileGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="ATTTYPE" meta:resourceKey="attachmentsGridViewFileTypeField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle AttachmentFileTypeGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle AttachmentFileTypeGridViewItem" />
                                            </asp:BoundField>
                                        </Columns>
                                        <EmptyDataTemplate>
                                            <div>
                                                <a> <%# this.GetGlobalResourceObject("Messages", "EmptyList") %> </a>
                                            </div>
                                        </EmptyDataTemplate>
                                        <PagerSettings Visible="False" />
                                        <RowStyle CssClass="gridViewRow" />
                                        <SelectedRowStyle CssClass="selectedGridViewRow" />
                                    </asp:GridView>
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel ID="imagesTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="imagesTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <table style="border:1px solid black; width:100%;" >
                                    <tr> 
                                        <td style="vertical-align:top; border-right:1px solid black; width:295px;">
                                            <cc1:WebThumbnailViewer ID="documentImageWebThumbnailViewer" runat="server"
                                                Height="500px"
                                                ViewerID="documentImagesWebImageViewer"
                                                OnSelectedIndexChanged="documentImageWebThumbnailViewer_SelectedIndexChanged" />
                                        </td>
                                        <td style="vertical-align:top;">
                                            <cc1:WebImageViewer ID="documentImagesWebImageViewer" runat="server"
                                                Height="500px" Width="100%" />
                                        </td>
                                    </tr>
                                </table>
                            </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel ID="copiesTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="copiesTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <div class="Text">
                                    <asp:GridView ID="copiesGridView" runat="server" 
                                        BorderWidth="0px" GridLines="Horizontal"
                                        AutoGenerateColumns="False" ShowHeaderWhenEmpty="true"
                                        DataKeyNames="ID"
                                        onrowdatabound="gridView_RowDataBound" 
                                        onselectedindexchanged="gridView_SelectedIndexChanged" >
                                        <Columns>
                                            <asp:BoundField DataField="ID" Visible="false" />
                                            <asp:BoundField DataField="SerialNumber" meta:resourceKey="copiesGridViewSerialNumberField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle CopiesSerialNumberGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle CopiesSerialNumberGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="TargetType" meta:resourceKey="copiesGridViewTargetTypeField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle CopiesTargetTypeGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle CopiesTargetTypeGridViewItem" />
                                            </asp:BoundField>
                                            <asp:BoundField DataField="Target" meta:resourceKey="copiesGridViewTargetNameField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle CopiesTargetNameGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle CopiesTargetNameGridViewItem" />
                                            </asp:BoundField>
                                        </Columns>
                                        <EmptyDataTemplate>
                                            <div>
                                                <a> <%# this.GetGlobalResourceObject("Messages", "EmptyList") %> </a>
                                            </div>
                                        </EmptyDataTemplate>
                                        <PagerSettings Visible="False" />
                                        <RowStyle CssClass="gridViewRow" />
                                        <SelectedRowStyle CssClass="selectedGridViewRow" />
                                    </asp:GridView>
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>
                        <asp:TabPanel ID="additionalFieldsTabPanel" runat="server"  
                            CssClass="Text"
                            meta:resourceKey="additionalFieldsTabPanel" HeaderText="" >
                            <ContentTemplate> 
                                <div class="Text">
                                    <asp:GridView ID="additionalFieldsGridView" runat="server" 
                                        BorderWidth="0px" GridLines="Horizontal"
                                        AutoGenerateColumns="False" ShowHeaderWhenEmpty="true"
                                        DataKeyNames="ID"
                                        onrowdatabound="gridView_RowDataBound" 
                                        onselectedindexchanged="gridView_SelectedIndexChanged" >
                                        <Columns>
                                            <asp:BoundField DataField="ID" Visible="false" />
                                            <asp:BoundField DataField="Name" meta:resourceKey="additionalFieldsGridViewNameField" HeaderText="" >
                                                <HeaderStyle CssClass="gridViewHeaderStyle AdditionalFieldNameGridViewHeader" />
                                                <ItemStyle CssClass="gridViewItemStyle AdditionalFieldNameGridViewItem" />
                                            </asp:BoundField>

                                        <asp:BoundField DataField="Value" meta:resourceKey="additionalFieldsGridViewValueField" HeaderText="" >
                                            <HeaderStyle CssClass="gridViewHeaderStyle AdditionalFieldValueGridViewHeader" />
                                            <ItemStyle CssClass="gridViewItemStyle AdditionalFieldValueGridViewItem" />
                                        </asp:BoundField>
                                    </Columns>
                                    <EmptyDataTemplate>
                                        <div>
                                            <a> <%# this.GetGlobalResourceObject("Messages", "EmptyList") %> </a>
                                        </div>
                                    </EmptyDataTemplate>
                                    <PagerSettings Visible="False" />
                                    <RowStyle CssClass="gridViewRow" />
                                    <SelectedRowStyle CssClass="selectedGridViewRow" />
                                </asp:GridView>
                            </div>
                        </ContentTemplate>
                    </asp:TabPanel>                        
                </asp:TabContainer>
            </div>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:27:56.967

您正在加载的页面必须包含一些 javascript 函数，您在其中尝试将子项附加到未初始化的对象。

其他浏览器将忽略该错误并在 IE 中断时继续加载。在 javascript 中调试您的 OnLoad 代码并找到发生这种情况的位置。

只需添加以下检查：

```
 if(myObj != undefined){
        myObj.AppendChild(child)
    } 
```

# php - CJSON::encode 换行 (\n)

> ID：14577541
> 
> 赞同：1
> 
> 时间：2013-01-29T07:14:50.370
> 
> 标签：php, yii

我试图在 中添加一个新行`\n`，`CJSON::encode`但它正在添加另一个`\`忽略该命令的行。我应该怎么做才能`CJSON::encode`释放`\n`？

代码：

```
CJSON::encode(array('error'=>'First Line\nSecond Line')) 
```

返回：

```
{"error":"First Line\\nSecond Line"} 
```

我想要的是：

```
{"error":"First Line\nSecond Line"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:47:45.677

好吧，这不是一个真正的 yii 问题。

您根本不能使用简单的引号将新行放入字符串中：

[http://php.net/manual/language.types.string.php#language.types.string.syntax.single](http://php.net/manual/language.types.string.php#language.types.string.syntax.single)

你应该试试 ：

```
CJSON::encode(array('error'=>"First Line\nSecond Line")) 
```

# ruby-on-rails - request.remote_ip 是否有可能返回 nil？

> ID：14577542
> 
> 赞同：8
> 
> 时间：2013-01-29T07:14:52.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`request.remote_ip`有没有或`request.ip`可以返回的实例`nil`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T07:21:43.867

根据[rails 来源](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_dispatch/middleware/remote_ip.rb#L47)，它看起来像是`remote_ip`从 3 个单独的标题、`HTTP_CLIENT_IP`、`HTTP_X_FORWARDED_FOR`和`REMOTE_ADDR`. 因此，如果您担心您可能会收到一个没有这些标头的请求，那么它看起来可能`remote_ip`是 nil （在机架实现中看起来几乎相同`ip`）。从我读过的内容来看，假设`REMOTE_ADDR`大多数 HTTP 请求中都存在标头是非常安全的，因此这些值中​​的任何一个都不太可能为零。

# asp.net - 如何避免在asp.net中单击treeview的子节点时回发

> ID：14577546
> 
> 赞同：0
> 
> 时间：2013-01-29T07:15:18.927
> 
> 标签：asp.net, .net, vb.net, web-applications

我已经填充了我的 trieview 并单击父节点，我可以在页面上加载相关内容。

在我的例子中，父节点是文章的名称，子节点是文章的部分。单击文章部分（子节点）时，我需要将该部分放在页面顶部。

通过使用喜欢，

```
<a href="#Section_top"></a> 
```

我试图提供这个锚点作为我的子节点值，

```
node.value =  <a href="#Section_top"></a>" 
```

现在单击子节点时，它会进行回发，而不是将部分带到页面顶部。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:35:54.567

使用以下：

```
 <a name="Section_top"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:31:55.203

诀窍是添加

```
 <a href="#Section_top"></a>" 
```

在 Node.Name 属性中

# java - 总是使用“this”作为监视器锁是可以接受的吗？

> ID：14577550
> 
> 赞同：3
> 
> 时间：2013-01-29T07:15:43.550
> 
> 标签：java, multithreading

例如，我有一个带有 2 个计数器的类（在多线程环境中）：

```
public class MyClass {
  private int counter1;
  private int counter2;

  public synchronized void increment1() {
        counter1++;
  }

  public synchronized void increment2() {
        counter2++;
  }

} 
```

***有 2 个彼此不相关的**增量操作。但我使用相同的对象锁定（`this`）。*

确实，如果客户端同时调用`increment1()`和`increment2()`方法，那么`increment2`调用将被阻塞，直到`increment1()`释放`this`监视器？

如果是真的，是否意味着我需要为每个操作提供*不同*的监视器锁（出于性能原因）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T07:19:59.747

> 确实，如果客户端同时调用 increment1() 和 increment2() 方法，那么 increment2 调用将被阻塞，直到 increment1() 释放 this 监视器？

如果他们在同一个实例上被调用，那么是的。

> 如果是真的，是否意味着我需要为每个操作提供不同的监视器锁（出于性能原因）？

只有你能知道。我们不知道您的性能要求。这*实际上*是您真实代码中的问题吗？您的实际操作是否持久？它们是否经常发生？您是否进行了任何诊断以估计其影响？您是否对您的应用程序进行了概要分析，以了解等待监视器花费了多少时间，更不用说什么时候没有必要了？

我实际上建议不要`this`出于完全不同的原因进行同步。*当您确实*控制一切时，已经很难推理线程- 但是当您不知道可以获取监视器的所有内容时，您就会一无所获。当您在 上同步时`this`，这意味着任何*其他*引用您的对象的代码也可以在同一监视器上同步。例如，客户可以使用：

```
synchronized (myClass) {
    // Do something entirely different
} 
```

这可能会导致死锁、性能问题以及各种各样的事情。

如果你`private final`在你的类中使用一个字段，而创建一个对象*只是*为了作为一个监视器，那么你知道获取该监视器的唯一代码将是你的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T07:21:28.257

1) 是的，increment1() 确实会阻止 increment2()，反之亦然，因为它们都隐式同步`this`

2) 如果您需要更好的性能，请考虑无锁 java.util.concurrent.atomic.AtomicInteger 类

```
 private AtomicInteger counter1 = new AtomicInteger();
  private AtomicInteger counter2 = new AtomicInteger();

  public void increment1() {
        counter1.getAndIncrement();
  }

  public void increment2() {
        counter2.getAndIncrement();
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T07:19:03.097

如果您对方法进行同步，就像您在此处所做的那样，您将锁定整个对象，因此从同一个对象访问不同变量的两个线程无论如何都会相互阻塞。

如果你想一次只同步一个计数器，这样两个线程在访问不同变量时不会互相阻塞，你必须在两个同步块中添加两个计数器，并使用不同的变量作为两者的“锁”块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T07:20:54.370

你是对的，如果你使用相同的对象，这将是一个性能瓶颈。您可以为单个计数器使用不同的锁或`java.util.concurrent.atomic.AtomicInteger`用于并发计数器。

像：

```
public class Counter {
  private AtomicInteger count = new AtomicInteger(0);
  public void incrementCount() {
    count.incrementAndGet();
  }
  public int getCount() {
    return count.get();
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T07:20:43.097

是的，如果多个线程尝试在您的对象上调用方法，它们将等待尝试获取锁（尽管不能保证获得锁的顺序。）与所有事情一样，在您知道这是瓶子之前没有理由进行优化缩在你的代码中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T07:21:19.660

是的，给定的代码与以下代码相同：

```
 public void increment1() {
        synchronized(this) {
             counter1++;
        }
  }

  public oid increment2() {
        synchronized(this) {
             counter2++;
        }
  } 
```

这意味着只能同时执行一种方法。您应该提供不同的锁（`this`一开始就锁定是一个坏主意），或者其他一些解决方案。第二个是你真正想要的：[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T07:19:39.087

如果您需要能够并行调用这两个操作所带来的性能优势，那么可以，您不需要为不同的操作提供不同的监视器对象。

但是，对于过早的优化有一些话要说，在使程序更复杂以适应它之前，您应该确保需要它。

# r - 如何使用 ggplot2 生成带线？

> ID：14577551
> 
> 赞同：-3
> 
> 时间：2013-01-29T07:15:48.397
> 
> 标签：r, graphics, plot, ggplot2, sparklines

[Stephen Few](http://www.perceptualedge.com/blog/?p=1485)最近推出了[Bandlines ，它是 Edward Tufte 的](http://www.perceptualedge.com/articles/visual_business_intelligence/introducing_bandlines.pdf)[Sparklines](http://en.wikipedia.org/wiki/Sparkline)的扩展。有没有一种简单的方法可以使用 ggplot2 生成这些类型的图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T09:33:07.727

由于这是本月推出的，我怀疑是否已经实施。但是这个概念看起来很简单，你可以很容易地制作一个。这是一个使用图形的非常简单的实现`base`（我不是专家`ggplot2`）。

```
bandline<-function(x, low.col, high.col, axis=TRUE){
    l <- max(unlist(lapply(x, length)), na.r=TRUE)
    r <- range(unlist(x), na.rm=TRUE)
    par(mfcol=c(length(x), 1))
    for(i in 1:length(x)){
        y <- boxplot.stats(x[[i]])
        ifelse(i==1, par(mar=c(0,3,3,3)), 
                     ifelse(i==length(x), par(mar=c(3,3,0,3)), 
                                          par(mar=c(0,3,0,3))))
        plot(NA, axes=F, bty="n", xlim=c(1,l), ylim=r, xaxs="i")
        rect(1,y$stats[2], l, y$stats[1], col="grey80", border=NA)
        rect(1,y$stats[4], l, y$stats[2], col="grey60", border=NA)
        rect(1,y$stats[5], l, y$stats[4], col="grey40", border=NA)
        abline(h=y$stats[3],col="white", lwd=2)
        lines(seq_along(x[[i]]), x[[i]])
        zhigh <- zlow <- x[[i]]
        zhigh[zhigh<=y$stats[5]]<-NA
        zlow[zlow>=y$stats[1]]<-NA
        points(seq_along(x[[i]]), zlow, bg=low.col, pch=21,cex=2)
        points(seq_along(x[[i]]), zhigh, bg=high.col, pch=21, cex=2)
        if(axis==TRUE){
            axis(2, at=pretty(x[[i]]), las=2)
            ifelse(i==1, axis(3, at=seq_len(l)), 
                         ifelse(i==length(x),axis(1, at=seq_len(l)),""))
            }
        mtext(names(x)[i], side=4, srt=270, line=1)
    }
} 
```

这是一个例子：

```
set.seed(1)
dat<-list(a=rnorm(100), b=rnorm(100), c=rnorm(100), d=rnorm(100))
bandline(dat, "black", "white", axis=FALSE) 
```

![在此处输入图像描述](../Images/01875cb66bf99dbaec1e9c54e8bc9b05.png)

# mysql - 如何通过软删除选择多对多关系中不相关的数据？

> ID：14577553
> 
> 赞同：0
> 
> 时间：2013-01-29T07:16:11.820
> 
> 标签：mysql, sql

我们拥有多对多关系的数据，我们的每个成员都可以选择他们正在学习的主题。此数据使用软删除模式，其中 DATETIME`archived`字段一直保留`NULL`到数据被视为已删除的时间。

我们要做的是选择用户当前未订阅的主题，忽略他们当前订阅的主题。

这是表结构：

```
`member`
- id
- name
- created
- updated
- archived

`subject`
- id
- name
- created
- updated
- archived

`member_subject`
- member_id
- subject_id
- created
- archived 
```

我们拥有的基本查询结构是：

```
SELECT DISTINCT subject.*
FROM subject
LEFT JOIN member_subject ON member_subject.subject_id = subject.id
WHERE subject.archived IS NULL

# Not sure how to go about the rest of the WHERE clause here

ORDER BY subject.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:28:06.543

这将为当前未订阅的每个用户生成所有主题，

```
SELECT  d.*, e.*
FROM    
        (
            SELECT  a.ID memberID, b.ID SubjectID
            FROM    member a, subject b
        ) c
        INNER JOIN member d
            ON c.memberID = d.ID
        INNER JOIN Subject e
            ON c.SubjectID = e.ID
        LEFT JOIN member_subject f
            ON  c.memberID = f.member_ID AND
                c.SubjectID = f.subject_ID
WHERE   f.member_ID IS NULL
        -- AND d.ID = ''                        -- <<== for specific userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:23:33.980

试试这个查询 -

```
SELECT s.id
FROM subject s
LEFT JOIN member_subject ms
  ON ms.subject_id = s.id
GROUP BY s.id
HAVING COUNT(ms.subject_id) = 0 
```

...添加您需要的其他 WHERE 过滤器。

# linux - 如何在 c shell 中编写脚本，以便执行 `cd` 会自动触发 `ll` 或 `ls`

> ID：14577560
> 
> 赞同：1
> 
> 时间：2013-01-29T07:16:50.247
> 
> 标签：linux, unix, csh

`cd`使用更改目录并再次执行 an`ls`或 an真的很麻烦`ll`。我注意到超过 80% 的时间，我总是`ll`在`cd`. 所以我的问题是如何编写`c shell`脚本来做到这一点。每当 cd 完成时，是否`c shell`可以命令它也`ll`自动执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:20:17.437

不需要脚本，只需做一个简单的别名定义：

*   bash 表示法：`alias cd="cd $1; ll "`
*   csh 表示法：`alias cd cd \!:1\; ll`

注意 bash 版本中的前导空格（“”），它可以防止结果再次被别名扩展。所以它可以防止循环。

# c# - asp.net mvc 中的 HttpPostedFileBase 状态

> ID：14577562
> 
> 赞同：3
> 
> 时间：2013-01-29T07:16:58.130
> 
> 标签：c#, asp.net, asp.net-mvc, file-upload

asp.net mvc 操作采用 HttpPostedFileBase 参数：

```
public ActionResult Save(HttpPostedFileBase file)
{
    //Q1: at the start of this action method, what's the status of this file? 
    //UploadCompleted or Uploading or something else?

    //Q2: where is the file stored? memory or a temp file?

    if (answer of Q1 is Uploading)
    {
        //Q3a: what happens if file.SaveAs is invoked? 
        //block the current thread until the file is uploaded?
    }
    else if (answer if Q1 is UploadCompleted)
    {
        //Q3b: which means the developer can do nothing before the file is uploaded?
        //if the business logic limits the size of the file(e.g. <= 5MB), how can we
        //prevent evil-intended uploading?
    }
} 
```

Q4 这里：我想记录这个请求的总时间，当用户开始上传文件时，定时器开始。当用户完成文件上传（或者我的`Save`动作完成）时，定时器结束。我如何知道用户何时开始上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:59:47.990

首先，看看这个问题的基础知识：[文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)

Q1：一旦文件完全可用，就会调用该操作。

Q2：来自 msdn：http: [//msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx)

> 可以通过访问 RequestLengthDiskThreshold 属性或通过设置 Machine.config 中 httpRuntime 元素（ASP.NET 设置架构）元素的 requestLengthDiskThreshold 属性来指定在服务器内存中缓冲的请求（包括文件上传）的数据量或 Web.config 文件。

Q3：您可以在 web.config 中指定最大上传大小：[如何增加 ASP.NET 中的最大上传文件大小？](https://stackoverflow.com/questions/288612/how-to-increase-the-max-upload-file-size-in-asp-net)

# jquery - 如何在 JQuery 中的同一元素上链接多个单击事件？

> ID：14577563
> 
> 赞同：4
> 
> 时间：2013-01-29T07:17:00.447
> 
> 标签：jquery, chaining

我想在单击一个元素时触发一个事件，然后在第二次单击同一元素时触发一个不同的事件。我在下面附上了一个演示链接。问题是事件被链接起来，因此一次单击会运行到最后一个事件，而无需等待第二次单击。如果这是重复的，我很抱歉，但我在这个板上找不到同样的问题。

我可能没有很好地措辞这个问题，而且我确信我会为此陷入困境......

```
$(function(){
l $('.box')
      .click(function() {
        $(this).removeClass('red'
                        ).addClass('black');
      })
      .click(function() {
        $(this).removeClass('black'
                        ).addClass('blue');
      });
});` 
```

[http://jsfiddle.net/MEFNG/1/](http://jsfiddle.net/MEFNG/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:24:43.507

[http://jsfiddle.net/lollero/MEFNG/3/](http://jsfiddle.net/lollero/MEFNG/3/)

html:

```
<div class="box red"></div> 
```

CSS：

```
div.box {
  width: 100px;
  height: 100px;
}
.red {background:red}
.black {background:black}
.blue {background:blue} 
```

jQuery：

```
$(function(){

    $('.box').on("click", function() {

        var box = $(this);

        if ( box.hasClass('red') ) {
            box.removeClass('red').addClass('black');
        }
        else if ( box.hasClass('black') ) {
            box.removeClass('black').addClass('blue');
        }
        else if ( box.hasClass('blue') ) {
            box.removeClass('blue').addClass('red');
        }

    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:25:45.877

在这种情况下使用委托以获得最佳性能：

```
$('.box').parent()
.on('click', '.red', function() {
  $(this).removeClass('red').addClass('black');
})
.on('click', '.black', function() {
  $(this).removeClass('black').addClass('blue');
}); 
```

当然，语法可能会好得多。我使用与您的相似来为您提供更好的图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:46:28.307

如果你想要更动态的东西，试试这个。通过存储计数，您可以添加任意数量的颜色，它会正常工作：

```
var classes = ['red','green','yellow','blue'];
$('.box').click(function() {
  var $this = $(this),
      count = $this.data('count') || 0;
  $this.data('count', count >= classes.length-1 ? 0 : count+1);
  $this.removeClass(classes.join(' ')).addClass(classes[count]);
}); 
```

**演示：http:** [//jsbin.com/adoqan/1/edit](http://jsbin.com/adoqan/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:05:37.903

试试：http: [//jsfiddle.net/yBdBp/](http://jsfiddle.net/yBdBp/)

```
var classes = ['red','blue','black'];
$('.box div').click(function () {
  $(this).each(function(){
  this.className = classes[($.inArray(this.className, classes)+1)%classes.length];
 });
}); 
```

使用 html：

```
<div class="box">
   <div class="red"></div>
</div> 
```

# php - PHP页面内的Javascript方法调用

> ID：14577565
> 
> 赞同：0
> 
> 时间：2013-01-29T07:17:10.727
> 
> 标签：php, javascript

我有一个 PHP 页面，其中使用 javascript 方法隐藏了一个 div。此方法在单击超链接时调用。问题是它给出了 Uncaught Reference 错误。不知道是什么原因。我什至尝试拥有一个外部 JS 文件并在其中定义方法，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:18:09.783

我给你一个提示：

确保在操作脚本之前定义了 DIV 标记

喜欢：

```
<html>
 <head>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<div id="hideDiv">Hide on click</div>
<input type="button" value="hide" onClick="javascript:HideIt()"/>
<script type="text/javascript" language="javascript">

function HideIt(){
 //what ever it is:Hide codes goes here
 $('#hideDiv').hide() // we used it after the defined it :)
 }
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:54:30.193

这是隐藏任何 div onClick 的一般代码。

```
<html>
    <head>
        //Here to add script tag, which i have writen below
    </head>
    <body>
        <div id="testDiv">This is to be hide on click</div>
        <br/>
        <br/>
        <a href="#" onClick="$('#testDiv').hide();">Click to hide!</a>
        <br/>
        <br/>
        <a href="#" onClick="$('#testDiv').show();">Click to show!</a>
    </body>
</html> 
```

**注意：**您应该仔细书写撇号。Bcox ' 和 " 有不同的影响

这是您必须放在 head 标签中的脚本标签：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:23:43.370

javascript 中未捕获的引用错误通常意味着在调用方法时未定义对象或访问器。

当 jQuery 包含在 html 的底部并且 javascript 在它之前被触发时，我在使用 jQuery 时看到了它。

所以

```
$('divid').text = "blah"; 
```

之前

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

因此 $ 方法不存在。

解决方案是将方法调用放在身体负载上。

# .net - 是否有用户友好的 Log4Net 日志文件查看器？

> ID：14577568
> 
> 赞同：35
> 
> 时间：2013-01-29T07:17:16.453
> 
> 标签：.net, log4net

是否有任何第三方工具可以识别 Log4Net 日志文件结构并通过提供搜索功能等以用户友好的方式显示它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-29T07:20:24.970

试试[GamutLogViewer](https://sourceforge.net/projects/gamutlogviewer/)。

> GamutLogViewer© 是日志文件、日志文件、查看器，可与 Log4J、Log4Net、NLog 和用户定义的格式（包括 ColdFusion）一起使用。它支持过滤、搜索、突出显示和许多其他有用的功能。这是一个 Windows 应用程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T07:21:53.500

[BareTail](https://www.baremetalsoft.com/baretail/)是一个非常好的监控日志文件的工具。

可以监控多个日志文件，专业版支持搜索。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-10T00:35:53.187

这个看起来很有希望：http:
[//yourlog4netviewer.codeplex.com/](http://yourlog4netviewer.codeplex.com/)

也看到了这个： http:
[//logexpert.codeplex.com/](http://logexpert.codeplex.com/)

编辑：这个也是：http:
[//insightextensions.codeplex.com/](http://insightextensions.codeplex.com/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-29T07:19:44.037

您可能想查看 Apache Chainsaw。它是为 log4J 设计的，它是 log4net 的移植版本，因此两者可以很好地协同工作

[http://logging.apache.org/chainsaw/](http://logging.apache.org/chainsaw/)

您可以通过 UDP 附加程序直接向其显示日志消息，或将日志记录到电锯可以读取的 xml 文件中。

[http://logging.apache.org/log4net/release/howto/chainsaw.html](http://logging.apache.org/log4net/release/howto/chainsaw.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T07:21:27.180

当然，试试这个：[http](http://www.l4ndash.com/) ://www.l4ndash.com/ 。它是基于网络的，开发者版本是免费的，但仅限于在一台机器上使用，并且可以从同一台机器上访问。

# android - 在Android中显示表格的最有效方法是什么

> ID：14577570
> 
> 赞同：1
> 
> 时间：2013-01-29T07:17:20.877
> 
> 标签：android, json, android-tablelayout

我有一个返回 JSONArray 的服务器帖子。然后，我通过动态创建插入 TableLayout 的 TableRows 来填充 TableLayout，并动态创建 TextViews，然后将文本设置为 JSONArray 中的值。并将 TextViews 添加到行中。

这确实有效。虽然它看起来非常不够，但我真的想要一个更优雅的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:24:53.460

你是对的，TableLayout 效率很低，考虑到你有 100 行内容，那么你必须创建 100 行小部件.. 这非常消耗内存 + 创建速度很慢。

以上场景应该非常适合使用 ListView，您可以简单地将 JSON 数组反序列化为自定义 Adapter 以推送到 ListView。我通常创建/使用 JSON-Cursor 适配器，以便它可以更可重用（也适合 ContentProvider）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:28:00.693

[http://developer.android.com](http://developer.android.com)是学习android最有效的方式...

查看此网址以获取您的结果：

[http://developer.android.com/guide/topics/ui/declaring-layout.html#CommonLayouts](http://developer.android.com/guide/topics/ui/declaring-layout.html#CommonLayouts)

# azure - 以编程方式在 Azure 中提取托管服务的详细信息

> ID：14577573
> 
> 赞同：0
> 
> 时间：2013-01-29T07:17:29.603
> 
> 标签：azure, azure-sql-database, azure-storage

如果用户键入订阅 ID，是否有任何 API 或类可以帮助用户以编程方式在 Azure 中提取托管服务的详细信息。

我可以用你们提到的参考资料来做上面的事情。

是否有可能使用 Windows Azure API 获取订阅详细信息，例如订阅名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:42:31.783

查看[服务管理 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)

出于安全原因，它不会像输入订阅 ID 那样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:43:46.597

您将需要用户的订阅 ID 和管理证书。一旦你有了这两件事，你就可以使用 Windows Azure 服务管理 REST API：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)来获取有关托管服务的详细信息。

# asp.net-mvc - 用 ASP.NET MVC4 淘汰

> ID：14577575
> 
> 赞同：0
> 
> 时间：2013-01-29T07:17:37.773
> 
> 标签：asp.net-mvc, knockout.js

希望开始使用带有 ASP.NET MVC4 的**Knockout 。**看过一些例子，遇到以下问题。

1.  今天我写了我的视图模型后端，我可以完全用客户端的淘汰视图模型代替它吗？

2.  Knockout 中是否有类似 DataAnnotations 的内容进行验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:21:30.193

1.  是的，您删除了服务器视图和视图模型。所有现在都在客户端上。

2.  请参阅[淘汰赛验证](https://stackoverflow.com/questions/8996449/knockout-validation)

此外，您可能需要查看 OData/WCF 数据服务 ( [http://blogs.msdn.com/b/astoriateam/](http://blogs.msdn.com/b/astoriateam/) )。它基本上为您提供了模型和控制器。使用这种方法，您的服务器最终只提供静态 HTML 页面和模型数据作为 AJAX 调用。它还支持数据的“分页”。

恕我直言，这是未来的方式。

其他感兴趣的链接：

*   授权 - [http://msdn.microsoft.com/en-us/library/dd728284.aspx](http://msdn.microsoft.com/en-us/library/dd728284.aspx)
*   路由 - [http://blogs.msdn.com/b/rjacobs/archive/2010/04/05/using-system-web-routing-with-data-services-odata.aspx](http://blogs.msdn.com/b/rjacobs/archive/2010/04/05/using-system-web-routing-with-data-services-odata.aspx)或[http://code.msdn。 microsoft.com/WCF-Data-Service-with-285746ac](http://code.msdn.microsoft.com/WCF-Data-Service-with-285746ac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:35:10.570

你可以使用[这个](https://github.com/ericmbarnard/Knockout-Validation)库或者[这个](http://knockoutvalidator.codeplex.com/)

或使用这个萨莫

```
<script id="customMessageTemplate" type="text/html">
    <em class="customMessage" data-bind='validationMessage: field'></em>
</script>
<fieldset>
    <legend>User: <span data-bind='text: errors().length'></span> errors</legend>
    <label>First name: <input data-bind='value: firstName'/></label>
    <label>Last name: <input data-bind='value: lastName'/></label>    
    <div data-bind='validationOptions: { messageTemplate: "customMessageTemplate" }'>
        <label>Email: <input data-bind='value: emailAddress' required pattern="@"/></label>
        <label>Location: <input data-bind='value: location'/></label>
        <label>Age: <input data-bind='value: age' required/></label>
    </div>
    <label>
        Subscriptions: 
        <select data-bind='value: subscription, options: subscriptionOptions, optionsCaption: "Choose one..."'></select>
    </label>
    <label>Password: <input data-bind='value: password' type="password"/></label>
    <label>Retype password: <input data-bind='value: confirmPassword' type="password"/></label>
    <label>10 + 1 = <input data-bind='value: captcha'/></label>
</fieldset>
<button type="button" data-bind='click: submit'>Submit</button>
<br />
<br />
<button type="button" data-bind='click: requireLocation'>Make 'Location' required</button>

ko.validation.rules.pattern.message = 'Invalid.';
ko.validation.configure({
    registerExtenders: true,
    messagesOnModified: true,
    insertMessages: true,
    parseInputAttributes: true,
    messageTemplate: null
});

var captcha = function (val) {
    return val == 11;
};

var mustEqual = function (val, other) {
    return val == other();
};

var viewModel = {
    firstName: ko.observable().extend({ minLength: 2, maxLength: 10 }),
    lastName: ko.observable().extend({ required: true }),
    emailAddress: ko.observable().extend({  // custom message
        required: { message: 'Please supply your email address.' }
    }),
    age: ko.observable().extend({ min: 1, max: 100 }),
    location: ko.observable(),
            subscriptionOptions: ['Technology', 'Music'],
    subscription: ko.observable().extend({ required: true }),
    password: ko.observable(),
        captcha: ko.observable().extend({  // custom validator
        validation: { validator: captcha, message: 'Please check.' }
    }),
    submit: function () {
        if (viewModel.errors().length == 0) {
            alert('Thank you.');
        } else {
            alert('Please check your submission.');
            viewModel.errors.showAllMessages();
        }
    }
};

viewModel.confirmPassword = ko.observable().extend({
    validation: { validator: mustEqual, message: 'Passwords do not match.', params: viewModel.password }
}),
viewModel.errors = ko.validation.group(viewModel);
viewModel.requireLocation = function () {
    viewModel.location.extend({ required: true });
};
ko.applyBindings(viewModel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T21:44:53.473

Knockout.js 是一个很棒的库。但是如果你问人们使用淘汰赛或角度。他们中的大多数人会告诉你 Angular.js 更好，尽管它们非常相似。

我在我的项目中使用淘汰赛。还有很多事情可以简化你的开发。例如。我只使用服务器端验证。当用户单击“提交”时，我的 javascript 收集模型并将其发送到控制器（异步 AJAX）。控制器有验证，如果验证失败，响应将是 HTTP:500 并且正文将是验证结果结构，在 HTML 的正确位置显示所有错误。

从用户的角度来看，这似乎是客户端验证。您可以在此示例中看到它是如何工作的：[创建订单示例 (Upida.Net)](http://upida.cloudapp.net:8080/org.upida.example.knockout/order/create?clientId=1)。

# c - C 编程语言中是否存在任何不一致之处？

> ID：14577579
> 
> 赞同：2
> 
> 时间：2013-01-29T07:17:55.627
> 
> 标签：c

我在某处读到一位教授声称 C 编程语言存在一些不一致之处。这是正确的，如果是，它是什么？

我相信我记得教授提出的论点是你可以用一种类型（可能是 char）但不能用另一种类型（可能是 int）做一些事情，并且为了保持一致性，应该可以做一些你实际上可以做的事情不和C。

你知道我在这里的意思还是不支持这个概念？

相关：[https ://stackoverflow.com/questions/3486059/inconsistency-in-programming-languages](https://stackoverflow.com/questions/3486059/inconsistency-in-programming-languages)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:13:58.873

有几个：

*   与其他类型不同，您不能将数组作为整个对象直接分配或传递
*   `char x[]`声明一个数组或一个指针，具体取决于它出现的位置（在函数参数中与否）
*   `"str"`表现为数组（in`sizeof("str")`或`char s[] = "str"`）或指针（in `puts("str");`）
*   `"str"`是 type `char*`，但你不能合法地修改它所指向的内容，如果它是`const char*`
*   您使用`%f`for `double`in`printf()`但您使用`%lf`for`double`和`%f`for `float`in`scanf()`但您使用`f`for`float`常量（例如`1.0f`）
*   `-1 > 1u`, 意义不大
*   `UINT_MAX + 1 + 1.0`与 有很大不同`UINT_MAX + 1.0 + 1`，也可能非常令人惊讶
*   ETC

不过，几乎到处都有解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:23:33.237

这*可能*`char`是默认情况下可以签名或未签名的事实，而`int`始终是签名的。

但是，虽然这可能是类型之间的不一致，但这不是我认为的错误——它很好理解（或者应该理解）。

也可能是子字符类型（即位域）不能使用`&`地址运算符寻址，而其他类型（如`char`,`int`和用户定义的结构）则可以。这是因为多个位域可以组合在一个*地址*上。

我不怀疑您会在 C 中找到其他 50 处细微的不一致之处，这些都不是放弃该语言的真正理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:41:30.323

```
"...is some inconsistency..." 
```

不，这是不正确的，有许多不一致的地方，复数。要命名所有这些问题需要一篇多页的文章。总结一下：你能做的最糟糕的事情就是假设 C 语言是理智的、一致的或合乎逻辑的。

关于 char 的具体问题，C 中有一条规则保证所有整数类型都是隐式签名的。例如，写作`int`总是完全等同于写作`signed int`。这对 是正确的`int, long, short, long long`，但对 不是`char`。

这是因为 char 不仅是最小的整数类型，而且还用于存储字符，即 ASCII 符号值。默认情况下 char 是有符号还是无符号是实现定义的：编译器可以选择任何一种形式。

其原因是，如果我没记错的话，是一些古老的向后兼容性问题，其中 C 编译器在 C 的第一次标准化之前以不同的方式实现了 char。

char 和其他“小整数类型”（short 和 bool）的另一个问题是，只要它们是表达式的一部分，它们就会以与提升更大整数类型的方式不一致的方式被隐式提升。这被称为*整数提升规则*，并且是“通常的算术转换”（[更多信息在这里](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)）的一部分，这是 C 是一种不一致且不合逻辑的语言的另一个完美示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:28:41.507

也许`char`是不允许填充位，而`int`is：`unsigned char`值的范围总是`2`^(`CHAR_BIT`)很宽，而 的范围`signed char`可能最多少一个——`int`类型的范围不能从它的大小和值来确定`CHAR_BIT`（除非`CHAR_BIT`是 8和`sizeof (int)`2)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T07:23:01.277

```
char str[] = "Hello";
const char *str2 = "World"; 
```

如果我理解正确，以上是 2 个仅对有意义的功能`char`

# perl - 混合 TAP::Harness 构造函数参数时遇到问题

> ID：14577582
> 
> 赞同：1
> 
> 时间：2013-01-29T07:18:05.233
> 
> 标签：perl, tap-harness

看起来有些[`TAP::Harness`](https://metacpan.org/module/TAP%3a%3aHarness)（v3.23）构造函数参数不喜欢一起玩。

当我尝试将`formatter`arg 与`verbosity`或`color`args 一起指定时，模块会抱怨后两者无法识别。当我将其注释掉时，它工作得很好。难道我做错了什么？

```
use strict;
use warnings;

use TAP::Harness;
use TAP::Formatter::HTML;

print "TAP::Harness Version : $TAP::Harness::VERSION\n";  # 3.23

my $fmt = TAP::Formatter::HTML->new;
   $fmt->output_file( 'test.html' );

my $harness = TAP::Harness
                ->new( {
                         color       => 1,
                         verbosity   => -2,
                         formatter   => $fmt,
                         lib         => $^O =~ /win/i
                                        ? [ 'C:\\some\\lib' ]
                                        : [ '/usr/bin/etc/some/lib' ],
                     } ); 
```

**输出**（`formatter`指定 arg）：

```
Unknown arguments to TAP::Harness::new (color verbosity) at harness.pl line 41 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:03:03.277

所以它看起来[`TAP::Formatter::HTML`](https://metacpan.org/module/TAP%3a%3aFormatter%3a%3aHTML)有自己的`verbosity`和`color`属性：

> **冗长**
> 
> ```
> $fmt->verbosity( [ $v ] ) 
> ```
> 
> 详细级别，如“新”中定义的`TAP::Harness`：
> 
> ```
> 1   verbose        Print individual test results (and more) to STDOUT.
>  0   normal
> -1   quiet          Suppress some test output (eg: test failures).
> -2   really quiet   Suppress everything to STDOUT but the HTML report.
> -3   silent         Suppress all output to STDOUT, including the HTML report. 
> ```
> 
> **颜色**
> 
> 此方法仅用于`TAP::Harness`API 兼容性。它什么也不做。

* * *

所以参数需要传递给`TAP::Formatter::HTML`对象而不是线束。

# c# - CodeAnalysis.SuppersMessage 无法抑制编译警告

> ID：14577584
> 
> 赞同：1
> 
> 时间：2013-01-29T07:18:12.753
> 
> 标签：c#, compiler-warnings, suppress-warnings

以下是我用来抑制编译警告的代码。

> [程序集：System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Naming", "CA1704:IdentifiersShouldBeSpelledCorrectly", MessageId = "Rackable", Scope = "member", Target = "Ipak.Hardware.Misc")]

对于部分类的嵌套调用的公共静态属性名称方法，警告即将到来。

错误消息是“CA1704：Microsoft.Naming：更正成员名称‘Hardware.Misc.Rackable’中‘Rackable’的拼写，如果它代表任何类型的匈牙利符号，则将其完全删除。”

上面的代码适用于其他警告。

如果代码或场景有任何问题，请提出建议。

谢谢，

# tsql - 删除空间sql server 2008

> ID：14577596
> 
> 赞同：0
> 
> 时间：2013-01-29T07:18:59.553
> 
> 标签：tsql, stored-procedures

我正在尝试在 sql server 2008 中编写存储过程，我需要删除表条目中不需要的空格。我将表中的条目分为 3 种类型。我的存储过程应该删除单个字母周围的空格，例如，

*   `A G M words`到`AGM words`
*   `words A G M words`到`words AGM words`
*   `A G words`到`AG words`

我尝试了以下存储过程。

```
CREATE proc At1 @name nvarchar(100)
as
declare @start int
declare @temp1 nvarchar(100)
declare @temp nvarchar(100)
declare @NthPosition int
declare @N int
set @N=LEN(@name)
set @start=1
set @temp1=''
set @temp=''

    set @NthPosition=charindex(' ',@name,@start)
    if(@NthPosition<>0)
    begin
    while (@NthPosition<>0 and @N<>0)
    begin
    set @temp1=SUBSTRING(@name,@start,@NthPosition-1)
    if(@temp<>'')
    begin
        if(len(@temp1)=1)
        begin
            set @temp=(@temp+@temp1)
        end
        else
        begin
            set @temp=(@temp+' '+@temp1)
        end
    end
    else
    begin
        set @temp=@temp1
    end
    set @start=@NthPosition+1
    set @N=@N-@NthPosition
    set @NthPosition=0
    set @NthPosition=CHARINDEX(' ',@name,@start)
    end
    end
    else
    begin 
            select @name
    end
          select @temp
        GO 
```

我用过，

```
 exec At1 'apple A G M mango' 
```

我的预期结果：`apple AGM mango`

但我的实际结果：`apple`

我无法弄清楚错误出在哪里。这方面的任何建议都会更有帮助。我尝试使用可以清除空间的计算列，我只能找到模式#3 的解决方案。我无法构建适合所有 3 种模式的计算列定义.....请分享您的想法对我有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:28:48.527

可能有更简单的方法，使用替换而不是遍历所有内容并使用该`substring`方法。

但话又说回来，您也可能会查看您的输入。这个“处理器”怎么知道一个词是什么？事实上，单词 applea (apple a) 可能不是您要查找的单词，该处理器可能会将其视为单词（理论上）

您可以做的最好的事情是分隔您的输入，例如使用分号“;”。然后，您可以使用拆分功能将这些值放入表中（例如查看这篇文章：[T-SQL：拆分和聚合逗号分隔值](https://stackoverflow.com/questions/12920013/t-sql-split-and-aggregate-comma-separated-values/12920235#12920235)）。接下来就可以使用上面的`replace`功能了。

你得到这样的东西

`select replace(s.value, ' ' , ''), * from split(@value) as s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:36:59.100

我认为这涵盖了所有情况：

```
CREATE proc At1 @Name nvarchar(100)
as
declare @New nvarchar(100)
declare @SpacePos int
declare @Single bit
select @New = '',@Single = 0
select @Name = LTRIM(@Name)

while LEN(@name) > 0
begin
    set @SpacePos = CHARINDEX(' ',@Name)
    if @SpacePos = 0 --No more spaces in the string
    begin
        select @New = @New + CASE WHEN @Single = 1 and LEN(@Name) > 1 THEN ' ' ELSE '' END + @Name,
        @Name = ''
    end
    else if @SpacePos = 2 --Single character "word"
    begin
        select @New = @New + SUBSTRING(@Name,1,1),
            @Name = SUBSTRING(@Name,3,100),
            @Single = 1
    end
    else --Multi-character word
    begin
        select @New = @New + CASE WHEN @Single = 1 THEN ' ' ELSE '' END + SUBSTRING(@Name,1,@SpacePos),
            @Name = SUBSTRING(@Name,@SpacePos+1,100),
            @Single = 0
    end
end
select @New
go 
```

和例子：

```
exec At1 'apple A G M mango' 
exec At1 'A G M words'
exec At1 'words A G M' 
```

产生：

```
apple AGM mango
AGM words
words AGM 
```

（作为一个简化的假设，我假设我可以从原始字符串中删除任何前导空格。我还假设字符串中没有双空格。如果这些假设都不准确，则需要做更多的工作）

# php - 如何使用 php / Linux 设置群发邮件服务器？

> ID：14577604
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:19:19.070
> 
> 标签：php, linux, email, sendmail, mail-server

使用 Linux 和 php 设置群发邮件服务器需要什么，我在哪里可以找到一些步骤，你有什么建议。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:26:37.577

看看那些链接，

1.  [使用 PHP 发送大量电子邮件](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)
2.  [在我的 Web 应用程序中使用 PHP 进行群发邮件](https://stackoverflow.com/questions/8783404/mass-mail-using-php-from-my-web-application)
3.  [如何在 php 中构建批量电子邮件发送应用程序](http://www.slideshare.net/bngsudheer/how-to-build-a-bulk-email-sending-application-in-php)
4.  [如何设置批量电子邮件发件人程序](http://www.webmastertools.fm/how-to/How+to+set+up+a+Bulk+email+sender+program)

愿这对你有所帮助。

# mysql - MySQL 连接器/NET 存储过程表名

> ID：14577605
> 
> 赞同：0
> 
> 时间：2013-01-29T07:19:21.923
> 
> 标签：mysql, stored-procedures, mysql-connector, tablename

当我在我的 C# 应用程序中使用 MySQL 连接器/NET 并使用它调用存储过程时，我使用`ExecuteReader`DataTable 上的方法和扩展来填充它。这是代码：

```
 using (IDataReader reader = db.ExecuteReader(cmd))
            {
                DataTable dt;
                while (!reader.IsClosed)
                {
                    dt = new DataTable();
                    Extensions.Fill(dt, reader, true);
                    ds.Tables.Add(dt);
                } if(!reader.IsClosed) reader.NextResult();
            } 
```

和扩展：

```
public static class Extensions
{
    #region Extensions
    public static void Fill(this DataTable table, IDataReader reader, bool createColumns)
    {
        if (createColumns)
        {
            table.Columns.Clear();
            var schemaTable = reader.GetSchemaTable();
            foreach (DataRowView row in schemaTable.DefaultView)
            {
                var columnName = (string)row["ColumnName"];
                var type = (Type)row["DataType"];
                table.Columns.Add(columnName, type);
            }
        }
        table.Load(reader);
    }

    #endregion 
```

这段代码的问题是，如果你从同一个表名中选择两次，你不知道它在数据集中得到了哪个名字（可能是一个错误，因为同一个表名被使用了两次。例如存储过程：

```
CREATE PROCEDURE `test`.`mytestproc` ()
BEGIN
    SELECT NOW() FROM DUAL;
    SELECT NOW() FROM DUAL;
END 
```

扩展可能会看到相同的表名 ('DUAL') 两次。我不想在我的程序中提示表名是什么，我尝试了以下操作：

```
CREATE PROCEDURE `test`.`mytestproc` ()
BEGIN
    SELECT * FROM (SELECT NOW() FROM DUAL) a;
    SELECT * FROM (SELECT NOW() FROM DUAL) b;
END 
```

但这不起作用。有解决方法吗？

# objective-c - [NSData dataWithContentsOfFile] 的内存问题

> ID：14577612
> 
> 赞同：0
> 
> 时间：2013-01-29T07:19:44.050
> 
> 标签：objective-c, cocoa-touch

我正在开发需要图像缓存的应用程序。为此，我正在使用 JMImageCache 库。它适用于缓存。但它不能释放下一行占用的内存。

```
[NSData dataWithContentsOfFile] 
```

这里，是从磁盘缓存图像的内容代码的函数。

```
- (UIImage *) imageFromDiskForURL:(NSString *)url {
    NSData *data = [NSData dataWithContentsOfFile:cachePathForURL(url) options:0 error:NULL];
    UIImage *i = [[[UIImage alloc] initWithData:data] autorelease];
    data = nil;
    [data release];
    return i;
} 
```

我用仪器检查过，每次都分配 2.34 MB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:26:25.937

```
data = nil;
[data release]; 
```

你为什么期望这一切都有效？为什么要发布原始数据？您将`release`消息发送到`nil`，这是一个无操作。

此外，如果您不使用`alloc`or创建对象`copy`，那么它会自动释放。这意味着如果您再次发布它，它将被过度发布，并且您的应用很可能会崩溃。你需要的是：

一。将方法调用包装在显式自动释放池中：

```
- (UIImage *)imageFromDiskForURL:(NSString *)url
{
    UIImage *i;
    @autoreleasepool {
        NSData *data = [NSData dataWithContentsOfFile:cachePathForURL(url) options:0 error:NULL];
        i = [[UIImage alloc] initWithData:data];
    }
    return [i autorelease];
} 
```

二、alloc-init或者手动释放数据对象：

```
- (UIImage *)imageFromDiskForURL:(NSString *)url
{
    NSData *data = [[NSData alloc] initWithContentsOfFile:cachePathForURL(url) options:0 error:NULL];
    UIImage *i = [[[UIImage alloc] initWithData:data] autorelease];
    [data release];
    return i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:31:31.497

改变序列 nil 并释放

```
[data release];
data = nil; 
```

并清除缓存使用以下委托方法

```
[[JMImageCache sharedCache] removeAllObjects];
[[JMImageCache sharedCache] removeImageForURL:@"http://dundermifflin.com/i/MichaelScott.png"]; 
```

阅读图书馆的自述文件 [https://github.com/jakemarsh/JMImageCache/blob/master/README.markdown](https://github.com/jakemarsh/JMImageCache/blob/master/README.markdown)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:08:47.867

由于 UIImage 使用您传递的数据的方式，您尝试执行的操作无法正常工作。数据对象由图像保留，或者更准确地说，由 UIImage 内部具有的 CGImageSource 保留。从这些数据中，它可以随时解压缩和创建图像。CGImageSource 上有一个选项也可以保留解压缩的数据，但 UIImage 不使用它，因为它针对小型 UI 图形进行了优化。

减轻内存压力的一件事是不将整个 NSData 加载到内存中，而是对其进行内存映射。这使得图像的创建或重新创建有点慢，但创建的 NSData 对象相比之下非常小。

# objective-c - CoreData InnerBand 撤消更改

> ID：14577616
> 
> 赞同：1
> 
> 时间：2013-01-29T07:20:05.453
> 
> 标签：objective-c, core-data

我刚刚开始使用[InnerBand](https://github.com/ZaBlanc/InnerBand)访问我的商店。

我不知道的一件事是如何撤消对象。我已经尝试为底层上下文设置 UndoManager 但这似乎不起作用。

有没有人有这方面的经验？

谢谢，乔丹

# angularjs - Angular JS 动态 JSON 构建

> ID：14577622
> 
> 赞同：1
> 
> 时间：2013-01-29T07:20:29.217
> 
> 标签：angularjs

我想从一个基本 JSON 开始，即 []，并提供一个树状结构，其中包含编辑节点（更改或扩展现有键/值）、添加同级（创建新条目）和添加子级（将 json 扩展到变成一个map，即将{"field1" : "value1", "field2" : "value2"} 添加到"data"。

似乎最好的方法是将 json 范围值绑定到树结构。我即将自己建造一个，但我想我会检查一下是否已经完成......

这种功能将允许更接近业务的人定义和改进数据模型，以及进行简单的编辑。想想 php myadmin 界面，或者 django 管理页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:52:26.817

这个[小提琴](http://jsfiddle.net/ganarajpr/vzvmS/3/)会给你一个先机。它实际上是从这个[问题](https://stackoverflow.com/questions/11854514/is-it-possible-to-make-a-tree-view-with-angular)中引用的。它不处理对象参数，只处理树中的节点，但从控制器的角度来看，添加这些应该非常简单。真正的挑战在于开发一个好看的视图。这是控制器部分（只是为了让大家开心）：

```
angular.module("myApp", []).controller("TreeController", ['$scope', function($scope) {
  $scope.delete = function(data) {
    data.nodes = [];
  };
  $scope.add = function(data) {
    var post = data.nodes.length + 1;
    var newName = data.name + '-' + post;
    data.nodes.push({name: newName,nodes: []});
  };
  $scope.tree = [{name: "Node", nodes: []}];
}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T14:36:19.997

[This](https://github.com/mb21/JSONedit) looks like a good implementation of what you're looking for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T14:13:35.437

查看[json-tree](https://github.com/krispo/json-tree) angularjs 指令。

# android - 如何确定 URL 是否具有有效域或它是有效的 url？

> ID：14577628
> 
> 赞同：3
> 
> 时间：2013-01-29T07:20:57.507
> 
> 标签：android

我在 android 原生消息传递中得到什么，每当我们向某人发送消息并且在文本中有一个 url 时，android 会识别它并在其下划线将其显示为链接，它对许多域都这样做，例如 .us、.uk ,.dk,.ch 和所有其他有效。即使我们发送 jhjh.us 时没有“www”或“http”，它也会将其识别为链接。如果域是错误的，它不会做任何事情。

我想要同样的东西，我尝试使用模式

```
(((https?|ftp|file)://)|(www\\.))"+ "[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|] 
```

它做得很好，但在域中它没有帮助。也试过使用`URLUtil.isValidUrl()`但没用，谁能给我一些关于这个的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:22:44.473

你可以试试这个

```
public boolean isURL(String url)
{
        try {
            new URL(url);
            return true;
        } catch (MalformedURLException e) {
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T07:26:51.640

[考虑到您正在使用Class UrlValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html)，您可以使用 Use UrlValidator 来验证 URL

```
 UrlValidator urlValidator = new UrlValidator();
 urlValidator.isValid("http://Test Link!"); 
```

您可以设置几个属性来控制此类的行为方式，默认情况下`http`，`https`, 和`ftp`被接受。

# javascript - 如果第二次单击按钮，页面会刷新 - 如何防止这种情况？

> ID：14577629
> 
> 赞同：2
> 
> 时间：2013-01-29T07:21:01.587
> 
> 标签：javascript, html, jquery-mobile

我有一个按钮`test`。单击后，2 个标签`selectedZone`和`selectedLocation`2 个虚拟值被设置。当第一次单击按钮时，这可以正常工作。但是，第一次单击后，页面刷新并且未设置标签。

```
<!DOCTYPE html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="language" content="en" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>

        <script>
            function test()
            {
                //alert("in test fn");
                document.getElementById("selectedZone").innerHTML="ZONE TEST";
                document.getElementById("selectedLocation").innerHTML="LOCATION TEST";
            }
        </script>
    </head>

    <body>
        <button onclick="test();"> test </button>

        <br/>
        <br/>
        <label style="font-color='yellow'"> ZONE </label>
        <label id="selectedZone"></label>
        <br/>
        <br/>
        <label style="font-color='yellow'"> LOCATION </label>
        <label id="selectedLocation"></label>
    </body>

</html> 
```

PS标记的理由 `jQuery Mobile`：我实际上有一个弹出窗口。该弹出窗口中有一个按钮。单击该按钮后，`test()`将调用相同的按钮。是否有任何额外的代码要编写（例如：回调），以便使用与弹出窗口下拉列表中选择的相同值设置标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:27:26.163

您在 head 之前缺少 html 开始标签

# jquery - 使用 jQuery 解析 XML 属性的问题

> ID：14577644
> 
> 赞同：1
> 
> 时间：2013-01-29T07:21:55.533
> 
> 标签：jquery, xml

我对 jquery xml 解析很陌生，而且碰壁了。我有一个像这样的 XML 源数据文件，称为 tracker2.xml（非常简单）：

```
<spotter num="17555" report_at="2013-01-29 04:05:17" lat="45.0463562" lng="-93.4922943"></spotter> 
```

我正在尝试将“lat”、“lng”和“report_at”作为变量拉取，以便稍后在代码中使用。到目前为止我有这个，对我来说似乎是正确的代码。我添加了警报（report_at）进行故障排除。运行时，警报显示“[object]”。

```
 $(document).ready(function()
 {
   $.ajax({
     type: "GET",
     url: "tracker2.xml",
     dataType: "xml",
     success: parseXml
   });
 });
function parseXml(xml)
 {
   $(xml).find('spotter').each(function()
   {
     var report_at = $(this).attr('report_at');
     var lats = $(this).attr('lat');
     var lngs = $(this).attr('lng');
   });
}
alert(report_at); 
```

我确定我错过了一些愚蠢的东西。任何能帮助我的人都会是我的英雄。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:35:36.747

```
function parseXml(xml)
 {
   $(xml).find('spotter').each(function()
   {
     var report_at = $(this).attr('report_at');
     var lats = $(this).attr('lat');
     var lngs = $(this).attr('lng');
alert(report_at);
   });
} 
```

你会在你的 for 循环中提醒`report_at`变量，在你的循环中尝试它

# java - 在对象创建之前访问实例变量的实例块

> ID：14577645
> 
> 赞同：-4
> 
> 时间：2013-01-29T07:21:59.120
> 
> 标签：java, instance, block

我对实例块和构造函数有疑问。我了解到实例块总是在构造函数之前执行。

但是，如果我尝试访问实例变量，甚至尝试使用“this”，则不会出现任何错误。但是，即使在创建对象之前，我如何才能访问实例变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:25:34.520

> 我了解到实例块总是在构造函数之前执行。

那你就学错了。他们不是。它们在构造函数*期间*执行，在隐式 super() 调用之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:26:26.217

构造函数实际上并未创建对象，因此您指出的悖论实际上并不存在。构造函数仅在先前分配的对象上运行。

但是，`new`用于调用构造函数的运算符在一个原子操作中同时执行创建对象和调用构造函数的任务。

此外，Java 编译器通过将实例块中包含的代码有效地添加到每个构造函数来实现实例块，因此它们也作为被调用的构造函数的一部分运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T07:45:09.833

因为，在对象生命的开始，Java 虚拟机 (JVM) 会在堆上分配足够的内存来容纳对象的实例变量。但是，当首次分配该内存时，它包含的数据是不可预测的。如果内存按原样使用，对象的行为也将是不可预测的。为了防止出现这种情况，Java 确保在任何代码使用内存之前，至少将内存初始化为可预测的默认值。

# perl - Perl 脚本到超链接以根据每个单元格中的文件名打开文件

> ID：14577647
> 
> 赞同：1
> 
> 时间：2013-01-29T07:22:08.497
> 
> 标签：perl, hyperlink

我开发了一个 perl 脚本来从文本文件中查找匹配的字符串并将其复制到电子表格中，我还将文本文件名包含在电子表格中以获取相应的匹配字符串。现在我想通过单击每个单元格中的文件名来打开文件的超链接。

任何帮助将非常感激！我不是一个程序员...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:28:50.527

以下是使用 Spreadsheet::WriteExcel 的一些示例

```
# External link to a local file
$worksheet->write('B2', 'external:Italy.xls');

# External link to a local file with worksheet
$worksheet->write('B3', 'external:Italy.xls#Sales!B3');

# External link to a local file with worksheet and alternative string
$worksheet->write('B4', 'external:Italy.xls#Sales!B4', 'Link');

# External link to a local file with worksheet and format
$worksheet->write('B5', 'external:Italy.xls#Sales!B5', $format);

# External link to a remote file, absolute path
$worksheet->write('B6', 'external:c:/Temp/Asia/China.xls');

# External link to a remote file, relative path
$worksheet->write('B7', 'external:../Asia/China.xls');

# External link to a remote file with worksheet
$worksheet->write('B8', 'external:c:/Temp/Asia/China.xls#Sales!B8');

# External link to a remote file with worksheet (with spaces in the name)
$worksheet->write('B9', q{external:c:/Temp/Asia/China.xls#'Product Data'!B9}); 
```

您可以查看[write API](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm#write%28%24row,_%24column,_%24token,_%24format%29)以获取更多信息。

# javascript - 在没有视口的情况下禁用 Android 网络浏览器上的双击缩放

> ID：14577655
> 
> 赞同：6
> 
> 时间：2013-01-29T07:23:02.233
> 
> 标签：javascript, dom-events, android-browser

我想在 Android 浏览器的网页中禁用 div 的双标签缩放。我尝试阻止触摸启动和触摸移动的默认设置，取消气泡/传播。我什至尝试过 jQuery mobile doubletap 事件，但它在元素缩放后触发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T23:05:23.933

添加以下元。这将在大多数移动浏览器中停止双击放大，但会在您的页面上的任何地方停止它 - 而不仅仅是在您的单个 div 中。要么全有，要么全无，我害怕。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:49:13.160

扩展`WebView`并用于`GegstureDetector`检测双击。

```
public class DummyWebView
    extends WebView
{

    private boolean doubleTapped;

    private GestureDetector.OnGestureListener gestureListener;
    private GestureDetector.OnDoubleTapListener doubleTapListener;
    private GestureDetector gestureDetector;

    public DummyWebView(Context context,
            AttributeSet attrs,
            int defStyle)
    {
        super(context, attrs, defStyle);

        getSettings().setUseWideViewPort(true);
        getSettings().setBuiltInZoomControls(true);

        // Gesture Listener
        gestureListener = new GestureDetector.OnGestureListener()
        {

            @Override
            public boolean onSingleTapUp(MotionEvent e)
            {
                // Nothing to do
                return false;
            }

            @Override
            public void onShowPress(MotionEvent e)
            {
                // Nothing to do
            }

            @Override
            public boolean onScroll(
                    MotionEvent e1,
                    MotionEvent e2,
                    float distanceX,
                    float distanceY)
            {
                // Nothing to do
                return false;
            }

            @Override
            public void onLongPress(MotionEvent e)
            {
                // Nothing to do
            }

            @Override
            public boolean onFling(
                    MotionEvent e1,
                    MotionEvent e2,
                    float velocityX,
                    float velocityY)
            {
                // Nothing to do
                return false;
            }

            @Override
            public boolean onDown(MotionEvent e)
            {
                // Nothing to do
                return false;
            }
        };

        // Double tap listener
        doubleTapListener = new GestureDetector.OnDoubleTapListener()
        {
            @Override
            public boolean onSingleTapConfirmed(MotionEvent e)
            {
                // Nothing to do
                return false;
            }

            @Override
            public boolean onDoubleTapEvent(MotionEvent e)
            {
                // Double tap detected, we need to prevent 
                doubleTapped = true;
                return false;
            }

            @Override
            public boolean onDoubleTap(MotionEvent e)
            {

                return false;
            }
        };

        // Gesture detection on itself
        gestureDetector = new GestureDetector(getContext(), gestureListener_);
        gestureDetector.setOnDoubleTapListener(doubleTapListener);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {   
        if(gestureDetector.onTouchEvent(event)) return true;

        // Double tapping might perform zooming in/out
        // We need to prevent it
        if(doubleTapped)
        {
            doubleTapped = false;
            return doubleTapped;
        }
        return super.onTouchEvent(event);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T12:21:00.577

```
<meta name="viewport" user-scalable=no" /> 
```

如果您不想针对移动设备进行优化，将节省您的时间。

# javascript - Uncaught ReferenceError: X is not defined - 在 js 文件中声明对象，在 html 按钮事件中进行引用

> ID：14577658
> 
> 赞同：1
> 
> 时间：2013-01-29T07:23:04.923
> 
> 标签：javascript, javascript-objects, dom-events

我想在 js 文件中定义一个 Javascript 对象，并使用户可以通过调用头部的 src 然后使用“new”在其 HTML 上创建它的新实例。[也许这不是最好的方法，但请耐心等待]——非常基本的东西，对吧？

JS 文件 myFile.js 中的代码：

```
function myObject(){
   this.myMethod = thisMethod;

   function thisMethod(){
     return 2;
   }
} 
```

HTML 中的代码：

```
<head>
  <script type="text/javascript" src="http://myserver/myFile.js">
     var customObject = new myObject();     
  </script>
</head>
<body>
   <input type="button" value="Click Me" onclick="alert(customObject.myMethod());">
</body> 
```

但是，当您单击按钮时，会出现错误：

> “未捕获的 ReferenceError：未定义 customObject”

我确信这是关于我如何声明实例然后调用它。如果我将 var 声明放在 js 文件中，则单击有效：

```
 function myObject(){
       this.myMethod = thisMethod;

       function thisMethod(){
         return 2;
       }
    }

var customObject = new myObject(); 
```

但这违背了让用户创建对象并随意使用它的目的。

当然我的结构有问题，但我所有的研究都没有给我一个线索。我认为引入 js 文件与将代码放在 HEAD 中的脚本标记中并在那里实例化对象相同——因为如果我这样做，没有 .js 调用，它就可以工作。

我有很多理论，其中一些是关于事件和加载顺序的，但我不想让这个问题变得混乱。

**那么问题来了：如何在 js 文件中定义一个对象，然后让用户在 HTML 中实例化并调用其方法？（特别是对于像 onclick 这样的事件）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:26:02.450

问题是您不能使用相同的标签来包含外部资源并定义您的 javascript 代码。您必须使用 2 个单独的标签，否则您在标签内放置的任何代码都将被省略。这工作正常：

```
<script type="text/javascript" src="http://myserver/myFile.js"></script>    
<script type="text/javascript">
    var customObject = new myObject();     
</script> 
```

希望能帮助到你，

# windows - 为什么：可见，控制分配的 TAction 会影响应用程序的 CPU 使用率？

> ID：14577659
> 
> 赞同：4
> 
> 时间：2013-01-29T07:23:05.780
> 
> 标签：windows, delphi, cpu-usage, taction

如果 a`TAction`链接到诸如`TToolButton`( Item of `TToolBar`) 或`TActionClientItem`( Item of `TActionToolBar`) 之类的对象，并且该对象在运行时可见，那么每当您在表单中移动鼠标（工具栏以外的任何位置）时，似乎都会完成额外的负载根据可见 TAction 的数量在 CPU 上进行比较，这与在前面提到的任何一个条上都看不到任何 TAction 链接的项目时移动鼠标进行比较。

很明显，完成的额外负载的显着百分比完全取决于您正在运行的钻机类型，但我注意到的是，当您的应用程序具有以下功能时，实际差异可能会很大：

*   很多可见的 TAction 链接项目
*   一个自定义组件，已经对 onMouseOver 事件执行了较小的计算，例如更改控件的外观
*   自定义视觉样式

那么问题来了，为什么可见项链接的 TAction 组件会影响鼠标移动的处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:36:06.850

动作的设计基于动作的空闲时间更新。当您移动鼠标时，应用程序会收到大量排队的消息。每次队列被清空时，应用程序被认为是空闲的，所有的动作都会被更新。这会导致 CPU 使用率过高。

这个问题在 VCL 中众所周知并得到承认。例如，看看[TApplication.ActionUpdateDelay](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ActionUpdateDelay)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:29:40.203

从内存：因为每次鼠标移动都会触发 OnUpdate 事件。至少每次鼠标移动都会触发所有动作的枚举，以查看是否分配了它们的 OnUpdate 事件以便可以触发它们。当链接的控件不可见时，不会触发这些事件。

# php - 向前端显示任何内容

> ID：14577660
> 
> 赞同：0
> 
> 时间：2013-01-29T07:23:15.100
> 
> 标签：php

我正在创建站点，在该站点中，我为用户提供了编辑器以插入任何内容（例如文本、图像、视频、表格……），并将此条目保存到数据库中。

（用户可以将任何内容复制并粘贴到编辑器中。）

当我从数据库表中获取这条记录并显示到前端时，如果它只有用户插入的文本，那么应用 Substr 来获取记录并添加 readmore 链接来阅读全部内容很简单。

但是当它而不是文本出现问题时，我如何显示用户插入的内容？

请建议我解决我在做什么？？？

# php - JSON在php pdo中解析Mysql查询结果

> ID：14577662
> 
> 赞同：0
> 
> 时间：2013-01-29T07:23:18.647
> 
> 标签：php, web-services, pdo

我正在尝试执行以下操作

```
$statement = $conn->prepare('SELECT * FROM myTable');
$statement->execute();

if(!($row = $statement->fetchAll(PDO::FETCH_ASSOC))) 
{
    return false;
}

$conn = null;
} catch(PDOException $e) {
    throw $e;
    return false;
}       

return  return json_encode(array('Result'=>$row); 
```

工作并获取表中的所有条目，然后生成 JSON 数组并发送它们，

但是我想查询必须在 JSON 数组中发送所选 id

例如 10、20、30

我假设这可能会在 For 循环中完成

```
$statement = $conn->prepare('SELECT * FROM myTable WHERE id = :id');
$statement->bindParam(':id', $id, PDO::PARAM_STR);
$statement->execute();

$row = $statement->fetch(PDO::FETCH_OBJ))) 
```

现在假设我有 id's = 10,20,30 我想将它们全部附加到 JSON 数组中我该怎么做？

就像 `return json_encode(array('Result'=>$row);`

编辑代码

```
 function GetMyMembers() 
    {
        $myId = trim($_REQUEST['myId']);

        try {
            $conn = $this->GetDBConnection();

            $statement = $conn->prepare('SELECT valId FROM memList WHERE myId=:myId' );
            $statement->bindParam(':myId', $myId, PDO::PARAM_INT);
            $statement->execute();

            if(!($row = $statement->fetchAll(PDO::FETCH_ASSOC))) 
            {
                return false;
            }

// $row contains ALL THE ID'S

            $placeholders = str_repeat('?,', count($row));
            $placeholders = substr($placeholders, 0, -1);
            $sql = "SELECT id, * FROM players WHERE id IN ($placeholders)";
            $statement = $conn->prepare($sql);
            $statement->execute($row);
            $rows = $sth->fetchAll(PDO::FETCH_ASSOC|PDO::FETCH_GROUP);

            $conn = null;
        } catch(PDOException $e) {
            throw $e;
            return false;
        }       
        return $rows;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:33:02.493

```
$statement = $conn->prepare('SELECT * FROM myTable');
$statement->execute();
$data = array();
while($row = $statement->fetch(PDO::FETCH_ASSOC))) 
{
    $data[$row['id']] = $row;
}
return json_encode(array('Result'=>$data)); 
```

顺便说一句，使用原始 API 并不方便。使用数据库抽象库，您的代码可以短至以下 2 行：

```
$data = $db->getInd("id",'SELECT * FROM myTable');
return json_encode(array('Result'=>$data)); 
```

**编辑：**
如果你有一个 id 数组，你需要更复杂的代码

```
$ids  = array(1,2,3);
$data = array();
$statement = $conn->prepare('SELECT * FROM myTable WHERE id = :id');
foreach ($ids as $id) {
    $statement->bindValue(':id', $id, PDO::PARAM_STR);
    $statement->execute();
    $data[] = $statement->fetch(PDO::FETCH_OBJ);
}
return json_encode(array('Result'=>$data)); 
```

但是在使用数据库抽象库时，会有相同的 2 行：

```
$data = $db->getAll('SELECT * FROM myTable where id IN (?a)', $ids);
return json_encode(array('Result'=>$data)); 
```

**Edit2：**
如果你只需要 id

```
$statement = $conn->prepare('SELECT id FROM myTable');
$statement->execute();
$data = array();
while($row = $statement->fetch(PDO::FETCH_ASSOC))) 
{
    $data[] = $row['id'];
}
return json_encode(array('Result'=>$data)); 
```

在使用数据库抽象库时，它仍然是 2 行：

```
$ids = $db->getCol('SELECT id FROM myTable');
return json_encode(array('Result'=>$ids)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:38:18.663

```
$ids = array(1,2,3);
$placeholders = str_repeat('?,', count($ids));
$placeholders = substr($placeholders, 0, -1);
$sql = "SELECT id, * FROM table WHERE id IN ($placeholders)";
$sth = $dbh->prepare($sql);
$sth->execute($ids);
$rows = $sth->fetchAll(PDO::FETCH_ASSOC|PDO::FETCH_GROUP);
echo json_encode(array('Result' => $rows)); 
```

基于其他评论：
最佳选择：

```
$sql = '
SELECT *
FROM table1 AS t1
INNER JOIN table2 t2
ON  t2.foreign_key = t1.id
'; 
```

或者

```
$sql = 'SELECT id FROM table1';
$sth = $dbh->prepare($sth);
$sth->execute();
$ids = $sth->fetchColumn();
//next look above 
```

# java - Eclipse - 无法创建 java 虚拟机

> ID：14577663
> 
> 赞同：28
> 
> 时间：2013-01-29T07:23:20.773
> 
> 标签：java, eclipse

我在使用以下配置运行 Eclipse 时遇到问题：

日食.ini

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256M
--launcher.defaultAction
openFile
-vm
jdk1.7.0_02/bin
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms256M
-Xmx1024M

# Adding this line, I get "Failed to create virtual machine"

-XX:PermSize=512M
-XX:MaxPermSize=512M
-XX:+UseParallelOldGC
-XX:ParallelGCThreads=2
-XX:ThreadPriorityPolicy=1
-Xverify:none
-XX:-UseSplitVerifier 
```

上述配置有效，除非我添加了上面指定的行。可能是什么问题呢？

我正在从具有 4GB 内存的 Windows 7（64 位）机器上运行 eclipse，尽管我在路径中指定的 JDK 是 32 位的，它工作得很好。唯一的问题是如果我添加那些额外的配置参数。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-25T10:49:16.330

eclipse.ini 中有两个地方包括

```
--launcher.XXMaxPermSize
256m 
```

做了

```
--launcher.XXMaxPermSize
128m 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-25T14:23:10.987

我有完全相同的问题，有一天日食不会打开。尝试将 eclipse.ini 编辑为正确的 java 版本 1.7，但仍然出现相同的错误。最终改变：

```
-Xms384m 
-Xmx384m 
```

...和所有的工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-24T11:16:12.167

将 MaxPermSize=512M 更改为 MaxPermSize=256M 后它对我有用

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-27T03:18:14.223

更改 eclipse.ini（与 eclipse.exe 位于同一目录中）中的以下参数以匹配您当前的 Java 版本之一。请注意，我还更改了 eclipse 进程（在 JVM 中运行）允许的最大内存。如果您安装了多个 Java 版本，则可能会发生这种情况。下面的把戏词对我来说。

```
-Xmx512m
-Dosgi.requiredJavaVersion=1.6 
```

我把这个改成，

```
-Xmx1024m
-Dosgi.requiredJavaVersion=1.7 
```

然后它起作用了......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-11T09:07:14.447

将内存大小减少到 Xmx512m 并且它可以工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-04T05:02:56.657

更改 eclipse.ini（与 eclipse.exe 位于同一目录中）中的以下参数以匹配您当前的 Java 版本之一。请注意，我还更改了 eclipse 进程（在 JVM 中运行）允许的最大内存。如果您安装了多个 Java 版本，则可能会发生这种情况。下面的把戏词对我来说。

```
-Xmx512m
-Dosgi.requiredJavaVersion=1.6 
```

我把这个改成，

```
-Xmx1024m
-Dosgi.requiredJavaVersion=1.7 
```

然后它起作用了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-20T15:17:07.793

在上述方法对我不起作用后，我删除了我的 eclipse.ini。

我完全期望下一次运行（当它看起来可能工作时）重新创建它，以便我可以比较但它没有。

所以我不知道具体是什么修复了它。

然而，我确实有一个奇怪的是 jdk 1.7 但是当我跑的时候

C:\Users\jonathan.hardcastle>java -version 注册表项“Software\JavaSoft\Java Runtime Environment\CurrentVersion”的值为“1.7”，但需要“1.6”。错误：找不到 java.dll 错误：找不到 Java SE 运行时环境。

我得到了上述..所以我（重新？）专门安装了jre 1.7，然后就消失了。

这与我的日食成功没有直接关系。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-12T12:25:30.160

--launcher.XXMaxPermSize MaxPermSize=256m -Xms512m -Xmx1024m

```
 replace with below one 
```

--launcher.XXMaxPermSize MaxPermSize=128m -Xms256m -Xmx512 m

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-08T15:04:54.663

您也可以尝试关闭其他程序。:)

这很简单，但对我有用。在我的情况下，虚拟机没有足够的内存来运行，我得到了同样的信息。所以我不得不通过关闭不必要的程序来清理内存。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-29T15:45:47.910

**只需在 Windows 环境变量中添加您的 JDK 路径即可。这解决了我的情况**

![在此处输入图像描述](../Images/db1924b21490a8ddef410ed97354ddd0.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-14T09:42:29.393

我有同样的问题，我通过更新我的 JDK 版本非常简单地修复了它。如果您没有安装或未更新 JDK，请[转到此处](http://www.oracle.com/technetwork/java/javase/downloads/index.html)安装/更新它。大多数情况下，您的问题将得到解决。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-17T05:51:30.637

在我的情况下，将 Xmx1024m 减少到更小的东西，例如 Xmx512m 使其工作。因此，从所有响应（在其他类似站点上方和类似站点中）来看，您似乎可以尝试按摩/减少内存大小。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-12-26T15:31:59.587

我在下面添加了它，它工作正常。

-vm C:/Program Files/Java/jdk1.6.0_16/bin/javax.exe

-Xmx512m

-Dosgi.requiredJavaVersion=1.6

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-27T10:35:10.867

您可以采取以下解决方法：

为eclipse创建一个快捷方式并右键单击快捷方式并转到快捷方式的属性。

在目标框中更新字符串：

```
-vm "C:\Program Files\Java\jdk1.6.0_07\bin" 
```

路径将根据您的 java 安装目录而改变。

因此，更改目标字符串后将如下所示。

```
D:\adt-bundle-windows-x86-20131030\eclipse\eclipse.exe -vm "C:\Program Files\Java\jdk1.6.0_07\bin" 
```

单击应用并尝试单击 Eclipse 快捷方式。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-15T08:34:33.750

尝试打开 eclipse.ini 并替换

```
-Xmx1024m 
```

和

```
-Xmx512m 
```

我的 java 版本是 1.7，如下所示

```
-Dosgi.requiredJavaVersion=1.7 
```

所以我没有修改那个参数。

这对我有用;-)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-03T13:51:01.547

对我来说，这是一个记忆问题。如果我用我的（大）webapp 运行 tomcat 然后尝试启动 Eclipse，我会收到 Eclipse 错误。如果我先启动 Eclipse，然后启动 tomcat 和我的 webapp，一切都会按预期工作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-03T04:56:55.583

最近我遇到了这个问题并尝试了上述所有方法，但它们都不适合我。

这是解决此错误的另一个技巧是

我只是删除了 eclipse 配置文件，然后 eclipse 开始工作了。我不知道为什么，但它可以工作。

也许这对其他人有帮助。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-05-12T06:20:45.907

如果有人使用以前的版本然后 Jdk 8 更新 20 并得到这个问题请从 eclipse.ini 文件中删除以下内容

-XX:+使用字符串去重

由于 StringDeduplication 在更新 20 中的更高版本的 JDK 8 中添加了**StringDeduplication**澄清，请检查 Fabian Lange [https://blog.codecentric.de/en/2014/08/string-deduplication-new-feature-java-8-update -20-2/](https://blog.codecentric.de/en/2014/08/string-deduplication-new-feature-java-8-update-20-2/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-05-28T12:56:42.843

我也进入了 C++ 的 MinGW 编译器的路径。删除后，错误消失了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-03T03:31:35.223

我尝试了几种方法，但没有奏效。唯一这样做的是底部的那个。我将仅列出我尝试过的其他选项，以供参考。

一些背景，我从火星迁移到霓虹灯并几乎完全复制了eclipse.ini。

**减少 -XX:MaxPermSize 和 -Xmx**

就像其他答案提到的那样，逐渐减少这两个标志（例如到 128m），然后再试一次。如果它仍然无法在 128m 处工作，请尝试以下其他选项。

**通过重命名 eclipse.ini 来查找违规标志**

Jon H 的[回答](https://stackoverflow.com/a/23763817/4212710)给了我一个提示。删除 eclipse.ini（或重命名）并启动 eclipse。它*应该*重新生成 eclipse.ini 并成功启动（我的没有重新生成 eclipse.ini，尽管 eclipse 启动得很好）。

如果 eclipse.ini 为您重新生成，则将每个标志一一添加。

如果没有，请还原原始的 eclipse.ini 并逐个删除每个标志，直到找到导致错误的标志。

就我而言，我从火星升级到霓虹灯。有问题的标志是`-XX:+UseG1GC`删除这个标志（只有这个标志）对我有用。回退到1G 也对我有用`-Xmx`。`-XX:MaxPermSize`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-06-06T08:16:30.557

**从文件中删除-XX:+UseParallelOldGC**选项后，它对我有用。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2015-02-18T06:59:19.193

将目标更改为特定的安装文件
，如下所示
：D:\SoftWares\oepe-12.1.3.1-luna-maf-distro-win32-x86_64old\eclipse.exe -vm D:\delete\jdk1.7.0_67\bin\javaw。可执行程序

# jboss - 如何使用 org.jboss.varia.property.SystemPropertiesService 和 org.jboss.util.property.PropertyListener

> ID：14577664
> 
> 赞同：0
> 
> 时间：2013-01-29T07:23:23.370
> 
> 标签：jboss, jboss-4.2.x

全部

我已经看到`jboss-service.xml`使用扩展`SystemPropertiesService`类来引用自定义属性文件。但是我还没有完全理解这种用法​​。有人可以帮我理解如何使用这两个类吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:21:51.583

The SystemPropertiesService is very useful to define properties that then can be accessed from your application, it's usually used to parametrize the application without having to change to code, or even the application package (provided you place the jboss-service.xml outside de war / ear / jar structure). For example, you can create a myapp-service.xml file with the following content:

```
<server>
 <mbean code="org.jboss.varia.property.SystemPropertiesService" name="jboss:type=Service,name=MyAppProperties">
 <!-- Define the properties directly in the service.xml file-->
 <attribute name="Properties">
     myapp.property1=property1Value
     myapp.property2=property2Value
 </attribute>
 <!-- You can also specify a route to another file where you define properties-->
 <attribute name="URLList">
     /home/myuser/txtlist.properties
 </attribute>
 </mbean>
</server> 
```

Then you can deploy this file directly in JBoss, the properties defined will be visible to all the applications deployed in the same JBoss and you'll be able to access them with the static method:

```
String System.getProperty(String propertyName) 
```

So if you want to access to the value of myapp.property1 from your application you'd do:

```
String property = System.getProperty("myapp.property"); 
```

On the other hand the PropertyListener is really an interface that defines a listener that will be triggered when any event occurs with a property. The org.jboss.util.property.PropertyAdapter is an abstract implementation of this interface. To use it you've to implement its three methods (propertyAdded, propertyChanged, propertyRemoved), that will be called by the container when a property is added, changed or removed respectively. Those methods have a PropertyEvent object as parameter, which let you know the property affected.

This interface/class is useful when you want your application to do something every time a property changes (a bad implementation would be that you check every certain time for a property change), this way, when JBoss detects that a property has changed its value, it will call the respective method (that you should implement with the behaviour you want).

For example, if you want to print the new property value everytime it's changed you could implement the propertyChanged method this way:

```
void propertyChanged (PropertyEvent pe){
    // check the property that has changed
    if (pe.getPropertyName().equals("myapp.property1")){
         System.out.println("The value of " + pe.getPropertyName() + " has changed to " + pe.getPropertyValue());
    }
} 
```

Look for more information in the [API](http://docs.jboss.org/jbossas/javadoc/4.0.4/common/org/jboss/util/property/PropertyListener.html), and for [PropertyAdapter](http://docs.jboss.org/jbossas/javadoc/4.0.4/common/org/jboss/util/property/PropertyAdapter.html) and [PropertyEvent](http://docs.jboss.org/jbossas/javadoc/4.0.4/common/org/jboss/util/property/PropertyEvent.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T20:13:34.653

在 JBOSS 5.1 中，它仅在您将属性或 URL 放入 properties-service.xml 时才有效，并且此文件应位于 jboss.home/server/default/deploy 目录下。

# ruby-on-rails - 如何访问 fields_for 中的嵌套子元素

> ID：14577674
> 
> 赞同：0
> 
> 时间：2013-01-29T07:23:49.050
> 
> 标签：ruby-on-rails, ruby, mongoid

我正在尝试访问一种`Hash`类型的 mongoid，`fieds_for`并且我已经与模型建立了关系，并且想要访问该模型的哈希。就像是：

```
class Leave
  field :leaves_types, :type => Hash
end

class User
  has_many :leaves
end 
```

想做类似的事情：

```
form_for @user do |f|
  f.fields_for :leaves.leave_types... 
```

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:55:42.763

你*应该*给. `fields_for`有关该方法的更多信息，[请参阅文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for-label-One-to-many)。在您的情况下，首先，将此行添加到您的`User`模型中：

```
class User
  has_many :leaves
  accepts_nested_attributes_for :leaves
end 
```

这是必需的，以便在发布您的表单时，来自表单字段的属性通过`params`正确处理。

现在您的模板应该如下所示（为了简单起见，我假设您`Leave`也有一个名为 的简单文本字段`foo`）：

```
<%= form_for @user do |f| %>
  ...
  <%= f.fields_for :leaves do |leave_fields| %>
    # Fields for a leave here ----v
    Foo: <%= leaves_fields.text_field :foo %>
  <% end %>
<% end %> 
```

或者，如果您`@user.leaves`已经初始化并且希望表单构建器将其值放入表单字段，则必须迭代`@user.leaves`，将它们中的每一个`fields_for`作为第二个参数传递：

```
<%= form_for @user do |f| %>
  ...
  <% @user.leaves.each do |leave| %>
    <%= f.fields_for :leaves, leave do |leave_fields| %>
      # Note the addition here --^
      Foo: <%= leave_fields.text_field :foo %>
    <% end %>
  <% end %>
<% end %> 
```

* * *

**但是**您的问题还有另一个问题：您没有文本字段，而是*hash*，并且没有默认的表单输入（即没有`f.hash_field :leaves_types`）。因此，您可能希望像以下问题中建议的那样自己制作：[[1]](https://stackoverflow.com/q/9613208/693538)、[[2]](https://stackoverflow.com/q/1002963/693538)和[[3]](https://stackoverflow.com/q/3089849/693538)。

无论如何，拥有一个 Hash 字段对我来说似乎并不常见，所以也许 Hash 可以以某种方式替换，比如说，用另一个`has_many`关联（不确定），在这种情况下你只需要另一个嵌套`fields_for`的 .

# c# - 如何始终在 windows phone 8 中显示数字键盘？

> ID：14577675
> 
> 赞同：2
> 
> 时间：2013-01-29T07:23:51.383
> 
> 标签：c#, xaml, windows-phone-8

我正在开发 windows phone 8 应用程序，我有一个页面输入数字，我给出了这样的代码，

```
<TextBox Name="txtNumber" Height="Auto" Margin="0,10,0,510" >
    <TextBox.InputScope>
        <InputScope>
            <InputScopeName NameValue="Number" />
        </InputScope>
    </TextBox.InputScope>
</TextBox> 
```

通过上面的代码；当我放置光标键入时，它会显示数字键盘；但我需要一个始终可见的固定键盘，如果我们键入它，则必须在文本框中输入值。

有人请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:30:43.250

试穿这个尺寸：

xml:

```
<Grid 
    x:Name="ContentPanel" 
    Grid.Row="1" 
    Margin="12,0,12,0"
    Loaded="ContentPanel_Loaded">
    <TextBox 
        Name="TB1" 
        HorizontalAlignment="Left" 
        Height="72" 
        Margin="0,74,0,0" 
        VerticalAlignment="Top"
        Width="456"
        InputScope="Number"/>
</Grid> 
```

代码：

```
private void ContentPanel_Loaded(object sender, RoutedEventArgs e)
{
    // Turn on Tab Stops.  You can set this in XAML as well.  
    this.IsTabStop = true;

    // Set focus on the TextBox.
    TB1.Focus();
} 
```

它将在 SIP 进入`<TextBox>`准备输入时启动。希望这是你要找的。

从这个[MSDN 博客](http://blogs.msdn.com/b/silverlight_sdk/archive/2010/07/02/programmatically-dismiss-the-sip-keyboard-in-windows-phone-silverlight-app.aspx)中得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:31:36.043

最简单的方法可能是创建自己的用户控件。然而，让它像普通键盘一样工作很可能需要做很多工作。 [http://www.silverlightshow.net/items/Creating-a-Silverlight-Custom-Control-The-Basics.aspx](http://www.silverlightshow.net/items/Creating-a-Silverlight-Custom-Control-The-Basics.aspx)

或者也许这会有所帮助[http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)

# templates - 在 Underscore.js 模板中使用 <% 而不解析它

> ID：14577679
> 
> 赞同：3
> 
> 时间：2013-01-29T07:24:05.660
> 
> 标签：templates, underscore.js

通常，如果你使用 Underscore.js 的模板，任何看起来像Underscore.js`<% ... %>`并被`<%= ... %>`解析的表达式

`<% ... %>`如果我想在模板中嵌入文本，如何转义这样的值？

换句话说：我如何告诉 Underscore.js 忽略看起来像占位符但不是占位符的东西？

我想我必须使用某种转义，但通常是`\`行不通的。如果我输入

```
_.template('<%= name %> ### \<%= name %>', { name: 'foo' }); 
```

结果我得到`foo ### foo`了，这显然*不是*我想要的。

**更新：**为了更清楚，我想要从上面的行中得到什么 - 它应该导致

```
foo ### <%= name %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:14:43.797

如果您的最终输出是 HTML，您可以用他们的 HTML 转义代码替换`<`和：`>`

```
_.template('<%= name %> ### &lt;%= name %&gt;', { name: 'foo' }); 
```

你也可以[修改 Underscore 的模板设置](http://underscorejs.org/#template)来支持这些东西，所以这`<%= ... %>`对 Underscore 没有任何意义：

```
_.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g
};
var t = _.template('{{name}} ### <%= name %>', { name: 'foo' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-30T14:30:53.450

对于非 html 特定的解决方案，使用[unicode 字符转义序列](https://en.wikipedia.org/wiki/Escape_sequences_in_C#Universal_character_names)来转义`<`,`>`和`%`. 使用你的例子，这个：

```
_.template('<%= name %> ### \u003C\u0025= name \u0025\u003E', { name: 'foo' }); 
```

将输出

```
foo ### <%= name %> 
```

# windows - 使用 WiX 向现有服务授予服务启动/停止权限

> ID：14577684
> 
> 赞同：3
> 
> 时间：2013-01-29T07:24:31.857
> 
> 标签：windows, service, installation, wix, windows-installer

我的 WiX 安装程序安装了作为 NetworkService 运行的 ServiceA。在其运行期间，ServiceA 偶尔需要重新启动已安装的 ServiceB。但是，ServiceB 不授予 NetworkService 启动/停止它的权限。有没有办法可以为我的 WiX 安装程序中已安装的 ServiceB 授予 NetworkService 这些权限？ServiceInstall 和 PermissionEx 可以用于现有服务吗？

# youtrack - 我可以使用命令在 YouTrack 中添加新的 sprint（修复版本）吗？

> ID：14577686
> 
> 赞同：0
> 
> 时间：2013-01-29T07:24:39.080
> 
> 标签：youtrack

正如标题所说，我需要从我的网络应用程序创建一个新的修复版本或冲刺。我主要通过 YouTrackSharp 使用命令来执行我需要的任务，但我对这个有点卡住了。有人有想法么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:02:56.820

如果您的意思是向 Fix Versions 捆绑包（值集）添加一个全新的值，那么这是不可能的。您只能在 YouTrack 的管理部分执行此操作。如果您的意思是向问题添加另一个修复版本，只需使用命令“添加修复版本”。

问候， 亚历山大

# oracle-adf - 如何在不明确硬编码的情况下重置 adf 页面？

> ID：14577692
> 
> 赞同：0
> 
> 时间：2013-01-29T07:24:59.000
> 
> 标签：oracle-adf, jdeveloper

我有一个带有几个输入框、选择框等的表单。

如何在不编写代码的情况下将控制值重置为空/空。我的意思是是否有任何属性可以自动重置页面或控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:18:21.453

你可以使用这样的东西：

```
 <af:commandLink text="commandLink with resetActionListener"
                            id="cl1" immediate="true" actionListener="#{demoInput.reset}">
         <af:resetActionListener/>
       </af:commandButton> 
```

更多信息[在这里](http://jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_resetActionListener.html)。

# image-processing - 如何确定（倾斜的）矩形目标与相机的距离

> ID：14577693
> 
> 赞同：3
> 
> 时间：2013-01-29T07:25:05.693
> 
> 标签：image-processing, language-agnostic, geometry, computer-vision

我有一张包含多个不同大小和方向的矩形的照片。**我目前正在尝试查找从相机到图像中存在的任何矩形的距离。实现这一目标的最佳方法是什么？**

例如，一张示例照片可能看起来与此类似（尽管这可能非常不成比例）：

![示例图像](../Images/fd07031458307648a8b3f45afc8b7e3f.png)

我可以找到图像中任何矩形角的像素坐标，以及相机 FOV 和分辨率。我也事先知道图像中可能出现的任何矩形的长度和宽度（但不知道它们面对相机的角度）。可以保证图像中每个矩形目标的长宽比是唯一的。矩形和相机将始终与地面平行。

* * *

**我试过的：**

我根据在互联网上找到的一些示例代码破解了一个解决方案。我基本上是遍历每个矩形并找到平均像素长度和高度。

然后我使用它来找到长度与高度的比率，并将其与所有已知矩形目标的比率列表进行比较，以便我可以找到目标的实际高度（以英寸为单位）。然后我使用这些信息来找到距离：

![距离公式](../Images/734c29e0e3e37d665efe187ca52361fb.png)

...`actual_height`目标的实际高度在哪里，以英寸为单位，`IMAGE_HEIGHT`图像的`pixel_height`高度（以像素为单位），图像上矩形的平均高度（以像素为单位），以及`VERTICAL_FOV`相机看到的角度沿垂直轴以度为单位（在我的相机上约为 39.75 度）。

* * *

我在互联网上找到了这个公式，虽然它似乎有点工作，但我并不真正理解它是如何工作的，而且它似乎总是低于实际距离。

此外，我不确定如何修改公式，以便它可以处理从某个角度查看时非常倾斜的矩形。由于我的算法通过查找长度和高度的比例来工作，因此它适用于矩形 1 和 2（不太偏斜），但不适用于矩形 3，因为它非常偏斜，完全放弃了比率.

我考虑使用这个 StackOverflow 问题中概述的关于[透视变形矩形的比例](https://stackoverflow.com/a/1222855/646543)的方法来找到比率，但我不确定这对我所拥有的东西有多好，并且想知道它是否过度杀伤或者是否有更简单的我可以尝试的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-03-02T14:13:14.143

FWIW 我曾经[用三角形做过类似的事情](http://www.museful.net/2011/system-modelling/6dof-visual-positioning)（完整的 6DoF 姿势，而不仅仅是距离）。

# mysql - MySQL：如何避免 mysql 积压？

> ID：14577694
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:06.380
> 
> 标签：mysql, sql

我在我的从机上运行这个查询。

**询问：**

`select ID from audit where app='accounts'`

**解释输出**

```
 +----+-------------+-----------------+------+---------------+------+---------+------+-----------+-------------+
| id | select_type | table           | type | possible_keys | key  | key_len | ref  | rows      | Extra       |
+----+-------------+-----------------+------+---------------+------+---------+------+-----------+-------------+
|  1 | SIMPLE      | IAMAccountAudit | ALL  | NULL          | NULL | NULL    | NULL | 155658522 | Using where |
+----+-------------+-----------------+------+---------------+------+---------+------+-----------+-------------+ 
```

在 Execution 之后，我的从机在主机后面运行。

```
 *************************** 1\. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 182.31.251.94
                  Master_User: repl
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: bin.001487
          Read_Master_Log_Pos: 2967065
               Relay_Log_File: 172-relay-bin.004312
                Relay_Log_Pos: 43303861
        Relay_Master_Log_File: bin.001486
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: 
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 43303721
              Relay_Log_Space: 55397036
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 365
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 1302078 
```

它一直在增加。

如何避免mysql积压？.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:03:09.650

如果我有一个表模式可以使用，那会有所帮助。但是，据我所知，您的查询没有使用索引，而是从第一条记录到最后一条记录依次读取表。

由于查询必须检查大约 155,658,522 或 1.55 亿行，这将导致服务器资源耗尽。由于查询在您正在查询的列上没有适当的索引（`key`=`null`在解释输出中），因此行将一一获得对它们发出的读锁。

当此读取发生时，MySQL 可能会阻止复制活动，即阻止对正在读取的行的更新。然后，当这些更新无法完成时，MySQL 会将这些更新排队。这个问题是由于服务器的 ACID 合规性而不是线程等。由于我没有诸如引擎之类的表信息，这充其量只是一个有根据的猜测。

建议：

1.  索引表格上的应用列，让您更快地进行选择。使用 app 列上的索引，MySQL 将对表执行 b-tree 搜索，而不是顺序搜索。您的查询将运行得更快，发出更少的锁，因此它会更快更轻。缺点是它会稍微延迟此表的更新和插入，因为需要维护一个额外的索引。
2.  除非您需要纳秒级实时复制，否则系统将保持原样。请记住，如果对实时数据没有要求，复制落后不是问题。复制失败要糟糕得多。

希望这个对你有帮助。

# c - 分段错误（核心转储）：从函数返回时出错

> ID：14577696
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:09.997
> 
> 标签：c, segmentation-fault, return

我有两个功能。

```
struct logger_message vget_log_msg(enum LogStatus log_status, const char* format, va_list args) {    
    struct logger_message log_msg;
    log_msg.status = log_status;
    log_msg.timestamp = get_current_timestamp();

    memset(log_msg.message_buffer, 0, MESSAGE_SIZE);
    if(format){    
        vsprintf(log_msg.message_buffer, format, args);
    }
    return log_msg;
} 
```

和

```
int send_log_message_to_mqueue(mqd_t mqd, enum LogStatus log_status, const char* format, ...) {
    struct logger_message msg;
    va_list argp;
    va_start(argp, format); 
    msg = vget_log_msg(log_status, format, argp);
    va_end(argp);
    int res; 
    res = send_message_to_mqueue(mqd, (char *)&msg, sizeof(msg));
    return res;
} 
```

因此，我在从 vget_log_msg 在线返回时收到错误“Segmentation Fault（Core dumped）”：

```
msg = vget_log_msg(log_status, format, argp); 
```

**编辑：也许这些信息会很有用**

```
struct logger_message{
    enum LogStatus status;
    time_t timestamp;
    char message_buffer[MESSAGE_SIZE];    
}; 
```

有人知道我为什么会收到此错误吗？如何纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:44:01.613

什么是 MESSAGE_SIZE？那有多大？您可以通过减小它的大小来检查，还是使用指针而不是整个结构返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:30:42.860

我的猜测是您使用`vget_log_msg`了没有在包含`send_log_message_to_mqueue`. 例如，不包括定义 的头文件`vget_log_msg`，或者，如果两者都在同一个文件中，则不定义`vget_log_msg`before `send_log_message_to_mqueue`。

在这种情况下，编译器会假设`vget_log_msg`返回一个`int`而不是对返回结构的函数使用正确的调用约定。这样的结构由调用者返回，它在堆栈的一侧为返回的结构分配一个缓冲区，并将指向该缓冲区的指针作为隐式参数传递给被调用函数；那么，使用错误的调用约定将导致该隐式指针丢失并因此错误，然后返回函数将返回的结构写入无效位置。

或者，它们可以使用不同版本的`struct logger_message`by，例如，包括以不同方式声明它的不同头文件。

# android - 在可展开列表视图中设置组背景图像的问题

> ID：14577697
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:11.997
> 
> 标签：android, expandablelistview

我有一个 ExpandableListView 并且我在扩展组时设置背景图像，但是当我设置背景图像大小更改为组的当前背景时，会出现问题，

有什么帮助吗？？

见下图

![在此处输入图像描述](../Images/9db3a373dabec985b4e128df7b1a12ea.png)

![在此处输入图像描述](../Images/06bdd522c6f2fbd2cc85efa0f24db4cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:32:42.900

我认为您的图像尺寸有所不同，因此它会根据您的图像尺寸改变高度，就像您`WRAP_CONTENT`在高度中所采用的那样。

请固定您的高度或确保两个图像具有相同的高度和宽度。

# ruby-on-rails - 如何在rails中以相同的form_tag汇总多个值

> ID：14577698
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:15.227
> 
> 标签：ruby-on-rails, forms

我正在努力邀请新用户。在 UI 中，我使用 J 查询添加文本框，以允许用户输入许多名称和相应的电子邮件 ID。提交时，我只想访问控制器中的所有名称和电子邮件（多个值）。现在我只需要帮助。有没有一种方法可以创建具有相应名称的值的哈希值，并且 emil 一些类似的东西。{"name1" => "eamil1","name2" => "eamil2" } ...

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:29:13.010

使用 Javascript 代码，您应该生成一些 HTML 输入，例如：

```
<input type="text" name="invited_persons[0][name]" />
<input type="email" name="invited_persons[0][email]" />

<input type="text" name="invited_persons[1][name]" />
<input type="email" name="invited_persons[1][email]" /> 
```

由于用作范围的数字，生成的`params`将如下所示：

```
{
  'invited_persons' => {
    '0' => {
      'name' => 'foo',
      'email' => 'foo@foo.foo'
    },
    '1' => {
      'name' => 'bar',
      'email' => 'bar@bar.bar'
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:02:20.457

您可以使用“fields_for”标签并传递一个名称，后跟 []，如下所示构建的表单将发送一个哈希值数组。

```
<%= fields_for :"names[]", User.new do |builder| %>
    <%=builder.text_field :name%>
    <%=builder.text_field :name%>
    <%=builder.text_field :name%>
    <%=builder.submit%> 
<% end %> 
```

在提交由上述代码生成的表单时，参数哈希将包含 names= [ {"name"=> "..."}, {"name" => "..."}, {"name" => “...”}]

# php - 从 php 中的会话关联数组中删除项目

> ID：14577701
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:23.163
> 
> 标签：php, arrays, session, cart, associative

我真的坚持这一点。它是数组中的一个数组，例如：

```
Array ( [0] => Array ( [item] => product1 [unitprice] => 15 [quantity] => 1 ) [1] => Array ( [item] => product2 [unitprice] => 15 [quantity] => 1 ) ) 
```

我尝试使用以下方法删除特定项目：

```
$pid=$_GET['id']; (where id = product1)

$delete=array_splice($_SESSION['cart'], array_search($id, $_SESSION['cart']), 1);
unset($delete);    

print_r($_SESSION['cart']); 
```

这似乎随​​机删除项目。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:37:57.863

```
<?php 
function searchForItem($id, $array) {
   foreach ($array as $key => $val) {
       if ($val['item'] === $id) {
           return $key;
       }
   }
   return null;
}

$pid=$_GET['id'];

$id = searchForItem($pid, $_SESSION['cart']);

unset($_SESSION['cart'][$id]);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:37:51.413

你的意思是：

```
foreach($_SESSION['cart'] as $index => $v) { 
    if(($key = array_search($pid, $v)) !== false) {
        unset($_SESSION['cart'][$index]);
    }
} 
```

# sql - 如何获得随机行？

> ID：14577702
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:27.877
> 
> 标签：sql, select, random

再会。

```
SELECT * FROM banners WHERE seet='$seet' 
```

结构表`banners`在这里[**http://i.stack.imgur.com/KR6Xu.png**](http://i.stack.imgur.com/KR6Xu.png)

请告诉我如何从表中随机获取一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:35:49.983

SELECT TOP 1 * FROM [TableName] ORDER BY NEWID()

这将为每一行分配一个 GUID，并将返回基于 TOP 1 和 ORDER BY 组合的随机记录。

# sql-server - Crystal Reports 不显示存储过程输出

> ID：14577704
> 
> 赞同：1
> 
> 时间：2013-01-29T07:25:31.090
> 
> 标签：sql-server, stored-procedures, crystal-reports

我在 SQL Server 中创建了一个存储过程。它在那里工作得很好。

当我从 Crystal Reports 调用它时，它会显示参数字段，但不会显示数据库字段中的输出。实际上，它在数据库字段中显示存储过程，而不是在存储过程旁边的输出字段或 + 号。

这是存储过程中的代码：

```
CREATE PROCEDURE [test]
           @mcode char(10),
           @zcode [int], 
           @odolmas[float]=0 output,
           @gmas[float]=0 output,
           @vmas[float]=0 output          
AS
       set @gmas=0
       set @vmas=0
       set @gmas=9
       set @vmas=5

       set @odolmas=((@vmas-@gmas)/2)
GO 
```

在 Crystal Reports 中，我可以看到`@mcode`和`@zcode`作为输入参数。但我看不到`@gmas`,`@vmas`和`@odolmas`作为输出。

请帮我做，因为我不专业，请一步一步说我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:54:18.950

当我们执行您问题中显示的存储过程时，我们不会得到任何输出。尝试在存储过程中使用 select 语句，水晶报表将看到返回值。

例如，最后在您的程序中选择@gmas 作为 Col1，@vmas 作为 Col2，可能会将文件显示为 col1 和 col2。您可以将这些 col1 和 col2 放在您的报告中以进行显示。

# javascript - javascript:if 语句

> ID：14577705
> 
> 赞同：0
> 
> 时间：2013-01-29T07:25:32.960
> 
> 标签：javascript

仅当两个输入不同而不是两个输入相同时如何执行 if 语句。认为：

```
var a=prompt("have Input","");
var b=prompt("have Input","");
if(a && !b){alert("ok")}
else{"wrong"} 
```

上述条件**在****两个**输入都**为**真时**有效**.解决我的问题的方法是什么？

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:27:39.447

如果您需要 a 和 b 不同还`if (a != b)`不够吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:28:54.180

听起来您正在寻找逻辑异或（XOR）操作。[这里](http://www.howtocreate.co.uk/xor.html)有一些 Javascript 示例。我最喜欢的（因为出乎意料和简单）是：

```
if (foo ? !bar : bar) {
    ...
} 
```

诚然，这是一个有点不寻常的编码，并且接近于“太聪明”。有时，如果一种语言没有直接的运算语法，那么代码就必须是冗长的，例如从除法运算中获取商和余数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:32:49.950

```
if( a===b)
{
     "Wrong"
}
else
{
     alert("Ok");
} 
```****

# php - 日期查询与教义

> ID：14577707
> 
> 赞同：2
> 
> 时间：2013-01-29T07:25:35.050
> 
> 标签：php, symfony, doctrine-orm

我的表中有日期字段，但它们包含所有内容 - 日、年和月。我可以编写查询以仅获取月份等于当前月份的记录吗？我可以做这个：

```
$today = new \DateTime();
$month = $today->format('m');

$cat = $em->getRepository('EMBudgetTrackerBundle:Expense')->find(1);   
$ex_date = $cat->getDate(); 
```

并比较 $month 和 $ex_date，但我可以写一些查询吗？像这样的东西：

```
public function getExpensesByMonth($month)
{
    $q = $this->createQueryBuilder('e');

    $q->select('e')
      ->where('e.date = :date')
      ->setParameter('date', $month);

    return $q->getQuery()->getResult();
} 
```

先感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:43:16.043

如果您的数据库列是 DateTime 格式，您可以在查询中使用 DateTime 对象。据我所知，您只能查询时间范围。

```
public function getExpensesByMonth($beginning, $end)
{
    $q = $this->createQueryBuilder('e');

    $q->select('e')
      ->where('e.date > :beginning')
      ->andWhere('e.date < :end')
      ->setParameter('beginning', $beginning)
      ->setParameter('end', $end);

    return $q->getQuery()->getResult();
} 
```

# iphone - iOS：PDF扫描仪获取文本坐标

> ID：14577712
> 
> 赞同：2
> 
> 时间：2013-01-29T07:25:53.573
> 
> 标签：iphone, ios, cgpdfscanner

我正在使用 CGPDFScanner 扫描 pdf。我应该使用 Td 运算符来查找文本的位置吗？我可以举一个例子来说明如何使用这个运算符来获取文本的位置吗？当前我使用 Tj 和 TJ 运算符来查找文本。现在我想知道每个单词在单页pdf中的位置。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:14:19.340

查看这个库： [https](https://github.com/KurtCode/PDFKitten/) ://github.com/KurtCode/PDFKitten/ 搜索并突出显示文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T05:03:44.913

要获取文本的坐标，您需要跟踪文本转换矩阵。请参阅 PDF 1.4 参考的第 5.3.1 节“文本定位运算符”。（我不确定更高版本的参考编号是否相同。）虽然`Td`运算符将在文本矩阵中设置当前翻译，但还有其他运算符会影响文本矩阵和其他文本状态。在处理文件时，您需要跟踪文本矩阵。操作员将`Tm`直接设置文本矩阵。操作员移动到下一行并通过`TD`x 和 y 参数进行偏移。`T*`只是移动到下一行。

# nsstring - 使用 NSURL 附加字符串

> ID：14577715
> 
> 赞同：0
> 
> 时间：2013-01-29T07:26:14.957
> 
> 标签：nsstring, nsurl

我有以下字符串，我想附加它`NSURL`，在附加之后我想要结果`NSURL`

{ "deviceid":"3c27c99ac4b159aca81de8f5d266478f00000000 ","nickname":"sad","gender":0,"marital":0,"children":1,"job":"asd","message":"Asd" “pushid”：“3c27c99ac4b159aca81de8f5d266478f00000000”}

可以，请任何人帮助我。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:15:54.800

```
NSString *str=@"";

NSString *str1=@"\"deviceid\":\"3c27c99ac4b159aca81de8f5d266478f00000000 \",\"nickname\":\"sad\",\"gender\":0,\"marital\":0,\"children\":1,\"job:\"asd\",\"message\":\"Asd\",\"pushid\":\"3c27c99ac4b159aca81de8f5d266478f00000000\""; 

NSURL *url=[NSURL URLWithString:@"give your url"];

NSArray *components = [url pathComponents]; 

for (NSString *c in components)    
{
    str=[str stringByAppendingString:c];  
}   
str=[str stringByAppendingString:str1];

NSURL *newurl=[NSURL URLWithString:@"str"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:29:57.933

您还没有说明您期望最终 URL 的样子，所以我假设您希望将记录字符串中的名称和值作为查询字符串添加到原始 URL。

当给定一个基本 URL 和字符串时，以下方法将返回一个组合 URL，就像您在上面提供的那样：

```
-(NSURL *)URLWithRecord:(NSString *)record relativeToURL:(NSURL *)originalURL
{
    NSCharacterSet * unwantedDelimeters = [NSCharacterSet characterSetWithCharactersInString:@"{}"];
    NSCharacterSet * fieldSeperator = [NSCharacterSet characterSetWithCharactersInString:@","];
    NSCharacterSet * nameValueSeperator = [NSCharacterSet characterSetWithCharactersInString:@":"];
    NSCharacterSet * quotes = [NSCharacterSet characterSetWithCharactersInString:@"\""];

    record = [record stringByTrimmingCharactersInSet:unwantedDelimeters];
    NSArray * fields = [record componentsSeparatedByCharactersInSet:fieldSeperator];

    NSMutableString * queryString = [NSMutableString stringWithString:@"?"];

    for (NSUInteger fieldCount = 0; fieldCount < [fields count]; fieldCount++) {

        NSString * field = [fields objectAtIndex:fieldCount];

        NSArray * nameValue = [field componentsSeparatedByCharactersInSet:nameValueSeperator];
        NSString * name = [[nameValue objectAtIndex:0] stringByTrimmingCharactersInSet:quotes];
        NSString * value = [[nameValue objectAtIndex:1] stringByTrimmingCharactersInSet:quotes];

        if (fieldCount == ([fields count]-1) ) {
            [queryString appendFormat:@"%@=%@", name, value];
        } else {
            [queryString appendFormat:@"%@=%@&", name, value];
        }
    }

    NSURL * combinedURL = [NSURL URLWithString:queryString relativeToURL:originalURL];
    return combinedURL;
} 
```

使用以下代码进行测试时：

```
NSURL * originalURL = [NSURL URLWithString:@"http://www.example.com"];
NSString * string = @"{\"deviceid\":\"3c27c99ac4b159aca81de8f5d266478f00000000\",\"nickname\":\"sad\",\"gender\":0,\"marital\":0,\"children\":1,\"job\":\"asd\",\"message\":\"Asd\",\"pushid\":\"3c27c99ac4b159aca81de8f5d266478f00000000\"}";

NSURL * combinedURL = [self URLWithRecord:string relativeToURL:originalURL];
NSLog(@"result=\"%@\"", [combinedURL absoluteString]); 
```

输出是：

```
result="http://www.example.com?deviceid=3c27c99ac4b159aca81de8f5d266478f00000000&nickname=sad&gender=0&marital=0&children=1&job=asd&message=Asd&pushid=3c27c99ac4b159aca81de8f5d266478f00000000" 
```

提供的方法假定记录字符串中没有错误的空格，并且记录中的名称和值仅包含 ASCII 数字和字母。如果记录包含包含 URL 问题字符（例如空格）的名称或值，它将返回 nil 值。如果您怀疑会涉及此类字符，则需要相应地重写该方法 -[将此类字符替换为 URL 转义码](https://stackoverflow.com/questions/8086584/objective-c-url-encoding)。

# mysql - 将逗号分隔的参数传递给mysql中的存储过程

> ID：14577717
> 
> 赞同：2
> 
> 时间：2013-01-29T07:26:15.060
> 
> 标签：mysql

我在 mytable tab1 中有字段：

```
col1     | col2     | id
--------------------------
1,2,3    | 2,3,4,5  | a1
6,7,8,9  | 2,9,11   | a2 
```

我想将此字段传递给我的存储过程输入，例如`where col1 in ('1,2') and col2 in ('3,4');`

但它不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:39:18.393

像这样的东西应该工作：

```
SELECT t.* FROM tab1 t 
 WHERE 1 IN (t.col1) AND 2 IN (t.col1) ...
  AND 3 IN (t.col2) AND 4 IN (t.col2) ... 
```

您需要根据存储过程的输入来构建查询，否则这应该适合您。发布您当前的过程？

**编辑**

该`find_in_set`函数也适用于您，但您仍然必须拆分输入并为每个传递给 proc 的数字调用一次（即第一个参数`FIND_IN_SET`不能是逗号分隔的列表）。参考这里：[http ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# selenium-ide - 如何使用 selenium ide 获取列表计数

> ID：14577726
> 
> 赞同：1
> 
> 时间：2013-01-29T07:26:56.380
> 
> 标签：selenium-ide

我正在使用 Selenium IDE 创建我的测试，我正在测试一个票务系统，在我的一个案例中，我想要新列出的票的总数，我尝试了诸如“storeAllLinks”、“storeAllFields”之类的命令，但我没有得到我需要计数。有什么办法可以得到计数，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:47:53.723

The `storeAllLinks` and `storeAllFields` return arrays. You can use `storeEval` to run a .length with JavaScript on the array to count the number of items. Use the stored value as you wish, in this case I just write it out to the IDE console.

```
<tr>
    <td>storeAllLinks</td>
    <td>aLinks</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>storedVars['aLinks'].length</td>
    <td>numberOfLinks</td>
</tr>
<tr>
    <td>echo</td>
    <td>${numberOfLinks}</td>
    <td></td>
</tr> 
```

# c - JNI 中的静态变量声明

> ID：14577727
> 
> 赞同：0
> 
> 时间：2013-01-29T07:26:58.217
> 
> 标签：c, image, camera, java-native-interface, static-variables

我在 JNI C 部分中有一个 C Image 算法代码。

我已经在 J​​NI 中完成了从摄像头获取数据，它工作正常。

但是，当我尝试使用我的图像算法进行进一步使用时。每次电话测试都会崩溃，没有任何错误。

手机测试情况：应用正常启动，大约0.5秒后，应用崩溃（中止）。

我已经调试了几天。我发现是两个变量用来存储我的 ROI 坐标（x，y）导致这个问题，因为这两个变量应该连续记住最后一帧和新帧的 x，y 坐标，所以我将这些变量声明为静态例子：

```
 static  unsigned int XXX =0, YYY =0; 
```

这些变量在我的图像算法中声明。不在本机 C 中，本机 C 只是提供参数并调用算法。

奇怪的是，当我删除这些 XXX，YYY 声明的“静态”部分时，应用程序运行良好。但是 XXX,YYY 的值不会被记住，所以它对我的算法没有用。

谁能告诉我这是怎么发生的？或者为我的工作提供一些更好的解决方案谢谢:)

# c# - 简单的 Webclient.DownloadFile 不工作

> ID：14577730
> 
> 赞同：0
> 
> 时间：2013-01-29T07:27:19.787
> 
> 标签：c#, winforms, webclient

刚开始使用 Windows 窗体，虽然 Google 上的文档和信息看起来很简单，但我无法让我的 c# Windows 窗体应用程序下载文件。这是我的代码：

```
 string remoteUri = "http://mysite.com/file.txt";
        string fileName = @"C:\Folder";

        WebClient myWebClient = new WebClient();
        myWebClient.DownloadFile(remoteUri, fileName); 
```

我已确认该链接处于活动状态，如果我在浏览器中键入它，它就会开始下载，并且该文件夹存在于我的计算机上。当我单击触发此事件的按钮时，出现以下错误：

System.dll 中出现“System.Net.WebException”类型的未处理异常

附加信息：WebClient 请求期间发生异常。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:31:08.987

WebException 有一个 InnerException，它会说：

> 拒绝访问路径 C:\Folder。

写入文件，而不是@JonSkeet 提到的文件夹。

# asp.net-mvc - WebConfigScopeDictionary 中的 NullReferenceException

> ID：14577735
> 
> 赞同：3
> 
> 时间：2013-01-29T07:27:37.050
> 
> 标签：asp.net-mvc, asp.net-webpages

偶尔（大约每月一次）ASP.NET MVC 3 Web 应用程序会因此异常而失败。

```
System.NullReferenceException: Object reference not set to an instance of an object.

Server stack trace: 
   at System.Collections.Specialized.NameObjectCollectionBase.BaseGetAllKeys()
   at System.Collections.Specialized.NameValueCollection.get_AllKeys()
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.<>c__DisplayClass4.<.ctor>b__0()
   at System.Lazy`1.CreateValue()

Exception rethrown at [0]: 
   at System.Lazy`1.get_Value()
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.TryGetValue(Object key, Object& value)
   at System.Web.Mvc.ViewContext.ScopeGet[TValue](IDictionary`2 scope, String name, TValue defaultValue)
   at System.Web.Mvc.ViewContext.ScopeCache..ctor(IDictionary`2 scope)
   at System.Web.Mvc.ViewContext.ScopeCache.Get(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.ViewContext.GetClientValidationEnabled(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.Html.FormExtensions.FormHelper(HtmlHelper htmlHelper, String formAction, FormMethod method, IDictionary`2 htmlAttributes)
   at ASP._Page_Views_mywebpage_Create_cshtml.Execute() in c:\App\Views\Mywebpage\Create.cshtml:line 11
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

此异常发生在与

```
@using (Html.BeginForm()) 
```

从该异常发生一次的那一刻起，应用程序就无法使用。每个视图都会开始抛出这个错误。我查看了源代码，但似乎找不到任何东西。有些人经历相同的行为，但有[不同的错误](https://stackoverflow.com/questions/13321205/loading-any-mvc-page-fails-with-the-error-an-item-with-the-same-key-has-already)和[/或不同的代码](https://stackoverflow.com/questions/12563326/nullreferenceexception-in-mvcsitemapprovider-at-production)。

当深入挖掘 WebConfigScopeDictionary 的源代码时，您可以看到 AppSettings 正在被读取：

```
public WebConfigScopeDictionary() : this(WebConfigurationManager.AppSettings)
{
}
public WebConfigScopeDictionary(NameValueCollection appSettings)
{
    this._items = new Lazy<Dictionary<object, object>>(() => appSettings.AllKeys.ToDictionary((string key) => key, (string key) => appSettings[key], ScopeStorageComparer.Instance));
} 
```

appsettings 来自 ConfigurationManager：

```
public static NameValueCollection AppSettings
{
    get
    {
        object section = ConfigurationManager.GetSection("appSettings");
        if (section == null || !(section is NameValueCollection))
        {
            throw new ConfigurationErrorsException(SR.GetString("Config_appsettings_declaration_invalid"));
        }
        return (NameValueCollection)section;
    }
} 
```

如果 web.config 有问题，则此代码应该引发异常。但事实并非如此。最终在 AppSettings 属性返回的集合上调用 count。由于此时它可能为空，因此它会抛出。

```
protected string[] BaseGetAllKeys()
{
    int count = this._entriesArray.Count;
    string[] array = new string[count];
    for (int i = 0; i < count; i++)
    {
        array[i] = this.BaseGetKey(i);
    }
    return array;
} 
```

如果有人有任何想法，请随时分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:43:52.883

在询问了运维团队之后，应用程序池似乎在时间间隔到期后被回收。这发生在办公时间，而应用程序处于显着负载下。我们现在已将其更改为在特定时间回收，这仍然是一种解决方法，但应该可以防止问题过于频繁地发生。

# asp.net - 无法访问gridview中的编辑模板字段下拉列表

> ID：14577737
> 
> 赞同：1
> 
> 时间：2013-01-29T07:27:40.277
> 
> 标签：asp.net, gridview, templatefield

我正在使用一个 gridview，它在 edittemplate 字段中有下拉列表。下拉列表中有 3 个列表项：红色、琥珀色、绿色。我不想在列表项中显示文本，而是想显示颜色，因为我正在使用下拉列表的 onLoad 事件，但是此事件无法识别下拉列表。下拉列表设计器代码：

```
<asp:TemplateField HeaderText="Color">
<EditItemTemplate> 
  <asp:DropDownList ID="ddlcolor" runat="server" AppendDataBoundItems="true" DataTextField="COLOR" DataValueField ="COLOR" OnLoad="DDLColor_Load">
            <asp:ListItem Value="-1">- Select Color -</asp:ListItem>
            <asp:ListItem Value="0">Amber</asp:ListItem>
            <asp:ListItem Value="1">Green</asp:ListItem>
            <asp:ListItem Value="2">Red</asp:ListItem>                
  </asp:DropDownList></EditItemTemplate></asp:TemplateField> 
```

代码隐藏中的下拉列表 onLoad 事件：

```
 protected void DDLColor_Load(object sender, EventArgs e)
{

    for (int i = 0; i < ddlcolor.Items.Count; i++)
    {
        ddlcolr.Items[i].Attributes.Add("style", "background-color:" + ddlcolor.Items[i].Text);

    }
} 
```

但是，它表明下拉列表 ddlcolor 在当前上下文中不存在。我需要在 gridview 中找到这个控件吗？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:52:29.247

你说的对。你需要找到控制。使用 sender 参数将帮助您在不使用 find 控制方法的情况下定位下拉列表

```
 protected void DDLColor_Load(object sender, EventArgs e)
 {
    DropdownList ddlcolr=(Dropdownlist)sender;
for (int i = 0; i < ddlcolor.Items.Count; i++)
  {
    ddlcolr.Items[i].Attributes.Add("style", "background-color:" + ddlcolor.Items[i].Text);

  }
 } 
```

# android - 如何获取外部 SDCard？

> ID：14577739
> 
> 赞同：0
> 
> 时间：2013-01-29T07:27:54.597
> 
> 标签：android, external, sd-card

我想获取外部 SDCard 路径。我使用`Environment.getExternalStorageDirectory()`并获取内部 sdcard `/mnt/sdcard/`。我的外部 SD 卡是`/storage/extSdCard`.

如何以编程方式获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:39:13.917

像这样试试。

例如： File f= new File("/mnt/extSdCard/");

新文件（“/mnt/external_sd/”）

或者

新文件（“/mnt/extSdCard/”）

代替 Environment.getExternalStorageDirectory()

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:40:24.697

```
File storageDir = new File("/mnt/");
if(storageDir.isDirectory()){
String[] dirlst = storageDir.list();
//TODO some type of selecton method 
```

# couchdb - 访问视图“文件损坏”时出现 couchdb 错误？

> ID：14577742
> 
> 赞同：1
> 
> 时间：2013-01-29T07:27:57.760
> 
> 标签：couchdb, couchdb-futon

我有一个 couchdb 安装，通常在蒲团打开正常，在“所有文档”视图中我可以看到所有对象；但是，当我尝试访问我的一个视图时，几秒钟后我在警报对话框中收到此错误“错误：文件损坏文件损坏”。数据库过去曾在磁盘之间移动，因为我们更改了磁盘以确保我们有足够的空间。如果文件损坏，它根本不应该工作，有什么办法可以修复它。数据库很大，已经超过 150 GB；我什至尝试使用差异名称制作相同的视图，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:51:18.287

我认为移动文件是个坏主意。您最好将数据库从旧服务器[复制到新服务器。](http://wiki.apache.org/couchdb/Replication)

```
$ curl -H 'Content-Type: application/json' -X POST http://newserver:5984/_replicate -d ' {"source": "http://oldserver:5984/foo", "target": "bar", "create_target": true} ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:18:22.967

删除 couchdb 索引文件并重试它们位于

```
/var/lib/couchdb/.{dbname}_design/
/usr/local/var/lib/couchdb/.{dbname}_design/ 
```

# java - 选择图像表单库后，将图像获取到上一个 UI

> ID：14577744
> 
> 赞同：0
> 
> 时间：2013-01-29T07:28:05.157
> 
> 标签：java, android

我有包含四件事的 UI

1) 日期 2) 消息 3) 社交网络 4) 附图片

1）对于日期，当我点击日期时，DateTimePicker 来了，我选择了日期

2）对于消息，当我单击消息时，会有新的活动来编写消息，然后按完成，然后消息返回到之前的 UI，消息包含

3) 对于社交网络，与 2 点相同的事情正在发生

4）但是对于图像附件，当我单击附件时，它会打开带有 UI 的新 Activity，用于从图库中选择图像，图像已被选中，但我想将图像带回以前的 UI。

对于即将到来的新活动并返回到以前的 UI，我正在使用 Visibilty 消失和 VISIBLE。

请建议，我可以做些什么来获取图像并返回上一个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:40:56.147

在您的第一个活动中尝试此操作，您将从中传递图库的意图：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {

        Uri SelectedImage = data.getData();
            String filePath = null;

        try {
            // OI FILE Manager
            String filemanagerstring = SelectedImage.getPath();

            // MEDIA GALLERY
            String selectedImagePath = getPath(SelectedImage);

            if (selectedImagePath != null) {
                filePath = selectedImagePath;
            } else if (filemanagerstring != null) {
                filePath = filemanagerstring;
            } else {
                Toast.makeText(getApplicationContext(), "Unknown path",
                        Toast.LENGTH_LONG).show();
                Log.e("Bitmap", "Unknown path");
            }

            if (filePath != null) {
                ProfilePic.setImageURI(SelectedImage);
                   //or decode if u want to reduce the size 
            } else {
                bitmap = null;
            }
            FROM_GALLERY = true;

        } catch (Exception e) {
            Log.e("Uploaderror", e.getLocalizedMessage());
          }
       }
  } 
```

# hadoop - Namenode 未启动（java.lang.IllegalArgumentException：套接字地址为空）

> ID：14577746
> 
> 赞同：1
> 
> 时间：2013-01-29T07:28:08.720
> 
> 标签：hadoop

几天前我曾问过这个问题，但不知道日志文件的位置。

我在 core-site.xml 中有如下配置设置

```
<configuration>
<property>
  <name>hadoop.tmp.dir</name>
  <value>/usr/local/hadoop/tmp</value>
  <description>A base for other temporary directories.</description>
</property>

<property>
  <name>fs.default.name</name>
  <value>hdfs://localhost:54310</value>
  <description>blah blah....</description>
</property>
</configuration> 
```

hdfs-site.xml

```
<configuration>
<property>
  <name>dfs.replication</name>
  <value>1</value>
  <description>Default block replication.
  The actual number of replications can be specified when the file is created.
  The default is used if replication is not specified in create time.
  </description>
</property>

</configuration> 
```

mapred-site.xml

```
<configuration>
<property>
  <name>mapred.job.tracker</name>
  <value>localhost:54311</value>
  <description>The host and port that the MapReduce job tracker runs
  at.  If "local", then jobs are run in-process as a single map
  and reduce task.
  </description>
</property>

</configuration> 
```

Namenode 的日志文件如下

```
2013-01-29 02:12:30,078 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = dheerajvc-ThinkPad-T420/127.0.1.1
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 1.1.1
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.1 -r 1411108; compiled by 'hortonfo' on Mon Nov 19 10:48:11 UTC 2012
************************************************************/
2013-01-29 02:12:30,184 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2013-01-29 02:12:30,192 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2013-01-29 02:12:30,193 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2013-01-29 02:12:30,193 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started
2013-01-29 02:12:30,326 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2013-01-29 02:12:30,329 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2013-01-29 02:12:30,333 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2013-01-29 02:12:30,333 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered.
2013-01-29 02:12:30,351 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit
2013-01-29 02:12:30,351 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 17.77875 MB
2013-01-29 02:12:30,351 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries
2013-01-29 02:12:30,351 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304
2013-01-29 02:12:30,371 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hduser
2013-01-29 02:12:30,371 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2013-01-29 02:12:30,371 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true
2013-01-29 02:12:30,377 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2013-01-29 02:12:30,377 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2013-01-29 02:12:30,393 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean
2013-01-29 02:12:30,408 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2013-01-29 02:12:30,416 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files = 1
2013-01-29 02:12:30,421 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files under construction = 0
2013-01-29 02:12:30,421 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 112 loaded in 0 seconds.
2013-01-29 02:12:30,421 INFO org.apache.hadoop.hdfs.server.common.Storage: Edits file /tmp/hadoop/dfs/name/current/edits of size 4 edits # 0 loaded in 0 seconds.
2013-01-29 02:12:30,422 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 112 saved in 0 seconds.
2013-01-29 02:12:30,525 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: closing edit log: position=4, editlog=/tmp/hadoop/dfs/name/current/edits
2013-01-29 02:12:30,526 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: close success: truncate to 4, editlog=/tmp/hadoop/dfs/name/current/edits
2013-01-29 02:12:30,878 INFO org.apache.hadoop.hdfs.server.namenode.NameCache: initialized with 0 entries 0 lookups
2013-01-29 02:12:30,879 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Finished loading FSImage in 513 msecs
2013-01-29 02:12:30,880 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.safemode.threshold.pct          = 0.949999988079071
2013-01-29 02:12:30,880 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.namenode.safemode.min.datanodes = 0
2013-01-29 02:12:30,880 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.safemode.extension              = 0
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Total number of blocks = 0
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of invalid blocks = 0
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of under-replicated blocks = 0
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of  over-replicated blocks = 0
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.StateChange: STATE* Safe mode termination scan for invalid, over- and under-replicated blocks completed in 7 msec
2013-01-29 02:12:30,887 INFO org.apache.hadoop.hdfs.StateChange: STATE* Leaving safe mode after 0 secs.
2013-01-29 02:12:30,888 INFO org.apache.hadoop.hdfs.StateChange: STATE* Network topology has 0 racks and 0 datanodes
2013-01-29 02:12:30,888 INFO org.apache.hadoop.hdfs.StateChange: STATE* UnderReplicatedBlocks has 0 blocks
2013-01-29 02:12:30,892 INFO org.apache.hadoop.util.HostsFileReader: Refreshing hosts (include/exclude) list
2013-01-29 02:12:30,892 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: ReplicateQueue QueueProcessingStatistics: First cycle completed 0 blocks in 1 msec
2013-01-29 02:12:30,892 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: ReplicateQueue QueueProcessingStatistics: Queue flush completed 0 blocks in 1 msec processing time, 1 msec clock time, 1 cycles
2013-01-29 02:12:30,892 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: InvalidateQueue QueueProcessingStatistics: First cycle completed 0 blocks in 0 msec
2013-01-29 02:12:30,892 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: InvalidateQueue QueueProcessingStatistics: Queue flush completed 0 blocks in 0 msec processing time, 0 msec clock time, 1 cycles
2013-01-29 02:12:30,896 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source FSNamesystemMetrics registered.
2013-01-29 02:12:30,908 INFO org.apache.hadoop.ipc.Server: Starting SocketReader
2013-01-29 02:12:30,909 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort50070 registered.
2013-01-29 02:12:30,910 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort50070 registered.
2013-01-29 02:12:30,912 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Namenode up at: localhost/127.0.0.1:50070
2013-01-29 02:12:30,913 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.lang.IllegalArgumentException: Socket address is null
    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:142)
    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:130)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.startHttpServer(NameNode.java:340)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:306)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:529)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1403)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1412)

2013-01-29 02:12:30,913 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at dheerajvc-ThinkPad-T420/127.0.1.1
************************************************************/ 
```

netstat --numeric-ports | grep "5431" 没有产生任何结果。所以我认为这些端口是免费的。namenode 期望什么套接字？

编辑：只有jobtracker和tasktracker正在启动，namenode是否需要在datanode和secondarynamenode启动之前启动？

我可以格式化 namenode ，但为什么它使用 /tmp 目录？我认为它应该使用 core-site.xml 中提到的位置

```
$ hadoop namenode -format
Warning: $HADOOP_HOME is deprecated.

13/01/31 03:34:22 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = dheerajvc-ThinkPad-T420/127.0.1.1
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 1.1.1
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.1 -r 1411108; compiled by 'hortonfo' on Mon Nov 19 10:48:11 UTC 2012
************************************************************/
13/01/31 03:34:22 INFO util.GSet: VM type       = 32-bit
13/01/31 03:34:22 INFO util.GSet: 2% max memory = 17.77875 MB
13/01/31 03:34:22 INFO util.GSet: capacity      = 2^22 = 4194304 entries
13/01/31 03:34:22 INFO util.GSet: recommended=4194304, actual=4194304
13/01/31 03:34:22 INFO namenode.FSNamesystem: fsOwner=dheerajvc
13/01/31 03:34:22 INFO namenode.FSNamesystem: supergroup=supergroup
13/01/31 03:34:22 INFO namenode.FSNamesystem: isPermissionEnabled=true
13/01/31 03:34:22 INFO namenode.FSNamesystem: dfs.block.invalidate.limit=100
13/01/31 03:34:22 INFO namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
13/01/31 03:34:22 INFO namenode.NameNode: Caching file names occuring more than 10 times 
13/01/31 03:34:22 INFO common.Storage: Image file of size 115 saved in 0 seconds.
13/01/31 03:34:22 INFO namenode.FSEditLog: closing edit log: position=4, editlog=/tmp/hadoop/dfs/name/current/edits
13/01/31 03:34:22 INFO namenode.FSEditLog: close success: truncate to 4, editlog=/tmp/hadoop/dfs/name/current/edits
13/01/31 03:34:23 INFO common.Storage: Storage directory /tmp/hadoop/dfs/name has been successfully formatted.
13/01/31 03:34:23 INFO namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at dheerajvc-ThinkPad-T420/127.0.1.1
************************************************************/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-27T16:42:54.837

**您应该在hdfs-site.xml**文件而不是**core-site.xml**中提及目录位置。

**hdfs-site.xml**

```
<configuration>
    <property>
        <name>dfs.replication</name>
        <value>1</value>
    </property>
    <property>
        <name>dfs.namenode.name.dir</name>
        <value>/D:/analytics/hadoop/data/dfs/namenode</value>
    </property>
    <property>
        <name>dfs.datanode.data.dir</name>
        <value>/D:/analytics/hadoop/data/dfs/datanode</value>
    </property>
    <property>
    <name>dfs.permissions</name>
    <value>false</value>
  </property>
  <property>
    <name>dfs.http.address</name>
    <value>127.0.0.1:50070</value>
  </property>
  <property>
    <name>dfs.webhdfs.enabled</name>
    <value>true</value>
    <description>to enable webhdfs</description>
    <final>true</final>
  </property>

</configuration> 
```

# java - 为什么 Eclipse 将接口方法标记为公共抽象？

> ID：14577748
> 
> 赞同：9
> 
> 时间：2013-01-29T07:28:13.487
> 
> 标签：java, eclipse, interface

当使用 Eclipse 的“ *Extract Interface* ”重构时，它会`public abstract`默认声明方法。为什么？`public`接口上的修饰符是完全多余的，`abstract`在接口声明上也似乎毫无意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:34:06.440

这些关键字确实是多余的。我个人不会在这种情况下使用它们，但我可以理解为什么有人可能更喜欢包含它们。

JLS[明确不鼓励](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.4)这种做法：

> 允许但不鼓励为接口中声明的方法冗余地指定`public`和/或`abstract`修饰符。

在我的 Eclipse (Juno SR1) 版本中，Extract Interface 对话框中有两个选项：

*   将接口方法声明为`public`；
*   将接口方法声明为`abstract`.

如果取消勾选它们，Eclipse 在提取接口时不应再包含这两个关键字。

有一个待处理的[Eclipse 错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=130888)来清理多余的修改。

# java - 复合中的 SWT 串联滚动条

> ID：14577749
> 
> 赞同：0
> 
> 时间：2013-01-29T07:28:16.577
> 
> 标签：java, swt, scrollbars, scrolledcomposite, tandem

我正在尝试在[创建两个 ScrolledComposites](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/plain/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet167.java)上方添加一个按钮，它们从[swt 片段中滚动串联片段](http://www.eclipse.org/swt/snippets/)

问题是，如果我将示例代码放在与外壳不同的 Composite 中，则示例不起作用

```
import org.eclipse.swt.*;
import org.eclipse.swt.custom.*;
import org.eclipse.swt.events.*;
import org.eclipse.swt.layout.*;
import org.eclipse.swt.widgets.*;

public class tandemWithButton {

    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new RowLayout());
        Button buttonAbove = new Button(shell, SWT.PUSH);
        buttonAbove.setText("Button Above");
        buttonAbove.setSize(40, 30);
        // shell.setContent (buttonAbove);

        Composite comp = new Composite(shell, SWT.NONE);
        comp.setLayout(new FillLayout());

        final ScrolledComposite sc1 = new ScrolledComposite(comp, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
        Button button1 = new Button(sc1, SWT.PUSH);
        button1.setText("Button 1");
        button1.setSize(400, 300);
        sc1.setContent(button1);

        final ScrolledComposite sc2 = new ScrolledComposite(comp, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
        Button button2 = new Button(sc2, SWT.PUSH);
        button2.setText("Button 2");
        button2.setSize(300, 400);
        sc2.setContent(button2);

        final ScrollBar vBar1 = sc1.getVerticalBar();
        final ScrollBar vBar2 = sc2.getVerticalBar();
        final ScrollBar hBar1 = sc1.getHorizontalBar();
        final ScrollBar hBar2 = sc2.getHorizontalBar();
        SelectionListener listener1 = new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                int x = hBar1.getSelection() * (hBar2.getMaximum() - hBar2.getThumb()) / Math.max(1, hBar1.getMaximum() - hBar1.getThumb());
                int y = vBar1.getSelection() * (vBar2.getMaximum() - vBar2.getThumb()) / Math.max(1, vBar1.getMaximum() - vBar1.getThumb());
                sc2.setOrigin(x, y);
            }
        };
        SelectionListener listener2 = new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                int x = hBar2.getSelection() * (hBar1.getMaximum() - hBar1.getThumb()) / Math.max(1, hBar2.getMaximum() - hBar2.getThumb());
                int y = vBar2.getSelection() * (vBar1.getMaximum() - vBar1.getThumb()) / Math.max(1, vBar2.getMaximum() - vBar2.getThumb());
                sc1.setOrigin(x, y);
            }
        };
        vBar1.addSelectionListener(listener1);
        hBar1.addSelectionListener(listener1);
        vBar2.addSelectionListener(listener2);
        hBar2.addSelectionListener(listener2);
        comp.pack();
        comp.setSize(400, 300);

        shell.setSize(400, 300);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

有人可以帮我理解我做错了什么吗？如何将串联滚动条放在复合材料中并在其上方/下方添加小部件。在此先感谢，约西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:14:15.110

问题在于`RowLayout`它不反映父组件的大小，因此`Composite`容器获得了它需要的边界，尽管不需要滚动条。将带有外壳布局的行更改为`shell.setLayout(new FillLayout());`，您将获得带有按钮的工作演示..

# c# - 如何在 asp.net c# 中使用 extern html 文件作为附件并将其发送到电子邮件地址？

> ID：14577750
> 
> 赞同：0
> 
> 时间：2013-01-29T07:28:18.697
> 
> 标签：c#, asp.net, .net, attachment, email-attachments

如何在 C# 和 asp.net 中创建电子邮件附件。我想使用一个描述附件的 html 文件，并且我希望它在我的应用程序中加载一种消息字符串。比我想用从数据库中获得的其他值替换此消息中的子字符串。如果附件已创建，我想将其发送到一个地址。

我现在使用帮助类，但我认为这不是正确的方法：/

我不知道它是否存在于 .net 库中。一种类什么的。

最好的方法是什么？

这是我现在的方法：namespave = using SmtpMail = EASendMail.SmtpMail;

```
private void SendMail(string vorname, string nachname, string anrede, string firma, string benutzername, string passwort, string von, string bis, string email)
        {
            SmtpMail oMail = new SmtpMail("TryIt");
            SmtpClient oSmtp = new SmtpClient();

            oMail.From = email;

            oMail.To = email;

            oMail.Subject = "Company (" + nachname + ", " + vorname + ")";
            SmtpServer oServer = new SmtpServer(SMTPSERVER);

            try
            {
                Attachment header = oMail.AddAttachment(Properties.Settings.Default.ATT_header);
                Attachment footer = oMail.AddAttachment(Properties.Settings.Default.ATT_footer);
                Attachment left = oMail.AddAttachment(Properties.Settings.Default.ATT_left);
                Attachment right = oMail.AddAttachment(Properties.Settings.Default.ATT_right);
                Attachment world = oMail.AddAttachment(Properties.Settings.Default.ATT_world);
                Attachment company = oMail.AddAttachment(Properties.Settings.Default.ATT_company);
                Attachment weltkarte_header = oMail.AddAttachment(Properties.Settings.Default.ATT_weltkarte);

                string contentID_header = "header";
                header.ContentID = contentID_header;

                string contentID_footer = "footer";
                footer.ContentID = contentID_footer;

                string ContentID_left = "left";
                left.ContentID = ContentID_left;

                string ContentID_right = "right";
                right.ContentID = ContentID_right;

                string ContentID_world = "world";
                world.ContentID = ContentID_world;

                string ContentID_company = "company";
                company.ContentID = ContentID_company;

                string ContentID_weltkarte_header = "weltkarte_header";
                weltkarte_header.ContentID = ContentID_weltkarte_header;

                string htmltext = "<html><body><table width='1000px' border='0' cellpadding='0' cellspacing='0'>" +
                                    "<tr><img src=\"cid:" + contentID_header + "\"></tr>" +
                                    "<tr><img src=\"cid:" + ContentID_weltkarte_header + "\"></tr>" +
                                    "<tr><table border='0' cellpadding='0' cellspacing='0'>" +
                                         "<tr>" +
                                             "<td><img src=\"cid:" + ContentID_left + "\"></td>" +
                                             "<td width='880' style='background-color:#efefef;'>" +
                                                    "<p align='center'>Sie haben einen Gastzugang für [Anrede] [Vorname] [Nachname],[Firma] eingerichtet.</p>" +
                                                    "<p align='center'>Im folgenden finden Sie die Zugangsdaten,</br>" +
                                                    "die für die Anmeldung am Netzwerk benötigt werden.Weitere Informationen stehen auf der Anmeldeseite zur Verfügung.</p>" +
                                                    "<p align='center'><b>Benutzername: [Benutzername]</b><br/><b>Kennwort: [Passwort]</b></p>" +
                                                    "<p align='center'>Der Zugang wird vom [ZeitVon] bis [ZeitBis] freigeschaltet sein.</p>" +
                                             "</td>" +
                                             "<td><img src=\"cid:" + ContentID_right + "\"></td>" +
                                         "</tr>" +
                                    "</table></tr>" +
                                    "<tr><img src=\"cid:" + ContentID_company + "\"></tr>" +
                                    "<tr><img src=\"cid:" + contentID_footer + "\"></tr>" +
                                "</table></body></html>";

                htmltext = htmltext.Replace("[Anrede]", anrede).Replace("[Vorname]", vorname).Replace("[Firma]", firma).Replace("[Nachname]", nachname);
                htmltext = htmltext.Replace("[Benutzername]", benutzername).Replace("[Passwort]", passwort);
                htmltext = htmltext.Replace("[ZeitVon]", von).Replace("[ZeitBis]", bis);

                oMail.HtmlBody = htmltext;

                oSmtp.SendMail(oServer, oMail);

            }
            catch (Exception)
            {

            }
        } 
```

**更新：**

现在我已经创建了一个带有图像的 html 文件，但是我用 base64 编码绑定了这些图像。它有效，但如果我在 c# 应用程序中阅读此 html，我将无法发送此邮件。我做了一个断点并查看我的读取字符串，但没关系：/

这里的代码：

```
...
SmtpMail oMail = new SmtpMail("TryIt");
            SmtpClient oSmtp = new SmtpClient();

            oMail.From = mail;

            oMail.To = mail;

            oMail.Subject = "company (" + lastname + ", " + firstname + ")";
            SmtpServer oServer = new SmtpServer(SMTPSERVER);

            try
            {

                using (StreamReader reader = new StreamReader(Server.MapPath("~/App_Data/zugangsmail.html"), System.Text.Encoding.Default))
                {
                    string message = reader.ReadToEnd();

                    message = message.Replace("[Anrede]", title).Replace("[Vorname]", firstname).Replace("[Firma]", company).Replace("[Nachname]", lastname);
                    message = message.Replace("[Benutzername]", username).Replace("[Passwort]", password);
                    message = message.Replace("[ZeitVon]", from).Replace("[ZeitBis]", to);

                    oMail.HtmlBody = message;
                    oSmtp.SendMail(oServer, oMail);
                }

            }
            catch (Exception ex)
            {
                error.Visible = true;
                lblErrorMessage.Text = ex.Message; 
            }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:34:20.980

1.  将文件添加为嵌入式资源。
2.  打开它并阅读内容
3.  发送内容。

`var assembly = Assembly.GetExecutingAssembly();`

```
using (var stream = asssembly.GetManifestResourceStream("namespace.folder.filename))
using (StreamReader reader = new StreamReader(stream))
{
     string result = reader.ReadToEnd();
} 
```

# python - PyODBC 返回错误，但为什么？

> ID：14577757
> 
> 赞同：4
> 
> 时间：2013-01-29T07:28:40.257
> 
> 标签：python, sql, sql-server-2008, pyodbc

我尝试在两种情况下执行 T-SQL 查询（我使用 Win7、python 3.2、MS SQL Server express 2008、pyodbc for python 3.2）：

-情况1：

使用 MS SQL Server Management Studio 我尝试执行查询：

```
USE master;CREATE DATABASE Sales ON (NAME = Sales_dat,FILENAME = 'C:\saledat.mdf',        SIZE = 10,    MAXSIZE = 50,    FILEGROWTH = 5 ) LOG ON ( NAME = Sales_log,    FILENAME = 'C:\salelog.ldf',    SIZE = 5MB,    MAXSIZE = 25MB, FILEGROWTH = 5MB ); 
```

它返回成功的结果

-案例2：

```
import pyodbc
cxnn=pyodbc.connect('DSN=SERVER;UID=sa;PWD=password')
cur=cxnn.cursor()
cur.execute("USE master;CREATE DATABASE Sales ON (NAME = Sales_dat,FILENAME = 'C:\saledat.mdf',    SIZE = 10,    MAXSIZE = 50,    FILEGROWTH = 5 ) LOG ON ( NAME = Sales_log,    FILENAME = 'C:\salelog.ldf',    SIZE = 5MB,    MAXSIZE = 25MB, FILEGROWTH = 5MB );")
cxnn.commit() 
```

但是在运行代码后我收到错误

```
 pyodbc.Error: ('HY000', 'The driver did not supply an error!') 
```

如果我没有运行代码

```
cxnn.commit() 
```

我没有收到任何错误。但为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:49:58.723

由于我不太明白的原因，将 autocommit 设置为 true 似乎可以解决问题。请注意，仍然需要转义反斜杠。

自动提交可以通过两种方式设置：

```
cxnn=pyodbc.connect('DSN=SERVER;UID=sa;PWD=password', autocommit=True) 
```

或者：

```
cxnn=pyodbc.connect('DSN=SERVER;UID=sa;PWD=password')
cxnn.autocommit = True 
```

完成后，创建游标并执行查询应按预期运行：

```
cur=cxnn.cursor()
cur.execute("USE master;CREATE DATABASE Sales ON (NAME=Sales_dat, FILENAME='C:\\saledat.mdf', SIZE=10, MAXSIZE=50, FILEGROWTH=5) LOG ON (NAME=Sales_log, FILENAME='C:\\salelog.ldf', SIZE=5MB, MAXSIZE=25MB, FILEGROWTH=5MB );") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T15:33:32.473

就我而言，我只需要升级 pyodbc 即可。

```
pip install --upgrade pyodbc 
```

# mysql - 第 n 个非空值的合并等效项 - MySQL

> ID：14577763
> 
> 赞同：1
> 
> 时间：2013-01-29T07:29:08.073
> 
> 标签：mysql

我一直在为这个问题而烦恼。我正在使用现有数据集，需要从表 A 中的列中删除所有空值并将它们分流，以便它们像表 B 中一样排序

我需要与 Coalesce 等效的东西，但要检索第 n 个值，这样我就可以得到像表 B 中那样排序的结果

是）我有的：

表 A

```
Name CURRENT OCT12 SEPT12 AUG12 JUL12 JUN12  MAY12 APR12
---------------------------------------------------------
A    NULL    NULL  Aug-12 NULL  NULL  Jun-12 NULL  Apr-12
B    Nov-12  NULL  Aug-12 NULL  Jul-12Jun-12 NULL  Apr-12 
```

我需要的：

表 B

```
Name Change1 Change2 Change3 Change4 Change5 Change6
----------------------------------------------------
A    Aug-12  Jun-12  Apr-12  NULL    NULL    NULL   
B    Nov-12  Aug-12  Jul-12  Jun-12  Apr-12  NULL 
```

代码方面，它会是这样的：

```
Select

first non-null value as Change1  
,second non-null value as Change2  
,third non-null value as Change3  
,fourth non-null value as Change4  
,fifth non-null value as Change5...etc..  

from Table_A 
```

我正在使用 MySQL，但我不知道如何引用第 n 个非空值以便将它们调用到 Table_B

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:03:52.910

我不确定我是否会推荐使用此解决方案...数据标准化始终是更好的选择，但我想使用带有一些字符串函数的普通 SQL 来回答。此查询应返回您要查找的内容：

```
SELECT
  Name,
  Changes,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 1)), ',', 1)) as Change1,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 2)), ',', 1)) as Change2,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 3)), ',', 1)) as Change3,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 4)), ',', 1)) as Change4,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 5)), ',', 1)) as Change5,
  REVERSE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(Changes, ',', 6)), ',', 1)) as Change6
FROM (
  SELECT
    Name,
    CONCAT_WS(',', CURRENT, OCT12, SEPT12, AUG12, JUL12, JUN12, MAY12, APR12, ',') as Changes
  FROM
    TableA
) s 
```

我将所有值连接在一个逗号分隔的字符串中，字符串末尾有两个逗号（一个逗号就足够了，但是放两个更容易忽略最后一个......），因为我' m 使用 CONCAT_WS 它将自动跳过空值，并且生成的字符串将类似于`Aug-12,Jun-12,Apr-12,,`.

然后在外部查询中，我使用 SUBSTRIG_INDEX 提取字符串的第 n 个元素。我建议标准化您的数据库，但如果您需要快速修复，此解决方案可能是一个很好的起点。

看到它在[这里](http://sqlfiddle.com/#!2/ef850/8)工作。

请注意，我没有返回没有更改的 NULL 值，而是返回空字符串。如果需要，可以更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T04:15:32.217

如果您不想使用字符串函数，您可以使用 unpivot 和行号分区尝试此 sql：

```
CREATE TABLE #TableA
  ( 
    "Name" VARCHAR(10),
    "CURRENT" VARCHAR(10),
    OCT12 VARCHAR(10),
    SEPT12 VARCHAR(10),
    AUG12 VARCHAR(10),
    JUL12 VARCHAR(10),
    JUN12 VARCHAR(10),
    MAY12 VARCHAR(10),
    APR12 VARCHAR(10)
  ) 

INSERT INTO #TableA
  ("Name", "CURRENT", OCT12, SEPT12, AUG12, JUL12, JUN12, MAY12, APR12)
VALUES
  ('A', NULL, NULL, 'Aug-12', NULL, NULL, 'Jun-12', NULL, 'Apr-12'),
  ('B', 'Nov-12', NULL, 'Aug-12', NULL, 'Jul-12', 'Jun-12', NULL, 'Apr-12')

SELECT * FROM #TableA;

Select "Name",
    Min(Case row_num When 1 Then data End) Change1,
    Min(Case row_num When 2 Then data End) Change2,
    Min(Case row_num When 3 Then data End) Change3,
    Min(Case row_num When 4 Then data End) Change4,
    Min(Case row_num When 5 Then data End) Change5,
    Min(Case row_num When 6 Then data End) Change6
From
(
    select "Name",data,DBColumnName, 
        ROW_NUMBER() OVER (PARTITION BY "Name" ORDER BY "Name") row_num 
    From #TableA
    unpivot (data for DBColumnName in ("CURRENT",OCT12,SEPT12,AUG12,JUL12,JUN12,MAY12,APR12) ) as z
) TableB
group by "Name"; 
```

参考：

--[没有聚合函数的 TSQL Pivot](https://stackoverflow.com/questions/1343145/tsql-pivot-without-aggregate-function)

-- [https://www.sqlservertutorial.net/sql-server-window-functions/sql-server-row_number-function/](https://www.sqlservertutorial.net/sql-server-window-functions/sql-server-row_number-function/)

-- [https://docs.microsoft.com/en-us/sql/t-sql/queries/from-using-pivot-and-unpivot?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/queries/from-using-pivot-and-unpivot?view=sql-server-ver15)

# solr - 从 solr 中的另一个调用自定义请求处理程序

> ID：14577766
> 
> 赞同：0
> 
> 时间：2013-01-29T07:29:37.493
> 
> 标签：solr, requesthandler

有没有办法从 Solr 中的另一个调用一个自定义请求处理程序。例如：我在 solrconfig.xml 中将 /myhandler1 和 /myhandler2 定义为自定义请求处理程序。像这样定义

```
 <requestHandler name="/my handler1" class="solr.CSVRequestHandler">
    <lst name="defaults">
     <str name="update.chain">mylogupdate</str>
     <str name="stream.contentType">application/csv</str>
   </lst>
   </requestHandler> 
```

和

```
 <requestHandler name="/myhandler2" class="solr.CSVRequestHandler">
    <lst name="defaults">
     <str name="update.chain">mylogupdate</str>
     <str name="stream.contentType">application/csv</str>
   </lst>
    </requestHandler> 
```

有没有办法从 /myhandler1 调用 /myhandler2。基本上我想使用处理程序 1 进行一些处理，然后将其重定向到另一个处理程序以执行第二个任务。

更大的问题是这样的：给定这样的一行，

```
 2012-01-04 23:11:41,450 AltQ:RCR-TRP: 101863261 
```

我可以将其拆分为逗号分隔符并获得两个字段。我还希望将第二个字段拆分为空格分隔符，并且我想将这些值存储到不同的字段中，例如

val1:450

val2：altQ：RCR-TRP：

val3:101863261

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:43:03.793

为了人民的利益..我仍然没有找到重定向请求处理程序的方法..但是另一个问题已经解决了。我通过定义我自己的自定义处理器<扩展更新请求处理器>找到了解决方法

[http://wiki.apache.org/solr/UpdateRequestProcessor#Processor_Customization_Examples](http://wiki.apache.org/solr/UpdateRequestProcessor#Processor_Customization_Examples)

我使用 JAVA 来操作文档！

# android - 使用 ArrayList 的 get 和 set 将对象从 ArrayList 的位置放置到另一个 ArrayList 中的位置时出错

> ID：14577769
> 
> 赞同：0
> 
> 时间：2013-01-29T07:29:48.177
> 
> 标签：android, collections, arraylist

像这样使用 ArrayList 集合类的 get 和 set 出现问题的任何原因，我都会遇到运行时错误

想要将 Prize 对象放在一个`ArrayList`“ **oneList** ”中的 y 位置到另一个`ArrayList`名为“ **rungame** ”的 y 位置

```
 ArrayList<Prize> xrt = new ArrayList<Prize>();
 ArrayList<Prize> rungame = new ArrayList<Prize>();

 for(int y = 0; y < xrt.size(); y++){

  rungame.set(y, xrt.get(y));

 } 
```

**日志输出：**

```
01-29 16:16:42.450: E/AndroidRuntime(2644): FATAL EXCEPTION: main
01-29 16:16:42.450: E/AndroidRuntime(2644): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-29 16:16:42.450: E/AndroidRuntime(2644):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at java.util.ArrayList.set(ArrayList.java:477)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at lottery.MainLottery.onClick(MainLottery.java:231)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.view.View.performClick(View.java:3511)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.view.View$PerformClick.run(View.java:14110)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.os.Handler.handleCallback(Handler.java:605)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.os.Looper.loop(Looper.java:137)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-29 16:16:42.450: E/AndroidRuntime(2644):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:18:08.757

问题在于`rungame.set();`您正在访问一个空的 ArrayList 并将数据设置在它不会具有的**指定索引中的方法。**

意味着在第一次迭代`rungame`中有 0 个元素，并且您试图将`Prize`对象设置在它不会有的第 0 个索引中。

尝试使用`rungame.add(xrt.get(y));`并参考[JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)

# ios - iOS Textview Tap问题与tableview celltap

> ID：14577771
> 
> 赞同：0
> 
> 时间：2013-01-29T07:29:55.947
> 
> 标签：ios, cocoa-touch, uitableview, uitextview

我想在浏览器中打开 textview 链接。它对我来说很好。使用此代码。

```
textView.dataDetectorTypes = UIDataDetectorTypeLink;
textView.editable = NO; 
```

但是如果用户点击文本视图而不是链接，我想要单元格点击。但目前，当用户点击 textview 时，其他链接单元格点击不起作用。

我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T06:37:12.553

您可以在 textView 上添加一个 UITapGestureRecognizer，例如 UITapGestureRecognizer * tap = [[UITapGestureRecognizer alloc]init]; [textView addGestureRecognizer:tap]; [点击 addTarget:self action:@selector(gotoDetailVc)];

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T07:55:21.580

您必须为其制作 CustomCell，将 UITextView 放入自定义单元格及其`viewDidLoad`方法集

```
textView.dataDetectorTypes = UIDataDetectorTypeLink;
textView.editable = NO; 
```

# c# - 我如何反序列化这个xml？

> ID：14577773
> 
> 赞同：1
> 
> 时间：2013-01-29T07:30:02.713
> 
> 标签：c#, xml

我需要反序列化下面的xml。我想使用 xmlserializer 因为我（更）熟悉它。我相信这个 xml 构造不正确，但是我无法更改它。下面表示类别对象的列表。当我尝试使用反序列化

```
xmlserializer(typeof(List<Category>)) 
```

我收到此错误：“不期望类别 xmlns=''”

```
<?xml version="1.0" encoding="utf-8" ?>
<categories>
  <category id="16" name="Exports" parent_id="13"/>
  <category id="17" name="Imports" parent_id="13"/>
  <category id="3000" name="Income Payments & Receipts" parent_id="13"/>
  <category id="125" name="Trade Balance" parent_id="13"/>
  <category id="127" name="U.S. International Finance" parent_id="13"/>
</categories> 
```

如果这是我必须做的，我不介意制作某种虚拟课程来对这些进行反序列化。这是我的类别类

```
[XmlType("category")]
 public class Category
 {

    [XmlAttribute("id")]
    public int ID { get; set; }

    [XmlAttribute("parent_id")]
    public int ParentID { get; set; }

    [XmlAttribute("name")]
    public string Name { get; set; }
} 
```

我的代码：

```
 XmlSerializer serializer = new XmlSerializer(typeof(List<Category>));
    StringReader reader = new StringReader(xml);
    List<Category> obj = null;

    using (System.Xml.XmlReader xmlReader = System.Xml.XmlReader.Create(reader))
    {
        obj = (List<Category>)serializer.Deserialize(xmlReader);
    }
        return obj; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:56:12.103

您可以`XmlRootAttribute`将“类别”部分传入序列化程序。

**但是...您必须从 xml 中删除“&”，因为它无效**

```
XmlSerializer serializer = new XmlSerializer(typeof(List<Category>), new XmlRootAttribute("categories"));

using (FileStream fileStream = new FileStream(@"C:\Test.xml", FileMode.Open, FileAccess.Read, FileShare.Read))
{
    var test = serializer.Deserialize(fileStream);
} 
```

![在此处输入图像描述](../Images/780a9de7654988ab7da9276387e44130.png)

这是您使用 a`String.Replace`来整理“&”的方法

```
 private List<Category> GetCategories(string xmlData)
    {
        List<Category> obj = null;
        XmlSerializer serializer = new XmlSerializer(typeof(List<Category>), new XmlRootAttribute("categories"));
        StringReader reader = new StringReader(xmlData.Replace("&","&amp;"));
        using (System.Xml.XmlReader xmlReader = System.Xml.XmlReader.Create(reader))
        {
            obj = (List<Category>)serializer.Deserialize(xmlReader);
        }
        return obj;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:40:37.027

尝试创建一个包含您`List<Category>`这样的类别类：

```
[XmlRoot("categories")]
public class Categories
{
    public Categories() 
    {
       Items = new List<User>();
    }

    [XmlElement("category")]
    public List<Category> Items {get;set;}
} 
```

您可以像这样创建序列化程序：

```
XmlSerializer serializer = new XmlSerializer(typeof(Categories)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:52:38.413

您是否有此 XML 应符合的 XSD？如果是这样，您可以使用以下命令生成所需的代码：“xsd your.xsd /classes”

# html - 表格行与表格标题的宽度不匹配

> ID：14577774
> 
> 赞同：0
> 
> 时间：2013-01-29T07:30:14.227
> 
> 标签：html, css

我在这里有一张桌子：[桌子](http://helios.hud.ac.uk/u0867587/Mobile_app/Text3.php)

如您所见，表格行比表格标题长。我有一个使用一个表并且只包含`th`标签的固定表标题，然后我为`td`标签创建了第二个表并将它们组合在一起。

我的问题是如何让表格标题与表格行的宽度相同，然后能够剪辑表格行旁边的滚动条？

下面是html：

```
<table id="qandatbl" cellspacing="0" cellpadding="0" border="0" align="center" style="width: 1205px;">
<thead>
<tr>
<th width="2%"></th>
<th class="qid" width="5%">Num</th>
<th class="question" width="13%">Question</th>
<th class="optandans" width="16%">Option and Answer</th>
<th class="noofreplies" width="7%">Number of Replies</th>
<th class="weight" width="6%">Number of Marks</th>
<th class="image" width="17%">Image</th>
<th class="video" width="17%">Video</th>
<th class="audio" width="17%">Audio</th>
</tr>
</thead>
</table>
<div id="qandatbl_onthefly_container" style="width: 1221px;">
<table id="qandatbl_onthefly" cellspacing="0" cellpadding="0" border="0" align="center">
<tbody>
<tr class="optionAndAnswer" align="center">
<td class="plusrow" width="2%">1</td>
<td class="qid" width="5%">2</td>
<td class="question" width="13%">3</td>
<td class="extratd" width="16%">4</td>
<td class="noofreplies" width="7%">5</td>
<td class="weight" width="6%">6</td>
<td class="image" width="17%">7</td>
<td class="video" width="17%">8</td>
<td class="audio" width="17%">9</td>
</tr>
</tbody>
</table>
</div> 
```

下面是CSS：

```
#qandatbl_onthefly_container
{
    width:100%;
    overflow-y: scroll;
    overflow-x: hidden;
    max-height:500px;
}

#qandatbl_onthefly
{
    width:100%;
    clear:both;
    overflow:auto;
}

#qandatbl, #qandatbl_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}       

#qandatbl{
    width:100%;
    margin-left:0;
    clear:both;
}

#qandatbl td { 
    vertical-align: middle;
}

#qandatbl th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
} 
```

**更新：**

```
#qandatbl_onthefly_container
{
    overflow-y: scroll;
    overflow-x: hidden;
    max-height:500px;
}

#qandatbl_onthefly
{
    clear:both;
    overflow:auto;
}

#qandatbl, #qandatbl_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
    width:100%;
    margin-left:0;
    clear:both;
}       

#qandatbl td { 
    vertical-align: middle;
}

#qandatbl th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

#qandatbl_onthefly td{
    border:1px black solid;
    border-collapse:collapse;
} 
```

目前的输出：

![在此处输入图像描述](../Images/c11e731fb8c08e6e7e28867d3f66a639.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:48:51.923

您在 2 个不同的表中。

标头位于：

```
table id="qandatbl" cellspacing="0" cellpadding="0" border="0" align="center" style="width: 1205px;" 
```

身体在：

```
table id="qandatbl_onthefly" cellspacing="0" cellpadding="0" border="0" align="center" 
```

如果你真的想要两个不同的表，你必须在 CSS 中使 th 和 td 的宽度相同。我建议将你的两张桌子目前的样子制作成 thead 和 tbody 。

```
thead id="qandatbl"
tbody id="qandatbl_onthefly" 
```

（OT：有人可以告诉我如何在 SO 格式化 HTML 标签吗？）

# vbscript - 在 SFTP 批处理 (PSFTP.exe) 中显示 FTP 服务器响应代码

> ID：14577775
> 
> 赞同：0
> 
> 时间：2013-01-29T07:30:19.163
> 
> 标签：vbscript, ftp, cmd, sftp

有没有办法在 PSFTP.exe 中显示/输出 FTP 服务器响应代码？

FTP 服务器响应代码示例：

`226 Transfer OK`

`200 Command okay`

我的代码：

`psftp.exe username@hostname -pw password -v -b batch_file > output_file 2>&1`

批处理文件：

```
put some_file
quit 
```

输出文件：

```
Looking up host "....."
Connecting to ..... port 22
Server version: SSH-2.0-OpenSSH_3.9p1
We claim version: SSH-2.0-PuTTY_Release_0.60_(Centrify_GSS_1.4)
Using SSH protocol version 2
Doing Diffie-Hellman group exchange
Doing Diffie-Hellman key exchange with hash SHA-1
Host key fingerprint is:
ssh-rsa 1024 ....
Initialised AES-256 SDCTR client->server encryption
Initialised HMAC-SHA1 client->server MAC algorithm
Initialised AES-256 SDCTR server->client encryption
Initialised HMAC-SHA1 server->client MAC algorithm
Using username ....
Sent .....
Access granted
Opened channel for session
Started a shell/command
Sent EOF message
Server sent command exit status 0
Disconnected: All channels closed
Connected to ......
Remote working directory is ....
local:some_file => remote: some_file_path_on_server 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:00:09.053

您正在连接到[SSH](http://en.wikipedia.org/wiki/Secure_Shell)服务器，而不是[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)服务器，因此您不会获得 FTP 服务器状态代码。尽管名称相似，但[SSH 文件传输协议](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)与 FTP 有着根本的不同。

# android - 通过电子邮件发送我当前的位置地址

> ID：14577777
> 
> 赞同：0
> 
> 时间：2013-01-29T07:30:38.703
> 
> 标签：android, email, send, currentlocation

我有一个问题，我当前的位置地址显示了一个 textView

但问题是点击发送按钮后，会出现错误

但我想通过带有谷歌地图超链接的电子邮件发送我当前的位置

请检查我的问题，请给我任何解决方案

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);        
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);
   ........
 }
 @Override
public void onLocationChanged(Location location) {
    TextView tvLocation = (TextView) findViewById(R.id.tv_location);

    String address = "";
    Geocoder geoCoder = new Geocoder(
            getBaseContext(), Locale.getDefault());

    // Getting latitude
    double latitude = location.getLatitude();

    // Getting longitude
    double longitude = location.getLongitude();

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    GeoPoint point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    try {
        List<Address> addresses = geoCoder.getFromLocation(
            point.getLatitudeE6()  / 1E6, 
            point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
            tvLocation.setText("Address :" +  address  );
    }
    catch (IOException e) {                
        e.printStackTrace();
    }
    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude +", Add :"+ address );

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

    // Creating an instance of ItemizedOverlay to mark the current location in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
   mapOverlays.add(currentLocationOverlay); 

}

public void onSendLocationEmail(View button) {

    final TextView txtview = (TextView) findViewById(R.id.tv_location);
    String txt = txtview.getText().toString();

    // Take the fields and format the message contents
    String subject = formatSubject(txt);
    String message = formatMessage(txt);

    sendMessage(subject, message);
    Toast.makeText(getApplicationContext(),"Clicked Send Email Button" + "-", Toast.LENGTH_SHORT).show();
} 

private String formatSubject(String txt) {

    String strSubjectFormat = getResources().getString(R.string.mapsubject_format);

    String strSubject = String.format(strSubjectFormat, txt);

    return strSubject;

}

private String formatMessage(String txt) {
    String strFormatMsg = getResources().getString(R.string.mapbody_format);

 //String strRequiresResponse = getResponseString(bRequiresResponse);

    String strMsg = String.format(strFormatMsg, txt);

    return strMsg;

}

private void sendMessage(String subject, String message) {
    Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);

    CharSequence location = lastLocation.getLatitudeE6()/ 1E6 + "," + lastLocation.getLongitudeE6()/ 1E6;

    String aEmailList[] = { "srinivasareddy1250@gmail.com" };
    messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);

    messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

    messageIntent.setType("plain/text");
    messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, message + "http://maps.google.comk/maps/maps?q=loc:"+location);

} 
```

这是我的错误

不幸的是项目已经停止

```
01-29 07:34:39.439: E/AndroidRuntime(3693): FATAL EXCEPTION: main
01-29 07:34:39.439: E/AndroidRuntime(3693): java.lang.IllegalStateException: Could not execute method of the activity
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.view.View$1.onClick(View.java:3597)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.view.View.performClick(View.java:4202)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.view.View$PerformClick.run(View.java:17340)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.os.Handler.handleCallback(Handler.java:725)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.os.Looper.loop(Looper.java:137)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at java.lang.reflect.Method.invoke(Method.java:511)
 01-29 07:34:39.439: E/AndroidRuntime(3693):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at dalvik.system.NativeStart.main(Native Method)
01-29 07:34:39.439: E/AndroidRuntime(3693): Caused by: java.lang.reflect.InvocationTargetException
01-29 07:34:39.439: E/AndroidRuntime(3693):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at android.view.View$1.onClick(View.java:3592)
01-29 07:34:39.439: E/AndroidRuntime(3693):     ... 11 more
01-29 07:34:39.439: E/AndroidRuntime(3693): Caused by: java.lang.NullPointerException
 01-29 07:34:39.439: E/AndroidRuntime(3693):    at com.sygnet.locationingooglemap.MainActivity.sendMessage(MainActivity.java:219)
01-29 07:34:39.439: E/AndroidRuntime(3693):     at com.sygnet.locationingooglemap.MainActivity.onSendLocationEmail(MainActivity.java:191)
01-29 07:34:39.439: E/AndroidRuntime(3693):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:07:38.897

这是当前位置地址的完整代码

检查此代码...

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);        
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);

    // Getting reference to MapView
    mapView = (MapView) findViewById(R.id.map_view);

    // Setting Zoom Controls on MapView
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();
    mlo = new MyLocationOverlay(this.getApplicationContext(),mapView);

    if(!mlo.enableMyLocation()){
            Toast.makeText(this, R.string.toast, Toast.LENGTH_LONG).show();
            this.finish();
    }
    mlo.enableCompass();
    mapOverlays.add(mlo);

      ......

  }  
  @Override
public void onLocationChanged(Location location) {
    tvLocation = (TextView) findViewById(R.id.tv_location);

    String address = "";
    Geocoder geoCoder = new Geocoder(
            getBaseContext(), Locale.getDefault());

    // Getting latitude
    latitude = location.getLatitude();

    // Getting longitude
    longitude = location.getLongitude();

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    try {
        List<Address> addresses = geoCoder.getFromLocation(
            point.getLatitudeE6()  / 1E6, 
            point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
            tvLocation.setText("Address :" +  address  );
    }
    catch (IOException e) {                
        e.printStackTrace();
    }
    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude +", Address :"+ address );

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

    // Creating an instance of ItemizedOverlay to mark the current location in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
   mapOverlays.add(currentLocationOverlay);         
}

public void onSendLocationEmail(View button) {      

    String txt = tvLocation.getText().toString();

    // Take the fields and format the message contents
    String subject = formatSubject(txt);
    String message = formatMessage(txt);

    sendMessage(subject, message, location);
    Toast.makeText(getApplicationContext(),"Clicked Send Email Button" + "-", Toast.LENGTH_SHORT).show();
} 

private String formatSubject(String txt) {

    String strSubjectFormat = getResources().getString(R.string.mapsubject_format);

    String strSubject = String.format(strSubjectFormat, txt);

    return strSubject;

}

private String formatMessage(String txt) {
    String strFormatMsg = getResources().getString(R.string.mapbody_format);

    String strMsg = String.format(strFormatMsg, txt);

    return strMsg;  
} 

private void sendMessage(String subject, String message,Location location) {

     try {
    Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);
    messageIntent.setType("plain/text");        

    String aEmailList[] = { "mailId@gmail.com" };
    messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);

    messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

    messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
            message + "http://maps.google.com/maps?q=loc:" + latitude +","+ longitude);
    startActivity(Intent.createChooser(messageIntent, "Send mail..."));
}
     catch (Exception e) {
            Log.e(LOG_TAG, "sendPictureMessage() failed to start activity.", e);
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:58:33.313

```
 @Override
public void onLocationChanged(Location location) {
    tvLocation = (TextView) findViewById(R.id.tv_location);

    String address = "";
    Geocoder geoCoder = new Geocoder(
            getBaseContext(), Locale.getDefault());

    // Getting latitude
    double latitude = location.getLatitude();

    // Getting longitude
    double longitude = location.getLongitude();

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    GeoPoint point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    try {
        List<Address> addresses = geoCoder.getFromLocation(
            point.getLatitudeE6()  / 1E6, 
            point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
            tvLocation.setText("Address :" +  address  );
    }
    catch (IOException e) {                
        e.printStackTrace();
    }
    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude +", Add :"+ address );

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

    // Creating an instance of ItemizedOverlay to mark the current location in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
   mapOverlays.add(currentLocationOverlay); 

}

public void onSendLocationEmail(View button) {

    String txt = tvLocation.getText().toString();

    // Take the fields and format the message contents
    String subject = formatSubject(txt);
    String message = formatMessage(txt);

    sendMessage(subject, message);
    Toast.makeText(getApplicationContext(),"Clicked Send Email Button" + "-", Toast.LENGTH_SHORT).show();
} 

private String formatSubject(String txt) {

    String strSubjectFormat = getResources().getString(R.string.mapsubject_format);

    String strSubject = String.format(strSubjectFormat, txt);

    return strSubject;

}

private String formatMessage(String txt) {
    String strFormatMsg = getResources().getString(R.string.mapbody_format);

String strMsg = String.format(strFormatMsg, txt);

    return strMsg;

} 

private void sendMessage(String subject, String message) {

     try {
    Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);
    messageIntent.setType("plain/text");

    String aEmailList[] = { "srinivasareddy1250@gmail.com" };
    messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);

    messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

    messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    startActivity(Intent.createChooser(messageIntent, "Send mail..."));
}
     catch (Exception e) {
            Log.e(LOG_TAG, "sendPictureMessage() failed to start activity.", e);
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:49:02.173

试试这个，收到回复

```
 double lat = "your lat";
  double lon = "your lng";

   List<Address> addresses = new Geocoder(applicationContext,
                    Locale.getDefault()).getFromLocation(lat, lon, 1);
            if (addresses.size() > 0) {
                String addressLine = "";

                for (Integer i = 0; i < addresses.get(0)
                        .getMaxAddressLineIndex(); i++) {
                    if (!addressLine.equals("")) {
                        addressLine += ", ";
                    }

                    addressLine += addresses.get(0).getAddressLine(i);
                }

                if (addressLine != "") {
                    foundAddress += addressLine;
                }

            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:33:21.327

请在按钮单击时尝试使用此代码：

```
String phoneNumber = "any contact number here";
 String message = textview1.getText().toString();
 SmsManager smsManager = SmsManager.getDefault();
 smsManager.sendTextMessage(phoneNumber, null, message, null, null);
 Toast.makeText(getApplicationContext(), "Message Sent!", Toast.LENGTH_LONG).show(); 
```

# iphone - 如何在 Appcelerator Titanium for iPhone 中使用 POST 方法？

> ID：14577779
> 
> 赞同：0
> 
> 时间：2013-01-29T07:30:45.510
> 
> 标签：iphone, titanium, appcelerator

我在 Titanium for Android 应用程序中使用了 POST 方法，它工作正常。但在 iPhoen Simulator 中，它会在服务器端显示一个空白数组以进行发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:06:17.513

```
var req = Titanium.Network.createHTTPClient({
    timeout : 15000
});
req.open("POST", url);
req.onload = function(e) {
  //YOUR CODE HERE 
}
req.onerror = function(e) {
  //YOUR CODE HERE 
}
req.send(params); 
```

如果服务器需要 json 格式的数据，那么您可以使用 req.send(JSON.stringify(params)) ，否则您可以简单地发送它。

# html - HTML有序列表缩进以保持原始编号

> ID：14577782
> 
> 赞同：3
> 
> 时间：2013-01-29T07:30:55.013
> 
> 标签：html, list

我需要缩进一个有序列表以保持父列表项编号：

我有的：

```
 // My code:
 <ol>
      <li>Item 1</li>
      <li>
           Item 2
           <ol>
                <li>Item 2.1</li>
                <li>Item 2.2</li>
           </ol>
      </li>
      <li>Item 3</li>
 </ol> 
```

等等。

我现在得到的结果是：

```
 // Result:
      1\. Item 1
      2\. Item 2
           Item 1
           Item 2
      3\. Item 3 
```

我正在寻找的是：

```
 // Looking for:
      1\. Item 1
      2\. Item 2
           2.1 Item 2.1
           2.2\. Item 2.2
      3\. Item 3 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:52:21.637

受 DON 回答的启发，我玩弄了 counters 属性并设法使以下工作：

```
 ol {
     counter-reset: item;
     list-style-type: none;
 }

 ol li:before {
     font-weight: bold;
     content: counters(item,".")".   "; 
     counter-increment: item;
 }

 ol ol {
     counter-reset: subitem;
     list-style-type: none;
 }

 li li:before {
     content: counters(item,".")"."counters(subitem,".")".   "; 
     counter-increment: subitem;
 } 
```

我不相信这是最干净的解决方案，因为我不太了解内容元素，但这肯定会为您提供一个有序列表，该列表根据父容器的最后一个列表项增加子级列表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:37:52.590

您可以使用[计数器](http://www.w3.org/TR/CSS2/syndata.html#counter)来执行此操作：

```
OL { counter-reset: item }
LI { display: block }
LI:before { content: counters(item, ".") " "; counter-increment: item } 
```

# ruby-on-rails-3 - 始终以默认语言设计超时消息

> ID：14577783
> 
> 赞同：4
> 
> 时间：2013-01-29T07:31:06.323
> 
> 标签：ruby-on-rails-3, internationalization, devise, locale

我有一个带有设计和 30 分钟会话超时的 Rails 应用程序。当会话过期并且用户重新加载页面或单击链接时，他们会收到消息`Your session expired, please sign in again to continue.`，但此消息始终使用默认语言（在我的情况下为英语）。我已经配置了语言环境文件，`devise.en.yml`并且`devise.ru.yml`

有没有办法以当前语言显示 Flash 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:24:47.627

应用程序控制器仅在用户登录时处理内容。尝试添加`before_filter :set_locale`到 DeviseSessions 控制器的自定义子类。

# android - 如何在 android maps v2 上获取有关可见标记的信息

> ID：14577785
> 
> 赞同：1
> 
> 时间：2013-01-29T07:31:09.313
> 
> 标签：android, google-maps

有没有办法获取有关 android 谷歌地图（v2）上显示的标记的信息。我有不同颜色的标记（每种颜色代表要在地图上显示的类别），我想知道是否可以从当前可查看的地图中隐藏特定组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:27:17.690

我自己遇到了这个问题，在纪录片中找不到返回标记列表的任何参考，所以我制作了一个静态类实用程序，它将标记保存在一个数组中。

[使用此处记录](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker)的 Marker 的 getId() 和 remove() 方法，我根据 Id 转到特定标记并将其从地图中删除。

考虑使用单独的数组，保存您拥有的每种类型的标记。这将使您能够通过在数组上循环并分配如下标记来显示您想要的特定组：

```
 Marker marker = map.add(new MarkerOptions()
   .position(new LatLng(37.7750, 122.4183))
   .title("San Francisco")
   .snippet("Population: 776733")); 
```

和隐藏标记相同的东西（使用删除方法）

# ios - 自动调整 TableViewCell 的高度以适应 iOS 6 中的 UIImageVIew

> ID：14577786
> 
> 赞同：0
> 
> 时间：2013-01-29T07:31:10.427
> 
> 标签：ios, uitableview, uiimage

我有 uiimageview 属性可以在我的表格视图中显示图像，并希望让一个特定的表格视图单元格根据 uiimageview 中图像的高度来更改其高度。下面是我所做的。不太确定为什么 tableview 单元格的高度没有改变...... :(

``@interface BoatViewController () <UIImagePickerControllerDelegate, UINavigationControllerDelegate, UITextFieldDelegate>``

 ````
@property (nonatomic, weak) IBOutlet UIImageView *boatImageView;

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.section == 0 && indexPath.row == 0) {
        return self.boatImageView.image.size.height;
    }else{
        return 44;
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:39:02.327

试试这个代码希望它有帮助。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.section == 0 && indexPath.row == 0) {

    CGSize size = image.size; // Assign the image what you want to display.

  //  self.boatImageView.frame=CGRectMake(0, 0, size.width, size.height);

    return size.height;

    }else{
        return 44;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:36:13.103

一切都完成加载后，尝试重新加载表视图数据。可能是在调用该方法时，iOS 还没有计算完框架的最终大小。

在您的 viedDidAppear 方法中添加调用以重新加载 tableview。看看它是否有帮助。`

# python - python 集合可以包含的值的数量是否有限制？

> ID：14577790
> 
> 赞同：2
> 
> 时间：2013-01-29T07:31:25.337
> 
> 标签：python, set

我正在尝试使用 python 集作为 mysql 表中 id 的过滤器。python 集存储所有要过滤的 id（现在大约 30 000），这个数字会随着时间的推移缓慢增长，我担心 python 集的最大容量。它可以包含的元素数量是否有限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T07:37:08.763

您最大的限制是计算机上的内存量。试试这条线：

```
s = set(xrange(10000000)) 
```

这创建了一组长度为 1000 万的集合，比您作为示例给出的 30,000 大得多。在我的电脑（一台 4GB 内存的 Macbook Air）上，它只需几秒钟即可运行。无论您的系统是什么，您都可能同样不受约束。

当然，绝对有一个上限，在此之前，由于冲突的数量以及必要的内存交换，您的集合将开始变慢。因此，这个集合有多大很重要。如果您将使用超过 1000 万个项目，则可能需要考虑使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:34:01.203

我不知道一组中的项目数量是否有任意限制。该限制很可能与可用内存有关。

# c# - 我可以从控制台应用程序中的 mvc 3 Web 应用程序获取用户 ID 吗？

> ID：14577796
> 
> 赞同：0
> 
> 时间：2013-01-29T07:31:51.333
> 
> 标签：c#, asp.net, asp.net-mvc-3, console-application

我需要从控制台应用程序中的 asp.net mvc 3 应用程序获取用户 ID。这是我的代码：（mvc）

```
public class MembershipRepository : IMembershipRepository
{
    public Guid GetUserId(string name)
    {
        var providerUserKey = Membership.GetUser(name).ProviderUserKey; // HttpException
        if (providerUserKey != null)
            return (Guid)providerUserKey;
        throw new NullReferenceException("user with this username does't exist");
    }
} 
```

（控制台）代码：

```
ninjectKernel.Bind<IMembershipRepository>().To<MembershipRepository>();
var membershipRepository = ninjectKernel.Get<IMembershipRepository>();
Guid userId = membershipRepository.GetUserId("admin"); 
```

HttpException：无法连接到 Sql 服务器数据库。

异常发生前弹出窗口：此程序存在兼容性问题（microsoft sql seqver 2008 和 2008 r2）。
我已经安装了 sql server 2012。

此外，它只是一小段代码。在我尝试获取 userId 之前，我使用其他存储库将数据添加到数据库并且它可以工作：当我检查表内容时，它充满了新条目。

我需要如何更改代码？Mabby 还有其他方法可以在控制台应用程序中获取 userId 吗？

谢谢！

**编辑：**

App.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add
       name="WebStoreConnectionString" connectionString="Data Source=(LocalDB)\v11.0; DataBase=WebStore;
          AttachDbFilename=C:\Users\Aleksey\repos\working_copy\WebStore\WebStore\App_Data\WebStore.mdf;
          Integrated Security=True;Connect Timeout=30"
          providerName="System.Data.SqlClient"
    />
 </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:53:31.300

为什么不在您的控制器上有一个公共方法，并在您的控制台应用程序中创建一个 Web 请求来调用该方法？

好吧，它是相当通用的。

首先，您需要在控制器上设置一个带有一些参数的操作方法

```
 [HttpPost]
    public guid MyActionMethod(string name)
    {

    } 
```

然后你需要创建一个调用该方法的网络请求

```
 UTF8Encoding encoding = new UTF8Encoding();

       string messageBody = "name=myName"
       byte[] requestBody = encoding.GetBytes(messageBody);

       HttpWebRequest WRequest;

        CredentialCache myCredCache = new CredentialCache();
        myCredCache.Add(new Uri(targetUrl), "NTLM", (NetworkCredential) CredentialCache.DefaultCredentials);

        WRequest = (HttpWebRequest)HttpWebRequest.Create("http://servername/controllerName/MyActionMethod/?" + messageBody);

        WRequest.Credentials = myCredCache;
        WRequest.UnsafeAuthenticatedConnectionSharing = true;
        WRequest.PreAuthenticate = false;
        WRequest.Method = "POST";
        WRequest.Timeout = 10000;
        WRequest.ContentLength = request.Length;
        WRequest.SendChunked = true;

        using (Stream requestStream = WRequest.GetRequestStream())
            requestStream.Write(requestBody, 0, requestBody.Length); 
```

我觉得对吗？检查网络请求，我从一些我有的地方复制了它，并且不得不重建它，因为它在许多差异方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:36:42.477

发生异常是因为在 MembershipRepository 中我使用内置的成员资格提供程序返回用户。我将实现更改为使用数据上下文：

```
public class MembershipRepository : IMembershipRepository
{
    private readonly WebStoreDataContext _dataContext;

    public MembershipRepository(WebStoreDataContext dataContext)
    {
        _dataContext = dataContext;
    }

    public IEnumerable<User> GetUsers()
    {
        return _dataContext.Users;
    }

    public Guid GetUserId(string name)
    {
        return _dataContext.Users.Where(u => u.UserName == name).Select(u => u.UserId).Single();
    }
} 
```

一切正常，我不需要使用网络请求）

因此，您可以创建 MembershipRepository 的新实例或 YourAppNameDataContext 的实例（并直接使用数据上下文）

# java - 文件服务是否使用 Java 将数据作为 blob 值存储在 Google App Engine 中

> ID：14577801
> 
> 赞同：1
> 
> 时间：2013-01-29T07:32:10.537
> 
> 标签：java, google-app-engine, google-cloud-storage

我有一个这样的 HTML 表单，

```
<form action="/upload" method="post" enctype="multipart/form-data">
<input type="file" name="file" />
<input type="submit"value="upload"/>
</form> 
```

使用 GAE 中的文件服务和以下代码将数据存储在谷歌应用引擎中。

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.createNewBlobFile(mime, fileName);
boolean lock = true;
byte[] b1 = new byte[BUFFER_SIZE];
int readBytes1;
FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
while ((readBytes1 = is1.read(b1)) != -1) {
writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));
}
writeChannel.closeFinally(); 
```

此文件服务是否将上传的文件作为 Blob 值存储在 Google App 引擎中。

*   在使用文件服务之前，我尝试`createUploadUrl()`直接以 HTML 形式使用方法，将文件存储为 blob 值，我也可以使用谷歌应用程序引擎中的“查看 blob”查看 blob。
*   现在使用此文件后，我只看到文件的密钥，而不是“查看 Blob”选项，任何人都可以说出为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:45:19.457

请参考以下链接。这里显示了 Apache Common File Upload。

[如何在java gae中处理多个html5输入](https://stackoverflow.com/questions/13820566/how-to-handle-html5-input-multiple-in-java-gae)

# c# - 脚本在 Powershell 中运行，但在 C# 中运行时出错

> ID：14577803
> 
> 赞同：0
> 
> 时间：2013-01-29T07:32:28.140
> 
> 标签：c#, powershell

我有一个有效的 powershell 脚本，可以从我们网络中的一台机器上获取 Windows 产品密钥。该脚本在 powershell 命令行中运行良好，但当我尝试从 C# 运行它时返回错误。我需要这项工作来绘制我们公司的许可证。

电源外壳代码：

```
function Get-WindowsKey {
$target = '$server'
$hklm = 2147483650
$regPath = "Software\Microsoft\Windows NT\CurrentVersion\DefaultProductKey"
$regValue = "DigitalProductId4"
$productKey = $null
$win32os = $null
$wmi = [WMIClass]"\\$target\root\default:stdRegProv"
$data = $wmi.GetBinaryValue($hklm,$regPath,$regValue)
$binArray = ($data.uValue)[52..66]
$charsArray = "B","C","D","F","G","H","J","K","M","P","Q","R","T","V","W","X","Y","2","3","4","6","7","8","9"
For ($i = 24; $i -ge 0; $i--) {
    $k = 0
    For ($j = 14; $j -ge 0; $j--) {
        $k = $k * 256 -bxor $binArray[$j]
        $binArray[$j] = [math]::truncate($k / 24)
        $k = $k % 24
    }
    $productKey = $charsArray[$k] + $productKey
    If (($i % 5 -eq 0) -and ($i -ne 0)) {
        $productKey = "-" + $productKey
    }
}
$productkey
}
Get-WindowsKey | Format-Table -AutoSize 
```

只需将 $server 替换为 . 或您的 IP

运行脚本的 C# 代码：

```
private void RunWindowsKeyScript(string IP)
{
    try
    {
        Assembly keyAssembly = this.GetType().Assembly;
        ResourceManager keyResMan = new ResourceManager("LanMap.Resources.PS script", keyAssembly);
        string keyScript = keyResMan.GetString("WindowsKey");
        keyScript = keyScript.Replace("$server", IP);
        Runspace keyRunspace = RunspaceFactory.CreateRunspace();
        keyRunspace.Open();
        Pipeline keyPipeline = keyRunspace.CreatePipeline();
        keyPipeline.Commands.AddScript(keyScript);
        keyPipeline.Commands.Add("Out-String");
        Collection<psobject> keyResults = keyPipeline.Invoke();
        keyRunspace.Close();
        StringBuilder keyStringBuilder = new StringBuilder();
        foreach (PSObject obj in keyResults)
        {
            keyStringBuilder.AppendLine(obj.ToString());
        }
    }
    catch (Exception ex)
    {
        string s = "";
        s += " ";
    }
} 
```

如果可以的话请帮忙。我已经知道错误是在 C# GetBinaryValue 中返回 null。我就是不能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:45:07.540

我不确定你是如何让这个以脚本形式工作的：

```
$target = '$server' 
```

单引号字符串不会扩展其中的变量。这应该可以正常工作：

```
$target = "$server" 
```

这通常就足够`$target = $server`了，但由于您正在执行字符串替换，因此最好使用双引号。

另一种可能性是您的 C# 代码作为 x86 运行，并且您正在读取 WOW64 注册表而不是 64 位注册表。这或许可以解释为什么您在运行脚本和通过 C# 应用程序运行之间看到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:43:01.447

更新：理论见底部。

从 ISE 测试 PowerShell 代码：看起来`GetBinaryValue`失败了：

```
$target = 'localhost'
$hklm = 2147483650
$regPath = "Software\Microsoft\Windows NT\CurrentVersion\DefaultProductKey"
$regValue = "DigitalProductId4"
$productKey = $null
$win32os = $null
$wmi = [WMIClass]"\\$target\root\default:stdRegProv"
$data = $wmi.GetBinaryValue($hklm,$regPath,$regValue)

if ($data -eq $null) { Write-DEbug "Data is NULL"; return "STOP 2" }

write-debug '$Data'
write-debug ("$($data): " + ($data | gm | out-string))
write-debug ("$($data): " + ($data | fl * | out-string))

if ($data.uValue -eq $null) { Write-Debug "Data.uValue is NULL"; return "STOP 3" }
# rest cut for testing 
```

结果是：

```
调试：$数据
调试：System.Management.ManagementBaseObject：

   类型名称：System.Management.ManagementBaseObject#\__PARAMETERS

名称 MemberType 定义                      
---- ---------- ----------                      
PSComputerName AliasProperty PSComputerName = __SERVER       
ReturnValue 属性 uint32 ReturnValue {get;set;}   
uValue 属性 byte[] uValue {get;set;}        
__CLASS 属性字符串 __CLASS {get;set;}       
__DERIVATION 属性字符串[] __DERIVATION {get;set;}
__DYNASTY 属性字符串 __DYNASTY {get;set;}     
__GENUS 属性 int __GENUS {get;set;}          
__NAMESPACE 属性字符串 __NAMESPACE {get;set;}   
__PATH 属性字符串 __PATH {get;set;}        
__PROPERTY_COUNT 属性 int __PROPERTY_COUNT {get;set;}
__RELPATH 属性字符串 __RELPATH {get;set;}     
__SERVER 属性字符串 __SERVER {get;set;}      
__SUPERCLASS 属性字符串 __SUPERCLASS {get;set;}  

调试：System.Management.ManagementBaseObject：

PS计算机名称：
__属：2
__CLASS : __PARAMETERS
__超类：
__DYNASTY : __参数
__RELPATH ：
__PROPERTY_COUNT : 2
__派生：{}
__服务器 ：
__命名空间：
__小路 ：
返回值：2
u值：
属性：{ReturnValue，uValue}
系统属性：{__GENUS、__CLASS、__SUPERCLASS、__DYNASTY...}
限定符：{}
类路径：__PARAMETERS
地点 ：
容器 ：

调试：Data.uValue 为 NULL
停止 3

```

这`ReturnValue: 2`对应于 ERROR_FILE_NOT_FOUND（假设该`ReturnValue`成员反映了返回值，[`GetBinaryValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390440%28v=vs.85%29.aspx)其中 0 表示成功，否则返回标准 Windows API 错误）。

### 更新：

在 ISE 实例下甚至可以得到这个：

```
PS [32] C:\ #50> gp "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\DefaultProductKey"
gp：找不到路径“HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\DefaultProductKey”，因为它不存在。
在行：1 字符：1
+ gp "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\DefaultProductKey"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo : ObjectNotFound: (HKLM:\SOFTWARE\...faultProductKey:String) [Get-ItemProperty], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand

```

但我可以看到关键......但是 ISE 的 64 位实例并且它可以工作。

密钥仅（直接）可用于 64 位进程，最近 Visual Studio 版本中的默认设置是大多数应用程序构建为 32 位（大多数应用程序不需要额外的地址空间），32 位 .NET 应用程序将加载 32 位PowerShell 运行时程序集。

您是否尝试过为 64 位构建应用程序？

PS。这个问题可能会有所帮助：[*Reading 64bit Registry from a 32bit application*](https://stackoverflow.com/questions/974038/reading-64bit-registry-from-a-32bit-application)

# qt - 部署 QT 应用程序

> ID：14577808
> 
> 赞同：2
> 
> 时间：2013-01-29T07:32:53.420
> 
> 标签：qt

我尝试使用 VC++（调试模式）在 Windows 上部署我的 QT 应用程序构建。我在未安装 QT 的 PC 上运行该应用程序。我还提供了一些它需要的 .dll 库。这是文件夹布局：

1.  D3DCompiler_43.dll
2.  icudt49.dll
3.  icuin49.dll
4.  icuuc49.dll
5.  libEGLd.dll
6.  libGLESv2d.dll
7.  我的应用程序
8.  我的应用程序.ini
9.  Qt5Cored.dll
10.  Qt5Guid.dll
11.  Qt5Widgetsd.dll
12.  插件
13.  插件\平台\
14.  插件\平台\qminimal.dll
15.  插件\平台\qminimald.dll
16.  插件\平台\qwindows.dll
17.  插件\平台\qwindowsd.dll

当我运行应用程序时，我收到一条错误消息：“无法加载平台插件'windows'。可用平台是：”我认为它无法找到加载平台，尽管我在插件文件夹下提供了平台。我还将平台路径添加到系统路径，但它也没有解决。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:38:33.630

*plugins*目录是[不必要](http://doc-snapshot.qt-project.org/5.0/qtdoc/deployment-windows.html#qt-plugins)的。

试试这个结构：

*   ...
*   Qt5Widgetsd.dll
*   平台\
*   平台\qminimal.dll
*   平台\qminimald.dll
*   平台\qwindows.dll
*   平台\qwindowsd.dll

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-12T08:59:39.407

有一个[帮助页面](http://qt-project.org/doc/qt-5/windows-deployment.html)详细说明了如何为 Windows 部署 Qt5 应用程序。

那里最有用的信息：有一个 Windows 部署工具 (windeployqt)，它会自动为您找到所有需要的 dll！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T07:50:11.213

您可以在程序开始时加载插件，`main()`如下所示：

```
QCoreApplication app(argv, args);    
QString sDir = QCoreApplication::applicationDirPath();
app.addLibraryPath(sDir+"/plugins/platform"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T13:48:39.570

在调试中运行 Qt 时，输出窗口会告诉您它加载的所有 DLL，然后您需要将其包含在您的分发 exe 文件夹中。

# c++ - std::string 的构造失败

> ID：14577811
> 
> 赞同：-3
> 
> 时间：2013-01-29T07:32:58.883
> 
> 标签：c++, string, stl

恐怕这是一个非常愚蠢的问题，但我不明白。我正在构建一个`std::string`包含换行符（需要进一步处理）的方式：

```
std::string mystr=std::string("\n") 
```

之后令人惊讶`mystr`的是空的。当我进入字符串构造函数时，传递的数据也是空的（所以不`\n`包含）。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:36:09.123

字符串不应该为空，它应该有 size `1`。是什么让你相信它是空的？

```
#include <iostream>
#include <string>

int main()
{
  std::string s1 = std::string("\n");
  std::string s2;
  std::cout << s1.size() << "\n";
  std::cout << s2.size() << "\n";
} 
```

输出`1`和`0`。

可能让您感到困惑的是此表达式中的复制省略或移动构造：

```
std::string s1 = std::string("\n"); 
```

无论如何，哪一个通常会这样写：

```
std::string s1("\n"); 
```

# shell - 与awk战斗

> ID：14577814
> 
> 赞同：-3
> 
> 时间：2013-01-29T07:33:04.037
> 
> 标签：shell, awk, reporting

问题：

我有如下文件，其中包含几个数字和字符

1.  字段：找到 IP 的时间（`69.175.54.106`= `17`）
2.  字段：IP地址，
3.  字段：国家名称（`US`-美国，`CN`-中国等），

如果您在下面看到 IP`69.175.54.106`已解析 283 次但不是 17 次，所以我想将第一个字段与匹配的第二个字段相加，第三个字段应该作为国家名称

```
17, 69.175.54.106,
283, 69.175.54.106, US
77, 58.77.59.10, CN
23, 58.77.59.10, 
```

**输出应如下所示：**

```
300, 69.175.54.106, US
100, 58.77.59.10, CN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:43:31.837

这样的事情可能对你有用：

```
awk 'BEGIN {FS=", *"}
{sum[$2]+=$1 }
! country[$2] && $3 != "" {country[$2] = $3}
END { for ( k in sum ) { print sum[k] ", " k ", " country[k] } }' INPUTFILE 
```

[在 Ideone.com 上查看它的实际应用](http://ideone.com/HbZNEA)。

逐行

1.  在`BEGIN`块中设置字段分隔符（以摆脱不需要的空格）
2.  对于每一行，将时间添加到由 IP 索引的数组中
3.  如果尚未存储国家代码，并且第三个文件不为空，则将其存储在另一个数组中（由 IP 索引）
4.  最后为每个 IP 打印总和、IP 和国家代码

# android - 'CCHttpRequest' 未在此范围内声明

> ID：14577817
> 
> 赞同：0
> 
> 时间：2013-01-29T07:33:05.630
> 
> 标签：android, c++, cocos2d-x

我正在尝试在我的游戏中使用 CCHttpRequest 从服务器下载图像。我有

```
#include "cocos-ext.h" 
```

在我的头文件中并有

```
LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static 
```

在 Android.mk 中。

我仍然收到`'CCHttpRequest' was not declared in this scope`错误。我正在使用 cocos2d-2.0-x-2.0.2 并且可以看到 Cocos2dx 目录中的文件。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:12:36.287

修复。我只需要使用命名空间 cocos2d::extension

```
using namespace cocos2d::extension; 
```

# .net - 聚焦特定行而不取消选择已选择的行

> ID：14577819
> 
> 赞同：1
> 
> 时间：2013-01-29T07:33:20.410
> 
> 标签：.net, vb.net, winforms, datagridview

我有一个 DataGridView dgv。

我选择了一些行。
然后右键单击其中一行我将显示选项。

在这里，我希望光标焦点位于我右键单击的行而不取消选择选定的行集。

我正在尝试这个

```
dgv.CurrentCell = dgv.Rows(hitRow).Cells(0)  'here hitRow is the row index of my clicked row 
```

但是此代码取消选择所有我选择的行并将光标焦点带到单击的行。我不希望取消选择发生。我尝试在我的代码之后添加这个

```
dgv.Rows(hitRow).Selected = True 
```

但它只选择一行。

# angularjs - ngModel 不会在指令中将数据传递回父范围

> ID：14577822
> 
> 赞同：9
> 
> 时间：2013-01-29T07:33:35.370
> 
> 标签：angularjs, directive

相关帖子，但没有帮助： [从指令设置 ngModel 时的范围问题](https://stackoverflow.com/questions/13045980/scoping-issue-when-setting-ngmodel-from-a-directive)

编辑：[我可以使用具有隔离范围的 ng-model 吗？](https://stackoverflow.com/questions/11896732/ngmodel-and-component-with-isolated-scope)也没有用。

我遇到了一些问题，但我猜是以更复杂的方式。我想编写一个不使用任何输入来保存数据的下拉菜单。我宁愿让 ngModel 来处理它。

[http://jsfiddle.net/QeM6g/6/](http://jsfiddle.net/QeM6g/6/)

上面的 jsFiddle 示例显示了一个演示，其中上述方法不起作用。

```
// this is what should work but doesn't
ngModel.$setViewValue(value);
scope.$apply(attr.ngModel,value); 
```

出于某种原因，ngModelController 的范围是我的范围的兄弟。所以它不会将更改传递回父级。至少所有其他同级范围的行为都符合您的预期。即 ng-change 结合使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T10:55:39.947

Angularjs 不能很好地处理与原始类型的直接绑定。

如果您更改此行：

```
$scope.productId = 16; 
```

像这样：

```
$scope.selectedProduct = {
    id: 16
} 
```

并更改其余代码的这些引用，您应该能够克服这个问题。

**jsfiddle：http:** [//jsfiddle.net/M2cL7/](http://jsfiddle.net/M2cL7/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-31T18:05:16.000

不要绑定到作用域中的原语，绑定到作用域中的对象。

来自[https://github.com/angular/angular.js/wiki/Understanding-Scopes](https://github.com/angular/angular.js/wiki/Understanding-Scopes)

> ...直到您尝试将 2 路数据绑定（即，表单元素，ng-model）到从子范围内定义在父范围上的原语（例如，数字，字符串，布尔值）。它不像大多数人期望的那样工作。发生的情况是子作用域获得了自己的属性，该属性隐藏/隐藏了同名的父属性。**这不是 AngularJS 正在做的事情——这就是 JavaScript 原型继承的工作原理**。新的 AngularJS 开发人员通常没有意识到 ng-repeat、ng-switch、ng-view 和 ng-include 都创建了新的子作用域，因此当涉及到这些指令时，问题通常会出现。
> 
> **通过遵循始终使用“.”的“最佳实践”，可以轻松避免原语的这个问题。在你的 ng 模型中**

所以

```
<input ng-model="tweetText"> 
```

变成

```
<input ng-model="tweet.text"> 
```

一个很棒的总结在这里：

[https://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m](https://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)

# java - 我只想显示选定树节点的复选框，但我正在为树中的每个元素获取单选按钮

> ID：14577824
> 
> 赞同：0
> 
> 时间：2013-01-29T07:33:51.627
> 
> 标签：java, tree, xul, zk

这是我的代码

```
<?page title="MVVM Tree POC"?>
<zk>
    <borderlayout height="800px">
        <west size="25%"></west>
        <center>
            <window apply="org.zkoss.bind.BindComposer"
                viewModel="@id('vm') @init('com.nagarro.controller.TreeController')"
                title="Dynamic Tree" border="normal">
                <tree multiple="true" checkmark="true" rows="5"
                    model="@bind(vm.employeeTreeModel)">
                    <treecols>
                        <treecol label="First Name" align="center" />
                        <treecol label="Last Name" align="center" />
                        <treecol label="Age" align="center" />
                        <treecol label="Index" align="center" />
                    </treecols>
                    <template name="model" var="node" status="s">
                        <treeitem checkable="true">
                            <treerow style="text-align:center;">
                                <treecell
                                    label="@bind(node.data.firstName)" style="text-align:left;" />
                                <treecell
                                    label="@bind(node.data.lastName)" />
                                <treecell label="@bind(node.data.age)" />
                                <treecell label="@bind(s.index)" />
                            </treerow>

                        </treeitem>
                    </template>
                </tree>

            </window>
        </center>
    </borderlayout>
</zk> 
```

我检查了 zkoss[参考](http://books.zkoss.org/wiki/ZK_Component_Reference/Data/Tree)中的多选属性，并在上述 zul 文件中进行了必要的更改。它仍然没有显示复选框。相反，它只显示单选按钮。

**另外，我想在一些选定的树节点而不是所有节点前面显示复选框。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:51:29.633

利用

```
setMultiple(true) 
```

`vm.employeeTreeModel`在不是它自己的树返回的模型实例上。

如果您只想检查一些，请更改此

```
<treeitem checkable="true"> 
```

类似的事情

```
<treeitem checkable="@load(node.checkable)"> 
```

# bash - 使用 sed 和 tee 等效的 Bash echo -e

> ID：14577828
> 
> 赞同：0
> 
> 时间：2013-01-29T07:34:03.213
> 
> 标签：bash

我正在做一些查找/替换的事情`sed`并使用`tee` 来编写输出文件。这是命令

```
 # $1 source
    # $2 Type
    # $3 name 
    # $4 body 

    sudo sed  "s/<!--ID-->/1/g"  ./templates/tpl.txt \
        | sed  "s/<!--AUTHOR-->/myname/g"  \
        | sed  "s/<!--TYPE-->/$2/g"  \
        | sed  "s/<!--BODY-->/$4/g"  \
        | sed  "s/<!--NAME-->/$3/g"  \
        | tee  "$3.txt" > /dev/null 
```

在输出文件中，我看到“n”代替了新行。我需要与以下相同的效果（但在模板替换之后）

```
 echo -e "$4" > "$3.txt" 
```

我是 bash 学习者，请帮我提供我的代码

# 编辑

$4 包含带有注释等的多行字符串（例如 mysql[函数 /procedure 或 trigger ）](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:40:53.990

如果您打算`tee`用于写入特权文件，则必须使用`sudo`with `tee`。

你可以：

```
sed < template/tpl.txt -e "
    s/<!--ID-->/1/g;
    s/<!--AUTHOR-->/myname/g;
    s/<!--TYPE-->/$2/g;
    s/<!--NAME-->/$3/g;
    /<!--BODY-->/{s/<!--BODY-->/$4/;s/\\n/\n/g;}
  " | sudo tee "$3" >/dev/null 
```

其他方式：在[bash](/questions/tagged/bash "显示标记为“bash”的问题")中，您可以使用：

```
echo "${4//\\n/$'\n'}" 
```

所以：

```
sed "s/<!--BODY-->/${4//\\n/$'\n'}/;" 
```

也可以工作。

使用 Mac`sed`这可能会更好：

```
sed < template/tpl.txt "s/<\!--ID-->/1/g;
     s/<\!--AUTHOR-->/myname/g;
     s/<\!--TYPE-->/$2/g;
     s/<\!--BODY-->/${4//\\n/\\$'\n'}/
  " | sudo tee "$3" >/dev/null 
```

解释：`${4//\\n/\\$'\n'}`是*bashism*，我们可以像你使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")一样使用。Mac sed 不支持`\n`换行符，但如果用反斜杠转义则支持换行符`\`，因此在*RHS*中，`\n`可以写成（在 bash 中）`\\$'\n'`：：

```
echo abc\\$'\n'def
abc\
def 
```

# asp.net-mvc - MVC 4(Razor) KnockoutJS & DataTable

> ID：14577834
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:34:34.597
> 
> 标签：asp.net-mvc, json, knockout.js

> 我正在尝试通过敲除绑定在 HTML 表中显示一个 DataTable ...我不知道我在哪里丢失或错误：
> 
> 我的控制器：

```
 public JsonResult GetEmployees()
     {
        BAL.Employee dbProvider = new BAL.Employee();

        DataTable dataTable = dbProvider.ShowEmployeeDetails();

        List<Model.Employee> objExerciseList = new List<Model.Employee>();

        foreach (DataRow dataRow in dataTable.Rows)
        {
            Model.Employee objExercise = new Model.Employee();

            objExercise.EmployeeCode = dataRow["EmpCode"].ToString();
            objExercise.EmployeeName = dataRow["EmpName"].ToString();

            objExerciseList.Add(objExercise);
        }

        return Json(objExerciseList, JsonRequestBehavior.AllowGet);
    } 
```

> 我的模型：

```
public class Employee
{
  private string employeeCode;
  private string employeeName;

  public int ID { get; set; }

  [Required(ErrorMessage="Employee Code is Required")]
  public string EmployeeCode
  {
    get
    {
        return employeeCode;
    }
    set
    {
        employeeCode = value;
    }
  }

  [Required(ErrorMessage = "Employee Name is Required")]
  public string EmployeeName
  {
    get
    {
        return employeeName;
    }
    set
    {
        employeeName = value;
    }
  }
} 
```

> 这是我的 ViewModel 代码：

```
@{
ViewBag.Title = "Exercise9";
Layout = "../Shared/Master.cshtml";
}

<html>
<head>
<title>KO</title>
<script src="../../Scripts/jquery-1.6.2.js" type="text/javascript"></script>
<script src="../../Scripts/knockout-2.2.1.js" type="text/javascript"></script>
<script src="../../Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
<script src="../../Scripts/json2.js" type="text/javascript"></script>
</head>
<body>
<form action="" method="get">
<div style="width: 990px; background-color: White; height: 710px;">
    <table id="tbllist" align="center" style="border:5px #fff solid;">
        <tr>
            <td colspan="6">
                <h2>
                    Employee List</h2>
            </td>
        </tr>
        <tr>
            <td colspan="6" style="padding: 0px;">
                <div id="title_p">
                    Listing</div>
            </td>
        </tr>
        <tr>
            <th align="left">
                Employee Code
            </th>
            <th align="left">
                Employee Name
            </th>
        </tr>
        <tbody data-bind="foreach: Employees">
            <tr style="border-bottom: 1px solid #000000;">
                <td>
                    <span data-bind="text: EmployeeCode"></span>
                </td>
                <td>
                    <span data-bind="text: EmployeeName"></span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</form>
<script type="text/javascript">
    var EmpViewModel = function () {
    //Make the self as 'this' reference
    var self = this;
        //Declare observable which will be bind with UI 
        self.EmployeeCode= ko.observable("0");
        self.EmployeeName= ko.observable("");

    //The Object which stored data entered in the observables
    var EmpData = {
        EmpCode:self.EmployeeCode,
        EmpName: self.EmployeeName
        };

    //Declare an ObservableArray for Storing the JSON Response
    self.Employees = ko.observableArray([]);

    GetEmployees(); //Call the Function which gets all records using ajax call

    //Function to Read All Employees
    function GetEmployees() {
        //Ajax Call Get All Employee Records
        $.ajax({
                    type: "GET",
                    url: "/Exercise/GetEmployees/",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                    self.Employees(data); //Put the response in ObservableArray
                    },
                    error: function (error) {
                    alert(error.status + "<--and--> " + error.statusText);
                    }
               });
        //Ends Here
    }
};

ko.applyBindings(new EmpViewModel());
</script> 
```

> 请帮助我...在此先感谢....！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:53:15.190

尝试从 Json 转换为可观察的 JavaScript 模型，如下所示：

```
$.ajax({
                    type: "GET",
                    url: "/Exercise/GetEmployees/",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                         ko.mapping.fromJS(data, {}, self.Employees);
                    },
                    error: function (error) {
                    alert(error.status + "<--and--> " + error.statusText);
                    }
               }); 
```

# jquery - PhoneGap jQueryMobile 列表视图未在辅助页面上正确显示

> ID：14577836
> 
> 赞同：1
> 
> 时间：2013-01-29T07:34:40.007
> 
> 标签：jquery, listview, cordova, jquery-mobile

我正在使用 jQueryMobile 开发一个 PhoneGap 应用程序。我的问题是`listview`在相册页面上没有正确显示，而是在主页上。我`data-theme`对两者都使用相同的。

**问题：**为什么第二页的列表视图显示不正确（背景、字体、图标）？

**研究：**

1.  [关于缩略图列表视图的 jQueryMobile 文档（我想要完成的工作）](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-thumbnails.html)
2.  [`listview`关于api的 jQueryMobile 文档](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)
3.  [谷歌搜索并找到了一个关于如何做到这一点的教程（没有变化）](http://blog.safaribooksonline.com/2012/02/08/jquery-mobile-tip-adding-thumbnails-and-icons-to-list-views/)

**专辑页面代码**

```
 <div data-role="page" id="albums" data-url="albums" data-theme="a">
        <div data-role="header">
            <a href="#home" data-role="button" data-corners="true" data-shadow="true">Back</a>
            <h1>Albums</h1>
            <button id="albums-refresh">Refresh</button>
        </div>
        <div data-role="content">
            <ul id="albums-content" data-role="listview" data-inset="true"></ul>
        </div>
    </div> 
```

**jQuery函数动态填充`listview`**

```
Load: function () {
    $("#albums-content").empty();
    $.ajax({type: "GET", url: "https://itunes.apple.com/lookup?id=356541460&entity=album", data: {get_param: "results"}, dataType: "json", success: function (data) {$.each(data, function (index, element) {$.each(this, function (index, element) {if (element.wrapperType === "collection") {$("#albums-content").append("<li><a id='a-" + index + "' href='#album-details'><img src='" + element.artworkUrl100 + "' />" + element.collectionName + "</a>"); $("#a-" + index).bind('click', function (index) {Albums.AlbumID = index; }); }}); }); }});
} 
```

**PhoneGap 调试：**

![在此处输入图像描述](../Images/31698defcf6abf9c328736cb8f4fab36.png)

**专辑页面** *请注意，紫色背景和橙色文本不存在，但您可以在第二张专辑下方看到淡淡的`listview`阴影暗示。*

![在此处输入图像描述](../Images/c64e911a35f5e5a21c575437a56bffe9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:44:05.590

在 ajax 调用的成功函数中，您需要调用 listview 元素的 refresh 方法，以便正确更新和呈现 UI。

[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:40:40.080

您必须确保的一件事：将所有内容附加到列表视图后，您必须添加以下代码

```
$("ul#albums-content").listview("refresh"); 
```

这是为了更新样式并创建添加的任何嵌套列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T08:41:18.300

这个问题有一个简单的解决方案（下次进一步查看 jQM 文档）。

当在列表视图中动态创建对象时，**`jQuery Mobile`**它的标记也需要像这样增强：

```
$('#some-listview').listview('refresh'); 
```

基本上每次将动态内容添加到 jQuery Mobile 页面时都需要手动增强。如果您想了解有关此主题的更多信息，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**。或者你可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

# lucene - 删除所有记录中的字段及其内容并使用新映射重新创建它

> ID：14577837
> 
> 赞同：0
> 
> 时间：2013-01-29T07:34:43.597
> 
> 标签：lucene, elasticsearch

`field10`当我更新索引中的特定记录时，我有一个意外创建的字段。我想从我的索引中删除该字段及其所有内容并使用以下映射重新创建它：

```
"mytype":{
  "properties":{
    "field10":{ 
      "type":"string",
      "index":"not_analyzed",
      "include_in_all":"false",
      "null_value":"null"      
    }  
  }  
} 
```

当我尝试使用 Put Mapping API 创建此映射时，出现错误：`{"error":"MergeMappingException[Merge failed with failures {[mapper [field10] has different index values, mapper [field10] has different index_analyzer, mapper [field10] has different search_analyzer]}]","status":400}`.

如何更改此字段的映射？我不想仅仅为了这个小事故重新索引数百万条记录。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:10:19.657

AFAIK，您不能删除单个字段并重新创建它。您不能只修改映射并自动重新索引所有内容。想象一下，您不存储`_source`. Elasticsearch 如何知道您的数据在被索引之前的样子？

但是，您可以`field10.field10`使用旧映射和`field10.new`新分析器使用多字段修改映射。

如果您不重新索引，则只有新文档的内容才会在`field10.new`. 如果要管理旧文档，则必须：

*   再次发送您的所有文档（它将更新所有内容） - 也就是重新索引（您可以使用扫描和滚动 API 来获取您的旧文档）
*   尝试使用[更新 API更新您的文档](http://www.elasticsearch.org/guide/reference/api/update.html)

您可能可以尝试运行如下查询：

```
curl -XPOST localhost:9200/crunchbase/person/1/_update -d '{
    "script" : "ctx._source.field10 = ctx._source.field10"
}' 
```

但是，如您所见，您必须逐个文档地运行它，我认为这比使用 Bulk API 重新索引所有内容要花费更多时间。

它有帮助吗？

# android - android google maps api v2 自定义标记 onMarkerClick 不起作用

> ID：14577839
> 
> 赞同：2
> 
> 时间：2013-01-29T07:34:49.293
> 
> 标签：android, google-maps-android-api-2

在创建带有自定义图标的自定义标记时，当您在 2-3 次后单击标记时，地图不会触发 onMarkerClick 事件或任何其他事件（如 onMapClick 等）。这是一个错误还是有任何类型的解决方案为了那个原因 ？

为了清楚起见，场景如下：1）您处于某个缩放级别 2）您按下放大到 X 缩放级别的标记，显示信息窗口 3）在您的最后一个缩放级别（不移动在地图上）你只需在同一个标​​记上再次按下，一切正常 4）你再次按下它，没有任何反应，信息窗口消失了，直到你不会在地图上移动，你不能与标记交互

# python - Python 如何使用 map() 将列表拆分为子列表？

> ID：14577843
> 
> 赞同：3
> 
> 时间：2013-01-29T07:35:08.887
> 
> 标签：python, reduce

我有这个函数可以按长度、填充值和填充方向将可迭代对象拆分为子列表：

```
def split(v,size,fill=0,direction='right'):
    if size == 0: return []
    lenv = len(v)
    count = lenv/size
    remainder = lenv%size
    result = []
    for i in range(0,lenv-remainder,size):
            result.append(v[i:i+size])
    if remainder > 0:
            if direction == 'right':
                    result.append(v[count*size:] + [fill] * (size-remainder))
            else:
                    result.append([fill] * (size-remainder) + v[count*size:])
    return result 
```

因为我喜欢一个班轮我想用地图重写它，但我不明白如何。到目前为止我有这个：

```
def j1(a,b): 
        return a + b 

def j2(a,b): 
        return b 

def split2(v,size,fill=0): 
        map(j1,(x for x in map(j2,v))) 
```

我不知道。有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T07:40:05.957

我相信你想太多了。这个问题可以使用[石斑鱼配方](http://docs.python.org/2/library/itertools.html#recipes)适当地处理，而无需使用`map`

```
def split1(v,size,fill=0,direction='right'):
    result = list(izip_longest(*[iter(l)]*size, fillvalue=fill))
    if direction == 'left':
        result[-1] = result[-1][::-1]
    return result 
```

解释：

*   [iter](http://docs.python.org/2/library/functions.html#iter)：此函数将序列转换为可迭代对象。Iterables 是自消费的，只有一个方法，`next`它从可迭代对象中返回下一个元素，从左到右移动。
*   `[iter(l)]*size`: 创建一个`size`可迭代的列表
*   [* (Kleene star)](https://stackoverflow.com/questions/3480184/unpack-a-list-in-python) : 此操作符用于解包列表或元组
*   [izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)：转置元素。对于较短的序列，它由填充值填充
*   `result[-1] = result[-1][::-1]`：如果方向`left`与最后一个序列相反

没有石斑鱼的另一种可能的流行解决方案是

```
def split2(v,size,fill=0,direction='right'):
    result = [v[i:i+size] for i in range(0,len(v),size)]
    result[-1] = result[-1] + [fill] * (size - len(result[-1]))
    if direction == 'left':
        result[-1] = result[-1][::-1]
    return result 
```

解释：

*   使用 Python 的[扩展切片](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)。序列切片具有以下语法`[start: end: stride]`
*   Python Range 返回一个列表（在 Py2.x 中）和一个范围对象（在 Py 3.x 中）作为 sequence/iterable ，从 开始`start`，结束于`end`和步进`stride`元素。如同`(for int i = start; i < stop; i+= stride)`
*   `[fill] * (size - len(result[-1]))`：`(size - len(result[-1]))` `fill`将元素生成为列表。如果`(size - len(result[-1]))`<=0 则生成一个空列表
*   `result[-1] = result[-1] + [fill] * (size - len(result[-1]))`- 用填充值更新最后一个序列
*   `result[-1] = result[-1][::-1]`：如果方向`left`与最后一个序列相反

# html - div内的跨浏览器文本流

> ID：14577847
> 
> 赞同：0
> 
> 时间：2013-01-29T07:35:24.940
> 
> 标签：html, css

你如何让一些文本在`div`不打断单词的情况下流动？我可以在 Safari 和 Chrome 上实现，但不能在 MS IE 或 Firefox 上实现。

Safari/Chrome 输出示例：

> 将进行应急照明调查。应急照​​明系统
> 应由合格的电气工程师检查，检查后的任何建议
> 均应执行。

MS IE/Firefox 输出示例：

> 将进行应急照明调查。应急
> 照​​明系统应由合格的电气工程师进行检查，并执行检查后的
> 任何建议
> 。

使用的代码：

```
<div style="width: 100%; word-break:break-word">
    <p><?php echo $row['observation']; ?></p>
</div> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:10:41.257

从[5.3 开始。字母打破规则：'word-break'属性](http://www.w3.org/TR/css3-text/#word-break)，没有价值`break-word`。但是，您有[6.2。溢出包装：'word-wrap'/'overflow-wrap' 属性](http://www.w3.org/TR/css3-text/#overflow-wrap)，它提供`break-word`

> 名称：overflow-wrap/word-wrap
> 值：正常 | break-word
> ...
> '<strong>break-word'<br> 如果行中没有其他可接受的断点，则不可破坏的“单词”可能会在任意点被破坏。塑造字符仍然像单词没有被破坏一样被塑造，并且字素簇必须一起保持为一个单元。在断点处不插入连字符。

# python - 如何在 Heroku 上部署 tornado chatdemo.py (facebook) 应用程序

> ID：14577852
> 
> 赞同：0
> 
> 时间：2013-01-29T07:35:48.620
> 
> 标签：python, heroku, webserver, hosting, tornado

我只想在 Heroku 上运行 Tornado - Facebook（聊天演示）中提供的 helloworld 应用程序。

我怎么能用 Python 做到这一点？

我只是在 Heroku 上测试了一个烧瓶应用程序，但该程序不适用于 Tornado。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:19:20.983

你检查过这些资源吗？

*   [我如何在 10 秒内让 Tornado 应用程序在 Heroku 上运行](http://log.liminastudio.com/programming/how-i-got-a-tornado-app-running-on-heroku-in-10-seconds)
*   [Tornado Heroku 助手](https://github.com/virgildisgr4ce/Tornado-Heroku-Helpers)

# android - “如果设备连接到 GCM”是什么意思

> ID：14577853
> 
> 赞同：4
> 
> 时间：2013-01-29T07:35:52.047
> 
> 标签：android, google-cloud-messaging

我需要在我的一个应用程序中实现推送通知功能。[我在这里](http://developer.android.com/google/gcm/adv.html#unreg)浏览了 android 文档 GCM Advance 主题。

在第二段即

“在最好的情况下，如果设备连接到 GCM，屏幕处于开启状态，并且没有节流限制（请参阅节流），则消息将立即传递。”

这里“如果设备连接到 GCM”是什么意思？这是否与互联网连接有关。

请分享您对此的看法，以便更好地理解。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:38:28.683

是的，它与互联网连接有关。

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。这可能是一条轻量级消息，告诉您的应用程序要从服务器获取新数据（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此即时消息等应用程序可以直接消费消息）。

更多[在这里](http://developer.android.com/google/gcm/index.html)。基本上上面这句话意味着它需要互联网连接。如果您进一步了解 GCM 相关链接，您将找到具有 Internet 权限的权限列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:43:23.300

GCM 代表“谷歌云消息”。所以“如果设备连接到 GCM”基本上意味着你的设备是：

1) 连接到互联网

2) 与 GCM 有活动连接，这意味着：

*   它没有被您的互联网提供商阻止
*   GCM 没有因为任何原因而宕机，即请求数量过多，这不太可能
*   由于 API 密钥不正确或其他原因，您的应用没有被 GCM 阻止
*   [...]

# sql - 更新行为

> ID：14577857
> 
> 赞同：4
> 
> 时间：2013-01-29T07:35:54.883
> 
> 标签：sql, sql-server, tsql

当我在更新查询文本中出错时，我发现了不可预测的查询结果。这是更新的查询文本。

```
DECLARE @T TABLE (Id int,[Name] nvarchar(100),RNA int)

INSERT INTO @T(Id,[Name])
SELECT [Id],[Name] 
FROM (VALUES (1,N'D'),
             (2,N'B'),
             (3,N'S'),
             (4,N'A'),
             (5,N'F')
     ) AS vtable([Id],[Name])

UPDATE @T
SET RNA = T.RN
FROM (
  select PP.Name,ROW_NUMBER() OVER(ORDER BY PP.Name) RN,PP.RNA from @T PP
) T

select * from @T 
```

我知道哪里出错了：

```
UPDATE @T 
```

应该

```
UPDATE T 
```

但是为什么结果（带有“坏”查询）看起来像：

```
Id   Name  RNA
---- ----- -------
1    D     1
2    B     5
3    S     1
4    A     5
5    F     1 
```

我怀疑 1 和 5 的值是 MIN(Id) 和 MAX(Id)。执行计划如下：

这种情况在每一种有这种错误的情况下都一样吗？

如果是，这种行为有什么实际价值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:19:18.707

对于每一种错误，情况都不会相同。您有一个不确定的更新语句，也就是说，理论上`RN`您的子查询`T`中的任何值都可以应用于`@T`. 您实际上正在运行以下`UPDATE`版本：

```
SELECT  *
FROM    @t a
        CROSS JOIN
        (   SELECT  TOP 1
                    PP.Name,
                    ROW_NUMBER() OVER(ORDER BY PP.Name) RN,
                    PP.RNA 
            FROM    @T PP
            ORDER BY NEWID()
        ) T
OPTION (FORCE ORDER); 
```

[在线手册](http://msdn.microsoft.com/en-us/library/ms177523.aspx)指出：

> 如果 UPDATE 语句包含未指定的 FROM 子句，则该语句的结果是未定义的，即，如果 UPDATE 语句不是确定性的，则每个更新的列出现只有一个值可用。

稍微有趣的是，如果你运行上面的代码，你每次都会得到不同的结果（除非有 1/25 的机会连续两次得到相同的结果），如果你删除随机排序，`NEWID()`你会得到相同的值为`RN`每一行，但更新始终返回相同的结果，有 2 个不同`RN`的 s。我并不惊讶结果保持一致，没有随机排序，因为没有更改数据，也没有引入随机因素，我希望优化器无论运行多少次都能提出相同的执行计划。

由于更新查询中没有指定明确的顺序，因此顺序是由于叶子上记录的顺序，如果记录的顺序改变了，结果也会改变。这可以通过将 的记录插入`@T`到具有不同 ID 的新表中来显示

```
DECLARE @T2 TABLE (Id int,[Name] nvarchar(100),RNA int);
INSERT @T2 
SELECT  id, Name, NULL
FROM    @T
ORDER BY ROW_NUMBER() OVER(ORDER BY  NEWID())
OPTION (FORCE ORDER);

UPDATE @T2
SET RNA = T.RN
FROM (
  select PP.Name,ROW_NUMBER() OVER(ORDER BY PP.Name) RN,PP.RNA from @T2 PP
) T

SELECT  *
FROM    @T2; 
```

我看不出为什么这始终是最小值或最大值，`RN`但我希望您必须深入研究优化器才能找到它。这可能是一个更适合[dba 堆栈交换](http://dba.stackexchange.com)的新问题。

# android - Android：尝试录制视频时“启动失败 -12”

> ID：14577867
> 
> 赞同：0
> 
> 时间：2013-01-29T07:36:56.387
> 
> 标签：android, video, camera

我有一个活动，它有一个按钮，按下时开始录制视频。当 MediaRecorder.start(); 执行时，出现“启动失败”异常。

> ```
> camera.unlock();
> mediaRecorder.setCamera(camera);
> mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
> mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
> mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
> mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
> mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
> mediaRecorder.setOutputFile(filename);
> mediaRecorder.setPreviewDisplay(mSurfaceView.getHolder().getSurface());
> 
> try
> {
>   mediaRecorder.prepare();
> }
> catch (Exception ex)
> {
>   ReleaseMediaRecorder();
>   return false;
> } 
> ```
> 
> mediaRecorder.start();

显现：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO" /> 
```

日志猫

```
01-29 08:48:44.479: D/AudioRecord(799): set(): sampleRate 8000, channels 16, frameCount 4096
01-29 08:48:44.499: W/AudioHardwareMSM76XXA(799): rpc_snd_set_device(6, 1, 1)
01-29 08:48:44.519: I/QualcommCameraHardware(799): setRecordSize: preview dimensions: 176x144
01-29 08:48:44.519: I/QualcommCameraHardware(799): setRecordSize: video dimensions: 176x144
01-29 08:48:44.529: I/QualcommCameraHardware(799): Parameter Rolloff is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Parameter MCE is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Sharpness not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Saturation not supported for this sensor
01-29 08:48:44.529: E/QualcommCameraHardware(799): Parameter Scenemode is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Contrast not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Parameter AntiBanding is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): setRedeyeReduction: setting Redeye Reduction value of disable
01-29 08:48:44.529: E/CAM_FD(799): config_proc_CAMERA_SET_REDEYE_REDUCTION: mode =0
01-29 08:48:44.529: E/CAM_FD(799): config_proc_CAMERA_SET_REDEYE_REDUCTION: FAILED
01-29 08:48:44.529: E/QualcommCameraHardware(799): native_set_parms failed: type 50 length 1 error Unknown error: 0
01-29 08:48:44.529: E/QualcommCameraHardware(799): Wavelet Denoise is not supported for this sensor
01-29 08:48:44.529: E/QualcommCameraHardware(799): FPS Range Values: 5000x31000
01-29 08:48:44.529: I/QualcommCameraHardware(799): Set fps is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): set fps mode is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Auto Exposure not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): Exposure Compensation is not supported for this sensor
01-29 08:48:44.529: I/QualcommCameraHardware(799): setFlash: flash not supported
01-29 08:48:44.529: I/QualcommCameraHardware(799): Set Brightness not supported for this sensor
01-29 08:48:44.529: E/QualcommCameraHardware(799): Parameter ISO Value is not supported for this sensor
01-29 08:48:44.539: I/QualcommCameraHardware(799): setHighFrameRate: setting HFR value of off(1)
01-29 08:48:44.539: E/StagefrightRecorder(799): Failed to set frame rate to 20 fps. The actual frame rate is 31
01-29 08:48:44.559: E/VENC_OMX(799): OMX_VENC_MSG_HIGH Venc::203 OMX-ENC:-constructor
01-29 08:48:44.559: E/VENC_OMX(799): OMX_VENC_MSG_HIGH component_init::308 Initializing component OMX.qcom.video.encoder.h263
01-29 08:48:44.559: E/(799): OMX_VENC_MSG_HIGH VencMsgQ::133 Mutex created for VencMsgQ 0x80018
01-29 08:48:44.559: E/(799): OMX_VENC_MSG_HIGH VencMsgQ::142 Signal created for VencMsgQ 0x80028
01-29 08:48:44.559: E/VENC_ENC(799): VENC_MSG_HIGH venc_sys_up::4647 Bringing system up
01-29 08:48:44.559: E/VENC_ENC(799): VENC_MSG_HIGH venc_load::1118 Received command VENC_CMD_LOAD
01-29 08:48:44.569: E/VENC_ENC(799): VENC_MSG_HIGH venc_thread_fn::4575 thread entry
01-29 08:48:44.569: E/VENC_ENC(799): VENC_MSG_HIGH venci_process_command::4472 Processing command VENC_CMD_LOAD
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH process_DL_status::4453 got DL status for VENC_CMD_LOAD
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1544 OMX_IndexParamStandardComponentRole
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::888 OMX_IndexParamVideoPortFormat
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::888 OMX_IndexParamVideoPortFormat
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1262 OMX_IndexParamVideoPortFormat
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::908 OMX_IndexParamPortDefinition
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1293 OMX_IndexParamPortDefinition
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::888 OMX_IndexParamVideoPortFormat
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1262 OMX_IndexParamVideoPortFormat
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::908 OMX_IndexParamPortDefinition
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1293 OMX_IndexParamPortDefinition
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::1004 OMX_IndexParamVideoH263
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::1032 OMX_IndexParamVideoProfileLevelQuerySupported
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1449 OMX_IndexParamVideoH263
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::982 OMX_IndexParamVideoBitrate
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1362 OMX_IndexParamVideoBitrate
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::1105 OMX_IndexParamVideoErrorCorrection
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1428 OMX_IndexParamVideoErrorCorrection
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::908 OMX_IndexParamPortDefinition
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::1192 OMX_COMPONENT_CAPABILITY_TYPE_INDEX
01-29 08:48:44.569: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::1202 Supporting capability index in encoder node
01-29 08:48:44.859: D/AudioRecord(799): start
01-29 08:48:44.859: D/AudioFlinger(799): RecordThread::start
01-29 08:48:44.859: W/AudioHardwareMSM76XXA(799): rpc_snd_set_device(6, 1, 1)
01-29 08:48:45.169: D/MediaPlayer(799): seekTo 0 state 8
01-29 08:48:45.169: V/MediaPlayerService(799): getDuration
01-29 08:48:45.169: V/MediaPlayerService(799): [19] getDuration = 464
01-29 08:48:45.169: D/MediaPlayerService(799): [19] seekTo(0)
01-29 08:48:45.169: V/MediaPlayerService(799): [19] notify (0x924d0, 4, 0, 0)
01-29 08:48:45.169: D/MediaPlayer(799): start state 8
01-29 08:48:45.169: V/MediaPlayerService(799): [19] setLooping(0)
01-29 08:48:45.169: V/MediaPlayerService(799): [19] setVolume(1.000000, 1.000000)
01-29 08:48:45.169: V/AudioSink(799): setVolume(1.000000, 1.000000)
01-29 08:48:45.169: V/MediaPlayerService(799): [19] setAuxEffectSendLevel(0.000000)
01-29 08:48:45.169: V/AudioSink(799): setAuxEffectSendLevel(0.000000)
01-29 08:48:45.169: V/MediaPlayerService(799): [19] start
01-29 08:48:45.169: E/AwesomePlayer(799): AudioPlayer created, Non-LPA mode mime audio/vorbis duration 463938
01-29 08:48:45.169: D/AudioSink(799): flush
01-29 08:48:45.169: V/AudioSink(799): open(44100, 2, 1, 4, 27)
01-29 08:48:45.169: D/AudioTrack(799): Request AudioFlinger to create track
01-29 08:48:45.169: D/AudioFlinger(799): createTrack() lSessionId: 27
01-29 08:48:45.169: D/AudioFlinger(799): Track constructor name 4098, calling thread 799
01-29 08:48:45.169: V/AudioSink(799): setVolume
01-29 08:48:45.169: D/AudioSink(799): start
01-29 08:48:45.169: D/AudioTrack(799): start 0x796f0
01-29 08:48:45.179: D/AudioFlinger(799): start(4098), calling thread 799 session 27
01-29 08:48:45.179: E/AudioHardwareMSM76XXA(799): setVoiceVolume(0.200000)
01-29 08:48:45.179: E/AudioHardwareMSM76XXA(799): Setting in-call volume to 1 (available range is 1 to 6)
01-29 08:48:45.209: I/QualcommCameraHardware(799): startRecordingInternal: E
01-29 08:48:45.209: V/MediaPlayerService(799): [19] notify (0x924d0, 4, 0, 0)
01-29 08:48:45.209: E/VENC_OMX(799): OMX_VENC_MSG_HIGH get_parameter::908 OMX_IndexParamPortDefinition
01-29 08:48:45.209: E/VENC_OMX(799): OMX_VENC_MSG_HIGH set_parameter::1293 OMX_IndexParamPortDefinition
01-29 08:48:45.209: E/VENC_OMX(799): OMX_VENC_MSG_HIGH use_buffer::2091 client allocated input buffer for component 38016
01-29 08:48:45.209: E/VENC_OMX(799): OMX_VENC_MSG_ERROR use_buffer::2094 buffer size does not match our requirements: client ask for(460800) and we require (38016)
01-29 08:48:45.209: E/OMXNodeInstance(799): OMX_UseBuffer failed with error -2147479547 (0x80001005)
01-29 08:48:45.209: E/OMXCodec(799): allocate_buffer_with_backup failed
01-29 08:48:45.209: E/OMXCodec(799): Allocate Buffer failed - error = -2147483648
01-29 08:48:45.299: W/MPEG4Writer(799): notify Completion track:0
01-29 08:48:45.299: D/AudioRecord(799): stop
01-29 08:48:45.299: D/AudioFlinger(799): RecordThread::stop
01-29 08:48:45.309: V/MediaPlayerService(799): [19] notify (0x924d0, 2, 0, 0)
01-29 08:48:45.309: D/AudioSink(799): stop
01-29 08:48:45.309: D/AudioTrack(799): stop 0x796f0
01-29 08:48:45.309: D/AudioFlinger(799): stop(4098), calling thread 799
01-29 08:48:45.439: W/AudioHardwareMSM76XXA(799): rpc_snd_set_device(6, 1, 1)
01-29 08:48:45.449: E/MediaRecorder(574): start failed: -12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:55:38.157

`start()`应该在方法之后调用`prepare()`。MediaRecorder 的生命周期在[这里](http://developer.android.com/reference/android/media/MediaRecorder.html)。`IllegalStateException`如果之前调用start 方法，则抛出`prepare().`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:05:01.750

以下解决了该问题：

```
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 
```

# android - 在 C++ OpenCV 中查找倾斜角度并旋转图像

> ID：14577874
> 
> 赞同：1
> 
> 时间：2013-01-29T07:37:27.523
> 
> 标签：android, opencv

需要帮助，请看下面的问题，我第二次问这个问题，因为上次我没有得到任何答案。考虑以下两个链接 => [1:=> 查找倾斜角度](http://felix.abecassis.me/2011/09/opencv-detect-skew-angle/) [2:=> 根据倾斜角度旋转图像](http://felix.abecassis.me/2011/10/opencv-rotation-deskewing/)

我也想做同样的事情，并且此链接上给出的代码效果很好。但问题是，查看这些图像中显示的文本，此代码仅适用于对齐良好的文本（如给定链接上的图像中显示的那样），但当您的文本分散形式时，它会失败。请告诉我如何处理包含分散形式文本的图像..？提前致谢..！！[这里的主要挑战是找到正确的倾斜角度..]因为这个问题我很沮丧......请帮助..!!!

我的代码如下：=>

```
// Find Skew angle.
double compute_skew(const char* filename)
{

    // Load in grayscale.
    cv::Mat img = cv::imread(filename, 0);

    // Binarize
    cv::threshold(img, img, 225, 255, cv::THRESH_BINARY);

    // Invert colors
    cv::bitwise_not(img, img);

    cv::Mat element = cv::getStructuringElement(cv::MORPH_RECT, cv::Size(5, 3));
    cv::erode(img, img, element);

    std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = img.begin<uchar>();
    cv::Mat_<uchar>::iterator end = img.end<uchar>();
    for (; it != end; ++it)
        if (*it)
            points.push_back(it.pos());

    cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

    double angle = box.angle;
    if (angle < -45.)
        angle += 90.;

    cv::Point2f vertices[4];
    box.points(vertices);
    for(int i = 0; i < 4; ++i)
        cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(255, 0, 0), 1, CV_AA);

    std::cout << "File **************Angle***************** " << filename << ": " << angle << std::endl;

    return angle;
}

// Rotate Image  according to skew angle.
void deskew(const char* filename, double angle)
{
    cv::Mat img = cv::imread(filename, 0);

    Point2f src_center(img.cols/2.0F, img.rows/2.0F);
    Mat rot_mat = getRotationMatrix2D(src_center, angle, 1.0);
    Mat rotated;
    warpAffine(img, rotated, rot_mat, img.size(), cv::INTER_CUBIC);

    imwrite(filename,rotated);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:56:29.327

如果您的文本分散，这种方法注定会失败，因为它依赖于查找长文本行。此外，在这种情况下，术语“倾斜”有点不幸，因为在发布的示例中它是纯粹的旋转。

我要做的是在一系列方向上进行线投影（cfr. Radon 变换或 Hough 线搜索）。当您的线投影具有正确的方向时，由于行间间隙导致的线投影中会有很多零。在投影中产生最多零值的方向是文本最可能的旋转角度。

# mysql - 如何在 phpmyadmin 中显示超过 50 列

> ID：14577876
> 
> 赞同：0
> 
> 时间：2013-01-29T07:37:30.167
> 
> 标签：mysql, sql, phpmyadmin

我正在使用 phpMyAdmin 3.5.2.2

我的表中有 70 列。但是当我尝试使用 phpMyAdmin 浏览时，只会显示 50 列。有什么办法可以显示所有列。

# c# - 进度条的运行时间少于定义的时间 - 继续上一篇文章

> ID：14577877
> 
> 赞同：0
> 
> 时间：2013-01-29T07:37:32.950
> 
> 标签：c#, winforms

这是我之前的帖子：[进度条运行时间少于定义的时间](https://stackoverflow.com/questions/14575359/progress-bar-run-less-time-than-defined)

所有的答案是我不需要将毫秒除以 100，当我尝试这个解决方案时，进度条运行速度变慢，不像第一次运行速度很快，但我认为我需要将毫秒除以 100从进度应该运行的总 100% 中设置每 1%。例如，如果我希望我的进度条将运行 10 秒，那么我将 10000 / 10 每 1%（或计时器滴答）除以 100 毫秒，所以即使我将其配置为 100 它仍然很快

```
void bittwist_progBarEventHandler(object sender, EventArgs e)
{
    this.Invoke((MethodInvoker)delegate { AnimateProgBar((int)sender); });
}

public void AnimateProgBar(int milliSeconds)
{
    if (!timerProgress.Enabled)
    {
        this.Invoke((MethodInvoker)delegate { pbStatus.Value = 0; });
        timerProgress.Interval = milliSeconds / 100;
        timerProgress.Enabled = true;
    }
}

private void timerProgress_Tick(object sender, EventArgs e)
{
    if (pbStatus.Value < 100)
    {
        pbStatus.Value += 1;
        pbStatus.Refresh();
    }
    else
    {
        timerProgress.Enabled = false;
    }
} 
```

例如`milliSeconds == 10000`进度条只运行 7 秒

# ruby-on-rails - 如何使用 Rails / Ruby 评估百分比？

> ID：14577879
> 
> 赞同：1
> 
> 时间：2013-01-29T07:37:42.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

在 application.helper 我试图这样做。
但是它总是得到0。为什么？

我想要 37% 49% 98%
总是整数。没有浮动

```
def evaluate(number_of_people)
    percentage = ((number_of_people / 10000) * 100 ).truncate
    "<div class='percentage'>Percentage is #{percentage}%</div>".html_safe
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:41:13.063

您正在除以一个整数，因此 3000 / 10000 的结果将为 0。

除以 10000.0 以强制进行小数运算。

所以改变这个：

```
percentage = ((number_of_people / 10000) * 100 ).truncate 
```

对此：

```
percentage = ((number_of_people / 10000.0) * 100 ).to_i 
```

如果您的分母（在这种情况下为 10000 值）是一个变量，您可以在除法之前使用 to_f 将其转换为浮点数。

# jquery - 在 jQuery 1.8 上使用 async: false

> ID：14577880
> 
> 赞同：0
> 
> 时间：2013-01-29T07:37:41.697
> 
> 标签：jquery

我想知道我使用 async:false 编写 ajax 函数的方式在 jQuery 1.8 上是否可行？

```
function GetLoginUrl(CloudStorageName) 
{
    var res;
    $.ajax({
        url: '@Url.Action("GetUrl", "Cloud")',
        data: { CloudName: CloudeName },
        datatype: 'json',
        type: 'post',
        async: false,
        success: function (result) {
            res = result;
        },
        error: function (response) 
        { 
            OpenAlertDialog('@ErrorMsg.CloudErrMsg');
        }
    });

    return res;
} 
```

如果可以，您能否举一个已弃用的 ajax 调用的示例？

# c# - 如何在 C# winform 应用程序中的 2 个单独线程上制作 2 个表单

> ID：14577885
> 
> 赞同：0
> 
> 时间：2013-01-29T07:37:51.730
> 
> 标签：c#, winforms, multithreading, c#-4.0, backgroundworker

我正在我的 C# 4.0 winform 应用程序中开发一个接口，以批量发送一些短信。每条消息内容都不一样，所以我必须一条一条地触发消息。我有一个最终用户可以发送短信的表格，它可能超过一千个。

我想管理一个队列。如果用户发送一条短信，那么它将被提交到队列中，队列将一一发送短信。

所以我必须创建一个表单来管理队列。问题是我希望我的应用程序正常工作，并且队列在后台发送短信。

那么我怎样才能完成这个任务呢？我试过`BackGroundWorker`了，但我不知道如何用表单维护一个单独的线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:41:59.747

所有表单都必须在 UI 线程上。SMS的发送应该由`BackgroundWorker.DoWork`事件来执行。然后通过`BackgroundWorker.RunWorkerCompleted`事件完成表单的更新。

UI线程是SWF（winforms）应用程序的主线程

如果您使用的是 C# 4.0 或更高版本，您可能还想研究 Take Parallel Library ( [http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx) )。但我会首先让 BackgroundWorker 实现工作。然后使用 TPL 发送同步短信。真的可以加快速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:23:14.123

您必须创建一个线程（称为工作线程），它会在您的应用程序的整个生命周期中运行。

你必须有一个队列甚至更好的并发队列[http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

当队列中出现一个项目（短信）时，工作线程等待，获取该项目并完成其工作。

UI 与该工作完全分离。

这是 Thread 类的最基本用法。

后台工作者是最不适合的解决方案。显然你可以用洗衣机盖房子，但大多数人用砖头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:57:42.260

您可以启动 Thread 然后在其上创建新的表单实例（没有父级），然后启动消息循环（此类代码位于项目模板的 Main 方法中）。请记住，任何形式（通常是任何 GDI 对象）都只能在创建它的线程上使用。例如，您不能在另一个线程上创建子窗体，然后是父线程。每个 GUI 线程都必须运行消息循环。

# c - C - 释放一定数量的内存 (char**)

> ID：14577900
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:38:59.567
> 
> 标签：c, arrays, memory, free

我必须安全地释放一个数组：`char** a;`它就像一个字符串列表。我知道我有多少`char*`。但是我很难释放所有的内存。有没有我可以使用的函数来释放 20 个字节？我试过：

```
for (int i = 0; i < length; i++)
    if (a[i] != null)
        free(a[i]); // some of a[i] ARE null, non-null have different sizes
free(a); // crashes here 
```

`asm`但我在调试时遇到运行时错误。a 中的所有内容都已分配。对于一个 I malloced 5 个字符串（每个指针 4 个字节）-> 20 个字节。我怎样才能释放整个`char**`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T07:40:26.340

除非分配 20 个字节，否则不能释放 20 个字节。你只能释放一个块。该块的大小在分配时指定。对于分配的每个块，您需要单独的取消分配。

您可以尝试通过使用来更改块的大小，`realloc`但这不会删除该块的任意部分。

如果数组和数组中的单个项目都已使用 分配`malloc`，那么您的方法是正确的。释放每个元素，然后释放数组：

```
char **arr = malloc (10 * sizeof (char*));
if (arr != NULL)
    for (int i = 0; i < 10; i++)
        arr[i] = malloc (50 + i * 10); // sizes 50, 60, 70, ..., 140

// Use the ten X-character arrays here
//     (other than NULL ones from malloc failures, of course).

if (arr != NULL) {
    for (int i = 0; i < 10; i++)
        free (arr[i]);           // Okay to free (NULL), size doesn't matter
    free (arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:41:15.467

如果您已经正确分配了 char** 数组和它包含的指针的所有 char* 数组，那么您发布的代码应该可以工作。您的其余代码是什么样的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:55:43.260

您发布的代码没有任何问题。但是，如果您两次释放同一块内存，则可能会出现运行时错误。检查其余代码并确保您实际上分配了该数组中的所有内存，并且没有多次释放它。

# iphone - 在 iOS 5 中发送电子邮件时出错

> ID：14577907
> 
> 赞同：0
> 
> 时间：2013-01-29T07:39:31.553
> 
> 标签：iphone, ios, ios5, message

我正在使用`SKPSMTPMessage`文件发送邮件，但在发送电子邮件时显示以下错误

```
 Error Domain=SKPSMTPMessageError 
 Code=535 "Invalid username or password." 
 UserInfo=0xaa2de20 {NSLocalizedRecoverySuggestion=Go to Email Preferences in the application and re-enter your username and password., 
                     NSLocalizedDescription=Invalid username or password.} 
```

我应该在哪里更改用户名和密码？代码如下：

```
SKPSMTPMessage *msg = [[SKPSMTPMessage alloc] init];
msg.fromEmail = @"123456789s@gmail.com";
msg.toEmail = to;
msg.relayHost = @"smtp.gmail.com";
msg.requiresAuth = YES;
msg.login = @"123456789@gmail.com";
msg.pass = @"123456789//";
msg.wantsSecure = YES; // smtp.gmail.com doesn't work without TLS!
msg.subject = [NSString stringWithFormat:@"Check Out %@ by Docstoc", self.navigationItem.title];
msg.delegate = self;

NSMutableArray *msg_parts = [NSMutableArray array];

NSDictionary *plain_text_part = [NSDictionary dictionaryWithObjectsAndKeys:
                                 @"text/html\r\n\tcharset=UTF-8;\r\n\tformat=flowed", kSKPSMTPPartContentTypeKey,
                                 [message stringByAppendingString:@"\n"], kSKPSMTPPartMessageKey,                                         
                                 nil];
[msg_parts addObject:plain_text_part];
msg.parts = msg_parts;

[msg send]; 
```

注意：这是完美的工作代码。自上周以来，它一直在显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T07:02:18.693

请检查您的以下详细信息是否有效，

```
msg.login = @"123456789@gmail.com";
msg.pass = @"123456789//"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:57:23.657

尝试

`NSMutableArray`*msg_parts = [[ `NSMutableArray alloc]initWithArray`:array];

而不是 NSMutableArray *msg_parts = [NSMutableArray 数组];

# java - ibatis spring java.lang.NoSuchMethodError com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse

> ID：14577909
> 
> 赞同：0
> 
> 时间：2013-01-29T07:39:55.350
> 
> 标签：java, spring, exception, weblogic, mybatis

我在 weblogic 中部署时在 weblogic 10.3.6 中使用 spring 3.2.0 和 ibatis 2.3.4。

我得到这个 NoSuchMethodError 如下：

```
User defined listener org.springframework.web.context.ContextLoaderListener failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gatewayService' defined in ServletContext resource [/WEB-INF/applicationContext-granite-webservice.xml]: Cannot resolve reference to bean 'daoIPInventory' while setting bean property 'dao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoIPInventory' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Cannot resolve reference to bean 'sqlMapClient' while setting bean property 'sqlMapClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMapClient' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;.
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gatewayService' defined in ServletContext resource [/WEB-INF/applicationContext-granite-webservice.xml]: Cannot resolve reference to bean 'daoIPInventory' while setting bean property 'dao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoIPInventory' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Cannot resolve reference to bean 'sqlMapClient' while setting bean property 'sqlMapClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMapClient' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
        Truncated. see log file for complete stacktrace
Caused By: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoIPInventory' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Cannot resolve reference to bean 'sqlMapClient' while setting bean property 'sqlMapClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMapClient' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
        Truncated. see log file for complete stacktrace
Caused By: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlMapClient' defined in ServletContext resource [/WEB-INF/applicationContext-ip-ibatis-db.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
        Truncated. see log file for complete stacktrace
Caused By: java.lang.NoSuchMethodError: com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(Ljava/io/InputStream;Ljava/util/Properties;)Lcom/ibatis/sqlmap/client/SqlMapClient;
        at org.springframework.orm.ibatis.SqlMapClientFactoryBean.buildSqlMapClient(SqlMapClientFactoryBean.java:339)
        at org.springframework.orm.ibatis.SqlMapClientFactoryBean.afterPropertiesSet(SqlMapClientFactoryBean.java:292)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        Truncated. see log file for complete stacktrace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:06:09.367

看起来 Spring 3.2 与 iBatis 2.3.4 不兼容。

在[iBatis 2.3.4 SqlMapConfigParser](http://www.docjar.com/html/api/com/ibatis/sqlmap/engine/builder/xml/SqlMapConfigParser.java.html)没有方法#parse(InputStream, Properties)，但在较新版本的[myBatis 2.3.5](http://www.jarvana.com/jarvana/view/org/mybatis/mybatis/2.3.5/mybatis-2.3.5-sources.jar!/com/ibatis/sqlmap/engine/builder/xml/SqlMapConfigParser.java?format=ok)中它存在。

[MyBatis-Spring](http://www.mybatis.org/spring/)库版本中也可能存在问题。

不过，您应该更新 myBatis 的版​​本或找到合适的 Spring 或 Spring-iBatis 集成版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T07:07:05.543

检查你的项目中是否有 ibatis jar 文件和 mysql-connector jar 文件。并且你的控制器类名不应该是 controller.java

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T09:47:32.860

看起来您正在使用的 ibatis jar 没有带有这些参数的 parse 方法。反编译并查看jar是否解析了代码正在寻找的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T10:13:39.413

检查你的项目中是否有 ibatis jar 文件和 mysql-connector jar 文件。并且你的控制器类名不应该是 controller.java

对于您在 sqlMapConfig.xml 中编写的每个 sqlmap 文件，您的 sqlmap 命名空间名称应该是唯一的

在您的 sqlmap 文件中，所有标记都应明确定义。你应该提到parameterClass和resultClass。不能像这样空着离开。

选择 id="sampleid" parameterClass="" resultClass=""

您的查询

选择 id="sampleid"

你的问题

# java - 如何在 Java 中对泛型类型列表进行排序

> ID：14577910
> 
> 赞同：9
> 
> 时间：2013-01-29T07:39:57.303
> 
> 标签：java, generics, sorting

我有一组类都有一些共同的属性，所以我让它们都扩展了一个共同的基类，`BaseEntity`. 所以我有，例如`Foo extends BaseEntity`和`Bar extends BaseEntity`。

我还希望这些`Foo`和`Bar`对象的列表是可排序的，所以我实现了`Comparable`. 我将类定义为`Foo extends BaseEntity implements Comparable<Foo>`and ，并且s 或s`Bar extends BaseEntity implements Comparable<Bar>`列表的排序按预期工作 - 当然，排序的细节在不同的子类中是不同的。但是当我事先不知道我是否会有s 或s时，我无法弄清楚如何使我的排序工作。例如，此代码无法编译：`Foo``Bar``Foo``Bar`

```
public class UtilityClass<T extends BaseEntity> {

  ...bunch of stuff...

  List<T> values;

  public List<T> sort() {
    Collections.sort(values);
    return values;
  }

  ...more methods...
} 
```

带有错误消息`Bound mismatch: The generic method sort(List<T>) of type Collections is not applicable for the arguments (List<T>). The inferred type T is not a valid substitute for the bounded parameter <T extends Comparable<? super T>>`

我认为问题在于我正在尝试对`BaseEntity`对象列表进行排序，而`BaseEntity`它本身并没有实现`Comparable`. 但是现在我面临一个问题：使`BaseEntity`对象与其他`BaseEntity`对象具有可比性的唯一明智的事情是，但是当我添加`implements Comparable<BaseEntity>`到时`BaseEntity`，编译器告诉我我现在遇到了问题，因为我的`Foo`类正在尝试同时实现`Comparable<BaseEntity>`and `Comparable<Foo>`，这显然是不允许。

我知道我可以通过放弃`implements Comparable<Foo>`和只是实现来回避这个问题`Comparable<BaseEntity>`，但是我的`compareTo`方法将不得不进行丑陋的转换，我认为这正是使用泛型应该避免的那种问题。

我真正想做的是在签名中指定它的`BaseEntity`所有子类都将是`Comparable`，但仅限于同一子类的实例。

感激地接受任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T07:49:50.923

使用交集类型，如下所示：

```
public class MyList<T extends BaseEntity & Comparable<T>> {...} 
```

这指定 T 必须既是 a`BaseEntity` **又** `Comparable`是自身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T07:58:02.320

不使用`Collections.sort(List<T>)`，`Collections.sort(Lst<T>, Comparator<? extends T>)`改为使用。在比较器中写入比较代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:47:12.173

试试这个：

```
static <T extends Comparable<? super T>> sort(T[] array); 
```

这是完成任务的最通用规范。基本上，它断言 T 是一种可以与自身进行比较的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-23T12:16:35.763

你可以制作一个超级简单的排序方法，可以处理几乎任何 List 类型

```
public class Tools {

    public static <E> void sortList(List<E> list, Comparator<E> comparator) {
        Collections.sort(list, comparator); 
    }

    // Any other utility methods/resources you want in here

} 
```

这意味着只要给定的 List 和 Comparator 的类型相同，就可以调用此方法对任何 List 进行排序。即使没有您拥有的基类（BaseEntity），它也可以工作

# cocoa-touch - keywindow 在 iphone 6.0 模拟器中不起作用

> ID：14577915
> 
> 赞同：4
> 
> 时间：2013-01-29T07:40:15.750
> 
> 标签：cocoa-touch, ios6

```
[[[UIApplication sharedApplication] keyWindow] addSubview:myView]; 
```

上面的代码在 iPhone 5.1 模拟器中运行良好，但视图没有出现在 iPhone 6.0 模拟器中。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T20:39:08.953

您必须将 makeKeyAndVisable 发送到您想要添加子视图的任何窗口。像这样：

```
[[self window] makeKeyAndVisible];

[[[UIApplication sharedApplication] keyWindow] addSubview:view]; 
```

关键窗口是接收用户交互的窗口。[您可以在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html "这里")查看苹果文档以获取 makeKeyAndVisable。

# r - 使用替换的组标签的排列分析

> ID：14577920
> 
> 赞同：0
> 
> 时间：2013-01-29T07:40:29.517
> 
> 标签：r, statistics, permutation, resampling

我有一个数据集（两组，重复）。我的数据根据​​组进行拆分，因此我在第 1 组中有 24 个样本，在第 2 组中有 20 个样本。我的数据有重复。所以每组有 4 个重复，因此我在第 1 组中有 6 组，在第 2 组中有 5 组。因此，我为它们分配了索引，以便在排列过程中更容易（索引从 1-11）。我现在要做的是常规排列分析以获得检验统计量。我正在使用带有替换重采样的非参数方法。

我正在尝试排列组标签。我的零假设是两组之间的平均值没有差异。我在 R 编码中的疑问\问题是我必须将数据集中在一起，然后重新采样组。当我尝试这样做时，我必须确保保持各个组的样本大小（即在对组标签进行重新采样后，我的新数据集仍应包含第 1 组中的 6 组（24 个样本）和 5 组（20 个样本） ) 在第 2 组中。我无法达到后者。

我怎样才能在 R 中实现这一点？

# iphone - iphone子视图不响应点击事件

> ID：14577922
> 
> 赞同：0
> 
> 时间：2013-01-29T07:40:30.857
> 
> 标签：iphone, events, click, subview

我做了什么 ：

```
self.blsController = [self.storyboard instantiateViewControllerWithIdentifier:@"nextPage"];
    self.blsController.view.frame= CGRectMake(self.blsController.view.frame.size.width , 0, self.blsController.view.frame.size.width, self.blsController.view.frame.size.height);
    [self.blsController.view setUserInteractionEnabled:YES];
    [self.view addSubview:self.blsController.view ]; 
```

我移动了父视图以显示子视图，

```
self.view.center = pollPoint; 
```

但子视图没有响应点击事件

我试过了 ：

> 1.  [self.blsController.view setUserInteractionEnabled:YES];
>     
>     
> 2.  在子视图控制器中添加 touchesEnded 但它们不起作用，请告诉我为什么以及如何处理。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:51:47.043

你不应该移动父视图本身，那么你将无法接触到它的任何子视图。如果用户将点击屏幕并且主视图不在屏幕上，那么子视图也不会收到触摸。

# ios - 如何在我所在位置的某个半径范围内找到使用我的应用程序的人

> ID：14577924
> 
> 赞同：0
> 
> 时间：2013-01-29T07:40:36.760
> 
> 标签：ios, objective-c, google-maps, xmppframework

嗨，我构建了应用程序以使用谷歌的 API 在我的位置的某个半径范围内查找所有酒吧和咖啡馆，现在我想在我的位置的某个半径范围内添加所有使用我的应用程序的人，在线和我的数据库中存在的个人资料数据（mySQL ) 到我的列表中，其中包含个人资料数据。任何想法如何开始这样做？使用 API google 还是使用 XMPP？还是另一种方式？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:04:43.200

您需要建立一个服务器，各个客户端可以在他们在线时签入并传输他们的位置。然后你需要有一个 API 来搜索给定半径周围的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:05:46.017

您可以参考[此处](https://stackoverflow.com/questions/4152003/how-can-i-get-current-location-from-user-in-ios)了解有关获取用户当前位置的信息。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude);
    NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
} 
```

当应用程序运行时，您必须需要一个 Web 服务来存储每个设备的位置，然后从您的应用程序向 Web 服务发送查询，从那里您将找到在所需范围或范围内使用该应用程序的设备列表。

虽然这不是一个非常优雅的解决方案，因为用户总是在轮询服务器，并且 Web 请求失败的频率可能比您想要的要高。我听说过套接字编程，用户与服务器保持实时连接，当服务器发生变化时，用户会收到通知，这听起来更像是正确的方法，但听起来更难：P

[在此处](https://stackoverflow.com/questions/12155753/any-demo-example-multiple-map-annotation-using-plist/12156477#12156477)查看我的答案以在 MAP 上显示多个注释。

# linux - 是否有任何 linux 脚本可用于将 nodejs 应用程序上传到我自己的 linux 服务器？像 appfog 或 heroku

> ID：14577925
> 
> 赞同：0
> 
> 时间：2013-01-29T07:40:53.663
> 
> 标签：linux, node.js, scripting, uploader

是否有任何 linux 脚本可用于将 nodejs 应用程序上传到我自己的 linux 服务器？像 appfog 或 heroku。我有专用的 linux 服务器并且也在 linux 上工作。

我想将我的 nodejs 应用程序上传到服务器并使用一个 shell 命令重新启动 nodejs。我可以写脚本，但也许不需要发明自行车？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:58:59.073

使用 SSH 的流行选择：

*   [rsync](http://rsync.samba.org/)
*   [织物](http://docs.fabfile.org/en/1.5/)

对于严肃的事情，你真的应该看看配置管理和服务器配置应用程序，比如（没有特别的顺序）：

*   [厨师](http://wiki.opscode.com/display/chef/Home)
*   [木偶](http://puppetlabs.com/)
*   [Ansible](http://ansible.cc/)（名字+1，“Enders Game”是我最喜欢的书之一）

大多数版本控制系统允许“提交后/提交前”挂钩；有时我使用这些钩子在之前运行测试并在提交后自动部署到验收环境。

另请参阅[Jenkins CI](http://jenkins-ci.org/)（持续集成是一个[热门话题](http://en.wikipedia.org/wiki/Continuous_integration)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:11:19.253

我使用子堆栈中的[舰队](https://github.com/substack/fleet)来管理部署。Fleet 是一个基于 git 的工具，允许您部署代码并管理在远程服务器上运行的节点进程。

添加[seaport](https://github.com/substack/seaport)和[bouncy](https://github.com/substack/bouncy)或[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)是构建由许多协同工作的小组件组成的应用程序的好方法。

# wordpress - 如何重置wordpress的配置

> ID：14577928
> 
> 赞同：0
> 
> 时间：2013-01-29T07:40:56.830
> 
> 标签：wordpress

我正在使用 wordpress 进行网站开发，并且我已经更改了一些设置，例如仪表板中的 Url，但我无法登录？如何恢复旧设置

# asp.net - 如何从 Web 服务或 Windows 窗体应用程序发布 Asp.net Web 应用程序（不是来自 Vs 编辑器）

> ID：14577934
> 
> 赞同：1
> 
> 时间：2013-01-29T07:41:17.560
> 
> 标签：asp.net, web-applications, publishing, dynamic-programming

我正在做一个项目，我们需要将我们的 Web 项目部署到服务器，但这些 Web 项目是由最终用户动态创建的。所以我们将 web 项目的所有文件收集在一个文件中。最后我们需要通过发布将这些文件推送到服务器。但是如果没有 VS 编辑器的手动发布选项，我该怎么办。你有任何网站或任何来源，我的目标，或者如果你知道它，你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:21:07.950

您可以在命令行模式下使用 Visual Studio 来执行相同的操作，但假设您可能无法访问 VS on，您的下一个赌注将是[MSBuild](http://msdn.microsoft.com/en-us/library/dd393574.aspx)。

请参阅这些链接，了解如何使用 MSBuild 发布 Web 项目：

[http://blog.m.jedynak.pl/2008/03/publishing-web-application-with-msbuild.html](http://blog.m.jedynak.pl/2008/03/publishing-web-application-with-msbuild.html)
[如何使用 MSBuild 发布 Asp.NET Web 应用程序？](https://stackoverflow.com/questions/48550/how-do-i-publish-a-asp-net-web-application-using-msbuild)

# ruby-on-rails - 不活动/空闲后自动注销

> ID：14577935
> 
> 赞同：23
> 
> 时间：2013-01-29T07:41:21.340
> 
> 标签：ruby-on-rails, authentication, devise

如何在 Rails 应用程序中设置如果任何用户空闲 30 分钟或特定时间段，他应该自动退出。任何人都可以给出任何解决方案。我正在使用设计进行身份验证。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T07:42:52.973

您应该使用[`Timeoutable`](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Timeoutable)模型特征。

> Timeoutable 负责判断用户会话是否已经过期。当会话在配置的时间后过期时，将再次要求用户提供凭据，这意味着他/她将被重定向到登录页面。
> 
> ### 选项
> 
> Timeoutable 为 devise_for 添加了以下选项：
> 
> *   +timeout_in+：无活动用户会话超时的时间间隔。

在您的模型中，您需要

```
devise :timeoutable
# along with :database_authenticatable, :registerable and other things. 
```

另外，看一下`config/initializers/devise.rb`，您可以在那里配置超时值。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-07T16:39:16.727

我知道这个问题已经得到解答，但我想我也会提供我的解决方案，因为在我的情况下，我正在寻找比 Devise 的可超时功能所能提供的更多的功能。非常感谢@Sergio Tulentsev 在他的回答的评论部分为我提供了有用的解释和想法！

## 问题

因为 Devise 在服务器端而不是客户端运行，所以当身份验证令牌超时时，客户端不会知道超时，直到用户执行调用 Rails 控制器的操作。这意味着用户不会在超时时重定向到登录页面，直到他们执行调用 Rails 控制器的操作。

就我而言，这是一个问题，因为我的网页包含用户敏感信息，如果用户忘记注销并且未在页面上执行任何操作，我不希望无限期地显示这些信息。

## 解决方案

我安装了 gem [auto-session-timeout](https://github.com/pelargir/auto-session-timeout)，它将代码添加到客户端以定期检查身份验证令牌是否已过期。

### 依赖项

自述文件中没有说，但自动会话超时需要[jquery-periodicalupdater](https://github.com/RobertFischer/JQuery-PeriodicalUpdater)才能工作。 [此页面](https://github.com/pelargir/auto-session-timeout/issues/2)包含原因： [![auto-session-timeout periodicalupdater 解释](../Images/873c967b0d16f594c8e2152c2f5784d2.png)](https://i.stack.imgur.com/JgV6t.png)

### 配置

以下是我为了让自动会话超时与 Devise 一起工作而采取的步骤：

1.  首先，我按照[此处](https://stackoverflow.com/a/31818869/4714425)的步骤自定义设计会话控制器。仅供参考，我的**config/routes.rb**文件是按以下方式设置的：

    ```
    Myapp::Application.routes.draw do
      devise_for :users, controllers: { sessions: "users/sessions" }
      #other routes
    end 
    ```

2.  在**app/controllers/users/sessions_controller.rb**，我有以下代码：

    ```
    class Users::SessionsController < Devise::SessionsController
      layout 'login' #specifies that the template app/views/layouts/login.html.erb should be used instead of app/views/layouts/application.html.erb for the login page

      #configure auto_session_timeout
      def active
        render_session_status
      end

      def timeout
        flash[:notice] = "Your session has timed out."
        redirect_to "/users/sign_in"
      end
    end 
    ```

3.  在**app/controllers/application_controller.rb**，我有以下代码：

    ```
    class ApplicationController < ActionController::Base
      # Prevent CSRF attacks by raising an exception.
      # For APIs, you may want to use :null_session instead.
      protect_from_forgery with: :exception
      before_action :authenticate_user!
      auto_session_timeout 30.minutes

    end 
    ```

    请注意，我们使用 auto_session_timeout 将身份验证令牌到期时间设置为 30 分钟。这取代了设计超时功能。

4.  在我的应用程序中，我有两个布局模板 - 一个用于用户登录时看到的所有页面（**app/views/layouts/application.html.erb**），一个仅用于登录屏幕（**app/views /layouts/login.html.erb**）。在这两个文件中，我在 html`<body>`元素中添加了以下行：

    ```
    <%= auto_session_timeout_js %> 
    ```

    此代码将生成 Javascript，每 60 秒检查一次身份验证令牌的状态（此时间间隔是可配置的）。如果令牌已超时，Javascript 代码将调用**app/controllers/users/sessions_controller.rb**文件`timeout`中的方法。

     **请注意，我已在**app/views/layouts/login.html.erb**页面上包含此代码。这样做的原因是因为如果登录页面超过 30 分钟没有活动（或者无论**application_controller.rb**`auto_session_timeout`文件中的设置如何），那么身份验证令牌将过期，并且用户将收到一个无效的身份验证令牌尝试登录时出错。添加代码将导致身份验证令牌过期时刷新登录，从而防止出现此错误。**`<%= auto_session_timeout_js %>`**** 

 ***** * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-18T13:39:34.613

**使用设计宝石：**

我们可以使用设计 gem 的内置功能，但它不会在超时后自动重定向到登录页面，重定向将在我们执行任何操作后完成。

**我们可以执行自动注销：**

通过使用 gem “自动会话超时”

[https://github.com/pelargir/auto-session-timeout](https://github.com/pelargir/auto-session-timeout)

使用这个 gem 的缺点是，如果用户在超时时间之前只输入（执行按键事件），它将自动注销。

*我们可以通过使用 Javascript 来克服这个缺点：*

**第 1 步：定义路线**

```
get 'application/session_time' 
```

**第 2 步：JavaScript 将包含**

```
$(document).ready(function(){
if($("#user_logged").is(":visible") == true )
{
    $(document).on( "keypress keydown", function () {
        console.log("hello");
        $.ajax({
            type:"GET",
            url:"/application/session_time",
            dataType:"html",
        });
    });
}
}); 
```

**第 3 步：应用程序控制器将包含：**

```
@session_time = 5.minute
auto_session_timeout @session_time
def session_time
  @session_time = 5.minute
end 
```

**Step 4: div 判断是否为登录页面**

```
<% if user_signed_in? %>
  <div id="user_logged"></div>
<% end %> 
```

保留空白 div 是因为我们必须仅在用户登录时加载 JavaScript，因此而不是查找当前用户是否为 nil。

我已经完成了空白 div，如果用户登录，它将可用，因此在 JavaScript 的开头检查 div_id "user_loged" 是否存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-01T00:57:33.757

有一种未提及的简单方法来处理此问题，不需要额外的 gem 或依赖项。

说`initializers/devise.rb`你已经设置`config.timeout_in = 30.minutes`并添加`:timeoutable`到你的模型中。当用户登录时，在页面加载时触发以下 javascript：

```
setAccurateTimeout(() => {
  window.location.reload();
}, 30 * 60 * 1000);  // minutes (from devise setting) * sec * ms

function setAccurateTimeout(callback, length) { 
  // adjust any discrepencies every 5s
  let speed = 5000,                
      steps = length / speed,                           
      count = 0,
      start = new Date().getTime();

  function instance() {
    if (count++ == steps) {
      callback();
    } else {
      // console.log(`step ${count} of ${steps}, time passed ${count * speed}ms of ${length}ms`)
      let diff = (new Date().getTime() - start) - (count * speed);
      // console.log(`accuracy diff ${diff}ms, adjusted interval: ${speed - diff}ms`);
      window.setTimeout(instance, (speed - diff));
    }
  }
  window.setTimeout(instance, speed);
} 
```

可能会使用常规`setTimeout`，即使随着时间的推移它会由于 CPU 使用率而引入不准确性。它可能会比预期的稍晚触发注销重新加载。

由于在客户端的javascript之前初始化，服务器将在此完成之前稍微终止会话。当页面重新加载时，浏览器将最终出现在登录屏幕上。这种方法还可以很容易地提前触发警告模式，例如在 2 分钟标记处带有显示剩余秒数的倒计时和可以单击以保持登录状态的按钮。

额外提示：在“保持登录”按钮上，将 url 设置为您的一个页面并添加`data-remote='true'`属性。单击此按钮时，将触发对服务器的请求，而无需重新加载用户所在的页面，从而满足活动要求并重置设备的超时，而无需重新加载或在任何地方导航。取消任何程序化页面重新加载，然后重新启动主超时。****

# node.js - Node.js 中到同一主机的最大并发 http 连接数

> ID：14577940
> 
> 赞同：0
> 
> 时间：2013-01-29T07:41:56.437
> 
> 标签：node.js, asynchronous, httprequest

`async.reduce`如果我在迭代器函数中所做的只是对同一主机的http请求（+在请求的回调中抓取），是否有意义？我问是因为一次到同一主机的最大 TCP 连接似乎是一个（即通过`console.log`在我的代码中使用，似乎只有在一次迭代中完成抓取之后，才会发出另一个 http-request，不管从 Web 服务器接收响应需要多长时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:24:14.047

自己解决了。我不知道`async.reduce`以串行方式而不是并行方式处理迭代。

来源：[https ://github.com/caolan/async#reducearr-memo-iterator-callback](https://github.com/caolan/async#reducearr-memo-iterator-callback)

# sql - 如何通过 SQL 更新具有相同键的表行？

> ID：14577946
> 
> 赞同：1
> 
> 时间：2013-01-29T07:42:22.063
> 
> 标签：sql, sql-server

我有一个像这样的表 T：

```
Name(Not unique)     Value   
A                      1
A                      3 
A                      5  
A                      8 
```

如果我只想更新第 3 行，如何编写 SQL？

下面的 SQL 不起作用，它会更新所有行。

```
update T set Value='10' where Name='A' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:43:54.200

```
update T set Value='10' where Name='A' and value=5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:53:07.573

```
UPDATE T SET Value='10' WHERE value=5 
```

# java - 如何将对象从 ArrayList 的一个位置读取到另一个 ArrayList 中的相同位置

> ID：14577947
> 
> 赞同：0
> 
> 时间：2013-01-29T07:42:26.903
> 
> 标签：java, collections, arraylist

如何从一个 ArrayList 的位置 y 读取对象到另一个 Arraylist 的相同位置 y？做这个的最好方式是什么？

我在下面有一些代码显示了我正在尝试做的事情。这段代码不起作用，但它给出了我想要做什么的一般概念。

寻找另一种方法来做到这一点，或者更好的方法。

```
 ArrayList<Prize> xrt = new ArrayList<Prize>();
  ArrayList<Prize> rungame = new ArrayList<Prize>();

  for(int y = 0; y < xrt.size(); y++){

  rungame.set(y, xrt.get(y));

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:08:11.160

对于索引到索引副本：[`Collections.copy(List dest, List src)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29)

# javascript - 使用 Gmail OAuth2 和 SMTP (Javascript) 发送电子邮件

> ID：14577957
> 
> 赞同：2
> 
> 时间：2013-01-29T07:43:30.460
> 
> 标签：javascript, jquery, email, oauth, google-api

我通过 Google API 控制台注册了我的应用程序。我有一个客户端 ID、客户端密码，并设置了重定向 URI。

是否有使用 JavaScript 使用 GMail、OAuth2 和 SMTP 发送电子邮件的教程或演示？我尝试搜索但没有找到任何可以解释整个过程的东西（我不能使用 node.js 和 gmailR）。

# file - Node.js：如何在不上传文件列表的情况下检查文件夹是否为空

> ID：14577960
> 
> 赞同：18
> 
> 时间：2013-01-29T07:43:52.543
> 
> 标签：file, node.js, directory, fs

我正在使用`Node.js`.

我想检查**文件夹是否为空**？一种选择是使用**fs.readdir**，但它将整个文件加载到一个数组中。我的文件夹中有超过 10000 个文件。加载文件名只是为了检查文件夹是否为空。所以寻找替代解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-06T11:16:34.737

如何使用节点本机`fs`模块[http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback](http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback)。它`readdir`和`readdirSync`函数为您提供所有包含文件名的数组（不包括`.`and `..`）。如果长度是`0`那么你的目录是空的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-29T08:24:03.757

This is an ugly hack but I'll throw it out there anyway. You could just call `fs.rmdir` on the directory. If the callback returns an error which contains `code: 'ENOTEMPTY'`, it was not empty. If it succeeds then you can call `fs.mkdir` and replace it. This solution probably only makes sense if your script was the one which created the directory in the first place, has the proper permissions, etc.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-05T04:03:18.570

您可以使用 exec() 从 NodeJS 中执行任何 *nix shell 命令。因此，为此您可以使用旧的 'ls -A ${folder} | wc -l' 命令（列出 ${folder} 中包含的所有文件/目录，将当前目录 (.) 和父目录 (..) 的条目隐藏在要从计数中排除的输出中，并计算它们的数字）。

例如，如果 ./tmp 不包含以下文件/目录，则将显示“目录 ./tmp 为空。”。否则，它将显示它包含的文件/目录的数量。

```
var dir = './tmp';
exec( 'ls -A ' + dir + ' | wc -l', function (error, stdout, stderr) {
    if( !error ){
        var numberOfFilesAsString = stdout.trim();
        if( numberOfFilesAsString === '0' ){
            console.log( 'Directory ' + dir + ' is empty.' );
        }
        else {
            console.log( 'Directory ' + dir + ' contains ' + numberOfFilesAsString + ' files/directories.' );
        }
    }
    else {
        throw error;
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-03T10:33:59.790

从我的答案中复制[如何使用nodejs确定目录是否为空目录](https://stackoverflow.com/questions/39217271/how-to-determine-whether-the-directory-is-empty-directory-with-nodejs/60037392#60037392)

有可能使用`opendir`为目录创建迭代器的方法调用。

这将消除读取所有文件的需要并避免潜在的内存和时间开销

```
 import {promises as fsp} from "fs"
    const dirIter = await fsp.opendir(_folderPath);
    const {value,done} = await dirIter[Symbol.asyncIterator]().next();
    await dirIter.close() 
```

done 值会告诉您目录是否为空

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-24T22:12:55.613

就像补充一点，有一个节点模块[extfs](https://github.com/codexar/npm-extfs)可用于使用函数**isEmpty()**检查目录是否为空，如下面的代码片段所示：

```
var fs = require('extfs');

fs.isEmpty('/home/myFolder', function (empty) {
  console.log(empty);
}); 
```

查看有关此功能的同步版本的文档链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-06T19:43:41.320

通配符呢？即，`exists myDir/*`。节点不支持开箱即用（TOW v0.10.15），但是一堆模块会为你做到这一点，比如[minimatch](https://nodejsmodules.org/pkg/minimatch "迷你比赛")

# java - 对路由器接口列表进行排序

> ID：14577964
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:44:03.237
> 
> 标签：java, sorting

具有包含路由器接口的列表：-

```
GigabitEthernet 1/0, GigabitEthernet 1/1,GigabitEthernet 1/11, GigabitEthernet 1/10, GigabitEthernet 1/3` 
```

现在我申请`Collection.sort(list)`排序，但它会导致一个问题，它排序是这样的： -

```
GigabitEthernet 1/0, GigabitEthernet 1/1, GigabitEthernet 1/10, GigabitEthernet 1/11, GigabitEthernet 1/3` 
```

但在我们的例子中，它应该像这样排序： -

```
GigabitEthernet 1/0, GigabitEthernet 1/1, GigabitEthernet 1/3, GigabitEthernet 1/10, GigabitEthernet 1/11` 
```

如何在 Java 中实现这种类型的排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:46:19.040

将字符串解析为`class`，并`class`使用适当的 对列表进行排序`Comparator`。

就像是

```
class GigabitEthernet{
    public int num; //up/down?
    public int denom;
    public GigabitEthernet(String str); // parse
    public String toString(); //regenerate string
} 
```

这应该使比较器更清洁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:46:09.490

实现您自己的比较器实例并`sort`使用比较器调用方法：http: [//goo.gl/Zz13w](http://goo.gl/Zz13w)

您的比较器将控制排序顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:48:11.473

使用 Collections 中的方法，该方法将比较器作为第二个参数（[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List， %20java.util.Comparator%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)）并实现例如一个匿名比较器类，它为您的排序进行正确的比较

# oracle - 数据库中的基数是否返回数值？

> ID：14577967
> 
> 赞同：1
> 
> 时间：2013-01-29T07:44:27.917
> 
> 标签：oracle, plsql

我正在重新设计用 SQL 编写的代码，并且在`order by`子句中使用了基数。那么它将在什么基础上订购记录？

例如

```
ORDER BY
      cardinality(emp_ids),
      earliest_due_date 
```

哪里`emp_ids`是这样准备的

```
 CAST(
       collect(employee.emp_id)
       AS
       NumberList
     ) AS emp_ids 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:07:42.207

据[记录](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions022.htm#SQLRF06305)，返回是数字：

> CARDINALITY 返回嵌套表中的元素数。返回类型为 NUMBER。如果嵌套表为空或为空集合，则 CARDINALITY 返回 NULL。

因此，您的 order by 将`emp_ids`首先返回行数最少的表（空表，因为它将返回 null 将最后出现）。

# android - TelephonyManager.getCellLocation() 返回 null？

> ID：14577968
> 
> 赞同：1
> 
> 时间：2013-01-29T07:44:38.337
> 
> 标签：android, geolocation, gps, latitude-longitude

我处于必须获取位置的情况，即经度和纬度`GSMCellLocation`，因此我正在尝试以下方式：

```
 ...
  TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
  location = (GsmCellLocation) tm.getCellLocation();
  cid = location.getCid();
  lac = location.getLac();
  ... 
```

但应用程序崩溃并给了我`NPE`。我已经通过日志和调试检查了它，它显示`getCellLocation`返回，`null`因此我无法获取`cid`and `lac`. 来自 Google Docs 的这个方法的签名是这样说明的：

```
Returns the current location of the device. Return null if current location is not available. 
```

现在我的问题是，如何在使用此方法之前获取当前位置，使其不为空。`GPS`因为在我的情况下，我试图将其用作`Network`获取位置的替代方法。请更新并感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:59:38.143

添加此权限：`ACCESS_COARSE_LOCATION`或`ACCESS_FINE_LOCATION`在您的`manifest.xml`

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-30T21:05:39.210

从[TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getCellLocation())它可能与 LTE 有关：

> 如果设备中只有一个无线电并且该无线电具有 LTE 连接，则此方法将返回 null...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:51:34.530

getCellLocation() 返回 null，如果当前位置不可用。请看一下

[电话经理](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getCellLocation%28%29)

此外，检查手机设置中是否存在基带类型信息。

以下代码对我来说很好用你可以测试一下

```
 TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
      GsmCellLocation cellLocation = (GsmCellLocation)telephonyManager.getCellLocation();

      int cid = cellLocation.getCid();
      int lac = cellLocation.getLac();
      textGsmCellLocation.setText(cellLocation.toString());
      textCID.setText("gsm cell id: " + String.valueOf(cid));
      textLAC.setText("gsm location area code: " + String.valueOf(lac)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T11:21:45.810

在清单文件中，我添加了粗略、精细和读取手机状态并在设备上运行的权限。

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

现在添加以下代码：

```
private void check_ReadPhoneState_Permission() {
    // Here, thisActivity is the current activity
    if (ContextCompat.checkSelfPermission(this,
            android.Manifest.permission.READ_PHONE_STATE)
            != PackageManager.PERMISSION_GRANTED) {

        // Should we show an explanation?
        if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                android.Manifest.permission.READ_PHONE_STATE)) {

            // Show an explanation to the user *asynchronously* -- don't block
            // this thread waiting for the user's response! After the user
            // sees the explanation, try again to request the permission.

        } else {

            // No explanation needed, we can request the permission.

            ActivityCompat.requestPermissions(this,
                    new String[]{android.Manifest.permission.READ_PHONE_STATE},
                    MY_PERMISSIONS_REQUEST_READ_PHONE_STATE);

            // MY_PERMISSIONS_REQUEST_READ_PHONE_STATE is an
            // app-defined int constant. The callback method gets the
            // result of the request.
        }
    }
}

public boolean checkLocationPermission() {
    if (ContextCompat.checkSelfPermission(this,android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED
            && ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {

        // Should we show an explanation?
        if (ActivityCompat.shouldShowRequestPermissionRationale(this,android.Manifest.permission.ACCESS_FINE_LOCATION)
                && ActivityCompat.shouldShowRequestPermissionRationale(this,android.Manifest.permission.ACCESS_COARSE_LOCATION)) {

            // Show an explanation to the user *asynchronously* -- don't block
            // this thread waiting for the user's response! After the user
            // sees the explanation, try again to request the permission.
            new AlertDialog.Builder(this)
                    .setTitle(R.string.title_location_permission)
                    .setMessage(R.string.text_location_permission)
                    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialogInterface, int i) {
                            //Prompt the user once explanation has been shown
                            ActivityCompat.requestPermissions(PhoneDetailsMain.this,
                                    new String[]{android.Manifest.permission.ACCESS_FINE_LOCATION},
                                    MY_PERMISSIONS_REQUEST_LOCATION);

                            ActivityCompat.requestPermissions(PhoneDetailsMain.this,
                                    new String[]{android.Manifest.permission.ACCESS_COARSE_LOCATION},
                                    MY_PERMISSIONS_REQUEST_COARSE_LOCATION);
                        }
                    })
                    .create()
                    .show();

        } else {
            // No explanation needed, we can request the permission.
            ActivityCompat.requestPermissions(this,
                    new String[]{android.Manifest.permission.ACCESS_FINE_LOCATION},
                    MY_PERMISSIONS_REQUEST_LOCATION);
            ActivityCompat.requestPermissions(this,
                    new String[]{android.Manifest.permission.ACCESS_COARSE_LOCATION},
                    MY_PERMISSIONS_REQUEST_COARSE_LOCATION);
        }
        return false;
    } else {
        return true;
    }
}

@Override
public void onRequestPermissionsResult(int requestCode,
                                       String permissions[], int[] grantResults) {
    switch (requestCode) {
        case 100: {
            // If request is cancelled, the result arrays are empty.
            if (grantResults.length > 0
                    && grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                // permission was granted, yay! Do the
                // contacts-related task you need to do.

            } else {

                // permission denied, boo! Disable the
                // functionality that depends on this permission.
            }
        }

        // other 'case' lines to check for other
        // permissions this app might request
        case 200: {
            // If request is cancelled, the result arrays are empty.
            if (grantResults.length > 0
                    && grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                // permission was granted, yay! Do the
                // location-related task you need to do.
                if (ContextCompat.checkSelfPermission(this,
                        android.Manifest.permission.ACCESS_FINE_LOCATION)
                        == PackageManager.PERMISSION_GRANTED) {

                }

            } else {

                // permission denied, boo! Disable the
                // functionality that depends on this permission.
            }
        }
        case 300: {
            if (grantResults.length > 0
                    && grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                // permission was granted, yay! Do the
                // location-related task you need to do.
                if (ContextCompat.checkSelfPermission(this,
                        android.Manifest.permission.ACCESS_COARSE_LOCATION)
                        == PackageManager.PERMISSION_GRANTED) {

                }

            } else {

                // permission denied, boo! Disable the
                // functionality that depends on this permission.
            }
        }
    }
} 
```

# c#-4.0 - 获取文本框的位置

> ID：14577969
> 
> 赞同：0
> 
> 时间：2013-01-29T07:44:41.237
> 
> 标签：c#-4.0, textbox

如何在矩形内获取文本框 (x,y) 的位置？

```
 RectangleF srcRect = new Rectangle(0, 0, this.BackgroundImage.Width,
                BackgroundImage.Height);

    int nWidth = printDocument1.PrinterSettings.DefaultPageSettings.PaperSize.Width;
    int nHeight = printDocument1.PrinterSettings.DefaultPageSettings.PaperSize.Height;
    RectangleF destRect = new Rectangle(0, 0, nWidth, nHeight);

    g.DrawImage(this.BackgroundImage, destRect, srcRect, GraphicsUnit.Pixel);

     e.Graphics.DrawString(textBox15.Text, textBox15.Font, 
                           new SolidBrush(textBox15.ForeColor), 
                          /*x location base on rectangle*/, 
                          /*y location based on rectagle8*/); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:57:36.313

这是提示使用`.Right`和`.Top`

```
e.Graphics.DrawString(textBox15.Text, textBox15.Font, new SolidBrush(textBox15.ForeColor), srcRect.Right, srcRect.Top); 
```

# asp.net-mvc - 在 MVC 4 中使用 T-SQL（数据访问层）的问题

> ID：14577970
> 
> 赞同：0
> 
> 时间：2013-01-29T07:44:53.983
> 
> 标签：asp.net-mvc, tsql

我是 MVC 的学习者（4）。我已经阅读了一些关于 MVC 4 的教程。这些教程简直太棒了。但是所有这些都使用 EF 和 LINQ to SQL 进行数据库操作。如果我想使用 T-SQL 进行数据库操作，我该怎么做？我应该在模型中还是在另一个库中编写 sql 查询？我将把数据访问层放在哪里？

我用谷歌搜索了这个问题。但没有找到令人满意的技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:23:47.343

当我第一次开始做 MVC4 和 WPF/WCF 时，我尝试实现我的 TSQL。TBH 我浪费了多少小时，我最好尽快学习我现在知道的 Linq。

我发现，如果我在我的数据库中创建了良好级别的关系，我可以在 Linq 中轻松实现我在 TSQL 中可以做到的。

# c# - 在全面板c#上获取鼠标输入事件

> ID：14577976
> 
> 赞同：0
> 
> 时间：2013-01-29T07:45:13.933
> 
> 标签：c#, winforms, events

所以我所拥有的是一个面板，它使用 DockStyle.Top 以编程方式填充自定义控件。

我需要的是当鼠标光标进入面板时面板以某种方式获得焦点，以便用户可以使用鼠标滚轮滚动面板。

我真的不想给每个控件一个处理程序，因为可能有数百个控件。

一种方法是检查鼠标位置并检查面板是否包含它，这可能需要额外的线程或鼠标钩，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:00:05.587

您可以将[Amen Ayach](https://stackoverflow.com/users/1209153/amen-ayach)`MouseDetector class`发布的内容作为类似问题的[答案，并在鼠标悬停时激活表单：](https://stackoverflow.com/a/9619097/674700)

```
void m_MouseMove(object sender, Point p)
{
    Point pt = this.PointToClient(p);
    if (this.ClientSize.Width >= pt.X &&
                    this.ClientSize.Height >= pt.Y &&
                    pt.X > 0 && pt.Y > 0)
    {
        this.Activate();
    }
} 
```

您还应该将`Panel`'`AutoScroll`值设置为`true`。

```
panel.AutoScroll = true; 
```

# user-interface - 有没有办法在 Rebol 中居中 gui 按钮和字段？

> ID：14577980
> 
> 赞同：3
> 
> 时间：2013-01-29T07:45:31.277
> 
> 标签：user-interface, rebol, rebol2

花了几个小时试图弄清楚这一点，但仍然没有得到它。没有任何文档提到它。如果不手动重新排列所有内容，这是 rebol 无法做到的吗？

也许我只是期待太多？

编辑：好吧，我发现了一个 hack：indent num，然后 indent -num 在下一行。在这种语言的所有壮观特性中，为什么他们不能添加一个像中心这样的简单命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:08:25.887

有一个 CENTER-FACE 功能可以重复使用来对齐面，但不幸的是，根据我的经验，它不能很好地工作。这是一个更简单的替换版本，应该可以解决问题：

```
center-face: func [face [object!] parent [object!]][
    face/offset: parent/size - face/size / 2 
] 
```

这是一个使用示例：

```
lay: layout [
    size 300x300
    b: button "Hello World"
]
center-face b lay
view lay 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:38:48.963

首先，VID 不是 Rebol，而是作者 Carl Sassenrath 编写的演示方言，用于演示如何在 Rebol 中对接口进行方言。还有其他的，包括 RebGUI ( [http://www.dobeash.com/rebgui.html](http://www.dobeash.com/rebgui.html) ) 虽然我怀疑那里没有办法将按钮居中，因为两位作者都不认为这很重要。

您还可以使用 PAD 将光标靠近布局的中心对齐。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T16:41:24.643

我们不能根据窗口本身来居中或对齐内容，因为控件没有任何方法可以引用它们的父面，直到父级调用了“SHOW”之后。

face/parent-face 直到显示**父**级才设置。因此，在普通 VID 中，您需要在初始布局和视图完成后调整 gui。

这是一个小脚本，它显示了在至少显示一次之后如何将任何面居中。

view/new 用于延迟事件处理，以便修改布局。

```
rebol []

center: func [face][
    face/offset/x: (face/parent-face/size/x / 2) - (face/size/x / 2)
    show face
]

view/new layout [
    across
    t: h1  "This is a centered title!" 
    return
    button "1"
    button "2"
    button "3"
    button "4"
]

center t

do-events 
```

# jquery - 使用ajax发布2个数据

> ID：14577983
> 
> 赞同：1
> 
> 时间：2013-01-29T07:45:43.733
> 
> 标签：jquery, ajax, post

我有一个问题，我真的需要帮助。我试图在 1 个 ajax 帖子中从 jsp 发布到控制器 2 数据。

我的阿贾克斯：

```
$.ajax({
        type: "POST",
        url: contextPath + "/generalLedger/journalEntries/form",
        data : {"json" : glEntries, "searchParam" : searchData},
        success: function(data) {
            alert("Success!!!");
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(jqXHR + " : " + textStatus + " : " + errorThrown);
        }
}); 
```

在我的控制器中：

```
@RequestMapping (method = RequestMethod.POST,  value = "/form")
public String postJournalEntry (@RequestBody String json, @RequestBody String searchParam, Model model) {
    // Some codes here
} 
```

我的问题是我有：

```
java.io.IOException: Stream closed
at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:325)
at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.Reader.read(Reader.java:123)
at org.springframework.util.FileCopyUtils.copy(FileCopyUtils.java:188)
at org.springframework.util.FileCopyUtils.copyToString(FileCopyUtils.java:240)
at org.springframework.http.converter.StringHttpMessageConverter.readInternal(StringHttpMessageConverter.java:62)
at org.springframework.http.converter.StringHttpMessageConverter.readInternal(StringHttpMessageConverter.java:1)
at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:152)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestBody(HandlerMethodInvoker.java:552)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:283)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:163)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
at bp.servlet.CBSDispatcherServlet.doService(CBSDispatcherServlet.java:37)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

我对此还是陌生的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:29:34.953

在 jquery 代码行中，

```
data : {"json" : glEntries, "searchParam" : searchData}, 
```

应该，

```
data : {json : glEntries, searchParam : searchData}, 
```

# ruby-on-rails - 在评论多态关联修订帖子中添加编辑和删除功能

> ID：14577984
> 
> 赞同：2
> 
> 时间：2013-01-29T07:45:46.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, railscasts

我阅读了这篇[http://railscasts.com/episodes/154-polymorphic-association-revised](http://railscasts.com/episodes/154-polymorphic-association-revised)帖子并按原样实施。但我也想在本教程中添加编辑和删除功能。我有comments_controller.rb 是这样的

```
class CommentsController < ApplicationController
  before_filter :load_commentable

  def index
    @comments = @commentable.comments
  end

  def new
    @comment = @commentable.comments.new
  end

  def create
    @comment = @commentable.comments.new(params[:comment])
    if @comment.save
      redirect_to @commentable, notice: "Comment created."
    else
      render :new
    end
  end

private

  def load_commentable
    resource, id = request.path.split('/')[1, 2]
    @commentable = resource.singularize.classify.constantize.find(id)
  end

  # def load_commentable
  #   klass = [Article, Photo, Event].detect { |c| params["#{c.name.underscore}_id"] }
  #   @commentable = klass.find(params["#{klass.name.underscore}_id"])
  # end
end 
```

我给定的 _comments.html.erb 是这样的

```
<div id="comments">
<% @comments.each do |comment| %>
  <div class="comment">
    <%= simple_format comment.content %>
  </div>
<% end %>
</div> 
```

我的路线是这样的

```
Blog::Application.routes.draw do
  resources :articles do
    resources :comments
  end

  resources :photos do
    resources :comments
  end

  resources :events do
    resources :comments
  end
  resources :comments

  root to: 'articles#index'
end 
```

我的 rake 路线是这样的

```
 article_comment GET    /articles/:article_id/comments/:id(.:format)      comments#show
                     PUT    /articles/:article_id/comments/:id(.:format)      comments#update
                     DELETE /articles/:article_id/comments/:id(.:format)      comments#destroy
            articles GET    /articles(.:format)                               articles#index
                     POST   /articles(.:format)                               articles#create
         new_article GET    /articles/new(.:format)                           articles#new
        edit_article GET    /articles/:id/edit(.:format)                      articles#edit
             article GET    /articles/:id(.:format)                           articles#show
                     PUT    /articles/:id(.:format)                           articles#update
                     DELETE /articles/:id(.:format)                           articles#destroy
      photo_comments GET    /photos/:photo_id/comments(.:format)              comments#index
                     POST   /photos/:photo_id/comments(.:format)              comments#create
   new_photo_comment GET    /photos/:photo_id/comments/new(.:format)          comments#new
  edit_photo_comment GET    /photos/:photo_id/comments/:id/edit(.:format)     comments#edit
       photo_comment GET    /photos/:photo_id/comments/:id(.:format)          comments#show
                     PUT    /photos/:photo_id/comments/:id(.:format)          comments#update
                     DELETE /photos/:photo_id/comments/:id(.:format)          comments#destroy
              photos GET    /photos(.:format)                                 photos#index
                     POST   /photos(.:format)                                 photos#create
           new_photo GET    /photos/new(.:format)                             photos#new
          edit_photo GET    /photos/:id/edit(.:format)                        photos#edit
               photo GET    /photos/:id(.:format)                             photos#show
                     PUT    /photos/:id(.:format)                             photos#update
                     DELETE /photos/:id(.:format)                             photos#destroy
      event_comments GET    /events/:event_id/comments(.:format)              comments#index
                     POST   /events/:event_id/comments(.:format)              comments#create
   new_event_comment GET    /events/:event_id/comments/new(.:format)          comments#new
  edit_event_comment GET    /events/:event_id/comments/:id/edit(.:format)     comments#edit
       event_comment GET    /events/:event_id/comments/:id(.:format)          comments#show
                     PUT    /events/:event_id/comments/:id(.:format)          comments#update
                     DELETE /events/:event_id/comments/:id(.:format)          comments#destroy
              events GET    /events(.:format)                                 events#index
                     POST   /events(.:format)                                 events#create
           new_event GET    /events/new(.:format)                             events#new
          edit_event GET    /events/:id/edit(.:format)                        events#edit
               event GET    /events/:id(.:format)                             events#show
                     PUT    /events/:id(.:format)                             events#update
                     DELETE /events/:id(.:format)                             events#destroy
            comments GET    /comments(.:format)                               comments#index
                     POST   /comments(.:format)                               comments#create
         new_comment GET    /comments/new(.:format)                           comments#new
        edit_comment GET    /comments/:id/edit(.:format)                      comments#edit
             comment GET    /comments/:id(.:format)                           comments#show
                     PUT    /comments/:id(.:format)                           comments#update
                     DELETE /comments/:id(.:format)                           comments#destroy
                root        /                                                 articles#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:00:00.957

像这样……？这假设您的路由嵌套在“可评论”路由下的 :Edit 和 :update 操作。

```
 def edit
    @comment = @commentable.comments.find(params[:id])
  end

  def create
    @comment = @commentable.comments.find(params[:id])
    if @comment.update_attributes(params[:comment])
      redirect_to @commentable, notice: "Comment updated."
    else
      render :edit
    end
  end 
```

您的编辑应如下所示：

```
<%= link_to 'Edit', [:edit, @comment.commentable, @comment] %> 
```

但是...您将需要某种身份验证和/或授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T19:38:14.070

这是多态关联的破坏动作，我相信你可以弄清楚编辑:)

**看法**

```
<%= link_to content_tag(:i, "", class: "icon-trash icons"), [@commentable, comment], method: :delete,
                       data: { confirm: "Are you sure?" },
                       title: "Delete" %> 
```

**控制器**

```
def destroy
  @comment = Comment.find(params[:id])
  @commentable = @comment.commentable
  if @comment.destroy
    flash[:success] = "Comment Destroyed!"   
    redirect_to :back
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:13:29.667

我现在没有太多时间来查看这个，但是为了回应你的推文，我发布了我在我开始工作的测试应用程序中使用的代码。我在这里使用 HAML。

在我的视图中调用编辑或删除链接时，我使用了这个部分：

```
- @category.photos.each do |photo|
    = image_tag photo.image_url(:thumb)
    %figcaption
        = link_to "Change", [:edit, @category, photo]

        = link_to "Delete", [@category, photo], :method => :delete
= link_to "New photo", [:new, @category, :photo] 
```

我的照片控制器：

```
class PhotosController < ApplicationController
  def create
    @category = Category.find(params[:category_id])
    @photo = @category.photos.create!(params[:photo])
    redirect_to @category, :notice => "Photo created."
  end

  def edit
    @category = Category.find(params[:category_id])
    @photos = @category.photos
    @photo = @photos.find(params[:id])
  end

  def update
    @category = Category.find(params[:category_id])
    @photo = @category.photos.find(params[:id])

    respond_to do |format|
      if @photo.update_attributes(params[:photo])
        format.html { redirect_to @category, notice: "<i class=icon-ok /> #{@category.name} was successfully updated."}
        format.js
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @category.errors, status: :unprocessable_entity }
      end
    end
  end
  def new
    @category = Category.find(params[:category_id])
    @photo = @category.photos.new
  end
  def destroy
    @category = Category.find(params[:category_id])
    @photos = @category.photos
    @photo = @photos.find(params[:id])
    @photo.destroy
    redirect_to @category, :notice => "Photo deleted."
  end
end 
```

在我的照片模型中，我有：

```
class Photo
  include Mongoid::Document
  embedded_in :category, :inverse_of => :photos

  field :image
  attr_accessible :image

  # Set uploader
  mount_uploader :image, ImageUploader
end 
```

在类别模型中：

```
class Category
  # Includes to set up the model
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Ancestry
  include Mongoid::Versioning
  include Mongoid::Paranoia
  include Mongoid::Slug
  include Mongoid::History::Trackable

  # tell it that it can go nest itself
  has_ancestry
  embeds_many :photos

  # Accept nested attributes
  accepts_nested_attributes_for :photos, :autosave => true
  # tell history how it can track things
  track_history   :on => [:name, :description],   # track these fields
                  #:modifier_field => :modifier, # adds "referenced_in :modifier" to track who made the change, default is :modifier
                  :version_field => :version,   # adds "field :version, :type => Integer" to track current version, default is :version
                  :track_create   =>  false,    # track document creation, default is false
                  :track_update   =>  true,     # track document updates, default is true
                  :track_destroy  =>  false    # track document destruction, default is false
  # Keep at most 5 versions of a record
  max_versions 5

  # Add the models fields here
  field :name, type: String
  field :ancestry, type: String
  field :description, type: String

  # Set which field the url slug should use
  slug :name

  # Make sure these attributes can be accessed
  attr_accessible :ancestry, :name, :parent_id, :description

  # Make name fields capitalized on save
  def name=(t)
    write_attribute(:name, t.to_s.split(' ').map {|w| w.capitalize}.join(' '))
  end

  # Create some scopes
  scope :except, lambda{ |category| where("id <> ?", category.id)}
end 
```

# 笔记：

我只是粘贴了一堆我的代码，因为我没有太多时间来解析它来具体回答。希望我编写一些代码的方式可以帮助您。

请记住，我正在使用：

*   蒙古族
*   导轨 3

干杯，

-布兰登

# php - 登录前后显示不同的内容

> ID：14577985
> 
> 赞同：0
> 
> 时间：2013-01-29T07:45:51.847
> 
> 标签：php, jquery, html, logged

我想在不同的条件下显示具有不同内容的不同 div。

如果客户已登录，则显示内容 A，如果客户未登录，则显示内容 B，

这是我的脚本，不确定它是否正确。

```
<?php if (!$logged) {

$disp_div=1;

} else { 

$disp_div=0;

} ?> 
```

这是jQuery

```
<script type="text/javascript" >
$(document).ready(function(){

var show=<?php echo $disp_div; ?>

 if(show==1)
 {
    $('#div_logged_in').show();
    $('#div_not_logged_in').hide();

 }
else if(show==0)
 {
    $('#div_logged_in').hide();
    $('#div_not_logged_in').show();
     }
 }); 
```

这是 HTML

```
<div id="div_logged_in">
Content A
</div>

<div id="div_not_logged_in">
Content B
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T07:58:16.867

**答：为什么 !$logged 是错误的：**

您使用局部变量。下次您的用户刷新页面时，他将不再登录。为此，您可以将变量存储在一个名为 $_SESSION 的数组中。此数组保存在您的网络服务器上以供客户端会话使用。只要用户呆在那里，它就会一直保持不变（直到你改变它）。为此，您需要一个 session_start(); 在你的主要 PHP 脚本的第一行。

**B：为什么javascript部分是安全漏洞：**

您的网站旨在不过滤发送给用户的内容。每个用户都获得了全部内容，只是可见性发生了变化。通过这种方式，每个高级用户都可以查看您的代码并查看您想要隐藏的所有秘密。

**C：正确的方法是什么？**

它只是一些在没有 Javascript 的情况下回显 HTML 并使用 $_SESSION 的 PHP：

```
<?php
    if($_SESSION["loggedIn"] == "yes") { //You have to set that somewhere else just like $logged
    ?>
        <p> You ARE logged in. </p>
    <?php } else { ?>
        <p> You ARE NOT logged in. </p>
    <?php
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:52:12.270

我不知道是什么`$logged`。如果是查找用户是否登录的变量，那么你的条件正好与你的要求相反。您正在显示`div_logged_in`用户何时未从该条件登录。

```
if(show==1)
 {
    $('#div_logged_in').show();
    $('#div_not_logged_in').hide();

 } 
```

`$logged`当为假时，show 的值为 1 。所以改变条件，你会得到它。在这种情况下，我建议您使用**SESSIONS**。您可以在任何地方使用来检查用户是否已登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:51:03.707

首先，您需要开始阅读有关[会话和 $_SESSION 超全局的](http://php.net/manual/en/function.session-start.php)信息。

在那之后，扔掉那个脚本，寻找一个合适的教程，我在这里找到了一个非常好的教程：http: [//net.tutsplus.com/tutorials/php/a-better-login-system/](http://net.tutsplus.com/tutorials/php/a-better-login-system/) - 虽然它可能是有点先进，因为它谈论 ACL，您可能不需要。

但是，如果您可以尝试并理解本教程的其余部分，那么您应该没问题。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T07:53:40.847

请不要依赖客户端验证，因为它是您应用程序中的一个安全流程，如果客户查看了您页面的源代码怎么办？然后他们会看到隐藏的内容。

您的方法是正确的，但您必须使用 $_SESSION 或 $_COOKIE 而不是 if (!$logged) 并且正如我所说，不要完全输出内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T15:55:23.107

利用 `if($_SESSION["username"])`

您可以在 login.php 文件中设置它并在 logout.php 上使用 session_destroy() 将其销毁

# c# - 如何分配数值模板类型

> ID：14577990
> 
> 赞同：0
> 
> 时间：2013-01-29T07:46:27.583
> 
> 标签：c#, templates, casting, type-conversion

我无法分配数值。应该对 double 和 int 值使用模板。演员没有帮助。

在 C++ 中没有问题。

```
 class array<Type>
    {
        public void alloc(int n)
        {
            a=new Type[n];
            for (int i = 0; i < n; i++) a[i] = (Type)0; <-----Error

        }
           Type[] a;
    } 
```

# wordpress - WordPress：如何将帖子链接到特定页面？

> ID：14577991
> 
> 赞同：0
> 
> 时间：2013-01-29T07:46:27.823
> 
> 标签：wordpress

我是 WordPress 新手，正在尝试执行以下操作：

我的主菜单有一些选项（主页、文件、编辑、查看...）。我也想发帖。帖子可以属于与菜单选项匹配的不同类别。唯一的最后一篇文章应显示在主页上（主页菜单选项）。其他较旧的帖子应该在适当的菜单选项下的页面上。

我已经搜索了互联网，但没有找到正确的解决方案。

我可以用 WordPress 做到这一点吗？

我不知道PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:58:58.617

我没有正确理解你的问题。正如你所说，你不了解 PHP，所以它会有点困难，但你可以通过自定义模板或编辑模板的索引页面来实现。
或者，如果您想在没有任何 php 的情况下在您的网站上显示 1 个帖子（最后一个），您可以转到您的 Dashboard->Setting->Reading 并将“博客页面最多显示”从 10 设置为 1。但问题是您的网站会像博客一样显示。如果您使用“二十一”，请告诉我，我会为您制作。

# php - 通过 xpath 将 XML 文件的多个标记值存储在数组中

> ID：14577994
> 
> 赞同：-2
> 
> 时间：2013-01-29T07:46:34.500
> 
> 标签：php, xml, xpath

> **可能重复：**
> [从 XML 中获取具有属性值的特定标签](https://stackoverflow.com/questions/14562590/fetch-specific-tag-with-an-attribute-value-from-xml)

我有一个如下的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response uri="/crm/private/xml/SalesOrders/getRecords">
    <result>
        <SalesOrders>
            <row no="1">
                <FL val="SALESORDERID">580005000000187001</FL>
                <FL val="SO Number"><![CDATA[580005000000187002]]></FL>
                <FL val="Subject"><![CDATA[Sales order test from sri 02]]></FL>
                <FL val="Due Date"><![CDATA[2013-03-10]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088096</FL>
                <FL val="Account Name"><![CDATA[Best Western Pavilions]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2013-01-17 20:32:19]]></FL>
                <FL val="Modified Time"><![CDATA[2013-01-17 20:32:19]]></FL>
                <FL val="Sub Total"><![CDATA[250]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[250]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000171125</FL>
                        <FL val="Product Name"><![CDATA[The Grilling Maestro]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">20.0</FL>
                        <FL val="Quantity in Stock">0.0</FL>
                        <FL val="Total">200.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">200.0</FL>
                        <FL val="List Price">10.0</FL>
                        <FL val="Net Total">200.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="2">
                        <FL val="Product Id">580005000000171131</FL>
                        <FL val="Product Name"><![CDATA[Uptown Deli   Soup du Jour]]></FL>
                        <FL val="Unit Price">25.0</FL>
                        <FL val="Quantity">1.0</FL>
                        <FL val="Quantity in Stock">0.0</FL>
                        <FL val="Total">50.0</FL>
                        <FL val="Discount">1.23</FL>
                        <FL val="Total After Discount">23.77</FL>
                        <FL val="List Price">25.0</FL>
                        <FL val="Net Total">48.77</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Terms and Conditions"><![CDATA[iBanquet T and C]]></FL>
                <FL val="Description"><![CDATA[Sales Order from iBanquet]]></FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="2">
                <FL val="SALESORDERID">580005000000134001</FL>
                <FL val="SO Number"><![CDATA[580005000000134003]]></FL>
                <FL val="Subject"><![CDATA[Test]]></FL>
                <FL val="CONTACTID">580005000000120009</FL>
                <FL val="Contact Name"><![CDATA[Sydney Lai]]></FL>
                <FL val="Carrier"><![CDATA[FedEX]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088100</FL>
                <FL val="Account Name"><![CDATA[Best Western Sportstown Anaheim]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-11-08 14:51:50]]></FL>
                <FL val="Modified Time"><![CDATA[2012-11-08 14:51:50]]></FL>
                <FL val="Sub Total"><![CDATA[45]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[45]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059016</FL>
                        <FL val="Product Name"><![CDATA[Beef Stoganoff]]></FL>
                        <FL val="Unit Price">14.95</FL>
                        <FL val="Quantity">1.0</FL>
                        <FL val="Quantity in Stock">-25.0</FL>
                        <FL val="Total">45.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">45.0</FL>
                        <FL val="List Price">45.0</FL>
                        <FL val="Net Total">45.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="3">
                <FL val="SALESORDERID">580005000000118001</FL>
                <FL val="SO Number"><![CDATA[580005000000118003]]></FL>
                <FL val="Subject"><![CDATA[SAirpriya's Birthday]]></FL>
                <FL val="POTENTIALID">580005000000069001</FL>
                <FL val="Potential Name"><![CDATA[Sandeep]]></FL>
                <FL val="Due Date"><![CDATA[2012-10-17]]></FL>
                <FL val="Carrier"><![CDATA[FedEX]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088090</FL>
                <FL val="Account Name"><![CDATA[Best Western Anaheim Inn]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-10-16 14:45:18]]></FL>
                <FL val="Modified Time"><![CDATA[2012-10-16 14:45:18]]></FL>
                <FL val="Sub Total"><![CDATA[1080]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[1080]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059016</FL>
                        <FL val="Product Name"><![CDATA[Beef Stoganoff]]></FL>
                        <FL val="Unit Price">14.95</FL>
                        <FL val="Quantity">24.0</FL>
                        <FL val="Quantity in Stock">-25.0</FL>
                        <FL val="Total">1080.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">1080.0</FL>
                        <FL val="List Price">45.0</FL>
                        <FL val="Net Total">1080.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="4">
                <FL val="SALESORDERID">580005000000070009</FL>
                <FL val="SO Number"><![CDATA[580005000000070011]]></FL>
                <FL val="Subject"><![CDATA[iBanquet]]></FL>
                <FL val="QUOTEID">580005000000070003</FL>
                <FL val="Quote Name"><![CDATA[iBanquet]]></FL>
                <FL val="Carrier"><![CDATA[UPS]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000058001</FL>
                <FL val="Account Name"><![CDATA[Hotel Skysurf]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-06-19 19:17:12]]></FL>
                <FL val="Modified Time"><![CDATA[2012-06-29 19:55:00]]></FL>
                <FL val="Sub Total"><![CDATA[20538]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[20538]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059032</FL>
                        <FL val="Product Name"><![CDATA[Carrot Cake]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">441.0</FL>
                        <FL val="Quantity in Stock">-882.0</FL>
                        <FL val="Total">4410.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">4410.0</FL>
                        <FL val="List Price">10.0</FL>
                        <FL val="Net Total">4410.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="2">
                        <FL val="Product Id">580005000000059022</FL>
                        <FL val="Product Name"><![CDATA[Chicken Parmigiano]]></FL>
                        <FL val="Unit Price">15.0</FL>
                        <FL val="Quantity">122.0</FL>
                        <FL val="Quantity in Stock">-122.0</FL>
                        <FL val="Total">1464.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">1464.0</FL>
                        <FL val="List Price">12.0</FL>
                        <FL val="Net Total">1464.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="3">
                        <FL val="Product Id">580005000000059030</FL>
                        <FL val="Product Name"><![CDATA[Coconut Cake]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">1222.0</FL>
                        <FL val="Quantity in Stock">-1222.0</FL>
                        <FL val="Total">14664.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">14664.0</FL>
                        <FL val="List Price">12.0</FL>
                        <FL val="Net Total">14664.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
        </SalesOrders>
    </result>
</response> 
```

`<FL val="Product Name">`我需要显示存储在产品标签下的销售订单所有者名称及其关联的产品名称。

我的代码是这样的：

```
$file_sales_content = "https://crm.zoho.com/crm/private/xml/SalesOrders/getRecords?authtoken=XXX&scope=crmapi"  
$doc = new DOMDocument();
$doc->loadXML( $file_sales_content );   
$xpath = new DOMXPath( $doc );
$items = $xpath->evaluate( '//FL[@val="Sales Order Owner"]' );
$sales_order_array = array();
for ( $i = 0; $i < $items->length; $i++ ) {
 array_push($sales_order_array,$items->item( $i )->textContent);
} 
```

where`$file_sales_content`返回上面的 xml。

但我认为有一些捷径。如果是这样，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:24:12.850

我建议像这样设置您的代码：

```
$file_sales_content = "https://crm.zoho.com/crm/private/xml/SalesOrders/getRecords?authtoken=XXX&scope=crmapi"  
$doc = new DOMDocument();
$doc->loadXML( $file_sales_content );   
$xpath = new DOMXPath( $doc );
$items = $xpath->evaluate( '//FL[@val="Sales Order Owner"]' );
$sales_orders = array();
foreach ( $items as $item) {
    $sales_order = array();
    $sales_order['name'] = $item->textContent;

    $products = array();
    $childItems = $xpath->evaluate( '../FL/product/FL[@val = "Product Name"]', $item );
    foreach( $childItems as $productName) {
       $products[] = $productName->textContent;
    }       
    $sales_order['product'] = $products;
    $sales_orders[] = $sales_order;
} 
```

# php - FFMPEG - 短视频 - 循环放大

> ID：14577995
> 
> 赞同：0
> 
> 时间：2013-01-29T07:46:40.653
> 
> 标签：php, linux, ffmpeg

我制作动画视频。但是视频很短。

所以我想增加视频的长度。它是动画的，所以它不会有任何区别。

我正在使用 cat 功能进行操作。无论如何在不使用concat的情况下循环它吗？

我创建 mp4。要复制视频，我将它们转换为 mpg。我再次将它们转换为 mp4。这是一个漫长的过程。所以，如果我可以通过循环播放视频来增加时间，我不需要做其他转换过程。在ffmpeg中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T01:20:49.893

抱歉，但我发现最好使用相同的方法。我尝试在 ffmpeg 中使用 concat 过滤器进行循环，但它会很容易耗尽内存退出。

# asp.net - 具有 EntityDataSource OrderBy 属性的 OrderBy 子实体

> ID：14577996
> 
> 赞同：1
> 
> 时间：2013-01-29T07:46:42.123
> 
> 标签：asp.net, linq-to-sql, entity-framework-4

我有一个 EntityDataSource 用于选择具有按 roleID 排序的某些角色的所有用户实体。（我想显示按角色分组的用户，因此订单部分很重要）。

以下代码：

```
<asp:EntityDataSource ID="UserDataSource" runat="server" ConnectionString="name=MyEntities" 
    DefaultContainerName="MyEntities" EnableFlattening="False"
    EntitySetName="Users" Where="EXISTS(SELECT VALUE u FROM it.UserRoles AS u)" OrderBy="it.UserRoles.RoleId">
</asp:EntityDataSource> 
```

产生以下错误：

> “RoleId”不是“Transient.collection[MyModel.UserRole(Nullable=True,DefaultValue=)]”的成员。要提取集合元素的属性，请使用子查询来迭代集合。

添加 Include="UserRoles" 没有帮助。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:30:36.460

好的。我找到了正确的语法。这里是：

`OrderBy="ANYELEMENT(SELECT VALUE SqlServer.MIN(r.RoleId) From it.UserRoles AS r)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:08:45.080

问题是单个用户可能有多个`UserRole`. 因此，您不能使用角色 ID 来订购用户集 - 没有与给定用户关联的单个角色 ID。这就是错误消息所说的 -`it.UserRoles`是一个集合，没有角色 id 属性。该属性存在于集合的元素 ( `UserRole`) 上。

我不确定您的订购逻辑（考虑到用户可以担任多个角色），但假设用户可以拥有一个且只有一个角色，您可以使用诸如`it.UserRoles.First().RoleId`获取您的订购的表达式。更好的方法是编辑您的模型以显示正确的多重性`User`-`UserRole`关系。

# c# - 如果 list1 的至少一个元素在 list2 中？

> ID：14577997
> 
> 赞同：1
> 
> 时间：2013-01-29T07:46:54.280
> 
> 标签：c#, .net, linq, list

具有以下内容：

```
public List<int> List1 { get; set; }
...
var x = GiveMeObject(); // x.List2 --> each element on list2 has an Id (int).
...
bool containsAtLeastOne = ??? 
```

验证 list1 的至少 1 个元素是否在 list2 中的最简单/最快/最短的方法（在 linq 中）是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T07:48:27.153

```
bool containsAtLeastOne  = x.List2.Any(li => List1.Contains(li.Id)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T07:54:33.607

选择：[`Intersect`](http://msdn.microsoft.com/de-de/library/system.linq.enumerable.intersect.aspx)

```
bool containsAtLeastOne = List1.Intersect(x.List2.Select(e => e.Id)).Any() 
```

如果您的集合越来越大，您应该使用`Intersect`而不是`Contains`，因为`Intersect`它至少与`Contains`. 根据您的收藏，`Contains`可能会很快变慢。

如果您的集合非常小（< 1000 个元素），那么这种差异可能无关紧要。

* * *

如果您不介意非 LINQ 方式和更多代码行，则可以使用

```
var tmp = new HashSet<int>(x.List2.Select(e => e.ID));
tmp.IntersectWith(list1);
bool containsAtLeastOne = tmp.Any(); 
```

这可能会比 LINQ 方法更快。

# google-maps - 按其中的标记大小获取前 5 个集群 - MarkerclusterPlus

> ID：14577998
> 
> 赞同：0
> 
> 时间：2013-01-29T07:46:58.957
> 
> 标签：google-maps, markerclusterer

我正在使用 MarkerclusterPlus 在谷歌地图 api 上进行聚类。我需要找出基于集群大小（标记大小）形成的前 5 个集群。

```
var totalCluster = that.markerCluster.getTotalClusters(); 
```

使用它我可以获得总集群我如何从这里移动来获得它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:26:16.127

markerClusterer的方法**`getClusters()`**返回一个包含所有簇的数组。

当您遍历此数组时，您可以使用集群的方法访问集群内的标记**`getMarkers()`**。返回数组的长度属性为您提供当前集群中的标记数。

根据这些信息创建一个数组，对其进行排序，然后`Array.slice()`在结果数组上使用以获取前 n 个。