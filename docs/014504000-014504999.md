# StackOverflow 问答 14504000-14504999

# javascript - 如何组合我的控制器 AngularJS？

> ID：14504002
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:41.263
> 
> 标签：javascript, angularjs

我有我的 MainCtrl（从 $routeProvider 和 html 调用）：

```
function MainCtrl($scope, $routeParams){
  //send data(see below) to AngularTemplate for apdate page
} 
```

我有我的函数，它可以获取任何数据：

```
function getData($scope, $http){
  /*
  * Nav Data(here my navigate-structure fo site)
  */
  $http({method: 'GET', url: 'data/main.json'}).
  success(function(data){
    //work with data and send it to MainCtrl
  });
  /*
  * News Data(Here my news)
  */
  $http({method: 'GET', url: 'data/news.json'}).
  success(function(data){
    //work with data and send it to MainCtrl
  });
} 
```

现在我明白了如何使用 .$on 和 .$broadcast 将数据从一个 Ctrl 发送到另一个 Ctrl。但是 getData 不是 Angular 控制器（它是一个 js 函数），它不理解我的 args（$scope 和 $http）。请告诉我，如何在第一页加载时调用 getdata 并将数据发送到 MainCtrl。如果你知道，请告诉我我能用我的 MainCtrl 做什么，他只能从 $routeProvider 调用。现在它首先从 html(ng-controller) 调用，然后从 $routeProvider 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:35:32.773

将您的数据获取代码包装在服务中。这里有两个很好的 SO 答案，展示了如何做到这一点：

*   [https://stackoverflow.com/a/12513509/215945](https://stackoverflow.com/a/12513509/215945)
*   [https://stackoverflow.com/a/14530508/215945](https://stackoverflow.com/a/14530508/215945)

上面的示例还展示了如何将您创建的服务（例如`myService`）注入到控制器中。您可以根据需要将此服务注入到尽可能多的控制器中。由于 Angular 服务是单例的，因此无论您的服务注入了多少控制器，您的数据获取代码都只会有一个实例。

您的服务还可以[缓存 $http 请求的结果](https://stackoverflow.com/questions/14117653/how-to-cache-an-http-get-service-in-angularjs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:51:03.770

将 getData 函数放在角度控制器中。它会理解 $scope 和 $http 服务

或制作 mainCtrl.... 的原型方法 set() 并在其中传递 $scope.var = value

```
 MainCtrl.prototype = {
        set = function(value){
            $scope=value;

         }

    } 
```

# php - PHP CURL 响应中的问号

> ID：14504004
> 
> 赞同：4
> 
> 时间：2013-01-24T14:45:43.977
> 
> 标签：php, curl, encoding, character-encoding

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:51:52.077

我猜你错过了选项**CURLOPT_ENCODING**

请尝试以下代码。

```
$ch = curl_init('http://example.com/?api=**');
curl_setopt($ch, CURLOPT_HTTPHEADER, 'text/plain;charset=UTF-8');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_ENCODING, 'UTF-8');
$results = curl_exec($ch);
var_dump($results); 
```

# android - Getting ANR every time When Loading Leadbolt Add

> ID：14504005
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:44.820
> 
> 标签：android, leadbolt

I am getting ANR every Time when App run while loading Leadbolt ads

```
 myController = new AdController(this, "478326468");
             myController.loadAd(); 
```

When I remove the above line , it runs perfectly.

Logs :

```
 01-24 19:11:52.404: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.404: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.424: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.424: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.444: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.444: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.474: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.474: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.494: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.494: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.524: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.524: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.534: D/dalvikvm(3563): GC_CONCURRENT freed 425K, 14% free 10109K/11719K, paused 14ms+2ms, total 36ms
01-24 19:11:52.544: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.544: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.554: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.554: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.574: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.574: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.594: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.594: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.624: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.624: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.644: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.644: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.664: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.664: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.684: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.684: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.934: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.934: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.964: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.964: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:52.974: D/dalvikvm(3563): GC_CONCURRENT freed 415K, 14% free 10136K/11719K, paused 4ms+3ms, total 28ms
01-24 19:11:52.984: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:52.984: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.004: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.004: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.014: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.014: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.034: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.034: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.054: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.054: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.064: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.064: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.685: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.685: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.705: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.705: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.725: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.725: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.755: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.755: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.785: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.785: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.805: D/dalvikvm(3563): GC_CONCURRENT freed 454K, 14% free 10137K/11719K, paused 14ms+13ms, total 51ms
01-24 19:11:53.805: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.805: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.825: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.825: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.845: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.845: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.875: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.875: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.895: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.895: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.915: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.915: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.945: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.945: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.965: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.965: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:53.985: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:53.985: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.005: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.005: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.035: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.035: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.045: D/dalvikvm(3563): GC_CONCURRENT freed 453K, 14% free 10110K/11719K, paused 14ms+2ms, total 35ms
01-24 19:11:54.055: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.055: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.065: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.065: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.075: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.075: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.095: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.095: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.115: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.115: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.135: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.135: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.165: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.165: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.185: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.185: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.206: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.206: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.236: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.236: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.246: D/dalvikvm(3563): GC_CONCURRENT freed 414K, 14% free 10110K/11719K, paused 5ms+2ms, total 29ms
01-24 19:11:54.256: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.256: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.276: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.276: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.286: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.286: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.306: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.306: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.326: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.326: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:11:54.346: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:11:54.346: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:02.033: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:02.033: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.350: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.350: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.380: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.380: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.400: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.400: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.410: D/dalvikvm(3563): GC_CONCURRENT freed 414K, 14% free 10109K/11719K, paused 4ms+2ms, total 23ms
01-24 19:12:09.430: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.430: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.440: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.440: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.460: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.460: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:09.480: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:09.480: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.654: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.654: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.674: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.674: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.704: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.704: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.724: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.724: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.754: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.754: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.784: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.784: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.794: D/dalvikvm(3563): GC_CONCURRENT freed 414K, 14% free 10134K/11719K, paused 4ms+3ms, total 28ms
01-24 19:12:12.804: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.804: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.814: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.814: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.834: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.834: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.854: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.854: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.874: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.874: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.894: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.894: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.914: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.914: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.934: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.934: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.964: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.964: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:12.984: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:12.984: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.024: D/dalvikvm(3563): GC_CONCURRENT freed 437K, 14% free 10114K/11719K, paused 5ms+2ms, total 37ms
01-24 19:12:13.024: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.024: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.034: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.034: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.054: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.054: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.084: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.084: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.104: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.104: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.124: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.124: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.154: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.154: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.184: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.184: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.204: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.204: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.214: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.214: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.254: D/dalvikvm(3563): GC_CONCURRENT freed 419K, 14% free 10108K/11719K, paused 15ms+3ms, total 38ms
01-24 19:12:13.264: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.264: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.284: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.284: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.304: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.304: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.324: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.324: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one.
01-24 19:12:13.344: W/SingleClientConnManager(3563): Invalid use of SingleClientConnManager: connection still allocated.
01-24 19:12:13.344: W/SingleClientConnManager(3563): Make sure to release the connection before allocating another one. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:32:25.863

您的应用程序中是否有任何其他网络连接运行可能会干扰 Leadbolts 广告请求？

尝试将您的代码作为您应用程序中的第一件事（在 onCreate 中）运行，并注释掉任何其他与应用程序相关的代码，尤其是使用 Web 连接的代码。

# image - 投影以形成图像的 3D 点

> ID：14504006
> 
> 赞同：2
> 
> 时间：2013-01-24T14:45:46.830
> 
> 标签：image, 3d, 2d, projection, perspective

我想要你对我遇到的问题的智力建议。`(x,y,z,I)`我有 3D 点数据以及代表 3D 场景的强度场。我希望将此 3D 数据转换为图像（具有强度值的 2D 矩阵`'I'`）。

我计划使用针孔相机模型（[维基百科](http://en.wikipedia.org/wiki/Pinhole_camera_model)）对 3D 点进行透视投影。

`x'=f*x/z` 和`y'=f*y/z`

我应该选择什么值`'f'`？图像的大小如何取决于它？（比如说我需要一张 500*500 大小的图片，适合什么值`'f'`）

由于二维图像中的坐标是整数，我应该如何量化`x'`和`y'`值并替换相应的强度值？例如，如果我得到两组（通过使用`f=10`）作为

```
x,y,z,I
(3,1,2,128) -> x',y',I(15,5,128)
(3.1,1.1,2,150) -> (15.5,5.5,150) 
```

在上述两组中，我应该只是四舍五入`x'`和`y'`值并在该坐标处使用它的强度，还是应该使用非整数坐标的强度平均值？

生成的图像是否能清楚地描绘 2D 场景（如从相机拍摄的照片）？

将非常感谢您的想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:24:54.787

是否使用平均强度或最近邻或其他类型的插值取决于您的应用程序。例如，OpenGL 在执行此操作时为您提供选择选项（请参阅 GL_TEXTURE_MIN_FILTER 和 GL_TEXTURE_MAG_FILTER）。

我建议你尝试不同的方法，看看它们是什么样子的；线性和最近邻插值之间的区别是一行代码。有关您的预期应用程序的更多信息可能会有所帮助。

算法上最简单的投影方法不一定是计算效率最高的。如果不是投影点，而是从 2D 像素位置开始，找到相应的附近 3D 点并执行插值（即使只是最近邻插值）以获得强度，则编码要容易得多。这将阻止您在图像中出现例如间隙，并且您不再需要担心由于放大以及像素之间的空间而进行插值。

如何再次投影数据取决于您要实现的目标，因此有关应用程序的更多信息将很有用 - 例如，您是否尝试将所有点都放入图像中？还是您要填充图像？还是云的某些特性使它在投影时很可能被挤压成正方形？如果它是由图像阵列收集的，那么应该可以轻松地对其进行投影（并且上述大部分机制都是不必要的，因为它应该很容易恢复原始坐标）。否则，可能会有图像中没有出现的点或图像中没有对应点的部分。

如果我做出一些假设，那么我可以求解极限的投影方程。如果我们假设一个 640 x 480 的图像并且投影的中心在图像的中心，那么我们有：

```
x'=f*x/z + 320 
```

（请注意，这是在滥用焦距，因为通常将其映射到像素上，而真实模型将其映射到图像阵列的比例上，然后再映射到像素上）。

设点数组中的最大值和该点`greatestx:x`的对应值`x``greatestx:z``z`

```
639.5=f*greatestx:x/greatestx:z + 320 
```

所以，

```
f = 319.5*greatestx:z / greatestx:x 
```

如果对最小的 x 值、最小的 y 值和最大的 y 值执行此操作：

```
f = -319.5*smallestx:z / smallestx: x

f = 239.5*greatesty:z / greatesty: y

f = -239.5*smallesty:z / smallesty: y 
```

Now if we choose the smallest `f` of the above then we guarantee the point cloud to fit into the image (but there might be gaps). If we choose the largest `f` then we guarantee there to be no gaps in the image (but there might be parts that don't fit onto the image).

# javascript - 在nodejs中使用一些同步代码可以吗

> ID：14504009
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:55.403
> 
> 标签：javascript, node.js, asynchronous, callback

我知道对于 I/O 操作（即数据库查询、Web 请求和磁盘访问），您必须使用这样的回调

```
fs = require('fs')
fs.readFile('test.txt', 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  console.log(data);
}); 
```

但是说如果你有这样的同步代码

```
function Player(name){
    this.name = name;
    this.score = 0;
}
Player.prototype.calcScore = function(){
    //some special code here to calculate the score
    this.score =+ 10;
}
var player = new Player("Sam");
player.calcScore();
console.log(player); 
```

或者您是否需要以如下回调样式编写它，其中 calcScore 方法可能仅包括一个 for 循环和一个 if 语句，并且不查询数据库等。

```
function Player(name){
    this.name = name;
    this.score = 0;
}

Player.prototype.setScore = function(data){
    this.score = data
}

Player.prototype.calcScore = function(callback){
    //some special code here to calculate the score
    var newscore = this.score += 10;
    callback(null, newscore);
}

var player = new Player("Sam");

player.calcScore(function(err, data){
    if(err){
        return console.log(err);
    }
    player.setScore(data);
    console.log(player);
}); 
```

我想我有点困惑，何时使用异步代码或同步代码。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:48:54.460

当您所做的只是 JavaScript 语句时，您不需要设置异步回调。当您的代码处理“现实世界”时，会使用异步 API。当您访问 IO 设备或网络时，会使用异步 API，因为活动中存在不可预测的延迟。

如果您要进行*大量*计算，则有一些方法可以设置“延续”模型，允许定期中断工作，但这并不是一回事。

*编辑*— 一条评论明智地指出，即使不是真的有必要，使用异步 API 设计子系统也没有什么坏处。我还要注意，使用回调进行设计并不是*只*针对异步机制进行的。充分利用 JavaScript 函数即值的灵活性是有充分理由的。

# windows - I want to run an .exe command from Perl under Windows

> ID：14504010
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:58.323
> 
> 标签：windows, perl, cmd

I've already gotten Perl to create an array of usernames (@ua); now I need to check to see if each one exists in Active Directory. The best way I thought of to do this is to run dsquery on each user and determine if the command exits with zero or nonzero. I wrote the following:

```
foreach(@ua)
{
    $out = `C:\\Windows\\System32\\dsquery.exe user -samid $_`;
} 
```

When I run this, I get a repeated list of this in the command line console:

> 'C:\Windows\System32\dsquery.exe' is not recognized as an internal or external command, operable program or batch file.

However, dsquery.exe *is* in that location, as I can prove by simply running it:

```
C:\verify_users>C:\Windows\System32\dsquery.exe user -samid ...
"CN=...,OU=...,OU=...,OU=...,DC=...,DC=...,DC=..." 
```

Any thoughts?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:53:47.500

如果需要运行外部命令，可以使用系统命令：

```
system("C:\\Windows\\System32\\dsquery.exe user -samid $_"); 
```

如果您需要更深入地控制命令，请尝试此模块：[Expect](http://search.cpan.org/perldoc?Expect.pm)

但是，如果您真的想对 Active Directory 进行查询，最好使用特定的 CPAN 模块，例如[Net::LDAP](http://search.cpan.org/perldoc?Net%3a%3aLDAP)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:21:57.990

正如 Miguel 所说，请改用 Net::LDAP。

```
#!/usr/bin/perl
use warnings;
use strict;

use Net::LDAP;

my $tgt_user = shift or die "Usage: fetch_user_details <username>";

my $Server   = 'server.foo.local';
my $User     = 'user@foo.local';
my $Password = 'userpass';
my $LdapBase = 'OU=SBSUsers,OU=Users,OU=MyBusiness,DC=foo,DC=local';
# To AND conditions: "(&(cond1) (cond2))"
my $Filter   = "SAMAccountName=$tgt_user";

# Bind a connection
my $ad = Net::LDAP->new("ldap://$Server")
        or die("Could not connect to LDAP server: $Server");
my $res = $ad->bind( $User, password=>$Password );
if ($res->code) { die("Unable to bind as user $User: ".$res->error); }

# Run the search
# Could have attrs=>'a,b,c' for a search too
$res = $ad->search(base=>$LdapBase, filter=>$Filter);
if ($res->code) { die("Failed to search: ".$res->error); }

# Display results
my $count = $res->count;
print "Found $count matches\n";

for my $entry ($res->entries) {
        $entry->dump;
        # print $entry->get_value('givenname'),"\n";
}

$ad->unbind;
exit; 
```

假设您的域命名类似于带有 SBS 的 machine.foo.local ，以上内容几乎可以做到 - 如果不是，您需要在谷歌上搜索一下以了解如何设置 LdapBase。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:22:20.423

如果要使用输出，请使用以下`open`功能：

```
open(N, "C:\\Windows\\System32\\dsquery.exe user -samid $_ |"); 
```

或者，如果您只想运行命令，请使用以下`system`功能：

```
system("C:\\Windows\\System32\\dsquery.exe user -samid $_"); 
```

# google-apps-script - 我可以访问图表中的选定数据吗

> ID：14504014
> 
> 赞同：2
> 
> 时间：2013-01-24T14:46:15.623
> 
> 标签：google-apps-script, google-visualization

我使用 Google Apps 脚本创建了一个用户界面，该用户界面在图表对象（如 TableChart 和 PieChart）中显示数据。

图表对象允许用户选择饼图的一部分和表格中的多条线。我希望我的代码知道图表中选择的数据是什么。

我有办法吗？如果没有，我将在 GAS 问题跟踪器中填写功能请求。

谢谢

蒂埃里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:39:16.527

是的。请参阅[getSelection()的文档](https://developers.google.com/chart/interactive/docs/reference#visgetselection)

> **getSelection() [可选]**
> 
> 这可以由希望让您访问图形中当前选定数据的可视化选择公开。
> 
> ```
> selection_array getSelection() 
> ```
> 
> **退货**
> 
> selection_array 选定对象的数组，每个对象描述用于创建可视化的基础表（DataView 或 DataTable）中的数据元素。每个对象都有属性行和/或列，以及底层数据表中所选项目的行和/或列的索引。如果 row 属性为 null，则选择是一列；如果 column 属性为 null，则选择为一行；如果两者都不为空，则它是一个特定的数据项。您可以调用 DataTable.getValue() 方法来获取所选项目的值。检索到的数组可以传递给 setSelection()。
> 
> **例子**
> 
> ```
> function myClickHandler(){
>   var selection = myVis.getSelection();
> 
>   for (var i = 0; i < selection.length; i++) {
>     var item = selection[i];
>     if (item.row != null && item.column != null) {
>       message += '{row:' + item.row + ',column:' + item.column + '}';
>     } else if (item.row != null) {
>       message += '{row:' + item.row + '}';
>     } else if (item.column != null) {
>       message += '{column:' + item.column + '}';
>     }
>   }
>   if (message == '') {
>     message = 'nothing';
>   }
>   alert('You selected ' + message);
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:59:36.817

我结束了这个问题，因为现在很明显，目前没有解决方案可以使用 GAS 访问图表中的选定数据。

此处已填写功能请求[http://code.google.com/p/google-apps-script-issues/issues/detail?id=2351](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2351)。

功能请求已被接受。实施新功能后，我将编辑此答案。

干杯，

蒂埃里

# xcode - Singleton value still zeroes

> ID：14504016
> 
> 赞同：0
> 
> 时间：2013-01-24T14:46:20.130
> 
> 标签：xcode, gps, singleton

I'm trying to use the singleton concept to retain GPS information, but I do no see where is the problem my variable display just zeroes.

Singleton.h:

```
@interface Singleton : NSObject

@property (readwrite) NSString *propertyA;
@property (readwrite) NSString *propertyB;
@property (readwrite) NSString *propertyC;

+ (Singleton *)sharedInstance;

@end 
```

Singleton.m:

```
#import "Singleton.h"

@interface Singleton ()
{
    NSString *variableA;
    NSString *variableB;
    NSString *variableC;
}
@end

@implementation Singleton

static Singleton *sharedInstance = nil;

+ (Singleton *)sharedInstance
{
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [[Singleton alloc] init];
        }
    }
    return sharedInstance;
}

+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [super allocWithZone:zone];
            return sharedInstance;
        }
    }
    return nil;
}

- (id)init
{
    self = [super init];
    if (self)
    {
        variableA = nil;
        variableB = nil;
        variableC = nil;
    }
    return self;
}

@end 
```

in OverlayViewController.m:

```
#import "Singleton.h"

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
        NSLog(@"didUpdateToLocation: %@", newLocation);
        CLLocation *currentLocation = newLocation;

        if (currentLocation != nil) {
            _longitudeLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
            _latitudeLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
        }

        // Setting properties
        NSString *variableA = _latitudeLabel.text;
        [[Singleton sharedInstance] setPropertyA:variableA];      
} 
```

Then I recall the value a bit further down ...

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
     NSString *variableA = [[Singleton sharedInstance] propertyA];    
     NSLog(@"Latitude = %.8f", variableA);
} 
```

Thanks Regis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:57:12.207

`@property (readwrite) NSString *propertyA;`
`@property (readwrite) NSString *propertyB;`
`@property (readwrite) NSString *propertyC;`

我猜上面的变量没有setter和getter，这意味着你需要@synthesize它们。

这就是为什么下面的代码没有设置 PropertyA 值的原因。

`[[Singleton sharedInstance] setPropertyA:variableA];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:53:23.413

我的第一个猜测是您在任何地方都没有任何@synthesize，所以没有设置器/获取器

如果这不起作用，那么你应该将你的变量声明移动到你的 .h 文件中，我不明白你为什么要把它们放在你的 .m 上

我指的是：

```
@interface Singleton ()
{
    NSString *variableA;
    NSString *variableB;
    NSString *variableC;
}
@end 
```

**编辑：** 处理单例时的两个好习惯：

1）在您的方法中声明您的`static ClassName *singleton`内部，以便您的类中的其他方法无法直接访问它并且需要使用它来请求它`[[self class] sharedInstance];`

2) 使用 dispatch_once 来保证线程安全

```
+ (FooBar *)sharedInstance {
    static dispatch_once_t pred;
    static FooBar *_sharedInstance = nil;

    dispatch_once(&pred, ^{
        _sharedInstance = [[[self class] alloc] init];
    });

    return _sharedInstance;
} 
```

# asp.net - 内存泄漏和负载测试

> ID：14504017
> 
> 赞同：0
> 
> 时间：2013-01-24T14:46:31.870
> 
> 标签：asp.net, memory-leaks, tsung

我做了很多研究，但无法找到有关以下内容的任何信息。

我正在使用 asp.net 4.0，我创建了一个 Web 应用程序。我想知道如何检查我创建的程序中的内存泄漏，可以使用什么工具来做到这一点也想知道我可以用来做负载测试的好工具同一个网站，我可以使用哪个工具，因为所有推荐的工具都不理想我用于负载测试的工具是 tsung 和其他一些免费工具

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:48:29.893

您需要使用内存分析器。

有[免费的](https://stackoverflow.com/questions/308816/any-good-free-net-profiler)和商业的，其中一些比较知名的是 RedGate 的ANTS [Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/) 、 JetBrains的[dottrace和 SciTech 的](http://www.jetbrains.com/profiler/)[memprofiler](http://memprofiler.com/)。

这些本质上都与正在运行的进程挂钩，测量内存使用量等 - 为您提供有关应用程序性能和内存使用情况的报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:24:34.927

我喜欢[Selenium Grid](http://selenium-grid.seleniumhq.org/)。您还可以查看[StresStimulus](http://community.stresstimulus.com/forum)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:57:24.310

您可以使用Windows SDK 附带的[WinDbg 。](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)以下视频应为您指明正确的方向：

*   [http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-13-WinDbg](http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-13-WinDbg)
*   [http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-14-WinDbg-SOS](http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-14-WinDbg-SOS)
*   [http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-21-WinDbg-Memory-User-Mode](http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-21-WinDbg-Memory-User-Mode)
*   [http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-22-WinDbg-Memory-Kernel-Mode](http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-22-WinDbg-Memory-Kernel-Mode)

# algorithm - Finding Path in graph( specific Length)

> ID：14504023
> 
> 赞同：1
> 
> 时间：2013-01-24T14:46:54.630
> 
> 标签：algorithm, graph, complexity-theory

we are looking for an algorithm, that can find a path in a undirected weighted graph (from 's' to 't' for instance), that the total weights of all it's edges is a fixed number ('m' for instance) ideas.. anyone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:07:16.763

使用诸如 DFS 和回溯之类的东西。如果你超过了体重 m 并且你没有达到你的目标，你就回溯。我不确定你是否允许在两个节点之间来回切换，但如果你这样做了，你就不能在适当的位置构建一棵树，而必须构建一个堆栈。

我有一种直觉，首先搜索最短路径然后让它变长会是一种更快的方法，但同样的感觉告诉我，它可能是错误的，就像贪婪算法对旅行推销员来说是错误的一样。

# android - onLocationChanged 只调用一次，不刷新

> ID：14504027
> 
> 赞同：6
> 
> 时间：2013-01-24T14:47:03.343
> 
> 标签：android, android-location

出于某种原因，我制作了一个小 gps 应用程序 onLocationChanged 不刷新，它只运行一次，在应用程序启动时。

这是我的代码：

```
public BackgroundLocationService() {
        super("myintentservice");

        locManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        Criteria crt = new Criteria();
        crt.setAccuracy(Criteria.ACCURACY_FINE);
        String bestProvider = locManager.getBestProvider(crt, true);

        boolean gps_enabled;
        boolean network_enabled;
        boolean best_enabled;

        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        best_enabled = locManager.isProviderEnabled(bestProvider);

        if (best_enabled) {
            locManager.requestLocationUpdates(bestProvider, 15000, 20, locListener);
            Log.i(TAG, "Best enabled: " + bestProvider);
        } else {
            Log.i("Location Provider: ", "best not enabled: " + bestProvider);
            if (gps_enabled) {
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
                Log.i(TAG, "gps enabled!");
            }
            if (network_enabled) {
                locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
                Log.i(TAG, "network enabled!");
            }
        }

    }

    class MyLocationListener implements LocationListener {
        public void onLocationChanged(Location location) {

            if (location != null) {

                //locManager.removeUpdates(locListener);
                longitude = Double.toString(location.getLongitude());
                latitude = Double.toString(location.getLatitude());

                Log.i(TAG,"Location has CHANGED!");
            }
        }
        public void onProviderDisabled(String arg) {}
        public void onProviderEnabled(String arg) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    } 
```

“位置已更改！” 每次应用启动时，消息仅显示一次。我在办公室，但我可以从我的位置移动至少 5-10 米，并且所有提供商都已启用，所以它必须没问题，不是吗？

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:59:21.903

当您注册位置侦听器时，您请求的更新时间最短为 15 秒，最短距离为 20 米。由于您在办公室内，因此您不太可能获得足够准确的 GPS 定位来实际检测 5-10 米的移动。你试过在外面调试吗？同样，如果您启用了模拟位置，请将模拟坐标发送到模拟器，以确保您的应用在更新位置时按预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:03:18.133

尝试 -

```
 locManager.requestLocationUpdates(bestProvider, 0, 0, locListener); 
```

# git - Git rebase 子树

> ID：14504029
> 
> 赞同：11
> 
> 时间：2013-01-24T14:47:09.467
> 
> 标签：git, branch, rebase

假设我有以下场景：

```
 o (master)   
   /       o--o (WIP1)
  /       /
 o--o--o--o--o--o (WIP2)
(X)       \
           o--o (WIP3) 
```

是否有一个 git 命令创建一个新分支，以便它包含分支 X 之后的子树？我想执行“大型变基”，我希望三个 WIP 分支基于 master。

我知道我可以通过一些 Bash 脚本来做到这一点，但我想知道如何使用 git 命令来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T16:14:17.030

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-24T12:13:50.500

我已将此问题标记为重复。我会写下我解释 [的另一个答案](https://stackoverflow.com/questions/17315285/rebasing-a-tree-a-commit-branch-and-all-its-children/45844847)，但使用你的例子。

我用于此类用例的方法是将所有要移动的分支合并到 1 个*公共人工*节点中，然后使用带有`--preserve-merges`选项的 rebase 命令。合并所有分支将**公开 1 个端点**，该端点将用作`rebase --onto`. 起点通常很明显，要移动的子树的原点。

合并以获取*子树端点*时，应明确避免冲突。因此，应指示合并命令使用`-Xours`选项自动解决它们。合并结果并不重要，因为这些*人为*的合并节点将在 rebase 之后被丢弃。

建议创建一个新的分支*包*，以免丢失原始引用。在上面的示例中，将执行以下命令：

```
$ git checkout -b pack WIP1 # create new branch at 'WIP1'
$ git merge -s recursive -Xours WIP2 # merges WIP2 into pack (node p2)
$ git merge -s recursive -Xours WIP3 # merges WIP3 into pack 
```

下面可以看到树会变成什么。通过合并创建了两个新的*人工*节点 *p2*和*pack 。*

```
 o (master)
     /
    /          (WIP1)  (p2)
   /        o-----o-----o----o (pack)
  /        /           /    /
 o--o--o--o-----o-----o    / (WIP2)
(X)        \              /
            o------------o (WIP3) 
```

现在是时候重新设置基准了。*由于现在所有分支（ pack* ）都有一个公共端点，因此很容易移动整个子树：

```
$ git rebase --preserve-merges --onto master X pack 
```

产生这个：

```
 (WIP1') (p2')
                   o-----o-----o----o (pack')
   (master)       /           /    /
 o----o----o--o--o-----o-----o    / (WIP2')
(X)               \              /
                   o------------o (WIP3') 
```

现在是时候重新排列参考了。我不知道为什么，在某些情况下引用被移动，而在其他情况下则没有。为每个参考 WIP1、WIP2、WIP3 或您需要的任何内容键入此内容：

```
$ git checkout WIP1
$ git reset --hard <WIP1' hash> 
```

最后，摆脱为生成公共子树末端节点而创建的*人工提交。*

```
$ git branch -D pack
$ git branch -D p2 # if there is any 
```

所以最终的树是：

```
 (WIP1')
                   o-----o
   (master)       /
 o----o----o--o--o-----o-----o (WIP2')
(X)               \
                   o------------o (WIP3') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:29:57.017

```
 o (master)   
   /       o--o (WIP1)
  /       /
 o--p--p--o--o--o (WIP2)
(X)      (Y)
          \
           o--o (WIP3) 
```

这应该是一个（您可以在“[如何将某些提交移动到 git 中的另一个分支？](https://stackoverflow.com/a/2369516/6309)`rebase --onto` ”中看到一个示例）：

```
 git rebase --onto master X WIP1
 git rebase --onto master X WIP2
 git rebase --onto master X WIP3 
```

从[Chronial](https://stackoverflow.com/users/758345/chronial)的[测试](https://stackoverflow.com/questions/14504029/git-rebase-subtree/14504917#comment20218769_14504917)中，这将给出：

```
 p'--p'--o--o (WIP2)
        /
 o-----o-----p--p--o--o--o (WIP1)
(X) (master)   (Y')   
        \
         p''--p''--o--o (WIP3) 
```

所以第一次变基是可以的，但是你需要得到 Y SHA，并且：

```
 git rebase --onto Y' Y WIP2
 git rebase --onto Y' Y WIP3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-30T17:32:45.087

使用[`git-branchless`](https://github.com/arxanas/git-branchless)这套工具，您可以直接变基子树：

```
$ git move -b WIP1 -d master 
```

免责声明：我是作者。

* * *

如果您想坚持使用基本 Git，您可以使用[此答案](https://stackoverflow.com/a/45861361/344643)中的方法，但使用新`--rebase-merges`选项。做一个虚拟的合并提交：

```
$ git checkout WIP1
$ git merge WIP2 WIP3
...add all conflicts and resolve... 
```

然后以交互方式执行变基。生成的变基计划将是您想要的，除了您应该删除最后一个`merge`命令：

```
$ git rebase -i master --rebase-merges
...example editor contents below...
label onto

# Branch WIP1
reset abc123 
pick abc456
pick abc789
label abcdef

reset onto
pick bcd123
pick bcd456
pick bcd789

## REMOVE THIS LINE:
# merge -C abcdef 
```

# excel - 如何编写 Excel VBA 代码以重复直到到达工作表边缘？

> ID：14504031
> 
> 赞同：0
> 
> 时间：2013-01-24T14:47:12.047
> 
> 标签：excel

我想编写一些 VBA，它在单元格上重复执行一个操作，直到它到达工作表边缘，例如 A 列，无论它从哪里开始。我发现如果我告诉它重复的次数多于列数，我会收到错误，因为代码试图移动到 A 列左侧的列。如何限制循环在 A 列停止？

例如，如果我使用

```
 For n = 1 To 5
'
ActiveCell.Offset(0, -1).Range("A1:A2").Select
Selection.merge

'
Next n 
```

然后，如果我从 G 列中的一个单元格开始选择它就可以了，但是如果我在 F 列中选择了一个或更少的单元格，它就会崩溃。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:59:03.027

这应该做你想要的。请注意，VBA 的一个关键原则是几乎不需要`Select`单元格。（虽然宏记录器不知道这一点）。

```
Sub MergeEm()
Dim n As Long
Dim cellActive As Excel.Range
Dim CellRow As Long

Set cellActive = ActiveCell
CellRow = cellActive.Row
'Stepping backwards - not necessary, but in spirit with your original code
For n = cellActive.Column To 1 Step -1
    cellActive.Parent.Cells(CellRow, n).Range("A1:A2").Merge
Next n
End Sub 
```

# javascript - 如何诊断我的扩展程序导致的 Firefox 启动时错误？

> ID：14504033
> 
> 赞同：0
> 
> 时间：2013-01-24T14:47:13.483
> 
> 标签：javascript, firefox

当我打开 Firefox，然后立即打开错误控制台时，我看到：

```
Timestamp: 01/24/2013 09:43:33 AM
Error: this.docShell is null
Source File: chrome://global/content/bindings/browser.xml
Line: 323 
```

如果我 dsable/remove 我正在开发的扩展，则该错误不会在启动时显示。

我试图通过删除我的扩展程序代码的不同部分并重新启动来定位此错误的原因，但这并没有证明是有效的。我至少需要一个堆栈跟踪来了解引用的`this.docShell`内容以及`this`该上下文中的内容。希望我所引用/调用的内容最终会导致错误的引用。

# sql-server-2008 - 将 ISNULL 合并到 CASE 表达式中

> ID：14504035
> 
> 赞同：-2
> 
> 时间：2013-01-24T14:47:29.453
> 
> 标签：sql-server-2008, isnull

我有以下`CASE`表达式，并且该`ISNULL`部分未注册：

```
CASE WHEN IsNull(2010) THEN 0 END) * 
CASE WHEN IsNumeric([Dur_In_Hours]) = 1 THEN 
  CAST([Dur_In_Hours] AS FLOAT) ELSE 0 END) AS Cost 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:57:00.187

不幸的是，您使用的`IsNull()`功能错误。如果您正在测试列是否为空，那么您将使用：

```
CASE 
  WHEN 2010 is null 
  THEN 0 
END 
* 
CASE 
  WHEN IsNumeric([Dur_In_Hours]) =1 
  THEN CAST([Dur_In_Hours] AS FLOAT) 
  ELSE 0 
END AS Cost 
```

如果要使用，`IsNull()`则可以使用`IsNull([2010], 0)`来替换该`CASE`表达式：

```
IsNull([2010], 0)
* 
CASE 
  WHEN IsNumeric([Dur_In_Hours]) =1 
  THEN CAST([Dur_In_Hours] AS FLOAT) 
  ELSE 0 
END AS Cost 
```

或者您可以使用`COALESCE`替换第一个`CASE`：

```
COALESCE([2010], 0)
* 
CASE 
  WHEN IsNumeric([Dur_In_Hours]) =1 
  THEN CAST([Dur_In_Hours] AS FLOAT) 
  ELSE 0 
END AS Cost 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:56:53.620

[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)是一个表达式，而不是一个语句。这是一个微妙的挑剔，但[区别很重要](https://sqlperformance.com/2014/06/t-sql-queries/dirty-secrets-of-the-case-expression)，恕我直言。

我想你的意思是：

```
CASE WHEN [2010] IS NULL THEN 0 END 
```

但这根本没有任何意义，除非您在那里对 2010 进行硬编码，但计划稍后使用变量或列名。

[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)与您所追求的完全不同（至少据我所知）。它的工作方式与在 Access 中的工作方式不同。出于这个原因，我*通常*推荐[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)它，在大多数情况下它的功能相似。我去年写了这个技巧来帮助区分：

*   [在 SQL Server 中决定 COALESCE 和 ISNULL](http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/?utm_source=AaronBertrand)

# file - Mathematica：对多个文件执行相同的操作（导入、获取、...）

> ID：14504036
> 
> 赞同：0
> 
> 时间：2013-01-24T14:47:30.840
> 
> 标签：file, automation, wolfram-mathematica, mathematica-8

我目前正在使用 Mathematica 处理一些实验数据。

我有几个文件，我基本上想做同样的事情。目前，我只是复制并粘贴所有内容并更改文件名，如下所示：

```
rechn1 = Import[
   "/path/4He.H2O.MeV14460.ddd.gd.dat", "Table"];
r1 = Length[rechn1];
rechn1a = Take[rechn1, {9, r1}];
plotr1 = ListPlot[rechn1a]

rechn2 = Import[
   "/path/4He.H2O.MeV15000.ddd.gd.dat", "Table"];
r2 = Length[rechn2];
rechn2a = Take[rechn2, {9, r2}];
plotr2 = ListPlot[rechn2a]

rechn3 = Import[
   "/path/4He.H2O.MeV15670.ddd.gd.dat", "Table"];
r3 = Length[rechn3];
rechn3a = Take[rechn3, {9, r3}];
plotr3 = ListPlot[rechn3a] 
```

等等。我不是特别精通 Mathematica，所以这对我来说似乎是一个不错的选择。复制、粘贴、更改一些数字。

但是，我现在必须处理更多这样的数据。那么，有没有办法告诉 Mathematica 以某种方式处理所有文件？也许也只是改变一些细节？例如，处理相同的所有内容，但有不同的 PlotStyle 或绘图标题？

找到一种方法来自动化这个过程会很棒，因为我现在有很多文件要处理，复制和粘贴不再是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:16:04.267

与 Mathematica 一样，有多种方法可以做你想做的事。以下是一些您可以组装成适合您的解决方案的部分。

您可以将 4 个函数调用的序列替换为它们的组合，如下所示：

```
ListPlot[Drop[Import["/path/4He.H2O.MeV15670.ddd.gd.dat", "Table"], 9]] 
```

这最初很难解释（对您来说，Mathematica 不会有问题），但在接下来的内容中使用起来会更容易，并且会避免不必要的临时变量使您的工作区变得混乱。请注意，我已将您的替换`Take[expr,{9,Length[expr]}]`为等效项`Drop[expr,8]`，以避免调用`Length`导入的数据文件。

现在我们可以把它整理成一个函数，比如：

```
makePlot[fn_String] := ListPlot[Drop[Import[fn, "Table"], 8]] 
```

接下来，让我们获取您需要的所有文件名。我想您当前的工作目录是“/path”的父目录，并且调用

```
hefiles = FileNames["4He.*.ddd.gd.dat", {"*"}, Infinity]; 
```

将返回所有输入文件的名称列表。让我们修改`makePlot`函数，原因马上就会变得显而易见：

```
makePlot[ix_Integer, fn_String] := myPlots[ix] = ListPlot[Drop[Import[fn, "Table"], 9]]; 
```

现在，你可以写

```
Do[makePlot[i,heFiles[[i]]],{i,1,Length[heFiles}] 
```

如果我的语法正确并且匹配了所有的括号，这应该可以用一个语句来制作所有的情节。它们现在将存储为`myPlots[1], myPlots[2], ...`.

如果您想为您的`ListPlot`命令设置选项，只需将定义修改为`makePlot`类似

```
makePlot[fn_String] := ListPlot[Drop[Import[fn, "Table"], 8],plotOption-> setting, plotOption2->setting2] 
```

或者，如果您想在 Mathematica 知识上取得飞跃式发展，请研究该`Options`函数，您可以修改`makePlot`以将选项作为（可选）参数并将它们传递给`ListPlot`.

# c# - AndroidManifest.xml 已经定义了可调试的？？？怎么了？

> ID：14504037
> 
> 赞同：1
> 
> 时间：2013-01-24T14:47:31.480
> 
> 标签：c#, android, android-manifest, monodevelop

好的，每当我尝试构建我的应用程序时，我都会收到以下警告，该警告会阻止应用程序正确构建并阻止 Resource.designer.cs 文件更新。

警告：AndroidManifest.xml 已经定义了可调试的（在[http://schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android)中）；使用清单中的现有值。

我能做些什么来解决这个问题？这让我疯狂。

# authentication - 使用 Windows Identity Foundation 在 iframe 中验证外联网网站

> ID：14504039
> 
> 赞同：1
> 
> 时间：2013-01-24T14:47:35.450
> 
> 标签：authentication, iframe, wif, claims-based-identity

场景：一些网站必须通过我公司外联网上的 iframe 显示。Extranet 使用 SSL 和基于 Active Directory 的 Windows 身份验证。每个 iframe 的网站都需要经过身份验证的用户，但要求用户不应被要求手动登录。每个网站的身份验证机制尚未确定。

问题：我需要了解如何在 iframe 中完成自动登录。我可以要求 iframe 的网站使用适合我目的的特定身份验证机制，尽管我确实需要向它们提供来自 AD 的特定用户信息。

有人建议我使用 Windows Identity Foundation 来解决身份验证挑战。我正在考虑两种解决方案，但作为 WIF 新手，我不确定哪个更好，以及它们是否可能。

解决方案 1：我使用 AD 声明创建自定义安全令牌服务。当用户浏览到我的 iframe 页面时，该页面以编程方式从 STS 获取令牌，并以某种方式将令牌添加到 iframe。查看网上的示例，我相信我了解如何构建 STS 并以编程方式获取令牌。但是如何将它与 iframe 一起使用？将其插入 iframe URL ( `http://website/default.aspx?token=xxx`) 似乎不安全。

解决方案 2：我创建了相同的 STS。iframe 的网站配置为使用 STS 作为身份验证提供程序。当用户浏览到我的 iframe 页面之一时，iframe 的网站会自动查询 STS 以获取令牌，并将用户登录。但是 iframe 的 Web 部件如何获取令牌 - 原始用户是否可用请求上下文，或者它是如何工作的？这完全可以在 iframe 中完成吗？我记得读过一些关于 iframe 中不允许使用 cookie 的内容？

对上述问题的回答 - 或者可能是不同的解决方案 - 是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:10:13.777

寻求解决方案#2。如果 iframe 中的页面（从现在起为依赖方 - RP）配置为使用 STS 作为身份验证提供程序，那么在首次加载时，它们会将浏览器（iframe）重定向到 STS。STS 知道用户已经有一个单点登录会话（从最初登录到外联网），因此发出一个会话令牌，它作为 HTTP POST 交付给依赖方，被 WIF 截获并以以下形式交付给客户端cookie（默认情况下，但可以使用自定义会话令牌处理程序覆盖）。一些浏览器最初不允许在 iframe 中使用 cookie，但通过在来自依赖方的响应中发送 p3p 标头，可以允许这样做。

# git - 本地 Git 存储库的可视化指示器

> ID：14504040
> 
> 赞同：0
> 
> 时间：2013-01-24T14:47:37.223
> 
> 标签：git, osx-mountain-lion

当我使用 Turtoise SVN 时，我可以在从 SVN 存储库签出的文件夹和文件上看到绿色复选标记、蓝色加号按钮等视觉指示器，但使用 Git 我什么也得不到！它看起来像一个普通的文件和文件夹，很难从视觉上知道它是一个 Git 存储库而不是一个本地文件夹，等等……有什么很棒的 Git 工具可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:53:01.347

在 Windows 上，您可以只使用[TortoiseGit](http://code.google.com/p/tortoisegit/)。Id 添加您正在寻找的指标：

![视觉指标](../Images/de74a7cf349b7f0948e91aeae7e70973.png)

# javascript - 如何在海边的 tableData 上方返回 tableHeading 的值？

> ID：14504044
> 
> 赞同：0
> 
> 时间：2013-01-24T14:47:52.587
> 
> 标签：javascript, jquery, ajax, smalltalk, seaside

在原始 jQuery 中，您可以使用

```
var $th = $td.closest('table').find('th').eq($td.index()); 
```

但是，我如何回到`$th`海边，然后我可以将它用作我想要的任何渲染的字符串？例子。

```
val do:[:e |
e class = Dictionary ifTrue:[
                        html tableData 
                        onDoubleClick: (html javascript alert: 'double clicked column'); 
                        with:[self renderTargets: e on: html]
                           ]
         ] 
```

所以基本上我想要的价值：

```
(((html jQuery this) next: 'td') closest: 'table'; find: 'th'; eq: ((html jQuery this) next: 'td') index; html). 
```

并将其放在末尾

```
...column', thValue); 
```

在海边之外，我不太了解javascript、jquery 或ajax。

世界末日？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:53:46.517

要将网页中的值传递回服务器，您可以使用 jQuery 进行 ajax 回调。类似于以下内容：

```
html tableData 
      onDoubleClick: (html jQuery ajax 
                            callback: [:v | .. do something with v... ]
                            value: ((((html jQuery this)) closest: 'table') find: 'th' ...) 
```

#callback:value: 消息的第一个参数（即回调块）将在服务器端对其第二个参数（即一个javascript表达式）的客户端评估值进行评估。

看一下 JQAjax 层次结构。您会注意到#callback:value: 方法的许多变体（例如，使用json、乘客等...）。

此外，您可以将 #callback:value: 回调与响应呈现的 ajax 回调（例如 #script:）结合使用，以在客户端执行脚本。您甚至可以在不同的回调块之间传递值：

```
html jQuery ajax
      callback: [:v | theValue := v]
      value: ((((html jQuery this)) closest: 'table') find: 'th' ...);
      script: [:s | s << (s alert: theValue)] 
```

上面的代码将从 jQuery 表达式中获取值，将其序列化到服务器，将其存储在变量中`theValue`，然后呈现一个 javascript 响应，该响应会生成一个显示该值的警报对话框。这显然只是为了证明什么是可能的。在这个例子中，对服务器的回调是相当无用的。如果您不需要服务器端的值，请在客户端使用纯 Javascript。

# asp.net-mvc - ASP.NET MVC - 不从其他表中获取数据

> ID：14504046
> 
> 赞同：1
> 
> 时间：2013-01-24T14:48:04.127
> 
> 标签：asp.net-mvc, database, linq, entity-framework, ef-code-first

这些是我的课：

```
public class HotelRoomRatingView
    {
        public int HotelID { get; set; }
        public roomKinds RoomKinds { get; set; }
        public HotelReview HotelReview { get; set; }

        public HotelRoomRatingView()
        {
        }
        public HotelRoomRatingView(int hotelId, roomKinds rooms, HotelReview review)
        {
            this.HotelID = hotelId;
            this.RoomKinds = rooms;
            this.HotelReview = review;
        }
    }

public class HotelReview
{
    public int HotelReviewID { get; set; }

    public double Rating { get; set; }

    public List<Review> Reviews { get; set; }

    public HotelReview()
    {
        this.Reviews = new List<Review>();
    }
}

public partial class roomKinds : object, System.ComponentModel.INotifyPropertyChanged
{
    [Key]
    public int roomKindsId { get; set; }

    private ObservableCollection<objectKind> objectKindField;

    public roomKinds()
    {

    }
    public roomKinds(Class.roomKinds origin)
    {
        this.objectKindField = origin.objectKind;
    }

    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public ObservableCollection<objectKind> objectKind
    {
        get
        {
            return this.objectKindField;
        }
        set
        {
            this.objectKindField = value;
            this.RaisePropertyChanged("objectKind");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null))
        {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
}
public partial class Hotel : object, System.ComponentModel.INotifyPropertyChanged
    {
        [Key]
        public int HotelId { get; set; }
        private int hotIdField;
        // many others properties
        [System.Xml.Serialization.XmlElementAttribute(Order = 105)]
        public HotelReview hotelReview
        {
            get;
            set;
        }

        [System.Xml.Serialization.XmlElementAttribute(Order = 104)]
        public roomKinds rooms
        {
            get;
            set;
        }

        [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
        public int hotId
        {
            get
            {
                return this.hotIdField;
            }
            set
            {
                this.hotIdField = value;
                this.RaisePropertyChanged("hotId");
            }
        }
    } 
```

我的存储库中的 Get 方法如下所示：

```
public Models.Hotel Get(int id)
        {
            return db.hotels.SingleOrDefault(h => h.hotId == id);
        } 
```

`HotelId`没关系，`hotId`我需要这种方式。所以我通过 LINQ 从数据库中获取 Hotel 并且我得到了 Hotel 但我没有从其他表中获取数据。我没有得到`HotelReview`和`RoomKinds`。我在这些属性中得到了 null 但在数据库中它们是并且它们`Hotel`通过`ID`. 感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:56:42.013

您将需要使用以下命令显式加载它们`.Include`：

```
return db.hotels.Include(hr => hr.HotelReview)
                .Include(rk => rk.RoomKinds)
                .SingleOrDefault(h => h.hotId == id); 
```

**更新**

假设您的实体已正确链接，您应该能够在您的 .Ins 中继续沿链向下移动。包括：

```
return db.hotels.Include(hr => hr.HotelReview)
                .Include(r => r.HotelReview.Reviews)
                .Include(rk => rk.RoomKinds)
                .SingleOrDefault(h => h.hotId == id); 
```

# css - 有效的 CSS 类名

> ID：14504049
> 
> 赞同：0
> 
> 时间：2013-01-24T14:48:10.830
> 
> 标签：css, cross-browser

虽然[这个流行](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)的问题及其答案涵盖了该主题的相当多的基础，但我很好奇什么是有效的类名（*在撰写本文时*）。

`<edit>`为了扩展这一点，因为它是我关注的核心，我们是否不是在用户代理技术和标准支持的发展中，可以放弃某些命名黑客，而是重新利用它们以提高常用的鲁棒性? 可以理解的是，总会有边缘情况（*有人可能正在使用[NN6](http://en.wikipedia.org/wiki/Netscape_6)，无意停止*），但我主张在 90% 的浏览器中让事情按预期工作（*阅读：尽可能完美像素*），期望其余的人会有“可接受的”体验。`</edit>`

即，前缀（*或一般使用*）下划线（`_`）和连字符（`-`）。虽然 CSS 规范继续说，通过转义，基本上*任何*字符（*save for`NUL`*）都是有效的，但有效性仅与其相应的支持一样好。

那么，在[当前的浏览器环境](http://en.wikipedia.org/wiki/Usage_share_of_web_browsers)中，CSS 类命名*的“**做*”和“*不做”是**什么？***使用以下任何一种是不明智的：

```
.foo { }         /* for completeness... */
.foo-bar { }     /* hyphenated */
.foo_bar { }     /* underscored */
.foo-bar-baz { } /* multi-hyphenated */
.foo-bar_baz { } /* hyphenated then underscored */
.foo_bar-baz { } /* underscored then hyphenated */
.-foo { }        /* leading hyphen */
.-foo-bar { }    /* leading hyphen and hyphenated */
.-foo_bar { }    /* leading hyphen and underscored */
._foo { }        /* leading underscore */
._foo_bar { }    /* leading underscore and underscored */
._foo-bar { }    /* leading underscore and hyphenated */ 
```

虽然转义当然是一种选择，但我认为这对于简单的实现来说是不可行的。我对下划线和连字符的担忧来自于它们的普遍使用，但（*似乎*）跨浏览器的支持不一致；至少在历史上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:54:24.517

一般来说，您应该完全避免使用下划线，并使用连字符`-`。连字符应该用来表示一个新的“词”。比如`.left-column`反对`.leftColumn`或`.left_column`。永远不要以连字符开头的类名，没有理由这样做。

在这些选择中，理想的选择是：

```
.foo { }        
.foo-bar { } 
```

以下是可以接受的，但如果你需要三个“词”来描述一个类，你就太具描述性了

```
.foo-bar-baz { } 
```

这份[关于 HTML 和 CSS 的 Google 样式指南](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml#ID_and_class_naming)可能对您有所帮助

重要位：

```
/* Not recommended: meaningless */
#yee-1901 {}

/* Not recommended: presentational */
.button-green {}
.clear {}

/* Recommended: specific */
#gallery {}
#login {}
.video {}

/* Recommended: generic */
.aux {}
.alt {}

/* Not recommended */
#navigation {}
.atr {}

/* Recommended */
#nav {}
.author {} 
```

# ruby-on-rails - 将 zip 文件的提取内容存储在不同的目录中？

> ID：14504051
> 
> 赞同：0
> 
> 时间：2013-01-24T14:48:13.650
> 
> 标签：ruby-on-rails, ruby

这工作正常，但我的问题是，如何将 zip 文件的内容提取到不同的目录中？

```
require 'rubygems'
require 'zip/zip'

Zip::ZipFile.open("j.zip") do |zipfile|
    zipfile.each do |file|
    file.extract
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:20:13.143

### 更改工作目录

可能有其他方法可以解决此问题，但最明显的方法之一是使用[Dir#chdir](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-chdir)更改当前工作目录。例如，要将您的文件提取到`/tmp`：

```
old_pwd = Dir.pwd
Dir.chdir '/tmp'
# run your commands here 
```

# java - Spring Integration 中使用的 SpEL 表达式中的类型转换

> ID：14504054
> 
> 赞同：1
> 
> 时间：2013-01-24T14:48:16.473
> 
> 标签：java, casting, type-conversion, spring-integration, spring-el

我需要为每条发出的消息添加一个前缀。我可以使用一种方法来做到这一点，但只想让变压器处理它。

问题是消息需要以我无法真正输入的控制代码字符为前缀，然后是一些额外的文本。

例如：

```
private final static char EOT = (char) 4;
private final static char STX = (char) 2;
private final static char ETX = (char) 3;
private final static String additionalText = "          -0000 9305"; 
```

见：[http ://en.wikipedia.org/wiki/C0_and_C1_control_codes](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)

然后消息将带有前缀：

```
EOT + additionalText + ETX; 
```

但是，我找不到如何在转换器中使用的 SpEL 表达式中对控制代码进行类型转换：

```
<int:transformer
    id="prefixAdder"
    input-channel="initialMessage"
    output-channel="prefixAdded"
    expression="'#{(char) 4}' + '          -0000 9305' + '#{(char) 3}' + payload"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:51:07.970

SpEL 不直接支持。您可以添加一个`<bean/>`作为控制数据前缀的，然后使用`expression="@prefixer.prefixPreamble(payload)"`.

```
public class Prefixer {
    public String prefix(String payload) {
        return prefix + payload;
    }
} 
```

# java - 如何构建我的出勤计划

> ID：14504055
> 
> 赞同：2
> 
> 时间：2013-01-24T14:48:18.420
> 
> 标签：java, swing, jdbc, jradiobutton

我正在制作一个保持出席的应用程序。一旦我有了学生名单，我将如何将他们全部显示并检查他们是否在场。我最初认为 JTable 会起作用，但将摆动组件添加到 JTable 并不是世界上最简单的事情。有没有更简单的方法来解决这个问题？下图大致展示了我所描绘的内容，但如果您有不同的想法，请随时分享。谢谢！

![在此处输入图像描述](../Images/3cbc0a1780bd11286b74f50a209ee949.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:52:28.963

我的建议是，使用复选框而不是两个单选框控件。它看起来更好。

并检查呈现的用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:15:33.677

AFAIK 前 3 列看起来很正常。但第四栏是我认为你被困在的地方。

阅读 中的[渲染器和编辑](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)器`JTable`。

我认为将 a 渲染`JPanel`到最后一列就可以了。在那`JPanel`加上两个`JRadioButton`。

[此处](https://stackoverflow.com/questions/2069641/adding-buttons-inside-cell-of-jtable-along-with-data)和[此处](https://stackoverflow.com/questions/12622585/button-and-textbox-alignment-in-a-jtable-cell)显示了这样做的一个示例。

**PS：**我尝试了这种方法，它有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:40:59.677

![在此处输入图像描述](../Images/24f295894e156d2e61c0252bd7eb5330.png)

这是一个 EG 来展示如何使用`JTable`

正如@Hendrik Ebbers 所建议的那样，我为coloumn保留了一个布尔值`ABS/Present`，它将自动以`CheckBox`. 首先你必须设置你`JTabel`使用的模型`fooTable.setModel(dataModel)`，

像这样的东西：

```
 jTable1.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {"Joel", "Hails", new Integer(1011001), new Boolean(true)},
            {"James", "Roggers", new Integer(1912212), null},
            {"Rehy", "Gomes", new Integer(1121212), new Boolean(true)},
            {"Sunil", "gawas", new Integer(9909090), null}
        },
        new String [] {
            "1st name", "last name", "ID/NUMBER", "ABS/Present"
        }
    ) 
```

我在哪里`new Object [][]`有我的所有数据，并且`new String []`会有列名。

休息你可以找到更多信息

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

自己试试，有问题求源码。

**更新：**

你可以试试这个：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import java.awt.Dimension;
import java.awt.GridLayout;
import javax.swing.SwingUtilities;

 public class NewJFrame3 extends JPanel {

 public NewJFrame3() {
 super(new GridLayout(1,0));
 JTable table = new JTable(new MyTableModel());
 table.setPreferredScrollableViewportSize(new Dimension(500, 70));
 table.setFillsViewportHeight(true);

 JScrollPane scrollPane = new JScrollPane(table);

 add(scrollPane);
 }
 class MyTableModel extends AbstractTableModel {
 private String[] columnNames = {"1st Name",
 "Last Name",
 "ID/NUMBER",
 "PRESENT"};
 private Object[][] data = {
 {"Joel", "Hails",
 "110023", new Boolean(false)},
 {"John", "Doe",
 "343409", new Boolean(true)},
 {"Sue", "well",
 "899800", new Boolean(false)},
 {"Jane", "White",
 "990909", new Boolean(true)},

 };
 public int getColumnCount() {
 return columnNames.length;
 }
 public int getRowCount() {
 return data.length;
 }
 public String getColumnName(int col) {
 return columnNames[col];
 }
  public Object getValueAt(int row, int col) {
  return data[row][col];
  }

public Class getColumnClass(int c) {
  return getValueAt(0, c).getClass();
   }

 }

 private static void createAndShowGUI() {
 //Create and set up the window.
 JFrame frame = new JFrame("TableDemo");
 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 //Create and set up the content pane.
 NewJFrame3 newContentPane = new NewJFrame3();
 newContentPane.setOpaque(true); //content panes must be opaque
 frame.setContentPane(newContentPane);
 //Display the window.
 frame.pack();
 frame.setVisible(true);
 }
 public static void main(String[] args) {

 SwingUtilities.invokeLater(new Runnable() {
 public void run() {
 createAndShowGUI();
 }
 });
 }
 } 
```

# c# - XDocument 通过其 name 属性的值获取 XML 元素

> ID：14504057
> 
> 赞同：19
> 
> 时间：2013-01-24T14:48:26.350
> 
> 标签：c#, xml, linq-to-xml

我有这样的`XML`结果

```
<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">16</int>
  </lst>
  <result name="response" numFound="3" start="0" maxScore="1.0">
    <doc>
      <str name="ContaFirstname">
        firstname1                                                   
      </str>
      <str name="ContaId">6557</str>
      <str name="ContaJobTitle">Manager</str>
      <str name="ContaSurname">surname1
      </str>
    </doc>
    <doc>
      <str name="ContaFirstname">firstname2</str>
      <str name="ContaId">6203</str>
      <str name="ContaJobTitle">Director</str>
      <str name="ContaSurname">surname2</str>
    </doc>
  </result>
</response> 
```

我想得到一个对象列表，每个对象都包含`ContaFirstname`,`ContaId`和`ContaJobTitle``ContaSurname`

我尝试过这样的事情，但这是不对的，因为我把它们都设为 NULL

```
var test = from c in xml.Descendants("doc")
                    select new 
                    {
                        firstname = c.Element("ContaFirstname"),
                        surnmane = c.Element("ContaSurname")
                    }; 
```

那么如何通过名称访问这些元素呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T14:52:52.587

您不想按*名称*访问元素，因为大多数人会解释该语句。您想通过其`name`属性的值访问元素：

```
firstname = (string) c.Elements("str")
                      .First(x => x.Attribute("name").Value == "ContaFirstname");
//etc 
```

您可能很想将其抽象为一个单独的方法，因为多次这样做会很痛苦。例如：

```
public static XElement ElementByNameAttribute(this XContainer container,
                                              string name)
{
    return container.Elements("str")
                    .First(x => x.Attribute("name").Value == name);
} 
```

然后：

```
var test = from c in xml.Descendants("doc")
           select new 
           { 
               firstname = c.ElementByNameAttribute("ContaFirstname").Value,
               surnmane = c.ElementByNameAttribute("ContaSurname").Value
           }; 
```

如果您有机会为您的文档提供更合理的结构，那将是更可取的...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:00:52.847

这是否解决了您的问题：

```
var test = from c in xml.Descendants("doc")
           select new 
           {
               firstname = c.Elements("str").First(element => element.Attribute("name").Value == "ContaFirstname"),
               surnmane = c.Elements("str").First(element => element.Attribute("name").Value == "ContaSurname")
           }; 
```

或者，如果您想要这些值（而不是`XElement`：

```
var test = from c in xml.Descendants("doc")
           select new 
           {
               firstname = c.Elements("str").First(element => element.Attribute("name").Value == "ContaFirstname").Value,
               surnmane = c.Elements("str").First(element => element.Attribute("name").Value == "ContaSurname").Value
           }; 
```

# ruby-on-rails - 如何通过rails 3.2中的关联在has_many中创建记录

> ID：14504060
> 
> 赞同：0
> 
> 时间：2013-01-24T14:48:30.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我有两个模型（用户和事件），通过关联有多个 has_many，我当前的关联是通过以下逻辑：

1.  用户可以通过 EventGroup 参与很多活动
2.  Event通过EventGroup拥有很多用户
3.  用户可以通过事件组喜欢许多事件
4.  活动通过Eventgroup有很多用户喜欢

**模型：**

```
class User
 has_many :event_groups
 has_many :events,:through => :event_groups
 has_many :event_likes,:through => :event_groups,:class_name => "Event"
end

class Event
  has_many :event_groups
  has_many :users,:through => :event_groups
  has_many :user_likes,:through => :event_groups,:class_name => "User"
end

class EventGroup
  belongs_to :user
  belongs_to :event
  belongs_to :user_like,:class_name => "User"
  belongs_to :event_like,:class_name => "Event"
end 
```

**事件组列：**

```
user_id
event_id
user_like_id
event_like_id 
```

建立关联后，我尝试使用以下代码创建关联记录：

```
user = User.first
user.event_likes << Event.first  
user.save 
```

![在此处输入图像描述](../Images/fbd89f40dc1f06959e329cbb1c1b39d0.png) ***这里记录是用 user_id & event_like_id 而不是 `user_like_id & event_like_id 创建的***

但我无法通过 获取用户记录**`event.user_likes`**，所以我检查了我的事件组记录。它有`nil value for user_like_id.`

```
#<EventGroup id: 24, event_id: 1, user_id: 2,event_like_id: 1, user_like_id: nil> 
```

让我知道执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:22:46.060

使用 .where 格式，您可以传递类似 .where("event_groups.user_like_id = ?", 17) 的字符串来限定连接的标记表。

例如：

```
User.joins(:event_groups).where("event_groups.user_like_id = ?", 17) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:40:22.470

在我看来，您正在尝试对两种多对多关系（用户参与事件和用户喜欢事件）建模，它们是一种关系中的不同概念。我在这里假设用户可以在不喜欢的情况下参与事件，反之亦然。在这种情况下，保持`EventGroup`建模以仅表示 Participation 关系，并创建另一个 `EventLikes`模型来表示 Likes。两个表中的列相同，但代表不同的关系。之后，将事件添加到（事件或 event_likes）应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:05:07.047

我通过关系模型在相同模型（用户-用户）之间创建类似的关系，我的代码：

`has_many :relationships, foreign_key: "follower_id", dependent: :destroy`

`has_many :followed_users, through: :relationships, source: :followed`

`has_many :reverse_relationships, foreign_key: "followed_id", class_name: "Relationship", dependent: :destroy`

`has_many :followers, through: :reverse_relationships, source: :follower`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:38:25.300

我不确定，但您可能需要`inverse_of`在您的`has_many`关系中定义：

```
class User
 #...
 has_many :event_likes, :through => :event_groups, :inverse_of => :user_likes, :class_name => "Event"
end

class Event
  #...
  has_many :user_likes, :through => :event_groups, :inverse_of => :event_likes, :class_name => "User"
end 
```

请参阅[`:through`文档中的章节`has_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

# sql-server - 更改电脑日期后 ODBC 失败

> ID：14504061
> 
> 赞同：0
> 
> 时间：2013-01-24T14:48:31.370
> 
> 标签：sql-server, ms-access, odbc, system-clock

我们这里有一个女孩成功运行报告，然后在她的电脑上更改日期，然后再次尝试报告并收到连接失败错误。

*   报告在 MS Access 2003 中运行
*   ODBC 本身使用 Windows 身份验证
*   链接表使用的 UID 与她的 Windows 登录名不同
*   运行报告时的错误：SQLState '28000' SQL Server 错误：18452“[Microsoft][ODBC SQL Server Driver][SQL Server]用户''登录失败。用户未与受信任的 SQL Server 连接关联。”
*   测试 ODBC 时收到错误：SQLState '08004' SQL Server 错误：4060“服务器拒绝连接；对选定数据库的访问已被拒绝。”
*   SQL 日志出现此错误：“SSPI 握手失败，错误代码为 0x8009030c，同时建立具有集成安全性的连接；连接已关闭。[客户端：##.##.##.##]”
*   我能够在我的机器上重新创建故障。

我认为这是 Windows 身份验证/Active Directory/ODBC 之间的问题，但我在前 2 个方面不是很有经验。

是的，我知道这不是一个理想的情况。这将在某个时候全部转换为 C#.NET。

TIA 的任何想法。

# jquery - jquery帮助覆盖界面

> ID：14504065
> 
> 赞同：2
> 
> 时间：2013-01-24T14:48:45.607
> 
> 标签：jquery, interface

我真的很想知道有人制作了一个 jquery 插件来添加帮助叠加层，这些叠加层可以附加到网页上的项目旁边浮动。

这个想法是，当您单击帮助按钮（或页面首次加载时）时，页面变暗并覆盖在关键元素上的是描述性文本，解释了页面的这些关键功能的作用。理想情况下，甚至可以有一个逐步完成的过程，以便您可以一次说明一个功能，并在某处显示下一个/后退导航。

现在可以在 Gmail 中找到这些可爱的例子。此页面顶部有一个镜头：http: [//blogs.clariusconsulting.net/kzu/documenting-user-interfaces-in-a-mouse-less-touch-ui/](http://blogs.clariusconsulting.net/kzu/documenting-user-interfaces-in-a-mouse-less-touch-ui/)

他们没有使用 jquery，我假设这些是硬编码的。如果有人知道一个灵活的 jquery 插件可以通过在您的页面中指定对象 id 来神奇地执行此操作或类似的操作，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:52:13.740

我推荐使用[jQuery Joyride](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)，它是一个非常灵活的游览/帮助插件。您可以设置站点的“游览”，或使用帮助弹出窗口进行叠加效果，或者自定义和创建自己的效果/功能以实现您想要的效果。

# mysql - DBD::MySQL: 如何让“LongReadLen”发挥作用？

> ID：14504069
> 
> 赞同：0
> 
> 时间：2013-01-24T14:48:55.613
> 
> 标签：mysql, perl, dbi, truncate

如何更改此脚本以截断 BLOB 输出？

```
#!/usr/bin/env perl
use warnings;
use strict;
use utf8;
use 5.10.1;
use DBI;

my $user = 'username';
my $passwd = 'password';

my $db = 'information_schema';
my $dbh = DBI->connect( "DBI:mysql:dbname=$db", $user, $passwd, {
    RaiseError => 1,
    AutoCommit => 1,
} ) or die DBI->errstr;

$db = 'test_truncate';
$dbh->do( "DROP DATABASE IF EXISTS $db" );
$dbh->do( "CREATE DATABASE $db" );

$dbh = DBI->connect( "DBI:mysql:dbname=$db", $user, $passwd, {
    PrintError => 0,
    RaiseError => 1,
    AutoCommit => 1,
    mysql_enable_utf8 => 1,
} ) or die DBI->errstr;

$dbh->{LongReadLen} = 5;
$dbh->{LongTruncOk} = 1;

my $table = 'table_truncate';
$dbh->do( "CREATE TABLE IF NOT EXISTS $table ( Id INT, my_Blob BLOB )" );
my $sth = $dbh->prepare( "INSERT INTO $table ( Id, my_Blob ) VALUES ( ?, ? )" );

my $blob = '123456789' x 20;
$sth->execute( 1, $blob );

$sth = $dbh->prepare( "SELECT * FROM $table" );
$sth->execute();
while ( my $row = $sth->fetchrow_arrayref() ) {
    say for @$row;
} 
```

输出：

```
1
123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789123456789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:59:05.950

像这样调整输出

```
while ( my $row = $sth->fetchrow_arrayref() ) {
    print substr($_,0,78)."\n" for @$row;
} 
```

# asp.net-mvc-4 - 使用 simplemembership 收集注册用户信息

> ID：14504072
> 
> 赞同：0
> 
> 时间：2013-01-24T14:49:11.590
> 
> 标签：asp.net-mvc-4

我是 ASP.NET MVC 4 附带的 SimpleMembership 的新手。我在 UserProfile 表中添加了一些额外的字段，它们可以正常工作。我遇到的问题是我希望在网站上注册的用户也能够编写电子邮件和城市。但是 WebSecurity.CreateUserAndAccount 重载只需要 3 个参数。所以我不能：

`WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Mobile = model.Mobile }, new { Email = model.Email, new { City= model.City, false);` 

一个人通常是怎么做的？还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:42:02.333

这应该可以解决问题：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, 
    new { Mobile = model.Mobile, Email = model.Email, City = model.City}); 
```

# java - 无法从数据库中填充产品数组

> ID：14504074
> 
> 赞同：2
> 
> 时间：2013-01-24T14:49:14.530
> 
> 标签：java, sql, arrays, jsp, servlets

```
<%@ page language="java" import="controller.*;,java.net.*,java.text.*,java.sql.*, java.util.ArrayList" %>
<html>
<body bgcolor="#ffffff">

<%
// Initialize the array of available products.
    Connection conn=JavaConnect.ConnectDb();
    PreparedStatement pst=conn.prepareStatement("SELECT * FROM products");
    ResultSet rs = pst.executeQuery();
    ArrayList<model.Item> catalog = new ArrayList();
    while(rs.next()){
       catalog.add (new model.Item(rs.getString(1), rs.getInt(2),rs.getString(3),rs.getString(4),rs.getInt(5),rs.getInt(6),rs.getInt(7)));
         for (int i=0; i < catalog.size(); i++) {
         model.Item item = catalog.get(i);
                    }

    }

%>

<a href="/shoppingcart/ViewShoppingCart.jsp">View Shopping Cart</a>
<p>
<h1>Available Products</h1>
<table border="1">
<tr><th>EAN</th><th>PIP</th><th>Name</th><th>Description</th><th>Supplier ID</th><th>Price</th><th>Quantity</th></tr>
<%

// Get a currency formatter for showing the price.
    NumberFormat currency = NumberFormat.getCurrencyInstance();

    for (int i=0; i < catalog.size(); i++)
    {
        model.Item item = catalog.get(i);

// Create the URL for adding the item to the shopping cart.
        String addItemURL =

            "/shoppingcart/AddToShoppingCartServlet?"+
            "productCode="+URLEncoder.encode(item.getEAN())+
            "&description="+URLEncoder.encode(item.getDescription())+
            "&quantity="+URLEncoder.encode(""+item.getQuantity())+
            "&price="+URLEncoder.encode(""+item.getPrice());
%>
<tr><td><%=item.getDescription()%></td><td><%=item.getQuantity()%>
    </td><td><%=item.getPrice()%></td>
<td><a href="<%=addItemURL%>">Add to Shopping Cart</a></td></tr>
<%
    }
%>
</table>
</body>
</html>

  org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 14 in the generated java file
Syntax error on token ";", delete this token

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:457)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:644)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:358)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

使用 ArrayList 后出现此新错误。如何解决此问题以从数据库中显示我的产品。我已将新的编辑包含到我的代码和堆栈跟踪中。我不明白它指的是第 14 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:56:55.250

`Item`在您导入的两个包中显示的类。

```
import="model.*,controller.* 
```

所以你必须指定正确的，比如

```
 model.Item[] catalog=new model.Item[100]; //or
 controller.Item[] catalog=new controller.Item[100]; 
```

此外，您可以使用集合而不是使用 Array

```
 ArrayList<model.Item> itemList = new ArrayList(); 
```

然后为每一行添加

```
itemlist.add (new model.Item(rs.getString(1), 
         rs.getInt(2),rs.getString(3),rs.getString(4),rs.getInt(5),
         rs.getInt(6),rs.getInt(7)); 
```

使用数组列表

```
 for (int i=0; i < itemList.size(); i++) {
    model.Item item = itemList.get(i);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:53:37.053

您正在发生错误，因为您正在将 2 个 Item 类导入到您的 jsp 中。更改您的导入或将完整的类名放在 jsp 代码中：

```
controller.Item[] catalog = new controller.Item[100]; 
```

或者

```
 model.Item[] catalog = new model.Item[100]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:53:46.033

您需要完全限定`Item`正在使用的类，因为类路径中有两个同名的类。我的意思是，而不是

```
new Item(...) 
```

写这个：

```
new model.Item(...) 
```

明确地说，“完全限定”一个类意味着，编写所有指向使用中的特定类的点分隔包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:01:46.013

1.  避免重复导入
2.  如果要访问，请提供完全限定的类名以及实例变量。
3.  如果您的类和方法是静态的，您甚至可以使用静态导入。

# php - PHP 包含/需要来自 WebRoot 问题的相对路径

> ID：14504076
> 
> 赞同：0
> 
> 时间：2013-01-24T14:49:22.853
> 
> 标签：php

我已经用多种语言完成了大量的编程，但对核心 PHP 来说是较新的。经过大量的谷歌搜索后，我似乎找不到一个好的解决方案来使用来自 webroot 的相对路径而不是来自操作系统的相对路径来包含/require/require_once。

我调整了 PHP Ini 包含路径，这是一个很好的解决方案，但问题是许多 PHP IDE 不评估包含路径以公开智能感知等的类定义......所以我发现自己不得不制作许多临时包含而调试/编码。

对我来说，经典的 ASP 和其他语言使这变得非常容易，因为相对路径总是相对于 web 根目录，而不是 php 与当前文件位置的相对关系，而 php 的根目录是文件系统的根目录。我已经看到了很多古怪的方法来尝试解决这个问题，但这正是它似乎总是可以解决的问题。

你们中的任何人都可以帮助我度过一周并为我解决这个乏味的恼人挑战吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:00:01.440

您可以随时将这样的内容添加到您的`php.ini`文件中：

```
ROOT_PATH = "/var/www/<your_directory>" 
```

然后你可以在你的 php 页面中获取这个值，比如：

```
$ROOT_PATH = ini_get("ROOT_PATH"); 
```

然后你可以包含这样的文件：

```
include_once($ROOT_PATH."/<path>/<filename.php>"); 
```

当然，您可以`define("ROOT_PATH", "/var/www/<your_directory>");`直接在文件中添加，但如果您从文件中获取设置，`php.ini`您可以在不同的服务器上进行不同的设置。

# ios - IOS查询纬度/经度/三角函数

> ID：14504078
> 
> 赞同：0
> 
> 时间：2013-01-24T14:49:25.877
> 
> 标签：ios, objective-c

我目前使用一个 MSSQL 查询，它允许我查找某个半径内的项目。它看起来像这样：

```
select distinct ID,longitude,latitude,
(@unite * ACOS(cos(radians(@latitude))*cos(radians(latitude))*cos(radians(longitude)
-radians(@longitude))+sin(radians(@latitude))*sin(radians(latitude)))) as distance
from myTable
where (@unite * ACOS(cos(radians(@latitude))*cos(radians(latitude)) *
cos(radians(longitude)-radians(@longitude))+
sin(radians(@latitude))*sin(radians(latitude))))<@radius 
```

我想知道是否可以将此查询转换为Objective C（我在我的应用程序中使用CoreData，我有超过8 000条记录）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:01:14.537

我发现一篇关于我需要使用 sqlite 的有趣文章
[http://www.thissuchiknow.co.uk/?p=71](http://www.thismuchiknow.co.uk/?p=71)
谢谢

# jquery - 超过一定窗口宽度的jQuery触发函数

> ID：14504079
> 
> 赞同：6
> 
> 时间：2013-01-24T14:49:31.347
> 
> 标签：jquery, function, resize, window

我在尝试编写一些 jQuery 时遇到了很多问题。我需要一个功能始终可用，并且当用户窗口大于设定宽度时，一个功能可用。这是我的功能，都在运行`jQuery(document).ready(function($){`

下拉菜单功能，仅在窗口大于设置数量时才会出现；

```
//the dropdown code for desktop users
function largeDropDown(){
    $('#nav ul li').hover(
    //open
    function(){ $(this).find('ul').stop().slideDown(300); },
    //close
    function(){ $(this).find('ul').stop().slideUp(300); }
    );
} 
```

而且这个始终可用，尽管很高兴知道如何使这个也以屏幕尺寸为条件。

```
//the dropdown code for smaller screens
$('a.menu_trigger').click(openMenu);
function openMenu(e){
    e.preventDefault();
    if($(this).next('ul').hasClass('open_menu')){
        $(this).next('ul').slideUp(300).removeClass('open_menu');
        $(this).html("&darr;");
    } else {
        $(this).next('ul').slideDown(300).addClass('open_menu');
        $(this).html("&uarr;");
    }

} 
```

使用 CSS 媒体查询，`a.menu_trigger`当窗口超过 768 像素时隐藏。这样 jQuery 就不会做任何事情（至少这是我试图让它工作的尝试！）

所以，我想知道如何使第一个函数在 768px 以上工作，以及如何在窗口调整大小时调用此功能。任何帮助都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-24T14:57:41.520

您可以通过执行以下操作来绑定窗口调整大小事件：

```
$(window).on('resize', function(event){
    // Do stuff here
}); 
```

您可以通过执行以下操作获取窗口大小：

```
var windowWidth = $(window).width();
if(windowWidth > 768){
    // Do stuff here
} 
```

[这是一个 jsfiddle 可以看到这一切](http://jsfiddle.net/remibreton/Aurk8/)。

小心你在窗口调整大小事件中绑定的内容。当用户自然地调整浏览器大小时，它可能会被执行数十次。繁重的代码会导致糟糕的用户体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:57:31.303

这将在您每次执行该函数时检查窗口大小。如果窗口小于 768px，它将随着打开菜单向前移动。如果它大于 768px，它不会做任何事情（去跳跳虎！）。

```
function openMenu(e){
    if ( $(window).width() < 768 ) {
        e.preventDefault();
        if($(this).next('ul').hasClass('open_menu')){
            $(this).next('ul').slideUp(300).removeClass('open_menu');
            $(this).html("&darr;");
        } else {
            $(this).next('ul').slideDown(300).addClass('open_menu');
            $(this).html("&uarr;");
        }
    } else {
        return false;
    }
} 
```

**编辑：**想要添加一个我一直用来在特定视口宽度处执行代码的微库；它使您能够利用 JavaScript 中的媒体查询。我建议查看[enquire.js](http://wicky.nillia.ms/enquire.js/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T14:06:38.563

这个简单的实现只会让它发生一次。测试将被改变。一次高于 1077，一次下降到它。中间没有任何东西。你可以删除第一个警报（'test'）；所以它只会现在发生当高于 1077 并删除第二个以...

```
var isAbove1077 = $(window).width() > 1077;
        $(window).on('resize', function(event){
            if( $(window).width() < 1077 && isAbove1077){
                isAbove1077 = false;
                alert('test');
            }else if($(window).width() > 1077 && !isAbove1077){
                isAbove1077 = true;
                alert('test');
            }
        }); 
```

# php - 路由到子文件夹中的控制器在 Laravel 4 中不起作用

> ID：14504082
> 
> 赞同：8
> 
> 时间：2013-01-24T14:49:36.490
> 
> 标签：php, controller, routes, laravel, laravel-4

当我遇到这个问题时，我正在将我的 Laravel 3 应用程序更新到 Laravel 4...

我尝试过的路线：

```
Route::get('backend/login', 'backend/UserController@login');
Route::get('backend/login', 'backend.UserController@login'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-30T09:56:48.390

几个小时前我遇到了一个类似的问题，我不得不稍微尝试一下才能让它工作。

路线：

```
Route::group(array('prefix' => 'admin'), function() {
    Route::resource('/', 'admin\DashboardController');
}); 
```

在“控制器/管理员”中，我放置了 DashboardController：

```
namespace admin;

use Illuminate\Support\Facades\View;

class DashboardController extends \BaseController {

    public function index()
    {
        return View::make('admin/dashboard');
    }

} 
```

这在 Laravel 4 上起到了作用。希望你觉得它足够有用。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:09:37.130

目前，在 Laravel 4 Beta 1 中，您可以“仅？” 使用命名空间。

例如，在您的控制器文件中：app/controllers/backend/UserController.php

```
<?php namespace Controllers\Backend;

use Illuminate\Routing\Controllers\Controller;

class UserController extends Controller {

    // Note extends Controller and not BaseController

    // Your stuff
}
?> 
```

所以之后，在文件中： app/routes.php ：

```
<?php
Route::get('backend/login', 'Controllers\Backend\UserController@login'); 
```

我不知道是否是更好的方法，但在这里工作。编辑和转储自动加载“composer.json”实际上似乎不起作用。

如果有人可以改善这一点，他会让我开心！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-05T14:59:20.910

如果你打算使用 Laravel 4，也许你应该看看这个：你可以指定在一组路由上使用的命名空间，你可以在这里看到：[http ://www.laravel-tricks.com/tricks /路由组命名空间](http://www.laravel-tricks.com/tricks/route-group-namespacing)

所以在你的样本中：

```
Route::group(array('prefix' => 'backend', 'namespace' => 'backend'), function()
{

    Route::get('login', 'UserController@login');

}); 
```

它就像一个魅力:)

我一直在使用它，并且非常好，它可以帮助您保持代码更清晰和更易于理解。试试看！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T10:54:17.863

正如这里所解释的，使用 Laravel 4.1，您可以指定要在一组路由上使用的命名空间，如您在此处看到的：[http ://www.laravel-tricks.com/tricks/route-group-namespacing](http://www.laravel-tricks.com/tricks/route-group-namespacing)

我一直在使用它，并且非常好，它可以帮助您保持代码更清晰和更易于理解。试试看！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-21T19:55:46.687

我的管理控制器在 app/controllers 目录中

```
class AdminController extends BaseController {
/**.
 * @return \AdminController
 */
    public function __construct()
    {

    }
} 
```

现在我在控制器文件夹中有一个名为 admin 的文件夹，即 app/controllers/admin 并且我有另一个名为 AdminDashboardController.php 的控制器

```
class AdminDashboardController extends AdminController {

/**
 * Display a listing of the resource.
 *
 * @return Response
 */
    public function getIndex()
    {
    return View::make('admin/dashboard');
    }
    } 
```

最后是我的 Route.php 文件

```
Route::group(array('prefix' => 'admin'), function()
{
    # Admin Dashboard
    Route::controller('/', 'AdminDashboardController');
 }); 
```

希望这可以帮助 ..：-）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T20:43:55.983

我建议做

```
Route::group(array('prefix' => 'backend'), function() {
    // Responds to Request::root() . '/backend/user'
    Route::resource('login', 'UserController');
}); 
```

在这里查看更多信息

[Laravel 4 嵌套资源控制器 Route::resource('admin/photo', 'PhotoController'); 不工作](https://stackoverflow.com/questions/14585654/laravel-4-nested-resource-controllers-routeresourceadmin-photo-photocontr)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-01T16:01:22.080

您也可以将您的后端/管理面板放在一个包中..fruit 以供思考:)

# ruby-on-rails - 创建 Rails 独立应用程序的可能性

> ID：14504087
> 
> 赞同：3
> 
> 时间：2013-01-24T14:49:52.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我做了一个小的 Rails-App。是否有机会将其转换为独立版本，以便您无需安装导轨、运行服务器等即可运行它？

**编辑：** 对不起，这个问题很短。我想将所有宝石“按原样”打包到一个可执行文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:58:04.580

不用安装Ruby，不用安装RubyGems，不用安装各种gem，不用安装SQLite；只有一个可执行文件！

您可以使用`RubyScript2Exe`.

**RubyScript2Exe**将您的 Ruby 脚本转换为独立的、压缩的 Windows、Linux 或 Mac OS X (Darwin) 可执行文件。

[在此处](http://www.erikveen.dds.nl/distributingrubyapplications/rails.html)查看完整的步骤和详细信息。

# servicestack - ServiceStack / ORM Lite - 外键关系

> ID：14504090
> 
> 赞同：3
> 
> 时间：2013-01-24T14:50:09.250
> 
> 标签：servicestack, ormlite-servicestack

我有以下 POCO：

```
[Alias("Posts")]
public class Post : IReturn<Post>
{
    [AutoIncrement]
    [PrimaryKey]
    public int PostId { get; set; }
    public DateTime CreatedDate { get; set; }
    [StringLength(50)]
    public string CreatedBy { get; set; }
    [StringLength(75)]
    public string Title { get; set; }
    public string Body { get; set; }
    public int UpVote { get; set; }
    public int DownVote { get; set; }
    public bool IsPublished { get; set; }

    public List<Comment> Comments { get; set; }
    public List<Tag> Tags { get; set; }
} 
```

`Comment`它在我和`Tag`实体上有一个 FK 。所以我想在我的服务回复中返回那些，但它说`'Invalid Column name 'Comments''`and `'Invalid Column name 'Tags''`。如何使用 ORM Lite 查看哪些评论和标签附加到我的帖子？在 EF 中，我会简单地使用 Include 来延迟加载我的相关表信息，什么是等价的？

## 编辑

作为对答案的回应，我这样做了：

```
public class PostFull
{
    public Post Post { get; set; }
    public List<Comment> Comments { get; set; }
    public List<Tag> Tags { get; set; }
} 
```

然后在我的服务中，我返回这个，我的实体`PostTag`是一个交叉实体，因为我`Post`和`Tag`实体是 M:M 关系：

```
var posts = Db.Select<Post>().ToList();
var fullPosts = new List<PostFull>();

posts.ForEach(delegate(Post post)
{
    var postTags = Db.Select<PostTag>(x => x.Where(y => y.PostId == 
    post.PostId)).ToList();

    fullPosts.Add(new PostFull()
    {
        Post = post,
        Tags = Db.Select<Tag>(x => x.Where(y => postTags.Select(z => 
                   z.TagId).Contains(y.TagId))).ToList(),
        Comments = Db.Select<Comment>(x => x.Where(y => y.PostId == 
                       post.PostId)).ToList()
    });
});

return fullPosts; 
```

不确定它是否是一个好的设计模式？

## 编辑 2

这是我的实体：

```
[Alias("Tags")]
public class Tag
{
    [AutoIncrement]
    [PrimaryKey]
    public int TagId { get; set; }

    [StringLength(50)]
    public string Name { get; set; }
}

[Alias("Posts")]
public class Post
{
    [AutoIncrement]
    [PrimaryKey]
    public int PostId { get; set; }
    public DateTime CreatedDate { get; set; }
    [StringLength(50)]
    public string CreatedBy { get; set; }
    [StringLength(75)]
    public string Title { get; set; }
    public string Body { get; set; }
}

[Alias("PostTags")]
public class PostTag
{
    [AutoIncrement]
    [PrimaryKey]
    public int PostTagId { get; set; }

    [References(typeof(Post))]
    public int PostId { get; set; }

    [References(typeof(Tag))]
    public int TagId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:57:45.717

OrmLite 中的表是与底层数据库表的严格**1:1 映射。**

这意味着所有复杂类型的属性都被**放入**带有属性名称的 db 文本字段中，它们永远不会像您在这里期望的那样自动映射到子关系。

这是一个早期的答案，显示了如何[映射与 OrmLite 的多对多关系](https://stackoverflow.com/a/12539573/85785)。

尽量避免**N+1**查询，记住每次调用`Db.x`都是一个远程数据库查询，所以你最好尽量避免循环中的任何数据库调用。

### [通过多对多表查询检索帖子](http://gistlyn.com/?gist=3fb7f741e6e9de11c0ce487e161a693f)

您可以使用[OrmLite 对 JOIN 的支持](https://github.com/ServiceStack/ServiceStack.OrmLite#typed-sqlexpression-support-for-joins)来构建类型化查询，就像在普通 SQL 中通过多对多表查询并查找具有指定标签的所有帖子一样：

使用测试数据创建和填充帖子

```
db.CreateTable<Post>();
db.CreateTable<Tag>();
db.CreateTable<PostTag>();

var post1Id = db.Insert(new Post { 
    CreatedBy = "gistlyn", Title = "Post 1", Body = "Body 1" }, selectIdentity:true);
var post2Id = db.Insert(new Post { 
    CreatedBy = "gistlyn", Title = "Post 2", Body = "Body 2" }, selectIdentity:true);
db.Insert(new Tag { Id = 1, Name = "A" }, 
          new Tag { Id = 2, Name = "B" });
db.Insert(new PostTag { PostId = post1Id, TagId = 1 }, 
          new PostTag { PostId = post1Id, TagId = 2 });
db.Insert(new PostTag { PostId = post2Id, TagId = 1 }); 
```

### 创建一个连接所有相关表的 SQL 表达式：

当遵循上述 OrmLite 的常规命名约定时，[OrmLite 可以推断每个表之间的关系，](https://github.com/ServiceStack/ServiceStack.OrmLite#typed-sqlexpression-support-for-joins)从而使您无需为每个查询指定 JOIN 表达式，例如：

```
var postsWithTagB = db.Select(db.From<Post>()
                                .Join<PostTag>()
                                .Join<PostTag,Tag>()
                                .Where<Tag>(x => x.Name == "B"));
postsWithTagB.PrintDump(); 
```

此查询仅返回 Tag 的第一个 Post 和 Tag 的`B`两个Post `A`。

[您可以通过在 Gistlyn 上实时运行](http://gistlyn.com/?gist=3fb7f741e6e9de11c0ce487e161a693f)来进一步探索这个独立的示例。

### 使用标签和评论填充所有帖子

如果这是一个小型博客，并且您想加载所有帖子及其相关标签和评论，例如在主页或 RSS 提要中，您可以使用 Linq2Objects 将整个数据集加载到内存中，并使用 4 个查询将它们与以下内容连接：

```
//Only 4 DB calls to read all table data
var posts = Db.Select<Post>();
var postTags = Db.Select<PostTag>();
var tags = Db.Select<Tag>();
var comments = Db.Select<Comment>();

//using Linq2Objects to stitch the data together
var fullPosts = posts.ConvertAll(post =>
{
    var postTagIds = postTags
        .Where(x => x.PostId == post.PostId)
        .Select(x => x.PostTagId).ToList();

    return new PostFull {
        Post = post,
        Tags = tags.Where(x => postTagIds.Contains(x.TagId)).ToList(),
        Comments = comments.Where(x => x.PostId == post.PostId).ToList(),
    };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:00:32.567

您不必在 Post 实体中包含标签和评论。在您的情况下，您的 DTO 和 DB 模型类应该不同。在 Tag 和 Comment 类中，您应该具有 PostId 属性。

在服务中，您应该查询 PostId 等于您的 Post Id 的评论并对标签执行相同操作。结果应添加到包含评论和标签列表的 Post DTO 中。

# c# - 我正在使用 Koolwired.Imap 通过 iMAP 检索附件。

> ID：14504091
> 
> 赞同：0
> 
> 时间：2013-01-24T14:50:10.810
> 
> 标签：c#, imap

我正在使用 Koolwired.Imap 来检索附件。以下是我编写的代码。

使用 K = Koolwired.Imap；

```
 public void GetAttachmentsTest(string thread, string selectFolder, string fileName)
    {

        K.ImapConnect connect = new K.ImapConnect(Global.host);

        K.ImapCommand command = new K.ImapCommand(connect);

        K.ImapAuthenticate auth = new K.ImapAuthenticate(connect, Global.username, Global.password);
        connect.Open();
        auth.Login();

        K.ImapMailbox mailBox = command.Select(Global.inbox);
        mailBox = command.Fetch(mailBox);

        K.ImapMailboxMessage mbstructure = new K.ImapMailboxMessage();

        while (true)
        {
            try
            {

                    int mailCount = mailBox.Messages.Count;

                    if (mailCount == 0)
                    {
                        Console.WriteLine("no more emails");
                        break;
                    }

                    for (int i = 0; i < mailCount; ++i)
                    {
                        mbstructure = mailBox.Messages[mailCount - 1];
                        mbstructure = command.FetchBodyStructure(mbstructure);

                        for (int j = 0; j < mbstructure.BodyParts.Count; ++j)
                        {
                            if (mbstructure.BodyParts[j].Attachment)
                            {
                                //Attachment
                                command.FetchBodyPart(mbstructure, mbstructure.BodyParts.IndexOf(mbstructure.BodyParts[j]));

                                //Write Binary File
                                string tempPath = Path.GetTempPath();
                                FileStream fs = new FileStream(tempPath + mbstructure.BodyParts[j].FileName, FileMode.Create);
                                int length = Convert.ToInt32(mbstructure.BodyParts[j].DataBinary.Length);
                                fs.Write(mbstructure.BodyParts[j].DataBinary, 0,length);
                                fs.Flush();
                                fs.Close();

                            }
                        }

                    }

            }
            catch (Exception ex)
            {
                Console.WriteLine("T1 " + ex.Message);
                Console.WriteLine("T1 " + ex.StackTrace);
                if (ex.InnerException != null)
                    Console.WriteLine("T1 " + ex.InnerException.Message);
            }
        }

    } 
```

我在声明中遇到错误：

int 长度 = Convert.ToInt32(mbstructure.BodyParts[j].DataBinary.Length);

和

fs.Write(mbstructure.BodyParts[j].DataBinary, 0,length);

错误是：

输入不是有效的 Base-64 字符串，因为它包含非 base-64 字符、两个以上的填充字符或填充字符中的非法字符。

当只有 1 个附件时，上面的代码在显示的行中分解。

如果有多个附件：

然后代码在线分解

mbstructure = command.FetchBodyStructure(mbstructure);

错误是：

无效格式无法解析正文部分标头。

我非常接近完成这项任务。任何人都可以帮助我。

我还想知道一旦我检索到它们，如何删除它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T09:52:51.720

我遇到了同样的问题如果有人关心，我解决了它从 codeplex 下载库的最新源代码。一旦编译，它就可以正常工作。看起来他们已经修好了。

同样对于删除电子邮件，只需将其标记为删除：command.SetDeleted(n, true); //-> 其中 n 是消息编号。

如果是 IMAP 连接，实际上您必须删除已删除的邮件才能完成删除。

command.Expunge();

希望它可以帮助某人。

# android - 如何在android应用程序中解析一个url

> ID：14504093
> 
> 赞同：0
> 
> 时间：2013-01-24T14:50:13.157
> 
> 标签：android, xml-parsing

我想在我的示例 Android 应用程序中解析天气 API 的 URL，但在解析 url 时出现异常。

如果我评论 try 块的最后一条语句：

`xr.parse(new InputSource(url.openStream()));`

然后我的程序成功运行。请在我解析我的 URL 的地方修改我的代码。

```
try {
    URL url;        
    String queryString ="http://free.worldweatheronline.com/feed/weather.ashx?q=34.01,71.54&format=xml&num_of_days=5&key=ccad66928f081759132201";

    url = new URL(queryString.replace(" ", "%20"));

    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();

    XMLReader xr = sp.getXMLReader();

    WeatherHandler myWeatherHandler = new WeatherHandler();
    xr.setContentHandler(myWeatherHandler);

    xr.parse(new InputSource(url.openStream()));

    Log.d(TAG, "it's all right");
} catch (Exception e) {
    System.out.println(e);
    Log.d(TAG, "it's Wrong");
} 
```

这是发生异常时的日志猫的屏幕截图。 ![在此处输入图像描述](../Images/36a95754b36c73ec2d35ceff81d0c4ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:42:24.423

你确定这条线：

```
new InputSource(url.openStream()); 
```

从

```
xr.parse(new InputSource(url.openStream())); 
```

正在退货吗？如果您必须连接到 Internet，请不要忘记将权限添加到清单中。而且您还应该在尝试解析之前测试您是否真的从该 url 获得了一些东西。至少这是我对您的日志和异常的解释。

# asp.net-mvc-3 - 在 Predicatebuilder 中使用 Linq Any 子句的问题

> ID：14504099
> 
> 赞同：1
> 
> 时间：2013-01-24T14:50:25.927
> 
> 标签：asp.net-mvc-3, entity-framework, linq-to-entities, linqkit

我遇到了 LinqKit 谓词生成器的问题。我过去曾将它用于简单查询，它运行良好，但我现在尝试将它与语句中的 Any 子句一起使用，它似乎给了我随机结果。下面是我用来构建语句的代码。谁能看到我做错了什么？有没有更好更简单的方法来做我想做的事。我现在正在使用谓词构建器，因为我正在构建一个非常复杂的查询，它可能包含嵌套谓词等，而且我没有看到其他简单的方法可以做到这一点。我将它与实体框架一起使用。

```
if (cqv.ComplexQuery.IncludeOnAll)
{
    Includepredicate = PredicateBuilder.True<Customer>();
}
else
{
    Includepredicate = PredicateBuilder.False<Customer>();
}

inner = PredicateBuilder.True<Customer>();
if (a.Include == true || a.Exclude == true) 
{
    productinner = PredicateBuilder.True<CustomerProduct>();
    if (a.VersiondID != 0)
    {
        productinner = productinner.And(o => o.ProductTypeID == a.ProductType.ID  && o.VersionID == a.VersiondID);
        inner = inner.And(o => o.Products.Any(productinner.Compile()));
    }
    else
    {
        productinner = productinner.And(o => o.ProductTypeID == a.ProductType.ID);
        inner = inner.And(o => o.Products.Any(productinner.Compile()));
    }

    if (cqv.ComplexQuery.IncludeOnAll)
    {
        Includepredicate = Includepredicate.And(inner.Expand());
    }
    else
    {
        Includepredicate = Includepredicate.Or(inner.Expand());
    }
}

IncludedCustomers = UoW.Customers.AsExpandable().Where(Includepredicate).ToList();

//This second list does the exact query the first one should be doing so I could compare results.  The reuslts are totally different.  Not only are there more results using predicatebuilder but they seem random

List<Customer> test = UoW.Customers.Where(o => o.Products.Any(s => s.ProductTypeID == 1)).ToList(); 
```

我也没有看到任何简单的方法来尝试使用谓词构建器来调试问题。有谁知道确定从此查询创建的 SQL 的快速方法？

编辑 - - - - - - - - - - - - - - - - - - - - - - -

所以我已经解决了我的部分问题，但遇到了另一个问题。Any 子句和随机结果的问题已通过我在带有 a.ProductType.ID 的整数变量中设置并在子句中使用该值来解决。一旦我这样做了，我就得到了我期望的结果。现在我的问题是，即使这适用于1个产品，当我选择Naymore而不是1，而不是要么寻找那些拥有这两个产品的任何客户，那么我GT总是只有客户我在 for 中添加了一个子句的最后一个产品。我将把我更新的代码放在下面

```
foreach (CustomerProductQueryProduct a in cqv.ComplexQuery.Products)
{
    inner = PredicateBuilder.True<Customer>();
    if (a.Include == true || a.Exclude == true) 
    {
        value = a.ProductType.ID;
        productinner = PredicateBuilder.True<CustomerProduct>();
        if (a.VersiondID != 0)
        {
            productinner = productinner.And(s => s.ProductTypeID == value && s.VersionID == a.VersiondID);  
            inner = inner.And(o => o.Products.Any(productinner.Compile()));
        }
        else
        {
            productinner = productinner.And(s => s.ProductTypeID == value);
            inner = inner.And(o => o.Products.Any(productinner.Compile()));
        }

        if (cqv.ComplexQuery.IncludeOnAll)
        {
            Includepredicate = Includepredicate.And(inner.Expand());
        }
        else
        {
            Includepredicate = Includepredicate.Or(inner.Expand());
        }
    }
}

IncludedCustomers = UoW.Customers.AsExpandable().Where(Includepredicate).ToList(); 
```

PredicateBuilder 不能处理多个 Any 子句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:10:57.220

我终于发现我需要在我的 for 循环中创建临时变量来保存该值。当您这样做时，它以某种方式知道立即解析该值并且谓词起作用。

# xml - 如何在 xslt 中动态添加 javascript url

> ID：14504100
> 
> 赞同：1
> 
> 时间：2013-01-24T14:50:29.613
> 
> 标签：xml, xslt

我有一个 xsl，我必须在其中包含一个 javascript，它的 src 链接是从 Web 服务响应中接收的。

服务响应 xml 如下所示：

```
<value>
  <scripturl>http://www.example.com/js/example.js?apikey=12345</scripturl>
</value> 
```

我在 xsl 中添加的脚本标签（我已经读取了xsl 中的`scripturl`值并在名为 的 xsl 变量中设置`scripturlxsl`）如下所示：

```
<script type="text/javscript" src="{scripturlxsl}"></script> 
```

我将如何使它工作，因为页面没有加载脚本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:16:57.667

如果脚本 url 值已经在变量中，那么您将执行以下操作：

```
<script type="text/javscript" src="{$scripturlxsl}"></script> 
```

# svn - Tortoise SVN Commit 默认取消选中

> ID：14504102
> 
> 赞同：12
> 
> 时间：2013-01-24T14:50:29.823
> 
> 标签：svn, tortoisesvn, multipleselection

我想知道当您尝试将文件提交到存储库时，是否有办法将复选框默认设置设置为未选中/无。提交的默认设置设置为检查所有，但我想避免遇到我不小心错误地签入项目的情况。当您第一次点击提交按钮时，有没有办法配置 SVN 的设置以取消选中这些框？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-24T14:53:44.897

很简单，你可以在这里选择

> 菜单设置 -> 对话框 2 -> 自动选择项目 = 取消选中

![在此处输入图像描述](../Images/fcf9852be2227e77985f16204ceb316b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-01T10:14:18.480

我今天发现的一个非常酷的功能也是解决所描述问题的方法。可以一次选中或取消选中多个项目。

如果您选择列表中的项目（可能全部通过按`Alt`+ `A`），您可以更改对选择的检查。只需单击选择中包含的一项。

# 前

[![在此处输入图像描述](../Images/79ada1434906f28c39b9e2f0bb5e5bc8.png)](https://i.stack.imgur.com/unYQw.png)

# 后

[![在此处输入图像描述](../Images/db41a2568440b1128cce69d524e2a609.png)](https://i.stack.imgur.com/dEWM9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T10:28:59.490

默认情况下，您可以使用名为`ignore-on-commit`.

*   在“提交”对话框中，执行（对有更改的文件）`Right click > Move to changelist`。
*   命名更改列表`ignore-on-commit`

下次打开“提交”对话框时，将取消选择该文件。

这也适用于 IntelliJ 等。

# jax-ws - com.sun.xml.ws.transport.local.InVmServer：示例代码和经验？

> ID：14504103
> 
> 赞同：6
> 
> 时间：2013-01-24T14:50:32.447
> 
> 标签：jax-ws, java-metro-framework

我想对我们的一些网络服务进行一些 junit 测试。不仅仅是调用 Java 代码，而是通过`javax.xml.ws.Endpoint`JAX-WS 堆栈来确保一切正常工作。我们使用 Java 7 中的默认实现进行测试——根据 wsimport 的 Metro 2.2.4——以及 Java 6 中的默认实现用于生产。

然而，典型的 http 绑定需要一个 TCP/IP 端口来绑定，我想知道是否有可能避免 TCP/IP 层，同时保留 JAX-WS 堆栈的其余部分。

似乎 com.sun.xml.ws.transport.local.InVmServer 支持“in-vm”传输，它正是这样做的，但我在理解相当简洁的文档以及如何启动它并从在 Maven 调用的 junit 4 测试中。

所以，我的问题是：我如何 - 在 maven 调用的 junit 设置中 - 使用“in-vm”传输（可能使用执行程序）启动端点，并从客户端调用它，然后关闭端点. 另外，您对此有何经验？

# wpf - 当我离开它时，为什么我的 DataGridComboBoxColumn 会清除它的值？

> ID：14504117
> 
> 赞同：4
> 
> 时间：2013-01-24T14:51:09.920
> 
> 标签：wpf, data-binding, validation, datagridcomboboxcolumn

我有一个包含两列的 DataGrid：

1.  数据网格组合框列
2.  数据网格文本列。

我已经设置了数据验证，这样如果一个有值，另一个就会出错，直到它也有一个值。验证很愚蠢，但它提供了一些用于验证的简单标准，因此我可以说明这个问题。

当我在文本单元格中输入内容时，按 Tab，然后单击第一个单元格，第一个单元格显示它处于错误状态（这是正确的）。问题是，当我从组合框下拉列表中选择某些内容并离开该单元格（通过按 Tab 或单击另一个单元格）时，我为组合框选择的值会消失。每当属性更改时，我都会设置绑定来更新我的源，因此只要我选择它，它就会设置为我选择的值。但是，当我离开单元格时，该属性被设置为 null。如果单元格未处于错误状态，我看不到此行为。

有人可以帮忙吗？这是我的 DataGrid 的 XAML：

```
 <DataGrid Grid.Row="2"
              Name="GrdData"
              ItemsSource="{Binding Path=Dvm.Data}"
              SelectedItem="{Binding Path=Dvm.SelectedData, Mode=TwoWay}"
              CanUserAddRows="True"
              CanUserDeleteRows="False"
              AutoGenerateColumns="False"
              Margin="5"
              SelectionMode="Single"
              IsEnabled="{Binding Path=IsGridEnabled}">
        <DataGrid.Columns>
            <DataGridComboBoxColumn Header="Column 1"
                                    SelectedItemBinding="{Binding Path=Col1, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
                                    Width="*"
                                    DisplayMemberPath="Description">
                <DataGridComboBoxColumn.ElementStyle>
                    <Style TargetType="ComboBox">
                        <Setter Property="ItemsSource" Value="{Binding Path=DropDownValues, Mode=OneWay}" />
                        <Setter Property="IsSynchronizedWithCurrentItem" Value="False"/>
                    </Style>
                </DataGridComboBoxColumn.ElementStyle>
                <DataGridComboBoxColumn.EditingElementStyle>
                    <Style TargetType="ComboBox">
                        <Setter Property="ItemsSource" Value="{Binding Path=DropDownValues, Mode=OneWay}"/>
                        <Setter Property="IsDropDownOpen" Value="True" />
                    </Style>
                </DataGridComboBoxColumn.EditingElementStyle>
            </DataGridComboBoxColumn>
            <DataGridTextColumn Header="Column 2"
                                Binding="{Binding Path=Col2, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                Width="*"/>
        </DataGrid.Columns>
    </DataGrid> 
```

我无法想象我做错了什么。我看到这个[其他链接](https://stackoverflow.com/questions/3080913/datagridcomboboxcolumn-loses-its-content-when-selection-changes)似乎描述了我遇到的同样问题，但对他们有用的解决方案似乎对我不起作用；我添加了 SelectedValueBinding 和 SelectedValuePath，但行为没有改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-15T15:40:53.880

`Mode=TwoWay`从绑定中 删除。

该问题是由剪贴板和自动化支持中的错误引起的。这通过在单元格上设置一个特殊属性`ClipboardContentBinding`然后读取该值来工作。如果该绑定是双向的，则有时会将特殊属性中的旧值推回视图模型，并且验证错误似乎会触发此行为。 `DataGridBoundColumns`并且`DataGridComboBoxColumns`将提供`Binding`or `SelectedItemBinding`if`ClipboardContentBinding`为空，因此如果您将其中任何一个设置为`TwoWay`绑定，您将获得此错误。

如果您不设置`Mode`，它将`Default`使用属性中的默认值，即`TwoWay`for `TextBox.Text`and `ComboBox.SelectedItem`but`OneWay`用于特殊的剪贴板属性。

# c# - 如何将相同的查询应用于不同的实体？

> ID：14504120
> 
> 赞同：4
> 
> 时间：2013-01-24T14:51:18.763
> 
> 标签：c#, .net, visual-studio-2010, entity-framework

所以，我开始使用 EF，我正在开发一个使用它作为 ORM 的应用程序。问题是我没有太多时间深入研究文档（我计划在适当的时候）而且我有点迷失在某些事情上。例如，我有这两个查询：

```
public static int GetNextPadlockNumber()
        {
            LockersDBEntities1 entities = new LockersDBEntities1();
            var query = (from p in entities.PadLocks select p.PadlockNumber).DefaultIfEmpty(0).Max();
            return (int)query + 1;
        }

        public static Data.PadLock GetPadLockByNumber(int number)
        {
            Data.LockersDBEntities1 entities = new LockersDBEntities1();
            var query = (from p in entities.PadLocks where p.PadlockNumber == number select p).FirstOrDefault();
            return query;
        } 
```

和

```
public static int GetNextLockerNumber()
        {
            LockersDBEntities1 entities = new LockersDBEntities1();
            var query = (from l in entities.Lockers select l.LockerNumber).DefaultIfEmpty(0).Max();
            return (int)query+1;
        }

        public static Data.Locker GetLockerByNumber(int number)
        {
            Data.LockersDBEntities1 entities = new LockersDBEntities1();
            var query = (from l in entities.Lockers where l.LockerNumber == number select l).FirstOrDefault();
            return query;
        } 
```

问题是它们是完全相同的查询。没有任何方法可以做到这一点而不必指定我想要一个储物柜或挂锁吗？先谢谢各位大侠了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:59:05.970

您可以使用`LockerNumber`and`PadlockNumber`作为 Identity Autoincrement 字段，因为这就是您正在做的事情，然后将它们命名为相同（例如 Id）。

这样就不再需要“获取下一个储物柜号码”，因为插入的每个新实体都将获得下一个可用号码，并且使用 Repository 模式，您可以将这些方法作为 Base Repository 类中的常用方法，如下所示：

```
public IEntity GetEntityById(int number)
{
   return ObjectSet.Single(x => x.Id == number);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:03:56.603

EF 的一大优点是你可以做这样的事情。这不是微不足道的，它需要一些试验和错误，但你可以抽象出很多数据库的复杂性。

现在，假设它`LockersDBEntities1`是 a `DbContext`，你可以这样：

```
public static class LockersDBEntities1Extensions
{
   public static int GetNextNumber<T>(
        this LockersDBEntities1 context, 
        Expression<Func<T, int>> getNumberExpression)
   {
     var query = (from item in context.Set<T> 
                  select getNumberExpression(item))
                 .DefaultIfEmpty(0)
                 .Max();
     return (int)query + 1;
    }
} 
```

并像这样使用它：

```
int nextPadlockNumber = new LockersDBEntities1()
                                    .GetNextNumber<Padlock>(p => p.PadlockNumber) 
```

和

```
int nextPadlockNumber = new LockersDBEntities1()
                                    .GetNextNumber<Locker>(l => l.LockerNumber) 
```

需要该`getNumberExpression`表达式，因为没有通用方法可以访问所有实体的数字。它可能是过度设计，但如果这是一个问题，我会做这样的事情：

```
//this should be a better name, to reflect the real scenarion
interface ILockNumberProvider 
{
   int Number {get; }
} 
```

并在和其他需要提供锁号的类`Locker`上实现该接口。`Padlock`然后，在上面的方法中可以省略表达式，并且可以使用通用约束，例如：

```
public static class LockersDBEntities1Extensions
{
   public static int GetNextNumber<T>(this LockersDBEntities1 context)
                     where T:ILockNumberProvider 
   {
     var query = (from item in context.Set<T> 
                  select item.Number)
                 .DefaultIfEmpty(0)
                 .Max();
     return (int)query + 1;
    }
} 
```

# c# - FileHelpers csv分号分隔符问题

> ID：14504121
> 
> 赞同：1
> 
> 时间：2013-01-24T14:51:19.957
> 
> 标签：c#, filehelpers

我有这个 csv 文件：

```
 firstName;lastName;78
    fn1;ln1;67
    fn2;;56,7
    fn3;ln3;23,5
    fn4;ln4;16,7 
```

而这堂课：

```
 [DelimitedRecord(";")]
    public partial class Person
    {
        private string firstName;

        [FieldNullValue("default first name")]
        private string lastName;     

        private string age;

        public string FirstName
        {
            get { return firstName; }
            set { firstName = value; }
        }

        public string LastName
        {
            get { return lastName; }
            set { lastName = value; }
        }

        public string Age
        {
            get { return age; }
            set { age = value; }
        }
    } 
```

我使用这段代码来检索数据：

```
 ExcelStorage provider = new ExcelStorage(typeof(Person));
            provider.FileName = "data.csv";
            System.Data.DataTable dataTable = provider.ExtractRecordsAsDT(); 
```

数据表包含以下内容：

```
dataTable.Rows[0].ItemArray
{object[3]}
    [0]: "firstName;lastName;78"
    [1]: "default first name"
    [2]: {}
dataTable.Rows[1].ItemArray
{object[3]}
    [0]: "fn1;ln1;67"
    [1]: "default first name"
    [2]: {}
dataTable.Rows[2].ItemArray
{object[3]}
    [0]: "fn2;;56"
    [1]: "7"
    [2]: {}
dataTable.Rows[3].ItemArray
{object[3]}
    [0]: "fn3;ln3;23"
    [1]: "5"
    [2]: {}
dataTable.Rows[4].ItemArray
{object[3]}
    [0]: "fn4;ln4;16"
    [1]: "7"
    [2]: {} 
```

我肯定错过了一些东西。

编辑：我将小数分隔符从“，”替换为“。” 我仍然得到同样的坏结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:15:38.933

问题已解决：必须使用 FileHelperEngine 而不是 ExcelStorage

# svg - Raphaeljs 获取缩放路径的坐标

> ID：14504122
> 
> 赞同：0
> 
> 时间：2013-01-24T14:51:19.987
> 
> 标签：svg, raphael, vml

我有一条创建形状的路径 - 例如。一个八角形

```
pathdetail="M50,83.33 L83.33,50 L116.66,50 L150,83.33 L150,116.66 L116.66,150 L83.33,150 L50,116.66Z";
paper.path(pathdetail);
paper.path(pathdetail).transform("S3.5"); 
```

然后我用它来创建我知道每个角的坐标的形状，因为它们在路径细节中。然后我使用 transform("S3.5") 重新缩放它 - 我需要能够在新的缩放形状中获得每个角的新坐标 - 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:48:42.657

Raphael 提供了一个将矩阵变换应用于路径的实用程序，首先您需要将变换转换为矩阵，应用变换并将其应用于元素：

```
var matrix = Raphael.toMatrix(pathdetail, "S3.5");
var newPath = Raphael.mapPath(pathdetail, matrix);
octagon.path(newPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:29:56.230

如果我理解正确，您想找到八角形中八个点中每个点的转换坐标——对吗？如果是这样，Raphael 没有为您提供开箱即用的解决方案，但您应该能够使用 Raphael 的一些核心实用功能相对轻松地获得所需的信息。

我的建议是这样的：

```
var pathdetail = "your path definition here.  Your path uses only absolute coordinates...  right?";
var pathdetail = Raphael.transformPath( pathdetail, "your transform string" );

//  pathdetail will now still be a string full of path notation, but its coordinates will be transformed appropriately

var pathparts = Raphael.parsePathString( pathdetail );
var cornerList = [];

//  pathparts will not be an array of path elements, each of which will be parsed into a subarray whose elements consist of a command and 0 or more parameters.
//  The following logic assumes that your path string uses ONLY ABSOLUTE COORDINATES and does
//  not take relative coordinates (or H/V directives) into account.  You should be able to 
//  code around this with only a little additional logic =)
for ( var i = 0; i < pathparts.length; i++ )
{
    switch( pathparts[i][0] )
    {
        case "M" :
        case "L" :
            //  Capture the point
            cornerList.push( { x: pathparts[i][1], y: pathparts[i][2] } );
            break;
        default :
            console.log("Skipping irrelevant path directive '" + pathparts[i][0] + "'" );
            break;
    }
}

// At this point, the array cornerList should be populated with every discrete point in your path. 
```

这显然是不希望使用内联的代码块，并且只会处理野外路径的子集（尽管它可以扩展为适合通用用途）。但是，对于路径字符串使用绝对坐标的八边形情况，这个——或类似的东西——应该能准确地给你你需要的东西。

# qt - 激活单元格时QTableView单元格数据消失

> ID：14504123
> 
> 赞同：0
> 
> 时间：2013-01-24T14:51:28.467
> 
> 标签：qt

我正在开发一个使用 QT5.0 和 QT 新手的应用程序。糟糕的是，我没有太多时间来学习漫长的学习曲线。我已经派生了自己的 TableModel 并将其设置为可编辑的 TableView。TableView 显示模型的数据，它有效。但是当我在表格视图上激活一个单元格时，数据就会消失。我查看了文档，发现 QTableView 是从 QAbstractItemView 类派生的，该类有一个名为“激活”的信号和一个名为“编辑”的插槽。所以，我认为“激活”信号连接到“编辑”插槽。但是“编辑”不是虚拟的，所以我不能覆盖它。我可以将我的子类连接到父母的“激活”信号，但实际上我不知道如何处理这个信号以保存 TableView 对象的当前数据。如果代码使用 SqlTableModel 是没有问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:57:25.427

检查您的数据功能：

```
QVariant TableModel::data(const QModelIndex &index, int role) const
    if( !index.isValid() )
        return QVariant();       
    if( role == Qt::DisplayRole || role == Qt::EditRole) {
        return <your data>
    }
    return QVariant();
} 
```

确保您处理`EditRole`角色。

祝你好运！

# php - 在时间戳和日期时间之间转换

> ID：14504129
> 
> 赞同：2
> 
> 时间：2013-01-24T14:51:57.780
> 
> 标签：php, date, datetime, timestamp

我试过这段代码，它会给我正确的日期，但时间不正确：

```
function convert_datetime($str) { 

    list($date, $time) = explode(' ', $str); 
    list($year, $month, $day) = explode('-', $date); 
    list($hour, $minute) = explode(':', $time); 
    $timestamp = mktime($hour, $minute, $year, $month, $day); 
    return $timestamp; 
}  
    if(isset($_POST['submit']))
    {
    $datetime=$_POST['startdate'].' '.$_POST['start_hour'].":".$_POST['start_minute'];
    $timestamp=convert_datetime($datetime);
    echo "DateTime:".$datetime;
    echo " ";
    echo "Timestamp:".$timestamp;
    echo " ";
    $dateandtime = date("Y-m-d H:i", $timestamp);
    echo "converted:".$dateandtime;
    } 
```

有输入：`2013-1-21 21:51` 我会把这个拿出来

```
DateTime:2013-1-21 21:51 Timestamp:1358807073 converted:2013-01-21 22:24 
```

所以顺序不正确。在时间部分我有问题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:56:49.657

使用[日期时间](http://php.net/manual/en/book.datetime.php)。它更容易，更准确：

```
$datetime = DateTime::createFromFormat("Y-m-d H:i", '2013-1-21 21:51');
echo 'Timestamp: ' . $datetime->getTimestamp() . PHP_EOL;
echo 'Datetime: ' . $datetime->format("Y-m-d H:i") . PHP_EOL; 
```

[确认工作](http://codepad.viper-7.com/AG9j8W)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:56:14.017

您缺少 seconds 参数 - 请参阅[phpdocs 上的 mktime](http://php.net/manual/en/function.mktime.php)。在您的示例中，为 seconds 提供了值 2013，当添加到时间时会改变整体结果。

```
function convert_datetime($str) { 

    list($date, $time) = explode(' ', $str); 
    list($year, $month, $day) = explode('-', $date); 
    list($hour, $minute) = explode(':', $time); 
    $timestamp = mktime($hour, $minute, 0, $year, $month, $day); 
    return $timestamp; 
} 
```

附带说明一下，php 确实内置了转换功能。试试[strtotime](http://php.net/manual/en/function.strtotime.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:58:44.540

打发时间时，在零字段中输入几秒钟。我相信它需要 2013 秒并使用它来添加 2013/60 并使用它来添加 33 分钟到您的时间。我相信 mktime 假定缺少字段的当前日期，这就是为什么它今年仍然是 2013 年。

# groovy - 如何在 Groovy-Eclipse DSL 中定义方法

> ID：14504136
> 
> 赞同：0
> 
> 时间：2013-01-24T14:52:27.097
> 
> 标签：groovy, groovydsl

我正在利用 groovy-eclipse 插件开发一种语言。我可以成功定义一个属性。但是，即使是简单的方法，我也不能这样做。可能我在所有中心都遗漏了一些非常简单的东西......

*   我不能定义一个委托给简单闭包的方法吗？
*   **类型**属性在方法切入点中定义什么？

以下是我的 groovy dsl 文件中的唯一贡献块；

```
 currentType(currentType("com.galaksiya.World")){
     method name : 'sayHello', 
     provider : 'Galaksiya', 
     doc : 'This is a simple salutor.', 
     delegate: {-> println 'Hello World'}
 } 
```

这是一个简单的缺陷还是我需要改变我的观点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:54:14.403

好的。我想我明白了什么是错的。关注点是分开的。Groovy-Eclipse DSL 使您能够管理诸如代码完成和howers、文档之类的功能……但它不提供任何有关实现的能力。您应该使用 groovy 的元编程功能（如 expandos、动态闭包等）与您的 dsl 分开设计和实现您的语言工件。

# nhibernate - NHibernate 二级缓存与桌面应用程序上的数据库更改通知

> ID：14504142
> 
> 赞同：1
> 
> 时间：2013-01-24T14:52:36.890
> 
> 标签：nhibernate, desktop-application, bamboo, second-level-cache

我正在开发一个使用 NHibernate 与 PostgreSQL 数据库通信的 WPF 应用程序。唯一适用于桌面应用程序的缓存提供程序是 Bamboo Prevalence（如果我错了，请纠正我）。鉴于每台运行我的应用程序的计算机都有不同的会话工厂，我的应用程序从缓存中检索过时的数据。

我的问题是，我如何告诉 NHibernate/Prevalence 查看上次更新数据的时间戳，如果缓存过时，刷新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:03:45.883

好吧，我发现二级缓存无法知道数据库是否在 Nhibernate/Cache 之外更改，所以我所做的是在我的所有表上创建一个新列“时间戳”。

在我的查询中，我首先使用 Session.Cachemode(CacheMode.Ignore) 选择数据库的时间戳来获取数据库的时间戳，然后与缓存中的结果进行比较。在时间戳不同的情况下，我使该查询的缓存无效并再次运行它。

关于 SysCache，即使知道它“可以在 WPF 桌面应用程序上工作”，我也不热衷于使用 System.Web.Cache，因为我的应用程序需要完整的 .Net 框架而不是客户端配置文件。我进行了搜索，为了我的幸福，有人编写了一个 Nhiberate 缓存提供程序，它实现了（System.Runtime.Caching），女巫不是 ASP.Net 组件。如果有人感兴趣，您可以在以下位置找到源代码： [https ://github.com/Leftyx/nhcontrib/tree/master/src/NHibernate.Caches/MemoryCache](https://github.com/Leftyx/nhcontrib/tree/master/src/NHibernate.Caches/MemoryCache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:06:00.317

嗯，这是一个属性，您可以在缓存级别设置并根据您的应用程序需要使项目过期，然后拥有缓存。Ncache 是 NHibernate 的一个可能的 L2 缓存提供程序。NCache 确保其缓存在多个服务器之间保持一致，并且所有缓存更新都正确同步，因此不会出现数据完整性问题。要了解更多信息，请访问：

[http://www.alachisoft.com/ncache/nhibernate-l2cache-index.html](http://www.alachisoft.com/ncache/nhibernate-l2cache-index.html)

# c++ - 如果使用错误的格式字符串调用 printf 会发生什么？

> ID：14504148
> 
> 赞同：6
> 
> 时间：2013-01-24T14:52:47.497
> 
> 标签：c++

或者换句话说：错误的`printf`/`fprintf`十进制整数 ( `%d`, `%u`, `%ld`, `%lld`) 格式字符串会导致程序崩溃或导致未定义的行为吗？

Cosinder 以下代码行：

```
#include <iostream>
#include <cstdio>

int main() {
    std::cout << sizeof(int) << std::endl
              << sizeof(long) << std::endl;

    long a = 10;
    long b = 20;
    std::printf("%d, %d\n", a, b);

    return 0;
} 
```

32 位架构的结果：

```
4
4
10, 20 
```

64 位架构的结果：

```
4
8
10, 20 
```

在任何情况下，程序都会打印出预期的结果。我知道，如果`long`值超出`int`范围，程序会打印错误的数字——这很难看，但不会影响程序的主要目的——但除此之外，还会发生什么意外吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:53:48.527

> **如果使用错误的格式字符串调用 printf 会发生什么？**

任何事情都有可能发生。这是未定义的行为！
未定义的行为意味着任何事情都可能发生。它可能会向您显示您期望的结果，也可能不会或可能会崩溃。任何事情都有可能发生，除了你自己，你不能责怪任何人。

**参考：**

**c99 标准：7.19.6.1：**
**第 9 段：**

> 如果转换规范无效，则行为未定义。^(225))如果任何参数不是对应覆盖规范的正确类型，则行为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:57:41.800

这是未定义的行为——规范中没有任何内容告诉编译器设计者（或 C 库设计者）应该如何处理，因此他们可以做任何事情。

在实践中，这是完全取决于对数字的解释的那些之一，而且很可能，这样做你永远不会得到任何好处。真正糟糕的是当您将字符串与整数格式混合时 - 字符串将很好地打印为（可能是奇怪的）数字，但数字在作为字符串传递时不太可能“工作” - 因为字符串是指向第一个地址的指针字符 - 并且大多数数字在典型系统中都不是有效的指针，因此它会崩溃。

但是没有任何保证。在您的 64 位示例中，很明显该数字是“小端”。用 0x100000000 尝试同样的事情，它会打印 0 - 因为其余的数字都丢失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T14:55:34.690

哦，是的 - printf 取决于格式字符串来确定接下来要获取的变量的大小和类型。当格式字符串错误时，它可能会尝试获取甚至不存在的变量，并可能产生所有后果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-11T07:19:24.310

如果使用错误的格式字符串调用 printf，任何事情都可能发生。它的未定义行为，永远不应该依赖未定义的行为。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-24T15:05:52.713

## 不要使用 printf

`printf`是 C 时代的遗物，不再需要...改用`std::cout`I/O 操纵器。

# php - OOP，直接将类变量添加到一个类中，之前没有定义它们

> ID：14504152
> 
> 赞同：1
> 
> 时间：2013-01-24T14:52:55.067
> 
> 标签：php, oop

我的问题很简单，我在课堂上看到了这段代码：

```
class controller_activity {
    function __construct($args) {
        //the variable template is not defined or what happen??
        $this->template = new Template('activity');     
    }
    ....... 
```

通常我在“public $template”之类的类中看到变量的声明或类似的，但是这种情况下，如果我像往常一样定义这些变量，我可以直接添加变量吗？之前没有定义它们?，值得推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:56:25.787

> 如果我像往常一样定义这些变量，是否相同？

不，缺少定义。[`get_object_vars`](http://php.net/get_object_vars)会显示他们，但[`get_class_vars`](http://php.net/get_class_vars)不会。

> 我可以直接用这种方式添加变量吗？

是的，这是可能的。它们将是公开可见的。

> 之前没有定义它们？

是的，之前没有定义它们。它们将是公开可见的。

> 值得推荐吗？

那要看。通常不会，但这条规则也有例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:57:05.197

我认为这段代码有效的原因是因为`$this->template`分配发生在`__construct()`类实例化时几乎立即发生。所以这可以被看作是一种草率的——但可以伪造的——进行变量赋值的方式。但这对以后的可读性或调试没有帮助。所以答案是肯定的，你可以这样做。这是“最佳实践”吗？100% 没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:00:11.013

虽然不推荐，但 PHP 及其对变量的非约束（弱类型）使用意味着可以动态声明类变量。

我曾多次意外地做到了这一点，但后来又回过头来正确地定义了它们。默认情况下，它们将具有`public`访问方法（与在类的头部不包括访问方法的行为相同，即`$var = 0`vs `private $var = 0`）。

同样，不建议这样做。我没有专门测试过它，但我想他们会抛出一个`Notice`错误。另一个问题是，这样做会使代码更难遵循，无论是以后自己还是尝试使用您的课程的其他开发人员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T15:04:15.837

您发布的代码将毫无问题地工作。

在 PHP 中，您可以使用未声明的变量。在其他语言（如 Java）中，您不能使用未声明的变量。这只是风格问题，但我个人不喜欢使用它们。

请注意，如果在您的示例中未声明模板 var，则具有公共[可见性](http://php.net/manual/en/language.oop5.visibility.php)

# magento - Magento：迭代 Varien 对象集合的正确方法

> ID：14504153
> 
> 赞同：1
> 
> 时间：2013-01-24T14:53:04.037
> 
> 标签：magento, object, collections, magento-1.7

如果我要创建一个将使用给定`collection`检索所有`products`属于的，如下所示：`category``ID`

```
 $storeId    = Mage::app()->getStore()->getId();  
    $product    = Mage::getModel('catalog/product');  
    $category   = Mage::getModel('catalog/category')->load(39);
    $catName    = $category->getName();

    $visibility = array(  
        Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH,  
        Mage_Catalog_Model_Product_Visibility::VISIBILITY_IN_CATALOG  
    );  

    $products = $product->setStoreId($storeId)  
        ->getCollection()  
        ->addAttributeToFilter('visibility', $visibility)  
        ->addCategoryFilter($category)  
        ->addAttributeToSelect(array('name'), 'inner')
        ->setOrder('name', 'asc')
    ;  

    $collection = $products; 
```

然后我将如何遍历集合并访问每个项目的数据，在这种情况下，项目是一个产品。

我本来希望像下面这样的东西给我每个项目可用的数据，但似乎不起作用：

```
 foreach ($collection as $key => $value) {
        var_dump($value->getData());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:54:35.357

你很近。尝试做

```
foreach ($collection as $obj) {
        echo $obj->getName();
} 
```

# c# - 通过 Process.Start 对安装进行排队

> ID：14504156
> 
> 赞同：0
> 
> 时间：2013-01-24T14:53:12.893
> 
> 标签：c#, windows, process, windows-installer, system.diagnostics

我需要排队大约 20 个完全无人值守的安装（使用 C# winform 应用程序）。每个安装都有自己的 INI 文件（手动创建），其中包含有关每个安装程序为此过程需要哪些参数的正确信息（在执行该程序之前读入）。我遇到了许多应用程序的问题，当执行 setup.exe 时，进程立即关闭并启动其 MSI（如果适用），导致我的程序在下一次安装时执行，假设第一次安装已完成。我在网上阅读过类似的问题，但没有真正解决这个问题......（一些解决方法包括使用带有 /Wait 选项的批处理文件，它应该将 setup.exe 保留在内存中，直到其 MSI 完成）。设置。

我有什么选择来解决这个困境？

以下是一些演示该过程的示例代码：

```
 foreach (ListViewItem itm in this.lstSoftwares.Items)
            {
                try
                {
                    if (itm.Checked)
                    {
                        lblStatus.Text = "Status: Installing " + current.ToString() + " of " + count.ToString();

                        string InstallPath = Path.Combine(Application.StartupPath, "Software",
                        itm.Text, itm.Tag.ToString());

                        string CommandLine = itm.SubItems[1].Text;

                        Process process = new Process();
                        process.StartInfo.FileName = InstallPath;
                        process.StartInfo.Arguments = CommandLine;

                        process.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
                        process.Start();
                        process.WaitForExit();
                        this.lstSoftwares.Items[i].SubItems[2].Text = "Complete";
                        current++;
                    } 
```

**更新**

在 waitforexit() 之后，我正在使用一个循环来检查 msiexec 是否正在运行：

```
 private bool MSIRunning()
    {           
        try
        {
            using (var mutex = Mutex.OpenExisting(@"Global\_MSIExecute"))
            {                   
                return true;
            }

        }
        catch (Exception)
        {
            return false;
        }
    } 
```

这是我的观点中的一个黑客，但到目前为止做的伎俩......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:47:09.267

在 process.start 之后在循环中查询 MSI Mutex（检查 Mutex 是否每 3 秒运行一次，如果没有返回并继续下一次安装）似乎可以解决问题（如上所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T18:28:28.370

已经回答了，但我有一个更强大的 MSI 互斥检查实现：

```
public bool IsMsiExecFree(TimeSpan maxWaitTime)
{
    _logger.Info(@"Waiting up to {0}s for Global\_MSIExecute mutex to become free...", maxWaitTime.TotalSeconds);

    // The _MSIExecute mutex is used by the MSI installer service to serialize installations
    // and prevent multiple MSI based installations happening at the same time.
    // For more info: http://msdn.microsoft.com/en-us/library/aa372909(VS.85).aspx

    const string installerServiceMutexName = "Global\\_MSIExecute";
    Mutex msiExecuteMutex = null;
    var isMsiExecFree = false;

    try
    {
        msiExecuteMutex = Mutex.OpenExisting(installerServiceMutexName,
            MutexRights.Synchronize);
        isMsiExecFree = msiExecuteMutex.WaitOne(maxWaitTime, false);
    }
    catch (WaitHandleCannotBeOpenedException)
    {
        // Mutex doesn't exist, do nothing
        isMsiExecFree = true;
    }
    catch (ObjectDisposedException)
    {
        // Mutex was disposed between opening it and attempting to wait on it, do nothing
        isMsiExecFree = true;
    }
    finally
    {
        if (msiExecuteMutex != null && isMsiExecFree)
            msiExecuteMutex.ReleaseMutex();
    }

    _logger.Info(@"Global\_MSIExecute mutex is free, or {0}s has elapsed.", maxWaitTime.TotalSeconds);

    return isMsiExecFree;
} 
```

# css - 应用于 CSS 类的背景图像不会出现在 IE 7 中

> ID：14504157
> 
> 赞同：1
> 
> 时间：2013-01-24T14:53:13.050
> 
> 标签：css, internet-explorer-7

CSS 引用的背景图片不会出现在 IE 7 中；IE 8、FireFox 和 Chrome 工作。将图像格式从 GIF 和 JPG 更改，但这并没有解决问题。

CSS：

```
.question{
   background-image: url("/app/scr/bsf-osb/ins/images/icons/infos-question-circle2DG.png");
   background-repeat: no-repeat;
   padding-right: 16px; 
   text-decoration: none;
   background-position: left center;
 } 
```

HTML：

```
<span id="biaEstateNumberHelp" class="question" title="" alt=""></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:11:17.967

删除图像相对路径中的第一个 / ：

`background-image: url("app/scr/bsf-osb/ins/images/icons/infos-question-circle2DG.png");`

您也可以尝试应用`display: inline-block`到元素（尽管对于 IE7 这不会做任何事情 - 您需要添加`*display: inline; zoom: 1;`以模拟内联块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:12:34.037

如果我没记错的话，IE 会取出空标签。把类似的东西`&nbsp;`放在你的跨度内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:56:55.460

你试过`overflow: hidden;`吗？

# jquery - jQuery：从链接标签中提取一部分

> ID：14504164
> 
> 赞同：0
> 
> 时间：2013-01-24T14:53:26.690
> 
> 标签：jquery

如何从这个 a href 标签中提取（使用 jQuery）数字？

```
<a href="#slide1"></a>
<a href="#slide2"></a>
<a href="#slide3"></a> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:56:20.087

像这样的东西应该工作：

```
$('a').each(function() {
  alert($(this).prop('href').replace(/[^\d]+/, ''));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:56:22.763

```
$('a').each(function(){
   alert($(this).prop("href").replace("#slide",""));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:58:38.363

试试这个

```
$('a').each(function() {
  alert($(this).prop('href').replace(/[^\d]+/, ''));
}); 
```

**[现场演示](http://jsfiddle.net/jjXph/1/)**

# c# - 远程服务器返回错误 503 服务器不可用

> ID：14504165
> 
> 赞同：0
> 
> 时间：2013-01-24T14:53:27.547
> 
> 标签：c#, httpwebrequest, httpwebresponse, http-status-code-503, system.net.webexception

我有一个用 C# .Net 2.0 编写的客户端服务器应用程序。我已经让客户端/服务器响应/请求代码运行了 4 年（！）。最近在某台机器上，客户端连接不上服务器：

在代码行上：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

> WebException：远程服务器返回错误：（503）服务器不可用。
> Message="远程服务器返回错误：(503) 服务器不可用。"
> 状态 System.Net.WebExceptionStatus.ProtocolError

我相信这个问题是特定于机器的，因为我在任何其他机器上都没有遇到过这个问题。

我需要在那台机器上配置什么吗？我错过了什么？

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(string.Format("http://{0}:{1}/", server, httpPort));
request.ContentType = "application/x-www-form-urlencoded";
string msgStr = msgString;
byte[] buffer = Encoding.UTF8.GetBytes(msgStr);
request.ContentLength = buffer.Length;
request.Method = "POST";

try {
    System.IO.Stream requestStream = request.GetRequestStream();
    requestStream.Write(buffer, 0, buffer.Length);
    requestStream.Close();
    requestStream.Dispose();

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    byte[] inBuffer = new byte[10000];
    Stream responseStream = response.GetResponseStream();
    int iBytes = responseStream.Read(inBuffer, 0, inBuffer.Length);

    StringBuilder sb = new StringBuilder(10000);

    while (iBytes > 0) {
        sb.Append(Encoding.UTF8.GetString(inBuffer, 0, iBytes));
        iBytes = responseStream.Read(inBuffer, 0, inBuffer.Length);
    }

    response.Close();
    responseStream.Close();
    responseStream.Dispose();

    if (!string.IsNullOrEmpty(sb.ToString())) {
        message = HandleMessage(sb.ToString());
    } else { //bug 58
        message = HandleEmptyMessage(msgString);
    }
}  catch (System.Net.WebException we) {
    _connected = false;
    EventsHelper.AsyncFire(ConnectionLost, this, EventArgs.Empty);
    throw new Exception(we.Message);
} 
```

# mysql - 从当前小时开始获取行

> ID：14504178
> 
> 赞同：1
> 
> 时间：2013-01-24T14:53:56.697
> 
> 标签：mysql, sql, datetime

我将数据存储在 mySQL 数据库中，我想检索从现在到当前小时开始之间插入的行：不是在最后一小时，而是从一小时开始。例如，在 9:16，我想要从 9:00 到现在的行。我的时间以数据时间格式存储。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:00:38.737

下面的查询选择当前时间和当前时间之间的所有行。因此，如果当前时间是**10:11**，它将选择当前日期内**10:00**到**10:11之间的所有行。**

```
SELECT * 
FROM Test
WHERE mytime BETWEEN DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00') 
             AND DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i:%s') 
```

我测试了它并工作了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T14:56:33.357

首先想到的是：

```
select *
from t
where date(now() ) = date(t.timeval) and
      hour(now() ) = hour(t.timeval) 
```

我假设您在数据中没有未来的记录。如果是这样，那么就会想到：

```
select *
from t
where date(now() ) = date(t.timeval) and
      hour(now() ) = hour(t.timeval) and
      timeval < now() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:04:01.143

```
SELECT * FROM times WHERE t >= DATE_FORMAT(NOW(),'%Y-%m-%d %H:00:00'); 
```

# java - ElasticSearch：按嵌套文档的值排序

> ID：14504180
> 
> 赞同：6
> 
> 时间：2013-01-24T14:54:06.347
> 
> 标签：java, sorting, elasticsearch

我在为我的 java 应用程序使用 ElasticSearch 时遇到了麻烦。我解释一下自己，我有一个映射，类似于：

```
{
"products": {
    "properties": {
        "id": {
            "type": "long",
                   "ignore_malformed": false
        },
        "locations": {
            "properties": {
                "category": {
                    "type": "long",
                   "ignore_malformed": false
                },
                "subCategory": {
                    "type": "long",
                   "ignore_malformed": false
                },
                "order": {
                    "type": "long",
                   "ignore_malformed": false
                }
            }
        },
... 
```

因此，如您所见，我收到了由位置组成的产品列表。在我的模型中，这个位置是所有类别的产品。这意味着一个产品可以属于一个或多个类别。在每个类别中，产品都有一个订单，这是客户想要向他们展示的订单。

例如，钻石产品可以在珠宝中排名第一，但在女人中排名第三（我的例子不是那么合乎逻辑^^）。因此，当我单击珠宝时，我想显示此产品，按此特定类别中的字段 locations.order 排序。

目前，当我搜索特定类别的所有产品时，我收到的 ElasticSearch 响应类似于：

```
{"id":5331880,"locations":[{"category":5322606,"order":1},
{"category":5883712,"subCategory":null,"order":3},
{"category":5322605,"subCategory":6032961,"order":2},....... 
```

是否可以通过元素 locations.order 对我正在搜索的特定类别的产品进行排序？例如，如果我查询类别 5322606，我希望获得该产品的订单 1。

非常感谢您！问候，奥利维尔。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T10:31:45.590

首先是术语的更正：在 Elasticsearch 中，“父/子”是指完全独立的文档，其中子文档指向父文档。父子节点存储在同一个分片上，但它们可以独立更新。

`nested`通过上面的示例，您可以使用文档来完成您想要实现的目标。

目前，您的`locations`领域是`type:"object"`. 这意味着每个位置的值都会变平，看起来像这样：

```
{ 
    "locations.category": [5322606, 5883712, 5322605],
    "locations.subCategory": [6032961],
    "locations.order": [1, 3, 2]
} 
```

换句话说，“子”字段被扁平化为多值字段，这对您没有用处，因为 和 之间没有相关`category: 5322606`性`order: 1`。

但是，如果您在内部更改`locations`为`type:"nested"`then ，它会将每个位置索引为单独的文档，这意味着可以使用专用的`nested` [查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)和[过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/nested-filter.html)独立查询每个位置。

默认情况下，`nested`查询将根据每个位置的匹配程度返回 a ，但在您的情况下，您希望从任何匹配的子`_score`项返回字段的最大值。`order`为此，您需要使用[custom_score](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)查询。

因此，让我们首先使用适当的映射创建索引：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "products" : {
         "properties" : {
            "locations" : {
               "type" : "nested",
               "properties" : {
                  "order" : {
                     "type" : "long"
                  },
                  "subCategory" : {
                     "type" : "long"
                  },
                  "category" : {
                     "type" : "long"
                  }
               }
            },
            "id" : {
               "type" : "long"
            }
         }
      }
   }
}
' 
```

我们为您的示例文档编制索引：

```
curl -XPOST 'http://127.0.0.1:9200/test/products?pretty=1'  -d '
{
   "locations" : [
      {
         "order" : 1,
         "category" : 5322606
      },
      {
         "order" : 3,
         "subCategory" : null,
         "category" : 5883712
      },
      {
         "order" : 2,
         "subCategory" : 6032961,
         "category" : 5322605
      }
   ],
   "id" : 5331880
}
' 
```

现在我们可以使用上面讨论的查询来搜索它：

```
curl -XGET 'http://127.0.0.1:9200/test/products/_search?pretty=1'  -d '
{
   "query" : {
      "nested" : {
         "query" : {
            "custom_score" : {
               "script" : "doc[\u0027locations.order\u0027].value",
               "query" : {
                  "constant_score" : {
                     "filter" : {
                        "and" : [
                           {
                              "term" : {
                                 "category" : 5322605
                              }
                           },
                           {
                              "term" : {
                                 "subCategory" : 6032961
                              }
                           }
                        ]
                     }
                  }
               }
            }
         },
         "score_mode" : "max",
         "path" : "locations"
      }
   }
}
' 
```

注意：脚本中的单引号已被转义`\u0027`以绕过 shell 引用。该脚本实际上如下所示：`"doc['locations.order'].value"`

如果`_score`从结果中查看，您可以看到它使用`order`了匹配的值`location`：

```
{
   "hits" : {
      "hits" : [
         {
            "_source" : {
               "locations" : [
                  {
                     "order" : 1,
                     "category" : 5322606
                  },
                  {
                     "order" : 3,
                     "subCategory" : null,
                     "category" : 5883712
                  },
                  {
                     "order" : 2,
                     "subCategory" : 6032961,
                     "category" : 5322605
                  }
               ],
               "id" : 5331880
            },
            "_score" : 2,
            "_index" : "test",
            "_id" : "cXTFUHlGTKi0hKAgUJFcBw",
            "_type" : "products"
         }
      ],
      "max_score" : 2,
      "total" : 1
   },
   "timed_out" : false,
   "_shards" : {
      "failed" : 0,
      "successful" : 5,
      "total" : 5
   },
   "took" : 9
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T03:37:27.837

只需添加与按子字段排序父级相关的更新版本。我们可以查询按子字段（例如“计数”）排序的父文档类型，如下所示。

[https://gist.github.com/robinloxley1/7ea7c4f37a3413b1ca16](https://gist.github.com/robinloxley1/7ea7c4f37a3413b1ca16)

# c++ - 类构造函数声明了两次

> ID：14504181
> 
> 赞同：0
> 
> 时间：2013-01-24T14:54:11.190
> 
> 标签：c++, arduino

在 Arduino IDE 中，我收到关于我的构造函数如何声明两次的错误。

这是它的代码：

吨.h

```
#ifndef TOND_H
#define TOND_H

class Tondeuse {

public:
  Tondeuse();
  Tondeuse(int,int);

};

#endif 
```

吨.cpp

```
#ifndef TOND
#define TOND

#include "arduino.h"
#include "tond.h"

Tondeuse::Tondeuse()
{

}

Tondeuse::Tondeuse(int h, int w)
{

Serial.println("Hello");

}

#endif 
```

和错误：

```
Tondeuse.cpp.o: In function `Tondeuse':
/tond.cpp:11: multiple definition of `Tondeuse::Tondeuse()'
tond.cpp.o:C:\Users\DEPANNE\AppData\Local      \Temp\build6942484698459603114.tmp/tond.cpp:11: first defined here
Tondeuse.cpp.o: In function `Tondeuse':
/tond.cpp:11: multiple definition of `Tondeuse::Tondeuse()'
tond.cpp.o:C:\Users\DEPANNE\AppData\Local   \Temp\build6942484698459603114.tmp/tond.cpp:11: first defined here
Tondeuse.cpp.o: In function `Tondeuse':
/tond.cpp:16: multiple definition of `Tondeuse::Tondeuse(int, int)'
tond.cpp.o:C:\Users\DEPANNE\AppData\Local\Temp\build6942484698459603114.tmp/tond.cpp:16: first defined here
Tondeuse.cpp.o: In function `Tondeuse':
/tond.cpp:16: multiple definition of `Tondeuse::Tondeuse(int, int)'
tond.cpp.o:C:\Users\DEPANNE\AppData\Local\Temp\build6942484698459603114.tmp/tond.cpp:16: first defined here 
```

我没有将它包含两次，也找不到任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:56:50.080

你包括`tond.cpp`在`Tondeuse.cpp`. 不要包含实现文件。

如果文件不再存在（重构），请确保在再次构建之前清理解决方案。

# asp.net - 在逗号分隔的字符串中查找单词（不包含子字符串）

> ID：14504185
> 
> 赞同：1
> 
> 时间：2013-01-24T14:54:22.003
> 
> 标签：asp.net, linq, search, csv, asp.net-mvc-4

我正在使用 linq 查询，我在其中执行以下操作：

```
viewModel.REGISTRATIONGRPS = (From a In db.TABLEA
    Select New SubViewModel With {
    .SOMEVALUE1 = a.SOMEVALUE1,
    ...
    ...
    .SOMEVALUE2 = If(commaseparatedstring.Contains(a.SOMEVALUE1), True, False)
    }).ToList() 
```

现在我的问题是这不会搜索单词而是搜索子字符串，例如：

逗号分隔字符串 = "EWM,KI,KP" SOMEVALUE1 = "EW"

它返回 true 因为它包含在 EWM 中？

我需要的是在逗号分隔的字符串中查找单词（不包含子字符串）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:58:42.973

**选项 1：正则表达式**

```
Regex.IsMatch(commaseparatedstring, @"\b" + Regex.Escape(a.SOMEVALUE1) + @"\b") 
```

这些`\b`部分称为“[单词边界](http://www.regular-expressions.info/wordboundaries.html)”，并告诉正则表达式引擎您正在寻找“完整单词”。确保正`Regex.Escape(...)`则表达式引擎不会尝试解释您尝试匹配的文本中的“特殊字符”。例如，如果您尝试匹配`"one+two"`，该`Regex.Escape`方法将返回`"one\+two"`。

此外，请务必在代码文件的顶部包含 System.Text.RegularExpressions。

有关详细信息，请参阅MSDN 上的[Regex.IsMatch Method (String, String)](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx)。

**选项 2：拆分字符串**

您也可以尝试拆分字符串，这会更简单一些，但效率可能较低。

```
commaseparatedstring.Split(new Char[] { ',' }).Contains( a.SOMEVALUE1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:59:23.473

怎么样：
- 用逗号分隔逗号分隔
字符串 - 在每个子字符串上调用 equals() 而不是在整个事物上调用 contains()？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:08:18.607

.SOMEVALUE2 = If(commaseparatedstring.Split(',').Contains(a.SOMEVALUE1), True, False)

# c# - 当文件存在时 File.Exists 返回 false

> ID：14504188
> 
> 赞同：1
> 
> 时间：2013-01-24T14:54:24.913
> 
> 标签：c#

```
 try
        {
            string directory = "C:\\Users\\Public\\Documents";
            string filename = "DBCS.config";
            string path = Path.Combine(directory, filename);

            if (File.Exists(filename))
            {
                MessageBox.Show("I exist");
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        } 
```

代码每次都会跳过消息框。

我检查了该文件是否确实存在。该文件是一个简单的文本文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T14:55:49.103

您应该使用变量`path`而不是`filename`

```
if (File.Exists(path))
{
    MessageBox.Show("I exist");
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T14:55:32.137

你要这个：

```
if (File.Exists(path))
{
    MessageBox.Show("I exist");
} 
```

您错误地使用了文件名而不是`Exists`.

# sql-server - 日期差异性能

> ID：14504189
> 
> 赞同：12
> 
> 时间：2013-01-24T14:54:34.430
> 
> 标签：sql-server, tsql, datediff

我有许多天变量，我想将其与日期时间列（发送日期）进行比较。

我目前正在这样做：

```
DECLARE @RunDate datetime = '2013-01-01' 
DECLARE @CalculationInterval int = 10

DELETE
FROM TableA
WHERE datediff(dd, senddate, @RunDate) > @CalculationInterval 
```

任何超过 10 天的内容都应该被删除。我们在 sendDate 列上有索引，但速度仍然慢得多。我知道出于性能原因，左侧不应该进行计算，但是解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T14:59:17.720

表达方式

```
WHERE datediff(dd, senddate, @RunDate) > @CalculationInterval 
```

由于列上的功能，将无法在`senddate`列 上使用索引`senddate`

为了使`WHERE`子句“SARGable”（即能够使用索引），更改为等效条件：

```
WHERE senddate < dateadd(dd, -@CalculationInterval, @RunDate) 
```

[感谢@Krystian Lieber，指出不正确的情况]。

# php - PHP Curl 获取服务器响应

> ID：14504191
> 
> 赞同：2
> 
> 时间：2013-01-24T14:54:36.837
> 
> 标签：php

> **可能重复：**
> [在 PHP 中测试 404 的 URL 的简单方法？](https://stackoverflow.com/questions/408405/easy-way-to-test-a-url-for-404-in-php)

我正在使用 curl 从 PHP 后端下载一系列 pdf。我不知道序列何时结束，如 1.pdf、2.pdf ......等。

以下是我用来下载 pdf 的代码：

```
$url  = 'http://<ip>.pdf';
    $path = "C:\\test.pdf";

    $fp = fopen($path, 'w');

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FILE, $fp);

    $data = curl_exec($ch);

    fclose($fp); 
```

但是我如何确定该 pdf 在后端不存在？找不到文件时 curl 是否返回任何响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:03:40.473

```
$ch=curl_init("www.example.org/example.pdf");
curl_setopt($ch,CURLOPT_HEADER,0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$result=curl_exec($ch);
curl_close($ch); 
```

`curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);`它将在成功时返回结果，在失败时返回 FALSE 。

`curl_setopt($ch,CURLOPT_RETURNTRANSFER,false);`它将在成功时返回 TRUE 或在失败时返回 FALSE 。

此外，对于`file not found`：

```
$http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
if($http_code == 404)
{
  /*file not found*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:00:13.923

只需在之后测试http响应的statut代码`$data = curl_exec($ch);`

```
$http_status = curl_getinfo($url, CURLINFO_HTTP_CODE);
if($http_status == '404') {

   //not found, -> file doesnt exist in your backend
} 
```

更多信息[在这里](http://frankkoehl.com/2009/09/http-status-code-curl-php/)

# javascript - What is the difference between $(document).height() and $(window).height()

> ID：14504195
> 
> 赞同：12
> 
> 时间：2013-01-24T14:55:18.270
> 
> 标签：javascript, jquery, scroll, window

(Hope it is not a duplicate because I didn't find it when searching and googling)

I am trying to find how to detect in some fixed-height div ('#div') when the scroll-bar is reaching the bottom of this latter div. Should I use `$(document).height()` and `$(window).height()` to detect this event ?

Edit : My div which is fixed-height and about which I set auto-scroll, so how to deal with that ? if I am suppose to use $('#div').height(), this height is fixed....

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T14:58:27.540

In the [`.height()`](http://api.jquery.com/height/) documentation:

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document 
```

In your case it sounds like you may want the height of the `document` rather than the `window`. Think of it this way: The `window` height is what you see, but the `document` height includes everything below or above.

**[EXAMPLE](http://jsfiddle.net/CCwYm/1/)**

**EDIT**:

Checking for top and bottom on scroll with help from the [`scrollTop()`](http://api.jquery.com/scrollTop/) method:

```
var bottom = $(document).height() - $(window).height();

$(document).scroll(function(){
    var position = $(this).scrollTop();
    if (position === bottom) {
        console.log("bottom");
    }else if(position === 0){
        console.log("top");   
    } else {
        console.log("scrolling");
    }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T14:57:32.020

The document height is the entire height of the whole document, even what is outside the viewable area. This could be thousands of pixels if you have a long page. The window height is just the viewable area.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-05T07:11:43.027

Difference between $(window).height() and $(document).height() function.

$(window).height() function:

Ideally $(window).height() returns the pixel less height of browser window. This is always the height of current browser window. If you resize browser this value should change.

$(document).height() function: $(document).height() returns an unit-less pixel value of the height of the document being rendered.

In HTML if you dont declare DOCTYPE then all time HTML page returns $(window).height() and $(document).height() same value.

```
<html>
    <head>
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.10.1.js'></script>

        <script type='text/javascript'>

        $(document).ready(function(){
            $('#winheight').text($(window).height());
            $('#docheight').text($(document).height());
        });

        </script>
    </head>
    <body>
        <div id="console">
            $(window).height() = <span id="winheight"></span> <br/>
            $(document).height() = <span id="docheight"></span>
        </div>
        <p>Lorem ipsum dolor sit amet</p>
    </body>
</html> 
```

Output :

```
$(window).height() = 750 
$(document).height() = 750
Lorem ipsum dolor sit amet 
```

After declare DOCTYPE its returns perfect value.

```
<!DOCTYPE HTML>
<html>
    write above code here
</html> 
```

Output :

```
$(window).height() = 750 
$(document).height() = 750
Lorem ipsum dolor sit amet 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:57:36.203

The height of the document is not necessarily the same as the height of the window. If you have a simple document with just a DIV and a little bit of text, the doc height will be miniscule compared to the height of the window.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T15:02:05.530

Here's the code from jQuery source:

```
if (jQuery.isWindow(elem)) {
    // As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
    // isn't a whole lot we can do. See pull request at this URL for discussion:
    // https://github.com/jquery/jquery/pull/764
    return elem.document.documentElement["client" + name];
}

// Get document width or height
if (elem.nodeType === 9) {
    doc = elem.documentElement;

    // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
    // unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
    return Math.max(
    elem.body["scroll" + name], doc["scroll" + name],
    elem.body["offset" + name], doc["offset" + name],
    doc["client" + name]);
} 
```

So for `$(window)` [`clientHeight`](https://developer.mozilla.org/en-US/docs/DOM/element.clientHeight) is used. Which, as @Drew correctly mentioned the height of visible screen area.

For `$(document)` the whole scroll height of the current page will be used.

# javascript - 提取部分标题标签

> ID：14504196
> 
> 赞同：1
> 
> 时间：2013-01-24T14:55:17.387
> 
> 标签：javascript

有谁知道如何使用 Javascript 提取部分标题标签？就像，将标题标签中的所有文本提取到一个短划线字符，而不是短划线字符之后的文本。

**例子**
`<title>Extract this text-But not text after the dash</title>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:58:02.597

尝试这个：

```
document.title.split('-')[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:58:20.893

```
var title = document.title;
var dashIdx = title.indexOf("-");
var part = title.substring(0, dashIdx); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:58:26.410

```
document.title.substring(0, document.title.indexOf('-')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T16:20:28.443

```
var dTt = document.title;
dTt.substring(0, dTt.indexOf('-')); 
```

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Methods](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Methods)

# sql - 重写查询以不同方式格式化 sql 结果

> ID：14504197
> 
> 赞同：0
> 
> 时间：2013-01-24T14:55:18.643
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有以下查询来获取一周中每一天可用的各种类型的产品数量。

```
select product_type, availDate, quantity 
from myTable 
where availDate between '2013-02-15' and '2013-02-21' 
order by product_type, availDate 
```

这给出了以下结果...

```
product_type  |  availDate  |  quantity
--------------|-------------|----------
type1         |  2013-02-15 |  2
type1         |  2013-02-17 |  1
type1         |  2013-02-18 |  1
type1         |  2013-02-21 |  3
type2         |  2013-02-15 |  1
type2         |  2013-02-16 |  2
type2         |  2013-02-17 |  1
type2         |  2013-02-18 |  2
type2         |  2013-02-19 |  1
type2         |  2013-02-20 |  1 
```

我实际上想如何显示它是这样的：

```
product_type  | 2013-02-15 | 2013-02-16 | 2013-02-17 | 2013-02-18 | 2013-02-19 | 2013-02-20 | 2013-02-21
--------------|------------|------------|------------|------------|------------|------------|-----------
type1         | 2          | -          | 1          | 1          | -          | -          | 3
type2         | 1          | 2          | 1          | 2          | 1          | 1          | - 
```

是否可以从查询中执行此操作，或者我是否需要通过其他方式操纵我的结果。？？

谢谢

编辑：

现在被告知这在 Oracle SQL 中是必需的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:32:31.963

您可以使用`PIVOT`查询，这个简单版本的缺点是您需要在查询中列出所有感兴趣的日期；

```
WITH cte AS (
  SELECT "product_type", "availDate", "quantity" 
  FROM myTable 
)
SELECT * FROM cte
PIVOT (SUM("quantity") AS Quantity for ("availDate") IN
       ('15-Feb-2013',
        '16-Feb-2013',
        '17-Feb-2013',
        '18-Feb-2013',
        '19-Feb-2013'))
ORDER BY "product_type" 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!4/df01a1/5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:07:11.087

如果它有任何帮助，我确实找到了这个...... [http://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

可能有用。

亲切的问候，韦斯蒂。

# qt - QProcess 和 shell：在进程仍在运行时被销毁

> ID：14504201
> 
> 赞同：7
> 
> 时间：2013-01-24T14:55:24.540
> 
> 标签：qt, shell, qt-creator, sh, qprocess

我想用 Qt 启动一个 shell 脚本。

```
QProcess process;
process.start(commandLine, QStringList() << confFile);
process.waitForFinished();

if(process.exitCode()!=0)
{
    qDebug () << " Error " << process.exitCode() << process.readAllStrandardError();
}
else
{
    qDebug () << " Ok " << process.readAllStrandardOutput() << process.readAllStrandardError();
} 
```

结果是：

> 好的：结果...." "" QProcess：在进程仍在运行时被销毁。

此消息并非每次都出现。

问题是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T16:08:01.697

`process.waitForFinished();`正在达到默认的 30 秒超时。改为使用`process.waitForFinished(-1);`。这将确保您等待该过程完成所需的时间，而不会出现任何超时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:09:10.583

请注意，您将 QProcess 创建到本地范围内。这意味着当您退出范围时，该对象将被删除。在析构函数中 QProcess 进程终止。当进程在析构函数中终止时，“进程仍在运行”的消息“已销毁”。

为了解决这个问题，你应该在进程已经终止时调用 QProcess 析构函数。

如果将 QProcess::waitForFinished(-1) 放入您的示例中，它将发生，但这会阻止您的应用程序。

# apache - 在某些主机可能不可用的情况下，如何正确配置 Apache Httpd 作为负载均衡器

> ID：14504207
> 
> 赞同：11
> 
> 时间：2013-01-24T14:55:40.003
> 
> 标签：apache, proxy, load-balancing

我在多个 Java Tomcat 实例前使用 Apache Httpd 实例作为代理。Apache 充当 Tomcat 实例的负载平衡器。

apache 配置基本上如下所示

```
<Proxy balancer://mycluster>
    BalancerMember ajp://host1:8280 route=jvmRoute-8280
    BalancerMember ajp://host2:8280 route=jvmRoute-8280
    BalancerMember ajp://host3:8280 route=jvmRoute-8280
</Proxy>
<VirtualHost *:80>
ProxyPass / balancer://mycluster/
ProxyPassReverse / balancer://mycluster/
</VirtualHost> 
```

当在 Tomcat 实例中配置 AJP 端口时，这基本上可以工作。请求被发送到其中一台主机，负载分布在 Tomcat 实例中。

但是，我看到每当其中一台主机不可用时，似乎在 Httpd 内部造成了很长的延迟，即 Apache 似乎不记得其中一台主机不可用，并且反复尝试将请求也发送到丢失的主机而不是将其发送到可用的主机之一，并在稍后的某个时间尝试失败的主机。

有没有办法配置 mod_proxy 等。从 Apache Httpd 支持这样的故障转移场景，即拥有多个主机并且在一个主机发生故障时不会造成巨大的延迟？最好 Apache 应该定期在后台检查哪些主机已经消失，而不是任何请求。

我确实发现[HAProxy](http://haproxy.1wt.eu/)似乎更适合这种事情，但出于一些不相关的原因，我更愿意坚持使用 Apache。

* * *

## 更新

与此同时，我发现我的部分问题是由客户端造成的，客户端使连接无休止地打开，因此没有更多的连接/线程可用。

因此，我将问题更改为：您将使用哪些配置选项来最大程度地减少此类事情的影响？即在这种情况下允许许多打开的连接还是快速关闭它们？否则这听起来像我当前配置的一个非常简单的 DOS 攻击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:43:48.097

客户端不会无休止地保持连接打开。检查您的 Apache server-tuning.conf 并查找 KeepAliveTimeout 设置。把它降低到合理的程度。

您对 connectiontimeout 和 retry 的更改确实是您必须做的。我会降低连接超时。10秒仍然是年龄。如果后端位于同一位置，为什么不以毫秒为单位进行设置？connectiontimeout=200ms 应该留出足够的时间来建立连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T23:53:21.430

我想我至少找到了一种解决方法或简单的解决方案。默认情况下，mod_proxy 似乎有很长的连接超时时间（300 秒）。如果不进行不同的设置，则需要很长时间才能检测到离线节点处于“错误”状态。

通过设置一个较短的连接超时并增加重试次数，我可以让它更好地为我工作：

```
BalancerMember ajp://host1:8280 route=jvmRoute-8280 connectiontimeout=10 retry=600 
```

这将确保相当快地检测到失败的连接，并且 Apache 不会过于频繁地重试以到达失败的服务器。不幸的是，Apache 似乎使用实际请求来检查余额成员，因此当它尝试到达先前进入错误状态的服务器时，有时单个请求可能会很慢。似乎没有心跳或看门狗功能。对于这样的事情，其他负载平衡解决方案带来了这样的功能，特别是[HAProxy](http://haproxy.1wt.eu/)

阅读[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)和[mod_proxy_balancer](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)了解更多详情。

此外，通过[mod_status的服务器状态和](http://httpd.apache.org/docs/2.2/mod/mod_status.html)[通过 mod_balancer 提供的页面的](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html#balancer_manager)平衡管理器对诊断这个有很大帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-03T11:38:49.867

好像忘记了**ping**标签*（其实叫 CPING - 100-Continue）*

像这样：

```
<Proxy "balancer://www">
    BalancerMember "http://192.168.0.100:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.101:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.102:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.103:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.104:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.105:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    BalancerMember "http://192.168.0.106:80" max=128 ttl=300 retry=60 connectiontimeout=5 timeout=300 ping=2
    SetEnv proxy-nokeepalive 1
</Proxy>
ProxyPass "/www/" "balancer://www/"
ProxyPassReverse "/www/" "balancer://www/" 
```

# delphi - OnStartDrag 未在控件上调用 (DragMode = dmManual)

> ID：14504209
> 
> 赞同：1
> 
> 时间：2013-01-24T14:55:41.303
> 
> 标签：delphi, drag-and-drop

使用：Delphi XE2 Update 4.1、32 位 VCL 应用程序、Windows 8

如果 DragMode 设置为 dmAutomatic，则调用 OnStartDrag 事件；但是，如果 DragMode 设置为 dmManual，则会绕过 OnStartDrag 事件。

这是设计使然吗？如何确保调用 OnStartDrag 事件？

编辑：应要求发布的代码。有问题的事件是 TTableDesigner.LblStartDrag 在调用 BeginDrag (in TTableDesigner.LblOnMouseDown) 之后没有被执行。

```
unit uTableDesigner;

interface

uses
  System.SysUtils, System.Classes, Vcl.Controls, Graphics, JvCaptionPanel,
  StdCtrls, ExtCtrls;

type
  TMyTable = record
    TableName: String;
    TableFields: TStrings;
    TableObject: Pointer;
  end;

  PMyTable = ^TMyTable;

  TTableDesigner = class(TCustomControl)

    procedure CreateWnd; override;
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;

    procedure LblOnMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure LblDragDrop(Sender, Source: TObject; X, Y: Integer);
    procedure LblDragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
    procedure LblEndDrag(Sender, Target: TObject; X, Y: Integer);
    procedure LblStartDrag(Sender: TObject; var DragObject: TDragObject);
    // procedure Paint; override;
  private
    { Private declarations }
    FTableList: TList;
    FCaptionPanelList: TList;
    FPanelSlot_Left: Integer;
    FPanelSlot_Top: Integer;
    FStartDragPnl: TJvCaptionPanel;
    FDragHoverPnl: TJvCaptionPanel;
    FEndDragPnl: TJvCaptionPanel;

    procedure HighlightPanelLabel(ALabel: TLabel);
  protected
    { Protected declarations }
  public
    { Public declarations }

    procedure AddTable(const ATableName: String; const AFields: TStrings);
    procedure DeleteTable(const ATableName: String);
    procedure DeleteAllTables;
  published
    { Published declarations }
    property Align;
    property Visible;
    property Color;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TTableDesigner]);
end;

constructor TTableDesigner.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);

  FTableList := TList.Create;
  FCaptionPanelList := TList.Create;

  FPanelSlot_Left := 40;
  FPanelSlot_Top := 40;
end;

destructor TTableDesigner.Destroy;
begin
  DeleteAllTables;
  FTableList.Free;
  FCaptionPanelList.Free;

  inherited;
end;

procedure TTableDesigner.CreateWnd;
begin
  inherited;
end;

procedure TTableDesigner.AddTable(const ATableName: String; const AFields: TStrings);
var
  pnl: TJvCaptionPanel;
  c, h, j: Integer;
  lbl: TLabel;
  MyTable: PMyTable;
begin

  pnl := TJvCaptionPanel.Create(Self);
  pnl.Parent := Self;
  pnl.Color := clWhite;
  pnl.Caption := ATableName;
  pnl.CaptionPosition := dpTop;
  pnl.Left := FPanelSlot_Left;
  pnl.Top := FPanelSlot_Top;

  // FPanelSlot_Left := FPanelSlot_Left + pnl.Width + 40;
  // if FPanelSlot_Left > ClientWidth - 100 then
  // begin
  // FPanelSlot_Left := 40;
  //
  // j := 0;
  // for c := 0 to FTableList.Count - 1 do
  // if j < TJvCaptionPanel(TMyTable(FTableList.Items[c]^).TableObject).Height then
  // j := TJvCaptionPanel(TMyTable(FTableList.Items[c]^).TableObject).Height;
  //
  // FPanelSlot_Top := FPanelSlot_Top + j + 40;
  // end;

  h := 0;
  for c := 0 to AFields.Count - 1 do
  begin
    lbl := TLabel.Create(pnl);
    lbl.Parent := pnl;
    lbl.Align := alTop;
    lbl.Caption := AFields[c];
    lbl.Transparent := False;
    lbl.ParentColor := False;
    lbl.DragKind := dkDrag;
    lbl.OnMouseDown := LblOnMouseDown;
    lbl.OnDragDrop := LblDragDrop;
    lbl.OnDragOver := LblDragOver;
    lbl.OnEndDrag := LblEndDrag;
    lbl.OnStartDrag := LblStartDrag;
    // lbl.DragMode := dmAutomatic;

    h := h + lbl.Height + 4;
  end;
  pnl.ClientHeight := pnl.CaptionHeight + h;

  MyTable := AllocMem(SizeOf(TMyTable));
  Initialize(MyTable^);
  MyTable.TableName := ATableName;
  MyTable.TableFields := TStringList.Create;
  MyTable.TableFields.Assign(AFields);
  MyTable.TableObject := pnl;
  FTableList.Add(MyTable);

end;

procedure TTableDesigner.DeleteTable(const ATableName: String);
var
  c: Integer;
begin
  for c := 0 to FTableList.Count - 1 do
    if TMyTable(FTableList.Items[c]^).TableName = ATableName then
    begin

      TJvCaptionPanel(TMyTable(FTableList.Items[c]^).TableObject).Free;

      TMyTable(FTableList.Items[c]^).TableFields.Free;
      Finalize(TMyTable(FTableList.Items[c]^));
      FreeMem(FTableList.Items[c]);
      FTableList.Delete(c);
      Break;
    end;

end;

procedure TTableDesigner.DeleteAllTables;
var
  c: Integer;
begin
  for c := FTableList.Count - 1 downto 0 do
  begin

    TJvCaptionPanel(TMyTable(FTableList.Items[c]^).TableObject).Free;

    TMyTable(FTableList.Items[c]^).TableFields.Free;
    Finalize(TMyTable(FTableList.Items[c]^));
    FreeMem(FTableList.Items[c]);
    FTableList.Delete(c);
  end;

end;

procedure TTableDesigner.HighlightPanelLabel(ALabel: TLabel);
var
  pnl: TJvCaptionPanel;
  c: Integer;
begin
  pnl := TJvCaptionPanel(ALabel.Parent);
  for c := 0 to pnl.ControlCount - 1 do
    if pnl.Controls[c] = ALabel then
      TLabel(pnl.Controls[c]).Color := clHighlight
    else
      TLabel(pnl.Controls[c]).Color := pnl.Color;
end;

procedure TTableDesigner.LblOnMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  HighlightPanelLabel(TLabel(Sender));
  BeginDrag(False, 4);
end;

procedure TTableDesigner.LblDragDrop(Sender, Source: TObject; X, Y: Integer);
begin
  FEndDragPnl := TJvCaptionPanel(TLabel(Sender).Parent);

  FEndDragPnl.Color := clWhite;
end;

procedure TTableDesigner.LblDragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
begin
  FDragHoverPnl := TJvCaptionPanel(TLabel(Sender).Parent);

  FDragHoverPnl.Color := clGreen;

  Accept := True;
end;

procedure TTableDesigner.LblEndDrag(Sender, Target: TObject; X, Y: Integer);
begin
  TJvCaptionPanel(TLabel(Sender).Parent).Color := clPurple;

end;

procedure TTableDesigner.LblStartDrag(Sender: TObject; var DragObject: TDragObject);
begin
  FStartDragPnl := TJvCaptionPanel(TLabel(Sender).Parent);

  FStartDragPnl.Color := clRed;
end;

// procedure TTableDesigner.Paint;
// var
// c: Integer;
// begin
// inherited;
//
// // Canvas.Pen.Mode := pmBlack;
// // Canvas.Pen.Color := clBlack;
// // Canvas.Pen.Style := psSolid;
// // Canvas.Pen.Width := 1;
// // Canvas.MoveTo(50, 50);
// // Canvas.LineTo(500, 500);
//
// end;

end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:32:41.423

如果您不限定方法“Self”，则您处于“TTableDesigner”方法中。因此，“BeginDrag”调用适用于 TableDesigner 对象。

你宁愿调用'TLabel(Sender).BeginDrag(..'。

# c# - 将用户名传递给表单，但用户名返回 null c#

> ID：14504210
> 
> 赞同：1
> 
> 时间：2013-01-24T14:55:43.347
> 
> 标签：c#, winforms

此代码用于返回登录表单中文本框的值。

```
public partial class Login : Form
{
    public string returnUsername()
    {
        string username = textBox1.Text;
        return username;
    }
} 
```

此代码用于显示 ChangePass 表单。

```
public partial class Mainmenu_Employee : Form
{
    private void changePasswd_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        this.Hide();
        Login login = new Login();
        ChangePass passwd = new ChangePass(login);
        passwd.Show();
    }
} 
```

此代码是从登录表单中获取用户名，以便我可以更改用户名的密码。

```
 public partial class ChangePass : Form
    {
       Login login = null; //parent form
       Mainmenu_Employee main = new Mainmenu_Employee();

       public ChangePass(Login login1)
       {
           InitializeComponent();
           login = login1;
       }

       private void buttonChangePass_Click(object sender, EventArgs e)
       {

           Model_DB_Employee emp = new Model_DB_Employee();
           //Login login = new Login();
           string username = login.returnUsername();

           if (textBoxNewPass.Text == string.Empty || textBoxConfirmPass.Text == string.Empty)
           {
               MessageBox.Show("Field cannot be empty!");
           }
           else
           {
               if (textBoxNewPass.Text == textBoxConfirmPass.Text)
               {

                   try
                   {

                       emp.changePasswd(username,textBoxConfirmPass.Text);
                       MessageBox.Show(username);
                       MessageBox.Show("Password updated!");
                       this.Hide();
                       main.Show();
                   }
                   catch(SystemException ex)
                   {
                       MessageBox.Show("Password not updated" + ex);
                   }

               }
               else
               {
                   MessageBox.Show("Passwords do not match!");
               }
           }
       } 
```

修改密码功能：

```
 public void changePasswd(string username, string newpass) //change password
    {
        Model_Employee emp = new Model_Employee();

        //Hasher hash = new Hasher(); //call hasher class for hashing
        //string hashed;
        //string salt = emp.generateSalt(); //generate random salt
        //newpass = newpass + salt; //append salt to newpass
        //hashed = hash.encryption(newpass); //hash newpass

        for (int i = 0; i < rows.Count; ++i)
        {

            if ((string)empTab.Rows[i]["username"] == username)//check if ID matches
            {
                empTab.Rows[i]["passwd"] = newpass;  //set passwd to hash new password                

                //check if dataset has changes
                if (dataset.HasChanges())
                {
                    //update database
                    dbAdapter.Update(dataset, "employee");
                    MessageBox.Show("Employee Updated!");
                    refreshTable();

                }
                else
                {
                    refreshTable();
                }
            }
        }

    } 
```

我正在尝试在用户登录时更改他的密码。

1.  当他登录时，我想通过文本框捕获他的用户名。

2.  他登录后，将显示一个主菜单。

3.  用户需要单击更改密码链接，将出现更改密码表格。

因此，我需要将登录表单中的用户名传递给更改密码表单才能使用更改密码功能。但是，我现在面临的问题是用户名没有从登录表单传递到更改密码表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:59:41.693

问题是这条线：

```
Login login = new Login(); 
```

这是用一个作为局部变量的新实例来隐藏`login`实例字段`Login`，因此不是访问`Login`用户之前与之交互的创建的，而是访问一个空白的。您可以删除上面的代码行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:01:13.657

问题是你正在`Login login = new Login()`隐藏你的类实例变量`login`。尝试：

```
private void buttonChangePass_Click(object sender, EventArgs e)
{
   Model_DB_Employee emp = new Model_DB_Employee();
   string username = login.returnUsername();

   if (textBoxNewPass.Text == string.Empty || textBoxConfirmPass.Text == string.Empty)
   {
       MessageBox.Show("Field cannot be empty!");
   }
   else
   {
       if (textBoxNewPass.Text == textBoxConfirmPass.Text)
       {
           try
           {
               emp.changePasswd(username,textBoxConfirmPass.Text);
               MessageBox.Show(username);
               MessageBox.Show("Password updated!");
               this.Hide();
               main.Show();
           }
           catch(SystemException ex)
           {
               MessageBox.Show("Password not updated" + ex);
           }
       }
       else
       {
           MessageBox.Show("Passwords do not match!");
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:01:47.837

什么时候，在这两行之间，`username`新`login`设置的？

```
Login login = new Login();
string username = login.returnUsername(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:02:57.373

您从不显示登录表单，您如何假设有人使用实际用户名设置 textBox1？

你需要这样的东西

```
 string username = string.Empty;
       Model_DB_Employee emp = new Model_DB_Employee();
       using(Login login = new Login())
       {      
             if(DialogResult.OK == login.ShowDialog())
              username = login.returnUsername();
       } 
       if(username == string.Empty)
       {
            MessageBox.Show("Username required");
            return;
       } 
```

# xcode4.5 - 如何在 xcode 中合并两个项目？

> ID：14504214
> 
> 赞同：0
> 
> 时间：2013-01-24T14:55:52.240
> 
> 标签：xcode4.5

我在 xcode 中有两个项目：第一个包含从 web 获取 JSON 的框架（我正在使用 ASIHTTPRequest + SBJSON。我花了很多时间让它工作，因为我是一个菜鸟）。第二个是自定义 tableview GUI，我将使用它来表示来自第一个项目的 JSON 数据。

有什么简单的方法可以将这两个项目结合起来吗？我不敢相信我必须花时间将所有 JSON+ASIHTTPRequest 框架添加和设置到第二个项目中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:24:21.383

我必须说，xcode 允许将类从一个项目复制到另一个项目，只需在项目导航器中拖动它们即可。似乎这是组合多个项目的功能的唯一方法。对我来说很容易。

也可以将所有框架从一个项目复制到另一个项目（同样通过拖放）。

我的问题解决了！

# php - 获取变量 jQuery -> PHP（不工作）

> ID：14504220
> 
> 赞同：0
> 
> 时间：2013-01-24T14:56:08.007
> 
> 标签：php, jquery, variables

我在将变量从 jQuery 传递到 PHP 时遇到问题。我在互联网上搜索解决方案，然后我来到了 AJAX。以前从未使用过 Ajax，所以我猜这个问题是已知的。

所以我在“index.php”中有以下代码

```
$("#inviteForm").submit(function(e) {

e.preventDefault();
var emailVal = $("#email").val();

$.ajax({
 type: "POST",
 url: "processAjax.php",
 data: {email: emailVal},
 success: function(data) {
    alert(data);  
}
});
}); 
```

在表单中，我有一个输入框（用于电子邮件）和一个提交按钮（方法是 POST）。

在 processAjax.php 我有以下代码

```
<?php
    $x = $_POST['email'];
    return $x;
?> 
```

所以如果我是正确的，如果 $.ajax 函数没问题，应该会弹出警告框。但事实并非如此。我也尝试过警报（x）；但它没有用。

知道我做错了什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T14:57:55.687

尝试`echo $x;`代替`return $x;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:59:05.660

试试这个：

```
<?php
    $x = $_POST['email'];
    echo $x;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:59:16.693

试试这个以获得更好的数据操作。使用服务器端的 json_encode 和 json 数据类型到您的 ajax 调用。然后提醒服务器响应，只需提醒数组的键，如 alert(data.value)：

```
$.ajax({
 type: "POST",
 url: "processAjax.php",
 data: {email: emailVal},
 dataType: 'json'
 success: function(data) {
    alert(data.value);  
} 
```

处理Ajax.php

```
$result['value'] = $_POST['email'];
echo json_encode($result); 
```

# c# - 为 WinForms DataGridView 行设置背景颜色的最快方法

> ID：14504221
> 
> 赞同：2
> 
> 时间：2013-01-24T14:56:08.643
> 
> 标签：c#, winforms, data-binding, datagridview

我有一个绑定到 BindingSource 的 WinForms DataGridView，而后者又绑定到 100,000 个对象的 BindingList。

```
BindingList<MyObject> myObjectList = new BindingList<MyObject>();
BindingSource bindingSourceForMyObjects = new BindingSource();

bindingSourceForMyObjects.DataSource = myObjectList;
dataGridViewMyObjects.DataSource = bindingSourceForMyObjects; 
```

我有一个事件处理程序连接到我的 DataGridView 的 CellValueChanged 事件，其中包含以下代码：

```
dataGridViewMyObjects.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Red;
dataGridViewMyObjects.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.White; 
```

因此，当我的用户更改一行时，此事件处理程序会触发并将该行更改为红底白字，以指示数据已更改。这很好用，但在某些情况下，我需要以编程方式更改基础列表，并且我希望这些更改也反映在 DataGridView 中。为此，我的对象类实现了 INotifyPropertyChanged，并且我有一个连接到我的 BindingSource 的 ListChanged 事件的事件处理程序。该事件处理程序中的代码如下所示：

```
if (e.ListChangedType == ListChangedType.ItemChanged)
{
    dataGridViewMyObjects.Rows[e.NewIndex].DefaultCellStyle.BackColor = Color.Red;
    dataGridViewMyObjects.Rows[e.NewIndex].DefaultCellStyle.ForeColor = Color.White;
} 
```

这也有效，因此如果我以编程方式修改 50 个对象，DataGridView 行也会更新。但是，正如我之前所说，我正在处理 100,000 个对象，如果我需要修改超过 800 个对象，则可能需要一段时间，因为我的对象中对 OnPropertyChanged() 的所有调用。在绝对最坏的情况下，如果我需要修改所有 100,000 个对象，这可能需要将近 1 分钟才能发生。

在我的对象类中，我有一个布尔变量，当我以编程方式执行“批量”更新（> 800 个对象）时，我使用它来避免触发 OnPropertyChanged() 调用。这使得更新对象属性非常快，但 DataGridView 中的相应行不再更新它们的前景色/背景色值，因为双向绑定被绕过。我知道哪些行对应于已修改的对象，并且我尝试遍历它们并更新 ForeColor/BackColor 值，但同样，此操作需要将近一分钟才能完成。

我试过把那个循环包装在......

```
dataGridViewMyObjects.SuspendLayout();
// loop here
dataGridViewMyObjects.ResumeLayout(); 
```

但这似乎并没有对性能产生影响。是否有更快的方法来为大量行设置 ForeColor/BackColor 或者我看到的速度仅仅是我正在使用的数据大小的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:10:24.753

要尝试的一件事是告诉 Windows 在循环更改更改时停止绘制控件。从[如何暂停控件及其子控件的绘制？](https://stackoverflow.com/a/487757/719186)

```
class DrawingControl
{
    [DllImport("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd, Int32 wMsg, bool wParam, Int32 lParam);

    private const int WM_SETREDRAW = 11; 

    public static void SuspendDrawing( Control parent )
    {
        SendMessage(parent.Handle, WM_SETREDRAW, false, 0);
    }

    public static void ResumeDrawing( Control parent )
    {
        SendMessage(parent.Handle, WM_SETREDRAW, true, 0);
        parent.Refresh();
    }
} 
```

然后您的代码将如下所示：

```
DrawingControl.SuspendDrawing(dataGridViewMyObjects);
// loop here
DrawingControl.ResumeDrawing(dataGridViewMyObjects); 
```

# java - 找不到类错误Android

> ID：14504224
> 
> 赞同：0
> 
> 时间：2013-01-24T14:56:17.607
> 
> 标签：java, android, eclipse, class, ide

我已经尝试了我能想到的所有方法来尝试纠正这个错误，但没有任何效果。也许开始一个新项目会更容易。

如果您有合理且可行的解决方案，请提供帮助。有时我没有足够的时间来处理我的项目，因为我也有一个家庭要照顾。

这是logcat的输出

```
01-24 14:48:56.831: E/AndroidRuntime(221): Uncaught handler: thread main exiting due to uncaught exception
01-24 14:48:56.891: E/AndroidRuntime(221): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.brndev.gummypopcomplete/com.brndev.gummypopcomplete.GummyPopRunActivity}: java.lang.ClassNotFoundException: com.brndev.gummypopcomplete.GummyPopRunActivity in loader dalvik.system.PathClassLoader@45c77a18
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.os.Looper.loop(Looper.java:123)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread.main(ActivityThread.java:4363)
01-24 14:48:56.891: E/AndroidRuntime(221):  at java.lang.reflect.Method.invokeNative(Native Method)
01-24 14:48:56.891: E/AndroidRuntime(221):  at java.lang.reflect.Method.invoke(Method.java:521)
01-24 14:48:56.891: E/AndroidRuntime(221):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
01-24 14:48:56.891: E/AndroidRuntime(221):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
01-24 14:48:56.891: E/AndroidRuntime(221):  at dalvik.system.NativeStart.main(Native Method)
01-24 14:48:56.891: E/AndroidRuntime(221): Caused by: java.lang.ClassNotFoundException: com.brndev.gummypopcomplete.GummyPopRunActivity in loader dalvik.system.PathClassLoader@45c77a18
01-24 14:48:56.891: E/AndroidRuntime(221):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
01-24 14:48:56.891: E/AndroidRuntime(221):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
01-24 14:48:56.891: E/AndroidRuntime(221):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-24 14:48:56.891: E/AndroidRuntime(221):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
01-24 14:48:56.891: E/AndroidRuntime(221):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:30:20.717

我同意psykhi。确保您已`GummyPopRunActivity`在清单文件中声明您的。

# javascript - javascript XMLSerializer special characters in attribute

> ID：14504226
> 
> 赞同：3
> 
> 时间：2013-01-24T14:56:21.287
> 
> 标签：javascript, xml, xml-parsing, xml-serialization, escaping

I`ve come across a problem when serializing special characters like TAB, linefeed and carriage return as an attribute value.

According to this [http://www.w3.org/TR/1999/WD-xml-c14n-19991109.html#charescaping](http://www.w3.org/TR/1999/WD-xml-c14n-19991109.html#charescaping), these should be encoded as `&\#x9;`, `&\#xA;`, and `&\#xD;` respectively. But calling in chrome:

```
var root = new DOMParser().parseFromString('<root></root>', 'text/xml').documentElement;
root.setAttribute('a', 'first\nsecond');
var serialized = new XMLSerializer().serializeToString(root); 
```

Gives a string `< root a="first\nsecond"/>` with the linefeed not escaped.

When loading that again:

```
var loaded = new DOMParser().parseFromString(serialized, 'text/xml').documentElement;
loaded.getAttribute('a'); 
```

returns "first second" and the linefeed was lost to just a space. Has anyone faced this issue before? Any help would be appreciated.

Thanks,

Viktor

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:41:30.300

I ran into this problem, and solved it by writing a function *removeInvalidCharacters(xmlNode)* that removes invalid characters (from nodeValues) in the XML tree. You can use it before serializing to ensure you don't get invalid characters.

[You can find removeInvalidCharacters() in my stackoverflow question on the same topic](https://stackoverflow.com/questions/14665288/removing-invalid-characters-from-xml-before-serializing-it-with-xmlserializer)

You can use removeInvalidCharacters() like this:

```
var stringWithSTX = "Bad" + String.fromCharCode(2) + "News";
var xmlNode = $("<myelem/>").attr("badattr", stringWithSTX);

var serializer = new XMLSerializer();
var invalidXML = serializer.serializeToString(xmlNode);

// Now cleanse it:
removeInvalidCharacters(xmlNode);
var validXML = serializer.serializeToString(xmlNode); 
```

I've also filed an issue report against chrome, but its worth noting that IE9 has its own bugs in this department, so a fix w/o a workaround is probably a long time coming.

# php - 从 iOS 通过 POST PHP 上传文件

> ID：14504230
> 
> 赞同：0
> 
> 时间：2013-01-24T14:56:30.110
> 
> 标签：php, ios, post, file-upload, ftp

您好，我想向您展示我在做什么，因为我的 PHP 或我的 iOS 没有将文件发送到 FTP 服务器：S

iOS端：

```
NSArray *dirPaths;
NSString *docsDir;
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = dirPaths[0];
NSString *nombreArchivo = @"wtthdb.db";

NSData *archivo = [NSData dataWithContentsOfFile:[[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:nombreArchivo]]];
NSLog(@"Tamaño del archivo %i",[archivo length]);

NSMutableString *post = [[NSMutableString alloc] initWithFormat:@"file=%@&filename=%@",archivo,nombreArchivo];
[post appendFormat:@"%@",archivo];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSURL *url = [NSURL URLWithString:@"http://zsoft.es/subidaios.php"];
NSMutableURLRequest *peticion = [NSMutableURLRequest requestWithURL:url];

NSURLConnection *con;
@try
{
    [peticion setHTTPMethod:@"POST"];
    [peticion setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [peticion setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [peticion setHTTPBody:postData];
    con = [NSURLConnection connectionWithRequest:peticion delegate:self];
    [con start];
}
@catch (NSException *e)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error del servidor"
                                                    message:[NSString stringWithFormat:@"Error: %@",e]
                                                   delegate:self
                                          cancelButtonTitle:@"Aceptar"
                                          otherButtonTitles:nil];
    [alert show];
}
NSLog(@"Empezado"); 
```

这是我的 PHP 方面：

```
 <?php
if (isset($_POST['name']) && isset($_POST['filename']))
{
    $name  = $_POST['name'];
    $filename  = $_POST['filename'];
    $ftp = ftp_connect("ftp.marinesignal.com");
    ftp_login($ftp, "user", "pass");
    ftp_pasv($ftp, true);
    ftp_put($ftp,$filename,$name,FTP_BINARY);
    ftp_close($ftp);
}
 ?> 
```

而且我不知道如何通过 XCode 调试我的 PHP 代码......

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:57:25.377

我建议您阅读这篇关于如何将 UIImage 上传到网络的好文章，以便您了解如何准备文件并将其发布到网络

[http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)

然后在你的 PHP 服务器端，你应该考虑文件是通过 $_FILES 全局变量传递的，所以你应该在这个问题上处理它们

```
<?php
$temporalFolder = "temporal/";

$filePath = $temporalFolder . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $temporalFolder)) {
    echo "The file has been uploaded";
} else{
    echo "There was an error uploading the file";
}

$name  = $_POST['name'];
$ftp = ftp_connect("ftp.marinesignal.com");
ftp_login($ftp, "user", "pass");
ftp_pasv($ftp, true);
ftp_put($ftp,$filePath,$name,FTP_BINARY);
ftp_close($ftp);

?> 
```

希望这可以让您对您的问题有所了解

# c# - Payload 文件 FileListAbsolute.txt 不存在编译错误

> ID：14504246
> 
> 赞同：0
> 
> 时间：2013-01-24T14:56:56.350
> 
> 标签：c#

尝试调试此错误。确切的错误是：

> 错误 15 有效负载文件 'C:\svn\myproj\obj\Debug\myproj.csproj.FileListAbsolute.txt' 不存在。

尝试在 VS2012 中构建我的解决方案时会发生这种情况。

我不知道这个文件是什么或做什么，但它肯定存在于解决方案中。它似乎是某种自动生成的文件。

对这个错误可能意味着什么或如何解决它有任何解释吗？

该文件包含它看起来的解决方案中每个文件的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:58:26.690

Odds 是 obj 文件夹中的一些不同步的东西，这是一个中间文件夹，Visual Studio 在其中存储东西，以便在后续运行中更快地构建。

我会按照这个顺序尝试的步骤。

*   清理项目
*   清洁您的解决方案。
*   删除 bin 和 obj 文件夹
*   重启VS
*   重启。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T05:08:04.363

我在文件中使用了notepad++的查找，问题是“Data\license.xml”，所以我通过双击notepad++的查找结果窗口中的line(pic)从csproj中删除了它。

![记事本++](../Images/ce79f5be6815c0d7d6060f3c279cc5f3.png)

# php - 取消设置数组中的项目破坏了遍历数据的逻辑

> ID：14504250
> 
> 赞同：1
> 
> 时间：2013-01-24T14:57:19.913
> 
> 标签：php, arrays, json, codeigniter

我的控制器中有以下逻辑：

```
public function showvlans()
{
    $vlans=$this->switches_model->show_known_vlans($this->uri->segment(5), $this->uri->segment(4));
    //filter out VLAN 1 if its included in the list. 
    $key = array_search('1', $vlans);
    unset($vlans[$key]);
    header ('Content-Type: application/json; charset=UTF-8');
    echo json_encode($vlans);  

} // end showvlans 
```

出于某种原因，在我从数组中过滤掉一条记录后，我循环遍历 json 数据的逻辑不再起作用。

以下是遍历 json 数据的逻辑：

```
alert(returnDataFromController.length);
//loop through results
for(i = 0; i < returnDataFromController.length; i++) {
    alert(returnDataFromController[i].VlanId);
    htmlstring = htmlstring +  "<tr><td><a href=>"+returnDataFromController[i].VlanId+"</a></td><td>"+ returnDataFromController[i].Name+"</td></tr>";                         
} 
```

**线索：**

警报显示“未定义”。
我还在从数组中删除记录之前和之后转储了数据，这是 json 数据的样子：

**删除记录之前：**

```
[09:36:52.986] [
    {VlanId:"1", Name:"VLAN1", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"3", Name:"VLAN3", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"8", Name:"VLAN8", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"16", Name:"VLAN16", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"20", Name:"VLAN20", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"33", Name:"VLAN33", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"64", Name:"VLAN64", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"65", Name:"VLAN65", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"66", Name:"VLAN66", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"80", Name:"VLAN80", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"96", Name:"VLAN96", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"101", Name:"VLAN101", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"128", Name:"VLAN128", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"131", Name:"VLAN131", Status:"Port-based", Voice:"No", Jumbo:"No"},
    {VlanId:"417", Name:"VLAN417", Status:"Port-based", Voice:"No", Jumbo:"No"}] 
```

**后：**

```
[09:34:41.797] (
    {1:{VlanId:"3", Name:"VLAN3", Status:"Port-based", Voice:"No", Jumbo:"No"},
     2:{VlanId:"8", Name:"VLAN8", Status:"Port-based", Voice:"No", Jumbo:"No"},
     3:{VlanId:"16", Name:"VLAN16", Status:"Port-based", Voice:"No", Jumbo:"No"},
     4:{VlanId:"20", Name:"VLAN20", Status:"Port-based", Voice:"No", Jumbo:"No"},
     5:{VlanId:"33", Name:"VLAN33", Status:"Port-based", Voice:"No", Jumbo:"No"},
     6:{VlanId:"64", Name:"VLAN64", Status:"Port-based", Voice:"No", Jumbo:"No"},
     7:{VlanId:"65", Name:"VLAN65", Status:"Port-based", Voice:"No", Jumbo:"No"},
     8:{VlanId:"66", Name:"VLAN66", Status:"Port-based", Voice:"No", Jumbo:"No"},
     9:{VlanId:"80", Name:"VLAN80", Status:"Port-based", Voice:"No", Jumbo:"No"},
     10:{VlanId:"96", Name:"VLAN96", Status:"Port-based", Voice:"No", Jumbo:"No"},
     11:{VlanId:"101", Name:"VLAN101", Status:"Port-based", Voice:"No", Jumbo:"No"},
     12:{VlanId:"128", Name:"VLAN128", Status:"Port-based", Voice:"No", Jumbo:"No"},
     13:{VlanId:"131", Name:"VLAN131", Status:"Port-based", Voice:"No", Jumbo:"No"},
     14:{VlanId:"417", Name:"VLAN417", Status:"Port-based", Voice:"No", Jumbo:"No"}}) 
```

如您所见，它看起来确实略有不同。在我使用 unset 之前我有一个开口`[`，而在我使用`(`. 我试图改变我的循环控制，以便变量`i`开始于`1`......但这也不起作用。

因此，例如，我尝试了以下操作：

```
for(i = 1; i < returnDataFromController.length; i++) { 
```

代替

```
for(i = 0; i < returnDataFromController.length; i++) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:59:42.887

假设您的数组以 5 个项目开始。当所有 5 项都存在时，数组键为：0、1、2、3、4

`json_encode`正确地将其检测为枚举数组，并将其转换为 JSON 数组。

但是，假设您删除了索引 2 处的项目。现在，您有：0、1、3、4。`json_encode`看到键的非连续编号，现在假设它是一个关联数组，因此您返回一个 JSON 对象键 0、1、3、4。JSON/Javascript 中的对象没有`length`，因此您的代码不再有效。

诀窍是`array_values`在将它传递给之前使用`json_encode`，如果你想将它枚举为一个数组。

或者，您可以将`for`JavaScript 中的循环更改为：

```
for (var i in returnDataFromController) {
    if (returnDataFromController.hasOwnProperty(i)) {
        /* your code here */
    }
} 
```

虽然强烈建议通过将其转换为数组`array_values`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:02:16.660

Javascript/JSON 区分*对象*和*数组*。对象是使用语法的键值对`{ }`，数组是使用`[ ]`.

使用`json_encode`PHP 数组时，只有具有*连续数字索引*的数组才会被编码为 JSON/Javascript*数组*，否则它们将成为*对象*。例如：

```
array('foo', 'bar', 'baz')    -> ["foo", "bar", "baz"]
array(0 => 'foo', 2 => 'bar') -> {"0":"foo", "2":"bar"} 
```

要确保您的数组具有连续的数字索引，请使用[`array_values`](http://php.net/array_values).

# ruby - 如何知道 FileUtils 命令是否成功？

> ID：14504251
> 
> 赞同：10
> 
> 时间：2013-01-24T14:57:22.630
> 
> 标签：ruby

我没有看到 FileUtils 命令的任何返回值。

我想做类似的事情：

```
really=(gets.chomp=="y")
if really
  success = FileUtils.rm_rf "./PROJECT_#{@name}" #does not work
end
puts "./PROJECT_#{@name} deleted" if success 
```

我阅读了FileUtils 的[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html)，还阅读了“[从 ruby​​ FileUtils 获取执行的命令](https://stackoverflow.com/questions/3163585/getting-executed-command-from-ruby-fileutils)”，但我不知道如何使用答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:09:44.860

根据文档（[http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-rm_rf](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-rm_rf)）调用#rm_rf不会回显与他们的任务相关的任何内容正在服用。#rm_rf 实际上使用选项 :force => true 调用 #rm_r。此选项使该方法可以忽略 StandardError 异常（然后它会向您传达有关操作或它为什么不工作的信息）。现在，回到它失败的原因。正如有人已经评论过的那样，尝试使用选项：secure => true。更多关于这里的信息：[http](http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-remove_entry_secure) ://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-remove_entry_secure 。这可能是权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:57:34.713

我认为您需要检查返回值：

```
irb(main):006:0> FileUtils.rm_rf 'test'
=> ["test"]
irb(main):007:0> 
```

并检查在目录不存在的情况下是否引发异常。

如果您需要返回值，也许您唯一的选择是在 ruby​​ 中运行命令，请查看[此博客文章](http://www.shanison.com/2010/09/01/ruby-capture-output-in-realtime/)。

# android - Android NDK 和 cygwin：路径不正确？

> ID：14504259
> 
> 赞同：1
> 
> 时间：2013-01-24T14:57:45.070
> 
> 标签：android, android-ndk, java-native-interface, cygwin

我的“.bashrc”中有以下内容

```
导出 ANDROID_SDK=/cygdrive/c/adt-bundle-windows-x86_64/sdk
导出 ANDROID_NDK=/cygdrive/c/android-ndk-r8d
导出 PATH=$PATH:$ANDROID_SDK/tools:$ANDROID_SDK/platform-tools:$ANDROID_NDK

```

当我构建项目时，它失败并出现以下错误。

```
Android NDK：没有本地设置...在发布模式下构建！
Android NDK: ERROR:/home/XXX/jni/Android.mk:gcc: LOCAL_SRC_FILES 指向丢失的文件
Android NDK：检查 //c:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/libgcc.a存在或它的路径是正确的
/cygdrive/c/android-ndk-r8d/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting 。停止。

```

使用外壳我可以看到

> **//c:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/libgcc.a** "

还找不到

> **/cygdrive/c/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/libgcc.a** _

可以被找寻到。所以问题是为什么 NDK 会像这样扩展驱动器/路径？（您可以看到它并不总是这样做，请参阅错误的最后一行）

有解决办法吗？

# html - symfony2 中的 Twig 模板：保持位置：固定多个块

> ID：14504262
> 
> 赞同：0
> 
> 时间：2013-01-24T14:57:47.567
> 
> 标签：html, css, symfony, twig

我的 symfony2 项目中有一个树枝模板，里面有 4 个块。

第一个块通常是一个巨大的项目列表，因此用户必须在页面上向下滚动才能查看所有内容。

问题是块 2、3 和 4 和小块涉及它们的高度。

所以，为了有一些“好”的东西，我必须有想法：

1.  使块 2、3 和 4 始终固定，这样当用户向下滚动时，页面将向下移动到块 1，但其他块的内容将始终在屏幕上。

    为此，我知道如何使用 CSS：

    ```
    position:fixed 
    ```

    但我不知道如何一次对所有 4 个块使用 position:fixed。我试图创建一个额外的父块，但它不起作用。

2.  固定块 1 的大小，仅在块 1 内滚动，而不是在整个页面上滚动。我怎样才能做到这一点？如果我用 CSS 设置：

    ```
    height: 100px 
    ```

    什么都没有发生。

非常感谢。

编辑：这是我目前尝试过的：

```
{% block global %}
    <div style="position:fixed ">
        {% block one %}
            ...
        {% endblock %}

        {% block two %}
            ...
        {% endblock %}
    </div>
{% endblock %} 
```

# c# - Lambda 表达式中的 KeyValuePair

> ID：14504264
> 
> 赞同：5
> 
> 时间：2013-01-24T14:57:57.933
> 
> 标签：c#, lambda, keyvaluepair

我正在尝试使用 lambda 表达式创建一个 KeyValue 对集合。

这是我的课程，下面是我的 lambda 代码。我未能创建 KeyValuePair。

> ****我想为喜剧电影****获取 ID 的 KeyValuePair、IsReleased 的集合。****我将那些 KeyValuePair 放在 HashSet 中以便快速搜索**。**

 **```
 public class Movie{
  public string Name{get;set;}
  public int Id{get;set;}
  public bool IsReleased{get;set;}
  //etc
 }

List<Movie> movieCollection=//getting from BL

var movieIdReleased= new 
HashSet<KeyValuePair<int,bool>>(movieCollection.Where(mov=> mov.Type== "comedy")
                                    .Select(new KeyValuePair<int,bool>(????)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:00:16.020

您应该将 lambda 传递给该`.Select`方法，而不仅仅是表达式：

```
.Select(movie => new KeyValuePair<int,bool>(movie.Id, movie.IsReleased)) 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:00:34.043

```
 //.Select(new KeyValuePair<int,bool>(????));
 .Select(movie => new KeyValuePair<int,bool>() 
              { Key = movie.Id, Value = movie.IsReleased} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:03:10.567

```
var comedyMovies = movieCollection
    .Where(mc => "comedy".Equals(mc.Type, StringComparison.OrdinalIgnoreCase))
    .Select(mc => new KeyValuePair<int, bool>(mc.Id, mc.IsReleased));
var distinctComedyMovies = new HashSet<KeyValuePair<int,bool>>(comedyMovies); 
```**

# python - igraph 到达边界框的最边缘

> ID：14504268
> 
> 赞同：2
> 
> 时间：2013-01-24T14:58:04.663
> 
> 标签：python, igraph

我正在浏览 python 中的 igraph 示例，并不断遇到这个问题。

![考茨，热心地剪裁](../Images/bc9e01df549733e886e76e832290dfab.png)

最外面的顶点部分位于边界框之外。这个[例子](http://igraph.sourceforge.net/screenshots2.html)几乎没有这个问题。

（另外，在我看来，它似乎为双向连接绘制了额外的线，而在示例中，它只是在每一侧放置一个箭头。如果这是一个简单的修复，请告诉我。）

我的代码是从示例页面复制的，如下所示。

```
g = Graph.Kautz(m=3, n=2)
adj = g.get_adjacency()
fig.add(g, layout="fr", vertex_label=None)
fig.add(adj, bbox=(360, 0, 480, 120), grid_width=0, opacity=0.7)
fig.show() 
```

我的安装细节在这里。

```
No configuration file, using defaults
igraph 0.6 running inside Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2 
```

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:54:29.787

弯曲边被引入 igraph 的图形抽屉的时间晚于文档中制作该图的时间，所以这就是为什么您没有在文档的图中看到弯曲边的原因。无论如何，弯曲的边缘很容易被禁用：

```
graph.es["curved"] = False 
```

或者

```
plot(graph, edge_curved=False) 
```

至于不适合边界框的边缘：该`plot()`函数（这是用于快速绘图的一次性函数）有一个`margin`关键字参数，它在图表周围放置一个白边；这本质上是通过将图形的边界框缩小给定数量的像素来完成的，以确保边缘保持在内部（大部分时间）。当您通过直接使用类来构建自己的情节时`plot`，您必须自己添加边距：

```
bbox = BoundingBox(600, 600)
figure = Plot(bbox=bbox)
bbox = bbox.contract(20)
figure.add(graph, bbox=bbox, layout=layout)
figure.show() 
```

内置`plot`函数和`Plot`类的另一个区别是该`plot`函数默认添加白色背景，而`Plot`使用透明背景。您可以使用构造函数的`background`关键字参数来覆盖它`Plot`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T03:51:49.050

经过一整天的文档搜索，我发现*了一个解决方案。*我现在使用的是

```
graph.layout().fit_into(bbox=(<size>, <size>)) 
```

并且，而不是使用 igraph.Plot() 和 plot.add(graph)，

```
igraph.plot(graph, bbox=(<size>, <size>)) 
```

此外，我用弯曲的边缘解决了我的问题。

```
graph.es["curved"] = 0 
```

谢谢所有看过这个的人，我希望我的经验对您有所帮助！

# regex - 正则表达式查找不是由服务器端代码编写的所有标签

> ID：14504270
> 
> 赞同：0
> 
> 时间：2013-01-24T14:58:10.960
> 
> 标签：regex, tags, server-side, detection

我一直在尝试创建这个正则表达式，但它让我发疯。我基本上需要的是一个正则表达式，它可以检测所有`<body>`不是通过我的服务器端代码编写的标签。我的计划是将所有这些`<body>`标签替换为`<body><%=CallToFunction()%>`.

（这是搜索和替换的一部分`UltraEdit`。）

例如：

```
<body>                                          //should be found
<body class="normal">                           //should be found
<body class="<% Response.Write("normal") %>"    //should be found
<html><body class="normal">                     //should be found

Response.Write("<body class=""normal"">")       //should not be found (a)
Response.Write(" <body>")                       //should not be found (b)
Response.Write("<html><body><h1>...")           //should not be found (c)

message = "<html><body>...</body></html>"       //should not be found (d)
Response.Write(message)

Response.Write("<html>
                <head></head>
                <body class=""normal"">
                    <h1>...</h1>")              //should not be found (e) 
```

我目前拥有的正则表达式是：`([^"]<body.*[^>]*>)`. 但问题是它仍然会找到在和`<body>`之间有空格的标签（参见示例）。它仍然会找到.`<body>``"``(a)``(c)`

因为`(e)`我真的一无所知。想知道这是否甚至可以检测到。

谁能帮我？

谢谢！

**编辑**

我现在有`^(?!Response|")(<body.*[^>]*>)`哪个效果很好。`<body>`但是当标签在文档中缩进时它不起作用。所以我需要一些东西，比如在 or 之外的任何东西（或`<body`什么都没有）前面。`Response``"`

**回答**

我最终使用的正则表达式基于迈克尔艾伦的回答，并且是：

`^(?!Response|")([\t ]*)(<body.*[^>]*>)`

它没有解决`(e)`，但我想我会为这些情况做一些手动工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:11:56.727

不确定您将如何处理最后一个示例，但以下正则表达式将与您提供的所有其他示例正确匹配。

```
^(?!Response).*<body.*> 
```

这里的技巧是使用 Negative lookahead 来剔除`Response`开头包含的任何匹配项。

希望这对你来说是一个开始。

# python - 用于 Python 的 SDFatLib？

> ID：14504278
> 
> 赞同：1
> 
> 时间：2013-01-24T14:58:36.303
> 
> 标签：python, sd-card, microcontroller, fat

**设想：**

我有一个 TTL-JPEG 相机、SD 卡座板和一个 Synapse RF 模块可以玩。尝试将这 3 个设备组合起来创建一个可以拍摄视频的无线摄像头，使用 SPI 将它们存储在 SD 卡上，然后根据需要通过与 Windows PC 的无线链接检索它们。我相信我正确连接了所有东西。

**问题：**

问题出在软件上。Synapse RF 模块使用 SNAPpy，它是 Python 的一个子集。而且我相信 SDFatLib 是用 C/C++ 编写的。所以语言有冲突。这是一个问题，因为 SDFatLib 拥有管理 SD 卡上文件的所有秘密。

**问题：**

我看到了几种不同的旅行方式。一种是尝试在 Python 中重新创建 SDFatLib；另一个是改变微控制器。第三种选择可能是在 SD 卡上创建我自己的简单文件系统，它只能存储视频（一系列图像）和图片（单个图像），而不是使用 FAT32。如果这些方法都不起作用，有人会建议什么？

# python - 在 SQLAlchemy 中查询混合属性

> ID：14504284
> 
> 赞同：10
> 
> 时间：2013-01-24T14:58:57.573
> 
> 标签：python, properties, sqlalchemy

我将文件路径作为相对路径存储在数据库中，但随后我使用混合属性在映射时将其转换为绝对路径。当我使用此属性进行查询时，它会引发错误。这是模型：

```
class File(Base):
    __tablename__ = 'files'
    ...

    _f_path = Column(Unicode(30))

    ...

    @hybrid_property
    def f_path(self):
        env = shelve.open('environment')
        return os.path.join(env['project_dir'], self._f_path)

    @f_path.setter
    def f_path(self, _f_path):
        self._f_path = _f_path 
```

当我运行此查询时（其中 ref 是一个 unicode 字符串）：

```
session.query(File).filter_by(f_path=ref).first() 
```

它给了我这个错误：

```
File "/Users/Ben/Dropbox/Giraffe/giraffe_server/giraffe/file_handlers/maya.py", line 135, in process_file
    rf = session.query(File).filter_by(f_path=str(ref)).first()
  File "build/bdist.macosx-10.7-intel/egg/sqlalchemy/orm/query.py", line 1211, in filter_by
    for key, value in kwargs.iteritems()]
  File "build/bdist.macosx-10.7-intel/egg/sqlalchemy/orm/util.py", line 597, in _entity_descriptor
    return getattr(entity, key)
  File "build/bdist.macosx-10.7-intel/egg/sqlalchemy/ext/hybrid.py", line 681, in __get__
    return self.expr(owner)
  File "/Users/Ben/Dropbox/Giraffe/giraffe_server/giraffe/model.py", line 133, in f_path
    print "\n\n\n[model.py:File@f_path hybrid_property] returning: ", os.path.join(env['project_dir'], self._f_path)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/posixpath.py", line 66, in join
    if b.startswith('/'):
  File "build/bdist.macosx-10.7-intel/egg/sqlalchemy/sql/expression.py", line 3426, in __nonzero__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T15:18:36.633

您的混合属性必须返回一个 sql 表达式；你的没有，它返回一个 python 字符串。

要解决这种情况，不要在 python 中进行路径连接，而是在 SQL 表达式中进行：

```
return env['project_dir'] + os.path.sep + self._f_path 
```

这将解析为`self._f_path.__radd__(result_of_project_dir_plus_os_path_sep)`，既可以在查询中使用，也可以作为返回值使用。

# android - Android片段活动布局在使用findViewById的多窗格布局中找不到视图

> ID：14504285
> 
> 赞同：0
> 
> 时间：2013-01-24T14:59:00.520
> 
> 标签：android, android-layout, android-fragmentactivity

`findViewById(R.id.team_detail_container)`找不到视图。我的问题是 xml 还是我构建 FragmentActivity 的方式？我该如何解决这个问题？

为了在片段活动的构造函数中支持片段的自定义列表，我已替换

`setContentView(R.layout.activity_team_list);`

和

```
frag=(TeamListFragment)getSupportFragmentManager().findFragmentById(android.R.id.content);
        if (frag==null) {
            frag=new TeamListFragment();
            getSupportFragmentManager().beginTransaction().add(android.R.id.content, frag).commit(); 
```

所以我的课现在看起来像这样

```
public class TeamListActivity extends SherlockFragmentActivity implements
        TeamListFragment.Callbacks {

    private boolean mTwoPane;
    private TeamListFragment frag=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        frag=(TeamListFragment)getSupportFragmentManager().findFragmentById(android.R.id.content);
        if (frag==null) {
            frag=new TeamListFragment();
            getSupportFragmentManager().beginTransaction().add(android.R.id.content, frag).commit();
        }
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        if (findViewById(R.id.team_detail_container) != null) {

            Log.i("@@@@", "Team Detail Container has been found! Yaay!");
            mTwoPane = true;
            ((TeamListFragment) getSupportFragmentManager().findFragmentById(
                    R.id.team_list)).setActivateOnItemClick(true);
        }   
    } 
```

尽管使用的`if (findViewById(R.id.team_detail_container) != null) {`xml 文件中存在 team_detail_container，但条件从未满足

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/team_list_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="16dp"
        android:layout_marginRight="16dp"
        android:orientation="horizontal"
        android:showDividers="middle"
        tools:context=".TeamListActivity" >

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/team_list"
                android:orientation="vertical"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:paddingLeft="8dp"
                android:paddingRight="8dp">

            <ListView
                android:id="@android:id/list"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false" />

            <TextView android:id="@id/android:empty"
                      android:layout_width="match_parent"
                      android:layout_height="match_parent"
                      android:text="No data"/>
         </LinearLayout>        
        <View
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="?android:attr/listDivider"
        /> 

        <FrameLayout
            android:id="@+id/team_detail_container"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="3" />

    </LinearLayout> 
```

我知道这个特定的布局 xml 正在被使用，因为我对 xml 文件所做的更改会反映在应用程序中。I also know that the condition is never met as I never get the log message `Log.i("@@@@", "Team Detail Container has been found! Yaay!");`and the behaviour get is that when an item is selected the list view is replaced with the detail fragments instead of the detail fragments being displayed next to the list view because the不满足项目选择的条件

```
@Override
public void onItemSelected(int id) {
    if (mTwoPane) {
                // mTwoPane is never set! Why?

        Bundle arguments = new Bundle();
        arguments.putInt(TeamDetailFragment.ARG_ITEM_ID, id);
        TeamDetailFragment fragment = new TeamDetailFragment();
        fragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.team_detail_container, fragment).commit();

    } else {
        // In single-pane mode, simply start the detail activity
        // for the selected item ID.
        Intent detailIntent = new Intent(this, TeamDetailSwipeActivity.class);
        detailIntent.putExtra(TeamDetailFragment.ARG_ITEM_ID, id);
        startActivity(detailIntent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:09:34.630

我认为问题在于您正在从 Activity 中寻找 Fragment ，但是由于您没有使用`setContentView`，因此 Activity 实际上没有要查看的 View 。尝试从 Fragment 获取视图，而不是使用该`getView()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:31:22.587

提交事务后，片段不会立即添加到您的布局树中。你必须等到`onViewCreated`片段被调用。您可能可以在`onStart`Activity 的 -Method 中访问视图，但最好将该逻辑保留在片段本身中。Activity 不应该关心片段中包含哪些视图。

# java - 无法使用由 java 类中的 groovy @Delegate 生成的方法

> ID：14504286
> 
> 赞同：0
> 
> 时间：2013-01-24T14:59:01.537
> 
> 标签：java, groovy, delegates, compiler-errors, intellij-idea

运行下面的代码时出现编译错误： java: ..\JavaClass.java:8: cannot find symbol symbol : method add(java.math.BigDecimal) location: class BigDecimalDelegated

似乎为 java 编译器创建的 groovy 类的存根不包含委托方法。

任何的想法？

考虑这个类：

```
class BigDecimalDelegated  //groovy class
{
    @Delegate BigDecimal delegated;
    String data;
}

import org.junit.Test;
import java.math.BigDecimal;
public class JavaClass  //java class
{
    @Test
    public void temp()throws Exception
    {
        new BigDecimalDelegated().add(BigDecimal.TEN);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:57:29.930

IDEA 的外部构建中使用的 Groovy 编译器不支持此功能，请参阅[https://issues.apache.org/jira/browse/GROOVY-4647](https://issues.apache.org/jira/browse/GROOVY-4647)

您可以仅使用 Groovy 代码中的 @Delegate 类，也可以在 Settings | 中关闭外部构建。编译器使用旧的构建机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:24:50.360

你是如何运行/编译代码的？

另外，我相信您需要在 BigDecimalDelegated 的构造函数中设置委托

```
class BigDecimalDelegated  //groovy class
{
    @Delegate BigDecimal delegated
    String data

    BigDecimalDelegated() {
      delegated = 0.0G
    }
} 
```

# c# - using 和 {} 大括号内的 C# 范围和值

> ID：14504293
> 
> 赞同：0
> 
> 时间：2013-01-24T14:59:06.673
> 
> 标签：c#

使用 Using 语句和 {} 范围修饰符时，如何获取它之外的值？这感觉就像过程代码中的匿名函数，但事实并非如此。

```
using (SqlConnection m_DBCon = new Something())
{
    int x = 1;
}

{
    int y = 3;
}

x; // not found
y; // not found 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T15:00:48.400

*在 using 块之前*声明你需要的变量，然后在里面赋值。

```
int x;

using (SqlConnection m_DBCon = new Something())
{
    x = 1;
}

// x == 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:00:48.557

你会使用：

```
int x, y;
using (SqlConnection m_DBCon = new Something())
{
    x = 1;
}

{
    y = 3;
}

// x = 1, y = 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:00:57.347

只需在 using 块之前声明变量，然后在内部访问它们。

```
int x;
int y;
using (SqlConnection m_DBCon = new Something())
{
    x = 1;
}

{
    y = 3;
}

x; 
y; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:04:29.610

只需更改变量的范围。（并且可能也初始化它们。）

```
int x = 0;
int y = 0;
using (SqlConnection m_DBCon = new Something())
{
    x = 1;
}
{
    y = 3;
} 
```

# java - 使用 luaj 将参数传递给 lua 函数

> ID：14504300
> 
> 赞同：5
> 
> 时间：2013-01-24T14:59:27.707
> 
> 标签：java, lua, luaj

我正在尝试使用 LuaJ 在 Java 程序中调用 lua 函数。当我没有将任何参数传递给闭包时，它工作正常：

```
String script = "print 'Hello World!'";
InputStream input = new ByteArrayInputStream(script.getBytes());
Prototype prototype = LuaC.compile(input, "script");
LuaValue globals = JsePlatform.standardGlobals();
LuaClosure closure = new LuaClosure(prototype, globals);
closure.call(); 
```

但是现在我正在尝试使用带有参数的顶级函数的 lua 脚本，但我只是不知道如何从 Java 中传递参数。这是我到目前为止得到的：

```
String script = "function something(argument)\n"+
                            "test_string = 'Hello World!'\n"+
                            "print(test_string)\n"+
                            "print(argument)\n"+
                "end";

InputStream input = new ByteArrayInputStream(script.getBytes());
Prototype prototype = LuaC.compile(input, "script");
LuaValue globals = JsePlatform.standardGlobals();
LuaClosure closure = new LuaClosure(prototype, globals);
closure.invokemethod("something", CoerceJavaToLua.coerce("Foo")); 
```

这会导致 invokemethod 行出现异常：

> org.luaj.vm2.LuaError: 尝试索引？（一个函数值）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T20:01:42.740

在 lua 中，顶级作用域是一个带有可变参数的匿名函数。这些可以使用 ... 在您的示例中，您不需要名为 something 的函数，块本身可以用作未命名的函数。

例如，luaj-3.0-beta1 中的这段代码

```
String script = "argument = ...\n"+
 "test_string = 'Hello World!'\n"+
 "print(test_string)\n"+
 "print(argument)\n";

Globals globals = JsePlatform.standardGlobals();
LuaValue chunk = globals.loadString(script, "myscript");
chunk.call( LuaValue.valueOf("some-arg-value") ); 
```

为我产生了这个结果：

```
Hello World!
some-arg-value 
```

您可以通过这种方式传入任意数量的参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T15:35:55.223

既然你收到

> org.luaj.vm2.LuaError: 尝试索引？（一个函数值）

作为您的错误；这意味着您的函数根本没有被创建。

尝试不使用`\n`并在变量中给出空格`script`。像这样：

```
String script = "function something(argument) " + 
        " test_string = 'Hello World!'; " + 
        " print( test_string ); " + 
        " print( argument ); " + 
        " end"; 
```

# javascript - 页面加载后添加的类字段的日期选择器初始化

> ID：14504301
> 
> 赞同：1
> 
> 时间：2013-01-24T14:59:29.617
> 
> 标签：javascript, jquery, twitter-bootstrap

我的字段可以在页面加载后添加多个额外字段（想想工作简历上的教育和工作经验字段）。我正在使用[这个](https://github.com/eternicode/bootstrap-datepicker)。

我可以在第一个字段上添加日期选择器，但随后添加的字段不会访问日期选择器，尽管是原始的克隆/基本副本。我猜日期选择器仅在页面加载时初始化或仅对页面上的一个类进行初始化。

所以在一个页面上我初始化了日期选择器：

```
$('.input-append.date').datepicker(); 
```

用于此类封装的表单代码块。初始页面加载正常；如果出现错误并且页面重新加载先前输入的多个字段（对于所有返回任何错误的字段都有一个日期选择器），也可以。但是，使用另一个向表单添加新字段的 js 函数，其他新字段无法访问日期选择器。我现在不知道该怎么做，也许有更多经验/智慧的人可以给我一个提示。

编辑：

很简单：我只是添加了：

```
 $('.input-append.date').datepicker(); 
```

到调用新字段的代码。至于最优解我不知道，有js专业的都可以评论一下，我扩大搜索词后发现这里还有很多类似的问题。然而，我现在正在做的事情对我来说已经足够好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T14:01:04.777

对于动态添加的元素，请使用 data-provide="datepicker" 属性。它将被延迟初始化。例如，如果输入字段出现在 ajax 响应中并加载到容器 div 中。所以在这种情况下：

```
<input type="text" data-provide="datepicker" /> 
```

所以当你将这个ajax响应加载到cotainer div中时

```
$('#container-div').html(ajax_response); 
```

这会奏效。

同样，如果您通过 jquery 创建一个元素并将其附加到某个容器（**我认为这发生在您的情况下**），例如，您有一个创建文本框并将其附加到某个容器 div 的函数，并且该函数被称为在某些元素的单击事件上，假设它是按钮。同样 data-provide 属性是解决这个问题的方法。例如

```
function createTextBox(){
    var t = $('<input>').attr('data-provide','datepicker');
    $('#container-div').append(t);
} 
```

并且在某些按钮的单击事件上调用此函数，如下所示：

```
$(document).ready(function(){
      $('#someBtn).click(createTextBox);
}); 
```

简而言之，无论该动态元素是**作为字符串出现在 ajax 响应中还是通过 jquery 创建**，只需使用**data-provide**属性来设置引导日期选择器。因为在这种情况下 datepicker 以 Bootstrap 方式延迟初始化。

# javascript - 古吉拉特语未显示

> ID：14504304
> 
> 赞同：2
> 
> 时间：2013-01-24T14:59:37.247
> 
> 标签：javascript, blogger

我为古吉拉特语测验创建博客博客我在我的博客中使用 JS 作为按钮[http://quizgujarat.blogspot.in](http://quizgujarat.blogspot.in) 我在 blogspot (blogger) 帖子中使用 javascript 当我单击不是单选按钮古吉拉特语时请不要在警报消息中显示帮助

我使用这个脚本 [代码](http://shrib.com/QkhnVlRg)

```
<input  type="button" style="margin-left: 0px"  style="border:none" style="color:#999999" style="background-color: #fff0e0" value=" ક્લિક કરો " onclick=javascript:msg1001() /><script language="JavaScript">function msg1001(){alert("(A) વિકલ્પ Assam");}</script></td></tr><td valign="top" width="5%"><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:07:48.030

好吧，它适用于我刚刚创建的 Fiddle。虽然它有效，但这并不意味着你应该使用它。

一些建议，超出了问题的范围。

1.  不要使用内联点击处理程序。考虑使用不显眼的 javascript。
2.  不要使用内联样式，使用 css。
3.  将该 javscript onclick 处理程序用引号括起来。
4.  将该脚本标记移动到页面的标题。因为脚本标签位于调用代码下方，所以您可能有一个部分呈现的页面，并且单击按钮时“msg1001”可能还不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T16:21:01.997

要在任何网站上显示古吉拉特语字体，只有一个要求

```
<head>
     <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
</head> 
```

并且页面应该以 utf-8 编码存储。

**注意**：一旦您指定了此元标记，则需要删除其他规范，例如，如果您使用的是 jsp 页面，则

```
 <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

这个声明应该被删除或者应该是正确的。检查你的 html 页面，这种歧义会阻止 Gujarati 字体显示。

# signalr - 如何在 Signal R 中实现 FormAuthentication

> ID：14504310
> 
> 赞同：0
> 
> 时间：2013-01-24T14:59:49.627
> 
> 标签：signalr, signalr-hub, signalr.client

我在我的 mvc 3 应用程序中使用 Signal R。当我尝试从客户端连接时，它会失败。

```
$.connection.hub.start(function () {
            alert('connected');
        }).fail(function () { alert('failed'); }).done(function () {
            msgserver.unreadMessagesCount("SignalR", int);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:04:23.253

您没有在 SignalR 中实现 FormsAuth。在 MVC 应用程序中实现 FormsAuth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T23:20:57.850

[Tugberk 的这篇博客文章](http://www.tugberkugurlu.com/archive/mapping-asp-net-signalr-connections-to-real-application-users)有一个使用 SignalR 进行身份验证的完整工作示例，以及有关如何将连接映射到应用程序用户的提示。尝试使用附加的代码作为实现的基础。

# jquery - 在 Google Chrome 中使用 jquery 延迟加载时，请求了两次动态生成的图像

> ID：14504313
> 
> 赞同：7
> 
> 时间：2013-01-24T15:00:00.140
> 
> 标签：jquery, google-chrome, caching, filehandler, jquery-lazyload

我有一个生成图像的 ashx 文件处理程序。

```
<img src="www.mywebsite.com/action/getimage.ashx?imageID=f8be4bf6&width=100&height=700&bgcolor=999" /> 
```

这一切都很好。

现在，我想使用延迟加载。使用这个[jquery 延迟加载插件](http://www.appelsiini.net/projects/lazyload)

所以我像这样调整了我的html图像：

```
<img src="imageplaceholder.gif" original-data="www.mywebsite.com/action/getimage.ashx?imageID=f8be4bf6&width=100&height=700&bgcolor=999" /> 
```

并添加了以下脚本：

```
$(function() {
   $("img").lazyload();
}); 
```

我注意到在谷歌浏览器开发工具的网络选项卡中，对该文件处理程序进行了两次调用。

我在这里创建了一个测试小提琴：[链接](http://jsfiddle.net/3VwRq/4/) 如果你在这个小提琴上向下滚动，当图像加载到谷歌浏览器中时，你会看到两个图像请求。在 Firefox 和 IE 中，这仅适用于一次调用。

有什么办法可以避免这种行为？

更新：

在文件处理程序中设置了以下标头：

```
[0] "Server"    "Microsoft-IIS/7.5"
[1] "Set-Cookie"    "lang=nl; expires=Tue, 04-Feb-2014 13:08:56 GMT; path=/" 
```

Response 对象的 Expires 属性为：

```
context.Response.Expires = 0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T10:33:12.313

我认为根本问题是 Chrome 没有缓存图像。在这个[演示](http://jsfiddle.net/jefferyto/XWnG5/)中，Chrome 会在你每次点击按钮时发出一个新的请求。

延迟加载脚本会触发 2 个请求，因为它首先（预）将图像加载到私有`img`元素中，然后将图像 URL 分配给原始`img`元素。

我建议在图像处理程序的响应中添加一个`Expires`or`Cache-Control`标头和一个`Last-Modified`or`ETag`标头，以便 Chrome 缓存图像。（有关缓存的更多信息，请参阅[Web 作者和网站管理员的缓存教程](http://www.mnot.net/cache_docs/)。）

* * *

**更新：**我建议在您的图像处理程序中添加这样的内容（来自[MSDN](http://msdn.microsoft.com/en-us/library/y18he7cw%28v=vs.100%29.aspx)）：

```
Response.Cache.SetExpires(DateTime.Now.AddSeconds(60));
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.Cache.SetValidUntilExpires(true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-31T12:49:41.853

发生此类情况时，请确保您没有打开 Chrome DevTools 并勾选“禁用缓存”复选框。如果任何插件、设置或其他任何东西导致缓存被禁用，同样的事情可能会发生。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T23:04:04.387

Google Chrome 的处理方式似乎`$("img").attr("src", "")`与其他浏览器不同。

[在 GitHub 上](https://github.com/tuupola/jquery_lazyload/blob/master/jquery.lazyload.js)查看插件的源代码，并在 Chrome 中添加断点（逐步进行），对图像处理程序的调用发生在它将`src`图像的属性修改为`original-data`.

虽然图像处理程序可能是问题（正如我之前评论过的），但我发现的解决方案是[`line 115`将插件的源代码](https://github.com/tuupola/jquery_lazyload/blob/master/jquery.lazyload.js#L115)从

```
.attr("src", $self.data(settings.data_attribute)); 
```

到

```
.attr("src", "data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="); 
```

新值是 1px x 1px 透明 GIF 图像的 base64 编码字符串。

在您的测试[小提琴](http://jsfiddle.net/3VwRq/4/)中，在缩小版中找到第二次出现

```
c.data(h.data_attribute) 
```

并将其更改为

```
"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" 
```

它仍然会调用两次，但第一次调用可以忽略不计（0kb？），其他浏览器不受此更改的影响。

# ruby - 数组部分的总和

> ID：14504316
> 
> 赞同：3
> 
> 时间：2013-01-24T15:00:09.033
> 
> 标签：ruby

我有一个数字数组`xs`，我需要计算其中三个连续部分的元素总和。这些部分是`xs[0]`，`xs[1, N]`并且`xs[N + 1, N]`对于一些整数`N`。例如，对于`N = 2`：

```
[1, 2, 3, 4, 5] #=> 1, 5, 9 
```

我的实现如下。我无法提高内存/速度效率，但它仍然困扰着我，我想我现在无事可做，但也许有更优雅和简洁的方法来做到这一点？我不必产生一个数组，它可以是任何其他结构。

```
xs.each_with_index.reduce([0, 0, 0]) do |m, x|
  v, i = x
  j = (i > N ? 2
       : i > 0 ? 1
       : 0)
  m[j] += v.to_i
  m
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:05:09.973

```
[xs[0..0],xs[1..N],xs[N+1..-1]].map{|x|x.reduce{|a,b|a+b}} 
```

`a.rb`：

```
N = (rand * 1E6).to_i
xs = 1.upto(1E6).to_a

xs.each_with_index.reduce([0, 0, 0]) do |m, x|
  v, i = x
  j = (i > N ? 2
       : i > 0 ? 1
       : 0)
  m[j] += v.to_i
  m
end 
```

`b.rb`：

```
N = (rand * 1E6).to_i
xs = 1.upto(1E6).to_a

[xs[0..0],xs[1..N],xs[N+1..-1]].map{|x|x.reduce{|a,b|a+b}} 
```

时间：

```
$ time ruby a.rb 
ruby a.rb  0.85s user 0.01s system 99% cpu 0.860 total

$ time ruby b.rb 
ruby b.rb  0.29s user 0.01s system 99% cpu 0.296 total 
```

红宝石版本：

```
$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.0.0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:41:04.047

小变种：

```
[xs[0..0],xs[1..N],xs[N+1..-1]].map{|x|x.inject(:+)} 
```

# sql - 如何在 SQL 中聚合同类集合

> ID：14504317
> 
> 赞同：3
> 
> 时间：2013-01-24T15:00:10.717
> 
> 标签：sql, sql-server, sql-server-2008

如何创建类似数据**集**并关联回链接的密钥。

下面的示例显示了原始数据和所需输出的方式。

```
DECLARE @Data TABLE (PID INT, CID INT)

INSERT INTO @Data
VALUES (1, 1), (1, 2), (1, 3), (3, 1), (3, 2), (3, 3), (2, 1), (2, 2), (4, 3), (4, 4),  
       (5, 4), (5, 5), (8, 4), (8, 5), (6, 6), (7, 4), (7, 5), (7, 6) 
```

在上面的数据中，1、2、3 的 CID 集与 1、2 不同。这些是唯一*集*。

我想结交

PID 1 和 3 到集合 1、2、3。

PID 2 设置 1, 2

PID 4 设置 3, 4

PID 5 和 8 设置 4, 5

等等

总体目标是返回类似于以下内容的 XML：

```
<Items>
  <Item>
    <Hierarchies>
        <Hierarchy>
           <CID>1</CID>
           <CID>2</CID>
           <CID>3</CID>
        </Hierarchy>
    </Hierarchies>
    <PIDs>
        <PID>1</PID>
        <PID>3</PID>
    </PIDs>
  </Item>
  <Item>
    <Hierarchies>
        <Hierarchy>
           <CID>1</CID>
           <CID>2</CID>
        </Hierarchy>
    </Hierarchies>
    <PIDs>
        <PID>2</PID>
    </PIDs>
  </Item>
  <Item>
    <Hierarchies>
        <Hierarchy>
           <CID>3</CID>
           <CID>4</CID>
        </Hierarchy>
    </Hierarchies>
    <PIDs>
        <PID>4</PID>
    </PIDs>
  </Item>
  <Item>
      ... Etc ...
  </Item>
<Items> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:41:27.800

像这样的东西？还是我误解了？

```
 DECLARE @Data TABLE (PID INT, CID INT)

    INSERT INTO @Data
    VALUES (1, 1), (1, 2), (1, 3), (3, 1), (3, 2), (3, 3), (2, 1), (2, 2), (4, 3), (4, 4),  
           (5, 4), (5, 5), (8, 4), (8, 5), (6, 6), (7, 4), (7, 5), (7, 6)

    with cid_xml as (   select P.PID
                               ,OA.CID
                        from @Data P
                        outer apply (select CAST((select C.CID 
                                                     from @Data C
                                                  where C.PID = P.PID

                                                  for xml path('')) as varchar(max)) as CID 
                                    ) OA
                    )
    select cast((select cast(C2.CID as xml) as 'hierarchies/hierarchy'
                        ,cast(OA2.PID as xml) as 'PIDs'
                from cid_xml C2
                outer apply (select CAST((select C3.PID 
                                             from cid_xml C3
                                          where C3.CID = C2.CID
                                          group by C3.PID
                                          for xml path('')) as varchar(max)) as PID 
                            )OA2
                group by C2.CID,OA2.PID
                order by LEN(C2.CID) desc
                for xml path('item')) as xml)
    for xml path('Items') 
```

我只是按顺序查看项目/层次结构/层次结构的第一个节点，就像您在目标结果样本中所做的那样

我得到的结果是

```
 <Items>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>1</CID>
          <CID>2</CID>
          <CID>3</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>1</PID>
        <PID>3</PID>
      </PIDs>
    </item>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>4</CID>
          <CID>5</CID>
          <CID>6</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>7</PID>
      </PIDs>
    </item>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>3</CID>
          <CID>4</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>4</PID>
      </PIDs>
    </item>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>4</CID>
          <CID>5</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>5</PID>
        <PID>8</PID>
      </PIDs>
    </item>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>1</CID>
          <CID>2</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>2</PID>
      </PIDs>
    </item>
    <item>
      <hierarchies>
        <hierarchy>
          <CID>6</CID>
        </hierarchy>
      </hierarchies>
      <PIDs>
        <PID>6</PID>
      </PIDs>
    </item>
  </Items> 
```

没关系？

# floating-point - 如何将 32 位二进制数转换为浮点数？

> ID：14504323
> 
> 赞同：2
> 
> 时间：2013-01-24T15:00:21.973
> 
> 标签：floating-point, binary

我有这个 32 位二进制数（00111111010000000000000000000000），我想知道如何将它转换为浮点数。

在不使用编程或转换器的情况下，如何手动将这个 32 位二进制数转换为浮点数？

谢谢，

担

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:17:24.543

假设您正在寻找一个浮点数，格式如下：

第一个数字是符号，接下来的 8 是指数，最后，最后 23 是有效数。

对于您的号码（00111111010000000000000000000000）

符号：0 是 +
指数：01111110 是 -1 (126-127)
有效数：10000000000000000000000 是 1.5（“不可见”的第一位给你 1，然后第二位（只有一组）是 0.5，下一位是0.25，然后是 0.125 等等）

然后，您可以这样计算值：

sign * 2^exp * Significand

1 * 2^-1 * 1.5
1 * 0.5 * 1.5
0.75

你的浮点数等于 0.75。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:18:49.233

如果您在维基百科和其他地方进行一些查看，您将了解到浮点标准（有不同的标准，IEEE754 是最广为人知的，因为它用于桌面等（dsp 有时会有自己的计算速度更快））将“标准化”数字。浮点数是关于小数点的位置，非浮点整数在数字右侧有一个隐含的小数点

```
00111111010000000000000000000000\. <--- here 
```

除了要归一化的全零之外，假设我们使用的格式希望数字为二进制 1.xxxx，因此我们需要移动小数点

```
001.11111010000000000000000000000 
```

小数位被移动到最重要的位之后（因此只有一个 1 位于小数点左侧）。

如果您还记得高中数学中的 123 可以写为 1.23 * 10^2（10 的 2 次方）。123 也是 123 * 10^0。以 10 为基数的小数点每左移一位，10 的幂就会增加一。右边的每个地方都会减少。在以 2 为底的二进制中没有什么不同，您将小数点向左移动的每一位都会增加 2 的幂（二进制是以 2 为底的）每个位置向右，您都会减少 2 的幂。

所以准确地说，我们现在的数字是

```
1.1111101 * 2^30 
```

现在浮点格式的细节开始发挥作用。因为假设小数点左边的 1（除了确切的数字零和其他一些例外）在那里，它有时不在该浮点数的最终二进制表示中，这是浪费空间当我们可以为尾数多放一点时，我们知道总是放一点。尾数通常是二进制中所见即所得的，指数是让你摸不着头脑的那个，尤其是 IEEE754。例如，数字的二进制格式中的 128 的指数可能表示 2 的 0 次幂，而 129 可能是 2 的 1 次幂，依此类推。这可能看起来很奇怪，但对于其中一些格式来说，它只不过是一个二进制补码字段，而其他格式则有其他方式来做事。单人、双人、

另一个例子

```
0000000000000000000000000000000000000101 
```

将会

```
1.01 * 2^2 
```

如果您从 32 位整数（不是浮点数）开始并希望以 32 位浮点数结束，您显然无法保留该数字的所有细节，因为浮点数需要一个符号位和一个指数以及尾数，尾数小于 32 位，所以你扔掉最低有效位

```
1000000000000000000000000000001 
```

会在某个时候被砍掉：

```
1.000000000000000 * 2^something 
```

# visual-studio-2012 - 用于 Windows 8 的 Express 与用于 Windows 桌面的 Express

> ID：14504324
> 
> 赞同：6
> 
> 时间：2013-01-24T15:00:31.053
> 
> 标签：visual-studio-2012

在 Visual Studio Express 2012 页面上有 2 个选项：*Express for Windows 8*和*Express for Windows Desktop*

这两者有什么区别？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T16:21:30.077

Express for Windows 8 版仅支持为 Windows 应用商店开发程序。您的程序只能在台式机或 Windows RT 平板上的 Win8 上运行，并且必须通过应用商店分发。

Express for Windows 桌面版让您可以开发在常规 Windows 桌面上运行的程序，就像过去 20 年来在 Windows 上运行程序的方式一样。

# android - 无法打开 Android SDK Manager

> ID：14504325
> 
> 赞同：31
> 
> 时间：2013-01-24T15:00:30.280
> 
> 标签：android, sdk, android-sdk-tools

在这里和其他地方搜索了我的问题的答案，我仍然无法解决这个问题。

我已经安装了 Eclipse、ADT 插件和 Android SDK。我的问题是 SDK Manager 不会打开，无论是从 Eclipse 启动还是直接启动。命令提示符窗口短暂闪烁，然后关闭。

我尝试了几种建议的解决方案：我的路径和`JAVA_HOME`变量的各种配置，安装 32 位和 64 位版本的 JDK，以管理员身份运行，都没有成功。

不同的组件安装在这些路径中：

```
JDK - C:\Program Files\Java\jdk1.7.0_11
JRE - C:\Program Files\Java\jre7
SDK - C:\ADT\sdk 
```

我的 JAVA_HOME 设置为`C:\Program Files\Java\jdk1.7.0_11` 我的路径包括`C:\Program Files\Java\jdk1.7.0_11\bin`开头。

我尝试重新安装 SDK，安装程序正确识别 Java 的位置，但仍然无法正常工作。

谁能帮我解决这个问题？我几乎要把头发扯掉！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-24T15:30:29.403

打开cmd，

转到android sdk文件夹，

在 tools/lib/ 中，编辑 find_java.bat，

您将看到如下所示的行，在文件中添加黑线并保存。

> rem 检查我们在路径中有一个有效的 Java.exe。返回码将
> 
> 如果命令有效，则 rem 为 0；如果 exec 失败，则为 1（程序不
> 
> 成立）。for /f %%a in ('%~dps0\find_java.exe -t') 设置 java_exe=%%a

这

> **设置 java_exe="C:\Program Files\Java\jdk1.7.0_11\bin\java.exe"**
> 
> 如果没有定义 java_exe goto :CheckFailed
> 
> :搜索JavaW
> 
> rem 检查我们是否可以在同一位置找到 javaw.exe
> 
> 比java.exe。rem 如果这不起作用，请退回到
> 
> 我们刚刚找到的java.exe。for /f %%a in ('%~dps0\find_java.exe -t -w')
> 
> 如果不存在，请设置 javaw_exe=%%a %javaw_exe% 设置 javaw_exe=%java_exe%
> 
> **设置 javaw_exe="C:\Program Files\Java\jdk1.7.0_11\bin\java.exe"**

我希望它有帮助

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-01T16:06:23.043

塔尔哈的回答是正确的。只是补充一点，您可能不需要在他的解决方案中的黑线中包含引号。

以下添加对我有用：

```
set java_exe=C:\Program Files\Java\jdk1.7.0_11\bin\java.exe 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-09T23:14:30.607

找出在我的情况下这个问题的原因是什么：在注册表中，有一个设置让 CMD 使用 UTF-8 (chcp=65001)。

如果我双击`C:\Programmer\Android\SDK Manager.exe`，我会得到描述的症状。

如果双击`C:\Programmer\Android\sdk\tools\lib\SDK Manager.exe`有提示： `A pop-up stating: Failed to execute tools\android.bat`

启动`C:\Programmer\Android\sdk\tools`并运行CMD 窗口`android.bat`，即使编辑文件并重新删除初始的`@echo off`. 运行命令`chcp`返回 65001。

因此，使用 chcp 850 更改代码页，然后再次运行 android.bat，我得到了输出，以行结尾：`call lib\find_java.bat`。原来这是同样的问题。每次生成新的 CMD 时，代码页都会更改为 65001

通过编辑以下注册表项、删除值并一切正常，修复了该问题：

```
HKEY_LOCAL_MACHINE->SOFTWARE->Microsoft->Command Processor->AutoRun: @chcp 65001>nul 
```

这里有一个空值，使用代码页 850 制作 CMD，bat 文件再次开始工作。

我不太确定最初是什么造成了这种变化，但现在我知道了治疗方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T14:38:23.123

提取时`adt-bundle-windows-x86_64-20131030.zip`，三个文件被破坏：

`("sdk/tools/lib/httpcore-4.1.jar","sdk/tools/lib/find_java.exe","sdk/tools/lib/sdk-common.jar")`

我不知道为什么，但您可以使用旧版本的 android SDK 替换这些文件，例如`android-sdktools_installer_r20.0.1-windows.exe`. 它对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-14T12:29:45.477

经过大量搜索......并安装......重新安装......并按照上述答案更改android.bat的路径......最终解决方案是：运行Eclipse或bat 文件或Android studio 以管理员身份在windows 8 中供管理员打开！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T15:54:01.017

检查 eclipse 和 android SDK 的 md5 校验和。这可能是 md5 校验和问题。

要计算您下载的文件的 md5 校验和，您可以访问[http://www.guidingtech.com/9800/what-is-md5-checksum-how-to-verify-it/](http://www.guidingtech.com/9800/what-is-md5-checksum-how-to-verify-it/)

对于正确的 md5 校验和：- 1\. 对于 Eclipse，请链接他们的官方下载站点，单击您下载的下载包，然后去检查总和，只需将其与您的 Eclipse 下载文件匹配即可。2.对于android sdk去[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)点击下载其他平台并匹配md5校验和（f09aa4557bd1dc2703fde95dcdd6b92e）。

我的情况是我下载了所有这些东西四次。带着敬意

杰伊

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-23T14:15:53.067

如果您尚未在计算机上安装 Java，也可能会发生这种情况。我遇到了类似的问题，但是在安装 java 之后它对我有用。[您可以从https://www.java.com/en/download/help/download_options.xml](https://www.java.com/en/download/help/download_options.xml)下载 Java 。

问候， 阿比

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-11T15:37:57.190

按照这些步骤操作，经过很长时间，以上所有方法都对我有帮助，对 windows7 64 位没有影响，不需要`JAVA_HOME`系统变量或编辑 android.bat

1.  在 Android SDK、Java JDK 64 位和 Java JRE x86 中下载 Android Studio

2.  首先安装 Java JRE，然后安装 Java JDK 64 位，最后安装 Android Studio。

3.  现在您首先启动 Android Studio（64 位版本），它需要 JAVA_HOME 设置来运行 JVM，只需复制`jdk.x.x.x(version)`文件夹（我的 PC：`jdk1.8.0_25`从`"C:\Program Files\Java\")`文件夹到 Android Studio 文件夹并将该文件夹（在 Android Studio 中）重命名为 "jre" `(jdk1.8.0_25 -> jre)`。

4.  现在我可以从任何地方打开 Android SDK 管理器，如果你想使用 eclipse（现在不是官方的），只需将 java `jre.x.x.x(version)`x86 文件夹（从你之前安装的位置）复制到 Eclipse 并重命名为“jre”。处理好后，在Eclipse中选择Android SDK路径使用，Android Studio和Eclipse都可以使用。

5.  如果仍然拒绝您，请注意您的防病毒软件（删除防病毒软件并在确定它不会引起问题后安装）！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-22T04:10:53.677

cmd这个“android.bat update sdk”，这样可以打开“SDK Manager.exe”

笔记

1.环境中的“D:\SDK\android-sdk-windows\tools”路径。

2.替换sdk“tools”文件夹，这是站点-> [https://developer.android.com/studio/index.html](https://developer.android.com/studio/index.html)，然后选择“Get just the command line tools”。（新版本弃用“SDK Manager.exe ") 这种方式适用于我的 Android Studio 2.3

3.如果“android.bat update sdk”不能工作，请看这个视频-> [https://www.youtube.com/watch?v=FMLVY3PqPlc](https://www.youtube.com/watch?v=FMLVY3PqPlc)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-14T11:48:16.367

我已经尝试了上述所有方法，但都没有奏效。如果您已经安装了 jdk-10 或任何其他方法，请卸载它并安装 jdk-8。如果您创建了路径变量，则立即删除“JAVA_HOME”变量，并从“PATH”变量中删除 java 路径。然后安装 jdk-8，并尝试安装 sdk manager 完美运行。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-05-03T11:21:05.747

我找到了另一个解决方案，假设您的系统上安装了 Android Studio：

1.  打开安卓工作室
2.  打开设置（Control + Alt + S）
3.  找到“Android SDK”设置（外观和行为 -> 系统设置）
4.  在右侧，您将拥有与 SDK 相关的选项卡

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-10-16T11:51:55.190

试试这个>

转到 sdk 文件夹

右键单击 Sdk Manager，然后以管理员身份运行。它将打开 sdk 管理器，您的问题将解决

# ruby - ruby connect.rb 连接到 Mongo 但 irb -r connect.rb 失败

> ID：14504330
> 
> 赞同：1
> 
> 时间：2013-01-24T15:00:38.957
> 
> 标签：ruby, mongodb, ubuntu, rubygems

我正在从“MongoDB in Action”一书中学习 Mongodb 和 ruby​​，我已经安装好 Mongodb，并设法在其上执行了许多命令。我可能没有正确安装 ruby​​。我正在使用 Ubuntu 12.10 红宝石 1.9.3

我有一个名为 connect.rb 的书中的程序

==================================================== ========

```
require 'rubygems'
require 'mongo'

@con = Mongo::Connection.new
@db = @con['tutorial']
@users = @db['users'] 
```

==================================================== =========

如果我使用 ruby​​ connect.rb 运行程序

它运行时没有任何错误消息，但是如果我尝试使用 irb 我会收到以下错误：

```
irb -r connect.rb
/usr/local/rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in   `require':LoadError: cannot load such file -- connect.rb 
```

我可以输入 irb 并得到 irb 提示 ok。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:11:20.943

似乎 irb 找不到该`connect.rb`文件。您应该在包含该文件的适当目录中运行它，并且您应该像这样编写文件路径：`./connect.rb` 它与 mongodb 无关，因为它甚至不加载您的源文件

[在这里](https://stackoverflow.com/questions/13874115/why-does-irb-r-make-file-an-absolute-path)查看更多信息。

# javascript - ASP.NET MVC4 显示模式不加载 TypeScript 输出

> ID：14504334
> 
> 赞同：1
> 
> 时间：2013-01-24T15:00:48.837
> 
> 标签：javascript, asp.net-mvc-4, typescript

我有一个使用 Internet 模板创建的 ASP.NET MVC4 应用程序。在这个项目中，我在 Views/Shared 文件夹中有两个布局文件，_Layout.chsmtl 和 _Layout.Mobile.cshtml。在每个文件中，我都加载了从 TypeScript 编译的不同脚本。在 _Layout.cshtml 我有

```
<script src="@Url.Content("~/Scripts/app.js?43")" type="text/javascript"></script> 
```

在 _Layout.Mobile.cshtml 中，

```
<script src="@Url.Content("~/Scripts/MobileApp.js?2")" type="text/javascript"></script> 
```

app.js 和 mobileapp.js 是根据项目文件中的以下设置创建的：

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -out scripts\app.js scripts\app.ts -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" /> 
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -out scripts\mobileapp.js scripts\mobileapp.ts  -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
  </Target> 
```

该应用程序在 Internet Explorer 9 中正常运行。但是，当我在 Opera Mobile 中运行时，似乎没有加载 mobileapp.js，因为它的构造函数只是显示没有调用警报。这是 MobileApp.js 的 TypeScript 代码。

```
 export class MobileApp extends AppBase {                                  

        constructor () { 
            super(null, null)                
              alert("mobile page loading ...?");
        }      
    } 
```

每次刷新 Opera Mobile 上的索引页面时，我还会将以下消息写入应用程序日志：

```
ERROR 2013-01-24 09:39:57,233 172979ms MvcApplication         Application_Error  - ASP.global_asax
System.Web.HttpException (0x80004005): File does not exist.
   at System.Web.StaticFileHandler.GetFileInfo(String virtualPathWithPathInfo, String physicalPath, HttpResponse response)
   at System.Web.StaticFileHandler.ProcessRequestInternal(HttpContext context, String overrideVirtualPath)
   at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T14:39:47.923

为了使构造函数运行，您必须实例化该类。例如：

var Test = new MobileApp();

# java - Java 序列化和反序列化

> ID：14504338
> 
> 赞同：8
> 
> 时间：2013-01-24T15:01:04.033
> 
> 标签：java, serialization, deserialization, object-serialization

我有一个对象如下：

```
 public class Records implements java.io.Serializable{
        private int cId;
        private int pId;
        private int vlaue;
        private int tag;

        public Records(int c, int p, int v, int t){
                this.cId=c;
                this.pId=p;
                this.value=v;
                this.tag=t;
        }
} 
```

我已经收集了大量数据，在上面的类中构造了对象并将它们序列化到磁盘。

我忘记包含在类文件中的一件事是访问每个对象的值的方法。例如，访问特定对象的 cId 值。

我修改了类定义以添加此类方法，但后来我无法将对象反序列化回 Records 类并得到此运行时错误：

```
java.io.InvalidClassException: Records; local class incompatible: stream classdesc serialVersionUID = -1232612718276774474, local class serialVersionUID = -8244963718951538904
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:579)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1600)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1513)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1749)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
    at DeSerialise.main(DeSerialise.java:21) 
```

我想我需要告诉java它们是*相同的*定义并修改serialVersionUID但不太确定如何？任何想法都会受到欢迎！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:02:27.743

尝试将以下内容添加到您的课程中：

```
private static final long serialVersionUID = -1232612718276774474L; 
```

这将使您的类`serialVersionUID`与实例序列化时使用的编译器生成的值一致。

[文档](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)中的以下引用值得一读（强调我的）：

> 序列化运行时与每个可序列化类关联一个版本号，称为 serialVersionUID，在反序列化期间使用该版本号来验证序列化对象的发送方和接收方是否已加载与序列化兼容的该对象的类。如果接收者为对象加载了一个类，该对象的 serialVersionUID 与相应发送者的类不同，则反序列化将导致 InvalidClassException。可序列化的类可以通过声明一个名为“serialVersionUID”的字段来显式声明自己的serialVersionUID，该字段必须是静态的、最终的和long类型：
> 
> ```
> ANY-ACCESS-MODIFIER static final long serialVersionUID = 42L; 
> ```
> 
> 如果可序列化类没有显式声明 serialVersionUID，则序列化运行时将根据类的各个方面为该类计算默认的 serialVersionUID 值，如 Java(TM) 对象序列化规范中所述。**但是，强烈建议所有可序列化的类都显式声明 serialVersionUID 值，因为默认的 serialVersionUID 计算对类细节高度敏感，这些细节可能因编译器实现而异，因此可能在反序列化期间导致意外的 InvalidClassExceptions。因此，为了保证在不同的 java 编译器实现中具有一致的 serialVersionUID 值，可序列化的类必须声明一个显式的 serialVersionUID 值。**还强烈建议显式 serialVersionUID 声明尽可能使用 private 修饰符，因为此类声明仅适用于立即声明的类——serialVersionUID 字段不能用作继承成员。数组类不能显式声明 serialVersionUID，因此它们始终具有默认的计算值，但数组类不需要匹配 serialVersionUID 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:03:17.160

您可以在您的类中声明串行版本 ID，如下所示：

```
private static final long serialVersionUID = -1232612718276774474L; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:05:16.743

是的，为类指定 serialversionId 非常重要。否则很难识别序列化的类。

如果您这样做，您还可以创建新的序列化对象而不是使用旧的序列化对象。

Eclipse IDE 会自动生成 serialversionId 尝试使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:10:13.880

问题是您在没有在类中定义 serialVersionUID 的情况下对数据进行了序列化。添加 setter 和 getter 是可以的，并且不会影响序列化，但是当您重新编译该类时，编译器可能会生成另一个 UID，这会在您尝试反序列化数据时导致异常。如果需要实际反序列化您使用类的第一个版本序列化的数据，您需要知道编译器第一次生成的 UID：这可以在错误消息中看到，因此您需要将 serialVersionUID 设置为 -1232612718276774474L .

# android - ANDROID 从以前的活动中获取数据

> ID：14504341
> 
> 赞同：0
> 
> 时间：2013-01-24T15:01:08.103
> 
> 标签：android

从我的应用程序的先前活动中获取某些内容时遇到问题。我的情况是，之前的活动，称为 ListOfMeals，它有一个列表视图（早餐、早餐等）。如果我点击早餐并添加餐点，我会点击面包、水果、蔬菜等食物的列表，等之后，它应该添加到我的数据库中。但到目前为止我所拥有的是这个，请参考以下内容：

```
case R.id.btFoodVegetableSave:
        String mealname = selected;

        String serving = calories.getText().toString();
        int i = Integer.parseInt(serving.replaceAll("[\\D]", ""));

        String servng = String.valueOf(i);

        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
        String strDate = sdf.format(new Date());

        if ( ( mealname.isEmpty() || servng.isEmpty() ) ){

            // call for custom toast
            viewErrorToast();
        }

        else {

        boolean didItWork = true;

        try{

            BreakFastLog entry = new BreakFastLog(Baguettes_Bagels.this);
            entry.open();   
            entry.createEntry(mealname, servng, strDate);
            entry.close();

            }
            catch(Exception e){
                didItWork = false;
                viewErrorToast();
            }finally{
                if (didItWork){
                    viewBMRSavedToast();
                }

            }
        } // end of if else statement
        break; 
```

在我的例子中，它只节省了我的早餐。但是当我选择早餐而不是早餐时，问题就出现了。如何获取用户从之前的活动中选择的内容并将其保存到相应的餐点中？

我知道这与此有关：

```
BreakFastLog entry = new BreakFastLog(Baguettes_Bagels.this);
        entry.open();   
        entry.createEntry(mealname, servng, strDate);
        entry.close(); 
```

我必须加上 if else 语句，但我想不出一些聪明的方法来实现这一点。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:15:33.423

当您开始活动时，您可能会遇到以下情况：

```
Intent intent = new Intent(...);
startActivity(intent); 
```

你可以加：

```
intent.putExtra(key, yourparameter); 
```

当您的第二个活动开始时，您可以在 onCreate 中检索它，例如：

```
int value = getIntent().getExtras().getInt(key); 
```

# symfony - 如何更改 symfony2 formType 类中文本字段的默认大小

> ID：14504344
> 
> 赞同：5
> 
> 时间：2013-01-24T15:01:17.823
> 
> 标签：symfony

如何更改 symfony2 formType 类中的默认文本字段大小

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:56:11.883

您是否尝试过类似的方法：

```
$builder->add('your_text_field', 'text', array(
    'attr' => array('size' => '25'),
)); 
```

# scala - 理解 Scala：将函数作为参数传递

> ID：14504348
> 
> 赞同：6
> 
> 时间：2013-01-24T15:01:28.413
> 
> 标签：scala

我开始学习 Scala，并且遇到了我不太了解的 Programming in Scala 教科书中的一个片段。希望有人能帮助我吗？

这是来自 Programming in Scala, 2nd Edition 的清单 9.1。

```
object FileMatcher {
    private def filesHere = (new java.io.File(".")).listFiles
}

private def filesMatching(matcher: String => Boolean) = 
    for (file <- filesHere; if matcher(file.getName)) yield file

def filesEnding(query: String) = 
    filesMatching(_.endsWith(query)) // ???

def filesContaining(query: String) = 
    filesMatching(_.contains(query)) // ???

def filesRegex(query: String) = 
    filesMatching(_.matches(query)) // ??? 
```

我对有`// ???`. 是否使用`_`某种方式创建了一个传递给的匿名函数`filesMatching`？还是`_`与此无关，而是编译器认为`filesMatching`需要一个函数，因此不`_.endsWith(query)`作为表达式执行，而是使表达式成为函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T15:29:22.903

**扩展定义**

匿名函数以更详细和完整的形式定义为

```
(a: A, b: B, ...) => function body //using a, b, ... 
```

例如

```
(a: String, b: String) => a ++ b // concatenates 2 Strings 
```

* * *

**推断类型**

如果上下文提供了所需的信息（例如，当高阶函数期望其函数参数具有特定签名时），您可以省略参数的类型，如

```
(a, b, ...) => function body //using a, b, ... 
```

例如

```
val l = List(1, 2, 3)

//you can omit the type because filter on List[Int] expects a (Int => Boolean)
l.filter(i => i < 3) 
```

* * *

**占位符语法**

最后，您仍然可以使用更短的形式，如果您的参数每次使用一次并且按照您声明它们的相同顺序由函数体使用，如

```
_ ++ _ // which is equivalent to (a, b) => a ++ b 
```

每个`_`都是函数参数的占位符

例如

`filesMatching`的参数是类型的函数，`String => Boolean`因此您可以使用

```
_.endsWith(query) // equivalent to (s: String) => s.endsWith(query)
_.contains(query) // equivalent to (s: String) => s.contains(query)
_.matches(query)  // equivalent to (s: String) => s.matches(query) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:10:37.053

此处使用的`_`是函数参数的简写。因此`filesMatching(_.endsWith(query))`等价于`filesMatching(f => f.endsWith(query))`。与`filesMatching`的函数作为参数一样`String => Boolean`，编译器可以推断出这里`f`应该是 a `String`。所以你是对的，这个表达式是一个匿名函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T18:01:41.360

这种操作最好通过定义函数类型来完成。[我在这里](http://danielwestheide.com/blog/2013/01/30/the-neophytes-guide-to-scala-part-11-currying-and-partially-applied-functions.html)找到了一个很好的演示。结合这篇文章，演示应该阐明将函数作为参数传递的最佳实践

# smarty - Dreamweaver CS5 中的 Smarty 标记库

> ID：14504353
> 
> 赞同：0
> 
> 时间：2013-01-24T15:01:43.843
> 
> 标签：smarty, dreamweaver, color-scheme, flash-cs5

我已经开始在一份新工作中使用 Smarty 模板框架，这是一个全新的、令人困惑的东西，但我之前对 PHP 的了解无疑是有帮助的。

我发现在 Dreamweaver CS5 中使用 Smarty 看起来有点乏味，并且还没有找到一种方法来对 smarty 标签进行颜色编码。

我得到了一台 Windows 8 PC 来工作，这可能意味着我在网上找到的一些扩展不起作用。

有谁知道将这些标签添加到 DW 并对其进行颜色编码的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:33:11.667

您是否尝试过以下两种方法中的任何一种：

```
http://smartydwt.klitsche.org/ 
```

和

```
https://code.google.com/p/dreamweaver-smarty/ 
```

这些工作但它们对我不起作用，因为我不想更改 smarty 语法。第一个制作 smarty 标签而不是`{if $x}`into `<smart:if $x>`（如果我没记错的话，我使用它已经有好几年了，它最初是为 Macromedia Dreamweaver 2004 左右制作的）。第二个把它变成`{{if $x}}`

如果您只想要语法高亮/代码着色，请查看以下内容：

```
http://smarty.incutio.com/?page=ConfiguringDreamweaver 
```

# php - 是否可以使用 DOMDocument::load() 函数加载作为 ashx 文件的 rss 提要？

> ID：14504366
> 
> 赞同：0
> 
> 时间：2013-01-24T15:02:37.623
> 
> 标签：php, xml, rss, domdocument

我正在尝试在客户站点上的 .ashx 文件中加载应该是 rss 提要的内容。我不确定这是否可能。这是我正在使用的代码。

```
$doc = new DOMDocument();
$doc->load($client_url);
echo htmlentities($doc->saveXML()); 
```

所有被回应的是`<?xml version="1.0"?>`我相信是从 saveXML() 函数创建的。

有什么帮助吗？

谢谢， 迦勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:31:41.810

由于 hakre 并查看了错误，我发现了问题。问题是当我应该使用“http”时，我在 $client_url 中使用了“https”。

感谢您打开我的错误消息的建议。我认为这在未来也会非常有用。

# vba - 将文件从一个文件夹移动到另一个文件夹

> ID：14504372
> 
> 赞同：0
> 
> 时间：2013-01-24T15:02:57.253
> 
> 标签：vba, file, move

我需要使用 VBA 将文件从一个文件夹移动到另一个文件夹。

```
For m = 1 To fnum
    MsgBox " Please Select " & m & "files"
    ffiles(m) = Application.GetOpenFilename
Next m

If Dir(outputfolder) = "" Then
    fso.createfolder (outputfolder)
End If

fso.Movefile ffiles(m), outputfolder  " getting error at this place " 
```

我收到一条错误消息。

```
Error message id "Runtime error 438 . Object doesnt support this property " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:24:04.247

我最喜欢的做法。使用`SHFileOperation`API

```
Option Explicit

Private Declare Function SHFileOperation Lib "shell32.dll" _
Alias "SHFileOperationA" (lpFileOp As SHFILEOPSTRUCT) As Long

Private Const FO_MOVE As Long = &H1
Private Const FOF_SIMPLEPROGRESS As Long = &H100

Private Type SHFILEOPSTRUCT
    hWnd As Long
    wFunc As Long
    pFrom As String
    pTo As String
    fFlags As Integer
    fAnyOperationsAborted As Long
    hNameMappings As Long
    lpszProgressTitle As Long
End Type

Sub Sample()
    Dim fileToOpen As Variant
    Dim outputfolder As String
    Dim i As Long

    outputfolder = "C:\Temp\"

    fileToOpen = Application.GetOpenFilename(MultiSelect:=True)

    If IsArray(fileToOpen) Then
        If Dir(outputfolder) = "" Then MkDir outputfolder

        For i = LBound(fileToOpen) To UBound(fileToOpen)
            Call VBCopyFolder(fileToOpen(i), outputfolder)
        Next i
    Else
          MsgBox "No files were selected."
    End If
End Sub

Private Sub VBCopyFolder(ByRef strSource, ByRef strTarget As String)
    Dim op As SHFILEOPSTRUCT
    With op
        .wFunc = FO_MOVE
        .pTo = strTarget
        .pFrom = strSource
        .fFlags = FOF_SIMPLEPROGRESS
    End With
    '~~> Perform operation
    SHFileOperation op
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-06T16:57:21.153

[我们可以使用脚本https://seleniumautomations.blogspot.com/2020/05/less-than-5-sec-to-clean-and-organise.html?view=magazine](https://seleniumautomations.blogspot.com/2020/05/less-than-5-sec-to-clean-and-organise.html?view=magazine)自动将文件从一个文件夹移动到另一个文件夹

# javascript - 从显示模块模式调用对象和数组

> ID：14504375
> 
> 赞同：1
> 
> 时间：2013-01-24T15:03:07.727
> 
> 标签：javascript, design-patterns

```
var GlobalObject = (function(){

    var arr1 = [];
    var arr2 = [];
    var arr3 = [];
    var arr4 = []; 

        return {

         }

})(); 
```

1.  现在我将如何在应用程序中调用 GlobalObject.arr1 ？
2.  当我进行推送和弹出时，它会保持其参考和价值吗？
3.  这会导致任何内存泄漏吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:19:00.613

`arr1`仅在`GlobalObject`函数范围内定义。如果要全局访问它，则需要让`GlobalObject`函数返回对它的引用。阅读[javascript 中的功能范围，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)以便更好地理解这一点。当前，您的函数返回一个空对象。你想做这样的事情：

```
...
return {
   "array1": arr1,
   "array2": arr2,
   "array3": arr3,
   "array4": arr4
}; 
```

（尽管您可以通过不返回它们来维护这些数组的*隐私）*

将`GlobalObject`保持`arr1`的引用和值，直到您手动取消引用它（将其设置为`null`）。[Javascript 的垃圾收集器](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)只删除不再需要的对象。

您当前的代码显示没有内存泄漏。注意[循环引用和闭包](http://www.ibm.com/developerworks/web/library/wa-memleak/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:05:45.560

1.  你不能，除非`arr1`作为返回对象的属性值公开
2.  是的
3.  这取决于您的其余代码

对于 (1)，您必须确保返回的对象的属性之一是对数组的引用：

```
 // ...
    return {
      whatever: arr1,
      // ...
    }; 
```

至于内存泄漏，这样的设置没有什么特别成问题的。

# javascript - 使用 jQuery 启动图像下载

> ID：14504377
> 
> 赞同：1
> 
> 时间：2013-01-24T15:03:09.710
> 
> 标签：javascript, jquery, html

我希望我的用户能够使用 jQuery 从我的网站下载图像。例如，我的网站上有一张这样的图片。当用户单击“下载”按钮时，该图像必须下载到用户系统。我能做些什么来实现这一目标？

```
<div class="download"><img src="http://m.com/hello.png"><div> 
```

编辑：也欢迎 PHP 代码，例如`download.php?url=http://m.com/hello.png`，

PS： http: [//m.com/hello.png](http://m.com/hello.png)是外部网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:11:13.247

对于服务器端，您可以将图像点击定向到强制下载的 PHP 页面。

在您的 HTML 页面上，您将拥有：

如果是 PNG 文件

`<a href="download.php?ext=png"><img src="hello.png" /></a>`

或者如果是 JPG 文件

`<a href="download.php?ext=jpg"><img src="hello.jpg" /></a>`

然后一个PHP页面`download.php`如下图

```
<?php
if($_GET['ext'] == 'png') {
    $ext = 'png';
} elseif($_GET['ext'] == 'jpg') {
    $ext = 'jpg';
}

header('Content-disposition: attachment; filename=Name-of-Image.'.$ext);
header('Content-type: image/'.$ext);
readfile('http://m.com/hello.'.$ext);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:09:31.703

如果不使用 PHP，您将无法可靠地做到这一点。我在这个网站上发现了一个可以帮助您解决此问题的先前问题：[使用 Javascript 强制下载图像](https://stackoverflow.com/questions/6796974/force-download-an-image-using-javascript)

*实际上，那里有一种依赖 HTML5 的方法，但我不太确定您是否认为它可靠。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:09:26.467

PHP代码：

```
header('Content-Type: image/png');
header('Content-Disposition: attachment; filename="filename.png"');
readfile('hello.png'); 
```

# linux - 用于监控资源使用情况和电子邮件警告的 Bash 脚本

> ID：14504380
> 
> 赞同：0
> 
> 时间：2013-01-24T15:03:14.513
> 
> 标签：linux, bash

我正在寻找一个 bash 脚本来监控资源使用情况和电子邮件（如果它超过某个阈值）。

到目前为止我有这个

```
 top -b -d1 -n2 | grep Cpu | cut -c 35-39 
```

但它输出两个值？IE

95.4 98.0

如何添加电子邮件阈值部分，即 >75% 我还想为内存使用添加相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:25:59.977

它输出两个值，因为您指定了两次迭代`-n2`

您还在查看 cpu 空闲百分比，因此您必须从 100 中减去它以获得您的值，因为它是浮点数，您必须使用`bc`.

```
LOAD_IDLE=`top -b -n1 | grep Cpu | cut -c 35-39`; LOAD=`echo "100-$LOAD_IDLE"|bc` ; if [ "${LOAD%%.*}" -gt "74" ]; then #send email; fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:16:41.973

我建议用户使用 Nagios 监控插件。它会给你更多的控制权。

[http://exchange.nagios.org/directory/Plugins/Operating-Systems/Linux/Check-cpu/details](http://exchange.nagios.org/directory/Plugins/Operating-Systems/Linux/Check-cpu/details)

# r - 不匹配列中的整个文本以供参考

> ID：14504381
> 
> 赞同：3
> 
> 时间：2013-01-24T15:03:15.090
> 
> 标签：r, text, merge

我有两个数据文件。第一个是我正在编译数据的“主表”，相关列如下所示：

```
Family          ID                     Size
Tyrannidae      Empidonax traillii
Tyrannidae      Empidonax atriceps
Conopophagidae  Conopophaga lineata 
```

其中 size 是我要填写的列。我需要将来的分析 ID 包含属名和种名。大小数据基于单独文件中的属（ID 中的第一个单词），如下所示：

```
 Genus        Size
Empidonax     13
Conopophaga   6 
```

R中有没有办法说匹配ID列中的某些而不是全部文本，然后才能填写Size列？期望的结果

```
Family          ID                     Size
Tyrannidae      Empidonax traillii     13
Tyrannidae      Empidonax atriceps     13
Conopophagidae  Conopophaga lineata    6 
```

或者将 ID 列一分为二，填写 Size 然后将两者合并在一起会更简单吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:10:22.913

如果`master`并且`size`是您的数据框，您可以创建一个 Genus 列，然后用于`merge`获取组合数据框。

```
#regex deletes all characters after a space
master$Genus <- gsub(" .*$","",master$ID) 
merge(master,size,by="Genus") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:24:01.427

既然`data.table`使能`X[Y]`它似乎很合适。因此，这里有一个`data.table`解决方案：

```
require(data.table)
master <- data.table(Family=c("Tyrannidae", "Tyrannidae", "Conopophagidae"), 
          ID = c("Empidonax traillii", "Empidonax traillii", "Conopophaga lineata"))
dt <- data.table(Genus = c("Empidonax", "Conopophaga"), Size = c(13, 6))

# get Genus
master[, Genus := gsub(" .*$", "", ID)] # master$ID replaced by ID
# set key to Genus
setkey(master, "Genus")
> master[dt] # X[Y]

#          Genus         Family                  ID Size
# 1:   Empidonax     Tyrannidae  Empidonax traillii   13
# 2:   Empidonax     Tyrannidae  Empidonax traillii   13
# 3: Conopophaga Conopophagidae Conopophaga lineata    6 
```

# node.js - 为什么不能修改 Mongoose 查询返回的数据（例如：findById）

> ID：14504385
> 
> 赞同：102
> 
> 时间：2013-01-24T15:03:26.570
> 
> 标签：node.js, mongoose

当我尝试更改猫鼬查询返回的数据的任何部分时，它没有任何效果。

昨天我试图弄清楚这个大约2个小时，各种`_.clone()`s，使用临时存储变量等。最后，就在我快要发疯的时候，我找到了解决方案。所以我想将来有人（fyuuuture！）可能会有保存问题。

```
Survey.findById(req.params.id, function(err, data){
    var len = data.survey_questions.length;
    var counter = 0;

    _.each(data.survey_questions, function(sq){
        Question.findById(sq.question, function(err, q){
            sq.question = q; //has no effect

            if(++counter == len) {
                res.send(data);
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-01-24T21:09:32.510

对于这样的情况，您需要一个普通的 JS 对象而不是完整的模型实例，您可以[`lean()`](http://mongoosejs.com/docs/api.html#query_Query-lean)像这样调用查询链：

```
Survey.findById(req.params.id).lean().exec(function(err, data){
    var len = data.survey_questions.length;
    var counter = 0;

    _.each(data.survey_questions, function(sq){
        Question.findById(sq.question, function(err, q){
            sq.question = q;

            if(++counter == len) {
                res.send(data);
            }
        });
    });
}); 
```

这种方式`data`已经是一个普通的 JS 对象，您可以根据需要进行操作。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-24T15:03:26.570

我认为 Mongoose 文档并没有说得足够清楚，但是查询中返回的数据（尽管您可以 res.send() 它）实际上是 Mongoose Document 对象，而不是 JSON 对象。但是你可以用一行来解决这个问题......

```
Survey.findById(req.params.id, function(err, data){
    var len = data.survey_questions.length;
    var counter = 0;

    var data = data.toJSON(); //turns it into JSON YAY!

    _.each(data.survey_questions, function(sq){
        Question.findById(sq.question, function(err, q){
            sq.question = q;

            if(++counter == len) {
                res.send(data);
            }
        });
    });
}); 
```

# javascript - 如何锁定滚动以仅在 HTML 中朝一个方向移动

> ID：14504392
> 
> 赞同：0
> 
> 时间：2013-01-24T15:03:44.623
> 
> 标签：javascript, css, html, scroll

假设我们有一个窗口，通常我们可以上下、左右和对角滚动。换句话说，我们可以同时向下和向左滚动。我想要做的是一次只滚动一种方式。无论是上下还是左右。我不想通过对角线滚动。

这在 HTML 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:07:37.103

我个人不知道纯 HTML 方法，但您可以查看[Sly 插件](http://jquer.in/jquery-plugins-for-awesome-scrolling-and-scrollbars-on-websites/sly/)以进行单向滚动。应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:08:50.953

通常，除非网站的宽度超过屏幕尺寸，否则您无论如何都不能在 x 方向滚动。唯一的方法是防止 CSS 溢出`overflow-x: hidden`。

但是，如果用户将有一个显示器，其中内容不再适合（例如智能手机显示器）或使用浏览器缩放，则隐藏内容可能存在问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:32:20.230

如果你想禁用鼠标中键滚动，你可以把它放在`head`你的 HTML 文档的部分（注意**这实际上禁用了中键**）：

```
$(document).ready(function(){
    document.onmousedown = window.onmousedown = function (e) {
        if(e.which == 2)
        {
            e = e || window.event;
            if (e.preventDefault)
                e.preventDefault();
            e.returnValue = false;
        }
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-23T16:49:29.930

这些答案似乎不是你想要的。我来这里问同样的问题，寻找一种更简单的方法，但似乎必须这样做：

```
//When scrolling, execute the "Lock Direction" function lockdir()
<body onscroll="lockdir()"> 
```

在主体内部（或者我想头部也可以工作），添加以下脚本：

```
<script>

    //Scroll Variables 
    var scr = {
        initPos: [0, 0],    //Initial Mouse Position
        cPos: [0, 0],       //Current Mouse Position
        locked: 0,          //A direction is locked
        timeout: 0,         //Scroll timeout counter
    }

    //Lock Direction Function
    function lockdir(){
        scr.timeout = 0;    //Keep scroll counter at 0 while scrolling

        //Get the current mouse position and find difference to initial position
        scr.cPos = [
            document.body.scrollTop, 
            document.body.scrollLeft
        ];
        var dif = [
            Math.abs(cPos[0] - scr.initPos[0]),
            Math.abs(cPos[1] - scr.initPos[1])
        ];

        //If no direction is locked (0), lock direction moved least when scrolling started
        if (scr.locked === 0){

            if (dif[1] > dif[0]){
                scr.locked = 2;     //Lock Vertical Scrolling
            }else{
                scr.locked = 1;     //Lock Horizontal Scrolling
            }

        }

        //Reset Locked Direction to initial value
        if (scr.locked === 1){
            document.body.scrollLeft = scr.initPos[1];
        }else{
            document.body.scrollTop = scr.initPos[0];
        }

    }

    //Cancels Lock if timer exceeds 20 milliseconds
    function cancelLock(){
        if (scr.timeout > 20){
            scr.locked = 0;
            scr.initPos = scr.cPos;
        }

        scr.timeout++;
    }

    window.setInterval(cancelLock, 1);  //Repeats cancel lock
</script> 
```

# angularjs - 如何修复这个 AngularJS JCrop 指令？

> ID：14504393
> 
> 赞同：2
> 
> 时间：2013-01-24T15:03:45.457
> 
> 标签：angularjs, jcrop

我正在尝试将 JCrop 与 AngularJS 一起使用。我有以下指令，我需要帮助修复一下：

```
.directive('imgCropped', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: { src:'@', selected:'&' },
        link: function(scope,element, attr) {
            var myImg;
            var clear = function() {
                if (myImg) {
                    myImg.next().remove();
                    myImg.remove();
                    myImg = undefined;
                }
            };
            scope.$watch('src', function(nv) {
                clear();
                if (nv) {
                    element.after('<img />');
                    myImg = element.next();
                    myImg.attr('src',nv);

                    $(myImg).Jcrop({
                        trackDocument: true,
                        onSelect: function(x) {
                            /*if (!scope.$$phase) {
                                scope.$apply(function() {
                                    scope.selected({cords: x});
                                });
                            }*/
                            scope.selected({cords: x});
                        },
                        aspectRatio: 1,
                        boxWidth: 400, boxHeight: 400,
                        setSelect: [0, 0, 400, 400]
                    });
                }
            });

            scope.$on('$destroy', clear);
        }
    };
}) 
```

问题是 JCrop 没有正确检测到真实的图像大小，我需要添加一个 trueSize 选项，我知道如何做的唯一方法是将 Jcrop 调用包装在回调中，看起来很讨厌。

另外，如果我在 onSelect 回调中使用 scope.$apply ，我会收到 $digest already in progress 错误。这是为什么 ？

编辑：我可以使用以下代码成功获得真实的图像大小，但必须有更好的方法来做到这一点

```
.directive('imgCropped', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: { src:'@', selected:'&' },
        link: function(scope,element, attr) {
            var myImg;
            var clear = function() {
                if (myImg) {
                    myImg.next().remove();
                    myImg.remove();
                    myImg = undefined;
                }
            };
            scope.$watch('src', function(nv) {
                clear();
                if (nv) {
                    element.after('<img />');
                    myImg = element.next();
                    myImg.attr('src',nv);

                    var temp = new Image();
                    temp.src = nv;
                    temp.onload = function() {
                        var width = this.width;
                        var height = this.height;

                        $(myImg).Jcrop({
                            trackDocument: true,
                            onSelect: function(x) {
                                /*if (!scope.$$phase) {
                                 scope.$apply(function() {
                                 scope.selected({cords: x});
                                 });
                                 }*/
                                scope.selected({cords: x});
                            },
                            aspectRatio: 1,
                            boxWidth: 400, boxHeight: 400,
                            setSelect: [0, 0, 400, 400],
                            trueSize: [width, height]
                        });
                    }
                }
            });

            scope.$on('$destroy', clear);
        }
    };
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:01:16.527

你在做什么可能没问题。该指令看起来不错。至于获取图像大小，您可以使用直接的 JavaScript 来完成，如下所示：

```
var img = new Image();
img.onload = function () {
   var w = img.width,
       h = img.height;
   //do what you need to do here.
};
img.src = 'somefile.gif'; 
```

它将为您节省 DOM 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T14:42:22.347

我正在制定一项我将推动凉亭的指令（经过更多修复）：

[角度图像裁剪](https://github.com/coolaj86/angular-image-crop)

[工作演示](https://coolaj86.github.com/angular-image-crop)

在构造函数回调中，我调用`this.getBounds()`然后将这些值应用于`cords`in `onSelect`：

[https://github.com/coolaj86/angular-image-crop/blob/master/app/scripts/controllers/profile-pic.js#L24](https://github.com/coolaj86/angular-image-crop/blob/master/app/scripts/controllers/profile-pic.js#L24)

# html - IE 的过滤器阴影使文本更细

> ID：14504395
> 
> 赞同：0
> 
> 时间：2013-01-24T15:03:47.527
> 
> 标签：html, css, fonts, filter, shadow

这个过滤器 `.ie8 { filter:progid:DXImageTransform.Microsoft.Shadow(Strength=1, Direction=0); font-weight: 400; }`

在我的元素中制作文本

更薄更可怕。虽然它增加了阴影。与 DropShadow 相同。奇怪的是，对于元素来说，一切都很完美。我希望我可以发布图片。

如何使它看起来正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:23:47.190

这很可能是渲染问题。我遇到过类似的问题，字体在 Mac 上的 Safari/Chrome/FF 中看起来不错，但在 Windows 中太薄，尤其是 IE。这不是最好的解决方案，但是您是否尝试过增加字体粗细来弥补？我会尝试专门针对 IE 将其增加到 800 左右。

# facebook - Facebook。api。如何在用户的墙上发布照片

> ID：14504397
> 
> 赞同：2
> 
> 时间：2013-01-24T15:03:52.127
> 
> 标签：facebook, facebook-graph-api

我有疑问如何在用户的墙上张贴照片？我阅读了很多教程，但出现了问题。最后我做了什么，遵循本教程： http: [//www.masteringapi.com/tutorials/how-to-upload-a-photo-to-a-users-profile-using-facebook-graph-api/66/](http://www.masteringapi.com/tutorials/how-to-upload-a-photo-to-a-users-profile-using-facebook-graph-api/66/)

我已经为 publish_stream 设置了权限。我现在没有收到任何错误，只是没有在墙上张贴照片。$file 位置可能有问题...我不知道，如果可以，请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:36:58.163

*   确保 SDK 已正确加载。
*   您的应用需要`photo_upload`&`publish_stream`权限。
*   `$file`应该是图像的相对路径。即例如：/path/to/image/file
*   您传递的 POST 参数应该是`image`而不是`source`

所以现在最终版本应该是这样的（在你修复了上面的东西之后）：

```
<?php
require_once('images/Facebook.php');

  $facebook = new Facebook(array(
    'appId'  => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
  ));

  # Get User ID
  $user = $facebook->getUser();

  if ($user) {
    try {

      # Photo Caption
      $photoCaption = 'My Photo Caption!';

      # Relative Path to your image.
      $file = 'plaukai/images/PlaukaiNeuzvedus.jpg';

      # Post Data for Photos API
      $post_data = array(
          'message' => $photoCaption,
          'source' => '@' . realpath( $file )
      );

      $apiResponse = $facebook->api('/me/photos', 'POST', $post_data);

    } catch (FacebookApiException $e) {
      $user = null;
      error_log($e);
    }
  } else {
    $loginUrl = $facebook->getLoginUrl( array(
        'scope' => 'publish_stream,photo_upload'
    ));
    echo("<script>top.location.href = '" . $loginUrl . "';</script>");
  }
?> 
```

注意：我已经删除了 setAccessToken/getAccessToken，因为它们不需要这些，除非它们与其他代码一起使用，否则不需要它，因为`access_token`当您的应用程序进行任何 API 调用时，SDK 会自动传递当前用户。

希望对您有所帮助，如果您有任何问题，请告诉我。

PS我没有测试过上面的代码，但除非有任何其他问题，否则它必须工作。

**编辑1：**

也尝试以下解决方案之一：

解决方案1：

```
 # Photo Caption
  $photoCaption = 'My Photo Caption!';

  # Relative Path to your image.
  $file = 'plaukai/images/PlaukaiNeuzvedus.jpg';

  # Post Data for Photos API
  $post_data = array(
      'message' => $photoCaption,
      'image' => '@' . realpath( $file )
  ); 
```

解决方案2：

```
 # Photo Caption
  $photoCaption = 'My Photo Caption!';

  # Absolute Path to your image.
  $imageUrl = 'http://placehold.it/500x500/'; // Example URL

  # Post Data for Photos API
  $post_data = array(
      'message' => $photoCaption,
      'url' => $imageUrl
  ); 
```

**编辑2：**

这是您要求的代码：

```
$redirectUri = 'http://domain.com/myapp/';

$loginUrl = $facebook->getLoginUrl( array(
    'scope' => 'publish_stream,photo_upload',
    'redirect_uri' => $redirectUri
));

echo("<script>top.location.href = '" . $loginUrl . "';</script>"); 
```

# python - 在 Python 中捕获 vim 命令的输出

> ID：14504403
> 
> 赞同：1
> 
> 时间：2013-01-24T15:04:10.500
> 
> 标签：python, vim

我想捕获 Vim 命令 ( `:sign place`) 的输出，使用 vim 模块在 Python 中编写脚本。

我可以使用 执行命令`vim.command(...)`，但这不会返回命令的输出。我可以用 评估 vimL 命令`vim.eval(...)`，但这仅适用于变量和*函数*，不适用于命令。

我可以捕获此命令的输出的唯一方法是重定向到寄存器，然后评估寄存器的内容：

```
vim.command('redir @a')
vim.command('silent sign place')
vim.command('redir END')
command_output = vim.eval('@a') 
```

但这对于一个看似简单的任务来说似乎需要做很多工作。有没有更好的方法来做到这一点？

**注意：**这不是特定于示例命令的问题，`sign place`它对任何命令都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:16:02.213

目前没有更好的方法来从 Python 脚本捕获 Vim 命令的输出，除了重定向（到变量或缓冲区）然后评估其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:51:41.703

不幸的是，Vimscript 中的符号支持很少（根据我的[其他答案](https://stackoverflow.com/a/14503016/813602)）。我要做的是围绕`:redir`and编写一个 Vimscript 包装函数`:sign`，以及`vim.eval()`来自 Python 的那个。在该包装器中，您可以`:redir => var`使用局部变量，以免破坏寄存器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T01:18:02.447

[https://vi.stackexchange.com/a/13881/10254](https://vi.stackexchange.com/a/13881/10254)可能会感兴趣，基本上是**获取输入，然后运行命令，捕获并放置**。虽然在 vimscript 函数中，而不是在 python 中， `Capture(excmd)` `PutAfterCapture(command)` `GetInputCommandThenCaptureAndPut()`

摘抄：

```
func!  abort  " from tpope's scriptease.vim
try
    redir => out
    exe 'silent! '.a:excmd
finally
    redir END
endtry
return out
endfunc 
```

# javascript - 自定义 jquery 模型窗口

> ID：14504411
> 
> 赞同：0
> 
> 时间：2013-01-24T15:04:45.940
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我已经习惯了获取 jquery 对话框，它也可以正常工作，但我不想让用户选择关闭它，因为我务实地关闭了它。

以下是弹出对话框的代码

```
<div id="emailNotification" title="Email Notification">
                                                <p>Please Wait Email is being sent....</p>
                                                      </div> 
```

这就是我关闭的方式；

```
$("#emailNotification").dialog('close'); 
```

![以下是对话框](../Images/e1ba5b8068c91307ced9f721364b63eb.png)

右侧有一个我不想要的关闭选项，如何在 jquery 中禁用它。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:07:47.907

我过去这样做的方式是覆盖 CSS jQUery-UI 声明以隐藏关闭按钮。通过对特定 CSS 进行子类化，您可以创建单独的实例，这些实例要么需要关闭按钮，要么不需要。

在我的脑海中，我认为特定的 CSS 看起来像这样......

```
.ui-dialog .ui-dialog-titlebar-close {
    display: hidden;
} 
```

类似地，对 jQuery-UI CSS 有透彻的了解还可以让你自定义对话框、选项卡等的“外观”，从而可以使用不同的样式、添加背景图像等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:29:26.370

感谢您的所有评论和答案。

以下解决了我的问题。

```
 $("#emailNotification").dialog({
        closeOnEscape: false,
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); }
}); 
```

# java - java 文档的文档参考警告

> ID：14504412
> 
> 赞同：1
> 
> 时间：2013-01-24T15:04:57.347
> 
> 标签：java, javadoc

以下是我的一种方法的 Java Doc。但是[JDeveloper](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)`@see`正在为该部分发出警告消息

```
 /**
     * Clears the selections on all the tables containig view sub types except the currently selected one
     * @param exceptControl index of the sub type table whose selection needs to be preserved
     * @see ViewSubTypeHandler#clearSubTypeTableSelection()
     */

Warning : Doc reference clearSubTypeTableSelection not found. 
```

这是什么警告信息，我该如何解决？

这是引发警告的方法的代码：

```
 private void clearSubTypeTableSelection(boolean resetAll, int exceptControl) {
        if (!resetAll) {
            clearAllExceptCurrent(exceptControl);
        } else {
            clearAll();
        }

    } 
```

这是有问题的javadoc的方法：

```
private void clearAllExceptCurrent(int exceptControl) {
    for (int i = 0; i < SUBTYPE_TABLES; i++)
        if (i != exceptControl && getSubTypeTable(i).getSelectedRowKeys() != null) {
            RichTable richTable = getSubTypeTable(i);
            RowKeySet rowkeySet = richTable.getSelectedRowKeys();
            rowkeySet.clear();
            AdfFacesContext.getCurrentInstance().addPartialTarget(richTable);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:04:53.330

你的方法是`clearSubTypeTableSelection(boolean resetAll, int exceptControl)`

不是`clearSubTypeTableSelection()`

您必须指定参数（类型）：

```
 * @see ViewSubTypeHandler#clearSubTypeTableSelection(boolean, int) 
```

# phpmyadmin - xampp的phpmyadmin安装出错

> ID：14504414
> 
> 赞同：0
> 
> 时间：2013-01-24T15:05:08.383
> 
> 标签：phpmyadmin, xampp, failed-installation

我已经安装了具有以下规格的 mysqlserver 5.5 版： 在安装时端口被指定为 3306。这里没问题，它工作正常。之后我安装了 xampp version-1.7.3。安装完成后，xampp 控制面板打开，默认启动 mysql 服务，并且默认选中了针对 mysql 服务的复选框，如本视频所示[单击此链接并观看 3:37 minuits 的视频][1]`-->username:system
-->password:system`

[1]：[http](http://www.youtube.com/watch?v=gH1i7o6i52I) ://www.youtube.com/watch?v=gH1i7o6i52I 。和 apache 服务运行良好。但我的问题是，当我打开 localhost/phpmyadmin 时，它会显示如下错误

```
error: 'Access denied for user 'root'@'localhost' (using password: NO)'. 
```

我不知道为什么会这样。请提供任何解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:30:15.370

你看过安全设置吗？

本地主机/安全

本地主机/安全/xamppsecurity.php

如果您看过这个，您是否更改了您正在创建的网站中的连接字符串？根据您的描述，您所做的网站中的身份验证失败了。

# c++ - 使用 libtool 链接静态库

> ID：14504417
> 
> 赞同：1
> 
> 时间：2013-01-24T15:05:10.453
> 
> 标签：c++, linux, static-libraries, libtool

如何将静态库`(.a)`与 libtool 链接？

我正在创建一个使用三个 RSA`mod_shib_22.so`库`libcertc.a`的Apache模块`libcertcsp.a`（`libbsafe.a``-lcertc -lcertcsp -lbafe`

```
./apachectl -k stop httpd: Syntax error on line 426 of /usr/local/apache2/conf/httpd.conf:
Cannot load /usr/local/lib64/shibboleth/mod_shib_22.so into server:  /usr/local/lib64/shibboleth/mod_shib_22.so: undefined symbol: T_GetDynamicList 
```

我在 Makefile 中使用这些行：

```
LDFLAGS = -L../../libraries/Crypto-C-6.4.0.3/lib/linux_lsb30_x86_64 -L../../libraries/Cert-C-2.9.0.0/lib/LinuxLSB30_x86_64/release_mt
LIBOBJS = 
LIBS = -lxerces-c -L/usr/local/lib64 -llog4shib -lnsl -lcertc -lcertcsp -lbsafe -ldl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:49:23.990

将 DSO（在这种情况下为 Apache 模块）与静态库链接并不能保证有效，并且可能无法正常工作，具体取决于静态库中对象的构建方式。通常静态库中的对象不是在启用[位置无关代码](http://en.wikipedia.org/wiki/Position-independent_code)的情况下构建的，但 DSO*需要*位置无关代码。

# amazon-ec2 - 我可以将运行 Windows 2008 SP2 的 EC2 实例升级到 Windows 2008 R2 吗？

> ID：14504420
> 
> 赞同：1
> 
> 时间：2013-01-24T15:05:17.283
> 
> 标签：amazon-ec2, windows-server-2008

我在 Amazon EC2 中有一个运行 Windows 2008 SP2 的实例。我可以将它升级到 Windows 2008 R2，还是 EC2 架构会阻止我升级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:22:44.633

我找不到 100% 测试过的答案，但我确实看到亚马逊的一些官方回复不是这个问题。他们的回答好坏参半。2011 年 4 月：“否”，2012 年 11 月：“是”。

论坛主题：[https ://forums.aws.amazon.com/thread.jspa?messageID=235938馢](https://forums.aws.amazon.com/thread.jspa?messageID=235938&#235938)

1.  绝对可行：使用新的操作系统版本启动一个全新的服务器，然后迁移所有内容。
2.  据说可以工作：获取 Windows 媒体并运行安装 -[来自 JonathanS 的 2012 年 11 月 8 日评论](https://forums.aws.amazon.com/thread.jspa?messageID=235938&#398613)。

媒体位于快照中（搜索所有 Amazon 快照或查看[Amazon 的列表](http://aws.amazon.com/articles/1802?_encoding=UTF8&queryArg=searchQuery&fromSearch=1&searchPath=all&searchQuery=media%20snapshots)），您可以从那里将其作为卷挂载。

# c++ - 使用 C++ 解析 EXI

> ID：14504421
> 
> 赞同：1
> 
> 时间：2013-01-24T15:05:19.170
> 
> 标签：c++, c, xml, exi

我需要一些与 C++ 一起使用的东西，它可以解析 EXI 格式的消息。我对解决方案的形式并不挑剔。这可能是一个类似 Xerces 的库，一组类似 rapidxml 的头文件，甚至是一个离线“编译器”，它接收 XSD 文件并根据内容创建 C/C++ 源。

这*不可能*是任何形式的 Java 解决方案。我遇到过 EXIficient 和 OpenEXI，它们都是基于 Java 的解决方案，不适合我的情况。我在嵌入式环境中工作，我们不会拥有 JVM 的“*奢侈*”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:21:09.500

可用的 EXI 解析器并不多。

您可以尝试使用商业但稳定的： [http ://www.agiledelta.com/product_efx-me.html](http://www.agiledelta.com/product_efx-me.html)

或者 EXIP 也不错，但处于 alpha 阶段： [http ://exip.sourceforge.net/](http://exip.sourceforge.net/)

根据您的实施规范，您使用这些应用程序的里程可能会有所不同。

# c++ - 指向已分配对象的指针没有值语义这是什么意思？

> ID：14504423
> 
> 赞同：2
> 
> 时间：2013-01-24T15:05:21.607
> 
> 标签：c++

我正在阅读 Andrei 的 Modern C++ Design，其中提到

```
"Pointers to allocated objects does not have a value semantics" 
```

对于值语义示例，提到“int”是完美的。所以

```
int x = 200, y;
y = x; 
```

**我的问题？**

1）要考虑的参数是什么，以便我可以声称它是“值语义”。？2）为什么指向对象的指针不声称是“价值语义”。

**我明白了什么？**

如果您不能将变量复制到与原始变量完全不同的另一个变量，那么这就是“值语义”。

如果我的理解有误，请纠正我？并提供一些简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:10:18.717

引用似乎断章取义。

普通指针确实具有值语义：

```
char const *x = "x", *y;
y = x; 
```

这些是没有值语义的 C++ 引用。它们可以被初始化但不能重新分配。

引用可能是指函数参数传递：函数的参数可以通过值（复制）或引用传递。在这种情况下，通过引用意味着通过指针传递或接受引用。在这种情况下，通过引用传递的对象没有值语义，即没有完成对象的副本，并且函数对对象所做的所有更改在函数返回时都是可见的。但是，从某种意义上说，所有函数参数都是副本：调用者提供的参数被复制到被调用函数的堆栈帧中（或作为优化传递到寄存器中）。通过引用传递基本上意味着传递对象的地址（通过指针或引用）。无论一个地址复制多少次，它仍然指向同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:11:55.597

短语“值语义”被广泛使用，但通常定义比较松散。我认为 Scott Meyers 的定义与任何人一样好：“​​像整数一样做”。

换句话说，具有值语义的对象是您可以将其视为 int 的对象，如果您这样做，它通常不会做任何令人惊讶的事情。复制、赋值、适用的运算符等等，都是“正常工作”。您创建的每个“事物”都独立于任何其他“事物”，因此（例如）`x + y`不会`x`像您使用过的那样发生变化（例如`x += y`，一个（完全不）公平数量的字符串类已经完成）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:44:23.283

[Stepanov](http://www.stepanovpapers.com/DeSt98.pdf)给出了以下值语义的定义（他称之为常规类型）

```
T a = b; assert(a == b); // 1
T a; a = b; assert(a == b); // 2
T a = c; T b = c; a = d; assert(b == c); // 3
T a = c; T b = c; zap(a); assert(b == c && a != b); // 4 
```

即，具有值语义的类型是 DefaultConstructible、CopyConstructible、Assignable 和 EqualityComparible（属性 1 和 2）。此外，

> `c`在为`a`和分配相同的值之后`b`，我们希望能够在`a`不更改`b`(property 3) 的值的情况下进行修改。if`zap`是一个总是改变其操作数的值的操作，我们期望`b`并且`c`不会仅仅因为它们的值随着 's 一起改变而继续相等`a`，而是因为改变`a`'s 的值并没有改变它们的值（属性 4）。

具有引用语义的类型可以遵循 1 和 2，但不能遵循 3 和 4（即修改指向或引用相同值的多个对象之一，会影响所有对象）。

所有内置类型都遵循值语义并且修改是本地化的。这使得它们例如非常适合纯函数和并行编程。使用引用语义（例如具有虚拟功能的对象），更改不再是本地化的。

```
T* a = c; T* b = c; a = d; assert(b == d); // 5
T* a = c; T* b = c; zap(a); assert(b != c && a == b); // 6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T15:14:37.910

在此处查看[价值语义](http://www.parashift.com/c++-faq/val-vs-ref-semantics.html)。

换句话说，指向对象的指针（或引用）不是一个新的唯一对象，而是指针指向您让它指向的原始对象。因此，您必须小心使用指针，以确保您知道您所指向的内容以及如果您修改指针所指向的内容会发生什么变化。

相反，我们不能一直完全使用“值语义”（至少在 C 中），因为您无法编写修改传入值内容的函数——这有时会很方便......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T15:14:42.457

值语义意味着，如果你设置`a = b`了那么 a 是 b 的副本，具有相同的值但与 b 分离，因此如果你之后 b，a 仍然包含 b 的原始值：

```
int a, b = 5;
a = b; //a is 5 now
b = 7; //a is still 5!

//in contrast to pointers:
int* pb = new int(5);
int* pa = pb; //*a is 5 now
*pb = 7; //*a is not 5 any more, it's 7! 
```

在该示例中， a 和 b 没有分离，因此没有值语义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T15:11:33.583

你的理解是正确的。这是一个例子：

```
string* str_rptr = new string("hello");
string* str2_rptr = str_rptr;
str2_rptr->replace(0,5,"goodbye");

std::cout << *str_rptr << std::endl; 
```

该片段的输出将打印“再见”而不是“你好”。在您给出的“完美 int”示例之后，此代码：

```
y = 400;
std::cout << x << std::endl; 
```

将打印出“200”。重要的一点是，复制一个变量不会阻止对一个变量的更改改变另一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T18:46:36.187

对于您的问题，我能找到的最简洁的解释是：“值语义意味着对复制/克隆的修改不会影响原始对象”。指针显然违反了这一点。不是它们本身（因为您可以轻松地复制指针而不损害其他指针）本身，而是它们指向的对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-24T15:52:59.400

这里的大多数答案都混淆了“指针”和“指针指向的对象”。指针具有值语义：如果将一个指针复制到另一个指针，则修改第一个**指针**，第二个指针不变。

# c# - 对 web 服务的批量查询返回“Uri 字符串太长”

> ID：14504424
> 
> 赞同：1
> 
> 时间：2013-01-24T15:05:23.430
> 
> 标签：c#, web-services, http-post, wcf-data-services, http-get

我正在尝试向服务器发送大请求并获取大数据。所以我对数据服务使用批处理请求。此请求的 URI 类似于“hxxp://company/Test.svc/$batch”。我正在使用.Net 4.0

我发送有效的 POST 请求：

```
DataServiceRequest[] Request = new DataServiceRequest[]{new DataServiceRequest<TTable>((query).RequestUri)};
try
{
    DataServiceResponse dsr = WebService.ExecuteBatch(Request);
    foreach (QueryOperationResponse qr in dsr)
    {
        if (qr.Query.ElementType == typeof(TTable))
        {
            foreach (TTable item in qr) { list.Add(item); }
        }
    }
} 
```

并收到一条错误消息：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code></code>
  <message xml:lang="ru-RU">An error occurred while processing this request.</message>
  <innererror>
    <message>Invalid URI: The Uri string is too long.</message>
    <type>System.UriFormatException</type>
    <stacktrace>   at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)&#xD;
   at System.Uri..ctor(String uriString, UriKind uriKind)&#xD;
   at System.Data.Services.RequestUriProcessor.GetAbsoluteUriFromReference(String reference, Uri absoluteServiceUri)&#xD;
   at System.Data.Services.BatchServiceHost..ctor(Uri absoluteServiceUri, BatchStream batchStream, String contentId, String boundary, StreamWriter writer)&#xD;
   at System.Data.Services.DataService`1.BatchDataService.CreateOperationContextFromBatchStream(Uri absoluteServiceUri, BatchStream batchStream, HashSet`1 contentIds, String boundary, StreamWriter writer)&#xD;
   at System.Data.Services.DataService`1.BatchDataService.HandleBatchContent(Stream responseStream)</stacktrace>
  </innererror>
</error> 
```

似乎是服务器端异常，在尝试解析大 uri 时发生。如何避免这种限制？

**已修改（2013 年 1 月 28 日 16:00）**

IIS配置：

```
<?xml version="1.0"?>
<configuration>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="500000000" maxQueryString="209715000" maxUrl="2000000"></requestLimits>
      </requestFiltering>
    </security>
    <directoryBrowse enabled="true"/>
    <httpErrors errorMode="Detailed"/>
    <caching enabled="false" enableKernelCache="false"/>
  </system.webServer>
  <system.web>
    <httpRuntime executionTimeout="4800"
      maxQueryStringLength="2097150" 
      maxUrlLength="2097150"
      relaxedUrlToFileSystemMapping="true"
       maxRequestLength="500000000"
      requestValidationMode="4.0"/>
    <customErrors mode="Off"/>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:37:20.077

如果您使用的是 IIS，我相信您可以通过转到请求过滤 > 编辑功能设置 > 最大 URL 长度来增加最大 URL 大小。

以下指南应该可以进一步帮助您：[http ://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)

# php - SF2 应用程序崩溃 app_dev 工作

> ID：14504425
> 
> 赞同：2
> 
> 时间：2013-01-24T15:05:27.367
> 
> 标签：php, symfony

我正在研究 Symfony2 下的一个项目。该项目实际上是由OVH在线托管的。在这台服务器上一切都很好。但是，我们现在正在更换主机。我正在尝试配置新主机。

我设置了一切（SF2 工作，mysql，apache 也是）。当我启动 web/app.php 时，页面空白，等我收到这些错误（在 /var/log/apache2/error.log 上）

```
[Thu Jan 24 15:35:24 2013] [error] [client 31.39.43.247] PHP Warning:  mkdir(): Permission denied in /var/www/carpediese/app/cache/prod/classes.php on line 417
[Thu Jan 24 15:35:24 2013] [error] [client 31.39.43.247] PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'The stream or file "/homez.577/carpedief/app/logs/prod.log" could not be opened: failed to open stream: No such file or directory' in /var/www/carpediese/app/cache/prod/classes.php:9762\nStack trace:\n#0 /var/www/carpediese/app/cache/prod/classes.php(9691): Monolog\\Handler\\StreamHandler->write(Array)\n#1 /var/www/carpediese/app/cache/prod/classes.php(9587): Monolog\\Handler\\AbstractProcessingHandler->handle(Array)\n#2 /var/www/carpediese/app/cache/prod/classes.php(9831): Monolog\\Handler\\AbstractHandler->handleBatch(Array)\n#3 /var/www/carpediese/app/ache/prod/classes.php(10113): Monolog\\Handler\\FingersCrossedHandler->handle(Array)\n#4 /var/www/carpediese/app/cache/prod/classes.php(10229): Monolog\\Logger->addRecord(500, 'InvalidArgument...', Array)\n#5 /var/www/carpediese/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/EventListener/ExceptionListener.php(55): Monolog\\Logger->crit('InvalidArgument...')\n#6 [internal function]: Symfony\\Component\\HttpKer in /var/www/carpediese/app/cache/prod/classes.php on line 9762 
```

我真的不知道错误是什么。哪些文件会产生错误？日志中提到的所有文件似乎都是缓存文件......我不知道 /homez.577 是什么......

app_dev 工作得很好，无论是在 OVH 服务器上还是在新的。

你有什么想法吗？

编辑

我做了chmods。现在我在 apache2 日志上没有更多错误。但是（因为总是有一个但是），当我加载 app.php 时，页面仍然保持空白。我尝试用你给我的命令清理缓存，这就是答案。

编辑²

所以我找到了解决方案。我仍然无法使用命令清理缓存，但我做了一个 rm -Rf app/cache

它的工作非常好。谢谢你，伙计！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:19:04.397

问题似乎是您的文件夹的权利。

尝试：（您必须位于项目的根目录中）

```
chmod -R 777 app/cache

chmod -R 777 app/logs 
```

如果它仍然不起作用，请添加：

```
php app/console cache:clear 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T04:49:38.743

只是为了下一个人，要清除您的生产缓存，请使用以下命令：

```
php app/console cache:clear --env=prod --no-debug 
```

# ios - iOS 上的 jQueryMobile + PhoneGap 不会对 ajax 加载的内容应用标记

> ID：14504428
> 
> 赞同：0
> 
> 时间：2013-01-24T15:05:31.300
> 
> 标签：ios, cordova, jquery-mobile

我有一个使用 jquerymobile + phonegap 创建的移动应用程序。安卓版本很好用。我为 iOS 版本使用了相同的 html + css + javascript 文件。当我在 XCode iPhone 6.0 模拟器中运行该应用程序时，所有 jquery 移动元素都没有样式，并且在带有搜索的列表视图的情况下，搜索不起作用。就好像 jquery 移动插件没有运行一样。

我使用 ajax 加载内容，然后在父页面元素上触发“创建”。

这是 index.html 页面的一部分。在页面的头部，我加载了 jquery、jquery mobile js 和 css：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=medium-dpi" />
    <link rel="stylesheet" type="text/css" href="css/themes/mobiletheme.min.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.2.0.min.css" />
    <title>App Name</title>
    <script type="text/javascript" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/myown.js"></script>        
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>        
    <script type="text/javascript">
        app.initialize();
    </script>
</head>
<body>
<div data-role="page" id="thepage">
   <div data-role="header">Header code here</div>
   <div data-role="content" id="thecontent">
       Content is loaded here using ajax
   </div>
   <div data-role="footer">Footer code here</div>
</div>
</body> 
```

这是使用 ajax 加载内容并触发创建的 javascript 部分：

```
$.ajax({
     url: 'http://www.thedomain.com/thepage.php',
     dataType: 'html',
     type: 'GET',
     success:function(data, textStatus, xhr){
        $("#thecontent").html(data);
        $("#thepage").trigger('create');
     }
}); 
```

这在 Android 中运行良好。但在 iOS 中，就好像 trigger('create') 什么也没做。

有没有人经历过这样的事情？任何关于如何解决它的想法将不胜感激。

谢谢。

# windows - 我们可以使用 SQlite 发布 Windows 商店应用吗

> ID：14504430
> 
> 赞同：0
> 
> 时间：2013-01-24T15:05:38.663
> 
> 标签：windows, sqlite, windows-8

我们可以将包含 SQLITE 服务器的 Windows 8 应用商店应用成功发布到商店吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:35:43.317

是的你可以。自春季发布版本以来，它完全支持 WinRT。在此处查看 VSIX 安装程序包：http: [//sqlite.org/download.html](http://sqlite.org/download.html)

# php - 在 Ubuntu 上安装 PHP 扩展

> ID：14504431
> 
> 赞同：1
> 
> 时间：2013-01-24T15:05:42.027
> 
> 标签：php, ubuntu, php-extension

我一直在尝试使用 sudo apt-get install php5-curl 安装 curl 扩展。但不断收到以下错误消息

```
Err http://archive.ubuntu.com/ubuntu/ lucid-updates/main php5-curl 5.3.2-1ubuntu4.17
404  Not Found 
Err http://security.ubuntu.com/ubuntu/ lucid-security/main php5-curl 5.3.2-1ubuntu4.17
404  Not Found 
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/p/php5/php5-curl_5.3.2-1ubuntu4.17_amd64.deb  404  Not Found 
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

我尝试运行 php -i | grep curl 检查 curl 是否已经安装但得到
-bash: php: command not found

我想我必须安装 php5-cli 扩展，尝试这样做也导致以下错误

```
Err http://archive.ubuntu.com/ubuntu/ lucid-updates/main php5-cli 5.3.2-1ubuntu4.17
404  Not Found
Err http://security.ubuntu.com/ubuntu/ lucid-security/main php5-cli 5.3.2-1ubuntu4.17
404  Not Found 
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/p/php5/php5-cli_5.3.2-1ubuntu4.17_amd64.deb  404  Not Found 
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:22:59.473

你能ping通`security.ubuntu.com`吗？

如果是这样，请尝试以下顺序：

```
sudo apt-get update --fix-missing
sudo apt-get update
sudo apt-get install php5 php5-cli 
```

# python - 从网页执行命令行 python 脚本的最简单方法

> ID：14504437
> 
> 赞同：0
> 
> 时间：2013-01-24T15:05:59.037
> 
> 标签：python, web, python-2.7

我有一个可以从命令行运行的 python 脚本。而不是人们从命令行运行脚本并知道哪些参数去哪里，我希望他们去网页并选择选项，然后从网页运行脚本。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:36:29.177

最简单的方法是为您的网络服务器使用 CGI 插件来处理 python 脚本。

# python - 未定义变量：SerialException

> ID：14504438
> 
> 赞同：4
> 
> 时间：2013-01-24T15:06:00.393
> 
> 标签：python, exception, exception-handling, serial-port, pyserial

我正在使用 pySerial 库从 Arduino 获取 Python 脚本日志数据。当脚本无法连接到您提供的端口时，我正在尝试处理 SerialException，并且 Eclipse 显示“未定义变量：SerialException”。有什么我忘记导入的吗？

代码：

```
try:
    ser = serial.Serial(port, 9600)
    connected = 1
except SerialException:
    print "No connection to the device could be established" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T15:10:20.417

你可能想要：

```
except serial.SerialException:
   ... 
```

在 python 中，`Exception`s 是派生自`Exception`. 因此，当一个模块/包定义它自己的自定义异常时，它们通常会[像其他类/函数一样被导入到模块/包的命名空间中](http://pyserial.sourceforge.net/pyserial_api.html#serial.SerialException)。这就是说，放一个：

```
from serial import SerialException 
```

在您文件的顶部可能也可以解决问题。

# ruby - Rails + XMPP 机器人在后台

> ID：14504441
> 
> 赞同：5
> 
> 时间：2013-01-24T15:06:12.697
> 
> 标签：ruby, ruby-on-rails-3, xmpp, resque, xmpp4r

我正在构建一个服务，它基本上允许用户与机器人聊天，然后机器人对用户发送的聊天进行一些奇怪的处理，并最终回复一些有意义的数据。基本上类似于 Aardvark 使用 (?) 工作的方式。

我的机器人正在工作，现在正在收听，我有一个单独的 Rails 应用程序，它将完成所有其他繁重的工作。这两个部分单独工作都很好，现在我被困在两者的接口上。我的想法是通过 Resque 将机器人（基本上是一个小的 ruby​​ 脚本）与 rails 应用程序接口 - 任何进入的东西都会进入队列，被拾取，然后将结果再次推回队列，然后脚本会回复结果。

这个接口怎么建立我不是很清楚：

1.  我是否需要编写一个 rake 任务来启动/停止/重新加载机器人
2.  如果我在没有 rake 的情况下运行它（假设是一个由 Monit 监控的独立进程），那么我如何与 Resque 交互或访问我的 rails 模型？

我知道这些可能是非常微不足道的问题，但我很难理解哪个效果更好，以及如何进行设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:46:09.507

在 Rails 应用程序和这个 bot 守护程序之间可以通过三种方式进行通信：

1.  通过将 Rails 应用程序作为 HTTP 请求调用（从 Rails 应用程序推送/拉取数据）
2.  通过直接与 Rails 应用程序使用的数据库交互（可能是 Mysql/Postgres）
3.  通过与 Redis 数据库支持的 Resque 工作队列系统交互

当您将 Resque 作业排入队列并将其从各种作业队列中拉出时，您只是通过 API 读取/写入共享的 Redis 数据库。机器人和 Rails 应用程序都通过网络与 Redis DB 通信。

我建议直接将机器人作为 ruby​​ 进程或由 monit 管理的 rake 任务运行。听起来您已经知道如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T04:36:41.913

我认为这里的主要问题是您需要另一种消息传递解决方案（类似 IPC，而不是 IM），而不是试图弯曲“只是”一个队列的 Resque。其中一些选项是[amqp gem](http://rubyamqp.info)（AMQP 协议）或[zmq gem](https://github.com/zeromq/rbzmq)（ZeroMQ 协议），但您也可以通过 Ruby 标准库 Socket 类（[很好的示例](http://www.jstorimer.com/2012/04/19/intro-to-ruby-ipc.html)）使用普通的旧 UNIX 套接字。它们都有不同的优点和缺点，所以这取决于你和你的需求。

交互可能如下所示：

1.  机器人启动。
2.  Bot 开始侦听 IPC 消息。
3.  Bot 接收来自发件人的查询（通过 XMPP）。
4.  Bot 通过 Resque 对作业进行排队。
5.  Job 通过 HTTP 调用 Rails 应用程序。
6.  Rails 应用程序完成了它的工作。
7.  某人或某事解决了任何查询并通过 Rails 应用程序输入结果。
8.  Rails 应用程序使用某种 IPC 方法将结果发送到机器人。
9.  Bot 将结果发送给原始发件人（通过 XMPP）。

可以像往常一样进行一些更改。例如，我认为您根本不需要 Resque。机器人可以简单地将请求立即传递给 Rails 应用程序。但是，这取决于负载、您想要实现的响应时间、您当前的架构等。也许 Resque 作业可以等待 Rails 应用程序返回结果，然后该作业（而不是 Rails 应用程序）将使用 IPC。还有其他变体……</p>

> 我是否需要编写一个 rake 任务来启动/停止/重新加载机器人

不，你没有。如何以及何时运行它取决于您。毕竟，Rake 可以被视为将多个 Ruby 脚本放在一起并在它们之间创建依赖关系的便捷方式。如果您认为除了运行机器人之外还有其他任务（一些清理、部署等），那么为了方便起见，使用 Rake 会很好。如果您还没有，请将机器人的逻辑重构为类并使用 Rake 任务对其进行初始化。但是，如果您离开它也可以，只需按原样运行您的脚本（使用 monit、您的自定义 init.d 脚本、ad-hoc 等）。

> 如果我在没有 rake 的情况下运行它（假设是一个由 Monit 监控的独立进程），那么我如何与 Resque 交互或访问我的 rails 模型？

Rake 对此没有任何影响。从操作系统的角度来看，如果您通过 Rake 运行 Resque 并通过 Rake 运行您的机器人或作为独立脚本运行，这并不重要。无论如何，它们将是不同的过程。另外，请记住，Resque 需要 Redis 在某个地方运行。

> 我知道这些可能是非常琐碎的问题

一点也不。我认为需要一些时间才能将诸如此类的问题视为微不足道的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T11:02:54.467

你可以把你的代码放在一个初始化器上运行，并且可以完全访问你所有的 Rails 模型或库。

这样，您就不需要在您的机器人和您的 Rails 应用程序之间“通信”，因为您的机器人在您的 Rails 应用程序中。

样板代码如下：

配置/初始化程序/background_app_tasks.rb

```
class BackgroundWorker

      #-------------------------------
      def initialize(operation='normal')
        @exit = false
        @lock = Mutex.new  # For thread safety
        @thread = nil
        say "Starting in '#{operation}' mode..."
        case operation
          when 'normal'
            @thread = Thread.new() {    loopme     }
          when 'cleanup'
            @thread = Thread.new() {    cleanup     }
          when 'nothing'
            #startup without threads
        end
        @thread.run if @thread
      end

      #-------------------------------
      def exit!
        begin
            return if @exit # #stop?
            say   "Exiting #{}, waiting for mutex..."
            @lock.synchronize {
                say "exiting thread #{@thread.to_s || '<sem nome>' }..."
                @exit = true # #stop
            }
        rescue Exception => e
            exceptme(e)
        end
      end

      #-------------------------------
      def loopme

        at_exit { exit! }
        i=0;  ok=false;

        nap = 30

        while true do
          begin
              break if @exit
              i+=1

              #lock mutex for processing...
              @lock.synchronize {

                  #.... do some work ....

              }
          rescue StandardError => e

              #....

          end

          sleep(nap)
        end 
      end

end #class

# ------ M A I N --------

Thread.abort_on_exception=false
e = BackgroundWorker.new(OPERATION) 
```

# python - Linux 上的 Python 网络编程 - 在客户端同时使用两个网络接口？

> ID：14504445
> 
> 赞同：0
> 
> 时间：2013-01-24T15:06:20.300
> 
> 标签：python, networking, interface

目前我的客户端上有两个网络接口。我创建了两个单独的套接字，它们绑定到每个接口 ip。现在我还有两台服务器，每台都与客户端上的一个套接字通信。我希望能够同时从两个接口（当前使用 UDP 或 DGRAMS）接收数据（现在约 10MB，但以后会更大），但由于某种原因，总是存在延迟，因为它必须用一个来完成数据传输在它开始在另一个套接字上传输之前。

我已经确认绑定每个接口都是成功的，并且我能够在每个套接字上与其各自的服务器进行通信。目前我只是在同一个代码块内`s1.recv()`执行。`s2.recv()`

所以我的问题是，延迟是由于 using 的“阻塞”功能`recv()`吗？另外通过我的搜索，似乎有办法使该功能解除阻塞？但我不确定如何去做……这会通过使用多线程来解决吗？我对多线程有点生疏，但如果它解决了我的问题，我会调查它。如果没有，那么我如何利用这两个接口，因为我能够从两个接口并行接收/发送？

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:20:36.533

该`recv`功能默认为阻塞。这意味着该方法将停止控制流，直到在此套接字上接收到某些内容。如果你调用`sock1.recv()`then `sock2.recv()`，第二个调用只会在套接字 1 接收到东西时到达。

您可以使用该`setblocking`方法进行`recv`非阻塞，使其立即返回，即使没有可接收的内容。但是，您可能必须轮询两个套接字以获取要读取的新字节：

```
s1.setblocking(False)
s2.setblocking(False)

while True:
    # In non-blocking mode, recv throws a socket.error when
    # there is nothing to receive.
    try: a = s1.recv()
    except socket.error: a = None

    try: b = s2.recv()
    except socket.error: b = None

    handle_data(a,b) # Use received bytes at your discretion 
```

`recv`您可以使用[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)or[`threading`](http://docs.python.org/2/library/threading.html)模块并行化这两个调用：

```
class SocketThread(threading.Thread):
    def run():
        while True:
            a = self.sock.recv() # This time, recv in blocking mode
            handle_data(a)

t1, t2 = SocketThread(), SocketThread()
t1.sock = sock1
t1.start()

t2.sock = sock2
t2.start() 
```

# ios - UITableViewCell 框架高度始终为 44px

> ID：14504448
> 
> 赞同：5
> 
> 时间：2013-01-24T15:06:29.617
> 
> 标签：ios, objective-c, uitableview, ios6, heightforrowatindexpath

我正在使用 heightForRowAtIndexPath: 方法返回 100 设置单元格的高度。但在 cellForRowAtIndexPath 方法中，单元格的框架高度始终为 44px。

以下是我的代码。

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 100;
}

- (int) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    [cell setBackgroundColor:[UIColor redColor]];
    [cell.contentView setBackgroundColor:[UIColor redColor]];
    cell.textLabel.text = [NSString stringWithFormat:@"%d", indexPath.row];
    NSLog(@"%f %f", cell.frame.size.height, cell.contentView.frame.size.height);
    return  cell;
} 
```

NSLog 语句打印“44px 44px”。

我可以使用此语句获得正确的高度

```
CGFloat height = [tableView heightForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T15:08:59.877

分配单元格时不会调用您的委托方法。`initWithStyle`除非您在子类中覆盖它，否则总是返回高度为 44 的单元格。

# php - 具体5仅限制文件所有者的文件访问权限

> ID：14504449
> 
> 赞同：0
> 
> 时间：2013-01-24T15:06:36.260
> 
> 标签：php, file-permissions, concrete5

我的具体5 网站对组织的一些有限成员开放。每个组织成员都根据其在组织中的部门分配到一个用户组。我授予他们（确切地说是他们的用户组）添加他们自己的特殊内容的权限，当然他们也被允许在他们自己的页面上上传和附加他们自己的图像/文件。

现在，关于这些图像/文件，我不希望他们能够访问所有以前上传的文件（任何人）。他们只能访问属于他们（或至少属于他们的用户组）的文件。

最新的 Concrete5 (5.6) 具有为每个文件设置权限的通用能力。但这并不是我想要的。为所有文件一一设置权限是不切实际的。我希望一切都自动设置。因此，当他们上传文件时，该文件权限会自动分配，仅供他们访问，除了超级管理员之外，其他用户都不能访问他们的文件。

[这是](http://www.concrete5.org/community/forums/customizing_c5/file-manager-permissions/)我得到的关于这个问题的最接近的论坛讨论，但不幸的是，讨论最终没有真正的解决方案。

我应该怎么做才能获得这个功能？具体5真的有这个功能吗？如果没有，是否有某种附加功能与此功能？或者如果我应该亲自修改concrete5核心代码，我应该从哪里开始？我可以覆盖哪些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:43:23.777

我自己挖了concrete5核心代码，经过多次测试，我找到了解决方案

实现这一点的最简单方法是添加更多 if 条件`elements\files\search_results.php`

按照覆盖结构，复制`\concrete\elements\files\search_results.php`到`elements\files\search_results.php`

这个文件被concrete5用来在文件管理器上显示文件列表（基于搜索条件）。去看看代码，你会知道根据自己的要求在里面编辑什么。

就我而言，我在 foreach 循环中添加了这个条件

```
$u = new User();

if($u->inGroup(Group::getByName("Administrators")) || $u->getUserName() == "admin" || 
$f->getUserID() == $u->getUserID()){
    $pf = new Permissions($f);
    if (!isset($striped) || $striped == 'ccm-list-record-alt') {
         $striped = '';
    } else if ($striped == '') { 
        $striped = 'ccm-list-record-alt';
    }
    $star_icon = ($f->isStarred() == 1) ? 'star_yellow.png' : 'star_grey.png';
    $fv = $f->getApprovedVersion(); 
    ... cut ...
    <?php  } ?>

    </tr>
    <?php 
} ?> 
```

# python - Python 的 xmlrpc 非常慢：每次调用一秒钟

> ID：14504450
> 
> 赞同：12
> 
> 时间：2013-01-24T15:06:37.313
> 
> 标签：python, xml-rpc, xmlrpclib, simplexmlrpcserver

根据 Python 文档中的示例，我使用 SimpleXMLRPCServer 在 Python 中构建了一个 xml-rpc 服务器。我从同一台机器上的 Python 客户端调用它。服务器函数的主体自行执行非常快。

但是我发现 xmlrpc 客户端的性能非常慢，每次调用需要一秒钟。（使用 xmlrpclib。）

我在网上找到的一种加速技术（[跳过 getfqdn 分辨率](http://www.answermysearches.com/xmlrpc-server-slow-in-python-how-to-fix/2140/)）没有帮助。

我的连接 URI 是：

```
'http://localhost:50080' 
```

我在 Windows 7 上运行 Python 2.7 x64，但它对 32 位 Python 2.7 的工作方式相同。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T15:06:37.313

问题似乎在于客户端解析*localhost*。

新的（快速）连接 URI：

```
'http://127.0.0.1:50080' 
```

同样，在主机文件 %SystemRoot%\System32\drivers\etc\hosts 中添加这一行具有基本相同的效果：

> 127.0.0.1 本地主机

这些更改中的任何一个都将速度从 1 次调用/秒提高到 88 次调用/秒，并且跳过 getfqdn 分辨率可能会稍微加快速度。不是非常高容量，但我的应用程序可以接受。

更正：新的性能不是 88 次调用/秒，而是 ~1000 次调用/秒。

# android - 按钮作为 ListView Android 中的最后一项

> ID：14504454
> 
> 赞同：3
> 
> 时间：2013-01-24T15:06:42.150
> 
> 标签：android

我需要将 a`Button`放在`ListView`. 例如，您正在滚动列表视图，当您到达末尾时`Button`，您正在单击它并且列表正在加载更多项目，并且该按钮仍位于该列表的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:09:20.120

您可以将任何视图添加到 ListView 的底部。[有 API 可以做到](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View,%20java.lang.Object,%20boolean%29)这一点。[这是答案。](https://stackoverflow.com/questions/2386593/how-to-show-a-button-at-the-end-of-an-android-listview)

另外我建议您查看无尽的列表视图。[这是您想要的示例。](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:28:59.107

我认为这样，最好将按钮添加为 ListView 的最后一项。
如何做到这一点：在 getView() 方法中，您将获得“位置”，只需输入“if”语句来检查位置是否等于列表的大小，然后添加按钮，否则添加您的实际列表项你已经从布局中膨胀了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-03T17:40:53.440

您可以使用建议`getView()`的适配器（如[user200798](https://stackoverflow.com/users/2007998/user2007998)）的方法来处理它。这样你就有了一个“可滚动按钮”。这是我的一个应用程序中的一段代码（略有改动）：

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    // inflate the layout
    LayoutInflater inflater = ((Activity) context).getLayoutInflater();

    if(position == logEntries.size() - 1) // last element is a Button
    {
        return inflater.inflate(R.layout.list_button, parent, false);
    }
    else
    {
        convertView = inflater.inflate(R.layout.default_list_element, parent, false);
    }

    // manipulate convertView in any way...

    return convertView;
} 
```

# python - 如何在 Eclipse 中的 pydev 调试期间即时重新编译 python 代码

> ID：14504460
> 
> 赞同：0
> 
> 时间：2013-01-24T15:07:05.777
> 
> 标签：python, debugging, pydev, on-the-fly

我假设这个问题对于 pydev 来说是通用的，但我只在 eclipse 中使用过 pydev，所以我不确定......

过去，我不小心这样做了，我想学习如何定期这样做：

1.  我在 eclipse pydev 中运行断点调试器
2.  我停在一行代码上，意识到我需要改变一些东西
3.  我对我的代码进行了更改
4.  我保存了代码
5.  调试器在我最后一次更改之前跳转，以便我可以继续调试会话并使用新更改：
    *   好像旧代码从未发生过

我不确定这是如何工作的，但我想确切地了解如何触发它，因为在我调试时它不再发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T18:25:11.480

嗯，这有一些方面：

如果您使用的是框架（例如 Django），它具有内置的重新加载支持，因此，您将即时获得代码更改（通常通过产生一个新进程）。

现在，如果不是这种情况，在最新的 PyDev 版本中，PyDev 将跟踪对代码所做的版本，并将尝试将旧代码“热交换”为新代码。

它基于 xreload 并将尝试在运行时修补类（即：直接更改类/方法代码）。

唯一需要注意的是，它只有在您离开给定函数并稍后再次返回时才会生效，因为 Python 无法在运行的帧上修补代码（有时它可能无法成功执行交换取决于代码的构造方式，但对于常见的情况，它确实工作得很好）。

请注意，这仅在最新的 PyDev 版本中可用。它在一些较早的版本上，但由于其实施中的问题而被删除 - 但进行了改造并重新添加回来:)

有关详细信息，请参阅：[http ://pydev.org/manual_adv_debugger_auto_reload.html。](http://pydev.org/manual_adv_debugger_auto_reload.html)

# php - mysql计算两个数字之间的差异

> ID：14504463
> 
> 赞同：1
> 
> 时间：2013-01-24T15:07:09.550
> 
> 标签：php, mysql, sql

我有一个博客。我写了简单的投票系统。我可能对这个想法有误。我有一张这样的桌子

id 标题文章 TotalVotes VoteSum

当有人对文章投赞成票时，TotelVotes 获得一分 如果有人对文章投反对票，则 VoteSum cloumn 获得 1 分

当我显示文章的投票时，我会这样做

```
<?php
$Vote = $ROW['TotelVotes']-$ROW['VoteSum'];
?> 
```

它工作得很好，但是在我的首页上我想显示热门文章，所以我做了这个 mysql 查询

```
SELECT TotalVotes-VoteSum AS diff FROM `articles` ORDER BY `diff`  DESC 
```

当我这样做时，我会收到这样的数字 18446744073709551615 例如，当 TotalVotes 小于 VoteSum

数据类型是 INT 无符号

我做错了什么？请你帮助我好吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T15:08:57.670

您可以使用`IF`

```
SELECT IF(TotalVotes >= VoteSum, TotalVotes-VoteSum, VoteSum-TotalVotes) AS diff 
FROM `articles` 
ORDER BY `diff`  DESC 
```

**更新**

如果您想获得负值，请将这些列设为`INT SIGNED`负值。并直接运行您自己的查询，

```
SELECT TotalVotes-VoteSum AS diff 
FROM `articles` 
ORDER BY `diff`  DESC 
```

*   [SQLFiddle 演示（*签名整数*）](http://www.sqlfiddle.com/#!2/cb519/3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:17:00.070

试试这个：

```
SELECT cast(TotalVotes as int)-cast(VoteSum as int) AS diff
FROM `articles`
ORDER BY `diff`  DESC 
```

如果签名问题在数据库中，这将解决问题。默认情况下，`int`数据类型是有符号的（在 MySQL 和我知道的所有其他数据库中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:10:31.743

使用数学函数`ABS`

```
SELECT ABS(TotalVotes-VoteSum) AS diff 
FROM `articles` 
ORDER BY `diff`  DESC 
```

# wpf - 如何更改此 XAML 代码以对齐行并添加标题？

> ID：14504467
> 
> 赞同：0
> 
> 时间：2013-01-24T15:07:19.700
> 
> 标签：wpf, visual-studio, xaml, data-binding

[获取此 WPF 应用程序](https://stackoverflow.com/a/14477620)的代码（或相同的[this](https://stackoverflow.com/a/14474077)），数据绑定一个集合（List 对象（myOrders）：

1.  如何将 OrderName 与 PartNmae 和 PartQuantity 的第一行放在同一行？

2.  如何在列顶部添加通用标题？

那是代替当前

![在此处输入图像描述](../Images/e2ff59ed097c145716f8ec8ea422e541.png)

我想制作：

```
Order Name       Part Name  Quantity  
Order1           Part11     11  
                 Part12     12  

Order2           Part21     22 
                 Part22     22  
                 Part23     23 
```

基于相同代码示例的相关问题：

*   [数据绑定复合（集合）对象（WPF）的最简单的 XAML 代码是什么？](https://stackoverflow.com/questions/14502530/how-to-refractor-xaml-code-databinding-compound-object-wpf)

**更新（解决有关使用 DataGrid**
的建议）：问题是关于如何以类似 TreeView 的方式破解格式...

DataGrid 允许折叠/展开部分集合或制作主/详细视图，但我找不到如何抑制重复值，即在 OrderName 的这种情况下：

```
Order Name       Part Name  Quantity  
Order1           Part11     11  
Order1           Part12     12  

Order2           Part21     22 
Order2           Part22     22  
Order2           Part23     23 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T20:48:12.563

这叫分组，看看

*   c-sharpcorner.com 文章[“WPF 中的 Datagrid 中的分组”](http://www.c-sharpcorner.com/uploadfile/dpatra/grouping-in-datagrid-in-wpf/)。

它很好地解释了它。基本上，您必须将您的集合包装在 ListCollectionView 中并定义 GroupDescription。希望这可以帮助！

```
ListCollectionView collection = new ListCollectionView(myOrders);
collection.GroupDescriptions.Add(new PropertyGroupDescription(OrderName);
DataGrid.ItemSource = collection; 
```

# asp.net-mvc - IIS Express 子应用程序配置继承

> ID：14504469
> 
> 赞同：3
> 
> 时间：2013-01-24T15:07:22.093
> 
> 标签：asp.net-mvc, wcf, iis, iis-express

我正在尝试将带有 WCF 服务的 MVC3 应用程序作为子应用程序在 IIS Express 中按预期工作。它在 IIS 中运行良好，但在 IIS Express 中却做了一些奇怪的事情。

当我在 IIS 中运行站点时，子应用程序和父应用程序的配置设置在子应用程序中都可用。但是，当我在 IIS Express 中运行相同的代码时，只有父配置设置可用。

我找不到任何关于这是预期行为的文档。这并不排除它，但我倾向于怀疑我有配置问题。

**问题是，如何在 IIS Express 中运行这些站点而不会丢失在子应用程序中应用的设置？**

*我正在使用带有 Visual Studio 2010、MVC3 和 IIS Express 8 的 Windows 7 机器。*

这是我的 applicationhost.config 文件中的站点配置。

```
<site name="ParentMvcApp" id="7">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="c:\users\<username>\documents\visual studio 2010\Projects\ChildAppTest\ParentMvcApp" />
    </application>
    <application path="/Services/ChildWcfApp" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="c:\users\<username>\documents\visual studio 2010\Projects\ChildAppTest\ChildWcfApp" />
    </application>
    <bindings>
        <binding protocol="http" bindingInformation="*:33888:localhost" />
    </bindings>
</site> 
```

这是 MVC 配置文件的内容。

```
<configuration>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService1" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:33888/Services/ChildWcfApp/Service1.svc" binding="basicHttpBinding"
        bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
        name="BasicHttpBinding_IService1" />
    </client>
  </system.serviceModel>
</configuration> 
```

这是 WCF 服务配置文件的内容。

```
<?xml version="1.0"?>
<configuration>
    <appSettings>
        <add key="Test"
             value="Wtf"/>
    </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T21:12:37.427

我终于找到了问题。我的子应用程序有 2 个级别。不幸的是，在这种情况下，IIS Express 不像成熟的 IIS。即使它们被配置为应用程序，IIS Express 也不会读取它们的配置文件。我必须为将 allowSubDirConfig 属性设置为 true 的父文件夹显式添加虚拟目录配置。

```
<virtualDirectory path="/Services" allowSubDirConfig="true" /> 
```

# vb.net - 具有自定义数据类型值的字典，无法更新值

> ID：14504471
> 
> 赞同：1
> 
> 时间：2013-01-24T15:07:34.127
> 
> 标签：vb.net, data-structures, dictionary

我正在尝试遍历 DataTable 并区分机会是否导致销售 - 但机会发生的途径有多种，我想按用户组织我的输出。

我有一本字典，键是用户，值字段是自定义数据结构。最初添加键/值时，事情似乎表现正常，但是当更新字典中已经存在的值时，不会保留更改。我的自定义数据类型似乎在内部更新它的值，但是当函数调用退出时，字典的值保持不变。

使用的数据结构有：

```
Public Structure ColleagueSlogs

  Public Call As LoggedItems
  Public Email As LoggedItems

End Structure

Public Structure LoggedItems

  Public SalesLogged As Integer

  Public Sub IncrementSales()
    Me.SalesLogged += 1
  End Sub

  Public NonSalesLogged As Integer

  Public Sub IncrementNonSales()
    Me.NonSalesLogged += 1
  End Sub

End Structure 
```

调用函数，为清楚起见略微简化：

```
 Protected Function SortData(ByVal data As DataTable) As Dictionary(Of String, ColleagueSlogs)

    Dim tmpDict As New Dictionary(Of String, ColleagueSlogs)

    For Each result As DataRow In data.Rows

      Dim tmpName As String = result.Item("UserID")

      If tmpDict.ContainsKey(tmpName) Then ''This block does not update correctly

        'this exists - increment the relevant variable
        Select Case result.Item("Origin")
          Case "Call"
            Select Case result.Item("Sale")
              Case "Yes"
                tmpDict(tmpName).Call.IncrementSales()
              Case "No"
                tmpDict(tmpName).Call.IncrementNonSales()
            End Select
          Case "Email"
            Select Case result.Item("Sale")
              Case "Yes"
                tmpDict(tmpName).Email.IncrementSales()
              Case "No"
                tmpDict(tmpName).Email.IncrementNonSales()
            End Select
        End Select

      Else ''This block works as expected

        'create data structure, increment the relevant var and add it to dict
        Dim tmpSlogs As New ColleagueSlogs
        Select Case result.Item("Origin")
          Case "Call"
            Select Case result.Item("Sale")
              Case "Yes"
                tmpSlogs.Call.IncrementSales()
              Case "No"
                tmpSlogs.Call.IncrementNonSales()
            End Select
          Case "Email"
            Select Case result.Item("Sale")
              Case "Yes"
                tmpSlogs.Email.IncrementSales()
              Case "No"
                tmpSlogs.Email.IncrementNonSales()
            End Select
        End Select

        tmpDict.Add(tmpName, tmpSlogs)

      End If

    Next

    Return tmpDict

  End Function 
```

`tmpDict(tmpName).Call.SalesLogged += 1`是一个值，不能成为赋值的目标 - 有没有办法防止字典的值表现得像`ReadOnly`值？

问题是否在于我的自定义数据类型的定义？还是我应该寻找一种完全不同的方法来解决这个问题？

# ruby-on-rails-3.2 - Rails 资产管道未为 select2 编译图像

> ID：14504473
> 
> 赞同：1
> 
> 时间：2013-01-24T15:07:38.323
> 
> 标签：ruby-on-rails-3.2, asset-pipeline, jquery-select2

我在我的 Rails 3.2 项目之一中使用 Select2 插件。它当前位于目录中`vendor/assets/javascript/select2/`（所有 js、css 和图像文件都在这里，与从下载的插件中解压缩的位置相同）。

我按预期在 application.css 和 application.js 文件中包含了 select2 css 和 javascript 文件：

```
application.css
 *= require select2/select2

application.js
//= require select2/select2.min 
```

但是现在我已经部署到生产环境中，`select2.css`文件正在寻找`assets/select2.png`，而有问题的图像实际上位于`assets/select2/select2.png`.

如何让图像编译到正确的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:59:19.027

您可以使用[select2-rails](https://github.com/argerim/select2-rails) gem 来解决资产管道问题。

顺便说一句：Rails 4 默认不再从 lib/assets 和 vendor/assets 编译资产：[https ://github.com/rails/rails/pull/7968](https://github.com/rails/rails/pull/7968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:32:15.717

我终于通过将`select2.png`图像移动到`vendor/assets/images`目录中解决了这个问题。我曾希望避免这种情况（我宁愿将所有 select2 东西放在一起以便更容易升级到新版本），但如果它有效，那就很难争辩了。

# java - Spring MVC JSP - 包含另一个具有动态数据的 JSP

> ID：14504477
> 
> 赞同：1
> 
> 时间：2013-01-24T15:07:43.573
> 
> 标签：java, spring, spring-mvc

我有一个调用 JSP ( **searchForm** ) 的 Spring 控制器。我还需要在**searchForm**中有一个包含的 JSP 。然而，包含的 JSP 不是静态的——它的数据来自数据库调用。我知道我可以在另一个 JSP 中包含一个 JSP，如下所示，但是如何触发控制器来填充include.jsp**显示**的**ArrayList ？**

 **我不是以正确的方式解决这个问题吗？**include.jsp**将在多个页面上使用，所以我想将它作为包含。

```
<%@ include file="/WEB-INF/views/include.jsp" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:23:24.477

我只需从主控制器调用一个方法，以便使用包含的 JSP 所需的数据填充模型。我会从每个其他控制器调用这个相同的方法，调度到一个包含相同 JSP 的页面。**

# grails - Grails - 缓慢删除

> ID：14504481
> 
> 赞同：0
> 
> 时间：2013-01-24T15:08:02.800
> 
> 标签：grails, grails-orm

我有一个包含一组用户域对象的组域对象 这个组对象可能有 200,000 个用户。

在对此进行测试时，我注意到使用 groupModel.delete(flust:true) 删除该组，甚至在有 200,000 个用户时删除组对象 groupModel.users.clear() 上的所有用户都非常慢。组域对象具有级联：为用户设置“全部删除孤儿”

有没有人对如何加快这些删除操作有任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T15:13:13.677

您不想在每次删除时刷新，这将非常缓慢。将删除放在服务/事务中，然后执行 groupModel.delete()。请记住，删除 200,000 条记录加上所有级联将比 100 条记录花费更长的时间。但是如果你让 Hibernate 担心刷新而不是强迫它，它会更快。

# drupal - 如何在drupal 6中组合cck字段？

> ID：14504485
> 
> 赞同：0
> 
> 时间：2013-01-24T15:08:10.937
> 
> 标签：drupal, drupal-6, drupal-modules

我有两个 CCK 字段，“标题”和“内容”。我必须合并这两个字段，这样当我按下“添加另一个项目”按钮时，上述两个字段都会添加一次，依此类推。这在drupal 6中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:16:26.950

是的，你可以这么做

您需要使用 cck 3.0 + 并且您可以找到 muligroup 选项，只需创建您需要的 2 个字段并将它们放入多组中，并且不要忘记将您的值数量设置为无限制

# sublimetext2 - 如何在搜索路径中使用通配符？

> ID：14504488
> 
> 赞同：2
> 
> 时间：2013-01-24T15:08:19.367
> 
> 标签：sublimetext2

是否可以在路径中使用通配符（“Where”输入）？我知道[文件名是可能的](https://stackoverflow.com/questions/12185384/search-in-files-with-wildcards-in-sublime)，但我找不到如何在路径本身中使用通配符。
例如，**我想执行这个搜索**：

```
/home/john/dev/*/branch_name,*.py 
```

原因是我有 3 个同名（`branch_name`）但属于不同项目的开发分支。但是通配符`*`不起作用。到目前为止，我唯一的替代解决方案是执行 3 次搜索：

```
/home/john/dev/project1/branch_name,*.py
/home/john/dev/project2/branch_name,*.py
/home/john/dev/project3/branch_name,*.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:32:31.743

查看`...`where 字段旁边的按钮。如果它们以逗号分隔或使用该`Add Folder`选项，则可以包含多个目录。那里还有其他几个选项可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-23T16:24:33.967

对于后代，诀窍是在过滤器中使用正则表达式，而不是文件夹规范，例如：使用根文件夹`"/home/john/dev/"`，使用过滤器`".*/branch_name/.*\.py"`，例如，'where' 字符串将是：

```
/home/john/dev,.*/branch_name/.*\.py 
```

# jquery - JQuery ASP.NET .change 事件未触发

> ID：14504489
> 
> 赞同：1
> 
> 时间：2013-01-24T15:08:24.023
> 
> 标签：jquery, asp.net, onchange

我知道这个问题已经被问了很多，但似乎对我没有任何用处。我已经阅读了很多问题和答案。

我正在使用 JQuery 事件来处理 ASP.NET 控件的事件，但该事件不会触发。

这是我尝试过的：

我的下拉列表：

`<asp:DropDownList ID="List_ValueStream" runat="server" Width="195px" />`

我尝试将事件添加到 DropDownList，都单独测试：

在：

```
 <script src="http://code.jquery.com/jquery.min.js" type="text/javascript">
          ...
    </script> 
```

/

```
 $(document).ready(function () {
        $("#<%=List_ValueStream.ClientID%>").change(function () {
            alert('1 Handler for .change() called.');
        });
    }); 
```

/

```
 $(document).ready(function () {
        $("#List_ValueStream").change(function () {
            alert('2 Handler for .change() called.');
        });
    }); 
```

/

```
 $(document).ready(function () {
        $("#List_ValueStream").on('change', function () {
            alert('3 Handler for .change() called.');
        });
    }); 
```

/

```
 $("#<%=List_ValueStream.ClientID%>").change(function () {
          alert('4 Handler for .change() called.');
    }); 
```

/

```
 $("#List_ValueStream").change(function () {
        alert('5 Handler for .change() called.');
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T15:42:58.213

你有没有在这两行之间写过脚本。然后在一个单独的脚本标签中编写你的脚本，如下所示

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript">

</script>

<script src="http://code.jquery.com/jquery.min.js" type="text/javascript">
</script>

<script type="text/javascript">
 $(document).ready(function () {
    $("#<%=List_ValueStream.ClientID%>").change(function () {
        alert('1 Handler for .change() called.');
    });
});
</script> 
```

我想只有这个可能是原因。否则没关系。如果您使用的是 asp.net 4.0 或更高版本，则
可以利用[ClientIDMode=static 。](http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature)它不会改变你控制的ID如下

```
 <asp:TextBox ID="txtEcho2" runat="server" ClientIDMode="Static" /> 
```

所以你可以摆脱 ClientId

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:46:02.387

你可以像这样使用并且工作得很好

```
<asp:DropDownList ID="List_ValueStream" runat="server" Width="195px" onchange="youfunction();"/> 
```

# git - 无法进入 msysgit bash 提示符

> ID：14504490
> 
> 赞同：3
> 
> 时间：2013-01-24T15:08:26.790
> 
> 标签：git, msysgit

我在搜索时确实看到了类似的问题，但没有答案。

我正在关注关于 RoR 和 Git 的教程。我仔细按照所有说明为运行 Windows 7 的笔记本电脑下载了 msysgit 1.8.0。

但是，当我运行 Git Bash 时，我得到的只是一个闪烁的光标……我已经等了 10 分钟，但我得到的仍然是一个闪烁的光标，它从不提示，也不允许我输入类型。我已经多次卸载/重新安装 Git 并尝试了一些更高版本，但我仍然无法让 Git Bash 工作。

有人对我如何让 Git 工作有任何想法吗？这是我第一次在这里发帖，我对编程等还很陌生，所以我希望我已经提供了所有需要的信息。谢谢您的帮助。

# java - Java中带有换行符“\ n”的字符串=>如何转换为markdown？

> ID：14504491
> 
> 赞同：0
> 
> 时间：2013-01-24T15:08:37.773
> 
> 标签：java, string, markdown, markup

我在Java中有一个字符串：

```
String str = "first line\nsecond line"; 
```

该字符串被馈送到读取[daringfireball](http://daringfireball.net)降价的字段。\n 无法识别，所以我使用

```
String str = "first line<br/>second line"; 
```

但是，在我用于此字符串的其他输出格式中，此 html 标记是完全不必要的。

**=>有没有办法可以在markdown中换行而不包括`<br/>`在我的java字符串中？**

[背景：通过本网站的 API，我向接受降价的资源的描述字段提供了一个字符串，这里：[http](http://datahub.io/dataset/testapi/resource/6ad9aaba-cb47-45ff-98ed-c92ead0a1c35) ://datahub.io/dataset/testapi/resource/6ad9aaba-cb47-45ff-98ed-c92ead0a1c35 。如您所见，image.agent、image.date 等之间有整齐的换行符。我通过添加一些`<br/>`标记来获得它们，但我发现它违背了 makrdown 的目的。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:20:46.813

来自[http://daringfireball.net/projects/markdown/syntax#p](http://daringfireball.net/projects/markdown/syntax#p)

> 当您确实想`<br />`使用 Markdown 插入中断标记时，请以两个或更多空格结束一行，然后键入 return。

这是你要找的吗？

# sitecore - 如何在 Sitecore 中删除内容项和对该项的所有引用？

> ID：14504492
> 
> 赞同：1
> 
> 时间：2013-01-24T15:08:37.710
> 
> 标签：sitecore, sitecore6

实现此要求的最佳方法是什么：“在 Sitecore 中删除内容项时，应删除对该项的所有引用（链接和引用字段）。”</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T15:34:53.223

当您在 Sitecore 中删除一个项目时，它会提醒您该项目已在其他地方引用。这样做时，您可以选择删除指向即将删除的项目的所有链接。这应该满足您的要求。

# ghostscript - -dMaxStripSize=8192 命令在 ghostscript 中有什么作用？

> ID：14504496
> 
> 赞同：1
> 
> 时间：2013-01-24T15:08:53.023
> 
> 标签：ghostscript

我正在浏览手册，找不到任何告诉你这个命令做什么的东西？-dMaxStripSize=8192 我正在努力更新我们的 Ghostscript 以尝试使我们的 pdf2tiff 文件的 OCR 扫描质量更好。这些是正在使用的现有开关。我们不想提高分辨率以危及文件大小和存储空间。任何想法表示赞赏。还要回答 -dMaxStripSize=8192 命令正在做什么。在此先感谢！

dNOPAUSE -dBATCH -dMaxStripSize=8192 -q -r300x300 -sDEVICE=tiffg4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:03:00.290

请参阅 gs/doc/Devices.htm 第 3.4 节中的文档，然后参阅“选项”。

* * *

**[Git](https://www.ghostscript.com/doc/9.22/Devices.htm#TIFF)**中本文档的当前版本。请注意，此文档可能会随着 Ghostscript 的未来发展而变化。

> 所有 TIFF 驱动程序都支持创建由多个条带组成的文件。多条文件减少了读取器的内存需求，因为读取器一次只需要存储和处理一个条带。MaxStripSize 参数控制条带大小：
> 
> > -dMaxStripSize=N（非负整数；默认值 = 8192）
> > 
> > > 设置条带的最大（未压缩）大小。TIFF 6.0 规范第 7 节第 27 页建议每个条带的大小约为 8 KB。
> 
> 如果 MaxStripSize 参数的值小于单个图像行，则不会生成错误，并且将正确生成 TIFF 文件，每个条带使用一行。请注意，较小的条带大小会通过增加 StripOffsets 和 StripByteCounts 表的大小以及降低必须为每个条带重新开始的压缩的有效性来增加文件的大小。
> 
> 如果 MaxStripSize 的值为 0，则整个图像将是单个条带。

# flash - Flash Builder 4.7 商业应用程序 - 无设计视图

> ID：14504499
> 
> 赞同：8
> 
> 时间：2013-01-24T15:08:58.103
> 
> 标签：flash, builder, designview

我使用 Flash Builder 4.6 编写了一个大型的商业级移动应用程序。在 iOS 和 Android 设备上运行时，它运行良好。

我正在使用 Flash Builder 4.6 的试用版来开发这个应用程序。我使用 FB 内置的状态功能来处理人像、风景和手机/平板电脑配置。这意味着我为我的移动应用程序中的所有 8 个视图构建了 4 个不同的布局。使用 FB 4.6 中的设计视图让我能够做到这一点。

我不得不说到目前为止我喜欢 Flash Builder。很棒的工具。

我的审判在上周刚刚结束。我不得不购买该软件的 4.7 版，才发现他们从软件中删除了设计视图。

除了抱怨之外，其他和我在同一条船上的程序员作为解决方案做了什么？我想继续在 AS 和 Flash Builder 中编程，因为我已经花时间编写应用程序并学习了整个平台。

就目前而言，我正在将我的许可证密钥从 4.7 降级到 4.6，但为了做到这一点，我必须退回我的零售版 FB 4.7 高级版（在线购买）并购买批量许可版本（不是通过adobe，仅允许通过 CDW 等经销商执行此操作）。然后，一旦我通过批量许可获得了 4.7 的密钥，它就可以降级到 4.6。

我希望在同一条船上得到其他人的意见。您是否更改了编程语言？如果是这样，对什么？你是不是换了IDE？如果是这样，对什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-10T13:35:05.203

今天刚升级到4.7，用了一年4开发一个应用。具有讽刺意味的是，我不得不升级，因为设计视图出现了一些奇怪的怪癖，使其无法使用（如果其他人看到视图不断尝试刷新并变为空白，我发现切换到较旧的 Flex SDK，然后回到原来的一，修好了！）。

我简直不敢相信设计视图已经消失了，也不敢相信 Adob​​e 论坛上那些人的“接受或离开”态度。与 HTML/CSS 的比较（他们厚脸皮）是错误的，因为您不必在每次想要查看页面时都等待编译！

在过去几年与 HTML5 坦率可笑的虚假战争中，我一直是 Flash 的支持者，我意识到这在很大程度上是因为 Apple 不希望人们玩免费的 Flash 游戏，而他们可以为这些游戏付费！该平台为您提供了许多优势——先进的、静态类型的、真正的 OO 语言、跨浏览器的连续性、出色的 IDE——HTML/CSS/JS 根本不具备这些优势。

我已经花了很长时间才在 Flash 中完成我现在正在做的项目，并且必须向刚刚为该软件分叉的怀疑论者解释这一点，这是一个巨大的、目标明确的开始坚果！

Apple / Flash 的狂热现在已经平息，我希望 Adob​​e 能像往常一样继续下去，但他们似乎决心抛弃为他们扛起火炬的数千名开发人员，这只是又一次倒退。

当甚至它的架构师似乎不再关心它时，我无法支持我对技术的支持。这个项目将是我最后一次使用 Flash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:40:17.637

您可以为同一台机器安装 4.6 和 4.7。我使用 4.6 进行设计，使用 4.7 进行编码。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-07-22T03:14:01.110

Flash Builder 无论如何都不是“设计视图”的地方。多年来，Adobe 一直在制作更好的“设计视图”。它比 FB 设计视图在从复杂的图像/插图文件制作资产、将不同的图像放入符号中并在舞台上排列以及制作动画方面要好得多。无缝集成到 flash builder 代码中同样容易。它被称为 Flash 专业版。

# mysql - MySQL JOIN 与 MySQL 速记 JOIN(,)

> ID：14504502
> 
> 赞同：7
> 
> 时间：2013-01-24T15:08:59.727
> 
> 标签：mysql, sql, database, phpmyadmin

***方法一***

```
SELECT o.*, 
       bc.*, 
       s.name  AS plan_name, 
       p.image AS course_image, 
       p.id    AS course_id, 
       p.name  AS course_name, 
       p.id, 
       p.level 
FROM   wg_guru_order o 
       JOIN wg_guru_buy_courses bc 
         ON o.id = bc.order_id 
       JOIN wg_guru_subplan s 
         ON bc.plan_id = s.id 
       JOIN wg_guru_program p 
         ON bc.course_id = p.id 
WHERE  o.status = 'Paid' 
       AND bc.userid = 451 
        OR p.catid = 26 
           AND p.published = 1 
```

EXPLAIN 命令输出

![在此处输入图像描述](../Images/8e09cf54cf24f6e0d56dd7f4a0984d41.png)

***方法二***

```
 SELECT o.*,
       bc.*,
       s.name  AS plan_name,
       p.image AS course_image,
       p.id    AS course_id,
       p.name  AS course_name,
       p.id,
       p.level
FROM   wg_guru_order o,
       wg_guru_buy_courses bc,
       wg_guru_subplan s,
       wg_guru_program p
WHERE  o.status = 'Paid'
       AND o.id = bc.order_id
       AND bc.userid = 451
       AND bc.plan_id = s.id
       AND bc.course_id = p.id
        OR p.catid = 26
           AND p.published = 1 
```

EXPLAIN 命令输出

![在此处输入图像描述](../Images/5580f621a3240b8c0a6e581f2be1e872.png)

以上两个是相同的，恰好对我来说工作正常。唯一的区别是方法 1 查询是使用`JOIN`子句 &编写`ON`的，方法 2 是使用`JOIN`速记方法编写的。

问题是方法 1 返回 3 行，方法 2 返回 1543 行。相同的查询如何返回不同的结果？

鉴于我只想了解为什么会这样。我不关心结果集。我想知道的是，以两种方式编写的相同查询如何输出不同类型的结果集？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T15:13:41.433

您的问题不是 CROSS JOIN 与 INNER JOIN，而是您的 WHERE 标准需要在适当的 OR 子句周围加上括号。

**方法 2**应该有这样的子句`WHERE`，相当于方法 1：

```
WHERE ( o.id = bc.order_id
    AND bc.plan_id = s.id
    AND bc.course_id = p.id
    )
  AND ( o.status = 'Paid' AND bc.userid = 451
     OR p.catid = 26 AND p.published = 1
      ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:13:23.143

总是更喜欢第一个选项。

这两个选项都是标准的，但第二个选项来自较旧的 SQL-89 标准。第一个选项是新的 SQL-92 标准。旧标准已*弃用*，一些数据库开始遵循该弃用标准。例如，Sql Server 2012 放弃了对通过旧语法进行外连接的支持。MySQL 仍然完全支持它，但你不应该真的指望它在你的应用程序的生命周期中保持这种状态。

除此之外，这些不是相同的查询。您需要在 WHERE 子句中添加一些括号来控制如何`OR`解释您的条件。这就是查询返回不同行集的原因。如所写，就好像您的 where 子句如下所示：

*方法一：*

```
WHERE  (o.status = 'Paid' AND bc.userid = 451)
    OR (p.catid = 26 AND p.published = 1) 
```

*方法二：*

```
WHERE 
   (o.status = 'Paid'
      AND o.id = bc.order_id
      AND bc.userid = 451
      AND bc.plan_id = s.id
      AND bc.course_id = p.id
   ) OR ( p.catid = 26 AND p.published = 1) 
```

注意分组......这可能不是你想要的。我希望你打算更像这样：

```
WHERE  o.status = 'Paid'
  AND  o.id = bc.order_id
  AND  bc.course_id = p.id
  AND  bc.plan_id = s.id
  AND (bc.userid = 451 OR p.catid = 26)
  AND  p.published = 1 
```

现在你的查询都不是这样工作的，但我认为它更接近你真正想要做的事情。您需要在正确的位置使用括号编写查询以获得所需的结果。

# android - 更改 AlertDialog 的背景颜色

> ID：14504503
> 
> 赞同：0
> 
> 时间：2013-01-24T15:09:11.120
> 
> 标签：android, android-alertdialog, android-ui

我能够很容易地更改常规 Dialog 的背景，现在我也想将我的特定背景颜色分配给 AlertDialog。我已经从 android-17/styles.xml 中提取了必要的部分（我不能简单地引用子类的部分）并成功地改变了按钮框 bg 颜色：

```
<!--    Extracted from styles.xml for Holo theme   -->

    <style name="AlertButtonBarWithBackground" parent="@android:style/Holo.ButtonBar.AlertDialog">
        <item name="android:background">@color/dialog_background_color</item>        
    </style>

    <style name="AndroidHoloTextAppearance">
        <item name="android:textColor">?android:attr/textColorPrimary</item>
        <item name="android:textColorHighlight">?android:attr/textColorHighlight</item>
        <item name="android:textColorHint">?android:attr/textColorHint</item>
        <item name="android:textColorLink">?android:attr/textColorLink</item>
        <item name="android:textSize">18sp</item>
        <item name="android:textStyle">normal</item>
    </style>

    <style name="AndroidDialogWindowTitle">
        <item name="android:maxLines">1</item>
        <item name="android:scrollHorizontally">true</item>
        <item name="android:textAppearance">@android:style/TextAppearance.DialogWindowTitle</item>
    </style>

    <style name="AndroidDialogWindowTitle.Holo">
        <item name="android:maxLines">1</item>
        <item name="android:scrollHorizontally">true</item>
        <item name="android:textAppearance">@style/AndroidHoloTextAppearance</item>
    </style>

    <style name="AlertDialogTheme" parent="@android:style/Theme.Holo.Dialog">
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowTitleStyle">@style/AndroidDialogWindowTitle.Holo</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowMinWidthMajor">@android:dimen/dialog_min_width_major</item>
        <item name="android:windowMinWidthMinor">@android:dimen/dialog_min_width_minor</item>
        <item name="android:buttonBarStyle">@style/AlertButtonBarWithBackground</item>
    </style>

<!--    End of extracted fragment  -->

    <style name="ActivityTheme" parent="android:Theme.Holo">
        <item name="android:alertDialogTheme">@style/AlertDialogTheme</item>
    </style> 
```

但无论我如何尝试改变文本区域背景，对话框周边的阴影背景也会改变。常规对话框不是这种情况，我已将 bg 颜色设置如下：

@color/dialog_background_color

它仍然有漂亮的标准阴影，没有被背景颜色改变，所以我相信这也可以用于警报对话框？..

# hibernate - EHCache，休眠兵马俑版本

> ID：14504507
> 
> 赞同：3
> 
> 时间：2013-01-24T15:09:20.830
> 
> 标签：hibernate, ehcache, terracotta

我有一个运行 Hibernate 4.1.7 的应用程序，并且正在使用 ehcache 作为 2 级缓存。我知道从 Hibernate 4 开始，我需要使用与 hibernate 捆绑在一起的 ehcache jar，但是这些 jar 已经很旧了。

目前ehcache最新版本是2.6.3，但是hibernate 4.1.7自带的版本是2.4.3。问题是 hibernate 没有与 ehcache-terracotta jar 捆绑在一起，而我的 terracotta 服务器与 ehcache-hibernate 2.6.2 jar 捆绑在一起，因为它是 terracotta 的最新工作版本。我正在努力让我的应用程序连接到我的兵马俑服务器并假设这是因为我的版本不匹配。

如何让 hibernate（2.4.3 版）使用的 ehcache 与我的 ehcache 2.6.2 版的 terracotta 服务器连接？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:12:51.313

如果您使用 Hibernate JPA 实现，您应该在您的 persistence.xml 中提供以下属性：

```
<property name="hibernate.cache.region.factory_class" value="net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory" /> 
```

然后你的类路径中应该有以下 jars（对于 terracotta 版本 3.6.5 - 与 JDK5 兼容的最后一个版本）：

*   ehcache-core-ee-2.5.6.jar
*   ehcache-terracotta-ee-2.5.6.jar
*   terracotta-toolkit-1.5-runtime-ee-4.5.0.jar

此外，您必须确保您的类路径中没有任何其他 ehcache jar。

如果你使用 Maven，那么：

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core-ee</artifactId>
    <version>2.5.6</version>
</dependency>
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-terracotta-ee</artifactId>
    <version>2.5.6</version>
</dependency>
<dependency>
    <groupId>org.terracotta</groupId>
    <artifactId>terracotta-toolkit-1.5-runtime-ee</artifactId>
    <version>4.5.0</version>
</dependency> 
```

另外不要忘记指向 terracotta 的 maven 存储库以下载所需的 jar：

```
<repository>
    <id>terracotta-repository</id>
    <url>http://www.terracotta.org/download/reflector/releases</url>
    <releases>
        <enabled>true</enabled>
    </releases>
</repository> 
```

# jquery - 多级菜单未显示

> ID：14504509
> 
> 赞同：0
> 
> 时间：2013-01-24T15:09:22.407
> 
> 标签：jquery, menu, submenu

我在这里有这个例子[http://jsfiddle.net/65R8q/2/](http://jsfiddle.net/65R8q/2/)用于多级子菜单，但由于使用 stop() 使第一个子菜单稳定而没有显示如何解决这个问题？

```
$(document).ready(function () {
    $(".cat").mouseover(function () {
        $(".sub1").slideDown(500, function () {
            $(this).css("display", "block");
        });
    });

    $(".cat").mouseout(function () {
        $(".sub1").slideUp(500, function () {
            $(this).css("display", "none");
        });
    });

    $(".sub1").mouseover(function () {
        $(this).css("display", "block").stop();
    });

    $(".sub1").mouseout(function () {
        $(this).slideUp(500, function () {
            $(this).css("display", "none");
        });
    });

    $(".item2").mouseover(function () {
        $(".sub2").slideDown(500, function () {
            $(this).css("display", "block");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:46:03.077

我已经清除了许多 css 错误和许多 jQuery 冲突。最后我设法解决了这个问题。

[**这是jsFiddle。**](http://jsfiddle.net/65R8q/31/)

**首先**，您不需要使用回调函数来操作 css `display: block/none`，`slideUp/slideDown`因为这些方法`hides/shows $(this)`在完成后会自动元素。

**第二：**您应该选择用于触发导航的包装器元素。在您的示例中，您选择了 small element `.cat`，这是错误的。您应该选择包含整个导航的最大元素。在您的示例中：`.menu`

**第三：**不要忘记定义`top:0; left:0;`何时`position`使用protert。如果您不定义顶部/左侧值，它将在某些浏览器上产生冲突。

```
$(document).ready(function(){
    $('.menu').bind({
        mouseenter: function() {
            $(".sub1").stop(true,false).slideDown(500);
        },
        mouseleave: function() {
            $(".sub1").slideUp(500);
        }
    });

    $('.item2').bind({
        mouseenter: function() {
            $(".sub2").stop(true,false).slideDown(500);
        },
        mouseleave: function() {
            $(".sub2").slideUp(500);
        }
    });
}); 
```

# google-chrome - 浏览器不会让 iframe 做重定向？

> ID：14504516
> 
> 赞同：3
> 
> 时间：2013-01-24T15:09:30.740
> 
> 标签：google-chrome, iframe

Google Chrome 23 和 Firefox 18 让我抓狂。我有一个页面，其中有一个 iframe。单击按钮时，我希望 iframe 打开`http://images.google.com`

问题是 iframe 将尝试访问[http://images.google.com](http://images.google.com)，但是一旦它收到重定向指令（[http://images.google.com](http://images.google.com)正在发出），它就会停止并且页面将不会t 被渲染。这是为什么？有什么解决办法吗？

这是一个演示该问题的片段：

```
<iframe id="panel" style="height: 800px; width: 100%" sandbox="allow-scripts" src="http://images.google.com">
</iframe> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T17:14:29.740

这是一个浏览器安全问题，称为[Click-jacking Prevention](http://en.wikipedia.org/wiki/Clickjacking)，其中一部分是检查 HTTP 响应标头[X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)。此标头可以采用值`DENY`、`SAMEORIGIN`或`ALLOW-FROM`origin ，这将分别防止任何框架、防止外部站点框架或仅允许由指定站点进行框架。

简单地说，当这个 http 标头存在时，它会阻止站点以 a`<frame>`或`<iframe>`. 自 2009 年以来，此 http 标头已在大多数浏览器中实现，包括 IE8+、Safari、Firefox、Chrome 和 Opera。

这是来自 的标头`images.google.com`，`SAMEORIGIN`这意味着该地址只能在浏览时在 iframe 内呈现`google.com`

![在此处输入图像描述](../Images/c0003e3fb147784fc2530cbf4e06567a.png)

# performance - 本地 asmx Web 服务的正常响应时间是多少？

> ID：14504519
> 
> 赞同：1
> 
> 时间：2013-01-24T15:09:36.330
> 
> 标签：performance, iis, soap, asmx

我正在尝试优化网络服务以尽可能快。我在具有 8 个内核和 8Gb RAM 的 Windows Server 2008 机器上的 IIS7.5 (.NET4) 下运行的 machine.config 中有以下部分：

```
<system.web>
      <httpRuntime minFreeThreads="704" minLocalRequestFreeThreads="608" />
      <processModel autoConfig="true" maxWorkerThreads="100" maxIoThreads="100" minWorkerThreads="50" />
</system.web>

<system.net>
      <connectionManagement>
            <add address="*" maxconnection="96"/>
      </connectionManagement>
</system.net> 
```

我有一个 .asmx 网络服务，它只等待 5 秒然后返回。然后，我从同一服务器上的网站运行以下 C# 代码：

```
CmsDataService service = new CmsDataService();
System.Diagnostics.Stopwatch timer = new Stopwatch();
List<Thread> threads = new List<Thread>();

for (int i = 0; i < RequestCount; i++)
{
    threads.Add(new Thread(delegate()
        {
            service.sleepTest();
        }));
}

timer.Start();
foreach (var thread in threads)
{
    thread.Start();
}

while (threads.Any(t => t.IsAlive))
{
    // wait
}
timer.Stop();

Response.Clear();
Response.Write(timer.ElapsedMilliseconds); 
```

我得到以下结果：

```
 10 requests in parallel averages = 5027ms
   100 requests in parallel averages = 10016ms
   1000 requests in parallel averages = 55175ms 
```

第一个结果似乎很好，但其他结果似乎很慢。SOAP 通常这么慢还是有更多可以调整的配置设置？

# java - Tomcat错误：根元素后面的文档中的标记必须格式正确

> ID：14504522
> 
> 赞同：0
> 
> 时间：2013-01-24T15:09:39.507
> 
> 标签：java, xml, tomcat

我被这个错误困住了？！我有一个简单的 XML 文件和一个简单的 java 文件。

我的xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee">
<servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>test.HelloServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/hello/</url-pattern>
</servlet-mapping>
</web-app> 
```

我的java是：

```
package test;
import java.io.*;
import javax.servlet.http.*;
import javax.servlet.*;

public class HelloServlet extends HttpServlet {

public void doGet (HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
PrintWriter out = res.getWriter();
out.println("Hello, world!");
out.close();
}
} 
```

我的 xml 放在 WEB-INF 中。当我执行 localhost:8080 时，我得到了 tomcat 页面。

有人能帮我吗？

```
Jan 24, 2013 3:48:58 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at jndi:/localhost/opdracht-les1/WEB-INF/web.xml
org.xml.sax.SAXParseException; systemId: jndi:/localhost/opdracht-les1/WEB-INF/web.xml; lineNumber: 5; columnNumber: 2; The markup in the document following the root element must be well-formed.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$TrailingMiscDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1878)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1259)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Jan 24, 2013 3:48:58 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Occurred at line 5 column 2
Jan 24, 2013 3:48:58 PM org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)
Jan 24, 2013 3:48:58 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
Jan 24, 2013 3:48:58 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/opdracht-les1] startup failed due to previous errors
Jan 24, 2013 3:53:09 PM org.apache.catalina.startup.HostConfig deleteRedeployResources
INFO: Undeploying context [/opdracht-les1]
Jan 24, 2013 3:53:29 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive E:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\opdracht-les1.war 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:23:55.297

Java Servlet 的部署描述符需要更多的命名空间声明：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"> 
```

# objective-c - 如何对 ALAssetsLibraryGroupsEnumerationResultsBlock 的结果进行排序

> ID：14504525
> 
> 赞同：1
> 
> 时间：2013-01-24T15:10:11.313
> 
> 标签：objective-c, alassetslibrary

**问题**

我想订购从我`ALAssetsLibrary`的方式返回的结果，`Camera Roll`它将位于我的数组之上。

**代码**

这是我的枚举块，它遍历所有返回的项目。

```
ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop) {
    if(group) {
        [_groups addObject:group];
        [self.tableView reloadData];
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:25:06.260

如果您真的只关心相机胶卷是第一位的，您可以在开头插入相机胶卷并附加所有其他组的位置构建数组，如下所示：

```
groups = [NSMutableArray new];
ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop) {
    if (group) {
        if ([group valueForProperty:ALAssetsGroupType]== ALAssetsGroupSavedPhotos]) {
            [groups insertObject:group atIndex:0];
        }
        else {
            [groups addObject:group];
        }
    }
    else {
        // group is nil, so there are no more groups to enumerate
        [self.tableView reloadData];
    }
}; 
```

这样您就不必编写任何额外的排序代码，一切都会在正确的位置。正如 Robert 所指出的，没有理由在每次迭代时都重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:33:59.900

在你的街区，这样做......

```
if ( group ) {
  [_groups addObject:group];
} else {
  // Sort your groups in _groups here
  [self.tableView reloadData];
} 
```

...根据文档，迭代在`group`is时结束`nil`。通过这种方式，您可以获取所有组，对它们进行排序，然后重新加载表视图。在您收到每个组之后重新加载它是没有意义的 - 在这种情况下这是一个快速的过程。

# android - 我可以在 ActionBar 中存储的图标的最大数量是多少？

> ID：14504529
> 
> 赞同：1
> 
> 时间：2013-01-24T15:10:14.873
> 
> 标签：android, android-actionbar, actionbarsherlock

我的操作栏中目前有 4 个操作，它切断了屏幕的标题。我知道我可以`android:uiOptions="splitActionBarWhenNarrow"`用来添加一个底栏，但我想知道我是否可以让动作图标变小？我也知道我可以使用该`ActionOverflow`选项，但我会尽可能避免使用它。如果没有，是否有我可以在底部保持的最大数量，以及顶部的最大数量？

**编辑**

另外，有没有类似的电话`setTitleTextSize()`？也许如果我可以让我的标题更小它会起作用，但我在[`APIs`](http://developer.android.com/reference/android/app/ActionBar.html).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:27:01.593

没有谷歌批准的方法来做到这一点，但这个小技巧应该可以工作。

```
try {
    final int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android");
    TextView title = (TextView) getWindow().findViewById(titleId);
    // check for null and manipulate the title as you see fit
} catch (Exception e) {
    Log.e(TAG, "Failed to obtain action bar title reference");
} 
```

然而，稍微更受 Google 认可的方法是为 ActionBar 设置自定义布局：

您可以为操作栏使用自定义视图（它将显示在您的图标和操作项之间）。我正在使用自定义视图，并且禁用了本机标题。我的所有活动都继承自一个活动，该活动在 onCreate 中有以下代码：

```
this.getActionBar().setDisplayShowCustomEnabled(true);
this.getActionBar().setDisplayShowTitleEnabled(false);

LayoutInflater inflator = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflator.inflate(R.layout.titleview, null);

//if you need to customize anything else about the text, do it here.
//I'm using a custom TextView with a custom font in my layout xml so all I need to do is set title
((TextView)v.findViewById(R.id.title)).setText(this.getTitle());

//assign the view to the actionbar
this.getActionBar().setCustomView(v); 
```

您的布局 xml（上面代码中的 R.layout.titleview）应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:textSize="20dp"
        android:maxLines="1"
        android:ellipsize="end"
        android:text="" />
</RelativeLayout> 
```

更改`android:textSize="20dp"`以更改标题的大小。

# javascript - 防止退格键从当前表单返回

> ID：14504534
> 
> 赞同：2
> 
> 时间：2013-01-24T15:10:21.110
> 
> 标签：javascript, html

我正在使用下面的 JavaScript 函数来防止退格键返回。

```
function preventBackspace(e) {
    var evt = e || window.event;
    if (evt) {
        var keyCode = evt.charCode || evt.keyCode;
        if (keyCode === 8) {
            if (evt.preventDefault) {
                evt.preventDefault();
            } else {
                evt.returnValue = false;
            }
        }
    }
} 
```

我已添加`onkeydown="preventBackspace();"`到所有文本框中。

我有两个单选按钮和两个文本框，选中后使另一个文本框只读。当按下退格键时，它不会返回页面，但我无法从可编辑文本框中删除。请建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:17:29.167

当用户当前专注于文本框时，退格键不会*导致*浏览器返回。文本框中的退格键用于删除字符 - 由于您添加了`preventDefault()`，因此您正在阻止该行为的发生。

如果您的目标是防止用户在完成之前意外离开表单，您可以使用`window.onbeforeunload`显示允许用户取消导航的警告消息：

```
window.onbeforeunload = function() {
    return "Are you sure you want to leave this page?  Your current entries" +
        " will be lost.";
}; 
```

# java - 用 Java 写入文件。帮我码

> ID：14504540
> 
> 赞同：1
> 
> 时间：2013-01-24T15:10:37.913
> 
> 标签：java, file-io, filewriter

我将文件路径传递给此方法，该方法写入 in txt 文件。但是当我运行这个程序时，它并没有写满，我不知道我在哪里犯了错误。

```
public void content(String s) {
  try { 
    BufferedReader br=new BufferedReader(new FileReader(s)); 
    try {
      String read=s;
      while((read = br.readLine()) != null) {    
        PrintWriter out = new PrintWriter(new FileWriter("e:\\OP.txt"));
        out.write(read);
        out.close();
      }
    } catch(Exception e) { }    
  } catch(Exception e) { }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T15:15:37.187

您不应该每次都在循环内创建 PrintWriter：

```
public void content(String s) {
   BufferedReader br=new BufferedReader(new FileReader(s));

   try {
      PrintWriter out=new PrintWriter(new FileWriter("e:\\OP.txt"));
      String read=null;

      while((read=br.readLine())!=null) {
         out.write(read);
      }
   } catch(Exception e) {
      //do something meaningfull}
   } finally {
      out.close();
   }
} 
```

此外，正如其他人提到的那样，添加一个 finally 块，不要默默地捕获异常，并遵循 Java 编码约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:11:41.367

关闭你的 PrintWriter 最终阻止循环

```
 finally {

         out.close();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:18:23.577

最好改用 Apache Commons IO。

[http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)应该可以解决问题。

*（除非您正在尝试学习低级的东西，或者实际上知道为什么不能在这种情况下使用 IOUtils。）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:18:06.457

试试这个

```
public void content(String s) throws IOException { 
        try (BufferedReader br = new BufferedReader(new FileReader(s));
                PrintWriter pr = new PrintWriter(new File("e:\\OP.txt"))) {
            for (String line; (line = br.readLine()) != null;) {
                pr.println(line);
            }
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T15:28:42.090

在完成之前关闭流。所以要么把它放进去

```
<code>
finally {
out.close();
}
</code>

or see this simple example

<code>try {
    String content = s;
    File file = new File("/filename.txt");

    // if file doesnt exists, then create it
    if (!file.exists()) {
    file.createNewFile();
    }

    FileWriter fw = new FileWriter(file.getAbsoluteFile());
    BufferedWriter bw = new BufferedWriter(fw);
    bw.write(content);
    bw.close();
    System.out.println("Done");
    } catch (IOException e) {
    e.printStackTrace();
    }
    }
</code> 
```

# google-chrome - 当 transport=serverSentEvents 时未调用 SignalR 客户端函数

> ID：14504543
> 
> 赞同：3
> 
> 时间：2013-01-24T15:10:50.727
> 
> 标签：google-chrome, signalr

在我的机器上，我发现 Chrome 中没有调用 SignalR 客户端函数。

我的 SignalR 测试应用程序在我的 iphone 上与 IE9、Firefox 甚至 Safari 兼容。看看 Fiddler，这些浏览器似乎都在协商 transport=longPolling。但是 Chrome 与 transport=serverSentEvents 协商连接，我假设这就是 Chrome 中不调用客户端函数的原因。

**更多详细信息：** 我在 Windows 7 上使用完整的 IIS（不是 IIS express）。我使用的是 SignalR 版本 1.0.0-rc2。我已经禁用了我的 AVG 防火墙并且 Windows 防火墙没有运行。Chrome 的版本是 24.0.1312.56，在撰写本文时是最新的。该应用程序在本地主机上调用。

在 Chrome 上，signalR 连接似乎正常进行 - 调用了 $.connection.hub.start().done 回调函数。但在那之后，客户端函数永远不会被调用，即使其他浏览器工作得很好。

在客户端代码中，我打开了日志记录

```
$.connection.hub.logging = true; 
```

我可以在 Chrome 的 javascript 控制台中看到与成功连接相对应的日志消息。作为参考，这些日志消息是

```
[20:22:16 GMT+0800 (W. Australia Standard Time)] SignalR: Negotiating with '/SignalRChat-RC/signalr/negotiate'. jquery.signalR-1.0.0-rc2.js:54
[20:22:16 GMT+0800 (W. Australia Standard Time)] SignalR: Attempting to connect to SSE endpoint 'http://localhost/SignalRChat-RC/signalr/connect?transport=serverSentEvents&…7-22c5dbf27e0d&connectionData=%5B%7B%22name%22%3A%22chathub%22%7D%5D&tid=3' jquery.signalR-1.0.0-rc2.js:54
[20:22:16 GMT+0800 (W. Australia Standard Time)] SignalR: EventSource connected jquery.signalR-1.0.0-rc2.js:54
[20:22:16 GMT+0800 (W. Australia Standard Time)] SignalR: Now monitoring keep alive with a warning timeout of 40000 and a connection lost timeout of 60000 jquery.signalR-1.0.0-rc2.js:54 
```

但是当调用客户端方法时，Chrome 的 javascript 控制台中没有记录任何消息。

有趣的是，发送方法在 Chrome 上运行良好。其他客户端显示从 Chrome 发送的消息，即使 Chrome 本身看不到它。该应用程序几乎是来自[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr的 signalR 教程中的聊天应用程序](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

如果我在 start 方法中明确指定 longPolling，即

```
$.connection.hub.start({ transport: 'longPolling' }) 
```

然后 Chrome 工作正常。但我的期望是我应该能够允许浏览器协商它们的连接，并且一切都会正常工作。

作为参考，我的客户端代码的相关部分如下所示：

```
$(function () {
    // Turn on logging to the javascript console
    $.connection.hub.logging = true;

    // set up an error-handling function
    $.connection.hub.error(function (err) {
        alert("Error signalR:" + JSON.stringify(err));
    });

    // Declare a proxy to reference the hub.  
    var chat = $.connection.chatHub;

    // Create a function that the hub can call to broadcast messages.
    // This function is never called when running in Chrome with the default signalR connection
    chat.client.broadcastMessage = function (name, message) {
        // Html encode display name and message.  
        var encodedName = $('<div />').text(name).html();
        var encodedMsg = $('<div />').text(message).html();
        // Add the message to the page.  
        $('#discussion').append('<li><strong>' + encodedName
            + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
    };

    // Get the user name and store it to prepend to messages. 
    $('#displayname').val(prompt('Enter your name:', ''));
    // Set initial focus to message input box.   
    $('#message').focus();

    // Start the connection. 
    // Use $.connection.hub.start({ transport: 'longPolling' }) for reliability
    // Use $.connection.hub.start() to demonstrate that Chrome doesn't receive messages
    $.connection.hub.start().done(function () {
        // Enable the "Send" button
        $('#sendmessage').removeAttr('disabled');
        $('#sendmessage').click(function () {
            // Call the Send method on the hub.  
            chat.server.send($('#displayname').val(), $('#message').val());
            // Clear text box and reset focus for next comment.  
            $('#message').val('').focus();
        });
    });
}); 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:42:09.743

我在 Win7 Google Chrome 24 中尝试了该示例，它运行良好。

您可以对安装[Fiddler](http://www.fiddler2.com/)和在 javascript 中设置断点进行故障排除

```
POST /signalr/send?transport=serverSentEvents&connectionId=6ff0bffa-c31e-4d85-9aff-24f4528555ee HTTP/1.1
Host: localhost:43637
Connection: keep-alive
Content-Length: 113
Accept: application/json, text/javascript, */*; q=0.01
Origin: 
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
Content-Type: application/x-www-form-urlencoded
Referer: /index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

data=%7B%22H%22%3A%22chathub%22%2C%22M%22%3A%22Send%22%2C%22A%22%3A%5B%22gus%22%2C%22hello%22%5D%2C%22I%22%3A0%7D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T11:59:09.100

可能与缓冲响应有关。

[https://github.com/SignalR/SignalR/issues/1944](https://github.com/SignalR/SignalR/issues/1944)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T21:22:50.253

尝试`EnableJSONP = False`在服务器集线器上设置。这解决了我遇到的类似问题。

# php - 如何在php中的xml标签数组中获取内部文本

> ID：14504544
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:03.380
> 
> 标签：php, xml, arrays, xpath, simplexml

所以我有一个这样的xml：

```
<cars> 
    <brand name="Audi"> 
        <model>A1</model> 
        <model>A3</model>
        <model>A5</model> 
    </brand> 
    <brand name="Ferrari"> 
        <model>F12</model>
        <model>FF</model> 
    </brand> 
</cars> 
```

我想要的是将其转换为： $cars['Audi'][0]['A1'] 等等，但我不知道如何将内部文本放入标签中（例如：F12 ）。顺便说一句，我正在尝试使用 simplexml！

所以，现在我正在这样做：

```
$doc = new SimpleXmlElement($xml, LIBXML_DTDLOAD); 
$brands = $doc->xpath('//brand[@model="Audi"]');
$model_1 = $brands[0]->model[0]; 
```

当然，什么也没有发生……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:30:25.957

```
<cars> 
    <brand name="Audi"> 
        <model>A1</model> 
        <model>A3</model>
        <model>A5</model> 
    </brand> 
</cars> 
```

* * *

```
$cars = simplexml_load_file("cars.xml"); // root tag cars
// echo $cars->brand[0]['name'];
foreach ($cars->brand[0]->model as $model) {
echo $model;
} 
```

我让这个例子更酷：

```
<?php
echo "<head><style>html,body{padding:0;margin:0;background-color:black;text-align:center;}.ul{border-bottom:10px dashed #555555;width:50%;margin-left:25%;margin-right:25%;list-style-type:none;box-shadow:0px 0px 2px gold;}.li{font-size:100px;background-color:silver;color:white;font-family:arial;text-shadow:1px 1px black;}.li:nth-child(even){background-color:yellow;}</style></head><body>";

$cars = simplexml_load_file("cars.xml"); // root tag cars
// echo $cars->brand[0]['name'];

foreach($cars->brand as $brand) {
  echo "<div class='ul'>";
  foreach($brand->model as $model) {
    echo "<div class='li'>";
    echo $model;
    echo "</div>";
  }
  echo "</div>";
}

echo "</body>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:33:44.070

试试这个 ：

```
//cars/brand[@name="Audi"]/*[1] 
```

你的错误：

1.  属性匹配应该是`@name="Audi"`
2.  `*[1]`是第一个子节点

例子

```
$models = $doc->xpath('//cars/brand[@name="Audi"]/*[1]');
var_dump((string)current($models)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:36:32.133

```
<?php
$xml = '<cars> 
            <brand name="Audi"> 
                <model>A1</model> 
                <model>A3</model>
                <model>A5</model> 
            </brand> 
            <brand name="Ferrari"> 
                <model>F12</model>
                <model>FF</model> 
            </brand> 
        </cars>';

$doc = simplexml_load_string($xml);

foreach ($doc->children() as $brand) {
    foreach ($brand->children() as $model) {
        $cars[(string)$brand->attributes()->name][] = (string)$model;
    }
}

echo '<pre>';
print_r($cars);
echo '</pre>';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:43:15.957

好的，所以诀窍是在迭代时将标签转换为字符串，当然还要迭代它！

（字符串）$模型；

就是这样！我认为它是空的，因为当我检查它时调试器没有返回任何东西。

您的所有问题都解决了，非常感谢！

# c# - 使用批处理文件检查文件夹重命名是否成功

> ID：14504545
> 
> 赞同：1
> 
> 时间：2013-01-24T15:11:03.983
> 
> 标签：c#, batch-file, rename

我有一批要重命名文件夹。我怎么知道重命名是否成功，因为我不会一直在那里。我的批处理文件如下：

```
@echo off
ren "C:\Program Files (x86)\Application Folder" "AppFolder" 
```

我正在使用 C# 代码运行它，`Process.Start();`感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:21:22.110

如果要检查*批处理文件中*的重命名，只需执行以下操作：

```
@echo off
ren "C:\Program Files (x86)\Application Folder" "AppFolder"
if %errorlevel% gtr 0 (
   echo RENAME FAILED!
) 
```

如果你想在 C# 中检查重命名，我建议你在 C# 中进行重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:14:21.307

您应该`Exit Code`在调用它后检查流程实例的。- [http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:14:46.523

所以我在批处理文件处理方面很新。帮助某人是一种特权。

```
 process.StartInfo.FileName = @"C:\MyBatchFile.bat";
        process.Start();
        process.WaitForExit();

        // Check if renaming is successful.
        if (process.ExitCode != 0)
        {
            // Renaming failed.
        } 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:16:24.110

您总是可以在 c# 中执行此操作，而不是调用批处理文件。请参阅[File.Move](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)然后您可以捕获任何可能引发的异常...

# php - SQLite3 and last_insert_rowid

> ID：14504546
> 
> 赞同：1
> 
> 时间：2013-01-24T15:11:04.230
> 
> 标签：php, sqlite, lastinsertid, last-insert-id

This is how I create my handle

`$this->_handle = new SQLite3($this->_dbname);`

This is how I make my db query (shortened):

```
$stmt = $this->_handle->prepare($sql);
// execute query
$result = $stmt->execute();
// get all results
while($row = $result->fetchArray(SQLITE3_ASSOC)){
    $res[] = $row;
} 
```

Now I want to get the last inserted ID. I tried it this way:

```
public function last_insert_rowid()
{
    $result = sqlite_last_insert_rowid($this->_handle);
    var_dump($result);
    echo '<pre>';
    print_r($result);
    echo '</pre>';
    return $result;
} 
```

I get this error:

> Warning: sqlite_last_insert_rowid() expects parameter 1 to be resource, object given in ... on line 444 NULL

**Edit:** This cannot work because I must have it opened with [`sqlite_open()`](http://at2.php.net/manual/de/function.sqlite-last-insert-rowid.php).

I also tried it with this code:

```
function last_insert_rowid(){
    global $db;

    $sql = "SELECT last_insert_rowid();";
    $result = $db->ExecuteQuery($sql);
    var_dump($result);
    return $result;
    //return ($db->last_insert_rowid());
} 
```

I get the following error message:

> NULL Warning: SQLite3Stmt::execute() [sqlite3stmt.execute]: Unable to execute statement: constraint failed in ..

The error points to this line `$stmt->execute();`

How do I get my last inserted ID?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:26:47.070

The function has another name [`lastInsertRowID`](http://php.net/manual/en/sqlite3.lastinsertrowid.php). Solution:

```
public function last_insert_rowid()
{
    //$result = sqlite_last_insert_rowid($this->_handle);
    $result = $this->_handle->lastInsertRowID();

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:23:11.303

It looks to me like the query failed to execute. I would double check the query that's being run. Maybe you are setting a `NOT NULL` coulmn to `NULL` as indicated by `Unable to execute statement: constraint failed in`

# javascript - Ember 路由不显示模板内容

> ID：14504547
> 
> 赞同：2
> 
> 时间：2013-01-24T15:11:09.910
> 
> 标签：javascript, ember.js

我是 Ember 和 JS 的新手，到目前为止，我发现最广泛的教程是使用 1.0.0 pre2，但在官方网站上有一个非常好的描述和一些 1.0.0 pre4 的示例。我开始使用它。我被困在路由上，这是我的代码：

索引.html

```
<body>
        Loaded.
        <script type="text/x-handlebars" data-template-name="application">
            In template displaying val: {{name}}

            {{#linkTo "index"}}<img class="logo">{{/linkTo}}

            <nav>
              {{#linkTo "about"}}About{{/linkTo}}
              {{#linkTo "favorites"}}Favorites{{/linkTo}}
            </nav>

        </script>

        <script type="text/x-handlebars" data-template-name="about">
            Here comes the about text: {{str}}
        </script>
</body> 
```

应用程序.js

```
window.App = Ember.Application.create();

App.ApplicationView = Ember.View.extend({
templateName: 'application'
})

App.ApplicationController = Ember.Controller.extend({
name: 'test'
})

App.AboutView = Ember.View.extend({
templateName: 'about'
})

App.AboutController = Ember.Controller.extend({
str: 'my string'
})

App.Router.map(function() {
 this.route("about", { path: "/about" });
 this.route("favorites", { path: "/favs" });
}); 
```

它与网站上的几乎相同。我想要并认为应该发生的是，它将显示 about 模板的内容，但它只是将 url 更新为 /#/about 或 /#/favs 。我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:34:30.543

> 我想要并认为应该发生的是，它将显示 about 模板的内容，但它只是将 url 更新为 /#/about 或 /#/favs 。我在这里想念什么？

您的应用程序模板没有`{{outlet}}`. 有了它，它将按预期工作。

有关工作示例，请参阅此[jsbin 。](http://jsbin.com/epanan/1/edit)

# media-queries - 使用 zurb 基础时禁用移动媒体查询

> ID：14504550
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:14.853
> 
> 标签：media-queries, compass-sass, zurb-foundation

我正在尝试在使用基础框架时禁用移动媒体查询。我看到他们更新了框架以包含禁用媒体查询的功能：[https](https://github.com/zurb/foundation/issues/865) ://github.com/zurb/foundation/issues/865 。

我在我`app.scss`的媒体查询中看到了包含

`//@import "foundation/components/modules/mqueries";`

但正如你所看到的，它被注释掉了。

当我删除已`@media`编译的 CSS 中的查询时，它会起作用，但出于显而易见的原因，我不会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:24:31.053

app.scss 文件默认使用所有 Foundation。如果要禁用某些项目，则必须选择要保留的项目。

你可能有一个

```
@import "foundation" 
```

在文件的顶部。这应该被删除，然后你应该开始取消注释你想要保留的项目（实际上在 app.scss 文件中是这样描述的）。

# java - 使用 CXF JaxWSClientFactoryBean 创建 Web 服务客户端的 WSDL 解析异常

> ID：14504551
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:16.667
> 
> 标签：java, wsdl, weblogic, cxf, xerces

我编写了一些代码来使用 CXF 创建和运行 Web 服务客户端。我使用 JaxWsClientFactoryBean （不确定它是否是最佳解决方案）从 .wsdl 文件创建客户端。这里的目标是以编程方式避免使用 Spring 等。只需使用 Java 和 CXF 编写纯代码。

```
JaxWsClientFactoryBean cfb = new JaxWsClientFactoryBean();
cfb.setAddress(getServiceProperty(intClass, PROPERTY_KEY_URL_SUFFIX));
cfb.setServiceClass(intClass);
cfb.setOutInterceptors(getOutInterceptors(intClass));
cfb.setServiceName(SERVICE_NAME);
cfb.setWsdlURL("classpath:wsdl/" + intClass.getSimpleName() + ".wsdl");
cfb.setEndpointName(ENDPOINT_NAME);
Client client = cfb.create();
ClientProxy cp = new ClientProxy(client);
I intService = (I) 
   Proxy.newProxyInstance(intClass.getClassLoader(), new Class[] { intClass }, cp); 
```

我真的不确定这是否正确完成，但是当我在本地运行此代码以及在 Tomcat 上部署它时它可以工作。

不幸的是，我需要在 Weblogic 上运行此代码，这会导致奇怪的异常：

```
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was
made to insert a node where it is not permitted.
        at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:235)
        at org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:186)
        at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
        ... 26 more
Caused by: org.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was made to insert a node where it is not permitted.
        at com.sun.org.apache.xerces.internal.dom.ParentNode.internalInsertBefore(ParentNode.java:356)
        at com.sun.org.apache.xerces.internal.dom.ParentNode.insertBefore(ParentNode.java:284)
        at com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.insertBefore(CoreDocumentImpl.java:399)
        at com.sun.org.apache.xerces.internal.dom.NodeImpl.appendChild(NodeImpl.java:235)
        at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:1019)
        at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:939)
        at org.apache.cxf.staxutils.StaxUtils.read(StaxUtils.java:866)
        at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:226)
        ... 28 more 
```

这发生在应用程序部署期间。看起来 .wsdl 文件有问题，但是等等……它在 Tomcat 上运行！

我认为 Weblogic 中的 com.sun.org.apache.xerces.* 类实现与它的 JRockit VM 和标准 JVM 可能存在一些差异，但我不知道如何解决它。

我花了很多时间尝试不同的客户端创建方式。他们中的大多数在本地和 Tomcat 中工作，但在 WebLogic 上没有。

任何提示下一步该尝试什么？我有点厌倦这个话题：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:35:58.203

我同意您的怀疑，即问题与使用的 Xerces 版本有关。堆栈跟踪显示在您的案例中使用了 Xerces 的 Sun 实现，它是 Apache Xerces 的衍生产品。

请查看与 WebLogic 相关的[Apache CFX 应用程序服务器配置指南说明。](http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-WebLogic)

**WebLogic 类加载**

在 WebLogic Server 中，系统类路径中存在的任何 .jar 文件都由 WebLogic Server 系统类加载器加载。在服务器实例中运行的所有应用程序都加载到应用程序类加载器中，这些类加载器是系统类加载器的子级。在系统类加载器的这个实现中，应用程序不能使用系统类加载器中已经存在的不同版本的第三方 jar。每个子类加载器都向父类（系统类加载器）询问特定类，并且无法加载父类看到的类。

例如，如果一个名为 com.foo.Baz 的类同时存在于 $CLASSPATH 和应用程序 EAR 中，则加载来自 $CLASSPATH 的类而不是来自 EAR 的类。由于 weblogic.jar 在 $CLASSPATH 中，应用程序不能覆盖任何 WebLogic Server 类。

为了使用 Xerces 的替代版本，您必须创建一个 FilteringClassLoader。

**FilteringClassLoader 的使用**

*FilteringClassLoader*为您提供了一种机制来配置部署描述符，以明确指定应始终从应用程序加载某些包，而不是由系统类加载器加载。这允许您使用应用程序的替代版本，例如 Xerces 和 Ant。

FilteringClassLoader 位于应用程序类加载器和系统之间。它是系统类加载器的子类和应用程序类加载器的父类。FilteringClassLoader 拦截 loadClass(String className) 方法并将 className 与 weblogic-application.xml 文件中指定的包列表进行比较。

总之，检查[Apache CFX 应用程序服务器配置指南](http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-WebLogic)中包含的步骤，并注意明确指定`org.apache.xerces.*`包是从应用程序加载的，而不是从系统类加载器加载的。

例如，META-INF 中的 weblogic-application.xml 文件应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://www.bea.com/ns/weblogic/90">
    <application-param>
        <param-name>webapp.encoding.default</param-name>
        <param-value>UTF-8</param-value>
    </application-param>
    <prefer-application-packages>
        <package-name>javax.jws.*</package-name>
        <package-name>org.apache.xerces.*</package-name>
    </prefer-application-packages>
</weblogic-application> 
```

我希望这有帮助。

# vb.net - 摩托罗拉扫描仪 SDK BarcodeEvent 触发器

> ID：14504555
> 
> 赞同：3
> 
> 时间：2013-01-24T15:11:18.607
> 
> 标签：vb.net, barcode-scanner, motorola

对此的任何帮助都非常感谢 -

我在 VB .NET 中触发 BarcodeEvent 时遇到问题。扫描仪处于 USB（IBM 手持）模式，一切都可以与 SDK 附带的 C# 示例应用程序一起正常工作。此外，我可以在 VB .net 中使扫描仪发出哔哔声，因此驱动程序工作正常。我可能搞砸了将此 C# 代码转换为 VB

```
cCoreScannerClass.BarcodeEvent += new
_ICoreScannerEvents_BarcodeEventEventHandler(OnBarcodeEvent);

void OnBarcodeEvent(short eventType, ref string pscanData)
{
    string barcode = pscanData;
    this.Invoke((MethodInvoker)delegate { textBox1.Text = barcode; });
} 
```

-- 这是我的代码：--------

```
Imports CoreScanner
Imports System.Collections.Generic
Imports System.Text

Public Class Form1

    Public WithEvents cCoreScannerClass As CCoreScannerClass

    Sub Main()

        cCoreScannerClass = New CCoreScannerClass
        Dim scannertype(1) As Short
        scannertype(0) = 1
        Dim numberOfScannerTypes As Short
        numberOfScannerTypes = 1
        Dim status As Integer

        cCoreScannerClass.Open(0, scannertype, numberOfScannerTypes, status)

        AddHandler cCoreScannerClass.BarcodeEvent, AddressOf OnBarcodeEvent

        Dim opcode As Integer = 1001
        Dim outXML As String 
        Dim inXML = "<inArgs>" +
                       "<cmdArgs>" +
                           "<arg-int>1</arg-int>" +
                           "<arg-int>1</arg-int>" +
                       "</cmdArgs>" +
                    "</inArgs>"

        cCoreScannerClass.ExecCommand(opcode, inXML, outXML, status)

    End Sub

    Public Sub OnBarcodeEvent(eventType As Short, ByRef pscanData As String) Handles cCoreScannerClass.BarcodeEvent
        MsgBox("Success!")
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:56:37.383

After playing around with all the events, this same exact VB .net Code started working all of the sudden. I guess the scanner came to its senses when I did a reboot event. There is not a single example of VB .net for Motorola corescanner class, sooo You are welcome :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:01:50.393

我遇到了同样的问题，最终确定与Interop.CoreScanner.dll文件的权限有关。

在全新安装时，演示应用程序的简单“构建”将起作用。清理和重建会导致事件失败，但其他调用（如发现扫描仪或发出蜂鸣器）会起作用。我的自定义应用程序的行为方式与清理和重建的演示应用程序相同。

事实证明，SDK 为演示应用程序提供了与安装程序具有不同权限的预构建二进制文件：

*   预构建的二进制文件`Motorola Scanner\Scanner SDK\Scanner SDK\Sample Applications\bin`

```
           组：系统管理员用户
允许：                
 - 完全控制 XX             
 - 修改 XX             
 - 读取并执行 XXX
 - 阅读XXX
 - 写XX            
 - 特殊权限

```

*   图书馆副本在`Motorola Scanner\Common`

```
           组：系统管理员 BUILTIN (BUILTIN)？
允许：                
 - 完全控制 XXX
 - 修改 XXX
 - 读取并执行 XXX
 - 阅读XXX
 - 写XXX
 - 特殊权限

```

我不知道“BUILTIN”用户是谁，或者为什么用户组没有权限，或者为什么您可以使用后一种设置执行 DLL 中的一些但不是全部代码。

但是，用前者替换后者解决了我的问题。

# android - 在 android listview 的每一行中添加 textview 和 button

> ID：14504557
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:23.107
> 
> 标签：android, listview, button, textview

**在 android listview**的每一行中添加**textview** 和**按钮**，如果单击一行中的按钮，则仅应编辑或更改其行的 textview，其他行必须保持不受影响

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:18:49.927

要获得这一点，您需要使用自定义适配器和自定义布局。

在您的行 XML 文件中：

```
<TextView
    android:id="@+id/label"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button" /> 
```

在你的基础适配器中，你可以设置监听器做一些事情：

```
public class MyBaseAdapter extends BaseAdapter {

    // Some other method implementation here...

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Initialize the convertView here...

        LinearLayout layout = (LinearLayout) convertView.findViewById(R.id.row_layout);
        Button button = (Button) convertView.findViewById(R.id.button);

        layout.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(context, "Row clicked!", Toast.LENGTH_LONG).show();
            }
        });
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(context, "Button clicked!", Toast.LENGTH_LONG).show();
            }
        });
    }    
} 
```**

# ruby-on-rails - 在运行时确定 Rails 关联的 foriegn_key

> ID：14504564
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:42.620
> 
> 标签：ruby-on-rails, foreign-keys, associations

我有许多 Rails 模型，每个模型都是`has_one :myobj`. 我希望能够在运行时确定每个关联的外键是什么。这可能吗？

我不想重复[这个问题](https://stackoverflow.com/questions/6541794/how-to-get-the-name-of-foreign-key-column)。我想要从特定模型的角度来看的外键，而不是给定模式的默认外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:16:54.677

您可能正在寻找方法[reflect_on_association](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_association)。

在一个看起来像这样的模型上：

```
class Foo < ActiveRecord::Base
  has_one :myobj, foreign_key:'myobj_id', class_name:'Bar'
end 
```

运行该方法给了我这个：

```
1.9.3-p194 :001 > pp Foo.reflect_on_association(:myobj)
#<ActiveRecord::Reflection::AssociationReflection:0x96669f4
 @active_record=
  Foo(id: integer, name: string, created_at: datetime, updated_at: datetime),
 @collection=false,
 @macro=:has_one,
 @name=:myobj,
 @options={:foreign_key=>"myobj_id", :class_name=>"Bar"},
 @plural_name="myobjs"> 
```

# javascript - XZing 的 PhoneGap QR 码扫描仪

> ID：14504565
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:43.963
> 
> 标签：javascript, iphone, cordova, qr-code, zxing

我试图让 XZing 在我的 PhoneGap Iphone 应用程序上运行：

在做了一些研究之后，我发现了这个链接以获得将 XZing 安装到我的应用程序的最佳说明：

[为什么 XCode 4 在构建过程中找不到我的 .h 文件？](https://stackoverflow.com/questions/6284422/why-cant-xcode-4-find-my-h-files-during-a-build/14404363#14404363)

我完成了这些步骤并运行了没有错误的应用程序。

现在我正在尝试运行扫描仪并使用 BarcodeScanner 测试文件，这是我的代码

```
<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello World</title>
    </head>
    <body onLoad="onLoad()">
        <div class="app">
            <div id="running-bits">

<button id="scan-button">scan: ?</button>

<p>(<span id="test-count-current">?</span>
/
<span id="test-count-total">?</span>)

<p><img id="image" src="">

<p>expected text:
<br><tt><span id="test-text">?</span></tt>

</div>

<p><b id="test-done"></b>
<br><button id="start-over">start over</button>

<p>Results:
<ul id="results-list">
</ul>
        </div>
        <script type="text/javascript" src="cordova-2.3.0.js"></script>
        <script src="js/barcodescanner.js"></script>
        <script src="js/phonegap-app.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </body>
</html> 
```

phonegap-app.js 的代码在下面的链接中：

[https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/BarcodeScanner/test/phonegap-app/phonegap-app.js](https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/BarcodeScanner/test/phonegap-app/phonegap-app.js)

但是，当我单击扫描仪的扫描按钮时，它会失败，并且在日志中出现此错误：

BarcodeScanner 失败：异常扫描：TypeError: 'undefined' is not an object

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:51:31.410

您可以尝试以下操作：
1) 在 Cordova.plist 和barcodescanner javascript 文件中将字符串“org.apache.cordova.barcodeScanner”更改为“CDVBarcodeScanner”。
2) 在barcodescanner.js 中：
a) 将Cordova 更改为cordova
b) 在开头用hasResource 和addResource 注释行。

希望这会有所帮助。

# ruby-on-rails - 在我的 rails 应用程序中发送传真

> ID：14504566
> 
> 赞同：0
> 
> 时间：2013-01-24T15:11:46.437
> 
> 标签：ruby-on-rails, heroku, fax

我在 Heroku 上的 RoR 中构建了一个应用程序。我想在每次下订单时发送传真。对我来说最好的选择是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:14:55.143

您可以使用[InterFAX](http://www.interfax.net/en/dev)或[eFaxCorporate](http://www.efaxcorporate.com/)。我不认为这些 API 中的任何一个都预先与 Heroku 集成。[本书](http://my.safaribooksonline.com/book/web-development/ruby/9781847193933)记录了在 Ruby 环境中使用 InterFAX 。

# scala - sbt：抑制标准输出中的日志记录前缀

> ID：14504572
> 
> 赞同：12
> 
> 时间：2013-01-24T15:11:58.097
> 
> 标签：scala, logging, sbt

当使用带有 forking ( `fork in run := true`) 的 sbt 时，从我的应用程序到 stdout 的每个输出都以`[info]`;为前缀。输出到 stderr 的前缀是`[error]`.

当使用输出到 stderr 的 Java 日志框架时，这种行为有点烦人。生成的调试消息通常如下所示：

```
[error] [main] INFO MyClass ...
[error] [main] DEBUG MyClass ... 
```

我想在不分叉的情况下运行代码时抑制这些前缀。我尝试了什么：

*   `sbt -Dsbt.log.noformat=true`在 sbt 启动脚本中设置。但这只会删除彩色 ANSI 输出；前缀仍然存在，只是没有颜色
*   设置`logLevel in run := Level.Error`在`build.sbt`. 这似乎对使用分叉进行日志记录没有任何影响。

有没有办法抑制前缀？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-21T17:28:26.543

您需要设置项目的[输出策略](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking#configuring-output)。

在我的扩展构建中，我有以下设置：

```
settings = Project.defaultSettings ++ Seq(
  fork                  :=   true, // Fork to separate process
  connectInput in run   :=   true, // Connects stdin to sbt during forked runs
  outputStrategy        :=   Some(StdoutOutput) // Get rid of output prefix
  // ... other settings
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T13:57:14.233

可以做

```
sbt -error ... 
```

并且

```
sbt -warn ... 
```

# android - 像ipad一样在Android上滚动到顶部时如何自动刷新视图

> ID：14504577
> 
> 赞同：0
> 
> 时间：2013-01-24T15:12:07.893
> 
> 标签：android

在我的应用程序中，我已经有一个扩展 Activity 的 AllContentListScreen。它还有一个 customlistview 和一个用于检索数据的自定义适配器。我要实现的是，当我将屏幕滚动到视图的最顶部时，将显示一个旋转轮并且数据将自动刷新。这绝对是一个 UI 问题。任何适当的解决方案都将受到高度赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:16:35.123

你可以使用[android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)来做到这一点，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:19:10.657

使用[`Pull to Refresh`](https://github.com/chrisbanes/Android-PullToRefresh)Chris Banes 的图书馆。

# python - 用于处理大数据的 Pycuda 块和网格

> ID：14504580
> 
> 赞同：5
> 
> 时间：2013-01-24T15:12:14.577
> 
> 标签：python, cuda, gpu, pycuda, euclidean-distance

我需要帮助来了解我的块和网格的大小。我正在构建一个 python 应用程序来执行基于 scipy 的度量计算：欧几里得距离、曼哈顿、皮尔森、余弦、加入其他。

该项目是[PycudaDistances](https://github.com/vinigracindo/pycudaDistances)。

它似乎适用于小型阵列。当我进行更详尽的测试时，不幸的是它没有用。我下载了电影镜头集（[http://www.grouplens.org/node/73](http://www.grouplens.org/node/73)）。

使用`Movielens`100k，我声明了一个形状为 (943, 1682) 的数组。即用户对943部和1682部影片进行评价。不是分类器用户的电影我将值配置为 0。

使用更大的数组算法不再有效。我面临以下错误：

> pycuda._driver.LogicError：cuFuncSetBlockShape 失败：无效值。

研究这个错误，我找到了一个解释，告诉 Andrew 支持 512 个线程加入并使用更大的块，必须使用块和网格。

我想要一个帮助来调整算法欧几里得距离数组，以适应从小到大的数组。

```
def euclidean_distances(X, Y=None, inverse=True):
    X, Y = check_pairwise_arrays(X,Y)
    rows = X.shape[0]
    cols = Y.shape[0]
    solution = numpy.zeros((rows, cols))
    solution = solution.astype(numpy.float32)

    kernel_code_template = """
    #include <math.h>

    __global__ void euclidean(float *x, float *y, float *solution) {

        int idx = threadIdx.x + blockDim.x * blockIdx.x;
        int idy = threadIdx.y + blockDim.y * blockIdx.y;

        float result = 0.0;

        for(int iter = 0; iter < %(NDIM)s; iter++) {

            float x_e = x[%(NDIM)s * idy + iter];
            float y_e = y[%(NDIM)s * idx + iter];
            result += pow((x_e - y_e), 2);
        }
        int pos = idx + %(NCOLS)s * idy;
        solution[pos] = sqrt(result);
    }
    """
    kernel_code = kernel_code_template % {
        'NCOLS': cols,
        'NDIM': X.shape[1]
    }

    mod = SourceModule(kernel_code)

    func = mod.get_function("euclidean")
    func(drv.In(X), drv.In(Y), drv.Out(solution), block=(cols, rows, 1))

    return numpy.divide(1.0, (1.0 + solution)) if inverse else solution 
```

有关更多详细信息，请参阅：[https ://github.com/vinigracindo/pycudaDistances/blob/master/distances.py](https://github.com/vinigracindo/pycudaDistances/blob/master/distances.py)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T11:48:40.000

To size the execution paramters for your kernel you need to do two things (in this order):

## 1\. Determine the block size

Your block size will mostly be determined by hardware limitations and performance. I recommend reading [this answer](https://stackoverflow.com/q/9985912/681865) for more detailed information, but the very short summary is that your GPU has a limit on the total number of threads per block it can run, and it has a finite register file, shared and local memory size. The block dimensions you select must fall inside these limits, otherwise the kernel will not run. The block size can also effect the performance of kernel, and you will find a block size which gives optimal performance. Block size should always be a round multiple of the warp size, which is 32 on all CUDA compatible hardware released to date.

## 2\. Determine the grid size

For the sort of kernel you have shown, the number of blocks you need is directly related to the amount of input data and the dimensions of each block.

If, for example, your input array size was 943x1682, and you had a 16x16 block size, you would need a 59 x 106 grid, which would yield 944x1696 threads in the kernel launch. In this case the input data size is not a round multiple of the block size, you will need to modify your kernel to ensure that it doesn't read out-of-bounds. One approach could be something like:

```
__global__ void euclidean(float *x, float *y, float *solution) {
    int idx = threadIdx.x + blockDim.x * blockIdx.x;
    int idy = threadIdx.y + blockDim.y * blockIdx.y;

     if ( ( idx < %(NCOLS)s ) && ( idy < %(NDIM)s ) ) {

        .....
     }
} 
```

The python code to launch the kernel could look like something similar to:

```
bdim = (16, 16, 1)
dx, mx = divmod(cols, bdim[0])
dy, my = divmod(rows, bdim[1])

gdim = ( (dx + (mx>0)) * bdim[0], (dy + (my>0)) * bdim[1]) )
func(drv.In(X), drv.In(Y), drv.Out(solution), block=bdim, grid=gdim) 
```

[This question and answer](https://stackoverflow.com/q/5643178/681865) may also help understand how this process works.

Please note that all of the above code was written in the browser and has never been tested. Use it at your own risk.

Also note it was based on a very brief reading of your code and might not be correct because you have not really described anything about how the code is called in your question.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-28T19:23:21.690

原则上接受的答案是正确的，但是 talonmies 列出的代码并不完全正确。这条线： `gdim = ( (dx + (mx>0)) * bdim[0], (dy + (my>0)) * bdim[1]) )` 应该是： `gdim = ( (dx + (mx>0)), (dy + (my>0)) )` 除了一个明显的额外括号外，gdim 会产生比你想要的太多的线程。talonmies 在他的文章中已经解释过，线程是 blocksize * gridSize。然而，他列出的 gdim 会为您提供总线程数，而不是所需的正确网格大小。

# c# - 使用 Silverlight 和 Prism 的 ContentControl

> ID：14504582
> 
> 赞同：0
> 
> 时间：2013-01-24T15:12:23.337
> 
> 标签：c#, silverlight, prism

我对 Silverlight 中的 ContentControl 有疑问。ContentControl 仅在我第一次访问视图时显示其区域。其他时候，除非我刷新页面，否则它会显示任何内容。

这是xaml代码

```
<Grid x:Name="LayoutRoot">
    <ContentControl HorizontalAlignment="Center" 
     VerticalAlignment="Top" Name="contentControl" />
</Grid> 
```

和后面的代码：

```
public Staff()
{
        InitializeComponent();

        this.Title = ApplicationStrings.StaffPageTitle;

        IRegionManager regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
        if (!regionManager.Regions.ContainsRegionWithName(_moduleName))
        {
            RegionManager.SetRegionManager(contentControl, regionManager);
            RegionManager.SetRegionName(contentControl, _moduleName);
        }
} 
```

如果我每次都尝试设置区域，则会抛出一个错误，指出模块已经存在。

我应该怎么做，每次访问视图时都显示模块？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:39:17.837

看看[这个](http://csharperimage.jeremylikness.com/2009/11/dynamic-module-loading-with-silverlight.html)。（从**适应地区**开始阅读）。里面是对[John Papa](http://www.johnpapa.net/fill-my-prism-region-please/)博客的引用。也检查一下。

希望它可以帮助你。

# python - 将数据导入 Django 的好方法

> ID：14504585
> 
> 赞同：3
> 
> 时间：2013-01-24T15:12:31.950
> 
> 标签：python, django

我想定期将数据导入 Django 项目。我需要告诉我的数据提供者我想以什么格式接收数据。我应该用 Json、XML、CSV 格式要求它吗？

在 Django 中通常如何处理这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T15:16:25.080

Django 有一个用于导入数据的完整框架，称为 Fixtures。您可以在此处阅读可用格式（肯定有 JSON）：[https ://docs.djangoproject.com/en/dev/howto/initial-data/](https://docs.djangoproject.com/en/dev/howto/initial-data/)

还有一些数据应该是什么样子的例子。如：

```
[
  {
    "model": "myapp.person",
    "pk": 1,
    "fields": {
      "first_name": "John",
      "last_name": "Lennon"
    }
  },
  {
    "model": "myapp.person",
    "pk": 2,
    "fields": {
      "first_name": "Paul",
      "last_name": "McCartney"
    }
  }
] 
```

如果您将其另存为`beatles.json`，则可以通过运行将其导入`python manage.py loaddata /path/to/beatles.json`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:37:09.030

如果你想支持 CSV 或 XML，我建议使用[django-adaptors](http://django-adaptors.readthedocs.org/en/latest/)

# php - ZF2：zend 导航中子路由的活动分支。如何？

> ID：14504590
> 
> 赞同：3
> 
> 时间：2013-01-24T15:12:41.200
> 
> 标签：php, navigation, zend-framework2

我在 Zend Framework 2 中有这个作为路由配置：

```
'news' => array(
    'type' => 'Literal',
    'options' => array(
        'route' => '/news',
        'defaults' => array(
            '__NAMESPACE__' => __NAMESPACE__ . '\Controller',
            'controller' => 'News',
            'action' => 'index',
            'page' => 1,
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'index' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '[/:page]',
                'constraints' => array(
                    'page' => '\d+',
                ),
                'defaults' => array(
                    '__NAMESPACE__' => __NAMESPACE__ . '\Controller',
                    'controller' => 'News',
                    'action' => 'index',
                    'page' => 1,
                ),
            ),
        ),
    ),
), 
```

我还有一个导航，其中一个元素指向 route name `news`。

当我在`/news`页面上时，一切都很好，并且新闻导航元素处于活动状态。但是当我在`/news/2`哪个匹配路线上时`news/index`，导航元素不活动。

我如何告诉它对绑定到的路线的每条子路线都处于活动状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:02:22.750

您是否在导航设置中设置了控制器和操作？如果您设置它们，则无论设置哪个页面，它都应该匹配新闻路由，因为操作/控制器匹配：

```
'pages' => array(
     array(
        'label'        => 'News',
        'route'        => 'news',
        'controller'   => 'news',
        'action'      => 'index',
    ),
) 
```

# java - Hibernate：非法尝试将代理与两个打开的会话相关联

> ID：14504591
> 
> 赞同：2
> 
> 时间：2013-01-24T15:12:49.923
> 
> 标签：java, eclipse, hibernate, tomcat

我有两种方法：

```
public static Ticket issueTicket(User user,Service service,String[] seats) {
    Session ticSess= DB.factory.openSession();
    ticSess.beginTransaction();
    Date d= new Date();
    Ticket ticket=new Ticket(d, service, user);

    ticSess.save(ticket);
    ticSess.getTransaction().commit();
    int seatCount=seats.length;
    for (int i=0;i<seatCount;i++){
        int seatID=Integer.parseInt(seats[i]);
        Seat seat=getSeatByID(seatID);
        seat.setTicket(ticket);
        ticSess.update(seat);
    }
    return ticket;

} 
```

和，

```
public static Seat getSeatByID(int seatID) {
    Session proSess = DB.factory.openSession();
    proSess.beginTransaction();
    Seat c = (Seat) (proSess.load(Seat.class, seatID));
    proSess.getTransaction().commit();

    return c;
} 
```

当我调用 issueTicket 方法时，我得到：

```
illegally attempted to associate a proxy with two open Sessions 
```

如果我在 getSeatByID 方法中关闭会话，则会出现另一个错误，告知会话已关闭。这是堆栈跟踪：

```
at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:164)
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:285)
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
at ir.ac.shirazu.cse.Terminal.Seat_$$_javassist_9.setTicket(Seat_$$_javassist_9.java)
at ir.ac.shirazu.cse.Database.DB.issueTicket(DB.java:231) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T06:27:37.443

我有同样的问题。但是在使用单例模式进行会话之后，我就完成了。我正在使用休眠 4.2.x。

这是我的会话类，用于获取数据库事务等的会话。

```
public class SessionClass {

static Session session = PoolManager.getSession();

public static Session getSession() {
    if (session != null || session.isOpen()) {
        return session;
    } else {
        session = PoolManager.getSession();
        return session;
    }
} 
```

}

我正在使用的休眠助手类。

```
public class PoolManager {
private static final SessionFactory sessionFactory;
private static final ServiceRegistry serviceRegistry;

static {
    try {
        // Create the SessionFactory from standard (hibernate.cfg.xml) 
        // config file.
        Configuration configuration = new Configuration();
        configuration.configure();

        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);
    } catch (Throwable ex) {
        // Log the exception. 
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static Session getSession() {
    return sessionFactory.openSession();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:17:48.710

`proSess`在`getSeatByID()`返回之前尝试关闭。目前，`Seat`确实仍然附加到在 中打开的会话 `getSeatByID()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T20:28:21.180

我在尝试从 Envers 会话关联实体时遇到了这个问题。

在将其冒泡到我的算法之前，通过“刷新”所述实体（通过 PK 获取在我的非 Envers 会话中检索它）修复了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-21T14:32:00.903

使用`session.opensession().get(.....)`.. 而不是`session.opensession().load(.....)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T15:22:25.950

如果您在提交 proSess 之前执行 proSess.evict(c) 会怎样？

# wpf - WPF 依赖属性 - 需要在 GUI 上的即时反射

> ID：14504592
> 
> 赞同：1
> 
> 时间：2013-01-24T15:12:55.653
> 
> 标签：wpf, data-binding, treeview

只是关于依赖属性的快速介绍。我有一个树视图，我正在延迟加载，与 MVVM 模型绑定。在绑定属性 IsExpanded 上，我有这段代码

```
public bool IsExpanded
        {
            get { return _isExpanded; }
            set
            {
                if (value != _isExpanded)
                {
                    _isExpanded = value;
                    OnPropertyChanged("IsExpanded");
                }

                // Expand all the way up to the root
                if (_isExpanded && _parent != null)
                    if (!_parent.IsExpanded) _parent.IsExpanded = true;

                // Lazy load the child items, if necessary
                if (HasDummyChild)
                {
                    LoadChildren();
                }
            }
        } 
```

当您单击节点上的展开图标时会触发它，然后加载子节点，完成后，它会显示展开的子节点。

问题是这可能需要一些时间来加载，所以在加载时我想让一个孩子说“请稍候，正在加载......”然后当 LoadChildren() 方法完成时，它然后显示实际的孩子。

默认情况下，我将一个虚拟节点添加到子列表中，该节点具有此显示文本，然后调用 LoadChildren 并将该虚拟列表替换为实际列表，但问题是当您单击展开图标时，setter 首先触发，这需要在调用 GET 数据绑定以显示子项之前完全完成。

所以虚拟项目永远不会显示，它存在于子列表中，但是当设置器完成时，它已被替换，唯一显示的是完整列表，在打开它之前有一个暂停。

有没有一种方法可以让您在单击图标时首先使用现有的虚拟子节点在视觉上展开节点，然后尝试获取并加载实际的子节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:19:19.927

您需要在后台线程中执行加载。然而，将加载的子项添加到列表中需要在 UI 线程上执行。

像这样的东西：

```
public void AddChildrenAsync()
{
    var uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
    Task.Factory.Run(() => LongOperationThatReturnsTheChildren(); )
                .ContinueWith(t =>
                              {
                                  Children.AddRange(t.Result);
                                  Children.RemoveAt(0);
                              }, uiScheduler);
} 
```

在二传手：

```
// Lazy load the child items, if necessary
if (HasDummyChild)
{
    LoadChildrenAsync();
} 
```

# ios - xib和故事板之间的不同绘图行为？

> ID：14504595
> 
> 赞同：0
> 
> 时间：2013-01-24T15:13:12.527
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

大多数时候我都在用故事板做项目，但现在我需要维护一个使用 xib 文件的旧项目。我的问题是这个，我有一个`ViewController`带有滚动条的`UIButton`\\`UITextField`就可以了。如果我写这样的东西：滚动条`[scroller setHidden:YES];`内部`ViewDidLoad`将被隐藏，但是，如果我将它放在里面

```
-(IBAction)checkMember:(id)sender{
[scroller setHidden:YES];
    [self checkMemberLog]; 
```

只有当这些完成时，`setHidden`才会启动。

如何强制它立即启动？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:42:47.697

尝试像这样调用 checkMemberLog ：

```
[self performSelector:@selector(checkMemberLog) withObject:nil afterDelay:0]; 
```

即使延迟为 0，我认为这将使您的滚动条被隐藏，因为选择器在当前线程的运行循环中排队，并且必须在运行之前出列。尽管这几乎立即发生，但我猜测由 setHidden: 消息引起的显示更新首先排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:22:09.047

如果您对故事板更满意，也许值得您花时间开始一个新项目并导入所有旧的头文件/类文件。它最终可以为您节省一些时间和挫败感，具体取决于要带来多少。

# javascript - JavaScript JSON 通过给定键解析而不循环

> ID：14504600
> 
> 赞同：1
> 
> 时间：2013-01-24T15:13:31.507
> 
> 标签：javascript, json

给定一个 JSON 字符串，如下所示：

```
{
    "__ENTITIES": [
        {
            "__KEY": "196",
            "__STAMP": 1,
            "ID": 196,
            "firstName": "a",
            "middleName": "b",
            "lastName": "c",
            "ContactType": {},
            "addressCollection": {
                "__deferred": {
                    "uri": "/rest/Contact(196)/addressCollection?$expand=addressCollection"
                }
            },
            "__ERROR": [
                {
                    "message": "Cannot save related entity of attribute \"ContactType\" for the entity of datastore class \"Contact\"",
                    "componentSignature": "dbmg",
                    "errCode": 1537
                }
            ]
        }
    ]
} 
```

有没有办法只获取`__ERROR`记录，我知道我可以使用 `var mydata = json.parse(mydata)`然后从`mydata`对象中找到它。但我希望有一种方法可以只返回`ERROR`类似的字段 `json.parse(mydata, "__ERROR")`并且只获取`__ERROR`字段中的信息而不将整个 JSON 字符串转换为对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:18:12.283

> *“有没有一种方法可以只获取`__ERROR`记录，我知道我可以使用`var mydata = json.parse(mydata)`......但我希望有......类似的东西`json.parse(mydata, "__ERROR")`”*

可能有库可以执行此操作，但没有内置任何内容。您需要编写针对所需数据的代码。

您将获得的最接近的方法是将 reviver 函数传递给`JSON.parse`.

```
var errors = [];

var mydata = JSON.parse(mydata, function(key, val) {
    if (key === "__ERROR")
        errors.push(val);
    return val
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:18:10.113

如果存在这样的函数，它无论如何都必须解析整个事情，才能找到您要查找的密钥。

只需先解析它，然后获取所需的密钥：

```
var mydata = JSON.parse(mydata);
var errorObj = mydata.__ENTITIES[0].__ERROR[0]; 
```

如果需要，您可以创建自己的函数：

```
function parseAndExtract(json, key) {
    var parsed = JSON.parse(json);
    return parsed[key];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:55:16.247

> 无需将整个 json 字符串转换为对象

这几乎是不可能的，你需要对不适合 JS 的东西进行某种惰性评估。此外，您需要为比 native 慢的合理编写自己的解析器`JSON.parse`。

> 有没有办法只获取 __ERROR 记录

不是我知道的。此外，遍历整个对象树以查找具有该名称的第一个属性是一项不寻常的任务。更好地`__ENTITIES[0].__ERROR[0]`显式访问。

# olap - IE10 和 windows server 2012 中的 OLAP 多维数据集处理

> ID：14504605
> 
> 赞同：0
> 
> 时间：2013-01-24T15:13:37.330
> 
> 标签：olap, internet-explorer-10

我已经成功地将 OLAP 多维数据集与用于 IE6-IE9 和 Windows XP-Windows 7 的 Windows OWC 组件与 sql server 2005/2008 一起使用。到那时我还没有遇到任何问题。但是，当我尝试在 Windows Server 2012 上使用 IE 10 浏览器和 sql server 2005/2008 运行我的应用程序时，多维数据集不会呈现。它也没有给出任何错误信息。该页面只是不加载多维数据集。除此之外，所有其他功能都可以正常工作。同样，如果您在 IE8 兼容模式下运行 IE，它可以正常工作，但如果您将兼容模式更改为 IE9/IE10，则立方体根本不会显示。页面没有错误。我的 IE 安全设​​置完好无损。不确定我是否需要下载另一个软件或任何其他组件才能使立方体工作。任何帮助都会很棒，因为我在那两天被困住了。谢谢，尼希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T18:43:35.237

实际上问题出在调用的 vbscript 函数上。似乎 IE10 期望 vbscript 函数要么全部小写，要么全部大写。不允许混合大小写模式。将函数名称更改为所有小写字母效果很好

# database - 在 Dynamics CRM 2011 实例之间迁移数据？

> ID：14504607
> 
> 赞同：2
> 
> 时间：2013-01-24T15:13:43.370
> 
> 标签：database, dynamics-crm-2011, dynamics-crm, microsoft-dynamics

我有一个数据库已损坏的 Dynamics CRM 2011 实例。损坏的数据似乎与几个表（例如 PrincipalObjectAccess）隔离，并且该实例在所有外观上仍然正常运行。数据无法恢复（所有形式的 DBCC CHECKDB 等都已运行）并且备份不可用（对备份宣讲无助于解决问题）。

我尝试过使用 dbForge 和 Red-Gate 提供的模式和数据同步工具，模式同步有效，但数据同步似乎总是不一致。

在这个时刻，我认为我最好的方法可能是从 Dynamics CRM 2011 中导出所有数据，然后将其导入到 Dynamics CRM 2011 的新实例中。关于实现此目的的最佳方法有什么想法吗？或者改正这种情况的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:36:00.490

导出所有数据并将其导入新组织可能会产生更多错误，除非其他一切都失败，否则我不会真正选择该选项。

您说数据同步失败：您是否尝试过先从新实例中删除所有数据，然后再运行数据同步。当数据已经存在时，它应该比同步更简单。

您是否尝试过使用[ApexSQL Data Diff](http://www.apexsql.com/sql_tools_datadiff.aspx)同步数据？

您可以尝试的另一个不需要创建新组织的选项是读取 SQL Server 事务日志并检查是否可以在其中找到损坏的数据。如果您可以检索数据，那么您可以使用有效数据重新创建表，一切都会好起来的。不幸的是，这只能使用[ApexSQL Log等第三派工具](http://www.apexsql.com/sql_tools_log.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:13:03.947

我建议查看 CRM 2011 实例适配器

与 Scribe 不同，它是免费的。

微软博文：http: [//blogs.msdn.com/b/crm/archive/2012/10/24/the-microsoft-dynamics-crm-2011-instance-adapter-has-released.aspx](http://blogs.msdn.com/b/crm/archive/2012/10/24/the-microsoft-dynamics-crm-2011-instance-adapter-has-released.aspx)

PowerObjects 也写了一篇关于它的文章： [http ://www.powerobjects.com/blog/2012/10/26/introduction-microsoft-dynamics-crm-2011-instance-adapter/](http://www.powerobjects.com/blog/2012/10/26/introduction-microsoft-dynamics-crm-2011-instance-adapter/)

彼得

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:49:37.447

如果可以，导出到 Excel 并从那里导入。
*优点：简单、快速、易掌握*

如果不能，请设计一个控制台应用程序来连接到服务器、查询它、获取数据并将其推送到另一个实例中。
*优点：完全控制、可重复性、可配置性、凉爽因素，您可以输入一些代码*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T15:52:41.353

这实际上取决于您的数据范围。您是在谈论具有大量实体列表的数百万条记录，还是在谈论具有大约一千条记录的几个实体？

如果它很小，您可以随时尝试通过 excel 导出，然后导入到新组织中。

SSIS、CozyRoc 或 Scribe 可以解决问题。如果是关键任务情况，我会选择 Scribe 并逐个实体进行。

# php - 如何 str_replace 变量 $name 到文件

> ID：14504613
> 
> 赞同：0
> 
> 时间：2013-01-24T15:14:06.207
> 
> 标签：php, str-replace

当我尝试`str_replace`输入文件名时，`fff.php`我无法将`$var`名称打印到文件中。

```
<?PHP
$path_to_file = 'fff.php';
$var_str = var_export($viewer, true);
$file_contents = file_get_contents($path_to_file);
$file_contents = str_replace("//","case \"13\";
$viewer =\"jjhj/jhjh/344.mp3\";  //I put value to variable 
echo $viewer ; //Here I need to print the $ and name of the variable only
break;
//",$file_contents);
file_put_contents($path_to_file,$file_contents);
echo "your file is ok";
?> 
```

看看当我尝试替换变量的名称而不是值时，看看结果会发生什么 -

fff.php

```
<?php
$id=$_GET['id'];
switch ($id){
case "1";
$viewer = "jhhghg/pic1.jpg";
echo $viewer ;
break ;
// my str_replace starting
    case "13";
     ="jjhj/jhjh/344.mp3";  //I put value to variable but now name empty
    echo  ; //Here I need to print the $ and name of the variable only  also here
    break;
    //
    //my str_replace end
    default;
    echo"your request error";
    }
    ?> 
```

那是我的问题，我只需要打印变量名。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:24:33.097

您是否忘记转义“$”符号（$viewer）？转义它们，否则 php 将其假定为变量并将其替换为它的值，该值不存在。

```
$file_contents = str_replace("//","case \"13\";
\$viewer =\"jjhj/jhjh/344.mp3\";  //I put value to variable 
echo \$viewer ; //Here I need to print the \$ and name of the variable only
break; 
```

# solr - Lucene OR 查询不起作用

> ID：14504616
> 
> 赞同：2
> 
> 时间：2013-01-24T15:14:11.570
> 
> 标签：solr, lucene

我正在尝试使用以下要求查询 Solr：_ 我想获取所有没有特定字段的文档

> -排他性：[* TO *]

*   我想获取所有具有此字段并获得特定值的文档

> 排他性：（无）

因此，当我尝试使用以下命令查询 Solr 4 时：

fq=(-排他性:[* TO *]) 或排他性:(无)

如果该字段存在于文档中并且值为 None 但结果不包含第一个查询的结果，我只会得到结果！

我不明白为什么它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:31:10.880

为了解释您的结果，查询`(-exclusivity:[* TO *])`将始终没有结果，因为您没有指定要检索的任何结果。默认情况下，Lucene 不会检索任何结果，除非您告诉它获取它们。 `exclusivity:(None)`不是对完整结果集的限制，它是用于查找要检索的文档的键。这与数据库不同，数据库默认返回表中的所有记录，并允许您限制集合。

`(-exclusivity:[* TO *])`仅指定不获取的内容，但根本不告诉它获取任何内容。

Solr 具有处理纯否定查询的逻辑（我相信，与下面的方式大致相同，首先隐式检索所有文档），但据我收集的信息，仅作为顶级查询，它不处理`term1 OR -term2` [此处记录的](https://issues.apache.org/jira/browse/SOLR-3744)查询.

我相信使用 solr 您应该能够使用查询`*:*`来获取所有文档（尽管在原始 lucene 中不可用），因此您可以使用查询：

```
(*:* -exclusivity:[* TO *]) exclusivity:(None) 
```

这意味着，获取（除具有排他性值的文档之外的所有文档）或排他性 =“无”的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:02:01.610

我已经找到了这个问题的答案。我做出了错误的假设“-”在 solr 中是如何工作的。尽管如此

> -排他性：[* TO *]

将没有排他性字段的所有内容添加到数据集中，但事实并非如此。'-' 只能从数据集中排除事物。顺便说一句，femtoRgon 你是对的，但我将它用作 fq（过滤器查询）而不是作为我忘记提及的主查询。

所以解决方案就像

> -排他性：([* TO *] AND -(None))

完整的查询看起来像

/?q=*:*&fq=-排他性:([* TO *] AND -(None))

所以这意味着我将得到所有不具有字段独占性或具有此字段的内容，并且它填充了值 None。

# c# - 一个单独的线程是否需要它自己的 VersionControlServer 实例才能与另一个线程同时工作？

> ID：14504621
> 
> 赞同：2
> 
> 时间：2013-01-24T15:14:24.467
> 
> 标签：c#, tfs, tfs-sdk

假设我的 C# 程序中有任意数量的线程。每个线程都需要通过查找其历史来查找特定路径的变更集 ID。该方法如下所示：

```
public List<int> GetIdsFromHistory(string path, VersionControlServer tfsClient)
{ 
   IEnumerable submissions = tfsClient.QueryHistory(
      path,
      VersionSpec.Latest,
      0,
      RecursionType.None, // Assume that the path is to a file, not a directory
      null,
      null,
      null,
      Int32.MaxValue,
      false,
      false);

   List<int> ids = new List<int>();
   foreach(Changeset cs in submissions)
   {
      ids.Add(cs.ChangesetId);
   }
   return ids;
} 
```

我的问题是，每个线程都需要它自己的`VersionControlServer`实例还是一个就足够了？我的直觉告诉我，每个线程都需要自己的实例，因为 TFS SDK 使用 Web 服务，如果我真的要获得并行行为，我可能应该打开多个连接。如果我只使用一个连接，我的直觉告诉我，即使我有多个线程，我也会得到串行行为。

如果我需要与线程一样多的实例，我会考虑使用对象池模式，但是如果不使用连接会超时并在很长一段时间内关闭吗？在这方面，文档似乎很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:36:46.057

使用 SAME 客户端的线程似乎是最快的选择。

这是一个测试程序的输出，该程序运行 4 次测试，每次 5 次，并以毫秒为单位返回平均结果。显然，跨多个线程使用同一个客户端是最快的执行：

```
Parallel Pre-Alloc: Execution Time Average (ms): 1921.26044
Parallel AllocOnDemand: Execution Time Average (ms): 1391.665
Parallel-SameClient: Execution Time Average (ms): 400.5484
Serial: Execution Time Average (ms): 1472.76138 
```

作为参考，这里是测试程序本身（也在[GitHub 上](https://github.com/mrcaron/Tfs2010QueryHistoryPerfExp/commits/master/QueryHistoryPerformanceTesting/Program.cs)）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.TeamFoundation;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;
using System.Collections;
using System.Threading.Tasks;
using System.Diagnostics;

namespace QueryHistoryPerformanceTesting
{
    class Program
    {
        static string TFS_COLLECTION = /* TFS COLLECTION URL */
        static VersionControlServer GetTfsClient()
        {
            var projectCollectionUri = new Uri(TFS_COLLECTION);
            var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(projectCollectionUri, new UICredentialsProvider());
            projectCollection.EnsureAuthenticated();
            return projectCollection.GetService<VersionControlServer>();
        }

        struct ThrArg
        {
            public VersionControlServer tfc { get; set; }
            public string path { get; set; }
        }

        static List<string> PATHS = new List<string> {
            // ASSUME 21 FILE PATHS
        };

        static int NUM_RUNS = 5;
        static void Main(string[] args)
        {
            var results = new List<TimeSpan>();

            for (int i = NUM_RUNS; i > 0; i--)
            {
                results.Add(RunTestParallelPreAlloc());
            }
            Console.WriteLine("Parallel Pre-Alloc: Execution Time Average (ms): " + results.Select(t => t.TotalMilliseconds).Average());

            results.Clear();
            for (int i = NUM_RUNS; i > 0; i--)
            {
                results.Add(RunTestParallelAllocOnDemand());
            }
            Console.WriteLine("Parallel AllocOnDemand: Execution Time Average (ms): " + results.Select(t => t.TotalMilliseconds).Average());

            results.Clear();
            for (int i = NUM_RUNS; i > 0; i--)
            {
                results.Add(RunTestParallelSameClient());
            }
            Console.WriteLine("Parallel-SameClient: Execution Time Average (ms): " + results.Select(t => t.TotalMilliseconds).Average());

            results.Clear();
            for (int i = NUM_RUNS; i > 0; i--)
            {
                results.Add(RunTestSerial());
            }
            Console.WriteLine("Serial: Execution Time Average (ms): " + results.Select(t => t.TotalMilliseconds).Average());
        }

        static TimeSpan RunTestParallelPreAlloc()
        {
            var paths = new List<ThrArg>();
            paths.AddRange( PATHS.Select( x => new ThrArg { path = x, tfc = GetTfsClient() } ) );
            return RunTestParallel(paths);
        }

        static TimeSpan RunTestParallelAllocOnDemand()
        {
            var paths = new List<ThrArg>();
            paths.AddRange(PATHS.Select(x => new ThrArg { path = x, tfc = null }));
            return RunTestParallel(paths);
        }

        static TimeSpan RunTestParallelSameClient()
        {
            var paths = new List<ThrArg>();
            var _tfc = GetTfsClient();
            paths.AddRange(PATHS.Select(x => new ThrArg { path = x, tfc = _tfc }));
            return RunTestParallel(paths);
        }

        static TimeSpan RunTestParallel(List<ThrArg> args)
        {
            var allIds = new List<int>();

            var stopWatch = new Stopwatch();
            stopWatch.Start();
            Parallel.ForEach(args, s =>
            {
                allIds.AddRange(GetIdsFromHistory(s.path, s.tfc));
            }
            );
            stopWatch.Stop();

            return stopWatch.Elapsed;
        }

        static TimeSpan RunTestSerial()
        {
            var allIds = new List<int>();
            VersionControlServer tfsc = GetTfsClient();

            var stopWatch = new Stopwatch();
            stopWatch.Start();
            foreach (string s in PATHS)
            {
                allIds.AddRange(GetIdsFromHistory(s, tfsc));
            }
            stopWatch.Stop();

            return stopWatch.Elapsed;
        }

        static List<int> GetIdsFromHistory(string path, VersionControlServer tfsClient)
        {
            if (tfsClient == null)
            {
                tfsClient = GetTfsClient();
            }

            IEnumerable submissions = tfsClient.QueryHistory(
                path,
                VersionSpec.Latest,
                0,
                RecursionType.None, // Assume that the path is to a file, not a directory
                null,
                null,
                null,
                Int32.MaxValue,
                false,
                false);

            List<int> ids = new List<int>();
            foreach(Changeset cs in submissions)
            {
                ids.Add(cs.ChangesetId);
            }
            return ids;
        } 
```

# php - 限制php分页中的页面

> ID：14504622
> 
> 赞同：1
> 
> 时间：2013-01-24T15:14:25.497
> 
> 标签：php, pagination

我想限制下面我的分页 php 脚本上显示的页面数。这是几年前为我制作的脚本，虽然我在这里阅读过类似的问题，但它们的编码非常不同。

对此的任何帮助将不胜感激。

这是我当前的脚本：

```
<?php 
if ($max_pages>1) {
    echo "<br>";
    if ($page>0) {
        echo '<a href="'.$base_url.$sites_directory.($category_id==0?($page==1?'':($page-1).'/'):$category_id.'/'.$paginate[0].($page==1?'':'_'.($page-1)).'/').'" class="pagination">Previous</a>';
    }
    for ($x=0;$x<$max_pages;$x++) {
        if ($page<>$x) {
            echo '<a href="'.$base_url.$sites_directory.($category_id==0?($x==0?'':$x.'/'):$category_id.'/'.$paginate[0].($x==0?'':'_'.($x)).'/').'" class="pagination">'.($x+1).'</a>';
        }
        else {
            echo '<span class="pagination">'.($x+1).'</span>';
        }
    }
    if (($page+1<>$max_pages)) {
        echo '<a href="'.$base_url.$sites_directory.($category_id==0?($page==($max_pages-1)?'':($page+1).'/'):$category_id.'/'.$paginate[0].($page==($max_pages-1)?'':'_'.($page+1)).'/').'" class="pagination">Next</a>';
    }
}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:26:11.437

您当前的脚本`$x`在 0 和`$max_pages`.

您可以做的是首先将它们替换为`$from_page`and `$to_page`：

```
$from_page = 0;
$to_page   = $max_pages;

...

for ($x=$from_page; $x < $to_page; $x++) 
```

此时脚本将像以前一样工作。

现在，如果您只想显示从`$N`之前的`$N`页面到之后的页面`$page`，

```
$N = 5; // display 5+5+1 = 11 pages

$from_page = $page - $N; if ($from_page < 0) $from_page = 0;
$to_page   = $from_page + 2*$N+1; if ($to_page > $max_pages) $to_page = $max_pages;
$from_page = $to_page - 2*$N-1; if ($from_page < 0) $from_page = 0; 
```

可能不是最优雅的方式，但它会尝试适应以当前页面为中心的 11 页区域。您可能还想显示第 0 和 . 页的链接`$max_pages-1`。

## MRE版本

```
<?php 
if ($max_pages>1)
{
    $N = 5; // display 5+5+1 = 11 pages

    $to_page   = min($max_pages, max(0, $page - $N) + 2*$N+1);
    $from_page = max($to_page - 2*$N-1, 0);

    echo "<br>";
    if ($page > 0)
    {
        echo '<a href="'.$base_url.$sites_directory.($category_id==0?($page==1?'':($page-1).'/'):$category_id.'/'.$paginate[0].($page==1?'':'_'.($page-1)).'/').'" class="pagination">Previous</a>';
    }
    for ($x=$from_page; $x < $to_page; $x++) {

        if ($page != $x) {
            echo '<a href="'.$base_url.$sites_directory.($category_id==0?($x==0?'':$x.'/'):$category_id.'/'.$paginate[0].($x==0?'':'_'.($x)).'/').'" class="pagination">'.($x+1).'</a>';
        }
        else {
            echo '<span class="pagination">'.($x+1).'</span>';
        }
    }
    if (($page+1<>$max_pages)) {
        echo '<a href="'.$base_url.$sites_directory.($category_id==0?($page==($max_pages-1)?'':($page+1).'/'):$category_id.'/'.$paginate[0].($page==($max_pages-1)?'':'_'.($page+1)).'/').'" class="pagination">Next</a>';
    }
}?> 
```

# php - 我的工厂是反模式吗？

> ID：14504624
> 
> 赞同：14
> 
> 时间：2013-01-24T15:14:33.313
> 
> 标签：php, oop

我在另一个问题上看到了这段代码 - 第二个答案[链接](https://stackoverflow.com/questions/14329346/instantiate-different-class-based-on-the-object-type-in-php/14329418#14329418)，第一条评论是它是一个静态工厂反模式并且它违反了 SRP：

```
class User {
    public static function create($userid) {
        // get user from the database

        // set $isPartner to true or false
        // set $isClient to true or false
        // set $isModerator to true or false

        if ($isPartner) {
            return new Partner($userid);
        } elseif ($isClient) {
            return new Client($userid);
        } elseif ($isModerator) {
            return new Moderator($userid);
        } else {
            return new User($userid);
        }
    }
}

$person = User::create($userid); 
```

现在我可以理解为什么它违反了 SRP - 因为它处理连接到数据库以及构建新类，但除此之外我不确定我是否理解它为什么是反模式。

我想编写一些看起来与此非常相似的代码，所以我现在想知道是否要避免它，这是我的代码（在伪代码中）：

```
class DatabaseClass()
{
...deals with getting a result from the database...
}

abstract class User()
{
...base class for all users...
}

class AdminUser extends User(){}
class StaffUser extends User(){}
class BasicUser extends User(){}

class UserFactory()
{
    function createUser($privilege)
    {
        if($privilege=="high")
            return new AdminUser($privilege);
        else if($privilege=="med")
            return new StaffUser($privilege);
        else
            return new BasicUser($privilege);
    }

$db=new DatabaseClass($username,$password);
$result=$db->getUser();
$userfactory=new UserFactory();
$user=$userfactory->createUser($result); 
```

现在我没有使用静态方法，但我的 oop 是否仍会被视为反模式？

特别是因为我真的看不出做这样的事情有什么不同，而且几乎是一回事：

```
$result=DatabaseClass::getUser($username,$password);
$user=UserFactory::createUser($result); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:43:36.627

不，这不是反模式。就个人而言，每当我看到“反模式”这个词时，我都会持保留态度。那些不喜欢你的代码但又无法真正阐明原因的人很容易把它扔掉。

静态工厂的问题是任何使用工厂的类都必须显式地依赖它。这违反了我们应该依赖抽象而不是具体的原则（SOLID 中的“D”）。这使得使用工厂的代码更难重用和单元测试。但请记住，这种方法也有好处。它更容易编写，更容易理解。

您的代码等效于静态工厂方法。这两种情况的问题是调用者必须知道工厂的具体类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:44:07.830

你的工厂不是问题，我猜是与数据库的连接。除此之外，您很好地使用了工厂方法。

看到编辑后，最好将数据访问与工厂分开。从维护的角度来看，这与其说是一种“反模式”，不如说是一个坏主意。

如果您在工厂中有数据访问代码，只要该代码在一个单独的类中（在应用程序中重复使用以进行数据访问）并且您只需调用它，我仍然可以（不太好，但仍然可以）得到你需要的东西。在这种情况下，它将是两种模式的组合，工厂和外观。

我真正要注意的是找出数据是否在会话期间不会改变，如果是这样，只需去数据库一次并保留结果。如果您只创建一次用户（或派生类），请确保您只创建一次。

我认为比盲目尊重模式更重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T12:50:23.433

PHP 具有动态类实例化的功能，其中应该实例化的类名可以是一个变量。以下代码工作正常：

```
$classname='User';

$Object=new $classname; //instantiates new User() 
```

此代码实例化名称存储在 $classname 变量中的类。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-05-10T12:32:26.100

我对工厂模式不太了解，但是，如果您想获得一些好处，它可以基于持久性变化来抽象创建，例如它是否正在为用户调整数据库。

```
class DatabaseUserFactory implements UserFactory
{
    private $dbClass;

    function __construct(DatabaseClass $dbClass)
    {
        $this->dbClass = $dbClass;
    }

    /**
     * @return user
     */
    function createUser()
    {
        $result = $db->getUser();
        return $this->createUserByPrivilege($result->getPrivilege());

    }

    private function createUserByPrivilege($privilege)
    {
        if ($privilege == "high")
            return new AdminUser($privilege);
        else if ($privilege == "med")
            return new StaffUser($privilege);
        else
            return new BasicUser($privilege);
    }
}

$db          = new DatabaseClass($username, $password);
$userfactory = new DatabaseUserFactory($db);

// ...

$user = $userfactory->createUser(); 
```

# python - QApplication 实例导致 python shell 运行缓慢

> ID：14504630
> 
> 赞同：5
> 
> 时间：2013-01-24T15:14:52.850
> 
> 标签：python, pyqt, pyqt4, ipython

实例化 QApplication 对象后，我的 IPython shell 变得迟缓。例如，即使从新开始，以下代码也会使我的 shell 变得足够迟缓，以至于我必须重新启动它。

```
from PyQt4 import QtGui
app = QtGui.QApplication([]) 
```

一旦提交，我的打字就会滞后 2 或 3 秒。我的电脑不是很好，但我仍然有足够的可用内存，而且似乎只有 python shell 受到了影响。我已经尝试了默认的 python 解释器和 ipython 解释器，结果相同。有什么建议么？

更新：我还尝试使用魔法命令在 ipython 中运行一个独立的 pyqt“Hello World”程序，`%run`当我关闭生成的“Hello World”窗口后控制权返回给 ipython 时，它具有相同的效果；外壳变得迟缓，我的打字开始滞后 2-3 秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:24:40.643

这可能会有所帮助：

```
QtCore.pyqtRemoveInputHook() 
```

> 第一次导入 QtCore 模块时，它会安装 Python 输入挂钩（即，它设置 Python 的 PyOS_InputHook 变量的值）。这允许在应用程序运行时在解释器提示符下输入命令。然后可以动态创建新的 Qt 对象并调用任何现有 Qt 对象的方法。
> 
> 输入挂钩可能会导致某些类型的应用程序出现问题，尤其是那些通过不同方式提供类似功能的应用程序。这个函数移除了 PyQt 安装的输入钩子。
> 
> 可以使用 pyqtRestoreInputHook() 函数恢复输入挂钩。

[http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtcore.html#pyqtRemoveInputHook](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtcore.html#pyqtRemoveInputHook)

# java - 在java中使一个命令状态依赖于其他命令切换状态

> ID：14504635
> 
> 赞同：0
> 
> 时间：2013-01-24T15:14:56.937
> 
> 标签：java, eclipse, eclipse-plugin

我正在尝试添加一个命令活动状态与其他命令切换状态的依赖关系，但它不起作用，永远不会调用测试器类。这里做错了什么？

```
<extension
   point="org.eclipse.ui.handlers">
     <handler
        class="my.url.CaseSensitiveHandler"
        commandId="my.url.CaseSensitive">
        <enabledWhen>
          <with variable="activeWorkbenchWindow">
          <instanceof value="org.eclipse.ui.services.IServiceLocator"/>
          <test args="my.url.ResultsRegex"
            forcePluginActivation="true"
            property="org.eclipse.core.commands.toggle"
            value="false"/>
          </with>
        </enabledWhen>
     </handler> 
```

测试仪定义：

```
 <propertyTester
        class="my.url.CommandPropertyTester"
        id="my.url.commandPropertyTester"
        namespace="my.url"
        properties="toggle"
        type="org.eclipse.ui.services.IServiceLocator">
  </propertyTester> 
```

我有测试类：

```
public class CommandPropertyTester extends PropertyTester {

@Override
public boolean test(Object receiver, String property, Object[] args, Object expectedValue) {
    if (receiver instanceof IServiceLocator && args.length == 1 && args[0] instanceof String) {
        final IServiceLocator locator = (IServiceLocator) receiver;
        if (TOGGLE_PROPERTY_NAME.equals(property)) {
            final String commandId = args[0].toString();
            final ICommandService commandService = (ICommandService)locator.getService(ICommandService.class);
            final Command command = commandService.getCommand(commandId);
            final State state = command.getState(RegistryToggleState.STATE_ID);
            if (state != null) {
              return state.getValue().equals(expectedValue);
            }
        }
    }
    return false;
} 
```

我已经测试了这样定义的命令处理程序：

```
public Object execute(ExecutionEvent event) throws ExecutionException {
    Command command = event.getCommand();
    //boolean oldValue =
    HandlerUtil.toggleCommandState(command);

    final IWorkbenchWindow ww = HandlerUtil.getActiveWorkbenchWindowChecked(event);
    final IEvaluationService service = (IEvaluationService) ww.getService(IEvaluationService.class);
    if (service != null)
      service.requestEvaluation("org.eclipse.ui.commands.toggleState");

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:30:09.753

找到它，它是在测试器定义中输入错误的命名空间。

# c# - 应用程序意外关闭 c#.net

> ID：14504639
> 
> 赞同：-2
> 
> 时间：2013-01-24T15:15:13.860
> 
> 标签：c#

我继承了一个大型系统，我遇到了一个奇怪的问题，我单击一个按钮，整个应用程序崩溃，这是我在更新中包含最新的 dll 时。我没有任何异常或没有响应等，应用程序完全关闭。我不确定这是为什么。

我只需要知道这可能是什么原因，这是一个未处理的异常，我需要找到它吗？奇怪的是它在本地工作，只有当我在服务器上发布和运行时。

任何让我开始的想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:34:42.530

连接到服务器时，您应该始终在代码中包含某种异常处理。例如`try catch`，它允许您在消息框中打印异常消息以清楚地知道发生了什么。

```
try
    {
       //here you will have all the code that takes care of the database connection
    }
catch(Exception e)
    {
         // log error here.. E.g MessageBox.Show(e);
    } 
```

这是您在服务器连接方面应遵循的标准。这也将防止您的系统崩溃。

# oracle - Oracle 11g 中的 IMPDP - 从一种模式到另一种模式

> ID：14504644
> 
> 赞同：2
> 
> 时间：2013-01-24T15:15:39.910
> 
> 标签：oracle, oracle11g, oracle10g, oracle-dump

我曾经使用“exp”和“imp fromuser touser”以旧方式运行命令来获取 Oracle 数据库备份。现在，我正在尝试使用新命令来备份“expdp”和“impdp”。

## 脚步：

1.  在生产服务器上使用带有 schema 参数的 expdp 进行备份。我的用户名是“xxx”（不确定它是否完全导出了过程、函数和视图）。

2.  现在，首先在我的开发服务器上，我创建了另一个名为“yyy”的用户。我授予用户 'yyy' 目录访问权限并尝试运行命令 impdp，如下所示。

    C:\impdp yyy/yyy remap_schema=xxx:yyy 目录=abc dumpfile=123.dmp logfile=123.log

现在，我收到如下错误。

```
Import: Release 11.1.0.6.0 - Production on Thursday, 24 January, 2013 9:53:58

Copyright (c) 2003, 2007, Oracle.  All rights reserved.

Connected to: Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - Production

With the Partitioning, OLAP, Data Mining, and Real Application Testing options
ORA-31626: job does not exist
ORA-31633: unable to create master table "yyy.SYS_IMPORT_FULL_05"
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 95
ORA-06512: at "SYS.KUPV$FT", line 978
ORA-01031: insufficient privileges 
```

我错过了任何步骤吗？就像我必须创造一份工作或任何东西，不确定。基本上，我从一个用户那里得到了备份，需要在 Oracle 中的另一个用户上恢复。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:57:31.727

用户 yyy 将需要创建对象所需的适当权限。

请参阅：将对象导入您自己的架构所需的权限。

[http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_import.htm#BABFHCBI](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_import.htm#BABFHCBI)

还：

[http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#CJAIBFJG](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#CJAIBFJG)

许多数据泵导出和导入操作要求用户具有 DATAPUMP_EXP_FULL_DATABASE 角色和/或 DATAPUMP_IMP_FULL_DATABASE 角色。当您运行作为数据库创建一部分的标准脚本时，会自动为 Oracle 数据库定义这些角色。（请注意，尽管这些角色的名称包含 FULL 一词，但实际上所有导出和导入模式都需要这些角色，而不仅仅是 Full 模式。）

DATAPUMP_EXP_FULL_DATABASE 角色仅影响导出操作。DATAPUMP_IMP_FULL_DATABASE 角色影响导入操作和使用 Import SQLFILE 参数的操作。这些角色允许执行导出和导入的用户执行以下操作：

•在其架构范围之外执行操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:34:51.147

我相信，导入用户没有导入数据库目录的权限。在 Import db 中，选择 directory_name,directory_path from dba_directories；它将显示目录名称 sql>grant read,write on directory abc to ;

罗伯逊 Oracle 数据库中小企业 +91-9886321339

# linear-programming - 线性规划增加权重

> ID：14504647
> 
> 赞同：0
> 
> 时间：2013-01-24T15:15:53.277
> 
> 标签：linear-programming, polar-coordinates, cylindrical

我的任务是编写一个线性程序，该程序将告诉用户在哪里向圆柱形滚筒添加重量以平衡重心。重量为 2 磅和 5 磅，一个位置最多可添加 10 磅。2 磅重的重物是 2 英寸高，5 磅重的重物是 6 英寸高。我认为解决这个问题的最好方法是使用极坐标并假设现在是一个完美的圆柱体，因为它会在完美的 1% 以内。我还认为我应该开始只更改 X 和 Y 轴，并暂时将 Z 轴保持在 0。任何能让我朝着正确方向前进的提示将不胜感激。

```
!Drum weight problem;

!sets;
Sets:
Weight: Pounds, Height;
Location: X, Y, Angle;
Set(Weight, Location): PX, PY, PAngle;
Endsets

!data;
Data:
Weight = W1 W2 W3 W4;
Location = L1 L2 L3 L4;

!attribute values;
Pounds = 2 4 5 10;
Height = 2 4 6 12;
X = 0 1 2 3;
Y = 0 1 2 3;
Angle = 0 90 180 270;
Enddata

!objective;
Min = @MIN(Set(I, J): Weight (I, J), Location (K, L, M);

!constraints;
@FOR( Weight(I): [Weight_row]
  Pounds >= 2;
  Height >= 2;
@FOR( Location(J): [Location_row]
  X >=0;
  Y >=0;
  Angle >=0;
End 
```

# java - getChildDrawingOrder 调用/使用不规律？

> ID：14504649
> 
> 赞同：6
> 
> 时间：2013-01-24T15:16:18.883
> 
> 标签：java, android, drawing

我正在创建一个带有简单图块的等距地图，并且我已经扩展`RelativeLayout`以创建一个包含这些图块的布局。真的，`RelativeLayout`只要我的方向与将图块写入 XML 文件的顺序相匹配，就可以正常使用原样；我所覆盖的只是构造函数，我只是在其中调用`super`并`setChildrenDrawingOrderEnabled(true);`设置一些变量（网格的高度和宽度），然后是`getChildDrawingOrder`它本身。

我的代码用于`getChildDrawingOrder`计算给定子项的新索引，并将子项中的字符串设置为`i->i'`，其中`i`是原始索引，`i'`是新索引。我正在使用它进行测试；孩子们被设置为在他们自己身上绘制这个字符串以及他们的坐标。

不幸的是，它不能正常工作，或者说它工作不规律。在我的测试用例中的九个图块中，三个似乎根本没有`getChildDrawingOrder`调用：我上面提到的字符串是`null`. 在其余部分中，尽管传递了正确的索引，但至少有一个被乱序绘制。

这是一张图片（在`TOP`方向）：

![getChildDrawingOrder 失败的图像](../Images/bad0a7bfa9512ca71ca7de904277a57f.png)

请注意，(0,2)、(1,2) 和 (2,1) 都被列为`NULL`，因此`getChildDrawingOrder`似乎从未被调用过。还要注意，(1,0) 是在 (1,1) 之上绘制的，即使它的`i`(3) 和`i'`(1) 都小于 (1,1) 的 (4 和 4)。

这是来自的代码`getChildDrawingOrder`：

```
@Override
protected int getChildDrawingOrder(int childCount, int i)
{
    TileView ch = (TileView)getChildAt(i);
    ch.order = "Called"; // this string is drawn on my children
    int gx, gy; // the "true" x,y for the current rotation,
                // where 0,0 is the top corner
    switch (rotation)
    {
    case TOP:
        gx = ch.x();
        gy = ch.y();
        break;
    case LEFT:
        gx = (width()-1-ch.x());
        gy = ch.y();
        break;
    case RIGHT:
        gx = ch.x();
        gy = (length()-1-ch.y());
        break;
    case BOTTOM:
        gx = (width()-1-ch.x());
        gy = (length()-1-ch.y());
        break;
    default:
        gx = ch.x();
        gy = ch.y();
    }
    int row = gx+gy; // current row
    if ( row == 0 ) // row 0 is always just the top corner and 0
    {
        ch.order = new String(i+"->0"); // string set to i->i'
        return 0;
    }
    else
    {
        int mx = width()-1, // maximum x value
            my = length()-1, // maximum y value
            mrow = mx+my, // maximum row
            min = Math.min(mx, my), // minor axis length
            maj = Math.max(mx, my), // major axis length
            retn; // for storing the return value
        // inside the top corner
        if ( row <= min )
        {
            // Gauss's formula to get number of cells in previous rows
            // plus the number for which cell in this row this is.
            retn = row*(row+1)/2+gy;
        }
        // in the middle
        else if ( row <= maj )
        {
            // Gauss's formula to get number of cells in top corner
            // plus the number of cells in previous rows of the middle section
            // plus the number for which cell in this row this is.
            retn = min*(min+1)/2+min*(row-min)+gy;
        }
        // bottom corner
        else
        {
            retn = (min+1)*(min+2)/2 // cells in the top corner
                 + min*(maj-min) // cells in the middle
                 + (mrow-maj)*(mrow-maj+1)/2 // total cells in bottom triangle
                 - (mrow-row+1)*(mrow-row+2)/2 // less cells after this one
                 + gy // which cell in this row
                 - (row-maj) // to account for gy not starting at zero
                 ;
        }
        ch.order = new String(i+"->"+retn); // string set to i->i'
        return retn;
    }
} 
```

任何人都可以阐明发生了什么吗？为什么不`getChildDrawingOrder`调用这三块瓷砖？为什么 (1,0) 以错误的顺序绘制，即使它`getChildDrawingOrder` *被*调用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T20:43:48.630

好的，通过查看Android源代码弄清楚了。我有以下映射`getChildDrawingOrder`：`i`传递的是“我应该画哪个孩子*？* ” 不是“我什么时候应该画孩子我？” s的原因`NULL`是因为那些孩子是在他们自己的孩子`i`通过之前被画出来的。

我更改了我的代码以在传递期间找出所有孩子的顺序，将其`onMeasure`保存在 a`SparseIntArray`中，然后从`getChildDrawingOrder`. 这行得通。

顺便说一下，反向计算`getChildDrawingOrder`函数中的索引是个坏主意，除非您想依赖声明子项的顺序。因为如果您不依赖该顺序，则必须遍历孩子列表以找到具有适当 x 和 y 值的孩子，这意味着您必须遍历每个孩子的孩子列表。这是一个 O(n²) 操作（阅读：相当低效）。数学也相当复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-19T16:03:44.080

这是一个简单的例子，展示了如何覆盖`getChildDrawingOrder`

1.  作为一种调整哪个孩子按什么顺序绘制的方法（最后一个在最上面）
2.  通过点击/单击事件更改订单

**相对布局类：**

```
public class AlternatingChildDrawingOrderRelativeLayout extends RelativeLayout {

    // the childDrawingOrder modifier
    private int childDrawingOrderModifier = 0;

    public AlternatingChildDrawingOrderRelativeLayout(Context context) {
        super(context);
        init(context);
    }

    void init(Context context) {
        setClickable(true);
        setChildrenDrawingOrderEnabled(true);
        setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // increment to adjust the child drawing order
                childDrawingOrderModifier++;
                // call invalidate to redraw with new order modifier
                ViewCompat.postInvalidateOnAnimation(v);
            }
        });
    }

    @Override
    protected int getChildDrawingOrder(int childCount, int i) {
        // increment i with the modifier, then afford for out of bounds using modulus of the child count
        int returnValue = (i + childDrawingOrderModifier) % childCount;
        Log.v(VIEW_LOG_TAG, "getChildDrawingOrder returnValue=" + returnValue + " i=" + i);
        return returnValue;
    }

    public AlternatingChildDrawingOrderRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public AlternatingChildDrawingOrderRelativeLayout(Context context,
                                                      AttributeSet attrs,
                                                      int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init(context);
    }

    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
    public AlternatingChildDrawingOrderRelativeLayout(Context context,
                                                      AttributeSet attrs,
                                                      int defStyleAttr,
                                                      int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        init(context);
    }

} 
```

**xml布局**

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.ui.AlternatingChildDrawingOrderRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="300dp"
    android:layout_height="300dp">

    <View
        android:id="@+id/red"
        android:layout_width="125dp"
        android:layout_height="300dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentStart="true"
        android:background="#f00"
        />

    <View
        android:id="@+id/green"
        android:layout_width="125dp"
        android:layout_height="300dp"
        android:layout_centerInParent="true"
        android:background="#0f0"/>

    <View
        android:id="@+id/blue"
        android:layout_width="125dp"
        android:layout_height="300dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentEnd="true"
        android:background="#00f"/>

</com.example.ui.AlternatingChildDrawingOrderRelativeLayout> 
```

**它看起来像什么**

[![开始抽奖顺序（蓝色）](../Images/56d0dd7f71197d2534f41811bc4ce313.png)](https://i.stack.imgur.com/oWUjy.png) [![第一次点击（红色）](../Images/94dfb7b925973f9892d3f79d800e55f6.png)](https://i.stack.imgur.com/k2YQZ.png) [![第二次点击（绿色](../Images/38ddcbf5fd8f5bbe7a137d025c790320.png)](https://i.stack.imgur.com/e0iq1.png)

左图为开始绘制顺序，默认基于xml布局：

```
Red = index 0
Green = index 1
Blue = index 2 
```

所以从头到尾（或从下到上）就是：红色，绿色，蓝色。这是`getChildDrawingOrder`被调用的日志转储

```
V/View: getChildDrawingOrder returnValue=0 i=0
V/View: getChildDrawingOrder returnValue=1 i=1
V/View: getChildDrawingOrder returnValue=2 i=2 
```

在中间，我们第一次点击后，顺序变为绿色，蓝色，红色

```
V/View: getChildDrawingOrder returnValue=1 i=0
V/View: getChildDrawingOrder returnValue=2 i=1
V/View: getChildDrawingOrder returnValue=0 i=2 
```

而且，在右侧向我们展示了在我们第二次点击后的样子，因为顺序更改为：蓝色、红色、绿色。

```
V/View: getChildDrawingOrder returnValue=2 i=0
V/View: getChildDrawingOrder returnValue=0 i=1
V/View: getChildDrawingOrder returnValue=1 i=2 
```

在此之后的任何点击都会将其循环回原始顺序，由于模数计算，最后一次绘制蓝色

HTH！

# c# - 有什么方法可以通过编程方式更新 Sql Server 代理作业计划时间

> ID：14504651
> 
> 赞同：1
> 
> 时间：2013-01-24T15:16:21.533
> 
> 标签：c#, sql-server, sql-server-agent

目前我们有许多工作正在安排不同的时间，有什么方法可以通过编程方式运行所有工作来同时安排。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:11:09.903

您可以使用 msdb..sysschedules 表中的 T-SQL 更改开始时间。也许您可以创建一个存储过程并从您的 C# 代码中调用它。

下面的代码段会将所有作业设置为在上午 6:30:45 运行。

```
-- times are stored as integers, eg. 63045 = 06:30:45
update s set
    s.active_start_time = 63045
from msdb..sysjobs j
    left join msdb..sysjobschedules js on j.job_id = js.job_id
    left join msdb..sysschedules s on js.schedule_id = s.schedule_id 
```

有关详细信息，请参阅[dbo.sysschedules (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms178644.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:18:47.117

你应该看看SMO。此类提供对您可以在 SQL Management Studio 中执行的许多操作的编程访问。以下是有关如何使用 SMO 开始工作的链接。

[http://msdn.microsoft.com/en-us/library/ms202348.aspx](http://msdn.microsoft.com/en-us/library/ms202348.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:28:25.207

将所有作业更改为在凌晨 2:30 运行的完整 PowerShell 脚本：

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.Smo");
$svr = "."
$sql = new-object `
  Microsoft.SqlServer.Management.Smo.Server `
  $svr;;

$time = new-object -type "system.timespan" -argumentlist @(2,30,0)

$sql.jobserver.jobs | foreach-object {
    $_.jobschedules[0].activestarttimeofday = $time
    $_.jobschedules[0].alter()
} 
```

$time 可以根据需要进行调整，可以在循环中添加 IF 语句以仅修改特定作业，如果作业有多个计划，则需要对其进行修改，因为上述仅查看第一个计划。

# ios - 为什么没有设置 viewcontroller 属性？

> ID：14504656
> 
> 赞同：1
> 
> 时间：2013-01-24T15:16:29.530
> 
> 标签：ios, uiviewcontroller

在由按钮触发的方法中，我调用此代码：

```
//Get the sVC in order to se its property userLocation

    UITabBarController *myTBC = (UITabBarController*)self.parentViewController;
    for(UIViewController *anyVC in myTBC.viewControllers) {
        if([anyVC.class isKindOfClass:[SecondViewController class]])
        self.sVC = (SecondViewController *)anyVC;
        [self.sVC setUserLocation:self.userLocation];

        NSLog(@"userLocation ISSET to %@ from %@", self.userLocation, sVC.userLocation);
    } 
```

控制台日志总是记录正确的`self.userLocation`值，但不是`sVC.userLocation`，它总是出现空值。

此方法位于 uitabbarcontroller 的其中一个 tab-uiviewcontrollers 中，而 SecondViewController 是另一个 tab-uiviewcontroller。

为什么`sVC.userLocation`没有被设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:09:04.583

这一行：

```
if([anyVC.class isKindOfClass:[SecondViewController class]]) 
```

应该是：

```
if([anyVC isKindOfClass:[SecondViewController class]]) 
```

因为你想知道*`anyVC`*(not `anyVC.class`) 是否属于 type `SecondViewController`。

`anyVC.class`(or ) 返回的值`[anyVC class]`将是类型[`Class`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH3g-objc_class)并且永远不会是类型`SecondViewController`（因此`if`条件总是返回`NO`）。

由于`if`条件永远不会满足，`self.sVC`永远不会被设置并且可能保持不变，`nil`这意味着`setUserLocation`调用什么都不做，等等。

此外，您可能希望将所有与块相关的语句`self.sVC`放在`if`块内，否则即使条件失败`setUserLocation`，也会执行 get ：`NSLog``if`

```
for (UIViewController *anyVC in myTBC.viewControllers) 
{
    if ([anyVC isKindOfClass:[SecondViewController class]])
    {
        self.sVC = (SecondViewController *)anyVC;
        [self.sVC setUserLocation:self.userLocation];
        NSLog(@"userLocation ISSET to %@ from %@", ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:00:47.867

您可能需要考虑的其他事项：

*   在 sVc 中有你的 alloc/init 你的 userLocation 变量，例如 in`-init`或`-viewDidLoad`？

*   你有`@property (nonatomic, strong) CLLocation *userLocation`sVc 课程吗？

# linux - awk 更新为 txt

> ID：14504657
> 
> 赞同：1
> 
> 时间：2013-01-24T15:16:32.023
> 
> 标签：linux, awk

我有这个工作的代码，但结果没有更新到我的 alpha.txt。反正我能做到吗？我试图使用变量将我的第二个 e 更改为 f。a,b,c,d,e,e

```
 awk -F',' -v n="$line" -v na="$newalpha" 'NR==n{$6=na;}1' OFS="," alpha.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:20:38.897

您可以重定向它，例如：

```
awk -F',' -v n="$line" -v na="$newalpha" '
    NR==n{$6=na;}1
' OFS="," alpha.txt >/tmp/alpha.txt && mv /tmp/alpha.txt alpha.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:20:48.407

试试这个：（最好先备份）

```
awk -F',' '...yourScript..' alpha.txt > /tmp/alpha.tmp && mv /tmp/alpha.tmp alpha.txt 
```

# asp.net - 如何自定义基于 Windows 的身份验证？

> ID：14504660
> 
> 赞同：1
> 
> 时间：2013-01-24T15:16:40.803
> 
> 标签：asp.net, authentication, iis

我在 IIS 上有一个配置为使用 Windows 身份验证类型的站点。我需要做的是能够跳过为在域外连接的用户显示 Windows 凭据提示。在外部访问的情况下，我需要将用户重定向到同一站点上的自定义登录页面（基于 Windows 身份验证）。你能告诉我是否有能力做到这一点吗？

更新：IIS 上的站点配置为使用 Windows 身份验证类型 - 不应更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:22:50.917

更改身份验证模式您的 web.config

就像是：

```
 <authentication mode="Forms"> 
          <forms loginUrl="~/Account/LogOn" timeout="2880" /> 
   </authentication> 
```

# javascript - 为什么使用 jQuery(selector).get(0) 而不是 jQuery(selector)[0] 来获取 DOM 元素？

> ID：14504662
> 
> 赞同：20
> 
> 时间：2013-01-24T15:16:46.703
> 
> 标签：javascript, jquery

如果我只想将 jQuery 数组中的第一项作为 DOM 元素，使用 jQuery 使用`$(selector).get(0)`over有什么好处吗？`$(selector)[0]`

HTML：

```
<form id="myForm"></form> 
```

Javascript：

```
var selector = '#myForm';
var domElement = $(selector).get(0); //Returns [object HTMLFormElement]

//Or
var domElement = $(selector)[0]; //Also returns [object HTMLFormElement] 
```

*   `.get()`是要输入更多的字符。
*   `$(selector)`如果为空 ( `undefined`)则两种方法都返回相同的结果
*   [jQuery 文档`.get()`](http://api.jquery.com/get/)说明您可以简单地使用索引访问器来获取第 n 个元素，但您没有获得其他好处，`.get()`例如使用负数从数组末尾返回项目。
*   此外，您可以`.get()`不带参数调用以返回 jQuery 数组的所有 DOM 元素。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T15:19:01.970

`.get`允许您使用负索引。例如：

```
<span>1</span>
<span>2</span>
<span>3</span> 
```

`$("span").get(-1);`指第三种`span`。

但是如果您不需要该功能并且只想选择一个元素`.get(0)`并且`[0]`是相同的。注意`this[num]`：

```
// jQuery code
get: function (num) {
    return num == null ?

    // Return a 'clean' array
    this.toArray() :

    // Return just the object
    (num < 0 ? this[this.length + num] : this[num]);
}, 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-28T00:46:54.580

我的代表太低了，无法评论 ericbowden 的答案，但这是一个比较这两种操作的 jsperf 测试：

[http://jsperf.com/selector-get-0-vs-selector-0](http://jsperf.com/selector-get-0-vs-selector-0)

共识（在 Chrome 32 上）：基本相同，优势很小`[0]`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-24T15:59:46.053

为了提高速度，我创建了一个 jsfiddle，它每 10,000,000 次循环。我创建了两个测试，在文档的开头有一个表单，在文档的结尾有 1200 行虚拟 HTML。以下是一些初步结果：

```
Test1
form at beginning with .get(0): 15981ms - faster
form at beginning with [0]:     16089ms
form at end with .get(0):       16554ms
form at end with [0]:           15969ms - faster

Test2
form at beginning with .get(0): 14137ms
form at beginning with [0]:     14034ms - faster
form at end with .get(0):       13756ms - faster
form at end with [0]:           14492ms

Test3
form at beginning with .get(0): 15952ms - faster
form at beginning with [0]:     16810ms
form at end with .get(0):       15905ms
form at end with [0]:           15532ms - faster 
```

看起来速度上没有显着差异。但是，您必须检查不同的浏览器才能确定。

您可以在这里查看小提琴：http: [//jsfiddle.net/AFfYx/](http://jsfiddle.net/AFfYx/)（运行大约需要一分钟）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-26T13:24:50.593

作为人类代码**可读性**的热心粉丝，我认为这两种方法都不能令人满意。看起来太像容器索引了`.get(0)`。`[0]`将 jQuery 对象转换为 DOM 对象时，风险更大。所以我介绍了一个函数来[命名](https://wiki.c2.com/?IntroduceExplainingVariable)发生了什么。

```
function dom_from_$($jquery_object) {
    var dom_object = $jquery_object.get(0);
    return dom_object;
} 
```

像这样使用：

```
var dom = dom_from_$($(selector)); 
```

我还有一个以 形式命名转换函数的策略`x_from_y`，如`x = x_from_y(y);` 注意`$`美元符号彼此接近的方式。

# c# - 删除旧生成的 ListView-Entries

> ID：14504670
> 
> 赞同：1
> 
> 时间：2013-01-24T15:17:08.650
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml, windows-store-apps

我在 XAML 中有一个 ListView-Control：

```
<ListView x:Name="conversationContent" Grid.Column="2" Margin="20,0,0,20" FontFamily="Global User Interface" >
    <ListView.Resources>
        <CollectionViewSource x:Name="conversationContentSource" IsSourceGrouped="False" />
        <DataTemplate x:Key="DataTemplate1">
            <Grid HorizontalAlignment="Stretch">
                <Border x:Name="messageBorder" BorderBrush="Black" BorderThickness="1" Margin="0" CornerRadius="2" VerticalAlignment="Center" HorizontalAlignment="{Binding MTY, Converter={StaticResource messageAlignment}}" Child="{Binding MSG, Converter={StaticResource messageToRTF}}" />
            </Grid>
        </DataTemplate>
    </ListView.Resources>
    <ListView.ItemsSource>
        <Binding Mode="OneWay" Source="{StaticResource conversationContentSource}"/>
    </ListView.ItemsSource>
</ListView> 
```

在运行时从后面的代码中将其`CollectionViewSource`设置为一些。`ObservableCollection<Message>`

中的每个项目`ObservableCollection`都由转换器解析，它将完整的消息（包括 BB 代码）转换为单个`RichTextBlock`元素，其中包含其他 UI 元素。

有时，CollectionViewSource.Source-Property 更改为另一个`ObersableCollection<Message>`. 发生这种情况时，ListView-Control 会构建新的 ItemList 并显示它。只要好。

问题是，旧项目不会从内存中删除。手动运行 GC 不会在这里改变任何东西。

在更改源之前，我尝试遍历旧项目并删除它们。

```
for (int ix = conversationContent.Items.Count - 1; ix >= 0; ix--) {
    Debug.WriteLine("Type: " + conversationContent.Items.ElementAt(ix));
    if (conversationContent.Items.ElementAt(ix) is RichTextBlock) {
        conversationContent.Items.RemoveAt(ix);
    }
} 
```

但是没有 RichTextBlock-Controls，只有“消息”类型的对象。为什么？

我需要说，一些生成的元素可以包含带有`update`-function 的 Canvas-Elements，它每 200 毫秒被计时器事件调用一次。这个事件绑定可以防止 GC 杀死这个对象吗？

当控件不再使用时，我需要一种释放内存的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:18:01.953

首先，您应该尝试使用 UI 虚拟化 -> [http://blogs.southworks.net/dschenkelman/2009/01/29/how-to-show-large-amounts-of-data-in-wpf-using-ui-虚拟化/](http://blogs.southworks.net/dschenkelman/2009/01/29/how-to-show-large-amounts-of-data-in-wpf-using-ui-virtualization/)

这样，ListView 将回收用于呈现数据的控件，并且不会使用那么多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:43:47.977

您可以并且应该使用 a`RichTextBlock`作为您的`ItemTemplate`. 研究附加的行为或附加的依赖属性，以找出如何将属性添加到`RichTextBlock`将您的 BB 代码格式的消息转换为`RichTextBlock`内容的方法。[您可以在此处查看](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/f8ef5ce66b68#WinRTXamlToolkit/Controls/Extensions/RichTextBlockExtensions.cs)`RichTextBlock`将超链接文本添加到WinRT XAML 工具包中的示例。

要调查内存泄漏，请检查以下问题：[如何调试 Windows 应用商店应用程序中的内存泄漏？](https://stackoverflow.com/questions/13730496/how-to-debug-memory-leaks-in-windows-store-apps)

我看到的内存泄漏的最常见原因是从未删除的事件处理程序 - 确保删除您`RichTextBlock`的`Unloaded`事件中的所有处理程序。还要检查是否禁用了所有动画（例如在动画表情中）。

# servicestack - 服务栈注册

> ID：14504671
> 
> 赞同：2
> 
> 时间：2013-01-24T15:17:13.177
> 
> 标签：servicestack, registration

我创建了一个自定义 RegistrationFeature：

```
public class CustomRegistrationFeature: IPlugin
{
    private string AtRestPath {get; set;}
    public CustomRegistrationFeature ()
    {
       AtRestPath = "/register";
    }
    public void Register (IAppHost apphost)
    {
      appHost.RegisterService <CustomRegistrationService>(AtRestPath);
      appHost.RegisterAs <CustomRegistrationValidator, IValidator <CustomRegistration>>();
    }
} 
```

我在 AppHost 中配置：

```
Plugins.Add (new CustomRegistrationFeature ()); 
```

但在元数据页面中有 CustomRegistration 和 Registration。为什么？谢谢。

更新

自定义注册服务：

```
[DefaultRequest(typeof(CustomRegistration))]
public class CustomRegistrationService : RegistrationService
{
    public object Post(CustomRegistration request)
    {
        //base.Post( request);
        return new CustomRegistrationResponse();
    }
} 
```

CustomRegistration（请求 dto）：

```
[DataContract]
public class CustomRegistration : IReturn<CustomRegistrationResponse>
{
    [DataMember]
    public string Name{ get; set; } 
} 
```

CustomRegistrationResponse（响应 dto）：

```
[DataContract]
public class CustomRegistrationResponse
{
    [DataMember]
    public string Test { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:33:19.603

**CustomRegistration**服务应该会出现，虽然我们看不到它的实现，但我无法判断该服务是否已正确编写。

但是，由于您尚未注册[RegistrationFeature](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RegistrationFeature.cs) **，**因此没有理由出现在页面中。`/metadata`

# android - 如何发送短信多部分.. 更多 160 个字符

> ID：14504674
> 
> 赞同：0
> 
> 时间：2013-01-24T15:17:23.297
> 
> 标签：android, android-activity, smsmanager

我想发送超过 160 个字符的短信，但我只有多部分的问题......

```
//---sends a SMS message to another device---
public void sendSMS(String phoneNumber, String message, final String Id)
{      

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    //Toast.makeText(getBaseContext(), "SMS sent",Toast.LENGTH_SHORT).show();
                    getServerData("http://site.com","id",Id);

                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    //Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    //Toast.makeText(getBaseContext(), "No service", Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    //Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    //Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    //Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                   // Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                    break;                      
            }
        }
    }, new IntentFilter(DELIVERED)); 

  /*
                 Don't work
  SmsManager sms = SmsManager.getDefault();
  ArrayList<String> parts = sms.divideMessage(message);
  sms.sendMultipartTextMessage(phoneNumber, null, parts, null, null);
  */

  /* WORK FINE, BUT 160 chars limited */

  SmsManager sms = SmsManager.getDefault();
  sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T06:57:31.290

```
SmsManager sms = SmsManager.getDefault();
ArrayList<String> parts = sms.divideMessage(message);
sms.sendMultipartTextMessage(phoneNumber, null, parts, null, null); 
```

`sendMultipartTextMessage`将根据需要发送尽可能多的消息，直到所有部分都已发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:41:15.070

```
 ArrayList<String> parts = (ArrayList<String>) splitInChunks(smsText, 120);
   for (String str : parts) {
        smsManager.sendTextMessage(phoneNumber, null, str, null, null);
  }

  /* Split message in chunks */
  public static List<String> splitInChunks(String id, int chunkSize) {
  ArrayList<String> result = new ArrayList<String>();
  int length = id.length();
  for (int i = 0, j = 1; i < length; j++, i += chunkSize) {
     result.add(SMSPRETAG + j + "," + id.substring(i, Math.min(length, i + chunkSize)));
  }
  return result; 
```

}

如果你想变得更健壮，你可以为每个块添加一些唯一的 ID。

# blackberry - 调试一个在黑莓上出错的网站......没有黑莓

> ID：14504676
> 
> 赞同：0
> 
> 时间：2013-01-24T15:17:26.057
> 
> 标签：blackberry

调试我的网站上报告的仅影响黑莓的错误的最佳方法是什么（如果有的话）？是否有模拟器，或者更好的是某种代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:19:19.440

您可以使用[http://crossbrowsertesting.com/ 之](http://crossbrowsertesting.com/)类的工具。我们过去曾使用它来测试各种场景，效果很好。

# c# - XmlWriter

> ID：14504678
> 
> 赞同：2
> 
> 时间：2013-01-24T15:17:30.880
> 
> 标签：c#, xml, xmlwriter

抱歉，如果这很明显，但我正在尝试为这样的站点地图编写一些 xml：

```
<url>
    <loc>http://...</loc>
    <priority>0.5</priority>
    <image:image>
      <image:loc>http://...</image:loc>
     </image:image>
</url> 
```

使用以下代码：

```
 const string locationPrefix = "loc";
    const string imagePrefix = "image";
    writer.WriteStartElement("image", imagePrefix);
    writer.WriteStartElement("image", locationPrefix);
    writer.WriteValue(imageUrl);
    writer.WriteEndElement(); // </image:loc>
    writer.WriteEndElement(); // </image:image> 
```

但我得到了这个。

```
<image xmlns="image">
   <image xmlns="loc">http://...</image>
 </image> 
```

有人可以告诉我这里哪里出错了吗？

**编辑**：这做到了

```
writer.WriteStartElement("image", imagePrefix, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:28:05.960

`WriteStartElement`使用3 个参数的重载[http://msdn.microsoft.com/en-us/library/7cdfkth5.aspx](http://msdn.microsoft.com/en-us/library/7cdfkth5.aspx)

1.  *prefix*：元素的命名空间前缀。
2.  *localName*：元素的本地名称。
3.  *ns*：与元素关联的命名空间 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:32:49.397

您想为应该指向命名空间的 xml 元素添加前缀。试试这个

```
using(var ms = new MemoryStream())
using (var writer = XmlWriter.Create(ms))
{
    const string imagePrefix = "img";
    writer.WriteStartElement(imagePrefix, "image", "http://image.com");
    writer.WriteStartElement(imagePrefix, "local", "http://image.com");
    writer.Flush();
    writer.Close();
    Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));
} 
```

# iphone - 按下按钮后更改原型单元格中的标签

> ID：14504686
> 
> 赞同：0
> 
> 时间：2013-01-24T15:18:06.777
> 
> 标签：iphone, ios, xcode

我已经使用自定义单元格设置了一个表格视图：-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{SWHNearYouCell *cell = (SWHNearYouCell *)[tableView
                                  dequeueReusableCellWithIdentifier:@"NearYouCell"];

SWHNearYou *aPointer = [self.thingsNearYou objectAtIndex:indexPath.row];
cell.customNearYouLabel.text = aPointer.restrauntsNearYou;
return cell;
} 
```

我想在按下按钮时更改 customNearYouLabel 的文本，但要弄清楚如何在我的 -IBAction 方法中获取指向单元格的指针。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:24:25.480

`tableView:didSelectRowAtIndexPath:`您可以通过抓住单元格在您的方法中处理它。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.customNearYouLabel.text = @"New Text";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:24:58.920

我认为按钮不在表格单元格上？

如果是这样，您只需要更新`self.thingsNearYou`数组中的相关值。

如果你然后调用 [tableView reloadData] 那么表格将重新加载它的数据并且文本`customNearYouLabel`将会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:56:48.997

解决了 - 需要在 tableview 之前添加 self

```
-(IBAction)cancel:(id)sender{

    SWHNearYouCell *cell = (SWHNearYouCell *)[self.tableView
                                          dequeueReusableCellWithIdentifier:@"NearYouCell"];

cell.customNearYouLabel.text = @"New Text";

 NSLog(@"This is it: %@",cell.customNearYouLabel.text);

} 
```

作为 [self.tableView reloadData]，我需要花更多的时间来处理它；不会更新表格，但我认为这应该更容易解决。

# java - 使用正则表达式在 Eclipse 中删除非 utf8 字符

> ID：14504690
> 
> 赞同：1
> 
> 时间：2013-01-24T15:18:14.600
> 
> 标签：java, regex, eclipse

是否有可能在 Eclipse 中做到这一点？我有很多非 utf8 字符，例如 sch�ma 或 propri�t�（它是法语 :)）。现在，我正在删除那些字符手。如何删除这些字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:21:08.327

这些字符在 UTF-8 字符集中。

文本编码不正确，或者您在 Eclipse 中的文件编码设置不正确。

尝试右键单击文件-> 属性。然后检查文本文件编码是否设置为UTF-8，如果不是，请选择其他并将其更改为UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:29:56.220

我会编写一个小程序来读取文件，删除所有`char`> 127并写回文件。[我会将文件名作为命令行参数传递]

# php - 带有 ajax 的 PHP 清理 url 模板

> ID：14504697
> 
> 赞同：2
> 
> 时间：2013-01-24T15:18:43.043
> 
> 标签：php, ajax, clean-urls

我在如何使用干净的 url 构建网站模板时遇到了一些问题。

我的根目录中有以下文件和目录：

```
.htaccess (redirects every call to a non-existing file or directory to index.php)
index.php
/includes which contains header.php and footer.php
/pages with the requested pages
/ajax 
```

因此，在我的 index.php 中，我像这样处理 url：

```
$urlParts = explode('/', $_SERVER['REQUEST_URI']); 
```

所以我可以根据 $urlParts 中的第一个条目包含页面目录中的页面，该条目代表传递的页面。

到目前为止，一切都很好。

现在我有点卡在ajax 调用上，因为我使用了两种调用offcourse，get 和post。到目前为止，我只是使用完整路径调用 ajax 文件，例如 /ajax/account/login.php 但我想从我所有的 ajax 调用中创建干净的 url。

现在我对此有一些疑问： 1\. 在做 ajax 帖子时，我应该让它通过我的 index.php 并包含 ajax 文件吗？还是因为我包含了 header.php 和 footer.php 而过大了，因此如果它是一个 ajax 文件并且不包含 header.php 和 footer.php

1.  在进行 ajax 获取时，它也被传递给 index.php 并通过选择解析 ajax url 并执行 php 重定向到相应的 php 文件

所以一个帖子的包含和一个获取的重定向。

这是构建模板的好方法吗？我只是想在这里检查一下，因为我想为某些网站重用它，所以它必须是好的和可靠的:)

# dart - Dart：如何关闭浏览器窗口？

> ID：14504701
> 
> 赞同：0
> 
> 时间：2013-01-24T15:18:49.160
> 
> 标签：dart

如何通过例如关闭浏览器页面。一个 HTML 按钮和 Dart？我试过了

```
window.close(); 
```

这似乎没有做任何事情；

我也试过：

```
window.document.$dom_dispatchEvent(); 
```

使用 CloseEvent，但我不确定如何设置它。

我也尝试过 HTML 和 javascript，但没有成功。

请告知如何做到这一点。桌面型应用程序 IMO 需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:22:27.283

我用这个：

```
<form method="post">
<input type="button" value="Close Window" 
onclick="window.close()">
</form> 
```

也许试试

```
window.focus(); window.close() 
```

# ruby-on-rails - “序列化”以使用 mongoid 进行优化

> ID：14504708
> 
> 赞同：0
> 
> 时间：2013-01-24T15:18:53.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, serialization, mongoid

我有这个对象：

```
class MessageSetting
  include Mongoid::Document
  include Mongoid::Timestamps::Created

  #relationships
  embedded_in :user
  field :when_new_order, :type => Boolean, :default => "true"
  field :when_cancel_order, :type => Boolean, :default => "true"
  field :when_expire_order, :type => Boolean, :default => "true"
  field :when_reject_order, :type => Boolean, :default => "true"
  field :when_accept_order, :type => Boolean, :default => "true"
  field :when_in_progress_overtime, :type => Boolean, :default => "true"
  field :when_is_canceled_due_overtime, :type => Boolean, :default => "true"
  field :when_deliver_order, :type => Boolean, :default => "true"
  field :when_order_complete, :type => Boolean, :default => "true"
  field :when_open_dispute, :type => Boolean, :default => "true"
  field :when_buyer_request_refund, :type => Boolean, :default => "true"
  field :when_seller_made_refund, :type => Boolean, :default => "true"
  field :when_seller_made_dispute_response, :type => Boolean, :default => "true"
  field :when_buyer_made_dispute_response, :type => Boolean, :default => "true"

  attr_accessible :when_new_order, :when_cancel_order, :when_expire_order, :when_reject_order,
                  :when_accept_order, :when_in_progress_overtime, :when_is_canceled_due_overtime,
                  :when_deliver_order, :when_deliver_order, :when_order_complete, :when_open_dispute,
                  :when_buyer_request_refund, :when_seller_made_refund, :when_seller_made_dispute_response, :when_buyer_made_dispute_response

  def active_new_order?
   when_new_order?
  end

  def active_when_cancel_order?
   when_cancel_order?
  end

  def active_when_expire_order?
   when_expire_order?
  end

  def active_when_reject_order?
   when_reject_order?
  end

  def active_when_accept_order?
   when_accept_order?
  end

  def active_when_in_progress_overtime?
   when_in_progress_overtime?
  end

  def active_when_is_canceled_due_overtime?
   when_is_canceled_due_overtime?
  end

  def active_when_deliver_order?
   when_deliver_order?
  end

  def active_when_order_complete?
   when_order_complete?
  end

  def active_when_open_dispute?
   when_open_dispute?
  end

  def active_when_buyer_request_refund?
   when_buyer_request_refund?
  end

  def active_when_seller_made_refund?
   when_seller_made_refund?
  end

  def active_when_seller_made_dispute_response?
   when_seller_made_dispute_response?
  end

  def active_when_buyer_made_dispute_response?
   when_buyer_made_dispute_response?
  end

end 
```

我知道我可以使用 mongoid进行**“序列化” ：**

```
field :status_message_setting, type: Hash 
```

那么我可以：

```
m = MessageSetting.new
m.status_message_setting = {:when_new_order => true, :when_cancel_order => false, ...}
m.save 
```

**我需要知道关于性能、最佳实践和可用资源的信息，最好用`hash`这个模型“序列化”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:58:31.347

并非所有 Ruby 类都可以开箱即用地序列化，但幸运的是，哈希是可以序列化的类之一。因此，没有理由为它们编写自己的序列化。但是，如果您这样做并且速度有所提高，那将是最小的。序列化主要用于持久化具有自定义数据类型的字段。

它不会加速您的数据库，但如果您真的想节省空间，您可以为全布尔哈希创建一个自定义类型并将您的哈希序列化为位码。您将创建自定义类并根据您希望如何序列化数据来定义`mongoize`实例方法、`mongoize`、`demongoize`和类方法。`evolve`是的，这绝对是可能的。然而，在实践中，实现起来很麻烦，并且不会为您节省那么多空间，除非您的哈希值与模型中的其余数据相比很大。

对于您的情况，节省空间的一种更简单的方法是缩短所有字段名称，如下所示：

```
field :wno, as: :when_new_order, :type => Boolean, :default => "true"
field :wco, as: :when_cancel_order, :type => Boolean, :default => "true" ... 
```

Since the field name is repeated in the database for every document that is stored, long field names will begin to take up a lot of extra space. Since you pass an alias, e.g. `:when_new_order`, then your model will act exactly like it did before.

# android - 警告：窗口已经聚焦，忽略 com.android.internal.view 的焦点增益。iinputmethod 客户端 $stub$proxy 4148db78

> ID：14504709
> 
> 赞同：0
> 
> 时间：2013-01-24T15:18:57.743
> 
> 标签：android, android-intent, android-asynctask

我已经搜索并没有找到答案。我想调用 startActvity(newintent)，但页面没有改变。这是我的代码：

```
public class MainActivity extends Activity {
private TextView IdPeserta, Password;
//private ArrayList<NameValuePair> authentication;
@SuppressWarnings("unused")
//private String temp, _nama = "";
//private readURL rL;

public static String username = "";
public static String password = "";
public static String status = "FALSE";

public void setPassword(String password){
    MainActivity.password = password;
}

public void setUsername(String username){
    MainActivity.username = username;
}

public void setStatus(String status){
    MainActivity.status = status;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);
    IdPeserta = (TextView) findViewById(R.id.idPeserta);
    Password = (TextView) findViewById(R.id.password);
}    

public void Login(View view){
    setUsername(IdPeserta.getText().toString());
    setPassword(Password.getText().toString());
    if((IdPeserta.getText().length() > 0 && Password.getText().length() > 0)){
        RestTask task = new RestTask();
        task.applicationContext = MainActivity.this;
        task.execute();
    }else{
        Toast.makeText(this,"fill Id Peserta and Password 1", 0).show();
    }
}

public void authenticate(){
    if(status.equals("TRUE")){
        Intent i = new Intent(MainActivity.this, Home.class);
        //PendingIntent pending = PendingIntent.getActivity(this, 0, i, 0);
        startActivity(i);
        finish();
    }else if(status.equals("FALSE")){
        Log.d("gagal", "coba lagi");
    }
}

public static String getService() {

    String responseString = null;

    String baseurlString = "http://10.0.2.2:8080/UjianServices/authentikasi.php";

    RestClient client = new RestClient(baseurlString);
    client.AddParam("id_peserta", MainActivity.username);
    client.AddParam("password", MainActivity.password);

    try {
        client.Execute(RequestMethod.POST);
    } catch (Exception e) {
        Log.d("error", e.getMessage());
        //e.printStackTrace();
    }

    responseString = client.getResponse();

    return responseString;
}

public class RestTask extends  AsyncTask<Object, Object, Object>{
    private ProgressDialog dialog;
    protected Context applicationContext;

    @Override
    protected void onPreExecute() {
        this.dialog = ProgressDialog.show(applicationContext, "Calling", "Time Service...", true);
    }

    @Override
    protected void onPostExecute(Object result) {
        this.dialog.cancel();
        String status = result.toString();
        setStatus(status);
        authenticate();
    }

    @Override
    protected Object doInBackground(Object... arg0) {
        return MainActivity.getService();
    }
}

} 
```

当我不使用 RestTask 时，它可以更改页面。我如何改变我的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:56:35.170

因为是 null 你在使用它显示from之前`applicationContext`没有初始化。`applicationContext``ProgressDialog``onPreExecute`

您需要`applicationContext`在用于显示 ProgressDialog 之前进行初始化或仅用`MainActivity.this`作：

```
 @Override
    protected void onPreExecute() {
        applicationContext=MainActivity.this; //<<< initialize context here
        this.dialog = ProgressDialog.show(applicationContext, 
                                 "Calling", "Time Service...", true);
    } 
```

# c++ - Windows 7 上带有 MinGW G++ 错误可执行文件的犰狳

> ID：14504718
> 
> 赞同：3
> 
> 时间：2013-01-24T15:19:16.783
> 
> 标签：c++, windows-7, crash, mingw, armadillo

如果我尝试编译代码

```
 #include "armadillo"

  int main(int argc, char *argv[]) {
  } 
```

使用 MinGW g++ 和最新的犰狳（3.6.1），它在我的 windows XP 上运行良好，但如果我编译它并在 windows 7 上运行它，我会得到：“一个问题导致程序停止正常工作。”

什么可能导致这种情况？

我已经尝试过 4.6.2 和 4.7.2（下一个包含最新的 g++ -v）：

> 使用内置规范。COLLECT_GCC=g++ COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.7.2/lto-wrapper.exe 目标：mingw32 配置：../gcc-4.7.2/configure --enable-语言=c,c++,ada,fortran,obj c,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgo mp --disable-win32-registry --enable- libstdcxx-debug --disable-build-poststage1- with-cxx --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw 线程模型：win32 gcc 版本 4.7.2 (GCC)

请注意，在这个阶段，我什至没有链接任何像 LAPACK 这样的库。我也试过取消注释

> //#define ARMA_USE_LAPACK

在 config.cpp 中，但没有效果。顺便说一句，我可以在没有犰狳的情况下编译 c 代码，这在两个系统上都没有问题。只有添加犰狳才会引起问题。

更新：如果我按 ctrl-c 我得到：

> forrtl：错误（200）：由于 control-C 事件而导致程序中止图像
> PC 例程行源 lapack_win32_MT.d 103A49EA Unknown Unknown Unknown lapack_win32_MT.d 1034CD0E Unknown Unknown Unknown lapack_win32_MT.d 1035B254 Unknown Unknown Unknown kernel32.dll
> 755B6C19 Unknown Unknown Unknown kernel32。 dll
> 75513677 Unknown Unknown Unknown ntdll.dll
> 77DFC002 Unknown Unknown Unknown ntdll.dll
> 77DFBFD5 Unknown Unknown Unknown

更新：在另一个 Windows 7 系统上，我确实设法执行，但在编译时收到以下消息（编译犰狳包中的 example2.cpp 时）：

```
Info: resolving vtable for std::exception by linking to __imp___ZTVSt9exception (auto-import)
Info: resolving vtable for std::bad_alloc by linking to __imp___ZTVSt9bad_alloc (auto-import)
Info: resolving std::cout  by linking to __imp___ZSt4cout (auto-import)
Info: resolving std::nothrow  by linking to __imp___ZSt7nothrow (auto-import)
Info: resolving vtable for __cxxabiv1::__si_class_type_info by linking to __imp___ZTVN10__cxxabiv120__si_class_type_infoE (auto-import)
Info: resolving vtable for __cxxabiv1::__class_type_info by linking to __imp___ZTVN10__cxxabiv117__class_type_infoE (auto-import)
c:/mingw/bin/../lib/gcc/mingw32/4.5.0/../../../../mingw32/bin/ld.exe: warning: auto-importing has been activated without --enable-auto-import specified on the command line.
This should work unless it involves constant data structures referencing symbols from auto-imported DLLs. 
```

谢谢。

# c++ - 如何为 3D 矢量声明多个值？

> ID：14504719
> 
> 赞同：-1
> 
> 时间：2013-01-24T15:19:16.997
> 
> 标签：c++, arrays, vector, declaration

我有 typedef`typedef std::vector<std::vector<std::vector<double>>> three_d_vector;`来声明 3D 向量；但我想知道，如果可以的话，我如何在批量列表中声明各个值，比如数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:28:36.580

您需要在 C++11 模式下编译（例如，使用`-std=c++11`gcc 的命令行开关）并使用如下语法：

```
three_d_vector vec = { { {1., 2.}, {3.,  4., 17., 25.} },
                       { {5., 6., 12.}, {7.,  8.}, {0., 22.} },
                       { {9., 10.}, {11.}, {45.}, {33.}, {37., 11.} }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:28:59.063

假设您正在使用 C++11 并且您要求的是初始化向量的直接方法：

```
#include <vector>

using namespace std;

int main()
{
    typedef vector<vector<vector<double>>> three_d_vector;

    three_d_vector v =
    {
        {
            { 1, 2, 3 }, { 4, 5, 6 }
        },
        {
            { 0, 0, 1 }, { 1, 0, 0 }
        },
        {
            { 4, 0, 1 }, { 1, 0, 5 }
        },
    };
} 
```

但是，请注意，以这种方式定义 3D 矢量将使您可以自由地为每个维度设置不同的矢量大小。换句话说，这将是合法的：

```
 three_d_vector v =
    {
        {
            { 1, 2, 3, 7 }, { 4, 5, 6 }
        },
        {
            { 0, 0, 1 }, { 1, 0, 0, 8, 9, 15 }
        },
        {
            { 4, 0, 1 }, { 1, 0 }
        },
    }; 
```

这是否需要、可接受或不可接受取决于您的用例；无论如何，我想你可能想看看[**Boost.MultiArray**](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:28:34.383

使用 a`std::vector<std::vector<std::vector<double>>>`不会非常缓存连贯。改用 a [`Boost.MultiArray`](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/user.html)。

# parsing - ANTLR 解析文字和引用的 ID

> ID：14504726
> 
> 赞同：1
> 
> 时间：2013-01-24T15:19:29.393
> 
> 标签：parsing, antlr, grammar, quotes

我正在研究 ANTLR 中的 SQL 语法，它允许带引号的标识符（表名、字段名等）以及带引号的文字字符串。

问题是这个语法似乎总是将引用的输入匹配为“QUOTED_LITERAL”，而不是作为包含在引号中的 ID。

这是我的结果：

*   输入：'blahblah' 结果：string_literal 符合预期。
*   输入：field1 restul：column_name 符合预期
*   输入：table.field1 结果：column_spec 符合预期
*   输入：'table'.'field1' 结果：string_literal，MissingTokenException

下面是我对 SQL 语法的表达式部分的简化语法，如果有人可以帮助确定匹配引用规则而不是引用文字所需的内容，谢谢。

```
grammar test;

 expression
    :
    simpleExpression  EOF!
    ;

simpleExpression
    :
     column_spec
    | literal_value 
;
column_spec
    :
    (table_name '.')? column_name
    | ('\''table_name '\'''.')? '\'' column_name '\''
    | ('\"'table_name '\"' '.')? '\"' column_name '\"'
    ;

string_literal:     QUOTED_LITERAL ;
boolean_literal:    'TRUE' | 'FALSE' ;
literal_value :
    ( 
    string_literal  
    | boolean_literal 
    )   
        ;

table_name :ID;
column_name  :ID;

QUOTED_LITERAL:
    (  '\'' 
        ( ('\\' '\\') | ('\'' '\'') | ('\\' '\'') | ~('\'') )* 
    '\''  )
    |
    (  '\"'
        ( ('\\' '\\') | ('\"' '\"') | ('\\' '\"') | ~('\"') )* 
    '\"'  ) 
;

ID
    :   
    ( 'A'..'Z' | 'a'..'z' ) ( 'A'..'Z' | 'a'..'z' | '_'  | '0'..'9'| '::' )*
    ;

WHITE_SPACE : ( ' '|'\r'|'\t'|'\n' ) {$channel=HIDDEN;} ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:38:50.137

如果有人感兴趣，我从引用的文字字符串中删除了一点灵活性。文字字符串只能用单引号引起来，标识符可以选择用双引号引起来。只要文字引号和标识符引号定义明确并且它们不重叠，语法就很简单。

此策略使语法更加简洁，并且不会删除引用标识符的能力。我使用 JDBC 方法 getIdentifierQuote 来报告可以使用哪个引号来包装标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:06:59.610

这是您的经典移位/减少冲突。（除了 ANTLR 不移位或减少；因为它不是堆栈自动机。）

您有以下问题：

当您处于 simpleExpression 状态时，您需要**使用一个标记前瞻**来决定要采用哪个分支。在 ANTLR 的情况下，由于词法分析器和解析器之间没有区别，因此一个标记是单个字符。（您应该会看到来自 ANTLR 的有关冲突的警告。）

它变得更好了，“Bob Dillan”和“table1”有什么区别？从解析器的角度来看，没有。那么，您希望如何在以下方面有所作为：

```
('\"'table_name '\"' '.')? '\"' column_name '\"' 
```

和

```
(  '\"'
    ( ('\\' '\\') | ('\"' '\"') | ('\\' '\"') | ~('\"') )* 
'\"'  ) 
```

我强烈建议将`simpleExpression`规则重写为：

```
simpleExpression: 
    IDENTIFIER |
    IDENTIFIER . IDENTIFIER |
    QUOTED_LITERAL |
    QUOTED_LITERAL . QUOTED_LITERAL |
    boolean_literal; 
```

然后在 simpleExpression 的动作代码中决定要做什么。特别是因为我很确定您可以引用带引号的表；“users”和“Bod Dillan”在句法上总是相同的。

这也取决于更高级的语法，你也可以在更高的层次上解决友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:14:36.740

antlr 词法分析器是贪心的，因为当有两个可能的标记匹配时，它会匹配最长的一个。

当词法分析器看到“some_id”时，它可以将第一个引号匹配为一个引号，或者一个带引号的文字。文字较长，因此匹配。

作为旁注，您通常不希望词法分析器规则不匹配任何内容（如 ID）或在解析器规则中使用字符串常量，而仅引用标记名称。

你想做的是这样的。

```
QUOTE: '\'';
ID: ('a'..'z' | 'A'..'Z')+; // Must have at least one character
QUOTED_LITERAL: QUOTE ( (ID QUOTE) => { $type=QUOTE; } ) | .* QUOTE;

id: ID | QUOTE ID QUOTE;
quoted_literal: QUOTED_LITERAL | QUOTE ID QUOTE; 
```

如果词法分析器看到看起来像带引号的 id 的东西，它无法判断使用哪个，因此它将其分解为更小的标记。在您的解析器中，您在期望可能引用 ID 的地方使用 id，在期望 QUOTED_LITERAL 的地方使用quoted_literal。

当输入不明确时，QUOTED_LITERAL 中的语法谓词会阻止它匹配完整的引号。

看起来这个，它将无法正确解析像

```
'tag' text 'second' 
```

因为“文本”将被解析为 QUOTED_LITERAL。如果这是一个有效的输入，那么你需要类似的东西

```
fragment QUOTED_ID;
QUOTED_LITERAL: QUOTE ( ID {$type=QUOTED_ID} | .* ) QUOTE;
id: ID | QUOTED_ID;
quoted_literal: QUOTED_LITERAL | QUOTED_ID; 
```

（我的示例并未涵盖您输入中的所有情况，但扩展它应该是显而易见的。您可能还需要一些操作来在您的 AST 中生成正确的标记或从文本中添加/删除引号，这取决于您之后执行的操作你解析。）

# c# - 如何使用带有未知数量参数的动作

> ID：14504731
> 
> 赞同：2
> 
> 时间：2013-01-24T15:20:06.920
> 
> 标签：c#, parameters, delegates, action, parameter-passing

嗨，我想做类似的事情：

```
public class Subscription
{    
    private Action _action;        //????

    public Subscription( Action a )//????
    {
        _action = a;               //????
    }
}

public class testklass
{        
     public testklass()
     {
         new Subscription(a); // just to show you how i want to submit
         new Subscription(b);
         new Subscription(c);
     } 

     private void a() { }
     private void b(string gg){}
     private void c(int i, string g) { } 
} 
```

有没有办法做到这一点？它会花费很多性能吗？

任何意见是极大的赞赏

## 编辑：

**我要找一个调解员**

`testklass`只是一个订阅者，当另一个类发布与订阅匹配的对象时，创建一个`Subscription`对象并将其移交给执行`Mediator` 所有这一切背后的逻辑的人

但目前只想现在如何`Action`在我的容器对象中存储一个未知数量的参数`Subscription`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:32:58.173

```
public class Subscription<T>
    {
        private T _action;       

        public Subscription(T a)
        {
            _action = a;        
        }
    } 
```

你可以像这样使用它；

```
Action<int> func1 = (q) => q += 1;
Action<int,int> func2 = (q,w) => q += w;
Subscription<Action<int>> s1 = new Subscription<Action<int>>(func1);
Subscription<Action<int,int>> s2 = new Subscription<Action<int,int>>(func2); 
```

作为旁注，我不知道您要做什么，但可能有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:24:34.930

```
 public class testklass
    {
        public testklass()
        {
            new Subscription(a); // just to show you how i want to submit
            new Subscription(() => b("someparam"));
            new Subscription(()=>c(10, "someparam"));
        }

        private void a() { }
        private void b(string gg) { }
        private void c(int i, string g) { }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:31:15.490

您可以使用以下语法使您的函数获得各种参数的行列式计数

> resultType functionName(params object[] list) {...}

然后将该函数与您想要的任意数量的参数一起使用。

您也可以实现函数参数，如数组、列表或对象。然后你的函数将只接受一个参数 - 存储你的参数的对象。

所以，正如你所看到的，有很多方法可以做到这一点。

# performance - 缓存或寄存器 - 哪个更快？

> ID：14504734
> 
> 赞同：31
> 
> 时间：2013-01-24T15:20:22.207
> 
> 标签：performance, caching, memory, cpu, cpu-registers

如果这是问这个问题的错误地方，我很抱歉，但我已经搜索过并且总是找到不同的答案。我的问题是：

哪个更快？**缓存还是 CPU 寄存器？**

根据我的说法，寄存器是直接加载数据以执行它，而缓存只是靠近或在 CPU 内部的存储位置。

以下是我发现让我感到困惑的来源：

**2 用于缓存 | 1 用于寄存器**

[http://in.answers.yahoo.com/question/index?qid=20110503030537AAzmDGp](http://in.answers.yahoo.com/question/index?qid=20110503030537AAzmDGp)

**缓存更快。**

[http://wiki.answers.com/Q/Is_cache_memory_faster_than_CPU_registers](http://wiki.answers.com/Q/Is_cache_memory_faster_than_CPU_registers)

> 那么到底是哪一个呢？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-24T16:36:59.430

CPU 寄存器总是比 L1 缓存快。它是最接近的。差异大约是 3 倍。

试图使其尽可能直观，而不会迷失在问题背后的物理学中：电子学中的速度和距离之间存在简单的相关性。信号传播得越远，就越难将该信号传输到电线的另一端而不会损坏信号。这就是电子设计的“没有免费的午餐”原则。

推论是越大越慢。因为如果你把东西做得更大，那么距离不可避免地会变得更大。有一段时间是自动的，缩小芯片上的特征尺寸会自动产生更快的处理器。

处理器中的寄存器文件很小，并且在物理上靠近执行引擎。离处理器最远的是 RAM。您可以打开外壳并实际*看到*两者之间的电线。中间是缓存，旨在弥合这两个对立面的速度之间的巨大差距。每个处理器都有一个 L1 缓存，相对较小（通常为 32 KB）并且位于最靠近内核的位置。再往下是 L2 缓存，相对较大（通常为 4 MB）并且离核心更远。更昂贵的处理器也有一个 L3 缓存，更大更远。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-24T15:57:16.947

特别是在 x86 架构上：

*   从寄存器读取有 0 或 1 个周期延迟。
*   写入寄存器的周期延迟为 0。
*   读/写 L1 缓存有 3 到 5 个周期的延迟（因架构年龄而异）
*   由于回写缓冲区和存储转发功能，实际加载/存储请求可能在 0 或 1 个周期内执行（详情如下）

由于其设计，从寄存器读取在 Intel Core 2 CPU（和更早的型号）上可能有 1 个周期的延迟：如果从不同的寄存器读取足够多的同时执行指令，CPU 的寄存器组将无法在一个单循环。自 2010 年以来投放消费市场的任何 x86 芯片均不存在此设计限制（但存在于 2010/11 年发布的某些 Xeon 芯片中）。

L1 缓存延迟在每个模型中是固定的，但随着您及时回到旧模型，它往往会变慢。但是，请记住三件事：

1.  现在的 x86 芯片有一个 0 周期延迟的回写缓存。当您将一个值存储到内存中时，它会落入该缓存中，并且该指令能够在一个周期内退出。只有当您发出足够多的连续写入来填充回写式缓存时，内存延迟才会变得可见。自 2001 年左右以来，写回缓存在台式机芯片设计中一直很突出，但直到最近才出现在基于 ARM 的移动芯片市场中。

2.  如今的x86 芯片具有来自回写式缓存的***存储转发。***如果您将一个地址存储到 WB 缓存中，然后在几条指令后读回相同的地址，CPU 将从 WB 缓存中获取该值，而不是为其访问 L1 内存。这将*看似*L1 请求的可见延迟减少到 1 个周期。但实际上，在这种情况下根本没有引用 L1。存储转发还有一些其他规则使其正常工作，这些规则在当今市场上可用的各种 CPU 之间也有很大差异（通常需要 128 位地址对齐和匹配的操作数大小）。

3.  存储转发功能可能会产生*误报*，其中 CPU 根据快速部分位检查（通常为 10-14 位，具体取决于芯片）认为地址位于回写缓冲区中。它使用一个额外的循环来通过完整检查进行验证。如果失败，则 CPU 必须重新路由作为常规内存请求。此未命中可能会为合格的 L1 缓存访问增加额外的 1-2 个周期延迟。例如，在我的测量中，在 AMD 的 Bulldozer 上经常发生存储转发未命中的情况；足以使其 L1 缓存延迟时间比其记录的 3 周期高约 10-15%。这几乎是英特尔酷睿系列的一个非因素。

主要参考：[http](http://www.agner.org/optimize/) ://www.agner.org/optimize/ 特别是[http://www.agner.org/optimize/microarchitecture.pdf](http://www.agner.org/optimize/microarchitecture.pdf)

然后使用维基百科上各种 CPU 列表页面中的架构、模型和发布日期表格手动绘制信息。

# math - 从正常的对象方向

> ID：14504737
> 
> 赞同：1
> 
> 时间：2013-01-24T15:20:24.183
> 
> 标签：math, matrix, xna, algebra

在我的项目中，我通过将法线应用于模型矩阵来为对象指定方向。我的模型矩阵是缩放、旋转和平移矩阵的乘积。

```
p22.Normal.Normalize();
obj.UpVector = p22.Normal;
obj.RightVector = Vector3.Cross(obj.ForwardVector, obj.UpVector);
obj.RightVector = Vector3.Normalize(obj.RightVector);

obj.ForwardVector = Vector3.Cross(obj.UpVector, obj.RightVector);
obj.ForwardVector = Vector3.Normalize(obj.ForwardVector); 
```

每次更新对象时，都会计算模型矩阵。但正因为如此，我失去了对象的方向，因为旋转矩阵不包含有关方向的信息。此外，当我将法线应用于模型矩阵时，对象会失去其比例。

方向的向上向量作为地形的法线，这样就覆盖了一个轴。其他两个可以使用叉积来计算。面向对象的方向（Forward）和地形的法线（Normal）。由于叉积产生一个垂直于两个向量的向量，我可以计算右向量。

我试图将上述解决方案应用于旋转矩阵，但它给出了错误的结果。如何将法线应用于旋转矩阵？

```
Sample:
Object.Scale(10,new Vector3(1,0,0));
Object.Translate(0,10,10);
Object.Update() is equal to modelMatrix=scaleMatrix*rotationMatrix*translationMatrix;
...
*calculeting normal from highmap*
...

p22.Normal.Normalize();
modelMatrix.UpVector = p22.Normal;
modelMatrix.RightVector = Vector3.Cross(obj.ForwardVector, obj.UpVector);
modelMatrix.RightVector = Vector3.Normalize(obj.RightVector);

modelMatri.ForwardVector = Vector3.Cross(obj.UpVector, obj.RightVector);
modelMatri.ForwardVector = Vector3.Normalize(obj.ForwardVector);
//the scale is lost.

object.Translate(10,10,10)
object.Update(); //orientation applied to model matrix is lost. 
```

整个问题是为什么将法线应用于旋转矩阵不会给出相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:41:34.333

Stave H 评论让我知道我做错了什么。在我的情况下，旋转矩阵包含没有倾斜的 2D 旋转！添加额外的矩阵后，一切正常。

```
 public void Update()
    {
        ModelMatrix = scaleMatrix * (orientationMatrix * rotateMatrix) * translateMatrix;

    } 
```

# ruby-on-rails - 如何同时使用 Devise 和 Doorkeeper gem？

> ID：14504739
> 
> 赞同：14
> 
> 时间：2013-01-24T15:20:33.290
> 
> 标签：ruby-on-rails, devise, oauth-2.0

我正在构建一个使用 Devise gem 进行身份验证的 Web 应用程序（也带有 API），并且我还使用 Doorkeeper gem 进行 API 部分的身份验证。

现在的问题是，当我转到接收 Oauth2 代码（和登录）的 URL 时，我被重定向到 Web 应用程序而不是客户端回调 URL。

我需要做的是在正常登录时重定向到 Web 应用程序，并在使用 Oauth 时重定向到回调 URL。

我怎样才能做到这一点？我正在覆盖设计会话控制器，但我不知道要放入什么。

这是我的代码：

```
def new
    session[:return_to] = params[:return_to] if params[:return_to]
    resource = build_resource
    clean_up_passwords(resource)
  end

  def create
    resource = warden.authenticate!(auth_options)
    sign_in(resource_name, resource)
    if session[:return_to]
      redirect_to session[:return_to]
      session[:return_to] = nil
    else
      respond_with resource, :location => after_sign_in_path_for(resource)
    end
  end 
```

问题是 Devise 似乎忽略了我的重定向逻辑。

请进一步咨询。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T13:15:01.317

假设您的资源已`user` 添加`session[:user_return_to] = request.fullpath`到 resource_owner_authenticator 块

例子：

```
resource_owner_authenticator do
  #raise "Please configure doorkeeper resource_owner_authenticator block located in #{__FILE__}"
  # Put your resource owner authentication logic here.
  # Example implementation:
  session[:user_return_to] = request.fullpath
  current_user || redirect_to(login_url)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-07T19:09:06.220

这对我有用，在 ApplicationController （设计的控制器继承自）：

```
def store_location
  # store last url as long as it isn't a /users path
  session[:previous_url] = request.fullpath unless request.fullpath =~ /\/users/
end

def after_sign_in_path_for(_resource)
  session[:previous_url] || root_path
end 
```

在 Doorkeeper 初始化程序中：

```
resource_owner_authenticator do
  if user_signed_in?
    current_user
  else
    session[:previous_url] = request.fullpath unless request.fullpath =~ /\/users/
    redirect_to(new_user_session_path)
  end 
```

结尾

这个想法是在会话 cookie 中记住您来自的路径，然后让 Devise 在调用自己的`after_sign_in_path_for`回调时重定向到那里。

[文档](http://www.rubydoc.info/github/plataformatec/devise/Devise/Controllers/Helpers:after_sign_in_path_for)指出了`resource_return_to`会话密钥，但这对我有用，所以我不再检查了。

# javascript - 如何使用 Select2 ajax 中的敲除绑定到选定的文本

> ID：14504746
> 
> 赞同：0
> 
> 时间：2013-01-24T15:20:55.287
> 
> 标签：javascript, knockout.js, jquery-select2

我正在使用敲除 + select2 并且我的下拉列表之一的数据是使用 ajax 延迟加载的（select2 支持）。

我需要能够绑定下拉列表的选定文本，但找不到方法。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T05:09:18.957

我已经使用 knockoutjs 事件绑定成功地做到了这一点：

HTML：

```
 select2: { minimumInputLength: 3, allowClear: true, query: ajaxQuery }, event: { change: eventHandler }" /> 
```

JS：

```
self.eventHandler = function (data, event) {

    }; 
```

在事件对象中将根据发生的更改调用添加或删除的属性。然后，您可以使用此值来更新您的视图模型。

# javascript - 如何删除多行或单行

> ID：14504747
> 
> 赞同：0
> 
> 时间：2013-01-24T15:20:57.330
> 
> 标签：javascript, jquery, parent-child, removeclass, delete-row

我有父子关系的表。如果删除父亲，则删除其下的儿子。您还可以删除单个儿子。到目前为止，我的代码并没有删除具有相应 id 的父亲或儿子，而是删除了表中的第一件事。 **这是我的代码：**

```
<script>
function delVesselAll(num){
    $("#vessel_tab #father" + num).remove();
    $("#vessel_tab .son" + num).remove();
    document.getElementById(id).style.display = 'block';
};
function delSon(num){
    $("#vessel_tab #son" + num).remove();
    document.getElementById(id).style.display = 'block';
};
</script> 
```

**还有我的 HTML：**

```
<table id="vessel_tab">
  <tr id="father1">
    <td colspan="2" class="father_header">Father 1</td>
    <td><a style="text-decoration:none;" onclick="showModal('delAllModal')"><input type="button" value="delete" onclick="showModal('delAllModal')"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:10px; display:none" id="delAllModal">
Are you sure you want to delete the father and corresponding sons?<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delAllModal')"/><input type="button" value="Delete" onclick="delVesselAll(1)" id="delete"/></div>
  </tr>
  <tr class="son1" id="son1">
    <td>&nbsp;</td>
    <td>Son 1</td>
    <td><a style="text-decoration:none;" onclick="showModal('delSonModal')"><input type="button" value="delete"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:30px; display:none" id="delSonModal">
Please confirm deletion.<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delSonModal')"/><input type="button" value="Delete" onclick="delSon(1)"/></div>
  </tr>
  <tr class="son2" id="son2">
    <td>&nbsp;</td>
    <td>Son 2</td>
    <td><a style="text-decoration:none;" onclick="showModal('delSonModal')"><input type="button" value="delete"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:30px; display:none" id="delSonModal">
Please confirm deletion.<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delSonModal')"/><input type="button" value="Delete" onclick="delSon(2)"/></div>
  </tr>
  <tr id="father2">
    <td colspan="2">Father 2</td>
    <td><a style="text-decoration:none;" onclick="showModal('delAllModal')"><input type="button" value="delete"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:10px; display:none" id="delAllModal">
Are you sure you want to delete the father and corresponding sons?<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delAllModal')"/><input type="button" value="Delete" onclick="delVesselAll(2)" id="delete"/></div>
  </tr>
 <tr class="son3" id="son3">
    <td>&nbsp;</td>
    <td>Son 3</td>
    <td><a style="text-decoration:none;" onclick="showModal('delSonModal')"><input type="button" value="delete"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:30px; display:none" id="delSonModal">
Please confirm deletion.<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delSonModal')"/><input type="button" value="Delete" onclick="delSon(3)"/></div>
  </tr>
  <tr class="son4" id="son4">
    <td>&nbsp;</td>
    <td>Son 4</td>
    <td><a style="text-decoration:none;" onclick="showModal('delSonModal')"><input type="button" value="delete"></a></td>
      <div class="delModal" style="z-index:999999; margin-left:200px; margin-top:30px; display:none" id="delSonModal">
Please confirm deletion.<br /><input type="button" value="Cancel" class="hide" onclick="hideModal('delSonModal')"/><input type="button" value="Delete" onclick="delSon(4)"/></div>
  </tr>
</table> 
```

另外，jsfiddle。它工作不正常（不知道我做错了什么），但我的代码在那里。提前致谢！ [http://jsfiddle.net/7tFFS/1/](http://jsfiddle.net/7tFFS/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:48:53.197

我清理了东西并重构了你的代码。这是[JSFiddle](http://jsfiddle.net/UVwB7/6/)。

的HTML：

```
<div class="delModal" style="z-index:999999; margin-left:200px; margin-top:10px; display:none"
id="delAllModal">Are you sure you want to delete the father and corresponding sons?
    <br
    />
    <input type="button" value="Cancel" class="hide" />
    <input type="button" value="Delete" class="delete" />
</div>
<div class="delModal" style="z-index:999999; margin-left:200px; margin-top:30px; display:none"
id="delSonModal">Please confirm deletion.
    <br />
    <input type="button" value="Cancel" class="hide" />
    <input type="button" value="Delete" class="delete" />
</div>
<table id="vessel_tab">
    <tr id="father1">
        <td colspan="2" class="father_header">Father 1</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
    <tr class="son1" id="son1" data-father="father1">
        <td>&nbsp;</td>
        <td>Son 1</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
    <tr class="son2" id="son2" data-father="father1">
        <td>&nbsp;</td>
        <td>Son 2</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
    <tr id="father2">
        <td colspan="2">Father 2</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
    <tr class="son3" id="son3" data-father="father2">
        <td>&nbsp;</td>
        <td>Son 3</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
    <tr class="son4" id="son4" data-father="father2">
        <td>&nbsp;</td>
        <td>Son 4</td>
        <td>
            <input type="button" value="delete" class="delete" />
        </td>
    </tr>
</table> 
```

JS：

```
function showModal(id, child) {
    var $modal = $(child ? "#delSonModal" : "#delAllModal");
    $modal.fadeIn("slow")
        .find(".delete")
        .one("click", function () {
            $("#" + id + ", [data-father=" + id + "]").fadeOut("slow");
            $modal.fadeOut("slow");
        });
}

$("input.hide").click(function () {
    $(this).closest("div.delModal").fadeOut("slow");
});

$("#vessel_tab input.delete").bind("click", function () {
    var $tr = $(this).closest("tr");
    showModal($tr.attr("id"), !!$tr.data("father"));
}); 
```

**编辑**：

由于您使用了 HTML 中的 onClick 处理程序，您的 Fiddle 无法正常工作。这不一定是错的，但 JSFiddle 似乎并不喜欢它。在整个过程中，我用 jQuery 处理程序替换了那些。

在 HTML 中，您不需要重复对话，因此我将它们取出并将它们放在表格之外。还有一些锚标签也是多余的，我删除了。我还在你的输入标签的末尾添加了斜杠......并不是所有的必要，但 XHTML 需要它，它让 Fiddle 发疯了，就是这样。我在某些地方（例如取消/删除按钮）使用类而不是 ID 来提供一种简单的方法来在 jQuery 中将它们作为一个组引用。（你不能有重复的 ID 标签而不会发生任何事情。）`data-father`所有儿子上的标签是稍后用来确定应该显示`showModal`哪个对话框（`delAllModal`或）的标签，更重要的是，将儿子与他们的父亲联系起来以允许`delSonModal`他们作为一个整体被删除。

在 JS 中：

*   我重写的很多代码只是内联执行而不是调用函数。例外是`showModal`。
*   `$("input.hide").click...`连接对话框中的两个“取消”按钮。
*   `$("#vessel_tab input.delete")...`*连接表中的*所有删除按钮。它基本上只是一个包装`showModal`......
*   ...这让我们看到了肉。`showModal`：
    *   该`var $modal...`行根据单击的按钮是否为孩子选择要显示的对话框。
    *   显示对话框，并连接其删除按钮。请注意，我`one`在这里使用，而不是`on`. 这将为按钮创建一个单击处理程序，但在使用时立即处理它。`on`可能会工作得很好，但这留下的混乱更少。
    *   点击处理程序调用`fadeOut`传递的 ID，以及具有该 ID 作为其`data-father`属性的任何元素 - 实际上是 ID 的子级。对于父亲来说，这隐藏了父亲和儿子。对于 Sons，它只隐藏了 Son，因为没有任何元素具有`data-father`与 Son 的 ID 匹配的属性。
    *   最后，我们关闭对话框。

我希望这一切都很清楚。快乐黑客！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:37:47.273

我会稍微改变一下html的结构。

为什么不添加要包含在父亲元素下的儿子。例如：

```
<tr id="father_1">
  <td class="father_1">Father 1</td>
  <td class="son_of_f1" id="son_1">Son 1</td>
  <td class="son_of_f1" id="son_2">Son 2</td>
  <td class="son_of_f1" id="son_3">Son 3</td>
  <td class="son_of_f1" id="son_4">Son 4</td>
</tr> 
```

然后您可以使用 JQuery 进行以下操作

```
 $('#father_1').fadeOut(500);
 $('.son_of_f1').fadeOut(500);` 
```

你可以使它`_1`成为动态并将其保存到变量中

注意：为每个儿子使用类而不是 IDS 更好，因为您不能让两个儿子具有相同的 id。

# android - 通过重新安装应用程序防止用户获得免费耗材

> ID：14504749
> 
> 赞同：0
> 
> 时间：2013-01-24T15:21:00.103
> 
> 标签：android, in-app-purchase, in-app-billing

我有一个应用程序，它为用户提供 4 个免费令牌以启用各种功能。使用免费代币后，我希望用户通过应用内购买购买更多（使用版本 3）。如何通过卸载然后重新安装应用程序来防止用户获得更多免费令牌？该应用程序确实有一个可以维护记录的后端服务器，但我想知道这种情况下的最佳实践。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:24:34.303

此方案的最佳实践是将数据保存在后端服务器上。然后，您需要将用户记录到远程数据库，每次您应该从后端服务获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:30:14.383

可以有两种方式。

1）在服务器上存储一些键值对，并且每当用户第一次启动您的应用程序时，都会使用它进行检查/更新。

2）在本地存储一些键值对（您的应用程序空间将被删除），因此尝试在sdcard上的某个位置写入一个文件，名称可疑，用户应该认为该文件是系统文件。加密它并完成。

编写一个共享首选项，当用户第一次安装您的应用程序时（从主要活动），您应该在其中添加一个布尔值。如果此值不可用，请尝试检查您之前在服务器或 sdcard 上写入的存储键值对

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:32:57.353

这在很大程度上取决于您想要做到的彻底程度。你有三个选择：

*   将数据存储在您的私人存储中将导致在用户清除您的数据或卸载您的应用程序时将其删除，因此已被淘汰。
*   您可以使用 SD 卡（或内部存储，远​​离您的应用程序私人商店），将文件添加到包含配置的文件中，该文件不会因应用程序删除而被删除（但用户可能会明智地使用现有的文件和意识到它的作用）。这样就更傻了。
*   最好的选择当然是与您的后端服务器同步。

您可以通过几条路线同步到后端服务器。您可以根据设备 ID 识别用户，并在您的服务器上设置一个标志，表明该设备已经兑换了它的权利。

您可以通过以下方式访问设备 ID：

```
import android.provider.Settings.Secure;

private String androidId = Secure.getString(getContext().getContentResolver(),
                                                            Secure.ANDROID_ID); 
```

这将是每个设备，人们可以通过使用多个设备获得更多。在这种情况下，您可以与他们配对，`Google Account`每个 Google 帐户只允许一次兑换，您将与您的服务器同步。

有关如何在 Android 上唯一标识用户的更多信息，请在[此处查看](http://developer.android.com/training/id-auth/identify.html)**Android 开发者网站** 上的这篇 Google 文章。

# sql-server - 在 SQL Server 数据库之间传递用户定义的表类型

> ID：14504756
> 
> 赞同：9
> 
> 时间：2013-01-24T15:21:16.923
> 
> 标签：sql-server, sql-server-2008, user-defined-types

我在 SQL Server 的一个数据库中有一个用户定义的表类型（我们称之为这个`DB1`）。

我的类型的定义非常简单，只包含 2 列。创建我的类型的脚本如下：

```
CREATE TYPE [dbo].[CustomList] AS TABLE
(
    [ID] [int] ,
    [Display] [NVARCHAR] (100)  
) 
```

我还在另一个数据库上运行了相同的脚本，所以我的类型在 2 个数据库上（我们称之为 2nd database `DB2`）。

我现在`DB1`从我的 C# 应用程序中调用一个存储过程，传入我的`CustomList`用户定义类型的参数。

现在的过程需要在传入 this`DB1`时调用一个过程。`DB2``CustomList`

因此，中的过程`DB1`如下所示：

```
ALTER PROCEDURE [dbo].[selectData]
    @psCustomList CustomList ReadOnly
AS
BEGIN
    EXEC DB2.dbo.selectMoreData @psCustomList   
END 
```

中的过程`DB2`是这样的（我只显示了参数列表，因为这就是所需要的）：

```
ALTER PROCEDURE [dbo].[selectMoreData]
    @psCustomList CustomList ReadOnly
AS
BEGIN
...... 
```

当我运行它时，我收到以下错误：

> *操作数类型冲突：CustomList 与 CustomList 不兼容*

有人知道我做错了什么吗？

我正在使用 SQL Server 2008。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-25T04:59:02.170

[这是您可以创建 CLR UDT 以允许跨数据库共享表类型](https://stackoverflow.com/questions/8036713/can-you-create-a-clr-udt-to-allow-for-a-shared-table-type-across-databases)的副本吗？

本质上，用户定义的表类型不能跨数据库共享。基于 CLR 的 UDT*可以*跨数据库共享，但前提是满足某些条件，例如将相同的程序集加载到两个数据库中，以及其他一些事情（详细信息在上面提到的重复问题中）。

对于这种特殊情况，有一种方法可以将信息从`DB1`to传递`DB2`，尽管它不是一个优雅的解决方案。为了使用表类型，您当前的数据库上下文需要是表类型所在的数据库。这是通过`USE`语句完成的，但如果需要在存储过程中完成，则只能在动态 SQL 中完成。

```
USE [DB1];
GO

CREATE PROCEDURE [dbo].[selectData]
    @psCustomList CustomList READONLY
AS
BEGIN
    -- create a temp table as it can be referenced in dynamic SQL
    CREATE TABLE #TempCustomList
    (
        [ID] [INT],
        [Display] [NVARCHAR] (100)
    );

    INSERT INTO #TempCustomList (ID, Display)
        SELECT ID, Display FROM @psCustomList;

    EXEC('
        USE [DB2];

        DECLARE @VarCustomList CustomList;

        INSERT INTO @VarCustomList (ID, Display)
            SELECT ID, Display FROM #TempCustomList;

        EXEC dbo.selectMoreData @VarCustomList;
     ');
END 
```

**更新**

使用`sp_executesql`，无论是试图通过简单地将 UDTT 作为 TVP 传递来避免本地临时表，还是仅仅作为进行参数化查询的一种方式，实际上都不起作用（尽管它看起来确实应该如此）。意思是，如下：

```
USE [DB1];
GO
CREATE PROCEDURE dbo.CrossDatabaseTableTypeA
(
    @TheUDTT dbo.TestTable1 READONLY
)
AS
SET NOCOUNT ON;

EXEC sp_executesql N'
  USE [DB2];
  SELECT DB_NAME() AS [CurrentDB];

  DECLARE @TableTypeDB2 dbo.TestTable2;
  INSERT INTO @TableTypeDB2 ([Col1])
    SELECT tmp.[Col1]
    FROM   @TableTypeDB1 tmp;

  --EXEC dbo.CrossDatabaseTableTypeB @TableTypeDB2;
  ',
  N'@TableTypeDB1 dbo.TestTable1 READONLY',
  @TableTypeDB1 = @TheUDTT;
GO

DECLARE @tmp dbo.TestTable1;
INSERT INTO @tmp ([Col1]) VALUES (1), (3);
SELECT * FROM @tmp;

EXEC dbo.CrossDatabaseTableTypeA @TheUDTT = @tmp; 
```

将在“@TableTypeDB2 的数据类型无效”上失败，即使它正确显示`DB2`了“当前”数据库。它与如何`sp_executesql`确定变量数据类型有关，因为错误被`@TableTypeDB2`称为“变量＃2”，即使它是在本地创建的而不是作为输入参数。

实际上，`sp_executesql`如果声明了单个变量（通过参数列表输入参数 to `sp_executesql`），即使它从未被引用，更不用说使用，也会出错。这意味着，以下代码将遇到与上面紧接的查询发生的无法找到 UDTT 定义的相同错误：

```
USE [DB1];
GO
CREATE PROCEDURE dbo.CrossDatabaseTableTypeC
AS
SET NOCOUNT ON;

EXEC sp_executesql N'
  USE [DB2];
  SELECT DB_NAME() AS [CurrentDB];

  DECLARE @TableTypeDB2 dbo.TestTable2;
  ',
  N'@SomeVar INT',
  @SomeVar = 1;
GO 
```

（感谢@Mark Sowul 提到`sp_executesql`在传递变量时不起作用）

但是，可以通过更改执行数据库来解决此问题（好吧，只要您不尝试传入 TVP 以避免临时表 - 上面的 2 个查询），`sp_executesql`以便该过程将位于另一个 TVP 所在的数据库的本地。关于它的一个好处`sp_executesql`是，与 不同的是`EXEC`，它是一个存储过程，并且是一个系统存储过程，因此它可以是完全限定的。利用这一事实允许`sp_executesql`工作，这也意味着不需要`USE [DB2];`动态 SQL 中的语句。以下代码确实有效：

```
USE [DB1];
GO
CREATE PROCEDURE dbo.CrossDatabaseTableTypeD
(
    @TheUDTT dbo.TestTable1 READONLY
)
AS
SET NOCOUNT ON;

-- create a temp table as it can be referenced in dynamic SQL
CREATE TABLE #TempList
(
    [ID] [INT]
);

INSERT INTO #TempList ([ID])
   SELECT [Col1] FROM @TheUDTT;

EXEC [DB2].[dbo].sp_executesql N'
  SELECT DB_NAME() AS [CurrentDB];

  DECLARE @TableTypeDB2 dbo.TestTable2;
  INSERT INTO @TableTypeDB2 ([Col1])
    SELECT tmp.[ID]
    FROM   #TempList tmp;

  EXEC dbo.CrossDatabaseTableTypeB @TableTypeDB2;
  ',
  N'@SomeVariable INT',
  @SomeVariable = 1111;
GO 
```

# qt - QScrollArea 使 QTextEdit 只读

> ID：14504761
> 
> 赞同：3
> 
> 时间：2013-01-24T15:21:29.327
> 
> 标签：qt, pyqt, qtextedit

我正在尝试添加一个容器来显示 QTextEdit 的行号。从我目前看到的情况来看，我需要在第一步添加一个 QAbstractScrollArea。

问题是当我添加 QAbstractScrollArea 时，QTextEdit 以只读方式呈现。几乎是只读的，我可以拖放文本，但我没有任何光标来输入文本。

有什么想法吗？谢谢！

```
mainWindow = QMainWindow()
textEdit = QTextEdit(mainWindow)
textDocument = QTextDocument(textEdit)
...
# adding some text do textEdit
...

scrollArea = QAbstractScrollArea()
scrollArea.setViewport(textEdit)
scrollArea.setViewportMargins(20, 0, 0, 0)
mainWindow.setCentralWidget(scrollArea)
mainWindow.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:55:25.290

我不确定你是否应该打电话`setViewport`。

`QTextEdit`已经继承自`QAbstractScrollArea`，因此您所要做的就是保留其左侧的边距，然后绘制行号或放置一个静态小部件，该小部件将在该边距中显示行号。

文档中已经有一个示例（在 C++ 中）可以做到这一点：[Qt 代码编辑器示例](http://qt-project.org/doc/qt-4.8/widgets-codeeditor.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T17:20:10.883

请注意，您的 TextEdit 位于 QMainWindow 小部件上，但 QScrollArea 位于 QMainWidow::centralWidget() 上。它是不同的小部件，而 centralWidget 就在 QMainWindow 之上。这意味着当您单击 QTextEdit 区域时，实际上您单击的是 scrollArea 小部件，而不是 QTextEdit。

试试这个代码：

```
 mainWindow = QMainWindow()    
    scrollArea = QAbstractScrollArea()
    scrollArea.setViewport(textEdit)
    scrollArea.setViewportMargins(20, 0, 0, 0)
    mainWindow.setCentralWidget(scrollArea)

    textEdit = QTextEdit(mainWindow.centralWidget())
    textDocument = QTextDocument(textEdit)
    ...
    # adding some text do textEdit
    ...

    mainWindow.show() 
```

# c - C NDK ndk-build 无法识别标头错误：未定义对“cpBBTreeNew”的引用

> ID：14504763
> 
> 赞同：1
> 
> 时间：2013-01-24T15:21:39.593
> 
> 标签：c, android-ndk, chipmunk

我对 C 比较陌生

我正在努力将 Chipmunk 物理引擎移植到我的项目中，但是，当我尝试运行 ndk-build 时，我得到以下...

> /Users/user/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/.. /../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/chipmunk_shared/src/cpSpace.o: 在函数 cpSpaceInit:jni/src/cpSpace.c: 103：错误：未定义引用'cpBBTreeNew'/Users/user/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/ arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/chipmunk_shared/src/cpSpace.o: 在函数中cpSpaceInit：jni/src/cpSpace.c:104：错误：未定义对“cpBBTreeNew”的引用/Users/user/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86 /bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/chipmunk_shared/src/cpSpace.o: 在函数 cpSpaceInit:jni/src/cpSpace.c:105: 错误: 未定义引用'cpBBTreeSetVelocityFunc '

当我为那门课做 grep 时，我看到...

> ~/Documents/workspace/Chipmunk$ grep -r cpBBTreeNew jni/jni//include/chipmunk/cpSpatialIndex.h:cpSpatialIndex* cpBBTreeNew(cpSpatialIndexBBFunc bbfunc, cpSpatialIndex *staticIndex); jni//src/cpBBTree.c:cpBBTreeNew(cpSpatialIndexBBFunc bbfunc, cpSpatialIndex *staticIndex) jni//src/cpSpace.c: 空间->staticShapes = cpBBTreeNew((cpSpatialIndexBBFunc)cpShapeGetBB, NULL); jni//src/cpSpace.c: 空间->activeShapes = cpBBTreeNew((cpSpatialIndexBBFunc)cpShapeGetBB, 空间->staticShapes);

所以我知道 .h 文件在那里，我确认它是通过另一个 .h 类加载的。我不认为这是问题，但这是我的 Android.mk ......

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := chipmunk_shared

LOCAL_MODULE_FILENAME := libchipmunk

LOCAL_SRC_FILES := \
src/chipmunk.c \
....
src/cpVect.c

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include/chipmunk

LOCAL_C_INCLUDES := $(LOCAL_PATH)/include/chipmunk
LOCAL_CFLAGS := -std=c99

include $(BUILD_SHARED_LIBRARY)

########### Static library

include $(CLEAR_VARS)

LOCAL_MODULE := chipmunk_static

LOCAL_MODULE_FILENAME := libchipmunk

LOCAL_SRC_FILES := \
src/chipmunk.c \
....
src/cpVect.c

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include/chipmunk

LOCAL_C_INCLUDES := $(LOCAL_PATH)/include/chipmunk
LOCAL_CFLAGS := -std=c99

include $(BUILD_STATIC_LIBRARY) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:21:55.103

链接时听起来好像缺少 cpBBTree.o。LOCAL_SRC_FILES 中是否缺少 cpBBTree.c？

# animation - 是否有专门为动画网页制作的主干.js 框架

> ID：14504765
> 
> 赞同：0
> 
> 时间：2013-01-24T15:21:40.950
> 
> 标签：animation, backbone.js, marionette, backbone-boilerplate

所以我从一个购买的 Web 模板开始，其中包含一堆backbone.js 代码。每个视图都有动画进出。我开始广泛使用它，基本上重写了很多东西，并完全删除了他正在使用的动画引擎并用 tweenmax JS 替换它。现在我正在考虑一个新网站并想使用另一个backbone.js框架，但我不知道是否使用我以前使用过的同一个项目并坚持使用该系统是正确的答案，或者是否有骨干.js知识的人可以告诉我哪个框架最适合创建具有常规内容的“设计器”样式网页。主页、关于我们、投资组合、联系我们、博客等。我特别希望能够加载和加载页面并完全控制动画进出的视图，但我没有 不知道哪个框架助手最适合我的意图。我看了 Marionette, Boilerplate, 两者的结合，也看了看[骨干MVC](http://chance-an.github.com/backbone-mvc/#root/index)。在我深入学习一个新的框架助手之前，我想尽可能多地找出来，这样我就不必多次改变方向。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:15:00.347

去年，我已经看到 Marionette 被用于许多高度风格化、动画重的应用程序中。Halo 4 的 Halo Waypoint 网站是其中最重要的一个：[https ://app.halowaypoint.com/](https://app.halowaypoint.com/)

我认为大多数 Backbone 框架都是不错的选择。它们中很少有人真正限制您在视图之间移动的方式。尽管 Marionette 在这方面可能会带来一些挑战，但它大量使用 Region 对象来控制特定视图实例的显示。

您需要编写自定义区域对象来设置动画。这可以使用我在这里构建的示例“褪色区域”来完成：[https ://github.com/marionettejs/backbone.marionette/issues/320#issuecomment-9746319](https://github.com/marionettejs/backbone.marionette/issues/320#issuecomment-9746319)

希望有帮助。

# objective-c - AFNetworking 发布表单数据

> ID：14504766
> 
> 赞同：7
> 
> 时间：2013-01-24T15:21:41.063
> 
> 标签：objective-c, xcode, afnetworking

我正在尝试使用 Form-Data 对 api 进行简单的 POST 请求，但我总是得到状态 401 作为回报。

我可以轻松地在 xcode 之外（例如在 Postman 中）成功地进行调用，我所做的只是使用 Form-Data 类型的键值对 POST 到 url，但在 xcode 中它总是失败。

这是我的 AFHTTPClient：

```
@implementation UnpaktAPIClient

+ (id)sharedInstance {
    static UnpaktAPIClient *__sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        __sharedInstance = [[UnpaktAPIClient alloc] initWithBaseURL:[NSURL URLWithString:UnpaktAPIBaseURLString]];
    });
    return __sharedInstance;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (self) {
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [self setParameterEncoding:AFFormURLParameterEncoding];
    }
    return self;
}

- (NSDictionary *)login:(NSDictionary *)credentials {

    [[UnpaktAPIClient sharedInstance] postPath:@"/api/v1/users/login"
                                    parameters:credentials
                                        success:^(AFHTTPRequestOperation *operation, id response) {
                                            NSLog(@"success");
                                        }
                                        failure:^(AFHTTPRequestOperation *operation, NSError *error){
                                            NSLog(@"%@", error);
                                        }];

    return nil;
} 
```

我还尝试使用 requestOperation 创建请求：

```
- (NSDictionary *)login:(NSDictionary *)credentials {

    NSMutableURLRequest *request = [[UnpaktAPIClient sharedInstance] requestWithMethod:@"POST" path:@"/api/v1/users/login" parameters:credentials];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id json) {
                                                                                            NSLog(@"success");
                                                                                        }
                                                                                        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id json){
                                                                                            NSLog(@"%@", error);
                                                                                        }];
    [operation start];

    return nil;
} 
```

但我总是得到完全相同的错误：`Error Domain=AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 401"`. 我期待 JSON 反馈，您可以在附图中看到成功条件。我怀疑这是非常简单的事情，但我正在努力寻找它，我对网络很陌生。任何帮助都会很棒，谢谢。![邮差成功](../Images/48e436ed4668435cd37efe02f2a9dcc3.png)

**更新**

由于 Postman 请求有空白参数和标题，我想我需要进入表单正文。将请求更改为：

```
- (NSDictionary *)login:(NSDictionary *)credentials {

    NSURLRequest *request = [self multipartFormRequestWithMethod:@"POST"
                                                            path:@"/api/v1/users/login"
                                                      parameters:nil
                                       constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {

                                       }];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id json) {
                                                                                            NSLog(@"success");
                                                                                        }
                                                                                        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id json) {
                                                                                            NSLog(@"%@", error);
                                                                                        }];
    [operation start];
    return nil;
} 
```

现在给我一个 404 错误，这是我在没有有效电子邮件和密码的情况下所期望的，我只需要弄清楚如何将一个添加到表单的正文中，我尝试添加的任何内容都会给我“请求正文流已用尽“ 错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T19:44:23.443

明白了，事实证明将键/值对添加到表单数据有点冗长，但我是这样完成的：

```
NSMutableData *email = [[NSMutableData alloc] init];
NSMutableData *password = [[NSMutableData alloc] init];
[email appendData:[[NSString stringWithFormat:@"paul+100@test.com"] dataUsingEncoding:NSUTF8StringEncoding]];
[password appendData:[[NSString stringWithFormat:@"qwerty"] dataUsingEncoding:NSUTF8StringEncoding]];
[formData appendPartWithFormData:email name:@"email"];
[formData appendPartWithFormData:password name:@"password"]; 
```

# dynamics-crm-2011 - CRM 2011：如何将 JScript Web 资源添加到小弹出窗体。

> ID：14504767
> 
> 赞同：1
> 
> 时间：2013-01-24T15:21:43.553
> 
> 标签：dynamics-crm-2011, dynamics-crm

我是新手`CRM 2011`。我在功能区上有一个按钮，可以打开一个新的小表单。

在那个小表格上，我需要添加`JavaScript` `Web Resource`“OnChange”事件。有可能这样做吗？

如果是的话，你能建议我任何事情吗？

我知道如何添加`Web Resource`到正常的 CRM 2011 表单，但对这个小弹出表单一无所知。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:45:18.030

如果弹出式表单是 Web 资源，那么您可以像引用任何 HTML 页面一样引用其他 Web 资源。

如果弹出窗口是 CRM 表单，那么您可能不走运。

你想达到什么目的？可能还有另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:45:09.720

简短的回答：不能那样做。

更长一点的答案：不能那样做。对不起。

长答案：不能那样做。对不起。如果它是 CRM 提供的内置模式弹出窗口，则不会。这里有两种方法可以继续。一种务实，一种理想主义。

1.  务实的做法：重新思考。解释手头的任务是什么，也许有人会提出不同的方法来解决问题。

2.  理想主义的方法：以任何必要的方式强迫它。您**可以**添加一个看起来就像弹出窗口的 Web 资源并为其添加许多功能。这是可能的，但它肯定更难、更复杂、容易出错，而且真的**不推荐**。真的不。

# asp.net - 查询字符串被改变

> ID：14504768
> 
> 赞同：0
> 
> 时间：2013-01-24T15:21:46.407
> 
> 标签：asp.net, iis, rewrite, query-string, umbraco

我们使用第三方服务，它会在电子邮件中返回 URL，例如：

```
http://www.domain.co.uk/retrieve-quote.aspx?cid=tela04NrLRCEB4YSJaHNnrmMgfzhKGWDQMNWU9gA4LoIZ4xkAdjDj9NQxK9NokSj&pid=hzRtwgPKiGFXnqVI78upf3QmpexmqtkJ0sYPtE0Tam8%3d 
```

当您单击链接并转到网站上的页面（基于 Umbraco 4.9 构建）时，地址栏中的 URL 现在是：

```
https://www.domain.co.uk/retrieve-quote.aspx?cid=tela04nrlrceb4ysjahnnrmmgfzhkgwdqmnwu9ga4loiz4xkadjdj9nqxk9noksj&pid=hzrtwgpkigfxnqvi78upf3qmpexmqtkj0sypte0tam8= 
```

我不确定这是 Umbraco 问题还是 IIS 问题，但查询字符串现在是小写的，并且最后 3 位数字已更改。

我们唯一的重写是在配置中将目录 URL 设置为 true，并且我们将一些旧 URL 重定向到新 URL，但是这个 URL 保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:46:39.483

正在更改查询字符串，因为它是 url 编码的，第一个 URL 末尾的 %3d 是等号的代码

[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:08:36.950

最终发现问题是在 Umbraco 之后安装的一些 3rd 方 URL 重写代码。这将所有 URL 更改为小写而不是 Umbraco。我们已经让第 3 方更改他们的代码，现在一切正常。

# c# - 为 MS-Access 动态创建连接字符串

> ID：14504769
> 
> 赞同：1
> 
> 时间：2013-01-24T15:21:58.610
> 
> 标签：c#, ms-access

我们如何使用 C# 编程动态创建到 Microsoft Access 的连接字符串？我尝试以下代码 -

```
OleDbConnection con = new OleDbConnection();
String path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + path + "\\nik.mdb"; 
```

我得到了这个结果作为回应：

```
Format of the initialization string does not conform to specification starting at index 55. 
```

当我编辑我的字符串时，它如下所示：

```
Provider=Microsoft.Jet.OLEDB.4.0; Data Source=C:\Users\nikhil\desktop\nik.mdb 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:27:43.893

使用`Path.Combine`and a`OleDbConnectionStringBuilder`创建一个有效的连接字符串：

```
var conString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; Data Source={0}"
                             , Path.Combine(dir, "nik.mdb"));
var conBuilder = new OleDbConnectionStringBuilder(conString);
using (var con = new OleDbConnection(conBuilder.ConnectionString))
{
    // ...
} 
```

也许您在连接字符串中有空格。

**更新**由于您已经编辑了问题并提供了连接字符串。`OLEDB.4.0;`和之间有一个空格`Data`。这可能是您异常的一个可能原因。然后是`ConnectionStringBuilder`帮助。

# ios - 将标签变成全局变量

> ID：14504771
> 
> 赞同：1
> 
> 时间：2013-01-24T15:22:14.617
> 
> 标签：ios, objective-c, webview, global-variables

我需要从步进器中获取一个值到一个全局变量中。我第一次尝试这样做，

```
NSInteger MYGlobalVariable =0;

-(IBAction)time:(UIStepper *)sender {
int value = [sender value];
MYGlobalVariable = (int)value;}

reloadtimer=[NSTimer scheduledTimerWithTimeInterval:MYGlobalVariable target:self selector:@selector(WebViewLoad:) userInfo:nil repeats:YES];} 
```

该代码的最后一部分是我的 webview 中的计时器，但是 gvariable 不会随着步进器而改变，所以有没有办法可以工作或..

我可以用标签做步进器，然后将其转换为全局变量吗？但我也不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:47:41.737

要保存用户设置，请使用：

保存：

```
NSUserDefaults *pref = [NSUserDefaults standardUserDefaults];
 [pref setInteger:integerStepValue forKey:@"StepperValue"];
 [pref synchronize]; 
```

供阅读

```
int myStepper = [[[NSUserDefaults standardUserDefaults] integerForKey:@"StepperValue"] intValue] ; 
```

# scala - 在 Scala Dispatch 0.9.5 中使用具有多个值的查询参数

> ID：14504773
> 
> 赞同：2
> 
> 时间：2013-01-24T15:22:20.027
> 
> 标签：scala, scala-dispatch

我正在使用优秀的[Dispatch](http://dispatch.databinder.net/)库来发出 HTTP 请求，如下所示：

```
Http(url("http://foo.bar/baz").GET <<? Map("param1" -> "value1") OK as.String) 
```

但是，我正在与一个期望`param1`成为值列表的 REST 服务交谈。我怎样才能在 Dispatch 中做到这一点？

我在`<<?`需要 a的源代码中看到`Traversable[(String,String)]`，所以也许它就像传递`Traversable`允许键多次出现的 a 一样简单。有这样的野兽吗？我一直在翻阅 Scala API 文档，但找不到一个似乎符合要求的文档。

如果做不到这一点，有没有办法连接到请求构建器？我看到 Dispatch 使用 a `com.ning.http.client.RequestBuilder`，我可以在上面调用`addQueryParameter()`自己。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:32:12.247

好吧，在阅读了 Scala API 文档之后，我顿悟了！`List`本身混合在一起`Traversable`，所以列出了一些可以解决问题的东西`apply(String, String)`。元组救援：

```
Http(url("http://foo.bar/baz").GET <<? List(("param1" -> "value1"), ("param1" -> "value2")) OK as.String) 
```

# python - 在 for 循环中创建对象

> ID：14504774
> 
> 赞同：1
> 
> 时间：2013-01-24T15:22:20.030
> 
> 标签：python, django

如何创建十个`User`对象？

```
for i in range(11):
    i = User.objects.create(username = 'test125', email='test@mail.com', password='pass1') 
```

列`username`不是唯一的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:25:00.423

你在场上有一个独特的约束，`username`这意味着你不能有两个相同的对象`username`。试试这个：

```
for i in range(10):
    i = User.objects.create(username = 'testX%s' % i, email='test@mail.com', password='pass1') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:25:45.390

您遇到的问题是您修复了该`username`值，因此您尝试创建 10 个具有相同名称的用户。

只需对用户名使用某种变体，例如`username='testuser-{}'.format(i)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:34:13.140

您需要更改每条记录的名称。

您将每个用户命名为“test125”。尝试连接每个新记录的索引：

```
for i in range(11):
    i = User.objects.create(username = 'test%s' % i, email='test@mail.com', password='pass1') 
```

您很可能需要对“电子邮件”列执行相同的操作：

```
for i in range(11):
    i = User.objects.create(username = 'test%s' % i, email='test%s@mail.com' % i, password='pass1') 
```

此外，将新对象分配给与索引相同的变量通常不是一个好主意。尝试与“i”不同的东西。

# jquery - JQGrid - 下一个和最后一个按钮不显示从本地数据库中获取的数据

> ID：14504782
> 
> 赞同：0
> 
> 时间：2013-01-24T15:22:31.417
> 
> 标签：jquery, html, asp.net-mvc, jqgrid, jqgrid-asp.net

```
<script type="text/javascript">

$(document).ready(function () {
    var firstClick = true;
    $('.editor-date > input').datepicker();
    $('.getdata').click(function () {
        if (!firstClick) {
            $("#GridTable").trigger("reloadGrid");
        }
        else
        {
            firstClick = false;
            $('#GridTable').jqGrid({
                url: '<%= Url.Action("GetData", "Report") %>',
                datatype: 'json',
                mtype: 'POST',
                colNames: ['Log ID'],
                colModel: [{ name: 'LogID', index: 'MessageLogID', key: true, formatter: pointercursor }],
                multiselect: true,
                sortname: 'LogID',
                sortorder: "asc",
                viewrecords: true,
                pager: '#pager',
                rowNum: 20,
                rowList: [5, 10, 20, 50],
                postData: { 
                IdParam: function () 
                  { return $('#LogID').val(); } 
                },
                jsonReader: {
                    repeatitems: false,
                    id: 'LogID',
                    records: 'TotalRecords',
                    total: 'TotalPages',
                    page: 'CurrentPage',
                    root: 'Rows'
                },
                loadError: function (xhr, status, error) {
                    messageBox('Error', 'Error occurred loading data.');
                },
                height: 'auto',
                width: 'auto'
            });

        });
}   

Report Controller Method
         public ActionResult GetData(string sidx, string sord, int page, int rows, int IdParam){} 
```

I am trying to load only the needed data from the database ...so when the first page is displayed I am getting 20 rows from db then when the user clicks on next button in the grid I am again hitting the db call and getting next 20 rows now if I debug the method I can see my data coming into the method call but the grid goes to the 2nd page and displays nothing. I mean that the grid is showing the loading sign and then just nothing happens even for the last button I don't get any data but on pager it shows total 100 pages and I can keep going next but only the page no. increments there is no data displayed in the grid.. any help will be appreciated...I tried to read about the Onpaging event but not able to figure out how to implement it in this scenario..

Quick Observation: If I change the row count from 20 to 5 10 or 50 that gets the data and displays on the first page its just that the next pages are not getting displayed...

Controller Method:

```
 int pageSize = rows;
     int pageIndex = page - 1;
     int totalPages = 0;

     //call to the db using Entity FrameWork..
     var Log = SERVICE.GetData_sp(IdParam,sidx,sord,page,rows,total).ToList()
     var totalCount = Convert.ToInt32(total.Value); //converting because I am getting it as Output parameter from the Store-Proc in objet.parameter type.
    totalPages = (int)Math.Ceiling(totalCount / (float)pageSize);

JqGridData gridData = new JqGridData { CurrentPage = page, TotalPages = totalPages, TotalRecords = totalCount };//getting the correct values as I cross checked it by just exec the store-proc.
 //storing data in gridData obj from Log.  
    return Json(gridData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:40:33.933

You didn't show your controller method above but I think you are probably not building in the data for the jqGrid to handle paging.

You should be building and passing to the jqGrid

```
int totalRecords = queryOfData.Count(); 
```

and then later you would pass that to your grid as a jSon value. Ex

```
var jsonData = new
{
    total = (totalRecords + rows - 1) / rows,
    page = page,
    records = totalRecords,
    rows = (
    ...... 
```

# php - 如何使用“at”延迟 php 执行并保持 sudo 权限

> ID：14504784
> 
> 赞同：0
> 
> 时间：2013-01-24T15:22:40.667
> 
> 标签：php, sudo, delay, at-job

我没有找到我要找的东西，所以，我在这里。

我尝试使用“at” unix 命令将 script.php 执行延迟到“现在 + 1 分钟”，同时保留 sudo 权限

我的问题是这个由“at”执行的 script.php 没有创建/编辑/删除文件或目录的权限，也没有运行我创建的 script.sh 的权限。

我尝试了许多不同的方法并得出了结论：

```
<?php
exex("echo password | sudo -u username -S echo 'echo password | sudo -u username -S php ".dirname(__FILE__).'/script.php '.$this->getQueueParams()."' | at now + 1 minutes"); 
```

当我在终端中复制/粘贴它时，此命令运行良好，但不是来自 PHP：

*   有时它有效，但由于权利原因触发了异常
*   有时它根本不执行“at”命令，en exec() 返回代码“1”

我还编辑了 suoders 以添加 apache 用户（www-data）执行我需要的所有命令（echo、chmod、chown、script.sh、...）的权限，但仍然无法正常工作。

非常感谢您的帮助！

杰西

# html - 浮动元素旁边的 H2 标记的行为

> ID：14504786
> 
> 赞同：0
> 
> 时间：2013-01-24T15:22:46.727
> 
> 标签：html, css

我对以下内容有一些奇怪的行为：
**Html**

```
<article class="feature">
  <div class="feature-media">
    <img src="image.jpg" alt="Article Feature media">
  </div>
  <h2>Secondary Title</h2>
  <p>lorum</p>
</article 
```

**CSS**

```
.feature h2:before {
  content: ""  
  float: left;
  display: block;
  width: 10px;
  height: 10px;
  margin-right: 10px;
  background-color: #df6c4f;
}

.left-main .feature {
  padding: 0 10px;
}

.left-main .feature-media {
  float: left;
  margin-right: 20px;
} 
```

没什么复杂的，只是 H2 标签占据了文章的宽度并忽略了左侧的 div。这意味着我的 :before 元素隐藏在图像后面。我已经浮动了所有 H2 和没有改变任何东西的伪元素。

谢谢

图片： [截图 http://stage.whenthemusicstops.com/screen.png](http://stage.whenthemusicstops.com/screen.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:42:52.490

我创建了一个[小提琴](http://jsfiddle.net/mtMDn/1/)，它似乎工作正常（在 Chrome 中测试）。

我注意到的唯一一件事是您在内容后缺少分号：“”，我不得不删除 .left-main 前缀。

```
.feature h2:before {
    content:"";
    float: left;
    display: block;
    width: 10px;
    height: 10px;
    margin-right: 10px;
    background-color: #df6c4f;
}
.feature {
    padding: 0 10px;
}
.feature-media {
    float: left;
    margin-right: 20px;
} 
```

# python - 通过 setattr 向类添加字段与在 Python 中存储字典

> ID：14504788
> 
> 赞同：0
> 
> 时间：2013-01-24T15:22:50.357
> 
> 标签：python

我有一个名为 User 的类：

```
class User(object):

    def __init__(self, arg1, ..., traits = None):
        self.arg1 = arg1
        ...
        self.traits = traits 
```

用户有一个属性`traits`是字典。它旨在成为一个包罗万象的信息，当我需要保存关于用户的更多信息时，除了电子邮件地址、用户 ID 等基本信息之外，我可以填充它。

`Traits`创建一个类并在其中设置属性会或多或少有效`__init__`吗`setattr`？查找会更好吗？这台机器有什么可以给我买的吗？还是说它最终只会做更多的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:24:43.377

您可以直接修改实例`__dict__`（假设它没有实现`__slots__`或类似的愚蠢）

这是一个简单的例子：

```
class Traits(object):
    pass

class User(object):
    def __init__(self,**traits):
        self.traits = Traits()
        self.traits.__dict__.update(traits)

a = User(eye_color="blue")
print a.traits.eye_color 
```

当然，这样做可能*更安全*（但效率略低）：

```
class User(object):
    def __init__(self,**traits):
        self.traits = Traits()
        for k,v in traits.items():
            setattr(traits,k,v) 
```

这实际上只是提供相同 API 的额外 1 行代码。它更安全，因为你永远不知道有人做了什么`Traits`来提供各种描述符（例如属性）等 `setattr`，将正确地做所有这些事情，而盲目地写入`__dict__`可能是有害的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:30:37.193

对我来说看起来不错，我很想重写为：

```
class User(object):
    def __init__(self, arg1, arg2, **traits):
        self.arg1 = arg1
        self.arg2 = arg2
        self.traits = traits 
```

如果你真的想要，如果找不到属性，你可以覆盖以回退到特征字典：

```
def __getattr__(self, name):
    return self.traits[name] 
```

例子：

```
>>> u = User(1, 2, email='something')
>>> y = User(1, 2, email='bob', telno='999')
>>> u.arg1, u.arg2, u.email
(1, 2, 'something')
>>> y.arg1, y.arg2, y.email, y.telno
(1, 2, 'bob', '999')
>>> y.arg1, y.arg2, y.email, y.something
Traceback (most recent call last):
  File "<pyshell#105>", line 1, in <module>
    y.arg1, y.arg2, y.email, y.something
  File "/home/jon/adfafasdf.py", line 7, in __getattr__
    return self.traits[name]
KeyError: 'something' 
```

因此，您可能希望将其作为更明智的错误，并更改为：

```
def __getattr__(self, name):
    try:
        return self.traits[name]
    except KeyError as e:
        raise AttributeError() # with suitably formatted string 
```

# jquery - 何时在元素上使用 jQuery .html 或 .text

> ID：14504791
> 
> 赞同：8
> 
> 时间：2013-01-24T15:22:55.283
> 
> 标签：jquery, performance

在我发布（并得到回答）的[这个问题](https://stackoverflow.com/questions/14501592/how-to-get-the-value-of-a-label-into-a-textbox-with-jquery)中，我发现了如何正确地将文本框的值分配给标签的值。答案是使用

```
$('#txtBranchName').val($('#lblBranchName').html()); 
```

或者

```
$('#txtBranchName').val($('#lblBranchName').text()); 
```

一个比另一个更可取吗？是否存在性能差异，或者一种方法不起作用但另一种方法在特定情况下会起作用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T15:24:23.723

## 设定数据

`.text("<b>Test</b>")`将转义任何 HTML 标签（渲染`<b>Test</b>`）

`.html("<b>Test</b>")`会将它们呈现为实际的 HTML 元素（呈现**Test**）。

## 读取数据

`.text()`将仅返回文本节点（剥离标签）

`.html()`将返回包含标签的实际 HTML 字符串。

* * *

这是一个[JSFiddle](http://jsfiddle.net/N25jw/)，它显示了两种方式的差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T15:25:22.340

如果标签没有 HTML 子标签，那么无论哪种方式都是一样的，但是如果有任何标签（例如红色的“必需”标记），最好使用它，`.text()`这样您就可以获得该标记，而不是生成它的 HTML .

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T15:26:11.563

**参考**：[jQuery: text() 和 html() 有什么区别？](https://stackoverflow.com/questions/1910794/jquery-text-vs-html) 和[.text() 和 .html() 之间的区别与转义的 < 和 > 字符](https://stackoverflow.com/questions/4459992/differences-between-text-and-html-with-escaped-and-characters)

实际上两者看起来确实有些相似，但完全不同，这取决于您的用途或您想要实现的意图，

在哪里使用：

*   使用 .html() 对具有 html 元素的容器进行操作。
*   使用 .text() 修改通常具有单独的开始和结束标签的元素的文本

`jQuery.html()`将字符串视为 HTML，`jQuery.text()`将内容视为文本。

> Unlike the .html() method, .text() can be used in both XML and HTML documents. The result of the .text() method is a string containing the combined text of all matched elements. (Due to variations in the HTML parsers in different browsers, the text returned may vary in newlines and other white space.)

# php - 在 javascript 中嵌入 php 变量时出现“SyntaxError：未终止的字符串文字”错误

> ID：14504794
> 
> 赞同：1
> 
> 时间：2013-01-24T15:23:07.450
> 
> 标签：php, javascript, embed

这是一个简单的嵌入，我不明白为什么会出现这个错误。

在动作课...

```
$TESTME = "what"; 
```

在视图中......

```
<script type="text/javascript">
    $(document).ready(function () {
        var someVale = "<?php echo $TESTME; ?>";
        alert(someVale);
    });
</script> 
```

错误指向 var 赋值第一个引号之后

IE。var someVale = "< br />....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:25:46.597

您需要检查`$TESTME`. 它要么包含换行符，要么包含双引号。您看到的错误通常表明有问题的字符串在多行中被破坏，或者引号的数量不匹配。

在你的情况下，它可能是换行符......

```
var someVale = "< br />
<tag>
<tag>
<tag>"; 
```

这显然是行不通的，你需要处理字符串，以便最终得到......

```
var someVale = "< br />\n<tag>\n<tag>\n<tag>"; 
```

您可以使用类似...的方式转换您的 PHP 变量。

```
$TESTME = str_replace(chr(13), "\n", $TESTME); 
```

（根据所涉及的操作系统，您的换行符也可能是`chr(13) . chr(10)`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:11:05.317

大多数时候，您可以避免使用回显变量，但有时这些回显字符串包含行终止符或引号（也称为字符串分隔符）。你可以测试，再测试，但你只*需要*保护自己免受“恶意”和“不可预测”的输入。在这个答案中，我使用了单引号和双引号
你可以`str_replace`或`urlencode`你的字符串，这将解决你的问题，但老实说......到底有什么问题`json_encode`？它非常适合服务器 <-> 客户端数据，就像您正在使用的那样：

```
var someVal = JSON.parse(<?= json_encode(array('data' => $someVar));?>).data; 
```

所有需要转义的字符都将被转义......工作完成，并使用“本机”PHP函数。

*更新：*
正如下面的评论所示，由于范围问题，这可能是 PHP 错误。您应该声明一个属性，而不是在类中声明一个变量：

```
class Foo
{
    public $theProperty = null;
    public function __construct($argument = null)
    {
        $this->theProperty = $argument;//assign a variable, passed to a method to a property
        $someVar = 123;//this variable, along with $argument is GC'ed when this method returns
    }
}
//end of class
$instance = new Foo('Value of property');
echo $instance->theProperty;//echoes "value of property"
$anotherInstance = new Foo();//use default value
if ($anotherInstance->theProperty === null)
{//is true
    echo 'the property is null, default value';
    $anotherInstance->theProperty = 'Change a property';
} 
```

这是，基本上它是如何工作的。我不知道你是如何使用你的视图脚本的，所以下面的代码可能不适用于你的情况（这是你可以在 Zend Framework 中的控制器中执行的操作）：

```
public function someAction()
{
    $instance = new Foo('Foobar');
    $this->view->passedInstance = $instance;//pass the instance to the view
} 
```

然后，在您的视图脚本中，您将执行以下操作：

```
var someVal = JSON.parse('<?= json_encode(array('data' => $this->passedInstance->someProperty)); ?>').data; 
```

但是为了让我的答案适用于你的情况，我必须看看你是如何渲染视图的……你在使用框架吗？你使用的是经典的 MVC 模式，还是视图脚本只是你的东西`include`？

# flash - 生成的 Flash 实例不包括所有 MovieClip

> ID：14504797
> 
> 赞同：0
> 
> 时间：2013-01-24T15:23:11.927
> 
> 标签：flash, movieclip, instances

我有一个基于 Flash 的视频播放器，其中包含播放列表和其他一些功能。问题是当我编译播放器时，更新功能的实例并没有获得所有最新更新。

它看起来像这样

```
Player.swf
|
|-Playlist.swf
|-Texts.swf 
```

因此，如果我用要使用的新电影剪辑/图形更新了“文本”，它将不会出现在“玩家”自己的“文本”实例中。即使我重新编译播放器也不会。怎么会这样？

如果我运行并查看如何使用 FlashFireBug 设置文本，我可以清楚地看到所有 MovieClips 都在那里并且可能应该被加载。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:33:40.980

在一天没有处理这个问题之后，我有了一个可能与这个问题有关的想法。它解决了这个问题。

问题是有一个网络服务用于为这个播放器加载这些孩子。因为他们仍然穿着寻找和加载为当前发布的内容设置的子 SWF 文件的 URL 路径。荣版SWFs穿装。所以通过修复这个 URL 问题问题得到了解决。

因此，重新编译父 SWF 与已编译的子 SWF 无关。

# c++ - 继承：“{”标记之前的预期类名

> ID：14504799
> 
> 赞同：6
> 
> 时间：2013-01-24T15:23:12.263
> 
> 标签：c++

我正在尝试在 C++ 中创建一个异常类，但它不起作用。我已将代码减少到最低限度，但仍然找不到错误。这是我的头文件：

```
#ifndef LISTEXCEPTION_H
#define LISTEXCEPTION_H

// C++ standard libraries
#include <exception>

/* CLASS DEFINITION */
class ListException: public exception {
};

#endif //LISTEXCEPTION_H 
```

这是我得到的错误：

```
error: expected class-name before ‘{’ token 
```

这是非常出乎意料的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:24:14.800

你的意思是

```
class ListException: public std::exception
//                          ^^^ 
```

?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:24:32.820

它巧妙地告诉您这`exception`不是类的名称（无论如何，声明都在范围内）。

你可能打算`std::exception`改为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T15:24:38.697

`exception`位于`std`命名空间中：

```
class ListException: public std::exception { ... } 
```

# properties - 如何使用耶拿模式创建传递属性？

> ID：14504804
> 
> 赞同：0
> 
> 时间：2013-01-24T15:23:25.153
> 
> 标签：properties, jena

我基本上想用 Jena 做到这一点：

i) 架构

```
class:LivingBeing type owl:Class
prop:PrimeFeatures

class:Animal type owl:Class
prop:Speed typeOf PrimeFeatures
prop:Nature typeOf PrimeFeatures

class:HumanBeing type owl:Class
prop:Intelligence typeOf PrimeFeatures 
```

ii) 数据

```
Individual:Cat typeOf Animal resource="someuri:Cat"
prop:Speed = 100
prop:Nature = violent
prop:Veg = No

Individual:John typeOf HumanBeing resource="someuri:John"
prop:Intelligence = Average

Resource resourcecat = model.getResource("someuri:Cat") ; 
```

使用上述模式和数据，我想回答以下对 resourcecat 的需求： 获取 resourcecat 的 PrimeFeatures ：我应该获取作为 Cat 的 PrimeFeatures 的属性的名称及其值。所以，我应该得到以下信息： -

```
 PrimeFeatures(catresource):
           speed=100
           nature=violent 
```

此外，我应该能够使用 Animal 类模式修改 Animal 类的主要特征。

基本上我想控制我使用模式获取的数据。主要使用 OntClass、Resource 和 Properties。我知道使用 Jena 一定是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:18:40.287

一种可能的解决方案如下所示。但是，我要提醒您，您并没有真正按照设计方式使用 OWL 和 RDF 的特性。如果您真的想利用 Jena 的功能，您应该阅读更多有关语义 Web 技术的信息并使用它来指导您的设计。否则，您还不如使用 Java 为您的应用程序设计一个自定义解决方案，而不是尝试将您的设计强制适应它并不真正适合的表示。

```
package test;

import com.hp.hpl.jena.ontology.*;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.util.iterator.ExtendedIterator;

public class User1374179_Test
{
    public static String ns = "http://example.org/test#";

    private OntClass livingBeing;
    private OntClass animal;
    private OntProperty primeFeatures;
    private OntProperty speed;
    private OntProperty nature;

    public static void main( String[] args ) {
        new User1374179_Test().run();
    }

    public void run() {
        OntModel m = createSchema();
        showClassProperties( livingBeing );
        showClassProperties( animal );

        Individual cat1 = createInstance( m, animal, "cat1" );
        cat1.addProperty( speed, m.createTypedLiteral( 100 ));
        cat1.addProperty( nature, "violent" );
        showInstanceProperties( cat1, animal );
    }

    private OntModel createSchema() {
        OntModel m = ModelFactory.createOntologyModel( OntModelSpec.OWL_MEM_MICRO_RULE_INF );

        livingBeing = m.createClass( ns + "LivingBeing" );
        primeFeatures = m.createOntProperty( ns + "primeFeatures" );
        primeFeatures.addDomain( livingBeing );

        animal = m.createClass( ns + "Animal" );
        animal.addSuperClass( livingBeing );

        speed = m.createOntProperty( ns + "speed" );
        speed.addSuperProperty( primeFeatures );
        speed.addDomain( animal );

        nature = m.createOntProperty( ns + "nature" );
        nature.addSuperProperty( primeFeatures );
        nature.addDomain( animal );

        return m;
    }

    private Individual createInstance( OntModel m, OntClass cls, String name ) {
        return m.createIndividual( ns + name, cls );
    }

    private void showClassProperties( OntClass c ) {
        System.out.println( "Class " + c.getURI() );
        for (ExtendedIterator<OntProperty> i = c.listDeclaredProperties(); i.hasNext(); ) {
            System.out.println( " .. has property " + i.next() );
        }
    }

    private void showInstanceProperties( OntResource r, OntClass c ) {
        System.out.println( "Instance " + r.getURI() + " has properties: " );
        for (ExtendedIterator<OntProperty> i = c.listDeclaredProperties(true); i.hasNext(); ) {
            OntProperty p = i.next();
            System.out.println( p.getURI() + " ==> " + r.getPropertyValue( p ) );
        }
    }
} 
```

输出：

```
Class http://example.org/test#LivingBeing
 .. has property http://example.org/test#primeFeatures
Class http://example.org/test#Animal
 .. has property http://example.org/test#speed
 .. has property http://example.org/test#primeFeatures
 .. has property http://example.org/test#nature
Instance http://example.org/test#cat1 has properties: 
http://example.org/test#speed ==> 100^^http://www.w3.org/2001/XMLSchema#int
http://example.org/test#nature ==> violent 
```

# ios - scrollsToTop 不起作用

> ID：14504806
> 
> 赞同：4
> 
> 时间：2013-01-24T15:23:39.993
> 
> 标签：ios, uitableview, uiscrollview

我正在使用 PPRevealSideViewController。我里面有两个 ViewController。中间是 SideSwipeTableViewController 的子类，左边是 UIViewController 的子类，里面有一个 tableView。PPRevealSideViewController 和 SideSwipeTableViewController 的示例应用程序都支持 UITableView 的 scrollsToTop 属性，至少对于 PPRevealSideViewController 中间的 TableView 而言。但是当我同时使用这两个类时，scrollsToTop 停止工作。

我知道这是类似的问题，但我已经尝试了一切，我已经阅读了所有帖子，谷歌给了我关于这个问题的信息，但仍然无法解决它。所以我决定在这里问它，我什至不知道该怎么做才能使 scrollsToTop 工作。

```
self.window.rootViewController = self.revealSideViewController; 
```

在哪里

```
- (PPRevealSideViewController *)revealSideViewController
{
    if (! _revealSideViewController) {
        _middleTableViewController = [MiddleTableViewController new];
        UINavigationController *middleNavController = [[UINavigationController alloc] initWithRootViewController:_middleTableViewController];
        _revealSideViewController = [[PPRevealSideViewController alloc] initWithRootViewController:middleNavController];
        _revealSideViewController.delegate = self;
    }

    return _revealSideViewController;
}

    - (void) preloadSidePanel
{
    AppDel.systemTableViewController = [SystemTableViewController new];
    AppDel.systemTableViewController.parent = self;
    [self.revealSideViewController preloadViewController:AppDel.systemTableViewController
                                                 forSide:isLeftHanded ? PPRevealSideDirectionLeft : PPRevealSideDirectionRight
                                              withOffset:_offset];
} 
```

我在这个 systemTableViewController 中设置了这个：

```
_tableView = [[UITableView alloc] initWithFrame:frame style:UITableViewStylePlain];
[self.view addSubview:_tableView];
 _tableView.scrollsToTop = NO; 
```

但是，它没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T15:41:57.207

仅当只有一个滚动视图（或滚动视图的任何子类。在您的情况下是表格视图）可见时，滚动到顶部才有效。

即使有多个可见的滚动视图，也只有一个应该设置此属性，然后它才会起作用。

此外，如果委托在 scrollViewShouldScrollToTop 中返回 NO，它将不起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T16:07:22.753

通过以下小扩展，`UIView`我解决了同样的问题。因为这些属性不仅存在于 上`UITableView`，还存在于`UIScrollView`和祖先（例如`UICollectionView`）上。

```
@implementation UIView (UIViewPimp)

- (void) disableScrollsToTopPropertyOnMeAndAllSubviews {
    if ([self isKindOfClass:[UIScrollView class]]) {
        ((UIScrollView *)self).scrollsToTop = NO;
    }
    for (UIView *subview in self.subviews) {
        [subview disableScrollsToTopPropertyOnMeAndAllSubviews];
    }
}
@end 
```

我在 -Method 中调用这些新方法`viewDidLoad`，然后设置所需的`UITableView`显式属性。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view  disableScrollsToTopPropertyOnMeAndAllSubviews];
    self.myTableView.scrollsToTop = YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:22:52.083

如果您已经尝试了此处类似线程中提到的所有解决方案并且没有成功“scrollsToTop 修复”，您只需要子类化您的 App 的主 UIWindow。

```
@interface CustomWindow : UIWindow
@end

@implementation CustomWindow

-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    if (point.y <= 20) {
        //do something to scroll appropriate UIScrollView to top
    }
    return YES;
} 
```

在 AppDelegate 中使用它：

```
#import "CustomWindow.h"

@interface AppDelegate : UIResponder

@property (nonatomic,strong) CustomWindow *window;

@end 
```

此解决方案允许将应用程序的任何 UIScrollView 设置为滚动到顶部，而忽略一般的 scrollsToTop 机制。

您现在需要的只是一个指向“活动” UIScrollView 的全局链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T09:59:54.677

我希望这堂课能有所帮助。在我的应用程序中，我们有多个 webviews 和 scrollviews。这使这一切变得容易得多。:)

[https://gist.github.com/hfossli/6776203](https://gist.github.com/hfossli/6776203)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T16:32:22.863

我以为我被乔布斯的幽灵诅咒了，因为我尝试了 StackOverflow 上所有相关问题的所有可能解决方案，但我无法让我的滚动视图配合。

如果上述答案都不适合您 - 请确保您`UIScrollView`的表格视图单元格中没有子类或子类。`scrollsToTop`如果您的 tableView 尚未加载它的子视图，则循环浏览视图的子视图并禁用将无济于事。

对我有用的解决方案是在我的 UITableViewCell 子类上创建一个公共`disableScrollsToTop`方法，将`scrollsToTop`其滚动子视图的属性设置为`NO`.

我使用的代码（名称通用）：

**MYViewController.m**

```
- (void)viewDidLoad
{
    // ... your initialization code
    [self setupScrollViewScrolling];
}

- (void)setupScrollViewScrolling
{
    self.horizontalScrollView.scrollsToTop = NO;
    self.tableView.scrollsToTop = YES;
}

// Note that I am using Xibs here, and your implementation for storyboards/xibless will be slightly different. 
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:
    MyTableViewCell *cell;
    static NSString *identifier = @"IdentifierForCell";
    if (!(cell = [self.tableView dequeueReusableCellWithIdentifier:identifier])) 
    {
        [[NSBundle mainBundle] loadNibNamed:@"MYTableViewCell" owner:self options:nil];
        cell = self.tableViewCell;
        self.tableViewCell = nil;
        // ... cell initialization code
        [cell disableScrollsToTop];
    }

    return cell;
} 
```

当然，`disableScrollsToTop`只是

**MYTableViewCell.m**

```
- (void)disableScrollsToTop
{
    self.subviewThatScrolls.scrollsToTop = NO;
} 
```

另一种方法（可以说更可扩展）可以做到这一点是包装`UITableView's reloadData`方法，并在重新加载后调用递归滚动视图检查方法，如上面列出的@Dominic_Sander，虽然我没有检查这个解决方案，因为我已经*搞砸*了这个问题.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-21T04:05:18.193

我知道这是一个相当古老的，但希望这可以帮助。如果多个 UIScrollView 或其子类将其设置为 YES（默认值），则 scrollsToTop 不起作用的规则遵循这样的规则，健全性检查可能值得检查谁实际上在搞乱这种行为。下面的简单方法遍历视图的子视图并记录视图中所有 UIScrollView 的 scrollsToTop 值。最好在您的 viewDidAppear 方法中调用。

```
- (void)checkForScrollViewInView:(UIView *)view {
    for (UIView *subview in [view subviews]) {
        if ([subview isKindOfClass:[UIScrollView class]]) {
            NSLog(@"scrollsToTop enabled: %i in scroll view %@", ((UIScrollView *)subview).scrollsToTop, subview);
        }
        if (subview.subviews.count > 0) {
            [self checkForScrollViewInView:subview];
        }
    }
} 
```

这确实只是一个调试代码。一旦找到每个 UIScrollView 子类的 scrollsToTop 值，只需确保只有一个设置为 YES。

# vb.net - Linq 分组和拆分数据表 - VB.net

> ID：14504808
> 
> 赞同：1
> 
> 时间：2013-01-24T15:23:48.913
> 
> 标签：vb.net, linq, datatable, group-by

我有一个数据表，我将其拆分为多个数据表。数据表内的结构包含三列

**公司名称。Emp Name and Phone**

我想将整个数据表拆分为多个数据表，每个数据表包含一家公司的所有员工。我希望我的问题在这里有意义。我知道 linq 是执行此操作的最佳方法，但我以前从未使用过 linq，并且完全不知道如何执行此操作。有人可以指导我如何解决这个问题吗？一些代码示例将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:42:00.747

您可以使用以下方法将您的公司名称和数据表作为字典：

```
Dim dict = dataTable.AsEnumerable().GroupBy(Function(r) r.Field(Of String)("CompanyName")).ToDictionary(Function(g) g.Key, Function(g) CopyToDataTable) 
```

# php - PHP foreach 问题

> ID：14504817
> 
> 赞同：-4
> 
> 时间：2013-01-24T15:24:23.883
> 
> 标签：php, html, mysql, foreach

我在编辑代码以使用 PHP foreach 函数时遇到一些问题。我下面的“transactiondata”div 被用来从我的表中提取交易信息。我想使用 foreach() 为表中的每一行创建一个新的 div 部分。但是，在编辑我的 div 以包含 foreach() 时，我抛出了很多错误，所以我回到了第 1 格。完成此任务的最佳方法是什么？

```
<?php
include('cn.php');
session_start();

$userUsername = $_SESSION['loggedInUser'];

$sql = "SELECT * FROM transactions WHERE
    UserID = '" . $userUsername . "'";
$result = mysql_query($sql, $cn) or
    die(mysql_error($cn));
$row = mysql_fetch_assoc($result);

$RequestBody = $row['RequestBody'];
$ResponseBody = $row['ResponseBody'];

parse_str($RequestBody);
parse_str($ResponseBody);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title><?php echo $userUsername; ?>'s Profile - Test 2013</title>
<style>
    .userstatustext 
    {
        position: absolute;
        top: 0px; 
        right: 5px;
    }
    .transactiondata
    {
        position: absolute;
        padding: 5px;
        top: 170px;
        left: 75px;
        width: 900px;
        height: 400px;
        overflow-x: hidden;
        background: #B2B2B2;
        border: 1px solid black;
        word-break: break-all; 
        word-wrap: break-word;
    }
</style>    
</head>
<body>
    <table border="0" cellpadding="10">
      <tr>
        <td>
          <img src="../images/api_rat.png">
        </td>
        <td>
          <h1>Transactions - Test 2013</h1>
        </td>
      </tr>
    </table>
<div class="userstatustext">
    <h5>Welcome, <?php echo $userUsername; ?>!</h5>
    <h5><a href="logout.php">[LOGOUT]</a></h5>
</div>
<h3>Your most recent transactions:</h3>
<div class="transactiondata">
<p><h4>Timestamp: </h4><?php echo date("F j, Y g:i a", strtotime($TIMESTAMP));  ?></p>
<p><h4>Payment Status: </h4><?php echo $ACK; ?></p>
<?php 
if(isset($CORRELATIONID))
{
    echo "<p><h4>Correlation ID: </h4></p>";
    echo $CORRELATIONID; 
}
?>
<?php
if(isset($TRANSACTIONID))
{
    echo "<p><h4>Transaction ID: </h4></p>";
    echo $TRANSACTIONID; 
}
?>
<p><h4>Errors Returned (if any): </h4> 
    <a href="https://www.testsite.com/test/search.php?query=<?php echo $ERRORCODE; ?>&search=Search">
        <?php echo $ERRORCODE; ?>
    </a>
</p>
<p><h4>Request Body: </h4><?php echo $RequestBody; ?></p> 
<p><h4>Response Body: </h4><?php echo $ResponseBody; ?></p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:29:28.307

可能您想输出查询返回的每一行。

因此使用`while`而不是期望`foreach`：

```
while($row = mysql_fetch_assoc($result)) {
    // DO YOUR STUFF HERE
} 
```

我还建议不要使用`mysql_*`现在已弃用的函数，而是使用`PDO`或至少`mysqli_*`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:31:43.103

您需要使用的不是 foreach，而是 while()，这样您就可以在有结果时将结果提取到 $row 变量中。

这样，对于您的查询发现的每一行，您将使用 mysql_fetch_assoc 将该行检索到 $row 变量中，然后将该变量作为表中每一列的数组线程化

我已修改您的代码以匹配此

```
<?php
include('cn.php');
session_start();

$userUsername = $_SESSION['loggedInUser'];

$sql = "SELECT * FROM transactions WHERE
    UserID = '" . $userUsername . "'";
$result = mysql_query($sql, $cn) or
    die(mysql_error($cn));

$RequestBody = $row['RequestBody'];
$ResponseBody = $row['ResponseBody'];

parse_str($RequestBody);
parse_str($ResponseBody);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title><?php echo $userUsername; ?>'s Profile - Test 2013</title>
<style>
    .userstatustext 
    {
        position: absolute;
        top: 0px; 
        right: 5px;
    }
    .transactiondata
    {
        position: absolute;
        padding: 5px;
        top: 170px;
        left: 75px;
        width: 900px;
        height: 400px;
        overflow-x: hidden;
        background: #B2B2B2;
        border: 1px solid black;
        word-break: break-all; 
        word-wrap: break-word;
    }
</style>    
</head>
<body>
    <table border="0" cellpadding="10">
      <tr>
        <td>
          <img src="../images/api_rat.png">
        </td>
        <td>
          <h1>Transactions - Test 2013</h1>
        </td>
      </tr>
    </table>
<div class="userstatustext">
    <h5>Welcome, <?php echo $userUsername; ?>!</h5>
    <h5><a href="logout.php">[LOGOUT]</a></h5>
</div>
<h3>Your most recent transactions:</h3>
<div class="transactiondata">

<?php 
while ($row = mysql_fetch_assoc($result))
 {
?>
<p><h4>Timestamp: </h4><?php echo date("F j, Y g:i a", strtotime($row['TIMESTAMP']));  ?></p>
<p><h4>Payment Status: </h4><?php echo $row['ACK']; ?></p>
<?php 
    if(isset($row['CORRELATIONID']))
    {
        echo "<p><h4>Correlation ID: </h4></p>";
        echo $row['CORRELATIONID']; 
    }
    if(isset($row['TRANSACTIONID']))
    {
        echo "<p><h4>Transaction ID: </h4></p>";
        echo $row['TRANSACTIONID']; 
    }
}
?>
<p><h4>Errors Returned (if any): </h4> 
    <a href="https://www.testsite.com/test/search.php?query=<?php echo $ERRORCODE; ?>&search=Search">
        <?php echo $ERRORCODE; ?>
    </a>
</p>
<p><h4>Request Body: </h4><?php echo $RequestBody; ?></p> 
<p><h4>Response Body: </h4><?php echo $ResponseBody; ?></p>
</div>
</body>
</html> 
```

希望这能解决你的问题

# stream - 方案中的流 - 通过方案中的流映射定义整数

> ID：14504827
> 
> 赞同：5
> 
> 时间：2013-01-24T15:24:38.810
> 
> 标签：stream, scheme, racket, sicp, lazy-sequences

如何通过 Scheme 中的流映射定义整数：

```
(定义整数 (stream-cons 1 (stream-map *something* *something*))
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:54:36.180

@user448810 的答案是完美的，它将在 Racket 中工作（它使用特定于 Racket 的程序）。但是这个问题也被标记了`SICP`，所以这是我的两分钱。

仅使用 SICP 中可用的 Scheme 过程的子集来回答这个问题会产生一个等效但略有不同的解决方案，仅使用书中定义的以下原始流操作：`stream-null? stream-cons stream-car stream-cdr`. 特别注意，这`stream-map`不是 Scheme 的标准部分，并且在书中它是根据原始操作实现的，比 Racket 的实现具有优势 - 它可以接收可变数量的流作为参数：

```
(define (stream-map proc . args)
  (if (stream-null? (car args))
      stream-null
      (stream-cons (apply proc (map stream-car args))
                   (apply stream-map (cons proc (map stream-cdr args))))))

(define (add-streams s1 s2)
  (stream-map + s1 s2)) 
```

有了上述程序，很容易定义`integers`

```
(define ones (stream-cons 1
                          ones))

(define integers (stream-cons 1
                              (add-streams ones integers))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:31:23.303

```
(define integers
  (stream-cons 1
    (stream-map add1 integers))) 
```

有关流的更多信息，请参见[SRFI-41](http://srfi.schemers.org/srfi-41/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T23:48:22.163

您还可以使用 SICP 中的示例：

```
(define (integers-starting-from n)
  (cons-stream n (integers-starting-from (+ n 1))))

(define nats (integers-starting-from 1)) 
```

# xml - 无法在 GetRss.pl 第 25 行的未定义值上调用方法“rs_namespace_uri”

> ID：14504832
> 
> 赞同：1
> 
> 时间：2013-01-24T15:24:58.207
> 
> 标签：xml, perl, rss, lwp-useragent

我正在努力从在线新闻报纸的 RSS 提要中获取特殊术语。我正在使用带有 LWP::UserAgent 的 XML::RSS::Parser 进行 URL 下载。我无法让它工作，即使我实际上使用来自 cpan 的复制粘贴：[http](http://search.cpan.org/~tima/XML-RSS-Parser-1.02/Parser.pm#) : //search.cpan.org/~tima/XML-RSS-Parser-1.02/Parser.pm# $feed-%3Erss_namespace_uri . 我总是遇到同样的错误：“无法在 GetRss.pl 第 25 行的未定义值上调用方法“rss_namespace_uri””。我已经尝试了一切......我在使用 LWP::Simple 和 XML::RSS::Parser 时遇到了同样的问题，我使用 FileHandle 管理它，但我知道我想从多个站点获取提要，保存在大批。这是我的代码：

```
#!/usr/bin/perl -w

use strict;
use XML::RSS::Parser;
use URI;
use LWP::UserAgent;
use Data::Dumper;

my $ua = LWP::UserAgent->new;
$ua->agent('XML::RSS::Parser Test Script');
my @places=( 'http://www.timaoutloud.org/xml/index.rdf' );

my $p = new XML::RSS::Parser;

foreach my $place ( @places ) {

         # retreive feed
        my $url=URI->new($place);
        my $req=HTTP::Request->new;
        $req->method('GET');
        $req->uri($url);
        my $feed = $p->parse($ua->request($req)->content);

        # output some values
        my $title = XML::RSS::Parser->ns_qualify('title',$feed->rss_namespace_uri);
        print $feed->channel->type.": ".$feed->channel->element($title)->value."\n";
        print "item count: ".$feed->item_count()."\n";
        foreach my $i ( @{ $feed->items } ) {
                foreach ( keys %{ $i->element } ) {
                        print $_.": ".$i->element($_)->value."\n";
                        }
                        print "\n";
                }
                # data dump of the feed to screen.
                my $d = Data::Dumper->new([ $feed ]);
                print $d->Dump."\n\n";
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:48:09.110

当您访问 Internet 上的资源时，此访问总是有可能失败。做错误管理：

```
my $response = $ua->get('http://search.cpan.org/');

if ($response->is_success) {
  print $response->decoded_content;  # or whatever
} else {
  die $response->status_line;
} 
```

*— 从[`LWP::UserAgent`文档中窃取](https://metacpan.org/module/LWP%3a%3aUserAgent)*

注意使用`decoded_content`，这样更好。另外，请注意没有为简单的`GET`. 您将希望`print`用您的解析代码替换 。

当我尝试使用浏览器访问您提供的 URL 时，我超时了。

您还可以查看`$p->parse`返回的内容是否确实正常：

```
die "Couldn't parse feed" unless $feed; 
```

另外，`use warnings`.

# spring - HTTP请求完成后如何正确确认AMQP消息

> ID：14504834
> 
> 赞同：2
> 
> 时间：2013-01-24T15:24:59.600
> 
> 标签：spring, spring-mvc, rabbitmq, amqp, spring-amqp

我有一个控制器方法使用来自 AMQP 队列的消息 - 但我不想确认这些消息，直到我尽可能确定发出 http 请求的客户端获得了数据（这样在 http 请求的情况下不会丢失数据离开控制器方法后会失败）。

到目前为止，我能够找到的是，您可以使用 Spring 拦截器来实现“afterCompletion”，它将在请求成功完成后调用。但这感觉有点矫枉过正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:16:46.947

您可以在`http`请求完成后通过将代码确认到该 http 调用下方来确认...*例如*如果发生异常而不是不确认 else 确认

```
channel.basicAck(DeliveryTag, false); 
```

# javascript - 单击/播放后隐藏#div

> ID：14504839
> 
> 赞同：0
> 
> 时间：2013-01-24T15:25:09.693
> 
> 标签：javascript, jquery, video

**这就是我正在尝试的；**

```
$(document).ready(function(){
//Slides object with a time (integer) and a html string
var slides = {
0: '<div id="playdiv" onclick="vidplay()"><img src="imgs/poster1.png" style="min-height: 300px;"/></div>', 
```

**如何保持视频播放的功能；onClick 但也有 #div 里面有图像；点击后消失。**

```
function vidplay() {
   var video = document.getElementById("video");
   var button = document.getElementById("play");
   if (video.paused) {
      video.play();
      (playdiv).style.display="none"; 
```

参考图书馆：[http ://cuepoint.org/](http://cuepoint.org/)

**所以。你们在说什么；这是，是吧？**

```
 function vidplay() {
     var video = document.getElementById("video");
     var button = document.getElementById("play");
     if (video.paused) {
     video.play();
     $("#playdiv").hide(); 
```

*但这不起作用。相反，它只是停止了所有功能；并且视频在第一帧被冻结。*

第二次修复尝试。

```
0: '<div id="playdiv" onclick="vidplay()"><img id="supercoolimg" src="imgs/poster1.png" style="min-height: 300px;"/></div>',

 function vidplay() {
     var video = document.getElementById("video");
     var button = document.getElementById("play");
     if (video.paused) {
     video.play();
     document.getElementById('supercoolimg').style.display='none'; 
```

**失败日志。上午 11 点 59 分。11度。纽约市。（不在外面这样做，但仍然如此。）**

下面是我粘贴在*pastebin*中的完整代码。

*谁能告诉我在这里做错了什么？依然没有。*

[http://pastebin.com/MYJk5gv1](http://pastebin.com/MYJk5gv1)

最近（失败）的尝试；

```
 $(playdiv).find('img').css("display","none"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:28:36.800

这应该这样做。

```
function vidplay() {
   var video = document.getElementById("video");
   var button = document.getElementById("play");
   if (video.paused) {
      video.play();
      $("#playdiv").find('img').css("display","none");
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:29:33.807

向 img 添加一个 id 和

```
document.getElementById('idoftheimg').style.display='none'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:43:37.903

你可以这样使用；）

```
$("#playdiv").hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:29:09.193

使用 JQuery（我假设存在`pause`属性和`play`函数）

像这样删除`onclick="vidplay()"`声明并定义`click`事件：

```
$('#playdiv').click(function(){
   var $video = $("#video");
   if ($video.paused) {
      $video.play();

   //Hide the div
   $(this).fadeOut(300);
}); 
```

# c# - WP8 游戏开发和 C#

> ID：14504844
> 
> 赞同：2
> 
> 时间：2013-01-24T15:25:49.097
> 
> 标签：c#, windows-phone-8

我有一个关于 WP8 游戏开发中使用的工具和框架的问题。

从现在开始，我一直在使用 C# 和 XNA 开发游戏，一切对我来说都很好。但是现在，发布 WP8 SDK 后我不知道该怎么办，因为我必须使用 C++ 而不是 C#。

1.  我想知道有没有办法继续使用 C# 为 WP8 创建游戏？也许任何框架？（例如monogame）等（不要为7.x创建XNA游戏项目）

2.  我也想开发跨平台游戏，WP8 和 Android。如果可能的话，我什至会用 C++ 编写。

结论：

是否有框架可以：

*   跨平台游戏开发android和WP8。
*   C# 更好，但 C++ 也是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:29:01.583

使用 C# 和任何符合 CLI 的语言仍然可以进行游戏开发，唯一不能做的就是使用 Direct-X Api 使用 C# 实现更快、更流畅的游戏。

对于 Android 和 iOS，您可以使用 Xamarin 的工具使用 Mono.Net（只需 google 即可）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:05:23.983

我认为最好的解决方案 ATM 是[http://www.sharpdx.com/](http://www.sharpdx.com/)。这是 DirectX API 的托管版本，在 Windows Phone 8 上受支持。AFAIK 他们还将类似 XNA 的 API 层集成到框架中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:11:15.840

您还可以使用[Unity](http://unity3d.com/)在 WP8、Android 以及您喜欢的 IOS 上进行游戏开发。我相信 XNA 可以在 WP8 上正常工作，但不像 WP7 那样完全支持。

我从[XNA for WP8上的 MSDN 页面获取了这个](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207003%28v=vs.105%29.aspx)

> 面向 Windows Phone OS 7.1 的 XNA Game Studio 4.0 应用程序仍然得到完全支持，并继续在 Windows Phone 8 设备上运行。
> 
> 您可以继续开发和维护面向 Windows Phone OS 7.1 的新的或现有的 XNA Framework 应用程序。
> 
> 您无法将面向 Windows Phone OS 7.1 的现有 XNA Framework 应用程序升级为面向 Windows Phone OS 8.0。
> 
> 您不能创建面向 Windows Phone OS 8.0 的新 XNA Framework 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T22:08:38.013

这取决于你想做什么。对于休闲游戏，您可以使用 XAML 和 C#。我建议避免绑定以获得更好的性能。XAML 不像 XNA 那样提供游戏循环，但您可以使用动画和输入触发器将事件链接在一起。我[在商店中有几款基于 C#/XAML 构建的游戏，](http://apps.microsoft.com/windows/en-au/app/swipe-5/7313afef-ecd1-4a56-ad7c-e51bca29256d)因此您可以了解您可以做什么。

如果你有特定的需求，你可以用 C++ 编写 DirectX 组件，或者你可以混入一些 SharpDX。我为我的一个游戏为 XAudio2 做了这个，添加它非常简单。

对于更高级的选项，Unity 提供了专用的游戏开发平台。除了作为一个出色的平台之外，Unity 还允许您部署到多个平台。

# javascript - 从 Javascript 转换回 HTML 实体

> ID：14504845
> 
> 赞同：0
> 
> 时间：2013-01-24T15:25:53.400
> 
> 标签：javascript

您好，我有以下代码行：

```
$('#chooseCurrencyType').append("<li>"+key+" - &#"+parseInt(data[key], 16)+"</li>"); 
```

它在html中显示如下：`USD - $`

这里 `parseInt("0024", 16) = 36`$ 将显示 $(dollar) 符号....

所以在执行下面的代码...

```
($('.dropdown-toggle').text())  gives me $.. 
```

但是如何`0024`从 javascript 中获取值或如何将其转换回 html 实体......

我试过这样：

```
($('.dropdown-toggle').text()).substring(6,7).charCodeAt(0);  gives me 36 .... 
```

那么如何将 36 转换为 0024 ........任何帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:28:14.913

首先，为什么不直接使用`&#x20AC;`？除此之外，要取回它，您可以尝试`JSON.stringify`然后匹配`/\\u([0-9a-f]+)/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:34:59.113

为什么你不使用 charCodes？它更容易转换。例如：

```
var n=String.fromCharCode(1255); // ӧ
alert(n);
n = n.charCodeAt(0); // 1255
alert(n); 
```

这是一个完整的列表：[http ://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:35:17.863

听起来您想将字符转换回十六进制值？它实际上与 HTML 实体无关。

无论如何，代码将是：

```
function CharToHex(s) {
    var ascii = s.charCodeAt(0);
    return "0x" + Number(ascii).toString(16)
} 
```

用法：

```
var hex = CharToHex("$");
alert(hex + "\n" + parseInt(hex, 16)); 
```

[现场测试用例](http://jsfiddle.net/cDAzm/)。

# openid - OpenID 提供者为他们无法控制的账户提供凭证

> ID：14504855
> 
> 赞同：0
> 
> 时间：2013-01-24T15:26:44.213
> 
> 标签：openid, openid-provider

我正在完成与 OpenID 的第 3 方的集成。我们已经完成了所有困难的部分，并且一切正常。

这个名为 foo.com 的第 3 方正在为在其站点上登录的用户提供 OpenID 身份验证，但他们正在验证并提供有关他们无法控制的域上的用户的信息。像 gmail.com 这样的域，我公司的域，我确信来自他们登录帐户的任何电子邮件地址的任何其他域。

这符合 OpenID 规范吗？（我找不到文档）在我看来 foo.com 为 bar.com 提供 OpenID 身份验证，其中 foo.com 和 bar.com 不相关，而 bar.com 可能甚至不提供 OpenID 支持，似乎错过了 OpenID 的全部要点：您应该只验证您完全控制其帐户的人的身份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:30:48.237

只要身份 URL 在发现期间引用 OP 就可以了。

OP 不应该对用户的身份进行任何控制。它仅尽其所知确认计算机前的用户与身份 url 之间的关系。

# php - T_constant_encapsed_string 问题

> ID：14504860
> 
> 赞同：-5
> 
> 时间：2013-01-24T15:27:13.673
> 
> 标签：php

请不要告诉我用谷歌搜索这个问题，因为我已经有了，没有任何效果，添加一个 . 似乎也没有帮助我。我已经尝试了很多次，并且尽了一切可能。

我在第 52 行遇到的问题：

```
50 require(html-head.inc");
51 
52 echo "<h1>$title, $firstName!</h1>\n";
53 echo "</header>\n";
54 echo "<article>\n";
55 echo "<p>$firstName $lastName, <br />We appreciate your participation in ";
56 echo "our meaningless activity after your $age years of life. ";
57 echo "We will not spam your $email address, but we do plan to ";
58 echo "launch a Denial of legitimacy attack on $url. </p>\n";
59 }
60 echo "</section><!--wrapper-->\n</body>\n</html>"; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:29:39.110

尝试改变这个：

`require(html-head.inc");`

对此

`require("html-head.inc");`

除此之外，我看不到任何其他错误...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:29:25.020

您在您的要求声明中缺少起始报价。它应该是：

```
 require("html-head.inc"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:31:40.437

在 require_once 你没有写第一个双引号（“）。

# windows - Windows Azure 虚拟机，Server 2012，无法激活 0xC004F074

> ID：14504862
> 
> 赞同：4
> 
> 时间：2013-01-24T15:27:27.247
> 
> 标签：windows, azure

我刚刚在 Azure 中创建了一个 Windows VM，运行提供的库中的 Windows Server 2012，2012 年 12 月映像，但是，现在它已启动，我无法让 Windows 激活它，错误代码为 0xC004F074。

我关注了几个论坛主题，包括[Windows Server 2012 Datacenter Not Activating - Windows Azure](http://social.msdn.microsoft.com/Forums/pl-PL/WAVirtualMachinesforWindows/thread/f29d5fe7-4f0f-433d-8333-1d336f68a4db)

但是，这不起作用。另一个论坛帖子说，在安装 Windows 更新后，这个问题正在经历并自行纠正，对我来说不是这种情况。

有人对如何解决此问题有任何想法吗？或者，如果我不激活，我是否可以毫无问题地使用安装？

非常感谢，

马丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:55:13.487

首先，即使您看到此问题，您的 VM 仍然可以正常工作，并且不会影响服务器上运行的服务。但是，我确实知道，即使服务和远程管理不受影响，它不激活 VM 也会为您生成持续的通知以激活服务器。Windows Azure 团队确实知道一小部分 VM 的这个问题，但是如果您也想通知您的问题，您可以直接通过 iaasforum@microsoft.com 与他们联系

如果您想尝试自己解决此问题，很少有用户使用 SLMGR 应用程序禁用选定的激活服务器，然后使用正确的激活服务器，如下所示：

```
slmgr -skms kms.core.windows.net <correct_port_number> 
```

以下论坛讨论详细介绍了如何在 Azure VM 中使用 SLMGR 应用程序来尝试解决此问题，以便您也可以尝试并报告您的结果。

[http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/f29d5fe7-4f0f-433d-8333-1d336f68a4db/](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/f29d5fe7-4f0f-433d-8333-1d336f68a4db/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T16:48:02.420

这是Windows Azure中的一个常见**激活错误，** **Microsoft**已意识到该问题，目前**正在修复**该问题。

此问题在**Windows Azure 技术支持团队博客的这篇文章（****第 7 点**）中进行了讨论： [https ://blogs.msdn.microsoft.com/mast/2013/02/08/windows-azure-virtual-machines-common-](https://blogs.msdn.microsoft.com/mast/2013/02/08/windows-azure-virtual-machines-common-issues/)[问题/](https://blogs.msdn.microsoft.com/mast/2013/02/08/windows-azure-virtual-machines-common-issues/)

 ***请注意，激活状态不会影响服务器上运行的服务。不激活将生成持久通知，提醒您激活服务器。服务和远程管理不受影响。***

# wpf - 什么是 DataBinding 上下文中的缓存访问器？

> ID：14504865
> 
> 赞同：1
> 
> 时间：2013-01-24T15:27:30.423
> 
> 标签：wpf, data-binding

我得到了绑定的跟踪信息：

```
 System.Windows.Data Warning: 55 : Created BindingExpression (hash=45919010) for Binding (hash=4523055)
    System.Windows.Data Warning: 57 :   Path: 'IsEnvelopeFocused'
    System.Windows.Data Warning: 59 : BindingExpression (hash=45919010): Default mode resolved to TwoWay
    System.Windows.Data Warning: 60 : BindingExpression (hash=45919010): Default update trigger resolved to PropertyChanged
    System.Windows.Data Warning: 61 : BindingExpression (hash=45919010): Attach to System.Windows.Controls.DataGridCell.IsFocused (hash=42777048)
    System.Windows.Data Warning: 66 : BindingExpression (hash=45919010): Resolving source 
    System.Windows.Data Warning: 69 : BindingExpression (hash=45919010): Found data context element: DataGridCell (hash=42777048) (OK)
    System.Windows.Data Warning: 77 : BindingExpression (hash=45919010): Activate with root item VulnerEnvelope (hash=53089570)

    System.Windows.Data Warning: 106 : BindingExpression (hash=45919010):   At level 0 using cached 
accessor for VulnerEnvelope.IsEnvelopeFocused: RuntimePropertyInfo(IsEnvelopeFocused)

    System.Windows.Data Warning: 103 : BindingExpression (hash=45919010): Replace item at level 0 with VulnerEnvelope (hash=53089570), using accessor RuntimePropertyInfo(IsEnvelopeFocused)
    System.Windows.Data Warning: 100 : BindingExpression (hash=45919010): GetValue at level 0 from VulnerEnvelope (hash=53089570) using RuntimePropertyInfo(IsEnvelopeFocused): 'False'
    System.Windows.Data Warning: 79 : BindingExpression (hash=45919010): TransferValue - got raw value 'False' 
```

我还使用转换器来输出数据流：`Target -> Source`和`Source -> Target`.
除此之外，我在每次更改时输出附加属性的绑定信息。
绑定保持活动状态，但源和目标不同步。我不知道这个功能损坏的原因是什么，当 VS2012 以红色打印警告 106 时，我认为问题出在这条消息附近。

这是绑定：

```
<DataGridTemplateColumn Width="*" CanUserResize="True" CanUserSort="True" Header=" Title "
                                                SortMemberPath=".">
  <DataGridTemplateColumn.CellStyle>
    <Style TargetType="DataGridCell">
      <Setter Property="Helpers:FocusHelper.IsFocused" Value="{Binding IsEnvelopeFocused, Converter={StaticResource bdc}, PresentationTraceSources.TraceLevel=High}"/>
    </Style>
  </DataGridTemplateColumn.CellStyle>
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
      <TextBlock Name="txtTitle" VerticalAlignment="Center">
        <TextBlock.Text>
          <MultiBinding Converter="{StaticResource TitleConverter}" UpdateSourceTrigger="PropertyChanged">
            <Binding Path="." />
            <Binding Path="DataContext.Language" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=UserControl}" />
          </MultiBinding>
        </TextBlock.Text>
      </TextBlock>
    </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:06:18.977

我真的不知道为什么，但这个街头魔术有帮助！

它是：

```
<Setter Property="Helpers:FocusHelper.IsFocused" Value="{Binding IsEnvelopeFocused,
                                Converter={StaticResource bdc}, 
                                PresentationTraceSources.TraceLevel=High}"/> 
```

它变成了：

```
<Setter Property="Helpers:FocusHelper.IsFocused" Value="{Binding DataContext.IsEnvelopeFocused, 
                                Converter={StaticResource bdc}, 
                                PresentationTraceSources.TraceLevel=High, 
                                RelativeSource={RelativeSource Self}}"/> 
```

数据绑定跟踪输出已更改：

```
System.Windows.Data Warning: 55 : Created BindingExpression (hash=52742621) for Binding (hash=33023833)
System.Windows.Data Warning: 57 :   Path: 'DataContext.IsEnvelopeFocused'
System.Windows.Data Warning: 59 : BindingExpression (hash=52742621): Default mode resolved to TwoWay
System.Windows.Data Warning: 60 : BindingExpression (hash=52742621): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 61 : BindingExpression (hash=52742621): Attach to System.Windows.Controls.DataGridCell.IsFocused (hash=34022436)
System.Windows.Data Warning: 66 : BindingExpression (hash=52742621): Resolving source 
System.Windows.Data Warning: 69 : BindingExpression (hash=52742621): Found data context element: <null> (OK)
System.Windows.Data Warning: 71 :   RelativeSource.Self found DataGridCell (hash=34022436)
System.Windows.Data Warning: 77 : BindingExpression (hash=52742621): Activate with root item DataGridCell (hash=34022436)
System.Windows.Data Warning: 106 : BindingExpression (hash=52742621):   At level 0 using cached accessor for DataGridCell.DataContext: DependencyProperty(DataContext)

System.Windows.Data Warning: 103 : BindingExpression (hash=52742621): Replace item at level 0 with DataGridCell (hash=34022436), using accessor DependencyProperty(DataContext)
System.Windows.Data Warning: 100 : BindingExpression (hash=52742621): GetValue at level 0 from DataGridCell (hash=34022436) using DependencyProperty(DataContext): VulnerEnvelope (hash=14963839)

System.Windows.Data Warning: 106 : BindingExpression (hash=52742621):   At level 1 using cached accessor for VulnerEnvelope.IsEnvelopeFocused: RuntimePropertyInfo(IsEnvelopeFocused)

System.Windows.Data Warning: 103 : BindingExpression (hash=52742621): Replace item at level 1 with VulnerEnvelope (hash=14963839), using accessor RuntimePropertyInfo(IsEnvelopeFocused)
System.Windows.Data Warning: 100 : BindingExpression (hash=52742621): GetValue at level 1 from VulnerEnvelope (hash=14963839) using RuntimePropertyInfo(IsEnvelopeFocused): 'False'
System.Windows.Data Warning: 79 : BindingExpression (hash=52742621): TransferValue - got raw value 'False'
System.Windows.Data Warning: 81 : BindingExpression (hash=52742621): TransferValue - user's converter produced 'False'
System.Windows.Data Warning: 88 : BindingExpression (hash=52742621): TransferValue - using final value 'False' 
```

绑定现在以两种方式工作。
我认为 DataGridCell 的 DataContext 继承和样式应用程序存在问题。
确切地说，这里的顺序很重要，我想。
如果首先应用 Style 数据绑定尝试获取尚未继承的 DataContext 并且以某种方式破坏绑定导致没有更新。
我会尝试重现这个错误，如果我能做到，我会写信给 MS Connect。

# python - Python 多处理 Numpy 随机

> ID：14504866
> 
> 赞同：5
> 
> 时间：2013-01-24T15:27:41.437
> 
> 标签：python, numpy, multiprocessing

在多处理调用的函数中，numpy ndarray 函数的范围是否不同？这是一个例子：

使用 python 的多处理模块，我正在调用这样的函数：

```
for core in range(cores):
    #target could be f() or g()
    proc = mp.Process(target=f, args=(core))
    jobs.append(proc)
for job in jobs:
    job.start()
for job in jobs:
    job.join()

def f(core):
    x = 0
    x += random.randint(0,10)
    print x

def g(core):
    #Assume an array with 4 columns and n rows
    local = np.copy(globalshared_array[:,core])
    shuffled = np.random.permutation(local) 
```

调用`f(core)`，`x`变量是进程本地的，即。它按预期打印一个不同的随机整数。这些从不超过10，表明`x=0`在每个过程中。那是对的吗？

调用`g(core)`和排列数组的副本会返回 4 个完全相同的“混洗”数组。这似乎表明工作副本不是子进程的本地。那是对的吗？如果是这样，除了使用共享内存空间之外，当需要从共享内存空间填充时，是否可以让子进程本地的ndarray？

**编辑：**

更改`g(core)`添加随机整数似乎具有预期的效果。数组显示不同的值。必须发生一些事情`permutation`，即随机排列列（每个子进程的本地）相同......想法？

```
def g(core):
    #Assume an array with 4 columns and n rows
    local = np.copy(globalshared_array[:,core])
    local += random.randint(0,10) 
```

**编辑二：** `np.random.shuffle`也表现出相同的行为。数组的内容正在改组，但在每个核心上都改组为相同的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:09:54.953

> 调用 g(core) 并排列数组的副本会返回 4 个完全相同的“混洗”数组。这似乎表明工作副本不是子进程的本地。

它可能表明随机数生成器在每个子进程中被相同地初始化，产生相同的序列。您需要为每个孩子的生成器播种（也许将孩子的进程 ID 放入混合中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T16:21:14.540

要播种随机数组[，这篇文章](https://stackoverflow.com/questions/5836335/consistenly-create-same-random-numpy-array)是最有用的。以下`g(core)`函数成功地为每个核心生成随机排列。

```
def g(core):
    pid = mp.current_process()._identity[0]
    randst = np.random.mtrand.RandomState(pid)
    randarray = randst.randint(0,100, size=(1,100) 
```

# r - R中具有“负”对数刻度的直方图

> ID：14504869
> 
> 赞同：8
> 
> 时间：2013-01-24T15:27:52.903
> 
> 标签：r, ggplot2, histogram

我有一个包含一些异常值的数据集，例如以下

```
x <- rnorm(1000,0,20)
x <- c(x, 500, -500) 
```

如果我们将其绘制在线性 x 轴刻度上，我们会看到

```
histogram(x) 
```

![非对数 x 轴](../Images/e4bfb07932e298d178ed82dff2f4fb42.png)

我使用这个有用的线程想出了一个很好的方法来把它放在对数刻度上： [如何在 R 中使用对数刻度来表示直方图的 y 轴？](https://stackoverflow.com/questions/4149214/how-to-use-a-log-scale-for-y-axis-of-histogram-in-r)：

```
mat <- data.frame(x)
ggplot(ee, aes(x = xx)) + geom_histogram(colour="darkblue", size=1, fill="blue") + scale_x_log10() 
```

![对数 x 轴](../Images/c85b3c964aba8b8cd1e93c9c0f486654.png)

但是，我希望第二个示例中的 x 轴标签与第一个示例的 x 轴标签相匹配，除了一种“负对数” - 即第一个刻度（从中心向左移动）可能是 -1，然后下一个可能是 -10，下一个是 -100，但都是等距的。那有意义吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T16:32:07.903

我不确定我是否理解您的目标，但是当您想要一个类似对数的变换但有零或负值时，反双曲正弦变换`asinh()`通常是一个不错的选择。对于大值，它类似于对数，并为所有实值定义。有关讨论、详细信息和其他选项，请参阅[Rob Hyndman 的博客](https://robjhyndman.com/hyndsight/transformations/ "罗布·海德曼的博客")和[stats.stackexchange.com 上的这个问题。](https://stats.stackexchange.com/questions/1444/how-should-i-transform-non-negative-data-including-zeros)

如果这是一种可接受的方法，您可以为 ggplot 创建自定义比例。下面的代码演示了如何创建和使用自定义比例（带有自定义中断），以及 asinh() 转换的可视化。

```
library(ggplot2)
library(scales)

limits <- 100
step <- 0.005
demo <- data.frame(x=seq(from=-1*limits,to=limits,by=step))

asinh_trans <- function(){
  trans_new(name = 'asinh', transform = function(x) asinh(x), 
            inverse = function(x) sinh(x))
}

ggplot(demo,aes(x,x))+geom_point(size=2)+
     scale_y_continuous(trans = 'asinh',breaks=c(-100,-50,-10,-1,0,1,10,50,100))+
     theme_bw() 
```

![在此处输入图像描述](../Images/d652946817febe56e7d459aa9a248331.png)

```
ggplot(demo,aes(x,x))+geom_point(size=2)+
     scale_x_continuous(trans = 'asinh',breaks=c(0,1,10,50,100))+
     scale_y_log10(breaks=c(0,1,10,50,100))+ # zero won't plot
     xlab("asinh() scale")+ylab("log10 scale")+
     theme_bw() 
```

![在此处输入图像描述](../Images/2533ede87e34416e4c04ea9595157821.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T22:03:10.220

意识到这个问题已经相当老了，我还是决定回答它，因为我遇到了完全相同的问题。

我看到上面的一些答案误解了你原来的问题。我认为这是一个有效的可视化问题，我在下面概述了我的解决方案，希望对其他人也有用。

我的方法是使用`ggplot`和创建自定义日志转换`x`和`y`轴（以及自定义中断生成器）

```
library(ggplot2)
library(scales)

# Create custom log-style x axis transformer (...,-10,-3,-1,0,1,3,10,...)
custom_log_x_trans <- function()
  trans_new("custom_log_x",
            transform = function (x) ( sign(x)*log(abs(x)+1) ),
            inverse = function (y) ( sign(y)*( exp(abs(y))-1) ),
            domain = c(-Inf,Inf))

# Custom log x breaker (...,-10,-3,-1,0,1,3,10,...)
custom_x_breaks <- function(x)
{ 
  range <- max(abs(x), na.rm=TRUE)

  return (sort( c(0,
                  sapply(0:log10(range), function(z) (10^z) ),
                  sapply(0:log10(range/3), function(z) (3*10^z) ),
                  sapply(0:log10(range), function(z) (-10^z) ),
                  sapply(0:log10(range/3), function(z) (-3*10^z) )
  )))
}

# Create custom log-style y axis transformer (0,1,3,10,...)
custom_log_y_trans <- function()
  trans_new("custom_log_y",
            transform = function (x) ( log(abs(x)+1) ),
            inverse = function (y) ( exp(abs(y))-1 ),
            domain = c(0,Inf))

# Custom log y breaker (0,1,3,10,...)
custom_y_breaks <- function(x)
{ 
  max_y <- length(x)

  range <- max(abs(max_y), na.rm=TRUE)

  return (sort( c(0,
                  sapply(0:log10(range), function(z) (10^z) ),
                  sapply(0:log10(range/3), function(z) (3*10^z) )
  )))
}

ggplot(data=mat) +
  geom_histogram(aes(x=x,fill=..count..), 
                 binwidth = 1, color="black", size=0.1) +
  scale_fill_gradient("Count", low = "steelblue", high = "red") +
  coord_trans(x="custom_log_x",y="custom_log_y") +
  scale_x_continuous(breaks = custom_x_breaks(mat$x)) +
  scale_y_continuous(breaks = custom_y_breaks(mat$x)) +
  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))  + 
  theme_bw() 
```

这给了我以下情节。

![在此处输入图像描述](../Images/5b3e508f7fdd02ad5e9e89359842ec6d.png)

注意：

*   该图还包括着色方案，以直观地显示每个条的绝对值。
*   随着`x`增加，箱子变得越来越薄（对数变换的副作用）

无论哪种情况，**两个异常值都清晰可见**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-20T09:06:22.063

我找到了一种作弊的方法。我说“作弊”，因为它实际上分别绘制了数据的负面和正面部分。因此，您无法比较负面和正面数据。但只能分别显示正负部分的分布。

***问题之一是如果您的数据中的值为零，它将不会显示在图中。***

```
reverselog_trans <- function(base = exp(1)) {
  trans <- function(x) -log(x, base)
  inv <- function(x) base^(-x)
  trans_new(paste0("reverselog-", format(base)), trans, inv, 
            log_breaks(base = base), 
            domain = c(1e-100, Inf))
}

quartz();

dist1 <- ggplot(data=df.meltFUAC) +
  geom_point(alpha=1,aes(x=deltaU.deltaUltrasensitivity,y=deltaF.deltaFitness, 
                         colour=deltaF.w_c)) + 
  scale_x_continuous(name = expression(Delta * S[ult]), 
                     limits=c(1e-7,1),trans = "log10",breaks=c(1e-01,1e-03,1e-05),
                     labels=c("1e-01","1e-03","1e-05")) + 
  scale_y_continuous(name = expression(paste(Delta, " Fitness")),trans = "log10", 
                     limits = c(1e-7,1), breaks=c(1e-01,1e-03,1e-05),
                     labels=c("1e-01","1e-03","1e-05")) +
  theme_bw() +
  theme(legend.position = "none", axis.title.x=element_blank(),strip.background=element_blank(),
        panel.border=element_rect(colour = "black"),panel.grid.major=element_blank(),
        panel.grid.minor=element_blank(),plot.background=element_blank(),
        plot.margin=unit(c(0,0,0,-11),"mm"))

dist2 <- ggplot(data=df.meltFUAC, aes(x=-deltaU.deltaUltrasensitivity,y=deltaF.deltaFitness, 
                                      colour=deltaF.w_c)) +
  geom_point(alpha=1) + 
  scale_x_continuous(name = expression(Delta * sqrt(S[ult] %.% S[amp])),limits=c(1,1e-7),
                     trans = reverselog_trans(10),breaks=c(1e-01,1e-03,1e-05),
                     labels=c("-1e-01","-1e-03","-1e-05")) +
  scale_y_continuous(name = expression(paste(Delta, " Fitness")),trans = "log10", 
                     limits = c(1e-7,1), breaks=c(1e-01,1e-03,1e-05),
                     labels=c("1e-01","1e-03","1e-05")) +
  theme_bw() +
  theme(legend.position = "none",strip.background=element_blank(),panel.border=element_rect(colour = "black"),
        axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),
        axis.line.y=element_line(colour="black",size=1,linetype="solid"),axis.title.x=element_blank(),
        panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),
        plot.margin=unit(c(0,-8,0,2.5),"mm"))

hist0 <- ggplot(data=df.meltFUAC, aes(deltaF.deltaFitness,fill=deltaF.w_c)) +
  #geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') +
  geom_density(alpha = 0.5, aes(colour=deltaF.w_c)) +
  scale_x_continuous(name = expression(paste(Delta, " Fitness")), 
                     limits=c(1e-7,1),trans = "log10",breaks=c(1e-01,1e-03,1e-05),
                     labels=c("1e-01","1e-03","1e-05")) + 
  scale_y_continuous(name = "Density", limits=c(0,0.6)) + 
  theme_bw() +
  theme(legend.position = "none", axis.title.x=element_blank(),strip.background=element_blank(),
        axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),
        axis.text.x=element_blank(), axis.ticks.x=element_blank(), axis.title.x=element_blank(),
        panel.border=element_rect(colour = "black"),panel.grid.major=element_blank(),
        panel.grid.minor=element_blank(),plot.background=element_blank(),
        plot.margin=unit(c(0,5,2.5,-2.5),"mm")) +
  coord_flip()

hist1 <- ggplot(data=df.meltFUAC, aes(deltaU.deltaUltrasensitivity,fill=deltaF.w_c)) +
  #geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') +
  geom_density(alpha = 0.5, aes(colour=deltaF.w_c)) +
  scale_x_continuous(name = expression(Delta * S[ult]), 
                     limits=c(1e-7,1),trans = "log10",breaks=c(1e-01,1e-03,1e-05),
                     labels=c("1e-01","1e-03","1e-05")) + 
  scale_y_continuous(name = "Density", limits=c(0,0.6)) + 
  theme_bw() +
  theme(legend.position = "none", axis.title.x=element_blank(),strip.background=element_blank(),
        axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),
        axis.text.x=element_blank(), axis.ticks.x=element_blank(), axis.title.x=element_blank(),
        axis.line.x=element_line(colour="black",size=1,linetype="solid"),
        panel.border=element_rect(colour = "black"),panel.grid.major=element_blank(),
        panel.grid.minor=element_blank(),plot.background=element_blank(),
        plot.margin=unit(c(5,0,-2.5,2),"mm"))

hist2 <- ggplot(data=df.meltFUAC, aes(-deltaU.deltaUltrasensitivity,fill=deltaF.w_c)) +
  #geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') +
  geom_density(alpha = 0.5, aes(colour=deltaF.w_c)) +
  scale_x_continuous(name = expression(Delta * S[ult]),limits=c(1,1e-7),
                     trans = reverselog_trans(10),breaks=c(1e-01,1e-03,1e-05),
                     labels=c("-1e-01","-1e-03","-1e-05")) +
  scale_y_continuous(name = "Density", limits=c(0,0.6)) + 
  theme_bw() +
  theme(legend.position = "none",strip.background=element_blank(),panel.border=element_rect(colour = "black"),
        axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),
        axis.text.x=element_blank(), axis.ticks.x=element_blank(), axis.title.x=element_blank(),
        axis.line.y=element_line(colour="black",size=1,linetype="solid"),
        axis.line.x=element_line(colour="black",size=1,linetype="solid"),
        panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),
        plot.margin=unit(c(5,-8,-2.5,2.5),"mm"))

grid.newpage();
pushViewport(viewport(layout = grid.layout(3, 3, widths = unit(c(4,4,2),"null"),
                                           heights=unit(c(2,7.5,0.5),"null"))));
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y);

print(dist2, vp = vplayout(2, 1));
print(dist1, vp = vplayout(2, 2));
print(hist2, vp = vplayout(1, 1));
print(hist1, vp = vplayout(1, 2));
print(hist0, vp = vplayout(2, 3));
grid.text(expression(Delta * Ultrasensitivity),vp = vplayout(3,1:2),x = unit(0.55, "npc"), 
          y = unit(0.9, "npc"),gp=gpar(fontsize=12, col="black"));

dev.copy2pdf(file=sprintf("%s/_dist/dist_hist_deltaF_deltaU_wc_01vs10.pdf", resultDir));
dev.off(); 
```

这是它得到的图表（但您需要手动放置图例）：

![在此处输入图像描述](../Images/e893ea7ab3228250bdce0073dfc30f5d.png)

或者更简单的：

```
reverselog_trans <- function(base = exp(1)) {
  trans <- function(x) -log(x, base)
  inv <- function(x) base^(-x)
  trans_new(paste0("reverselog-", format(base)), trans, inv, 
            log_breaks(base = base), 
            domain = c(1e-100, Inf))
}

quartz();

hist1 <- ggplot(deltaF, aes(deltaFitness,fill=w_c)) + guides(fill=guide_legend(title=expression(omega[c]))) + geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') + geom_density(alpha = 0.05, aes(colour=w_c)) + scale_x_continuous(name = expression(paste(Delta, " Fitness")),trans = "log10");
hist1 <- hist1 + scale_y_continuous(name = "Density", limits=c(0,1));
#hist1 <- hist1 + theme(panel.background=element_blank(),panel.border=element_blank(),axis.line.x=element_blank(),axis.line.y=element_line(colour="black",linetype="solid",size=1),axis.title.x=element_blank(),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(5,5,0,5),"mm"));
hist1 <- hist1 + theme_bw();
hist1 <- hist1 + theme(strip.background=element_blank(),panel.border=element_rect(colour = "black"),axis.title.x=element_blank(),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(5,5,0,5),"mm"));
hist1 <- hist1 + scale_color_discrete(name=expression(omega[c]));# + geom_vline(xintercept=0, colour="grey", size = 1);# + geom_hline(yintercept=0, colour="grey", size = 0.5);

hist2 <- ggplot(deltaU, aes(deltaUltrasensitivity,fill=w_c)) + geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') + geom_density(alpha = 0.05, aes(colour=w_c))  + scale_x_continuous(name = expression(paste(Delta, " Ultrasensitivity")), limits=c(1e-7,1),trans = "log10",breaks=c(1e-01,1e-03,1e-05),labels=c("1e-01","1e-03","1e-05"));
hist2 <- hist2 + scale_y_continuous(name = "Density",limits=c(0,1)) ;#+ geom_vline(xintercept=0, colour="grey", size = 1);# + geom_hline(yintercept=0, colour="grey", size = 0.5);
#hist2 <- hist2 + theme(legend.position = "none", axis.title.x=element_blank(),panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(0,5,0,-7.5),"mm"));
hist2 <- hist2 + theme_bw();
hist2 <- hist2 + theme(legend.position = "none", axis.title.x=element_blank(),strip.background=element_blank(),panel.border=element_rect(colour = "black"),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(0,5,0,-7.5),"mm"));
# + ggtitle("Positive part")

hist3 <- ggplot(deltaU, aes(-deltaUltrasensitivity,fill=w_c)) + geom_histogram(alpha = 0.5, aes(y=..density..),position = 'identity') + geom_density(alpha = 0.05, aes(colour=w_c)) + scale_x_continuous(name = expression(paste(Delta, " Ultrasensitivity")), limits=c(1,1e-7),trans = reverselog_trans(10),breaks=c(1e-01,1e-03,1e-05),labels=c("-1e-01","-1e-03","-1e-05"));
hist3 <- hist3 + scale_y_continuous(name = "Density", limits=c(0,1));# + geom_hline(yintercept=0, colour="black", size = 0.5);
#hist3 <- hist3 + theme(legend.position = "none",panel.background=element_blank(),axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),axis.line.y=element_line(colour="black",size=1,linetype="solid"),axis.title.x=element_blank(),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(0,-7.5,0,5),"mm"));
hist3 <- hist3 + theme_bw();
hist3 <- hist3 + theme(legend.position = "none",strip.background=element_blank(),panel.border=element_rect(colour = "black"),axis.text.y=element_blank(), axis.ticks.y=element_blank(), axis.title.y=element_blank(),axis.line.y=element_line(colour="black",size=1,linetype="solid"),axis.title.x=element_blank(),panel.grid.major=element_blank(),panel.grid.minor=element_blank(),plot.background=element_blank(),plot.margin=unit(c(0,-7.5,0,5),"mm"));
# + ggtitle("Negative part")

grid.newpage();
pushViewport(viewport(layout = grid.layout(4, 2, widths = unit(c(5,5),"null"),heights=unit(c(4.6,0.4,4.6,0.4),"null"))));
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y);
print(hist1, vp = vplayout(1, 1:2));  # key is to define vplayout
grid.text(expression(paste(Delta, " Fitness")),vp = vplayout(2,1:2),x = unit(0.5, "npc"), y = unit(0.9, "npc"),gp=gpar(fontsize=12, col="black"));
print(hist3, vp = vplayout(3, 1));
print(hist2, vp = vplayout(3, 2));
grid.text(expression(paste(Delta, " Ultrasensitivity")),vp = vplayout(4,1:2),x = unit(0.5, "npc"), y = unit(0.9, "npc"),gp=gpar(fontsize=12, col="black"));

dev.copy2pdf(file=sprintf("%s/deltaF_deltaU_wc_01vs10.pdf", resultDir));
dev.off(); 
```

这是我得到的图表：

![在此处输入图像描述](../Images/1e5943896f02518473ae48c3cc520617.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T19:17:22.397

为什么要忍受 ggplot2 解决方案？您的第一个绘图是使用 lattice`histogram`函数完成的，这就是您应该停留的地方。只需在函数内直接应用对数变换`histogram`，使用`nint`参数指定直方图箱的数量，并使用`type`参数在“计数”或“密度”之间进行选择。我认为你在那里得到了你需要的一切，但也许我错过了你问题的一些关键细节......

```
library(lattice)
histogram(log10(x), nint=50, type="count") 
```

![在此处输入图像描述](../Images/ffe2e0aee794d86d9db04fb2ade63c60.png)

# c++ - 将 std::chrono::time_point 转换为 unix 时间戳

> ID：14504870
> 
> 赞同：39
> 
> 时间：2013-01-24T15:27:53.027
> 
> 标签：c++, c++11, unix-timestamp, chrono

我怎样才能获得`std::chrono::duration`自固定日期以来的信息？我需要它来将 a 转换`std::chrono::time_point`为 unix 时间戳。

将代码插入 XXX

```
auto unix_epoch_start = XXX;
auto time = std::chrono::system_clock::now();
auto delta = time - unix_epoc_start;
auto timestamp = std::chrono::duration_cast<std::chrono::milliseconds>(delta).count(); 
```

我知道`time_point`有一种方法`time_since_epoch()`，但不能保证这与 unix 纪元（1970 年 1 月 1 日 00:00:00 UTC）相同。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-24T15:46:09.997

unix 时间戳定义为自 1970 年 1 月 1 日 UTC 以来的秒数，但不计算所有秒数。这有点荒谬，人们不得不想知道它的意义何在，所以我同意这是一个愚蠢的问题。

无论如何，让我们看一下 和 的一些平台`time_t`文档`time()`。

[Linux](http://linux.die.net/man/2/time)：

> time() 以自 Epoch 1970-01-01 00:00:00 +0000 (UTC) 以来的秒数返回时间。
> 
> POSIX.1 使用一个公式定义自 Epoch 以来的秒数，该公式近似于指定时间和 Epoch 之间的秒数。这个公式考虑了所有能被 4 整除的年份都是闰年，但能被 100 整除的年份不是闰年，除非它们也能被 400 整除，在这种情况下它们就是闰年。该值与时间和纪元之间的实际秒数不同，因为闰秒和系统时钟不需要与标准参考同步。目的是自 Epoch 值以来对秒数的解释是一致的；请参阅 POSIX.1-2008 基本原理 A.4.15 了解更多基本原理。

[窗户](http://msdn.microsoft.com/en-us/library/1f4c8f33(v=vs.110).aspx)：

> time 函数根据系统时钟返回自 1970 年 1 月 1 日午夜 (00:00:00) 以来经过的秒数，协调世界时 (UTC)。

[Mac OS X](http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/ctime_r.3.html)：

> 函数 ctime()、gmtime() 和 localtime() 都将一个时间值作为参数，该时间值表示自 Epoch（UTC 时间 00:00:00，1970 年 1 月 1 日）以来的时间（以秒为单位）；
> 
> 如果`ISO C90''), and conform to ISO/IEC 9945-1:1996 (`所选本地时区不包含闰秒表（参见 zic(8)）。

可以为其他系统找到类似的文档，例如 AIX、HP-UX、Solaris 等。

因此，尽管在*C++*中没有指定，但有一种简单且可广泛移植的方法来获取 Unix 时间戳：

```
auto unix_timestamp = std::chrono::seconds(std::time(NULL)); 
```

如果您想要自 1970 年 1 月 1 日 UTC 以来的毫秒数（同样不计算所有时间），那么您可以这样做：

```
int unix_timestamp_x_1000 = std::chrono::milliseconds(unix_timestamp).count(); 
```

请记住，这些值不是实时的，因此您通常不能在算术中使用 unix 时间戳。例如，减去 unix 时间戳不会给您准确的时间间隔秒数。或者如果你做了类似的事情：

```
std::chrono::steady_clock::now() - unix_timestamp; 
```

你不会得到一个实际对应于 1970-01-01 00:00:00+0000 的时间点。

* * *

正如 Andy Prowl 建议的那样，您可以做一些愚蠢的事情，例如：

```
// 1 Jan 1970 (no time zone)
std::tm c = { 0, 0, 0, 1, 0, 70, 0, 0, -1};

// treat it as 1 Jan 1970 (your system's time zone) and get the
// number of seconds since your system's epoch (leap seconds may
// or may not be included)
std::time_t l = std::mktime(&c);

// get a calender time for that time_point in UTC. When interpreted
// as UTC this represents the same calendar date and time as the
// original, but if we change the timezone to the system TZ then it
// represents a time offset from the original calendar time by as
// much as UTC differs from the local timezone.
std::tm m = *std::gmtime(&l);

// Treat the new calendar time as offset time in the local TZ. Get
// the number of seconds since the system epoch (again, leap seconds
// may or may not be counted).
std::time_t n = std::mktime(&m);

l -= (n-l); // subtract the difference 
```

`l`现在应该表示自 1970 年 1 月 1 日 UTC 以来的（错误）秒数。只要在系统纪元和 1970 年 1 月 1 日（系统时区）之间没有闰秒，或者在系统纪元的另一个方向上的相同时间段内，那么任何计算的闰秒都应该取消并且`l`是错误的就像unix时间戳错误的方式一样。

* * *

另一种选择是使用不错的日期库，例如[Howard Hinnant 的`chrono::date`](http://howardhinnant.github.io/date/date.html). （Howard Hinnant 是从事 C++11`<chrono>`库工作的人之一。）

```
auto now = system_clock::now();
sys_days today = time_point_cast<days>(now);
system_clock::time_point this_morning = today;

sys_days unix_epoch = day(1)/jan/1970;
days days_since_epoch = today - unix_epoch;

auto s = now - this_morning;

auto tz_offset = hours(0);
int unix_timestamp = (days_since_epoch + s + tz_offset) / seconds(1); 
```

如果您想处理闰秒，Howard Hinnant 还提供[了一个库](http://howardhinnant.github.io/date/tz.html)，其中包括处理闰秒以及解析时区数据库作为闰秒数据源的工具。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-03-06T10:37:38.900

这个 C++11 实现怎么样

```
auto microsecondsUTC = std::chrono::duration_cast<std::chrono::microseconds>(std::chrono::system_clock::now().time_since_epoch()).count(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-30T22:55:51.227

长话短说，这是我用来获取 Unix 时间戳的函数（自 1970 年 1 月 1 日 UTC 以来的秒数）：

```
static uint64_t getUnixTimeStamp(const std::time_t* t = nullptr)
{
    //if specific time is not passed then get current time
    std::time_t st = t == nullptr ? std::time(nullptr) : *t;
    auto secs = static_cast<std::chrono::seconds>(st).count();
    return static_cast<uint64_t>(secs);
} 
```

此功能的优点是默认参数值只为您提供当前时间。但是，如果您想将某些特定时间转换为 unix 时间戳，那么您也可以这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T16:33:44.050

您可以使用`mktime()`将`tm`结构中编码的所需日期转换为*本地时间* `time_t`值。

如果您需要 UTC 时间，则使用将该`gmttime()`值`time_t`转换为 UTC`tm`结构，并从输出中找出当输入给.`tm``time_t``mktime()`

有点复杂，但希望它会起作用或至少提供一个提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-07T15:08:38.037

> 我知道 time_point 有一个方法 time_since_epoch() 但不能保证这与 unix 纪元（1970 年 1 月 1 日 00:00:00 UTC）相同。

从 C++20 和[P0355R7 开始](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0355r7.html#time.clock.system)，[`std::chrono::time_point::time_since_epoch`](https://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch)当[`std::chrono::time_point`](https://en.cppreference.com/w/cpp/chrono/time_point)为[`std::chrono::system_clock`](https://en.cppreference.com/w/cpp/chrono/system_clock).

# android - 在 nfc 标签上存储 html

> ID：14504872
> 
> 赞同：2
> 
> 时间：2013-01-24T15:27:59.797
> 
> 标签：android, mobile, nfc

NFC标签阅读器，特别是在Android上，可以在扫描后打开存储在标签上的网页吗？

我不想存储 URL，我想以纯文本形式存储网页，并在扫描后呈现该网页。这支持吗？

```
<html><body>No signal? Bookmark this page!<img src="http://bit.ly/example"/>Test Image</img></body></html> 
```

上面的例子只有 106 个字节，所以可以适应大多数 NFC 标签，这会在网页中打开还是有某些指令可以将其呈现为网页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:33:01.107

如果您将标签的 MIME 类型设置为`text/html`，则可能会在设置为读取包含该 MIME 类型的 NFC 标签的浏览器中呈现。是否有任何这样的浏览器，我不能说。AOSP 浏览器应用程序不支持这一点——它唯一支持的 NFC 标签是带有URL`http`或`https`URL 方案的标签，基于[其清单的当前内容](https://github.com/android/platform_packages_apps_browser/blob/master/AndroidManifest.xml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:05:24.377

是的，您可以将网页存储在 NFC 标签上——事实上您可以存储任何东西。这并不意味着这是一个好主意。如果您不决定要使用的标签，那么 html 是个坏主意。而是存储一个 URL 并在线获取数据。或者以更紧凑的格式存储数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-23T20:22:59.993

编辑的附加信息：

此链接上的 Android 开发者网站：

[https://developer.android.com/guide/topics/connectivity/nfc/nfc](https://developer.android.com/guide/topics/connectivity/nfc/nfc)

包含丰富的信息，在阅读后，解释了为什么这种特殊方法具有挑战性，但也激发了一些其他的替代想法、方法、方式和手段......我强烈建议检查一下！！！

********** 编辑结束 ************

原始答案：

我已经尝试过同样的方法，并创建了一个 MIME 类型 text/html 的自定义 NDEF 消息，其中一个完全编码的 HTML 文档作为所述 MIME 类型的数据字段中的文本（& 所有标准标签，如 & & 等等）。在浏览器窗口中呈现页面时，我没有任何运气。通常，在扫描 NFC 芯片时，它只返回一个新标签响应，显示我的 MIME“text/html”前缀，甚至完全省略了相关 HTML 编码的显示！

非常沮丧。。

但是 - 再试一次，据我了解，最近发布的 Chrome 浏览器有一个可以激活的实验性 NFC 功能的标志。

在 Chrome 浏览器中，导航到 chrome://chrome-urls 并选择标志链接（或者直接转到 chrome://flags ），然后在搜索栏中输入 NFC。当出现两个左右选项时，将标志从默认更改为启用。

现在，我知道这允许网站与 NFC 标签上的数据进行交互，并允许您将内容字段编写为变量等，但我不知道它是否会解决我们的“渲染 MIME 类型文本/html直接记录为网页”的问题。

我会测试它并告诉你...

# java - JTextfield 中的转义字符

> ID：14504874
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:07.753
> 
> 标签：java, swing, escaping, jtextfield

我想知道是否有一种简单的方法来处理 JTextField 中的转义字符。问题是 getText() 将转义转义字符。当然，大多数时候这将是首选行为，但如果您想让用户自由地为 CSV 文件（包括 \t）提供分隔符，则不是。有任何想法吗？

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:31:01.650

您始终可以覆盖 Swing 组件中任何和所有公共函数的行为。它被称为“专业化”。例如，您可以创建自己的`MyJTextField`类并覆盖该`getText()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:40:37.243

JTextField 只是一个视图，所以它里面总是有一个模型，这个模型就是`Document`类。你可以试试这个：

```
 JTextField f = new JTextField();

    // your JTextField is being filled somehow with text ...

    Document document = f.getDocument();
    try {
        String text = document.getText(0, document.getLength());
    } catch (BadLocationException ex) {
    } 
```

也许当您从`Document`实例而不是`JTextField`实例收集文本时，它不会被转义；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T01:12:41.983

我知道这对你来说可能有点晚了，但我找到了一个简单的解决方案：

```
JTextfield field = new JTextField();
/*someone puts a string into it*/
escapeFulString = field.getText().replace("\\t","\t");
System.out.println(escapeFulString); 
```

这将打印出带有所有选项卡的字符串。要添加任何其他转义序列，只需执行相同的过程。只是不要忘记，Java 字符串方法不要就地编辑，例如：

```
text.replace("\\t","\t") 
//is not the same as
text = text.replace("\\t","\t"); 
```

# .net - 托管接受 MTOM 请求但给出非 MTOM 响应的 WCF 服务

> ID：14504875
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:10.707
> 
> 标签：.net, wcf, mtom

我正在创建一个必须接受 MTOM 编码请求但提供标准文本响应的 WCF Web 服务。有没有办法改变配置来强制这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:35:31.550

我认为您无法更改传入和传出消息的消息编码类型。但是，您可以为复合编码器定义自定义消息编码器。

在这里您可以找到有关[实现复合编码器的](http://blogs.msdn.com/b/carlosfigueira/archive/2011/11/09/wcf-extensibility-message-encoders.aspx)足够信息。此博客文章中的示例创建了一个自定义消息编码器，该编码器读取使用 MTOM 编码的消息并写入以 xml 编码的响应消息。

# asynchronous - 在 AngularJS 指令中使用异步配置

> ID：14504880
> 
> 赞同：2
> 
> 时间：2013-01-24T15:28:25.893
> 
> 标签：asynchronous, angularjs

我有一个指令，它查看配置以确定要使用的模板。它曾经很好用；我有一个配置服务，它只返回一个带有配置值的对象，然后我做了这样的事情：

```
if (Config.Values.ReleaseVersion < 1.0) {
  template = 'partials/pagebeta.html';
}
else {
  template = 'partials/page.html';
}
templateUrl: template 
```

最近引入了一个问题。我的配置服务必须从 json 文件中获取值。现在因为获取配置是异步的，我现在从配置服务传回一个承诺。这在我的指令中给我带来了问题 - 我不能这样做：

```
var template;
Config.then(function(config) {
  if (config.Values.ReleaseVersion < 1.0) {
    template = 'partials/pagebeta.html';
  } 
  else {
    template = 'partials/page.html';
  }
});
templateUrl: template 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:05:54.307

如果你的 templateUrl 依赖于异步计算的值，你就不能再使用指令的`templateUrl`属性，你将不得不使用较低级别的 API，即`$http`and `$compile`。

您需要做的大致（仅在链接功能中可能）是使用`$http`（不要忘记涉及`$templateCache`！）检索模板的内容，然后“手动”编译模板的内容。

听起来可能需要做很多工作，但实际上它相当简单。我建议查看使用此模式的`ngInclude`指令[源。](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngInclude.js)

# asp.net - 内联显示 DevExpress 按钮

> ID：14504885
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:41.533
> 
> 标签：asp.net, css, devexpress

我已经查阅过[这个页面](http://www.devexpress.com/Support/Center/p/K18357.aspx)，但我的 ASPxButton 控件仍然显示在另一个之上。我在这段代码中遗漏了什么吗？我可以说已检测到样式，因为我可以在输入 CssClass 参数时自动完成样式。

页面：

```
<dxe:ASPxButton ID="_ASPxButton1" ClientInstanceName="_ASPxButton1" runat="server"
    Text="Print" AutoPostBack="False" CssClass="btnInline" >
    <ClientSideEvents Click="function(s, e) { window.print(); }" />
</dxe:ASPxButton>
<dxe:ASPxButton ID="_ASPxButton2" ClientInstanceName="_ASPxButton2" runat="server"
    Text="Close" AutoPostBack="False" CssClass="btnInline" >
    <ClientSideEvents Click="function(s, e) { window.close(); }" />
</dxe:ASPxButton> 
```

CSS：

```
.btnInline 
{
    display: inline-table;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:47:45.987

这种风格似乎在较新的浏览器中以不同的方式运行。使用[K18357](http://www.devexpress.com/Support/Center/p/K18357.aspx) KB (p.3) 中的另一个解决方案来完成此任务。

PS我建议你直接联系DX人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:02:03.903

一旦我更深入地研究了这一点，我意识到 ASPxButton 实际上是一个嵌入了各种 css 的表格，因此几乎不可能让这些“按钮”中的两个并排放置。

我最终只是将这些按钮编码为 asp:Button 控件，这让我摆脱了所有 DevExpress 样式的包袱。我能够将按钮设置为看起来就像一个 ASPxButton，所以现在一切正常。

页面：

```
<asp:Button ID="_ASPxButton1" Text="Close" runat="server" CssClass="devExpressButton" OnClientClick="showPrintView();" />
<asp:Button ID="_ASPxButton2" Text="Print" runat="server" CssClass="devExpressButton" OnClientClick="feePopupHide();" /> 
```

CSS：

```
.devExpressButton 
{
    border: solid 2px #475e78;
    background-color: #f3f3f3;
    font-weight: bold;
    height: 30px;
    width: 60px;
    color: #000000;    
    font-size: 9pt;
    font-family: Arial, Helvetica, Geneva, sans-serif;                  
    vertical-align: middle;         
    padding: 1px 1px 1px 1px;
    margin: 5px 5px 5px 5px;
    cursor: pointer;    
    -moz-border-radius: 6px; 
    -webkit-border-radius: 6px; 
    -khtml-border-radius: 6px; 
}
.devExpressButton:hover
{
    color: #FFFFFF;   
    font-weight: bold;
    background-color: #5D7B9D;
} 
```

# python - python从哪里得到这个构建命令？

> ID：14504887
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:46.723
> 
> 标签：python, cygwin, installation, volatility

**背景**

我正在安装这个[演练](http://code.google.com/p/volatility/wiki/FullInstallation)中的波动性。我在 Windows 7 64 位安装上执行此操作，并且我安装了 python 2.7。我几个月前安装了 cygwin，可能在 6 个多月前将其删除。我已经清除了我能找到的所有对它的引用以及与之关联的所有文件。python从哪里得到“-mno-cygwin”？任何帮助或链接将不胜感激！谢谢！

**当前路径变量**

```
C:\Python27\;
C:\Python27\Scripts;
C:\MinGW\bin;
C:\Perl64\site\bin;
C:\Perl64\bin;
%SystemRoot%\system32;
%SystemRoot%;
%SystemRoot%\System32\Wbem;
c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;
c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;
c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;
c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;
c:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;
%systemroot%\System32\WindowsPowerShell\v1.0\;
%TTPRO_APPDIR%;
C:\Program Files\TortoiseSVN\bin;
C:\Program Files (x86)\Lua\5.1;
C:\Program Files (x86)\Lua\5.1\clibs;
C:\Program Files\Microsoft SQL Server\110\Tools\Binn\ 
```

**错误**

```
C:\Users\<user>\Downloads\pycrypto-2.6.tar\dist\pycrypto-2.6\pycrypto-2.6>pyth
on setup.py build -c mingw32
running build
running build_py
running build_ext
running build_configure
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.

building 'Crypto.Random.OSRNG.winrandom' extension
C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -Wall -std=c99 -O3 -fomit-frame-pointer -
Isrc/ -IC:\Python27\include -IC:\Python27\PC -c src/winrand.c -o build\temp.win-
amd64-2.7\Release\src\winrand.o
cc1.exe: error: unrecognized command line option '-mno-cygwin'
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:48:53.733

这个[答案](https://stackoverflow.com/questions/9645004/python-mno-cygwin)表明 -mno-cygwin 选项可以在 c:\Python27\lib\distutils\cygwinccompiler.py 中找到，并且它是一个可以删除的不推荐使用的选项。

# r - 调试用户自定义函数

> ID：14504889
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:51.483
> 
> 标签：r

对于“[巴尔的摩凶杀案](http://data.baltimoresun.com/homicides/)”数据集，需要创建一个函数，该函数接受一个字符串，例如**“射击”**，并返回一个整数，表示“射击”的受害者人数。我写了以下函数，但我收到错误

> 错误：“}”中出现意外的“}”
> 
> 错误：找不到对象“counti”

我也无法弄清楚**==Null**是否正确

```
count <- function(cause = NULL) {

## Check that "cause" is non-NULL; else throw error
if cause==NULL
{
stop()
print("no cause provided")
}

## Read "homicides.txt" data file
homicides <- readLines("homicides.txt")
## Extract causes of death
i <- grep(cause, homicides)  ##get indices of cause
counti <- lenghth(i) ##get count of indices
## Check that specific "cause" is allowed; else throw error
if counti=0
{
stop()
print("no such cause")
}

## Return integer containing count of homicides for that cause      
return(counti)  
} 
```

* * *

这是我编辑后的工作功能，谢谢大家

```
count <- function(cause = NULL) {
  if(missing(cause) | is.null(cause)) stop("no cause provided")
  homicides <- readLines("homicides.txt")
  i=length(grep(cause, homicides))
  if(i==0) stop("no cause found")
  return(i)
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:49:39.187

您可以通过执行以下操作将函数简化为 2 行：

```
count <- function(cause = NULL, data) {
  if(is.null(cause)) stop("no cause provided")
  length(grep(cause, data))
}

data <- c("murder", "some other cause")

count("murder", data)
[1] 1 
```

请注意以下原则：

*   R 具有函数式语言的许多特性。这意味着每个函数应该尽可能只依赖于你传递给它的参数。
*   当您的代码中有错误时，请将其简化为尽可能短的版本，修复错误，然后从那里进行构建。

此外，保留`stop()`真正致命的错误。在您的数据中找不到搜索字符串不是错误，它只是意味着找不到原因。您不希望您的代码停止。最多发出 a`message()`或 a `warning()`。

# expert-system - 专家系统中的自修改规则

> ID：14504890
> 
> 赞同：0
> 
> 时间：2013-01-24T15:28:52.197
> 
> 标签：expert-system, self-modifying

有什么方法可以让系统本身修改专家系统上的规则，以便它可以从经验中学习？- 建议总是受欢迎的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:12:16.407

简短的回答是“是的”，有办法做到这一点。例如，规则的“如果”部分可以依赖于数值（例如，先验概率）。当触发规则时，规则的“then”部分可以更新先验，从而更改规则。如果您询问对规则的结构更改，这也是可能的（您可以根据可能创建、修改或删除的条件断言来制定规则），但可能的程度取决于特定的专家系统你正在使用的外壳。

# java - 单击单选按钮，

> ID：14504892
> 
> 赞同：-3
> 
> 时间：2013-01-24T15:28:57.547
> 
> 标签：java, android

我将单选按钮添加到我的单选组中，我想为按钮添加一个属性，以便在单击添加的按钮之一时调用一个方法。我该怎么做，我尝试搜索，但没有找到答案。我有一个 for 循环来添加单选按钮

```
enter code here

RadioGroup group = (RadioGroup) findViewById(R.id.RadioGroup);
RadioButton button;
String accounts= msg.getData().getString("text");
String[] SepAccounts= accounts.split(":");
    for (int i=0; i<SepAccounts.length;i++)
        SepAccounts[i]= SepAccounts[i].replaceAll("-"," ");
    Context context= group.getContext(); 

    for (int i=0; i < SepAccounts.length; i++){ 
            button = new RadioButton(context);
            button.setText(SepAccounts[i]);
        group.addView(button);
    } 
```

这是我添加单选按钮的代码的一部分

这就是我创建广播组的地方

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_below="@id/NFCHeaderTextView"
android:layout_width="fill_parent"
android:background="@drawable/back"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:id="@+id/RadioGroup"
    android:onClick="onRadioButtonClicked">

</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:53:31.467

你试过这个吗？

```
radioButton.setOnClickListener(listener); 
```

您的侦听器将需要实现 OnClickListener。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:53:48.873

将 OnClickListener 添加到每个按钮，然后再将其添加到组中...

```
 RadioGroup group = (RadioGroup) findViewById(R.id.RadioGroup);
    RadioButton button;
    String accounts = msg.getData().getString("text");
    String[] SepAccounts = accounts.split(":");
    for (int i = 0; i < SepAccounts.length; i++)
        SepAccounts[i] = SepAccounts[i].replaceAll("-", " ");
    Context context = group.getContext();

    for (int i = 0; i < SepAccounts.length; i++) {
        button = new RadioButton(context);
        button.setText(SepAccounts[i]);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                doStuff(v);
            }
        });
        group.addView(button);
    }

...

private void doStuff(View v)
{
    // radio button "v" was clicked
} 
```

查看文档以获取有关 OnClickListener [http://developer.android.com/reference/android/view/View.OnClickListener.html的更多信息](http://developer.android.com/reference/android/view/View.OnClickListener.html)

# dart - 使用 dart:mirrors 反射检索 getter 值

> ID：14504896
> 
> 赞同：1
> 
> 时间：2013-01-24T15:28:59.657
> 
> 标签：dart, dart-mirrors

我有以下代码（简化），它使用反射来迭代类的字段和 getter 并输出值。该类`ContainsGetter`包含一个getter，`ContainsField`该类包含一个简单的字段。

使用`dart:mirrors`库，我可以使用 ) 获取字段的值`instanceMirror.getField(fieldName)`，但不能使用`instanceMirror.invoke(fieldName,[])`.

以下 Dart 脚本（使用 build 17463）提供以下输出：

**应用脚本**

```
import 'dart:mirrors';

class ContainsGetter { // raises an error
  String get aGetter => "I am a getter";
}

class ContainsField { // works fine
  String aField = "I am a field";
}

void main() {
  printFieldValues(reflect(new ContainsField()));
  printGetterValues(reflect(new ContainsGetter()));
}

void printFieldValues(instanceMirror) {
  var classMirror = instanceMirror.type;
  classMirror.variables.keys.forEach((key) {
    var futureField = instanceMirror.getField(key); // <-- works ok
    futureField.then((imField) => print("Field: $key=${imField.reflectee}"));
  });
}

void printGetterValues(instanceMirror) {
  var classMirror = instanceMirror.type;
  classMirror.getters.keys.forEach((key) {
    var futureValue = instanceMirror.invoke(key,[]); // <-- fails
    futureValue.then((imValue) => print("Field: $key=${imValue.reflectee}"));
  });
} 
```

**输出**

```
Field: aField=I am a field
Uncaught Error: Compile-time error during mirrored execution: <Dart_Invoke: did not find instance method 'ContainsGetter.aGetter'.>
Stack Trace:
#0      _LocalObjectMirrorImpl._invoke (dart:mirrors-patch:163:3)
#1      _LocalObjectMirrorImpl.invoke (dart:mirrors-patch:125:33) 
```

（一个可以接受的可能是“这部分还没有写出来！”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:35:46.613

啊，我刚刚解决了。尽管 `aGetter`在其实现中就像一个方法，但您使用`getField()`而不是`invoke`检索其值。

```
void printGetterValues(instanceMirror) {
  var classMirror = instanceMirror.type;
  classMirror.getters.keys.forEach((key) {
    var futureValue = instanceMirror.getField(key); // <-- now works ok
    futureValue.then((imValue) => print("Field: $key=${imValue.reflectee}"));
  });
} 
```

# linq - 使用 Linq 将 DataTable 投影到新结构中

> ID：14504898
> 
> 赞同：1
> 
> 时间：2013-01-24T15:29:07.937
> 
> 标签：linq

我有一个 DataTable 我想按摩成一种新格式（这是附加到 gridview 时的结果）：

```
 <table cellspacing="0" rules="all" border="1" id="GridView1" style="border-collapse: collapse;">
        <tr>
            <th scope="col">
                Line
            </th>
            <th scope="col">
                StartTime
            </th>
            <th scope="col">
                EndTime
            </th>
            <th scope="col">
                Attribute
            </th>
            <th scope="col">
                Value
            </th>
        </tr>
        <tr>
            <td>
                Line1
            </td>
            <td>
                24/01/2013 7:30:10 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                0
            </td>
        </tr>
        <tr>
            <td>
                Line1
            </td>
            <td>
                24/01/2013 7:30:10 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                ProductCategory
            </td>
            <td>
                FFAC
            </td>
        </tr>
        <tr>
            <td>
                Line1
            </td>
            <td>
                24/01/2013 7:30:10 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Target
            </td>
            <td>
                36.5
            </td>
        </tr>
        <tr>
            <td>
                Line2
            </td>
            <td>
                24/01/2013 7:26:50 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                69
            </td>
        </tr>
        <tr>
            <td>
                Line2
            </td>
            <td>
                24/01/2013 7:26:50 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                ProductCategory
            </td>
            <td>
                FFAC
            </td>
        </tr>
        <tr>
            <td>
                Line2
            </td>
            <td>
                24/01/2013 7:26:50 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Target
            </td>
            <td>
                55.5555582046509
            </td>
        </tr>
        <tr>
            <td>
                Line3
            </td>
            <td>
                24/01/2013 8:00:20 AM
            </td>
            <td>
                24/01/2013 8:47:50 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                1475
            </td>
        </tr>
        <tr>
            <td>
                Line3
            </td>
            <td>
                24/01/2013 8:00:20 AM
            </td>
            <td>
                24/01/2013 8:47:50 AM
            </td>
            <td>
                ProductCategory
            </td>
            <td>
                FFAC
            </td>
        </tr>
        <tr>
            <td>
                Line3
            </td>
            <td>
                24/01/2013 8:00:20 AM
            </td>
            <td>
                24/01/2013 8:47:50 AM
            </td>
            <td>
                Target
            </td>
            <td>
                202.430557310581
            </td>
        </tr>
        <tr>
            <td>
                Line4
            </td>
            <td>
                24/01/2013 7:31:30 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                1384
            </td>
        </tr>
        <tr>
            <td>
                Line4
            </td>
            <td>
                24/01/2013 7:31:30 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                ProductCategory
            </td>
            <td>
                FFAC
            </td>
        </tr>
        <tr>
            <td>
                Line4
            </td>
            <td>
                24/01/2013 7:31:30 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Target
            </td>
            <td>
                3179.26381587982
            </td>
        </tr>
        <tr>
            <td>
                Line5
            </td>
            <td>
                24/01/2013 7:37:00 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                0
            </td>
        </tr>
        <tr>
            <td>
                Line5
            </td>
            <td>
                24/01/2013 7:37:00 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                ProductCategory
            </td>
            <td>
                FHHT
            </td>
        </tr>
        <tr>
            <td>
                Line5
            </td>
            <td>
                24/01/2013 7:37:00 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Target
            </td>
            <td>
                92.6652171770756
            </td>
        </tr>
        <tr>
            <td>
                P2_Bundler
            </td>
            <td>
                24/01/2013 7:35:00 AM
            </td>
            <td>
                24/01/2013 8:00:10 AM
            </td>
            <td>
                Actual
            </td>
            <td>
                7
            </td>
        </tr>
    </table> 
```

我知道如果记录具有相同的行、开始和结束时间，则记录是相关的。

我想要做的是获得按 ProductCategory 分组的实际值和目标值的总和。换句话说：

```
ProductCategory | Sum(Actual) | Sum(Target)

FFAC            | 1000        | 2000

FHHT            | 200         | 175 
```

任何指导将不胜感激！

问候，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:34:55.540

你不会在这里做任何按摩；）

dataTable 的结构将比网格代码更有用，但要从 DataTable 中获得所需的内容，您应该这样做。

```
var result = myDataTable.AsEnumerable()
              .GroupBy(m => m.Field<string>("ProductCategory"))
              .Select(g => new {
                  productCategory = g.Key,
                  sumActual = g.Sum(x => x.Field<decimal>("Actual")),
                  sumTarget = g.Sum(x => x.Field<decimal>("Target"))
               }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:00:39.533

哎，我以为这会比预期的更难，但最终变得更容易了，我重写了这个。您在线上执行分组，但随后您只需查询每个组中的行以获取 ProductCategory。

首先，您将按主键分组，在这种情况下，我认为是`Line`列。所以：

```
myDataTable.AsEnumerable()
    .GroupBy(m => m.Field<string>("Line")) 
```

接下来，我们将不得不为这些分组中的每一个找到类别。由于每个分组都是一个`IEnumerable<T>`，因此只需`Select`在过滤我们的`Attribute`as后执行 a`ProductCategory`并获得第一个值。`ProductCategory`通过考虑不存在属性的情况，我使用了一点“防御性”编码：

```
 ...
    .Select(g => new 
        { 
            ProductCategory = g.Where(r => r.Field<string>("Attribute") == "ProductCategory")
                        .Select(r => r.Field<string>("Value"))
                        .FirstOrDefault() ?? "No Category",
            SumActual = g.Sum(x => x.Field<decimal>("Actual")),
            SumTarget = g.Sum(x => x.Field<decimal>("Target"))
        }) 
```

编辑：好的，现在我明白你在说什么了。我最初的想法是正确的，因为您将每个原始组（基于 Line）分组为更多组。确实没有简单的方法，而且选项也不漂亮。事实上，您必须对每个组进行分组，但是为了对组进行分组，您必须在组中查询单个实体，然后基于另外 2 个实体进行聚合（这使得在这里使用 LINQ 非常困难）。

```
myDataTable.AsEnumerable()
    .GroupBy(m => m.Field<string>("Line"))
    .Select(g => new
        {
            ProductCategory = g.Where(r => r.Field<string>("Attribute") == "ProductCategory")
                        .Select(r => r.Field<string>("Value"))
                        .FirstOrDefault() ?? "No Category",
            Actual = g.Where(r => r.Field<string>("Attribute") == "Actual")
                        .Select(r => 
                            { 
                                decimal d = 0m; 
                                Decimal.TryParse(r.Field<string>("Value"), out d);
                                return d;
                            }
                        .FirstOrDefault(),
            Target = g.Where(r => r.Field<string>("Attribute") == "Target")
                        .Select(r => 
                            { 
                                decimal d = 0m; 
                                Decimal.TryParse(r.Field<string>("Value"), out d);
                                return d;
                            }
                        .FirstOrDefault()
        })
    .GroupBy(n => n.ProductCategory)
    .Select(g => new
        {
            ProductCategory = g.Key,
            SumActual = g.Sum(x => x.Actual),
            SumTarget = g.Sum(x => x.Target)
        }) 
```

同样，不是很漂亮......特别是因为您的“值”列是字符串，您必须解析它们才能获得有意义的值（在这种情况下，求和一个数字）。这里的前提是您将所有记录分组为“块”，然后将这些块组合成单个匿名对象。因此，每个匿名对象代表特定行的所有数据行属性/值对。从那里，您只需根据所需的键（在本例中为 ProductCategory）进行分组，并执行所需的聚合。

PS，我实际上会使用 PIVOT 在数据库端执行此查询。可能需要更多设置，但随后您为设计用于执行此类数据处理/聚合的系统提供它可以处理的工作，并为更重要的事情保留前端 CPU 周期。

# java - HashSet 'add' 方法何时调用等于？

> ID：14504901
> 
> 赞同：10
> 
> 时间：2013-01-24T15:29:12.013
> 
> 标签：java, comparison, equals, hashset

我在 HashSet 比较中做了这个测试，`equals` *没有被调用*

我想在 farAway=false 时考虑等于（检查两点距离的函数）

完整的可编译代码，您可以对其进行测试，并说明为什么在此示例中未调用 equals。

```
public class TestClass{
     static class Posicion
    {
        private int x;
        private int y;

        @Override
        public boolean equals(Object obj) {
            if (obj == null) {
                return false;
            }
            if (getClass() != obj.getClass()) {
                return false;
            }
            final Posicion other = (Posicion) obj;
            if ( farAway(this.x, other.x, this.y, other.y,5)){   
                return false;
            } 
            return true;
        }

        @Override
        public int hashCode() {
            int hash = 7; hash = 59 * hash + this.x; hash = 59 * hash + this.y;
            return hash;
        }

         Posicion(int x0, int y0) {
            x=x0;
            y=y0;
        }

        private boolean farAway(int x, int x0, int y, int y0, int i) {
            return false;
        }
    }

    public static void main(String[] args) {
        HashSet<Posicion> test=new HashSet<>();
        System.out.println("result:"+test.add(new Posicion(1,1)));
        System.out.println("result:"+test.add(new Posicion(1,2)));
    }
} 
```

**编辑**

- 有没有办法强制HashSet add 来调用equals？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T15:30:18.250

如果哈希码不同，则无需调用`equals()`，因为它保证返回`false`。

这来自于和的总[合同](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)：`equals()``hashCode()`

> 如果根据方法两个对象相等`equals(Object)`，则对两个对象中的每一个调用该`hashCode`方法必须产生相同的整数结果。

现在你的班级正在违反该合同。你需要解决这个问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T15:56:06.683

如果您想`equals()`始终被调用，只需始终返回，例如`0`in `hashCode()`。这样，所有项目都具有相同的哈希码，并且纯粹与`equals()`.

```
public int hashCode() {
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:59:06.530

听起来 HashSet 不适合你。听起来您想要一种比较两个位置的自定义方式。而不是说“两个位置完全相等吗？”。相反，您应该考虑使用带有 Comparator 的 TreeSet。这样，您可以编写“IsWithinRangeComparator”并在那里进行范围检查。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T15:43:27.723

如上所述，当对象相等时，它们的哈希码也应该相同。您可以对哈希码计算进​​行简单修复，如下所示。

```
 public int hashCode() {

int hash = 7; hash = 59 * hash + this.x; hash = 59 * hash + this.y;
boolean faraway=farAway(this.x, other.x, this.y, other.y,5);
hash=59*hash+(faraway?1:0); //include faraway also as part of hashcode computation

 return hash; 
```

}

# c - 在 C 中分配给 void 指针时

> ID：14504904
> 
> 赞同：0
> 
> 时间：2013-01-24T15:29:17.740
> 
> 标签：c, pointers, void, assign

我认为在将值分配给指针时，您应该使用 * 运算符，但我看到了类似的代码

```
char *a;
void *b;
b = "Hello";
a = b;
printf("%s", a); 
```

当我编译它并打印 Hello 时这是合法的。不需要指向无效解除引用的指针吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:39:42.310

这“有效”是因为 a`void *`和 a`char *`能够保存任何类型的指针。您可能会遇到麻烦，例如，如果您使用`int *a;`而不是`void *a;`.

但是，您的代码没有取消引用`void`指针，并且 printf 函数`char *`在将参数从列表中的变量参数中拉出时将其转换为 a 。因此，您的代码中没有取消引用 void 指针。如果您的指针在某些类型的机器上没有完美地转换为 a `char *`（例如，如果我们有一个`int *a;`），这些机器在没有“额外信息”的情况下不寻址字节（有些机器只有“指针”指向整个机器字和额外信息用于在读取字节时存储您想要的那个字中的哪个字节），那么您的 printf 很可能无法正确操作 [“未定义的行为”]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:32:12.800

C 中没有字符串类型。您可以将`char*`指向`char`数组开头的指针视为字符串。这正是这里的`printf`待遇`a`。

据我记得，C 标准要求`char*`并且`void*`可以互换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:37:44.410

指向 void 的指针不需要取消引用，事实上，取消引用 void 指针是非法的。您显然可以将任何指针转换为 void 指针，并将 void 指针转换为任何其他指针类型。

这就是为什么：

`void *b = "hello world";`工作，所以做了`char *a = b`，然后打印`a`出来。这里发生的是：

```
char *a; // declares a as a pointer to char
void *b; // declares b as a void pointer(which can hold an address)
b = "Hello"; // 'b' now holds the address, that points to the start of "Hello"
a = b; // now, 'a' contains the address that 'b' does
printf("%s", a); // prints the string, starting from the address pointed by 'a'. 
```

因此这是完全合法的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:31:38.387

`b = "Hello";` 这一行分配了一堆 char 内存并将其地址分配给`void`指针变量`b`。

void 指针可以存储任何其他数据类型的地址。void 指针的唯一限制是：

*   由于显而易见的原因，无法取消引用 void 指针
*   `sizeof(void)`是非法的
*   您不能对 void 指针执行指针运算

但是 GCC 假定它`sizeof(void)`是 1 并允许对 void 指针进行指针算术。

`a=b;`这是典型的 char 指针`a`，初始化为包含在 void 指针中的地址`b`。这是合法的，但如果滥用可能会产生影响。

`printf("%s", a);`这是一个简单的 printf 语句。

这段代码中的一切都很好。

是的，您需要使用`*`指针为分配的内存分配一个值：例如：

```
 char *c=malloc(sizeof(char));
   *c='a'; 
```

或者

```
 char a='a';
   char *c=&a;
   *c='b'; 
```

此外，在使用双指针时，您将使用`*`来初始化另一个指针。

```
 char *a=NULL;
   mymalloc(&a);

   void mymalloc(char **a)
   {
     *a=malloc(10);
     return;
   } 
```

希望这可以帮助。

# batch-file - 让netbeans使用虚拟盒子来宾安装phpunit

> ID：14504910
> 
> 赞同：3
> 
> 时间：2013-01-24T15:29:34.927
> 
> 标签：batch-file, netbeans, cmd, phpunit, virtualbox

我们使用 netbean 的 phpunit / 单元测试插件进行所有测试。我们曾经在 xampp 安装中的 .bat 文件中使用 xampp 并指向 netbeans。我们最近开始使用 vagrant，现在正在虚拟盒子中运行我们的开发环境。我想让netbeans在虚拟机中使用phpunit的安装。这将使我们不必同时安装两者。这甚至可能吗？Netbeans 似乎想要一个文件位置，我不知道如何才能做到这一点。

[编辑] 我创建了一个自定义批处理文件，它使用 vbox guestconrols 将命令转发到 phpunit 的 VM 安装。然后，我将 netbeans 指向我的自定义 .bat 文件。我的问题是，现在，guestcontrols 似乎没有转发--bootstrap。它似乎试图接受并使用它，而不是转发它。文档说所有额外的参数都将被传递，但情况似乎并非如此。这是我在 my_phpunit.bat 中使用的内容：

[my_phpunit.bat]

```
@echo off

if "%VBoxManage%" == "" set VBoxManage=C:\Program Files\Oracle\VirtualBox\VBoxManage.exe

"%VBoxManage%" "--nologo" "guestcontrol" "<my_vm_name>" "execute" "--image" "/usr/bin/php5" "/usr/bin/phpunit" "--verbose" "--username" "<user>" "--password" "<pass>" "--wait-stdout" "--wait-stderr" "CustomNetbeansTestSuite" "<path/to/test/suite>" "--bootstrap" "<path/to/bootstrap>" %7 
```

我快到了，因为最后运行没有引导选项的 bat 文件会将我带到单元测试。由于一些自动加载程序问题（无引导程序），我遇到了异常，但如果我能找到一种更好的方法将这些命令行参数转发到

[编辑 2] 我想我终于解决了这个问题，但我需要按顺序解决我的来宾操作系统的一些问题。一旦我能够对其进行更多测试，我将发布最终解决方案。在我实际发送应该转发的参数之前，我通过添加“--”解决了 Vbox 访客控制问题。它在文档中说要这样做，但起初我并不完全清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-28T20:33:27.060

我只是想更新一下，我从来没有真正让 .bat 文件工作。我想我已经很接近了，但是我被一些我无法抑制的 linux CLI 输出挂断了。我最终得到的 .bat 文件是：

```
# .bat example
https://pastebin.com/BX1xnL3q 
```

我最终搬到了 PhpStorm，一切都开箱即用。因此，如果您仍在使用 netbeans，您可以尝试一下。也许有更多 unix / linux 经验的人可以解决我遇到的问题。我觉得我 99% 都支持它。

# php - 使用 PHP 的 DateTime 类验证有效日期

> ID：14504913
> 
> 赞同：24
> 
> 时间：2013-01-24T15:29:50.343
> 
> 标签：php, datetime

以下是我之前验证日期的方式。我也有自己的函数来转换日期格式，但是，现在使用 PHP 的 DateTime 类，因此不再需要它们。我应该如何最好地使用 DataTime 验证有效日期？还请让我知道您是否认为我应该首先使用 DataTime。谢谢

PS。我使用的是面向对象的风格，而不是程序风格。

```
static public function verifyDate($date)
{
  //Given m/d/Y and returns date if valid, else NULL.
  $d=explode('/',$date);
  return ((isset($d[0])&&isset($d[1])&&isset($d[2]))?(checkdate($d[0],$d[1],$d[2])?$date:NULL):NULL);
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-24T15:37:15.277

你可以试试这个：

```
static public function verifyDate($date)
{
    return (DateTime::createFromFormat('m/d/Y', $date) !== false);
} 
```

这输出真/假。您可以直接返回`DateTime`对象：

```
static public function verifyDate($date)
{
    return DateTime::createFromFormat('m/d/Y', $date);
} 
```

然后你会`DateTime`在失败时返回一个对象或错误。

更新：

感谢 Elvis Ciotti，他表明 createFromFormat 接受无效日期，例如 2014 年 4 月 45 日。更多信息：[https ://stackoverflow.com/a/10120725/1948627](https://stackoverflow.com/a/10120725/1948627)

我用严格的检查选项扩展了该方法：

```
static public function verifyDate($date, $strict = true)
{
    $dateTime = DateTime::createFromFormat('m/d/Y', $date);
    if ($strict) {
        $errors = DateTime::getLastErrors();
        if (!empty($errors['warning_count'])) {
            return false;
        }
    }
    return $dateTime !== false;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-11-07T06:50:23.417

使用 DateTime，您可以为所有格式制作最短的日期和时间验证器。

```
function validateDate($date, $format = 'Y-m-d H:i:s')
{
    $d = DateTime::createFromFormat($format, $date);
    return $d && $d->format($format) == $date;
}

var_dump(validateDate('2012-02-28 12:12:12')); # true
var_dump(validateDate('2012-02-30 12:12:12')); # false 
```

^(*[函数是从这个答案](https://stackoverflow.com/a/12323025/67332)或[php.net](http://www.php.net/manual/en/function.checkdate.php#113205)复制的*)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-24T15:44:01.590

你可以检查这个资源： http: [//php.net/manual/en/datetime.getlasterrors.php](http://php.net/manual/en/datetime.getlasterrors.php)

PHP 代码指出：

```
try {
    $date = new DateTime('asdfasdf');
} catch (Exception $e) {
    print_r(DateTime::getLastErrors());
    // or
    echo $e->getMessage();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-04T14:32:15.510

试试这个：

```
 function is_valid_date($date,$format='dmY')
  {
    $f = DateTime::createFromFormat($format, $date);
    $valid = DateTime::getLastErrors();         
    return ($valid['warning_count']==0 and $valid['error_count']==0);
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-10T16:43:13.187

使用以下空字符串，例如 '' 或 0 或 '0000-00-00 00:00:00' 为 false

```
$valid = strtotime($date) > 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-30T09:30:49.227

```
$date[] = '20/11/2569';     
$date[] = 'lksdjflskdj'; 
$date[] = '11/21/1973 10:20:30';
$date[] = '21/11/1973 10:20:30';
$date[] = " ' or uid like '%admin%"; 
foreach($date as $dt)echo date('Y-m-d H:i:s', strtotime($dt))."\n"; 
```

输出

```
1970-01-01 05:30:00
1970-01-01 05:30:00
1970-01-01 05:30:00
1973-11-21 10:20:30
1970-01-01 05:30:00
1970-01-01 05:30:00 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-13T03:38:51.873

我需要允许用户以 (n) 种不同的、已知的格式输入……包括微时间。这是一个3的例子。

```
function validateDate($date)
{
    $formats = ['Y-m-d','Y-m-d H:i:s','Y-m-d H:i:s.u'];
    foreach($formats as $format) {
        $d = DateTime::createFromFormat($format, $date);
        if ($d && $d->format($format) == $date) return true;
    }
    return false;
} 
```

# r - 如何使用循环创建字符串向量？

> ID：14504914
> 
> 赞同：3
> 
> 时间：2013-01-24T15:29:51.853
> 
> 标签：r, for-loop, character, cat

我正在尝试使用循环在 R 中创建字符串向量，但是遇到了一些麻烦。任何人都可以提供任何帮助，我将不胜感激。

我正在使用的代码更详细一些，但我尝试在此处编写一个可重现的示例，该示例捕获所有关键位：

```
vector1<-c(1,2,3,4,5,6,7,8,9,10)
vector2<-c(1,2,3,4,5,6,7,8,9,10)
thing<-character(10)

for(i in 1:10) {
  line1<-vector1[i]
  line2<-vector2[i]
  thing[i]<-cat(line1,line2,sep="\n") 
} 
```

R 然后打印出以下内容：

```
1
1

Error in thing[i] <- cat(line1, line2, sep = "\n") : 
  replacement has length zero 
```

我想要实现的是一个字符向量，其中每个字符分成两行，`thing[1]`例如

```
1
1 
```

并且`thing[2]`是

```
2
2 
```

等等。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:35:11.900

`cat`打印到屏幕上，但它返回`NULL`- 要连接到新的字符向量，您需要使用`paste`：

```
 thing[i]<-paste(line1,line2,sep="\n") 
```

例如在交互式终端中：

```
> line1 = "hello"
> line2 = "world"
> paste(line1,line2,sep="\n") 
[1] "hello\nworld"
> ret <- cat(line1,line2,sep="\n") 
hello
world
> ret
NULL 
```

尽管请注意，在您的情况下，整个 for 循环可以替换为更简洁有效的行：

```
thing <- paste(vector1, vector2, sep="\n")
#  [1] "1\n1"   "2\n2"   "3\n3"   "4\n4"   "5\n5"   "6\n6"   "7\n7"   "8\n8"  
#  [9] "9\n9"   "10\n10" 
```

# javascript - HTML 文件释放器在 IE7+ 中不起作用

> ID：14504915
> 
> 赞同：0
> 
> 时间：2013-01-24T15:29:53.923
> 
> 标签：javascript, jquery, html

我已经使用[这段代码](http://damien.antipa.at/wp-content/uploads/2012/02/jquery.filedrop.js)创建了一个文件释放器。

但它在 IE7+ 中不起作用......像往常一样......

我得到错误

> SCRIPT5007：无法设置属性“值”的值：对象为空或未定义

代码就行

> 文件 = e.originalEvent.target.files || e.originalEvent.dataTransfer.files；
> 
> for(i = 0; i < files.length; i += 1){

我怎样才能得到这个工作？

我知道我可以检查文件是否未定义，但是什么也没有发生。我希望文件被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:41:06.443

[直到版本 10 才在 Internet Explorer 中出现对](http://caniuse.com/#search=drag)拖放 API 的完全支持。

您将需要使用功能检测在早期版本中提供合理的回退。

# php - LAMP 与编译后的二进制文件

> ID：14504926
> 
> 赞同：3
> 
> 时间：2013-01-24T15:30:26.537
> 
> 标签：php, api, rest, architecture, realbasic

我真的很感激一些简明的建议。

我即将开始一个项目，我们将在其中维护大量财产数据。

我们打算使用 RESTful 接口构建应用程序，以便各种客户端可以连接。即网络应用程序、iphone 应用程序、第 3 方 api 等。

我们真的希望应用程序/api 快速、响应迅速、可靠。

然而，实际上我们只有一定数量的内部技能，并希望确保我们的思维过程朝着正确的方向前进。

我们的核心知识是 PHP，所以我们最初的想法是一个带有 Memcached 的 LAMP 堆栈（可能用 Postgres 代替 mysql）。我们也可能会使用 Laravel 框架。

但是，我们正在考虑用 RealBasic 编写软件（类似于 VB，但正确的 OOP）并创建字节码。这也将包括 http 服务器 - 与 apache 相比，这一切都简单。

后者是不是矫枉过正？从长远来看，我们是否会变得更加困难，因为我们自己的 http 服务器在速度上可能永远无法与 apache 相提并论。

我真的很感激一些想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:54:45.477

您想要使用 REALbasic HTTP 服务器的唯一方法是作为位于 Apache 后面的应用程序服务器——在一些以*任何*语言编写的、面向公众的 HTTP 服务器上运行一个面向公众的网站是非常愚蠢的——所以你无论如何，都会有 Apache（或 Nginx）。

REALbasic 可以很好地胜任该角色。它编译为机器语言，而不是字节码，并且您的 HTTP 服务器将构建在其异步单线程服务器套接字框架上，因此性能通常非常出色。

也就是说，我怀疑它是否会比由缓存（Memcached 等）支持的 PHP 性能更好，而且 PHP 是一种比 REALbasic 更成熟的 Web 开发技术，没有任何障碍或限制如果您尝试基于 REALbasic 的解决方案，可能会遇到。

在这种情况下，我会说 PHP 对您来说是更安全、更好的选择。

（警告：我写这个答案是在写一个基于 REALbasic HTTP 服务器的网络应用程序时休息的，开发它只是纯粹的乐趣——REALbasic 是一门可爱的语言。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:23:31.437

使用 Real Studio 创建 Web 服务器并没有那么疯狂，因为您有很多方法可以实现它，而且您不需要 Apache 或 IIS 来完成它。您可以创建一个控制台应用程序，其唯一目的是为您的应用程序提供 API，或者您可以创建一个也可以提供网页服务的 Web 版应用程序。这真的取决于你想用 web 端完成什么。我们已经为许多客户做了这两件事，而且对他们来说效果很好。

但是，既然你已经熟悉 PHP，我会说坚持你所知道的。学习 Real Studio 并不难，但它仍然是一门新技能，为您（还）不知道的事情提供了所有必要的障碍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T15:46:05.430

如果那是您内部拥有的技能，我会坚持使用 PHP。

如果确实需要这种性能，总是可以选择使用 HipHop 编译 PHP 代码。

编写自己的 Web 服务器听起来像是一个疯狂的想法——如果您的系统上有任何单个软件，最好是拥有经过良好测试和安全的东西，那就是 Web 服务器。编写自己的代码不太可能像 Apache 或 nginx 这样的东西执行得一样好，即使你写得尽可能轻量级，而且几乎肯定会有重大的安全漏洞。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T15:42:15.717

您有充分的理由编写自己的网络服务器吗？如果您不需要 Apache 的所有花里胡哨，也许您可​​以选择更小的东西，例如 nginx。此外，如果您想使用 Linux，我会说 Basic（或任何方言）并不是最好的主意。如果您需要字节码，Java 可能是更好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T21:05:59.260

这当然不是你内部技能的一部分，但对于快速、轻量级的 RESTful API，我强烈推荐[Erlang](http://www.learnyousomeerlang.com)和[Cowboy](https://github.com/extend/cowboy)

Erlang 是电信公司用来运行电话硬件的功能语言。它具有高度的容错性，并且在我看来，非常具有表现力。它针对并发执行进行了优化，因此您可以获得多线程的所有好处而不会感到头疼。

Cowboy 是为 erlang 编写的网络服务器。它非常轻量级、高效且易于编码。我使用牛仔为每个数据中心提供大约 25,000 RPS（每台机​​器约 1200 RPS），它从未让我失望。

如果你不打算使用 erlang，你最好使用 apache 或 nginx。如果您没有为它编写自己的 HTTP 服务器（只是处理程序），我只会使用 RealBasic。

# java - 使用外键在表中输入数据时出现 JDBC 异常

> ID：14504929
> 
> 赞同：2
> 
> 时间：2013-01-24T15:30:33.677
> 
> 标签：java, mysql, jdbc

当我用我的 java 程序（简单字典）输入数据时，它会抛出一个错误：

> MySQLIntegrityConstraintViolationException：无法添加或更新子行：外键约束失败（`singlehaw`。`card`，CONSTRAINT `card_ibfk_1`FOREIGN KEY（`wordId`）REFERENCES `word` （`wordId`））

但是当我在命令提示符下通过查询输入数据时，我没有遇到任何问题。

在这里我发布我的方法：

```
public boolean insert(Card card) {
    Connection connection = MySqlUtils.getInstance().getConnection();
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    int cardId = -1;
    try {
        String INSERT_INTO_TABLE_CARD_QUERY = "INSERT INTO "
                + TBL_CARD + " ("
                + STATUS + ", "
                + RATING + ", "
                + INSERT_TIME + ", "
                + DIC_ID + ", "
                + WORD_ID
                + ") VALUES (?,?,NOW(),?,?)";
        statement = connection.prepareStatement(INSERT_INTO_TABLE_WORDS_QUERY, Statement.RETURN_GENERATED_KEYS);
        statement.setString(1, card.getStatus().name());
        statement.setInt(2, card.getRating());
        statement.setInt(3, card.getDictionaryId());
        statement.setInt(4, card.getWordId());
        statement.execute();

        // get last inserted id
        resultSet = statement.getGeneratedKeys();
        if (resultSet.next())
            cardId = resultSet.getInt(1);
    } catch (SQLException e) {
        e.printStackTrace();
        return false;
    } finally {
        try {
            if (connection != null)
                connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    card.setCardId(cardId);
    return true;
} 
```

以及创建表的脚本：

```
CREATE TABLE dictionary (
dictionaryId SERIAL,
dictionary VARCHAR(128) NOT NULL,
PRIMARY KEY (dictionaryId)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE word (
wordId SERIAL,
word VARCHAR(255) NOT NULL UNIQUE, 
transcription VARCHAR(255),
PRIMARY KEY (wordId)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE card (
cardId SERIAL,
status ENUM ('EDIT', 'POSTPONED', 'TO_LEARN', 'LEARNT') NOT NULL DEFAULT 'TO_LEARN',
rating TINYINT DEFAULT '0' NOT NULL,
insert_time TIMESTAMP DEFAULT NOW(),
update_time TIMESTAMP,
dictionaryId BIGINT UNSIGNED NOT NULL,
wordId BIGINT UNSIGNED NOT NULL,
PRIMARY KEY (cardId),
FOREIGN KEY (wordId) REFERENCES word (wordId),
FOREIGN KEY (dictionaryId) REFERENCES dictionary (dictionaryId) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:47:10.347

Thnx伙计们很多。从这个话题中了解了很多东西。现在问题已经解决了。问题是由于通过 JUnit 测试填充表，并且由于 Maven 我的测试顺序错误，因此很难识别真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:09:49.147

~~也许，表上的 wordID 字段具有不同的数据类型这一事实正在影响您的程序。~~SERIAL 是 Bigint 的别名。想法被抛弃。

在日志中打印正在执行的实际语句。也许有些东西没有被包括在内。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T15:42:07.100

您可以关闭约束、执行查询并打开约束。

```
SET FOREIGN_KEY_CHECKS=0;
... here is your sql ...
SET FOREIGN_KEY_CHECKS=1; 
```

# php - 通过预订ID？

> ID：14504931
> 
> 赞同：-2
> 
> 时间：2013-01-24T15:30:35.987
> 
> 标签：php, javascript, mysql

我使用 php & mysql 设计课程预订

我需要将注册中选择课程的特定（id）从 course.php 传递到registration.php

```
<a href="registrate.php">

<input type="button" class="reserve" id="<?= $row['id'] ?>" name="Registrate" value="Registrate Now"  style="border-radius:30; width:130; height: 25; color: green; font-weight:bolder; font-size: 13"/>

</a>

<?$identified =$this-> $row['id']?>
<? echo $identified; ?> 
```

问题是将所有 id 变量传递给注册

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:44:10.093

您可以使用表单实现“隐藏”传递该值

```
<form action="registrate.php" method="post">
<input type="hidden" name="id" value="<?= $row['id'] ?>">
<input type="button" class="reserve" name="Registrate" value="Registrate Now"  style="border-radius:30; width:130; height: 25; color: green; font-weight:bolder; font-size: 13"/>
</form> 
```

然后在您的 registrate.php 脚本上

```
<? $identified = $_POST['id']?>
<? echo $identified; ?> 
```

另一种方法是通过 $_GET

```
<a href="registrate.php?id=<?= $row['id'] ?>">Registrate</a> 
```

然后在您的 registrate.php 脚本上

```
<? $identified = $_GET['id']?>
<? echo $identified; ?> 
```

如果您是 PHP 新手，我会推荐您一本书，例如[用于动态网站的 PHP 和 MySQL：Visual QuickPro 指南](https://rads.stackoverflow.com/amzn/click/com/0321784073)，非常适合初学者

萨卢多斯

# asp.net - 关闭模态对话框窗口后 ASP.NET 刷新父页面

> ID：14504934
> 
> 赞同：0
> 
> 时间：2013-01-24T15:30:46.157
> 
> 标签：asp.net, vb.net

我有一个启动模式对话框窗口的 ASP.NET 页面：

```
Dim sURL As String = System.Configuration.ConfigurationManager.AppSettings("PAYORS_Path") & "PayorCopy.aspx"
    lnkCopy.Attributes.Add("onclick", "javascript:window.showModalDialog('" & sURL & "',null,'status:no;dialogWidth:375px;dialogHeight:550px;dialogHide:true;help:no;scroll:yes;center:yes');return false;") 
```

用户可以在此模式窗口中创建新项目。当用户单击关闭按钮时，模式对话框窗口成功关闭，但创建的新项目不会出现在父页面上。当模式窗口关闭时，我希望父页面刷新以显示用户创建的新项目。目前：

```
Private Sub btnClose_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles btnClose.Click
    Dim strjscript As String = "<script language='javascript'>self.close();</script>"
    LtClose.Text = strjscript
End Sub 
```

我试过添加到这个脚本：

```
window.opener.location.reload(true); 
```

但是，当我测试时，我收到一条错误消息：“无法获取属性‘位置’的值：对象为空或未定义。”

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:42:35.720

那是因为没有“开启者”:) 位置是窗口对象的方法，因此在大多数情况下，您甚至可以将其视为全局。其中任何一个都应该工作：

```
window.location.reload(true); 
```

或者：

```
location.reload(true); 
```

**编辑**是的，我刚刚注意到你把那个脚本放在哪里了..如果它在模态框内的点击句柄中..那么“窗口”真的有一个不同的——毕竟它是模态的！尝试在代码打开模态窗口之后**直接**添加它- 脚本执行将被阻止，直到模态返回，所以你可以这样：

```
var shouldReloadPage = window.showModalDialog('" & sURL & "',null,'status:no;dialogWidth:375px;dialogHeight:550px;dialogHide:true;help:no;scroll:yes;center:yes');
if(shouldReloadPage){
window.location.reload(true);
}
return false; 
```

这仍然在单击处理程序 ofc 中，只是显示在代码块中以便于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:23:45.423

不要使用旧的模态对话框窗口，而是尝试使用[jQuery Dialog](http://jqueryui.com/dialog/)，因为它的行为就像一个模态但让你在同一个窗口中。因此，它很容易用以下代码刷新：

```
location.reload(true); 
```

有关更多信息，请在此处查看[此](https://stackoverflow.com/questions/1974499/refresh-parent-page-from-jquery-dialog)问题。

希望能帮助到你。

# javascript - 确定我自己的fancybox订单

> ID：14504944
> 
> 赞同：-1
> 
> 时间：2013-01-24T15:31:06.210
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我正在一个图像需要花式框的网站上工作。然而，这些图像在 HTML 中没有按时间顺序排列，因为它们是我使用 booklet.js 实现的小册子的一部分。所以我的问题是，我可以确定fancybox 以什么顺序打开我的图像吗？

我已经尝试让它工作了一段时间，并为演示目的做了一个小提琴。

[http://jsfiddle.net/XF8WW/7/](http://jsfiddle.net/XF8WW/7/)

在我的小提琴中，我确定点击了什么图像以及下一个/上一个图像可以是什么。接下来，我检查 fancybox 是否在第一次尝试时打开了正确的图像。如果失败，我会尝试关闭 fancybox 并自己打开它以获得正确的图像。

我的解决方案中唯一的问题可以在我编写的最后一个函数（clickPage）中找到。在 clickPage 我尝试关闭 fancybox 并重新打开它以获得正确的图像。不幸的是，fancybox 要么没有完全关闭，要么没有为该图像重新打开。

```
function clickPage($pageNr) {
  $.fancybox.close();
  //$('.fancybox-overlay.fancybox-overlay-fixed').click();
  $pageNrMinOne = $pageNr - 1;
  $pageNrMinOne = $pageNrMinOne.toString();
  $pageNr = $pageNr.toString();
  console.log($pageNr);
  console.log($pageNrMinOne);
  $(".page" + $pageNr).eq($pageNrMinOne).trigger('click');
  //$('.page' + $pageNr).click();
} 
```

我知道代码有效，因为当我在控制台中输入它时它就有效。

谢谢你的时间祝你有美好的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:55:52.550

好吧，我设法修复它。而不是为我的小册子使用这个脚本：http: [//www.netzgesta.de/booklet/](http://www.netzgesta.de/booklet/) 重新排列了我使用这个脚本的 HTML：http: [//builtbywill.com/code/booklet/](http://builtbywill.com/code/booklet/)

后者不会重新排列 HTML，并且在我看来是迄今为止最好的小册子脚本。

谢谢各位的回应！

祝你今天过得愉快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:47:27.133

我建议单独处理您的数据需求（而不是使用 img src），将其作为第一个参数传递给 fb sig：

```
 var images = [
        {
           'href' : 'http://dromenopmaat.be/dromen_op_maat/images/nl/1_big.jpg',
           'title' : 'some title'  //optional
        },
        {
           'href' : ' http://dromenopmaat.be/dromen_op_maat/images/nl/2_big.jpg ',
           'title' : 'some title'
        },
            //etc
    ]

    $.fancybox.open( 
        images,
        {
            index       : 0,
            nextEffect  : 'none', 
            prevEffect  : 'none',
            margin      : 100,
            padding     : 10,
            type        : 'image',
            wrapCSS     : 'fancy-gallery-wrapper',
            helpers     : {
                overlay : {
                    speedIn  : 0,
                    speedOut : 300,
                    opacity  : 0.7
                },
                title   : {
                    type    : 'inside'

                }
            }
    }); 
```

**(fancybox v2.0)**

最终，你会让你的项目过于复杂，不必要。按照您希望的顺序构建一个 json 对象，然后向 fb 发送您可能需要的任何额外参数（我只是从一个项目中提取了这个，所以根据您的需要进行定制）。

希望有帮助-

# heap-memory - 通过过度使用 Java ScriptEngine (Jyhton) 来增加堆

> ID：14504945
> 
> 赞同：0
> 
> 时间：2013-01-24T15:31:10.883
> 
> 标签：heap-memory, jython

我们有一个 JavaEE 应用程序，它使用 jython 来执行一些 python 脚本。渐渐地，使用的堆空间变得越来越大，直到没有更多的堆空间。在堆转储中，我可以确定有很多 Py* 类。

所以我写了一个小测试程序：TestApp

```
public class TestApp {
    private final ScriptEngineManager scriptEngineManager = new ScriptEngineManager();
    private HashMap<String, ScriptEngine> scriptEngines = new HashMap<String, ScriptEngine>();
    private final String scriptContainerPath = "";

    public static void main(String[] args) throws InterruptedException {
        int counter = 1;
        while(true) {
            System.out.println("iteration: " + counter);
            TestApp testApp = new TestApp();
            testApp.execute();
            counter++;
            Thread.sleep(100);
        }
    }

    void execute() {
        File scriptContainer = new File(scriptContainerPath);
        File[] scripts = scriptContainer.listFiles();
        if (scripts != null && scripts.length > 0) {
            Arrays.sort(scripts, new Comparator<File>() {
                @Override
                public int compare(File file1, File file2) {
                    return file1.getName().compareTo(file2.getName());
                }
            });

            for (File script : scripts) {

                String engineName = ScriptExecutor.getEngineNameByExtension(script.getName());
                if(!scriptEngines.containsKey(engineName)) {
                    scriptEngines.put(engineName, scriptEngineManager.getEngineByName(engineName));
                }
                ScriptEngine scriptEngine = scriptEngines.get(engineName);

                try {
                    ScriptExecutor scriptExecutor = new ScriptExecutor(scriptEngine, script, null);
                    Boolean disqualify = scriptExecutor.getBooleanScriptValue("disqualify");
                    String reason = scriptExecutor.getStringScriptValue("reason");
                    System.out.println("disqualify: " + disqualify);
                    System.out.println("reason: " + reason);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            // cleanup
            for(Map.Entry<String, ScriptEngine> entry : scriptEngines.entrySet()) {
                ScriptEngine engine = entry.getValue();             
                engine.getContext().setErrorWriter(null);
                engine.getContext().setReader(null);
                engine.getContext().setWriter(null);
            }
        }
    }
} 
```

脚本执行器

```
public class ScriptExecutor {
    private final static String pythonExtension = "py";
    private final static String pythonEngine = "python";
    private final ScriptEngine scriptEngine;

    public ScriptExecutor(ScriptEngine se, File file, Map<String, Object> keyValues) throws FileNotFoundException, ScriptException {
        scriptEngine = se;
        if (keyValues != null) {
            for (Map.Entry<String, Object> entry : keyValues.entrySet()) {
                scriptEngine.put(entry.getKey(), entry.getValue());
            }
        }
        // execute script
        Reader reader = null;
        try {
            reader = new FileReader(file);
            scriptEngine.eval(reader);
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    // nothing to do
                }
            }
        }
    }

    public Boolean getBooleanScriptValue(String key) {
        // convert Object to Boolean
    }

    public String getStringScriptValue(String key) {
        // convert Object to String
    }

    public static String getEngineNameByExtension(String fileName) {
        String extension = fileName.substring(fileName.lastIndexOf(".") + 1);

        if (pythonExtension.equalsIgnoreCase(extension)) {
            System.out.println("Found engine " + pythonEngine + " for extension " + extension + ".");
            return pythonEngine;
        }
        throw new RuntimeException("No suitable engine found for extension " + extension);
    }
} 
```

在指定的目录中有 14 个 python 脚本，它们都看起来像这样：

```
disqualify = True
reason = "reason" 
```

我使用以下 VM 参数启动该程序：-Xrs -Xms16M -Xmx16M -XX:MaxPermSize=32M -XX:NewRatio=3 -Dsun.rmi.dgc.client.gcInterval=300000 -Dsun.rmi.dgc.server。 gcInterval=300000 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -server

这些是我们的 AppServer 运行时使用的参数。在我的测试用例中，只有 Xms、Xmx 和 MaxPermSize 更小。

当我运行这个应用程序时，我可以看到 CMS Old Gen 池增加到其最大大小。之后，Par Eden Space 池会增加。此外，ParNewGC 在任何时候都不再运行。清理部分改善了情况，但没有解决问题。有人知道为什么我的堆没有完全清理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:57:59.870

我想我已经找到了解决问题的方法：我删除了 JSR223 的东西，现在直接使用 PythonInterpreter。

# d - 遗弃和GFW3

> ID：14504951
> 
> 赞同：1
> 
> 时间：2013-01-24T15:31:23.447
> 
> 标签：d, glfw, derelict3

我试图让 Derelict3 在 Ubuntu 12.10 上与 GLFW3 一起工作。

我已经使用 DMD 2.061 成功构建了 Derelict3 和 glfw3。导入和链接工作。

但是自从我（不区分大小写）在两者中都找不到任何引用以来，似乎 API 发生了变化，因为我写[了这篇文章](http://www.dsource.org/forums/viewtopic.php?t=6231)`glfwOpenWindowHint`

*   遗弃3 ( `git://github.com/aldacron/Derelict3.git`) 也不
*   GLFW3 ( `git://github.com/elmindreda/glfw.git`)

而且我找不到任何其他关于使用 GLFW3 的教程。

有没有人有关于如何在 C 或 D 中使用 GLFW3 的最新教程？

更新：我猜 glfw3 中的示例目录是一个好的开始，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:19:54.490

探索废弃的资源 - [https://github.com/aldacron/Derelict3/blob/master/import/derelict/glfw3/functions.d#L135](https://github.com/aldacron/Derelict3/blob/master/import/derelict/glfw3/functions.d#L135) - 这是你的功能。

顺便说一句，我认为 glfw3 不够稳定，即使在 windows 上使用 glfw2，我也有一些未解决的外部问题（一个例子是 glfwGetGLVersion），所以我认为这更有可能是 glfw 问题。glfw2 官方站点支持 D 绑定（已过时）。

关于示例，是的，对于 D，从作者提供的示例开始总是一个不错的选择，D 仍在快速增长等等。在 dlang.org 论坛上开始提问也是一个不错的选择。最后一点，dsource 已经过时了，大部分开发活动都迁移到了 github。

希望这一切对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:51:21.713

[http://wiki.glfw.org/wiki/Moving_from_GLFW_2_to_3](http://wiki.glfw.org/wiki/Moving_from_GLFW_2_to_3)

这是我能找到的关于 API 更改的最佳指南。使用它来翻译其他代码/教程。

# mongodb - 如何在 MongoDB shell 中将对象的 _id 字段类型更改为 ObjectId？

> ID：14504953
> 
> 赞同：1
> 
> 时间：2013-01-24T15:31:30.370
> 
> 标签：mongodb, mongodb-shell

我在 MongoDB 数据库中有几个对象，其中`_id`字段被错误地分配了一个整数，我如何在 MongoDB shell 中用 ObjectId 替换这些整数？

此类对象的示例如下所示：

```
{ "_id" : 0 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:31:30.370

我发现的最佳解决方案是使用分配给 的 ObjectId 值将每个对象克隆到另一个对象`_id`，然后删除具有整数的所有对象`_id`。我在shell中做了以下事情：

```
// $type: 16 means int32
> db.Roles.find({_id: {$type: 16}}).forEach(function (x) {
          x._id = ObjectId();
          db.Roles.save(x);
      })
> db.Roles.remove({_id: {$type: 16}}) 
```

# powershell - PowerShell Here-String 保留换行符

> ID：14504960
> 
> 赞同：6
> 
> 时间：2013-01-24T15:31:50.197
> 
> 标签：powershell, string-formatting

PowerShell 代码：

```
$string = @'
Line 1

Line 3
'@
$string 
```

输出：

```
Line 1
Line 3 
```

但我希望它输出：

```
Line 1

Line 3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:38:23.967

在 ISE 中工作正常，并且也在`script`工作中。我不记得在哪里，但我读到这是控制台主机代码中的一个错误，并且当以交互方式输入 here-string 时，空行将被丢弃。目前我无法测试 Powershell V.3.0 控制台错误是否已修复。

问题链接：[http ://connect.microsoft.com/PowerShell/feedback/details/571644/a-here-string-cannot-contain-blank-line](http://connect.microsoft.com/PowerShell/feedback/details/571644/a-here-string-cannot-contain-blank-line)

解决方法：添加反引号`

```
$string = @"
Line 1
`
Line 3
"@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T14:44:33.760

另一种选择是使用： `"@+[environment]::NewLine+[environment]::NewLine+@"` 它可能看起来很难看，但可以根据需要工作。上面的例子是：

```
$string = @"
Line 1
"@+[environment]::NewLine+[environment]::NewLine+@"
Line 3
"@ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-14T19:58:03.537

这是另一种方式，特别是如果您不想更改此处字符串本身。这个快速的解决方案对我很有用，因为它恢复了存储在 Here-String / Verbatim-String 中的换行符 (CRLF) 的预期行为，***而无需更改 Here-string***本身。你可以做的是：

```
$here_str = $here_str -split ([char]13+[char]10) 
```

或者

```
$here_str = $here_str -split [Environment]::NewLine 
```

要进行测试，您可以进行行数：

```
($here_str).Count 
```

**这是您的示例：**

```
$string = @'
Line 1

Line 3
'@

#Line-Count *Before*:
$string.Count         #1

$string = $string -split [Environment]::NewLine

#Line-Count *After*:
$string.Count         #3

$string 
```

输出：

```
Line 1

Line 3 
```

高温高压

# google-bigquery - BigQuery：无法导出到 CSV

> ID：14504961
> 
> 赞同：0
> 
> 时间：2013-01-24T15:32:00.667
> 
> 标签：google-bigquery

我可以从我的谷歌存储中导入数据。但是，通过 Web 控制台将数据导出到 Google Cloud Storage CSV 文件时遇到了麻烦。数据集很小，我没有得到任何导致问题的具体原因。

```
Extract9:30am
gl-analytics:glcqa.Device togs://glccsv/device.csv
Errors:
Unexpected. Please try again.
Job ID: job_f8b50cc4b4144e14a22f3526a2b76b75
Start Time: 9:30am, 24 Jan 2013
End Time: 9:30am, 24 Jan 2013
Source Table: gl-analytics:glcqa.Device
Destination URI: gs://glccsv/device.csv 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:09:23.657

看起来您有一个嵌套模式，无法输出到 csv。尝试将输出格式设置为 JSON。

请注意，此错误现已在内部修复，因此在我们的下一个版本之后，发生这种情况时您会收到更好的错误。

# r - 整合数据

> ID：14504967
> 
> 赞同：0
> 
> 时间：2013-01-24T15:32:27.000
> 
> 标签：r, merge

我有一个如下的大数据框，它是更大数据框的子集。

```
tree=data.frame(INVYR=tree$INVYR,
            DIA=tree$DIA,PLOT=tree$PLOT,SPCD=tree$SPCD,
            D.2=tree$D.2, BA.T=tree$BA.T) 
```

我试图做的是计算每年每块地块的总 BAT.T（地块在随后的几年中重新测量）。我这样做是...

```
x<-aggregate(tree$BA.T,list(tree$INVYR,tree$PLOT),FUN=sum)

x$PLOT<-x$Group.2

x<- x[with(x, order(Group.1,Group.2)), ] 
```

这给了我数据框...

```
x=data.frame(Group.1,Group.2,x,PLOT) 
```

其中 Group.1 是 INVYR，Group.2 是地块，x 是每年每块地块的总 BA.T。到目前为止，这很好用。这是我的问题开始的地方。然后我想把它整合回我原来的树data.frame。如果我通过绘图合并数据，则由于进行了四次重新测量，它不考虑年份并将数据集四极。我无法运行 if 语句，因为数据集的长度不相等。我希望完成的 data.frame 是

```
tree=data.frame(INVYR, DIA, PLOT, SPCD, D.2, BA.T, x) 
```

其中 x 是该记录的给定 INVYR 和 PLOT 的总 BA.T。

任何想法将不胜感激。谢谢。

编辑

```
INVYR=rbind(1982,1982,1982,1982,1982,1995,1995,1995,1995,1995,2000,2000,2000,2000,2000)
PLOT=rbind(1,1,2,2,3,1,1,2,2,3,1,1,2,2,3)
BA.T=rbind(.1,.2,.3,.4,.2,.3,.5,.8,.3,.6,.7,.2,.1,1,1.02)
tree=data.frame(INVYR,PLOT,BA.T)
head(tree)
x<-aggregate(tree$BA.T,list(tree$INVYR,tree$PLOT),FUN=sum)
x$PLOT<-x$Group.2
x$INVYR<-x$Group.1
x<- x[with(x, order(Group.1,Group.2)), ]
head(x) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:31:53.553

解决方案是使用 package `reshape2`。

```
library(reshape2)
melt(data=tree,id.vars=c('INVYR','PLOT')) ## Notice the choice of the id!the keys!
 dcast(tree.m,formula=...~variable,fun.aggregate=sum)
  INVYR PLOT BA.T
1  1982    1 0.30
2  1982    2 0.70
3  1982    3 0.20
4  1995    1 0.80
5  1995    2 1.10
6  1995    3 0.60
7  2000    1 0.90
8  2000    2 1.10
9  2000    3 1.02 
```

# php - 基于数组值的速率数组

> ID：14504977
> 
> 赞同：1
> 
> 时间：2013-01-24T15:32:48.390
> 
> 标签：php, arrays, sorting

```
occurrence of A----5 times
occurrence of B----7 times
occurrence of C----6 times
($total['A']=5;
 $total['B']=7;
 $total['C']=6;) 
```

我需要根据它们的发生率对每个事件进行如下评分，

```
$rating['A']=3;
$rating['B']=1;//most occurrence will get rate 1.
$rating['C']=2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:40:21.257

```
asort(&$total);
$rating = 1;
foreach (array_reverse($total) as $key => $val)
    $total[$key] = $rating++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:15:47.567

您还可以尝试使用数组函数，例如首先对值进行排序并获取排序数组的键，然后使用提取的键作为值创建另一个数组。现在你得到了相同的数组和它们的排名，除了你的排名是“0”，因为数组从索引 0 开始。

可能你可以用 '0' 填充一个附加值，然后最终删除它。

像这样的东西，

```
$total['A']=5;
$total['B']=7;
$total['C']=6;

$total[0]=0;
asort($total);
$total = array_slice(array_flip(array_keys($total)),1); 
```

或者如果您不喜欢填充额外的值，您可以尝试这种方式。使用键和排序数组的计数创建一个数组。

```
asort($total);
$total = array_combine(array_keys($total),range(1, count($total))); 
```

这可能是一种快速简便的方法。希望这可以帮助。

# php - 与面向对象的 PHP 混淆

> ID：14504979
> 
> 赞同：0
> 
> 时间：2013-01-24T15:32:50.760
> 
> 标签：php, class, object

我的代码有问题。我在一个 php 页面中包含了两次相同的类，而当一个工作时另一个不起作用。我的代码可能比我解释得更好。

```
<?php
    if($_POST['submit']){
        if(!class_exists('Some_Class'){
            include('Class.php');
            $obj = new Some_Class;
            $obj->Do_something_2();
            }
            unset($obj);
        }
?>
<html>
    <head></head>
    <body>
        <form method="post" action="">
        <?php 
            if(!class_exists('Some_Class')){
            include('Class.php');
            $obj = new Some_Class;
            $obj->Do_something_1();
            }
            unset($obj);
        ?>
            <input type="text" name=""/>
            <input type="submit" name="submit"/>
        </form>
    </body>
</html> 
```

现在发生的实际问题是，我以编程方式在表单中添加了一些 html 表单元素。当我提交表单时，我对回发进行了一些检查，如果设置了回发，那么我再次包含相同的类，但在类中执行其他功能。所以当我第一次刷新页面时，第一个类包含在表单中可以正常工作，但是在提交表单时，然后包含在检查回发工作中的类，而不是表单中的类。希望我能够解决我的问题，请告诉我这种编写代码的方法是否存在任何问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:36:21.517

那是因为`class_exists('Some_Class'))`第二次是真的。你必须搬家

```
$obj = new Some_Class;
$obj->Do_something_1(); 
```

在那个条件之外。

更好的解决方案是`include_once`页面顶部的类。

一个更好的解决方案是自动加载它。

请注意，即使您使用的是类，这仍然是程序风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:36:29.230

如果该类存在，您将检查两次。

如果您将其更改为，第二个调用应该可以工作：

```
 <?php 
        if(!class_exists('Some_Class')){
          include('Class.php');
        }

        $obj = new Some_Class;
        $obj->Do_something_1();
        unset($obj);
    ?> 
```

（这样设置括号，第一次应该更好，也是）

您没有取消设置该类，只是该类的*一个*对象实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:36:58.483

我认为问题在于，第一次定义类时，它从那一刻起就保持定义，include_once 函数也可以帮助您确保只包含一次文档

所以你需要做的是在文档顶部声明一次然后使用它，例如：

```
<?php

if(!class_exists('Some_Class'){
    include_once('Class.php');

    }

if($_POST['submit']){            
        $obj = new Some_Class;
        $obj->Do_something_2();
        unset($obj);
    }
?>
<html>
    <head></head>
    <body>
        <form method="post" action="">
        <?php 
            $obj = new Some_Class;
            $obj->Do_something_1();
            unset($obj);
        ?>
            <input type="text" name=""/>
            <input type="submit" name="submit"/>
        </form>
    </body>
</html> 
```

作为您的一方，重要的是要注意，在您的原始代码中，您在条件之外取消设置 $obj 变量，这可能会导致警告，因为 $obj 对象有时可能不存在，因为它超出了范围

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T15:37:52.053

看起来您每次都在创建一个通用对象。用这个：

```
<?php
include_once('Class.php');
$obj = new Some_Class;

if($_POST['submit'])
{
    $obj->Do_something_2();
}
?>
<html>
    <head></head>
    <body>
        <form method="post" action="">
            <?php $obj->Do_something_1(); } ?>
            <input type="text" name=""/>
            <input type="submit" name="submit"/>
        </form>
    </body>
</html> 
```

# c++ - C ++中边界约束最小二乘优化的函数？

> ID：14504985
> 
> 赞同：1
> 
> 时间：2013-01-24T15:33:23.087
> 
> 标签：c++, least-squares, alglib, nlopt

我对使用 Visual C++ 2010 Express 相当陌生，但我对基础知识并不陌生，我正在尝试弄清楚如何使用外部库来执行边界约束最小二乘优化。

简单地说，我想使用线性最小二乘法从以下位置找到矩阵 W：

```
X * W = T 
```

在哪里

```
X is a matrix with 50 columns and 3 rows (50 x 3),

W is a column matrix with 50 elements (1 x 50) and

T is a column matrix with 3 element (1 x 50) 
```

约束在 W 的元素的值上——我们称元素为“w”。

```
0 <= w <= 1 
```

在 MATLAB 中执行此操作相当简单，但我需要在 C++ 中实现。我已经为矩阵 X 和 T 的公式实现了我的代码的初始部分。

我可以在 Visual C++ 2010 Express 中使用任何库/函数来完成边界约束最小二乘优化吗？我尝试过使用 ALGLIB、LEVMAR 和 NLOPT。

ALGLIB 需要以自己的数据类型定义数组。

LEVMAR 关于安装和我需要使用什么功能的信息很少。

NLOPT 似乎没有这个功能。此外，即使我使用[此处](http://ab-initio.mit.edu/wiki/index.php/NLopt_on_Windows)给出的说明生成了一个 lib 文件并在 VC++ 中链接了 lib 和源文件，我似乎也无法让它工作。

任何人都可以帮我提出任何建议吗？这在 MATLAB 中很容易实现，但恐怕我需要使用 C++。

# asp.net - Internet Explorer 中 ASP.Net 页面的不同视图

> ID：14504989
> 
> 赞同：0
> 
> 时间：2013-01-24T15:33:40.060
> 
> 标签：asp.net, css, internet-explorer

我创建了一个 asp.net 应用程序并将其成功发布到本地网络服务器上。问题是，应用程序的任何页面在 Internet Explorer 中看起来都不同。

我知道在不同的浏览器（如 Firefox，即 chrome）中，外观可能会有所不同......

有趣的是，它甚至在两台不同电脑上的 Internet Explorer 中看起来都不一样。

当我在笔记本电脑上打开它时，页面看起来“正常”（因为我在笔记本电脑上编写了 css，所以我知道它的正常外观），但是当我在连接到同一局域网的台式电脑上打开它时，它看起来很不一样（有些物体更宽或更高）。两个 IE 版本相同 (9.0.8112.16421)。

我真的不知道这是怎么回事。

乞求一些帮助，拜托！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:37:11.743

几种可能性

*   IE 处于兼容模式
*   IE放大了
*   屏幕分辨率不同
*   DPI设置不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:49:14.953

刚刚想通了。

问题是 IE9 中的 Quirks-Mode。我只是在 SiteMaster 的 head-Element 中添加了以下代码：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

由于 Quirks-Mode IE9 由于向后兼容性而伪装成 IE5.5。

这就是你需要做的所有事情。;-)

# python - 更新 Python 路径

> ID：14504990
> 
> 赞同：1
> 
> 时间：2013-01-24T15:33:41.877
> 
> 标签：python, path, symlink

Enthought 安装在我的第二个 HD 上的 /media/linux/applications/epd，它不是自动安装的。我跑了：

```
sudo mkdir /media/linux
sudo chown -R kevin: /media/linux 
```

并编辑 /etc/fstab 以将 /media/linux 指向 sdb2：

```
UUID="d18ded1f-3d74-420d-ab95-51c52f5169b4" /media/linux ext4 defaults,users,auto 0 2 
```

现在驱动器在启动时挂载，但“which python”指向不正确的 python (/usr/bin/python2.7)

我试过

```
sudo rm /usr/bin/python
sudo ln -s /media/linux/applications/epd/bin/python2.7 /usr/bin/python 
```

当我尝试启动时导致权限错误：

```
bash: /media/linux/applications/epd/bin/python: Permission denied 
```

“哪个蟒蛇”不返回任何东西。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:38:21.380

我建议您现在在 sdb2 安装到 /media/linux 之后重复 chown 命令。

# c - 反转字符串的程序

> ID：14504993
> 
> 赞同：-3
> 
> 时间：2013-01-24T15:34:01.843
> 
> 标签：c

我是 C 的初学者。我正在尝试这个程序来反转字符串。任何帮助有什么问题吗？

```
#include<stdio.h>
#include<string.h>

char *reverse(char *);

void main()
{
    char str[]="kundan";
    int len=strlen(str);
    char *ptr;
    ptr=reverse(str);
    printf("the reversed string is :%s",ptr);
}

char *reverse(str)
{
    char *rtr=str;
    char qtr[10];

    for(int i=len-1;i<=0;i--)
    {
        qtr=rtr+i;
        qtr++;
    }
    return qtr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:40:46.147

你不尊重 variable `scope`。关于这个的一个有用的参考，[在这里](http://icecube.wisc.edu/~dglo/c_class/scope.html)。

例如，在 中`reverse()`，您指的是`len`在`for`循环中。但是，`len`在 中定义`main`，因此不适用于`reverse()`。*（这甚至可以编译吗？）*

您从中返回的值`reverse()`是指向仅在该函数范围内的堆栈值的指针。虽然调用函数 ,`main()`最终会得到一个有效的指针，但指针所指的信息在`reverse()`返回时已经超出范围，因此是*volatile*，可能会发生变化。对于这个简单的示例，您可以按值而不是按引用返回反转的字符串。（发回字符数组，而不是指向它们的指针。）

# mysql - MySQL按分组计数

> ID：14504997
> 
> 赞同：1
> 
> 时间：2013-01-24T15:34:09.160
> 
> 标签：mysql

对不起一个不清楚的问题，我的英语不是那么好。所以有我的查询：

```
SELECT ticketID, 
status,
COUNT(status) as count,
statusName,
assign   
FROM ticket, department, status 
WHERE ticket.department = 100 
AND ticket.department = department.departID 
AND ticket.status = status.statusID
GROUP BY statusName,assign 
```

这是结果：

```
| ticketID   | count       | statusName | assign |
|:----------|-----------:|:---------:|:-------:
| 1002       |           2 |       open |   NULL |
| 1020       |           1 |       open |  James |
| 1021       |           1 |       open |   Nick |
| 1015       |           1 |    overdue |   NULL | 
```

我的目标是按状态计算票证，如果 status='open' 和 assign = null 则状态将更改为 'unassigned'，我需要一个更好的解决方案，或者只是一种合并结果的方法，其中 'James' 和 ' Nick' 成为其中之一，因为我只需要知道票是否已分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:50:50.763

看不到你需要部门表的地方，认为你可以安全地删除它，但是......

```
SELECT a.statusID, a.Status, Count(*) 
FROM(
   SELECT statusID,
   (CASE WHEN statusName = 'open' and assign IS NULL THEN 'unassigned' 
         WHEN statusName ='open' and assign IS NOT NULL THEN 'assigned'
         ELSE statusName
         END) as Status
   FROM ticket 
   INNER JOIN department ON ticket.department = department.departID 
   INNER JOIN status ON ticket.status = status.statusID
   WHERE ticket.department = 100) as a
GROUP BY a.Status, a.statusID 
```

[SqlFiddle](http://sqlfiddle.com/#!2/469d4/1)（简体）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:34:42.730

```
SELECT ticketID, 
status,
COUNT(status) as count,
statusName,
'unassigned'   
FROM ticket, department, status 
WHERE ticket.department = 100 
AND ticket.department = department.departID 
AND ticket.status = status.statusID
AND assign is NULL
GROUP BY statusName
UNION
SELECT ticketID, 
status,
COUNT(status) as count,
statusName,
'assigned'   
FROM ticket, department, status 
WHERE ticket.department = 100 
AND ticket.department = department.departID 
AND ticket.status = status.statusID
AND assign is NOT NULL
GROUP BY statusName 
```

此查询以两个不相交的结果集的并集形式获取未分配和已分配的票证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:37:15.843

```
SELECT ticketID,status,sum(CASE status 
    WHEN 'open' then 1
    WHEN '' then 1
    WHEN NULL then 1
    else 0) as count,statusName,assign   
        FROM ticket, department, status WHERE ticket.department = 100 
        AND ticket.department = department.departID 
        AND ticket.status = status.statusID
        GROUP BY statusName,assign 
```