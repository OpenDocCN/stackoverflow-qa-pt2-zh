# StackOverflow 问答 13205000-13205999

# amazon-web-services - 用于流式传输无尽的任务列表的机械土耳其人架构

> ID：13205005
> 
> 赞同：2
> 
> 时间：2012-11-03T01:01:51.940
> 
> 标签：amazon-web-services, mechanicalturk

我们应该如何构建一个使用 Amazon Mechanical Turk API 来处理任务流而不是单批批量任务的解决方案？

这里有更多信息：

我们的应用程序每天接收大约 1,000 张照片和视频流。每个图片或视频包含需要转录的 6-8 个数字（它是电子设备的序列号），以及转录的“确定性级别”（例如“Certain”、“Uncertain”、“Can't Read ”）。每个图像的转录时间不到 10 秒，每个视频的转录时间不到 20 秒，并且需要最少的技能或培训。

我们的应用程序将全天不断上传这些图像，我们希望在几分钟内将它们变成数字。理想的解决方案是我们每分钟上传一次新任务（高峰期每分钟不到 20 个）并每分钟下载一次结果。

两个问题：

*   为确保快速周转时间、准确性和成本效益之间的良好平衡，我们应该一次提交一项任务，还是最好批处理任务？如果是这样，在设置批量大小时我们应该考虑哪些变量？
*   是否存在包装 MTurk API 的库或托管服务，以便更轻松地处理像我们这样的 HIT 生成是流式和持续而不是一次性的用例？

为新手问题道歉，我们是 Mechanical Turk 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:53:55.073

### 一次将任务流式传输到土耳其人

[您可以使用CreateHIT](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_CreateHITOperation.html)操作通过 Mechanical turk 的 api 单独流式传输任务。每次在应用程序中收到图像时，都可以调用 CreateHIT 操作立即将任务发送给 Turk。

您还可以通过 api 设置通知，以便在任务完成后立即收到警报。[Turk 通知 API 文档](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_NotificationReceptorAPIArticle.html)

### 批处理与流式处理

至于批处理与流式传输，您最好使用流式传输以实现周转时间和成本的良好平衡。批处理不会过多地降低成本，提高准确性在很大程度上取决于手动或实施自动化流程来审查、审查和跟踪工人的表现。

### 图书馆和服务

大多数库都提供 api 中可用的所有操作，因此您只需 google 或在 Github 上搜索您的编程语言的库。（我们使用 Ruby 库[rturk](https://github.com/mdp/rturk)）

可以在 Quora 上对以下问题的回答的**Metaplatforms**部分找到提供托管解决方案的公司列表：[有哪些类似于 Amazon Mechanical Turk 的众包服务？](http://www.quora.com/What-are-some-crowdsourcing-services-similar-to-Amazon-Mechanical-Turk#__w2_TpkBLCx_link)（免责声明：我的公司[Houdini](http://houdiniapi.com)是其中列出的解决方案之一。）

# c++ - C在.h文件中声明一个arrayList

> ID：13205009
> 
> 赞同：-1
> 
> 时间：2012-11-03T01:03:03.873
> 
> 标签：c++, arraylist

嗨，我对 C++ 很陌生，我更习惯于 Java。但我想要做的只是创建一个空的arrayList，我的所有其他函数都可以使用它。

在我的 .h 文件中，我创建了一个新类，其中包含 2 个结构和大约 6 个方法。这些方法中的每一个都使用结构对象的arrayLists，但我不想将arrayLists 作为参数传递。当您在类中创建字段时，我正在尝试做的类似于在 Java 中。

问题是当我在我的.h文件中声明这样的arrayList时......

```
structObject * myArrayList = new structObject[0];
int ARRAY_SIZE = arrayList.size; 
```

我收到一堆错误，包括`new cannot be declared in a constant`.

我应该在哪里声明我的空数组列表？这在 C++ 中甚至是允许的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:13:46.960

您正在尝试将定义放在头文件中。那是不允许的。您只能将声明放在头文件中。

标题中的声明：

```
structObject* myArrayList;
#define ARRAY_SIZE 100 
```

源文件中的定义：

```
myArrayList = new structObject[ARRAY_SIZE]; 
```

但是，全局变量几乎总是一个坏主意。我会找到一种方法将数组作为参数传递给必要的函数。您还应该查看标准模板库并查看不同的容器。

一种选择：

```
std::vector<structObject> myArrayList; 
```

这可以放在头文件中，构造函数将进行必要的初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:08:32.077

C++ 中没有内置的 ArrayList 类。看看`std::vector`课堂。

# scala - Scala 中可变长度参数列表的类型是什么？

> ID：13205012
> 
> 赞同：22
> 
> 时间：2012-11-03T01:03:50.520
> 
> 标签：scala, variadic-functions

假设我声明一个函数如下：

```
def test(args: String*) = args mkString 
```

是什么类型的`args`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-03T10:50:48.073

这称为可变数量的参数或简称为可变参数。它的静态类型是`Seq[T]`where`T`代表`T*`。因为`Seq[T]`它是一个接口，所以不能用作实现，在这种情况下是[`scala.collection.mutable.WrappedArray[T]`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.WrappedArray). 要找出这些东西，使用 REPL 会很有用：

```
// static type
scala> def test(args: String*) = args
test: (args: String*)Seq[String]

// runtime type
scala> def test(args: String*) = args.getClass.getName
test: (args: String*)String

scala> test("")
res2: String = scala.collection.mutable.WrappedArray$ofRef 
```

Varargs 通常与`_*`符号结合使用，这是对编译器将 a 的元素`Seq[T]`而不是序列本身传递给函数的提示：

```
scala> def test[T](seq: T*) = seq
test: [T](seq: T*)Seq[T]

// result contains the sequence
scala> test(Seq(1,2,3))
res3: Seq[Seq[Int]] = WrappedArray(List(1, 2, 3))

// result contains elements of the sequence
scala> test(Seq(1,2,3): _*)
res4: Seq[Int] = List(1, 2, 3) 
```

# java - 客户端/服务器 java 应用程序中的 JVM_Bind 错误

> ID：13205017
> 
> 赞同：0
> 
> 时间：2012-11-03T01:05:55.560
> 
> 标签：java, sockets

我正在尝试构建一个java微博应用程序我已经完成了代码但由于以下错误无法连接到我自己的计算机（我谷歌它并且有人说我需要更改端口号。我更改了端口号并且没有任何反应）

```
Exception in thread "Thread-4" java.net.BindException: Address already in use: JVM_Bind 
```

下面是服务器的代码：

```
public class server extends Thread {
    public Socket client = null;
    public ServerSocket server = null;
    private int port = 4444; 

public void run(){  
    while (true){ //loop waits for incomming connection
        try { //start the server and listen to a port
                server = new ServerSocket(port);
            }catch (IOException e){
                System.err.println(e);
                System.exit(-1);
            }

            try { //establish a connection when receiving request
                client = server.accept();
            }catch (IOException e){
                System.err.println(e);
                System.exit(1);
            }

            Thread t = new Thread(new Connection(client));
            t.start();
        }
    }
} 
```

这是启动服务器并监听端口 4444 的代码

```
Server server = new Server();
server.start(); //to listen to a port 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:19:31.800

您必须在进入循环之前创建 ServerSocket。目前您正在尝试每次迭代都创建它，这没有意义，并且您没有关闭它，因此第二次创建失败。

# actionscript-3 - 在缓冲的 VideoDisplay 之前设置播放头

> ID：13205018
> 
> 赞同：0
> 
> 时间：2012-11-03T01:06:40.737
> 
> 标签：actionscript-3, apache-flex, buffer, videodisplay

作为如何处理此问题的示例，YouTube 将卸载视频并从用户在时间轴上单击的位置开始加载它。

目前我只有：

```
private function seekHandler(event:MouseEvent):void {
    player.playheadTime = event.localX/playheadBar.width*player.totalTime;
} 
```

如果目标位置已经被缓冲，这将非常有效。但是，如果我想提前寻找缓冲区，我希望它暂停视频，直到文件缓冲到所选点。相反，它会暂停片刻，然后表现得像“不，不会这样做”，然后从原来的位置继续播放。

请注意，我只是在学习 Flex/AS3，所以我很可能错过了一些明显的东西；）

# java - Android：使用 AES 256 位加密字符串 使用 iv 和密钥进行加密

> ID：13205019
> 
> 赞同：0
> 
> 时间：2012-11-03T01:07:06.010
> 
> 标签：java, android, encryption, aes

```
SecureRandom random = new SecureRandom(); // quite heavy, look into a lighter method.

String stringToEncrypt = "mypassword";
byte[] realiv = new byte[16];
random.nextBytes(realiv);
Cipher ecipher = Cipher.getInstance("AES");

SecureRandom random = new SecureRandom(); // quite heavy, look into a lighter method.

byte[] realiv = new byte[16];
random.nextBytes(realiv);       

byte[] secret = "somelongsecretkey".getBytes();
SecretKeySpec secretKey = new SecretKeySpec(secret, "AES");
ecipher.init(Cipher.ENCRYPT_MODE, secretKey, random);
byte[] encryptedData = ecipher.doFinal(); 
```

但`init()`只接受 3 个参数。我需要一种方法来做类似的事情：

```
ecipher.init(Cipher.ENCRYPT_MODE, stringToEncrypt, secretKey, random); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T12:26:17.343

通常，您不需要为具有确定性行为的算法生成随机数的东西。此外，当您使用 ECB 块模式时，您不需要 IV，这是 Java 的默认设置。准确地说，Java 默认为`"AES/ECB/PKCS5Padding"`for in `Cipher.getInstance("AES")`。

所以你应该可以接受这样的代码：

```
// lets use the actual key value instead of the platform specific character decoding
byte[] secret = Hex.decodeHex("25d6c7fe35b9979a161f2136cd13b0ff".toCharArray());

// that's fine
SecretKeySpec secretKey = new SecretKeySpec(secret, "AES");

// SecureRandom should either be slow or be implemented in hardware
SecureRandom random = new SecureRandom();

// first create the cipher
Cipher eCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

// filled with 00h characters first, use Cipher instance so you can switch algorithms
byte[] realIV = new byte[eCipher.getBlockSize()];

// actually fill with random
random.nextBytes(realIV);

// MISSING: create IvParameterSpec
IvParameterSpec ivSpec = new IvParameterSpec(realIV);

// create the cipher using the IV
eCipher.init(Cipher.ENCRYPT_MODE, secretKey, ivSpec);

// NOTE: you should really not encrypt passwords for verification
String stringToEncrypt = "mypassword";

// convert to bytes first, but don't use the platform encoding
byte[] dataToEncrypt = stringToEncrypt.getBytes(Charset.forName("UTF-8"));

// actually do the encryption using the data
byte[] encryptedData = eCipher.doFinal(dataToEncrypt); 
```

现在看起来好多了。我使用 Apache commons 编解码器来解码十六进制字符串。

请注意，您需要使用 保存`realIV`，`encryptedData`并且您没有包含完整性保护，例如 MAC（对于密码，您可能不需要它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:19:00.427

我强烈怀疑你想要做的是 call [`ecipher.doFinal(stringToEncrypt)`](http://developer.android.com/reference/javax/crypto/Cipher.html#doFinal%28byte%5B%5D,%20int,%20int%29)，可能在一系列`doUpdate(...)`if 你有更长的字符串之后。

`.init()`创建密码对象，`update()`并`doFinal()`填充加密输出并将明文作为输入。

当然，您需要在[和 字节数组](https://stackoverflow.com/q/1536054/90322)[之间进行转换`String`](https://stackoverflow.com/q/1536054/90322)。

# c# - 计时器委托周围的内存泄漏

> ID：13205024
> 
> 赞同：6
> 
> 时间：2012-11-03T01:08:37.147
> 
> 标签：c#, .net, multithreading, timer

有时用户想要安排大量的计时器，并且不想管理对这些计时器的引用。
如果用户不引用计时器，则计时器可能会在执行之前由 GC 收集。
我创建了 Timers 类作为新创建的计时器的占位符：

```
static class Timers
{
    private static readonly ILog _logger = LogManager.GetLogger(typeof(Timers));

    private static readonly ConcurrentDictionary<Object, Timer> _timers = new ConcurrentDictionary<Object, Timer>();

    /// <summary>
    /// Use this class in case you want someone to hold a reference to the timer.
    /// Timer without someone referencing it will be collected by the GC even before execution.
    /// </summary>
    /// <param name="dueTime"></param>
    /// <param name="action"></param>
    internal static void ScheduleOnce(TimeSpan dueTime, Action action)
    {
        if (dueTime <= TimeSpan.Zero)
        {
            throw new ArgumentOutOfRangeException("dueTime", dueTime, "DueTime can only be greater than zero.");
        }
        Object obj = new Object();

        Timer timer = new Timer(state =>
        {
            try
            {
                action();
            }
            catch (Exception ex)
            {
                _logger.ErrorFormat("Exception while executing timer. ex: {0}", ex);
            }
            finally
            {
                Timer removedTimer;
                if (!_timers.TryRemove(obj, out removedTimer))
                {
                    _logger.Error("Failed to remove timer from timers");
                }
                else
                {
                    removedTimer.Dispose();
                }
            }
        });
        if (!_timers.TryAdd(obj, timer))
        {
            _logger.Error("Failed to add timer to timers");
        }
        timer.Change(dueTime, TimeSpan.FromMilliseconds(-1));
    }
} 
```

如果我不处理已删除的计时器，则会导致内存泄漏。 从集合
中删除计时器后，似乎有人持有对计时器委托的引用。`_timers`

问题是，如果我不处置计时器，为什么会出现内存泄漏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T03:30:26.037

由计时器本身创建的a`Timer` 保持活动状态。`GCHandle`这可以使用 .net 内存分析器进行测试。反过来`Timer`，这将使代表保持活力，然后让其他人保持活力。

A`GCHandle`是一种特殊的对象，可用于“欺骗”垃圾收集器以使无法访问的对象保持活动状态。

您实际上可以在没有探查器的情况下使用以下方法进行测试：

```
var a = new ClassA();
var timer = new Timer(a.Exec);

var refA = new WeakReference(a);
var refTimer = new WeakReference(timer);

a = null;
timer = null;

GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect();

Console.WriteLine(refA.IsAlive);
Console.WriteLine(refTimer.IsAlive); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T01:27:42.960

[`Timers`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)是[`Components`](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.aspx)。因此，[`Dispose`](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.dispose.aspx)当你完成它们时，你必须打电话。

从[文档中](http://msdn.microsoft.com/en-us/library/system.componentmodel.component%28v=vs.100%29.aspx)：

> **组件**应通过调用其[Dispose](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.dispose%28v=vs.100%29.aspx)方法显式释放资源，而无需等待通过隐式调用[Finalize](http://msdn.microsoft.com/en-us/library/system.object.finalize%28v=vs.100%29.aspx)方法进行自动内存管理。当一个[Container被释放时，该](http://msdn.microsoft.com/en-us/library/system.componentmodel.container%28v=vs.100%29.aspx)[Container](http://msdn.microsoft.com/en-us/library/system.componentmodel.container%28v=vs.100%29.aspx)内的所有组件也会被释放。

“当一个[容器被释放时，](http://msdn.microsoft.com/en-us/library/system.componentmodel.container%28v=vs.100%29.aspx)[容器](http://msdn.microsoft.com/en-us/library/system.componentmodel.container%28v=vs.100%29.aspx)内的所有组件也被释放”部​​分。可以在 Form 的 Dispose 方法中看到它调用时：

```
if (disposing && (components != null))
{
    components.Dispose();
} 
```

因此，除非将计时器添加到组件中，否则不要期望计时器与 Form 一起处置。

更新您的评论：
计时器具有指向非托管代码（操作系统的计时器 API）的指针，因此在不再需要这些代码之前它无法释放。除非首先调用 dispose 或程序正在退出，否则终结器不会在对象上运行。这是因为这些当前对非托管代码的引用。

据我了解，处置模型假设可以加快程序关闭速度（因为运行时可以在停机期间收集垃圾），同时仍允许执行非托管代码。如果您执行大量 ddl 导入，您将开始了解系统为什么会这样工作。

还应该注意的是，文档表明您可能无法从对象的终结器访问托管对象。StreamWriter 就是一个例子。我个人认为这是一个任意规则，但它确实存在，因此需要 dispose 系统。

无论哪种方式，如果你使用了实现 iDisposable 接口的东西，你应该总是在用完后将其丢弃。这样，您将获得更好（更一致）的结果。

# sql - JDBC getGeneratedKeys()

> ID：13205031
> 
> 赞同：1
> 
> 时间：2012-11-03T01:10:11.320
> 
> 标签：sql, jdbc

我从[http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/preparedstatement.html获得了以下代码示例](http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/preparedstatement.html)

我有三个问题：

1.  考虑到只有三列 - LAST、FIRST、HOME，'keyColumn' 指的是什么。
2.  为什么在迭代生成的密钥时使用循环？是否为该一个插入语句返回了多行？
3.  哪些数据库支持每个表生成多个键？

```
String sql = "INSERT INTO AUTHORS (LAST, FIRST, HOME) VALUES " +
                                     "(?, ?, ?, keyColumn)";

PreparedStatement addAuthor = con.prepareStatement(sql,
                             Statement.RETURN_GENERATED_KEYS);
addAuthor.setString(1, "Wordsworth");
addAuthor.setString(2, "William");
addAuthor.setString(3, "England");

int rows = addAuthor.executeUpdate();

ResultSet rs = stmt.getGeneratedKeys();
if (rs.next()) {
    ResultSetMetaData rsmd = rs.getMetaData();
    int colCount = rsmd.getColumnCount();
    do {
        for (int i = 1; i <= colCount; i++) {
            String key = rs.getString(i);
            System.out.println("key " + i + "is " + key);
        }
    }
    while (rs.next();)
} 
else {
    System.out.println("There are no generated keys.");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:00:49.397

问题1。我认为`keyColumn`在您的链接查询中只是示例中的错误。该段中的第二个和第三个示例也包含严重的语法错误。我不会详述它。该文档已从较新的 Java 版本中完全删除。

问题 2\. 考虑类似`INSERT INTO ... SELECT ... FROM ...`or`INSERT INTO ... VALUES (...), (...)`可以产生多个插入行的语句。此外，一些数据库支持从其他 DML（例如`UPDATE`or `DELETE`）返回值，这也会影响多行，这就是您需要考虑循环的原因。在此特定示例中，没有必要，因为您可以确定只会插入一行。

问题 3\. 这个问题有点复杂：

一些数据库（或驱动程序）不能轻易确定实际生成的列是什么。例如因为数据库没有`IDENTITY`列，而是使用触发器来生成键。识别生成的键将涉及解析表上的所有触发器以检查它是否将生成的值分配给（主键或其他）列，这不容易完成并且容易出错。有时会生成多个列（即计算字段等）。作为开发人员，您应该知道您可以或想要返回哪些字段。

由于很难（或低效）决定返回哪些字段，一些驱动程序（默认情况下）返回插入（或删除/更新）行的所有列。例如 PostgreSQL 和 Firebird 驱动程序就是这样做的。另一方面，即使表不包含标识列，一些驱动程序也只会返回最后生成的键（我相信 MySQL 会，但不是 100% 肯定）。而且我似乎记得 Oracle 驱动程序只是返回`ROWID`，让用户使用它从数据库中检索实际值`ROWID`。

[如果您明确知道要返回哪些列，则可以使用接受列序索引](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20int%5B%5D%29)或[列名](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20java.lang.String%5B%5D%29)数组的替代方法指定自己。尽管并非所有驱动程序都支持这一点。

# git - 如果文件已经在服务器上，请避免 git-ftp 上传

> ID：13205032
> 
> 赞同：13
> 
> 时间：2012-11-03T01:10:11.983
> 
> 标签：git, version-control, github, git-ftp

假设我有我的应用程序的本地副本，我将其推送到 github，然后使用 git-ftp 将任何更改上传到我的服务器。

我会首先使用：

```
$ git ftp init -u <user> -p - ftp://host.example.com/public_html 
```

这会将我所有的文件上传到服务器并`git push`用于将来的上传，对吗？

但是，如果我的服务器上已经有一个副本并想在本地设置它怎么办？我尝试下载我的应用程序文件，使用`git init`，将所有内容推送到 github，然后当我尝试使用时`git ftp push`收到此错误：

```
fatal: Could not get last commit. Network down? Wrong URL? Use 'git ftp init' for the inital push., exiting... 
```

然后我使用了该`git ftp init`命令并且它有效，但它重新上传了所有内容。

有什么方法可以设置它而无需重新上传所有内容并开始使用`git ftp push`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T22:33:10.550

从手册页`git-ftp`：

```
catchup
    Uploads current SHA1 to log, does not upload any files.

    This is useful if you used another FTP client to upload the
    files and now want to remember the SHA1. 
```

因此，如果您确定您的 git 存储库与 FTP 服务器同步，请`git ftp catchup`代替`git ftp init`第一次运行，它会将当前提交哈希上传到服务器，但不会更改任何文件。在那之后，使用`git ftp push`它来同步未来的提交。

# c - 在c中返回不结束的方法

> ID：13205033
> 
> 赞同：0
> 
> 时间：2012-11-03T01:10:13.560
> 
> 标签：c, return

*编辑 - 我算出算术错误，但我仍然有返回错误*

出于某种原因，我的程序给了我两个错误。第一个错误是我的每个方法（）末尾的“返回”并没有结束该方法并将我带回 main。我的第二个问题在第 23 行，其中 pfNum = mainSize/pageSize; 给我一个“SIGFPE，算术异常”，不知道为什么这两种情况都会发生，谁能帮帮我？

谢谢

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/* Define page table as dynamic structure containing virtual page and page frame 
   and initialize variable as pointer to structure */
struct table{
    int vp;
    int pf;
}*pageTable = NULL;
/* Declare global var's */
int mainSize,pageSize,policy,pfNum;
/**********************************************************************/
void option1(){
/* Declare local var's */
    int k;
/* Prompt for main memory size, page size, and replacement policy */
    printf("Enter main memory size(words): ");
    scanf("%d",&mainSize);
    printf("Enter page size(words/page): ");
    scanf("%d",&pageSize);
    printf("Enter replacement policy(0=LRU, 1=FIFO): ");
    scanf("%d",&policy);
    pfNum = mainSize/pageSize;
/* Allocate and initialize page table based on number of entries */
    pageTable = malloc(pfNum *sizeof(pageTable));
    for(k=0;k<pfNum;k++){
        pageTable[k].vp=-1;
        pageTable[k].pf=k;
    }
return;
}
/**********************************************************************/
void option2(){
/* Declare local var's */
    int va,page,offset,i=0,temp;
/* Prompt for virtual address */
    printf("Enter virtual memory address to access: ");
    scanf("%d",&va);
/* Translate virtual mem addr to virtual page and offset*/
    page = va/pageSize;
    offset = va%pageSize;
/* Check for end of table, unallocated entry, or matched entry in table 
and update table appropriately; while none of three cases, keep looping */

    while(i<pfNum && pageTable[i].vp!=1 && pageTable[i].vp!=page)
        i++;
    if(i<=pfNum){
        int j;
        temp = pageTable[0].pf;
        for(j=1;j<pfNum;j++)
            pageTable[j-1]=pageTable[j];
        pageTable[j].vp=page;
        pageTable[j].pf=temp;
        printf("Page Fault!");
    }
    else if(pageTable[i].vp==-1){
        pageTable[i].vp = page;
        printf("Page fault!");
    }
    else if(pageTable[i].vp==page){
        temp = pageTable[i].pf;
        int l,address;
        for(l=i+1;l<pfNum-1;l++)
            pageTable[l-1]=pageTable[l];
        pageTable[l].vp = page;
        pageTable[l].pf = temp;
        address = (temp*pageSize)+offset;
        printf("Virtual address %d maps to physical address %d",va,address);
    }
 return;
}
 /**********************************************************************/
void option3(){
 /* Declare local var's */
    int u;
    for(u=0;u<pfNum;u++ && pageTable[u].vp!=-1)
        printf("VP %d --> PF %d",pageTable[u].vp,pageTable[u].pf);
 /* Print out each valid virtual page and page frame pair in table */

 return;
}

 /**********************************************************************/
 int main(){
 /* Declare local var's */
    int choice;
 /* Until user quits, print menu of options, prompt for user input, and select     appropriate option */
    printf("/n");
    printf("Virtual memory to Main memory mapping:\n");
    printf("--------------------------------------\n");
    printf("1) Set parameters\n");
    printf("2) Map virtual address\n");
    printf("3) Print page table\n");
    printf("4) Quit\n");
    printf("\n");
    printf("Enter Selection: ");
    scanf("%d",&choice);
    printf("\n");
    while(choice!=4){
        if(choice==1)
            option1();
        else if(choice==2){
            option2();
        }
        else if(choice==3)
            option3();
    }
    printf("Goodbye. Have a nice day.");
return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:15:42.183

“SIGFPE，算术异常”异常很可能是由被零除引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:31:48.440

一个问题是，一旦您做出初始选择，就不会再改变选择，因此程序会循环执行您的初始选择（可能什么都不做，因为您不验证零、否定选择或值大于四）。这可能使您的函数看起来“不返回”，但实际上它们确实返回了；他们几乎立即再次被呼叫。

您可能需要在每次循环时提示一个新的选择，这会建议一个函数来提示并返回您从`while`循环中调用的选择。

你至少有一个`"/n"`你可能想要的地方`"\n"`。您的告别信息缺少换行符；许多其他消息（例如`"Page Fault!"`消息）也是如此。您没有检查您的输入功能是否成功。您不检查内存分配是否成功。

您的 SIGFPE 可能来自被零除；在执行除法之前打印您正在处理的值。

# asp.net-mvc - 将查询数据从控制器传递到视图

> ID：13205035
> 
> 赞同：0
> 
> 时间：2012-11-03T01:10:33.440
> 
> 标签：asp.net-mvc, linq

我一直在这个问题上停留太久，希望得到一些帮助。

在视图中，人们可以从两个单选按钮列表中选择两个项目，这两个单选按钮列表通过 FormMethod.Get 返回到 HomeController 中的 Index 事件。

查询这两个值“parts”和“use”以返回结果，并将其通过 viewbag 传递回视图。然而，viewbag 在视图中返回类似 { Item = Kona, Price = 400.0000, Quantity = 2 } 的行。

而我想退回每个项目，例如 item.Item、Item.Price，以便我可以单独使用它们。

我已经尝试了我能找到的一切都无济于事。匿名类项目也会抛出红色错误

看法

```
foreach(var item in ViewBag.getstock)
{ //Show it and then make a new line with the <BR/>
    @item < br / >
    //{ Item = Kona, Price = 400.0000, Quantity = 2 } 
} 
```

家庭控制器

```
 public ActionResult Index()
 {
     //this returns the entire query string
     ViewBag.querystring = Request.QueryString;

     //if any keys are in the url from the view
     if (Request.QueryString.HasKeys())
     {
         //extract them out so that you can use them
         //key = the name such as Part or Use it goes Key & Value this is passed to a Viewbag
         //get(o) is getting the value at place 0, the first value in the url

         ViewBag.querystringvalue0 = Request.QueryString.Get(0);
         ViewBag.querystringvalue1 = Request.QueryString.Get(1);
     }

     //if there is any query string
     if (Request.QueryString.HasKeys())
     {
         //pass the data to a couple of variables,
         var parts = Request.QueryString.Get(0);
         var use = Request.QueryString.Get(1);

         //put them in a new query and return the results
         ViewBag.getstock = from p in Bikeshopdb.Stocks
         where p.PartName == parts && (p.Road == use || p.Mtn == use || p.Hybrid == use) select new
         {
             p.Item, p.Price, p.Quantity
         };

     }
     return View(Bikeshopdb.Stocks.ToList()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:37:37.950

使用 ViewModel 类来保存查询结果并传回视图。例如：

家庭控制器

```
public class MatchingStock()
{

    public int ID { get; set; }
    public string Item { get; set; }
    public int Price { get; set; }
    public int Quantity { get; set; }

}

public ActionResult Index()
{

    //...

    var list = 
        (from p in Bikeshopdb.Stocks
        where p.PartName == parts && 
            (p.Road == use || p.Mtn == use || p.Hybrid == use)
        select new MatchingStock() { 
            ID = p.ID, 
            Item = p.Item, 
            Price = p.Price, 
            Quantity = p.Quantity}).ToList();

    ViewBag.getstock = list;

    //...

} 
```

看法

```
@foreach (var item in (List<MatchingStock>)ViewBag.getstock)
{
    @item.Item @item.Price @item.Quantity
    <br />
} 
```

# android - 无法生成 R.Java

> ID：13205037
> 
> 赞同：0
> 
> 时间：2012-11-03T01:10:59.790
> 
> 标签：android, xml

我最近一直试图让 R.JAVA 生成无济于事。我尝试了以下 1\. 在清单文件中添加空格 2\. Project--> Clean

所以我最后的猜测是我的 xml 文件中有一些我/eclipse 无法看到的错误。所以我希望有第二双眼睛可以检查我的 xml 文件以供审查。只有三个，它们应该是非常基本的（我正在关注 Android 书籍的介绍）。

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.activites"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity2"
        android:label="Activity 2" >
        <intent-filter>
        <action android:name="com.example.ACTIVITY2" />

        <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    </application>
</manifest> 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

活动2.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="This is Activity 2!" />
</RelativeLayout> 
```

再次感谢所有从忙碌的白天/夜晚抽出时间来帮助像我这样的初学者的人。此外，如果除了 xml 中的错误之外还有任何建议，请随时提出。

按照这里的要求，问题出现在 windows-> 显示视图 -> 问题中

1.  R 无法解析为变量
2.  R 无法解析为变量
3.  R 无法解析为变量

标记不是那么明显，它用于在 catlog 中显示调试信息，代码如下。

```
public class MainActivity extends Activity { 
```

字符串标签 = "事件";

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    Log.d(tag, "In the onCreate() event");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:58:08.520

在 Eclipse 中，您可以检查问题视图（windows-->show view-->Problems）或/和控制台视图，以帮助有效地定位 Xml 中的错误。如果您仍然需要帮助，您可能希望将这些错误发布给我们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:33:39.133

编译代码时出现以下错误：

> res\layout\Activity2.xml：文件名无效：必须仅包含 [a-z0-9_.]

所以删除大写A并将“Activity2.xml”重命名为“activity2.xml”

另外，如果这没有帮助，试试这个： -

将您的包名称重命名为其他名称。干净的。重新启动 Eclipse。将包重命名为前一个。又干净了。重新启动 Eclipse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T03:04:26.563

`tag`应该是一个字符串变量。它被定义为什么？您可能应该在那里对其进行硬编码，除非您将其用作应用程序的全局变量。 [http://developer.android.com/reference/android/util/Log.html#d%28java.lang.String,%20java.lang.String%29](http://developer.android.com/reference/android/util/Log.html#d%28java.lang.String,%20java.lang.String%29)

编辑：[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)有很多不同的答案，请尝试通读这些。如果第一个不能解决您的问题，那么另一个可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T03:15:13.250

检查你的进口。有`import android.R`什么地方吗？如果是这样，请将其删除。如果您确实在阅读书中的一些 android 教程，并且它指示您使用 Ctrl+shift+O 或其他方式组织或管理导入，那将导致它弹出。

# jquery - 从选择中删除不需要的列表项

> ID：13205038
> 
> 赞同：1
> 
> 时间：2012-11-03T01:11:18.950
> 
> 标签：jquery

我有一个 jsFiddle，它在选中某些复选框时显示文本。如果列表项是“邪恶的”，我不想显示它。

[http://jsfiddle.net/mgaRw/15/](http://jsfiddle.net/mgaRw/15/)

```
<ul class="filterThis">

<li class="red evil circle">
<h3>red evil circle</h3>
</li>

<li class="red circle">
<h3>red circle</h3>
</li>
.
. 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:18:19.047

而不是选择所有列表元素：

```
var targets = $('.filterThis li') 
```

你只选择那些不是邪恶的：

```
var targets = $('.filterThis li:not(.evil)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:19:08.680

```
if (!$(this).is('.evil')) 
```

[**小提琴**](http://jsfiddle.net/mgaRw/16/)

作为旁注，UL（标签不再需要大写，它不是 1990 年）不能将 P 作为子元素，但应该将 LI 元素作为子元素，因此您的标记无效。

我可能会这样做：

```
$('.filters input[type="checkbox"]').on('change', function() {
    var checks1 = $('input[type="checkbox"]', '.filters ul:first').map(function() {
        if (this.checked) return this.value;
    }),
        checks2 = $('input[type="checkbox"]', '.filters ul:last').map(function() {
        if (this.checked) return this.value;
    });
    $('.filterThis li').each(function(i,elm) {
        var classes = elm.className.split(' '), 
            show = false;
        if (classes.length==2 && checks1.length>0 && checks2.length>0) {
            if ($.inArray(classes[0], checks1)!=-1 || $.inArray(classes[0], checks2)!=-1 && 
                $.inArray(classes[1], checks1)!=-1 || $.inArray(classes[1], checks2)!=-1) show=true;
        }
        $(elm).toggle(show);
    });
});​ 
```

[**FIDDLE**](http://jsfiddle.net/mgaRw/20/)（甚至修复了标记）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T01:25:02.523

我认为您需要像下面那样修改迭代器以检查输入长度是否为 0

```
$.each(classList, function(index, item){
   var inputItem = $('input[value="'+item+'"]');
   if (!inputItem.length || inputItem.not(':checked').length) {
     include = false;
     return false;  
   }
}); 
```

**演示：http:** [//jsfiddle.net/mgaRw/19/](http://jsfiddle.net/mgaRw/19/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T01:52:38.007

为什么不动态创建`<li>`元素而不是过滤？不要把简单的事情复杂化！

```
<ul class="filters" id="shapes">
  <li><input type="checkbox" value="circle">Circle</li>
  <li><input type="checkbox" value="square">Square</li>
  <li><input type="checkbox" value="triangle">Triangle</li>
</ul>

<ul class="filters" id="colors">
  <li><input type="checkbox" value="red">Red</li>
  <li><input type="checkbox" value="blue">Blue</li>
  <li><input type="checkbox" value="yellow">Yellow</li>
</ul>

<ul class="result"></ul>​ 
```

喝了几杯[咖啡](http://www.coffeescript.org)后：

```
$('input[type="checkbox"]').on 'click', ->
  $list = $('ul.result')

  $list.empty()

  $.each $('#shapes').find('input'), ->
    return true unless $(this).is(':checked')
    shape = $(this).val()
    $.each $('#colors').find('input'), ->
      return true unless $(this).is(':checked')
      color = $(this).val()
      $list.append $('<li>').html("#{shape} #{color}")​​​​ 
```

[**小提琴**](http://jsfiddle.net/Wrbpg/6/)

# objective-c - 在目标 c 中使用用户选择的时间创建 NSDate

> ID：13205041
> 
> 赞同：2
> 
> 时间：2012-11-03T01:12:06.600
> 
> 标签：objective-c, ios, time, calendar, nsdate

```
int hour = [[array objectAtIndex:0] intValue]; //hour = 17
int min = [[array objectAtIndex:1] intValue]; //min = 51
NSLog(@"hour value is %d",hour);
NSLog(@"min value is %d",min);
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];

int year = [components year];
int month = [components month];
int day = [components day];
NSDateFormatter  *dateFormatter = [[NSDateFormatter alloc]init];
dateFormatter.timeStyle = NSDateFormatterNoStyle;

[components setYear:year];
[components setMonth:month];
[components setDay:day];
[components setHour:hour];
[components setMinute:min];
NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] ;
NSDate *itemDate = [cal dateFromComponents:components];
NSLog(@"the date is %@",itemDate); 
```

输出：日期是 2012-11-03 01:00:00 +0000 。但我希望输出为 2012-11-03 17:51:00 ..我怎么能得到它？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:32:12.623

看来您的问题很简单，没有意识到`NSDate`将使用您自己的当前时区创建对象，但将使用 UTC`NSLog`打印出描述。`NSDate`由于您似乎处于 PDT（本周末晚些时候美国时钟发生变化时将是 PST），您`NSLog`应该显示所需的日期/时间，但它似乎是 7 小时（本周末后 8 小时）关闭。

要在当地时区显示您的日期，请使用`NSDateFormatter`将 转换`NSDate`为`NSString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:46:10.823

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSString *dateString = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"the date is %@", dateString); 
```

# c++ - 是否需要临时或文字才能拥有右值？

> ID：13205043
> 
> 赞同：1
> 
> 时间：2012-11-03T01:12:35.717
> 
> 标签：c++, temporary, rvalue

[这个问题](https://stackoverflow.com/questions/2145030/are-all-temporaries-rvalues-in-c)询问是否所有临时对象都是右值。

答案是否定的，因为如果我们考虑这个表达式：

```
const int &ri = 2 + 3; 
```

然后，可以在后续表达式中将相同的临时`(2 + 3)`值（此处为右值）用作左值：

```
const int *pi = &ri; 
```

所以这个临时不是（仅）一个右值。

则逻辑语句`temporary ==> rvalue`为假。

但是，我们不能写

```
const int &ri = &(2 + 3); // illegal, 2 + 3 -> temporary -> rvalue 
```

或者

```
int *i = &4; // illegal, 4 is an rvalue (literal) 
```

或者

```
int foo();
int *i = &foo(); // illegal, foo() -> temporary -> rvalue 
```

因此我的问题是，我们可以在没有临时或文字的情况下在某个表达式中生成右值吗？是`rvalue ==> (temporary or literal)`真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T01:21:24.023

产生临时对象的表达式**是**r 值。有一个特殊规则允许 const 引用和 r-value 引用绑定到 r-values，这将临时对象的生命周期延长到引用的生命周期（参见 12.2(5)），但这不会使临时对象-object 表达式任何更少的 r 值。

但是，一旦绑定到引用，引用变量本身就有名称，因此引用表达式是一个左左值。

不要混淆表达式、变量和对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T02:15:16.210

*rvalue*和*lvalue*属性适用于表达式，而不适用于*对象*。表达式可以是*左值*或*右值*。过度简化产生值的表达式是*右值*表达式，而产生对象的表达式是*左值表达式*。*左值*到*右值*的转换是从对象中*读取*值的行为。

产生临时值和文字的表达式都是*右值表达式*，它们表示*值*而不是实际对象。

在您的示例中：

```
const int &ri = 2 + 3;
const int *pi = &ri; 
```

该表达式`2+3`是用于初始化常量引用的*右值表达式。*根据语言，这意味着将临时的生命周期延长到当前表达式之外，直到引用超出范围。之后，在第二个表达式中，子表达式`ri`是一个*左值表达式*，它引用临时对象，其生命周期已被延长。

请注意，还有其他方法可以使用临时变量创建*右值表达式*，例如调用产生引用的成员：

```
struct test {
   test& thisTest() { return *this; }
};
test foo();
... foo().thisTest() 
```

子表达式`foo()`是*rvalue-expression*，但表达式`foo().thisTest()`是*lvalue-expression*。它们都引用了一个*临时*对象，该对象将在完整表达式的末尾消失。

# c# - 如何通过 VS 调试网站/应用程序而不使用额外的程序

> ID：13205047
> 
> 赞同：0
> 
> 时间：2012-11-03T01:13:43.807
> 
> 标签：c#, debugging, logging, asp.net-4.0, session-variables

我已经设法在 WinForms 中实现了所要求的功能，尽管我仍然是 ASP.NET（比 Windows 复杂得多的平台，变量“失去”它们是他们以前拥有的一切）和客户端 VS 的初学者。服务器，我有点问自己从哪里开始。

在使用系统反射的 WinForms 中，我能够被 repotted
（通过放置在当前表单上的 ListView）ListView 填充
了每个功能信息（计时参数等......）
，但我真的想不出一个网站来托管它，`ListView`即使我可能会在发布应用程序之前丢失它。反而，

我想到了以下类似的方法，我想与您有经验的开发人员核实一下，您如何照顾您的`business`?

我实际上可以对 Visual Studio 自己的调试功能感到满意。

这是我的方法

例如单击提交按钮

```
protected void imgBut_Submt_Click(object sender, ImageClickEventArgs e)
{
    //debugging and logging via methods that's in a namespace/ classses showed below         
    SeSn.Modify(Act.Edit,SeSn.CurrentStage, Mod.submitedFreshQuery); <-----=======
    App.Add(AppFlags.SubmitButtonWasPressed);<------===========

    Display.Show(DV_UsersInTblTime); 
    tblTimeDataLists.getReportFromSP(Convert.ToInt32(DDL_ChosenBranch.SelectedItem.Value), SelectedReportMonth, SelectedReportYear);
    Visibility.Hide(imgBut_Submt);
    var m = Request.Form["DDLmonth"];
    var y = Request.Form["DDLyear"];

    string branchName = GetTableData.AsString(HTDB_Cols.TblBranches.BranchName, HTDB_Tables.TblBranches, HTDB_Cols.TblBranches.BranchID, DDL_ChosenBranch.SelectedItem.Value);
    if (tblTimeDataLists.TheresNoRecordForThatSnif(Convert.ToInt32(DDL_ChosenBranch.SelectedItem.Value), Convert.ToInt32(m), Convert.ToInt32(y)))
        JsTemplates.Alert(string.Format("No data for {0} at period   {1}/{2}", branchName, m, y));
    DisplayRepResults();

} 
```

你可以看看我用来“收集”系统会话数据的方法

```
namespace DebugTests
{
    namespace Sesseion
    {

    public static class SeSn
    {
        public const string CurrentStage = "CurrStage";
        public static bool isNotEmpty()
        {
            return HttpContext.Current.Session.Keys.Count > 0;
        }
        public static bool Raised(string FlagName)
        {
            return GetValueAS.Bool(FlagName);
        }
        public static void Modify(Act action, string NewQs_paramName, string NewP_Value = "", string CurSes_ParamName = null, bool redirectWithNewQuerySettings = false)
        {
            switch (action)
            {
                case Act.Remove:
                    if (isNotEmpty())
                        HttpContext.Current.Session.Remove(CurSes_ParamName);
                    break;
                case Act.Replace:
                    HttpContext.Current.Session.Remove(CurSes_ParamName);
                    HttpContext.Current.Session.Add(NewQs_paramName, NewP_Value);
                    break;
                case Act.Edit:
                    HttpContext.Current.Session.Remove(CurSes_ParamName);
                    HttpContext.Current.Session.Add(CurSes_ParamName, NewP_Value);
                    break;

                case Act.Add:
                    HttpContext.Current.Session.Add(NewQs_paramName, NewP_Value);
                    break;
                case Act.AddFlag:
                    HttpContext.Current.Session.Add(NewQs_paramName, true);
                    break;

            }

        }

    }
    public enum Act
    {
        Edit, Add, AddFlag, Remove, Replace
    }
    public sealed class SesVals
    {
        public const string state = "Cstate";
        public const string custid = "custid";
        public const string recordID = "recordID";
        public const string SelectedMonth = "SesMonth";
        public const string SelectedChosenWorker = "SesChosenWorkerSelected";
              //etc....
    }
    public sealed class Mod
    {
        public const string FirstloadeViaLink = "Link",
                            submitedFreshQuery = "submitedFreshQuery",
                            canceledInsert = "cancelInsert",
                            filteredByTable = "filteredByTable",
                            filterByColumn = "filterByColumn";
        //etc....

    }
    public sealed class App
    {
        public static void Add(string flagName)
        {
            Sesseion.SeSn.Modify(Act.AddFlag, flagName);
        }
    }
    public sealed class AppFlags
    {
        public const string SubmitButtonWasPressed = "SubmitButtonWasPressed";
        public const string MainDataSetIsPopulated = "MainDataSetIsPopulated";
        public const string HTDB_DisplayCpa_Cols_WasSelected = "HTDBCpa_ColsWasSelected";
           //etc....
    }

  }
} 
```

如果我想避免 VS 的额外程序/插件，或者是否必须使用它们，这是这样做的方法吗？

您如何管理您的应用程序操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:15:25.293

（忽略似乎与标题中的问题无关的所有文本/代码）

您可以使用 Visual Studio 调试使用 ASP.Net 编写的 Web 应用程序的两端。

使用 VS 进行浏览器端调试仅限于 IE，但通常这不是问题，因为所有用于桌面系统的现代浏览器都包含开发人员工具（通常可通过单击 F12 获得）。

服务器部分可以在内置的 Web 服务器或 IIS 上直接调试。如果您不使用默认部署，您可以简单地将 VS 调试器附加到包含给定站点的应用程序池的 w3wp 进程。

# version-control - perforce：控制权限而不涉及超级用户访问

> ID：13205050
> 
> 赞同：1
> 
> 时间：2012-11-03T01:14:41.613
> 
> 标签：version-control, perforce, p4v

我们在我的公司中使用 perforce 并严重依赖它。对于以下情况，我需要一些建议：

我们的 Depot 结构是这样的：

```
//depot
    /product1
        /component1
        /component2
        .
        .
        /componentN
            /*.java
            /*.xml
    /product2
        /component1
        /component2
        .
        .
        /componentN
            /*.java
            /*.xml 
```

每个产品都有多个组件，每个组件都由 java 或 xml 或其他一些程序文件组成。每个组件都有一个与之关联的管理器/所有者。

现在，我们已经封锁了每个用户的写权限，只有在代码审查后得到经理/所有者批准后，我们​​才打开该用户的写权限，以便任何文件/文件夹签入。这个过程变得有点混乱因为经理/开发人员必须等待 perforce 管理员允许权限（更新 perforce 的保护表）。此外，我们给他们一个只有 24 小时的窗口来签入（由于敏捷，我不太了解 :)），之后我们应该再次阻止该用户的写访问。

我正在寻找的是一种机制，其中 perforce 管理员可以将此责任委派给各自的经理/所有者，而无需授予他们超级用户或管理员访问权限，并在 24 小时后自动禁用写入权限。

有什么建议么 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:34:49.670

就其本身而言，没有什么可以开箱即用。

我能想到的最接近的事情是这些组件的主线版本是否得到了拥有所有者的组的许可。组的所有者可以在组中添加和删除成员，从而将权限委托给“看门人”而不是管理员自己。

如果您需要对此进一步澄清，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:39:50.593

一种常见的解决方案是构建一个简单的工具来读取和写入保护表、组成员资格等，以实施您想要的策略。

保护和组数据的格式并不复杂，您可以轻松编写一点文本处理代码，根据您的需要编写和重写这些规范。

然后以安全的方式在服务器计算机上安装您的工具，授予该工具更新保护表的权限，并让您的组件管理员使用该工具来管理权限。

例如，我看到这是通过用 Java 或 Perl 编写一个小型 Web 应用程序来完成的，将其安装在安全机器上的 Web 服务器上，并让组件管理员通过 Web 界面操作该工具。

您的所有工具必须提供 (a) 为您的组件管理员提供一个简单的登录/注销机制（Web 服务器可能已经为您执行此操作），(b) 一个接受用户名和文件夹名称并授予权限的命令， (c) 随后删除该权限的命令（或计时器）。

# silverlight - Silverlight 获取 XAP 文件日期

> ID：13205052
> 
> 赞同：0
> 
> 时间：2012-11-03T01:15:03.603
> 
> 标签：silverlight

有人可以告诉我如何从客户端刚刚打开的 Silverlight XAP 文件中返回文件修改日期。我正在添加一个显示此日期的工具提示，以便我可以验证客户端正在运行哪个版本的 XAP。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:20:50.780

因为这个项目处于不断变化的状态，所以我每隔几个小时就会更新一次。目前大约有 3-4 名用户/测试人员，但他们可以让他们的浏览器在一天中保持打开状态。我有一个轮询功能，我需要它来将本地 XAP 文件的日期/时间发送回 WCF 服务器，以便它知道是否有可用的更新。如果是这样，用户将看到一个弹出消息并提示他们点击刷新。

我相信 RunningAssembly 版本需要自己更新，并且不会随着每次构建而自动递增？如果是，那么 RunningAssembly 就是要走的路……

谢谢回复。。

# php - 重定向 HTTP POST apache，

> ID：13205053
> 
> 赞同：0
> 
> 时间：2012-11-03T01:15:13.260
> 
> 标签：php, apache, codeigniter, mod-rewrite

我有一个问题，我想从另一台服务器获取参数 HTTP POST，我想通过 HTTP POST 从服务器 A 与服务器 B 通信，在这个问题中，服务器 A 使用默认软件向服务器 B POST。但是如果我查看 access.log，服务器 B 无法从服务器 A 获取请求 HTTP POST

```
"POST http://mywebsite/class/param" 404 
```

也就是说，来自服务器 A 的请求无法识别，找不到 404 页面。然后我模拟使用 html 表单使用方法 POST 来获取正确的日志，如果我再次查看 access.log，

```
"POST /class/param" 200 
```

200 表示 OK，请求可以接受。

我的问题是如何重定向 POST

```
http://mywebsite/class/param 
```

至

```
/class/param 
```

?? 我试过搜索，似乎可以使用mod_rewrite，但我仍然无法使用它。

规格：
服务器网络：apache
网络语言：php
php 框架：codeigniter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:01:59.907

如果您重写 POST 请求，则不会包含内容正文，因此您将丢失 POST 参数。您需要做的是更改发送此请求的内容，以便发送正确的 URI。看起来它可能就像操作一样简单，`http://mywebsite/http://mywebsite/class/param`只需要移除主机。

# php - 从变量创建函数

> ID：13205055
> 
> 赞同：0
> 
> 时间：2012-11-03T01:15:16.460
> 
> 标签：php

我正在尝试运行一个从变量命名的函数。没有语法错误。不返回温度。我不确定问题出在函数本身还是 eval 上。到目前为止，评估主题的变体还没有奏效。

```
function getBtemp($lum, $sub){
    $tempsB = array(
         "V" => array( 30000, 25400, ... ),
         "III" => array( 29000, 24000, ... ),
         "I" => array( 26000, 20800, ... ) );
    if($lum == "VI"){ $lum = "V"; }
    else if($lum == "IV"){ $lum = "III"; }
    else if($lum == "II" || $lum == "Ib" || $lum == "Ia" ){ $lum = "V"; }
    return $tempsB['$lum']['$sub']; }

// Variables:

$spectralclass = "B";
$luminosityclass = "V";
$subclass = 5;

// Needed:

$temp = getBtemp($luminosityclass, $subclass);

// Functions are named from spectral class, e.g. get.$spectralclass.temp()
// Attempt:

$str = "$temp = get".$spectralclass."temp($luminosityclass, $subclass);";
eval($str); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T01:20:56.160

尝试这样做：

```
$func = 'get'.$spectralclass.'temp';

$temp = $func($luminosityclass, $subclass); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T01:21:05.460

你可能会更好地做类似的事情

```
$functionName = 'get' . $spectralclass . 'temp';
$temp = $functionName($luminosityclass, $subclass); 
```

这就是 PHP 手册所称的[“变量函数”](http://php.net/manual/en/functions.variable-functions.php)。在大多数情况下，PHP 允许您将字符串变量视为函数名，这样做比`eval`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T01:23:19.687

您需要在设置函数名称后传递参数。查看示例：

```
function getAtemp($a = 'default') {
    echo $a;
}

$name = 'Trest';
$function = 'A';

$temp = 'get' . $function . 'temp';

echo($temp('teste')); 
```

此外，从 Eric Lippert 中阅读：[Eval is Evil](http://blogs.msdn.com/b/ericlippert/archive/2003/11/01/53329.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T01:20:11.217

替换以下行：

```
$str = "$temp = get".$spectralclass."temp($luminosityclass, $subclass);"; 
```

经过

```
$str = '$temp = get'.$spectralclass.'temp($luminosityclass, $subclass);'; 
```

或者

```
$str = "\$temp = get".$spectralclass."temp(\$luminosityclass, \$subclass);"; 
```

见[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

# authentication - phpass 对来自 phpBB3 的某些密码的身份验证失败？

> ID：13205058
> 
> 赞同：0
> 
> 时间：2012-11-03T01:16:31.700
> 
> 标签：authentication, phpbb3, phpass

使用 phpass 测试程序[http://www.openwall.com/phpass/phpass-0.3.tar.gz](http://www.openwall.com/phpass/phpass-0.3.tar.gz)或 python-phpass，并使用**C?*|Y[j"KQ'%gf**作为纯文本密码, 和**$P$9kS6tD8tVxajypvJ5837.bt2emepD8/**作为哈希，执行：

```
<?php
#
# This is a test program for the portable PHP password hashing framework.
#
# Written by Solar Designer and placed in the public domain.
# See PasswordHash.php for more information.
#

require 'PasswordHash.php';

header('Content-type: text/plain');
$t_hasher = new PasswordHash(8, FALSE);
$correct2 = 'C?*|Y[j"KQ\'%gf';
$hash2 = '$P$9kS6tD8tVxajypvJ5837.bt2emepD8/';
print 'Hash: [' . $hash2 . "]\n";
print 'correct: [' . $correct2 . "]\n";

$check = $t_hasher->CheckPassword($correct2, $hash2);
if ($check)
    {
    print "Check IF THIS WORKScorrect: '" . $check . "' (should be '1')\n";
    }
else
    {
    print "IT FAILED!!!!!!!!\n\n\n";
    }
?> 
```

哈希来自 phpBB3 (3.0.10)，当我向 phpBB3 提供该密码时，它*确实*可以正常工作。

phpBB3 应该使用 phpass 本身，使用 $H$ 而不是 $P$。

此示例的 phpBB3 中的数据库条目是：

> qlc4pi000000";0;"127.0.0.1";1351902499;"testpass";"testpass";"$H$9kS6tD8tVxajypvJ5837.bt2emepD8/";1351902499;0;"tp@inva.lid.com";266402289712;"'' ";1351902544;1351902499;0;"''";"''";0;0;0;0;0;0;0;"en";0.00;0;"DM d, Y g:i a"; 2;0;"''";0;0;0;0;-3;0;0;"t";"d";0;"t";"a";0;1;0;1; 1;1;1;230271;"''";0;0;0;"''";"''";"''";"''";"''";"''";" ''";"''";"''";"''";"''";"''";"''";"''";"bf4ae169a5a21313";1;0;0

phpBB3 中使用的纯文本密码是 [C?*|Y[j"KQ'%gf] 和哈希（从 phpBB3 格式转换为 [$P$9kS6tD8tVxajypvJ5837.bt2emepD8/] （密码和哈希都在 [] 之间） )

任何人都可以阐明正在发生的事情，以及为什么这不适用于 phpass ？这是在论坛所在的同一台机器上，同样，它确实在 phpBB3 论坛上工作，所以我可以正常登录。当我直接访问 phpBB3 数据库时，我无法在外部使用 phpass 进行身份验证。它确实适用于其他帐户，但它仅适用于某些帐户失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:17:14.790

原来问题是，phpBB3 将密码转换为使用 html 转义码。

现在，一旦密码被转换，它就会匹配 phpBB3 中存储的哈希值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:46:42.343

phpBB3 最有可能将 PHP 函数[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)（没有标志）应用于密码。

[在讨论问题https://stackoverflow.com/a/12543884/1148030](https://stackoverflow.com/a/12543884/1148030)时，也注意到了 phpBoing 注意到的这一事实。

非标准标识符 $H$ 很有用。当 $H$ 存在时，实现可以知道应用转义来支持 phpBB3。

# java - 计算日期之间的天数差异

> ID：13205060
> 
> 赞同：1
> 
> 时间：2012-11-03T01:16:47.780
> 
> 标签：java, date

在我的代码中，日期之间的差异是错误的，因为它应该是 38 天而不是 8 天。我该如何解决？

```
package random04diferencadata;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Random04DiferencaData {

    /**
     * http://www.guj.com.br/java/9440-diferenca-entre-datas
     */
    public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("hh:mm dd/mm/yyyy");
        try {
            Date date1 = sdf.parse("00:00 02/11/2012");
            Date date2 = sdf.parse("10:23 10/12/2012");
            long differenceMilliSeconds = date2.getTime() - date1.getTime();
            System.out.println("diferenca em milisegundos: " + differenceMilliSeconds);
            System.out.println("diferenca em segundos: " + (differenceMilliSeconds / 1000));
            System.out.println("diferenca em minutos: " + (differenceMilliSeconds / 1000 / 60));
            System.out.println("diferenca em horas: " + (differenceMilliSeconds / 1000 / 60 / 60));
            System.out.println("diferenca em dias: " + (differenceMilliSeconds / 1000 / 60 / 60 / 24));
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T01:19:37.227

问题出在`SimpleDateFormat`变量中。月份用大写 M 表示。

尝试更改为：

```
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm dd/MM/yyyy"); 
```

有关更多信息，请参阅此[javadoc。](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

**编辑：**

如果您想按照评论的方式打印差异，这里是代码：

```
 SimpleDateFormat sdf = new SimpleDateFormat("hh:mm dd/MM/yyyy");
    try {
        Date date1 = sdf.parse("00:00 02/11/2012");
        Date date2 = sdf.parse("10:23 10/12/2012");
        long differenceMilliSeconds = date2.getTime() - date1.getTime();
        long days = differenceMilliSeconds / 1000 / 60 / 60 / 24;
        long hours = (differenceMilliSeconds % ( 1000 * 60 * 60 * 24)) / 1000 / 60 / 60;
        long minutes = (differenceMilliSeconds % ( 1000 * 60 * 60)) / 1000 / 60;
        System.out.println(days+" days, " + hours + " hours, " + minutes + " minutes.");
    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

希望这对你有帮助！

# compass-sass - 尝试放大浏览器窗口时，响应式图像变得无响应

> ID：13205062
> 
> 赞同：1
> 
> 时间：2012-11-03T01:17:20.857
> 
> 标签：compass-sass, susy-compass

不知何故，我似乎一次又一次地遇到了与 Susy 一起处理的图像矩阵示例的问题。:/ 在准备通过应用媒体查询来完成项目时，我最初检查了当前状态并调整了浏览器窗口的大小。发生了以下情况：

[https://dl.dropbox.com/u/8578/Resize.mov](https://dl.dropbox.com/u/8578/Resize.mov)

两个显示的图像矩阵都由光栅图像组成。黑色图像矩阵可以毫无问题地调整大小和放大。但是第二个矩阵再次放大有问题。这是一个普通的 CSS 问题还是更多与 Susy 相关的问题？有没有办法解决它？：/

基本的 Susy 设置是：

```
$total-columns: 24;
$column-width: 3%;
$gutter-width: 1%;
$grid-padding: 0; 
```

对于图像，应用了以下内容：

```
img{
    width:100%;
    max-width: 100%;
    height:auto !important;
} 
```

第一个矩阵的 HTML 部分如下所示（我只输入了一个 li 元素 - 其他 27 个仅在标题和链接图像上有所不同）：

```
<ul class="customers sectionwrap">
    <li><a><img title="Company" src="img/logo.png" alt="Logo" /></a></li>
</ul> 
```

第一个矩阵（7x4）的 Susy 和布局相关的 CSS 部分看起来是这样的：

```
.customers {
    @include with-grid-settings($gutter: 0.1%){
        li {
            margin-right: -100%;
            @include span-columns(2,14);
            @include nth-omega(7n);
            @for $g from 1 through 28 
            {
                &:nth-child(#{$g}){@include push(0);}   
            }   
        }
    }
} 
```

第二个矩阵的 HTML 部分如下所示（我只输入了一个 li 元素 - 其他 8 个元素仅在标题和链接图像上有所不同）：

```
<ul class="moodlegrid sectionwrap">
    <li><a class="ajax1" href="projekt1.html"><img title="Projekt1" src="img/1.jpg" alt="Projekt1" /><img title="Projekt1" src="img/2.jpg" alt="Projekt1" /><span class="spiceup">Zum Projekt</span></a></li>
</ul> 
```

第二个矩阵（3x3）的 Susy 和布局相关的 CSS 部分看起来是这样的——它们被分割了，因为它们位于不同的部分：

```
.moodlegrid{
    @include with-grid-settings($gutter: 0.8%){
        li{
            margin-right: -100%;
            @include trailer(1 / 2);
            @include span-columns(6,18);
            @include nth-omega(3n);
            @for $i from 1 through 9 
            {
                &:nth-child(#{$i}) {@include push(0);}  
            }   
        }
    }
}

.moodlegrid{
    li{
        a{
            position: relative;
            float:left;
            display:block;
            img:nth-child(1){
                float:left;
                display:block;
            }
            img:nth-child(2){
                display: none;
            }
            span{
                display:none;
            }
        }
        a:hover{    
            img:nth-child(2){
                display: block;
                position: absolute;
                z-index: 100;
                top:0;
                left:0;
            }
            span{
                display: block;
                position: absolute;
                text-align:center;
                top: 42%;
                left: 34%;
                z-index:101;
                padding: 0.24em;
                @include border-radius(5px, 5px);
                @include box-shadow(black 2px 2px 10px);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:40:15.847

我敢打赌，您的问题来自浮动`a`包装图像的标签。当您浮动某些东西时，它会创建一个新的布局上下文。如果您不设置宽度，浮动将折叠到可能的最小尺寸。您的`img`设置`width: 100%;`被认为是 100% 的折叠`a`而不是 100% 的`li`. 您可以删除浮动或设置`width: 100%;`。`a`

# python - Pygame程序执行错误

> ID：13205073
> 
> 赞同：1
> 
> 时间：2012-11-03T01:19:44.403
> 
> 标签：python, pygame

我正在制作一个 pygame 程序来动画精灵，但问题不是一个特定的错误：

```
import sys
import os
import pygame
from pygame.locals import *

pygame.init ()

WHITE = ( 255, 255, 255 )
BLACK = (   0,   0,   0 )

Surface = pygame.display.set_mode ((400, 400), 0, 32)
pygame.display.set_caption ('Animation Test')

class Processes (object):
    @staticmethod
    def load_image (imagefile):
        image = pygame.image.load (imagefile)   #Remember to call imagefile as a string statement

        return image, image.get_rect ()

class Sprite (pygame.sprite.Sprite):

    def __init__ (self):
        pygame.sprite.Sprite.__init__ (self)

        self.image, self.rect = Processes.load_image ('frame1.jpg')

        self.blindrect = pygame.Rect ((self.rect.top - 289, self.rect.left - 289), (self.rect.width, self.rect.height))

   def animation (self, key_event = None, mouse_event = None):

       blindpass = 0

       if key_event == K_LEFT:
       self.rect.centerx = self.rect.centerx - 10

       if key_event == K_RIGHT:
        self.rect.centerx = self.rect.centerx + 10

       if key_event == K_UP:
       self.rect.centery = self.rect.centery - 10

       if key_event == K_DOWN:
       self.rect.centery = self.rect.centery + 10

       if mouse_event == MOUSEBUTTONDOWN:
        self.rect.centerx, self.rect.centery = pygame.mouse.get_pos ()

    if blindpass > 0:

        if key_event == K_LEFT:
            self.blindrect.centerx = self.blindrect.centerx - 10

        if key_event == K_RIGHT:
            self.blindrect.centerx = self.blindrect.centerx + 10

        if key_event == K_UP:
            self.blindrect.centery = self.blindrect.centery - 10

        if key_event == K_DOWN:
            self.blindrect.centery = self.blindrect.centery + 10

        if mouse_event == MOUSEBUTTONDOWN:
            self.rect.centerx, self.rect.centery = pygame.mouse.get_pos () 

mecha = Sprite ()
allsprites = pygame.sprite.RenderPlain ((mecha, ))

while True:
Surface.fill (WHITE)

for event in pygame.event.get ():
    if event.type == KEYDOWN:
    mecha.animation (key_event = event.key)

    if event.type == MOUSEBUTTONDOWN:
    mecha.animation (mouse_event = event.type)

    if event.type == QUIT:
    pygame.quit ()
    sys.exit (0)

allsprites.draw (Surface)
pygame.display.update ((mecha.rect, mecha.blindrect)) 
```

现在，错误有点奇怪。输出是精灵确实出现在屏幕上，当我提供键和鼠标输入时它会移动，但问题是它会留下痕迹。这就是为什么我创建了一个矩形来跟踪精灵矩形，该矩形应该在每次游戏循环循环时用白色填充。但事实并非如此。至少，直到我最小化窗口并再次拉起它，所有的痕迹都消失了，背景变成了白色而不是黑色。但是当我移动图像时，轨迹又开始形成。我最小化，它们按预期消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:33:00.510

如果您的渲染功能这样做：

```
screen.fill(white)
# blit or sprite group drawing
pygame.display.flip() 
```

它将整个屏幕清除为白色，绘制一次精灵。不会有踪迹的。

*   您的代码未正确粘贴。f 就像你的 if QUIT 语句没有缩进一样，对于一个多语句。与 Sprite 类相同
*   如果您使用 Surface 或 Sprite 作为类/变量名称，您可能会遇到命名问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:11:52.080

1.  您没有正确初始化和更新盲区。这就是为什么屏幕的正确部分没有更新并且您的精灵留下痕迹的原因。
2.  在您的更新循环中，由于您只更新显示更改的部分，因此您需要更新整个屏幕一次以在进入更新循环之前对其进行初始化。这就是为什么屏幕最初不是白色的原因。

请参阅下面的更新源（仅 Sprite 类和后来被修改）：

```
class Sprite (pygame.sprite.Sprite):
    def __init__ (self):
        pygame.sprite.Sprite.__init__ (self)
        self.image, self.rect = Processes.load_image ('frame1.jpg')
        #initialize blindrect to be the same rectangle as rect
        self.blindrect = pygame.Rect ((self.rect.top, self.rect.left), (self.rect.width, self.rect.height))

    def animation (self, key_event = None, mouse_event = None):
        print(self.rect)
        print(self.blindrect)

        #save the current sprite position before moving the sprite
        self.blindrect.centerx = self.rect.centerx
        self.blindrect.centery = self.rect.centery

        if key_event == K_LEFT:
            self.rect.centerx = self.rect.centerx - 10

        if key_event == K_RIGHT:
            self.rect.centerx = self.rect.centerx + 10

        if key_event == K_UP:
            self.rect.centery = self.rect.centery - 10

        if key_event == K_DOWN:
            self.rect.centery = self.rect.centery + 10

        if mouse_event == MOUSEBUTTONDOWN:
            self.rect.centerx, self.rect.centery = pygame.mouse.get_pos ()

        print(self.rect)
        print(self.blindrect)

mecha = Sprite ()
allsprites = pygame.sprite.RenderPlain ((mecha, ))

#need to initially fill the entire surface with white
Surface.fill (WHITE)
pygame.display.update ((pygame.Rect((0,0),(400,400))))

while True:
    Surface.fill (WHITE)

    for event in pygame.event.get ():
        if event.type == KEYDOWN:
            mecha.animation (key_event = event.key)

        if event.type == MOUSEBUTTONDOWN:
            mecha.animation (mouse_event = event.type)

        if event.type == QUIT:
            pygame.quit ()
            sys.exit (0)

    allsprites.draw (Surface)
    #update only the previous sprite position and new sprite position
    pygame.display.update ((mecha.rect, mecha.blindrect)) 
```

# php - 从 Mysql 数据库自动创建 PHP 脚本？

> ID：13205077
> 
> 赞同：-1
> 
> 时间：2012-11-03T01:20:23.743
> 
> 标签：php, mysql, phpmyadmin

是否有任何免费站点/软件可以采用 MYSQL 数据库结构并自动生成 html 表单以及用于插入、修改和删除的 php 代码。

几年前我用它来快速开发原型。

===========================

# **这在下面对我有用。**2012年11月5日

更新：使用这个：[http](http://www.turningturnip.co.uk/free-mysql-php-generator/generator.php) ://www.turningturnip.co.uk/free-mysql-php-generator/generator.php用这个链接创建了这个：[http ://www.turningturnip.co.uk/free-mysql- php-generator/web-code-creator.php](http://www.turningturnip.co.uk/free-mysql-php-generator/web-code-creator.php)

```
CREATE TABLE `test` (
`id` int(6) NOT NULL auto_increment,
`firstname` varchar(255) NOT NULL default '',
        `lastname` varchar(255) NOT NULL default '',
        `ssn` varchar(255) NOT NULL default '',
        PRIMARY KEY  (`id`),
UNIQUE KEY `id` (`id`)
)
ENGINE=MyISAM AUTO_INCREMENT=1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:01:41.050

这称为 CRUD，几乎每个现代框架都有。

根据您的需要 - 您可以选择：

*   Symfony2 + Doctrine2 - 它将为您提供非常灵活的代码库，但代码中会有一些冗长并且相对难以学习，但是如果您只是制作一些类似管理员的界面，我认为您不需要如此复杂的框架.

*   Symfony2 + Propel2 - 几乎和上面一样，但是当 Doctrine 是 Data Mapper 时，Propel 实现了 Active Record 模式。

*   Yii - 也需要一些学习，但比 Symfony2 简单得多。

*   CakePHP - 也可以使用`bake`命令生成 CRUD（又名脚手架）。

*   Codeigniter - 非常简单的 php 框架（实际上是最简单的），可以通过 GroceryCrud 生成 crud。

所有这些框架（或集成在其中的 ORM）都可以进行数据库逆向工程（从数据库生成模型）并从模型创建 crud。但这些并不是所有存在的工具。

您还可以查看 phpmyadmin（或任何其他使用数据库的工具）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:20:02.557

这可能符合要求，它基于 CodeIgniter 并且有据可查：

[http://www.grocerycrud.com/](http://www.grocerycrud.com/)

# python - 计算对数，为什么这个算法效率不高，如何提高效率？

> ID：13205078
> 
> 赞同：2
> 
> 时间：2012-11-03T01:20:39.950
> 
> 标签：python, algorithm

我想知道是否可以在不实际使用`log()`. 我设法做到了，但我不相信它非常有效。

这是我在 Python 中的代码：

```
def myLog(x,b):
    exp=0
    ans=b**exp
    while x!=ans:
        ans=b**exp
        if ans==x:
            return exp
        exp=exp+1 
```

所以我可以给它`myLog(16,2)`，它应该返回 4。确实如此，但是我相信这不是最有效的方法，所以我该如何修复它并使我的代码更高效，不仅在这种情况下，而且在大多数情况下他们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T01:30:27.393

尝试递归：

```
def func(a, b, ans=0):
    if a/b == 1:
        return ans + 1
    else: return func(a/b, b, ans+1)

In [26]: func(16, 2)
Out[26]: 4

In [27]: func(8, 2)
Out[27]: 3

In [28]: func(16,4)
Out[28]: 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:52:02.200

您没有考虑是否有人给出负值，例如 myLog(-1,2) 或者如果它是 1 myLog(1,2)，那么您在循环之前计算 ans，您知道它始终为 0，因为您将exp = 0，然后在循环中再次计算它而不更改exp。

[对数](/questions/tagged/logarithm "显示标记为“对数”的问题") [蟒蛇](/questions/tagged/python "显示标记为“python”的问题")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T20:01:00.130

假设：

```
x: a positive integer
b: a positive integer; b >= 2
returns: log_b(x), or, the logarithm of x relative to a base b. 
```

似乎最短的方法是：

```
def myLog(x, b):
    ans = 0
    while b <= x:
        ans += 1
        x /= b
    return ans 
```

或递归：

```
def myLog(x, b):
    if (b > x): return 0
    else: return 1 + myLog(x/b, b) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T01:29:14.097

这是我的两分钱：

```
def myLog(x,b):
    exp = 0
    ans = 1
    while ans<x:
        ans *= b
        exp += 1
    if ans == x:
        return exp  
    else:
        raise ValueError("can't find a suitable exponent")

In [10]: myLog(16,2)
Out[10]: 4 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-20T05:05:25.047

```
 def log(a, b):
b = float(b)
a = float(a)
g = a
n = 0
i = 1
while b**i != 1:
    while g >= b**i:
        g /= b**i
        n += i
    i /= b
return n 
```

不适用于所有数字。log(5,10) 在应该为 0.69897 时返回 0.00000

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T01:26:40.870

因为它是一个[无限循环](http://en.wikipedia.org/wiki/Infinite_loop)：

```
def myLog(x,b):
    exp = 0
    ans = b**exp
    while x != ans:
        ans = b**exp
        if ans>x:
            return -1
        if ans == x:
            return exp
        exp = exp+1 
```

也可以看看：

*   *[计算机使用什么算法来计算对数？](https://math.stackexchange.com/questions/61209/what-algorithm-is-used-by-computers-to-calculate-logarithms)*

*   *[泰勒级数](http://en.wikipedia.org/wiki/Taylor_series)*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-30T23:20:15.583

此版本增加了对非整数输出的支持：

```
def log(a, b):
    b = float(b)
    a = float(a)
    g = a
    n = 0
    i = 1
    while b**i != 1:
        while g >= b**i:
            g /= b**i
            n += i
        i /= b
    return n 
```

# c - 预处理器宏定义是否需要在头文件的 CAPS 中？

> ID：13205079
> 
> 赞同：1
> 
> 时间：2012-11-03T01:20:42.197
> 
> 标签：c, macros, c-preprocessor, header-files, definition

在我正在编写的代码中，我被告知以以下方式在头文件中定义一个变量：

```
#define CLR_BLACK 0x0000 
```

由于这是我得到的唯一示例，我想知道是否所有使用#define 命令在头文件中定义的变量都需要大写。例如，以下内容是否有效？

```
#define videoBuffer (u16*)0x6000000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T01:21:47.110

**不可以。**您可以使用字母数字字符和下划线的任意组合。不要以数字开头。

但是，变量名称之类的变量`videoBuffer`很难与常规变量区分开来（没有语法着色）。这就是为什么大多数人要么对预处理器宏使用全部大写，要么以小写开头`k`，如下所示：`kMyPreprocessorMacro`

编辑：顺便说一句（正如您标记的那样），这些不是“全局变量”。它们是预处理器宏。基本上是在编译时运行的自动查找和替换机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:48:04.090

不，但这是一种常见且有用的约定，因此如果您正在阅读代码，您可以看到什么是宏，什么不是。有关包含文件，请参阅[C++ #ifndef，为什么头文件都使用大写字母？](https://stackoverflow.com/questions/3799478/c-ifndef-for-include-files-why-is-all-caps-used-for-the-header-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T01:26:21.540

不。

`#define`是一个预处理器宏。它用字符串之后的任何内容替换它之后的第一个字符串的每次出现。第一个字符串不需要大写。

# webcam - 有哪些 p2p 技术？

> ID：13205083
> 
> 赞同：-1
> 
> 时间：2012-11-03T01:21:27.207
> 
> 标签：webcam, p2p, rtmfp

我想为我的雇主开发一个基于 Web 的应用程序。该应用程序将允许用户使用他们的网络摄像头面对面聊天。[我真的对 rtmfp 很感兴趣，直到根据http://www.adobe.com/devnet/adobe-media-server/articles/p2p_rtmfp_groups.html](http://www.adobe.com/devnet/adobe-media-server/articles/p2p_rtmfp_groups.html)发现它只适用于一种或两种方式的会议，这意味着只有两种人们将能够像聊天一样互相聊天。但我想要一个多路会议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:52:13.900

您可能想看看 WebRTC。我还没有尝试过，但这是我知道的第一个多用户演示：[https ://github.com/webRTC/webRTC.io](https://github.com/webRTC/webRTC.io)

有关它的一些讨论（以及我如何知道该项目）可以在[https://groups.google.com/d/topic/discuss-webrtc/26UNDNm-q0w/discussion的 webrtc-discuss Google Group 中找到](https://groups.google.com/d/topic/discuss-webrtc/26UNDNm-q0w/discussion)

有关一般 WebRTC 的更多信息，另请参阅：

*   [http://www.webrtc.org/](http://www.webrtc.org/)
*   [http://en.wikipedia.org/wiki/WebRTC](http://en.wikipedia.org/wiki/WebRTC)
*   [http://www.html5rocks.com/en/tutorials/webrtc/basics/](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

祝你的项目好运！

# class - Mootools 扩展 mutator，从嵌套对象中的函数调用 this.parent

> ID：13205088
> 
> 赞同：1
> 
> 时间：2012-11-03T01:22:07.203
> 
> 标签：class, inheritance, mootools

下面是一个如何使用 Extends mutator 的简单示例：

```
var firstClass = new Class({
    aMethod: function(){
        console.log('firstClass method');
    }
});

var secondClass = new Class({
    Extends:firstClass,
    aMethod: function(){
        this.parent();
        console.log('secondClass method');
    },
    initialize: function(){
        this.aMethod();
    }
});

var instance = new secondClass();

//Output:
//      firstClass method
//      secondClass method 
```

我想实现相同的行为，但使用这样的类构造函数：

```
var firstClass = new Class({
    methods: {
        aMethod: function(){
            console.log('firstClass method');
        }
    }
});

var secondClass = new Class({
    Extends:firstClass,
    methods: {
        aMethod: function(){
            this.parent();
            console.log('secondClass method');
        }
    },

    initialize: function(){
        this.methods.aMethod.call(this);
    }
});

var instance = new secondClass();

//Output:
//      Error: The method "initialize" has no parent.

instance.methods.aMethod.call(this);

//Output:
//      TypeError: this.parent is not a function 
```

不幸的是，我的 Mootools Fu 不是很强大，所以我有点不知所措。这可能与 Extends 当前的工作方式有关吗？如果不是，那么我想努力实现一个解决方案来做到这一点，但是我需要一些指导来让我朝着正确的方向开始（制作一个自定义的 Mutator？修改核心源？还有别的吗？）。任何关于如何进行的建议或想法将不胜感激。

**更新**

我想出了一种使用基于模式的突变器（[Github](https://github.com/keeto/mootools-pattern-mutators)）来做到这一点的方法。需要包含 Mark 的代码才能使以下工作：

```
(function(){

    /* Utility functions */

    Object.extend({
        containsMethods:function(obj){
            if(typeOf(obj) != 'object') return false;
            return Object.getLength(Object.filter(obj, function(item){return typeOf(item) == 'function';})) > 0;
        },

        containsObjects:function(obj){
            if(typeOf(obj) != 'object') return false;
            return Object.getLength(Object.filter(obj, function(item){return typeOf(item) == 'object';})) > 0;
        }
    });

    var getInheritance = function(obj, key){
        var temp = {};
        if(obj){
            if(obj.inheritance !== undefined){
                temp[key] = obj.inheritance;
            }
            delete obj.inheritance;
        }
        return temp;
    }

    /* Recursive function to turn specially keyed object literals in the constructor into class instances with inheritance */

    var classify = function(obj, inherit, key, imap){
        if(typeOf(obj) != 'object'){return obj;}

        if(key == undefined){
            key = '';
        }

        var inheritance = 'extends';

        if(imap != null){
            imap = Object.append(imap, getInheritance(obj, key));
            imap = Object.append(imap, getInheritance(inherit, key));

            if(imap[key] != undefined){
                inheritance = imap[key];
            }
        }

        var i = 'extends';

        for(var k in inherit){
            if(!inherit.hasOwnProperty(k)) {continue;}

            i = 'extends';

            if(imap != null){

                if(typeOf(inherit[k]) == 'object'){
                    imap = Object.append(imap, getInheritance(inherit[k], k));
                }

                if(typeOf(obj[k]) == 'object'){
                    imap = Object.append(imap, getInheritance(obj[k], k));
                }                   

                if(imap[k] != undefined){
                    i = imap[k];
                }
            }

            /* Needed to clean up properties when inheritance == false */
            if(inherit[k] === undefined){
                delete inherit[k];
            }

            if(typeOf(inherit[k]) == 'object' && i === false && !Object.keys(obj).contains(k)){
                obj[k] = undefined;
                continue;
            }

            if(obj[k] && typeOf(obj[k]) == 'object' && i !== false){
                obj[k] = classify(obj[k], inherit[k], k, imap);
            }
        }

        if(Object.containsMethods(obj)){
            var constructor = {};

            if(inherit != undefined && inheritance !== false){

                if(inheritance == 'implements'){
                    constructor.Implements = (inherit.$constructor ? inherit.$constructor : new Class(inherit));
                }else {
                    constructor.Extends = (inherit.$constructor ? inherit.$constructor : new Class(inherit));
                }
            }

            obj = new (new Class(Object.append(constructor, obj)));

        }else {

            if(!Object.containsMethods(inherit)){
                obj = Object.append({}, inherit, obj);
            }
        }

        return obj;
    };

    /* Mutator */

    Class.defineMutator(/^_(\w+)_/, function(params, key){
        var old_key = key;
        var key = key.replace(/_/g, "");
        var c = null;
        var imap = null;

        if(this.$constructor){
            imap = this.$constructor.imap = (this.$constructor.imap || {});
        }

        if(this.prototype[key] != undefined){
            c = classify.call(this, params, this.prototype[key], '', imap);
        }else {
            c = classify.call(this, params, undefined, '', imap);
        }

        this.prototype[key] = c;
        delete this[old_key];
    });

})(); 
```

mutator 模式只是一个用单个下划线包围的键名（例如：**_*方法*_**）。类构造函数中的嵌套对象可以包含属性和方法或其他嵌套对象的任意组合。每个单独的对象都可以有一个带有键“继承”的属性，该属性采用以下值：“实现”、“扩展”或 false。Implements 和 extends 对应于 Implements 和 Extends Mootools 类修改器的行为。Extends 是默认值，并且是在没有为继承属性提供任何内容时使用的方法。false 值将阻止给定对象（以及嵌套在其中的任何对象）完全被继承。

包括示例在内的整个代码可以在[这里找到](https://gist.github.com/4013880)

# html - td宽度问题内的多个输入字段

> ID：13205096
> 
> 赞同：1
> 
> 时间：2012-11-03T01:23:19.887
> 
> 标签：html, css, google-chrome, input, html-table

看这张表：

```
<div style="position: absolute; right:0; top:0; width:100px;">
    <table style="width: 100%; border-bottom: white 1px solid">
      <tr>
        <td>X:</td>
        <td><input type="text" style="width:100%"/></td>
        <td>Y:</td>
        <td><input type="text" style="width:100%"/></td>
        <td>Z:</td>
        <td><input type="text" style="width:100%"/></td>
      </tr>
    </table>
</div> 
```

[http://jsfiddle.net/MDLMz/2/](http://jsfiddle.net/MDLMz/2/)

Firefox 中的输入字段宽度相等，但 Chrome 中右侧和中间的宽度较小。

我不知道会发生这种情况，没有任何线索。

您知道在 Chrome 中解决此问题的任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:22:00.970

我已经解决了这个问题，我不应该不回答它。有人可能会发现这个答案很有用。

问题是关于 webkit 如何呈现顺序。如果我将宽度保留为自动，则首先呈现的表格单元格大于之后的一个。

Firefox 和 Opera 解析整个表格，而不是平均分配可用宽度。我认为这是正确的方法。

Chrome 修复是对表格中的每个元素使用百分比。不要留下任何自动值。

```
<table style="width: 100%">
      <tr>
        <td style="width:10%">X:</td>
        <td><input type="text" style="width:90%"/></td>
      </tr>
</table> 
```

现在没有必要放弃表格或使用绝对像素大小。

# ios - 使用 UINavigationController 视图

> ID：13205100
> 
> 赞同：0
> 
> 时间：2012-11-03T01:23:52.587
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller, uinavigationbar

我想更好地了解 UINavigationController 的使用。

我已经设置了一个带有 UINavigationViewController 的新项目，以及另外两个视图控制器。

在我的应用程序委托中，我有以下内容：

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];

firstViewController = [[NCTFirstViewController alloc] initWithNibName:@"NCTFirstViewController" bundle:nil];
navController = [[NCTNavViewController alloc] initWithRootViewController:firstViewController];

self.window.rootViewController = self.navController;

[self.window makeKeyAndVisible]; 
```

在我的 UINavigationController.m 文件中，我可以设置标题和设置按钮，但这不起作用。

这仅在我在实际视图控制器本身中设置 self.navigtionController 项目时才有效。这是正确的，还是我应该在 UINavigationController 中做些什么来让它工作。

理想情况下，我正在寻找一个 UINavigationController 来处理所有向其他控制器的推送。从长远来看，它将被用作菜单系统。因此，如果用户单击顶部的按钮，他们将被推送到一个新的视图控制器，但没有返回选项，只是顶部导航栏中的相同菜单项，它显示了一个新的中心视图控制器。

我遇到的问题是了解这是如何设置的。如果我必须在视图控制器本身中设置它，它们是否都不会复制相同的代码。当然，我可以在 AppDelegate 中设置所有“运动”，但这似乎不正确，并且会打包 App Delegate 本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:08:52.933

如果您查看[UINavigationController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)，它会说（重点由我添加，但您应该阅读所有内容，以便了解它是如何工作的）：

> **更新导航栏**
> 当用户更改顶级视图控制器时，无论是通过推送或弹出视图控制器还是直接更改导航堆栈的内容，导航控制器都会相应地更新导航栏。具体来说，导航控制器会更新显示在三个导航栏位置中的栏按钮项：左、中和右。条形按钮项是 UIBarButtonItem 类的实例。您可以根据需要创建具有自定义内容的项目或创建标准系统项目。有关如何创建条形按钮项的更多信息，请参阅 UIBarButtonItem 类参考。
> 
> 导航栏左侧的栏按钮项允许导航回导航堆栈上的前一个视图控制器。导航控制器更新导航栏左侧如下：
> 
> *   如果新的顶级视图控制器有一个自定义的左栏按钮项，则显示该项。要指定自定义左栏按钮项，请设置视图控制器导航项的 leftBarButtonItem 属性。
> *   如果顶级视图控制器没有自定义左栏按钮项，但前一个视图控制器的导航项在其 backBarButtonItem 属性中具有有效项，则导航栏会显示该项。
> *   如果任何一个视图控制器都没有指定自定义条形按钮项，则使用默认的后退按钮并将其标题设置为前一个视图控制器的 title 属性的值——即视图控制器向下一层堆栈。（如果导航堆栈上只有一个视图控制器，则不会显示返回按钮。）
> 
> 导航控制器更新导航栏中间如下：
> 
> *   如果新的顶级视图控制器具有自定义标题视图，导航栏将显示该视图以代替默认标题视图。要指定自定义标题视图，请设置视图控制器导航项的 titleView 属性。
> *   如果没有设置自定义标题视图，***导航栏会显示一个包含视图控制器默认标题的标签。这个标签的字符串通常是从视图控制器本身的标题属性中获得的。***如果要显示与视图控制器关联的标题不同的标题，请改为设置视图控制器导航项的标题属性。
> 
> 导航控制器更新导航栏右侧如下：
> 
> *   如果新的顶级视图控制器具有自定义右栏按钮项，则显示该项。要指定自定义右栏按钮项，请设置视图控制器导航项的 rightBarButtonItem 属性。
> *   如果未指定自定义右栏按钮项，则导航栏右侧不显示任何内容。
> 
> 每次顶视图控制器更改时，导航控制器都会更新导航栏。因此，每次将视图控制器推入堆栈或从中弹出时，都会发生这些更改。当您为 push 或 pop 操作设置动画时，导航控制器类似地为导航栏内容的更改设置动画。

所以，要做你想做的事，你需要在每个视图控制器中设置标题和按钮。设置标题最简单的方法是在 storyboard/xib 中设置，或者在创建时在代码中设置。

您还应该**替换**根视图控制器，而不是将视图控制器推送到导航堆栈上，这样您就不会一直将视图控制器添加到堆栈中。这也避免了显示后退按钮，并且您不需要明确摆脱它。您可以使用以下`setViewControllers:animated:`方法来执行此操作：

```
[self.navigationController setViewControllers:[NSArray arrayWithObject:theNewViewController] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:06:03.380

只有一个 NavigationController，这个 NavigationController 控制着所有的 ViewController。所以 barButtonItems 和 title 是在每个 ViewController 中设置的，你不应该直接将它们设置为 NavigationController。

如果你想推送一个新的 ViewController 而不会推回，我认为这可能会导致一些问题，因为 NavigationController 正在使用 Stack 来处理所有的 ViewController。似乎您会将 ViewController 推入堆栈但不会弹出它，也许您会得到一些您不想要的行为。

如果您仍然想实现这一点，我认为您无法避免在不同的 ViewController 中进行类似的设置。

# javascript - 将事件处理程序附加到 twitter 引导弹出窗口中的按钮

> ID：13205103
> 
> 赞同：26
> 
> 时间：2012-11-03T01:25:05.853
> 
> 标签：javascript, jquery, twitter-bootstrap, event-handling, popover

我正在使用 twitter 引导弹出框，

在弹出窗口中，我添加了一个按钮，

我需要将`click`处理程序附加到按钮，但弹出框的工作方式是每次显示它删除并重新创建元素，而不是仅仅显示/隐藏它，因此删除我与所述按钮关联的任何事件处理程序。

我正在使用自己的按钮版本创建几个弹出框，因此仅将一个类应用于弹出框是行不通的（除非我为每个弹出框生成不同的类：/），按钮可能有也可能没有它自己的 ID ，因此无法申请 ID。

如何将事件处理程序应用于 twitter bootstrap popover 内容中的某些内容？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-08T19:15:32.493

我遇到了同样的问题，在我的情况下，`$(body).on('click')`解决方法不起作用，因为应用程序有很多点击按钮。

我做了以下操作。这样，我们可以将委托事件的范围限制为仅弹出元素的父级。

```
$('a.foo').popover({
    html: true,
    title: 'Hello',
    placement: 'bottom',
    content: '<button id="close-me">Close Me!</button>'
}).parent().delegate('button#close-me', 'click', function() {
    console.log('World!');
}); 
```

JS 小提琴：http: [//jsfiddle.net/dashk/5Yz7z/](http://jsfiddle.net/dashk/5Yz7z/)

PS 我`Backbone.View`在我的应用程序中使用了这种技术。这是 Fiddle 中的代码片段，以防您也使用它`Backbone.js`...：http: [//jsfiddle.net/dashk/PA6wY/](http://jsfiddle.net/dashk/PA6wY/)

已编辑在 Bootstrap 2.3 中，您可以指定将添加弹出框的目标容器。现在，除了使用 .parent() 定位器，您还可以专门监听容器的事件...这可以使监听器更加具体（想象创建一个仅存在以包含弹出框的 DIV。）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-03T02:11:45.077

这应该这样做。这将处理在具有 .popover 类的元素内创建的任何现有和未来的按钮元素：

```
$('body').on('click', '.popover button', function () {
    // code here
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-06T14:12:25.067

对我有用的非常简单的解决方案是：

```
// suppose that popover is defined in HTML
$('a.foo').popover(); 

// when popover's content is shown
$('a.foo').on('shown.bs.popover', function() {
    // set what happens when user clicks on the button
    $("#my-button").on('click', function(){
        alert("clicked!!!");
    });
});

// when popover's content is hidden
$('a.foo').on('hidden.bs.popover', function(){
    // clear listeners
    $("#my-button").off('click');
}); 
```

为什么会这样：基本上popover的内容在popover打开之前没有监听器。

当显示 popover 时，bootstrap 会触发它的 event `shown.bs.popover`。我们可以在这个事件上附加一个事件处理程序来`$(a.foo)`使用 jQuery`on`方法。因此，当显示弹出框时，将调用处理程序（回调）函数。在此回调中，我们可以将事件处理程序附加到弹出框的内容 - 例如：当用户单击弹出框内的此按钮时会发生什么。

关闭弹出框后，最好删除所有附加到弹出框内容的处理程序。这是通过处理程序完成的，它使用 jQuery方法`hidden.bs.popover`删除处理程序。`.off`这可以防止弹出框内的事件处理程序在再次打开弹出框时被调用两次（甚至更多）......

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-26T18:53:44.877

只是为了稍微更新[DashK](https://stackoverflow.com/users/386779/dashk)的非常好的答案：从 jQuery 1.7 开始，.delegate() 已被 .on() 取代（请参阅[此处](https://api.jquery.com/delegate/)）。

```
$('a.foo').popover({
    html: true,
    title: 'Hello',
    placement: 'bottom',
    content: '<button id="close-me">Close Me!</button>'
}).parent().on('click', 'button#close-me', function() {
    console.log('World!');
}); 
```

在此处查看 jsfiddle：http: [//jsfiddle.net/smingers/nCKxs/2/](http://jsfiddle.net/smingers/nCKxs/2/)

在将 .on() 方法链接到 $('a.foo'); 时，我也遇到了一些问题。如果您遇到此类问题，请尝试将其添加到文档、正文或 html 中，例如：

```
$('a.foo').popover({
    html: true,
    title: 'Hello',
    placement: 'bottom',
    content: '<button id="close-me">Close Me!</button>'
});

$('body').on('click', 'button#close-me', function() {
    console.log('World!');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-29T15:31:54.430

```
$('.btn-popover').parent().delegate('button#close-me','click', function(){
  alert('Hello');
}); 
```

如果在静态 html 中设置了数据属性，则上述方法可以正常工作。谢谢 ：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-16T21:15:01.613

如果您在弹出框的内容中添加更复杂的结构，例如外部组件，您可能会遇到麻烦。对于这种情况，这应该可以解决问题。

```
var content = $('<button>Bingo?</button>');
content.on('click', function() {
    alert('Bingo!')
});

$('a.foo').popover({
    html: true,
    content: content
}).on('hidden.bs.popover', function() {
    content.detach(); # this will remove content nicely before the popover removes it
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-03T20:42:52.203

试试这个

```
var content = function() {
    var button = $($.parseHTML("<button id='foo'>bar</button>"));
    button.on('click', '#foo', function() {
        console.log('you clicked me!');
    } );
    return button;
};

$( '#new_link' ).popover({
    "html": true,
    "content": content,
}); 
```

# c# - 从列表或数据集中设置checkedlistbox中的选中项

> ID：13205105
> 
> 赞同：5
> 
> 时间：2012-11-03T01:25:25.707
> 
> 标签：c#, winforms, dataset, checkedlistbox, checklistbox

我有一个 CheckedListBox，我想检查另一个列表中的所有项目。此代码不起作用，因为 CheckedItems 属性是只读的并且类型不匹配，但它给出了我想要做的最好的想法。

```
 checkedListBox1.DataSource = DataSetSelectAll().Tables[0];
    checkedListBox1.ValueMember = "id_table";
    checkedListBox1.DisplayMember = "name";

    List<tableClass> list = MyCheckedList();
    checkedListBox1.CheckedItems = list; 
```

我知道这是错误的，但不知道如何更好地解释它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T07:01:25.417

像这样一次设置（检查）许多项目是不可能的，checkedListBox1.CheckedItems = list;

更好的是，您可以使用**for 循环，**例如：

```
List<tableClass> list = MyCheckedList();
for (int count = 0; count < checkedListBox1.Items.Count; count++)
{
  if (list.Contains(checkedListBox1.Items[count].ToString()))
  {
    checkedListBox1.SetItemChecked(count, true);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T15:22:24.553

安迪的回答是对的，但我有一个更简单的解决方案。我的解决方案适用于 Windows 应用程序。

```
DataTable dt = MyCheckedList();
foreach (DataRow dr in dt.Rows)
{
      for (int i = 0; i < checkedListBox1.Items.Count; i++)
       {
          if (dr["valueMember"].ToString() == ((DataRowView)checkedListBox1.Items[i])[0].ToString())
            {
                checkedListBox1.SetItemChecked(i, true);
            }
       }
} 
```

**注意：** `dt`必须填写一个包含所有已检查列表值的数据表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-26T18:28:08.743

我不知道为什么，但我`SetItemChecked(index, tf)`没有给我想要的东西。这就是我解决它的方法 - 明确设置 CheckedState。

```
for (int i = 0; i < myCheckedListBox.Items.Count; i++)
{
    if (boolList[i])
    {
        myCheckedListBox.SetItemCheckState(i, CheckState.Checked);
    } else
    {
        myCheckedListBox.SetItemCheckState(i, CheckState.Unchecked);
    }
} 
```

# c++ - 在 DLL 中哪里调用 LoadLibrary？

> ID：13205108
> 
> 赞同：4
> 
> 时间：2012-11-03T01:26:02.180
> 
> 标签：c++, c, windows, dll

我正在制作一个使用 LoadLibrary 动态加载另一个 DLL (winsock) 的 DLL。我读到我不应该在 DllMain 中调用 LoadLibrary，但是我反复使用它，并且不想每次使用时都调用 LoadLibrary/GetProcAddress。所以我的问题是：

*   在 DLL 中调用 LoadLibrary 的最佳位置在哪里？

*   LoadLibrary/GetProcAddress 有多快？在每个函数中这样做是否有很多开销？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T01:46:51.280

创建一个在 DllMain 之外进行设置的初始化函数。您的代码在加载 DLL 后调用该函数，然后它可以调用完成初始化所需的任何内容。

调用 LoadLibrary() 应该只执行一次。这是昂贵的，因为操作系统必须确保在继续之前加载所有依赖项，并在进程中保留空间。如果 DLL 已经加载，这比必须从磁盘加载要快得多。

GetProcAddress() 实际上也应该每个函数只调用一次（理想情况下）。该函数必须遍历 DLL 的导出表并按名称定位函数。这涉及到字符串比较来定位地址。您想缓存该地址以供以后使用，以便下次直接调用它。

# visual-studio-2012 - 使用数据库项目在 tfsbuild 中构建错误

> ID：13205117
> 
> 赞同：23
> 
> 时间：2012-11-03T01:27:27.280
> 
> 标签：visual-studio-2012, tfsbuild, database-project

我已经在 TFS Build 中设置了我的[.NET项目。](http://en.wikipedia.org/wiki/.NET_Framework)它在本地构建良好，但我在服务器上收到此构建错误：

> 未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\SSDT\Microsoft.Data.Tools.Schema.SqlTask​​s.targets”。确认 <Import> 声明中的路径正确，并且该文件存在于磁盘上。

我不知道它是什么，即使谷歌搜索也没有多大帮助。我的解决方案有一些数据库项目。这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T01:34:58.780

您需要在**所有****[构建代理](http://msdn.microsoft.com/en-us/library/bb399135.aspx)**[上安装SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)。在安装 TFS 构建服务器时，人们通常会在该机器或其他机器上创建代理。

您可以从[MS SQL Server Data Tools 博客](http://blogs.msdn.com/b/ssdt/archive/2012/09/14/now-available-sql-server-data-tools-september-2012-update.aspx)或[Microsoft SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/hh297027)下载它们，然后选择与您所做的构建相对应的一个（Visual Studio 2010 或 Visual Studio 2012）。

注意：在某些情况下，错误会提到路径：
`c:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\TeamData\Microsoft.Data.Schema.SqlTasks.targets`
在这种情况下，请从 SQL 安装中安装 SQL Server Data Tools，而不是上面的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-22T01:54:16.757

我通过添加不构建 SQLPROJ 的新解决方案配置解决了类似的问题。然后，我配置了 CI-CD（Azure DevOps Pipelines）来构建该配置。在构建的后续步骤中，我专门构建和打包 SQLPROJ。通过这个我避免了两个解决方案 - 其中一个只会在项目中使用；SQL 项目。

![Visual Studio 配置管理器 - 具有新的活动配置，不包括 DB SQLPROJ 项目的构建](../Images/af5a30d3d4bbcfd6b76f3888e0cff62b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-07T11:06:25.497

很长一段时间以来，我们已经使用[ReadyRoll.MSBuild](https://www.nuget.org/packages/ReadyRoll.MSBuild/) NuGet 包。ReadyRoll 不再是 ReadyRoll 的事件，它仍在定期更新并与最新的 SCA 插件一起工作。它包含相同的构建扩展，并且可以在我们的构建代理上完美运行，无需安装任何东西。最大的问题是 .sqlproj 文件中没有 nuget 支持，这使得添加/更新包有点棘手：[https ://documentation.red-gate.com/rr1/installing/build-components](https://documentation.red-gate.com/rr1/installing/build-components)

SQL 变更自动化文档不包含此部分，因此很难确定它会保持多长时间。

为了完整起见，从今天开始添加到您的 .sqlproj 的属性：

```
<ReadyRollNuGetBaseFolder>$(MSBuildThisFileDirectory)..\packages</ReadyRollNuGetBaseFolder>
<ReadyRollNuGetIsRestored Condition="$([System.IO.Directory]::GetDirectories($(ReadyRollNuGetBaseFolder), 'ReadyRoll.MSBuild.*').Length) != 0">True</ReadyRollNuGetIsRestored>
<SqlChangeAutomationTargetsPath Condition="$(ReadyRollNuGetIsRestored) == 'True'">$([System.IO.Directory]::GetDirectories($(ReadyRollNuGetBaseFolder), 'ReadyRoll.MSBuild.*')[0])\tools\ReadyRoll.Data.Schema.SSDT.targets</SqlChangeAutomationTargetsPath> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T16:46:38.440

如果 Azure DevOps 管道构建代理出现此问题，请在管道 YML 任务中使用 MSBuild@1 而不是 DotNetCoreCLI@2。它对我有用。

```
- task: MSBuild@1
  displayName: 'Build SQL solution'
  inputs:
    solution: <SQL DB Solution>.sln
    msbuildArchitecture: x64
    msbuildArguments: '/property:DSP="Microsoft.Data.Tools.Schema.Sql.SqlAzureV12DatabaseSchemaProvider"'
    configuration: 'release' 
```

# php - 文本框codeigniter中的自动完成值

> ID：13205119
> 
> 赞同：0
> 
> 时间：2012-11-03T01:27:50.010
> 
> 标签：php, javascript, html, ajax, codeigniter

我已经完成了控制自动完成，但是我在用 jquery 发布数据时遇到了问题。

```
<input type="text" id="matakuliah" class="med" name="matakuliah">
<script type="text/javascript">
        $(this).ready( function() {
            $("#matakuliah").autocomplete({
                minLength: 1,

                source:
                function(req, add){
                    $.ajax({
                        url: "<?php echo site_url('bahanAjar/lookup'); ?>",
                        dataType: 'json',
                        type: 'POST',
                        data:req,
                        success:   
                        function(data){
                            if(data.response =="true"){
                                add(data.message);
                            }
                        },
                    });
                },

            });
        });
</script> 
```

在我的控制器上

```
function lookup(){
        // process posted form data (the requested items like province)
        $keyword = $this->input->post('term');

        $data['response'] = 'false'; //Set default response
        $query = $this->matakuliah_model->lookup($keyword); //Search DB
        if( ! empty($query) )
        {
            $data['response'] = 'true'; //Set response
            $data['message'] = array(); //Create array
            foreach( $query as $row )
            {
                $data['message'][] = array(
                                        'id_matakuliah'=>$row->id,
                                        'value' => $row->matakuliah,
                                        ''
                                     );  //Add a row to array
            }
        }
        if('IS_AJAX')
        {
            echo json_encode($data); //echo json string if ajax request

        }
        else
        {
           $this->load->view('admin/bahan_ajar/form_manage_file_view', $data); //Load html view of search results
        }
    } 
```

该代码运行良好，但我想添加参数来调用数据库。

```
 $query = $this->matakuliah_model->lookup($keyword, $id_matakuliah); 
```

像这样。我怎么能得到

```
$this->input-<post('id_matakuliah') 
```

来自之前的jquery。;

我有另一个文本框，用于填充来自文本框 matakuliah 的自动完成值。

```
`<input type="hidden" id="matakuliah_post" class="med" name="matakuliah_post">` 
```

当我使用自动完成文本框自动填充另一个文本框时，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:30:49.263

在这种情况下`req`将包含`{term:"your search term"}`. 您可以扩展此 javascript 对象以传递额外数据。如果你想发布`id_matakuliah`，你可以在调用之前分配它的值，如下所示`$.ajax`：

```
req.id_matakuliah = "Whatever you want to send"; 
```

# xcode - XCode 中的哪些选项需要更改

> ID：13205120
> 
> 赞同：0
> 
> 时间：2012-11-03T01:28:04.830
> 
> 标签：xcode

全部，我正在使用 Snow Leopard 上的 XCode 4.2 来构建自定义应用程序。它不打算放在 Apple Store 上。我的问题是：为了将生成的包放在我的主目录中而不是 XCode 默认位置，我需要更改什么选项？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:35:32.313

转到 Xcode > 首选项 > 位置。

您可以在那里更改派生数据的路径。您可以更改所有项目的派生数据的位置，或使用“高级”选项，以便能够使用目标设置单独设置目标的位置。

![在此处输入图像描述](../Images/4e148feb123bf38403b166ebc0fed150.png)

# c - 无法弄清楚为什么我的程序断言

> ID：13205126
> 
> 赞同：0
> 
> 时间：2012-11-03T01:29:22.427
> 
> 标签：c, memory, assertion

我正在研究一个简单的向量程序作为作业，但我无法弄清楚我为什么程序断言。我的程序编译成功，但在运行时失败。我认为我已经掌握了这方面的专业知识。

```
#include <iostream>
#include <cstring>
#include <assert.h>
#include <stdio.h>
#include <iomanip>
#define TESTING
using namespace std;
typedef float Elem;//floats for vector elements

struct Vector{//structure for the vector
    unsigned int size;
    Elem *svector;
};

int main(){

#ifdef TESTING
        //prototypes
    Vector *alloc_vec();
    bool print_vec(Vector *printVector);
    Vector *extend_vec(Vector *extend,Elem element);
    Vector *scalar_plus(Vector *vecToAdd, Elem addElement);
    void dealloc_vec(Vector *&deAlloc);

    //testing scaffolds
    Vector *testVec=new Vector;
    *testVec=*alloc_vec();
    assert(testVec->size==0);
    assert(testVec->svector==NULL);

    for(int i=0;i=10;i++){
        *testVec=*extend_vec(testVec,Elem(i));
    }

    assert(testVec->size!=0);
    assert(testVec->svector!=NULL);

    assert(print_vec(testVec));
    print_vec(testVec);

    *testVec=*scalar_plus(testVec,5);

    print_vec(testVec);

    dealloc_vec(testVec);

    assert(testVec==NULL);
#endif //testing

    return 0;
}

Vector *alloc_vec(){//constructor to allocate an empty (zero-length) vector
    Vector *newVector=new Vector; //initiatizes a new vector
        if (newVector==NULL){
        return NULL;
    }

    newVector->size=0;//sets length to 0 
    newVector->svector=NULL;//sets vector to null

    return newVector;
}

bool print_vec(Vector *printVector){

    if(printVector==NULL){//makes sure printVector exists to pass unit test 1
        return false;
    }

    for(unsigned int i=0; i<printVector->size;i++){
        cout<<printVector->svector[i]<<endl;
    }

    return true;

}

void dealloc_vec(Vector *deAlloc){
    if (deAlloc==NULL){//if the vector contains no memory, no need to deallocate, unit test#1
        return;}

    delete deAlloc;//clears the memory of the vector
    deAlloc=NULL;
    return;

}

Vector *extend_vec(Vector *extend,Elem element){
    if (extend==NULL){
        return NULL;}

    Elem *tempVec=new Elem[extend->size+1];//sets up a temp vector one size larger
    tempVec[extend->size]=element;

    memcpy(tempVec,extend->svector,(extend->size*sizeof(Elem)));//copies the memory from the original array to the rest of the temp array

        extend->size+=1;

    delete[] extend->svector;//clears the memory

    extend->svector=tempVec;//the original vector now becomes the extended vector

    delete[] tempVec;//clears the temporary memory

        return extend;
}

Vector *scalar_plus(Vector *vecToAdd, Elem addElement){
    if (vecToAdd==NULL){
        return NULL;}
    for(unsigned int i=0;i<vecToAdd->size;i++){//adds a scalar to each element 
        vecToAdd->svector[i]+=addElement;
        }

        return vecToAdd;
} 
```

**编辑有人问我得到了哪个断言错误：

调试断言失败！

程序：...12\Projects\ConsoleApplication2\Debug\ConsoleApplication2.exe

文件：f:\dd\vctools\crt_bld\self_x86\crt\src\dggdel.cpp

线路：52

表达式：_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

我还进行了以下更改： assert(testVec=NULL) (deAlloc==NULL)

到

```
assert(testVec==NULL)
(deAlloc==NULL) 
```

此函数来自：void dealloc_vec(Vector *deAlloc)

到：

void dealloc_vec(向量 *&deAlloc)

断言错误已修复，但不会产生输出。还在调试中。

此外，这很可能是 C 而非 C++。我的教授在作业规范中说这是 C++，但他在我们班的两个批次之间切换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T01:44:14.990

```
assert(testVec=NULL); 
```

将设置`testVec`为`NULL`并评估为等于该空指针，当被视为布尔值时为假。

那几乎肯定应该是`assert(testVec == NULL);`。

为了将来参考，这就是为什么在与常量相比时，C 和 C++ 中有时首选所谓的“尤达条件”（`NULL == testVec`而不是）。`testVec == NULL`如果不小心使用`=`了而不是`==`，Yoda 条件编译失败，使问题更加明显。

解决了这个问题，您还有另一个问题： `dealloc_vec`将其本地副本清空`Vector*`，但这只是真实指针的副本；更改不会返回给调用者。您可能希望将函数声明为采用`Vector*&`（对指针的引用）。但是，在您这样做之前，您还有另一个要修复的赋值而不是比较： `if (dealloc=NULL)`应该是`if (dealloc == NULL)`.

更重要的是，`delete[] tempvec;`in`extend_vec`释放了您仍在使用的内存。如果你保留它，你就是在乞求段错误和堆损坏。所以删除它。

# c# - log4net AdoNetAppender 中的记录延迟？

> ID：13205127
> 
> 赞同：12
> 
> 时间：2012-11-03T01:30:18.740
> 
> 标签：c#, asp.net-mvc-4, log4net, adonetappender

我有这样的`AdoNetAppender`设置：

```
 <log4net>
    <appender name="AdoNetAppender_SqlServer" type="log4net.Appender.AdoNetAppender">
      <connectionStringName value="DefaultConnection" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message]) VALUES (@log_date, @thread, @log_level, @logger, @message)" />
      <useTransactions value="false" />
      <parameter>
        <parameterName value="@log_date" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
      </parameter>
      <parameter>
        <parameterName value="@thread" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout" value="%thread" />
      </parameter>
      <parameter>
        <parameterName value="@log_level" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout" value="%level" />
      </parameter>
      <parameter>
        <parameterName value="@logger" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout" value="%logger" />
      </parameter>
      <parameter>
        <parameterName value="@message" />
        <dbType value="String" />
        <size value="4000" />
        <layout type="log4net.Layout.PatternLayout" value="%message" />
      </parameter>
    </appender>

    <root>
      <level value="DEBUG" />
      <appender-ref ref="AdoNetAppender_SqlServer" />
    </root>
  </log4net> 
```

从技术上讲，它是有效的，因为当我在本地停止在 IIS 8 Express 上运行的网站时，记录就会显示出来。***然而，这正是问题所在，直到我停止网站，记录才会显示出来。***

我试过`useTransactions`开和关。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-03T02:34:01.687

尝试将缓冲区大小设置为 1：

```
 <appender name="AdoNetAppender_SqlServer" type="log4net.Appender.AdoNetAppender">
      <connectionStringName value="DefaultConnection" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message]) VALUES (@log_date, @thread, @log_level, @logger, @message)" />
      <useTransactions value="false" />
      <bufferSize value="1" /> 
```

更多细节：[http ://weblogs.asp.net/drnetjes/archive/2005/02/16/374780.aspx](http://weblogs.asp.net/drnetjes/archive/2005/02/16/374780.aspx)

# python - 检测计算机何时变为活动状态？

> ID：13205133
> 
> 赞同：0
> 
> 时间：2012-11-03T01:31:08.440
> 
> 标签：python, objective-c, macos, mouseevent, osx-snow-leopard

我很难找到如何做到这一点的答案。

基本上我想要的是让程序在检测到我正在使用计算机时自动启动。因此，例如说我停止使用计算机几个小时然后回来，它会检测到这一点，然后打开另一个程序或其他东西。

我最好在 Ruby/python/objective c/Applescript 中寻找解决方案。但任何事情都会奏效。

我希望它适用于雪豹。

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:38:44.733

您可以使用 监控系统中的所有事件[`NSEvent addGlobalMonitor...`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/addGlobalMonitorForEventsMatchingMask%3ahandler%3a)。跟踪两个连续事件之间的时间，如果超过阈值，则表示用户在那段时间处于非活动状态。

# css - Compass font-face 输出错误的字体文件路径

> ID：13205134
> 
> 赞同：5
> 
> 时间：2012-11-03T01:31:13.013
> 
> 标签：css, sass, font-face, compass-sass

```
@font-face {
  font-family: "HelveticaNeueLTStd-Lt";
  src: url('/css/fonts/HelveticaNeueLTStd-Lt.otf') format('opentype');
} 
```

那是我的指南针代码的输出：

```
@include font-face('HelveticaNeueLTStd-Lt', font-files('HelveticaNeueLTStd-Lt.otf')); 
```

我似乎无法将输出网址设为“Helvetica......otf”或“fonts/Helvetica......otf”。

我的目录资产如下：

```
http_path = "/"
css_dir = "css"
sass_dir = "sass"
images_dir = "img"
javascripts_dir = "js"
fonts_dir = "fonts" 
```

我试过取消 fonts_dir 并将其更改为 "" 没有运气

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T17:51:39.443

设置`http_fonts_path`或`:relative assets, true`。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T11:22:40.700

我有同样的问题。只需使用 URL 代替字体文件

```
@include font-face('HelveticaNeueLTStd-Lt', url('HelveticaNeueLTStd-Lt.otf')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T09:51:40.363

如果我理解正确，您的路径输出是“/css/fonts/HelveticaNeueLTStd-Lt.otf”，但您希望它转到“/fonts/HelveticaNeueLTStd-Lt.otf”。

也许尝试将您的 config.rb 文件更改为

```
fonts_dir = "../fonts" 
```

我不建议对网络使用 .otf 文件

我通常这样使用mixin：

```
@include font-face('HelveticaNeueLTStd-Lt', font-files(
'HelveticaNeueLTStd-Lt.woff', woff,
'HelveticaNeueLTStd-Lt.ttf', ttf,
'HelveticaNeueLTStd-Lt.svg', svg),
'HelveticaNeueLTStd-Lt.eot'); 
```

# javascript - javascript元素作为变量

> ID：13205143
> 
> 赞同：0
> 
> 时间：2012-11-03T01:33:25.580
> 
> 标签：javascript

```
var x = "card";    
document.nick.x.value = card_dealt; 
```

不太清楚在这里做什么。我用谷歌搜索了一堆并想出了 [] 但它们没有用，或者我没有正确使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:34:44.630

使用方括号。

```
var x = "card";
document.nick[x].value = card_dealt; 
```

这使您可以使用评估表达式作为属性名称。

# java - 运行时出现 NullPointerException，原因不明

> ID：13205145
> 
> 赞同：0
> 
> 时间：2012-11-03T01:34:38.167
> 
> 标签：java, nullpointerexception

每次我运行我的程序时，我都会收到 NullPointerException，我不知道该怎么做才能让它工作。它应该解析输入文件数据，进行一些计算（所有尚未编码），然后打印到输出文件。

这是我的课程：

司机：

```
public class Driver
{
    public static void main(String[] args) throws IOException
    {
        Analyzer start = new Analyzer();
        start.start();  
    }
} 
```

分析仪：

```
public class Analyzer 
{
    public void start() throws IOException
    {       
        int total = 0;
        int totalError = 0;
        final int SIZE = 31;
        Response data[] = new Response[SIZE];

        PrintWriter out = new PrintWriter(new FileWriter("apacheOut.txt"));

        Scanner scan = new Scanner (new File("access_log1.txt"));
        while(scan.hasNext())
        {   
            String address = scan.next();
            scan.next(); //garbage line
            scan.next(); //garbage line

            String date = scan.next() + " " + scan.next(); 

            String temp = scan.next();
            String request = temp.substring(1);
            scan.next(); //garbage line

            int status = 0;
            while(status == 0)
            {
                if(scan.hasNextInt())
                    status = scan.nextInt();
                else
                    scan.next(); //garbage line
            }

            int bytes = 0;
            if(status < 300)
            {
                if(scan.hasNextInt())
                {
                    bytes = scan.nextInt();
                }
                else
                {
                    scan.next(); //garbage line
                } 
            }

            String referAgent = scan.nextLine();

            if(status < 400)
            {
                SuccessResponse srp = new SuccessResponse(address, date, request, status, bytes, referAgent);
            }
            else
            {
                ErrorResponse err = new ErrorResponse(address, date, request, status, bytes, referAgent);
                totalError++;
            }

            total++;    
        }

        int numGet = 0;
        int numPost = 0;
        double numBytes = 0;
        for (int i = 0; i <= SIZE; i++)
        {   
            String address = data[i].getAddress();
            String date = data[i].getDate();
            String request = data[i].getRequest();
            int status = data[i].getStatus();
            int bytes = data[i].getBytes();
            String referAgent = data[i].getReferAgent();

            /** GET/POST count */
            if (request.substring(0,1) == "G")
            {   
                numGet++;
            }
            else if (request.substring(0,1) == "P")
            {
                numPost++;
            }

            /** Number of total bytes */
            numBytes = bytes++;
        }

        out.println ("Warren Smith's Results");
        out.println ("======================");
        out.println ("The total number of requests in the file: " + total);
        out.println ("The total number of GET requests: " + numGet);
        out.println ("The total number of POST requests: " + numPost);
        out.println ("The total number of bytes served: " + numBytes);
        out.println ("The number & percentage of pages producing various status categorizations:" );
        out.println ("    1xx Informational: ");
        out.println ("    2xx Status: ");
        out.println ("    3xx Redirection: ");
        out.println ("    4xx Client Error: ");
        out.println ("    5xx Server Error: ");
        out.println ("The percentage and number of Windows-based clients: ");
        out.println ("The percentage and number of bad requests: " + totalError);
        out.println ("The percentage and number of clients that are Mozilla-based: ");
        out.println ("The percentage and number of requests from the Googlebot: ");

        out.close();
    }
} 
```

回复：

```
abstract public class Response 
{
    protected String address;
    protected String date;
    protected String request;
    protected int status;
    protected int bytes;
    protected String referAgent;

    /** Response object constructor */
    public Response (String eAddress, String eDate, String eRequest, int eStatus, int eBytes, String eReferAgent)
    {
        address = eAddress;
        date = eDate;
        request = eRequest;
        status = eStatus;
        bytes = eBytes;
        referAgent = eReferAgent;
    }

    /** Returns the IP address */
    public String getAddress()
    {
        return address;
    }

    /** Returns the date */
    public String getDate()
    {
        return date;
    }

    /** Returns the request to server */
    public String getRequest()
    {
        return request;
    }

    /** Returns the status code */
    public int getStatus()
    {
        return status;
    }   

    /** Returns the # of bytes */
    public int getBytes()
    {
        return bytes;
    }

    /** Returns the referring page & agent */
    public String getReferAgent()
    {
        return referAgent;
    }
} 
```

成功响应：

```
public class SuccessResponse extends Response
{
    /** SuccessResponse object constructor */
    public SuccessResponse (String eAddress, String eDate, String eRequest, int eStatus, int eBytes, String eReferAgent)
    {
        super (eAddress, eDate, eRequest, eStatus, eBytes, eReferAgent);
    }

    /** Returns the IP address */
    public String getAddress()
    {
        return address;
    }

    /** Returns the date */
    public String getDate()
    {
        return date;
    }

    /** Returns the request to server */
    public String getRequest()
    {
        return request;
    }

    /** Returns the status code */
    public int getStatus()
    {
        return status;
    }   

    /** Returns the # of bytes */
    public int getBytes()
    {
        return bytes;
    }

    /** Returns the referring page */
    public String getReferAgent()
    {
        return referAgent;
    }
} 
```

错误响应：

```
public class ErrorResponse extends Response
{
    /** ErrorResponse object constructor */
    public ErrorResponse (String eAddress, String eDate, String eRequest, int eStatus, int eBytes, String eReferAgent)
    {
        super (eAddress, eDate, eRequest, eStatus, eBytes, eReferAgent);
    }

    /** Returns the request to server */
    public String getRequest()
    {
        return request;
    }

    /** Returns the status code */
    public int getStatus()
    {
        return status;
    }   

    /** Returns the # of bytes */
    public int getBytes()
    {
        return bytes;
    }

    /** Returns the referring page */
    public String getReferAgent()
    {
        return referAgent;
    }
} 
```

输出是：

```
[java] Exception in thread "main" java.lang.NullPointerException
[java]     at Analyzer.start(Unknown Source)
[java]     at Driver.main(Unknown Source)
[java] Java Result: 1 
```

为什么 NullPointerException 不断出现的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:47:06.730

似乎`data`数组内的元素没有初始化，但是您尝试使用它们调用方法。

# image - Excel VBA自定义函数从URL故障插入图像

> ID：13205146
> 
> 赞同：2
> 
> 时间：2012-11-03T01:34:43.010
> 
> 标签：image, excel, function, url, vba

我是在 VBA 中创建函数的新手。以下代码是对[此处](http://www.exceltip.com/st/Insert_pictures_using_VBA_in_Microsoft_Excel/486.html)找到的脚本的修改。该代码将两个来自 url（或来自文件系统）的图像插入 Excel 电子表格中的两个用户定义范围。在目标工作表中，我有一个公式引用同一工作簿中源工作表中包含 URL 的单元格。该代码在它自己的工作表上正常工作，但是，当我在源工作表上工作时，它还会在我保存文档或复制/粘贴时将图像插入到源工作表中。如何在告诉 Excel 仅粘贴到目标工作表上时保持功能通用？如何防止代码在每次保存或复制/粘贴时重新计算？谢谢！禅

```
Public Function NewPicsToRanges(URL1 As String, URL2 As String, Optional TargetCells1 As Range, Optional TargetCells2 As Range)
' inserts a picture and resizes it to fit the TargetCells range

ActiveSheet.Shapes.SelectAll
Selection.Delete

Dim p1 As Object, t1 As Double, l1 As Double, w1 As Double, h1 As Double
    If TypeName(ActiveSheet) <> "Worksheet" Then Exit Function
    'If Dir(URL1) = "" Then Exit Function
    ' import picture
    Set p1 = ActiveSheet.Pictures.Insert(URL1)
    ' determine positions
    With TargetCells1
        t1 = .Top
        l1 = .Left
        w1 = .Offset(0, .Columns.Count).Left - .Left
        h1 = .Offset(.Rows.Count, 0).Top - .Top
    End With
    ' position picture
    With p1
        .Top = t1
        .Left = l1
        .Width = w1
        .Height = h1
    End With
    Set p1 = Nothing

Dim p2 As Object, t2 As Double, l2 As Double, w2 As Double, h2 As Double
    If TypeName(ActiveSheet) <> "Worksheet" Then Exit Function
    'If Dir(URL2) = "" Then Exit Function
    ' import picture
    Set p2 = ActiveSheet.Pictures.Insert(URL2)
    ' determine positions
    With TargetCells2
        t2 = .Top
        l2 = .Left
        w2 = .Offset(0, .Columns.Count).Left - .Left
        h2 = .Offset(.Rows.Count, 0).Top - .Top
    End With
    ' position picture
    With p2
        .Top = t2
        .Left = l2
        .Width = w2
        .Height = h2
    End With
    Set p2 = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:56:58.397

每当您重新计算工作表时，该功能就会运行，这在您处理工作表时会经常发生。当您在那里工作时，它会将图像放在源表上，因为您将`p1`and`p2`对象设置为`ActiveSheet`.

试试这些：

```
Set p1 = ThisWorkbook.Worksheets(TargetSheet).Pictures.Insert(URL1) 
```

和

```
Set p2 = ThisWorkbook.Worksheets(TargetSheet).Pictures.Insert(URL2) 
```

您可能还希望将计算设置为手动，这样您就不会在每次更改单元格值时删除并重新插入图像：

```
Application.Calculation = xlCalculationManual 
```

# javascript - HTML5 Canvas 基本线条动画

> ID：13205148
> 
> 赞同：2
> 
> 时间：2012-11-03T01:34:45.763
> 
> 标签：javascript, html, animation, canvas

因此，我正在尝试通过一个小项目进入 HTML5 Canvas，该项目为现有标题设置动画，该标题由从一个点爆发的红色激光状线条组成。我可以根据需要绘制这些线条，并以极快的速度将它们作为一组动画，但下一个障碍在我头上，我想：我希望每条线条独立移动！

我有一个对象定义了我的行的起点，例如：

```
var myLines = {
      a: 1500,
      b: 700,
      c: 400,
      d: 310,
      e: 140,
      f: 60
    } 
```

然后我画一个循环有点像：

```
for (var i in myLines)
      {
        var cur = myLines[i];
        context.beginPath();
        context.moveTo(0, canvas.height);
        context.lineTo(canvas.width, myLine.y-cur);
        context.stroke();
      } 
```

使用一种尴尬的递增方法：

```
var step = 1;

    if (myLine.y+step > canvas.height) {set = false;}
    if (myLine.y-step < 0) {set = true;}

    if (set) {
      myLine.y = myLine.y+step;

    } else {
      myLine.y = myLine.y-step;
    } 
```

我知道上面的代码写得不好，我在这里不合群，我白天在一个小厨房里当厨师，但我想请教一些建议！

[这是一个小提琴](http://jsfiddle.net/jrDwf/)，可以看到这一切。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:24:10.933

如果我是你，我会更改脚本，使每一行都是一个单独的对象，而不仅仅是一个偏移量。就像是：

```
var line = { x: 0, y: 0, speed: 1 }; 
```

这样每条线都可以有自己的速度，在循环中，您可以执行以下操作来添加速度并在到达屏幕边缘时将其翻转：

```
line.x += line.speed;
if(/* edge of screen */) {
    line.speed = -line.speed;
} 
```

# ruby-on-rails - 嵌套模型表单 - 渲染不起作用

> ID：13205154
> 
> 赞同：2
> 
> 时间：2012-11-03T01:35:15.177
> 
> 标签：ruby-on-rails, nested-forms

我是 Rails 新手，需要一些帮助来创建嵌套表单。

我在 teams/_form.html.erb 中有这个

```
<%= form_for @team do |f| %>

<div class="field">
  <%= f.label "Name" %><br />
  <%= f.text_field :name, :required => true %>
</div>

<%= f.fields_for :players do |builder| %>
    <%= render :partial => 'players_field', :f => builder %>
<% end %>

<div class="actions">
   <%= f.submit %>
</div>
<% end %> 
```

我想要的是在团队表单中创建一个玩家列表。问题是渲染不起作用，players_field.html.erb 不渲染。

```
<table class="table table-striped">
  <thead>
  <tr>
    <th>#</th>
    <th>Name</th>
    <th>Position</th>
  </tr>
 </thead>
 <tbody id="tableRow">
  <tr>

 </tr>
 </tbody>
</table> 
```

TR 用 js 添加到表中。

更新：

现在出现另一个问题：/

这是我的js：

```
 var newRow = document.createElement('tr');
 newRow.innerHTML =  "<td>"+ counter +"</td>"+
                     "<%= f.text_field :name %>"+
                     "<%= f.text_field :position %>"+;
 document.getElementById("tableRow").appendChild(newRow); 
```

错误：

```
undefined local variable or method `f' for #<#<Class:0x0000000288dd38>:0x007f77cc1226e0> 
```

为什么我不能添加这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:41:13.903

块

```
<%= f.fields_for :players do |builder| %>
  <%= render :partial => 'players_field', :f => builder %>
<% end %> 
```

基本上是一个循环`@team.players`。这可能是`@team`根本没有任何玩家可以循环的情况。要显示至少一名玩家的表格，您可以将其更改为

```
f.fields_for :players, @team.players.build do |builder| ... 
```

# scala - 使用 finagle 进行持久身份验证

> ID：13205155
> 
> 赞同：3
> 
> 时间：2012-11-03T01:35:15.860
> 
> 标签：scala, authentication, rpc, thrift, finagle

我正在开发回合制策略游戏，并且正在尝试进行多人游戏。我从未做过类似的事情，但我收到了使用 rpc 的强烈建议。我的多人游戏将托管在主服务器上，基本上玩家发送他所做的事情并接收游戏的新状态。如果我理解正确，使用 rpc 架构，服务器只能回复他收到的请求。

所以我认为玩家首先登录服务器，发送凭据，他通过 rpc 发送他所做的事情，并且每 x 毫秒他尝试刷新他当前的游戏（通过发送请求“刷新”）。我不明白的是，我如何才能记住认证。我是否需要为每个请求每次重新登录（并发送凭据）（这似乎需要发送大量信息）。如何识别来自我当前已授予身份验证的人的请求？如何处理连贯但分离的请求之间的逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:09:27.367

一种可能的解决方案是在服务器端维护会话。

当用户登录时，您可以生成会话 ID 并将会话 ID 存储到服务器上的会话数据（用户 ID 等）映射。会话数据可能存储在内存中或一些快速键值存储中，如 redis 或 memcached。存储数据后，您可以将会话 ID 发送回客户端。现在您可以将此会话 ID 发送到服务器以识别用户。

# entity-framework - 复合键未加载所有相关实体

> ID：13205156
> 
> 赞同：0
> 
> 时间：2012-11-03T01:35:15.983
> 
> 标签：entity-framework, foreign-keys, composite-key

几个小时以来，我一直在尝试各种解决方案，但我无法弄清楚。我在系统中使用自定义成员资格提供程序，因此首先使用代码定义角色表，如下所示：

```
public class UsersInRole
{
    [Key]
    public long UserId { get; set; }

    [Required]
    public UserProfile UserProfile { get; set; }

    [Key]
    public long RoleId { get; set; }

    [Required]
    public webpages_Role Role { get; set; }
} 
```

当我编写这个表时，一切似乎都是正确的：

```
CREATE TABLE [dbo].[UsersInRoles](
[UserId] [bigint] NOT NULL,
[RoleId] [bigint] NOT NULL,
CONSTRAINT [PK_dbo.UsersInRoles] PRIMARY KEY CLUSTERED 
(
[UserId] ASC,
[RoleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[UsersInRoles]  WITH CHECK ADD  CONSTRAINT [FK_dbo.UsersInRoles_dbo.UserProfile_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[UserProfile] ([Id])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[UsersInRoles] CHECK CONSTRAINT [FK_dbo.UsersInRoles_dbo.UserProfile_UserId]
GO

ALTER TABLE [dbo].[UsersInRoles]  WITH CHECK ADD  CONSTRAINT [FK_dbo.UsersInRoles_dbo.Roles_RoleId] FOREIGN KEY([RoleId])
REFERENCES [dbo].[Roles] ([RoleId])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[UsersInRoles] CHECK CONSTRAINT [FK_dbo.UsersInRoles_dbo.Roles_RoleId]
GO 
```

奇怪的行为是只填充了 UserProfile 属性。如果我直接通过上下文加载 UsersInRole 对象，我会看到相同的行为。

```
var userInRoles = context.UsersInRoles.ToList(); 
```

UserProfile 属性已加载，但 Role 属性始终为空。

UsersInRole 实体映射了这个复合键：

```
HasKey(compKey => new { compKey.UserId, compKey.RoleId }); 
```

我一遍又一遍地检查了这些关系，据我所知，这应该可以正常工作。UserProfile id 字段是 Id，角色 id 字段是 RoleId 作为关系状态。我现在只见树木不见森林！！

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:23:06.430

似乎我在角色对象定义上犯了一个错误。我现在已经解决了这个问题，即在角色对象上定义外键属性，例如：

```
public class webpages_UsersInRole
{
    public long UserId { get; set; }

    public virtual UserProfile UserProfile { get; set; }

    public long RoleId { get; set; }

    [ForeignKey("RoleId")]
    public virtual webpages_Role Role { get; set; }
} 
```

这个类还配置了一个复合键，如：

```
HasKey(compKey => new { compKey.UserId, compKey.RoleId }); 
```

从这里开始，只需加载一个 UserProfile 现在就可以根据需要正确填充角色对象。

# python - 只有一行来自 sqlalchemy

> ID：13205157
> 
> 赞同：12
> 
> 时间：2012-11-03T01:35:18.400
> 
> 标签：python, sqlalchemy

```
import re
from sqlalchemy import *

db = create_engine('sqlite:///code.db')

db.echo = True

metadata = MetaData(db)

halo4 = Table('emblem_codes', metadata, autoload=True)

#########################
## Get One Unused Code ##
#########################

s = select([halo4.c.code, halo4.c.status=='None'])
result = s.execute()

for row in result:
    print row 
```

我的代码返回所有 80999 结果。我只想要一个。最好的方法是什么？

这是 code.db 的示例：

```
(u'JRQRY-MYHW3-D67GR-7YWFF-CRJ31', None)
(u'9D7DR-4WFDY-VG49F-3DYCG-7DYT5', None)
(u'QR9WT-P3CTM-PW4WW-34JJ4-RFKV7', None)
(u'7FMXQ-H97TC-FFYC6-XHXFV-Y7KR2', None)
(u'VKHXW-29WC4-4PF4Y-2QMJ4-4W2H4', None) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-03T20:55:29.633

如果您只想从[ResultProxy](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy)对象中获取一行（这是您的`s.execute()`语句的结果，您需要使用以下[`fetchone()`](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy.fetchone)方法：

```
s = select([halo4.c.code, halo4.c.status=='None'])
result = s.execute()
one_row = result.fetchone()
another_row = result.fetchone() 
```

# ios - 如何从 iOS 应用程序上的自定义键盘检索击键？

> ID：13205160
> 
> 赞同：15
> 
> 时间：2012-11-03T01:35:35.357
> 
> 标签：ios, keyboard, inputview

我需要为我的 iPhone 应用程序构建一个自定义键盘。[以前关于该主题的问题和答案](https://stackoverflow.com/questions/4643167/iphone-objc-how-to-create-a-custom-keyboard)都集中在自定义键盘的视觉元素上，但我试图了解如何从此键盘检索击键。

Apple 提供了 inputView 机制，可以轻松地将自定义键盘与 UITextField 或 UITextView 关联，但它们不提供将生成的击键发送回关联对象的功能。基于这些对象的典型委托，我们期望三个函数：一个普通字符，一个用于退格，一个用于回车。然而，似乎没有人明确定义这些功能或如何使用它们。

如何为我的 iOS 应用程序构建自定义键盘并从中检索击键？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-03T02:48:00.160

Greg 的方法应该有效，但我有一种方法不需要告诉键盘有关文本字段或文本视图的信息。事实上，您可以创建一个键盘实例并将其分配给多个文本字段和/或文本视图。键盘处理知道哪个是第一响应者。

这是我的方法。我不会展示任何用于创建键盘布局的代码。那是容易的部分。此代码显示所有管道。

编辑：这已更新为正确处理`UITextFieldDelegate textField:shouldChangeCharactersInRange:replacementString:`和`UITextViewDelegate textView:shouldChangeTextInRange:replacementText:`.

头文件：

```
@interface SomeKeyboard : UIView <UIInputViewAudioFeedback>

@end 
```

实现文件：

```
@implmentation SomeKeyboard {
    id<UITextInput> _input;
    BOOL _tfShouldChange;
    BOOL _tvShouldChange;
}

- (id)init {
    self = [super init];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkInput:) name:UITextFieldTextDidBeginEditingNotification object:nil];
    }

    return self;
}

// This is used to obtain the current text field/view that is now the first responder
- (void)checkInput:(NSNotification *)notification {
    UITextField *field = notification.object;

    if (field.inputView && self == field.inputView) {
        _input = field;

        _tvShouldChange = NO;
        _tfShouldChange = NO;
        if ([_input isKindOfClass:[UITextField class]]) {
            id<UITextFieldDelegate> del = [(UITextField *)_input delegate];
            if ([del respondsToSelector:@selector(textField:shouldChangeCharactersInRange:replacementString:)]) {
                _tfShouldChange = YES;
            }
        } else if ([_input isKindOfClass:[UITextView class]]) {
            id<UITextViewDelegate> del = [(UITextView *)_input delegate];
            if ([del respondsToSelector:@selector(textView:shouldChangeTextInRange:replacementText:)]) {
                _tvShouldChange = YES;
            }
        }
    }
}

// Call this for each button press
- (void)click {
    [[UIDevice currentDevice] playInputClick];
}

// Call this when a button on the keyboard is tapped (other than return or backspace)
- (void)keyTapped:(UIButton *)button {
    NSString *text = ???; // determine text for the button that was tapped

    if ([_input respondsToSelector:@selector(shouldChangeTextInRange:replacementText:)]) {
        if ([_input shouldChangeTextInRange:[_input selectedTextRange] replacementText:text]) {
            [_input insertText:text];
        }
    } else if (_tfShouldChange) {
        NSRange range = [(UITextField *)_input selectedRange];
        if ([[(UITextField *)_input delegate] textField:(UITextField *)_input shouldChangeCharactersInRange:range replacementString:text]) {
            [_input insertText:text];
        }
    } else if (_tvShouldChange) {
        NSRange range = [(UITextView *)_input selectedRange];
        if ([[(UITextView *)_input delegate] textView:(UITextView *)_input shouldChangeTextInRange:range replacementText:text]) {
            [_input insertText:text];
        }
    } else {
        [_input insertText:text];
    }
}

// Used for a UITextField to handle the return key button
- (void)returnTapped:(UIButton *)button {
    if ([_input isKindOfClass:[UITextField class]]) {
        id<UITextFieldDelegate> del = [(UITextField *)_input delegate];
        if ([del respondsToSelector:@selector(textFieldShouldReturn:)]) {
            [del textFieldShouldReturn:(UITextField *)_input];
        }
    } else if ([_input isKindOfClass:[UITextView class]]) {
        [_input insertText:@"\n"];
    }
}

// Call this to dismiss the keyboard
- (void)dismissTapped:(UIButton *)button {
    [(UIResponder *)_input resignFirstResponder];
}

// Call this for a delete/backspace key
- (void)backspaceTapped:(UIButton *)button {
    if ([_input respondsToSelector:@selector(shouldChangeTextInRange:replacementText:)]) {
        UITextRange *range = [_input selectedTextRange];
        if ([range.start isEqual:range.end]) {
            UITextPosition *newStart = [_input positionFromPosition:range.start inDirection:UITextLayoutDirectionLeft offset:1];
            range = [_input textRangeFromPosition:newStart toPosition:range.end];
        }
        if ([_input shouldChangeTextInRange:range replacementText:@""]) {
            [_input deleteBackward];
        }
    } else if (_tfShouldChange) {
        NSRange range = [(UITextField *)_input selectedRange];
        if (range.length == 0) {
            if (range.location > 0) {
                range.location--;
                range.length = 1;
            }
        }
        if ([[(UITextField *)_input delegate] textField:(UITextField *)_input shouldChangeCharactersInRange:range replacementString:@""]) {
            [_input deleteBackward];
        }
    } else if (_tvShouldChange) {
        NSRange range = [(UITextView *)_input selectedRange];
        if (range.length == 0) {
            if (range.location > 0) {
                range.location--;
                range.length = 1;
            }
        }
        if ([[(UITextView *)_input delegate] textView:(UITextView *)_input shouldChangeTextInRange:range replacementText:@""]) {
            [_input deleteBackward];
        }
    } else {
        [_input deleteBackward];
    }

    [self updateShift];
}

@end 
```

此类需要 UITextField 的类别方法：

```
@interface UITextField (CustomKeyboard)

- (NSRange)selectedRange;

@end

@implementation UITextField (CustomKeyboard)

- (NSRange)selectedRange {
    UITextRange *tr = [self selectedTextRange];

    NSInteger spos = [self offsetFromPosition:self.beginningOfDocument toPosition:tr.start];
    NSInteger epos = [self offsetFromPosition:self.beginningOfDocument toPosition:tr.end];

    return NSMakeRange(spos, epos - spos);
}

@end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-12T21:15:56.260

我已经为 iPad 创建了一个完整的工作示例，可以在 Github 上找到：

[https://github.com/lnafziger/Numberpad](https://github.com/lnafziger/Numberpad)

> Numberpad 是 iPad 的自定义数字键盘，它可以与`UITextField`'s 和' 一起使用，`UITextView`除了添加 Numberpad 类的实例作为文本字段/视图的 inputView 之外，不需要任何更改。

特征：

*   它受 MIT 许可保护，因此可以根据其条款自由复制和使用。
*   它适用于 UITextFields 和 UITextViews
*   它不需要设置委托。
*   它会自动跟踪哪个视图是第一响应者（因此您不必这样做）
*   您不必设置键盘的大小或跟踪它。
*   有一个共享实例，您可以将其用于任意数量的输入视图，而无需为每个视图使用额外的内存。

使用就像包含 Numberpad.h 一样简单，然后：

```
theTextField.inputView  = [Numberpad defaultNumberpad]; 
```

其他一切都会自动处理！

从 Github（上面的链接）中获取两个类文件和 xib，或者创建按钮（在代码中或在故事板/xib 中），并将其操作设置为类中的适当方法（numberpadNumberPressed、numberpadDeletePressed、numberpadClearPressed 或 numberpadDonePressed ）。

**以下代码已过时。最新代码见 Github 项目。**

数字键盘.h：

```
#import <UIKit/UIKit.h>

@interface Numberpad : UIViewController

// The one and only Numberpad instance you should ever need:
+ (Numberpad *)defaultNumberpad;

@end 
```

数字键盘.m:

```
#import "Numberpad.h"

#pragma mark - Private methods

@interface Numberpad ()

@property (nonatomic, weak) id<UITextInput> targetTextInput;

@end

#pragma mark - Numberpad Implementation

@implementation Numberpad

@synthesize targetTextInput;

#pragma mark - Shared Numberpad method

+ (Numberpad *)defaultNumberpad {
    static Numberpad *defaultNumberpad = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        defaultNumberpad = [[Numberpad alloc] init];
    });

    return defaultNumberpad;
}

#pragma mark - view lifecycle

- (void)viewDidLoad {
    [super viewDidLoad];

    // Keep track of the textView/Field that we are editing
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(editingDidBegin:)
                                                 name:UITextFieldTextDidBeginEditingNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(editingDidBegin:)
                                                 name:UITextViewTextDidBeginEditingNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(editingDidEnd:)
                                                 name:UITextFieldTextDidEndEditingNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(editingDidEnd:)
                                                 name:UITextViewTextDidEndEditingNotification
                                               object:nil];
}

- (void)viewDidUnload {
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UITextFieldTextDidBeginEditingNotification
                                                  object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UITextViewTextDidBeginEditingNotification
                                                  object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UITextFieldTextDidEndEditingNotification
                                                  object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UITextViewTextDidEndEditingNotification
                                                  object:nil];
    self.targetTextInput = nil;

    [super viewDidUnload];
}

#pragma mark - editingDidBegin/End

// Editing just began, store a reference to the object that just became the firstResponder
- (void)editingDidBegin:(NSNotification *)notification {
    if (![notification.object conformsToProtocol:@protocol(UITextInput)]) {
        self.targetTextInput = nil;
        return;
    }

    self.targetTextInput = notification.object;
}

// Editing just ended.
- (void)editingDidEnd:(NSNotification *)notification {
    self.targetTextInput = nil;
}

#pragma mark - Keypad IBActions

// A number (0-9) was just pressed on the number pad
// Note that this would work just as well with letters or any other character and is not limited to numbers.
- (IBAction)numberpadNumberPressed:(UIButton *)sender {
    if (!self.targetTextInput) {
        return;
    }

    NSString *numberPressed  = sender.titleLabel.text;
    if ([numberPressed length] == 0) {
        return;
    }

    UITextRange *selectedTextRange = self.targetTextInput.selectedTextRange;
    if (!selectedTextRange) {
        return;
    }

    [self textInput:self.targetTextInput replaceTextAtTextRange:selectedTextRange withString:numberPressed];
}

// The delete button was just pressed on the number pad
- (IBAction)numberpadDeletePressed:(UIButton *)sender {
    if (!self.targetTextInput) {
        return;
    }

    UITextRange *selectedTextRange = self.targetTextInput.selectedTextRange;
    if (!selectedTextRange) {
        return;
    }

    // Calculate the selected text to delete
    UITextPosition  *startPosition  = [self.targetTextInput positionFromPosition:selectedTextRange.start offset:-1];
    if (!startPosition) {
        return;
    }
    UITextPosition  *endPosition    = selectedTextRange.end;
    if (!endPosition) {
        return;
    }
    UITextRange     *rangeToDelete  = [self.targetTextInput textRangeFromPosition:startPosition
                                                                       toPosition:endPosition];

    [self textInput:self.targetTextInput replaceTextAtTextRange:rangeToDelete withString:@""];
}

// The clear button was just pressed on the number pad
- (IBAction)numberpadClearPressed:(UIButton *)sender {
    if (!self.targetTextInput) {
        return;
    }

    UITextRange *allTextRange = [self.targetTextInput textRangeFromPosition:self.targetTextInput.beginningOfDocument
                                                                 toPosition:self.targetTextInput.endOfDocument];

    [self textInput:self.targetTextInput replaceTextAtTextRange:allTextRange withString:@""];
}

// The done button was just pressed on the number pad
- (IBAction)numberpadDonePressed:(UIButton *)sender {
    if (!self.targetTextInput) {
        return;
    }

    // Call the delegate methods and resign the first responder if appropriate
    if ([self.targetTextInput isKindOfClass:[UITextView class]]) {
        UITextView *textView = (UITextView *)self.targetTextInput;
        if ([textView.delegate respondsToSelector:@selector(textViewShouldEndEditing:)]) {
            if ([textView.delegate textViewShouldEndEditing:textView]) {
                [textView resignFirstResponder];
            }
        }
    } else if ([self.targetTextInput isKindOfClass:[UITextField class]]) {
        UITextField *textField = (UITextField *)self.targetTextInput;
        if ([textField.delegate respondsToSelector:@selector(textFieldShouldEndEditing:)]) {
            if ([textField.delegate textFieldShouldEndEditing:textField]) {
                [textField resignFirstResponder];
            }
        }
    }
}

#pragma mark - text replacement routines

// Check delegate methods to see if we should change the characters in range
- (BOOL)textInput:(id <UITextInput>)textInput shouldChangeCharactersInRange:(NSRange)range withString:(NSString *)string
{
    if (!textInput) {
        return NO;
    }

    if ([textInput isKindOfClass:[UITextField class]]) {
        UITextField *textField = (UITextField *)textInput;
        if ([textField.delegate respondsToSelector:@selector(textField:shouldChangeCharactersInRange:replacementString:)]) {
            if (![textField.delegate textField:textField
                 shouldChangeCharactersInRange:range
                             replacementString:string]) {
                return NO;
            }
        }
    } else if ([textInput isKindOfClass:[UITextView class]]) {
        UITextView *textView = (UITextView *)textInput;
        if ([textView.delegate respondsToSelector:@selector(textView:shouldChangeTextInRange:replacementText:)]) {
            if (![textView.delegate textView:textView
                     shouldChangeTextInRange:range
                             replacementText:string]) {
                return NO;
            }
        }
    }
    return YES;
}

// Replace the text of the textInput in textRange with string if the delegate approves
- (void)textInput:(id <UITextInput>)textInput replaceTextAtTextRange:(UITextRange *)textRange withString:(NSString *)string {
    if (!textInput) {
        return;
    }
    if (!textRange) {
        return;
    }

    // Calculate the NSRange for the textInput text in the UITextRange textRange:
    int startPos                    = [textInput offsetFromPosition:textInput.beginningOfDocument
                                                         toPosition:textRange.start];
    int length                      = [textInput offsetFromPosition:textRange.start
                                                         toPosition:textRange.end];
    NSRange selectedRange           = NSMakeRange(startPos, length);

    if ([self textInput:textInput shouldChangeCharactersInRange:selectedRange withString:string]) {
        // Make the replacement:
        [textInput replaceRange:textRange withText:string];
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-03T01:40:47.370

这是我的自定义键盘，我相信它可以在 Apple 允许的情况下完全解决这些问题：

```
//  PVKeyboard.h

#import <UIKit/UIKit.h>
@interface PVKeyboard : UIView
@property (nonatomic,assign) UITextField *textField;
@end

//  PVKeyboard.m

#import "PVKeyboard.h"

@interface PVKeyboard () {
    UITextField *_textField;
}
@property (nonatomic,assign) id<UITextInput> delegate;
@end

@implementation PVKeyboard

- (id<UITextInput>) delegate {
    return _textField;
}

- (UITextField *)textField {
    return _textField;
}

- (void)setTextField:(UITextField *)tf {
    _textField = tf;
    _textField.inputView = self;
}

- (IBAction)dataPress:(UIButton *)btn {
    [self.delegate insertText:btn.titleLabel.text];
}

- (IBAction)backPress {
    if ([self.delegate conformsToProtocol:@protocol(UITextInput)]) {
        [self.delegate deleteBackward];
    } else {
        int nLen = [_textField.text length];
        if (nLen)
            _textField.text = [_textField.text substringToIndex:nLen-1];
    }
}

- (IBAction)enterPress {
    [_textField.delegate textFieldShouldReturn:_textField];
}

- (UIView *)loadWithNIB {
   NSArray *aNib = [[NSBundle mainBundle]loadNibNamed:NSStringFromClass([self class]) owner:self options:nil];
   UIView *view = [aNib objectAtIndex:0];
   [self addSubview:view];
   return view;
}

- (id)initWithFrame:(CGRect)frame {
   self = [super initWithFrame:frame];
   if (self)
        [self loadWithNIB];
   return self;
}
@end 
```

在 XCode 4.3 及更高版本中，您需要创建一个基于 UIView 的目标类（用于 .h 和 .m 文件）和一个用户界面视图文件（用于 .xib 文件）。确保所有三个文件具有相同的名称。使用身份检查器，确保设置 XIB 的文件所有者自定义类以匹配新对象的名称。使用属性检查器，将表单的大小设置为自由格式并将状态栏设置为无。使用 Size Inspector，设置表单的大小，它应该与标准键盘的宽度相匹配（iPhone 纵向为 320，iPhone 横向为 480），但您可以选择任何您喜欢的高度。

表格可以使用了。添加按钮并将它们连接到 dataPress、backPress 和 enterPress（视情况而定）。initWithFrame: 和 loadWithNIB 函数将发挥所有魔力，让您可以使用在 Interface Builder 中设计的键盘。

要将此键盘与 UITextField myTextField 一起使用，只需将以下代码添加到您的 viewDidLoad：

```
self.keyboard = [[PVKeyboard alloc]initWithFrame:CGRectMake(0,488,320,60)];
self.keyboard.textField = self.myTextField; 
```

由于某些限制，此键盘不可重复使用，因此您需要每个字段一个。我几乎可以让它可重复使用，但我只是觉得没那么聪明。键盘也仅限于 UITextFields，但这主要是因为实现回车键功能的限制，我将在下面解释。

这是让您设计出比此入门框架更好的键盘的魔力...

我使用谨慎的离散设置器 (setTextField) 实现了这个键盘的唯一属性 textField，因为：

1.  我们需要 UITextField 对象来处理输入问题
2.  我们需要 UITextField，因为它符合符合 UIKeyInput 的 UITextInput 协议，它完成了我们大部分繁重的工作
3.  这是一个方便的地方，可以将 UITextInput 的 inputView 字段设置为使用此键盘。

您会注意到另一个名为 delegate 的私有属性，它本质上将 UITextField 指针类型转换为 UITextInput 指针。我可能可以内联完成这个转换，但我觉得这可能对未来的扩展很有用，可能包括对 UITextView 的支持。

函数 dataPress 是使用 UIKeyInput 的 insertText 方法在编辑字段中插入文本。这似乎适用于 iOS 4 的所有版本。对于我的键盘，我只是使用每个按钮的标签，这很正常。使用任何你喜欢的 NSStrings。

函数 dataBack 执行退格操作，并且稍微复杂一些。当 UIKeyInput deleteBackward 工作时，它工作得非常好。虽然文档说它可以回溯到 iOS 3.2，但它似乎只能回溯到 iOS 5.0，也就是 UITextField（和 UITextView）符合 UITextInput 协议的时候。所以在此之前，你是靠自己的。由于 iOS 4 支持是许多人关心的问题，我实现了一个蹩脚的退格键，它直接在 UITextField 上工作。如果不是因为这个要求，我可以让这个键盘与 UITextView 一起工作。而且这个退格不是一般的，只删除最后一个字符，而deleteBackward即使用户移动光标也能正常工作。

函数 enterPress 实现了 enter 键，但它是一个完整的组合，因为 Apple 似乎没有提供调用 enter 键的方法。因此 enterPress 只需调用 UITextField 的委托函数 textFieldShouldReturn:，这是大多数程序员实现的。请注意，这里的委托是 UITextField 的 UITextFieldDelegate 而不是键盘本身的委托属性。

这个解决方案绕过了正常的键盘处理，这在 UITextField 的情况下几乎不重要，但是使这种技术无法用于 UITextView，因为现在可以在正在编辑的文本中插入换行符。

差不多就是这样。完成这项工作需要 24 小时的阅读和整理。我希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T01:43:14.840

（这主要取自[http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)）

在 iOS 中，视图的键盘由`UIResponder`视图继承链的一部分管理。当任何需要键盘的 UIResponder 成为第一响应者（被录音或以其他方式激活）时，UIResponder 在其`inputView`属性中查找要显示为键盘的视图。因此，要制作自定义键盘并响应其上的事件，您必须创建一个带有字母按钮的视图，将视图控制器与该视图相关联，并与处理按下的按钮相关联，并且您必须将该视图设置为`inputView`一些文本框。

查看链接以获取更多信息。

# c# - 在按钮单击时传递 ID

> ID：13205163
> 
> 赞同：0
> 
> 时间：2012-11-03T01:37:11.770
> 
> 标签：c#, asp.net

我在下面有这段代码，它为产品列表创建行和单元格。我想使用一个按钮来获取其他产品信息。基本上用户会搜索一些东西，它会显示有限的结果。当用户单击按钮时，它将调用一个方法来执行其他操作。

如何让该按钮将 ID 或其他内容传递给方法？

我尝试了`.Click`但没有调用该方法。目前该方法只显示一个消息框。

```
for (rowCtr = 1; rowCtr <= rowCnt; rowCtr++)
{
    // Create new row and add it to the table.
    TableRow tRow = new TableRow();
    Table1.Rows.Add(tRow);
    for (cellCtr = 1; cellCtr <= cellCnt; cellCtr++)
    {
        // Create a new cell and add it to the row.
        TableCell tCell = new TableCell();

        if (rowCtr == 1 && cellCtr == 1)
        {
            Image ProductImage = new Image();
            ProductImage.Height = 75;
            ProductImage.Width = 75;
            tCell.RowSpan = 5;
            tCell.Controls.Add(ProductImage);
            tRow.Cells.Add(tCell);
        }

        if (rowCtr == 1 && cellCtr == 2)
        {
            tCell.Text = "Title: Title of Product";
            tRow.Cells.Add(tCell);
        }

        if (rowCtr == 2 && cellCtr == 2)
        {
            tCell.Text = "Weight (lbs): 54";
            tRow.Cells.Add(tCell);
        }

        if (rowCtr == 4 && cellCtr == 2)
        {
            Button getOfferButton = new Button();
            getOfferButton.Width = 100;
            getOfferButton.Text = "Get Offer";
            getOfferButton.Click += new EventHandler(getOffer);
            tCell.Controls.Add(getOfferButton);

            tRow.Cells.Add(tCell);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:22:35.880

我认为您应该使用`<asp:GridView />`控件而不是使用标记生成它。处理此问题的一种方法是使用`OnCommand`事件并将 ID 作为参数传递

```
getOfferButton.Click += new CommandEventHandler(RowButton_OnCommand);
getOfferButton.CommandArgument = "123"; 
```

然后是处理程序

```
protected void RowButton_OnCommand(object sender, CommandEventArgs e)
{
   string id = e.CommandArgument.ToString(); //could convert this to integer

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T11:03:23.940

## 首先，您需要从后面的代码中返回对象列表，其次您需要导入您的 BLL 或 BO 名称：

```
 '<asp:Repeater ID="rptGrpAcc" runat="server" OnItemDataBound="rptAccident_ItemDataBound">
                    <ItemTemplate>
                        <tr style="cursor: pointer" onclick="SelectGrpAcc(this,<%#Eval("ID"%>);">
              </ItemTemplate>
  </asp:Repeter>'

     <asp:HiddenField ID="hdnRowNum" runat="server" />
           <asp:Button ID="btnShowRptDtl" runat="server" Text="ShowRptDtl" Style="display: none"
             OnClick="btnShowRptDtl_Click" CausesValidation="false"/>

      ' <script type="text/javascript">
         /*---------------for selecting row of repeator--------*/
          function SelectGrpAcc(obj, ID) {

          document.getElementById("<%=hdnRowNum.ClientID %>").value = ID;
         document.getElementById("<%=btnShowRptDtl.ClientID %>").click();
    }'

'protected void btnShowRptDtl_Click(object sender, EventArgs e)
       {
           btnAdd.Text= "update";

          int Sn = ClsConvertTo.Int32(hdnRowNum.Value); // this is your ID in code behind 
       //   add logic here
       }' 
```

# javascript - 无法使用 Javascript 替换方法删除 textarea 中的空换行符

> ID：13205169
> 
> 赞同：0
> 
> 时间：2012-11-03T01:38:09.803
> 
> 标签：javascript, replace, textarea

当我将以下内容粘贴到文本区域时，onblur 应该整理粘贴的文本，删除某些单词、制表符空格并通过将由制表符空格分隔的每个值放入它自己的行来进行整理。但它总是在第一行留下一个空白的空行：

*注意：我似乎无法模拟 html 中的制表符空间，因此您必须在记事本中手动键入以下内容才能正确复制我的问题：其中 %%% 替换为记事本中的制表符空间，然后全选并复制/粘贴到我的 [js 小提琴示例](http://jsfiddle.net/themeanfiddler/3PSzj/ "js小提琴示例")textarea*

```
 Customer account %%% Name %%% Telephone   %%%  Street name %%% City %%% postcode%%% 1234LA3 %%% KCI ASDFGHJ %%% 1234567890 %%% 10 EXAMPLE ST %%% EXAMPLE CITY %%% 1234 
```

当你 onblur 它最终看起来像这样：

```
1234LA3
KCI ASDFGHJ
1234567890
10 示例 ST
示例城市
1234
```

注意“1234LA3”上方的空白区域。

我已经尝试在我的 .replace() 方法中添加 \n\r ，但似乎仍然没有过滤掉这个空行。

任何形式的帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:45:30.760

```
value=value.replace(/^(\r\n)|(\n)/,''); 
```

似乎可以解决问题。

[**演示**](http://jsfiddle.net/3PSzj/4/)

此外，您可以在 html 中使用 来模拟制表符，`&#09;`更不用说您不需要在事件中使用`javascript:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T02:15:57.130

或者在第一次替换后添加 \t ：

```
value=value.replace(/(Customer account\t|Name\t|Street name\t|Telephone\t|City\t|postcode\t|Extension\t)/g,''); 
```

问题出现了，因为您在最后一个标题之后有一个选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T02:03:53.680

如果您要那样做，正则表达式会像这样工作：

```
str.replace(/^$/m, ''); 
```

是的？有人理智地为我检查一下吗？

# r - 变量在向量中的位置

> ID：13205174
> 
> 赞同：0
> 
> 时间：2012-11-03T01:40:37.540
> 
> 标签：r

有谁知道一种简单有效的方法来计算未排序向量中有多少值大于变量？

我的向量有 1,000,000 个值长，我有大约 400 个这样的比较要进行，使用不同的向量和变量。任何节省时间的功能将不胜感激......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T01:50:09.983

如果您只想知道有多少符合条件而不是哪些符合条件，请尝试以下操作：

```
vector<-c(1,2,3,4,5)
sum(vector>1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T01:44:36.260

只需使用 which 功能。所以如果我有向量，

```
vector<-c(1,2,3,4,5)
which(vector>1) 
```

输出 2,3,4,5

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-03T01:59:04.143

如果我明白你想要什么。你可以重新排序你的向量（快速排序），然后你可以搜索（二分搜索）。所有元素，在第一个元素之后 > 然后你变量，将是 >。< 是相反的。

# dart - 如何使用反射（镜像）访问 Dart 类中的方法名称？

> ID：13205176
> 
> 赞同：5
> 
> 时间：2012-11-03T01:41:02.147
> 
> 标签：dart, dart-mirrors

我需要“获取” Dart 类中的方法。

我怎样才能做到这一点？

我希望能够调用这些方法。

我可以看一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:21:11.527

这是一个简单的可复制粘贴代码示例：

```
import 'dart:mirrors';
import 'dart:io';

main() {
  var im = reflect(new File('test')); // Retrieve the InstanceMirror of some class instance.
  im.type.methods.values.forEach((MethodMirror method) => print(method.simpleName));
} 
```

输出是：

```
existsSync
_delete
exists
directory
_getDecodedLines
readAsTextSync
readAsBytesSync
readAsLinesSync
_directory
throwIfError
lastModifiedSync
readAsLines
open
_ensureFileService
deleteSync
delete
_exists
length
openInputStream
create
_create
readAsText
_openStdioSync
openOutputStream
_fullPath
_lastModified
fullPathSync
readAsBytes
lastModified
_openStdio
_open
openSync
lengthSync
directorySync
fullPath
createSync
_lengthFromName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:59:44.837

这是一个基本示例：

（注意：您将需要一个（非常）最新版本的 SDK，这是在 Dart Editor 版本 0.2.1_r14167、Dart SDK 版本 0.2.1.2_r14167 2012 年 11 月 2 日完成的）

我最诚挚的感谢 Google Dart 团队的 Gilad 提供了这个例子！

```
#import('dart:mirrors');

class MyClass {
  String _test;

  String  get test       => _test;
  set     test(String paramVal)  => _test = paramVal;

  void my_method() {
  }

  void print_test(){
    print("test string is: ${_test}");
  }

  MyClass(String test) {
    _test = test;
  }

}

main() {

  MyClass myClass = new MyClass("Make my day, PUNK.");

  myClass.print_test();

  //ClassMirror myClassMirror = reflect(myClass).type;

  InstanceMirror myClassInstanceMirror = reflect(myClass);

  ClassMirror MyClassMirror = myClassInstanceMirror.type;

  Map<String, MethodMirror> map = MyClassMirror.methods;

  print("map = ${map}"); 

  map.values.forEach( (MethodMirror mm){
    myClassInstanceMirror.invoke(mm.simpleName,[]);
  });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:36:37.463

关于反射，我刚刚编写了几个“帮助函数”，用于获取方法名称的列表（不是 Map）并调用该方法……我可以肯定的是它现在可以工作。不这样做可能有技术原因 - 但在我的情况下，这不会在复杂的环境中运行。但是，我确实认为它们很好地掩盖了并非每个人都想要处理的许多细节。

这是一个使用和不使用 Helper 函数的功能演示：

```
#import('dart:mirrors');

class MyClass {
  String _test;
  String  get test               => _test;
  set     test(String paramVal)  => _test = paramVal;
  void my_method1(){print("in method1");}
  void my_method2(){print("in method2");}
  void print_test(){
    print("test string is: ${_test}");
  }
  MyClass(String test) {
    _test = test;
  }
}

//Helper Methods
InstanceMirror hMr;
List REFLECT_methods(Object myClass) {hMr=reflect(myClass);return(hMr.type.methods.values);}
REFLECT_invoke(MethodMirror mm){hMr.invoke(mm.simpleName, []);}

main() {

  MyClass myClass = new MyClass("Make my day, PUNK.");

  print("\n=======Using Raw Reflection================");
  InstanceMirror myClassInstanceMirror = reflect(myClass);
  ClassMirror MyClassMirror = myClassInstanceMirror.type;
  Map<String, MethodMirror> map1 = MyClassMirror.methods;
  map1.values.forEach( (MethodMirror mm){
    myClassInstanceMirror.invoke(mm.simpleName,[]);
  });

  print("\n==========Using Helper functions=============");
  List list2 = REFLECT_methods(myClass);
  list2.forEach((method){
    REFLECT_invoke(method);
  });  
} 
```

# types - 带文字的有区别的联合

> ID：13205177
> 
> 赞同：2
> 
> 时间：2012-11-03T01:41:03.100
> 
> 标签：types, f#, literals

F# 中位类型的正确语法是什么，只有两个可能的值：0 和 1。我试过了；

```
type bit = 
         | 0
         | 1 
```

并且错误消息是`error FS0010: Unexpected integer literal in union case`。我需要使用 `[<Literal>]`吗？

我收到了不同的错误消息：`error FS0010: Unexpected integer literal in union case. Expected identifier, '(', '(*)' or other token.`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T07:21:06.907

如果您正在寻找 的类型安全表示`Bit`，您可能更喜欢 DU 而不是枚举以进行详尽的模式匹配：

```
type Bit = Zero | One
with member x.Value =
     match x with
     | Zero -> 0
     | One -> 1 
```

如果你想有一个紧凑的表示，`boolean`type 是一个很好的选择：

```
let [<Literal>] Zero = false
let [<Literal>] One = true

let check = function
    | Zero -> "It's Zero"
    | One -> "It's One" 
```

当有`Bit`s 的集合时，您可以查看[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)以获得更有效的处理。它们确实`boolean`用作内部表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T02:13:18.367

你想使用一个枚举 -

```
type bit = 
     | Zero= 0
     | One = 1 
```

尽管模式匹配不如可区分联合好。

或者，您可以将 DU 与

```
type bit =
|Zero
|One
member x.Int() =
    match x with
    |Zero -> 0
    |One -> 1 
```

# sql-server - 我在vista 32上安装了sql server 2008 r2，但是找不到sql server management studio

> ID：13205186
> 
> 赞同：0
> 
> 时间：2012-11-03T01:43:58.067
> 
> 标签：sql-server, ssms

我首先安装了visual studio 2010 express edition，我认为它安装了sql server 2008 express。但后来我去下载了 sql server 2008 R2 32 位。现在我正在尝试查找sql​​ server management studio，我从ms站点下载了独立的，当我启动它时，它说它不支持这个版本的sql server。然后我发现有人发布的一个链接指向一个版本的sql server management studio for sql server 2008 r2，但是32位版本没有下载按钮。[http://www.microsoft.com/en-us/download/details.aspx?id=22985](http://www.microsoft.com/en-us/download/details.aspx?id=22985)

为什么这么复杂？我只想运行 sql server 2008 r2 并使用管理工作室管理它。

这是我安装的软件包：

![在此处输入图像描述](../Images/59178d1b229cf47b2efd707f8a667a43.png)

这是正在运行的服务（注意它说的是 sqlexpress） 但它是哪一个，是 vs 2010 附带的还是我下载并安装的（即 sql server 2008 r2）？

![在此处输入图像描述](../Images/d4e197ed5c969351b860d6c7bcf730ea.png)

关于我接下来应该做什么的任何建议？在哪里可以找到适用于我的安装的 sql server management studio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:56:30.857

返回 SQL Management Studio 的[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=22985)并向下滚动到“说明”部分以找到指向[SQLManagementStudio_X86 可执行文件的链接](http://go.microsoft.com/fwlink/?LinkId=186789&clcid=0x409)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:21:34.270

SQL Server 安装介质应包含`Management Studio`在其上。进去看看`Shared features`。

# python - Virtualenv vcvarsall.bat 错误 Windows 7 中的 PIP/easy_install PIL

> ID：13205190
> 
> 赞同：9
> 
> 时间：2012-11-03T01:44:27.263
> 
> 标签：python, django, windows, python-imaging-library, virtualenv

所以我知道已经有相当多的文档，但我似乎无法让它发挥作用。我正在将 Django 应用程序部署到 Heroku，并尝试将 PIL 安装到我的 virtualenv 中（应用程序的主要部分需要用户上传的图像）。

我都试过了

```
easy_install PIL 
```

和

点安装 PIL

和安装结束的每个人

```
error: Unable to find vcvarsall.bat. 
```

如何让 PIL 进入我的 virtualenv？任何人都可以引导我完成它吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T13:33:05.290

我不了解Windows，但`easy_install PIL`效果不佳。 `easy_install pillow`（与 setuptools 兼容）可以解决问题。如果我没记错的话，它仍然需要编译，然后你可以在那里看看：[无法找到 vcvarsall.bat](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:34:08.440

PIL 需要make.exe 或nmake.exe，你可能需要安装visual studio。vcvarsall.bat 是 Visual c++ 的一部分。[请从http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装二进制包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T00:39:09.323

正如其他答案中所述，枕头是要走的路，因为 PIP 与 setuptools 不兼容。

所以你可以这样做：

```
pip install pillow 
```

现在，由于您在 Windows 上工作，您可能会遇到编译问题。您需要安装 gcc 编译器才能使其正常工作。我刚刚遇到了这个问题，并在[这里](http://www.megustaulises.com/2013/07/unable-to-find-vcvarsallbat_9.html)写了一篇博客。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-01T20:34:49.217

安装 Pillow 为此，您需要在计算机上安装编译器，使用 Microsoft Visual Studio 9.0 (2008) Express Edition（免费）。你需要这个 c++ 编译器来安装枕头。从这里安装

```
http://download.microsoft.com/download/A/5/4/A54BADB6-9C3F-478D-8657-93B3FC9FE62D/vcsetup.exe 
```

打开cmd提示符并输入以下内容

```
"C:\Program Files\Microsoft Visual Studio 9.0\Common7\Tools\vsvars32.bat" 
```

这会更新 PATH 变量（即使在 virtualenv 中也不需要注册表黑客）。

由于防火墙的困难，我通常从本地目录 pip install

```
pip install -e c:\django\test_virtualenv\Pillow 
```

Pillow 必须是您的操作系统和计算机架构的修正版本。

# string - 如何将StrLn 放入Data.ByteString.Internal.ByteString？

> ID：13205192
> 
> 赞同：9
> 
> 时间：2012-11-03T01:44:42.263
> 
> 标签：string, haskell, io, output

我正在学习 Haskell，并决定尝试编写一些小型测试程序来习惯 Haskell 代码和使用模块。目前我正在尝试使用第一个参数来使用 Cypto.PasswordStore 创建密码哈希。为了测试我的程序，我试图从第一个参数创建一个散列，然后将散列打印到屏幕上。

```
import Crypto.PasswordStore
import System.Environment

main = do
    args <- getArgs
    putStrLn (makePassword (head args) 12) 
```

我收到以下错误：

```
testmakePassword.hs:8:19:
    Couldn't match expected type `String'
            with actual type `IO Data.ByteString.Internal.ByteString'
    In the return type of a call of `makePassword'
    In the first argument of `putStrLn', namely
      `(makePassword (head args) 12)'
    In a stmt of a 'do' block: putStrLn (makePassword (head args) 12) 
```

我一直在使用以下链接作为参考，但我现在只是试错无济于事。 [http://hackage.haskell.org/packages/archive/bytestring/0.9.0.4/doc/html/Data-ByteString-Internal.html](http://hackage.haskell.org/packages/archive/bytestring/0.9.0.4/doc/html/Data-ByteString-Internal.html) [http://hackage.haskell.org/packages/archive/pwstore-purehaskell/2.1 /doc/html/Crypto-PasswordStore.html](http://hackage.haskell.org/packages/archive/pwstore-purehaskell/2.1/doc/html/Crypto-PasswordStore.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T01:49:14.773

您还没有导入 ByteString，所以它正在尝试使用 putStrLn 的 String 版本。我已经提供`toBS`了`String->ByteString`转换。

尝试

```
import Crypto.PasswordStore
import System.Environment
import qualified Data.ByteString.Char8 as B

toBS = B.pack

main = do
    args <- getArgs
    makePassword (toBS (head args)) 12 >>= B.putStrLn 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T01:51:33.127

你必须以不同的方式做两件事。首先，`makePassword`是在 IO 中，所以需要将结果绑定到一个名称，然后将该名称传递给 IO 函数。其次，您需要从`Data.ByteString`

```
import Crypto.PasswordStore
import System.Environment
import qualified Data.ByteString as B

main = do
    args <- getArgs
    pwd <- makePassword (B.pack $ head args) 12
    B.putStrLn pwd 
```

或者，如果您不会在其他任何地方使用密码结果，则可以使用 bind 直接连接这两个函数：

```
main = do
    args <- getArgs
    B.putStrLn =<< makePassword (B.pack $ head args) 12 
```

# opengl-es - Cocos2D-iphone扩展类CCScrollLayer中未声明标识符的使用

> ID：13205193
> 
> 赞同：0
> 
> 时间：2012-11-03T01:44:59.727
> 
> 标签：opengl-es, cocos2d-iphone, ccscrolllayer, cocos2d-extensions-ios

从这里下载了 CCScrollLayer Cocos2D 扩展： [https ://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCScrollLayer](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCScrollLayer)

不确定它有多重要，因为我认为这更像是一个 OpenGL 问题，但该层的目的是向 CCLayer 对象添加惯性滚动功能。

我不明白为什么——如果我没有以任何方式修改代码并且很多其他人说它工作正常——我在 Xcode 4.5 中遇到“使用未声明的变量”错误。它抱怨的行在 .m 文件中：

```
glEnable(GL_POINT_SMOOTH); 
```

GL_POINT_SMOOTH 是无法识别的常量。我不知道我可以用什么作为替代品，也不知道如何为它#define 一个值。任何具有 Cocos2D 或 OpenGL 知识的人都知道我可以做些什么来解决这个问题？这里分别是 .h 和 .m 文件，供任何感兴趣的人使用。我没有在我的项目中包含我正在使用的任何 OpenGL 文件。让我知道你是否需要他们。

。H

```
/*
 * CCScrollLayer
 *
 * Cocos2D-iPhone-Extensions v0.2.1
 * https://github.com/cocos2d/cocos2d-iphone-extensions
 *
 * Copyright 2010 DK101
 * http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
 *
 * Copyright 2010 Giv Parvaneh.
 * http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
 *
 * Copyright 2011-2012 Stepan Generalov
 * Copyright 2011 Brian Feller
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

#import <Foundation/Foundation.h>
#import "cocos2d.h"

@class CCScrollLayer;
@protocol CCScrollLayerDelegate

@optional

/** Called when scroll layer begins scrolling.
 * Usefull to cancel CCTouchDispatcher standardDelegates.
 */
- (void) scrollLayerScrollingStarted:(CCScrollLayer *) sender;

/** Called at the end of moveToPage:
 * Doesn't get called in selectPage:
 */
- (void) scrollLayer: (CCScrollLayer *) sender scrolledToPageNumber: (int) page;

@end

/** Scrolling layer for Menus, like iOS Springboard Screen.
 *
 * It is a very clean and elegant subclass of CCLayer that lets you pass-in an array 
 * of layers and it will then create a smooth scroller. 
 * Complete with the "snapping" effect. You can create screens with anything that can be added to a CCLayer.
 *
 * @version 0.2.1
 */
@interface CCScrollLayer : CCLayer 
{   
    NSObject <CCScrollLayerDelegate> *delegate_;

    // Holds the current page being displayed.
    int currentScreen_;

    // Number of previous page being displayed.
    int prevScreen_;

    // The x coord of initial point the user starts their swipe.
    CGFloat startSwipe_;

    // For what distance user must slide finger to start scrolling menu.
    CGFloat minimumTouchLengthToSlide_; 

    // For what distance user must slide finger to change the page.
    CGFloat minimumTouchLengthToChangePage_; 

    // Whenever show or not gray/white dots under scrolling content.
    BOOL showPagesIndicator_;
    CGPoint pagesIndicatorPosition_;
    ccColor4B pagesIndicatorSelectedColor_;
    ccColor4B pagesIndicatorNormalColor_;

    // Internal state of scrollLayer (scrolling or idle).
    int state_;

    BOOL stealTouches_;

#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
    // Holds the touch that started the scroll
    UITouch *scrollTouch_;
#endif

    // Holds pages.
    NSMutableArray *layers_;

    // Holds current pages width offset.
    CGFloat pagesWidthOffset_;

    // Holds current margin offset
    CGFloat marginOffset_;
}

@property (readwrite, assign) NSObject <CCScrollLayerDelegate> *delegate;

#pragma mark Scroll Config Properties

/** Calibration property. Minimum moving touch length that is enough
 * to cancel menu items and start scrolling a layer. 
 */
@property(readwrite, assign) CGFloat minimumTouchLengthToSlide;

/** Calibration property. Minimum moving touch length that is enough to change
 * the page, without snapping back to the previous selected page.
 */
@property(readwrite, assign) CGFloat minimumTouchLengthToChangePage;

/** Offset that can be used to let user see empty space over first or last page. */
@property(readwrite, assign) CGFloat  marginOffset;

/** If YES - when starting scrolling CCScrollLayer will claim touches, that are 
 * already claimed by others targetedTouchDelegates by calling CCTouchDispatcher#touchesCancelled
 * Usefull to have ability to scroll with touch above menus in pages.
 * If NO - scrolling will start, but no touches will be cancelled.
 * Default is YES.
 */
@property(readwrite) BOOL stealTouches;

#pragma mark Pages Indicator Properties

/** Whenever show or not white/grey dots under the scroll layer.
 * If yes - dots will be rendered in parents transform (rendered after scroller visit).
 */
@property(readwrite, assign) BOOL showPagesIndicator;

/** Position of dots center in parent coordinates. 
 * (Default value is screenWidth/2, screenHeight/4)
 */
@property(readwrite, assign) CGPoint pagesIndicatorPosition;

/** Color of dot, that represents current selected page(only one dot). */
@property(readwrite, assign) ccColor4B pagesIndicatorSelectedColor;

/** Color of dots, that represents other pages. */
@property(readwrite, assign) ccColor4B pagesIndicatorNormalColor;

#pragma mark Pages Control Properties

/** Total pages available in scrollLayer. */
@property(readonly) int totalScreens;

/** Current page number, that is shown. Belongs to the [0, totalScreen] interval. */
@property(readonly) int currentScreen;

/** Offset, that can be used to let user see next/previous page. */
@property(readwrite) CGFloat pagesWidthOffset;

/** Returns array of pages CCLayer's  */
@property(readonly) NSArray *pages;

#pragma mark Init/Creation

/** Creates new scrollLayer with given pages & width offset.
 * @param layers NSArray of CCLayers, that will be used as pages.
 * @param widthOffset Length in X-coord, that describes length of possible pages
 * intersection. */
+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) widthOffset; 
/** Inits scrollLayer with given pages & width offset.
 * @param layers NSArray of CCLayers, that will be used as pages.
 * @param widthOffset Length in X-coord, that describes length of possible pages
 * intersection. */
-(id) initWithLayers:(NSArray *)layers widthOffset: (int) widthOffset;

#pragma mark Updates 
/** Updates all pages positions & adds them as children if needed.
 * Can be used to update position of pages after screen reshape, or 
 * for update after dynamic page add/remove. 
 */
- (void) updatePages;

#pragma mark Adding/Removing Pages

/** Adds new page and reorders pages trying to set given number for newly added page.
 * If number > pages count - adds new page to the right end of the scroll layer.
 * If number <= 0 - adds new page to the left end of the scroll layer. 
 * @attention Designated addPage method. 
 */
- (void) addPage: (CCLayer *) aPage withNumber: (int) pageNumber;

/** Adds new page to the right end of the scroll layer. */
- (void) addPage: (CCLayer *) aPage;

/** Removes page if it's one of scroll layers pages (not children)
 * Does nothing if page not found.
 */
- (void) removePage: (CCLayer *) aPage;

/** Removes page with given number. Doesn nothing if there's no page for such number. */
- (void) removePageWithNumber: (int) page;

#pragma mark Moving/Selecting Pages

/* Moves scrollLayer to page with given number & invokes delegate
 * method scrollLayer:scrolledToPageNumber: at the end of CCMoveTo action. 
 * Does nothing if number >= totalScreens or < 0.
 */
-(void) moveToPage:(int)page;

/* Immedeatly moves scrollLayer to page with given number without running CCMoveTo. 
 * Does nothing if number >= totalScreens or < 0.
 */
-(void) selectPage:(int)page;

@end 
```

和 .m 文件：

```
/*
 * CCScrollLayer
 *
 * Cocos2D-iPhone-Extensions v0.2.1
 * https://github.com/cocos2d/cocos2d-iphone-extensions
 *
 * Copyright 2010 DK101
 * http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
 *
 * Copyright 2010 Giv Parvaneh.
 * http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
 *
 * Copyright 2011-2012 Stepan Generalov
 * Copyright 2011 Brian Feller
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

#import "CCScrollLayer.h"
#import "CCGL.h"

enum 
{
    kCCScrollLayerStateIdle,
    kCCScrollLayerStateSliding,
};

#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
@interface CCTouchDispatcher (targetedHandlersGetter)

- (id<NSFastEnumeration>) targetedHandlers;

@end

@implementation CCTouchDispatcher (targetedHandlersGetter)

- (id<NSFastEnumeration>) targetedHandlers
{
    return targetedHandlers;
}

@end
#endif

@interface CCScrollLayer ()

- (int) pageNumberForPosition: (CGPoint) position;

@end

@implementation CCScrollLayer

@synthesize delegate = delegate_;
@synthesize minimumTouchLengthToSlide = minimumTouchLengthToSlide_;
@synthesize minimumTouchLengthToChangePage = minimumTouchLengthToChangePage_;
@synthesize marginOffset = marginOffset_;
@synthesize currentScreen = currentScreen_;
@synthesize showPagesIndicator = showPagesIndicator_;
@synthesize pagesIndicatorPosition = pagesIndicatorPosition_;
@synthesize pagesIndicatorNormalColor = pagesIndicatorNormalColor_;
@synthesize pagesIndicatorSelectedColor = pagesIndicatorSelectedColor_;
@synthesize pagesWidthOffset = pagesWidthOffset_;
@synthesize pages = layers_;
@synthesize stealTouches = stealTouches_;

@dynamic totalScreens;
- (int) totalScreens
{
    return [layers_ count];
}

+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) widthOffset
{
    return [[[self alloc] initWithLayers: layers widthOffset:widthOffset] autorelease];
}

-(id) initWithLayers:(NSArray *)layers widthOffset: (int) widthOffset
{
    if ( (self = [super init]) )
    {
        NSAssert([layers count], @"CCScrollLayer#initWithLayers:widthOffset: you must provide at least one layer!");

        // Enable Touches/Mouse.
#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
        self.isTouchEnabled = YES;
#elif defined(__MAC_OS_X_VERSION_MAX_ALLOWED)
        self.isMouseEnabled = YES;
#endif

        self.stealTouches = YES;

        // Set default minimum touch length to scroll.
        self.minimumTouchLengthToSlide = 30.0f;
        self.minimumTouchLengthToChangePage = 100.0f;

        self.marginOffset = [[CCDirector sharedDirector] winSize].width;

        // Show indicator by default.
        self.showPagesIndicator = YES;
        self.pagesIndicatorPosition = ccp(0.5f * self.contentSize.width, ceilf ( self.contentSize.height / 8.0f ));
        self.pagesIndicatorNormalColor = ccc4(0x96,0x96,0x96,0xFF);
        self.pagesIndicatorSelectedColor = ccc4(0xFF,0xFF,0xFF,0xFF);

        // Set up the starting variables
        currentScreen_ = 0; 

        // Save offset.
        self.pagesWidthOffset = widthOffset;            

        // Save array of layers.
        layers_ = [[NSMutableArray alloc] initWithArray:layers copyItems:NO];

        [self updatePages];         

    }
    return self;
}

- (void) dealloc
{
    self.delegate = nil;

    [layers_ release];
    layers_ = nil;

    [super dealloc];
}

- (void) updatePages
{
    // Loop through the array and add the screens if needed.
    int i = 0;
    for (CCLayer *l in layers_)
    {
        l.anchorPoint = ccp(0,0);
        l.contentSize = [CCDirector sharedDirector].winSize;
        l.position = ccp(  (i * (self.contentSize.width - self.pagesWidthOffset)), 0  );
        if (!l.parent)
            [self addChild:l];
        i++;
    }
}

#pragma mark CCLayer Methods ReImpl

- (void) visit
{
    [super visit];//< Will draw after glPopScene. 

    if (self.showPagesIndicator)
    {
        int totalScreens = [layers_ count];

        // Prepare Points Array
        CGFloat n = (CGFloat)totalScreens; //< Total points count in CGFloat.
        CGFloat pY = self.pagesIndicatorPosition.y; //< Points y-coord in parent coord sys.
        CGFloat d = 16.0f; //< Distance between points.
        CGPoint points[totalScreens];   
        for (int i=0; i < totalScreens; ++i)
        {
            CGFloat pX = self.pagesIndicatorPosition.x + d * ( (CGFloat)i - 0.5f*(n-1.0f) );
            points[i] = ccp (pX, pY);
        }

        // Set GL Values
#if COCOS2D_VERSION >= 0x00020000
        ccGLEnable(CC_GL_BLEND);
        ccPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );
#define DRAW_4B_FUNC ccDrawColor4B

#else
        glEnable(GL_POINT_SMOOTH);
        GLboolean blendWasEnabled = glIsEnabled( GL_BLEND );
        glEnable(GL_BLEND);

        // save the old blending functions
        int blend_src = 0;
        int blend_dst = 0;
        glGetIntegerv( GL_BLEND_SRC, &blend_src );
        glGetIntegerv( GL_BLEND_DST, &blend_dst );
        glPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );

#define DRAW_4B_FUNC glColor4ub        

#endif
        glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );

        // Draw Gray Points
        DRAW_4B_FUNC(pagesIndicatorNormalColor_.r,
                     pagesIndicatorNormalColor_.g,
                     pagesIndicatorNormalColor_.b,
                     pagesIndicatorNormalColor_.a);

        ccDrawPoints( points, totalScreens );

        // Draw White Point for Selected Page   
        DRAW_4B_FUNC(pagesIndicatorSelectedColor_.r,
                     pagesIndicatorSelectedColor_.g,
                     pagesIndicatorSelectedColor_.b,
                     pagesIndicatorSelectedColor_.a);
        ccDrawPoint(points[currentScreen_]);

        // Restore GL Values
#if COCOS2D_VERSION >= 0x00020000
        ccPointSize(1.0f);
#else
        glPointSize(1.0f);
        glDisable(GL_POINT_SMOOTH);
        if (! blendWasEnabled)
            glDisable(GL_BLEND);

        // always restore the blending functions too
        glBlendFunc( blend_src, blend_dst );
#endif      
    }
}

#pragma mark Moving To / Selecting Pages

- (void) moveToPageEnded
{
    if (prevScreen_ != currentScreen_)
    {
        if ([self.delegate respondsToSelector:@selector(scrollLayer:scrolledToPageNumber:)])
            [self.delegate scrollLayer: self scrolledToPageNumber: currentScreen_];
    }

    prevScreen_ = currentScreen_ = [self pageNumberForPosition:self.position];
}

- (int) pageNumberForPosition: (CGPoint) position
{
    CGFloat pageFloat = - self.position.x / (self.contentSize.width - self.pagesWidthOffset);
    int pageNumber = ceilf(pageFloat);
    if ( (CGFloat)pageNumber - pageFloat  >= 0.5f)
        pageNumber--;

    pageNumber = MAX(0, pageNumber);
    pageNumber = MIN([layers_ count] - 1, pageNumber);

    return pageNumber;
}

- (CGPoint) positionForPageWithNumber: (int) pageNumber
{
    return ccp( - pageNumber * (self.contentSize.width - self.pagesWidthOffset), 0.0f );
}

-(void) moveToPage:(int)page
{   
    if (page < 0 || page >= [layers_ count]) {
        CCLOGERROR(@"CCScrollLayer#moveToPage: %d - wrong page number, out of bounds. ", page);
        return;
    }

    id changePage = [CCMoveTo actionWithDuration:0.3 position: [self positionForPageWithNumber: page]];
    changePage = [CCSequence actions: changePage,[CCCallFunc actionWithTarget:self selector:@selector(moveToPageEnded)], nil];
    [self runAction:changePage];
    currentScreen_ = page;

}

-(void) selectPage:(int)page
{
    if (page < 0 || page >= [layers_ count]) {
        CCLOGERROR(@"CCScrollLayer#selectPage: %d - wrong page number, out of bounds. ", page);
        return;
    }

    self.position = [self positionForPageWithNumber: page];
    prevScreen_ = currentScreen_;
    currentScreen_ = page;

}

#pragma mark Dynamic Pages Control

- (void) addPage: (CCLayer *) aPage
{
    [self addPage: aPage withNumber: [layers_ count]];
}

- (void) addPage: (CCLayer *) aPage withNumber: (int) pageNumber
{
    pageNumber = MIN(pageNumber, [layers_ count]);
    pageNumber = MAX(pageNumber, 0);

    [layers_ insertObject: aPage atIndex: pageNumber];

    [self updatePages];

    [self moveToPage: currentScreen_];
}

- (void) removePage: (CCLayer *) aPage
{
    [layers_ removeObject: aPage];
    [self removeChild: aPage cleanup: YES];

    [self updatePages];

    prevScreen_ = currentScreen_;
    currentScreen_ = MIN(currentScreen_, [layers_ count] - 1);
    [self moveToPage: currentScreen_];
}

- (void) removePageWithNumber: (int) page
{
    if (page >= 0 && page < [layers_ count])
        [self removePage:[layers_ objectAtIndex: page]];
}

#pragma mark Touches
#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED

/** Register with more priority than CCMenu's but don't swallow touches. */
-(void) registerWithTouchDispatcher
{   
#if COCOS2D_VERSION >= 0x00020000
    CCTouchDispatcher *dispatcher = [[CCDirector sharedDirector] touchDispatcher];
    int priority = kCCMenuHandlerPriority - 1;
#else
    CCTouchDispatcher *dispatcher = [CCTouchDispatcher sharedDispatcher];
    int priority = kCCMenuTouchPriority - 1;
#endif

    [dispatcher addTargetedDelegate:self priority: priority swallowsTouches:NO];    
}

/** Hackish stuff - stole touches from other CCTouchDispatcher targeted delegates. 
 Used to claim touch without receiving ccTouchBegan. */
- (void) claimTouch: (UITouch *) aTouch
{
#if COCOS2D_VERSION >= 0x00020000
    CCTouchDispatcher *dispatcher = [[CCDirector sharedDirector] touchDispatcher];
#else
    CCTouchDispatcher *dispatcher = [CCTouchDispatcher sharedDispatcher];
#endif

    // Enumerate through all targeted handlers.
    for ( CCTargetedTouchHandler *handler in [dispatcher targetedHandlers] )
    {
        // Only our handler should claim the touch.
        if (handler.delegate == self)
        {
            if (![handler.claimedTouches containsObject: aTouch])
            {
                [handler.claimedTouches addObject: aTouch];
            }
        }
        else 
        {
            // Steal touch from other targeted delegates, if they claimed it.
            if ([handler.claimedTouches containsObject: aTouch])
            {
                if ([handler.delegate respondsToSelector:@selector(ccTouchCancelled:withEvent:)])
                {
                    [handler.delegate ccTouchCancelled: aTouch withEvent: nil];
                }
                [handler.claimedTouches removeObject: aTouch];
            }
        }
    }
}

-(void)ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event 
{
    if( scrollTouch_ == touch ) {
        scrollTouch_ = nil;
        [self selectPage: currentScreen_];
    }
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    if( scrollTouch_ == nil ) {
        scrollTouch_ = touch;
    } else {
        return NO;
    }

    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    startSwipe_ = touchPoint.x;
    state_ = kCCScrollLayerStateIdle;
    return YES;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    if( scrollTouch_ != touch ) {
        return;
    }

    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    // If finger is dragged for more distance then minimum - start sliding and cancel pressed buttons.
    // Of course only if we not already in sliding mode
    if ( (state_ != kCCScrollLayerStateSliding) 
        && (fabsf(touchPoint.x-startSwipe_) >= self.minimumTouchLengthToSlide) )
    {
        state_ = kCCScrollLayerStateSliding;

        // Avoid jerk after state change.
        startSwipe_ = touchPoint.x;

        if (self.stealTouches)
        {
            [self claimTouch: touch];
        }

        if ([self.delegate respondsToSelector:@selector(scrollLayerScrollingStarted:)])
        {
            [self.delegate scrollLayerScrollingStarted: self];
        }
    }

    if (state_ == kCCScrollLayerStateSliding)
    {
        CGFloat desiredX = (- currentScreen_ * (self.contentSize.width - self.pagesWidthOffset)) + touchPoint.x - startSwipe_;
        int page = [self pageNumberForPosition:ccp(desiredX, 0)];
        CGFloat offset = desiredX - [self positionForPageWithNumber:page].x; 
        if ((page == 0 && offset > 0) || (page == [layers_ count] - 1 && offset < 0))
            offset -= marginOffset_ * offset / [[CCDirector sharedDirector] winSize].width;
        else
            offset = 0;
        self.position = ccp(desiredX - offset, 0);
    }
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    if( scrollTouch_ != touch )
        return;
    scrollTouch_ = nil;

    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    int selectedPage = currentScreen_;
    CGFloat delta = touchPoint.x - startSwipe_;
    if (fabsf(delta) >= self.minimumTouchLengthToChangePage)
    {
        selectedPage = [self pageNumberForPosition:self.position];
        if (selectedPage == currentScreen_)
        {
            if (delta < 0.f && selectedPage < [layers_ count] - 1)
                selectedPage++;
            else if (delta > 0.f && selectedPage > 0)
                selectedPage--;
        }
    }
    [self moveToPage:selectedPage]; 
}

#endif

#pragma mark Mouse
#ifdef __MAC_OS_X_VERSION_MAX_ALLOWED

- (NSInteger) mouseDelegatePriority
{
#if COCOS2D_VERSION >= 0x00020000
    return kCCMenuHandlerPriority - 1;
#else
    return kCCMenuMousePriority - 1;
#endif
}

-(BOOL) ccMouseDown:(NSEvent*)event
{
    CGPoint touchPoint = [[CCDirector sharedDirector] convertEventToGL: event];

    startSwipe_ = touchPoint.x;
    state_ = kCCScrollLayerStateIdle;

    return NO;
}

-(BOOL) ccMouseDragged:(NSEvent*)event
{
    CGPoint touchPoint = [[CCDirector sharedDirector] convertEventToGL:event];

    // If mouse is dragged for more distance then minimum - start sliding.
    if ( (state_ != kCCScrollLayerStateSliding) 
        && (fabsf(touchPoint.x-startSwipe_) >= self.minimumTouchLengthToSlide) )
    {
        state_ = kCCScrollLayerStateSliding;

        // Avoid jerk after state change.
        startSwipe_ = touchPoint.x;

        if ([self.delegate respondsToSelector:@selector(scrollLayerScrollingStarted:)])
        {
            [self.delegate scrollLayerScrollingStarted: self];
        }
    }

    if (state_ == kCCScrollLayerStateSliding)
    {
        CGFloat desiredX = (- currentScreen_ * (self.contentSize.width - self.pagesWidthOffset)) + touchPoint.x - startSwipe_;
        int page = [self pageNumberForPosition:ccp(desiredX, 0)];       
        CGFloat offset = desiredX - [self positionForPageWithNumber:page].x;        
        if ((page == 0 && offset > 0) || (page == [layers_ count] - 1 && offset < 0))           
            offset -= marginOffset_ * offset / [[CCDirector sharedDirector] winSize].width;
        else        
            offset = 0;

        self.position = ccp(desiredX - offset, 0);
    }

    return NO;
}

- (BOOL)ccMouseUp:(NSEvent *)event
{
    CGPoint touchPoint = [[CCDirector sharedDirector] convertEventToGL:event];

    int selectedPage = currentScreen_;
    CGFloat delta = touchPoint.x - startSwipe_;
    if (fabsf(delta) >= self.minimumTouchLengthToChangePage)
    {
        selectedPage = [self pageNumberForPosition:self.position];
        if (selectedPage == currentScreen_)
        {
            if (delta < 0.f && selectedPage < [layers_ count] - 1)
                selectedPage++;
            else if (delta > 0.f && selectedPage > 0)
                selectedPage--;
        }
    }
    [self moveToPage:selectedPage];     

    return NO;
}

- (BOOL)ccScrollWheel:(NSEvent *)theEvent
{
    CGFloat deltaX = [theEvent deltaX];

    CGPoint newPos = ccpAdd( self.position, ccp(deltaX, 0.0f) );
    newPos.x = MIN(newPos.x, [self positionForPageWithNumber: 0].x);
    newPos.x = MAX(newPos.x, [self positionForPageWithNumber: [layers_ count] - 1].x);

    self.position = newPos;
    prevScreen_ = currentScreen_;
    currentScreen_ = [self pageNumberForPosition:self.position];

    // Inform delegate about new currentScreen.
    if (prevScreen_ != currentScreen_)
    {
        if ([self.delegate respondsToSelector:@selector(scrollLayer:scrolledToPageNumber:)])
            [self.delegate scrollLayer: self scrolledToPageNumber: currentScreen_];
    }

    prevScreen_ = currentScreen_;

    return NO;

}

#endif

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:52:26.947

Cocos2D 2.0 使用 OpenGLES 2.0。

嘿，请参考我在上一个问题中的回答：[Stack_Cocos2D_CCScrollLayer](https://stackoverflow.com/questions/12988608/issue-with-ccscrolllayer-in-cocos2d-iphone-2-1-beta2/12988652#12988652)

# lua - LUA 错误代码 64：尝试索引字段“？” （零值）

> ID：13205199
> 
> 赞同：2
> 
> 时间：2012-11-03T01:46:21.897
> 
> 标签：lua

我不断弹出此代码，但我不确定错误是什么。有人可以帮我弄清楚吗 - 它说它在第 64 行。抱歉，我不确定如何将它放入代码中。这是错误行代码

```
 if ( array[j][1] < smallest ) then

            smallest = array[j][1]
            index = j   
        end

--------- [ Element Data returns ] ---------
local function getData( theElement, key )
    local key = tostring(key)
    if isElement(theElement) and (key) then

        return exports['[ars]anticheat-system']:c_callData( theElement, tostring(key) )
    else
        return false
    end
end 

-------------- [ Scoreboard ] ---------------
local screenX, screenY = guiGetScreenSize()

local width, height = 300, 420
local x = (screenX/2) - (width/2)
local y = (screenY/2) - (height/2)

local logowidth, logoheight = 275, 275
local logox = (x/2) - (logowidth/2)
local logoy = (y/2) - (logoheight/2)

local isEventHandled = false
local page = 1

local a = { "Z", "W", "Y", "G", "H", "L", "P", "A", "B" }
function getPlayerIDTable( )

    local array = { }

    for key, thePlayer in ipairs ( getElementsByType("player") ) do

        local playerID = tonumber( getData( thePlayer, "playerid") )
        if ( playerID ) then

            array[#array + 1] = { playerID, thePlayer }
        end
    end

    for i = 1, 9 do

        local j = math.random( 1, 9 )
        if ( array[i] == nil ) then

            array[i] = { j, a[ math.random( 1, 9 ) ] }
        end 
    end

    return array
end

local players = { }
function assemblePlayersByID( )

    local array = getPlayerIDTable( )
    local smallest, index, tempo

    for i = 1, #array do

        smallest = array[i][1]
        index = i

        for j = i + 1, #array do
            if ( array[j][1] < smallest ) then

                smallest = array[j][1]
                index = j   
            end
        end

        -- flip arrays
        tempo = array[i]
        array[i] = array[index]
        array[index] = tempo
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:45:56.267

该错误意味着您正在尝试索引 nil 值。

假设“第 64 行”是您发布的代码中的第一个：

```
if ( array[j][1] < smallest ) then 
```

这意味着它`array[j]`是 nil：换句话说，你的数组中没有索引 j 的值。您可能想像这样检查它：

```
if array[j] and array[j][1] and array[j][1] < smallest then 
```

请注意，您必须同时测试 array[j] 和 array[j][1]，因为如果 array[j] 存在但 array[j][1] 不存在，则`<`比较将导致`attempt to compare nil with number`错误。

# ruby - Rubinus 或 MRI 1.9.3 (YARV)？

> ID：13205200
> 
> 赞同：17
> 
> 时间：2012-11-03T01:46:24.750
> 
> 标签：ruby, ruby-1.9, rubinius, yarv

所以，我有几个问题要问，我确实浏览了互联网，但没有太多可靠的答案。大多数博客文章会相互抵消，因为它们都赞扬了不同的事物并且有基准来“证明他们的观点”（~~我一生中从未见过这么多*相互矛盾*的基准~~）。

无论如何，我的问题是：

*   **鲁比尼乌斯*真的*更快吗？**[这个明显诚实的亲鲁比尼乌斯的演讲](http://hosiawak.github.com/rubinius_presentation/)给我留下了深刻的印象。让我有点困惑的另一件事是，很多 Rubinius 是用 Ruby 本身编写的，但不知何故它比 C-Ruby 更快？那么，它一定是该语言的一个非常好的实现！
*   **EventMachine 可以与 Ruinius 一起使用吗？**据我所知，EventMachine 部分依赖于 Fibers（如果我错了，请纠正我），直到 1.9 才实现。我知道 Rubinius 最终也会支持 1.9。我不介意稍等。
*   **C 扩展在 Rubinius 中有效吗？**我编写了一个 C 扩展，它将从 TCP 流接收到的二进制消息“序列化”为 Ruby 对象，反之亦然（我认为细节并不重要，但如果它有助于回答这个问题，我会更新帖子）。这可能是*很多*消息！我设法用 Ruby 编写了相同的代码（尽管一个月后它变得毫无意义），但事实证明它是应用程序中的一个真正瓶颈。所以，我不得不使用 C 作为我的问题的“解决方案”。 **编辑**：我只记得，我将 C 用于另一项任务，它是数组的命中测试方法。基本上它只是检查一个“点”是否在一个多边形内，在 CRuby 中它是不可能慢的。
*   **如果之前的答案是“否”，那么 Rubinus 中是否有 C 扩展的替代方案？**我收集 VM 是用 C++ 编写的，所以那样。

一些“奖励”问题：

*   **C-Ruby（2.0+，YARV）会摆脱 GIL 吗？或者至少修改它以使 CRuby 支持真正的并行性？**
*   **[mruby](https://github.com/mruby/mruby)到底是什么？**我看到 matz 正在研究它，就描述而言，它看起来非常棒。它与 CRuby（性能方面）有何不同？

我为我向你发动的这场文字风暴道歉！♥

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-03T19:00:40.613

> 鲁比尼乌斯真的更快吗？

在大多数基准测试中，是的。 ![带有错误的 RBS 基准](../Images/7fa2efffc245203e4a2335873e0f0148.png)

![RBS 基准测试无错误](../Images/d3bb68da0ef2b9996b330a6e7572995c.png)

但是基准是……愚蠢的。应用程序是我们真正关心的。因此，最好的办法是对您的应用程序进行基准测试并查看它的性能如何。Rubinius 真正在 MRI 上大放异彩的两个领域是并行性和内存使用。Rubinius 没有 GIL，因此您可以利用所有可用的线程。它还具有更[复杂的 GC](http://rubini.us/doc/en/memory-system/garbage-collector/)，因此总的来说它可以在 GC 方面表现更好。

[我在 11 年 10 月为我在 RubyConf 上关于 MagLev 的演讲](http://jc00ke.com/speaking/rubyconf-2012-maglev/#/91)做了这些基准测试

> EventMachine 可以与 Rubinius 一起使用吗？

是的，如果有部分不起作用，则应报告问题。话虽如此，[目前](https://travis-ci.org/eventmachine/eventmachine/builds/4518175)EM 测试没有通过任何 Ruby 实现。

> C 扩展在 Rubinius 中有效吗？

是的。我维护[C-exts 的兼容性问题](https://github.com/rubinius/rubinius/issues/2006)，所以如果你有一个在 Travis 上测试过的，Rubinius 希望看到它通过 rbx。Rubinius 历来对 C-api 和 C-exts 有很好的支持，尽管如果有一天 Rubinius 能够以*如此快*的速度运行 Ruby并且不需要 C-exts 或 C-api，那就太好了。

> C-Ruby（2.0+，YARV）会摆脱 GIL 吗？或者至少修改它以使 CRuby 支持真正的并行性？

不，很可能不会。[Jesse Storimer](http://www.jstorimer.com/2012/11/08/matz-is-not-a-threading-guy.html)在 RubyConf 2012 的线程上对 Matz 的观点（或缺乏观点）进行了简洁的记录。Koichi Sasada 曾试图移除 GIL，而 MRI 性能刚刚下降。埃文·菲尼克斯也尝试过一次，在他创造鲁比尼乌斯之前，但没有得到很好的结果。

> mruby 到底是什么？

一个可嵌入的 Ruby 解释器，类似于 Lua。Matt Aimonetti 有[几篇文章](http://merbist.com/tag/mruby/)可能会对您有所启发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T10:35:05.167

我不太喜欢 Ruby，但我可能能够回答第一个问题。

> 鲁比尼乌斯真的更快吗？

我见过不同的基准告诉不同的事情。然而，Rubinius 部分使用 Ruby 编写的事实并不一定意味着它更慢。我对 PyPy 也有同样的想法，它是 Python 中的 Python。在大学进行了一些研究和正确的课程之后，我知道为什么。

*   据我所知，两者都是用他们语言的一个子集编写的，应该更简单。对于这样的子集，可以比整个语言更容易地优化（例如 C）解释器。
*   用自己的语言编写 Ruby/Python 解释器可以提供更大的灵活性和更快的新解释算法原型。Ruby 和 Python 存在的全部意义在于算法可以比 C 甚至汇编程序更快地实现。很多时候，更快的算法比解释器的小开销更重要。

顺便提一句。用同一种语言为一种语言编写口译员也是一种常见的学术实践，以展示该语言的强大程度。在一节课中，我们在 Lisp 中用 Lisp 编写了 Lisp。

# javascript - 用于从导航滑动内容的 JS

> ID：13205211
> 
> 赞同：0
> 
> 时间：2012-11-03T01:47:53.247
> 
> 标签：javascript, slide, nav

基本上，我一直在尝试找到一个 JS Fiddle 来滑动从导航中选择的内容。我已经附加了一个链接，类似于我在滑动内容方面正在寻找的东西。简而言之，我将有一个关于页面，页面上有一个子导航，用于 4 个内容框。我想在选择新部分时将此框滑入和滑出屏幕。例如内容框 1 首先可见，如果有人导航到框 4，则 1 会滑出，2 会滑过，3 会滑过，4 会滑上。我认为该链接正是我想要的。任何帮助都会很棒。谢谢。

[http://www.charliegentle.co.uk/](http://www.charliegentle.co.uk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:03:37.137

这是我做的一个有内容滑动的小提琴。当鼠标进入时，内容从左到右滑入。当鼠标离开时，内容从右向左滑出并消失。

[滑动小提琴](http://jsfiddle.net/NOLAnuffsaid/B27kx/4/)

```
$('div').mouseenter(function() {
$('li').animate({
    display: 'toggle',
    margin: '15px',
    opacity: '1'
}, 500); 
```

});

```
$('div').mouseleave(function() {
$('li').animate({
    margin: '15px 0px 15px -100px',
    position: 'absolute',
    opacity: '0'
}, 800).fadeToggle(); 
```

});​</p>

# python - 二叉搜索树 - 插入函数

> ID：13205212
> 
> 赞同：1
> 
> 时间：2012-11-03T01:47:55.900
> 
> 标签：python

大家晚上好

我的任务是在 Python 中设计一个将构建二叉搜索树的函数。当我自己浏览该功能时，它似乎很有意义并且应该可以工作。但是，无论出于何种原因，它只构建最后一个“树”，而不保存任何先前的树信息。我已经包含了我的类、构造函数，当然还有函数。任何提示表示赞赏！为了测试该功能，我使用以下行：

```
newMap = mapInsert1('one', 1, mapInsert1('two', 2, mkEmptyMap()))

///CODE///
class EmptyMap():
    __slots__ = ()

class NonEmptyMap():
    __slots__ = ('left', 'key', 'value', 'right')

def mkEmptyMap():
    return EmptyMap()

def mkNonEmptyMap(left, key, value, right):
    nonEmptyMap = NonEmptyMap()
    nonEmptyMap.left = left
    nonEmptyMap.key = key
    nonEmptyMap.value = value
    nonEmptyMap.right = right

    return nonEmptyMap

def mapInsert1(key, value, node):
    if isinstance(node, EmptyMap):
        node = mkNonEmptyMap(mkEmptyMap(), key, value, mkEmptyMap())
        return node
    else:
        if key > node.key:
            return mapInsert1(key, value, node.right)
        elif key < node.key:
            return mapInsert1(key, value, node.left)
        elif key == node.key:
            node.value = value
            return mapInsert1(key, value, node)
        else:
            raise TypeError('Bad Map') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:34:32.737

好的，我在这里得到了你的答案。您的逻辑本身没有问题，只是您尝试在 Python 中实现算法的问题。

您尝试实现算法的方式存在几个问题。其中第一个与变量如何传递给函数有关。我建议[在此处阅读此 StackOverflow 问题，](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)该问题讨论了如何将变量传递到 Python 函数中。长话短说，由于您在代码中传递和更新变量的方式，您总是在更新变量的本地范围副本，这实际上不会影响您要更新的变量。

要在您的代码中看到这一点，请尝试以下操作：

```
>>> newMap = mapInsert1('one', 1, mapInsert1('two', 2, mkEmptyMap())) 
```

正如你所说，这不起作用。但这确实：

```
>>> newMap = mapInsert1('one', 1, mkEmptyMap())
>>> newMap.right = mapInsert1('two', 2, mkEmptyMap())) 
```

但这不是很有帮助，因为在尝试添加新节点之前，您必须知道要更新哪个节点。

为了修复您的代码，我所做的是清理您的类实现。我做了以下更改：

1.  首先，我开始使用适当的构造函数。Python 类使用**init**函数作为构造函数。请参阅[此处](https://stackoverflow.com/questions/9318740/purpose-of-init)了解更多信息。
2.  其次，我添加了插入功能。这才是真正解决您的问题的方法。使用此函数意味着您不会覆盖局部范围的变量，而是改变外部变量。再次，查看我上面链接的变量传递问题以获取更多详细信息。
3.  第三，我使空地图只是地图类的一个空实例，并去掉了 isinstance() 检查。在 Python 中，通常最好尽可能避免使用 isinstance。 [这](http://www.quora.com/Python-programming-language-1/When-is-it-acceptable-to-use-isinstance-in-Python)是有关避免 isinstance 的更多信息
4.  第四，我修复了代码中的一个无限循环错误。如果您查看`elif key == node.key`条件，您会`mapInsert1`再次使用相同的参数进行调用，这会给您一个无限递归循环。

这是生成的代码：

```
class Map():
    __slots__ = ('left', 'key', 'value', 'right')

    def __init__(self, left, key, value, right):
        self.left = left
        self.key = key
        self.value = value
        self.right = right

    def insert(self, left, key, value, right):
        self.left = left
        self.key = key
        self.value = value
        self.right = right

    def isEmpty(self):
        return self.left == self.right == self.key == self.value == None

def mkEmptyMap():
    return Map(None, None, None, None)

def mapInsert1(key, value, node):
    if node.isEmpty():
        print '0'
        node.insert(mkEmptyMap(), key, value, mkEmptyMap())
        return node
    else:
        if key > node.key:
            print '1'
            return mapInsert1(key, value, node.right)
        elif key < node.key:
            print '2'
            return mapInsert1(key, value, node.left)
        elif key == node.key:
            print '3'
            node.value = value
            return node
        else:
            raise TypeError('Bad Map') 
```

这是一个快速测试：

```
>>> root = mapInsert1('five', 5, mkEmptyMap())
>>> mapInsert1('four', 4, root)
>>> mapInsert1('ace', 1, root)
>>> mapInsert1('five', 'five', root)
>>> root.left.isEmpty()
Out: False
>>> root.left.key
Out: 'ace'
>>> root.left.value
Out: 1
>>> root.right.isEmpty()
Out: False
>>> root.right.key
Out: 'four'
>>> root.right.value
Out: 4
>>> root.key
Out: 'five'
>>> root.value
Out: 'five' 
```

# python - 所有 O(1) 函数的运行时间完全相同。对或错？

> ID：13205215
> 
> 赞同：3
> 
> 时间：2012-11-03T01:48:19.830
> 
> 标签：python

“所有 O(1) 函数的运行时间完全相同。” 对或错？任何人都可以向我解释答案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T01:51:19.850

错误的。O(1) 表示**恒定时间**。这意味着无论输入的大小是多少，函数将在或多或少相同的时间内运行 - 运行时不会随着输入而扩展。

这意味着两个 O(1) 函数都将在恒定时间内运行，尽管它们的常数可能不同。因此，如果您有两个 O(1) 函数`f`和`g`，每个函数计算相同的结果，期望相似的输入（假设他们期望列表，为了讨论），运行时间`f`不取决于列表的大小；的运行时间也没有`g`。

但是，如果`f`计算答案的步骤比 's 更复杂（或耗时）`g`，则`f`'s 的运行时间将超过`g`'s - 终止所需的秒数`f`（我们称之为 value `fsec`）将超过终止所需的秒数`g`（我们称之为 value `gsec`）。尽管如此，`fsec`也不`gsec`依赖于输入列表的大小——无论输入列表有多大或多小，它们都是相同的——但`gsec`总是小于`fsec`.

这是因为运行时不依赖于输入列表的大小，它们被归类为 O(1) 算法——而不是因为它们执行特定数量的操作。

# python - matplotlib 的 histogramdd 是如何工作的？

> ID：13205219
> 
> 赞同：6
> 
> 时间：2012-11-03T01:49:12.823
> 
> 标签：python, numpy, histogram

我发现 histogramdd 的输出令人困惑。例如：

```
h, edges = histogramdd([[1,2,1],[4,2,1]],bins=2)

h -> [[ 1\.  1.]
     [ 1\.  0.]]
edges -> [array([ 1\. ,  1.5,  2\. ]), array([ 1\. ,  2.5,  4\. ])] 
```

也许我不理解[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogramdd.html)，但似乎建议输入应该是一个数组，其中`N`行代表数据点，`D`列代表维度（因此在这种情况下，我们正在处理三个维度中的两个数据点），我猜中的每个数组`edges`代表一个不同的维度，但根据输出似乎没有意义`h`。

这应该如何解释？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T04:06:35.083

**更新**

上次我错了。现在这是对 histogramdd 的正确解释。首先，在 histogramdd 中使用数组非常重要，否则会输出虚假结果：

比较一下：

```
In [59]: h, edges = histogramdd([[1,2,4],[4,2,8],[3,2,1],[2,1,2],[2,1,3],[2,1,1],[2,1,4]],bins=3)
h.shape
Out[59]: (3, 3, 3, 3, 3, 3, 3) 
```

对此：

```
In [60]: h, edges = histogramdd(array([[1,2,4],[4,2,8],[3,2,1],[2,1,2],[2,1,3],[2,1,1],[2,1,4]]),bins=3)
h.shape
Out[60]: (3, 3, 3) 
```

使用第二种方法，我们得到了合理的结果：

```
In [61]: h, edges = histogramdd(array([[1,2,4],[4,2,8],[3,2,1],[2,1,2],[2,1,3],[2,1,1],[2,1,4]]),bins=3)
In [64]: h
Out[64]:
array([[[ 0.,  0.,  0.],
        [ 0.,  0.,  0.],
        [ 0.,  1.,  0.]],

       [[ 3.,  1.,  0.],
        [ 0.,  0.,  0.],
        [ 0.,  0.,  0.]],

       [[ 0.,  0.,  0.],
        [ 0.,  0.,  0.],
        [ 1.,  0.,  1.]]])
In [65]: edges
Out[65]:
[array([ 1.,  2.,  3.,  4.]),
 array([ 1\.        ,  1.33333333,  1.66666667,  2\.        ]),
 array([ 1\.        ,  3.33333333,  5.66666667,  8\.        ])] 
```

我们的输入是`[1,2,4], [4,2,8], etc`. 边缘表示每个维度的箱。在这个例子中，`[1,2,4]`计数如下： 1 属于第一个 bin，`array([1.,2.,3.,4.])`因为它在 1 和 2 之间，2 属于第三个 bin，`array([ 1\. , 1.33333333, 1.66666667, 2\. ])`因为它在 1.6666667 和 2 之间，4 属于第二个 bin，`array([ 1\. , 3.33333333, 5.66666667, 8\. ])`因为它在 3.33333333 和 5.66666667 之间. 所以我们有第一个 bin，第三个 bin 和第二个 bin 作为 point 的坐标`[1,2,4]`。这意味着我们正在计算第一个数组第三行第二列中的元素：

```
[[ 0.,  0.,  0.],
[ 0.,  0.,  0.],
[ 0.,  1*.,  0.]] 
```

我添加了一个 * 让您更容易识别它。第二个坐标`[4,2,8]`分别位于 x、y、z 的第三个 bin、第三个 bin 和第三个 bin 中（第三个数组，第三行，第三列）：

```
[[ 0.,  0.,  0.],
[ 0.,  0.,  0.],
[ 1.,  0.,  1.*]]]) 
```

作为最后一个示例，第三个坐标`[3,2,1]`分别位于 x、y、z 的第三个 bin、第三个 bin 和第一个 bin 中（第三个数组，第三行，第一列）：

```
[[ 0.,  0.,  0.],
 [ 0.,  0.,  0.],
 [ 1.*,  0.,  1.]] 
```

# css - div内的iframe高度固定

> ID：13205224
> 
> 赞同：1
> 
> 时间：2012-11-03T01:50:26.823
> 
> 标签：css, html, iframe

我有一个 div，`height: 485px`我想在其中放置一个宽度为 100% 的 iframe，以便用户可以滚动 div 而不是滚动条（我这样做是因为我使用的是 CSS 滚动条）。

```
<div id="demo1"  style="height:485px; overflow:scroll;float: left;overflow-x: hidden;">
    <iframe height="100%" width="455px"  scrolling="no" frameborder="0" src="www" ></iframe>
</div>
```

我试图将样式包含到 iframe`style="height: auto;"`或 100% 但不起作用。

任何建议如何检查 iframe 的高度？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:07:32.820

要获得 iframe 的高度，您需要在两个窗口之间进行通信。如果你只支持 IE8+，那么使用[`postmessage`](https://developer.mozilla.org/fr/docs/DOM/window.postMessage). 您基本上在 iframe 中使用脚本（1- iframe 内容归您所有，然后您添加脚本，或者 iframe 的所有者信任您并添加您的代码片段）。

如果您想支持较旧的浏览器，那么您将获得很多乐趣[`breaking the cross domain barrier`](http://alexsexton.com/blog/2011/06/breaking-the-cross-domain-barrier-screencast/)。

但是，这确实是获得 iframe 内部高度的唯一方法。

我不确定我是否完全理解您的用例，但在我看来，您是在 iframe 中加载一个完整的网站以使用一些特殊的滚动效果吗？如果确实如此，请认真考虑其他解决方案，搞乱跨域通信以获得简单的视觉效果并不是最好的时间利用（加上嵌套完整网站 iframe 的性能损失）。

希望这有帮助！

# javascript - HighCharts中动态添加系列的预处理

> ID：13205225
> 
> 赞同：0
> 
> 时间：2012-11-03T01:50:41.893
> 
> 标签：javascript, highcharts

您好我想问一下如何在Highcharts中正确实例化和处理动态添加的系列。

我带来了一个这样的系列实例：

```
var newSeries = new Highcharts.Series();
var newData = [];
date = Date.parse(newDate() +' UTC');
name = 'datapoint name';

newData.push([date, name]);

newSeries.name = 'Somename';

//newData variable processing
newSeries.data = newData;
newSeries.color = "#EEEEEE";
newSeries.showInLegend = false;
newSeries.index = -1;

chart.addSeries(newSeries); 
```

使用此代码，我能够在 Highchart 对象运行时添加一个新系列。但是，在将其添加到实际图表之前，我想对我的系列对象进行一些额外的处理。

我试过了：

`newSeries.marker.enabled = "false";`

`newSeries.marker.states.hover = "false";`

`newSeries.index = -1; //to be able to send the series at the backmost part of the chart`

但未能达到预期的效果。

如果可能的话，有人可以为我指出正确的方向，即如何正确地实例化一个包含`series`对象的`marker`对象吗？任何帮助将不胜感激。

**编辑：格雷格的正确答案**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:09:45.843

如果将每个点添加为对象，则您可以控制标记，如下所示：

```
function addSeries(chart) {

        var newSeries = new Highcharts.Series();
        newSeries.name = 'Tokyo';
        newSeries.data = [{y: 1}, {y:20}, {y:23}, {y:11}];
        newSeries.zIndex = -1;

         for (var i = 0; i < newSeries.data.length; i++) {
             var datum = newSeries.data[i];
             datum.marker = {
                 enabled: false,
                 states: {
                     hover: {
                         enabled: false,
                         lineColor: '#ff0000'
                     }
                 }
            };
         }

        chart.addSeries(newSeries);     

    } 
```

这是一个工作示例：http: [//jsfiddle.net/LrvB9/](http://jsfiddle.net/LrvB9/)

# algorithm - 从三角形集计算顶点法线以进行 Gouraud 着色的最有效算法

> ID：13205226
> 
> 赞同：4
> 
> 时间：2012-11-03T01:50:51.257
> 
> 标签：algorithm, graphics, normals, gouraud

我们得到一组三角形。每个三角形是三个点。每个点都是实数的三元组。我们可以计算每个三角形的表面法线。然而，对于 Gouraud 着色，我们需要顶点法线。因此我们必须访问每个顶点并查看共享该顶点的三角形，平均它们的表面法线，我们得到顶点法线。

实现这一目标的最有效算法和数据结构是什么？

一个天真的方法是这样的（伪python代码）：

```
MAP = dict()
for T in triangles:
  for V in T.vertices:
    key = hash(V)
    if MAP.has(key):
      MAP[key].append(T)
    else:
      MAP[key] = []
      MAP[key].append(T)

VNORMALS = dict()
for key in MAP.keys():
  VNORMALS[key] = avg([T.surface_normal for T in MAP[key]]) 
```

有没有更有效的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T02:39:28.657

访问每个三角形，计算每个三角形的法线，将它们添加到每个角顶点的顶点法线。
然后在最后，对每个顶点的法线进行归一化。

然后至少你只需要遍历三角形一次并且你只存储一个法线/顶点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T23:29:32.273

每个顶点属于一个或多个面（通常是三角形，有时是四边形——我将在这个答案中使用三角形）。

未连接到任何其他三角形的三角形不能被“平滑”。它是平的。只有当一张脸有邻居时，你才能推理将它们平滑在一起。

对于多个面相交的顶点，计算每个面的法线。两个向量的叉积返回一个垂直（法线）向量，这就是我们想要的。

```
A --- B
  \ /
   C

v1 = B - A
v2 = C - A
normal = v1 cross v2 
```

请注意在所有面上一致地计算这些向量，否则您的法线可能与您需要的方向相反。

因此，在多个面相交的顶点处，对面的法线求和，对结果向量进行归一化，并将其应用于顶点。

有时您有一个网格，其中的某些部分要平滑，而其他部分则不需要。一个易于描绘的例子是由三角形组成的圆柱体。圆柱体的圆形表面会很好地平滑，但如果你从尖脊周围顶点的平端考虑三角形，它看起来会很奇怪。为避免这种情况，您可以引入一条规则，忽略与您正在计算的面的法线偏离太远的面的法线。

**编辑**有一个非常好的[视频展示了计算 Gourad shading 的技术](http://www.youtube.com/watch?v=PMgjVJogIbc)，尽管它没有讨论实际的算法。

你可能想看看 Three.js 的源代码。具体来说，`computeVertexNormals`功能。它不支持保持锋利的边缘。算法的效率在很大程度上取决于对基元建模的方式。

# mysql - MySQL 根据 IF/CASE 语句选择某些行

> ID：13205238
> 
> 赞同：2
> 
> 时间：2012-11-03T01:52:40.130
> 
> 标签：mysql, select, if-statement, case, multiple-tables

类似以下的事情是我想要做的

```
SELECT id, status, Gid, Uid, note FROM notes LIMIT 10 
```

但状态 ID 可能不同，它需要类似于以下内容

```
SELECT a.id, a.status, a.Gid, a.Uid, a.note
FROM notes as a
WHERE
  IF(a.status < 2, DONT SELECT),
  IF(a.status == 2, 
    (SELECT approved FROM friends WHERE Uid = a.Uid AND Fid = ".$_SESSION['Uid'].") 
      IF(approved = 1, SELECT ROW, else DONT)
  )
  IF(a.status == 3, SELECT)
  IF(a.status == 4,
     (SELECT Gid FROM friends WHERE Uid = a.Uid AND Fid = ".$_SESSION['Uid'].")
     IF(Gid == a.Gid, SELECT ROW, else DONT)
ORDER BY id DESC
LIMIT 10 
```

我查找了 CASE 命令，但不确定如何使用它，但我可以看到这是这样做的方法，但是是的.. 我不知道该怎么做。以上是我正在尝试做的一个示例，a.Uid 可以是不同的 id，所以当状态 == 2 或 4 时，我们需要查看查看用户是已批准的朋友还是在 groupId (Gid )

任何解决此查询的帮助将不胜感激。如果需要，我可以稍微更改一下注释表，因为它尚未投入生产，但不鼓励。我愿意接受建议

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:56:31.197

我认为这会做你想要的：

```
select a.id, a.status, a.Gid, A.Uid, a.note
FROM notes a
LEFT JOIN friends f ON f.Uid = a.Uid AND f.Fid = $_SESSION[Uid]
WHERE (a.status = 2 AND f.approved = 1)
OR a.status = 3
OR (a.status = 4 AND f.Gid = a.Gid)
ORDER BY a.id DESC
LIMIT 10 
```

# javascript - 如何触发 javascript 在文档窗口调整大小时执行（不刷新页面）？

> ID：13205240
> 
> 赞同：0
> 
> 时间：2012-11-03T01:53:14.793
> 
> 标签：javascript, css, triggers, resize, execute

每当我调整浏览器窗口的大小时，我都会遇到执行 javascript 的问题。我正在使用以下 javascript：

```
$(document).ready(function(){
    var heightNum = $('#work-details-info').height() + 39;
    if (($(document).width() > 767) && ($(document).width() < 900)) { 
    $('#work-details-left-cntr').css("height", (heightNum));
    }
}); 
```

它正在计算特定 div 的高度。然后将 39px 添加到该高度，并将新高度设置为另一个 div。每当我调整页面大小然后按刷新/重新加载时，这都能完美运行。但是，我希望它无需刷新/重新加载即可触发。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:57:21.150

试试这个：

```
$(window).resize(function () {
  var heightNum = $('#work-details-info').height() + 39;
  if (($(document).width() > 767) && ($(document).width() < 900)) { 
    $('#work-details-left-cntr').css("height", (heightNum));
  }
}); 
```

# python - 使用 webapp2 的天蓝色网站中的 python

> ID：13205245
> 
> 赞同：2
> 
> 时间：2012-11-03T01:54:21.657
> 
> 标签：python, azure, webapp2

我想尝试使用 python 开发网站，上传到 azure 网站。我看到有一个使用 django 的教程。有使用 webapp2 的教程吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T07:23:50.007

据我所知，Windows Azure 网站不支持 Python。

# iphone - 当你的精灵表变得太大时该怎么办？

> ID：13205247
> 
> 赞同：0
> 
> 时间：2012-11-03T01:54:48.190
> 
> 标签：iphone, cocos2d-iphone, sprite-sheet, ccspritebatchnode

我刚刚为我的游戏填充了精灵表，所以我不得不将最大宽度从 2048 增加到 4096。现在精灵表不会在我的 iphone 4 上加载，尽管它在我的 iphone 5 上加载正常，导致我认为这是硬件问题或 iOS 版本问题，因为 4 仍在 iOS 5.1 上。

在这种情况下我能做什么？我已经在精灵表中包含了我的游戏的背景，这占据了大部分空间。我应该将它从精灵表中删除并将其添加为自己的文件吗？我最好开始第二张精灵表吗？就性能而言，最佳解决方案是什么？有没有办法让更大的精灵表在旧设备上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:09:59.457

这是硬件限制。解决方案？使用多个精灵表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:18:37.697

如果我想修剪精灵表的大小，我会从精灵表中删除背景图像。

# .net - 为什么我的子记录与保存到 Access 的数据集中的父记录不相关？

> ID：13205248
> 
> 赞同：1
> 
> 时间：2012-11-03T01:54:58.623
> 
> 标签：.net, visual-studio-2010, ms-access, dataset

所以我有一个带有父表的 MS Access 数据库：

```
ID Autonumber
Description Text 
```

子表：

```
ID AutoNumber 
Description Text 
ParentID Number 
```

我创建了关系：

```
Parent column: ID
Child column: ParentID
Enforce Ref Integrity, Cascade Update and Cascade Delete 
```

我已将其放入 Visual Studio 2010 中，向导已创建数据集和适配器。我已修改 xsd 以将关系设置为 ，`Both Relation and Foreign Key Constraint`并将`Update/Delete`规则设置为`Cascade`.

所以我尝试添加一个带有关联子记录的父记录：

```
var taParent = new TestDataSetTableAdapters.ParentTableAdapter();
var taChild = new TestDataSetTableAdapters.ChildTableAdapter();
var ds = new TestDataSet();
taParent.Fill(ds.Parent);
taChild.Fill(ds.Child);

var rowParent = ds.Parent.NewParentRow();
rowParent.Description = DateTime.Now.ToString();
ds.Parent.AddParentRow(rowParent);

var rowChild = ds.Child.NewChildRow();
rowChild.ChildText = DateTime.Now.ToString();
ds.Child.AddChildRow(rowChild);

taParent.Update(ds);
var parentId = rowParent.ID;  // <-- This is still -1
// taParent.Fill(ds.Parent);  // <-- Doing this hoping to reload the parent record gives:  Cannot clear table Parent because ForeignKeyConstraint ParentChild enforces constraints and there are child rows in Child.

taChild.Update(ds.Child); 
```

但子记录 ParentID 为空。

如果我尝试：

```
rowChild.SetParentRow(rowParent); 
```

我去拿
`You cannot add or change a record because a related record is required in table 'Parent'.`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:55:09.860

您是否在实际更新并包含数据库中的正确内容后`taParent.Update(ds)`检查`rowParent`过`ID`？

*   如果是这样，您是否尝试`rowChild.SetParentRow(rowParent)`在保存孩子之前进行设置`taChild.Update(ds.Child)`？

*   如果您`rowParent`在 之后不包含有效 ID `taParent.Update(ds)`，您是否尝试在将其分配给孩子之前从数据库中重新加载它？

看起来问题可能与以下事实有关：在将数据保存到数据库之前无法知道自动增量 ID，然后从中重新加载，以便您可以将该值分配给其他记录。

# java - 使用 JFreeChart 更改系列时出现随机错误

> ID：13205251
> 
> 赞同：8
> 
> 时间：2012-11-03T01:56:02.397
> 
> 标签：java, swing, concurrency, jfreechart

我正在制作一个显示背景计算结果的 GUI。但在此之前，我想测试更改数据集。这是我的代码：

```
 DefaultXYDataset dataset = new DefaultXYDataset();
@Override
        public void run() {
                // TODO Auto-generated method stub
                for (int i = 0; i < periods; i++) {
                        series[0][i] = (double) i;
                        series[1][i] = 0;
                }
                dataset.addSeries("Series0", series);
                for (int it = 0; it < 10; it++) {
                        series[1][random.nextInt(periods)] =  random.nextInt(100) / 2;
                        double[][] d = new double[2][periods];
                        for (int i = 0; i < periods; i++) {
                                d[0][i] = series[0][i];
                                d[1][i] = series[1][i];
                        }
                        dataset.removeSeries("Series0");
                        dataset.addSeries("Series0", series);
//                      try {
//                              Thread.sleep(100);
//                      } catch (java.lang.InterruptedException ex) {
//                      }
                } 
```

如您所见，我想更改图表上的点（每次完成“一些复杂的计算”时）-这种更改是在我在另一个类中调用的线程中。我的问题是这整个概念行不通。它抛出'系列索引超出范围'-IllegalArgumentException，'索引超出范围' - 一些库内部数组列表等。我没有使用DynamicTimeSeriesCollection，因为我需要X轴是我的内部迭代次数而不是时间期间，并且还会在“某些计算”完成时更新，而不是每隔一段时间。你能告诉我我做错了什么吗？还是有更好的方法来更新/刷新图表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T02:10:20.270

您的代码段未正确同步；您应该`dataset`从 a 的`process()`方法更新您的，如此[处](https://stackoverflow.com/a/4637725/230513)[`SwingWorker`](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)所示。因为您的域是“我的内部迭代次数”，所以不要使用; 而是使用 a ，如 中所示。`DateAxis``NumberAxis`[`ChartFactory.createXYLineChart()`](https://github.com/jfree/jfreechart/blob/c1a6c13526273a319319d2dc8979e5b5b2c97531/src/main/java/org/jfree/chart/ChartFactory.java#L1527)

附录：[示例](https://stackoverflow.com/a/4637725/230513)的这种变化在折线图上绘制了工人的进度。请注意，`createXYLineChart()`用于`NumberAxis`域和范围。给定`series`折线图数据集中的 a，还要注意如何在`process()`新数据到达时安全地更新数据集；收听图表将自行更新作为响应。

```
private XYSeries series = new XYSeries("Result");
…
@Override
protected void process(List<Double> chunks) {
    for (double d : chunks) {
        label.setText(df.format(d));
        series.add(++n, d);
    }
} 
```

[![图表](../Images/31ffb9dd3284169eee91509398f67715.png)](https://i.stack.imgur.com/4C3CW.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.beans.PropertyChangeEvent;
import java.text.DecimalFormat;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see https://stackoverflow.com/a/13205322/230513
 * @see https://stackoverflow.com/questions/4637215
 */
public final class ChartWorker {

    private static final String S = "0.000000000000000";
    private final JProgressBar progressBar = new JProgressBar();
    private final JLabel label = new JLabel(S, JLabel.CENTER);
    private final XYSeries series = new XYSeries("Result");
    private final XYDataset dataset = new XYSeriesCollection(series);

    private void create() {
        JFrame f = new JFrame("√2");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(progressBar, BorderLayout.NORTH);
        JFreeChart chart = ChartFactory.createXYLineChart(
            "Newton's Method", "X", "Y", dataset,
            PlotOrientation.VERTICAL, false, true, false);
        XYPlot plot = (XYPlot) chart.getPlot();
        plot.getRangeAxis().setRange(1.4, 1.51);
        plot.getDomainAxis().setStandardTickUnits(
            NumberAxis.createIntegerTickUnits());
        XYLineAndShapeRenderer renderer
            = (XYLineAndShapeRenderer) plot.getRenderer();
        renderer.setSeriesShapesVisible(0, true);
        f.add(new ChartPanel(chart) {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(640, 480);
            }
        }, BorderLayout.CENTER);
        f.add(label, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        runCalc();
    }

    private void runCalc() {
        progressBar.setIndeterminate(true);
        TwoWorker task = new TwoWorker();
        task.addPropertyChangeListener((PropertyChangeEvent e) -> {
            if ("progress".equals(e.getPropertyName())) {
                progressBar.setIndeterminate(false);
                progressBar.setValue((Integer) e.getNewValue());
            }
        });
        task.execute();
    }

    private class TwoWorker extends SwingWorker<Double, Double> {

        private static final int N = 5;
        private final DecimalFormat df = new DecimalFormat(S);
        double x = 1;
        private int n;

        @Override
        protected Double doInBackground() throws Exception {
            for (int i = 1; i <= N; i++) {
                x = x - (((x * x - 2) / (2 * x)));
                setProgress(i * (100 / N));
                publish(x);
                Thread.sleep(1000); // simulate latency
            }
            return x;
        }

        @Override
        protected void process(List<Double> chunks) {
            for (double d : chunks) {
                label.setText(df.format(d));
                series.add(++n, d);
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new ChartWorker()::create);
    }
} 
```

# linux - 如何通过〜/ .nanorc关闭（或至少覆盖）nano中的语法突出显示？

> ID：13205254
> 
> 赞同：12
> 
> 时间：2012-11-03T01:56:46.690
> 
> 标签：linux, syntax-highlighting, text-editor, color-scheme, nano

我正在努力寻找关于禁用或覆盖 nano 编辑器颜色设置的明确答案。

默认情况下，我的系统上启用了颜色语法突出显示。单击 ALT+Y 禁用此功能，这正是我想要的默认设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-29T10:52:54.847

要禁用语法突出显示，请将以下行写入`~/.nanorc`：

```
set quiet
syntax "disabled" "." 
```

第一行防止错误报告。第二行定义了一种新的颜色语法。

您还可以在 : 中定义包含您喜欢的颜色的单一语法`~/.nanorc`：

```
syntax "disabled" "."
color brightgreen,black "." 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-09T20:17:04.177

对于将来的参考，我要补充一点，您可以使用命令行参数运行不带颜色的 nano`-Y`

```
nano -Ynone myfile.txt 
```

> "none" 语法被保留；在命令行上指定它与根本没有语法相同。

您可以在 .bash_profile 文件中设置别名：

```
alias nano='nano -Ynone' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T21:08:52.993

因为我运行的是白色背景终端，所以这对我来说比上面的效果更好。它只是使所有文本再次变黑。

```
set quiet
syntax "disabled" "."
color black "." 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-25T14:11:05.160

将以下内容添加到您的 ~/.nanorc 文件中以禁用所有文件类型的语法突出显示。

```
syntax "" ""
color white "" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T16:56:19.923

nano 有一个限制，即每个都`syntax`需要至少一个颜色规则。而且，`nano`至少在 4.0 上，颜色规则的正则表达式不能为空。但是您可以制定仅针对空白的规则，或仅针对空行的规则。

我建议首先定义一个极简的配色方案，以您可以容忍的方式应用颜色。例如，此规则在您有尾随空格的地方将背景设置为绿色。

```
syntax "nothing" "."
color ,green "[[:space:]]+$" 
```

您还可以创建针对空行的规则。这条规则没有明显的效果，但右手边在技术上不是空的，所以`nano`会接受它。

```
syntax "nothing" "."
color green "^$" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-15T18:23:44.653

不要使用`syntax "disabled" "."`并强制关闭所有 hghlighting，而是将其添加到 ~/.nanorc 的底部，并在不需要突出显示时使用别名：

```
 ## Syntax - Black and White only (for override)
 syntax "blackandwhite" "."
 color white,black "." 
```

然后：

```
 nano --syntax=blackandwhite myfile-nohighlighting.php 
```

（输入太多？然后在 .bashrc/shellrc 中使用别名）：

```
 alias bw='nano --syntax=blackandwhite' 
```

**或者**您可以简单地（参见@Adam 回答）：

```
 alias bw='nano -Ynone' 
```

并避免创建一个亮点配置文件。

然后您可以使用别名打开并且没有突出显示：

```
 bw myfile.php 
```

以这种方式使用它，您还可以在 .rc 中保留高亮显示，以备不时之需。

# windows - 如何为 Windows 资源管理器上下文菜单创建应用程序？

> ID：13205267
> 
> 赞同：0
> 
> 时间：2012-11-03T01:59:41.203
> 
> 标签：windows

我不知道这个过程到底是怎么调用的，但我想创建一个只存在于 Windows 资源管理器上下文菜单中的应用程序（左键单击资源管理器），例如[http://www.extrabit.com/copyfilenames/](http://www.extrabit.com/copyfilenames/)但我想要创建另一种类型的应用程序。我从哪里开始？我熟悉 C++、C#、Visual Studio...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:13:51.040

您正在寻找的称为外壳扩展，有关更多信息，请查看有关此主题的这些 MSDN 条目。

*   [`Working with Shell Extensions`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468984%28v=vs.85%29.aspx)
*   [使用 Shell 实例对象创建 Shell 扩展](http://msdn.microsoft.com/en-us/library/ms997573.aspx)
*   [创建 Shell 扩展处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144067%28v=vs.85%29.aspx)
*   [注册 Shell 扩展处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144110%28v=vs.85%29.aspx)
*   [演练：创建 Shell 扩展](http://msdn.microsoft.com/en-us/library/hh290138.aspx)

# android - Android浏览器中的Textarea被键盘隐藏

> ID：13205273
> 
> 赞同：6
> 
> 时间：2012-11-03T02:01:18.190
> 
> 标签：android, html, css, cross-browser

在 iOS 中，即使对于包含在 div 中`position: fixed`的 textarea，当 textarea 具有焦点时，操作系统也会确保它是可见的（这有时意味着向上滑动整个浏览器窗口），因此 textarea 不会被键盘隐藏。

在 Android 浏览器中（我已经在 2.3 和 4.0 以及 Chrome 4.0 中测试了股票浏览器），这不会发生。textarea 被键盘覆盖，用户看不到她在输入什么。

作为仅适用于 Android 的临时解决方法，我将其设置为`position: fixed`打开`textarea:focus`并将其移至屏幕顶部，以确保它可见。

有没有更优雅的解决方案可以保持布局的完整性？

我在 jsfiddle 中做了一个小例子。在 Android 浏览器中查看我的意思： http: [//fiddle.jshell.net/5cvj5/show/light/](http://fiddle.jshell.net/5cvj5/show/light/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T18:43:32.547

我最终所做的，以及我发现 Facebook 为克服同样的挑战所做的事情是，当它接收到焦点时，在 textarea 下方添加一个间隔块元素，然后滚动到视图的底部，如下所示：

```
var android_spacer = $('<div/>', {
    'class' : 'android_spacer'
}).css({
    'width'  : '100%',
    'height' :  '200px'
}).appendTo($('#parent_view'));

$('#the_textarea').on('focus', function() {
    $(this).after(android_spacer);
});

$('#the_textarea').on('blur', function() {
    $('.android_spacer').remove();
}); 
```

请注意，屏幕上一次只有一个垫片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T14:01:18.700

只需将页脚的位置设置为绝对位置并将底部设置为 0，这将处理它

# android - 以编程方式禁用/启用操作栏“操作按钮”？

> ID：13205280
> 
> 赞同：1
> 
> 时间：2012-11-03T02:02:36.450
> 
> 标签：android, android-actionbar

带着另一个回来。试图获得什么小应用程序我必须与 3.0+ Android 版本合作，并且有一些我不知道如何处理的东西..

我有一个选项菜单，我对其进行了升级以更好地适应操作栏，定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:titleCondensed="@string/menu_sheet_photo_comp" android:title="@string/menu_sheet_photo" android:id="@+id/mnuCamera" android:icon="@android:drawable/ic_menu_camera" android:showAsAction="ifRoom" />
    <item android:titleCondensed="@string/menu_sheet_notes_comp" android:title="@string/menu_sheet_notes" android:id="@+id/mnuLogText" android:icon="@drawable/ic_menu_compose" />
    <item android:titleCondensed="@string/menu_sheet_track_comp" android:title="@string/menu_sheet_track" android:id="@+id/mnuTrack" android:icon="@android:drawable/ic_menu_compass" />
    <item android:titleCondensed="@string/menu_sheet_geocache_comp" android:title="@string/menu_sheet_geocache" android:id="@+id/mnuGC" android:icon="@drawable/ic_menu_emoticons" android:showAsAction="ifRoom" /> 
```

这一切都可以正常工作 - 当活动运行时，照片（第一张）显示在我手机的操作栏上，其他都没有。现在，选项的可用性取决于几件事。

因此，在 Activity 启动开始时，会发送一个线程来获取 Web 数据。我`onCreateOptionsMenu()`禁用了第一项。（在我们取回网络数据验证它可以拍照之前，他们不能拍照。）

在我的应用程序的早期版本中，这很容易 -`onPrepareOptionsMenu()`我检查状态，然后根据需要启用或禁用选项。现在，这就是我不知道该怎么做 -

由于相机按钮在操作栏上，而不是在溢出菜单中，当用户点击它时，`onPrepareOptionsMenu()`它永远不会被调用，所以按钮保持禁用状态。

那么，一旦我的后台线程返回并且我知道我可以启用它，我将如何启用该按钮？

干杯 - 迈克。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T02:19:26.233

要么调用 invalidateOptionsMenu() 并在 onCreateOptionsMenu() 中添加一个检查以启用/禁用，要么以编程方式创建菜单并将 Menu 实例保存在某处，以便稍后启用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T02:31:13.603

stoilkov 上面所说的是我使用的方法。更明确地说，在您的后台线程返回时，设置一个标志，我们将其称为 isCamButtonEnabled，为 false，然后调用 invalidateOptionsMenu()。这将触发 onCreateOptionsMenu 被调用以重新生成您的菜单。最后一步是修改 onCreateOptionsMenu 以根据 isCamButtonEnabled 的状态禁用相机按钮。您可以通过加载完全不同的菜单资源来做到这一点：

```
if(isCamButtonEnabled) {
    getMenuInflater().inflate(R.menu.cam_enabled_menu, menu);
} else {
    getMenuInflater().inflate(R.menu.cam_disabled_menu, menu);   
} 
```

或者总是加载相同的菜单资源并在事后禁用或隐藏相机按钮。

# image - 将多个 div（包含 .GIF 图像）变为不可见会减少页面使用的内存吗？

> ID：13205281
> 
> 赞同：0
> 
> 时间：2012-11-03T02:02:40.290
> 
> 标签：image, html, gif, src

我有一个包含很多 div 的网站。每个 div 包含不同的动画图像。现在，当您向下滚动时，会添加更多带有动画图像的 div。

过了一会儿，页面上同时出现了很多 GIF，这会使页面变得迟缓！

我的问题是，为了减少页面的“内存负载”，“整理”先前加载的 GIF（不再在视口中）的最佳方法是什么？

我想到了什么：

*   将 IMG 的 SRC 更改为缩略图

*   使 div 不可见

*   隐藏 div 并以某种方式添加虚拟边距

*   ... ?

# python - 如何将实际数据输入到类中

> ID：13205282
> 
> 赞同：0
> 
> 时间：2012-11-03T02:02:43.743
> 
> 标签：python, class

好的，所以我创建了一个模块并将其导入到我的主程序中。我想我仍在尝试理解类，但我不确定如何将我的数据实际输入到我的类中。这是在 Python 3 中。这是模块：

```
class Movie:
    def __init__(self, Title = '', Ratings = []):
        self.Movie = Title
        self.Ratings = Ratings
        self.TotalRatings = 0
        self.minusFive = 0
        self.minusThree = 0 
        self.one = 0
        self.three = 0
        self.five = 0
        self.ValidRatings = [-5,-3,1,3,5]

    def __str__(self):
        return '{0} has {1} total ratings with an average rating of {3}.'.format(self.title, self.totalRatings, self.AvgRating)
    def __repr__(self):
        return self.__str__()
    def AddRating(self, rating):
        for num in self.Ratings:
            if num in self.ValidRatings:
                self.totalRatings += 1 
            else:
                continue
    def AvgRating(self):
        return sum (self.totalRatings)/len(self.totalRatings) 
```

下面是我的主程序的开始：

```
import Movie

def ReadFile(FileName):
    F = open(FileName)
    return F.readlines()

File = ReadFile('Ratings.txt') 
File2 = open('Prog5Titles.txt').read()       #open movie titles file

movie1 = Movie("The Avengers", [5,5,5])     #this is just a sample to help me understand 
```

当我运行它时，我收到错误消息：'module' object is not callable。谁能帮我理解如何正确输入我的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:25:32.167

问题是您有一个文件 Movie.py，其中包含一个巧合地名为 Movie 的类。如果你只是`import Movie`，那么 python 名称 Movie 指*的是文件 Movie.py 的内容，*并且指的是隐藏在其中的类，你需要编写：

```
 movie1 = Movie.Movie("The Avengers", [5,5,5]) 
```

或者，您可以像这样进行导入：

```
from Movie import Movie 
```

现在 python 名称 Movie 指的是不同的东西——在文件 Movie.py 中名为 Movie 的“东西”（在本例中是一个类）。

*如果您将包含的文件命名为与文件中定义的类不同*`class Movie`的名称，这会更清楚一些。也许或者什么的。考虑到您将在项目中添加其他类（Actor、Studio），并且这些类可能与 Movie 类在同一个文件中定义。*`movie_stuff.py`*

# java - Java 接口扩展了 java.util 包中的接口

> ID：13205286
> 
> 赞同：2
> 
> 时间：2012-11-03T02:03:16.750
> 
> 标签：java, interface

众所周知，接口可以扩展Java中的接口。我有一个问题，如果接口B扩展接口A，B不需要实现A中定义的方法。但是在java.util包中，List接口扩展了Collection接口，它实现了Collection方法，这些方法也只要有方法声明。

为什么要这样做，并且有更好的做法？在子接口中实现方法有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T02:13:18.490

重写方法，除了提供/替换方法实现之外，还允许提供更具体的 javadoc，并缩小返回类型。

例如，`Collection.iterator()`由以下方式指定：

> 返回此集合中元素的迭代器。没有关于元素返回顺序的保证（除非此集合是提供保证的某个类的实例）。

而`List.iterator()`由指定

> 以正确的顺序返回此列表中元素的迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T02:18:12.170

我在 java.util.List 中没有看到任何实现，而是声明。相反，List 的 javadocs 说，

> *List 接口对迭代器、add、remove、equals 和 hashCode 方法的合约添加了超出 Collection 接口中指定的附加规定。为方便起见，此处还包括其他继承方法的声明。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T02:12:28.553

Java 中的接口是完全抽象的。他们不能有任何实现。

重新声明方法与实现方法不同。并且重新声明一个方法（如果方法签名完全相同）没有任何意义，因为一个接口扩展另一个接口的目的是添加一些更具体的方法声明，而不仅仅是重新声明现有的方法。

* * *

**编辑**

* * *

[正如@Arham](https://stackoverflow.com/a/13205358/738746)和[@meriton 的](https://stackoverflow.com/a/13205335/738746)回答所指出的，重新声明的目的是根据子接口重新指定方法。因此，对于访问底层集合的客户端代码，重新声明的方法将有一个单独的更具体的规范，而不是超级接口中更通用的规范。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T02:15:48.143

接口 List 不实现 Collections 的方法，因为接口*不能实现*方法，它们只是声明它们。接口就像一个 100% 的抽象类：所有的方法都*必须是*抽象方法。

可能你的困惑来自实现接口的抽象类：这些类不能实现接口的方法（尽管被允许），只有第一个具体类必须。

# javascript - Javascript：如何从网页中检索文本

> ID：13205289
> 
> 赞同：3
> 
> 时间：2012-11-03T02:03:43.253
> 
> 标签：javascript, html, dom, text, web

我想检索网页中的文本作为字符串。这可能吗？我是 Javascript 新手。

例如：

```
var url = "http://en.wikipedia.org/wiki/Programming";
var result = url.getText();  <---- stores text as a string
document.write(result); 
```

如何编写 getText 方法？以太整个 HTML 源代码（我可以用它来获取文本）或只是文本。我想在网络浏览器中执行此操作。

我试过这个，我能够得到一个索引号：

```
var url = "http://www.youtube.com/results?search_query=cat&page=2";
var result;
function go(){
    result = url.search(/cat/i);
    document.write(result);
} 
```

这给了我一个 44 的索引。这意味着阅读一个页面是可能的。我可以做相反的事情并输入索引来检索文本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:06:35.677

如果 Ajax/跨域情况对您来说不是问题，您可以使用

```
var el = document.body; // or some other element reference
var text = el.innerText || el.textContent; 
```

如果您需要从与您的应用程序同域的页面中读取文本，您可以直接使用 Ajax。

如果您需要从域外页面读取文本，则必须跳过一些额外的环节，例如设置代理服务器或处理 CORS - [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T02:10:58.107

Ajax 不支持跨域。您需要服务器端语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T02:08:03.930

你最好使用更强大的服务器端语言来做到这一点，而不是 JavaScript。Python 或 PHP 将是不错的选择。

# grails - 从 remoteFunction 调用 Grails 文件下载不会启动

> ID：13205294
> 
> 赞同：0
> 
> 时间：2012-11-03T02:04:36.123
> 
> 标签：grails

在我的 Grails 应用程序中，用户可以单击`g:link`将调用我的控制器将某些数据导出到 CSV 文件的按钮。这没有问题。

然后我将该按钮移动到一个 jQuery 对话框中，当单击该按钮时，我使用

`${remoteFunction(action:'export', onSuccess:'closeMe();', id:courseInstance?.id)}`

调用相同的控制器方法并关闭对话框。我已经确认该方法被实际调用，并且对话框关闭。但是，不会提示用户使用 CSV 下载。我假设这与 remoteFunction 有关，但我不太确定。谁能解释为什么会发生这种情况以及潜在的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:00:10.757

使用 AJAX 请求，您无法将内容下载为附件，因此无法触发“另存为”对话框。

有几个解决方法：

*   像以前一样使用普通的 g:link 并绑定 'closeMe();' 'click' 事件的函数。问题是您无法控制错误或成功响应。
*   使用 iframe：您可以创建一个临时不可见的 iframe，并将其位置设置为要下载的文件的 URL。它也有不控制成功/错误响应的背面。

代码可能与[此答案](https://stackoverflow.com/a/3749395/318506)中的相同：

```
<script type="text/javascript">
function downloadURL(url) {
    var iframe;
    var hiddenIFrameID = 'hiddenDownloader';
    iframe = document.getElementById(hiddenIFrameID);
    if (iframe === null) {
        iframe = document.createElement('iframe');  
        iframe.id = hiddenIFrameID;
        iframe.style.display = 'none';
        document.body.appendChild(iframe);
    }
    iframe.src = url;   
}
</script> 
```

和链接

```
<a href="javascript:downloadURL(${createLink(action:'export')})">Export</a> 
```

# javascript - jScrollPane 不适用于 jQuery 加载

> ID：13205299
> 
> 赞同：0
> 
> 时间：2012-11-03T02:05:15.193
> 
> 标签：javascript, jquery, scroll, jscrollpane

我使用 jScrollPane，它工作正常，但当我在 jQuery 中使用加载函数时就不行了。

如果我有一个 div 加载内容`overflow:auto`，并且加载 div 时，内容不同，jScrollPane 不会显示滚动条。

对于 jQuery 加载，我使用这个：

```
function infor(id) { 
    $(document).ready(function () {
        $("#web_loader_text_content").show(2000);
        $("#web_loader_text_content").load("indexer_data.php?id="+id);
    }); 
} 
```

我要求在带有链接的 div 中加载内容：

```
<div class="web_botones" id="b1" onclick="infor('houses1');"></div>
<div class="web_botones" id="b2" onclick="infor('houses2');"></div>
<div class="web_botones" id="b3" onclick="infor('houses3');"></div> 
```

问题就在这里：

```
$(function() { 
   $('#web_loader_text_content').jScrollPane();
}); 
```

问题是我有不同大小的不同内容，并且滚动条不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:50:36.887

首先从您正在调用的函数中删除 document.ready 函数：

并使用：

```
autoReinitialise: true 
```

在您的 jscrollpane 初始化函数中。此属性将重新初始化您的 jscrollpane，您不必担心加载数据。

# php - 在函数文件中创建函数

> ID：13205302
> 
> 赞同：0
> 
> 时间：2012-11-03T02:06:08.930
> 
> 标签：php, mysql

我无法让它正常工作我正在尝试清理我的 php 文件并创建一个更改用户密码的函数。`function setPass`如果我将函数文件中的复制代码保留在文件中，它工作正常`Login_success.php`。当我将工作代码复制到`functions.php`具有函数名称的文件中时，`setPass`它不起作用我也没有收到错误消息。我意识到不使用 PDO 准备好的语句是不安全的，但一旦我开始工作，我会改变它。这是我的 login_success 文件和函数文件的代码：

函数.php

```
<?php
require 'DB.php';

function setPass(){   

foreach($conn->query("SELECT password FROM CLL_users WHERE user_name= '$userCurrent'") as $password1) {

    $old_pass = ($password1['password']);
}
$new_pass = md5($_POST['new_pass']);

    if (md5($_POST['old_password']) == ($old_pass) && ($_POST['new_pass']) == ($_POST['verify_pass'])) {

        $sql="UPDATE CLL_users SET password= '$new_pass' WHERE user_name= '$userCurrent'";

        $result=mysql_query($sql);

        echo "Match";
    } else {
        echo "Not a Match";
    }

}
?> 
```

login_success.php

```
<?php
require 'functions.php';
require 'DB.php';
session_start();
session_is_registered(myusername);
$userCurrent = $_SESSION['myusername'];
$host="localhost"; // Host name 
$username="user"; // Mysql username 
$password="XXXXXX"; // Mysql password 
$db_name="db"; // Database name 
$tbl_name="CLL_users"; // Table name 
date_default_timezone_set('America/Chicago');
$dateCreated = date('m/d/Y h:i:s a', time());

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql="UPDATE CLL_users SET last_login= '$dateCreated' WHERE user_name= '$userCurrent'";
$result=mysql_query($sql);

if(!session_is_registered(myusername)){
header("location:main_login.php");
}
?>

    <!DOCTYPE html>
    <html>
        <head>
            <title>user</title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="CLL.css" rel="stylesheet" type="text/css">
        </head>
        <body>    

        <form id ="css" action="" method="post">
        <div class="row">

            <label class ="formLabel" for="old_password">Old password:</label>
                <input type="password" name="old_password" id="old_password" />
       <br> <label class ="formLabel" for="new_pass">New Password:</label>
                <input type="password" name="new_pass" id="new_pass" />
       <br> <label class ="formLabel" for="verify_pass">Verify new password:</label>
                <input type="password" name="verify_pass" id="verify_pass" />

                    </div>     
            <input type="submit" />
    </form>

<?php 
    $_POST['old_password'] = $old_pass;
    $_POST['new_pass'] = $new_pass;
    $_POST['verify_pass'] = $verify_pass;
    if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    setPass($userCurrent, $old_pass, $new_pass, $verify_pass);
    }
 ?>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:29:08.263

我认为问题在于代码的顺序。您应该尝试将 $userCurrent 作为参数传递，尝试使用此函数：（我还修复了一些语法错误）

```
function setPass($userCurrent)
{   
    foreach($conn->query("SELECT password FROM CLL_users WHERE user_name= '" . $userCurrent . "'") as $password1) {
        echo $password1['password'];
        $old_pass = ($password1['password']);
    }
    $new_pass = md5($_POST['new_pass']);
    echo "<br>";
    if (md5($_POST['old_password']) == ($old_pass) && ($_POST['new_pass']) == ($_POST['verify_pass'])) {
        $sql="UPDATE CLL_users SET password= '" . $new_pass . "' WHERE user_name= '" . $userCurrent . "'";
        $result=mysql_query($sql);
        echo "Match";
    } else {
        echo "Not a Match";
    }
    echo "<br>";
    echo md5($_POST['old_password']);
    echo "<br>";
    echo ($old_pass);
    echo "<br>";
    echo ($new_pass);
} 
```

顺便说一句，你在这里想什么烧烤，哈哈：

```
 $_POST['old_password'] = $old_pass;
  $_POST['new_pass'] = $new_pass;
  $_POST['verify_pass'] = $verify_pass; 
```

# actionscript-3 - ActionScript 3 - If then 语句

> ID：13205304
> 
> 赞同：0
> 
> 时间：2012-11-03T02:07:22.393
> 
> 标签：actionscript-3

嗨，我正在使用 Actionscript3，并且正在使用代码来显示信息。因此，当我显示代码时，相机会拾取它并将它们重新定向到时间线的特定部分。我已经完成了所有这些工作，但每个代码都有一个特定的 ID，我希望每个 ID 都被带到时间轴上的不同位置。目前这是我的代码：

```
tuioManager.addEventListener(TuioEvent.ADD, addMarker);

function addMarker(e:TuioEvent){

trace("I see :"+ (e.tuioContainer as TuioObject).classID);
if (1) gotoAndPlay('Navigate');

if (2) gotoAndPlay('NavigateB');
 } 
```

它获取不同的 ID（来自跟踪功能），但我不知道如何指定代码编号 - 我尝试使用 if (2) 但我认为这是不对的。关于如何做的任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:39:38.127

您要做的是使用 classID 作为 if 语句的条件

```
function addMarker(e:TuioEvent){

    trace("I see :"+ (e.tuioContainer as TuioObject).classID);
    var classID:int =(e.tuioContainer as TuioObject).classID; 
    if (classID==1) gotoAndPlay('Navigate');
    else if (classID==2) gotoAndPlay('NavigateB');
} 
```

或者，您可以使用 switch 语句。

# python - 在 Python 脚本中使用 googlecl 来 d/l Google doc

> ID：13205307
> 
> 赞同：1
> 
> 时间：2012-11-03T02:07:48.337
> 
> 标签：python, googlecl

subprocess.check_output(('/Applications/googlecl-0.9.13/build/scripts-2.7/google', 'docs', 'get', r'"重新评估请求"', r'--format', 'csv' , r'/Users/myaccount/Desktop'), shell=True)

此代码不会拉下文档，但运行相同的行将在终端内工作。它可能没有时间完成？从命令行运行它需要一段时间。

有一个 Python 错误：“Traceback（最近一次调用最后一次）：文件“/Users/myaccount/Desktop/reassess2.py”，第 17 行，在 subprocess.call('google docs get "Reassessment Request" --format csv /Users /myaccount/Desktop') 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py”，第 493 行，调用返回 Popen(*popenargs, **kwargs).wait( ）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py”，第679行，在**init** errread，errwrite）文件“/Library/Frameworks/Python.framework/Versions/2.7 /lib/python2.7/subprocess.py"，第 1249 行，在 _execute_child raise child_exception OSError: [Errno 2] No such file or directory"

当我尝试在 OSX 脚本中运行它时遇到类似的问题：当我运行 shell 脚本（运行上面的命令行）时，我得到： ?/Users/myaccount/Desktop/ReScript.sh ；出口; .csvloading Reassessment Request to /users/myaccount/Desktop logout

[处理完成]”，但实际上没有下载文件。

OSX 山狮；0.9.13 厘升；2.0.17 gdata（我认为 - 不是最新的，但与 cl 一起使用的那个）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T23:56:50.177

Google CL 几乎即将退出市场，Google Drive 的新表单更新已经打破了这些类型的操作。我使用 Gdata 作为解决方法有一段时间，但如果有人试图使用其中任何一个并偶然发现这一点，这是当前最好的答案：[Gspread](https://github.com/burnash/gspread)。它安装方便（不像其他版本兼容性问题那样），需要更少的代码，而且速度更快。

使用 Gspread，此代码将替换为：

```
username = 'jimjam@gmail.com'
password = 'bwdfsdfsafadlhsw'
sheetname = "Reassessment Requesttemp"

client = gspread.login(username, password)
spreadsheet = client.open(sheetname)

worksheet = spreadsheet.sheet1
contents = worksheet.get_all_values() 
```

# java - 线程的空指针异常

> ID：13205316
> 
> 赞同：1
> 
> 时间：2012-11-03T02:09:37.790
> 
> 标签：java, multithreading, nullpointerexception

我正在互联网上实现一个基于 tut 的 tcp java 客户端/服务器应用程序我更改了一些方法并收到 nullpointerexception 错误

错误来自 run()。它在扩展 Thread 类的 Connection 类中。run() 应该监听传入的通信。我启动服务器类，监听一个端口。所以我有一个成功的连接。然后当我尝试通过 run() 方法监听传入的通信时应用程序报告错误

建立连接并启动：

```
Connection c = new Connection(host,port);
                Scanner chatConsole = new Scanner(System.in);
                String text = "";

                while (!text.equalsIgnoreCase("halt")){         
                    text = chatConsole.nextLine();
                    c.start(); 
```

线程“Thread-1”中的异常 java.lang.NullPointerException

运行（）

```
public void run(){//watch for incoming communication
    String msg;

    try{//loop reading lines and display msg
        while ((msg = in.readLine()) != null) {
            System.out.println(msg);
        }
    }catch (IOException e) {
        System.err.println(e);
    }   
} 
```

如果它有助于调试，这是该类的构造函数。

```
public Connection(String iniName, int iniPort){
        host = iniName;
        port = iniPort;

        try {
            server = new Socket(host, port);
        }catch (UnknownHostException e){
            System.err.println(e);
            System.exit(1);
        }

        try{
            stdIn = new BufferedReader(new InputStreamReader(System.in));
            PrintWriter out = new PrintWriter(server.getOutputStream(), true); //output stream to server
            BufferedReader in = new BufferedReader(new InputStreamReader(server.getInputStream()));
        }catch(Exception e){
            System.err.println(e);
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:13:03.810

您的`in`变量为空，您尝试在其中使用它：

```
while ((msg = in.readLine()) != null) { 
```

可能是因为您在构建它的地方遮蔽了它。

```
BufferedReader in = new BufferedReader(new InputStreamReader(server.getInputStream())); 
```

相反，不要在本地重新声明变量：

```
in = new BufferedReader(new InputStreamReader(server.getInputStream())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:13:06.467

在您粘贴的代码中没有任何地方声明一个全局字段`in`。那是抛出的线`NullPointerException`吗？( `in.readLine`)。请确保 Stream 已正确初始化（即使其成为字段，而不是构造函数中的局部变量）

# c - 推荐ac库计算两个稀疏矩阵的乘积（大小：100000*100000）

> ID：13205320
> 
> 赞同：3
> 
> 时间：2012-11-03T02:10:11.477
> 
> 标签：c, matrix

矩阵很大`(size: 100000*100000)`，消耗了两个，所以库应该使用三元组或其他方式来存储它。我在互联网上搜索，但那些图书馆总是使用`common matrix`not`triplet`或其他方式来`compress the storage`.

它对我不起作用。有人可以为我推荐一些`c library`吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:25:42.103

[Boost - 压缩稀疏矩阵](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/matrix_sparse.htm#21Description)是您的替代方案吗？

编辑：纯 C 库：[CSparse](http://people.sc.fsu.edu/~jburkardt/c_src/csparse/csparse.html)

# php - 获取表单已发布的密钥

> ID：13205321
> 
> 赞同：0
> 
> 时间：2012-11-03T02:10:16.087
> 
> 标签：php, html, http-post

无论如何可以从我发布的表格中获取所有**密钥吗？**

当我显示一些从`mysql DB`.

当我显示 2 条记录时，我将 2 条记录发布到另一个**PHP**文件中。但是我担心当我发布记录时，有人正在将另一条记录添加到`DB`

我的**PHP**将获得 3 个发布的数据而不是 2 个（用户只发布 2 个，因为他/她没有刷新表单）

```
+--------------------+--------------------+
|       Form         |         DB         |
|--------------------|--------------------|
|      2 records     |     2 records      |
|      2 records     |     3 records      | Someone Insert it
+--------------------+--------------------+ 
```

我当然可以得到`$_POST['key1']`，`$_POST['key2']`。但是我的代码会搜索`$_POST['key1']`, `$_POST['key2']`, `$_POST['key3']`, 因为`DB`.

有没有办法只检查用户的什么**键**`POST`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:43:57.293

```
//print key1, key2
foreach ($_POST as $key => $value){
   echo $key; 
} 
```

# python - 如何防止它返回一长串 None 值？

> ID：13205323
> 
> 赞同：0
> 
> 时间：2012-11-03T02:10:19.427
> 
> 标签：python, list, null

此脚本确定可能数量的网站中哪些网站拥有我想要的数据。`z`通过 运行所有潜在网站`data_grabber(item)`，它返回所有有效 URL 的索引列表。它还包括`None`无效网站的值。

```
import requests

a = range(0, 10)
b = 'http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=%r'

websites = []
for i in a:
    result = b % a[i]
    websites.append(result)

def data_grabber(item): 
    url = item
    r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})
    data = r.json
    if data != None:
        return websites.index(item)

z = [data_grabber(x) for x in websites]
z1 =  filter(None, z) 
```

这将返回`[None, None, 2, None, None, None, 6, None, 8, None]`，`z1`缩短为`[2, 6, 8]`。唯一的问题是可能的网站列表可能会变得很长，因此可能需要几分钟才能`None`在`z`. 是否可以防止`z`生成`None`项目？提前感谢您的帮助。

编辑：现在我意识到它实际上`data_grabber`花费了大部分时间。不过还是很高兴知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:17:03.247

我同意@DSM 的观点，这似乎不太可能花费您太多时间。但这将避免：

```
filter(None, (data_grabber(x) for x in websites)) 
```

使用括号而不是括号将生成`data_grabber`结果生成器，`filter`然后生成结果列表，然后生成结果列表，而无需在其中创建包含`None`s 的中间列表。

* * *

只是测试您对时间的要求：

```
>>> %timeit filter(None, [None for x in range(100000)])
100 loops, best of 3: 9.22 ms per loop 
```

不完全相同，但这会列出 100,000`None`秒，然后在我的计算机上在 9 毫秒内将它们全部过滤掉。

# c++ - 链接列表中的虚函数 - 多种返回类型（对象）

> ID：13205325
> 
> 赞同：1
> 
> 时间：2012-11-03T02:11:06.790
> 
> 标签：c++, linked-list, virtual

我在 uni 有一个任务要做，基本上，我们从许多 txt 文件中获取一堆数据。数据的结构是可以读取的，对于这个问题，我会把它分成两个文件和两个类。数据示例如下：

### Faculty.txt（PK，名称）

```
AT  Advanced Technology 
HESAS   Health, Sport and Science 
```

### Department.txt（PK，名称，FK）

```
ET  Engineering and Technology  AT  
BE  Built Environment   AT  
CMS Computing and Mathematical Sciences AT  
SAS Science and Sport   HESAS   
CS  Care Sciences   HESAS   
PESD    Professional Education and Service Delivery HESAS 
```

这个想法是使用数据创建报告，该程序旨在使用链接列表、关系和虚拟函数。所以在代码中我们基本上有一个节点列表（我使用 FILO）——

-断章取义的问题-

（我不确定我是否得到了我们已经给出的节点和列表代码概念的讲座 - 我这样说是因为我无法弄清楚节点存储对象的内存地址的位置。除非我误解它并且节点是每个节点的孩子它扩展了它的类，因此它继承了该类的所有内容并将其添加到顶部？如果是这种情况，如果我们继承了所有功能-安全性，为什么我们需要在第一个位置创建一个虚函数？）

- 具有存储在其中的对象的指针。现在我实际上卡住的地方是加载数据 - 好吧 iv 将它全部加载到列表中，但我只将外键作为字符串加载，因为我需要基本上检查字符串 FK 与存储在上一个文件 iv 已加载（讲座很简单，给了我们一个简单的 1-8 流程，其中 1 没有 FK:)）然后当我找到该对象时获取它的内存地址并将其用作 FK。这背后的想法是你基本上可以去 std::cout << departmentObj->getForeignKey()->getIdentifier(); 在这一点上我会从我的测试项目中发布一些代码（为了测试而砍掉），因为我不确定我是否在做任何降神会。

- 抱歉，这里的代码块有问题，所以它必须是粘贴箱。

List.cpp [http://pastebin.com/Le3fz5YF](http://pastebin.com/Le3fz5YF)

List.h [http://pastebin.com/5yJYDM8N](http://pastebin.com/5yJYDM8N)

Node.cpp [http://pastebin.com/Pgas8eju](http://pastebin.com/Pgas8eju)

Node.h [http://pastebin.com/TZPrEA4Q](http://pastebin.com/TZPrEA4Q)

Fac.cpp [http://pastebin.com/0EGeGhdq](http://pastebin.com/0EGeGhdq)

dep.cpp [http://pastebin.com/G2yk6jCg](http://pastebin.com/G2yk6jCg)

Main.cpp [http://pastebin.com/npiCC6wX](http://pastebin.com/npiCC6wX)

参考加载器 [http://pastebin.com/n6UdsYmW](http://pastebin.com/n6UdsYmW)

所以基本上它归结为通过列表返回所需对象的内存地址。显然我没有得到如何正确访问节点和列表类来做到这一点。我希望能够做到这一点的方式只是有一个很好的代码行，我可以用它来替换我的加载器中的 addnode 行（我把它贴出来供参考）它看起来像这样：

```
departmentList->AddNode(new Department(holder[0], holder[1], facultyList->getPkObjAdd(holder[2]))); 
```

但ofc的问题在于如何返回该对象的内存地址。如果它必须是一个虚函数，我如何允许它返回多个对象类型，如教师和部门？

我不确定我是否做了很多降神会，我希望有人能帮助我。谢谢你的时间！！- 快速编辑，忘记 dep 和 fac.cpp 的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:55:50.153

您是否包含了所有代码？看起来您缺少一些文件（Fac.cpp 包括 Fac.h，但您似乎没有发布该文件）。

在任何情况下，除非您将 Node 类子类化，否则该类不会继承：Node 不扩展任何东西，并且（据我所知）没有任何东西扩展 Node。此外，按照您编写的方式，Node 包含指向另一个 Node 的指针，但没有其他数据。如果您更改了 Node.h 标头，使其看起来像：

```
#pragma once
#include <iostream>
#include "string"

using namespace std;

class Node
{
  public:
        Node();
        Node(Node* next);
        ~Node(void);

    // Member Functions
    Node* GetNextNode();
    void SetNextNode(Node* next);
    void * GetData();
    void SetData(void* data);

    // Virtual Functions
    virtual void DisplayContents() = 0;
        virtual string getIdentifier() = 0;
        virtual PROBLEM getMe() = 0;

  private:
        Node* nextNode;
        void* data;
}; 
```

然后添加函数GetData和SetData：

```
void SetData(void *data)
{
  this.data = data;
}

void * GetData()
{
  return this.data;
} 
```

然后，您将能够在每个节点中存储一些东西。您可能不希望数据类型为 void*，您可能希望存储字符串。但想法是一样的。

至于虚函数，这个想法纯粹与继承有关。虚函数的想法是一个对象总是调用它自己的函数版本，而不是它的父类的版本。因此，如果您有：

```
class Base
{
public:
  virtual void virtualFunc();
  void otherFunc();
};

class Derived : public Base
{
public:
  virtual void virtualFunc();
  void otherFunc();
}; 
```

我将像这样定义这些函数：

```
#include "inheritance.h"
#include <iostream>
using namespace std;

void Base::virtualFunc()
{
  cout << "in Base::virtualFunc" << endl;
}

void Base::otherFunc()
{
  cout << "in Base::otherFunc" << endl;
}

void Derived::virtualFunc()
{
  cout << "in Derived::virtualFunc" << endl;
}

void Derived::otherFunc()
{
  cout << "in Derived::otherFunc" << endl;
} 
```

然后在某处创建一些对象：

```
Derived *derived1 = new Derived();
Base *derived2 = new Derived(); 
```

如果您在derived1 或derived2 上调用virtualFunc()，它将始终调用Derived 中定义的副本，因为它被声明为虚拟的。如果你用 derived1 调用 otherFunc()，它会调用 Derived 中定义的版本，因为 derived1 被声明为 Derived 类型。但是，derived2 被声明为 Base，因此如果您调用它的 otherFunc()，则会调用 Base 中定义的副本。因此，如果您有以下代码：

```
#include "inheritance.h"
#include <iostream>
using namespace std;
int main()
{
  Derived *derived1 = new Derived;
  Base *derived2 = new Derived;

  cout << "calling virtualFunc() with derived1: ";
  derived1->virtualFunc();

  cout << "calling virtualFunc() with derived2: ";
  derived2->virtualFunc();

  cout << "calling otherFunc() with derived1: ";
  derived1->otherFunc();

  cout << "calling otherFunc() with derived2: ";
  derived2->otherFunc();

  delete derived1;
  delete derived2;

} 
```

你会得到这个作为输出：

```
calling virtualFunc() with derived1: in Derived::virtualFunc
calling virtualFunc() with derived2: in Derived::virtualFunc
calling otherFunc() with derived1: in Derived::otherFunc
calling otherFunc() with derived2: in Base::otherFunc 
```

在您的 Node 类中，您定义了一些特殊的纯虚函数。这些在类定义中设置为 0，其想法是在您的基类（在本例中为 Node）中，您无法定义它们的功能。相反，您是说任何派生类都必须为这些函数定义功能。请注意，您不能直接使用纯虚函数创建类的对象。如果您有一个未定义这些函数的派生类，您将无法直接创建该类型的对象，您需要以某种方式对其进行子类化才能做到这一点。

我猜想对于这个作业，你应该以几种不同的方式对 Node 进行子类化，以便将不同类型的数据存储在不同类型的节点中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:22:52.310

嘿，我想 id 会弹出并发布解决方案，以防将来有人想知道。因为我处理我决定使用的返回值的数据类型：

无效* getMe();

void* 你可能知道也可能不知道是指向内存地址的指针。然后你可以使用转换它

（教师*）教师列表->getPkMemAdd（“PK”）；

希望它可以帮助某人！

# android - 为什么eclipse没有将我的字符串添加到资源文件中？

> ID：13205326
> 
> 赞同：0
> 
> 时间：2012-11-03T02:11:19.007
> 
> 标签：android, android-resources

好的，所以我正在使用 Android 操作系统，我已按照说明下载源代码，并正确设置了 eclipse。我在其中一个框架项目中对我的 strings.xml 文件进行了更改。但是，在我对项目执行 make 后，该字符串不会添加到 out/target/common/ 中的相应资源文件中。因此，我的 Eclipse 没有获取任何新资源。

我执行了以下操作。

1.) 清理项目。

2.）完全删除out，以便重建一切。

3.) 测试以确保构建实际上是从同一个项目中提取更改。基本上，我将字符串直接添加到项目中，而不是使用资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:23:17.643

尝试以下几点他们可能会工作......

1.  检查所有活动是否`import android.R;`在任何 java 文件中导入删除该导入语句。
2.  然后删除 R.java 文件。

**它可能有效，只需检查**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:40:31.890

好的，所以我发现了问题所在。如果您正在使用 OS 源代码并且想要将字符串添加到 string.xml 文件，您还必须将以下代码行添加到您的值文件夹中存在的 public.xml 文件中。

```
<java-symbol type="string" name="my_string_resource_name" /> <!--In public.xml--> 
```

# jquery - jQuery标签加载设计

> ID：13205327
> 
> 赞同：0
> 
> 时间：2012-11-03T02:11:18.957
> 
> 标签：jquery, asp.net-mvc, jquery-ui-tabs

这是我的第一个 ASP.NET MVC 应用程序，我正在尝试为我正在使用 ASP.NET MVC 3 和 jQuery 1.9.1 的 POC 选择更好的选项。请建议哪个选项更好以及为什么。目前我有以下 2 个实现。

1) 我在 3 个不同的 jQuery 选项卡中按需加载 3 个部分视图。按需意味着当用户单击特定选项卡时，我使用 Ajax 调用关联的控制器操作（使用 GET）并填充提供部分视图的模型对象。每当用户单击其他选项卡并返回到前一个选项卡时，由于我们在每个请求上加载选项卡数据，新的请求数据都会清除用户输入的数据。为了防止这种情况，我打算使用映射到模型对象的 Javascript 对象（每个选项卡一个对象）。每当用户更改控件中的数据时，我都会更新全局 javascript 对象。这将允许我获取当前数据。当用户单击提交时，（只有 1 个提交按钮，单个选项卡没有“保存”按钮）我使用 Ajax 将 JS 对象发布到控制器。

2）另一个选项是一次加载应用程序中的所有选项卡，并填写所有下拉列表。让用户编辑数据。当用户更新网页上的字段时，我将在一个全局 javascript（每个选项卡一个对象）中捕获数据。当用户单击提交时，（只有 1 个提交按钮，单个选项卡没有“保存”按钮）我使用 Ajax 将 JS 对象发布到控制器。控制器操作（使用 POST）将被执行，我可以使用模型对象进一步处理返回部分视图（或 JSON ？）作为响应。

如果您对这两种方法中的任何一种有什么需要改进的地方，请告诉我。

在实际应用中，可能有 10-15 个选项卡，其中包含很多控件，因此对我来说清楚了解该方法非常重要，以免将来因设计不当而陷入困境。

# ajax - 模型传递到 MVC 4 控制器 Null

> ID：13205334
> 
> 赞同：1
> 
> 时间：2012-11-03T02:13:13.373
> 
> 标签：ajax, asp.net-mvc, controller

我正在尝试序列化表单并将其作为模型传递给控制器​​。我在做什么我过去做过，但由于某种原因它不起作用，所以我怀疑我错过了一些愚蠢的东西。也许你能找到它。

在我的控制器中，我有一个方法：

```
 [HttpPost]
    public ActionResult AddShippingLocation(PricingRequestModel model)
    {
        model.ShippingLocationsModel.Add(new ShippingLocationsModel());

        return PartialView("shiplocationPartial", model);
    } 
```

在我看来，我有一个看起来像这样的脚本：

```
function AddShippingLocation() {
    $.ajax({
        data: { model: $('#shippinginfoform').serialize() },
        type: "POST", 
        url: "/PricingRequest/AddShippingLocation", 
        success: function (response) {
            $('#shiplocation-wrapper').html(response);
        }
    })
} 
```

这是从被点击的链接调用的。同样在视图中，我有一个使用它的表单：

```
@using (Html.BeginForm("AddShippingLocation", "PricingRequest", FormMethod.Post, new { id = "shippinginfoform" })) 
```

{

我将 Addshippinglocation 作为方法放入，因为我想测试该模型是否会使用内置帮助程序进行序列化。模型使用 Html.BeginForm 正确传入，使用 Ajax.BeginForm 时也正确传入。但是，当使用 jquery.serialize 时，它​​没有正确传递。在旁注中，我正在使用 MVC 4。有什么想法吗？谢谢。

编辑：这是请求标头。上一个是模型到方法的成功post，下一个是传入空模型的.serialize()。我检查了帖子字符串，它们完全相同。

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection  keep-alive
Cookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n
Host    localhost:2652
Referer http://localhost:2652/PricingRequest/custinfo
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
Request Headers From Upload Stream
Content-Length  471
Content-Type    application/x-www-form-urlencoded

Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Cache-Control   no-cache
Connection  keep-alive
Content-Length  555
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n
Host    localhost:2652
Pragma  no-cache
Referer http://localhost:2652/PricingRequest/custinfo
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
X-Requested-With    XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:30:44.530

请求*主体*是一样的吗？不知何故，我很怀疑。

您的 ajax 请求正文将有

`model=....`

你的表单序列化在哪里`....`，哪个 url 对输入进行编码，然后序列化本身是 urlencoded。您使用 ajax 请求进行了两次 urlencoding。普通形式的帖子不会发生这种情况，并且 urlencoding 对于等号不是幂等的。

尝试

```
 data: $('#shippinginfoform').serialize(), 
```

如果`shippinginfoform`表单与发布的表单相同，*我认为*应该发布相同的数据（嗯，通常：可能存在一些极端情况，其值与提交按钮等相关联。）。

*我承认我有可能是错的，在这种情况下，我会立即删除这个答案。*

# python - 检测字符串中所有以大写字母开头的单词的代码

> ID：13205343
> 
> 赞同：5
> 
> 时间：2012-11-03T02:14:32.030
> 
> 标签：python

我正在写一个小片段，它抓取所有以大写字母开头的字母 python 。这是我的代码

```
def WordSplitter(n):
    list1=[]
    words=n.split()
    print words

    #print all([word[0].isupper() for word in words])
    if ([word[0].isupper() for word in words]):
        list1.append(word)
    print list1

WordSplitter("Hello How Are You") 
```

现在当我运行上面的代码时。我希望该列表将包含 string 中的所有元素，因为其中的所有单词都以大写字母开头。但这是我的输出：

```
@ubuntu:~/py-scripts$ python wordsplit.py 
['Hello', 'How', 'Are', 'You']
['You']# Im expecting this list to contain all words that start with a capital letter 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T02:17:01.437

你只评估一次，所以你得到一个 True 列表，它只附加最后一项。

```
print [word for word in words if word[0].isupper() ] 
```

或者

```
for word in words:
    if word[0].isupper():
        list1.append(word) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:35:47.417

您可以利用以下`filter`功能：

```
l = ['How', 'are', 'You']
print filter(str.istitle, l) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T06:37:57.903

我已经编写了以下 python 片段来将大写字母开头的单词作为键存储到字典中，并且它的外观没有作为该字典中的值与键存储。

```
#!/usr/bin/env python
import sys
import re
hash = {} # initialize an empty dictinonary
for line in sys.stdin.readlines():
    for word in line.strip().split(): # removing newline char at the end of the line
        x = re.search(r"[A-Z]\S+", word)
        if x:
        #if word[0].isupper():
            if word in hash:
                hash[word] += 1
            else:
                hash[word] = 1
for word, cnt in hash.iteritems(): # iterating over the dictionary items
    sys.stdout.write("%d %s\n" % (cnt, word)) 
```

在上面的代码中，我展示了两种方法，检查大写起始字母的数组索引和使用正则表达式。欢迎对上述代码的性能或简单性提出任何改进建议

# load - Sencha Touch 2 - TabPanel 项目更改上的 Ext.LoadMask

> ID：13205344
> 
> 赞同：0
> 
> 时间：2012-11-03T02:14:39.287
> 
> 标签：load, sencha-touch-2, mask, tabpanel

如果我想在 Sencha Touch 2 的选项卡更改之间显示选项卡面板上的加载掩码。正确​​的方法是什么？

我想在按下选项卡按钮时显示加载蒙版，并在面板正确显示后立即隐藏它。

```
Ext.define("MyProject.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: [
        'Ext.TitleBar','Ext.MessageBox'
    ],
    config: {
        fullscreen: true,
        tabBarPosition: 'bottom',
        layout: {
            type: 'card',
            animation: 'fade' //false, fade, flip, pop, scroll, slide
        },

        items: [
            {
                xtype: 'panel1',

                masked: {
                    xtype:'loadmask',                        
                    message:'Chargement...'
                },

                listeners: {
                    painted: function(container, value, oldValue, eOpts) {
                        //Ext.Msg.alert('Test', 'painted');
                        this.setMasked(false);
                    }
                }
            },
                {
                xtype: 'panel2',

                masked: {
                    xtype:'loadmask',                        
                    message:'Chargement...'
                },

                listeners: {
                    painted: function(container, value, oldValue, eOpts) {
                        //Ext.Msg.alert('Test', 'painted');
                        this.setMasked(false);
                    }
                }
            }, 
```

问题是事件被捕获，但由于我在创建子项时显示了掩码，所以掩码没有显示。我需要一个像 onActiveItemChanged 这样的事件，但在之前而不是之后触发。任何人都知道我该如何实施？

更新：我几乎是通过添加在 Sencha Touch 论坛上找到的代码来实现的。在主视图（选项卡面板）级别添加：

```
listeners: {
            delegate : 'tabbar > tab',
            tap : function() {
                Ext.Viewport.setMasked({ xtype: 'loadmask', message: 'Loading...', indicator:true});
            }
        } 
```

然后，在我在选项卡面板中添加的每个项目上：

```
xtype: 'panel1',

                listeners: {
                    painted: function(container, value, oldValue, eOpts) {
                        Ext.Viewport.setMask('false');
                    }
                } 
```

但现在的问题是，由于我覆盖了默认的“tap”事件侦听器，它总是停留在同一个选项卡上，即使我们点击一​​个按钮也不会显示其他选项卡。然而，新标签的绘制事件被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:52:30.447

我不确定你能否实现这样的结果，因为通常我只是`Ext.LoadMask`在点击事件上应用 Ajax 或 Json 请求时使用。

但是在您的情况下，每个面板的选项卡面板内容已经加载，所以当您在这里使用遮罩时，我觉得有点多余的任务。`activeitemchange`但是，当您的事件像这样触发时，您可以制作一个假掩码加载例如一秒钟：

```
listeners: {
activeitemchange:function(){
    function setMask() {
        Ext.Viewport.mask({ xtype: 'loadmask', message: 'Chargement...' });
    }

    function unMask() {
        Ext.Viewport.unmask();
    }

    function start() {
        setMask();
        setTimeout(unMask, 1000); // execute the mask in 1 second
    }

    start();
}}; 
```

顺便说一句，这个`activeitemchange`事件需要在你定义了tabpanel的所有项之后放置。希望能帮助到你 ：）

# asp.net - 如何删除 CreateUserWizard 控件中的表格标签

> ID：13205346
> 
> 赞同：3
> 
> 时间：2012-11-03T02:15:03.560
> 
> 标签：asp.net, .net, css, createuserwizard

如何在不呈现 html 表的情况下使用 CreateUserWizard 控件？

我已经自定义了 CreateUserWizard 的布局，并且我正在使用 css 来设置它的样式。我的按钮离我的表单太远了，因为`<table>`标签 asp.net 是默认呈现的。

```
<table cellspacing="0" cellpadding="0" id="cphContent_CreateUserWizard1" style="border-collapse: collapse; ">
    <tbody>
        <tr style="height: 100%; ">
            <td>
                <table cellspacing="0" cellpadding="0" style="height: 100%; width: 100%; border-collapse: collapse; ">
                    <tbody>
                        <tr>
                            <td style="height: 100%; width: 100%; ">
                                <fieldset>
                                    ...
                                </fieldset>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-27T22:19:55.137

CreateUserWizard 没有 RenderOuterTable 属性，但您可以使用 LayoutTemplate 和 PlaceHolders 删除表（就像 ListView 控件一样）。

这是一个例子：

```
<asp:CreateUserWizard runat="server" ActiveStepIndex="1"> 
  <LayoutTemplate> 
    <asp:PlaceHolder ID="WizardStepPlaceHolder" runat="server" />
    <asp:PlaceHolder ID="navigationPlaceHolder" runat="server" />
  </LayoutTemplate> 

  <HeaderTemplate>
    Header 
  </HeaderTemplate> 

  <StepNavigationTemplate>
    <asp:LinkButton runat="server" CausesValidation="False" CommandName="MovePrevious" Text="Previous" ID="StepPreviousButton">Previous</asp:LinkButton>
    <asp:LinkButton ID="NextLinkButton" runat="server" CommandName="MoveNext">Next</asp:LinkButton>
  </StepNavigationTemplate>

  <WizardSteps> 
    <asp:CreateUserWizardStep runat="server"> 
      <ContentTemplate> 
      </ContentTemplate> 
    </asp:CreateUserWizardStep> 

    <asp:CompleteWizardStep runat="server"> 
      <ContentTemplate> 
      </ContentTemplate> 
    </asp:CreateUserWizardStep> 
  </WizardSteps> 
</asp:CreateUserWizard> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:41:55.577

您可以从设计视图执行此操作，并让 Visual Studio 将标记生成到您可以修改的模板中。在设计视图中，单击 createUserWizard 控件，单击右上角的尖括号 ( `>`)，然后单击`Customize Create User Step`。切换到代码并编辑标记以品尝！

![在此处输入图像描述](../Images/49c8384cccca15f87b14dde27b35044d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:02:20.633

您根本无法从控件中删除 table-tag，因为控件是以这种方式格式化的。

# entity-framework - EF 表拆分：InvalidOperationException - 序列包含多个匹配元素

> ID：13205349
> 
> 赞同：1
> 
> 时间：2012-11-03T02:15:32.017
> 
> 标签：entity-framework, ef-code-first, poco, .net-4.5

我有一个我认为可能是 EF 错误的重现。我想将一张表拆分为两个实体。这些实体中的每一个都包含对第三实体的引用。这两个引用**必须**使用相同的外键属性名称公开。由于它们映射到同一个表中的列，因此使用配置（或在此示例中为属性）来使列名唯一。

当我尝试加载模型时，我从 EF 获得了上述异常。如果我修改 FK 属性之一的名称，那么错误就会消失。

这是我的模型。代码按原样工作。要重现该问题，请重命名`Foo2.Foo3Id1`为`Foo3Id`，这是我需要它具有的值。

# 你为什么想这么做？

如果您想知道为什么我需要这两个属性具有相同的名称，这里是解释。

我有一个包含多个地址的表（例如邮政地址和帐单地址）。这是一个现有的数据库，所以我无法更改表结构。每个地址由一系列标准列表示。每列的名称都有一个前缀标识地址的种类和一个后缀标识地址的一部分，例如`BillingAddressLine1`，`BillingAddressZipCode`和`PostalAddressLine1`。

似乎使用复杂类型可以解决这个问题*。*但是，还有一个复杂的问题：每个地址都包含一个`CityId`引用`Cities`表的地址。复杂类型[不支持关系和导航属性](https://stackoverflow.com/a/7603303/439024)。所以我打算的解决方案是改用表拆分，并将每组地址属性拆分为自己的实体。每个表示地址的实体要么派生自基类型，例如，`Address`要么实现接口`IAddress`。

使用表格拆分时，我仔细观察了多个类型映射到同一个表格的限制，[它们必须都具有彼此的导航属性](https://stackoverflow.com/a/11884110/439024)。

在下面的代码中，`Foo1`and`Foo2`都是地址类型（并且会实现一些通用接口）。 `Foo3`是`City`。这是我能想到的最简单的问题重现。

# 代码示例

```
class Program
{
    static void Main(string[] args)
    {
        // Use NuGet to import EF 5 into the project.
        // This code is just enough to cause the metadata to be loaded and therefore demo the error.
        using (Context cx = new Context())
        {
            var qq = from f in cx.Foo3s
                     where f.Foo1s.Any()
                     select f;
        }
    }
}

[Table("Foo")]
public class Foo1
{
    [Key]
    public virtual int Id { get; set; }

    [Required]
    public virtual Foo2 Foo2 { get; set; }

    [ForeignKey("Foo3")]
    [Column("Foo1_Foo3Id")]
    public virtual int? Foo3Id { get; set; }

    public virtual Foo3 Foo3 { get; set; }
}

[Table("Foo")]
public class Foo2
{
    [Key]
    public virtual int Id { get; set; }

    [Required]
    public virtual Foo1 Foo1 { get; set; }

    // Re-name the following property to Foo3Id (rather than Foo3Id1) and the model won't load.
    // You get "InvalidOperationException: Sequence contains more than one matching element."
    [ForeignKey("Foo3")]
    [Column("Foo2_Foo3Id")]
    public virtual int? Foo3Id1 { get; set; }

    public virtual Foo3 Foo3 { get; set; }
}

[Table("Foo3")]
public class Foo3
{
    [Key]
    public virtual int Id { get; set; }

    [InverseProperty("Foo3")]
    public virtual ICollection<Foo1> Foo1s { get; set; }

    [InverseProperty("Foo3")]
    public virtual ICollection<Foo2> Foo2s { get; set; }
}

public class Context : DbContext
{
    public DbSet<Foo3> Foo3s { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        // Don't think we can configure 1:1 relationship using just attributes.
        var foo2 = modelBuilder.Entity<Foo2>();
        foo2.HasRequired(q => q.Foo1)
            .WithRequiredPrincipal(q => q.Foo2);
    }
} 
```

这是一个错误吗？难道我做错了什么？这是一个已知的 EF 限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T14:58:59.980

这确实是一个错误，现在已经修复。请参阅[http://entityframework.codeplex.com/workitem/643](http://entityframework.codeplex.com/workitem/643)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T13:47:06.720

该错误仍然存​​在于 6.0 中。看看这里：[https](https://entityframework.codeplex.com/workitem/546) ://entityframework.codeplex.com/workitem/546 + 另一个相关的错误：[https ://entityframework.codeplex.com/workitem/2116](https://entityframework.codeplex.com/workitem/2116)

# sockets - Recv() 32 位和 64 位操作系统之间的行为差 异

> ID：13205352
> 
> 赞同：1
> 
> 时间：2012-11-03T02:16:15.213
> 
> 标签：sockets, recv

我已经编写了一个服务器-客户端程序，我想问一下：在 32 位和 64 位操作系统之间，recv() 函数的行为有什么不同。

我问这个是因为我在 64 位笔记本电脑上同时运行服务器和客户端，并且一切正常。我以这种方式调用 recv() ：`while((tmp = recv(client_sock,rec_msg,256,0))>0)`并且正如预期的那样，例如，如果我有 3 个字符串要从客户端发送，在服务器部分它会输入 while 3 次并打印正确的结果。

当我在 32 位 Debian 机器上运行完全相同的程序时，似乎由于某种未知的原因，如果我从客户端发送 3 个字符串，它只进入服务器部分的 while 循环一次，并将 3 个字符串作为一个接收。

我使用了 print 语句，发现它一次进入 while 循环并接收所有缓冲区，尽管在客户端部分 while 循环按预期输入了 3 次，并且在 3 个不同的时间发送了 3 个字符串。我找不到为什么它在 64 位上工作正常而在 32 位上工作不正常的合乎逻辑的原因，这就是我问这个问题的原因。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T02:23:46.770

如果这是一个流套接字，那么就没有固有的消息边界，并且发送和接收的消息之间没有关联。`recv()`可以返回部分消息、整个消息或多条消息；唯一可以保证的是字节的接收顺序与它们发送的顺序相同。

您看到的差异可能只是由于两台机器之间的速度差异。32 位机器速度较慢，因此在检查网络上可用数据的时间里，所有 3 个数据包都已到达。但是速度更快的 64 位机器会在第二个数据包到达之前处理从第一个数据包接收到的数据。

# macos - 从 kext 读取 plist

> ID：13205356
> 
> 赞同：1
> 
> 时间：2012-11-03T02:17:27.507
> 
> 标签：macos, kernel-extension

我想在操作系统重新启动之间保存一个 kext 设置。由于我需要立即加载 kext 后的设置，因此我迫不及待地等待管理守护程序启动。它是从 kext 读取/写入 kext plist 文件的方法还是其他一些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:23:16.087

基本上，不-您应该将设置存储在用户空间中并使用启动服务将它们设置在 kext 中。在您的 kext 收到设置之前，它应该只使用一些合理的默认值。

在 kext 启动时真正包含设置的一种方法是将自定义属性添加到 kext 的 info.plist 中的 IOKitPersonality。显然，这意味着更改设置需要更改 kext 本身，但我听说有人在 Apple 的公共 darwin 邮件列表中实际这样做（尽管 Apple 员工批评它）。请注意，kext 缓存不会像这样：如果您的用户空间程序更改 info.plist 中的设置，它可能需要增加捆绑版本号才能使 kext 缓存接收更改，否则缓存/预链接的 kext不会看到变化。[您需要在kext 捆绑版本规则](http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KEXTConcept/Articles/infoplist_keys.html)的约束范围内执行此操作或者它不会被检测为版本增加，或者更糟糕的是，kext 缓存将彻底拒绝 kext。另外，不要忘记在更新 kexts 后触摸 /System/Library/Extensions/。

**更新：**由于 kext 签名要求，修改 kext 的 info.plist 将不再适用于 10.9 和 10.10。

在您的 kext 是存储过滤器方案的特定情况下，您可以将设置存储在提供程序分区的特殊“超级块”中。例如，AppleRAID（它是开源的）就是这样做的。不过，这对于任何其他类型的 kext 都不实用。

# asp.net - 允许远程访问 asp.net 中的本地主机网站

> ID：13205357
> 
> 赞同：0
> 
> 时间：2012-11-03T02:18:00.140
> 
> 标签：asp.net, localhost, port, lan

嗨，我已经开发了一个网站，并且在机器（本地主机）上，我希望朋友从我的网络外部访问它，我已经做了一些研究，并被指出将端口转发作为一种解决方案。我也可以参考的任何好的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:38:05.843

不是编程问题，而是如何设置路由器。

路由器，尤其是您可能使用的 adsl 调制解调器，出于安全考虑，它们不会将外部请求转发到内部网络，因为它们不知道将它们发送到哪里。

因此，在设置路由器时，您首先需要将外部呼叫转发到您的电脑。

现在，这有两个参数，什么**端口**发送到**ip 内部**的什么。

[如何](http://www.howtogeek.com/66214/how-to-forward-ports-on-your-router/)使用图像和示例在路由器页面上转发端口。

假设您在路由器后面有一台 ip 为 192.168.1.100 的电脑，并在 80 上设置了一个本地 iis，那么您需要设置路由器，以便何时接受端口 80 上的呼叫，将其发送到 192.168.1.100

现在您需要知道要给您的朋友什么 ip 才能尝试给您打电话，您可以使用[http://www.whatismyip.com/](http://www.whatismyip.com/)找到它 他们在外面看到您的 ip 是您的朋友必须输入的浏览器。

然后需要让你的 iis 运行，并让你的电脑防火墙接受端口 80 上的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:45:36.883

@Aristos 给了你答案。但请记住，某些 Internet 提供商会阻止端口 80，因此您可能必须更改为 88。您的朋友将以

```
http://your_external_ip:88 
```

# android - 为什么我的两个视图都没有显示？

> ID：13205360
> 
> 赞同：0
> 
> 时间：2012-11-03T02:18:13.420
> 
> 标签：android, layout

所以我一直在尝试找出布局并使用布局充气器，但我遇到了一些问题。我有两个相对的 xml 布局文件，一个 xml 文件有两个 textView、一个 editText 字段和一个 spinner 对象：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/firstLayout"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

<TextView
    android:id="@+id/goalNameView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="5dip"
    android:text="@string/goalName" />

<EditText
    android:id="@+id/goal_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/goalNameView"
    android:hint="@string/editText"
    android:ems="10" >

    <requestFocus />
</EditText>

 <TextView
    android:id="@+id/goalTasksView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/goal_tasks"
    android:layout_alignBottom="@+id/goal_tasks"
    android:layout_alignLeft="@+id/goalNameView"
    android:text="@string/goalTasks" />

<Spinner
    android:id="@+id/goal_tasks"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/goalTasksView"
    android:layout_marginTop="51dp" />

 </RelativeLayout> 
```

另一个 xml 文件有一个 textView 和一个 editText 字段：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/tView"
 >
<EditText
    android:id="@+id/taskNameField"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/taskNameView"
    android:ems="10"
    android:hint="@string/editText" />

<TextView
    android:id="@+id/taskNameView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/taskNameField"
    android:layout_alignBottom="@+id/taskNameField"
    android:layout_alignParentLeft="true"
    android:text="@string/taskName"
     />

</RelativeLayout> 
```

我正在尝试将这两个布局与第三个 xml 文件（main.xml）一起修补：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="wrap_content"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/theMain"
>

<include android:id="@id/mainLayout" layout="@layout/activity_goal_keeper"  />

</LinearLayout> 
```

我希望布局工作的方式是显示第一个布局（@id/firstLayout），然后直接在其下方显示第二个布局（@id/tView）。我读过我需要在 LinearLayout 上实现布局来实现这一点，这就是为什么我有第三个布局（@id/theMain）。

如您所见，我有一个@id/firstLayout 的包含语句，但我没有@id/tView 的包含语句，因为我试图通过我的主要活动来扩充@id/tView 的多个版本：

```
 public class GoalKeeperActivity extends Activity implements       AdapterView.OnItemSelectedListener {
 public Integer[] items= {1,2,3,4,5,6,7,8};

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    //setContentView(R.layout.activity_goal_keeper);
    setContentView(R.layout.main);

    Spinner numOfTasks=(Spinner) findViewById(R.id.goal_tasks);
    numOfTasks.setOnItemSelectedListener(this);

    ArrayAdapter<Integer> aa = new ArrayAdapter<Integer>(this, android.R.layout.simple_spinner_item, items);

    aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    numOfTasks.setAdapter(aa);

    ViewGroup item = (ViewGroup) findViewById(R.id.theMain);

    for(int i=0; i<3;i++)
    {
      View child = getLayoutInflater().inflate(R.layout.tasks_view, item, false);
      child.setId(i);
      item.addView(child);

    } 
```

我的问题是 @firstLayout 正确显示，但 @tView 根本没有显示。有人可以解释我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:56:57.210

我想通了，这只是在@id/tView xml 文件上将“android:layout_height”属性设置为等于 wrap_content 的问题。愚蠢的小错误...

# iphone - 使用 scrollEnabled=NO 在表视图上滚动取消突出显示先前选择的行

> ID：13205362
> 
> 赞同：1
> 
> 时间：2012-11-03T02:18:34.563
> 
> 标签：iphone, objective-c, ios, xcode, ipad

要重现，请添加一个启用滚动设置为 NO 的表格视图。然后点击一行，然后在表格视图上滚动，您将看到先前的选择变得未突出显示，直到您抬起表格视图的手指。

这似乎是默认行为，有没有办法覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:31:46.307

我认为您可以尝试`UITableViewCellSelectionStyle`像这样设置表格视图

```
self.tableView.selectionStyle = UITableViewCellSelectionStyleNone; 
```

这将在用户抬起手指之前禁用单元格高亮显示。Apple 的文档中提到了这一点：[tableView:willSelectRowAtIndexPath:](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3awillSelectRowAtIndexPath%3a)

# objective-c - iOS 中使用 NSOutputStream 的 FTPS

> ID：13205363
> 
> 赞同：0
> 
> 时间：2012-11-03T02:18:44.853
> 
> 标签：objective-c, ios, ftps, nsoutputstream, cfstream

我正在尝试通过 SSL 在 FTP 上上传文件。我的代码适用于正常连接，但与 SSL 一起使用时，它会在以下方法中引发错误。错误是 NSStreamEventErrorOccurred。

```
 -(void) stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode{} 
```

我在[iphone-ftps-client 的](https://stackoverflow.com/questions/1899343/iphone-ftps-client)这个网站上查看了 soultion 。但是，答案是 FTPS 在 iOS [需要一个创建自己的库] 中没有内置支持，而另一个仅指向 FTP。

我的 FTP 服务器 [.crt] 上有证书，但由于我是新手，我无法理解该证书在客户端 [iOS] 上的用法。

任何人都可以在 FTPS 上帮助我，这将是一个很大的帮助。

# c# - TableLayoutPanel 删除空行

> ID：13205365
> 
> 赞同：4
> 
> 时间：2012-11-03T02:18:58.540
> 
> 标签：c#, winforms, tablelayoutpanel

我正在尝试从 a 中删除所有空行`TableLayoutPanel`。到目前为止，我已经能够做到这一点

```
private void RemoveEmptyRows()
{
    for (int row = 0; row < tablePanel.RowCount - 1; row++)
    {
        bool hasControl = false;
        for (int col = 0; col < tablePanel.ColumnCount; col++)
        {
            if (tablePanel.GetControlFromPosition(col, row) != null)
            {
                hasControl = true;
                break;
            }
        }
        if (!hasControl)
            tablePanel.RowStyles.RemoveAt(row);
    }
} 
```

有没有更好的方法？我的方法似乎太不知所措了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:44:45.927

除了您的代码存在一些缺陷之外，我不会说有更好的方法。你可以依靠`Linq`让它更简洁一点，但这可能不优雅，可读性也差，而且根本无法调试，因为你不应该使用太多的 Linq 来做这种事情（我个人喜欢它！） . 以下是您应该对现有代码执行的操作：

```
private void RemoveEmptyRows()
{
    for (int row = tablePanel.RowCount -1; row >= 0; row--)
    {
        bool hasControl = false;
        for (int col = 0; col < tablePanel.ColumnCount; col++)
        {
            if (tablePanel.GetControlFromPosition(col, row) != null)
            {
                hasControl = true;
                break;
            }
        }

        if (!hasControl)
        {
            tablePanel.RowStyles.RemoveAt(row);
            tablePanel.RowCount--;
        }
    }
} 
```

1.  您应该从上到下迭代，因为在外部 foreach 循环中`RowCount`评估它时可能会发生变化。`row`

2.  `RowStyle`您还应该通过简单地删除行后删除行`RowCount--`。

这是一个`Linq`版本：

```
Enumerable.Range(0, tablePanel.RowCount)
    .Except(tablePanel.Controls.OfType<Control>()
        .Select(c => tablePanel.GetRow(c)))
    .Reverse()
    .ToList()
    .ForEach(rowIndex =>
     {
         tablePanel.RowStyles.RemoveAt(rowIndex);
         tablePanel.RowCount--;
     }); 
```

分解它的作用（如果您对 Linq 不太熟悉）：

```
var listOfAllRowIndices = Enumerable.Range(0, tablePanel.RowCount);
var listOfControlsInTableLayoutPanel = tablePanel.Controls.OfType<Control>();
var listOfRowIndicesWithControl = listOfControlsInTableLayoutPanel.Select(c => tablePanel.GetRow(c));
var listOfRowIndicesWithoutControl = listOfAllRowIndices.Except(listOfRowIndicesWithControl);
var listOfRowIndicesWithoutControlSortedInDescendingOrder = listOfRowIndicesWithoutControl.Reverse(); //or .OrderByDescending(i => i); 
```

接着：

```
listOfRowIndicesWithoutControlSortedInDescendingOrder.ToList().ForEach(rowIndex =>
{
    tablePanel.RowStyles.RemoveAt(rowIndex);
    tablePanel.RowCount--;
}); 
```

另一个可能更具可读性但效率较低的 Linq 版本：

```
Enumerable.Range(0, tableLayoutPanel1.RowCount)
    .Where(rowIndex => !tableLayoutPanel1.Controls.OfType<Control>()
        .Select(c => tableLayoutPanel1.GetRow(c))
        .Contains(rowIndex))
    .Reverse()
    .ToList()
    .ForEach(rowIndex =>
    {
        tablePanel.RowStyles.RemoveAt(rowIndex);
        tablePanel.RowCount--;
    }); 
```

# android - 我的应用程序中哪个更好？IntentService 或 Service？

> ID：13205368
> 
> 赞同：1
> 
> 时间：2012-11-03T02:19:26.507
> 
> 标签：android, service, intentservice

我都研究过，IntentService 真的很简单，而服务对我来说有点困惑。我在这里看到了很多问题，我倾向于 IntentService，但恐怕在我的某些工作中，IntentService 不是一个首先去，..这就是我的游戏要做的..在Farmville有点相似

1.  创建新游戏，游戏内日期是每周，从第 1 周开始。数据存储在 SQLiteDB 中
2.  启动IntentService，IntentService会做这件事情。在每个任务之后，通过 NotificationManager 通知用户

    *   每 8 小时更新一周。（1 周 = 8 小时，使用警报管理器）当周更新时，即第 1 周到第 2 周，IntentService 将检查“植物已准备好收获”
    *   IntentService 每周也会随机化天气
    *   检查和更新动物/植物状况
    *   做更多随机的事情
    *   停止意图服务
    *   8 小时后再次运行 Intentservice。

这就是我的游戏应该做的，是 IntentService 还是 Service？IntentService 可以处理这个吗？我真的很想要该服务，但根据我在文章和此处阅读的内容的理解，它应该仅用于“同时多个进程”，而我的游戏可以不使用该功能。

另外，我可以再做一个 IntentService 吗？这项服务必须每 5 分钟左右运行一次。如果没有，那没关系。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:49:38.370

An`IntentService`在后台运行，`seperate Thread`因此在服务中执行的任何操作都不会影响 UI。但是一旦服务完成了它应该做的事情，服务就会自行终止。

A`service`也在后台做一些事情，但是`UI thread`如果你有任何耗时的事情需要做，它会阻止 UI。这也会一直运行，直到您告诉它大部分停止。

如果您使用警报来触发一切，我会说 IntentService 很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:22:31.993

我建议在您的情况下使用 IntentService + AlarmManager 对。

IntentService 创建一个队列和后台线程来处理作业，因此您可以确保一切都在一个接一个地运行。它还会在您的 500 行代码结束后完成并关闭，它也可以进行数据库更新。

服务更多地用于在后台进行工作，例如在线播放音乐等。您启动服务，手动关闭服务。对于 IntentService 它是自动的。

# numbers - 如何在 ada 中引用数字中的单个数字？

> ID：13205371
> 
> 赞同：2
> 
> 时间：2012-11-03T02:20:25.790
> 
> 标签：numbers, ada

如果我有一个像 1234 这样的数字，我该如何专门指代该数字的第二个数字？该数字存储为变量，而 var, width=>2 给了我 12。我需要一种方法来隔离 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:16:03.667

作为替代方案，还要考虑[`Put`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-10-8.html)写入 a的变体`String`。

```
with Ada.Integer_Text_IO;
with Ada.Text_IO;
...
declare
   Var : constant Integer := 1234;
   Result : String(1 .. 4);
begin
   Ada.Integer_Text_IO.Put(Result, Var);
   Ada.Text_IO.Put(Result(2));
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T02:29:11.400

我不确定你所说的 var, width => 2 是什么意思。这不是 Ada。

如果变量是 的子类型`Integer`，那么您可以说：

```
declare 
   Var_As_String := Integer'Image(Var);
   Second_Digit : Character := Var_As_String(3);
begin
   -- Use second digit here.
end; 
```

请注意，索引是`3`因为在 的结果中`Image`，第一个字符是减号或空格。

# css - haml 代码如何使它有一些缩进

> ID：13205372
> 
> 赞同：2
> 
> 时间：2012-11-03T02:20:43.267
> 
> 标签：css, ruby-on-rails, haml

我有以下显示元素的代码，如下所示

```
 Mytable
1\.  line1
2\.  line2
3\.  line3
4\.  line4 
```

但我希望它有缩进，如下所示

```
 Mytable
   1\.  line1
   2\.  line2
   3\.  line3
   4\.  line4 
```

我的代码在这里

```
 %div{:class => 'test1'}
        %table#tablename
          %thead
            %tr
              %th.lead Mytable

          %tbody              
            %tr
              %center
              %td 1.line1
            %tr
              %td 2\. line2
            %tr 
              %td 3\. line3
            %tr
              %td 4\. line4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:29:17.610

有很多方法可以做到这一点。这是一个。[jsFiddle](http://jsfiddle.net/R9Z9b/)

```
<div class="test1">
    <table id="tablename">
       <thead>
       <tr><th class="lead">Mytable</th></tr>    
        </thead>    
        <tbody>
            <tr><td>1\. line1</td></tr>
            <tr><td>2\. line2</td></tr>
            <tr><td>3\. line3</td></tr>
            <tr><td>4\. line4</td></tr>
        </tbody>
    </table>
</div>​ 
```

CSS

```
.test1
{
    padding-left:20px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:26:06.300

使用 CSS 向每行中的第一个单元格添加填充：

```
table#tablename tbody tr td:first-child {
    padding-left: 2em;
} 
```

在此处查看示例：http: [//codepen.io/anon/pen/ramuw](http://codepen.io/anon/pen/ramuw)

# mysql - 左连接 4 个表

> ID：13205375
> 
> 赞同：0
> 
> 时间：2012-11-03T02:21:51.363
> 
> 标签：mysql

总计、间接和直接表以及从“摘要”中提取数据。最后一张表“int_data”是从“aspect_summary”中拉出来的……我不能让它和其他人一起玩得很好。我的查询只给了我 1 行结果，我不知道为什么。建议？

```
SELECT user, 
amin,
COALESCE(sum(tavg*tcomp)) AS d_task_min, 
COALESCE(indirect.iminutes,0) AS i_task_min, 
COALESCE(((amin)+(indirect.iminutes)/60),0) AS FAKE_d_call_hour,
COALESCE(tcomp*tavg,0) + COALESCE(indirect.iminutes,0) AS totals,
hrs_earned, 
hrs_equiv, 
minutes, 
diff,
COALESCE(SUM(tot_rec_tasks)-sum(tot_i_tasks),0) AS tot_d_tasks,
COALESCE(tot_i_tasks,0) AS tot_i_tasks,
int_id,

ROUND(COALESCE((((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)),0),2) AS ttime2, 
ROUND(COALESCE((hrs_earned / (((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)))*100,0),2) AS prod, 
ROUND((COALESCE((hrs_earned / hrs_equiv),0)*100),2) AS eff,
ROUND(COALESCE(hrs_earned/(((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)),0)*100,2) AS util,
amin AS aspect_time

FROM
(
SELECT 
U.user_name AS user, 
U.user_id AS tuser_id,
M.minutes AS tminutes, 
ta.task_type AS ttasktype,
ta.task_average as tavg,
tc.completed as tcomp,
ROUND(SUM((((TA.task_average)*TC.completed))/60),2) AS ttime,
ROUND(SUM((((TA.task_average)*TC.completed))/60),2) AS hrs_earned, 
ROUND(SUM(((TA.task_average/6)*TC.completed)),2) AS hrs_equiv,
ROUND(SUM(M.minutes/60),2) AS minutes, 
ROUND((SUM(M.minutes)/60),2)-ROUND(SUM((TA.task_average*TC.completed)/60),2) AS diff,
SUM(TC.completed) AS tot_rec_tasks

    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tcompleted TC 
    ON TC.tcompleted_id = S.tcompleted_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    JOIN hour_interval H 
    ON H.hourinterval_id = S.hourinterval_id 
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'
    GROUP BY tuser_id) AS total
LEFT JOIN
    (SELECT U.user_id AS iuser_id, M.minutes AS iminutes, tc.completed AS tot_i_tasks
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    JOIN tcompleted TC 
    ON TC.tcompleted_id = S.tcompleted_id
    WHERE TA.task_type='indirect'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'
    GROUP BY iuser_id) AS indirect
ON tuser_id = iuser_id
LEFT JOIN
    (SELECT U.user_id AS duser_id
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tcompleted TC 
    ON TC.tcompleted_id = S.tcompleted_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    WHERE TA.task_type='direct'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'
    GROUP BY duser_id) AS direct
ON tuser_id = duser_id
LEFT JOIN
    (Select U.user_id AS int_id, SUM(M.minutes) AS amin
    FROM aspect_summary A
    JOIN users U ON U.user_id = A.user_id
    JOIN minutes M ON M.minutes_id = A.minutes_id
    JOIN hour_interval H ON H.hourinterval_id = A.hourinterval_id
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'
    GROUP BY int_id) AS int_data
ON tuser_id = int_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:45:42.300

按照 nawfal 的要求分解查询，瞧……问题解决了。我在不需要的地方添加了 SUM，这导致列总计并仅显示 1 行。

# c - SDL_PollEvent 未触发

> ID：13205379
> 
> 赞同：0
> 
> 时间：2012-11-03T02:22:15.570
> 
> 标签：c, sdl

我最近才开始使用 C 语言并使用 SDL，所以我确信这是我搞砸的基本内容，但我能找到的每个示例代码看起来都像我的，除了我的不起作用。所以任何帮助都会受到欢迎。

```
#include <stdio.h>
#include <SDL.h>

int main(int argc, char *argv[])
{
SDL_Event event;
int game_running = 1;
while (game_running)
{
    while (SDL_PollEvent(&event))
    {
        switch (event.type) /* checking for event type */
        {
            case SDL_KEYDOWN:
                switch(event.key.keysym.sym)
                {
                    case SDLK_UP:
                        printf("You pressed up.\n");
                        break;
                    case SDLK_DOWN:
                        printf("You pressed down.\n");
                        break;
                }
                break;
            case SDL_KEYUP:
                printf("You stopped pressing the button.\n");
                break;
            case SDL_QUIT:
                game_running=0;
                break;
        }
    }
}
SDL_Quit();
printf("The program stopped.");

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:01:08.933

事件处理与显示表面相关联。添加如下内容：

```
SDL_Init (SDL_INIT_VIDEO);
SDL_SetVideoMode (320, 200, 8, 0); 
```

它会起作用。

# javascript - .net webservice json修改帮助对象wihing obect

> ID：13205381
> 
> 赞同：0
> 
> 时间：2012-11-03T02:22:59.343
> 
> 标签：javascript, .net, json, web-services

大家好，我已经能够弄清楚如何从.net web 服务简单地发送一个类。

这是我的课

```
Imports Microsoft.VisualBasic

Public Class TestClass

    Public Class Person

        Public Class Names
            'Public Property Firsname As String
            Public Property ID As Integer
            Public Property LastName As String
            Shared Property FirstName As String

        End Class
    End Class
End Class 
```

这是我在代码中使用它的方式，

```
<WebMethod()> _
    Public Function PersonList(ID As Integer) As List(Of Person.Names)
        'Dim p As New Person With {.ID = ID, .FirstName = "Kenneth"}
        Try

            Dim ListPerson As New List(Of Person.Names)

            For startNumber = 1 To 4
                Dim Per As New Person.Names

                Per.ID = startNumber
                ListPerson.Add(Per)
            Next

            Return ListPerson

        Catch ex As Exception

            Dim Per As New Person.Names

            Per.ID = ex.Message

            Dim ListPerson As New List(Of Person.Names)

            ListPerson.Add(Per)

        End Try

    End Function 
```

这在我返回 JSON 时效果很好，但现在我想更进一步。我想要有列表的列表。这可能吗。

看看这张图片。![在此处输入图像描述](../Images/bfc7b44e886126df5b3f2e63ca241f39.png)

我想返回一个低于 id 的数组，而不仅仅是 id 的值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:27:44.490

这里的诀窍是序列化 XML，我需要它来制作我的班级成员之一的字符串列表，该列表完全完成了我想要做的事情。感谢大家

# mysql - 限制在内 连接表上的一个结果

> ID：13205383
> 
> 赞同：2
> 
> 时间：2012-11-03T02:23:59.240
> 
> 标签：mysql, join, limit

您好我有以下查询：

```
SELECT pr.*, img.image_file, c.contract_id, c.cmin_markup, c.cmeal_plan, c.tax_include, c.civa, m.plan_name, r.room_name, r.room_id FROM contracts AS c
INNER JOIN meal_plan AS m ON m.plan_code = c.cmeal_plan AND m.lang = '1'
INNER JOIN room_infos AS r ON r.hotel_id = '$hid' AND r.lang = '1'

LEFT JOIN images AS img ON img.foreign_id = r.room_id LIMIT 1

LEFT JOIN promotions as pr ON pr.hotel_id = '$hid' AND FIND_IN_SET('c.contract_id', pr.contract_id) > 0 AND FIND_IN_SET('r.room_id', pr.room_id) > 0 AND pr.travel_start <= '$now' AND pr.travel_end >= '$now' AND pr.book_start <= '$arriving' AND pr.book_end >= '$departing' AND pr.lang='1'
WHERE c.hotel_id = '$hid' AND c.cstart <= '$arriving' AND c.cend >= '$departing' AND c.ctype = '1'" 
```

我需要限制图像表只给我一个结果。我不确定这是否可行，或者如何实现这一目标的最佳方式。如果需要更多信息，请告诉我。要发布的表格很多。提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:34:29.550

在查询末尾包含一个分组依据。假设您的图像表有一个 ID 字段，只需附加“GROUP BY images.id”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:32:16.743

我面前没有 mySql 实例来尝试这个，但考虑将图像移动到子查询中：

```
LEFT JOIN (select * from images LIMIT 1) AS img on img.foreign_id = r.room_id 
```

这当然不是很有效，因为内联子查询中没有 where 子句，您可以改进子查询以使其更具限制性并将其与父查询连接。

像这样的东西：

```
select * from images as img2 where img2.foreign_id = r.room_id LIMIT 1 
```

# android - 如何检查文件是否在内部存储中可用

> ID：13205385
> 
> 赞同：5
> 
> 时间：2012-11-03T02:24:22.767
> 
> 标签：android, download

我正在尝试从 Internet 下载文件并且它成功但现在我想检查该文件是否存在于内部存储中。

```
else if (arg0.getId() == R.id.btn_download)
{
    Toast.makeText(this, "download button clicked", Toast.LENGTH_SHORT).show();

    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(names[b]));
    request.setDescription("Downloading..");
    request.setTitle("Futsing Magazine Issue " + (this.mPictureManager.getCurrentIndex() +1) );
    // in order for this if to run, you must use the android 3.2 to compile your app
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        request.allowScanningByMediaScanner();
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    }
    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "Futsing Magazine Issue " + (this.mPictureManager.getCurrentIndex()
            +1) +".pdf");

    // get download service and enqueue file
    DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    manager.enqueue(request); 
```

检索到的项目将下载到 /mnt/sdcard/Download。如何使用代码检查文件是否存在？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T02:31:11.607

假设以下是您的文件路径

```
String path=context.getFilesDir().getAbsolutePath()+"/filename";
File file = new File ( path ); 

if ( file.exists() ) 
{
     // Toast File is exists
}
else
{
     // Toast File is not exists
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T09:21:09.347

```
File applictionFile =  new File(Environment.getExternalStoragePublicDirectory(
                                    Environment.DIRECTORY_DOWNLOADS)+ "/"+<file-name>);

    if(applictionFile != null && applictionFile.exists()){

   } 
```

如果文件正在下载到默认的 donwload 目录

# ios - 自定义 UIView 后面的 UITableView 中的删除按钮问题

> ID：13205386
> 
> 赞同：0
> 
> 时间：2012-11-03T02:24:42.760
> 
> 标签：ios, xcode

我正在删除具有 UIImage 视图的 UITableView 中的单元格。当我滑动删除时，删除按钮在 UIView 后面，如果 UIView 在删除按钮后面会更好看。有没有办法可以将按钮的图层首选项设置在顶部？

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
   NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];

    [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

    //Deletes view from cell
    for (UIView *subview in [self.view subviews]) {

        if (subview != self.tableView) {
            [subview removeFromSuperview];
        }
    }

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}
[self performFetch];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:17:25.680

我认为您已将子视图（包括您的 UIImageView）直接放在单元格的子视图中，而不是在 contentView 中。

尝试将它们添加到 contentView 中。

您是否将单元格子类化并在 init 方法中添加了视图？然后使用：

```
[[self contentView] addSubview:myImageView]; 
```

你没有子类化单元格并且你在你的 ViewController 中添加了 UIImageView 吗？

```
[[cell contentView] addSubview:myImageView]; 
```

当显示删除按钮时，这将导致包含您的图像的 contentView 缩小。

如果你真的想把它放在按钮后面，试着把它移到后面的某个地方。

```
[self sendSubviewToBack:myImageView]; 
```

# ruby-on-rails - 我应该使用什么 gem 从 heroku 上的 rails 连接到 facebook api

> ID：13205394
> 
> 赞同：0
> 
> 时间：2012-11-03T02:25:38.623
> 
> 标签：ruby-on-rails, facebook, heroku

我真的很困惑，我正在尝试在 heroku 上创建一个连接到 facebook 的 rails 应用程序。该应用程序需要访问 facebook api（可能使用 koala gem），因此我需要一些用户访问令牌..

我应该使用什么宝石来连接？PS我在facebook上的应用程序设置在“facebook上的应用程序”和“带有facebook登录的网站”上（我真正想要的是一个带有facebook登录和访问facebook api的网站......）

任何想法/澄清？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:45:53.337

你能澄清一下你所说的连接是什么意思吗？如果您需要您的应用程序在 facebook 上“存在”，您可能需要将 facebook 应用程序指向您的 heroku 应用程序[https://developers.facebook.com/apps](https://developers.facebook.com/apps)，如果您想从 facebooks API 获取信息：[https:// developer.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

![https://developers.facebook.com/docs/opengraph/keyconcepts/](../Images/35c1740462151c6a824c8e018b11ff0c.png)

# google-apps-script - 带有 Google Apps 脚本的 jQuery onblur

> ID：13205397
> 
> 赞同：1
> 
> 时间：2012-11-03T02:25:50.137
> 
> 标签：google-apps-script

我正在尝试让 jQuery onblur 在 Google Apps Script HtmlService 中工作。我可以获得要渲染的 HTML 和所有内容，但是 onblur 不起作用。我只是在做一个简单的工作以使其首先工作，对输入文本进行模糊处理并更改 div 背景的颜色。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
  $('#color').blur(function(){
    $('#container').css('background-color','#ffffff');
  });
});
</script>

<label>Background Color: </label><input type="text" size="30" id="color" name="color" /><br />

<div id="container" style="background-color:#9fc1f1;">
test
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:37:35.287

这对我来说很好。这是已部署的版本（我将 on change 颜色更改为蓝色以更加突出）-

[https://script.google.com/macros/s/AKfycbykzYO1_z5Zp0g5Nx1F5aLa10JVIbN8nQGSWskBQdzypLRRnklw/exec](https://script.google.com/macros/s/AKfycbykzYO1_z5Zp0g5Nx1F5aLa10JVIbN8nQGSWskBQdzypLRRnklw/exec)

这是我的完整脚本。我确实注意到，如果我没有周围的`<html>`标签，它就不起作用。您是否将其包含在脚本中？

```
<html>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
  $('#color').blur(function(){
    $('#container').css('background-color','#000fff');
  });
});
</script>
<label>Background Color: </label><input type="text" size="30" id="color" name="color" /><br/>
<div id="container" style="background-color:#9fc1f1;">
test
</div>
</html> 
```

# c++ - BUS 错误 C++ 读取文件

> ID：13205400
> 
> 赞同：0
> 
> 时间：2012-11-03T02:26:19.473
> 
> 标签：c++, input, bus

我试图做一件非常简单的事情，在 C++ 中使用 ifstream 从文件中读取数字。我的输入文件名为 POSCAR

```
supercell                              
   1.00000000000000
     7.3287291297858630    0.0000000000000000    0.0000000000000000
     0.0000000000000000    7.3287291297858630    0.0000000000000000
     0.0000000000000000    0.0000000000000000    7.3287291297858630
   Au   Cu
     1    31 
```

我阅读这些行的代码如下：

```
ifstream poscar("POSCAR");
  getline(poscar,skip); //Skipping comment first line
    cout<<skip<<endl;
  // Reading in the cubic cell coordinates
    int factor;
    poscar>>factor;
    cout<<factor<<endl;     
 int nelm[10]; // number of elements in the alloy
    float ax,ay,az,bx,by,bz,cx,cy,cz;
    poscar>>unit_cell[0][0]>>unit_cell[0][1]>>unit_cell[0][2];
    poscar>>unit_cell[1][0]>>unit_cell[1][1]>>unit_cell[1][2];
    poscar>>unit_cell[2][0]>>unit_cell[2][1]>>unit_cell[2][2]; 
```

当我输出它所读取的内容时出现此错误：

```
supercell                              
1inf7.328730
0inf7.32873
 7.3287291297858630
-142571760010922
Bus error 
```

我不明白我做错了什么。我认为 >> 负责制表符空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:36:29.230

`factor`被声明为`int`; 它应该是一个`float`或`double`。同样 for `unit_cell`，它没有在您的示例代码中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:43:44.800

我同意@JosephQuinsey。这是我作为测试编写的代码：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    string skip;
    ifstream poscar("/tmp/POSCAR.txt");
    getline(poscar, skip);
    cout << skip << endl;

    while (poscar.good())
    {
        double factor;
        poscar >> factor;
        cout << factor << endl;
    }

    poscar.close();
    return 0;
} 
```

# arrays - 使用 JSON.parse 时，对象数组的第一个元素作为未定义传递

> ID：13205401
> 
> 赞同：2
> 
> 时间：2012-11-03T02:26:26.293
> 
> 标签：arrays, object, undefined

我正在使用 HTML5 的本地存储来保存用户偏好的小型数据库。为此，我具有以下功能：

```
function save(UserDB) {
    if (window.localStorage) {  // Only do this if the browser supports it
        localStorage.setObject('UserDataBase', JSON.stringify(UserDB));
    } 
```

和

```
Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
} 
```

UserDB 是一个与此类似的对象数组：

[{"uid":"ABC","groupname":"我的组","calendarid":"sdf44d7g3ak5q8ifdrl308hk0@group.calendar.google.com","link":null,"userenable":true,"color" :"528800"},{"uid":"CdO","groupname":"CKHO","calendarid":"apkrty45sdfer44fd1mr55dfghfg8@group.calendar.google.com","link":null,"userenable":true "颜色":"AB8B00"}]

这似乎工作得很好。

然后，当用户再次加载站点时，我希望能够根据存储在前一个会话中的信息在变量中重新生成对象数组：

```
Storage.prototype.getObject = function(key) {
        var value = JSON.parse(this.getItem(key));
        return JSON.parse(value);
    } 
```

这似乎也有效。问题是当我使用最后一个函数来实际存储数组时：

```
 function ApplyUserConfiguration(Data) {

    if (window.localStorage) {  
        var UserDBx = localStorage.getObject('UserDataBase');
        console.log("User Configuraiton found");
        console.log(UserDBx);
        console.log("ActualGetObject");
        console.log(localStorage.getObject('UserDataBase'));
        console.log(UserDBx.length);
        for (var i = 0; i < Data.length; i++){
            for (var j=0; j< 5; j++){
                if(Data[i].uid == UserDBx[j].uid){
                    Data[i].userenable = UserDBx[j].userenable;
                    Data[i].Color = UserDBx[j].color;
                    delete UserDBx[j];
                    break;
                }
            }
        }
    }
    return Data;
}; 
```

原来，console.log(localStorage.getObject('UserDataBase')); 正确返回对象数组，但 console.log(UserDBx); 返回第一个元素为“未定义”的对象数组。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-19T10:00:38.283

我遇到了同样的问题，即在开始时看到未定义的元素。以下是我的代码：

```
var x;
for (i = 0; i < content.length; i++) {
    x += content[i].name;
console.log(x);
} 
```

原因是未定义的 x。我在声明它，但我没有给它任何价值。所以我只是将 var x 更改为**var x=""**并解决了问题。

**无错误代码**

```
var x="";
for (i = 0; i < content.length; i++) {
    x += content[i].name;
console.log(x);
} 
```

# html - 讨厌的 lil'元素不能与 text-align 一起使用，需要被阻止

> ID：13205402
> 
> 赞同：15
> 
> 时间：2012-11-03T02:26:35.053
> 
> 标签：html, css, w3c, semantic-markup

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T02:26:35.053

好吧，`<small>`基本上是一个内联元素，该`text-align`属性将[应用于块元素](http://www.w3.org/TR/CSS21/text.html#propdef-text-align)并传递给子内联元素（或[内部的字符串](http://jsfiddle.net/Baumr/pQk85/)）。

通过制作`small`一个块元素，我们允许对其中的文本进行样式设置。

* * *

此外，[W3 规范](http://www.w3.org/TR/html-markup/small.html)定义了`<small>`要在短语上下文中使用的元素——类似于`<strong>`、`<b>`、`<span>`、[`<a>`](https://stackoverflow.com/questions/1968122/can-we-use-a-directly-in-the-body-or-it-should-always-in-any-block-level-tag?rq=1)等元素——[在](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)这种情况下会做[同样的事情](http://jsfiddle.net/Baumr/mPqDP/)。

[W3 wiki 示例](http://www.w3.org/wiki/HTML/Elements/small)建议放置`<small>`内部`<p>`标记和样式——我想**这是更语义化的解决方案**，如果您需要查看它，这里是[代码。](http://jsfiddle.net/Baumr/mPqDP/6/)

* * *

为什么这有点令人困惑？

好吧，网络上的一些第 3 方资源没有提及它，或者至少没有明确提及。例如，[HTML5 Doctor 的示例](http://html5doctor.com/small-hr-element/)使用的`small`元素周围没有块元素容器。

希望能澄清事情！与往常一样，如果我错过了什么，请告诉我。（我想我做到了。）

# linux - 为什么我编译的 bash（3.8M）比我的系统提供的（937K）大？

> ID：13205405
> 
> 赞同：2
> 
> 时间：2012-11-03T02:28:07.177
> 
> 标签：linux, bash, makefile, gnu-coreutils

我在这里下载了 bash shell 4.2 版本：http: [//ftp.gnu.org/gnu/bash/](http://ftp.gnu.org/gnu/bash/)，然后我自己使用以下命令编译它：

```
./configure
make 
```

但是我编译的 bash 比提供的一个系统大得多：

这是我的狂欢：

```
$ ls -lh bash
-rwxrwxr-x 1 unimous unimous 3.8M Oct 31 23:57 bash 
```

这是系统的 bash：

```
$ ls -hl /bin/bash 
-rwxr-xr-x 1 root root 937K Sep 19 21:40 /bin/bash 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T02:39:25.220

如果你跑，尺寸会更接近`strip(1)`。正如 Tim Post 所指出的，bash 的生产 make 目标不会剥离，因为它们假设用户想要调试符号。但是分发目标确实剥离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T02:45:27.430

假设您已经下载了与您的系统版本直接匹配的 bash 源代码，那么有几处可能会有所不同：

*   Bash 有*很多*构建配置选项，因为它是现有的最便携的软件之一。默认`./configure`将选择大多数人希望在您用于构建它的系统上工作的选项。

*   bash 的生产安装目标*不会*剥离已安装的可执行文件。大多数下载 bash 源代码并自己构建它的人可能是这样做的，因为他们想要不同于他们的操作系统提供的行为，或者完全不同的版本。在任何一种情况下，人们都希望在建立稳定性之前留下调试符号。

*   分配添加的“特殊酱汁”

要直接复制构建，您需要获取*发行版*提供的包的源代码，并使用构建工具（或者，只需从中获取构建配置选项并将它们应用于您下载的版本），然后剥离生成的可执行文件。

请记住，发行版完全可以自由地将自己的补丁（或“酱”）应用到他们打包的东西上。您还必须检查这一点，并确保将相同的补丁应用于您的发行版所做的 bash。

简而言之，如果您只想复制构建，那么从您的发行版中获取源包会更容易，除非您想使用 GNU 提供的官方发布版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T02:31:29.870

如果不知道您和包维护者是如何编译 bash 的，就不可能确切地知道原因。

您可能静态链接了某些在系统提供的包中动态链接的库。也许他们编译时启用了较少的功能。也许他们使用了不同的编译标志，如果您包含一些调试符号，但包已被完全剥离，那也会造成一些差异。不同的优化级别也会对大小产生影响。

# android - Android ActionBar - 如何检查当前可见的操作栏按钮数量？

> ID：13205411
> 
> 赞同：1
> 
> 时间：2012-11-03T02:30:00.167
> 
> 标签：android, android-actionbar

有没有办法检查有多少按钮是可见的，有多少按钮隐藏在溢出中？因为，众所周知，根据设备的不同，ActionBar 中的按钮数量会有所不同。

为什么我需要它？我正在尝试放置一个指向特定操作按钮的箭头。为了正确放置它，我需要知道这个按钮是隐藏在溢出中，还是从右边缘第三个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:05:38.763

> 有没有办法检查有多少按钮是可见的，有多少按钮隐藏在溢出中？

我不这么认为。AFAIK`isVisible()`将返回`true`溢出区域中的项目，因为这与`MenuItem`.

> 我正在尝试放置一个指向特定操作按钮的箭头。为了正确放置它，我需要知道这个按钮是隐藏在溢出中，还是从右边缘第三个？

不，您需要知道按钮的像素坐标，这将根据许多因素而有所不同，除了它是否在溢出区域之外，例如实际屏幕密度。

# html - “返回商家”显示的内容是否发生了变化？

> ID：13205428
> 
> 赞同：1
> 
> 时间：2012-11-03T02:34:12.310
> 
> 标签：html, paypal

有谁知道最近 PayPal 处理返回值的方式是否发生了变化？

当有人从我们的网站购买商品时，他们过去常常会看到类似“Return to Business Name”的信息。但是在过去的几周里，他们看到了“返回 person@website.com”。这让他们感到困惑，因为他们希望返回到确认页面，在那里他们可以下载 PDF 文件或只看到“感谢您的购买”。奇怪的是，单击 person@website.com 链接会将他们带到正确的页面，但大多数人不会尝试，因为它看起来像一个电子邮件地址。

我们的按钮代码没有改变：

`<!-- Return URL Values. --> <input type="hidden" name="return" value="http://www.test.com//Success.php"> <input type="hidden" name="cancel_return" value="http://www.test.com/index.htm">`

该代码还包含以下内容：

`<!-- Identify your business so that you can collect the payments. --> <input type="hidden" name="business" value="person@website.com" />`

有什么建议么？

谢谢山姆

# mysql - 编写复杂的mysql查询

> ID：13205430
> 
> 赞同：-3
> 
> 时间：2012-11-03T02:34:41.770
> 
> 标签：mysql

数据库需要跟踪有关网站注册用户的信息以及他们上传、查看和评分的视频。每个上传的视频都被放入一组预定义的内容类别中。一个用户可以多次观看同一个视频；他们可能会在每次观看视频时给予不同的评分，或者他们可能根本不评分。

为了赚钱，视频共享服务依赖于广告产生的收入。当用户观看视频时，通常（但不总是）在视频开始之前向他们展示广告。任何用户都可以创建一个广告并支付固定的总价格，以使其显示指定的次数（想要的观看次数）。广告主可以通过为其广告指定一个或多个内容类别，将其广告定位于具有相关兴趣的用户；广告更有可能与这些选定类别的视频一起显示。出于会计和统计目的，数据库会跟踪显示广告的时间以及用户是否点击了广告。

一些上传了许多高质量视频的多产用户可能会被邀请加入收益分享合作伙伴关系，在这种合作伙伴关系中，他们从上传的视频中显示的广告中获得一小部分收入。

我在 MySql 中创建了以下数据库：

用户（用户名、密码、姓名、电子邮件、注册日期）

ViDEOS (video_id,title,uploaded_by,uploaded_at,category)

ADVERTISEMENTS (ad_id,advertiser,price,views_wanted)

Ad_Target_Categories (ad_id,category)

VIEWS（用户、视频、viewed_at、评级、ad_shown、ad_clicked）

PARTNERS（用户名、revenue_share）

我已经使用 SQL 语句创建了数据库：

```
create table Users
(
username varchar(400) not null,
password varchar(400) not null,
name varchar(400) not null,
email varchar(400) not null,
date_registered date,
primary key(username)
);

create table Videos
(
video_id varchar(400) not null,
title varchar(400) not null,
uploaded_by varchar(400) not null,
uploaded_at varchar(400) not null,
category varchar(400) not null,
primary key(video_id),
foreign key(uploaded_by) references Users(username)
);

create table Advertisements
(
ad_id varchar(400) not null,
advertiser varchar(400) not null,
price varchar(400) not null,
views_wanted varchar(400) not null,
primary key(ad_id),
foreign key(advertiser) references Users(username)
);

create table Ad_Target_Categories
(
ad_id varchar(400) not null,
category varchar(400) not null,
primary key(ad_id,category),
foreign key(ad_id) references Advertisements(ad_id)
);

create table Views
(
user varchar(400) not null,
video varchar(400) not null,
viewed_at varchar(400) not null,
rating varchar(400) not null,
ad_shown varchar(400) not null,
ad_clicked varchar(400) not null,
primary key(user,video,viewed_at),
foreign key(user) references Users(username),
foreign key(video) references Videos(video_id)
);

create table Partners
(
username varchar(400) not null,
revenue_share varchar(400) not null,
primary key(username),
foreign key(username) references Users(username)
); 
```

0) 列出每条广告的广告 ID、广告商名称和电子邮件，每千次展示费用（CPM，每千次观看所支付的价格）低于 7 美分。

这个查询是否正确：？

```
select *from ad_id,advertiser,email
from advertisements,users
where price <0.07; 
```

考虑到上述数据库，我需要帮助编写以下 SQL 查询

1）找出针对每个类别的所有广告的总价格。（针对多个类别的广告计入其针对的每个类别。）

2) 列出所有广告商的姓名，这些广告商的至少一个广告的展示次数超过了他们的要求。每个广告商不得多次列出。

3) 找出 2012 年 6 月收入最高的三个合作伙伴。列出他们的姓名和 2012 年 6 月的收入。合作伙伴的报酬是根据他们的收入分成和展示的每个广告来支付的。

4) 查找自上传后的前两周以来未获得任何观看次数的所有视频。对于每个此类视频，请提供上传该视频的上传用户的名称、视频标题以及上传日期和时间。

5) 按最新会员注册日期顺序列出所有用户的姓名。对于至少上传了一个视频的用户，还要给出他们观看次数最多的视频的观看次数。

6）找出平均评分最低的五个视频，尽管他们自己的上传者评分最高，评分为 5。列出他们的视频 ID、标题和平均评分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:53:46.893

回答您的问题“此查询是否正确”时，我注意到查询根本不会运行，因为中间有一个额外的 FROM。

一旦你让它运行，确定它是否正确的技术是在表中插入一组包含你能想到的边缘情况的行（比如，10 或 20）（超过数量，少于数量，完全等于金额），以便您提前知道正确的返回行集是什么。然后，运行您的查询并与预期的输出进行比较。

我还建议您多考虑一下列数据类型，而不是将它们全部设为 VARCHAR。您会看到有几种类型更适合存储金额。使用 VARCHAR，您可能会得到一些产生错误结果的比较异常。

# perl - 初学者 - 子程序混淆

> ID：13205431
> 
> 赞同：1
> 
> 时间：2012-11-03T02:34:44.720
> 
> 标签：perl, subroutine

我是一个初学者，对这个 Perl 子例程中发生的事情感到困惑。

我只使用全局变量来简化事情，但它仍然不起作用。

我只是尝试使用带有 IF 语句的文件测试运算符打印文件的读取、写入和可执行属性。

谁能为我指出问题？

路易

```
sub getfileattributes {
    if (-r $file) {
        $attributes[0] = "readable";
    } else { $attributes[0] = "not readable"; }
    if (-w _) {
        $attributes[1] = "writable";
    } else { $attributes[1] = "not writable"; }
    if (-x _) {
        $attributes[2] = "executable";
    } else { $attributes[2] = "not executable"; }
}    

my @attributes;
my $file;

foreach $file (@ARGV) {
    &getfileattributes;
    printf "The file $file is %s, %s and %s\n", @attributes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:47:06.823

使用全局变量通常很糟糕，并且指向设计错误。在这种情况下，错误似乎是您不知道如何将参数传递给子。

这是 Perl 中的模式：

```
sub I_take_arguments {
   # all my arguments are in @_ array
   my ($firstarg, $secondarg, @rest) = @_;
   say "1st argument: $firstarg";
   say "2nd argument: " .($firstarg+1). " (incremented)";
   say "The rest  is: [@rest]";
} 
```

子被调用像

```
I_take_arguments(1, 2, "three", 4); 
```

（不要*将*它们调用为`&nameOfTheSub`，这会使用您通常不想要的非常特殊的行为。）

这将打印

```
1st argument: 1
2nd argument: 3
The rest  is: [three 4] 
```

子例程可以使用语句*返回*值，也可以`return`作为执行的最后一条语句的值返回值。这些潜艇是等价的：

```
sub foo {return "return value"}
sub bar {"return value"} 
```

我会把你`getfileattributes`写成

```
sub getFileAttributes {
   my ($name) = @_;
   return
      -r $name ? "readable"   : "not readable",
      -w $name ? "writable"   : "not writable",
      -x $name ? "executable" : "not executable";
} 
```

这里发生了什么？我接受一个参数`$name`，然后返回一个值*列表*。`return`关键字可以省略。需要一个值列表并且`return`不需要括号，所以我将它们排除在外。`TEST ? TRUE-STATEMENT : FALSE-STATEMENT`操作员是从其他语言中知道的。

然后，在您的循环中，将像调用 sub

```
for my $filename (@ARGV) {
   my ($r, $w, $x) = getFileAttributes($filename);
   say "The file $filename is $r, $w and $x";
} 
```

或者

```
foreach my $file (@ARGV) {
   my @attributes = getFileAttributes($file);
   printf "The file $file is %s, %s and %s\n", @attributes;
} 
```

* * *

笔记：

*   `say`就像`print`，但在末尾添加了一个换行符。要使用它，你必须有一个 Perl > 5.10 并且你应该`use 5.010`或者任何版本或`use feature qw(say)`.

*   总是`use strict; use warnings;`，除非你肯定知道得更好。

*   通常，您可以编写程序而无需对变量进行两次赋值（单次赋值形式）。这可以使关于控制流的推理变得更加容易。这就是为什么全局变量（但不是全局常量）不好的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T02:48:49.210

您实际上并没有使用全局变量。我将它们的变量范围限定为主例程，因此当您调用子例程时，$file 和 @attributes 的范围仅限于子例程，而不是主例程。

将 my 更改为我们的 for $file 和 @attributes 以使变量全局并可用于子例程。

您可以通过使用 perl 的 -d 参数在调试器中运行它并检查项目的值来自己检查这一点。

# constructor - G ++没有用于初始化的匹配构造函数

> ID：13205434
> 
> 赞同：0
> 
> 时间：2012-11-03T02:35:46.847
> 
> 标签：constructor, g++, matching

我在 .h 中有以下类：

```
class Register {
  int content;

 public:
  Register ();
}reg;

class Simulator {
  int op1, op2, initial_pos;
  Register RA, RB, RC, RD, PC, SP, FP;
  bool zero, neg;
  int mem[1024];

 public:
  Simulator (int, int, const std::string);
  void Memdump ();
  void Exec_next ();
}sim; 
```

模拟器构造函数的定义如下：

```
Simulator::Simulator (int i, int j, int k, std::string fname) {
  FILE* instructions;

  valA = 0;
  valB = 0;
  valC = 0;
  valP = 0;
  valE = 0;
  op1 = 0;
  op2 = 0;
  zero = false;
  neg = false;
  valid1 = false;
  valid2 = false;
  PC::content = 0;
  FP::content = j;
  SP::content = j;
  initial_pos = k;
  for (int i = 0; i < 1024; i++)
    mem[i] = 0;

  //Read input file
  if (instructions = fopen (filename, 'r') == NULL) {
    cout << "Error 404: file not found\n";
    exit (404);
  }
  for (int i = 0; !feof (instructions); i++)
    fscanf (instructions, "%d\n", &(mem[i + initial_pos]) );
  fclose (instructions);
} 
```

但是当我尝试编译此代码时，我收到以下错误消息：

> ./TP1.h:45:2：错误：没有匹配的构造函数用于初始化“类模拟器”
> 
> }sim;
> 
> ^
> 
> ./TP1.h:42:3：注意：候选构造函数不可行：需要 3 个参数，但提供了 0 个参数
> 
> 模拟器 (int, int, const std::string);
> 
> ^
> 
> ./TP1.h:10:7：注意：候选构造函数（隐式复制构造函数）不可行：需要 1 个参数，但提供了 0 个参数

为什么 g++ 没有找到构造函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:04:56.117

没关系。我使用的参数比要求的少 1 个。

# rest - Dojo 的带有非 REST 存储的新 Dgrid

> ID：13205436
> 
> 赞同：1
> 
> 时间：2012-11-03T02:36:09.540
> 
> 标签：rest, dojo, query-string, dgrid

我想使用 Dojo 的 dgrid 来替换我正在处理的项目中的 YUI 数据网格。目前，我使用查询字符串数据将数据输入 YUI 小部件，而不是基于 REST 的安排。我想继续使用查询字符串来传达信息，而不是实现一个新的基于 REST 的后端，但我发现的所有 dgrid 信息似乎都指向使用 REST。是否可以使用看似已贬值的 QueryStore 之类的东西？上次我尝试在不使用基于 REST 的数据存储的情况下使用 Dojo 实现某些东西时，我的表现并不好，尤其是当我开始尝试处理延迟加载时。

# javascript - 验证后清除js表单

> ID：13205439
> 
> 赞同：0
> 
> 时间：2012-11-03T02:36:28.140
> 
> 标签：javascript

嗨，我想知道在我提交并出现验证错误后，是否有任何方法可以阻止我的表单被清除？

只是为了澄清我有多个表单，当用户提交时我使用 js 进行验证，当验证错误提醒所有表单重置时，有什么方法可以阻止它？？？“是的，它必须是 javascript”

```
<script>
                                                                    //calender dropdown menu 

var monthtext=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];

function populatedropdown(dayfield, monthfield, yearfield,init){
 var dayfield=document.getElementById(dayfield);
 var monthfield=document.getElementById(monthfield);
 var yearfield=document.getElementById(yearfield);
 var today=(init)?new Date():new Date(yearfield.value*1,monthfield.value*1)
 dayfield.options.length=0;
 for (var i=0; i<new Date(today.getFullYear(),today.getMonth()+1,-1).getDate(); i++) dayfield.options[i]=new Option(i+1,i+1)
 dayfield.selectedIndex=(init)?today.getDate()-1:0; //select today's day
 if (init){
  for (var m=0; m<12; m++) monthfield.options[m]=new Option(monthtext[m],m);
 }
 monthfield.selectedIndex=(init)?today.getMonth():0; //select today's day
 if (init){
  var thisyear=today.getFullYear()
  for (var y=0; y<20; y++)  yearfield.options[y]=new Option(thisyear, thisyear++)
 }
}
                                                                // function validate
 function validate_form ()
{
    valid = true;
                                                                // validate name
       if ( document.input.name.value == "" )
        {
                alert ( "Please enter your name" );
                valid = false;
        }
                                                                // validate address
                if ( document.input.address.value == "" )
        {
                alert ( "Please enter your address address" );
                valid = false;
        }                                                       
                                                                // validate suburb town
                if ( document.input.town.value == "" )
        {
                alert ( "Please enter your Suburb or town" );
                valid = false;
        }

                                                            // validate postcode        

        var y = document.getElementById('postcode').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Postcode must be in numbers.");
          document.getElementById('postcode').focus();
          return false;
       }

       if (y.length>4 || y.length<4)
       {
            alert("Postcode should be 4 digit");
            document.getElementById('postcode').focus();
            return false;
       }  

                                                                // validate home phone
 var y = document.getElementById('hphone').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Home Phone number must be in numbers.");
          document.getElementById('hphone').focus();
          return false;
       }

       if (y.length>10 || y.length<10)
       {
            alert("Home Phone number should be 10 digit");
            document.getElementById('hphone').focus();
            return false;
       }
                                                                // validate work phone
        var y = document.getElementById('wphone').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("work Phone number must be in numbers.");
          document.getElementById('wphone').focus();
          return false;
       }

       if (y.length>10 || y.length<10)
       {
            alert("Work Phone number should be 10 digit");
            document.getElementById('wphone').focus();
            return false;
       }
                                                                // validate fax
        var y = document.getElementById('fax').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Fax number must be in numbers.");
          document.getElementById('fax').focus();
          return false;
       }

       if (y.length>10 || y.length<10)
       {
            alert("Fax Phone number should be 10 digit");
            document.getElementById('fax').focus();
            return false;
       }
                                                                // validate email   
        {
        var x=document.forms["input"]["email"].value;
        var atpos=x.indexOf("@");
         var dotpos=x.lastIndexOf(".");
         if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
         {
         alert("Not a valid e-mail address");
        return false;
        }
        }    
        {

                                                                // validate radio buttons
 var o = document.getElementById('1');
 var t = document.getElementById('2');

if ( (o.checked == false ) && (t.checked == true ) )
 {
                                                                // validate alternative address
                        if ( document.input.street.value == "" )
        {
                alert ( "Please enter alternative address address" );
                valid = false;
        }                                                       
                                                                // validate suburb town
                if ( document.input.suburb.value == "" )
        {
                alert ( "Please enter alternative Suburb or town" );
                valid = false;
        }
                                                                // validate postcode    

       var y = document.getElementById('postcode2').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Postcode must be in numbers.");
          document.getElementById('postcode2').focus();
          return false;
       }

       if (y.length>4 || y.length<4)
       {
            alert("Alternative Postcode should be 4 digit");
            document.getElementById('postcode2').focus();
            return false;
       }                                                                                            
                                                                    // validate message box
        var o = document.getElementById('card');
        if ( (o.checked == true ))
        {
        if ( document.input.message.value == "" )
        {
                alert ( "Please enter message" );
                valid = false;                                                  
        }
        return valid;
        }
     }
        }                                           

}
</script>
    <input type="submit" value="Submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:03:34.550

ID 值不应以数字开头。

[这](http://jsfiddle.net/cjc343/AdzbW/2/)是一个捕获和影响表单提交结果的简短示例。

最常见的错误之一是忘记函数`return`的值`onsubmit`。

没有一个完整的例子，最好是一个小提琴，很难准确地知道哪里出了问题。

# twitter-bootstrap - Twitter Bootstrap 响应式布局：侧边栏的固定大小？

> ID：13205443
> 
> 赞同：2
> 
> 时间：2012-11-03T02:37:02.380
> 
> 标签：twitter-bootstrap, responsive-design

我有一个带有左侧边栏的响应式 Twitter 引导布局。当我更改屏幕分辨率时，侧边栏和内容区域会更改它们的大小。

是否可以在内容区域（.span9 类）改变大小时使侧边栏（.span3 类）保持固定宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:20:01.960

创建一个仅在该特定区域覆盖 .span3 的新规则，然后添加到样式表的末尾。所以——像这样：

```
.sidebar .span3 {

宽度：200px！重要；

}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T09:18:33.153

而不是使用引导网格作为侧边栏使用弹性布局并在弹性 div 内使用引导网格。

以下是 HTML 结构和 CSS 规则。

```
.flex-layout {
    display: flex;
    min-height: calc(100vh - 60px);
}

.flex-col1 {
    width: 270px;
    display: inline-block;
}

.flex-col2 {
    flex: 2;
}

.col {
    display: inline-block;
    vertical-align: top;
}

<div class="flex-layout">
    <div class="col flex-col1">
        //here will be nav
    </div>
    <div class="col flex-col2">
        //here will be bootstrap grid
    </div>
</div> 
```

# vim - 从 .vimrc 获取具有 gui_running 的文件中的函数

> ID：13205444
> 
> 赞同：1
> 
> 时间：2012-11-03T02:37:15.817
> 
> 标签：vim

当前运行：

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Sep  1 2012 18:08:47)
MacOS X (unix) version
Included patches: 1-646
Compiled by Bjorn Winckler <bjorn.winckler@gmail.com> 
```

我的 .vimrc 中有这些行

```
if has("gui_macvim")
  source ~/.vim/vimrc/mygfuncs.vim
endif 
```

在 mygfuncs 文件中有一些设置`guitablabel`和`guitabtooltip`基于两个自定义函数的函数。正在获取文件（因为定义了函数），但是使用这些函数设置这些变量的行不起作用：

```
set guitabtooltip=%{GuiTabToolTip()}
set guitablabel=%{GuiTabLabel()} 
```

此时，变量设置正确，因为如果我

```
:set guitabtooltip 
```

Vim 响应

```
guitabtooltip=%{GuiTabToolTip()} 
```

但它实际上并没有被应用。

**但**如果 I then ，*则*`:so ~/.vimrc`应用选项卡标签和工具提示。

 *这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:06:29.863

我相信它会被正确执行的唯一时间是当你有代码块时：

```
if has("gui_macvim")
   source ~/.vim/vimrc/mygfuncs.vim
endif 
```

... 在一个自包含的 ~/.gvimrc 文件中。*

# c++ - 如何在类函数中创建线程？

> ID：13205446
> 
> 赞同：6
> 
> 时间：2012-11-03T02:37:28.747
> 
> 标签：c++, multithreading, pthreads

我对 C++ 很陌生。

我有一个类，我想在一个类的函数中创建一个线程。并且该线程（函数）也将调用和访问类函数和变量。一开始我尝试使用 Pthread，但只在一个类之外工作，如果我想访问类函数/变量，我得到一个超出范围的错误。我看了一下 Boost/thread 但它是不可取的，因为我不想将任何其他库添加到我的文件中（出于其他原因）。

我做了一些研究，找不到任何有用的答案。请举一些例子来指导我。太感谢了！

尝试使用 pthread（但我不知道如何处理我上面所说的情况）：

```
#include <pthread.h>

void* print(void* data)
{
    std::cout << *((std::string*)data) << "\n";
    return NULL; // We could return data here if we wanted to
}

int main()
{
    std::string message = "Hello, pthreads!";
    pthread_t threadHandle;
    pthread_create(&threadHandle, NULL, &print, &message);
    // Wait for the thread to finish, then exit
    pthread_join(threadHandle, NULL);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T02:46:40.353

您可以将静态成员函数传递给 pthread，并将对象的实例作为其参数。成语是这样的：

```
class Parallel
{
private:
    pthread_t thread;

    static void * staticEntryPoint(void * c);
    void entryPoint();

public:
    void start();
};

void Parallel::start()
{
    pthread_create(&thread, NULL, Parallel::staticEntryPoint, this);
}

void * Parallel::staticEntryPoint(void * c)
{
    ((Parallel *) c)->entryPoint();
    return NULL;
}

void Parallel::entryPoint()
{
    // thread body
} 
```

这是一个 pthread 示例。您可能可以毫不费力地将其调整为使用 std::thread 。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-13T11:42:00.970

```
#include <thread>
#include <string>
#include <iostream>

class Class
{
public:
    Class(const std::string& s) : m_data(s) { }
    ~Class() { m_thread.join(); }
    void runThread() { m_thread = std::thread(&Class::print, this); }

private:
    std::string m_data;
    std::thread m_thread;
    void print() const { std::cout << m_data << '\n'; }
};

int main()
{
    Class c("Hello, world!");
    c.runThread();
} 
```

# android - 不使用 GLSurfaceView 时替换 queueEvent

> ID：13205447
> 
> 赞同：1
> 
> 时间：2012-11-03T02:37:30.520
> 
> 标签：android, opengl-es, surfaceview, glsurfaceview

当从其他线程控制OpenGL时，如果是GLSurfaceView，我们使用queueEvent()。那么，如果在 SurfaceView 上创建了 OpenGL（使用 eglCreateWindowSurface、eglMakeCurrent 等），我应该如何实现从其他线程操作 OpenGL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:10:57.133

您可以实现自己的`queueEvent`.

1.  排个队。( `ArrayList<Runnable> mQueue`)
2.  `queueEvent()`将`Runnable`实例添加到此队列（`mQueue`）。
3.  你`SurfaceView`的渲染线程`event`从队列中弹出。
4.  调用`event.run()`

使用锁（`synchronized`或显式锁）来避免问题。

在`GLSurfaceView`GLThread 的循环中有 3 步和 4 步，`mQueue`并由`synchronized`块保护。

参见：[GLSurfaceView](https://android.googlesource.com/platform/frameworks/base/+/bf35112b2835201ab007b33c3a2cb3b9e6a6d166/opengl/java/android/opengl/GLSurfaceView.java)

PS：对不起我糟糕的英语。

# javascript - Scripting.FileSystemObject 错误读取文件

> ID：13205448
> 
> 赞同：1
> 
> 时间：2012-11-03T02:37:44.877
> 
> 标签：javascript, internet-explorer, activexobject

我尝试在 IE 8 和 9 中通过 javascript 读取本地文件。

我的脚本：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var file = fso.OpenTextFile(file_name, 1, true);
var file_content = file.ReadAll();
file.Close(); 
```

已成功读取文件。但是所有文件的一个字节是错误的。`file_content.charCodeAt(8)`还给我`1038`，不过应该`161`。还有一些与文件中相同的其他字节。

我的数据文件是：

```
0000000000: 03 0C 0A 1A 01 00 00 00 │ A1 00 1F 00 00 00 00 00
0000000010: 00 00 00 00 00 00 00 00 │ 00 00 00 00 00 00 00 00
0000000020: 4F 42 4A 45 43 54 49 44 │ 00 00 00 4E 00 00 00 00
0000000030: 04 02 00 00 00 00 00 00 │ 00 00 00 00 00 00 00 00
0000000040: 58 00 00 00 00 00 00 00 │ 00 00 00 4E 00 00 00 00
0000000050: 0A 02 00 00 00 00 00 00 │ 00 00 00 00 00 00 00 00
0000000060: 59 00 00 00 00 00 00 00 │ 00 00 00 4E 00 00 00 00
0000000070: 0A 02 00 00 00 00 00 00 │ 00 00 00 00 00 00 00 00
0000000080: 56 41 4C 55 45 00 00 00 │ 00 00 00 4E 00 00 00 00
0000000090: 06 02 00 00 00 00 00 00 │ 00 00 00 00 00 00 00 00
00000000A0: 0D 20 31 2E 30 30 31 34 │ 36 38 35 39 33 2E 30 30
00000000B0: 35 33 33 31 38 38 35 2E │ 30 30 31 30 30 2E 30 30
00000000C0: 1A                      │ 
```

PS 我通过下一个代码阅读了 Mozilla Firefox、Chrome 和 Chromium 的这个文件：

```
var reader = new FileReader();

if (jQuery.browser.mozilla) {
  slice = file.mozSlice(0, file.size);
}
else {
  slice = file.slice(0, file.size);
}

reader.onload = function(e) {
  if (e.target.readyState == FileReader.DONE) {
    file_content = e.target.result;
  }
}; 
```

并在此浏览器`file_content.charCodeAt(8)`返回给我`161`。

你能在这种情况下给我建议吗？可能是我做错了什么。

# google-drive-api - 用于查看谁在 Google Drive 中打开特定文档的 API？

> ID：13205449
> 
> 赞同：2
> 
> 时间：2012-11-03T02:37:58.453
> 
> 标签：google-drive-api

有谁知道任何 API，我可以在其中收集有关谁在 Google Drive 中打开特定文档以及打开文档的时间的信息？

# c - 使用openGL从C中的文件或指针打印值

> ID：13205451
> 
> 赞同：-2
> 
> 时间：2012-11-03T02:38:06.737
> 
> 标签：c, function, opengl, pointers

我需要在 openGL 中打印 2 个向量，但我无法使用函数发送指针`glutDisplayFunc`。

`glutDisplayFunc(graphfunct)`一旦创建了窗口，我就有了这个，但我需要发送带有向量地址的 2 个指针来设置坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:28:49.177

您不能将参数传递给您注册的函数`glutDisplayFunc`。您必须改用全局可访问的变量。

# ios - PubNub 长轮询与套接字 - 移动电池寿命

> ID：13205453
> 
> 赞同：16
> 
> 时间：2012-11-03T02:38:24.950
> 
> 标签：ios, websocket, long-polling, battery, pubnub

我最近开始在我的 iOS 应用程序中使用 PubNub，对此我感到非常满意。但是，我一直在研究其他可用的选项，例如使用 Websockets 的 Pusher 和 Realtime.co。另一方面，PubNub 使用长轮询。我已经做了自己的小速度比较，出于我的目的，我发现它们都足够快。

PubNub 提供了一些不错的功能，例如消息历史记录和频道中每个人的列表，所以除非我倾向于其他所有内容。我的问题是，我是否应该担心像 PubNub 这样的长轮询解决方案的电池寿命和大量使用？Websockets 解决方案会显着提高能源效率吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T05:14:28.487

# 具有省电功能的移动版 PubNub

作为电池性能和效率的序言，与替代或自托管 websocket 解决方案相比，PubNub 是针对移动设备的优化服务。PubNub 在移动电话上提供追赶功能，该功能将自动重新发送丢失的消息，特别是对于在蜂窝网络塔之间移动并从 3G/4G 更改为 WiFi 的设备。由于常见情况下的可靠性，Websockets 往往不被推荐用于移动设备，这就是为什么 PubNub 会自动为您的设备选择最佳传输；因此，您不必决定什么对运输中的手机最有意义。

## 使用 PubNub 的电池节省模式

PubNub 有一个非常长的保持活动连接，设置为一小时。每 300 秒（300,000 毫秒）发送一次 ping。这足以提供移动性能和电池节省之间的最佳组合。

## 手机上的省电技巧

1.  保持消息尽可能小。
2.  更少发送更少的消息。
3.  只连接一个通道而不是两个或更多。

## 自动运输检测

PubNub 会在需要时自动为您选择最佳传输方式，尤其是在*移动*设备上。2012 年 10 月在俄勒冈州波特兰的 KRTConf 上发生了一次关于 websocket 的有趣对话，我向您推荐[https://speakerdeck.com/3rdeden/realtimeconf-dot-oct-dot-2012](https://speakerdeck.com/3rdeden/realtimeconf-dot-oct-dot-2012)

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:50:55.437

我不认为这是正确的。请参阅[http://eon.businesswire.com/news/eon/20120927005429/en/Kaazing/HTML/HTML5](http://eon.businesswire.com/news/eon/20120927005429/en/Kaazing/HTML/HTML5)

我是真正对 Kaazing 进行比较 WebSocket 和常规基于 http 的消息传输的测试的人。我看到 WebSocket 的电池消耗量急剧下降。现在 Kaazing 在 WebSocket 之外还有额外的技术来减少电池消耗，但即使你不使用 Kaazing，你仍然会看到 WebSocket 的一些电池消耗效率。在没有任何特殊电池优化算法的情况下，我自己通过对基本 WS 与 http 运行实际测试来尝试这一点。

# opengl - 我将如何在 java 中使用 opengl 实现 strafe？

> ID：13205458
> 
> 赞同：3
> 
> 时间：2012-11-03T02:40:10.327
> 
> 标签：opengl, camera

这是我的 gluLookAt 设置：

```
 glu.gluLookAt(x,y,z,    // eye location
               x + Math.cos(Math.toRadians(eyeAngle)),
               y,
               z - Math.sin(Math.toRadians(eyeAngle)), // point to look at (near middle)
               0.f,1.f,0.f); // the "up" direction 
```

x,y,z 是坐标，在左右转动和前后移动时会发生变化。但是我很难实现左右扫射。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T13:37:53.797

终于想通了一切。如果你有前进和左转和右转，那么扫射其实很简单。例如，向右扫射基本上就是向右转 90 度，向前移动，然后再向左转 90 度。

我的前锋是：

```
x += distance*Math.cos(Math.toRadians(eyeAngle)); 
z += -distance*Math.sin(Math.toRadians(eyeAngle)); 
```

你不想改变 eyeAngle，因为你仍然想看同一个方向。对于向右扫射，您想要像向右转 90 度然后向前移动一样移动，同样向左移动。所以右边是我上面的前向方法，在我原来的 eyeAngle 的右边有一个 90 的角度，但是因为你想保持 eyeAngle 相同，你不改变变量，你只需添加 90 到它。

所以，正确的扫射方法是：

```
 x += distance*Math.cos(Math.toRadians(eyeAngle+90)); 
    z += -distance*Math.sin(Math.toRadians(eyeAngle+90)); 
```

Left 将减去 90。在您前进并设置整体 glulookat 之后，它实际上非常简单。感谢大家的帮助，它确实帮助我理解了它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:57:53.490

我对 GLU API 不了解，但给定 X、Y 和 Z 坐标，

```
a Left relative to it's current Y rotation is,
    position of X -= distance*Math.sin(Math.toRadians(Y-90));
    position of Z += distance*Math.cos(Math.toRadians(Y-90));

a Right relative to it's current Y rotation is,
    position of X -= distance*Math.sin(Math.toRadians(Y+90));
    position of Z += distance*Math.cos(Math.toRadians(Y+90)); 
```

尝试用 eyeAngle 替换 Y，因为旋转点是什么。

# algorithm - MD5哈希函数

> ID：13205461
> 
> 赞同：1
> 
> 时间：2012-11-03T02:40:57.890
> 
> 标签：algorithm, hash

如何使用 MD5 算法检测两个字符串之间的细微差别？我想找到几个大字符串之间的相似度百分比。至于我如何检查差异，因为：

```
MD5("The quick brown fox jumps over the lazy dog.")
= e4d909c290d0fb1ca068ffaddf22cbd0

MD5("The quick brown fox jumps over the lazy dog")
= 9e107d9d372bb6826bd81d3542a419d6 
```

你能给我一个解决方案，或者给我另一种可以在大字符串或大文档中有效使用的哈希算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:44:51.593

所有哈希可以告诉您的是字符串匹配或不匹配。这个问题之前有人问过： [两个字符串有多少相似度？（90%,100%,40%）](https://stackoverflow.com/questions/6476833/how-much-two-strings-are-similar90-100-40)提倡使用Levenshtein距离。本文概述了如何使用 Levenshtein 距离并从中得出百分比差异： [http ://www.switchplane.com/blog/improving-search-with-levenshtein-distance.php](http://www.switchplane.com/blog/improving-search-with-levenshtein-distance.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:51:03.640

如果字符串真的很长（比如整个文件，可能很大，文件），你可以把它们分成几块，散列，然后检查有多少匹配。不过，这并不完全可靠。

如果它说两个字符串中的大多数是相同的，那可能是准确的。除非您做更多的工作来保持同步，否则当两者几乎相同时，它可能表明存在很大差异。举个例子，如果你天真地这样做，在一个字符串的开头插入一个字节可能表明字符串完全不同，即使实际上只有一个字节不同。

# c# - .NET GetHostByAddress 别名仅显示 8 个条目

> ID：13205463
> 
> 赞同：2
> 
> 时间：2012-11-03T02:41:21.767
> 
> 标签：c#, .net, powershell, dns

我需要从我们的 DNS 服务器输入的单个 IP 地址中获取每条 CNAME 记录。
当我查找时：

```
[System.Net.Dns]::GetHostByAddress("81.95.243.81").Aliases 
```

它只给了我相同的 8 个别名作为回报：

```
botexshop.dk
bisamba.dk
nordsoenoceanarium.dk
www.brandingcommunity.com
botexhome.dk
botexudstyr.dk
botexjylland.dk
marineacademy.dk 
```

但我知道 IP 地址有超过 69 条 CNAME 记录（请看这里：[Toolbox | DNSstuff | Reverse DNS Lookup Results for 81.95.243.81](http://www.dnsstuff.com/tools#reverseDns/type=ipv4&&value=81.95.243.81&&)）

为什么`GetHostByAddress`唯一总是返回相同的 8 个别名？以及如何获得所有 CNAME？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:15:06.537

System.Net.Dns 在很多方面都非常缺乏。我见过一些人甚至编写成熟的 DNS 解析器来获得他们需要的东西。

我知道这并不能完全回答你的问题，但是这个功能似乎可以完成工作，但是它非常脆弱并且依赖于 nslookup 所以 YMMV：

```
function get-dnsaliases($ip)
{
    $ip_rev = $ip -split '\.'
    [array]::reverse($ip_rev)
    $ip_rev = $ip_rev -join '.'
    $ptr_regex = "^`t" + [regex]::escape("$ip_rev.in-addr.arpa, type = PTR, class = IN")

    $responses = nslookup -d $ip

    $foundanswer = $null
    $aliases = @()

    foreach ($response in $responses)
    {
        if($foundanswer)
        {
            if($response -match "^`tname = (?<alias>.+)$")
            {
                $aliases += $Matches.alias
            }
        }
        elseif($response -match $ptr_regex)
        {
            $foundanswer = $true
        }
    }
    return $aliases
} 
```

# javascript - 如何在javascript中连接多行字符串？

> ID：13205464
> 
> 赞同：4
> 
> 时间：2012-11-03T02:41:33.257
> 
> 标签：javascript, append

附加 's 的正确语法有很多结果`<li>`，但是我试图找到一个解决方案，其中`+this['name']+`值包含在`<li>`'s 中。firebug 正在显示`'SyntaxError: unterminated string literal'`，jslint 正在显示`'Unclosed string'`。我已经尝试了许多不同的逗号位置变体，但我无法让它工作。

```
 $.each(data.result, function() {
     $("ul").append("<li>Name: "+this['name']+"</li>
                     <li>Age: "+this['age']+"</li>
                     <li>Company: "+this['company']+"</li>
                     <br />");
 }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T02:45:33.380

您可以使用反斜杠字符转义行尾`\`，如下所示：

```
 $.each(data.result, function(){
 $("ul").append("<li>Name: " + this['name'] + "</li> \
     <li>Age: " + this['age'] + "</li> \
     <li>Company: "+this['company']+"</li> \
     <br />");
 }); 
```

这是因为 Javascript 会在某个时间在行尾自动插入半列。在这种情况下，你的字符串没有关闭。另一种解决方案是关闭每行上的每个字符串，并使用`+`将它们全部连接起来。

```
 $.each(data.result, function(){
 $("ul").append("<li>Name: " + this['name'] + "</li>" +
     "<li>Age: " + this['age'] + "</li>" +
     "<li>Company: "+this['company']+"</li>" +
     "<br />");
 }); 
```

（不相关，但`<br/>`不允许在`<ul>`元素内部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:52:57.587

这应该快得多

```
 li = '';
 $.each(data.result, function(){
     li += "<li>Name: " + this['name'] + "</li>" +
          "<li>Age: " + this['age'] + "</li>" +
          "<li>Company: "+this['company']+"</li>" +
          "<br />"; // could remove this and use css
 });

 $("ul").append(li); 
```

请参阅[http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:30:50.853

您实际上根本不想连接它！考虑一下包含 HTML 或类似 HTML 数据的可变数据会发生什么。使用你的方法，它会被解析，可能会破坏一些东西，甚至让你接受 XSS 攻击方法。

您已经在使用 jQuery，所以正确的方法很简单：

```
$('ul').append(
    $('<li/>').text('Name: ' + this.name), 
    $('<li/>').text('Age: ' + this.age),
    // etc.
); 
```

（注意：我相信`.append()` [允许尽可能多的参数](http://api.jquery.com/append/)。如果没有，请尝试在追加时使用元素数组。）

# multi-user - PHP/MySQL：生成唯一 ID

> ID：13205465
> 
> 赞同：-1
> 
> 时间：2012-11-03T02:41:42.923
> 
> 标签：multi-user, form-submit

如何使用 PHP 和 MySQL 在多用户环境中提交表单后生成唯一 ID。我正在使用 WAMP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:49:18.923

因为您使用的是 wamp，所以我假设您使用的是 phpmyadmin。在 phpmyadmin 中，您需要创建一个数据库和您的表。

之后您所要做的就是添加一个名为 ID 的字段，使其成为主键（因为它是唯一值）。还要确保它是一个 int 并检查列字段 A/I 是否被选中。

# objective-c - 我的 for in 循环中出现 BAD_ACCESS

> ID：13205479
> 
> 赞同：0
> 
> 时间：2012-11-03T02:45:29.073
> 
> 标签：objective-c, cocos2d-iphone

我有以下代码块

```
-(void) spawnEnemies:(ccTime)dt
{

    static float lastSpawn;
    lastSpawn += dt;

    if (lastSpawn > 0.75) {
        for (NSDictionary *enemyData in levelData.enemies) {
            if ([[enemyData valueForKey:@"spawnCount"] intValue] < [[enemyData valueForKey:@"quantity"] intValue]) {
                // reset spawn timer
                lastSpawn = 0;

                // init enemy
                id enemy = [NSClassFromString([enemyData valueForKey:@"className"]) enemyInit];
                [enemy startAnimating];
                [enemy setSpawnPosition];
                [enemy moveToSpriteInit:playerSprite];
                [self addChild:enemy];
                [enemy release];

                NSNumber *spawnCount = [enemyData valueForKey:@"spawnCount"];
                [enemyData setValue:[NSNumber numberWithInt:([spawnCount intValue] + 1)] forKey:@"spawnCount"];
            }
        }
    }
} 
```

我想知道为什么这条线：

```
[enemyData setValue:[NSNumber numberWithInt:([spawnCount intValue] + 1)] forKey:@"spawnCount"]; 
```

是否引发了错误的访问错误？我正在尝试每次迭代更新每个敌人的生成计数。我是否需要在 for 循环中重建 levelData.enemies 数组，并在 for 循环完成后将具有更新的生成计数值的新数组重新分配给 levelData.enemies？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:04:26.480

我很笨，我才意识到我没有将 for 循环对象类型从 NSDictionary 更新为 NSMutableDictionary，无法更改 NSDict 中的值，呵呵！

# java - java html 抓取 facebook 的方式

> ID：13205486
> 
> 赞同：3
> 
> 时间：2012-11-03T02:46:48.450
> 
> 标签：java, html, facebook, scrape

当您发布到 facebook 的链接时，它会显示一个小缩略图和该页面内容的描述。

我知道它`og`在 html 页面中使用元标记，但有时即使这些元标记不存在，facebook 也会设法获取缩略图和描述

此处示例：http: [//www.lepoint.fr/](http://www.lepoint.fr/)（来自`description`元标记）。

![在此处输入图像描述](../Images/975c0e965c8bde89e1dee63f6640e099.png)

我知道有很多好的 java html 解析器，但是是否有一个 API 可以处理所有不同的元标记来获取给定 html 页面的缩略图和描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T00:50:26.770

不是真正的解决方案，但您可以使用 embed.ly ( [http://embed.ly/](http://embed.ly/) )，它可以完成所有工作，并且它有一个 api，您可以使用它来按照您想要的方式格式化数据。

# ios - icloud - 不同格式的同步

> ID：13205490
> 
> 赞同：0
> 
> 时间：2012-11-03T02:47:22.070
> 
> 标签：ios, sync, icloud

我正在考虑在我的 iOS 应用程序中实现 iCloud 同步。

我是否必须做出选择是只需要同步文档还是键值？或者我可以来2吗？

我有这两个原因。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:58:06.127

不，你不必做出那个选择。您可以在同一个 App 中将键值数据和文档保存到 iCloud。

# c++ - 如何在不使用循环或 std::accumulate() 的情况下计算向量的总和？

> ID：13205493
> 
> 赞同：0
> 
> 时间：2012-11-03T02:47:49.383
> 
> 标签：c++, vector, std

我正在尝试为我的编程任务实现一个欧几里得向量。我需要重载 operator* 来为具有任意相同维度的两个向量提供点积计算。以 3D 向量为例：

向量<3> v1, v2; //两个3D向量。

双点积 = v1 * v2;

dotProduct 的值应该是 v1[0]*v2[0]+v1[1]*v2[1]+v1[2]*v2[2]

所以，我的问题是如何在不使用 numeric.h 头文件中的任何显式循环和 std::accumulate() 操作的情况下获取此值？因为那些在这个任务中是被禁止的。

PS 我可以将仿函数（自定义）与 STL 算法一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:14:25.703

如果你真的想避免一般的显式循环和算法（不仅仅是`std::accumulate`），你可以使用`std::valarray`s 代替：

```
std::valarray<double> a;
std::valarray<double> b;

// code to put data in a and b goes here

double dotProduct = (a * b).sum(); 
```

我在`double`这里使用了类型，但您（当然）可以使用对您正在处理的数据/情况有意义的任何类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T16:03:03.970

您可以使用`std::inner_product`，请参阅[http://en.cppreference.com/w/cpp/algorithm/inner_product](http://en.cppreference.com/w/cpp/algorithm/inner_product)

```
double dotProduct = std::inner_product(v1.begin(), v1.end(), v2.begin()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T03:06:58.870

如果你不能使用显式循环，也许你的老师要求你使用递归。

```
template<int N>
int VectorSum(const Vector<N>& v1, const Vector<N>& v2, int m) {
  if(m) return v1[m]*v2[m] + VectorSum(v1, v2, m-1);
  return v1[0]*v2[0];
}

template<int N>
int operator+(const Vector<N>& v1, const Vector<N>& v2) {
  return VectorSum(v1, v2, N-1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T12:08:20.293

我碰巧读了一篇关于它的文章，所以我复制给你。可能是在书中介绍的：C++ 模板：完整指南。

```
#include <iostream>

template<int DIM,typename T>
struct DotProduct {
    static T execute(const T v1[],const T v2[]);
};
template<int DIM,typename T>
T DotProduct<DIM,T>::execute(const T v1[],const T v2[]) {
    return v1[0]*v2[0] + DotProduct<DIM-1,T>::execute(v1+1,v2+1);
};

template<typename T>
struct DotProduct<1,T> {
    static T execute(const T v1[],const T v2[]);
};

template<typename T>
T DotProduct<1,T>::execute(const T v1[],const T v2[]) {
    return v1[0]*v2[0];
};

int main()
{
    int v1[] = {1,2,3}; 
    int v2[] = {4,5,6};
    int r2 = DotProduct<3,int>::execute(v1,v2);
    std::cout << r2 << std::endl;
    return 0;
} 
```

# php - 使用 PHP 动态创建变量

> ID：13205497
> 
> 赞同：0
> 
> 时间：2012-11-03T02:48:38.120
> 
> 标签：php, api, rest, loops, for-loop

我正在开发一个 REST 风格的 API，我希望能够将 URL 分解为单个变量。

假设我有以下网址：www.example.com/user/post/1

我想做以下变量：

```
$uri_1 = user
$uri_2 = post
$uri_3 = 1 
```

我试图这样做，但它陷入了一个循环

```
 $path = explode('/', $this->path($uri));
 for($i=0;$i < count($path);$i++){
       $uri_.$i = $path[i];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:51:40.570

```
$url = explode('/', strtolower(trim($_SERVER['REQUEST_URI'], '/')));

$uri_1 = isset($url[0])?$url[0]:'';
$uri_2 = isset($url[1])?$url[1]:'';
$uri_3 = isset($url[2])?$url[2]:''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:02:30.503

以下是使用 PHP 的变量变量功能对任意数量的变量执行此操作的方法：

```
 $path = explode('/', $this->path($uri));
 for($i=0;$i < count($path);$i++){
       ${"uri_".$i} = $path[i];
 } 
```

# android - 使用 TalkBack 时，当 TextView 的内容发生更改时，提醒用户的首选方式是什么？

> ID：13205498
> 
> 赞同：10
> 
> 时间：2012-11-03T02:48:40.567
> 
> 标签：android, accessibility, talkback

我有一个解锁屏幕，提示用户输入一个四位数的密码。如果用户错误地输入了他们的密码，`TextView`则会显示以前不可见的内容和错误消息。此时，TalkBack 可以大声读出错误消息的内容。

通过一些实验，我意识到我可以设置`android:focusableInTouchMode="true"`视图并以编程方式调用[`View#requestFocus()`](http://developer.android.com/reference/android/view/View.html#requestFocus%28%29). 这第一次有效，但由于视图已经具有焦点，因此在后续错误中失败。此外，一般来说，覆盖当前视图焦点似乎是个坏主意。

然后我尝试[`View#announceForAccessibility(java.lang.CharSequence)`](http://developer.android.com/reference/android/view/View.html#announceForAccessibility%28java.lang.CharSequence%29)在显示错误消息时调用。显然，如果视图当前不可见，此方法将*静默失败。*没问题，否则它工作得很好。但是，它仅在 API 级别 16+（Jelly Bean）中可用，这确实限制了它的实用性。由于 TalkBack 支持 API 级别 7+，因此必须有更好的解决方案。

我已经观看了 2011 年和 2012 年关于可访问性的 Google I/O 会议，但似乎都没有涵盖这个基本用例。最好的方法是什么？

**编辑 1：** TLDR；有没有办法*强制*`View#announceForAccessibility(java.lang.CharSequence)`TalkBack 在引入Jelly Bean之前大声朗读一些文本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T06:20:35.477

您应该能够以与您相同的方式使用`View.sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_FOCUSED)`您的`TextView`来触发 TalkBack `View.requestFocus()`。因为它只触发事件，并没有真正关注视图，所以它不应该在第一次之后崩溃。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-14T18:48:40.253

我使用的是公认的答案，效果很好。但是，我不喜欢在文本视图上设置可访问性焦点时的误导性声音 - 与通过双击（一种抽屉打开声音）将输入焦点赋予 EditField 时相同的声音，因为输入焦点实际上并没有从带有 inputfocus 的 EditText 移动（例如，带有光标）。

所以我尝试了：

```
m_textView.sendAccessibilityEvent(AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED);` 
```

有趣的是，它有效 - 读取标签，无需移动任何焦点或发出任何其他声音。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-29T21:09:26.327

好的，如果您使用 L 或更高版本，更好的答案是使用： http: [//developer.android.com/reference/android/view/View.html#setAccessibilityLiveRegion(int)](http://developer.android.com/reference/android/view/View.html#setAccessibilityLiveRegion(int))

这将为您完成所有工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-07T12:21:43.457

另一种方法是，在激活 TalkBack 时，另外显示一条带有错误文本的 Toast 消息。这也被大声读出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T10:06:17.700

推荐的方法是在 textview 更改后使用以下代码。

```
textview.sendAccessibilityEvent(AccessibilityEvent.TYPE_ANNOUNCEMENT); 
```

它将阅读内容而不专注于它。

# java - java中是否可以进行通用sql查询？

> ID：13205500
> 
> 赞同：5
> 
> 时间：2012-11-03T02:49:13.550
> 
> 标签：java, sql, jdbc, resultset

如果我有创建 SQL 查询的方法，如下所示：

```
public List selectTuple() {
   boolean status = true;
   String query = "SELECT ";
   query += getFields() == null ? " * " : " " + getFields() + " ";
   query += " FROM " + tables;
   if ( getSearchClause() != null ) {
       query += " " + getSearchClause();
   }
   query += ";";
   Debug("SQL...........caleed selectTuple method, query is : "+ query);
   setQuery(query);
   if ( getPrepared() ) {//If this is a Prepared query,
      status = setPreparedStatement();
   } else {
      status = setNonPreparedStatement();
   }
   if ( ! status ) {
      Log("[CRITICAL] (.........)..........");
   }
   status = doExecuteQuery();
   if ( ! status ) {
      Log("[CRITICAL] (.........)..........");
   }
   return( getResults() );
}//method selectTuple 
```

但是，由于这将用于不同的表，因此字段将具有不同的数据类型（int、string、date 等）。那么我怎样才能遍历这样的 ResultSet 呢？

另外，如何创建这样的插入查询？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:59:46.727

是的，我认为可以做到...您可以在 ResultSet 中使用 getMetaData() 来获取列的数量和类型，然后遍历 ResultSet。

[获取元数据（）](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getMetaData%28%29)：

[ResultSetMetaData 类](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)

但是，我不知道如何编写这样一个通用的插入查询......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:00:11.730

您将需要使用[getObject](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getObject%28int,%20java.util.Map%29)并将 JDBC 映射传递给您自己的类型的 Java 对象映射（如果有）。

所以，如果你的表有列`i`numeric 和列`s`varchar 下一个代码

```
ResultSet rs = st.executeQuery("select i, s from test");
rs.next();
System.out.println(rs.getObject(1).getClass());
System.out.println(rs.getObject(2).getClass()); 
```

将导致

```
class java.lang.Integer
class java.lang.String 
```

您唯一要做的就是检查返回的 Object 的类，使用`instanceof`, 来进行实际的转换。

您可以参考[这篇文章](http://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/guide/jdbc/getstart/mapping.doc.html#1008372)了解更多详情。

对于插入部分，您可以使用[setObject](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setObject%28int,%20java.lang.Object%29)方法并依赖 JDBC 转换，这可能不是一个好主意，但应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-20T23:26:40.127

正如@jahroy 评论的那样，避免将 JDBC 用于此类通用事物。我也遇到了同样的问题，我想出了一个简单而优雅的方法来使用[JPA](http://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html)

这是我创建的用于处理任何`SELECT`查询的通用方法，您可以了解其`JPA`工作原理。在这种情况下，我只是想确保只有`SELECT`查询，但你可以让它更通用，接受`INSERT`, `DELETE`, `UPDATE`...

```
public List executeSelectQuery(String selectQuery, Class entityClass, String classPersistentUnit)
{
    selectQuery = selectQuery.toUpperCase();
    if(!selectQuery.startsWith("SELECT"))
    {
        throw new IllegalArgumentException("This method only accepts SELECT queries. You tried: " + selectQuery);
    }

    EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(classPersistentUnit);
    EntityManager entityManager = entityManagerFactory.createEntityManager();

    Query query = entityManager.createNativeQuery(selectQuery, entityClass);

    return query.getResultList();
} 
```

好消息是 Netbeans 和 Eclipse（可能还有更多的 IDE，但我只使用这两个）动态地提出了一个“自动创建”类实体！您根本不需要在这些实体类上编写任何代码。简而言之，实体类代表数据库中的一个表。因此，数据库中的每个表都将由一个实体类表示。

[你可以在这里](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Native)找到一个简单的小教程

# javascript - 浏览器 cookie 不起作用

> ID：13205503
> 
> 赞同：0
> 
> 时间：2012-11-03T02:49:33.063
> 
> 标签：javascript, httpcookie

我正在尝试将数据从一个 html 页面发送到另一个页面。我正在使用 cookie 来保存将由另一个网页检索的信息。但是，当下一页要获取cookie的值时，它是空的。我认为当我从一页转到另一页时，cookie 正在丢失。

谢谢你！！！！（有没有更好的选择？）

这就是我尝试在 JavaScript 中完成此任务的方式：

用于在 cookie 中保存数据（仅限 1 天）

```
 //HTML page 1
 setCookie("myCookie", myData, 1); 
```

在哪里

```
function setCookie(c_name, value, exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
} 
```

用于获取 cookie

```
//HTML page 2
var cookieValue = getCookie("myCookie"); 
```

在哪里

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:18:59.430

虽然编写自己的 cookie 库是一种很好的做法，但它可能有点令人沮丧。我建议使用（和/或审查）现有库，例如 cookie.js - [http://code.google.com/p/cookie-js/source/browse/trunk/cookie.js](http://code.google.com/p/cookie-js/source/browse/trunk/cookie.js)

作为 cookie 的替代方案，您可能会发现 HTML5 功能 localStorage 和 sessionStorage 很有帮助，具体取决于您的用例。有关详细信息，请参阅[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)和/或[http://www.html5rocks.com/en/features/offline](http://www.html5rocks.com/en/features/offline)

# github - 在推送我的项目之前设置 Git

> ID：13205505
> 
> 赞同：1
> 
> 时间：2012-11-03T02:49:57.820
> 
> 标签：github, symfony-1.4, web-deployment, production

我正在使用 Symfony 1.4 MVC 框架在 LAMP 堆栈上制作一个小型 Web 项目。我对记录所有内容感兴趣，从数据库到代码，我想将我所有的代码推送到 GitHub 上。我知道如何在 GitHub 上设置存储库并实时推送更改等。

我无法理解的是：

我有开发服务器，在对其进行测试后，我将其推送到我的 GitHub 存储库中，之后我自然希望将其推送到我的生产服务器上。通常，这是一个单人项目，我可以使用 rsync 轻松地将项目实时推送到我的生产服务器。这就是我通常在我的 YAML 文件中配置它的方式，然后 symfony 会自动将更改推送到我的生产服务器。

自然，我希望 GitHub 作为保存我项目代码的中介，并且我应该能够从那里将其部署到我的生产服务器。

但是我应该如何实现这一点，我不知道。

任何人都可以建议这个难题的缺失部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:42:45.657

你可以使用[Capifony](http://capifony.org/)来部署你的 symfony 项目。

# jquery - 带有中间暂停的Jquery滚动文本

> ID：13205507
> 
> 赞同：0
> 
> 时间：2012-11-03T02:50:24.773
> 
> 标签：jquery

我有一个`<div>`列表（ul，li）。

我想要一个 Jquery 插件来更快地从左侧滚动文本并在`<div>`. 然后文本向右滚动并消失。

你有插件名称吗？

谢谢。

**编辑：** 在 mrtsherman 的帮助下，我成功创建了脚本。有解决方案：

```
$(document).ready(function() {
    $('#affichage_titreSemaine > span').css('opacity', '0');

    function TitresSemaine() {
        // get the item that currently has the 'show' class
        var current = $('#affichage_titreSemaine .show');

        var next = current.next().length ? current.next() : $('#affichage_titreSemaine span :first');
        // fade out the current item and remove the 'show' class
        current.animate( {opacity: "1.0", marginLeft: 465 - (current.width())/2}, 500, 'swing');
        current.delay(2000).animate( {opacity: "0.0", marginLeft: 930 - current.width()}, 500, 'swing', function(){
            $(this).animate({marginLeft : 0}, 10, 'swing');
            $(this).hide();
            next.addClass("show");
            next.show();
        }).removeClass("show");

        // repeat by calling the textloop method again after 3 seconds
        setTimeout(TitresSemaine,4000);
    }

    TitresSemaine();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:38:26.267

我想你正在寻找这样的东西。我不知道有什么插件可以做到这一点，但使用动画回调很容易编写自己的代码。

[http://jsfiddle.net/ABAEE/](http://jsfiddle.net/ABaEE/)

```
$('span').animate( {marginLeft:0}, 1500, 'swing', function() {
    $(this).delay(2000).animate( {marginLeft:250}, 1500, 'swing');
}); 
```

# c - 默认情况下初始化 C 变量

> ID：13205508
> 
> 赞同：-2
> 
> 时间：2012-11-03T02:50:45.070
> 
> 标签：c

在 C 中，为什么下面的结果 x[1] 为 2？

```
int a = 2, x;
...
printf("x[1] = ", &x[1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:58:00.863

它没有。它会导致*任何*可能发生的未定义行为。您不能以定义的方式访问数组末尾之外的元素。

最有可能发生的是它`a`只是`x`在堆栈上的“上方”，这导致与`x[1]`具有相同的地址`a`，但这绝不是保证。

当然，这是假设您`printf`的错字。就目前而言，它甚至无法编译。我*假设*这是一个错字，因为问题标题只是询问价值`x[1]`而不是输出。

为了让它工作，你必须使用类似的东西：

```
printf ("x[1] = %d\n", (&x)[1]); 
```

它也可以在我的系统上打印`2`，但在其他地方可能会做一些完全不同的事情。

# jquery - ajaxSend 事件不会针对数据类型为 jsonp 的 ajax 请求触发。如何让它着火？

> ID：13205511
> 
> 赞同：2
> 
> 时间：2012-11-03T02:51:09.923
> 
> 标签：jquery, jsonp

我正在尝试调试页面上的所有 jquery 请求，但由于某种原因，数据类型为 jsonp 的请求不会导致我的全局事件触发。我无法控制使用 jsonp 数据类型的 ajax 请求，因此我需要提出一个不需要更改实际 ajax 请求代码的解决方案。但是，我可以对 $.ajax 函数/jquery 库等进行更改。我有一个精简的示例，显示了事件是如何不被触发的。

```
$('body').bind("ajaxSend",function() {
    alert('global ajaxSend');
});
$.ajax({
    type: 'GET',
    url: 'http://www.example.com',
    dataType: "jsonp",
    success : function(result) {alert('success');},
    error : function(XMLHttpRequest,textStatus,errorThrown) {alert('error');}
}); 
```

在该示例中，未触发 ajaxSend 事件。有谁知道会使其着火的解决方法或补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-18T18:52:24.457

我遇到了同样的问题，我解决了它，将绑定更改为：

```
$( document ).ajaxSend(function() {
    alert('global ajaxSend');
}); 
```

正如这里所解释的：

[api.jquery.com/ajaxsend/](http://api.jquery.com/ajaxsend/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:58:06.183

jsonp 请求通过在 DOM 中插入脚本标签来工作，因此它不会触发错误处理程序，也可能不会触发您的全局 ajaxSend 处理程序。

没试过，但你总是可以尝试在成功回调中触发事件：

```
$.ajax({
    type: 'GET',
    url: 'http://www.example.com',
    dataType: "jsonp"
}).done(function() {
    $('body').trigger('ajaxSend');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-28T17:05:59.027

将 RegisterGlobalEvents 设置为 true 可以触发 ajaxsend，以防您在控制台中看不到任何其他错误（在就绪函数下方添加此错误）

$(document).ready(function() { var objGlobalEvent = new RegisterGlobalEvents(true, ""); ... .. //其他表单提交代码 });

# java - GWT CellTable getRowElement 抛出 IndexOutOfBoundsException

> ID：13205513
> 
> 赞同：2
> 
> 时间：2012-11-03T02:51:43.180
> 
> 标签：java, exception, gwt, celltable

我在 GWT 中使用 CellTable 并尝试在发生某些事件时向一行添加样式。添加样式的代码如下：

```
Range range = playlistTable.getVisibleRange();
int start = range.getStart();

for (int i = start; i < start + playlistTable.getPageSize(); i++) {

     if (playlistData.get(i) == currentSong) {
            playlistTable.getRowElement(i).addClassName("highlightRow");

     } else {
            playlistTable.getRowElement(i).removeClassName("highlightRow");
     }
 } 
```

当应用程序加载并显示单元格表的第一页时，一切正常。但是，当我滚动到下一页并调用上述代码时，GWT 会引发 IndexOutOfBoundsException。当我调用 getRowElement 时，它不喜欢我的索引，只有当索引“不在当前页面上”时才会发生这种情况。就好像 getRowElement 总是认为当前页面是第一页。如果我滚动回第一页，一切正常。有没有人遇到过这个？我错过了什么还是这是 GWT 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:19:58.187

我怀疑问题出`start`在`0`有效的页面上。如果你这样做会发生什么`playlistTable.getRowElement(i - start)`？你可能不得不在某个地方扔一个`+ 1`或一个`- 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:39:52.063

不是您问题的直接答案，但是您的代码会简单得多[`RowStyles`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/RowStyles.html)

```
// do it only once!
playlistTable.setRowStyles(new RowStyles<Song>() {
  @Override
  public String getStyleNames(Song row, int rowIndex) {
    return (row == currentSong) ? "highlightRow": "";
  }
}); 
```

您可能还想使用`equals()`和/或某些`ProvidesKey`对象将`row`与进行比较`currentSong`。

# android - 使用新的 Facebook Android SDK 访问用户电子邮件

> ID：13205517
> 
> 赞同：19
> 
> 时间：2012-11-03T02:52:04.277
> 
> 标签：android, facebook-android-sdk

嗨，我正在玩新的 Facebook Android SDK。我不知道的一件事是我如何要求电子邮件地址。我尝试了以下操作，但它返回了除电子邮件地址之外的所有字段的值。我想我可能必须单独请求电子邮件地址的许可，但不确定如果我使用 LoginFragment 该怎么做。

```
Request request = Request.newMeRequest(session, new GraphUserCallback() {

    @Override
    public void onCompleted(GraphUser user, Response response) {
        profilePictureView.setUserId(user.getId());
        userNameView.setText(user.getName());
    }
});

String NAME = "name";
String ID = "id";
String PICTURE = "picture";
String EMAIL = "email";
String FIELDS = "fields";
String REQUEST_FIELDS = TextUtils.join(",", new String[] {
    ID, NAME, PICTURE, EMAIL
});

Bundle parameters = new Bundle();
parameters.putString(FIELDS, REQUEST_FIELDS);
request.setParameters(parameters);
Request.executeBatchAsync(request); 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-12T09:55:35.563

请执行下列操作：

如上所述设置权限后，通过以下方式访问电子邮件：user.asMap().get("email"));

请参阅下面的示例

```
@Override
protected void onSessionStateChange(SessionState state, Exception exception) {

    // user has either logged in or not ...
    if (state.isOpened()) {
        // make request to the /me API
        Request request = Request.newMeRequest(this.getSession(),
                new Request.GraphUserCallback() {
                    // callback after Graph API response with user object

                    @Override
                    public void onCompleted(GraphUser user,
                            Response response) {
                        // TODO Auto-generated method stub
                        if (user != null) {
                            TextView etName = (TextView) findViewById(R.id.etName);

                            etName.setText(user.getName() + ","
                                    + user.getUsername() + ","
                                    + user.getId() + "," + user.getLink()
                                    + "," + user.getFirstName()+ user.asMap().get("email"));

                        }
                    }
                });
        Request.executeBatchAsync(request);
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-03T04:05:47.877

当您打开会话时，请尝试在权限列表中包含“电子邮件”。

如果您使用的是 LoginButton，请执行以下操作：

```
loginButton.setReadPermissions(Arrays.asList("email")); 
```

如果您自己打开会话，请执行以下操作：

```
session.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("email"))); 
```

您可以使用以下方法尝试请求/权限：[https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

使用这些权限成功登录后，请再次尝试请求，包括电子邮件字段。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-04T14:03:48.230

如果您正在使用`com.facebook.widget.LoginButton`，您应该设置此片段的权限，之后 facebook 返回电子邮件。这是工作代码：

```
LoginButton authButton = findViewById(R.id.sign_in_facebook);
    List<String> permissions = new ArrayList<>();
    permissions.add("public_profile");
    permissions.add("email");
    permissions.add("user_birthday");
    authButton.setReadPermissions(permissions);` 
```

**编辑** Facebook 更新了它的 sdk，这促进了它的工作。从 4.x 版本（[changelog](https://developers.facebook.com/docs/android/change-log-4.x)）开始，您可以在需要它的不同地方初始化 sdk，而不是以非常简单的方式使用它。这是示例：

```
FacebookSdk.sdkInitialize(getActivity().getApplicationContext());
CallbackManager callbackManager = CallbackManager.Factory.create();
LoginManager.getInstance().registerCallback(callbackManager,
            new FacebookCallback<LoginResult>() {
                @Override
                public void onSuccess(LoginResult loginResult) {
                    GraphRequest request = GraphRequest.newMeRequest(
                            loginResult.getAccessToken(),
                            new GraphRequest.GraphJSONObjectCallback() {
                                @Override
                                public void onCompleted(JSONObject object, GraphResponse response) {
                                    String email = object.optString("email");
                                    String uid = object.optString("id");
                                    loginPresenter.loginBySocial(email, uid);
                                }
                            });
                    Bundle parameters = new Bundle();
                    parameters.putString("fields", "email");
                    request.setParameters(parameters);
                    request.executeAsync();
                }

                @Override
                public void onCancel() {
                  //your code
                }

                @Override
                public void onError(FacebookException exception) {
                  //your code
                }
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T13:55:19.360

我找到了一个解决方案：它有效

```
LoginFragment loginFragment = new LoginFragment() {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
                View v = super.onCreateView(inflater, container, savedInstanceState);
                setReadPermissions(Arrays.asList("email"));
                return v;
            }
        }; 
```

# php - 不允许人们发布私人 youtube 视频链接

> ID：13205522
> 
> 赞同：2
> 
> 时间：2012-11-03T02:53:41.527
> 
> 标签：php, video, youtube, private

我有一个网站，你可以在上面发布一个 YouTube 视频链接，当你这样做时，它会从中获取 ID（11 个字符）并将其放入数据库中。然后，您可以在页面上查看视频，它会使用[http://gdata.youtube.com/feeds/api/videos/](http://gdata.youtube.com/feeds/api/videos/) *ID*获取 YouTube 标题和作者，并将其放入带有嵌入代码的页面上。我想知道如何不允许他们发布私人视频链接，就像我可以做一些检查一样。这是我到目前为止发布链接的内容：

```
if(isset($_POST['video'])){
  $error = array();
  if(filter_var($_POST['videourl'], FILTER_VALIDATE_URL) !== false){
    if(strpos($_POST['videourl'],'youtube.com')){
        preg_match('/[\\?\\&]v=([^\\?\\&]+)/',$_POST['videourl'],$video_embed);
        $video_embed = $video_embed[1];
    }elseif(strpos($_POST['videourl'],'youtu.be')){
        $video_embed = substr( parse_url($_POST['videourl'], PHP_URL_PATH), 1 );
    }else{
        $error[] = 'Invalid link';
    }
  }else{
    $error[] = 'Invalid link';
  }
  $video_exist = mysql_num_rows(mysql_query("SELECT interest_vid FROM interest_videos WHERE interest_vid = '$video_embed'"));
  $interest_exist = mysql_query("SELECT name FROM interests WHERE name = '".$_POST['interest_for_video']."'");
  if(!empty($_POST['interest_for_video']) && mysql_num_rows($interest_exist) != 0){
    $interest = strtolower(mysql_real_escape_string(strip_tags($_POST['interest_for_video'])));
    $interest_id = mysql_result(mysql_query("SELECT id FROM interests WHERE name = '$interest'"), 0);
  }else{
    $error[] = 'Must specify an interest. ';
  }
      if(empty($error)){
        if($video_exist == 0){
            $result2 = mysql_query(" INSERT INTO interest_videos (user_id,interest_id,interest_vid) VALUES ('".$_SESSION['id']."','$interest_id','$video_embed')") or die(mysql_error());
            if(!$result2){
                die('Could not delete from database: '.mysql_error());
            }else{
                //$error_message = '<a href="#" onclick="toggle2(\'deletewebsite\', this); return false;"><div id="deletewebsite" class="success">Video Created</div></a>';
                header("Location: /interest/video.php?interest=".$interest_id."&video=".$video_embed."");
            }
        }else{
            $error_message = '<a href="#" onclick="toggle2(\'deletewebsite\', this); return false;"><div id="deletewebsite" class="error">That video already exists</div></a>';
        }
      }else{
        $error_message = '<a href="#" onclick="toggle2(\'deletewebsite\', this); return false;"><div id="deletewebsite" class="error">';
        foreach($error as $key => $values){
            $error_message.= "$values";
        }
        $error_message.="</div></a>";
        }
} 
```

有没有我可以放在那里的支票，这样他们就不能发布私人视频了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:24:00.917

只需检查[http://gdata.youtube.com/feeds/api/videos/ID](http://gdata.youtube.com/feeds/api/videos/ID)是否等于“私人视频”，因为这就是将返回的内容。

当它不存在时，它将返回“找不到视频”。

编辑：另外，当它是一个不正确的 ID 时，它会返回“无效的 ID”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:57:08.187

您将深入了解 youtube 的 API。看看[如何使用 PHP 检查 YouTube 上是否存在视频？](https://stackoverflow.com/questions/1383073/how-do-i-check-if-a-video-exists-on-youtube-using-php)

我假设如果视频是私有的，则 api 的响应应该与视频不存在时的响应相同。但是该链接肯定会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:32:15.390

我想通了（自从我发布这个问题以来已经有很长时间了，我已经有一段时间没有想通了，但我想我应该回答它），我所要做的就是检查它是否可以加载带有布尔值的文件，如下所示：

```
if(@DOMDocument::load("http://gdata.youtube.com/feeds/api/videos/".$video_embed) === false){
    $error[] = 'Invalid video';
} 
```

我把@放在它前面，这样它就不会显示它在无法加载它时给出的所有错误:)

希望这对将来的人有所帮助！

# objective-c - 上传到 Testflight 时出错 解析 IPA 时出现意外错误

> ID：13205526
> 
> 赞同：3
> 
> 时间：2012-11-03T02:54:02.800
> 
> 标签：objective-c, ios, xcode, testflight

我正在尝试上传我的应用程序以进行试飞。当我使用网络界面时，我得到了错误

解析 IPA 出现意外错误，已通知 TestFlight 支持。

当我尝试使用桌面应用程序上传时，它告诉我找不到 dSYM，让我完成整个过程，然后在最后给出同样的错误。

![桌面应用程序中的屏幕](../Images/47b1dd1b119e20da92cf16d6b68d5ab2.png)

内置 XCode 4.5，用于部署目标 5.0。

我查看了[Error Upload TestFlight : Invalid IPA / dSYM not found](https://stackoverflow.com/questions/12523240/error-upload-testflight-invalid-ipa-dsym-not-found)，据我所知，我所有的构建设置都设置为 armv7。

有什么明显的东西我应该检查/可能会丢失吗？

项目中仅有的 2 个外部库是 test flight sdk 和 flurry。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T22:29:22.313

I've had the same problem when trying to upload .ipa files. The problem is, that .ipa files don't contain the symbolication information anymore.

Try exporting your app as Xcode Archive instead of building the .ipa for distribution (thats one of the options when you choose 'Distribute...' in the Xcode organizer). This archive contains the necessary dSYM files (if not, you have to check your build settings). If you drop this .xcarchive into the TestFlight desktop client, TestFlight will build the .ipa for you and the upload it.

Make sure to use the same Provisioning Profiles for signing the .ipa in the TestFlight client that you have used when building the archive in Xcode!

Or you can just choose to Show the TestFlight Co-pilot in the menu bar (activate in the settings), the it will automatically detect your Archive.

# java - java客户端/服务器应用程序没有输出

> ID：13205530
> 
> 赞同：1
> 
> 时间：2012-11-03T02:55:26.450
> 
> 标签：java, chat

感谢您之前的所有回复，这些回复非常有帮助。我有另一个用于服务器/客户端应用程序的 Q。我gt服务器/客户端之间的连接。但是现在当我输入一些东西时，什么也没有发生。我实现的 run() 监听输入并显示它们。似乎这种方法不起作用（这就是我猜没有输出的原因）

这是 run()（收听并显示收到的消息）和 send()（发送消息）

谢谢

```
public void run(){//watch for incoming communication
        String msg;

        try{//loop reading lines from the client and display msg
            while ((msg = serverIn.readLine()) != null) {
                System.out.println("msg received"+msg);
            }
        }catch (IOException e) {
            System.err.println(e);
        }   
    }

    public void send(String msg){//send outgoing message
        System.out.println("in the send()");
        serverOut.println(msg);
    } 
```

一些可能有用的信息：这些方法在我称之为的类中

```
someClass.start() (someClass extends Thread class)
someClass.send() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:57:56.370

看起来您需要刷新输出流。

```
 public void send(String msg){//send outgoing message
        System.out.println("in the send()");
        serverOut.println(msg);
serverOut.flush();
    } 
```

`serverOut`这是假设`PrintWriter`它看起来是什么？

# java - 改变落球速度... 加工中

> ID：13205534
> 
> 赞同：1
> 
> 时间：2012-11-03T02:56:28.390
> 
> 标签：java, processing

这是一个程序，它在鼠标点击的任何地方都有一个球落下和弹跳。有谁知道如何改变球在重力作用下下落的速度？我试图找出正确的解决方案......但我遇到了一些麻烦。所有帮助和/或输入将不胜感激。

```
 float x;
  float y;
  float yspeed = 0;
  float xspeed = 0;
  float balldiameter = 10;
  float ballradius = balldiameter/2;

  void setup() {
     size (400,400);
     background (255);
     fill (0);
     ellipseMode(CENTER);
     smooth();
     noStroke();
     x = width/2;
     y = height/2;
   }

   void draw() {
   mouseChecks();
   boundaryChecks();
   ballFunctions();
   keyFunctions();
   }

   void mouseChecks() {
      if (mousePressed == true) {
      x = mouseX;
      y = mouseY;
      yspeed = mouseY - pmouseY;
      xspeed = mouseX - pmouseX;
      }
    }

  void boundaryChecks() {
     if (y >= height - ballradius) {
     y = height - ballradius;
     yspeed = -yspeed/1.15;
   }
   if (y <= ballradius) {
   y = ballradius;
   yspeed = -yspeed/1.35;
   }
   if (x >= width -ballradius) {
     x = width -ballradius;
     xspeed = -xspeed/1.10;
   }
   if (x <= ballradius) {
     x = ballradius;
     xspeed = -xspeed/1.10;
     }
    }

 void ballFunctions() {
    if (balldiameter < 2) {
     balldiameter = 2;
    }
   if (balldiameter > 400) {
     balldiameter = 400;
    }
   ballradius = balldiameter/2;
   background(255); //should this be in here?
   ellipse (x,y,balldiameter,balldiameter);
   yspeed = yspeed += 0.2;
   xspeed = xspeed/1.005;
   y = y + yspeed;
   x = x + xspeed;
  }
 void keyFunctions() {
    if (keyPressed) {
    if(keyCode == UP) {
    balldiameter +=1;
   }
  if (keyCode == DOWN) {
   balldiameter -=1;
   }
  }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T03:08:14.663

地球上的重力加速度为 9.81 m/s^2。因此，如果您的球在单击鼠标时的速度为 0，则最终速度将是相对于时间积分的加速度。这将是 (9.81 * t) / 2。其中 t 以秒为单位。结果单位为 m/sec。您必须将米转换为某些屏幕空间单位才能进行绘图。

# flash - Adobe Flash 初学者：错误 1009

> ID：13205536
> 
> 赞同：1
> 
> 时间：2012-11-03T02:56:40.987
> 
> 标签：flash

我正在尝试为 Up 电影制作一个 Flash 网站之类的东西。

我有一些链接到电影点击的按钮，然后将转到图片库。这一切都在 mc_content 中，并放在舞台上，实例名称为 content_mc。在 mc_content 内部，我有一个动作层和一个内容层，该层具有标记为画廊的 mc_gallery。

```
import flash.events.MouseEvent;

stop();

gallery_btn.addEventListener(MouseEvent.CLICK,onGalleryClick);

function onGalleryClick(evt:MouseEvent): void {
trace("gallery");
content_mc.gotoAndStop("gallery");
} 
```

gallery 是 mc_gallery 在 mc_content 中所在的标签。

当我运行它时，它会收到 1009 错误代码。

我猜这是一个非常简单的解决方法，并且已经发布了很多答案，但我只是不知道如何使其适应我的需要。我的代码与我成功的另一个项目相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:15:15.027

1009 错误表明它无法访问空对象引用的属性。

它基本上说的是您尝试使用的东西实际上是空的，因此不存在。

尝试检查您的实例名称、属性和变量，以确保它们在使用前被正确命名并正确初始化（例如，您确定 content_mc 是舞台上 MovieClip 的正确名称吗？...）

我们很难用这么少的代码解决您的问题，因为这样的错误可以到处隐藏！:-)

但是，如果在您单击按钮时弹出错误，则可能是问题出在

```
content_mc.gotoAndStop("gallery"); 
```

行，或位于 content_mc 影片剪辑中的*画廊*标签处。

# facebook - Facebook SDK 3.1.1 iOS 6 在设备设置中注销，返回应用和 HTTP 状态代码：400 错误

> ID：13205538
> 
> 赞同：6
> 
> 时间：2012-11-03T02:57:10.870
> 
> 标签：facebook, login, ios6, authorization, logout

我在带有 iOS 6 的 iOS 应用程序中使用 Facebook SDK 3.1.1。我在从“设置”应用程序中的用户帐户测试 Facebook 注销时遇到了这个问题。

一旦通过 Facebook 的设置应用程序授权该应用程序供 Facebook 使用，然后用户进入并删除设置应用程序中的 Facebook 连接（不仅针对此应用程序，还删除了用户名），问题就出在这里。

当我返回应用程序时，它显示仍在登录。但是当我尝试访问 Facebook 时，我收到错误：HTTP 状态代码：400。我试图关闭并清除 FBSession 的令牌信息，但这无济于事。我希望有人能在这个问题上为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:37:48.013

请提供有关您如何清除令牌信息的详细信息。

你应该打电话给：

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

当你说你仍然登录时，Facebook 的什么方法告诉你这个？你应该用这样的东西进行测试：

```
if ([[FBSession activeSession] isOpen]) {
    isLoggedIn = YES;
} 
```

# jquery - jquery无法在magento中更改css属性

> ID：13205539
> 
> 赞同：0
> 
> 时间：2012-11-03T02:57:31.847
> 
> 标签：jquery, magento, magento-1.7

[我在我的网站](http://foryourc-store.com/advance-tabco-wall-mounted-hand-sink-splash-faucet.html)上运行以下代码：

```
<style>
#main {background-color:#000000; border-top: 0;
padding-bottom: 20px;
min-height: 350px;}

.col-main {float: left;
width: 740px;
padding: 0 0 1px;
color:#FFFFFF;
background-color:#AABBCC;}

.col-right {float: right;
width: 200px;
padding: 0 0 1px;
color:#0F0F0F;
background-color:#DDEEFF;}

img {height:250px; width:250px;}
h1 {color: #ddeeff;}
</style>

<script type="text/javascript">
jQuery.noConflict();
                   if (jQuery(".col-right").height() > jQuery(".col-main").height())

                                          {
jQuery(".col-main").height(jQuery(".col-right").height());
}
else {
jQuery(".col-right").height(jQuery(".col-main").height());
}

</script>

<div id="main"><h1>Main</h1>
<div class="col-main"><img src="http://foryourc-  store.com/media/favicon/default/FYCS_icon-01.png"/>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin consequat fermentum    nunc a eleifend. Phasellus ut est at justo porttitor gravida. Praesent ut placerat lacus. Etiam consectetur tortor vel nibh sodales semper. Praesent quam magna, pharetra non viverra et, porta a nisi. Aenean et mi ante. Duis a nunc metus, at hendrerit quam. Aenean molestie orci placerat mauris varius non cursus ipsum commodo. Donec sit amet ultrices ligula. Nam egestas ligula vitae justo scelerisque pulvinar. Nunc vestibulum fermentum ligula, vel consequat velit lobortis sed. Suspendisse et dolor lectus, sed dignissim justo. Vivamus rhoncus volutpat rutrum. Quisque pretium mi in enim bibendum in ultrices mi molestie.</div>

<div class="col-right"><img src="http://foryourc-store.com/media/favicon/default/FYCS_icon-01.png">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin consequat fermentum nunc a eleifend. Phasellus ut est at justo porttitor gravida. Praesent ut placerat lacus. Etiam consectetur tortor vel nibh sodales semper. Praesent quam magna, pharetra non viverra et, porta a nisi. Aenean et mi ante. Duis a nunc metus, at hendrerit quam. Aenean molestie orci placerat mauris varius non cursus ipsum commodo. Donec sit amet ultrices ligula. Nam egestas ligula vitae justo scelerisque pulvinar. Nunc vestibulum fermentum ligula, vel consequat velit lobortis sed. Suspendisse et dolor lectus, sed dignissim justo. Vivamus rhoncus volutpat rutrum. Quisque pretium mi in enim bibendum in ultrices mi molestie.<br>Integer pharetra sapien metus. Mauris bibendum eleifend luctus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Pellentesque elementum lobortis luctus. Duis tristique leo sed velit commodo eu consequat magna eleifend. In hac habitasse platea dictumst. Vestibulum sed neque a tellus auctor viverra sit amet sit amet dui. Aliquam dui mi, iaculis sit amet sagittis et, iaculis eu lacus. Morbi viverra tellus non nisl ultrices interdum. Praesent in turpis non justo mollis elementum vel eget velit. Aliquam pulvinar hendrerit tincidunt. Quisque tortor quam, lacinia ut elementum in, lacinia at arcu. Integer porta tincidunt urna nec semper. Vivamus gravida odio id ante adipiscing eu ultricies elit eleifend. Nulla lectus quam, malesuada sed rutrum ac, placerat sed mi. Donec bibendum sagittis dapibus.</div></div> 
```

我正在运行 Magento CE 1.7.0.2。代码在这里工作正常：http: [//jsfiddle.net/scoosethemoose/YxNwm/](http://jsfiddle.net/scoosethemoose/YxNwm/)

请帮助我确定哪些工作不正常。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:14:38.780

假设您正在使用这个[http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

您在 jQuery('#featured').jcarousel(); 上遇到错误 因为似乎没有包含 jcarousel 插件库（如果您查看 jquery.jcarousel.min.js 或 jcarousel*.js 的源代码）

您还加载**了 2 个不同的 jQuery 副本**- 需要删除一个

*   foryourc-store.com/js/jquery/jquery-latest.js (ver 1.8.2)

*   皮肤/前端/基础/默认/ig_lightbox2/js/jquery-1.6.2.min.js

你也可以为 jQuery 创建一个不同的别名来使用

```
var $j = jQuery.noConflict();
// Do something with jQuery
$j(".col-main").height($j(".col-right").height());   
// instead of jQuery(".col-main").height(jQuery(".col-right").height());
//then use magento prototype with
$("content").style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:01:49.330

您应该`$(window).load()`像小提琴一样运行页面中的代码。

在加载事件之前，您无法确定元素的最终尺寸，因为页面尚未完成渲染过程。

目前你的脚本工作（但不是预期的那样），检查 .col-right 里面的 firebug，你会看到一个高度已经分配给元素，所以你的脚本正在运行 else-branch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:51:45.767

```
var $j = jQuery.noConflict();
$j(window).load(function() {
if ($j(".col-right").height() > $j(".col-main").height())

{
    $j(".col-main").height($j(".col-right").height());
}
else {
    $j(".col-right").height($j(".col-main").height());
}
});​ 
```

这为我解决了。

# java - 在方法的括号中使用参数和不使用参数有什么区别

> ID：13205540
> 
> 赞同：0
> 
> 时间：2012-11-03T02:57:35.600
> 
> 标签：java

有什么区别：

1)

```
public void Angle(double f_angle) 
{
    if (f_angle <= 15 && f_Angle >= -15)
    {
        fAngle = 1000 * f_Angle * Math.PI / 180000;
    } else
        system.out.println("Firing Angle: " + f_Angle + " is not between -15 and 15."); 
```

**和**

2)

```
public static int f_angle

public void Angle() 
{ ;
    if (f_angle <= 15 && f_Angle >= -15)
    {
        fAngle = 1000 * f_Angle * Math.PI / 180000;
    } else
        system.out.println("Firing Angle: " + f_Angle + " is not between -15 and 15."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:02:00.953

区别在于线程安全性和便利性：

*   您可以成功地从多个线程并发调用第一个方法；第二种方法是不可能的。
*   调用者很清楚这`f_angle`是方法的参数；第二种方法没有这样的明确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:29:40.410

我认为对您的问题的回答是局部变量和全局变量之间的区别；它们由变量**life time**和**scope**区分。

当你为一个函数定义一个参数时，它就像一个局部变量，一旦函数执行完毕，这个变量就会被销毁（示例#1）。并且变量范围仅限于功能块。

但是即使函数执行完毕并且所有函数都可以访问全局变量（示例#2），它仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T03:00:16.003

参数添加到方法签名中。尽管名称相同，但它们是不同的方法，因为它们的签名不同。这样您就可以创建重载方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T03:07:16.373

*示例 #2对实现名为**Angle*的方法的类中的变量进行操作（应以小写字母开头）。

*示例 #1*对从某处传递给*Angle方法的参数进行操作。*

正如@dasblinkenlight 所指出的，这对线程安全有影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T03:01:31.703

这称为[方法重载](http://www.java-samples.com/showtutorial.php?tutorialid=284)

方法通常被重载以增加操作的特异性或使调用者在控制方法的操作方式方面具有更大的灵活性。

# android - 从另一个活动返回时如何重新获取 MainActivity 中的内容？

> ID：13205556
> 
> 赞同：0
> 
> 时间：2012-11-03T03:00:54.497
> 
> 标签：android, refresh

我有一个向服务器发送数据的活动，单击“发送”按钮后，**当前活动将完成并返回到主要活动**。在 MainActivity 中，我使用了 AsyncTask 从数据库中获取数据。当前活动完成后**如何重新获取 MainActivity 中的内容？**

我尝试在 MainActivity 中按照以下方式进行操作，但是该应用程序无法正确启动，它会一直完成并启动并完成并启动...

```
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    finish();
    startActivity(getIntent());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:04:51.083

一个潜在的解决方案是为您的活动实现[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)，并让活动实现[LoaderManager.Callbacks](http://developer.android.com/reference/android/app/LoaderManager.LoaderCallbacks.html)接口。即使您的 MainActivity 已暂停，AsyncTaskLoader 也可以侦听广播意图。当您重新启动 MainActivity 时，加载程序将提供更新的内容。

我包含的链接表明这仅在 API 11+ 中可用，但在兼容性 v4 中也可用。

对于 Loader 的示例实现，[Android Design Patterns](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)上有一个非常好的博客系列。我可以想象这样一种情况，一旦用户点击发送按钮，您的加载程序就有自己的观察者来监听广播意图。

# recommendation-engine - Recommendation engine using google-prediction-api?

> ID：13205557
> 
> 赞同：5
> 
> 时间：2012-11-03T03:00:58.427
> 
> 标签：recommendation-engine, google-prediction

In google's prediction api page, it says we can use it for recommendation of webpages / products...

Can someone please show me how, for example:

I have 500,000 members purchased history

I have 2,000,000 products in 200 different categories

I have user-X just signup, asked him 15 'like' / 'dislike' product questions (user's taste)

Now, i want to suggest/recommend user-X with a list(e.g. 500) of products which he most likely willing to purchase

Thanks a lot

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T06:37:07.803

The Google Prediction API, as currently implemented, is great for classifying data into a discrete set of categories, however, as noted in the documentation:

> Avoid having a high ratio of categories to training data in categorical models. Try to have at least a few dozen examples for each category, minimum. For really good predictions, a few hundred examples per category is recommended.

The Prediction API's classification doesn't work well when the ratio of categories to examples is high and in the example you sketched the relationship is one-to-one because you are trying to find the user whose liked product list is most similar to the user of interest (to find a set of promising products to recommend). In this model, each user is a unique category.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T06:49:06.687

If you are not specifically tied to Google API fow whatever reason, explore using Mahout. This is a basic use case for the Mahout Recommendation mining.

[https://cwiki.apache.org/MAHOUT/itembased-collaborative-filtering.html](https://cwiki.apache.org/MAHOUT/itembased-collaborative-filtering.html)

# objective-c - 为什么这个 NSPanel 发布时带有“关闭”按钮？

> ID：13205558
> 
> 赞同：0
> 
> 时间：2012-11-03T03:01:14.183
> 
> 标签：objective-c, xcode, cocoa

我在 IB 中的 NSPanel 未选中“关闭时释放”。

“启动时可见”也未选中。

我用以下（由dragToButton激活）淡入NSPanel，它工作正常

```
- (IBAction)dragToFile:(id)sender

{        

    DragImageView *accessory = [[[DragImageView alloc] initWithFrame:NSMakeRect(0,0,71,63)] autorelease];
    [accessory setMainContentFolder:self.mainInstallFolder];

    [self.dragToFile setFloatingPanel:YES];
    [self.dragToFile makeKeyWindow];

    [dragImage setMainContentFolder:self.mainInstallFolder];
    NSRect frame = dragToFile.frame;
    NSRect mainFrame = self.window.frame;
    frame.origin.x = mainFrame.origin.x + 550;
    frame.origin.y = mainFrame.origin.y + 360;
    [dragToFile setFrame:frame display:NO];

    //set fade anim params
    NSDictionary *fadeInDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                 dragToFile, NSViewAnimationTargetKey,
                                 NSViewAnimationFadeInEffect, NSViewAnimationEffectKey,
                                 nil];
    //create fade instance
    NSViewAnimation *fadeIn = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray arrayWithObjects: fadeInDict, nil]];

    [fadeIn startAnimation];
    [fadeIn release]; 
```

但是，如果我关闭窗口工具栏上的窗口，它会从 windowWillClose 通知触发以下内容

```
- (void) dragToFileWindowDidClose:(id)sender
{
    [dragToFile setAlphaValue:0.0]; //make nspanel 0 alpha so it can fade in again
    [dragtoButton setState:NSOffState];

} 
```

窗口关闭但完全消失，并且不会在下一次单击 dragToButton 时返回。

NSPanel 具有以下属性

`@property (retain) IBOutlet NSPanel *dragToFile;`

所以我很确定窗口正在被释放，但我不知道为什么，因为我取消了该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:41:40.603

首先尝试`[dragToFile setReleasedWhenClosed:NO];`手动使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:16:28.963

感谢您的建议。我解决了。

代替`[self.dragToFile makeKeyWindow];`

`[self.dragToFile makeKeyAndOrderFront:dragToFile];`

不知道为什么这个有效而另一个无效，但它现在完美无缺。

谢谢。

# objective-c - 嵌套语句而不是创建新的一次性对象？

> ID：13205561
> 
> 赞同：1
> 
> 时间：2012-11-03T03:01:34.553
> 
> 标签：objective-c, cocoa-touch, cocoa

新手问题在这里。

我为什么要这样做：

```
 NSPredicate *pred = [NSPredicate predicateWithFormat:@"(lineNum = %d)", i];
    [request setPredicate:pred]; 
```

我什么时候可以做到这一点？

```
 [request setPredicate:[NSPredicate predicateWithFormat:@"(lineNum = %d)", i]]; 
```

我找到的每个教科书代码示例都使用第一种方法，但据我所知，第二种方法基本上会做同样的事情，而且看起来更整洁。“pred”只被调用一次，那么为什么将它创建为一个对象呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T03:05:09.110

这主要与教科书的格式有关：很难在一页上容纳超过一定数量的字符，因为书没有滚动条。除此之外，两者是相同的。

在现实生活中这样做的一个原因是您可以设置断点并`pred`在调用之前进行检查`setPredicate:`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T03:05:26.247

哪个看起来更整洁只是一个偏好问题。

两者在功能上没有区别。

对于更复杂的情况，第一种模式允许更多不言自明的代码，因为您可以放置​​有意义的变量名：

```
NSPredicate *correctLineNumber = 
   [NSPredicate predicateWithFormat:@"(lineNum = %d)", i];
[request setPredicate:correctLineNumber]; 
```

# sencha-touch - Sencha Touch 2 可点击的链接 UI 元素

> ID：13205562
> 
> 赞同：1
> 
> 时间：2012-11-03T03:01:48.350
> 
> 标签：sencha-touch

见附件，我希望“忘记密码”是一个链接而不是一个按钮，但是我在 Sencha 中找不到任何监听点击事件的 Link UI 元素，它不存在吗？![在此处输入图像描述](../Images/160f60e6588e5ab9ad4f0e12d3899a8d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T03:03:18.733

您可以简单地使用一个组件并为其定义 html，请参见下面的代码：

```
{
 xtype: 'component',
 html: '<a href='+'"http://abc.com"'+ '>Forgot your password?</a>',
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:51:08.443

您可以使用 Sencha 路线，例如：

```
Ext.define('MyApp.controller.User', {
    extend: 'Ext.app.Controller',

    config: {
        routes: {
            'forgot-password': 'forgotPassword'
        }
    },

    forgotPassword: function() {
        // Your code here
    }
}); 
```

然后，您可以使用主题标签后的路由名称来制定链接，例如：

```
 http://myapp.com#forgot-password 
```

更多关于路线的信息：http: [//docs.sencha.com/touch/2-0/# !/guide/history_support](http://docs.sencha.com/touch/2-0/#!/guide/history_support)

# c++ - 如何在 .dll 类方法参数中传递对象？

> ID：13205566
> 
> 赞同：2
> 
> 时间：2012-11-03T03:03:13.507
> 
> 标签：c++, oop, visual-c++, dll, polymorphism

```
// SharpEngine.h

namespace SharpEngine {
    class SharpInst {
    public:
        // Insert Game Engine Code.
        // Use this format 
        // static __declspec(dllexport) type function(parameters);

        static __declspec(dllexport) void saveGame(object_as_param_here)
    };
} 
```

在上面写着“object_as_param_here”的地方，我需要传递一个对象，以便函数可以访问包含级别、经验、健康等数据的对象。

这也在 .dll 中，我将如何制作它以便我可以将它与其他代码一起使用并且仍然能够调用各种对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T12:20:30.450

您可以使用指针作为参数，因为 DLL 在可执行内存中，所以如果您有结构的地址和原型，您可以直接从内存中访问它。我给你举个例子：

假设您的可执行文件中有这个简单的原型：

```
class Player
{
public:
    int money;
    float life;
    char name[16];
}; 
```

您可以将其复制到 DLL 的源代码中，因此您有一个声明，并让 DLL 在给出指针时知道如何访问成员。

然后您可以[将函数导出到可执行文件](https://stackoverflow.com/a/538179/260411)，给出示例原型：

```
static __declspec(dllexport) void saveGame(Player *data); 
```

现在您可以从可执行文件中调用 DLL 的函数，如下所示：

```
Player *player = new Player;
player->money = 50000;
player->life = 100.0f;
saveGame(player); 
```

或者，如果您不使用播放器的类作为可执行代码中的指针，您仍然可以传递其地址：

```
Player player;
player.money = 50000;
player.life = 100.0f;
saveGame(&player); 
```

在您的`saveGame`函数中，您可以将结构作为指针访问：

```
data->money 
```

# php - 如何仅使用 PHP 创建弹出窗口？

> ID：13205567
> 
> 赞同：0
> 
> 时间：2012-11-03T03:03:22.417
> 
> 标签：php, popup

实际上我想出了一种方法来做到这一点：下面的代码并不完全是工作代码，但它确实传达了我的想法。我已经实现了这个想法并且它确实有效。我认为缺点是复杂页面，因为每次弹出窗口上升或下降时都必须重新加载整个页面。但是，好的一面是，没有更多的 JAVA 脚本！！！耶！！！:)

```
<html>
<body class="classfile.css">
<div                                 <?//add background stuff here?>
<?php
if(isset($_POST["popupmode"]))
   echo ' style="opacity:0.15" '; //this will fade out any background stuff
 ?>
style="height:1000px;with:600"px>
<form method="post" action="thispage.php">
<input type="hidden" name="popupmode">
<input type="submit" value="bring up popup">
</form>
</div>

 <?php
 if(isset($_POST["popupmode"]))
  {
   echo '<div style="with:200px;height:200px;top:-800px;left:200px;border-style:raised">';
  echo '<form method="post" action="thispage.php">';
  echo '<input type="submit" value="bring down popup">';
  echo '</form></div>';
  }    
  ?>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:20:50.303

PHP 是服务器端。将页面重新加载到“弹出”的东西不是很聪明。

有 PURE-CSS 灯箱，你可以使用 JavaScript 甚至你的 PHP 解决方案作为后备，以防兄弟是旧的。不过，这不是一个好主意。我会尝试 CSS 解决方案，因为它可能发生在客户端。

就像是：

```
.popupBox {
    display:none;
}
.popup:hover .popupBox{
    display: block;
} 
```

或者，如果您需要点击：

```
.popupBox {
    display:none;
}
.popupBox:target{
    display: block;
} 
```

# php - 单击按钮在 Zend/php 中启动一个新页面

> ID：13205570
> 
> 赞同：-1
> 
> 时间：2012-11-03T03:03:39.447
> 
> 标签：php, zend-framework, zend-framework2

PHP & Zend Noob 在这里

我从这里下载了骨架项目：`https://github.com/zendframework/ZendSkeletonApplication`

假设我想打开一个新页面，如果单击启动页面上的“ZF2 Development Portal”按钮（左下方绿色按钮），则仅显示**“hello world”文本——我该怎么做？**见图片： ![在此处输入图像描述](../Images/c3d981b3fbca5f3307bda7c1f8c5a902.png)

我已通读本教程，但不确定模型、视图或控制器是如何实际启动的？见教程：`http://blog.wilgucki.pl/2012/07/tworzenie-modulw-w-zend-framework-2.html`

通过查看代码，我知道我将不得不更改这行代码：

```
<div class="span4">
        <h2><?php echo $this->translate('Follow Development') ?></h2>
        <p><?php echo sprintf($this->translate('Zend Framework 2 is under active development. If you are interested in following the development of ZF2, there is a special ZF2 portal on the official Zend Framework website which provides links to the ZF2 %swiki%s, %sdev blog%s, %sissue tracker%s, and much more. This is a great resource for staying up to date with the latest developments!'), '<a href="http://framework.zend.com/wiki/display/ZFDEV2/Home">', '</a>', '<a href="http://framework.zend.com/zf2/blog">', '</a>', '<a href="http://framework.zend.com/issues/browse/ZF2">', '</a>') ?></p>
        <p><a class="btn btn-success" href="http://framework.zend.com/zf2" target="_blank"><?php echo $this->translate('ZF2 Development Portal') ?> &raquo;</a></p>
    </div> 
```

更具体地说，这一行：

```
<p><a class="btn btn-success" href="http://framework.zend.com/zf2" target="_blank"><?php echo $this->translate('ZF2 Development Portal') ?> &raquo;</a></p> 
```

但我真的很困惑我应该将其更改为什么以启动新页面。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:32:30.053

这是一个类似“哦，我听说汽车很酷，我如何制造汽车？”的问题。

请参阅[官方文档](http://framework.zend.com/manual/2.0/en/index.html)并熟悉快速入门为您提供的内容。如果你完全不明白，那就分别了解一下 Model - View - Controller 吧。因为在不了解机械背景的情况下尝试制造汽车是没有用的；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:00:11.700

您需要先了解 ZF2 的工作原理。

在控制器文件夹（ PageController.php ）中创建一个控制器，创建一个控制器类并按照文档所述创建一个方法。

```
function HelloAction(){
return "Hello world";
} 
```

创建一个导航到 /page/hello/ 的链接

你就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T03:23:27.973

希望这对您有用：
在应用程序/控制器内部创建 IndexController.php

```
class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {

       //$this->_helper->layout->setLayout('layout');
    }

} 
```

然后在 application/views/scripts 里面创建 index/index.phtml

```
<div>
    <h1>Hello World</h1>
</div> 
```

# css - a：悬停不知何故不起作用

> ID：13205572
> 
> 赞同：0
> 
> 时间：2012-11-03T03:03:53.660
> 
> 标签：css

我正在处理这个页面[http://seriesaddict.fr/Hunted/772](http://seriesaddict.fr/Hunted/772)我有这个：

```
.ficheserie_casting img.style_img, img.style_img a:hover {opacity: 0.7;}
.ficheserie_casting img.style_img, img.style_img a {opacity: 1;} 
```

悬停不起作用，谁能告诉我为什么？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T03:08:10.420

看起来您正在尝试将鼠标悬停在`img`元素上，但您将悬停分配给`a`显然位于标签内的`img`标签，这不是正确的 HTML：

不正确：

```
<img><a></a></img> 
```

正确的：

```
<a><img /></a> 
```

将您的CSS更改为：

```
.ficheserie_casting img.style_img, img.style_img:hover {opacity: 0.7;}
.ficheserie_casting img.style_img, img.style_img {opacity: 1;} 
```

# algorithm - 是否有一系列交换会产生所有可能的排列？

> ID：13205573
> 
> 赞同：8
> 
> 时间：2012-11-03T03:04:01.000
> 
> 标签：algorithm, permutation

你得到了一个数字列表`1, 2, ... ,n`- 是否有一系列`n!-1` `swap`操作会生成`n!`列表的所有排列，其中在单元格和`swap (i, j)`交换元素？当输入列表未排序开始和/或列表中有重复时，一般情况如何？`i``j`

上下文：我正在解决一个问题，如果您已经知道交换 2 个元素的分数并且我想暴力破解（使用 C++ `next_permutation()`）所有可能的排列，那么数组的“分数”很容易计算。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T03:57:40.250

当然，它为 17 世纪的敲钟人所熟知。那么对于一些组合历史来说怎么样？

请参阅[Steinhaus Johnson Trotter 算法](http://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm)或咨询您当地的 change-ringing 小组。

* * *

我对您问题的第二部分进行了一些研究，即是否可以使用重复的元素来做到这一点。我相信答案是“是的，但不是那么容易”。此外，不可能仅通过相邻交换来置换具有重复元素的列表，这对于 set 很容易看出`{0, 0, 1, 1}`。但是，只需单次交换即可。

基本方法是使用基本的 change-ringing 算法，但在相同元素的组上而不是在单个元素上。对于一组`k`相同的元素，您需要能够对列表 0 ^(n-k) 1 ^k组合的算法（其中 n 是基集的总大小）。存在许多这样的算法，但我找不到任何真正简单的算法；最简单的是（粗略地说）为整个组分配一个方向，同时也为每个组分配一个方向`1`（与 Shimon Even 算法类似）。向左移动组时，最左边的元素来回扫过；每次它改变方向时，下一个向右移动的元素都会向前移动；等等。这最终将整个组从列表的右侧移动到左侧，之后其整体方向被翻转并返回到原始配置，现在最右侧的元素引领扫描。

由于在这种情况下方向反转的数量可能是偶数，因此上述算法可能无法追踪置换循环，但我相信使用更复杂的算法可以产生一个循环。实际上，您正在图中寻找一个哈密顿循环，该哈密顿循环是由每个排列的可能单个交换引起的 - 置换面体的一种变体 - 但是，虽然哈密顿循环确实存在，但它们并不那么容易找到，因为这些图是相当大。

# ruby - 遍历数组的散列

> ID：13205574
> 
> 赞同：2
> 
> 时间：2012-11-03T03:04:10.500
> 
> 标签：ruby

我有以下内容：

```
@products = {
  2 => [
    #<Review id: 9, answer01: 3, score: 67, style_id: 2, consumer_id: 2,
    branch_id: 2, business_id: 2>
  ],
  15 => [
    #<Review id: 10, answer01: 3, score: 67, style_id: 2, consumer_id: 2,
    branch_id: 2, business_id: 2>,
    #<Review id: 11, answer01: 3, score: 67, style_id: 2, consumer_id: 2,
    branch_id: 2, business_id: 2>
  ]
} 
```

我想平均与每个产品的哈希键相关的所有评论的分数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T03:18:12.037

遍历哈希：

```
hash = {}
hash.each_pair do |key,value|
  #code
end 
```

遍历数组：

```
arr=[]
arr.each do |x|
  #code
end 
```

所以迭代数组的散列（假设我们正在迭代散列中每个点的每个数组）将像这样完成：

```
hash = {}
hash.each_pair do |key,val|
  hash[key].each do |x|
    #your code, for example adding into count and total inside program scope
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T03:31:18.600

是的，只需使用`map`每个产品的得分和数组，然后取数组的平均值。

```
average_scores = {}
@products.each_pair do |key, product|
  scores = product.map{ |p| p.score }
  sum = scores.inject(:+) # If you are using rails, you can also use scores.sum
  average = sum.to_f / scores.size
  average_scores[key] = average
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T03:31:27.570

感谢新月的回答，我一定会赞成的。我不小心自己想出了答案。

```
trimmed_hash = @products.sort.map{|k, v| [k, v.map{|a| a.score}]}
trimmed_hash.map{|k, v| [k, v.inject(:+).to_f/v.length]} 
```

# android - 我无法在 Android 中访问 FTP

> ID：13205577
> 
> 赞同：0
> 
> 时间：2012-11-03T03:04:39.020
> 
> 标签：android

我正在做一个项目。我的项目第一步连接到 ftp。我阅读了文档并在 stackoverflow 中进行了搜索，但没有找到解决方案。我是 android 开发者的初学者。运行应用程序时，我在 LogCat 和 java 文件下方看到了致命错误。我该如何解决这个问题，请帮助我这个项目对我来说非常重要。

日志猫：

```
11-03 04:27:37.640: E/AndroidRuntime(330): FATAL EXCEPTION: main
11-03 04:27:37.640: E/AndroidRuntime(330): java.lang.NoClassDefFoundError: org.apache.commons.net.ftp.FTPClient
11-03 04:27:37.640: E/AndroidRuntime(330):  at com.example.cka.MainActivity$1.onClick(MainActivity.java:33)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.view.View.performClick(View.java:2408)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.view.View$PerformClick.run(View.java:8816)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.os.Handler.handleCallback(Handler.java:587)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
11-03 04:27:37.640: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-03 04:27:37.640: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
11-03 04:27:37.640: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
11-03 04:27:37.640: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-03 04:27:37.640: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-03 04:27:37.640: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
11-03 04:27:40.810: I/Process(330): Sending signal. PID: 330 SIG: 9 
```

--

主要活动：

```
 Button btn = (Button) findViewById(R.id.button1);
    final TextView tv = (TextView) findViewById(R.id.textView1);        
    btn.setOnClickListener(new View.OnClickListener() {         
    public void onClick(View v) {
        // TODO Auto-generated method stub
        core f = new core();
        f.mFTPClient = new FTPClient();
        f.ftpConnect("**.***.***.**", "****", "****", 21);
        try {
            tv.setText(f.ftpStatus());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    }); 
```

--

核心.java

```
package com.example.cka;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import org.apache.commons.net.ftp.*;
import android.util.Log;

public class core {

    private static final String TAG = null;
    public FTPClient mFTPClient = null;

    public boolean ftpConnect(String host, String username,String password, int port){

        try {
            mFTPClient = new FTPClient();
            // connecting to the host
            mFTPClient.connect(host, port);

            if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
            boolean status = mFTPClient.login(username, password);

            mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
            mFTPClient.enterLocalPassiveMode();

            return status;
            }
        }    

        catch(Exception e) {
            Log.d(TAG, "Error: could not connect to host " + host );
        }

        return false;
    }

    public boolean ftpDisconnect()
    {
        try {
            mFTPClient.logout();
            mFTPClient.disconnect();
            return true;
        } catch (Exception e) {
            Log.d(TAG, "Error occurred while disconnecting from ftp server.");
        }

        return false;
    }

    public String ftpStatus() throws IOException{

            String status = mFTPClient.getStatus();
            return status;
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:08:36.173

阅读日志输出：`java.lang.NoClassDefFoundError: org.apache.commons.net.ftp.FTPClient`. 将您的 FTP 库放入 libs 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:12:01.460

`org.apache.commons.net.ftp.*`似乎没有包含在 android API 中。尝试将库添加到您的项目 /libs 文件夹中。

EDIT: Is your FTP library included in the build path? Right-click on the project and go to Properties->Java Build Path->Libraries, click Add JARs, and add your library from the project's /libs folder. Then click on Order and Export and make sure it's checked to include it in your application when it is build.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T03:09:47.043

根据您的堆栈跟踪，您缺少`org.apache.commons.net.ftp.FTPClient`课程。这可能意味着您没有在项目中包含该库。您应该获取 ftp 客户端 jar 文件并将其放入 project/libs 目录

# python - 找不到 Python 站点包模块

> ID：13205583
> 
> 赞同：2
> 
> 时间：2012-11-03T03:06:57.630
> 
> 标签：python, python-2.7

我遇到的麻烦主要是因为我对 python 和 OSX 缺乏经验，并试图了解它是如何工作的。

最终目标是让这个模块运行： http: [//pypi.python.org/pypi/memory_profiler](http://pypi.python.org/pypi/memory_profiler)，除了它永远找不到模块。

所以对于初学者来说，我做了easy_install，一切都安装得很好，据我所知：

```
easy_install -U memory_profiler # pip install -U memory_profiler 
```

接下来我创建了一个 example.py 文件，只是为了让事情顺利进行：

```
@profile
def my_func():
    return 2

if __name__ == '__main__':
    my_func() 
```

并尝试运行它，但收到此错误：

```
$ python example.py

Traceback (most recent call last):
  File "example.py", line 2, in <module>
    @profile
NameError: name 'profile' is not defined 
```

这不是关于 memory_profiler 模块的问题，而是更多关于我做错了什么并且配置不正确？我将 OSX 10.8.2 与 Python 2.7 一起使用。

这就是我的“哪条蟒蛇”所说的：

```
/Library/Frameworks/Python.framework/Versions/Current/bin/python 
```

由于它是一个符号链接，所以当我转到原始链接时，它位于：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

我感到困惑的是easy_install正确地将memory_profiler.py文件放在了这个文件夹中：

```
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 
```

我的理解是，当 python 运行时，它会检查 PYTHONPATH 和站点包中的模块。（？？）

但是如果模块在 site-packages 文件夹中，为什么 example.py 不起作用？另外，如果 site-packages 文件夹中的模块应该是路径的一部分，我想我至少可以运行 memory_profiler.py 来查看它是否被 python 运行，但是得到了这个错误：

```
python memory_profiler.py
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: 
can't open file 'memory_profiler.py': [Errno 2] No such file or directory 
```

这也让我感到困惑，因为它声明 python 位于：../2.7/Resources/Python.app/Contents/MacOS/Python，但我认为它应该是 ../2.7/bin/python，并且不应该它正在检查 ../2.7/lib/python2.7/site-packages 中的 memory_profiler.py 文件吗？

另外，为什么这两个文件夹都存在，有什么区别？

```
/System/Library/Frameworks/Python.framework
/Library/Frameworks/Python.framework 
```

我错过了一大块拼图，所以任何指向正确方向的帮助将不胜感激。

**更新：**

我遗漏了：

```
from memory_profiler import profiler 
```

可能是我的大部分白痴问题，但现在我收到了这个错误：

```
Traceback (most recent call last):
File "example.py", line 1, in <module>
from memory_profiler import profiler
ImportError: cannot import name profiler 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:13:17.540

我假设你有你的进口声明？`from memory_profiler import profiler`...从阅读您的问题来看，您似乎认为 python 会自动从 PYTHONPATH 中的所有模块导入所有内容，但事实并非如此，因为这会占用太多内存，如果两个模块具有相同的功能怎么办。

**编辑**

因此，@profiler 装饰器的唯一工作方式似乎是从命令行运行程序......

```
python -m memory_profiler example.py 
```

如果您想在脚本中使用 memory_profiler，请参阅此示例。[https://github.com/fabianp/memory_profiler/blob/master/examples/plot_memory.py](https://github.com/fabianp/memory_profiler/blob/master/examples/plot_memory.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:03:08.653

正如@johnthexii 指出的那样，在以前版本的 line_profiler 中，您必须从命令行运行它。从命令行运行它仍然是运行分析器的推荐方式（因为它在解释器中设置了一些未设置的钩子），但现在也可以将装饰器导入为

```
from memory_profiler import profile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-24T02:39:00.347

我有类似的问题，但事实证明我安装`memory_profiler`到 python3 而不是 2。
指定 python 版本解决了这个问题。

```
>>> python -m memory_profiler test.py
/usr/bin/python: No module named memory_profiler 
```

```
>>> python3 -m memory_profiler test.py
Filename: test.py

Line #    Mem usage    Increment  Occurences   Line Contents
============================================================
     1   19.930 MiB   19.930 MiB           1   @profile
     2                                         def my_func():
     3   27.406 MiB    7.477 MiB           1       a = [1] * (10 ** 6)
     4  180.031 MiB  152.625 MiB           1       b = [2] * (2 * 10 ** 7)
     5   27.586 MiB -152.445 MiB           1       del b
     6   27.586 MiB    0.000 MiB           1       return a 
```

# android - 单击按钮时Android应用程序意外停止错误

> ID：13205596
> 
> 赞同：1
> 
> 时间：2012-11-03T03:10:46.060
> 
> 标签：android, android-layout, android-widget

嗨，我是 Android 开发的新手，我正在使用我的 android 应用程序，我的应用程序包括一个论坛，用户可以在那里发布、评论和讨论......所以我在界面上工作，但我明白了当我点击按钮时出错，我将我定向到注册页面，有人可以帮我解决这个错误吗

这是按钮所在的 mainuserinterface.xml 文件的 mainuserinterface.java 的代码。signupform.class 是单击按钮时触发的下一个活动的 java 文件

我收到的错误是应用程序意外停止..希望我为你们说清楚

```
package com.mohammed.watzIslam;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class mainuserinterface extends Activity  {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainuserinterface);

// this is the button where I receive errors when I click 
Button forum = (Button) findViewById(R.id.next); 

forum.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view){
        Intent myIntent = new Intent (view.getContext(), signupform.class);
        startActivityForResult (myIntent, 0);

    }
});

 //these two button still not directing to any next activity yet
Button button1 = (Button) findViewById(R.id.next); 

forum.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view){
        Intent myIntent1 = new Intent (view.getContext(), signupform.class);
        startActivityForResult (myIntent1, 0);

    }
});
Button button2 = (Button) findViewById(R.id.next); 

forum.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view){
        Intent myIntent2 = new Intent (view.getContext(), signupform.class);
        startActivityForResult (myIntent2, 0);

    }
});
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:18:46.557

运行“adb logcat”以查看导致失败的异常和堆栈跟踪。

一般来说，我在两种情况下看到过这种问题： - signupform 未在 AndroidManifest.xml 中列为活动 - 在 signupform.onCreate() 中发生了一些异常

无论哪种方式，“adb logcat”都应该让您对问题有所了解。如果您有 logcat 输出但仍有问题，请编辑您的问题并添加异常信息和堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:54:21.837

检查您的清单文件并声明活动，如果您还没有完成.. 当我们是 android 新手很多时候，我们忘记在清单文件中声明我们的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:29:58.107

有很多事情可以成为你问题的原因。

*   你应该 `View.getContect`换成`mainuserinterface.this`

*   检查您`manifest Entry`是否添加了新的课堂活动？

# mysql - 为什么我的 if 语句没有被正确评估？

> ID：13205597
> 
> 赞同：0
> 
> 时间：2012-11-03T03:11:04.940
> 
> 标签：mysql, vb.net

**晚上好，**

我正在使用以下代码截断 MySQL 数据库中的表。据我所知，查询运行良好，表被截断。但是，我用来测试行是否受到影响的 if 语句正在 Else 语句上进行评估。

那么为什么数据库中的表被截断 - 正如预期的那样 - 但 Else 语句正在被评估 - 好像没有行受到影响？我究竟做错了什么？

**这是代码：**

```
 Public Sub purgeCC()
    Dim dbAdapter As New MySqlDataAdapter
    Dim dbCmd As New MySqlCommand

    Dim ConnectionString As String = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
    Dim myQuery As String = "TRUNCATE TABLE cc_master"

    Using dbConn As New MySqlConnection(ConnectionString)
        Using dbComm As New MySqlCommand()
            With dbComm
                .Connection = dbConn
                .CommandType = CommandType.Text
                .CommandText = myQuery
            End With

            Try
                Dim affectedRow As Integer
                dbConn.Open()
                affectedRow = dbComm.ExecuteNonQuery()
                If affectedRow > 0 Then
                    MsgBox("Credit Card Master table has been successfully purged!", MsgBoxStyle.Information, "DATABASE PURGED!")
                Else
                    MsgBox("Credit Card Master table was not purged!", MsgBoxStyle.Critical, "ATTENTION")
                End If
            Catch ex As Exception
                MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
            End Try
            dbConn.Close()
            dbComm.Dispose()
        End Using
    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T03:17:17.047

根据本文档[http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html) 如果数据库版本大于 5.somthing 并且表确实，truncate 命令可能并不总是返回受影响的行没有外键约束。如果您确实有 FK，则为每一行处理一个删除，并获得您正在寻找的返回值，但如果您没有，那么 mysql 将删除并重新添加表（这要快得多），这意味着它有不知道有多少记录受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T03:24:55.263

您的`if`陈述*正在*被正确评估，只是`affectedRow`（可能应该是`affectedRows`顺便说一句，但我只是在那里迂腐）没有按照您的预期设置。

根据. [_](http://dev.mysql.com/doc/refman/5.6/en/truncate-table.html)`truncate table` _

在某些情况下，它只有在映射到 a 时才是准确的`delete`（例如具有外键约束的 InnoDB 引擎的特定版本，因为它们必须被检查或级联）。

对于其他引擎，您可能会得到 0，因为它会删除表然后重新创建它。

如果您真的想要该信息，请`select count(*)`在截断之前和之后执行。当然，`after`通常应该为零（除非截断失败）。

# c++ - C++ 多重继承三角形

> ID：13205609
> 
> 赞同：2
> 
> 时间：2012-11-03T03:14:48.607
> 
> 标签：c++, multiple-inheritance

这样的继承树是否存在问题：

```
Parent ---- Subject
|         /
|        /
Child --/ 
```

或在代码中：

```
class Subject
{
public:
    void AddObserver( Observer *aObserver );
protected:
    ObserversList mObserversList;
};

class Parent: public Object,
              public virtual Subject
{
};

class Child: public Parent,
             public virtual Subject
{
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:45:05.740

编译方面，这种继承**没有问题。**因为来的两个基地`Child`都是`virtual`继承的。

唯一必须知道的是，在*构造* `Parent()`时，构造顺序将`Subject()`遵循`Object()`。同样适用于`Child()`. 顺序将是`Subject()`, `Object()`, `Parent()`。

# matlab - 如何在matlab中加载多个3d dicom文件并随着时间的推移（4d）查看它们

> ID：13205610
> 
> 赞同：0
> 
> 时间：2012-11-03T03:14:48.763
> 
> 标签：matlab, 3d, dicom, 4d

我有 30 个 3D MRI dicom 图像文件夹（以不同的时间间隔 t1、t2 等拍摄）。每个文件夹包含 2D dicom 图像（大约 30 张图像）。我需要将这些视为 4D 电影（随时间推移为 3D）。我对在 matlab 中处理 dicom 图像非常陌生。你能帮我解决这个问题吗？预先感谢您的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-04T02:13:10.320

使用例如 dcm2nii 将 dicom 转换为 .nii 文件，然后使用 Jimmy Shen 为 matlab 编写的 nifti 包 [http://www.mathworks.com/matlabcentral/fileexchange/8797-tools-for-nifti-and-analyze-image](http://www.mathworks.com/matlabcentral/fileexchange/8797-tools-for-nifti-and-analyze-image)

那么您将拥有 .mat 格式的它们，您可以像处理 3D 矩阵一样处理数据。对于我们的建模，我创建了一个 200 个时间点的 4D 矩阵，102x102x62x201 来自扩散 MRI，然后我使用等值面和电影制作来渲染时间演化。

查看 3D 可视化教程 [http://au.mathworks.com/help/pdf_doc/matlab/visualize.pdf](http://au.mathworks.com/help/pdf_doc/matlab/visualize.pdf)

这将解释这些功能。

希望这会有所帮助，没有时间了解更多细节，还有大量工作要做，周六中午 12 点...

# c++ - 将 C/C++ 变量放入未命名范围的原因？

> ID：13205614
> 
> 赞同：6
> 
> 时间：2012-11-03T03:15:45.293
> 
> 标签：c++, scope, scoping, low-memory

> **可能重复：**
> [我可以使用块来管理 C++ 中的变量范围吗？](https://stackoverflow.com/questions/581097/can-i-use-blocks-to-manage-scope-of-variables-in-c)

我遇到了一些类似的 C++ 代码：

```
int main(void) {

  int foo;
  float qux;
  /* do some stuff */

  {
    int bar;
    bar = foo * foo;
    qux = some_func(bar);
  }

  /* continue doing some more stuff */
} 
```

最初我认为也许原作者使用大括号对一些相关变量进行分组，但是由于设计中的系统没有足够的内存，我认为作者可能有意图解析*bar 的*范围和任何变量in 离开而不是让它们在整个封闭（*foo 的*）范围内。

有什么理由这样做吗？在我看来，这不应该是必要的，并且任何现代编译器都使这变得不必要？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T03:22:43.747

> 在我看来，这不应该是必要的，并且任何现代编译器都使这变得不必要？

是的，现代编译器会在这种情况下优化内存使用。额外的范围不会使代码更快或更高效。

但是，它们不能使用具有副作用的析构函数来优化对象，因为这会改变程序的行为。因此，对此类对象执行此操作是有意义的。

> 有什么理由这样做吗？

将相关代码组合在一起很有用。您知道在大括号内声明的变量不会在其他任何地方使用，这对了解非常有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T03:23:08.243

如果您在一个方法中多次执行此操作，则可能会导致该方法占用更少的堆栈空间，具体取决于您的编译器。如果您资源有限，您可能使用的是微控制器，并且它们的编译器并不总是像 x86 编译器那样功能齐全。

此外，如果您使用完整的类（而不是整数和浮点数）来执行此操作，它可以让您控制调用析构函数的位置。

```
class MyClass;

int main(void) {

    int foo;
    float qux;
    /* do some stuff */

    {
        MyClass bar;
        qux = some_func(bar);
    } // <-- ~MyClass() called here.

    /* continue doing some more stuff */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T03:24:27.320

在 C/C++ 的情况下，可以尝试限制名称之间的冲突（具有如此长的函数需要一个以这种方式限定变量范围是坏主意......）即，如果`bar`同一函数中有多个而不是以这种方式限定它们会让一个人确保它们不会相互碰撞/覆盖。

通常，函数内部的作用域不会影响堆栈分配大小 - 堆栈是为所有局部变量预先分配的，而与作用域无关。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-03T03:22:52.300

如果代码真的像你展示的那样，那可能毫无意义。我见过的大多数编译器在进入函数时为所有局部变量分配空间，并在退出函数时释放它。不过还有一些其他的可能性。

如果您显示的`bar`是某个类类型的对象（尤其是带有析构函数的对象），则析构函数将在退出范围时运行，即使空间直到稍后才释放。

另一种可能性是实际上有*两个*内部作用域：

```
int main() { 
// ...

    { 
        // some variables
    }

// ...

    {
        // other variables
    }
} 
```

在这种情况下，局部变量的空间将在进入 --but 时分配`main`，*并且*（`some variables`通常`other variables`）将共享相同的空间。即，分配的空间将足以容纳两者中的较大者，但不会（通常）是两者的总和，如果您在`main`'s 范围内定义了所有变量，您将使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-03T03:24:13.540

> 打算让 bar 的范围解析和任何带有 in 的变量消失，而不是让它们在整个封闭（foo 的）范围内

这可能是一个（不重要和遗留）原因。
另一个原因是将它传达给`int bar`仅在此范围内使用的读者，以具有非常小的功能（函数内部的一种功能）。之后就没有用了`bar`。

您的代码相当于：

```
 inline void Update (int &foo, float &qux)
  {
    int bar = foo * foo;
    qux = some_func(bar);
  }
  int main ()
  {
    ...
    Update(foo, qux);
    ...
  } 
```

大多数编译器会优化对`Update()`内部的调用`main()`并将其内联，这会生成类似于您发布的内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-03T03:24:35.273

它可能是为了帮助程序员，而不是优化输出，因为现代编译器肯定足够聪明，可以看到临时变量只使用一次。

另一方面，对于程序员来说，它增加了一个逻辑分离，它意味着“这些变量只需要这个代码”，也可能是“这个代码不会影响这个函数中的其他代码”。

# sql - 来自同一个表的高级 SQL SUM 列

> ID：13205615
> 
> 赞同：2
> 
> 时间：2012-11-03T03:16:08.070
> 
> 标签：sql, sum

我有这张桌子...

```
+-----+--------+------+-----+-----+
|categ| nAME   | quan |IDUNQ|   ID|
+-----+--------+------+-----+-----+
|   1 | Z      |    3 |   1 |  15 |
|   1 | A      |    3 |   2 |  16 |
|   1 | B      |    3 |   3 |  17 |
|   2 | Z      |    2 |   4 |  15 |
|   2 | A      |    2 |   5 |  16 |
|   3 | Z      |    1 |   6 |  15 |
|   3 | B      |    1 |   7 |  17 |
|   2 | Z      |    1 |   8 |  15 |
|   2 | C      |    4 |   8 |  15 |
|   1 | D      |    1 |   8 |  15 |
+-----+--------+------+-----+-----+ 
```

我需要得到*类别 1 的 Z + 类别 2 的 Z - 类别 3 的 Z*

例如，*(3+3-1) = 5 ==> 猫 1 的 3，猫 2 的 3，猫 3 的 1*

最后的结果应该是...

```
Z ==> 5
A ==> 5
B ==> 2
C ==> 4 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T03:19:58.723

注意：我假设您示例中的“C”数据被错误地省略了。

```
SELECT nAME, SUM(CASE categ WHEN 3 THEN 0-quan ELSE quan END) AS quan
FROM theTable
GROUP BY nAME 
```

[SQL小提琴](http://sqlfiddle.com/#!2/dfb35/2)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-03T03:21:22.003

```
SELECT name, SUM(quan) AS sum
FROM   tableName
GROUP BY name, categ 
```

这应该有效。

# converter - 如何在 Objective-C 中删除 unicode

> ID：13205616
> 
> 赞同：1
> 
> 时间：2012-11-03T03:16:17.043
> 
> 标签：converter

> **可能重复：**
> [替换字符串中的字母](https://stackoverflow.com/questions/10739076/replace-letters-in-a-string)

我有一些文本“anh yêu em”

我想转换成这个文本“anh yeu em”。

有谁知道在Objective-C中将此文本“anh yêu em”转换为“anh yeu em”？

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:29:51.470

您可以使用 NSString dataUsingEncoding 将越南语 unicode 字符转换为等效的 ascii 字符。

有关详细信息，请按照此 url [nsstring-unicode-to-ascii-equivalent](https://stackoverflow.com/questions/2591052/nsstring-unicode-to-ascii-equivalent)

# python - 无故改变列表值的函数

> ID：13205618
> 
> 赞同：2
> 
> 时间：2012-11-03T03:17:05.660
> 
> 标签：python, python-2.7

我对我为 python 编写的这个函数感到震惊。我观察到在较低的位置`while`它会更改列表中的值，`vctor`即使该列表没有沿函数触及。我已经通过了这对`(10, [1,3,5,7,10])`，它已将列表更改`vctor`为`[1,3,5,8,10]`. 对此有解释吗？

```
def siguiente(k,vctor):
    l = len(vctor)
    vctorsig = vctor
    i = l-1
    while i>= 0:    
        if vctorsig[i] <= k - l + i: 
            j=i
            while j<=l-1:
                print vctor
                vctorsig[j] = vctor[i]+j-i+1
                j=j+1
            i = -1
        else:
            i = i-1
    return vctorsig 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T03:19:56.250

当您这样做时`vctorsig = vctor`，您正在对`vctorsig`引用的列表进行引用`vctor`，因此当您修改它时，您会修改原始列表。

如果您想将列表复制到那里，您可以简单地执行`vctorsig = list(vctor)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T03:20:48.420

有点难以分辨，因为您的缩进很有趣，但我认为这行：

```
vctorsig = vctor 
```

是你的问题。在这一行中，您创建了对同一列表的新*引用。*换句话说，如果你改变`vctorsig`（在这一行`vctorsig[j] = vctor[i]+j-i+1`），你也会改变，`vctor`因为它们是**相同的 list**。解决这个问题的简单方法是制作副本：

```
vctorsig = vctor[:] 
```

# javascript - 向 Knockout 映射对象添加操作

> ID：13205622
> 
> 赞同：1
> 
> 时间：2012-11-03T03:17:58.693
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我正在努力向我的 Knockout Mapping 对象添加操作。

这就是我现在所处的位置 - 我正在尝试遵循[Knockout: Mapping API information](http://knockoutjs.com/documentation/plugins-mapping.html)。

这是 HTML 首先：

```
<a href="#" id="AddContact" class="add-button" type="button" data-bind="click: addContact">+ Add Contact</a>

<div id="ContactList">
    <table>
        <thead>
            <tr>
                <th>ID</th><th>Name</th><th></th>
            </tr>
        </thead>
        <tbody data-bind="foreach: $root">
            <tr>
                <td data-bind="text: ContactID"></td>
                <td data-bind="text: DisplayName"></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</div> 
```

这是我第一次尝试连接 Knockout：

```
var baseModel = {
    addContact: function() {
        alert('Woo!');
    }
};

contacts = ko.mapping.fromJS('[{"ContactID":6,"DisplayName":"Doe, John"},{"ContactID":7,"DisplayName":"Rogers, Mister"}]', { }, baseModel);
ko.applyBindings(contacts); 
```

现在，如果我从 中删除附加参数（{} 和`baseModel`）`ko.mapping.fromJS`，我的所有数据都会正确显示在表中。但是（正如所料），我收到“添加联系人”链接的绑定错误。如果我`baseModel`重新添加，单击“添加联系人”链接有效，但没有数据显示。我没有得到任何错误，所以我对那里发生的事情有点困惑。

我是 KO 的新手，所以我觉得我错过了一些非常简单的东西。我已经搜索过 StackOverflow，但是，此时，我只是插入代码以查看有效的方法，而不是真正了解这里发生了什么。有人可以提供一些额外的解释并指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:48:54.527

您正在使用`ko.mapping.fromJS`但您正在传递一个字符串，而不是一个对象/数组。使用`fromJSON`或传入一个真实的数组。

此外，您应该在 baseModel 上应用Bindings，并且联系人应该是 VM 的一个字段。然后你可以使用`foreach: contacts`而不是你的奇怪的`foreach: $root`.

请参阅这些更改：http: [//jsfiddle.net/antishok/kR4jc/3/](http://jsfiddle.net/antishok/kR4jc/3/)

**编辑**- 使用您的代码更新您的答案，以便问题可以独立存在。

JavaScript

```
var baseModel = {
    addContact: function() {
        alert('Woo!');
    }
};

baseModel.contacts = ko.mapping.fromJSON('[{"ContactID":6,"DisplayName":"Doe, John"},{"ContactID":7,"DisplayName":"Rogers, Mister"}]');

ko.applyBindings(baseModel);​ 
```

HTML

```
<a href="#" id="AddContact" class="add-button" type="button" data-bind="click: addContact">+ Add Contact</a>

<div id="ContactList">
    <table>
        <thead>
            <tr>
                <th>ID</th><th>Name</th><th></th>
            </tr>
        </thead>
        <tbody data-bind="foreach: contacts">
            <tr>
                <td data-bind="text: ContactID"></td>
                <td data-bind="text: DisplayName"></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</div>​ 
```

# java - 在单独的程序集中包含 jar-with-dependencies？

> ID：13205624
> 
> 赞同：1
> 
> 时间：2012-11-03T03:18:31.710
> 
> 标签：java, maven, maven-assembly-plugin

我正在使用 maven 程序集插件来打包可分发的 ZIP 存档。但是，我想在我的最终存档中包含一个单独的程序集 jar-with-dependencies 的结果。我怎样才能做到这一点？我意识到我可能只是手动包含 JAR，但我如何确保我的自定义程序集将在 JAR 程序集之后运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:14:47.400

您可以为此使用多模块项目：

```
parent
  |- ...
  |- jar-with-dependencies-module
  |- final-zip-module 
```

在`jar-with-dependencies`模块中，您将“uber-jar”与所有依赖项组装在一起。POM 中的构建配置应如下所示：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-assembly-plugin</artifactId>
      <version>2.3</version>
      <configuration>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
      </configuration>
      <executions>
        <execution>
          <phase>package</phase>
          <goals>
            <goal>single</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

`final-zip-module`您可以在其中添加`jar-with-dependencies`依赖项并在 ZIP 文件的程序集描述符中使用它。POM 看起来像这样：

```
<project>
  ...

  <dependencies>
    <dependency>
      <groupId>com.example</groupId>
      <artifactId>jar-with-dependencies-module</artifactId>
      <version>1.0.0-SNAPSHOT</version>
      <classifier>jar-with-dependencies</classifier>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <appendAssemblyId>false</appendAssemblyId>
          <descriptors>
            <descriptor>src/main/assembly/assembly.xml</descriptor>
          </descriptors>
        </configuration>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

程序集描述符看起来像这样：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">

  <id>final-assembly</id>
  <formats>
    <format>zip</format>
  </formats>

  <dependencySets>
    <!-- Include the jar-with-dependencies -->
    <dependencySet>
      <includes>
        <include>com.example:jar-with-dependencies-module:*:jar-with-dependencies</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <!-- Don't use transitive dependencies since they are already included in the jar -->
      <useTransitiveDependencies>false</useTransitiveDependencies>
    </dependencySet>t>
  </dependencySets>
</assembly> 
```

由于对 的依赖`jar-with-dependency-module`，maven 将`final-zip-module`始终在构建您的 uber-jar 之后构建。

# python - 恒定键输入可以不断移动精灵吗？

> ID：13205629
> 
> 赞同：1
> 
> 时间：2012-11-03T03:19:27.623
> 
> 标签：python, sprite, pygame, game-engine

如果我想根据 pygame 中的键输入移动精灵，是否有编写代码所以如果我按住一个键，精灵将继续朝那个方向移动，直到我释放键？我已经尝试过了，要么程序崩溃，要么我必须反复敲击键才能将精灵移动到预期的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:45:47.623

OP 想要 keystate 轮询，而不是`KEYDOWN`事件。

此示例显示同时使用键事件和键轮询。您将一个用于“按键按下”，另一个用于“按住时”。

```
import pygame
from pygame.locals import *

done = False    
player.pos = Rect(0,0,10,10)

while not done:
    for event in pygame.event.get():
        # any other key event input
        if event.type == QUIT:
            done = True        
        elif event.type == KEYDOWN:
            if event.key == K_ESC:
                done = True

    # get key current state
    keys = pygame.key.get_pressed()
    if keys[K_LEFT]:
        player.pos.left -= 10
    if keys[K_RIGHT]:
        player.pos.left += 10
    if keys[K_UP]:
        player.pos.top -= 10
    if keys[K_DOWN]:
        player.pos.left += 10
    if keys[K_SPACE]: 
        print 'firing gun' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:18:30.460

作为概述，

*   监听`KEYDOWN`pygame 消息队列中的事件。
*   检查您感兴趣的键是否被按下。
*   朝那个方向前进
*   检查消息队列以查找`KEYUP`与您的密钥匹配的事件。
*   别动了。

阅读有关如何实现此功能的[文档。](http://www.pygame.org/docs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:06:29.810

您通常在更新方法中使用一个移动函数，如下所示：

```
this.pos_x = direction * speed * delta 
```

现在在您的 KEYDOWN 事件中，您将方向设置为 1 或 -1，在 KEYUP 中将其设置回 0。这样您就有了一个很好的持续运动。

# c# - 服务器上的 SQL Server Express 连接字符串不起作用

> ID：13205634
> 
> 赞同：0
> 
> 时间：2012-11-03T03:20:21.490
> 
> 标签：c#, jquery, connection-string, sql-server-express

我已将我的项目上传到服务器并且一切正常，直到我尝试使用 EF “登录”或“注册”

有趣的是，在我的电脑上，我已经让它与 SQL Server Express 和 SQL Server Compact 一起工作——它只是在服务器上不起作用

在服务器上，我安装了 SQL Server Express

这是连接字符串

```
<add name="DefaultConnection"
     connectionString="data source=(localhost);Integrated Security=SSPI;
                       database=aspnet-MvcDealerConn-20121005200308;
                       AttachDBFilename=|DataDirectory|aspnet-MvcDealerConn-20121005200308.mdf;
                       User Instance=true"
     providerName="System.Data.SqlClient" /> 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:13:53.480

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！它也已被弃用 - 不要使用它！

我解决这个问题的方法是：

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`DealerConn`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=servername\\SQLEXPRESS;Database=DealerConn;User ID=SomeUser;Pwd=SecretPwd 
    ```

    其他一切都和以前**完全**一样...

由于它托管在远程服务器上，我也相信您很可能需要提供一个单独的、明确的用户名和密码（并且您不能使用该`Integrated Security=SSPI;`标签）

# php - 如何使用 php 将“伪”二进制文件写入文件？

> ID：13205635
> 
> 赞同：2
> 
> 时间：2012-11-03T03:20:26.647
> 
> 标签：php

我有一个包含“01001010”之类的字符串，我想使用二进制将它写入文件。换句话说，该文件中的内容不是字符 0/1，而是二进制格式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:44:04.133

所以你的意思是你想将一串0和1（例如`$bitString = '01010101...';`）转换成二进制数据（0x55 ...），然后将其写入文件，你需要分两步完成。

首先，将您的 0 和 1 字符串转换为二进制 - 请参阅[将 1 和 0 的字符串转换为二进制值，然后压缩，PHP](https://stackoverflow.com/questions/6641807/converting-string-of-1s-and-0s-into-binary-value-then-compress-afterwards-php)

请注意，PHP 中的字符串可以存储二进制数据。

然后只需将输出写入文件，例如使用`file_put_contents()`.

# photoshop - Photoshop 没有形状工具上的文本

> ID：13205636
> 
> 赞同：-3
> 
> 时间：2012-11-03T03:20:28.373
> 
> 标签：photoshop

我观看了本教程[文本形状工具 Photoshop 元素文本形状 infopuppet 第二部分](http://www.youtube.com/watch?annotation_id=annotation_912645&feature=iv&src_vid=C7WHfYTuIL8&v=zeGgBo7uZKI)，我看到他使用形状工具上的文本。我想使用它，但在我的 photoshop cs6 中没有形状工具上的文本。

为什么我的 Photoshop 没有“形状工具上的文本”，我该如何获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:55:17.287

创建你的形状。抓住文本工具并直接单击形状，您现在可以开始在里面输入。请记住，不要拖动文本工具，只需单击选中文本工具的形状。那应该行得通。

# java - 如何在 Grizzly 中实现多线程

> ID：13205637
> 
> 赞同：0
> 
> 时间：2012-11-03T03:20:35.627
> 
> 标签：java, multithreading, servlets, heroku, grizzly

我正在 Heroku 上实现一个 Java RESTful 网络服务。目前我的入口点看起来像

```
public class Main
{

    public static final String BASE_URI = getBaseURI();

    public static void main( String[] args ) throws Exception
    {
        final Map<String, String> initParams = new HashMap<String, String>();
        initParams.put( "com.sun.jersey.config.property.packages", "services.contracts" );
        initParams.put( "com.sun.jersey.api.json.POJOMappingFeature", "true" );

        System.out.println( "Starting grizzly..." );
        SelectorThread threadSelector =
        GrizzlyWebContainerFactory.create( BASE_URI, initParams );

        System.out.println( String.format( "Jersey started with WADL available at %sapplication.wadl.", BASE_URI,
                BASE_URI ) );
    }

    private static String getBaseURI()
    {
        return "http://localhost:" + ( System.getenv( "PORT" ) != null ? System.getenv( "PORT" ) : "9998" ) + "/";
    }

} 
```

其中`initParms`包含托管的 RESTful 服务。我知道 GrizzlyWebContainerFactory.create() 返回 ( ) 的一个实例`ServletContainer`，`SelectorThread`但是我将如何对返回的进行多线程处理`threadSelector`，以便多个`SelectorThread`'s 可以处理一个进程下的传入请求（又名 web dyno）？原因是为了提高单个测功机在处理请求时的性能。

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:34:59.090

您可以致电：

```
SelectorThread.setSelectorReadThreadsCount(int) 
```

# ruby-on-rails - What's the best to include HTML tags before text produced by link_to?

> ID：13205645
> 
> 赞同：1
> 
> 时间：2012-11-03T03:22:23.980
> 
> 标签：ruby-on-rails

basically I want the following output with `link_to`:

```
<a href="#"><i class="some-class"></i>Some text</a> 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:49:12.347

```
<%= link_to "#" do %>
  <i class="some-class"></i>Some text
<% end %> 
```

Block form of `link_to` for the win!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:52:09.317

What about [content_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag) ?

```
link_to "#{content_tag(:i, "", :class => 'some-class')}Some text".html_safe, root_url 
```

# c# - 如何在 C# WPF 项目中使用 SharpDX DirectSound 播放 .wav 文件？

> ID：13205647
> 
> 赞同：3
> 
> 时间：2012-11-03T03:22:43.107
> 
> 标签：c#, wpf, wav, directsound, sharpdx

我希望能够精确控制在我的程序中播放的 .wav 文件的时间。我还希望能够同时播放多个 .wav 文件。SoundPlayer 不够好，因为我不能同时播放两个声音，即使我连续播放不同的声音，每个声音之间也有大约 1/8 秒的延迟，这对于我正在做的事情来说是不可接受的。我找不到使用 SharpDX 添加设备的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:56:27.180

您在Sharpdx 中有一个directsound 样本，应该可以帮助您入门。

你也可以看看[NAudio](http://naudio.codeplex.com/)，它也应该符合你的需要并且更容易使用。

# php - for () 中的 mysql_fetch_array 函数出错

> ID：13205649
> 
> 赞同：0
> 
> 时间：2012-11-03T03:22:59.177
> 
> 标签：php, mysql, for-loop, syntax-error

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C ... 
```

这是代码

```
function db_result_to_array($result) {

$res_array = array();

for ($count=0; $row = mysql_fetch_array($result); $count++) { 

    $res_array[$count] = $row;
}

return $res_array;

} 
```

所以，错误就在这一行

```
 for ($count=0; $row = mysql_fetch_array($result); $count++) 
```

我试过了

```
 mysql_fetch_object()
    mysql_fetch_assoc()
    mysql_fetch_row() 
```

并没有工作

我试过了

```
 mysql_fetch_array($result, MYSQL_ASSOC)
    mysql_fetch_array($result, MYSQL_NUM)
    mysql_fetch_array($result, MYSQL_BOTH) 
```

它没有用。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:36:34.397

您应该像这样运行代码：

```
$result = mysql_query(...) or die(mysql_error());
$data = array();
while($row = mysql_fetch_assoc($result)) {
    $data[] = $row;
} 
```

几乎从不需要运行正常的 for() 循环来从结果集中获取行。到目前为止，使用 while 循环更可靠/更容易。当没有更多数据要提取时，它会自动终止，并且您不会遇到您的情况，您的循环在提取结束时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:43:37.293

`$result`应该是 sql 语句的结果，以及返回记录行的查询，例如`SELECT * From someTable`，查询必须语法正确才能获得有效结果

```
$sql = 'SELECT * FROM users'; //make sure no syntax error from generated query
$result = mysql_query($sql); //this should be a valid result [resouce id]

$recordsArray = db_result_to_array($result); //call your function with the valid result. boolean cannot be passed 
```

也按照建议将您`for`的更改为。`while`

> [**不鼓励使用 mysql_ 扩展**](http://php.net/manual/en/function.mysql-query.php)
> 
> 不鼓励使用此扩展程序。相反，应使用 MySQLi 或 PDO_MySQL 扩展...此功能的替代方案包括：
> 
> *   mysqli_query()
>     
>     
> *   PDO::查询（）

## 更新

> 来自上面发布的 MySQL 链接
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

因此，如果成功执行，您将获得有效资源，否则将获得`SELECT, SHOW, DESCRIBE, EXPLAIN`布尔值 (FALSE)。

因为`INSERT, UPDATE, DELETE, DROP`你会得到 TRUE（成功）或 FALSE（错误）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T03:38:59.063

在调用函数之前，请查看如何分配 $result 变量。分配此 $result 时使用的查询是什么？

# c++ - 识别多态对象的替代方法？

> ID：13205654
> 
> 赞同：0
> 
> 时间：2012-11-03T03:23:53.410
> 
> 标签：c++, dynamic, polymorphism

我一直在网上搜索，我似乎没有找到任何替代方法来比较两个多态对象是否是同一类型，或者多态对象是否是一种类型。这样做的原因是因为我要在我目前正在创建的游戏中实现一个实体系统。

除了使用宏或演员表（演员表不是这样做的可移植方法）之外，我还没有找到另一种方法。目前这就是我识别对象的方式，有没有更有效或更有效的方法来做到这一点？（不使用 C++ RTTI）

我把它贴在了 pastebin 上，因为把它贴在这里太麻烦了。 [http://pastebin.com/2uwrb4y2](http://pastebin.com/2uwrb4y2)

如果你仍然不明白我想要达到的目标，我会试着解释一下。游戏中的实体就像游戏内部的对象（例如玩家或敌人），它具有附加到它的组件，这些组件是实体的数据。实体系统中的系统是将游戏的数据和逻辑结合在一起的系统。

例如，如果我想在屏幕上显示一个模型，它将类似于：

```
World world; // Where all entities are contained

// create an entity from the world, and add
// some geometry that is loaded from a file
Entity* e = world.createEntity();
e->add(new GeometryComponent());
e->get<GeometryComponent>()->loadModel("my_model.obj"); // this is what I want to be able to do

world.addSystem(new RenderingSystem());

// game loop
bool isRunning = true;
while(isRunning) 
{
   pollInput();
   // etc...      

   // update the world
   world.update();
} 
```

编辑：这是一个用 Java 编程的框架，主要完成我想做的事情。 [http://gamadu.com/artemis/tutorial.html](http://gamadu.com/artemis/tutorial.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:26:20.283

见`std::is_polymorphic`。我相信boost也有。

> 如果 T 是多态类（即声明或继承至少一个虚函数的类），则提供等于 true 的成员常量值。对于任何其他类型，值为 false。

[http://en.cppreference.com/w/cpp/types/is_polymorphic](http://en.cppreference.com/w/cpp/types/is_polymorphic)

* * *

编辑：

为什么你不能在你的例子中这样做？

```
Entity* e = world.createEntity();
GemoetryComponent* gc = new GeometryComponent();
gc->loadModel("my_model.obj");
e->add(gc); 
```

在剥离类型信息之前创建结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:43:29.577

如果您决定不使用 C++ 的内置 RTTI，您可以通过从包含虚拟方法的基类派生所有类来自己重新实现它：

```
class Base {
public:
    virtual string getType() = 0;
}; 
```

然后每个派生类都需要使用返回不同字符串的版本重载此方法：

```
class Foo : public Base {
public:
    string getType() { return "Foo"; }
}; 
```

然后，您可以简单地比较调用`getType()`每个对象的结果，以确定它们是否为同一类型。`string`如果您预先知道将要创建的所有派生类，则可以使用枚举而不是 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T18:50:21.493

```
Entity* e = world.createEntity();
e->add(new GeometryComponent());
e->get<GeometryComponent>()->loadModel("my_model.obj"); 
   // this is what I want to be able to do 
```

首先很简单：所有可以添加的组件都有一个基本类型，否则您将无法添加`e->add(new GeometryComponent())`。我假设这个特定的基础至少有一个`virtual`功能，在这种情况下，简单的解决方案是实现`get`为：

```
template <typename T>
T* get() {
   return dynamic_cast<T*>(m_component); // or whatever your member is
} 
```

问题是您不想使用 RTTI，但您没有提供理由。常见的误解是 RTTI 很*慢*，如果是这种情况，请考虑分析以查看是否是您的情况。在大多数情况下， s 的缓慢`dynamic_cast<>`并不重要，因为`dynamic_cast`s 在您的程序中很少发生。如果`dynamic_cast<>`是瓶颈，您应该重构以便您不使用它，这将是最好的解决方案。

一种更快的方法，（同样，如果您在这里遇到性能瓶颈，您应该重新设计，这将使其更快，但设计仍然会被破坏）如果您只想允许获得对象的完整类型，则可以使用`typeid`测试类型是否相等并`static_cast`执行向下转换的组合：

```
template <typename T>
T* get() {
   if (typeid(*m_component)==typeid(T))
      return static_cast<T*>(m_component);
   else
      return 0;
} 
```

这是一个穷人的版本`dynamic_cast`。它会更快，但它只会让你转换为*完整*的类型（即指向的对象的实际类型，而不是它的任何中间基础）。

如果您愿意牺牲所有正确性（或者没有 RTTI：即没有虚函数），您可以`static_cast`直接执行此操作，但如果对象不是该类型，您将导致未定义的行为。

# javascript - Angularjs TypeError：未定义不是函数

> ID：13205662
> 
> 赞同：7
> 
> 时间：2012-11-03T03:25:11.113
> 
> 标签：javascript, html, angularjs, javascriptmvc

我刚刚开始弄乱 Angular js，我正在尝试通过发布操作加载数据。

我正在使用 angularjs v.1.0.2

这是我的代码： HTML：

```
<!DOCTYPE html>
<html ng-app>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
        <script src="<?php echo $baseUrl?>/js/profilling/main.js"></script>
    </head>
    <body>
        <div ng-controller="GroupsCtrl">

        </div>
    </body>
</html> 
```

主.js：

```
function GroupsCtrl($scope, $http) {
    $scope.url = '/file.php';
    $scope.images = [];

    function handleGroupsLoaded(data, status) {
        console.log(data);
    }

    $scope.fetch = function () {
        $http.post($scope.url).success($scope.handleGroupsLoaded);
    }

    $scope.fetch();
} 
```

我正在尝试关注这个 jsfiddle：http: [//jsfiddle.net/simpulton/wHL3F/](http://jsfiddle.net/simpulton/wHL3F/)

但我收到以下错误：

> TypeError: undefined is not a function at [http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:92:92](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:92:92) at i ( [http://ajax.googleapis.com/ ajax/libs/angularjs/1.0.2/angular.min.js:76:119](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:76:119)）在[http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:76:352](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:76:352) 在 Object.e.$eval ( [http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:86:220](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:86:220) ) 在 Object.e.$digest ( [http:// ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:84:198](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:84:198) ) 在 Object.e.$apply ( [http://ajax.googleapis.com/ajax/libs/angularjs/ 1.0.2/angular.min.js:86:379](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:86:379) ) 在 e ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:92:330](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:92:330) ) 在 o ( [http://ajax.googleapis.com/ajax/libs/angularjs/1.0 .2/angular.min.js:95:407](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:95:407) ) 在 XMLHttpRequest.q.onreadystatechange ( [http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:96:334](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:96:334) )

任何人都可以帮忙吗？

谢谢

**编辑** 文件.php：

```
echo '{"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}}
'; 
```

它似乎是一个有效的 json 对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T03:45:22.873

您只需要`handleGroupsLoaded()`在`$scope`

```
function GroupsCtrl($scope, $http) {
    $scope.url = '/file.php';
    $scope.images = [];

    $scope.handleGroupsLoaded = function(data, status) {
        console.log(data);
    }

    $scope.fetch = function () {
        $http.post($scope.url).success($scope.handleGroupsLoaded);
    }

    $scope.fetch();
} 
```

# java - Google App Engine 中的基于 Web 的系统

> ID：13205663
> 
> 赞同：0
> 
> 时间：2012-11-03T03:25:33.430
> 
> 标签：java, google-app-engine

用google app engine开发公司系统可以吗？该系统将仅具有简单的 CRUD 功能，并且只能由公司的客户使用。

另一种选择是用 PHP CodeIgniter 编写它。

我对 google-app-engine 更有经验。

我应该通过哪一个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:04:18.707

看看这个[产品](https://cloud.google.com/products/)给出的案例研究，这绝对可以让你清楚地了解所有前景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:24:24.077

当您可以将部分处理委派给客户端时，App Engine 非常棒。所以它更多地是为网络应用程序设计的[——RIA](http://en.wikipedia.org/wiki/Rich_Internet_application)（很容易被称为“类似谷歌的网页”）。

另一方面，PHP 是一个服务器端脚本，就像 JSP、ASP 等一样。所以你有不同的世界要处理。我的 2 美分：对于简单的 CRUD，使用最快的方法为您开发它，在这种情况下 App Engine 与您习惯的技术。

# android - Box2d libgdx 在设备上非常慢

> ID：13205667
> 
> 赞同：1
> 
> 时间：2012-11-03T03:26:57.663
> 
> 标签：android, box2d, libgdx, frame-rate

它认为，以正确的速度运行游戏需要一个时间步长，快速的硬件会将速度调整为 30 或 60 fps，否则，游戏将运行得如此之快，以至于硬件可以处理它。现在，我的游戏在 PC 上按预期运行，但是，当在设备（galaxy ace）上启动时，身体移动非常缓慢，甚至无法超过最大速度，无论 Body.AppliLinearImpulse 或 AppliForce 中的数量是多少，另外，我已将 setLinearVelocity 更改为一个非常高的数字，并且始终保持相同的速度。可能是 libgdx box2d 上的错误？或者我的galaxy ace android 2.3的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:26:19.000

您可能正在模拟 Box2D 物体，同时传入等于像素值的尺寸。然而，Box2D 以米为单位运行，因此创建 300 米大小的实体确实为您的整个模拟设置了一个较低的上限。

推荐的方法是使用任意比例（1m == 64px）并缩小您的 Box2D 系统 - 使用从 px 转换的仪表值初始化和操作主体。

这将允许更广泛的运动和更高的速度上限。和你有同样的问题，花了我一点时间来解决。

# perl - 可以用多个键检测散列吗？

> ID：13205671
> 
> 赞同：0
> 
> 时间：2012-11-02T16:38:23.887
> 
> 标签：perl

我正在收集哈希中的数据，看起来像

```
$VAR1 = {
          '502' => {
                     'user2' => '0'
                   },
          '501' => {
                     'git' => '0',
                     'fffff' => '755'
                   },
          '19197' => {
                       'user4' => '755'
                     }
        }; 
```

问题出在`501`. 可能不会出现两个键。有可能检测到这一点吗？

**更新** 修正了哈希中的错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:56:09.117

如果您只打算在主哈希的每个键下存储一个键值对，为什么不使用 2 元素数组呢？这样，您可以在每次插入之前检查是否存在，而无需检查散列的大小或知道它的键是什么。我提议的结构是这样的：

```
$VAR1 = {
    '502' => [ 'user2', '0' ],
    '501' => [ 'git', '0' ],
    '19197' => [ 'user4', '755' ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:52:33.457

假设您上面的 hashref 名为*$var*：

```
my @bad = grep { scalar keys %{$var->{$_}} > 1 } keys %$var; 
```

生成一组哈希键，其中包含多个 hashref。使用上面的数据：

```
# perl test.pl
$VAR1 = {
          '501' => {
                     'git' => '0',
                     'fffff' => '755'
                   },
          '502' => {
                     'user2' => '0'
                   },
          '19197' => {
                       'user4' => '755'
                     }
        };
$VAR1 = '501'; 
```

然后，您可以使用以下方法访问每个被检测为错误的元素：

```
foreach my $key ( @bad ) {
  # do something to or with $var->{$key}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T16:49:00.720

`keys(%{$VAR1{'501'}}) == 2`其余的将是一个。

此外，该键上的语法错误，但我认为这是一个错字。

# scala - 使用 Play 正确配置 ebean 数据源！2

> ID：13205680
> 
> 赞同：3
> 
> 时间：2012-11-03T03:29:11.967
> 
> 标签：scala, configuration, playframework, ebean

首先，我在当前的 application.conf 中设置的相关配置，实际上在[Play 的 Java/Scala Ebean 文档](http://www.playframework.org/documentation/2.0/JavaEbean)中几乎定义了：

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play"
db.default.user="sa"
db.default.password=""
ebean.default="models.*" 
```

我正在运行 Play Framework 2.0.4

在玩过 Play 之后，我为我的示例应用程序编写了几个集成测试。找到[了这个](http://digitalsanctum.com/2012/06/01/play-framework-2-tutorial-ebean-orm/)关于如何使用 Ebean 为我的模型生成 ddl 代码的好例子，并决定试一试，但似乎我的 Ebean 配置缺少一些东西。

我的代码几乎遵循上面的示例，但它是 Scala：

```
def setUp = {
    val server = Ebean.getServer("default")
    ...
    val ddl = new DdlGenerator(server.asInstaceOf[SpiEbeanServer], new H2Platform, config)
    ...
} 
```

调用`Ebean.getServer("default")`会引发此异常： `Could not create an instance of MyClassSpec caused by java.lang.RuntimeException: DataSource user is null?`

嗯，也许我错了，但我相信 db.default.* 属性已经设置了 Ebean 需要的任何东西。

我在我的应用程序和 Ebean 中也引用了相同的数据源名称（“默认”），并且我的测试代码是在`running(FakeApplication(additionalConfiguration = inMemoryDatabase("default")))`代码块中定义的。

还有什么要配置的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:35:30.703

好吧，我使它与 ebean.properties 文件一起使用，如此处[所述](http://www.avaje.org/ebean/getstarted_props.html)。

```
datasource.default=default

datasource.default.username=sa  
datasource.default.password=  
datasource.default.databaseUrl=jdbc:h2:mem:tests;DB_CLOSE_DELAY=-1  
datasource.default.databaseDriver=org.h2.Driver  
datasource.default.minConnections=1  
datasource.default.maxConnections=25  
datasource.default.heartbeatsql=select 1  
datasource.default.isolationlevel=read_committed 
```

所以我的数据库（ebean）相关配置设置在另一个文件中，实际上需要`ebeans.default="models.*"`在 application.conf 和`ebeanEnabled := true`Build.scala 中定义

希望它也可以帮助某人！

# android - 闪屏 - getActionBar().hide 仍然闪烁一秒钟

> ID：13205682
> 
> 赞同：1
> 
> 时间：2012-11-03T03:29:36.957
> 
> 标签：android, hide, android-actionbar, actionbarsherlock, visible

我正在尝试实现一个启动画面，我不想为启动画面使用新活动，

所以我在我的列表视图上设置了可见性=消失，隐藏操作栏，离开徽标可见性=可见，睡眠一段时间，然后再次显示操作栏并将列表视图可见性设置回可见

这可行，但是在开始时有一个短暂的时刻，动作栏在隐藏之前仍然可见

有没有办法解决这个问题并让操作栏从一开始就消失？

我正在使用带有 4.1 Jelly Bean 的 ActionBarSherlock 和 Galaxy S3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:25:28.887

不，如果不使用两个单独的活动，就无法做到这一点。

操作栏被初始化为装饰视图的一部分，这比您的`onCreate`方法发生得早得多。这意味着在隐藏之前会有你描述的明显滞后。如果你想永久隐藏它，你可以使用主题或窗口标志来做到这一点，但是一旦你这样做了，就无法让它出现。

# java - Java、MySQL 使用 ID（主键）更新表

> ID：13205689
> 
> 赞同：0
> 
> 时间：2012-11-03T03:30:41.323
> 
> 标签：java, mysql, sql, swing

我有一个使用 MySql 和 Java JDBC 的程序。

我的问题是：

我有一个只有 1 列的表 ( `TEMP`)`ID`和另一个包含用户个人详细信息（如 ID、姓名、年龄等）的表。

我试图`ID`从`TEMP`表中检索并更新表中未填写的信息，如姓名、年龄、地址等`USER`。

这是我写的查询：

```
update m_auth_info 
set name  = '"+name+"', 
    addr  = '"+addr+"', 
    email = '"+email+"', 
    affiliation = '"+affil+"', 
    status = '"+1+"'  
where a_id = '"+ResultSet+"'"; 
```

当我从表中`getIdMethod`检索 ID时。我无法更新TABLE。`ResultSet``TEMP``USER`

但是如果我直接给出 ID 就可以了。例如。

```
update m_auth_info 
set name = '"+name+"', 
    addr = '"+addr+"', 
    email = '"+email+"', 
    affiliation = '"+affil+"', 
    status = '"+1+"'  
where a_id = '"+8989+"'"; 
```

请告诉我是否必须写下要写在我的哪个步骤`getIdMethod`，以便将值输入`ResultSet`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:44:26.467

```
int id=0;
String sql = "Select ID from Temp";
ResultSet rs = statement.executeQuery(sql);

while(rs.next(){
   id = rs.getInt(1);
  /*   pass your update query here and use like this it should work for you
    update m_auth_info  set name  = '"+name+"',
    addr  = '"+addr+"',  email = '"+email+"', 
    affiliation = '"+affil+"', status = '"+1+"'  where a_id = '"+id+"'";*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:37:02.087

我相信你想要做的是从中得到结果`ResultSet`，你可以用`rs.getLong(0)`你的`ResultSet variable`. `getYourIdType`( `0`) 或`columnName`

# powershell - 无法在 PowerShell 中导出表格？

> ID：13205691
> 
> 赞同：-1
> 
> 时间：2012-11-03T03:30:45.117
> 
> 标签：powershell

好的，到目前为止，关于 PowerShell 的一切都非常棒，但是对于非常棒的东西，它们确实使将结果导出到文件变得非常复杂。无论如何，如何将`Export $Results`变量保存到分隔文件中，以便可以将其导入[Excel](http://en.wikipedia.org/wiki/Microsoft_Excel)？

### 最终脚本

```
[cmdletbinding()]

[cmdletbinding()]
param(
    [parameter(ValueFromPipeline=$true,ValueFromPipelineByPropertyName=$true)]
    [string[]]$ComputerName = "HellBombs-PC"
)

begin {
    $UninstallRegKey="SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall"
}

process {
    foreach($Computer in $ComputerName) {
        Write-Verbose "Working on $Computer"
        if(Test-Connection -ComputerName $Computer -Count 1 -ea 0) {
            $HKLM   = [microsoft.win32.registrykey]::OpenRemoteBaseKey('LocalMachine',$computer)
            $UninstallRef  = $HKLM.OpenSubKey($UninstallRegKey)
            $Applications = $UninstallRef.GetSubKeyNames()

            foreach ($App in $Applications) {
                $AppRegistryKey  = $UninstallRegKey + "\\" + $App
                $AppDetails   = $HKLM.OpenSubKey($AppRegistryKey)
                $AppGUID   = $App
                $AppDisplayName  = $($AppDetails.GetValue("DisplayName"))
                $AppVersion   = $($AppDetails.GetValue("DisplayVersion"))
                $AppPublisher  = $($AppDetails.GetValue("Publisher"))
                $AppInstalledDate = $($AppDetails.GetValue("InstallDate"))
                $AppUninstall  = $($AppDetails.GetValue("UninstallString"))
                if(!$AppDisplayName) {
                    continue
                }
                $OutputObj = New-Object -TypeName PSobject
                $OutputObj | Add-Member -MemberType NoteProperty -Name ComputerName -Value $Computer.ToUpper()
                $OutputObj | Add-Member -MemberType NoteProperty -Name AppName -Value $AppDisplayName
                $OutputObj | Add-Member -MemberType NoteProperty -Name AppVersion -Value $AppVersion
                $OutputObj | Add-Member -MemberType NoteProperty -Name AppVendor -Value $AppPublisher
                $OutputObj | Add-Member -MemberType NoteProperty -Name InstalledDate -Value $AppInstalledDate
                $OutputObj | Add-Member -MemberType NoteProperty -Name UninstallKey -Value $AppUninstall
                $OutputObj | Add-Member -MemberType NoteProperty -Name AppGUID -Value $AppGUID
                $Result += @($OutputObj)
            }
        }
    }
    $Result | select -Property * | export-csv -notypeinformation -path Info.txt
}

end {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:59:13.690

使用[export-csv](http://technet.microsoft.com/en-us/library/dd347724.aspx)。

尝试：

```
$Result | select -Property * | export-csv -notypeinformation -append -path .\test.txt 
```

# java - 用向量计算日期之间的天数差异

> ID：13205696
> 
> 赞同：0
> 
> 时间：2012-11-03T03:31:48.433
> 
> 标签：java, date, random, vector, datediff

基于帖子[计算日期之间的天数差异](https://stackoverflow.com/questions/13205060/calculating-difference-in-days-between-dates)

如何为向量 vE 和 vS 提供随机日期，然后返回日期之间的差异？回想一下 vS 必须大于 vE 吗？实际上，我应该分成两种方法：随机日期和其他计算差异。

```
/*
 * Randomizacao
 */
package random04DiferencaDataVetor;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Random;

public class Random04DiferencaDataVetor {

    public static void main(String[] args) throws ParseException {

        final long intervalo = 1000000000;
        Random rnd = new Random();
        String[] vE = new String[5];
        String[] vS = new String[5];
        for (int i = 0; i < vE.length; i++) {
            /*
             * arrumar vetores para gerar datas aleatorias
             * lembrando que vS deve ser maior que vE
             */
            retornaData();
        }
    }

    static void retornaData() throws ParseException {
        final long intervalo = 1000000000;
        Random rnd = new Random();
        // formatando as datas
        DateFormat formato = new SimpleDateFormat("yyyy");
        Date anoE = formato.parse("2012");
        long timeE = anoE.getTime();
        Date anoS = formato.parse("2013");
        long timeS = anoS.getTime();
        // define o intervalo de datas em 1 ano
        long tempoIntervalo = timeE - timeS;
        // randomiza a data de entrada
        long rndTempoE = timeE + (long) (rnd.nextDouble() * tempoIntervalo);
        // data entrada
        String dataE = new SimpleDateFormat("hh:mm dd/MM/yyyy").format(rndTempoE);
        // randomiza a data de saida
        long rndTempoS = rndTempoE + (long) (rnd.nextDouble() * intervalo * 2);
        // data de saida
        String dataS = new SimpleDateFormat("hh:mm dd/MM/yyyy").format(rndTempoS);
        // formato de data
        SimpleDateFormat sdf = new SimpleDateFormat("hh:mm dd/MM/yyyy");
        try {
            Date dataEnt = sdf.parse(dataE);
            Date dataSaida = sdf.parse(dataS);
            long differenceMilliSeconds = dataSaida.getTime() - dataEnt.getTime();
            long days = differenceMilliSeconds / 1000 / 60 / 60 / 24;
            long hours = (differenceMilliSeconds % (1000 * 60 * 60 * 24)) / 1000 / 60 / 60;
            long minutes = (differenceMilliSeconds % (1000 * 60 * 60)) / 1000 / 60;
            System.out.println(days + " days, " + hours + " hours, " + minutes + " minutes.");
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T03:39:53.537

1.  您已声明`Array`不是`Vector`. 你可以使用如下的`Vector声明：

    ```
     Vector<String> vE = new Vector<String>();
     Vector<String> vS = new Vector<String>(); 
    ```

    但是您可能希望使用以下`List/ArrayList`代替`Vector`：

    ```
     List<String> vE = new ArrayList<String>();
     List<String> vS = new ArrayList<String>(); 
    ```

2.  要在向量中添加日期字符串，您可以使用`add`以下方法：

    ```
     String dateString1 = "01/01/2012";
     vE.add(dateString1); 
    ```

3.  要为您的 Vector 添加 5 个日期`vE`，您可以执行以下操作：

    ```
     for (int i = 0; i < 5; i++) {
        int day = 1+ rnd.nextInt(28); //day from 1 to 28
        int month = 1+rnd.nextInt(12); //day from 1 to 12
        int year = 2000 +rnd.nextInt(13); //year from 2000 to 2012
        String dateString = month+"/"+day+"/"year;
        vE.add(dateString);
     } 
    ```

4.  您可能希望`vE`在`retornaData();`方法中传递 Vector 来计算差异：

    ```
     //call in `main` method  outside the `for` loop as:
         retornaData(vE);

         //change method signature as 
         static void retornaData(Vector<String> vE) throws ParseException { 
    ```

5.  在内部`retornaData()`，您可能想要检索两个日期字符串并计算差异：

    ```
     String date1 = vE.get(0);//use some index
        String date2 = vE.get(1); //use some index

         //compute the difference between date1 and date2 
    ```

如果您可以在示例程序中使用英语，我可能会尝试建议进一步的更正/改进。

# google-chrome - 如何跟踪和操作来自我的网络浏览器使用情况的数据？

> ID：13205701
> 
> 赞同：-1
> 
> 时间：2012-11-03T03:33:00.653
> 
> 标签：google-chrome, browser

我无法像我想的那样具体地回答这个问题，但我会尽力遵守 SO 准则。

我需要创建一些方法来从我的 google chrome 浏览器收集和处理一些非常基本的数据。具体来说，我需要跟踪我访问的页面 url，并根据访问时间顺序将它们自动记录在层次结构中。因此：

如果我访问 url 1，然后是 url 2，然后是 url 3，然后返回到 url 2，然后从那里导航到 url 4，

我想制作一个程序，将 url 1 记录为父级，将 url 2 作为其子级，将 url 3/4 作为 url 2 的子级。

我认为制作起来很简单，但我对这件事没有经验，所以希望能找到一个正确方向的指针。我是制作小程序，还是扩展程序，还是使用 api？

具体来说，我想这样做是为了提高我的学习能力——我认为，如果我可以在浏览维基百科时跟踪我查看的数据/页面的结构/关系，它将帮助我更好地全面掌握概念。

我知道这不是一个非常具体的问题，因此我只是问我应该从哪个一般领域开始，这将使我有能力做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:31:45.990

Chrome 将历史记录存储在 SQLite 数据库中（我相信 Firefox 也是如此）。

SQLite 具有多种语言的绑定，因此它应该相当容易阅读和处理。

# javascript - clearTimeout 函数在打开时无法在对话框上正常工作

> ID：13205703
> 
> 赞同：-1
> 
> 时间：2012-11-03T03:33:55.667
> 
> 标签：javascript, jquery

在这里我附上了我的代码。我在对话框打开时清除超时功能。但它无法正常工作。当我打开对话框时，倒计时从 20 开始减少，但如果我关闭并打开对话框，则在 20 秒之间，时间正在相互崩溃。

```
function(){
    var time =20;
    flag = false;       
    clearTimeout(startTimer);       
    startTimer = function(){            
        if(!flag){              
            var finTime = time - 1;
            time = finTime;             
            setTimeout(startTimer,1000);                
            if(time==0){                    
                flag = true;        }               
            $("#input").text(time);             
         } else {                
             clearTimeout(startTimer,1000);                          
         } 
    };

    setTimeout(startTimer,1000);

}; 
```

我也试过这段代码

```
dialogOpen = function(){

    $("#dialog").dialog('open');

    startTimer();
    stopTimer();
}

startTimer = function() {

    time = 20;      
    flag = false;       
    setTimeout(startTime, 1000);
};

stopTimer = function() {

    flag = true;        
    time = 0;       
    clearTimeout(startTime);
};

startTime = function(){

    if(!flag){

        var finTime = time - 1;

        time = finTime;         

        setTimeout(startTime,1000);

        if(time==0){                
            flag = true;
        }
        $("#input").text(time);         
     } else {            
         clearTimeout(Time);                         
     } 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:46:18.043

您必须分配`setTimeout`给一个变量

```
var timer;    
timer = setTimeout(startTimer,1000); 
```

您可以通过传递变量来清除`setTimeout`使用。`clearTimeout`

```
clearTimeout(timer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:47:08.797

要调用`clearTimeout()`你想传入`intervalVariable`由返回的`setTimeout()`，而不是函数，所以它看起来像：

```
var intervalVariable = setTimeout(startTimer,1000);
clearTimeout(intervalVariable); 
```

最好是`intervalVariable`作为超时的 ID，然后浏览器使用它来取消它。

在您的函数之前设置一个全局变量`startTimer`，然后将其设置为 return of`setTimeout()`并使用它来代替`startTimer`in `clearTimeout()`。

# ruby-on-rails - 如何循环运行方法？

> ID：13205704
> 
> 赞同：0
> 
> 时间：2012-11-03T03:34:13.600
> 
> 标签：ruby-on-rails, ruby, loops, background

我有一个项目需要在循环和后台运行方法。

基本上我有一个方法：调用Web服务→读取数据→存储到数据库中→一遍又一遍地循环。

我发现[了一个名为“loops”的宝石](https://github.com/kovyrin/loops)，但可能有两个问题：

1.  我不知道他们是否支持 Rails 3 & Ruby 1.9.3 和

2.  似乎没有任何支持（上次提交是半年前）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:37:10.337

Ruby 有一个循环结构。

`loop { puts "hi" }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:46:24.600

您可以从 rake 任务调用该方法，然后从命令行使用`nohup`.

例子：

在`lib/tasks/fetch_data.rake`

```
task :fetch_and_save => :environment do
  loop do
    Model.method() # Do whatever you need to do here
  end
end 
```

然后，您可以使用`$ nohup rake fetch_and_save`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:13:49.080

开发一个简单的循环程序，例如：

```
loop do
  data = read_data_from_web_service
  store_data_to_db(data)
end 
```

中配置脚本`upstart`。您可以`foreman`为此使用 gem。`foreman`否则，您可以`upstart`根据自己的方便直接使用。检查[链接](http://michaelvanrooijen.com/articles/2011/06/08-managing-and-monitoring-your-ruby-application-with-foreman-and-upstart/)

或者你可以使用一些工具`monit`来监控脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T23:07:04.103

如果我理解正确，您的目标是让代码在后台无休止地循环。

以下是您需要的部分：

```
loop do <code> end 
```

将在当前线程中不间断地循环<code>

```
mythread = Thread.new(<args>) do |<args>| <code> end
mythread.run 
```

将在另一个线程（后台，也称为异步）中运行 <code> 并将 <args> 传递给它，就好像它是一个函数一样。

你想要做的是在一个线程内循环 <code> 。所以......（假设你想通过

```
myloop = lambda do loop do <code> end end
mythread = Thread.new(myloop) do |loop| loop.call end
mythread.run 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T05:08:49.890

您可以使用[每当](https://github.com/javan/whenever)宝石。通过这个宝石很容易做这种工作。

甚至还有关于这个主题的免费[railscast 。](http://railscasts.com/episodes/164-cron-in-ruby)

创建一个 rake 任务，调用您的方法进行循环。（请参阅其他答案如何做到这一点）。

然后你可以创建一个时间表，上面写着，`every 1.minute`就像这样。

# java - Android 点击背景并放大

> ID：13205705
> 
> 赞同：-2
> 
> 时间：2012-11-03T03:34:26.897
> 
> 标签：java, android

> **可能重复：**
> [如何点击适合所有手机的某个位置？](https://stackoverflow.com/questions/13204999/how-to-click-at-a-certain-location-that-fits-for-all-phones)

所以基本上我想要它，所以我点击我的某个区域，当我点击它时，它会放大背景图片中的某个区域

![在此处输入图像描述](../Images/daef210d6eb2ce8e921d3c0b5556e983.png)

这是我的形象

基本上，如果您单击操场，它将放大该区域。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:49:41.423

我可以简单地建议类[GestureDetector](http://developer.android.com/reference/android/view/GestureDetector.html)和[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)吗？

# osx-lion - gnuplot x11 和 OSX 10.8.2

> ID：13205706
> 
> 赞同：5
> 
> 时间：2012-11-03T03:34:44.293
> 
> 标签：osx-lion, gnuplot, x11

我正在尝试将 gnuplot 与 OSX 10.8.2 一起使用，并看到 x11 是`ambiguous or unknown terminal type`. `x11`不支持一些研究表明，我下载`XQartz`了，但我仍然收到相同的错误消息。

我编辑 .bash_profile ，然后按照[这里](http://bl.anthonysutardja.com/post/28024250835/mountain-lion-x11-and-gnuplot)的建议`export GNUTERM = 'x11'`尝试`ln -sf /Application/Utilities/XQuartz.app/ X11.app`

但仍然是相同的错误消息。我还能尝试绘制我的`gnuplot`文件（无论是在我的笔记本电脑上还是从服务器上）？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T21:13:45.243

在我安装了 XQuartz 之后，通过重建 Gnuplot 解决了这个问题。

# fortran - 使用 fortran 代码解包数据

> ID：13205707
> 
> 赞同：1
> 
> 时间：2012-11-03T03:34:44.840
> 
> 标签：fortran

我是一名研究生，正在尝试使用 NOAA 提供的大气数据文件。我有一个读取数据但只写入前四列数据的代码。我知道代码末尾的子程序会解包数据。我在想，如果我取出条件语句，那么它可能会写入整个数据。但这不起作用。我需要开发此代码，以便它写入整个数据文件，而不仅仅是前四个元素。任何帮助表示赞赏。代码如下所示：

```
 PROGRAM CHK_DATA

    !-------------------------------------------------------------------------------
    ! Simple program to dump the first few elements of the data array for each
    ! record of an ARL packed meteorological file. Used for diagnostic testing.
    ! Created: 23 Nov 1999 (RRD)
    !          14 Dec 2000 (RRD) - fortran90 upgrade
    !          18 Oct 2001 (RRD) - expanded grid domain
    !          03 Jun 2008 (RRD) - embedded blanks
    !-------------------------------------------------------------------------------

      REAL,          ALLOCATABLE :: RDATA(:,:)   
      CHARACTER(1),  ALLOCATABLE :: CPACK(:)

      CHARACTER(4)               :: KVAR, MODEL 
      CHARACTER(50)              :: LABEL          
      CHARACTER(80)              :: FDIR, FILE
      CHARACTER(3072)            :: HEADER
      LOGICAL                    :: FTEST

    !-------------------------------------------------------------------------------
      INTERFACE
      SUBROUTINE UNPACK(CPACK,RDATA,NX,NY,NEXP,VAR1)
      CHARACTER(1),INTENT(IN)  :: CPACK(:)  
      REAL,        INTENT(OUT) :: RDATA(:,:)   
      INTEGER,     INTENT(IN)  :: NX,NY,NEXP
      REAL,        INTENT(IN)  :: VAR1
      END SUBROUTINE
      END INTERFACE
    !-------------------------------------------------------------------------------

    ! directory and file name
      WRITE(*,*)'Enter directory name:'
      READ(*,'(a)')FDIR
      FDIR=ADJUSTL(FDIR)
      WRITE(*,*)'Enter file name:'
      READ(*,'(a)')FILE
      FILE=ADJUSTL(FILE)

    ! test for meteo file existence
      KLEN=LEN_TRIM(FDIR)
      INQUIRE(FILE=FDIR(1:KLEN)//FILE,EXIST=FTEST)
      IF(.NOT.FTEST)THEN
         WRITE(*,*)'Unable to find file: ',FILE
         WRITE(*,*)'On local directory : ',FDIR(1:KLEN)
         STOP
      END IF

    ! open file to decode the standard label (50) plus the
    ! fixed portion (108) of the extended header
      OPEN(10,FILE=FDIR(1:KLEN)//FILE,RECL=158,ACCESS='DIRECT',FORM='UNFORMATTED')

    ! decode the standard portion of the index record
      READ(10,REC=1)LABEL,HEADER(1:108)
      READ(LABEL,'(5I2,4X,A4)')IYR,IMO,IDA,IHR,IFC,KVAR
      WRITE(*,'(A,4I5)')'Opened file       : ',IYR,IMO,IDA,IHR

      IF(KVAR.NE.'INDX')THEN
         WRITE(*,*)'WARNING Old format meteo data grid'
         WRITE(*,*)LABEL
         WRITE(*,*)HEADER(1:108)
         STOP
      END IF

    ! decode extended portion of the header
      READ(HEADER(1:108),'(A4,I3,I2,12F7.0,3I3,I2,I4)',ERR=900)                    &
             MODEL,    ICX,       MN,                                              &
             POLE_LAT, POLE_LON,  REF_LAT,                                         &
             REF_LON,  SIZE,      ORIENT,                                          &
             TANG_LAT, SYNC_XP,   SYNC_YP,                                         &
             SYNC_LAT, SYNC_LON,  DUMMY,                                           &
             NX,       NY,        NZ,                                              &
             K_FLAG,   LENH

    ! close file and reopen with proper length
      CLOSE (10)
      NXY = NX*NY
      LEN = NXY+50
      OPEN(10,FILE=FDIR(1:KLEN)//FILE,RECL=LEN,ACCESS='DIRECT',FORM='UNFORMATTED')

    ! print file diagnostic
      WRITE(*,'(A,4I5)')'Grid size and lrec: ',NX,NY,NXY,LEN
      WRITE(*,'(A,I5)') 'Header record size: ',LENH

    ! allocate array space
      ALLOCATE (RDATA(NX,NY), STAT=KRET)   
      ALLOCATE (CPACK(NXY),   STAT=KRET)

    ! read entire file and print headers
      KREC=1
    100 READ(10,REC=KREC,ERR=800)LABEL,(CPACK(K),K=1,NXY)
        READ(LABEL,'(6I2,2X,A4,I4,2E14.7)',ERR=900) IY,IM,ID,IH,IF,KL,  &
                                                 KVAR,NEXP,PREC,VAR1

        WRITE(*,'(A)')LABEL
        IF(KVAR.NE.'INDX') CALL UNPACK(CPACK,RDATA,NX,NY,NEXP,VAR1)

        READ(*,*,END=800)
        KREC=KREC+1
      GO TO 100

    800 STOP

    900 WRITE(*,*)'ERROR: decoding header'
        WRITE(*,*)LABEL
        WRITE(*,*)HEADER(1:108)

    END PROGRAM chk_data

!-------------------------------------------------------------------------------

SUBROUTINE UNPACK(CPACK,RDATA,NX,NY,NEXP,VAR1)

  CHARACTER(1),INTENT(IN)  :: CPACK(:)  
  REAL,        INTENT(OUT) :: RDATA(:,:)   
  INTEGER,     INTENT(IN)  :: NX,NY,NEXP
  REAL,        INTENT(IN)  :: VAR1

! only required when dealing with F95 compilers
! replace ICHAR below with internally defined JCHAR function
! CHARACTER MYCHR*1
! JCHAR(MYCHR)=IAND(ICHAR(MYCHR),255)

  SCALE=2.0**(7-NEXP)
  VOLD=VAR1
  INDX=0
  DO J=1,NY
     DO I=1,NX
        INDX=INDX+1
        RDATA(I,J)=(ICHAR(CPACK(INDX))-127.)/SCALE+VOLD
        VOLD=RDATA(I,J)
        IF(I.LE.2.AND.J.LE.2)  &
           WRITE(*,'(3I5,E12.4)')J,I,ICHAR(CPACK(INDX)),RDATA(I,J)
        IF(I.GE.(NX-1).AND.J.GE.(NY-1))  &
           WRITE(*,'(3I5,E12.4)')J,I,ICHAR(CPACK(INDX)),RDATA(I,J)
     END DO
     VOLD=RDATA(1,J)
  END DO

END SUBROUTINE unpack 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:02:00.920

你注意到评论了吗

```
! only required when dealing with F95 compilers
! replace ICHAR below with internally defined JCHAR function
! CHARACTER MYCHR*1
! JCHAR(MYCHR)=IAND(ICHAR(MYCHR),255) 
```

尝试取消注释定义，并将调用更改`CHAR`为调用`JCHAR`。

`ICHAR`是 Fortran 中的一个内在函数，其行为与代码预期的不同。这一切似乎都很可疑，因为`JCHAR`256 以下的数字没有任何作用。

为了进一步移植考虑使用`IMPLICIT NONE`和模块。

**---编辑**--

现在我看到了你的条件。如果你删除

如果（I.LE.2.AND.J.LE.2）&

和

IF(I.GE.(NX-1).AND.J.GE.(NY-1)) &

代码到底是做什么的？我们没有数据。

（我知道，您下载程序的页面上有很多数据文件，但我不会为您完成所有工作，对不起。）

您找不到在任何地方处理数据的完整代码吗？

# python - 读取多行文件

> ID：13205712
> 
> 赞同：0
> 
> 时间：2012-11-03T03:37:12.100
> 
> 标签：python, regex, python-2.7

我正在开发一个 python 应用程序来为脚本（ish）视觉小说框架创建一个界面。现在，我能够读取文件、创建*标签*或函数，但是当我读取它们时，它只读取一行。有点像这样：

```
>>> from freddie import Freddie
>>> check = Freddie()
>>> check.read_script('script')
>>> check.read_label('start')
'label start:\n' # Only reads the first line and the whitespace 
```

整个标签是：

```
label start:

    test "Lorem ipsum"

    test "Sir amet"

return 
```

我的功能是：

```
def read_label(self, label):
    search_label = re.search("label %s(.*)\s" % label, self.scripts.read(), re.MULTILINE)
    return search_label.group() 
```

有没有办法让正则表达式读取整个标签和空格？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:26:38.627

正`.`则表达式中的通常匹配*除*“\n”之外的任何字符，因此正则表达式仅匹配第一行（`\s`匹配该行末尾的“\n”）。

如果要`.`匹配任何字符，*包括*“\n”，请使用`DOTALL`标志。

# c# - 如何在我新序列化的 BsonDocument 中包含 ObjectId？

> ID：13205713
> 
> 赞同：0
> 
> 时间：2012-11-03T03:37:54.773
> 
> 标签：c#, mongodb

给定一段json：

```
var _json = {MachineType: 'Sentient', Processor: 'Xalim', _id: '5094886393178c2970710e0c'} 
```

怎么打电话

```
var doc = BsonSerializer.Deserialize<BsonDocument>(_json); 
```

以这样的方式生成的文档**附加了 id**吗？到目前为止，我已经尝试了上述方法，并且每个新文档都使用新 id 保存，并带有一个额外的 '_id' 属性。

我知道 mongo shell 中的这种结构，但是在 c# 中构造 BsonDocument 时该怎么做？

```
_id: ObjectId('5094886393178c2970710e0c') 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:41:18.893

哎呀！这是我的错误。*我最初发布的 json 序列化到 BsonDocument 时，**确实**使用匹配的`_id`*. 这是我实际上试图保存的内容：

```
{ System: { _id: '5094886393178c2970710e0c', MachineType: 'Sentient', Processor: 'Xalim' }} 
```

这当然不会保存回原始对象`_id`，因为它不是**父**对象（在本例中为`system`）的属性。一旦我`_id`回到父级，数据库中的所有内容都会按我的预期更新。

# asp.net - 具有未知高度的 ASP.NET Gridview 的 DIV 背景

> ID：13205718
> 
> 赞同：0
> 
> 时间：2012-11-03T03:39:07.937
> 
> 标签：asp.net, css, gridview

我有两个 DIV，它们都是浮动的，一个在左侧，一个在右侧，它们都嵌套在另一个 DIV（父级）中，两者都居中。浮动的左/右 DIV 具有未知数量的记录的 ASP.NET Gridview。因此垂直高度是未知的。有没有人建议解决父 DIV 的背景颜色？整个页面包含在没有白色背景的母版页中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:29:23.173

尝试将您的父 div 更改为底部：0，顶部：0。将其定位为绝对（如果可能）。这样它会填充它的父元素并呈现为 white=> 我认为这是你想要的？

# facebook - facebook graph api 中的 /me/feed 将 wallpost 的第一条评论作为单独的状态条目

> ID：13205721
> 
> 赞同：1
> 
> 时间：2012-11-03T03:39:59.400
> 
> 标签：facebook, facebook-graph-api

当使用*/me/feed*获取我的提要时，似乎我墙上其他用户的帖子的第一条评论在提要中再次表示为独立的状态条目（也有不同的 id）本身。

它看起来像以下 JSON 输出。列表的第一个条目显然是从列表的第二个条目的第一个注释生成的。

我无法重现该问题，我评论过的墙上的另一篇文章结果正常（= 第一条评论没有重复条目）

这是 Facebook 本身的错误还是有人可以解释这种行为？

```
[
{
  "id": "someID_4300357461829", 
  "from": {
    "name": "user1", 
    "id": "someID"
  }, 
  "story": "\"na oida\" on user2's post on your wall.", 
  "story_tags": {
    "13": [
      {
        "id": "someID2", 
        "name": "user2", 
        "offset": 13, 
        "length": 15, 
        "type": "user"
      }
    ]
  }, 
  "type": "status", 
  "created_time": "2012-11-03T01:41:15+0000", 
  "updated_time": "2012-11-03T01:41:15+0000", 
  "comments": {
    "count": 0
  }
}, 
{
  "id": "someID_4300356661809", 
  "from": {
    "name": "user2", 
    "id": "someID2"
  }, 
  "to": {
    "data": [
      {
        "name": "user1", 
        "id": "someID"
      }
    ]
  }, 
  "message": "hi!", 
  "actions": [
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/someID/posts/4300356661809"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/someID/posts/4300356661809"
    }
  ], 
  "type": "status", 
  "created_time": "2012-11-03T01:40:54+0000", 
  "updated_time": "2012-11-03T01:45:21+0000", 
  "comments": {
    "data": [
      {
        "id": "someID_4300356661809_4479943", 
        "from": {
          "name": "user1", 
          "id": "someID"
        }, 
        "message": "na oida", 
        "created_time": "2012-11-03T01:41:15+0000"
      }, 
      {
        "id": "someID_4300356661809_4479949", 
        "from": {
          "name": "user1", 
          "id": "someID"
        }, 
        "message": "interesting", 
        "created_time": "2012-11-03T01:42:31+0000"
      }, 
      {
        "id": "someID_4300356661809_4479956", 
        "from": {
          "name": "user1", 
          "id": "someID"
        }, 
        "message": "another one", 
        "created_time": "2012-11-03T01:44:40+0000"
      }, 
      {
        "id": "someID_4300356661809_4479959", 
        "from": {
          "name": "user2", 
          "id": "someID3"
        }, 
        "message": "spam", 
        "created_time": "2012-11-03T01:45:21+0000"
      }
    ], 
    "count": 4
  }
}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T18:01:14.987

以防万一您没有意识到，那些“错误”的帖子中没有任何动作，因此您可以过滤正确的帖子，只检查是否存在动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T13:00:26.610

我有同样的问题。我已经向 facebook 提交了一个错误。投票 - [https://developers.facebook.com/bugs/483624361705934](https://developers.facebook.com/bugs/483624361705934)

# java - 在 Java 和 Leiningen 之间夹入 Clojure

> ID：13205723
> 
> 赞同：5
> 
> 时间：2012-11-03T03:40:38.860
> 
> 标签：java, clojure, interop, leiningen, clojure-java-interop

对于一个类，我需要编写一些 JVM 代码，我希望使用 Clojure。我让它与软件堆栈的底部一起工作，但我无法让它在位于顶部和底部的 GUI 层之间工作。我的主要问题是让 Java GUI 识别我的 Clojure 文件。我想为此使用 Leiningen，但 Java 编译解决方案似乎没有考虑这种互操作性。[这里](https://stackoverflow.com/questions/9336202/leiningen-compiling-error-with-java-files-that-reference-classes-generated-from?answertab=active#tab-top)的答案似乎正是我所需要的。我不明白将代码放在哪里等（只是不够详细）。有没有人有任何提示？

我尝试制作一个[插件](https://github.com/krwenholz/java-sandwich)，但它似乎不起作用。我知道我的案例肯定处于问题的边缘，但一个解决方案将使在课堂环境中使用 Clojure 变得更加容易。

谢谢！

更多细节：

使用已编译的 Clojure jar 时我运气不佳。我需要创建一个（呃）有状态的 Clojure 类（即方法不能是静态的）。我的课程（src/final_project/MyLinkLayer.clj）的代码看起来像

```
(ns final_project.MyLinkLayer
  (:gen-class))

(defn -init[s] (print s))
(defn -send [dest data len] (println data))
(defn -recv [trans] (println trans))
(defn -status [] (println "I am a status!"))
(defn -command [cmd value] (println (str cmd " with value=" value))) 
```

我的 project.clj 是

```
(defproject final_project "0.1.0-SNAPSHOT"
  :description "A simulated MAC layer."
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [local/classFiles "1"]]
  :aot [final_project.MyLinkLayer]) 
```

该类编译（“lein compile”）很好地进入“target/classes/final_project/”，但方法没有出现。我可以通过 jar 加载类（在我的项目导入包的顶部 Java 部分中使用 Maven 工作得很好）。我什至用 Eclipse 检查了 .class 文件，生成的唯一方法是来自 Object 的方法。有什么想法吗？另外，一旦我真正进入 Clojure 课程的“有状态”部分，有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:14:18.737

当我编写同时使用 Clojure 和 Java 的项目时，我通常使用 Maven 而不是 Leiningen - 原因很简单，大多数 Java 工具（例如 Eclipse）目前对 Maven 的理解比对 Leiningen 的理解要好。

这是我用于多语言 Clojure/Java 项目的示例 pom.xml：

*   [https://github.com/mikera/clojure-pom/blob/master/pom.xml](https://github.com/mikera/clojure-pom/blob/master/pom.xml)

注意关键特性：

*   用于`clojure-maven-plugin`
*   将 Clojure 源目录配置为资源 - 这确保 .clj 文件被视为资源，捆绑在生成的任何 .jar 文件中，并且可以在运行时动态加载（这可能会解决您在 Java 失败时看到的问题识别您的 .clj 文件）
*   包含 clojars.org 作为存储库 - 对于严肃的 Clojure 开发非常重要！

# google-apps-script - 二维子数组索引谷歌脚本

> ID：13205724
> 
> 赞同：3
> 
> 时间：2012-11-03T03:40:53.527
> 
> 标签：google-apps-script, google-sheets

我在使用应用脚本的谷歌电子表格中有二维数组问题。

我知道要让代码最快，我应该尽可能少地使用 get 和 set 函数。所以我试图先将整张纸读入二维数组，然后再引用其中的一部分。除了我不确定如何在二维数组中引用它。

这是我到目前为止所做的。

```
var ss = SpreadsheetApp.getActiveSpreadsheet()
var COMPANYIOSheet=ss.getSheetByName("Sheet1"); 
var IO_array= COMPANYIOSheet.getRange("A1:c10").getValues(); 
```

我想做类似的事情：

```
var subarray=IO_array[3:5][1]; 
```

但这不起作用。我似乎只能参考一点，即：

```
var subarray=IO_array[3][1]; 
```

我如何切片成一个子二维数组？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:40:57.753

> 我如何切片成一个子二维数组？

通过使用[`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice). ;-)

```
var subarray=IO_array.slice(2, 5); 
```

然后就可以参考了`subarray[i][1]`。如果您需要创建一个只有“第二列”的新数组，则需要使用一些迭代。

* * *

编辑：添加到 Serge 的添加中，并回复您的评论，这是从数组返回 2D 子数组的一般方法：

```
function slice2d(array, rowIndex, colIndex, numRows, numCols) {
  var result = [];
  for (var i = rowIndex; i < (rowIndex + numRows); i++) {
    result.push(array[i].slice(colIndex, colIndex + numCols));
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T23:19:32.817

作为对亚当回答的补充，在您的示例`IO_array[0]`中是第 1 行，`IO_array[1]`第 2 行等......，它们中的每一个都是一维数组。所以“行”很容易管理。

至于列，正如 Adam 建议的那样，您必须进行迭代，这是一个可能的示例：

```
var col = new Array()
for(i=0;i<IO_array.length;++i){
  col.push(IO_array[i][0] ;// taking index 0 means I'll get column A of each row and put it in the new array
} 
```

希望两个答案都足够清楚;）

# scala - Scala 是否有与 ML 的“as”构造等效的语句？

> ID：13205726
> 
> 赞同：9
> 
> 时间：2012-11-03T03:41:12.457
> 
> 标签：scala, pattern-matching, sml

在 ML 中，可以为匹配模式的每个元素指定名称：

```
fun findPair n nil = NONE
| findPair n (head as (n1, _))::rest =
    if n = n1 then (SOME head) else (findPair n rest) 
```

在这段代码中，我为列表的第一对定义了一个别名并匹配这对的内容。Scala中是否有等效的构造？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T05:17:19.883

您可以使用符号进行[变量绑定，例如：](http://www.artima.com/pins1ed/case-classes-and-pattern-matching.html#sec:var-binding)`@`

```
scala> val wholeList @ List(x, _*) = List(1,2,3)
wholeList: List[Int] = List(1, 2, 3)
x: Int = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:01:49.687

我相信您稍后会得到更完整的答案，因为我不确定如何像您的示例一样递归地编写它，但也许这种变化对您有用：

```
scala> val pairs = List((1, "a"), (2, "b"), (3, "c"))
pairs: List[(Int, String)] = List((1,a), (2,b), (3,c))

scala> val n = 2
n: Int = 2

scala> pairs find {e => e._1 == n}
res0: Option[(Int, String)] = Some((2,b)) 
```

* * *

好的，下次尝试直接翻译。这个怎么样？

```
scala> def findPair[A, B](n: A, p: List[Tuple2[A, B]]): Option[Tuple2[A, B]] = p match {
     | case Nil => None
     | case head::rest if head._1 == n => Some(head)
     | case _::rest => findPair(n, rest)
     | }
findPair: [A, B](n: A, p: List[(A, B)])Option[(A, B)] 
```

# python - 使用 ttk.Treeview，我怎样才能让水平滚动按预期工作？

> ID：13205727
> 
> 赞同：4
> 
> 时间：2012-11-03T03:41:23.323
> 
> 标签：python, treeview, scrollbar, ttk

使用这个 Python 脚本，这是我第一次尝试学习如何`ttk.Treeview`工作（自动滚动的额外副本只是为了拆分水平和垂直回调）：

```
import Tkinter as tk
import ttk

class Test():
def __init__(self, parent=None):
    self.win = tk.Toplevel()
    self.win.grid_columnconfigure(0, weight=1)
    self.win.grid_rowconfigure(0, weight=1)     

    self.treeFrame = ttk.LabelFrame(self.win, text='Test Scrolling tk.Treeview')
    self.treeFrame.grid(row=0, column=0, padx=5, pady=5, sticky='nsew')
    self.treeFrame.grid_columnconfigure(0, weight=1)
    self.treeFrame.rowconfigure(0, weight=1)

    def autoscrollv(sbar, first, last):
        print 'vert first:%s, last:%s' % (first,last)
        first, last = float(first), float(last)
        if first <= 0 and last >= 1:
            sbar.grid_remove()
        else:
            sbar.grid()
        sbar.set(first, last)

    def autoscrollh(sbar, first, last):
        print 'horz first:%s, last:%s' % (first,last)           
        first, last = float(first), float(last)
        if first <= 0 and last >= 1:
            sbar.grid_remove()
        else:
            sbar.grid()
        sbar.set(first, last)

    vsb = ttk.Scrollbar(self.treeFrame, orient="vertical")
    hsb = ttk.Scrollbar(self.treeFrame, orient="horizontal")

    self.tree = ttk.Treeview(self.treeFrame, height=10, 
                             yscrollcommand=lambda f, l: autoscrollv(vsb, f, l), 
                             xscrollcommand=lambda f, l: autoscrollh(hsb, f, l))  
    self.tree.column("#0", minwidth=400, stretch=True)

    vsb['command'] = self.tree.yview
    hsb['command'] = self.tree.xview

    self.tree.grid(row=0, column=0, sticky='nsew')
    vsb.grid(column=1, row=0, sticky='ns')
    hsb.grid(column=0, row=1, sticky='ew')

    self.tree.insert('', 'end', 'xyz', text='abc'*20)
    for i in range(30):
        self.tree.insert('xyz', 'end', text='%s' % i + 'xyz'*40)

    self.win.mainloop()

if __name__ == "__main__":
    test = Test() 
```

我看到以下行为：当我第一次运行程序时，输出如下所示： ![初始状态](../Images/760e9bc5411eec08ab374b4ab728846e.png).

如果我展开窗口直到水平滚动条关闭，它看起来像这样：![最后只是去 1.0](../Images/8b2c2d2f56ca6cdbe66507b06bfc7df6.png)

如果我继续展开窗口，这里是显示的所有文本： ![封闭项目宽度](../Images/006e9594ec76da45059588256a38ce89.png)

我的第一个问题是，我怎样才能`xscrollcommand`识别文本的实际宽度，而不是使用 for 的值`minwidth`？

回到第二张图片中的状态，如果我打开该项目，它会变成这样：![向上滚动](../Images/5938c00a319afde87be32c2e4079eb7a.png)

我的第二个问题与第一个问题几乎相同。打开后如何让它识别项目的新宽度？

如果我更改`minwidth=400`为`width=400`，水平滚动条永远不会出现。

总结：虽然垂直滚动条按我的预期工作并对正在显示的实际文本行做出反应（而不是`ttk.Treeview`高度的设置），但水平滚动条似乎只关心`minwidth`. 我想过使用类似下面的东西，特别是如果有`ttk`主题小部件的等价物。但是，在填充树后，设置`minwidth`不会生效，尽管我可以在那时更改宽度的值。有没有办法强制改变`minwidth`？

```
minwidth=tkFont.Font().measure(text)
self.tree.column('#0', minwidth=tcw) 
```

对不起，额外的窗口；Tkinter 的那部分让我无休止地困惑......

# php - 插入外部 html 内容 HTML5 兼容的最佳方式？php vs HTML5 vs javascript方法

> ID：13205729
> 
> 赞同：0
> 
> 时间：2012-11-03T03:41:57.610
> 
> 标签：php, javascript, performance, html

我知道这对你们大师来说可能看起来很简单，但我一直在寻找一个多小时无济于事......

目标：为我的所有网页使用单个页脚文件和菜单文件。考虑到阻塞、速度等。我的菜单内容是纯html/css，我的页脚内容是纯html/css。最佳解决方案会根据注入的内容而改变吗？例如，如果涉及视频、jscript 等。

两部分问题：1）哪种方法是最佳的？某种 php 包括、使用标签、使用 jscript 等。 2) 这在保持 HTML 5 标准的情况下有多精确？即为了使 php 方法起作用，我的调用网页是否需要是 .php，然后这是否使 HTML5 标准成为一个有争议的问题？例如，如果我想将footer.php 注入index.html，我的索引文件是否也必须是.php？同样对于标签，外部文件可以是 .html 文件（我不喜欢使用 .css 调用重新加载所有标头信息的想法）还是应该是 .php？

在 index.html 文件中，我尝试了以下内容：

```
<object id="footerArea" width="100%" height="20%" 
  type="text/html" data="footer.html">
</object> 
```

和

```
<?php include 'footer.php' ?> 
```

这些似乎都不适合我。

如果您想知道...这是我尝试注入示例数据的页脚代码，以使其更短且更易于阅读：

```
<div class="footer box">
<p class="f-right t-right">
 <a href="#">www.mysite.com</a><br />
  Address: Medford, OR<br />
  Phone: (541) 555-5555
</p>

<p class="f-left">
 Copyright &copy;&nbsp;2011 <a href="#">My Name</a><br />
</p>

<p class="f-left" style="margin-left:20px;">
 <a href="http://sampleurl.com" target="_blank">
  <img style="border:0;width:88px;height:31px"
   src="http://sampleurl.com"
   alt="Valid CSS3!" />
 </a>
</p>

<p class="f-left" style="margin-left:20px;">
 <a href="http://sampleurl" target="_blank">
 <img src="http://sample.png" width="228" height="50" alt="sample alt" title="sample title">
 </a>
</p>
</div> 
```

请原谅我的格式。我仍然是在论坛上发布代码的新手。我已经尽力了 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:47:39.337

您在 url 中看到的文件名的扩展名与下载该文件时浏览器将如何处理该文件完全**无关。**这一切都归结为`Content-type`文件随附的标题。网站管理员可以简单地配置他们的服务器以将所有`.exe`文件视为纯 HTML 页面。他们还可以告诉网络服务器`.html`通过 PHP 解析器运行页面。事实上，使用“现代” SEO 优化的 url，您几乎不会看到文件扩展名。这一切都会像`example.com/some/wonky/path`，不是`example.com/page.php?id=wonky`。

PHP 已经构建和输出页面的事实也与 HTML 合规性无关。归结为浏览器接收到的页面是否符合标准。所有标签都正确关闭了吗？属性定义正确？标签正确嵌套？等等等等等等。

如果您已正确构建代码，则输出的 html 将具有正确的结构并且是有效的 html。如果它不是有效的 html，那不是 PHP 的错——那是你把不能产生正确输出的代码放在一起的错。

**唯一可能与URL**中的文件扩展名相关的情况是网络服务器输出通用内容类型，例如“application/octet-stream”。浏览器可以使用可检测的文件扩展名来猜测内容的类型并尝试对其进行处理。但这不能保证也不可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:56:18.853

这就是[PHP 包含](http://php.net/manual/en/function.include.php)的样子：

```
<?php include 'footer.php'?> 
```

据我所知，您在问题中的代码是将字符串“footer.php”分配给变量`include`。[但是，您是否考虑过使用Smarty 之](http://www.smarty.net/)类的东西，而不是滚动您自己的模板系统？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T02:31:44.277

如果调用的代码像一个固定的页脚，你可能想要创建你想要的简单页脚，然后包括：

```
<?php
readfile("yourfile.htm");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:07:06.097

像下面这样的东西应该做你想做的事：

**索引.php**

```
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <!-- other css, scripts etc -->
  </head>
  <body>
    <!-- your main content here -->
    <?php include 'footer.html' ?>
  </body>
</html> 
```

**页脚.html**

```
<div class="footer box">
  <!-- your footer content here -->
</div> 
```

当您在浏览器中加载 index.php 并“查看源代码”时，您应该会看到上面显示的内容，但`<?php include "footer.html" ?>`应该将其替换为文件“footer.html”中的内容。

*当您通过网络浏览器查看源代码时，您不*应该看到 php 代码本身。如果您确实在“查看源代码”中看到 php 代码，这表明您的服务器未配置为正确运行 php。

* * *

对于从浏览器加载内容并且不使用 php 的替代方法，我将向您指出[这个相关的问题和答案](https://stackoverflow.com/questions/5125254/jquery-replace-div-contents-with-html-from-an-external-file-full-example/5125319#5125319)。

# java - m2Eclipse 插件：“解决工作区工件”有什么作用？

> ID：13205734
> 
> 赞同：39
> 
> 时间：2012-11-03T03:42:45.113
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

如果我问的是一个可能微不足道的问题，我很抱歉，但是我很难使用 M2Eclipse 插件在 Eclipse IDE 的 Maven 构建窗口中找出*Resolve Workspace Artifacts的确切功能。*我指的是这个：

![我的 Maven 运行配置屏幕的图片](../Images/c4c07578da23124796a28c639daf0f4b.png)

有谁有想法吗？我尝试了 google-ing 和 stackoverflow-ing 解决方案；有很多错误请求/报告，但没有对此选项的明确描述。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-03T04:08:17.640

假设您的工作区中有两个或更多项目，例如`project1`，`project2`等等。if`project1`依赖于`project2`and `project3`，你只需要定义`project1`on `project2`and的依赖关系`project3`。

通过启用`Resolve Workspace Artifacts`,`m2Eclipse`将自动构建`SNAPSHOT JAR`of`project2`并`project3`在类路径中添加`project1`.

**换句话说，它解决了与工作区项目的依赖关系。**

# mysql - 来自mysql的多属性查询

> ID：13205736
> 
> 赞同：0
> 
> 时间：2012-11-03T03:43:24.397
> 
> 标签：mysql, sql, phpmyadmin, pivot

我在这里有一个问题......我有3张这样的桌子......

顾客

```
idCustomer | namaCustomer | email   | noTelp 
__________________________________________________
1          |  Wawan       | a@a.com | 08985623895 
```

属性

```
idAttribute | Name   | publish
______________________________
1           | Gender |  Y
2           | Hobby  |  Y
3           | Job    |  Y
4           | Mission|  N 
```

客户属性

```
idCustomer  |  idAttribute   | value 
_____________________________________
1           |   1            | Male
1           |   2            | Hacking
1           |   3            | IT Support 
```

问题是.. 如果我想从这 3 个表中获取查询并得到这样的结果，应该使用什么查询语句

```
idCustomer | namaCustomer | email   | noTelp      | Gender  | Hobby   | Job
___________________________________________________________________________________
1          |  Wawan       | a@a.com | 08985623895 | Male    | Hacking | IT Support 
```

所以表列是从客户属性数据中添加的，但在此之前我们必须查看属性表，该属性是否已发布（查找发布值）

任何人都可以在这里帮助我？？？

非常感谢之前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:49:24.877

试试这个：

```
SELECT
  c.idCustomer,
  c.namaCustomer,
  c.email,
  c.noTelp, 
  MAX(CASE WHEN a.Name = 'Gender' THEN ca.value END) AS 'Gender',
  MAX(CASE WHEN a.Name = 'Hobby'  THEN ca.value END) AS 'Hobby',
  MAX(CASE WHEN a.Name = 'Job'    THEN ca.value END) AS 'Job'
FROM Customerattribute ca
INNER JOIN attribute a ON ca.idAttribute = a.idAttribute
INNER JOIN Customer c ON c.idCustomer = ca.idCustomer
GROUP BY ca.idCustomer 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/8a408/7)

但是，为了将来将此查询用于新属性，您必须像这样动态地执行此操作：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''',
      a.Name, ''', ca.value, NULL)) AS ',
      a.Name )
  ) INTO @sql
FROM Customerattribute ca
INNER JOIN attribute a ON ca.idAttribute = a.idAttribute
INNER JOIN Customer c ON c.idCustomer = ca.idCustomer
WHERE a.publish = 'Y';

SET @sql = CONCAT('SELECT  c.idCustomer,  c.namaCustomer, '
  ' c.email, c.noTelp, ', @sql, ' FROM Customerattribute ca',
 ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', 
' INNER JOIN Customer c ON c.idCustomer = ca.idCustomer',
' GROUP BY c.idCustomer');

SELECT @sql;

prepare stmt 
FROM @sql;

execute stmt; 
```

## [动态小提琴演示](http://sqlfiddle.com/#!2/8a408/29)

# c++ - 队列的并发访问问题（多个生产者和消费者） - C++，Boost

> ID：13205740
> 
> 赞同：2
> 
> 时间：2012-11-03T03:44:41.300
> 
> 标签：c++, boost, concurrency, producer-consumer

我正在编写一个具有事件队列的应用程序。我的意图是以这样一种方式创建它，即多个线程可以写入并且一个线程可以从队列中读取，并将弹出元素的处理交给另一个线程，以便后续再次弹出不会被阻塞。我使用锁和条件变量从队列中推送和弹出项目：

```
void Publisher::popEvent(boost::shared_ptr<Event>& event) {

    boost::mutex::scoped_lock lock(queueMutex);
    while(eventQueue.empty())
    {
        queueConditionVariable.wait(lock);
    }
    event = eventQueue.front();
    eventQueue.pop();
    lock.unlock(); 
}

void Publisher::pushEvent(boost::shared_ptr<Event> event) {

    boost::mutex::scoped_lock lock(queueMutex);
    eventQueue.push(event);
    lock.unlock();
    queueConditionVariable.notify_one();

} 
```

在 Publisher 类的构造函数中（仅创建一个实例），我正在启动一个线程，该线程将遍历一个循环，直到捕获 notify_one()，然后启动另一个线程来处理从队列中弹出的事件：

在构造函数中：

```
publishthreadGroup = boost::shared_ptr<boost::thread_group> (new boost::thread_group());
publishthreadGroup->create_thread(boost::bind(queueProcessor, this)); 
```

队列处理器方法：

```
void queueProcessor(Publisher* agent) {

while(true) {
    boost::shared_ptr<Event> event;
    agent->getEvent(event);
    agent->publishthreadGroup->create_thread(boost::bind(dispatcher, agent, event));

    }
} 
```

在dispatcher方法中，完成相关处理，将处理后的信息通过thrift发布到服务器。在程序存在之前调用的另一个方法中，即在主线程中，我调用 join_all() 以便主线程等待线程完成。

在这个实现中，在为调度程序创建线程之后，在上面的while循环中，我遇到了死锁/挂起。运行代码似乎卡住了。这个实现有什么问题？有没有更清洁、更好的方法来做我想做的事情？（多个生产者和一个消费者线程遍历队列并将元素的处理移交给不同的线程）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:05:16.150

似乎该`queueProcessor`函数将永远运行，而运行它的线程将永远不会退出。由该函数创建的任何线程都将完成它们的工作并退出，但是这个线程——在其中创建的第一个线程——`publishthreadGroup`有一个`while(true)`无法停止的循环。因此，调用`join_all()`将永远等待。您可以创建一些其他标志变量来触发该函数退出循环并返回吗？这应该够了吧！

# cuda - 如何在 CUDA 中指定全局设备变量的对齐方式

> ID：13205742
> 
> 赞同：3
> 
> 时间：2012-11-03T03:45:13.150
> 
> 标签：cuda, nvcc

我想在 CUDA 中声明全局设备变量的对齐方式。具体来说，我有一个字符串声明，就像 `__device__ char str1 = "some pre-defined string";` 在普通 gcc 中一样，我可以向编译器请求对齐 `__device__ char str1 __attribute__ ((aligned (4))) = "some pre-defined string";`

但是，当我在 nvcc 上尝试此操作时，编译器会忽略这些请求。我想这样做的原因是将这些字符串复制到我的内核中的缓冲区中，并且一次复制单词比一次复制字节要快得多，尽管它们需要对齐 src 字符串。谁能告诉我如何从 nvcc 编译器请求对齐？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T05:24:15.620

请参阅“CUDA C 编程指南”的第 5.3.2 节“大小和对齐要求”，可在[此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html)找到：

char、short、int、long、longlong、float、double 等内置类型自动满足对齐要求，如 float2 或 float4。

对于结构，大小和对齐要求可以由编译器使用对齐说明符`__align__(8)`或`__align__(16)`.

示例用法：

```
struct __align__(8) { 
    float r; 
    float i;
} complex_num; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:27:26.103

你能检查这是否有效吗？

```
__device__ char __align__(4) str1 = "some pre-defined string"; 
```

# node.js - 如何在 node.js 的单个进程中同步对文件的访问？

> ID：13205744
> 
> 赞同：6
> 
> 时间：2012-11-03T03:45:49.617
> 
> 标签：node.js, synchronization, fs, flock

我有一个 Web 服务器，可以读取和写入磁盘上的数据文件。我希望仅在单个 Web 请求中写入文件。

这是一个说明我的问题的示例程序。它在“/tmp/rw.txt”中保存一个状态文件，并在每次 Web 命中时递增整数内容。运行这个程序，然后运行类似的东西`ab -n 10000 -c 1000 http://localhost:3000/`，表明多次命中从文件中读取了相同的值，并且多次写入。

注意：我知道 flock() 和[fs-ext](https://github.com/baudehlo/node-fs-ext)。但是，flock() 会将文件锁定到当前进程；因为这里的所有访问都在同一个进程中，flock() 不起作用（并且使这个例子相当复杂）。

另请注意，我通常会使用 express、async 等来完成大部分工作；只是为了举例而坚持基础。

```
var http = require("http"),
    fs = require("fs");

var stateFile = "/tmp/rw.txt";

var server = http.createServer(function(req, res) {

    var writeNum = function(num) {
        var ns = num.toString(10);
        console.log("Writing " + ns);
        fs.writeFile(stateFile, ns, function(err) {
            if (err) {
                res.writeHead(500, {"Content-Type": "text/plain"});
                res.end(err.message);
            } else {
                res.writeHead(200, {"Content-Type": "text/plain"});
                res.end(ns);
            }
        });
    };

    switch (req.url) {
    case "/reset":
        writeNum(0);
        break;
    case "/":
        fs.readFile(stateFile, function(err, data) {
            if (err && err.code == "ENOENT") {
                // First time, set it to zero
                writeNum(0);
            } else if (err) {
                res.writeHead(500, {"Content-Type": "text/plain"});
                res.end(err.message);
            } else {
                writeNum(parseInt(data, 10) + 1);
            }
        });
        break;
    default:
        res.writeHead(404, {"Content-Type": "text/plain"});
        res.end("No such resource: " + req.url);
    }
});

server.listen(3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:15:32.843

将数据存储在文件中并不是 Web 服务器等多用户环境中的首选方式。数据库更适合于此。但如果你真的想坚持使用文件，我建议使用缓冲区。也就是说，您写入/读取的内存对象，以及定期将其内容转储到磁盘的单独函数，如下所示：

```
var server = http.createServer(function(req, res) {
    ----- cut ----
    switch (req.url) {
        case "/reset":
            value = 0;
            break;
        case "/":
            value ++;
            break;
        default:
            res.writeHead(404, {"Content-Type": "text/plain"});
            res.end("No such resource: " + req.url);
        }
    }
    ----- cut ----
}

(function() {
    var cb = arguments.callee;
    fs.writeFile(stateFile, value, function(err) {
        // handle error
        setTimeout(cb, 100); // schedule next call
    });
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:40:43.440

另一种方法是创建一个处理队列（如果你的问题背后有一些东西，所以你不接受简单的解决方案;））是创建一个处理队列。下面是一个简单的队列模式，它按照请求提交的顺序执行请求，并在函数执行后向提供的回调返回错误（如果有）。

```
var Queue = function(fn) {
  var queue = [];
  var processingFn = fn;

  var iterator = function(callback) {
      return function(err) {
        queue.shift();  // remove processed value
        callback(err);

        var next = queue[0];
        if(next)
          processingFn(next.arg, iterator(next.cb));
    };
  }

  this.emit = function(obj, callback) {
    var empty = !queue.length;
    queue.push({ arg: obj, cb: callback});

    if(empty) { // start processing
      processingFn(obj, iterator(callback));
    }
  }
}

function writeNum(inc, continueCb) {
  fs.readFile(stateFile, function(err, data) {
    if(err)
      return continueCb(err);

    var value = data || 0;
    fs.writeFile(stateFile, value + inc, function(err) {
      continueCb(err);
    });
  });
}

var writer = new Queue(writeNum);

// on each request
writer.emit(1, function(err) {
  if(err) {
    // respond with error
  }
  else {
    // value written
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T19:31:13.783

我找不到一个可以满足我要求的库，所以我在这里创建了一个：

[https://npmjs.org/package/schlock](https://npmjs.org/package/schlock)

这是上面使用读/写锁定的示例程序。我还使用“Step”使整个内容更具可读性。

```
var http = require("http"),
    fs = require("fs"),
    Schlock = require("schlock"),
    Step = require("step");

var stateFile = "/tmp/rw.txt";

var schlock = new Schlock();

var server = http.createServer(function(req, res) {

    var num;

    Step(
        function() {
            schlock.writeLock(stateFile, this);
        },
        function(err) {
            if (err) throw err;
            fs.readFile(stateFile, this);
        },
        function(err, data) {
            if (err && err.code == "ENOENT") {
                num = 0;
            } else if (err) {
                throw err;
            } else {
                num = parseInt(data, 10) + 1;
            }
            fs.writeFile(stateFile, num.toString(10), this);
        },
        function(err) {
            if (err) throw err;
            schlock.writeUnlock(stateFile, this);
        },
        function(err) {
            if (err) {
                res.writeHead(500, {"Content-Type": "text/plain"});
                res.end(err.message);
            } else {
                res.writeHead(200, {"Content-Type": "text/plain"});
                res.end(num.toString(10));
            }
        }
    );
});

server.listen(3000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T04:16:17.793

您可以使用[fs.writeFileSync](http://nodejs.org/api/fs.html#fs_fs_writefilesync_filename_data_encoding)和 readFileSync。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T14:52:39.213

我刚刚找到的一种解决方案`npm search`是储物柜服务器：[https](https://github.com/bobrik/locker) ://github.com/bobrik/locker 。

我认为这是一个很好的解决问题的方法，它是关于我如何设计它。

最大的问题是它处理需要单独服务器的一般情况（使用资源的多个进程）。

我仍在寻找一个做同样事情的进程内解决方案。

# algorithm - 对暂停最少的垃圾收集算法感兴趣，愿意牺牲空间

> ID：13205747
> 
> 赞同：1
> 
> 时间：2012-11-03T03:46:11.857
> 
> 标签：algorithm, garbage-collection

我对设计一种用于进行音频合成的方案风格很感兴趣，但我非常关心在满足音频所需的低延迟时进行适当的垃圾收集。我想知道该领域的人是否能够向我指出可能适合这种环境的垃圾收集算法。我正在研究实时垃圾收集，这似乎是有道理的，因为我想限制垃圾收集器花费的时间，这样我就不会在音频中暂停......虽然也许一个收集器只是“足够快”并很好地分配其工作是否足够好？我一点也不担心多线程/多处理，而且我绝对不担心浪费大量空间来寻找这些目标。我追求的是可预测的，简单的，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:37:04.057

在类 Unix 操作系统的单进程设置中，我听说过一种有趣的方法。[（它是为Nickle](http://nickle.org/)实验实现的，但我不知道它是否被合并到 master 。）

它使用了一个简单的标记清除收集器，但诀窍在于：当您想要运行标记阶段时，`fork()`. 子进程运行标记，并通过管道将要释放的对象列表发送回父进程，父进程可以在闲暇时逐步释放它们。

这是因为子进程在父内存状态的写时复制快照中运行，由操作系统的内存管理器在硬件 MMU 的帮助下以合理的效率维护。一旦一个对象变得不可访问，它就不会再次被引用，因此从旧快照中标记总是给出可以释放的对象的保守估计。

* * *

编辑：我能为这项工作找到的最佳参考是代码之夏提案：[http ://web.cecs.pdx.edu/~juenglin/revamping.html](http://web.cecs.pdx.edu/~juenglin/revamping.html)

# javascript - 在鼠标悬停时显示 d3.layout.force 链接工具提示

> ID：13205751
> 
> 赞同：6
> 
> 时间：2012-11-03T03:46:48.430
> 
> 标签：javascript, d3.js, hyperlink, tooltip, force-layout

如何在鼠标悬停时为有`D3`向图布局中的链接实现工具提示？我正在调整`D3`force 示例，因此使用如下代码设置节点工具提示很简单：

```
 node.append("title")
        .text(function(n) {
            return n.id;
        }); 
```

使用链接尝试类似的技术并没有导致鼠标悬停在工具提示上：

```
 var link = svg.selectAll("line.link")
        .data(json.links)
        .enter().append("line")
        .attr("class", "link")
        .style("stroke-width", function(d) {
            return 4;
        });

link.append("title")
    .text(function(n) {
            return n.info;
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:32:05.967

[您可以在此 Google Groups 主题“在 d3.svg.line 上单击或移动鼠标时显示价值”](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/gHzOj91X2NA)中找到 Mike Bostock 建议的不同解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:31:08.450

我认为您正在寻找的是这两个答案的组合：

[d3js：_on()_ 不会将当前数据对象发送到 onmouse 函数](https://stackoverflow.com/questions/13053649/d3js-on-doesnt-send-the-current-datum-object-to-the-onmouse-function/13076450#13076450)

和

[向使用 svg 路径生成的条形图添加工具提示](https://stackoverflow.com/questions/13195540/adding-tooltip-to-bar-chart-generated-using-svg-path/13277508#13277508)

两者都有你可以玩的jsFiddles。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:09:45.630

如上所示设置链接标题确实会导致鼠标悬停在工具提示上——如果您让鼠标悬停在链接的任何部分上几秒钟。

# objective-c - UITableViewController 文件

> ID：13205752
> 
> 赞同：1
> 
> 时间：2012-11-03T03:47:00.167
> 
> 标签：objective-c, uitableview

完全按照教程，我创建了扩展 UITableViewController 的文件。问题是他的 uitableviewcontroller.m 文件充满了预先编写的代码（如 viewDidLoad），而我的完全空白！我们的 uitableviewcontroller.h 文件都有代码

```
#import <UIKit/UIKit.h>

@interface ChemTable : UITableViewController
@property (strong,nonatomic)NSMutableArray *Chemarray;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:11:49.953

出于学习目的，自动生成的方法使用最少（即使您将其删除也完全可以）。即使您可以在没有它们的情况下创建应用程序......“viewDidLoad”是加载视图时运行的一种非常必要的方法，但是当您使用真正的应用程序时，您肯定会使用一些自动生成的方法。

额外 --> 我想你也应该看到这个： ViewDidLoad - 当你创建类并从 xib 加载时调用。非常适合初始设置和一次性工作

```
ViewWillAppear - Called right before your view appears, good for hiding/showing fields or any operations that you want to happen every time before the view is visible. Because you might be going back and forth between views, this will be called every time your view is about to appear on the screen

ViewDidAppear - Called after the view appears - great place to start an animations or the loading of external data from an API.

ViewWill/DidDisappear - Same idea as the WillAppear.

ViewDidUnload/Dispose - Available to you, but usually not necessary in Monotouch. In objective-c, this is where you do your cleanup and release of stuff, but this is handled automatically so not much you really need to do here. 
```

# android - Database.com 移动应用程序授权问题

> ID：13205754
> 
> 赞同：1
> 
> 时间：2012-11-03T03:47:35.753
> 
> 标签：android, ios, rest, salesforce, force.com

我正在开发一个适用于 Android 和 iOS 的移动应用程序（在这两种情况下都是原生的），它将在幕后使用 Database.com 作为数据库。我需要这种集成对用户来说是透明的。该应用程序的用户根本不会登录或使用 Database.com 进行身份验证，它应该只是在云数据库的幕后工作。我将简单地使用硬编码到应用程序中的集成用户。

我一直很难找到任何关于如何使用 MobileSDK 构建应用程序的示例，而我不必利用向应用程序用户显示视图的用户代理 OAuth 流。zkSforce 已被提及为 iOS 的一种可能的解决方案（看起来它可能是），但我什至还没有找到任何关于如何与移动 sdk 结合使用以访问 REST API 的基本教程（通过绕过用户的登录视图）。除了利用标准 Java SDK 或导入 Web 服务 wsdl 并从那里通过 SOAP 工作之外，我还没有找到任何适用于 Android 的东西。

那么有没有人可以直接指出一些幕后身份验证和使用 Mobile SDK REST 方法的示例，或者是我在幕后使用 SOAP 解决方案的最佳选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:23:08.503

查看[OAuth 2.0 Username-Password Flow](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_username_password_flow.htm)，它允许您将已知的用户名和密码与 OAuth 样式的流程一起使用。这比在其他地方使用 REST API 的应用程序中进行 SOAP 调用更可取。

# nginx - 在 nginx 主机上收到 502 bad gateway 错误

> ID：13205757
> 
> 赞同：2
> 
> 时间：2012-11-03T03:47:52.650
> 
> 标签：nginx, hosting

在尝试验证 twitter 和 facebook 时，我的主机出现错误。我在身份验证成功页面中收到此错误。

## 502错误的网关

nginx

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:56:56.107

您可以通过添加检查错误日志以查看 nginx 抛出 502 错误的原因

`error_log logs/error.log`到`nginx.conf`.

然后重新启动 nginx 并在`tail -f logs/error.log`尝试进行身份验证时查看日志文件。

# emacs - 禁用 Emacs 文本缩放

> ID：13205758
> 
> 赞同：2
> 
> 时间：2012-11-03T03:47:55.097
> 
> 标签：emacs

是否可以在 Emacs 中禁用文本缩放？每当我反转撤消方向 (Cx C--) 时，文本大小都会减小。我在 Ubuntu 12.04 上使用 Emacs 24 和 Prelude

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:08:08.920

除了@xfq 的回答之外，您还可以通过取消设置初始化文件或 .emacs 文件（位于 ~/.emacs）中的键来关闭缩放。

```
(global-unset-key (kbd "C-x C--")) 
```

（*请记住，您可以* `M-x load-file .emacs` *在完成编辑后*重新加载文件而无需重新启动 emacs ）

您可以通过键入来阅读有关这些命令的更多信息`C-h f text-scale-adjust RET`。text-scale-adjust 绑定到`C-x C-0`，并重置由`C-x C--`或执行的任何缩放`C-x C-+`，如该页面中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:59:21.987

尝试***Cx C-0 0***。它可以将默认面高重置为全局默认值。

# c# - 连接两个 Windows 运行时缓冲区的最佳方法是什么？

> ID：13205759
> 
> 赞同：12
> 
> 时间：2012-11-03T03:48:50.353
> 
> 标签：c#, windows-runtime

我编写了以下扩展方法来连接 Windows 运行时应用程序中的两个 IBuffer 对象：

```
public static IBuffer Concat(this IBuffer buffer1, IBuffer buffer2)
{
    var capacity = (int) (buffer1.Length + buffer2.Length);
    var result = WindowsRuntimeBuffer.Create(capacity);
    buffer1.CopyTo(result);
    buffer2.CopyTo(0, result, buffer1.Length, buffer2.Length);
    return result;
} 
```

这是处理这个问题的最有效方法吗？有没有更好或更简单的方法？

我已经回顾了[在 C# 中组合两个或多个字节数组的最佳方法，](https://stackoverflow.com/questions/415291/best-way-to-combine-two-or-more-byte-arrays-in-c-sharp)但我认为我不应该在字节数组之间进行转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:04:15.153

根据 MSDN：

> 实现[IBuffer](http://msdn.microsoft.com/en-us/library/hh438362%28v=VS.85%29.aspx)接口时，必须实现[IBufferByteAccess](http://msdn.microsoft.com/en-us/library/hh846267%28v=vs.85%29.aspx)接口，这是一个直接访问缓冲区的COM接口。C++ 调用者使用此接口来避免制作缓冲区的副本。

`IBufferByteAccess`有以下方法：

```
HRESULT Buffer(
  [out]  byte **value
); 
```

如果你用 C++ 编写，你可以使用这个接口来促进有效地实现数据复制。但是，[`class System.Runtime.InteropServices.WindowsRuntime.WindowsRuntimeBufferExtensions`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.windowsruntime.windowsruntimebufferextensions.aspx)您在方法中使用的 也是在本机代码中实现的，因此它几乎可以肯定地利用`IBufferByteAccess`接口。从托管代码调用方法`WindowsRuntimeBufferExtensions.CopyTo`应该与在本机代码中实现其等效方法并调用该实现一样快（除非自定义实现会做较少的验证）。

# php - 自定义扩展名中的 magento mysql 设置文件

> ID：13205764
> 
> 赞同：-1
> 
> 时间：2012-11-03T03:49:36.230
> 
> 标签：php, mysql, magento

我在magento中有一个扩展，安装后可以正常工作，但是当我通过删除数据库中的core_resource来重置/重新启动扩展时（因为我添加了更多属性，仅在重新加载扩展时才显示的功能）我已经使用了之前的技术用于另一个模块并且工作正常但是这个扩展给了我一个错误

所以我在整个网站上遇到了巨大的错误，所以我检查了 var/report，它说扩展的安装文件中有错误（因为它试图重新加载安装文件，但它必须与创建有关或覆盖第一次创建但未在数据库中删除的表，因为它们应该保留，因为它是已保存的数据，删除这些表将导致再次输入数据

所以请参阅下面似乎导致问题的安装文件

```
<?php

$installer = $this;
/* @var $installer Mage_Core_Model_Resource_Setup */

$installer->startSetup();
$installer->run("
CREATE TABLE IF NOT EXISTS `customerpartner_aux` (
  `id` INT(11)  NOT NULL AUTO_INCREMENT,
  `product_id` INT(11)  NOT NULL,
  `order_id` INT(11)  NOT NULL,
  `real_order_id` INT(11)  NOT NULL,
  `quantity` INT(11)  NOT NULL,
  `percent` DECIMAL(10,2)  NOT NULL,
  `amount_earned` DECIMAL(10,2)  NOT NULL,
  `amount_owed` DECIMAL(10,2)  NOT NULL,
  `cleared_at` DATETIME NOT NULL,
  PRIMARY KEY (`id`)
)
ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity')}` (
  `entity_id` int(10) unsigned NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_set_id` smallint(5) unsigned NOT NULL default '0',
  `website_id` smallint(5) unsigned default NULL,
  `email` varchar(255) NOT NULL default '',
  `group_id` smallint(3) unsigned NOT NULL default '0',
  `increment_id` varchar(50) NOT NULL default '', `parent_id` int(10) unsigned NOT NULL default '0',
  `store_id` smallint(5) unsigned default '0',
  `created_at` datetime NOT NULL default '0000-00-00 00:00:00',
  `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',
  `is_active` tinyint(1) unsigned NOT NULL default '1',
  PRIMARY KEY  (`entity_id`),
  KEY `FK_CUSTOMERPARTNER_ENTITY_STORE` (`store_id`),
  KEY `IDX_ENTITY_TYPE` (`entity_type_id`),
  KEY `IDX_AUTH` (`email`,`website_id`),
  KEY `FK_CUSTOMERPARTNER_WEBSITE` (`website_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC COMMENT='Customer Entityies' AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity_datetime')}` (
  `value_id` int(11) NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_id` smallint(5) unsigned NOT NULL default '0',
  `entity_id` int(10) unsigned NOT NULL default '0',
  `value` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`value_id`),
  KEY `FK_CUSTOMERPARTNER_DATETIME_ENTITY_TYPE` (`entity_type_id`),
  KEY `FK_CUSTOMERPARTNER_DATETIME_ATTRIBUTE` (`attribute_id`),
  KEY `FK_CUSTOMERPARTNER_DATETIME_ENTITY` (`entity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity_decimal')}` (
  `value_id` int(11) NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_id` smallint(5) unsigned NOT NULL default '0',
  `entity_id` int(10) unsigned NOT NULL default '0',
  `value` decimal(12,4) NOT NULL default '0.0000',
  PRIMARY KEY  (`value_id`),
  KEY `FK_CUSTOMERPARTNER_DECIMAL_ENTITY_TYPE` (`entity_type_id`),
  KEY `FK_CUSTOMERPARTNER_DECIMAL_ATTRIBUTE` (`attribute_id`),
  KEY `FK_CUSTOMERPARTNER_DECIMAL_ENTITY` (`entity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity_int')}` (
  `value_id` int(11) NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_id` smallint(5) unsigned NOT NULL default '0',
  `entity_id` int(10) unsigned NOT NULL default '0',
  `value` int(11) NOT NULL default '0',
  PRIMARY KEY  (`value_id`),
  KEY `FK_CUSTOMERPARTNER_INT_ENTITY_TYPE` (`entity_type_id`),
  KEY `FK_CUSTOMERPARTNER_INT_ATTRIBUTE` (`attribute_id`),
  KEY `FK_CUSTOMERPARTNER_INT_ENTITY` (`entity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity_text')}` (
  `value_id` int(11) NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_id` smallint(5) unsigned NOT NULL default '0',
  `entity_id` int(10) unsigned NOT NULL default '0',
  `value` text NOT NULL,
  PRIMARY KEY  (`value_id`),
  KEY `FK_CUSTOMERPARTNER_TEXT_ENTITY_TYPE` (`entity_type_id`),
  KEY `FK_CUSTOMERPARTNER_TEXT_ATTRIBUTE` (`attribute_id`),
  KEY `FK_CUSTOMERPARTNER_TEXT_ENTITY` (`entity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `{$this->getTable('customerpartner_entity_varchar')}` (
  `value_id` int(11) NOT NULL auto_increment,
  `entity_type_id` smallint(8) unsigned NOT NULL default '0',
  `attribute_id` smallint(5) unsigned NOT NULL default '0',
  `entity_id` int(10) unsigned NOT NULL default '0',
  `value` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`value_id`),
  KEY `FK_CUSTOMERPARTNER_VARCHAR_ENTITY_TYPE` (`entity_type_id`),
  KEY `FK_CUSTOMERPARTNER_VARCHAR_ATTRIBUTE` (`attribute_id`),
  KEY `FK_CUSTOMERPARTNER_VARCHAR_ENTITY` (`entity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

ALTER TABLE `{$this->getTable('customerpartner_entity')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_ENTITY_STORE` FOREIGN KEY (`store_id`) REFERENCES `{$this->getTable('core_store')}` (`store_id`) ON DELETE SET NULL ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_WEBSITE` FOREIGN KEY (`website_id`) REFERENCES `{$this->getTable('core_website')}` (`website_id`) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE `{$this->getTable('customerpartner_entity_datetime')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DATETIME_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$this->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DATETIME_ENTITY` FOREIGN KEY (`entity_id`) REFERENCES `{$this->getTable('customerpartner_entity')}` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DATETIME_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `{$this->getTable('eav_entity_type')}` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `{$this->getTable('customerpartner_entity_decimal')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DECIMAL_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$this->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DECIMAL_ENTITY` FOREIGN KEY (`entity_id`) REFERENCES `{$this->getTable('customerpartner_entity')}` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_DECIMAL_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `{$this->getTable('eav_entity_type')}` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `{$this->getTable('customerpartner_entity_int')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_INT_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$this->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_INT_ENTITY` FOREIGN KEY (`entity_id`) REFERENCES `{$this->getTable('customerpartner_entity')}` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_INT_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `{$this->getTable('eav_entity_type')}` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `{$this->getTable('customerpartner_entity_text')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_TEXT_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$this->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_TEXT_ENTITY` FOREIGN KEY (`entity_id`) REFERENCES `{$this->getTable('customerpartner_entity')}` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_TEXT_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `{$this->getTable('eav_entity_type')}` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `{$this->getTable('customerpartner_entity_varchar')}`
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_VARCHAR_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$this->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_VARCHAR_ENTITY` FOREIGN KEY (`entity_id`) REFERENCES `{$this->getTable('customerpartner_entity')}` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_CUSTOMERPARTNER_VARCHAR_ENTITY_TYPE` FOREIGN KEY (`entity_type_id`) REFERENCES `{$this->getTable('eav_entity_type')}` (`entity_type_id`) ON DELETE CASCADE ON UPDATE CASCADE;
    ");

$installer->installEntities();

$installer->endSetup(); 
```

所以任何帮助将不胜感激，因为这是一个开源社区项目，在我能够随时重置/重新加载扩展程序（以轻松添加属性等）之前真的不能再进一步了，而不必删除每个表和数据库中的实体导致用户输入的所有数据丢失，随着时间的推移，这将是巨大的。

我也将尝试调试它直到它修复

干杯

nz战士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:27:50.583

当您从 core_resource 中删除模块名称时，下次加载站点时它将尝试创建数据库，因为 magento 认为该模块确实存在（并且您将收到站点错误）。您可以做的是创建更新（更改该模块的版本号）

请参阅[Magento 安装脚本和升级脚本](http://codemagento.com/2011/02/install-scripts-and-upgrade-scripts)

# c#-4.0 - 使用tcp在同一台机器上进行进程间通信

> ID：13205769
> 
> 赞同：2
> 
> 时间：2012-11-03T03:51:52.857
> 
> 标签：c#-4.0, inter-process-communicat

我有两个进程客户端和服务器。这如下：这是我的客户进程：-

```
[Serializable ]
public class retobj
{
    public int a;

}
class client
{
    static void Main(string[] args)
    {
        TcpClient client = new TcpClient();
        client.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 5005));
        Console.WriteLine("Connected.");
        retobj ob = new retobj();
        ob.a = 90;
        BinaryFormatter bf = new BinaryFormatter();
        NetworkStream ns = client.GetStream();
        bf.Serialize(ns, ob);
        Console.WriteLine("Data sent.");
        Console.ReadLine();
        ns.Close();
        client.Close();
    }
} 
```

这是我的服务器进程：

```
[Serializable]
public class retobj
{
    public int a;

}
class server
{
    static void Main(string[] args)
    {
        TcpListener listener = new TcpListener(IPAddress.Any, 5005);
        listener.Start();
        Console.WriteLine("Server started.");
        Socket client = listener.AcceptSocket();
        Console.WriteLine("Accepted client {0}.\n", client.RemoteEndPoint);
        List<string> l = null;
        retobj j = null;
        using (NetworkStream ns = new NetworkStream(client))
        {
            BinaryFormatter bf = new BinaryFormatter();
            j = (retobj )bf.Deserialize(ns);
        }
        //if (l != null)
        //    foreach (var item in l)
        //        Console.WriteLine(item);
        Console.WriteLine(j.a);
        Console.ReadLine();
        client.Close();
        listener.Stop();
    } 
```

但它给出了一个错误，如：服务器进程中的错误：无法找到程序集'ConsoleApplication45，Version = 1.0.0.0，Culture = Neutral，PublicKeyToken = null'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:06:05.207

当您使用 序列化对象时`BinaryFormatter`，它包含有关该对象来自哪个程序集的信息。在服务器上对其进行反序列化时，它会读取该信息并*从客户端程序*`retobj`集中查找类的版本，这就是您收到该错误的原因。服务器上的不一样。

 *尝试将该类移动到类库项目，并从客户端和服务器引用该项目。你不需要两份。

另一种方法是使用不嵌入程序集信息的替代格式化程序，如[DataContractSerializer 。](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)*

# java - 如何在java中销毁一个对象？

> ID：13205773
> 
> 赞同：51
> 
> 时间：2012-11-03T03:52:25.430
> 
> 标签：java, garbage-collection, finalize

我在接受以下选项的采访时遇到了这个问题：

> 如何在java中销毁对象？

```
a. System.gc();  
b. Runtime.getRuntime.gc();  
c. object.delete();  
d. object.finalize();  
e. Java performs gc by itself, no need to do it manually. 
```

1.  答案应该是 e?

2.  如果 e 不存在怎么办？然后 ？显然 c 不是答案。a 和 b 将为整个应用程序执行 gc（问题需要一个对象）。我认为它是 d 因为 finalize() 在 gc 之前被调用（但是在 finalize gc 被调用之后是否有必要？）或者我错了？e 必须在那里回答这个问题吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-03T03:53:53.473

答案 E 为正确答案。如果 E 不存在，你很快就会耗尽内存（或）没有正确答案。

对象应该是不可访问的，才有资格进行 GC。JVM 会进行多次扫描并将对象从一代移动到另一代，以确定 GC 的资格，并在对象不可达时释放内存。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-03T04:16:59.683

澄清为什么其他答案不起作用：

1.  `System.gc()`（连同`Runtime.getRuntime().gc()`，它做完全相同的事情）*暗示*你想要破坏的东西。依稀。如果 JVM 认为不需要，它可以自由地忽略运行 GC 周期的请求。另外，除非您已经取消了对该对象的所有可访问引用，否则 GC 无论如何都不会触及它。所以 A 和 B 都被取消资格。

2.  `Runtime.getRuntime.gc()`是不好的语法。`getRuntime`是一个函数，而不是一个变量；你需要在它后面加上括号来调用它。所以B被双重取消资格。

3.  `Object`没有`delete`办法。所以C被取消资格。

4.  虽然`Object` *确实*有一种`finalize`方法，但它不会破坏任何东西。 **只有垃圾收集器才能真正删除对象。***（而且在许多情况下，从技术上讲，* 他们甚至不费心去做；他们只是在做其他人时不会复制它，所以它会被抛在后面。）所做的`finalize`只是让对象有机会*在*JVM 将其丢弃。更重要的是，你永远不应该`finalize`直接打电话。（由于`finalize`受到保护，JVM 无论如何都不会让您在任意对象上调用它。）因此 D 不合格。

5.  除此之外，还`object.doAnythingAtAllEvenCommitSuicide()`要求运行代码具有对`object`. 仅此一项就使其“活着”，因此没有资格进行垃圾收集。所以 C 和 D 被双重取消资格。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-03T04:09:54.663

# 简答 - E

给出的答案是`E`其余的显然是错误的，但是..

# 长答案 - 没那么简单；这取决于 ...

简单的事实是，垃圾收集器可能永远不会决定对每个可行的回收对象进行垃圾收集，除非内存压力非常高。还有一个事实是，Java 与任何其他语言一样容易受到*内存泄漏*的影响，它们只是更难导致，因此当你确实导致它们时更难找到！

下面的文章有很多关于内存管理如何工作和不工作以及什么被什么占用的详细信息。[世代垃圾收集器如何工作](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Generational_GC_.28ephemeral_GC.29)并[感谢内存（了解 JVM 如何在 Windows 和 Linux 上使用本机内存）](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Generational_GC_.28ephemeral_GC.29)

***如果您阅读这些链接，我想您会明白 Java 中的内存管理并不像多项选择题那么简单。***

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-10-30T00:26:39.740

设置为空。然后不再有引用，该对象将有资格进行垃圾收集。GC 会自动从堆中删除对象。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-28T12:33:23.803

**这是代码：**

```
public static void main(String argso[]) {
int big_array[] = new int[100000];

// Do some computations with big_array and get a result. 
int result = compute(big_array);

// We no longer need big_array. It will get garbage collected when there
// are no more references to it. Since big_array is a local variable,
// it refers to the array until this method returns. But this method
// doesn't return. So we've got to explicitly get rid of the reference
// ourselves, so the garbage collector knows it can reclaim the array. 
big_array = null;

// Loop forever, handling the user's input
for(;;) handle_input(result);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-19T15:38:57.260

在 java 中，没有明确的方式进行垃圾收集。JVM 本身在后台运行一些线程检查没有任何引用的对象，这意味着我们访问对象的所有方式都丢失了。另一方面，如果对象超出范围，即我们创建对象的程序被终止或结束，它也有资格进行垃圾收集。提出您的问题，方法 finalize 与 C++ 中的析构函数相同。finalize 方法实际上是在 JVM 清除对象内存之前调用的。由您决定是否在程序中定义 finalize 方法。但是，如果对象的垃圾回收是在程序终止后完成的，那么 JVM 将不会调用您在程序中定义的 finalize 方法。你可能会问 finalize 方法有什么用？例如，让我们考虑您创建了一个对象，该对象需要一些流到外部文件，并且您为该对象显式定义了一个 finalize 方法，该方法检查是否打开了文件的流，如果没有，则关闭流。假设，在编写了几行代码之后，您丢失了对该对象的引用。然后它有资格进行垃圾收集。当 JVM 即将释放对象空间时，JVM 只会检查您是否定义了 finalize 方法并调用该方法，因此不存在打开流的风险。finalize 方法使程序无风险且更健壮。

# jquery - 在创建动态 HTML 时使用 jquery .data()

> ID：13205777
> 
> 赞同：0
> 
> 时间：2012-11-03T03:53:26.297
> 
> 标签：jquery

我的网络应用程序中的大部分 HTML 都是动态生成的：例如，我获取一个对象并创建一个网格行，如下所示：

```
var TheHTML = TheHTML + '<div class="HiddenDiv">' + SomeObject.ID + '</div>';
TheHTML = TheHTML + ....
$('#SomeTableContainer').html(TheHTML); 
```

这样，当用户单击该行时，我可以使用访问该行上表示的对象的 ID`.find('.HiddenDiv')`

如何改为使用`.data()`将对象的 ID 插入行，然后在不从 DOM 读取 ID 的情况下检索它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:10:20.763

以对象方式构建 DOM：

```
$('#SomeTableContainer').children().remove();

var TheHTML=($('<div>')
   .append($('<div>').html('my subdiv div').data('subid',1))
   .append($('<div>').html('my subdiv div1').data('subid',2))
);
TheHtml.data('id',id);
TheHtml.bind('myevent',function(e){console.log($(this).data('id'));});
$('#SomeTableContainer').append(TheHTML); 
```

# php - 使用 LIKE 和返回的 ajax 数据查询将不匹配

> ID：13205783
> 
> 赞同：0
> 
> 时间：2012-11-03T03:54:52.783
> 
> 标签：php, javascript, jquery, mysql

我正在尝试将 MySQl 数据库中的配置文件与放入我的可放置 div 的名称和技能组进行匹配，[请参阅此处](http://jsfiddle.net/Kxtvg/181/)。我遇到了两个问题，一个是`mysql_fetch_array() expects parameter 1 to be resource, boolean given`我认为我的查询返回错误的错误。这将我带到另一个问题，我的 $data 不匹配任何东西。如何将放入可放置 div 的名称和技能与数据库中的名称和技能相匹配？

```
if (isset($_POST['data'])){
$data = $_POST['data'];

$query = mysql_query("SELECT * FROM gradesheet WHERE 'firstname','lastname','grade' LIKE '{$data}'");

    while($row=mysql_fetch_array($query)){
            $firstname=$row['firstname'];
            $lastname=$row['lastname'];
            $gradet=$row['grade'];
            $user_id=$row['user_id'];

echo $firstname; 
```

我曾经`%Like%`认为它会给我一个比`MATCH AGAINST`. 对于更好地匹配我的查询并让它返回某些内容的任何知识或想法，我将不胜感激。以及一般的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:59:12.317

您需要为语句`LIKE`中的每一列执行一次，然后选择其中一个或将它们组合在一起。百分号是通配符。`WHERE``AND``OR``%`

```
SELECT * FROM gradesheet 
WHERE 'firstname' LIKE '%term%' 
    OR 'lastname' LIKE '%term%' 
    OR 'grade' LIKE '%term%' 
```

您还应该避免使用`mysql_*`PHP 扩展，因为它们已被[弃用](http://news.php.net/php.internals/53799)；请改用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。除了使用不推荐使用的扩展之外，您的代码还容易受到 SQL 注入攻击。在将数据粘贴到查询中之前，您应该始终从请求变量中过滤数据。

# maven - Tomcat-users.xml 在容器重启时被重写 - 我如何提供凭据？

> ID：13205792
> 
> 赞同：1
> 
> 时间：2012-11-03T03:57:27.520
> 
> 标签：maven, cargo

我使用货物将战争文件部署到 tomcat 服务器。我无法登录到管理器，但是当我启动容器时 conf/tomcat-users.xml 被重写，即

```
mvn cargo:run 
```

我如何提供用户/密码凭据来访问管理器？

干杯！

**编辑**：货物配置

```
<plugins>
    <!-- Start's the plugin tag for Cargo! -->
<plugin>
<groupId>org.codehaus.cargo</groupId>
<artifactId>cargo-maven2-plugin</artifactId>
<configuration>
  <wait>false</wait>
  <container>
    <containerId>tomcat${tomcat.major}x</containerId>
    <zipUrlInstaller>
      <url>http://archive.apache.org/dist/tomcat/tomcat-${tomcat.major}/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.tar.gz</url>
      <extractDir>${project.build.directory}/extract/</extractDir>
      <downloadDir>${project.build.directory}/download/</downloadDir>
    </zipUrlInstaller>
    <output>${project.build.directory}/tomcat${tomcat.major}x.log</output>
    <log>${project.build.directory}/cargo.log</log>
  </container>
  <configuration>
    <home>${project.build.directory}/tomcat-${tomcat.version}/container</home>
    <properties>
      <cargo.logging>high</cargo.logging>
      <cargo.servlet.port>9080</cargo.servlet.port>
      <cargo.tomcat.ajp.port>9008</cargo.tomcat.ajp.port>
    </properties>
  </configuration>
</configuration>
<executions>
  <execution>
    <id>start-container</id>
    <phase>pre-integration-test</phase>
    <goals>
      <goal>start</goal>
      <goal>deploy</goal>
    </goals>
    <configuration>
      <deployer>
        <deployables>
          <deployable>
            <groupId>${project.groupId}</groupId>
            <artifactId>mod-war</artifactId>
            <type>war</type>
            <pingURL>http://localhost:9080/mod-war</pingURL>
            <pingTimeout>30000</pingTimeout>
            <properties>
              <context>mod-war</context>
            </properties>
          </deployable>
        </deployables>
      </deployer>
    </configuration>
  </execution>
  <execution>
    <id>stop-container</id>
    <phase>post-integration-test</phase>
    <goals>
      <goal>stop</goal>
    </goals>
  </execution>
</executions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:49:14.937

找到了。您可以通过以下 xml 提供自定义配置（上述评论中的货物文档链接）

```
 <files>
        <copy>
          <file>tomcat-users.xml</file>
          <tofile>conf/tomcat-users.xml</tofile>
          <configfile>true</configfile>
          <overwrite>true</overwrite>
        </copy>
      </files> 
```

因此，您可以指定自己的 conf/*.xml 或其他任何内容，它将在容器启动之前被复制。我现在可以登录管理器了 :)

干杯

# android - 没有兼容性库就无法创建 Android 应用程序？

> ID：13205794
> 
> 赞同：0
> 
> 时间：2012-11-03T03:57:40.983
> 
> 标签：android, eclipse, android-compatibility

我正在尝试创建一个小型 Android 应用程序，但没有片段和东西的兼容性库。只是一个简单的应用程序。当我进入 Eclipse 中的“安装依赖项”步骤时，下一步和完成是灰色的。我该如何继续？所有新应用真的都需要有兼容性库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:56:39.293

无论如何，您可以稍后在 Eclipse 中从项目`libs`文件夹中删除兼容性库，然后将其从`Build Path`.

为什么要这样做？

# php - PDO_SQLSRV 以字符串形式返回所有结果

> ID：13205800
> 
> 赞同：0
> 
> 时间：2012-11-03T03:59:28.673
> 
> 标签：php, sql-server, pdo, doctrine, doctrine-orm

对于 SQL Server 整数数据类型，似乎 PDO_SQLSRV 返回字符串，而 SQLSRV 返回整数。我已经编写的应用程序在几个地方进行了显式检查（===），这意味着 PDO_SQLSRV 不是 SQLSRV 的替代品。通常我不会考虑 PDO - 但是 Doctrine 似乎使用 PDO 并且我找不到它的 Microsoft SQLSRV 驱动程序（请启发我！）

这是带有响应的示例代码：

**PDO**

```
$sql = "SELECT Top 1 * FROM Users";
$stmt = $conn->query($sql);
$things = $stmt->fetchAll(PDO::FETCH_ASSOC);
var_dump($things); 
```

数据：

```
'ID' => string '344' (length=3)
'UserName' => string 'admin                 ' (length=30) 
```

**SQLSRV**

```
$sql = "SELECT Top 1 * FROM Users";
$things = sqlsrv_query($conn, $sql);

$thingsArray = [];
while( $row = sqlsrv_fetch_array($things, SQLSRV_FETCH_ASSOC))
{
    $thingsArray[] = $row;
}

var_dump($thingsArray); 
```

数据：

```
'ID' => int 344
'UserName' => string 'admin                 ' (length=30) 
```

所以 - 现在我认为我有两个选择：小心地发布它并确保我正在对整数进行类型转换或放松我的比较，或者编写/查找 Doctrine SQLSRV 库。

有谁知道将整数作为整数返回的 PDO_SQLSRV 设置？我检查了文档，但似乎找不到任何东西。

SQLSRV 也将日期作为原生 PHP DateTime 对象返回。有点酷，但不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:27:26.213

PHP PDO 规范声明所有字段都作为字符串返回，因此 pdo_sqlsrv 只是遵守规范。

# python - Python - 使用字典项作为对象

> ID：13205802
> 
> 赞同：0
> 
> 时间：2012-11-03T03:59:57.270
> 
> 标签：python

我试图在我放在一起的脚本中使参数更易于管理，我想我会将一堆相关项目包装到字典中，并将字典从函数中传递出去。拉出我需要的物体。

其中一项是正则表达式，我正在努力弄清楚如何正确地构造事物以便使其工作。

在我的初始代码中（没有字典）。我正在将正则表达式“硬”编码到解析器中：

```
def TopnTail(self,line):
    topRegEx = re.compile(r'(<!--make_database header end-->)') 
    tailRegEx = re.compile(r'(<!--make_database footer start-->)') 
    searchdumpTopOfPage = topRegEx.search(line)
    searchdumpBottomOfPage = tailRegEx.search(line)
    if searchdumpTopOfPage:
        self.__useLine=1
    if searchdumpBottomOfPage:
        self.__useLine=0  
    if self.__useLine == 1:
        self.trimmedLines = self.trimmedLines + line + "\n"
    return (self.trimmedLines) 
```

在“字典”版本中，我想在 setter 中设置变量：

```
def siteDetails():
    baseDict = {'topRegex':'''re.compile(r'(<!--make_database header end-->)')''', 'tailRegex':'''re.compile(r'(<!--make_database footer start-->)')'''}
    return baseDict 
```

并获得编译的正则表达式：

```
def TopnTail(self,line):
    topRegEx = baseDict['topRegex'] 
    tailRegEx = baseDict['tailRegex'] 
    searchdumpTopOfPage = topRegEx.search(line)
    searchdumpBottomOfPage = tailRegEx.search(line)
    if searchdumpTopOfPage:
        self.__useLine=1
    if searchdumpBottomOfPage:
        self.__useLine=0  
    if self.__useLine == 1:
        self.trimmedLines = self.trimmedLines + line + "\n"
    return (self.trimmedLines) 
```

但这会引发错误：

```
line 35, in TopnTail
searchdumpTopOfPage = topRegEx.search(line)
AttributeError: 'str' object has no attribute 'search' 
```

我猜这意味着它实际上并没有生成正则表达式对象，但仍在传递字符串。

我很感激我在这里可能违反了大约 3 条基本规则......但是任何关于如何使它工作的建议都会很棒......（另外，第一次玩类和字典......所以如果我请放轻松真的搞砸了！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:03:24.070

这个怎么样？

```
baseDict = {
  'topRegex': r'(<!--make_database header end-->)'
} 
```

在你的`TopnTail`方法中

```
topRegEx = re.compile(baseDict['topRegex']) 
```

您所拥有的问题是您正在将一个*字符串*分配给包含`'''re.compile(r'(<!--make_database header end-->)')'''`. 由于`str`has no method `search`，您会收到错误消息。

仍然编译您的正则表达式并使用返回的对象是有意义的。如果您需要更改正则表达式模式，或者您想动态定义它，将正则表达式的内容拆分为 dict 会有所帮助。

# ios - 如何在 XCode 中使用 NSConnection 进行 JSON 延迟加载？

> ID：13205803
> 
> 赞同：2
> 
> 时间：2012-11-03T04:00:14.133
> 
> 标签：ios, xcode, lazy-loading, nsconnection

如何使用 NSConnection 部分下载 JSON 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:27:49.473

您能否提供更多有关您要完成的工作的信息？我假设您的意思是您想在完全完成下载之前开始处理 json。您可以查看可以为的委托`didReceiveData`实现的方法的一件事：`NSUrlConnection`

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

您可以在数据下降时对其进行解析，并且当您有足够的 JSON 进行解析时，您可以在它完全下载之前就开始处理它。当然，这意味着您可能必须自己解析 json 字符串，而不是使用需要完全形成的 json 字符串的 json 解析器之一。

# php - php：回显错误消息

> ID：13205807
> 
> 赞同：0
> 
> 时间：2012-11-03T04:01:03.010
> 
> 标签：php

代码 ：

```
$searchText = '3423,  2453,  3245  ,  2425,  6765';     

$numbers = str_replace(", ", ",", $searchText);

    $code = explode(",", $numbers);

   if ( (preg_match("/[^0-9]/i"), $code) || (strlen($code) != 4) ) {

            $searchingError= 'Can not cantain string and more than 4 digists number!';
            echo '<script type="text/javascript">';
            echo "alert('" . $searchingError . "')";
            echo "</script>";   
    }   

    function validate ($a) {
    if (ctype_digit($a) && (strlen($a) == 4)) { 
        return "'$a'" ;
    } else {
        //$searchingError= 'Can not cantain string and more than 4 digists number!';
        //echo '<script type="text/javascript">';
        //echo "alert('" . $searchingError . "')";
        //echo "</script>";         
    }
}

$parsed = array_map( "validate",$code);

print_r($parsed);

$code = '(' . preg_replace('/\,+/', ',',implode(',', $parsed)) . ')';

echo '<br />' . $code; 
```

在这段代码中，有没有办法识别 $searchText 只有 4 位数字或它包含字符串等。如果是这样，我想回显一条错误消息。

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:07:32.997

在 if 语句中检查 $code 是否是一个文本 using`is_int`和每个数字的长度：`strlen();`

```
if (is_int($code)) {
    if (strlen($num1) = 4 && strlen($num2) ...) {
        //code here 
    }
    else
        echo "Error.";
}
else 
    echo "The search is text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:11:23.787

这将用于验证它们只是数字和 4 个字符......

```
 //is not digits                or    //is not 4 characters in length
 if ( (preg_match("/[^0-9]/i"), $code) || (strlen($code) != 4) ) {alert error...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T04:52:02.753

**知道了！**

```
 <?php

 $a = "4444 , 111X , 565656, 4444";

 $a = str_replace(" ", "", $a);

 $b = explode(",",$a);

 function validate($v){

if ((strlen($v)!=4)||(preg_match("/[^0-9]/i", $v))) { echo 'error<br/>'; }else{ echo 'success<br/>'; };

 }

 array_filter($b,"validate");

 echo 'complete';

 ?> 
```

# struts2 - 基于 Struts2 的测验应用程序，使用 DB 获取问题和存储结果

> ID：13205808
> 
> 赞同：1
> 
> 时间：2012-11-03T04:01:10.257
> 
> 标签：struts2

.jsp 文件

```
 <s:iterator value="questions" status="status">
   <table border="3px" bgcolor="yellow">
   <tr bgcolor="white" >
   <td nowrap><s:property value="QuestionNumber"/></td>
   <td nowrap><s:property value="Question"/></td>
   </tr>
   <tr>
   <td nowrap><input type="radio" name="<s:property value="QuestionNumber"/>" value="1"/><s:property value="Option1"/></td>
   <td nowrap><input type="radio" name="<s:property value="QuestionNumber"/>" value="2"/><s:property value="Option2"/></td>
   </tr>
   <tr>
   <td nowrap><input type="radio" name="<s:property value="QuestionNumber"/>" value="3"/><s:property value="Option3"/></td>
   <td nowrap><input type="radio" name="<s:property value="QuestionNumber"/>" value="4"/><s:property value="Option4"/></td>
   </tr>
   </table>
   <s:hidden> </s:hidden>
 </s:iterator>
 <s:hidden id="answers" value="answers"/>
 <s:submit name="submit" onclick="submitform()"/>
</s:form> 
```

使用 Action 类从 DB 填充属性值。我的问题是我想收集测验的答案列表并将其提供给 Java 类以评估分数。我不知道该怎么做

我的数据库有问题表，其中包含带有选项和正确答案的问题列表。

我有一个问题 Bean 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:08:38.797

有很多方法可以做到这一点。最简单的方法是实现`ParameterAware`，签出链接[ParameterAware](http://struts.apache.org/2.0.6/docs/how-can-we-access-request-parameters-passed-into-an-action.html)，然后您可以像这样获取所有参数：（我假设，`QuestionNumber`是您的 bean 的参数`question`）

```
String param1 = parameters.get(question.getQuestionNumber); 
```

你可以把这条线放在一个循环中，这样你就可以得到所有的参数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:21:39.200

你有一个带有`private List<Question> questions;`, 带有 Getter 和 Setter 的动作。

您从 Getter 读取列表来填充您的 JSP。

您可以使用 OGNL 将该列表从 JSP 发布回 Action 的 Setter，以保留有关行详细信息的信息。

为此，请使用 Struts 标记（`<s:radio`而不是`<radio`）并设置包含行索引的名称。

例如，使用文本字段，而不是

```
 <s:iterator value="questions" status="status">
     <s:textfield name="question" />
 </s:iterator> 
```

使用类似的东西（未经测试，可能需要一些调整）

```
 <s:iterator value="questions" status="status">
     <s:textfield name="questions[%{#status.index}].question" />
 </s:iterator> 
```

只需将其调整为您的收音机外壳，

在 Action 中，您将收到完整填充的列表。

（您甚至可以验证像这样使用访问者验证器发布的列表：不是您的情况，但值得了解）。

# ruby-on-rails - 如何创建到 Rails 资源的 DELETE 链接？

> ID：13205814
> 
> 赞同：4
> 
> 时间：2012-11-03T04:02:23.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http, http-headers, ruby-on-rails-3.2

如果我想在 rails 中创建一个 DELETE 链接，我编写以下代码（在本例中删除 Devise 中的用户会话）：

```
<%= link_to('Logout', destroy_user_session_path, :method => :delete) %> 
```

这将变成以下 HTML：

```
<a rel="nofollow" data-method="delete" href="/users/sign_out">Logout</a> 
```

效果很好，只是我不能简单地将 HTML 放入静态 HTML 页面。它只会做一个 GET 请求。我假设 Rails 包含一些标准 Javascript 以将上述链接转换为实际执行 DELETE 请求的链接。那么，在静态 HTML 页面上链接到执行 DELETE 操作的 Rails 资源的正确方法是什么？我是否应该在所有执行此操作的网页中找到并获取 Javascript Rails 包含的内容？有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T04:37:21.477

不幸的是，您不能`DELETE`使用锚链接发送请求 - 传统的锚链接只会发送`GET`请求。实际上，您根本无法真正发送真正的`DELETE`请求。如果你想创建一个删除链接，没有 javascript，解决方案相当简单。查看*2.4 带有 PUT 或 DELETE 方法的表单如何工作？*在[官方文档](http://guides.rubyonrails.org/form_helpers.html)中。基本上，您可以简单地使用`delete`. 这很简单，您不需要依赖 javascript 来完成工作。希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T04:22:46.320

Rails 使用 JavaScript 来处理`delete`链接。

它创建一个不可见的表单，并在您单击具有`data-method`属性的链接时提交它`"delete"`

看看[https://github.com/rails/jquery-ujs/blob/master/src/rails.js](https://github.com/rails/jquery-ujs/blob/master/src/rails.js)`handleMethod` _

也许您在静态页面中的删除链接只会在您包含时起作用`rails.js`（如果您使用的是 jQuery）。如果没有，您可以构建一个表单，因为它是`handleMethod`您自己完成的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T05:08:01.060

由于我的一些同事正在开发一个本地应用程序，用户可能没有在他们的浏览器上启用 JavaScript，在这种情况下删除链接将不起作用，我们将获得显示页面而不是删除....所以如果您不确定用户是否可能在其浏览器上启用了 JS，您始终可以使用 GET 或 POST 方法生成路由来删除控制器的操作...这种方法也适用于静态 HTML 页面..

# c# - Excel 文本连接字符串文件路径无效

> ID：13205816
> 
> 赞同：0
> 
> 时间：2012-11-03T04:02:48.053
> 
> 标签：c#, excel, connection-string

我正在尝试`.txt`使用 C# 为文件编写连接字符串。

我不断收到错误消息，说我的文件路径无效。

```
string excelConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=C:\Users\Josh\Documents\Test.txt;Extended Properties=""text;HDR=YES;FMT=Delimited"""; 
```

文件路径应该没有错。所以，我认为这是另一个问题。也许我在文件路径上遗漏了一些东西。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:16:07.403

对于文本文件，数据源是目录而不是单个文件，请参阅： [ADODB Connection String for .csv](https://stackoverflow.com/questions/7315957/adodb-connection-string-for-csv)

所以连接字符串应该是

```
string excelConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0; 
Data Source=C:\Users\Josh\Documents\;Extended Properties=""text;
HDR=YES;FMT=Delimited"""; 
```

然后你会做

`SELECT * FROM Test.txt`

获取数据

# javascript - 如何删除 window.location 中的部分 URL？

> ID：13205818
> 
> 赞同：2
> 
> 时间：2012-11-03T04:03:46.877
> 
> 标签：javascript, window.location

我已经获取`window.location`了一个变量。现在，我想从位置对象中的 href 中删除部分字符串，但仍保留该对象。

换句话说，我想修改 location 对象，并且仍然可以使用`window.location.protocol`and `window.location.host`，但是这些功能需要在修改后的对象上工作。

例如，我的浏览器显示`"https://my.domain.org/site"`如下：

```
var thisloc = window.location;
Modify the href within that object to "http://my.domain.org/othersite"

//now I want it to fetch "http" instead of "https" based on my modified object
var thisprot = thisloc.protocol; 
```

那会奏效吗？如果是这样，那就太好了。否则，我必须解析 URL 以从修改后的 href 中获取协议、主机和路径名，这也将实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:36:30.930

灵感来自 James Padosley 关于[Parsing URLs with the DOM 的帖子！](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)，这里的诀窍是使用锚元素 ( `<a>`) 作为 URL 构建器/解析器。对于任何锚元素，如果您将其`href`属性设置为某个 URL，它将被 DOM 解析。此后，您可以通过锚元素上的属性自由修改该 URL 的各个部分。`href`随时查询该属性以查看完整 URL。

使用问题中的示例......</p>

```
var builder = document.createElement("a");

builder.href = "https://my.domain.org/site";
builder.protocol = "http://";
builder.pathname = "/othersite";

console.log(builder.href); // http://my.domain.org/othersite 
```

此时，锚元素的 href 将`http://my.domain.org/othersite`按照要求变为 。这是一个 JS Bin 的实际演示：http: [//jsbin.com/omoqen/1/edit](http://jsbin.com/omoqen/1/edit)。

美妙之处在于锚元素具有与对象相同的 URL 组件属性[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

```
protocol
host
hostname
port
pathname
search
hash 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T04:05:33.343

这些是浏览器属性 - 您可以获取和修改值，但引用该属性不会以您描述的方式工作。

# rabbitmq - Rabbit 不会在 ec2 上集群

> ID：13205820
> 
> 赞同：1
> 
> 时间：2012-11-03T04:04:28.507
> 
> 标签：rabbitmq

我在让兔子集群时遇到服务器问题。

我在 ec2 上启动了两个节点。

在启动的第一个节点上，我这样做。

```
rabbitmqctl stop_app
rabbitmqctl reset
rabbitmqctl start_app

I boot another node.
sudo service rabbitmq-server stop
#Copy cookie from the first server booted
sudo su - -c 'echo -n "cookie" > /var/lib/rabbitmq/.erlang.cookie'
rabbitmqctl stop_app
rabbitmqctl reset
rabbitmqctl cluster rabbit@server1 
```

1) sever1 正在运行 2) 需要打开哪些端口？我有 22、4369、5672

```
sudo rabbitmqctl cluster rabbit@aws-rabbit-server-east-development-20121102162143
Clustering node 'rabbit@aws-rabbit-server-east-development-20121103033005' with ['rabbit@aws-rabbit-server-east-development-20121102162143'] ...
Error: {no_running_cluster_nodes,['rabbit@aws-rabbit-server-east-development-20121102162143'],
                                 ['rabbit@aws-rabbit-server-east-development-20121102162143']} 
```

那里的文档可能缺少什么或我缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:01:35.617

我在两台 Windows 机器上的 EC2 上遇到了类似的问题。我最终让它工作了，但我不确定我是否以正确的方式做到了，所以可能会有更好的解决方案。

我发现的问题是两个节点在尝试集群时看不到对方。每次启动 Rabbit 节点时，它似乎都被动态分配了一个端口号。

这显然使得很难知道在安全组中打开哪个端口，所以为了解决这个问题，我在分配端口时限制了 Rabbit 选择的端口范围。我将其限制在每个节点上 1 个端口的范围内，因此我始终知道分配了哪个端口。

我发现最简单的方法是编辑 sbin\rabbitmq-service.bat 文件。

找到行**-kernel inet_default_connect_options "[{nodelay,true}]" ^**

在下面的文件中添加以下两行：

**-kernel inet_dist_listen_min ##### ^ -kernel inet_dist_listen_max ##### ^**

用您选择的端口号替换#####。

所以你现在应该打开以下端口：

5672 - RabbitMQ 的监听端口

4369 - Erlang 端口映射器守护进程

##### - 为 Erlang 节点选择的端口号进行通信

因为 Erlang 不识别 FQDN，您可能需要修改所有服务器上的 hosts 文件，以确保它们都能够将所有 Erlang 节点名称解析为 IP 地址，例如

123.123.123.111 节点 1

123.123.123.222 节点2

完成此操作后，您应该能够从另一个节点看到每个节点。您可以通过从命令行调用以下命令来执行此操作（将 rabbit@NODE2 替换为您想要查看的任何节点）

**rabbitmqctl status -n rabbit@NODE2**

希望这能给您一些帮助，我不是专家，但发现这对我有用！

# sql - 消息 203，级别 16，状态 2，不是有效标识符

> ID：13205827
> 
> 赞同：6
> 
> 时间：2012-11-03T04:05:17.190
> 
> 标签：sql, sql-server, sql-server-2008, tsql, error-handling

我收到以下错误：

> *消息 203，级别 16，状态 2，过程 getQuestion，第 18 行*
> 名称 'select top(1) * from tlb_Question inner join tlb_options on tlb_options.qID=tlb_Question.id and tlb_Question.qNumber=1 and tlb_Question.id not in (0 ,1)' 不是有效的标识符

从以下存储过程：

```
ALTER proc getQuestion
    @qNo bigint,
    @total bigint,
    @next nvarchar(max)
as
begin 
    declare @hisa bigint
    set @hisa=@total/3

    if(@qNo<=@total/3)
    begin
    declare @query nvarchar(max)
    set @query=('select top(1) * from tlb_Question 
        inner join tlb_options on tlb_options.qID=tlb_Question.id and tlb_Question.qNumber=1 and tlb_Question.id not in ('+cast(@next as varchar)+')')
    print @query
    execute @query
    end
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T04:24:15.680

请试试这个，将执行@query更改为执行（@query）：

```
ALTER proc getQuestion
    @qNo bigint,
    @total bigint,
    @next nvarchar(max)
as

begin 
    declare @hisa bigint
    set @hisa=@total/3

    if(@qNo<=@total/3)
    begin
      declare @query nvarchar(max)
      set @query=('select top(1) * from tlb_Question 
      inner join tlb_options on tlb_options.qID=tlb_Question.id and tlb_Question.qNumber=1 and tlb_Question.id not in ('+cast(@next as varchar)+')')
      --print @query
      execute (@query)
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:19:27.763

问题是`execute @query`。我可以在测试后确认。@techdo 是正确的。将其更改为

```
execute (@query) 
```

# php - html内部的php之间的区别，反之亦然

> ID：13205834
> 
> 赞同：4
> 
> 时间：2012-11-03T04:06:22.837
> 
> 标签：php, html

我一直很好奇，在 html 中编写 php 是否有任何显着的优点或缺点，反之亦然

例子：

```
echo '<ul>'
foreach ($items as $item)
{
    echo "<li>$item</li>";
}
echo '</ul> 
```

相对于：

```
<ul>
<? foreach($items as $item): ?>
    <li>$item</li>
<? endforeach; ?>
</ul> 
```

由于这些本质上产生相同的东西，你什么时候会真正使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T04:07:51.437

从功能上讲，它们完全相同，并且不会对性能产生明显影响（如果有的话）。这取决于个人偏好和可读性——如果一个比另一个更清晰，并且其他人（或未来的你）更容易理解，那就选择那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T04:15:02.540

*如果您实际上在主要是*HTML 文件中使用 PHP，我个人认为使用后者会更好。清晰的开始/结束标签更容易在视觉上与 HTML 匹配。我发现很难在视觉上排列花括号。

例如，在 MVC 框架的情况下，我将使用第一种方式在控制器或模型上下文中输出内容，而第二种方式在我的视图文件中。一些像 smarty 这样的模板语言有相似的结构。

IE：

```
{ if [condition] }
{ /if } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T04:17:21.867

从 IDE 的角度来看，第一个回显无意义的字符串，而后一个是 HTML 和 PHP 的混合体，将由您的编辑器正确处理。换句话说，最好将 HTML 与 PHP 分开，因为它允许您的编辑器解析 HTML 并提供一些有用的功能，如语法验证或 HTML 标记的自动关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T04:10:55.330

基本上php是服务器端脚本，html是客户端脚本。因此，如果它是 html 内的 php，那么它会产生更快的响应，并且您可以格式化更好的视图。但是，对于某些情况，您可能必须考虑另一种情况进行开发。

# ruby-on-rails - 在 Ruby on rails 中，如何在操作完成执行之前显示加载图像？

> ID：13205839
> 
> 赞同：2
> 
> 时间：2012-11-03T04:07:55.207
> 
> 标签：ruby-on-rails, ruby

我有一个应用程序，用户将从父网站重定向到我们的网站。我们将通过 SAML 流程获取用户的详细信息。根据收到的详细信息，如果用户是新用户，则将创建用户。所以动作会话/消费需要一些时间来处理。在动作完成之前是否可以显示加载图像或任何图像？这样用户就不会看到黑屏了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:39:07.093

There are a couple ways you can do this. I think the easiest would probably to use JavaScript on the client side to make the "loading..." image appear when the user clicks on the link.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:34:14.407

简单的方法是在rails中使用jquery。如果你想在提交表单后显示加载器直到操作完成。下面是简单的例子： `<script type="text/javascript"> $("#me").click(function(){ $("#img").css("display","block"); }); </script> <%=submit_tag "Approve",:id=>"me"%> <p id="img" style="display:none;"><%= image_tag 'loader2.gif' %></p>`

# .htaccess - 如何重写 domainname.com/index.php/dir/controller/?var1=abc&var2=def

> ID：13205845
> 
> 赞同：0
> 
> 时间：2012-11-03T04:09:15.737
> 
> 标签：.htaccess, url-rewriting

如何重写`domainname.com/index.php/dir/controller/?var1=abc&var2=def`

至

`domainname.com/rewrite-string/abc/def/`?

`domainname.com/rewrite-string/abc/def/`是用户放置到浏览器地址栏的链接

服务器会将其重定向到`domainname.com/index.php/dir/controller/?var1=abc&var2=def`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:20:00.533

要获取查询字符串值，您需要使用`RewriteCond`类似：

```
RewriteCond %{QUERY_STRING} ^var1=([^&]*)&var2=([^&]*)
RewriteRule ^index.php/dir/controller$  /rewrite-string/%1/%2 [R=301,NC,L] 
```

`%`并通过not引用匹配组`$`

# objective-c - 从网页下载大量数据时减少延迟

> ID：13205859
> 
> 赞同：0
> 
> 时间：2012-11-03T04:12:11.713
> 
> 标签：objective-c, ios, multithreading, html-parsing

我通过 RSS 提要获取数据并在表格视图单元格中显示每篇文章。每个单元格都有一个图像视图，设置为默认图像。如果页面有图像，则图像将替换为文章中的图像。截至目前，每个单元格都从网页下载源代码，导致应用程序在我推送视图控制器和尝试滚动时出现延迟。

这是我在`cellForRowAtIndexPath:`方法中所拥有的。

```
 NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];
    storyLink = [storyLink stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *sourceCode = [NSString stringWithContentsOfURL:[NSURL URLWithString:storyLink] encoding:NSUTF8StringEncoding error:&error];

    NSString *startPt = @"instant-gallery";
    NSString *startPt2 = @"<img src=\"";

    if ([sourceCode rangeOfString:startPt].length != 0) { //webpage has images
    // find the first  "<img src=...>" tag starting from "instant-gallery"
    NSString *trimmedSource = [sourceCode substringFromIndex:NSMaxRange([sourceCode rangeOfString:startPt])];
    trimmedSource = [trimmedSource substringFromIndex:NSMaxRange([trimmedSource rangeOfString:startPt2])];
    trimmedSource = [trimmedSource substringToIndex:[trimmedSource rangeOfString:@"\""].location];

    NSURL *url = [NSURL URLWithString:trimmedSource];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *image = [UIImage imageWithData:data];
    cell.picture.image = image; 
```

有人建议使用`NSOperationQueue`. 这种方式会是一个很好的解决方案吗？

编辑：

```
 dispatch_queue_t someQueue = dispatch_queue_create("cell background queue", NULL);
    dispatch_async(someQueue, ^(void){

        NSError *error = nil;
        NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];
        storyLink = [storyLink stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSString *sourceCode = [NSString stringWithContentsOfURL:[NSURL URLWithString:storyLink] encoding:NSUTF8StringEncoding error:&error];

        NSString *startPt = @"instant-gallery";
        NSString *startPt2 = @"<img src=\"";

        if ([sourceCode rangeOfString:startPt].length != 0) { //webpage has images
            // find the first  "<img src=...>" tag starting from "instant-gallery"
            NSString *trimmedSource = [sourceCode substringFromIndex:NSMaxRange([sourceCode rangeOfString:startPt])];
            trimmedSource = [trimmedSource substringFromIndex:NSMaxRange([trimmedSource rangeOfString:startPt2])];
            trimmedSource = [trimmedSource substringToIndex:[trimmedSource rangeOfString:@"\""].location];

            NSURL *url = [NSURL URLWithString:trimmedSource];
            NSData *data = [NSData dataWithContentsOfURL:url];
            UIImage *image = [UIImage imageWithData:data];

            dispatch_async(dispatch_get_main_queue(), ^(void){
                cell.picture.image = image;
            });
        });
        dispatch_release(someQueue);

        return cell;
    } 
```

![在此处输入图像描述](../Images/6a19835bffcbbd768a3a899a675cb401.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:21:57.587

对于可能导致延迟的任何原因，请将其放在后台线程中。当您准备好更新您的 UI 时，请在主线程上更新它。也许你可以试试[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) -

```
dispatch_queue_t someQueue = dispatch_queue_create("cell background queue", NULL);
dispatch_async(someQueue, ^(void){

    NSURL *url = [NSURL URLWithString:trimmedSource];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *image = [UIImage imageWithData:data];

    dispatch_async(dispatch_get_main_queue(), ^(void){
        cell.picture.image = image;
    });
});
dispatch_release(someQueue); 
```

**编辑：**

当您有一些可能会减慢您的应用程序的进程时，您希望将其放入后台队列中。要将它们放入后台队列，请使用`dispatch_async`：

```
dispatch_aysnc(someQueue, ^(void){ 

}); 
```

`someQueue`您创建并希望完成工作的后台队列在哪里。但是，与 UI 相关的任何内容都需要放在主队列中，否则可能会发生一些时髦的事情。这就是为什么在其中`dispatch_async`，我们放了另一个`dispatch_async`. 这一次，我们指定 UI ( `cell.picture.image`) 需要在主队列上更新：`dispatch_get_main_queue()`.

希望这能澄清一点。

# c++ - 这个 if 语句的更好表达方式是什么？

> ID：13205861
> 
> 赞同：0
> 
> 时间：2012-11-03T04:12:53.377
> 
> 标签：c++, ffmpeg, rtmp

有人告诉我，有一个 ffmpeg 补丁可以解决流式传输到 FLV 播放器时出现的问题。

*在rtmpproto.c*的第 2314 行附近有以下表达式：

```
if (rt->flv_header_bytes < 11)
            break; 
```

解决方法是将其更改为包含此附加要求：

```
if (rt->flv_header_bytes < 11 && !rt->flv_off)
            break; 
```

不过我很好奇这个说法的逻辑。第一条语句检查 FLV 标头是否小于 11 个字节，但是在检查标头有多少字节之前先检查是否打开了 flv 流不是更有效吗？

```
if (!rt->flv_off && rt->flv_header_bytes < 11)
            break; 
```

或者如何将声明更改为这样？

```
if (rt->flv_off || (!rt->flv_off && rt->flv_header_bytes < 11)
                break; 
```

那会更有效还是会以某种方式破坏代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:25:28.863

这取决于哪个条件最常失败，以及编译器是否尊重您键入条件的顺序。假设后者是正确的（一个很大的假设），首先检查标题大小可能更有效，因为 FLV 播放器通常是打开的。

完整的评估需要更多细节......尽管这些都可能无关紧要，因为（a）“浪费”的时间几乎肯定是微不足道的，并且（b）编译器很可能会比你做得更好将要。

如果您想在第三个陈述中使用 OR，只需应用德摩根定律并写

```
if(rt->flv_off || rt->flv_header_bytes >= 11) 
```

但同样，这并不是真正值得担心的事情。

# javascript - 如何在html页面上保留触发JS功能的无限计时器？

> ID：13205863
> 
> 赞同：0
> 
> 时间：2012-11-03T04:13:00.113
> 
> 标签：javascript

我需要调用一个函数，每 2 分钟更新一次页面上的一些 JS 对象。我该怎么做？

我创建了一个 onload 函数和一个刷新整个页面的倒计时函数，因此重置计时器直到刷新下一页，但这不是我想要的方式。有没有办法保持无限的时间循环？

我假设，如果我可以创建一个无限循环并执行以下操作：

```
if (currentSeconds%120==0){ 
callFunction();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:14:21.623

```
setInterval(callFunction, 120000); 
```

阅读[https://developer.mozilla.org/en-US/docs/DOM/window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)和[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# php - 使用类似 CodeIgniter 的 MVC 将多个参数传递给索引控制器

> ID：13205864
> 
> 赞同：1
> 
> 时间：2012-11-03T04:13:14.547
> 
> 标签：php, codeigniter, model-view-controller

我刚刚开始学习 PHP，所以如果这是一个基本问题，我深表歉意。我正在使用我理解的类似 CodeIgniter 的 MVC 框架（虽然不是 CI - 一个本土框架）

我正在尝试将两个参数传递给我的索引控制器，每个参数都会显示不同的错误消息。错误是由两个单独的帖子功能生成的（即，如果用户的登录不正确，并且在注册时电子邮件已经存在）。

```
public function index($error1=NULL, $error2=NULL) {

$this->template->content = View::instance('v_index_index');
$this->template->content->error1 = $error1;
$this->template->content->error2 = $error2;

echo $this->template;

} 
```

我观察到的是，唯一显示的错误是首先出现在括号中的参数（例如，在 index/index/error2 处显示 error1 消息）。我已经测试了确定错误类型的逻辑，所以我知道这是正确的，并且相信它一定与上述有关。

任何帮助是极大的赞赏！

# c - gcc - 文件无法识别：文件格式无法识别

> ID：13205865
> 
> 赞同：6
> 
> 时间：2012-11-03T04:13:42.370
> 
> 标签：c, makefile

我正在尝试编译一个小项目，但遇到了这个错误，我一直在四处寻找，人们得到这个错误主要是因为文件扩展名不正确，但我真的不认为这是原因：

```
gcc -c -W -Wall -ggdb -I. router.c -o router.o
router.c:106: warning: unused parameter ‘hname’
router.c: In function ‘flood_neighbors’:
router.c:464: warning: unused variable ‘bytes_rcvd’
router.c: At top level:
router.c:536: warning: unused parameter ‘fd’
gcc -c -W -Wall -ggdb -I. link_info.h -o link_info.o
gcc -c -W -Wall -ggdb -I. route.h -o route.o
gcc -c -W -Wall -ggdb -I. sequence.h -o sequence.o
gcc -W -Wall -ggdb -I. router.o link_info.o route.o sequence.o -o router
link_info.o: file not recognized: File format not recognized
collect2: ld returned 1 exit status
make: *** [router] Error 1 
```

我的make文件看起来像：

```
CC = gcc
INC = -I.
FLAGS = -W -Wall -ggdb

router: router.o link_info.o route.o sequence.o
        $(CC) $(FLAGS) $(INC) $^ -o $@

router.o: router.c
        $(CC) -c $(FLAGS) $(INC) $< -o $@

sequence.o: sequence.h sequence.h
        $(CC) -c $(FLAGS) $(INC) $< -o $@

link_info.o: link_info.h link_info.c
        $(CC) -c $(FLAGS) $(INC) $< -o $@

route.o: route.h route.c
        $(CC) -c $(FLAGS) $(INC) $< -o $@ 
```

我感到困惑的是三个目标文件的规则格式相同，但为什么只有一个链接会大喊大叫？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T04:31:30.593

我想建议在您的 makefile 中进行一些编辑。

```
CC = gcc
INC = -I.
FLAGS = -W -Wall -ggdb

router: router.o link_info.o route.o sequence.o
        $(CC) $(FLAGS) $(INC) $^ -o $@

router.o: router.c
        $(CC) -c $(FLAGS) $(INC) $< -o $@

sequence.o: sequence.h sequence.h //Where is the c file ?
        $(CC) -c $(FLAGS) $(INC) $< -o $@

link_info.o: link_info.h link_info.c //Change the order. Put c file first and then the header
        $(CC) -c $(FLAGS) $(INC) $< -o $@

route.o: route.h route.c //Same as above
        $(CC) -c $(FLAGS) $(INC) $< -o $@ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T04:34:42.063

使用最新版本的 make 您可以删除所有对象规则，因为 make 使用默认规则从 .c 或 .cpp 文件构建对象。只需保留规则即可构建最终的可执行文件。

例如，更改文件，使其仅包含此行：

```
router: router.o link_info.o route.o sequence.o
    $(CC) $(FLAGS) $(INC) $^ -o $@ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T04:44:45.813

将 link_info.o 移动到`router:`依赖项列表的末尾，我怀疑你会在 route.o 上炸毁。

您似乎正在将标头编译为 C 文件。我不知道 GCC 在这种情况下会做什么。在您的 makefile 规则中，如果您要使用 $< 生成要编译的源文件，.c 文件必须是第一个依赖项。

link_info: 和 route: 规则颠倒了 .c 和 .h 文件，而 sequence: 规则列出了 .h 文件两次！

# nginx - nginx + php-fpm。如何重写？

> ID：13205870
> 
> 赞同：2
> 
> 时间：2012-11-03T04:14:06.310
> 
> 标签：nginx, rewrite

我有以下主机配置文件的一部分。

```
location / {
    try_files           $uri /frontend.php;
}

location /backend/ {
    try_files           $uri /backend.php;
}

location ~ \.php$ {
    include             fastcgi_params;
    fastcgi_pass        127.0.0.1:9000;
    fastcgi_param       SCRIPT_FILENAME $document_root$fastcgi_script_name;
} 
```

如何仅使用 nginx 规则从 $_SERVER['REQUEST_URI'] 中删除“/backend”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:26:32.723

使用 map 指令创建一个新的请求 uri 变量，然后使用这个新变量设置 fastcgi_param REQUEST_URI。经过测试，它可以工作。

```
### update REQUEST_URI
map $request_uri $new_request_uri {
  default $request_uri;               # for frontend request, still use $request_uri
  ~^/backend(?P<suffix>.*)$ $suffix;  # for backend request, only use the suffix after "/backend"
}

server {
  ...

  location ~ \.php$ {
    include        fastcgi_params;
    fastcgi_pass        127.0.0.1:9000;
    fastcgi_param       SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param  REQUEST_URI        $new_request_uri;
  }
} 
```

# python - 以递归方式将项目添加到列表中

> ID：13205875
> 
> 赞同：2
> 
> 时间：2012-11-03T04:15:27.783
> 
> 标签：python, list, recursion

你好。我想知道是否有一种方法可以递归地将项目添加到列表中。该函数应该打印与 fname 匹配的文件的路径名。所以 fname 是文件名，path 是文件所在的文件夹。如果路径文件夹中有文件夹，它将进入并查找 fname 文件。到目前为止，我能够找到所有文件。但我无法递归地附加列表。

```
def findAll(fname, path): 
 lst= []
 for item in os.listdir(path):
        n = os.path.join(path, item)
    try:
        if item == fname:
            lst.append(n)
    except:
        findAll(fname,n)
return lst 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:46:52.777

Normally, I wouldn't give a full solution because this smells like homework (which is also why I'm avoiding `os.walk`), but since you have posted your attempt, here's an explanation and a solution:

For one thing, every time you call `findAll`, you initialize `lst`. Sure, you return it at the end, but you don't do anything with the return value, so the effect `lst.append` is contained within the recursion and is therefore not visible outside. Let me try to draw diagram to explain this (with one level of recursion):

```
+--------------------------------------------------+
|Outer Level:                                      |
|                                                  |
|`lst = []`                                        |
|found file f1 with name fname                     |
|`lst.append(f1)`                                  |
|+------------------------------------------------+|
||Inner Level                                     ||
||                                                ||
||`lst=[]`                                        ||
||found file f2 with name fname                   ||
||`lst.append(f2)`                                ||
||`return lst`                                    ||
|+------------------------------------------------+|
|a list is returned from recursive call,           |
|but not assigned to a variable.                   |
|Therefore, `lst` remains unchanged                |
+--------------------------------------------------+ 
```

There are a couple of ways by which you can fix this:

1.  move `lst` to a scope outside `findAll` (personally, this is what I would do)
2.  use the return value from the recursive call to modify `lst`

**move `lst` to a scope outside `findAll`**

```
lst= []
def findAll(fname, path): 
    global lst
    for item in os.listdir(path):
        n = os.path.join(path, item)
        try: # really though, you don't need to use try/except here
            if item == fname:
                lst.append(n)
            else:
                findAll(fname,n)
        except:
            pass 
```

After `findAll` has terminated, `lst` will contain the values you want

**use the return value from the recursive call to modify `lst`**

```
def findAll(fname, path, answer=None):
    if answer == None:
        answer = []
    for item in os.listdir(path):
        n = os.path.join(path, item)
        try:
            if item == fname:
                answer += [n]
        except:
            findAll(fname,n, answer)
    return answer 
```

Hope this helps

PS: of course, the non-homework way to do this would be to use `os.walk`:

```
answer = []
def findAll(fname, dirpath):
    dirpath, dirnames, filenames = os.walk(dirpath)
    for filename in filenames:
        if filename == fname:
            answer.append(os.path.join(dirpath, filename))
    for dirname in dirnames:
        findAll(fname, os.path.join(dirpath, dirname))
# now, answer contains all the required filepaths 
```

**EDIT**: OP asked for a version that doesn't use global variables:

```
def findAll(fname, root, answer=None):
    if answer == None:
        answer = []
     for entry in os.listdir(root):
         if os.path.isdir(os.path.join(root, entry)):
             answer += findAll(fname, os.path.join(root, entry))
         else:
             if entry == fname:
                 answer.append(os.path.join(root, entry))
     return answer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:19:42.330

你需要用你的递归调用来扩展你的列表

```
list.extend(findAll(fname,n)) 
```

你也可以检查某些东西是否是一个目录`os.path.isdir(n)`

但我认为你的脚本有更多的问题

afaik`listdir`只返回名称，而不是目录的路径....

所以你需要打电话 `findAll(fname,os.path.join(path,n))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:56:41.767

如果您使用的是基于 Unix 的系统，则可以使用`find`该`subprocess`模块 .. 我认为这将是检索与文件名匹配的所有路径的最快方法。然后，您可以`split()`对输出执行 a 以使其成为列表：

```
>>> import subprocess
>>> lst = subprocess.check_output('find . -name "*rst"', shell=True)
>>> print lst
    ./SphinxWorkspace/doc/chapter1.rst
    ./SphinxWorkspace/doc/index.rst
    ./SphinxWorkspace/doc/tables.rst 
```

您始终可以拆分命令并避免`shell=True`

结帐：[http](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module) ://docs.python.org/2/library/subprocess.html#using-the-subprocess-module ..希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T04:47:00.770

Not related to the question *per se* but I believe that `os.walk` would help you out:

```
allFiles = []
for root, dirs, files in os.walk(basedir):
    [allFiles.append(file) for file in files] 
```

Check out `help(os.walk)`, it comes with a great example on how to use this function.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T04:48:04.880

`try/except`在您的代码中使用不正确。`except`子句仅在出现错误时执行。此外，您不使用来自`findAll()`. 您可以跳过在函数内创建列表，而只是懒惰地产生找到的项目：

```
import os

def findAll(filename, rootdir): 
    for item in os.listdir(rootdir):
        path = os.path.join(rootdir, item)
        if not os.path.isdir(path):
            if item == filename: # don't select dirs
                yield path
        else: # path is a dir
            try:
                for found_path in findAll(filename, path):
                    yield found_path
            except EnvironmentError:
                pass # ignore errors

print(list(findAll('python', '/usr'))) 
```

### [输出](http://ideone.com/nen734)

```
['/usr/bin/python'] 
```

如果这不是家庭作业，您可以使用它[`os.walk()`](http://docs.python.org/3/library/os#os.walk)来查找文件：

```
import os

def find_all(filename, rootdir):
    for dirpath, dirs, files in os.walk(rootdir):
        for file in files:
            if file == filename:
                yield os.path.join(dirpath, file)

print(list(find_all('python', '/usr'))) 
```

### [输出](http://ideone.com/nwdknc)

```
['/usr/bin/python'] 
```

它与预期的输出相同。

# php - PHP多维数组到JSON

> ID：13205877
> 
> 赞同：1
> 
> 时间：2012-11-03T04:15:35.397
> 
> 标签：php, arrays, multidimensional-array, json

因此，我试图找出将 MySql 表数据转换为多维 PHP 数组或将该多维数组转换为 json 字符串的最佳方法。

本质上，我想要做的是有一个 php 包含返回 JSON 字符串，这样我就可以遍历它。我需要一个具有多个值的键，所以我不能 100% 确定我朝着正确的方向前进。

我想为同一个键分配多个值，例如：

```
[{"key1": "package1", "package2", "package3"}, {"key2": "package1", "package2", "package3", "package4"}] 
```

我认为这行不通吗？因为我没有任何类型的索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:19:44.873

那不是有效的 JSON。您正在寻找的结构将类似于：

```
[
 {"key1": ["package1", "package2", "package3"]},
 {"key2": ["package1", "package2", "package3", "package4"}]
          ^ An array as the value to the key "key1", "key2", etc..
] 
```

在 PHP 方面，您需要类似以下内容：

1.  对于从 MySQL 获取的每一行
    *   `$arr[$key]`= <新数组>
    *   对于每个包裹：
        *   将包附加到`$arr[$key]`
2.  回声`json_encode($arr)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:19:35.077

JS 数组有一个隐式数组键控，从索引 0 开始。你得到的是一个完全有效的 JS 数组，相当于写了：

```
var x = []; // create new empty array
x[0] = {"key1": .... }; // first object
x[1] = {"key2": ....} // second object 
```

请注意，您的`{}`子对象的内容无效。

您永远不应该手动构建 JSON 字符串。它太不可靠而且容易搞砸。使用本机数据结构（php数组/对象）更容易，然后使用`json_encode()`它们。在该过程的另一端同上 - 不要手动解码字符串。转换为原生数据结构（例如`json_decode()`, `JSON.parse()`），然后直接处理原生结构。

本质上，JSON 是一种传输格式，而不是一种操作格式。

# ios - 如何在 Objective C 上的方法中添加观察者

> ID：13205882
> 
> 赞同：0
> 
> 时间：2012-11-03T04:16:57.577
> 
> 标签：ios

我不知道这是否可能，但我需要`(void)setTargetRect:(CGRect)targetRect inView:(UIView *)targetView` 从 UIMenuController 类向该方法添加一个观察者。我需要知道这个对象的 targetRect。如果这是可能的，苹果会允许这样做吗？谢谢。

# c++ - 性能方面，使用“nullptr”还是只使用“0”更快？

> ID：13205885
> 
> 赞同：0
> 
> 时间：2012-11-03T04:17:12.847
> 
> 标签：c++, performance, visual-c++, c++11

例如：

```
object* pObject = nullptr; 
```

或者：

```
object* pObject = 0; 
```

同样，哪一个性能更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:23:34.733

`nullptr`是类型的`std::nullptr_t`，因此构造函数被重载。这意味着它为 null 的事实在类型中进行了编码，因此理论上可以通过避免条件来更快。

指针显然没有重载的构造函数，因此无论您使用`0`还是`nullptr`无关紧要。相同的机器代码，相同的性能。

无论如何，`nullptr`当你想要一个空指针时就去吧。小心，`0`因为它会调用整数重载而不是指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T04:27:17.850

它们完全一样。`0`文字可用于初始化指针的事实纯粹是语言语法的一部分并由编译器处理；结果与使用`nullptr`初始化指针相同：您得到一个空指针。

`nullptr`是类型系统的一部分，与生成的机器码无关。（它的存在是为了有一个指针类型的文字，它过去并不存在。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T04:21:44.693

我假设您指的是 std::string。

我还假设您打算输入`string* mystr = 0;`. 如果不是指针，则不能为空。

他们几乎可以肯定编译成完全相同的东西，使用你喜欢的任何东西。

* * *

编辑为`object*`，我的答案是一样的。这两者几乎肯定会编译成相同的东西，所以使用你喜欢的任何东西。

# facebook - 继承自“like”的 facebook 自定义操作是否显示在 FQL 的“like”表中？

> ID：13205890
> 
> 赞同：1
> 
> 时间：2012-11-03T04:18:18.250
> 
> 标签：facebook, facebook-fql

我创建了一个自定义对象和一个自定义操作，可以在从 Facebook 上的 Like 继承的对象上执行。我已要求该网站的用户向我提供“阅读流”权限。我可以在 FQL 中查询 like 表上的 object_id 以获取 user_id 列表吗？

我想从 FQL 进行查询，例如：

```
SELECT user_id FROM like WHERE object_id="OBJECT_ID_OF_MY_CUSTOM_OBJECT" 
```

# java - 我的 java 程序似乎跳过了 try{}，执行了 catch{}，然后抛出了 NullPointerException。我该怎么办？

> ID：13205893
> 
> 赞同：2
> 
> 时间：2012-11-03T04:18:50.287
> 
> 标签：java, null, nullpointerexception

我正在编写一个程序来计算任何给定文本文件中的单词、音节和句子的数量。我不需要帮助来查找这些数字，但是即使我正确输入了文件名，我的程序（目前只能查找文本文件中的字数）也不会导入文本文件。文本文件与源代码位于同一文件夹中。相反，它每次都告诉我我输入的文件扩展名错误（请参阅我的 catch{}），然后继续抛出一个空指针。我不知道是什么原因造成的。有什么建议么？

```
import java.io.*;
import java.util.*;

public class Reading_Lvl_Calc {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int words = 0;
        String fileName;
        Scanner scan;
        Scanner keyread = new Scanner(System.in);
        System.out.println("Please enter a file name (or QUIT to exit)");
        fileName = keyread.nextLine();
        File doc = new File(fileName);
        //while(scan.equals(null)){
        try
        {   
            scan = new Scanner(doc);
        }
        catch(Exception e)
        {   
            if(fileName.substring(fileName.indexOf(".")) != ".txt")
            System.out.println("I'm sorry, the file \"" + fileName + "\" has an invalid file extension.");
            else 
            System.out.println("I am sorry, the file \"" + fileName + " \" cannot be found.\n The file must be in the same directory as this program");
            scan = null;
        }
    //  }
        while(scan.hasNext()){
            words++;
            scan.next();
        }
        System.out.println(words);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:22:27.517

你的 catch 设置`scan = null`，然后在下一行（在 catch 之外）使用`scan.hasNext()`- 如果你通过 catch 你知道 scan 是空的，所以这会给你一个 NullPointerException。

您可能应该重新抛出异常或使代码足够健壮以应对空扫描仪（即什么也不做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:56:40.103

试试这个...

```
try{   
    scan = new Scanner(doc);
}catch(Exception e){   
    e.printStackTrace();
} 
```

看看`Scanner`初始化有什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T09:03:49.303

如果您从命令行运行，请将目录更改为源文件所在的文件夹。（我假设类文件和 txt 文件也在同一个目录中）

如果源文件在 c:\src

C：

cd c:\src

java Reading_Lvl_Calc

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T11:48:15.440

将运算符替换为 equal() 进行比较：

```
 if(fileName.substring(fileName.indexOf(".")) != ".txt")
    to
        if((fileName.substring(fileName.indexOf("."))).equals(".txt")) 
```

* * *

以上while条件我们可以验证scan obj是否为null，然后迭代scan obj.....

```
if(scan != null){
    while(scan.hasNext()){
        words++;
        scan.next();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T05:22:35.397

在对象（例如字符串）上使用 '==' 和 '!=' 运算符通常是一个坏主意，因为对象变量的实际值是内存地址，因此对象通过引用进行比较，在您的情况下不是预期的效果：您不在乎 fileName.substring(fileName.indexOf(".")) 和 ".txt" 是否在内存中共享相同的位置（它们不会）。使用 .equals() 代替按值进行比较。否则测试将始终返回 false 并且您的 if 语句是无用的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T05:57:47.010

我同意 ValekHalfHart 的观点，并在我检查后告诉你，我认为以下代码将处理“文件扩展名无效”问题。

更改

```
if(fileName.substring(fileName.indexOf(".")) != ".txt") 
```

到

```
if(!fileName.substring(fileName.indexOf(".").equals(".txt")) 
```

这应该这样做

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-03T12:15:42.280

当扫描仪创建失败时，没有必要做任何与扫描仪相关的事情，因此您应该将所有扫描仪代码放入 try 块中，并将一些错误消息放入 catch 块中。在继续创建扫描仪之前，应检查文件名。

```
 try
    {   
        scan = new Scanner(doc);
        while(scan.hasNext())
        {
            words++;
            scan.next();
        }
        System.out.println(words);
    }
    catch(Exception e)
    {
        System.out.println("Scanner creation failure:" + e.getMessage());
    } 
```

# android - Android客户端服务器编程。

> ID：13205894
> 
> 赞同：1
> 
> 时间：2012-11-03T04:18:54.023
> 
> 标签：android, jsp, servlets

我想学习Android客户端服务器通信编程。我不太喜欢 PHP，我在大学学到了 Servlet 和 JSP 帮助我们实现客户端服务器通信，我想学习一些关于这种模式的东西。谁能给我推荐一些适合初学者的不错的简洁教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:32:50.280

Android 开发者门户网站收集了非常好的[教程](http://developer.android.com/training/index.html)。如果您对构建原生应用程序感兴趣，我建议您从那里开始。如果您熟悉标准前端堆栈（HTML、CSS、JavaScript），请查看[PhoneGap](http://phonegap.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T04:39:17.377

在客户端，有很多教程，比如这个 ( [http://www.androidhive.info/2011/10/android-making-http-requests/](http://www.androidhive.info/2011/10/android-making-http-requests/) ) 可以向您展示如何从您的 android 发出 HTTP 请求使用[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)类的应用程序。

在服务器端，很难指向单个资源，因为有很多资源。但是你可以从 servlet world 开始：[http ://www.servletworld.com/](http://www.servletworld.com/)

# c# - 通过 VB.NET 2008 的 Web 浏览器组件下载具有动态和会话维护 URL 的图像

> ID：13205905
> 
> 赞同：-1
> 
> 时间：2012-11-03T04:20:35.720
> 
> 标签：c#, vb.net, httpwebrequest, browser, webbrowser-control

如何使用 VB.NET 的 Web 浏览器控件下载嵌入式图像，我们可以通过右键单击图像并执行“将图片另存为”来实现？

* * *

我正在开发一个 VB.NET 项目，该项目可以爬取特定网站并下载其内容，包括嵌入其中的任何图像。现在我的问题是，由于站点上维护的安全性，*我无法使用 Web 客户端和 HTTP 请求/响应类*来达到我的目的。

该网站由一些[JavaScript](http://en.wikipedia.org/wiki/JavaScript)和[jQuery](http://en.wikipedia.org/wiki/JQuery)维护。此外，它通过在每个[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)请求上跟踪的一组 cookie 和隐藏字段来维护会话。如果发现任何不连续性，则会重定向到登录页面。

我通过使用 Web 浏览器组件找到了解决此问题的方法，该组件在维护安全性方面对我很有帮助。

**但是我的下一组问题是存储 HTML 源文件以外的内容，比如嵌入图像，这是我现在主要关心的问题，我相信许多软件开发人员必须面临同样的问题。**

我在 C# 中找到了各种我修改过的帖子，但它对我不起作用，比如在*[C# 代码中保存整个网页？（带图像/格式）](https://stackoverflow.com/questions/1430918/c-sharp-code-for-saving-an-entire-web-page-with-images-formatting)*。

另外，我有一个项目解决了*[Visual Basic 2005 中的 Save image from web-browser control 中](http://www.freelancer.in/projects/Visual-Basic-NET/Save-image-from-webbrowser-control.html)*的相同问题，但为此我的公司政策不允许我这样做。

如何自动化右键单击和“将图片另存为”的过程？

有没有真正的解决方案？如果没有，那么是否有任何替代解决方案，例如从临时文件夹中复制。如果是，请提供解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:33:47.473

为什么您需要实际下载图像来完成您的任务？另外，请记住，您实际上可以使用 Web 请求跟踪/发送 cookie（无需实际的浏览器控制）。[您可以使用HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)解析那些隐藏字段的 HTML 。

因此，我建议重新访问该路线以实现自动化，而不是尝试使用浏览器控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:15:50.640

我没有得到第一种方法的答案，即使用 Web 浏览器组件下载，但我得到了从“临时 Internet 文件”文件夹复制的替代方法。

这是我的代码片段，它正在为我完成这项工作。

```
Private Function get_Image(ByVal src As String)
    '******* code for storing Images from temporary internet files folder.......
    Dim filename As String = get_File()
    Dim gifFiles As String() = Directory.GetFiles("C:\Documents and Settings\123\Local Settings\Temporary Internet Files\", "*.*", SearchOption.AllDirectories)
    Dim imgno As Integer = 0
    For Each file As String In gifFiles
        'Dim fsi As String = Directory.GetLastWriteTime(file).ToString
        If My.Computer.FileSystem.FileExists(file) And file.Contains("attachDisplay") And Not filename.Contains("File") Then  ' This is HardCoded part for my images that are having dynamic url as my base_URL/attachDisplay?_XYZ (so in temp it is storing as attachDisplay[i]; i=1,2...)
            Dim curFileDT As Date = Directory.GetLastWriteTime(file)
            If Date.Compare(lastFileDT, curFileDT) = -1 Then ' if Last file date is before than current File write time
                imgno += 1

                My.Computer.FileSystem.CopyFile(file, filename & " Img No." & imgno & file.Substring(file.LastIndexOf(".")), True)
            End If
        End If
    Next
    lastFileDT = Date.Now 'My lastFileDT variable is declared at class level and first initialization at form load.
    '*******
End Function 
```

这不是下载图像的正确方法，但它目前正在为我完成这项工作。

# php - 在提交表单时，执行一些 PHP，然后执行 Javascript 代码

> ID：13205907
> 
> 赞同：0
> 
> 时间：2012-11-03T04:21:12.597
> 
> 标签：php, javascript

这就是我想要做的：提交表单时（通过单击按钮）

1.  我想使用 PHP 向 MySQL 数据中插入一些数据
2.  基于插入的成功，我想运行一些 JavaScript(JS) 代码。（实际上，将使用 AJAX 从 JS 数组中插入更多数据，但在下面的测试代码中，我只是在数组中显示警报）。另外，我需要先执行 PHP，因为我需要使用该`mysqli_insert_id()`函数通过 PHP 从 MySQL 获取 autoincremetn ID。
3.  插入所有数据后（或 PHP 和 JS 代码都已执行），我想返回到发起提交的同一页面，在测试代码中调用此页面`test.php`。

以下是我的测试代码（在`test.php`页面中）：

```
<?php

// Require the configuration which controls controls error reporting:
require ('config.inc.php');

// Require the database connection:
require (MYSQL);

/* PAGE CONTENT STARTS HERE! */
?>
<!DOCTYPE html>
<html lang="en">
<head> 
<meta charset="utf-8">
<!--JQUERY-->
<script type="text/javascript" src="js/jquery-1.8.2.min.js" ></script>

<script type="text/javascript">
    var store_categories = []; 
    function init_filtering() {
        store_categories.push('data1');
        alert ("alert1: "+ store_categories);
    }
</script>

<script type="text/javascript">$( init_filtering );</script>

</head>  
<body>

<?php
    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
      $q = "INSERT INTO sms_category (sms_updated_id, category) VALUES (1, 'categories')";      
      $r = mysqli_query ($dbc, $q);
    }

if (mysqli_affected_rows($dbc) == 1) {
?>
    <script type="text/javascript">
        alert ("alert2: "+ store_categories);
    </script>
<?php
} // end if
?>

<form id="edit_data" action="test.php" method="post">
<input type="submit" value="Save">
</form>

</body>
</html> 
```

现在发生了什么：

1.  Alert1 正确显示`store_categories`数组中的数据
2.  但是当我点击提交按钮时，Alert2 仍然显示空白（或者，只有“alert2:”，即无法显示`store_categories`数组中的值）。

所以，这是我的问题：

1.  为什么 alert2 不显示`store_categories`数组？
2.  `store_categories`当我单击提交按钮时，我该怎么做才能使数组具有其值？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:25:22.337

可能有效 试试看。我认为提交表单时只会显示第二个警报。

```
<script type="text/javascript">init_filtering()</script>
    <?php
        if ($_SERVER['REQUEST_METHOD'] == 'POST') {
          $q = "INSERT INTO sms_category (sms_updated_id, category) VALUES (1, 'categories')";      
          $r = mysqli_query ($dbc, $q);
if (mysqli_affected_rows($dbc) == 1) {
   ?>
        <script type="text/javascript">
            alert ("alert2: "+ store_categories);
        </script>
    <?php
    } 
        }

        ?> 
```

# java - OpenCV putText 方向 Android

> ID：13205915
> 
> 赞同：2
> 
> 时间：2012-11-03T04:22:59.167
> 
> 标签：java, android, opencv, text, fonts

下面的函数以水平方式打印文本。我想以垂直方式打印文本。我不想使用旋转功能，因为它会增加处理时间。我怎样才能做到这一点？

```
void org.opencv.core.Core.putText(Mat img, String text, Point org, int fontFace, double fontScale, Scalar color, int thickness)

Draws a text string.

The function putText renders the specified text string in the image. Symbols that cannot be rendered using the specified font are replaced by question marks. See "getTextSize" for a text rendering code example.

Parameters:
img Image.
text Text string to be drawn.
org Bottom-left corner of the text string in the image.
fontFace Font type. One of FONT_HERSHEY_SIMPLEX, FONT_HERSHEY_PLAIN, FONT_HERSHEY_DUPLEX, FONT_HERSHEY_COMPLEX, FONT_HERSHEY_TRIPLEX, FONT_HERSHEY_COMPLEX_SMALL, FONT_HERSHEY_SCRIPT_SIMPLEX, or FONT_HERSHEY_SCRIPT_COMPLEX, where each of the font ID's can be combined with FONT_HERSHEY_ITALIC to get the slanted letters.
fontScale Font scale factor that is multiplied by the font-specific base size.
color Text color.
thickness Thickness of the lines used to draw a text. 
```

另见：org.opencv.core.Core.putText ( [http://docs.opencv.org/modules/core/doc/drawing_functions.html#puttext](http://docs.opencv.org/modules/core/doc/drawing_functions.html#puttext) )

# jquery - 使用 jquery 将外部网站 div 加载到 iframe 中

> ID：13205918
> 
> 赞同：1
> 
> 时间：2012-11-03T04:23:53.210
> 
> 标签：jquery, html, iframe, load

我有一个针对特定受众的部门网站。我希望在每篇文章的末尾添加一个外部站点的相关链接列表。

链接列表将在一个 div 中，例如：`<div id="linktoc"><a href="external.com">link 1</a>, <a href="external2.com">link 2</a>, etc...</div>`

iframe 将低于 div

现在的目标是将`<div class="article">HTML Content I want</div>`上面的外部链接中的 div 加载到 iframe 中。

我的 jquery 知识和基本的 html 知识有限。我怀疑这会产生很大的不同，但会被加载到 Sharepoint 2007 中的内容编辑器 Web 部件中。

感谢任何能够提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:31:39.127

[由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能这样做- 浏览器不允许您操作属于另一个域的网页。

如果“外部”站点属于同一个域，它可以工作：

*   您的页面：[http ://team.company.com/myPath/mySite/myPage.aspx](http://team.company.com/myPath/mySite/myPage.aspx)
*   “外部”链接：[http ://team.company.com/otherPath/otherSite/otherPage.aspx](http://team.company.com/otherPath/otherSite/otherPage.aspx)

# php - JavaScript：如何获取绝对的基本 URL？

> ID：13205919
> 
> 赞同：0
> 
> 时间：2012-11-03T04:24:06.167
> 
> 标签：php, javascript, jquery, html, templates

我想在我的 HTML/PHP 模板中避免使用 JavaScript。只要我的外部（包括 JS-File）中不需要基本/根 URL，一切正常。

**问题**：有人知道将 JS 逻辑（下面的代码）放入外部 JS 文件的解决方案吗？主要问题：如何找出_BASE_URL_？不幸的是，它不是一种可以通过操作属性获取 URL 的形式。我不想编译 JS/PHP 混合文件，它必须是纯 JS。

**想法**（太脏）：body-tag 顶部的隐藏输入，id="root_url" 或主 JS 文件中的变量：root_url = "http://localhost/projects/project/version/"。这很容易失败，因为没有文件可以独立工作。

也许有一个很好的 htaccess/mod_rewrite 解决方案？

**注意**：我不想获取主机名或“真正的”根目录，因为它也必须在子文件夹中工作！

**代码**：

```
<script type="text/javascript">
// document ready
$(function() {
    // function: load items
    function load_items() {
        $("#items").load("<?php echo _BASE_URL_?>/items.php");
    }

    // load items!
    load_items();
});
</script>

<!-- target div --> 
<div id="items">loading</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:36:21.637

我可以看看你的 html 结构吗

```
function getBaseURL () {
   return location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + "/";
} 
```

如果你需要一个路径也使用这个

```
path = window.location.pathname.split( '/' );
console.log(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T09:29:19.900

我们可以这样使用吗

```
function getBaseURL () {
    return location.protocol + "//" + location.hostname + location.pathname;

} 
```

# ruby - zip ruby 查杀文件内容

> ID：13205920
> 
> 赞同：4
> 
> 时间：2012-11-03T04:24:12.833
> 
> 标签：ruby, zip

我正在从文件夹中压缩文件（无法更改的 Ruby 1.8.6）。现在早些时候，文件中的行数减少了，压缩效果很好。但是当我向 zip 添加更多内容时，它给了我看起来像损坏内容的文件。这是长文件的排序视图。超过 5000 行的文件。

有什么方法可以压缩完整内容而不会损坏 .

内容喜欢

```
Family = 1,1,1 
```

就是现在`Fam`

这是一个带有类的代码

```
 def download
    FileUtils.rm_rf Dir.glob("#{RAILS_ROOT}/#{params[:id]}/xx.zip")
    zip_them_all = ZipThemAll.new("#{RAILS_ROOT}/#{params[:id]}/xxx.zip","#{RAILS_ROOT}/#{params[:id]}/")
    zip_them_all.zip
 end

class ZipThemAll
    attr_accessor :list_of_file_paths, :zip_file_path
    def initialize( zip_file_path, list_of_file_paths )
        @zip_file_path = zip_file_path
        list_of_file_paths = [list_of_file_paths] if list_of_file_paths.class == String
        @list_of_file_paths = list_of_file_paths
    end

    def zip
        zip_file = Zip::ZipFile.open(self.zip_file_path, Zip::ZipFile::CREATE)
        self.zip_em_all( zip_file, @list_of_file_paths )
        zip_file.close
    end

    def zip_em_all( zip_file, file_list, sub_directory=nil )
        file_list.each do | file_path |
            if File.exists?file_path
                if File.directory?( file_path )
                    file_directory_list = []
                    # Find.find( file_path ) do | path |
                    file_directory_list = Dir.entries( file_path )
                    file_directory_list.delete(".")
                    file_directory_list.delete("..")
                    file_directory_list = file_directory_list.inject([]) do | result, path |
                        result << file_path + "/" + path
                        result
                    end
                    self.zip_em_all( zip_file, file_directory_list, (sub_directory == nil ? '.' : sub_directory) + "/" + File.basename(file_path) )
                else
                    file_name = File.basename( file_path )
                    if sub_directory != nil
                        if zip_file.find_entry( sub_directory ) == nil
                            dir = zip_file.mkdir( sub_directory )
                        end
                        file_name = sub_directory + "/" + file_name
                    end
                    if zip_file.find_entry( file_name )
                        zip_file.replace( file_name, file_path )
                    else
                        zip_file.add( file_name, file_path)
                    end
                end
            else
                puts "Warning: file #{file_path} does not exist"
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:17:57.130

请不要将参数直接插入到路径中。

这允许恶意用户任意导航您的系统。

![鲍比桌](../Images/ae64e1cbe3e51cba804e9c9a5c5a2db7.png).

# android - 图库中的图像缓存

> ID：13205923
> 
> 赞同：0
> 
> 时间：2012-11-03T04:24:56.917
> 
> 标签：android

可以将图像保存在应用程序缓存中，并将这些相同的图像用于图库。这些图像必须从互联网上下载。能给我解释一下怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:48:01.030

Yes you can,,

Use `NetworkImageService` which will fetch image remotly from server.

```
class NetworkImageService {

public Image getImage(name) { ... }

} 
```

Just make another subclass.

```
 class CachedNetworkImageService extends NetworkImageService {

Cache cache = new Cache();

public Image getImage(name) { ... 
      Image img = cache.get(name);
      if( img == null ) {
             img = super.getImage(name);
             cache.put( name, img );
      }
      return img.
}
} 
```

Read about Hashmap. It will work...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:50:24.313

我会为此使用 LruCache。[在这里](http://developer.android.com/reference/android/util/LruCache.html)阅读文档。

# java - 如何在 netbeans 中创建 package-info.java 文件？

> ID：13205925
> 
> 赞同：5
> 
> 时间：2012-11-03T04:25:36.273
> 
> 标签：java

任何人都可以告诉我如何在 netbeans 中创建 package-info.java 文件，当我尝试创建一个名为 package-info 的新 java 文件以指定包级别注释时，抛出类名无效错误

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-17T10:02:33.473

package-info.java 不完全是 java 源文件。

正确的做法是，在创建新文件时，不要创建 Java Class 文件。相反，创建一个 Java 包信息文件，也在 Java 类别中。这将触发 New Java Package Info 向导。

![在此处输入图像描述](../Images/1acb5e6dd931a9b7a44905366867dcc4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T10:55:59.220

这并不完全正确。您可以在 Other > Other > Empty File 下创建一个名为 package-info.java 的文件

您可以将包的 Javadoc 注释和“包”行放在那里：

```
/**
 * Here are some comments about this package.
 * Here is a comment linking to {@link java.lang.Object}.
 */
package packagename; 
```

# java - 音符的Java枚举

> ID：13205926
> 
> 赞同：3
> 
> 时间：2012-11-03T04:25:38.243
> 
> 标签：java, enums

您将如何在 Java 中创建音符的枚举，每个音符都有一个八度音阶，然后是一个键控变量？这是我目前所拥有的......

```
 public enum Notes
    {
            c,
            cS,
            d,
            dS,
            e,
            f,
            fS,
            g,
            gS,
            a,
            aS,
            b;
            int octave;
            boolean isPlaying;
    } 
```

所以当我在我的代码中访问枚举时，我会写这样的东西......

```
Notes.c.octave = 4;
Notes.c.isPlaying = true; 
```

现在这是我的问题：如何为每个八度中的每个音符设置一个 isPlaying 布尔值？

像这样：

```
Notes.c.octave.isPlaying = true; 
```

或者我必须像这样：

```
public enum Notes
{
        c1,
        cS1,
        d1,
        dS1,
        e1,
        f1,
        fS1,
        g1,
        gS1,
        a1,
        aS1,
        b1
        c2,
        cS2,
        d2,
        dS2,
        e2,
        f2,
        fS2,
        g2,
        gS2,
        a2,
        aS2,
        b2;

        etc...

        boolean isPlaying;
} 
```

提前感谢您抽出宝贵时间回答这个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:14:06.867

**你不应该修改你的枚举字段！！！**

原因是每个实例在 JVM 中都是唯一的（就像一个单例），另一个使用相同注释的线程将共享相同的`playing`字段，这是一个严重错误的设计。

此外，您的枚举应该命名为单数`Note`，而不是复数`Notes`。原因应该很明显：枚举的每个实例都代表一个音符，而不是多个音符。

正确的方法是创建一个具有 3 个字段的类：

```
public class Tone {
    private Note note; 
    private int octave;
    private boolean playing;
    // with getters and setters
} 
```

* * *

由于每个音符都可以降♭，升♯，双降

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T20:44:40.320

您可以查看 Manufaktura.Music 库： http: [//manufaktura-programow.pl/En](http://manufaktura-programow.pl/En)

它包含步骤、音高、节奏值、音阶等的对象模型。它在 c# 中，但语法类似于 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T04:38:33.103

你不需要`isPlaying`标志摆脱那个只是存储实例的`Notes`实例并检查它。

```
Notes playingNote = Notes.c1; 
```

当你必须检查演奏音符时

```
 playingNote == Notes.c1 
```

您只需要更改的是构造函数。声明接受 Octave 值的构造函数。

```
c1(1);
private int octave = 0;
private Notes(int octave){
        this.octave= octave;
} 
```

*注意：假设乐器的八度没有改变。虽然不是乐器专家。对于同时多个音符，您可以使用 EnumSet*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T04:28:41.547

我会移动到一个对象而不是一个枚举。您可以创建一个对象 JavaNote，它具有： String note; 整数八度；boolean isPlaying;

为什么要打扰枚举？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T04:30:51.203

`octave`使用默认变量 as`0`和`isPlaying`变量创建枚举元素，`false`如下所示：

```
 public enum Notes
  {
        c(0, false),
        cS(0, false),
        d(0, false),
        dS(0, false),
        e(0, false),
        f(0, false),
        fS(0, false),
        g(0, false),
        gS(0, false),
        a(0, false),
        aS(0, false),
        b(0, false);
        int octave;
        boolean isPlaying;

        Notes(int octave, boolean isPlaying){
            this.octave = octave;
            this.isPlaying = isPlaying;
        }

        int getOctave(){
            return this.octave;
        }

        boolean isPlaying(){
            return this.isPlaying;
        }
   } 
```

现在您可以将枚举用作：

```
Notes.a.octave = 5;//assign the value if required
Notes.a.isPlaying = true;//assign the value if required
System.out.println(Notes.a.octave);//this will print 5
System.out.println(Notes.a.getOctave());//this will print 5
System.out.println(Notes.a.isPlaying);//this will print true
System.out.println(Notes.a.isPlaying());//this will print true 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T04:54:50.600

这是一个很好的问题！

我相信你的第一部分是正确的：

```
/** An enum of the valid note names */

public enum Note {
    c,
    cS,
    d,
    dS,
    e,
    f,
    fS,
    g,
    gS,
    a,
    aS,
    b;
} 
```

您应该创建一个具有私有*octave*和*isPlaying属性的类以及**Note*枚举的实例。

也许你最终会得到这样的代码：

```
class InstrumentNote {
    private Note note;
    private int octave = 0;
    private boolean isPlyaing = false;

    public InstrumentNote(Note someNote, int someOctave) {
        note = someNote;
        octave = someOctave;
        isPlaying = false;
    }
}

class TestIt {
    public static void main(String[] args) {
        int octaveCount = 8; // big piano
        Set<Note> instrumentNotes = buildInstrument(octaveCount);
    }

    /** 
     *  Creates a Set of Notes.  A Set is used because each instrument
     *  should consist of a group of unique note instances, based on how
     *  many octaves it has.
     */

    public static Set<InstrumentNote> buildInstrument(int numOctaves) {
        Set<InstrumentNote> noteSet = new TreeSet<InstrumentNote>();
        for (int i = 0; i < numOctaves; i++) {
            for (Note n : Note.values()) {
               noteSet.add(new InstrumentNote(n, i, false));
            }
        }
        return noteSet;
    }

} 
```

八度音程是否应该是枚举的一部分，这是一个很好的问题。

音符的八度不应该改变......但我认为它更适合作为也有 Note 实例的类的私有成员。

由于我不确定您的要求，因此我试图想象它们...

我设想您可以从一组有效音符（如上所示）中创建*乐器*或*歌曲。*

这将为您提供各种灵活性：

*   您可以创建一个具有一组注释的抽象仪器类
*   您可以实现不同种类的乐器（小号一次只能演奏一个音符，钢琴可以演奏多个）
*   你可以实现一首歌曲，它是一系列具有持续时间、音量、风格（断奏、连奏）等的音符......

* * *

如果您想执行上述某些操作，您还需要一种对笔记进行排序的方法（因此可以订购一组笔记）。

您可以使用 Comparator 和/或名为*index*或*order*（或其他东西）的枚举属性来执行此操作。

我将把编写[*NoteComparator*](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)的练习留给你。

我不确定您是否可以使枚举实现接口[*Comparable*](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html) ...

希望其中一些是准确的或有帮助的......

# c# - 在 C# 中开发类似 ammyy 的远程应用程序

> ID：13205927
> 
> 赞同：-5
> 
> 时间：2012-11-03T04:25:57.637
> 
> 标签：c#, .net

我想设计一个像 Ammyy 一样的 C# 应用程序。这也将通过互联网远程控制机器。基本上默认 RDP 仅适用于 LAN 环境。但我也希望它用于互联网场景。请帮助并提供相同的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:37:01.610

不知道你会成功多少。但首先...

LAN 上的 RDP 知道它在专用网络中连接到哪个系统，哪个系统是受信任的（本地 IP 或系统名称都可以）。对于 Internet 上的 RDP，您要连接的系统应该有一个静态 IP 地址。

对于这两种情况，应启用目标系统以接受远程连接。

由于您的目标是互联网，因此目标系统应该有一个公共 IP，或者您可以创建一个服务器应用程序，该应用程序将注册系统与之通信。很像聊天服务器。

您的应用程序应安装在两个系统上。（源和目标）您的应用程序应该首先进行握手以相互交谈，某种身份验证（Windows 从远程登录？）。对于源在目标计算机上执行操作/执行命令（不确定它在 RDP 中是如何完成的），你必须打破你的头脑:)。可能您可以捕获鼠标和键盘事件以及坐标并在目标系统上执行相同的操作。

这只是一个粗略的想法。

# php - ORDER BY with WHERE

> ID：13205928
> 
> 赞同：1
> 
> 时间：2012-11-03T04:26:34.917
> 
> 标签：php, mysql, sql, sql-order-by

我似乎无法让 ORDER BY 与我正在使用的当前 MySQL 查询一起工作！

```
$query = "SELECT * FROM games WHERE game_platform = '$gameType' ORDER BY ASC";

$result = mysql_query($query); 
```

我只是收到以下错误。

警告：

> mysql_fetch_assoc() 期望参数 1 是资源，布尔值在

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T04:27:43.210

`ORDER BY`什么？？

您没有指定要订购的列。您必须指定订单列。像这样的东西。

```
 ORDER BY somefield ASC 
```

但是，如果您在表中调用`ASC`了一个列并且您想按它排序，则必须像这样对其进行转义：

```
ORDER BY `ASC` 
```

因为`ASC`是保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:12:12.727

试试这个代码：

```
$query = "SELECT * FROM games WHERE game_platform = '$gameType' ORDER BY game_platform ASC";
$result = mysql_query($query); 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T04:32:47.760

```
 Please enter colname :

  $query = "SELECT * FROM games WHERE game_platform = '" . $gameType .
     "' ORDER BY colname ASC ";

        $result = mysql_query($query); 
```

# windows-8 - Windows 8 商店应用程序和 Windows Phone 应用程序之间的区别

> ID：13205932
> 
> 赞同：14
> 
> 时间：2012-11-03T04:27:11.670
> 
> 标签：windows-8, windows-phone-8, winrt-xaml, portable-class-library

我知道这看起来很基本，但我花了几个小时查看文档和视频，但似乎找不到答案。对不起，如果我是一个笨蛋。

Windows 8 App Store 开发和 Windows 8 Phone 开发有区别吗？我不确定是否需要在两个 UI 上进行测试？

Ĵ

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T08:54:31.197

这些天来，我一直在想微软将 Windows 8 作为智能手机、平板电脑、Surface 平板电脑、台式机等各种设备的通用操作系统。

我的假设出错了。

Windows RT 在平板电脑上运行，Windows 8 Pro 在桌面上运行，（Windows RT 和 Windows 8 pro 是 Windows 8 操作系统的不同版本）。

Window Phone 8 OS 是微软第二代移动操作系统，在移动硬件下运行。

Windows 为 Windows phone 8 应用程序和 Windows 商店应用程序提供了两个不同的商店。

我开始开发 Windows 商店应用程序，认为它将在 Windows 8 手机上运行。我真的很失望。

如果 android 和 IOS 手机和选项卡共享相同的操作系统，并且单个应用程序在选项卡和手机上运行。我不知道微软为什么不开发这样的window 8 OS。我知道 Windows Phone 8 内部使用的是 Windows 8 内核，但它仍然是不同的操作系统。

要开发 windows phone 8 应用程序，我们必须使用 windows phone 8 sdk。至于 Windows 8 商店应用程序，我们只使用 Visual Studio 和商店应用程序框架。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-03T04:49:24.303

如果您使用过 MVVM 模式（就像您应该使用的那样），那么您可能已经将 XAML 和视图模型、模型分离到单独的项目中。因此，您的非 XAML 项目将几乎 99% 移植到您的 Windows Phone 8 应用程序。会有一些细微的差异，但不会很多。

从您的 XAML（或您的 UI）的角度来看，它们必须有所不同，因为它们是不同的外形尺寸，Windows 8 控件（如 AppBar）不在 Windows Phone 8 中，而某些 Windows Phone 8 控件（如全景图）不在t 在 Windows 8 中。因此，您不能只使用 W8 XAML 并将其塞入 WP8 - 它可能无法正常工作，而且看起来很糟糕。

话虽如此，重用您在 W8 SnapView 中实现的相同策略和设计可能是一个好主意 - 或者至少是一个好的开始。但请记住，我们在这里谈论的是 UI。同时，基于 WinRT 的代码几乎是完全可移植的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T04:44:45.553

它们必须是完全独立的应用程序。虽然 WinRT 和 WP8 api 在许多方面都非常相似，但它们并不完全兼容，屏幕分辨率也不相同。

# java - 一个 char 数组的数组，它是一个扫描器 (Java)

> ID：13205936
> 
> 赞同：0
> 
> 时间：2012-11-03T04:27:30.930
> 
> 标签：java, arrays, char, java.util.scanner

我不知道如何做一个 char 数组的数组，更糟糕的是，一个数组是一个“扫描仪”（System.in）。我会解释：

```
1 = A, J, S.
2 = B, K, T.
3 = C, L, U.
4 = D, M, V.
5 = E, N, W.
6 = F, O, X.
7 = G, P, Y.
8 = H, Q, Z.
9 = I, R. 
```

我想输入一个名称，并从每个字母中接收（输出）等效数字。但我不知道该怎么做。例子：

```
Ericson = 5993165. 
```

但是我不想有一个完整的数字，我希望每个数字都是一个完全独立的索引，因为我想“计算名称”。

这是我在没有扫描仪的情况下尝试的示例：

```
public static void main(String[] args) {

    int[][] arrays = new int[9][3];

} 
```

其中 9 数组的每个索引都是一个 3 个字母的字符数组。也许我的想法完全错误。

非常感谢大家的关注！

编辑：

我正在尝试这样的事情：

```
public static void main(String[] args) {
    char[][][][] Array1 = {{{{1},{'A'},{'J'},{'S'}}}};
    char[][][][] Array2 = {{{{2},{'B'},{'K'},{'T'}}}};
    char[][][][] Array3 = {{{{3},{'C'},{'L'},{'U'}}}};
    char[][][][] Array4 = {{{{4},{'D'},{'M'},{'V'}}}};
    char[][][][] Array5 = {{{{5},{'E'},{'N'},{'W'}}}};
    char[][][][] Array6 = {{{{6},{'F'},{'O'},{'X'}}}};
    char[][][][] Array7 = {{{{7},{'G'},{'P'},{'Y'}}}};
    char[][][][] Array8 = {{{{8},{'H'},{'Q'},{'Z'}}}};
    char[][][] Array9 = {{{9},{'I'},{'R'}}};
    System.out.println('E'+'R'+'I'+'C'+'S'+'O'+'N');
} 
```

这比我之前的想法要好，但我认为我还很远。（同样，主要问题是：这个“ericson”需要是一个扫描仪，因为名称不是一个明确的变量。它可以是任何东西。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:28:52.280

你想要一个字符，为什么不将数组声明为字符

```
public static void main(String[] args) {

char[][] arrays = new char[][] {
  { 'A', 'J', 'S' },
  { 'B', 'K', 'T' },
  { 'C', 'L', 'U' },
  { 'D', 'M', 'V' },
  { 'E', 'N', 'W' },
  { 'F', 'O', 'X' },
  { 'G', 'P', 'Y' },
  { 'H', 'Q', 'Z' },
  { 'I', 'R', '*' }
} ;

} 
```

然后有一个嵌套的for循环遍历数组以查找字母并返回行号+1，因为它从0开始，然后将数字+1放入arraylist

```
ArrayList<int> myArr = new ArrayList<int>();
myarr.add(i); 
```

任何 arraylist 都像一个数组，但它没有固定的大小，你可以继续添加它。这使所有数字保持独立，而不是整体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T08:29:00.947

我会说，是的，让我们停下来用完全不同的方式看待这个问题。

1）那些多维数组占用空间，并不是创建查找表的最有效方式——这就是您使用它的方式。
2）查找表由一种易于计算的算法定义，从'A'开始，每个字母被赋予1-9的值。范围 1-9 在到期时重复。
3) 这需要能够处理来自 a 的任何类型的 String 输入`Scanner`，并单独检查 String 中的每个字母。

这是我的总代码建议：

```
String incomingString = "Ericson";

String outputValue = "";
for (int i = 0; i < incomingString.length(); i++) {
    int numberRepresentation = incomingString.charAt(i);

    if (numberRepresentation >= 'a') {
        numberRepresentation -= 'a';
    } else if (numberRepresentation >= 'A') {
        numberRepresentation -= 'A';
    } 

    numberRepresentation = (numberRepresentation % 9) + 1;

    outputValue += numberRepresentation;
} 
```

* * *

**说明：**

1）迭代整个字符串：

```
for (int i = 0; i < incomingString.length(); i++) {
    int numberRepresentation = incomingString.charAt(i);

    // other code here 

} 
```

我们的incomingString 变量包含我们将要进行计算的字符串。我们在字符串中的每个字符上创建一个`for`循环，将给定字符的整数值存储到变量 numberRepresentation 中。这个整数值是它在 ASCII/Unicode 表中存在的位置的数量。
*优化/扩展*：每次都需要计算任何 String length() 方法调用，可以提取到循环外的常量。

2）规范化字符：

```
 // other code above
    if (numberRepresentation >= 'a') {
        numberRepresentation -= 'a';
    } else if (numberRepresentation >= 'A') {
        numberRepresentation -= 'A';
    }
    // other code below 
```

您可能（或可能不）知道，字符文字可以用作整数，其值在 ASCII 表中。这段代码检查字符是小写（大于或等于'a'的值）还是大写（大于或等于'A'的值）。通过减去 'a' 或 'A' 的值，存储在 numberRepresentation 中的数字就是字符与字母表中的 'a' 的距离。
*优化/扩展*：这些检查只确认字符至少是'a'或'A'，它不检查字符实际上是一个字母，如果它不是一个字母，则应该抛出一个错误。此外，如果使用某些字符方法，可以提高可读性。

3）应用个性化转换：

```
 // other code above
    numberRepresentation = (numberRepresentation % 9) + 1;
    // other code below 
```

这是实际工作完成的地方：计算每个标准化字符值的模数和可能值的数量 (9)。由于这些结果将是 0-8，因此我们将结果加一以使可能的范围为 1-9。
*优化/扩展*：值 9 是一个常量，因此应该提取到本地命名变量。这也将允许编码根据需要更改，即如果您更喜欢 1-5 编码。删除行尾的“+ 1”允许“0”成为可能的输出值。

4）附加到运行输出：

```
 // other code above
    outputValue += numberRepresentation;
    // other code below 
```

在这里，我们的新值连接到当前正在构建的字符串，完成后，它应该是我们计算的字符串。
*优化/扩展*：当这个字符串连接发生在一个循环中时，系统将不断地为新的字符串对象创建/分配空间。这种浪费可以通过使用 StringBuilder 对象来组合一系列计算字符来避免。

**扩展**：最重要的是，如果这段代码要被多次使用，那么绝对应该将它提取到一个方法中，以便可以轻松访问它。

* * *

实现了所有扩展的完成代码：

```
public static String calculateName(String incomingString) throws Exception {
    StringBuilder outputBuilder = new StringBuilder();

    final int encodingRange = 9;
    final int limit = incomingString.length();
    for (int i = 0; i < limit; i++) {
        int numberRepresentation = incomingString.charAt(i);

        if (!Character.isLetter(numberRepresentation)) {
            throw new Exception("Incorrect String format");
        }

        if (Character.isLowerCase(numberRepresentation)) {
            numberRepresentation -= 'a';
        } else {
            numberRepresentation -= 'A';
        }

        numberRepresentation = (numberRepresentation % encodingRange) + 1;

        outputBuilder.append(numberRepresentation);
    }

    return outputBuilder.toString();
} 
```

# c - 如何在正确的列中打印到标准输出？

> ID：13205938
> 
> 赞同：0
> 
> 时间：2012-11-03T04:27:35.933
> 
> 标签：c

我有一个程序，我正在打印到一个文件，我想在稳定的列中打印我的列。

您可以通过查看我的文件的输出来查看我想说的内容

输出： http: [//nopaste.dk/p15072](http://nopaste.dk/p15072)

这是我写的：

```
int func1(int n) {
        if(n==0){return(6);}
    return ((int)log2(n));
}
char levelStrings[7] = {'L','M','H','E','F','C','X'};
fprintf(fp, "%s  %s  %d   %c    ",tString+11,log->file,log->line,levelStrings[func1(log->ssMask%64)]); 
```

非常感谢！

（抱歉，我无法提供输入数据，因为它们是我制作了解析器的十六进制信息，而且粘贴的代码太多。我希望你能大致了解我正在尝试做什么。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:52:13.453

在以下几行中进行更改，它应该可以工作。

```
fprintf(fp,"%8s%8s%4d%2c",tString+11,log->file,log->line,levelStrings[func1(log->ssMask%64)]); 
```

# c++ - 动画 glutWireSphere

> ID：13205939
> 
> 赞同：1
> 
> 时间：2012-11-03T04:27:40.703
> 
> 标签：c++, opengl, glut

我怎样才能让一个线球保持静止而另一个平移？

这是我现在的代码：

```
void animate ()
{
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode (GL_MODELVIEW);    
    glPushMatrix ();

    glColor3f (1.0, 0.0, 0.0);
    glutWireSphere (1.0, 20, 20);

    glColor3f (0.0, 1.0, 0.0);
    glPushMatrix ();
    glTranslatef (0, 0.01, 0);
    glutWireSphere (0.2, 20, 20);
    glPopMatrix ();

    glPopMatrix();

    glFlush ();
    glSwapBuffers ();

    glutTimerFunc (10, animate);
} 
```

目前所发生的只是两个球体都是静止的。我想要的行为是让较大的红色球体保持静止，而较小的绿色球体慢慢向上平移。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:47:11.053

这里的问题是您在 y 轴上每帧平移相同的量。您的矩阵设置为标识每一帧，因此您较小的绿色球体始终位于`(0.0,0.01,0.0)`.

尝试跟踪位置并增加。

```
static float yPos = 0.0f;

glColor3f (0.0, 1.0, 0.0);
glPushMatrix ();
glTranslatef (0, yPos, 0);
glutWireSphere (0.2, 20, 20);
glPopMatrix ();

yPos += 0.01f; 
```

# c++ - int main()的返回值是什么意思，如何显示？

> ID：13205941
> 
> 赞同：1
> 
> 时间：2012-11-03T04:27:43.023
> 
> 标签：c++, c, return

> **可能重复：**
> [main() 在 C/C++ 中应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)

我在 C 中有这个简单的程序：

```
#include <stdio.h>

int main()
{
  return 8;
} 
```

返回值的含义是什么，如何显示，或者如何使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:32:49.147

> **返回值的含义是什么？**

它用于将`main()`函数的状态返回给调用者`main()`：

**参考：**
**C++03 标准：18.3 开始和终止**

> 最后，控制权返回到主机环境。**如果状态为零或 EXIT_SUCCESS，则返回状态成功终止的实现定义形式**。**如果状态为 EXIT_FAILURE，则返回状态未成功终止的实现定义形式**。否则返回的状态是实现定义的。
> 
> **如何显示它，或如何使用它？**

就像您将显示或使用任何其他函数的返回值一样。`main()`只是 C/C++ 中的另一个函数，在这方面 main 并没有什么特别之处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T04:30:52.967

在类 unix 系统上，结果代码可以这样显示：

```
$ ./myprogram
$ echo $?
8
$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T04:32:46.260

`0`或`EXIT_SUCCESS`给出一些实现定义的“成功退出”值。在某些系统上，这不一定直接通过。例如，在 VMS 上，偶数值表示失败，奇数值表示成功，所以`return 0;`在程序中实际上返回了一个非零值（如果我没记错的话，是 1）给 shell。

`EXIT_FAILURE`给出一些实现定义的“失败退出”值。

C 和 C++ 标准不尝试定义任何其他内容，但在典型系统（Windows、Linux 等）上，至少该值的低 8 位将作为程序的返回值传递回环境.

您可以从另一个程序（尤其是 shell）中使用它来确定这是成功还是失败（如果是，可能是如何/为什么失败）。你可以通过生成这个程序来显示它，收集返回的值，然后像任何其他数字一样打印出来：

```
#include <stdlib.h>
#include <stdio.h>
#include <process.h>
#include <signal.h>

int main(int argc, char **argv) {
    int retval;

    signal(SIGINT, SIG_IGN);
    retval = spawnvp(P_WAIT, argv[1], argv+1);

    printf("%s returned: %d\n", argv[1], retval);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T04:31:15.553

return 0 表示正常退出。return x with x != 0 表示以“错误”终止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T06:54:11.287

返回的值被发送到派生新进程并执行您的程序的父进程。一般来说，父进程是shell，所以它什么都不做，但是如果父进程不是shell，那么父进程可以使用它来了解子进程的退出状态，并且可以根据它采取适当的行动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T04:39:18.530

The return value simply tells the CPU that the program either exited successfully or unsuccessfully. 0 means that the exit was successful, while 1 means that the exit was unsuccessful.

EXIT_SUCCESS is also equal to 0 and EXIT_FAILURE is also equal to 1\. You can return it by using the `signal()` function and the `spawnvp()` function.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-03T04:49:29.920

C 和 C++ 标准只定义了`main`返回值的两种可能含义，即 process *success*和 process *failure*。

遵循标准，您可以通过返回来调用*失败*含义，您可以通过返回 0 或通过返回`EXIT_FAILURE`来调用*成功*`EXIT_SUCCESS`含义，其中两个命名常量是由 , 定义的宏符号`<stdlib.h>`，碰巧也声明了`exit`and `abort`。

在实践中，*nix 和 Windows 的返回值直接成为**进程退出代码**。其主要用途是根据该程序的成功或失败有条件地执行其他程序。例如，在 Windows 的 [cmd.exe] 中：

```
[D:\开发\测试]
> ***md 等等***

[D:\开发\测试]
> ***(rd blah 2>nul) && echo 讨厌的目录已删除 || echo oops，无法删除目录***
讨厌的目录已删除

[D:\开发\测试]
>***回显 %errorlevel%***
0

[D:\开发\测试]
> ***(rd blah 2>nul) && echo 讨厌的目录已删除 || echo oops，无法删除目录***
糟糕，无法删除目录

[D:\开发\测试]
>***回显 %errorlevel%***
2

[D:\开发\测试]
> _

```

在 *nix 和 Windows 中，您可以返回除 C 和 C++ 标准定义的值之外的其他值。

然而，在 Windows 中，一个略高于 256 的值（我永远记不起确切的值）用作轮询进程是否已完成的状态代码，因此为避免出现问题，应该保持低于 256 或远高于它，例如32 位状态码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-03T04:33:04.420

返回值是运行结束时的消息，0 表示没有错误，任何其他值都是错误代码。

# search - lucene 按最近的联系活动对好友搜索结果进行排序

> ID：13205944
> 
> 赞同：0
> 
> 时间：2012-11-03T04:28:01.780
> 
> 标签：search, lucene, indexing

我使用 Lucene 在我的应用程序中索引用户列表。

如何按最近的活动对用户搜索结果进行排序 示例：Anna 刚刚向 Peter 发送了一封电子邮件。因此，当 Anna Search 使用字符“P”时，Peter 的排名必须高于 Pill 或 Peo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:51:38.243

您将需要使用最近的活动不断更新索引（不幸的是，这涉及删除和添加文档——Lucene 没有针对文档的“更新”操作）。

# datetime - 原则 2：如何在“时间”字段中输入大于 24 小时的长度

> ID：13205945
> 
> 赞同：2
> 
> 时间：2012-11-03T04:28:08.710
> 
> 标签：datetime, symfony, doctrine-orm, symfony-2.1

我有一个有声读物数据库。其中一些书的长度超过 24 小时。我很难创建一个将映射`length`超过 24 小时的属性的学说实体，因为一个`time`字段接受一个`DateTime`对象，并且超过 24 小时的任何时间都被添加到第二天，因此 33 小时变为 9 小时。

```
<?php

namespace Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Audiobook
{
    /**
     * @var \DateTime $length
     *
     * @ORM\Column(name="length", type="time")
     */
     protected $length; 
```

知道如何进行这项工作吗？我也在使用 Symfony2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T10:13:17.287

看起来您实际上是在寻找[`DateInterval`](http://php.net/class.dateinterval)而不是[`DateTime`](http://php.net/class.datetime)，因为后者代表了一个时间点，而“长度”不能。

这表示没有从`DateInterval`到 SQL 类型的映射（还没有？），甚至我根本不知道任何类似间隔的 SQL 类型。你可以做的是创建一个自己的类型，映射`DateInterval`到`VARCHAR`格式[`PT28H`](http://php.net/dateinterval.construct)

# android - 如何在android中获取应用程序的最后打开日期？

> ID：13205952
> 
> 赞同：2
> 
> 时间：2012-11-03T04:30:31.630
> 
> 标签：android

我想在 android 应用程序中获取其他应用程序的最后打开和使用日期...

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:33:15.303

每次打开应用程序`SharedPreferance`时保存日期，但在保存之前，只需阅读上一次保存的日期，因此现在每次用户打开应用程序时都保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:43:36.210

Just save the last opened date if you want time then date and time both. use SharedPreference to store. The date and time will be stored in milliseconds. Then when you open your application you can retrieve that. Other alternative is to use SQLite Database. Store the last opened date in database. By single row you can work here by upgrading the database everytime you open the application.

It will work like blow example.

```
@Override
public void onResume() {
Editor e = PreferenceManager.getDefaultSharedPreferences(this).edit();
e.putString("last_activity", getClass().getSimpleName());
e.commit();

super.onResume();
} 
```

# javascript - D3.symbol 在屏幕一角。我想移动它

> ID：13205961
> 
> 赞同：0
> 
> 时间：2012-11-03T04:31:35.350
> 
> 标签：javascript, d3.js

```
d3.select("#svgpathSVGdata").select("svg").append("path")
    .attr("d", d3.svg.symbol().type("triangle-up"))
    .attr("transform", "translate(0,0)")
    .style("fill", "black"); 
```

这是我页面左上角的 svg.symbol。我希望至少将它放在中间，是否可以用 x 或 y 移动它？[http://jsfiddle.net/xwZjN/21/](http://jsfiddle.net/xwZjN/21/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:31:22.157

问题与您如何选择 svg 元素来附加路径元素有关。

在代码的开头，您创建一个新`svg`元素并向其中添加一个`g`元素，然后将其转换为所需的位置：

```
 var svg = d3.select("#chart").append("svg:svg") 
    .append("svg:g")
    .attr("transform", "translate(" + r + "," + r +") rotate(180) scale(-1, -1)"); 
```

重要的是要意识到变量`svg`对应于内部`g`元素。它的原点位于弧线的中心（从左上角平移 (500,500)）。这是您要向其追加新元素的元素。事实上，在您的大部分代码中，您确实使用了该变量。例如：

```
 var node = svg.selectAll("circle.node")
       .data(nodes)
     .enter().append("path")
       .attr("class", "node") 
```

现在，当您添加黑色三角形时，您使用了以下内容：

```
d3.select("#chart").select("svg").append("path") 
```

但是，这将选择外部`svg`元素，而我们想选择内部`g`元素。当然，您可以通过以下方式解决它：

```
d3.select("#chart").select("svg").select("g").append("path") 
```

，但更简洁的方法是继续使用 svg 变量：

```
svg.append("path")
    .attr("d", d3.svg.symbol().type("triangle-up"))
    .attr("transform", "translate(0,0)")
    .style("fill", "black"); 
```

请参阅更新的小提琴：http: [//jsfiddle.net/xwZjN/24/](http://jsfiddle.net/xwZjN/24/)

# windows-8 - 是否可以在 Win 8 中隐藏 SIP（ 软键盘）？

> ID：13205963
> 
> 赞同：0
> 
> 时间：2012-11-03T04:31:53.047
> 
> 标签：windows-8, windows-store-apps, winrt-xaml

当用户编辑记录时，XAML 弹出窗口会显示一个小表单。

当用户将焦点放在 TextBox 上时，会出现软键盘。

这很好。

OnKeyDown (if `Enter`) 我提交用户的更改。

提交更改后，我隐藏了 XAML 弹出窗口。

即使表单不可见，SIP 仍然可见。

处理这种情况的正确方法是什么？

PS：这（[在 windows8 上以编程方式显示/隐藏键盘](https://stackoverflow.com/questions/10129550/show-hide-keyboard-programmatically-on-windows8)）不是解决此问题的方法。那是因为问题是想阻止它显示。我需要它来隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:37:53.160

在隐藏弹出窗口之前禁用 texbox，将焦点移到不会使用键盘的地方（比如透明的 0x0 边框），也许？

# javascript - JSON/jQuery 语法问题？

> ID：13205964
> 
> 赞同：2
> 
> 时间：2012-11-03T04:32:20.093
> 
> 标签：javascript, jquery, html, json

我正在尝试从文件夹中读取图像列表以创建具有图像背景的 DIV（用作图像滑块）。我写的jQuery如下：

```
$.getJSON('../functions.php', function(images) {
  images.each( function() {
    $('#main').prepend('<div class="slider" style="background-image:url(' + ' (this) + ');"></div>');
  });
}); 
```

不幸的是，这不起作用...我在控制台中收到的错误消息是：

> Uncaught SyntaxError: Unexpected token ILLEGAL

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:33:46.333

SO中突出显示的语法给了我线索，您需要将其更改为：

```
$('#main').prepend('<div class="slider" style="background-image:url(' + this + ');"></div>'); 
```

你在那里有一个额外的报价（并且不需要`()`周围`this`......虽然它不会受到伤害。

**更新**：

在解决了引用问题并且您收到了另一个错误之后，问题似乎是您的`images`JSON 正试图用 迭代`.each`，这不能用于对象文字。`.each`用于 jQuery 对象（因此用 包装`images`）`$()`或用于迭代对象/数组（`$.each()`）的调用。你需要使用类似的东西：

```
$.each(images, function () {    // <---- I prefer
// or
$(images).each(function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:34:32.807

您没有正确关闭报价。除此之外，假设它`images`是一个数组，您需要将它包装在 jQuery 对象中，以便访问对象的方法，`$.each()`作为其中之一。否则，正如@Ian 已经说过的那样，您可以`$.each(array, function() { //do stuff });`从不同的角度使用，只需将数组作为第一个变量传递，无论您使用匿名函数做什么。

正如您之前所说，您是色盲，因为语法突出显示对您毫无用处，我建议您至少计算您的引号对。在非常冗长的代码上..这会变得很困难..所以我唯一可以建议的是IDE（集成开发环境），例如NetBeans（我个人使用的）。

```
$.getJSON('../functions.php', function(images) {
    $(images).each( function() {
        $('#main').prepend('<div class="slider" style="background-image:url(' + this + ');"></div>');
    });
}); 
```

# javascript - 在 asp.net 网站上是否可以在结束正文标记之前放置 javascript？

> ID：13205965
> 
> 赞同：0
> 
> 时间：2012-11-03T04:32:28.207
> 
> 标签：javascript, asp.net, performance

我几乎说出了我要问的问题。但是，在 asp.net 网站上是否可以将所有外部 .js 文件放在母版页上的结束正文标记**之前？**

我只是要摆脱 yslow 和 google speed 所显示的内容。我无法组合这些 javascript，所以我试图在“**页面加载后**”加载它们，但这样做会使它们毫无用处；**我的一些 jquery 东西不起作用**。

我将我的 .js 文件移到了开始的正文标记上方，它们可以工作。我究竟做错了什么？**页面加载后**我能做些什么来加载我的 .js 文件？感谢任何人可以提供的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:58:05.280

“在 asp.net 网站上是否可以在结束正文标记之前放置 javascript？”

简短的回答。是的。

长答案。这取决于javascript。

有些事情在页面加载后可能效果不佳，因为正如所写，它们只*需要*在 DOMReady 或之前加载某些资源，后续逻辑可能会依赖于此。也就是说，如果您有任何在 DOMReady 上添加图像的 jQuery，然后需要处理这些图像，获取它们的高度或其他什么，您可能会在页面加载时运行一些代码（在加载图像之后）。如果页面*已经*加载，则此策略不起作用。 `onload`IIRC，不会开火两次。

一定要这样写吗？不，最好编写一些仅在验证已加载每个图像（或任何其他资源）之后运行的代码，如果您牢记正确的代码片段，这通常很容易，但事实并非如此微不足道的，要么。

“我做错了什么？在页面加载后我能做些什么来加载我的 .js 文件？”

有很多方法可以“错误地”做事情，我敢打赌，一个人可能会写一整章的各种检查，但仍然不能涵盖所有情况。我这样说并不是要阻止您尝试重写以便在页面加载后加载它们，因为我认为涵盖*常见*情况很容易——我只是不相信自己能准确列出最常见的情况我的头顶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:02:23.373

即使在 asp.net 网站中，也可以将 js 文件放在结束 body 标记之前，这通常被认为是最佳实践。但是，母版页可能会有点烦人/棘手/混乱。

从好的方面来说，你只需要引用一次 jquery（或其他）就可以了。但是，如果您在正文的控件/部分中使用 javascript/jquery，它将在加载母版页上的文件之前执行。

您可以采取以下措施来应对这些竞争条件...

将您的 javascript 包装在`window.onload = function() { /*your code*/ }`. 这将等到页面完成加载（图像、外部文件等），然后再被调用。

我的选择（在 asp.net MVC 上工作）是使用`RenderSection()`. [详情在这里](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)。Webforms 中可能有等价物，也许有人可以插话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:02:58.243

正如他们在评论中所说，JavaScript 从上到下加载。因此，如果在您的正文中调用您在脚本中定义的函数，该函数在以后加载，您可能/将会遇到错误。您可能想要做的是将这些脚本（位于正文中间的脚本）移动到它自己的文件中，并用准备好的文档保护将它们包围。

```
$(document).ready(function () {
  //Your code in here
}); 
```

这将保证在文档 dom 准备好之后执行代码。还要确保在您的库和依赖项之后添加此文档。

这也将使您的 JavaScript 更易于维护。

# angularjs - 让 Angular Bootstrap 手风琴工作

> ID：13205966
> 
> 赞同：5
> 
> 时间：2012-11-03T04:32:41.370
> 
> 标签：angularjs, angular-ui

我没有运气让手风琴从这个 repo 中工作：[https ://github.com/angular-ui/bootstrap](https://github.com/angular-ui/bootstrap)

好像标题不显示，我不知道为什么。

**的HTML：**

```
<!doctype html>
<html ng-app="myApp">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Angular UI Test</title>
    <meta charset="utf-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css" />
    <script src="https://raw.github.com/angular-ui/bootstrap/master/src/accordion/accordion.js"></script>
    <script src="app.js"></script>
    <style type="text/css">
        .wrap {width:960px;margin:0 auto;}
    </style>
</head>
<body>
    <div class="wrap" ng-controller="MyCtrl">
        <accordion>
            <accordion-group title="Title">This has a one word title.</accordion-group>
            <accordion-group title="Title2">This also has a one word title.</accordion-group>
            <accordion-group title="Title With Spaces">This has a title with spaces!</accordion-group>
        </accordion>
    </div>
</body> 
```

**JS：**

```
var myApp = angular.module('myApp',['ui.bootstrap.accordion']);

function MyCtrl($scope) {
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:01:42.500

你需要放 ' ' 来包裹标题

这里有 3 种不同的设置方法

```
<accordion>
            <accordion-group title="title">This has a one word title.</accordion-group>
            <accordion-group title="Title2='Title 2' ">This also has a one word title.</accordion-group>
            <accordion-group title=" 'Title 3' ">This has a title with spaces!</accordion-group>
</accordion> 
```

这是工作的[小伙伴](http://plnkr.co/edit/cDUD4o)

# file-upload - 将文件上传到 Amazon S3

> ID：13205971
> 
> 赞同：1
> 
> 时间：2012-11-03T04:32:50.593
> 
> 标签：file-upload, amazon-s3, extjs, sencha-touch-2

我正在使用 Sencha Touch 2 构建一个移动网络应用程序，我需要将文件从应用程序上传到 Amazon S3，并从 S3 获取文件 url。

PHP部分快完成了，我应该如何实现我的sencha程序以允许用户单击一个按钮，打开文件对话框，选择文件并调用PHP文件将文件上传到S3？

欢迎任何想法或建议！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:10:15.057

两天后终于弄明白了！

是的，无法使用 Sencha 访问 Android 文件系统和上传文件。

我放弃了使用Sencha的拍照功能，使用phonegap的拍照和文件传输功能，访问文件系统，然后上传到S3。

```
console.log("camera should be called!"); 
        navigator.camera.getPicture(uploadPhoto,
                function(message) { alert('get picture failed'); },
                { quality: 50, 
                destinationType: navigator.camera.DestinationType.FILE_URI,
                sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY }
                );
        function uploadPhoto(imageURI) {
            console.log(imageURI);
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(imageURI, "http://54.251.39.219/index.php", win, fail, options);
        }

        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
        }

        function fail(error) {
            alert("An error has occurred: Code = " = error.code);
        } 
```

服务器端的 PHP 文件：

```
<?php
include('image_check.php');
$msg='';
if($_SERVER['REQUEST_METHOD'] == "POST")
{
echo '<b>S3 File URL:</b>';
$name = $_FILES['file']['name'];
$name = $name . '.jpg';
$size = $_FILES['file']['size'];
$tmp = $_FILES['file']['tmp_name'];
$ext = getExtension($name);

if(strlen($name) > 0)
{
echo "strlen ok";
echo "filename is ".$name;
echo "extension is ".$ext;
if(in_array($ext,$valid_formats))
{

if($size<(1024*1024))
{
include('s3_config.php');
//Rename image name. 
$actual_image_name = time().".".$ext;
if($s3->putObjectFile($tmp, $bucket , $actual_image_name, 

S3::ACL_PUBLIC_READ) )
{
$msg = "S3 Upload Successful.";
echo 'upload successful!';  
$s3file='http://'.$bucket.'.s3.amazonaws.com/'.$actual_image_name;
echo "<img src='$s3file' style='max-width:400px'/><br/>";
echo '<b>S3 File URL:</b>'.$s3file;

}
else
echo "S3 Upload Fail.";

}
else
echo "Image size Max 1 MB";

}
else
echo "Invalid file, please upload image file.";
}
else
echo "Please select image file";

}

?> 
```

注意，上传的文件是没有扩展名的，所以我需要给它一个扩展名……关于S3的配置，请参考S3官网的secretkey……

# java - 我的世界史莱姆计算器算法

> ID：13205974
> 
> 赞同：-2
> 
> 时间：2012-11-03T04:33:21.543
> 
> 标签：java, python, minecraft

我想创建一个 minecraft 粘液计算器，我在[这里](http://www.minecraftwiki.net/wiki/Slime#Spawning)找到了算法。但是，我对 java 不太了解，我想把它翻译成 python。要做到这一点，我需要知道类似的东西是什么`0x4c1906`意思。这只是一个基本指针，我可以在 python 中保持相同吗？我是否必须使用某种二进制转换或其他东西？我对指针是什么以及在我的 python 编程中应该如何处理它们感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:36:08.243

`0x4c1906`不是指针，它是十六进制值，十进制表示 4987142。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T19:26:07.380

如果您想用 Python 编写代码，但使用 Java 的伪随机数生成器，请查看 Jython！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:40:13.480

java代码片段中的几个十六进制常量，

```
Random rnd = new Random(seed + 
                    (long) (xPosition * xPosition * 0x4c1906) + 
                    (long) (xPosition * 0x5ac0db) + 
                    (long) (zPosition * zPosition) * 0x4307a7L + 
                    (long) (zPosition * 0x5f24f) ^ 0x3ad8025f);
return rnd.nextInt(10) == 0; 
```

用于计算随机数生成器（RNG）的种子。要复制 java 代码的效果，您需要使用 java 运行时系统提供的 RNG。在 C++ 中，通过与 java 非常相似的 C++ 代码很容易为种子计算相同的值，并且通过 srand() 很容易初始化 RNG，但随机数序列在 C++ 中通常与在 java 中不同。如[旧 daniweb 帖子](http://www.daniweb.com/software-development/cpp/threads/1769/c-random-numbers#)中所述，不同的 C++ 实现通常使用彼此不同的 RNG，并且给定任何种子开始将生成不同的数字序列。相比之下，[java 标准](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)为类指定了“特定算法” `Random`，以使结果可复制和可移植。请参阅链接以获取您需要实现的额外代码位以获得相同的结果。

# python - 在替换期间访问捕获组

> ID：13205982
> 
> 赞同：1
> 
> 时间：2012-11-03T04:34:44.980
> 
> 标签：python, regex

我有一个包含十进制数字的文本文件，并且想要四舍五入任何有小数 >= `0.5`，否则我想截断小数，例如，`23.7897`变成`24`和`17.2395`变成`17`。

<`0.5`情况对于 : 来说不是问题`re.sub`：

```
re.sub(r'(\d+)\.[0-4]\d*', r'\1', line) 
```

但是，对于 >=`0.5`情况，我想知道是否有办法`\1`在替换期间以某种方式操纵捕获组？它是否存储在任何地方以便可以发送到函数，例如：

```
re.sub(r'(\d+)\.[5-9]\d*', roundUp('\1'), line) 
```

where`roundUp()`返回一个表示值的字符串`\1 + 1`。

当然有一种方法可以`\1`在替换期间增加 inline ，而无需循环匹配 from `findall`，增加整数部分，然后用重新查找模式`re.sub`并将其替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:49:54.817

您可以使用任意可调用对象进行替换，那么这对您有用吗？

```
re.sub(r'\d+\.\d*', lambda match: str(int(round(float(match.group(0))))), line) 
```

# .htaccess - 如何使用 HTACCESS 重写 url？

> ID：13205986
> 
> 赞同：1
> 
> 时间：2012-11-03T04:35:41.513
> 
> 标签：.htaccess, url-rewriting, rewrite

我的 HTACCESS 文件在我的本地服务器上运行良好，但在我的服务器上无法运行。

在我的 HTACCESS 文件中

```
Options FollowSymLinks
RewriteEngine On
RewriteRule   ^index/?$   http://www.vividkerala.com/index.php  [NC] 
```

它只是重定向而不是重写。

我犯了什么错误吗？请帮助我..

# java - stringindexoutofbounds 与货币转换器 java 程序

> ID：13205990
> 
> 赞同：1
> 
> 时间：2012-11-03T04:36:22.697
> 
> 标签：java

我无法显示摘要。我应该通过添加对象数组来修改以前的 Java 分配。在循环中，实例化每个单独的对象。确保用户不能继续添加超出数组大小的另一个外部转换。用户从菜单中选择退出后，提示用户是否要显示摘要报告。如果他们选择“Y”，则使用您的对象数组，显示以下报告：

```
Item     Conversion       Dollars     Amount  
 1       Japanese Yen     100.00    32,000.00   
 2       Mexican Peso     400.00    56,000.00  
 3       Canadian Dollar  100.00     156.00 
```

等等

转化次数 = 3

编译时没有错误..但是当我运行程序时它很好，直到我点击 0 结束转换并让它询问我是否想查看摘要。此错误显示：

线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：Lab8.main(Lab8.java:43) 的 java.lang.String.charAt(String.java:658) 的 0

我的代码：

> ```
> import java.util.Scanner;
> import java.text.DecimalFormat;
> 
> public class Lab8
> {
>     public static void main(String[] args)
>     {
>         final int Max = 10;
>         String a;
>         char summary;
>         int c = 0;
>       Foreign[] Exchange = new Foreign[Max];
>       Scanner Keyboard = new Scanner(System.in);
> 
>       Foreign.opening();
> 
>         do
>         {
>          Exchange[c] = new Foreign();
>            Exchange[c].getchoice();
>          Exchange[c].dollars();
>          Exchange[c].amount();
>          Exchange[c].vertical();
>          System.out.println("\n" + Exchange[c]);
>          c++;
> 
>   System.out.println("\n" + "Please select 1 through 4, or 0 to quit" + >"\n");
>          c= Keyboard.nextInt();
> 
>         }
>           while (c != 0);
> 
>         System.out.print("\nWould you like a summary of your conversions? (Y/N): ");
>               a = Keyboard.nextLine();
>               summary = a.charAt(0);
>               summary = Character.toUpperCase(summary);
> 
>       if (summary == 'Y')
>               {
>       System.out.println("\nCountry\t\tRate\t\tDollars\t\tAmount");
>                  System.out.println("========\t\t=======\t\t=======\t\t=========");
>         for (int i=0; i < Exchange.length; i++)
>         System.out.println(Exchange[i]);
> 
>           Foreign.counter();
>           }
>     }
> } 
> ```

我查看了第 43 行及其这一行： summary = a.charAt(0);

但是我不确定它有什么问题，有人可以指出吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:41:41.890

The problem is not exactly with that line, rather with the last line of the previous while. You have read your `int` using: -

```
c= Keyboard.nextInt(); 
```

If you see the documentation of [`Scanner#nextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29) method, it reads the next token from the user input. So, when you pass an integer value, then the `linefeed` at the end which is also passed as a result of you pressing `enter` is not read by `Keyboard.nextInt`, which is then leftover to be read by: -

```
a = Keyboard.nextLine(); 
```

after the `while` exits. So, basically this statement is reading the left over linefeed by the prevoius `Keyboard.nextInt` call, and thus `a` contains an `empty` string, with a `newline` at the end. And hence you are getting that `Exception`.

**Workaround: -**

You can fire an empty `Keyboard.nextLine` before this statement, which will consume the `linefeed` as its input, so that your next user input starts after it.

```
 // Your code before this while
} while (c != 0);

Keyboard.nextLine();  // Add this line before the next line

System.out.print("\nWould you like a summary of your conversions? (Y/N): ");
a = Keyboard.nextLine(); 
```

* * *

**Or, another way** is that you can use `Keyboard.nextLine` to read the integer value also. And then convert it to integer using `Integer.parseInt` method. But be careful, you would have to do some exception handling. So if you still to study about `Exception Handling`, then you can go with the first way. So, inside your `do-while`, you can do it like this: -

```
try {
    c = Integer.parseInt(Keyboard.nextLine());
} catch (NumberFormatException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:02:19.377

这是常见的问题。当您使用`c= Keyboard.nextInt();`时，它会读取`int`. 如果在此语句期间按下了返回键，则将`a = Keyboard.nextLine();`从输入缓冲区中的前一个语句读取一个空字符串作为 subdue。

你有两个选择：

1.  在读取为之前添加一个额外`Keyboard.nextLine();`的清理缓冲区`a``a = Keyboard.nextLine();`

2.  如果你想让它充分证明以避免读取空行时出现问题（使用按返回键而不输入日期），然后放置一个 while 循环，如下所示：

    ```
    a = "";
    while(a.length() <1){
       a = Keyboard.nextLine();
    } 
    ```

    这将确保`a`has `string length >1`，当它退出循环时。有了真正的输入，它就不会进行任何迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:38:33.530

这是我的 Console 类，我用它代替 Scanner 来读取命令行应用程序中的键盘输入。请注意，该类“包装”了 Java 1.6 中引入的标准 java.io.Console。

您可以从我的控制台类中挖掘出您需要的方法，将它们直接放在您的`Lab8`类中......但我鼓励您通过创建自己的“键盘”类，尽早习惯于“分离关注点”到不同的类中，作为我的控制台的精简版。

```
package krc.utilz.io;

import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;

/**
 * A static library of helper methods to read keyboard input.
 * <p>
 * <strong>usage:</strong>
 * <code>
 *   import krc.utilz.io.Console;
 *   while ( (score=Console.readInteger("Enter an integer between 0 and 100 (enter to exit) : ", 0, 100, -1)) != -1) { ... }
 * </code>
 */
public abstract class Console
{
  private static final java.io.Console theConsole = System.console();
  static {
    if ( theConsole == null ) {
      System.err.println("krc.utilz.io.Console: No system console!");
      System.exit(2); // 2 traditionally means "system error" on unix.
    }
  }
  private static final DateFormat dateFormatter = new SimpleDateFormat("dd/MM/yyyy");
  private static final DateFormat timeFormatter = new SimpleDateFormat("HH:mm:ss");

  public static String readString(String prompt) {
    String response = readLine(prompt);
    if(response==null) throw new NullPointerException("response cannot be null");
    return response;
  }

  public static String readLine(String prompt) {
    if (!prompt.endsWith(" ")) prompt += " ";
    System.out.print(prompt);
    return theConsole.readLine();
  }

  public static String readString(String prompt, String regex) {
    while(true) {
      String response = readString(prompt);
      if ( response.length() > 0 ) {
        if ( response.matches(regex) ) {
          return response;
        }
      }
      System.out.println("Oops: A match for "+regex+" is required!");
    }
  }

  public static Date readDate(String prompt) {
    while(true) {
      try {
        return dateFormatter.parse(readString(prompt+" (dd/MM/yyyy) : "));
      } catch (java.text.ParseException e) {
        System.out.println("Oops: "+e);
      }
    }
  }

  public static Date readTime(String prompt) {
    while(true) {
      try {
        String response = readWord(prompt+" (HH:mm:ss) : ");
        return timeFormatter.parse(response);
      } catch (java.text.ParseException e) {
        System.out.println("Oops: "+e);
      }
    }
  }

  public static String readWord(String prompt) {
    while(true) {
      String response = readString(prompt);
      if(response.length()>0 && response.indexOf(' ')<0) return response;
      System.out.println("Oops: A single word is required. No spaces.");
    }
  }

  public static String readWordOrNull(String prompt) {
    while(true) {
      String response = readLine(prompt);
      if(response==null||response.length()==0) return null;
      if(response.indexOf(' ')<0 ) return response;
      System.out.println("Oops: A single word is required. No spaces.");
    }
  }

  public static char readChar(String prompt) {
    while ( true ) {
      String response = readString(prompt);
      if ( response.trim().length() == 1 ) {
        return response.trim().charAt(0);
      }
      System.out.println("Oops: A single non-whitespace character is required!");
    }
  }

  public static char readLetter(String prompt) {
    while(true) {
      String response = readString(prompt);
      if ( response.trim().length() == 1 ) {
        char result = response.trim().charAt(0);
        if(Character.isLetter(result)) return result;
      }
      System.out.println("Oops: A single letter is required!");
    }
  }

  public static char readDigit(String prompt) {
    while(true) {
      String response = readString(prompt);
      if ( response.trim().length() == 1 ) {
        char result = response.trim().charAt(0);
        if(Character.isDigit(result)) return result;
      }
      System.out.println("Oops: A single digit is required!");
    }
  }

  public static int readInteger(String prompt) {
    String response = null;
    while(true) {
      try {
        response = readString(prompt);
        if ( response.length()>0 ) {
          return Integer.parseInt(response);
        }
        System.out.println("An integer is required.");
      } catch (NumberFormatException e) {
        System.out.println("Oops \""+response+"\" cannot be interpreted as 32-bit signed integer!");
      }
    }
  }

  public static int readInteger(String prompt, int lowerBound, int upperBound) {
    int result = 0;
    while(true) {
      result = readInteger(prompt);
      if ( result>=lowerBound && result<=upperBound ) break;
      System.out.println("An integer between "+lowerBound+" and "+upperBound+" (inclusive) is required.");
    }
    return(result);
  }

  public static int readInteger(String prompt, int defaultValue) {
    String response = null;
    while(true) {
      try {
        response = readString(prompt);
        return response.trim().length()>0 ? Integer.parseInt(response) : defaultValue;
      } catch (NumberFormatException e) {
        System.out.println("Oops \""+response+"\" cannot be interpreted as 32-bit signed integer!");
      }
    }
  }

  public static int readInteger(String prompt, int lowerBound, int upperBound, int defaultValue) {
    int result = 0;
    while(true) {
      result = readInteger(prompt, defaultValue);
      if ( result==defaultValue || result>=lowerBound && result<=upperBound ) break;
      System.out.println("An integer between "+lowerBound+" and "+upperBound+" (inclusive) is required.");
    }
    return(result);
  }

  public static double readDouble(String fmt, Object... args) {
    String response = null;
    while(true) {
      try {
        response = System.console().readLine(fmt, args);
        if ( response!=null && response.length()>0 ) {
          return Double.parseDouble(response);
        }
        System.out.println("A number is required.");
      } catch (NumberFormatException e) {
        System.out.println("\""+response+"\" cannot be interpreted as a number!");
      }
    }
  }

  public static double readDouble(String prompt, double lowerBound, double upperBound) {
    while(true) {
      double result = readDouble(prompt);
      if ( result>=lowerBound && result<=upperBound ) {
        return(result);
      }
      System.out.println("A number between "+lowerBound+" and "+upperBound+" (inclusive) is required.");
    }
  }

  public static boolean readBoolean(String prompt) {
    String response = readString(prompt+" (y/N) : ");
    return response.trim().equalsIgnoreCase("Y");
  }

  public static java.io.Console systemConsole() {
    return theConsole;
  }

} 
```

干杯。基思。

PS：通过练习，这会变得容易得多……你进展顺利……继续加油吧。

# permutation - 通过移动行生成所有可能的二维数组组合

> ID：13205993
> 
> 赞同：2
> 
> 时间：2012-11-03T04:36:38.313
> 
> 标签：permutation, combinations

我们有一个大小为 NxN 的 2D 数组。我们选择任何行并将其向左或向右移动。就像如果一行是 "3 4 5 6" 我们可以将其向右移动 1 个单位以获得 "6 3 4 5" 。所以我必须使用如上所示的行移位从给定数组中打印所有可能的二维数组。

它的组合非常棘手，我反复尝试，但它对我来说变得太复杂了，所以我认为如果我们递归地解决这个问题应该会更容易，但无论如何我都无法完成这个问题。我的班次没有问题，但我在生成所有可能的组合时遇到了问题。

[这](https://stackoverflow.com/questions/11326038/all-possible-combinations-of-a-2d-array)是我发现的相关但不适用于我自己的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:38:59.173

这似乎是您可以使用嵌套 for 循环执行的操作。假设您有一个可以移动二维数组中的一行的函数，称为 rowShift(rowNum, rowOffset, &theArray)...

```
int i1,i2,i3,i4;
for(i4=0; i4 <= 3; ++i4) {
    for(i3=0; i3 <= 3; ++i3) {
        for(i2=0; i2 <= 3; ++i2) {
            for(i1=0; i1 <= 3; ++i1) {
                rowShift(0, i1, theArray);
            }
            rowShift(1, i2, theArray);
        }
        rowShift(2, i3, theArray);
    }
    rowShift(3, i4, theArray);
} 
```

如果要保存每个组合，则在循环中的每个 rowShift 调用之后都需要某种 saveState() 函数。

我想您也可以将其作为递归函数来执行。

我很好奇这是用来做什么的——如果你不介意分享的话。似乎是一个有趣的问题。:)

# python - Python ImportError：没有名为资源的模块

> ID：13205997
> 
> 赞同：3
> 
> 时间：2012-11-03T04:37:11.293
> 
> 标签：python, google-app-engine, python-2.7

我正在使用 Google App Engine 项目，在项目中我无法使用此导入：

```
import resource 
```

我收到此错误：

```
ImportError: No module named resource 
```

但是，如果我启动终端并运行此代码，它可以正常工作：

```
$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import resource 
```

项目的根文件夹没有**_ *init* _** .py 文件，这是许多其他答案所暗示的。我使用 Aptana 3、OSX 10.8.2 和 Python 2.7.3。

**为什么导入在我的网站中不起作用，但在解释器中起作用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:42:00.190

您需要将`resource.py`, 或文件夹`resource`放在应用程序的目录中。GAE 使用不同的解释器，因此没有您在计算机上安装的模块。

# java - 为什么通过超文本传输 协议首次访问速度慢

> ID：13205999
> 
> 赞同：0
> 
> 时间：2012-11-03T04:37:30.997
> 
> 标签：java, http, networking, tcp, packet

我正在研究通过 http1.0 内部局域网的访问时间。我在 127.0.0.1:30000 设置 http 服务器，并让 curl 访问服务器。（http 服务器代码在[http://www.java2s.com/Code/Java/Network-Protocol/AsimpletinynicelyembeddableHTTP10serverinJava.htm](http://www.java2s.com/Code/Java/Network-Protocol/AsimpletinynicelyembeddableHTTP10serverinJava.htm)上实现， 这是一个非常简单的程序。）

> curl -I -0 "http://127.0.0.1:30000/"

有趣的是，只有第一次访问需要很长时间。第一次访问大约需要 5.0 毫秒，但第二次访问需要 0.7 毫秒。以下访问仅需不到 1 毫秒。

我用 WireShark 查看了数据包，注意到几乎需要时间占用来自服务器的 [PSH, ACK] 数据包。为什么会发生这样的差异？

（我怀疑长连接使第二次访问更快。但是，我试验了http1.0环境，长连接定义在http1.1）